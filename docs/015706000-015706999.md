# StackOverflow 问答 15706000-15706999

# html - 交互式网站和动画技术

> ID：15706000
> 
> 赞同：-4
> 
> 时间：2013-03-29T15:12:06.527
> 
> 标签：html, html5-canvas, webgl, interactive

我正在考虑在不久的将来制作交互式网站。我的问题是，如果我想制作交互式网页，我可以使用哪些不同的技术？我知道 HTML5 现在可以绘制到画布上，包括 3D。

有什么好的教程可以看。下面是我正在查看的示例网站。你认为这个应用程序使用了哪些技术？我查看了 HTML 源代码，只看到了 Javascript 文件。

我知道这可能是 HTML5，但如果是这样，他们可能使用什么框架？

[武器地球仪](http://workshop.chromeexperiments.com/projects/armsglobe/)

[间距互动](http://drones.pitchinteractive.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:23:33.577

本网站的交互性仅使用 javascript 完成。

您有 2 种方法来制作交互式网站：不使用 Javascript，或使用 HTML5/CSS3（您也可以使用 Flash 创建您的网站交互性，但 Flash 属于过去......）

# regex - Htaccess - 用正斜杠替换 .html

> ID：15706005
> 
> 赞同：2
> 
> 时间：2013-03-29T15:12:21.523
> 
> 标签：regex, apache, .htaccess, redirect, mod-rewrite

我想重定向这种形式的 URL： `/page.html?variable=value&othervar=true&thirdvar=100`

对此： `/page/?variable=value&othervar=true&thirdvar=100`

所以基本上我只想用 a替换`.html`中间的，但我需要保留它附带的 get 字符串。这是我尝试过的：`URL``forward slash`

> 重写规则 ^page.html(.+)$ /page/$1 [L,R=301]

但这似乎对我不起作用。我最近做了类似的事情，但我不知道我在这里缺少什么。感谢您的任何意见。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T15:24:29.757

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# external redirect from /example.html to /example
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+([^.]+)\.html [NC]
RewriteRule ^ /%1/ [R=301,L]

# internal forward from /example/ to //example.html
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{DOCUMENT_ROOT}/$1.html -f
RewriteRule ^(.+?)/?$ /$1.html [L] 
```

# java - 编译器错误“不兼容的类型”

> ID：15706007
> 
> 赞同：0
> 
> 时间：2013-03-29T15:12:30.910
> 
> 标签：java, class, object, methods

我收到编译器错误：

> 练习.java:47：错误：不兼容的类型时间 endTime = startTime.addMinutes(minutes);

```
 ^ 
```

必需：找到时间：无效 1 错误

我尝试使用的方法是这样的：

```
public void addMinutes(int mins) {
    this.mins += mins;
    if (this.mins >= 60) {  // check if over
        addHours(this.mins / 60);
        this.mins = this.mins % 60;
    }
    } 
```

我不确定为什么。

```
 import java.util.*;
    import java.io.*;

    public class Exercise {

        private String exercise;
        private int minutes;
        private Time startTime;
        private Time endTime;
        private int addedminutes;

        public Exercise(String exercisetype, int m, Time start) {
        this.exercise = exercisetype;
        this.minutes = m;
        this.startTime = start;
        }

        public String getType() {
        return this.exercise;
        }

        public int getMinutes() {
        return this.minutes;
        }

        public Time getStart() {
        return this.startTime;
        } 

        public Time getEnd() {
        Time endTime = startTime.addMinutes(minutes);
        return endTime;
        }        

        public int addMinutes(int added) {
        addedminutes = this.minutes + added;
        return addedminutes;
        }

        public Time setStart(Time newstart) {
        this.startTime = newstart;
        return newstart;
        }

        public String toString() {

        String startStandard = startTime.getStandard();
        String endStandard = endTime.getStandard();

        String toReturn = (this.exercise + " for " + this.minutes + " minutes," + " from " + startStandard + " to " + endStandard);
        return toReturn;
        }

        public boolean equals(Exercise exTwo) { 
        return exercise == exTwo.exercise && minutes == exTwo.minutes && startTime == exTwo.startTime;
        }

        private static String exercisetype;
        public static String getTypes() {
        String types = ("Exercise types: " + Exercise.exercisetype);
        return types;
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:20:43.747

`addMinutes`不返回值（`void`返回类型）。相反，它会更改调用它的 Time 对象的状态。

或者，更改方法以在完成后返回时间，例如：

```
public Time addMinutes(int mins) {
    this.mins += mins;
    if (this.mins >= 60) {  // check if over
        addHours(this.mins / 60);
        this.mins = this.mins % 60;
    }
    return this;
} 
```

或将您的用法更改为：

```
public Time getEnd() {
    Time endTime;
    startTime.addMinutes(minutes);
    //This seems wrong, by the way.  startTime will be modified by this call.
    endTime = startTime;
    return endTime;
} 
```

或者，更简单地说：

```
public Time getEnd() {
    startTime.addMinutes(minutes);
    return startTime;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:18:25.930

`addMinutes`不返回`Time`( `void`) 的实例，因此您不能将其分配给`endTime`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:19:19.317

你有这一行：

```
Time endTime = startTime.addMinutes(minutes); 
```

但您已声明 addMinutes ：

```
public void addMinutes(int mins) 
```

它不返回任何内容，因此没有返回值分配给 endTime。

# css - 解决浏览器之间的布局差异

> ID：15706009
> 
> 赞同：-1
> 
> 时间：2013-03-29T15:12:39.670
> 
> 标签：css, layout, browser, offset

![在此处输入图像描述](../Images/f7fe6dfee89fe02ef02709264e273d38.png)

我为搜索/登录表单创建了这个小菜单......这个语言选择器无法正常工作，我在 CSS 或 HTML 中做错了什么吗？我已经使用 position:absolute; 设置了带有标志的菜单。和margin-top（我也尝试使用“top”属性）将其定位在标志上，但是mozilla firefox上的布局仍然是偏移的。

是否有一个属性可以赋予在每个浏览器中以相同方式读取的 CSS？或者我必须使用一些 javascript 来获取用户的浏览器？

这是 HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>ZapPeers</title><link rel="stylesheet" type="text/css" href="reset.css"/><link rel="stylesheet" type="text/css" href="/index_tmp.css"/><link rel="image_src" href="/favlogo.png"/><script type="text/javascript" src="/index_tmp.js"></script></head>
<body onload="textfocus()"><div id="head"><div id="noise"></div><div id="body"><img src="src.png" alt="" name="logo" width="1" height="1" border="0" class="ind" id="logo"/><div class="ind" id="win"><form id="formzap" name="form" method="post" action="" autocomplete="off"><input type="text" name="textfield" class="ind" id="textzap" onkeypress="fadefx.init('noise', 1)" onblur="fadefx.init('noise', 0)" autocomplete="off" autofocus/><button type="submit" name="button" class="ind" id="buttonzap" value=""></button></form><div id="user"><form id="formlog" name="form" method="post" action="" autocomplete="off"><input type="text" name="textfield" class="ind textlog" placeholder="e-mail address" autocomplete="off"/><input type="password" name="textfield" class="ind textlog" placeholder="password" autocomplete="off"/><button type="submit" name="button" class="ind" id="buttonlog" value=""></button></form><ul id="flag"><li><img src="src.png" alt="" name="" width="1" height="1" border="0" class="flag" id="eng" /><ul id="list"><li><a href="willkommen.html"><img title="Deutsch" src="src.png" alt="" name="" width="1" height="1" border="0" class="flag" id="ger" /></a></li><li><a href="bienvenido.html"><img title="Español" src="src.png" alt="" name="" width="1" height="1" border="0" class="flag" id="spa" /></a></li><li><a href="bienvenue.html"><img title="Français" src="src.png" alt="" name="" width="1" height="1" border="0" class="flag" id="fra" /></a></li><li><a href="benvenuto.html"><img title="Italiano" src="src.png" alt="" name="" width="1" height="1" border="0" class="flag" id="ita" /></a></li><li><a href="yokoso.html"><img title="日本人" src="src.png" alt="" name="" width="1" height="1" border="0" class="flag" id="jpn" /></a></li><li><a href="huanying.html"><img title="中国的" src="src.png" alt="" name="" width="1" height="1" border="0" class="flag" id="chi" /></a></li></ul></li></ul><p>Sign Up • Forgot User/Pass? • About</p></div></div></div></div></body></html> 
```

这是CSS

```
body{background:url(/background.png);font:13px bold Verdana,Geneva,sans-serif;color: #071c28;}
.ind{background:url(/index_tmp.png);}
img#logo{width:630px;height:225px;background-position:0 -126px;margin-top:8px;}
div#head{width:640px;height:360px;margin:10% auto 0 auto;text-align:center;}
div#win{width:392px;height:81px;margin-left:114px;margin-right:114px;margin-top:1px;background-position:-126px 0;padding:10px;}
div#user{width:392px;margin:0px;padding:0px;}
div#flags{width:16px;height:16px;margin-left:10px;margin-top:6px;float:right;}
div#body{position:relative;width:640px;height:360px;z-index:10;}
div#noise{position:absolute;width:640px;height:360px;background-image:url(./noise.gif);z-index:1;opacity:0;filter:alpha(opacity='0');}
form{padding-top:3px;}
input{border:0px;vertical-align:top;padding:4px;opacity:0.75;filter:alpha(opacity=75);margin-right:4px;}input:hover{opacity:0.9;filter:alpha(opacity=90);}input:focus{opacity:1;filter:alpha(opacity=100);outline:none;}
button{border:0px;margin-right:1px;}button:focus{outline:none;}
input#textzap{background-position:0 -105px;width:310px;height:12px;}
input.textlog{background-position: -336px -105px;width:149px;height:12px;}
button#buttonzap{background-position:0 0;width:58px;height:21px;}
button#buttonzap:hover,button#buttonzap:focus{background-position:0 -21px;}
button#buttonzap:active{background-position:0 -42px;}
button#buttonlog{background-position:-63px 0;width:58px;height:21px;}
button#buttonlog:hover,button#buttonlog:focus{background-position:-63px -21px;}
button#buttonlog:active{background-position:-63px -42px;}
p{display:block;margin:0;margin-top:6px;font-weight: bold;text-align:left;}
a:link{text-decoration:none;}a:visited{text-decoration:none;}a:hover{text-decoration:none;}a:active{text-decoration:none;}

ul,li,li a{margin:0;padding:0;list-style:none;position:relative;display:inline;width:16px;height:16px;float:inherit;}
ul#flag{width:20px;height:20px;margin-top:5px;margin-right:10px;margin-left:6px;float:left;}
ul#list{left:-3px;float:left;display:none;width:120px;height:22px;background:url(./flag_tmp.png);padding:1px;padding-top:20px;margin-top:-18px;}
ul li{margin:2px;}
li:hover ul#list{display:block;}
img.flag{background:url(/flag_tmp.png);width:16px;height:16px;}
#ita{background-position:0 -43px;}
#spa{background-position:-16px -43px;}
#fra{background-position:-32px -43px;}
#eng{background-position:-48px -43px;}
#ger{background-position:-64px -43px;}
#jpn{background-position:-80px -43px;}
#chi{background-position:-96px -43px;}

input::-webkit-input-placeholder{color:#1b3b4d;}input:hover::-webkit-input-placeholder,input:focus::-webkit-input-placeholder{color:#315e77;}
input:-moz-placeholder{color:#1b3b4d;}input:hover:-moz-placeholder,input:focus:-moz-placeholder{color:#315e77;}
input:-ms-input-placeholder{color:#1b3b4d;}input:hover:-ms-input-placeholder,input:focus:-ms-input-placeholder{color:#315e77;} 
```

我之前没有添加这个，因为我删除了 HTML 中的每个空格，我看到它们在浏览器之间也以不同的方式解释。

- - - - - - - - - - - - -[编辑] - - - - - - - - - - - ---

```
var BrowserDetect = {
   init: function () {
      if (/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))alert("firefox")
      if (/MSIE (\d+\.\d+);/.test(navigator.userAgent))alert("MSIE")
      if (/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent))alert("Opera")
      if (/Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent))alert("Chrome")
      if (/Apple[\/\s](\d+\.\d+)/.test(navigator.userAgent))alert("Safari")
   }
} 
```

我试过用几行来检测浏览器（从最常用的）。但它似乎不起作用......我可以用它来改变布局差异作为最新的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:14:48.670

一些样式表可以帮助你

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

这重置浏览器差异

但你需要根据你需要的具体规则进行调整

您还可以使用 jQuery 和隔离规则在 body 标签等元素上动态添加类

[http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

[http://api.jquery.com/addclass/](http://api.jquery.com/addclass/)

# selenium-webdriver - Selenium 网格服务器

> ID：15706010
> 
> 赞同：1
> 
> 时间：2013-03-29T15:12:39.797
> 
> 标签：selenium-webdriver, selenium-grid

运行并行测试的理想服务器要求是什么？我们有 100 多个自动化测试要运行。目前我的服务器是英特尔四核 1.8GHz 和 32 GB 内存。我正在该服务器上运行集线器和一个节点（具有 10 个 maxInstances 的 firefox 浏览器）。我们计划购买另一台服务器。那么是拥有多台平庸的服务器还是只有一台高端服务器和多个虚拟机作为节点运行更好呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:34:35.667

从技术上讲，这并不重要。两种解决方案都可以。

水平扩展（更多服务器）总体上应该比垂直扩展（一台大服务器）更便宜且容错性更强。由于您已经集成了多个节点，因此添加新容量也会更容易。

# objective-c - 在objective-c中检索JSON数组的最基本方法是什么？

> ID：15706013
> 
> 赞同：0
> 
> 时间：2013-03-29T15:12:55.200
> 
> 标签：objective-c, arrays, json, parsing

基本上我在网页上有一个 JSON 数组，该数组在网页上工作正常，我可以将它作为字符串拉入 Objective-c，但我需要将它作为数组拉入 Objective-c。谁能告诉我最基本的方法吗？我看过一些这样做的教程，但其中大多数是 JSON 中的对象数组。

这是我将信息作为字符串提取的objective-c代码：

```
//create string to contain URL address for PHP file, the file name is index.php and the parameter: name is passed to the file
NSString *strURL = [NSString stringWithFormat:@"http://localhost:8888/page4.php?name=%@", _txtName.text];

//to execute PHP code
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString: strURL]];

//to recieve the returned value
NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

NSLog(@"%@", strResult); 
```

这是我的网页的 PHP/JSON 代码。

```
<?php

if (isset ($_GET["name"]))
        $name = $_GET["name"];
    else
        $name = "NULL";

// Make a MySQL Connection
mysql_connect("localhost", "root", "root") or die(mysql_error());
mysql_select_db("test") or die(mysql_error());
// Retrieve all the data from the "example" table
$result = mysql_query("SELECT * FROM user WHERE name = '$name'")
or die(mysql_error());  
// store the record of the "example" table into $row
$row = mysql_fetch_array( $result );

$array = array(
"0" => $row['id'],
"1" => $row['name'],
);

$json_array = json_encode($array);
echo $json_array;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:17:21.790

您可以使用以下代码将您的 json 响应转换为数组

```
 NSError* error = nil;
    NSArray *jsonArray = [NSJSONSerialization
                          JSONObjectWithData:responseData
                          options:kNilOptions 
                          error:&error]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:17:29.247

从 iOS 5 开始，Apple 提供了一个内置类来为您执行此操作。您可以设置选项以使返回的`NSArray`和`NSDictionary`容器可变，或返回的叶对象可变。它运行于`NSData`，而不是`NSString`. 使用简单：

```
NSError *error = nil;
NSArray *parsedArray = [NSJSONSerialization JSONObjectWithData:dataUrl
                                                       options:kNilOptions
                                                         error:&error]; 
```

# jsf-1.2 - 在 jsf 1.2 中使用 h:selectOneRadioButton 时出现 IllegalArgumentException

> ID：15706017
> 
> 赞同：0
> 
> 时间：2013-03-29T15:13:09.793
> 
> 标签：jsf-1.2

我有以下 JSF 1.2 应用程序 xhtml 文件的 facelet 代码：

```
<h:selectOneRadio value="#{cdM.val}"> 
       <f:selectItems value="#{userBean.myBooleanValues}" />      
</h:selectOneRadio> 
```

userBean.myBooleanValues 方法将选择项返回为：new SelectItem(Boolean.TRUE, "Yes") 和类似的“NO”

cdM.val 的类型为：Object val;

当上面的无线电组件在 UI 上呈现时，我遇到了异常。java.lang.IllegalArgumentException:Value is no String (class=java.lang.Boolean, value=true) and component form0: with path: .......没有转换器。

最奇怪的是，当 jsf facelet jar 版本为：jsf-facelets-1.1.14.jar 时，上述异常消失了。（并出现在 jsf-facelets-1.1.11.jar 中）。

除了例外，我是否需要编写任何转换器来处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:15:24.720

经过大量搜索，我解决了以下问题：

```
<h:selectOneRadio value="#{cdM.val} converter="javax.faces.Boolean"> 
       <f:selectItems value="#{userBean.myBooleanValues}" />      
</h:selectOneRadio> 
```

其中 cdM.val 包含值：“是”或“否”。转换器用于在 String (cdM.val) 和 Boolean (userBean.myBooleanValues) 之间转换值。

异常得到解决。

# android - AlarmManager 将 Activity 从睡眠中唤醒，但 Activity 意外关闭

> ID：15706018
> 
> 赞同：3
> 
> 时间：2013-03-29T15:13:16.167
> 
> 标签：android, alarmmanager, wakelock, android-wake-lock

我有一个 AlarmManager 设置警报：

```
Intent intent = new Intent(mContext, AwakeActivity.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        PendingIntent pendingIntent = PendingIntent.getActivity(mContext, PENDING_INTENT_ID, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        AlarmManager alarmManager = (AlarmManager) mContext.getSystemService(mContext.ALARM_SERVICE);
        alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + futureTime, pendingIntent); 
```

并且警报按预期工作。当闹钟响起时，我打开了 AwakeActivity。这也按预期工作。在 AwakeActivity 我有：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    // main
    super.onCreate(savedInstanceState);

    // inflate
    setContentView(R.layout.awake);

    Window window = this.getWindow();
    window.addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD); //relates to IInputConnectionWrapper issue - but not cause of instant close of app
    window.addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
    window.addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
    window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    window.addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
} 
```

这是我的清单定义：

```
<activity 
        android:name=".AwakeActivity"
        android:label="@string/activityAwake"
        android:configChanges="keyboardHidden|orientation"
        android:theme="@android:style/Theme.NoTitleBar"
        android:screenOrientation="portrait"
        android:launchMode="singleInstance"
        android:noHistory="true"
    >
    </activity> 
```

我遇到的问题是，当 AwakeActivity 启动时它不会保持打开状态。它立即关闭。但是......这只有在手机处于睡眠模式时才会发生，如果我保持屏幕打开并且 AwakeActivity 通过警报打开 - 一切都很好。

另一个但是……这发生在我运行 2.3.4 的 Droid X 而不是我的 Galaxy Nexus 4.2.2 上。我已经有一段时间了，感觉好像我做得很好。

我在这里想念什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T06:44:51.907

我自己也遇到了类似的问题。在某些设备上，设备会唤醒，而在其他设备上，活动会关闭。您是否尝试过使用 WakeLock 来查看是否会发生同样的事情？

所以声明一个全局唤醒锁变量：

```
PowerManager.WakeLock wakelock; 
```

在您的 onCreate 方法中执行以下操作：

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
wakelock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK
                | PowerManager.ACQUIRE_CAUSES_WAKEUP | PowerManager.SCREEN_BRIGHT_WAKE_LOCK
                | PowerManager.ON_AFTER_RELEASE, "tag");
wakelock.acquire(); 
```

现在你只需要释放唤醒锁，在你的 onPause 方法中说：

```
@Override
protected void onPause() {
    super.onPause();      
    wakelock.release();
} 
```

您还需要将其包含在清单文件中：

```
<uses-permission android:name="android.permission.WAKE_LOCK"/> 
```

# jenkins - 无法让 JSCover 和 PhantomJS 在 Cloudbees 上运行 Jasmine 测试

> ID：15706023
> 
> 赞同：0
> 
> 时间：2013-03-29T15:13:34.373
> 
> 标签：jenkins, jasmine, phantomjs, cloudbees, jscoverage

我目前正在尝试在 Web 服务器模式下运行 JSCover 以确定在 PhantomJS 无头浏览器中执行的 Jasmine 测试的覆盖范围。我也在使用 grunt+nodejs 来启动测试。

我在 gruntfile 中用于启动 JSCover 服务器并执行 phantomJS 的代码是：

```
// Start JSCover Server
var childProcess = require('child_process'),
var JSCOVER_PORT = "43287";
var JAVA_HOME = process.env.JAVA_HOME;

var jsCoverChildArgs = [
        "-jar", "src/js/test/tools/JSCover-all.jar",
        "-ws",
        "--branch",
        "--port="+JSCOVER_PORT,
        "--document-root=./",
        "--report-dir=target/",
        "--no-instrument=src/js/lib/",
        "--no-instrument=src/js/test/",
        "--no-instrument=src/js/test/lib/"
    ];

var jsCoverProc = childProcess.spawn(JAVA_HOME + "/bin/java", jsCoverChildArgs);

// Start PhantomJS
var phantomjs = require('phantomjs'),
var binPath = phantomjs.path,

var childArgs = [
        'src/js/test/lib/phantomjs_jasminexml_runner.js',
        'http://localhost:'+JSCOVER_PORT+'/src/js/test/SpecRunner.html',
        'target/surefire-reports'
    ];
runner = childProcess.execFile(binPath, childArgs);

runner.on('exit', function (code) {
    // Tests have finished, so clean up the process
    var success = (code === 0) ? true : false;
    jsCoverProc.kill(); // kill the JSCover server now that we are done with it

    done(success);
}); 
```

但是，当我在 cloudbees 中的 Jenkins 节点上运行 Web 服务器，然后针对它运行 phantomjs 时，我收到以下错误之一：

*   一些测试开始运行，但随后该过程失败：

    ```
    A spec : should be able to have a mock lo-dash ... 
    Warning: Task "test" failed. Use --force to continue.

    Aborted due to warnings.
    Build step 'Execute shell' marked build as failure
    Recording test results
    Finished: FAILURE 
    ```

*   PhantomJS 无法访问 JSCover 服务器：

    ```
    Running "test" task
    phantomjs> Could not load 'http://127.0.0.1:43287/src/js/test/SpecRunner.html'.
    Warning: Task "test" failed. Use --force to continue. 
    ```

对于第二个错误，我尝试使用我设置的不同端口和主机名（例如，主机名使用 127.0.0.1 或 localhost，端口使用 4327、43287 等）。端口不是在构建时动态设置的——我将它们硬编码在我的 grunt 脚本中。

关于为什么会发生上述错误或为什么我在 Cloudbees Jenkins 节点上运行和访问 JSCover 服务器时遇到问题（但从未在我的本地机器上）有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-31T07:20:33.587

因此，当您使用任何进程执行 JSCover 时，都需要时间才能启动。如果我们期望它早点出现，那么错误肯定会出现。

引用伟大的文章：[http ://blog.johnryding.com/post/46757192364/javascript-code-coverage-with-phantomjs-jasmine-and](http://blog.johnryding.com/post/46757192364/javascript-code-coverage-with-phantomjs-jasmine-and)

> 现在我有了一个满足我所有要求的代码覆盖工具，最后一部分是让这个代码作为我们 Jenkins 构建的一部分运行（它使用 grunt 脚本）。这很容易运行，但我遇到了两个一直破坏我的构建的错误：
> 
> 1.  有时 phantomJS 会无法连接到 JSCover 服务器
> 2.  有时 phantomJS 会连接到服务器，但随后会在运行期间的某个随机点放弃执行我的测试。

These were really weird issues that only occurred on my team’s Jenkins nodes and were hard to diagnose - even though they turned out to be simple fixes.

**For issue 1, that error was the result of my grunt script not waiting for JSCover to start before I executed phantomJS.**

For the second issue, it turns out that my team was using a special jasmine test runner to help with producing XML files after tests completed. The problem with this file was that it had a function that waited for Jasmine to complete its execution, but utilized an extremely short timeout before it gave up running the tests. This was a problem with Jenkins + JSCover because it took a longer time for the tests to load and run now that they had to be loaded from a web server instead of straight from the file system. Fortunately, this fix was as easy as increasing the timeout.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:04:46.483

我会说你需要在生成 JSCover 后等待一段时间 - 过去我在生成时使用 webdriver 完成了一些事情，然后等待它可用（理想情况下，你可以寻找响应并休眠，重复，直到生成的进程准备好）。

即在继续之前从 127.0.0.1:43287 查找有效的 http 响应（无论“有效”表示服务器已启动）。

# c++ - 64位系统上的Visual Studio 2012 32位编译

> ID：15706024
> 
> 赞同：2
> 
> 时间：2013-03-29T15:13:36.143
> 
> 标签：c++, visual-c++, dll, visual-studio-2012, 32-bit

我最近想为一个程序构建一个 dll 插件。问题是，该程序是 32 位的，但默认情况下，我的 Visual Studio 2012 的 C++ 编译器创建 64 位二进制文​​件，我不知道如何更改它 - 我找到了配置管理器并尝试创建一个新平台，但只有 x64作为一种选择。

我是在尝试将目标架构设置在错误的位置还是什么？是否有更新或我可以下载的东西，以便我可以创建我的 dll？是否有我可以在某处设置的编译器开关？

希望这个屏幕有帮助：

![在此处输入图像描述](../Images/a95fa57bfbfe92ebad88ababf2f7ed2b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-13T00:20:59.107

要构建 32 位架构，您必须打开项目属性窗口，然后打开链接器选项。

将 Target Machine 选项的值设置为 MachineX86。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:26:22.623

*   检查构建配置（构建 -> 配置管理器），并确保选择 32 位的 DLL 项目。
*   检查链接器设置，并确保给出正确的路径。
*   构建后，检查 .DLL 是否以正确的路径生成，并且是 32 位的（应该是！）。

您可以使用 Dependency Walker 检查 DLL 是 32 位还是 64 位。您也没有提到`/clr`此 DLL 是否使用了选项。使用`/CLR`，生成托管二进制文件。尽管此选项不会改变二进制文件的*位数*，但您可以检查是否是这种情况。

# java - ArrayDescriptor 是线程安全的吗？

> ID：15706026
> 
> 赞同：1
> 
> 时间：2013-03-29T15:13:41.977
> 
> 标签：java, oracle, jdbc, thread-safety

oracle.sql.ArrayDescriptor 的实例是线程安全的吗？

此类的 API [http://docs.oracle.com/cd/E16338_01/appdev.112/e13995/oracle/sql/ArrayDescriptor.html](http://docs.oracle.com/cd/E16338_01/appdev.112/e13995/oracle/sql/ArrayDescriptor.html)没有提及任何关于线程安全的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:39:50.600

在类上运行`javap`命令`oracle.sql.ArrayDescriptor`..可以观察到`oracle.sql.ArrayDescriptor`类的公共方法都没有同步。以下是 javap 的说明：

```
E:\users>javap oracle.sql.ArrayDescriptor
Compiled from "ArrayDescriptor.java"
public class oracle.sql.ArrayDescriptor extends oracle.sql.TypeDescriptor implem
ents java.io.Serializable{
    public static final int TYPE_VARRAY;
    public static final int TYPE_NESTED_TABLE;
    public static final int CACHE_NONE;
    public static final int CACHE_ALL;
    public static final int CACHE_LAST;
    static final long serialVersionUID;
    public static final boolean TRACE;
    public static final boolean PRIVATE_TRACE;
    public static final java.lang.String BUILD_DATE;
    public static oracle.sql.ArrayDescriptor createDescriptor(java.lang.String, java.sql.Connection) throws java.sql.SQLException;
    public static oracle.sql.ArrayDescriptor createDescriptor(java.lang.String, java.sql.Connection, boolean, boolean) throws java.sql.SQLException;
    public static oracle.sql.ArrayDescriptor createDescriptor(oracle.sql.SQLName,  java.sql.Connection) throws java.sql.SQLException;
    public static oracle.sql.ArrayDescriptor createDescriptor(oracle.sql.SQLName, java.sql.Connection, boolean, boolean) throws java.sql.SQLException;
    public static oracle.sql.ArrayDescriptor createDescriptor(oracle.jdbc.oracore.OracleTypeCOLLECTION) throws java.sql.SQLException;
    public oracle.sql.ArrayDescriptor(java.lang.String, java.sql.Connection) throws java.sql.SQLException;
    public oracle.sql.ArrayDescriptor(oracle.sql.SQLName, java.sql.Connection) throws java.sql.SQLException;
    public oracle.sql.ArrayDescriptor(oracle.sql.SQLName, oracle.jdbc.oracore.OracleTypeCOLLECTION, java.sql.Connection) throws java.sql.SQLException;
    public oracle.sql.ArrayDescriptor(oracle.jdbc.oracore.OracleTypeCOLLECTION, java.sql.Connection) throws java.sql.SQLException;
    static oracle.sql.ArrayDescriptor createDescriptor(oracle.sql.SQLName, byte[], int, byte[], byte[], oracle.jdbc.internal.OracleConnection, byte[]) throws java.sql.SQLException;
    public int getBaseType() throws java.sql.SQLException;
    public java.lang.String getBaseName() throws java.sql.SQLException;
    public oracle.jdbc.oracore.OracleTypeCOLLECTION getOracleTypeCOLLECTION();
    public int getArrayType() throws java.sql.SQLException;
    public long getMaxLength() throws java.sql.SQLException;
    public java.lang.String descType()  throws java.sql.SQLException;
    java.lang.String descType(java.lang.StringBuffer, int) throws java.sql.SQLException;
    int toLength(oracle.sql.ARRAY) throws java.sql.SQLException;
    byte[] toBytes(oracle.sql.ARRAY, boolean) throws java.sql.SQLException;
    oracle.sql.Datum[] toOracleArray(oracle.sql.ARRAY, long, int, boolean) throws java.sql.SQLException;
    java.lang.Object[] toJavaArray(oracle.sql.ARRAY, long, int, java.util.Map, boolean) throws java.sql.SQLException;
    public java.sql.ResultSet toResultSet(oracle.sql.ARRAY, long, int, java.util.Map, boolean) throws java.sql.SQLException;
    public java.sql.ResultSet toResultSet(oracle.sql.Datum[], long, int, java.util.Map) throws java.sql.SQLException;
    public java.sql.ResultSet toResultSetFromLocator(byte[], long, int, java.util.Map) throws java.sql.SQLException;
    public java.sql.ResultSet toResultSetFromImage(oracle.sql.ARRAY, long, int, java.util.Map) throws java.sql.SQLException;
    public static java.lang.Object[] makeJavaArray(int, int) throws java.sql.SQLException;
    oracle.sql.Datum[] toOracleArray(java.lang.Object, long, int) throws java.sql.SQLException;
    java.lang.Object toNumericArray(oracle.sql.ARRAY, long, int, int, boolean) throws java.sql.SQLException;
    public int getTypeCode() throws java.sql.SQLException;
    public byte[] toBytes(oracle.sql.Datum[]) throws java.sql.SQLException;
    public byte[] toBytes(java.lang.Object[]) throws java.sql.SQLException;
    public int length(byte[]) throws java.sql.SQLException;
    public oracle.sql.Datum[] toArray(byte[]) throws java.sql.SQLException;
    public oracle.sql.Datum[] toArray(java.lang.Object) throws java.sql.SQLException;
    public java.sql.ResultSet toResultSet(byte[], java.util.Map) throws java.sql.SQLException;
    public java.sql.ResultSet toResultSet(byte[], long, int, java.util.Map) throws java.sql.SQLException;
    public static int getCacheStyle(oracle.sql.ARRAY) throws java.sql.SQLException;
    static {};
} 
```

因此，假设它不是线程安全的，您应该继续使用此类。

**更新**
根据您的要求，因为该类的所有私有和公共变量都是最终的，因此实例的内部状态不会被其方法改变。但`oracle.sql.ArrayDescriptor`也继承`oracle.sql.TypeDescriptor`了其中包含非最终变量，如下所示：

```
E:\users>javap -private oracle.sql.TypeDescriptor
Compiled from "TypeDescriptor.java"
public abstract class oracle.sql.TypeDescriptor extends java.lang.Object implements java.io.Serializable{
    public static boolean DEBUG_SERIALIZATION;
    static final long serialVersionUID;
    oracle.sql.SQLName sqlName;
    oracle.jdbc.oracore.OracleNamedType pickler;
    transient oracle.jdbc.internal.OracleConnection connection;
    private static final java.lang.String _Copyright_2004_Oracle_All_Rights_Reserved_;
    public static final boolean TRACE;
    public static final boolean PRIVATE_TRACE;
    public static final java.lang.String BUILD_DATE;
    protected oracle.sql.TypeDescriptor();
    protected oracle.sql.TypeDescriptor(java.lang.String, java.sql.Connection)throws java.sql.SQLException;
    protected oracle.sql.TypeDescriptor(oracle.sql.SQLName, java.sql.Connection)throws java.sql.SQLException;
    protected oracle.sql.TypeDescriptor(oracle.sql.SQLName, oracle.jdbc.oracore.OracleTypeADT, java.sql.Connection)throws java.sql.SQLException;
    protected oracle.sql.TypeDescriptor(oracle.jdbc.oracore.OracleTypeADT, java.sql.Connection)throws java.sql.SQLException;
    public synchronized java.lang.String getName() throws java.sql.SQLException;
    public synchronized oracle.sql.SQLName getSQLName() throws java.sql.SQLException;
    void initSQLName()       throws java.sql.SQLException;
    public java.lang.String getSchemaName()       throws java.sql.SQLException;
    public java.lang.String getTypeName()       throws java.sql.SQLException;
    public oracle.jdbc.oracore.OracleNamedType getPickler();
    public oracle.jdbc.internal.OracleConnection getInternalConnection();
    public void setPhysicalConnectionOf(java.sql.Connection);
    public abstract int getTypeCode()       throws java.sql.SQLException;
    public static oracle.sql.TypeDescriptor getTypeDescriptor(java.lang.String,oracle.jdbc.OracleConnection) throws java.sql.SQLException;
    public static oracle.sql.TypeDescriptor getTypeDescriptor(java.lang.String,oracle.jdbc.OracleConnection, byte[], long) throws java.sql.SQLException;
    public boolean isInHierarchyOf(java.lang.String) throws java.sql.SQLException;
    private void writeObject(java.io.ObjectOutputStream)throws java.io.IOException;
    private void readObject(java.io.ObjectInputStream)throws java.io.IOException, java.lang.ClassNotFoundException;
    public void setConnection(java.sql.Connection) throws java.sql.SQLException;
    public static java.lang.String getSubtypeName(oracle.jdbc.OracleConnection,byte[], long) throws java.sql.SQLException;
    public void initMetadataRecursively()       throws java.sql.SQLException;
    public void initNamesRecursively()       throws java.sql.SQLException;
    public void fixupConnection(oracle.jdbc.internal.OracleConnection) throws java.sql.SQLException;
    public java.lang.String toXMLString()       throws java.sql.SQLException;
    public void printXML(java.io.PrintStream)       throws java.sql.SQLException;
    void printXML(java.io.PrintWriter, int)       throws java.sql.SQLException;
    void printXMLHeader(java.io.PrintWriter)       throws java.sql.SQLException;
    static {};
} 
```

Hence there are the possibilities that these non-final variables would changed unpredictably by various threads accessing the same object of `oracle.sql.ArrayDescriptor` class. So I still think that it is not `Thread-safe`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:27:23.197

你猜怎么了？源代码似乎无法在人们可以找到的正常地方获得，因此无法确定...除了询问 Oracle 支持。

基于 API 设计，它*可以*是线程安全的。没有设置器，从客户端的角度来看，该类似乎是不可变的。您可以通过指向`javap`字节码文件并查看实例变量是否都声明为`final`.

但是，如果您无法得到确认，安全的方法是假设该类不是线程安全的。

# sql-server - 在 vb 2008 上添加到 SQL Server 数据库的问题

> ID：15706032
> 
> 赞同：0
> 
> 时间：2013-03-29T15:14:04.010
> 
> 标签：sql-server, database, vb.net

我遇到了问题，但不知道到底有什么问题，我的代码如下：

```
Imports System.Data.SqlClient
Imports System.Data
Public Class FormAdd

Private Sub btnBack_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnBack.Click
    FormAdmin.Show()
    Me.Hide()
End Sub

Private Sub btnAdd_Click(ByRef Success As String, ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAdd.Click
    Call AddUser(Success)
    MsgBox(" " & Success & " ")
End Sub
Private Sub AddUser(ByRef Success As String)
    lblAdmin.Text = Str(chkAdminAccount.Checked)
    Dim con As New SqlConnection
    Dim lrd As SqlDataReader
    Dim inscmd As New SqlCommand

    inscmd.Parameters.AddWithValue("@Username", txtUsername.Text.Trim())
    txtUsername.Text = txtUsername.Text
    inscmd.Parameters.AddWithValue("@Password", txtPassword.Text.Trim)
    txtPassword.Text = txtPassword.Text
    inscmd.Parameters.AddWithValue("@Name", (txtName.Text.Trim))
    txtName.Text = txtName.Text
    inscmd.Parameters.AddWithValue("@AdminAccount", lblAdmin.Text.Trim)
    lblAdmin = lblAdmin
    con.ConnectionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Alwyn\Desktop\Computing A2 Alwyn\Comp4ProjectRoomBookingSystem\WindowsApplication1\WindowsApplication1\Database1.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True"
    Try
        con.Open()
        inscmd.CommandText = "INSERT INTO Admin (Username, Password, Name, AdminAccount) VALUES (@Username, @Password, @Name, @AdminAccount)"
        inscmd.Connection = con
        inscmd.ExecuteNonQuery()

    Catch ex As Exception
        MsgBox("Could not add User" & ex.Message & " ")
    Finally
        con.Close()
        inscmd.Parameters.Clear()
        Success = "User has been added"
    End Try

End Sub

End Class 
```

如果您能提供帮助，将不胜感激错误消息如下：

> 方法“Private Sub btnAdd_Click(ByRef Success As String, sender As Object, e As System.EventArgs)”无法处理事件“Public Event Click(sender As Object, e As System.EventArgs)”，因为它们没有兼容的签名。C:\Users\Alwyn\Desktop\Computing A2 Alwyn\Comp4ProjectRoomBookingSystem\WindowsApplication1\WindowsApplication1\FormAdd.vb 10 130 WindowsApplication1

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:17:58.703

btnAdd_Click 是一个事件处理程序，您不能更改其预定义的签名

```
Private Sub btnAdd_Click(ByVal sender As System.Object, ByVal e As  System.EventArgs) Handles btnAdd.Click
    Dim Success as string
    Call AddUser(Success)
    MsgBox(" " & Success & " ")
End Sub 
```

从声明中删除 Success 变量并作为局部变量插入到事件处理程序中。当然，如果您在点击事件之外也需要该变量，那么您需要在表单全局级别声明它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T18:52:44.543

如果您只想通过签名发送成功，您可以随时在签名中进行可选调用。（前任：

```
Private Sub btnAdd_Click(ByVal sender As System.Object, ByVal e As System.EventArgs, Optional ByRef Success As String = Nothing ) Handles btnAdd.Click
    If Success IsNot Nothing then 
            Call AddUser(Success)
            MsgBox(" " & Success & " ")
    End If
End Sub 
```

如果你使用 optional 关键字，并且在 sender 和 e 之后，你现在的做事方式应该完全没有问题。

# javascript - 在调试器中更改局部范围变量

> ID：15706038
> 
> 赞同：3
> 
> 时间：2013-03-29T15:14:30.623
> 
> 标签：javascript, ajax, prototypejs, scope, magento-1.4

我一直在单步执行一些 JavaScript 代码（在本例中是 Prototype 的 AJAX 库），以瞥见 responseText。我在 Firebug 和 IE Developer Tools 中读到过，您可以在断点处的任何本地范围内修改变量。

我看到我可以通过双击本地窗格中的变量或通过上下文菜单来做到这一点。我已经看到它有效，但不是一直有效，而且不是在我最需要它的时候：就在 responseText 出现时，我想对其进行编辑。

为了说明这一点：

![调试 Ajax 响应](../Images/98aa753030c53a433f08b22f684e4f8f.png)

我想更改突出显示的属性的值。

但这些变化并没有反映出来。事实上，没有任何属性变化反映在整个传输对象中。

**为什么我还要尝试这样做？** 嗯，在那个 responseText 中有一段 JavaScript 片段，它由 Prototype 的 evalScripts() 方法执行，其中可能存在语法错误。这导致 Magento 在类别编辑表单上出现“白屏死机”。我在 JavaScript 中发现了我的语法错误，并在开发环境中修复了它。但我也想在我的暂存环境（我没有写访问权限）中仔细检查这个修复。所以我的想法是在一个暂存环境客户端页面请求上截取responseText，修改它来修复JS错误，让它通过来证明我的bug修复。

我可以等到这段代码被推送并在登台上测试，但我提出这个问题的真正目的是弄清楚为什么我可以修改**一些**本地范围变量而不是其他变量。

我希望我已经问清楚了。任何帮助，将不胜感激。谢谢！

**更新（Chrome）：** 我认为值得一提的是，Chrome 支持此功能的时间已经很晚了，但最近（3 月 21 日）的开发正在进行中，根据这篇文章：

[https://code.google.com/p/v8/issues/detail?id=212](https://code.google.com/p/v8/issues/detail?id=212)

不过，这个问题的海报解释了我不知道的调试引擎的一些底层组件。很有见地。不回答我的问题，但仍然与主题有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T18:11:36.590

该`responseText`属性是只读的！您会发现无论是调试器还是任何 JS 语句或表达式都不能修改该属性。您需要先将其分配给另一个局部变量或属性，然后才能对其进行更改。我为你准备了[一个演示](http://jsfiddle.net/SU2m3/2/)。您会看到某些内置对象的某些属性的只读性质，其中`XMLHttpRequest`之一。这不是调试或检查环境的问题，而是语言环境本身的一个特性。

请注意，虽然内置浏览器对象可以是只读的，但将您自己的对象设置为只读会更加困难。该`Object.freeze`方法[存在于 ES5 中](http://ejohn.org/blog/ecmascript-5-objects-and-properties/)，但并非所有浏览器都支持（并且在撰写本文时在 V8 中会带来性能损失）。

# linux - 全新 Ubuntu 服务器根目录中的奇怪文件名

> ID：15706040
> 
> 赞同：0
> 
> 时间：2013-03-29T15:14:38.677
> 
> 标签：linux, file-io, ubuntu-12.04

这是一个奇怪的。

我最近创建了一个新的服务器（Ubuntu 12.04），它与互联网隔离，在 IDS 系统后面，同时我也立即安装了 AIDE。但是，我在根目录中发现了一些看起来很奇怪的文件，其中包含“无用”的内容。

```
root@www:/# ls -i1
56785 bin
    2 boot
    3 dev
 7685 ?E3???
 1116 etc
 3392 home
 3638 initrd.img
 3299 initrd.img.old
 1934 ???L??I??
48673 lib
 3671 lib64
   11 lost+found
18284 media
 3390 mnt
 3391 opt
24355 p?3???
    1 proc
12460 root
 5839 run
24756 ?s????
 3496 sbin
 3654 selinux
24356 soap.wsdl_cache_ttl
 3675 srv
    1 sys
 2035 `??t~??7?
 3490 tmp
 3791 usr
 3679 var
   12 vmlinuz
 3493 vmlinuz.old 
```

有问题的文件带有问号，因此无法使用常规方法删除它们。但是，我可以使用 find -inum 命令通过 inode # 对这些文件的内容进行分类，这些文件的大小都相同（154 字节），并且都包含字符“386”。

这感觉不像是妥协，尤其是因为这是一个全新的服务器，而且文件内容看起来毫无用处。我正在运行一堆 cron 作业等，所以也许它以某种方式是 cron 作业的输出。

有没有人见过这些类型的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:35:09.180

您也可以执行 rm "\?*" 并在确认时删除文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:20:15.870

我不熟悉这些文件名，仅从您的描述来看，它们对我来说也毫无用处。如果您想删除它们，这并非不可能。你只需要***非常小心***。您可以对 rm 使用 -i 标志，该标志要求对每个文件进行确认。

危险的例子：

```
rm -i * 
```

对目录中的每个文件说不，*除了*您希望删除的文件。这应该可以解决问号问题。

您可以通过将根目录内容复制到临时目录并首先在其中运行来测试这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:59:35.793

如果您的安装工作正常，我建议您安装 Virtualbox，安装您刚刚安装为虚拟机的相同 Ubuntu 映像，并检查您是否得到相同的结果。如果是，就按照兰迪说的去做，看看有没有问题。如果没有，那么您至少检查过删除这些文件时是否会出现问题。

如果它们不在那里，那么您知道安装中可能出现了问题，并且由于它是全新的安装，也许您应该考虑重新安装并查看它是否再次发生。

干杯。

# javascript - jQuery: Extend a DOM element with custom methods

> ID：15706041
> 
> 赞同：0
> 
> 时间：2013-03-29T15:14:40.577
> 
> 标签：javascript, jquery, dom

I have a couple of dom elements acting as placeholders for custom widgets. I'd like to extend them to give each type of widget a "setvalue" function like this:

`$.fn.extend($(".dial"), { setval: function(val) { });`

I don't want to extend `jQuery.fn` itself as different ypes of widgets require different `setval` methods.

Is there a way to extend DOM elements of a particular type instead of extending `jQuery.fn` itself?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:33:16.717

You can do this, however, said method may get lost when using other methods on said element. It would be better to implement the method on the element's data object, or on the widget itself.

```
$(".dial").each(function(){
    $(this).data("setval",$.proxy(function(val){
        this.value = sanitize(val);
    },this));
}).eq(0).data("setval")("foobar"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:14:09.753

The comments above have brought me to this approach using jQuery UI:

```
var WidgetDial = {
    _init: function() { ... },

    value: function(val) { ... },
};

$.widget("ui.widgetDial", WidgetDial);
$("#dial1").widgetDial();
$("#dial1").widgetDial("value", 30); 
```

# javascript - 当用户使用 KnockoutJS 提交而不是自动提交时，更新 observableArray 中的记录

> ID：15706044
> 
> 赞同：1
> 
> 时间：2013-03-29T15:14:53.307
> 
> 标签：javascript, knockout.js

我有一个在网格中呈现的 observableArray。当用户单击一行时，会弹出一个对话框表单，使用户能够编辑所选项目。我想让用户能够更新或取消他们的更改，但由于所选记录是可观察的，因此会立即进行更改。

如何将所选记录与 observableArray 分开，以便仅在用户单击“更新”时更新数据？

这是我的问题的简化版本 - 我的[小提琴](http://jsfiddle.net/bflemi3/TWMZc/)

```
function Type(data) {
    this.id = data.id;
    this.name = ko.observable(data.name);
};

function Location(data) {
    this.id = data.id;
    this.name = ko.observable(data.name);
    this.state = ko.observable(data.state);
    this.headline = ko.observable(data.headline);
    this.type = ko.observable(new Type(data.type));
};

function ViewModel() {
    var self = this;

    self.types = types;
    self.locations = ko.observableArray(ko.utils.arrayMap(seedData, function(item) {
        return new Location(item);
    }));
    self.selectedLocation = ko.observable();

    self.edit = function(item) {
        self.selectedLocation(item);
    };

    self.cancel = function() {
        self.selectedLocation(null);
    };

    self.update = function(item) {
        //do something here to push updated Location to locations observableArray
    };
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:04:44.570

我认为您的结构与我在上面评论中链接的文章中描述的编辑器模式类型非常匹配：[http ://www.knockmeout.net/2013/01/simple-editor-pattern-knockout-js .html](http://www.knockmeout.net/2013/01/simple-editor-pattern-knockout-js.html)

对于您的数据，这意味着跟踪 a`selectedItem`和 a`selectedItemForEditing`是`Location`使用所选项目的数据新创建的。

如果用户取消，那么你可以把它扔掉。如果用户接受，那么您可以获取已编辑项目的数据并将其应用于原始选定项目。

这篇文章描述了将可观察对象的创建与用数据填充它们分开，以便您始终可以调用`update`具有干净数据的方法来应用。

这是您使用这些技术更新的小提琴：http: [//jsfiddle.net/rniemeyer/JQkVs/](http://jsfiddle.net/rniemeyer/JQkVs/)

| ID | Firstname | Lastname | Department | Start Date |
| --- | --- | --- | --- | --- |
| 1 | Sam | Birch | Programming | 01/06/00 |
| 2 | George | Lo | Support | 01/07/99 |
| 3 | kevin | Walker | Programming | 01/06/05 |
| 4 | Peter | Aland | Project Management | 23/10/06 |
| 5 | Rachel | Dickinson | Design | 20/01/05 |
| 6 | John | Tsang | Support | 05/10/05 |
|  |  |  |  |  |

any thoughts on what it could be? Use $.find('tbody') to get all descendant tbodys and $.children('tbody') to get all children tbodys. Try this: this.thead = this.table.children('thead'); this.tbody = this.table.children('tbody'); this.tfoot = this.table.children('tfoot'); this.elements = this.table.find('tr'); javascriptjquerymootools 4 2 回答 2 This answer is useful 1 用于$.find('tbody')获取所有tbody的后代和$.children('tbody')获取所有tbody的孩子。尝试这个： this.thead = this.table.children('thead'); this.tbody = this.table.children('tbody'); this.tfoot = this.table.children('tfoot'); this.elements = this.table.find('tr'); 于 2013-03-29T15:41:36.450 回答 This answer is useful 0 Altough I don't see jQuery being loaded in your HTML sample, your question's title suggests that your are using jQuery in your site. If that's the case, your problem would be that there's a conflict between Mootools and jQuery because both libraries defines the $ function. To fix the issue, you will have to use jQuery.noConflict(). 于 2013-03-29T15:45:20.103 回答 Related 1 c# - 实施增量搜索来过滤 GridView 结果？ 1 postgresql - Postgres 不使用“created_time / 60”的索引 1 ruby-on-rails - 2 路加密算法，适用于 Ruby 和 Node.JS，只加密字母和数字 1 google-apps-script - 为什么我的代码有时会在应用程序脚本中产生不同的结果？ 2 arrays - 合并两个数组以在 ruby 中创建一个二维数组 2 nginx - Nginx 不提供静态文件 1 windows - Windows 与 Linux/UNIX 中的 Perl 的 waitpid() 和 IPC::Open2 1 sql-server - SQL 嵌套 IF 不起作用 2 ubuntu - git-svn 恢复本地提交的删除 1 xquery - XQuery：“toString 方法”包括元素 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# javascript - jQuery对象# has no method 'getElement' I have been trying to use set up this table here. http://www.ajaxblender.com/demos/tables/sortabletable/ 问问题 问问题 2013-03-29T15:14:59.380 845 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have been trying to use set up this table here. http://www.ajaxblender.com/demos/tables/sortabletable/ I checked with my browser and the page is properly pulling the css and the .js files yet it gives me this error in reference to my sortabletable.js file (screen shot of the error) http://i.imgur.com/iJa2Rz8.png Here is a copy of the relevant part of the source code  <title>Home page</title> <link rel="stylesheet" href="./_common/css/main.css" type="text/css" media="all"> <link href="sortableTable.css" rel="stylesheet" type="text/css">  

| ID | Firstname | Lastname | Department | Start Date |
| --- | --- | --- | --- | --- |
| 1 | Sam | Birch | Programming | 01/06/00 |
| 2 | George | Lo | Support | 01/07/99 |
| 3 | kevin | Walker | Programming | 01/06/05 |
| 4 | Peter | Aland | Project Management | 23/10/06 |
| 5 | Rachel | Dickinson | Design | 20/01/05 |
| 6 | John | Tsang | Support | 05/10/05 |
|  |  |  |  |  |

any thoughts on what it could be? Use $.find('tbody') to get all descendant tbodys and $.children('tbody') to get all children tbodys. Try this: this.thead = this.table.children('thead'); this.tbody = this.table.children('tbody'); this.tfoot = this.table.children('tfoot'); this.elements = this.table.find('tr'); javascriptjquerymootools 4 2 回答 2 This answer is useful 1 用于$.find('tbody')获取所有tbody的后代和$.children('tbody')获取所有tbody的孩子。尝试这个： this.thead = this.table.children('thead'); this.tbody = this.table.children('tbody'); this.tfoot = this.table.children('tfoot'); this.elements = this.table.find('tr'); 于 2013-03-29T15:41:36.450 回答 This answer is useful 0 Altough I don't see jQuery being loaded in your HTML sample, your question's title suggests that your are using jQuery in your site. If that's the case, your problem would be that there's a conflict between Mootools and jQuery because both libraries defines the $ function. To fix the issue, you will have to use jQuery.noConflict(). 于 2013-03-29T15:45:20.103 回答 Related 1 c# - 实施增量搜索来过滤 GridView 结果？ 1 postgresql - Postgres 不使用“created_time / 60”的索引 1 ruby-on-rails - 2 路加密算法，适用于 Ruby 和 Node.JS，只加密字母和数字 1 google-apps-script - 为什么我的代码有时会在应用程序脚本中产生不同的结果？ 2 arrays - 合并两个数组以在 ruby 中创建一个二维数组 2 nginx - Nginx 不提供静态文件 1 windows - Windows 与 Linux/UNIX 中的 Perl 的 waitpid() 和 IPC::Open2 1 sql-server - SQL 嵌套 IF 不起作用 2 ubuntu - git-svn 恢复本地提交的删除 1 xquery - XQuery：“toString 方法”包括元素 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15706047
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, jquery, mootools

I have been trying to use set up this table here. [http://www.ajaxblender.com/demos/tables/sortabletable/](http://www.ajaxblender.com/demos/tables/sortabletable/)

I checked with my browser and the page is properly pulling the css and the .js files yet it gives me this error in reference to my sortabletable.js file

(screen shot of the error) [http://i.imgur.com/iJa2Rz8.png](http://i.imgur.com/iJa2Rz8.png)

Here is a copy of the relevant part of the source code

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
  <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
  <title>Home page</title>
  <link rel="stylesheet" href="./_common/css/main.css" type="text/css" media="all">

<link href="sortableTable.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="./_common/js/mootools.js"></script>
<script type="text/javascript" src="sortableTable.js"></script>

</head>
<body>

<div id="container">
<div id="example">
        <div class="tableFilter">
            <form id="tableFilter" onsubmit="myTable.filter(this.id);     return false;">Filter: 
                <select id="column">
                    <option value="1">Firstname</option>
                    <option value="2">Lastname</option>
                    <option value="3">Department</option>
                    <option value="4">Start Date</option>
                </select>
                <input type="text" id="keyword" />
                <input type="submit" value="Submit" />
                <input type="reset" value="Clear" />
            </form>
      </div>
      <table id="myTable" cellpadding="0" cellpadding="0">
        <thead>
            <th axis="number">ID</th>
            <th axis="string">Firstname</th>
            <th axis="string">Lastname</th>
            <th axis="string">Department</th>
            <th axis="date">Start Date</th>
        </thead>
        <tbody>
            <tr id="1">
                <td class="rightAlign">1</td>
                <td>Sam</td>
                <td>Birch</td>
                <td>Programming</td>
                <td class="rightAlign">01/06/00</td>
            </tr>
            <tr id="2">
                <td class="rightAlign">2</td>
                <td>George</td>
                <td>Lo</td>
                <td>Support</td>
                <td class="rightAlign">01/07/99</td>
            </tr>
            <tr id="3">
                <td class="rightAlign">3</td>
                <td>kevin</td>
                <td>Walker</td>
                <td>Programming</td>
                <td class="rightAlign">01/06/05</td>
            </tr>
            <tr id="4">
                <td class="rightAlign">4</td>
                <td>Peter</td>
                <td>Aland</td>
                <td>Project Management</td>
                <td class="rightAlign">23/10/06</td>
            </tr>
            <tr id="5">
                <td class="rightAlign">5</td>
                <td>Rachel</td>
                <td>Dickinson</td>
                <td>Design</td>
                <td class="rightAlign">20/01/05</td>
            </tr>
            <tr id="6">
                <td class="rightAlign">6</td>
                <td>John</td>
                <td>Tsang</td>
                <td>Support</td>
                <td class="rightAlign">05/10/05</td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </tfoot>
      </table>

    <script type="text/javascript">
        var myTable = {};
        window.addEvent('domready', function(){
            myTable = new sortableTable('myTable', {overCls: 'over', onClick: function(){alert(this.id)}});
        });
    </script>
    </div>

</div>
</div>
</body>
</html> 
```

any thoughts on what it could be?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:41:36.450

用于`$.find('tbody')`获取所有`tbody`的后代和`$.children('tbody')`获取所有`tbody`的孩子。尝试这个：

```
this.thead = this.table.children('thead');
this.tbody = this.table.children('tbody');
this.tfoot = this.table.children('tfoot');
this.elements = this.table.find('tr'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:45:20.103

Altough I don't see jQuery being loaded in your HTML sample, your question's title suggests that your are using jQuery in your site. If that's the case, your problem would be that there's a conflict between Mootools and jQuery because both libraries defines the `$` function. To fix the issue, you will have to use [jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/).

# intellij-idea - 在 java8 中找不到 java.util.stream

> ID：15706048
> 
> 赞同：7
> 
> 时间：2013-03-29T15:15:00.573
> 
> 标签：intellij-idea, java

我已经安装了`jdk-8-ea-bin-b82-windows-x64-21_mar_2013`IntelliJ **IDEA 12.0.4**。`java.util.stream`奇怪的是，我在IDE提供的intellisense中找不到。我尝试使用 IDE 或使用记事本和编译器进行编译，但它给出了一个错误，抱怨`java.util.stream`找不到！我已经将模块设置设置为使用 Java8 jdk。关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-24T19:38:59.780

我对 Netbeans 也有同样的问题。似乎旧版本的 JDK 8 没有正确打包。

我对 b84 也有同样的问题，但是我安装了 build b116 并且它工作正常。

PS：我认为这就是@rmuller 在他的评论中所说的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-06T16:06:33.620

要更改 JDK 版本，请转到文件 --> 项目结构，并确保项目 SDK 和项目语言级别都设置为 JDK 8。

*（我知道你说你已经在模块中设置了 JDK 级别，但是我在这里发布这个是因为网上关于如何做到这一点的信息相对较少。甚至关于这个问题的[IDEA 文档](https://intellij-support.jetbrains.com/hc/en-us/articles/206544879-Selecting-the-JDK-version-the-IDE-will-run-under)也没有提到它！）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T06:38:32.993

尝试从[http://jdk8.java.net/lambda/](http://jdk8.java.net/lambda/)下载以获得 lambda 和流支持

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-01T11:13:09.907

正如@rmuller 指出的那样，当我问这个问题时，我在 5 年前下载的早期版本中没有流。在我提出这个问题后不久，一个新版本可用，它包含流支持。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-08-16T02:25:01.670

您可以在模块中设置项目设置

语言级别设置 8-LAMBDAS [在此处输入图像描述](https://i.stack.imgur.com/X8riM.png)

因为默认语言级别是 7 -Diamonds

# php - 如何通过贝宝表格取消授权交易

> ID：15706049
> 
> 赞同：0
> 
> 时间：2013-03-29T15:15:02.027
> 
> 标签：php, paypal

我正在使用 paypal 表单通过其隐藏变量在我的网站上授权付款：

```
<input type="hidden" name="paymentaction" value="authorization" > 
```

我如何通过我的网站取消授权交易（以防用户取消订单）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:09:18.167

您需要使用[DoVoid API](https://www.x.com/developers/paypal/documentation-tools/api/dovoid-api-operation-nvp)调用才能从您的网站执行此操作。

# variables - 将数据推入堆栈，组装

> ID：15706050
> 
> 赞同：0
> 
> 时间：2013-03-29T15:15:03.680
> 
> 标签：variables, assembly, stack

为什么长度可以直接推入堆栈，而消息必须复制到寄存器然后推入堆栈？

为什么将字符串声明为字节，而将 11 定义为单词？

```
 message:db'hello world'
 length:dw 11

 mov ax, message
 push ax
 push word [length] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:22:26.563

您应该可以`push message`直接执行此操作，但此操作的确切语法通常是特定于汇编程序的。您可能需要改写`push offset message`。这会将 的地址压入`'h'`堆栈。

推`'he'`（用类似的东西`push word [message]`or `push word ptr [message]`），OTOH，可能不是你真正想要的。我认为没有充分的理由使用堆栈仅传递字符串的 2 个字符。改为传递第一个字符的地址更有意义。

# php - 无法从 PHP 插入 mysql Auto Increment 行，但可以使用相同的语句从 phpmyadmin 手动插入

> ID：15706053
> 
> 赞同：0
> 
> 时间：2013-03-29T15:15:16.337
> 
> 标签：php, mysql, insert, phpmyadmin, auto-increment

所以我的问题是：

我无法从我的 php 插入我的自动递增列

```
(unless I set the insert values to: '','','','$postdate','posttime'). 
```

但是：当我在 phpmyadmin 中使用下面的 DEBUGGED 插入语句时，它运行时不用担心。因此，有些东西阻止了我从我的 php 代码中插入。

这是我的代码：

```
$qinsert    =   "INSERT INTO `post` (text,sender,text_stamp,post_date,post_time) VALUES ('$message','$sender_id','$date','$postdate','$posttime')";
$finsert    =   mysql_query($qinsert);
$postID     =   mysql_insert_id(); 
```

这是调试器的输出：

```
 Date: Fri, 29 Mar 2013 11:02:53 -0400
 Sender: User's Name 
Message:
 Message Text
 Attachment: 
 Post-Date: 2013-03-29
 Post-Time: 08:02:55

 Q-INSRT: INSERT INTO `post` (text,sender,text_stamp,post_date,post_time) VALUES ('Message Text','User's Name ','Fri, 29 Mar 2013 11:02:53 -0400','2013-03-29','08:02:55')
  F-INST: 
  Post-ID: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:22:08.780

您是否在将变量放入数组之前对其进行转义？我不确定您的示例查询是否替换了文本和用户名，或者是逐字复制粘贴的。我将假设后者，因此请仔细查看您的查询：

```
[...] VALUES ('Message Text','User's Name ','Fri, [...] 
```

“用户名”中间有一个撇号，所以它破坏了查询。确保在将每个变量插入查询之前对每个变量运行 mysql_real_escape_string($variable)。

```
$message_text = mysql_real_escape_string($_POST['message_text']);
$user_name = mysql_real_escape_string($_POST['user_name']);
$query = "INSERT INTO table (text, username) values ('$message_text', '$user_name')";
mysql_query($query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:21:51.100

你需要转义你的字符串，`User's Name`里面有一个单引号。您也不应该使用`mysql_`函数，它们已被弃用。但是，如果您坚持，请使用`mysql_real_escape_string()`，例如：

```
$qinsert    =   "INSERT INTO `post` (text,sender,text_stamp,post_date,post_time) VALUES ('" . mysql_real_escape_string($message) . "','" . mysql_real_escape_string($sender_id). " ','$date','$postdate','$posttime')"; 
```

您可能应该转义所有字符串，而不仅仅是消息和发件人。

理想情况下，您应该改用 PDO，如下所示：

```
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';
$user = 'dbuser';
$password = 'dbpass';

$dbh = new PDO($dsn, $user, $password);
$sth = $dbh->prepare(
  "INSERT INTO post (text,sender,text_stamp,post_date,post_time) VALUES " .
  "(:message, :sender_id, :date, :postdate, :posttime)"
);
$sth->execute(array(
  ':message' => $message,
  ':sender_id' => $sender_id,
  ':date' => $date,
  ':postdate' => $postdate,
  ':posttime' => $posttime
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T04:34:44.953

这成功了：

```
require '../connect.php';
$email = file_get_contents('php://stdin');
preg_match_all("/(.*):\s(.*)\n/i", $email, $matches);

$message    = $matches[1][18];
$message    = str_replace('<HTML><HEAD></HEAD><BODY style="background-color:#ffffff">', '',$message);
$message    = explode('<',$message);
$message    = $message[0];
$sender     = $matches[2][2];
$sender     = explode('<',$sender); 
$sender_id  = $sender[0];

mysql_query("INSERT INTO `post` (`text`,`sender`,`text_stamp`,`post_date`,`post_time`) VALUES ('" . mysql_real_escape_string($message) . "','" . mysql_real_escape_string($sender_id) . "','" . mysql_real_escape_string($textdate) . "','$postdate','$posttime')") or die(mysql_error() . "<--There was error processing the query"); 
```

# scheme - 测试等于承诺

> ID：15706054
> 
> 赞同：1
> 
> 时间：2013-03-29T15:15:18.393
> 
> 标签：scheme, racket

如何测试流的 cdr 是否等于 promise？我正在尝试编写如下所示的内容：

```
(equal? (stream-cdr s) #<promise>) 
```

它告诉我语法 # 不正确，那么正确的写法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:33:38.670

那是行不通的，“承诺”还没有价值。找到它的价值的唯一方法是*强迫*它或以其他方式评估它。根据它的实现方式，它可能是一个没有参数的函数，等待被调用或延迟对象，等待被强制执行。这有点像海森堡不确定性原理的情况 - 在您评估*之前*，您无法知道任意承诺的价值。

当然，如果您评估承诺，则比较很简单。因为从问题中不清楚正在使用什么流库，所以我将假设使用`delay`（或者：）`lazy`和`force`（如[SICP](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-24.html#%_sec_3.5)中定义的）的临时奇数流实现，如下所示：

```
(define-syntax stream-cons
  (syntax-rules ()
    ((stream-cons head tail)
     (cons head (delay tail))))) ; also works using `lazy` in place of `delay`

(define (stream-car stream)
  (car stream))

(define (stream-cdr stream)
  (force (cdr stream))) 
```

*正如我所说，如果*首先评估承诺，则比较将很简单：

```
(define promise (delay 42)) ; also works using `lazy` in place of `delay`
(define stream  (stream-cons 16 42))

promise
=> #<promise:promise>
(equal? (stream-cdr stream) promise)
=> #f
(equal? (stream-cdr stream) (force promise))
=> #t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:02:57.650

A`promise`是`delay`（并且，在某些 Scheme 方言中，`make-promise`）的返回值。您可以测试此值与任何您喜欢的值的相等性。例如：

```
> (define my-promise (delay "I'll always be good"))
> (equal? "I'll always be good" my-promise)
#f      # a string is not a promise 
```

在您的特定情况下`#<promise>`，是一个不可读的承诺的方案值的印刷表示。打印的表示不是一个值，因此您的 Scheme 实现会抱怨（“无法读取”）。相反，如果您绑定`#<promise>`了某些东西，例如`some-promise`，您可以尝试：

```
(equal? (stream-cdr s) some-promise) 
```

请注意，承诺不是它的价值。一个承诺，当被强制时，返回一个值。那是：

```
(equal? some-promise (force some-promise)) 
```

很少（从不？）是真的。

# highcharts - Highcharts 3.0 气泡图——控制气泡大小

> ID：15706060
> 
> 赞同：8
> 
> 时间：2013-03-29T15:15:37.450
> 
> 标签：highcharts, bubble-chart

使用 Highcharts 3.0 可以创建类型为“气泡”的图表，而在 3.0 之前，必须使用“散点图”并修改标记大小来制作气泡图。旧方法的好处是您可以完全控制每个气泡的可见像素半径——新的气泡图会自动调整气泡的大小，以便它们相对于彼此调整大小。 **有什么方法可以关闭此行为或手动设置气泡半径？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T15:46:27.857

我很难看到气泡图（其中气泡的大小相对于彼此没有大小）会有什么用处。

但是，您应该能够使用 minSize 和 maxSize 选项以您需要的方式控制它们：

```
bubble: {
                minSize:2,
                maxSize:50
         } 
```

{{edit：实际上，我也没有在文档中看到它们。但是您可以在这里看到一个示例：http: [//jsfiddle.net/fXzke/13/](http://jsfiddle.net/fXzke/13/) 使用数字作为像素值，或者使用图表高度百分比的字符串}}

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-18T14:57:52.610

我发现在系列中添加一个“空”气泡有助于保持图表中所有气泡的相对大小：

```
name: '',
data: [{x:0,y:0,z:0}], 
showInLegend: false, 
color: 'transparent', 
enableMouseTracking: false 
```

这是 JSFiddle 上的一个示例：http: [//jsfiddle.net/9bebT/2/](http://jsfiddle.net/9bebT/2/)。图例、颜色和鼠标跟踪变量都有助于将项目保持在系列中，但对用户不可见。如果您只是移除空气泡或将其可见性设置为“false”，则图表不会将空气泡的 z 轴（直径）注册为 minSize。

# javascript - 日期时间在我的 Asp.net 网格中归档的格式

> ID：15706061
> 
> 赞同：0
> 
> 时间：2013-03-29T15:15:39.347
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, datetime

我正在使用这个格式在网格中显示日期时间。我的问题是我没有从数据库中获取 Exact HH​​:MM。数据库显示 11:11 但在我的网格上显示 11:03..

```
Here is the database value : 2013-03-29 11:11:17.570

.Format("{0:MM/dd/yyyy HH:MM  tt}") 
```

任何人都可以帮我弄清楚为什么我没有在我的网格中得到这个 Exact HH​​:MM 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:18:10.683

你好，请使用这种格式

“{0:MM/dd/yyyy HH:mm tt}”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:18:18.700

您正在使用月份代替分钟，它应该是小毫米

# android - Android：与 google drive sdk 的集成在混淆构建中不起作用？

> ID：15706062
> 
> 赞同：1
> 
> 时间：2013-03-29T15:15:43.890
> 
> 标签：android, google-drive-api

我的应用程序与 google drive sdk 集成。从 Eclipse 运行时，它按预期工作，但是使用 proguard 混淆的构建，我得到以下错误。proguarded build 使用不同于 eclipse 的 keystore 签名（使用 debug keystore 签名）。在我的 Google API 控制台中，我创建了 2 个客户端 ID，每个客户端 ID 都有来自每个密钥库的 SHA1。

可能是由proguard的一些问题引起的？还有其他建议吗？

```
03-29 15:08:50.845: E/error(24742): com.google.a.a.b.b.c: 403 Forbidden
03-29 15:08:50.845: E/error(24742): {
03-29 15:08:50.845: E/error(24742):   "code": 403,
03-29 15:08:50.845: E/error(24742):   "errors": [
03-29 15:08:50.845: E/error(24742):     {
03-29 15:08:50.845: E/error(24742):       "domain": "usageLimits",
03-29 15:08:50.845: E/error(24742):       "message": "Access Not Configured",
03-29 15:08:50.845: E/error(24742):       "reason": "accessNotConfigured"
03-29 15:08:50.845: E/error(24742):     }
03-29 15:08:50.845: E/error(24742):   ],
03-29 15:08:50.845: E/error(24742):   "message": "Access Not Configured"
03-29 15:08:50.845: E/error(24742): }
03-29 15:08:50.845: E/error(24742):     at com.google.a.a.b.d.a.c.b(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:14:14.177

通过将以下内容添加到我的 proguard 配置中来解决此问题，可在以下链接中找到。鉴于错误消息，令人惊讶的是这是一个混淆问题。

```
-keep class com.google.** { *;}
-keep interface com.google.** { *;}
-dontwarn com.google.**

-dontwarn sun.misc.Unsafe
-dontwarn com.google.common.collect.MinMaxPriorityQueue
-keepattributes *Annotation*,Signature
-keep class * extends com.google.api.client.json.GenericJson {
*;
}
-keep class com.google.api.services.drive.** {
*;
} 
```

[Google Drive API 不能很好地与 ProGuard (NPE) 配合使用](https://stackoverflow.com/questions/14410520/google-drive-api-doesnt-play-well-with-proguard-npe)

# wso2 - 使用 API Manager 产品，多个用户是否可以管理一个 API？

> ID：15706063
> 
> 赞同：0
> 
> 时间：2013-03-29T15:15:48.720
> 
> 标签：wso2

使用 API Manager 产品，多个用户是否可以管理一个 API？API Publisher 中是否有任何方法可以让一个用户将 API 的所有权转让给另一个用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:05:26.590

如果您使用的是 APIM 1.3.1 或以前的版本，所有发布者都可以看到所有 API。因此，拥有发布者权限的其他人也可以编辑 API

# c# - C#如何禁用键绑定

> ID：15706070
> 
> 赞同：2
> 
> 时间：2013-03-29T15:16:22.290
> 
> 标签：c#, wpf, menuitem, key-bindings

[MenuItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.menuitem.aspx)控件具有方便的属性 IsEnabled（从[UIElement](http://msdn.microsoft.com/en-us/library/ms590078.aspx)继承）。这使我可以在适当的时候隐藏该菜单选项公开的命令。

但如果该命令也绑定到某个键（例如 Ctrl+K），用户仍然可以访问它。如何获得[KeyBinding](http://msdn.microsoft.com/en-us/library/system.windows.input.keybinding.aspx)的 IsEnabled 功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T15:18:32.213

如果将 绑定`KeyBinding`到`ICommand`，则只需将 设置[`ICommand.CanExecute`](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.canexecute.aspx)为`false`（并可能提高[`CanExecuteChanged`](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.canexecutechanged.aspx)）。

这将“禁用”，`KeyBinding`因为命令本身将被禁用。

# ruby-on-rails - Rails 的生产模式中未显示回形针图像

> ID：15706071
> 
> 赞同：0
> 
> 时间：2013-03-29T15:16:27.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在开发中，它工作正常，但在生产模式下，图像不可见，并且我收到“您要查找的页面不存在”错误。我已将此代码放入 initalizers/paperclip.rb

```
Paperclip::Attachment.default_options.merge!(
    :path => ":rails_root/public/system/:attachment/:id/:style/:basename.:extension", 
    :url => "/system/:attachment/:id/:style/:basename.:extension"
) 
```

并重新编译了资源

```
rake assets:precompile 
```

仍然没有在生产模式下显示图像。有什么帮助吗？

编辑 - 好的，我明白了，路径不准确。此外，如果您在 localhost 上的生产环境中运行 config.serve_static_assets = true，您可能还需要在 config/environment/production.rb 中启用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:06:55.063

我明白了，有两个错误-

1.  路径不准确，所以我修复了它们
2.  此外，如果您在 localhost 上的生产环境中运行 config.serve_static_assets = true，您可能还需要在 config/environment/production.rb 中启用它

# spring - 您可以指定在设置自动创建时不将实体创建为表吗？

> ID：15706072
> 
> 赞同：7
> 
> 时间：2013-03-29T15:16:28.457
> 
> 标签：spring, hibernate, jpa

我有一个使用 Hibernate 4.1 和 Spring 3.1.1 的应用程序。我正在使用 Spring 的 HibernateJpaVendorAdapter 并将 generateDdl 设置为 true 来创建实体。

我刚刚创建了一个视图并创建了一个实体来映射到该视图。视图的实体使用@Entity、@Table(name="ViewName") 和@Immutable 进行注释。当我部署 Web 应用程序时，它会自动为所有实体创建表，从而为应该映射到我的视图的实体创建一个表。我必须进入并手动删除该表，然后创建视图。虽然我可以继续这样做，但我想知道是否有办法指定不为该特定“视图”实体创建表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T05:27:06.750

如果将其标记为实体，那么如果 hibernate.hbm2ddl.auto 属性设置为 update、create-drop 或 create，hibernate 将始终尝试创建表。要停止这种情况，请在配置文件中删除此设置。

正如凯文指出的那样，这些选项应该只在开发阶段使用，否则你的产品数据库可能会发生非常糟糕的事情。请务必在部署之前将其删除。

查看休眠文档以获取更多信息

[http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/session-configuration.html](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/session-configuration.html)

# css - IE8 在页脚显示红色背景

> ID：15706074
> 
> 赞同：0
> 
> 时间：2013-03-29T15:16:32.500
> 
> 标签：css, internet-explorer-8

![ie8 在页脚的社交图标处显示红色背景。](../Images/b84fe9bce510197481b61a7ac33e6b52.png)

我已尝试删除所有`#f00`颜色并更改所有`background`s，但 Internet Explorer 未正确显示社交图标。我在IE10和各大浏览器都测试过，没有出现这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:33:39.280

如果您使用具有透明度的 PNG，并将其与 CSS 不透明度结合（即使用 IE 的专有`filter`不透明度），那么您可能会遇到一个已知的 IE8 错误。请参阅[hjere](http://www.jacklmoore.com/notes/ie-transparency-problems/)进行讨论和一些可能的解决方法。

建议：不要`filter`在旧的 IE 中使用样式。在 IE8 或更早版本中，如果不使用 using ，有很多事情是无法完成的`filter`，这意味着`filter`使用起来非常诱人。但它有很多怪癖和错误，很少值得。在许多情况下，没有它们，该站点在 IE8 中更有用。如果您需要使用这些功能，则完全不支持 IE8 可能是一个很好的例子。

另外，我从您的屏幕截图中注意到该页面正在以兼容模式加载（请参阅地址栏中的“损坏的页面”图标）。这意味着虽然您使用的是 IE8，但您实际上是在 IE7 模式下看到它（或者甚至可能是 quirks 模式；从屏幕截图中很难确定，尽管我认为 IE7 模式更有可能）。您也应该尝试修复此问题，因为使用错误模式会导致您看到额外的 IE 错误和缺失的功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T15:25:32.617

那是PNG图标吗？IE8 有一个带有透明 PNG 图标的错误（或功能？）。尝试设置背景：透明！重要；直接到图像元素。另一种可能性是，您在这些元素上使用了 CSS 不透明度。这也可能是造成这种行为的原因。

谢谢——斯特凡·布伦德尔

# php - PHP 将 Windows-1251 转换为 UTF 8

> ID：15706077
> 
> 赞同：13
> 
> 时间：2013-03-29T15:16:38.633
> 
> 标签：php, utf-8, character-encoding, windows-1251

我有一个小的 html 代码，我需要将其转换为 UTF-8。
我用这个`iconv("windows-1251", "utf-8", $html);`

所有文本都正确转换，但如果文本例如在 tag 中`<i>...</i>`，那么它不会转换文本，我看到这样的东西`РџРѕРєР°Р·Р°С‚СЊ РјРЅ`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-29T15:31:52.043

如果您可以访问 Multibye 包，您可以尝试一下。请参阅此处的 PHP 页面： [http ://www.php.net/manual/en/function.mb-convert-encoding.php](http://www.php.net/manual/en/function.mb-convert-encoding.php)

```
$html_utf8 = mb_convert_encoding($html, "utf-8", "windows-1251"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-25T19:27:29.727

你知道，像`РџРѕРєР°Р·Р°С‚СЊ РјРЅ`你看到的消息，如果 page 的编码是`windows-1251`，但是文本编码在`utf-8`.
我在我的一个项目中看到了这个问题，所以只需更改页面的更改编码，`utf-8`此文本就会正确显示。

让我举几个例子：
如果 page in `utf-8`，但 text in`windows-1251`你会看到这样的：
`???? ?? ?????? ??? ????? ??? ??????? ?? ????? ???? ??? ?????`

如果 page in `windows-1251`，但`utf-8`您看到的文本是：
`"РњРѕР±РёР»СЊРЅС‹Рµ С‚РµР»РµС„РѕРЅС‹";"Apple iPhone 4`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-02T14:25:32.223

我总是使用手动转换（逐个字符），如下所示：

```
$input= 'РћР±СЂР°С‰РµРЅРёРµ РљР°С';

$s= str_replace('С?','fgr43443443',$input);
$s= mb_convert_encoding($s, "windows-1251", "utf-8");
$s= str_replace('fgr43443443','ш',$s);

echo $s; 
```

ps不要忘记，.php文件编码应该是UTF8。另外，在 HTML 的头部，插入**UTF8的标准声明**

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-16T15:29:37.267

大多数解决方案缺乏对单字节编码的转换。在我的情况下，我使用 mb_convert_encoding($string,'windows-1251') 从 UTF-8 转换。

```
function ru2Lat($string)
{
$rus = array('ё','ж','ц','ч','ш','щ','ю','я','Ё','Ж','Ц','Ч','Ш','Щ','Ю','Я');
$lat = array('yo','zh','tc','ch','sh','sh','yu','ya','YO','ZH','TC','CH','SH','SH','YU','YA');
$string = str_replace($rus,$lat,$string);
$string = strtr($string,
     "АБВГДЕЗИЙКЛМНОПРСТУФХЪЫЬЭабвгдезийклмнопрстуфхъыьэ",
     "ABVGDEZIJKLMNOPRSTUFH_I_Eabvgdezijklmnoprstufh'i'e");

return($string);
}

function transliterate($string){
    if (!is_string($string)) return $string;
    return ru2lat(mb_convert_encoding($string,'windows-1251'));
}

function transliterate_array($a){

$c = array_map(transliterate,$a);
             return $c;

} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2017-02-27T20:10:31.550

试试这个，对我有用！

```
$result = str_replace ('Â€', 'â‚¬' , $result); 
```

# python - PYmssql python 连接字符串

> ID：15706078
> 
> 赞同：6
> 
> 时间：2013-03-29T15:16:40.730
> 
> 标签：python, pymssql

我已经下载了 Pymssql 以连接到 sqlserver db，但连接字符串抛出 error-pymssql.connect(pymssql.c.:7990)

```
import pymssql
pymssql.connect(host='username\SQLEXPRESS',user='username',password='pwd',database='master') 
```

有人有幸连接到 sqlserver 吗？

```
Error:
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "pymssql.pyx", line 556, in pymssql.connect (pymssql.c:7990)
    raise OperationalError(e[0])
pymssql.OperationalError: (20009, 'Net-Lib error during Unknown error') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-21T05:28:04.410

我遇到了同样的`Net-Lib error during Unknown error`错误信息。对我来说，问题是我**需要**在我的 SQL Server Express 实例中启用 TCP/IP 和命名管道。

尝试进入 SQL Server 配置管理器并打开 TCP/IP 和命名管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T14:54:32.740

我的设置：

*   微软视窗 XP SP3。
*   Microsoft SQL Server 2008（不是 R2）。
*   CPython 2.7.4。
*   pymssql 2.0.0（与`easy_install`IIRC 一起安装）。

我忘了创建一个`sa`登录帐户，所以我记得几周前寻找一种创建它的方法；以前，我使用 Windows 身份验证登录（例如，使用 SQL Server Management Studio）。我按照[https://stackoverflow.com/a/3781737](https://stackoverflow.com/a/3781737)创建了`sa`用户帐户。

在那个中间步骤之后，我开始使用 Python。

```
import pymssql
conn = pymssql.connect(host=r'MACHINE\SQLEXPRESS', user=r'sa', password=r'password', database=r'MYDB')
cur = conn.cursor()
cur.execute(r'SELECT COUNT(*) FROM mytable')
row = cur.fetchone()
print row[0]
cur.close()
conn.close() 
```

我对你的问题的猜测是你应该在连接参数中使用*原始*字符串——特别是`host`参数，它接受一个反斜杠。

我还使用 CentOS 5.8 64 位机器（pymssql 1.0.2，freetds 0.91）进行了尝试。为此，我还创建了一个`$HOME/.freetds.conf`文件，其内容为

```
[global]
tds version = 10.0

[MACHINE]
host = 192.168.1.2
port =1433
tds version = 10.0
encryption = request 
```

我忘记了从哪里选择该文件的配置示例。

希望有帮助。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-12-22T04:55:09.383

您必须声明字符集示例：

```
pymssql.connect(host='username\SQLEXPRESS',user='username',password='pwd',database='master',chartset="your_charset") 
```

# jquery-mobile - JQuery Mobile 单选按钮 - 一页上的多个组

> ID：15706079
> 
> 赞同：2
> 
> 时间：2013-03-29T15:16:42.737
> 
> 标签：jquery-mobile

我在一个 HTML 页面上有多个单选按钮组，对于每个组，我希望检查第一个按钮。当我在 HTML 中设置它时，选中的样式仅应用于第二组中的按钮。

```
<fieldset data-role="controlgroup" data-mini="false" data-type="horizontal">
    <input type="radio" name="radio-choice" id="A_AM_RadioButton" checked="checked"/>
        <label for="A_AM_RadioButton" id="A_AM_RadioButtonLabel">AM</label>
    <input type="radio" name="radio-choice" id="A_PM_RadioButton"/>
        <label for="A_PM_RadioButton" id="A_PM_RadioButtonLabel">PM</label>
</fieldset>                             
<fieldset data-role="controlgroup" data-mini="false" data-type="horizontal">
    <input type="radio" name="radio-choice" id="B_AM_RadioButton" checked="checked"/>
        <label for="B_AM_RadioButton" id="B_AM_RadioButtonLabel">AM</label>
    <input type="radio" name="radio-choice" id="B_PM_RadioButton"/>
        <label for="B_PM_RadioButton" id="B_PM_RadioButtonLabel">PM</label>
</fieldset> 
```

当我离开 HTML 中的“checked”属性并尝试在我的 JS 文件中应用该属性时，我得到了相同的结果。

```
$("#A_AM_RadioButton").attr("checked",true);
$("#B_AM_RadioButton").attr("checked",true);
$("input[type='radio']").checkboxradio("refresh"); 
```

我可以理解 JQuery Mobile 不希望在一个字段集中检查多个按钮，而是跨字段集？

如果有人可以告诉我我的错误（或者我正在尝试的事情是否可行），我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T15:21:18.717

尝试更改每个字段集的名称。

```
 <fieldset data-role="controlgroup" data-mini="false" data-type="horizontal">
    <input type="radio" name="radio-choice" id="A_AM_RadioButton" checked="checked"/>
        <label for="A_AM_RadioButton" id="A_AM_RadioButtonLabel">AM</label>
    <input type="radio" name="radio-choice" id="A_PM_RadioButton"/>
        <label for="A_PM_RadioButton" id="A_PM_RadioButtonLabel">PM</label>
</fieldset>                             
<fieldset data-role="controlgroup" data-mini="false" data-type="horizontal">
    <input type="radio" name="radio-choice-2" id="B_AM_RadioButton" checked="checked"/>
        <label for="B_AM_RadioButton" id="B_AM_RadioButtonLabel">AM</label>
    <input type="radio" name="radio-choice-2" id="B_PM_RadioButton"/>
        <label for="B_PM_RadioButton" id="B_PM_RadioButtonLabel">PM</label>
</fieldset> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:30:05.107

首先，您需要找到`data-role="controlgroup"`然后为每个组选择第一个`input[type=radio]`。同时，将其更改`.prop`为`checked`和`refresh`它。

[工作示例。](http://jsfiddle.net/Palestinian/sBn73/)

```
$(document).find('[data-role=controlgroup]').each(function() {
 $(this).find('input[type=radio]').first().prop('checked', true).checkboxradio('refresh');
}); 
```

# php - session_is_registered 结果为 404 - nginx

> ID：15706081
> 
> 赞同：0
> 
> 时间：2013-03-29T15:16:59.647
> 
> 标签：php

我似乎在使用 nginx 时遇到问题，我正在尝试使用以下代码：

```
<?php session_start();
if(!session_is_registered(sessionvalue)){
header("location: login.php");
}
?> 
```

这是一些简单登录的一部分，一旦我将其插入要保护的页面中，我就无法再打开它并收到 404 Not Found。如果我删除那段代码，它可以毫无障碍地工作。

//编辑：原来我已经超过 PHP 5.4.0，所以代码已更改为：

```
if(!isset($_SESSION['sessionvalue']) 
```

但错误仍然存​​在，404 未找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:48:49.637

尝试 /login.php 而不是 login.php

还有“位置”，而不是“位置”。

# javascript - 销毁元素和事件

> ID：15706083
> 
> 赞同：0
> 
> 时间：2013-03-29T15:17:04.417
> 
> 标签：javascript, dom

对 DOMElement 的调用是否`innerHTML = ""`会破坏所有子元素和附加在它们上的所有事件？或者是否需要`delete`在调用之前手动所有这些`innerHTML`以防止内存消耗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:22:52.567

`delete`与 JavaScript 中的内存回收或垃圾收集没有任何关系（尽管它与 C++ 中使用的关键字相似）。

当您设置`innerHTML`时，浏览器将释放其对您调用它的元素的所有后代元素的引用。通常这意味着那些元素和与它们关联的任何事件处理程序都有资格进行清理，前提是没有其他任何东西仍然对它们有任何引用。

在 IE 的旧副本上存在一个问题，如果一个元素分配了一个处理程序并且该处理程序也有一个对该元素的引用（通常是因为它是一个闭包），那么该循环引用甚至会将元素和处理程序都保留在内存中如果没有其他东西对它们有任何引用。例如：

```
function foo() {
    var element = document.getElementById("foo");
    element.onclick = function() {
        // ...do something
    };
} 
```

Because the anonymous event handler is a closure over the context of the call to `foo`, it has an (implicit) reference to `element`. And of course, `element` has a reference to the handler. This sets up the circle. Older versions of IE can't handle that circle if it crosses the DOM/JavaScript boundary like that.

For that reason, libraries like jQuery and such will actively remove the handler from the element before releasing it (so that the circle is broken).

This isn't an issue with most modern browsers (including very recent versions of IE), which aren't confused by circular references, even when they cross DOM/JavaScript boundaries.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:21:53.453

是`innerHTML`的，它摧毁了它的所有后代，随之而来的事件也随之而来。

[这是一篇有趣的文章](http://andrew.hedges.name/blog/2008/04/19/innerhtml-versus-the-dom-cant-we-all-just-get-along)，介绍了使用`innerHTML`vs DOM replaceChild 添加和替换节点的性能。

**编辑：**正如 TJ Crowder 指出的那样，早期版本的 IE 存在问题。除非您有支持 IE6 的要求（来自 Frit 的回答），否则应该没什么好担心的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:20:17.970

`innerHTML = ""`只是一种尊重元素的方式。如果您仍然引用存在于这些元素中的某些数据，则垃圾收集器可能无法清理它。

一般来说，如果你没有任何复杂的事情发生，这将清理所有元素和事件。旧的浏览器被认为是错误的（我认为是 IE6），但在所有现代浏览器中应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:22:05.277

`innerHTML=""`会将它们从 DOM 中删除，是的。如果它们从别处被引用并且您的浏览器没有某些内存泄漏，这可能会使它们可用于垃圾收集。

[`delete`关键字](http://perfectionkills.com/understanding-delete/)肯定不会帮助你。

# asp.net-mvc - 字段子集的验证摘要

> ID：15706084
> 
> 赞同：6
> 
> 时间：2013-03-29T15:17:11.663
> 
> 标签：asp.net-mvc

我有一个包含 3 个不同部分的表单，看起来像这样：

```
<form action="/Submit/" method="POST">
    <h2>
        Your Info:
    </h2>
    <ul>
        <li>
            <label>
                First Name:
                @Html.TextBoxFor(m => m.FirstName)
            </label>
        </li>
        <li>
            <label>
                Last Name:
                @Html.TextBoxFor(m => m.LastName)
            </label>
        </li>
    </ul>
    <h2>
        Membership:
    </h2>
    <ul>
        <li>
            <label>@Html.RadioButtonFor(m => m.MembershipLength_Months, 3) 3 Months</label>
        </li>
        <li>
            <label>@Html.RadioButtonFor(m => m.MembershipLength_Months, 12) 12 Months</label>
        </li>
    </ul>
   <h2>
        Billing Info:
    </h2>
    @Html.EditorFor(m=> m.PaymentInfo)
    <input type="submit" value="Submit" />
</form> 
```

我想做的是每个部分都有一个摘要。我知道我可以在每个 H2 下做这样的事情：

```
@if (ViewData.ModelState.Keys.Contains("FirstName") || ViewData.ModelState.Keys.Contains("LastName"))
{
    <div>
        summary text
        @Html.ValidationMessageFor(m => m.FirstName)
        @Html.ValidationMessageFor(m => m.LastName)
    </div>
} 
```

但感觉应该有一个更清洁的解决方案。谷歌完全让我失望了，我无法找到一个自定义帮助器或验证摘要扩展，它需要一个集合来表示要总结的属性。

每个部分都包含大量字段，因此 ModelState.Keys 比较很快就会变得非常难看。有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:52:45.410

> 但感觉应该有一个更清洁的解决方案。

是的，你可以编写一个自定义的、可重用的 HTML 助手来完成这个任务：

```
public static class HtmlExtensions
{
    public static IHtmlString Summary<TModel>(
        this HtmlHelper<TModel> html, 
        params Expression<Func<TModel, object>>[] expressions
    )
    {
        var div = new TagBuilder("div");
        var sb = new StringBuilder();
        foreach (var expression in expressions)
        {
            var unary = expression.Body as UnaryExpression;
            if (unary != null && unary.NodeType == ExpressionType.Convert)
            {
                var lambda = Expression.Lambda(unary.Operand, expression.Parameters);                    
                sb.AppendLine(html.ValidationMessage(ExpressionHelper.GetExpressionText(lambda)).ToHtmlString());
            }
            else
            {
                sb.AppendLine(html.ValidationMessageFor(expression).ToHtmlString());
            }
        }
        div.InnerHtml = sb.ToString();
        return new HtmlString(div.ToString());
    }
} 
```

可以这样使用：

```
<h2>
    Your Info:
    @Html.Summary(
        x => x.FirstName,
        x => x.LastName
    )
</h2> 
```

帮助器允许您列出要包含在摘要中的任何属性作为验证错误。

# xcode - XCode 不会编译 - 文件是通用的（3 个切片）但不包含 a(n) armv7s 切片

> ID：15706087
> 
> 赞同：0
> 
> 时间：2013-03-29T15:17:20.393
> 
> 标签：xcode, compilation, clang, armv7

我正在尝试在 XCode 上为 armv7s 和 armv7 编译我的应用程序，但不断收到此错误。

我已经尝试使用包含 armv6 进行编译，但还是没有运气。有什么想法吗？我完全被难住了。

```
ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/User/Documents/App/AdMob/libGoogleAdMobAds.a for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:30:36.880

哎呀——想通了——正在为 armv7 和 armv7s 编译，并从链接器标志中删除了“-all_load”！

# outlook - pywin32 和扩展 mapi：发送带附件的电子邮件

> ID：15706089
> 
> 赞同：1
> 
> 时间：2013-03-29T15:17:25.820
> 
> 标签：outlook, email-attachments, pywin32, mapi

我正在使用以下代码通过简单 MAPI 接口发送电子邮件

```
import win32com.client
olMailItem = 0x0
obj = win32com.client.Dispatch("Outlook.Application")
newMail = obj.CreateItem(olMailItem)
newMail.Subject = "I AM SUBJECT!!"
newMail.Body = "I AM IN THE BODY\nSO AM I!!!"
newMail.To = "themail@mail.org"
#newMail.CC = "moreaddresses here"
#newMail.BCC = "aaa"
#attachment1 = "Path to attachment no. 1"
#attachment2 = "Path to attachment no. 2"
#newMail.Attachments.Add(attachment1)
#newMail.Attachments.Add(attachment2)
#newMail.display()
newMail.Send() 
```

它似乎甚至适用于 Outlook 2007/2010，但它显示发送邮件的警告。

我可以使用扩展 MAPI 发送电子邮件而不显示警告和发送附件吗？如果是，我在哪里可以找到示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:38:52.813

不，您不能在 Python 中使用 Extended，您需要 C++ 或 Delphi。[http://www.outlookcode.com/article.aspx?id=52](http://www.outlookcode.com/article.aspx?id=52)提供了您的选项- 您可以安装最新的防病毒应用程序或使用扩展 MAPI 包装器，例如[Redemption](http://www.dimastr.com/redemption/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T12:35:28.650

对不起我的英语..
我找到了使用 PyWin32 在扩展 mapi 上添加附件的解决方案...
此代码是我的..我只添加了附件部分..
这会以 html 格式或文本格式向 Outlook 发送消息，包括嵌入在 html 中的附件（图像）和其他附件。
附件可以是每种类型的文件（.txt、.pdf、ecc ecc）
在此示例代码中，html 页面和附件文件必须位于此 py 的同一目录中代码。

Outlook 必须正常运行才能成功运行此代码。请参阅 MAPILogonEx .. [https://msdn.microsoft.com/en-us/library/office/cc815545%28v=office.15%29.aspx](https://msdn.microsoft.com/en-us/library/office/cc815545%28v=office.15%29.aspx)
它使用 Outlook 发送邮件..因此，如果您在专用网络上，则 Autenticathion 部分刚刚完成了 Outlook 本身的运行.. :)

（感谢 Mark Hammond 的 PyWin32！）
（感谢 Dmitry Streblechenko 的 OutlookSpy！）

* * *

```
from win32com.mapi import mapi
from win32com.mapi import mapitags
from win32com.mapi.mapitags import PROP_TAG, PT_UNICODE, PT_BINARY

import os

def Add_Message_AttachList(Message, AttachList, PathAttach, ContentIDList = None):

    """
    Add  a AttachList to a message

    :param Message: string       message for the Attach list
    :param AttachList: string    comma separated list of attachments
    :param PathAttach:  string   path of the attachments
    :param ContentIDList: string None if attachments aren't embedded
                                 comma separated list of ContentsID if embedded

    """

    # defines some costants
    METHOD = 0
    RENDERING = 1
    PATH = 2
    LONG_PATH = 3
    FILENAME = 4
    DISPLAY_NAME = 5
    DATA_BIN = 6
    NUM_ATT_PROPS = 7

    if ContentIDList:
        CONTENT_ID = 7
        NUM_ATT_PROPS = 8
        ID_List = ContentIDList.split(",")

    from collections import namedtuple

    sPropValue = namedtuple("sPropValue", "ulPropTag Value")
    file_name_index = 0
    for file_name in AttachList.split(","):

        my_file = open(PathAttach + "//" + file_name, "rb")
        file_buffer = my_file.read()
        my_file.close()

        spvAttach = [''] * NUM_ATT_PROPS
        spvAttach[METHOD] = sPropValue(mapitags.PR_ATTACH_METHOD, mapi.ATTACH_BY_VALUE)
        spvAttach[RENDERING] = sPropValue(mapitags.PR_RENDERING_POSITION, -1)
        spvAttach[PATH] = sPropValue(mapitags.PR_ATTACH_PATHNAME, PathAttach + "//" + file_name)
        spvAttach[LONG_PATH] = sPropValue(mapitags.PR_ATTACH_LONG_PATHNAME, PathAttach + "//" + file_name)
        spvAttach[FILENAME] = sPropValue(mapitags.PR_ATTACH_FILENAME, file_name)
        spvAttach[DISPLAY_NAME] = sPropValue(mapitags.PR_DISPLAY_NAME_A, file_name)
        spvAttach[DATA_BIN] = sPropValue(mapitags.PR_ATTACH_DATA_BIN, file_buffer)

        # defines the property PR_ATTACH_CONTENT_ID_W  not defined  in pywin32 mapitags.
        # number of PR_ATTACH_CONTENT_ID_W Property is in MSDN Library
        # https://msdn.microsoft.com/en-us/library/cc765868.aspx
        # all mapi tags are defined in https://msdn.microsoft.com/en-us/library/cc815492%28v=office.15%29.aspx
        mapitags.PR_ATTACH_CONTENT_ID_W = PROP_TAG(PT_UNICODE, 0x3712)

        if ContentIDList:
            spvAttach[CONTENT_ID] = sPropValue(mapitags.PR_ATTACH_CONTENT_ID_W, ID_List[file_name_index])

        file_name_index += 1
        # create a attachment
        pAtt = Message.CreateAttach(None, 0)
        # set the properties of the attachment
        pAtt[1].SetProps(spvAttach)
        # save the properties of the attachment
        pAtt[1].SaveChanges(0)

# ----------------------End Add_Message_AttachList ----

def SendEMAPIMail(is_HTML, subject = "", messageText = "", sendAttachs = None, sendAttachEmbeddeds = None,
                  sendAttachEmbeddedIDs = None,
                  sendTo = None, sendCC = None, sendBCC = None, mAPIProfile = None):
    """
    Sends an email to the recipient using the extended MAPI interface

    subject and messageText are strings
    sendAttachs is a comma-separated attachments list
    Send{To,CC,BCC} are comma-separated address lists
    MAPIProfile is the name of the MAPI profile
    """

    myPathFile = os.getcwdu()
    # initialize and log on
    mapi.MAPIInitialize(None)
    session = mapi.MAPILogonEx(0, mAPIProfile, None, mapi.MAPI_EXTENDED | mapi.MAPI_USE_DEFAULT)
    messagestorestable = session.GetMsgStoresTable(0)
    messagestorestable.SetColumns((mapitags.PR_ENTRYID, mapitags.PR_DISPLAY_NAME_A, mapitags.PR_DEFAULT_STORE), 0)

    while True:
        rows = messagestorestable.QueryRows(1, 0)
        if len(rows) != 1:
            break
        row = rows[0]
        if (mapitags.PR_DEFAULT_STORE, True) in row:
            break

    # unpack the row and open the message store
    (eid_tag, eid), (name_tag, name), (def_store_tag, def_store) = row
    msgstore = session.OpenMsgStore(0, eid, None, mapi.MDB_NO_DIALOG | mapi.MAPI_BEST_ACCESS)

    # get the outbox
    hr, props = msgstore.GetProps(mapitags.PR_IPM_OUTBOX_ENTRYID, 0)
    (tag, eid) = props[0]
    outboxfolder = msgstore.OpenEntry(eid, None, mapi.MAPI_BEST_ACCESS)

    # create the message and the addrlist
    message = outboxfolder.CreateMessage(None, 0)
    # note: you can use the resolveaddress functions for this. but you may get headaches
    pal = []

    def makeentry(recipient, recipienttype):
        return ((mapitags.PR_RECIPIENT_TYPE, recipienttype),
                (mapitags.PR_SEND_RICH_INFO, False),
                (mapitags.PR_DISPLAY_TYPE, 0),
                (mapitags.PR_OBJECT_TYPE, 6),
                (mapitags.PR_EMAIL_ADDRESS_A, recipient),
                (mapitags.PR_ADDRTYPE_A, 'SMTP'),
                (mapitags.PR_DISPLAY_NAME_A, recipient))

    if sendTo:
        pal.extend([makeentry(recipient, mapi.MAPI_TO) for recipient in sendTo.split(",")])
    if sendCC:
        pal.extend([makeentry(recipient, mapi.MAPI_CC) for recipient in sendCC.split(",")])
    if sendBCC:
        pal.extend([makeentry(recipient, mapi.MAPI_BCC) for recipient in sendBCC.split(",")])

    # add the resolved recipients to the message
    message.ModifyRecipients(mapi.MODRECIP_ADD, pal)

    # add attachments
    if sendAttachs:
        Add_Message_AttachList(message, sendAttachs, myPathFile, None)
    # add attachments embedded in the html message
    if sendAttachEmbeddeds:
        Add_Message_AttachList(message, sendAttachEmbeddeds, myPathFile, sendAttachEmbeddedIDs)

    if is_HTML:
        # defines the property PR_HTML  not defined  in pywin32 mapitags.
        # number of PR_HTML Property is in MSDN Library
        # https://msdn.microsoft.com/en-us/library/cc842395.aspx
        # all mapi tags are defined in https://msdn.microsoft.com/en-us/library/cc815492%28v=office.15%29.aspx
        mapitags.PR_HTML = PROP_TAG(PT_BINARY, 0x1013)
        message.SetProps([(mapitags.PR_HTML, messageText),
                          (mapitags.PR_SUBJECT_W, subject)])
    else:
        message.SetProps([(mapitags.PR_BODY_W, messageText),
                          (mapitags.PR_SUBJECT_W, subject)])

    # save changes and submit
    outboxfolder.SaveChanges(0)
    message.SubmitMessage(0)
    # close the extended mapi session
    # session.Logoff(0, 0, 0)

# ------------------END  SendEMAPIMail------

if __name__ == '__main__':
    # initialize....
    MAPIProfile = ""
    ImageEmbeddeds = None
    ImageEmbeddedIDs = None
    is_HTML = True    # if True il messaggio has html format
                      # else the message has text format.

    # list_to

    SendTo = "abc@xy.it,cdef@mail.it"

        # subject message
    SendSubject = "Paperino HTML"

        # simple text message
    s = "text message"

    if is_HTML:
        # my_page.html  is the message with HTML format
        mio_file = open("my_page.html", "rb")
        s = mio_file.read()
        mio_file.close()
        ImageEmbeddeds = "paperino.jpg"  # image HTML list, None for none immagine
        ImageEmbeddedIDs = "paperino"    # imageID HTML list, None for none ID

    SendMessage = s
        # attach list  , None for  no file.
    SendAttachs = "file1.txt"

    SendEMAPIMail(is_HTML, SendSubject, SendMessage,
                  SendAttachs, ImageEmbeddeds, ImageEmbeddedIDs,
                  SendTo, None, None, MAPIProfile)
    print "Done!"

-----------------------------------------------------------------------------
my_page.html
HTML File..  image attribute cid is the same into ImageEmbeddedIDs
this html code is commented for viewing
<!--
<!doctype html>
<html lang="it">
    <head>
        <meta 
            http-equiv="Content-Type" 
            content="text/html; charset = utf-8" 
        />  
        <title>Paperino</title>
    </head>
    <body>
        <p align="center">
          <img src="cid:paperino" width="77" height="77">
          <p align="center">Hi to all!</p>
          <hr align="left" size="1">
          <p align="left">Amd</p>
        </p>
    </body>
</html>     

--> 
```

# string - 存储字符串的内存有效方式

> ID：15706101
> 
> 赞同：6
> 
> 时间：2013-03-29T15:18:15.137
> 
> 标签：string, algorithm, data-structures

假设我有数百万个字符串。每个字符串都有一个 int 值。我想通过输入字符串检索这个值，但我不想存储所有这些字符串，因为它们占用了大量空间。我不能使用哈希表，因为它需要在内存中存储所有或至少许多字符串。那么对我来说什么是好的数据结构（我不需要添加或删除任何字符串，我已经准备好数据并且只允许读取操作）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:27:10.623

使用[trie](https://en.wikipedia.org/wiki/Trie)来防止存储常见的子字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T00:17:48.883

如果可以预处理单词列表，请查看完美的哈希值，例如[CMPH](http://cmph.sourceforge.net/)。（[gperf](http://www.gnu.org/software/gperf/)是另一个，但似乎针对较小的数据集进行了优化。）

来自 CMPH 文档：

> 完美的散列函数将一组静态的 n 个键映射为一组 m 个整数而不会发生冲突，其中 m 大于或等于 n。如果 m 等于 n，则该函数称为最小函数。

...

> CMPH 库将最新和更高效的算法封装在一个易于使用、生产质量、快速的 API 中。该库旨在处理无法放入主内存的大条目。它已成功用于为具有超过 1 亿个键的集合构建最小完美散列函数，...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T23:55:36.623

你可能想看看[Judy 树](http://en.wikipedia.org/wiki/Judy_array)，它的设计既快速又紧凑，并且有一个专为字符串键设计的版本。它的实现在[sourceforge](http://judy.sourceforge.net/)上可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:26:23.940

根据您当前问题中的有限信息，您不使用哈希表的理由听起来不成立。如果实施得当，它是相当有效的。如果您的需要可以接受，它还可以具有不浪费内存存储重复字符串的优点，如果可能出现重复字符串，则进一步减少内存消耗。

如果您对如何进行查找很有创意，您还可以将每个字符串的压缩形式存储在哈希表中。琴弦通常有多长？

# javascript - 未捕获的 ReferenceError：分配错误中的左侧无效

> ID：15706103
> 
> 赞同：3
> 
> 时间：2013-03-29T15:18:20.490
> 
> 标签：javascript, jquery, validation, variable-assignment

我收到以下错误：

> “未捕获的 ReferenceError：分配中的左侧无效”

从这段代码：

```
if (!oPrismaticMaterial = "") {
    for (var i = 0; i < oPrismaticMaterial.length; i++) {
        if (oPrismaticMaterial[i].checked) {
            oPrismaticMaterial[i].checked = true;
            radioChecked = true;
            break;
        }
    }
    if (!radioChecked) {
        bValidated = false;
        sErrorMessage += "Please select grades and metal\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:19:55.033

您应该在 if 语句中使用`!=`而不是。`=`

`==`是等于`!=`的比较，是不等于的比较，`=`是赋值。

因此，您需要将 if 语句从以下位置更改：

`if (!oPrismaticMaterial = "")`

到

`if (oPrismaticMaterial != "")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-05T00:14:03.693

也许“=”必须是“===”，它不适用于“==”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:20:20.337

你试图在你的 if 语句中分配一个布尔值`if (!oPrismaticMaterial = "")`，我想你想要`if (oPrismaticMaterial != "")`。

# javascript - 子目录中的javascript文件未加载

> ID：15706106
> 
> 赞同：0
> 
> 时间：2013-03-29T15:18:33.033
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, iis-7.5

我构建了一个使用 ExtJS 的简单 ASP MVC4 应用程序。

我的主视图链接到我的主要employee.js 文件：

```
<script src="app/employee.js" type="text/javascript"></script> 
```

我正在将我的应用程序发布到本地网络中的服务器。在我的开发机器上，当我访问 url`http:\\local-iis\holidays`应用程序时已正确加载并显示。
但是在同一网络中的其他 3 台计算机上，我收到错误，因为浏览器找不到该 js 文件。

我的项目结构如下所示：

```
--holidays（项目名称）
  +--应用程序
     +--myapp.js
  +--控制器
  +--型号
  +--（其余的 ASP 文件夹）

```

在我的开发机器上，当我访问`http:\\local-iis\holidays`chrome 并检查源代码时，我看到以下行：

```
<script src="app/employee.js" type="text/javascript"></script> 
```

在我翻转那个条目之后

![在此处输入图像描述](../Images/90627a4b0d6cc985faef21dfa4e9ef3f.png)

我看到正确的路径：

```
http:\\local-iis\holidays\app\employee.js  (I translated urlopy to holidays) 
```

on other computers for the same page source directory name is removed (`holidays`)

I tried clearing cache, installing other browsers, switching to other computers but everything failed-on some computers this is working and on some it isn't.

I'm not asking for specific solution, but something to get started with.

It's my first project in MVC 4 and I don't know how should I configure my application to get those urls working.

I don't know why my application is removing that directory name (it is referring to root of my local-iis server)

I asked on ExtJS forum and they said this is probably IIS or ASP setting issue.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T15:19:40.267

Never hardcode urls in an ASP.NET MVC application:

```
<script src="app/myapp.js" type="text/javascript"></script> 
```

Just use helpers:

```
<script src="~/app/myapp.js" type="text/javascript"></script> 
```

无论您的应用程序托管在何处，`~/app/myapp.js`都会正确地通过帮助程序，该`Url.Content`帮助程序反过来会生成正确的 url。例如，如果您的应用程序在 IIS Express 中本地托管，它可能如下所示：

```
<script src="/app/myapp.js" type="text/javascript"></script> 
```

当部署在 IIS 的虚拟目录中时，它可能如下所示：

```
<script src="/holidays/app/myapp.js" type="text/javascript"></script> 
```

助手会处理它。

在 Razor v1.0 (ASP.NET MVC 3) 中，您必须显式使用帮助程序：

```
<script src="@Url.Content("~/app/myapp.js")" type="text/javascript"></script> 
```

# sql - 为什么以及何时在 WHERE 子句中带有条件的 LEFT JOIN 不等于在 ON 中的相同 LEFT JOIN？

> ID：15706112
> 
> 赞同：27
> 
> 时间：2013-03-29T15:18:57.297
> 
> 标签：sql, sql-server, tsql, left-join

我遇到了一个非常令人困惑的情况，这让我质疑我对 SQL Server 中联接的所有理解。

```
SELECT t1.f2 
FROM   t1 
LEFT JOIN t2 
ON t1.f1 = t2.f1 AND cond2 AND t2.f3 > something 
```

不给出与以下相同的结果：

```
SELECT t1.f2 
FROM   t1 
LEFT JOIN t2 
ON t1.f1 = t2.f1 AND cond2 
WHERE  t2.f3 > something 
```

请有人帮忙告诉这两个查询是否应该等效？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-29T15:29:53.307

当查找匹配行时使用该`on`子句。`join`该`where`子句用于在所有连接完成后过滤行。

迪士尼卡通人物投票选举总统的例子：

```
declare @candidates table (name varchar(50));
insert @candidates values 
    ('Obama'), 
    ('Romney');
declare @votes table (voter varchar(50), voted_for varchar(50));
insert @votes values 
    ('Mickey Mouse', 'Romney'),
    ('Donald Duck', 'Obama');

select  *
from    @candidates c
left join    
        @votes v
on      c.name = v.voted_for
        and v.voter = 'Donald Duck' 
```

`Romney`即使`Donald`没有投票给他，这仍然会返回。如果将条件从子句`on`移至`where`子句：

```
select  *
from    @candidates c
left join    
        @votes v
on      c.name = v.voted_for
where   v.voter = 'Donald Duck' 
```

`Romney`将不再在结果集中。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-29T15:24:16.610

两者在字面上是不同的。

第一个查询在表`t2`连接之前对表进行过滤。因此，结果将被连接到表上，`t1`结果所有记录都`t1`将显示在列表中。

第二个过滤器在连接表完成后从总结果中过滤。

* * *

这是一个例子

表格1

```
ID   Name
1    Stack
2    Over 
3    Flow 
```

表2

```
T1_ID   Score
1       10
2       20
3       30 
```

* * *

在您的第一个查询中，它看起来像这样，

```
SELECT  a.*, b.Score
FROM    Table1 a
        LEFT JOIN Table2 b
           ON a.ID = b.T1_ID AND
              b.Score >= 20 
```

它所做的是在加入表之前，`table2`首先按分数过滤记录。因此，将在 table1 上连接的唯一记录是

```
T1_ID   Score
2       20
3       30 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1f4fd/2)

因为`Score`of`T1_ID`只有10。查询的结果是

```
ID   Name    Score
1    Stack   NULL
2    Over    20
3    Flow    30 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1f4fd/3)

* * *

而第二个查询不同。

```
SELECT  a.*, b.Score
FROM    Table1 a
        LEFT JOIN Table2 b
           ON a.ID = b.T1_ID
WHERE   b.Score >= 20 
```

它首先连接记录，无论它在另一个表上是否有匹配的记录。所以结果将是

```
ID   Name    Score
1    Stack   10
2    Over    20
3    Flow    30 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1f4fd/5)

和过滤发生`b.Score >= 20`。所以最终的结果将是

```
ID   Name    Score
2    Over    20
3    Flow    30 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1f4fd/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T15:41:47.840

```
CREATE TABLE Company
(
CompanyId TinyInt Identity Primary Key,
CompanyName Nvarchar(50) NULL
)
GO

INSERT Company VALUES('DELL')
INSERT Company VALUES('HP')
INSERT Company VALUES('IBM')
INSERT Company VALUES('Microsoft')
GO

CREATE TABLE Candidate
(
CandidateId tinyint identity primary key,
FullName nvarchar(50) NULL,
CompanyId tinyint REFERENCES Company(CompanyId)
)
GO

INSERT Candidate VALUES('Ron',1)
INSERT Candidate VALUES('Pete',2)
INSERT Candidate VALUES('Steve',3)
INSERT Candidate VALUES('Steve',NULL)
INSERT Candidate VALUES('Ravi',1)
INSERT Candidate VALUES('Raj',3)
INSERT Candidate VALUES('Kiran',NULL)
GO

SELECT * from Company c
SELECT * from Candidate c

-- A simple left outer Join
SELECT * FROM Company c LEFT OUTER JOIN Candidate c2
ON c.CompanyId = c2.CompanyId

--Left Outer Join ON and AND condition fetches 5 rows wtih NULL value from right side table 
SELECT * FROM Company c LEFT OUTER JOIN Candidate c2
ON c.CompanyId = c2.CompanyId
AND c.CompanyName = 'DELL' 

--Left Outer Join ON and where clause fetches only required rows
SELECT * FROM Company c LEFT OUTER JOIN Candidate c2
ON c.CompanyId = c2.CompanyId
AND c.CompanyName = 'DELL' 
WHERE c.CompanyName='IBM' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:21:19.643

在第一种情况下，结果`t2`将作为连接的一部分进行过滤。

在第二种情况下，可能会有更多行来自`t2`.

本质上，在两个查询中加入的记录集是不一样的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T15:22:00.017

它确实有所作为，因为在第二种情况下，您在执行左连接之后应用 where

# c# - 动态添加组合框到 flowlayoutpanel

> ID：15706117
> 
> 赞同：0
> 
> 时间：2013-03-29T15:19:19.070
> 
> 标签：c#, combobox, dynamic-programming, numericupdown, flowlayoutpanel

我正在为学校做一个项目，但我现在被困住了。我想动态地将组合框添加到我的 flowlayoutpanel 中，这取决于上下数字的值。

因此，如果数字上下值是 2，则动态制作 2 个组合框，但我真的不知道如何做到这一点，这就是我的想法。

```
public partial class ...Form: Form
{
    ComboBox[] cbChoices;

    private void nudGuests_ValueChanged(object sender, EventArgs e)
    {
        flowPanel.Controls.Clear();

        for (int i = 1; i < nudGuests.Value; i++)
        {
            cbChoices[i] = new ComboBox();
            flowPanel.Controls.Add(cbChoices[i]);
        }
    }
 } 
```

但我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:22:41.097

这里有几个问题。

首先，您的 cbChoices 数组未初始化，因此 `cbChoices = new ComboBoxnudGuests.Value;

其次，C# 使用 0-indexing（从第 0 个元素而不是第 1 个元素开始计算数组），所以使用`for (int i = 0 ....)`

第三，您真的需要 ComboBox 数组，还是可以只添加它们而不存储它们？

这应该为您指明正确的方向。

# symfony - 用新功能扩展 Twig。我可以访问现有功能吗？

> ID：15706122
> 
> 赞同：0
> 
> 时间：2013-03-29T15:19:58.330
> 
> 标签：symfony, twig

我正在使用这个扩展 Twig：

```
namespace Acme\Bundle\MyBundle\Twig;

use Twig_SimpleFunction;

class LinkGenerator extends \Twig_Extension
{

    public function getFunctions() {

        return array(
            new Twig_SimpleFunction('link', function($param) {
                return "TEST " . $param;
            })
        );

    }

    public function getName() {

        return "link";

    }

} 
```

它工作正常。使用 {{ link(2) }} 返回“TEST 2”。

出于演示目的，我想简单地将查询字符串 ?link=1 附加到如果使用“url”Twig 函数将呈现的内容。

所以代码可能如下所示：

```
new Twig_SimpleFunction('link', function($param) {

    //render exactly how this would look if using the Twig 'url' function
    $url = $this->runFunction('url', $params);

    //append the query string
    $url .= "?link=1";

    return $url;

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:39:43.113

您可以配置 DIC 以将依赖项注入到您的 Twig 扩展中。

我会尝试注入`RoutingExtension`Symfony2 的 TwigBundle 提供的类。

* * *

（未经测试）

DIC 配置：

```
<service id="my.link_generator.twig.extension" class="Path\To\My\Templating\Twig\LinkGeneratorExtension">
    <argument type="service" id="twig.extension.routing"/>
    <tag name="twig.extension" />
</service> 
```

LinkGeneratorExtension.php

```
class LinkGenerator extends \Twig_Extension
{
    protected $routingExt;

    public function __construct(RoutingExtension $routingExt)
    {
        $this->routingExt = $routingExt;
    }

    public function getLink($foo)
    {
        // ...
        $this->routingExt->getUrl(...);
    }
} 
```

# ruby-on-rails - 在环境作为生产环境中启动 Rails 控制台时出现错误消息

> ID：15706123
> 
> 赞同：0
> 
> 时间：2013-03-29T15:19:58.593
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, production-environment

我正在运行命令“rails s -e=production”并收到以下错误： `connection_specification.rb:47:in `resolve_hash_connection': database configuration does not specify adapter (ActiveRecord::AdapterNotSpecified)`

我的 config/database.yml 的内容：

```
development:
  adapter: sqlserver
  host: ***.***.***.***
  database: gmi_******
  username: **
  password: **

test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlserver
  host: ***.***.***.***
  database: gmi_******
  username: **
  password: ** 
```

我已经查看了有关此问题的所有其他问题，其中一个问题是他在“适配器：sqlserver”这样的适配器和另一个他有服务器的自定义名称（如“Listing_production”）之间没有空格，但没有解释它。这在开发中工作正常，但在生产中不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:25:12.527

我认为这`-e=`是令人困惑的 Rails。试试这个：`rails s -e production`

# sql - 显示在 oracle 11g R2 中得分最高的学生的详细信息

> ID：15706126
> 
> 赞同：0
> 
> 时间：2013-03-29T15:19:59.903
> 
> 标签：sql, oracle, top-n

**目标**

我有一张学生桌。我需要显示详细信息，即。`name`在考试中获得最高分的学生。

**表的定义**

以下是表定义的代码：（我使用来自[http://www.sqlfiddle.com](http://www.sqlfiddle.com)`text to ddl`的选项创建了它）

```
CREATE TABLE STUDENT
    ("NAME" varchar2(1), "MARKS" int)
; 
```

我插入的一些记录：

```
INSERT ALL 
    INTO STUDENT ("NAME", "MARKS")
         VALUES ('A', 17)
    INTO STUDENT ("NAME", "MARKS")
         VALUES ('B', 18)
    INTO STUDENT ("NAME", "MARKS")
         VALUES ('C', 19)
    INTO STUDENT ("NAME", "MARKS")
         VALUES ('D', 90)
    INTO STUDENT ("NAME", "MARKS")
         VALUES ('E', 50)
    INTO STUDENT ("NAME", "MARKS")
         VALUES ('F', 23)
SELECT * FROM dual
; 
```

**请**帮助我完成将实现此目的的查询。

**[http://www.sqlfiddle.com上的](http://www.sqlfiddle.com)**规范**oracle 11g R2**

 **在 Windows 机器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:31:38.347

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:14:22.877

最简单的方法是对数据进行排序并获取第一行：

```
select *
from (select s.*
      from student s
      order by mark desc
     ) s
where rownum = 1; 
```

另一种方法是使用分析函数：

```
select *
from (select s.*, row_number() over (order by mark desc) as seqnum
      from student s
      order by mark desc
     ) s
where seqnum = 1; 
```

如果替换`row_number()`为`rank()`，您将获得所有得分最高的学生。**

# sql - 如何保护 SQL 别名不为 NULL

> ID：15706127
> 
> 赞同：0
> 
> 时间：2013-03-29T15:20:00.783
> 
> 标签：sql, sum

虽然我在这里使用 iBatis 进行 o/r 映射，但这绝对是一个纯 SQL 问题。我只提到 iBatis 是为了提供完整的上下文。

我有一张桌子`items..fruits`：

```
fruit_id    fruit_name      fruit_color     fruit_cost
=====================================================
1           apple           red             12
2           pear            brown           70
3           apple           green           18
...
6485        banana          yellow          30
6486        plum            purple          <null>
6487        kiwi            green           85 
```

请注意：由于我无法控制的原因，`fruit_cost`可以为空。

我有一个 iBatis SQL 查询，它总结了表中所有水果的成本（按名称）：

```
SELECT
    sum(item_cost) AS fruitSum
FROM
    items..fruits
WHERE
    fruit_name = #{value}# 
```

如您所见，当我们对 运行此查询时`apple`，返回的`fruitSum`将是 30 (12 + 18)。但是当我们运行它时，`plum`我们得到 NULL（实际上，在我的完整代码中，我得到`net.sf.cglib.beans.BulkBeanException`s，但这并不重要）。

我想知道是否有一些 SQL 魔法我可以洒在我的查询上以强制`fruitSum`为零（0），否则它会为空。所以，像这样：

```
SELECT
    sum(item_cost) AS fruitSum DEFAULT 0
FROM
    items..fruits
WHERE
    fruit_name = #{value}# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:25:19.700

如果这是标准 SQL，则使用`COALESCE()`：

```
SELECT COALESCE(sum(item_cost), 0) AS fruitSum
FROM   items.fruits
WHERE  fruit_name = ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:24:08.803

```
SELECT
    sum(NVL(item_cost, 0)) AS fruitSum
FROM
    items..fruits
WHERE
    fruit_name = #{value}# 
```

# linux - 在 Centos VPS 上发送邮件非常慢

> ID：15706129
> 
> 赞同：0
> 
> 时间：2013-03-29T15:20:07.007
> 
> 标签：linux, centos, sendmail

我的 vps 最近开始遇到 sendmail 非常慢的问题。这对于使用带有 mail 功能的 PHP 发送的电子邮件或使用 mail 命令从命令行发送的电子邮件是相同的。我知道这可能没有足够的信息，但这里是开始的日志：

```
#Appears about 8 seconds after the mail command is run
Mar 29 11:09:12 vps-1006136-254 sendmail[23362]: r2TF9732023362: from=apache, size=203, class=0, nrcpts=1, msgid=<201303291509.r2TF9732023362@vps-1006136-254.manage.myhosting.co
m>, relay=apache@localhost

#PHP mail command was run at 11:09:19
Mar 29 11:09:27 vps-1006136-254 sendmail[23366]: r2TF9CIU023366: from=<apache@vps-1006136-254.manage.myhosting.com>, size=470, class=0, nrcpts=1, msgid=<201303291509.r2TF9732023
362@vps-1006136-254.manage.myhosting.com>, proto=ESMTP, daemon=MTA, relay=localhost.localdomain [127.0.0.1]
Mar 29 11:09:27 vps-1006136-254 sendmail[23362]: r2TF9732023362: to=jeremy.m.fry@gmail.com, ctladdr=apache (48/48), delay=00:00:20, xdelay=00:00:15, mailer=relay, pri=30203, rel
ay=[127.0.0.1] [127.0.0.1], dsn=2.0.0, stat=Sent (r2TF9CIU023366 Message accepted for delivery)

#email finally sends 
Mar 29 11:09:57 vps-1006136-254 sendmail[23376]: STARTTLS=client, relay=smtp.vps.myhosting.com., field=cn_subject, status=failed to extract CN
Mar 29 11:09:57 vps-1006136-254 sendmail[23376]: STARTTLS=client, relay=smtp.vps.myhosting.com., field=cn_issuer, status=failed to extract CN
Mar 29 11:09:57 vps-1006136-254 sendmail[23376]: STARTTLS=client, relay=smtp.vps.myhosting.com., version=TLSv1/SSLv3, verify=FAIL, cipher=DHE-RSA-AES256-SHA, bits=256/256
Mar 29 11:09:58 vps-1006136-254 sendmail[23376]: r2TF9CIU023366: to=<jeremy.m.fry@gmail.com>, ctladdr=<apache@vps-1006136-254.manage.myhosting.com> (48/48), delay=00:00:31, xdel
ay=00:00:31, mailer=relay, pri=120470, relay=smtp.vps.myhosting.com. [168.144.1.236], dsn=2.0.0, stat=Sent (OK id=1ULawH-0002KK-BM) 
```

我的问题是，PHP 的邮件功能似乎在返回前等待了整整 30 秒`true`，这导致我的一些联系表单似乎没有响应。有谁知道我可以做些什么来加快速度，或者下一步在哪里寻找更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:49:52.200

好的，我向我的 VPS 主机提交了一张票，他们“无法复制”这个问题。但是，我的 /etc/resolve.conf 文件中确实有一个指向 Google DNS 服务器（8.8.8.8）的新名称服务器。

看起来这是一个 DNS 解析问题，新的域名服务器已经解决了这个问题。现在也`yum`快得多，因为它也可以毫不拖延地找到镜子。

# c# - 如何针对 WPF 编写规范流

> ID：15706130
> 
> 赞同：2
> 
> 时间：2013-03-29T15:20:08.953
> 
> 标签：c#, wpf, testing, bdd, specflow

因此，我正在为我们的 WPF 应用程序开发一项新功能。我想使用 BDD，尤其是因为交互已经明确定义。我已经为 Web 项目编写了规范，但从未编写过桌面应用程序。所以，我的问题是我希望能够测试状态并避免 UI 抓取，但我看不到这样做的方法吗？

这是问题所在：

我看到我必须启动应用程序，登录，然后执行操作并抓取屏幕的状态（全部使用 UIAutomation）

但是，我希望能够从代码中获取状态。所以，我能想到的最好的办法就是通过 MVVM 结构来驱动它。但是，我想我看到的问题是从一个表单到下一个表单的一些流程来自 UI 绑定，那么有没有办法通过 MVVM 来做到这一点？我必须通过我的 UI 运行这一切吗？

我一直在努力思考如何实现这一点。以上是否有最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T00:19:37.157

最好的方法是分层测试。我发现最好的方法是忽略视图层，编写描述功能交互的 BDD 规范，然后使用单元测试来驱动模型、视图模型和控制器。

首先，通过忽略视图，您降低了测试的脆弱性。如果您不根据单击按钮和使用菜单项来描述您的测试，那么您不必在 UI 更改时重写测试。老实说，这样做您真正获得的只是检查您是否已将命令正确绑定到您的 UI 元素。

因此，请考虑这种方法，我将使用警报程序作为示例；

1.  首先定义一个特征，例如`When it is the correct time Then sound an alarm`。这将帮助您充实您的逻辑并定义您的模型类。通常我会构建多个单元测试来帮助构建每个特性的逻辑。
2.  派生更多功能，开始涉及用户与 UI 的交互。不要像对不习惯使用计算机、单击按钮和输入文本的人那样描述这些，而是​​更多地告诉那些精通的人，例如`When you set the alarm time to 9am`。编写/重构您的 SpecFlow 绑定以调用 ViewModel 命令并设置/获取 ViewModel 属性。
3.  将您的视图绑定连接到您的视图模型。
4.  改变你的 UI，并陶醉于你的测试仍然全部通过的事实。

我最近在每个客户端与多个服务器对话的 UI 上使用了这种技术。我有一些单元测试可以模拟所有内容，以便只调用一个方法。向上移动我有一些测试通过实例化这两个部分并在我的测试中直接耦合它们来简化客户端-服务器通信，最后我什至有几个测试我们测试一个通信系统的故障（服务器推送到所有客户端）并回退到另一个（每个客户端轮询活动服务器），这需要在机器上运行本地服务器。我可以在后端执行此操作的事实反映了我在 UI 中所做的事情，并且只测试每个阶段相关的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:16:53.343

将 Specflow 与 Coded UI 一起使用怎么样？我们正开始对此进行试验，以便让您知道我们的进展情况。目前，我们已经从技术角度对其进行了跟踪，并且它似乎有效。尽管考虑到更改的可能性，我对这种测试 UI 的整体方法持保留态度。看看[http://rburnham.wordpress.com/2011/03/15/bdd-ui-automation-with-specflow-and-coded-ui-tests/](http://rburnham.wordpress.com/2011/03/15/bdd-ui-automation-with-specflow-and-coded-ui-tests/)

# android-emulator - 您可以在不重新启动模拟器的情况下重新启动 Android 模拟器中的程序吗？

> ID：15706137
> 
> 赞同：0
> 
> 时间：2013-03-29T15:20:28.253
> 
> 标签：android-emulator, eclipse-indigo

android模拟器需要很长时间才能启动，我想知道是否有更快的方法。我正在使用日食靛蓝。

我写了一个简单的“触摸我”应用程序，上面写着“触摸我 X 次”，每次点击 X 都会增加。

假设我将Java 源代码中的代码从`touchCount++`更改为。`touchCount+=2`有没有办法让android模拟器快速将此更改合并到代码中而无需完全重新启动模拟器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:25:51.713

您不必每次要更新代码时都重新启动模拟器。这将是一个痛苦的过程，也是一个真正的时间杀手。

只需使用调试按钮。将您的 apk 重新上传到模拟器。

在这里查看更多关于 android 模拟器使用的信息：[模拟器使用](http://developer.android.com/tools/devices/emulator.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:32:36.290

您可以让模拟器在后台运行。只需按后退按钮退出正在运行的程序即可返回模拟器主屏幕。不要关闭模拟器。然后，当您使用新代码重建应用程序时，它应该在模拟器上启动较新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:25:14.623

我遇到了重新运行应用程序会启动新实例而不是重新使用现有的开放模拟器的麻烦。我解决这个问题的方法是让它每次都问我，这会阻止新的启动。

要让 Eclipse 提示您：

*   打开**运行菜单**>**运行配置**
*   在新窗口中，双击**Android Application**
    *   这将创建一个新的运行配置
*   打开**目标**选项卡
*   选择**始终提示选择设备**
*   单击**应用**
*   点击**关闭**

第一次启动一个新的模拟器并保持打开状态。

现在下次运行应用程序时，它会要求您启动一个新的模拟器或使用一个已经打开的模拟器。选择一个已经打开的。

如果您有多个版本的模拟器和不同版本的 Android，这还有一个额外的好处，即允许您选择不同的 AVD 版本来测试您的应用程序。

此外，您还可以通过 USB 将手机插入计算机，它也会出现在此列表中。

我发现这可以大大加快我的测试速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:24:01.277

不，您需要再次运行该程序才能重建它。此外，你不会真的想这样做。虽然看起来它会更容易，但程序的一个部分的更改可能会影响您没有意识到的其他部分，然后您必须返回并找出您所做的哪个更改导致了新问题。

另外，只是一个提示，我建议使用真正的设备进行测试。它效率更高，我会说准确。根据您正在做的事情，投资购买便宜的 Android 设备，您现在可以在该设备上进行测试，或者如果可以选择使用您的手机。

**编辑**

如果这是问题所在，我当然不是建议每次都需要重新启动模拟器。这就是为什么我说“你需要再次运行程序”。

# visual-studio - Visual Studio 编辑器在单元测试时失去焦点

> ID：15706141
> 
> 赞同：0
> 
> 时间：2013-03-29T15:20:41.613
> 
> 标签：visual-studio, unit-testing, focus, resharper

这可能是一个微不足道的问题，但我没有运气找到答案，所以我最终自己问了。（如果已经有相同的问题，我深表歉意......）

我正在使用 VS2012 + Resharper + TestAfterBuild 插件。我已将 TestAfterBuild 设置设置为**ReSharper.ReSharper_UnitTest_RunSolution**并且每次构建解决方案时，都会运行单元测试。这真的很好，如果我将“.NET Demon”与这些一起使用，它应该会变得更好。

但问题是，每次我构建并运行单元测试时，VS2012 的焦点都会转移到“单元测试会话”窗口。这很烦人，尤其是当您使用“.NET Demon”时，因为每次您键入内容时，它都会构建 > 单元测试 > 编辑器失去焦点。

这种行为应该是可以避免的，因此[这里](http://www.youtube.com/watch?v=t7X_-eKDhwk)的电影不会失去焦点。

有人可以引导我找到解决方案吗？
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:21:20.657

好的，我不知道这是否是正确的答案，但我碰巧自己找到了解决方案。[我收到了此处](https://stackoverflow.com/questions/6061070/unit-tests-are-failing-on-a-build-failed-in-the-session-window-with-no-message)
提到的“构建失败”错误，并将 Resharper 构建设置设置为“从不构建”。 这解决了我的“构建失败”错误，但我注意到的另一件事是我的焦点没有移动到“单元测试会话”窗口。 然后我打开“.NET Demon”的“连续保存”选项，看看焦点是否停留在代码编辑器上。它做到了！ 正如我上面所说，我不知道这是否是正确的解决方案，但到目前为止我认为它对我来说很好。 但是，我仍然很想听听我可以尝试的任何其他解决方案。 再次感谢。

# mysql - 在 Windows 8 上安装 RMySQL 时遇到问题

> ID：15706145
> 
> 赞同：0
> 
> 时间：2013-03-29T15:20:59.043
> 
> 标签：mysql, r, rmysql

我按照[R-Bloggers](http://www.r-bloggers.com/installing-the-rmysql-package-on-windows-7/)网站上的安装说明进行操作。但是，一旦我这样做`install.packages('RMySQL',type='source')`，我就会收到以下错误。似乎在路径方面存在一些冲突（Windows 喜欢反斜杠，而这里安装程序试图通过 unix 样式的反斜杠查找）。任何想法出了什么问题？

--- 错误信息 --- install.packages('RMySQL',type='source')

将软件包安装到“C:/Software/R-2.15.2/library”（因为“lib”未指定）

尝试 URL ' [http://cran.rstudio.com/src/contrib/RMySQL_0.9-3.tar.gz](http://cran.rstudio.com/src/contrib/RMySQL_0.9-3.tar.gz) '

内容类型 'application/x-gzip' 长度 165363 字节 (161 Kb)

打开网址

已下载 161 KB

*   安装*源*包'RMySQL' ...

** 成功解包“RMySQL”包并检查 MD5 和

检查 $MYSQL_HOME... C:\Software\xampp\mysql

cygwin警告：

**检测到 MS-DOS 样式路径：C:\Software\xampp\mysql**

首选的 POSIX 等效项是：/cygdrive/c/Software/xampp/mysql

CYGWIN 环境变量选项“nodosfilewarning”关闭此警告。

有关 POSIX 路径的更多详细信息，请参阅用户指南：

```
http://cygwin.com/cygwin-ug-net/using.html#using-pathnames 
```

** libs 警告：这个包有一个非空的“configure.win”文件，

所以只构建主要架构

cygwin警告：

**检测到 MS-DOS 样式路径：C:/Software/R-215~1.2/etc/x64/Makeconf**

首选的 POSIX 等效项是：/cygdrive/c/Software/R-215~1.2/etc/x64/Makeconf

CYGWIN 环境变量选项“nodosfilewarning”关闭此警告。

有关 POSIX 路径的更多详细信息，请参阅用户指南：

```
http://cygwin.com/cygwin-ug-net/using.html#using-pathnames 
```

gcc -m64 -I"C:/Software/R-215~1.2/include" -DNDEBUG -I"C:\Software\xampp\mysql"/include -I"d:/RCompile/CRANpkg/extralibs64/local/include " -O2 -Wall -std=gnu99 -mtune=core2 -c

RS-DBI.c -o RS-DBI.o

RS-DBI.c：在函数“RS_na_set”中：

RS-DBI.c:1219:11：警告：变量 'c' 已设置但未使用 [-Wunused-but-set-variable]

gcc -m64 -I"C:/Software/R-215~1.2/include" -DNDEBUG -I"C:\Software\xampp\mysql"/include -I"d:/RCompile/CRANpkg/extralibs64/local/include " -O2 -Wall -std=gnu99 -mtune=core2 -c

RS-MySQL.c -o RS-MySQL.o

RS-MySQL.c：在函数“RS_MySQL_fetch”中：

RS-MySQL.c:657:13：警告：变量 'fld_nullOk' 已设置但未使用 [-Wunused-but-set-variable]

RS-MySQL.c：在函数“RS_DBI_invokeBeginGroup”中：

RS-MySQL.c:1137:30：警告：变量 'val' 已设置但未使用 [-Wunused-but-set-variable]

RS-MySQL.c：在函数“RS_DBI_invokeNewRecord”中：

RS-MySQL.c:1158:20：警告：变量 'val' 已设置但未使用 [-Wunused-but-set-variable]

RS-MySQL.c：在函数“RS_MySQL_dbApply”中：

RS-MySQL.c:1219:38：警告：变量 'fld_nullOk' 已设置但未使用 [-Wunused-but-set-variable]

gcc -m64 -shared -s -static-libgcc -o RMySQL.dll tmp.def RS-DBI.o RS-MySQL.o

C:\Software\xampp\mysql/bin/libmySQL.dll -Ld:/RCompile/CRANpkg/extralibs64/local/lib/x64 -Ld:/RCompile/CRANpkg/extralibs64/local/lib -LC:/Software/R- 215~1.2/bin/x64 -lR

gcc.exe：错误：C:\Software\xampp\mysql/bin/libmySQL.dll：没有这样的文件或目录

错误：包“RMySQL”的编译失败

*   删除 'C:/Software/R-2.15.2/library/RMySQL'

install.packages 中的警告：运行命令 'C:/Software/R-215~1.2/bin/x64/R CMD INSTALL -l "C:/Software/R-2.15.2/library"

**C:\Users\lenovo\AppData\Local\Temp\RtmpiIQAUp/downloaded_pa​​ckages/RMySQL_0.9-3.tar.gz' 状态为 1**

install.packages 中的警告：

安装包“RMySQL”的退出状态非零

下载的源码包在'C:\Users\lenovo\AppData\Local\Temp\RtmpiIQAUp\downloaded_pa​​ckages'</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T09:11:21.807

只需将 lib 中的所有文件和文件夹复制到 bin 文件夹即可。

出于某种奇怪的原因，安装程序会在 bin 目录中查找 lib 文件。

# c# - C#中标签高度和宽度的自动大小

> ID：15706148
> 
> 赞同：4
> 
> 时间：2013-03-29T15:21:15.260
> 
> 标签：c#, winforms, label

我有一个尺寸为 (47, 15) 的标签，我的表单尺寸是 (561, 270)。当我的 label.text 比窗口大小长时，文本的最后一部分不会出现。我怎样才能动态地重新调整标签文本相对于我的窗口的高度和宽度。那就是当文本比窗口长，则文本将出现在某些行而不是一行。我怎样才能做到这一点？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:26:37.233

为此，请使用[AutoSize](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.autosize.aspx)属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T16:18:52.563

一种基本策略是设置MaximumSize.Width 属性，这样标签就不会水平地超出窗口边缘或与另一个控件重叠。它现在将自动换行长文本，垂直添加行。

您可能还想设置 MaximumSize.Height 属性，这样高度也不会失控。在这种情况下，您还希望将 AutoEllipsis 属性设置为 True。这样用户就可以知道文本已被剪切，并且当他将鼠标悬停在标签上时会自动显示工具提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-11T23:48:14.173

就我而言，我使用了 TextRenderer.MeasureText

[![在此处输入图像描述](../Images/8b8df1fd104ee2fa172a623ce757867d.png)](https://i.stack.imgur.com/4SugR.png)

```
using System.Windows.Forms;

namespace MyApp.Views
{
    public partial class test : Form
    {
        public Form1()
        {
            InitializeComponent();
            //I am getting my dynamic content from a TextBox but you can get from any other source
            string content = myTextBox.Text;

            myDynamicSizeLabel.Text = content;

            //calculating the height using TextRenderer.MeasureText and as reference the TextBox size
            var height = TextRenderer.MeasureText(myTextBox.CreateGraphics(), myTextBox.Text, myTextBox.Font, myTextBox.Size, TextFormatFlags.WordBreak).Height;

            //set the new size to my Label
            myDynamicSizeLabel.Height = (height == 0 ? myDynamicSizeLabel.Height: height);
            myDynamicSizeLabel.Width = myTextBox.Width;
            //Autosize must be false
            myDynamicSizeLabel.AutoSize = false;
        }
    }
} 
```

它会产生这样的结果 [![在此处输入图像描述](../Images/8c9b9f4fab75668d20eab5a29b54931a.png)](https://i.stack.imgur.com/3v5OS.png)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2021-02-26T18:52:26.680

我一直在挠头寻找解决方案..

使用按钮而不是标签

附加...那么如果您想将 flatstyle 设置为 flat ang，则将边界设为 0

# objective-c - 内存管理，UICollectionView 中有很多图片

> ID：15706154
> 
> 赞同：0
> 
> 时间：2013-03-29T15:21:33.007
> 
> 标签：objective-c, memory, memory-management, uiimage, sdwebimage

我在我的应用程序的 UICollectionView 中显示图片的缩略图（来自互联网）。当有太多（比如 20+）和太高分辨率的图像时，应用程序就会崩溃。在内存管理方面，我有点业余。我的问题是我是否应该通过内存管理或以某种方式缩放图像来解决这个问题（如果我这样做，我怀疑图像不会在 UIViewContentModeScaleAspectFill 中）？

现在我正在使用[SDWebImage](https://github.com/rs/SDWebImage)加载我的图像。

```
- (UICollectionViewCell*)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"thumbCell" forIndexPath:indexPath];
    NSString *URL = [self.album.imageURLs objectAtIndex:(indexPath.item+1)];

    UIImageView *iv = [[UIImageView alloc] initWithFrame:CGRectMake(80, 80, 277, 58)];
    iv.backgroundColor = [UIColor clearColor];
    iv.opaque = NO;
    iv.contentMode = UIViewContentModeScaleAspectFill;
    [iv setImageWithURL:[NSURL URLWithString:URL]];
    cell.backgroundView = iv;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T11:36:27.973

主要问题是，当您将单元格出列时，您正在为集合视图中的每个项目分配和初始化一个新的图像视图。

相反，您应该创建自己的图像单元类：

```
@interface CollectionViewImageCell : UICollectionViewCell
@property (nonatomic) UIImageView *imageView;
@end

@implementation CollectionViewImageCell

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        [self setupImageView];
    }
    return self;
}

#pragma mark - Create Subviews

- (void)setupImageView {
    self.imageView = [[UIImageView alloc] initWithFrame:self.bounds];
    self.imageView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    // Configure the image view here
    [self addSubview:self.imageView];
}

@end 
```

然后，在注册这个类之后，你的`cellForItemAtIndexPath:`方法看起来像这样：

```
- (UICollectionViewCell*)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{

    CollectionViewImageCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"thumbCell" forIndexPath:indexPath];

    NSString *URL = [self.album.imageURLs objectAtIndex:(indexPath.item+1)];
    [cell.imageView setImageWithURL:[NSURL URLWithString:URL]];
    return cell;
} 
```

我对 SDWebImage 不是很熟悉，我倾向于为此使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)，但我也会确保您设置了图像缓存。

如果您仍然遇到与内存相关的崩溃甚至滚动性能的问题，那么您可能需要有更好的图像加载策略，并且可能需要在服务器端重新缩放/重新采样图像。

# c# - 多个 Web 请求的最佳多线程方法

> ID：15706158
> 
> 赞同：4
> 
> 时间：2013-03-29T15:21:46.693
> 
> 标签：c#, multithreading, httpwebrequest, multitasking

我想创建一个程序来抓取和检查我的网站是否存在 http 错误和其他内容。我想使用多个线程来执行此操作，这些线程应该接受要抓取的 url 等参数。虽然我希望 X 线程处于活动状态，但仍有 Y 任务等待执行。

现在我想知道执行此操作的最佳策略是什么：ThreadPool、Tasks、Threads 还是其他什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T02:33:18.133

这是一个示例，展示了如何将一堆任务排队但限制同时运行的数量。它使用 a`Queue`来跟踪准备运行的任务，并使用 a`Dictionary`来跟踪正在运行的任务。当任务完成时，它会调用一个回调方法将自己从`Dictionary`. 一种`async`方法用于在空间可用时启动排队的任务。

```
using System;
using System.Collections.Generic;
using System.Threading;
using System.Threading.Tasks;

namespace MinimalTaskDemo
{
    class Program
    {
        private static readonly Queue<Task> WaitingTasks = new Queue<Task>();
        private static readonly Dictionary<int, Task> RunningTasks = new Dictionary<int, Task>();
        public static int MaxRunningTasks = 100; // vary this to dynamically throttle launching new tasks 

        static void Main(string[] args)
        {
            var tokenSource = new CancellationTokenSource();
            var token = tokenSource.Token;
            Worker.Done = new Worker.DoneDelegate(WorkerDone);
            for (int i = 0; i < 1000; i++)  // queue some tasks
            {
                // task state (i) will be our key for RunningTasks
                WaitingTasks.Enqueue(new Task(id => new Worker().DoWork((int)id, token), i, token));
            }
            LaunchTasks();
            Console.ReadKey();
            if (RunningTasks.Count > 0)
            {
                lock (WaitingTasks) WaitingTasks.Clear();
                tokenSource.Cancel();
                Console.ReadKey();
            }
        }

        static async void LaunchTasks()
        {
            // keep checking until we're done
            while ((WaitingTasks.Count > 0) || (RunningTasks.Count > 0))
            {
                // launch tasks when there's room
                while ((WaitingTasks.Count > 0) && (RunningTasks.Count < MaxRunningTasks))
                {
                    Task task = WaitingTasks.Dequeue();
                    lock (RunningTasks) RunningTasks.Add((int)task.AsyncState, task);
                    task.Start();
                }
                UpdateConsole();
                await Task.Delay(300); // wait before checking again
            }
            UpdateConsole();    // all done
        }

        static void UpdateConsole()
        {
            Console.Write(string.Format("\rwaiting: {0,3:##0}  running: {1,3:##0} ", WaitingTasks.Count, RunningTasks.Count));
        }

        // callback from finished worker
        static void WorkerDone(int id)
        {
            lock (RunningTasks) RunningTasks.Remove(id);
        }
    }

    internal class Worker
    {
        public delegate void DoneDelegate(int taskId);
        public static DoneDelegate Done { private get; set; }
        private static readonly Random Rnd = new Random();

        public async void DoWork(object id, CancellationToken token)
        {
            for (int i = 0; i < Rnd.Next(20); i++)
            {
                if (token.IsCancellationRequested) break;
                await Task.Delay(100);  // simulate work
            }
            Done((int)id);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T03:01:11.280

我建议使用 (asynchronous)`Task`下载数据然后处理（在线程池上）。

我建议您限制每个目标服务器的请求数，而不是限制任务。好消息：.NET[已经为您做到了](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit.aspx)。

这使您的代码非常简单：

```
private static readonly HttpClient client = new HttpClient();
public async Task Crawl(string url)
{
  var html = await client.GetString(url);
  var nextUrls = await Task.Run(ProcessHtml(html));
  var nextTasks = nextUrls.Select(nextUrl => Crawl(nextUrl));
  await Task.WhenAll(nextTasks);
}
private IEnumerable<string> ProcessHtml(string html)
{
  // return all urls in the html string.
} 
```

你可以用一个简单的开始：

```
await Crawl("http://example.org/"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:40:31.307

我建议使用 threadPool。Is 很容易使用，因为它有几个好处：

“线程池将通过重用已经创建的线程而不是创建新线程（一个昂贵的过程）来为频繁和相对较短的操作提供好处。当对新工作项的请求激增时限制线程创建速率（我相信这仅在 .NET 3.5 中）

如果您将 100 个线程池任务排队，它只会使用已创建的线程数来服务这些请求（例如 10 个）。线程池会进行频繁的检查（我相信在 3.5 SP1 中每 500 毫秒），如果有排队的任务，它会创建一个新线程。如果您的任务很快，那么新线程的数量将很少，并且为短任务重用 10 个左右的线程将比预先创建 100 个线程更快。

如果您的工作负载始终有大量线程池请求进入，那么线程池将通过上述过程在池中创建更多线程来调整自己以适应您的工作负载，以便有更多线程可用于处理请求“

[线程与线程池](https://stackoverflow.com/questions/230003/thread-vs-threadpool)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-29T15:27:38.287

好吧，`Task`这是一个好方法，因为这意味着您不必担心编写大量“管道”代码。

我建议您也查看 Joe Albahari 的关于线程的网站，它是关于线程的非常好的入门书：

[http://www.albahari.com/threading/](http://www.albahari.com/threading/)

# c++ - VS 2008 SP1 中的 OgreBullet 编译

> ID：15706162
> 
> 赞同：0
> 
> 时间：2013-03-29T15:21:54.280
> 
> 标签：c++, visual-studio-2008

Windows 7 x64
Ogre 1.8.1
项目符号 2.76

当我尝试编译 OgreBullet 项目时，我收到此错误：

```
error PRJ0019: A tool returned an error code from "Performing Post-Build Event..."  Dynamics_Demos 
```

运行时库 - /MDd

并使用项目符号 2.81：

```
fatal error LNK1104: cannot open file 'libboost_thread-vc90-mt-sgd-1_49.lib'    Dynamics_Demos 
```

运行时库 - /MTd

可能是什么问题呢？

我为我的英语道歉...

# visual-studio-2010 - 在 Visual Studio 2010（2012？）中将参数传递给 MSBuild 任务

> ID：15706164
> 
> 赞同：1
> 
> 时间：2013-03-29T15:22:01.567
> 
> 标签：visual-studio-2010, visual-studio-2012, msbuild, msbuild-task

我试图弄清楚如何从 Visual Studio 2010 中为 MSBuild 任务指定值。

例如，我定义了一个名为“BuildMergeModule”的构建任务，并且该构建任务采用它定义的 Input 属性，称为“SourceContent”，我可以在其中向它传递一个带有分号分隔的文件/路径规范的字符串。然后，该任务使用它从这个 SourceContent 规范为项目中的每个目标合并模块生成一个合并模块。

我可以将合并模块文件添加到项目中，然后为其分配我的“BuildMergeModule”任务的构建操作。

那么，是否可以在 VS 2010（或 VS 2012，如果不是 VS 2010）中定义属性，以便在选择每个项目合并模块目标的属性时显示在属性对话框中？

如果我直接修改 MSBuild 文件，我可以设置属性。但是，有没有办法让 Visual Studio 设计环境呈现作为构建操作的选定任务的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T18:56:02.750

您可以在 C++ 项目的属性页中显示所需的属性。对于 C#（或其他类型的项目），您需要创建一个 VSIX 属性页来公开您的任务输入属性。

我不会描述如何创建 VSIX 属性页，因为我对这些的经验很少。

要在 C++ 项目中创建属性页，请从“视图”菜单中打开“属性管理器”。您将在此窗口中看到您的项目，以及每个项目的平台|配置的各种排列。

右键单击要为其创建设置的项目，然后选择“添加新属性表...”。在出现的“添加新项目”对话框中，命名属性表文件并将其放置在您希望的位置。请注意，您还可以根据需要将新属性表添加到特定的平台/配置。

创建新属性表后，您将在属性管理器的各个平台/配置部分下看到它。双击属性表以打开其设置。

单击“用户宏”并添加带有您要发送到任务的设置的新宏。例如，设置一个名为“SourceContent”的新宏，并将其值设置为您希望用来构建 MergeModules 的文件的分号分隔列表。

# oracle - 在 oracle 中将数据从一个表复制到另一个表 - 不起作用

> ID：15706165
> 
> 赞同：-4
> 
> 时间：2013-03-29T15:22:01.953
> 
> 标签：oracle

正在执行以下查询，它会导致错误。

```
insert into me.attr ( EXPS)
 values( select EXPS from mine.attr 
          where fiscal_year=2012 
          and accounting_period=11 
          and gaap_cd='ZA' );

 Error: insert into me.attr ( EXPS) values ( select EXPS from mine.attr
 where fiscal_year=2012 and accounting_period=11 and gaap_cd='ZA' )
 Error at Command Line:31 Column:2 
 Error report:
 SQL Error: ORA-00936: missing expression
 00936\. 00000 -  "missing expression"
 *Cause:    
 *Action: 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:28:07.837

当你`select`在一个中使用时`insert`，你不要使用`values`子句：试试这个：

```
insert into 
  me.attr ( EXPS) 
  select EXPS 
    from mine.attr 
    where fiscal_year=2012 and 
          accounting_period=11 and 
          gaap_cd='ZA' 
```

# gcc - 使所有文件与单个目标的模式匹配

> ID：15706166
> 
> 赞同：0
> 
> 时间：2013-03-29T15:22:03.473
> 
> 标签：gcc, makefile

我有多个源文件（我们称它们为 file1.c、file2.c 等），我想将它们编译成单独的可执行文件。makefile 的相关部分：

```
file%.x: file%.o
    $(CC) $(CFLAGS) $< -o $@
file%.o: file%.c
    $(CC) $(CFLAGS) -c $< -o $@ 
```

`make file1.x`我可以用,等单独使它们很好`make file2.x`。我想在构建所有文件的 makefile 中有一个目标。我尝试了几件事，但没有奏效：

```
all: file*.x 
```

和

```
all: file%.x 
```

是否有捷径可寻？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:29:19.590

```
SOURCES := $(wildcard file*.c)
FILES := $(SOURCES:.c=.x)

all: $(FILES) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:30:35.043

这里奇怪的是你只是在构建一堆 OBJECT 文件。通常，目标文件将依次用于链接在一起以形成可执行文件，因此您的默认规则是构建该可执行文件，这将构建它的任何依赖项。

如果你真的只是想按照自己的方式做，我会做类似的事情：

```
FILES=test1 test2 test3

all: $(FILES:%=%.o)

$(FILES:%.o): %.c
  $(CC) -o $@ $^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:40:07.840

I actually answered my own question (with help from answers to [this question](https://stackoverflow.com/q/1633527/949700)). The answer marked "correct" also works.

```
all: $(addsuffix .x, $(basename $(wildcard file*.c)) 
```

Thanks for the help.

# java - 添加帖子后显示的进度对话框

> ID：15706170
> 
> 赞同：0
> 
> 时间：2013-03-29T15:22:13.747
> 
> 标签：java, android

我有以下代码我想在显示进度对话框时执行（向数据库添加一行）：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy);
httpclient = new DefaultHttpClient();
httppost = new HttpPost("http://192.168.1.38/hu/Addpost.php?username="+username+"&fname="+firstname+"&lname="+lastname+"&dop="+now+"&content="+post3+"&type="+post_type2+"");

                try
                {

                    nameValuePairs = new ArrayList<NameValuePair>();
                    nameValuePairs.add(new BasicNameValuePair("FirstN",firstname));
                    nameValuePairs.add(new BasicNameValuePair("LastN",lastname));
                    nameValuePairs.add(new BasicNameValuePair("Content",post1));
                    nameValuePairs.add(new BasicNameValuePair("type",post_type));
                    nameValuePairs.add(new BasicNameValuePair("Dateofp",now));
                    nameValuePairs.add(new BasicNameValuePair("username",username));
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    response = httpclient.execute(httppost);

                    if(response.getStatusLine().getStatusCode()==200)
                    {
                    entity=response.getEntity();
                    if(entity !=null)
                    {
                        Toast.makeText(getBaseContext(),"POST SUCCESFULLY ADDED",Toast.LENGTH_LONG).show(); 
                    }

                    }
                    else
                    {
                        Toast.makeText(getBaseContext(),"ERROR RERTY OR CHECK YOUR CONNECTION",Toast.LENGTH_LONG).show();
                    }

                    wholepost.setText("");

                }
                catch(Exception ex)
                {Toast.makeText(getBaseContext(),"CONNECTION ERROR",Toast.LENGTH_LONG).show();} 
```

我已经尝试过 AsyncTask 和线程，但没有任何效果，有时它可以工作，但在添加帖子后会显示进度对话框，请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:08:06.307

要做到这一点，您需要像 Mounzer 所说的那样使用 AyncTask。要做一个progressBar，你将不得不上传一些数据，回来更新你的progressBar，加载更多数据等等。

幸运的是，AsyncTask 使这很容易做到。这个非常简单的示例计数到 1000，并且在每次迭代时使用 TextView 发布结果。您可以轻松地将其更改为 progressBar 并将您的 http 邮政编码放入 doInBVackground()

```
protected class InitTask extends AsyncTask<Integer, String, Void> {

        // add the thread ID and count to the list
        @Override
        protected void  onProgressUpdate(String... values) {
            super.onProgressUpdate(values);
            TextView tv = new TextView(mContext);
            mThreadOutput.addView(tv);
            tv.setText(values[0]);

        }

        // do the thread work. at each iteration, set the progress to be
        // updated by the UI thread
        protected Void doInBackground(Integer... params ) {

            for (int i = 0; i < 1000; i++) {
                String s = "Thread " + params[0] + ": " + i; 
                publishProgress( s );
            }
            return null;

        }

} 
```

# python - dnspython 和“查找超时”

> ID：15706173
> 
> 赞同：2
> 
> 时间：2013-03-29T15:22:19.720
> 
> 标签：python, dns, celery, eventlet, dnspython

我正在使用 Django、Celery、Eventlet 和 dnspython 来异步解析大约 500 个 rss 提要。

当我尝试同时解析 20 多个提要时，使用 dnspython 会导致“查找超时”错误。当我卸载 dnspython 时一切正常，但我失去了一些时间，因为 dns 查找阻塞了 celery 池。您有什么想法可以解决吗？

这是我的芹菜任务代码：

```
import eventlet
feedparser = eventlet.import_patched('feedparser')
from celery import group

@task(ignore_result=True)
def update_feeds():
    group(update_feed.s(feed) for feed in Feed.objects.filter(active=True)).apply_async()

@task(ignore_result=True)
def update_feed(feed):
    parsed_feed = feedparser.parse(feed.feed_url, etag=feed.etag, modified=feed.modified)
    # It fails when I have dnspython installed returning <urlopen error (-3, 'Lookup timed out')> error 
```

我正在使用 Ubuntu 12.04 LTS

# css - 仅使用 CSS 将元素包裹在特定元素周围

> ID：15706175
> 
> 赞同：0
> 
> 时间：2013-03-29T15:22:25.637
> 
> 标签：css

我试图让元素包裹到浮动元素的两侧，而不是仅仅包裹在一侧。例如，我有[http://jsfiddle.net/p384K/](http://jsfiddle.net/p384K/)。我希望元素能够动态地存在于左侧和`#main`右侧。我可以用纯 CSS 做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:22:15.780

不幸的是，真的没有简单的方法来实现你想做的事情。它可以通过一些黑客攻击来实现，并假设您已经知道中心元素的大小。该技术基本上是为**您的侧面元素**中的中心元素**腾出空间**。

 **可在 2005 年 ALA 文章：[**Cross-Column Pull-Out Part 2：Custom Silhouettes**](http://alistapart.com/article/crosscolumn2)中找到对复杂形状的这种过程的非常详细的描述。

我举了两个基本的例子来说明你可以做什么。

## 示例 1：使用`.space`元素

`[**Demo**](http://jsbin.com/ajuqef/2)`

您所做的是具有这样的 HTML 结构：

```
<div class="container">
    <div class="center"></div>
    <div class="left">
        <div class="space></div>
    </div>
    <div class="right>
        <div class="space></div>
    </div>
</div> 
```

你有一个主页面容器，它的作用是设置全局宽度，也许是内容居中并且**有`position: relative`**.

然后你的CSS：

```
.container {

  position:  relative;
  width:     600px;

}

.left, .right {

  width:      50%;

}

.left { float: left; }

.right { float: right; }

.center {

  margin-left:      -75px; // Negative half the width
  width:            150px;
  height:           600px;
  position:         absolute;
  left:             50%;

}

.right .space { float: left;  }
.left  .space { float: right; } 
```

基本上，您正在做的是创建一个`.center`大小的孔，在您的列`.left`和`.right`列之间平均划分，然后将元素绝对定位在该孔内。

## 示例 2：使用伪元素

`[**Demo**](http://jsbin.com/ajuqef/4)`

相同的方法，但不是使用额外的 HTML 元素，而是使用`::before`列的伪元素在其中创建一个洞。CSS 中的唯一变化是：

```
.left::before, .right::before {

  content: "";
  height: 600px;
  width:  75px;

}

.left::before { float: right; }

.right::before { float: left; } 
```

这使得简单的两个侧列 + 一个中心列布局可行。但您可能需要根据布局的复杂程度添加其他元素，如 ALA 文章中所述。

正如我上面提到的，关键是你必须知道中心元素的大小才能完成这项工作。如果您愿意添加一点 JS，您可以通过动态计算大小并相应地调整孔的大小来轻松解决此问题。

可能还有其他一些仅 CSS 的方法比这更有效，但据我所知，没有本地方法可以让元素在另一个元素的两侧包装。**

# android - 不推荐使用 getPreferenceManager

> ID：15706179
> 
> 赞同：5
> 
> 时间：2013-03-29T15:22:40.193
> 
> 标签：android

我正在为 Android 制作动态壁纸。我的墙纸部分正在工作，并正在尝试为其添加设置。在 LiveWallpaperSettings 我有这个：

```
@Override
protected void onCreate(Bundle icicle)
{
    super.onCreate(icicle);
    getPreferenceManager().setSharedPreferencesName(LiveWallpaperService.SHARED_PREFS_NAME);
    addPreferencesFromResource(R.string.livewallpaper_settings);
    getPreferenceManager().getSharedPreferences()
            .registerOnSharedPreferenceChangeListener(this);
} 
```

编译器这么说`getPreferenceManager()`并且`addPreferencesFromResource()`已被弃用。我应该改用什么？

这些方法来自`PreferenceActivity`

[编辑]：根据迄今为止的少数评论，我显然使用的是过时的方法。有人可以指出使用 PreferenceFragments 的 LiveWallpaper 代码的当代示例吗？

[https://github.com/falsedmitri/LiveWallpaperTest.git](https://github.com/falsedmitri/LiveWallpaperTest.git)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:29:43.983

从PreferenceActivity[的文档中：](https://developer.android.com/reference/android/preference/PreferenceActivity.html)

> 在 HONEYCOMB 之前，这个类只允许显示一组偏好；现在应该在新的 PreferenceFragment 类中找到此功能。如果您在旧模式下使用 PreferenceActivity，则那里的文档适用于此处已弃用的 API。

因此，您可以切换到使用 Fragments，也可以忽略这些警告。（了解不推荐使用的方法总有一天会从 API 中消失……）

* * *

> 有人可以指出使用 PreferenceFragments 的 LiveWallpaper 代码的当代示例吗？

PreferenceActivities 和 PreferenceFragments 中使用的方法没有太大区别，一般来说切换到 Fragments 是一个很大的变化。但是[PreferenceFragment](https://developer.android.com/reference/android/preference/PreferenceFragment.html)有一个例子，你看到你仍然可以使用`addPreferencesFromResource()`它的现代形式的方法。

# python - 请解释一个python zip和解包解决方案

> ID：15706183
> 
> 赞同：2
> 
> 时间：2013-03-29T15:22:52.213
> 
> 标签：python, python-3.x, iterable-unpacking

这里有一个 Python 3 学习者：

该[问题](https://stackoverflow.com/questions/10479319/possible-to-return-two-lists-from-a-list-comprehension)有以下公认的答案：

```
rr,tt = zip(*[(i*10, i*12) for i in xrange(4)]) 
```

它返回两个元组。如果有人能分解答案并解释它对 Python 3 的作用，我将不胜感激（我知道 Python 3 中的`range()`返回迭代器）。我理解列表推导，但我对拆包感到困惑（我认为您只能使用星号表达式作为分配目标的一部分）。

我对下面的代码同样感到困惑。我理解结果和压缩（或认为我知道），但星号表达式再次让我打败了。

```
x2, y2 = zip(*zip(x, y)) 
```

从此：[_](http://docs.python.org/3/library/functions.html#zip)

```
>>> x = [1, 2, 3]
>>> y = [4, 5, 6]
>>> zipped = zip(x, y)
>>> list(zipped)
[(1, 4), (2, 5), (3, 6)]
>>> x2, y2 = zip(*zip(x, y))
>>> x == list(x2) and y == list(y2)
True 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T15:25:52.760

`*expression`将[参数解包](http://docs.python.org/3/tutorial/controlflow.html#tut-unpacking-arguments)应用于函数调用。它采用必须解析为可迭代的*部分*`expression`，并使该可迭代中的每个元素成为函数的单独参数。

 *因此，`zip(x, y)`返回一个迭代器（它是一个可迭代的），并且该迭代器中的每个元素都作为*外部* `zip()`函数的参数。

因为`zip(*[(i*10, i*12) for i in xrange(4)])`它也许更清楚一点；这里有几个元素：

*   `[(i*10, i*12) for i in xrange(4)]` *（应该`range()`在 python 3 中）*创建一个包含 4 个元组的列表，`[(0, 0), (10, 12), (20, 24), (30, 36)]`
*   然后该`zip(*...)`部分接受这 4 个元组中的每一个并将它们作为参数传递给`zip()`函数。
*   `zip()`获取每个元组并将它们的元素配对；每个元组两个元素意味着结果是 2 个列表，每个列表有 4 个值。

Because the `zip()` function produces two sequences, they can be assigned to the two variables.

I would have found the following a far more readable version of the same expression:

```
rr, tt = tuple(range(0, 40, 10)), tuple(range(0, 48, 12)) 
```*

# python - 没有paintEvent的绘画

> ID：15706187
> 
> 赞同：0
> 
> 时间：2013-03-29T15:22:58.780
> 
> 标签：python, events, canvas, pyqt, multiprocessing

我有一个带有画布小部件的 GUI。所以我需要用点来感受这个画布。问题是我需要创建一个单独的进程来运行 GUI，因为`(x,y)`点是从其他类生成的。所以我不知道如何从外部绘制这些点，`paintEvent`或者我如何（如有必要）`paintEvent`再次触发.-。

编辑 ：

我需要运行一个遗传算法，得到每一代的适应度结果，并在画布区域以折线图的形式表示！但我需要即时绘制/绘制结果。

因此，每次 GA 完成一个健身周期时，我都需要将此结果发送到画布区域。

我从[http://zetcode.com/tutorials/pyqt4/drawing/](http://zetcode.com/tutorials/pyqt4/drawing/)获得了这个示例代码并稍作修改！

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

"""
ZetCode PyQt4 tutorial 

In the example, we draw randomly 1000 red points 
on the window.

author: Jan Bodnar
website: zetcode.com 
last edited: September 2011
"""

import sys, random , time
from multiprocessing import Process
from PyQt4 import QtGui, QtCore

class Example(QtGui.QWidget):

    def status( self , text ):

        print '[GUI] ', text

    def __init__(self):

        super(Example, self).__init__()

        self.initUI()

    def initUI(self):      

        self.status('init ui')

        self.setGeometry(300, 300, 280, 170)
        self.setWindowTitle('Points')

        self.status('showing widgets')

        self.show()

    def paintEvent(self, e):

        self.status( 'playing with types : '+str(e) )

        self.status('paint event was called')

        qp = QtGui.QPainter()
        qp.begin(self)

        #self.drawPoints(qp)

        #self.drawRectangles(qp)

        self.draw_all_axis(qp, 300)

        self.draw_dot( 20, 20 )

        qp.end()

    def draw_all_axis( self , qp , length ):

        self.draw_x_axis( qp , length )
        self.draw_y_axis( qp , length )

    def draw_x_axis( self , qp , length ):

        color = QtGui.QColor(0, 0, 0)
        color.setNamedColor('#d49EBD8')
        qp.setPen(color)

        qp.setBrush(QtGui.QColor(73, 235, 216))
        qp.drawLine( 10 , length , length , length )

    def draw_y_axis( self , qp , length):

        color = QtGui.QColor(0, 0, 0)
        color.setNamedColor('#d49EBD8')
        qp.setPen(color)

        qp.setBrush(QtGui.QColor(73, 235, 216))
        qp.drawLine( 10, 10, 10, length )

    def draw_dot( self , x , y ):

        qp = QtGui.QPainter()
        qp.begin(self)

        color = QtGui.QColor(0, 0, 0)
        color.setNamedColor('#d4d4d4')
        qp.setPen(color)

        qp.setBrush(QtGui.QColor(200, 0, 0))
        qp.drawRect( x , y , x + 0.25, y + 0.25 )

    def drawPoints(self, qp):

        qp.setPen(QtCore.Qt.red)
        size = self.size()

        for i in range(1000):

            x = random.randint(1, size.width()-1)

            y = random.randint(1, size.height()-1)

            qp.drawPoint(x, y)     

    def drawRectangles(self, qp):

        color = QtGui.QColor(0, 0, 0)
        color.setNamedColor('#d4d4d4')
        qp.setPen(color)

        qp.setBrush(QtGui.QColor(200, 0, 0))
        qp.drawRect(10, 15, 90, 60)

        qp.setBrush(QtGui.QColor(255, 80, 0, 160))
        qp.drawRect(130, 15, 90, 60)

        qp.setBrush(QtGui.QColor(25, 0, 90, 200))
        qp.drawRect(250, 15, 90, 60)      

def external_dot_drawer( main_window ):

    for i in range(20, 100):

        main_window.draw_dot( i , i )

def main( ):

    print 'launching main window obj as app'
    sys.exit(app.exec_())
    print 'done!'

if __name__ == '__main__':

    print 'loading application abstraction'
    app = QtGui.QApplication(sys.argv)

    print 'building main window obj'
    gui = Example()

    print 'preparing to launch window as a separated process'
    p_main = Process( name='window' , target=main , args=( )  )

    print 'running new process'
    p_main.start()

    time.sleep(3)

    print 'trying to triggering paintEvent'
    p_external_dot_drawer = Process( name='extern_dot_drawer' , target=external_dot_drawer , args=( gui ) ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:01:04.187

The correct way to schedule a call to paintEvent is with QWidget.update().

I would also recommend using any of the existing python plotting libraries rather than writing your own. PyQtGraph has some nice multi-process features:

```
import pyqtgraph as pg
app = pg.QtGui.QApplication([])
import pyqtgraph.multiprocess as mp

## start child process
proc = mp.QtProcess()

## import pyqtgraph in the child process, create a plot window there
remotepg = proc._import('pyqtgraph')
win = remotepg.plot()

## create a scatter plot
plot = win.plot([1,4,2,3], [4,6,3,4], pen=None, symbol='o')

## ..after some processing, update the plot data
plot.setData(x=[1,2,3,4], y=[5,7,2,3]) 
```

# bash - 从 FTP 服务器获取文件列表

> ID：15706188
> 
> 赞同：19
> 
> 时间：2013-03-29T15:22:59.537
> 
> 标签：bash, ftp

我正在尝试获取我们在服务器上拥有的所有文件的列表（特别是我们在那里拥有的每个 pdf 文件）。我试过使用总指挥官并搜索文件。它在某种程度上起作用，例如，我得到了我们在那里拥有的每个 pdf 的列表，但无法导出结果（我们在那里有 100.000 多个文件）

我尝试使用 bash 脚本来获取信息，但我对 linux 不是很有经验，而且我真的不知道自己在做什么。

我的脚本如下所示：

```
#!/bin/bash
hostname="<host>"
ftp -i -nv $hostname << EOF
user <username> <password>
ls -R 
EOF 
```

运行上面的脚本我得到

```
?Invalid command
501 Illegal PORT command
ftp: bind: Address already in use
221 Goodbye 
```

任何帮助或指出我要搜索的内容将不胜感激。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-06T21:28:35.457

使用 curl，这很方便
`curl ftp://**yourftpserver/dir/** --user username:password`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-10T23:48:00.257

`ncftpls ftp://yourftpserver/dir/*.pdf`

请注意，`*.pdf`上述命令中的 等模式确实按预期工作。

对于递归，使用`-R`. 有关更多选项，请参阅`man ncftpls`。

`ncftpls`由`ncftp`包提供。对于 RHEL，此包在`epel`repo 中可用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-02-08T09:54:05.690

```
curl ftp://user:password@<ip>/path/ 
```

最后一个`/`是必须的，如果它是一个目录。这适用于 curl 版本 7.29.0

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-29T15:30:36.370

尝试配置`ftp`为使用 PASV（被动）模式进行数据传输。这是通过`-p`开关完成的。

我不确定您是否能够使用此 ftp 客户端进行递归文件列表。`ls -R`就我而言，只是给出了当前工作目录中的文件和目录列表。也许[shell/bash 中的递归 FTP 目录列表与单个会话（使用 cURL 或 ftp）](https://stackoverflow.com/questions/2614319/recursive-ftp-directory-listing-in-shell-bash-with-a-single-session-using-curl)会对您有所帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-06T15:49:55.790

正如我在其中一条评论中提到的那样，永远不要在命令中使用 user:password 作为纯文本，否则您将面临历史被劫持的风险！而是至少使用带有用户名+密码的受保护/受限文件并将其替换为您的命令，例如：

```
ftp://yourftpserver/dir/ --user "$(cat .userpw)" 
```

而 .userpw 是您的受保护/受限文件，其中包含示例内容：myusername:mypassword

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-06-30T13:44:52.707

`ls`在登录命令提交到 ftp 连接（被动）后，我一直在 linux 系统中运行这个 FTP 脚本。文件列表被写入标准输出流。脚本内联在 sh 脚本文件中。

```
#!/bin/sh

HOST=11.22.33.44
USER=myuser
PWD="mypwd"

ftp -p -n $HOST <<END_SCRIPT
quote USER $USER
quote PASS $PWD
ls
quit
END_SCRIPT
exit 0 
```

# html - 我想在同一行并排的 2 个 HTML 按钮

> ID：15706189
> 
> 赞同：-1
> 
> 时间：2013-03-29T15:23:00.990
> 
> 标签：html, css

我有 2 个 HTML 按钮，我希望它们与第一个（提交请求）按钮并排在同一行上。我遇到的问题是第二个按钮的顶部从底部按钮的底部开始。由于 margin-left: 50px 元素，第二个按钮正确地向右移动。我列出了下面 2 个按钮的 HTML：

```
<button style="float: left;" onclick="javascript:submitRequests();">
    Submit Request(s)
</button>
<button style="float: left; margin-left: 50px" 
        onclick="javascript:document.location.reload(true);">
    Reset
</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:41:06.183

在使用 Codepen 或 JsFiddle 添加您的代码或想法之前尝试一下。

我建议你看看我对这个解决方案的建议：http: [//cdpn.io/uKLga](http://cdpn.io/uKLga)

您会发现它很简单，您只需添加 2 个类并定义此按钮类型（提交和重置），这些类可帮助您按站点进行格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:33:03.917

这应该可以解决问题：http: [//jsfiddle.net/cau4t/](http://jsfiddle.net/cau4t/)

```
<div class="container">
    <button onclick="javascript:submitRequests();">Submit Request(s)</button>
    <button onclick="javascript:document.location.reload(true);">Reset</button>
</div>

.container {
    overflow: hidden;
}

button {
    float: left;
}

button:first-child {
    margin-right: 50px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:21:22.340

事实证明，我所要做的就是摆脱 2 个按钮之间的空间，现在它们不再偏移。这是在一个 Drupal 网络表单中，它似乎对额外的空间很挑剔。

# ant - 使用ant build.xml拼接js文件

> ID：15706190
> 
> 赞同：0
> 
> 时间：2013-03-29T15:23:03.927
> 
> 标签：ant

我正在尝试连接项目中的 js 文件，并使用 ant 将生成的文件放入构建文件夹中。

我的项目的文件夹结构是：

```
-Project
  -build.xml
  -build
  -src
    -init.js
    -Game.js 
```

我试图运行的 build.xml 文件是：

```
<project name="Build example" default="all" basedir=".">
    <!-- Setup -->
    <property name="SRC_JS_DIR" value="src" description="JavaScript source folder" />
    <property name="DIST_JS_DIR" value="build" description="Output folder for JavaScript files" />

    <property name="JS" value="${DIST_JS_DIR}/app.js" />

    <target name="js" description="Concatenate JavaScript source files">
        <echo message="Building ${JS}" />
        <concat destfile="${JS}">
            <fileset dir="${SRC_JS_DIR}" includes="init.js" />
            <fileset dir="${SRC_JS_DIR}" includes="Game.js" />
        </concat>
        <echo message="${JS} built." />
    </target>
</project> 
```

当我运行 ant 时，出现以下错误：

BUILD FAILED 项目“构建示例”中不存在目标“全部”。

请有人提供有关如何解决此问题的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:27:19.777

将目标名称更改为`all`或更改`default="all"`为`default="js"`。

标记的`default`属性`<project>`指示如果未指定将运行哪个目标。

# c++ - 为什么不消除有关此结构的填充字节的需要？

> ID：15706191
> 
> 赞同：1
> 
> 时间：2013-03-29T15:23:08.000
> 
> 标签：c++, visual-studio-2010, visual-c++, padding, memory-alignment

考虑以下简单结构：

```
struct Struct {
public:
  char  a;
  short int b;
  char  c;
}; 
```

如果此结构的实例放置在偶数（16 位对齐）地址，则需要两个填充字节来修复对齐（对于`b`数组中的任何后续实例以及对于数组中的任何后续实例）。

但是，实例*可以*放置在奇数地址，然后即使没有填充字节，对齐仍然是正确的。

所以我做了一个测试并观察到 ​​Visual C++ 2010 将添加这两个填充字节，这表明它总是将它们放置在偶数地址。

为什么 VC++ 不将它们放在奇数地址，每个对象节省 2 个字节？有什么我不知道的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T15:35:36.537

确实，如果该结构的布局没有填充，那么它可以放置在一个奇数地址，并且它的每个成员都会单独正确对齐。

问题是编译器如何将它放在一个奇怪的地址。可以肯定的是，这可以安排一个自动存储的变量。但是由 分配的堆分配变量`malloc`呢？遵守的约定`malloc`是，它必须返回一个内存块，该内存块为任何类型的对象正确对齐。如果`malloc`有一些对象需要放置在奇怪的地址，则永远无法做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:49:06.163

你可以通过让它看起来像这样来解决这个问题：

```
struct Struct{
public:
    short int b;
    char a;
    char c;
}; 
```

这会导致`sizeof(Struct) == 4`许多编译器

# jquery - 使用 jQuery 数组在页面内查找和替换

> ID：15706194
> 
> 赞同：0
> 
> 时间：2013-03-29T15:23:30.857
> 
> 标签：jquery, replace

我有一个字符数组，我想用 jquery 进行查找和替换。数组是：

```
var f = ['â€œ','â€','â€˜'','â€™','â€¦','â€”','â€“'];

var r = ['"','"',"'","'","...","-","-"]; 
```

我尝试了一些不同的想法，但没有任何效果。我在这里设置了一个小提琴来处理它：

[http://jsfiddle.net/npGRF/1/](http://jsfiddle.net/npGRF/1/)

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:32:03.423

在这个特定的示例中，问题不是您的替换功能，而是您的 jquery 选择器。如果您将 $(this) 替换为 $('body') 它会起作用。也就是说，我不确定将整个页面的 HTML 复制到一个字符串中，对其进行替换，然后将该字符串放回您的正文中是最有效的方法。也许你可以把它缩小到更小的部分，比如你内容中的 p 标签，你可以用一个类来标记它以从替换中消除其他 p 标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:31:49.513

你做对了。:)

在你的小提琴中，选择器`$(this)`是错误的，所以没有文本。您可以使用元素的 id 或整个身体来代替。此外，您忘记将文本重置为 dom。更换本身工作正常。

```
var text = $('#wfmrdablogspot').html();
var f = ['â€œ', 'â€', 'â€˜', 'â€™', 'â€¦', 'â€”', 'â€“'];
var r = ['"', '"', "'", "'", "...", "-", "-"];
text = text.replaceArray(f, r);
$('#wfmrdablogspot').html(text); 
```

[http://jsfiddle.net/npGRF/2/](http://jsfiddle.net/npGRF/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:35:53.773

一些基本调试显示`$(this).html()`不起作用（`this`被解析为当前窗口）。改为使用`$(document.body)`。

```
var html = $(document.body).html();
var f = ['â€œ', 'â€', 'â€˜', 'â€™', 'â€¦', 'â€”', 'â€“'];
var r = ['"', '"', "'", "'", "...", "-", "-"];
var newHtml = html.replaceArray(f, r);

$(document.body).html(newHtml); 
```

见[http://jsfiddle.net/npGRF/3/](http://jsfiddle.net/npGRF/3/)

# ruby - Sinatra 表单输入的 ID 格式

> ID：15706196
> 
> 赞同：0
> 
> 时间：2013-03-29T15:23:36.850
> 
> 标签：ruby, sinatra, erb, nested-forms, params

我们尝试在 Sinatra 中编写嵌套表单。我们可以轻松地将一些值作为模型字段传递：

`id="user[name]"`

但是，如果我们还想提交相关模型怎么办？假设我们要同时添加一个用户和他的 3 个爱好。如何将它们传递给参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:15:43.923

参数被转换为基于`name`属性的哈希，而不是`id`属性。

要向此哈希添加更多字段，请将它们添加到表单中。这些的结构以及您如何处理它们完全取决于您的实现，但发布它们很简单：

```
<form action="/route/to/post/to" method="POST">
  <input name="user[name]" id="user_name" type="text">
  <input name="user[hobbies][0][name]" type="text">
  <input name="user[hobbies][1][name]" type="text">
  <input name="user[hobbies][2][name]" type="text">
  <input type="submit">
</form> 
```

这将返回：

```
{"user"=>{"name"=>"hiya", "hobbies"=>{"0"=>{"name"=>"1"}, "1"=>{"name"=>"2"}, "2"=>{"name"=>"3"}}}} 
```

# batch-processing - 避免声明它们在扭矩上免费的非工作机器

> ID：15706197
> 
> 赞同：0
> 
> 时间：2013-03-29T15:23:38.317
> 
> 标签：batch-processing, torque

我在没有管理员访问权限的 Torque 服务器上运行作业。然而，一个插槽似乎经常声称它是免费的，但是当调度程序为其分配一个作业时，该作业会一直排队。因此，我的大量工作将被分配给该服务器并无限期地排队。

有什么方法可以开始这些工作/将它们移动到另一台机器上？或者在提交作业时可能会避开机器？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:43:43.090

如果您没有 root 权限，您可能需要您的系统管理员为您解除阻止该作业。

1.  检查 qstat -f 输出并查看作业被阻止的原因。可能是您请求的资源多于可用资源。

2.  将来准确指定您想要的节点（假设您的管理员允许） qsub somejob.sh -l

3.  如果您使用 Moab 等调度程序，请尝试以下操作（再次，假设您有权限） mjobctl -u mjobctl -l

# iphone - 如何从视图控制器中删除应用程序委托文件中设置的根视图

> ID：15706199
> 
> 赞同：0
> 
> 时间：2013-03-29T15:24:02.880
> 
> 标签：iphone, xcode, rootview

嗨，我正在使用 rootViewController。我有任务为 createProfile 视图设置运行时 rootviewController。我的项目是完全导航基础。

但是当我从服务器得到响应时，我必须将 CreateViewProfile AS RootViewController 设置为我已经完成如下：

[self.window setRootViewController:myCreateProfile];

但是当我点击关闭按钮时，我必须从主视图中删除上面设置的 rootviewController。为此，在我的关闭按钮操作上的 createViewController 中，我正在执行以下操作：

[self.view removeFromSuperView];

但我的问题是它没有删除我设置的 createViewController。

如果我做错了什么，请帮助我并告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:31:12.903

`[self.view removeFromSuperView]`这将来自它的superView的当前视图。

从您的代码中，您似乎看到了 ViewCONTROLLER TO THE rootViewController of Window

因此，在这种情况下，您应该执行以下操作

从窗口中删除当前的 ViewController`RootView Controller`并设置您想要的

假设当您单击关闭 BTN 时，删除 CurrentViewController 即`profileView`。

```
[self.window setRootViewController:nil]; 
```

然后设置所需的 ViewController 。

```
[self.window setRootViewController:createViewController]; 
```

`createViewController`要在关闭时显示的 ViewController 的实例`profileView`

# c# - Http Post 请求和响应 - 不止一次

> ID：15706202
> 
> 赞同：0
> 
> 时间：2013-03-29T15:24:10.430
> 
> 标签：c#, http, post

我正在使用此代码通过 POST 请求登录网站：

```
HttpWebRequest httpWReq =
    (HttpWebRequest)WebRequest.Create(@"http:\\domain.com\page.asp");

ASCIIEncoding encoding = new ASCIIEncoding();
string postData = "username=user";
postData += "&password=pass";
byte[] data = encoding.GetBytes(postData);

httpWReq.Method = "POST";
httpWReq.ContentType = "application/x-www-form-urlencoded";
httpWReq.ContentLength = data.Length;

using (Stream stream = httpWReq.GetRequestStream())
{
    stream.Write(data,0,data.Length);
}

HttpWebResponse response = (HttpWebResponse)HttpWReq.GetResponse();

string responseString = new StreamReader(response.GetResponseStream()).ReadToEnd(); 
```

[使用 C# 控制台应用程序创建 HTTP 发布请求并接收响应](https://stackoverflow.com/questions/4015324/http-request-with-post)

它工作正常，我得到 html 字符串作为响应，告诉我我已登录。但现在我想例如在不同的 url 下获取我的个人资料数据。例如，我使用“www.mywebsite.com/login”登录，第二个 url 是“www.mywebsite.com/myprofile”。我可以从第二个网址获取内容吗？当然我只能在登录后才能看到这个配置文件数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:45:39.180

我们可以假设网站使用 cookie 在服务器和 Web 客户端之间传输身份。因此，如果您想通过身份验证 cookie 发出另一个请求，您应该执行以下操作：

此时登录网站时

```
 HttpWebResponse response = (HttpWebResponse)HttpWReq.GetResponse(); 
```

以这种方式保存响应中返回的所有 cookie：

```
 CookieCollection cookies = response.Cookies; 
```

然后，在发出另一个请求时，附加 cookie：

```
 HttpWebRequest httpWReq =
       (HttpWebRequest)WebRequest.Create(@"http:\\www.mywebsite.com\myprofile");
 // other staff here 
 ...
 ...

 // then add saved cookies to the request
 httpWReq.CookieContainer.Add(cookies);

 // then continue executing the request
 ...
 ... 
```

# php - 表单上的两个提交按钮每个都在点击时重定向到不同的页面？

> ID：15706205
> 
> 赞同：0
> 
> 时间：2013-03-29T15:24:19.473
> 
> 标签：php, javascript, forms, redirect, submit

我承认我在这方面太过头了。我的时间不多了，因为我需要这个页面在星期一之前工作，我越来越绝望了；上周我一直在谷歌搜索和梳理 stackoverflow 的答案，但我仍然不知道如何让它发挥作用。

我有 1 个表单，底部有两个提交按钮，HOLD RESERVATION 和 BOOK NOW。每个按钮都需要提交表单数据（只是在电子邮件中，没什么特别的），然后重定向到预订确认静态 html 页面或我的预订页面。

我试过这个，它很好地重定向，但没有通过电子邮件向我发送表单数据：

```
<input type="submit" onclick="var e = document.getElementById('mpNOV'); e.submit(); e.action='mp-NOVconfirm.shtml';" value="Hold my reservation" class="submit"></td>
<td width="45%" style="padding-top:10px; padding-bottom:10px; border-top: 1px solid #6f3957;">
<input type="submit" onclick="var e = document.getElementById('mpNOV'); e.submit(); e.action='../../index.shtml';" value="Book Now!" class="submit"> 
```

我试过让我的 FORM ACTION="external.php" 这是 php 代码（基于我用于不同表单提交的 php 代码）：

```
<?php
if($_SERVER['REQUEST_METHOD'] === 'POST')
 {
 if(isset($_POST['Reservation']))
 {
 $subject = 'New Machu Picchu RESERVATION - November'; 
 $emailadd = 'jodi@happywivestravel.com'; 
 $url = 'http://www.happywivestravel.com/tour/machupicchu/mp-NOVconfirm.shtml'; 
 $req = '0';
 $text = "Results from form:\n\n"; 
 $space = ' ';
 $line = ' 
 ';
 foreach ($_POST as $key => $value)
 {
  if ($req == '1')
  {
  if ($value == '')
  {echo "$key is empty";die;}
 }
 $j = strlen($key);
 if ($j >= 20)
 {echo "Name of form element $key cannot be longer than 20 characters";die;}
 $j = 20 - $j;
 for ($i = 1; $i <= $j; $i++)
 {$space .= ' ';}
 $value = str_replace('\n', "$line", $value);
 $conc = "{$key}:$space{$value}$line";
 $text .= $conc;
 $space = ' ';
 }
 mail($emailadd, $subject, $text, 'From: '.$emailadd.'');
 echo '<META HTTP-EQUIV=Refresh CONTENT="0; URL='.$url.'">';
}

if(isset($_POST['Book']))
{
 $subject = 'New Machu Picchu BOOKING - November'; 
 $emailadd = 'jodi@happywivestravel.com'; 
 $url = 'http://www.happywivestravel.com/';
 $req = '0'; 
 $text = "Results from form:\n\n"; 
 $space = ' ';
 $line = ' 
 ';
 foreach ($_POST as $key => $value)
 {
  if ($req == '1')
  {
  if ($value == '')
  {echo "$key is empty";die;}
 }
 $j = strlen($key);
 if ($j >= 20)
 {echo "Name of form element $key cannot be longer than 20 characters";die;}
 $j = 20 - $j;
 for ($i = 1; $i <= $j; $i++)
 {$space .= ' ';}
 $value = str_replace('\n', "$line", $value);
 $conc = "{$key}:$space{$value}$line";
 $text .= $conc;
 $space = ' ';
}
mail($emailadd, $subject, $text, 'From: '.$emailadd.'');
echo '<META HTTP-EQUIV=Refresh CONTENT="0; URL='.$url.'">';
}
}
?> 
```

但是这里一定是我做错了，因为当我点击提交按钮时没有任何反应。没有重定向，没有通过电子邮件发送表单数据。

我最初想让这个函数与验证码脚本一起工作，但我现在不得不放弃它。我只需要让这些提交按钮尽快正常工作。

我对php几乎一无所知，而且我对javascript非常熟悉（我在这里学习）。我真的很感激这里的任何帮助。谢谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-15T09:47:36.530

一个更简单的jquery方法：

```
$('#buttonid1').click(function() {
    $('#formid').attr('action', '/path/page1/');
    $('#formid').submit();
});
$('#buttonid2').click(function() {
    $('#formid').attr('action', '/path/page2/');
    $('#formid').submit();
}); 
```

只是在说...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:03:49.933

这就是 jQuery 是你最好的朋友的地方！

两个带有 ID 的按钮。

```
<input type="button" id="btn1" value="Hold my reservation" class="submit">
<input type="button" id="btn2" value="Book Now!" class="submit"> 
```

然后您将使用 jQuery 通过 ID 检测两个按钮的点击操作，并在其中发送一个 Ajax 调用作为 POST 请求（表单提交），然后重定向！布姆。

```
$('#btn1').click(function()
{
    $.ajax(
    {
        url: "submit_script.php",
        type: "POST",
        data: {input1: input1, input2: input2},
        dataType: "html",
        success: function(data)
        {
            window.location = 'http://www.example.com/page.php';
        }
    });
});

$('#btn2').click(function()
{
    $.ajax(
    {
        url: "submit_script.php",
        type: "POST",
        data: {input1: input1, input2: input2},
        dataType: "html",
        success: function(data)
        {
            window.location = 'http://www.example.com/page.php';
        }
    });
}); 
```

您可以在 Ajax 中发挥创意并发送您想要的任何输入字段。这就是您将它们分开和/或将每次点击发送到不同的提交 URL 的方式。

您还可以使用函数参数中的**数据变量将数据传递给“page.php”。**

**或者**

您可以通过重命名按钮名称来检测*您***在**提交表单中按下的按钮，然后在提交页面上的帖子中检测它。

参考此页面以获取上述解决方案：
[stackoverflow.com/questions/547821/two-submit-buttons-in-one-form](https://stackoverflow.com/questions/547821/two-submit-buttons-in-one-form)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:13:38.353

尝试命名您的提交按钮`Reservation`和`Book`，如下所示：

```
<input type="submit" onclick="this.name='Reservation'; var e = document.getElementById('mpNOV'); e.submit(); e.action='mp-NOVconfirm.shtml';" value="Hold my reservation" class="submit"></td>
<td width="45%" style="padding-top:10px; padding-bottom:10px; border-top: 1px solid #6f3957;">
<input type="submit" onclick="this.name='Book'; var e = document.getElementById('mpNOV'); e.submit(); e.action='../../index.shtml';" value="Book Now!" class="submit"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:39:04.537

为什么不使用表单标签中的按钮？并导航？

```
<form id="formid" action="link" method="post"> 
```

# java - 使用java将转储位置传递给批处理文件

> ID：15706213
> 
> 赞同：-1
> 
> 时间：2013-03-29T15:24:51.210
> 
> 标签：java

我有一个 bat 文件来转储数据库。我想用 java 执行它，我想使用 JFileChooser 添加该转储位置。可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:20:22.913

是的，当然有可能。编写您的批处理，以便它接受一个参数 - 转储路径。

然后使用 JFileChooser 选择文件夹位置并在 Java 应用程序中执行批处理文件。以下代码将创建一个带有两个按钮的框架 - 一个选择目录并将绝对路径连接到命令字符串，另一个按钮执行您的批处理。

```
public class DBDumpExec {

private static final String batchCMD = "myBatch.bat";
public static String directoryChosen = "";

public static void main(String[] args) {
    final JFrame frame = new JFrame("DB Dump Executor");
    frame.setSize(450, 150);
    Container content = frame.getContentPane();
    content.setLayout(new GridLayout(3, 1, 5, 5));

    // Display directory label
    final JLabel directoryLabel = new JLabel();
    // Button to open Dialog
    JButton openDialogButton = new JButton("Open Dialog");
    openDialogButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent event) {
            JFileChooser chooser = new JFileChooser();
            chooser.setDialogTitle("Select target dump directory");
            chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
            File myFile;
            int returnVal = chooser.showOpenDialog(frame);
            if (returnVal == JFileChooser.APPROVE_OPTION) {
                myFile = chooser.getSelectedFile();
                directoryChosen = myFile.getAbsolutePath();
                directoryLabel.setText(directoryChosen + " chosen!");
                System.out.println(myFile.getAbsolutePath());
            }
        }
    });
    // Click this button to run the batch
    JButton executorButton = new JButton("Execute DB");
    executorButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent event) {
            // Run batch
            try {
                Process process = Runtime.getRuntime().exec(
                        batchCMD + " " + directoryChosen);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    });
    content.add(openDialogButton);
    content.add(directoryLabel);
    content.add(executorButton);
    frame.setVisible(true);
  }
} 
```

[从Runtime](http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html) Javadoc阅读有关执行命令的更多信息。

# python - 每个用户安装在不同文件夹中的 python 应用程序的路径信息

> ID：15706217
> 
> 赞同：0
> 
> 时间：2013-03-29T15:24:54.483
> 
> 标签：python, tkinter

我不确定如何寻找这个，所以我将描述这种情况。

我正在使用 Python 3.3 构建跨平台应用程序，使用 tkinter 作为 GUI，并使用 cxfreeze 创建安装程序。我现在想知道的是我的应用程序如何知道它的安装位置？

我计划使用该应用程序分发一些 pdf 文件，但这些文件的直接路径会因用户而异（即使 PDF 文件夹将具有相同的“距离”；安装后它始终与可执行文件相距一个文件夹）。

那么，我如何才能将此路径信息包含到我的应用程序中呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:30:08.267

如果你的文件系统是这样的：

```
主目录
  |
  |-bin
  | |-myapp.py
  |
  |-pdf
     |-file1.pdf

```

只需通过将相对路径（作为字符串）分配给变量来访问 PDF：

```
pdf_path = "../pdf/file1.pdf" 
```

然后通过调用使用您的外部`start`命令`os.system`：

```
import os

os.system("start " + pdf_path) 
```

你应该准备好了。

# php - file_get_contents 不适用于我的域

> ID：15706220
> 
> 赞同：1
> 
> 时间：2013-03-29T15:25:04.127
> 
> 标签：php, curl, file-get-contents

我尝试使用 file_get_contents() 解析网站的 html。

我从我的网站运行代码。

起初它工作正常。但突然出现了这个错误：

```
Warning: file_get_contents(http://www.***.com/) [function.file-get-contents]: failed to open stream: HTTP request failed! 
```

我尝试了其他网站，它工作正常。我从我的另一个网站运行代码，它工作正常。

所以我在这里搜索并使用了cURL代码：

```
$curl_handle=curl_init();
curl_setopt($curl_handle, CURLOPT_URL,'http://www.***.com/');
curl_setopt($curl_handle, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl_handle, CURLOPT_USERAGENT, 'Your application name');
$query = curl_exec($curl_handle);
curl_close($curl_handle); 
```

但它只是返回一个空白页。

看起来我试图将内容阻止或将我的网站域列入黑名单的网站。

我有办法摆脱这个吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:27:30.940

您可以尝试找出连接被阻止的原因：

*   基于 IP：他们阻止了您的服务器。
*   基于用户代理：发送将您识别为机器人的用户代理。
*   如果他们不喜欢你的机器人用户代理假装是别人的机器人，比如谷歌（*邪恶*）
*   如果他们阻止机器人，发送一个看起来像浏览器的用户代理（*邪恶*）
*   标识浏览器与脚本的其他一些参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:33:43.710

您的服务器无法访问其他服务器

可能是 dns 问题、拼写错误或其他服务器阻止了您的 ip..

curl_error() 说什么？

顺便说一句，CURLOPT_CONNECTTIMEOUT 2 秒通常很小

# events - Jquery mobile pagebeforehide Transition事件未触发

> ID：15706223
> 
> 赞同：1
> 
> 时间：2013-03-29T15:25:17.347
> 
> 标签：events, jquery-mobile, jquery, transition

我正在编写一个简单的警报，它将触发 pagebeforehide 转换事件，但这里没有触发是我的代码。注意：我正在使用 Jquery-1.9.1.min.js" AND "jquery.mobile-1.3.0-rc.1.js"

```
 <script>
    $("section").live('pagebeforehide', function (event, ui) {
       alert("page being hidden" + ui.prevPage);
    });
  </script> 
```

这是HTML

# 页面转换示例

这是第 1 页

转到第二页

```
<section id="secondpage" data-role="page">
    <header data-role="header">
    <h1>Page Transition Example</h1>
    </header>
    <div data-role="content">
    <p>This is page 2</p>
    <a href="#firstpage">Go to first page</a>
    </div>
</section> 
```

如何将元素绑定到页面转换事件的版本之间是否有变化？因为我无法触发我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:41:16.560

**Live**已被弃用并且在 jQuery 1.9 + 中不再存在，您应该使用**on**代替。

这是一个工作示例：http: [//jsfiddle.net/Gajotres/ghAxp/](http://jsfiddle.net/Gajotres/ghAxp/)

```
$(document).on('pagebeforehide', 'section', function(event, ui){       
   alert("page being hidden");
}); 
```

# javascript - Javascript 替换功能有问题

> ID：15706228
> 
> 赞同：0
> 
> 时间：2013-03-29T15:25:51.613
> 
> 标签：javascript

```
var my_string = "some text goes here!!!"; 
```

为什么`my_string.replace('!', '*', my_string);`它只给

```
some text goes here!!* 
```

而不是`some text goes here***`？

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T15:28:30.213

默认情况下 replace() 仅替换第一次出现。要替换所有匹配项，请传入全局标志，如下所示：

```
var my_string = str.replace(/!/g,"*"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:28:51.517

您可以使用 g.. 执行全局替换

g 修饰符用于执行全局匹配（查找所有匹配而不是在第一个匹配后停止）。

```
var replaced_string=  my_string.replace(/!/g, '*'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T15:30:17.650

您需要使用*全局*标志`g`。这应该适合您的需求：

```
.replace(/!/g, '*'); 
```

# ruby - MongoDB实例故障测试

> ID：15706230
> 
> 赞同：1
> 
> 时间：2013-03-29T15:26:10.707
> 
> 标签：ruby, mongodb, testing

我正在[使用 Eventmachine 上的 Ruby MongoDB 客户端](https://github.com/fl00r/monga)，我想知道如何测试 mongo 实例故障、副本集投票（主要故障）和其他类似的东西。

例如。客户端应建立与副本集的连接。然后主要失败，客户端应该找到下一个主要并在那里重定向所有查询。

也许有 mongodb 命令来暂停/恢复实例。或者我应该分叉进程和 sigstop/sigcont（但这将是依赖于操作系统的解决方案）。

**UPD**

只是看看`mongodb-ruby-driver`它是如何工作的，要做同样的事情 [https://github.com/mongodb/mongo-ruby-driver/blob/master/test/tools/mongo_config.rb](https://github.com/mongodb/mongo-ruby-driver/blob/master/test/tools/mongo_config.rb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:25:51.553

我可以根据我在测试 Mongo 副本集方面所做的工作给你一些建议，但恐怕它是相当特定于在云中托管节点的。仍然也许你可以从中拿走一些东西。

假设您设置了副本：

1.  确保所有节点具有相同的优先级。编写一个对副本集进行缓慢读取的客户端（确保所有三台机器都在您的客户端配置中表示）。慢读意味着写一个大查询，然后在光标上缓慢迭代。继续让主节点离线，看看会发生什么。您可以跟踪其他节点的日志文件，以观察它们对新主节点的投票。

2.  如果您为每个节点使用主机名，请运行一个运行缓慢的查询，然后停止/启动一个节点，以便主机名获得一个新的 IP 地址。我们发现 Mongo 客户端不会*刷新*DNS 缓存，并且您使用的是旧 IP 地址。（这是针对 Java 客户端的 - 我们已经提交了 Jira 错误）。

3.  请注意，如果您重新启动副本集中的所有节点，则主节点会移动。有时是节点 1，有时是节点 2，等等。这假设所有节点的优先级相同。你的客户处理得好吗？我们曾经遇到过问题，因为我们硬编码了一个节点进行写入，突然间所有的写入都会失败。

4.  编写一个工具来模拟连续写入，然后开始使节点脱机、杀死主节点、使用新 IP 重新启动机器等。你要放弃任何写入吗？

5.  There is no command I know of to pause/resume instances other than just stopping mongod. I like powering machines down to test personally.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:57:54.493

Finally I have implemented fake Mongodb Server that binds to required port, answers with fake replies to queries. Also it replies on "isMaster" query. So you can stop primary/secondary any time, you could fire voting who will be next primary, etc. It's look the very best choice because it is about 100 lines of code and works perfectly on any OS. :)

[https://github.com/fl00r/monga/blob/master/spec/helpers/mongodb.rb](https://github.com/fl00r/monga/blob/master/spec/helpers/mongodb.rb)

# hbase - 连接到不同服务器中的 Zookeeper

> ID：15706232
> 
> 赞同：1
> 
> 时间：2013-03-29T15:26:13.577
> 
> 标签：hbase, apache-zookeeper

我正在尝试从拥有自己的 zookeeper 的 dev 集群连接到在另一个集群或环境（例如暂存）中运行的 zookeeper。

当我在分布式模式下运行它时，我无法连接到不同的 hbase 实例，但是当我在伪或独立模式下运行时，我可以连接到不同的 hbase 环境。

```
 Configuration cloneConfig = HBaseConfiguration.create();
    cloneConfig.clear();
    cloneConfig.set("hbase.zookeeper.quorum", "shost3,shost2,shost1");
    cloneConfig.set("hbase.zookeeper.property.clientPort", "2181");
    HBaseAdmin.checkHBaseAvailable(cloneConfig); 
  destinationTable = new HTable(cloneConfig, destinationTableName); 
```

有没有办法连接到不同的动物园管理员而不是它正在运行的开放？例如，如果我使用默认配置连接到 hbase 服务器

```
Configuration conf = HBaseConfiguration.create();
new HTable(conf, destinationTableName); 
```

我看到它连接到日志中的默认 Zookeeper。

```
zookeeper.ZooKeeper: Initiating client connection, connectString=host1:2181,host2:2181, 
```

但是设置 hbase.zookeeper.quorum 属性并没有改变连接字符串，它仍然连接到默认的 zookeeper。

# c# - 为什么简单的算术在没有强制转换的情况下不起作用？

> ID：15706234
> 
> 赞同：1
> 
> 时间：2013-03-29T15:26:22.897
> 
> 标签：c#, casting

我刚刚发现这个：

```
ushort i = 4;
i = i + 4; 
```

给出编译器错误：

> 无法将类型“int”隐式转换为“ushort”。存在显式转换（您是否缺少演员表？）

我必须这样修复它：

```
ushort i = 4;
i = (ushort)(i + 4); 
```

这背后的原因是什么？使用所有数据类型不应该是显而易见且易于使用的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T15:28:42.347

文字`4`是 an `int`，加法`i + 4`也是，被提升为。此加法的结果也是，因此您不能在没有强制转换的情况下将其分配给 a ，因为 C# 不允许隐式转换为更小的数值类型。`int``i``int``int``ushort`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T15:29:54.797

原因是因为 ushort + ushort 实际上返回一个 int。查看[此线程](https://stackoverflow.com/questions/10065287/why-is-ushort-system-uint16-ushort-equal-to-int-system-int32)以获取有关为什么会这样的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:29:11.060

这是因为编译器将其`4`视为`integer`. 从较高数据类型到较低数据类型的转换需要显式转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:34:09.140

根据 C# 语言标准，特别是关于整数文字的第 2.4.4.2 节：

整数文字的类型确定如下：

如果字面量没有后缀，则它具有可以表示其值的第一种类型：int、uint、long、ulong。如果文字以 U 或 u 为后缀，则它具有可以表示其值的第一种类型：uint、ulong。如果文字以 L 或 l 为后缀，则它具有可以表示其值的第一种类型：long、ulong。如果文字以 UL、Ul、uL、ul、LU、Lu、lU 或 lu 为后缀，则为 ulong 类型。

因此，您的号码被视为 int，这就是原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T15:35:31.597

The `+`-operatior for integer types is defined only between pairs of `int`, `uint`, `long`, and `ulong`. To calculate `i+4` first `i` has to be converted from `ushort` through an implicit numeric conversion into `int`, and the result is of the same type - also `int` So the type of `i+4` is actually `int`. Since there is no implicit conversion that would allow assigning an `int` to a variable defined as `ushort` the compiler gives you an error for `i = i + 4`.

Note that you still can use the below because `+=` involves an implicit cast:

```
i += 4; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T15:37:22.967

I think the main thing to take away from the comments is that int32 was just the 'default' type to be used by the common architecture back in the day. I don't know about native support for smaller integer types by current processors, but I wouldn't be surprised if everything is still converted to int32 by the compiler under water even if it is a ushort.

So (u)short is more like a validation constraint for the programmer than a memory-saver. Even if it is a memory saver, I wouldn't be surprised if more CPU cycles are needed to convert back and to ushorts.

# iphone - iOS 中的布局 - 如何创建这样的布局？

> ID：15706240
> 
> 赞同：1
> 
> 时间：2013-03-29T15:26:38.700
> 
> 标签：iphone, ios, layout, uitabbarcontroller

我想创建一个看起来像 Twitter 的应用程序的应用程序..

![在此处输入图像描述](../Images/c57cda8cc6cc9f3072d339cac04442ea.png)

我想知道我该怎么做这个布局？如果我用 Java/Swing 编写，我会使用布局管理器；创建一个框或表格布局管理器并向布局管理器添加标签、输入和其他元素，或者我将使用 Html，我创建一个表格并将标签、输入添加到表格的单元格中，我将设置矩形背景（图像中的数字 1）作为表的背景。

但是iOS中没有像Java或CSS那样的布局管理器或表格，我对我应该做什么有点困惑？

我将 View 的背景更改为灰色，并为矩形背景（图像中的第 1 号）添加了一个 ImageView，并在此 ImageView 上创建了输入和标签，但我认为必须有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T15:36:07.163

您可以使用`UITableView`. TableView 应该有 2 个部分，分别为 3 行和 2 行。

然后你可以子类化`UITableViewCell`. 对于底部部分，您不需要子类 tableViewCell 您可以使用样式`UITableViewCellStyleValue1` 并使用`textLabel`它`detailTextLabel`提供。

其他可以使用故事板提供的原型单元创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:34:46.553

在顶部你有一个 UINavigationBar。整个事情都在一个 UITabBarViewController 中，它为您提供底部的栏。视图本身是一个 UITableView 设置为组部分。单元格的内容是非常直接的标签和视图。

UITableViewController 上有很多教程。我会从那里开始。这是一个例子： http: [//www.iosdevnotes.com/2011/10/uitableview-tutorial/](http://www.iosdevnotes.com/2011/10/uitableview-tutorial/)

# c++ - CMP 和 JGE 在 Turbo C++ 中不起作用

> ID：15706241
> 
> 赞同：0
> 
> 时间：2013-03-29T15:26:43.143
> 
> 标签：c++, visual-studio-2010, assembly, turbo-c++

我正在使用 C++ 和汇编语言（8086）编写一个混合程序，以从数组中找到最小的数字。这是我的代码

```
#include<iostream>
#include<conio.h>
using namespace std;
void main()
{
__int16 a[5],x,y,res;
int i,j;
y=999;

cout<<"\n Enter 5 Numbers:";
for(i=0;i<5;i++)
{
    cin>>a[i];
}

_asm{
    mov bx,y
}

//Finding smallest
for(i=0;i<5;i++)
{
    x=a[i];
    _asm{
        mov ax,x
        cmp ax,bx
        jge nxt
        mov bx,ax
        nxt:
    }
}

_asm{
    mov res,bx;
}

cout<<"\n Smallest Element:"<<res;
getch();
} 
```

上面的代码是用 Visual Studio 2010 编写的，似乎运行良好。但是当我为 Turbo c++ 更新相同的代码时（即将“iostream”更改为“iostream.h”，删除“using namespace std;”，将“__int16”更改为“int”等），它不起作用。执行后产生的答案是错误的。

这是我的 TC++ 程序

```
#include<iostream.h>
#include<conio.h>
void main()
{
int a[5],x,y,res;
int i,j;
y=999;

cout<<"\n Enter 5 Numbers:";
for(i=0;i<5;i++)
{
    cin>>a[i];
}

_asm{
    mov bx,y
}

//Finding smallest
for(i=0;i<5;i++)
{
    x=a[i];
    _asm{
        mov ax,x
        cmp ax,bx
        jge nxt
        mov bx,ax
    }
    nxt:
}

_asm{
    mov res,bx;
}

cout<<"\n Smallest Element:"<<res;
getch();
} 
```

为什么 TC++ 和 Visual Studio 10 没有给出相同的答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:24:25.473

您不能期望寄存器在程序集片段之间保留它们的值。你有三个汇编片段，它们之间有 C 块，它们依赖于`bx`保持不变。编译器没有做出这样的承诺。

要么使用内存来存储运行最小值，要么使用单个程序集片段重新制定。对于后一种方法，您必须在汇编中重写 for 循环和数组访问；这是非常可行的。像这样：

```
_asm{
mov dx, y ; we'll use dx instead of bx for the running minimum - long story
mov bx, a   ; that's the array pointer
mov si, 0 ; that's our i
loop:
    mov ax, [bx+si*2] ; read a[i] into ax; *2 because int is two bytes
    cmp ax,dx
    jge nxt
    mov dx, ax
    nxt:
    ;Now the for loop stuff
    inc si ; i++
    cmp si, 5 ; compare i to 5
    jl loop   ; if less, continue looping
; End of loop
mov res,dx;
} 
```

我将 bx 和 si 用于基址+索引内存访问，因为在早期的 x86 CPU 上，您只能使用有限的寄存器子集（bx 或 bp 用于基址，si 或 di 用于索引）进行这种内存访问。如今，您可以使用任何寄存器组合；但我不确定古董 Turbo C 是否会接受。

# ios - 是否可以使用 FPPopover 移动箭头所在的位置？

> ID：15706243
> 
> 赞同：0
> 
> 时间：2013-03-29T15:26:48.080
> 
> 标签：ios, ios5, ios6, uipopovercontroller, fppopover

我知道 FPPopover 可以将其移动到顶部、底部、左侧或右侧，如果您将其分配给视图，它将指向该视图，但是如果您将 FPPopover 分配给 CGPoint，就像我一样在下图中？

![](../Images/acf1ebe698f318aa6ec6d2db2044ba7b.png)

在这里，我不想让它越过 ôO•（这是一只兔子，别管我），我想要它越过 Aa，但我不知道如何移动箭头。

在任何人建议将其分配给按钮视图之前，将其放置得太高，我希望它更接近实际图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:02:50.687

用FPPopover中的`presentPopoverFromPoint:`方法是可以的，只要在制作CGPoint的时候调整x点就可以了。

# visual-studio-2008 - 发布网站时 Visual Studio 2008 挂起

> ID：15706251
> 
> 赞同：0
> 
> 时间：2013-03-29T15:27:14.290
> 
> 标签：visual-studio-2008, web-applications

最近，为了更好的可维护性，我对文件系统上的一些项目进行了重组和移动。现在，我的所有项目都已编译，但每次我尝试发布网站项目时，Visual Studio 2008 在尝试发布特定目录时都会挂起。下面是我在输出挂起之前看到的快照。它总是挂在“正在发布目录图像...” 是否有一些其他日志或资源可用于确定为什么 Visual Studio 2008 在发布此目录时停止响应？我已经重新启动VS并重新启动无济于事。非常感谢任何建议/意见。

```
Publishing directory Css...
Publishing directory Documentation...
publishing directory Documents...
publishing directory Images... (Visual Studio 2008 Stops Responding Here Every Time) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:55:54.553

想想看，我必须完全关闭我的笔记本电脑并在重新启动之前拉电源线几分钟。然后，我能够再次发布。

# jquery - jquery在mousemove上平滑旋转

> ID：15706254
> 
> 赞同：0
> 
> 时间：2013-03-29T15:27:23.953
> 
> 标签：jquery, transform

我想在鼠标移动时添加一些带有旋转背景的酷 UI，比如在 icloud.com 上，现在我得到了下面的代码

```
 $("#VIEW").mousemove(function(e){
             var pageCoords = e.pageX + e.pageY;
             var max = $(document).width() + $(document).height();
                 var p = (pageCoords/max)*30;
             $('#ROTATE').css({ 'transform':'rotate(' + p + 'deg)'});
        }); 
```

问题是，这是实时旋转，我喜欢让它变慢，添加一些延迟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:30:14.350

使用[**animate()**](http://api.jquery.com/animate/)：

```
$('#ROTATE').animate({ 'transform':'rotate(' + p + 'deg)'}, 600); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:30:41.520

我建议您阅读此[http://code.google.com/p/jqueryrotate/wiki/Examples](http://code.google.com/p/jqueryrotate/wiki/Examples)。你有很多旋转图像的例子。例如 ：

```
$("#img").rotate({ 
   bind: 
     { 
        mouseover : function() { 
            $(this).rotate({animateTo:180})
        },
        mouseout : function() { 
            $(this).rotate({animateTo:0})
        }
     } 
}); 
```

# sql - 服务代理队列正在禁用自己，无法找出原因

> ID：15706259
> 
> 赞同：5
> 
> 时间：2013-03-29T15:27:40.513
> 
> 标签：sql, sql-server, service-broker

在 sys.transmission_queue 中，我得到的唯一信息是“一条或多条消息无法传递到此对话所针对的本地服务”。

如果我重新启用问题队列之一（有五个）并将激活设置为关闭，则队列将填满其消息。如果我随后运行 Activation SP，我会正确处理消息并且没有问题。但是一旦我打开激活，如果队列中有任何消息，队列将再次禁用自己。

我完全迷路了。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T18:17:09.303

[作为对有毒消息处理保护](http://msdn.microsoft.com/en-us/library/ms171592(v=sql.105).aspx)的反应，队列会自行禁用。这意味着您激活的程序正在回滚，可能是由于某些异常。激活的过程没有发送错误的会话，因此它们将其发送到 ERRORLOG。检查您的错误日志，应该充满来自您激活程序的错误消息。

最简单的故障排除方法是在激活关闭时从 SSMS 手动运行激活的过程。尝试重新创建与激活相同的执行上下文，请参阅[内部激活上下文](http://msdn.microsoft.com/en-us/library/ms171585(v=sql.105).aspx)。关键部分是 EXECUTE AS 上下文，它正在改变很多行为，尤其是安全性。所以试试这个（假设你的队列在下面执行`dbo`）：

```
use <dbname>;
go

execute as user = 'dbo';
go

exec <sp_my_activated_proc>;
go

revert;
go 
```

您可能会收到一条错误消息，这可能是您反复禁用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T02:39:11.047

我会假设我正在处理这种有毒的消息。

队列在 2008 年和 2012 年发生第一条消息后禁用。但在我的 2008 r2 开发 PC 上运行良好

但是，“SQL Server 日志”中没有显示任何内容

如果我在没有激活子句的情况下创建队列并手动运行 SQL，则 SP 运行并返回而没有错误（日志中也没有任何内容），并且队列禁用

如果我设法找出原因，我会更新这个。

这是消息中毒 - 连续 5 次回滚后无声失败。

从未找到任何日志，但原因是我进行了 NULL 检查：

```
WAITFOR
(
    RECEIVE TOP(1)
        @msg        = convert(xml,message_body),
        @DlgId      = conversation_handle
    FROM dbo.AuditLog_Request_Queue
), TIMEOUT 1000;

-- exit when waiting has been timed out
IF @@ROWCOUNT = 0
BEGIN
    IF @@TRANCOUNT > 0
    BEGIN
        ROLLBACK TRANSACTION;
    END
    BREAK;
END

-- exit when waiting has been timed out
IF @msg IS NULL
BEGIN
    IF @@TRANCOUNT > 0
    BEGIN
        ROLLBACK TRANSACTION;
    END
    BREAK;
END 
```

将其移至后面的 EXECUTE 语句停止了问题

# sorting - 在 Lua 中对表 [] 进行排序

> ID：15706270
> 
> 赞同：34
> 
> 时间：2013-03-29T15:28:23.687
> 
> 标签：sorting, lua, lua-table

我有一个我正在尝试排序的 Lua 表。表格的格式如下：

```
tableOfKills[PlayerName] = NumberOfKills 
```

这意味着，例如，如果我有一个名叫 Robin 的玩家总共击杀了 8 个玩家，而另一个名叫 Jon 的玩家总共击杀了 10 个玩家，那么表格将是：

```
tableOfKills[Robin] = 8
tableOfKills[Jon]   = 10 
```

我将如何对这种类型的表格进行排序以首先显示最高的杀戮？提前致谢！

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-03-29T16:01:40.117

Lua 中的表是一组具有唯一键的键值映射。这些对以任意顺序存储，因此该表不以任何方式排序。

您可以做的是以某种顺序*遍历*表。基本`pairs`不能保证访问键的顺序。这是一个自定义版本`pairs`，我之所以称它为 ，`spairs`是因为它以排序顺序遍历表：

```
function spairs(t, order)
    -- collect the keys
    local keys = {}
    for k in pairs(t) do keys[#keys+1] = k end

    -- if order function given, sort by it by passing the table and keys a, b,
    -- otherwise just sort the keys 
    if order then
        table.sort(keys, function(a,b) return order(t, a, b) end)
    else
        table.sort(keys)
    end

    -- return the iterator function
    local i = 0
    return function()
        i = i + 1
        if keys[i] then
            return keys[i], t[keys[i]]
        end
    end
end 
```

这是使用此类功能的示例：

```
HighScore = { Robin = 8, Jon = 10, Max = 11 }

-- basic usage, just sort by the keys
for k,v in spairs(HighScore) do
    print(k,v)
end
--> Jon     10
--> Max     11
--> Robin   8

-- this uses an custom sorting function ordering by score descending
for k,v in spairs(HighScore, function(t,a,b) return t[b] < t[a] end) do
    print(k,v)
end
--> Max     11
--> Jon     10
--> Robin   8 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-12-10T20:08:22.370

另一种避免迭代器的排序方法是将表传递给键值对列表（即：list = {{k1,v1}, {k2, v2}, ...}。这是我的解决方案：

```
local ranks = {}
for player,kills in pairs(tableOfKills) do
    table.insert(ranks, {player, kills})
end

-- Now we use Lua's built-in sort function with a short custom comparator function:
table.sort(ranks, function (a, b) return a[2] > b[2] end)

-- The only thing left to do is display the results:
for i=1,#ranks do
    print(ranks[i][1], ranks[i][2])
end 
```

# python - 在 Google Cloud Endpoints 中返回自定义 HTTP 错误原因

> ID：15706271
> 
> 赞同：6
> 
> 时间：2013-03-29T15:28:28.050
> 
> 标签：python, google-app-engine, google-cloud-endpoints

Google 自己的 REST API 会在出现错误时返回详细的响应，例如：

```
{
 "error": {
  "errors": [
   {
"domain": "global",
"reason": "invalidBookshelfId",
"message": "Invalid bookshelf ID."
   }
  ],
  "code": 400,
  "message": "Invalid bookshelf ID."
 }
} 
```

在 Python 的 Google Cloud Endpoints 中，可以使用例如`raise endpoints.BadRequestException('Error message')`，但除了错误消息之外，我还想返回“代码”或“原因”，如上例所示。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:49:31.857

该代码对应于与关联的状态代码`BadRequestException`。其他异常也[记录在案](https://developers.google.com/appengine/docs/python/endpoints/exceptions)，例如`endpoints.UnauthorizedException`对应于状态代码`401`。至于`reason`和`domain`，它们是由 Google 的 API 基础设施设置的。

你想到了什么是不可能的`message`？

# php - .htaccess 重写 - 重定向到重定向的 php 文件，希望保留原始 URL

> ID：15706273
> 
> 赞同：0
> 
> 时间：2013-03-29T15:28:32.050
> 
> 标签：php, .htaccess, mod-rewrite

现在当用户输入类似

```
site.com/shirt/shirtid 
```

它们被 RewriteRule 重定向，上面写着

```
RewriteRule ^shirt/([a-z][0-9a-z_]+)$ /utils/phurl/redirect.php?alias=$1 [L,R=301] 
```

然后将它们重定向到分配了该别名的页面。

然而，当 PHP 重定向发生时（通过 header(Location:$url)），它会将 url 从 site.com/shirt/shirtid 更改为我想要缩短的非常长的 URL。有没有办法可以在整个重定向过程中维护原始 URL？

例如，用户访问 site.com/shirt/shirtid，重定向过程发生，地址栏中的 URL 仍然是 site.com/shirt/shirtid

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:41:50.813

当您通过 PHP 传递重定向标头时，默认情况下，您将导致页面加载重定向。您当然可以重定向到您想要的任何 URL 格式。但是，我不知道如何使它与原始 URL 相同，因为这会使您陷入无限重定向循环。

在我看来，在 PHP 中，您实际上并不想进行重定向，而是根据别名值有条件地包含一些页面逻辑（基本上是前端控制器模式）。

# mongodb - mongodb查询手表

> ID：15706277
> 
> 赞同：0
> 
> 时间：2013-03-29T15:28:45.053
> 
> 标签：mongodb

是否有我可以使用 mongodb 来查看当前和常见查询的工具？

我需要获取此信息以查看最常用的查询是什么，以便有效地构建索引。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:31:47.710

您是否完成了此处列出的所有示例[http://docs.mongodb.org/manual/administration/monitoring/](http://docs.mongodb.org/manual/administration/monitoring/)？

即 system.profile 检查。

# r - 控制ggplot2中点的顺序？

> ID：15706281
> 
> 赞同：68
> 
> 时间：2013-03-29T15:28:54.013
> 
> 标签：r, ggplot2, rpy2

我在 ggplot2 中绘制了一个密集的散点图，其中每个点都可能用不同的颜色标记：

```
df <- data.frame(x=rnorm(500))
df$y = rnorm(500)*0.1 + df$x
df$label <- c("a")
df$label[50] <- "point"
df$size <- 2

ggplot(df) + geom_point(aes(x=x, y=y, color=label, size=size)) 
```

当我这样做时，标记为“点”（绿色）的散点被绘制在标记为“a”的红点之上。是什么控制了 ggplot 中的 z 顺序，即什么控制了哪个点在哪个点之上？

例如，如果我希望所有“a”点都位于所有标记为“point”的点之上（这意味着它们有时会部分或完全隐藏该点）？这是否取决于标签的字母数字顺序？

我想找到一个可以轻松转换为 rpy2 的解决方案。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2015-03-29T03:36:46.067

**2016 年更新：**

订单美学[已被弃用](https://github.com/hadley/ggplot2/releases)，因此此时最简单的方法是对 data.frame 进行排序，使绿点位于底部，最后绘制。如果您不想更改原始 data.frame，您可以在 ggplot 调用期间对其进行排序 - 这是一个使用`%>%`和`arrange`来自 dplyr 包进行动态排序的示例：

```
library(dplyr)
ggplot(df %>%
         arrange(label),
       aes(x = x, y = y, color = label, size = size)) +
  geom_point() 
```

[![在此处输入图像描述](../Images/b28d7a2572a57133d3f1c65b9f45be2f.png)](https://i.stack.imgur.com/E7RGa.png)

**ggplot2 版本 < 2.0.0 的 2015 年原始答案**

在 ggplot2 中，您可以使用[order 美学](http://docs.ggplot2.org/current/aes_group_order.html)来指定绘制点的顺序。最后绘制的将出现在顶部。要应用这一点，您可以创建一个变量来保存您希望绘制点的顺序。

通过将绿点绘制在其他点之后将其放在顶部：

```
df$order <- ifelse(df$label=="a", 1, 2)
ggplot(df) + geom_point(aes(x=x, y=y, color=label, size=size, order=order)) 
```

或者先绘制绿点并将其掩埋，以相反的顺序绘制点：

```
ggplot(df) + geom_point(aes(x=x, y=y, color=label, size=size, order=-order)) 
```

对于这个简单的示例，您可以跳过创建新的排序变量，只需将`label`变量强制转换为一个因子，然后是一个数字：

```
ggplot(df) +
  geom_point(aes(x=x, y=y, color=label, size=size, order=as.numeric(factor(df$label)))) 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-04-02T22:42:35.623

`ggplot2`将逐层创建绘图，并且在每一层内，绘图顺序由`geom`类型定义。默认是按照它们出现在`data`.

有不同之处，请注明。例如

> ## `geom_line`
> 
> 连接观察值，按 x 值排序。

和

> ## `geom_path`
> 
> 按数据顺序连接观察结果

* * *

也有[关于排序的已知问题，`factors`](https://github.com/hadley/ggplot2/issues/721)有趣的是注意到包作者 Hadley 的回应

> 绘图的显示应该与数据框的顺序保持不变 - 其他任何东西都是错误。

* * *

记住这句话，图层是按指定的顺序绘制的，因此过度绘图*可能*是一个问题，尤其是在创建密集散点图时。因此，如果您想要一个一致的图（而不是依赖于数据框中的顺序的图），您需要多考虑一下。

* * *

## 创建第二层

如果您希望某些值出现在其他值之上，您可以使用该`subset`参数创建第二个图层，以便之后确定绘制。您将需要显式加载`plyr`包以便`.()`工作。

```
set.seed(1234)
df <- data.frame(x=rnorm(500))
df$y = rnorm(500)*0.1 + df$x
df$label <- c("a")
df$label[50] <- "point"
df$size <- 2
library(plyr)
ggplot(df) + geom_point(aes(x = x, y = y, color = label, size = size)) +
  geom_point(aes(x = x, y = y, color = label, size = size), 
             subset = .(label == 'point')) 
```

![在此处输入图像描述](../Images/dfe05a7596a1f54b101298af6db23b51.png)

## **更新**

在`ggplot2_2.0.0`中，该`subset`参数已被弃用。使用 eg`base::subset`选择`data`参数中指定的相关数据。并且无需加载`plyr`：

```
ggplot(df) +
  geom_point(aes(x = x, y = y, color = label,  size = size)) +
  geom_point(data = subset(df, label == 'point'),
             aes(x = x, y = y, color = label, size = size)) 
```

* * *

## 或使用`alpha`

避免过度绘制问题的另一种方法是设置`alpha`点的（透明度）。这不会像上面明确的第二层方法那样有效，但是，通过明智地使用`scale_alpha_manual`你应该能够得到一些工作。

例如

```
# set alpha = 1 (no transparency) for your point(s) of interest
# and a low value otherwise
ggplot(df) + geom_point(aes(x=x, y=y, color=label, size=size,alpha = label)) + 
  scale_alpha_manual(guide='none', values = list(a = 0.2, point = 1)) 
```

![在此处输入图像描述](../Images/6f065332f8cb6176fe41afeca49faab7.png)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-04-04T16:10:45.370

这里的基本问题可以改写如下：

> **如何控制情节的层次？**

在“ggplot2”包中，您可以通过将每个不同的层拆分为不同的命令来快速完成此操作。考虑层次需要一些练习，但它本质上归结为你想要在其他事物之上绘制的内容。您从背景向上构建。

**Prep**：准备样本数据。此步骤仅在此示例中是必需的，因为我们没有要处理的真实数据。

```
# Establish random seed to make data reproducible.
set.seed(1)

# Generate sample data.
df <- data.frame(x=rnorm(500))
df$y = rnorm(500)*0.1 + df$x

# Initialize 'label' and 'size' default values.
df$label <- "a"
df$size <- 2

# Label and size our "special" point.
df$label[50] <- "point"
df$size[50] <- 4 
```

您可能会注意到，我在示例中添加了不同的大小，只是为了使图层差异更加清晰。

**第 1 步**：将数据分层。在使用“ggplot”功能之前，请务必执行此操作。太多人因为试图使用“ggplot”函数进行数据操作而陷入困境。在这里，我们要创建两层：一层带有“a”标签，一层带有“点”标签。

```
df_layer_1 <- df[df$label=="a",]
df_layer_2 <- df[df$label=="point",] 
```

您可以使用其他函数来执行此操作，但我只是快速使用数据框匹配逻辑来提取数据。

**第 2 步**：将数据绘制为图层。我们想先绘制所有“a”数据，然后绘制所有“点”数据。

```
ggplot() + 
    geom_point(
        data=df_layer_1,
        aes(x=x, y=y), 
        colour="orange", 
        size=df_layer_1$size) +
    geom_point(
        data=df_layer_2, 
        aes(x=x, y=y), 
        colour="blue", 
        size=df_layer_2$size) 
```

![演示图](../Images/b5db6286e0db8630b79e3a1a13a079c7.png)

请注意，基本绘图层`ggplot()`没有分配数据。这很重要，因为我们将覆盖每一层的数据。然后，我们有两个单独的点几何层`geom_point(...)`，它们使用自己的规范。x 和 y 轴将共享，但我们将使用不同的数据、颜色和大小。

将颜色和尺寸规格移到`aes(...)`函数之外很重要，因此我们可以按字面意思指定这些值。否则，“ggplot”函数通常会根据数据中的级别分配颜色和大小。例如，如果数据中的大小值为 2 和 5，它将为任何出现的值 2 分配默认大小，并为任何出现的值 5 分配更大的大小。 **“aes”函数规范将不要使用值 2 和 5 作为尺寸。** 颜色也是如此。我有想要使用的确切尺寸和颜色，所以我将这些参数移到“geom_plot”函数本身。此外，“aes”功能中的任何规范都会放入图例中，这真的没用。

**最后说明**：在本例中，您可以通过多种方式获得想要的结果，但重要的是要了解“ggplot2”图层的工作原理，以便充分利用“ggplot”图表。只要在调用“ggplot”函数之前将数据分成不同的层，您就可以很好地控制屏幕上的图形绘制方式。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-29T15:38:25.563

它按 data.frame 中的行顺序绘制。尝试这个：

```
df2 <- rbind(df[-50,],df[50,])
ggplot(df2) + geom_point(aes(x=x, y=y, color=label, size=size)) 
```

如您所见，绿点是最后绘制的，因为它代表 data.frame 的最后一行。

这是一种命令 data.frame 先绘制绿点的方法：

```
df2 <- df[order(-as.numeric(factor(df$label))),] 
```

# c# - 如何使用 string.Format() 截断而不是舍入？

> ID：15706282
> 
> 赞同：3
> 
> 时间：2013-03-29T15:28:55.293
> 
> 标签：c#, rounding, string.format

我想以`string.Format()`执行截断而不是舍入的方式应用。例如

```
string.Format("##", 46.5); // output is 47, but I want 46
string.Format("##.#", 46.55); // output is 46.6, but I want 46.5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:29:35.540

用于`Math.Truncate`在格式化输出之前截断

# c# - WPF、多边形和多边形

> ID：15706283
> 
> 赞同：3
> 
> 时间：2013-03-29T15:29:03.570
> 
> 标签：c#, wpf, polygon, polyline

我正在使用 WFP 构建应用程序 C#，我正在尝试绘制形状，每个形状都属于一个类，并且此类包含一个用于外部形状的 Polygon，以及 1 到 3 条折线以使其看起来像真正的 2D 对象，这个方式我可以动态更改整个形状的某些属性（颜色，可见性等）我必须说一些折线是根据所需的高度和宽度由循环创建的

但是现在我正面临着一些折线渲染的问题我希望最终结果看起来像位图像素，没有阴影、模糊或边缘效果。

这是一个例子（面板是给网格的名称）

```
 public partial class Window1 : Window {

    private Polyline zigzag;

    public Window1() {
        InitializeComponent();
        PointCollection points = new PointCollection();
        ArrayList axisX = new ArrayList();
        ArrayList axisY = new ArrayList();

        zigzag = new Polyline();
        zigzag.Stroke = Brushes.Black;

        int count = 1;
        Boolean increase = true;
        //the number 60 in this loop is to represent the width of the main shape
        for (int p = 3; p < 60 - 3; p++) {
            if (count == 1) {
                axisX.Add(p);
                axisY.Add(5);
                increase = true;
            }
            if (count == 4) {
                axisX.Add(p);
                axisY.Add(2);
                increase = false;
            }
            if (increase) {
                count++;
            }
            else {
                count--;
            }
        }

        for (int i = 0; i < axisX.Count; i++) {
            //the number 10 is to represent the position where the Poliline is to be placed
            int tmpx = 10 + (int)axisX[i];
            int tmpy = 10 + (int)axisY[i];
            points.Add(new Point(tmpx, tmpy));
        }

        this.zigzag.Points = points;
        RenderOptions.SetEdgeMode(Panel , EdgeMode.Aliased);
        Panel.Children.Add(zigzag);

    }

} 
```

The picture shows the drawn zigzag on above, and the way it should look like below

![enter image description here](../Images/6c4cb68e7968bcd2885252e2d2a9c22b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:16:37.890

The coordinate system has its origin on the top left corner of the top left pixel. To hit the pixel in the middle, you must specify coordinates like 3.5 etc.

I shortened your code a little, I hope you don't mind. (Still does the same, just less lines)

```
PointCollection points = new PointCollection();

zigzag = new Polyline();
zigzag.Stroke = Brushes.Black;

for (int i = 1; i < 60 - 3; i = i + 3)
{
    points.Add(
        new Point(
            10.5f + i,
            10.5f + (i % 2 == 0 ? 2 : 5)
         ));
}

this.zigzag.Points = points;
RenderOptions.SetEdgeMode(Panel1, EdgeMode.Aliased);
Panel1.Children.Add(zigzag); 
```

I increased the translation from 10 to 10.5 in both directions. The fractional part should be 0.5 to indicate the center of the pixel.

# php - 拖放功能

> ID：15706284
> 
> 赞同：0
> 
> 时间：2013-03-29T15:29:03.607
> 
> 标签：php, jquery, ajax

我有两个盒子，都可以用于拖放事件。我必须一次只突出一个框，需要发生 drop 功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:31:44.880

检测何时在`document`. 喜欢：

```
$(document).on("dragstart", ..); 
```

然后在要突出显示的*框中*添加一个类：

```
$("#drop_box").addClass("highlight"); 
```

然后还记得再次删除课程`"dragend"`

# javascript - 单击时更改 jQuery 中的输入字段值

> ID：15706291
> 
> 赞同：1
> 
> 时间：2013-03-29T15:29:28.980
> 
> 标签：javascript, jquery

我的网站搜索 Spotify 库并返回结果列表。这个想法是用户可以单击其中一个结果并将其添加到播放列表中，该播放列表又将作为表单提交的一部分发布。下面的代码将点击的歌曲添加到 .selected-list 容器中，然后使用 Spotify 歌曲 href 的值将隐藏的输入添加到 DOM。

这一切都有效，但是每次我单击一首新歌曲并添加新输入时，所有先前添加的输入的 href 也会发生变化。我知道这是因为我正在识别所有输入都具有的 .track ，但我无法完全弄清楚如何去做。

```
$('.spotify-result').click(function() {
        $(this).clone().appendTo($('.selected-list'));
        $('.submit-spotify').before('<input type="hidden" id="track_href" class="track" value="" name="track_href" />');
        $('.track').val($('.track-href', this).text());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:34:07.113

替换您的以下代码：

```
$('.track').val($('.track-href', this).text()); 
```

对于这个：

```
$('.submit-spotify').prev('.track').val($('.track-href', this).text()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:36:38.590

这是因为您在代码的最后一行 ( )中使用了`.track`类作为选择器。`$('.track').val($('.track-href', this).text());`这将更新所有具有 的元素`class="track"`，如前面的代码行所示，每个新输入都将具有。

如果我们可以看到您的 HTML 输出示例，那么为您提供解决方案可能会更容易一些。. . 很难说你选择了什么东西。. .

不过，我现在最好的猜测是尝试将最后两行合二为一，并在创建输入时设置值：

```
 $('.submit-spotify').before('<input type="hidden" id="track_href" class="track" value="' + $('.track-href', this).text() + '" name="track_href" />'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T15:51:01.863

因此，如果想法是在每次将项目添加到列表时创建一个新的隐藏输入，我建议执行以下操作。

```
$('.spotify-result').click(function() {
        var $input = $('<input type="hidden" id="track_href" class="track" value="" name="track_href" />');

        $(this).clone().appendTo($('.selected-list'));
        $('.submit-spotify').before($input);
        $input.val($('.track-href', this).text());
}); 
```

This creates a jQuery object called `$input` that you can manipulate as if it were an element on the page and when you're ready inject it somewhere on your page. This way it doesn't matter what order it appears in the DOM so if you have to change where it goes on your page you won't have to wrestle with `.prev()` methods.

# python - NetworkX pagerank 中的问题

> ID：15706293
> 
> 赞同：0
> 
> 时间：2013-03-29T15:29:38.940
> 
> 标签：python, networkx, pagerank

我正在尝试在一个非常大的图（DiGraph）上运行 NetworkX 的 pagerank，但我总是遇到这个错误：

```
Traceback (most recent call last):
   File "summarize.py", line 120, in <module>
     s = summerizer().summ(q)
  File "summarize.py", line 108, in summ
    rank = nx.pagerank(self.G, 0.9, vector)
  File "/usr/local/lib/python2.7/dist-packages/networkx/algorithms/link_analysis/pagerank_alg.py",     line 93, in pagerank
    W=nx.stochastic_graph(D, weight=weight)
  File "/usr/local/lib/python2.7/dist-packages/networkx/generators/stochastic.py", line 42, in                 stochastic_graph
     d[weight]=d.get(weight,1.0)/degree[u]
 ZeroDivisionError: integer division or modulo by zero 
```

我尝试删除所有度数为零的节点，但仍然出现相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:38:37.317

看到更多你的代码会很好。可以推测可能的原因：

*   页面排名适用于无向图（请参阅[文档](http://networkx.lanl.gov/archive/networkx-1.6/_modules/networkx/algorithms/link_analysis/pagerank_alg.html)和[上一个问题](https://stackoverflow.com/a/9247791/1290420)。该错误是否是由 pagerank 试图将边转换为两个无向边引起的？

*   另外，这有什么区别吗？

    rank = nx.pagerank(self.G.to_undirected(), 0.9, 向量)

# android - Android：更新期间的应用小部件显示奇怪的图像

> ID：15706295
> 
> 赞同：1
> 
> 时间：2013-03-29T15:29:43.910
> 
> 标签：android, service, android-appwidget

复活节快乐

并提前非常感谢您的帮助。

我有一个应用程序小部件，每 1 分钟通过服务更新一次。

该服务需要几秒钟来更新小部件，因为它从互联网收集数据。

问题在于，在更新期间，App Widget 本身会在几秒钟内被完全不同的图像替换（请参见下面的图像），然后它会返回其正常状态。

**这是小部件的正常外观：**

![在此处输入图像描述](../Images/75638100b0ff450dffa67d1c69d67d85.png)

**这是更新期间发生的事情！**

![在此处输入图像描述](../Images/b94cbc2a5ab1ab4af829a2f17202e7fc.png)

**几秒钟后一切又好了：**

![在此处输入图像描述](../Images/f509de96e1b437b2fb2651fe455544d0.png)

请就如何避免这种情况提出任何建议，非常欢迎！！

我曾尝试以某人在这篇文章中所做的方式自我停止服务：[Android Widget 在更新期间显示奇怪的图像](https://stackoverflow.com/questions/5172366/android-widget-shows-strange-image-during-update)

但没有成功。

这是更新 App Widget 的服务的全部代码（我怀疑它会不会有很大帮助）

```
public class UpdateService extends Service {

public RemoteViews updateViews;

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.e("", "onStartCommand di AppWidget");
    int[] appWidgetIds = intent.getIntArrayExtra("widgetsids");
    final int N = appWidgetIds.length;
    AppWidgetManager manager = AppWidgetManager.getInstance(this);

    // Perform this loop procedure for each App Widget that belongs to
    // this provider

    for (int i = 0; i < N; i++) {
        int appWidgetId = appWidgetIds[i];
        Log.e("", "i=" + Integer.toString(i) + " di " + Integer.toString(N));
        RemoteViews view = buildUpdate(getApplicationContext(),
                appWidgetIds);

        // Tell the AppWidgetManager to perform an update on the current
        // app widget
        manager.updateAppWidget(appWidgetId, view);

    }
    stopSelf();
    Log.e("","stoopo il service");
    return (START_STICKY);

}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

private RemoteViews buildUpdate(Context ctxt, int[] appWidgetIds) {
    updateViews = new RemoteViews(ctxt.getPackageName(), R.layout.widget);
    Log.e("", "invoco buildbpdate");
    Intent intent = new Intent(ctxt, AppWidgetConfigure.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(ctxt, 0,
            intent, 0);
    updateViews.setOnClickPendingIntent(R.id.Widgetbackground,
            pendingIntent);

    DatabaseHandler db = new DatabaseHandler(getApplicationContext());

    ArrayList<Stock> list = db.getAllStocks();
    if (!list.isEmpty())
        Collections.sort(list, new Comparator<Stock>() {
            public int compare(Stock s1, Stock s2) {
                return s1.getName().compareToIgnoreCase(s2.getName());
            }
        });
    Log.e("", "inizio ad aggiornare");
    // PRIMO
    if (list.size() >= 1) {
        String nome = list.get(0).getName();
        if (nome.length() >= 12)
            nome = nome.substring(0, 12);
        updateViews.setTextViewText(R.id.name1, nome);
        Log.e("list.get(1).getName()", list.get(0).getName());

        UpdateTaskPrice up = new UpdateTaskPrice();
        up.execute(list.get(0).getSymbol(), null, null);
        String res = "";
        try {
            res = up.get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("risultato di get è ", res);
        updateViews.setTextViewText(R.id.price1, res);

        UpdateTaskChange chn = new UpdateTaskChange();
        chn.execute(list.get(0).getSymbol(), null, null);
        String reschn = "";
        try {
            reschn = chn.get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("risultato di get è ", reschn);
        updateViews.setTextViewText(R.id.change1, reschn+"%");
        if (Float.valueOf(reschn) < 0) {
            updateViews.setTextViewText(R.id.arrow1, "\u25BC");
            updateViews.setTextColor(R.id.change1, Color.RED);
            updateViews.setTextColor(R.id.arrow1, Color.RED);
        }
        if (Float.valueOf(reschn) > 0) {
            updateViews.setTextViewText(R.id.arrow1, "\u25B2");
            updateViews.setTextColor(R.id.change1, Color.GREEN);
            updateViews.setTextColor(R.id.arrow1, Color.GREEN);
        }
    }
    Log.e("", "faccio primo giro di aggiornamento");
    // SECONDO
    if (list.size() >= 2) {
        String nome = list.get(1).getName();
        if (nome.length() >= 12)
            nome = nome.substring(0, 12);
        updateViews.setTextViewText(R.id.name2, nome);

        UpdateTaskPrice up = new UpdateTaskPrice();
        up.execute(list.get(1).getSymbol(), null, null);
        String res = "";
        try {
            res = up.get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("risultato di get è ", res);
        updateViews.setTextViewText(R.id.price2, res);

        UpdateTaskChange chn = new UpdateTaskChange();
        chn.execute(list.get(1).getSymbol(), null, null);
        String reschn = "";
        try {
            reschn = chn.get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("risultato di get è ", reschn);
        updateViews.setTextViewText(R.id.change2, reschn+"%");
        if (Float.valueOf(reschn) < 0) {
            updateViews.setTextViewText(R.id.arrow2, "\u25BC");
            updateViews.setTextColor(R.id.change2, Color.RED);
            updateViews.setTextColor(R.id.arrow2, Color.RED);
        }
        if (Float.valueOf(reschn) > 0) {
            updateViews.setTextViewText(R.id.arrow2, "\u25B2");
            updateViews.setTextColor(R.id.change2, Color.GREEN);
            updateViews.setTextColor(R.id.arrow2, Color.GREEN);
        }
    }

    // TERZO
    if (list.size() >= 3) {
        String nome = list.get(2).getName();
        if (nome.length() >= 12)
            nome = nome.substring(0, 12);
        updateViews.setTextViewText(R.id.name3, nome);

        UpdateTaskPrice up = new UpdateTaskPrice();
        up.execute(list.get(2).getSymbol(), null, null);
        String res = "";
        try {
            res = up.get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("risultato di get è ", res);
        updateViews.setTextViewText(R.id.price3, res);

        UpdateTaskChange chn = new UpdateTaskChange();
        chn.execute(list.get(2).getSymbol(), null, null);
        String reschn = "";
        try {
            reschn = chn.get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("risultato di get è ", reschn);
        updateViews.setTextViewText(R.id.change3, reschn+"%");
        if (Float.valueOf(reschn) < 0) {
            updateViews.setTextViewText(R.id.arrow3, "\u25BC");
            updateViews.setTextColor(R.id.change3, Color.RED);
            updateViews.setTextColor(R.id.arrow3, Color.RED);
        }
        if (Float.valueOf(reschn) > 0) {
            updateViews.setTextViewText(R.id.arrow3, "\u25B2");
            updateViews.setTextColor(R.id.change3, Color.GREEN);
            updateViews.setTextColor(R.id.arrow3, Color.GREEN);
        }
    }
    // QUARTO
    if (list.size() >= 4) {
        String nome = list.get(3).getName();
        if (nome.length() >= 12)
            nome = nome.substring(0, 12);
        updateViews.setTextViewText(R.id.name4, nome);

        UpdateTaskPrice up = new UpdateTaskPrice();
        up.execute(list.get(3).getSymbol(), null, null);
        String res = "";
        try {
            res = up.get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("risultato di get è ", res);
        updateViews.setTextViewText(R.id.price4, res);

        UpdateTaskChange chn = new UpdateTaskChange();
        chn.execute(list.get(3).getSymbol(), null, null);
        String reschn = "";
        try {
            reschn = chn.get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("risultato di get è ", reschn);
        updateViews.setTextViewText(R.id.change4, reschn+"%");
        if (Float.valueOf(reschn) < 0) {
            updateViews.setTextViewText(R.id.arrow4, "\u25BC");
            updateViews.setTextColor(R.id.change4, Color.RED);
            updateViews.setTextColor(R.id.arrow4, Color.RED);
        }
        if (Float.valueOf(reschn) > 0) {
            updateViews.setTextViewText(R.id.arrow4, "\u25B2");
            updateViews.setTextColor(R.id.change4, Color.GREEN);
            updateViews.setTextColor(R.id.arrow4, Color.GREEN);
        }
    }
    // QUINTO
    if (list.size() >= 5) {
        String nome = list.get(4).getName();
        if (nome.length() >= 12)
            nome = nome.substring(0, 12);
        updateViews.setTextViewText(R.id.name5, nome);

        UpdateTaskPrice up = new UpdateTaskPrice();
        up.execute(list.get(4).getSymbol(), null, null);
        String res = "";
        try {
            res = up.get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("risultato di get è ", res);
        updateViews.setTextViewText(R.id.price5, res);

        UpdateTaskChange chn = new UpdateTaskChange();
        chn.execute(list.get(4).getSymbol(), null, null);
        String reschn = "";
        try {
            reschn = chn.get();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.e("risultato di get è ", reschn);
        updateViews.setTextViewText(R.id.change5, reschn+"%");
        if (Float.valueOf(reschn) < 0) {
            updateViews.setTextViewText(R.id.arrow5, "\u25BC");
            updateViews.setTextColor(R.id.change5, Color.RED);
            updateViews.setTextColor(R.id.arrow5, Color.RED);
        }
        if (Float.valueOf(reschn) > 0) {
            updateViews.setTextViewText(R.id.arrow5, "\u25B2");
            updateViews.setTextColor(R.id.change5, Color.GREEN);
            updateViews.setTextColor(R.id.arrow5, Color.GREEN);
        }
    }
    return (updateViews);
}

public class UpdateTaskPrice extends AsyncTask<String, String, String> {
    public String res;

    @Override
    protected void onProgressUpdate(String... progress) {
    }

    @Override
    protected void onPostExecute(String result) {
    }

    @Override
    protected String doInBackground(String... symbol) {
        Log.e("", "Passo per doinbabground");
        String result = "";
        DefaultHttpClient client = new DefaultHttpClient();
        String srt = "";
        String url = getApplicationContext().getString(
                R.string.urlaternativo).concat(symbol[0]);
        HttpGet getMethod = new HttpGet(url);
        try {
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            srt = client.execute(getMethod, responseHandler);
            int inizio = srt.indexOf("<last data=\"");
            int fine = srt.indexOf("\"/>", inizio + 12);
            result = srt.substring(inizio + 12, fine);

        } catch (Throwable t) {
            // Log.e("ERROR", "ERROR", t);
        }
        Log.e("", "finisco per doinbabground");
        return result;
    }
}

public class UpdateTaskChange extends AsyncTask<String, String, String> {
    public String res;

    @Override
    protected void onProgressUpdate(String... progress) {
    }

    @Override
    protected void onPostExecute(String result) {
    }

    @Override
    protected String doInBackground(String... symbol) {
        Log.e("", "Passo per doinbabground");
        String result = "";
        DefaultHttpClient client = new DefaultHttpClient();
        String srt = "";
        String url = getApplicationContext().getString(
                R.string.urlaternativo).concat(symbol[0]);
        HttpGet getMethod = new HttpGet(url);
        try {
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            srt = client.execute(getMethod, responseHandler);

            int inizio = srt.indexOf("<perc_change data=\"");
            int fine = srt.indexOf("\"/>", inizio + 19);
            result = srt.substring(inizio + 19, fine);

        } catch (Throwable t) {
            // Log.e("ERROR", "ERROR", t);
        }
        Log.e("", "finisco per doinbabground");
        return result;
    }
}

 } 
```

多谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T09:40:32.993

在`AppWidgetProvider`有方法`onReceiver`来接收广播动作。从服务的更改数据，您`sendbroadcast`将数据更改为小部件。`AppWidgetProvider`为in注册此广播的接收者`AndroidManifest`。类扩展`AppWidgetProvider`将接收更改数据和小部件通过它自己的方法更新它'Ui`onUpdate(....)`

# regex - 如何使用正则表达式找到 PHP 数组表达式？

> ID：15706304
> 
> 赞同：1
> 
> 时间：2013-03-29T15:30:16.850
> 
> 标签：regex, sublimetext2

是否可以使用正则表达式检测到这样的事情？如果是这样，我会怎么做。我在 Sublime Text 中使用正则表达式搜索，我想找到与下面匹配的代码。

```
=> array( ... contents ... ), 
```

这是我要查找的代码块之一的示例

```
=> array(
    'title' => __('Subtle Pattern', 'nhp-opts'),
    'img' => get_template_directory_uri() . '/skins/images/subtlepattern-swatch.jpg '
), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:33:45.950

在 Sublime 文本中也进行了测试，可以很好地找到并删除这些块。

```
=> array\(\s*\n(?:\s*.+\n)*\), 
```

或者，如果您的所有数组项都正确缩进，您可以：

```
=> array\(\s*\n(?:\s{4}.+\n)*\), 
```

注意：这是针对您指定的格式的数组：

```
=> array(
    ...foo...
    ...bar...
    ...buzz...
), 
```

# wcf - 将用户设置存储在由 Windows 服务托管的 WCF 服务中

> ID：15706306
> 
> 赞同：0
> 
> 时间：2013-03-29T15:30:19.353
> 
> 标签：wcf, windows-services, settings, persistent

我创建了一个由 Windows 服务托管的 WCF/REST 服务。

该服务背后没有数据库，因为没有必要。

但我想保存一些常规设置（允许的用户列表、输出格式设置等）。我尝试了一个`.settings`文件并使用`ConfigurationManager.AppSettings["Key"]`.

这在服务运行时有效。

但是如果我停止并启动服务，存储的值就会消失。

是否有任何其他机制可以在没有任何数据库的情况下持久保存设置？

谢谢你的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:23:36.840

我会将设置存储在您的 Windows 服务的 app.config 文件中（请参阅[msdn](http://msdn.microsoft.com/en-us/library/aa903313%28v=vs.71%29.aspx)）。

```
<configuration>
  <appSettings>
    <add key="Application Name" value="MyApplication" />
  </appSettings>
</configuration>. 
```

然后，您可以通过调用来检索您提到的这些设置`string appName = ConfigurationManager.AppSettings["Application Name"]`。您的 app.config 中的 AppSettings 永久存储并在停止启动服务时继续存在；）

# c# - 带有可空参数的路由与空路由值的查询字符串一起显示

> ID：15706308
> 
> 赞同：0
> 
> 时间：2013-03-29T15:30:24.877
> 
> 标签：c#, asp.net-mvc-4, asp.net-mvc-routing

我有以下控制器操作：

```
public class Foo
{
    public ActionResult Bar(int? barId)
    {
        ...
    }
} 
```

此操作的相应路由由下式给出：

```
routes.MapRoute("Foobar", "bar/{barId}",
                new { controller = "Foo", action = "Bar", barId = UrlParameter.Optional },
                new { barId = @"^[0-9]+$" }); 
```

在我看来，我正在生成路线：

```
@Url.Action("Bar", "Foo", new { barId = bar.BarId }) 
```

对于`bar.BarId = 32`，我收到预期的 URL`/Foo/32`

但我也想为`null`值生成路由：

```
@Url.Action("Bar", "Foo", new { barId = (int?)null }) 
```

除此之外，我收到的 URL`/Foo?barId=currentBarId`

我当前正在查看的任何页面`currentBarId`在`barId`哪里。`Bar`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:35:21.223

改变你的约束：

```
new { barId = @"^[0-9]*$" } 
```

这将允许此路线为空`barId`。

# sql - 如何在跨数据库系统的 Rails 3 中使用 WHERE IN？

> ID：15706310
> 
> 赞同：0
> 
> 时间：2013-03-29T15:30:29.970
> 
> 标签：sql, ruby-on-rails, activerecord, where-in

我对 Rails 很陌生，并且对 SQL 类型的语言有一些经验。

我正在开发一个 Rails 3 项目，其中我的产品测试版本和我的项目经理版本的产品使用两个不同的数据库系统（我使用 MySQL，但我不确定他使用的是什么）。

我在这里有一个通用的 SQL 语句，我想在我们的两个数据库上工作。有没有办法仅通过 ActiveRecord 功能来做到这一点？

```
SELECT * FROM MyRecords 
WHERE  (f1, f2, f3, f4) IN (
    SELECT f1, f2, f3, f4
    FROM   MyRecords
    GROUP  BY f1, f2, f3, f4
    HAVING count(*) = 1 
); 
```

换句话说，我正在尝试执行“WHERE IN”语句（坦率地说，我什至不知道 WHERE IN 语句的作用，只是这个答案可以满足我的需要：[我该怎么做（或者我可以) 在多列上选择 DISTINCT？](https://stackoverflow.com/questions/54418/how-do-i-or-can-i-select-distinct-on-multiple-columns-postgresql) ) 更具体地说，我必须扩充以下 ActiveRecord 函数，以便它执行上述查询：

```
 def MyRecordFunction
    MyRecords.where('org_id=?', self.org_id).order('f4')
  end 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:39:49.437

查看 ActiveRecord 指南[http://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-the-joined-tables](http://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-the-joined-tables)

那里有一些关于指定连接条件等的信息。

不能更具体，因为您还没有共享您希望与之兼容的其他数据库。

# cmake - 检查 CMake 模块是否存在

> ID：15706318
> 
> 赞同：2
> 
> 时间：2013-03-29T15:30:45.553
> 
> 标签：cmake

我想编写一个搜索特定库的 CMake 脚本；首先使用 CMake 的 Find_PACKAGE()，如果失败，我会做其他事情。我从

```
FIND_PACKAGE(BLAS)
IF (BLAS_FOUND)
  # do stuff
ELSE()
  # do other stuff
ENDIF() 
```

如果`FindBLAS.cmake`系统上可用（至少在最后几个 CMake 版本中通常是这样），则此方法效果很好。如果要寻找更虚假的东西，我首先想检查 CMake 是否已经有一个模块，即做类似的事情

```
SET(Spurious_FOUND FALSE)
IF (HAS_MODULE_Spurious)
  FIND_PACKAGE(Spurious)
ENDIF()
IF (Spurious_FOUND)
  # do stuff
ELSE()
  # do other stuff
ENDIF() 
```

如何判断是否`HAS_MODULE_*`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:49:03.717

你可以使用类似这个函数的东西：

```
function(CheckHasModule Module)
  find_package(${Module} QUIET)
  if(NOT DEFINED ${Module}_DIR)
    set(HAS_MODULE_${Module} TRUE PARENT_SCOPE)
  elseif(${Module}_DIR)
    set(HAS_MODULE_${Module} TRUE PARENT_SCOPE)
  else()
    set(HAS_MODULE_${Module} FALSE PARENT_SCOPE)
  endif()
endfunction() 
```

这利用了这样一个事实，即如果未找到 的包配置文件`VAR`，则将缓存变量`VAR_DIR`设置为`VAR_DIR-NOTFOUND`. 因此，如果找到包配置文件，则要么未定义此变量，要么将其设置为有效路径（无论是否`find_package`找到请求的包）。

所以，如果你这样做

```
CheckHasModule(Spurious)
CheckHasModule(Threads)
message("\${HAS_MODULE_Spurious} - ${HAS_MODULE_Spurious}")
message("\${HAS_MODULE_Threads} - ${HAS_MODULE_Threads}") 
```

你的输出应该是：

> ```
> ${HAS_MODULE_Spurious} - FALSE
> ${HAS_MODULE_Threads} - TRUE 
> ```

# c# - 如何在 ac# 服务器和 Java 客户端之间恢复中断的下载

> ID：15706322
> 
> 赞同：1
> 
> 时间：2013-03-29T15:31:01.543
> 
> 标签：c#, java, http, file-transfer

我有一个在 Java 中运行的客户端应用程序，它将 HTTP REST 命令发送到 c# 中的 Web 服务。

客户端从服务器下载文件，效果很好。

这是我的文件传输代码：

**Java 客户端**

```
public void downloadFile(String fileUrl, String fileName, String filePath) throws IOException{
        int bytesRead;
        URL url = new URL(fileUrl);

        BufferedInputStream bis = new BufferedInputStream(conn.getInputStream());
        BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(filePath));
        byte[] fileBuffer = new byte[1024];
        while ((bytesRead = bis.read(fileBuffer)) != -1) {
            bos.write(fileBuffer, 0, bytesRead);
        }
        bos.close();
        bis.close();
    } 
```

**C# 网络服务**

```
 [WebGet(UriTemplate = "SendFile/{clientID}/{fileName}")]
        public Stream sendFile(String clientID, String fileName)
        {
            WebOperationContext.Current.OutgoingResponse.Headers.Add(HttpResponseHeader.Expires, DateTime.UtcNow.ToString("ddd, dd MMM yyyy HH:mm:ss 'GMT'"));
            WebOperationContext.Current.OutgoingResponse.ContentType = "application/pdf";
            Stream ms = File.OpenRead(@jobRepPath + fileName.Replace("___", "."));
            return ms;
        } 
```

现在，基于此，我想设置方法来恢复损坏下载的下载。

我试过这段代码：

**Java 客户端**

```
public void resumeBrokenDownload(String fileUrl, String fileName, String filePath, long fileLength) throws IOException{
        int bytesRead;
        URL url = new URL(fileUrl);

        BufferedInputStream bis = new BufferedInputStream(conn.getInputStream());
        BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(filePath, true));

        byte[] fileBuffer = new byte[1024];     
        while ((bytesRead = bis.read(fileBuffer)) != -1) {
            bos.write(fileBuffer, 0, bytesRead);
        }
        bos.close();
        bis.close();
    } 
```

**C# 网络服务**

```
 [WebGet(UriTemplate = "ResumeDownload/{clientID}/{fileName}/{startByte}")]
        public Stream resumeDownload(String clientID, String fileName, String startByte)
        {
            Stream ms = File.OpenRead(@jobRepPath + fileName.Replace("___", "."));
            var memoryStream = new MemoryStream();
            ms.CopyTo(memoryStream);
            Byte[] byteFile = memoryStream.ToArray();

            MemoryStream stream = new MemoryStream();
            stream.Write(byteFile, Convert.ToInt32(startByte), byteFile.Length);

            WebOperationContext.Current.OutgoingResponse.Headers.Add(HttpResponseHeader.Expires, DateTime.UtcNow.ToString("ddd, dd MMM yyyy HH:mm:ss 'GMT'"));
            WebOperationContext.Current.OutgoingResponse.ContentType = "application/pdf";
            return stream;
        } 
```

在 REST URL 中传递的 startByte 值是客户端已经接收到的文件部分的长度。

但这似乎根本不起作用，我从服务器收到一个空流。

有没有人知道如何让这段代码工作，或者更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:58:13.917

我终于解决了适应[本教程](http://blogs.msdn.com/b/codefx/archive/2012/02/23/more-about-rest-file-upload-download-service-with-asp-net-web-api-and-windows-phone-background-file-transfer.aspx)中的示例的问题。

For those who are interested in my solution, I change the code of the c# web service :

```
 [WebGet(UriTemplate = "ResumeDownload/{clientID}/{fileName}/{startByte}")]
        public Stream resumeDownload(String clientID, String fileName, String startByte)
        {
            MemoryStream responseStream = new MemoryStream();
            Stream fileStream = File.Open(@jobRepPath + fileName.Replace("___", "."), FileMode.Open);

            fileStream.Seek(Convert.ToInt32(startByte), SeekOrigin.Begin);

            int length = (int)(fileStream.Length - Convert.ToInt32(startByte));
            byte[] buffer = new byte[length];
            fileStream.Read(buffer, 0, length);
            responseStream.Write(buffer, 0, length);

            fileStream.Close();
            responseStream.Position = 0;

            return responseStream; 
        } 
```

# .net - 使用 Newtonsoft.Json 解析 json 时出现 RuntimeBinderException

> ID：15706327
> 
> 赞同：3
> 
> 时间：2013-03-29T15:31:20.630
> 
> 标签：.net, json, windows-phone, json.net

我正在尝试将简单的 json 解析为 Windows phone 8 中的动态对象。我正在使用带有此代码的 Newtonsoft.JSON 库：

```
dynamic response = JObject.Parse(responseText);
string streamRequestUrl = response._links.streams; 
```

我可以那里存在 _links ![在此处输入图像描述](../Images/05d73cd29f11270cc55764e85e135ca5.png) 但是当我尝试阅读它时，我得到了`Microsoft.CSharp.RuntimeBinder.RuntimeBinderException`. 如何从中获取 _links 属性值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-30T05:56:23.313

我在 VS 2015 中遇到了类似的问题。使用 [] 访问属性的方法有效，但是如果我在工具 > 选项 > 调试 > 常规中启用“仅我的代码”。我能够像正常一样使用动态对象上的属性，例如：`response._links.streams;`工作。

请参阅其他[类似问题的帖子](https://stackoverflow.com/questions/20487305/runtimebinderexception-while-using-newtonsoft-json-with-dynamic-after-installing/33429521#33429521)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T11:19:09.790

是的，你并不孤单，我也遇到过类似的问题（没有宿醉；P）

我刚刚修改了空格或行的文件并重建了整个解决方案，也开始在调试模式下正常工作......

节日快乐！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T05:26:23.020

您看到的值是 ToString() 值。您正在寻找的是：

```
response["_links"] 
```

有关完整示例，请参见：http: [//james.newtonking.com/projects/json/help/html/ModifyJson.htm](http://james.newtonking.com/projects/json/help/html/ModifyJson.htm)

# java - 在同一类的多个对象中使用相同的显示列表

> ID：15706329
> 
> 赞同：0
> 
> 时间：2013-03-29T15:31:29.920
> 
> 标签：java, variables, object

我正在用java编写一个体素类型的游戏，但是我有性能问题，想象一下我有一个“Cube”类，有成千上万个基于这个类创建的对象，这个类的核心是一个显示列表，我想要什么要知道是否有某种方法可以只创建一次显示列表并多次使用它而不使用接口或其他类。

希望您能理解并感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:35:06.413

通过将该列表设为`STATIC`.

```
public static list: 
```

获取该变量

```
public static list getStaticList(){
    {
    return list;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:36:16.477

声明该列表`static`将满足您的需要。

希望能帮助到你。

# python - 如何使用opencv计算2个numpy数组的“EMD”，即“直方图”？

> ID：15706339
> 
> 赞同：13
> 
> 时间：2013-03-29T15:31:57.570
> 
> 标签：python, opencv, numpy, histogram, earthdistance

由于我是opencv的新手，我不知道如何将[`cv.CalcEMD2`](http://docs.opencv.org/modules/imgproc/doc/histograms.html#emd)函数与`numpy`数组一起使用。
我有两个数组：

```
a=[1,2,3,4,5]  
b=[1,2,3,4] 
```

我怎样才能转移到`numpy array`函数参数？`CVhistogram``Cvhistogram``signature`

我希望任何回答问题的人`opencv`通过提供的解决方案来解释任何使用的功能。

“EMD” ==[推土机的距离](http://en.wikipedia.org/wiki/Earth_mover%27s_distance)。

更新：-
另外，如果有人能告诉我如何设置[`cv.CalcEMD2`](http://docs.opencv.org/modules/imgproc/doc/histograms.html#emd)参数，即`"signature"`使用`numpy`数组，那将会很有帮助！

注意：-
* 对于那些可能对这个问题感兴趣的人，这个答案需要更多的测试。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T15:33:11.877

您必须根据权重和坐标定义数组。如果您有两个表示一维直方图的数组 a = [1,1,0,0,1] 和 b = [0,1,0,1]，那么 numpy 数组应该如下所示：

```
a = [[1 1]
     [1 2]
     [0 3]
     [0 4]
     [1 5]]

b = [[0 1]
     [1 2]
     [0 3]
     [1 4]] 
```

请注意，行数可以不同。列数应该是维度 + 1。第一列包含权重，第二列包含坐标。

下一步是在将 numpy 数组作为签名输入到 CalcEMD2 函数之前，将数组转换为 CV_32FC1 Mat。代码如下所示：

```
from cv2 import *
import numpy as np

# Initialize a and b numpy arrays with coordinates and weights
a = np.zeros((5,2))

for i in range(0,5):
    a[i][1] = i+1

a[0][0] = 1
a[1][0] = 1
a[2][0] = 0
a[3][0] = 0
a[4][0] = 1

b = np.zeros((4,2))

for i in range(0,4):
    b[i][1] = i+1

b[0][0] = 0
b[1][0] = 1
b[2][0] = 0
b[3][0] = 1    

# Convert from numpy array to CV_32FC1 Mat
a64 = cv.fromarray(a)
a32 = cv.CreateMat(a64.rows, a64.cols, cv.CV_32FC1)
cv.Convert(a64, a32)

b64 = cv.fromarray(b)
b32 = cv.CreateMat(b64.rows, b64.cols, cv.CV_32FC1)
cv.Convert(b64, b32)

# Calculate Earth Mover's
print cv.CalcEMD2(a32,b32,cv.CV_DIST_L2)

# Wait for key
cv.WaitKey(0) 
```

请注意，CalcEMD2 的第三个参数是欧几里得距离 CV_DIST_L2。第三个参数的另一个选项是曼哈顿距离 CV_DIST_L1。

我还想提一下，我编写了代码来计算 Python 中两个 2D 直方图的 Earth Mover 距离。[您可以在此处](https://stackoverflow.com/questions/5101004/python-code-for-earth-movers-distance/10670028#10670028)找到此代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T15:38:22.497

根据文档，CV.CalcEMD2 期望数组还包括每个信号的权重。

我建议将您的数组定义为权重 1，如下所示：

```
a=array([1,1],[2,1],[3,1],[4,1],[5,1])
b=array([1,1],[2,1],[3,1],[4,1]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-31T21:12:52.510

我知道 OP 想使用 OpenCV 测量[Earth Mover 的距离](https://en.wikipedia.org/wiki/Wasserstein_metric)，但如果您想使用 Scipy 这样做，您可以使用以下方法（Wasserstein 距离也称为 Earth Mover 的距离）：

```
from scipy.stats import wasserstein_distance
from scipy.ndimage import imread
import numpy as np

def get_histogram(img):
  '''
  Get the histogram of an image. For an 8-bit, grayscale image, the
  histogram will be a 256 unit vector in which the nth value indicates
  the percent of the pixels in the image with the given darkness level.
  The histogram's values sum to 1.
  '''
  h, w = img.shape
  hist = [0.0] * 256
  for i in range(h):
    for j in range(w):
      hist[img[i, j]] += 1
  return np.array(hist) / (h * w)

a = imread('a.jpg')
b = imread('b.jpg')
a_hist = get_histogram(a)
b_hist = get_histogram(b)
dist = wasserstein_distance(a_hist, b_hist)
print(dist) 
```

# r - 更改 spBwplot 中的线宽和颜色

> ID：15706344
> 
> 赞同：0
> 
> 时间：2013-03-29T15:32:21.633
> 
> 标签：r

我想增加箱线图的线宽并改变颜色。我试图通过以下方式做到这一点，但没有任何反应。

```
spBwplot("var1", "weiht", dataS = dataS, dataP = listP, pch = "|", lwd=4, col="black") 
```

有人可以帮助我吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:20:17.000

从用于绘制箱线图`spBwplot()`的库中使用库中的函数，然后您可以使用与中相同的参数。`simPopulation``bwplot()``lattice``lattice`

要更改箱线图框，请`box.rectangle=`在内部使用`par.settings()`并`box.umbrella=`更改胡须。参数`col=`将改变颜色并`lwd=`设置线宽。

下面是一个使用.帮助文件中提供的数据的示例`spBwplot()`。

```
library(simPopulation)    
set.seed(1234)  # for reproducibility
data(eusilcS)   # load sample data
eusilcM <- simEUSILC(eusilcS, upper = 200000, equidist = FALSE)
eusilcT <- simEUSILC(eusilcS, method = "twostep")

spBwplot("netIncome", "rb050", "rb090", dataS = eusilcS, 
         dataP = list(M = eusilcM, T = eusilcT), layout = c(1, 2), 
         par.settings = list(box.rectangle = list(col = "black",lwd=4),
                             box.umbrella=list(lwd=4, col="black"))) 
```

![在此处输入图像描述](../Images/b4451cd167c5c84982f05924eb6cea62.png)

# c# - 通过特定套接字发送了多少字节？

> ID：15706350
> 
> 赞同：-1
> 
> 时间：2013-03-29T15:32:46.317
> 
> 标签：c#, sockets

我正在构建一个客户端，`C#`它与`Python`. 客户端使用该方法将文件发送到服务器`Socket.send()`，并使用线程能够使用以下方法异步发送多个文件`BackgroundWorker`：

```
private void initializeSenderDaemon()
{
    senderDaemon = new BackgroundWorker 
    { 
        WorkerReportsProgress = true,
    };
    senderDaemon.DoWork += sendFile; 
} 
```

当满足某些条件时，`RunWorkerAsync()`调用该方法并发送一个文件

客户端和服务器都在开始传输之前确认文件的大小

我希望能够跟踪从客户端发送了多少文件

我虽然有类似这个**概念代码的东西，但我知道它不起作用**

```
byte[] fileContents = File.ReadAllBytes(path); // original file
byte[] chunk = null; // auxiliar variable, declared outside of the loop for simplicity sake
int chunkSize = fileContents.Length / 100; //  we will asume that the file length is a multiplier of 100 for simplicity sake

for (int i = 0; i < 100; i++)
{
    chunk = new byte[chunkSize];
    Array.Copy(fileContents, i * chunkSize, chunk, i * chunkSize, chunkSize);
    // Copy(Array sourceArray, int sourceIndex, Array destinationArray, int destinationIndex, int length); 
    s.Send(chunk);
    reportProgress(i);
}

reportProgress(100); 
```

该代码存在明显的问题，但我编写它只是为了解释我想要做什么

¿ 如何跟踪一个特定文件已经发送到服务器的字节数？¿ 有什么方法可以在不依赖变通方法的情况下做到这一点？¿ 我应该使用套接字类中的其他方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:38:11.137

尝试这样的事情：

```
int bSent = 0;
int fileBytesRead;

FileStream fileStream = File.Open(tmpFilename, FileMode.Open, FileAccess.Read, FileShare.Read);
while ((fileBytesRead = fileStream.Read(buffer, 0, BUFFER_SIZE)) > 0)
{
    socket.Send(buffer, 0, fileBytesRead);
    bSent += fileBytesRead;

    arg.Progress = (int) (bSent*100/totalBytes);
    arg.Speed = (bSent/sw.Elapsed.TotalSeconds);
    OnProgress(arg);
} 
```

这个答案不是一个完美的答案，它只是我工作的摘录，但会让您大致了解使用套接字发送文件的更好方法！

# jsf-2 - Primefaces 收集器 + 编辑行 - 布局中断

> ID：15706352
> 
> 赞同：1
> 
> 时间：2013-03-29T15:32:58.583
> 
> 标签：jsf-2, primefaces

```
 <p:dataTable id="tableContas" value="#{extratoBancoController.contas}" var="entity" editable="true">
                <f:facet name="header">
                    <h:outputText value="Contas" />
                </f:facet>

                <p:ajax event="rowEdit"  listener="#{extratoBancoController.calcularValores()}" update=":mainForm:relatorios" process=":mainForm:relatorios" /> <!-- I tried with, and without process tag. Result is the same-->

                <p:column  style="width:80px">
                     <f:facet name="header">  
                        <h:outputText value="#{msg['entity.id']}" />  
                    </f:facet>  
                    <h:outputText value="#{entity.id}" />
                </p:column>

                                    <!-- Other columns here --> 

                <p:column sortBy="#{entity.valor}" headerText="#{msg['entity.valor']} (R$)">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{entity.valor}" style="float: right; padding-right: 50%;"/>                           
                        </f:facet>

                        <f:facet name="input">
                            <po:inputDinheiro id="inputValor" required="true" fieldId="valor" targetValue="#{entity.valor}" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>                     

                <p:column> 
                    <p:rowEditor  />  
                </p:column>

                <p:column>
                    <p:commandButton icon="ui-icon-minus" actionListener="#{extratoBancoController.calcularValores()}" update=":mainForm:relatorios" process=":mainForm:relatorios">
                        <p:collector value="#{entity}" removeFrom="#{extratoBancoController.contas}" />
                    </p:commandButton>
                </p:column>

                <f:facet name="footer">
                    <h:outputText
                        value="Total Entrada: R$ #{extratoBancoController.totalEntrada}" />
                    <h:outputText value=" - " />
                    <h:outputText
                        value="Total Saida: R$ #{extratoBancoController.totalSaida}" />
                </f:facet>

            </p:dataTable> 
```

那么，发生了什么：

第 1 步：在 0 方位的情况如何 ![图像](../Images/e458839494b342ebf400388aed49e33e.png)

第2步：让我们点击铅笔图标，更改值并检查它！:) ![图像](../Images/851239fc4cf04c3d44fc382dfc476e16.png)

结果：在 ajax 之后，数据表布局发生了这样的事情： ![图像](../Images/a2d845ff9f78d34649a1adb36f3da33a.png)

PS：值按预期更新，只是布局中断！:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:37:22.033

对不起大家...

您需要一次更新您的组件。我的意思是：

```
 update=":mainForm:tableContas :mainForm:painelRel" 
```

如果您更新 ap:outputPanel 它会中断！

# ruby - 如何在 rakefile 中包含加载路径/依赖项

> ID：15706353
> 
> 赞同：0
> 
> 时间：2013-03-29T15:33:00.790
> 
> 标签：ruby, path, include, directory, rakefile

我已经安装了 Ruby 1.8.7、ci_reporter 1.8.4、测试单元 2.5.4、rake 10.0.3。

我的 testA.rb ：

```
require 'includeA.rb'
require 'includeB.rb'
require 'includeC.rb'
require 'includeD.rb'

Begin of the code...
... End of the code 
```

通常我使用以下 cmd 执行测试：

```
ruby -I E:/pathToIncludeA/includeA.rb -I E:/pathToIncludeB/includeB.rb -I E:/pathToIncludeC/includeC.rb -I E:/pathToIncludeD/includeD.rb E:/pathToTestA.rb/testA.rb 
```

一切正常。

但是现在我正在使用 rake，并且我正在尝试以相同的方式包含目录。

这是我的 rakefile ：

```
require 'rake/testtask'
require 'rubygems'
gem 'ci_reporter'
gem 'test-unit' 
require 'test/unit' 
require 'ci/reporter/rake/test_unit'  

task :default => [:test]

task :test do
  ruby '-I E:/pathToIncludeA/includeA.rb', '-I E:/pathToIncludeB/includeB.rb, '-I E:/pathToIncludeC/includeC.rb', '-I E:/pathToIncludeD/includeD.rb', E:/pathToTestA.rb/testA.rb
end 
```

但是当我执行以下 cmd 时：

```
rake test 
```

我有以下错误：

```
E:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in 'gem_original_require': no such file to load -- includeA.rb (load error)
from E:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in 'require'
from E:/pathToTestA/testA.rb/

rake aborted!
command failed with status (1): [E:/Ruby/bin/ruby.exe -I pathToIncludeA/...]
Tasks: TOP => default => test 
```

我做错了什么？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:11:14.297

试试这个：

```
task :test do
  sh "ruby -I E:/pathToIncludeA/includeA.rb -I E:/pathToIncludeB/includeB.rb -I E:/pathToIncludeC/includeC.rb -I E:/pathToIncludeD/includeD.rb E:/pathToTestA.rb/testA.rb"
end 
```

或者，如果您需要/喜欢`ruby`在任务中使用该方法，请更改您`testA.rb`的加载路径`include(A|B|C|D).rb`，然后：

```
task :test do
  # assuming the Rakefile and the testA.rb are in the same folder.
  ruby "testA.rb"
end 
```

如果您的测试套件包含多个测试文件`testA.rb`，例如`testB.rb`等，那么`Rake::TestTask`该类可能会使它变得更容易。检查 Sinatra 项目如何使用它来获得一个想法：[Sinatra/Rakefile](https://github.com/sinatra/sinatra/blob/master/Rakefile)；[`Rake::TestTask`文档](http://rake.rubyforge.org/classes/Rake/TestTask.html)

# highcharts - 家谱/家谱

> ID：15706359
> 
> 赞同：2
> 
> 时间：2013-03-29T15:33:27.117
> 
> 标签：highcharts, genealogy

我想知道创建家谱的最佳解决方案是什么。考虑分支树或扇形图。或者有什么可用的工具推荐？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-09T12:56:08.950

创建家谱有多种选择。Family Tree Maker 的一项重要功能是展示了许多不同的方法，但不幸的是，Family Tree Maker 几乎已停产。

真正的答案将取决于你想从中得到什么以及它服务的目的。如果您使用它来传递或展示给人们，那么纸上的东西可能是一种很好的方式。你可以在网上找到（甚至是 eBay），你填写的一些空白谱系图（可能）比你需要的更多代。

如果您正在寻找索引式资源，您可以获得一大本空白纸（期刊式或日志式）并维护世代线。例如，从您的一位家庭成员开始，然后向下两行写他们的父亲，然后在父亲的右边写下母亲。父亲下面的两行写他的父亲等。对于母亲，在下面画一个圆圈；在该圆圈内，您将写下与该妇女父亲所在位置相对应的页码。在那一页上，你会在最上面写下他，然后是他父亲，往下两行，然后像第一页一样继续写下去。但是，在他上方，您将有一个圆圈，其中有一个数字，表示他的孩子所在的页面（在本例中为第 1 页，或者，如果您愿意，1001）。这种风格有明显的局限性，

我知道这些手写图表可能是老派的，并不完全符合您的要求，但它们是一个很好的参考，有时最好有您所有辛勤工作的硬拷贝记录。

电子数据库或程序是我目前无法提供建议的东西。如果您查看 Ancestry.com，甚至 WikiTree.com，您可能会找到一些很好的示例来说明如何执行此操作，只需在浏览器上按 F12 即可查看页面组合的前端。我希望这有帮助。

# c++ - 如何让boost在发布模式下运行

> ID：15706365
> 
> 赞同：0
> 
> 时间：2013-03-29T15:33:44.937
> 
> 标签：c++, eclipse, ubuntu, boost, g++

我有一些我通常在我的工作机器上运行的代码，我已经在家里构建并运行它，但运行时速度要慢得多。两台机器都有 i7 处理器，代码是单核的，并且都有足够的内存（工作 - 16Gb 家庭 8Gb 但只需要使用最高约 2Gb）。我唯一能想到的是 boost 在我的家庭版本中以调试模式运行。

我已经明确地将活动模式设置为在 Eclipse 中发布，我已经使用 -O3 标志进行了编译。我现在只是没有想法。我是否遗漏了其他东西，或者通过这样做我确保 boost 没有在调试模式下运行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:44:46.573

发现问题，在 eclipse 运行配置中，您还必须将 App 位置从 更改`Debug/app`为`Release/App`。

不确定是否因为过于本地化而关闭它，或者它可能对某人有帮助，也许版主可以决定。

# android - 在android中隐藏部分UI

> ID：15706366
> 
> 赞同：1
> 
> 时间：2013-03-29T15:33:50.137
> 
> 标签：android, android-layout

我有一组控件（编辑文本、按钮等），我想以编程方式显示/隐藏它们，而不是一个一个地显示/隐藏它们。我已经阅读了有关片段和视图组的信息，但不知道如何将它们用于此目的。如何做到这一点，有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:42:00.923

最简单的方法是将要隐藏的部分包装在具有 ID 的单个布局容器中（LinearLayout、RelativeLayout 等 - 无论您需要什么）。然后以编程方式设置可见性。

```
LinearLayout myLayout = (LinearLayout) findViewById(r.layout.myLayout);
myLayout.setVisibility(View.GONE);

or 
myLayout.setVisibility(View.VISIBLE); 
```

您还可以在 XML 中以可见或不可见的方式启动布局。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T15:41:24.840

`View.setVisibility(View.INVISIBLE)`或者`View.setVisibility(View.VISIBLE)`

将控制可见性，您也可以使用`GONE`，但这可能会改变您的布局，这可能或不可能。

# java - 在 Java EE 环境中测试乐观锁

> ID：15706371
> 
> 赞同：1
> 
> 时间：2013-03-29T15:34:10.027
> 
> 标签：java, hibernate, unit-testing, optimistic-locking

据我了解，如果多个线程同时更新数据库表中的一行，则数据库将标记错误。

在我们的生产环境中，我们在一个集群中有 2 台 Tomcat 服务器。可能会发生两个用户同时被定向到每个 Tomcat 服务器并更新数据库表中的相同记录的情况。结果，将引发异常。

如何在本地机器上模拟这种情况？或者我将如何在与生产相同的环境中进行操作？

我正在研究的技术：Java 6、Spring 3、Hibernate、MS SQL Server 2008 和 Tomcat 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:12:51.830

您可以使用两个事务来模拟它。开始第一笔交易。开始第二个 tx。在第一个 TX 中进行一些更改并提交它。在第二个 TX 中进行一些更改并提交它。Hibernate 应该给你 OptimisticLockException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:04:35.357

你不想模拟场景。我读它是因为你想测试处理乐观锁异常的代码。我会简单地模拟抛出异常并显式抛出 OptimisticLockException 的类。在测试环境中使用异常处理程序内部的模拟类并编写测试fr异常处理程序。

我相信你并不担心测试乐观锁是否工作。因为这是 Hibernate 开发人员的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:07:19.633

> 据我了解，如果多个线程同时更新数据库表中的一行，则数据库将标记错误。

不必要。如果您运行如下两条语句，

```
UPDATE foo SET bar=baz WHERE bah=doh; 
```

数据库可以简单地安排一个接一个地运行这些查询。[但是死锁](http://www.delphifaq.com/faq/databases/mssql/f676.shtml)有[很多可能性](https://dba.stackexchange.com/questions/309/code-to-simulate-deadlock) ，一般来说，结果取决于您的查询及其时间、数据集等。

# java - 首选项活动中的 TimePicker 和 OnTimeChangedListener（不工作）

> ID：15706376
> 
> 赞同：2
> 
> 时间：2013-03-29T15:34:37.703
> 
> 标签：java, android, timepicker

我想在偏好活动中有时间选择器。它看起来像这样：

![在此处输入图像描述](../Images/e0bc256bbedb9580f85235dfa2e124d0.png)

然后如果用户点击“时间”，它会弹出这个对话框：

![在此处输入图像描述](../Images/5175ae79da1a2445f1c76795f9c00d00.png)

这正是我想要的。但是有几点需要注意：

1.  Dialog 是 XML 引用的我的自定义对话框

    ```
     <TimePicker
        android:id="@+id/timePicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 
    ```

2.  我的偏好 XML

    ```
    <CheckBoxPreference android:title="Checkbox" android:summary="Checkbox"/>
    <EditTextPreference android:summary="time" android:dialogTitle="Hello" android:dialogLayout="@layout/preflayout" /> 
    ```

3.  我的Java代码：

    公共静态类 TestSettings 扩展 PreferenceActivity 实现 TimePicker.OnTimeChangedListener {

    ```
     TimePicker tp;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.xml.pref);
            tp = (TimePicker) findViewById(R.id.timePicker1);

        }

        @Override
        public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {

            if(view.getId() == R.id.timePicker1) {
            Log.i("STATIC", "hour "+hourOfDay+"minute "+minute);
            }
        }

    } 
    ```

出于某种原因，当我设置时间时，OnTimeChangedListener 不会触发。我不知道这是否是在首选项屏幕中以这种方式编程时间选择器的正确方法，但我完全需要它。无论如何，我不知道为什么 OnTimeChangedListener 不起作用。有任何想法吗？

也许我需要在偏好活动中使用另一种方法来编程时间选择器？

提出建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:37:40.813

您需要调用[setOnTimeChangedListener(this)](http://developer.android.com/reference/android/widget/TimePicker.html#setOnTimeChangedListener%28android.widget.TimePicker.OnTimeChangedListener%29)，可能在您的`onCreate()`方法中，如下所示：

```
tp.setOnTimeChangedListener(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T03:28:07.353

我必须使用自定义对话框首选项来处理我的首选项活动中的 TimePicker。

**TimePickerDialog.java**

```
public class TimePickerDialog extends DialogPreference{
    Context context;
TimePickerDialog timePickerDialog;
TimePicker timePicker;
private final static String TAG = "TIME_DIALOG_PREFERENCE";
private Listener timeListener;
String key;

   public TimePickerDialog (Context context) {
        this(context, null);
        this.context=context;
    }

    public TimePickerDialog (Context context, AttributeSet attrs) {
        this(context, attrs, 0);
        this.context=context;
    }

    public TimePickerDialog (Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);

            timeListener=(Listener) context;
            this.context=context;

        setPositiveButtonText("Set");
        setNegativeButtonText("Cancel");

     }

     public void setListener(Listener listener){
        timeListener =listener;
     }

     @Override
     public View onCreateDialogView(){      
        timePicker =  new TimePicker(context);
        timePicker.setIs24HourView(true);
        return timePicker;
     }

     public void onDialogClosed(boolean positiveResult){
        if(timeListener!=null && positiveResult){
            timeListener.setTime( key,timePicker.getCurrentHour(),timePicker.getCurrentMinute());   
        }
    }

     public interface Listener{
        public void setTime(String key,int hour,int minute);
      }

} 
```

**该对话框从 xml 文件首选项**布局中调用：

```
<PreferenceCategory android:title="Schedule" >
    <com.tuxuri.timepicker.TimePickerDialog
        android:defaultValue="08:00"
        android:key="schedule_start_time"
        android:showDefault="true"
        android:summary="When to start"
        android:title="Start time" /> 

</PreferenceCategory> 
```

然后 TimePickerDialog 调用的任何内容都将在 PreferenceActivity 中实现：

```
 public class UserPreference extends PreferenceActivity implements TimePickerDialog.Listener {

     @Override
      protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        timePicker = new TimePickerDialog(this);
        addPreferencesFromResource(R.layout.preference);
     }

     @Override
      public void setTime(String key, int hour, int minute) {
            Log.v(TAG,key+"-"+hour+":"+minute);
       }
} 
```

# .net - 如何以编程方式确定 DLL 是托管的还是非托管的？

> ID：15706377
> 
> 赞同：3
> 
> 时间：2013-03-29T15:34:41.017
> 
> 标签：.net, managed

如何在程序中确定 DLL 是托管代码还是非托管代码？我们使用[此代码](https://stackoverflow.com/questions/1591557/how-to-tell-if-a-net-assembly-was-compiled-as-x86-x64-or-any-cpu?rq=1)来确保我们所有的托管 DLL 都是 MSIL。但它会在非托管 DLL 上引发异常，因此我需要一种方法来首先检查 DLL 是否被托管。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:40:32.323

最简单的选择很可能只是尝试按原样打开文件并捕获异常。任何非托管程序集都会在`Assembly.LoadFrom`.

但是，如果您想更严格地确定这一点，您需要自己检查 PE 标头以获取适当的信息。本文[详细介绍了该过程](http://blogs.msdn.com/b/kstanton/archive/2004/03/31/105060.aspx)，但需要检查DLL的PE头的[IMAGE_OPTIONAL_HEADER](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680339%28v=vs.85%29.aspx)结构。

# cookies - 拥有永不过期的持久登录 Cookie（“记住我”）是个好主意吗？

> ID：15706379
> 
> 赞同：2
> 
> 时间：2013-03-29T15:34:53.450
> 
> 标签：cookies, login, remember-me

在最推荐的持久登录 Cookie 解决方案中，用户的“记住我”`Cookie`总是在使用其持久登录 Cookie 登录时使用**新令牌进行更新。**假设您为设置了`expiry date`of ，这意味着只要他们每月访问该网站一次，他们就永远**不必**再次输入密码，因为更新的 Cookie 将在未来 30 天后继续推动到期日期。`30 days``Cookie`

 ****这是一个好主意吗？**

如果不是，并且我们想强制他们每月至少登录一次，那么考虑到我们无法检索a ，我们如何知道他们的*第一个*持久登录 Cookie 何时发出？ `expiry date``Cookie`

我们是否必须将第一个时间戳存储`Cookie`在 Cookie 本身中并以这种方式对其进行跟踪，然后在原始时间戳过期时让站点删除 cookie？

还是我对所有这些**都想得太多**了，对于永远不必再次登录的用户来说没有问题（当然，除非他们正在访问网站的关键部分，例如他们的帐户或付款页面）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:38:57.647

这实际上取决于网站上正在访问的信息的性质，对于stackoverflow，可以访问更敏感的信息，例如访问银行网站，从不。**

# ios - Google Analytics and ECSlidingViewController in iOS

> ID：15706380
> 
> 赞同：0
> 
> 时间：2013-03-29T15:35:05.050
> 
> 标签：ios, google-analytics, viewcontroller

how can i use Google Analytics and ECSlidingViewController in my iOS App?

Google Analytics does not start when the first ViewController is an ECSlidingViewController...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T15:35:27.023

You probably need to make sure your RootViewController is Subclass of GAITrackedViewController

so:

```
ECSSlidingViewController : GAITrackedViewController 
```

then you can get your tracker Via

```
id tracker = [[GAI sharedInstance] defaultTracker]; 
```

and do as you wish.

Maybe Something Like -

```
[tracker set:kGAIScreenName value:@"My Screen"];
[tracker send:[[GAIDictionaryBuilder createAppView] build]];
[[GAI sharedInstance] dispatch]; 
```

**I just noticed this question if from April so you probably solved this ages ago!

Enjoy!

# asp.net - RedirectToAction 在 IE10 中抛出 400 错误

> ID：15706382
> 
> 赞同：2
> 
> 时间：2013-03-29T15:35:19.803
> 
> 标签：asp.net, asp.net-mvc-3, internet-explorer-10, redirecttoaction

我有一个使用 RedirectToAction 的 ASP.Net MVC3 站点，如下所示：

```
return RedirectToAction("Index", interstitialController,
                        new { userName = model.logInInfo.UserName, redirectString = redirectUrl, authToken = login.authenticationToken, reason = login.reason, status = login.status, provider = login.provider }); 
```

由于某种原因，这导致 IE10 将其生成为请求：

```
https://site.com/(F(7vkS9Als2GF4acdwa9JNTwHsOkeFIsGcdMGU-FIT0X1IC3UwpkeZrPvTp1WmCbC7aY890yhpaeS4dadGjjUrym9Z_UOHYUUezRjD_buWV8pJU35yl2MHLz_CqzpJx65UyW5qDYdBJ8RMVj5kp02eaKzhX2--JcFvwPsYKeGk11t5MHWU4sbnFYw7keYlAuB5p4_JSVnn99SS28M8wWjQPNzw89G5qXwFRyrCYgIDDrWUUsefofkfEB66gIF2Abet0))/Interstitial/Index?userName=user.name%40earthlink.net&redirectString=http%3A%2F%2Fwww.site.com%2Fcos_auth%2Fauthenticate.asp%3F_auth_token%3DPTZPGf5FDdVAtkXRXRd1piW5jTYSmjyraiQ79LEvrPsaf4kNDQLbJW%252bG5vZtRnSOZ50mLVm%252frF7Ne16uwQVXOOsnBzSeXj9RIUaEIpjmtFCUWOVDEldrVpIL6KBJasJ%252bac2pzS1oSKAqAK2kywt869NGQdWDM7u0%252fRHVikatRIHv8SpXiyz94eeaBEraKAnz%26persist%3D1&authToken=PTZPGf5FDdVAtkXRXRd1piW5jTYSmjyraiQ79LEvrPsaf4kNDQLbJW%2BG5vZtRnSOZ50mLVm%2FrF7Ne16uwQVXOOsnBzSeXj9RIUaEIpjmtFCUWOVDEldrVpIL6KBJasJ%2Bac2pzS1oSKAqAK2kywt869NGQdWDM7u0%2FRHVikatRIHv8SpXiyz94eeaBEraKAnz&status=Success&provider=COS 
```

这应该是这样的：

```
https://site.com/Interstitial/Index?userName=user.name%40earthlink.net&redirectString=http%3A%2F%2Fwww.site.com%2Fcos_auth%2Fauthenticate.asp%3F_auth_token%3DPTZPGf5FDdVAtkXRXRd1piW5jTYSmjyraiQ79LEvrPsaf4kNDQLbJW%252bG5vZtRnSOZ50mLVm%252frF7Ne16uwQVXOOsnBzSeXj9RIUaEIpjmtFCUWOVDEldrVpIL6KBJasJ%252bac2pzS1oSKAqAK2kywt869NGQdWDM7u0%252fRHVikatRIHv8SpXiyz94eeaBEraKAnz%26persist%3D1&authToken=PTZPGf5FDdVAtkXRXRd1piW5jTYSmjyraiQ79LEvrPsaf4kNDQLbJW%2BG5vZtRnSOZ50mLVm%2FrF7Ne16uwQVXOOsnBzSeXj9RIUaEIpjmtFCUWOVDEldrVpIL6KBJasJ%2Bac2pzS1oSKAqAK2kywt869NGQdWDM7u0%2FRHVikatRIHv8SpXiyz94eeaBEraKAnz&status=Success&provider=COS 
```

它在兼容模式下在 IE10 上运行良好，但在非兼容模式下则不行。不确定是什么原因造成的。正如你所看到的，它在请求中插入了一些垃圾，导致它失败。有没有人见过这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:48:48.927

这些垃圾看起来就像在无 cookie 会话中发生的事情。

如果您将 web.config 更改为 have `<forms cookieless="UseCookies"`，它将摆脱那些东西。

从[MSDN FormsAuthentication.CookieMode](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.cookiemode.aspx)：

> CookieMode 属性反映表单配置元素的 cookieless 属性的值。CookieMode 属性确定 FormsAuthenticationTicket 值是存储在浏览器的会话 cookie 中还是存储在 QueryString 属性中。

# python - Pycharm Django Syncdb MySQLdb 未找到

> ID：15706383
> 
> 赞同：1
> 
> 时间：2013-03-29T15:35:20.363
> 
> 标签：python, mysql, django, mysql-python

我已经开始在我的 Django 开发中使用 Pycharm 并且遇到了这个错误。我知道我的 MySQLdb 正在工作，因为我可以在 python shell 中尝试导入它，并且可以在命令行上运行 syncdb 命令。我的问题是我需要向 Pycharm 添加什么才能使 MySQLdb 被识别。如果这有什么不同，我正在使用 Mac OS X。我是否需要在我的 manage.py 中添加一些内容，或者是否需要将其添加到 Pycharm 的首选项中？或者它是不同的东西。谢谢你们的帮助。

这是我得到的错误：

```
 Traceback (most recent call last):
      File "/Applications/PyCharm.app/helpers/pycharm/django_manage.py", line 21, in <module>
        run_module(manage_file, None, '__main__', True)
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py", line 176, in run_module
        fname, loader, pkg_name)
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py", line 82, in _run_module_code
        mod_name, mod_fname, mod_loader, pkg_name)
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py", line 72, in _run_code
        exec code in run_globals
      File "/Users/Brandon/PycharmProjects/Database_assignment/manage.py", line 10, in <module>
        execute_from_command_line(sys.argv)
      File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
        utility.execute()
      File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 382, in execute
        self.fetch_command(subcommand).run_from_argv(self.argv)
      File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 261, in fetch_command
        klass = load_command_class(app_name, subcommand)
      File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 69, in load_command_class
        module = import_module('%s.management.commands.%s' % (app_name, name))
      File "/Library/Python/2.7/site-packages/django/utils/importlib.py", line 35, in import_module
        __import__(name)
      File "/Library/Python/2.7/site-packages/django/core/management/commands/syncdb.py", line 8, in <module>
        from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal
      File "/Library/Python/2.7/site-packages/django/core/management/sql.py", line 6, in <module>
        from django.db import models
      File "/Library/Python/2.7/site-packages/django/db/__init__.py", line 40, in <module>
        backend = load_backend(connection.settings_dict['ENGINE'])
      File "/Library/Python/2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
        return getattr(connections[DEFAULT_DB_ALIAS], item)
      File "/Library/Python/2.7/site-packages/django/db/utils.py", line 92, in __getitem__
        backend = load_backend(db['ENGINE'])
      File "/Library/Python/2.7/site-packages/django/db/utils.py", line 24, in load_backend
        return import_module('.base', backend_name)
      File "/Library/Python/2.7/site-packages/django/utils/importlib.py", line 35, in import_module
        __import__(name)
      File "/Library/Python/2.7/site-packages/django/db/backends/mysql/base.py", line 16, in <module>
        raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
    django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: No module named MySQLdb

Process finished with exit code 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:39:07.957

尝试

点安装 mysql-python

我认为在 Pycharm 中，您可以通过 GUI 安装软件包。但本质上你需要安装mysql-python

如果您收到“权限被拒绝消息”，您可能需要执行 sudo pip install mysql-python

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T06:32:25.297

PyCharm 定义了用于每个项目的解释器，因此您需要仔细检查项目是否设置为使用：

1.  您设置的 virtualenv
2.  系统 Python，如果您不使用 virtualenv（您应该使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-22T13:59:43.253

如果您使用的是 python 3，mysql-python 将无法安装，因为它不支持 python 3。请改用 mysqlclient。更多信息[在这里](https://docs.djangoproject.com/en/1.8/ref/databases/#id9)。

# jquery - 多个滑块，组合导航

> ID：15706390
> 
> 赞同：0
> 
> 时间：2013-03-29T15:35:37.720
> 
> 标签：jquery, slider

我正在使用 jquery easy slider 1.7 并在这里遇到了一个小问题。我试图在我的网页上获得多个滑块，这些滑块都由一个导航控制。问题是，我创建的每个新滑块都有自己的导航。有没有办法结合这些导航？

我对javascript不是很熟悉，所以如果有人能帮我解决这个问题，那就太好了。

我正在使用数字导航，所以我想我必须在这里更改或添加一些内容：

```
if(options.numeric){
for(var i=0;i<s;i++){
    $(document.createElement("li"))
        .attr('id',options.numericId + (i+1))
        // THIS LINE:
        .html('<a rel='+ i +' href=\"javascript:void(0);\">'+ slideName[i] +'</a>')
        .appendTo($("#"+ options.numericId))
        .click(function(){
            animate($("a",$(this)).attr('rel'),true);
         });

};      
        } else {
            $("a","#"+options.nextId).click(function(){     
                animate("next",true);
            });
            $("a","#"+options.prevId).click(function(){     
                animate("prev",true);               
            }); 
            $("a","#"+options.firstId).click(function(){        
                animate("first",true);
            });             
            $("a","#"+options.lastId).click(function(){     
                animate("last",true);               
            });             
        }; 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:02:35.533

您不必编辑核心脚本来更改功能。使用可用的参数。现在，您所有的滑块控件都具有相同的 ID。它没有抛出错误，但它不起作用并不让我感到惊讶。

如果您还没有让一个滑块工作，请先这样做。

如果是这样，请确保您使用的参数包含唯一 ID（如果您必须使用该参数）：

```
$("#slider").easySlider({ 
    numericId: 'navi1'
})
$("#slider2").easySlider({
    numericId: 'navi2'
}) 
```

再看一下示例的源代码：http: [//cssglobe.com/lab/easyslider1.5/05.html](http://cssglobe.com/lab/easyslider1.5/05.html)。那里有两个独立的滑块。

# xslt - XSLT 模板查找响应数据的出现

> ID：15706398
> 
> 赞同：1
> 
> 时间：2013-03-29T15:36:15.603
> 
> 标签：xslt, xslt-2.0

在 XSLT 2.0 转换中，我有 2 个输入：

拳头输入我的初始有效载荷：

```
<datas>
   <data1>1000</data1>
   <data2>2000</data2>
   <data3>1000</data3>
   <name1>1000</name1>
   <name2>1000</name2>
</datas> 
```

第二个输入是转码服务的结果

```
<results>
  <result>
   <type>data<type>
   <key>1000</key>
   <value>john</value>
  <result>
  <result>
   <type>data<type>
   <key>2000</key>
   <value>tom</value>
  <result>
  <result>
   <type>name<type>
   <key>1000</key>
   <value>marc</value>
  <result>
  <result>
   <type>data<type>
   <key>1000</key>
   <value>john</value>
  <result>     
  <result>
   <type>name<type>
   <key>1000</key>
   <value>marc</value>
  <result>
 </results> 
```

需要作为输出

```
<datas>
  <data1>john</data1>
  <data2>tom</data2>
  <data3>john</data3>
  <name1>marc</name1>
  <name2>marc</name2>
</datas> 
```

想要创建一个 xslt 模板来映射响应，而无需每次都运行所有数据。结果顺序与输入数据不同

任何的想法 ？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:02:36.007

您可以做的是首先匹配第一个 XML 文档中**数据元素的子元素**

```
<xsl:template match="datas/*"> 
```

然后将元素的“类型”和“位置”提取到变量中

```
<xsl:variable name="type" select="substring(local-name(), 1, 4)" />
<xsl:variable name="position" select="number(substring(local-name(), 5))" /> 
```

最后，您可以在第二个文档（在我的示例中将其称为“test2.xml”）中查找相关名称，如下所示：

```
<xsl:apply-templates select="document('test2.xml')/results/result[type=$type][position()=$position]/value/text()" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="datas/*">
        <xsl:variable name="type" select="substring(local-name(), 1, 4)" />
        <xsl:variable name="position" select="number(substring(local-name(), 5))" />
        <xsl:copy>
           <xsl:apply-templates select="document('test2.xml')/results/result[type=$type][position()=$position]/value/text()" />
        </xsl:copy>
    </xsl:template>

     <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

当应用于您的输入 XML 时，应输出以下内容

```
<datas>
   <data1>john</data1>
   <data2>tom</data2>
   <data3>john</data3>
   <name1>marc</name1>
   <name2>marc</name2>
</datas> 
```

编辑：正如 Martin Honnen 在评论中正确指出的那样（谢谢 Martin！），这最好用钥匙来实现。首先像这样定义一个键：

```
 <xsl:key name="lookup" match="result" use="type" /> 
```

然后你可以像这样从第二个文档中查找文本：

```
<xsl:apply-templates
     select="key('lookup', $type, document('test2.xml'))[$position]/value/text()" /> 
```

这个 XSLT 也应该可以工作（在 XSLT 2.0 中）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:key name="lookup" match="result" use="type" />

    <xsl:template match="datas/*">
        <xsl:variable name="type" select="substring(local-name(), 1, 4)" />
        <xsl:variable name="position" select="number(substring(local-name(), 5))" />
        <xsl:copy>
           <xsl:apply-templates
                select="key('lookup', $type, document('test2.xml'))[$position]/value/text()" />
        </xsl:copy>
    </xsl:template>

     <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:49:16.437

**一个不依赖于位置的简短解决方案，不使用任何非全局变量**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kResByChildren" match="value"
  use="concat(../type, '+', ../key)"/>

 <xsl:variable name="vDocResults" select=
   "document('file:///c:/temp/delete/results.xml')"/>

 <xsl:template match="node()[not(self::text())]|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="text()">
  <xsl:value-of select=
  "key('kResByChildren', concat(substring(name(..),1,4), '+', .),
                                $vDocResults)[1]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<datas>
   <data1>1000</data1>
   <data2>2000</data2>
   <data3>1000</data3>
   <name1>1000</name1>
   <name2>1000</name2>
</datas> 
```

**第二个提供的文档（已纠正所有畸形）位于文件中`c:\temp\delete\results.xml`：**

```
<results>
  <result>
   <type>data</type>
   <key>1000</key>
   <value>john</value>
  </result>
  <result>
   <type>data</type>
   <key>2000</key>
   <value>tom</value>
  </result>
  <result>
   <type>name</type>
   <key>1000</key>
   <value>marc</value>
  </result>
  <result>
   <type>data</type>
   <key>1000</key>
   <value>john</value>
  </result>
  <result>
   <type>name</type>
   <key>1000</key>
   <value>marc</value>
  </result>
 </results> 
```

**产生了想要的正确结果：**

```
<datas>
   <data1>john</data1>
   <data2>tom</data2>
   <data3>john</data3>
   <name1>marc</name1>
   <name2>marc</name2>
</datas> 
```

**解释**: 使用复合键。

# css - 是否可以裁剪重复的背景图像？

> ID：15706402
> 
> 赞同：0
> 
> 时间：2013-03-29T15:36:25.323
> 
> 标签：css

图像在浮动 div 中从上到下扩展，我想将重复背景图像的顶部和底部从顶部栏和底部栏裁剪 20 像素。

```
.container {
    background:url(dot.gif) repeat-y;
    background-size:1px 1px;
} 
```

我尝试了以下方法，但这没有帮助：

```
background-position:center 20px; 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:40:56.073

要么将容器缩小 20 像素，要么将图像缩小 20 像素；使容器小 20px 尝试使用 jQuery

图片试试这个

```
height://reduce by 20px;
width:auto; 
```

# text - 视差滚动中的静态文本

> ID：15706403
> 
> 赞同：0
> 
> 时间：2013-03-29T15:36:26.430
> 
> 标签：text, parallax

我正在我的投资组合网站上工作，并想使用视差滚动，但只是为了改变我发现的这个网站上的主要文本。

这是[链接](http://www.stinkdigital.com/)。

谁能告诉我如何设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:44:27.837

这是该技术的基本教程的链接。

这是一个描述：

当您滚动时，背景图像的转换速度比前景中的内容要慢，从而产生 3D 深度的错觉。

# node.js - 亚马逊 EC2 微型实例是否足以用于简单的 node.js 和 redis 设置？

> ID：15706405
> 
> 赞同：7
> 
> 时间：2013-03-29T15:36:33.963
> 
> 标签：node.js, amazon-ec2, redis

我正在开发一个非常简单的投资组合网站。它很可能几乎没有任何流量。我想使用 node.js 和 redis 作为应用程序的后端。

由于 amazon ec2 有 1 年的免费微型实例，我想知道它是否足以在其上同时托管 redis 和 node.js。

正如我所说，该站点将非常轻量级，并且不会经常访问。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:41:12.463

对于我自己的运行 nginx、wordpress、django 和其他一些随机事物的站点来说，一个微型实例已经绰绰有余。

我相信它对于你的工作来说已经足够了（除非它是数字或 IO 密集型的......如果你不知道，它可能不是）。嘿，它是免费的，为什么不呢？AWS 有很多很酷的功能，您也可以使用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:41:12.573

[亚马逊](http://aws.amazon.com/ec2/instance-types/)的规格让我相信。

显然，redis 对于分配的 RAM 是有问题的，但对于最小的流量来说应该没问题。

613 MiB 内存
最多 2 个 EC2 计算单元（用于短周期突发）
仅 EBS 存储
32 位或 64 位平台
I/O 性能：低
EBS 优化可用：无
API 名称：t1.micro

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:40:26.680

我的理解是它对新用户是免费的，所以只要把你的代码放在那里看看会发生什么。另一种方式是它只提供大约 650 mb 的 RAM。所以你一开始应该没问题。只有当用户产生大量数据时，RAM才会成为瓶颈。

# asp.net-mvc-4 - 完成未绑定的 MVC 模型属性的最佳实践？

> ID：15706408
> 
> 赞同：2
> 
> 时间：2013-03-29T15:36:50.400
> 
> 标签：asp.net-mvc-4, model-binding

我正在尝试为仅部分编辑的模型找到使用 MVC 的最佳方法。

下面是一个简单的例子。

**模型**

```
using System.ComponentModel.DataAnnotations;
public class SimpleModel
{
    public int Id { get; set; }
    public string Parent { get; set; }
    [Required]
    public string Name { get; set; }
} 
```

**看法**

```
using System.ComponentModel.DataAnnotations;
public class SimpleModel
{
    public int Id { get; set; }
    public string Parent { get; set; }
    [Required]
    public string Name { get; set; }
} 
```

**控制器**

```
using System.Web.Mvc;

public class SimpleController : Controller
{
    public ActionResult Edit(int id)
    { return View(Get(id)); }

    [HttpPost]
    public ActionResult Edit(int id, SimpleModel model)
    {
        if (model.Name.StartsWith("Child")) //Some test that is not done client-side.
        {
            Save(model);
            //Get the saved data freshly.
            //model = Get(id);
        }
        else
        {
            ModelState.AddModelError("", "Name should start with 'Child'");
        }
        //Is this the way to set the Parent property?
        //var savedModel = Get(id);
        //model.Parent = savedModel.Parent;
        return View(model);
    }

    //Mock a database.
    SimpleModel savedModel;

    private void Save(SimpleModel model)
    { savedModel = new SimpleModel() { Id = model.Id, Name = model.Name }; }

    private SimpleModel Get(int id)
    {
        if (savedModel == null)
        { return new SimpleModel() { Id = id, Parent = "Father", Name = "Child " + id.ToString() }; }
        else
        { return new SimpleModel() { Id = savedModel.Id, Parent = "Father", Name = savedModel.Name }; }
    }
} 
```

名称字段是可编辑的。父字段仅供参考，不应更新。因此，它是使用 DisplayFor 呈现的。

发布后，我收到一个属性 Parent 设置为 null 的模型。这没问题，因为它不会被保存。但是，当我只是将接收到的模型返回到视图时，将不再显示 Parent 字段。当模型有效时，我可以轻松地从数据库中再次获取它，从而取回 Parent 字段的值。

当模型无效时，我想允许用户更正输入并再次尝试保存。在那里，我应该使用接收到的输入模型的值，但也应该显示显示的值。

实际上，要显示的字段更多以供参考，通常来自不同的数据库实体，而不是正在编辑的实体。

我已经看到了将字段作为视图中的隐藏字段传递的建议，但是我非常不愿意从客户端读取不应更新的数据。

有没有比手动将这些值复制到模型中或将它们作为隐藏字段传递更优雅的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:55:03.347

将这些不可编辑的属性赋予另一个模型并让它处理这些属性怎么样？

**查看模型**

```
public class PersonViewModel
{
    public int Id { get; set; }

    [Required]
    public string FirstName { get; set; }

    [Required]
    public string LastName { get; set; }

    public PersonDetailsModel DetailsModel { get; set; }
} 
```

**详细型号**

```
public class PersonDetailsModel
{
    public string Mother { get; set; }
    public string Father { get; set; }

    public PersonDetailsModel() { }

    public PersonDetailsModel(int personId)
    {
        // pull required model data from databases
        var db = DBParentContext;
        Mother = db.Parent.Where(m => m.ChildId == personId)
        Father = db.Parent.Where(m => m.ChildId == personId)
    }
} 
```

**控制器**

```
public class PersonController : Controller
{
    [HttpPost]
    public ActionResult Edit(PersonViewModel viewModel)
    {
        viewModel.DetailsModel = new PersonDetailsModel(viewModel.Id)

        if (ModelState.IsValid) {
            // ~
        }
        return View(viewModel)
    }
} 
```

**看法**

```
@model PersonViewModel

@Html.DisplayFor(m => m.DetailsModel.Mother)
@Html.DisplayFor(m => m.DetailsModel.Father)
@Html.TextBoxFor(m => m.FirstName)
@Html.TextBoxFor(m => m.LastName) 
```

Since details like your Mother are un-editable then they're not really part of the "Edit" model, so I'd box like that away and try to let something else take care of them.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:36:06.240

If you aren't going to update the Parent field, then it really doesn't matter if it's a hidden or not, since you won't update it on post.

I would use the hidden in this case, just make sure not to update that field.

# php - 将用户选择从一个下拉菜单插入 mysql 查询，用于为同一页面上的下一个下拉菜单列表生成下拉菜单项

> ID：15706412
> 
> 赞同：0
> 
> 时间：2013-03-29T15:37:08.973
> 
> 标签：php, sql, drop-down-menu

因此，在绞尽脑汁两天并对此主题进行研究之后，我一直无法解决我的问题。开始了..

我的 html 表单有 4 个下拉菜单（html 选择），其选项是从数据库中各自的表中填充的。但是，每个 SQL 查询都依赖于先前用户选择中的用户选择。我将把这个用户选择插入到下一个 SQL 查询的 WHERE 子句中。请注意，在正常的页面发送之前要处理SQL，所以我不能简单地处理发送的请求。那么如何捕获这个用户选择并使用 PHP 插入到 sql 查询中呢？

我希望我的解释足够好。任何线索或提示将不胜感激。我只需要了解如何在单击提交按钮之前捕获用户选择并将其传递给查询，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:47:55.103

对我来说，您似乎有两种选择：

1.  查询所有可能的数据组合，并在初始页面加载时将所有选择选项加载到页面上。最初隐藏选择 2、3 和 4 中的所有选项，并在进行选择时通过 javascript 取消隐藏适当的选项。如果您有少量选项来预加载它们对页面加载时间的影响不大，这可能是一个很好的解决方案。

2.  仅加载初始页面加载时第一个下拉菜单的选项。进行选择时，使用 AJAX 加载适当过滤的选项列表以供后续选择。如果您有大量选项或选项组合，这可能是一个更好的选择，您不想将它们全部加载到页面。

无论哪种方式，除非您希望在每个单独的选择事件之间加载页面，否则没有解决方案可以纯粹使用 PHP 来做您想做的事情。

# c++ - 在 Windows 窗体应用程序中使用 boost 序列化

> ID：15706418
> 
> 赞同：0
> 
> 时间：2013-03-29T15:37:30.733
> 
> 标签：c++, winforms, boost, clr

我对 boost 和 .net-Framework 有疑问。我在没有.net 的情况下编写了我的课程。该项目运行良好，现在我将类文件包含到 Windows 窗体应用程序中。发生了许多编译器错误，例如“__declspec(dllexport) 无法与 /clr:pure 或 /clr:safe 一起使用”在 singleton.hpp（boost-library）中。我创建一个例子。在 Form1-header 中，仅包含此类，没有其他任何操作，仅来自 Visual Studio 2010 生成的代码。

这是一个测试类，我创建它是为了向您展示一个简单的案例：

```
#ifndef FOO_H
#define FOO_H

#include <boost/archive/xml_oarchive.hpp>
#include <boost/archive/xml_iarchive.hpp>

class Foo
{
private:
    int  name;

public:
    void setName(int name);
    int getName(void);
private:
    friend boost::serialization::access;
    template<class Archive>
    void serialize (Archive& arch, const unsigned int)
    {
        arch & BOOST_SERIALIZATION_NVP(this->name);
    }
};
#endif 
```

我尝试将 /clr:pure 切换到 /clr，这样编译器可以编译它，但是在启动程序时发生了错误。它的标题是“调试断言失败！” 在 exe 文件中。在消息框中，您还可以阅读“Expression:_CrtIsValidHeapPointer(pUserData)” 目前我使用 boost 1.52.0，但我也尝试使用 boost 1.53.0。我用“bootstrap.bat”和“bjam.exe”安装了boost。

有人知道这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:37:56.850

好的，Hans Passant 找到了解决方案。我为一些有同样问题但不知道如何更改/clr 的人发布了方法。您必须将 /clr:pure 更改为 /clr。发生的错误只是暂时的。现在它起作用了。

要在 Visual Studio (2010/2012) 中获得 /clr:pure，您必须进入项目选项卡并单击属性。单击 C/C++>>General，然后将“公共语言运行时支持”从 /clr:pure 到 /clr。

# android - 将裁剪图像保存到文件夹 data/data/myAoo/files

> ID：15706421
> 
> 赞同：0
> 
> 时间：2013-03-29T15:37:44.687
> 
> 标签：android, image

我必须在文件夹 data/data/myapp/files/ 中保存裁剪图像（我曾经裁剪 android 的功能）！

我查了怎么办，却想不出正确的方法！

谁能告诉我在哪里看，或者怎么看？

谢谢！！

# c# - 有时在磁盘已满情况下出现 IsolatedStorageException？

> ID：15706422
> 
> 赞同：1
> 
> 时间：2013-03-29T15:37:45.780
> 
> 标签：c#, file-io, windows-phone-8, windows-phone, isolatedstorage

我正在设计一个 API。目前，我正在尝试安全地处理磁盘空间不足的情况。基本上，我们有一系列包含一些数据的文件。当磁盘满了，我们再去写一个数据文件的时候，当然会报错。此时，我们删除单个文件（从最旧到最新的文件列表循环，并在成功删除文件后重试）。然后，我们重试写入文件。重复该过程，直到文件写入没有错误。

现在有趣的部分。所有这些都是同时发生的。就像，在某些时候有 8 个线程同时执行此操作。这使事情变得更加有趣，并导致了一个奇怪的错误。

这是代码

```
 public void Save(string text, string id)
    {
        using (var store = IsolatedStorageFile.GetUserStoreForApplication())
        {
            var existing = store.GetFileNames(string.Format(Prefix + "/*-{0}.dat", id));
            if (existing.Any()) return; //it already is saved

            string name = string.Format(Prefix + "/{0}-{1}.dat", DateTime.UtcNow.ToString("yyyyMMddHHmmssfffffff"), id);
        tryagain:
            bool doover=false;
            try
            {
                AttemptFileWrite(store, name, text);
            }
            catch (IOException)
            {
                doover = true;
            }
            catch (IsolatedStorageException) //THIS LINE
            {
                doover = true;
            }
            if (doover)
            {
                Attempt(() => store.DeleteFile(name)); //because apparently this can also fail. 
                var files = store.GetFileNames(Path.Combine(Prefix, "*.dat"));
                foreach (var file in files.OrderBy(x=>x))
                {
                    try
                    {
                        store.DeleteFile(Path.Combine(Prefix, file));
                    }
                    catch
                    {
                        continue;
                    }
                    break;
                }
                goto tryagain; //prepare the velociraptor shield!
            }
        }
    }

    void AttemptFileWrite(IsolatedStorageFile store, string name, string text)
    {
        using (var file = store.OpenFile(
            name,
            FileMode.Create,
            FileAccess.ReadWrite,
            FileShare.None | FileShare.Delete
            ))
        {
            using (var writer = new StreamWriter(file))
            {
                writer.Write(text);
                writer.Flush();
                writer.Close();
            }
            file.Close();
        }
    }

    static void Attempt(Action func)
    {
        try
        {
            func();
        }
        catch
        {
        }
    }
    static T Attempt<T>(Func<T> func)
    {
        try
        {
            return func();
        }
        catch
        {
        }
        return default(T);
    }
    public string GetSaved()
    {

        string content=null;
        using (var store = IsolatedStorageFile.GetUserStoreForApplication())
        {
            var files = store.GetFileNames(Path.Combine(Prefix,"*.dat")).OrderBy(x => x);

            if (!files.Any()) return new MessageBatch();
            foreach (var filename in files)
            {
                IsolatedStorageFileStream file=null;
                try
                {
                    file = Attempt(() =>
                        store.OpenFile(Path.Combine(Prefix, filename), FileMode.Open, FileAccess.ReadWrite, FileShare.None | FileShare.Delete));
                    if (file == null)
                    {
                        continue; //couldn't open. assume locked or some such
                    }
                    file.Seek(0L, SeekOrigin.Begin);
                    using (var reader = new StreamReader(file))
                    {
                        content = reader.ReadToEnd();
                    }
                    //take note here. We delete the file, while we still have it open!
                    //This is done because having the file open prevents other readers, but if we close it first,
                    //then there is a race condition that right after closing the stream, another reader could pick it up and 
                    //open exclusively. It looks weird, but it's right. Trust me. 
                    store.DeleteFile(Path.Combine(Prefix, filename));
                    if (!string.IsNullOrEmpty(content))
                    {
                        break;
                    }
                }
                finally
                {
                    if (file != null) file.Close();
                }
            }
        }
        return content;
    } 
```

在标有 THIS LINE 的那一行，就是我所说的。在执行 AttemptFileWrite 时，我可以查看`store.AvailableSpace`并看到有足够的空间将数据放入其中，但是在尝试打开文件时，它会抛出这个带有`Operation Not Permitted`. 除了这个奇怪的情况，在所有其他情况下，它只是抛出一个 IOException 并显示有关磁盘已满的消息

我想弄清楚我是否有一些奇怪的比赛条件，或者这是我必须处理的错误还是什么？

为什么会出现这个错误？

# javascript - IE滚动时卡顿

> ID：15706429
> 
> 赞同：4
> 
> 时间：2013-03-29T15:38:18.483
> 
> 标签：javascript, jquery, internet-explorer

这适用于除 IE 之外的所有浏览器。我该如何解决？当我在 IE 中滚动时，它非常生涩。

[http://jsfiddle.net/cc48t/](http://jsfiddle.net/cc48t/)

```
//js
$(window).scroll(function () {
    if ($(window).scrollTop() > 100) {
        $('#scroller').css('top', $(window).scrollTop());
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:43:27.470

试试这个（[小提琴](http://jsfiddle.net/cc48t/982/)）：

```
$(window).scroll(function () {
    if ($(window).scrollTop() > 100) {
        $('#scroller').addClass("top");
    }
    else {
        $('#scroller').removeClass("top");
    }
}); 
```

和 CSS：

```
#scroller {
    position: relative;
    top: 100px;
    width: 500px;
    background: #CCC;
    height: 100px;
    margin: 0 auto;
}

#scroller.top {
    position: fixed;
    top: 0;
    left: 50%;
    margin-left: -250px;
} 
```

编辑：我将 set `width`and `margin`to`#scroller`和 set `left: 50%`and `margin-left: -250px;`(Half of the set width) 添加到 .top 类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:47:52.753

你也可以试试这个（[小提琴](http://jsfiddle.net/cc48t/981/)）

```
$(window).scroll(function () {
    if ($(window).scrollTop() > 100) {
        //$('#scroller').css('top', $(window).scrollTop());
        $('#scroller').css('top', '0px');
        $('#scroller').css('position', 'fixed');
    }
    else
    {
        $('#scroller').css('top', '100px');
        $('#scroller').css('position', 'absolute');
    }
}
); 
```

# iphone - xcode - 使搜索栏出现/消失

> ID：15706431
> 
> 赞同：0
> 
> 时间：2013-03-29T15:38:28.683
> 
> 标签：iphone, ios, cocoa-touch, searchbar

我的 mapview 应用程序，我有一个用于搜索具体地址的搜索栏。它现在可以正常工作，它以“静态”方式出现在地图上方。我的想法是使用图片中的“搜索”按钮使其出现和消失：

![在此处输入图像描述](../Images/09d860888555c823b1c1d4141083175f.png) ![在此处输入图像描述](../Images/3f766cd9edd1fb64046e2c820b711283.png)

知道怎么做吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:41:27.333

您可以在代码中执行此操作。你所要做的就是改变它的框架。

将其添加到您的`navigationBar.frame`和下方，然后在点击图标时将其放下。我通常使用此代码使其看起来也不错：

```
[UIView animateWithDuration:0.2f delay:0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
       //Move it down here by changing its .frame
    }completion:^(BOOL finished){
    }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:56:03.077

您只需在单击搜索图标时更改 UISearchBar 的框架即可显示它。看

最初，当您不显示 UISearchBar 时，您应该以这种方式设置 Frame。

最初将 UISearchBar 的 Frame 设置在 ViewFrame 之外。

`thisSearchBar.frame = CGRectMake(0.0, -50.0, searchBarWidth, searchBarHeight)];`在`viewDidLoad`方法中

单击搜索图标以显示 UISearchBar

```
 - (void)showSearchBar{
 [UIView animateWithDuration:0.2f delay:0 options:UIViewAnimationOptionCurveEaseInOut animations:^{

  thisSearchBar.frame = CGRectMake(0.0, 50, searchBarWidth, searchBarHeight)];

  }completion:^(BOOL finished)
  {
  }]; 
```

}

你又完成了 SearchBar 的工作 调用 Set The Frame of Searchbar with ANimation

```
 - (void)hideSearchBar{
 [UIView animateWithDuration:0.2f delay:0 options:UIViewAnimationOptionCurveEaseInOut animations:^{

  thisSearchBar.frame = CGRectMake(0.0, -50, searchBarWidth, searchBarHeight)];

  }completion:^(BOOL finished)
  {
  }];

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:57:53.700

根据我的评论，只需使用：

```
searchBar.hidden = true; 
```

# proguard - 如何保留扩展 android.support.v4.app.FragmentActivty 的类？

> ID：15706435
> 
> 赞同：2
> 
> 时间：2013-03-29T15:38:53.663
> 
> 标签：proguard

我怎样才能保留扩展 FragmentActivty 的类？我使用 -keep public class * extends android.support.v4.app.FragmentActivity 之后该类存在但是当我启动应用程序时它不起作用并且我有一个错误，他找不到该类

# android - 如何将 GoogleMap 片段包装成 LinearLayout？

> ID：15706438
> 
> 赞同：5
> 
> 时间：2013-03-29T15:39:05.443
> 
> 标签：android, xml, google-maps

我试过这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <fragment xmlns:map="http://schemas.android.com/apk/res-auto"

          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:name="com.google.android.gms.maps.SupportMapFragment"
          map:mapType="normal"
       />

</LinearLayout> 
```

但我有两个错误：

1.  `<fragment xmlns:map="http://schemas.android.com/apk/res-auto"`：

> 为标记片段找到意外的命名空间前缀“xmlns”

2 `map:mapType="normal"`.：

> 为标签片段找到了意外的命名空间前缀“map”

我做错了什么，为了在我的应用程序中集成除 Google Map 之外的更多对象，它应该是什么样子......

谢谢！

**编辑 ！！**

我试过这个，它有效！

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              xmlns:map="http://schemas.android.com/apk/res-auto"
              map:mapType="normal"

    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <fragment 
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:name="com.google.android.gms.maps.SupportMapFragment"
       />

</LinearLayout> 
```

无法理解为什么..也无法理解什么`map:mapType="normal"`和`xmlns:map="http://schemas.android.com/apk/res-auto"`意思... ??

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T15:41:36.763

你有没有尝试过：

```
<LinearLayout 
    xmlns:map="http://schemas.android.com/apk/res-auto"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <fragment 
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          class="com.google.android.gms.maps.SupportMapFragment"
       />

</LinearLayout> 
```

从[http://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html](http://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html)看起来这两个属性是不需要的。

我也代替`class`了`android:name`。

要使用`map`您需要添加命名空间的属性（我认为您可以将其添加到[https://developers.google.com/maps/documentation/android/map#using_xml_attributes](https://developers.google.com/maps/documentation/android/map#using_xml_attributes)`LinearLayout`的更多信息。

如果属性不起作用，我可能只是以编程方式设置值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:30:57.277

据我所知，如果您使用布局包装地图，则无法在其上使用`map`前缀属性，并且您必须在代码中自定义地图。

# asp.net-mvc-4 - 未设置 Html.CheckBox [asp.net mvc 4]

> ID：15706441
> 
> 赞同：1
> 
> 时间：2013-03-29T15:39:15.550
> 
> 标签：asp.net-mvc-4, razor-2

我对一件事有点头疼（我知道以前有人问过类似的问题，但我很确定这不是一回事）。直截了当：我有一个带有 Telerik 网格的视图。在该网格上，我显示了模型中的一些内容，这些内容传递给了视图，但我希望在最后一列中放置一个 CheckBox，该 CheckBox 基于控制器中的某些内容进行检查/取消检查（检查与模型无关正在通过）。在处理视图的 ActionResult 函数中，我将一些`Boolean`值存储在 ViewData 中，然后根据存储在 ViewData 中的值在 CheckBox 中设置 isChecked 值。

ActionResult 的代码如下：

```
 [SecureThis(Roles = "User")]
    public ActionResult Index()
    {
        //get bucket ids
        var buckets = db.Buckets.ToList();
        int i=1;
        string cb = "checkbox" + i.ToString();
        foreach (Bucket b in buckets)
        {
            var payByInvoice = db.PaymentOptions.Where(p => p.BucketId == b.Id).Select(p => p.CanPayByInvoice).SingleOrDefault();
            if (payByInvoice == (int)PayByInvoiceState.Accepted)
                ViewData["checkbox" + i.ToString()] = true;
            else ViewData["checkbox" + i.ToString()] = false;
                i++;
                cb = "checkbox" + i.ToString();
        }
        return View(db.Buckets);
    } 
```

应该显示所有内容的网格是这样的：

```
@{
int i=1;
string cb = "checkbox" + i.ToString();
 }
@(Html.Telerik().Grid(Model)
        .Name("BucketsGrid")
        .DataKeys(keys => keys.Add(bucket => bucket.Id))
        .Columns(
            columns =>
            {
                columns.Template(model => ViewData[model.Id.ToString()])
                    .HeaderTemplate(
                    @<b>@Strings.Title_Customer</b>
                    );
                columns.Bound(model => model.CreditFacility);
                columns.Bound(model => model.Minimum);
                columns.Bound(model => model.RefillLevel);
                columns.Bound(model => model.NotificationEmail);
                columns.Bound(model => model.NotificationSms);
                columns.Template(model => Html.ActionLink(Strings.Edit, "Edit", new { id = model.Id }));
                columns.Template(model => Html.ActionLink(Strings.NotificationOptions, "Bucket", "NotificationOptions", new { id = model.Id }, null));
                columns.Template(model => Html.ActionLink("Refill", "Refill", "Payment", new { id = model.Id }, null));
                columns.Template(model => Html.ActionLink(Strings.Details, "Details", new { id = model.Id }));
                columns.Template(model => Html.ActionLink(Strings.Delete, "Delete", new { id = model.Id }));
                columns.Template(model => Html.CheckBox("invoice", (Boolean)ViewData[@cb])).HeaderTemplate("Invoice Option");                                
                @i++;
                @cb = "checkbox" + i.ToString();
            }
        )
        .Pageable(paging =>
                paging.Enabled(true)
                      .PageSize(UserSettings.GridPageSize)
                      .Style(GridPagerStyles.NextPrevious)
                      .Position(GridPagerPosition.Bottom)
            )
        .Sortable()
        .Scrollable()
        .Resizable(resize=> resize.Columns(true))
) 
```

整个事情的问题在于，无论 ViewData 中存储的数据如何，复选框都未选中。我使用了调试器，并且在 ViewData 中相应地设置了值，但由于某种原因（我还不能说），复选框仍然未被选中。

对此问题的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:07:59.123

我发现了这一切的问题。不出所料，这是我自己做的（或者可以这么说）。问题是我在 Telerik 网格声明中增加了 @i 变量，认为它会发生在网格中的所有行上，但那件事只触发一次。因此，该`ViewData[@cb]`值将始终在 Controller 中设置第二个值（在我的情况下是`false`），然后所有复选框都将被取消选中。

修复：

我使用 ViewBag 并用 a 设置它`Dictionary<Guid, bool>`来保存我的值，并使用该`model.Id`属性对其进行迭代。对于任何可能感兴趣的人，我将在下面发布代码。

控制器：

```
 ViewBag.Dict = new Dictionary<Guid, bool>();
        Dictionary<Guid, bool> dict = new Dictionary<Guid, bool>();

        foreach (Bucket b in buckets)
        {
            var payByInvoice = db.PaymentOptions.Where(p => p.BucketId == b.Id).Select(p => p.CanPayByInvoice).SingleOrDefault();
            if (payByInvoice != (int)PayByInvoiceState.Accepted)
            {
                dict.Add(b.Id, false);
            }
            if (payByInvoice == (int)PayByInvoiceState.Accepted)
            { 
                dict.Add(b.Id, true);
            }
        }
        ViewBag.Dict = dict; 
```

看法：

```
columns.Template(model => Html.CheckBox("invoice", (bool)ViewBag.Dict[model.Id])).HeaderTemplate("Invoice option"); 
```

# javascript - JQuery .prop 功能无法取消选中复选框

> ID：15706443
> 
> 赞同：6
> 
> 时间：2013-03-29T15:39:17.627
> 
> 标签：javascript, jquery, html, jquery-mobile, checkbox

我尝试了许多我在这里发现的想法，以取消选中复选框，但没有任何功能，但是没有一个正在工作...

现在我有：

```
$("#chkBox1").click(function () {
 if ($(this).is(":checked")) {
  $('#chkBox2').prop('checked', false); }
}); 
```

..但没有结果，chkBox2 仍处于选中状态

这是 HTML 中的复选框：

```
<input type="checkbox" name="art" id="chkBox1" data-mini="true" data-theme="c" /> 
```

我的代码中的一个可能的区别是复选框仅在单击按钮时使用href添加到页面中...复选框位于HTML中（不是在Javascript中创建的）...但在单击按钮之前不可见..这可能是问题的一部分吗？还是我错过了其他东西？另外，我正在使用 JQuery Mobile。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T15:46:53.363

您需要在更改其' 后刷新它`.prop`，使用`.checkboxradio('refresh')`.

> [**演示**](http://jsfiddle.net/Palestinian/3bjmJ/)

```
// Check #chkBox2 by default
$('#chkBox2').prop('checked', true).checkboxradio('refresh')

// Uncheck #chkBox2 when #chkBox1 is checked
$('#chkBox1').on('click', function () {
 if ($(this).is(':checked')) {
  $('#chkBox2').prop('checked', false).checkboxradio('refresh');
 }
}); 
```

*   [jQuery 移动 API 参考](http://api.jquerymobile.com/checkboxradio/#method-refresh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:53:49.913

对不起，我应该继续阅读！

这似乎可以解决问题：

```
 $('#chkBox1').checkboxradio('refresh'); 
```

..但我不完全确定为什么，这是 JQuery Mobile 独有的东西吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:58:04.880

html

```
<input type="checkbox" name="art" id="chkBox1" data-mini="true" data-theme="c" />
<input type="checkbox" name="art2" id="chkBox2" data-mini="true" data-theme="c" checked="checked" /> 
```

jQuery：

```
(function ($) {
$(document).ready(function () {
    $("#chkBox1").click(function () {
        if ($(this).is(":checked")) {
            $('#chkBox2').prop('checked', false);
        }
    });
});
})(jQuery); 
```

这里的工作示例[http://jsfiddle.net/SwmN6/75/](http://jsfiddle.net/SwmN6/75/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-29T15:40:59.597

您正在检查`this`并更改`chkBox2`：

```
if ($(this).is(":checked")) {
     $('#chkBox2').prop('checked', false); } 
```

试试这个：

```
if ($('#chkBox2').is(":checked")) {
     $('#chkBox2').prop('checked', false); } 
```

或者简单地说：

```
$('#chkBox2').prop('checked', false); 
```

# javascript - ng-repeat验证条件中的Angular.js多个输入

> ID：15706448
> 
> 赞同：1
> 
> 时间：2013-03-29T15:39:38.987
> 
> 标签：javascript, angularjs, angularjs-ng-repeat

我得到了一切正常，除了一件事。我`myForm`需要`$valid = true`如果

*   所有输入都已填充
*   未填写任何输入

`$valid = false`如果_

*   一些（但不是全部）输入已填充

请注意，这都在 ng-repeat 和 ng-form 子表单中。

我该怎么做？有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:48:13.773

只需将`ng-required`指令添加到`myForm`.

例如`<input type="text" name="myInput" ng-required="isRequired()" />`。

`isRequired`如果至少有一个表单字段包含值，则该函数应该简单地返回 true，否则返回 false。

如果这不起作用，那么您已经遗漏了一些信息 - 所以在这种情况下，请提供有关您的 HTML 和 JS 代码的更多信息（我之所以提到这一点，是因为我看到您已经用 ng-repeat 标记了这个问题，这可能会使场景与您在问题中描述的香草场景略有不同）。

# jquery - 字段日期必须是 chrome 中 mvc 中的日期

> ID：15706455
> 
> 赞同：28
> 
> 时间：2013-03-29T15:39:58.890
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, jquery-ui-datepicker

我正在做一个简单的 MVC4 Internet 应用程序，它允许将一些项目添加到类别中。

这是我到目前为止所做的。

我在 mvc 视图中有一个日期选择器。日期选择器的脚本是这样的。

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.20.min.js")" type="text/javascript"></script>
@Scripts.Render("~/bundles/jqueryval")
<script type="text/javascript">
    $(function () {
        $('#dtItemDueDate').datepicker({
            dateFormat: 'dd/mm/yy',
            minDate: 0
        });
    });
</script> 
```

我的模型属性：

```
 [DisplayName("Item DueDate")]
        [Required]
        [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}",ApplyFormatInEditMode = true)]
        [DataType(DataType.DateTime)]
        public DateTime? dtItemDueDate { get; set; }
        public char charCompleted { get; set; } 
```

在我看来，我已经这样做了：

```
@Html.TextBoxFor(m => m.dtItemDueDate)
@Html.ValidationMessageFor(m => m.dtItemDueDate) 
```

错误是这样的：

```
The field Item DueDate must be a date. 
```

奇怪的是它在 IE 和 mozilla 中工作，但在 Chrome 中不工作。

我在 SO 上找到了很多帖子，但没有一个有帮助

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-12-20T01:38:18.240

在不更改 jquery.validate.js 的情况下，您可以使用以下代码片段`$(document).ready()`：

```
jQuery.validator.methods.date = function (value, element) {
    var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
    if (isChrome) {
        var d = new Date();
        return this.optional(element) || !/Invalid|NaN/.test(new Date(d.toLocaleDateString(value)));
    } else {
        return this.optional(element) || !/Invalid|NaN/.test(new Date(value));
    }
}; 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-29T16:31:12.943

**编者注：此答案不再有效，从 jQuery 1.9 (2013) 开始，该`$.browser`方法已被删除**

* * *

根据[这篇文章](https://stackoverflow.com/questions/5966244/jquery-datepicker-chrome)，这是基于 Webkit 的浏览器的一个已知怪癖。

一种解决方案是`jquery.validate.js`通过查找函数进行修改`date: function (value, element)`并将此代码放入其中：

```
if ($.browser.webkit) {
    //ES - Chrome does not use the locale when new Date objects instantiated:
    var d = new Date();
    return this.optional(element) || !/Invalid|NaN/.test(new Date(d.toLocaleDateString(value)));
}
else {
    return this.optional(element) || !/Invalid|NaN/.test(new Date(value));
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-31T10:56:18.077

Rowan Freeman 解决方案对我不起作用，因为`.toLocaleDateString(value)`它不解析`value`字符串

这是我想出的解决方案 => 在 jquery.validate.js 中找到这个函数定义：“日期：函数（值，元素）”并将代码替换为：

```
// http://docs.jquery.com/Plugins/Validation/Methods/date
date: function (value, element) {
    var d = value.split("/");
    return this.optional(element) || !/Invalid|NaN/.test(new Date((/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())) ? d[1] + "/" + d[0] + "/" + d[2] : value));
}, 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-04-10T09:49:11.987

以下是可能有助于修复 chrome 和 safari 中的日期选择器问题的工作代码：模型：

```
public DateTime? StartDate { get; set; } 
```

看法：

```
@Html.TextBoxFor(model => model.StartDate, "{0:dd/MM/yyyy}", new { @type = "text", @class = "fromDate" }) 
```

js：

```
$(function () {
    checkSupportForInputTypeDate();

    $('#StartDate').datepicker({        
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd/mm/yy'
    });    
});

//Function to configure date format as the native date type from chrome and safari browsers is clashed with jQuery ui date picker.
function checkSupportForInputTypeDate() {
    jQuery.validator.methods.date = function (value, element) {
        var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        var isSafari = /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor);
        if (isSafari || isChrome) {
            var d = new Date();
            return this.optional(element) || !/Invalid|NaN/.test(new Date(d.toLocaleDateString(value)));
        } else {
            return this.optional(element) || !/Invalid|NaN/.test(new Date(value));
        }
    };
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-01-21T22:04:57.993

以下是[Maxim Gershkovich 的解决方案](https://stackoverflow.com/questions/15706455/1366033#comment39467632_15707341)详细说明：

```
jQuery.validator.methods.date = function (value, element) {
    if (value) {
        try {
            $.datepicker.parseDate('dd/mm/yy', value);
        } catch (ex) {
            return false;
        }
    }
    return true;
}; 
```

**备注**：

*   这取决于jQuery UI 附带的[jQuery datepicker方法](http://jqueryui.com/datepicker/)
*   这实际上比 jQueryValidate 附带的本机日期验证更强大。

    根据有关[日期验证](http://jqueryvalidation.org/date-method/)的文档：

    > 如果值是有效日期，则返回 true。使用 JavaScript 的内置 Date 来测试日期是否有效，因此**不进行健全性检查**。只有格式必须有效，而不是实际日期，例如 30/30/2008 是有效日期。

    而[`parseDate`](http://api.jqueryui.com/datepicker/#utility-parseDate)将检查日期是否有效且实际存在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-15T16:55:33.160

我通过从**DateTime**更改为**String**解决了这个问题。

这是我目前能想到的最佳维护解决方案。

# jquery - 带有 animate.css 的 js-waypoints 以某种方式过早触发

> ID：15706456
> 
> 赞同：0
> 
> 时间：2013-03-29T15:40:01.943
> 
> 标签：jquery, jquery-waypoints, animate.css

亲爱的stackoverflowers，

不知何故，我的航点在页面加载时触发，而不是在它们应该触发的时候触发。我的航路点的目标是，当它在视口中并且距离顶部 90% 时应该触发。然后它应该删除类 'hidden' 和 'animate fadeInUp'（使用 animate.css）。

有人有解决方案的想法吗？

* * *

**这是当滚动到视口并且距离顶部 90% 时它应该触发的 HTML：**

```
<div class="row hidden" id="waypoint"> 
```

那是我正在使用的 javascript，但目前在页面加载后会自动触发。

```
<script type="text/javascript">
$('#waypoint').waypoint(function() {
    $("#waypoint").removeClass("hidden");
    $("#waypoint").addClass("animated fadeInUp");
}, {
offset: '90%'
});
</script> 
```

这是我正在使用的 JS-Plugin 和 animate.css 的链接。

[http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

[http://daneden.me/animate/](http://daneden.me/animate/)

* * *

感谢能够解开这个小谜团的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T14:16:40.060

将其包裹在：

```
$(document).ready(function() {

$('#waypoint').waypoint(function() {
$("#waypoint").removeClass("hidden");
$("#waypoint").addClass("animated fadeInUp");
}, {
offset: '90%'
});

}); 
```

# android - android Map 上放大时不需要的折线扩展和缩小时消失

> ID：15706458
> 
> 赞同：1
> 
> 时间：2013-03-29T15:40:09.013
> 
> 标签：android, google-maps

我使用折线 API 连接了地图位置。它可以正确创建折线。但有时放大时不需要的折线会延伸，缩小时会消失。

**我的代码：**

```
locations.clear();
            for(int i=0;i<maplatitude.size();i++)
            {
                locations.add(new LatLng(maplatitude.get(i), maplongitude.get(i)));
            }

            PolylineOptions rectOptions = new PolylineOptions();
            rectOptions.addAll(locations);

            // Get back the mutable Polyline
            Polyline polyline = mMap.addPolyline(rectOptions);

            for(int i=0;i<maplatitude.size();i++)
            {
                //mMap.addMarker(new MarkerOptions().position(new LatLng(maplatitude.get(i), maplongitude.get(i))).title(name).snippet(mapdate.get(i)+"\n"+maptime.get(i)));
                mMap.addMarker(new MarkerOptions().position(new LatLng(maplatitude.get(i), maplongitude.get(i))).icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE)).title(String.valueOf(i)));
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T04:23:50.563

我解决了这个问题：这是谷歌的一个错误。我们必须过滤 1 米或 2 米范围内的一些近距离点。

[折线出现在地图上不应该出现的地方](https://stackoverflow.com/questions/17422314/polylines-appearing-on-map-where-they-shouldnt)

# java - HTTP POST 请求发送 403 错误。无效的方法签名

> ID：15706464
> 
> 赞同：3
> 
> 时间：2013-03-29T15:40:36.713
> 
> 标签：java, post, http-headers, last.fm

好吧，这真的很令人沮丧。我使用我的 API 密钥非常好。身份验证很好，生成令牌很好，会话密钥也可以。

但是当我运行时[`playlist.create`](http://www.last.fm/api/show/playlist.create)，播放列表没有创建。

*附录（2013 年 4 月 6 日）：原来我必须为我的 sig 生成一个新的 md5 哈希，但即使这样做了，该方法也不起作用。*

*附录 2（2013 年 4 月 9 日）：我今天几乎从头开始，并重新编写了大部分代码。我成功创建了 16 个播放列表，没有错误。但是今天，相同的代码不起作用。我根本没有碰它，但是错误。*

非易失性

* * *

出于安全考虑，我无法向您展示我的安全密钥。但是，我确实编写了一个快速程序来查找 last.fm 会话密钥：[http](http://github.com/thekarangoel/LastFMSessionKeyFinder) ://github.com/thekarangoel/LastFMSessionKeyFinder 只需在 last.fm/api 注册，在程序中输入您的 API 密钥和密码，您将拥有测试 API 调用所需的一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:54:41.190

### 我的第一个答案

您没有在散列签名中包含描述。

### 我的第二个回答

如前在我的一条评论中所述，您的代码导致`MalformedURLException`. 您看不到这一点，因为您没有在`SwingWorker`子类中进行异常处理。如果您[按照此处的建议](https://stackoverflow.com/questions/6523623/gracefull-exception-handling-in-swing-worker#6524300)添加异常处理，您会看到。

### 我的第一个答案

您`&`的参数列表中缺少一个：

```
String params = "method=playlist.create&title=" + title+ "api_key=" + ... 
```

应该

```
String params = "method=playlist.create&title=" + title+ "&api_key=" + ... 
```

It's probably a good idea to read the answer of the request (`connection.getInputStream()` etc.) and check what the issue is.

# python - 从文件中获取数据并将其放入数组

> ID：15706465
> 
> 赞同：0
> 
> 时间：2013-03-29T15:40:40.210
> 
> 标签：python, arrays, file

```
with open('rules_test1Fold0w4_sample00ll1.dat') as fileobj:
    lines = list(fileobj)
actualrules=''
for index in sortrule:
    print lines[index] 
```

我有这段代码可以打印出 .dat 文件的某些行，但是我想要做的是让每一行成为数组中的一个元素。例如，如果我的文件中有这个

```
`'Once upon a time there was a young
  chap of the name of Peter he had a
  great friend called Claus'` 
```

该数组将是`[Once upon a time there was a young,chap of the name of Peter he had a,great friend called Claus]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:45:12.387

您发布的代码将输入文件的行放入`list`.

```
>>> with open('/etc/passwd') as fileobj:
...   lines = list(fileobj)
... 
>>> type(lines)
<type 'list'>
>>> lines[0]
'root:x:0:0:root:/root:/bin/bash\n'
>>> 
```

此外，您发布的代码应用了某种选择过滤器，打印出`sortrule`. 如果您想将*这些*行存储在 a 中`list`，请尝试列表推导：

```
selected_lines = [lines[index] for index in sortrule] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:47:43.933

你可以做这样的事情。

```
with open('rules_test1Fold0w4_sample00ll1.dat') as fileobj:
    lines = fileobj.readlines()
actualrules=''
for index in sortrule:
    print lines[index] 
```

这会给你一个由 \n 分隔的行列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:52:37.840

在您的情况下，您只需要一个一维数组，因此列表就足够了。并且您的代码已经将每一行存储到列表变量行中。

# entity-framework - 如何在 mvc4 中分离调试和释放连接等

> ID：15706477
> 
> 赞同：3
> 
> 时间：2013-03-29T15:41:12.963
> 
> 标签：entity-framework, deployment, release, release-management, profiles

所以我是相当新的 MVC4，许多模式对我来说都是新的。

然而，我很好奇的一件事是关于发布/调试模式的最佳实践。对我来说，实时模式和调试模式之间有很多不同之处，我希望它们都是自动的，所以我不需要更改任何内容即可发布。

因此，例如，我在我的 repo（域项目）公共类 EFAccountRepository 中做了这样的事情： IAccountRepository { private EFDbContext _context;

```
 public EFAccountRepository()
    {
#if DEBUG
        _context = new EFDbContext("name=Debug");
#else
        _context = new EFDbContext("name=Live");
#endif
    } 
```

在我的 DI (webui) 中像这样

```
#if DEBUG
        EFDbContext efcontext = new EFDbContext("name=Debug");
#else
        EFDbContext efcontext = new EFDbContext("name=Live");
#endif 
```

或者简单地拥有会更聪明吗

```
EFDbContext efcontext = new EFDbContext("name=MyApp"); 
```

然后用 web.config 改变 myApp 是什么意思？

任何其他自动化调试/发布发布的技巧都受到热烈欢迎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T17:59:12.523

我强烈建议不要将连接字符串硬编码到代码中。请考虑将您的代码指向 web.config 转换。您可以在此处添加连接字符串，并根据代码版本应用适当的转换，因此您只需在应用程序中使用以下代码一次即可覆盖所有环境。

```
ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString 
```

在调试版本中，您可能会有类似的东西

```
<configuration xmlns:xdt="...">
    <connectionStrings>
      <add name="MyConnectionString" connectionString="debugstring"
         providerName="debugprovider" />
     </connectionStrings>
</configuration> 
```

在您的发布版本中，您可以告诉转换替换旧字符串

```
<configuration xmlns:xdt="...">
    <connectionStrings>
      <add name="MyConnectionString" connectionString="newstring"
         providerName="newprovider"
         xdt:Transform="Replace" />
     </connectionStrings>
</configuration> 
```

如需更多参考，请查看 [http://msdn.microsoft.com/en-us/library/dd465326.aspx](http://msdn.microsoft.com/en-us/library/dd465326.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-19T17:56:04.523

如果您有多个连接字符串，则所选答案将不起作用。在发布配置中为所有连接字符串添加以下标签

xdt:Transform="SetAttributes" xdt:Locator="Match(name)"

这就是我的 Web 配置文件中的内容

在 Web.Debug.Config

```
<add name="MyConnectionString" 
    connectionString="Data Source=dev;Initial Catalog=DevDB;Integrated Security=True;
    providerName="System.Data.SqlClient"/> 
```

并在 Web.Release.Config

```
<add name="MyConnectionString" 
    connectionString="Data Source=LIVESERVER;Initial Catalog=DB98;Integrated Security=True;
    providerName="System.Data.SqlClient" 
    xdt:Transform="SetAttributes" 
    xdt:Locator="Match(name)"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T17:14:40.767

使用 web.config 转换[http://msdn.microsoft.com/en-us/library/dd465326.aspx](http://msdn.microsoft.com/en-us/library/dd465326.aspx)

# sql-server - 在 SQL 报告中包含 PDF、XLS、DOC 和其他格式

> ID：15706478
> 
> 赞同：1
> 
> 时间：2013-03-29T15:41:14.713
> 
> 标签：sql-server, excel, pdf, reporting-services

我们目前使用 SQL Server Reporting Services 来创建基于 SQL 数据的报告。我们目前能够包含来自 SQL 数据库表的 varbinary(Max) 列的图像。现在在这些表中存储了几种其他格式，包括 PDF 和 MS Word 和 Excel 文档。我们想在最后呈现一份包含这些文档的报告，但我们找不到任何建议，尤其是对于 doc 和 xls 格式的建议。

那可能吗？如果是，如何？谢谢你的帮助 ：）

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-19T19:27:05.887

我在我的项目中遇到了同样的要求，我看到的解决方案是预处理这些嵌入式文档，将它们转换为图像（嵌入式文档中的每页）。然后 SSRS 报告本身将简单地使用图像渲染控件来嵌入这些文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:50:59.560

看起来 iText 可以满足您的所有要求[http://itextpdf.com/](http://itextpdf.com/)

# assembly - 为什么 nasm 告诉我我不能将 AL 移动到 INPUT？

> ID：15706480
> 
> 赞同：1
> 
> 时间：2013-03-29T15:41:18.313
> 
> 标签：assembly, input, x86, nasm

所以我有这个程序：

```
 [BITS 16]
[ORG 7C00h]

    JMP 0:start

start:
    MOV AX, 0
    MOV DS, AX
    MOV ES, AX
    MOV SS, AX
    MOV SP, 7C00h

    MOV SI, Hello
    CALL _puts16
    MOV AL, LogLvl1
    INT 21h
    CALL .getinput
.getinput:
    MOV AH, 2h
    MOV AL, Success ;Echo was successful
    INT 21h
    MOV AH, 1h ;Set AH to 1h, which means character input
    INT 21h
    MOV INPUT, AL ;Store the character in INPUT
    MOV AH, 2h ;Change AH back to 2h, which means character output
    MOV DL, Message ;Move Message to DL, which will be echoed
    INT 21h
    MOV DL, INPUT ;Move the inputed key to DL to be echoed
    INT 21h
    RET
;input= es:si -> string
_puts16:
    PUSHA

.BEGIN:
    LODSB ;Load a single byte
    CMP AL, 0 ;Calculate if that byte is 0, or null
    JE .END ;Jump to end if it is not 0

    MOV AH, 0Eh ;Otherwise, set 24 bit graphics modes
    INT 10h
    JMP .BEGIN

.END:
    POPA
    RET
.define:
    Hello DB "Enter a string: ",0
    Message DB "        Grats! You said",0
    INPUT DB " ",0
    LogLvl1 DB "Calling .getinput...\n",0
    Success DB "Successful.\n",0
times 510 - ($ - $$) db 0

DW 0xAA55 
```

我对汇编非常陌生，我需要将键入的密钥移动到 .define 中定义的字符串变量“INPUT”中，但是网络范围的汇编器给了我一个错误：

> 1.asm:24：错误：操作码和操作数的组合无效

我认为这意味着由于某种原因我无法将 AL 移动到 INPUT，但我不知道为什么。正如我所说，我是组装新手，所以这可能是一些明显的错误。我怎样才能解决这个问题？我需要将键入的字符或键存储在内存中，以便稍后在程序中回显它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:53:28.157

因为您实际上是在尝试将`AL`常量存储到空格字符的地址中。这就像要求汇编器（或编译器）将 2 分配给 1。

Change the instruction to `mov [INPUT], al`.

Looks like you have several instances of this same problem, confusing memory contents with memory addresses.

Also, DOS `int 21h` isn't available at the time when your PC boots a boot sector from a disk. Use BIOS functions (e.g. `int 16h` and `int 10h`) instead.

# c# - 存储库类可以在 ASP.NET 中限定为单例吗

> ID：15706483
> 
> 赞同：2
> 
> 时间：2013-03-29T15:41:32.490
> 
> 标签：c#, asp.net, scope

我试图了解 ASP.NET 应用程序中存储库类的范围。我假设它们在请求范围内是线程安全的，因为每个请求都在单独的线程上运行。但是让它单例怎么样，这是一个有效的场景。

因为这些类没有状态，只有操作数据的方法，所以执行这些方法的不同线程可能有不同的堆栈帧。我的理解是否正确，谁能提供更多见解。

```
interface ICustomerRepository
{
   List<Customers> GetAll();
   Customer GetById(int id);
}

public class Customer : ICustomerRepository
{
   //implement methods

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:18:19.953

将存储库公开为并发环境的单例是一个**坏**主意。

您*可能*以一种可以安全地并发使用的方式实现接口存储库，但这意味着并发一致性的唯一保证在于实现中的某个地方。没有其他机制可以强制并发调用不会失败，编程语言级别的合约（存储库接口）太弱了，无法表达这样的要求。

另一方面，如果每个 http 上下文都有自己的实例，则实现细节无关紧要。

我建议你阅读更多关于对象生命周期的内容。单例只是控制生命周期的更一般概念的一个具体示例。您可以拥有具有瞬态生命周期的对象，在应用程序的生命周期中在单个实例中共享的对象，也可以拥有存在于线程上下文或 http 上下文（可能跨越多个线程）中的对象。控制生命周期的一种方法是拥有一个创建实例的工厂。

如果你需要一些简单的东西，你可以有一些看起来像单例但以任意方式控制生命周期的东西：

[http://netpl.blogspot.com/2010/12/container-based-pseudosingletons-in.html](http://netpl.blogspot.com/2010/12/container-based-pseudosingletons-in.html)

# django - 直接从 django 中的 urls.py 重定向到命名的 url 模式？

> ID：15706489
> 
> 赞同：139
> 
> 时间：2013-03-29T15:41:42.640
> 
> 标签：django, redirect

在 Django 中，如何直接从 urls.py 进行简单的重定向？自然我是一个组织良好的人，支持 DRY 原则，所以我想根据它的命名 url 模式来获取目标，而不是硬编码 url。

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2013-03-29T15:41:57.983

如果你使用的是 Django 1.4 或 1.5，你可以这样做：

```
from django.core.urlresolvers import reverse_lazy
from django.views.generic import RedirectView

urlpatterns = patterns('',
    url(r'^some-page/$', RedirectView.as_view(url=reverse_lazy('my_named_pattern'), permanent=False)),
    ... 
```

如果你使用的是 Django 1.6 或更高版本，你可以这样做：

```
from django.views.generic import RedirectView

urlpatterns = patterns('',
    url(r'^some-page/$', RedirectView.as_view(pattern_name='my_named_pattern', permanent=False)),
    ... 
```

在 Django 1.9 中， 的默认值`permanent`已从 True 更改为 False。因此，如果您不指定`permanent`关键字参数，您可能会看到以下警告：

> RemovedInDjango19警告：在 Django 1.9 中，“RedirectView.permanent”的默认值将从 True 更改为 False。设置一个显式值以使此警告静音。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-12-16T11:06:34.250

这对我有用。

```
from django.views.generic import RedirectView

urlpatterns = patterns('',
    url(r'^some-page/$', RedirectView.as_view(url='/')),
    ... 
```

在上面的示例`'/'`中意味着它将重定向到索引页面，您也可以在其中添加任何 url 模式。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2018-09-03T12:24:56.300

对于 django v2+

```
from django.contrib import admin
from django.shortcuts import redirect
from django.urls import path, include

urlpatterns = [
    # this example uses named URL 'hola-home' from app named hola
    # for more redirect's usage options: https://docs.djangoproject.com/en/2.1/topics/http/shortcuts/
    path('', lambda request: redirect('hola/', permanent=False)),
    path('hola/', include("hola.urls")),
    path('admin/', admin.site.urls),
] 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-02-26T12:35:14.650

如果您不支持 RedirectView，旧版本的 django 支持这种方式

在视图.py

```
def url_redirect(request):
    return HttpResponseRedirect("/new_url/") 
```

在 url.py

```
url(r'^old_url/$', "website.views.url_redirect", name="url-redirect"), 
```

您可以通过使用使其永久化`HttpResponsePermanentRedirect`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-12-17T22:58:41.977

我试图将所有 404 重定向到主页，以下效果很好：

```
from django.views.generic import RedirectView
...
under urlpatterns, added:
    url(r'^.*/$', RedirectView.as_view(url='/home/')),
    url(r'^$', RedirectView.as_view(url='/home/')), 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-10T06:01:51.637

您可以直接在 urls.py 上执行以下操作：

```
url(r'^story/(?P<pk>\d+)/',
        lambda request, pk: HttpResponsePermanentRedirect('/new_story/{pk}'.format(pk=pk))) 
```

只需确保您准备好接收重定向的新 URL！另外，请注意重定向的类型，在我使用**永久重定向的示例中**

# php - codeigniter 如何在此查询中设置 where 条件并加入我的第二张表

> ID：15706493
> 
> 赞同：2
> 
> 时间：2013-03-29T15:41:53.543
> 
> 标签：php, mysql, codeigniter

这是我的查询

在这个查询中...我想加入 tow table(table1, table2) 作为第二个查询

**第一次查询**

```
 $q = $this->db->select('*')
             ->from('table')
             ->limit($limit, $offset)
             ->order_by($sort_by, $sort_order); 
```

我想在上面的查询中进行这样的向下工作，但是在上面的查询中是否可行..当不更改查询的布局时....？

**第二个查询**这个连接工作正常我希望第一个查询与第二个查询相同

```
 $this->db->select('*');
            $this->db->from('table1');
            $this->db->join('table2', 'table1.t_id', 'table2.id');
            $this->db->limit(9);
            return $this->db->get()->result(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:22:53.497

不确定我是否抓住了您需要的东西，但是如果需要进行简单的连接，请按照每秒查询使用活动记录：

```
$q = $this->db->select('*')
             ->from('table')
              ->join('table2', 'table.t_id', 'table2.id')
             ->limit($limit, $offset)
             ->order_by($sort_by, $sort_order); 
```

也许我没有发现你的麻烦，但问题肯定不清楚

# c# - 如何列出实现抽象类和接口（C#）的东西？

> ID：15706496
> 
> 赞同：4
> 
> 时间：2013-03-29T15:41:57.030
> 
> 标签：c#, generics

假设我有坦克、飞机和许多其他东西的列表，它们实现的最常见的东西是 IHaveLocation 和抽象类和 IHaveColor 接口。

我想列出它们，因为我需要在这两个接口的基础上查询列表。

我该怎么做 ？

*   我可以制作一个对象列表，然后编写 (obj as IHaveLocation) 并使用他的方法，以及 (obj as IHaveColor) 并使用他的方法。但这非常非常难看！
*   我可以列出IhaveLocation，然后我只需要做一个（obj as IHaveColor）。但这也很可怕
*   我可以创建一个新的抽象类，然后从两者继承，但我试图避免它。

这有什么诀窍吗？

我想做类似的东西`List<IHaveLocation and IHaveColor>`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T15:44:08.130

您可以将其包装在具有两种类型约束的泛型类中：

```
public class YourClass<T> where T : IHaveLocation, IHaveColor
{
    List<T> items = new List<T>;

    public void Add(T item)
    {
        items.Add(item);
    }
    // ...
} 
```

然后，此类中的方法可以根据需要使用这两个接口，因为该类型保证实现它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:47:23.033

正如我在里德回答的评论中提到的，您可以使用通用方法来允许您添加坦克和飞机。像这样的东西：

```
class TwoTypesList<T1, T2>
{
    List<Tuple<T1, T2>> m_list = new List<Tuple<T1,T2>>();

    public void Add<ConcreteT>(ConcreteT item) where ConcreteT : T1, T2
    {
        m_list.Add(Tuple.Create<T1, T2>(item, item));
    }
} 
```

那么用法将是：

```
 TwoTypesList<IHaveColor, IHaveLocation> list = new TwoTypesList<IHaveColor, IHaveLocation>();
        Airplane a = new Airplane();
        Tank t = new Tank();
        list.Add(a);
        list.Add(t); 
```

当然，缺点是您将对象存储两次。如果您不喜欢这样，那么您当然可以将列表的内部存储更改为对象或仅其中一个接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:45:14.767

你可以尝试类似的东西：

```
public class YourClass<T> where T : Ihavelocation, ihavecolor{
    List<T> items = new List<T>;

    public void Add(T item){
        items.Add(item);
    }

} 
```

# xml - XML 和 XSLT 将输出写入文本文件

> ID：15706498
> 
> 赞同：6
> 
> 时间：2013-03-29T15:41:58.263
> 
> 标签：xml, xslt, output

我正在尝试在 XSLT 中使用增量。并将输出写入txt文件。这是我的代码： Xslt 代码：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
    <xsl:output method="text"/>
    <xsl:result-document href="foo.txt" method=text />
    <xsl:template match="/">
    </xsl:template>

  <xsl:template match="/build/build">
    <xsl:variable name="buildNumber" select="."/>
    <xsl:element name="build">
      <xsl:value-of select="$buildNumber + 1"/>
    </xsl:element>
  </xsl:template>

  <xsl:template match="/|@*|node()">
    <xsl:value-of select="build/major"/>
    <xsl:value-of select="build/minor"/>
    <xsl:value-of select="build/build"/>
    <xsl:value-of select="build/release"/>
      <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>  
  </xsl:template>
</xsl:stylesheet> 
```

XML 代码是：

```
 <?xml version="1.0" encoding="utf-8"?>
    <?xml-stylesheet type="text/xsl" href="E:\Build\genVer.xsl"?>
    <build>
        <major>1.</major><minor>0.</minor><build>0</build><release>.0</release>
    </build> 
```

我尝试使用`<xsl:result-document>`它给出了错误，说`<xsl:result-document>`不能是`<xsl:stylesheet>`or的子级`<xsl:template>`。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T16:44:22.257

您的方法`<xsl:result-document>`非常合理。唯一的问题是您的样式表是 XSLT 1，而`<xsl:result-document>`您需要 XSLT 2。XSLT 作为一种函数式语言与这个问题无关。

如有必要，请发布您使用的 XSLT 代码，`<xsl:result-document>`我会为您修复它。

编辑：

在这里，您的代码进行了必要的更改。部分原始代码，例如`method="text"`表明您希望结果是文本文件，而`<xsl:element>`看起来您正在尝试输出 XML 文件，所以我为两者编写了代码。如前所述，`<xsl:result-document>`需要 XSLT 2。

这将创建一个 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml"/>

   <xsl:template match="/">
      <xsl:variable name="foldername" select="concat(/build/major, /build/minor, string(/build/build + 1), build/release)"/>
      <xsl:result-document href="{$foldername}/foo.xml" method="xml">
         <xsl:copy>
            <xsl:apply-templates/>
         </xsl:copy>
      </xsl:result-document>
   </xsl:template>

   <xsl:template match="element()">
      <xsl:copy>
         <xsl:apply-templates/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="/build/build">
      <xsl:copy>
         <xsl:variable name="buildNumber" select="."/>
         <xsl:value-of select="$buildNumber + 1"/>
      </xsl:copy>
   </xsl:template>

</xsl:stylesheet> 
```

这将创建一个文本文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text"/>

   <xsl:template match="/">
      <xsl:variable name="foldername" select="concat(/build/major, /build/minor, string(/build/build + 1), build/release)"/>
      <xsl:result-document href="{$foldername}/foo.txt" method="text">
         <xsl:apply-templates/>
      </xsl:result-document>
   </xsl:template>

   <xsl:template match="element()">
      <xsl:apply-templates/>
   </xsl:template>

   <xsl:template match="/build/build">
      <xsl:variable name="buildNumber" select="."/>
      <xsl:value-of select="$buildNumber + 1"/>
   </xsl:template>

</xsl:stylesheet> 
```

如您所愿，输出文件在名称为版本的文件夹中创建，但请注意该文件夹必须事先存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-20T12:02:06.430

在我的环境中不支持 XSLT 2.0，所以我想出了以下解决方法：

```
#!/usr/bin/zsh

. =(xsltproc =(<<'XSLT_'
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text"/>
   <xsl:strip-space elements="*"/>

<xsl:template match="/SummitFTMonitor/messages">
  <xsl:variable name="key" select="Key/text()"/>

<![CDATA[cat <<'IJEBVNKCEUJGHKLO' > ]]><xsl:value-of select="$key"/>_response.xml
<xsl:value-of select="Response"/>
IJEBVNKCEUJGHKLO

</xsl:template>
</xsl:stylesheet>
XSLT_) $*) 
```

基本上，在这个 zsh 脚本中，XSLT 用于生成如下语句

```
cat <<'XXXXX' > file_name
the value of nodes, etc ....
XXXXX 
```

然后这些语句由 zsh 获取，从而创建文件。

# java - 与 wiFly 通信时出现连接错误

> ID：15706501
> 
> 赞同：0
> 
> 时间：2013-03-29T15:42:13.110
> 
> 标签：java, android, sockets

我正在尝试在我的 android 设备和[wiFly](https://www.sparkfun.com/products/9954 "飞翔") (RN-171) 模块之间建立通信。我在 android 设备上创建了一个 ad-hoc 网络并将 wiFly 连接到网络。wiFly 配置为监听 169.254.1.1:2000。我在应用程序中创建套接字以与 wiFly 通信。代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;
import android.os.Bundle;
import android.os.StrictMode;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
            .permitAll().build();
    StrictMode.setThreadPolicy(policy);

        Socket echoSocket = null;
        PrintWriter out = null;
        BufferedReader in = null;

        try {
            echoSocket = new Socket("169.254.1.1", 2000);
            out = new PrintWriter(echoSocket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(
                                    echoSocket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: wiFly.");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for "
                           + "the connection to: wiFly.");
        }

    BufferedReader stdIn = new BufferedReader(
                               new InputStreamReader(System.in));
    String userInput;
    while ((userInput = stdIn.readLine()) != null) {
        out.println(userInput);
        System.out.println("echo: " + in.readLine());
    }
        out.close();
    in.close();
    stdIn.close();
    echoSocket.close();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

很抱歉使用严格模式。一旦运行，将切换到 AsyncTask。以下是警告信息：

```
03-29 21:55:40.352: W/AdHoc(15118): failed to connect to /169.254.1.1 (port 2000): connect failed: ENETUNREACH (Network is unreachable)
03-29 21:55:40.352: W/System.err(15118): java.net.ConnectException: failed to connect to /169.254.1.1 (port 2000): connect failed: ENETUNREACH (Network is unreachable)
03-29 21:55:40.362: W/System.err(15118):    at libcore.io.IoBridge.connect(IoBridge.java:114)
03-29 21:55:40.362: W/System.err(15118):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
03-29 21:55:40.362: W/System.err(15118):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
03-29 21:55:40.362: W/System.err(15118):    at java.net.Socket.startupSocket(Socket.java:566)
03-29 21:55:40.362: W/System.err(15118):    at java.net.Socket.tryAllAddresses(Socket.java:127)
03-29 21:55:40.362: W/System.err(15118):    at java.net.Socket.<init>(Socket.java:177)
03-29 21:55:40.362: W/System.err(15118):    at java.net.Socket.<init>(Socket.java:149)
03-29 21:55:40.362: W/System.err(15118):    at com.example.udp.MainActivity.onCreate(MainActivity.java:33)
03-29 21:55:40.362: W/System.err(15118):    at android.app.Activity.performCreate(Activity.java:4492)
03-29 21:55:40.362: W/System.err(15118):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-29 21:55:40.362: W/System.err(15118):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
03-29 21:55:40.362: W/System.err(15118):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
03-29 21:55:40.372: W/System.err(15118):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
03-29 21:55:40.372: W/System.err(15118):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
03-29 21:55:40.372: W/System.err(15118):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 21:55:40.372: W/System.err(15118):    at android.os.Looper.loop(Looper.java:137)
03-29 21:55:40.372: W/System.err(15118):    at android.app.ActivityThread.main(ActivityThread.java:4424)
03-29 21:55:40.372: W/System.err(15118):    at java.lang.reflect.Method.invokeNative(Native Method)
03-29 21:55:40.372: W/System.err(15118):    at java.lang.reflect.Method.invoke(Method.java:511)
03-29 21:55:40.382: W/System.err(15118):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-29 21:55:40.382: W/System.err(15118):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-29 21:55:40.382: W/System.err(15118):    at dalvik.system.NativeStart.main(Native Method)
03-29 21:55:40.382: W/System.err(15118): Caused by: libcore.io.ErrnoException: connect failed: ENETUNREACH (Network is unreachable)
03-29 21:55:40.382: W/System.err(15118):    at libcore.io.Posix.connect(Native Method)
03-29 21:55:40.382: W/System.err(15118):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
03-29 21:55:40.382: W/System.err(15118):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
03-29 21:55:40.382: W/System.err(15118):    at libcore.io.IoBridge.connect(IoBridge.java:112)
03-29 21:55:40.382: W/System.err(15118):    ... 21 more
03-29 21:55:40.392: W/System.err(15118): Couldn't get I/O for the connection to: wiFly. 
```

我在 android 4.0.4 上运行它，并且在 Manifest 文件中包含了所有必要的权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T22:07:29.810

您不能将 1.2.3.4 用于任何设备。1.2.3.4 是真实世界的 IP 地址，位于澳大利亚。任何创建默认 IP 地址为 1.2.3.4 的设备的工程师都是白痴。您不能随意选择一个数字作为 IP 地址；这不是它的工作原理。

我的 WiFly RN-171XV 文档告诉我，在升级到 v4.40 固件并恢复出厂设置后，处于硬件 AP 模式的设备的默认 IP 地址为 1.2.3.4，但它在该地址没有响应，并且DHCP 服务器不响应任何请求。

因此，我完全失去了与设备的联系。它在 Tx/Rx 上也没有响应。

在旧固件 v2.30 下，Ad Hoc 模式默认 IP 地址为 169.254.1.1，这是在没有 DHCP 的情况下为自分配而保留的链路本地地址，事实并非如此。在这种情况下，您不能使用链接本地地址作为默认地址。

上述情况清楚地表明，编写固件的所谓工程师对 Internet 协议一无所知。就硬件而言，这似乎是一个很棒的设备，但固件显然是由智障人士编写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T23:19:19.467

你的手机有什么IP地址？

您需要将手机配置为与 wifly 模块具有相同范围的 IP 地址，或者让 wifly 通过其 dhcp 服务器为您提供 IP。

如果您尚未将固件升级到 v4，那么您可能应该首先这样做，它修复了一些问题，但与 v2 固件相比有一个明显的优势 - 它创建了一个您的设备可以连接的软 AP，并且默认情况下，它会为您提供打电话给一个IP地址。然后，您将能够连接到它而几乎没有问题。

[流动网络升级信息](http://www.rovingnetworks.com/FAQs/How_do_I_upgrade_to_WiFly_v4_00_from_earlier_WiFly_versions "如何从早期的 WiFly 版本升级到 WiFly v4.00？")

作为在软 ap 模式下运行的旁注，wifly 的 IP 地址为 1.2.3.4 - 不知道他们为什么选择它：/

# ada - ada 95 Put (Item : in String) vs Put (String)

> ID：15706504
> 
> 赞同：0
> 
> 时间：2013-03-29T15:42:22.303
> 
> 标签：ada

在 Ada 95 中，Put (Item : in String) 和 Put (String) 之间有什么区别吗？还是它们完全一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:50:20.770

一个是声明的一部分，另一个看起来像是格式错误的调用（类型名称应该是变量名称）

另一方面，两者没有区别

`Put (Item => MyString)`

和

```
Put (MyString) 
```

除了前者使用“命名关联”，后者使用“位置关联”。

在这个简单的例子中，命名关联并没有真正的优势，但是当参数更多时，它可以避免严重的错误。

找出这些之间的区别，例如：

```
Set_Autopilot(15000, -500); 
```

和

```
Set_Autopilot(Climb_Rate => 15000, Altitude => -500); 
```

哎哟!

# mysql - 提供对 MySQL 数据库中一张表的完全 rw 访问权限

> ID：15706507
> 
> 赞同：0
> 
> 时间：2013-03-29T15:42:25.063
> 
> 标签：mysql, sql, grant

我需要授予用户读取特定数据库表的权限以及对其中之一的 RW 访问权限。

我做了诸如

```
 GRANT SELECT ON database.* TO 'someuser'@'somehost';
 GRANT SELECT,INSERT,UPDATE,DELETE ON database.rwtable TO 'someuser'@'somehost'; 
```

但是现在我（使用 phpmyadmin）可以访问数据库表，但是所有表，包括我要求具有插入权限的表，都是只读的。

请建议如何分配正确的权利，Askar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:55:44.867

[餐桌特权](http://dev.mysql.com/doc/refman/5.0/en/grant.html)

根据您的需要更改您的 databasename.table。

表权限适用于给定表中的所有列。要分配表级权限，请使用 ON db_name.tbl_name 语法：

```
GRANT ALL ON mydb.mytbl TO 'someuser'@'somehost';
GRANT SELECT,INSERT,UPDATE,DELETE ON mydb.mytbl TO 'someuser'@'somehost'; 
```

# java - Appengine 无法从数据存储中检索实体

> ID：15706508
> 
> 赞同：2
> 
> 时间：2013-03-29T15:42:32.597
> 
> 标签：java, google-app-engine

我把 appengine 全部设置好了，它在我的本地主机上工作，我打电话

```
Entity greeting3 = new Entity(KeyFactory.createKey("World", "world3"));
greeting3.setProperty("raw", "2.2 # # # .");
datastore.put(greeting3); 
```

添加我的实体，我可以在控制台中看到它们添加。然后我用

```
Query q = new Query("World");
PreparedQuery pq = datastore.prepare(q);
for (Entity result : pq.asIterable()) {
    resp.getWriter().println(result);
} 
```

检索实体。它在本地主机上完美运行，但在服务器上我无法接收所有添加实体的列表。尽管使用第一个代码，它们确实被添加了。我也用

```
e = datastore.get(KeyFactory.createKey("World", req.getParameter(k)));
resp.getWriter().println(e.getProperty("raw")); 
```

在 localhost 上它也可以正常工作，但在互联网上，它会抛出“未找到实体异常”。我试过手动添加数据存储索引，但没有帮助。我整天都在工作，现在真的让我很不高兴:(我也很确定昨天它工作了......请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:22:23.790

如果您在将实体放入数据存储区后很快运行查询，则此问题可能是因为应用引擎数据存储区不是“[立即一致](http://en.wikipedia.org/wiki/Immediate_consistency)的”。它是“[最终一致](http://en.wikipedia.org/wiki/Eventual_consistency)的”

您可以通过在运行查询之前等待几秒钟（也许 10？）来测试它。

如果这是错误，那么您应该查看[文档中的应用引擎数据存储概述](https://developers.google.com/appengine/docs/java/datastore/overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:08:25.287

我也遇到过这种情况，如果不是`req.getParameter(k)`您所期望的，那么您只需要再次运行查询。数据存储不是很快，这就是为什么有 Memcache。

如果您希望您的应用程序立即提供数据，则必须使用 Memcache API 将其“缓存”。

# c# - 您将如何发出类型的默认值？

> ID：15706509
> 
> 赞同：5
> 
> 时间：2013-03-29T15:42:36.423
> 
> 标签：c#, reflection, reflection.emit

我想实现一个自动清除所有本地字段的接口，到目前为止我有：

```
// Implement IClearable
dynamicType.AddInterfaceImplementation(typeof(IClearable));

MethodBuilder clearnMethodBuilder = dynamicType.DefineMethod("Clear", MethodAttributes.Public | MethodAttributes.Virtual, CallingConventions.Standard);
ILGenerator clearMethodILGen = clearnMethodBuilder.GetILGenerator();

foreach (FieldBuilder localField in fields)
{
    clearMethodILGen.Emit(OpCodes.Ldarg_0);
    clearMethodILGen.Emit(OpCodes.Ldfld, localField);
    clearMethodILGen.Emit(OpCodes.??, Profit??);
}

clearMethodILGen.Emit(OpCodes.Ret); 
```

如何设置最后一步以在字段上保存默认值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:27:36.537

就像是：

```
clearMethodILGen.Emit(OpCodes.Ldfld, localField);
clearMethodILGen.Emit(OpCodes.Initobj, localField.FieldType); 
```

# windows - 通过 http 流式传输游戏视频的最佳免费解决方案？

> ID：15706511
> 
> 赞同：-1
> 
> 时间：2013-03-29T15:42:40.637
> 
> 标签：windows, video, streaming, embedded-resource

2 年前，我尝试使用 Adob​​e Flash Media Server 和 Adob​​e Media Encoder 设置流媒体服务器。那时他们仍然是免费的 IIRC。我使用虚拟相机软件捕捉游戏画面，并使用 Media Encoder 使用 H.264 编解码器对其进行编码。然后将流发送到远程 Windows 服务器上运行的 adobe Flash Media Server。通过在我的网站上嵌入 Flash 播放器，访问者可以看到直播。

但是现在 Adob​​e Flash Server 不再免费了。我想知道是否有可以免费使用的等效视频流解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:42:07.063

我认为 FFMpeg 和 FFServer 是最适合您的解决方案。
它是免费、强大且开源的项目。

# java - 替换文本末尾的额外字符

> ID：15706512
> 
> 赞同：15
> 
> 时间：2013-03-29T15:42:43.163
> 
> 标签：java, php, regex, pcre

在 PHP 和 Java 中，我申请`/^[^\pL]*|[^\pL]*$/`了 ‍‍‍<code>-A- 并获得了`*A**`. 我应用了对称图案并得到了不对称的结果！为什么？我想知道为什么它的输出不是`*A*`？

模式说字符串末尾除了字母之外的所有东西都应该替换为`*`，它也是贪婪的，应该将所有非字母的东西一起替换。

RegexBuddy 中的 Alos 注释我明白`*A*`这是我所期望的。

**更新：**我简化了问题以集中我的主要关注点。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-29T16:21:52.227

```
#^[^\pL]+|[^\pL]+$#u 
```

替换`*`为`+`。`*`与预期结合使用并不`$`完全有效。在正则表达式引擎如何工作的一个奇怪结果中，`X*$`将找到*两个*匹配的`X*`. 使用`+`修复它。

### 解释

```
[^\pL]*$ 
```

让我们看一下正则表达式的这一部分，即没有按预期工作的部分。为什么它`*`在一些字符串的末尾放了两个？

1.  `---A---`考虑替换第一组破折号后的第三个示例字符串：

    ```
    *A---$ 
    ```

2.  正则表达式引擎在这里找到正则表达式的匹配项：

    ```
    *A---$
      ^ 
    ```

3.  并用`"---"`星号替换：

    ```
    *A*$
      ^ 
    ```

4.  然后它将其内部光标移动到替换字符串的右侧。

    ```
    *A*$
       ^ 
    ```

5.  它从这个光标位置开始并寻找另一个匹配。它找到了一个！它找到了`""`——空字符串！`""`由 0 个或多个非字母 ( `[^\pL]*`) 组成，并且它锚定在字符串 ( ) 的末尾`$`，因此它是有效匹配。它确实找到了空字符串，但这是允许的。

    这是出乎意料的，因为它`$`再次匹配了锚。那不是错了吗？`$`它不应该再次匹配，不是吗？好吧，实际上，它应该而且确实如此。它可以再次匹配`$`，因为`$`它不是输入字符串中的实际字符——它是一个零宽度断言。它不会被第一次替换“用完”。`$`允许匹配两次。

6.  因此，它`""`用星号“替换”空字符串。这就是为什么你最终会得到两个星号。

    ```
    *A**$
       ^ 
    ```

7.  如果正则表达式引擎返回到第 4 步，它将找到另一个空字符串并添加另一个星号。从概念上讲，那里有无数个空字符串。为了避免这种情况，引擎不允许下一场比赛在与前一场比赛相同的位置开始。此规则可防止它进入无限循环。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-29T15:53:53.760

正确的正则表达式是这样的：

```
$arr = preg_replace('#^[^\pL]+|[^\pL]+$#','*', 
           array('A','-A-','---A---','-+*A*+-','------------A------------')); 
```

注意`+`而不是`*`. 这将给出输出：

```
Array
(
    [0] => A
    [1] => *A*
    [2] => *A*
    [3] => *A*
    [4] => *A*
) 
```

PS：请注意，由于A 前后没有**非字母字符，因此第一个元素将保持不变。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T19:30:58.210

**试一试：**
在代码之后和代码主体中都给出了解释——作为注释。

```
<?php
class String
{
    private $str;
    public function __construct($str)
    {
        $this->str=$str;
    }
    public function replace($regex,$replacement)
    {
        return preg_replace($regex,$replacement,$this->str);
    }
}

function String($str)
{
    return new String($str);
}

echo String('A')->replace('/^[^\pL]*|[^\pL]*$/','*').'<br />';//Outputs *A*
 //Why does this output *A* and not A?
 //Because it successfully matches an empty string
 //The easiest way to test for the presence of an empty string is like so:
echo String('A')->replace('//','*').'<br />';//Outputs *A*
 //The engine begins by placing its internal pointer before the string like so:
 // A
 //^
 //It then tests the regular expression for the empty string ""
 //Most regular expressions will fail this test. But in our case matches it successfully.
 //Since we are preforming a search and replace the "" will get replaced by a "*" character
 //Then the internal pointer advances to the next character after its successful match
 // A
 // ^
 //It tests our regular expression for the A character and it fails.
 //Since we are performing a search and replace the searched "A" portion remains unchanged as "A"
 //The internal pointer advances to the next character
 // A
 //  ^
 //It tests our regular expression for the empty string ""
 //Again, most regular expressions will fail this test. But since ours successfully matched it,
 //The "" portion will get replaced by "*"
 //The engine then returns our output:
 //*A*
echo '<hr />';
 //If we wanted to replace the A character too, we'd do this:
echo String('A')->replace('/|A/','*').'<br />';//Outputs ***
 //Or we could do:
echo String('A')->replace('/.*?/','*').'<br />';//Outputs ***
 //Thus we see for a 1 character string the engine will test for the empty spaces "" before and after the character as well
 //For a 19 character string it tests for all the gaps between each character like so:
echo String('19 character string')->replace('//','*').'<br />';//Outputs *1*9* *c*h*a*r*a*c*t*e*r* *s*t*r*i*n*g*
 //For an empty string it would match once successfully like so:
echo String('')->replace('//','*').'<br />';//Outputs * 
```

`echo String('A')->replace('/^[^\pL]*|[^\pL]*$/','*');//Outputs *A*`

为什么上面的输出`*A*`而不是`A`？
因为这个正则表达式会**成功**匹配一个空字符串`""`。
使用空的正则表达式会观察到相同的行为，如下所示：
`echo String('A')->replace('//','*');//Outputs *A*`

我现在将**解释** *为什么*正则表达式*引擎*实现会产生这些奇怪的结果。之后你会明白他们一点也不奇怪，而是正确的行为。

引擎首先将其**内部指针**放在字符串之前，如下所示：

```
 A
_ _ _
^ 
```

由于指针指向空字符串`""`，因此它会根据我们的正则表达式对其进行测试。
大多数正则表达式将无法通过此测试，因为满足正则表达式所需的最少字符数通常是一个或多个。但在我们的例子中，匹配是**成功**的，因为 0 个字符是对我们正则表达式的有效匹配。
由于我们正在执行搜索和替换，因此`""`将替换为`"*"`字符。
然后**内部指针**在成功匹配后前进到**下一个字符：**

```
 A
_ _ _
  ^ 
```

它测试我们的字符的正则表达式`"A"`并且它**失败**了。
由于我们正在执行搜索和替换， 当**内部指针**前进到**下一个字符**`"A"`时，搜索的部分保持不变：`"A"`

 ****```
 A
_ _ _
    ^ 
```

它测试我们的正则表达式是否为空字符串`""`
同样，大多数正则表达式将无法通过此测试。
但是由于我们的正则表达式**成功**匹配它，该`""`部分将被*引擎*`"*"`
替换 ，然后**完成**循环我们的字符串并**返回**我们的输出：***`"A"`**`"*A*"`***** 

 *****如果我们也想替换 A 字符，我们会这样做：
`echo String('A')->replace('/|A/','*');//Outputs ***`

或者我们可以这样做：因此我们看到引擎将在字符之前和之后
`echo String('A')->replace('/.*?/','*').'<br />';//Outputs ***`

测试 1 个字符串。 对于 19 个字符的字符串，它会测试每个字符之间的所有间隙，如下所示： 对于空字符串，它会成功匹配一次，如下所示：`""`

`echo String('19 character string')->replace('//','*');`
`//Outputs *1*9* *c*h*a*r*a*c*t*e*r* *s*t*r*i*n*g*`

`echo String('')->replace('//','*');//Outputs *`

我的解释到此结束。要修复您的正则表达式，请按照之前的建议进行操作并使用：
`/^[^\pL]+|[^\pL]+$/`
这将使满足正则表达式所需的最少字符数，从而解决不需要的行为。

最后一点，如果有人想知道`\pL`正则表达式中的作用，它基本上意味着：匹配任何类似字母的字符（而不是数字或符号）。在这里解释： [http ://www.php.net/manual/en/regexp.reference.unicode.php](http://www.php.net/manual/en/regexp.reference.unicode.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T03:43:26.050

```
/^[^\pL]*|[^\pL]*$/  
['A','-A-','---A---','-+*A*+-','------------A------------'] 
```

也许我误解了问题或正则表达式，但看起来它与两个选项之一匹配

选项 1：它匹配`/^`换行符或字符串的开头。然后它匹配一个不是字母的字符零次或多次

所以理论上`-A`, `=A`, `-`,`=-+_+_==-=~````~!@#$A`甚至`=-+_+_==-=~~!@#`会匹配这个。

选项 2：它匹配非字母零次或多次，然后匹配字符串或行的结尾*********

# android - 如何使用 DroidText 在 PDF 文件上添加页眉/页脚？

> ID：15706513
> 
> 赞同：1
> 
> 时间：2013-03-29T15:42:46.510
> 
> 标签：android, pdf, android-droidtext

我想在我的 PDF 的第一页上添加页眉或页脚。我试图在构建文档之后设置它。但是，它是无能为力的。

我也想过通过第一页并在最后删除它。但是，我还没有管理它...... :(

有人有解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T06:40:35.923

以下代码可能对您有用：

**设置标题：**

```
//open the document
doc.open();

//set header
Phrase headerText = new Phrase("This is an example of a Header");
HeaderFooter pdfHeader = new HeaderFooter(headerText, false);
doc.setHeader(pdfHeader); 
```

**设置页脚：**

```
//set footer
Phrase footerText = new Phrase("This is an example of a footer");
HeaderFooter pdfFooter = new HeaderFooter(footerText, false);
doc.setFooter(pdfFooter);

//close doc
doc.close(); 
```

# ios - 删除预填充的数据库

> ID：15706516
> 
> 赞同：0
> 
> 时间：2013-03-29T15:43:09.630
> 
> 标签：ios, objective-c, sqlite, populate

我想删除预填充的数据库，以缩小我的应用程序的大小。我试图删除它，但似乎我无法触摸应用程序的捆绑包。

我尝试时收到此错误：（Cocoa 错误 513。）“无法完成操作。不允许操作”

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:50:14.160

您不能修改应用的捆绑包。它是只读的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:28:44.327

无法修改应用程序包文件夹。它是只读的。

您可以通过应用更新删除该文件。从捆绑包中删除它，然后提交更新。

# c# - var 关键字未显示在 Visual Studio 中

> ID：15706517
> 
> 赞同：0
> 
> 时间：2013-03-29T15:43:10.793
> 
> 标签：c#, visual-studio-2010, intellisense

我已经安装了一个新的 Visual Studio 2010 Premium 实例，当我加载旧项目时，一切似乎都运行良好。但是，当我开始编写新类时，var 关键字不起作用或出现在智能感知中。这是一个新的解决方案，没有网络项目。（所以没有 web.config）项目的目标框架设置为 .net 4.0。当我尝试通过编写来编译它时

```
var x = "this"; 
```

我收到“A get or set accessor expected”错误。

我需要重新安装吗？任何想法这里可能有什么问题？

![在此处输入图像描述](../Images/4cb15d36925bcc30a12429330fe930c4.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T15:44:55.647

您的方法名称后没有括号，因此编译器认为您正在定义一个属性。

```
public void Server_Test()
{
    var ...
} 
```

# android - 在 ListView 中设置 JSON 响应

> ID：15706518
> 
> 赞同：0
> 
> 时间：2013-03-29T15:43:11.037
> 
> 标签：android, json

```
if (status == 200) {
    String result = EntityUtils.toString(response.getEntity());
    Log.d("Response", result);
    ArrayAdapter < String > adapter = new ArrayAdapter < String > (getActivity(),
        android.R.layout.simple_list_item_1, result);
    setListAdapter(adapter);
} 
```

我无法将我的回复设置到我的列表中。我得到我的回应 `{ "Appointments": [{
"Name": "Kevin", }, { "Name": "John", }] }`

我将如何在 listView 中设置我的名称参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:47:43.270

> 我将如何在 listView 中设置我的名称参数。

乍看上去。的第三个参数`ArrayAdapter`应该是集合，但您只传递简单的字符串。根据你`JSON`我推荐你：

*   创建自己的对象，该对象将代表具有属性（姓名、年龄等）的**人**
*   解析`JSON`并创建人员集合
*   将集合设置为 ListAdapter

## 例子：

```
public class Person {

    private String name;
    ...

    // getters and setters

    @Override
    public String toString() {
       return this.name;
    }
} 
```

然后，您需要解析`JSON`并获取正确的数据：

```
List<Person> persons = new ArrayList<Person>();
Person person = null;
JSONObject root = new JSONObject(sourceString);
JSONArray appointments = root.getJSONArray("Appointments");
JSONObject child = null;
for (int i = 0; i < appointments.length(); i++) {
   child = appointments.getJSONObject(i);
   if (child != null)
      person = new Person();
      person.setName(child.getString("Name"));
      persons.add(person);
   }
} 
```

然后初始化`ListAdapter`：

```
new ArrayAdapter<String>(getActivity(), layout, persons); 
```

现在你明白了。

## 笔记：

我覆盖`toString()`方法的原因是，由于您使用带有内置 Android 布局的默认 ArrayAdapter，因此 List 中的每个对象都将转换为 String 并显示在 ListView 中，但如果我不覆盖`toString()`它，它将不会返回人的名称，但对象的字符串表示是人类不可读的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:46:39.077

1.  `result`是一个包含整个响应的字符串。您需要将该字符串解析或拆分为所需的项目。
2.  您需要为您的适配器提供项目（作为列表或数组）。现在您已经创建了一个适配器，但没有通过构造函数或任何 setter 向它提供任何数据。

我建议你在 Android 开发者网站上阅读更多关于 ListViews 和 Adapters 的信息。

# jquery - 使用正则表达式解码 HTML 实体

> ID：15706525
> 
> 赞同：0
> 
> 时间：2013-03-29T15:43:40.660
> 
> 标签：jquery, html, regex, html-entities, html-encode

我有大量的编码文本，如下所示：

```
&#60;div id&#61;&#34;readingPaneContentContainer&#34; class&#61;&#34;ClearBoth&#34;  cmp&#61;&#34;cmp&#34; ulr&#61;&#34;ulr&#34;&#62;&#60;a id&#61;&#34;rpFocusElt&#34; href&#61;&#34;javascript&#58;void&#40;0&#41;&#59;&#34; style&#61;&#34;height&#58;1px&#59;width&#58;1px&#59 
```

我想全部解码，所以有（示例）：

```
<div id="readingPaneContentContainer" class="ClearBoth"..... 
```

可以用正则表达式做吗？

任何帮助，将不胜感激。

卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:25:25.803

看到这个线程 - 它有完美的 jQuery 解决方案：

[如何使用 jQuery 解码 HTML 实体？](https://stackoverflow.com/questions/1147359/how-to-decode-html-entities-using-jquery)

```
var encoded = '&#60;div id&#61;&#34;readingPaneContentContainer&#34; class&#61;&#34;ClearBoth&#34;  cmp&#61;&#34;cmp&#34; ulr&#61;&#34;ulr&#34;&#62;&#60;a id&#61;&#34;rpFocusElt&#34; href&#61;&#34;javascript&#58;void&#40;0&#41;&#59;&#34; style&#61;&#34;height&#58;1px&#59;width&#58;1px&#59';

var decoded = $("<div/>").html(encoded).text(); 
```

不使用正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:55:23.763

类似于以下内容：

```
var regex = /&#(\d{2});/g;
var match;
while(match = regex.exec(myString)) {
    match = match[1];
    myString = myString.substring(0, regex.lastIndex - 5) + convert[match] + myString.substring(regex.lastIndex);
} 
```

可能有效，但必须有更好的解决方案（考虑到 convert 是一个进行转换的对象，例如 80: '<'）。

说明：带有“全局”标志的 regex.exec 允许循环通过正则表达式，regex.lastPoint 的值是指向字符串其余部分的指针（尚未测试）。

**编辑：**
工作。

# c# - C# 最简单的方法从没有视频源对话框的网络摄像头捕获图像

> ID：15706527
> 
> 赞同：2
> 
> 时间：2013-03-29T15:43:52.413
> 
> 标签：c#, webcam

从网络摄像头捕获图像而不显示要求用户确认视频捕获源的对话框的最简单方法是什么？

我不想使用任何第三方库。

我已经阅读了几个答案，比如那个，但对我没有任何帮助：[网络摄像头，视频源对话框出现](https://stackoverflow.com/questions/10721085/webcam-video-source-dialog-comes-up)

这是我当前的源代码：

```
static object GetFrame()
    {
        int mCapHwnd = capCreateCaptureWindowA("WebCap", 0, 0, 0, 100, 100, Process.GetCurrentProcess().MainWindowHandle.ToInt32(), 0);

        // connect to the capture device
        SendMessage(mCapHwnd, WM_CAP_CONNECT, 0, 0);

        // get the next frame
        SendMessage(mCapHwnd, WM_CAP_GET_FRAME, 0, 0);

        // copy the frame to the clipboard
        SendMessage(mCapHwnd, WM_CAP_COPY, 0, 0);

        // disconnect the capture device
        SendMessage(mCapHwnd, WM_CAP_DISCONNECT, 0, 0);

        return Clipboard.GetDataObject();
    } 
```

# autohotkey - 热键重新启动自动热键脚本？

> ID：15706534
> 
> 赞同：8
> 
> 时间：2013-03-29T15:44:16.833
> 
> 标签：autohotkey

假设我`C:\path\to\my\script`正在运行一个自动热键脚本。有没有办法定义一个重新启动它的热键？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T18:28:36.973

为了防止重复实例，我通常不会重新启动脚本，而是使用内置函数[Reload](https://autohotkey.com/docs/commands/Reload.htm)。我使用 + + + 启动它并使用 + + +编辑`Ctrl`主AHK脚本。`Win``Alt``R``Ctrl``Win``Alt``E`

```
^#!r::Reload 
```

实际上，我的脚本如下所示：

```
^#!r::
Send, ^s ; To save a changed script
Sleep, 300 ; give it time to save the script
Reload
Return

^!#e::Edit 
```

事实上，一直到我的脚本顶部，我都有这个给我一个视觉和音频指示脚本已重新启动：

```
#SingleInstance Force
#installKeybdHook
#Persistent
Menu, Tray, Icon , Shell32.dll, 25, 1
TrayTip, AutoHotKey, Started, 1
SoundBeep, 300, 150
Return 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:46:30.513

制作一个运行脚本的热键，在这种情况下是相同的脚本，然后退出。

```
somehotkey::
    Run, C:\path\to\my\script.ahk
    ExitApp
return 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-18T15:23:14.700

I found this to be the safest option of them all, because it takes care that the correct script is reloaded when you have multiple scripts running simultaneously, which was a recurring issue for me. The combination of the following also ensures that only one instance of a script will ever run at a time. The ScriptFullPath variable includes the name of the script.

```
#SingleInstance Force ;put this at the top of the script
^r::run, %A_ScriptFullPath% 
```

# html - 在浏览器上调整文本大小

> ID：15706535
> 
> 赞同：0
> 
> 时间：2013-03-29T15:44:18.137
> 
> 标签：html, css

首先，请原谅我绝对缺乏知识，我是第一次尝试制作网站并且几乎没有接受过培训。.

当浏览器窗口调整大小时，我试图让 div 中的文本垂直调整大小。到目前为止，我已经使用了纯 HTML 和 CSS（愿意使用其他东西来做到这一点，但可能需要一些关于如何实现它的建议！）。

从我读过的内容来看，我认为使用百分比设置宽度和高度标签会起作用，但它仅适用于水平调整大小。div 中的图像会调整大小，但文本链接不会。

我希望 div 的位置是固定的，所以它不会随着页面内容的其余部分滚动。不确定这是否会阻止我调整大小

这是我的 div 的 CSS：

```
#logo {
width:10%;
height:auto;
position:fixed;
top:1%;
left:1%;
text-align:left;
float:left;
font-family:Dekar, arial, serif;
font-size:1.5em;
font-weight:bold;
} 
```

任何帮助表示赞赏。再次为我缺乏知识感到抱歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:05:06.003

由于您愿意使用除 HTML 和 CSS 之外的其他东西，我建议使用 jQuery 这是一个 javascript 库（[jQuery 网站](http://jquery.com)）并下载一个名为 FitText（[网站](http://fittextjs.com)）的插件，它可以调整您的文本大小。

# android - Spongycastle 在 android 上加载时缺少许多算法

> ID：15706536
> 
> 赞同：3
> 
> 时间：2013-03-29T15:44:22.427
> 
> 标签：android, proguard, bouncycastle, spongycastle

在这个 stackoverflow 答案中，您可以看到打印所有可用提供程序和相应算法的代码：[如何找出我的 JVM 支持的算法 [加密]？](https://stackoverflow.com/questions/3683302/how-to-find-out-what-algorithm-encryption-are-supported-by-my-jvm)

我正在使用最新版本的 spongycastle，当我要求**在 android 上**获取 Spongycastle（“SC”）的算法时，我只得到了少数算法。事实上，我得到了这个**非常有限的列表**：

```
provider: SC
algorithm: PBEWITHMD5ANDDES
algorithm: PBEWITHSHA256AND192BITAES-CBC-BC
algorithm: OLDHMACSHA384
algorithm: PBEWITHHMACSHA
algorithm: PBEWITHMD5ANDDES
algorithm: PKCS12PBE
algorithm: PBEWITHSHAAND128BITAES-CBC-BC
algorithm: IES
algorithm: PKIX
algorithm: RFC3280
algorithm: ISO9797ALG3MAC
algorithm: PBEWITHHMACSHA1
algorithm: CERTIFICATE
algorithm: PBEWITHSHAAND40BITRC2-CBC
algorithm: PBEWITHSHA1ANDDES
algorithm: PBEWITHMD5AND256BITA 
```

另一方面，当我要求**在我的 linux 机器上**获取 SC 的算法时，我得到**了更多的算法**。我没有数过它们，但它比你在上面看到的要长 10 倍。

其他所有算法都去了哪里？？

因为这个项目不是一个典型的 android-java 项目，而是一个 Android-Scala 项目，所以我必须在每次执行时使用**Proguard 。**这对缺失的算法有什么作用还是别的什么？

*Note1：我使用 SC 生成密钥对，使用 OpenPGP 加密和解密*

*注2：源代码经过测试，在使用 OpenJDK-6、RSA 算法用于公钥加密和 BLOWFISH 算法作为随机对称密钥的 linux 机器上完美运行*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T20:27:14.630

您可能需要包含 SpongyCastle [OpenPGP API jar](http://search.maven.org/#search%7Cga%7C1%7Cg%3acom.madgag%20AND%20a%3ascpg-jdk15on)，因此请检查您是否包含：

[http://rtyley.github.com/spongycastle/#downloads](http://rtyley.github.com/spongycastle/#downloads)

除此之外，ProGuard 配置问题将是明显的竞争者。尝试在您的 proguard 配置文件中指定类似的内容：

```
-keep class org.spongycastle.** 
```

# android - 为什么 onReceive 在 Android 中不被称为扩展 BroadcastReceiver

> ID：15706537
> 
> 赞同：7
> 
> 时间：2013-03-29T15:44:27.317
> 
> 标签：android, broadcastreceiver

由于某种原因我没有应用任何过滤器或任何东西，没有调用 onReceive 方法，

这是课程：

```
import java.util.ArrayList;
import java.util.Calendar;

import android.content.BroadcastReceiver;
import android.content.Intent;
import android.content.Context;
import android.util.Log;

public class RegisterListener extends BroadcastReceiver {
private final int DELAY_TIME = 5;
private int m_seconds = 0;
private int m_minutes = 0;
private int m_hours   = 0;
static ArrayList<BroadcastReceiverListener> listeners = new ArrayList<BroadcastReceiverListener>();

@Override
public void onReceive(Context context, Intent intent) {

    Log.d("ScreenReceiver Action:",intent.getAction());

    Calendar c = Calendar.getInstance(); 
    m_seconds = c.get(Calendar.SECOND);
    m_minutes = c.get(Calendar.MINUTE);
    m_hours = c.get(Calendar.HOUR);

    for (BroadcastReceiverListener listener:listeners){
           listener.onReceive(m_hours, m_minutes, m_seconds);
        }
}

public static void addBroadcastReceiveListener (BroadcastReceiverListener listener){
    if(!listeners.contains(listener)){
        listeners.add(listener);
    }
}

public void removeBroadcastReceiveListener (BroadcastReceiverListener listener){
    if(listeners.contains(listener)){
        listeners.remove(listener);
    }
} 
```

这是清单中的声明（应用程序的子项）

```
<receiver android:name=".RegisterListener"></receiver> 
```

***编辑：*** 这是我尝试添加的过滤器（在 onReceive() 内）

```
 IntentFilter filter = new IntentFilter(Intent.ACTION_USER_PRESENT);
    BroadcastReceiver mReceiver = new RegisterListener();
    registerReceiver(mReceiver, filter); 
```

我收到一个错误：

```
The method registerReceiver(BroadcastReceiver, IntentFilter) is undefined for the type RegisterListener 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T16:05:57.967

如果您总是想听`ACTION_USER_PRESENT`，请尝试：

```
<receiver android:name=".RegisterListener">
    <intent-filter>
        <action android:name="android.intent.action.USER_PRESENT" />
    </intent-filter>
</receiver> 
```

* * *

**解释**

```
The method registerReceiver(BroadcastReceiver, IntentFilter) is undefined for the type RegisterListener 
```

您必须`registerReceiver()`与上下文一起使用，例如`context.registerReceiver(...)`. **但：**

> 这是我尝试添加的过滤器（在 onReceive() 内）

*在里面* 注册一个接收器是没有意义的，`onReceive()`因为`onReceive()`在你注册一个接收器之前不会运行......所以它永远不会发生。您可以将此代码放入`onCreate()`您的活动中，如下所示：

```
IntentFilter filter = new IntentFilter(Intent.ACTION_USER_PRESENT);
BroadcastReceiver mReceiver = new RegisterListener();
registerReceiver(mReceiver, filter); 
```

这只会`ACTION_USER_PRESENT` *在*您的应用程序已经运行时侦听。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-17T12:09:52.163

```
IntentFilter intentFilter = new IntentFilter();
        intentFilter.addAction(BROADCAST_STARTED_ACTION);
        intentFilter.addAction(BROADCAST_SUCCESS_ACTION);
        intentFilter.addAction(BROADCAST_FAILURE_ACTION);
        LocalBroadcastManager.getInstance(getApplicationContext()).registerReceiver(broadCastReceiver, intentFilter); 
```

# bash - 使用 Bash 通过串行端口进行通信

> ID：15706539
> 
> 赞同：1
> 
> 时间：2013-03-29T15:44:30.570
> 
> 标签：bash, serial-port

我正在尝试使用支票扫描仪将图像文件传输到我的 Mac（该公司仅提供 Windows 驱动程序）。我有技术手册，其中指定了可以发送到设备的所有命令，我首先尝试最基本的命令（闪烁 LED、打印序列号等）。

我已经能够使用“串行工具”成功地与设备通信，但我正在尝试使用 bash 来更好地控制输入/输出并最终编写一个自动化脚本。

在阅读了其他一些帖子并尝试了几件事之后，到目前为止，我已经尝试过：使用 stty 命令和各种标志打开端口，例如：
`stty -f /dev/tty.usbserial-A5002TeW speed 9600 cs8 cread clocal`
`stty -f /dev/tty.usbserial-A5002TeW raw speed 9600 -cstopb -parity -echo`

尝试通过 echo 发送命令：
`echo $'LE 100\cM\cJ' > /dev/tty.usbserial-A5002TeW`
-请注意，串行设备是通过 USB 适配器连接的，但在我为其安装了正确的驱动程序后，它会作为常规串行设备响应（至少在串行工具中）。
--我正在尝试使用 \cM\cJ 字符，因为由于该设备是供 Windows 机器使用的，所以我认为我应该使用它们的控制代码，我尝试了代码的多种排列。

问题：无论发生什么，设备都不会响应（没有闪烁的 LED 灯、没有输出等），并且我的 bash shell 挂起，直到我停止它 (^C)。我知道我可能可以使用 Python 库，而且我最终可能会这样做，但我希望至少看到 bash shell 的一些基本功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:57:59.920

另一种选择是通过在 Mac 上的 VM 中安装 Windows 来尝试使其在 VM（VirtualBox、Fusion、Parallels 等）下工作。

最繁琐的解决方案，因为您必须一直重启，所以将您的 Mac 双重启动到 Windows 中。

最后，我的银行机构在我的 iPhone 上安装了一个应用程序，它只需使用手机中的相机拍摄支票的正面和背面，他们就会接受这种方式。这可能是一种选择。

# ruby-on-rails - 在简单的 Rails 应用程序中是否需要使用数据库？

> ID：15706541
> 
> 赞同：1
> 
> 时间：2013-03-29T15:44:39.977
> 
> 标签：ruby-on-rails

我正在学习 RoR，并且我已经完成了一个基础课程，在该课程中我制作了一个与数据库交互以存储用户和其他模型对象数据的应用程序。

现在我想创建一个简单的应用程序，用户在表单中输入关键字，应用程序从第三方 api 中提取有关该关键字的信息，然后将返回的数据显示给用户。

我不需要保留任何数据以供以后使用。我只想在提交表单时立即显示它？我可以创建一个不与数据库交互的模型类吗？

作为披露，我对持久性的理解来自 iOS 开发。如果用户需要在未来的会话中访问该数据，我需要保留数据。我还不太明白如何在没有数据库的情况下暂时将数据存储在网络上以用于当前会话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:04:08.663

不，如果你不需要它，你不需要使用数据库。但是，请记住，Rails 与数据库和 ActiveRecord 的想法紧密相关。

如果您不想使用数据库，那么您应该编辑`application.rb`自动生成的文件并更改行

```
require 'rails/all' 
```

只需要您需要的框架。

```
# require 'rails/all'
# require 'active_record/railtie'
require 'action_controller/railtie'
require 'action_mailer/railtie'
# require 'active_resource/railtie'
require 'rails/test_unit/railtie'
require 'sprockets/railtie' 
```

如您所见，我注释掉了活动记录和活动资源。这样，Rails 将不包含 ActiveRecord，如果您跳过数据库创建，它也不会抱怨。

您可以使用会话持久化数据。但是，会话的大小是有限的，因为它们通常与 cookie 一起存储。它适用于小 ID 或原始变量，但不适用于复杂数据。

附带说明一下，如果您需要一个没有 Rails 限制的简单框架，您应该尝试一下[Sinatra](http://www.sinatrarb.com/)。

# scala - 模式匹配/提取器失败（由于 Option 是协变的）

> ID：15706543
> 
> 赞同：2
> 
> 时间：2013-03-29T15:44:55.130
> 
> 标签：scala, pattern-matching, covariance

我对使用 f 有界类型参数时出现的自定义提取器有疑问。以下作品：

```
trait Bar

object Model {
  object Foo {
    def unapply[A <: Bar](foo: Foo[A]): Option[Foo[A]] = Some(foo)
  }
  trait Foo[A <: Bar] extends Model[A]
}
trait Model[A <: Bar]

object View {
  def apply[A <: Bar](model: Model[A]): View[A] = model match {
    case Model.Foo(peer) => new Foo(peer)
  }  
  class Foo[A <: Bar](val peer: Model.Foo[A]) extends View[A]
}
trait View[A <: Bar] 
```

`Bar`但它在f 有界时崩溃：

```
trait Bar[B <: Bar[B]]

object Model {
  object Foo {
    def unapply[A <: Bar[A]](foo: Foo[A]): Option[Foo[A]] = Some(foo)
  }
  trait Foo[A <: Bar[A]] extends Model[A]
}
trait Model[A <: Bar[A]]

object View {
  def apply[A <: Bar[A]](model: Model[A]): View[A] = model match {
    case Model.Foo(peer) => new Foo(peer)
  }  
  class Foo[A <: Bar[A]](val peer: Model.Foo[A]) extends View[A]
}
trait View[A <: Bar[A]] 
```

导致此错误：

```
<console>:12: error: inferred type arguments [A] do not conform to method unapply's 
  type parameter bounds [A <: Bar[A]]
           case Model.Foo(peer) => new Foo(peer)
                      ^
<console>:12: error: type mismatch;
 found   : Model.Foo[A(in method unapply)]
 required: Model.Foo[A(in method apply)]
           case Model.Foo(peer) => new Foo(peer)
                                           ^ 
```

我怀疑问题在于`unapply`' 的返回类型是`Option[+A]`并且 A 不是不变的。这是这个问题的根源吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:08:14.123

尽管**没有回答是否可以创建一个工作`unapply`方法**，但 Scala 2.10 的模式匹配器至少不再抱怨具有不变类型参数的基于强制类型转换的模式匹配：

```
object View {
  def apply[A <: Bar[A]](model: Model[A]): View[A] = model match {
    case peer: Model.Foo[A] => new Foo(peer) // yippie, no problem having `[A]` here
  }  
  class Foo[A <: Bar[A]](val peer: Model.Foo[A]) extends View[A]
}
trait View[A <: Bar[A]] 
```

# jquery - 未调用辅助链接“onclick”事件

> ID：15706545
> 
> 赞同：0
> 
> 时间：2013-03-29T15:45:03.700
> 
> 标签：jquery, onclick

我有以下代码，我正在尝试调用`Floater.Create()`该`click`对象`[data-floatertype=minimize]`。我不想使用 ID，只是通过 DOM 工作。仅供参考，该`[data-floatertype=minimize]`对象已经`.on('click',...)`附加了一个，我希望它两者都做。

```
<div data-floater="true" data-minimized="false">
    <p data-floatertype="title" class="title" style="font-size: 20px;">Welcome</p>
    <a data-floatertype="minimize" href="#" class="minimize" style="right: 30px;">-</a>  
    <a href="#" data-floatertype="close" class="close">X</a>
    <div data-floatertype="content" class="content" style="display: block;">                
    <div style="display: block; text-align: center;" data-display="block">
        <h3>Floaters 101</h3>
        <hr>
        <p style="text-align:left;">You can have as many floaters open as you would like.</p>
        <p style="text-align:left;">Floaters can be minimized by using the minimize button in the top right.</p>
        <p style="text-align:left;">Floaters can also be closed using the close button in the top right.</p>
        <hr>
        <p>Try minimizing this window now.</p>
        <script type="text/javascript">
            $(this).parent().siblings('[data-floatertype=minimize]').on('click', function () {
                Floater.Create("Good job!", "floatertutorial.php", {intro: "3"});
            });
        </script>
    </div>              
</div> 
```

我怀疑的问题是`$(this).parent().siblings(...)`没有返回正确的对象，或者根本没有返回。或者......`.on('click',...)`没有正确绑定。在任何情况下，`Floater.Create()`单击链接时都不会调用该方法。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:48:42.510

`this`不受 HTML 元素的“范围”影响，`this`指的是`window`您使用它的位置。你需要这样做：

```
$('[data-floatertype=minimize]').on('click', function () {
    Floater.Create("Good job!", "floatertutorial.php", {intro: "3"});
}); 
```

# reporting-services - 如何在 SSRS 中按行对值进行分组？

> ID：15706547
> 
> 赞同：0
> 
> 时间：2013-03-29T15:45:07.540
> 
> 标签：reporting-services, matrix, pivot-table

我是 SSRS 的新手，需要一些帮助。

我正在使用矩阵来透视我的数据。

数据集如下所示：

```
TEST   TOOLID
-----  ------
TEST1  123
TEST1  234
TEST2  456 
```

我目前拥有的是这样的：

```
 TEST1   TEST2
TOOL ID       123     N/A
TOOL ID       234     N/A
TOOL ID       N/A     456 
```

我正在寻找的输出是（NULLS 应转换为 N/A）：

```
 TEST1   TEST2
TOOL ID 1     123     456
TOOL ID 2     234     N/A 
```

谢谢

有限的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:38:33.937

1.  在“行组”下的视图窗格左下方选择详细信息
2.  右键单击>添加组>父组
3.  选择您要分组的项目，包括标题是标准行为（选择复选框）。打好了。

您现在正在对列进行分组，您应该看到更多的几何图形 ( 在显示它们现在相应分组的行之前的灰色空间中。

# php - Paypal 自适应支付链式支付 IPN php

> ID：15706551
> 
> 赞同：0
> 
> 时间：2013-03-29T15:45:13.660
> 
> 标签：php, paypal, paypal-ipn, virtuemart, paypal-adaptive-payments

我正在尝试将我的标准 IPN paypal 付款调整为链式付款，以将收到的付款拆分为多个接收者。是否可以通过向标准 IPN 表单添加一些隐藏变量来创建链式付款？

这是我的代码：

```
$form="<form action=\"https://www.paypal.com/cgi-bin/webscr\" method=\"post\">\n";    
$form.="<input type=\"hidden\" name=\"business\" value=\"".$this->order_info['account_name']."\"/>\n";
$form.="<input type=\"hidden\" name=\"cmd\" value=\"_xclick\"/>\n";
$form.="<input type=\"hidden\" name=\"amount\" value=\"".number_format($this->order_info['total_net_price'], 2)."\"/>\n";
$form.="<input type=\"hidden\" name=\"item_name\" value=\"".$this->order_info['transaction_name']."\"/>\n";
$form.="<input type=\"hidden\" name=\"item_number\" value=\"".$this->order_info['rooms_name']."\"/>\n";
$form.="<input type=\"hidden\" name=\"quantity\" value=\"1\"/>\n";
$form.="<input type=\"hidden\" name=\"tax\" value=\"".number_format($this->order_info['total_tax'], 2)."\"/>\n";
$form.="<input type=\"hidden\" name=\"shipping\" value=\"0.00\"/>\n";
$form.="<input type=\"hidden\" name=\"currency_code\" value=\"".$this->order_info['transaction_currency']."\"/>\n";
$form.="<input type=\"hidden\" name=\"no_shipping\" value=\"1\"/>\n";
$form.="<input type=\"hidden\" name=\"rm\" value=\"2\"/>\n";
$form.="<input type=\"hidden\" name=\"notify_url\" value=\"http://MY_DINAMIC_NOTIFY_URL\"/>\n";
$form.="<input type=\"hidden\" name=\"return\" value=\"http://MY_URL\"/>\n";
$form.="<input type=\"image\" src=\"https://www.paypal.com/en_US/i/btn/btn_paynow_SM.gif\" name=\"submit\" alt=\"PayPal - The safer, easier way to pay online!\">\n";
$form.="</form>\n"; 
```

从 Paypal 的 IPN 和 PDT 变量页面（[IPN 和 PDT 变量](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNandPDTVariables#id0991G0M005Z)）

```
transaction[n].receiver
transaction[n].amount
transaction[n].is_primary_receiver 
```

所以我想知道我是否可以使用这些值调整我的表单以拆分付款，或者我是否需要使用 Paypal 示例所示的 Preapproval 系统。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:45:52.370

您将无法调整表单以使用这些附加变量。您必须将这些变量与实际的自适应支付（链式）API 调用一起使用。它们不能用于网站支付标准按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T05:47:40.467

您无法直接获得连锁支付的响应。您必须使用 IPN（即时付款通知）来获取付款详情。检查这个 www.paypal.com/ipn

# javascript - 如何创建将返回列表元素“LI”单击的“ID”的处理程序

> ID：15706555
> 
> 赞同：1
> 
> 时间：2013-03-29T15:45:29.740
> 
> 标签：javascript

我正在尝试创建一个处理程序，它将返回单击的列表元素的“ID”。我尝试了许多变体（有和没有 For 循环），但我似乎无法让它工作。感谢您的帮助。

# 脚本

```
function getItems () {
    var cList = document.getElementById("cMenu");
    var cItems = cList.getElementsByTagName("LI");

    for (var i = 0; i < cItems.length; i++) {

        cItems[i].onclick = function(){
            var theId = this.id;
        };
    }
    console.log(theId);
} 
```

# HTML 源代码

```
<ul id="cMenu">
  <li>
    Parent item 1
    <ul>
      <li id="item1">Child item 1</li>
      <li id="item2">Child item 2</li>
    </ul>
  </li>
  <li>
    Parent item 2
    <ul>
      <li id="item3">Child item 3</li>
      <li id="item4">Child item 4</li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:04:07.090

为我工作：

[http://jsfiddle.net/5XSUG/](http://jsfiddle.net/5XSUG/)

```
var listItems = document.getElementsByTagName('li');

for(var i = 0; i < listItems.length; i++)
{
    listItems[i].onclick = function(e)
    {
        e.stopPropagation();
        window.alert(e.target.id);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:54:42.783

进入`console.log(theId)`您的`onclick`函数并确保您调用`getItems()`它以便运行一次以设置所有内容。

[jsFiddle](http://jsfiddle.net/xs32u/)

```
function getItems () {
    var cList = document.getElementById("cMenu");
    var cItems = cList.getElementsByTagName("LI");

    for (var i = 0; i < cItems.length; i++) {

        cItems[i].onclick = function(){
            var theId = this.id;
            console.log(theId);
        };
    }
}
getItems(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:57:28.870

如果您只想获得 的`id`，`cList > li > ul > li`那么您可以向所有这些列表项添加某个`className`，以避免将事件处理程序添加到父`li`项，`cList > li`例如：

```
<ul id="cMenu">
    <li>Parent item 1
        <ul>
            <li class="item" id="item1">Child item 1</li>
            <li class="item" id="item2">Child item 2</li>
        </ul>
    </li>
    <li>Parent item 2
        <ul>
            <li class="item" id="item3">Child item 3</li>
            <li class="item" id="item4">Child item 4</li>
        </ul>
    </li>
</ul> 
```

那么您可以使用此代码来获取`id`单击`li`项目的：

```
var cList = document.getElementById("cMenu"),
    cItem = cList.getElementsByTagName("li");

for (var i in cItem) {
    if (cItem[i].className == "item") {
        cItem[i].onclick = function (event) {
            event.stopPropagation();
            var elm = event.currentTarget || event.srcElement;
            console.log(elm.id);
        }
    }
} 
```

请注意，您不必包装代码`function`以便它在文档加载时运行，您只需将其添加到`</body>`标签之前的正文部分

[演示](http://jsfiddle.net/arcm111/4ZQ3e/)

# javascript - 从 chrome 扩展搜索谷歌驱动器

> ID：15706556
> 
> 赞同：1
> 
> 时间：2013-03-29T15:45:31.537
> 
> 标签：javascript, google-chrome-extension, google-drive-api

对于我的第一个 google chrome 扩展，我正在尝试执行以下操作：

*   每当用户执行谷歌搜索时：
    *   在谷歌驱动器上执行相同的搜索
    *   在正常搜索结果旁边显示来自 GDrive 的前 X 个搜索结果

这是受 Chrome 的 Evernote 插件所做的启发，在正常结果旁边的框中显示与查询匹配的 Evernote“笔记”。

到目前为止，我有获取搜索字符串的代码，并且可以将内容放入搜索结果页面中的正确位置。我担心的是谷歌驱动器，我还没有找到任何**关于如何从 javascript / chrome 扩展程序连接驱动器 API 的明确说明**（如果这可能吗？）。

* * *

奖励问题：最初我想在 gmail 而不是驱动器中进行搜索，但似乎没有用于此的 API？没有 API 有可能吗？

# mysql - 检查用户是否匹配相同的选项

> ID：15706559
> 
> 赞同：1
> 
> 时间：2013-03-29T15:45:43.660
> 
> 标签：mysql, sql

所以这是我的桌子

```
|a_id|b_id|
|x   |y   |
|y   |x   |
|d   |c   |
|c   |d   |
|... |... | 
```

还有很多...

获得所有配对的最佳方法是什么？例如从上面的例子 (x 和 y) 和 (d 和 c)

我从来没有使用过没有特定 id 的 sql

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:50:55.543

```
select  t1.a_id
,       t1.b_id
from    YourTable t1
join    YourTable t2
on      t1.a_id = t2.b_id
        and t1.b_id = t2.a_id
where   t1.a_id > t2.a_id 
```

[SQL Fiddle 上的示例。](http://sqlfiddle.com/#!2/2ecb0/3/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:48:21.600

```
SELECT a_id, b_id
FROM   TableName
WHERE  (LEAST(a_id, b_id), GREATEST(a_id, b_id), a_id) in 
(
    SELECT  LEAST(a_id, b_id) as x, 
            GREATEST(a_id, b_id) as y, 
            MIN(a_id) as a_id
    FROM    TableName 
    GROUP   BY x, y
) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/e0d6e/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:59:34.490

可以更简单：

```
SELECT LEAST(a_id, b_id) AS a, GREATEST(a_id, b_id) AS b 
FROM   tbl
GROUP  BY 1, 2; 
```

[SQL 小提琴](http://www.sqlfiddle.com/#!9/c6fa1/1)。

# angularjs - $resource 中删除和删除方法的区别？

> ID：15706560
> 
> 赞同：41
> 
> 时间：2013-03-29T15:45:48.027
> 
> 标签：angularjs, angular-resource

`delete`和方法有什么区别`remove`？它们都使用`DELETE`HTTP的方法。我找不到任何合理的信息。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-29T15:53:08.343

我不相信有任何区别。 [角源代码](https://github.com/angular/angular.js/blob/master/src/ngResource/resource.js#L510)：

```
angular.module('ngResource', ['ng']).
  factory('$resource', ['$http', '$parse', function($http, $parse) {
    var DEFAULT_ACTIONS = {
      'get':    {method:'GET'},
      'save':   {method:'POST'},
      'query':  {method:'GET', isArray:true},
      'remove': {method:'DELETE'},
      'delete': {method:'DELETE'} 
```

`myResource[delete]()`来自 Eric W.（他的编辑在我批准之前被拒绝）：Green & Seshadri 的 AngularJS 警告说，除非使用括号符号 ( ) 作为`delete`保留字，否则删除方法可能在 IE 中不起作用。因此，您可能需要考虑改用该`remove`方法。

# javascript - 管理信息窗口 html 代码的有效方法

> ID：15706563
> 
> 赞同：0
> 
> 时间：2013-03-29T15:46:00.840
> 
> 标签：javascript, html, string, google-maps-api-3

一年多来，我一直在从事基于 Google Maps API v3 的项目。信息窗口中显示的信息有很多很多的变化。

我正在寻找一种更有效的方式来管理除字符串变量之外的 html 代码。有任何想法吗？

```
var tabA = "" +
    '<div class="iw_field"><div class="iw_label">NAME</div>'+
    '<div class="iw_data">'+c[i].pName+'</div></div>' +
    '<div class="iw_field"><div class="iw_label">CORPORATION</div>'+
    '<div class="iw_data">'+c[i].corp+'</div></div>' +
    '<div class="iw_field"><div class="iw_label">INDUSTRY</div>'+
    '<div class="iw_data">'+c[i].industry+'</div></div>'+
    "<div style='text-align: center;'>"+
    "<button class='btn btn-info' onclick='retriveCustomerOf(\""+c[i].num+"\")'>Customers</button>" +
    "<button class='btn btn-info' onclick=''>Prospects</button>"+
    "</div>";

var tabB = "" +
    '<div class="iw_field" style="border-bottom: 0px"><div class="iw_label">SALES VOLUME</div>'+
    '<div class="iw_data">$'+dollarFormat(c[i].statA)+'</div></div>' +
    '<table style="border-top: 1px solid #aaaaaa;"><tr><td>'+
    '<div class="iw_field"><div class="iw_label">GM</div><div id="" class="iw_data">$'+dollarFormat(c[i].statB)+'</div></div>'+
    '<div class="iw_field"><div class="iw_label">OPAT</div><div id="" class="iw_data">$'+dollarFormat(c[i].statC)+'</div></div>'+
    '<div class="iw_field"><div class="iw_label">ROI</div><div id="" class="iw_data">'+dollarFormat(c[i].statD)+'%</div></div>'+
    '</td><td>'+
    '<div class="iw_field"><div class="iw_label">GM RANK</div><div id="" class="iw_data">'+c[i].statE+'</div></div>'+
    '<div class="iw_field"><div class="iw_label">OPAT RANK</div><div id="" class="iw_data">'+c[i].statF+'</div></div>'+
    '<div class="iw_field"><div class="iw_label">ROI RANK</div><div id="" class="iw_data">'+c[i].statG+'</div></div>'+
    '</td></tr></table>';

var tabC = ""+
    '<div class="iw_field" style="border-bottom: 0px"><div class="iw_label">SERVICE REGION</div>'+
    '<div class="iw_data">'+c[i].area+'</div></div>' +
    '<table style="border-top: 1px solid #aaaaaa;"><tr><td>'+
    '<div class="iw_field"><div class="iw_label">PLACE 1</div><div id="" class="iw_data">$'+dollarFormat(c[i].p1)+'</div></div>'+
    '<div class="iw_field"><div class="iw_label">PLACE 2</div><div id="" class="iw_data">$'+dollarFormat(c[i].p2)+'</div></div>'+
    '</td><td>'+
    '<div class="iw_field"><div class="iw_label">PLACE 3</div><div id="" class="iw_data">$'+dollarFormat(c[i].p3)+'</div></div>'+
    '<div class="iw_field"><div class="iw_label">PLACE 4</div><div id="" class="iw_data">$'+dollarFormat(c[i].p4)+'</div></div>'+
    '</td></tr></table>';

var windowContent = "<div id='infowindow' class='company'>" +
    "<span class='header'>"+c[i].cName+" (#"+c[i].num+")</span>" +
    "<div class='tabs'>" +
    "<ul>" +
    "<li><a href='#tab_1' onclick='selectedTab = 0'><span>A</span></a></li>" +
    "<li><a href='#tab_2' onclick='selectedTab = 1'><span>B</span></a></li>" +
    "<li><a href='#tab_3' onclick='selectedTab = 2'><span>C</span></a></li>" +
    "</ul>" +
    "<div id='tab_1'>"+tabA+"</div>" +
    "<div id='tab_2'>"+tabB+"</div>" +
    "<div id='tab_3'>"+tabC+"</div>" +
    "</div>" +
    "<div style='text-align: right;'>"+
    "<button class='btn btn-primary' onclick='toggleRings(new google.maps.LatLng("+c[i].latitude+","+companies[i].longitude+"));'>Rings</button>" +
    "<button class='btn btn-primary' onclick='zoom("+c[i].latitude+", "+c[i].longitude+", 9)'>Zoom</button>"+
    "</div></div>"; 
```

这不是管理此代码的最佳实践。请拯救我的理智。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:11:57.567

签入 js 模板库。我使用了[Embedded Javascript](http://embeddedjs.com/)，并且对结果很满意。

# c# - 为什么不建议在同一解决方案中混合 VB.Net 和 C#？

> ID：15706564
> 
> 赞同：5
> 
> 时间：2013-03-29T15:46:01.830
> 
> 标签：c#, vb.net, visual-studio

当我注意到下面有一条奇怪的评论时，我正在阅读[这个问题：](https://stackoverflow.com/q/2903430/1882077)

> 不确定问题是什么：您可以在一个解决方案中使用 VB.NET 和 C# 项目（尽管我不建议这样做）。

我经常这样做，因为我们有旧版 VB.Net 代码，而新代码是用 C# 编写的。这真的不推荐吗？为什么不？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T15:47:36.067

除了在一个“解决方案”中使用两种语言增加复杂性之外，没有真正的理由避免这种情况。

在我看来，您的场景（使用旧产品，但添加新功能）是在一个解决方案中使用两种语言的正当理由。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-29T15:48:25.657

不推荐它的唯一原因是一致性。大多数开发人员在开发应用程序时更喜欢使用单一语言。拥有一种语言还意味着您的开发人员只需要了解一种语言，而不需要同时了解 VB.NET 和 C#（即使两者非常相似）。

如果您需要混合使用旧版 VB.NET 和 C#，没有理由不这样做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-29T15:48:29.970

这是一个“为你正在构建的东西使用最好的工具”的问题。*不建议在*项目中混合 C# 和 VB （出于明显的“它不会编译”的原因），但是如果您觉得您的开发团队可以更快地运行并且更易于维护，那么继续在 VB 中编写旧代码是没有意义的时尚使用 C#。

过去几个月我们一直在我的办公室做这件事（在类似的遗留代码情况下）并且还没有遇到任何重大问题（除了由于上下文切换而可能损失的开发时间），我们从使用我们都觉得更舒服的语言工作。

更多关于任务切换的信息在[这里](http://en.wikipedia.org/wiki/Task_switching_%28psychology%29)。我真的觉得我们每天从我们对 C# 的舒适程度中看到的好处超过了偶尔不得不回到遗留池中的成本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:48:17.783

这只是个人选择的问题。如果您对这两种语言都感到满意，那么您肯定可以在相同的解决方案中使用它们。

在解决方案中使用单一语言似乎很容易维护。因此它是首选。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T15:48:23.903

在解决方案中混合代码可能会很快变得非常混乱，它永远不会清楚你从哪里调用什么方法，以保持它的良好。在单独的解决方案中开发，这将使您的项目更易于跟踪，并确保您不会混淆项目中的语言

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T15:50:01.440

你为什么想这么做？如果您有想要使用的遗留代码，则将该代码保留在其自己的组件中，不要将其与新代码混合。不推荐，因为它不提倡“清洁代码”。它可能会导致您有一个难以阅读和维护的解决方案。

# php - 使用 PHP 解析文件名并在 HTML 中输出排序列表

> ID：15706565
> 
> 赞同：0
> 
> 时间：2013-03-29T15:46:04.717
> 
> 标签：php, multidimensional-array

假设我有一个包含以下文件的目录，按日期（月、日和年）命名。

030313.pdf 030513.pdf 040113.pdf 052013.pdf

我知道可以使用explode() 来打破文件名，我假设我需要以某种方式将数据保存到这样的多维数组中：

```
$files = array
(
array("030313.pdf", 03,03,13),
array("030513.pdf", 03,05,13),
array("040113.pdf", 04,01,13),
array("052013.pdf", 05,20,13)
); 
```

然后是否可以按月分组，按天排序，然后将其作为链接的项目符号列表回显出来？

就像是：

2013 年 3 月：

*   03/03/2013（链接到实际文件）
*   2013 年 3 月 5 日（链接到实际文件）

2013年4月：

*   2013 年 4 月 1 日（链接到实际文件）

2013 年 5 月：

*   2013 年 5 月 20 日（链接到实际文件）

如果这是可能的，假设有 100-1000 个文件，加载此页面会导致任何服务器性能问题吗？

谢谢

布雷特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:55:29.027

解决方案非常简单：

```
$files = array
(
    array("030313.pdf", 03,03,13),
    array("030513.pdf", 03,05,13),
    array("040113.pdf", 04,01,13),
    array("052013.pdf", 05,20,13)
);

$sortedData = array();

foreach ($files as $file) {
    $dt = mktime(0, 0, 0,  $file[1], 1, 2000);
    $key = date('F', $dt) . ' ' . $file[3];
    if (array_key_exists($key, $sortedData)) {
        $sortedData[$key] []= $file;
    } else {
        $sortedData[$key] = array($file);
    }
}

function sortFunc($a, $b) {
    if ($a[2] > $b[2]) {
        return 1;
    } else if ($a[2] < $b[2]) {
        return -1;
    } 
    return 0;
}

foreach ($sortedData as &$sd) {
    usort($sd, sortFunc);
}

foreach ($sortedData as $key => $data) {
    echo "<h1>".$key."</h1>\n";
    foreach ($data as $d) {
        echo $d[0]."\n";
    }
} 
```

只需重新格式化输出。

性能主要取决于服务器上使用的文件系统。重新调整 1000 个元素的数组通常没什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:24:02.550

给你，刚刚更新它以订购它们（我第一次阅读你的帖子时错过了这个。）

```
<?php

$files = array
(
    array("030313.pdf", 03,03,13),
    array("030513.pdf", 03,05,13),
    array("040113.pdf", 04,01,13),
    array("052013.pdf", 05,20,13)
);

$newArray = array();

foreach($files AS $file => $val){
        $newArray[$date = date('Ym', strtotime($val[1] . '/' . $val[2] . '/' . $val[3]))][] = $val[0];  
}

ksort($newArray);

$list = '<ul>';
foreach($newArray AS $key => $val){

    $list .= '<li>' . date('F Y', strtotime('01-' . substr($key, 4, 2) . '-' . substr($key, 0, 4)));

    if(is_array($val)){
        $list .= '<ul>';
        foreach($val AS $file => $filename){

            $list .= '<li><a href="' . $filename . '">Download ' . $filename . '</a></li>';

        }
        $list .= '</ul>';
    }
    $list .= '</li>';

}

$list .= '</ul>';

echo $list;

?> 
```

# c# - 如何获取 IQueryable 中的上一条记录和下一条记录 结果？

> ID：15706566
> 
> 赞同：2
> 
> 时间：2013-03-29T15:46:24.140
> 
> 标签：c#, entity-framework

我对 IQueryable 集合进行一些排序并获取一个项目。我的页面上还有一些`<a>`链接，我想单击这些链接以转到集合中的上一个和下一个项目。

由于 ID**不是**连续的，我不能只做简单的算术来达到它们。

给定记录的位置，如何从 IQueryable 中获取上一个和下一个项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:48:10.740

使用`Take()`和`Skip()`实现您的分页系统。您不需要 ID 是连续的，您只需按照查询返回的顺序返回对象。

```
var itemsPerPage = 10;
var pageNumber = 2; // Say it starts from 1

var values = query.Skip((pageNumber - 1) * itemsPerPage).Take(itemsPerPage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:56:09.320

您可以使用[LinkedList](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)。

LinkedList 节点支持调用其上一个和下一个兄弟节点。LinkedList 的构造函数采用 IEnumerable，因此您应该能够轻松实现它。

# javascript - 如何从一个时间戳中过滤小时数并将该小时数放入 Javascript 中的另一个时间戳？

> ID：15706568
> 
> 赞同：0
> 
> 时间：2013-03-29T15:46:29.783
> 
> 标签：javascript, timestamp, unix-timestamp

我有一个时间戳，例如`t1 = 1364571300`（`29/3/2013 16:35:00`在我的本地时区（CET）中）。

从**t1**开始，我只想得到几个小时`16:35:00`

然后我有另一个时间戳：例如，`t2 = 1364598000`它是`30/3/2013 0:00:00`（在我的本地时区（CET）中）。

现在，我想用**t1** 中的 ( )替换**t2**的小时数，以便最终结果会给我一个新的时间戳，它将是（在我的本地时区 (CET) 中）。`16:35:00`**`t3``30/3/2013 16:35:00`**

 **我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:10:30.067

你可以这样做：

```
var t1 = new Date(1364571300 * 1000);
var t2 = new Date(1364598000 * 1000);
var t3 = new Date(t2.getFullYear(), t2.getMonth(),   t2.getDate(),
                  t1.getHours(),    t1.getMinutes(), t1.getSeconds(), t1.getMilliseconds()); 
```

它使用[`Date(Number)`构造函数](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.3.2)来创建您的两个日期（注意它接受毫秒而不是秒），然后[`Date(year, month, day, hour, minute, second, millisecond)`构造函数](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.3.1)从您想要的两天的部分中构建日期。

[实例](http://jsbin.com/uxadin/1)| [来源](http://jsbin.com/uxadin/1/edit)[使用该示例的任何人**请注意**：请记住，时间是*本地*时间，因此 Yasin 的 16:35 对您来说可能是完全不同的时间（或者甚至是不同的日期，就她而言`t2` - 对我来说，那是 3 月 29 日23:00，而不是 3 月 30 日 00:00，因为我在 GMT 而她在 GMT+0100)。]

并在评论中的某处回答您的其他问题，如果您想从中获取 Unix 时间戳值（自大纪元以来的秒数）`t3`，您可以这样做：

```
var timestamp = t3.getTime() / 1000; // Converts milliseconds to seconds 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T16:04:14.673

试试这个 -

```
var t1 = new Date(1364571300 * 1000);
var t2 = new Date(1364598000 * 1000);
var time = t1.getHours() + ':' + t1.getMinutes() + ':' + t1.getSeconds();
var newdate = (t2.getMonth()+1).toString() + '/' + t2.getDate().toString() + '/' + t2.getYear().toString();
var t3 = new Date(newdate+' '+time); 
```

使用`t3`. 它存储所需的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T18:38:40.620

我的时间是 GMT+0530 。

```
function getUtcDate( t ) {

    var d    = new Date( t  * 1000 )
    var ut  = (+d) + ( d.getTimezoneOffset() * 60 * 1000 ) + ( 60*60* 1000 ) ;
    return new Date( ut );

};

function getDiff( d ) {

   return +d - +new Date( d.getYear(), d.getMonth(), d.getDay() );    

}

var d1    = getUtcDate( 1364571300 );
var d2    = getUtcDate( 1364598000 );

var diff1 = getDiff( d1 );
var diff2 = getDiff( d2 );

var t3 =  (+d2 - diff2) + diff1 ;

console.log( new Date( t3 ) ) ; 
```

哪个打印

```
Date {Sat Mar 30 2013 16:35:00 GMT+0530 (India Standard Time)} 
```**

# events - GWT 通过 AbsolutePanel 传播事件

> ID：15706570
> 
> 赞同：0
> 
> 时间：2013-03-29T15:46:38.263
> 
> 标签：events, gwt, celltable

我有一个带有 ClickableCell 的 CellTable。当我单击它时，会打开一个弹出窗口并按预期显示单击的单元格表。CellTable 被添加到 AbsolutePanel(Parent) 中。

对于某些开发，另一个 AbsolutePanel(Over) 位于 CellTable 上方。

如何在 celltable 上传播 AbsolutePanel(Over) click 事件？

我在 AbsolutePanelHandler(Over) 上有一个处理程序并触发了单击事件：

```
absolutePanelOver.addDomHandler(new ClickHandler() {
        public void onClick(ClickEvent event) {
            NativeEvent nativeEvent = Document.get().createClickEvent(0, -event.getScreenX(), event.getScreenY(), 
                    event.getClientX(), event.getClientY(), event.isControlKeyDown(), event.isAltKeyDown(), 
                    event.isShiftKeyDown(), event.isMetaKeyDown());
            DomEvent.fireNativeEvent(nativeEvent, cellTable);
        }

    }, ClickEvent.getType()); 
```

不幸的是，没有显示弹出单元格表。但我知道 cellTable 处理事件。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:50:47.820

也许我不明白你的问题，但解决方案似乎要简单得多。

```
absolutePanelOver.addDomHandler(new ClickHandler() {
    public void onClick(ClickEvent event) {
        doSomething();
    }
}, ClickEvent.getType()); 
```

在您的 CellTable 中，单击单元格时调用相同的 doSomething() 方法。现在单击单元格或绝对面板都没有关系 - 将执行相同的方法。

# java - Struts2 动作 > JSP > 动作

> ID：15706576
> 
> 赞同：2
> 
> 时间：2013-03-29T15:47:08.803
> 
> 标签：java, jsp, struts2, form-submit

我正在尝试这样做

1.  在我的操作中从 db 获取对象列表（确定）
2.  在 JSP 上打印（OK）
3.  该列表作为 JSP 中的可编辑表出现。我想修改然后将其提交回相同的操作以将其保存在我的数据库中（失败。当我使用 `<s:submit action="myaction" method="mymethod">`以前从数据库填充的列表调用我的方法时，现在是null.我该如何解决？

我发现了一些关于 struts2 拦截器`myaction`通过反射注入数据的话题。

```
public class CurrentOra {
    private int idCommessa;
    private String descrizioneCommessa; 
    private int idCliente;
    private String descrizioneCliente;
    private List<OreTimesheetGiorno> orePerCommessa;

    public int getIdCommessa() {
        return idCommessa;
    }
} 
```

和

```
public class OreTimesheetGiorno {

    private int numeroGiorno;
    private OreTimesheet oreTimesheet;
    public int getNumeroGiorno() {
        return numeroGiorno;
    }
    public void setNumeroGiorno(int numeroGiorno) {
        this.numeroGiorno = numeroGiorno;
    }
    public OreTimesheet getOreTimesheet() {
        return oreTimesheet;
    }
    public void setOreTimesheet(OreTimesheet oreTimesheet) {
        this.oreTimesheet = oreTimesheet;
    }

} 
```

这是我的对象结构，在 JSP 中我打印它

```
<s:iterator value="listOre" >

  <tr class="giornoSettimana giornoUno">

    <td><s:property value="descrizioneCliente"/></td>
    <td><s:property value="descrizioneCommessa"/></td>

    <s:iterator value="orePerCommessa">
        <td>
            <input type="text" 
                   class="oreConsuntivazione" 
                   maxlength="2" 
                   giorno = "<s:property value="numeroGiorno" />" 
                   value="<s:property value="oreTimesheet.numeroOre" />">
        </td>

     </s:iterator>

  </tr>

</s:iterator> 
```

基本上我需要迭代以向客户展示每个客户的工作时间。然后我应该可以每小时编辑一次并将其保存回数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:38:38.087

*   `giorno`不是 HTML`input`字段的有效属性；
*   `CurrentOra`丢失`getters`并且`setters`（但我想您在此处发布时只是省略了它们，顺便说一句，请仔细检查它们）；

也就是说，要回传值，您需要使用属性指定`index`的。`List``IteratorStatus.index`

假设用户只能输入小时数，不能更改天数，尝试如下：

```
<s:iterator value="listOre" >

  <tr class="giornoSettimana giornoUno">

    <td><s:property value="descrizioneCliente"/></td>
    <td><s:property value="descrizioneCommessa"/></td>

    <s:iterator value="orePerCommessa" status="ctr" >
        <td>
            <s:hidden name="orePerCommessa[%{#ctr.index}].numeroGiorno" />

            <s:property value="numeroGiorno" />

            <s:textfield 
               name="orePerCommessa[%{#ctr.index}].oreTimesheet.numeroOre" 
               cssClass = "oreConsuntivazione"
               maxlength="2" />

        </td>

     </s:iterator>

  </tr>

</s:iterator> 
```

顺便说一句，这不会阻止用户破解您的代码来更改 ; 的隐藏值`orePerCommessa.numeroGiorno`。如果保护它们免受用户操作很重要，一旦从数据库中读取它们就将它们放入会话中，然后在 JSP 中显示它们（使用`<s:property/>`），但不要发布它们（不要放置`<s:hidden />`），然后在回发页面时检索它们来自会话并以某种方式匹配它们（例如，您可以使用 HashMap 将它们作为值，并将计数器作为键存储在 JSP 中）......这样用户可以只弄乱键，而不是值.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T13:07:01.797

每次您向 Struts 发出请求时，它都会创建一个新的操作对象实例并通过拦截器填充它。其中之一是`params`拦截器。它负责迭代参数映射并将参数值注入到动作属性中。该规则采用适合动作属性名称并在动作中具有相应设置器的参数名称。所以，你可以先解决这个问题

```
@DefaultInterceptorRef(value = "defaultStack") 
```

确保堆栈上所有必要的拦截器，并且您的操作隐式或显式引用此堆栈。

然后确保你有在拦截器调用它们之前初始化的属性。

最后最有趣的话题是表单字段名称应该符合 OGNL 能够从`valueStack`. 如果您的对象结构很简单，那么字段名将直接映射到操作属性。如果您使用集合，那么您最好看看 [我的答案](https://stackoverflow.com/questions/15650800/repopulate-an-arraylist-from-jsp-with-struts2/15657572#15657572)，这将使您更好地了解问题。

# regex - 用于重复值的正则表达式

> ID：15706577
> 
> 赞同：0
> 
> 时间：2013-03-29T15:47:15.940
> 
> 标签：regex

我正在尝试找到正确的正则表达式（用于 Java 和 JavaScript）来验证一系列星期几和 24 小时时间格式。我想出了时间格式，但正在努力想出完整的解决方案。

正则表达式需要验证包含以下一项或多项的模式，以逗号分隔。

{两字日} HH:MM-HH:MM

有效字符串的三个示例是：

```
M 5:30-7:00
M 5:30-7:00, T 5:30-7:00, W 18:00-19:30
F 12:00-14:30, Sa 6:45-8:15, Su 6:45-8:15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:00:52.960

这应该验证 24 小时制：

```
/^((M|T|W|Th|Fr|Sa|Su) ([01]?[0-9]|2[0-3]):[0-5][0-9]-([01]?[0-9]|2[0-3]):[0-5][0-9](, )?)+$/ 
```

时间位归功于`mkyong`：[http ://www.mkyong.com/regular-expressions/how-to-validate-time-in-24-hours-format-with-regular-expression/](http://www.mkyong.com/regular-expressions/how-to-validate-time-in-24-hours-format-with-regular-expression/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:50:54.797

你可以试试这个

```
[A-Za-z]{1,2}[ ]\d+:\d+-\d+:\d+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:57:42.490

这应该可以解决问题：

```
^(M|Tu|W|Th|F|Sa|Su) \d{1,2}:\d{2}-\d{1,2}:\d{2}(, (M|Tu|W|Th|F|Sa|Su) \d{1,2}:\d{2}-\d{1,2}:\d{2})*$ 
```

请注意，您`T`在上面的示例中显示的是模棱两可的。您可能想要强制执行`Tu`，`Th`如我的正则表达式所示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:59:10.983

这将捕获数组中的所有集合。一周中短日列表中的 T 是有争议的（星期二还是星期四？）。

```
^((?:[MTWFS]|Tu|Th|Sa|Su)\s(?:[0-9]{1,2}:[0-9]{2})-(?:[0-9]{1,2}:[0-9]{2})(?:,\s)?)+$ 
```

(?:) 是非捕获组，因此您的实际匹配将是（例如）：

*   下午 5:30-7:00
*   时间 5:30-7:00
*   西 18:00-19:30

但是整条线都会验证。

为行边界和显式时间-时间匹配添加了 ^ 和 $，因为某些正则表达式解析器可能无法使用我以前的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T16:00:58.083

你可以试试这个：`([MTWFS][ouehra]?) ([0-9]|[1-2][0-9]):([0-6][0-9])-([0-9]|[1-2][0-9]):([0-6][0-9])`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T16:01:07.747

我会这样做：

```
(((M|T(u|h)|W|F|S(a|u)) ((1*\d)|(2[0-3])):[1-5]\d-((1*\d)|(2[0-3])):[1-5]\d(, )?)+ 
```

# java - SimpleCursorAdapter 不加载外部 sqlite 数据库：“_id”错误

> ID：15706581
> 
> 赞同：0
> 
> 时间：2013-03-29T15:47:33.797
> 
> 标签：java, android, sqlite, cursor, simplecursoradapter

错误说：`column _id does not exists`但是该列在数据库中（设置为主键），并且该列位于外部 SD 文件夹中。我试图在活动的初始加载时返回数据库中包含的值，但似乎游标没有返回任何内容。

```
public class ComponentsDbAdapter {

  public static final String COLUMN_ID = "_id";
  public static final String COLUMN_SUBSTRUCTURE = "substructure";
  public static final String COLUMN_TYPE = "type";
  public static final String COLUMN_ORDERNUM = "ordernum";
  public static final String COLUMN_INSTALLATION = "installation";
  private static final String TAG = "ComponentsDbAdapter";
  private DatabaseHelper mDbHelper;
  private SQLiteDatabase mDb;
  private static final String DATABASE_PATH = Environment.getExternalStorageDirectory().getAbsoluteFile()+ "/DATABASE_BACKUP/IMPORTED/";
  private static final String DATABASE_NAME = "android.db";
  private static final String TABLE_NAME = "TAB_WORKSCPE";
  private static final int DATABASE_VERSION = 1; 
  private final Context mCtx;

  public ComponentsDbAdapter open() throws SQLException {
    mDbHelper = new DatabaseHelper(mCtx);
    mDb = mDbHelper.getWritableDatabase();
    return this;
  }

  private static class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper(Context context) {
        super(context, DATABASE_PATH+DATABASE_NAME, null, DATABASE_VERSION);
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        db.query(TABLE_NAME, new String[] {COLUMN_ID, COLUMN_SUBSTRUCTURE, COLUMN_TYPE, COLUMN_ORDERNUM, COLUMN_INSTALLATION}, null, null, null, null, null); 
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to " + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }
  }

  public ComponentsDbAdapter(Context ctx) {
    this.mCtx = ctx;
  }

  public void close() {
    if (mDbHelper != null) {
        mDbHelper.close();
    }
 }

  public Cursor fetchComponentsByName(String inputText) throws SQLException {
    Log.w(TAG, inputText);
    Cursor mCursor = null;
    if (inputText == null  ||  inputText.length () == 0)  {
        mCursor = mDb.query(TABLE_NAME, new String[] {COLUMN_ID, COLUMN_SUBSTRUCTURE, COLUMN_TYPE, COLUMN_ORDERNUM, COLUMN_INSTALLATION}, null, null, null, null, null); 
} else {
    mCursor = mDb.query(true, TABLE_NAME, new String[] {COLUMN_ID, COLUMN_SUBSTRUCTURE, COLUMN_TYPE, COLUMN_ORDERNUM, COLUMN_INSTALLATION}, COLUMN_TYPE + " like '%" + inputText + "%'", null, null, null, null, null);
}
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor; 
}

public Cursor fetchAllComponents() {
    Cursor mCursor = mDb.query(TABLE_NAME, new String[] {COLUMN_ID, COLUMN_SUBSTRUCTURE, COLUMN_TYPE, COLUMN_ORDERNUM, COLUMN_INSTALLATION}, null, null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
  }
}

public class AndroidListViewCursorAdaptorActivity extends Activity {

private ComponentsDbAdapter dbHelper;
private SimpleCursorAdapter dataAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    dbHelper = new ComponentsDbAdapter(this);
    dbHelper.open();

    //Generate ListView from SQLite Database
    displayListView();
}

private void displayListView() {
    Cursor cursor = dbHelper.fetchAllComponents();

    // The desired columns to be bound
    String[] columns = new String[] {
        ComponentsDbAdapter.COLUMN_SUBSTRUCTURE,
        ComponentsDbAdapter.COLUMN_TYPE,
        ComponentsDbAdapter.COLUMN_ORDERNUM,
        ComponentsDbAdapter.COLUMN_INSTALLATION
    };

    // the XML defined views which the data will be bound to
    int[] to = new int[] {
        R.id.inst,
        R.id.subdt,
        R.id.type,
        R.id.ordernum,
    };

    // create the adapter using the cursor pointing to the desired data
    //as well as the layout information
    dataAdapter = new SimpleCursorAdapter(
        this, 
        R.layout.country_info,
        cursor,
        columns,
        to,
        0);

    ListView listView = (ListView) findViewById(R.id.listView1);
    // Assign adapter to ListView
    listView.setAdapter(dataAdapter);

    listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> listView, View view,
            int position, long id) {
            // Get the cursor, positioned to the corresponding row in the result set
            Cursor cursor = (Cursor) listView.getItemAtPosition(position);

            // Get the state's capital from this row in the database.
            String compSubdt = cursor.getString(cursor.getColumnIndexOrThrow("subdt"));
            Toast.makeText(getApplicationContext(), compSubdt, Toast.LENGTH_SHORT).show();
        }
    });

    EditText myFilter = (EditText) findViewById(R.id.myFilter);
    myFilter.addTextChangedListener(new TextWatcher() {

        public void afterTextChanged(Editable s) {
        }

        public void beforeTextChanged(CharSequence s, int start,int count, int after) {
        }

        public void onTextChanged(CharSequence s, int start,int before, int count) {
            dataAdapter.getFilter().filter(s.toString());
        }
    });

    dataAdapter.setFilterQueryProvider(new FilterQueryProvider() {
        public Cursor runQuery(CharSequence constraint) {
            return dbHelper.fetchComponentsByName(constraint.toString());
        }
    });
 }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:06:11.380

从您的代码中看，您尚未创建表，因此不会找到任何列。

您可以在`onCreate`方法中通过创建查询来创建表来执行此操作。在您的代码中，您似乎在进行选择而不是创建。

```
private static final String TABLE_CREATE = "create table "
    + TABLE_NAME
    + "("
    + COLUMN_ID + " integer primary key autoincrement, "
    + COLUMN_TYPE + " text not null default '', "
    + COLUMN_ORDERNUM + " integer not null default 0, "
    + COLUMN_INSTALLATION + " integer not null default 0, "
    + COLUMN_SUBSTRUCTURE + " text not null default ''"
    + ");";

@Override
public void onCreate(SQLiteDatabase database) {
    database.execSQL(TABLE_CREATE);
} 
```

要将其存储在外部存储上，您需要覆盖[getDatabasePath(...)](http://developer.android.com/reference/android/content/ContextWrapper.html#getDatabasePath%28java.lang.String%29)。类似的解决方案在这里[https://stackoverflow.com/a/8385537/935779](https://stackoverflow.com/a/8385537/935779)

```
@Override
public File getDatabasePath(String name) {
    // reference where you would like the file to be here.
    File result = new File(getExternalFilesDir(null), name);
    return result;
} 
```

我相信你会想用你的`Application`班级覆盖它，因为它是`ContextWrapper`.

该方法`getDatabaseFile(...)`在[openOrCreateDatabase(...)](http://developer.android.com/reference/android/content/Context.html#openOrCreateDatabase%28java.lang.String,%20int,%20android.database.sqlite.SQLiteDatabase.CursorFactory%29)内部使用来确定位置。

或者，您可以在那里覆盖`openOrCreateDatabase(...)`并设置文件位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:58:54.747

我认为您不能更改甚至指定数据库的位置，只能更改名称。离开路径，不要尝试将其放在外部存储中 - 让 Android 确定路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:15:01.877

好的，这花了我将近一周的时间和很大的压力，但这是解决方案。我开始阅读很多教程并让它在这个中工作：

[http://www.mysamplecode.com/2012/11/android-database-content-provider.html](http://www.mysamplecode.com/2012/11/android-database-content-provider.html)

我从虚拟设备中提取了数据库并手动添加了更多数据。然后将数据库复制到我的设备文件夹上的所需文件夹（只是为了确保数据库一致性/列完全相同）。然后将 MyDatabaseHelper 类更改如下：

```
public class MyDatabaseHelper extends SQLiteOpenHelper {

    private static final String DATABASE_PATH = Environment.getExternalStorageDirectory().getAbsoluteFile()+ "/MYFOLDER/";
    private static final String DATABASE_NAME = "TheWorld.db";
    private static final int DATABASE_VERSION = 1;

    MyDatabaseHelper(Context context) {
        super(context, DATABASE_PATH+DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        CountriesDb.onCreate(db);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        CountriesDb.onUpgrade(db, oldVersion, newVersion);
    }
} 
```

不要忘记为您的清单添加权限：

```
<uses-permission
    android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

完毕！如果您通读上面的帖子，答案是基于柯克斯的建议，因此阅读他推荐的链接会有所帮助。我还有更多的测试要做，以防我之前的数据库结构错误。

# java - 为什么java编译器会为单个java文件生成多个.class文件？

> ID：15706584
> 
> 赞同：3
> 
> 时间：2013-03-29T15:47:37.937
> 
> 标签：java, class, compiler-construction

为什么 java 编译器会为单个 java File 生成多个 .class 文件？

我写了一些java代码 Deadlock.java ，在编译它时它生成了多个名为 Deadlock$someNumber.class 的类。

为什么会发生这种情况.??

它有什么意义？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:54:48.730

如果您在同一个文件中有多个类（其中一个是必需的公共类并且与该文件具有相同的名称），请说在您的 Person.java 文件中，您有以下内容

```
 public class Person{
}
class Classroom{
} 
```

编译器将为文件 Person.java 中的每个类创建一个类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:49:58.073

这些是匿名类。您的代码包含类似`new SomeInterface(){}`和/或`new SomeClass(){}`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T15:50:40.347

我相信当你使用匿名内部类时它通常会这样做。这些类中的每一个都将获得一个类文件，但是当您没有为它们声明名称时，它会获得一个数字。因此，您创建的任何未命名的类声明（可能是 Runnable 或 Listeners 等）可能正在创建这些声明。

# r - 如何将列作为行名放在数据框中

> ID：15706586
> 
> 赞同：7
> 
> 时间：2013-03-29T15:47:38.567
> 
> 标签：r

我正在尝试计算 R 中的距离，但在我的数据框中，第一个变量（列）是一个 ID，例如我有这个：

```
行名 ID 金额 1
1 0015 15
2 9812 25
3 1672 89

```

我想要这样的东西：

```
行名数量1
   0015 15
   9812 25
   1672 89

```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T15:49:32.230

只需使用：

```
rownames(df) <- df$ID 
```

请注意，如果 df 是数据框，则行名必须是唯一的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T16:01:32.197

也许你正在寻找这个：

```
> DF <- DF[, -1]
> colnames(DF)[1] <- 'rownames'
> DF
  rownames Amount1
1       15      15
2     9812      25
3     1672      89 
```

# php - 如何使用 PHP xpath 获取样式属性名称

> ID：15706591
> 
> 赞同：1
> 
> 时间：2013-03-29T15:47:50.907
> 
> 标签：php, xpath, domdocument

我需要获取所有具有样式属性的标签

```
$html = '<div style="font-style: italic; text-align: center; 
background-color: red;">On The Contrary</div><span 
style="font-style: italic; background-color: rgb(244, 249, 255); 
font-size: 32px;"><b style="text-align: center; 
background-color: rgb(255, 255, 255);">This is USA</b></span>';

$dom = new DOMDocument;
$dom->loadHTML($html);
$xp = new DOMXpath($dom);

foreach ($xp->query('/*[@style]') as $node) {
    $style =  $node->getAttribute('style');
    echo $style;
} 
```

但它什么都没有。我的代码有什么错误？此外，我还想只获取样式中的 CSS PROperty 名称，例如 font-size、font-weight、font-family 而不是它们的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T16:00:34.927

您只需要在表达式中再添加一个正斜杠：

```
foreach( $xp->query('//*[@style]') as $node) {
    echo $node->tagName . " = " . $node->getAttribute('style') . "\n";
} 
```

这将打印（请注意，它会在现有属性中保留换行符）：

```
div = font-style: italic; text-align: center; 
background-color: red;
span = font-style: italic; background-color: rgb(244, 249, 255); 
font-size: 32px;
b = text-align: center; 
background-color: rgb(255, 255, 255); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:07:37.983

xpath 选择器是

```
//*[@style] 
```

对于样式内容，您必须对其进行解析，这意味着

```
$attr_names = array_map( function($v){ return (explode(':',$v))[0];}, 
                          explode(';',$style)); 
```

# c# - 使用静态表单变量启动 Winform 应用程序

> ID：15706595
> 
> 赞同：1
> 
> 时间：2013-03-29T15:48:01.297
> 
> 标签：c#, winforms, static

我想知道使用程序级静态表单变量来保存对我的 MainUI 表单的引用是否是一种安全的技术，或者我是否引入了一些可能导致线程或其他问题的东西？具体来说，我担心从应用程序中的多个位置调用静态变量的实例方法。只要对这些实例方法的所有调用都发生在应用程序线程中，我安全吗？

```
static class Program
{
    static internal MainUI MainUI;

    [STAThread]
    static void Main()
    {
        ...            
        AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
        Application.ThreadException += new System.Threading.ThreadExceptionEventHandler(Application_ThreadException);
        MainUI = new MainUI();
        Application.Run(MainUI);
        ...    
    }

    static void Application_ThreadException(object sender, System.Threading.ThreadExceptionEventArgs e)
    {
        ...
        MainUI.SetBusyState(false);
        ...
    }

    static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        ...
        MainUI.SetBusyState(false);
        ...
    } 
```

上面的代码完成了几件事。

首先，应用程序本身有数百个不同的调用来通过互联网检索数据，这通常需要几秒钟才能完成。在此期间，需要禁用 MainUI 并显示等待光标。我可以依赖 Application_ThreadException 和 CurrentDomain_UnhandledException 处理程序，我可以使用 MainUI.SetBusyState 方法重新启用 UI，而不是将每个调用包装在 try catch 块中以正确重置 MainUI 的状态。

其次，我可以在 MainUI 上创建有用的实例方法，并使用 Program.MainUI 以干净的方式将它们提供给应用程序的其余部分。例如，我可以在我的用户控件中使用**Program.MainUI.SetBusyState**而不是**((MainUI)this.ParentForm).SetBusyState**。但是使用像这样的实例方法是我主要关心的问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:54:05.653

你在那里所做的事情是非常合法的，因为应用程序本身只有一个主窗体，只有在应用程序关闭时才会被销毁。如果您使用其他形式执行此操作，那将是一个更大的问题。

但是，如果你想摆脱静态变量，你可以这样做：

```
 [STAThread]
   static void Main()
   { 
        MainUI form = new MainUI();
        AppDomain.CurrentDomain.UnhandledException += (s,e)=> {
            form.SetBusyState(false);
        };
        Application.ThreadException += (s,e)=> {
            form.SetBusyState(false);
        };  
        Application.Run(form);
    } 
```

# ios - 如何访问 MFMailComposeViewController 中的发送或取消按钮，即使它是邪恶的

> ID：15706598
> 
> 赞同：0
> 
> 时间：2013-03-29T15:48:06.303
> 
> 标签：ios, mfmailcomposeviewcontroller

我在 SO 上看到过很多类似的问题，但每个答案都是“苹果文档说不要那样做”。尽管如此，我还是忍不住认为可以通过私有 API 来做到这一点。例如，任何人都知道如何访问/修改在取消按钮上调用的样式和/或选择器（即使这样做很糟糕，而且您的应用程序肯定会被 Apple 商店拒绝）？

# c# - 为什么我会收到“规范中多次出现列 ID”？

> ID：15706599
> 
> 赞同：-1
> 
> 时间：2013-03-29T15:48:08.900
> 
> 标签：c#, sql, compact-framework, sql-server-ce, windows-ce

我有代码可以在不存在的情况下创建一个表并添加所有必要的列，但是对于用户拥有旧版本表的情况，它会添加一些新的

列。然而，当第二个条件为真并且添加列的 DDL 运行时，我得到，“列 ID 在规范中出现了不止一次”

这是代码以及用于确定表和列是否存在的辅助函数：

```
 bool tableExists = dbconn.isValidTable(tablename) != -1;
    if (!tableExists) 
    {
        ddl = "CREATE TABLE Bla (. . . salvationID nvarchar(19), salvation float, discount float)";
        dbconn.DBCommand(ddl, false);
    }
    else // (the table does exist) 
    {
        if(!dbconn.isValidField(tablename,"redemptionID"))
        {
            ddl = string.Format("ALTER TABLE {0} ADD redemptionID nvarchar(19) ", tablename);
            dbconn.DBCommand(ddl,false);
            . . .

        public int isValidTable(string tableName)
        {
            int validTable = -1;
            string tblQuery = string.Format("SELECT COUNT(*) FROM {0}", tableName);
            checkConnection();
            try
            {
                SqlCeCommand cmd = objCon.CreateCommand();
                cmd.CommandText = tblQuery;
                object objcnt = cmd.ExecuteScalar();
                validTable = Int32.Parse(objcnt.ToString());
            }
            catch
            {
                validTable = -1;
            }
            return validTable;
        }

//This has been beautified/elegantized thanks to p.s.w.g at http://stackoverflow.com/questions/15693639/how-can-i-determine-whether-a-column-exists-in-a-sql-server-ce-table-with-c
        public bool isValidField(string tableName, string columnName)
        {
            bool retVal;
            string tblQuery = "SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @tableName AND 

COLUMN_NAME = @columnName";
            checkConnection();
            try
            {
                SqlCeCommand cmd = objCon.CreateCommand();
                cmd.CommandText = tblQuery;
                SqlCeParameter tblNameParam = new SqlCeParameter("@tableName", SqlDbType.NVarChar, 128);
                tblNameParam.Value = tableName;
                cmd.Parameters.Add(tblNameParam);
                SqlCeParameter colNameParam = new SqlCeParameter("@columnName", SqlDbType.NVarChar, 128);
                colNameParam.Value = tableName;
                cmd.Parameters.Add(colNameParam);
                object objvalid = cmd.ExecuteScalar();
                retVal = !Convert.IsDBNull(objvalid);
            }
            catch
            {
                retVal = false; 
            }
            return retVal;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:09:10.033

尝试检查`DBNull.Value`.

```
try
{
  SqlCeCommand cmd = objCon.CreateCommand();
  cmd.CommandText = tblQuery;
  object objcnt = cmd.ExecuteScalar();
  if ((objcnt != null) && (objcnt != DBNull.Value)) {
    validTable = Int32.Parse(objcnt.ToString());
  } else {
    MessageBox.Show("NULL returned from CreateCommand. Remove this line.");
  }
}
catch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:26:53.463

我怀疑正在发生的事情`isValidField()`是抛出一个异常，而你的捕获只是在说明该字段不存在时吞下它......当它可能存在时。

我强烈建议您不要只是吞下它，而是实际显示该消息，以便您知道发生了什么。

例如：

```
public bool isValidField(string tableName, string columnName)
{
    bool retVal;
    string tblQuery = "SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @tableName AND COLUMN_NAME = @columnName";
    checkConnection();
    try
    {
        SqlCeCommand cmd = objCon.CreateCommand();
        cmd.CommandText = tblQuery;
        SqlCeParameter tblNameParam = new SqlCeParameter("@tableName", SqlDbType.NVarChar, 128);
        tblNameParam.Value = tableName;
        cmd.Parameters.Add(tblNameParam);
        SqlCeParameter colNameParam = new SqlCeParameter("@columnName", SqlDbType.NVarChar, 128);
        colNameParam.Value = tableName;
        cmd.Parameters.Add(colNameParam);
        object objvalid = cmd.ExecuteScalar();
        retVal = !Convert.IsDBNull(objvalid);
    }
    catch(Exception ex)
    {
        MessageBox.Show(ex.Message);
        retVal = false; // <-- wrong answer
    }
    return retVal;
} 
```

此外，该函数不应该是布尔值。你有3个条件：1.存在；2.不存在；3\. 发生错误。

如果发生错误，您不希望后面的方法认为它找不到它。另外，我会对您验证表存在的地方做同样的事情。

# javascript - JavaScript 使用一个链接打开两个网页

> ID：15706601
> 
> 赞同：0
> 
> 时间：2013-03-29T15:48:11.580
> 
> 标签：javascript, html

单击一个链接时，我需要 JavaScript 代码或 HTML 以使两个网站在两个新的浏览器选项卡中打开。我不希望它们在新窗口或链接所在的当前页面上打开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:49:41.233

它可能不起作用，因为浏览器可能会将其视为弹出窗口并阻止它。

如果用户允许弹出窗口，您可以执行以下操作：

```
window.open(url, '_blank'); 
```

喜欢：

```
<a id="mydoublelink" href="http://site1.com" target="_blank">foo</a>

document.getElementById("mydoublelink").onclick=function(){
    window.open('http://site2.com', '_blank');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:54:28.680

如果你打电话给`window.open`你`onclick`应该没问题。内置的弹出窗口阻止程序**允许**这些。被阻止的弹出窗口类型来自其他事件或来自预定事件，如`setTimeout`.

```
document.getElement("my_link").onclick = function () {
    window.open(/*..*/); // works
}

document.getElement("my_link").onclick = function () {
    setTimeout(function () {
        window.open(/*..*/); // will probably get blocked
    });
} 
```

这意味着，例如，如果您在 AJAX 调用之后打开一个弹出窗口，它很可能会被阻止。在这种情况下，一种解决方法是立即打开弹出窗口并稍后填写内容。这超出了这个问题的范围，但我觉得这是每个人都应该知道的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:26:21.700

像这样的东西？

```
<!DOCTYPE html>
<html>
<head>
<script>
function open_win() 
{
window.open("URL");
open_win_two();
}
function open_win_two()
{
window.open("URL");
}
</script>
</head>
<body>
<a onclick="open_win()">luyfl</a>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-29T15:53:08.070

Yu可以尝试新的目标`_newtab`：

```
<a href="site.html" target="_newtab">blabla</a> 
```

火狐浏览器支持，不知道其他浏览器是否支持。

# opencv - OpenCV Mat 每元素运算：向量矩阵乘法

> ID：15706607
> 
> 赞同：2
> 
> 时间：2013-03-29T15:48:25.013
> 
> 标签：opencv, matrix, matrix-multiplication, mat

**I**是一个*mxn矩阵，* **I**的每个元素都是一个*1x3*向量（实际上**I**是一个 3 通道 Mat 图像）。

**M**是一个*3x3*矩阵。

**J是一个与****I**具有相同维度的矩阵，计算如下：**J的每个元素是****I**和**M**的对应（即具有相同坐标）元素的向量矩阵乘积。

即如果*v1(r1,g1,b1)*是**I**的一个元素，而*v2(r2,g2,b2)*是其对应的**J**元素，那么*v2* = *v1* * **M**（这是一个向量矩阵乘积，而不是一个 per-元积）。

问题：如何有效地计算**J**（在速度方面）？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T09:52:06.927

据我所知，实现这种操作的最有效方法如下：

1.  **将I**从*mxnx3*重塑为*(m·n)x3*，我们称之为**I'**
2.  计算**J'** = **I'** * **M**
3.  **将J'**从*(m·n)x3*重塑为*mxnx3*，这就是我们想要的**J**

想法是将每个逐像素操作**p [i] '** · **M**堆叠成一个单独的操作**P'** · **M**，其中**P**是包含列中每个像素的*3x(m·n)*矩阵（因此**P'**每行包含一个像素。这只是一个约定，真的）。

这是一个用 C++ 编写的代码示例：

```
//  read some image
cv::Mat I = cv::imread("image.png");               //  rows x cols x 3

//  some matrix M, that modifies each pixel
cv::Mat M = (cv::Mat_<float>(3, 3) << 0,  0,  0, 
                                      0, .5,  0, 
                                      0,  0, .5);  //  3 x 3

//  remember old dimension
uint8_t prevChannels = I.channels;                 
uint32_t prevRows = I.rows;                        

//  reshape I
uint32_t newRows = I.rows * I.cols;                
I = I.reshape(1, newRows);                         //  (rows * cols) x 3

//  compute J
cv::Mat J = I * M;                                 //  (rows * cols) x 3

//  reshape to original dimensions
J = J.reshape(prevChannels, prevRows);             //  rows x cols x 3 
```

OpenCV 提供了*O(1)*的整形操作。因此性能完全取决于矩阵乘法，我希望它在计算机视觉库中尽可能高效。

To further enhance performance, you might want to take a look at matrix multiplication using the [ocl](http://docs.opencv.org/modules/ocl/doc/operations_on_matrices.html#ocl-gemm) and [gpu](http://docs.opencv.org/modules/gpu/doc/operations_on_matrices.html#gpu-gemm) modules.

# java - 使用套接字制作多线程聊天服务器

> ID：15706610
> 
> 赞同：0
> 
> 时间：2013-03-29T15:48:29.307
> 
> 标签：java, tcp, chat, channels

我正在使用 TCP 套接字对服务器聊天进行编码。我实施了公共和私人信息。现在，我该如何制作频道？如何将通道与套接字客户端链接？我做了一个`String[]`这样的：

```
if (frase.startsWith("/make")) {
    //crea sala
    String[] privado = frase.split("\\s", 2);
    synchronized (this) {
        end = false;
        for (int i = 0; i < MAX && !end; i++){
            if (salas[i] == null) {
                canal = privado[1];
                salas[i] = canal;
                end = true;
            } else if (privado[1].startsWith(salas[i])) {
                salidaACliente.println("Ya existe " + privado[1] + "\n");
                end = true;
            }
            if (i == MAX - 1) {
                salidaACliente.println("Espacio de canales lleno.\n");
                end = true;
            }
        }
    }
} 
```

例如：

*   0-通道1
*   1通道2

所有用户都可以使用命令查看创建的频道`/seechannels`

```
String[] salas = new salas[20]; 
```

但到目前为止，一个频道只是一个`String`. 我现在如何使用 将通道与套接字链接`/join channel1`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T14:43:24.807

例如，您可以在所有线程中创建一个数组，该数组存储用户所属的通道。

```
boolean joinedChannels[] = new Boolean[max_channels];

// Remember to intialize the array.

if (cmd == "/joinchannel") {            // cmd here is the issued command
   joinedChannels[args[0]] = true;      // args[] is an array of the arguments
                                        // following the command. This sets the
                                        // desired channel to be active.
} else if (cmd == "/leavechannel") {
   joinedChannels[args[0]] = false;     // And this here sets it inactive.
} 
```

# php - php中的Twitter搜索api（使用curl）总是返回null

> ID：15706612
> 
> 赞同：0
> 
> 时间：2013-03-29T15:48:34.190
> 
> 标签：php, twitter

我正在尝试使用 twiiter api 通过 cURL 在 php 中使用以下代码获取推文，但它似乎总是返回 NULL。

```
//$urlfetch = "https://search.twitter.com/search.json?q= geocode:".round($_GET['param1'],4).",".round($_GET['param2'],4).",25mi"; 

$urlfetch = "https://api.twitter.com/1/geo/search.json?query=Toronto"; 

    echo urlencode($urlfetch);
    echo $urlfetch;

    $ch = curl_init();
    $timeout = 30; // set to zero for no timeout
    curl_setopt ($ch, CURLOPT_URL, $urlfetch);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    curl_setopt ($ch, CURLOPT_PROXY, "10.3.100.209:8080");
    $response = curl_exec($ch);
    curl_close($ch);
    echo "<br />";
    var_dump($response);
    $response = json_decode($response);
    echo "<br />";
    var_dump($response); 
```

编辑：对于 $urlfetch = " [https://search.twitter.com/search.json?q=%20geocode:40.7,73.9,25mi](https://search.twitter.com/search.json?q=%20geocode:40.7,73.9,25mi) "; 使用同一代理从浏览器输入时在[http://pastebin.com/jQ9S2gV4](http://pastebin.com/jQ9S2gV4)处响应。

# java - 外围 Java 线程的方法的后台工作对调用线程的影响

> ID：15706613
> 
> 赞同：0
> 
> 时间：2013-03-29T15:48:36.943
> 
> 标签：java, android, multithreading

我有一个基于 Java 的应用程序 (Android)，我希望能够在后台执行潜在的长时间操作。AsyncTask 上的 Android 文档建议不要将它们用于可能运行超过几秒钟的任务（为什么会这样？）所以我改用 Java 线程的子类。这个 Thread 子类（HPHeadThread）的目标主要是承载一些异步控制机制的实例，并为这些机制提供访问器方法供其他线程使用。我的目标是能够从引用 HPCHeadThread 的任何线程调用 hHPHeadThread.doStuff()，并让在 HPCHeadThread 中实例化的控制对象在 HPCHeadThread 线程上工作，并且仅在该线程上工作。当没有被其他线程访问时，HPCHeadThread 应该休眠，以免浪费 CPU 周期。

测试活动.java

```
//..snip
private HPCHeadThread hHPCHeadThread;

@Override
protected void onCreate(Bundle savedInstanceState){
  super.onCreate(savedInstanceState);
  //...snip 

  //Create and start our HPCHeadThread
  hHPCHeadThread = HPCHeadThread.getHPCThreadHead();
  hHPCHeadThread.start();

  //..snip
} 
```

HPCHeadThread.java

```
//..snip
public class HPCHeadThread extends Thread {
  private static volatile HPCHeadThread instance;
  private static boolean bIsActive = true;

  private HPCHeadThread(){
    super();        
  }

  public static HPCHeadThread getHPCThreadHead(){

    if(instance == null && bIsActive){
      instance = new HPCHeadThread();   
    }

    return instance;

  }

  public void safeStop(){
    instance = null;
    bIsActive = false;
  }

  @Override
  public void run(){
  Thread thisThread = Thread.currentThread();
  Thread.currentThread().setName("HPC_Head_Thread");

  while(instance == thisThread){
    //Our HPCHeadThread 'main' loop
    //Try to have it sleep whenever it isn't being used
    //Hopefully it will wake nicely upon attempted access,
    //perform the desired function, and then return to sleep

      try{
        Thread.sleep(10000);
      }
      catch (InterruptedException e){
        //e.printStackTrace();
      }

    }//End while
  }//End Run()

  public void doStuff(){
    //..snip stuff..
  }

} 
```

现在，如果我从我的主 TestActivity 线程中调用 hHPHeadThread.doStuff()，工作进程是在 HPCHeadThread 上还是在主 TestActivity 线程上？TestActivity 是否等待 doStuff() 方法返回，然后在其自己的线程中继续顺序执行？方法调用是否会唤醒 HPCHeadThread 和/或它们是否会导致在 HPCHeadThread 的 run() 方法的 while 循环中引发 InterruptedException？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:11:14.093

Android 文档建议不要在活动中长时间运行线程，因为活动可以在系统需要内存并且应用程序在后台运行的任何时候被换出。

如果您想做长时间运行的任务：创建一个专门用于此的服务：长时间运行的任务在需要更多内存时不应被丢弃。

关于排队的事情：听起来是个好建议。只需使用具有阻塞调用的 ArrayBlockingQueue：take()

像这样创建您的工作线程和队列：

```
public class Workqueue implements Runnable {

private static Workqueue theInstance=null;

public static synchronized Workqueue getInstance(){
   if(theInstance==null){
       theInstance=new WorkQueue();
     }
  return theInstance;
  }

private ArrayBlockingQueue<Runnable> queue=new ArrayBlockingQueue<Runnable>();
private Thread workerThread;

private WorkQueue(){
    workerThread=new Thread(this);
    workerThread.start();
}

public void run(){
   while(keepRunning){
      //pick up next task or wait (not using any cpu cycles)
      Runnable r=queue.take();
      //execute task
      r.run();
    }
}

public void addTask(Runnable task){
   queue.add(task);
} 
```

用法是：

```
Runnable newTask= new Runnable(){
public void run(){
   dostuff...
}};
Workqueue.getInstance().addTask(newTask); 
```

这可以从任何线程调用而不阻塞它，它将任务添加到队列中，这些任务将被一一执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:39:01.743

首先，我认为您可以使用旧的 Singleton 设计模式来实现从任何地方都可以访问一个线程。它看起来像：

```
public class MyThread extends Thread () {
  private static MyThread _me;

  private MyThread() { /* make constructors private it can only be made by getting an instance */ }

  public static MyThread getInstance() {
    if(_me == null) {
      _me = new MyThread();
    }
    return _me;
  }
} 
```

其次，调用 doStuff() 将在调用线程中运行。在 Java 线程中，所有线程的处理都发生在 run() 方法中。

最后，如果线程不需要立即执行，您可能希望查看实现等待和通知，或者定时等待。

# android - Android：拆分ActionBar真实父级高度

> ID：15706616
> 
> 赞同：3
> 
> 时间：2013-03-29T15:48:44.107
> 
> 标签：android, android-actionbar, android-relativelayout

我使用操作栏（起源于 android，而不是 ABS）并将我的视图相对放置在根布局 ( `RelativeLayout`) 上。为了计算屏幕上的相对位置，我使用了视图的`getParent().getHeight()`/`getParent().getWidth()`方法。使用普通的 ActionBar 可以正常工作。我得到了父级的实际高度（活动高度 - 操作栏高度，例如 800 像素显示屏上的 690 像素）。但是，如果我使用该`splitActionBarWhenNarrow`选项并显示底部栏，我将得到与父级相同的高度（例如，在 800 像素的屏幕上再次显示 690 像素）。因此，我的一些以编程方式定位的 vie 位于底部操作栏下方。

在没有操作栏的情况下，如何获得父级的真实高度？

编辑：

`onWindowFocusChanged`我在活动的方法上阅读了父宽度和高度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T18:23:06.227

顶部和底部操作栏的高度相同。据我所知，您不能以编程方式请求操作栏的大小。 [这篇](https://stackoverflow.com/a/12304018/338724)文章提供了一个示例，说明如何使用样式设置操作栏高度以使其保持一致。

要确定操作栏是否已拆分，您必须手动计算。根据[设计指南](http://developer.android.com/design/patterns/actionbar.html)（靠近底部）

> 主操作栏中可以容纳多少操作？操作栏容量由以下规则控制：
> 
> *   主操作栏中的操作按钮不得超过该栏宽度的 50%。底部操作栏上的操作按钮可以使用整个宽度。
>     
>     
> *   与密度无关的像素 (dp) 中的屏幕宽度决定了适合主操作栏的项目数：
>     
>     
> *   小于 360 dp = 2 个图标
>     
>     
> *   360-499 dp = 3 个图标
>     
>     
> *   500-599 dp = 4 个图标
>     
>     
> *   600 dp 及更大 = 5 个图标

例子： ![示例表](../Images/17721d29bb51c21e21ac93a2482fbe35.png)

所以你想做这样的事情。

```
DisplayMetrics displayMetrics = new DisplayMetrics();
Display display = getWindowManager().getDefaultDisplay();
display.getMetrics(displayMetrics);

float density  = displayMetrics.density;
// width in dp
float width = (displayMetrics.widthPixels / density);

// I will assume you have 3 action bar icons

if (width < 360) {
    // 2 menu items fit.
    // Calculate action bar height with 2*(actionbar height)
    // to accommodate the bottom action bar.

} else {
    // 3+ menu items fit
    // Calculate action bar height with 1*(actionbar height).
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T18:28:01.163

> 以及如何检测操作栏是否拆分？

简单的。您使用布尔值。默认情况下，如果屏幕宽度小于 400dp，您将拥有一个拆分的 ActionBar。已经声明了一个（这是 ActionBar 用来确定它是手机设备还是平板电脑的那个）。如果您的目标是 Android HC+，那么您可以访问默认的 ActionBars 值： `android.R.bool.split_action_bar_is_narrow`如果您使用的是 ActionBarSherlock `R.bool.abs_split_action_bar_is_narrow`：。[在这里](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/bools.xml)找到默认的 ActionBar，[这里](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/res/values/abs__bools.xml)是您的 ABS。

现在您可以像这样访问布尔值：

```
boolean isActionBarSplitted = getResources().getBoolean(R.bool.split_action_bar);
if(isActionBarSplitted){
      // Parent height - SplitActionBar height
}
else{
     // No Split ActionBar
} 
```

请记住，这`android.R.bool.split_action_bar_is_narrow`是一个内部资源，所以你必须让它像[这里](https://stackoverflow.com/questions/8683411/the-import-com-android-internal-r-cannot-be-resolved/8683466#8683466)描述的那样工作。

# android - 在 Android Target 2.3.4 上运行 Google 地图应用程序会产生致命异常

> ID：15706618
> 
> 赞同：3
> 
> 时间：2013-03-29T15:48:53.023
> 
> 标签：android, eclipse, google-maps, google-play-services

我创建了一个使用 Google 地图的 Android 应用程序。我正在使用 Eclipse，活动布局 xml 如下。

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:orientation="vertical" >

      <fragment
          android:name="com.google.android.gms.maps.SupportMapFragment"

          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent" />
  </LinearLayout> 
```

这是 Activity 类

```
 @SuppressLint("ShowToast")
 public class MapViewActivity extends FragmentActivity {
  static LatLng currentLatLng;
  LatLng currentLocation;
  private GoogleMap map;
  boolean firstPass = true;
  double currentLat;
  double currentlong;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map_view);

    showCurrentLocationOnMap(); 
    try {
        showSheltersAndFuelStops();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
//This will change when SQL connection string is implemented.
private void showSheltersAndFuelStops() throws IOException {
    List<McDonalds> mcdList = new ArrayList<McDonalds>();
    List<Subway> subwayList = new ArrayList<Subway>();
    String subwayRoswell1 = "1307 N Main St, Roswell, NM, 88203";
    String subwayRoswell2 = "1701 W Second St, Roswell, NM, 88201";
    String subwayLC1 = "2001 E Lohman, Las Cruces, NM, 88001";
    String subwayLC2 = "2821 N Telshor, Las Cruces, NM 88011";
    String mcdonaldsRoswell1 = "720 N Main St, Roswell, NM, 88201";
    String mcdonaldsRoswell2 = "1804 S Main St, Roswell, NM, 88203";
    String mcdonaldsLC1 = "4810 Mesa Grande, Las Cruces, NM, 88012";
    String mcdonaldsLC2 = "571 Walton Blvd, Las Cruces, NM, 88001";

          Subway subway = new Subway(" 1307 N Main St, Roswell, NM, 88203", 1.58, 8.0);
    subwayList.add(subway);
    Subway subway1 = new Subway(" 1701 W Second St, Roswell, NM, 88201", 2.47, 12.0);
    subwayList.add(subway1);
    Subway subsLC = new Subway(" 2001 E Lohman, Las Cruces, NM, 88001", 147.99, 185.0);
    subwayList.add(subsLC);
    Subway subsLC1 = new Subway(" 2821 N Telshor Drive, Las Cruces, NM, 88011", 147.12, 200.0);
    subwayList.add(subsLC1);

    McDonalds mcdonalds = new McDonalds(" 720 N Main St, Roswell, NM, 88201", 1.08, 8.0);
    mcdList.add(mcdonalds);
    McDonalds mcdonalds1 = new McDonalds(" 1804 S Main St, Roswell, NM, 88203", 2.9, 12.0);
    mcdList.add(mcdonalds1);
    McDonalds mcdonaldslc = new McDonalds(" 4810 Mesa Grande, Las Cruces, NM, 88012", 143.2, 185.0);
    mcdList.add(mcdonaldslc);
    McDonalds mcdonaldslc1 = new McDonalds(" 571 Walton Blvd, Las Cruces, NM, 88001", 147.62, 200.0);
    mcdList.add(mcdonaldslc1);

    showFuelStops(subwayRoswell1);
    showFuelStops(subwayRoswell2);
    showFuelStops(subwayLC1);
    showFuelStops(subwayLC2);
    showShelters(mcdonaldsRoswell1);
    showShelters(mcdonaldsRoswell2);
    showShelters(mcdonaldsLC1);
    showShelters(mcdonaldsLC2);
}

private void showFuelStops(String location) throws IOException{
    Geocoder geocoder = new Geocoder(this, Locale.getDefault());  
    List<Address> addresses;

    addresses = geocoder.getFromLocationName(location, 1);
    if(addresses.size() > 0) {
        BitmapDescriptor subwayBitmapDescriptor = BitmapDescriptorFactory.fromResource(R.drawable.fillingstation);
        currentLat= addresses.get(0).getLatitude();
        currentlong= addresses.get(0).getLongitude();
        LatLng subLoc = new LatLng(currentLat, currentlong);
        Marker fuelMarker = map.addMarker(new MarkerOptions().position(subLoc).icon(subwayBitmapDescriptor).title("Subway, " + location));

    }       
}

private void showShelters(String location) throws IOException{
    Geocoder geocoder = new Geocoder(this, Locale.getDefault());  
    List<Address> addresses;

    addresses = geocoder.getFromLocationName(location, 1);
    if(addresses.size() > 0) {
        BitmapDescriptor subwayBitmapDescriptor = BitmapDescriptorFactory.fromResource(R.drawable.shelter);
        double latitude= addresses.get(0).getLatitude();
        double longitude= addresses.get(0).getLongitude();
        LatLng subLoc = new LatLng(latitude, longitude);
        Marker hamburg = map.addMarker(new MarkerOptions().position(subLoc).icon(subwayBitmapDescriptor).title("McDonalds, " + location));

    }       
}

private void showCurrentLocationOnMap(){
    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    SupportMapFragment mf= (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map);

    map = mf.getMap();
    //map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
    LocationListener ll = new Mylocationlistener();
    boolean isGPS = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);

    if (!isGPS){
        Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
        intent.putExtra("enabled", true);
        sendBroadcast(intent);
    }

    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 10, ll);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.map_view, menu);
    return true;
}
/**
 *Mylocationlistener class will give the current GPS location 
 *with the help of Location Listener interface 
 */
private class Mylocationlistener implements LocationListener {
    private boolean zoomed = false;
    @Override
    public void onLocationChanged(Location location) {

        if (location != null) {
            // ---Get current location latitude, longitude---

            Log.d("LOCATION CHANGED", location.getLatitude() + "");
            Log.d("LOCATION CHANGED", location.getLongitude() + "");
            currentLocation = new LatLng(location.getLatitude(), location.getLongitude());
            currentLatLng = new LatLng(location.getLatitude(), location.getLongitude());
            Marker currentLocationMarker = map.addMarker(new MarkerOptions().position(currentLocation).title("Current Location"));
            // Move the camera instantly to hamburg with a zoom of 15.
            map.moveCamera(CameraUpdateFactory.newLatLngZoom(currentLatLng, 15));
            // Zoom in, animating the camera.
            if (!zoomed) {
                map.animateCamera(CameraUpdateFactory.zoomTo(12), 2000, null);
                zoomed = true;
            }
            if (!firstPass){
                currentLocationMarker.remove();
            }
            firstPass = false;
            Toast.makeText(MapViewActivity.this,"Latitude = "+
                    location.getLatitude() + "" +"Longitude = "+ location.getLongitude(),
                    Toast.LENGTH_LONG).show();

        } else {
            //MapViewActivity.this.startActivity(new Intent(MapViewActivity.this, NoGPSLocActivity.class));
        }
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
} 
```

}

当我在其他版本的 Android 上运行此应用程序时，应用程序运行良好，但在 Android 2.3.4 的目标上，我得到了这个致命的异常。

![致命异常](../Images/ca1bcbed83d63a02e7564b89b8868385.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:27:05.557

您收到错误是因为您尝试`Fragment`在不支持`Fragment`s 开箱即用的 Android 系统上使用 a 。要为此版本的操作系统启用片段支持，您必须将项目中的引用添加到`google-support-v4`库中。并在您的 xml 中使用该`SupportMapFragment`对象而不是`MapFragment`. 你的活动必须扩展`FragmentActvitiy`，而不是`Activity`像现在这样的普通活动。

您可以在我写的博客文章中阅读更多关于如何向`Google Map API V2`您的应用程序添加支持 erliear OS 版本的信息：

[谷歌地图 API V2](http://blog-emildesign.rhcloud.com/?p=435)

**更新：**

请确保以下 3 个选定的 jar 文件`(red)`位于您的 Android Dependencies 文件夹中`(green)`：

![在此处输入图像描述](../Images/dcd73b4d81d60e2139ca8d5ec9605ded.png)

# symfony - 如何为此配置我的 Twig / Symfony2 服务？

> ID：15706627
> 
> 赞同：0
> 
> 时间：2013-03-29T15:49:21.137
> 
> 标签：symfony, twig

如何为此配置我的服务？

[https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Extension/RoutingExtension.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Extension/RoutingExtension.php)

我猜它是这样的：

```
 twig.extension.anyName:
    class: Bundle\Twig\RoutingExtension
    arguments:
      - "twig.extension.routing"
    tags:
      - { name: twig.extension } 
```

...但它错误：

```
Catchable Fatal Error: Argument 1 passed to Bundle\Twig\RoutingExtension::__construct() must implement interface Symfony\Component\Routing\Generator\UrlGeneratorInterface, string given... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:23:49.907

引用其他服务的有效语法是 @ 符号后跟服务名称。目前，您正在将字符串“twig.extension.routing”传递给您的服务构造函数。

如果您想将服务实例传递给您的服务，它可能看起来像这样

```
 twig.extension.anyName:
    class: Bundle\Twig\RoutingExtension
    arguments:
      - "@twig.extension.routing"
    tags:
      - { name: twig.extension } 
```

# python - 使用 python 访问和操作硬件

> ID：15706637
> 
> 赞同：1
> 
> 时间：2013-03-29T15:50:14.900
> 
> 标签：python, hardware

因此，我正在尝试学习如何让程序访问其他非集成硬件设备（例如 RFID）。我不太明白的是程序如何访问设备的内部功能。是否需要某个库/库来执行此操作，或者是否需要使用/创建硬件驱动程序？

对于我目前正在进行的项目，我基本上是在尝试让程序在某些情况下使用设备的各种功能。例如，我将如何请求程序更改 ipod 上的歌曲或暂停它？这是假设 ipod 已经与计算机建立了有线连接。

对于我的实际项目，我将合并一个语音识别程序（稍后，我将自己制作。现在我将使用 Dragonfly）。因此，当我说某些命令时，它需要告诉设备执行该命令，例如告诉家庭集成系统打开房子里的灯或电动门锁来锁定/解锁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:53:28.290

您将需要某种已经与硬件接口的现有库（如家庭集成系统），以及允许您解决它的 API。如果你很幸运，他们已经有一个 python API，如果没有，你需要通过 C 集成。

[在 python 中使用硬件进行编程](https://stackoverflow.com/questions/919857/programming-with-hardware-in-python)也可能有一些指针，具体取决于您的界面。例如，如果是通过串口，有 Python 库可以处理。使用 Arduino 也会让生活更轻松，因为自从 09 年提出最初的问题以来，它已经完成了更多工作。

# graphics - 当我使用 GIMP 将其缩小时，我的图形图像 [jpg 和 png] 出现拉伸

> ID：15706639
> 
> 赞同：-1
> 
> 时间：2013-03-29T15:50:34.277
> 
> 标签：graphics, gimp

致那里的图形专家：我有一个来自客户的 .png 徽标，我需要将其上传到他们的网站以对其进行个性化。图片必须为 189w x 104h。问题是图像看起来被拉伸了。

最初，客户自己调整了图像的大小并发送给我，所以我向他们询问了原始图像，这是一些 1000 x 800 的巨大图像，他们以 png 和 jpeg 格式发送给我。

因此，使用 GIMP，我使用 scale 选项将其缩小，但它仍然显得拉伸。我已经多次这样做了，但由于我不是平面设计师，我不知道下一步应该采取哪些步骤来正确调整此图像的大小。

有人有建议吗？我会上传图片，但在这里工作的客户保密。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:56:15.193

如果我理解错了，请纠正我。

据我了解您的问题，您有一个尺寸为 1000 x 800 像素的**未拉伸**图像，并希望将其转换为尺寸为 189 x 104 的小得多的图像。

如果这是正确的，则图像在转换后似乎被拉伸的问题是由于大版本的图像尺寸 1000x800 和较小版本的 189x104 不共享相同的高度/宽度比。

计算从 1000 到 189 的宽度，同时保持纵横比，相应的高度必须为 151 = 800 * 189/1000 像素。

如果必须将此高度压缩到 104 像素，则会出现明显的变形量。

另一方面，如果您计算从 800 到 104 的高度，您会发现在保持纵横比的同时，您必须使图像的宽度为 130 = 1000 * 104/800 像素。

为了保持纵横比，唯一的可能性是“牺牲”一部分，方法是在图像周围留下一个缩小到 130 x 104 像素的边框，或者通过裁剪图像去除多余的 151-104 = 47 像素。

## 选项 1：裁剪图像

如果您选择裁剪图像，您会在工具栏中找到一个看起来像刀具的工具。在选项面板中选择此选项后，您将找到一个选项**固定纵横比**，在此处设置十字并输入目标尺寸（189x104）的要求，您仍然可以更改裁剪窗口的大小。

但是您选择的纵横比将保持在您输入的纵横比。如果更改其中任何一个，Gimp 总是会为您计算正确的宽度/高度。

裁剪到所选部分后，您将能够将图像缩放到所需的大小**而不会**出现任何失真。

## 选项 2 留下（透明）边框

另一个选项将要求您将按比例缩小的图像的一部分保留为空白 - 例如，如果它看起来合适，则透明。**要执行此操作，您首先必须使用工具栏中的“图像->缩放图像...** ”将图像缩小到 130x104 像素。如果您确保两个显示的值都是“链接”的，如图标所示，如果您输入所需的 104 像素高度，gimp 甚至会计算适当的宽度。

执行缩小后，您将再次使用工具栏中的“图像->**画布大小... ”来增大画布大小。**

在这里，请确保您按照图标的指示“解链”两个值，只需将宽度调整为您要求的 189，同时将高度保持在 104。您将能够手动或通过推动将图像放置在生长的画布上“中心”按钮使左侧和右侧的边框具有相同的大小。

一旦您对位置感到满意，只需单击“调整大小”按钮。瞧，您的图像将在左侧和右侧具有所需的大小和透明边框。

甚至可能还有第 3 个选项。询问您的客户是否能够为您提供其公司的徽标，该徽标在纵横比方面符合要求。

# c# - 组合框必须是自动完成的，并且只允许从列表中选择值

> ID：15706641
> 
> 赞同：0
> 
> 时间：2013-03-29T15:50:42.690
> 
> 标签：c#, .net

我想要一个组合框功能，例如-

组合框显示项目并具有自动完成功能，因为项目列表非常大。

我希望用户能够通过在具有自动完成功能的框中键入内容来从项目列表中选择一个值 - 如果用户键入不在列表中的内容，则会自动选择一个可用值。

我不想将错误的文本发送到数据库。

这个组合框是可编辑的，自动完成，但不接受可编辑的值，用户必须通过键入在列表中选择...。

```
private void FrmGroupCreation_Load(object sender, EventArgs e)
    {
        string con = ConfigurationManager.ConnectionStrings["SaiCon"].ConnectionString;
        using (SqlConnection connect=new SqlConnection(con))
        {
            //data table for combox type of account 
            SqlDataAdapter da = new SqlDataAdapter("SELECT *FROM dbo.Type_of_Account",connect);

            DataTable dt=new DataTable();
            da.Fill(dt);
            for (int i = 0; i < dt.Rows.Count ; i++)
            {
                cbTypeofAccount.Items.Add(dt.Rows[i]["type_Of_Acct"]);
            }
            //data table for combobox principle account type
            SqlDataAdapter da1 = new SqlDataAdapter("SELECT *FROM dbo.Principle_Account", connect);

            DataTable dt1 = new DataTable();
            da1.Fill(dt1);
            for (int i = 0; i < dt1.Rows.Count; i++)
            {
                cbPrinciple_account_type.Items.Add(dt1.Rows[i]["Principle_Account"]);
            }
            //data table for combobox Under the group
            SqlDataAdapter da2 = new SqlDataAdapter("SELECT *FROM dbo.Head_group_Account", connect);

            DataTable dt2 = new DataTable();
            da2.Fill(dt2);
            for (int i = 0; i < dt2.Rows.Count; i++)
            {
                cbUnder_the_group.Items.Add(dt2.Rows[i]["Account_name"]);
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:35:59.450

您必须执行以下操作：

1-而不是做循环来填充组合框设置组合框数据源等于数据表并设置值成员和显示成员

```
 cbTypeofAccount.DataSource = dt;
 cbTypeofAccount.DisplayMember = "type_Of_Acct";
 cbTypeofAccount.ValueMember = "your table id"; 
```

2-更改组合框的下拉样式以使其可编辑

```
 cbTypeofAccount.DropDownStyle = ComboBoxStyle.DropDown; 
```

# c# - 为 SQL 搜索添加 '%' 到字符串

> ID：15706648
> 
> 赞同：1
> 
> 时间：2013-03-29T15:50:54.800
> 
> 标签：c#, asp.net, sql

目前我有一个文本框和一个按钮，我可以很好地阅读文本框，它会在数据库中搜索说“苹果”

但如果有一个名为“红苹果”的结果，它不会返回它。

我试过了

```
string getTheBox = (this.searchBox.Text);

string request = "%" +  getTheBox + "%"; 
```

但这似乎不起作用。这是因为“请求”是字符串变量。

编辑以包括 SQL 请求部分

```
SqlDataSource2.SelectCommand = "SELECT Recipe_Name FROM New_Recipe WHERE      [ingredient1]=@request

   SqlDataSource2.SelectParameters.Add(newParameter("request",System.TypeCode.String));
        SqlDataSource2.SelectParameters["request"].DefaultValue = request; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T15:52:51.713

%的添加是正确的，但是你需要改变你的sql查询

您需要使用[LIKE 运算符](http://www.w3schools.com/sql/sql_like.asp)

例如，查询可能是

```
"SELECT Recipe_Name FROM New_Recipe WHERE ingredient1 LIKE @request" 
```

和你的代码

```
 string request = "%" +  getTheBox + "%";
   string sqlText = "SELECT Recipe_Name FROM New_Recipe WHERE ingredient1 LIKE @request";
   using(SqlConnection cn = GetSqlConnection())
   {
       cn.Open();
       using(SqlCommand cmd = new SqlCommand(sqlText, cm);
       {
            cmd.Parameters.AddWithValue("@request", request);
            SqlDataReader dr = cmd.ExecuteReader();
            while(dr.Read())
            {
             ......
            }
       }
   } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T15:53:33.057

请也发布您的 SQL 查询。也许您需要更改`WHERE FruitName = @FruitName`为`WHERE FruitName LIKE @FruitName`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T15:53:06.580

这是一个可怕的想法，因为任何人都可以运行 sql 注入。您可能想要类似于 [Sqlcommand.Prepare的东西](http://msdn.microsoft.com/en-gb/library/system.data.sqlclient.sqlcommand.prepare.aspx)

因为它可以让你设置更安全的争论。并有两个字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:28:20.367

我通常有一些辅助函数可以根据我的需要添加到我的查询中。

```
public List<T> GetRecipesThatContain<T>(string ingredient)
{
    const string commandText = "SELECT Recipe_Name FROM New_Recipe WHERE ingredient1 LIKE @SearchTerm";
    var searchTerm = Contains(ingredient);

    using(var connection = GetSqlConnection())
    {
        connection.Open();

        using(var command = new SqlCommand(commandText, connection);
        {
            command.Parameters.AddWithValue("@SearchTerm", searchTerm);

            using(var reader = command.ExecuteReader())
            {
                var results = new List<T>();

                while(reader.Read())
                {
                    // Get results
                    // results.Add(result);
                }

                return results;
            }
        }
    }
}

private string StartsWith(string searchTerm)
{
    return string.Format("{0}%", searchTerm);
}

private string EndsWith(string searchTerm)
{
    return string.Format("%{0}", searchTerm);
}

private string Contains(string searchTerm)
{
    return string.Format("%{0}%", searchTerm);
} 
```

# perl - 是否有带有用于 Perl 的 GUI 设计器的 IDE？

> ID：15706651
> 
> 赞同：2
> 
> 时间：2013-03-29T15:51:03.220
> 
> 标签：perl, ide, ui-design

任何人都可以向我推荐一个易于使用的 Perl 语言 IDE，并支持 Ubuntu 的 GUI 设计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:15:35.767

看看 Eclipse 的[EPIC](http://www.epic-ide.org)插件。我已经用过几次了，如果你喜欢 Eclipse，那就太好了。

如果您以前从未使用过 Eclipse，则需要下载 Eclipse，安装它，然后安装 EPIC 插件。

[Komodo](http://www.activestate.com/komodo-ide)是 Perl 最好的 IDE 之一，可与 Linux 配合使用，现在仅售 245 美元！

Gabor Szabo 是 Perl 的大人物之一，他创建了[Padre](http://padre.perlide.org)。我从未使用过它，但如果涉及 Szabo，它可能还不错。

我个人使用VIM。是的，它不是*IDE*，但它会突出显示语法，您可以通过按下`K`关键字或模块名称来引用 Perldoc。VIM 不像 IDE 那样易于使用，但我发现在 VIM 中编辑比大多数 IDE 快得多。

# internet-explorer - 在 IE 中单击 Selenium RC 中的按钮时未显示弹出窗口

> ID：15706661
> 
> 赞同：1
> 
> 时间：2013-03-29T15:52:08.320
> 
> 标签：internet-explorer, popup, selenium-rc

Selenium RC 在单击时不会打开弹出窗口。当我手动单击按钮时，会显示弹出窗口。

代码的 HTML 如下所示：

```
< button name="btndm" class="btnLrg" onclick="window.status=''; popUp3('reports/Datamart_reports.cfm?AutoChooseRpt=mdh000')" type="button"> 
```

我在用：

```
selenium.clickAt("name=btndm", "45000"); 
```

但弹出窗口不显示。

浏览器：IE

这个项目是 IE 特定的，所以不能尝试使用任何其他浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T21:38:05.243

您没有正确使用 clickAt() 方法，这篇文章将向您解释 click() 和 clickAt() 之间的区别： [Use of 'ClickAt' selenium command](https://stackoverflow.com/questions/1340171/use-of-clickat-selenium-command)

# css - 为什么Android默认浏览器上的日期输入宽度比文本输入宽度小3px

> ID：15706663
> 
> 赞同：1
> 
> 时间：2013-03-29T15:52:24.647
> 
> 标签：css, html

我正在尝试将本机日期输入用于 HTML5 表单，除了 Android 默认浏览器之外，每个浏览器的宽度都相同。这是一个已知的错误吗？如果是，我该如何解决它，因为我不知道如何仅针对 Android 默认浏览器。

我创建了一个 JSFiddle 来演示这个问题。所有字段都应该刚好接触到左右两边的红线。

HTML：

```
<form>
    <input type="text" id="text1" name="text1" placeholder="text input" />
    <input type="date" id="date1" name="date1" placeholder="date input" />
    <input type="text" id="text2" name="text2" placeholder="text input" />
</form> 
```

CSS：

```
html, body, form, input {
    padding: 0;
    margin: 0;
}
body {
    margin:50px;
}
form {
    width: 202px;
}
form {
    border:1px solid red;
    border-top:none;
    border-bottom:none;
}
input {
    width: 200px;
    border:1px solid black;
    margin-bottom: 5px;
} 
```

[http://jsfiddle.net/ntyjG/](http://jsfiddle.net/ntyjG/)

# html - 调整窗口广告大小将 div 保持在同一位置

> ID：15706664
> 
> 赞同：0
> 
> 时间：2013-03-29T15:52:26.207
> 
> 标签：html, css

嗯..我的英文不好，所以我画我想要的..

整页：[http ://d-3.me/full.jpg](http://d-3.me/full.jpg)

绿色容器是我的内容包装。黑色和红色方块是访问其他页面的一些按钮。

因此，当我调整页面大小时，我想保留这些按钮的另一个图像：

1024px 窗口视图：[http ://d-3.me/1024.jpg](http://d-3.me/1024.jpg)

这是我最初的 HTML：

```
<div id="wrap_home_bts">
    <div class="bt_woman"></div>
    <div class="bt_man"></div>
</div> 
```

这是我的CSS：

```
#wrap_home_bts{
    position:relative;
    width:100%;
    height:100%;
}

    .bt_woman{
        width:880px;
        height:389px;
        background:#FFCC00;

        position:absolute;
        left:0;
        bottom:245px;

    }

    .bt_man{
        width:733px;
        height:168px;
        background:#CC00FF;

        position:absolute;
        right:0;
        bottom:74px;

    } 
```

但是这样，“按钮”伴随着调整大小的窗口。

我清楚吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:06:13.960

不要使用左右 0px 定位块，而是将它们定位到 50%，然后使用负边距按照您想要的方式对齐它们。这应该可以工作，尽管您必须调整边距以完全符合您的要求：

```
#wrap_home_bts{
    display: block;
    position: absolute;
    width: 100%;
    height: 100%;

}

.bt_woman{
    width:880px;
    height:389px;
    background:#FFCC00;
    display: block;
    position:absolute;
    left:50%;
    margin-left: -650px;
    bottom:245px;

}

.bt_man{
    width:733px;
    height:168px;
    background:#CC00FF;

    position:absolute;
    display: block;
    left:50%;
    margin-right: -650px;
    bottom:74px;

} 
```

[http://jsfiddle.net/E4mmz/](http://jsfiddle.net/E4mmz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:08:27.863

.bt_woman 和 .bt_man 绝对位于 #wrap_home_bts 中，其宽度设置为 100%。这样#wrap_home_bts 的大小将随着浏览器大小的变化而变化，并且 .bt_woman 和 .bt_man 的位置将跟随此元素。也许 .bt_woman 和 .bt_man 位于 #wrap_home_bts 之外会更好。然后你可以用 JavaScript 为 body 元素设置一些宽度，比如屏幕的宽度。这样他们就永远不会改变调整大小的位置。

# java - 法线和虚线问题

> ID：15706667
> 
> 赞同：-1
> 
> 时间：2013-03-29T15:52:40.867
> 
> 标签：java, android, paint, lines

我编辑了 MyLine 和 CanvasView 但现在我画了法线和虚线但之后我点击法线并画了虚线。下来你有 mt 编辑代码。在 MyLine 中创建私有绘图后，来自 onDraw 的 line.paint 被转换为 getPaint

```
Here you have MyLine.java

    public class MyLine { //  line
    public float x,y;
    public float xStart,yStart,xEnd,yEnd;
    private boolean drawDashed;
    private Paint paint = new Paint();

public MyLine(boolean drawDashed)
{
    if(drawDashed){
    getPaint().setColor(Color.BLUE);
    getPaint().setStyle(Paint.Style.STROKE);
    getPaint().setPathEffect(new DashPathEffect(new float[]{20,30}, 0));
    getPaint().setAntiAlias(true);
    getPaint().setStrokeJoin(Paint.Join.ROUND);
    getPaint().setStrokeWidth(5f);
    } else{ 
        getPaint().setColor(Color.RED);
        getPaint().setStyle(Paint.Style.STROKE);
        getPaint().setPathEffect(null);
        getPaint().setAntiAlias(true);
        getPaint().setStrokeJoin(Paint.Join.ROUND);
        getPaint().setStrokeWidth(5f);
    }
}

public void mouseDown(Path path,float xDown,float yDown){
    //path.moveTo(xDown, yDown);
//  path.lineTo(xDown, yDown);

    xStart = xDown;
    yStart = yDown;
}

public void mouseUp(Path path,float xUp,float yUp){
    //path.lineTo(xUp, yUp);
    xEnd = xUp;
    yEnd = yUp;
}

public void draw(Canvas c){
    getPaint().setColor(Color.GREEN);
    //paint.setStyle(Paint.Style.STROKE);
    getPaint().setPathEffect(new DashPathEffect(new float[]{10,20}, 0));
    getPaint().setAntiAlias(true);
    getPaint().setStrokeJoin(Paint.Join.ROUND);
    getPaint().setStrokeWidth(5f);

    c.drawLine(xStart,yStart,xEnd,yEnd,getPaint());
}

public Paint getPaint() {
    return paint;
}

public void setPaint(Paint paint) {
    this.paint = paint;
} 
```

这是来自 CanvasView.java

```
protected void onDraw(Canvas canvas) {
    paint.setPathEffect(null);
    if(bitmap!=null){

        canvas.drawBitmap(bitmap, 0, 0, paint);
         for(MyCircle circle:circleList){// draw circles

             myCanvas.drawCircle(getCircleMidPointX(circle.firstX, circle.lastX),getCircleMidPointY(circle.firstY, circle.lastY),circle.radius,myPaint);
         }

    }

    for (Path p : paths){
        canvas.drawPath(p, paint);
    }
    canvas.drawPath(path, paint);

     for(MyLine line:lineList){ //draw lines
         canvas.drawLine(line.xStart, line.yStart, line.xEnd, line.yEnd, line.getPaint());
      }
final OnTouchListener drawLineListener = new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {

            FirstActivity.ll.setVisibility(LinearLayout.GONE);

            switch (event.getAction()) {
              case MotionEvent.ACTION_DOWN:
                  myLine = new MyLine(dashedLine);
                  myLine.xStart = event.getX();
                  myLine.yStart = event.getY();

                return true;

              case MotionEvent.ACTION_MOVE:
              case MotionEvent.ACTION_UP:
                myLine.xEnd = event.getX();
                myLine.yEnd = event.getY();
                invalidate();
                lineList.add(myLine); 
                break;

              default:
                Log.d("mock it up", "Unknown touch event  " + event.toString());
                return false;
            }
            return true;

        }
    };

    final OnTouchListener drawDashedLineListener = new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {

            FirstActivity.ll.setVisibility(LinearLayout.GONE);

            switch (event.getAction()) {
              case MotionEvent.ACTION_DOWN:
                 return true;

              case MotionEvent.ACTION_MOVE:
              case MotionEvent.ACTION_UP:

                break;

              default:
                Log.d("mock it up", "Unknown touch event  " + event.toString());
                return false;
            }
            return true;

        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:04:01.790

b 在 onDraw()

```
 if(dashedLine)
     line.paint.setPathEffect(dashEffect);
 else
     line.paint.setPathEffect(null); 
```

您正在重置所有线条的效果，这就是正在绘制的内容：全部虚线或全部正常

您可能想要做的是给每个 MyLine 自己的属性：

```
boolean drawDashed =true/false; 
```

并让它相应地绘制自己（用正确的 dasheffect 选择正确的油漆）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:41:54.653

```
public class MyLine { //  line

public float x,y;
    public float xStart,yStart,xEnd,yEnd;
    private boolean drawDashed;
    private Paint paint = new Paint();
    public MyLine(boolean drawDashed)
    {
      if(drawDashed){
        ...
        paint.setPathEffect(new DashPathEffect(new float[]{10,20}, 0));
        ....
      } else{  
         ....
         paint.setPathEffect(null);
         ...
      }
    }

public void mouseDown(Path path,float xDown,float yDown){
    //path.moveTo(xDown, yDown);
//  path.lineTo(xDown, yDown);

    xStart = xDown;
    yStart = yDown;
}

public void mouseUp(Path path,float xUp,float yUp){
    //path.lineTo(xUp, yUp);
    xEnd = xUp;
    yEnd = yUp;
}

public void draw(Canvas c){

    c.drawLine(xStart,yStart,xEnd,yEnd,paint);
}

} 
```

所以向 Myline 添加两个私有属性，这样它自己的线条就知道如何绘制自己：

```
private boolean drawDashed;
private Paint paint = new Paint(); 
```

那么draw方法就变得很简单了：

```
public void draw(Canvas c){    
    c.drawLine(xStart,yStart,xEnd,yEnd,paint);
} 
```

# loading - Prolog SWI：Logtalk，如何加载我自己的项目文件？

> ID：15706681
> 
> 赞同：1
> 
> 时间：2013-03-29T15:53:20.983
> 
> 标签：loading, swi-prolog, logtalk

所以这周包括我安装 Logtalk，Prolog 的扩展之一。在这种情况下，我使用的是 Prolog SWI，但遇到了一些障碍。我不确定如何使用 Logtalk 实际咨询我自己的项目。为了理解代码本身，我查看了 Logtalk 附带的示例，并且这样做我已经能够加载它们并完美地执行它们。我不明白的是当 logtalk 加载文件时实际发生了什么，以及如何加载我自己的项目。

我将以“hello_world”示例作为讨论的重点。名为 hello_world 的文件位于 Logtalk 文件的示例文件夹中。然而它的咨询是这样的：

```
| ?- logtalk_load(hello_world(loader)). 
```

我想到的第一件事是“这是一个仿函数”，使用跟踪查看它在做什么，我发现它是从库中调用的，并被告知如何进入示例文件夹，然后它打开了“hello_world " 文件夹，然后是 "loader" 文件。之后进行正常编译。

我看了看图书馆，不知道发生了什么。我还认为这不可能是在 Logtalk 中加载用户创建的项目的实用途径。还有另一个帖子询问如何使用 SWI 进行此操作，但没有任何回复，看起来也没有做出任何努力来解决问题。

现在让我明确一点，我可以使用“咨询（'...'）”。命令很好，我什至可以使用“咨询”来打开我的项目，但是如果我这样做，logtalk 控制台似乎没有使用任何 logtalk 扩展，所以只是 vanilla prolog。我已经使用 Windows 安装程序来安装 logtalk，并且我知道它正在工作，因为我一直在查看它附带的示例。

我试图找到一个教程，但很难找到 Logtalk 的大部分内容，我发现的最多的是这个关于从项目中加载的文档：

```
logtalk_load/1.
logtalk_load/2. 
```

我这样理解：

```
logtalk_load(file). % Top level loading
logtalk_load(folder(file). % Bottom level loading 
```

因此，每次我都会有一个加载器文件来加载我项目的其他组件（这就是 Logtalk 的示例所做的），因此为了节省大量的手动加载。这一点对我来说很有意义，我认为，我如何获取我的加载器文件，没有。

我是否正确理解它还有待观察，但即使我理解正确，我仍然对如何加载自己的项目感到迷茫。感谢您提供的任何帮助，如果您能给出一个最好的示例，因为我确实很快从示例中学习。

# 小更新

您问我是否正在使用 logtalk 控制台来运行我的程序，而我正在使用在“QUICK_START”文件 [开始 > 程序 > Logtalk > “Logtalk - Prolog-SWI ( console)"] 我想仔细检查一下 logtalk 附加组件是否正常工作并测试了“birds”示例，因为它使用了对象并且是一个非常熟悉的示例。再一次，使用 logtalk_load/2 仿函数时一切正常。

鉴于到目前为止给出的反馈，我看了一下库路径所指的更多内容。研究 logtalk 如何加载文件。设置为到目前为止，没有改变任何事情 logtalk 咨询一个文件夹，其中包含一个名为 libpaths 的 prolog 文件。它基本上是如何找到示例的，它只是从何处获取文件的部分描述。因此，当我说“logtalk_load/2”时，至少我会去这个文件并找到我要的文件夹在哪里。

现在，由于我已经将自己的项目文件夹放在了示例文件夹中，因此我立即将自己的文件夹添加到列表中，以测试这是否至少是帮助我更多地理解事物的部分解决方案。我将以下内容添加到 libpaths.pl 文件中。

```
logtalk_library_path(my_project, examples('my_project/')).
% The path must end in a / so I have done so 
```

所以，我已经声明了我的文件夹路径，得到了我的文件夹，并且加载程序文件是我在使用加载程序时将调用的文件。不用考虑设置我自己的 lib 路径文件夹，我应该有足够的东西让事情正常工作并做一些实际的学习。但是很遗憾，我的调查似乎失败了，我收到了以下信息：

```
ERROR: Unhandled exception: existence_error(library,project_aim) 
```

不是我想看到的，我回到这个图书馆错误业务。我在某处缺少对我的项目文件夹的引用，但我不知道它还需要在哪里引用。对此事进行跟踪并没有帮助我只是发生了以下情况：

```
Call: (17) logtalk_library_path(my_project, _G943) ? creep
Fail: (17) logtalk_library_path(my_project, _G943) ? creep
ERROR: Unhandled exception: existence_error(library,my_project) 
```

通话失败，我根本找不到 logtalk 正在寻找的参考。当涉及到这些问题时，我充其量只是个新手，我现在使用计算机仅 3 年，过去 2 年在 Visual Studio 中使用 c# 和 c++ 进行编程。至少我已经对此事有了更多的了解，鉴于这些信息，还有什么更有用的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T05:58:29.410

让我不确定我的答案的只是你声称通常的`consult`作品而不是`logtalk_load`。你必须运行一个不同的程序来访问 Logtalk 而不是 Prolog。在 Unix 中，它类似于`swilgt`SWI-Prolog 或`gplgt`GNU Prolog。我没有 Windows，所以我不能真正告诉你在那里需要做什么，除了可能确保你运行的是一个名为 Logtalk 的二进制文件，而不仅仅是 Prolog。

否则我认为你的基本问题是在 Windows 中很难控制你的工作目录。在 Unix 环境中，您可以将终端导航到包含文件的目录，然后从那里启动 Logtalk 或 Prolog。然后，当您命名文件时，它们将位于当前目录中，因此 Prolog 可以轻松找到它们。如果您正在运行命令行 Prolog，您可能可以配置菜单项，以便它会为您执行此操作，但您必须知道要将其发送到哪里。

您可以使用函子表示法来获取子目录（例如，`foo(bar(baz(bat(afile))))`finds `foo\bar\baz\bat\afile.lgt`）。你似乎已经想到了这一点，我至少可以证实这一点。这将在其预定义的函子列表以及当前目录中进行搜索。但是您可以从任何地方启动 Logtalk，然后运行，例如，`assertz(logtalk_library_path(foo, 'C:\foo\bar\baz\bat')).`之后`logtalk_load(foo(afile))`将扩展为 C:\foo\bar\baz\bat\afile.lgt。

基于该技术，您可以将文件放在 Logtalk 用户目录中，并`$LOGTALKUSER` [按照文档中的说明](http://logtalk.org/manuals/refman/builtins/logtalk_library_path2.html)使用。我找不到关于 Logtalk 用户目录在 Windows 上的位置的明确参考，但我希望它位于您的用户的 Documents and Settings 文件夹中。所以你可以把东西放在那里并通过像这样定义一个新的 logtalk_library_path 来引用它。

这很好，但是如果您每次启动时都必须继续重新输入这些断言，它仍然会让您感到兴奋和干燥。幸运的是，在您的 Logtalk 用户目录中有一个名为 Logtalk 设置文件，该文件`settings.lgt`在顶部附近有一大块注释掉的代码：

```
%  To define a "library" path for your projects, edit and uncomment the
%  following lines (the library path must end with a slash character):

/*
:- multifile(logtalk_library_path/2).
:- dynamic(logtalk_library_path/2).

logtalk_library_path(my_project, '$HOME/my_project/').
logtalk_library_path(my_project_examples, my_project('examples/')).
*/ 
```

您可以简单地取消注释这些行并插入您自己的内容以获得持久的快捷方式。

您还可以为 SWI Prolog[编写一个`plrc`文件](http://www.swi-prolog.org/FAQ/PlInitialisation.html)来定义启动时要发生的其他事情。另一个选项看起来更干净，因为它是 Logtalk 特定的，但 a`plrc`更通用。

一旦你有了那个机器，拥有一个加载器文件会更有帮助。

**注意**：我没有 Windows 来测试任何这些东西，因此您可能需要对前面的内容进行以下任一或两项更改：

*   您可能需要使用`/`而不是`\`在您的路径中（或者可能会工作，谁知道？）。我可能会`/`先尝试，因为这就是所有其他系统的工作方式。
*   您可能需要使用`%LOGTALKUSER%`而不是`$LOGTALKUSER`，具体取决于 Logtalk 如何扩展变量。

希望这会有所帮助，我希望你坚持使用 Logtalk，它可以使用像你这样的热情用户！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:01:15.687

以后请使用官方 Logtalk 支持渠道寻求帮助。你会在那里得到及时的回复。Daniel，感谢您为该用户提供帮助。

我假设您使用的是 Logtalk 2.x。请注意，Logtalk 3.x 支持相对和完整的源文件路径。在 Logtalk 2.x 中，`logtalk_compile/1-2`（编译到磁盘）和`logtalk_load/1-2`（编译并加载到内存）谓词采用源文件的名称（不带`.lgt`扩展名）或使用“库符号”加载的源文件的位置。要使用前者，您首先需要将当前工作目录更改为包含该文件的目录。这使得第二个选项更加灵活。正如您所提到的，`hello_world`您引用的示例可以通过键入以下内容来加载：

```
?- logtalk_load(hello_world(loader)). 
```

或者：

```
?- {hello_world(loader)}. 
```

Logtalk 2.x 和 3.x 还提供与一些 SWI-Prolog 功能的集成，例如`consult/1`、`make/0`、`edit/0-1`、图形跟踪器和图形分析器。例如：

```
?- [hello_world(loader)].

********** Hello World! **********
% [ /Users/pmoura/logtalk/examples/hello_world/hello_world.lgt loaded ]
% [ /Users/pmoura/logtalk/examples/hello_world/loader.lgt loaded ]
% (0 warnings)
true. 
```

要加载您自己的示例和项目，最简单的方法是将库路径添加到保存文件的目录中`$LOGTALKUSER/settings.lgt`（`%LOGTALKUSER%\settings.lgt`在 Windows 上），正如 Daniel 解释的那样。Logtalk 用户目录的位置由您在使用提供的安装程序时定义。默认设置`My Documents\Logtalk`在 Windows 中。编辑`libpaths.pl`文件不是一个好主意。优先使用该`settings.lgt`文件来定义您自己的库路径。假设您似乎已经创建了一个`%LOGTALKUSER%\examples\project_aim`目录，请将以下行添加到您的`%LOGTALKUSER%\settings.lgt`文件中：

```
:- multifile(logtalk_library_path/2).
:- dynamic(logtalk_library_path/2).

logtalk_library_path(project_aim, examples('project_aim/'). 
```

如果您有`%LOGTALKUSER%\examples\project_aim\loader.lgt`文件，则可以通过键入以下内容来加载它：

```
?- {project_aim(loader)}. 
```

希望这可以帮助。

# php - 将表单保存到数据库时未定义的索引

> ID：15706682
> 
> 赞同：-1
> 
> 时间：2013-03-29T15:53:21.663
> 
> 标签：php, mysql, checkbox, undefined-index

我在保存在数据库中的表单时遇到了一点问题。

基本上，我有一个带有复选框的表单，每个复选框都连接到MySQL数据库内的列，**然后在检查时，按下了SubmistButton，它将从该复选框中保存值，如果没有，它将保持空。**

Everyting 工作正常并保存到数据库中，**但未选中的框会发出以下通知：**

```
Undefined index: WBR in /var/www/vhosts/leadserver.be/httpdocs/LPRamen/insert.php on line 35 
```

这是一段 HTML：

```
<table> 
     <tr>
         <td><input id="vlaams-brabant" type="checkbox" name="VBR" value="Vlaams-Brabant"/> Vlaams-Brabant</td>
         <td><input id="waals-brabant" type="checkbox" name="WBR" value="Waals-Brabant"/> Waals-Brabant </td>
     </tr>
     <tr>    
         <td><input id="oost-vlaanderen" type="checkbox" name="OVL" value="Oost-Vlaanderen"/> Oost-Vlaanderen </td>
         <td><input id="west-vlaanderen" type="checkbox" name="WVL" value="West-Vlaanderen"/> West-Vlaanderen </td>
     </tr> 
```

等等等等。这背后的PHP如下：

```
 $adds['nameCom'] = $conn->real_escape_string($_POST['nameCom']);
    $adds['name'] = $conn->real_escape_string($_POST['name']);
    $adds['number'] = $conn->real_escape_string($_POST['number']);
    $adds['email'] = $conn->real_escape_string($_POST['email']);

    $adds['VBR'] = $conn->real_escape_string($_POST['VBR']);
    $adds['WBR'] = $conn->real_escape_string($_POST['WBR']);
    $adds['OVL'] = $conn->real_escape_string($_POST['OVL']);
    $adds['WVL'] = $conn->real_escape_string($_POST['WVL']);
    $adds['LIM'] = $conn->real_escape_string($_POST['LIM']);
    $adds['ANT'] = $conn->real_escape_string($_POST['ANT']);
    $adds['LUI'] = $conn->real_escape_string($_POST['LUI']);
    $adds['HEN'] = $conn->real_escape_string($_POST['HEN']);
    $adds['LUX'] = $conn->real_escape_string($_POST['LUX']);
    $adds['NAM'] = $conn->real_escape_string($_POST['NAM']);
    $adds['NAT'] = $conn->real_escape_string($_POST['NAT']);
    $adds['INT'] = $conn->real_escape_string($_POST['INT']);
    $adds['BHG'] = $conn->real_escape_string($_POST['BHG']);

    $adds['leads'] = $conn->real_escape_string($_POST['leads']);
    $adds['akkoord'] = $conn->real_escape_string($_POST['akkoord']);
    //$adds['Regio'] = $conn->real_escape_string($_POST['Regio']); 
    //Regio is geen string maar een array dus kan ook niet zo gedeclareerd worden
    /*$Regio = array();
    $adds['Regio'] = "";

    if(count($_POST['Regio']) > 0) {
        foreach($_POST['Regio'] as $key=>$value)
            $Regio[] = $conn->real_escape_string($value);
    }

    $adds['Regio'] = implode(',', $Regio);
    */
    // query voor INSERT INTO
    $sql = "INSERT INTO `dataramen` 
    (`nameCom`, `name`, `number`, `email`, `VBR`, `WBR`, `OVL`, `WVL`, `LIM`, `ANT`, `LUI`, `HEN`, `LUX`, `NAM`, `NAT`, `INT`, `BHG`, `leads`, `akkoord`) 
    VALUES 
    ('". $adds['nameCom']. "', '". $adds['name']. "', '". $adds['number']. "', '". $adds['email']. "', '". $adds['VBR']. "', '". $adds['WBR']. "', '". $adds['OVL']. "', '". $adds['WVL']. "', '". $adds['LIM']. "', '". $adds['ANT']. "', '". $adds['LUI']. "', '". $adds['HEN']. "', '". $adds['LUX']. "', '". $adds['NAM']. "', '". $adds['NAT']. "', '". $adds['INT']. "', '". $adds['BHG']. "', '". $adds['leads']. "' , '". $adds['akkoord']. "')"; 
```

**请记住，这些只是我的代码片段，总要发布很长时间**

我知道已经有几个主题，但我已经完成了研究，但似乎没有一个解决方案有效。如果有人可以看看这个并找出问题所在，我将非常感激。

如果字段为空，我还尝试在数据库中设置一个标准值，但这不起作用。我也正确设置了数据库列上的索引，但我仍然得到相同的通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:56:27.853

未定义的索引消息意味着您正在尝试访问不存在的数组索引。
使用复选框时，如果未选中，则不会设置值。

因此，当您处理表单时，请检查复选框是否已发送。

```
$checkbox_value = (isset($checkbox_value)) ? $checkbox_value : 'default value'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:56:15.203

`Undefined index: WBR in /var/www/vhosts/leadserver.be/httpdocs/LPRamen/insert.php on line 35`

您只需在使用之前检查是否设置了数组元素，以避免该警告。

```
$adds['WBR'] = $conn->real_escape_string($_POST['WBR']); 
```

可

```
if(isset($_POST['WBR']))
{
    $adds['WBR'] = $conn->real_escape_string($_POST['WBR']);
} 
```

或者

```
 $adds['WBR'] = isset($_POST['WBR']) ? $conn->real_escape_string($_POST['WBR']):0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T15:57:32.023

复选框数据只有在被选中的情况下才会通过 $_POST 发送，否则 VBR 密钥将不存在于您的数组中。

您应该使用 php 函数 isset() 检查它。

```
$adds['VBR'] = (isset($_POST['VBR'])) ? $conn->real_escape_string($_POST['VBR']) : ''; 
```

# ruby - 如何使用 Ruby 测试？

> ID：15706687
> 
> 赞同：0
> 
> 时间：2013-03-29T15:53:38.413
> 
> 标签：ruby, rspec, tdd

我刚开始使用 ruby​​ 测试，不知道如何编写测试中的代码。这是来自测试文件的完整任务：

```
require "temperature"

describe "temperature conversion functions" do
  describe "#ftoc" do
    it "converts freezing temperature" do
      ftoc(32).should == 0
    end

    it "converts boiling temperature" do
      ftoc(212).should == 100
    end

    it "converts body temperature" do
      ftoc(98.6).should == 37
    end

    it "converts arbitrary temperature" do
      ftoc(68).should == 20
    end
  end

  describe "#ctof" do
   it "converts freezing temperature" do
     ctof(0).should == 32
   end

   it "converts boiling temperature" do
     ctof(100).should == 212
   end

   it "converts arbitrary temperature" do
     ctof(20).should == 68
   end
  end
end 
```

在我的代码文件中，我尝试这样做：

```
def ftoc(f)
  (f - 32) / 1.8
end 
```

并从终端的 rake 命令运行它。比耙子说

```
temperature conversion functions
#ftoc
converts freezing temperature
converts boiling temperature
converts body temperature (FAILED - 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:34:29.397

我运行这段代码没有任何问题

```
# controllers/temp_spec.rb
require 'spec_helper'

describe "#ftoc" do
  it "converts freezing temperature" do
    ftoc(32).should == 0
  end
end

def ftoc(f)
  (f - 32) / 1.8
end

# $ rspec spec/controllers/temp_spec.rb
# => One example, 0 failure 
```

我也建议你不要使用`==`，而是使用`eq`. 例如`ftoc(32).should eq(0)`。尽管在这种情况下没有区别。

**更新**

我刚刚看到你更新的问题。所以你的代码在单独的文件中？Rspec 怎么知道你的代码？如果您的代码不在标准匹配的 Rails 文件中，那就是问题所在。

在您的情况下，您需要在规范中要求代码文件，然后创建类的新实例（如果方法在类中），或者使用模块将方法公开给全局。

# java - “AWT-EventQueue-0”java.lang.NullPointerException 错误的原因

> ID：15706689
> 
> 赞同：4
> 
> 时间：2013-03-29T15:53:42.697
> 
> 标签：java, swing, compiler-errors, jpanel, paintcomponent

我正在用 Java 创建一个视频游戏，我正在尝试检索坐标点列表并将它们绘制到地图上，但是每次运行我的应用程序时，我都会收到一个“AWT-EventQueue-0”java.lang.NullPointerException 和无法弄清楚为什么它指向空值。这是我收到的错误报告：

```
 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at game.PathPoints.drawObjectPath(PathPoints.java:23)
at game.TestPanel.paintComponent(TestPanel.java:64)
at javax.swing.JComponent.paint(JComponent.java:1029)
at javax.swing.JComponent.paintChildren(JComponent.java:866)
at javax.swing.JComponent.paint(JComponent.java:1038)
at javax.swing.JLayeredPane.paint(JLayeredPane.java:581)
at javax.swing.JComponent.paintChildren(JComponent.java:866)
at javax.swing.JComponent.paintToOffscreen(JComponent.java:5145)
at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:302)
at javax.swing.RepaintManager.paint(RepaintManager.java:1216)
at javax.swing.JComponent.paint(JComponent.java:1015)
at java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:39)
at sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:78)
at sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:115)
at java.awt.Container.paint(Container.java:1784)
at javax.swing.RepaintManager$3.run(RepaintManager.java:818)
at javax.swing.RepaintManager$3.run(RepaintManager.java:795)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:795)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:764)
at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:706)
at javax.swing.RepaintManager.access$1000(RepaintManager.java:61)
at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:226)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:673)
at java.awt.EventQueue.access$300(EventQueue.java:96)
at java.awt.EventQueue$2.run(EventQueue.java:634)
at java.awt.EventQueue$2.run(EventQueue.java:632)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:643)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:138) 
```

PathPoints 类的错误代码在这里：

```
 package game;

    import java.awt.Color;
    import java.awt.Graphics;  
    import java.util.ArrayList;
    import java.util.List;
    import java.util.Scanner;

    public class PathPoints {

        public PathPoints (Scanner s){
            int numberCoord;
            List<Coordinates> path = new ArrayList<Coordinates>();
            numberCoord = s.nextInt();
            for(int x = 0; x < numberCoord; x++){
               Coordinates points = new Coordinates(s.nextInt(), s.nextInt());
               path.add(points);
        }

        }
        public void drawObjectPath(Graphics g){
            g.setColor(Color.GREEN);
            for(int n = 0; n < path.size()- 1; n++){
                g.drawLine(((Coordinates)path.get(n)).x, ((Coordinates)path.get(n)).y, ((Coordinates)path.get(n+1)).x, ((Coordinates)path.get(n+1)).y);
                g.drawLine(((Coordinates)path.get(n)).x, ((Coordinates)path.get(n)).y+1, ((Coordinates)path.get(n+1)).x, ((Coordinates)path.get(n+1)).y+1);

    }
}

List path;
} 
```

TestPanel 类的代码在这里：

```
 public class TestPanel extends JPanel implements MouseListener
{
    private static final long serialVersionUID = 1L;  // Ignore this - It's just to get rid of a warning.

    // Instance variable(s).
    int x,y;
    private Image backdrop;
    PathPoints objectPath;

    /**
    * Constructor - loads a background image
    */
    public TestPanel ()
    {
        try
        {
            ClassLoader myLoader = this.getClass().getClassLoader();
            InputStream imageStream = myLoader.getResourceAsStream("resources/path_1.jpg");
            backdrop = ImageIO.read(imageStream);
            InputStream pointStream = myLoader.getResourceAsStream("resources/path_1.txt");
            Scanner s = new Scanner (pointStream);
            objectPath = new PathPoints(s);

        }
        catch (IOException e)
        {
            System.out.println ("Could not load: " + e);
        }
        addMouseListener(this);
    }

    /**
    * This paint meethod draws the background image anchored
    * in the upper-left corner of the panel.  
    */
    public void paintComponent (Graphics g)
    {
        g.drawImage(backdrop, 0, 0, null);
        objectPath.drawObjectPath(g);
        //Coordinates();
    } 
```

我已经测试了 PathPoints 的构造函数，看看它是否正确地将值添加到 ArrayList 并且正确添加它们，那么接下来我应该看哪一部分来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T15:58:15.980

```
public PathPoints (Scanner s){
  int numberCoord;
  List<Coordinates> path = new ArrayList<Coordinates>();
  numberCoord = s.nextInt();
  for(int x = 0; x < numberCoord; x++){
    Coordinates points = new Coordinates(s.nextInt(), s.nextInt());
    path.add(points);
  } 
```

在这些行中，“路径”不是指您的类的属性，而是指语言环境变量。因此，您的属性“路径”永远不会被初始化。

顺便说一句，2 条建议：

*   永远不要用你的一个属性的名字来命名一个变量。
*   您的属性应该是私有的：

    私有列表路径；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:57:44.843

您正在[隐藏](http://en.wikipedia.org/wiki/Variable_shadowing)变量`path`。同名的局部变量在构造函数的范围内被实例化，`PathPoints`但类成员变量`path`在`null`方法中`drawObjectPath`。代替

```
List<Coordinates> path = new ArrayList<Coordinates>(); 
```

和

```
path = new ArrayList<Coordinates>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T15:57:57.960

在类构造函数中，您将使用局部变量`PathPoints`隐藏成员变量：`path`

```
 int numberCoord;
        List<Coordinates> path = new ArrayList<Coordinates>();
        numberCoord = s.nextInt(); 
```

这意味着成员变量永远不会被赋值，并且会`null`在`drawObjectPath`方法被调用时赋值。

要解决此问题，请不要隐藏成员变量；采用：

```
 int numberCoord;
        path = new ArrayList<Coordinates>();
        numberCoord = s.nextInt(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-01T08:48:44.133

```
public class StationDatabase1 {

    File file = new File("lrt.txt");

public ArrayList<Station> getAll() throws SQLException, ClassNotFoundException, FileNotFoundException {
        ArrayList<Station> station = new ArrayList<>();
        Scanner input = new Scanner(file);
        try {
            while (input.hasNextLine()) {
                String id = input.nextLine();
                String name = input.nextLine();
                Station temp = new Station(id, name);
                station.add(temp);

              }
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, ex);
        }
        Set newSet = new LinkedHashSet(station);
        station.clear();
        station.addAll(newSet);
        return station;
    } 
```

# c# - 无法删除该对象，因为在对象状态管理器中找不到它

> ID：15706694
> 
> 赞同：0
> 
> 时间：2013-03-29T15:53:55.530
> 
> 标签：c#, asp.net-mvc, json

我目前使用 Jtable 来处理事件类型列表，但每次我尝试通过表删除时，我都会收到错误“值不能为空。参数名称：实体”。

```
 [HttpPost]
    public JsonResult DeleteEventType(EventType eventType)
    {
        using (var db = new ICTTBEntities())
        {
            try
            {
                var newObj = db.EventTypes.SingleOrDefault(e => e.EventTypeID == eventType.EventTypeID);
                if (newObj != null)
                {
                    db.EventTypes.Remove(newObj);
                    db.SaveChanges();
                    return Json(new { Result = "OK" });
                }
                return Json(new { Result = "ERROR", Message = "eventType is null" });
            }
            catch (Exception ex)
            {
                return Json(new { Result = "ERROR", Message = ex.Message });
            }
        }
    } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:58:12.270

您通过另一个 ICTTBEntities 上下文获取 eventType，这就是它可能无法在您的新上下文中找到它的原因。

尝试通过 Id 从新上下文中获取 eventType。

此外，不要忘记在删除对象后在您的上下文中调用 SaveChanges。

利用

```
var newObj = db.EventTypes.Single( e => e.Id == eventType.Id);
db.EventTypes.Remove(newObj);
db.SaveChanges(); 
```

# entity-framework - 首先防止实体框架数据库中的小数舍入

> ID：15706704
> 
> 赞同：7
> 
> 时间：2013-03-29T15:54:44.227
> 
> 标签：entity-framework, asp.net-mvc-4

我正在尝试使用 c#、实体框架 - 数据库优先和 mvc 向 ms sql 数据库写入/读取纬度和经度。

问题是纬度/经度仅显示 2 位小数，即使它们在数据库中是正确的。数据库的字段为数字（18,6）。

我修改了上下文文件如下：

```
protected override void OnModelCreating(System.Data.Entity.DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<STORE_LOCATION>().Property(location => location.LATITUDE).HasPrecision(18, 6);
        modelBuilder.Entity<STORE_LOCATION>().Property(location => location.LONGITUDE).HasPrecision(18, 6);
    } 
```

2 个问题 - 我是否应该修改上下文文件中的 OnModelCreating - 即使它警告更改可能会在重新生成时丢失，以及如何防止代码四舍五入？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:09:46.647

> 我是否应该修改上下文文件中的 OnModelCreating - 即使它警告更改可能会在重新生成时丢失，以及如何防止代码四舍五入？

否 - 在另一个文件中实现上下文的部分类并在那里实现 OnModelCreating

至于精度 - 您是否检查了调试器中对象中的值与页面上显示的值？在渲染期间可能会发生舍入。

尝试将`DisplayFormat`属性添加到实体类中的属性：

```
[DisplayFormat(DataFormatString = "{0:0.0#####}", ApplyFormatInEditMode = true)] 
```

# windows-store-apps - 为什么 TileUpdater.StartPeriodicUpdate 的行为不符合预期？

> ID：15706707
> 
> 赞同：2
> 
> 时间：2013-03-29T15:55:10.050
> 
> 标签：windows-store-apps, live-tile

我有一个 Windows 商店应用程序，我正在设置它以定期更新磁贴。本来我是设置成使用[`StartPeriodicUpdate(Uri, PeriodicUpdateRecurrence)`](http://msdn.microsoft.com/en-us/library/windows/apps/hh701694.aspx)，但是好像没有更新，因为最小重复是HalfHour，所以我想用[`StartPeriodicUpdate(Uri, DateTime, PeriodicUpdateRecurrence)`](http://msdn.microsoft.com/en-us/library/windows/apps/hh701688.aspx)，把startTime设置成`DateTimeOffset.Now.AddMinutes(5)`等5分钟再更新，方便测试。代码：

```
public void UpdateLiveTile()
{
        LiveTileUpdater.Clear();
        var uri = TILE_UPDATE_URI; // example
        var start = DateTimeOffset.Now.AddMinutes(5);
        LiveTileUpdater.StartPeriodicUpdate(uri, start, PeriodicUpdateRecurrence.HalfHour);
} 
```

但是，当我运行它时，磁贴会立即更新，而不是从调用它开始 5 分钟后更新。我认为在没有 startDate 参数的情况下调用覆盖会立即运行（确实如此），然后另一个会在 5 分钟后运行。有谁知道为什么它会立即更新，或者我如何确保它被延迟？

*编辑：*此外，如果有人知道为什么也没有发生定期更新，那将是一个很大的帮助。服务器肯定响应正确，因为第一次更新效果很好，但它永远不会改变。文档表明开始时间和定期间隔都可能延迟最多 15 分钟，但这超出了误差范围，我没有得到任何更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:44:01.170

[我在此页面](http://msdn.microsoft.com/en-us/library/windows/apps/jj150587.aspx#polling_behavior)上找到了答案（粗体是我的重点）：

> 当您调用其中一种方法时，**会立即轮询调用中指定的 URI，**并使用接收到的内容更新磁贴或徽章。在此初始轮询之后，Windows 将继续按请求的时间间隔提供更新。轮询继续进行，直到您明确停止它...

我认为 5 分钟刷新不起作用的原因是它立即轮询，然后不会比间隔（30 分钟）更早再次轮询，但它会从那时起刷新 30 分钟*而*不是现在. 最后一部分是猜测，但上面的段落说明了为什么它会立即更新。

对于第二部分，它看起来正在更新（当我在带有断点的 localhost 上运行时，断点最终被击中并刷新了磁贴），我想我只是没有等待足够长的时间。

# visual-studio-2012 - ASP.NET 4.5 功能在 VS2012 中似乎不可用

> ID：15706708
> 
> 赞同：0
> 
> 时间：2013-03-29T15:55:11.420
> 
> 标签：visual-studio-2012, asp.net-4.5

我正在检查 asp.net 4.5 中的一些新功能，它们在 VS 2012 中似乎不可用。具体来说，我正在尝试强类型数据控件。VS 不解析此代码块中的“项目”：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" 
        ModelType="WebApplication2.NorthwindService.Supplier"
        SelectMethod="GetProducts">
    <Columns>
        <asp:TemplateField HeaderText="Name">
            <ItemTemplate>                    
                <asp:Label ID="lblName" runat="server" Text='<%# Item.Name %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

如果我忽略红色曲线，我会收到以下运行时错误：

**CS0103：当前上下文中不存在名称“项目”**

此外，在错误消息的底部，它说：

**版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.18034**

但是，如果我查看目标框架下的项目属性，它会显示 4.5。在“关于 Microsoft Visual Studio”下它说：

Microsoft .NET 框架版本 4.5.50709

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:02:52.007

ModelType 应该是 ItemType。这将解决您看到的问题。:-)

# c# - 如何自动将数据输入网页？

> ID：15706711
> 
> 赞同：2
> 
> 时间：2013-03-29T15:55:23.220
> 
> 标签：c#, asp.net

我想问一下是否有人知道如何将数据自动输入到您的网页。我的意思是，如果我将数据上传到我的网站，我想自动将其显示到另一个页面，该页面显示在单独的选项卡中，因为我有一个照片库页面，我想在该页面中查看我上传的文件而不点击浏览器的刷新按钮。我现在所拥有的只是自动刷新代码，但这并不适用于这种情况。另一个例子是你 facebook 的新闻提要。如果您的朋友正在发布某些内容，那么它会自动显示到您的新闻提要页面，这就是我想要得到的......我希望有人能明白我的意思。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T17:06:59.007

这是用于实时网络的“酷”东西。网络：[http ://signalr.net/](http://signalr.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:01:02.147

您可以每隔 5 秒进行一次 AJAX 调用。

如果您在您的网站中使用 Jquery，您可以尝试：

```
var seconds = 5;

setInterval(function(){

    $.ajax({
        url: urlToHandler,
        data: jsonData,
        dataType: 'json',
        type: 'POST',
        contentType: 'application/json',
        success: function(data) {
           $('#container').html(data.html)
        },
        error: function(data, status, jqXHR) {
            console.log('There was an error.');
        }
    });      // end $.ajax
}, seconds * 1000) 
```

# entity-framework - 在 EF 中保存多个子实体会导致键值冲突

> ID：15706719
> 
> 赞同：0
> 
> 时间：2013-03-29T15:55:51.717
> 
> 标签：entity-framework, entity-framework-4

我有一个包含图像实体集合的食谱实体。在我的控制器中，我尝试保存一个附有两个新图像的新配方：

```
_recipeService.Insert(recipe);

 try
 {
 foreach (Image img in recipe.Images)
 {
      _imageService.Update(img);

 }
 _recipeService.Save(); 
```

在后台，我使用工作单元模式来确保所有服务都使用相同的 DbContext，并且在任何服务上调用 Save() 都会保存所有实体。因此，如果我在创建过程中将两个图像附加到我的食谱中，我会在尝试保存时收到以下错误：

```
AcceptChanges cannot continue because the object's key values conflict with another object in the ObjectStateManager. Make sure that the key values are unique before calling AcceptChanges. 
```

我确定这与两个图像实体的 ID 均为 0 的事实有关。这里的最佳做法是什么？

FWIW，这是我的初始迁移：

```
public override void Up()
    {
        CreateTable(
            "dbo.Recipe",
            c => new
                {
                    ID = c.Int(nullable: false, identity: true),
                    CategoryId = c.Int(nullable: false),
                    Title = c.String(),
                    Summary = c.String(),
                    Directions = c.String(),
                    CookingTime = c.Int(nullable: false),
                    CreationDate = c.DateTime(nullable: false),
                    PostedDate = c.DateTime(),
                    LastModifiedDate = c.DateTime(nullable: false),
                    Visible = c.Boolean(nullable: false),
                    TagList = c.String(),
                    Ingredient_ID = c.Int(),
                })
            .PrimaryKey(t => t.ID)
            .ForeignKey("dbo.Category", t => t.CategoryId, cascadeDelete: true)
            .ForeignKey("dbo.Ingredient", t => t.Ingredient_ID)
            .Index(t => t.CategoryId)
            .Index(t => t.Ingredient_ID);

CreateTable(
            "dbo.Image",
            c => new
                {
                    ID = c.Int(nullable: false, identity: true),
                    RecipeId = c.Int(nullable: false),
                    ImageUrl = c.String(nullable: false),
                    MainImage = c.Boolean(nullable: false),
                })
            .PrimaryKey(t => t.ID)
            .ForeignKey("dbo.Recipe", t => t.RecipeId, cascadeDelete: true)
            .Index(t => t.RecipeId); 
```

谢谢，

克里斯

**编辑：为配方服务添加代码**

使用 Barbecurian.Data；使用 Barbecurian.Models；使用系统；使用 System.Collections.Generic；使用 System.Linq；使用 System.Web；

```
public class RecipeService : Service<Recipe>
{
    private IService<Tag> _tagService;

    public RecipeService(IUnitOfWork unitOfWork, IService<Tag> tagService)
    {
        _unitOfWork = unitOfWork;
        _tagService = tagService;
        _repo = _unitOfWork.RecipeRepository;
    }

    public override void Insert(Recipe recipeToCreate)
    {
        List<Tag> tags = new List<Tag>();
        foreach (Tag tag in recipeToCreate.Tags)
        {
            if (_tagService.Get(filter: t => t.Name == tag.Name).Count() > 0)
            {
                tags.Add(_tagService.Get(filter: t => t.Name == tag.Name).SingleOrDefault());
            }
            else
            {
                Tag newTag = new Tag() { 
                    Name = tag.Name
                };

                _tagService.Insert(newTag);
                tags.Add(newTag);
            }
        }

        recipeToCreate.Tags = tags;
        // Validation logic
        if(Validate(recipeToCreate))
            _repo.Insert(recipeToCreate);            
    }

    protected override bool Validate(Recipe recipeToValidate)
    {
        //Ensure recipe has a unique title
        if (_repo.Get(r => r.Title == recipeToValidate.Title).Count() > 0)
            _validationState.AddError("Title", "That title already exists.");

        return _validationState.IsValid;
    }

} 
```

}

这继承自：

```
public abstract class Service<TEntity> : IService<TEntity> where TEntity : class, IModel 
{
    protected IRepository<TEntity> _repo;
    protected IValidationDictionary _validationState;
    protected IUnitOfWork _unitOfWork;

    public virtual IEnumerable<TEntity> Get(Expression<Func<TEntity, bool>> filter = null, 
        Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null, 
        string includeProperties = ""){
        return _repo.Get(filter, orderBy, includeProperties);
    }

    public virtual TEntity GetByID(int id, string includeProperties = ""){
        return _repo.GetByID(id, includeProperties);
    }

    public virtual void Insert(TEntity entity){
        _repo.Insert(entity);
    }

    public virtual void Delete(object id){
        _repo.Delete(id);
    }

    public virtual void Delete(TEntity entity){
        _repo.Delete(entity);
    }

    public virtual void Update(TEntity entity)
    {
        _repo.Update(entity);
    }

    public virtual void Save()
    {
        _unitOfWork.Save();
    }

    public virtual void Dispose()
    {
        _unitOfWork.Dispose();
    }

    protected abstract bool Validate(TEntity entity);

    public IValidationDictionary ValidationState
    {
        get
        {
            return _validationState;
        }
        set
        {
            _validationState = value;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:08:51.353

也许在添加新图像时调用插入

# java - 在运行我的程序之前我需要满足的条件

> ID：15706728
> 
> 赞同：0
> 
> 时间：2013-03-29T15:56:21.070
> 
> 标签：java, parseint

我有我想在命令行作为 jar 运行的 java 程序。但是在我运行处理数据的函数之前，我需要满足两个条件。1.`args[0]`必须是整数。2\. 需要恰好有 2 个参数。如果不满足这些条件，我希望弹出一条错误消息，然后系统退出。我想我可以做到#1 正确，但我将如何将两者结合起来？

```
public static void main(String[] args) throws IOException
 {
    try
    {
        int x = Integer.parseInt(args[0]);
        process(x, args[1]);    
    }
    catch(NumberFormatException e)
    {
        System.output.println("Please enter an integer");
    }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:01:17.507

然后，这是您应该编写的代码：

```
 public static void main(String[] args) throws IOException {
    if(args == null || args.length != 2) {
        System.out.println("You have not entered the required two parameters");
        return;
    }
    try {
        int x = Integer.parseInt(args[0]);
        process(x, args[1]);
    } catch (NumberFormatException e) {
        System.out.println("Please enter an integer");
    }

} 
```

请注意，您的 System.output.println("请输入一个整数"); 中存在编译错误。声明，而是：

```
System.out.println("Please enter an integer"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:59:15.057

args.length 会给你参数的数量，所以添加类似

```
if(args.length != 2)
{
  throw new IOException(argumentDescriptionHere);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:00:51.800

你可以像这样做#2：

```
if (args.length < 2)
{
  System.err.println("Need 2 arguments!");
  System.exit(-1)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:01:12.180

```
public static void main(String[] args) throws IOException
 {
    try
    {
        if(args == null || args.length != 2)
        {
           System.out.println("Invalid arguments");
        }
        else{
            int x = Integer.parseInt(args[0]);
            process(x, args[1]);   
        } 
    }
    catch(NumberFormatException e)
    {
        System.out.println("Please enter an integer");
    }

 } 
```

# javascript - 您如何查看嵌入在 PDF 中的 JavaScript？

> ID：15706730
> 
> 赞同：12
> 
> 时间：2013-03-29T15:56:37.697
> 
> 标签：javascript, pdf

我有一个 PDF，我认为其中嵌入了 JavaScript。是否有可能看到那个 JavaScript 是什么？如果是这样，我将如何看待它？

与 iText 一起破解某些东西可能是可能的，但我更喜欢更快的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-10-04T10:10:43.620

如果您喜欢快速的方法，只需使用文本编辑器（例如 NotePad++）打开 PDF，然后在 JavaScript 上进行搜索。

就我而言，我遇到了坚持打印而不是查看的 pdf。使用 NP++ 我发现了这个脚本：

```
<</S/JavaScript/JS(this.print\({bUI: true,bSilent: false,bShrinkToFit: true}\);this.closeDoc\(\);)>> 
```

这个符号有点奇怪，但显然它有一个打印命令，然后是一个关闭命令。

您甚至可以用空格替换关闭命令，这在覆盖模式下很容易（按插入键切换到覆盖模式和从覆盖模式切换）。您需要保持字符总数相同，以保留 PDF 中的偏移量指针。然后，取消打印命令后即可查看文档。

因为它是一个数字签名的文档，所以签名当然显示“无效”:-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T15:58:43.277

下载 iText RUPS：[https ://github.com/itext/rups/releases](https://github.com/itext/rups/releases)

使用 RUPS 打开 PDF，您将能够查看所有 PDF 对象。iText RUPS 不是 PDF 查看器，它是 PDF 语法浏览器。

# eclipse - 更改 Eclipse 代码模板变量导航顺序

> ID：15706732
> 
> 赞同：4
> 
> 时间：2013-03-29T15:56:52.227
> 
> 标签：eclipse, eclipse-templates

我有一个 Eclipse 代码模板，说：

```
${type} ${name} = ${cursor} 
```

因此，生成的代码将是：

![示例生成代码](../Images/307c1bd541dd82c7c3c162ef4e313947.png)

如您所见，选择代码生成变量后`type`，但我想`name`先被选中：

![想要生成的代码](../Images/2a5eae65af7046dd54d8ad7735f709f5.png)

在这种情况下，这似乎是一个愚蠢的问题，但对于[具有许多变量的模板，](https://stackoverflow.com/a/15705521/471214)其中一些变量的定义取决于其他变量，这是有意义的。

所以，我的问题是：

**是否可以在模板变量上指定导航顺序？**

# python - Python子进程：如何检索标准输出

> ID：15706733
> 
> 赞同：1
> 
> 时间：2013-03-29T15:56:53.027
> 
> 标签：python, redirectstandardoutput

所以，我正在编写一个 python 脚本，我需要在其中调用另一个在标准输出中打印几行的 python 脚本。我想将被调用脚本的输出存储在一个列表中，并在主脚本中处理它们。

一种简单的方法是将结果打印到文件（file3）中并读取文件，如下所示

```
subprocess.call("./vecdiff.py file1 file2 > file3")

f = open("file3", "r") 
```

如何将输出直接重定向到主脚本中的某些列表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:24:12.627

最*简单*的方法是调用[`subprocess.check_output`](http://docs.python.org/2/library/subprocess.html#subprocess.check_output)which 调用进程并返回其输出（或在非零返回码上引发异常，但您仍然可以通过异常对象访问输出）。它可以轻松处理`STDOUT`和`STDERR`（尽管只有`STDOUT`默认情况下）。

手册中的示例：

```
>>> subprocess.check_output(["echo", "Hello World!"])
'Hello World!\n' 
```

如果您的流程正在生成大量数据，并且您想在它运行时对其进行处理，则必须打开管道并`communicate`按照其他答案中的说明使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T16:22:47.613

如下，将子进程的stdout和stderr重定向到PIPE，然后你可以使用'communicate()'方法从PIPE获取子进程的stdout和stderr。“管道”是父进程和子进程之间的管道。

```
from subprocess import Popen, PIPE
p = Popen("./vecdiff.py file1 file2", stdout=PIPE, stderr=PIPE)
output, errput = p.communicate() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T16:03:03.903

如果使用`subprocess.Popen()`，则可以使用 保存输出`communicate()`。例如：

```
proc = subprocess.Popen("./vecdiff.py file1 file2", stdout=subprocess.PIPE)
output = proc.communicate() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:11:33.913

[用铅](http://plumbum.readthedocs.org)轻松完成：

```
from plumbum.cmd import python
cmd = python['./vecdiff.py']['file1', 'file2']
for line in cmd().splitlines():
    print line 
```

# iphone - 检测标签栏选择的视图控制器

> ID：15706734
> 
> 赞同：2
> 
> 时间：2013-03-29T15:56:54.540
> 
> 标签：iphone, ios, uitabbarcontroller, storyboard

我使用标签栏应用程序和情节提要创建了一个项目。

现在我有FirstViewController（默认选择）和SecondViewController。

我如何捕捉所选视图控制器更改的时刻？（用户在选项卡栏上选择第二个视图控制器）。

我想到的唯一方法是：1.在appDelegate中为UITabBarController创建一个属性。

1.  设置它使用 `self.tabBarController = (UITabBarController *)self.window.rootViewController`

2.  使第一个视图控制器符合 UITabBarControllerDelegate。

3.  使用将标签栏的委托设置为 FirstViewController `[[UIApplication sharedApplication] delegate]`

有没有更简单和更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:44:52.857

我不遵循第三步，但这是我认为你想要做的：

子类标签栏控制器并实现委托协议：

`@interface RootTabBarController : UITabBarController <UITabBarControllerDelegate>`

并在它自己的 viewDidLoad 中设置它的 delegate = self。实施：

`- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController`

# c# - C# .NET 中的异步 POST 请求

> ID：15706736
> 
> 赞同：5
> 
> 时间：2013-03-29T15:57:04.840
> 
> 标签：c#, post, asynchronous, request, httpclient

我正在尝试使用 HttpClient / HttpContent 通过网络上传数据但是我似乎找不到以这种方式发送文件的正确方法。

这是我当前的代码：

```
 private async Task<APIResponse> MakePostRequest(string RequestUrl, string Content)
    {
        HttpClient  httpClient = new HttpClient();
        HttpContent httpContent = new StringContent(Content);
        APIResponse serverReply = new APIResponse();

        httpContent.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
        try {
            Console.WriteLine("Sending Request: " + RequestUrl + Content);
            HttpResponseMessage response = await httpClient.PostAsync(RequestUrl, httpContent).ConfigureAwait(false);
        }
        catch (HttpRequestException hre)
        {
            Console.WriteLine("hre.Message");
        }
        return (serverReply);
    } 
```

内容是这种形式的字符串：paramname=value¶m2name=value¶m3name=value.. 重点是我必须通过这个请求实际发送一个文件（照片）。

除了文件本身之外，每个参数似乎都可以正常工作（我必须在发布请求中发送两个身份验证密钥，并且它们被识别）

我以这种方式将图片作为字符串检索，这可能是它失败的主要原因之一？：/

```
 byte[] PictureData = File.ReadAllBytes(good_path);
    string encoded = Convert.ToBase64String(PictureData); 
```

我做错什么了吗？是否有另一种更好的方法来创建正确的 POST 请求（它必须是异步的并支持文件上传）

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T13:29:35.283

主要问题可能来自我混合字符串和文件数据的事实。

这解决了它：

```
 public async Task<bool> CreateNewData (Data nData)
    {
        APIResponse serverReply;

        MultipartFormDataContent form = new MultipartFormDataContent ();

        form.Add (new StringContent (_partnerKey), "partnerKey");
        form.Add (new StringContent (UserData.Instance.key), "key");
        form.Add (new StringContent (nData.ToJson ()), "erList");

        if (nData._FileLocation != null) {
            string good_path = nData._FileLocation.Substring (7); // Dangerous
            byte[] PictureData = File.ReadAllBytes (good_path);
            HttpContent content = new ByteArrayContent (PictureData);
            content.Headers.Add ("Content-Type", "image/jpeg");
            form.Add (content, "picture_0", "picture_0");
        }

        form.Add (new StringContent (((int)(DateTime.Now.ToUniversalTime () -
            new DateTime (1970, 1, 1, 0, 0, 0, DateTimeKind.Utc)).TotalSeconds).ToString ()), "time");
        serverReply = await MakePostRequest (_baseURL + "Data-report/create", form);

        if (serverReply.Status == SERVER_OK)
            return (true);
        Android.Util.Log.Error ("MyApplication", serverReply.Response);
        return (false);
    }

    private async Task<APIResponse> MakePostRequest (string RequestUrl, MultipartFormDataContent Content)
    {
        HttpClient httpClient = new HttpClient ();
        APIResponse serverReply = new APIResponse ();

        try {
            Console.WriteLine ("MyApplication - Sending Request");
            Android.Util.Log.Info ("MyApplication", " Sending Request");
            HttpResponseMessage response = await httpClient.PostAsync (RequestUrl, Content).ConfigureAwait (false);
            serverReply.Status = (int)response.StatusCode;
            serverReply.Response = await response.Content.ReadAsStringAsync ();
        } catch (HttpRequestException hre) {
            Android.Util.Log.Error ("MyApplication", hre.Message);
        }
        return (serverReply);
    } 
```

主要使用多部分内容，设置内容类型并通过字节数组似乎已经完成了这项工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T17:17:06.050

您是否需要将数据作为 base64 编码的字符串发送？如果您要发送任意字节（即照片），则可以发送未编码的字节，如果您使用`ByteArrayContent`该类：

```
private async Task<APIResponse> MakePostRequest(string RequestUrl, byte[] Content)
{
    HttpClient  httpClient = new HttpClient();
    HttpContent httpContent = new ByteArrayContent(Content);
    APIResponse serverReply = new APIResponse();

    try {
        Console.WriteLine("Sending Request: " + RequestUrl + Content);
        HttpResponseMessage response = await httpClient.PostAsync(RequestUrl, httpContent).ConfigureAwait(false);
        // do something with the response, like setting properties on serverReply?
    }
    catch (HttpRequestException hre)
    {
        Console.WriteLine("hre.Message");
    }

    return (serverReply);
} 
```

# python - 更新 Toplevel 小部件中的背景颜色

> ID：15706752
> 
> 赞同：0
> 
> 时间：2013-03-29T15:58:07.970
> 
> 标签：python, user-interface, tkinter, widget

我正在尝试通过单选按钮更新 TopLevel 小部件的背景颜色。我想要的是在用户更改单选按钮时更改背景颜色。目前，该程序会打开一个带有单选按钮的新窗口。背景颜色完全没有变化。

```
from tkinter import *

class Example:

    def newWindow(self):
        top = Toplevel()
        v = IntVar()
        v.set(-1)
        self.aRadioButton = Radiobutton(top, text="Blue",variable = v, value = 0)
        self.aRadioButton.grid(row=1, column=1)
        self.aRadioButton = Radiobutton(top, text="Red",variable = v, value = 1)
        self.aRadioButton.grid(row=1, column=0)

        if v == 0:
            top.configure(bg="Blue")
        elif v == 1:
            top.configure(bg="Red")

    def __init__(self, master):
        frame = Frame(master, width = 50, height = 50)
        frame.grid()

        self.aLabel = Label(frame, text = "New window bg colour").grid(row=0)

        self.aButton = Button(frame, text="To new window", command=self.newWindow)
        self.aButton.grid(row=1)

root = Tk()
app = Example(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:08:48.300

当您更改单选按钮时，您必须使用一个事件。将命令方法附加到单选按钮，如下所示：

```
self.aRadioButton = Radiobutton(top, text="Blue",variable = v, value = 0, command=lambda: top.configure(bg="Blue"))
self.aRadioButton = Radiobutton(top, text="Red",variable = v, value = 1, command=lambda: top.configure(bg="Red")) 
```

`v`同样，当您这样做时，如果您仅将其用于此目的，则不需要该变量。

# mysql - 如何使三列成为我的主键

> ID：15706765
> 
> 赞同：4
> 
> 时间：2013-03-29T15:59:01.043
> 
> 标签：mysql, sql

我试图学习如何将两个文件匹配在一起。但我现在正在尝试一切 5 小时......仍然不知道该怎么做。

第一个文件（600.000 行）包含 4 列：

```
Postal, Number, Houseletter, livingspace 
```

第二个文件（7.000 行）包含 4 列：

```
Postal, Number, Houseletter, Furniturevalue 
```

在我的第一个文件中，我有一个大区域的所有生活空间，在我的第二个文件中，我有那个大区域中几个地址的家具价值。

我想将文件 1 中的生活空间添加到我的第二个文件中的地址。

所以我将文件导入数据库。

```
Table first file -> Space
Table second file -> Furniture 
```

现在我正在尝试为表设置主键：

```
Primary key --> Postal, Number, Houseletter 
```

但这不起作用，因为这些列仅在 Postal+Number+Houseletter 时是唯一的，但彼此不分开。

有人知道下一步吗？我必须做什么才能使这个查询工作：

```
SELECT postal, number, houseletter, furniturevalue, livingspace
FROM space, furniture
WHERE ( space.postal = furniture.postal
AND     space.number = furniture.number
AND     space.houseletter = furniture.houseletter) 
```

我试图用这个查询创建一个新视图，其中包含“邮政、号码、houseletter、家具价值、生活空间”所以来自两个表的数据。但首先我需要解决我的主键问题。

谢谢你的帮助！

ps：我在phpmyadmin中使用sql

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T16:04:03.167

```
ALTER TABLE space ADD PRIMARY KEY(Postal, Number, Houseletter); 
```

如果主键*已经存在，*那么你想这样做：

```
ALTER TABLE space DROP PRIMARY KEY, ADD PRIMARY KEY(Postal, Number, Houseletter); 
```

如果你有重复的 PK，你可以试试这个：

```
ALTER IGNORE TABLE space ADD UNIQUE INDEX idx_name (Postal, Number, Houseletter ); 
```

这将删除所有重复的行。作为一个额外的好处，未来的重复插入将出错。与往常一样，您可能需要在运行类似这样的操作之前进行备份

第二个问题，您的查询应如下所示：

```
SELECT postal, number, houseletter, furniturevalue, livingspace
FROM space INNER JOIN furniture
ON ( space.postal = furniture.postal
AND     space.number = furniture.number
AND     space.houseletter = furniture.houseletter) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:03:54.523

```
ALTER TABLE <TableName>
ADD CONSTRAINT <constraintName> PRIMARY KEY (colA, colB, ..., colN) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:05:08.847

您可以使用为每个组合`group by`创建唯一的行。`(postal, number, houseletter)`聚合计算该`livingspace`组的值。此示例选择聚合中`livingspace`的最高值：`max()`

```
select  coalesce(space.postal, furniture.postal) as postal
,       coalesce(space.number, furniture.number) as number
,       coalesce(space.houseletter, furniture.houseletter) as houseletter
,       max(furniture.furniturevalue) as furniturevalue
,       max(space.livingspace) as livingspace
from    space
full outer join
        furniture
on      space.postal = furniture.postal
        and space.number = furniture.number
        and space.houseletter = furniture.houseletter
group by
        coalesce(space.postal, furniture.postal)
,       coalesce(space.number, furniture.number)
,       coalesce(space.houseletter, furniture.houseletter) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:12:23.370

Something like this might work. You can use concat() to combine the columns together.

```
select (concat(s.Postal,' ',s.Number,' ',s.Houseletter)) as s.address,(concat(f.Postal,' ',f.Number,' ',f.Houseletter)) as f.address,s.*,f.* from space s,furniture f where s.address=f.address; 
```

# c# - 跨页面同步动画

> ID：15706766
> 
> 赞同：0
> 
> 时间：2013-03-29T15:59:01.043
> 
> 标签：c#, xaml, animation, windows-phone-8

我目前正在构建一个应用程序，该应用程序在所有页面上使用一个简单的 xaml 动画。

这是动画的xaml

```
 <Storyboard x:Name="raysSpin">
        <DoubleAnimation Duration="0:0:6.0" To="360" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="sunRays" RepeatBehavior="Forever"/>
    </Storyboard> 
```

上面的动画在应用程序的所有页面上。现在，当用户导航到下一页时，我需要让这个动画在所有页面上保持同步，这样看起来用户没有进入不同的页面。动画，无论它在时间轴中的哪个位置，都需要在新页面动画上设置该位置，并从我们离开的地方开始。

有谁知道或对如何以有效的方式执行此操作有任何想法？

我的第一个也是唯一的想法是将动画的时间跨度存储到存储在 app.xaml.cs 中的全局变量中，然后在每个页面的 onNativgatedTo 中，将新页面动画设置为存储的时间跨度并从我们离开的位置开始。它在一定程度上有效，但有明显的口吃。

我考虑过在它自己的线程上运行动画，但我不知道这是否可行，如果可以，该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:06:42.320

最好的方法是将母版页分成不同的部分。一个是保留该控件的地方，另一个是您在用户导航时放置新控件的地方。即使您使用动画的当前状态设置了一个全局变量，当新页面加载时，除非您设置了 SLA，否则可能需要几秒钟，如果您想要给用户一种流畅的感觉。

更新：

像这样的东西：

![在此处输入图像描述](../Images/c5e84324c9e71b1bb588ffc8bb400bb0.png)

您将新内容加载到“新用户控件”窗格中。

# java - LocalIterator ....无法访问的语句错误

> ID：15706767
> 
> 赞同：-4
> 
> 时间：2013-03-29T15:59:03.073
> 
> 标签：java, iterator

这是显示错误的行。我正在使用 netbeans ide 进行编码

```
 localIterator2 = Collections.list(inetAddresses).iterator(); 
   continue; 
   InetAddress inetAddress = (InetAddress)localIterator2.next(); 
```

ERROR IS UNREACHABLE 语句从未使用分配的值请帮助...请更正这行代码：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:10:28.780

`continue;`由于这条线，您会收到一个无法访问的声明。

大概这段代码在一个循环内，`continue`实际上是有意义的。

的意思`continue`是回答[Here](https://stackoverflow.com/questions/389741/continue-keyword-in-java)，所以不再解释。

当您的代码命中时，`continue`它将不会执行以下行：
`InetAddress inetAddress = (InetAddress)localIterator2.next();`

要修复此错误，请删除`continue;`它后面的 或 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:11:49.720

添加了行号以进行解释...

```
localIterator2 = Collections.list(inetAddresses).iterator(); 
continue; ////any line after this never reach as the continue prevents it .
InetAddress inetAddress = (InetAddress)localIterator2.next(); 
```

# wpf - 将 WPF 控件与 WinForms 一起使用

> ID：15706768
> 
> 赞同：1
> 
> 时间：2013-03-29T15:59:04.523
> 
> 标签：wpf, winforms

我有一个自定义的 WPF 按钮控件，我想将此控件与 WinForm 应用程序一起使用。我知道如何使用 ElementHost 将 WPF 用户控件与 WinForm 一起使用。但我不知道将任何单个控件（不是用户控件）与 WinForm 应用程序的所有成员一起使用。你能建议我一个实现这一目标的好方法吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:03:38.567

使用命名空间中的[ElementHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx)`System.Windows.Forms.Integration`

[这里](http://tech.pro/tutorial/799/wpf-tutorial-using-wpf-in-winforms)有详细教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:04:23.820

你不能把它包装到一个用户控件吗？您仍然可以使用 Host.CustomizedButton.xxx 访问所有属性和方法。

# r - 访问 R 源代码文件

> ID：15706770
> 
> 赞同：3
> 
> 时间：2013-03-29T15:59:09.630
> 
> 标签：r

我是 R 新手，我已经成功安装了一个包。我想检查这个包的源代码。我知道我可以通过在提示符处输入函数的名称来查看给定函数的源代码。如何访问源代码文件以便可以浏览它？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:00:45.550

正如@Spacedman 在 R-help 列表下所写，*为什么这么害羞地提到这个包？*.

转到包的 CRAN 页面，直接下载源并解压缩文件。所有 R 文件都在`R`目录下，任何`C`文件都在`src`目录下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T16:00:31.350

最简单的方法是从 CRAN 下载源代码包，解压缩`tar.gz`文件（例如使用[7zip](http://www.7-zip.org/)或`tar`），浏览到`/R`子文件夹并打开包含代码的文件。如果您不确定某个特定功能的位置，您可以使用类似`grep`查找它的工具，例如：

```
grep spam_function * 
```

如果您正在寻找`spam_function`.

# c++ - C++ ifstream 没有读取\n？

> ID：15706776
> 
> 赞同：12
> 
> 时间：2013-03-29T15:59:24.077
> 
> 标签：c++, text, project, newline, ifstream

我正在尝试对文本文件的每行进行操作，而我现在的方式是，我的`ifstream`对象没有检测到`\n`每一行的字符，这是该项目所必需的。这是我现在的方式：

```
std::ifstream instream;
instream >> value;
while (value != '\n')
{
    // do code and such
} 
```

但是当我让它运行循环时，我得到的只是程序中所有内容的一行。虽然它正在做它应该在循环中做的事情，但我需要`\n`被识别。这是我的`.txt`文件：

```
LXXXVII
cCxiX
MCCCLIV
CXXXLL
MMDCLXXIII
DXLCC
MCdLxxvI
XZ
X
IV 
```

正是这样。我无法改变它。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-29T16:05:00.413

操作员执行“`>>`格式化输入操作”，这意味着（除其他外）它会跳过空格。

要在不跳过空格的情况下逐个读取原始字符，您需要使用“未格式化的输入操作”，例如`istream::get()`. 假设`value`是 type `char`，您可以使用`instream.get(value)`

当您到达 EOF 时，读取将失败，因此您可以读取循环中的每个字符，例如：

```
while (instream.get(value))
  // process value 
```

但是，要逐行阅读，您可以读入 a`std::string`并使用`std::getline`

```
std::string line;
while (getline(instream, line))
  // ... 
```

这是一个未格式化的输入操作，它将直到 a 的所有内容都读`\n`入字符串，然后丢弃该`\n`字符（因此您需要`\n`在每个 erad 行之后手动附加 a 以重建原始输入）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T16:09:34.980

您可以按如下方式阅读您的文件：

```
 ifstream instream("file.txt);
 string line;
 while (instream >> line)
 {
    cout << line;
    if (instream.peek() == '\n') //detect "\n"
    {
       cout <<endl;
    }
 }
 instream.close(); 
```

这样，您可以跟踪文件中的行结束位置并检测文件结尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-11T13:21:08.960

我猜你正在寻找这个： `instream.unsetf(std::ios_base::skipws)`

# ruby-on-rails - 如何在 Rails 中建立每周日历？

> ID：15706777
> 
> 赞同：0
> 
> 时间：2013-03-29T15:59:26.797
> 
> 标签：ruby-on-rails, calendar

我正在尝试构建一个每周日历，它显示本周的 7 天，以便我可以创建新事件并查看现有事件。

我不确定构建此日历的正确方法是什么。我应该先获取系统时间，然后再计算本周的 7 天吗？如果是这样，我怎样才能在 Rails 中获取系统时间。

如果没有，任何人都可以提供一些更好的建议吗？

我试图使用一些插件，但它们似乎都不令人满意，所以我正在构建自己的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:44:25.650

我建议使用 fullcalendar.js ( [http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/) ) - 我能够在很短的时间内在我的 Rails 应用程序中获得日历。

# python - 重复事件的延迟相当于什么？

> ID：15706778
> 
> 赞同：2
> 
> 时间：2013-03-29T15:59:28.833
> 
> 标签：python, events, twisted, deferred

对于延迟任务，Deferred 是一个非常棒的抽象。我想为重复事件设置同样优雅的东西，例如我的协议接收一条消息，我希望我的代码的不同部分注册它们的回调，以便在收到该消息时调用。在这里，延迟是不合适的。在扭曲的世界里，什么是合适的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T17:14:03.347

[管](http://tm.tl/1956)。它们还[没有完成](https://twistedmatrix.com/trac/browser/branches/tubes-1956-3)，但是您可以阅读一些开发中的[文档](https://twistedmatrix.com/trac/browser/branches/tubes-1956-3/doc/core/howto/tube.xhtml)和[一些](https://twistedmatrix.com/trac/browser/branches/tubes-1956-3/doc/core/howto/listings/tubes) [示例](https://twistedmatrix.com/trac/browser/branches/tubes-1956-3/doc/core/examples/amptube.py)。

# java - gae localhost 调试中的用户ID

> ID：15706780
> 
> 赞同：1
> 
> 时间：2013-03-29T15:59:33.810
> 
> 标签：java, google-app-engine, google-oauth

我目前正在测试 OAuth 功能`GAE Java`。我在本地测试它以避免长时间的部署。但是，`userID`通过.`OAuth``UserService`

这是我如何使用`UserService`

```
 UserService userService = UserServiceFactory.getUserService();
  User user = userService.getCurrentUser();

  if (user != null) {
      log.info("Identified User via google UserService: " + user.getNickname() + "[" + user.getUserId( ) + "]");
  } 
```

这就是我的做法`OAuth`

```
 User user = null;
    try {
        OAuthService oauth = OAuthServiceFactory.getOAuthService();
        user = oauth.getCurrentUser();

        log.info("User identified via OAuth: " + user.getNickname() + "[" + user.getUserId( ) + "]");

    } catch (OAuthRequestException e) {
        resp.getWriter().println(e.toString());
    } 
```

这是日志记录的输出：

> 信息：通过谷歌用户服务识别用户：example@example.com[13570591531824211424]
> 
> 信息：通过 OAuth 识别的用户：example@example.com[0]

你看`userID`是不一样的。我怎样才能得到相同的`userID`两者，`OAuth`和`UserService`？

# scala - 循环调用一个函数，直到它返回 None

> ID：15706788
> 
> 赞同：9
> 
> 时间：2013-03-29T15:59:46.633
> 
> 标签：scala, functional-programming

我经常遇到一个模式，所以我想知道 Scala 库中是否有任何方便的方法。

让它成为一个函数`f: A => Option[B]`。我想做一个以`f`开始的循环调用`x`，`f(f(f(x).get).get...)`直到`f`返回`None`并保留最后一个非`None`值。

我为此编写了一个实现：

```
@tailrec
def recurrentCallUntilNone[B](f: B => Option[B], x: B): B = f(x) match {
  case Some(y) => recurrentCallUntilNone(f, y)
  case None => x
} 
```

这已经在标准库中实现了吗？

一个使用示例可能是保持当前位置的列表（拉链）。通过调用`next`,`None`如果当前位置之后没有元素或`Option`同一个列表没有元素，则返回，但当前位置递增。通过使用上述方法，`end`可以构造一个将列表查找到末尾的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T14:51:58.387

你正在做的看起来像是一种非常特殊的[蹦床](http://blog.richdougherty.com/2009/04/tail-calls-tailrec-and-trampolines.html)。更一般的 case 使用包装在 case 类中的函数而不是 an `Option`，并支持不同的参数和返回类型。

正如 Calin-Andrei 指出的，蹦床在标准库中可以使用[TailCalls 对象](http://www.scala-lang.org/api/current/index.html#scala.util.control.TailCalls%24)。

从第一个链接：

```
def even2(n: Int): Bounce[Boolean] = {
  if (n == 0) Done(true)
  else Call(() => odd2(n - 1))
}
def odd2(n: Int): Bounce[Boolean] = {
  if (n == 0) Done(false)
  else Call(() => even2(n - 1))
}
trampoline(even2(9999))

sealed trait Bounce[A]
case class Done[A](result: A) extends Bounce[A]
case class Call[A](thunk: () => Bounce[A]) extends Bounce[A]

def trampoline[A](bounce: Bounce[A]): A = bounce match {
  case Call(thunk) => trampoline(thunk())
  case Done(x) => x
} 
```

现在有了标准库

```
import scala.util.control.TailCalls._

def even2(n: Int): TailRec[Boolean] = {
  if (n == 0) done(true)
  else tailcall(odd2(n - 1))
}
def odd2(n: Int): TailRec[Boolean] = {
  if (n == 0) done(false)
  else tailcall(even2(n - 1))
}
even2(9999).result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-29T16:32:18.500

怎么样：

```
Stream.iterate(Some(x)) { x => x.flatMap(f _) }.takeWhile { _.isDefined }.last 
```

**更新**

甚至更整洁的恕我直言（仅单次遍历）：

```
val result = {
  val xs = Stream.iterate(Some(x)) { x => x.flatMap(f _) }
  (xs zip xs.tail) collectFirst {
    case (Some(x), None) => x
  } get
} 
```

请注意，调用是安全的，`collectFirst`因为我们不能以 a 开头`None`（否则可能出现无限循环）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T20:45:31.297

在选美比赛的情况下，您可以构建一个函数，通过使用柯里化将现有的怪物转换为您正在谈论的怪物。

```
def composeUntilTheEnd[B](f: Option[B] => Option[B])(x: Option[B]): Option[B] = 
        if (f(x) != None) composeUntilTheEnd(f)(f(x))
        else x

def ff = composeUntilTheEnd((x:Option[Int]) => x)_ 
```

现在打电话给`ff`你得到预期的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T02:49:12.220

如果您愿意，您可以从您的选项中创建一个蒸汽，然后在其上使用流函数来获取最后定义的元素。（或者更确切地说是未定义元素之前的最后一个定义元素）

```
def options[B](f: B => Option[B], initialValue: Option[B]): Stream[Option[B]] = {
  initialValue #:: options(f, initialValue.map(f(_)).flatten)
}

options.takeWhile(_.isDefined).last 
```

# list - 实体框架中的关系 n:n（列表错误）

> ID：15706789
> 
> 赞同：0
> 
> 时间：2013-03-29T15:59:55.643
> 
> 标签：list

我在将对象与关系 n 关联到 n 时遇到问题。（使用实体框架）

```
Table:Item_Estoque
..attributes..

Table2 : Item_Estoque_Producao
Quantidade
Item_Estoque_Produto(Item_Estoque)
Item_Estoque_Mercadoria(Item_Estoque) 
```

编码：

```
List<Item_Estoque> listaEstoque = item.Item_Estoque.Where(ie => ie.Quantidade > 0);

List<Item_Estoque_Producao> lstEstoqueProducao = new List<Item_Estoque_Producao>();

foreach (Item_Estoque itemEstoque in listaEstoque)
{
    Item_Estoque_Producao estoqueProducao = new Item_Estoque_Producao();
    estoqueProducao.Item_Estoque_MateriaPrima = itemEstoque;
    estoqueProducao.Quantidade = quantidade;
    lstEstoqueProducao.Add(estoqueProducao);
}

Item_Estoque itemEstoqueProduto = new Item_Estoque();
...

foreach (Item_Estoque_Producao estoqueProducao in lstEstoqueProducao)
{
    itemEstoqueProduto.Item_Estoque_Producao_Produto.Add(estoqueProducao);
    !!! ERROR!!! "Unable to define the relationship between the two objects because they are attached to different ObjectContext objects."
} 
```

我尝试使用 2 个不同的 Item_Estoque 创建 Item_Estoque_Produção，但是当我设置第二个 Item_Estoque 时，出现了问题。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:48:34.513

解决了！

我将“使用（ModelContainer bc = new ModelContainer）”放在foreach的中间。我把它放在代码的开头！

解决！

# ajax - Phonegap - 在 ajax 调用中运行 executeSql 会导致 INVALID_STATE_ERROR

> ID：15706790
> 
> 赞同：1
> 
> 时间：2013-03-29T15:59:59.710
> 
> 标签：ajax, cordova, jsonp

我正在做一个项目，我从我的服务器数据库中获取特定用户并将用户数据插入本地电话数据库。我正在使用事务中的 ajax(jsonp) 请求执行此操作（请参阅代码）。如果我运行这段代码，它会给我一个 INVALID_STATE_ERROR。

我尝试将 tx.executeSql 包装在 db.transaction 中（在 ajax 调用成功的情况下），这消除了 INVALID_STATE_ERROR 但它不会插入任何数据。

帮助！

交易代码：

```
db.transaction(function(tx)
    {
        tx.executeSql('DROP TABLE IF EXISTS userdata');
        tx.executeSql('CREATE TABLE IF NOT EXISTS userdata (id INTEGER PRIMARY_KEY, name)');

        $.ajax({
            url: 'http://[myserver]/getUser.php',
            type: 'get',
            data: {'user': enteredUser, 'pass': enteredPass},
            dataType: 'jsonp',
            contentType: "application/json",
            jsonpCallback: 'getUser',
            /*async: false,*/
            timeout: 5000,
            success: function(data, status) {

                //alert(data.name);

                    tx.executeSql('INSERT INTO userdata (id, name) VALUES (' + data.id + ', "' + data.name + '")');

            },
            error: function(a, b, c){

               alert('Update Failed: ' + a.status);
               alert('Update Failed: ' + c);
            }
        });

    }, 
    onNoUser,
    function()
    {
        db.transaction(checkLogin, showLogin);
    }); 
```

如果需要更多代码或信息，请告诉我！

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T09:31:07.003

我遇到了同样的问题（“InvalidStateError”），但在 AJAX 回调中创建一个新事务解决了我的问题。将数据插入数据库也可以正常工作。

尝试在 onError 回调中记录错误

```
tx.executeSql(sqlStatement, dataArray, onSuccess, function(tx, err) {
    console.log(err.message);
}); 
```

可能会发生另一个错误，阻止数据写入数据库。

# spring.net - 如何通过 Spring.Net 配置将 HttpContext 注入 HttpContextBase

> ID：15706791
> 
> 赞同：0
> 
> 时间：2013-03-29T16:00:06.330
> 
> 标签：spring.net

我有这样的课：

```
class Test
{
    public Test(HttpContextBase httpContext) { }
} 
```

我想通过 Spring.net 配置将 HttpContext 注入这个类。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T06:22:57.903

我使用 spring.net 表达式属性解决了它。

# android - 在应用程序运行时发送 GPS 数据

> ID：15706794
> 
> 赞同：0
> 
> 时间：2013-03-29T16:00:18.683
> 
> 标签：android, gps

我开发了获取 GPS 数据并发送到服务器的应用程序。所以我想在我的应用程序在 Android 设备中运行后台时获取 GPS 数据。我有两节课。其中一个是主类，另一个是 GPSTracker。我想为我的应用程序使用 Android 服务。但我不知道我是怎么做到的。我的以下代码；主类：

```
public class Request extends Activity {
public static Float longitude;
public static Float latitude;
 public static int ID;  
public static String URL="http://xxx.xxx";
GPSTracker gps;

@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_request);

final Button button_send_info =    (Button)findViewById(R.id.button_send_info); 
final TextView show_infos = (TextView) findViewById (R.id.textView1);
gps = new GPSTracker(Request.this);

if(gps.canGetLocation()){

    latitude = (float) gps.getLatitude();
    longitude = (float) gps.getLongitude();

    // \n is for new line
    Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();    
}else{
    // can't get location
    // GPS or Network is not enabled
    // Ask user to enable GPS/network in settings
    gps.showSettingsAlert();
}

if( Build.VERSION.SDK_INT >= 8){
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 
}

button_send_info.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
        postParameters.add(new BasicNameValuePair("latitude", latitude.toString()));
        postParameters.add(new BasicNameValuePair("longitude", longitude.toString()));

        String response = null;
        try 
        {
            response = CustomHttpClient.executeHttpPost(URL, postParameters);
            String res=response.toString();
            show_infos.setText(res);
        } 
        catch (Exception e) 
        {
            //hata alanı
        }
    }
}); 
```

GPSTracker 类；

```
 public class GPSTracker extends Service implements LocationListener {

 protected LocationManager locationManager;

 public GPSTracker(Context context) {
this.mContext = context;
getLocation();
}

public Location getLocation() {
try {
    locationManager = (LocationManager) mContext
            .getSystemService(LOCATION_SERVICE);

    // getting GPS status
    isGPSEnabled = locationManager
            .isProviderEnabled(LocationManager.GPS_PROVIDER);

    // getting network status
    isNetworkEnabled = locationManager
            .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

    if (!isGPSEnabled && !isNetworkEnabled) {
        // no network provider is enabled
    } else {
        this.canGetLocation = true;
        if (isNetworkEnabled) {
            locationManager.requestLocationUpdates(
                    LocationManager.NETWORK_PROVIDER,
                    MIN_TIME_BW_UPDATES,
                    MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
            Log.d("Network", "Network");
            if (locationManager != null) {
                location = locationManager
                        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                if (location != null) {
                    latitude = location.getLatitude();
                    longitude = location.getLongitude();
                }
            }
        }
        // if GPS Enabled get lat/long using GPS Services
        if (isGPSEnabled) {
            if (location == null) {
                locationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("GPS Enabled", "GPS Enabled");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
        }
    }

} catch (Exception e) {
    e.printStackTrace();
}

return location; 
```

}

我在哪里定义这个类的服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:42:27.757

在这里使用 AsyncTask [你可以找到很好的教程](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html)

# jakarta-ee - @MappedSuperclass 上的实体侦听器不起作用？

> ID：15706795
> 
> 赞同：2
> 
> 时间：2013-03-29T16:00:20.423
> 
> 标签：jakarta-ee, jpa-2.0, mappedsuperclass, entitylisteners, table-per-class

## 背景

我正在使用 EclipseLink（版本 2.3.2.v20111125-r10461，JPA 2.0 规范的实现提供程序）。

考虑一下这个`@MappedSuperclass`，称为**Person**：

```
@MappedSuperclass
@EntityListeners({Listener.class})
public abstract class Person implements Serializable
{
    @Id @GeneratedValue
    private Long id;
} 
```

他是*抽象*的，并附有一个听众（**Listener ）。**这是监听器的实现：

```
public class Listener
{
    @PrePersist
    public void sayHi(Person person) {
        System.out.println("Hi!");
    }
} 
```

然后我们有一个扩展**Person的****Employee**类：

 **```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class Employee extends Person
{
    private int salary;
} 
```

**Employee**仍然是*抽象*的，并不意味着被实例化。但是， Employee 被认为可能是关系的一部分，因此被注释掉了`@Entity`。层次结构继续使用名为**PartTimeEmployee的***非抽象实体*：

 **```
@Entity
public class PartTimeEmployee extends Employee
{
    private int hoursWorked;
} 
```

**PartTimeEmployee**旨在被实例化。让我们尝试一下，看看会发生什么！除了一个小细节外，一切似乎都很好。`@MappedSuperclass` **在Person**上注册的实体监听器不会被调用。如果我们将`@EntityListeners`注释从**Person**向上移动到**Employee** ，甚至不会调用侦听器。

## 一个修复

将`@EntityListeners`注释一直移动到**PartTimeEmployee**，他将被调用。唔。

## 另一个修复

*如果我们完全省略***Employee**上的注释，我们可以保持在**Person**上注册的侦听器，并且侦听器将按预期调用。但是当然，我得到了一个我不想拥有的单桌策略。同样，我们可以更明确一点，将策略值从to更改为，然后将调用侦听器。当然，唯一的问题是我的数据库模式看起来不像我想要的那样。*`@Inheritance`**`InheritanceType.TABLE_PER_CLASS``InheritanceType.SINGLE_TABLE`***

 ***因此，这里问题的核心是**Employee**`@Inheritance`类上的注释（更具体地说；将策略更改为每个类一个表），这使得 EclipseLink 忘记了层次结构中的所有实体侦听器。

 **这根本不是我所期望的。我不明白的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:07:58.423

我想您可能已经发现了一个 EclipseLink 错误，它们在继承注释中很常见。

我建议升级到最新版本的 EclipseLink，你的版本已经超过一年了。如果这不起作用，那么您将不得不用您的侦听器注释您的派生类。

如果你感觉特别喜欢冒险，你可以实现一个 SessionCustomizer，它会在启动时为类添加监听器。*********

# ios - CoreData - insertNewObjectForEntityForName 无法设置属性

> ID：15706796
> 
> 赞同：1
> 
> 时间：2013-03-29T16:00:24.437
> 
> 标签：ios, objective-c, core-data, runtime-error

我将 CoreData 与一个实体和该实体的两个属性一起使用。
实体：Binder
属性：名称，lastOpened
,br> 我可以毫无问题地插入实体的新对象，我也可以设置它的名称，但我不能设置它的 lastOpened 属性。
这是我的代码：

```
Binder *newBinder = [NSEntityDescription insertNewObjectForEntityForName:@"Binder" inManagedObjectContext:context];
[newBinder setName:@"Binder"];
[newBinder setLastOpened:[NSDate date]]; //Tried this first
newBinder.lastOpened = [NSDate date]; //No compiler warning either 
```

但是，当我运行应用程序时，我得到一个错误，`-[Binder setLastOpened:]: unrecognized selector sent to instance 0x9688870`

我可以验证显示的内存地址实际上是正确的 Binder 对象。关于为什么我可以设置一个属性但不能设置另一个属性的任何想法？谢谢。
活页夹.h：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Cards;

@interface Binder : NSManagedObject

@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSDate * lastOpened;
@property (nonatomic, retain) NSSet *cards;
@end

@interface Binder (CoreDataGeneratedAccessors)

- (void)addCardsObject:(Cards *)value;
- (void)removeCardsObject:(Cards *)value;
- (void)addCards:(NSSet *)values;
- (void)removeCards:(NSSet *)values;

@end 
```

活页夹.m：

```
#import "Binder.h"
#import "Cards.h"

@implementation Binder

@dynamic name;
@dynamic lastOpened;
@dynamic cards;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:48:27.597

Xcode 偶尔会搞砸重建对 xcdatamodel 的更改。下一次，尝试做一个干净的构建。

此外，您不应该硬核类名字符串，因为它会破坏重构。

```
[NSEntityDescription insertNewObjectForEntityForName:NSStringFromClass([Binder class]) inManagedObjectContext:context] 
```

此外，为类名和托管对象添加前缀。（例如更喜欢 XYZBinder 而不是 Binder）。您将避免将来因命名空间冲突而感到痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:40:10.793

您可能已经在项目中加载了另一个名为 Binder 的类。尝试将 CoreData 实体的类名设置为 XCode 中的 BinderMO 之类的名称，然后重新创建类文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:02:18.290

我不确定问题出在哪里，但我删除了我的 Binder.h/.m 文件并重新创建了它们，现在它可以工作了。旧的和新的唯一的区别是'name'和'lastOpened'交换了位置。谢谢您的帮助。

新活页夹.h：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Cards;

@interface Binder : NSManagedObject

@property (nonatomic, retain) NSDate * lastOpened;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSSet *cards;
@end

@interface Binder (CoreDataGeneratedAccessors)

- (void)addCardsObject:(Cards *)value;
- (void)removeCardsObject:(Cards *)value;
- (void)addCards:(NSSet *)values;
- (void)removeCards:(NSSet *)values;

@end 
```

新活页夹.m：

```
#import "Binder.h"
#import "Cards.h"

@implementation Binder

@dynamic lastOpened;
@dynamic name;
@dynamic cards;

@end 
```

# php - zend 显示标签而不是文本字段

> ID：15706797
> 
> 赞同：0
> 
> 时间：2013-03-29T16:00:24.540
> 
> 标签：php, zend-framework

在表单中，有文本，它从 DB 中获取值，当 DB 为空时，将显示空文本框，

现在我想显示标签（请先更新数据库）而不是空白文本框。如何以形式做到这一点。

```
$txt_box = new Zend_Form_Element_Text('txt_ur_randID');

$this->addElements(array($username,$txt_box,$submit)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:27:58.527

我刚刚完成了 Zend_Form_Element_Note 类。

# .net - 水晶报表显示不需要的空间

> ID：15706799
> 
> 赞同：-1
> 
> 时间：2013-03-29T16:00:32.350
> 
> 标签：.net, visual-studio, c#-4.0, crystal-reports

我有一个使用水晶的销售发票打印报告，但如果我在一张发票上有超过 22 项，则剩余项目在第二页。但是在开始项目之前，我每隔一页就会有一个很大的空间......

在这里看我的图片，第一页还可以，但是第二页的详细信息只有在多余的空间之后才开始。（从 23 开始）

[http://farm9.staticflickr.com/8505/8600841422_ef5dc8b225_m.jpg](http://farm9.staticflickr.com/8505/8600841422_ef5dc8b225_m.jpg)

第二页。。

[http://farm9.staticflickr.com/8247/8599744105_4487917838_m.jpg](http://farm9.staticflickr.com/8247/8599744105_4487917838_m.jpg)

如果我有 3 页，则空间增加超过第二页。也有一行像 cont.... **_** ******__******

 ****希望各位好心人帮帮忙。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:04:34.093

我曾经遇到过类似的问题。

我无意中在控件上放置了两个静态文本字段，因此一个与另一个重叠了一点。

移动文本字段，使它们彼此邻接，而不是重叠，解决了这个问题。****

# asp.net-mvc-3 - 在 asp.net MVC 3 中重定向到 aspx 页面

> ID：15706807
> 
> 赞同：0
> 
> 时间：2013-03-29T16:00:56.033
> 
> 标签：asp.net-mvc-3, url-routing, response.redirect

我有一个 MVC3 应用程序。在视图文件夹之外，我创建了一个名为 Reports 的文件夹，在 Reports 中，我添加了一个带有 ViewUserControl 的 Index.aspx 页面，在这里我调用了 SQL 服务器报告服务。我有 StatisticsController 和 View，我在其中选择参数，然后在 Controller 中使用此参数重定向到 .aspx 页面。它在本地机器上工作，但是当我把它放到外部服务器上时，我得到错误页面：

> “/Reports”应用程序中的服务器错误。无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/Reports/Index.aspx

在控制器中，我使用了如下所示的功能：

```
 public ActionResult PacStatRep1(string dateFrom, string dateTo)
    {
        string CustomerNumber = _workContext.CurrentCustomer.Id;
        string url = "~/Reports/Index.aspx?CustomerNumber=" + CustomerNumber + "&dateFrom=" + dateFrom + "&dateTo=" + dateTo;
        return Redirect(url);
    } 
```

任何建议如何访问此页面？不知道是重定向问题还是iis问题或其他问题。

# spring - Spring中的自定义注释处理器

> ID：15706812
> 
> 赞同：3
> 
> 时间：2013-03-29T16:01:07.680
> 
> 标签：spring, annotations, maven-3

我已经写了注释

```
 @Retention(RetentionPolicy.SOURCE)
public @interface Encrypt {

} 
```

及其处理器...

```
@SupportedAnnotationTypes("it.trecube.annotation.Encrypt")
@SupportedSourceVersion(SourceVersion.RELEASE_7)
public class EncryptProcessor extends AbstractProcessor{

    public EncryptProcessor(){
        super();
    }

    @Override
    public boolean process(Set<? extends TypeElement> annotations,
            RoundEnvironment roundEnv) {
        String className = null;
        String packageName = null;
        String fqClassName = null;
        for (Element elem : roundEnv.getElementsAnnotatedWith(Encrypt.class)) {
            if (elem.getKind() == ElementKind.CLASS) {
                //              Encrypt encrypt = elem.getAnnotation(Encrypt.class);
                //              String message = "annotation found in " + elem.getSimpleName();
                //              processingEnv.getMessager().printMessage(Kind.NOTE, message);
                TypeElement classElement = (TypeElement) elem;
                PackageElement packageElement = (PackageElement) classElement.getEnclosingElement();

                processingEnv.getMessager().printMessage(
                        Diagnostic.Kind.NOTE,
                        "annotated class: @Encrypt" , elem);

                className = classElement.getSimpleName().toString();
                packageName = packageElement.getQualifiedName().toString();
                fqClassName = classElement.getQualifiedName().toString();

                if (fqClassName != null) {
                    processingEnv.getMessager().printMessage(
                            Diagnostic.Kind.NOTE,
                            "fqClassName: "+fqClassName , elem);
                    Properties props = new Properties();
                    URL url = this.getClass().getClassLoader().getResource("velocity.properties");
                    try {
                        props.load(url.openStream());
                    } catch (IOException e) {
                        processingEnv.getMessager().printMessage(
                                Diagnostic.Kind.ERROR,
                                "annotated class: " + classElement.getQualifiedName()+"->\n"+
                                        e.getMessage(), elem);
                        e.printStackTrace();
                        return true;
                    }
                    VelocityEngine ve = new VelocityEngine(props);
                    ve.init();

                    VelocityContext vc = new VelocityContext();

                    vc.put("className", className);
                    vc.put("packageName", packageName);

                    Template vt = ve.getTemplate("encrypt.vm");
                    File file = new File("src/main/java/"+fqClassName.replace(".", "/")+"_Encrypt.aj");
                    try {
                    BufferedWriter bw = new BufferedWriter(new FileWriter(file));

                        processingEnv.getMessager().printMessage(
                                Diagnostic.Kind.NOTE,
                                "creating source file: " + file.getAbsolutePath());

                        processingEnv.getMessager().printMessage(
                                Diagnostic.Kind.NOTE,
                                "applying velocity template: " + vt.getName());

                        vt.merge(vc, bw);

                        bw.close();
                    } catch (IOException e) {
                        processingEnv.getMessager().printMessage(
                                Diagnostic.Kind.ERROR,
                                "applying velocity error: " + vt.getName()+"->\n"+e.getMessage());
                        e.printStackTrace();
                    }
                }
            }
        }
        return true; // no further processing of this annotation type
    } 
```

我已经在一个 Maven 客户端项目中测试了所有内容并且所有的工作，但是当我尝试将它用于现有的 Spring（完整的 Maven 构建）项目时不起作用......有人可以帮助我吗？肿瘤坏死因子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:11:12.653

您是否在`META-INF/services/javax.annotation.processing.Processor`拥有注释处理器的项目中创建了文件？此文件应包含处理器的完全限定名称。此外，使用 maven，您可以通过配置指定在构建中使用哪些注释处理器`maven-compiler-plugin`：

```
<plugin>
   <artifactId>maven-compiler-plugin</artifactId>
   <configuration>
        <annotationProcessors>
            <annotationProcessor>com.mycompany.MyAnnotationProcessor</annotationProcessor>
        </annotationProcessors>
    </configuration>
</plugin> 
```

此外，将注释处理器与您使用的项目放在同一个项目中可能会导致 maven 出现一些问题，因此如果您还没有这样做，我建议您将注释处理器和注释提取到单独的 maven 项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:39:02.790

Solved adding this...

```
 <plugin>
                <groupId>org.bsc.maven</groupId>
                <artifactId>maven-processor-plugin</artifactId>
                <executions>
                    <execution>
                        <id>process</id>
                        <goals>
                            <goal>process</goal>
                        </goals>
                        <phase>generate-sources</phase>
                    </execution>
                </executions>
            </plugin> 
```

# neo4j - Neo4j 图形设计 - 标题/类别节点？

> ID：15706814
> 
> 赞同：3
> 
> 时间：2013-03-29T16:01:11.623
> 
> 标签：neo4j

允许单个用户拥有数千个关系的最佳设计是什么？

（在社交网络应用程序上工作 - 如果您知道任何“通用”社交网络设计，请指出它们......会有所帮助）

看这张图——状态更新代表一个链表，而兴趣代表杂项兴趣。对于一个用户来说，这些兴趣真的会爆炸到数千个节点——这不会导致某种超级节点问题吗？

图1

![数字](../Images/4488e8037af6d241cfed12db45f7c9fd.png)

为这些兴趣设置一个类别或“标题”节点，然后让这两个兴趣属于该类别节点，会是更好的设计吗？我在想，当您最初处理用户节点和几个关系/标题节点时，它可能更有效，而不是可能有数千个与用户节点直接相关的节点。

示例： **图 2** 用户
|
+ 兴趣+
+----- 兴趣
+----- 兴趣
+----- 等等...

并且不应该兴趣也有“子标题”类别节点，例如“书籍”，“电影”，“产品”这样的：

```
**FIGURE 3**
User
|
+ interests+ 
           + books+
           |      + interest
           |      + interest
           |      + interest
           + movies+<br>
                   + interest
                   + interest
                   + interest 
```

（显然我是neo的n00b）

以下是我的问题：

1.  哪种模型最适合高性能、**可扩展**、类似 facebook 的系统 - 一个没有类别，或者一个有类别？记住性能..

2.  兴趣可能不会总是激增到数千个节点——可能是十几个或一百个——添加类别的设计是否会增加太多开销？考虑尝试寻找和你一样喜欢的朋友——添加类别会增加太多开销吗？

3.  后面的图像 - 那些具有类别和子类别节点的图像 - 它们只是看起来更好但对性能、组织等没有任何作用吗？

4.  除了类别节点，是否应该只有一个类别属性来描述它所在的类别？在索引上添加具有类别属性的节点是否与具有类别节点一样好？

5.  In regards to question 4, would adding nodes with categories on an index be a better solution?

6.  What are the disadvantages to this type of structure? Are they any real advantages?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:08:17.287

I think that the interest categories are a good idea when your interests blow up to hundreds of thousands or millions of connections, if it is only a few thousand it should still work good enough. Perhaps that's even something you can evolve your user-nodes to when you actually need it. (Like a different handling of superstars on twitter).

It all depends also on your use-cases, what kinds of queries would you want to answer with the model, would those be limited to the categories or always query across all categories to the interests below?

Something you always have to take into account, is that the number of relationships touched will grow exponentially with each step you traverse out into the graph. So be aware that if you query from a user to all its friends or friends of friends and all their interests, the number of elements touched grows pretty quickly. Make sure your server has enough memory to keep large enough portions of the graph in memory to answer your requests quickly.

And make sure to do performance and load tests early on (e.g. with a data-generator).

Btw. to filter eagerly it might even be sensible to have a distinct relationship-type per interest, so that you can filter early on without actually following the rels that you are not interested in.

索引通常有助于全局类别，您可以使用名称和用户 ID 为您的类别编制索引，但随后您的用户时间类别索引条目也可以快速增长。

我认为，如果您的用例真的是针对每个类别而不是针对所有兴趣（尤其是针对所有用户和所有兴趣），那么类别方法应该可以很好地扩展。

# python - IndexError: list assignment index out of range Python 3 这是什么意思，我该如何解决？

> ID：15706819
> 
> 赞同：0
> 
> 时间：2013-03-29T16:01:39.917
> 
> 标签：python, python-3.x, syntax-error

```
elif letterGuess in letterList: # if the letter is one the word characters
  count = 1
  print (letterGuess, ' is in the word!')
  for n in letterList:
      if n == letterGuess: # replaces the dashes with letters
          dash[count - 1] = letterGuess # takes the dash in position and replaces
      count += 1
  count = 0 
```

这是hangman的一些代码的一部分。它说错误在行内：

```
dash[count - 1] = letterGuess 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:10:49.513

Dash could only be of length 0 or not iterable.Print dash and cout derectly befor the line that causes the eror.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:03:47.853

这意味着`count`大于 的长度`dash`。由于我们不知道`dash`应该包含什么，所以很难说更多。

# actionscript-3 - AS3单击另一个按钮时卸载外部文件

> ID：15706821
> 
> 赞同：0
> 
> 时间：2013-03-29T16:01:40.583
> 
> 标签：actionscript-3, button, load, external

我通过单击按钮将这个 txt 文件加载到 AS3 (Flash) 中。但是当我单击任何其他按钮时，我希望 txt 消失。我试过了 stop(); 和 unloadAndStop，但它不起作用。有任何想法吗？

```
hello_btn.addEventListener(MouseEvent.CLICK,  buttonClick4)
function  buttonClick4(e:MouseEvent):void
{
     try{
loader_mc.unloadAndStop();
} catch(e:Error) {
}
      var loader:URLLoader;
var info_text:TextField;

CSSFormattingExample();

function CSSFormattingExample():void
{
    info_text = new TextField();
    info_text.wordWrap = true;
    info_text.x = 300;
    info_text.y = 160;
    info_text.width = 800;
    info_text.height = 800;
    addChild(info_text);
}
var url:String = "hello.txt";
var loadit:URLLoader = new URLLoader();
loadit.addEventListener(Event.COMPLETE, completeHandler);
loadit.load(new URLRequest(url));

function completeHandler(event:Event):void
{
    info_text.htmlText = event.target.data as String;
}
} 
```

# jquery - 比较两个客户端键入的文本字段jQuery

> ID：15706827
> 
> 赞同：16
> 
> 时间：2013-03-29T16:02:04.600
> 
> 标签：jquery, html

我的 jQuery“比较”功能有一些问题。它的任务是比较两个文本区域并突出显示差异。

例如。一个文本区域中的“My name is Michael”，另一个文本区域中的“My name is Michel”。

我的函数将返回两个输入并突出显示第一个输入中的字符“a”，并突出显示第二个输入中缺少的字符。

到目前为止，这就是该功能的外观，但它似乎并非 100% 有效。

```
$(function () {

$('#btnCompare').on('click', function () {
    compare();
});

function compare() {
    $('#divColLeft').empty();
    $('#divColRight').empty();
    var textOne = $('#taOneComp').val();
    var textTwo = $('#taTwoComp').val();

    var output;
    var outputX;

    var arrTextOne = [];
    var arrTextTwo = [];

    for (var i = 0; i < textOne.length; i++) {
        output = textOne.charAt(i);
        arrTextOne.push(output);
    }
    for (var x = 0; x < textTwo.length; x++) {
        outputX = textTwo.charAt(x);
        arrTextTwo.push(outputX);
    }

    $.each(arrTextOne, function (y, e) {
        if ($.inArray(e, arrTextTwo) == -1) {
            $('#divColLeft').append(e);
            $('#divColLeft').highlight(e);
        } else {
            $('#divColLeft').append(arrTextOne[y]);
        }
    });

    $.each(arrTextTwo, function (z, f) {
        if ($.inArray(f, arrTextOne) == -1) {
            $('#divColRight').append(f);
            $('#divColRight').highlight(f);
        } else {
            $('#divColRight').append(arrTextTwo[z]);
        }
    });
}

}); 
```

**更新：更准确并改进原始问题**

如果有些在两个文本中的任何一个之前包含字符“a”，那么这是应该突出显示的差异。在第一个文本中，应该突出显示“a”，在第二个文本中我想输入一个突出显示差异的空白区域（丢失的字符）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T19:56:25.317

只有当两个字符串具有完全相同的长度和相同的单词排列时，您的代码才会起作用，否则它会崩溃，即如果您在测试字符串的开头添加一个额外的字符。
经过一些编码后，我设法想出了下面的代码，它比较了两个字符串并找到丢失的字符/单词、多余的字符/单词和错误的拼写：

```
function compare() {
    var elm1 = document.getElementById("div1"),
        elm2 = document.getElementById("txt"),
        output = document.getElementById("div2"),
        txt1 = elm1.innerHTML,          //original text
        txt2 = elm2.value,              //submitted text
        arr1 = txt1.split(" "),         //split original text to array of words
        arr2 = [];                      //miss matching words will be added here

//filter txt1 and txt2 from matching words and add miss matching to arr2///////
    for (var i in arr1) {
        var match = txt2.match(new RegExp("\\b" + arr1[i] + "\\b"));
        if (match) {
            txt2 = txt2.replace(new RegExp("\\s?" + arr1[i]), "");
            txt1 = txt1.replace(new RegExp("\\s?" + arr1[i]), "");
        } else if (!match) {
            arr2.push(arr1[i]);
        }
    }
//compare miss matching words from original and submitted text, if matching charachters is more that 50% highlight missing and extra characters
    var arr3 = txt2.split(" "), //convert filtered submitted text to words array
        right = elm1.innerHTML,
        wrong = elm2.value;
    for (var a in arr2) {
        for (var b in arr3) {
            var match2 = arr3[b].match(new RegExp("[" + arr2[a] + "]", "g")),
                t = (arr2[a].length > arr3[b].length) ? arr2[a].length : arr3[b].length;
            if (match2 && match2.length >= t * 0.5) { //check for words that look similar
                txt2 = txt2.replace(new RegExp("\\s?" + arr3[b]), "");
                txt1 = txt1.replace(new RegExp("\\s?" + arr2[a]), "");
                var str1 = "",
                    str2 = "",
                    n = 0;
                for (var c = 0; c < t; c++) {
                    if (arr2[a].charAt(c) === arr3[b].charAt(c + n)) {
                        str1 += arr3[b].charAt(c + n);
                        str2 += arr2[a].charAt(c);
                    } else if (arr2[a].charAt(c) !== arr3[b].charAt(c + n)) {
                        if(arr2[a].charAt(c + 1) == arr3[b].charAt(c + n)){
                            str2 += arr2[a].charAt(c).fontcolor("blue");
                            str1 += "_".fontcolor("red");
                            n--;
                        }else if(arr2[a].charAt(c) == arr3[b].charAt(c + n + 1)){
                            str1 += arr3[b].charAt(c + n).fontcolor("orange");
                            n++;
                            c--;
                        }else{
                            str1 += arr3[b].charAt(c + n).fontcolor("red");
                            str2 += arr2[a].charAt(c).fontcolor("green");
                        }
                    }
                }
                wrong = wrong.replace(arr3[b], str1);
                right = right.replace(arr2[a], str2);
            }
        }
    }
//check for extra words//////////////////////////////////////
    extra = txt2.split(" ");
    for(var d in extra){
        wrong = wrong.replace(extra[d], extra[d].fontcolor("grey"));
    }
//check for missing words//////////////////////////////////////
    missing = txt1.split(" ");
    for(var f in missing){
        right = right.replace(missing[f], missing[f].fontcolor("blue"));
    }
    output.innerHTML = wrong;
    elm1.innerHTML = right;
} 
```

[演示](http://jsfiddle.net/arcm111/LZzF2/)

**这个怎么运作：**

1.  比较原始和提交的文本并找到匹配的单词并将它们删除
2.  比较两个字符串中的剩余单词
3.  如果两个词看起来相似（相等的字符 => 总字符的 50%）
4.  检查缺失/额外/拼写错误的字符并突出显示它们。
5.  从两个字符串中删除拼写错误的单词
6.  将原文中剩余的词高亮为缺失词
7.  将提交的文本中剩余的单词突出显示为额外的单词

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:25:55.127

我的代码将第一个 textarea 单词与第二个 textare 单词进行比较。例如 ..first textarea 文本是“你好吗”，第二个 textarea 文本是“我很好”。它将比较“how”与“I”和“are”与'am'.. 请试试这个代码......我的**[小提琴](http://jsfiddle.net/prabhu5013/dVUE6/)**

```
 $(function () {

            $('#btnCompare').on('click', function () {
                compare();
                return false;
            });

            function compare() {
                $('#divColLeft').empty();
                $('#divColRight').empty();

                var textOne = $.trim($('#taOneComp').val());
                var textTwo = $.trim($('#taTwoComp').val());

                var TempArr1 = textOne.split(' ');
                var TempArr2 = textTwo.split(' ');
                var arr1 = [];
                for (var i = 0; i < TempArr1.length; i++) {
                    if (TempArr1[i] !== "" && TempArr1[i] !== null) {
                        arr1.push(TempArr1[i]);
                    }
                }

                var arr2 = [];
                for (var i = 0; i < TempArr2.length; i++) {
                    if (TempArr2[i] !== "" && TempArr2[i] !== null) {
                        arr2.push(TempArr2[i]);
                    }
                }
                var minArrLen = arr1.length < arr2.length ? arr1.length : arr2.length;

                for (var x = 0; x < minArrLen; x++) {

                    var maxCharLen = arr1[x].length > arr2[x].length ? arr1[x].length : arr2[x].length;
                    for (var y = 0; y < maxCharLen; y++) {
                        if (arr1[x].charAt(y) == ' ') {
                            $('#divColLeft').append('<span  class="missing">' + arr2[x].charAt(y) + '</span>');

                            $('#divColRight').append('<span class="missmatch">' + arr2[x].charAt(y)) + '</span>';
                        }
                        else if (arr2[x].charAt(y) == ' ') {
                            $('#divColLeft').append('<span class="missing">' + arr1[x].charAt(y) + '</span>');

                            $('#divColRight').append('<span class="missmatch">' + arr1[x].charAt(y)) + '</span>';
                        } else if (arr1[x].charAt(y) == arr2[x].charAt(y)) {
                            $('#divColLeft,#divColRight').append(arr1[x].charAt(y));
                        }
                        else {
                            $('#divColLeft').append('<span  class="missmatch">' + arr1[x].charAt(y) + '</span>');
                            $('#divColRight').append('<span  class="missing">' + arr2[x].charAt(y) + '</span>');
                        }
                    }
                    $('#divColLeft').append(' ');
                    $('#divColRight').append(' ');
                }

                if (minArrLen < arr1.length) {
                    for (var Len = minArrLen; Len < arr1.length; Len++) {
                        $('#divColLeft').append(arr1[Len])
                                        .append(' ');
                    }
                } else if (minArrLen < arr2.length) {
                    for (var Len = minArrLen; Len < arr2.length; Len++) {
                        $('#divColRight').append(arr2[Len])
                                        .append(' ');
                    }
                }
            }
        }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T18:37:32.503

```
$(document).ready(function () {

  $('#btnCompare').on('click', function () {
      compare();
  });

  function compareText(textOne, textTwo)
  {
      var len = Math.min(textOne.length, textTwo.length);
      for (var i=0;i<len; i++)
      {
          if (textOne.charAt(i) == textTwo.charAt(i)) continue;

          return i;      // this character is different
      }

      if (textOne.length == textTwo.length) return -1;    // same

      return i;
  }

  function compare() {
      $('#divColLeft').empty();
      $('#divColRight').empty();
      var textOne = $('#taOneComp').val();
      var textTwo = $('#taTwoComp').val();

      var diffIndex = compareText(textOne, textTwo);
      if (diffIndex == -1)
      {
          // TODO: tell user they are identical
          $('#divColLeft').html('Identical');

      } else {

          // if textTwo has more characters, 
          // add a dummy character for highlighting to textOne

          if (diffIndex >= (textOne.length)) textOne += '_';

          var char = textOne.charAt(diffIndex);

          // highlight differing character

          var tmpLeft = textOne.substring(0, diffIndex);
          tmpLeft += "<span style='background-color:yellow;font-weight:bold'>" + char + "</span>";
          tmpLeft += textOne.substring(diffIndex+1);

          $('#divColLeft').html(tmpLeft);
      }
  }
}); 
```

# php - CakePHP 带有 json 的搜索功能

> ID：15706831
> 
> 赞同：1
> 
> 时间：2013-03-29T16:02:26.733
> 
> 标签：php, mysql, cakephp

我刚刚开始使用 CakePHP 并遇到了一些问题。我有这个搜索功能，用于在 mysql 数据库（艺术家和 ArtistSurname）中搜索两个表，如下所示：

```
class ArtistsController extends AppController {
public function search ($search) {
    if ($search){
    $artists = $this->Artist->find('all', array('conditions' => array("surname like '%$search%' AND Artist.id = ArtistSurname.artist_id OR firstname like '%$search%' AND Artist.id = ArtistSurname.artist_id"), 'limit' => 400, 'fields' => array('Artist.firstname', 'ArtistSurname.surname', 'Artist.dbirth', 'Artist.id')));
    if (!$artists){
        throw new NotFoundException(__('No search result.'));
    }
    $result = array();
    foreach ($artists as $artist) {
    $fetchedArtist = array('value' => $artist['ArtistSurname']['surname'] . " " . $artist['Artist']['firstname'], 'year' => $artist['Artist']['dbirth'], 'id' => $artist['Artist']['id']);
    array_push($result, $fetchedArtist);
    }
    header("Content-Type: application/json");
    echo json_encode($result);
    $this->autoRender = false;
    }
} 
```

查询后，我将结果放入我的自动完成（typeahead.js）的新可读数组中，并将其作为 json 回显。只要查询找到名字就可以正常工作，但如果查询仅找到姓氏则不行。奇怪的是，我只有在找到名字时才从我的 GET 请求中收到 application/json，否则我会在 text/html 中得到正确的结果。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:27:51.457

您正在使用一个单独的表来存储姓氏，并且基本上`INNER JOIN`通过指定`Artist.id = ArtistSurname.artist_id`作为条件的一部分来构造一个（两次）。

此外，您以错误的方式定义条件；您应该为每个条件/字段使用“数组”表示法，以便 CakePHP 可以正确地为您转义值；

```
$artists = $this->Artist->find('all', array(
    'conditions' => array(
         'OR' => array(   
             'ArtistSurname.surname LIKE' => '%' . $search . '%',
             'Artist.firstname LIKE' =>  '%' . $search . '%',
         )
    ),
    joins => array(
        array(
          'table' => 'artist_surnames',
          'alias' => 'ArtistSurname',
          'type' => 'LEFT',
          'conditions' => array(
              'Artist.id = ArtistSurname.artist_id',
          )
       ),
    ),
    'limit' => 400, 
    'fields' => array(
        'Artist.firstname', 
        'ArtistSurname.surname',
        'Artist.dbirth',
        'Artist.id'
     )
)); 
```

我将 ArtistSurname <-> Artist 关系转换为“LEFT”连接，这样如果没有找到“姓氏”，也将返回结果。

通常，您不必在查询中手动指定这些关系，而是在模型关系中指定它们（ArtistSurname->belongsTo->Artist）：

[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#associations-linking-models-together](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#associations-linking-models-together)

但是，我试图尽可能接近您的原始功能。

**你为什么**要为艺术家的姓氏使用单独的模型？我想不出有什么理由让这件事变得如此复杂？

# sql-order-by - T-SQL为什么除以零不会在order by子句中产生错误

> ID：15706833
> 
> 赞同：2
> 
> 时间：2013-03-29T16:02:40.837
> 
> 标签：sql-order-by, sql-server-2012, divide-by-zero

我在一个程序中发现了一些我最初认为不正确的语句，但在测试它们之后，我确信它们工作正常。我无法理解的是方式。

我有一个包含记录*id*、*pts*和*ptsOf*列的简单表：

```
DECLARE @DataSource TABLE
(
     RecordID TINYINT
    ,Pts   INT
    ,PtsOf INT
)

INSERT INTO @DataSource
VALUES (1,5,5)
      ,(1,7,8)
      ,(1,3,5)
      ,(2,5,0) 
```

我需要的是使用以下公式计算每条记录的总分：

```
SUM(pts)/SUM(ptsOf) * 100 
```

因此，上面的语句将产生以下错误，因为对于最后一条记录，我将有*5/0*：

> 消息 8134，级别 16，状态 1，第 21 行遇到除以零错误。

*但是我发现的语句仅在select*子句中检查除以零，而在*order by*子句中没有：

```
 SELECT  RecordID
         ,CAST(CAST(SUM(Pts) AS decimal) / CASE SUM(PtsOf) WHEN 0 THEN NULL ELSE SUM(PtsOf) END * 100 AS decimal(18, 0))
 FROM @DataSource
 GROUP BY RecordID
 ORDER BY RecordID,  CAST(CAST(SUM(Pts) AS decimal) / SUM(PtsOf) * 100 AS decimal(18, 0)) ASC 
```

为什么*按类别顺序*计算不会产生错误？

下面是完整的例子：

```
SET NOCOUNT ON
GO

    DECLARE @DataSource TABLE
    (
         RecordID TINYINT
        ,Pts   INT
        ,PtsOf INT
    )

    INSERT INTO @DataSource
    VALUES (1,5,5)
          ,(1,7,8)
          ,(1,3,5)
          ,(2,5,0)

     SELECT  RecordID
             ,CAST(CAST(SUM(Pts) AS decimal) / CASE SUM(PtsOf) WHEN 0 THEN NULL ELSE SUM(PtsOf) END * 100 AS decimal(18, 0))
     FROM @DataSource
     GROUP BY RecordID
     ORDER BY RecordID,  CAST(CAST(SUM(Pts) AS decimal) / SUM(PtsOf) * 100 AS decimal(18, 0)) ASC

SET NOCOUNT OFF
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:11:22.323

我相信`ORDER BY`在这种特殊情况下，只是忽略了中的第二个子句。毕竟，如果你这样做：

```
DECLARE @t TABLE(i INT PRIMARY KEY, x UNIQUEIDENTIFIER);

INSERT @t VALUES(1,NEWID()),(2,NEWID()),(3,NEWID()),(4,NEWID());

SELECT i, x FROM @t ORDER BY i, x; 
```

`x`是不考虑中的`ORDER BY`，又何必呢？子句中的第一个实体`ORDER BY`已经规定了顺序，第二个子句不能改变它。由于您按 分组`RecordID`，SQL Server 足够聪明，可以意识到 中的第一个元素`ORDER BY`是唯一的，因此不需要考虑第二个。我无法证明这一点，并且当第二个元素实际上对 SQL Server 更清楚时，我可以通过使用常量使其失败，例如：

```
ORDER BY RecordID, CONVERT(1/0); 
```

但是，当 SQL Server 不容易知道列的输出，并且无论如何它不能对输出做任何有用的事情时，它会做正确的事情（恕我直言）并丢弃表达式而不完全评估它并导致运行时错误。如果您不首先按保证唯一的列排序，您也可以返回错误：

```
ORDER BY CAST(CAST(SUM(Pts) AS decimal) / SUM(PtsOf) * 100 AS decimal(18, 0)); 
```

# css - 修改h1字体大小

> ID：15706834
> 
> 赞同：0
> 
> 时间：2013-03-29T16:02:41.393
> 
> 标签：css, typography

我很困惑为什么这两个 h1 标签有不同的字体大小，显然它们包含相同的属性/声明。就我所掌握的一点点知识，我觉得和继承有关；看看一个 h1 标签是如何嵌套的，而另一个不是。
HTML：

```
 <div id="site-offline-container">
        <div id="site-offline-heading">
            <h1>Hello World</h1>
        </div>
    </div>

   <h1 class="hello">Hello World</h1> 
```

CSS：

```
body {
  background:#fff;
  font-family:Trebuchet MS, Arial, Tahoma, sans-serif;
  font-size:14px; letter-spacing:1px; color:#000;
}
#site-offline-heading {
  font-size: 40px;
  letter-spacing:-5px;
  color:#000;
  text-shadow: rgba(255,255,255,0.2) 1px 1px;
}
#site-offline-heading h1 {
  margin-bottom:10px;
}
.hello {
  font-size: 40px;
  letter-spacing:-5px;
  color:#000;
  text-shadow: rgba(255,255,255,0.2) 1px 1px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:06:39.617

`#site-offline-heading h1`告诉 css 为元素内的所有 h1 标题设置样式，id 为 site-offline-heading

您的另一个 h1 在此元素之外，因此使用 h1 的默认样式，如果您想对所有 h1 标签应用相同的样式，请使用：`h1{/*styling*/}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:12:14.433

在第一种情况下，您在包含 h1 的元素上设置字体大小，在第二种情况下直接在 h1 元素上设置字体大小。这会有所不同，因为在第一种情况下，h1 采用其默认字体大小 200%，即其容器（父级）字体大小的两倍。

# php - CURL 请求下载结果

> ID：15706838
> 
> 赞同：0
> 
> 时间：2013-03-29T16:03:03.360
> 
> 标签：php, asp.net, .net

我需要使用 for 循环从网站下载结果来编译它们。

[这是一个示例链接](http://sanskritischool.com/ProgramFiles/ProgressReport/Report/2012-2013/REPORTCARD_XI_XIII.aspx?ClassId=334&TermId=95&StudentId=100&SelectValue=1%20&strTerm=SECOND%20TERM&SelectType=Academic%20&ClassName=XI%28A%29)

（请注意，这是一个 ASP 请求，它显示带有这些参数的网页）

我用 CURL 请求编写了以下代码来获取这个（我需要提交表单）：

```
<?php
for ($i=10; $i<500; $i++) {
$m = $i*10;
$url = 'http://sanskritischool.com/ProgramFiles/ProgressReport/Report/2012-2013/REPORTCARD_XI_XIII.aspx?';
$fields = array(
                    'ClassId' => 334,
                    'TermId' => 95,
                    'StudentId' => $m,
                    'SelectValue' => 1,
                    'strTerm' => urlencode('SECOND TERM'),
                    'SelectType' => urlencode('Academic '),
                    'ClassName' => urlencode('XI(A)')
                );

//url-ify the data for POST

foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

echo $fields_string;

//CURL POST

$ch = curl_init();
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

$result = curl_exec($ch);
curl_close($ch);

//Reset string

$fields_string='';
}
?> 
```

虽然循环运行，但它返回所有错误 ( `Object reference not set to an instance of an object`)

报错截图：http: [//imm.io/11by4](http://imm.io/11by4)

如何成功运行此循环并获得结果？

对不起，如果我问一个幼稚的问题，我只有 16 岁，而且我是 PHP 新手。如果您能提供帮助，我会很高兴！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:35:42.093

您构建查询字符串，但不将其附加到`$url`. 您应该执行以下操作：

```
$url = $url.$fields_string; 
```

# java - 使用 for 循环加速定义变量 Java Android

> ID：15706841
> 
> 赞同：3
> 
> 时间：2013-03-29T16:03:06.720
> 
> 标签：java, android, loops

我知道您不能使用 for 循环来创建具有数字模式名称的多个变量，但是有什么方法可以使用某种循环来简化以下代码行？否则它是一个非常长的文件，它做的很少，我不喜欢这样！这是我的代码的缩短版本。

```
public DrawGrid(Context context, int[] binary) {...
sq00c = binary[0];  
sq01c = binary[1];  
sq02c = binary[2]; ...etc}

Rect sq00 = new Rect(); Paint sq00p = new Paint();  int sq00c;  
Rect sq01 = new Rect(); Paint sq01p = new Paint();  int sq01c;  
Rect sq02 = new Rect(); Paint sq02p = new Paint();  int sq02c; ...ect

protected void onDraw(Canvas canvas) {...
sq00.set(2*sqsize, line0, 3*sqsize, line0+sqsize);  sq00p.setColor(sq00c);  sq00p.setStyle(Paint.Style.FILL);   canvas.drawRect(sq00, sq00p);       
sq01.set(3*sqsize, line0, 4*sqsize, line0+sqsize);  sq01p.setColor(sq01c);  sq01p.setStyle(Paint.Style.FILL);   canvas.drawRect(sq01, sq01p);
sq02.set(4*sqsize, line0, 5*sqsize, line0+sqsize);  sq02p.setColor(sq02c);  sq02p.setStyle(Paint.Style.FILL);   canvas.drawRect(sq02, sq02p);
...etc} 
```

上述代码的三个部分中的每一个都出现 64 次。有没有办法用循环来简化它？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:26:27.870

试试这个方法：

```
private int[] myInt;
private Rect[] myRect;
private Paint[] myPaint;

public DrawGrid(Context context, int[] binary) {
    myInt = binary;
    myRect = new Rect[myInt.length];
    myPaint = new Paint[myInt.length];

    for (int i = 0; i < myInt.length; i++) {
        //Put Rect parameters here, you have to take advantage of the "i" variable 
        myRect[i] = new Rect();

        myPaint[i] = new Paint();
        myPaint[i].setColor(myInt[i]);
        myPaint[i].setStyle(Paint.Style.FILL);
    }
}

protected void onDraw(Canvas canvas) {
    for (int i = 0; i < myRect.length; i++) { // < not >
        canvas.drawRect(myRect[i], myPaint[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:09:05.413

保留一个 Rects、Paints 和 int 数组（或者，更好的是，将它们全部放在一个漂亮的封装对象中并保留一个数组）并在循环中初始化它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:11:54.413

例如，试试这个：

```
Rect[] rects=new Rect[SIZE]; 
```

并查看此[链接](https://stackoverflow.com/questions/9132049/how-do-you-declare-an-object-array-in-java)

# javascript - 分析——head.js如何实现并行资源的序列化？

> ID：15706844
> 
> 赞同：1
> 
> 时间：2013-03-29T16:03:11.783
> 
> 标签：javascript, head.js

从网站 ->[这里](http://headjs.com)

```
// load files in parallel but execute them in sequence
head.js("file1.js", "file2.js", ... "fileN.js"); 
```

这是如何实施的？我正在查看 load.js ->[这里](https://github.com/headjs/headjs/blob/master/src/load.js)

但似乎无法找到实现这一点的来源。

Looks like`api.load`是一个别名，`api.js`并被定义了两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T12:33:12.087

如果导航器与异步兼容，那么导航器将确保脚本的排序和执行，因为它们只是按照请求的顺序附加（ie10、ff、chrome）

否则，会使用一种 hack（文本/缓存 hack），它会使用虚假的 mime/类型注入脚本，一旦它们全部加载（回调触发器），就会使用正确的 mime/类型重新注入它们（但由于 url浏览器已经知道内容不会重新获取）因此触发浏览器的真正执行/解释，但这次是按顺序（ie6-ie9）

# jsp - 在 Struts2 中预填充复选框列表

> ID：15706846
> 
> 赞同：0
> 
> 时间：2013-03-29T16:03:15.540
> 
> 标签：jsp, struts2, checkboxlist

我正在尝试创建一个 jsp[populate.jsp] 页面，当我点击该页面时，应该调用 Action 并从数据库中获取数据，然后使用复选框列表将其填充到同一个 JSP 页面中。我试着搜索了很多，我也找到[了这个](http://www.mkyong.com/struts2/struts-2-scheckboxlist-multiple-check-boxes-example/)教程：

这很有帮助，但在本教程中，他们首先调用 url `localhost:8080/checkBoxListAction`。但是，我希望我的 JSP`checkboxlist`在我点击`localhost:8080/populate.jsp`.

我希望你能理解我的问题。如果您有任何疑问，请发表评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:57:30.847

经过一段时间的搜索，我自己找到了解决方案。我使用了 s:action 标签，你可以在 jsp 中声明它，并直接调用你在 action 的 name 属性（s:action name="SomeAction"）中指定的 Action，然后你可以将这个 action 的结果渲染到同一个 jsp .

# jquery - 在 jquery.fancybox 中包含 jquery.booklet - 滚动问题

> ID：15706847
> 
> 赞同：1
> 
> 时间：2013-03-29T16:03:17.973
> 
> 标签：jquery, scroll, fancybox

我在创建的网站上遇到问题。

我想让用户可以点击一个按钮并打开一个 jquery.fancybox。到目前为止，一切都很好。但是，我想在那个花式框中有一个 jquery.booklet。以下是网站的链接： [Booklet](http://builtbywill.com/code/booklet/) [Fancybox](http://fancybox.net/)

我几乎达到了我的目标，但是我有一个无论我尝试什么都无法解决的最后一个问题：fancybox 不会超出小册子的大小。无论我尝试过什么，我总是从花哨的盒子里拿出一点小册子，我需要向下滚动才能看到它。

这是我将“cat2.php”的内容放入fancybox的代码：

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<script type="text/javascript" src="javascript/fancybox/lib/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="javascript/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>
<script type="text/javascript" src="javascript/fancybox/source/jquery.fancybox.js?v=2.1.4"></script>
<link rel="stylesheet" type="text/css" href="javascript/fancybox/source/jquery.fancybox.css?v=2.1.4" media="screen" />
<link rel="stylesheet" type="text/css" href="javascript/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5" />
<script type="text/javascript" src="javascript/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<link rel="stylesheet" type="text/css" href="javascript/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.7" />
<script type="text/javascript" src="javascript/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script type="text/javascript" src="javascript/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.5"></script>

    <script type="text/javascript">     
            $(document).ready(function() {
            $('.fancybox').fancybox({
            'width':'100%',
            'height':'100%',
            'padding':0
            });
        });
</script>

<center>
     <a class="fancybox fancybox.iframe" id="test" href="catalogue_je/cat2.php"><img src="images/design/Cliquez_ici.jpg" /></a>
</center> 
```

这是 cat2.php 中的代码（仅是一个示例）：

```
 <!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <link rel="icon" type="image/png" href="/images/design/favicon.png" />
        <title>Catalogue en ligne</title>
        <script src="booklet/jquery-1.7.2.min.js" type="text/javascript"></script>
        <script src="booklet/jquery-ui-1.8.21.min.js" type="text/javascript"></script>
        <script src="booklet/jquery.easing.1.3.js" type="text/javascript"></script>
        <script src="booklet/jquery.booklet.1.4.0.js" type="text/javascript"></script>
        <!--<link rel="stylesheet" href="style_catalogue.css" />-->
        <link href="booklet/jquery.booklet.1.4.0.css" type="text/css" rel="stylesheet" media="screen, projection, tv" />

        <script>

$(function() { 

 //single book 

 $('#mybook').booklet({
    'height':'100%'

 }); 

//multiple books with ID's 

 $('#mybook1, #mybook2').booklet(); 

//multiple books with a class 

$('.mycustombooks').booklet(); 

}); 

        </script>

    </head>
    <body>

<div id="mybook"> 
    <div>  
        <h3>Yay, Page 1!</h3> 
    </div> 
    <div>  
        <h3>Yay, Page 2!</h3> 
    </div> 
    <div>  
        <h3>Yay, Page 3!</h3> 
    </div> 
    <div>  
        <h3>Yay, Page 4!</h3> 
    </div> 
</div> 

    </body>
</html> 
```

如果你们中的任何人对如何解决我的问题有任何想法，我会很乐意接受帮助。

提前致谢，

问候。

# machine-learning - 在 Mahout 中结合 UserSimilarity 和 ItemSimilarity 进行推荐

> ID：15706848
> 
> 赞同：3
> 
> 时间：2013-03-29T16:03:37.323
> 
> 标签：machine-learning, mahout, recommendation-engine

我设置了两个独立的 Mahout 推荐器，一个基于用户相似性提供推荐，一个基于项目相似性提供推荐。我真正想要的是一个推荐器，它的推荐基于两个维度，而不仅仅是一个维度。

通过文档，我找不到任何考虑到多个维度的 Recommender 实现。我可以通过从 UserSimilarity 推荐集和 ItemSimilarity 推荐集中获取集合交集来自己实现一个基本版本，但这绝对不是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:33:24.973

不，它在项目中不存在。我认为您可以通过一些工作将其拼凑起来。它最终将基于加权平均值，其中权重是用户-用户和项目-项目相似性或其他东西的乘积。您可能会发现这在运行时计算太慢了，或者，如果您想要一个更“整体”的模型，您可能会发现潜在因子模型更有趣。但我还没有尝试过。

# jquery - 如何使用对数制作条形评级系统

> ID：15706849
> 
> 赞同：0
> 
> 时间：2013-03-29T16:03:37.680
> 
> 标签：jquery, css, rating, voting, voting-system

我想为我的网站制作一个酒吧评级系统，这就是我实际拥有的：

![在此处输入图像描述](../Images/ba96ce882916830f9af7a4ae764cbccf.png)

这看起来一点也不好看：p。我希望高度像指数曲线一样逐渐增加。刚开始不会太陡，之后会逐渐增加。

使用：

```
height = (Math.ceil( Math.log(i) * 10) / 10 ) + settings.height 
```

其中**i**是从 0 -> 19（条数）的 for 循环变量，settings.height 是 15 的基本高度。我应该怎么做才能纠正它？

编辑：像这样，但颠倒 ![在此处输入图像描述](../Images/8696a26d6da31fb3af4d42c0da933e35.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:50:39.250

以下内容基于 David Fregoli 的初始评论，我对其进行了扩展以获得所需的形状和正确的方向。看到这个[小提琴](http://jsfiddle.net/m3L3k/3/)（无意窃取他的答案，所以请随意接受他的）

![结果](../Images/c0a550519d969a5483bbf0e261ac0ca9.png)

**CSS**

```
#container {
    position: relative;
    height: 150px;
}

bar {
    position: relative;
    width: 20px;
    border: 1px solid #aaf;
    background-color: #ddf;
    margin-right: 1px;
    float: left;
    cursor: pointer;
} 
```

**JS**

```
var baseheight = 5;
for ( var i = 0; i < 10; i++ ) {
    var h = 5*Math.pow(2,i/2) + baseheight;
    var offset = Math.ceil(150-h);
    $('#container').append($('<bar>').css('height', h).css('top', offset));
} 
```

# ios - 我在 xcode 中添加了本地化，将其删除，现在我的故事板不见了

> ID：15706851
> 
> 赞同：6
> 
> 时间：2013-03-29T16:03:43.917
> 
> 标签：ios, xcode, localization, internationalization, storyboard

所以我想尝试本地化我的应用程序。我的项目文件夹中有一个 Storyboard.storyboard。

1.  我检查了“使用基本国际化”复选框，然后 xcode 对我的文件做了一些事情。
2.  我继续添加第二个本地化
3.  Xcode 告诉我它无法创建一些 .plist，因为它已经存在。
4.  我最终得到了两个故事板（“基础”和“英语”组合在一起），这很奇怪，因为文档清楚地表明我只需要处理一组故事板（使用基本国际化时）而其他语言会是字符串文件：

    > 基本国际化是 Xcode 4.5 中引入的一项功能，它使本地化人员（即翻译人员）无需为应用程序支持的每种语言修改故事板和 nib 文件。相反，一个应用程序只有一组故事板或 nib 文件，这些文件已本地化为默认语言；这些故事板和 nib 被称为基础国际化。当您将本地化添加到应用程序时，Xcode 会为每个故事板或 nib 文件显示或包含的所有文本生成一个字符串文件，作为可访问性标签或提示。Xcode 为文件提供故事板的名称和扩展字符串。因此，如果您有一个名为 MyStoryboard.storyboard 的故事板，则生成的字符串文件名为 MyStoryboard.strings。

5.  我删除了我新创建的本地化（英语），因为这不是我所期望的
6.  现在所有的故事板都消失了，即使我只删除了一个本地化

我的垃圾箱里现在有两个故事板（一个“storyboard.storyboard”和一个命名为故事板的*一些数字*.storyboard），但我不知道1）我应该使用哪一个，2）它应该在某种既然我检查了“基本国际化”选项，现在是子文件夹吗？.plists 呢？我阅读了[此页面](https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/InternationalizeYourApp/InternationalizeYourApp/InternationalizeYourApp.html)上的内容，但它在告诉我点击哪里比告诉我不同​​文件的目的做得更好，所以我不知道如何正确地扭转这一点

**更新：**

现在，当我重新启动 xcode 时，它​​看起来像这样： ![两个基础本地化，这是什么意思？](../Images/82439e34333e1032445978af78c2a44b.png)

我不知道从这里去哪里......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T18:24:33.863

对于垃圾箱中的故事板，我会尝试将它们都打开并查看哪个是正确的。对于使用 .strings 文件而不是必须本地化整个情节提要，在使用基本国际化时，您可以选择。您可以通过更改本地化下的选项来更改它（当您打开情节提要时，它位于左窗格下方） ![在此处输入图像描述](../Images/2f448780f8273a41ab78da489e60f887.png)

将选项从界面生成器更改为可本地化的字符串，您不必使用情节提要。不同之处在于界面构建器之一，您必须像编辑任何其他情节提要一样编辑所有标签和任何要本地化的内容，这可能很乏味。字符串文件通过基本上为您提供整个故事板中所有文本的列表并让您通过翻译文本来更改他们所说的内容，而不必编辑整个故事板文件，从而使操作变得容易。

# javascript - 上下文阴影画布 HTML5/Javascript 时如何提高性能？

> ID：15706856
> 
> 赞同：1
> 
> 时间：2013-03-29T16:03:58.470
> 
> 标签：javascript, html5-canvas

我使用 Javascript 编写了一个 Windows 8 游戏 Metro 风格。`gameContext`当我使用阴影或透明设置时，我遇到了一个问题，导致游戏太慢。

```
ctx.shadowColor="black";
ctx.shadowBlur = 10; 

ctx.globalCompositeOperation = "lighter";
ctx.globalAlpha = 0.3; 
```

如何提高游戏的性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:49:54.823

嗯……</p>

不要使用阴影，因为它们是**性能的敌人：http:** [//www.html5rocks.com/en/tutorials/canvas/performance/](http://www.html5rocks.com/en/tutorials/canvas/performance/)

但是，您可以在不使用阴影的情况下获得阴影效果！

您可以通过将对象保存为缓存图像来**显着**加快绘图速度。下面是使用阴影绘制与绘制缓存图像的比较。使用缓存图像绘图比使用阴影绘图**快数百倍。**

![在此处输入图像描述](../Images/e19b2097b75e3a124557b224204f5e98.png)

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/7YcaC/](http://jsfiddle.net/m1erickson/7YcaC/)

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body { margin: 0px; padding: 20px; }
      canvas { border: 1px solid red; margin:10px; }
    </style>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
  </head>
  <body>
    <p id="shadow">Redraw using shadows</p>
    <canvas id="myCanvas1" width="220" height="120"></canvas><br/>
    <p id="cache">Redraw using a cached image</p>
    <canvas id="myCanvas2" width="220" height="120"></canvas>
    <script>
      var canvas1 = document.getElementById('myCanvas1');
      var context1 = canvas1.getContext('2d');
      var canvas2 = document.getElementById('myCanvas2');
      var context2 = canvas2.getContext('2d');

      // create a cache image of the shadowed rectangle
      draw1();
      var image=new Image();
      image.src=canvas1.toDataURL();

      var t1=new Date().getTime();
      console.log(t1);
      for(var i=0;i<100;i++){ draw1(); }
      var t2=new Date().getTime();
      console.log(t2);
      for(var i=0;i<100;i++){ draw2(); }
      var t3=new Date().getTime();    
      console.log(t3);
      alert((t2-t1)+"/"+(t3-t2));
      $("#shadow").text("Redraw using shadows took "+(t2-t1)+" ms");
      $("#cache").text("Redraw using cached image took "+(t3-t2)+" ms");

      function draw1(){
          context1.clearRect(0,0,220,120);
          canvas1.width=220;
          canvas1.height=120;
          context1.rect(10, 10, 200, 100);
          context1.fillStyle = 'red';
          context1.shadowColor = 'black';
          context1.shadowBlur = 10;
          context1.shadowOffsetX = 5;
          context1.shadowOffsetY = 5;
          context1.fill();
      }

      function draw2(){
          context2.clearRect(0,0,220,120);
          context2.drawImage(image,0,0);
      }

    </script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:50:51.020

我不确定，但这有时会有所帮助，将其添加到您的 css

```
canvas
{
    -webkit-transform3d: translate(0,0,0);
    -moz-transform3d: translate(0,0,0);
    transform3d: translate(0,0,0);
} 
```

这实际上是强制浏览器使用 GPU 来渲染画布。从而提高性能。不幸的是，此修复仅适用于支持 3d 转换的浏览器。

# plot - Maxima 中的多个绘图

> ID：15706857
> 
> 赞同：3
> 
> 时间：2013-03-29T16:03:59.230
> 
> 标签：plot, maxima

我正在用 Maxima 编写代码，我有三个图。我可以轻松地单独绘制这些图，但我无法弄清楚如何将它们全部放在一个图上，而不是在一个 for 循环中进行，如果不涉及太多细节，这对我的代码来说会很困难。

```
 for i:1 step 1 while i<=n-1 do(figgdown[i]:plot2d(
    [discrete,[xx[i], -xx[i]],[p[i],p[i]]]));
    for i:1 step 1 while i<=n-1 do(figgup[i]:plot2d(
    [discrete,[xx[i], -xx[i]],[q[i], q[i]]]));
    for i:1 step 1 while i<=n-1 do(figgmiddle[i]:plot2d(
    [discrete,[xx[i], -xx[i]],[pq[i], pq[i]]])); 
```

有没有办法我可以在 Mathematica 中执行类似于 Show 函数的操作，其中图形一起出现？最好的，本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:57:13.577

你可以保留一份清单

```
n: 10;
x: makelist(2*%pi*i/n, i, 0, n);

p: [];
y1: sin(x);
p: endcons([discrete, x, y1], p);

y2: cos(x);
p: endcons([discrete, x, y2], p);

/* display all plots in p */
plot2d(p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-26T18:38:45.850

狭缝维诺夫的答案很棒，但还有另一种选择。

还可以使用[draw 中的多个绘图选项](https://maxima.sourceforge.io/docs/manual/maxima_218.html#gr2d)。然后你有一个带有几个子图的图像（情节），每个场景都有自己的轴和标题：

绘制（场景 1，场景 2，场景 3）

这是[一个带有代码的示例](https://commons.wikimedia.org/wiki/File:N-th_arm_stars.svg)

[![在此处输入图像描述](../Images/53b308b9d2bc387fecd2acad8f29691b.png)](https://i.stack.imgur.com/rBFmp.png)

# ios - UICollectionView 的选择

> ID：15706864
> 
> 赞同：1
> 
> 时间：2013-03-29T16:04:15.067
> 
> 标签：ios, objective-c, uicollectionview

我正在关注教程并进行溢出`UICollectionView`。现在，此外，我想对这些项目进行选择，然后再出现一个新的`UIViewController`.

我可以知道怎么做吗？我可以像`UITable`选择选择索引 = 0、1 或 2 等一样吗？代码显示正确`NSLog`但不会去其他`UIViewController`

```
 - (void)tapCell:(UITapGestureRecognizer *)inGestureRecognizer
{
    NSIndexPath *theIndexPath = [self.collectionView indexPathForCell:(UICollectionViewCell *)inGestureRecognizer.view];

    if (theIndexPath.row ==0) {
        NSLog(@"****");
        page *noteDetailViewControler = [[page alloc] initWithNibName:@"page" bundle:nil];    }
} 
```

这是完整的代码：

```
@implementation CDemoCollectionViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.cellCount = 10;
    self.imageCache = [[NSCache alloc] init];

    [self.collectionView registerNib:[UINib nibWithNibName:NSStringFromClass([CCoverflowTitleView class]) bundle:NULL] forSupplementaryViewOfKind:@"title" withReuseIdentifier:@"title"];

    NSMutableArray *theAssets = [NSMutableArray array];
    NSURL *theURL = [[[NSBundle mainBundle] resourceURL] URLByAppendingPathComponent:@"Images"];
    NSEnumerator *theEnumerator = [[NSFileManager defaultManager] enumeratorAtURL:theURL includingPropertiesForKeys:NULL options:NSDirectoryEnumerationSkipsPackageDescendants | NSDirectoryEnumerationSkipsHiddenFiles errorHandler:NULL];
    for (theURL in theEnumerator)
    {
        if ([[theURL pathExtension] isEqualToString:@"jpg"])
        {
            [theAssets addObject:theURL];
        }
    }
    self.assets = theAssets;
    self.cellCount = self.assets.count;
}

#pragma mark -

- (void)updateTitle
{
    // Asking a collection view for indexPathForItem inside a scrollViewDidScroll: callback seems unreliable.
    //  NSIndexPath *theIndexPath = [self.collectionView indexPathForItemAtPoint:(CGPoint){ CGRectGetMidX(self.collectionView.frame) + self.collectionView.contentOffset.x, CGRectGetMidY(self.collectionView.frame) }];
    NSIndexPath *theIndexPath = ((CCoverflowCollectionViewLayout *)self.collectionView.collectionViewLayout).currentIndexPath;
    if (theIndexPath == NULL)
    {
        self.titleView.titleLabel.text = NULL;
    }
    else
    {
        NSURL *theURL = [self.assets objectAtIndex:theIndexPath.row];

        self.titleView.titleLabel.text = [NSString stringWithFormat:@"%@", theURL.lastPathComponent];
    }
}

#pragma mark -

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section;
{
    return(self.cellCount);
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath;
{
    CDemoCollectionViewCell *theCell = [self.collectionView dequeueReusableCellWithReuseIdentifier:@"DEMO_CELL" forIndexPath:indexPath];

    if (theCell.gestureRecognizers.count == 0)
    {
        [theCell addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapCell:)]];
    }

    theCell.backgroundColor = [UIColor colorWithHue:(float)indexPath.row / (float)self.cellCount saturation:0.333 brightness:1.0 alpha:1.0];

    if (indexPath.row < self.assets.count)
    {
        NSURL *theURL = [self.assets objectAtIndex:indexPath.row];
        UIImage *theImage = [self.imageCache objectForKey:theURL];
        if (theImage == NULL)
        {
            theImage = [UIImage imageWithContentsOfFile:theURL.path];

            [self.imageCache setObject:theImage forKey:theURL];
        }

        theCell.imageView.image = theImage;
        theCell.reflectionImageView.image = theImage;
        theCell.backgroundColor = [UIColor clearColor];
    }

    return(theCell);
}

- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath
{
    CCoverflowTitleView *theView = [self.collectionView dequeueReusableSupplementaryViewOfKind:kind withReuseIdentifier:@"title" forIndexPath:indexPath];
    self.titleView = theView;
    [self updateTitle];
    return(theView);
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [self updateTitle];
}

#pragma mark -

- (void)tapCell:(UITapGestureRecognizer *)inGestureRecognizer
{
    NSIndexPath *theIndexPath = [self.collectionView indexPathForCell:(UICollectionViewCell *)inGestureRecognizer.view];

    if (theIndexPath.row ==0) {
        NSLog(@"****");
        page *noteDetailViewControler = [[page alloc] initWithNibName:@"page" bundle:nil];    }
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T16:12:45.043

尝试使用以下 UICollectionViewDelegate 函数：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath; 
```

如果你得到选择，你可以使用下面的函数来处理它：

```
- (void)selectItemAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated scrollPosition:(UICollectionViewScrollPosition)scrollPosition;
- (void)deselectItemAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated; 
```

# haskell - 按字母顺序对元组进行排序

> ID：15706867
> 
> 赞同：2
> 
> 时间：2013-03-29T16:04:28.240
> 
> 标签：haskell

我有一个元组列表，每个元组都包含一个数字和一个字符串，目前我正在按其中包含的数字对它们进行排序，但是我想知道是否有办法按字母顺序对它们进行排序，以防多个元组中的数字是平等的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T16:09:12.207

元组的`Ord`实例已经这样工作了（首先比较第一个项目，如果相等则比较下一个，等等），所以你可以简单地使用`sort`.

```
> Data.List.sort [(3, "foo"), (1, "bar"), (2, "xyzzy"), (2, "baz")] 
[(1,"bar"),(2,"baz"),(2,"xyzzy"),(3,"foo")] 
```

# python - 从不规则的 CSV 数据制作一个规则的列表——缺失的列

> ID：15706871
> 
> 赞同：1
> 
> 时间：2013-03-29T16:04:45.790
> 
> 标签：python, list, sorting

背景故事：我在一个专栏中收到了 300 多页的信息文档。使用 VBA 和 excel，我使用分隔符转置了数据（姓氏是字符串开头的唯一全部大写字母）。

所以现在我有行数据。理想情况下，我需要的列是：

名称 v1 v2 v3 v1 v2 v3 v1 v2 v3 v1 v2 v3

等等所有三胞胎。

问题出现的地方是 v1 并不总是在所有情况下。如果第一个循环中的 v1 与第二个循环中的 v1 相同，则原始数据只是跳过重新进入 v1。

例子：

`John v1 v2 v3 v1 v2 v3 v1 v2 v3`（理想的！）

`Jimm v1 v2 v3 v2 v3 v2 v3 v1 v2 v3`（不理想！）

最后，我希望 Jimm 将 John 列与法院列中的空白或 if(offense，检查法院是否满意，如果满足，则继续，如果不使用先前的法院。

幸运的是，我的 v1、v2 和 v3 在字符串的开头有一致的分隔符（v1= Court: ; v2= Offense ; v3= Sentence）。有人对如何为数据制作迭代列表有任何提示或建议吗？

样本数据：

姓名，第一个最后一个

法庭：测试信息1

进攻：测试进攻1

句子：测试句1

进攻：测试进攻2

句子：测试句子2

球场：Test Court3

进攻：测试进攻3

句子：测试句3

注：第二个循环不包括 Court，因为它与 Court1 相同。这是数据收集方式的问题。

我所需要的要么是一个插入冗余法院的列表，要么是一个包含所有列的转置列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:34:33.693

有更巧妙的方法可以做到这一点，但我尝试用最接近您理解的算法的 Python 编写它：

```
with open("crimes.txt") as fp_in, open("fixedcrimes.txt", "w") as fp_out:
    previous_court = None
    previous_line = None
    for line in fp_in:
        if line.startswith("Offense:"):
            if not previous_line.startswith("Court:"):
                fp_out.write(previous_court)
        if line.startswith("Court:"):
            previous_court = line
        fp_out.write(line)
        previous_line = line 
```

第一行创建了两个文件对象。您可以使用 循环遍历文本文件的行`for line in:`，我认为其他所有内容都应该有意义。（不要忘记缩进在 Python 中很重要。）另请注意，您的文件似乎不是标准 csv：有些行似乎使用冒号空格作为分隔符，但 NAME 行似乎使用逗号空格.

反正上面的代码应该转

```
NAME, First Last
Court: Test Info1
Offense: Test Offense1
Sentence: Test Sentence1
Offense: Test Offense2
Sentence: Test Sentence2
Court: Test Court3
Offense: Test Offense3
Sentence: Test Sentence3 
```

进入

```
NAME, First Last
Court: Test Info1
Offense: Test Offense1
Sentence: Test Sentence1
Court: Test Info1
Offense: Test Offense2
Sentence: Test Sentence2
Court: Test Court3
Offense: Test Offense3
Sentence: Test Sentence3 
```

# r - 在 R 中列出我的数据而不是我的函数的简单方法？（隐藏 ls() 中的函数？）

> ID：15706872
> 
> 赞同：0
> 
> 时间：2013-03-29T16:04:46.593
> 
> 标签：r

在一个使用 R 的长期项目中，我定义了一组大约 50 个我一直使用的函数，另外还有 10 或 15 个我偶尔使用的函数。其中大部分不是我直接使用的功能；它们是我用来定义我直接使用的辅助函数。当我从 R 数据文件加载数据对象时，我并不总是记得我为这些对象命名的内容，因此我执行`ls()`以查看我加载的内容。但是，如果我已经加载了源 doe 文件，我必须在视觉上筛选输出以细化数据对象，这显然是不方便的。

所以我将这些函数包装到一个 R 包中。如果我只是加载包，那么一切都很好。我可以使用这些功能，但`ls()`只显示数据对象。

但是，我不断添加新功能。而且我发现重新制作包并不完全是微不足道的，所以我最终还是从源文件中加载了我的函数——直到我开始重新制作包。

我当然可以比我更多地自动化包构建过程，或者将我的新功能拆分到单独的源文件中。我还可以将函数拆分为不同的包——也许这会有所帮助。我想我只能通过对我直接调用的函数的闭包来使辅助函数可用——我没有尝试过——但是如果我想这样做的话，我不能直接使用辅助函数，而且看起来像如果有更简单的方法，那就大材小用了。这就是我想知道的：是否有一个我错过的简单技巧——一种使函数可供使用的方法，但可以很容易地向我展示我拥有的数据对象而不列出函数。如果没有，好的，但我认为这值得一问。谢谢。

这些问题： [在 r 中隐藏个人函数](https://stackoverflow.com/questions/4828094/hiding-personal-functions-in-r)并 [删除除函数之外的所有变量](https://stackoverflow.com/questions/8305754/remove-all-variables-except-functions) 提供了非常有用的答案。完成上述内容的最简单方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T16:09:00.003

`lsf.str`返回命名空间中函数的向量，因此您可以使用它从`ls`.

```
setdiff(ls(), lsf.str()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T16:18:24.413

将函数放在一个包结构的文件夹中（即在一个名为 R 的子文件夹中）并使用 package:devtools。您唯一需要做的就是`load_all("myfuncs")`编辑 R 代码时。一切都重新加载到 R 中，不会弄乱您的`ls()`列表，并且如果您需要更进一步，很容易打包和记录。但这不是强制性的。刚`load_all`编辑完。

# powershell - 如何在 Powershell Write-Host 语句中调用函数

> ID：15706873
> 
> 赞同：9
> 
> 时间：2013-03-29T16:04:50.160
> 
> 标签：powershell

```
$BizTalkHelper = "d:\Scripts\BizTalkHelper.ps1"
.$BizTalkHelper # "dot source" the helper library.
Write-Host *** BEGIN ***

Write-Host $(Get-Date) " Desc:" {GetHostStateDesc 1 }
Write-Host $(Get-Date) " Desc:" GetHostStateDesc 2 

$result = GetHostStateDesc 1 
Write-Host $result 
```

我的函数打印“你好”，此外还有一个 switch 语句将 1 转换为“已停止”、2 转换为“开始挂起”、4 转换为“正在运行”等......所以我知道在前两种情况下它没有被调用.

结果：

```
*** BEGIN *** 
3/29/2013 11:03:34 AM  Desc: GetHostStateDesc 1 
3/29/2013 11:03:34 AM  Desc: GetHostStateDesc 2 
hello 
Function GetHostStateDesc  1 
Stopped 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T16:12:45.997

试试这个：

```
function SayHello {'Hello'}
write-host $(SayHello) 
```

这打印：

```
Hello 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T16:10:06.010

看起来是这样的：

```
Write-Host $(Get-Date) " Desc:" $(GetHostStateDesc 1 ) 
```

我注意到`$()`周围的语法`Get-Date`，所以如果它是一个函数，我猜它会在我的函数上工作，而且确实如此。

# java - 从一个方法多次返回？

> ID：15706877
> 
> 赞同：7
> 
> 时间：2013-03-29T16:05:01.007
> 
> 标签：java, multithreading, concurrency, return

我有一个需要一段时间才能完成的方法。我希望我的方法在返回“最终”结果之前返回“初步”结果。

我想了解是否有可能这样做：

```
public Object myMethod () {
    /*some computation here*/

     return firstResult;

     /*
     very long computation here
     */

     return finalResult;
} 
```

这甚至可能吗，或者您可以建议某种解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T16:11:34.627

您可以将长时间运行的任务放在执行程序上（它将使用线程池异步执行任务）并返回一个[Future](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)，您可以稍后使用它来获得答案。当您调用`get`未来时，它会阻塞直到任务完成，因此您可以立即使用您的初始答案，并`Future.get`在以后需要更精确时调用，给任务一些时间来完成。

返回值可能如下所示：

```
class MyMethodReturnStuff {

    private Object quickAnswer;
    private Future longAnswer;
    private long startTime = System.currentTimeMillis();

    MyMethodReturnStuff(Object quickAnswer, Future longAnswer) {
        this.quickAnswer = quickAnswer;
        this.longAnswer = longAnswer;
    }

    Object getAnswer(long expectedDelay) {
        return System.currentTimeMillis() - startTime < expectedDelay ?
        quickAnswer : longAnswer.get();
    }
} 
```

如果您预计长计算需要 5 秒，`getAnswer(5000)`如果不到 5 秒，调用将返回快速答案，否则将返回 longAnswer。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T16:08:59.203

你不能简单地使用两种不同的方法吗？

```
public class Computer {

    private String commonVar1;
    private int commonVar2;

    public Object shortComput() {
        // short comput using commonVar1 and commonVar2
        return firstResult;
    }

    public Object longComput() {
        // long comput using commonVar1 and commonVar2
        return finalResult;
    }

} 
```

调用时：

```
Computer c = new Computer();
Object firstResult = c.shortComput();
// do some short stuff with firstResult before launching:
Object finalResult = c.longComput(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T16:09:03.800

不，这是不可能的，一个函数只能返回一次。一旦它返回，后续代码将不会被执行。但是，您可以更改代码设计，改为将输出写入参数引用的数据结构/放置为类成员。例如：

```
public void longRunningFunc(List<String> output) {
  // some computation here
  output.add(..);

  // very long computation here
  output.add(..);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T16:09:41.577

是的。[`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)是要走的路。

如果您不熟悉`SwingWorker`，它基本上是一个可以让您运行长时间计算的类。他们可以在完成后给出结果，或者在此过程中发布中期结果，这基本上就是你想要做的。

来自Java 教程的[“具有临时结果的任务”](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/interim.html)部分：

> 在后台任务仍在工作时提供临时结果通常很有用。该任务可以通过调用 SwingWorker.publish 来完成。此方法接受可变数量的参数。每个参数必须是 SwingWorker 的第二个类型参数指定的类型。

例如：[_](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/concurrency/FlipperProject/src/concurrency/Flipper.java)

```
private class FlipTask extends SwingWorker<Void, FlipPair> {
    @Override
    protected Void doInBackground() {
        long heads = 0;
        long total = 0;
        Random random = new Random();
        while (!isCancelled()) {
            total++;
            if (random.nextBoolean()) {
                heads++;
            }
            // Here's your interim result, your "first return statement"
            publish(new FlipPair(heads, total));            
        }
        return null;
    }

    @Override
    protected void process(List<FlipPair> pairs) {
        FlipPair pair = pairs.get(pairs.size() - 1);
        headsText.setText(String.format("%d", pair.heads));
        totalText.setText(String.format("%d", pair.total));
        devText.setText(String.format("%.10g", 
                ((double) pair.heads)/((double) pair.total) - 0.5));
    }
} 
```

如果由于某种原因您不能使用`SwingWorker`，则需要使用异步线程来执行此操作。您可以尝试以下方法：

```
interface Callback {
    public void computationComplete(Result r);
}
public Result doComputation(final Callback c) {
    // Do computation
    new Thread(new Runnable() {
        @Override
        public void run() {
            // Complete computation
            c.computationComplete(finalResult);
        }
    }).start();
    return firstResult;
} 
```

但这基本上是在重新发明轮子。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T16:09:46.070

我会使用侦听器模式。可以将自定义侦听器实例传递到方法中或添加到对象中。当长时间运行的方法执行时，您可以适当地调用侦听器，传递您需要的任何信息。可以多次调用此侦听器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-29T16:10:05.860

这在 Java 中绝对是不可能的。你为什么不简单地将你的方法分成两个不同的方法呢？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-29T16:14:46.010

只需使用一个条件：

```
public class TestMethod {

public static void main(String[] args)
{
boolean yes=false;
int something=compute(yes);
System.out.println(something);
yes=true;
something=compute(yes);
System.out.println(something);
}

public static int compute(boolean yes)
{
if(!yes)
{
    System.out.println("1st block");
return 22;
}
else
{
    System.out.println("2nd block");
return 33;
}

}
} 
```

**编辑：** 根据问题，我使用了一种方法：从方法中多次返回。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-03-29T16:12:51.847

这是可能的，但你必须引入线程。

您的应用程序应该有两个线程`main`和`worker`.

线程，是你的`main`整个程序。那是在他工作期间开始的`worker`。Worker 进行计算，在第一部分之后他可以设置一个`main`线程可以读取和显示的值。

# asp.net-mvc - 如何将 HtmlString 作为 Func 传递

> ID：15706879
> 
> 赞同：0
> 
> 时间：2013-03-29T16:05:03.067
> 
> 标签：asp.net-mvc, razor

我正在使用 Phil Haack 的[RenderSection 助手](http://haacked.com/archive/2011/03/05/defining-default-content-for-a-razor-layout-section.aspx)来定义具有默认内容的布局部分。这一切都很好，但在一种情况下，默认内容包含在 HtmlString 中。我必须将变量表达式包装在这样的跨度中：

```
@this.RenderSection("aSectionName", 
   @<span>@anHtmlStringVariable</span> 
) 
```

让 Razor 引擎正确解释 HtmlString。虽然添加跨度不太可能给我的布局带来问题，但似乎我不应该那样包装它。有没有解决的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:20:06.837

您可以使用`<text>@anHtmlStringVariable</text>`.

# mysql - Mysql查询从表中获取除2之外的所有行

> ID：15706881
> 
> 赞同：0
> 
> 时间：2013-03-29T16:05:10.193
> 
> 标签：mysql

在我的项目中，我有 3 个 mysql 查询，一个用于获取公司下一个活动的信息，一个用于获取上一个活动的信息，我想为所有其他活动创建一个。

日期由下式给出： $date=date("Ymd");

对于下一个事件，我有： SELECT * FROM passeio WHERE passeio_date > $date LIMIT 0,1

对于上一个事件，我有： SELECT * FROM passeio WHERE passeio_date < $date LIMIT 0,1

除了上一个和下一个事件之外，我该如何获取所有其他行。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:10:48.027

如果表上有主键，则可以查询以上两个查询的组合以获取所有“其他”行：

```
select * from passeio where ID not in 
(   select * from (
    select ID from passeio where passeio_date > $date LIMIT 0,1
    UNION
    select ID from passeio where passeio_date < $date LIMIT 0,1
    )t
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:25:03.277

使用 时，如果您有特定的顺序，`limit`则应始终包含一个。`order by`我认为您想要的查询是：

```
select * from passeio where ID not in 
(   select * from (
    select ID from passeio where passeio_date > $date order by passeio_date asc LIMIT 1
    UNION ALL
    select ID from passeio where passeio_date < $date order by passeio_date desc LIMIT 1
    )t
) 
```

I also switched the `union` to a `union all` because you do not need to eliminate duplicates.

Perhaps a more efficient way to do this is:

```
select *
from passeio
where passeio_date > $date
order by passeio_date
limit 1, 1000000000
union all
select *
from passeio
where passeio_date < $date
order by passeio_date desc
limit 1, 1000000000 
```

Whether this is more or less efficient depends on the data structure, but it eliminates the anti-join and doesn't require having an ID.

# c# - 如何在父窗口窗体中出现一个窗口？

> ID：15706884
> 
> 赞同：0
> 
> 时间：2013-03-29T16:05:26.167
> 
> 标签：c#, matlab

我正在开发一些运行命令并打开 MATLAB 窗口来绘制图形的应用程序，我需要捕获这个新窗口并将其显示在启动它的父窗口窗体中。实际上是那个 MATLAB 打开了这个新窗口，但是有没有办法抓住它并将它放在我的窗口中？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:11:45.687

查看[在 WinForm 项目中托管 EXE 应用程序](http://www.codeproject.com/Articles/9123/Hosting-EXE-Applications-in-a-WinForm-project)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:19:29.707

我相信您想要像 Iframe 对象这样的东西，您可以在其中将新内容加载到该容器中，但感觉它是同一个应用程序的一部分。不幸的是，您不能开箱即用，除非 MathLab 对象提供一些您可以从应用程序本身使用的 ActiveX 对象。您可以做的就是模拟外部 exe 是使用 Win32 API 的应用程序的一部分。看看这是否有帮助：

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;
using System.Runtime.InteropServices;
namespace CarPC
{
public partial class MainForm
{
#region Methods/Consts for Embedding a Window
    [DllImport("user32.dll", EntryPoint = "GetWindowThreadProcessId", SetLastError = true,
         CharSet = CharSet.Unicode, ExactSpelling = true,
         CallingConvention = CallingConvention.StdCall)]
    private static extern long GetWindowThreadProcessId(long hWnd, long lpdwProcessId);

    [DllImport("user32.dll", SetLastError = true)]
    private static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

    [DllImport("user32.dll", SetLastError = true)]
    private static extern long SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

    [DllImport("user32.dll", EntryPoint = "GetWindowLongA", SetLastError = true)]
    private static extern long GetWindowLong(IntPtr hwnd, int nIndex);

    [DllImport("user32.dll")]
    static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);

    [DllImport("user32.dll", SetLastError = true)]
    private static extern long SetWindowPos(IntPtr hwnd, long hWndInsertAfter, long x, long y, long cx, long cy, long wFlags);

    [DllImport("user32.dll", SetLastError = true)]
    private static extern bool MoveWindow(IntPtr hwnd, int x, int y, int cx, int cy, bool repaint);

    [DllImport("user32.dll", EntryPoint = "PostMessageA", SetLastError = true)]
    private static extern bool PostMessage(IntPtr hwnd, uint Msg, int wParam, int lParam);

    private const int SWP_NOOWNERZORDER = 0x200;
    private const int SWP_NOREDRAW = 0x8;
    private const int SWP_NOZORDER = 0x4;
    private const int SWP_SHOWWINDOW = 0x0040;
    private const int WS_EX_MDICHILD = 0x40;
    private const int SWP_FRAMECHANGED = 0x20;
    private const int SWP_NOACTIVATE = 0x10;
    private const int SWP_ASYNCWINDOWPOS = 0x4000;
    private const int SWP_NOMOVE = 0x2;
    private const int SWP_NOSIZE = 0x1;
    private const int GWL_STYLE = (-16);
    private const int WS_VISIBLE = 0x10000000;
    private const int WM_CLOSE = 0x10;
    private const int WS_CHILD = 0x40000000;
    private const int WS_MAXIMIZE = 0x01000000;
    #endregion
    #region Variables
    private Panel gpsPanel;
    private IntPtr gpsHandle;
    private Process gpsProcess = null;
    private ProcessStartInfo gpsPSI = new ProcessStartInfo();
    #endregion
    private void SetupGPSPanel()
    {
        //Panel to Contain Controls
        this.gpsPanel = new Panel();
        this.gpsPanel.Location = new Point(this.LeftBarRight, this.TopBarBottom);
        this.gpsPanel.Size = new Size(this.Size.Width - this.LeftBarRight, this.Size.Height - this.TopBarBottom);
        this.gpsPanel.Visible = false;

        gpsPSI.FileName = "notepad.exe";
        gpsPSI.Arguments = "";
        gpsPSI.WindowStyle = ProcessWindowStyle.Maximized;
        gpsProcess = System.Diagnostics.Process.Start(gpsPSI);
        gpsProcess.WaitForInputIdle();
        gpsHandle = gpsProcess.MainWindowHandle;
        SetParent(gpsHandle, this.gpsPanel.Handle);
        SetWindowLong(gpsHandle, GWL_STYLE, WS_VISIBLE + WS_MAXIMIZE);
        MoveWindow(gpsHandle, 0,0, this.gpsPanel.Width, this.gpsPanel.Height, true);

        this.Controls.Add(gpsPanel);
    }
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:25:23.880

您可以简单地将您的*Matlab 项目*构建为*.Net*或*COM*对象组件。因此，您将像这样构建和打包组件：

*   选择要构建的组件类型（.Net 或 COM）
*   添加要作为组件的公共方法访问的 Matlab 代码文件和 MEX 文件。
*   指定定义生成的类型安全 API 的 .Net 接口。
*   设置建筑和包装的属性。
*   构建，然后测试您的组件以确保其正常工作。
*   为程序员或最终用户打包组件和 MCR。

完成上述步骤后，您将能够像访问Visual Studio 中的任何其他对象组件一样访问*Matlab 组件。*然后，您可以从*Matlab 和 .Net*本地传递对象，而不会出现任何问题。

由于数据已被转换；所以它会像任何其他组件一样交互。

然后，您可以通过在*Windows 窗体*上拖动组件来简单地进行交互或界面，并将其视为任何其他`MDI`.

```
MatlabComponentFrm m = new MatlabComponentFrm();
m.MdiParent = this;
m.Show(); 
```

非常简单的例子。在我看来，这将是最简单的。否则，您可以导入或托管可执行文件。你有很多方法可以做到这一点。希望这会有所帮助。

# java - 重绘 JPanel 的一部分

> ID：15706886
> 
> 赞同：0
> 
> 时间：2013-03-29T16:05:27.543
> 
> 标签：java, swing, jpanel, repaint, paintcomponent

我需要在 xy 轴坐标系中绘制 google 和 yahoo 访问时间。现在我已经绘制了 xy 轴坐标系。

```
public void paintComponent(Graphics gl) {
    Graphics2D g = (Graphics2D) gl;
    g.setColor(new Color(222, 222, 222));
    g.fillRect(0, 0, this.getWidth(), this.getHeight());
    g.setColor(new Color(0, 0, 0));
    int x=15;
    int y=15;
    g.drawString("20", 0, 10);
    for(int i=1;i<=20;i++) {
        g.drawLine(x, y+(35*(i-1)), x, y+(35*i));
        g.drawString(""+(20-i), 0, y+(35*i));
    }
    for(int i=1;i<=10;i++) {
        g.drawLine(x+(70*(i-1)),715, x+(70*i), 715);
        g.drawString(""+i,  x+(70*i),730);
    }
} 
```

现在我需要在这个 XY 坐标系上动态地重绘访问时间的值。但是我知道当我调用 repaint() 时。它将再次重绘（）XY坐标。如何在不重绘XY坐标的情况下重绘访问时间的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T16:06:44.757

将 GUI 显示的稳定背景部分放入 BufferedImage 中，然后在`paintComponent(...)`方法中绘制。

例如，

```
// Warning: code has not been run nor compiled and may contain errors.
public class MyGui extends JPanel {
   public static final int BI_WIDTH = //..... ? the width of the image
   public static final int BI_HEIGHT = // .....? the height of the image
   private BufferedImage bImg;

   public MyGui() {
     bImg = makeImage();
     // ... other code
   }

   public BufferedImage makeImage() {
     BufferedImage bImg = new BufferedImage(BI_WIDTH, BI_HEIGHT, 
         BufferedImage.TYPE_INT_ARGB);
     Graphics2D g2 = bImg.createGraphics();

     // ... do your background drawing here, the display that doesn't change

     g2.dispose();
     return bImg;
   }

   public void paintComponent(Graphics g) {
     super.paintComponent(g);
     if (bImg != null) {
       g.drawImage(bImg, 0, 0, this);
     }
     // ...  draw the changing parts of your display
   }

   // note, if your image is going to fill up your JPanel, then it's
   // also a good idea to override the getPreferredSize() method to make sure 
   // that the JPanel's size is correct and matches that of the image:
   @Override
   public Dimension getPreferredSize() {
     return new Dimension(BI_WIDTH, BI_HEIGHT);
   } 
```

**编辑：**注意代码和评论关于`getPreferredSize()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T05:59:11.047

> 如何在不重新绘制 XY 坐标的情况下重新绘制访问时间的值？

重新绘制 X/Y 轴有什么关系？如果您担心性能，它不会产生任何明显的差异。

我知道这不是您所要求的，但这是一个将 X/Y 轴绘制为单独组件的解决方案。然后，您可以独立绘制访问时间。它可能看起来有点复杂，但那是因为 X/Y 轴代码比你的更漂亮。

此外，这可能会使绘制访问时间更容易，因为所有绘制偏移现在都是从零开始的，因为您在单独的面板上进行绘制。

```
import java.awt.*;
import javax.swing.*;

public class Axis extends JComponent
{
    public static final int HORIZONTAL = 0;
    public static final int VERTICAL = 1;

    private int orientation;
    private int ticks;
    private int tickIncrement;
    private int tickSize = 7;

    public Axis(int orientation, int ticks, int tickIncrement)
    {
        this.orientation = orientation;
        this.ticks = ticks;
        this.tickIncrement = tickIncrement;

        setFont( new Font("SansSerif", Font.PLAIN, 10) );
    }

    public Dimension getPreferredSize()
    {
        FontMetrics fontMetrics = getFontMetrics( getFont() );
        int tickDimension = ticks * tickIncrement;

        if (orientation == HORIZONTAL)
        {
            int height = (fontMetrics.getHeight() * 2) - fontMetrics.getAscent() + (tickSize * 2);
            return new Dimension(tickDimension + getVerticalAxisWidth(), height);
        }
        else
        {
            int digits = String.valueOf(ticks).length();
            int textWidth = fontMetrics.charWidth( '0' ) * digits;
            int width = textWidth + (tickSize * 2) + 10;
            return new Dimension(width, tickDimension);
        }
    }

    protected void paintComponent(Graphics g)
    {
        //  Paint background

        g.setColor( getBackground() );
        g.fillRect(0, 0, getWidth(), getHeight());

        //  Paint graph axis

        g.setFont( getFont() );
        g.setColor( getForeground() );

        if (orientation == HORIZONTAL)
            paintHorizontalAxis(g);
        else
            paintVerticalAxis(g);
    }

    private void paintHorizontalAxis(Graphics g)
    {
        FontMetrics fontMetrics = getFontMetrics( g.getFont() );
        int label = 1;
        int offset = tickIncrement;
        int width = getWidth();
        int adjustmentX = getVerticalAxisWidth() - 1;
        int textOffset = tickSize + fontMetrics.getHeight();

        while (offset <= width)
        {
            int hOffset = adjustmentX + offset;
            g.drawLine(adjustmentX, 0, width, 0);
            g.drawLine(hOffset, 0, hOffset, tickSize);
            String text = "" + label;
            int textAdjustment = (fontMetrics.stringWidth(text) - 1) / 2;
            g.drawString(text, hOffset - textAdjustment, textOffset);

            offset += tickIncrement;
            label++;
        }
    }

    private int getVerticalAxisWidth()
    {
        Container parent = (Container)getParent();

        if (parent == null)
            return 0;

        LayoutManager manager = parent.getLayout();

        if (manager instanceof BorderLayout)
        {
            BorderLayout layout = (BorderLayout)manager;

            Component south = layout.getLayoutComponent(BorderLayout.SOUTH);
            Component west = layout.getLayoutComponent(BorderLayout.WEST);

            if (this.equals(south)
            &&  west instanceof Axis)
            {
                return west.getPreferredSize().width;
            }
        }

        return 0;
    }

    private void paintVerticalAxis(Graphics g)
    {
        FontMetrics fontMetrics = getFontMetrics( g.getFont() );
        int label = 1;
        int offset = tickIncrement;
        int x = getWidth() - 1;
        int height = getHeight();
        int textOffset = fontMetrics.getHeight() - fontMetrics.getAscent() + 1;

        while (offset <= height)
        {
            int vOffset = height - offset;
            g.drawLine(x, 0, x, height);
            g.drawLine(x, vOffset, x - tickSize, vOffset);
            String text = "" + label;
            int textAdjustment = fontMetrics.stringWidth( text ) + tickSize + 5;
            g.drawString(text, x - textAdjustment, vOffset + textOffset);

            offset += tickIncrement;
            label++;
        }
    }

    private static void createAndShowUI()
    {
        JPanel graph = new JPanel( new BorderLayout() );

        Axis vertical = new Axis(Axis.VERTICAL, 8, 50);
        vertical.setBackground(Color.ORANGE);
        graph.add(vertical, BorderLayout.WEST);

        Axis horizontal = new Axis(Axis.HORIZONTAL, 12, 50);
        horizontal.setBackground(Color.ORANGE);
        graph.add(horizontal, BorderLayout.SOUTH);

        //  Do you custom painting on this panel

        JPanel center = new JPanel();
        center.setBackground( Color.YELLOW );
        graph.add(center);

        JFrame frame = new JFrame("SSCCE");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new JScrollPane(graph));
        frame.pack();
        frame.setLocationByPlatform( true );
        frame.setVisible( true );
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowUI();
            }
        });
    }
} 
```

这仍然不是一个完美的解决方案，因为代码依赖于您使用 BorderLayout 来保存 3 个面板，但我不想编写自定义布局管理器来演示概念。

# sql - PostGIS 错误：无法选择最佳候选函数

> ID：15706888
> 
> 赞同：1
> 
> 时间：2013-03-29T16:05:32.700
> 
> 标签：sql, postgresql, postgis, postgresql-9.1

创建视图时，出现错误`function populate_geometry_columns(unknown) is not unique`。我正在阅读的一本书使用了这个，但它给了我一个错误。我可能出了什么问题？

**询问：**

```
CREATE OR REPLACE VIEW ch03.vw_paris_points AS
SELECT gid, osm_id, ar_num, geom,
tags->'name' As place_name,
tags->'tourism' As tourist_attraction
FROM ch03.paris_hetero
WHERE ST_GeometryType(geom) = 'ST_Point';

SELECT populate_geometry_columns('ch03.vw_paris_points'); 
```

**错误：**

```
ERROR:  function populate_geometry_columns(unknown) is not unique
LINE 1: SELECT populate_geometry_columns('ch03.vw_paris_points');
               ^
HINT:  Could not choose a best candidate function. You might need to add explicit type casts.

********** Error **********

ERROR: function populate_geometry_columns(unknown) is not unique
SQL state: 42725
Hint: Could not choose a best candidate function. You might need to add explicit type casts.
Character: 8 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T16:24:42.143

来自[精美手册](http://postgis.net/docs/Populate_Geometry_Columns.html)：

> **概要**
> 
> ```
> text Populate_Geometry_Columns(boolean use_typmod=true);
> int Populate_Geometry_Columns(oid relation_oid, boolean use_typmod=true); 
> ```

因此，有两个可能的`populate_geometry_columns`函数可以用一个参数调用，但都没有 TEXT 参数。错误消息告诉您 PostgreSQL 不知道它是否应该将您的`'ch03.vw_paris_points'`字符串隐式转换为 a`boolean`或 an `oid`。我的人脑建议您需要以下`oid`版本：

```
SELECT populate_geometry_columns('ch03.vw_paris_points'::regclass);
-- add an explicit cast -------------------------------^^^^^^^^^^ 
```

但是 PostgreSQL 的软件大脑只看到一个字符串就会感到困惑。也许单参数形式`populate_geometry_columns`比您正在阅读的书要新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T16:27:07.830

PostgreSQL 允许[**函数重载**](http://www.postgresql.org/docs/current/interactive/xfunc-overload.html)。多个函数可以具有相同的名称。区别在于参数。

该手册详细说明了 PostgreSQL 的大脑如何尝试做出决定以及何时放弃像您这样的错误消息。[@mu](https://stackoverflow.com/a/15707216/939860)已经提供了此案例的详细信息。

# mysql - 具有多个值的单列匹配多个值sql

> ID：15706891
> 
> 赞同：0
> 
> 时间：2013-03-29T16:05:41.497
> 
> 标签：mysql, sql, tagging

我有一个表格`newsarchive`，其中有一`tags`列可以输入多个用逗号分隔的值。我有一个页面，其中的新闻与指定的标签匹配`newsarchive.tags`将显示与指定的标签匹配的新闻。页面中的标签也可以有多个值。

现在我想从页面中获取与标签匹配的记录`newsarchive.tags`。有没有实现结果的SQL语句？

```
 CREATE TABLE newsarchive ( 
    newsid int(11) NOT NULL auto_increment, 
    headline text NOT NULL, 
    article text NOT NULL, 
    pdate date NOT NULL default '0000-00-00', 
    tags text NOT NULL, 
    PRIMARY KEY (newsid) ) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=107 ; 
```

## 例子

```
newsarchive.tags of record#1="Nepal, Everest, Kathmandu"

newsarchive.tags of record#2="Kathmandu,Pokhara"

newsarchive.tags of record#3="Everest,Pokhara"

tags(in page)="Nepal, Kathmandu" 
```

## 结果应该是：

```
record#1
record#2 
```

我将`SELECT`语句与`IN`as一起使用

```
SELECT * FROM newsarchive WHERE tags IN ('Nepal','Kathmandu') ORDER BY postdate; 
```

## 笔记：

如果标签匹配最多的记录首先出现，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:19:42.693

使用`where tags in`不适用于您的场景。

最好的方法是将这些标签放入通过外键链接到记录的相关表中。

如果您无法更改架构并且您使用支持它的 RDBMS 系统，您将需要查看MySQL 上的[全文搜索或（](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)[此处的 SQL Server 链接](http://msdn.microsoft.com/en-us/library/ms142571.aspx)）以搜索该分隔字符串。

在全文之外，您必须通过分隔符（在本例中为逗号）拆分字符串，并通过临时表、表变量或其他方式单独搜索它们。我已经看到了在 SQL Server 上搜索遵循该粗略概念的分隔字符串的[xml 方法。](http://bradsruminations.blogspot.com/2009/12/delimited-string-tennis-anyone.html)

在 MySQL 上，您可能必须编写自己的[字符串拆分函数](http://forums.mysql.com/read.php?60,78776,78776)。通读对链接问题的回复，以查看在 MySQL 中拆分的示例方法。

如果您必须将多值数据存储在单个列中（不推荐），那么通常 XML 是比分隔字符串更好的方法。MySQL 为 xpath 查询等提供了一些支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:05:15.453

您的数据结构不佳。你应该有一个像这样的表：

```
CREATE TABLE newstags ( 
    newstagsid int(11) NOT NULL auto_increment,
    newsid int(11) not null,
    tag text not null 
    PRIMARY KEY (newstagsid)
) 
```

每个故事都有一个标签。更好的结构是将标签存储在单独的表中，并`tagid`在此处使用而不是`tag`.

但你没有那个。你能做什么？可以解析使用在php.ini中输入的标签。然后构造一条 SQL 语句，条件如下：

```
(concat(',', tags, ',') like concat('%,', USERTAGS1, '%,') or
 concat(',', tags, ',') like concat('%,', USERTAGS2, '%,') or
 . . .
 concat(',', tags, ',') like concat('%,', USERTAGSn, '%,')
) 
```

另一种方法是在标签上建立全文索引，然后使用`contains`.

# xpath - Xpath 1.0 中的映射（键、值）查询

> ID：15706894
> 
> 赞同：0
> 
> 时间：2013-03-29T16:05:49.363
> 
> 标签：xpath

我是 Xpath 的初学者，但我有一个简单的问题。

我正在查询这个文件

```
<?xml version="1.0" encoding="UTF-8"?>
<MC>
  <SC>
    <S uid="721" gen="" yr="2000" art="The Band" cmp="Robbie Robertson" fld="/mnt/sdcard/Music/The Band/The Band" alb="The Band" ttl="Up On Cripple Creek (2000 Digital Remaster)"/>
    <S uid="722" gen="" yr="2003" art="The Band" cmp="Robbie Robertson" fld="/mnt/sdcard/Music/The Band/Greatest Hits" alb="Greatest Hits" ttl="The Weight (2000 Digital Remaster)"/>
    <S uid="723" gen="" yr="2005" art="The Cascades" cmp="John Gummoe" fld="/mnt/sdcard/Music/The Cascades/Rhythm Of The Rain" alb="Rhythm Of The Rain" ttl="Rhythm Of The Rain (LP Version)"/>
    <S uid="724" gen="" yr="1976" art="Creedence Clearwater Revival" cmp="John Fogerty" fld="/mnt/sdcard/Music/Creedence Clearwater Revival/Chronicle Volume One" alb="Chronicle Volume One" ttl="Who'll Stop the Rain"/>
    <S uid="725" gen="" yr="2001" art="Johnny Cash" cmp="Johnny Cash" fld="/mnt/sdcard/Music/Johnny Cash/The Complete Sun Singles, vol. 1" alb="The Complete Sun Singles, vol. 1" ttl="I Walk the Line"/>
    <S uid="762" gen="" yr="1980" art="Bob Seger" cmp="Bob Seger" fld="/mnt/sdcard/Music/Bob Seger &amp; the Silver Bullet Band/Greatest Hits" alb="Greatest Hits" ttl="Against The Wind"/>
    <S uid="763" gen="" yr="1975" art="The Eagles" cmp="G. Frey" fld="/mnt/sdcard/Music/The Eagles/Their Greatest Hits" alb="Their Greatest Hits" ttl="Lyin' Eyes"/>
    <S uid="764" gen="" yr="1987" art="Johnny Horton" cmp="M. Phillips" fld="/mnt/sdcard/Music/Johnny Horton/Johnny Horton's Greatest Hits" alb="Johnny Horton's Greatest Hits" ttl="North To Alaska"/>
    <S uid="765" gen="" yr="1969" art="Marty Robbins" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Marty Robbins/Super Hits" alb="Super Hits" ttl="You Gave Me A Mountain"/>
    <S uid="792" gen="" yr="1976" art="Bob Seger" cmp="Bob Seger" fld="/mnt/sdcard/Music/Bob Seger &amp; the Silver Bullet Band/Greatest Hits" alb="Greatest Hits" ttl="Night Moves"/>
    <S uid="793" gen="" yr="2003" art="Conway Twitty" cmp="Conway Twitty/Jack Nance" fld="/mnt/sdcard/Music/Conway Twitty/Hello Darlin' 15 #1 Hits" alb="Hello Darlin' 15 #1 Hits" ttl="It's Only Make Believe"/>
    <S uid="794" gen="" yr="1996" art="Kenny Rogers &amp; The First Edition" cmp="Mel Tillis" fld="/mnt/sdcard/Music/Kenny Rogers &amp; the First Edition/Anthology" alb="Anthology" ttl="Ruby, Don't Take Your Love To Town"/>
    <S uid="795" gen="" yr="2004" art="Neil Young" cmp="Neil Young" fld="/mnt/sdcard/Music/Neil Young/Greatest Hits" alb="Greatest Hits" ttl="Old Man"/>
    <S uid="796" gen="" yr="2009" art="Neil Young" cmp="Neil Young" fld="/mnt/sdcard/Music/Neil Young/Harvest" alb="Harvest" ttl="Heart Of Gold"/>
    <S uid="797" gen="" yr="2011" art="The Springfields" cmp="Dick Reynolds/Jack Rhodes" fld="/mnt/sdcard/Music/The Springfields/The Very Best Of" alb="The Very Best Of" ttl="Silver Threads And Golden Needles"/>
    <S uid="798" gen="" yr="1987" art="The Statler Brothers" cmp="Don Reid" fld="/mnt/sdcard/Music/The Statler Brothers/The Best Of The Statler Brothers" alb="The Best Of The Statler Brothers" ttl="Susan When She Tried"/>
    <S uid="799" gen="" yr="2005" art="The Statler Brothers" cmp="Don Reid" fld="/mnt/sdcard/Music/The Statler Brothers/The Definitive Collection" alb="The Definitive Collection" ttl="The Class Of '57"/>
    <S uid="800" gen="" yr="2005" art="The Statler Brothers" cmp="Don Reid" fld="/mnt/sdcard/Music/The Statler Brothers/The Definitive Collection" alb="The Definitive Collection" ttl="I'll Go To My Grave Loving You"/>
    <S uid="801" gen="" yr="2006" art="Steve Miller Band" cmp="Steve Miller" fld="/mnt/sdcard/Music/Steve Miller Band/Greatest Hits  1974-1978" alb="Greatest Hits: 1974-1978" ttl="The Joker"/>
    <S uid="802" gen="" yr="2006" art="Steve Miller Band" cmp="Steve Miller" fld="/mnt/sdcard/Music/Steve Miller Band/Greatest Hits  1974-1978" alb="Greatest Hits: 1974-1978" ttl="Rock'n Me"/>
    <S uid="803" gen="" yr="2010" art="Gale Garnett" cmp="Gale Garnett" fld="/mnt/sdcard/Music/Various Artists/Early Girl 7  Hits" alb="Early Girl 7&quot; Hits" ttl="We'll Sing In The Sunshine"/>
    <S uid="804" gen="" yr="2004" art="Various Artists" cmp="Don Gibson" fld="/mnt/sdcard/Music/Various Artists/King of the Road" alb="King of the Road" ttl="I Can't Stop Loving You - Don Gibson"/>
    <S uid="805" gen="" yr="2005" art="Willie Nelson" cmp="Willie Nelson" fld="/mnt/sdcard/Music/Willie Nelson/America's Troubador" alb="America's Troubador" ttl="Angel Flying To Close To The Ground"/>
    <S uid="819" gen="" yr="1975" art="The Eagles" cmp="D. Henley" fld="/mnt/sdcard/Music/The Eagles/Their Greatest Hits" alb="Their Greatest Hits" ttl="Take It To The Limit"/>
    <S uid="820" gen="" yr="1973" art="The Eagles" cmp="Don Henley, Glen Frey" fld="/mnt/sdcard/Music/The Eagles/Their Greatest Hits" alb="Their Greatest Hits" ttl="Desperado"/>
    <S uid="821" gen="" yr="1985" art="The Highwaymen" cmp="Guy Clark" fld="/mnt/sdcard/Music/The Highwaymen/Highwayman" alb="Highwayman" ttl="Desperados Waiting For A Train"/>
    <S uid="832" gen="" yr="1970" art="Marty Robbins" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Marty Robbins/Super Hits" alb="Super Hits" ttl="My Woman, My Woman, My Wife"/>
    <S uid="833" gen="" yr="1982" art="Marty Robbins" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Marty Robbins/Super Hits" alb="Super Hits" ttl="Some Memories Just Won't Die"/>
    <S uid="834" gen="" yr="1985" art="The Highwaymen" cmp="Johnny Cash" fld="/mnt/sdcard/Music/The Highwaymen/Highwayman" alb="Highwayman" ttl="Committed To Parkview"/>
    <S uid="835" gen="" yr="1995" art="Roy Clark" cmp="Herbert Kretzmer, Charles Aznavour" fld="/mnt/sdcard/Music/Roy Clark/Greatest Hits - Roy Clark" alb="Greatest Hits - Roy Clark" ttl="Yesterday When I Was Young"/>
    <S uid="836" gen="" yr="1995" art="Roy Clark" cmp="Charlie Williams, Bobby George" fld="/mnt/sdcard/Music/Roy Clark/Greatest Hits - Roy Clark" alb="Greatest Hits - Roy Clark" ttl="I Never Picked Cotton"/>
    <S uid="842" gen="" yr="1970" art="Simon &amp; Garfunkel" cmp="Paul Simon" fld="/mnt/sdcard/Music/Simon &amp; Garfunkel/Simon &amp; Garfunkel's Greatest Hits" alb="Simon &amp; Garfunkel's Greatest Hits" ttl="Bridge Over Troubled Water [Live]"/>
    <S uid="843" gen="" yr="1977" art="The Oak Ridge Boys" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/The Oak Ridge Boys/Collection" alb="Collection" ttl="Y'all Come Back Saloon"/>
    <S uid="848" gen="" yr="1987" art="Vern Gosdin" cmp="Various" fld="/mnt/sdcard/Music/Vern Gosdin/Super Hits" alb="Super Hits" ttl="Chiseled In Stone"/>
    <S uid="849" gen="" yr="1987" art="Vern Gosdin" cmp="Various" fld="/mnt/sdcard/Music/Vern Gosdin/Super Hits" alb="Super Hits" ttl="Who You Gonna Blame It On This Time"/>
    <S uid="854" gen="" yr="1972" art="John Denver" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/John Denver/The Very Best Of John Denver [Disc 2]" alb="The Very Best Of John Denver [Disc 2]" ttl="Rocky Mountain High"/>
    <S uid="855" gen="" yr="1971" art="John Denver" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/John Denver/The Very Best Of John Denver [Disc 2]" alb="The Very Best Of John Denver [Disc 2]" ttl="Take Me Home, Country Roads"/>
    <S uid="856" gen="" yr="1995" art="Vince Gill" cmp="Vince Gill" fld="/mnt/sdcard/Music/Vince Gill/Souvenirs" alb="Souvenirs" ttl="Never Knew Lonely"/>
    <S uid="857" gen="" yr="1995" art="Vince Gill" cmp="Vince Gill - Tim Dubois" fld="/mnt/sdcard/Music/Vince Gill/Souvenirs" alb="Souvenirs" ttl="When I Call Your Name"/>
    <S uid="860" gen="" yr="1995" art="Vince Gill" cmp="Vince Gill - Brian Allsmiller" fld="/mnt/sdcard/Music/Vince Gill/Souvenirs" alb="Souvenirs" ttl="Pocket Full Of Gold"/>
    <S uid="863" gen="" yr="2000" art="Waylon Jennings" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Waylon Jennings/Greatest Hits - Waylon Jennings" alb="Greatest Hits - Waylon Jennings" ttl="Bob Wills Is Still King"/>
    <S uid="864" gen="" yr="2000" art="Waylon Jennings" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Waylon Jennings/Greatest Hits - Waylon Jennings" alb="Greatest Hits - Waylon Jennings" ttl="Just To Satisfy You"/>
  </SC>
  <PC>
    <P uid="504" ttl="Quick list"/>
    <P uid="867" ttl="My playlist 001"/>
  </PC>
</MC> 
```

使用查询是/MC/SC/*/@yr，它输出属性@yr 的值列表。是否有一个 xpath 1.0 查询也会在结果的每个值旁边添加属性名称？

例如，

年份：2001 年份：2003 年份：2005

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:02:42.427

不，我认为这不能在 XPath 1.0 中完成。在 XPath 2.0 中这很容易；如果您坚持使用 XPath 1.0，我会使用宿主语言（即调用 XPath 处理器来评估表达式的程序）。

# css - 如何在引导 css 框架中使输入文本更大？

> ID：15706898
> 
> 赞同：1
> 
> 时间：2013-03-29T16:06:12.790
> 
> 标签：css, twitter-bootstrap, textbox

我有一个这样的引导文本框：

```
 <input type="text" class="span9" required name="input_text"/> 
```

我希望我的输入框是 height `300px`。对于宽度， span9 处理它。我在 Chrome 中使用了 Inspect 元素并像这样覆盖 css：

```
input.span9, textarea.span9, .uneditable-input.span9 {
width: 852px;
height: 300px; 
```

具有所需高度和宽度的文本框看起来不错。但问题是我只能在大文本框之间输入一小部分。我希望用户能够输入整个文本框，即使文本框不够，我也想显示滚动。这怎么可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T16:20:02.780

根据我的评论，这是一个快速修复。使用 a`<textarea>`而不是，`<input>`它将按照您描述的方式运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:14:15.333

根据您的问题，听起来问题与 CSS font-size 和/或 line-height 属性有关。

input[text] 元素将从其父元素或用户代理设置继承 font-size 和 line-height 属性。

试试这个：

```
input.span9, textarea.span9, .uneditable-input.span9 {
width: 852px;
height: 300px;
font-size:92px;
line-height:92px;
} 
```

[http://jsfiddle.net/xvznz/3/](http://jsfiddle.net/xvznz/3/)

至于“显示滚动”，这对于标准输入 [文本] 是不可能的。但是上面的示例显示了您对 textarea 元素所期望的滚动。

因此，您的解决方案是调整 font-size 和/或 line-height CSS 属性。

# css - div 下不显示任何元素

> ID：15706901
> 
> 赞同：0
> 
> 时间：2013-03-29T16:06:20.800
> 
> 标签：css, html

为了节省您的时间，我会用图片阐明我想说的 ![图片](../Images/477bf670978a29f9091103a9f77c82b7.png)

我的 HTML

```
<div align="center"> 
         <div class="img-container">
         <div class="myconatiner">
          <h2>Headline</h2>
          <img src="img/image.png"> 
           <p>Caption</p>
         </div>
         </div>
        </div> 
```

我的 CSS

```
.img-container { width:100%; background-color:#59cbfc; position:absolute; right:0; left:0; vertical-align:central; }
.img-container h2 { float:left; padding:20px 0 0 0; max-width:500px; text-align:center; }
.img-container p { float:left; padding:10px 0 0 0; max-width:500px; text-align:center; }
.img-container img { float:right; width:500px; height:326px; padding-top:10px; bottom:0; }
.mycontainer { width:100%; max-width:1000px; height:auto; } 
```

问题是，每当我放置任何元素或 div 时，它都不会显示，因为它位于该`img-container`div 下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:11:56.913

您看不到下面的元素，`.img-container`因为它具有`position:absolute`. 这会导致 div 覆盖 div “后面”的元素 - 即您在源代码中放置在它下方的元素。

这个问题有两个简单的解决方案：

*   绝对[`position`](https://developer.mozilla.org/en-US/docs/CSS/position)是 div 下面的元素。
*   使用[`float`](https://developer.mozilla.org/en-US/docs/CSS/float)或其他定位技术在您的页面上定位 div。这可能是更好的方法，因为您没有`height`for `.img-container`。一个例子如下所示。

CSS：

```
.img-container {
    width:100%;
    background-color:#59cbfc;
    vertical-align:central;
    float:left;
} 
```

[JS Fiddle 示例使用`float`而不是`position:absolute`](http://jsfiddle.net/EegyV/2/).

# php - 如何发布动态页面？

> ID：15706902
> 
> 赞同：1
> 
> 时间：2013-03-29T16:06:27.530
> 
> 标签：php, javascript

我在 index.php 上使用 httpxmlpost 函数加载静态 html 页面。
现在我需要加载一个 html 动态页面，该页面调用一个 javascript 文件，同时保留在 index.php 上。可能吗？我能怎么做？

谢谢大家！

# backbone.js - 下划线使用主干视图嵌套每个循环

> ID：15706903
> 
> 赞同：1
> 
> 时间：2013-03-29T16:06:31.863
> 
> 标签：backbone.js, requirejs, underscore.js

尝试将每个 measureView 及其子项（beatView(s)）的渲染嵌套在同一个 measureView.js 文件中。我们使用 require.js 来定义路径，所以请原谅一些未定义的 var 名称。问题出在 measureView.js 中，在嵌套的 _.each 方法中，作为`new BeatView()`返回`Uncaught TypeError: undefined is not a function`。`new BeatView()`我们首先尝试从外部手动调用，`_.each function`以确保它不是 require.js BeatView 变量的作用域，但是使用这个：（`new BeatView({model:this.component.models[0].get('beats').models[0], el:this.el});` ）得到了同样的错误。使用带有作用域的嵌套 s 有什么特别之处`_.each`，还是我缺少的其他东西？

measureView.js ： [完整代码的jsfiddle](http://jsfiddle.net/chrisfrisina/MnFDR/)

```
define([
  'jquery',
  'underscore',
  'backbone',
  'backbone/collections/beats',
  'backbone/collections/measures',
  'backbone/views/beats/beatView',
  'text!backbone/templates/measures/audioMeasures.html',
  'text!backbone/templates/measures/linearBarMeasures.html',
  'text!backbone/templates/measures/linearBarSVGMeasures.html',
  'text!backbone/templates/measures/circularPieMeasures.html',
  'app/dispatch',
  'app/state',
  'app/log'
], function($, _, Backbone, BeatsCollection, MeasuresCollection, BeatView, audioMeasuresTemplate, linearBarMeasuresTemplate, linearBarSVGMeasuresTemplate, circularPieMeasuresTemplate, dispatch, state, log){
  return Backbone.View.extend({
    el: $('.component'), 
```

...

```
render: function(){
  //we create a measuresView for each measure.
  _.each(this.component.models, function(measure) {
    var compiledTemplate = _.template( this.representations[this.currentMeasureRepresentation], {measure: measure, measureAngle: 360.0 } );
    $(this.el).append( compiledTemplate );
       //we create a beatView for each beat in the measure.
        _.each(measure.get('beats').models, function(beat) {
          new BeatView({model:beat, el:this.el});
        }, this);
  }, this);
 return this;
}, 
```

beatView.js : [完整代码的 jsfiddle](http://jsfiddle.net/chrisfrisina/b4yRA/)

```
render: function(){
  var compiledTemplate = _.template(this.representations[this.currentBeatRepresentation], {beat: this.model, beatAngle: this.beatAngle});
  $(this.el).append(compiledTemplate);
  return this;
}, 
```

附加信息：

骨干结构：

```
Component (basically an instrument)
  ↳ A collection of Measure(s)
    ↳ Measure
      ↳ A collection of Beat(s)
        ↳ Beat 
```

击败型号：

```
//filename: models/beat.js
/*
  This is the beat model.
  It only knows about whether or not it
  is selected.
*/
define([
  'underscore',
  'backbone'
], function(_, Backbone) {
  var beatModel = Backbone.Model.extend({
    defaults: {
      selected: false,
      state: 'OFF'
    },
    initialize: function(){
    },
    getStyleClass: function() {
      if (this.selected) {
        return 'ON';
      }
      else {
        return 'OFF';
      }
    }
  });
  return beatModel;
}); 
```

节拍收藏：

```
//Filename: collections/beats.js
/*
  This is the beats collection.
  It is a collection of beat models.
*/
define([
  'jquery',
  'underscore',
  'backbone',
  'backbone/models/beat'
], function($, _, Backbone, beatModel){
  return Backbone.Collection.extend({
    model: beatModel,
    initialize: function(){
    }
  });
  //return new beatsCollection();
}); 
```

测量模型：

```
//filename: models/measure.js
/*
  This is the measure model.
  A component has a collection of these models.
  these models have a collection of beats.
*/
define([
  'underscore',
  'backbone',
  'backbone/collections/beats'
], function(_, Backbone, beatsCollection) {
  var measureModel = Backbone.Model.extend({
    defaults: {
      label: '0/4',
      beats: beatsCollection,
      numberOfBeats: 0,
      divisions: 8
    },
    initialize: function(){     
    }
  });
  return measureModel;
}); 
```

测量集合：

```
//filename collections/measures.js
/*
  This is the measures collection.
  It is a collection of measure models.
*/
define([
  'jquery',
  'underscore',
  'backbone',
  'backbone/models/measure'
], function($, _, Backbone, measureModel){
  return Backbone.Collection.extend({
    model: measureModel,
    initialize: function(){
    }
  });
}); 
```

内部错误：

```
Uncaught TypeError: undefined is not a function measuresView.js:100
(anonymous function) measuresView.js:100
_.each._.forEach underscore.js:78
(anonymous function) measuresView.js:96
_.each._.forEach underscore.js:78
Backbone.View.extend.render measuresView.js:88
Backbone.View.extend.initialize measuresView.js:72
Backbone.View backbone.js:1236
child backbone.js:1467
Backbone.View.extend.render componentView.js:63
Backbone.View.extend.initialize componentView.js:54
Backbone.View backbone.js:1236
child backbone.js:1467
(anonymous function) componentsView.js:201
_.each._.forEach underscore.js:78
Backbone.View.extend.render componentsView.js:192
Backbone.Router.extend.newSong router.js:42
(anonymous function) backbone.js:967
(anonymous function) backbone.js:1164
_.some._.any underscore.js:207
_.extend.loadUrl backbone.js:1162
_.extend.start backbone.js:1128
initialize router.js:157
initialize SOF.js:15
.... 
```

外部错误：

```
Uncaught TypeError: undefined is not a function measuresView.js:86
Backbone.View.extend.render measuresView.js:86
Backbone.View.extend.initialize measuresView.js:72
Backbone.View backbone.js:1236
child backbone.js:1467
Backbone.View.extend.render componentView.js:63
Backbone.View.extend.initialize componentView.js:54
Backbone.View backbone.js:1236
child backbone.js:1467
(anonymous function) componentsView.js:201
_.each._.forEach underscore.js:78
Backbone.View.extend.render componentsView.js:192
Backbone.Router.extend.newSong router.js:42
(anonymous function) backbone.js:967
(anonymous function) backbone.js:1164
_.some._.any underscore.js:207
_.extend.loadUrl backbone.js:1162
_.extend.start backbone.js:1128
initialize router.js:157
initialize SOF.js:15
.... 
```

# scala - 比较两棵二叉树的优雅解决方案，并最早返回 false

> ID：15706904
> 
> 赞同：1
> 
> 时间：2013-03-29T16:06:32.383
> 
> 标签：scala, binary-tree

我想比较2个二叉树（按顺序），如果它们不一样，我想尽早返回。

我知道你可以遍历两棵树，然后比较输出，**但我想要一个更聪明的解决方案，以便尽早返回。**

您将如何在 scala 中以优雅的方式做到这一点？演员？

节点：

```
case class Node(
  var data: Int,
  left:Option[Node],
  right:Option[Node]
) 
```

在我的主目录中，我有 3 个当前完全相同的树，但只需将其粘贴到此处，以便在需要时对其进行修改：

```
def main( args:Array[String] ) = {
  val tree = Node( (3),
                       None,
                       Some(Node( (5),
                                  Some(Node( (1),
                                       None,
                                       None )),
                               Some(Node( (9),
                                        None,
                                        Some(Node( (15),
                                                   None,
                                                   None )) ))  ))  )

  val tree2 = Node( (3),
                      None,
                      Some(Node( (5),
                                 Some(Node( (1),
                                      None,
                                      None )),
                              Some(Node( (9),
                                       None,
                                       Some(Node( (15),
                                                  None,
                                                  None )) ))  ))  )
  val tree3 = Node( (3),
                      None,
                      Some(Node( (5),
                                 Some(Node( (1),
                                      None,
                                      None )),
                              Some(Node( (9),
                                       None,
                                       Some(Node( (15),
                                                  None,
                                                  None )) ))  ))  )
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:36:54.750

如果您想在比较和遍历中都短路，您可以将遍历转换为`Stream`生成器，`zip`来自每个遍历的流并使用`forall`或`exists`检测不匹配（`forall`并且`exists`短路，一旦停止结果已知）。

我没有时间写代码，所以如果有人更勤奋，请给他们检查！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T10:51:01.173

最近在想一个类似的问题。虽然 Randall Schulz 概述的算法会很棒（在运行时和 stile 方面），但它只有在两棵树具有相同形状的情况下才有效。

必须更清楚地定义“最早”。一般来说，这种算法的最坏情况运行时间为 O(min(n1,n2))，其中 n1 和 n2 是两棵树的节点数。给定一个具体问题，遍历顺序可能会对运行时间产生很大影响。

如果没有进一步指定问题，您可以按照您喜欢的任何顺序遍历树。秩序井然自然而然，无需进一步记账。也就是说，这一切都归结为 Rex Kerr 的方法。我刚刚添加了带有模式匹配的代码，这可能更容易理解。

```
def check(tree1:Node,tree2:Node): Boolean = {
    def checkOption(tr1:Option[Node], tr2:Option[Node]) = (tr1,tr2) match {
        case (None, None)         => true
        case (Some(t1), Some(t2)) => check(t1,t2)
        case _                    => false
    }

    (tree1,tree2) match {
        case (Node(d1,l1,r1), Node(d2,l2,r2)) if(d1==d2) => 
            checkOption(l1,l2) && checkOption(r1,r2)
        case _ => false
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T17:16:42.117

只需使用递归。除了几乎相同的巨型树的情况外，使用并行性不会获得任何好处，所以不要打扰。就像是：

```
def same(n: Node, m: Node): Boolean = {
  if (n.data != m.data || 
      n.left.isEmpty != m.left.isEmpty || 
      n.right.isEmpty != m.right.isEmpty) {
    false
  }
  else if (n.left.exists(a => m.left.exists(b => !same(a,b)))) false
  else !n.right.exists(a => m.right.exists(b => !same(a,b)))
} 
```

如果您的树可能有数千层深，则应切换到广度优先尾递归策略，而不是这种适当的递归策略（通过跟踪深度 n 处每侧的每个非空节点）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T17:19:27.537

```
object Main extends App {

  implicit val executor = ExecutionContext.global
  val branchLevel = 3

  def differentSequential(n1: Node, n2: Node) = differentOpt(Some(n1), Some(n2))

  def differentConcurrent(n1: Node, n2: Node) = differentPar(Some(n1), Some(n2), branchLevel)

  def differentOpt(n1: Option[Node], n2: Option[Node]): Boolean = {
    (n1, n2) match {
      case (Some(Node(d1, l1, r1)), Some(Node(d2, l2, r2))) =>
        d1 != d2 || differentOpt(l1, l2) || differentOpt(r1, r2)
      case _ => false
    }
  }

  def differentPar(n1: Option[Node], n2: Option[Node], level: Int): Future[Boolean] = {
    (n1, n2) match {
      case (Some(Node(d1, l1, r1)), Some(Node(d2, l2, r2))) => {
        if (d1 != d2)
          Future.successful(false)
        else if (level > 0) {
          val leftR = differentPar(l1, l2, level - 1)
          val rightR = differentPar(r1, r2, level - 1)
          combineOr(leftR, rightR)
        } else {
          Future.successful(differentOpt(l1, l2) || differentOpt(r1, r2))
        }
      }

      case _ => Future(false)
    }
  }

  private def combineOr(f1: Future[Boolean], f2: Future[Boolean]): Future[Boolean] = {
    val p = Promise[Boolean]()
    bind(p, f1, f2)
    bind(p, f2, f1)
    p.future
  }

  private def bind(p: Promise[Boolean], f: Future[Boolean], other: Future[Boolean]) {
    f.onComplete {
      case Success(x) => if (!x) p.completeWith(other) else p.trySuccess(true)
      case Failure(t) => p.tryFailure(t)
    }
  }

} 
```

DifferentSequential 将比较尽可能少的节点并使用简单的模式匹配。我还尝试了一个版本，它开始同时检查树的几个分支。

**注意：**此代码未经测试

# php - 是否可以使用 __toString 魔术方法返回几个变量？

> ID：15706905
> 
> 赞同：0
> 
> 时间：2013-03-29T16:06:32.513
> 
> 标签：php, class

我有一个有 4 个变量的类，我想将它们单独打印为字符串。（在不同的地方打印它们）。

这是该类的一部分：（如您所见，我使用 __tostring 方法仅返回一个变量，但我想将其用于所有变量。）

```
class dash
{
public $name;
public $msg;
public $msg_date;
public $votes;

function __construct($name,$msg,$msg_date,$votes){
$this->name=$name;
$this->msg=$msg;
$this->msg_date=$msg_date;
$this->votes=$votes;}

public function __toString(){
return $this->name;
} 
```

我必须在这里打印它：

```
function repliesView(){
$arr=objectsToArr();
$count=count($arr)-1;
for($i=0;$i<=$count;$count--){
echo "<p>name:$arr[$count]->name<br />"; 
echo "msg:$arr[$count]->msg<br />";
echo "date:arr[$count]->msg_date</p>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:11:04.507

`__toString`应该将整个对象表示为字符串。

就[OOP](http://en.wikipedia.org/wiki/Object-oriented_programming)而言，您应该简单地为每个字段设置一个 get 方法，以便轻松检索它们。最终您可以使用`__toString`来检索最常见的字段，以节省一些代码（仍然不是一个很好的做法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:08:19.940

您可能可以编写一个执行此操作但不使用`__toString`. `__toString`是一个特殊的功能，你不应该真的用它来做任何对应用程序至关重要的事情。使用它进行调试和检查。

* * *

```
function toHTML() {
    return "<p>" . htmlentities($this->name) . "<br />"
      . "msg: " . htmlentities($this->msg) . "<br />"
      . "date: " . htmlentities($this->msg_date) . "</p>";
} 
```

然后：

```
function repliesView() {
    $arr = objectsToArr();
    $count = count($arr)-1;
    for ($i = 0; $i <= $count; $count--) {
        echo $arr[$count]->toHTML();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:14:14.450

该`__toString()`方法在这里不会有太大帮助，但您始终可以执行以下操作：

```
class dash
{
    public $name;
    public $msg;
    public $msg_date;
    public $votes;
    function __construct($name, $msg, $msg_date, $votes) {
        $this->name = $name;
        $this->msg = $msg;
        $this->msg_date = $msg_date;
        $this->votes = $votes;
    }
    public function getName() {
        return($this->name);
    }
    public function getMsg() {
        return($this->msg);
    }
    public function getMsgDate() {
        return($this->msg_date);
    }
    public function getVotes() {
        return($this->votes);
    }
} 
```

然后在初始化类后调用方法：

```
$dash = new dash("John Doe", "Message text", "12/4/13", 4);
echo($dash->getName());
// Which would return John Doe 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:44:47.340

我认为你混淆了什么`__toString()`。`__toString()`当您尝试将对象用作字符串时执行。

例如：

```
class Dash {
    public function __tostring() { return 'Hello'; }
}

$obj = new Dash();
echo (string) $obj;

>> Hello 
```

如果您希望能够访问对象中的私有/受保护成员变量，请使用`__get()`.

例如：

```
class Dash {
    protected $var1, $var2;
    public function __get($k) { 
        if ($k === 'var1' || $k === 'var2') {
            return (string) $this->$k; 
        }
    }
}

$obj = new Dash();
echo $obj->var1;
echo $obj->var2; 
```

# python - Python中的生成器生成素数

> ID：15706911
> 
> 赞同：4
> 
> 时间：2013-03-29T16:07:05.503
> 
> 标签：python, generator, primes

我需要在 Python 中使用生成器生成素数。这是我的代码：

```
def genPrimes():
    yield 2
    x=2
    while True:
        x+=1
        for p in genPrimes():
            if (x%p)==0:
                break
        else:
            yield x 
```

我有一个 RuntimeError: maximum recursion depth exceeded after the 2nd prime.next() 当我运行它时。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T19:17:23.750

生成素数的最快方法是使用筛子。这里我们使用 Eratosthenes 的分段筛来生成素数，一个一个没有最大值，按顺序生成；`ps`是小于当前最大值的筛选素数列表，是当前段`qs`中对应的最小倍数的偏移量。`ps`

```
def genPrimes():
    def isPrime(n):
        if n % 2 == 0: return n == 2
        d = 3
        while d * d <= n:
            if n % d == 0: return False
            d += 2
        return True
    def init(): # change to Sieve of Eratosthenes
        ps, qs, sieve = [], [], [True] * 50000
        p, m = 3, 0
        while p * p <= 100000:
            if isPrime(p):
                ps.insert(0, p)
                qs.insert(0, p + (p-1) / 2)
                m += 1
            p += 2
        for i in xrange(m):
            for j in xrange(qs[i], 50000, ps[i]):
                sieve[j] = False
        return m, ps, qs, sieve
    def advance(m, ps, qs, sieve, bottom):
        for i in xrange(50000): sieve[i] = True
        for i in xrange(m):
            qs[i] = (qs[i] - 50000) % ps[i]
        p = ps[0] + 2
        while p * p <= bottom + 100000:
            if isPrime(p):
                ps.insert(0, p)
                qs.insert(0, (p*p - bottom - 1)/2)
                m += 1
            p += 2
        for i in xrange(m):
            for j in xrange(qs[i], 50000, ps[i]):
                sieve[j] = False
        return m, ps, qs, sieve
    m, ps, qs, sieve = init()
    bottom, i = 0, 1
    yield 2
    while True:
        if i == 50000:
            bottom = bottom + 100000
            m, ps, qs, sieve = advance(m, ps, qs, sieve, bottom)
            i = 0
        elif sieve[i]:
            yield bottom + i + i + 1
            i += 1
        else: i += 1 
```

一个简单的`isPrime`使用试除法就足够了，因为它将被限制为*n*的第四个根。段大小`2 * delta`任意设置为 100000。此方法需要 O(sqrt *n* ) 空间用于筛分素数以及用于筛子的恒定空间。

`isPrime`使用轮子生成候选素数并使用基于 2、7 和 61 基的强伪素测试来测试候选素数的速度较慢但节省空间；这对 2^32 有效。

```
def genPrimes(): # valid to 2^32
    def isPrime(n):
        def isSpsp(n, a):
            d, s = n-1, 0
            while d % 2 == 0:
                d /= 2; s += 1
            t = pow(a,d,n)
            if t == 1: return True
            while s > 0:
                if t == n-1: return True
                t = (t*t) % n; s -= 1
            return False
        for p in [2, 7, 61]:
            if n % p == 0: return n == p
            if not isSpsp(n, p): return False
        return True
    w, wheel = 0, [1,2,2,4,2,4,2,4,6,2,6,4,2,4,\
        6,6,2,6,4,2,6,4,6,8,4,2,4,2,4,8,6,4,6,\
        2,4,6,2,6,6,4,2,4,6,2,6,4,2,4,2,10,2,10]
    p = 2; yield p
    while True:
        p = p + wheel[w]
        w = 4 if w == 51 else w + 1
        if isPrime(p): yield p 
```

如果你对使用素数编程感兴趣，我在我的博客上谦虚地推荐[这篇文章。](http://programmingpraxis.com/essays)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-29T16:10:54.730

`genPrimes()`无条件地用完全相同的参数调用自己。这导致无限递归。

这是使用（非递归）生成器的一种方法：

```
def gen_primes():
    n = 2
    primes = set()
    while True:
        for p in primes:
            if n % p == 0:
                break
        else:
            primes.add(n)
            yield n
        n += 1 
```

请注意，这是为了简单和清晰而不是性能而优化的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T16:11:37.740

找到素数的好方法。`n`是停止搜索的上限。

```
def prime(i, primes):
    for prime in primes:
        if not (i == prime or i % prime):
            return False
    primes.add(i)
    return i

def find_primes(n):
    primes = set([2])
    i, p = 2, 0
    while True:
        if prime(i, primes):
            p += 1
            if p == n:
                return primes
        i += 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-08T10:35:30.897

这是一个不使用筛子的快速而清晰的命令式素数生成器：

```
def gen_primes():
    n = 2
    primes = []
    while True:
        is_prime = True
        for p in primes:
            if p*p > n:
                break
            if n % p == 0:
                is_prime = False
                break
        if is_prime:
            primes.append(n)
            yield n
        n += 1 
```

它几乎与**NPE**的答案相同，但包括一个根测试，它显着加快了大素数的生成。结果是列表的*O(n)*空间使用量`primes`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-16T17:31:13.757

再简洁一点：

```
import itertools

def check_prime(n, primes):
    for p in primes:
        if not n % p:
            return False
    return True

def prime_sieve():
    primes = set()
    for n in itertools.count(2):
        if check_prime(n, primes):
            primes.add(n)
            yield n 
```

你可以像这样使用它：

```
g = prime_sieve()
   g.next()
=> 2
   g.next()
=> 3
   g.next()
=> 5
   g.next()
=> 7
   g.next()
=> 11 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-30T07:18:34.330

*非常*好！`genPrimes()`当达到平方根时，您只是忘记停止从内部取素数`x`。就这样。

```
def genPrimes():
    yield 2 
    x=2
    while True:
        x+=1
        for p in genPrimes():
            if p*p > x:        # 
                yield x        #
                break          # 
            if (x%p)==0:
                break
        # else:
        #    yield x 
```

没有它，你就会滑出深渊，或者是什么表情。当蛇吃自己的尾巴时，它必须停在中间。如果它到达它的头，就没有更多的蛇了（好吧，这里吃的方向相反，但它仍然适用......）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-20T14:35:36.083

这是一个生成从 2 到给定数字的素数列表的脚本

```
from math import sqrt
next = 2
n = int(raw_input())
y = [i for i in range(2, n+1)]
while y.index(next)+1 != len(y) and next < sqrt(n):
    y = filter(lambda x: x%next !=0 or x==next, y)
    next = y[y.index(next)+1]
print y 
```

这只是[埃拉托色尼筛法的](https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)另一种实现。

# logging - 使用 PowerShell 更改 TFS 注册表中的 NotificationJobLogLevel 设置

> ID：15706912
> 
> 赞同：1
> 
> 时间：2013-03-29T16:07:07.947
> 
> 标签：logging, powershell

我正在尝试为 TFS 2012 启用电子邮件警报通知。

我正在研究[TFS 2012 Team Alerts not sent emails](https://stackoverflow.com/questions/14566315/tfs-2012-team-alerts-not-sending-emails/14732225#14732225)中的答案，它提供了有关如何启用电子邮件通知的非常详细的描述。在所有设置之后它仍然无法正常工作并且仍然没有发送邮件。

因此我想检查 TFS 作业历史记录并找到这篇文章：http: [//blogs.msdn.com/b/granth/archive/2009/10/28/tfs2010-diagnosing-email-and-soap-subscription-failures .aspx](http://blogs.msdn.com/b/granth/archive/2009/10/28/tfs2010-diagnosing-email-and-soap-subscription-failures.aspx)

正如预期的那样，它给了我一条消息，指出某些消息未发送并且发生了一些错误：

```
There were errors or warnings during notification delivery.    
0/6 emails delivered.  
0/0 soap notifications delivered.   
6 errors.  0 warnings.    
Set /Service/Integration/Settings/NotificationJobLogLevel in the TF registry to 2 to see errors and warnings. 
```

因此，我尝试按照建议将 NotificationJobLogLevel 更改为 2，并查看完整的日志和堆栈跟踪。

本文提供了有关如何执行此操作的非常详细的分步说明：http: [//blogs.msdn.com/b/granth/archive/2009/10/28/tfs2010-diagnosing-email-and-soap-subscription- failures.aspx](http://blogs.msdn.com/b/granth/archive/2009/10/28/tfs2010-diagnosing-email-and-soap-subscription-failures.aspx)以及如何使用 powershell 更改设置。

但是运行脚本的以下部分不起作用：

```
# Load client OM assembly. 
[Reflection.Assembly]::Load("Microsoft.TeamFoundation.Client, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"); 
```

并导致以下错误：

![在此处输入图像描述](../Images/f689b650215b7b45e4d138f5daa0ac11.png)

我再次查看该问题并在这里发现了类似的问题：[Loading TFS assembly error](https://stackoverflow.com/questions/12920110/loading-tfs-assembly-error)

在那里，他建议将 .dll 复制到与执行的 powershell 脚本相同的文件夹中，我这样做了。但同样，脚本找不到 .dll 文件。

如果你们对我做错了什么有任何提示或帮助，我将不胜感激。

**编辑：**另外，如果还有另一种可能来更改 TFS 注册表项（可能直接使用 regedit？），如果你们让我知道，我会很高兴。我正在寻找该注册表项，但没有找到。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:36:47.983

您想加载`11.0`不是`10.0`Team Foundation 客户端程序集的版本：

`[Reflection.Assembly]::Load("Microsoft.TeamFoundation.Client, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a");`

前几天我不得不在我们的服务器上执行此操作。

# java - java GUI setText 和 append 在另一个类中不起作用

> ID：15706917
> 
> 赞同：1
> 
> 时间：2013-03-29T16:07:11.573
> 
> 标签：java, swing, client-server, jtextarea, settext

我刚刚开始查看客户端和服务器，并且正在将客户端链接到 gui，到目前为止，我已经做到了，所以当您在`JTextField`（称为“输入”）中输入文本时，它会将其发送到`Client.java`并打印出来以确保它作品。但是，当我设置要发回的东西并附加到`JTextArea`（称为“输出”）时，它会被发送出去并且可以打印出来，但它没有设置为`JTextArea`. 我也尝试过使用`setText`，但这也不起作用。

当我运行`Client.java`它时，它会在 cmd 中显示

```
sent 
```

然后在它的cmd中`ClientGUI.java`说

```
it worked. 
```

这就是要发送到 gui 而不是 cmd 的内容。

如何使其将文本附加到`JTextArea`from 类`Client`？

完整代码：

`ClientGUI.java:`

```
private void InputActionPerformed(java.awt.event.ActionEvent evt) {
    String input = Input.getText();
    Client c = new Client();
    c.input(input);
}                                     

public void output() {
    Output.append("it worked.");
    //Output.append(null);
} 
```

`Client.java:`

```
public void input(String input) {
    System.out.println(input);
}

public void startUP() {
    System.out.println("sent");
    ClientGUI cg = new ClientGUI();
}

public static void main(String args[]) {          
    Client c = new Client();
    c.startUP();
    new ClientGUI().setVisible(true);

    try {
        Socket skt = new Socket("localhost", 1234);
        BufferedReader in = new BufferedReader(new
            InputStreamReader(skt.getInputStream()));
        System.out.print("Received string: '");

        while (!in.ready()) {}
        String output = in.readLine();
        System.out.println(output); // Read one line and output it

        System.out.print("'\n");
        in.close();
    }
    catch(Exception e) {
        System.out.print("Whoops! It didn't work!\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:20:42.103

在`main`方法内而不是：

```
new ClientGUI().setVisible(true); 
```

采用：

```
ClientGUI cgui = new ClientGUI();
cgui.setVisible(true); 
```

改变 ：

```
c.startUP(); 
```

到

```
c.startUP(cgui); 
```

并改变`startUP`方法`Client.java`如下：

```
 public void startUP(final ClientGUI cg){
       new java.util.Timer().schedule( 
        new java.util.TimerTask() {
            @Override
            public void run() 
            {
                 System.out.println("sent");
                 cg.output();
            }
        }, 
        5000 
); 
```

# jquery - 动画时打印进度条的百分比

> ID：15706925
> 
> 赞同：0
> 
> 时间：2013-03-29T16:07:40.153
> 
> 标签：jquery, html, css, progress-bar, progress

我正在开发一个 html 看起来像这样的进度条

```
<div class="progressbar"><div class="text">%0 Completed</div>
            <div class="progressbar_inner"></div>
        </div> 
```

并为此使用了这个 jquery 代码：

```
$(".progressbar_inner").animate({
                width:"20%"
            },100,function(){
                $(".text").html("%20 Completed");
                }); 
```

我的问题是：我想在动画开始和完成时打印进度条的百分比。像这样：%1 已完成 %2 已完成等等。有人帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:28:46.007

您可以使用animate-function的*step选项：*

```
$(".progressbar_inner").animate(
    {width:"50%"},
    {duration: 1000,
     step: function(current_number){
       $(".text").html(Math.floor(current_number) + "% Completed");
     }
    }
); 
```

看实际操作：http: [//jsfiddle.net/willemvb/JRqVw/](http://jsfiddle.net/willemvb/JRqVw/)

# javascript - 在页面加载时隐藏 DIV

> ID：15706927
> 
> 赞同：0
> 
> 时间：2013-03-29T16:07:52.800
> 
> 标签：javascript, html, css

我试图隐藏一个 DIV 元素，该元素在页面加载时包含一堆其他子元素，但它似乎不能正常工作。
此页面是一个弹出窗口，使用 window.open 打开，我在其中附加了一些我自己的自定义信息。
这个 DIV 问题默认来自服务器，我无法控制它，唯一可能的方法是通过 javascript。
到目前为止我所拥有的：

```
require(["dojo/ready", "dojo/query"], function(ready, query) {
        ready(function(){
           console.log("This statement is being logged fine.....");
           hideMyForm();                 
        });
  });

function hideMyForm()
{
 var elem = document.getElementById('divInQuestion');
 elem.display = 'none';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:09:57.573

采用`elem.style.display = 'none';`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T16:10:13.753

用这个：

```
elem.style.display = 'none'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:11:34.833

你为什么不选择 jQuery？包括 jQuery，然后使用 $('#divInQuestion').hide();

# python - 在 Mountain Lion 操作系统上安装 PyGame

> ID：15706930
> 
> 赞同：5
> 
> 时间：2013-03-29T16:08:11.787
> 
> 标签：python, macos, pygame, osx-mountain-lion

好吧，我已经彻底放弃了。

我已经尝试了大约一千种不同的演练来解决我的问题，在我能找到的每个网站上，但我要么卡住了，没有人知道答案，要么就是不起作用。

那么有没有人知道将 PyGame 安装到 Mountain Lion 上的答案，他们知道 100% 有效，并且他们可以像我 6 岁一样引导我完成它？

我只想运行 PyGame，这让我发疯。

干杯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T16:48:22.870

好的，我正在运行 OSX 10.8.3 (Python 2.7.3)，我在大约 15 分钟内启动并运行了 pygame (1.9.1)。

这就是我所做的。我很久以前就酿造了我的 Python，所以我忘记了那里的步骤。我似乎记得在`\usr\local`. 无论如何，我会假设你可以尽可能地使用谷歌来弄清楚在这里做什么。

1.  下载自制软件
2.  `brew install python27`如果你没有它
3.  `pip install numpy`如果你没有它。
4.  `brew install sdl`
5.  `brew install sdl_gfx sdl_image sdl_mixer sdl_ttf`
6.  下载适用于 Unix 架构的 pygame v1.9.1 源代码。
7.  cp ~/Downloads/pygame-1.9.1release.tar.gz /tmp/pygame-1.9.1.tar.gz` 或任何地方。转到那个目录。
8.  `sudo tar -xvf pygame-1.9.1.tar.gz`
9.  `sudo python config.py`应该失败并提示编辑`Setup`
10.  `sudo emacs Setup`，或您最喜欢的文本编辑器。
11.  查找 SDL、FONT、IMAGE 和 MIXER 的条目。
12.  `SDL = -I/usr/local/include/SDL -L/usr/local/lib -lSDL`分别用、`FONT = -lSDL_ttf`、`IMAGE = -lSDL_image`和替换它们`MIXER = -lSDL_mixer`。
13.  `cd src`, `emacs scale_mmx64.c`. 查找所有出现的`movsxl`with `movslq`。您应该找到两个事件。
14.  `cd ..`和`sudo python setup.py install`

我只检查了我可以从 Python 中的提示符加载 pygame，我没有检查其他任何内容。

参考：

[http://jalada.co.uk/2011/06/17/installing-pygame-on-os-x-with-a-homebrew-python-2-7-install.html](http://jalada.co.uk/2011/06/17/installing-pygame-on-os-x-with-a-homebrew-python-2-7-install.html) [在 Mountain Lion 上安装 Pygame 时出错](https://stackoverflow.com/questions/11954497/error-when-installing-pygame-on-mountain-lion)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T16:24:17.113

如果你安装了[MacPorts](http://www.macports.com)，你可以`sudo port install pyXX-game`在 XX 是你的 macports python 版本的地方运行，从 24 到 27 和 31 到 32。这样它会自动处理你所有的依赖关系，理论上应该可以开箱即用，假设你的系统默认设置为使用 macports python。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-06T18:11:14.107

这是我关于如何在不调整配置​​文件 + 手动安装的情况下安装 Pygame 的步骤。

我正在运行 OSX 10.9.2 (Python 2.7.7)，并且刚刚运行了 pygame (1.9.2a0)。

假设你已经安装了**homebrew、python**和**pip**。

```
brew install libvorbis sdl sdl_image sdl_mixer sdl_ttf portmidi
brew install mercurial
# activate virtual env or use sudo:
pip install hg+http://bitbucket.org/pygame/pygame 
```

[Pygame官方解答](https://bitbucket.org/pygame/pygame/issue/82/homebrew-on-leopard-fails-to-install#comment-8540088)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-26T16:00:28.547

我刚刚遇到这个问题，目前，我的 pygame 安装似乎没问题。

我首先尝试使用 Homebrew 安装 python (2.7.5) 和 pygame。通过 Homebrew 安装它们后，我能够在 python 控制台上导入 pygame 模块。但是，当我尝试使用一些 jpg 图像运行 pygame 应用程序时，出现错误“pygame.error：文件不是 Windows BMP 文件”。这个错误意味着只有 BMP 图像可以在 pygame 应用程序中使用（不合理），并且它似乎可以通过为 Mac OS X 10.3 安装以前的 pygame 二进制文件来修复，如此[处](https://stackoverflow.com/questions/17810834/pygame-error-file-is-not-a-windows-bmp-file-mac-osx)所述。由于我是从可用的 Homebrew 软件包中安装它的，因此我无法选择任何版本。对于这种情况，BenDundee 给出的解决方案可能会解决问题，因为他使用 python 安装了 pygame。

我决定尝试 Macports 来解决我的问题。您可以查阅页面[http://astrofrog.github.io/macports-python/](http://astrofrog.github.io/macports-python/)以获取有关通过 Macports 安装 python 的更多信息。安装好python后，假设你安装的是2.7.5版本，包是python27，你应该安装py27-game包来获取pygame。这是真正对我有用的解决方案。

# python - 在 Python 中使用访问器的正确方法？

> ID：15706935
> 
> 赞同：19
> 
> 时间：2013-03-29T16:08:28.803
> 
> 标签：python, python-2.7

这是您如何在 Python 中定义具有属性“Speed”的类“Car”吗？我的背景是 Java，似乎没有人在 Python 中使用 get/set 方法。

```
class Car(object):
    def __init__(self):
        self._speed = 100

    @property
    def speed(self):
        return self._speed

    @speed.setter
    def speed(self, value):
        self._speed = value 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-29T16:13:27.347

在 Python 中，我们通常*避免*使用getter 和 setter。只要有一个`.speed`属性：

```
class Car(object):
    speed = 0

    def __init__(self):
        self.speed = 100 
```

请参阅[Python 不是 Java](http://dirtsimple.org/2004/12/python-is-not-java.html)以了解动机和要避免的更多陷阱：

> 在 Java 中，您必须使用 getter 和 setter，因为使用公共字段使您没有机会回头改变主意以使用 getter 和 setter。因此，在 Java 中，您不妨先把繁琐的事情排除在外。在 Python 中，这很愚蠢，因为您可以从普通属性开始并随时改变主意，而不会影响类的任何客户端。所以，不要写 getter 和 setter。

`property`当您在获取、设置或删除属性时真正需要执行代码时使用。验证、缓存、副作用等都是属性的合理用例。*除非必要*，否则不要使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:22:08.477

由于从技术上讲属性在 Python 中从来都不是私有的，因此 get/set 方法不被视为“pythonic”。这是访问对象属性的标准方法：

```
class MyClass():
    def __init__(self):
        self.my_attr = 3

obj1 = MyClass()
print obj1.my_attr #will print 3
obj1.my_attr = 7
print obj1.my_attr #will print 7 
```

当然，您可能仍然使用 getter 和 setter，并且您可以通过添加`__`属性来模拟私有成员：

```
class MyClass():
    def __init__(self):
        self.__my_attr = 3
    def set_my_attr(self,val):
        self.__my_attr = val
    def get_my_attr(self):
        return self.__my_attr

obj1 = MyClass()
print obj1.get_my_attr() #will print 3
obj1.set_my_attr(7)
print obj1.get_my_attr() #will print 7 
```

The `__` "mangles" the variable name: from outside some class `classname` in which `__attr` is defined, `__attr` is renamed as `_classname__attr`; in the above example, instead of using the getters and setters, we could simply use `obj1._MyClass__my_attr`. So `__` discourages external use of attributes, but it doesn't prohibit it in the same way that the Java `private` modifier does.

There are also, as you mention in your question, properties available in Python. The advantage of properties is that you can use them to implement functions that return or set values that, from outside the class, appear to be simply accessed as normal member attributes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:16:18.233

我会去寻找属性，比如：

```
class Car(object):
    def __init__(self):
        self.speed = 100 
```

您可以在其中更改并以完全相同的方式获得它。该`@property`表示法可能更多地用于包装使用 Java/C get/set 方法、虚拟属性的类，或者如果您需要操作正在输入的值。

我经常在 GUI 类中使用它，我可以轻松地根据小部件的更改属性强制重绘屏幕，这是一种自定义事件系统。

# safari-extension - 安装扩展程序时 Safari 是否会触发消息？

> ID：15706941
> 
> 赞同：2
> 
> 时间：2013-03-29T16:08:42.133
> 
> 标签：safari-extension

我正在设置一个网页，用户可以从中安装我们的扩展程序。当用户设法安装它时，我想说“恭喜”。

我找不到任何可以听的东西来检测这一点。安装扩展程序时，Safari 是否会触发任何消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:39:42.863

我之前做过类似的事情，只是将代码放在全局页面中，并使用隐藏的设置项来确保它只在第一次运行：

```
if (!safari.extension.settings.hasRun) {
    safari.extension.settings.hasRun = true;
    alert('Congratulations!');
} 
```

需要注意的一件事是，任何注入的脚本只会在新加载的页面上或在刷新后注入。所以使用上面的代码向注入的脚本发送消息来修改当前打开的页面的内容有点棘手。您要么必须强制刷新，要么只打开一个带有欢迎消息的选项卡：

```
if (!safari.extension.settings.hasRun) {
    safari.extension.settings.hasRun = true;
    safari.application.openBrowserWindow();
    safari.application.activeBrowserWindow.activeTab.url  = "http://www.example.com/welcome";
} 
```

# delphi - 如何释放通用 TList ?

> ID：15706943
> 
> 赞同：31
> 
> 时间：2013-03-29T16:08:49.760
> 
> 标签：delphi, generics, generic-list

释放通用列表，如,`TList<string>`或, where声明如下：`TList<Double>``TList<Integer>``TList<TMyRecord>``TMyRecord`

```
type
  TMyRecord = record
    MyString: string;
    MyDouble: Double;
    MyInteger: Integer;
  end; 
```

需要任何额外的工作还是`MyList.Free`足够了？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-29T16:12:07.300

**执行摘要**

`MyList.Free`足够了。

**详细解答**

`TList<T>`通用容器拥有其内容。当您释放容器时，内容也会被处理掉。

现在，如果`T`是非托管引用（指针或类），则列表拥有该引用。它不拥有引用所指的内容。因此，如果您有`TList<TObject>`，添加一些对象，然后释放列表，引用将被释放，但对象仍然存在。所以，要解决这个问题，有`TObjectList<T>`. 该容器可以配置为拥有对象以及引用，因此在适当的时候处置对象。

现在，在您的方案中，您的每个列表都包含值类型或托管类型。该列表拥有这些对象并在销毁时处理它们。因此，对于您的所有列表，`MyList.Free`仅此而已。

# java - Eclipse：在可以抛出异常的块中查找行

> ID：15706944
> 
> 赞同：5
> 
> 时间：2013-03-29T16:08:53.213
> 
> 标签：java, eclipse, jsp, exception

我正在查看看起来像的代码

```
try {
     // Lots of things here.
     // More than I'd like to individually hover over every time I see this
} 
catch (Exception e) {
     // doesn't matter
} 
```

对于 try 块中的任何特定方法，我可以找到它抛出的已检查异常。有没有办法突出显示所有可能引发检查异常的行？

一般来说，我想我可能会删除 catch 块，将方法签名更改为抛出异常，此时，我可以看到方法中抛出异常的所有行（没关系：请参阅更新）。

在这种情况下，这甚至不会很好地工作，因为代码在 JSP 中。

注意：如果重要的话，我使用的是 MyEclipse 标准。

更新：标记出现已打开，但在这种情况下根本不做任何事情。我问这个问题是因为我认为有关上下文的某些东西导致了这种预期的行为，但它看起来像是一个奇怪的边缘情况或错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:16:20.630

在 Eclipse 中，如果启用“突出显示事件”并 select `Exception`，它将突出显示所有抛出被 catch 块捕获的（已检查）异常的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:37:54.337

将光标放在 catch 子句中“异常”一词（或您捕获的任何类型的异常）的中间。“异常”一词和所有引发此类异常的方法调用将自动标记为灰色背景突出显示。此功能在 Eclipse 中称为“标记事件”。

如果您在 Eclipse 安装中没有看到这种情况，请点击`Alt``Shift``O`（O like Occurances）一次以切换该功能并重复上述工作流程。[或使用工具栏按钮（此工具栏按钮列表中的](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/ref-java-editor.htm&cp=1_4_8)第二个条目）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-29T16:12:04.280

您可以阅读该类的参考手册以了解特定方法可以抛出什么异常。请记住，java 有两种异常：选中和未选中。对于未经检查的异常，该方法不必声明它可以抛出异常（例如 RuntimeException）

我还建议您使用一些 IDE，例如 Eclipse，它会立即告诉您一行是否可以抛出异常并且您没有处理它 - 然后您可以用 try-catch 包装它或让方法抛出它单击鼠标。

# linux - 即使对于“pktcount * pktsize”< SO_RCVBUF，linux socket recv 缓冲区数据包也会丢失

> ID：15706949
> 
> 赞同：3
> 
> 时间：2013-03-29T16:09:00.293
> 
> 标签：linux, networking

我将 icmp echo 发送到 C 程序中的 250 个节点。套接字是这样创建的

```
sfd = socket(PF_INET, SOCK_RAW, IPPROTO_ICMP); 
```

我有getsockopt SO_RCVBUF :262142 .ie 262KB 因为一个数据包需要84字节（包括IP，100字节在线），rcv缓冲区应该能够容纳262142/84 = 3120个数据包

```
sysctl parameters  (defaults)
net.core.rmem_max     = 131071
net.core.rmem_default = 113664 
```

但是有10+滴。

我正在发送所有回显请求，然后使用 recvfrom() 获取数据包。很明显，replypacks 是在 socket 的 rcv 缓冲区中积累起来的，但是 rcv 缓冲区足够大，可以容纳 3120 个数据包。

数据包在接收主机上以 ehteral 正确显示。

当我设置：

```
sysctl -w net.core.rmem_max=1048576
and SO_RCVBUF to 2MB, the drops were 0. 
```

为什么会这样？

很少有队列在行动。

1.  网卡环形缓冲区。
2.  nic 到内核 que
3.  每个套接字 rcv 缓冲区

我猜 net.core.rmem_max 只会改变每个套接字 rcv 缓冲区。

任何指向正确方向的链接。

```
Platform Linux suse10/x86 
```

## 网卡：英特尔公司 PRO/无线 2200BG

-- 添加更多

我禁用了上述无线接口并开始使用有线接口以太网控制器：Broadcom Corporation NetXtreme BCM5705M_2 Gigabit Ethernet (rev 03) 情况发生了显着变化。

```
net.core.netdev_budget = 300
net.core.netdev_max_backlog = 1000
net.core.rmem_max = 131071
net.core.wmem_max = 131071

getsockopt SO_RCVBUF :262142
getsockopt SO_SNDBUF :262142
# ethtool -g eth1
Current hardware settings:
RX:             200
TX:             200
#

eth1 txqueuelen:1000 
```

现在它就像每 250 个数据包 0 丢包和每 1000 个更改 rx,tx 大约 170 次，使用 ethtool -G 从默认值 200 但这没有效果。

然后我更改了每个套接字 rcv 缓冲区最大值

```
sysctl -w net.core.rmem_max=1024000 
```

这允许每 6000 滴 0 滴和每 7000 滴 500 滴

进一步增加 per-socket-rcv-buffer-max

```
sysctl -w net.core.rmem_max=2048000 
```

每 7000 个数据包 0 丢包

有线网络给出了更加一致和合作的结果。

但是当 262142 字节缓冲区可以容纳 3000 个大小为 84 的数据包（带有 IP 标头）时，问题仍然存在，为什么在 1000 个数据包时会发生丢包。即使在线数据包最大为 100 字节，262142 也可以容纳 2600 个数据包。

ethereal 大部分时间都能够获取数据包，并且 ifconfig 计数器显示没有丢弃，因此这是 nic 驱动程序将数据包提供给内核之后的事情。

ethereal 也错过了一些数据包，但这种情况较少发生。

通过仅更改上述这些

```
sysctl -w net.core.rmem_max=1024000 
```

掉落 96/1000 掉落 0/6000

## 下降 500/7000

```
sysctl -w net.core.rmem_max=2048000 
```

## 掉落 0/7000

```
sysctl -w net.core.rmem_max=512000
sysctl -w net.core.netdev_max_backlog=3000 
```

## 掉落 0/3000

```
sysctl -w net.core.rmem_max=256000
sysctl -w net.core.netdev_max_backlog=3000 
```

## 下降 1400/3000

```
hold = 2 * 1024 * 1024;
setsockopt(sfd, SOL_SOCKET, SO_RCVBUF, (char *)&hold, sizeof(hold));

for(;;) 
...
 if(recvfrom(sfd,(char *)packet, packlen, 0, (struct sockaddr *)&from, &fromlen)) < 0) {
    rcvcount++;
    process_packet(packet,packlen);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T04:11:51.320

（从 nntp:comp.os.linux.networking 转发我的答案）

以下代码回答了我的问题。

[http://lxr.linux.no/#linux+v3.8.7/net/core/sock.c#L689](http://lxr.linux.no/#linux+v3.8.7/net/core/sock.c#L689)

```
708set_rcvbuf:
709             sk->sk_userlocks |= SOCK_RCVBUF_LOCK;
710             /*
711              * We double it on the way in to account for
712              * "struct sk_buff" etc. overhead.   Applications
713              * assume that the SO_RCVBUF setting they make will
714              * allow that much actual data to be received on that
715              * socket.
716              *
717              * Applications are unaware that "struct sk_buff" and
718              * other overheads allocate from the receive buffer
719              * during socket buffer allocation.
720              *
721              * And after considering the possible alternatives,
722              * returning the value we actually used in getsockopt
723              * is the most desirable behavior.
724              */
725              sk->sk_rcvbuf = max_t(u32, val * 2, SOCK_MIN_RCVBUF);
726              break; 
```

由于我的数据包低于 100 字节数据，因此 sk_buff 开销会相当高。从视觉上看 sk_buff，对于 32 位系统，sk_buff 的大小似乎在 200 字节左右。

对于 100 字节在线数据包，这意味着只有三分之一的 rcvbuf 保存数据包数据。2/3 是 sk_buff 开销。

所以对于 SO_RCVBUF :262142,

262142/3 = 87380 字节可用于数据包数据。

87380/100 = 873 是可以容纳在其中的数据包数。

预计 1000 - 873 = 127 次下降（1000 次）。

我得到的是170，与预期相差不远。

以下章节/书籍真的很有帮助。

[1] Christian Benvenuti 理解 Linux 网络内部
第三部分：传输和接收

[2] Sreekrishnan Venkateswaran
第 15 章的基本 Linux 设备驱动程序。网络接口卡

*   苏林德

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-29T16:14:53.847

这是一个很长的镜头，但由于您没有显示完整的代码，它*可能*与防火墙有关。一些恶意软件变种使用 ICMP 数据包风暴，因此如果有防火墙软件正在运行，则可能会阻碍其运行。

# asp.net - 如何使用 where 子句从 2 个不同的表中检索数据

> ID：15706952
> 
> 赞同：0
> 
> 时间：2013-03-29T16:09:03.847
> 
> 标签：asp.net, sql, gridview

我有两个表`[basic]`，`[info]`都有一个主键`email_id`。现在我想从`basic`表中检索信息，但`where`子句应该从两个表中都有搜索条件

例子：

```
SELECT DISTINCT 
    basic.f_name, 
    basic.l_name 
FROM 
    basic 
CROSS JOIN 
    info 
WHERE 
    (basic.email_id = basic.email_id) 
    AND (basic.caste LIKE '%' + @caste + '%') 
    AND (info.diet =  @diet ) 
```

（此查询是用 asp 为 gridview 编写的，但它不起作用）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T16:13:14.757

```
SELECT basic.f_name, basic.l_name 
FROM basic INNER JOIN info ON basic.email_id = info.email_id 
WHERE (basic.caste LIKE '%' + @caste + '%') AND (info.diet = @diet ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:21:50.897

当您进行内部连接时，您实际上是在使用带有 where 子句的交叉连接。在内部连接中，所有数据都被组合（笛卡尔积），然后使用 where 子句进行过滤。因此，我认为您的代码使用内部连接会更干净。

```
SELECT DISTINCT basic.f_name, basic.l_name 
FROM basic 
CROSS JOIN info 
WHERE (basic.email_id = basic.email_id) 
```

相当于

```
SELECT basic.f_name, basic.l_name 
FROM basic INNER JOIN info ON basic.email_id = info.email_id 
```

我认为这可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:24:14.320

使用内部[联接](http://www.w3schools.com/sql/sql_join_inner.asp)

```
SELECT DISTINCT 
    basic.f_name, 
    basic.l_name 
FROM 
    basic as basic
INNER JOIN 
    info as info 
    ON basic.email_id = info.email_id
WHERE 
    (basic.caste LIKE '%' + @caste + '%') 
    AND (info.diet =  @diet ) 
```

# jakarta-ee - 如何使用带有 Spring RowMapper 的 RowSetDynaClass 来检索 ResultSet 的所有行？

> ID：15706958
> 
> 赞同：0
> 
> 时间：2013-03-29T16:09:26.073
> 
> 标签：jakarta-ee, spring-jdbc

我的 Oracle DB 中有一个存储过程，它返回一个 CURSOR 并且工作正常。我想在没有任何对象持久性的情况下在 Java 中检索游标的数据。我唯一的目标是将其显示到屏幕上。由于我将有几十个存储过程，并且我不想为每个存储过程创建一个新的 RowMapper，所以我尝试使用 RowSetDynaClass。

我继承了 Spring StoredProcedure 对象，如下所示：

```
public abstract class AbstractReport extends StoredProcedure {

    public static final String KEY_REPORT_RESULT = "profiles";

    public AbstractReport(DataSource dataSource, String sprocName) {
        super(dataSource, sprocName);
        declareParameter(new SqlOutParameter(
                KEY_REPORT_RESULT,
                oracle.jdbc.OracleTypes.CURSOR,
                new RowMapper() {
                    public RowSetDynaClass mapRow(ResultSet argResults, int argRowNum ) throws SQLException {
                        return new RowSetDynaClass(argResults);
                    }
                })
        );
//      declareParameter(new SqlOutParameter(
//              "test",
//              oracle.jdbc.OracleTypes.CURSOR,
//              new RowMapper() {
//                  public String[] mapRow(ResultSet argResults, int argRowNum ) throws SQLException {
//                      return new String[]{argResults.getString(1), argResults.getString(2), argResults.getString(3)};
//                  }
//              })
//        );
        compile();
    }

    @SuppressWarnings("unchecked")
    public Map<String, Object> computeReport(Map<String, Object> params){
        return super.execute(params);
    }
...

} 
```

这被称为：

```
public List<String[]> computeReport(Map<String, Object> params, ReportEnum report) throws EptServiceException {
        List<String[]> result;

        try {
            logger.debug("Computing report " + report);
            AbstractReport procedure = getReport(report);

            Map<String, Object> rawResult = procedure.computeReport(params);
            logger.info("rawResult:" + rawResult);
            result = generateReportOutput(rawResult);
        } catch (EptServiceException e) {
            throw e;
        } catch (Exception e) {
            logger.error("Error while computing report:" + report, e);
            throw new EptServiceException(EsbPortalError.ERROR_PORTAL_UNKNOWN, e);
        }

        return result;
    } 
```

除了我从结果中遗漏了一行之外，所有这些工作几乎都非常好......当我在 SQL 中执行存储过程时，我有 3 个结果。如果我使用像上面评论中的那样简单的 RowMapper，我会得到 3 个结果。

**But if I use RowSetDynaClass I get one object with 2 rows, instead of the 3 expected.** I know it doesn't make much sense (at least it doesn't for me) but there must be something stupid I'm missing.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:22:13.453

I finally figured it out (mostly). I couldn't find a way to make it work using RowMapper interface. Thus, I used the ResultSetExtractor object as following:

```
declareParameter(new SqlOutParameter(
            KEY_REPORT_RESULT,
            oracle.jdbc.OracleTypes.CURSOR,
            new ResultSetExtractor() {

                @Override
                public Object extractData(ResultSet rs) throws SQLException,
                        DataAccessException {
                    return new RowSetDynaClass(rs);
                }
            })
); 
```

This output me the correct three results I was expecting. As for why RowMapper does not work but this one does I don't know.

# google-app-engine - 有什么方法可以增加我的项目的搜索 API 配额吗？

> ID：15706963
> 
> 赞同：0
> 
> 时间：2013-03-29T16:09:39.517
> 
> 标签：google-app-engine

我们提出了一些新的需求，我们希望使用搜索 API 来满足这些需求。但是对于加载我们的数据来说，配额太低了。配额等式的查询限制方面没有问题。

是否有适当的请求机制来增加搜索 API 配额？我知道它仍处于实验阶段，但它似乎已经处于这种状态有一段时间了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:30:25.960

在 Search Api 的[配额部分](https://developers.google.com/appengine/docs/python/search/overview#Quotas)，有一条注释：

> Google 期望在此实验阶段提供的免费配额足以测试实验性 API。如果您需要额外配额，请[在此处](https://docs.google.com/a/google.com/spreadsheet/viewform?pli=1&formkey=dFFJUi1GUW1mVGpOQllJUjBUOUVJUUE6MQ#gid=0)申请。

链接是[https://docs.google.com/a/google.com/spreadsheet/viewform?pli=1&formkey=dFFJUi1GUW1mVGpOQllJUjBUOUVJUUE6MQ#gid=0](https://docs.google.com/a/google.com/spreadsheet/viewform?pli=1&formkey=dFFJUi1GUW1mVGpOQllJUjBUOUVJUUE6MQ#gid=0)

# javascript - 在“类”之间共享方法和属性

> ID：15706967
> 
> 赞同：1
> 
> 时间：2013-03-29T16:09:51.623
> 
> 标签：javascript, oop

我在 javascript 中有一个“基类”，在下面的示例中我称之为“main”。我想在我创建的所有子类上使用主类中的一些方法和变量。

我在下面用我目前的想法做了两个例子。我想后者是首选，因为我将创建 的一些实例`main`，而且我听说`prototype`在拥有多个实例时这很有用。

我应该使用这两种方法中的任何一种，还是尝试在“类”之间创建继承？如果首选继承，请提供一个示例，因为我不知道如何实现它。

```
var main = (function(){

    var out = function() {};

    out.staticMethod = function(){
        alert('hello world');
    };

    return out;

})();

var child = (function(main){

    var out = function() {};

    out.prototype.useMainFunction = function(){
        main.staticMethod();
    };

    return out;

})(main);

var c = new child();
c.useMainFunction(); 
```

[http://jsfiddle.net/mQPFJ/](http://jsfiddle.net/mQPFJ/)

```
var main = (function(){

    var out = function() {};

    out.prototype.publicMethod = function(){
        alert('hello world');
    };

    return out;

})();

var child = (function(main){

    var out = function() {};

    out.prototype.useMainFunction = function(){
        main.publicMethod();
    };

    return out;

})(new main());

var c = new child();
c.useMainFunction(); 
```

[http://jsfiddle.net/mQPFJ/1/](http://jsfiddle.net/mQPFJ/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T16:15:25.710

我将建议一种不同的方法：

```
function Main(){
  this.message = "Parent";
}

Main.prototype.out = function(){
    alert(this.message);
};

function Child(){
   this.message = "Child";
};

Child.prototype = new Main();

var child = new Child();
child.out();

var main = new Main();
main.out(); 
```

这种方法使用`function constructor`. 第一个类`main`被赋予一个属性`out`，它被分配了一个函数。第二个类`Child`将其原型分配给 的新实例`Main`，从而在两个类之间创建继承。

**工作示例：http:** [//jsfiddle.net/8QW46/](http://jsfiddle.net/8QW46/)

**关于您关于哪种方法最好的问题**

我建议使用不使用原型的第一种方法。我建议这样做的原因是您实际上并未使用类（在 Javascript 中，类被更好地描述为对象定义）。您创建函数的实例。通常原型用于向类的所有实例添加函数。

这是使用您的方法无法实现的示例，可通过类/对象定义获得：http: [//jsfiddle.net/smmb3/](http://jsfiddle.net/smmb3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:33:32.310

```
function Main(){
    this.out = function(message){
        alert(message);
    }
}

function Child(){
    this.message = "no more hello world programs";
}

Child.prototype = new Main;

var kid = new Child;
kid.out(kid.message); 
```

与@Kevin 的答案类似，但它比您当前的代码更简洁，而且更[干燥。](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)

# ios - 如何在 ios 6 上创建和保存 EKCalendar

> ID：15706969
> 
> 赞同：15
> 
> 时间：2013-03-29T16:09:54.013
> 
> 标签：ios, objective-c, ios6, calendar

我在创建 EKCalendar 时遇到问题，一切看起来都很好，但是当我去列出我的日历时，它没有显示出来。我还去我的日历应用程序中检查我的日历列表，但它不存在。有什么想法吗？

这是我创建日历的按钮代码：

```
- (IBAction)one:(id)sender {
NSString* calendarName = @"My Cal";
EKCalendar* calendar;

// Get the calendar source
EKSource* localSource;
for (EKSource* source in eventStore.sources) {
    if (source.sourceType == EKSourceTypeLocal)
    {
        localSource = source;
        break;
    }
}

if (!localSource)
    return;

calendar = [EKCalendar calendarWithEventStore:eventStore];
calendar.source = localSource;
calendar.title = calendarName;

NSError* error;
bool success= [eventStore saveCalendar:calendar commit:YES error:&error];
if (error != nil)
{
    NSLog(error.description);
    // TODO: error handling here
}
NSLog(@"cal id = %@", calendar.calendarIdentifier);
} 
```

这是我列出日历的按钮代码，但我的新日历从未包含在内！

```
- (IBAction)two:(id)sender {

NSArray *calendars = [eventStore calendarsForEntityType:EKEntityTypeEvent];

for (EKCalendar* cal in calendars){
    NSLog(@"%@",cal.title);
}

} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-12T20:45:49.073

我找到了解决方案。问题是当 iCloud 日历打开时，它会从日历应用程序中隐藏本地创建的日历。要绕过这个问题，解决方案是向 iCloud 源添加一个新日历：

```
 for (EKSource *source in self.eventStore.sources)
    {
        if (source.sourceType == EKSourceTypeCalDAV && 
           [source.title isEqualToString:@"iCloud"]) //Couldn't find better way, if there is, then tell me too. :)
        {
            localSource = source;
            break;
        }
    }

    if (localSource == nil)
    {
        for (EKSource *source in self.eventStore.sources)
        {
            if (source.sourceType == EKSourceTypeLocal)
            {
                localSource = source;
                break;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-30T15:46:45.433

我也有这个问题。我的解决方案几乎与其他答案一样，但我使用另一种方式来获取 EKSource 的实例。

如文档中所述：

```
/* 
 * Returns the calendar that events should be added to by default, 
 * as set in the Settings application.
 */
@property EKCalendar *defaultCalendarForNewEvents; 
```

因此，我使用此代码来获取正确的 EKSource：

```
EKSource *theSource = [self.eventStore defaultCalendarForNewEvents].source; 
```

**但是**，如果您使用**Gmail**（或 Yahoo 等）等其他日历，则无法将日历添加到其来源。

在这种罕见的情况下，我使用完整搜索：

```
EKSource *theSource;
for (EKSource *source in eventStore.sources) {
    if (source.sourceType == EKSourceTypeSubscribed) {
        theSource = source;
        break; // stop when source is found
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-29T16:30:15.963

您是否尝试过首先检查授权设置以确保用户已授予访问商店的权限？

对于`EKEventStore`文档：

```
+ (EKAuthorizationStatus)authorizationStatusForEntityType:(EKEntityType)entityType

- (void)requestAccessToEntityType:(EKEntityType)entityType completion:(EKEventStoreRequestAccessCompletionHandler)completion 
```

**重要提示**：如果您的应用以前从未请求过访问权限，则您必须先请求访问事件或提醒，然后再尝试获取或创建它们。如果您在使用此方法提示用户访问之前请求数据，则需要使用 reset 方法重置事件存储，以便在用户授予访问权限后开始接收数据。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-13T23:45:08.060

本地商店可能不支持事件。如果启用了 iCloud，这是可以重现的。

这是我能找到的最可靠的解决方案，无需硬编码任何假设：

```
 let calendar = EKCalendar(forEntityType: .Event, eventStore: eventStore)

    if eventStore.sources.count == 0 { // reproducible after Reset Content and Settings
        calendar.source = EKSource()
    }
    else {
        calendar.source = eventStore.defaultCalendarForNewEvents.source
    }

    eventStore.saveCalendar(calendar, commit: true) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-05T20:43:24.463

我有同样的问题。我按照 sixcent 的建议做了，并让应用程序请求许可。这解决了一部分，但日历仍然没有显示，而是根据 NSLogs 创建的。我的手机上有一个 Exchange 日历（我没有 iCloud），不得不将其关闭。一旦被删除，它就会显示为本地日历。当我回去重新添加 Exchange 时，它​​询问我是否要保留两者，现在两个日历都显示了。下面是我的代码。

```
#import "ViewController.h"
#import <EventKit/EventKit.h>
#import <EventKitUI/EventKitUI.h>

@interface ViewController ()
@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];  

EKEventStore *store = [[EKEventStore alloc] init];
EKSource *localSource = nil;
for (EKSource *source in store.sources)
{
    if (source.sourceType == EKSourceTypeCalDAV && [source.title isEqualToString:@"iCloud"])
    {
        localSource = source;
        break;
    }
}
if (localSource == nil)
{        
    for (EKSource *source in store.sources) {
        if (source.sourceType == EKSourceTypeLocal)
        {
            localSource = source;
            break;
        }
    }
}

EKEventStore *es = [[EKEventStore alloc] init];
[es requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
    /* This code will run when uses has made his/her choice */

    if (error)
    {
        // display error message here
    }
    else if (!granted)
    {
        // display access denied error message here
    }
    else
    {
        // access granted          
    }

}];

//NSString *identifier; //Use to create for the first time and store somewhere
NSString *identifier = @"704A1304-5213-4AB3-9C7B-F6B59E3454BB"; //Stored version

//Create the calendar
EKCalendar *cal;
if (identifier == nil)
{
    cal = [EKCalendar calendarForEntityType:EKEntityTypeEvent eventStore:store];

    cal.title = @"Demo1 Calendar";
    cal.source = localSource;
    [store saveCalendar:cal commit:YES error:nil];
    NSLog(@"cal id = %@", cal.calendarIdentifier);

} else {
    //Calendar already exists!
    cal = [store calendarWithIdentifier:identifier];
    NSLog(@"cal id = %@", cal.calendarIdentifier);
}

//calendar properties
NSLog(@"%@", cal);

//Add Event to Calendar
NSLog(@"Adding event!");
EKEventStore *eventStore = [[EKEventStore alloc] init];

EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
event.title     = @"Event3";

NSDate *startDate = [NSDate date];
event.calendar = cal;
event.startDate = startDate;
event.endDate = [startDate dateByAddingTimeInterval:3600];

NSError *error = nil;
BOOL result = [eventStore saveEvent:event span:EKSpanThisEvent commit:YES error:&error];
if (result) {
    NSLog(@"Saved event to event store.");
} else {
    NSLog(@"Error saving event: %@.", error);
}

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-06T14:37:46.143

Massimo Oliviero 的解决方案对我不起作用。我遇到过同样的问题。我打电话后正在创建日历`requestAccessToEntityType`。
对我有用的是在获得重新初始化`EventStore`对象的许可后。就像权限从未更新过一样。

```
[[CalendarManager sharedManager].eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
    if (granted && error == nil) {
        // Store the returned granted value.
        [CalendarManager sharedManager].eventsAccessGranted = granted;
        if (![CalendarManager sharedManager].calendarCreated) {
            [[CalendarManager sharedManager] createCalendar];
        }
    }
    else{
        // In case of error, just log its description to the debugger.
        DebugLog(@"%@", [error localizedDescription]);
    }
}]; 
```

在日历管理器中

```
- (void)createCalendar {

_eventStore = nil;
_eventStore = [EKEventStore new];

// Create a new calendar.
EKCalendar *calendar = [EKCalendar calendarForEntityType:EKEntityTypeEvent
                                              eventStore:self.eventStore];

// Set the calendar title.
calendar.title = CALENDAR_NAME;

EKSource *theSource;

// First: Check if the user has an iCloud source set-up.
for (EKSource *source in self.eventStore.sources) {
    if (source.sourceType == EKSourceTypeCalDAV && [source.title isEqualToString:@"iCloud"]) {
        theSource = source;
        break;
    }
}

// Second: If no iCloud source is set-up / utilised, then fall back and use the local source.
if (theSource == nil) {
    for (EKSource *source in self.eventStore.sources) {
        if (source.sourceType == EKSourceTypeLocal)  {
            theSource = source;
            break;
        }
    }
}

calendar.source = theSource;

// Save and commit the calendar.
NSError *error;
[_eventStore saveCalendar:calendar commit:YES error:&error];

// If no error occurs then turn the editing mode off, store the new calendar identifier and reload the calendars.
if (error == nil) {
    self.calendarCreated = YES;
}
else {
    self.calendarCreated = NO;
    // Display the error description to the debugger.
    DebugLog(@"%@", [error localizedDescription]);
}} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-25T09:39:42.633

我不推荐最佳答案，因为它依赖于检查“iCloud”作为名称，用户可以更改名称。如果您只是想确保日历被保存并且您不一定关心它的来源，您可以这样做：

```
EKCalendar *calendar = [EKCalendar calendarForEntityType:EKEntityTypeEvent eventStore:eventStore];
calendar.title = @"Calendar name";

NSError *calendarError = nil;
for (EKSource *source in eventStore.sources) {
    // We know the birthday source is read-only
    if (source.sourceType == EKSourceTypeBirthdays) {
        continue;
    }

    calendar.source = source;
    [eventStore saveCalendar:calendar commit:YES error:&calendarError];

    // If saving succeeded, we break, otherwise we try a new source
    if (!calendarError) {
        break;
    }
} 
```

# angularjs - AngularJS：自动化流程以缩小项目

> ID：15706972
> 
> 赞同：1
> 
> 时间：2013-03-29T16:10:05.393
> 
> 标签：angularjs, automation, minify

我对使用编译器工具自动化/简化 Angular 项目很感兴趣，它可能适用于其他所有东西，但是 Angular 注入和命名空间很尴尬，无法逃避编译器知识。这样做的最佳/专业方法是什么？

谢谢，最后一件事，

```
app.controller('ctrl',['$rootScope',function($rootScope){
    ...
}]); 
```

缩小时有效，但我如何缩小

```
app.config(['$routeProvider', function($routeProvider){

}]); 
```

当我缩小连续动作时它会起作用吗？

```
app.controller(...).directive(...).run(...) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:19:06.497

检查`ngmin`( [https://github.com/btford/ngmin](https://github.com/btford/ngmin) ) 以自动将 Dependency-Injection 注释添加到 AngularJS 项目。完成此操作后，您应该能够使用任何 JavaScript 缩小器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T05:13:19.333

对于您要链接的每种方法，请使用括号 - 与您的想法完全一样。

```
app.config(['$routeProvider', function($routeProvider){ }]).run(['$http', '$rootScope',  function($http, $rootScope){ }]); 
```

# android - 单击更改 TextView 的文本颜色

> ID：15706975
> 
> 赞同：0
> 
> 时间：2013-03-29T16:10:10.783
> 
> 标签：android, text, colors, textview, android-selector

我已经阅读了很多这样的问题，并尝试了所有建议，但是当我点击文本视图上方时，颜色仍然没有改变。

还尝试使用onClick方法，将视图转换为TextView并调用方法setTextColor，也没有奏效。

这是我最后一次尝试：

XML 布局文件：

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/promptDefine"
        android:orientation="vertical"
        android:gravity="center"
         >

            <TextView
                android:textSize="20sp"
                android:onClick="addItem"
                android:clickable="true"
                android:textColor="@color/selector_txt"
                android:layout_marginTop="10dip"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:hint="@string/addItem" />
        </LinearLayout> 
```

这是我在颜色文件夹中的 selector_txt XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:color="#00ff00"/>
    <item android:state_pressed="true" android:state_enabled="false" android:color="#ff0000" />
    <item android:state_enabled="false" android:color="#0000ff" />
    <item android:color="#00f0f0"/>
</selector> 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:55:52.443

LOL 开个玩笑，这是不可能的，因为我没有文本。只有提示文本和 textColor 仅适用于文本。

解决方案：

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/promptDefine"
        android:clickable="true"
        android:orientation="vertical"
        android:gravity="center"
         >

            <TextView
                android:textSize="20sp"
                android:text="testing..."
                android:clickable="true"
                android:textColor="@color/selector_txt"
                android:layout_marginTop="10dip"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:hint="@string/addItem" />

</LinearLayout> 
```

# c# - 在新 AppDomain 中执行 API 函数的选项

> ID：15706977
> 
> 赞同：1
> 
> 时间：2013-03-29T16:10:17.023
> 
> 标签：c#

我想调用在新 AppDomain 中运行的 API（asp.net MVC 框架中的 FWIW）。我发现了一些在 AppDomain 中执行代码的选项。到目前为止，我对所看到的解决方案的冗长不满意：

我发现：

**组装执行**：

```
appDomain.ExecuteAssembly("SOMEPATH.exe"); 
```

触发可执行文件并不是进行 API 调用的好方法。我想需要传递各种参数来`Main()`代表 API 中的每个公共方法。

**反射：**

```
ObjectHandle handle = appDomain.CreateInstance("someassembly.dll", "someType");
A a = (A) handle.Unwrap();
a.SomeField = "foo"; 
```

这让我觉得 API 是一个优秀的解决方案。但是，由于复杂的设置和潜在的性能开销，我不是 Reflection 的忠实粉丝。

有没有办法在新线程中加载应用程序域，这样我就可以在不经过这些箍的情况下触发方法？换句话说，一些有效的手段：

```
Thread.Start("useThisAppdomain", 
  //do work.
  className.M();//run in new appdomain
); 
```

或之类的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:30:52.017

如果您担心对在其他域中执行的代码添加安全限制，这很可能意味着您也不能让任何该代码在原始域中运行（它不会受到限制） - 所以您很可能通常“不要泄漏类型跨越 AppDomain 边界”要求。将在一个 AppDomain 中运行的代码与另一个明确分开将最大限度地减少在其他域中创建对象的需要。在很多情况下，单个“代码运行器”类可能足以安排其他领域的工作并返回结果。您应该能够正常为每一侧编写代码（假设您不需要加载未知程序集）。

Original suggestion (before security requirement):

Assuming you are not concerned about not leaking types across App domain boundary (which is most common use of AppDomains - make some assemblies "unloadable" by constraining them to one new AppDomain).

You should be able to write helper methods that allow strongly typed creation of objects in other domain - normally such code is not possible due to "leaking" types from new domain down to original domain (and thus loading other assemblies into original domain and preventing unload/updates to assembly).

Note: thread and AppDomains are unrelated concepts - same thread can have code from multiple domains on one stack. There is no built in way to restrict a thread to "run in single app domain".

# php - array_search 布尔返回值

> ID：15706987
> 
> 赞同：2
> 
> 时间：2013-03-29T16:10:56.547
> 
> 标签：php

我一直在为 array_search 苦苦挣扎，虽然我想我现在理解了，但我只想确保我理解我的代码执行方式背后的逻辑。

我正在尝试编写一个函数，如果它不在数组中，则将元素添加到数组中，如果是，则将其删除。很简单，对吧？

```
$k = array_search($needle, $haystack)
if ( $k === FALSE ) {
    $haystack[] = $needle;
} else {
    unset($haystack[$k]);
} 
```

这是写这个最有效的方法吗？似乎应该有一种方法来分配 $k 的值，同时检查它的值是 FALSE 还是其他任何值（包括 0）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:15:26.953

您可以通过以下方式缩短代码：

```
if (($k = array_search($needle, $haystack)) === FALSE) {
    $haystack[] = $needle;
} else {
    unset($haystack[$k]);
} 
```

第一行代码执行搜索，将返回值存储在 $k 中，并检查该值是否完全等于 FALSE。

文档：[array_search](http://php.net/array_search)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:27:49.107

Your code is fine but you can do it this way:-

```
if (($k = array_search($needle, $haystack)) == FALSE) 
{
$haystack[] = $needle;
} 
else 
{
unset($haystack[$k]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:59:35.043

Outside of wrapping it with a function so you can reuse it, what you have works well. Most of the other examples are just rewriting what you've written already.

```
<?php
$haystack = array(
'5','6','7',
);

$needles = array('3','4','2','7');
print_r($haystack);

function checker($needle,$haystack){
    $k = array_search($needle, $haystack);
    if ( $k === FALSE ) {
        $haystack[] = $needle;
    } else {
        unset($haystack[$k]);
    }
    return $haystack;
}

foreach($needles as $value){
    $haystack = checker($value,$haystack);
    print_r($haystack);

}

?> 
```

# jquery - 在 jQuery 中使用模板

> ID：15706989
> 
> 赞同：0
> 
> 时间：2013-03-29T16:11:05.127
> 
> 标签：jquery

我正在寻找 Ext.Template 的 jquery 替代品。
例如。：

```
var template = new Ext.Template(
    '<div',
        '<span>{text}</span>'
    '</div>'
);
template.append('body', {text: 'my awesome template'}); 
```

jQuery中是否有任何本机，或者我必须使用插件？
H

提前致谢

# routing - CCNA 路由和交换

> ID：15706995
> 
> 赞同：3
> 
> 时间：2013-03-29T16:11:25.173
> 
> 标签：routing, cisco, subnet

我需要有关 CISCO 数据包跟踪器上的设备（交换机、路由器和 PC）的基本配置方面的帮助。有什么建议吗？

![在此处输入图像描述](../Images/3cd42fa5aef599d55b05625cf5228c06.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T13:31:47.003

我没有使用数据包跟踪器，但在我的 gns3 实验室中，我会使用 10.10.lower routerid+higher routerid.routerid

因此，r1 和 r3 之间的接口对于 r1 到 r3 来说是 10.10.13.1，而另一端是 10.10.13.3，在 r3 端和 r2 到 r3 上使用 r2 上的 10.10.23.2 和 r3 上的 10.10.23.3

然后在它们之间使用相同的设置在它们之间运行一个通用的 eigrp 设置，你就完成了。

路由器 eigrp 1

网络 0.0.0.0 0.0.0.0

在交换机上，您将使用 vlan 说 10 给该 IP 地址，然后在该接口上使用 switchport access vlan 10 命令将计算机放入该 vlan。

You will be able to ping then but again I use gns3 for my labs, make sure the switch to router link is a trunk on the switch side (encapsulation dot1q has to be configured on the router too to allow trunking)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-06T12:37:44.560

With the diagram provided, you would require more than a basic config :)

What you would require would be:

1.  A suitable routing protocol

Availble IGP(internal Gateway Protocols) routing protocols include:

RIP cost 120

OSPF cost 110

EIGRP cost 90.

If you are using a discontigous network, remember to do 'no auto-summary'.

The lower the cost the better the Protocol. This means, EIGRP wins! Yehh!!

Setting up EIGRP:

using the diagram provided, let's make R1 a sample router.

(config)# int se0/0/0

(config-int)#router eigrp 100 (where 100 is ASN and should be same an all routers)

(config-router)# network 192.168.1.0 0.0.0.3 (netork btw R1 $ R2 和通配符掩码)

(config-router)#network 10.0.0.0 0.0.0.255（R1 和 LAN 网络之间的路由）注意：通配符掩码是子网掩码的倒数 - 请查看 cisco 网站以了解详情（config-router）没有自动汇总（已经在默认在较新的 IOS 上）

执行“复制运行配置启动配置”以保存您的配置！在其他路由器上重复此过程。

建议的故障排除建议：使用 ping 验证网络连接是否正常 do 'show running-config startup-config do 'show ip int brief'

使用与其子网相对应的静态 ip 设置 PC，您就可以开始了！对于开关......只需确保接口已启动 :)

# wordpress - 是否有直接集成到现有页面并可以进行可视化定制的 ecart/电子商务插件？

> ID：15706996
> 
> 赞同：0
> 
> 时间：2013-03-29T16:11:27.247
> 
> 标签：wordpress, plugins, e-commerce

我想知道是否有人知道直接连接到现有页面的电子购物车/电子商务插件，允许运输成本和折扣代码，并且显然接受 Paypal 付款。

我希望它与现有页面集成的原因是因为我正在运行自定义构建的主题。我查看了 wp 电子商务，但不知道如何将我的主题样式集成到插件中（我对钩子一无所知，而且我对 php 的了解几乎不存在）。因此，寻找可以直接添加到现有页面和帖子的内容。我还预先构建了我的产品页面，并使用自定义库来查看产品，因此只需要一个简单的添加到购物车按钮。

我以为我已经通过 eshop 中了大奖，这本来是完美的，但事实证明，外观并不是完全可定制的。在页面内容下方，它添加了一个带有 1px 灰色边框、标题和描述的“添加到购物车”面板，所有这些都无法删除。它也不能被重新定位，并且必须留在页面内容下方。

这是一个示例页面，因此您可以看到我的意思[示例页面](http://bit.ly/Xoq20B)

我在产品页面上想要的只是添加到我选择的位置的添加到购物车按钮（使用自定义图像）（缩略图下方大图像的右下角，其底部与主图像的底部对齐），并且可能（但不是必需的）添加到卡片按钮上方的数量输入字段。

该插件需要包括运费和折扣码。

这可能吗，有人知道提供这个的插件吗？

任何帮助将不胜感激，因为我真的很难完成这个网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:00:05.593

我花了几天时间，但我找到了一个非常好的插件。

“WordPress 超简单的 Paypal 购物车”

无论如何感谢人们。等到我的 php 达到标准时，我就可以创建自己的了。

# java - 在没有 JavaBean 的情况下将 csv 转换为 JSON

> ID：15706997
> 
> 赞同：1
> 
> 时间：2013-03-29T16:11:29.483
> 
> 标签：java, json, csv

我有这个看起来像这样的 csv

```
givenName,familyNames,formattedName,middleName,honorificPrefix,honorificSuffix,Department.displayName,UserType.shortName,Address.address1,Address.address2,Email.type,Email.value
Jim,jackson,jimJackson,none,mr,none,Product,jack,Houston,USA,home,jim@gmail.com
null,jackson,null,null,null,null,null,null,Dallas,USA,work,jackson@workmail.com
null,null,null,null,null,null,null,null,null,null,office,jackie@office.com
john,lasher,johnLasher,none,mr,none,Operations,lash,Austin,USA,home,lasher@gmail.com 
```

现在，我想将所有这些数据绑定到标题行并将其转换为 json，此外，如果它们是多行的多行，则应将其转换为单个 JSON，因此上述数据应生成两个 JSON 文档，例如这个

```
{
"UserType": [
    {
        "shortName": "jack"
    }
],
"middleName": "none",
"familyNames": "jackson",
"Email": [
    {
        "value": "jim@gmail.com",
        "type": "home"
    },
    {
        "value": "jackson@workmail.com",
        "type": "work"
    },
    {
        "value": "jackie@office.com",
        "type": "office"
    }
],
"Address": [
    {
        "address1": "Houston",
        "address2": "USA"
    },
    {
        "address1": "Dallas",
        "address2": "USA"
    }
],
"honorificPrefix": "mr",
"formattedName": "jimJackson",
"givenName": "Jim",
"Department": [
    {
        "displayName": "Product"
    }
],
"honorificSuffix": "none"
}
{
"UserType": [
    {
        "shortName": "lash"
    }
],
"middleName": "none",
"familyNames": "lasher",
"Email": [
    {
        "value": "lasher@gmail.com",
        "type": "home"
    }
],
"Address": [
    {
        "address1": "Austin",
        "address2": "USA"
    }
],
"honorificPrefix": "mr",
"formattedName": "johnLasher",
"givenName": "john",
"Department": [
    {
        "displayName": "Operations"
    }
],
"honorificSuffix": "none"
} 
```

我正在使用 jcsv 来读取 csv，这就是我的代码的样子，我得到了可以将数据绑定到 JSON 中的部分，但我需要一些帮助才能在单个 json 中获取多值。

```
CSVReader<String[]> csvPersonReader = CSVReaderBuilder.newDefaultReader(new       FileReader("addresses.csv"));
    List<String[]> persons = csvPersonReader.readAll();
    JSONArray finalArray = new JSONArray();
    String temp1 = null;
    String temp2 = null;
    String duplicateField = "familyNames";
    String tempStored = null;
    ArrayList<String> multiValueAttributes = new ArrayList<String>();
    int c = 0;
    String delimiter = "\\.";

    for (int j = 1; j < persons.size(); j++) {
        for (int i = 0; i < persons.get(j).length; i++) {
            StringTokenizer headerValues = new StringTokenizer(persons.get(0)[i]);
            StringTokenizer bindingValues = new StringTokenizer(persons.get(j)[i]);
            JSONObject hasher = new JSONObject();
            ArrayList<String> EntitiesWithMultipleAttributes = new ArrayList<String>();
            JSONObject multiValueJSON = new JSONObject();
            int counter = 0;
            int finalValue = 0;
            int abc = 0;
            while (headerValues.hasMoreTokens() && bindingValues.hasMoreTokens()) {
                temp1 = headerValues.nextToken(",");
                temp2 = bindingValues.nextToken(",");
                if (temp1.equals(duplicateField) && multiValueAttributes.contains(temp2)) {
                    counter++;
                } else if (temp1.equals(duplicateField) && !multiValueAttributes.contains(temp2)) {
                    multiValueAttributes.add(c, temp2);
                    c++;
                    tempStored = temp2;
                }
                if (temp1.contains(".")) {
                    JSONArray complexEntity = new JSONArray();
                    String[] entities = temp1.split(delimiter);

                    } else if (EntitiesWithMultipleAttributes.contains(entities[0])) {
                        hasher.getJSONArray(entities[0]).getJSONObject(0).put(entities[1], temp2);
                    } else {
                        EntitiesWithMultipleAttributes.add(entities[0]);
                        JSONObject multiValueJSONFirst = new JSONObject();
                        multiValueJSONFirst.put(entities[1], temp2);
                        complexEntity.put(multiValueJSONFirst);
                        hasher.put(entities[0], complexEntity);
                    }

                } else {
                    hasher.put(temp1, temp2);
                }

            }

                finalArray.put(hasher);
        }
    } 
```

我没有任何 POJO，也无法创建一个，因此无法使用 Beans。