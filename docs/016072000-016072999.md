# StackOverflow 问答 16072000-16072999

# ruby-on-rails - rake assets:precompile 失败，没有有用的错误

> ID：16072002
> 
> 赞同：1
> 
> 时间：2013-04-17T23:28:02.010
> 
> 标签：ruby-on-rails, rake, asset-pipeline

我正在尝试预编译我的资产，但每当我尝试它时都会失败并出现错误，但除此之外没有告诉我任何其他信息，所以我不知道它来自哪里或如何找到它。我正在运行`rake assets:precompile --trace`并获得以下输出

```
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/home/nginx/.rvm/rubies/ruby-1.9.3-p327/bin/ruby /home/nginx/.rvm/gems/ruby-1.9.3-p327/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
undefined method `[]' for nil:NilClass
Command failed with status (1): [/home/nginx/.rvm/rubies/ruby-1.9.3-p327/bi...] 
```

这是完整的输出，我没有删减任何内容。如您所见，我只是收到一个错误，但没有位置或其他任何内容。

有什么方法可以轻松追踪到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:01:45.850

好的，我想通了..好吧。所以我大致知道为什么我会收到错误，但仍然不是错误的实际原因以及它是哪个文件:(

但基本上，我已经更改了由 rails 预编译的文件，并且我使用的方法是导致所有 css 文件被预编译，无论我是否将文件导入`application.css.scss`。

这导致一些 SASS mixin 没有被发现，并且由于某种原因，拥有我拥有的资产压缩设置，导致我简单地得到我最初发布的错误。

一旦我禁用了压缩，我得到了一个更有帮助的错误，最终导致我找到了最终的解决方案。

谢谢 ：）

# vb.net - 一些 Visual Basic 编程代码的问题

> ID：16072004
> 
> 赞同：0
> 
> 时间：2013-04-17T23:28:13.413
> 
> 标签：vb.net

基本上我必须设计一个水果游戏，其中会随机生成一个水果，孩子必须猜测水果的类型。如果孩子猜对了，他们会收到一条消息说恭喜，如果他们猜错了，他们会收到一条消息说“再试一次”。

我已经完成了编程，但是当我输入水果的名称时，我不知道哪里出错了。因为即使它是正确的，它也会发出一条信息说它是错误的。

我有当水果正确时的程序代码和带有它的信息。

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Button1.Visible = True ' The tools that will need to be hide when the check button is cliked
        Button2.Visible = False
        PictureBox1.Visible = False
        TextBox1.Visible = False
    If Label1.Text = "1" And TextBox2.Text = "Banana" Then ' If both are true then the following result is true
        PictureBox2.Image = My.Resources.Well_done 'my.resources.name 'The well_done picture that appears for the correct
        PictureBox2.Visible = True                                        '- answer and at the same time it has to be visble
        Label2.Text = "Congrats! " & TextBox2.Text & "! Correct answer!" 'The msg which appears for the correct answer
        Label2.Visible = True
        Me.BackColor = Color.Yellow      ' The background colour of the form 
    ElseIf Label1.Text = "2" And TextBox1.Text = "apple" Then 'Similary for apple banana and other fruits
        PictureBox2.Image = My.Resources.Well_done
        PictureBox2.Visible = True
        Label2.Text = "Congrats " & TextBox2.Text & "! Correct answer!"
        Label2.Visible = True
        Me.BackColor = Color.Green
    ElseIf Label1.Text = "3" And TextBox1.Text = "orange" Then
        PictureBox2.Image = My.Resources.Well_done
        PictureBox2.Visible = True
        Label2.Text = "Congrats " & TextBox2.Text & "! Correct answer!"
        Label2.Visible = True
        Me.BackColor = Color.Orange
    ElseIf Label1.Text = "4" And TextBox1.Text = "Strawberry" Then
        PictureBox2.Image = My.Resources.Well_done
        PictureBox2.Visible = True
        Label2.Text = "Congrats " & TextBox2.Text & "! Correct answer!"
        Label2.Visible = True
        Me.BackColor = Color.IndianRed
    ElseIf Label1.Text = "5" And TextBox1.Text = "Grapes" Then
        PictureBox2.Image = My.Resources.Well_done
        PictureBox2.Visible = True
        Label2.Text = "Congrats " & TextBox2.Text & "! Correct answer!"
        Label2.Visible = True
        Me.BackColor = Color.Green 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T23:54:47.477

您的问题的答案可能是因为外壳问题。尝试使用 ToLower() 并确保您的字符串也是小写的。

不过附带说明一下，如果您创建一个名为 Fruit 的抽象类，然后从该类派生不同类型的水果（苹果、草莓等），则可以更高效地编写此代码。然后，您可以创建一个名为 ToString() 的抽象方法，并将输入与 ToString() 方法进行比较。这将使您不必在代码中使用大量的“If”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T00:45:59.053

只是为了澄清 icemanind 所说的，您想删除字符串的任何大小写问题。我可以看到你有草莓（大写 S）和橙色（没有大写），这意味着你没有设置真正的字符串结构。请记住，当您检查字符串是否匹配时，他们必须完全按照您的测试输入。

所以你使用 .toUpper 或 .toLower。这会将文本框中的文本转换为小写或大写 - 然后您测试的字符串应该全部小写（我猜小写更容易。）

所以每一行应该更像......

```
If Label1.Text = "1" Andalso TextBox2.Text.ToLower = "banana" Then 
```

现在您可以在文本框中输入 BAnaNa，它将被测试为香蕉。另请注意，我使用过 Andalso——它对未来的使用有好处。Andalso 应该用于这些类型的测试，因为如果第一个条件有效，它只会检查第二个条件。并检查两者，即使第一个是假的。没什么大不了的，但好的做法和更好的表现。

# javascript - 通过全局变量访问具有 ID 的元素

> ID：16072012
> 
> 赞同：1
> 
> 时间：2013-04-17T23:28:34.433
> 
> 标签：javascript, html, dom, global-variables

这是一个不那么广为人知的事实，大多数* Web 浏览器为页面上的每个元素创建一个全局变量，其中包含一个`id`属性：

HTML：

```
<header id="page-header"></header> 
```

JS：

```
window['page-header'].style.fontFamily = "Comic Sans MS"; 
```

我的问题：

*   这是选择元素的可靠方法吗？
*   有什么理由`document.getElementByID`改用吗？我猜想使用全局变量访问 ID 元素会比`document.getElementByID`.

[这](http://jsbin.com/eponug/1/quiet)是一个演示。
*我已经在最新版本的 Chrome、Firefox 和 IE 中对此进行了测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T23:36:03.133

我在[jsperf](http://jsperf.com/global-dom-id-vs-getelementbyid)上对其进行了测试，使用 Chromium v​​25 getElementByID 更快

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T23:45:25.123

需要考虑的一些事项：

如果`window`对象已经有一个具有该名称的属性，它将不会被覆盖。

`img`使用该`name`属性的元素也将成为窗口对象的属性。由于 name 属性不需要是唯一的，因此可能会发生这种情况：

```
<img name="test"/>
<img name="test"/>
<img id="test"/> 
```

在一些较旧的浏览器`window.test`中会返回一个包含三个元素的 NodeList。

因此使用该`getElementById`方法更安全。

# php - PHP 验证功能。检查数字和正数

> ID：16072015
> 
> 赞同：1
> 
> 时间：2013-04-17T23:28:44.483
> 
> 标签：php

对如何编码有点困惑。用户输入数字，然后验证检查以确保它是数字和正数。用户也可以将此字段留空。

这就是我到目前为止所拥有的，它只是检查是否插入了一些东西。

```
$error_blue = check_blue($phone);
if($error_blue !=''){
    print "<p>Blue: $error_blue";
    } 
```

是在页面顶部验证项目的位置。

```
function check_blue($blue){
if(! is_numeric($blue)){
    return'Please Enter a valid number for Blue.';
}} 
```

是功能所在。任何关于在这里做什么的帮助都会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T23:33:02.997

像这样的东西？

```
function check_blue($blue) {
    if (is_numeric($blue) && $blue > -1) {
        return 1;
    }
    else {
        return 0;
    }
}

if(!check_blue($phone)) {
    return'Please Enter a valid number for Blue.';
} 
```

[查看演示](http://codepad.org/m4W8ZD3y)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:32:21.330

假设它是您期望的整数，

```
if ((int)$blue==abs($blue) || empty($blue)) $error = false;
else $error = true; 
```

然后你使用 $error 来决定做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T23:35:14.110

这里的每个人都在使用 if else。这并不是错误的，只是为了向您展示另一个想法，这可能对其他类型的验证有用，请查看验证过滤器： [http ://www.php.net/manual/en/filter.filters .validate.php](http://www.php.net/manual/en/filter.filters.validate.php) 为此，您可以使用`FILTER_VALIDATE_INT`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T00:26:39.177

您可能想使用一些简单的东西

```
function check_blue($phone) {
  return (empty($phone) || (is_numeric($phone) && $phone >= 0));
} 
```

首先检查该字段是否为空，如果是则不做任何事情。如果它不为空，则将检查其数值以及是否大于或等于零。

# android - android中的SCTP协议支持

> ID：16072016
> 
> 赞同：8
> 
> 时间：2013-04-17T23:28:52.307
> 
> 标签：android, network-programming, linux-kernel, network-protocols, sctp

如何在 Android 中使用 SCTP 协议？

我已经知道 Android 系统默认不支持 SCTP，但是可以通过插入 SCTP 内核模块或在模块配置中启用 SCTP 重新构建内核来启用它。

我需要对这个问题有所了解。是否可以？如何让android支持该协议？如何构建内核模块并正确插入？如果我们能够成功地使系统支持它，我们如何使用该协议？android 上的 Java API 是否支持 SCTP？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T23:36:52.910

使用模块进行处理是正确的方法。要回答您的问题：

*   SCTP 已作为 Linux 源代码树中的内核模块提供 - “CONFIG_IP_SCTP=m”将启用该模块。您可以将其更改为硬链接的“y”，尽管这可能不可行，因为您必须为此重建整个内核。

*   该模块仍必须按内核版本构建。所以基本上每个供应商，您需要获取他们的内核源代码（可行），然后针对它编译您的模块。

要使用：在用户模式下 - 将通过调用 s = socket (AF_INET[6], SOCK_STREAM, IPPROTO_SCTP) 创建套接字；从那时起，套接字 API 的工作方式完全相同，除了一些例外（即 setsockopt，它特定于协议类型）。

来自 Java - 实际上支持最新版本的协议（JDK7 里程碑 3），但 Java 支持它并不意味着 Dalvik（Android 的“java vm”）支持。尽管 Android 确实“准备就绪”支持 SCTP，但它还没有出现在 Dalvik 中（至少在 4.2 中没有）。不过，您可以创建一个 Java 类，就像在一个包中一样，它将用 SCTP 调用包装一个本机库。由于 NET 权限，它在 Android 中有点棘手，但仍然可以管理（根据经验）。

# jquery - “如果文件夹中存在 default.html 则”功能

> ID：16072018
> 
> 赞同：0
> 
> 时间：2013-04-17T23:28:59.240
> 
> 标签：jquery, directory

有没有一种简单的方法可以根据特定文件夹中存在或不存在的文件编写函数脚本？也许对文件夹运行 404 测试？

例如：

如果 default.html 存在于子目录预览中，则执行此操作...否则执行此操作...？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:36:15.290

你可以这样做：

```
function exists(url) {
    var request = $.ajax({
        type: 'HEAD',
        async: false,
        url: url
    });

    return request.status === 200;
} 
```

但是，我不会使用它。这是一个阻塞调用，会暂时锁定浏览器。使用函数的`error`回调`ajax`并使请求异步：

```
$.ajax({
    type: 'HEAD',
    url: url
}).fail(function(request, status, error) {
    // Error
}).done(function(data, status, request) {
    // Success
}); 
```

更好的是，根本不要这样做。

# c++ - 多线程应用程序c ++中对象的引用计数

> ID：16072028
> 
> 赞同：1
> 
> 时间：2013-04-17T23:29:51.463
> 
> 标签：c++, multithreading, reference

我正在尝试在多线程程序中实现对象的引用计数，以便在没有线程想要使用它或有人启动对象删除时删除该对象。

为此，我正在执行以下操作：

```
class refCount{
    int ref_count;

    public:
        void incr_ref_count(){
        ref_count ++;
    } 

    int decr_ref_count(){
        ref_count--;
        return ref_count; 
    }

} 
```

每当我在不同的线程中复制 obj 时，我都会使用以下代码：

```
pthread_mutex_lock(&ref_count_lock);
if(obj != NULL){
    dup_obj = obj;
    obj.incr_ref_count(); 
}
pthread_mutex_unlock(&ref_count_lock); 
```

并同时删除参考

```
pthread_mutex_lock(&ref_count_lock);
if(dup_obj != NULL){
    count = dup_obj.decr_ref_count(); 
    if(count == 0)
        delete dup_obj
}   
pthread_mutex_unlock(&ref_count_lock); 
```

我希望它能正常工作，但我认为我遇到的问题是使用互斥锁（Lock），我需要为我单独创建的每个对象都有一个互斥锁（Lock），以便我可以进行复制，并增加或减少计数，是原子的。如何实施？

**请注意，它不完全是一个工作代码，它有点 sudo 代码。**

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T00:43:42.040

锁会扼杀引用计数的性能。有关减少或消除所需锁数量的方法，请参见例如[原子引用计数指针。](http://www.drdobbs.com/atomic-reference-counting-pointers/184401888)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T00:03:19.263

对于要保护的每个对象实例，您不一定需要一个单独的锁定对象。如果您对所有对象实例使用一个锁对象，这将保证一次只有一个线程可以操作引用计数。拥有多个锁对象只会减少线程阻塞的频率。

# java - 这是访问对象的正确方法吗

> ID：16072029
> 
> 赞同：-1
> 
> 时间：2013-04-17T23:30:03.823
> 
> 标签：java, jcombobox

我正在尝试从 JCombo 框中取回对象列表

有人建议

```
private JComboBox<Object> levelComboBox;

levelComboBox = new JComboBox<Object>(logLevel);
levelComboBox.setEnabled(false); 
```

但是我很困惑这是对象的数组列表还是对真正对象类的引用的引用？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:41:09.207

查看 Oracle 网站上的泛型，这将解释它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:42:34.297

`JComboBox<Object>`是一个[`JComboBox`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComboBox.html)可以用`Object`s填充的。该`<Object>`部分称为[Generic](http://en.wikipedia.org/wiki/Generic_programming)，这里有一个关于它的[教程](http://docs.oracle.com/javase/tutorial/java/generics/)。

# ios - iOS：相对于可以通过触摸调整的点旋转一条线

> ID：16072032
> 
> 赞同：1
> 
> 时间：2013-04-17T23:30:27.633
> 
> 标签：ios, core-graphics, quartz-2d, cgaffinetransform, uibezierpath

![围绕特定点的线旋转](https://i.stack.imgur.com/vqwjk.png)

伙计，我一直在为此苦苦挣扎……

参考上图，我有一条固定到特定点的线。在这条线的另一端，我有另一个点不是固定的，可以拖动到屏幕上的任何位置。我需要这条线能够跟随该点并在不改变长度的情况下相对于它的位置进行旋转。

我知道所有这些都可以很容易地完成，而无需固定长度。

`UIBezierPath`你可以像这样简单地画一个`drawRect:`：

```
UIBezierPath *bezPath = [UIBezierPath bezierPath];
[bezPath moveToPoint:fixedPointStart];
[bezPath addLineToPoint:draggedPointEnd];
[bezPath stroke]; 
```

然后在您的 UIView 中调用`[self setNeedsDisplay]`以`-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event`传递被拖动点的新坐标并重新绘制它。

但正如我所提到的，我需要这条线特别是固定长度。

另一件事（不确定它是否会有所作为），这条线实际上是一个较大`UIBezierPath`的不规则形状的一部分。图中的“特定不动点”就是这条线对较大不规则线的附着点`UIBezierPath`。`UIBezierPath`这条线是作为您将在以下代码中看到的相同部分的一部分绘制的。

所以这就是我现在所拥有的：

```
//    I AM CREATING THE FIXED POINT HERE THAT IS BEING RETURNED BY A CUSTOM METHOD 
WHICH FINDS THE POINT OF ATTACHEMENT TO THE LARGER IRREGULAR SHAPED UIBEZIERPATH.
//    THE DRAGGABLE POINTS ARE ACTUALLY UIVIEW'S AND I'M USING THEIR ORIGINS.

CGPoint fixedPoint = [aPath findCurveBezierPathPointInBetweenTheStartPoint:point1.frame.origin
                                                             theEndPoint:topCurvePoint.frame.origin 
                                       withFirstControlPoint:topCurveFirstControlPoint.frame.origin
                   andSecondControlPoint:topCurveSecondControlPoint.frame.origin atPercentage:0.3];

//    This is the fixed point
CGPoint startPoint = fixedPoint;

//    This is the point that is going to be able to be dragged
CGPoint endPoint = topCurveFirstControlPoint.frame.origin;

//    I am finding the angle in between these two points to pass in an CGAffineTransform for the rotation. 
float angle = [self getRotatingAngle:startPoint secondPoint:endPoint];
NSLog(@"Angle in Radians: %f",angle);

//    I am creating the transform by passing in the angle and doing the necessary translations for the rotation to occur on the fixed point. 
CGAffineTransform transform = CGAffineTransformMakeTranslation(fixedPoint.x, fixedPoint.y);
transform = CGAffineTransformRotate(transform, angle);
transform = CGAffineTransformTranslate(transform,-fixedPoint.x,-fixedPoint.y);

//  I am setting up to draw the line of fixed length and applying the transform and 
[aPath moveToPoint:startPoint];
[aPath addLineToPoint:CGPointMake(fixedPoint.x, fixedPoint.y - 60)];
[aPath applyTransform:transform];

// I then continue to draw the rest of the BezierPath and stroke it at the end.    
[aPath moveToPoint:point1.frame.origin];

[aPath addCurveToPoint:topCurvePoint.frame.origin controlPoint1:topCurveFirstControlPoint.frame.origin controlPoint2:topCurveSecondControlPoint.frame.origin]; 
```

所以我的问题是：当可拖动点找到新位置时，如何找到**正确的角度**来每次转换固定线？`drawRect:`

我用来找到固定点和拖动点之间角度的方法给了我正确的角度，因为我已经测试过了。但是，我无法弄清楚如何以一种相对于可拖动点正确旋转线的方式应用这两个点之间的角度。

编辑：添加[链接](http://imgur.com/a/Rn6Cm#0)以更好地解释我正在尝试完成的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T07:07:50.007

你为什么要改造它？其简单的几何形状。您可以找到中心和当前点之间的角度。由于长度相等，所以你的路径基本上是一个圆圈。因此，使用中心点和角度找到圆上的点。假设拖动后的触摸点是currentPoint。要找到角度使用：

```
CGFloat angle = atan2f(currentPoint.y - centre.y, currentPoint.x - centre.x); 
```

现在找到对应于上述角度的圆上的点：

```
finalPoint.x = centre.x + length * cosf(angle);
finalPoint.y = centre.y + length * sinf(angle); 
```

其中长度是您的固定长度。现在您可以使用quartz-2d 在center 和finalPoint 之间画一条线。

注意：有时角度会变成负数。因此，在您的实现中，您可能希望将其转换为等效的 +ve 角度。

```
if (angle < 0)
     angle += 2 * M_PI; 
```

# android - 操作栏溢出菜单与硬件永久菜单按钮

> ID：16072033
> 
> 赞同：0
> 
> 时间：2013-04-17T23:30:28.073
> 
> 标签：android, android-actionbar

我在 Nexus 10 (Android 4.2.1) 上测试了我的应用程序，操作栏上的溢出菜单运行良好。所以当 Galaxy Note 2 上没有出现溢出菜单时，我傻眼了。在阅读了[Android 操作栏不显示溢出](https://stackoverflow.com/questions/9739498/android-action-bar-not-showing-overflow)和[How To Control use of OverFlow Menu in ICS](https://stackoverflow.com/questions/12871850/how-to-control-use-of-overflow-menu-in-ics)之后，我最终意识到 Galaxy Note 2 上有一个内置的菜单按钮，如果按下该按钮，就会出现“溢出菜单”。

对这两个问题的回答表明，不应使用那里的代码来禁用永久菜单按钮，因为虽然它具有 (a) 使溢出菜单出现在操作栏中的效果，但显然它也 (b) 强制在其他应用程序中也有相同的行为。但是，对我来说，操作栏中的溢出菜单远远优于菜单按钮，对这两个问题的评论表明其他人也这么认为。

我的问题是，有什么可能使用该代码来禁用 onResume() 中的永久菜单按钮，并在 onPause() 中重新启用它？使操作栏溢出菜单在我选择的应用程序中工作的方法有多可靠，而所有其他应用程序保持不变？

仅作记录，在我看来，Android 设计者（软件和硬件）以某种方式密谋制造了这个问题，而且没有简单的解决方案。一些程序员认为，让所有应用程序在单个设备上以相同的方式工作比让任何特定应用程序在不同设备上以相同的方式工作更重要。其他程序员则相反。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:39:01.000

正如其他人所说，你真的不应该这样做。让菜单在其他所有应用程序中都能正常工作（当然这取决于设备）。

此外，您无法影响其他应用程序中菜单按钮的行为，因此您不必担心整个 onPause/onResume 业务。

# python - Django hit counts 基于类的视图

> ID：16072034
> 
> 赞同：2
> 
> 时间：2013-04-17T23:30:35.703
> 
> 标签：python, django, django-class-based-views

我正在尝试做类似 youtube 视图的操作：

```
models.py
class Video(models.Model):
    title = models.CharField(max_length=100)
    embed = models.TextField
    created_at = models.DateTimeField(auto_now_add=True,editable=False)
    updated_at = models.DateTimeField(auto_add=True,editable=False)
    visit_count = models.IntegerField(default=0)

    def add_visit(self):
        if self.visit_count is not None:
            self.visit_count += 1
        else:
            self.visit_count = 0

views.py
class VideoDetail(DetailView):
    model = Video

    def get_context_data(self, **kwargs):
        context = super(VideoDetail, self).get_context_data(**kwargs)
        self.object.add_visit()
        self.object.save()
        return context

Example use:
    Video.objects.order_by('-visit_count') 
```

一切正常，但不完全正常，因为我可以计算 IP 限制。

```
class Video(models.Model):
    title = models.CharField(max_length=100)
    embed = models.TextField
    created_at = models.DateTimeField(auto_now_add=True,editable=False)
    updated_at = models.DateTimeField(auto_add=True,editable=False)

class Visit(models.Model):
    video = models.ForeignKey(Video)
    ip = models.IPAddressField()
    visit_count = models.IntegerField(default=0) 
```

如何在视图或模型中插入：visit_count,ip,video。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:57:29.103

在视图中：

```
def get(self, req, *k, **kw)
   is_created, visit = Visit.objects.get_or_create(this.object, ip)
   if is_created:
      this.object.add(visit)
   else: 
      visit.count +=1
      visit.save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-13T20:15:23.710

我会`add_visit()`用 IP 地址扩展你的模型方法：

```
def add_visit(self, ip):
    _, visit = Visit.objects.get_or_create(self, ip)
    visit.count += 1 
```

并按原样使用您的 DetailView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-03T05:33:07.227

您可以使用**get_object**是检索对象的方法

```
from django.utils import timezone
from django.views.generic import DetailView
from books.models import Author

class AuthorDetailView(DetailView):

    queryset = Author.objects.all()

    def get_object(self):
        obj = super().get_object()
        # Record the last accessed date
        obj.last_accessed = timezone.now()
        obj.save()
        return obj 
```

来源：[https ://docs.djangoproject.com/en/3.1/topics/class-based-views/generic-display/](https://docs.djangoproject.com/en/3.1/topics/class-based-views/generic-display/)

# centos - 安装Redmine的问题

> ID：16072036
> 
> 赞同：0
> 
> 时间：2013-04-17T23:30:46.117
> 
> 标签：centos, redmine

我正在尝试在 asmallorange.com 服务器上安装 Redmine。它安装了 ruby​​ 和 rails。我从捆绑安装开始

```
user@server.com [~/public_html]# bundle install
Fetching gem metadata from https://rubygems.org/.........
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Using rake (10.0.4)
Using i18n (0.6.1)
Using multi_json (1.7.2)
Using activesupport (3.2.13)

Bundler::GemspecError: Could not read gem at /usr/local/lib/ruby/gems/1.9.1/cach
e/builder-3.0.0.gem. It may be corrupted.
An error occurred while installing builder (3.0.0), and Bundler cannot continue.
Make sure that `gem install builder -v '3.0.0'` succeeds before bundling. 
```

然后我输入 gem install builder -v '3.0.0'

```
user@server.com [~/public_html]# gem install builder -v '3.0.0'
Successfully installed builder-3.0.0
unable to convert "\xF1" from ASCII-8BIT to UTF-8 for test/performance.rb, skipp
ing
unable to convert "\xF1" from ASCII-8BIT to UTF-8 for README.rdoc, skipping
unable to convert "\xF1" from ASCII-8BIT to UTF-8 for README, skipping
1 gem installed
user@server.com [~/public_html]# 
```

我从这里去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T17:20:00.053

**我建议您从“ \RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\cache ”中删除缓存文件并重新运行捆绑安装。**

# powershell - Powershell -sta（公寓状态）是首选吗？

> ID：16072041
> 
> 赞同：9
> 
> 时间：2013-04-17T23:30:55.403
> 
> 标签：powershell, sta

在过去的几个月里，我一直在涉足 Powershell (2.0)，并且很想用它来现代化和标准化一些工作流程——主要是基于 DOS 的流程。由于工作的性质，可能同时执行大约 100 次相同的脚本。

首先——以这种方式使用 Powershell “安全”吗？我已经看到 -STA 作为一个执行选项 - 在同时执行大量相同脚本时使用 Powershell 的首选方法是，还是仅在绝对必要时使用？在我的搜索中，我还没有真正想出“我什么时候应该使用公寓状态？”的答案。我*相信*我打算做的大部分脚本（如果不是全部的话）都不会被线程化。

提前感谢任何可以了解 Powershell 公寓状态的人！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T01:28:25.777

在 PSv2 中，控制台主机作为 MTA 运行，ISE 作为 STA 运行。在 PSv3 中，控制台[默认为 STA](http://blogs.technet.com/b/heyscriptingguy/archive/2013/02/09/weekend-scripter-playing-around-with-powershell-namespace-apartmentstate.aspx)。

您可以通过以下方式查看您的公寓状态：

```
[System.Threading.Thread]::CurrentThread.GetApartmentState() 
```

唯一需要使用 STA 的时候是在 .NET 中使用某些类来处理使用它的 COM 对象，例如`System.Windows.Forms.Clipboard`.

我知道有两种方法可以更改为 STA：

```
powershell.exe -Sta -File MyScript.ps1 
```

或者

```
$ps = [PowerShell]::Create()
$rs = [RunSpaceFactory]::CreateRunspace()
$rs.ApartmentState = "STA"
$rs.ThreadOptions = "ReuseThread"
$rs.Open()
$ps.Runspace = $rs
$ps.AddScript( { ([System.Threading.Thread]::CurrentThread.GetApartmentState()) } ).Invoke() 
```

所以问题真的是为什么 PSv2 控制台 MTA 而不是 STA？当我想知道为什么 PS 团队会做出这样的决定时，我通常会参考 Bruce Payette 的 PowerShell in Action 一书。不幸的是，它没有说明原因。它只是说有一些需要 STA 的 COM 对象，如果您的脚本不起作用，请尝试将其作为 STA 重新运行。

# jquery - 有一个单选按钮作为基值检查

> ID：16072042
> 
> 赞同：0
> 
> 时间：2013-04-17T23:30:55.770
> 
> 标签：jquery

我已经完成了我的代码，最终得到了 2 个可能的基本价格。**学生基数 = 249.99 美元，助理 = 399.99 美元。**

每个选项都可以选择添加：

椅子 99.99 美元和/或桌子 99.99 美元。

截至目前，我的代码无法识别助手选项（399.99 美元），也无法进行正确的数学运算。总而言之：如果选择了助手选项，它应该被替换为新的基础价格。

**如何获得在 2 个选项之间切换并识别复选框值的基本价格？**

我做了一个[小提琴](http://jsfiddle.net/3SNFy/12/)来更好地展示我正在使用的东西。

提前谢谢你的帮助。

```
// check if assistant or student
$('input[name=type]').on('change', function(){
    if($(this).prop('value') == 1) {
        // if assistant
        var originalAmount = 399.99;
        $('span.amount').html(originalAmount);
    }else {
        // else student
        var originalAmount = 249.99;
        $('span.amount').html(originalAmount);
    }
});
// check the current amount
originalAmount = Number($('span.amount').html().replace(/[^0-9\.]+/g,""));
$(':checkbox').change(function(){
    sum = originalAmount;
    var names = $(':checked').map(function(){
        sum += (this.value - 0);
        return this.name;
    }).get().join(',');
    $('span.amount').text('$' + sum);
    spans[1].innerHTML = sum;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:35:42.153

这是一个工作小提琴：

[http://jsfiddle.net/3SNFy/18/](http://jsfiddle.net/3SNFy/18/)

基本上，将 OriginalAmount 更改为 originalAmount in

```
$('span.amount').html(originalAmount); 
```

此外，您希望在全局级别声明该变量以使数学正常工作。

**编辑：** 更新小提琴以考虑单选按钮更改以及复选框的选择。

[http://jsfiddle.net/3SNFy/19/](http://jsfiddle.net/3SNFy/19/)

# ruby - 如何使用 RVM 只升级一个项目 ruby 解释器？

> ID：16072045
> 
> 赞同：0
> 
> 时间：2013-04-17T23:31:36.310
> 
> 标签：ruby, rvm, upgrade

我只是想将我在一个项目中使用的 ruby​​ 从 1.8.7 升级到 1.9.3。但是，对于另一个当前未升级的项目，我仍然需要 1.8.7。如何使用 RVM 升级 ruby​​ 并保持 gemset 完好无损？

会`rvm upgrade 1.9.3 1.8.7`是这样做的方法吗？这不会将每个使用 1.8.7 的项目迁移到 1.9.3 吗？

* * *

**更新：**

似乎这样做的方法是使用`rvm install 1.9.3`然后为我的项目迁移 gem，如下所示：

```
rvm gemset copy 1.8.7-p352@journal 1.9.3@journal 
```

我现在要试试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:54:09.980

RVM 在其沙箱中一次支持多个 Ruby，这就是它存在的原因。因此，没有必要将 1.8.7 升级到 1.9.3。您可以使用单独的 Ruby 版本，和/或项目的 gemsets，或不同的路径，具体取决于您希望如何设置。

虽然您可以从*1.8.7*升级到 1.9.3，但我建议将 1.8.7 保留在其最终版本，并在其最终版本（当前为 p392）安装一个单独的 1.9.3 版本，以便在两者之间进行轻松测试为了兼容性。还要安装 Ruby v2.0.0，并在它的更新出现时，使用 RVM 将它们升级到最新版本，并根据需要删除旧版本。

我认为你的：

```
rvm gemset copy 1.8.7-p352@journal 1.9.3@journal 
```

将告诉 RVM 在 1.9.3 中安装相同的 gem，或者您可以使用以下过程轻松地从头开始安装它们：

1.  `rvm use 1.8.7`
2.  `gem list | awk '{print $1}' > ./gem_list`
3.  `rvm install 1.9.3`
4.  `rvm use 1.9.3`
5.  `xargs gem install < ./gem_list`

自从我这样做以来已经有一段时间了，所以我从记忆中走出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T00:01:11.787

向项目添加一个`rvmrc`文件。当您`cd`进入项目目录时，rvm 会知道要加载哪个版本的 ruby​​。然后运行`bundle install`以获取 Gemfile 中的 gem。

要安装 ruby​​ 版本并创建`rvmrc`文件，请执行以下操作：

```
$ rvm install 1.9.3-p194
$ cd your_project_dir/
$ rvm use ruby-1.9.3-p194@yourgemset --create --rvmrc
$ bundle install 
```

# php - 非对象上的 PHP fetch_array()

> ID：16072049
> 
> 赞同：0
> 
> 时间：2013-04-17T23:32:09.017
> 
> 标签：php, mysql, mysqli

我目前有这个 PHP 代码。

```
if (isset($User)){
            if (is_object($User)) {
                if (!$result_paycon = $mysqli->query("CALL CHECK_CONVENTION(" . $User->id . "," . $row_convention["IDCONVENTION"] . ")")){
                    printf("Database error");
                    exit; 
                }

                if (!$result_block = $mysqli->query("SELECT * FROM VIEW_ROOMBLOCK WHERE IDCONVENTION = " . $row_convention["IDCONVENTION"])){
                    var_dump($result_block);
                    printf("Database error");
                    exit;
                }
            }
        } 
```

无论我用它做什么，$result 块的 var 转储总是 bool(false)。然后当我需要对其使用 fetch_array 时，它只会告诉我 $result_block 是一个非对象。但是，将我的第一个查询从过程调用更改为常规选择似乎可以解决问题，因此将其完全从代码中删除也是如此。

我回应了这两个调用的 SQL 查询，如果我将它们直接插入 SQL，它们都会返回一些东西。

有什么我没有做的吗？

编辑1：仍然没有运气。但是，如果我像这样反转代码：

```
if (!$result_block = $mysqli->query("SELECT * FROM VIEW_ROOMBLOCK WHERE IDCONVENTION = " . $row_convention["IDCONVENTION"])){
                    printf("Database error");
                    exit;
                }

                if (!$result_paycon = $mysqli->query("CALL CHECK_CONVENTION(" . $User->id . "," . $row_convention["IDCONVENTION"] . ")")){
                    printf("Database error");
                    exit; 
                }

                var_dump($result_block);
                echo "<br />";
                var_dump($result_paycon); 
```

我从 var 转储中得到以下信息：

```
object(mysqli_result)#4 (5) { ["current_field"]=> int(0) ["field_count"]=> int(10) ["lengths"]=> NULL ["num_rows"]=> int(2) ["type"]=> int(0) }
object(mysqli_result)#5 (5) { ["current_field"]=> int(0) ["field_count"]=> int(2) ["lengths"]=> NULL ["num_rows"]=> int(1) ["type"]=> int(0) } 
```

但是对于以前的代码，其中一个失败了，我仍然不知道为什么。

编辑 2：我刚刚在以前的代码中打印了 mysqli 对象的错误属性的值。我得到以下信息：

> 命令不同步；你现在不能运行这个命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:11:29.713

想通了问题。我需要运行 next_result() 方法来为另一个查询/结果集准备 $mysqli 对象。正如前面 mysql 文档中的评论所暗示的那样，free_result 应该可以工作。但由于某种原因，它不适合我。

所以这有效：

```
if (isset($User)){
            if (is_object($User)) {
                if (!$result_paycon = $mysqli->query("CALL CHECK_CONVENTION(" . $User->id . "," . $row_convention["IDCONVENTION"] . ")")){
                    printf("Database error");
                    exit; 
                }
                $result_paycon->close();
                $mysqli->next_result();

                if (!$result_block = $mysqli->query("SELECT * FROM VIEW_ROOMBLOCK WHERE IDCONVENTION = " . $row_convention["IDCONVENTION"])){
                    var_dump($result_block);
                    printf("Database error");
                    exit;
                }
            }
        } 
```

# linux - 为什么在 $() 中使用管道时 bash 会执行我的脚本的 2 个实例

> ID：16072051
> 
> 赞同：1
> 
> 时间：2013-04-17T23:32:15.603
> 
> 标签：linux, bash, shell

这是我的 bash 脚本：

```
#!/bin/bash

$(find / -name "foo" | grep "bar") 
```

这是 ps 的输出：

```
$ ps fx
PID TTY      STAT   TIME COMMAND
2690 ?        Sl     1:04 gnome-terminal
5903 pts/8    Ss     0:00  \_ bash
7003 pts/8    S      0:00      \_ bash -x ./test_script.sh
7004 pts/8    S      0:00      |   \_ bash -x ./test_script.sh
7005 pts/8    S      0:00      |       \_ find / -name foo
7006 pts/8    S      0:00      |       \_ grep bar

$ ps aux

USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
1000      7003  0.0  0.0   5172  1108 pts/8    S    16:23   0:00 bash -x ./test_script.sh
1000      7004  0.0  0.0   5172   520 pts/8    S    16:23   0:00 bash -x ./test_script.sh
1000      7005  0.7  0.0   4720  1176 pts/8    S    16:23   0:00 find / -name foo
1000      7006  0.0  0.0   4368   824 pts/8    S    16:23   0:00 grep bar 
```

如您所见，我的脚本有 2 个实例正在执行，谁能告诉我 bash 到底在做什么？具体来说，为什么我的脚本有 2 个实例正在执行，是否有更好的方法来执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T23:39:34.707

当您运行子外壳（`$(...)`部分）时，bash 使用`fork()`系统调用创建调用进程的副本（您的子外壳命令将在其中执行）。您的脚本不会再次运行，而是命令行只是从此处的父级继承而来，因为没有 exec。在子 shell 中，bash 设置了管道，这就是您将`find`其`grep`视为子的原因。

# java - Java 中的 std::make_heap 等价物？

> ID：16072055
> 
> 赞同：1
> 
> 时间：2013-04-17T23:32:25.083
> 
> 标签：java, c++, stl

STL 有这个非常有用的功能。Java中是否有与此等价的东西？我可以编写我的自定义实现，但不要重新发明轮子会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:38:37.827

`std::make_heap`创建一个二进制堆，用作优先级队列，在 Java中称为[PriorityQueue 。](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)

**更正**：Java 中没有标准的二进制堆类，但我在下面的评论中建议了两个。

# javascript - 将字符串转换为时间 JavaScript (h:m)

> ID：16072056
> 
> 赞同：12
> 
> 时间：2013-04-17T23:32:25.600
> 
> 标签：javascript, jquery, string, date, time

我和我的朋友正在做一个学校项目；任务是制作一个房间预订网站。这是我们尝试 JavaScript 的第一年，我们希望将字符串格式化为时间 (h:m)。我们房间预订网站的用户可以选择他/她想要房间的时间，输出是：H:m（24hour-clock:minutes）。例如 12:15。

因此我的问题是：是否可以将此字符串 (h:m) 转换为时间，并轻松检查用户输入的预订时间是否超过 30 分钟？所以我们可以例如说：

```
 if(start_of_reservation < start_of_reservation(+30minutes)){ 
   alert("You need to book a room atleast 30minutes"); }

 else if(start_of_reservation > start_of_reservation(+6hours)){ 
   alert("You can't book a room longer than 6 hours"); }

 else {
 // moving on..
 } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T23:43:41.663

```
var year = '2013';
var month = '04';
var day = '18';

var hour = '12';
var min = '35';

var reserv = new Date(year,month,day,hour,min)

console.log(reserv); 
```

您可能希望通过检查当前日期自行获取那些年、月和日值。这纯粹是为了展示如何将字符串转换为日期。

用于`reserv.getTime()`转换为毫秒时间，从而可以比较两次；

```
reserv.getTime() - reserv2.getTime() 
```

有关更多信息，请查看[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:45:00.230

是的。使用[正则表达式](http://www.w3schools.com/js/js_obj_regexp.asp)和[Date 对象](http://www.w3schools.com/js/js_obj_date.asp)。

RegExps 将用于从日期字符串中提取小时和分钟，

Date 对象将用于比较。

# php - 将对象作为参数传递给函数不起作用

> ID：16072057
> 
> 赞同：-1
> 
> 时间：2013-04-17T23:32:28.380
> 
> 标签：php

这似乎非常容易，但对于我的生活来说，我无法弄清楚为什么这不起作用。我试图简单地将对象传递给函数，但出现此错误：

可捕获的致命错误：传递给 write_query() 的参数 3 必须是 mysqli 的实例，给定 null，在第 28 行的 C:\xampp\htdocs\CSP\login\login.php 中调用并在 C:\xampp\htdocs\ 中定义第 40 行 CSP\php_scripts\login_script.php

这些是我的函数定义：

```
function conn_database()
    {
        if (!empty($_POST['userid']) && !empty($_POST['password']))
        {
            $conn = new mysqli('localhost', 'root', '', 'csp');

            if (mysqli_connect_errno()) 
            {
                echo 'Connection to database failed:'.mysqli_connect_error();
                exit();
            }
            return $conn;
        }

    }

function write_query($userid, $password, mysqli $conn)
    {
        $query = 'select * from authorized_users '
        ."where userid= '$userid'"
        ."and password_id='$password'";
        $result = $conn->query($query);
        return $result;
    } 
```

我这样称呼他们：

```
$conn = conn_database();
$result = write_query($userid, $password, $conn); 
```

我在 write_query() 的定义中进行了类型提示，但根据我从错误中了解到的情况，我的第三个参数不被视为 mysqli 的实例。（我知道我应该对密码进行加盐处理，我只是想让它首先工作）。任何建议，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T23:35:11.757

您的第三个参数不是 mysqli 的实例。它是空的。这是因为您的`get_connection`函数没有返回任何内容。

你为什么要检查这个：

```
if (!empty($_POST['userid']) && !empty($_POST['password'])) 
```

这意味着您的代码将仅在您为其提供发布数据的情况下尝试连接到 SQL`userid`服务器`password`。如果这是您想要的行为，您应该将`if`语句放在函数之外，如下所示：

```
if (!empty($_POST['userid']) && !empty($_POST['password']))
  $conn = conn_database();
  $result = write_query($userid, $password, $conn);
} 
```

尽管看起来`userid`并`password`没有设置，但无论如何。确保检查`name`输入的属性并执行 a`var_dump($_POST)`查看发布到脚本的内容。

# android - 如何检测添加到联系人数据库的新联系人

> ID：16072063
> 
> 赞同：3
> 
> 时间：2013-04-17T23:32:58.873
> 
> 标签：android, contacts

如何检测添加到联系人数据库的新联系人

我在 INTERNET 上找到了很多代码，但不起作用或包含错误.....

有没有一个想法不是检测新联系人的代码添加

我知道我的问题很难，但只有一个想法或一个简单的答案::)

我测试了这段代码，但它返回错误

```
ContentResolver cr = ctx.getContentResolver();

    String[] projection = new String[] { ContactsContract.Contacts._ID, ContactsContract.Contacts.DISPLAY_NAME };

    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, projection, null, null,
            ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC");

    if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
            Toast.makeText(this,cur.getString(cur.getColumnIndex(ContactsContract.Data._ID)), Toast.LENGTH_SHORT).show();
            Toast.makeText(this,cur.getString(cur.getColumnIndex(ContactsContract.Data.DISPLAY_NAME)), Toast.LENGTH_SHORT).show();

        //  System.out.println(cur.getString(cur.getColumnIndex(ContactsContract.Data._ID)));
        //  System.out.println(cur.getString(cur.getColumnIndex(ContactsContract.Data.DISPLAY_NAME)));      

        Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                new String[]{ c.getId() }, null);

        while (pCur.moveToNext()) {

            Toast.makeText(this, "Start!", Toast.LENGTH_SHORT).show();
            System.out.println(.add(pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));
        } 
        pCur.close();

            Cursor emailCur = cr.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, 
                    null, ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", 
                    new String[]{ c.getId() }, null); 

            while (emailCur.moveToNext()) { 
            System.out.println((emailCur.getString(
            emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)));
        }
        }
    }
    cur.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T09:57:48.437

首先你需要在你的主要活动中注册这个接收器——

## getContentResolver().registerContentObserver(ContactsContract.Contacts.CONTENT_URI, true,new MyCONTENTObserver());

在那之后

```
public class MyCOntentObserver extends ContentObserver {

    public MyCOntentObserver() {
        super(null);
    }

    @Override
    public void onChange(boolean selfChange) {
        super.onChange(selfChange);
        Log.d("onChange1", "~~~~~~" + selfChange);

        //getApplicationContext().startService(new Intent(MainActivity.this, SendContactService.class));
    }

    @Override
    public boolean deliverSelfNotifications() {
        Log.d("deliverSelfNotifications", "~~~~~~fg");
        return true;
    }
} 
```

# ios - ios - 更新主视图的UILabel时，子视图的位置恢复为默认值

> ID：16072066
> 
> 赞同：1
> 
> 时间：2013-04-17T23:33:13.763
> 
> 标签：ios, uiview, subview

我创建了一个包含 UIPickerView 的子视图，它在占据一半屏幕的主视图上滑动。当用户在选择器中选择一个值时，我会更新位于主视图（后面）中的 UILabel。然后问题就出现了，因为在我设置了 UILabel 值之后，子视图的位置被设置为其初始大小，改变了它的位置并混淆了我的应用程序。我需要的是在主视图中设置 UILabel 而不改变子视图的实际位置。有想法吗？

# web-services - 如何让 Web 服务告诉请求需要 SOAP 标头？

> ID：16072075
> 
> 赞同：0
> 
> 时间：2013-04-17T23:34:29.697
> 
> 标签：web-services, soap, wsdl, soapui

我创建了一个 Web 服务，用 Java 编写并使用 Eclipse 和 Axis2 生成。我在 services.xml 文件中创建了一个 ws-security 策略并创建了一个身份验证处理程序。我对 Web 服务完全陌生，如果我的陈述完全错误，请原谅。在生成 Web 服务并拥有 wsdl 之后，我创建了一个 SOAPUi 项目并生成请求。soapui 生成的请求的soap 标头为空白，因此当我运行请求时，我收到身份验证失败的安全异常。当我输入正确的标题时：

```
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" soapenv:mustUnderstand="1">
<wsu:Timestamp xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Timestamp-12468716">
<wsu:Created>2008-06-23T13:17:13.841Z</wsu:Created>
<wsu:Expires>2008-06-23T13:22:13.841Z</wsu:Expires>
</wsu:Timestamp>
<wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="UsernameToken-31571602">
<wsse:Username>alice</wsse:Username>
<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">bobPW</wsse:Password>
</wsse:UsernameToken>
</wsse:Security>
<wsa:To>http://localhost:8081/axis2/services/sample01</wsa:To>
<wsa:MessageID>urn:uuid:AEDBA74A8D1FC94B631214227032877</wsa:MessageID>
<wsa:Action>urn:echo</wsa:Action>
</soapenv:Header> 
```

然后它工作。我的 wsdl 是否缺少某些东西告诉 SoapUi 在用户名和密码字段中自动生成带有问号的标头？因为我已经将 SoapUi 用于其他 wsdl，它确实会自动生成这些标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:17:46.630

您可以在 SOAP UI 上指定用户名和密码，这可以在测试请求属性选项卡或测试属性中设置。

试试这个： http: [//www.soapui.org/SOAP-and-WSDL/authenticating-soap-requests.html](http://www.soapui.org/SOAP-and-WSDL/authenticating-soap-requests.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T13:10:39.077

是的，乔恩，你是对的。在您的 wsdl 中，您需要在请求消息结构中添加这些用户名和密码字段作为标头。您还需要在代码中实现它以从标题中获取用户名和密码并相应地执行。

您还可以在 SOAP UI 中的测试请求属性选项卡中指定用户名和密码。它将使用用户名和密码自动在您发出的肥皂请求中添加标题。如果需要，您还可以在首选项中禁用此功能。

谢谢，阿布吉

# jira - JIRA 的自定义屏幕

> ID：16072077
> 
> 赞同：0
> 
> 时间：2013-04-17T23:34:44.197
> 
> 标签：jira

我的工作流程中有几个步骤，我希望用户能够查看其他字段并编辑这些字段。有没有办法为不同的工作流程设置不同的屏幕？不是过渡，而是步骤本身。例如，我有一个分析步骤，我需要有人为问题添加额外的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:31:37.413

行为插件可以根据不同的状态使字段只读、隐藏等，例如工作流中的分析 [https://marketplace.atlassian.com/plugins/com.onresolve.jira.plugin.Behaviours](https://marketplace.atlassian.com/plugins/com.onresolve.jira.plugin.Behaviours)

# c++ - 如何更改我的 C++ 代码以使其在 C 中可用？

> ID：16072078
> 
> 赞同：0
> 
> 时间：2013-04-17T23:34:57.247
> 
> 标签：c++, c, file, class, download

我好像有问题。我试图让一个 c++ 函数在 c 代码中使用。

我试过这些方法

*   [http://www.olivierlanglois.net/idioms_for_using_cpp_in_c_programs.html](http://www.olivierlanglois.net/idioms_for_using_cpp_in_c_programs.html)
*   [从“C”代码调用“C++”类成员函数](https://stackoverflow.com/questions/3583353/calling-c-class-member-function-from-c-code)

如果我需要完全摆脱课程，那么我会的，但我不想将下载提要丢失到控制台。

这是在 c++ 中有效但在 c 中无效的代码。

```
#include <tchar.h>
#include <urlmon.h>
#pragma comment(lib,"urlmon.lib")
#include <stdio.h>

class MyCallback : public IBindStatusCallback
{
public:
    MyCallback() {}

    ~MyCallback() { }

    // This one is called by URLDownloadToFile
    STDMETHOD(OnProgress)(/* [in] */ ULONG ulProgress, /* [in] */ ULONG ulProgressMax, /* [in] */ ULONG ulStatusCode, /* [in] */ LPCWSTR wszStatusText)
    {
        printf("Downloaded %i of %i byte(s) Status Code = %i\n",ulProgress, ulProgressMax, ulStatusCode);
        return S_OK;
    }

    // The rest  don't do anything...
    STDMETHOD(OnStartBinding)(/* [in] */ DWORD dwReserved, /* [in] */ IBinding __RPC_FAR *pib)
    { return E_NOTIMPL; }

    STDMETHOD(GetPriority)(/* [out] */ LONG __RPC_FAR *pnPriority)
    { return E_NOTIMPL; }

    STDMETHOD(OnLowResource)(/* [in] */ DWORD reserved)
    { return E_NOTIMPL; }

    STDMETHOD(OnStopBinding)(/* [in] */ HRESULT hresult, /* [unique][in] */ LPCWSTR szError)
    { return E_NOTIMPL; }

    STDMETHOD(GetBindInfo)(/* [out] */ DWORD __RPC_FAR *grfBINDF, /* [unique][out][in] */ BINDINFO __RPC_FAR *pbindinfo)
    { return E_NOTIMPL; }

    STDMETHOD(OnDataAvailable)(/* [in] */ DWORD grfBSCF, /* [in] */ DWORD dwSize, /* [in] */ FORMATETC __RPC_FAR *pformatetc, /* [in] */ STGMEDIUM __RPC_FAR *pstgmed)
    { return E_NOTIMPL; }

    STDMETHOD(OnObjectAvailable)(/* [in] */ REFIID riid, /* [iid_is][in] */ IUnknown __RPC_FAR *punk)
    { return E_NOTIMPL; }

    // IUnknown stuff
    STDMETHOD_(ULONG,AddRef)()
    { return 0; }

    STDMETHOD_(ULONG,Release)()
    { return 0; }

    STDMETHOD(QueryInterface)(/* [in] */ REFIID riid, /* [iid_is][out] */ void __RPC_FAR *__RPC_FAR *ppvObject)
    { return E_NOTIMPL; }
};

int main()
{
    MyCallback pCallback;
    HRESULT url = URLDownloadToFile(NULL,_T("https://dl.dropboxusercontent.com/u/102222417/jediAcademy.zip"),_T("C:\\JKA\\file.zip"),0,&pCallback);

    if(url == S_OK)
    {
        printf("Successful!");
        getchar();
    }

    else if(url == E_OUTOFMEMORY)
    {
        printf("Not enough memory!");
    }

    else if (url == INET_E_DOWNLOAD_FAILURE)
    {
        printf("ERROR: INET invalid resource");
    }
    return 0;
} 
```

在 C 代码中运行时会出现此错误

```
1>------ Build started: Project: Downloader++, Configuration: Debug
Win32 ------ 2012\projects\downloader++\downloader++\main.c(101):
error C2061: syntax error : identifier 'MyCallback'
2012\projects\downloader++\downloader++\main.c(101): error C2059:
syntax error : ';'
2012\projects\downloader++\downloader++\main.c(101): error C2059:
syntax error : ':'
2012\projects\downloader++\downloader++\main.c(150): error C2065:
'MyCallback' : undeclared identifier
2012\projects\downloader++\downloader++\main.c(150): error C2146:
syntax error : missing ';' before identifier 'pCallback'
2012\projects\downloader++\downloader++\main.c(150): error C2065:
'pCallback' : undeclared identifier 1>
studio 2012\projects\downloader++\downloader++\main.c(151): error
C2275: 'HRESULT' : illegal use of this type as an expression 1>       
c:\program files (x86)\windows kits\8.0\include\um\winnt.h(556) : see
declaration of 'HRESULT'
2012\projects\downloader++\downloader++\main.c(151): error C2146:
syntax error : missing ';' before identifier 'url'
1>c:\users\gamer\documents\visual studio
2012\projects\downloader++\downloader++\main.c(151): error C2065:
'url' : undeclared identifier 1>c:\users\gamer\documents\visual studio
2012\projects\downloader++\downloader++\main.c(151): error C2065:
'pCallback' : undeclared identifier
2012\projects\downloader++\downloader++\main.c(151): warning C4133:
'function' : incompatible types - from 'int *' to
'LPBINDSTATUSCALLBACK'
2012\projects\downloader++\downloader++\main.c(153): error C2065:
'url' : undeclared identifier
2012\projects\downloader++\downloader++\main.c(159): error C2065:
'url' : undeclared identifier
2012\projects\downloader++\downloader++\main.c(164): error C2065:
'url' : undeclared identifier 1>  Generating Code...
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:45:57.430

一种常见的技术是编写包装函数，其中指向类实例的指针在传递给 C 时被视为 a `void*`。然后，您公开一个函数，例如：

```
extern "C" MyClass_OnProgress(/* [in] */ void* instance, /* [in] */ ULONG ulProgress, /* [in] */ ULONG ulProgressMax, /* [in] */ ULONG ulStatusCode, /* [in] */ LPCWSTR wszStatusText)
{
    MyClass* _this = static_cast<MyClass*>(instance);
    _this->OnProgress(ulProgess, ulProgressMax, ulStatusCode, wszStatusText);
} 
```

**注意**：上面缺少返回类型，因为我不知道 STDMETHOD 宏将什么声明为返回值。

另外，放弃匈牙利符号。这很烦人，已经失宠了。甚至微软也建议不要在新代码中使用它。

# c - C中的按位运算：从左设置位

> ID：16072082
> 
> 赞同：4
> 
> 时间：2013-04-17T23:35:12.547
> 
> 标签：c, bitwise-operators

给定一个像 10 这样的整数，我怎么能在总共 16 位中写入 10 个 1 位（从左侧开始），如下所示：

```
11111111.11000000 
```

或者给定一个像 4 这样的整数，它会写成：

```
11110000.00000000 
```

谢谢，我还在学习 C 并且不熟悉按位运算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T23:42:04.797

`-(1 << wordsize - numbits)`应该这样做。

看看你的例子中发生了什么很有启发性。 `1 << wordsize - numbits`是`1 << 12`，这是`00010000.00000000`。回想一下`-x = ~x+1`，我们计算`~(1 << 12) = 11101111.111111`。加 1 你得到`11110000.00000000`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T23:42:58.923

实际上，int 通常是 32 位。但我只是在评论中放了 16 位，以使其更清楚。

```
int i = 0; //00000000 00000000
int mask = 65536; //10000000 00000000
int retVal = 0; //00000000 00000000
int yourAmountOfBitsToOne = 2;

for(i = 0; i < yourAmountOfBitsToOne; i++){
    retVal = retVal | (mask >> i);
}

printf("%d", retVal); 
```

如果你运行这个，输出应该是 2^16 + 2^15 = 98304。

**为什么？**

**迭代 0：**

```
line 1: retVal = 00000000 00000000 | (10000000 00000000 >> 0)
line 1: retVal = 10000000 00000000 
```

**迭代 1：**

```
line 1: retVal = 10000000 00000000 | (10000000 00000000 >> 0)
line 1: retVal = 10000000 00000000 | (01000000 00000000)
line 1: retVal = 11000000 00000000 
```

在 for 完成后，您打印的整数值`11000000 00000000`是`98304`。

现在创建一个逐位打印 int retVal 的函数，它可以让您轻松检查输出是否正确。而且学习位运算符也是一个很好的练习。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T00:15:56.877

整数通常是 32 位。如果您指的是短整数，那么：

```
unsigned short MakeMask16(unsigned short width,unsigned short offsetFromLeft)
{
    unsigned short mask = -1;
    mask <<= (sizeof(unsigned short)*8-width);
    mask >>= offsetFromLeft;
    return mask;
} 
```

或全部在一条线上：

```
unsigned short MakeMask16(unsigned short width,unsigned short offsetFromLeft)
{
    return (unsigned short(-1<<(sizeof(unsigned short)*8-width)) >> offsetFromLeft);
} 
```

请注意，如果您在右移之前不将其转换为无符号短路，那么您认为您从左侧推开的 1 仍然会存在。如果您不需要从左侧偏移，那么您可以忽略它并去掉右移。

# c++ - 在 C++ 类继承中使用函数

> ID：16072084
> 
> 赞同：1
> 
> 时间：2013-04-17T23:35:19.397
> 
> 标签：c++, oop, inheritance

我正在尝试调用`calculateInterest()`此类中的函数

```
// account.h -- handles banking accounts
#ifndef ACCOUNT_H_
#define ACCOUNT_H_
#include <string>
using std::string;

class Account
{
private:
    double balance;
public:
    Account(double b = 0.0);
    double getBalance() {return balance;}
    void credit(double c);
    void debit(double d); 
};

class SavingsAccount : public Account
{
private:
    double rate;
public:
    SavingsAccount(double r = 0.0);
    double calculateInterest();
};

class CheckingAccount : public Account
{
private:
    double fee;
public:
    CheckingAccount(double f = 0.0);
    void credit(double m);
    void debit(double m);
};

#endif 
```

到目前为止，我可以做`Account joe(100);`然后使用`Account`类内部的函数，所以我显然没有正确继承它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:42:03.467

```
class Account
{
private:
    double balance;
public:
    Account(double b = 0.0);
    double getBalance() {return balance;}
    void credit(double c);
    void debit(double d);

    // add this!
    virtual double calculateInterest() = 0;
}; 
```

您将需要在所有派生类中实现 calculateInterest

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T23:44:29.470

您目前只有基类实例。您不能使用它来调用派生类的方法。

如果您有派生类的实例，则可以使用它来调用派生类的方法。

```
SavingsAccount joe(100);
joe.calculateInterest(); 
```

由于这是派生类，您也可以调用`credit()`or `debit()`。

不相关的：如果你打算使用多态，你应该定义`credit`和作为虚函数。`debit`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T23:54:08.213

1）您的函数都不是虚拟的，因此派生类不能正确覆盖任何函数。

2) Account joe(100) 创建 Account 类的实例，而不是 SavingsAccount 类的实例。如果您想在 joe 上调用 calculateInterest，则 joe 需要是一个 SavingsAccount。Account、SavingsAccount 和 CheckingAccount 仍然是它们自己独特的类。SavingsAccount 和 CheckingAccount 继承 Account 的数据和接口，但 Account 不继承它们的数据和接口。

3）如果您想将 joe 实例化为 SavingsAccount 但将其存储并视为帐户，那么您需要创建指向 Account 的指针并将其向上转换，但如果您正在处理它，您将无法访问 SavingsAccount 函数就像一个帐户。在这种情况下，您需要将 calculateInterest 移至 Account（如果需要，将其设为纯虚拟），然后在 SavingsAccount 中覆盖它。

```
class Account
{
  // Add this to your Account class
  virtual double calculateInterest() = 0;
};

class SavingsAccount : public Account
{
  // Add this to your SavingsAccount class
  double calculateInterest() override;
}; 
```

然后将 joe 创建为 SavingsAccount，但将其视为帐户：

```
SavingsAccount joe(100);
Account* pJoe = &joe;
double val = joe->calculateInterest();  // calculateInterest is available from Account, but because it's virtual, it calls the one from SavingsAccount. 
```

如果你不想强制所有派生类实现这个功能，那么你真的需要在这里重新考虑你的整个设计。在任何情况下，解决它的一种廉价方法是使其非纯（从声明中删除 = 0，但保留虚拟）并提供返回一些默认值的默认实现。

这是一个例子：

```
class Account
{
  // Add this
  virtual double calculateInterest() { return 0.0; }
};

class SavingsAccount : public Account
{
  // Add this
  double calculateInterest() override;  // and use your existing implementation
}; 
```

现在，如果您对 SavingsAccount 调用 calculateInterest，它将返回 SavingsAccount 的返回值。如果您在 CheckingAccount 上调用 calculateInterest，它将返回 Account 提供的默认实现，即 0.0。如果您对指向 SavingsAccount 实例的 Account* 指针调用 calculateInterest，它将返回 SavingsAccount 的返回值，因为它是虚拟的。

# python-sphinx - 在 Python Sphinx 生成的文档中包含动态内容

> ID：16072086
> 
> 赞同：9
> 
> 时间：2013-04-17T23:35:22.573
> 
> 标签：python-sphinx

我正在使用 Sphinx 为我的项目生成文档，并将文档构建为产品安装过程的一部分。

我想在文本和/或代码块中动态包含主机名。我没有在文档中看到任何解释，也没有看到任何包含 shell 命令输出或特定文件中特定行以外的任何内容的工具。这个功能存在吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T07:04:29.877

这里有两个可以做到这一点的 Sphinx[扩展](https://www.sphinx-doc.org/en/master/usage/extensions/index.html)：

*   [autorun](https://pypi.org/project/sphinx-autorun/)：在指令中执行 Python 代码`runblock`，捕获输出并将其插入到文档中。
*   [programoutput](https://pypi.org/project/sphinxcontrib-programoutput/)：使用该指令执行任意命令`program-output`并将输出插入到文档中。

# virtual-machine - 让 virtualbox vm (debian/linux) 充当路由器？

> ID：16072088
> 
> 赞同：1
> 
> 时间：2013-04-17T23:35:35.560
> 
> 标签：virtual-machine, virtualbox

我想知道使 vm（我使用的是 debian/linux 机器）充当 virtualbox 中两个网络之间的路由器/转发流量的步骤是什么。我正在尝试使用一堆系统创建一个虚拟网络。我希望其中一台机器在两个子网之间路由流量。

我已经开始配置多个接口并在这些接口上添加内部网络。我不确定是否应该向我的虚拟机添加一些规则以使其像路由器一样工作并转发数据包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T16:44:46.357

You can install your virtual router as if it were a metal router. The host will have network cards for each network but most likely the external network will be isolated through iptables (firestarter is an easy way to configure this). The guest will get connected to those networks as bridged adapters. The host must have a valid connection to each network (valid address or similar) just to have the adapter up an working. Note that iptables filtering for the host occurs after redirection by vbox connection, so iptables affect the host only, and the guest will have to use its own security. You can use Internal networks to generate virtualized networks to connect several hosts.

# batch-file - 如何在不使用 PIPE 符号的情况下重写此 DOS 命令？

> ID：16072093
> 
> 赞同：0
> 
> 时间：2013-04-17T23:36:10.217
> 
> 标签：batch-file, dos, windows-task-scheduler

我使用此命令来验证是否存在特定的计划任务：

```
schtasks.exe | findstr /I /c:TaskName 
```

我需要写一些不使用管道“|”的东西 所以我尝试了这个：

```
schtasks.exe /Query /TN TaskName 
```

但它仅适用于 Windows 2008，不适用于 Windows 2003 机器，因为该`/TN`选项在 2003 年不可用。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:47:35.347

呵呵，是的。

```
schtasks /query >tmpfile && findstr /i /c:"Taskname" tmpfile 
```

不使用管道。`:>`

# c++ - ASCII战时国家作业

> ID：16072095
> 
> 赞同：-9
> 
> 时间：2013-04-17T23:36:16.410
> 
> 标签：c++

我必须制作一个转换器，将消息 `:mmZ\dxZmx]Zpgy`转换为相应的 ASCII 数字，使用这个公式

```
if(OriginalChar+Key > 126)
    EncryptedChar = 32 + ((OrgiginalChar + Key) - 127);
else
    EncryptedChar = (OrginalChar + Key); 
```

这个问题的关键是 1 到 100 之间的任何数字，所以我必须用每个可能的键尝试公式，直到发出有意义的消息。

所以谁能告诉我我做错了什么或指出我正确的方向

```
#include <iostream>
#include <cstdlib>

using namespace std;

void converter(char OriginalChar, int Key);

int main()
{
    char OriginalChar[16] = ":mmZ\\dxZmx]Zpgy";
    int Key;

    converter((int)OriginalChar, Key);

    system("pause");
    return 0;

}

void converter()(char OriginalChar, int Key)
{
    char answer;

    for (Key = 0; Key <= 100; Key++)
    {
        if (OriginalChar - Key < 32)
        {
            answer = (((OriginalChar - Key) + 127) - 32);
        }
        else
        {
            answer = (OriginalChar - Key);
        }
        cout << (char)answer;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:37:38.977

您的问题之一是您将整个字符数组转换为单个整数。这是非常困难的事情，因为整数不能包含所有 16 个字符。
看： `converter((int)OriginalChar, Key);`

另外，该`converter`功能应该做什么？
变量名称表示您正在传递原始字符（加密之前），但是，您没有原始字符，而是加密字符。

为什么要传递值的副本但在循环`Key`中完全覆盖它？`for`你想通过引用传递它吗？

**编辑1：**
也许你想把调用`converter`放在一个`for`循环中：

```
for (unsigned int i = 0; i < sizeof(OriginalChar); ++i)
{
    converter(OriginalChar[i], Key);
} 
```

# javascript - Javascript 控制台说：无效的左侧赋值？

> ID：16072098
> 
> 赞同：0
> 
> 时间：2013-04-17T23:36:49.597
> 
> 标签：javascript

因此，这是为了进行安全登录。我通过 chrome 的 javascript 控制台运行它，我得到'未捕获的 ReferenceError: Invalid left-hand side in assignment'？！请帮忙！

```
function logIn() {
String.prototype.hashCode = function() {
        for(var ret = 0, i = 0, len = this.length; i < len; i++) {
        ret = (31 * ret + this.charCodeAt(i)) << 0;
    }
        return ret;
    };

var user = document.getElementById("username"),
    pass = document.getElementById("password");
if ((user = "Fedora") && (pass.hashCode() = -976887139)) {
    window.alert("Captain Fedora: SuperUser");

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T23:39:14.667

```
if ((user = "Fedora") && (pass.hashCode() = -976887139)) 
```

应该

```
if ((user == "Fedora") && (pass.hashCode() == -976887139)) 
```

所以你做比较，而不是分配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:45:22.467

```
if ((user = "Fedora") && (pass.hashCode() = -976887139)) 
```

改成

```
if ((user == "Fedora") && (pass.hashCode() == -976887139)) 
```

'reuturn ret' 也可能返回 undefined，因为在错误的范围内。var ret = 0 仅适用于“for”范围

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T23:39:17.133

是的，`pass.hashCode() = -976887139`是一个[任务](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Assignment_Operators)。而且由于函数调用不[返回引用](https://stackoverflow.com/q/13124417/1048572)，因此分配给它是无效的。你可能想要[比较](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)

```
pass.hashCode() == -976887139 
```

此外，您将想要获取这些 DOM 元素的[`value`s](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement#Properties)（我简直不敢相信密码输入*有*一个`hashCode`方法），并且您还想要将`user`变量的内容与该字符串进行比较，而不是分配它们。

```
var user = document.getElementById("username").value,
    pass = document.getElementById("password").value;
if (user == "Fedora" && pass.hashCode() == -976887139) {
    window.alert("Captain Fedora: SuperUser");
} 
```

# xml - 使用 XSLT 将 http:// 替换为 https://

> ID：16072100
> 
> 赞同：0
> 
> 时间：2013-04-17T23:37:01.097
> 
> 标签：xml, xslt

我正在尝试将所有**http://**实例从 href 标记和图像源替换为**https://**

```
<xsl:for-each select="item[position()&lt;2 and position()&gt; 0]"><!-- display 1 - skip none -->
        <article class="395by265-Presentation">
            <a href="{link}" target="_blank">
                <img src="" width="395" height="265" alt="{title}" border="0" class="FBAPP"><xsl:attribute name="src">
                    <xsl:value-of  disable-output-escaping="yes" select="enclosure/@url"/></xsl:attribute>
                </img>
                <div class="synopsis"><xsl:value-of select="description"/></div>
            </a>
        </article>
    </xsl:for-each> 
```

任何帮助表示赞赏。

我正在使用 XSLT 1.0。

尝试访问和替换**所有**HTTP 实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:49:01.903

您正在使用哪个版本的 XSLT？

XSLT 2.0 支持[替换功能](http://www.w3schools.com/xpath/xpath_functions.asp)：

```
replace(string,pattern,replace) 
```

返回通过用替换参数替换给定模式创建的字符串。

```
Example: replace("Bella Italia", "l", "*")
Result: 'Be**a Ita*ia'

Example: replace("Bella Italia", "l", "")
Result: 'Bea Itaia'

Example syntax: <xsl:value-of select="string:replace('Bella Italia','l','')" />
Result: 'Bea Itaia' 
```

在这里查看：[https](https://stackoverflow.com/a/3067130/1846192) ://stackoverflow.com/a/3067130/1846192了解 XSLT 1.0 解决方案。

# php - SQL查询，从不同表的两列中选择最近的DateTime数据

> ID：16072101
> 
> 赞同：0
> 
> 时间：2013-04-17T23:37:05.410
> 
> 标签：php, android, mysql, sql

我只想显示 SQL 查询中最近的 DateTime 数据，但数据跨两个表。我有`SocialDatabase.SocialStart > NOW() LIMIT 1`从一个表中选择最新数据的代码，我知道`TrainingDatabase.SocialStart > NOW() LIMIT 1`会对另一个表做同样的事情。

那么我将如何将这些合并在一起以仅从 SocialDatabase 和 TrainingDatabase 表的组合列表中获取最近的数据

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:59:38.140

您可以创建一个`view`- 它是内存中的一个虚拟表，并在其上运行一个选择。

例子：

```
create view tmp as select id, timestamp from SocialDatabase.SocialStart order by timestamp asc limit 1;
insert into tmp select id, timestamp from TrainingDatabase.SocialStart order by timestamp asc limit 1;
select id,timestamp from tmp where timestamp>now() order by timestamp asc limit 1; 
```

..或者你可以做得更简单 - 在java代码中进行两次选择和一次比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:10:16.083

您可以使用[**UNION**](http://dev.mysql.com/doc/refman/5.5/en/union.html)语法：

```
(select SocialStart, Data from SocialDatabase where SocialDatabase.SocialStart > now() limit 1)
union
(select SocialStart, Data from TrainingDatabase where TrainingDatabase.SocialStart > now() limit 1)
order by 1 desc limit 1 
```

# javascript - 如何使用 Google Visualization 实现自定义事件？

> ID：16072103
> 
> 赞同：0
> 
> 时间：2013-04-17T23:37:07.113
> 
> 标签：javascript, google-visualization, dom-events

我在下面使用 Google 的图表可视化库有以下代码。目前，我有一个`selectHandler`为列行返回警报的函数。

我正在尝试实现一些 Javascript，而不是针对列号的警报，以发送如下所示项目的“键”警报。我怎么得到这个？

```
<% @frequency.each do |key,value| %>
    ['<%= key %>', <%= value %>],
   <% end %> 
```

Javascript

```
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);

  function drawChart() {

      // OPTIONS
        var options = {
        title: 'Most common phrases in pro-Microsoft Reviews (<%= @reviews.count %> reviews analyzed)',
        vAxis: {title: 'Phrases',  titleTextStyle: {color: 'red'}},
        tooltip: {isHtml: true},
        animation:{
           duration: 2000,
           easing: 'out',
        }
      };

      // DATA
      var data = google.visualization.arrayToDataTable([
        ['Phrase', 'Frequency'],
            <% @frequency.each do |key,value| %>
                ['<%= key %>', <%= value %>],
               <% end %>
      ]);

      // CHART DRAWING
      var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
      chart.draw(data, options);
      google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);

      //setup listener
      google.visualization.events.addListener(chart, 'select', selectHandler);

      // The select handler. Call the chart's getSelection() method
       function selectHandler() {
          var selection = chart.getSelection();
          alert('That\'s column no. '+selection[0].row);
      }

  }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:42:36.193

这是一个简单的示例，它显示了如何使用自定义处理程序获取第 0 列中该行的值（所选项目的“键”）`data.getValue()`：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Department');
  data.addColumn('number', 'Revenues Change');
  data.addRows([
    ['Computer', {v: 12, f: '12.0%'}],
    ['Sports', {v: -7.3, f: '-7.3%'}],
    ['Toys', {v: 0, f: '0%'}],
    ['Electronics', {v: -2.1, f: '-2.1%'}],
    ['Food', {v: 22, f: '22.0%'}]
  ]);

  // Create and draw the visualization.
  var table = new google.visualization.Table(document.getElementById('visualization'));

  var formatter = new google.visualization.TableArrowFormat();
  formatter.format(data, 1); // Apply formatter to second column

  table.draw(data, {allowHtml: true, showRowNumber: true});

  //setup listener
  google.visualization.events.addListener(table, 'select', selectHandler);

  // The select handler. Call the chart's getSelection() method
  function selectHandler() {
    var selection = table.getSelection();
    alert('That\'s row '+ data.getValue(selection[0].row, 0));
  }

} 
```

只需更改此行，您就可以对自己的代码执行相同的操作：

```
alert('That\'s column no. '+selection[0].row); 
```

对此：

```
alert('That\'s row '+ data.getValue(selection[0].row, 0)); 
```

# python - Python - 变量范围和修改

> ID：16072104
> 
> 赞同：2
> 
> 时间：2013-04-17T23:37:07.117
> 
> 标签：python, python-2.7, scope

我正在编写一个 Python 脚本，它主要是一个用于在 Windows 主机上收集实时取证数据的 GUI 框架。到目前为止，我还没有遇到很多我无法解决的问题。但是这个让我难住了。这可能是涉及不正确的变量范围的问题，但对于我的生活，我找不到问题。脚本本身有两千多行，所以除非另有说明，否则我将复制相关部分。

我在破坏功能的地方对我的代码进行了更改。它曾经按预期完美地工作，现在我不知道为什么它没有。这肯定会导致我将来在项目中使用版本控制软件，这是肯定的。

奇怪的是，根本没有抛出异常。

我想要做的是让用户选择与他们想要执行的可选功能相对应的 Tkinter Checkbutton 小部件。我已经为每个 Checkbutton 小部件设置了 Tkinter IntVars，并将这些 IntVars 放入一个数组中以便于枚举。GUI 有一个“开始”按钮，按下该按钮会启动 start() 函数。如果 IntVar 设置为 1（表示选择），此函数应枚举数组中的 Checkbutton IntVars 并执行相关功能。

我的代码的所有其他部分都按预期运行。我在填充数组方面度过了一段可怕的时光。似乎我无法修改数组，即使在函数中声明为全局。如果我手动设置数组中的值，它会按预期工作。我无法遍历 IntVars 并将“全局”数组设置为正确的值。似乎这两个数组永远不会被修改，就好像没有一个 Checkbutton IntVars 通过被选中而设置为“1”。

```
#this is an array of integers corresponding to the checked
#state of desired filetypes for collection
filetypes = [0]*34

#this is an array of integers corresponding to optional collection items
optionalitems = [0]*10

#... snipped ...

#This function performs just fine if the filetypes array is set manually...
#extensions[] is an array containing file extension strings corresponding
# to the Checkbuttons on the fileSelector Toplevel widget.
#outputdirs[] is an array containing strings with a desired output directory.
def collectFiles():
    global filetypes

    n = 0
    print("Parsing checkboxes for file collection...\r\n")
    for item in filetypes:
        if item:
           print(extensions[n] + " selected...")
           #make output dir corresponding to the desired extension
           outputdest = cwd + "/output/" + computername + outputdirs[n]
           if not os.path.exists(outputdest):
               print(outputdest + " does not exist, creating...")
               os.makedirs(outputdest)
               print("Collection for " + outputdirs[n] + " beginning...")
               for drive in drives:
                   print("Searching drive " + drive + "...")
                   for filename in search(drive, extensions[n]):
                       try:
                           i = 2
                           #outpath = cwd + "/output/" + username + outputdirs[n]
                           tempbasename = os.path.basename(filename)
                           testpath = os.path.join(outputdest, tempbasename)
                           tempbasename2 = ""
                           while os.path.exists(testpath):
                               print(testpath + " exists in output directory.")
                               tempbasename2 = str(i) + "_" + tempbasename
                               i += 1
                               testpath = os.path.join(outputdest, tempbasename2)
                           shutil.copy2(filename,testpath)
                           print("Copied:\n\t" + filename + "\n to:\n\t" + testpath + "\n")
                           logfile.write(str(datetime.datetime.now()) + "- Copied:\r\n\t" + filename
                                     + "\r\n to:\r\n\t" + testpath + "\r\n\r\n")
                       except:
                           print("****Problem copying: " + filename + "\n")
                           logfile.write(str(datetime.datetime.now()) + "****Problem copying: " + filename
                                     + "\r\n\r\n")
                           pass
        n += 1

#... snipped ...

#here's where the oddness begins.
#The optionalitems array SHOULD be set outside of this
# function, before it is called.
def doOptionalCollection():
    x = 0
    for item in optionalitems:
        if item:
            optionfunctions[x]()
        x = x + 1

    collectFiles()

#this is the routine called when the "Start" button is pressed.
# The goal here is to enumerate the checkboxes on the GUI, and
# fill filetypes[] and optionalitems[] with values corresponding to
# whether or not the Checkbuttons are selected.
def start():
    global filetypes
    global optionalitems

    #... snipped ...
    #code here performs baseline forensic data collection,
    # and performs exactly as intended.
    #... snipped ...

    #get status of checkboxes and update optionalitems array.
    # optionArray is the Array of IntVars associated with Tkinter Checkbuttons
    # obj.get() --> 0 = unchecked, 1 = checked
    i = 0
    for obj in optionArray:
        optionalitems[i] = obj.get()
        i = i + 1

    doOptionalCollection()

#this is for a dialog-style window that pops up when a button is pressed.
# The dialog contains 34 checkboxes, each with a variable to hold the state.
def showFileSelector():
    global filetypes
    fs = Toplevel(master=root)
    fs.title("Collect files by extension...")
    #set up a grid based on the extensions dictionary keys.
    # have the grid wrap on the 6th element.

    #... snipped, setup of Checkbutton tkinter windgets ...

    buttonArray = [txtButton, pdfButton, logButton, docButton, docxButton,
               rarButton, zipButton, isoButton, jarButton, jpgButton,
               jpegButton, bmpButton, pngButton, gifButton, exeButton,
               pptButton, pptxButton, aviButton, mp4Button, movButton,
               flvButton, mpgButton, wmvButton, mp3Button, flacButton,
               wmaButton, m4aButton, wavButton, psdButton, rawButton,
               apkButton, szipButton, indexdatButton, thumbsdbButton]

    #using filetypes array, set the status of the checkbox.
    #this is helpful if the dialog is re-opened, it will
    # re-populate the dialog with previous selections.
    x = 0
    for item in buttonArray:
        if filetypes[x]:
            item.select()
        x = x + 1

    varArray = [txtvar, pdfvar, logvar, docvar, docxvar,
            rarvar, zipvar, isovar, jarvar, jpgvar,
            jpegvar, bmpvar, pngvar, gifvar, exevar,
            pptvar, pptxvar, avivar, mp4var, movvar,
            flvvar, mpgvar, wmvvar, mp3var, flacvar,
            wmavar, m4avar, wavvar, psdvar, rawvar,
            apkvar, szipvar, indexdatvar, thumbsdbvar]

    def accept():
        global filetypes
        #user has possibly chosen files to collect by extension.
        # iterate varArray to determine what files to collect,
        # and store the result in filetypes[].
        #This assignment also does not work.
        x = 0
        for var in varArray:
            #var.get() to get the values of checkboxes
            # 0 = unchecked
            # 1 = checked
            filetypes[x] = var.get()
            x = x + 1
        fs.destroy()

    def cancel():
        #user has decided to discard selections and close
        # the window.
        fs.destroy()

    #... snipped, GUI placement ...

#back to the base-level indentation (no indents... not inside any functions)

#... snipped, optional item GUI Checkbutton setup ....

optionArray = [productkeyvar, outlookvar,
               recyclebinvar, skypevar,
               prefetchvar, installlogvar,
               allmediavar, win7jumplistvar,
               win7thumbcachevar, recentfilesvar]

optionfunctions = [collectProductKeys, collectOutlookAttachments,
                   collectRecycleBin, collectSkypeHistory,
                   collectPrefetchFolder, collectDeviceInstallationLogs,
                   collectMediaFiles, collectWin7JumpList,
                   collectWin7ThumbnailCache, collectShortcutRecentFiles]

#... snipped, more GUI setup ...

#and then, the obligatory...
root.mainloop() 
```

要尝试简化流程：

1.  用户在 GUI 上设置选项，也可以选择文件类型进行收集。如果用户选择了要收集的任何文件类型，则 filetypes[] 应该已经填充了所需的选择。修改这个数组似乎没有发生。

2.  用户按下开始按钮，开始按钮命令是 start() 函数。定义了全局变量 - 即 filetypes[] 和 optionalitems[]。

3.  在 start() 内部，发生基线取证收集，并按预期运行。

4.  仍在 start() 中，获取可选集合的复选框状态，并填充可选项 []。修改这个数组似乎没有发生。

5.  start() 然后调用 doOptionalCollection()。

6.  doOptionalCollection() 还定义了全局变量 - filetypes[] 和 optionalitems[]。当数组被枚举时，它们被读取为它们的初始值——全为零。这意味着没有执行任何所需的收集功能。

7.  doOptionalCollection() 调用 collectFiles()。

8.  collectFiles() 有一个全局定义 - 这主要是我在函数本身中解析 filetypes[] 时的一个工件。由于 filetypes 数组始终全为零，因此除非在代码中手动设置，否则不会收集任何内容。

这是一个很长的帖子......第一次在这里发帖，所以我提前为巨大的文字墙道歉。我不希望从我的任何代码中获利，所以如果您想查看完整的预期功能，我可以分享我的代码库。我可以将整个软件包提供给感兴趣的人。提前致谢！

# cmake - Cmake非常简单的设置失败

> ID：16072105
> 
> 赞同：4
> 
> 时间：2013-04-17T23:37:10.817
> 
> 标签：cmake

我尝试在 ubuntu 12.04、cmake 2.8.7 中使用最简单的 helloworld 示例开始使用 cmake。首先我尝试了一个：

[http://www.elpauer.org/stuff/learning_cmake.pdf](http://www.elpauer.org/stuff/learning_cmake.pdf)

```
project( helloworld )
set( SRCFILES helloWorld.cpp )
add_executable( helloWorld ${SRCFILES} ) 
```

我在 CMakeLists.txt 旁边只有一个名为“helloWorld.cpp”的源文件。我创建了一个名为“configure”的目录，进入内部并命名为“cmake ..”。我得到以下信息：

```
-- The C compiler identification is GNU
-- The CXX compiler identification is GNU
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
CMake Error at CMakeLists.txt:3 (add_executable):
  add_executable called with incorrect number of arguments

-- Configuring incomplete, errors occurred! 
```

试图找出问题所在，我得到了以下所有更改：

```
project( helloworld )
set( SRCFILES helloWorld.cpp )
message ( "src ${SRCFILES}" )
set(x helloWorld.cpp)
set(y 2)
message(${x}${y})
message(${x}${y})
message(${SRCFILES})

add_executable( helloWorld ${SRCFILES} )
add_executable( helloWorld ${x} )
add_executable( helloWorld helloWorld.cpp ) 
```

结果再次以：

```
...
-- Detecting CXX compiler ABI info - done
src 
helloWorld.cpp2
helloWorld.cpp2
CMake Error at CMakeLists.txt:8 (message):
  message called with incorrect number of arguments

CMake Error at CMakeLists.txt:10 (add_executable):
  add_executable called with incorrect number of arguments

CMake Error at CMakeLists.txt:11 (add_executable):
  add_executable called with incorrect number of arguments

CMake Error at CMakeLists.txt:12 (add_executable):
  add_executable called with incorrect number of arguments

-- Configuring incomplete, errors occurred! 
```

最后，琐碎

```
project( helloworld )
add_executable( helloWorld helloWorld.cpp ) 
```

失败：

```
...
-- Detecting CXX compiler ABI info - done
CMake Error at CMakeLists.txt:2 (add_executable):
  add_executable called with incorrect number of arguments

-- Configuring incomplete, errors occurred! 
```

在每次试用之前，我都会删除 compile 中的所有文件。我只是无法弄清楚缺少什么以及为什么设置了变量..没有设置...没用？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T18:17:18.207

您可能和我一样从网页中复制了相同的损坏文本。文本中必须有一些隐藏字符。手动重写该行也为我解决了。

# delphi - LOCALE_INVARIANT 的 GetLocaleFormatSettings 返回 Windows XP German 下的用户设置

> ID：16072108
> 
> 赞同：2
> 
> 时间：2013-04-17T23:37:28.543
> 
> 标签：delphi, localization, delphi-2010

我为交换目的而写入文件的所有数字都使用以下代码：

```
GetLocaleFormatSettings(LOCALE_INVARIANT, fsInvariant);
FloatToStrF(Value, fsInvariant); 
```

当我读到数字时，我使用这个

```
GetLocaleFormatSettings(LOCALE_INVARIANT, fsInvariant);
if TryStrToFloat(value, floatval, fsInvariant) then
  result := floatVal 
```

这适用于 Windows 7，包括。德语版本，但在德语版本的 Windows XP 中失败。

问题似乎出在 GetLocaleFormatSettings 过程中，因为它在 LOCALE_INVARIANT 和 LOCALE_DEFAULT_USER 下为我提供了相同的值。

这里有一些代码显示了我的问题：

```
unit uMain;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, Grids, ValEdit;

type
  TForm1 = class(TForm)
    VLEditor: TValueListEditor;
    procedure FormShow(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormShow(Sender: TObject);
var
  fsInvariant : TFormatSettings;
  fsLocaleUser : TFormatSettings;
begin
  GetLocaleFormatSettings(LOCALE_INVARIANT, fsInvariant);
  VLEditor.InsertRow('Invariant Decimal Seperator', fsInvariant.DecimalSeparator, true);
  VLEditor.InsertRow('Invariant Thousand Seperator', fsInvariant.ThousandSeparator , true);
  VLEditor.InsertRow('Invariant List Seperator', fsInvariant.ListSeparator , true);

  GetLocaleFormatSettings(LOCALE_USER_DEFAULT, fsLocaleUser);
  VLEditor.InsertRow('Locale Decimal Seperator', fsLocaleUser.DecimalSeparator, true);
  VLEditor.InsertRow('Locale Thousand Seperator', fsLocaleUser.ThousandSeparator, true);
  VLEditor.InsertRow('Locale List Seperator', fsLocaleUser.ListSeparator, true);
end;

end. 
```

当我在 Windows XP Pro - SP3 - GERMAN 中运行 exe 时，它​​会为相同的分隔符显示相同的字符。在德语 Windows 7 中，它按预期显示。

我在这里想念什么？为什么它会给出不同的输出？

谢谢，托马斯

**更新：** `GetLocaleFormatSettings`首先使用 kernel32 函数检查 LCID 是否有效`IsValidLCID(LCID, LCID_INSTALLED)`。问题在于使用`LCID_INSTALLED`而不是`LCID_SUPPORTED`. 受`LOCALE_INVARIANT`支持，但未安装在 Windows XP 系统上。因此，`GetLocaleFormatSettings`例程总是返回到用户 LCID。

修复它的最佳方法是什么？编写我自己的 GetLocaleFormatSettings 例程？更改 Delphi 的 SysUtils.pas 文件中的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T01:11:52.277

Delphi 的早期版本在正确初始化时确实存在问题`TFormatSettings`。例如，当未安装指定的 LCID 时，D2010 确实存在有关`ShortMonthNames`、`LongMonthNames`、`ShortDayNames`和`LongDayNames`数组的初始化错误（但这不会影响您的示例）。在较新的版本中已经修复了与格式相关的错误。

在某些情况下，调用`SetThreadLocale()`和`GetFormatSettings()`在一个单元的`initialization`部分中有助于解决格式问题。

仅供参考，`GetLocaleFormatSettings()`现在在最近的版本中已弃用，取而代之的是一种新`TFormatSettings.Create()`方法：

```
procedure TForm1.FormShow(Sender: TObject);
var
  fsInvariant : TFormatSettings;
  fsLocaleUser : TFormatSettings;
begin
  fsInvariant := TFormatSettings.Create(LOCALE_INVARIANT);
  ...
  fsLocaleUser := TFormatSettings.Create(LOCALE_USER_DEFAULT);
  ...
end; 
```

# android - Android：DialogFragment 和通用 xml

> ID：16072110
> 
> 赞同：2
> 
> 时间：2013-04-17T23:37:38.973
> 
> 标签：android, android-fragments, android-dialogfragment

我正在尝试使用对话框片段控制 android 中的数据库。我的意思是，例如要添加一条新记录，我将单击一个按钮，然后会出现弹出片段，询问我特定的字段。我单击确定，这会在我的托管活动中触发该方法。那部分有效。

但是，我还希望进行其他操作，例如删除、更新、搜索记录等。

有没有办法让片段有一个通用代码，然后根据不同的数据库操作分配不同的xml？我正在寻找解决问题的最有效方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:44:16.713

您可以在 Fragment 上膨胀不同的视图...

```
public class MyClass extends Fragment {
String xmlToLoad;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstances);
    Bundle data = getArguments();
    xmlToLoad = data.getString("what you set in your fragments pager");
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    if(xmlToLoad.equals("whatever")) {
        View view = inflater.inflate(R.layout.thisXML, container,false);
    }
}
} 
```

# java - 我的 soundpool 项目无法正常播放？

> ID：16072117
> 
> 赞同：0
> 
> 时间：2013-04-17T23:38:36.263
> 
> 标签：java, android, soundpool

我一直在尝试实现这个 soundpool 类（在教程的帮助下），但是当我尝试在虚拟设备上运行它时，声音不会播放...... main_activity XML 文件加载正常，但这是预期的在加载时，会播放声音。

这是源代码。

```
public class MainActivity extends Activity {

private SoundPool soundpool;
private boolean soundPoolLoaded = false;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Create a new SoundPool instance.
    // 2 = number of sounds that can be simultaneously played
    // AudioManager.STREAM_MUSIC = The type of sound stream. STREAM_MUSIC is the most common one
    // 0 = sound quality, default is 0.
    // setOnLoadCompleteListener loads the file 
    soundpool = new SoundPool(2, AudioManager.STREAM_MUSIC, 0);
    soundpool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
        @Override
        public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {
            soundPoolLoaded = true;
        }
    });

    playSound("car_phonic");
}

// This method will load a sound resource from the res/raw folder by the input name given as a string (soundName).
// If the sound resource is found by name, it will attempt to play the sound
// soundPoolLoaded value becomes true when the file is fully loaded
public void playSound(String soundName) {
    if(soundPoolLoaded == true)
    {
        // Get the current context resources and find the correct sound resource for playing the sound
        Resources res = this.getResources();
        int soundId = 0;
        soundId = res.getIdentifier(soundName, "raw", this.getPackageName());

        if(soundId != 0){   
        soundpool.play(soundId, 1, 1, 0, 0, 1);
        }

        SystemClock.sleep(500);
        playSound(soundName);

    }
    }
} 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:32:48.483

*   play() 采用 SoundPools load() 返回的 soundID，而不是通用的 android 资源 id
*   onLoadComplete 被调用然后声音文件完成加载，注意 sampleId 参数

所以，它的基本形式是：

```
soundpool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
    @Override
    public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {
        soundpool.play(sampleId, 1, 1, 0, 0, 1);
    }
});

soundpool.load(this, R.raw.car_phonic, 0); 
```

请注意，SoundPool 在后台加载数据，因此样本不会立即可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:10:36.120

这是你应该如何使用soundpool

```
soundPool = new SoundPool(2, AudioManager.STREAM_MUSIC, 0);
AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        float curVolume = audioManager
                .getStreamVolume(AudioManager.STREAM_MUSIC);
        float maxVolume = audioManager
                .getStreamMaxVolume(AudioManager.STREAM_MUSIC);
        float leftVolume = curVolume / maxVolume;
        float rightVolume = curVolume / maxVolume;
        int priority = 10;
        // int priority_1=5;
        int no_loop = 0;
        float normal_playback_rate = 1f;

final int ID=1;
    soundPool.play(soundPoolMap.get(ID,
                        leftVolume, rightVolume, priority, no_loop,
                        normal_playback_rate); 
```

# javascript - 进行https重定向的最“犹太”或“正确”方式是什么？

> ID：16072121
> 
> 赞同：1
> 
> 时间：2013-04-17T23:38:47.197
> 
> 标签：javascript, google-chrome, redirect, webserver

Google Chrome 的“访问最多”或“快速拨号”页面始终将我的网站显示为 500 或 404 服务器错误，即使我将其删除并重置也是如此。我担心这与我的 https 重定向方案有关。

我怀疑是因为 https 的原因是因为我在本地运行我的应用程序没有这个问题，页面的预览正确显示，标题和所有内容。唯一的区别是我没有在本地机器上运行 https。

我的主要问题是重定向到 https 的最“犹太”方式是什么？我目前只使用客户端 JS 方案。即window.location.href = www.example.com。这可能是我的网站无法在 Chrome 的“最常访问”页面上正确显示的原因吗？

我还没有在 Firefox 上看到这个问题。

重定向可能与它根本无关，但这是我所知道的我的主服务器和我的本地服务器之间的唯一区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:44:45.530

通常，如果您想将“ [http://www.example.com](http://www.example.com) ”重定向到“ [https://www.example.com](https://www.example.com) ”，您可以在服务器端使用 php 或 ruby​​ 或 python 之类的脚本语言，或配置你的网络服务器（例如，Apache）来做到这一点。

# eclipse - pydev eclipse 未解决的包内导入

> ID：16072143
> 
> 赞同：1
> 
> 时间：2013-04-17T23:40:31.020
> 
> 标签：eclipse, pydev

我有一个基本的项目层次结构，它是 project->src->package->module。当我尝试将一个模块导入同一个包中的另一个模块时，我得到一个未解决的导入错误。
我确保解释器系统 PYTHONPATH 包含 /site-packages 文件夹。我尝试重新扫描文件夹，如下所示：[pydev doesn't find python library after installation](https://stackoverflow.com/questions/3610272/pydev-doesnt-find-python-library-after-installation)，还尝试再次删除和添加解释器以强制它重新扫描。

导入在终端中正常工作，只是在 Eclipse 中没有，但 sys.path 在 Eclipse 和终端中是相同的，除了当我通过 Eclipse 查看 sys.path 时，它包括 Users/user/Documents/workspace/project/src。

如何让 eclipse 在同一个包中轻松导入模块？

# python - Twisted DeferredList 只运行它的回调一半时间

> ID：16072148
> 
> 赞同：1
> 
> 时间：2013-04-17T23:41:15.197
> 
> 标签：python, web-scraping, multiprocessing, twisted

我正在尝试使用 Twisted 制作一个相当简单的网络爬虫。我让它工作，但每当我尝试抓取超过几百个站点时，它会无缘无故地无限期挂起。一切似乎都有效，除非它在最后停止并有几个站点需要处理。

我在这里使用了教程：http: [//technicae.cogitat.io/2008/06/async-batching-with-twisted-walkthrough.html](http://technicae.cogitat.io/2008/06/async-batching-with-twisted-walkthrough.html)作为蓝图。

这是我的代码：

```
class Spider:
    """Twisted-based html retrieval system."""

    def __init__(self, queue, url_list):
        self.process_queue = queue
        self.start_urls = []
        for url in url_list:
            self.start_urls.append(url)

    def crawl(self):
        """Extracts information from each website in start_urls."""
        deferreds = []
        sem = defer.DeferredSemaphore(30)
        for url in self.start_urls:
            d = sem.run(self._crawl, url, self.process_queue)
            deferreds.append(d)
        dl = defer.DeferredList(deferreds, consumeErrors=1)
        dl.addCallback(self.finish, self.process_queue)
        dl.addCallback(self.shutdown)
        reactor.run()

    def _crawl(self, url, queue):
        d = getPage(url, timeout=10)
        d.addCallback(self.parse, url, queue)
        d.addErrback(self.parse_error, url, queue)
        return d

    def parse(self, result, url, queue):
        print 'Parsing:', url
        data = {'body': result, 'url': url}
        response = Response(data['url'], data['body'])
        queue.put(response)
        return data

    def parse_error(self, result, url, queue):
        print 'Errback from:', url
        data = {'body': 'error', 'url': url}
        response = Response(data['url'], data['body'])
        queue.put(response)
        return data

    def finish(self, results, queue):
        for (valid, data) in results:
            if valid:
                print 'Success:', data['url']
            else:
                print 'Failed:', data['url']
        finish_signal = Response('FINISHED', 'DONE')
        queue.put(finish_signal)

    def shutdown(self, ignore):
        reactor.stop() 
```

我在一个更大的程序中运行这部分代码，因此是队列。

有什么建议可以让 DeferredList 总是触发吗？或者关于为什么它只发射一半时间，而另一半没有任何例外地失败的想法？

这非常令人沮丧，特别是因为它可以完美地处理少量 URL（1-100），但在放大时会失败。我是 Twisted 的新手，所以我可能只是用错误提示搞砸了一些东西，但我不知道是什么，或者如何解决它......

此外，在任何人回答“使用 Scrapy！”之前 我不能使用 Scrapy，因为我不会在这里讨论。假设这个程序是我最后的希望并且必须工作。

编辑：

完整的独立代码，因此人们可以直接运行它：

```
import sys
from twisted.internet import defer, reactor
from twisted.web.client import getPage

class SeerSpider:
    """Twisted-based html retrieval system."""

    def __init__(self, queue, url_list):
        self.process_queue = queue
        self.start_urls = []
        for url in url_list:
            self.start_urls.append(url)

    def crawl(self):
        """Extracts information from each website in url_list."""
        deferreds = []
        sem = defer.DeferredSemaphore(30)
        for url in self.start_urls:
            d = sem.run(self._crawl, url, self.process_queue)
            deferreds.append(d)
        dl = defer.DeferredList(deferreds, consumeErrors=True)
        dl.addCallback(self.finish, self.process_queue)
        dl.addCallback(self.shutdown)
        reactor.run()

    def _crawl(self, url, queue):
        d = getPage(url, timeout=10)
        d.addCallback(self.parse, url, queue)
        d.addErrback(self.parse_error, url, queue)
        return d

    def parse(self, result, url, queue):
        data = {'body': result, 'url': url}
        response = Response(data['url'], data['body'])
        print response.url
        return data

    def parse_error(self, result, url, queue):
        data = {'body': 'error','url': url}
        response = Response(data['url'], data['body'])
        print response.url
        return data

    def finish(self, results, queue):
        finish_signal = Response('FINISHED', 'DONE')
        print finish_signal.url

    def shutdown(self, ignore):
        reactor.stop()

class Response:
    def __init__(self, url, text):
        self.url = url
        self.body = text

url_list = ['http://google.com/', 'http://example.com', 'http://facebook.com'] # this will work, make the list bigger to find the bug
spider = SeerSpider(None, url_list)
spider.crawl() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:10:13.627

看起来您正在将标准库的多处理库与 Twisted 混合使用。如果你对此不是很小心，随机的东西就会坏掉。例如，也许反应器正在满足一个进程中的一些 I/O 事件，而其余的则满足另一个进程中的 I/O 事件。

但是，很难*确定*这是问题所在，因为问题中的示例代码不完整（您可能认为程序的其余部分很无聊，但所有这些无聊的细节加在一起就是定义程序行为的原因，因此它们实际上对您的问题非常重要）。

# ios6 - iOS6 重定向到 SSL 证书无效的安全页面不起作用

> ID：16072150
> 
> 赞同：3
> 
> 时间：2013-04-17T23:41:18.197
> 
> 标签：ios6, mobile-safari, moovweb

我有一个页面通过重定向将用户从不安全页面带到安全页面，但它不适用于 iOS6 Safari。安全页面的证书无效，因为这是一个测试环境，但在 iOS5 和 Android 4 上，我可以选择接受无效证书。但是，在 iOS6 上，页面似乎没有响应。

流程看起来像

转到[http://www.mydomain.com/mypage](http://www.mydomain.com/mypage) 点击链接返回 302 到[https://www.mydomain.com/mypage](https://www.mydomain.com/mypage)

期望的结果：获取接受无效证书的选项

关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T23:41:18.197

您可以简单地先访问页面的 https 版本并接受证书。

或者，您可以创建根证书，通过配置文件将其安装在手机上，然后使用该根 CA 为您的测试域创建 SSL 证书。

# javascript - 允许下载由 JavaScript 和 Google Earth API 创建的 KML 文件

> ID：16072153
> 
> 赞同：2
> 
> 时间：2013-04-17T23:41:29.770
> 
> 标签：javascript, google-earth-plugin, data-uri

想要创建一个完全在浏览器中运行的 Web 应用程序，而不需要使用 Google Earth API 即时创建 KML 的后端服务器组件，其中单击“下载”按钮会激活 Web 浏览器的正常内容下载功能，或者提示保存扩展名为 .kml 的文件或通过 KML mime 类型自动启动 Google 地球。

我可以构造一个“数据：” URL 来激活下载使用 Google Earth API 在 JavaScript 中创建的 KML 文件，但这仅适用于 Chrome。部分在 FireFox 中工作，但使用“.part”文件扩展名保存，因此用户必须明确重命名文件才能在 Google 地球中打开。IE完全忽略了这一点。例如，IE 9 不支持 Javascript 生成的文件下载。我正在寻找至少使用 Chrome + FireFox + IE 的跨浏览器解决方案。

```
<script type="text/javascript">
var ge;
var placemark;

google.load("earth", "1");

function init() {
  google.earth.createInstance('map3d', initCallback, failureCallback);    
}

... some code to create some KmlObject

function download() {
  // serialize as KML text to export
  var placemarkText = placemark.getKml();
  if (placemarkText) {
    var uriContent = "data:application/vnd.google-earth.kml+xml;charset=UTF-8," +
        encodeURIComponent(placemarkText); 
    window.open(uriContent, 'KML Download');
  }
}

</script>
</head>

<body onload="init()" style="font-family: arial, sans-serif; font-size: 13px; border: 0;">
 <INPUT TYPE="button" NAME="button2" Value="Download KML" onClick="javascript:download()">
 <div id="map3d" style="width: 600px; height: 380px;"></div>
</body>
</html> 
```

我已经看到了[http://code.google.com/p/download-data-uri/](http://code.google.com/p/download-data-uri/)的破解，但这仅适用于 Chrome，因此这不是一个实用的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:52:36.787

一种可能的方法是使用[Downloadify](https://github.com/dcneiner/Downloadify)。这是 ...

> “一个 javascript 和 Flash 库，无需服务器交互即可创建和下载文本文件。”

您可以[在此处查看一个工作示例](http://pixelgraphics.us/downloadify/test.html)。不幸的是，我不相信在旧版浏览器中本机可以做到这一点。

# python - 有没有办法在 python 中按列表元素组织文件内容？

> ID：16072167
> 
> 赞同：0
> 
> 时间：2013-04-17T23:42:58.063
> 
> 标签：python, python-3.x

我正在使用 python 进行一个项目，该项目涉及包含学生信息的文件。该文件按姓氏字母顺序排列学生，格式如下：

姓，名，房子，活动

第一个方向是将格式更改为

名字，姓氏，房子，活动

我已经做到了。下一步是按房子组织它们，以便

```
Amewolo, bob J.,E2,none
Anderson, billy D.,E1,basketball
Andrade, Danny R.,E2,SOCCER
Banks-Audu, Rob A.,E2,FOOTBALL
Brads, Kev J.,N1,BAND
souza, Ian L.,E1,ECO CLUB
Dimijian, Annie A.,S2,SPEECH AND DEBATE
Garcia, Yellow,E1,NONE
Glasper, Larry L.,N1,CHOIR 
```

将按房屋组织输出它们

```
Amewolo, bob J.,E2,none
Andrade, Danny R.,E2,SOCCER
Banks-Audu, Rob A.,E2,FOOTBALL
Anderson, billy D.,E1,basketball
souza, Ian L.,E1,ECO CLUB
Garcia, Yellow,E1,NONE
Brads, Kev J.,N1,BAND
Glasper, Larry L.,N1,CHOIR
Dimijian, Annie A.,S2,SPEECH AND DEBATE 
```

到目前为止，这是我的代码

```
def main():
    info = open('Studentinfo.txt', 'r')
    for i in info:
        data = i
        data = data.rstrip('\n')
        data = data.split(',')
        print(format(data[1], '19s'),end='')
        print(format(data[0], '19s'),end='')
        print(format(data[2], '19s'),end='')
        print(format(data[3], '19s'))

main() 
```

我应该使用

```
data = data.sort(key = data[2]) 
```

还是有另一种方法可以按该特定列表元素排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:46:00.753

`.sort()`是就地的，所以你只需写：

```
data.sort(key=lambda item: item[2]) 
```

`lambda item: item[2]`基本上是以下的简写：

```
def get_sort_key(item):
    return item[2] 
```

另外，由于您的文件是 CSV 文件，我会使用[`csv`模块](http://docs.python.org/3/library/csv.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T23:48:05.660

只需将`sort`函数`lambda`用作`key`：

```
with open('info.txt', 'r') as f:
      data = [line.split(',') for line in f]
print(sorted(lists, key=lambda x: x[2])) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T23:50:02.113

`data`是文件中的单个项目。因此，如果您对该项目进行排序，您所做的就是混合单个项目的列。比如`Brads, Kev J., N1, BAND`会诉诸于`BAND, Brads, Kev J., N1`。

相反，您想要的是拥有*所有*项目的列表并对该列表进行排序。因此，您需要将每个项目的数据对象放到另一个列表中，然后对该列表进行排序：

```
allItems = []
for i in info:
    data = i.rstrip('\n').split(',')
    allItems.append(data)

allItems.sort(key=lambda x: x[2]) # sort by house

for data in allItems:
    print(format(data[1], '19s'), end='')
    print(format(data[0], '19s'), end='')
    print(format(data[2], '19s'), end='')
    print(format(data[3], '19s')) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T23:50:06.130

```
import sys # just used to print to sys.stdout, you can print to a file instead
import csv
from operator import itemgetter

with open('Studentinfo.txt') as f:
    r = csv.DictReader(f, ('lastname','firstname','house','activity'))
    w = csv.DictWriter(sys.stdout, ('firstname', 'lastname','house','activity'))
    w.writerows(sorted(r, key=itemgetter('house'))) 
```

* * *

```
 billy D.,Anderson,E1,basketball    
 Ian L.,souza,E1,ECO CLUB    
 Yellow,Garcia,E1,NONE    
 bob J.,Amewolo,E2,none    
 Danny R.,Andrade,E2,SOCCER    
 Rob A.,Banks-Audu,E2,FOOTBALL    
 Kev J.,Brads,N1,BAND    
 Larry L.,Glasper,N1,CHOIR    
 Annie A.,Dimijian,S2,SPEECH AND DEBATE 
```

# web-services - 无法使用 Rational Application Developer 检索 WSDL 文件错误

> ID：16072169
> 
> 赞同：0
> 
> 时间：2013-04-17T23:43:08.813
> 
> 标签：web-services, wsdl, rad

我正在尝试使用托管在 52north 上的开源 WSDL 文件生成一些 Web 服务：

[https://svn.52north.org/svn/swe/main/SOS/GeorefImageSOS/trunk/52nSOS-T/src/org/n52/sos_t/SOS.wsdl](https://svn.52north.org/svn/swe/main/SOS/GeorefImageSOS/trunk/52nSOS-T/src/org/n52/sos_t/SOS.wsdl)

我创建了一个动态 Web 项目并导入了 WSDL 文件。当我使用 Web 服务工具生成客户端时，出现“操作超时 - 无法检索 WSDL 文件”错误。我怀疑是导入需要太长时间才能加载所有架构。

任何人都可以尝试从上面的 WSDL 文件生成 Web 服务吗？或者可能提供有关如何设置参数的建议？

非常感谢你，威廉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:44:53.830

将 WSDL 下载到本地机器，然后使用 WSDL2Java 命令生成存根。

# android - 如何摆脱双位小数

> ID：16072173
> 
> 赞同：0
> 
> 时间：2013-04-17T23:43:41.067
> 
> 标签：android

我试图摆脱双精度中的一些小数位，我已经在应用程序的其他部分成功地完成了它，但我无法在这里弄清楚。双倍额外加入，我将其设置为编辑文本

```
double dryFree = sender.getExtras().getDouble("ResultFree");
  else if (getIntent().hasExtra("ResultFree")) {
        answer.setText( dryFree + ""); 
```

这是我尝试过的，但应用程序崩溃了

```
 else if (getIntent().hasExtra("ResultFree")) {
        answer.setText(String.format("%.2f", dryFree + "")); 
```

数字来自的活动，我尝试在这里使用 string.format 但出现错误，我知道我用错了

```
total = (int) (a * b * c) / 0.424753; 
```

# sftp - JSCH (SFTP) 在子文件夹级别（第二级）上更改目录失败

> ID：16072175
> 
> 赞同：2
> 
> 时间：2013-04-17T23:43:46.003
> 
> 标签：sftp, jsch

当上一个目录不在根目录（ftp home）中时，JSch 的 SFTP 通道无法更改目录。它仅发生在某些 SFTP 服务器上，而不是全部发生。

例如目录结构是这样的：

*   /
    *   1级

        *   2级

`cd level-1`（好的）
`cd level-2`（失败）

它抛出这样的异常

```
4: Folder not found: /level-1/level-2
    at com.jcraft.jsch.ChannelSftp.throwStatusError(ChannelSftp.java:2569)
    at com.jcraft.jsch.ChannelSftp._realpath(ChannelSftp.java:2100)
    at com.jcraft.jsch.ChannelSftp.cd(ChannelSftp.java:315) 
```

有错误的 SFTP 服务器`/`作为root的*真实路径返回。*没有失败的另一台服务器返回完整路径列表`/usr/account`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:24:32.827

对我来说，我看起来像是服务器端问题/错误。服务器可能会错误地执行`SSH_FXP_REALPATH`请求。

您登录的帐户是否已 chroot？谁执行 chroot，SFTP 服务器还是系统级 chroot？

如果您共享日志文件，您可能会得到更具体的答案。

您也可以尝试其他一些遵循 SFTP 规范并`SSH_FXP_REALPATH`在进入目录时使用请求的 SFTP 客户端（许多客户端不这样做）。它不必是 Java 库。任何客户端，甚至 GUI，都可以。只是为了测试，如果它遇到同样的麻烦。[例如WinSCP](https://winscp.net/)使用`SSH_FXP_REALPATH`. 只需尝试连接并输入`/level-1/level-2`. *（我是WinSCP的作者）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:43:31.853

我找到了 JSCH 0.1.49 的源代码并对其进行了跟踪。我发现有一个名为 _realPath 的方法在服务器无法返回真实路径时抛出异常。该方法的输入参数是**远程文件夹的绝对路径，**所以我将异常注释掉，而是返回绝对路径。一切正常。

这是修改后的代码。请注意，原始代码大部分时间都有效，我所做的更改是针对服务器无法在二级目录（子文件夹）上返回 realpath 的罕见情况，并且不能保证它适用于所有服务器。

```
//com.jcraft.jsch.ChannelSftp
private byte[] _realpath(String path) throws ... {
...
if (type == SSH_FXP_STATUS) {
  i = buf.getInt();
  /* Some servers fail to return the realPath
   on second level of directory (subfolders).
   original code is commented out and replaced with a return.*/
  //throwStatusError(buf, i);
  return (path.getBytes());
}
... 
```

# javascript - 字符串拆分方法（每行）javascript

> ID：16072179
> 
> 赞同：0
> 
> 时间：2013-04-17T23:44:50.147
> 
> 标签：javascript

我正在尝试为允许用户在文本框中输入单词或句子然后按下按钮的程序编写代码。

当用户按下按钮时，结果应该出现

实际上，我在最后一部分遇到了一个问题，即拆分句子并将每个句子放在单独的行中。

我所知道的是，我可以通过编写如下代码将它们放在单独的行中：

```
var myString = "zero one two three four";

var mySplitResult = myString.split(" ");

for(i = 0; i < mySplitResult.length; i++){
    document.write("<br /> Element " + i + " = " + mySplitResult[i]); 
} 
```

但是当我这样做时，它没有用

我的代码

```
 function t {
    var r=input.split(".");
             for (var i = 0; i < r.length; i++){
        r.innerHTML ="<br/> "  + r[i];}
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:57:42.620

您的 for 循环正在替换每次迭代的内容。您需要使您的 for 循环仅将 n 的元素附加到结果元素的 innerHTML 中。

```
function F1()
{  
  var str =document.getElementById("text");
  var input =  str.value;
  var result = document.getElementById( "result" );
  var num =  input.split(" ").length - 1;
  var n=input.split(".");

  result.innerHTML = "Lenrth of input string:  "+ input.length +"<p>Number of spaces:  "+num +"</p>"
  +"<p> Replacing the word 'red' with 'blue':  "+ input.replace("red" , "blue")+"</p><p>Spilting at'.':</p>";

  for (var i = 0; i < n.length; i++){
    result.innerHTML += "<br/> "  + n[i];
  }
} 
```

这是关于 jsFiddle 的一个工作示例：http: [//jsfiddle.net/nQ39D/](http://jsfiddle.net/nQ39D/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:52:22.357

您正在使用 for 循环的每次迭代覆盖您的 result.innerHTML

尝试创建一个 var str 来保存您计算的字符串并在 for 循环中对其进行迭代。

> str += "输入字符串的长度："+ input.length +"
> 
> 空格数：“+num +”
> 
> “+”
> 
> 将单词 'red' 替换为 'blue': "+ input.replace("red" , "blue")+"
> 
> 喷在'。'：
> 
> "+ "
> " + n[i];

然后在for循环之外

> 结果.innerHTML = str

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T23:53:06.190

> ```
> for (var i = 0; i < n.length; i++) {
>     result.innerHTML = "Lenrth of input string:  "+ input.length
>       + "<p>Number of spaces:  "+num +"</p>"
>       + "<p> Replacing the word 'red' with 'blue':  "+ input.replace("red" , "blue")+"</p>"
>       + "<p>Spilting at'.':</p><br/> " + n[i];
> } 
> ```

这样，您将在*每个循环回合*`result.innerHTML`分配并覆盖它- 因此您将注意到的输出只是最后一个循环回合的输出。相反，您应该逐部分（包括重复）构建一个 html 字符串，然后分配整个内容。

 *```
var html = "<p>Length of input string: " + input.length + "</p>";
html += "<p>Number of spaces: " + num + "</p>";
html += "<p> Replacing the word 'red' with 'blue': " + input.replace("red" , "blue") + "</p>";
html += "<p>Spilting at '.':<ul>";
for (var i = 0; i < n.length; i++) {
    html += "<li>" + n[i] + "</li>";
}
html += "</ul></p>";
result.innerHTML = html; 
```*

# java - 绑定HashMap 到可变树节点

> ID：16072182
> 
> 赞同：1
> 
> 时间：2013-04-17T23:44:58.687
> 
> 标签：java, swing, jtree, treemodel

我需要将 a 绑定`Hashmap`到 a`MutableTreeNode`以便我可以在 a 中显示它`JTree`。

我有以下代码：

```
static Map<String, String> form = new LinkedHashMap<String,String>(); 
```

我想这就是我需要实现的方式`MutableTreeNode`。我只是不知道现在如何让“表单”的密钥出现在`MutableTreeNode`.

```
public class MyNode implements MutableTreeNode {

    @Override
    public Enumeration children() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public boolean getAllowsChildren() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public TreeNode getChildAt(int childIndex) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int getChildCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public int getIndex(TreeNode node) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public TreeNode getParent() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public boolean isLeaf() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void insert(MutableTreeNode arg0, int arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public void remove(int arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void remove(MutableTreeNode arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void removeFromParent() {
        // TODO Auto-generated method stub

    }

    @Override
    public void setParent(MutableTreeNode arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void setUserObject(Object arg0) {
        // TODO Auto-generated method stub

    } 
```

在`MutableTreeNode`正确显示正确的`Key`值后，我希望能够做到：

```
final JTree tree = new JTree();
final DefaultMutableTreeNode CustomNode = new DefaultMutableTreeNode("Custom");
DefaultTreeModel tm = new DefaultTreeModel(CustomNode);
tree.setModel(tm);

for (String str : form.keySet())
        {
          MyNode nod = new MyNode(str);
          CustomNode.add(node);           
        }
tm.reload(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:07:12.047

您可能想要`TreeModel`接口的自定义实现。如[*如何使用树：创建数据模型*](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#data)中所述，

> 该`TreeModel`接口接受任何类型的对象作为树节点。它不需要节点由`DefaultMutableTreeNode`对象表示，甚至不需要节点实现`TreeNode`接口。

尽管您`Map<String, String>`的本质上不是分层的，但您可能会从`GenealogyModel`,[在此处](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#eg)[`FileTreeModel`](https://dzone.com/articles/taking-new-swing-tree-table-a-)引用或在[此处](https://stackoverflow.com/a/14837208/230513)和[此处](https://codereview.stackexchange.com/a/4447/6692)引用的内容中得到一个想法。

# java - 信任过期的证书

> ID：16072184
> 
> 赞同：1
> 
> 时间：2013-04-17T23:45:03.887
> 
> 标签：java, ssl, httpclient, apache-httpclient-4.x, truststore

我的客户端在与具有过期证书的 https 服务器通信时因以下错误而失败。当我们正在等待通过更新在服务器端修复它时，我想知道我们是否可以通过将过期的证书添加到我们自己的信任库来绕过这个错误？这使我们能够在等待证书更新时获得一些测试时间。

```
US has an end date Thu Sep 08 19:59:59 EDT 2011 which is no longer valid.
[4/17/13 19:22:55:618 EDT] 00000021 SystemOut     O   WebContainer : 0, SEND TLSv1 ALERT:  fatal, description = certificate_unknown
[4/17/13 19:22:55:620 EDT] 00000021 SystemOut     O   WebContainer : 0, WRITE: TLSv1 Alert, length = 2
[4/17/13 19:22:55:620 EDT] 00000021 SystemOut     O   WebContainer : 0, called closeSocket()
[4/17/13 19:22:55:620 EDT] 00000021 SystemOut     O   WebContainer : 0, handling exception: javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.g: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: 
    java.security.cert.CertPathValidatorException: The certificate issued by CN=Thawte SSL CA, O="Thawte, Inc.", C=US is not trusted; internal cause is: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:56:04.930

Use the following code to trust all certificates. **Note: Do not use it in the production**

```
 try {
        SSLContext ctx = SSLContext.getInstance("TLS");
        ctx.init(new KeyManager[0], new TrustManager[] { new X509TrustManager() {
            @Override
            public void checkClientTrusted(X509Certificate[] x509Certificates, String name) throws CertificateException {}

            @Override
            public void checkServerTrusted(X509Certificate[] x509Certificates, String name) throws CertificateException {}

            @Override
            public X509Certificate[] getAcceptedIssuers() {
                return null;
            }
        } }, new SecureRandom());

        SSLContext.setDefault(ctx);
    } catch (Exception e) {
        throw new RuntimeException(e);
    } 
```

# android - 安卓中的分贝

> ID：16072185
> 
> 赞同：1
> 
> 时间：2013-04-17T23:45:14.040
> 
> 标签：android, audio, decibel

我创建了一个获取 getMaxAmpitude 然后将其转换为分贝的应用程序，但我只能得到 30dB 的范围。

安卓手机是否只有 30dB 的范围，还是我的代码有问题？

```
public class getMaxAmpitude extends AsyncTask<Void, Float, Void>{
     String dB = "";    
     int ampitude;
     float db;
     @Override
    public Void doInBackground(Void... params) {
        while(rec == true){
            try{
                Thread.sleep(250);
            }catch(InterruptedException e){
                e.printStackTrace();
            }
            ampitude = recorder.getMaxAmplitude();
            db =(float) (20 * Math.log10(ampitude/700.0));
            publishProgress(db);
        }
        return null;
    }
    public void onProgressUpdate(Float... progress){

        //database.addSoundData(dB);
        dB = (progress[0].toString()); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T23:09:20.537

分贝标度始终是相对于某物的度量——在数字音频的情况下，某物通常是样本能够保持的最大值。这既`1.0`适用于样本的浮点表示，也`32767`适用于有符号的 16 位样本。计算的 dB 值为负，0dB 为削波。

在不知道具体是什么`recorder`的情况下，我会假设它是 Android 的`MediaRecorder`——它使用带符号的 16 位整数。

因此，在这种情况下，正确的方程式是：

`db = 20.0 * log10(peakAmplitude/32767.0)`

但是，您在上面使用的等式只会使结果产生偏差，因为它等于：

`db = 20.0 * log10(peakAmplitude) - 20.0 * log10(700)`

`=20.0*log10(peakAmplitude) - ~56.9`

如果您正在录制板载​​麦克风并启用自动增益控制，则 30dB 的动态范围数字可能并不令人惊讶——除非您已采取主动步骤禁用它。

# php - 无法插入 SQL 更新

> ID：16072186
> 
> 赞同：3
> 
> 时间：2013-04-17T23:45:17.623
> 
> 标签：php, javascript, jquery, mysql

我正在使用 jeasy-ui 来填充数据网格。我今天早些时候有这个工作，然后决定移动一些不起作用的文件并最终回滚我的更改。

不幸的是，现在它只填充表格并允许我删除行，但保存和插入似乎无济于事。最糟糕的是，我知道这很简单，但我已经做了 4 个小时了，现在是时候问我没看到什么了。

***编辑***

在 save_user.php 上的 'date' => $date 之后缺少逗号。知道这很简单。谢谢您的帮助。

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="keywords" content="jquery,ui,easy,easyui,web">
    <meta name="description" content="">

    <title>Scheduler</title>
    <link rel="stylesheet" type="text/css" href="css/black/easyui.css">
    <link rel="stylesheet" type="text/css" href="css/icon.css">

    <script type="text/javascript" src="js/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="js/jquery-ui.js"></script>
    <script type="text/javascript" src="js/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="js/jquery.datagrid.js"></script>
    <script type="text/javascript">

        //create datafields

        $(function(){
            $('#dg').edatagrid({
                url: 'get_users.php',
                saveUrl: 'save_user.php',
                updateUrl: 'update_user.php',
                destroyUrl: 'destroy_user.php'      
            });
        });

    </script>
</head>
<body>

    <table id="dg" title="Edit Teams" style="width:700px;height:250px"
            toolbar="#toolbar" pagination="true" idField="id"
            rownumbers="true" fitColumns="true" singleSelect="true">
        <thead>

            <tr>
                <th field="date" width="50" editor="{type:'validatebox',options:{required:true}}">Date</th>
                <th field="starttime" width="50" editor="{type:'validatebox',options:{required:true}}">Time Start</th>
                <th field="endtime" width="50" editor="{type:'validatebox',options:{required:true}}">Time Finish</th>
                <th field="team1" width="50" editor="{type:'validatebox',options:{required:true}}">Team 1</th>
                <th field="team2" width="50" editor="{type:'validatebox',options:{required:true}}">Team 2</th>
            </tr>
        </thead>
    </table>

    <div id="toolbar">
        <a href="#" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="javascript:$('#dg').edatagrid('addRow')">New</a>
        <a href="#" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="javascript:$('#dg').edatagrid('destroyRow')">Destroy</a>
        <a href="#" class="easyui-linkbutton" iconCls="icon-save" plain="true" onclick="javascript:$('#dg').edatagrid('saveRow')">Save</a>
        <a href="#" class="easyui-linkbutton" iconCls="icon-undo" plain="true" onclick="javascript:$('#dg').edatagrid('cancelRow')">Cancel</a>
    </div> 
```

get_users.php（有效）

```
<?php

include 'conn.php';

$rs = mysql_query('select * from schedule');
$result = array();
while($row = mysql_fetch_object($rs)){
    array_push($result, $row);
}

echo json_encode($result);

?> 
```

销毁用户.php

```
<?php

$id = intval($_REQUEST['id']);

include 'conn.php';

$sql = "delete from schedule where id=$id";
@mysql_query($sql);
echo json_encode(array('success'=>true));
?> 
```

保存用户.php

```
<?php

$date = $_REQUEST['date'];
$starttime = $_REQUEST['starttime'];
$endtime = $_REQUEST['endtime'];
$team1 = $_REQUEST['team1'];
$team2 = $_REQUEST['team2'];

require 'conn.php';

$sql = "insert into schedule(date,starttime,endtime,team1,team2) values('$date','$starttime','$endtime','$team1','$team2')";

mysql_query($sql);
echo json_encode(array(
    'id' => mysql_insert_id(),
    'date' => $date
    'starttime' => $starttime,
    'endtime' => $endtime,
    'team1' => $team1,
    'team2' => $team2
));

?> 
```

更新用户.php

```
$id = intval($_REQUEST['id']);
$date = $_REQUEST['date'];
$starttime = $_REQUEST['starttime'];
$endtime = $_REQUEST['endtime'];
$team1 = $_REQUEST['team1'];
$team2 = $_REQUEST['team2'];

include 'conn.php';

$sql = "update schedule set date='$date',starttime='$starttime',endtime='$endtime',team1='$team1',team2='$team2' where id=$id";

mysql_query($sql);
echo json_encode(array(
    'id' => $id,
    'date' => $date,
    'starttime' => $starttime,
    'endtime' => $endtime,
    'team1' => $team1
    'team2' => $team2
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:12:54.697

您使用`$_REQUEST`了但是如何将您的数据（例如`id,date`，...）传递给 PHP 文件。我不熟悉`jeasy-ui`，但我想你需要`columns`在你的 jquery 代码中定义类似的东西来引入传递给 PHP 文件的数据。

# java - 使用 flex 和 bison 组合或从 java 字节码生成解析树

> ID：16072187
> 
> 赞同：-1
> 
> 时间：2013-04-17T23:45:21.683
> 
> 标签：java, bison, bytecode, abstract-syntax-tree, flex-lexer

我打算从 java 字节码生成解析树。典型的字节码如下，

```
public class org.scandroid.testing.InvokeCallArgTest extends org.scandroid.testing.SourceSink{
public org.scandroid.testing.InvokeCallArgTest();
  Code:
   0:   aload_0
   1:   invokespecial   #8; //Method org/scandroid/testing/SourceSink."<init>":()V
   4:   return

public static java.lang.String invokeCallArgSourceSpec();
  Code:
   0:   iconst_1
   1:   newarray char
   3:   astore_0
   4:   aload_0
   5:   invokestatic    #16; //Method org/scandroid/testing/SourceSink.load:([C)V
   8:   new     #20; //class java/lang/String
   11:  dup
   12:  aload_0
   13:  invokespecial   #22; //Method java/lang/String."<init>":([C)V
   16:  areturn

public static int invokeCallArgSourceSpecInt();
  Code:
   0:   iconst_1
   1:   newarray char
   3:   astore_0
   4:   aload_0
   5:   invokestatic    #16; //Method org/scandroid/testing/SourceSink.load:([C)V
   8:   aload_0
   9:   arraylength
   10:  ireturn

public static void invokeCallArgSinkSpecInt(int);
  Code:
   0:   iload_0
   1:   invokestatic    #30; //Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
   4:   invokestatic    #36; //Method org/scandroid/testing/SourceSink.sink:(Ljava/lang/Object;)V
   7:   return

public static void invokeCallArgSinkSpecBiInt(int, int);
  Code:
   0:   iload_0
   1:   iload_1
   2:   iadd
   3:   invokestatic    #30; //Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
   6:   invokestatic    #36; //Method org/scandroid/testing/SourceSink.sink:(Ljava/lang/Object;)V
   9:   return

} 
```

我的目标是生成解析树或抽象语法树。我打算使用 flex 和 bison 组合。只是想知道这将是一个正确的方法吗？我应该从头开始还是有其他工具可用于处理从字节码创建 AST？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:03:42.123

第一步当然是弄清楚你真正想要的 AST 是什么。与标准语言相比，字节码的用途要少得多，因为缺少变量、范围、未标记的中断和其他最方便用 AST 表示的特性。您仍然可以拥有一棵树，其中的节点代表类、方法、指令和操作数，但在每个方法中，代码基本上是平坦的。

至于实际的实现，由于上述原因，我不知道有谁用字节码创建了 AST 进行操作。最接近的，你会来的是字节码汇编器的解析器。例如，您可以在[此处](https://github.com/Storyyeller/Krakatau/blob/master/Krakatau/assembler/parse.py)找到我的汇编程序的语法。它使用 Ply，它是 Lex 和 Yacc 的基于 Python 的实现，所以它应该是相似的。但这是一个解析树，旨在帮助组装类文件的过程，而不是用于任何特定的编程转换。

# class - 使用链接突出显示多个 div 类

> ID：16072189
> 
> 赞同：0
> 
> 时间：2013-04-17T23:45:24.403
> 
> 标签：class, html, onclick, hyperlink, nav

**大家**好 - 经过无数次搜索，我仍然不确定我正在寻找的术语是什么（*看起来很简单*）。所以很难尝试找到一些进展......对不起，我现在没有代码可以显示，仍在试图找出解决方案的最佳方向。

我所追求的一个例子可以在**www.anishkapoor.com**上看到- 基本上我正在尝试创建一个非常相似的导航，其中内容按颜色分类，在单击特定导航链接后它会突出显示（更改颜色）所有具有相同类 ID 的内容。Obviously when a new nav link is selected the current highlighted content will switch to the new class ID. 我也在尝试编写此代码，以便可以轻松地将其应用于 CMS。谢谢你的时间，我希望我有一些意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T05:20:30.923

It works, but it's a pretty basic attempt. **[jsfiddle.net/bH6pg/1](http://jsfiddle.net/bH6pg/1)**
I'm going to apply this to a wordpress so if someone has a better solution for CMS, please inform :-)

```
 $(".oranges").click(function () {
  $(".orange").addClass("orange_highlight");
  $('.apple').removeClass("apple_highlight");
  $('.banana').removeClass("banana_highlight");
}); 
```

# maple - 如何以编程方式截断 Maple 中的订单“O”字词？

> ID：16072194
> 
> 赞同：4
> 
> 时间：2013-04-17T23:45:59.520
> 
> 标签：maple

在 Maple 中，`taylor(exp(x),x,2);`返回 1+ *x* +O( *x* ² )。如何自动将此结果转换为删除O( *x* ^(2 ) 项的相同表达式？)即类似`removeBigO(taylor(exp(x),x,2));`返回*1+x*的东西？”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:57:37.820

```
P := taylor(exp(x),x,2);

convert(P, polynom); 
```

该转换有其自己的[帮助页面](http://www.maplesoft.com/support/help/Maple/view.aspx?path=convert/polynom)。

还要注意[taylor,details](http://www.maplesoft.com/support/help/Maple/view.aspx?path=taylor/details)的帮助页面有这样的转换作为它的最后一个例子。[泰勒](http://www.maplesoft.com/support/help/Maple/view.aspx?path=taylor)的帮助页面提到，泰勒级数结果到多项式的转换在该详细信息页面上进行了描述。

# c# - 绑定到对象本身而不是属性时的 INotifyPropertyChanged

> ID：16072196
> 
> 赞同：3
> 
> 时间：2013-04-17T23:46:03.657
> 
> 标签：c#, wpf

我正在 Windows Phone 8 的 WPF 表单中进行一些绑定。我有一个绑定到对象本身的列表：

```
{Binding .} 
```

该对象实现了 INotifyPropertyChanged 接口。在我绑定到该对象上的属性的情况下：

```
{Binding someProperty} 
```

我可以调用属性更改事件，我的列表将被更新。但是，如果我绑定到我的对象本身，我如何通知列表对象已更改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T23:54:30.060

一个简短的答案是...

1）如果你想让它更新 - 并且 INotify... 工作 - 你需要重新组织你的视图模型 - 并绑定到“父视图模型”的属性。

2）或者你可以组成一个“临时属性” - 例如
`public YourObject MySelf {get{return this;}set{}}`

3）或者在某些情况下（取决于你有什么）你可以使用`MultiBinding`（`{Binding .}`this）和其他一些属性——然后“通知”（另一个属性）。

我在这里（**第 4 点**）
[在 INotifyPropertyChanged 上刷新了值转换器，对此进行了更详细的描述](https://stackoverflow.com/questions/15868582/refreshing-value-converter-on-inotifypropertychanged/15868643#15868643)

# python - Python：大量 2D numpy 数组......如何在 3D 中可视化？

> ID：16072197
> 
> 赞同：3
> 
> 时间：2013-04-17T23:46:05.343
> 
> 标签：python

我有一大组（100+）256x256 标量 2D numpy 数组。每个阵列基本上是通过 3D 图像的切片，并且每个阵列都是均匀分离的。

我有点像 python 菜鸟......关于如何创建一个漂亮的 3d 数据可视化的任何提示？

我需要将 100 多个 2D 标量数组编译成更大的 3D 数组吗？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:59:32.227

你需要给我们更多的信息，因为你如何想象它取决于你想从中得到什么！请注意，这个问题总是会有多个可能的答案，因为您试图在 2D 屏幕上显示本质上是 3D 的信息。

一种方法是[创建一个](http://matplotlib.org/faq/howto_faq.html#make-a-movie)二维“表面”情节的电影，然后回放它们。这基本上只是一个接一个地绘制所有切片。

如果您想一次查看所有 3D 数据，您很可能不能，因为我不知道任何用于 Python 的体积绘图工具。可能最接近的是[MayaVi](http://docs.enthought.com/mayavi/mayavi/mlab.html)

如果您尽可能详细地向我们提供有关您想要完成的任务的更多信息，我们可以为您指出更具体的示例/代码资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:56:07.350

不完全确定您希望可视化效果如何？听起来有点像您想要可视化 4D 函数？

您可以在空间中创建一个 3D 网格（参见例如[Numpy meshgrid in 3D](https://stackoverflow.com/questions/1827489/numpy-meshgrid-in-3d)），然后使用矩阵/矩阵数的值来为散点图中的点着色？

如果您可以详细说明您想看到的内容，可能会更具体。

编辑：

好吧，在您发表评论之后，这听起来仍然非常难以可视化，但我想您可以这样做（我已经生成了随机数据，并且大小比您要小得多）

```
import matplotlib as mpl
from mpl_toolkits.mplot3d import Axes3D
import numpy as np
import matplotlib.pyplot as plt

(X,Y,Z) = np.mgrid[-10:10:25j, -10:10:25j, -10:10:10j]

col = np.random.rand(25,25,10)

fig = plt.figure(1)
fig.clf()
ax = Axes3D(fig)

ax.scatter(X,Y,Z, c=col)

plt.draw()

plt.show() 
```

导致

![在此处输入图像描述](https://i.stack.imgur.com/g7b8u.png)

请注意，对于非随机数据，这可能没有那么无用。

# artifactory - Archiva 或 Artifactory 使用 localhost 以外的东西

> ID：16072199
> 
> 赞同：0
> 
> 时间：2013-04-17T23:46:07.080
> 
> 标签：artifactory, archiva

我想在独立模式下使用 Archiva 或 Artifactory，但我想将其配置为侦听“localhost”以外的其他内容。

我的内部存储库位于我的内部网络和 Internet 之间的系统上。

我想将其中任何一个配置为侦听内部 IP 地址。

这可能吗？

TIA，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:19:13.780

对于档案，请查看名为 jetty.xml 的文件，您会发现一行

```
<Set name="host"><SystemProperty name="jetty.host"/></Set> 
```

通常您可以使用 ip 或主机进行设置。

高温高压

# java - 将随机数组列表从大到小排序

> ID：16072201
> 
> 赞同：1
> 
> 时间：2013-04-17T23:46:32.617
> 
> 标签：java, arrays, sorting

好吧，我的任务是，我必须按照从大到小的顺序对一系列随机数进行排序。随机数来自 indexOfMaxInRange，取最大数的索引返回。在 swapElements 中，它基本上必须将最高元素的索引交换到 a[0]，第二高到 a[1]，依此类推。这两个方法是通过 sortarray 传递的。请给我一些关于如何完成这个以及我做错了什么的意见，谢谢。PS：由于各种原因，例如打印，并非所有内容都在代码中被调用。

这是我的代码：

```
public static void main(String[] args) {

    int[] array = randomIntArray (10);   
    int index = indexOfMaxInRange (array, -5, 15 );
    swapElement (array, index, 0);

}

  public static int randomInt (int low, int high){ // Create a serie of random numbers
    int x = 0;
    for (int i = 0; i < 10; i++){
        x = (int)(Math.random ()* (high - low) +low);

    }  
    return x;

}
public static int[] randomIntArray (int n) { // Size of array
    int[] a = new int [n];
    for (int i = 0; i <a.length; i++){
        a[i] = randomInt (-5, 15);
    }
    return a;
}

public static int indexOfMaxInRange (int[] a, int low , int high){ //Find the index of the largest element
    int [] b = new int [a.length];
    int index = 0;
    for (int i = 0; i < a.length-1; i++){
        if (a[i] >= low && a[i] < high)index++;  
        if (a[i] > a[i+1]){ 
            b[i] = a[i]; 

        }
        System.out.println (b[i]+"\t"+ (index));
    }  
    return index ;

}
public static int swapElement (int []a, int index , int i){ // Swap the element within the array
    int temp = 0;
    System.out.println ();
    for ( i = 0; i <a.length; i++){
        temp = index;
        a[i] = a[a.length - i - 1]; 
        temp = a[a.length - i - 1]; 

        System.out.println (temp + "\t"+ index);
   } 
    return temp;
}

public static void sortArray (int[] array){ 

    for (int i = 0; i <array.length; i++){    
    int index = indexOfMaxInRange (array, -5, 15 );
    swapElement (array, index, 0);

        System.out.println (); // This will print out the newly arranged order of the numbers.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:55:29.317

```
public class SortArray {
    public static void main(String[] args) {
        int[] unsortedArray = getRandomArray(10, -5, 15);
        printArray("Unsorted Array:", unsortedArray);
        System.out.println("Max element is at index: "+getMaxElementIndex(unsortedArray));
        printArray("Sorted Array in descending order:", sortArray("desc", unsortedArray));
        printArray("Sorted Array in asending order:", sortArray("asc", unsortedArray));
    }

    public static int[] getRandomArray(int length, int min, int max) {
        if(length == 0)
            throw new RuntimeException("Cannot create a zero length array.");
        int[] toReturn = new int[length];

        for(int i = 0; i < length; i++) {
            toReturn[i] = getRandomNumber(min, max, toReturn);
        }
        return toReturn;
    }

    public static int getRandomNumber(int min, int max, int[] array) {  
        int toReturn = (int)(Math.random ()* (max - min) +min);
        for(int i = 0; i<array.length;i++)
        {
            //Avoid duplicates and recurse if the number is already found in the array.
            if(toReturn == array[i])
                toReturn = getRandomNumber(min, max, array);
        }
        return toReturn;
    }

    public static void printArray(String label, int[] array) {
        System.out.println(label);
        for(int i=0;i<array.length;i++)
            System.out.print(array[i]+" ");
        System.out.println();
    }

    public static int getMaxElementIndex(int[] array) {
        int maxNum = -9999999;
        int index = -9999999;
        for(int i=0;i<array.length;i++)
        {
            if(maxNum == -9999999 || array[i] >= maxNum) {
                maxNum = array[i];
                index = i;
            }

            if(index == -9999999 && i == array.length - 1)
                index = i;
        }
        return index;
    }

    public static int[] sortArray(String direction, int[] array) {
        int temp = 0;
        if(direction.equalsIgnoreCase("desc") || direction.equalsIgnoreCase("")) {
            for(int i=0; i<array.length - 1; i++) {
                for(int j = i; j < array.length; j++) {
                    if(array[j] >= array[i]) {
                        temp = array[j];
                        array[j] = array[i];
                        array[i] = temp;
                    }
                }
            }
        } else if(direction.equalsIgnoreCase("asc")) {
            for(int i=0; i<array.length - 1; i++) {
                for(int j = i; j < array.length; j++) {
                    if(array[j] <= array[i]) {
                        temp = array[j];
                        array[j] = array[i];
                        array[i] = temp;
                    }
                }
            }
        }
        return array;
    }
} 
```

# ruby-on-rails - 如何将来自两个不同模型的所有页面展示次数计算为一个数字？（导轨 3）

> ID：16072202
> 
> 赞同：1
> 
> 时间：2013-04-17T23:46:41.523
> 
> 标签：ruby-on-rails, ruby, rubygems

我正在使用印象派宝石，效果很好。

我在我的 user/show.html.erb 视图中使用它来计算一个人的个人资料的所有展示次数（user.rb 是可展示的）

```
<%= @user.impressionist_count %> 
```

我决定由用户分解每个微博，并决定也计算它（micropost.rb 是易受影响的）

在`micropost/show.html.erb`- 我正在使用此代码来计算特定帖子被查看的次数

```
<%= @micropost.impressionist_count %> 
```

我试图总结属于同一用户的所有@micropost.impressionist_count 并将其添加到user/show.html.erb。我怎样才能做到这一点？

所以用数学术语来说，这就是我想要做的

总计 = user.impressionist_count + sum(micropost.impressionist_count)s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:17:53.997

您尚未指定与此 gem 一起使用的数据库。它与 RDBMS 数据库以及 MongoDB 兼容。根据该选择，求和可能会执行不同的操作。

在 RDBMS 支持的系统中，您可以通过使用 JOIN（AR 用语中的：joins）简单地为给定用户预先加载所有相关的**微帖子。**抓取了所有相关的微博后，您可以简单地执行以下操作：

```
@user.impressionist_count + @user.microposts.sum(&:impressionist_count) 
```

Rails 为您提供了**Enumerable#sum** ( [http://api.rubyonrails.org/classes/Enumerable.html#method-i-sum](http://api.rubyonrails.org/classes/Enumerable.html#method-i-sum) )，您可以使用它。

在 Mongo 方面，我可以看到的唯一区别是您将对数据库发出的请求数量，**除非**您已将微帖子嵌入到每个用户文档中。

希望这可以帮助。

# extjs - 如何使用分页工具栏在网格面板上获取 KeyMap keydown 事件

> ID：16072203
> 
> 赞同：2
> 
> 时间：2013-04-17T23:46:42.193
> 
> 标签：extjs, extjs4

我正在尝试使用 pagingtoolbar 在我的网格面板上运行一个 keydown 事件，以便当您按住向上或向下箭头键时，它会继续浏览页面，而无需停止或重复按键。这个过程适用于 keyup 事件，但我没有设法让它识别 keydown 事件。

我的代码是最新的：

网格：

```
trackGrid = new Ext.grid.GridPanel({
        layout: 'fit',
        autoSizeColumns:false,
        autoHeight:true,
        maxHeight:400,
        frame:true,
        trackMouseOver:true,
        selModel: Ext.create("Ext.selection.RowModel"),
        store: TrackPaged,
        columns:[
            {header: 'Time', width:55, sortable: true, dataIndex: 'time'},
            {header: 'Speed', width:50, sortable: true, dataIndex: 'speed', renderer: this.renderTrackSpeed},
            {header: 'Dirn', width:50, sortable:true, dataIndex: 'hdg', tooltip: 'Direction of travel'},
            {header: 'ECode', width:70, sortable:true, dataIndex: 'event', renderer: this.renderTrackEvent, tooltip: 'Event Code'},
            {header: 'Status', width:50, sortable:true, dataIndex: 'sts'},
            {header: 'id', width:50, sortable:true, dataIndex: 'lid', hidden: true}
        ],
        viewConfig:{
            forceFit:true,
            EnableRowBody:true,
            showPreview:false
        },
        bbar:trackPagedToolbar,
        footerCfg:{
            html:'<div id="track-info" class="grid-info"><p>No events to display</p></div>'
        }
    }); 
```

我的键映射：

```
trackGrid.getEl().set({tabindex: "0"})

    trackGrid.getEl().addKeyMap({
        eventName: "keyup",
        binding: [{
            key: Ext.EventObject.ENTER,
            fn: function() {
                this.selectTrackMarkerInfo();
            }
        }, {
        key: [Ext.EventObject.RIGHT, Ext.EventObject.PAGE_DOWN],
        fn:  function(){ 
            trackPagedToolbar.moveNext();
                    trackGrid.getSelectionModel().select(0); 
        }
        },{
        key: [Ext.EventObject.LEFT, Ext.EventObject.PAGE_UP],
        fn: function(){ 
            trackPagedToolbar.movePrevious();
                    trackGrid.getSelectionModel().select(0);
        }
        }, {
            key: Ext.EventObject.HOME,
            fn: function() {
                trackPagedToolbar.moveFirst();
                    trackGrid.getSelectionModel().select(0);
            }
        }, {
            key: Ext.EventObject.END,
            fn: function() {
                trackPagedToolbar.moveLast();
                    trackGrid.getSelectionModel().select(TrackPaged.getCount()-1);
            }
        }]
    });

    trackGrid.getEl().addKeyMap({
        eventName: 'itemkeydown',
        binding: [{
        key: Ext.EventObject.DOWN,
        fn: function() {
            if (trackGrid.getSelectionModel().getSelection()[0].index % 14 == 13) {
                trackPagedToolbar.moveNext();
                trackGrid.getSelectionModel().select(0);
            }
        }
    }, {
        key: Ext.EventObject.UP,
        fn: function() {
            if (trackGrid.getSelectionModel().getSelection()[0] = 0) {
                trackPagedToolbar.movePrevious();
                trackGrid.getSelectionModel().select(13);
            }
        }
    }]
    }); 
```

从 KeyMap 的文档中，我没有成功尝试专门添加 trackGrid 的目标，并将事件更改为“itemkeydown”、“keydown”和“keypress”。当我按住任一键时，它们甚至都没有注册。

有人对此事有任何见解吗？

# php - 学习 SELECT FROM WHERE 准备好的语句

> ID：16072212
> 
> 赞同：0
> 
> 时间：2013-04-17T23:47:58.197
> 
> 标签：php, mysql

有人可以将以下代码重写为准备好的语句吗？

```
result = mysqli_query($con,"SELECT * FROM note_system WHERE note = '$cnote'") 
or die("Error: ".mysqli_error($con));

while($row = mysqli_fetch_array($result))
{
$nid = $row['id']; 

} 
```

我正在尝试学习准备好的陈述，并且无法从我在搜索时找到的许多示例中理解它是如何工作的。我希望如果我看到一些我熟悉的代码被重写为准备好的语句，它可能会为我点击。请不要 PDO，以我目前的知识水平，这对我来说太混乱了。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T00:14:02.433

你好 ButterDog 让我一步一步地带你了解 PDO。

第1步）

创建一个名为 connect.php 的文件（或任何你想要的）。每个需要数据库交互的 php 文件都需要此文件。

让我们开始也请注意我的评论：

```
?php

//We set up our database configuration
$username="xxxxx"; // Mysql username
$password="xxxxx"; // Mysql password

// Connect to server via PHP Data Object
$dbh = new PDO("mysql:host=xxxxx;dbname=xxxxx", $username, $password); // Construct the PDO variable using $dbh
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // Set attributes for error reporting very IMPORTANT!
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE); // Set this to false so you can allow the actual PDO driver to do all the work, further adding abstraction to your data interactions.
?> 
```

步骤 2) 需要 connect.php 请看一下：

```
require ('....../........./...../connect.php'); // Require the connect script that made your PDO variable $dbh 
```

步骤 3)

要启动数据库交互，只需执行以下操作，也请阅读代码注释。目前我们不会担心数组！获得 PDO 的全部 gyst 然后担心使它更容易使用！随着重复，“漫长的道路”会更多地理解代码。不要一开始就偷工减料，一旦你明白你在做什么，就削减它们！

```
$query = $dbh->prepare("SELECT * FROM note_system WHERE note = :cnote"); // This will call the variable $dbh in the required file setting up your database connection and also preparing the query!

$query->bindParam(':cnote', $cnote); // This is the bread and butter of PDO named binding, this is one of the biggest selling points of PDO! Please remember that now this step will take what ever variable ($cnote) and relate that to (:cnote)

$query->execute(); // This will then take what ever $query is execute aka run a query against the database

$row = $query->fetch(PDO::FETCH_ASSOC); // Use a simple fetch and store the variables in a array

echo $row['yourvalue']; // This will take the variable above (which is a array) and call on 'yourvalue' and then echo it. 
```

这就是[PDO 的全部内容。](http://www.php.net/manual/en/book.pdo.php)希望有帮助！

也看看[这个](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html#7.1)。这对我帮助太大了！

我也将[其](http://www.virtualsecrets.com/pdo-encryption-mysql-from-php.html)用作参考（有时）-该网站看起来很垃圾，但那里有关于 PDO 的质量信息。我也用[这个](http://www.kitebird.com/articles/php-pdo.html)，我发誓这是最后一个链接！因此，在此之后，任何问题都可以提出，但希望这可以成为 PDO 的一点参考指南。（希望哈哈）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T23:54:05.463

这是使用 PDO 的一种方法：

```
$sel = $db->prepare("SELECT * FROM note_system WHERE note=:note");
$sel->execute(array(':note' => $_POST['note']));
$notes = $sel->fetchAll(PDO::FETCH_ASSOC); 
```

请参阅第 1 行查询中的占位符，该占位符`:note`绑定到`$_POST['note']`第 2 行中的（或任何其他变量）。

如果我想使用不同的值再次运行该查询`:note`，我只需调用第 2 行和第 3 行。

显示结果：

```
foreach ($notes as $note) {

    echo $note['id'] . ": " . $note['text'] . "<br />";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T23:54:43.870

使用 pdo：

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

来自各种文档：

```
/* Connect to an ODBC database using driver invocation */
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';
$user = 'dbuser';
$password = 'dbpass';

try {
    $dbh = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

$sql = 'SELECT name, colour, calories
FROM fruit
WHERE calories < :calories AND colour = :colour';
$sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$sth->execute(array(':calories' => 150, ':colour' => 'red'));
$red = $sth->fetchAll(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T00:14:56.487

这应该可以帮助您走上正确的道路...

```
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT id FROM note_system WHERE note = ?";

$stmt = mysqli_stmt_init($link);
if(!mysqli_stmt_prepare($stmt, $query)) {
    print "Failed to prepare statement\n";
}
else {
    $note = "mynote";
    mysqli_stmt_bind_param($stmt, "s", $note);

    mysqli_stmt_execute($stmt);
    $result = mysqli_stmt_get_result($stmt);
    while ($row = mysqli_fetch_array($result))
    {
        $nid = $row['id'];
    }
}

mysqli_stmt_close($stmt);
mysqli_close($link); 
```

# vb.net - 将 PictureBox 内容发送到 MsPaint

> ID：16072215
> 
> 赞同：2
> 
> 时间：2013-04-17T23:48:06.103
> 
> 标签：vb.net, arguments, picturebox

我如何发送要在绘画中编辑的图片框的内容？我曾想过快速暂时保存它，然后发送要加载的临时地址，但我认为这会导致一些小的保存问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T01:36:50.403

不幸的是，我此时正在用 C# 提供答案。幸运的是，只有语法而不是内容必须改变。

假设这是您的图片框控件，获取内容（作为位图）并将其放在剪贴板上。现在您可以将它粘贴到 MSPaint 中，但是如果您将其设为前景等，您可以使用 SendMessage 或 SendKeys 等。

```
Bitmap bmp = new Bitmap(pictureBox1.Image);
Clipboard.SetData(System.Windows.Forms.DataFormats.Bitmap, bmp); 
```

一个糟糕的例子，可选打开 mspaint 并等待它出现，使用 SendKeys 粘贴。

```
 [DllImport("User32.dll", SetLastError = true)]
    public static extern IntPtr FindWindowEx(IntPtr parentHandle, IntPtr childAfter, string className, string windowTitle);

    [DllImport("user32.dll")]
    private static extern IntPtr GetForegroundWindow();

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool SetForegroundWindow(IntPtr hWnd);

    private static void TestSendPictureToMSPaint()
    {
        Bitmap bmp = new Bitmap(pictureBox1.Image);
        Clipboard.SetData(System.Windows.Forms.DataFormats.Bitmap, bmp);

        //optional#1 - open MSPaint yourself
        //var proc = Process.Start("mspaint");

        IntPtr msPaint = IntPtr.Zero;
        //while (msPaint == IntPtr.Zero) //optional#1 - if opening MSPaint yourself, wait for it to appear
        msPaint = FindWindowEx(IntPtr.Zero, new IntPtr(0), "MSPaintApp", null);

        SetForegroundWindow(msPaint); //optional#2 - if not opening MSPaint yourself

        IntPtr currForeground = IntPtr.Zero;
        while (currForeground != msPaint)
        {
            Thread.Sleep(250); //sleep before get to exit loop and send immediately
            currForeground = GetForegroundWindow();
        }
        SendKeys.SendWait("^v");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:12:49.203

回答我自己只是为了向其他可能想要一个简单示例的人展示我的工作代码。

所以用 img_picture 作为我的图片框

```
Dim sendimage As Bitmap = CType(img_picture.Image, Bitmap)
Clipboard.SetDataObject(sendimage)
Dim programid As Integer = Shell("mspaint", AppWinStyle.MaximizedFocus)
System.Threading.Thread.Sleep(100)
AppActivate(programid)
SendKeys.Send("^v") 
```

如果没有线程暂停，您将收到 AppActivate 错误，声称没有此类进程退出。

感谢布兰德的帮助。

# sql - PostgreSQL 分区查询按日期优化

> ID：16072217
> 
> 赞同：3
> 
> 时间：2013-04-17T23:48:16.480
> 
> 标签：sql, postgresql, query-optimization, partitioning, database-partitioning

我们有一个表，每月大约有 10 亿条记录。考虑到 18 个月的历史，我们谈论的是 180 亿条记录。

该表每周按日期分区（因此我们有大约 74 个分区）。

对于我们的一个查询，我们需要获取一个给定单元的最后 1000 条记录。像这样的东西

```
 SELECT code, obs_time
    FROM unit_position 
   WHERE unit_id = 1
ORDER BY obs_time DESC LIMIT 1000; 
```

问题是，为此我们在解释中有以下结果：

> 限制（成本=96181.06..96181.09 行=10 宽度=12）
> 
> -> 排序（成本=96181.06..102157.96 行=2390760 宽度=12）
> 
> ```
> Sort Key: unit_position .obs_time
> 
>  ->  Result  (cost=0.00..44517.60 rows=2390760 width=12)
>      ->  Append  (cost=0.00..44517.60 rows=2390760 width=12)
> 
>      ->  Seq Scan on unit_position (cost=0.00..42336.00 rows=2273600 width=12)
> 
>      ->  Seq Scan on unit_position_week350 unit_position (cost=0.00..21.60 rows=1160 width=12)
> 
>      ->  ... (ALL OTHER PARTITIONS) ...
> 
>      ->  Seq Scan on unit_position_week450 unit_position   (cost=0.00..21.60 rows=1160 width=12) 
> ```

另一方面，如果我们得到这样的查询（将查询限制在我们可以得到 1000 条记录的第一个区间），我们可以得到 2 倍以上的结果：

```
 SELECT fake, obs_time
    FROM unit_position 
   WHERE unit_id = 1
     AND obs_time >= NOW() - '7 weeks'::interval
ORDER BY obs_time DESC LIMIT 1000; 
```

问题是，考虑到我们是按 obs_time 排序的，有没有办法让查询使用分区并且只搜索需要的前 n 个分区？

在大多数情况下，结果将在最近的 4 个分区中（因此它只会搜索这 4 个分区），并且只有在极少数情况下，它才需要搜索所有分区。

如果在获得 n 个分区（按顺序）后找到 1000 个结果，则不会考虑其余分区（丢弃数十亿条记录）。测试/解释表明 PostgreSQL 没有这样做。它实际上适用于所有分区（如果它没有获得将查询限制为分区约束的 WHERE 状态。有没有办法强制执行此操作？（例如，在 ORACLE 中，可以向数据库引擎提出如何执行一些查询，即使我也不知道是否对分区执行此操作）

手动执行每个分区（给出间隔）的开销给我们带来了最差的结果（并且这样做我们实际上可以在没有分区的情况下工作，最好有不同的表）。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:48:22.690

此功能将一次动态查询一周，希望能利用分区的优势。[SQL小提琴](http://www.sqlfiddle.com/#!12/bcd3b/1)

```
create or replace function unit_position_limited_by(l integer)
returns setof unit_position
language plpgsql as $function$

declare
    week timestamp := date_trunc('week', transaction_timestamp());
    total integer := 0;
    inserted integer;
    not_exists boolean;
begin
    loop
        return query execute $$
            select *
            from unit_position
            where
                unit_id = 1
                and obs_time >= $1 and obs_time < $2
            order by obs_time desc
            limit $3
        $$ using week, week + interval '1 week', l - total;
        get diagnostics inserted := row_count;
        total := total + inserted;
        exit when total = l; 
        if inserted = 0 then
            execute $$
                select not exists (
                    select 1
                    from unit_position
                    where obs_time < $1
                    )
            $$ into not_exists using week;
            exit when not_exists;
        end if;
        week := week - interval '1 week';
    end loop;
end; $function$; 
```

要从中选择：

```
select *
from unit_position_limited_by(1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:37:14.693

PostgreSQL 的分区有点小技巧，这是显示的领域之一。没有“智能分区扫描”节点类型可以锁定所有分区，但只能按顺序扫描它们，直到满足行数要求。

分区扫描限制仅使用 完成`constraint_exclusion`，这要求查询计划器能够从查询中的常量证明不需要分区。

正确解决您的问题需要在 PostgreSQL 中添加新的扫描类型，其中 Pg 在查询开始时锁定所有分区，但仅扫描它们直到满足外部计划节点的行计数要求。

您已经找到了一种更好的解决方法，即添加一个常量来限制扫描哪些分区。*尽管您可以*自己编写一个明确的计划，但没有查询提示来限制扫描的分区，例如：

```
 SELECT code, obs_time
    FROM (
        SELECT * FROM unit_position_week_350
        UNION ALL
        SELECT * FROM unit_position_week_349
        UNION ALL
        SELECT * FROM unit_position_week_348
        UNION ALL
        SELECT * FROM unit_position_week_347
        UNION ALL
        SELECT * FROM unit_position_week_346
        UNION ALL
        SELECT * FROM unit_position_week_345
   ) unit_position_350_to_345
   WHERE unit_id = 1
ORDER BY obs_time DESC LIMIT 1000; 
```

...但我还没有测试过这个计划如何以及它是否表现得体。您可能需要将 移动`ORDER BY`到子查询中，甚至`unit_id`如果规划器没有将该条件推到其自身中。

# capybara - Poltergeist Rspec If-None-Match If-Modified-Since 标头

> ID：16072222
> 
> 赞同：0
> 
> 时间：2013-04-17T23:49:25.450
> 
> 标签：capybara, phantomjs, poltergeist

我有一个功能规范，可以向同一个 url 发出两个访问请求。预期的行为是第二​​个请求应该返回 304。但是这并没有发生。我已经设置了 phantomjs_options: ['--disk-cache=true'] 但这似乎没有达到预期的效果。是否需要配置其他一些设置以使用 If-None-Match 和 If-Modified-Since 标头？

下面的一个例子：

```
visit "/p/:id"
page.driver.status_code.should eq 200
visit "/p/:id"
page.driver.status_code.should eq 304 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:40:34.313

我不确定这一点。我建议仅使用 PhantomJS 对其进行测试，看看您是否可以在那里复制问题 - 如果可以，请针对 PhantomJS 提交错误。

# c++ - 按类型比较指针？

> ID：16072223
> 
> 赞同：2
> 
> 时间：2013-04-17T23:49:32.517
> 
> 标签：c++, c, pointers, types

如何比较两个指针以查看它们是否属于同一类型？

说我有...

```
int * a;
char * b; 
```

我想知道这两个指针的类型是否不同。

细节：

我正在使用查找表（实现为 2D void 指针数组）来存储指向各种类型结构的指针。我想使用一个插入函数来比较给定的指针类型与存储在表的第一行中的类型。如果它们匹配，我想将指针添加到该列中的表。

基本上我希望能够将每个传入类型存储到它自己的列中。

![在此处输入图像描述](https://i.stack.imgur.com/19SUT.jpg)

欢迎使用替代方法来实现这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T23:51:10.370

在这种情况下，由于您事先知道类型，因此检查没有多大意义。你可以继续知道它们是不同的类型。

但是，假设类型可能依赖于模板参数等一些编译时属性，您可以使用[`std::is_same`](http://en.cppreference.com/w/cpp/types/is_same)：

```
std::is_same<decltype(a), decltype(b)>::value 
```

这将是`true`如果它们是相同的类型，`false`否则。

# git - 将提交推送到 2 个不同的远程分支？

> ID：16072224
> 
> 赞同：1
> 
> 时间：2013-04-17T23:49:42.990
> 
> 标签：git, git-push, git-remote

我有两个远程分支，分支 A 和分支 B。

考虑我签出分支 A、提交并推送的情况。现在，我想将相同的提交推送到分支 B。这两个分支完全不同，所以我不能 user `rebase`，可以吗？因为如果我这样做`git rebase`了，我会将所有更改从一个分支重新定位到另一个分支，但我只需要一次提交即可。我怎样才能做到这一点？

PS。现在我用一种愚蠢的方式来做：我检查分支 B，从分支 A 中挑选最后一次提交，然后推送到 B（远程）。这样我不喜欢我需要切换到分支 B。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T00:31:10.793

这就是`git cherry-pick`目的。由于您的分支彼此非常不同，并且您不想这样做，`merge`或者`rebase`因为它只有一次提交，所以这是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:25:05.103

如果您的意思是两个不同的存储库，那么我认为您想要的是多个遥控器。

您可以随时添加新的遥控器`git add remote abc git@github.com:msh/your_app_name.git`

然后您可以使用 git push 将 master 推送到它，例如

```
git push abc master 
```

通常，对于 github，您使用 'origin' 作为初始遥控器，因此通常使用`git push origin master`(通常缩写为`git push origin`或只是`git push`，但是您可以随意添加其他遥控器并使用 推送给它们`git push [repo_name] [branch_name]`。如果您有多个遥控器，您应该始终指定哪个推的时候一个。

# javascript - 将字符串数组从 ASP.NET 传递到 JavaScript

> ID：16072230
> 
> 赞同：1
> 
> 时间：2013-04-17T23:50:13.490
> 
> 标签：javascript, asp.net, ajax, json

我试图从 JavaScript 调用服务器端，然后将字符串数组传递回 JavaScript，但遇到了问题。

```
// Call the server-side to get the data.
$.ajax({"url" : "MyWebpage.aspx/GetData",
        "type" : "post",
        "data" : {"IdData" : IdData},
        "dataType" : "json",
        "success": function (data)
        {
            // Get the data.
            var responseArray = JSON.parse(data.response);

            // Extract the header and body components.
            var strHeader = responseArray[0];
            var strBody = responseArray[1];

            // Set the data on the form.
            document.getElementById("divHeader").innerHTML = strHeader;
            document.getElementById("divBody").innerHTML = strBody;
        }
}); 
```

在 ASP.Net 服务器端，我有：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public static object GetTip(String IdTip)
{
    int iIdTip = -1;
    String[] MyData = new String[2];

    // Formulate the respnse.
    MyData[0] = "My header";
    MyData[1] = "My body";

    // Create a JSON object to create the response in the format needed.
    JavaScriptSerializer oJss = new JavaScriptSerializer();

    // Create the JSON response.
    String strResponse = oJss.Serialize(MyData);

    return strResponse;
} 
```

我可能把事情搞混了，因为我还是 JSON 的新手。

更新错误代码：

```
Exception was thrown at line 2, column 10807 in     http://localhost:49928/Scripts/js/jquery-1.7.2.min.js 
```

0x800a03f6 - JavaScript 运行时错误：无效字符

堆栈跟踪：解析 JSON[jquery-1.7.2.min.js] 第 2 行

我的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:07:31.827

这纯粹是出于猜测。但是看看这是否是你得到的： - 在你的`Ajax`调用中，你的数据类型是 json 并查看你返回 json 字符串的方法。所以你不需要做 JSON.parse(data.response)。相反，只需看看以下内容是否适合您。我也没有在你的 Json 中看到一个`response`对象，而它只是一个数组。所以它必须试图解析`undefined`

```
 var strHeader = data[0];
 var strBody = data[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T00:52:43.653

我将您的 ajax 调用脚本修改为：

```
// Call the server-side to get the data.
$.ajax({
    url: "WebForm4.aspx/GetTip",
    type: "post",
    data: JSON.stringify({ IdTip: "0" }),
    dataType: "json",
    contentType: 'application/json',
    success: function (data) {
        // Get the data.
        var responseArray = JSON.parse(data.d);

        // Extract the header and body components.
        var strHeader = responseArray[0];
        var strBody = responseArray[1];

        // Set the data on the form.
        document.getElementById("divHeader").innerHTML = strHeader;
        document.getElementById("divBody").innerHTML = strBody;
    }
}); 
```

请注意，我添加`contentType: 'application/json'`并更改了

```
var responseArray = JSON.parse(data.response); 
```

到

```
var responseArray = JSON.parse(data.d); 
```

# mysql - MySQL - 当只有一列重复时，显示不同表中列的重复数据

> ID：16072234
> 
> 赞同：0
> 
> 时间：2013-04-17T23:50:35.163
> 
> 标签：mysql

我有这样的查询，它很好地向我展示了哪个 product.model 被复制：

```
SELECT product.model, product_description.name, COUNT( * ) AS Count
FROM product, product_description
WHERE product.product_id = product_description.product_id
GROUP BY product.model ORDER BY COUNT
HAVING Count >1 
```

但是我不能强制此查询为每个重复的 product.model 显示 product_description.name 的内容，以比较 product_description.name

我试图在这个结果上输入，但我得到的只是'#1241 - 操作数应该包含 1 列'。知道如何进一步处理此结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:56:43.980

您将需要一个子查询来执行此操作：

```
select 
    p.model, pd.name
from 
    product as p, product_description as pd
where 
    p.product_id = pd.product_id
    and p.model in (
        select p.model 
        from product as p, product_description as pd 
        where p.product_id = pd.product_id 
        group by p.model having count(p.name)>1) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:05:53.830

根据您想要的结果，如果您想查看哪些型号在产品表中有多个记录，然后想查看关联的产品描述，您可以使用`GROUP_CONCAT`组合您的描述。

```
SELECT p.model, group_concat(pd.name), COUNT( 1 ) AS Count
FROM product p
  INNER JOIN product_description pd USING (product_Id)
GROUP BY p.model
HAVING COUNT(1) > 1
ORDER BY 3 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/0d92a/1)

还有其他方法可以在不同的行中返回，这取决于您的需要。

# javascript - jquery 30天查询

> ID：16072237
> 
> 赞同：3
> 
> 时间：2013-04-17T23:51:17.383
> 
> 标签：javascript, jquery

我目前正在观看一个教程视频“学习 jQuery 的 30 天”。我有一个关于为什么视频中的导师从函数**返回变量的问题。**

这是代码：

这是在 HTML 文件中，它只是将事件处理程序绑定到按钮、调用函数等。

```
(function() {

    slider.nav.find('button').on('click', function() {
        slider.setCurrent( $(this).data('dir') );
        slider.transition();
    });     
})(); 
```

这是我感兴趣的一个函数（在 js 文件中）：

```
Slider.prototype.setCurrent = function( dir ) {
    var pos = this.current;

    pos += ( ~~( dir === 'next' ) || -1 );
    this.current = ( pos < 0 ) ? this.imgsLen - 1 : pos % this.imgsLen;

    return pos; // <== HERE

}; 
```

我唯一想弄清楚的是为什么`return pos`？我尝试删除它，代码仍然有效。

这是一个错误还是有合理的逻辑？

简而言之，`setCurrent`函数被调用并`setCurrent`返回一个值。但为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:09:16.910

我无法推测您的导师为什么这样做，但是一种常见的做法，尤其是在 jQuery 中，是通过根据传递的参数让相同的函数同时作为 setter 和 getter 来重载函数。下面是一个例子：

```
function (dir)
{
    //If dir was passed as a parameter
    if (typeof dir !== "undefined")
    {
        //Setter code
        value = dir;
    }
    //Getter (always returns value)
    return value;
} 
```

jQuery 中有大量的函数使用它，例如`.val`, `.height`,`.css('propertyName', [optionallySetValue])`等。

让我知道这是否有意义，或者如果您有任何问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T23:59:28.547

如果不查看其余代码，很难知道，但通常在对象上设置值的函数会返回一些东西，即使这是违反直觉的，因为它们的目的是设置一个值，而不是获取一些东西。

您将看到的最常见的模式是返回对象本身。允许您一次将多个 setter 调用链接在一起：

```
object.setColor("red").setSize("large"); 
```

在您的情况下，这并没有具体发生，但作者可能已经想到了类似的用途，因为他想一次做两件事：设置一个值，并获取有关如何设置该值的一些信息。

# windows - Github windows，整个文件在提交后显示更改。

> ID：16072238
> 
> 赞同：5
> 
> 时间：2013-04-17T23:51:33.357
> 
> 标签：windows, git

我正在使用 github windows 应用程序。我似乎在显示哪些已更改和哪些未更改时遇到了问题。在我正确提交之前，它只显示更改的行，但在我提交之后，它显示文件中的所有行都已更改。有什么办法让它停止吗？

这很烦人，任何帮助将不胜感激。ps，我确保它们不是行尾问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T01:56:28.257

这是常见[`core.autocrlf`](http://git-scm.com/book/ch7-1.html)问题（您的客户端中的设置不同，Github 客户端中*肯定是错误的） - 仔细阅读“格式和空白”主题和***core.autocrlf**部分

**PS**：您可以使用不同的方法测试我的语句，这可以忽略比较文件中的 EOL 差异

# ruby-on-rails - Capybara 找不到元标记

> ID：16072240
> 
> 赞同：23
> 
> 时间：2013-04-17T23:51:59.083
> 
> 标签：ruby-on-rails, rspec, capybara

Capybara 2.1.0 似乎没有找到任何元标记：

```
(rdb:1) p page.find 'meta'
*** Capybara::ElementNotFound Exception: Unable to find css "meta" 
```

即使它们出现在`page.source`：

```
(rdb:1) p page.source
"<!doctype html>\n<html>\n<head>\n<title>MyTitle</title>\n<meta charset='utf-8'>\n<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>\n<meta content='width=device-width, initial-scale=1' name='viewport'>\n<meta name='description'>\n\n..." 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-17T23:51:59.083

解决方案是使用`:visible => false`in`find`或 in `have_selector`：

```
page.should have_css 'meta[name="description"]', visible: false 
```

或者：

```
page.find 'meta[name="description"]', visible: false 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-16T05:29:18.183

如果您想查看更具体的元数据，包括描述文本等：

[https://gist.github.com/Lordnibbler/6247531](https://gist.github.com/Lordnibbler/6247531)

```
RSpec::Matchers.define :have_meta do |name, expected|
  match do |actual|
    has_css?("meta[name='#{name}'][content='#{expected}']")
  end

  failure_message_for_should do |actual|
    actual = first("meta[name='#{name}']")
    if actual
      "expected that meta #{name} would have content='#{expected}' but was '#{actual[:content]}'"
    else
      "expected that meta #{name} would exist with content='#{expected}'"
    end
  end
end

RSpec::Matchers.define :have_title do |expected|
  match do |actual|
    has_css?("title", :text => expected)
  end

  failure_message_for_should do |actual|
    actual = first("title")
    if actual
      "expected that title would have been '#{expected}' but was '#{actual.text}'"
    else
      "expected that title would exist with '#{expected}'"
    end
  end
end 
```

然后，像这样查找元数据：

`page.should have_meta(:description, 'Brand new Ruby on Rails TShirts')`

从 Spree 借来的爱：[https ://github.com/spree/spree/blob/master/core/lib/spree/testing_support/capybara_ext.rb](https://github.com/spree/spree/blob/master/core/lib/spree/testing_support/capybara_ext.rb)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-03T05:28:42.797

提议的解决方案在 2021 年不起作用，但以下解决方案确实有效

```
page.find('//head/meta[name="description"]', visible: false)[:content] 
```

根据[https://rubydoc.info/github/jnicklas/capybara/Capybara/Node/Element](https://rubydoc.info/github/jnicklas/capybara/Capybara/Node/Element)

> Element 还可以访问 HTML 属性和元素的其他属性：
> 
> bar.value bar.text bar[:title]

# ruby-on-rails - 无法在 Rails 中使用 Devise 和 CanCan 进行注册

> ID：16072242
> 
> 赞同：0
> 
> 时间：2013-04-17T23:52:00.747
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, ruby-on-rails-3.2

我一直在开发我的应用程序，其中我有许多角色和一些用户。

但是突然间我不能再注册了。登录工作正常，但注册总是将我重定向回签名页面并产生相同的错误：

![在此处输入图像描述](https://i.stack.imgur.com/086SE.png)

当我尝试注册时，控制台总是显示以下内容：

```
Started POST "/registers/user/registration" for 127.0.0.1 at 2013-04-18 00:48:22 +0100
Processing by RegistersController#registration as HTML
  Parameters: {"utf8"=>"✓",     "authenticity_token"=>"ofucDxxzZFbTVLfVaA3QxixOHL2V9hzxfSFU/99Pd60=", "user"=>{"name"=>"Omar Arroum", "email"=>"omar@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up", "id"=>"user"}
Completed 401 Unauthorized in 1ms

Started GET "/users/sign_in" for 127.0.0.1 at 2013-04-18 00:48:22 +0100
Processing by Devise::SessionsController#new as HTML
  Rendered devise/shared/_links.html.erb (0.4ms)
  Rendered devise/sessions/new.html.erb within layouts/application (9.8ms)
  Rendered layouts/_navigation.html.erb (1.3ms)
  Rendered layouts/_messages.html.erb (0.1ms)
Completed 200 OK in 63ms (Views: 61.6ms | ActiveRecord: 0.0ms) 
```

我没有对 `user_controller.rb 进行任何更改，所以不确定是什么导致了这个问题

编辑：添加了`RegistersController`

```
class RegistersController < ApplicationController
  #before_filter :authenticate_user!
  load_and_authorize_resource

  # GET /registers
  # GET /registers.json
  def index
    @registers = Register.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @registers }
    end
  end

  # GET /registers/1
  # GET /registers/1.json
  def show
    @register = Register.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @register }
    end
  end

  # GET /registers/new
  # GET /registers/new.json
  def new
    @register = Register.new(:event_id => params[:event_id])
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @register }
    end
  end

  # GET /registers/1/edit
  def edit
    @register = Register.find(params[:id])
  end

  # POST /registers
  # POST /registers.json
  def create
    @register = Register.new(params[:register])

    respond_to do |format|
      if @register.save
        format.html { redirect_to @register, notice: 'Register was successfully created.' }
        format.json { render json: @register, status: :created, location: @register }
      else
        format.html { render action: "new" }
        format.json { render json: @register.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /registers/1
  # PUT /registers/1.json
  def update
    @register = Register.find(params[:id])

    StudentRegister.find_all_by_register_id(@register).each do |streg|
      streg.update_attributes(:present => false, :late => false)
      #sets the users status as being absent, mainly for the purpose of when copying a new register,
      #as the presence and lateness is otherwise maintained
    end

    respond_to do |format|
      if @register.update_attributes(params[:register])
        format.html { redirect_to @register, notice: 'Register was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @register.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /registers/1
  # DELETE /registers/1.json
  def destroy
    @register = Register.find(params[:id])
    @register.students.delete_all_on_destroy
    @register.destroy

    respond_to do |format|
      format.html { redirect_to registers_url }
      format.json { head :no_content }
    end
  end

  def registration
    @studentregister = StudentRegister.find_all_by_register_id(params[:id])

  end

  def copy
    @register = Register.find(params[:id]).amoeba_dup #Creates a duplicate of the existing register with all Students in it
    @register.date = Date.today #Sets the registers date to today's date
    @register.save

    respond_to do |format|
      format.html { redirect_to edit_register_path(@register) } #Redirects to the edit page so that they can make any updates
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:13:07.087

好的，找出问题所在。

由于我有一个名为的文件`Registration.html.erb`和一个动作名称，`registration`我的路线看起来像这样：

```
match 'registers/:id/registration' => 'registers#registration', :as => 'registration'  #Route for taking the register 
```

问题是 Devise 在内部使用了这个动作名称，所以我的代码被错误地路由了。

为了解决这个问题，我将所有名称更改为`registration`，`take_register`如下所示：

```
match 'registers/:id/take_register' => 'registers#take_register', :as => 'take_register'  #Route for taking the register 
```

这对我有用，现在一切正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:59:18.070

您正在`before_filter :authenticate_user!`您的 RegistersController 中进行操作（很可能）。这就是使用 Devise 产生 401 响应和闪现消息的原因。CanCan应该与它无关。发布您的 RegistersController。

# ios - 保持键盘始终在顶部和可见

> ID：16072243
> 
> 赞同：5
> 
> 时间：2013-04-17T23:52:01.337
> 
> 标签：ios, objective-c, uitextfield, uikeyboard

我有一个文本字段、一个图像和几个按钮的视图。我想确保显示键盘并在显示视图时位于顶部，并且我想确保在我在文本字段中输入内容并提交后它不会消失。

我`[txtField becomeFirstResponder]`用 viewdidload 调用了键盘，默认情况下会出现键盘，但在显示视图后会有一点延迟。

在我提交了我的文本字段后，becomefirstresponder 也没有帮助。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T00:16:38.517

> 在我提交了我的文本字段后，becomefirstresponder 也没有帮助。

那部分没有意义。默认情况下，文本字段不会关闭键盘，除非*您*`endEditing:`使用或关闭它`resignFirstResponder`。*如果键盘正在*消失，您必须让它消失。所以不要，也不会。

`didEndOnExit`编辑：确实，您的评论后来揭示了答案：您已经从文本字段中连接了控制事件。好吧，当用户按下完成按钮时，这会导致键盘被关闭！因此，您实际上是在打自己的脸，然后抱怨有人在打您的脸。

因此，显然，解决方案是*不要*`didEndOnExit`将控制事件（与任何东西）挂钩。相反，只需给文本字段一个委托并使用委托消息来了解用户在做什么。这些都没有关于键盘的任何自动行为，因此键盘不会自动关闭。例如，要了解用户何时键入，请使用`textField:shouldChangeCharactersInRange:replacementString:`. 要了解用户何时点击完成按钮，请使用`textFieldShouldReturn:`. 等等。

# java - 您如何获取输入的字符并将它们输出一定次数？

> ID：16072244
> 
> 赞同：0
> 
> 时间：2013-04-17T23:52:14.060
> 
> 标签：java, loops, methods, user-input, void

`x`我必须编写一个程序，该程序接受两个输入的字符并使用一种方法将它们打印出来。到目前为止，它将输出数字而不是字符。我该如何解决？

```
int length;
char ch1;
char ch2;

System.out.print("Enter a character: ");
ch1 = input.nextLine().charAt(0); //input refers to scanner.
System.out.print("Enter second character: ");
ch2 = input.nextLine().charAt(0); //input refers to scanner.
System.out.print("Enter the length of the line: ");
length = input.nextInt(); //input refers to how many times the characters ar$
draw_line(length, ch1, ch2);

//Method starts here.

public static void draw_line(int length, char ch1, char ch2){
    for (int i = 0; i < length; ++i){
        System.out.print(ch1 + ch2);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:58:13.207

这是因为添加字符不是串联。请看这个问题：[在Java中，两个字符相加的结果是int还是char？](https://stackoverflow.com/questions/8688668/in-java-is-the-result-of-the-addition-of-two-chars-an-int-or-a-char)

你想要的是一个包含两个字符的字符串，可能最短的编辑是：

```
System.out.print("" + ch1 + ch2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T23:58:16.403

将 char 传递给以将[`Character.toString(char)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#toString%28char%29)其转换为`String`.

```
System.out.print(Character.toString(ch1) + Character.toString(ch2)); 
```

# java - 对象化泛型编译时错误与 Java 7 中的不兼容对象

> ID：16072247
> 
> 赞同：1
> 
> 时间：2013-04-17T23:53:02.900
> 
> 标签：java, objectify

在 java 6 中，以下行编译但是在 Java 7 中我得到一个不兼容的类型错误（见下文）。有什么想法吗？

```
Player player = new FPlayer();
player.setId("SomeString");
player.setWId(123456, "SomeString");

Key<Player> keyForPlayer = ofy().save().entity(player).now(); 
```

获取编译时错误

```
incompatible types
required: com.googlecode.objectify.Key<com.XX.XXXXXX.XXXXX.XXXXXX.Player>
found:    com.googlecode.objectify.Key<java.lang.Object> 
```

# c - 冒泡排序根本不起作用，如果语句没有执行

> ID：16072249
> 
> 赞同：0
> 
> 时间：2013-04-17T23:53:20.550
> 
> 标签：c, visual-studio-2010

我正在开发一个程序，该程序将用于对学生的考试分数进行排序，并最终检索分数的平均值、中位数和众数。由于某种奇怪的原因，我的冒泡排序不起作用..我不确定为什么。

```
#include <stdio.h>
#include <stdlib.h> 
#include <string.h>
#define N 3

int main (void)
{

char vStudents[N][15], trans = 'y', vTemp2;
int vScores[N], vTemp, x, i = 0, j=0, NewN;

printf("\t\tWhatsamatta U Scores System\n\n");

do
{
    printf("Please Enter Students Name: ");
    gets(vStudents[i]);
    trans = 'N';
    while (trans == 'N')
    {
        printf("Enter Students Score: ");
        scanf("%d", &vScores[i]);
        fflush(stdin);

        if (vScores[i] >= 0 & vScores[i] <= 100)
            trans = 'y';
        else 
            printf("Score is invalid, please re-enter score.\n");
    }
    i++;
    j++;
} while (j != N);

for(x = 0; x < N - 1; x++)
{   
    if ((x < N - 1) && (vScores[i] > vScores[i + 1]))
    {
        vTemp = vScores[i];
        vScores[i] = vScores[i + 1];
        vScores[i + 1] = vTemp;
        x = -1;
    }
}

printf("%d %d %d\n\n", vScores[0], vScores[1], vScores[2]);

system("Pause");
return 0; 
```

任何帮助都会很有用，在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T23:56:28.887

至少一个错误：

```
for(x = 0; x < vScores[N] - 1; x++)
{   
   if ((x < vScores[N] - 1) && (vScores[N] > vScores[N + 1]))
   { 
```

应该

```
 for(x = 0; x <N - 1; x++)
 {   
    if ((x < N - 1) && (vScores[N] > vScores[N + 1]))
    {
     //^^you should not compare index x with array elements 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T00:22:59.747

N 始终为 3。如果我们将代码中的 N 替换为 3，它仍然有意义吗？

```
for(x = 0; x < vScores[3] - 1; x++)
{   
    if ((x < vScores[3] - 1) && (vScores[3] > vScores[3 + 1]))
    {
        vTemp = vScores[3];
        vScores[3] = vScores[3 + 1];
        vScores[3 + 1] = vTemp;
        x = -1;
    }
} 
```

好的，现在是这样的：

```
for(x = 0; x < N - 1; x++)
{   
    if ((x < N - 1) && (vScores[i] > vScores[i + 1]))
    {
        vTemp = vScores[i];
        vScores[i] = vScores[i + 1];
        vScores[i + 1] = vTemp;
        x = -1;
    }
} 
```

请问，什么时候`i`改？

# uitableview - 使用情节提要在 xamarin ios 中创建和使用自定义原型表单元格

> ID：16072250
> 
> 赞同：2
> 
> 时间：2013-04-17T23:53:40.823
> 
> 标签：uitableview, xamarin.ios, prototype

是否可以使用情节提要在 xamarin ios (monotouch) 中创建和使用“自定义”原型表单元格？

我只能通过 Stuart Lodge 找到这个解释使用 xib/nibs 的方法： [http ://www.youtube.com/watch?feature=player_embedded&v=Vd1p2Gz8jfY](http://www.youtube.com/watch?feature=player_embedded&v=Vd1p2Gz8jfY)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-16T07:12:09.567

让我们来回答这个问题！我也在找这个。:)

1）打开Storyboard，你有你的ViewController和TableView：

添加原型单元格（如果之前没有添加单元格）：

根据需要自定义单元格（在我的情况下，有自定义 UIImage 和标签）：

[![在此处输入图像描述](https://i.stack.imgur.com/2miAY.png)](https://i.stack.imgur.com/2miAY.png)

[![在此处输入图像描述](https://i.stack.imgur.com/oB1Od.png)](https://i.stack.imgur.com/oB1Od.png)

请记住设置单元格的高度。为此，请选择整个 TableView，然后从“属性”窗口中选择“布局”选项卡。在属性窗口的顶部，您应该看到“行高” - 输入适当的值：

[![在此处输入图像描述](https://i.stack.imgur.com/2u3tF.png)](https://i.stack.imgur.com/2u3tF.png)

现在再次选择原型单元。在“属性”窗口中键入类的名称（它将为其创建代码隐藏类）。就我而言，这是“FriendsCustomTableViewCell”。之后为您的单元格提供“标识符”。如您所见，我的是“FriendCell”。最后要设置的是“样式”属性设置为自定义。“名称”字段应为空。键入“Class”后单击“enter”后，将自动创建代码隐藏文件：

[![在此处输入图像描述](https://i.stack.imgur.com/DvNK2.png)](https://i.stack.imgur.com/DvNK2.png)

[![在此处输入图像描述](https://i.stack.imgur.com/nonGW.png)](https://i.stack.imgur.com/nonGW.png)

现在单元格后面的代码应如下所示：

```
public partial class FriendsCustomTableViewCell : UITableViewCell
{
    public FriendsCustomTableViewCell (IntPtr handle) : base (handle)
    {
    }

    public FriendsCustomTableViewCell(NSString cellId, string friendName, UIImage friendPhoto) : base (UITableViewCellStyle.Default, cellId)
    {
        FriendNameLabel.Text = friendName;
        FriendPhotoImageView.Image = friendPhoto;

    }
    //This methods is to update cell data when reuse:
    public void UpdateCellData(string friendName, UIImage friendPhoto)
    {
        FriendNameLabel.Text = friendName;
        FriendPhotoImageView.Image = friendPhoto;

    }
} 
```

在 UITableViewSource 中，您必须在类的顶部声明 cellIdentifier（在我的情况下是“FriendCell”），在“GetCell”方法中，您必须转换单元格并为它们设置数据：

```
string cellIdentifier = "FriendCell";

public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
 {
  FriendsCustomTableViewCell cell = (FriendsCustomTableViewCell) tableView.DequeueReusableCell(cellIdentifier);
  Friend friend = _friends[indexPath.Row];

        //---- if there are no cells to reuse, create a new one
        if (cell == null)
        { cell = new FriendsCustomTableViewCell(new NSString(cellIdentifier), friend.FriendName, new UIImage(NSData.FromArray(friend.FriendPhoto))); }

        cell.UpdateCellData(friend.UserName, new UIImage(NSData.FromArray(friend.FriendPhoto)));

        return cell;
} 
```

就是这样，现在您可以使用自定义单元格了。我希望它会有所帮助。

# ruby-on-rails - 验证失败并呈现“新”操作后不保留 URL 参数

> ID：16072264
> 
> 赞同：1
> 
> 时间：2013-04-17T23:55:21.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我最初调用新函数时，所有变量都会正确加载。params[:code] 是在路由中定义的 URL 参数。但是，当 create 验证失败并呈现 new 时，不会加载 @m 变量（这会在“new”模板中调用 @m 的属性时导致 nomethoderror）。所以，渲染new后没有得到:code参数。但是，验证失败后是否可以保留 :code 参数？

```
 class AffiliatesController < ApplicationController

        def new
          @m = Merchant.find_by_code(params[:code])
          @affiliate = Affiliate.new
        end

        def create
          a = Affiliate.new(params[:affiliate])
          if a.save
             redirect_to 'http://' + params[:ref]
          else
             render 'new'
          end
       end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:57:57.360

`params[:code]`除了使用会话之外，另一种保留的方法是在表单中添加一个隐藏字段。

```
<%= form_for @affiliate do |f| %>
  <%= hidden_field_tag :code, @m.code %> 
```

然后将创建操作更改为

```
def create
  @affiliate = Affiliate.new(params[:affiliate])

  if @affiliate.save
    redirect_to 'http://' + params[:ref]
  else
    @m = Merchant.find_by_code(params[:code])
    render :new
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:30:05.163

在您调用之前，`render`您应该填写视图将使用的所有变量。因此，在您的情况下，您还需要在您之前`@m = ...` *从*`render 'new'`内部实例化`create`。

如果您需要一个额外的参数来完成此操作（`param[:code]`在您的情况下），我不建议您配置路由并通过 URI 传递此信息，这很复杂。

改用会话，它更容易！

例如：在`index`（或任何您有商家代码可用的地方）添加`session[:merchant_code] = the_code`.

变化`new`中`@m = Merchant.find_by_code(session[:merchant_code])`

干杯，

# css - 字体粗细在css中没有改变

> ID：16072265
> 
> 赞同：1
> 
> 时间：2013-04-17T23:55:32.020
> 
> 标签：css, styles, stylesheet, webfonts, google-webfonts

使用谷歌网络字体，我无法获得字体重量来产生结果。这三个权重确实有名称，但未在 href 链接中指定，所以我不确定是否需要添加名称。

这是代码的那部分：

```
<link href='http://fonts.googleapis.com/css?family=Quicksand:400,300,700' rel='stylesheet' type='text/css'><style type="text/css">
    body{
        background-color: white;
        margin-left: 20%;
        margin-right: 20%;
        border: none;
        padding: 10px 10px 10px 10px;
        font-family: Quicksand, sans-serif;
        font-weight: 300;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:12:45.203

我能够在小提琴中完成这项工作，这让我相信你有另一个字体粗细覆盖了你试图设置的字体粗细。使用 chrome 或 Firefox 的开发人员工具，您可以轻松找到覆盖您尝试设置的样式的样式。

记住：

1.  更具体的风格获胜（例如 ID 与类）
2.  稍后在样式表中找到的样式将覆盖表中较早的相同样式。

# python - Python列表值相互分配

> ID：16072266
> 
> 赞同：0
> 
> 时间：2013-04-17T23:55:35.543
> 
> 标签：python

我在编写以下代码时遇到问题：

```
D = [
        [0,3,8,999,-4],
        [999,0,999,1,7],
        [999,4,0,999,999],
        [2,999,-5,0,999],
        [999,999,999,6,0]
    ]

def FloydWarshall (W):
    matrices = [W[:]]
    pred = [W[:]]

    print (matrices is pred)
    print (pred is matrices)
    print (pred is W)
    print (matrices is W)

    for i in range(0,len(pred[0])):
        for j in range(len(pred[0][i])):

            if pred[0][i][j] != 999 and pred[0][i][j] != 0:
                pred[0][i][j] = i +1
            else:
                pred[0][i][j] = False 

    return (matrices,pred)
FloydWarshall(D) 
```

返回的值是完全相同的矩阵，这是为什么呢？打印语句说它们不是指向内存中同一位置的指针，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T00:00:17.050

您只是制作嵌套列表的浅表副本，因此对它们进行变异仍然会影响两个矩阵。您可能想使用`copy.deepcopy`

# java - 如何在 Java 中访问和修改来自不同类的变量

> ID：16072272
> 
> 赞同：-2
> 
> 时间：2013-04-17T23:56:02.323
> 
> 标签：java

这个问题可能看起来已经被问过数百万次了，那是因为它已经问过了。不幸的是，也许这只是我的错，但我不这么认为，它还没有得到彻底准确的回答。我一直在寻找这个问题的答案，遇到了很多模棱两可的问题，现在正在寻找一个真正好的答案。在我的研究中，我看到了以下内容：“使用静态变量，永远不要使用静态变量，使用 getter 和 setter，getter 和 setter 是邪恶的，Java 中不存在全局变量，使其成为公共变量，公共变量不应该被使用”等等。我想要的只是有一个变量，该变量的值可以从多个类访问和更改，并且这些多个类都可以看到对变量值所做的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:18:18.553

有很多不同的方法，这实际上取决于您希望变量有多安全。我倾向于使用 getter 和 setter 仅仅是因为跟踪方法调用比更改变量要容易得多。

如果它是一个唯一目的是在变量中保存值的类，那么您可能只想使用直接变量调用，但如果它们是功能更强大的类中的值，您可能会使用 getter 和 setter。

# html - 在Firefox中缩小时DIV背景图像被切断

> ID：16072276
> 
> 赞同：1
> 
> 时间：2013-04-17T23:56:14.330
> 
> 标签：html, css

我有一个高度/宽度为 15 像素的 DIV。它还有一个高度/宽度为 15 像素的背景图像。问题是当在 Firefox 中缩小某些级别时，背景图像在右侧和底部被切断了几个像素。这是下面的[链接](http://jsfiddle.net/xSRDs/)和代码。尝试在 Firefox 中查看。

```
 <div id="custom-checkbox"></div>

 #custom-checkbox 
 { 
     background: url('http://s16.postimg.org/5xacziapd/unchecked.png') no-repeat; 
     width: 15px;
     height: 15px; 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:59:56.260

这是我能得到的最好的显示，其余的只是 Firefox 像素舍入。

> ```
>  #custom-checkbox   
> {   
>     background: url('http://s16.postimg.org/5xacziapd/unchecked.png') no-repeat;   
>     width: 15px !important;  
>     height: 15px !important;  
>     display:table;  
> } 
> ```

希望这会有所帮助，这是我能做的最好的。

# firebase - 我可以使用 Firebase 简单登录来访问 Twitter API 吗？

> ID：16072282
> 
> 赞同：3
> 
> 时间：2013-04-17T23:56:44.513
> 
> 标签：firebase

使用 Twitter 进行简单登录很容易，这是一个很大的好处，但我想知道是否有可能获取这些身份验证凭据并发布推文，获取他们关注的人员列表，通常使用完整的 Twitter 1.1 API。即我可以获取访问令牌密钥和秘密吗？

谢谢，戴夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:57:03.920

Firebase 简单登录 JavaScript 客户端现在在来自 Twitter 身份验证的响应负载中返回 Twitter 访问令牌和访问令牌秘密。

您可以通过`user`对象在属性下访问其中的每一个`accessToken`，`accessTokenSecret`如下所示：

```
var firebaseRef = new Firebase('https://<MY-FIREBASE-NAME>.firebaseIO.com');
var authClient = new FirebaseAuthClient(firebaseRef, function(error, user) {
  if (user) {
    var accessToken = user.accessToken,
        accessTokenSecret = user.accessTokenSecret;
  }
});

...

// Sample jQuery click event.
$myButton.on('click', function(event) {
  authClient.login('twitter');
}); 
```

# ruby - 如何在 RSpec 中请求（GET/POST）具有通配符的路由

> ID：16072284
> 
> 赞同：12
> 
> 时间：2013-04-17T23:57:00.380
> 
> 标签：ruby, ruby-on-rails-3, rspec, rspec-rails

我在 Rails 中有这条（诚然可怕的）路线：

```
范围'/软件'做
  发布 '/:software_id/:attachment_id/event/*event' => 'software#post_event'，如：'post_event'
结尾

```

（我会更改它，但要使用旧版 API）

我正在为它编写一个 RSpec 测试。

`rake routes`给我：

```
post_event POST /software/:software_id/:attachment_id/event/*event(.:format) api/version1301/software#post_event

```

我的测试如下所示：

```
  描述“post_event”做

    它“应该以 204 响应”
      参数 = {
        attachment_id：@attachment.uid，
        软件ID：@license.id
      }

      发布：post_event，参数

      response.code.should eq "204"
    结尾
  结尾

```

但我收到以下路由错误：

```
失败/错误：发布：post_event，参数
动作控制器::路由错误：
没有路由匹配 {:format=>"json", :name_path=>:api, :attachment=>"7b40ab6a-d522-4a86-b0de-dfb8081e4465", :software_id=>"0000001", :attachment_id=>"7b40ab6a- d522-4a86-b0de-dfb8081e4465", :controller=>"api/version1301/software", :action=>"post_event"}
     # ./spec/controllers/api/version1301/software_controller_spec.rb:62:in `block (4 levels) in '

```

您如何使用通配符（事件）处理路由？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-18T00:03:21.923

（回答我自己的问题）

事实证明，这有点“新手”的错误。

路由的通配符（事件）部分仍然需要一个参数。我没有传递“事件”参数，因此路线不完整。

以下代码有效：

```
描述“post_event”做

  它“应该以 204 响应”
    参数 = {
      attachment_id：@attachment.uid，
      软件ID：@license.id，
      事件：'一些/事件'
    }

    发布：post_event，参数

    response.code.should eq "204"
  结尾
结尾

```

`/*event(.:format)`意味着它需要一个参数。

对自己和他人的特别说明：

**如果您在 Rails 中遇到过路由错误，请验证您是否传递了所有参数。**

# excel - Excel VBA - 根据另一个字段的值制作多个字段

> ID：16072292
> 
> 赞同：0
> 
> 时间：2013-04-17T23:57:34.640
> 
> 标签：excel, vba

我用 VB 在 Excel 中创建了一个请求表单，它使用提交按钮根据输入表单的值在 Outlook 中生成电子邮件。

一切正常。但是，用户通常无法在提交请求之前完成所有必要的字段。

我需要确保用户在提交请求之前在单元格 D7 中输入特定值时填写所有必填字段

这是我迷路的地方......我尝试过两种略有不同的方法。

希望有人可以帮助我！

方法一：

当提交按钮被按下...

```
Button_click()

If Range("D7").Value = "Special Request" THEN
'Make cells B6, B7, B8, B9, D14 mandatory in order to generate email 

    On Error Resume Next
    If ThisWorkbook.Worksheets("Request").Range _
    ("B6, B7, B8, B9, D14 ") Is Nothing Then

    MsgBox ("Please confirm all required fields have been completed!")

'Do not generate email 
```

* * *

方法二：

当提交按钮被按下...

```
Button_click()

'If the value of cell D7 is ANYTHING OTHER THAN "Special Feature", 
'execute code as normal to generate email

'Else, check for empty fields in the required cells ("B6, B7, B8, B9, D14 ") 

'if any required cells are empty, display message and do not generate email    
MsgBox ("Please confirm all required fields have been completed!")   

'If D7 = "Special Feature" AND NO REQUIRED FIELDS ARE MISSING, 
'continue with executing code to     generate email 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:41:37.623

这是一种解决方法：

```
 Sub test()
If Range("D7").Value = "Special Request" And _
    Range("B6").Value = "" Or _
    Range("B7").Value = ""  Or _
    Range("B8").Value = "" Or _
    Range("B9").Value = "" Or _
    Range("D14").Value = "" Then
        MsgBox ("Please confirm all required fields have been completed!")
        Exit Sub
Else
        ' whatever method you're using to generate email goes here

End If

End Sub 
```

这是使用 CountA 的另一种方式：

```
Sub test2()

If Range("D7").Value = "Special Request" And _ 
Application.WorksheetFunction.CountA(Range("B6:B9"), Range("D14")) < 5 Then
        MsgBox ("Please confirm all required fields have been completed!")
        Exit Sub
Else
        ' whatever method you're using to generate email goes here

End If

End Sub 
```

# java - 字符串连接 - 布尔硬编码与带字符串的布尔连接

> ID：16072294
> 
> 赞同：0
> 
> 时间：2013-04-17T23:57:42.110
> 
> 标签：java, .net, jvm, clr

对于以下代码，我需要一个建议（在 java 和 .net 中）。

```
 public void method(bool value)
 {
     String someString;

     //some code

     if (value)
     {
          //some code
          ...
         someString = "one" + value;              
     }
     else
     {
         //some code
         ...
         someString = "two" + value;
     }

 } 
```

哪一个是可取的，为什么？像上面这样的代码或像这样的代码

```
someString = "onetrue";
someString = "twofalse"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:35:46.607

JDK编译优化后`method`如下图：

```
public static String method(boolean value) {
    String someString;

    if (value) {
        StringBuilder sb = new StringBuilder();
        sb.append("one");
        sb.append(value);
        someString = sb.toString();
    } else {
        StringBuilder sb = new StringBuilder();
        sb.append("two");
        sb.append(value);
        someString = sb.toString();
    }
    return someString;
} 
```

如果此代码被非常频繁地调用，与第二个版本相比，它可能会带来性能影响。在每种情况下，都会构造一个新的 StringBuilder 并在其上调用三个方法。并且 boolean 应该在调用之前转换为对象`append`。而在第二个版本中，我们只返回常量。一切都取决于调用此代码的频率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:59:38.517

两者都不会有任何区别，它是纯粹的风格。

既然你有`// some other code`我就坚持第一个。如果您在每个分支中只有一条线，那么任何一条都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T00:06:41.710

在高层次上它们都是相同的，但如果你往下看，我建议使用以下方法：

```
someString = "onetrue";

someString = "twofalse"; 
```

这是因为当你做 "one" + value 时，该值实际上是一个 bool，并且`toString()`会调用 bool 对象的方法来添加到字符串中。基本上只是添加另一个步骤，而不是仅指定要添加到字符串中的内容。

# android - 无法实例化类，没有空的构造函数，SQLiteHelper

> ID：16072296
> 
> 赞同：0
> 
> 时间：2013-04-17T23:58:06.727
> 
> 标签：android, sqlite

我正在尝试使用 SQLite 做一个 Android 应用程序，但是当我尝试在我的智能手机上启动我的应用程序时，它会出现一个白屏并崩溃。

所以我查看了 LogCat，它显示了这个错误：

```
04-18 01:33:32.186: E/AndroidRuntime(26741): FATAL EXCEPTION: main
04-18 01:33:32.186: E/AndroidRuntime(26741): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.sqliteexample/database.MySQLiteHelper}: java.lang.InstantiationException: can't instantiate class database.MySQLiteHelper; no empty constructor
04-18 01:33:32.186: E/AndroidRuntime(26741):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2034)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at android.app.ActivityThread.access$700(ActivityThread.java:140)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at android.os.Looper.loop(Looper.java:137)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at android.app.ActivityThread.main(ActivityThread.java:4921)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at java.lang.reflect.Method.invokeNative(Native Method)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at java.lang.reflect.Method.invoke(Method.java:511)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at dalvik.system.NativeStart.main(Native Method)
04-18 01:33:32.186: E/AndroidRuntime(26741): Caused by: java.lang.InstantiationException: can't instantiate class database.MySQLiteHelper; no empty constructor
04-18 01:33:32.186: E/AndroidRuntime(26741):    at java.lang.Class.newInstanceImpl(Native Method)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at java.lang.Class.newInstance(Class.java:1319)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at android.app.Instrumentation.newActivity(Instrumentation.java:1068)
04-18 01:33:32.186: E/AndroidRuntime(26741):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2025)
04-18 01:33:32.186: E/AndroidRuntime(26741):    ... 11 more 
```

这是 MySQLiteHelper 类：

```
package database;

import android.util.Log;
import android.annotation.SuppressLint;
import android.content.Context;
import android.database.DatabaseErrorHandler;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

@SuppressLint("NewApi")
public class MySQLiteHelper extends SQLiteOpenHelper {

        public static final String TABLE_COMMENTS = "comments";
        public static final String COLUMN_ID = "_id";
        public static final String COLUMN_COMMENT = "comment";

        private static final String DATABASE_NAME = "commments.db";
        private static final int DATABASE_VERSION = 1;

        // Database creation sql statement
        private static final String DATABASE_CREATE = "create table "
                + TABLE_COMMENTS + "(" + COLUMN_ID
                + " integer primary key autoincrement, " + COLUMN_COMMENT
                + " text not null);";

        public MySQLiteHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase database) {
            database.execSQL(DATABASE_CREATE);
        }   

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(MySQLiteHelper.class.getName(),
            "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_COMMENTS);
            onCreate(db);
        }
} 
```

这是 TestDatabaseActivity 类：

```
package activity;

import java.util.List;
import java.util.Random;

import model.Comment;

import dao.CommentsDataSource;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;

import com.example.sqliteexample.R;

public class TestDatabaseActivity extends ListActivity {
    private CommentsDataSource datasource;

    public TestDatabaseActivity(){
        super();
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_sqlite_helper);

        datasource = new CommentsDataSource(this);
        datasource.open();

        List<Comment> values = datasource.getAllComments();

        // Use the SimpleCursorAdapter to show the
        // elements in a ListView
        ArrayAdapter<Comment> adapter = new ArrayAdapter<Comment>(this,
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);
    }

    // Will be called via the onClick attribute
    // of the buttons in main.xml
    public void onClick(View view) {
        @SuppressWarnings("unchecked")
        ArrayAdapter<Comment> adapter = (ArrayAdapter<Comment>) getListAdapter();
        Comment comment = null;
        switch (view.getId()) {
            case R.id.add:
                String[] comments = new String[] { "Cool", "Very nice", "Hate it" };
                int nextInt = new Random().nextInt(3);
                // Save the new comment to the database
                comment = datasource.createComment(comments[nextInt]);
                adapter.add(comment);
                break;
            case R.id.delete:
                if (getListAdapter().getCount() > 0) {
                    comment = (Comment) getListAdapter().getItem(0);
                    datasource.deleteComment(comment);
                    adapter.remove(comment);
                }
                break;
        }
        adapter.notifyDataSetChanged();
    }

    @Override
    protected void onResume() {
        datasource.open();
        super.onResume();
    }

    @Override
    protected void onPause() {
        datasource.close();
        super.onPause();
    }
} 
```

评论数据源类：

```
import java.util.ArrayList;
import java.util.List;

import database.MySQLiteHelper;

import model.Comment;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class CommentsDataSource {

    private SQLiteDatabase database;
    private MySQLiteHelper dbHelper;
    private String[] allColumns = { MySQLiteHelper.COLUMN_ID,
            MySQLiteHelper.COLUMN_COMMENT };

    public CommentsDataSource(Context context) {
        dbHelper = new MySQLiteHelper(context);
    }

    public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
    }

    public void close() {
        dbHelper.close();
    }

    public Comment createComment(String comment) {
        ContentValues values = new ContentValues();
        values.put(MySQLiteHelper.COLUMN_COMMENT, comment);
        long insertId = database.insert(MySQLiteHelper.TABLE_COMMENTS, null,
                values);
        Cursor cursor = database.query(MySQLiteHelper.TABLE_COMMENTS,
                allColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
        cursor.moveToFirst();
        Comment newComment = cursorToComment(cursor);
        cursor.close();
        return newComment;
    }

    public void deleteComment(Comment comment) {
        long id = comment.getId();
        System.out.println("Comment deleted with id: " + id);
        database.delete(MySQLiteHelper.TABLE_COMMENTS, MySQLiteHelper.COLUMN_ID
        + " = " + id, null);
    }

    public List<Comment> getAllComments() {
        List<Comment> comments = new ArrayList<Comment>();

        Cursor cursor = database.query(MySQLiteHelper.TABLE_COMMENTS,
        allColumns, null, null, null, null, null);

        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
            Comment comment = cursorToComment(cursor);
            comments.add(comment);
            cursor.moveToNext();
        }
        // Make sure to close the cursor
        cursor.close();
        return comments;
    }

    private Comment cursorToComment(Cursor cursor) {
        Comment comment = new Comment();
        comment.setId(cursor.getLong(0));
        comment.setComment(cursor.getString(1));
        return comment;
    }

} 
```

我已经找到了`java.lang.InstantiationException: can't instantiate class database.MySQLiteHelper; no empty constructor`，但我不知道如何修复它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:59:47.027

错误很明显 - 您没有编写无参数构造函数，但代码需要一个。

# php - PHP脚本将目录内的文件夹名称列表写入.html文件

> ID：16072300
> 
> 赞同：3
> 
> 时间：2013-04-17T23:58:16.963
> 
> 标签：php

我想创建一个 php 脚本，它读取位于特定目录中的文件夹并将名称写入 .html 文件中，HTML 的结构应该是：

```
<ul class="galleries">
<li><a href=".../control/includes/gallery-select.php?g=folder-xx">Gallery 1</a></li>
<li><a href=".../control/includes/gallery-select.php?g=folder-xx">Gallery 2</a></li>
</ul> 
```

其中 folder-xx 是 control\data\img\gallery\ 中文件夹的名称

我不是 php 的大专家，所以我会很感激任何提示.. 对不起英语。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T00:05:28.383

尝试这个

```
echo "<ul>";
$folder_name = ".";
$d = opendir($folder_name);
while ($f = readdir($d)) {
    if (is_dir($folder_name."/".$f))
        echo "<li><a href='your_script.php?dir=$f'>$f</a></li>";
}
closedir($d);
echo "</ul>"; 
```

# css - 有没有办法确保所有 text-align: center 文本确实居中？

> ID：16072305
> 
> 赞同：0
> 
> 时间：2013-04-17T23:58:35.260
> 
> 标签：css, twitter-bootstrap

我正在尝试使用 Bootstrap 组装页脚。出于某种原因，尽管确保`text-align: center;`已应用页脚链接，但页脚链接似乎略微偏离中心。有没有办法确保所有文本元素确实正确对齐？

HTML

```
<!DOCTYPE html>
<html>
  <body>
    <div class="container-fluid">
      <section class="row-fluid">
        <div class="span12">
          <h1 class="landing">
            Lorem Ipsum
          </h1>
          <h4 class="landing">
            Lorem Ipsum Lorem Ipsum Lorem Ipsum
          </h4>
        </div>
      </section>
    </div>
    <footer class="footer">
      <section class="row-fluid">
        <ul class="footer-links">
          <li>
            <a href="#">Contact</a>
          </li>
          <li>
            <a href="#">About</a>
          </li>
        </ul>
      </section>
    </footer>
  </body>
</html> 
```

CSS

```
h1.landing {
  text-align: center;
  font-size: 400%;
}

h4.landing {
  text-align: center;
}

.footer-links {
  list-style-type: none;
  text-align: center;
}

.footer-links li {
  display: inline;
  padding-right: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:01:32.947

看来你`UL`有一些左填充。尝试删除它。

```
.footer-links {
  list-style-type: none;
  text-align: center;
  padding:0px;
} 
```

[http://jsfiddle.net/S8mGk/1/](http://jsfiddle.net/S8mGk/1/)

# github - 如何修改从我的 github 存储库下载的 zip 中的文件夹名称？

> ID：16072306
> 
> 赞同：7
> 
> 时间：2013-04-17T23:58:52.843
> 
> 标签：github

从 github 下载的 zip 的文件夹名称是这样的`%repository-name%-master`，但我需要那个文件夹`%repository-name%`

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:15:40.290

您不能修改 github 存档中包含的根目录的名称。

即使您下载大师：

```
wget https://github.com/user/repo/tarball/master 
```

您将获得一个名为“master”的文件，但是：

```
tar xpvf master 
```

`tar xpvf`会给你一个`repo-xxxx`目录。
我通常遵循：

```
mv repo-* repo 
```

# jquery - Flexslider 在循环后的第一张幻灯片处停止

> ID：16072307
> 
> 赞同：3
> 
> 时间：2013-04-17T23:58:55.233
> 
> 标签：jquery, flexslider

我试图让 Flexslider 完成一个完整的循环，然后在它回到第一张幻灯片时停止或暂停。到目前为止，这是我的代码：

```
$(window).load(function(){
    $('.flexslider').flexslider({
        animation: "slide",
        animationLoop: true, 
        slideshowSpeed: 5000,
        pauseOnHover: true,
        start: function(slider){
            $('body').removeClass('loading');
        }   
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T11:58:06.013

试试这个：

```
$(window).load(function(){
    $('.flexslider').flexslider({
        animation: "slide",
        animationLoop: true, 
        slideshowSpeed: 5000,
        pauseOnHover: true,
        start: function(slider){
            $('body').removeClass('loading');
        },
        after: function (slider) {
            if ((slider.currentSlide + 1) == slider.count) {
                 slider.pause();
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-11T06:53:56.090

```
Try this, it worked for me

$(window).load(function(){
    var loopCount = 0; 
    $('.flexslider').flexslider({
        animation: "slide",
        animationLoop: true, 
        slideshowSpeed: 5000,
        pauseOnHover: true,
        start: function(slider){
            $('body').removeClass('loading');
        },
        after : function(slider){
           if(slider.currentSlide == 0 && loopCount == 1){
             slider.pause();
           }   
        },
        end : function(slider){
          loopCount++;  
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T06:06:25.830

在循环特定时间后，使用它在第一张幻灯片上暂停。更改 var n 值以循环任意次数。

```
var n = 2; 
$('.flexslider').flexslider({
    animation: "slide",
    slideshowSpeed: 5000,
    start: function(slider) {
        $('body').removeClass('loading');
    },
    after: function(slider) {
        if (slider.currentSlide == 0) { // is last slide
            n--;
            if(n==0) {
                slider.pause();
            }
        }
    }
}); 
```

# ios - UICollectionView 在帧更改后错误地显示单元格

> ID：16072309
> 
> 赞同：7
> 
> 时间：2013-04-17T23:58:59.607
> 
> 标签：ios, uicollectionview

我注意到，如果我更改 UICollectionView 的框架（例如，当切换通话状态栏时），集合视图不会为新框架正确更新其单元格。在短视频中可能最容易看到：

[http://cl.ly/2t2Y2A3A2w1D/CollectionViewTest.mov](http://cl.ly/2t2Y2A3A2w1D/CollectionViewTest.mov)

该简单测试的源文件在这里：

[http://cl.ly/0S0A360B3I3Q/CollectionViewTest.zip](http://cl.ly/0S0A360B3I3Q/CollectionViewTest.zip)

我使用 UICollectionViewController 还是 UIViewController 似乎并不重要。有人见过这个吗？我错过了什么吗？我发现的唯一解决方法是在视图控制器的 viewWillLayoutSubviews 或 viewDidLayoutSubviews 中的集合视图上调用 reloadData ，这可以工作，但当集合视图的框架受到用户拖动的影响时远非理想，因为 reloadData 被多次调用并导致用户拖动时，UI 更新非常缓慢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-29T08:51:53.547

我遇到了类似的问题，我`UICollectionView`的.`frame``reloadData``CollectionView`

我已经通过将它添加到我的 CollectionViewFlowLayout 来修复它：

```
- (BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds
{
    return YES;
} 
```

工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T16:56:55.183

我有一个类似的问题。我只需要调整集合视图框架的大小，以便菜单可以显示在其下方，并且用户仍然可以向上滚动足够远，以使菜单不会覆盖底部的单元格。

更改内容插图对我有用。

```
self.collectionView.contentInset = UIEdgeInsetsMake(0, 0, rect.size.height+8, 0); 
```

如果不重新加载数据，我无法更改集合视图的框架以工作，这会搞砸用户已经选择的单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:51:52.087

您可以让 UICollectionViewController 为 UIApplicationWillChangeStatusBarFrameNotification 注册，并在选择器中重新加载数据。这样，您只会在状态栏更改框架时重新加载数据。

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(callCameIn:) name:UIApplicationWillChangeStatusBarFrameNotification object:nil];
}

-(void)callCameIn:(NSNotification *) aNote {
    [self.collectionView reloadData];
} 
```

# c++ - C++ 从内存中读取字符串

> ID：16072316
> 
> 赞同：1
> 
> 时间：2013-04-17T23:59:32.660
> 
> 标签：c++, memory

我编写了一个与进程挂钩的 dll 应用程序。它有效，但它只显示第一个字母。
我想得到整个字符串。该字符串可以从 2 个字母到 32 个字母不等。

```
//READING MEMORY
HANDLE ExeBaseAddress = GetModuleHandleA(0);

char uNameAddr = *(char*)((char*)ExeBaseAddress + 0x34F01C);
printf("%c \n", uNameAddr); 
```

我还想了解这些部分：

```
 *(char*)((char*) //<-- what this is for. 
```

如果使用多级指针可以使用它：

```
char multipoint = *(char*)((char*)ExeBaseAddress + 0x34F01C + 0x123 + 0x321 + 0x20); 
```

* * *

**更新**

我想这里出了点问题：

```
if(uNameAddr == "omnicient")
    cout << "YOU ARE OMNI" << endl; 
```

我使用了用户名`omnicient`，但没有 cout `YOU ARE OMNI`。我想我的比较是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:02:39.390

char uNameAddr 是一个字符，您需要一个字符列表（或 char*）

试试这个：

```
char* name= (char*)((char*)ExeBaseAddress + 0x34F01C);
printf("%s \n", name); 
```

是什么`*(char*)((char*)`意思？

`(char*)ExeBaseAddress`将 ExeBaseAddress 视为指向某些 char 类型数据的指针

`((char*)ExeBaseAddress + 0x34F01C)`表示将 0x34F01C 添加到上述指针以将其偏移 0x34F01C 字符

`(char*)((char*)ExeBaseAddress + 0x34F01C)`意味着将此新地址视为指向某些字符的指针

`*(char*)((char*)ExeBaseAddress + 0x34F01C)`获取该位置第一个字符的内容

`char uNameAddr = *(char*)((char*)ExeBaseAddress + 0x34F01C);`表示将该字符放入名为 uNameAddr 的 char 大小的变量中。

所以基本上你有一个指针，你偏移它，然后取第一个字符并打印它。

在示例中，我注意了我如何不使用 firat 字符，并将其放在指针变量中。

然后我在 printf 中使用 %s 让它打印出所有按名称填充的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T00:06:12.393

`%c`显示`char`s（单个字符），`%s`显示以 NULL 结尾`char*`的 s（字符串）：

```
HANDLE ExeBaseAddress = GetModuleHandleA(0);

char *uNameAddr = (char*) ExeBaseAddress + 0x34F01C;
printf("%s \n", uNameAddr); 
```

请注意，我还整理了指针转换，但重要的是我摆脱了最终的取消引用（`*`在前面）并将其分配给`char*`(pointer) 而不是 a `char`。

如果您的字符串不是以 NULL 结尾的（不太可能），您也需要使用`%.*s`并传递字符串的长度。

至于你问题的第二部分：

```
*(char*)((char*) ExeBaseAddress + 0x34F01C) 
```

让我们分解一下。括号内（因此要评估的第一件事）是：

```
(char *) ExeBaseAddress + 0x34F01C 
```

嗯，这是一个 C 转换（将 a 转换`HANDLE`为 a `char*`），然后是一个加法。换句话说，它说“将此事物视为指向某个内存的指针，然后向前看 0x34F01C 字节的内存”（`char`始终为 1 字节）。它现在是指向内存中新位置的指针。

然后我们退出括号并`char*`再次投射到......不必要的。它可能是：

```
*((char*) ExeBaseAddress + 0x34F01C) 
```

最后我们取消引用（`*`前面的），上面写着“现在告诉我你指向的内存是什么”。但是在这种情况下，您不希望这样，因为您想要整个字符串，而不仅仅是第一个字母（在 内部`printf`，它会沿着您发送给它的内存循环，打印每个字符，直到找到 a `0`，又名`\0`aka `NULL`）。

# python - 无论如何要知道文件在 MS powerpoint 或 word 中有什么对象

> ID：16072317
> 
> 赞同：0
> 
> 时间：2013-04-17T23:59:34.250
> 
> 标签：python, ms-office, office-interop, win32com

我使用 win32com 在 Python 中处理 office 文档。没有办法知道一个对象在win32com中有什么方法。（一般情况下，我们可以通过 Python 中的 DIR(OBJ) 来获取属性或方法）所以，如果我们想知道我的 powerpoint 文档有哪些属性或方法，只需去查找 [MSDN](http://msdn.microsoft.com/en-us/library/ff763170%28v=office.14%29.aspx)

但是，我有一个包含很多对象的 powerpoint 文件。但我不知道它是什么名称或类型。

例如，当我想访问 powerpoint 中的文本时，我可以使用`Presentation.Slide.Textframe.TextRange.Text`它来访问它。

公式呢？？？如果我想访问它？无论如何，当我在我的 powerpoint 文件中的对象上单击鼠标，然后显示该对象的类型是什么？

提前谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:36:39.030

对于您的第一个问题，您想使用 MakePy 实用程序创建早期绑定对象，以便您可以内省它们（即按 Tab 并查看 IDE 中的所有方法）。它将 MSDN 上的搜索减少 95%

最简单的方法是转到 PythonWin（与 win32com 一起安装）并转到工具 > COM Makepy 实用程序并选择您要使用的 COM 库（在您的情况下，它类似于“Microsoft PowerPoint 14.0 对象库”）。让它运行，你就准备好了。这也在[此处](https://stackoverflow.com/questions/441758/driving-excel-from-python-in-windows)进行了描述。

对于您的第二个问题，正如大卫指出的那样，大多数对象都是形状。运行 MakePy 实用程序后，您将能够看到整个 PP 对象模型。快速搜索帮助我找到了如何获取通过单击选择的活动形状。

```
import win32com.client
app = win32com.client.Dispatch("PowerPoint.Application")

selectedShape = app.ActiveWindow.Selection.ShapeRange(1) 
```

您现在可以使用 selectedShape 来查找您需要了解的所有信息。

# java - 使用 JDBC 连接到 MySQL

> ID：16072322
> 
> 赞同：1
> 
> 时间：2013-04-17T23:59:50.237
> 
> 标签：java, mysql, jdbc, localhost

我一直在尝试在 Eclipse 中使用 JDBC 连接到位于[http://mysql10.000webhost.com](http://mysql10.000webhost.com)的外部 MySQL 服务器位置，但我一直收到错误消息。这是我的代码：

```
 import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import java.sql.Statement;

    import com.mysql.jdbc.PreparedStatement;

    //import com.mysql.jdbc.Driver;

    public class Main {
        public static void main(String[] args) throws SQLException {
            try{
            Class.forName("com.mysql.jdbc.Driver").newInstance();
    Connection conn=DriverManager.getConnection("jdbc:mysql://mysql10.000webhost.com/database","username","password");
    java.sql.PreparedStatement statement = conn.prepareStatement("SELECT * FROM promoid");
    ResultSet result=statement.executeQuery();
    while(result.next())
    {
        System.out.println(result.getString(1));
    }
        }

        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
    } 
```

这是我得到的错误：

```
 com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

    The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
        at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1121)
        at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:355)
        at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2479)
        at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2516)
        at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2301)
        at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:834)
        at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
        at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:416)
        at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:317)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at Main.main(Main.java:15)
    Caused by: java.net.ConnectException: Connection timed out: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(Unknown Source)
        at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.PlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at java.net.Socket.<init>(Unknown Source)
        at java.net.Socket.<init>(Unknown Source)
        at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:259)
        at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:305)
        ... 15 more 
```

JDBC 不能连接到本地主机之外的数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:03:05.273

```
Caused by: java.net.ConnectException: Connection timed out: connect. 
```

您是否尝试过`port 3306`在主机上远程登录（mysql 默认值）`mysql10.000webhost.com`？

我敢打赌，他们在防火墙上阻止了你。

# firefox - Firefox 代理 - 如何避免网站看到我的真实 IP？

> ID：16072327
> 
> 赞同：-4
> 
> 时间：2013-04-18T00:00:25.253
> 
> 标签：firefox, proxy

我试图在 Firefox 中使用代理，但问题是某些网站正在获取我的真实 IP。

- 如果我进入[http://www.showmemyip.com](http://www.showmemyip.com)，它会显示代理 IP。

- 如果我进入[http://www.whatismyip.com](http://www.whatismyip.com)，它会显示代理 ip +“未检测到代理”

- 如果我进入[http://whatismyipaddress.com/proxy-check](http://whatismyipaddress.com/proxy-check)它会显示代理 ip +“未检测到代理服务器”。+ 一切都为假（绿色）

他们怎么可能检测到我的IP？我看到 flash 不使用在 firefox 上配置的代理...但是我试图访问的页面没有任何 flash 脚本。

有什么方法可以 100% 让他们只看到代理 ip 而看不到我的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T19:20:19.497

There are some Java and Flash hacks to find out the visitor's real IP even behind a proxy server. As for Java you can turn it off forever. For Flash install some browser extension to be able to block it when you need. Use this site for tests: [http://mylocation.org](http://mylocation.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:41:27.497

[那是因为代理在 http 标头（详细信息](http://en.wikipedia.org/wiki/Proxy_server#Accessing_services_anonymously)）中将您的 ip 传递给服务器，所以您应该将代理设置为匿名。

# python - 无法使用 gunicorn supervisor django 1.6 让 Newrelic 工作

> ID：16072333
> 
> 赞同：1
> 
> 时间：2013-04-18T00:00:46.560
> 
> 标签：python, django, newrelic, supervisord

我试图让 NewRelic python 代理与我的主管和 gunicorn 一起使用，但无法让它工作。

这是我当前有效的主管设置：

```
[program:gunicorn]
directory = /home/<USER>/.virtualenvs/<DOMAIN>/myproject/
command=/home/<USER>/.virtualenvs/<DOMAIN>/bin/gunicorn my_project.wsgi:application 
```

我试图这样做：

```
[program:gunicorn]
directory = /home/<USER>/.virtualenvs/<DOMAIN>/myproject/

#Working command
#command=/home/<USER>/.virtualenvs/<DOMAIN>/bin/gunicorn myproject.wsgi:application

command=/home/<USER>/.virtualenvs/<DOMAIN>/bin/newrelic-admin run-program /home/<USER>/.virtualenvs/<DOMAIN>/bin/gunicorn myproject.wsgi:application
environment=NEW_RELIC_CONFIG_FILE=/home/<USER>/.virtualenvs/<DOMAIN>/myproject/newrelic.ini

user = <USER>
autostart = true
autorestart = true
stderr_events_enabled = true
redirect_stderr = true
stdout_logfile = /home/<USER>/logs/gunicorn.log
stderr_logfile = /home/<USER>/logs/gunicorn_err.log 
```

但后来我得到这个错误：

```
Traceback (most recent call last):
  File "/home/user/.virtualenvs/domain.com/lib/python2.7/site.py", line 688, in <module>
    main()
  File "/home/user/.virtualenvs/domain.com/lib/python2.7/site.py", line 679, in main
    execsitecustomize()
  File "/home/user/.virtualenvs/domain.com/lib/python2.7/site.py", line 547, in execsitecustomize
    import sitecustomize
  File "/home/user/.virtualenvs/domain.com/local/lib/python2.7/site-packages/newrelic-1.10.2.38-py2.7-linux-x86_64.egg/newrelic/bootstrap/sitecustomize.py", line 74, in <module>
    newrelic.agent.initialize(config_file, environment)
  File "/home/user/.virtualenvs/domain.com/local/lib/python2.7/site-packages/newrelic-1.10.2.38-py2.7-linux-x86_64.egg/newrelic/config.py", line 1456, in initialize
    log_file, log_level)
  File "/home/user/.virtualenvs/domain.com/local/lib/python2.7/site-packages/newrelic-1.10.2.38-py2.7-linux-x86_64.egg/newrelic/config.py", line 383, in _load_configuration
    'Unable to open configuration file %s.' % config_file)
newrelic.api.exceptions.ConfigurationError: Unable to open configuration file /. 
```

newrelic.ini 文件在该路径上，那么我做错了什么？

# 编辑：

newrelic.ini 文件的路径是：

```
/home/<USER>/.virtualenvs/<DOMAIN>/myproject/newrelic.ini 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T09:13:20.533

环境需要报价才能工作。

这是一个工作设置：

```
[program:gunicorn]
directory = /home/<USER>/.virtualenvs/<DOMAIN>/<PROJECT>/
command=/home/<USER>/.virtualenvs/<DOMAIN>/bin/newrelic-admin run-program /home/<USER>/.virtualenvs/<DOMAIN>/bin/gunicorn <PROJECT>.wsgi:application
environment=NEW_RELIC_CONFIG_FILE="/home/<USER>/.virtualenvs/<DOMAIN>/<PROJECT>/newrelic.ini"

user = <USER>
autostart = true
autorestart = true
stderr_events_enabled = true
redirect_stderr = true
stdout_logfile = /home/<USER>/logs/gunicorn.log
stderr_logfile = /home/<USER>/logs/gunicorn_err.log 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:40:59.117

您没有使用 newrelic-admin 作为使用 gunicorn 时的首选方法。利用：

```
[program:gunicorn]
directory = /home/user/.virtualenvs/domain.com/my_project/
command=/home/user/.virtualenvs/domain.com/bin/newrelic-admin run-program /home/user/.virtualenvs/domain.com/bin/gunicorn my_project.wsgi:application
environment=NEW_RELIC_CONFIG_FILE=/home/user/.virtualenvs/domain.com/bin/newrelic.ini 
```

无需更改 wsgi.py 文件中的任何内容。

为什么你在 bin 目录中有 newrelic.ini 文件我不知道。您通常会将它与您的项目一起使用，但是您的项目也在 virtualenv 下，这也有点奇怪。

要从 supervisord 传递环境变量，请参见：

*   [http://supervisord.org/configuration.html](http://supervisord.org/configuration.html)
*   [http://supervisord.org/subprocess.html#subprocess-environment](http://supervisord.org/subprocess.html#subprocess-environment)

有关 newrelic-admin 命令以及如何将其与 gunicorn 一起使用的详细信息，请参阅：

*   [https://newrelic.com/docs/python/python-agent-admin-script#run-program](https://newrelic.com/docs/python/python-agent-admin-script#run-program)
*   [https://newrelic.com/docs/python/python-agent-and-gunicorn](https://newrelic.com/docs/python/python-agent-and-gunicorn)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-24T08:57:32.010

好吧，我面临着同样的问题。我得到以下结果：

```
warpdrive: ERROR (no such file) 
```

不幸的是，在对 supervisord.conf 文件进行任何更改后，我没有更新 supervisorctl。因此，无论何时更改 supervisord.conf 文件，然后重新运行以下 cmd ：

```
sudo supervisorctl update 
```

然后运行：

```
sudo supervisorctl restart all 
```

干杯!

# android - Android drawable 停止访问

> ID：16072335
> 
> 赞同：0
> 
> 时间：2013-04-18T00:01:10.657
> 
> 标签：android, eclipse, android-drawable

这是一个奇怪的：

参考

```
Drawable image = getResources().getDrawable(R.drawable.mypic); 
```

起初一切都运行良好，除了图像（我画的）缺少一些阴影。所以我从 Eclipse 中编辑我的图像，然后用`mypic.png`新的替换旧的。但是eclipse拒绝看到新图像，好像它已经缓存了旧图像并正在使用它。所以我从 更改`mypic.png`为`mypic1.png`，然后代码行一直将图像返回为`null`。所以我放弃并将图像名称改回`mypic.png`（我想我会让它使用缓存的），但 eclipse 继续返回`image = null`.

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:33:39.490

最终对我有用的是：我没有先进行热替换然后按 F5，而是先手动删除了图像。只有这样，我才添加图像的新编辑版本。由于某种原因，日食当时看到了图像。我仍然对这个问题感到困惑，并怀疑它是否可重现。我在这里包括这个，以防其他人以某种方式遇到同样的问题。F5 不起作用；清洁不起作用；重新启动 eclipse 和模拟器没有工作。这对我来说都是魔法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:35:02.993

修改 png 图像后，在 res 文件夹上执行 F5，以便 eclipse 看到新图像

# android - 从安卓应用编辑账户信息

> ID：16072337
> 
> 赞同：0
> 
> 时间：2013-04-18T00:01:16.220
> 
> 标签：android, mysql

我正在与一群人一起开发一个 android 应用程序，我们将我们的应用程序连接到我们存储应用程序用户帐户的数据库。我们正在制作我的个人资料页面，我们希望它支持编辑密码、电子邮件等功能。我们将如何去做呢？因此，我们需要授予该用户对他们在数据库中的信息的权限，并允许他们编辑他们的姓名、密码等。我们是 android 开发的新手，我现在想在谷歌上找到任何关于如何做到这一点的网站。任何链接，教程，都会很棒。哦，我们的数据库是用 MySQL 编写的，它在远程服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:14:23.493

这似乎并不是一个具体的 Android 问题。在我看来，这里有两个组件：服务器端组件和客户端。关于如何在数据库中实现更新值的问题是关于

1.  如何在 Web API 中公开此类功能
2.  如何在 MySQL 数据库中实际执行此类 CRUD 操作

换句话说，想想“瘦客户端，厚服务器”。您的应用程序应该只关心更新配置文件的 UI 并将这些更新值发送到知道如何处理的服务器。这后半部分纯粹是一个Web开发/API开发问题。

虽然这可能无法准确回答您的问题，但它确实为您指明了正确的调查领域，这通常是寻找答案的最重要技能。

# ruby-on-rails - Windows 7 上的 Paperclip::Errors::NotIdentifiedByImageMagickError

> ID：16072338
> 
> 赞同：2
> 
> 时间：2013-04-18T00:01:23.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, imagemagick, paperclip

我正在学习 Mattan Griffel 的“一个月 Rails”（[http://onemonthrails.com/](http://onemonthrails.com/)）课程。我正在尝试使用回形针 gem 上传图像。最初的安装和使用都很顺利，直到他添加了一行来减小图像的大小。如他的教程所示，这被放置在 app/models/pin.rb 中：

```
 has_attached_file :image, styles: { medium: "320x240>" } 
```

它一直有效，直到添加了 styles: {} 部分。我还更新了我的部分以传递 :medium 方法。

我正在使用：回形针 (3.4.1)、可卡因 (0.5.1) 和铁轨 (3.2.12)。我看过其他用自制软件修复的帖子，但我在 Windows 7 机器上，我很确定这不适用。让我知道是否需要发布其他内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-16T20:47:57.220

我正在学习相同的课程。经过几次 gem 更改（尝试旧版本的可卡因等）后，解决我的问题的方法是将这一行添加到 pin.rb：

```
Paperclip.options[:command_path] = 'C:/Program Files/ImageMagick-6.8.5-Q16' 
```

前 `belongs_to :user`

（更改您的图像魔术安装路径的路径）

在此之后，运行包更新并重置您的 Rails 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-23T00:59:34.587

添加

```
Paperclip.options[:command_path] = 'C:/Program Files/ImageMagick-6.8.9-Q16' 
```

到这个文件。

`\config\environments\development.rb`

确保运行

```
which convert 
```

所以你知道什么版本号，不要复制和粘贴另一个版本号。

重启你的 Rails 服务器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T07:50:46.830

虽然它在我运行时显示了路径`which convert`，但我下载了 ImageMagick 并单独安装它并给出了路径并添加了 q256 提到的行，它工作了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-17T03:27:59.087

只是为了扩展 q256 的答案，更新此文件可能会在您进行推送时导致它在 heroku 上中断，因为互联网上的实时服务器不知道如何找到安装在本地硬盘上的程序。

为 Windows 用户解决此问题的更正确方法（至少我发现）是更新 config->environments->development.rb 下的 development.rb 文件，并将该行放在文件末尾。

```
Paperclip.options[:command_path] = 'C:/Program Files/ImageMagick-6.8.5-Q16' 
```

希望对某人有所帮助，并且不要忘记在保存文件后重新启动您的 Rails 服务器，请注意不需要捆绑更新。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-23T10:26:36.283

我使用`6.7.9`的是 ImageMagick 版本。所以除了添加command_path之外，我还必须更新到最新版本的ImageMagick，即`6.8.8`

# javascript - 在文本框中输入文本时尝试创建超链接的“主题标签”

> ID：16072342
> 
> 赞同：1
> 
> 时间：2013-04-18T00:01:56.730
> 
> 标签：javascript, text, hyperlink, tags

我正在创建一个用户将发布文本的网站。“发布”页面上的文本框之一用于标签/主题标签。用户将在此文本框中输入“#food”或“food”，但一旦他们点击空格键，我希望输入的每个单词都带有超链接......发布后，将显示在帖子作为超链接标签供其他用户点击。

IE。就像我发布这个问题时 stackoverflow 上的“标签”框一样。

有谁知道如何制作一个能够做到这一点的文本框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:10:19.467

不要为此使用内联对象。而是使用可编辑的 div；

```
<div id="myInputBox" contenteditable="true"></div> 
```

您也可以将输入框设为块类型，但我不确定是否所有浏览器都会遵守在标签内插入复杂标记的规则。

# c - 在c中使用atof将字符串转换为double

> ID：16072344
> 
> 赞同：0
> 
> 时间：2013-04-18T00:02:07.190
> 
> 标签：c, file-io, atof

我正在尝试从文件中读取并使用 c 将其存储在矩阵中。我的代码是

```
ReadSparseInput (int nvtxs,int nsize, double  vector[], int rowptr[] ,int colind [] , double values[])
{
    int index,row=0,column=0;
    int sparsity_value, nvtxs_local;
    int VECTOR_SIZE =50;
    double value;
    double  randvect[VECTOR_SIZE];
    int  length=0;
    char buf[BUFSIZ];
    FILE *fp;
    fp=fopen("/home/lopez380/Parallel/m10-A.ij", "r");
    index =0;
    nvtxs_local = 0;
    rowptr[0] = 0;
    char *p1;
    while ( !feof(fp))
    {
         // null buffer, read a line
        buf[0] = 0;
        fgets(buf, BUFSIZ, fp);
        // if it's a blank line, ignore
        if(strlen(buf) > 1) 
        {
            p1 = strtok(buf, " ");
            row=atoi(p1);
            #ifdef DEBUG
                fprintf(stdout, "Row : %d ", row);
            #endif
            p1 = strtok(NULL, " ");
            column=atoi(p1);
            #ifdef DEBUG
                fprintf(stdout, "column : %d ", column);
            #endif
            p1 = strtok(NULL, " ");
            value=atof(p1);
            #ifdef DEBUG
                fprintf(stdout, "value : %g\n ", value);
            #endif
        }

    }
    fclose(fp);

    #ifdef DEBUG
    printf("lFileLen = %d\n", length);
    #endif

} 
```

当我使用 p1 并使用 atoi 将其转换为整数时，该代码运行良好。但是当我使用 atof 将值转换为浮点数时，我得到一个零。我的输入看起来像

```
0 0 1.76420546156578
0 3 -4.80876443295632
0 6 1.20260376970926
0 9 3.30693451100554
1 1 1.13901264701619
1 4 0.370358438592131
1 7 -0.551593262343761 
```

在我阅读了这个输入之后，当我打印它时，我得到了

```
 Row : 0 column : 0 value : 0
 Row : 0 column : 3 value : 0
 Row : 0 column : 6 value : 0
 Row : 0 column : 9 value : 0
 Row : 1 column : 1 value : 0
 Row : 1 column : 4 value : 0
 Row : 1 column : 7 value : 0 
```

当我使用 atoi 时，我得到以下信息

```
Row : 0 column : 0 value : 1
 Row : 0 column : 3 value : -4
 Row : 0 column : 6 value : 1
 Row : 0 column : 9 value : 3
 Row : 1 column : 1 value : 1
 Row : 1 column : 4 value : 0
 Row : 1 column : 7 value : 0 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:45:59.133

由于上述原因，更换

```
value = atof(p1); 
```

...和...

```
if( sscanf(p1,"%s",&value) != 1) { 
    fprintf(stderr,"Error: non-number found!\n");
    exit(1); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T00:07:08.613

我强烈建议您不要使用 atoi() 和 atof()，除非您的实现提供错误检查（例如 atoi() 和 atof()" update *errno*。

我更喜欢 fscanf()：通过返回值可以检测到非法输入。

例子：

```
if (fscanf(fp, "%f", &f) == 1)
    ...all OK...
else
    ...EOF or conversion failure... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:54:04.320

评论中描述的 paulsm4 解决方案是

```
 fp=fopen("/home/lopez380/Parallel/m10.vec", "r");
    int i=0;
    double val;
    while ( !feof(fp))
    {
        buf[0] = 0;
        fgets(buf, BUFSIZ, fp);
        if(strlen(buf) > 1) 
        {
            p1 = sscanf(buf, "%lf",&val );
            vector[0]=val;
            ++i;
            #ifdef DEBUG
                fprintf(stdout, "vector : %lf \n", vector[0]);
            #endif
        }
    }
    fclose(fp); 
```

输出达到

```
vector : 0.837565
vector : 3.074878
vector : -3.968584
vector : 3.975388
vector : 0.703345 
```

将值（由空格分隔）读取到我使用的多个数组中

```
 sscanf(buf, "%d%d%lf",&row,&column,&value ); 
```

buf 有一个数据类型

```
char buf[BUFSIZ]; 
```

# parallel-processing - 摆脱数据依赖

> ID：16072346
> 
> 赞同：0
> 
> 时间：2013-04-18T00:02:21.267
> 
> 标签：parallel-processing

我有这个代码：

```
for(i=0; i<size; i++)
{
    d[i] = d[i-1] + v[i];
} 
```

当我对此循环进行并行处理时，我有数据依赖性并且启动间隔变为 2 含义我有：

启动间隔：2

```
|load v[i-1]|load d[i-2]|    add    |store d[i-1]|
|           |           |  load v[i]|load d[i-1] |     add    | store d[i] | 
```

我不想在两者之间拖延。

启动间隔：1

```
|load v[i-1]|load d[i-2]|    add    |store d[i-1]|
|           |load v[i]  |load d[i-1]|     add    | store d[i] | 
```

这是不可能的，因为 d[i-1] 尚未存储。

我们如何通过更改代码将启动间隔设为 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:50:14.787

你无法缩小这个差距。

此外，这（循环展开）不是这种循环的并行处理的最有效方式。您的循环看起来像一个前缀和操作。有可用于前缀和的快速并行算法和实现。例如，[这个问题](https://stackoverflow.com/questions/10053629/parallel-prefix-sum-fastest-implementation?lq=1)

# java - 有没有办法确定小程序在小程序中托管的容器类型

> ID：16072348
> 
> 赞同：0
> 
> 时间：2013-04-18T00:02:50.573
> 
> 标签：java, applet

并且这样做没有安全例外。

IE：

```
if(isInBrowser(applet) {
    ...
}

if(isSomeOtherCommonContainer(applet) {

} 
```

# html - 在 HTML 文档中嵌入没有控制选项和关闭选项的视频

> ID：16072350
> 
> 赞同：1
> 
> 时间：2013-04-18T00:02:56.150
> 
> 标签：html, html5-video

**我正在尝试将视频文件 (mp4) 嵌入到我的 HTML 文档中。我希望在不暂停和不关闭/最小化的情况下播放此视频。**

`<video width="320" height="240"> <source src="mov.mp4" type="video/mp4"> </video>`

我正在使用此代码以 HTML 格式播放视频。但我无法从视频中删除控件。如果我右键单击视频，我仍然可以获得控制选项。

所以我想知道是否有办法禁用此视频的控件或使用其他可以删除控件的播放器。

**我还想知道是否可以在播放时在视频空间上动态写入一些显示数据。**

# shell - 如何将输出分配给 shellscript 变量？

> ID：16072351
> 
> 赞同：26
> 
> 时间：2013-04-18T00:02:57.797
> 
> 标签：shell, pipe, bc

如何将此结果分配给shell变量？

输入：

`echo '1+1' | bc -l`

输出：

`2`

**尝试**：

（没用）

```
#!bin/sh
a=echo '1+1' | bc -l
echo $a 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-18T00:57:36.990

您正在寻找称为命令替换的 shell 功能。

有 2 种形式的 cmd 替换

1.  原始的，回到石器时代，但完全可移植，并且在所有类 Unix 的 shell（几乎所有）中都可用。

    您将生成值的命令包含在反引号字符中，即

    ```
    $ a=`echo 1+1 | bc -l`
    $ echo $a
    2
    $ 
    ```

2.  现代，外观不那么笨重，易于嵌套的 cmd 替换`$( cmd )`，即

    ```
    $ a=$(echo 1+1 |  bc -l)
    $ echo $a
    2
    $ 
    ```

您的“she-bang”行说，`#!/bin/sh`因此，如果您在真正的 Unix 平台上运行，那么您很可能`/bin/sh`是原始的 Bourne shell，并且需要您使用上面的选项 1。

如果您在仍在使用的同时尝试选项 2`#!/bin/sh`并且它可以工作，那么您就拥有了现代外壳。尝试输入`echo ${.sh.version}`or`/bin/sh -c --version`看看你是否得到任何有用的信息。如果您获得了版本号，那么您将想要了解较新的 shell 包含的额外功能。

说到新功能，如果你真的在使用 bash、zsh、ksh93+，那么你可以将你的示例代码重写为

```
a=$(( 1+1 )) 
```

或者，如果您正在做更多的数学运算，这将全部留在范围内，您可以使用 shell 特征算术，例如：

```
(( b=1+1 ))
echo $b
2 
```

在任何一种情况下，您都可以避免创建额外的进程，但您不能在 shell 中进行浮点运算（而您可以使用`bc`）。

# javascript - 在 ios 设备中使用 flowplayer 自动播放

> ID：16072353
> 
> 赞同：2
> 
> 时间：2013-04-18T00:03:06.513
> 
> 标签：javascript, flowplayer

有没有办法在 iOS 设备中使用流播放器自动播放视频？我搜索了很多，找不到任何东西。

我使用下面的代码来显示视频：`

```
 <source src="file2.mp4" type="video/mp4">

        <object id="flash_fallback_1"  class="vjs-flash-fallback"  type="application/x-shockwave-flash" data="flowplayer-3.2.7.swf">

            <param name="movie" value="flowplayer-3.2.7.swf">
    <param name="allowfullscreen" value="true" />
            <param name="flashvars" value="config={'clip':[{'url': 'file2.mp4','autoPlay':true,'autoBuffering':true}]}">
        </object>
    </video>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:13:24.250

您需要使用 flowplayer HTML5。按照他们的设置[文档](http://flowplayer.org/docs/)
您可以通过 JavaScript 手动将 flowplayer（我目前正在使用 v.5.4）安装到 div 容器来实现这一点，然后访问 fp 对象“load()”方法[这里](http://flowplayer.org/docs/index.html#manual-installation)
解释了手动安装 我已经离开了视频源空白，因为我的加载方法会将源数组应用于 fp 对象。我会为你的视频海报提供一个有效的网址，这样你的用户就不会没有希望了；）

HTML：

```
<div id="fp-cnt" class="container">  
   <video id="html5_video" poster="[URL]" >
      <source type="application/x-mpegurl" src="[BLANK ON PURPOSE]">
      <source type="video/mp4" src="[BLANK ON PURPOSE]"/> 
   </video>
</div> 
```

JavaScript：

```
 <script>       
        function loadFlowPlayer() {
           // install flowplayer to an element with id "fp-cnt"
           $("#fp-cnt").flowplayer({});

           var _elm = document.getElementById("fp-cnt");
           var _obj = flowplayer(_elm);

           _obj.load([
               { mpegurl: "[URL]" },
               {     mp4: "[URL]"  }
            ]);
        }

 </script> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:08:00.133

遗憾的是，在 iOS 上是不可能的，播放视频需要用户交互。在相关的说明中，音频也不能通过代码控制。[资源](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-02T18:24:50.083

我认为在 ios 设备上可以使用自动播放选项。

遵循以下配置：

1.  `splash: true;`
2.  在`api.toggle();`api 包含 flowplayer 的方法和属性的地方使用

# java - 如何在不影响程序其余部分的情况下减慢一种方法？

> ID：16072357
> 
> 赞同：0
> 
> 时间：2013-04-18T00:03:37.237
> 
> 标签：java, random

我正在用 Java 制作游戏，我想创建一个随机移动的角色。我做的那个很痉挛。我基本上想在生成的随机数之间添加延迟。我是初学者，所以不要评判我的代码哈哈

```
public class Monster extends Entity{

private World world;

Image monster;

public Monster(int x, int y, World world) {
        super(x, y, world);
        w = 32;
        h = 32;
        this.world = world;
}

public void render(GameContainer gc, Graphics g) throws SlickException{
        super.render(gc, g);
        monster = new Image("gfx/world/monster.png");
        g.drawImage(monster, x, y);
}

public void update(GameContainer gc, int delta) throws SlickException{
    super.update(gc, delta);
    Random move = new Random();
    int number;

    for(int counter=1; counter<=1;counter++){
        number = move.nextInt(4); 
        System.out.println(number);

        if(number == 0){
            setDy(-1);
        }else if(number == 1){
            setDx(-1);
        }else if(number == 2){
            setDy(5);   
        }else if(number == 3){
            setDx(5);
        }else{
            setDx(0);
            setDy(0);

        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:26:24.580

这是在游戏中使用的一种常用技术，用于具有不同的更新和渲染速率。您要做的是（伪代码中的示例）：

1 - 初始化一个时间变量 - DateTime lastUpdate = new DateTime();

每次进入循环：

2 - 检查是否已经过了某个时间 - lastUpdate.hasPassed(X_TIME, new DateTime());

3 - 如果时间已过（最后一行为真） lastUpdate = new DateTime();

4 - 否则返回

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:19:44.790

您需要将 NPC 移动封装在单独的线程中，并在该线程中调用 thread.sleep 以暂停移动。

[这是一个关于如何定义线程](http://javarevisited.blogspot.com/2011/02/how-to-implement-thread-in-java.html)的好教程，[oracle 文档](http://docs.oracle.com/javase/tutorial/essential/concurrency/simple.html)显示了一个休眠线程的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T00:11:08.207

尝试添加

```
 try {
      Thread.sleep(ms);
    } catch (InterruptedException e) {
      e.printStackTrace();
    } 
```

where `ms`- 多少毫秒，例如 1000

# django - 为 Django-rest-framework 指定 FilterSet

> ID：16072360
> 
> 赞同：1
> 
> 时间：2013-04-18T00:04:09.580
> 
> 标签：django, django-rest-framework

教程说：

```
class ProductFilter(django_filters.FilterSet):
    min_price = django_filters.NumberFilter(lookup_type='gte')
    max_price = django_filters.NumberFilter(lookup_type='lte')
    class Meta:
        model = Product
        fields = ['category', 'in_stock', 'min_price', 'max_price'] 
```

但是当我尝试这样做时，我得到一个错误：

`FieldError: Cannot resolve keyword u'min_price' into field. Choices are: cantidad, datetime, enlace, id, id_fila, nivel`

`min_price`不在我的模型中，但我需要创建一个新参数。（这是一个例子）我真的需要过滤日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:15:40.253

请参阅[django-filter 文档](https://django-filter.readthedocs.org/en/latest/ref/filters.html#name)。

由于您的`min_price`和`max_price`过滤器与它们引用的模型字段的名称不同，因此您需要提供`name`参数。

```
class ProductFilter(django_filters.FilterSet):
    min_price = django_filters.NumberFilter(name='price', lookup_type='gte')
    max_price = django_filters.NumberFilter(name='price', lookup_type='lte')
    class Meta:
        model = Product
        fields = ['category', 'in_stock', 'min_price', 'max_price'] 
```

# jquery - 无法获取缓存的 AJAX 数据维度

> ID：16072364
> 
> 赞同：0
> 
> 时间：2013-04-18T00:04:20.450
> 
> 标签：jquery, ajax, caching

我试图通过缓存已经被 AJAX 处理的数据来提高我的 AJAX 调用效率。我还需要根据某些结果数据的维度以某种方式呈现数据。

第一次调用数据时，可以读取维度，一切正常。缓存也可以很好地工作，但是我在获取缓存数据中元素的维度时遇到了很大的困难。

以下是我正在做的事情的简化版本（有相同的问题）：

```
var cache = {};

// The AJAX part
function getDetails(request){
    return jQ.get(request);
};

// Filter & render AJAX data
function renderData(data){
    var endResult = $(data).find('#theTargetElement');
    endResult.appendTo($placehold);
    $placehold.find('#theTargetElement').css('visibility','hidden');
    // This will log the dimensions on AJAX data fine
    // But almost all cached data returns height 0
    console.log( height of certain elements within data );
};

// Click handler
jQ('#slides').on('click', '.slideLink', function(e){
    e.preventDefault();
    var target = jQ(this).attr("href");
    if ( cache[target] ) { // If the data exists in cache object
        var $cached = cache[target]
        renderData( $cached );
    } else {
        getDetails(target)
            .done( function(result) {
                cache[target] = result;
                renderData(result);
            })
    }
}); 
```

附加的数据肯定存在并出现在页面上 - 我似乎无法使用它的测量值。

# perl - TokyoCabinet 写入速度太慢

> ID：16072366
> 
> 赞同：1
> 
> 时间：2013-04-18T00:04:26.200
> 
> 标签：perl, nosql, key-value, tokyo-cabinet, tokyo-tyrant

我有一个**perl 脚本（在 Ubuntu 12.04 LTS 中）**写入 26 个 TCH 文件。密钥大致均匀分布。在 300 万次插入后写入变得非常慢（平均分配给所有文件），速度从**开始**时的**240,000 次插入/分钟**下降到**3 MM 插入后的 14,000 次插入/分钟**。单独的分片文件不超过 150 MB，总体大小约为 2.7 GB。

 ******在每个 TCH 文件插入 100K**后，我对每个 TCH 文件运行**优化**，**bnum**为 4*num_records_then，选项设置为**TLARGE**，并确保 xmsiz 与 bnum 的大小匹配（如[为什么东京暴君在调整 bnum 后速度会呈指数下降？](https://stackoverflow.com/questions/1051847/why-does-tokyo-tyrant-slow-down-exponentially-even-after-adjusting-bnum) )

 ******即使在此之后，插入以高速开始，然后从 240k 插入/分钟缓慢降低到 14k 插入/分钟。可能是因为在单个脚本中保存了多个 tch 连接（26）？或者是否有配置设置，我错过了（会禁用日志帮助，但上面的线程说日志只有在 tch 文件变得大于 3-4GB 后才会影响性能，我的碎片是 <150MB 文件..）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:45:35.517

我会关闭日记并衡量发生了什么变化。引用的线程讨论了 2-3 GB tch 文件，但如果您将 26 tch 文件的大小相加，那么您就属于同一个联盟。对于文件系统，写入的数据范围的总量应该是相关参数。**********

# c++ - 朋友类无法访问私人数据

> ID：16072368
> 
> 赞同：0
> 
> 时间：2013-04-18T00:04:35.133
> 
> 标签：c++, templates, c++11, g++

这是我的班级声明：

```
template <class T>
class Sptr {
    template<typename U> friend class Sptr;

    template <typename T1, typename T2>
    friend bool operator==(const Sptr<T1> &a, const Sptr<T2> &b);

    template <typename U>
    friend Sptr<T> static_pointer_cast(const Sptr<U> &sp);

private:

    RC* ref; //reference counter
    T* obj;//pointer to current obj
    std::function<void()> destroyData;

    bool ok_;

public:

    Sptr();
    ~Sptr();

    template <typename U> 
    Sptr(U *);

    Sptr(const Sptr &);

    template <typename U> 
    Sptr(const Sptr<U> &);

    template <typename U> 
    Sptr<T> &operator=(const Sptr<U> &);

    Sptr<T> &operator=(const Sptr<T> &);

    void reset();

    T* operator->() const
    {return obj;};

    T& operator*() const
    {return *obj;};

    T* get() const
    {return obj;};

    explicit operator bool() const {
          return ok_;
    }

}; 
```

下面是抱怨访问问题的代码

```
 template <typename T, typename U>
Sptr<T> static_pointer_cast(const Sptr<U> &sp) {
    //do something
    Sptr<U> answer;

    answer.obj = sp.obj;
    answer.ref = sp.ref;
    answer.destroyData = sp.destroyData;
    answer.ok_ = sp.ok_;

    return answer;
} 
```

当我使用以下代码编译时：

```
 Sptr<Derived> sp(new Derived);
    Sptr<Base1> sp2(sp);

    // Sptr<Derived> sp3(sp2); // Should give a syntax error.
    Sptr<Derived> sp3(static_pointer_cast<Derived>(sp2));
    // Sptr<Derived> sp4(dynamic_pointer_cast<Derived>(sp2)); // Should give syntax error about polymorphism. 
```

我已经把它变成了朋友功能。为什么它无法访问变量以及如何更正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:26:06.553

这有点棘手。如果您替换，您的代码将编译

```
template <typename U>
friend Sptr<T> static_pointer_cast(const Sptr<U> &sp); 
```

和

```
template <typename T1, typename T2>
friend Sptr<T1> static_pointer_cast(const Sptr<T2> &sp); 
```

原因如下（我不是 100% 确定，所以请有人批准/不批准）：

当`Sptr<T>`被实例化时，例如用`T = Derived`，生成的类定义 ( `Sptr<Derived>`) 定义了一个具有以下签名的友元函数：

```
template <typename U>
friend Sptr<Derived> static_pointer_cast(const Sptr<U> &sp); 
```

所以这是一个只有**一个**模板参数的函数。但是你定义的函数有**两个**模板参数。

您对这个模板化函数的*调用*是一个专业化，如下所示：

```
Sptr<Derived> static_pointer_cast(const Sptr<Base1> &sp) {
    //do something
    Sptr<Derived> answer;

    answer.obj = sp.obj;
    answer.ref = sp.ref;
    answer.destroyData = sp.destroyData;
    answer.ok_ = sp.ok_;

    return answer;
} 
```

所以它试图同时访问*and* `Base1` *，* `Derived`但它只是 的朋友`Derived`，而不是 的朋友`Base1`。最后一句很重要，将其更改为具有*两个*模板参数的友元函数可以解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T00:33:30.287

你说的朋友`sptr<t>`，这意味着它只能访问相同类型的 sptrs 的私有成员。因为 sp2 不是 sptr( t 是派生的) 它不是朋友。尝试 ：

```
template< class u, class v> friend sptr<u> static_pointer_cast(const sptr<v> &sp); 
```

# css - 将文本放在底部而不是其他文本的正下方

> ID：16072376
> 
> 赞同：0
> 
> 时间：2013-04-18T00:05:58.990
> 
> 标签：css, vertical-alignment

我正在使用不同的 DIV 标签作为表格，我想在内容 DIV 的底部获取另一个 DIV。

```
<div class="table">
    <div class="table-row">

        <div class="table-information">
            Content
        </div>

        <div class="table-content">
            More content

            <div class="extra">
                Here's the extra content
            </div>
        </div>

    </div>
</div> 
```

这是CSS：

```
.table {
    display: table;
}

.table-row {
    display: table-row;
}

.table-information {
    background-color: #eaeaea;
    height: 150px;
    padding: 10px 15px;
    width: 150px;
}

.table-content {
    display: table-cell;
    height: 150px;
    padding: 10px 15px;
}

.extra {
    vertical-align: bottom
} 
```

正如你所看到的，我已经上课`vertical-align: bottom;`了。`extra`我想将内容放在底部的那个 DIV 中，而不是文本的正下方`More content`。但是当我尝试这个解决方案时没有任何反应。

[http://jsfiddle.net/edgren/3jjbV/](http://jsfiddle.net/edgren/3jjbV/)

我怎么解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:12:30.893

这是实现这一目标的一种方法

```
.table-content {
    display: table-cell;
    height: 150px;
    padding: 10px 15px;
    position:relative;
    width:150px;
}
.extra {
    vertical-align: bottom;
    bottom:0;
    position:absolute;
} 
```

我通过将相对位置添加到容器`table-content`然后将绝对定位底部添加到`extra`.
这是一个[小提琴](http://jsfiddle.net/trajce/3jjbV/2/)

* * *

另一种方式是这样的：

```
.extra {
    vertical-align: bottom;
    display:table-cell;
    height: 150px;
    width:150px;
} 
```

这是第二个选项的[小提琴](http://jsfiddle.net/trajce/3jjbV/5/)。
从这两个选项中，我个人会选择第一个，但你应该小心固定的宽度和高度（因为绝对定位）。

# visual-studio-2010 - Visual Studio - 启动 .bat 文件作为启动项目

> ID：16072379
> 
> 赞同：2
> 
> 时间：2013-04-18T00:06:17.723
> 
> 标签：visual-studio-2010, debugging

我有一个正在尝试调试的 C++ 程序。我通常从一个 .bat 文件运行它，该文件在运行程序之前会进行一些文件清理。我可以从这个脚本运行我的程序并附加调试器，但从 VS 启动 .bat 文件会更方便。如果我将启动项目的 Command 属性设置为 bat 文件，我会收到一个错误，指出它是无法识别的二进制格式（因为它不是二进制格式，我想）。我可以将命令设置为 cmd.exe 并打开一个命令 shell，但我还没有弄清楚如何将 .bat 文件传递​​给命令 shell。我已经尝试将它包含在属性命令行中，有和没有重定向字符（<），并尝试将它作为参数传递给命令，但这些都不起作用。我已经足够接近了，我认为一定有办法做到这一点，但我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-09T17:25:14.627

有些视觉工作室有这个选项，有些则没有。我会发布两个案例

## 如果你的 VS 有这个选项

*   右键单击“项目”，然后转到属性-> 调试
    *   在“启动动作”中选择“启动外部程序”，然后把`c:\Windows\System32\cmd.exe`
    *   在启动选项中，放置命令行参数：`/c your_bat.bat`
    *   必要时设置工作目录

保存并快乐调试

## 如果你的 VS 没有这个选项

当您执行上述操作时，将`your_project.csproj.user`在与 相同的目录中创建/更新一个文件`your_project.csproj`，其中包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <ProjectView>ShowAllFiles</ProjectView>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Debug|AnyCPU'">
    <StartProgram>C:\Windows\System32\cmd.exe</StartProgram>
    <StartWorkingDirectory>c:\your_working_directory\</StartWorkingDirectory>
    <StartArguments>/c your_bat.bat</StartArguments>
  </PropertyGroup>
</Project> 
```

创建或更新此文件，包括上述内容。小心不要移除其他东西（如果有的话）。您还可以通过复制项目可能具有的`PropertyGroup`不同配置和其他配置来将其扩展到其他配置。`'Release|AnyCPU'`（这在某些版本的 VS via interface 中是可能的）

**警告：**您需要在 Visual Studio 中重新加载项目才能使此更改生效。（右键单击项目，卸载 - 然后再次加载）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:46:01.833

我建议不要调用最后启动应用程序的批处理文件，而是在“构建事件”项目设置中添加构建后事件。在构建后事件中键入您的清理代码，但省略“程序启动”行。让 VS 运行你的程序。这样你就不需要附加到程序

# java - 扫描 NFC 标签后出现 ArrayIndexOutOfBoundsException

> ID：16072380
> 
> 赞同：0
> 
> 时间：2013-04-18T00:06:19.917
> 
> 标签：java, android, arrays, nfc

我正在尝试重建我的 NFC 标签阅读器

[https://stackoverflow.com/questions/16071121/converting-existing-nfc-script-to-read-multiple-ndef-records](https://stackoverflow.com/questions/16071121/converting-existing-nfc-script-to-read-multiple-ndef-records)

我收到以下错误：

```
 java.lang.ArrayIndexOutOfBoundsException: length=1; index=1 
```

在线上：

```
 NdefMessage msg2 = (NdefMessage) rawMsgs[1]; 
```

我了解该问题通常与尝试访问不存在的数组项有关，但是我真的不确定如何在以下实现中解决该问题。

附言

该问题仅在扫描新的 NFC 标签时出现。我注意到一些非常有趣的东西......

如果我注释掉以下两行，应用程序不会崩溃并成功扫描标签！

```
// NdefMessage msg2 = (NdefMessage) rawMsgs[1];

 //  beamMsg2.setText(new String(msg.getRecords()[1].getPayload())); 
```

资源：

```
public class Nfc extends Activity implements CreateNdefMessageCallback,
        OnNdefPushCompleteCallback {
    NfcAdapter mNfcAdapter;
    TextView beamMsg;
    TextView beamMsg2;
    private static final int MESSAGE_SENT = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nfc);
        beamMsg = (TextView) findViewById(R.id.msg);
        beamMsg2 = (TextView) findViewById(R.id.msg_ID);
        beamMsg.setText("Peter Smith");
        beamMsg2.setText("123456");

        // Check for available NFC Adapter
        mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
        if (mNfcAdapter == null) {
            beamMsg = (TextView) findViewById(R.id.msg);
            beamMsg2= (TextView) findViewById(R.id.msg_ID);

            beamMsg.setText("NFC is not available on this device.");
            beamMsg2.setText("NFC is not available on this device.");
        } else {
            // Register callback to set NDEF message
            mNfcAdapter.setNdefPushMessageCallback(this, this);
            // Register callback to listen for message-sent success
            mNfcAdapter.setOnNdefPushCompleteCallback(this, this);
        }
    }

    public void submitClicked(View v)
    {
        Toast toast = Toast.makeText(getApplicationContext(), R.string.info,
                Toast.LENGTH_LONG);
        toast.show();
    }
    /**
     * Implementation for the CreateNdefMessageCallback interface
     */
    @Override
    public NdefMessage createNdefMessage(NfcEvent event) {
        NdefMessage msg = new NdefMessage(NdefRecord.createMime(
                beamMsg.getText()  .toString(), null));

        return msg;

    }

    public NdefMessage createNdefMessage_two(NfcEvent event) {
        NdefMessage msg2 = new NdefMessage(NdefRecord.createMime(
                beamMsg2.getText()  .toString(), null));

        return msg2;

    }

    /**
     * Implementation for the OnNdefPushCompleteCallback interface
     */
    @Override
    public void onNdefPushComplete(NfcEvent arg0) {
        // A handler is needed to send messages to the activity when this
        // callback occurs, because it happens from a binder thread
        mHandler.obtainMessage(MESSAGE_SENT).sendToTarget();
    }

    /** This handler receives a message from onNdefPushComplete */
    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MESSAGE_SENT:
                Toast.makeText(getApplicationContext(), "Message sent!", Toast.LENGTH_LONG).show();
                break;
            }
        }
    };

    @Override
    public void onResume() {
        super.onResume();
        // Check to see that the Activity started due to an Android Beam
        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
            processIntent(getIntent());
        }
    }

    @Override
    public void onNewIntent(Intent intent) {
        // onResume gets called after this to handle the intent
        setIntent(intent);
    }

    /**
     * Parses the NDEF Message from the intent and prints to the TextView
     */
    void processIntent(Intent intent) {
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(
                NfcAdapter.EXTRA_NDEF_MESSAGES);
        // only one message sent during the beam
        NdefMessage msg = (NdefMessage) rawMsgs[0];
        NdefMessage msg2 = (NdefMessage) rawMsgs[1];
        // record 0 contains the MIME type, record 1 is the AAR, if present
        beamMsg.setText(new String(msg.getRecords()[0].getPayload()));
        beamMsg2.setText(new String(msg.getRecords()[1].getPayload()));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // If NFC is not available, we won't be needing this menu
        if (mNfcAdapter == null) {
            return super.onCreateOptionsMenu(menu);
        }
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.main, menu);
        return true;
    }

   // @Override
   // public boolean onOptionsItemSelected(MenuItem item) {
    //    switch (item.getItemId()) {
      //      case R.id.menu_settings:
        //        Intent intent = new Intent(Settings.ACTION_NFCSHARING_SETTINGS);
          //      startActivity(intent);
            //    return true;
         //   default:
           //     return super.onOptionsItemSelected(item);
       // }
    }
//}//} 
```

回答后编辑：

```
public class Connect extends Activity implements CreateNdefMessageCallback,
        OnNdefPushCompleteCallback {
    NfcAdapter mNfcAdapter;
    TextView beamMsg;
    TextView beamMsg2;
    private static final int MESSAGE_SENT = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.connect);
        beamMsg = (TextView) findViewById(R.id.msg);
        beamMsg2 = (TextView) findViewById(R.id.msg_ID);
        beamMsg.setText("Peter Smith");
        beamMsg2.setText("123456");

        // Check for available NFC Adapter
        mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
        if (mNfcAdapter == null) {
            beamMsg = (TextView) findViewById(R.id.msg);
            beamMsg2= (TextView) findViewById(R.id.msg_ID);

            beamMsg.setText("NFC is not available on this device.");
            beamMsg2.setText("NFC is not available on this device.");
        } else {
            // Register callback to set NDEF message
            mNfcAdapter.setNdefPushMessageCallback(this, this);
            // Register callback to listen for message-sent success
            mNfcAdapter.setOnNdefPushCompleteCallback(this, this);
        }
    }

    public void submitClicked(View v)
    {
        Toast toast = Toast.makeText(getApplicationContext(), R.string.info,
                Toast.LENGTH_LONG);
        toast.show();
    }
    /**
     * Implementation for the CreateNdefMessageCallback interface
     */
    @Override
    public NdefMessage createNdefMessage(NfcEvent event) {
        NdefMessage msg = new NdefMessage(NdefRecord.createMime(
                beamMsg.getText()  .toString(), null));

        return msg;

    }

    public NdefMessage createNdefMessage_two(NfcEvent event) {
        NdefMessage msg2 = new NdefMessage(NdefRecord.createMime(
                beamMsg2.getText()  .toString(), null));

        return msg2;

    }

    /**
     * Implementation for the OnNdefPushCompleteCallback interface
     */
    @Override
    public void onNdefPushComplete(NfcEvent arg0) {
        // A handler is needed to send messages to the activity when this
        // callback occurs, because it happens from a binder thread
        mHandler.obtainMessage(MESSAGE_SENT).sendToTarget();
    }

    /** This handler receives a message from onNdefPushComplete */
    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MESSAGE_SENT:
                Toast.makeText(getApplicationContext(), "Message sent!", Toast.LENGTH_LONG).show();
                break;
            }
        }
    };

    @Override
    public void onResume() {
        super.onResume();
        // Check to see that the Activity started due to an Android Beam
        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
            processIntent(getIntent());
        }
    }

    @Override
    public void onNewIntent(Intent intent) {
        // onResume gets called after this to handle the intent
        setIntent(intent);
    }

    /**
     * Parses the NDEF Message from the intent and prints to the TextView
     */
    void processIntent(Intent intent) {
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(
                NfcAdapter.EXTRA_NDEF_MESSAGES);
    // only one message sent during the beam
    NdefMessage[] msg =  new NdefMessage[rawMsgs.length];
    for (int i = 0; i < msg.length; i++) {
        msg[i] = (NdefMessage) rawMsgs[i];
        // record 0 contains the MIME type, record 1 is the AAR, if present
        beamMsg[i].setText(new String(msg[i].getRecords()[1].getPayload()));
        beamMsg2[i].setText(new String(msg[i].getRecords()[1].getPayload()));
    }}

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // If NFC is not available, we won't be needing this menu
        if (mNfcAdapter == null) {
            return super.onCreateOptionsMenu(menu);
        }
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.main, menu);
        return true;
    }

   // @Override
   // public boolean onOptionsItemSelected(MenuItem item) {
    //    switch (item.getItemId()) {
      //      case R.id.menu_settings:
        //        Intent intent = new Intent(Settings.ACTION_NFCSHARING_SETTINGS);
          //      startActivity(intent);
            //    return true;
         //   default:
           //     return super.onOptionsItemSelected(item);
       // }
    }
//}//} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:14:59.103

实际上，我不使用 Java，但我会尝试。顺便问一下，可以看getParcelableArrayExtra()的实现。为什么他只返回一条消息而不是两条？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:15:47.363

您的错误可能与您在此行发送给它的意图有关：

```
Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES); 
```

您用于创建意图的代码在哪里？

**循环编辑：**

要添加一个更像这样的循环：

```
Parcelable[] rawMsgs = intent.getParcelableArrayExtra(
            NfcAdapter.EXTRA_NDEF_MESSAGES);
// only one message sent during the beam
NdefMessage[] msg = = new NdefMessage[rawMsgs.length];
for (int i = 0; i < msg.length; i++) {
    msg[i] = (NdefMessage) rawMsgs[i];
    // record 0 contains the MIME type, record 1 is the AAR, if present
    beamMsg[i].setText(new String(msg[i].getRecords()[0].getPayload());
    beamMsg2[i].setText(new String(msg[i].getRecords()[1].getPayload()));
} 
```

您还必须将 beamMsg 和 beamMsg2 初始化为 TextViews 数组。或者当然只是附加到文本字段并保持原样。

# ios - 为什么我的应用程序在 iPhone 4S 上因为 Core Data 请求执行而崩溃？

> ID：16072382
> 
> 赞同：0
> 
> 时间：2013-04-18T00:06:34.940
> 
> 标签：ios, core-data

我有一个在模拟器 6.1 上运行良好的应用程序，在 iOS6.1 上的 iPhone5 和 iPad3 上运行良好，但是当在 iPhone4S 上运行时，它在此方法中因 Exc Bad Access 崩溃：

```
-(void)parsePlistIntoCD{
    self.managedObjectContext = [[SDCoreDataController sharedInstance] backgroundManagedObjectContext];
    // 3: Now put the plistDictionary into CD...create get ManagedObjectContext
    NSManagedObjectContext *context = self.managedObjectContext;
    NSError *error;

    //Create Request & set Entity for request
    NSFetchRequest *holidayRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *topicEntityDescription = [NSEntityDescription entityForName:@"Holiday" inManagedObjectContext:context];
    [holidayRequest setEntity:topicEntityDescription];

    //Create new NSManagedObject
    //Holiday *holidayObjectToSeed = nil;
    Holiday *newHoliday = nil;
    //Execute fetch just to make sure?
    NSArray *holidayFetchedArray = [context executeFetchRequest:holidayRequest error:&error];
    **if (error) NSLog(@"Error encountered in executing topic fetch request: %@", error); // if I comment this line out it reaches as far as the next bold line**

    // No holidays in database so we proceed to populate the database
    if ([holidayFetchedArray count] == 0) {
        //Get path to plist file
        NSString *holidaysPath = [[NSBundle mainBundle] pathForResource:@"PreloadedFarsiman" ofType:@"plist"];
        //Put data into an array (with dictionaries in it)
        NSArray *holidayDataArray = [[NSArray alloc] initWithContentsOfFile:holidaysPath];
        **NSLog(@"holidayDataArray is %@", holidayDataArray);**
        //Get number of items in that array
        int numberOfTopics = [holidayDataArray count];
        //Loop thru array items...
        for (int i = 0; i<numberOfTopics; i++) {
            //get each dict at each node
            NSDictionary *holidayDataDictionary = [holidayDataArray objectAtIndex:i];
            //Insert new object
            newHoliday = [NSEntityDescription insertNewObjectForEntityForName:@"Holiday" inManagedObjectContext:context];
            //Parse all keys in each dict object
            [newHoliday setValuesForKeysWithDictionary:holidayDataDictionary];
            //Save and or log error
            [context save:&error];
            if (error) NSLog(@"Error encountered in saving topic entity, %d, %@, Hint: check that the structure of the pList matches Core Data: %@",i, newHoliday, error);
        };
    }

    //set bool that specifies the coredata has been populated from plist already
    NSString *bundleVersion = [[NSBundle mainBundle] objectForInfoDictionaryKey:(NSString *)kCFBundleVersionKey];
    NSString *appFirstStartOfVersionKey = [NSString stringWithFormat:@"first_start_%@", bundleVersion];

    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setObject:@(YES) forKey:appFirstStartOfVersionKey];
    [prefs synchronize];
} 
```

为什么只有4S？它没有给出控制台日志和上面这个遍历的最后一个知道的方法。这是一张照片：

![在此处输入图像描述](https://i.stack.imgur.com/P0Geg.png)

如上所述，如果我取消注释 NSLog 行，它会一直记录数组，如图所示。如果我把它留在里面，它会停在那条线上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:01:39.177

```
NSArray *holidayFetchedArray = [context executeFetchRequest:holidayRequest error:&error];
if (error) 
   NSLog(@"Error encountered in executing topic fetch request: %@", error); 
```

不不不不不。我知道这是一个困难的模式，但请让我们试着做对。*不是* `if (error)`。`error`可以是任何东西（尤其是在非 ARC 下）。测试是`if (!holidayFetchedArray)`。

对于*所有*这些返回值并`NSError**`采用间接方式的方法，您测试*结果*以查看它是否为 nil。如果是，则存在错误，因为返回 nil*表示*存在错误。只有这样，你才能`error`有意义地触摸。

文档对此总是很清楚，尽管在关键的情况下确实会让人眼前一亮，所以我在斜体括号中添加了一些注释来指出关键点：

> **要求**
> 
> 指定提取的搜索条件的提取请求。
> 
> **错误**
> 
> 如果执行获取时出现问题，则返回时包含描述问题的 NSError 实例。 *[如果执行 fetch 没有问题，包含垃圾所以不要碰它！]*
> 
> **返回值**
> 
> 满足从接收器和与接收器的持久存储协调器关联的持久存储获取的请求指定的条件的对象数组。如果发生错误，则返回 nil。*[这就是确实发生错误的标志。]*如果没有对象符合请求指定的条件，则返回一个空数组。

这可能是您遇到麻烦的原因，也可能不是，但您*必须**立即*解决。我希望您检查所有代码以查找`NSError*`声明用于此模式的变量并修复*所有*这些变量！谢谢你。本课到此结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:57:52.997

这是在黑暗中刺伤 b/c 您尚未确定发生崩溃的代码行。我建议你设置一个断点，然后单步执行，直到你遇到崩溃。如果我在下面说的内容不能解决问题，请编辑您的帖子并添加有关崩溃发生位置的更多信息，我们将从那里开始。

这是要检查的东西。该行：

```
[newHoliday setValuesForKeysWithDictionary:holidayDataDictionary] 
```

`holidayDataDictionary`如果其中的任何键对类的实例无效，则可能会崩溃`Holiday`。

关于你关于为什么它只在你的 iPhone 4S 上崩溃的问题，目前还没有足够的数据来解释这一点。根据您进行测试和核心数据迁移（如果有的话）的方式，您可能在该设备上存在模型不一致，尽管我在您发布的屏幕截图中没有看到任何指向该方向的内容。我会尝试卸载/重新安装您的应用程序，看看崩溃是否仍然只是 iPhone 4S。

# mysql - mysql加权随机结果 - 如何在SELECT后获取更改的变量值

> ID：16072384
> 
> 赞同：0
> 
> 时间：2013-04-18T00:06:41.363
> 
> 标签：mysql, sql, random

我有一个`keywords`带有列`keyword`和的表`weight`。我的目标是随机选择一个`keyword`，但要考虑它的`weight`（概率）。我找到了两种方法来解决这个问题，后一种更优雅（并且消耗更少的资源） - 但我没有让它运行。见自己。

表和记录：

```
CREATE TABLE IF NOT EXISTS `keywords` (
  `keyword` varchar(100) COLLATE utf8_bin NOT NULL,
  `weight` int(11) NOT NULL,
  UNIQUE KEY `keywords` (`keyword`),
  KEY `rate` (`weight`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

INSERT INTO `keywords` (`keyword`, `weight`) VALUES
('google', 50),
('microsoft', 20),
('apple', 10),
('yahoo', 5),
('bing', 5),
('xing', 5),
('cool', 5); 
```

**查询 1**

消耗更多资源，我处理 5k+ 记录。来源是[为什么这个使用 rand() 的 MySQL 查询大约有三分之一的时间没有返回结果？](https://stackoverflow.com/questions/13635520/why-would-this-mysql-query-using-rand-return-no-results-about-a-third-of-the-t#13666316)：

```
SELECT *  FROM `keywords` ORDER BY -LOG(1.0 - RAND()) / weight LIMIT 1 
```

**查询 2**

将权重汇总为`@weight_sum`。设置`@weight_point`为该`RAND()`范围内的数字。循环遍历所有记录，减去并设置`weight`为当前的. 直到. 然后它保持那个。源是[T-SQL 中的随机加权选择](https://stackoverflow.com/questions/58457/random-weighted-choice-in-t-sql/454454#454454)`@weight_pos``@keyword``keywords.keyword``@weight_pos < 0``keyword`

```
SET @keyword = 0;
SET @weight_sum = (SELECT SUM(weight) FROM keywords);
SET @rand = RAND();
SET @weight_point = ROUND(((@weight_sum - 1) * @rand + 1), 0);
SET @weight_pos = @weight_point;

SELECT
    keyword,
    weight,

    @keyword:=CASE
        WHEN @weight_pos < 0 THEN @keyword
        ELSE keyword
    END AS test,

    (@weight_pos:=(@weight_pos - weight)) AS curr_weight,
    @weight_point,
    @keyword,
    @weight_pos,
    @rand,
    @weight_sum
FROM
    keywords; 
```

在此处查看 phpmyadmin 结果[http://postimg.org/image/stgpd776f/](http://postimg.org/image/stgpd776f/)

![phpmyadmin](https://s23.postimg.org/3nfr6d5wb/keywords.png)

**我的问题**

我如何获得 中的值`@keyword`，或者该`test`列最终包含什么？事后添加`SELECT @keyword`不会改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:10:54.913

好的，我认为我的问题或多或少是一个基本的 mysql 问题。通过将上述 SELECT 语句封装到另一个 SELECT 中，我实现了我想要的，然后过滤了我搜索的第一个结果。对不起，打扰你。查看查询：

```
SET @keyword = 0;
SET @weight_sum = (SELECT SUM(weight) FROM keywords);
SET @rand = RAND();
SET @weight_point = ROUND(((@weight_sum - 1) * @rand + 1), 0);
SET @weight_pos = @weight_point;
SELECT t.test FROM (
SELECT
    keyword,
    weight,
    @keyword:=CASE
        WHEN @weight_pos < 0 THEN @keyword
        ELSE keyword
    END AS test,
    (@weight_pos:=(@weight_pos - weight)) AS curr_weight,
    @weight_point,
    #@keyword,
    @weight_pos,
    @rand,
    @weight_sum
FROM
    keywords

) AS t

WHERE
    t.curr_weight < 0
LIMIT
    1; 
```

# google-app-engine - 遵循在谷歌应用引擎上部署 jsf2.1 应用程序的教程时出错

> ID：16072387
> 
> 赞同：0
> 
> 时间：2013-04-18T00:06:59.253
> 
> 标签：google-app-engine, jsf-2, web-config

我按照本教程使用 jsf 创建了一个应用程序并将其部署在谷歌应用引擎上，但即使我遵循了 tuto 的所有步骤

我遇到了这个错误：

```
 18 avr. 2013 01:01:10 com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed C:\Users\user\Desktop\eclispe_workspace\test_google\war\WEB-INF/appengine-web.xml
18 avr. 2013 01:01:10 com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
INFO: Successfully processed C:\Users\user\Desktop\eclispe_workspace\test_google\war\WEB-INF/web.xml
18 avr. 2013 01:01:10 com.google.appengine.tools.development.SystemPropertiesManager setSystemProperties
INFO: Overwriting system property key 'java.util.logging.config.file', value 'C:\Users\user\Downloads\Compressed\eclipse-jee-juno-SR2-win32\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.7.7.1\appengine-java-sdk-1.7.7.1\config\sdk\logging.properties' with value 'WEB-INF/logging.properties' from 'C:\Users\user\Desktop\eclispe_workspace\test_google\war\WEB-INF\appengine-web.xml'
18 avr. 2013 01:01:10 com.google.apphosting.utils.jetty.JettyLogger info
INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
18 avr. 2013 01:01:11 com.google.apphosting.utils.jetty.JettyLogger info
INFO: jetty-6.1.x
18 avr. 2013 01:01:11 com.google.apphosting.utils.jetty.JettyLogger warn
ATTENTION: failed com.google.appengine.tools.development.DevAppEngineWebAppContext@14ab51b{/,C:\Users\user\Desktop\eclispe_workspace\test_google\war}: java.lang.UnsupportedClassVersionError: com/sun/faces/config/WebConfiguration : Unsupported major.minor version 51.0
18 avr. 2013 01:01:11 com.google.apphosting.utils.jetty.JettyLogger warn
ATTENTION: failed JettyContainerService$ApiProxyHandler@e8606c: java.lang.UnsupportedClassVersionError: com/sun/faces/config/WebConfiguration : Unsupported major.minor version 51.0
18 avr. 2013 01:01:11 com.google.apphosting.utils.jetty.JettyLogger warn
ATTENTION: Error starting handlers
java.lang.UnsupportedClassVersionError: com/sun/faces/config/WebConfiguration : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang. 
```

你有什么主意吗

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:06:15.753

java.lang.UnsupportedClassVersionError 的发生是因为编译时 JDK 较高，而运行时 JDK 较低。您无法使用 JVM 字节码 target = 1.7 部署 Java 代码，请尝试 target = 1.6

# ubuntu - 如何在 Ubuntu 上默认启用透明大页面？

> ID：16072389
> 
> 赞同：10
> 
> 时间：2013-04-18T00:07:09.203
> 
> 标签：ubuntu, huge-pages

如何在 Ubuntu 上默认启用透明大页面？

```
~$ uname -a
Linux yoda 3.5.0-23-generic #35~precise1-Ubuntu SMP Fri Jan 25 17:13:26 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux
~$ cd /sys/kernel/mm/transparent_hugepage/
/sys/kernel/mm/transparent_hugepage$ ls
defrag  enabled  khugepaged
/sys/kernel/mm/transparent_hugepage$ cat enabled 
always [madvise] never
/sys/kernel/mm/transparent_hugepage$ sudo echo always > enabled 
-bash: enabled: Permission denied
/sys/kernel/mm/transparent_hugepage$ sudo ls
[sudo] password for <...>: 
defrag  enabled  khugepaged
/sys/kernel/mm/transparent_hugepage$ sudo ls
defrag  enabled  khugepaged
/sys/kernel/mm/transparent_hugepage$ sudo echo always > enabled 
-bash: enabled: Permission denied
/sys/kernel/mm/transparent_hugepage$ cat enabled 
always [madvise] never 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-06T07:04:15.047

添加以下内容：

```
transparent_hugepage=always 
```

到您的 GRUB_CMDLINE_LINUX_DEFAULT：

```
/etc/default/grub 
```

并做一个：

```
update-grub 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-08T16:13:32.433

```
sudo su
password: [....]
echo always > /sys/kernel/mm/transparent_hugepage/enabled 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-06T17:55:47.987

将此添加到您的 /etc/rc.local：

`echo always > /sys/kernel/mm/transparent_hugepage/enabled`

# discrete-mathematics - 计算 NxN 行列式的符号

> ID：16072391
> 
> 赞同：1
> 
> 时间：2013-04-18T00:07:27.613
> 
> 标签：discrete-mathematics

是否有比计算行列式的完整值并将其与零进行比较更有效的方法来确定行列式的符号（负或正或零）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:46:57.680

有一些方法可以比计算精确值更快地*逼近**整数矩阵*的行列式。这些方法通常用于计算符号，因为正确结果的可能性很大。有关更多详细信息，请参阅[本文。](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.10.4850&bvm=bv.45368065,d.Yms&cad=rja)

然而，AFAIK 没有比计算值本身更快地计算行列式符号的*确切方法。*

# freebsd - 为 EVFILT_USER 使用 kqueue

> ID：16072395
> 
> 赞同：3
> 
> 时间：2013-04-18T00:08:41.013
> 
> 标签：freebsd, kqueue

我很难理解，如何将 kqueue 用于用户空间事件。
我寻找 2 个用例。
用例 1：手动复位事件
用例 2：自动复位事件

我想我明白了，如何使用 kqueue() 和 kevent()，但我不清楚传递给 kevent() 的事件如何查找相关操作：
假设有一个名为“event”的 struct kevent 变量。
让我们假设，我们可以毫无问题地找到一个新的事件 id，它不会与该 kqueue 实例的其他事件 id 发生冲突，名为“eventId”。

1.  创建用户事件：EV_SET(&event, eventId, EVFILT_USER, EV_ADD, NOTE_FFNOP, 0, NULL)
2.  销毁用户事件：EV_SET(&event, eventId, EVFILT_USER, EV_DESTROY, NOTE_FFNOP, 0, NULL)
3.  设置用户事件：EV_SET(&event, eventId, EVFILT_USER, ?????, NOTE_FFNOP, 0, NULL)
4.  重置用户事件：EV_SET(&event, eventId, EVFILT_USER, ??EV_CLEAR???, NOTE_FFNOP, 0, NULL )
5.  脉冲用户事件：EV_SET(&event, eventId, EVFILT_USER, 0, NOTE_TRIGGER, 0, NULL )
6.  在等待循环中，我认为剪断会随之而来： if( event.filter == EVFILT_USER && event.ident == eventId ) { // 这是我的事件！做一点事！}

看到了？？？在上面的 EV_SET() 调用中查看我需要帮助的地方。
对于用例 1（手动重置事件），操作 (1) 创建与用例 2（自动重置事件）相比可能看起来不同。
操作 (3) 和 (4) 我完全一无所知。我可能需要 EV_ENABLE/EV_DISABLE 吗？EV_CLEAR 适合哪里？
到目前为止，我假设除了“调度”之外，我不需要在操作 (6) 中做任何事情。我很肯定，操作（5）可以按照我上面给出的那样工作。

我现在花了一天的时间试图找到说明它是如何完成的文档或示例。我在苹果代码库中找到了一个 kqueue 测试程序，但我怀疑它是否正确。此外，它仅在测试中发送 1 个事件，并且该事件终止接收线程的循环。所以这并不能帮助我理解我的 2 个用例的细节。

我计划在 x86 机器上的 FreeBsd 9.1 下使用它……暂时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T10:18:20.590

经过一番实验，我发现：

1.  创建用户事件：EV_SET(&ev, identifier, EVFILT_USER, EV_ADD, NOTE_FFCOPY, 0, NULL)
2.  销毁用户事件：EV_SET(&ev, identifier, EVFILT_USER, EV_DELETE, 0, 0, 0)
3.  设置用户事件：EV_SET(&event, m_eventId, EVFILT_USER, EV_ENABLE, NOTE_FFCOPY|NOTE_TRIGGER|0x1, 0, NULL)
4.  重置用户事件：EV_SET(&event, m_eventId, EVFILT_USER, EV_DISABLE, EV_CLEAR|NOTE_FFCOPY, 0, NULL)
5.  脉冲用户事件：未测试...暂时使用用例 1。
6.  等待代码片段：如原始帖子中所述。

测试就像一个魅力。在我的测试中，我做了 NOTE_FFCOPY 的事情，但我认为没有必要。

用户事件有 2 种状态 - 已发出信号，未发出信号。EV_ENABLE 和 EV_DISABLE 似乎设置了这些状态。

测试验证，信号状态的事件实际上是由 kevent() 重复报告的。

# mongodb - 我是否正确使用了这个 mongoDB 的索引？

> ID：16072397
> 
> 赞同：0
> 
> 时间：2013-04-18T00:08:46.413
> 
> 标签：mongodb, database, nosql

所以我需要一些关于我做错了什么的建议。

我的数据库的设置与由`folders`和组成的文件系统完全一样`files`。它以文件夹开头，但可以有相对无限数量的子文件夹和/或文件。

```
{
   "name":"folder1",
   "uniqueID":"zzz0",
   "subcontents": [ {"name":"subfolder1", "uniqueID":"zzz1"}, 
                    {"name":"subfile1", "uniqueID":"zzz2"}, 
                    {"name":"subfile2", "uniqueID":"zzz3"}, 
                    {"name":"subfolder2", "subcontents": [...etc...], "uniqueID":"zzz4"}, 
                  ] 
} 
```

每个文件夹/文件文档都有一个唯一 ID，以便我可以引用它（见上面 zzz#）。我的问题是，我可以进行 mongoDB 查询以仅提取一个文档吗？

例如说`db.fileSystemCollection.find({"uniqueID":"zzz4"})`，它会给我以下结果？我必须使用索引来做到这一点吗？我一直在尝试，但查询每次都返回空。

预期结果 ---> {"name":"subfolder2", "subcontents": [...etc...], "uniqueID":"zzz4"}

**[编辑]** 根据下面的回复，我将考虑在 mongoDB 上使用 XML 数据库。无法重新排列 json 结构以与 MongoDB 一起使用（数据过多）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T02:46:59.903

正如克里斯所说，简短的回答是否定的。

您对树的嵌入式表示非常适合直观理解（以及实现）。但是，如果您想允许在 MongoDB 中使用索引对您的树进行有效搜索，您可能会考虑另一种树存储方式。[在http://docs.mongodb.org/manual/tutorial/model-tree-structures/](http://docs.mongodb.org/manual/tutorial/model-tree-structures/)列出了一堆方法

请记住，每种表示方式都有其优缺点，具体取决于您的访问模式。

由于对于类似文件系统的结构，它可能能够找到给定文件夹的所有子内容，因此您可以为此使用子引用模式：

```
{
   "name":"folder1",
   "uniqueID":"zzz0",
   "subcontents": [ "zzz1", 
                    "zzz2", 
                    "zzz3", 
                    "zzz4" 
                  ] 
}

{
  "name":"subfolder1", 
  "uniqueID":"zzz1"
}

... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:10:54.447

不; 搜索`{uniqueID: "zzz4"}`只会得到顶级 uniqueID 匹配的文档。

您可能想要的是在文档上维护一个数组，其中列出了该树中的所有唯一 ID。所以你的文件将是：

```
{
   "name":"folder1",
   "uniqueID":"zzz0",
   "idList": ["zzz0", "zzz1", "zzz2", "zzz3", "zzz4"],
   "subcontents": [ {"name":"subfolder1", "uniqueID":"zzz1"},
                    {"name":"subfile1", "uniqueID":"zzz2"},
                    {"name":"subfile2", "uniqueID":"zzz3"},
                    {"name":"subfolder2", "subcontents": [...etc...], "uniqueID":"zzz4"},
                  ]
} 
```

然后你可以索引：

```
db.fileSystemCollection.ensureIndex({"idList": 1}) 
```

然后你可以在上面找到：

```
db.fileSystemCollection.find({"idList": "zzz4}) 
```

那将把这些文件还给你。

顺便说一句，如果你想在 Mongo 中存储文件，你看过[GridFS](http://docs.mongodb.org/manual/core/gridfs/)吗？

# javascript - 在最后一张幻灯片之后加载新页面的 javascript 幻灯片

> ID：16072401
> 
> 赞同：0
> 
> 时间：2013-04-18T00:09:29.607
> 
> 标签：javascript, slideshow

对不起，我对 JS 很陌生。我有一个基本的 html 页面，我在其中放置了一个幻灯片，每次单击都会推进幻灯片。我想要发生的是当用户单击下一步并在最后一张幻灯片上时将其更改为新页面。我的html：

```
<div id="images">
    <img id="image1" src="http://www.lorempixel.com/960/580/sports" />
    <img id="image2" src="http://www.lorempixel.com/960/580/cats" />
    <img id="image3" src="http://www.lorempixel.com/960/580/food" />
    <img id="image4" src="http://www.lorempixel.com/960/580/people" />
</div> 
```

我的 JS 看起来像这样：

```
var max = 4;

function goToNext() {
    var hash = String(document.location.hash);
    if (hash && hash.indexOf(/image/)) {
        var newh = Number(hash.replace("#image", ""));
        (newh > max - 1) ? newh = 0 : void(null);
        document.location.hash = "#image" + String(newh + 1);
    } else {
        document.location.hash = "image1";
    }
}

function goToPrevious() {
    var hash = String(document.location.hash);
    if (hash && hash.indexOf(/image/)) {
        var newh = Number(hash.replace("#image", ""));
        (newh == 1) ? newh = 5 : void(null);
        document.location.hash = "#image" + String(newh - 1);
    } else {
   var url = window.location.href;

if (url.search("#image") > 0) {
    window.location.href = "strategy.html";
  }    
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:37:37.657

改变这个：

```
(newh > max - 1) ? newh = 0 : void(null);
        document.location.hash = "#image" + String(newh + 1); 
```

对此：

```
(newh > max - 1) ? window.location.href = "strategy.html" :
        document.location.hash = "#image" + String(newh + 1); 
```

[jsfiddle](http://jsfiddle.net/arcm111/4QnDp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:38:48.210

只需检查 newh 是否为零，

```
 if(newh == 0) 
        document.location.href = "strategy.html"; 
```

这是所有代码，[DEMO](http://jsfiddle.net/FXrs6/4/)

```
var max = 4;

function goToNext() {
    var hash = String(document.location.hash);
    if (hash && hash.indexOf(/image/)) {
        var newh = Number(hash.replace("#image", ""));
        (newh > max - 1) ? newh = 0 : void(null);

        if(newh == 0) 
            document.location.href = "strategy.html";
        else 
            document.location.hash = "#image" + String(newh + 1);
    } else {
        document.location.hash = "image1";
    }
}

function goToPrevious() {
    var hash = String(document.location.hash);
    if (hash && hash.indexOf(/image/)) {
        var newh = Number(hash.replace("#image", ""));
        (newh == 1) ? newh = max+1 : void(null);
        document.location.hash = "#image" + String(newh - 1);
    } else {
        document.location.hash = "image4";    
 }
} 
```

# php - 如何在 PHP 和 MYSQL 中验证密码

> ID：16072404
> 
> 赞同：0
> 
> 时间：2013-04-18T00:09:52.780
> 
> 标签：php, mysql

我在网上找到了一篇文章，其中包含以下代码，我想用它来了解更多 php/mysql ......

```
$username = 'Admin';
$password = 'gf45_gdf#4hg';

$salt = hash('sha256', uniqid(mt_rand(), true) . 'a random string will go here' . strtolower($username));

$hash = $salt . $password;

for ( $i = 0; $i < 100000; $i ++ ) {
     $hash = hash('sha256', $hash); }

$hash = $salt . $hash; 
```

当用户想要登录时，我将如何验证 PHP 中的密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:11:28.480

您将运行完全相同的程序并查看结果是否匹配。

这是查看汇总密码是否存储匹配密码的一般过程。

*   您创建一个函数来散列和存储已知密码，并且通常也会对其进行加盐
*   您将其存储在数据库中
*   当用户提交密码登录时，您通过完全相同的哈希和加盐算法运行它，并查看生成的哈希是否与存储在数据库中的哈希匹配

您还应该考虑使用 bcrypt：[How do you use bcrypt for hashing passwords in PHP?](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:14:09.520

建议在 PHP 中编写一个类似模仿上述过程的函数。这样，当您尝试验证提交的凭据时，您将通过与构思期间相同的哈希过程运行密码，但生成随机盐除外。

# c++ - c++错误处理返回值错误返回

> ID：16072408
> 
> 赞同：0
> 
> 时间：2013-04-18T00:10:20.053
> 
> 标签：c++, try-catch

我有一门课，我已经得到了一些错误输入处理。这是一个被赋予了它自己的“提取”运算符的类，我被要求实现给我的代码。我遇到的问题是我应该使用的代码与此类似。

```
try {
    while (some condition)
    {....implemented code....}
} catch (runtime_error& e) {
    cerr << e.what() << endl;
    return 1;
} 
```

我编译这个的问题是它似乎不喜欢“return 1”值，它给了我一个错误：

```
invalid initialization of non-const reference of type ‘std::istream& {aka std::basic_istream<char>&}’ from an rvalue of type ‘int’ 
```

如果我删除返回值，它会直接编译，但程序一旦到达它试图执行 try 语句的区域，就无法执行。如前所述，我在上面的代码是我们应该实现的示例代码，所以我假设它直接开箱即用。我的 while 循环条件是

```
while (!std::cin.fail()) 
```

正如我假设的那样，我想继续获得输入，直到由于某种原因失败。为什么这种情况下的返回值会导致问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:12:38.887

心理调试说明：

您的封闭函数具有表单的签名

```
std::istream& func_name(/*parameter list goes here*/) 
```

因此编译错误

# java - Amazon S3 上传 InputStream - 线程挂起

> ID：16072410
> 
> 赞同：6
> 
> 时间：2013-04-18T00:10:46.460
> 
> 标签：java, amazon-s3, inputstream

我正在编写一种从 Amazon s3 存储桶放置/获取文件的基本方法。这是我方法中的相关代码。“key”是 S3 名称，“saveStream”是 InputStream

```
Upload myUpload = transferManager.upload(daqBucketName, key, saveStream, metadata);

try {
    myUpload.waitForCompletion();
    saveStream.close();
    } catch (InterruptedException e) {
        key = null;
        e.printStackTrace();
    } catch (AmazonServiceException e) {
        key = null;
        e.printStackTrace();
} catch (AmazonClientException e) {
    key = null;
        e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}   
finally {
        if (saveStream != null) {
            try {
            saveStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        }
}

return key;

} 
```

流上传成功，但有一个线程阻止程序完成（让程序运行）。任何想法出了什么问题？这是 jstack 转储：

```
"Attach Listener" daemon prio=10 tid=0x6a403c00 nid=0x2019 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"DestroyJavaVM" prio=10 tid=0xb6609400 nid=0x1b51 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

"s3-transfer-manager-worker-1" prio=10 tid=0x695d1800 nid=0x1b5f waiting on condition [0x68efe000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x9f3a2178> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:386)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)

"java-sdk-http-connection-reaper" daemon prio=10 tid=0x69551800 nid=0x1b5e waiting on condition [0x69292000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at com.amazonaws.http.IdleConnectionReaper.run(IdleConnectionReaper.java:75)

"Low Memory Detector" daemon prio=10 tid=0xb66cb000 nid=0x1b5c runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=10 tid=0xb66c9400 nid=0x1b5b waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=10 tid=0xb66c7400 nid=0x1b5a waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0xb66c6000 nid=0x1b59 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=10 tid=0xb66b6400 nid=0x1b58 in Object.wait() [0x6ae7d000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x9f2a02c0> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:133)
    - locked <0x9f2a02c0> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:149)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)

"Reference Handler" daemon prio=10 tid=0xb66b4c00 nid=0x1b57 in Object.wait() [0x6a7eb000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x9f2a4038> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:502)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
    - locked <0x9f2a4038> (a java.lang.ref.Reference$Lock)

"VM Thread" prio=10 tid=0xb66b1000 nid=0x1b56 runnable 

"GC task thread#0 (ParallelGC)" prio=10 tid=0xb6610800 nid=0x1b52 runnable 

"GC task thread#1 (ParallelGC)" prio=10 tid=0xb6611c00 nid=0x1b53 runnable 

"GC task thread#2 (ParallelGC)" prio=10 tid=0xb6613400 nid=0x1b54 runnable 

"GC task thread#3 (ParallelGC)" prio=10 tid=0xb6614c00 nid=0x1b55 runnable 

"VM Periodic Task Thread" prio=10 tid=0xb66cd400 nid=0x1b5d waiting on condition 

JNI global references: 1641 
```

# ruby - Gemfile 中的 Ruby Bundler 多个源

> ID：16072412
> 
> 赞同：30
> 
> 时间：2013-04-18T00:10:53.130
> 
> 标签：ruby, bundler, gemfile

我需要确保我的一些 gem 是从我们自己的 gem 存储库而不是 ruby​​gems 安装的，而其余的则是从 ruby​​gems 安装的。我可以在 Gemfile 中设置它而不用担心与 Rubygems 中同名 gem 的命名冲突吗？如何确定 gem 是从哪里下载的？

例如 Gemfile：

```
source :rubygems  
gem 'gemfromrubygems1'  
gem 'gemfromrubygems2'

source "http://our.own.gem.repo.com/the/path/to/it"  
gem 'gemfromourrepo' 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-08-14T05:19:18.193

Bundler 1.7 有一个新功能，允许您通过将特定 gem 嵌套在一个块中来选择它们的来源：

```
source "https://rubygems.org"

gem 'gemfromrubygems1' 
gem 'gemfromrubygems2'

source "http://our.own.gem.repo.com/the/path/to/it" do
  gem 'gemfromourrepo'
end 
```

或将其指定为选项：

```
source "https://rubygems.org"

gem 'gemfromrubygems1' 
gem 'gemfromrubygems2'

gem 'gemfromourrepo', source: "http://our.own.gem.repo.com/the/path/to/it" 
```

有关详细信息，请参阅[http://bundler.io/v1.7/gemfile.html](http://bundler.io/v1.7/gemfile.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-18T20:22:39.957

根据[Gemfile 手册页](http://bundler.io/v1.3/man/gemfile.5.html#SOURCE-PRIORITY)中的 Source Priority 部分，从最后输入到第一个输入搜索源。

根据您所说，听起来您希望始终更喜欢您的 gem `rubygems.org`。只要您不需要改变您的偏好（即`rubygems.org`来自您的私人仓库的一些副本和一些副本），那么您的问题就可以通过以下方式解决`Gemfile`：

```
source 'https://rubygems.org'
source 'http://our.own.gem.repo.com/the/path/to/it'

gem 'gemfromrubygems1'  
gem 'gemfromrubygems2'
gem 'gemfromourrepo' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T01:02:29.020

我发现的唯一方法似乎是一个可怕的黑客。

Bundler 将从最后列出的源开始搜索您的 gem 的最佳版本，然后搜索之前列出的所有源。源行相对于 gem 行的位置无关紧要，仅相对于彼此无关。

我尝试使用 :git 和 :path 使其工作，但这些都不适用于 gemservers。这样就匹配了最好的版本。

如果您将 gem 的版本设置为 2.mine.1 之类的东西并将其推送到您的服务器，您可以在 Gemfile 中限制版本。

```
source :rubygems
source 'http://myrepo'    
gem 'gemfromourrepo', '~> 2.ourrepo' 
```

那么最好的匹配版本应该是来自您的服务器的版本。有人可以将自己的同名 gem 与 2.ourrepo.2 推送到 ruby​​gems，但如果它是唯一的，这不太可能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-27T19:37:50.420

path 命令可能会有所帮助。它允许您设置 gem 特定的来源

```
gem "foo", "1.0", :path => "bar" 
```

来源：[http ://bundler.io/v1.3/man/gemfile.5.html](http://bundler.io/v1.3/man/gemfile.5.html)

# java - 计算数组中随机整数的平均值

> ID：16072418
> 
> 赞同：1
> 
> 时间：2013-04-18T00:11:36.890
> 
> 标签：java, arrays

我需要在用户指定的任意两个值之间生成指定数量的随机整数（例如，12 个数字都在 10 到 20 之间），然后计算这些数字的平均值。问题是如果我要求它生成 10 个数字，它只会生成 9（显示在输出中）。另外，如果我输入最大范围 100 和最小范围 90，程序仍然会生成 # 像 147等超出最大范围的...我弄乱了随机数生成器吗？有人可以帮忙吗？

这是我到目前为止的代码：

```
public class ArrayRandom
{
static Console c;           // The output console

public static void main (String[] args)
{
    c = new Console ();
    DecimalFormat y = new DecimalFormat ("###.##");

    c.println ("How many integers would you like to generate?");
    int n = c.readInt (); 
    c.println ("What is the maximum value for these numbers?");
    int max = c.readInt ();
    c.println ("What is the minimum value for these numbers?");
    int min = c.readInt ();

    int numbers[] = new int [n]; 
    int x;
    double sum = 0; 
    double average = 0; 

    //n = number of random integers generated
    for (x = 1 ; x <= n-1 ; x++) 
    {

        numbers [x] = (int) (max * Math.random () + min); 
    }

    for (x = 1 ; x <= n-1 ; x++) 
    {
        sum += numbers [x]; 
        average = sum / n-1); 

    }

    c.println ("The sum of the numbers is: " + sum); 
    c.println ("The average of the numbers is: " + y.format(average)); 

    c.println ("Here are all the numbers:"); 
    for (x = 1 ; x <= n-1 ; x++)  
{
        c.println (numbers [x]); //print all numbers in array
}

} // main method
} // ArrayRandom class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T00:13:54.123

Java 数组是从零开始的。在这里，您将第一个数组元素保留为其默认值`0`。代替

```
for (x = 1 ; x <= n-1 ; x++) 
```

和

```
for (x = 0 ; x < n ; x++) 
```

* * *

*编辑：*回答为什么这不会产生最小值和最大值之间的值的问题（从现在删除的评论）

```
max * Math.random () + min 
```

[Math.random](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#random%28%29)`0.0`在和之间生成双精度值`1.0`。例如，一个 min of`90`和 max of`100`将生成介于 and`90`和`190`(!) 之间的数字。要限制最小值和最大值之间的值，您需要

```
min + Math.random() * (max - min)
 ^    |_________________________|                          
 |                 |
90       value between 0 - 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T00:18:15.447

Java 数组从 0 开始索引。您的循环也将退出一个索引。因此，当 n==6 时，您的条件是“x <=5”，并且循环退出。尝试这个：

```
for ( x = 0; x < n; x++ {
   // stuff
} 
```

# iis - 将 IIS 7 设置为侦听不同于 80 的端口

> ID：16072419
> 
> 赞同：12
> 
> 时间：2013-04-18T00:11:37.527
> 
> 标签：iis, iis-7.5

我知道可以为托管的每个站点都这样做，但是 IIS 的默认端口可以设置为不同的端口吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-18T00:16:45.223

从 IIS 管理控制台中，选择`Default Web Site`. 在右侧，单击`Edit Bindings`链接，然后在随后的对话框中，根据需要更改默认端口绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T06:48:54.260

我找到了不同的解决方案。我的路由器正确允许流量进入，但 Windows 防火墙不允许端口 80 上的流量进入。我必须通过启用规则来允许它。

# jquery - Twitter Bootstrap 选项卡活动类切换不起作用

> ID：16072421
> 
> 赞同：23
> 
> 时间：2013-04-18T00:11:46.957
> 
> 标签：jquery, html, css, twitter-bootstrap, tabs

我正在使用 Twitter 引导导航选项卡和导航药片。这是我的html代码：

```
<div class="Header2" style="background-color:#1E3848">
    <div id="headerTab">
        <ul class="nav nav-tabs">
            <li class="active ans-tab"> <a href="http://myweb.com/">Home</a></li>
            <li class="topTab"><a href="http://myweb.com/score/">Score</a></li>
            <li class="topTab"><a href="http://myweb.com/leaderboards/">Leaderboards</a></li>
        </ul>
    </div>
    <div id="subHeaderTabPlayer">
        <ul class="nav nav-pills">
            <li class="active"> <a href="http://myweb.com/">Top</a></li>
            <li><a href="http://myweb.com/rules/" data-toggle="pill">Rules</a></li>
            <li><a href="http://myweb.com/player/" data-toggle="pill">Player</a></li>
            <li><a href="http://myweb.com/categories/" data-toggle="pill">Categories</a></li>
        </ul>
    </div>
</div> 
```

现在，如果我添加属性`data-toggle="pill"`并将 `data-toggle="tab"`带有活动类的选项卡更改为我单击的选项卡。但是，`href`不再工作。如果我不使用这些类，`href`则可以工作，但活动类不会改变，并且它始终保留在页面加载时给出的类的元素上。

我什至尝试使用 jQuery 来切换类行为，但效果不佳。我的脚本代码是：

```
<script type="text/javascript" src="//code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript">
    $(window).load(function(){
        document.getElementById( 'subHeaderTabPlayer' ).style.display = 'none';
        $('ul.nav-tabs li a').click(function (e) {
            var activeTab= document.getElementByClass('active');
            activeTab.removeAttribute("class");

            $('ul.nav-tabs li.active').removeClass('active')
            $(this).parent('li').addClass('active')
        })
        $('ul.nav-pills li a').click(function (e) {
            $('ul.nav-pills li.active').removeClass('active');
            $(this).parent('li').addClass('active');
        })
        $(".ans-tab").click(function() {
            document.getElementById('subHeaderTabPlayer').style.visibility = 'visible';
            document.getElementById('subHeaderTabPlayer' ).style.display = 'block';
        });
        $(".topTab").click(function() {
            document.getElementById('subHeaderTabPlayer').style.visibility = 'collapse';
            document.getElementById('subHeaderTabPlayer' ).style.display = 'none';
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-18T00:23:21.933

Bootstrap 导航选项卡和药丸与 JS 插件一起使用。该插件在页面上加载，并负责突出显示和记住当前活动的选项卡或药丸。如果链接到其他页面，它会禁用 href 属性，因为当您单击另一个页面的链接时，会加载一个新页面。然后为这个新页面重新加载 JS，它不知道哪个选项卡或药丸当前处于活动状态。它们旨在与单页面应用程序或指向同一页面上的锚点的链接一起使用，并且它们可以很好地用于此目的。

jQuery 方法因同样的原因而失败，但可能更容易解释。

```
$('ul.nav-pills li a').click(function (e) {
  $('ul.nav-pills li.active').removeClass('active')
  $(this).parent('li').addClass('active')
}) 
```

您单击一个链接，JS 会关闭并更改类，只有在加载下一页之前它有足够的时间这样做，才会加载下一页，因为链接上的 href 属性告诉浏览器导航到新的页。并且新页面会再次加载您的 JS，它可能无法记住前一页面中的变量，例如哪个选项卡或药丸应该处于活动状态。

如果您要导航到其他页面，您不妨在右侧选项卡上为正在加载的特定页面设置活动类。

如果您真的需要在客户端执行此操作，您可以执行类似的操作，并将其加载到每个页面上。

```
$(document).ready(function () {

  // Set BaseURL
  var baseURL = 'http://myweb.com/'

  // Get current URL and replace baseURL
  var href = window.location.href.replace(baseURL, '');

  // Remove trailing slash
  href = href.substr(-1) == '/' ? href.substr(0, href.length - 1) : href;

  // Get last part of current URL
  var page = href.substr(href.lastIndexOf('/') + 1);

  // Add trailing slash if not empty (empty means we're currently at baseURL)
  page = page != '' ? page + '/' : page;

  // Select link based on href attribute and set it's closest 'li' to 'active'. 
  // .siblings('.active').removeClass() is only needed if you have a default 'active li'.
  $('a[href="' + baseURL + page + '"]', '.nav li').closest('li').addClass('active').siblings('.active').removeClass();

}); 
```

它根据 URL 的最后一部分设置活动选项卡，但它特定于您的场景（以及以前的场景）。如果涉及文件扩展名或查询参数，则必须对其进行调整。每个页面至少需要有一个指向自身的链接。并且它最好具有与所有其他页面完全相同的标题，并在其上呈现相同的选项卡和药丸。

最后这两点再次在我的脑海中提出了一个想法“如果您必须对页面上呈现的确切内容进行如此多的控制，那么您可能可以访问服务器端”，如果是这种情况，您可能会以及在那里修复它，因为每个链接都会向服务器发出新请求。而且您的解决方案不必依赖一些不那么健壮的 JavaScript 来工作。

所以这就是我在一个阶段所做的，你可以改进它，或者实现一个解决方案，将一些数据发布到下一页并在那里使用 JavaScript 读取它（如果你有文件扩展名或要处理的查询字符串）。

祝你好运！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-01T03:47:46.397

需要考虑的事项：如果每个 li 元素使用不同的控制器，您可以尝试以下方法。

[如何让 Twitter-Bootstrap 导航显示活动链接？](https://stackoverflow.com/questions/9879169/how-to-get-twitter-bootstrap-navigation-to-show-active-link)

您的代码可能如下所示：

```
<ul class="nav nav-pills">
  <li class="<%= 'active' if params[:controller] == 'home' %>"> <a href="link" data-toggle="pill">Top</a></li>
  <li class="<%= 'active' if params[:controller] == 'rules' %>"><a href="link" data-toggle="pill">Rules</a></li>
  <li class="<%= 'active' if params[:controller] == 'player' %>"><a href="link" data-toggle="pill">Player</a></li>
  <li class="<%= 'active' if params[:controller] == 'categories' %>"><a href="link" data-toggle="pill">Categories</a></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-15T09:08:59.003

这个例子对我有用：

```
$leftBlock.on("click", "#navFinished", function(){
  $('ul.nav-pills li.active').removeClass('active');
  $(this).addClass('active');
}); 
```

虽然这个例子不起作用

```
$leftBlock.on("click", "#navFinished", function(){
  $('ul.nav-pills li.active').removeClass('active')
  $(this).parent('li').addClass('active')
}) 
```

删除 .parent("li") 有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-15T06:16:04.493

这是一个使用 jQuery 的更通用的客户端解决方案。它仅假定您的选项卡具有 data-toggle 属性，并且每组选项卡都包含在某种容器元素中。

```
$('[data-toggle="tab"],[data-toggle="pill"]').click(function() { 
    $(this).parent().children('.active[data-toggle="tab"],.active[data-toggle="pill"]').removeClass('active'); 
    $(this).addClass('active'); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-03T14:18:55.523

我按照@syeh 解决方案做对了。下面是我的代码片段。

```
<ul class="nav nav-pills">
   <li <?php if (strchr($this->pageTitle,' Job') === ' Job') echo 'class=active';?>><?php echo CHtml::link('JOBS', array('Job/index'));?></li>
   <li <?php if (strchr($this->pageTitle,'Artisan') === 'Artisan') echo 'class=active';?>><?php echo CHtml::link('ARTISANS', array('Artisan/index'));?></li>
   <li <?php if (strchr($this->pageTitle,'Task') === 'Task') echo 'class=active';?>><?php echo CHtml::link('TASKS',array('Task/index'));?></li>
</ul> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-11T15:35:08.567

我遇到了类似的问题：单击时，选项卡将变为活动状态，但不会`active`从其他选项卡中正确删除该类（即，用户在浏览量上单击的每个选项卡都会具有`active`该类）。

从 a 切换`<ol>`到 a`<ul>`使选项卡的行为正常。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-07-02T22:24:06.087

```
<?php
function activate($uri) {
    if ($_SERVER['REQUEST_URI'] == $uri) {
        echo ' class="active" ';
    }
}

?>

<nav>
    <ul class="nav nav-tabs">
      <li role="tab" <?php activate('/wikireport/index.php'); ?> ><a href="index.php" aria-controls="Home">Wiki Report</a></li>
      <li role="tab" <?php activate('/wikireport/examples.php'); ?> ><a href="examples.php" aria-controls="Examples">Examples</a></li>
      <li role="tab" <?php activate('/wikireport/about.php'); ?> ><a href="about.php" aria-controls="About">About</a></li>
    </ul>
</nav> 
```

然后在“内容”文件中，只需要/包含您的 navline.php

```
<?php 
include('navline.php'); 
?> 
```

# php - SQL 查询成功但没有信息

> ID：16072422
> 
> 赞同：0
> 
> 时间：2013-04-18T00:11:57.790
> 
> 标签：php, mysql, mysqli

好的，到目前为止，我的代码运行良好，一切顺利，我唯一的问题是，当我尝试打印无序列表及其内容时，我什么也得不到。当我查看我的源代码时，我有`<ul> </ul>`. 有一个空间，所以肯定会发生一些事情。

这是我的代码，我稍微评论了一下，但发生的事情很明显：

```
$uname = mysqli_real_escape_string($link, $_SESSION['Username']); //Get username ready
$sql = mysqli_query($link, "SELECT * FROM users WHERE Username = '" . $uname . "'"); //SQL Query result

    if(!$sql)
        {
        echo "Error retrieving User ID. Please try again. MySQL Error: " . mysqli_error($link);
        }
    elseif($row = mysqli_fetch_assoc($sql))
        {
            $uid = $row['UserID']; //Obtain UserID
        }
    else
        {
        echo "Error: " . mysqli_error($link) . "<br />" . $uname . " / " . $sql . " / " . $uid;
        }

    mysqli_free_result($sql);

    $sql = mysqli_query($link, "SELECT * FROM auditions"); //Get everything from the auditions table

    if(!$sql)
        {
        echo "Error retrieving auditions. Please try again later. Error: " . mysqli_error($link);
        }
    elseif($row = mysqli_fetch_assoc($sql))
        {
        if(mysqli_num_rows($sql)==0)
            {
            echo "Sorry, there are currently no open auditions. Please try back at a later date.";
            }
        else
            {
            echo "<ul>";
            while($row = mysqli_fetch_assoc($sql))
                {
                echo "<li><a href='auditions.php?id=" . $row['AudID'] . "'>" . $row['AudName'] . "</a></li>";
                }
            echo "</ul>";
            }
        }
    else
        {
        echo "Error: " . mysqli_error($link);
        } 
```

我哪里错了？它唯一没有做的就是实际获取任何结果，并且我已将一些数据放入表中，因此有条目！否则会说没有。我已经扭转了这一点，因此如果没有 0 个条目并且有效，它会显示消息。我做错了什么伙计们？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:15:34.417

您正在获取结果两次。相反，只在`while`循环中获取结果：

```
<?php
$sql = mysqli_query($link, "SELECT * FROM auditions"); //Get everything from the auditions table

    if(!$sql)
        {
            echo "Error retrieving auditions. Please try again later. Error: " . mysqli_error($link);
        }
        else{
            if(mysqli_num_rows($sql)==0)
            {
                echo "Sorry, there are currently no open auditions. Please try back at a later date.";
            }
            else
            {
                echo "<ul>";
                while($row = mysqli_fetch_assoc($sql))
                {
                    echo "<li><a href='auditions.php?id=" . $row['AudID'] . "'>" . $row['AudName'] . "</a></li>";
                }
                echo "</ul>";
            }
        }

?> 
```

[有关 mysql_fetch_assoc 的更多信息，请参阅此链接](http://php.net/manual/en/function.mysql-fetch-assoc.php)

# java - 桌面应用程序中的 MVC 和 Swing

> ID：16072423
> 
> 赞同：7
> 
> 时间：2013-04-18T00:11:59.913
> 
> 标签：java, swing, model-view-controller, design-patterns

在意识到我完全忽略了 MVC 模式后，我尝试在具有 Swing 视图的应用程序中利用该概念。我现在已经阅读了大多数关于 Swing 的 MVC 主题的帖子，但仍然有点困惑，因为它对我来说太复杂了，我认为我需要一些基本的说明，所以我不会误会小路。

我也想知道在实际项目中使用 MVC 有多普遍。许多在线教程似乎省略了控制器并将其与模型混合，而我对 XSTL 的业务逻辑功能感到困惑。为什么要从 JSP 视图处理数据源？

除了这些想法，我的正确问题是：

如果你有一个 Swing 组件，该 Swing 类中的事件监听器是否应该通过调用 POJO 控制器类中的（可能是静态的？）方法来更新组件状态，这反过来又从模型中获取适当的业务逻辑，模型由 POJO 组成类层次结构和相关的持久性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-06T13:36:59.597

我作为自由职业者工作了很长时间，几乎 90% 的项目都是关于 Java Swing（桌面应用程序）的。还有很多项目涉及从Visual Fox Pro等语言迁移到Java，这很痛苦，因为困难的部分不是在已经完成的逻辑中思考，困难的部分是把乱七八糟的代码转过来遵循良好实践并使用设计模式，将代码转换为好看的代码，这就是为什么在您的脑海中制作一个模式或地图是一个好主意，您可以按照模型、视图、控制器的概念来分离您的代码。

如前所述，MVC 可帮助您拥有美观、可维护且易于阅读的代码，并遵循编程范式和良好实践。

视图：显然，与用户交互的部分（用户界面），在 Swing 的情况下，你的窗口、框架、面板和所有涉及你的应用程序所需的图形组件的代码。

控制器：涉及您为应用程序建立的核心或业务逻辑，在这个“层”中，您应该包括功能和“我的应用程序将如何实现目标？”。

模型：与您管理的数据相关，例如，代表您要管理或维护的数据的实体和类。

应用 MVC 并不难，但正如我所提到的，当您必须将代码从非应用 MVC 结构迁移到 MVC 结构化应用程序时，有时可能会很痛苦。使用 MVC 开始编码更容易。

我习惯它的一种方法是使用 maven 并将我的应用程序分成小“模块”，当然，你不需要 maven，我只是在那一刻发现它很有用，但无论如何你可以尝试练习或获得通过将应用程序分成小项目来习惯于 MVC，例如：

Java项目1：application-data-model（包含所有与数据管理相关的代码：entities、dtos、beans、daos）

Java 项目 2：application-core-controller（包含所有业务逻辑和功能，如果您想让代码在与视图相关时更加“透明”，可以在此处使用外观模式）

Java 项目 3：application-view-ui（包含所有面板、框架和图形组件）

以这种方式工作帮助我（并迫使我）习惯于分离我的代码并密切关注对我正在从事的项目真正重要的事情。例如，如果我在应用程序数据模型上，我专注于数据模型，我不会考虑业务逻辑或图形界面。

冗长的解释，也许有人可以做得更好，但希望我能帮助你，或者至少帮助你。

此致。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-06T12:07:27.987

首先是对 MVC 的基本理解的 URL

[http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

现在是在 Swing 应用程序中实现它的方法。不要将控制器功能与侦听器功能混淆。

1.  UI 控件和附加到它们的侦听器应在您的视图类中定义。
2.  在任何情况下，只要您需要调用业务逻辑，就需要调用控制器类。就像从数据库中获取一些值一样。
3.  控制器类应该与您的模型对话以获取数据并在需要时对其进行操作。
4.  模型类应该对数据起作用。

使用 MVC 的想法是减少冗余代码和更易于管理的代码。因此，如果您正在进行一些计算/操作，则可以将它们移至控制器。可以从需要相同内容的不同视图调用控制器。类似地，多个控制器可以使用模型来获取数据。

# java - 如何指定自定义视图的宽度？

> ID：16072424
> 
> 赞同：0
> 
> 时间：2013-04-18T00:12:05.473
> 
> 标签：java, android, view, size, android-view

我在尝试为自定义视图的宽度设置特定大小时遇到​​问题。我知道我可以`layout_width`在文件的字段中硬编码一个值，`XML`但我试图不导致硬编码值。我需要我`View`的屏幕大小只有一半。因此，在`class`我发现屏幕尺寸的一半：

```
 WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();
    try{
        Point size = new Point();
        display.getSize(size);
        screenWidth = size.x;
    }catch(NoSuchMethodError e){
        screenWidth = display.getWidth();
    } 
```

然后，我打电话：

```
 measure(width|MeasureSpec.EXACTLY, LayoutParams.WRAP_CONTENT|MeasureSpec.EXACTLY);
 //Where width is equal to half the screen width 
```

但这似乎不适用于我的情况。**那么，总而言之，**您如何正确指定自定义的特定尺寸`View`？任何帮助都将是有用的和感激的！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:22:25.883

我相信此时您可能无法准确地获得屏幕的宽度，因为您需要等到整个层次结构（直到最根视图）布置好。您可能需要执行以下操作：

```
ViewTreeObserver.OnGlobalLayoutListener layoutListener = new ViewTreeObserver.OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {

            int width = getWidth();
            int height = getHeight();
            //set layoutparams with those values.
            }
        };

getViewTreeObserver().addOnGlobalLayoutListener(layoutListener); 
```

您可以通过查看在尝试获取 onMeasure 内部的显示宽度时获得的值是否与调用 onGlobalLayout 回调时获得的值不同来确认此操作的正确性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:32:38.830

覆盖`onMeasure()`自定义视图中的方法：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int width = getResources().getDisplayMetrics().widthPixels >> 1;
    widthMeasureSpec = MeasureSpec.makeMeasureSpec(width, MeasureSpec.EXACTLY);
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
} 
```

基本上，将宽度覆盖为`MeasureSpec`屏幕宽度的一半，然后将其传递给超类。

# c - 为什么我可以将更长的字符串分配给 C 中的指针？

> ID：16072431
> 
> 赞同：1
> 
> 时间：2013-04-18T00:13:21.707
> 
> 标签：c, string, pointers, memory, malloc

```
#include <stdio.h> 
#include <stdlib.h>

int main()
{
    char *ptr = malloc(sizeof(char) * 1);
    ptr = "Hello World";

    puts(ptr);
    getchar();
} 
```

我不是 malloc() 专家，但由于我只分配了一个字节但为 *ptr 指针分配了一个包含 11 个字节的值，所以该代码不应该给出错误吗？
或者 H 是否存储在我分配的位置，然后字符串的其余部分只是放在它之后的位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T00:17:17.447

您正在将指针“ptr”重新分配给另一个内存块，因此您不会看到任何错误。但是，您分配的内存块（大小 1）“丢失”并导致内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T00:19:20.260

使用时，`malloc`您请求一些内存并`malloc`返回该内存的第一个地址（如果可以给出）。当您重新分配指针时，您不会对它指向的内存做任何事情。您只需更改指针指向的内容*。*

你在这里所做的在技术上是有效的 C**但**你正在创建内存泄漏，因为你丢失了`malloc`ed 内存的地址，`free`当你完成它时你必须这样做。

# c# - C#字体显示OpenGL

> ID：16072433
> 
> 赞同：2
> 
> 时间：2013-04-18T00:13:42.007
> 
> 标签：c#, opengl

我正在使用 Windows 中的 Tao 框架开发 2D CAD 应用程序。我想使用 Windows 库中的字体来显示绘图信息。除此之外，我想旋转缩放我的文本。使用位图字体我无法做到这一点。

我通过了 OpenGL 字体调查 [http://www.opengl.org/archives/resources/features/fontsurvey/] 但其中大部分是基于 C++ 的 API。

你能指导我在 C# 中有哪些可用的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:48:21.303

对于 3D，我遵循了我找到的[`OpenTK`](http://www.opentk.com/)与`Tao.Framework`.

![屏幕](https://i.stack.imgur.com/BUvmF.png)

```
 public void AddTexture(Bitmap texture, bool mipmaped)
    {
        this.tex_id = World.LoadTexture(texture, mipmaped);
    }
    public void AddText(string text, Color color, float x, float y, float scale)
    {
        const int side = 256;
        Bitmap texture = new Bitmap(side, side, System.Drawing.Imaging.PixelFormat.Format32bppArgb);
        Graphics g = Graphics.FromImage(texture);
        using (Brush brush = new SolidBrush(Color))
        {
            g.FillRectangle(brush, new Rectangle(Point.Empty, texture.Size));
        }
        using (Font font = new Font(SystemFonts.DialogFont.FontFamily,  12f))
        {
            SizeF sz = g.MeasureString(text, font);
            float f = 256 / Math.Max(sz.Width, sz.Height) * scale;
            g.TranslateTransform(256 / 2 + f * sz.Width / 2, 256 / 2 - f * sz.Height / 2);
            g.ScaleTransform(-f, f);
            using (Brush brush = new SolidBrush(color))
            {
                g.DrawString(text, font, brush, 0, 0);
            }
        }
        AddTexture(texture, true);
    }

    public static int LoadTexture(Bitmap texture, bool mipmaped)
    {
        int id = gl.GenTexture();
        gl.BindTexture(TextureTarget.Texture2D, id);
        int wt = texture.Width;
        int ht = texture.Height;

        gl.TexParameter(TextureTarget.Texture2D,
            TextureParameterName.TextureWrapS, (int)TextureWrapMode.Repeat);
        gl.TexParameter(TextureTarget.Texture2D,
            TextureParameterName.TextureWrapT, (int)TextureWrapMode.Repeat);

        System.Drawing.Imaging.BitmapData data = texture.LockBits(
            new Rectangle(0, 0, wt, ht),
            System.Drawing.Imaging.ImageLockMode.ReadOnly,
            System.Drawing.Imaging.PixelFormat.Format32bppArgb);

        gl.TexImage2D(TextureTarget.Texture2D, 0,
            PixelInternalFormat.Rgba, wt, ht, 0,
            PixelFormat.Bgra, PixelType.UnsignedByte, data.Scan0);

        texture.UnlockBits(data);

        if (mipmaped)
        {

            gl.GenerateMipmap(GenerateMipmapTarget.Texture2D);
            gl.TexParameter(TextureTarget.Texture2D,
                TextureParameterName.TextureMinFilter, (int)TextureMinFilter.LinearMipmapLinear);
        }
        else
        {
            gl.TexParameter(TextureTarget.Texture2D,
                TextureParameterName.TextureMinFilter, (int)TextureMinFilter.Nearest);
        }
        gl.TexParameter(TextureTarget.Texture2D,
            TextureParameterName.TextureMagFilter, (int)TextureMagFilter.Nearest);

        return id;
    } 
```

# java - Android项目中的NoClassDefFoundError

> ID：16072442
> 
> 赞同：2
> 
> 时间：2013-04-18T00:14:47.743
> 
> 标签：java, android, libgdx

在过去的几个月里，我和一些同事一直在做一个项目，当我们完成最终的 android 构建时，我们中的一些人开始了解`noclassdeffrounderror`我们`LogCat`何时在我们的设备上运行该应用程序。代码没有改变，它引用调用的类与无法找到的类处于同一级别，位于同一包中。该项目在其他计算机上运行，​​看起来有点随机。我已经尝试了一切来解决这个问题，但没有一个奏效。如果我在另一台可以编译的计算机上编译代码并制作一个 apk，它运行良好。但如果从有错误的计算机编译，它总是会崩溃。帮助！

```
04-17 20:05:55.929: E/AndroidRuntime(12615): FATAL EXCEPTION: main
04-17 20:05:55.929: E/AndroidRuntime(12615): java.lang.NoClassDefFoundError: com.team.catswithhats.AndroidGPS
04-17 20:05:55.929: E/AndroidRuntime(12615):    at com.team.catswithhats.MainActivity.onCreate(MainActivity.java:14)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at android.app.Activity.performCreate(Activity.java:5104)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at android.os.Looper.loop(Looper.java:137)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at java.lang.reflect.Method.invoke(Method.java:511)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-17 20:05:55.929: E/AndroidRuntime(12615):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T05:07:01.133

当在 eclipse 中找到一个类从而正确构建时会发生这种情况，但不是在运行时。

**右键单击**您的**Android 项目**->**属性**-> **Java 构建路径**->**订购和导出**并检查核心项目和所有 jar。

# r - 如何在 ggplot2 注释中包含 \perp 符号？

> ID：16072448
> 
> 赞同：2
> 
> 时间：2013-04-18T00:15:00.557
> 
> 标签：r, ggplot2, symbols, annotate

我想添加一个注释：E \perp c using `ggplot2` `annotate("text", label = ...)`.

我在网上进行了彻底的搜索，但只设法使用`annotate("text", label = "symbol('\136')", parse = T)`.

有没有人有办法解决吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T01:27:19.347

从帮助页面绘制代码：

```
 p <- ggplot(df, aes(x = gp, y = y)) +
    geom_point() +
    geom_point(data = ds, aes(y = mean),
               colour = 'red', size = 3)
 p+geom_text( aes(x="b", y=-0.4, label = "E(y)*symbol('\\136')*b" ),
   parse = TRUE) 
```

在让它工作之后，我也能够开始`annotate(text"...)`工作：

```
p+annotate("text",  1, -0.4, label="E(y)*symbol('\\136')*b", parse=TRUE) 
```

技巧：混合你所做的引用字符，但也使用我猜你可能没有使用过的 plotmath 语法。

编辑：`*`不是引用字符。如果有的话，它应该被称为链接字符。在 plotmath 语法中，每个“原子”或函数调用都需要与相邻的原子/函数分开（或“链接到”，具体取决于您如何查看）。您可以使用`*`（无空格分隔符/链接器）、`~`（间距分隔符/链接器）或绘图词汇表中的任何二元运算符来执行此操作，示例包括`+`、`-`、`==`、`!=`。

# vb.net - 在 vb.net 中向用户发送电子邮件

> ID：16072451
> 
> 赞同：0
> 
> 时间：2013-04-18T00:15:41.030
> 
> 标签：vb.net

好的，所以我尝试向在文本框中输入电子邮件的用户发送电子邮件。我对我应该做什么有了一个基本的想法，但我很困惑我应该在哪里放置 CMTPClient()、凭据以及来自哪里。什么电子邮件应该去那里。我尝试输入我的电子邮件地址和凭据，但我不断收到此错误“SMTP 服务器需要安全连接或客户端未经过身份验证”。这是我的代码

```
 Try
        Dim username As String
        username = TextBox1.Text
        Dim SmtpServer As New SmtpClient("smtp.gmail.com")
        Dim mail As New MailMessage()
        SmtpServer.Credentials = New System.Net.NetworkCredential("what username goes 
        here", "what password goes here")
        SmtpServer.Port = 587
        mail = New MailMessage()
        mail.From = New MailAddress("what email should i put here")
        mail.To.Add(username)
        mail.Subject = "Qustions"
        mail.Body = "This is for testing your mother"
        SmtpServer.Send(mail)
        MsgBox("mail send")
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:23:15.560

`SmtpServer.EnableSsl = True`调用前使用`SmtpServer.Send(mail)`

> “SMTP 服务器需要安全连接或客户端未通过身份验证”

表示 SMTP 服务器在启用 SSL（加密）的连接上工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:59:46.937

请记住，gmail 不只是开放给所有人使用。否则，好吧，你知道：垃圾邮件。现在，垃圾邮件发送者必须千方百计寻找或创建可用的 smtp 网关。如果有任何主要提供商让自己处于开放状态，请考虑一下您现在收到的所有垃圾邮件并将其乘以大约 1000。

所以你需要有一个 gmail 帐户才能使用他们的 smtp 服务器。不仅如此，如果您每天发送超过 400 封电子邮件，您可能需要一个特殊帐户，或者一个特殊的、**有信誉**的群发邮件的帐户。这些邮件会向您收取每条消息的费用，但这是值得的，因为否则每天有超过几条消息会引起注意并导致您发送的任何内容都被过滤为垃圾邮件......而这仍在传输中，甚至在它到达之前目的地的邮件主机也要在那里检查。您基本上是在支付滋扰费，以确保您的信息是认真的，而不是大量垃圾。

顺便说一句，如果您知道您的音量足够低，并且在您拥有有效的 gmail 帐户后，您只需要进行一些更改：

```
Try
    Dim SmtpServer As New SmtpClient("smtp.gmail.com")
    Dim mail As New MailMessage()
    SmtpServer.Credentials = New System.Net.NetworkCredential("gmailusername@gmail.com", "your gmail password")
    SmtpServer.EnableSsl = True
    SmtpServer.Port = 587
    mail = New MailMessage()
    mail.From = New MailAddress("gmailusername@gmail.com")
    mail.To.Add(TextBox1.Text)
    mail.Subject = "Questions"
    mail.Body = "This is for testing your mother"
    SmtpServer.Send(mail)
    MsgBox("mail sent")
Catch ex As Exception
    MsgBox(ex.ToString)
End Try 
```

# class - Cake PHP 自定义验证规则

> ID：16072455
> 
> 赞同：0
> 
> 时间：2013-04-18T00:15:52.623
> 
> 标签：class, cakephp, validation

我在 Cake 2.X 中遇到了自定义验证规则的问题

我想检查输入的邮政编码是否有效，因此从类帖子中调用类邮政编码中的一个函数。

但是验证总是返回 false 。

课堂帖子中的 Appmodel（规则 3）：

```
'DELIVERYAREA' => array(
        'rule-1' => array(
            'rule' => array('between', 5, 5),
            'message' => 'Bitte eine fünfstellige Postleitzahl eingeben'
        ),
        'rule-2' => array(
            'rule' => 'Numeric',
            'message' => 'Bitte nur Zahlen eingeben'
        ),
        'rule-3' => array(
            'exists' => array(
                'rule' => 'ZipExists',
                'message' => 'Postleitzahl existiert nicht!'
            )
        )
    ), 
```

类邮政编码中的 Appmodel：

```
class Zipcode extends AppModel {
  var $name = 'Zipcode';

  var $validate = array(
    'zipcode' => array(
       'length' => array(
              'rule' => array('maxLength', 5),
              'message' => 'Bitte einen Text eingeben'
          ),
         'exists' => array(
          'rule' => array('ZipExists'),
          'message' => 'Postleitzahl existiert nicht!'

       )
    )         
  );

  function ZipExists($zipcode){

    $valid = $this->find('count', array('conditions'=> array('Zipcode.zipcode' =>$zipcode)));
    if ($valid >= 1){
      return true;
    }
    else{
      return false;
    }
  } 
```

我希望这很容易吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:07:43.903

我认为这：

`'Zipcode.zipcode' =>$zipcode`

...需要是这样的：

`'Zipcode.zipcode' =>$zipcode['zipcode']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:07:51.693

小心你在验证规则中的期望。使用 debug() 等来找出到底是什么。 $data 在这里始终是一个数组。

```
public function zipExists($data) {
    $zipcode = array_shift($data); // use the value of the key/value pair
    $code = $this->find('first', array('conditions'=> array('Zipcode.zipcode' =>$zipcode)));
    return !empty($code);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:09:38.697

尝试仅用于模型验证。

```
 function ZipExists(){

    $valid = $this->find('count', array('conditions'=> array('Zipcode.zipcode' =>$this->data['Zipcode']['zipcode'])));
    if ($valid >= 1){
      return true;
    }
    else{
      return false;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T08:20:28.770

我找到了解决方案。Cake 希望自定义验证规则位于调用该规则的特定类中。因此，当您在课堂帖子中调用自定义规则时，必须将自定义函数写在课堂帖子中，否则 cake 不会找到它并每次都将其验证为 false。

这里要做的魔术是在你调用验证函数的类中导入你想要使用的 appmodel-class。这适用于以下语句：

$Zipcode = ClassRegistry::init('Class to use - 在我的例子中是 "Zipcode"');

但是，如果您的表通过 hasAny 或 belongsTo 和其他东西相互关联，则自定义函数可以在没有这些的情况下工作。您不能错过的另一个重要点是，所有验证功能都必须使用“公共功能 xyz”引入，否则蛋糕也找不到它们。

# php - Wordpress 网站在输出中制造“漏洞”

> ID：16072457
> 
> 赞同：0
> 
> 时间：2013-04-18T00:16:14.807
> 
> 标签：php, wordpress

我的页面[http://www.allyourpods.no/](http://www.allyourpods.no/)有一些奇怪的“漏洞”，我一辈子都无法弄清楚。

我希望得到一些帮助来弄清楚如何让它以适当的方式自动填充网站。

我的开始屏幕模板文件如下所示：

```
<?php
/*
Template Name: Home Template
*/
 get_header(); ?>
<?php query_posts('cat='.recPodcastCategory.'&showposts=30');?>
<?php $categories = get_categories('child_of='.recPodcastCategory); ?>
<?php if($categories):  $count=0;?>
<div class="recommended">
    <div class="wrapper">
        <div class="main_recommended_main_block">

            <?php foreach($categories as $category) { if($count<30) { $count++; 
                if($count!=30) $class='recommend_block'; else $class='recommend_block_1'; ?>
                <?php if (function_exists('get_terms_meta'))
                    {
                        $cat_image = get_terms_meta($category->term_id, 'image',true);
                        $add_play_podcast = get_terms_meta($category->term_id, 'play_download',true);
                    }?>
                <div class="<?php echo $class;?>">
                    <div class="main"> 
                      <?php $play_podcast = get_post_meta($post->ID,'play_podcast',true);?>
                      <div class="view view-fifth"><?php if($cat_image):?><img src="<?php echo $cat_image;?>" alt="category image" /><?php endif;?>
                        <?php if($add_play_podcast):?>
                            <div class="mask"><a href="<?php echo get_category_link($category->term_id);?>" class="info">Play</a></div>
                        <?php endif; ?>
                      </div>
                    </div>

                    <?php echo substr( category_description( $category->term_id ),0,100 ) . "..."; ?>
                    </div>
            <?php } } ?>
            </div>
  </div>

</div>
<?php endif; ?>
<?php if(!isset($_GET['pod_category']))$class_all = ' class="active"';  ?>
<div class="clr"></div>
<?php get_footer(); ?> 
```

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:47:52.070

你应该添加这个CSS：

```
.recommend_block:nth-child(4) {
    clear: left;
} 
```

问题是前两个中的一个比其他的低一点，所以它阻塞了浮动。

编辑：应该是

```
.recommend_block:nth-child(4n) 
```

# php - PHP 和 MySQL 是相互关联的吗？

> ID：16072462
> 
> 赞同：-6
> 
> 时间：2013-04-18T00:17:03.917
> 
> 标签：php, mysql

PHP 和 MySQL 以什么方式相互关联？

我学过 SQL，但从未学过 PHP。我看到用 PHP 编写的 Web 工具用于执行所有 MySQL 操作，并且我读到与 MySQL 交互使 PHP 成为一个更有趣的工具。这两个什么时候一起使用，还是建议一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:18:37.453

PHP 是一种服务器端语言。它可以连接到许多不同的数据库平台。

MySQL 是 PHP 可以使用的关系数据库管理系统。

由于它们都是开源的，这使得它们非常普遍地一起使用。它们不是专门一起使用的，而是独立的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T00:22:12.570

PHP 是一种主要用于服务器端 Web 编程的编程语言。MySQL 是一个关系型数据库。

您看到它们一起使用的原因如下：

1.  两者都是免费和开源的
2.  两者都在大多数网络主机（甚至共享主机提供商）上广泛使用
3.  PHP 用于创建动态网页，而 MySQL 用于以比平面文件更方便的方式存储和访问数据（请参阅“为什么数据库比平面文件更好”）。他们在服务器上扮演互补的角色

一起使用，您可以创建有趣的动态网站 (Wikipedia)、应用程序 (Facebook) 和框架 (Wordpress)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T00:25:13.667

它们仅与开源有关。开源是一种[“促进免费再分发和访问最终产品的设计和实现细节”的心态。](http://en.wikipedia.org/wiki/Open_source)

[PHP](http://www.php.net/)和[MySQL](http://www.mysql.com/)通常一起使用，因为 PHP 具有用于连接和查询 MySQL 数据库的 API，例如[ODBC](http://us2.php.net/manual/en/book.uodbc.php)、[PDO](http://us2.php.net/manual/en/book.pdo.php)和[MySQLi](http://us2.php.net/manual/en/book.mysqli.php)，这是对原始[MySQL](http://us2.php.net/manual/en/book.mysql.php)函数的改进。此外，大多数托管公司将在其 Apache 服务器安装中包含两者的安装，因为两者都得到大量社区的积极支持并被大公司使用。MySQL 由 Oracle 授权，Oracle 也授权 Java（另一种开源编程语言）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T00:19:37.550

PHP 请求是无状态的。MySql 之类的数据库可用于存储静态数据（例如 XML 文件）。MySql 可能是最常用的*关系数据库系统*之一。并非所有 PHP 应用程序都需要数据库，但它们*通常*都需要。

# python - 无法使用 Jython 在 Eclipse 上的 PyDev 控制台中提供用户输入

> ID：16072466
> 
> 赞同：0
> 
> 时间：2013-04-18T00:17:27.917
> 
> 标签：python, eclipse, pydev, jython

我试图调试一个使用 PyDev 插件在 Eclipse 中运行的 jython 程序很长一段时间，但是一旦我从终端运行它就可以工作。我怀疑可能是用户输入在 Eclipse 控制台上不起作用，所以我尝试运行我能想到的最基本的 jython 输入程序

```
name = raw_input("What is your name? ")
print "Hello %s" % (name) 
```

当它运行时它输出

```
What is your name? 
```

当我在控制台中输入时，会出现正常的绿色文本，但是在按下回车键时，什么也没有发生。如何让控制台将输入反馈给进程？

编辑：输入在按下终止时馈送到程序，因此它输出

```
Hello name 
```

此外，这仅在使用 PyDev 时发生，在 java 透视图中运行 java 代码时输入工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:30:06.177

这真的很奇怪（对我有用）。

因此，为了正确识别正在发生的事情，我需要更多信息：

1.  您使用的 jython 版本是什么？

2.  您的错误日志中有内容吗？

3.  什么是 Eclipse 版本？

4.  你到底是怎么跑的？（提示：只需按 F9 就足够了）

# iphone - ARC模式下的objective-c'double free'错误

> ID：16072467
> 
> 赞同：0
> 
> 时间：2013-04-18T00:17:42.677
> 
> 标签：iphone, ios, objective-c, objective-c-blocks

我正在尝试练习块和 GCD/NSOperation，所以我编写了这个项目[Async-objc](https://github.com/disorderdev/Async-objc)，但是当我尝试使用单元测试对其进行测试时，我总是遇到“双重释放”错误，我认为不应该在ARC模式下会出现这样的错误。

这是代码

```
- (void)each:(NSArray *)items iterator:(callbackEach)iterator complete:(callbackWithError)complete {
    NSBlockOperation *blockOp = [NSBlockOperation blockOperationWithBlock:^{
        if (!items || items.count == 0) {
            complete(nil);
            return;
        }

        callbackWithError __block completeOnce = complete;
        NSOperationQueue *queue = [[NSOperationQueue alloc] init];
        NSLog(@"start operations %@", queue);
        [queue setMaxConcurrentOperationCount:kMaxConcurrentOperationCount];
        NSInteger __block count = 0;
        for (id item in items) {
            NSOperation *op = [NSBlockOperation blockOperationWithBlock:^{
                iterator(item, ^(NSError *error) {
                    if (error) {
                        completeOnce(error);
                        completeOnce = nil;
                    } else {
                        count++;
                        if (count >= items.count) {
                            completeOnce(nil);
                            completeOnce = nil;
                        }
                    }
                });
            }];

            [queue addOperation:op];
        }

        [queue waitUntilAllOperationsAreFinished];
        NSLog(@"all operations are down %@", queue);
    }];
    [_mainQueue addOperation:blockOp];
} 
```

这是测试代码：

```
- (void)testEachWithBigData {
    BOOL __block completed = false;
    NSMutableArray *items = [NSMutableArray arrayWithCapacity:100];
    for (int i = 1; i < 10000; ++i) {
        [items addObject:[NSString stringWithFormat:@"%d", i]];
    }
    NSMutableArray *result = [NSMutableArray arrayWithCapacity:100];
    [_async each:items
        iterator:^(id item, callbackWithError callback) {
            //NSLog(@"======item %@", item);
            NSNumber *num = [NSNumber numberWithInt:[item integerValue]];
            //NSLog(@"number %@", num);
            [result addObject:num];

            callback(nil);
        }
        complete:^(NSError *error) {
            dispatch_async(dispatch_get_main_queue(), ^{
                STAssertNil(error, @"there should be no error");
                [result sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
                    NSNumber *num1 = (NSNumber *)obj1;
                    NSNumber *num2 = (NSNumber *)obj2;
                    if ([num1 integerValue] > [num2 integerValue]) {
                        return NSOrderedDescending;
                    } else if ([num1 integerValue] < [num2 integerValue]) {
                        return NSOrderedAscending;
                    }
                    return NSOrderedSame;
                }];

                NSInteger index = 1;
                for (NSNumber *num in result) {
                    STAssertEquals(index, [num integerValue], @"the value should be ordered");
                    index++;
                }
                completed = YES;
            });
        }
     ];

    NSDate *until = [NSDate dateWithTimeIntervalSinceNow:10];
    while (!completed && [until timeIntervalSinceNow] > 0) {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode
                                 beforeDate:until];
    }
} 
```

如果您无法重现错误，请将测试项目数增加到 10000。

```
 for (int i = 1; i < 10000; ++i) {
        [items addObject:[NSString stringWithFormat:@"%d", i]];
    } 
```

并**评论 NSLog()** 然后 Command + U 运行单元测试

这是错误消息：otest(11105,0xb039f000) malloc: ***对象 0xa0f8000 的错误：未分配指针被释放

otest(11209,0xb0115000) malloc: *** 对象 0x41dcc00 的错误：未分配被释放的指针 ***在 malloc_error_break 中设置断点以进行调试

这次我无法重现“双重免费”错误

# c++ - For循环添加到变量

> ID：16072468
> 
> 赞同：0
> 
> 时间：2013-04-18T00:17:46.833
> 
> 标签：c++

我正在尝试创建一个循环，每次 if 语句为真时将 1 添加到 int 变量

但是在测试代码时，即使 if 语句为真，变量也不会增加，就好像 my for 循环根本没有增加一样......

代码示例：

```
int left_jab_count;
if(area >=100000 && area1 <100000)
{
    cout<<"LEFT JAB HAS BEEN THROWN"" "<<area<<endl;

    for(int left_jab_count = 0; left_jab_count < 0 ;++left_jab_count)
    {
        cout<<"Left Jab :"<<left_jab_count<<endl;
    }
} 
```

谁能看到这里哪里出错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T00:18:30.917

```
 for(int left_jab_count = 0; left_jab_count < 0 ;++left_jab_count)
                                        //^^^^left_jab_count is never < 0
                                        // change <0 to some value larger than 0 
```

你`for`循环永远不会执行。因此，`left_jab_count`永远不会增加，你永远不会进入`for`循环体。

与此同时，你宣布`left_jab_count`了两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T00:25:16.030

tacp 已经充分涵盖了您当前代码的问题，所以我不会讨论这些问题。根据您的规范，*“我正在尝试创建一个循环，每次 if 语句为真时将 1 添加到 int 变量”*，您想要的是这样的：

```
int left_jab_count = 0; // Don't forget to initialise this

while (true) // Replace with real loop
{
    // Do NOT initialise left_jab_count here, otherwise it will be
    // reset to 0 on every loop

    // Insert code which changes area and area1

    if (area >= 100000 && area1 < 100000)
    {
        cout << "LEFT JAB HAS BEEN THROWN " << area << endl;
        left_jab_count++;
    }
} 
```

除非您错误地说明了您的规范，否则您不需要在块`for`内使用循环。`if`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T01:16:07.570

JBentley 回答了您提出的问题。在他发布的 While 语句中，您应该添加一个为 true 的条件，以便里面的代码可以运行。我猜你想输入：

```
while (left_jab_count < NUMBER) 
```

确保条件为真，以便循环可以启动并运行 if 语句。

# typescript - 为什么 TypeScript 模块不能实现或遵守接口？我可以解决这个问题吗？

> ID：16072471
> 
> 赞同：7
> 
> 时间：2013-04-18T00:18:10.377
> 
> 标签：typescript

在 TypeScript 中要求模块实现接口似乎非常有用。他们选择不实施这种能力有什么特别的原因吗？

我想不出任何理由为什么不允许模块实现接口是不可取的，但如果是这样，那么有没有其他方法要求模块提供一组特定的属性/方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T00:52:45.553

如果模块不遵循这样的接口（技术上非零运行时开销，但实际上不太重要），您可以强制编译错误：

```
interface foo {
    bar(): number;
}

module mod {
    export function bar(): number {
        return 0;
    }
}
var mod_is_foo: foo = mod; // errors if you change 'number' to 'string' above 
```

至于为什么不能说`module mod implements foo`？[所有功能都从负 100 开始](https://docs.microsoft.com/en-us/archive/blogs/ericgu/minus-100-points)。

`var`编辑添加——如果你想避免创建一个新的顶级变量，你可以写一些其他（有点古怪）的东西来代替上面的语句：

```
<foo>mod; // Shortest, probably fastest?
<foo>undefined === mod; // Clearest non-var version? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:26:04.780

Ryan 实际上是 Typescript 团队的成员，所以他的回答几乎是最终的。但我个人认为它不提供您所寻求的语法很好。

原因是模块更像是一个实例，而不是可以被实例化的东西（例如一个类）。通过这种方式，它更接近于一个 var 而不是一个类。

所以原因就变成了它类似于你写的原因：

```
var x:foo; 
```

代替

```
var x implements foo; 
```

模块的行为与您可以做的相同

```
var y:foo = mod; 
```

正如瑞安已经指出的那样。

还要检查一下：

```
interface foo {
    bar(): number;
}

module mod {
    export function bar(): number {
        return 0;
    }
}

var x: foo; 
x = mod;

// Still a bit whacky but allowed as module is a type as well as an instance
var y:mod;
y = x; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-18T13:08:27.723

您可以将您的模块放在具有明确定义接口的 TypeScript 类中。一个小缺点是您需要在使用之前实例化该类。

**./脚.ts**

```
export default interface Foo {
    bar(): number;
} 
```

**./FooImpl.ts**

```
import Foo from "./Foo";

export default class FooImpl implements Foo {
    bar(): number {
        return 13;
    }
} 
```

**./Main.ts**

```
import Foo from "./Foo";
import FooImpl from "./FooImpl";

const foo: Foo = new FooImpl();

export default function main(): number {
    return foo.bar();
} 
```

**./FooMock.ts**

```
import Foo from "./Foo";

export default class FooMock implements Foo {
    bar(): number {
        return 42;
    }
} 
```

**./Main.test.ts**

```
import main from "./Main";

jest.mock('./FooImpl', () => {
    return jest.requireActual('./FooMock').default;
});

describe('Main', () => {
    it('should return 42 for the mock Foo implementation', () => {
        expect(main()).toBe(42);
    });
}); 
```

# c# - 如何使用 Monogame 和 Xamarin 修复数字溢出？

> ID：16072473
> 
> 赞同：1
> 
> 时间：2013-04-18T00:18:15.477
> 
> 标签：c#, .net, xamarin.ios, xamarin, monogame

我最近在我的开发硬件上安装了最新版本的 OSX、Xcode 和 Xamarin Monotouch，但我无法让最简单的 Monogame 示例正常运行。

这是弹跳框示例，它在应用程序启动时崩溃，在第一次初始化 A = 255 的 Color 结构时：

```
public byte A
{
    ...

    set
    {
        this._packedValue = (this._packedValue & 0x00ffffff) | ((uint)(value << 24));
    }
} 
```

这段代码在 Windows 甚至 iOS 模拟器上都可以正常工作，但是当我在 iPad 1 (iOS 5) 或 iPhone 5 (iOS6) 上运行它时，我得到的异常是“System.OverflowException: Number overflow.”。如果我将代码更改为不会导致溢出：

```
set
{
    var val = (uint)value;

    var val2 = val << 24;

    this._packedValue = (this._packedValue & 0x00ffffff) | val2;
} 
```

这个问题消失了，但同样的问题也出现在 R、G 和 B 属性中。我的直觉是 Monogame 在编写时并没有考虑到数字溢出，并且可能有无数这样的例子。由于编写了示例代码，这一定是一个“新”问题。

我是否缺少一些编译器开关来强制它忽略数字溢出？我正在使用 Visual Studio 2012 通过网络进行部署，在项目属性下我看不到任何与此相关的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:19:54.713

`unchecked`如果我理解问题和 msdn 文档，您可以在一个块内完成整个操作。

```
set
{
    unchecked
    {
        this._packedValue = (this._packedValue & 0x00ffffff) | ((uint)(value << 24));
    }
} 
```

但是，这可能会导致意想不到的后果（负数，但由于您使用的是无符号数，因此我不确定您是从 0 开始还是仍然引发异常），而且我从未亲自使用过它。

可以在这里找到参考：http: [//msdn.microsoft.com/en-us/library/a569z7k8 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/a569z7k8(v=vs.110).aspx)

# c++ - 无法将列表迭代器强制转换为对象

> ID：16072486
> 
> 赞同：4
> 
> 时间：2013-04-18T00:19:49.977
> 
> 标签：c++

我得到错误：

```
error C2682: cannot use 'dynamic_cast' to convert from 'std::_List_iterator<_Mylist>' to 'UserBean *' 
```

执行时：

```
list<UserBean> * userBeans = getUserBeans();

for(list<UserBean>::iterator i = userBeans->begin(); i != userBeans->end(); i++)
   UserBean * newUser = dynamic_cast<UserBean*>(i); 
```

我做错了什么，还是不能将迭代器项转换为对象？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T00:22:36.613

有时迭代器被实现为指向容器项的原始指针，但更多时候，它们根本不是指针，所以不要那样对待它们。访问迭代器引用的项目的**正确方法是取消引用迭代器，例如：**

```
UserBean &newUser = *i; 
```

或者：

```
UserBean *newUser = &(*i); 
```

迭代器通常会覆盖`->`操作符，以便您可以访问被引用项的成员，在迭代器引用实际对象实例（您的实例）而不是指向对象实例的指针的情况下，例如：

```
i->SomeMemberHere 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T00:21:57.423

> 我做错了什么，还是不能将迭代器项转换为对象？

不，你不能。您可以取消引用迭代器来访问对象：

```
UserBean & newUser = *i; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T00:21:17.000

您不能将迭代器转换为这样的指针 - 这不是`dynamic_cast`目的。您应该只`dynamic_cast`在处理多态行为时使用（如果有的话）。但是，您可以这样做：

```
UserBean* newUser = &*i; 
```

这将取消引用迭代器以获取对象，然后获取对象的地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T00:21:54.267

你的容器类型`list<UserBean>`不是`list<*UserBean>`

这就是为什么你的迭代器是错误的。它的类型是`UserBean`. 不是`UserBean*`。

```
UserBean userBean = *i; 
```

或者

```
UserBean& userBean = *i; 
```

# r - 如何绘制计算 PDF 的函数？

> ID：16072487
> 
> 赞同：0
> 
> 时间：2013-04-18T00:19:52.417
> 
> 标签：r, function, plot, probability

所以这是我的函数计算的 PDF：

fx = 0.3 如果 (0<=x<1) 0.1 如果 (1<=x<2) 0.25 如果 (2<=x<3) 0.15 如果 (3<=x<4) 0.2 如果 (4<=x< 5) 否则为 0

这是我的编码：

```
 fx = function(x)
    { 
    if ((0<=x) & (x<1)) 0.3
    else if ((1<=x) & (x<2)) 0.1
    else if ((2<=x) & (x<3)) 0.25
    else if ((3<=x) & (x<4)) 0.15
    else if ((4<=x) & (x<5)) 0.2
    else 0
    } 
```

现在我将如何绘制 y=fx？
我试过了：

```
 x <- runif(n,0,5)
    y <- fx(x)
    plot(x, y, type='1', xlim=c(0,5), ylim=c(0,5)) 
```

但是我得到一个错误，“x”和“y”的长度不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T00:48:21.557

您的问题归结为您的函数没有正确矢量化（它不能很好地处理矢量）。

如果您使用 上一个问题中关于*完全相同的问题的*[公认解决方案](https://stackoverflow.com/a/16070530/1385941)，那么您将不会遇到任何问题

 *例如

```
# a solution that will work and be properly vectorized
fx <- function(x) c(0, 0.3,0.1,0.25,0.15,0.20, 0)[findInterval(x, c(-Inf, 0:5, Inf))]

 x <- runif(n,0,5)

plot(x, fx(x)) 
```

如果你想绘制一个阶梯函数（这就是这个pdf），你可以使用`stepfun`

例如

```
fx <- stepfun(x = 0:5, y = c(0,0.3,0.1,0.25,0.15,0.20,0))
plot(fx, ylim = c(0,0.4),xlim = c(0,5), main = 'f(x)') 
```

![在此处输入图像描述](https://i.stack.imgur.com/ysYQu.png)

如果您不想添加积分，那么

```
plot(fx, ylim = c(0,0.4),xlim = c(0,5), main = 'f(x)', do.points=FALSE) 
```

如果要矢量化阶跃函数，请使用`Vectorize`

```
 vfx <- Vectorize(fx) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T00:41:00.567

您的 PDF 未矢量化。尝试这个：

```
fx <- function(x) {
  ifelse((0<=x) & (x<1), 0.3,
  ifelse((1<=x) & (x<2), 0.1,
  ifelse((2<=x) & (x<3), 0.25,
  ifelse((3<=x) & (x<4), 0.15,
  ifelse((4<=x) & (x<5), 0.2,
  0)))))
}

x <- seq(0, 6, length.out=n)
plot(x, fx(x)) 
```*

# sql - SQL Group by Child Table with conditions

> ID：16072488
> 
> 赞同：0
> 
> 时间：2013-04-18T00:20:02.027
> 
> 标签：sql, group-by, having

我已经简化了一点来问这个问题。因此，请随心所欲地使用桌子。

我有两张桌子

父表列是

```
ParentId,Parent_FirstName,Parent_LastName 
```

子表列是

```
ChildId,Child_FirstName,Child_LastName,ParentId,Parent_FirstName,Parent_LastName 
```

父表有一条记录

```
1,Joe,Bloggs 
```

Child Table 有 3 条记录

```
1,Bob,Lawrence,1,,

2,Sam,Hunt,NULL,Joe,Bloggs

3,Sam,Hunt,1,, 
```

我希望能够通过使用查询来获得以下信息

```
Joe Bloggs Bob Lawrence
Joe Bloggs Sam Hunt 
```

但是..我希望能够通过以下方式链接父子表

```
1)If there is a parentid on the child table then link using the parentid
2)Else compare the parent_first and parent_lastname in the child table with that of the child tables 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:29:36.143

像这样：

```
SELECT
  p.Parent_FirstName,
  p.Parent_LastName,
  c.Child_FirstName,
  c.Child_LastName
FROM parent AS p
INNER JOIN child AS c ON p.ParentId = c.ParentId; 
```

在这里查看它的实际效果：

*   [SQL 小提琴演示](http://sqlfiddle.com/#!2/b400b2/1)。

这会给你：

```
| PARENT_FIRSTNAME | PARENT_LASTNAME | CHILD_FIRSTNAME | CHILD_LASTNAME |
-------------------------------------------------------------------------
|              Joe |          Bloggs |             Bob |       Lawrence |
|              Joe |          Bloggs |             Sam |           Hunt | 
```

* * *

**注意：**这个查询将`JOIN`使用一个简单`JOIN`的使用第一个条件来链接两个表的两个表：

> 1）如果子表上有parentid，则使用parentid链接

就足够了；它会给你你正在寻找的东西，***但是***对于你想要将子表与父表链接的第二个条件：

> 2)否则将子表中的parent_first和parent_lastname与子表的进行比较

您可以添加以下条件`OR`：

```
 c.ParentId IS NULL 
 AND c.Parent_FirstName = p.Parent_FirstName
 AND c.Parent_LastName  = p.Parent_LastName 
```

像这样的东西：

```
SELECT 
  p.Parent_FirstName,
  p.Parent_LastName,
  c.Child_FirstName,
  c.Child_LastName
FROM parent AS p
INNER JOIN child AS c ON p.ParentId = c.ParentId 
                      OR (c.ParentId IS NULL 
                          AND c.Parent_FirstName = p.Parent_FirstName
                          AND c.Parent_LastName  = p.Parent_LastName) 
```

这将为您提供相同的结果，但有重复的行：

*   [SQL 小提琴演示](http://sqlfiddle.com/#!2/b400b2/6)

像这样：

```
| PARENT_FIRSTNAME | PARENT_LASTNAME | CHILD_FIRSTNAME | CHILD_LASTNAME |
-------------------------------------------------------------------------
|              Joe |          Bloggs |             Bob |       Lawrence |
|              Joe |          Bloggs |             Sam |           Hunt |
|              Joe |          Bloggs |             Sam |           Hunt | 
```

添加`DISTINCT`以`SELECT`消除重复的行。

* * *

**免责声明：**

这假设您不是在寻找递归查询。

# objective-c - SDWebImage 未在 UITableViewCell 中随机显示

> ID：16072492
> 
> 赞同：0
> 
> 时间：2013-04-18T00:20:41.053
> 
> 标签：objective-c, objective-c-blocks, sdwebimage

您好，我有一个脚本可以下载图像并在完成下载后动态设置 UITableView 高度，但有些图像随机不显示，奇怪的是当我来回切换选项卡时，图像突然出现。在选项参数中，我传递了 SDWebImageRetryFailed。

任何想法都会受到欢迎，谢谢。

```
 @interface NeobuggyFrontPageViewController()
    {
        UIImageView *adBanner;
        NSArray *news ;
        NSMutableData *imageData;
        NSURLConnection *connection;
        UIImage *neoImage;
        NSString *category;
        RSSItem *item;
        FrontPageViewNewsCell *cell ;
        CGRect newFrame;
        __block CGRect descFrame;
        float newWidth , newHeight;
         __block float blockHeight;
    }

    -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    item = [news objectAtIndex:[indexPath row]];
    cell = [tableView dequeueReusableCellWithIdentifier:@"FrontPageNewsCell"];
    [[cell newsTitle] setText:[item title]];
    [[cell newsVideo] setAlpha:0.0];
    if ([item newsImageURL]){
        descFrame = [[cell newsBody] frame];

        [[cell newsImage] setImageWithURL:[item newsImageURL] placeholderImage:[UIImage imageNamed:@"placeholderImage.png"] options:SDWebImageRetryFailed  completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType){
            if (image) {
                CGRect newsImageFrame = [[cell newsImage] frame];
                float downImageWidth = image.size.width;
                float downImageHeight = image.size.height;
                float newsImageWidth = 304.00; //imageViewSize.size.width;
                if (downImageWidth > newsImageWidth) {
                    float scaleFactor = newsImageWidth / downImageWidth;
                    newWidth = downImageWidth * scaleFactor;
                    newHeight = downImageHeight * scaleFactor;

                } else {
                    newWidth = downImageWidth;
                    newHeight = downImageHeight;
                }

                newFrame = CGRectMake(newsImageFrame.origin.x, newsImageFrame.origin.y, newWidth, newHeight);

                [[cell newsImage] setFrame:newFrame]; //asigno el nuevo frame a la imagen . 

                float newOriginY = newFrame.origin.y + newFrame.size.height + 10.00;
                descFrame = CGRectMake(cell.newsBody.frame.origin.x,
                                       newOriginY,
                                       304.00,
                                       cell.newsBody.frame.size.height);

                blockHeight = newHeight;
            }
            NSLog(@"image %@ cached ? %u", image ,cacheType);
            if (error) {
                NSLog(@"Error: %@",error);
            }

        }];

    } else if([item newsVideoURL]) {
        [[cell newsImage] setAlpha:0.0];
        [[cell newsVideo] setAlpha:1.0];
        [[cell newsVideo] loadRequest:[NSURLRequest requestWithURL:[item newsVideoURL]]];
        float newOriginY = cell.newsVideo.frame.origin.y + cell.newsVideo.frame.size.height + 10.00;
        descFrame = CGRectMake(cell.newsBody.frame.origin.x, newOriginY, 304, cell.newsBody.frame.size.height);
        blockHeight = cell.newsVideo.frame.size.height;
    }
    [[cell newsImage] setNeedsDisplay];
    NSString *desc = [[NSString alloc] initWithString:[item description]];
    [[cell newsBody] setFrame:descFrame];
    desc = [desc htmlToString:desc];
    [[cell newsBody] setText:desc];
    [[cell newsBody] setNumberOfLines:0];
    [[cell newsBody] sizeToFit];
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
    return cell;

}

    -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
        cell  = (FrontPageViewNewsCell *)[self tableView:tableView cellForRowAtIndexPath:indexPath];
        CGSize descHeight = [[[cell newsBody] text] sizeWithFont:[[cell newsBody] font] constrainedToSize:cell.newsBody.frame.size lineBreakMode:[[cell newsBody] lineBreakMode]];
        CGSize titleHeight = [[[cell newsTitle] text] sizeWithFont:[[cell newsTitle] font] constrainedToSize:cell.newsTitle.frame.size lineBreakMode:[[cell newsTitle] lineBreakMode]];
        newHeight = cell.newsImage.frame.size.height;
        if (blockHeight == 0) {
            [tableView reloadData];
        } else {
            float ch = titleHeight.height + blockHeight + descHeight.height + 70;
            [self setCellHeight:ch];

        }
        return _cellHeight;

    } 
```

尽管解决方案不太理想，但部分解决了。由于我只需要显示 10 个单元格，因此我阻止了 UITableViewCell 的重用

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    item = [news objectAtIndex:[indexPath row]];
    NSString *identifier = [NSString stringWithFormat:@"Cell %d", indexPath.row];
    UINib *nib = [UINib nibWithNibName:@"FrontPageViewNewsCell" bundle:nil];
    [[self tableView] registerNib:nib forCellReuseIdentifier:identifier];
    cell = [tableView dequeueReusableCellWithIdentifier:identifier];

    // cell = [tableView dequeueReusableCellWithIdentifier:@"FrontPageNewsCell"]; 
```

仍然有兴趣找到重用单元的解决方案

谢谢，

# javascript - 如何在拖动的图像上添加特定的声音

> ID：16072493
> 
> 赞同：1
> 
> 时间：2013-04-18T00:20:52.177
> 
> 标签：javascript, html

这个想法是这样的：

您会听到声音，然后您必须将正确的图像拖放到框中。我想用它来教我女儿关于动物的知识，而对于我自己来说，我想更多地了解这些功能。

我真的希望有人可以帮助我。非常感谢您的时间。

这是代码：

```
<html>   
<head>
    <style type="text/css">
        #div1 {width:200px;height:158px;padding:10px;border:1px solid #aaaaaa;}
    </style>
    <script>
        function allowDrop(ev)
        {
            ev.preventDefault();
        }
        function drag(ev)
        {
            ev.dataTransfer.setData("Text",ev.target.id);
        }

        function drop(ev)
        {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Text");
            ev.target.appendChild(document.getElementById(data));
        }
    </script>
</head>
<body>
    <p>Jamila sleep het juiste diertje naar de vierkant</p>
    <audio????
    <div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    <br>
    <img id="drag1" src="eend.jpg" draggable="true" ondragstart="drag(event)" width="200" height="158">
<img id="drag2" src="tigr.jpg" draggable="true" ondragstart="drag(event)" width="200" height="158"> 
```

你的诚恳，

奥尔罕

# firebase - 为什么在非规范化数据时使用对象？

> ID：16072494
> 
> 赞同：2
> 
> 时间：2013-04-18T00:20:55.490
> 
> 标签：firebase

在最近关于[denormalising data](https://www.firebase.com/blog/2013-04-12-denormalizing-is-normal.html)的博客文章中，它建议在每个用户下方记录所有用户的评论，如下所示：

```
comments: {
    comment1: true,
    comment2: true
} 
```

为什么这不是这样的列表：

```
comments: [
    "comment1",
    "comment2",
] 
```

有什么优势？有什么区别吗？当我这样做时，您将如何为分布式应用程序的这些评论生成唯一引用？我在想，如果有一个列表，我只需将它们推到最后，让数组处理索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:06:00.767

Firebase 只存储对象。JS 客户端使用索引作为键将数组转换为对象。因此，例如，如果您使用以下数组存储以下数组`set`：

```
comments: [
  "comment1",
  "comment2"
] 
```

在 Forge（图形调试器）中，它将显示为：

```
comments:
   0: comment1
   1: comment2 
```

鉴于此，将评论的 ID 直接存储为密钥的优点是您可以直接在安全规则中引用它，例如，使用如下表达式：

```
root.child('comments').hasChild($comment) 
```

为了生成这些评论的唯一参考，请使用`push`（[https://www.firebase.com/docs/managing-lists.html](https://www.firebase.com/docs/managing-lists.html)）：

```
var commentsRef = new Firebase("https://<example>.firebaseio.com/comments");
var id = commentsRef.push({content: "Hello world!", author: "Alice"});
console.log(id); // Unique identifier for the comment just added. 
```

# c++ - 如何从 std::list 中实现 O(1) 擦除

> ID：16072498
> 
> 赞同：6
> 
> 时间：2013-04-18T00:21:09.883
> 
> 标签：c++, c++11, stdlist

问题是推荐的`std::list`用于实现 O(1) 擦除列表项的方法是什么？

通常，当我选择一个双向链表时，我希望能够在 O(1) 时间内从列表中删除一个元素，然后在 O(1) 时间内将其移动到另一个列表中。如果元素有自己的指针`prev`和`next`指针，那么完成工作就没有真正的技巧。如果列表是双向循环列表，则删除不一定需要知道包含该项目的列表。

根据[迭代器失效规则](https://stackoverflow.com/q/6438086/315052)，`std::list`迭代器非常耐用。因此，在我看来，在我自己的项目上使用时我想要的行为`std::list`是在我的类和包含列表中存储一个迭代器。

```
class Item {
    typedef std::shared_ptr<Item> Ptr;
    struct Ref {
        std::list<Ptr>::iterator iter_;
        std::list<Ptr> *list_;
    };
    Ref ref_;
    //...
}; 
```

这有一个缺点，我需要创建自己的装饰版本`std::list`，知道`ref_`在将项目添加到列表时更新。我想不出一种不需要嵌入式迭代器的方法，因为没有迭代器意味着擦除会首先导致 O(n) 查找操作。

使用 O(1) 擦除的推荐方法是什么`std::list`？或者，是否有更好的方法来实现目标？

* * *

过去，我通过实现自己的列表数据结构来实现这一点，其中放置在列表中的项目有自己的 next 和 prev 指针。管理这些指针是很自然的，因为它们是列表操作本身所固有的（我的列表实现的 API 会调整指针）。如果我想改用 STL，那么最好的方法是什么？我提供了嵌入迭代器的稻草人建议。有更好的方法吗？

如果需要具体的用例，请考虑使用计时器实现。创建计时器时，会将其放入适当的列表中。如果它被取消，则希望有效地删除它。（此特定示例可以通过标记而不是删除来解决，但它是实现取消的有效方法。）可根据要求提供其他用例。

* * *

我探索的另一种选择是将 a`std::list`与 a融合`std::unordered_map`以创建指针类型的专用列表。这是更重量级的（因为哈希表），但提供了一个非常接近接口级别的标准容器的容器，并且给了我 O(1) 的列表元素擦除。稻草人提案中唯一缺少的功能是指向当前包含该项目的列表的指针。[我已经在CodeReview](https://codereview.stackexchange.com/q/31886)上提出了当前的实现以征求意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T03:36:42.167

`std::list::erase`保证为 O(1)。

没有太多其他方法可以从标准列表中删除元素。（`std::list::remove`和朋友不做完全相同的事情，所以他们不算数）。

如果要从标准列表中删除，则需要一个迭代器和列表本身。这就是你似乎已经拥有的。做不同的事情并没有太多的自由。与您所做的不同，我会将列表包含与对象分开，因为为什么要制作一个一次只能在一个列表中的对象？对我来说似乎是一种不必要的人为限制。但是，无论您的设计如何提供动力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T08:48:07.890

也许你可以重新设计你的界面来分发迭代器而不是原始对象？对于您的计时器示例：

```
class Timer {
  // ...
};

typedef std::list<Timer>::iterator TimerRef;

class Timers {

  public:

    TimerRef createTimer(long time);
    void cancelTimer(TimerRef ref);

  private:

    std::list<Timer> timers;
}; 
```

当然，而不是

```
timer.cancel(); 
```

类的用户现在不得不说

```
timers.cancelTimer(timerRef); 
```

但根据您的用例，这可能不是问题。

* * *

更新：在列表之间移动计时器：

```
class Timers {

  public:

    Timer removeTimer(TimerRef ref);
    void addTimer(Timer const &timer);

    // ...

}; 
```

用法：

```
timers2.addTimer(timers1.removeTimer(timerRef)); 
```

诚然，这有点麻烦，但替代方案也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T00:35:24.700

没有办法从 std::list 中擦除 O(1)。

您可能需要考虑使用`intrusive list`，其中列表节点直接嵌入到结构中，就像您已经完成的那样。

你可以使用[boost::intrusive](http://www.boost.org/doc/libs/1_53_0/doc/html/intrusive/reference.html#header.boost.intrusive.list_hpp)或自己滚动，也可以看看[这个](http://www.codeofhonor.com/blog/avoiding-game-crashes-related-to-linked-lists)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T08:22:55.027

这是使用嵌入式`iterator`. 一些私有特征用于帮助减少类中的混乱：

```
template <typename T> class List;

template <typename T>
class ListTraits {
protected:
    typedef std::list<std::shared_ptr<T>> Impl;
    typedef typename Impl::iterator Iterator;
    typedef typename Impl::const_iterator ConstIterator;
    typedef typename Impl::reverse_iterator Rotareti;
    typedef typename Impl::const_reverse_iterator ConstRotareti;
    typedef std::map<const List<T> *, typename Impl::iterator> Ref;
}; 
```

如图所示，列表实现将使用`std::list`，但基础值类型将是 a `std::shared_ptr`。我所追求的是允许一个实例`T`有效地导出它自己的`iterator`，以实现 O(1) 擦除。这是通过`Ref`在将项目插入列表后使用 a 来记忆项目的迭代器来完成的。

```
template <typename T>
class List : public ListTraits<T> {
    template <typename ITER> class IteratorT;
    typedef ListTraits<T> Traits;
    typename Traits::Impl impl_;
public:
    typedef typename Traits::Impl::size_type size_type;
    typedef typename Traits::Impl::value_type pointer;
    typedef pointer value_type;
    typedef IteratorT<typename Traits::Iterator> iterator;
    typedef IteratorT<typename Traits::ConstIterator> const_iterator;
    typedef IteratorT<typename Traits::Rotareti> reverse_iterator;
    typedef IteratorT<typename Traits::ConstRotareti> const_reverse_iterator;
    class Item;
    ~List () { while (!empty()) pop_front(); }
    size_type size () const { return impl_.size(); }
    bool empty () const { return impl_.empty(); }
    iterator begin () { return impl_.begin(); }
    iterator end () { return impl_.end(); }
    const_iterator begin () const { return impl_.begin(); }
    const_iterator end () const { return impl_.end(); }
    reverse_iterator rbegin () { return impl_.rbegin(); }
    reverse_iterator rend () { return impl_.rend(); }
    const_reverse_iterator rbegin () const { return impl_.rbegin(); }
    const_reverse_iterator rend () const { return impl_.rend(); }
    pointer front () const { return !empty() ? impl_.front() : pointer(); }
    pointer back () const { return !empty() ? impl_.back() : pointer(); }
    void push_front (const pointer &e);
    void pop_front ();
    void push_back (const pointer &e);
    void pop_back ();
    void erase (const pointer &e);
    bool contains (const pointer &e) const;
}; 
```

这`List`主要遵循类似队列的界面。但是，可以从列表中的任何位置删除项目。简单的函数大多只是委托给底层的`std::list`. 但是`push_*()`and`pop_*()`方法也记住了`iterator`.

```
template <typename T>
template <typename ITER>
class List<T>::IteratorT : public ITER {
    friend class List<T>;
    ITER iter_;
    IteratorT (ITER i) : iter_(i) {}
public:
    IteratorT () : iter_() {}
    IteratorT & operator ++ () { ++iter_; return *this; }
    IteratorT & operator -- () { --iter_; return *this; }
    IteratorT operator ++ (int) { return iter_++; }
    IteratorT operator -- (int) { return iter_--; }
    bool operator == (const IteratorT &x) const { return iter_ == x.iter_; }
    bool operator != (const IteratorT &x) const { return iter_ != x.iter_; }
    T & operator * () const { return **iter_; }
    pointer operator -> () const { return *iter_; }
}; 
```

这是用于定义迭代器类型的帮助模板的实现`List`。它的不同之处在于`*`and`->`运算符的定义方式使迭代器表现得像 a`T *`而不是 a `std::shared_ptr<T> *`（这是底层迭代器通常会做的）。

```
template <typename T>
class List<T>::Item {
    friend class List<T>;
    mutable typename Traits::Ref ref_;
}; 
```

`T`可以将派生自的类型`List<T>::Item`添加到`List<T>`. 此基类包含`Ref`用于在将项目添加到列表时记忆迭代器的实例。

```
template <typename T>
inline void List<T>::push_front (const pointer &e) {
    const Item &item = *e;
    typename Traits::Ref::iterator i = item.ref_.find(this);
    if (i == item.ref_.end()) {
        item.ref_[this] = impl_.insert(impl_.begin(), e);
    } else if (front() != e) {
        impl_.erase(i->second);
        i->second = impl_.insert(impl_.begin(), e);
    }
}

template <typename T>
inline void List<T>::pop_front () {
    if (!empty()) {
        const Item &item = *front();
        item.ref_.erase(this);
        impl_.pop_front();
    }
} 
```

此代码说明了如何执行记忆。执行时`push_front()`，首先检查项目以查看它是否已包含。如果不是，则将其插入，并将生成的迭代器添加到`ref_`对象中。否则，如果它还不是最前面，则删除该项目并重新插入最前面，并更新记忆的迭代器。`pop_front()`删除记忆的迭代器，然后调用`pop_front()`.`std::list`

```
template <typename T>
inline void List<T>::push_back (const pointer &e) {
    const Item &item = *e;
    typename Traits::Ref::iterator i = item.ref_.find(this);
    if (i == item.ref_.end()) {
        item.ref_[this] = impl_.insert(impl_.end(), e);
    } else if (back() != e) {
        impl_.erase(i->second);
        i->second = impl_.insert(impl_.end(), e);
    }
}

template <typename T>
inline void List<T>::pop_back () {
    if (!empty()) {
        const Item &item = *back();
        item.ref_.erase(this);
        impl_.pop_back();
    }
} 
```

`push_back()`和`pop_back()`类似于`push_front()`和`pop_front()`。

```
template <typename T>
inline void List<T>::erase (const pointer &e) {
    const Item &item = *e;
    typename Traits::Ref::iterator i = item.ref_.find(this);
    if (i != item.ref_.end()) {
        item.ref_.erase(i);
        impl_.erase(i->second);
    }
} 
```

该`erase()`例程检索记忆的迭代器，并使用它来执行擦除。

```
template <typename T>
inline bool List<T>::contains (const pointer &e) const {
    const Item &item = *e;
    typename Traits::Ref::iterator i = item.ref_.find(this);
    return i != item.ref_.end();
} 
```

由于项目在许多方面都是它自己的迭代器，`find()`因此在这个版本的`List`. 但是，取而代之的是这个`contains()`方法，它用于查看元素是否是列表的成员。

现在，提出的解决方案使用 a`std::map`将列表实例与迭代器相关联。如果一个项目同时属于的列表数量相对较少，这将保持 O(1) 的精神。

我将尝试`boost::intrusive`下一个版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T14:12:00.177

可怕的事实：虽然链表是强大的结构，但`std::list`不能充分利用它的功能。

您不能`std::list`仅使用迭代器来擦除对象，因为 list 必须释放节点，并且您必须知道分配内存的分配器在哪里（提示：它在列表中）。

与标准链表相比，侵入式容器具有许多优点，例如自我意识；-)、按值存储多态对象的能力以及它们使列表技巧（例如在多个列表中具有单个对象）可行。由于您不`std::list`直接使用，您可以完全放弃使用`std::list`并使用第三方容器，或者滚动您自己的容器。

（此外，您的解决方案也是侵入性的，因为您的类型必须派生自`List<T>::Item`，这对没有的类型提出了某些要求`std::list`）

# xcode - 当 Xcode 没有为我提供足够的信息时，如何调试“Collection was mutated while being enumerated”之类的错误？

> ID：16072499
> 
> 赞同：1
> 
> 时间：2013-04-18T00:21:13.083
> 
> 标签：xcode, debugging

目前，我看到一个反复出现的错误：

```
2013-04-18 02:35:51.583 aaah[1713:1110f] *** Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <__NSArrayM: 0x1fc00dc0> was mutated while being enumerated.' 
```

在失败的后台队列中（我通过按 Command + 5 在崩溃时看到我的队列状态）我看到：

```
0 _pthread_kill
1 pthread_kill 
```

我看到了我完全不理解的汇编输出。

我知道如何解决这种数组枚举错误——我只是不明白我应该在哪里/如何寻找导致我的应用程序崩溃的代码。

我有很多使用 AFNetworking 和 Core Data 的多线程代码，所以我不能只记得关键部分可能在哪里。

而且，这个错误并不总是发生，而是时有发生，所以很难仅仅使用“隔离方法”，隔离越来越小的代码段，最终识别出有缺陷的代码段。

所以问题是：

**我怎样才能从这个输出中提取一些更有用的信息，或者 Xcode 可以为我提供一些更详细的级别，所以我可以知道如何解决这段烦人的代码。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:27:45.357

您是否尝试过设置异常断点？有时调试器在块内处理异常时会遇到困难，但它可能会有所帮助。

在断点导航器（窗口左侧的选项卡之一）中，单击窗口底部的加号按钮并选择添加异常断点。然后点击完成。

现在，当您崩溃时，调试器应该*有望*在引发异常的那一刻之前将您置于正确位置。

有关更多信息，请参阅[http://developer.apple.com/library/mac/#recipes/xcode_help-breakpoint_navigator/articles/adding_an_exception_breakpoint.html](http://developer.apple.com/library/mac/#recipes/xcode_help-breakpoint_navigator/articles/adding_an_exception_breakpoint.html)。

**编辑：**

根据评论中提供的反馈，这里有一些更多的分析：

您的应用程序引发的异常意味着您尝试更改`NSMutableOrderedSet`枚举块（在您的情况下，很可能是 for 循环）内的集合类型（在本例中为 ）。看起来您正在尝试删除正在循环的集合中的对象：`[NSMutableOrderedSet removeObjectsInRange:inOrderedSet:]`

要解决此问题，您应该存储要删除的范围，然后在不再迭代该集合后进行实际删除。这仍然会很困难，因为据我了解，您不会破坏 Objective-C 代码的内部。您应该查看左侧面板中正在运行的线程，并查看它们当前使用的方法。这可能会提示您代码错误的位置。

# magento-1.7 - 制造商广告定价 (MAP) 不适用于 Magento 版本。1.7.0.2

> ID：16072502
> 
> 赞同：0
> 
> 时间：2013-04-18T00:21:28.893
> 
> 标签：magento-1.7

我已经通过 WIKI 为单个产品启用了 MAP 定价，以便在添加更多项目之前测试功能，但我无法在产品页面上显示 MAP 定价“On Gesture”的功能。我们在 Magento ver 上使用自定义版本的 Modern 主题。1.7.0.2。我还检查了 style.css 中 MAP 弹出窗口的适当 CSS，并且在 Admin/Config/Sales/Map 以及管理产品页面上正确启用了它。

如果您有任何想法为什么它不会显示在前端，请告诉我。网上关于这个话题的解决方案很少，而现有的解决方案我试过都无济于事。在此先感谢您的帮助。

# ruby-on-rails - 尝试部署到heroku，安装锄头时爆炸

> ID：16072503
> 
> 赞同：1
> 
> 时间：2013-04-18T00:21:31.843
> 
> 标签：ruby-on-rails, heroku

我的 Gemfile 中有 hoe 注释掉了，我的 ruby​​gems 版本是 2.0+。这是我运行时的输出`git push heroku master`：

```
Installing json (1.7.7)
       Installing rdoc (3.12.1)
       Installing thor (0.17.0)
       Installing railties (3.2.12)
       Installing coffee-rails (3.2.2)
       Installing commonjs (0.2.6)
       Installing formtastic (2.2.1)
       Installing formtastic-bootstrap (2.0.0)
       Installing hoe (3.5.0)
       Gem::InstallError: hoe requires RubyGems version >= 1.4\. Try 'gem update --system' to update RubyGems itself.
       An error occurred while installing hoe (3.5.0), and Bundler cannot continue.
       Make sure that `gem install hoe -v '3.5.0'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:limitless-river-5139.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:limitless-river-5139.git' 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:25:04.460

请执行以下操作：

```
gem update --system 
```

然后

```
git push heroku master 
```

再次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:18:20.263

我的 .git 中有几个项目。他们中的一些人仍然拥有锄头宝石。这导致了这个问题。

# qt - Qt 在 qt 5.0.2 上分发 Windows 应用程序

> ID：16072504
> 
> 赞同：0
> 
> 时间：2013-04-18T00:21:51.547
> 
> 标签：qt, compiler-construction

我试图分发我在 Qt creator 中编写的应用程序但没有成功。

我编译并使用dependency walker找到了所有需要的DLL文件，我创建了一个文件夹并将exe和dll复制到其中，一切都在我的本地计算机上运行。

我将所有文件复制到另一台计算机上，每次尝试执行它时都会收到一条错误消息，指出程序意外终止

我尝试编译不同的程序（示例）并完成相同的复制/粘贴，它们都以相同的错误结束。

由于可能的许可问题，我宁愿不使用静态链接

我查看了其他堆栈溢出响应，它们都是相同的.. 将 DLL 复制到文件夹中，它应该可以工作......我只是不知道为什么会出现错误。

甚至在相同的 Windows 和不同的版本上都试过（我在 windows7 64 上编译，在 win7 32、win XP 和 win 8 上试过）

**编辑**

这是我要添加的 DLL 列表

```
04/11/2013  12:20 PM         2,106,216 D3DCompiler_43.dll
04/11/2013  12:20 PM        18,025,758 icudt49.dll
04/11/2013  12:20 PM         3,090,303 icuin49.dll
04/11/2013  12:20 PM         1,808,899 icuuc49.dll
04/11/2013  12:22 PM            99,328 libEGL.dll
04/11/2013  12:24 PM           115,200 libgcc_s_sjlj-1.dll
04/11/2013  12:22 PM           968,704 libGLESv2.dll
04/11/2013  12:24 PM           895,488 libstdc++-6.dll
04/11/2013  12:24 PM            68,608 libwinpthread-1.dll
04/11/2013  12:25 PM         4,279,808 Qt5Core.dll
04/11/2013  12:23 PM         3,493,376 Qt5Gui.dll
04/11/2013  12:23 PM           663,552 Qt5Multimedia.dll
04/11/2013  12:23 PM           105,472 Qt5MultimediaWidgets.dll
04/11/2013  12:23 PM         1,130,496 Qt5Network.dll
04/11/2013  12:23 PM           300,032 Qt5OpenGL.dll
04/11/2013  12:23 PM         1,893,376 Qt5Script.dll
04/11/2013  12:24 PM         5,210,624 Qt5Widgets.dll 
```

**编辑**

我想通了，我错过了一个名为“平台”的文件夹并将其复制`qminimal.dll`到`qwindows.dll`

我曾尝试将这些文件直接复制到 app 文件夹中，但没有成功，我猜他们必须有自己的文件夹。

现在可以关闭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:47:42.560

我最近遇到的小补充。如果您在 Windows 7 (VS 2012) x32 上编译，您应该仔细查看 VS 中的引导设置。否则，您的应用程序将无法在低于 Vista 的任何设备上运行，并且您将遇到非常奇怪的错误，即“它不是 Win32 应用程序”。在最新的 VS2012 服务包中，MS 添加了 XP 类型的引导程序。

# android - 如何在移动设备上调试 Google Analytics 跟踪代码

> ID：16072509
> 
> 赞同：2
> 
> 时间：2013-04-18T00:22:19.727
> 
> 标签：android, ios, mobile, web, google-analytics

我们目前看到一个问题，即浏览到我们网站的移动设备似乎没有被拾取，而不是在页面视图或实时或事件跟踪中。这一切都发生在 3 月 15 日之后，但我们现在才真正开始注意到它。调试基于此[https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting](https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting)的分析代码在桌面上没有问题，但您如何在移动设备上执行此操作。安卓手机或 iPhone。有什么方法可以调试手机上的跟踪代码以确保它正常工作？很长一段时间以来，我们一直成功地使用 ga.js 和 async snytax，没有出现任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:12:07.863

要在 iOS 6 及更高版本上进行测试，您可以将 iPhone 插入桌面并使用Apple[此处所述的桌面版 Safari 。](https://developer.apple.com/library/mac/documentation/AppleApplications/Conceptual/Safari_Developer_Guide/GettingStarted/GettingStarted.html#//apple_ref/doc/uid/TP40007874-CH2-SW8)然后就可以看到结果了`ga_debug.js`。

[Android 有一个类似的工具](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)，但是，它确实需要您安装 Android SDK。

我不太确定其他手机操作系统，但这涵盖了您问题中的主要两个:)

# c# - 串口写超时错误

> ID：16072510
> 
> 赞同：0
> 
> 时间：2013-04-18T00:22:21.080
> 
> 标签：c#

当我尝试串行写入 COM 端口时，会发生此错误。虚拟 COM 端口是否会导致此问题？我在两个虚拟 COM 端口之间使用了一个桥接器，一个用于串行写入，另一个用于串行读取。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.IO.Ports;

namespace Flowerpod_User_Interface
{
    public partial class Form1 : Form
    {
        public Form1()
        {

            InitializeComponent();
            // show list of valid COM ports
            foreach (string s in System.IO.Ports.SerialPort.GetPortNames())
            {
                comboBox1.Items.Add(s);
            }
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen)
            {
                serialPort1.WriteLine(textBox1.Text);

            }
            else
            {
                MessageBox.Show("SerialPort1 is not open");
            }
        }

        private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        private void Connect_Click(object sender, EventArgs e)
        {
            if (!serialPort1.IsOpen)
            {
                serialPort1.PortName = comboBox1.SelectedItem.ToString();

                serialPort1.Open();

                textBox3.Text = "Open"; 
            }

        }

        private void textBox3_TextChanged(object sender, EventArgs e)
        {

        }

        private void textBox2_TextChanged(object sender, EventArgs e)
        {

        }

        private void button3_Click(object sender, EventArgs e)
        {
            Random slumpGenerator = new Random();
            // Or whatever limits you want... Next() returns a double
            int tal = slumpGenerator.Next(1000, 10000);
            textBox1.Text = tal.ToString();
        }

        private void textBox4_TextChanged(object sender, EventArgs e)
        {

        }

        private void serialPort1_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {

        }

        private void button4_Click(object sender, EventArgs e)
        {
            if (!serialPortRead.IsOpen)
            {
                serialPort1.PortName = "COM11";

                serialPortRead.Open();

                textBox4.Text = serialPortRead.ReadLine();                 
            }
        }
    }
} 
```

# c# - Winforms 和后台工作者

> ID：16072511
> 
> 赞同：2
> 
> 时间：2013-04-18T00:22:21.553
> 
> 标签：c#, multithreading, backgroundworker

我现在有一个控制台应用程序，它监视文件夹中的文件，然后根据规则和文件名，将任何新文件复制到网络上的某个位置。

我需要使应用程序更漂亮，所以决定使用一个简单的 WinForms 单表单应用程序，它显示状态和“最后更新的文件”类型信息。

控制台应用程序的编写方式是，所有控制台显示信息都通过一个方法，我称之为“通知”，采用两个参数。一个字符串，用于显示我希望用户看到的信息，以及一个 ErrorLevel 枚举，如果“正常”以绿色文本显示，如果警告，则为黄色，如果错误，则为红色。但重点是，我的代码只是使用“通知”方法输出任何文本。

我想将我的控制台应用程序更改为普通类，将其作为 WinForms 项目的后台工作程序运行，并让线程中的 Notify 方法安全地将更新发送到 winforms 应用程序。我认为它可以通过事件来完成，但我不确定处理这个问题的最佳方法是什么。你能提出一种方法来让它工作吗？

有“调用”的做事方式。好吗？就像是：

```
this.BeginInvoke (new MethodInvoker(() => UpdateLabel(s)); 
```

这似乎是基本的，但我仍想使用我的 Notify 方法，并将消息发送到 UI 层。

我还需要控制台应用程序向线程发送消息。例如，“停止”，然后我运行代码以优雅地退出线程......还有“刷新”，它在线程内执行一些逻辑。

另一种选择是将处理类作为服务运行？然后有一个以某种方式连接到系统服务并获取更新的 UI？我从来没有做过这样的事情，但这个过程是为了一直运行......

目前，我的代码正在运行，但 UI 没有更新：

```
public partial class MainForm : Form
{
    BackgroundWorker _bw = new BackgroundWorker();
    public MainForm()
    {
        InitializeComponent();
    }

    private void MainForm_Load(object sender, EventArgs e)
    {

        _bw.DoWork += bw_DoWork;
        _bw.RunWorkerAsync();
    }

    private void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        var bw = sender as BackgroundWorker;
        var monitor = new Monitor();
        monitor.RunMe();

    }
} 
```

我想我只需要找到一种方法来让我的 Notify 方法在我的线程中发送消息或其他东西（我创建的对象，带有 Message String 和 ErrorCode 属性？）回到我的 UI，并在 UI 上安全地处理它.

这是类（线程）中的代码......

```
public class Monitor
    {
        public void RunMe()
        {
            Notify("Checking for network connectivity...", Constants.ErrorLevel.Information);
            if (FileManagement.FolderExists(Constants.FolderToMonitor) == false)
            {
                Notify("Unable to monitor folder - Aborting.", Constants.ErrorLevel.Error);
                Console.ReadKey();
                return;
            }
            Notify("OK", Constants.ErrorLevel.Information);
....
} 
```

注意：Readkey 将被删除..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:21:45.043

可能有更好的方法，但如果您的 Notify 方法需要与 GUI 交互，请尝试在 BackgroundWorker 上使用 ReportProgress 事件。您可以将对象作为状态参数传递，并且可能只是忽略进度值。

# java - 如何关闭额外的日志记录？

> ID：16072515
> 
> 赞同：5
> 
> 时间：2013-04-18T00:22:43.307
> 
> 标签：java, spring, cxf, javabeans

我有一个使用 Spring 和 CXF 的 Java 服务。该代码来自以前的开发人员，我正在提供维护，但我在日志中看到了这一点

```
 --------------------------------------
 Apr 16, 2013 1:44:11 PM org.apache.cxf.interceptor.AbstractLoggingInterceptor log
 INFO: Inbound Message
 ----------------------------
 ID: 33
 Address: /MyApplication/endpoint
 Encoding: UTF-8
 Http-Method: POST
 Content-Type: application/x-www-form-urlencoded
 Headers: {content-type=[application/x-www-form-urlencoded], connection=[close], host=     [localhost:8080], Content-Length=[11504], user-agent=[Apache-HttpClient/4.2.3 (java 1.5)], Content-Type=[application/x-www-form-urlencoded]}
 Payload: {
"events" :
[ { event }, { event }, ... ]
 } 
```

而且我们有太多的事件，日志变得难以管理。有没有办法可以关闭此日志记录？这些日志调用不是从应用程序内部创建的，它们是由某种我找不到的拦截器创建的。我确实在 cxf-context.xml 配置文件中找到了这个：

```
<cxf:bus>
    <cxf:features> 
        <cxf:logging /> 
    </cxf:features> 
</cxf:bus> 
```

但是在我已经从配置文件中注释了这些行之后，日志记录仍然出现。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T02:24:42.700

由于应用程序使用 log4j，请将 'org.apache.cxf' Logger 级别设置为 ERROR。将此行添加到 log4j.properties：

```
log4j.logger.org.apache.cxf=ERROR 
```

# php - 重命名数组键而不加扰顺序

> ID：16072516
> 
> 赞同：0
> 
> 时间：2013-04-18T00:22:44.817
> 
> 标签：php

在 PHP 中，我可以通过执行以下操作轻松重命名关联数组的键。

```
$array = array(
    "tom" => "25",
    "bob" => "36",
);

$array["charlie"] = $array["tom"];
unset($array["tom"]); 
```

但是，这会打乱数组的顺序。“bob” 成为第一个元素，“charlie”（之前是“tom”）现在是第二个元素。

```
echo reset($array); // outputs 36 instead of 25 
```

有没有办法重命名数组键而不打乱它的顺序？

注意：我意识到我可以重建数组，但这真的很难看。我宁愿避免这种情况。

# excel - 使用 VBA 将数据从 Web 表单读取到 Excel？

> ID：16072517
> 
> 赞同：-2
> 
> 时间：2013-04-18T00:22:49.660
> 
> 标签：excel, web-scraping, vba

[我是 VBA 新手，我需要将此表单](https://www.moneygram.com/wps/portal/moneygramonline/home/estimator?LC=en-US)中的值提取到 Excel 电子表格中。一旦用户点击估计，就会显示汇率。Excel 电子表格将具有与表单中的字段名称匹配的列标题。

在表格中，“发送金额”将为 50、100、500、1000、2500 和 7000。“发件人”国家始终为“美国”。工作表应填写表格其他字段中针对“美国”及其相应汇率的所有可能选项。

![在此处输入图像描述](https://i.stack.imgur.com/egqai.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:34:51.850

桑托什......有两种方法可以做到这一点

*   拦截 Web 服务 XML
*   创建与底层数据库的连接

您需要了解 DB 详细信息或在 VBA for XML 中创建 COM 模块（这同样需要服务器详细信息）

如果你什么都不知道。我建议去 youtube 并寻找“VBA com 连接”或“VBA XML”。有一些不错的视频，在开放论坛上交出服务器详细信息并不是一件理想的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:24:40.877

这里没有运气，网站永远写着“正在连接......”。
但是为了解决您的问题，这里有一个示例代码：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
Dim myIE As InternetExplorer, myDoc As HTMLDocument, mySubDoc As HTMLDivElement
Dim sVal As String, lVal As Long

```
Set myIE = New InternetExplorer
With myIE
    .Visible = True
    Call .navigate("http://stackoverflow.com/")
    While Not .readyState = READYSTATE_COMPLETE
        DoEvents
    Wend
    Set myDoc = .document
End With
'SAMPLE
With mySubDoc
    Set mySubDoc = myDoc.getElementsByClassName("question-summary narrow").Item(0)
    sVal = CStr(mySubDoc.ID)
    lVal = CLng(mySubDoc.NodeType)
    Call MsgBox(sVal)
    Call MsgBox(CStr(lVal))
End With
On Error Resume Next
    Call mySubDoc.Close
    Call myDoc.Close
    Call myIE.stop
    Call myIE.Quit
On Error GoTo 0
Set mySubDoc = Nothing
Set myDoc = Nothing
Set myIE = Nothing 
``` `End Sub`
```

请注意：在 Excel 的 VBA (ALT+F11) 中，您必须将参考（工具->参考）添加到`Microsoft HTML Object Library`和`Microsoft Internet Controls`项目。

您可以使用上面的人从目标站点上已加载页面的页面源中获取值。所以你必须设置你想要的值，按“估计”按钮，“查看页面源”并查找要从 VBA 代码中提取的值的容器节点（当然也可以添加到 Excel VBA 中）。
随着您的网站关闭 - 即无法访问的结果页面 - 这就是我所能做的，但使用上面的代码，您可以确定在 Excel VBA 中必须做的其他事情。
如果没有，请在网站再次启动时发布新问题或在此处提问。

希望这可以帮助！

# javascript - 尝试将文本拆分为来自 node.js http 服务器的单词数组进行响应

> ID：16072518
> 
> 赞同：0
> 
> 时间：2013-04-18T00:22:53.753
> 
> 标签：javascript, node.js

node.js 新手，感谢您提供的所有帮助。试图响应变量'words'但是当我启动服务器并转到本地主机时它崩溃并说“TypeError：第一个参数必须是字符串或缓冲区”但是当我尝试将相同的变量写入控制台时它可以工作。谢谢您的帮助！

```
var http = require("http");
var fs = require('fs');
var text = fs.readFileSync("text.txt").toString();
var words = text.split(/\b/);
function start(){
function onRequest(request, response){
    response.writeHead(200, {"Content-type": "text/plain"});
    var wordCounts = '';

    for(var i = 0; i < words.length; i++)
    wordCounts["_" + words[i]] = (wordCounts["_" + words[i]] || 0) + 1;
        response.write(words);

    response.end();
}

http.createServer(onRequest).listen(8888);
console.log("server has started");
}

exports.start = start; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:26:21.677

控制台对此不会有任何问题，因为它会自动将您放入的大部分内容字符串化`console.log()`。尝试这个：`response.write(JSON.stringify(words))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:00:24.823

我会这样做：

```
…
var words = text.split(/\s+/); // you hardly want to split on every word boundary
                               // but rather on the spaces in between
…
    var wordCounts = {}; // an object, not a string!
    for (var i = 0; i < words.length; i++)
        wordCounts["_" + words[i]] = (wordCounts["_" + words[i]] || 0) + 1;
    var result = Object.keys(wordCounts).sort(function(a, b) {
        return wordCounts[b]-wordCounts[a];
    }).map(function(w) {
        return w.slice(1)+": "+wordCounts[w];
    }).join("\n");
    response.write(result); // write a string!
… 
```

# css - HTML5 & CSS：格式化锚点， -宽的

> ID：16072521
> 
> 赞同：2
> 
> 时间：2013-04-17T23:26:37.593
> 
> 标签：css, html, header, anchor

当我将一个`<div id="header">`块更改为 HTML5 的`<header>`块时，我遇到了一个特殊的 CSS 格式问题。基本上，我希望`<header>`块内的链接具有某种颜色并且没有任何装饰。

相关的 HTML 和 CSS 代码如下所示：

```
<!-- HTML5 code -->
<header>
    <h1>
        <a href="#">Link text</a>
    </h1>
</header>

/* CSS code */
header a {
    color: black;
    text-decoration: none;
} 
```

我看到的输出（使用**Firefox 20.0**和 Ubuntu 12.04）就好像上面的 CSS 代码片段不存在一样。

向锚块添加类似`class="hdr"`内容并将 CSS 规则更改为`a.hdr`有效。改回`<div id="header">`并且`#header a`也有效。不过，我不明白为什么只使用`<header>`和相应的规则会失败，这让我觉得这是“正确”的方法。

对解决方案的初步搜索导致我在其他链接中找到此[链接](http://boblet.tumblr.com/post/178852468/block-level-links "http://boblet.tumblr.com/post/178852468/block-level-links")（最初我将`<h1>`块嵌套在`<a>`块中），但使用`<div>`包装器也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:22:24.550

使用

```
header h1 a {} 
```

因为您的选择器应该解决您的特异性问题

否则，如果您的样式在被访问后被覆盖（通过 a:visited 选择器），您可以编写一个具有相同特异性的样式，但它会覆盖另一个规则，因为它稍后在级联中

```
header a:visited {} 
```

让它在样式表的后面出现

顺便说一句，抱歉不得不发布答案，因为我还不能发表评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:45:51.670

尝试更具体。

```
<header class="main-header">

    <a href="#"><h1>Link Text</h1></a>

</header> <!-- .main-header -->

.main-header a {
    color: green;
    text-decoration: none;
} 
```

# laravel - 开始使用 Chef，并在部署时运行 composer install

> ID：16072524
> 
> 赞同：6
> 
> 时间：2013-04-18T00:23:48.967
> 
> 标签：laravel, chef-infra, composer-php, laravel-4

我们希望使用 OpsWorks 在亚马逊上部署一些基于[Laravel4](http://laravel.com)的 PHP 应用程序，这需要一些东西：

*   从 git 获取代码
*   从 getcomposer.com 下载 composer.phar
*   跑`php composer.phar install`
*   更改一些特定文件夹的权限

我对厨师完全陌生，所以最初寻找一个地方来掌握厨师的基础知识，然后如何完成上述任务，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T06:51:04.193

我不是厨师大师（我通常使用 Puppet），但请尝试以下操作：

## 从 git 获取代码

您可能想要执行 wget 命令（参见下面的示例）。

如果您想要更复杂的东西，请参阅[http://docs.opscode.com/resource_deploy.html](http://docs.opscode.com/resource_deploy.html)

```
deploy_revision "/path/to/application" do
  repo 'ssh://name-of-git-repo/repos/repo.git'
  migrate false
  purge_before_symlink %w{one two folder/three}
  create_dirs_before_symlink []
  symlinks(
    "one"   => "one",
    "two"   => "two",
    "three" => "folder/three"
  )
  before_restart do
    # some Ruby code
  end
  notifies :restart, "service[foo]"
  notifies :restart, "service[bar]"
end 
```

## 从 getcomposer.com 下载 composer.phar

我会执行一个wget。

我从这里提取了一些代码：http: [//cookingclouds.com/2012/06/23/chef-simple-cookbook-example/](http://cookingclouds.com/2012/06/23/chef-simple-cookbook-example/)

它基本上只是在特定文件夹中执行 wget，提取 tar 的内容并更新新文件的一些权限。仅当文件夹尚不存在时才执行此操作。

```
# Run a bash shell -  download and extract composer
bash "install_composer" do
     user "root"
     cwd "/folder/to/extact/to"
     code <<-EOH
       wget http://getcomposer.com/composer.tar.gz
       tar -xzf composer.tar.gz
       chown -R user:group /folder/to/extact/to
     EOH
     not_if "test -d /folder/to/extact/to"
end 
```

## 运行 php composer.phar 安装

[http://docs.opscode.com/resource_execute.html](http://docs.opscode.com/resource_execute.html)

```
execute "composer install" do
  command "php composer.phar install && touch /var/log/.php_composer_installed"
  creates "/var/log/.php_composer_installed"
  action :run
end 
```

这只会运行一次，否则您可以删除“创建”并且每次都会运行它。

## 更改一些特定文件夹的权限

[http://docs.opscode.com/resource.html](http://docs.opscode.com/resource.html)

```
directory "/tmp/folder" do
  owner "root"
  group "root"
  mode 0755
  action :create
end 
```

如果目录已经存在，则不会发生任何事情。如果目录以任何方式更改，则资源将标记为已更新。

## 最后

我发现搜索很方便，在 Chef 网站上浏览的东西似乎是无望的（太多东西无法挖掘）。[http://docs.opscode.com/search.html](http://docs.opscode.com/search.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T07:32:13.853

我会非常同意 Drew Khoury 的回答，但会有所改变。要下载 compose.phar，您可以使用[remote_file 资源](http://docs.opscode.com/resource_remote_file.html)，而不是在 bash 脚本中执行 wget。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-01T11:38:23.007

由于`composer.phar`已经是一个可执行文件，您可以简单地将其放在您的目录中`$PATH`：

```
remote_file '/usr/bin/composer' do
    source 'http://getcomposer.org/composer.phar'
    mode '0755'
    action :create_if_missing
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T13:10:51.537

或者您可以只提交您的供应商目录。我们有几个项目在 Laravel 4 和 OpsWorks 上运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T00:46:24.767

您可以将 git hook post-receive 配置为以下内容：

```
GIT_WORK_TREE=/path/to/your/site
cd /path/to/your/site
curl -sS https://getcomposer.org/installer | php
php composer.phar install
# do your stuff here 
```

并确保为 post-receive 文件授予可执行权限。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-05-12T11:41:27.573

我与 Laravel 和 OpsWorks 处于相同的位置。我一直在寻找解决方案，但后来...

如果有人将安全漏洞注入其中一个子模块会发生什么？这是否意味着我们相信 X 数量的外部代码库始终是 100% 安全的？

在我的理解中存在一些基本缺陷，或者在生产服务器上运行 composer 是最严重的 WTF。

我现在确保我的项目 repo 中的代码将 100% 按原样部署。无需在生产服务器上下载外部模块。

# php - Facebook api php 获取特定的朋友资料

> ID：16072525
> 
> 赞同：0
> 
> 时间：2013-04-18T00:24:30.840
> 
> 标签：php, facebook, api, friend

我想知道特定朋友的出生日期。我正在使用这样的东西。有可能得到这个朋友资料字段吗？

```
$user = $facebook->getUser();
$perms = array('scope' => 'email,user_photos,read_mailbox');

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
$facebook_login = "1";
  } catch (FacebookApiException $e) {
    $user = null;
  }

} else {

  die('<script>top.location.href="'.$facebook->getLoginUrl($perms).'";</script>');

}

if ($user) {
    $friends = $facebook->api('/me/friends');
    foreach ($friends["data"] as $value) { ?>

      <img src="https://graph.facebook.com/<?php echo $value["id"]; ?>/picture"/> <?php echo $value["name"]; ?>

    <?php } 
```

我可以得到朋友的完整姓名和ID，但我也想得到出生日期。还有一个特定的朋友，例如。$friend = $facebook->api('/me/friends/friend_id');

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:24:28.297

您需要请求数组中的`friends_birthday`权限才能访问您要查找的字段。`$perms`

此外，如果您希望能够访问用户的生日，您将需要该`user_birthday`权限。

您可以在此处阅读有关这些权限的更多信息：

[https://developers.facebook.com/docs/reference/login/extended-profile-properties/](https://developers.facebook.com/docs/reference/login/extended-profile-properties/)

# javascript - AngularJS：在同一元素上包含多个指令

> ID：16072529
> 
> 赞同：7
> 
> 时间：2013-04-18T00:24:51.403
> 
> 标签：javascript, html, angularjs, angularjs-directive

我正在尝试将 2 个模板注入一个元素并对其进行操作：

```
<div
  ic-first="foo"
  ic-second="bar"
  ic-third="baz"
  ic-fourth="qux"
>
</div> 
```

*icFirst*应该通过模板注入一个空 div 作为其元素的子元素。*icSecond*应该注入第二个 div（带有一堆内容）作为其元素的第二个子元素，因此生成的 html 如下所示：

```
<div
  ic-first="foo"  // priority: 100
  ic-second="bar" // priority: 50
  ic-third="baz"  // priority: 0
  ic-fourth="qux" // priority: 0
>
  <div id="foo"></div>
  <div> <!-- a bunch of stuff from the templateUrl --> </div>
</div> 
```

icFirst和*icSecond**都会*将其他元素注入到新创建的容器中。

当我在两个指令上指定指令模板属性时，我得到一个错误：

> 错误：多个指令 [icFirst, icSecond] 要求模板：`<div ic-first`...</p>

当我添加`transclude: true`到这两个指令时，*icFirst*执行得很好……但是同一元素上的其他指令不会执行。当我设置`transclude: 'element'`时，其他指令会执行**，但**我收到一个错误，即第一个子 ( `$scope.firstObj`) 未定义。

所有四个指令都需要访问彼此的范围，所以我在它们的控制器中完成了大部分工作：

```
app.directive('icFirst', ['ic.config', function (icConfig) {
  return {
    restrict: 'A',
    priority: 100,
    template: '<div id="{{firstId}}"></div>',
    replace: false,
    transclude: 'element',
    controller: function icFirst($scope, $element, $attrs) {
      // …
      $scope.firstId = $scope.opts.fooId;
      $scope.firstElm = $element.children()[0];
      $scope.firstObj = {}; // this is used by the other 3 directives 
    },
    link: function(scope, elm, attrs) { … } // <- event binding
  }
);
app.directive('icSecond', ['ic.config', function (icConfig) {
  return {
    restrict: 'A',
    priority: 0,
    templateUrl: 'views/foo.html',
    replace: false,
    transclude: 'element',
    controller: function icSecond($scope, $element, $attrs) {
      // …
      $scope.secondElm = $element.children()[1];
      $scope.secondObj = new Bar( $scope.firstObj );
      // ^ is used by the remaining 2 directives & requires obj from icFirst
    },
    link: function(scope, elm, attrs) { … } // <- event binding
  }
); 
```

**请注意**，我已更正 的行为`replace: false`以匹配记录的行为，如拉取请求[#2433](https://github.com/angular/angular.js/pull/2433)中所述。

我尝试`$scope.firstObj`在控制器中实例化，并将其设置在 linkFn 中（希望在 linkFn 执行时嵌入已经完成），但我遇到了同样的问题。看来 first-child 实际上是一个评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T00:56:49.553

我能想出解释抛出此错误的唯一原因是 AngularJS 团队试图避免不必要的覆盖/DOM 操作：

考虑到实际行为`replace: false`与记录的行为，我认为实际行为实际上是预期的行为。如果这是真的，那么允许在同一个元素上使用多个模板/templateUrls 将导致后续模板覆盖以前的模板。

由于我已经修改了源代码以匹配记录的行为，因此作为快速修复^(†</sup>，我再次修改了源代码（[/src/ng/compile.js:700](https://github.com/angular/angular.js/blob/master/src/ng/compile.js#L700)）以删除`assertNoDuplicate`检查（对应于`angular.js:4624`）。现在我返回以下 2 个对象，它可以工作，而且我找不到任何负面影响：)

```
// directive icFirst
return {
  restrict: 'A',
  priority: 100,
  replace: false,
  template: '<div id="{{firstId}}"></div>',
  require: ["icFirst"],
  controller: Controller,
  link: postLink
};
// directive icSecond
return {
  restrict: 'A',
  require: ['icFirst'],
  replace: false,
  templateUrl: 'views/bar.html',
  priority: 50,
  controller: Controller,
  link: postLink
}; 
```

^(†</sup> 如果设为永久，则检查应该是
`if (directive.templateUrl && directive.replace)`
（对于directive.template 类似）)

# mysql - MYSQL Select by this week with index

> ID：16072530
> 
> 赞同：-2
> 
> 时间：2013-04-18T00:25:02.810
> 
> 标签：mysql

用户可以看到他们在本周上传的内容。我有以下代码：

***它是否正确？***

```
SELECT * 
FROM images 
WHERE userid = '$userid'
   AND uploadeddate >= CURDATE() - INTERVAL WEEKDAY(day) DAY 
   AND uploadeddate < CURDATE() - INTERVAL WEEKDAY(day) DAY + INTERVAL 7 DAY 
ORDER BY uploadeddate DESC 
```

我为 (userid, uploaddate) 创建了索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:53:05.080

要使您的原始查询工作`day`需要在您正在查询的数据库中（或设置为变量），并且它需要在 MySQL 日期“0000-00-00”或日期时间“0000-00-00 00”中： 00:00' 格式。

`WEEKDAY()`为输入的日期返回 0-6。

```
$first; //is earliest offset in the range
$last; //is the latest offset in the range

SELECT * FROM images WHERE userid = '$userid'
AND uploadeddate > CURDATE() - INTERVAL $first DAY
AND uploadeddate < CURDATE() - INTERVAL $last DAY
ORDER BY uploadeddate DESC 
```

所以像这样的查询将返回上周的结果。

```
SELECT * FROM images WHERE userid = '$userid' AND
uploadeddate > CURDATE() - INTERVAL 14 DAY
AND uploadeddate < CURDATE() - INTERVAL 7 DAY
ORDER BY uploadeddate DESC 
```

# ruby-on-rails - Rails 整体架构最佳实践

> ID：16072535
> 
> 赞同：1
> 
> 时间：2013-04-18T00:25:42.383
> 
> 标签：ruby-on-rails

我很想看看 Stack Overflow 上的 Rails 资深人士对此有何评论。

基本上，作为 Rails 新手，以及没有“正式”编程背景的人，我最大的挑战之一与正确的架构有关。我如何知道构建应用程序的*正确*或*更好的方法是什么？*

我很想看看一些资源是什么。

我知道基本的 - 但其中很多并没有给我想要的高级架构概述：

[http://www.amazon.com/Agile-Development-Rails-Third-Edition/dp/1934356166/ref=cm_lmf_tit_7](https://rads.stackoverflow.com/amzn/click/com/1934356166) [http://www.amazon.com/Ruby-Programming-Language-David-Flanagan/dp/0596516177 /ref=cm_lmf_tit_3](https://rads.stackoverflow.com/amzn/click/com/0596516177) Railscasts

这是一个简单的例子：

假设我正在构建一个包含商家和购物者的 Rails 应用程序 - 每组用户都有自己的身份验证、不同的权限等。为这个或多个通过 API 通信的应用程序构建一个或多个应用程序是否合适？这种多应用抽象有什么额外的好处吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T01:23:57.237

这不是一个简单的问题。完整的答案在很大程度上取决于您的项目。

如果您是初学者，我建议您将所有内容保存在一个应用程序中，您可以明智地使用模型进行足够的“分离”。很难想象应用程序间通信引入的复杂性是有益的场景。

在您的示例中，您应该问自己，对于 Merchants 和 Shoppers 使用一个单父模型还是两个单独的模型更好。

在前一种情况下，您可以考虑 STI：

*   用户（主类，定义为`class User < ActiveRecord::Base`）
    *   商家（定义为`class Merchant < User`）
    *   购物者（类似`class Shopper < User`）

谷歌搜索 STI 了解更多详情。

然后在您的控制器/视图中，您可以快速检查权限，例如：

```
if user.class == Merchant
  do_something
else
  do_something_else
end 
```

同样，这两个类可能使用不同的算法进行身份验证。如果需要，您还可以在基本 User 类中包含“标准”身份验证并在子类中对其进行专门化。

干杯，

# java - 插入数组时出现 ArrayIndexOutOfBoundsException

> ID：16072547
> 
> 赞同：0
> 
> 时间：2013-04-18T00:27:34.100
> 
> 标签：java, arrays

我正在编写一个程序，在某些时候需要将 2 个不同长度的数组放入一个二维数组中。

有谁知道为什么我在指定行收到 ArrayIndexOutOfBoundsException ？

```
String[][] proteinArray;

if(proteinsMomFinal.length > proteinsDadFinal.length)
{
    proteinArray = new String[proteinsMomFinal.length][2];
}
else
{
    proteinArray = new String[proteinsDadFinal.length][2];
}

for(int i = 0; i < proteinsMom.length; i++)
{
    proteinArray[i][0] = proteinsMomFinal[i];          // error is here
}

for(int i = 0; i < proteinsDad.length; i++)
{
    proteinArray[i][1] = proteinsDadFinal[i];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:38:49.777

您应该在 for 语句中使用proteinMomFinal。你怎么知道proteinMom 和proteinMomFinal 的长度一样？

```
for(int i = 0; i < proteinsMomFinal.length; i++)
{
    proteinArray[i][0] = proteinsMomFinal[i];          // error is here
} 
```

# python - 使用 Mechanize (Python) 输入站点

> ID：16072548
> 
> 赞同：0
> 
> 时间：2013-04-18T00:27:43.373
> 
> 标签：python, html, browser, mechanize

我正在尝试使用dictionary.com 作为源代码制作字典程序，但在源代码中找不到搜索框的名称

```
from mechanize import Browser

inp = raw_input("Enter Word: ")
Word = (inp)

SEARCH_PAGE = "http://dictionary.reference.com/"

browser = Browser()
browser.open( SEARCH_PAGE )
browser.select_form( nr=0 ) 

browser['name of search form'] = Word
browser.submit() 
```

谁能帮我完成这项工作或帮我在 HTML 源代码中找到搜索栏的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:07:54.787

您可以使用 Browser.forms() 方法查看表单。这些表单中的每一个都有一个称为控件的变量，即表单中的控件列表。此列表中的每个控件都有一个“名称”变量。如您所知，您可以使用这些名称与浏览器建立索引。

```
from mechanize import Browser

inp = raw_input("Enter Word: ")
Word = (inp)

SEARCH_PAGE = "http://dictionary.reference.com/"

browser = Browser()
browser.open( SEARCH_PAGE )

form = list(browser.forms())[0]                        #The first form
print form
names = map(lambda n: n.name, form.controls)
print names

browser.select_form( nr=0 ) 

browser[names[0]] = Word

txt = browser.submit().read()

#txt has the html from dictionary.reference.com 
```

# c# - ViewModel 中的类似属性名称未绑定在控制器操作方法中

> ID：16072551
> 
> 赞同：3
> 
> 时间：2013-04-18T00:27:58.980
> 
> 标签：c#, jquery, ajax, asp.net-mvc, asp.net-mvc-4

最近我们将我们的应用程序从 MVC3 更新到了 MVC4。在 MVC4 中，我们发现在 ViewModel 中使用`Studio`和之类的属性名称`StudioExecutive`会导致发布时出现问题。在控制器方法中，我们总是会得到`Studio = null`何时`StudioExecutive`被填充。

这是我们问题的一个例子，希望有这个问题的答案。

数据类：

```
public class TestContact
{

    public List<TestContactItem> Studio { get; set; }
    public List<TestContactItem> StudioExecutive { get; set; }

    public TestContact()
    {
        Studio = new List<TestContactItem>();
        StudioExecutive = new List<TestContactItem>();
    }
}

public class TestContactItem
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

控制器方法：

```
public ActionResult TestContactView()
{
    var vm = new TestContact();
    vm.Studio.Add(new TestContactItem(){Id=1, Name = "Studio Contact ID=1"});
    vm.StudioExecutive.Add(new TestContactItem() { Id = 2, Name = "Studio Exec Contact ID=2" });
    return View(vm);
 }

[HttpPost]
public ActionResult SaveTestContact(TestContact model)
{
    return Content("success");
} 
```

使用 Ajax POST 查看 / JavaScript：

```
@using System.Web.Script.Serialization
@model TestContact

<button type="button" onclick="SaveTestContact();">Click Here to Post</button>

<script type="text/javascript">

    $(document).ready(function() {
         globalTestModel = @Html.Raw(new JavaScriptSerializer().Serialize(Model));
    });

    function SaveTestContact() {
        // passing additional studio & studio executive parameter to controller because it was not mapping correctly to the server side viewmodel without it
        $.ajax({
            type: "POST",
            url: "/Test/SaveTestContact",
            data: JSON.stringify(globalTestModel),
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (msg) {

            }
        });
    }
</script> 
```

在这个例子中，我们用至少一`Studio`和一填充我们的对象`StudioExecutive`并渲染视图。单击视图中的按钮时，我们将相同的对象发布到控制器方法，但 ViewModel 未正确绑定，该`Studio`属性设置为 null。

*不幸的是，我无法发布图像我有一个对象的屏幕截图，显示`Studio`计数为 0，`StudioExecutive`计数为 1

我们确实在 POST 之前放置了一个断点，以确保 JavaScript 上的序列化是正确的并且对象已被填充。

我们得出的结论是，这与 2 个属性的命名约定有关，其中一个是另一个的子字符串。任何遇到同样问题的人都可以为我们指明正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:26:46.413

我知道这不是问题的**“完整答案”**，但我觉得这会给这个问题提供更多的见解，（我希望）最终会导致“完整的解决方案”。

`Studio`假设我们在每个和`StudioExecutive`字段中都有一个项目，如 OP 示例所示，并在 中执行以下操作`js`：

```
globalTestModel = '@Html.Raw(new JavaScriptSerializer().Serialize(Model))';

$.ajax({
    type: "POST",
    url: "/Test/SaveTestContact",
    data: JSON.stringify(globalTestModel),
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function (msg) {

    }
}); 
```

控制器方法将只接收`StudioExecutive`已经提到的。现在，如果我们做同样的事情并在 js 中构建对象，如下所示，我们会​​得到**相同的结果**。

```
o = {
    Studio: [{
        Id: 1,
        Name: 'Studio Contact ID=1',
    }],
    StudioExecutive: [{
        Id: 2,
        Name: 'Studio Exec Contact ID=2',
    }]            
};
$.ajax({
    type: "POST",
    url: "/Test/SaveTestContact",
    data: JSON.stringify(o),
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function (msg) {

    }
}); 
```

现在有趣的部分来了。如果我们将另一个项目添加到该`Studio`字段并以相同的方式发布，**我们将得到相同的结果**。

```
// Do this in the controller and do the same ajax post
public ActionResult TestContactView()
{
    var vm = new TestContact();
    vm.Studio.Add(new TestContactItem(){Id=1, Name = "Studio Contact ID=1"});
    vm.Studio.Add(new TestContactItem(){Id=3, Name = "Studio Contact ID=3"});
    vm.StudioExecutive.Add(new TestContactItem() { Id = 2, Name = "Studio Exec Contact ID=2" });
    return View(vm);
 } 
```

但是，如果我们将构建对象，`js`如下所示，控制器将同时接收`Studio`, 和 2 个项目，以及`StudioExecutive`, 和一个项目。

```
o = {
    Studio: [{
        Id: 1,
        Name: 'Studio Contact ID=1',
    },
    {
        Id: 2,
        Name: 'Studio Contact ID=2',
    }],
    StudioExecutive: [{
        Id: 2,
        Name: 'Studio Exec Contact ID=2',
    }]            
};
// then do the ajax post 
```

## 所以我们学了什么

这告诉我们两件事：

1.  默认模型绑定器存在问题，因为它无法绑定两个或多个以相同名称开头的字段
2.  `JSON.stringify`如果只有一项，也可以**不****这样**做，但如果字段中有多个具有最短名称的项目（例如） ，它可以这样做**`Studio`**

# sql - 我将如何为附加的报告编写 SQL？

> ID：16072552
> 
> 赞同：1
> 
> 时间：2013-04-18T00:28:10.297
> 
> 标签：sql, postgresql, reporting

我们正在从数据系统转移到另一个系统。我不得不重写一些报告，新系统有一个自定义报告模块，您可以在其中编写查询并将其粘贴到窗口中并将其推送给最终用户。我有一份所有用户都在请求的报告，但我不知道如何编写它。

它按年级、性别和种族对学校人口进行了细分。见下文附件。

![在此处输入图像描述](https://i.stack.imgur.com/U15jO.png)

我写了这篇文章，按年级划分了人口，但不知道从哪里开始。

```
SELECT
gl.title as Grade,
COUNT (s.student_id)
FROM
students s,
student_enrollment se,
school_gradelevels gl
WHERE
s.student_id = se.student_id
AND se.school_id=gl.school_id
AND se.grade_id=gl."id"
AND se.syear =2012
AND se.end_date IS NULL
AND se.school_id =10

group by gl.title

order by Grade; 
```

作为参考，性别是 s.gender，种族是 s.race。我想知道是否将不得不购买像水晶报告这样的报告软件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:11:44.587

从根本上说，您必须按您计算的所有内容进行分组，这似乎是年级、种族和性别。首先做到这一点：将所有内容排成一行，按照您需要的方式进行总结。

可能让您感到困惑的是，该报告有两个级别的分组：一个按年级、种族和性别分组，一个按年级和种族分组。实际上，它看起来像这样：

```
create view V as 
SELECT   gl.title as Grade
       , s.sex
       , s.race 
       , COUNT (s.student_id) as Q
FROM students as s
JOIN student_enrollment as se
ON s.student_id = se.student_id
JOIN school_gradelevels gl
ON se.school_id = gl.school_id
AND se.grade_id = gl.id
WHERE
    se.syear = 2012
AND se.end_date IS NULL
AND se.school_id = 10
group by gl.title, s.sex, s.race

select Grade, race, sex, Q
from V
UNION
select Grade, race, 'Z', sum(Q) as Q
from V
group by Grade, race 
```

如何将其转换为交叉表报告取决于您可以使用的工具。在 SQL 中可以使用运算`pivot`符或`case`. `select`诀窍是要注意每个种族都需要三列：男性、女性和两者。有点繁琐，这里有一个示例

```
select   Grade, 1 as sort_order  
       , max(case race when 1 then 
                  case sex when 'M' then Q end end) as r1mq
       , NULL as r1mb
       , max(case race when 1 then 
                  case sex when 'F' then Q end end) as r1fq
       , max(case race when 2 then 
                  case sex when 'M' then Q end end) as r2mq
       , NULL as r2mb
       , max(case race when 2 then 
                  case sex when 'F' then Q end end) as r2fq
       ...
from V group by Grade
UNION
select   Grade, 2 as sort_order  
       , NULL as r1mq
       , max(case race when 1 then 
                  case sex when 'Z' then Q end end) as r1bq
       , NULL as r1fq
       , NULL as r2mq
       , max(case race when 2 then 
                  case sex when 'Z' then Q end end) as r2bq
       , NULL as r2fq
       ...
from V group by Grade
order by Grade, sort_order 
```

这会产生每个年级的两行，每个年级的第二行中的合并学生总数。

你明白了。您还需要查询来计算按年级和性别分组的学生，以及仅按年级分组的学生。这些可以加入到您的数据透视查询的输出中。并且按种族的总数，对于最后一行，与等级 99 或其他东西结合在一起，使其排在最后。结果将与报告的行和列布局相匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T13:34:31.973

```
with detail as (
    select
        gl.title as grade, s.race, s.gender, count(s.student_id) total
    from
        students s
        inner join
        student_enrollment se using (student_id)
        inner join
        school_gradelevels gl on se.school_id = gl.school_id and se.grade = gl.id
    where
        and se.syear = 2012
        and se.end_date is null
        and se.school_id = 10
    group by 1, 2, 3
    order by 1, 2, 3
) agg as (
    select grade, array_agg(total) total
    from detail
    group by grade
)
select
    grade,
    (select sum(e) from unnest(total) s(e)) total_grade,
    total[1,1] + total[2,1] + total[3,1] + total[4,1] + total[5,1] + total[6,1] total_F,
    total[1,2] + total[2,2] + total[3,2] + total[4,2] + total[5,2] + total[6,2] total_M,
    total[1,1] total_A_F,
    total[1,2] total_A_M,
    total[1,1] + total[1,2] total_A,
    total[2,1] total_B_F,
    total[2,2] total_B_M,
    total[2,1] + total[2,2] total_B,
    total[3,1] total_H_F,
    total[3,2] total_H_M,
    total[3,1] + total[3,2] total_H,
    total[4,1] total_I_F,
    total[4,2] total_I_M,
    total[4,1] + total[4,2] total_I,
    total[5,1] total_M_F,
    total[5,2] total_M_M,
    total[5,1] + total[5,2] total_MM,
    total[6,1] total_W_F,
    total[6,2] total_W_M,
    total[6,1] + total[6,2] total_W,
from agg 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T03:03:55.303

没有数据示例，因此可以假定针对学生捕获了性别和种族信息。

你想要做的是得到一个看起来像这样的初始表：

```
GradeLevel   |   Category     |  NumOfStudents
------------------------------------------------
PK           |     B - Male   |  10
PK           |     B - Female |  12
0            |     B - Male   |  5
0            |     B - Female |  6 
```

这很容易通过执行以下操作来实现：

```
SELECT
gl.title as GradeLevel,
s.Race + '-' +s.Gender as Category
COUNT (s.student_id) as NumOfStudents
FROM 
           students s,
inner join student_enrollment se on s.student_id = se.student_id,
inner join school_gradelevels gl on se.school_id=gl.school_id AND se.grade_id=gl."id"
WHERE
    se.syear =2012
AND se.end_date IS NULL
AND se.school_id =10

group by gl.title, s.Race + '-' +s.Gender

order by Grade; 
```

接下来，您将希望通过使用您的报告工具天气它的 SSRS 或 Crystal 或任何其他支持矩阵报告的东西来从该数据中进行数据透视。

如果没有可用的报告工具知道如何制作矩阵，请使用 SQL`Pivot`子句： http: [//msdn.microsoft.com/en-us/library/ms177410 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

```
SELECT GradeLevel, [B-Male], [B-Female] ....
FROM 
  (
      SELECT
      gl.title as GradeLevel,
      s.Race + '-' +s.Gender as Category
      COUNT (s.student_id) as NumOfStudents
      FROM 
                 students s,
      inner join student_enrollment se on s.student_id = se.student_id,
      inner join school_gradelevels gl on se.school_id=gl.school_id AND se.grade_id=gl."id"
      WHERE
          se.syear =2012
      AND se.end_date IS NULL
      AND se.school_id =10
      group by gl.title, s.Race + '-' +s.Gender   
  ) rawData
  PIVOT
  (
  SUM(NumOfStudents)
  FOR Category IN ( [B-Male], [B-Female], ... )
) AS pvt 
```

# python - 使用 vstack 在 pylab 中堆叠数组

> ID：16072554
> 
> 赞同：0
> 
> 时间：2013-04-18T00:29:07.710
> 
> 标签：python, ipython

我必须遵循代码来堆叠数组并求解方程组：

```
 1     import numpy as np
 2     from numpy.linalg import solve

 3     xi = np.array([-1., 1., -2])
 4     yi = np.array([0., 4., 3.])
 5     A = np.vstack([np.ones(3), xi, xi**2]).T
 6     b = yi

 7     c = solve(A,b) 
```

然后在这之后我有代码来执行一个图表，但我在第 5 行得到一个错误。它说：

```
 TypeError: 'function' object has no attribute '__getitem__' 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:38:32.077

看起来你的括号混淆了。上面打印的代码在第 5 行有不匹配的括号：`([...)]`所以它给出了 SyntaxError。我猜您实际使用的版本会`[(...)]`给出您报告的错误。问题是你试图使用方括号调用函数，而python语法需要圆形。试着把括号反过来：`([...])`然后代码在我的系统上运行良好。

编辑：当我输入这个问题时，这个问题被编辑了，所以忽略前两句话。我仍然怀疑实际运行的代码中括号的顺序是错误的。

# ember.js - Ember.js 中基于模型状态切换视图模板

> ID：16072557
> 
> 赞同：3
> 
> 时间：2013-04-18T00:29:32.227
> 
> 标签：ember.js

我的 Ember.js 应用程序中有一个通知框，它将根据状态模型的值更改文本、样式和按钮。**如何只切换通知框的视图（或模板）？**我不想 transitionTo 因为页面的其余部分不应该更新，只是那个通知框。

我有一个[带有完整示例的 JSFiddle](http://jsfiddle.net/baalexander/FYWTK/3/)。但这里有一些相关的部分可以看一下：

主模板将呈现通知栏（“statusState”）和常规视图数据。

```
<script type="text/x-handlebars" data-template-name="status">
  {{render "statusState" content}}
  <p>
  Other information not related to the status state, but still related to status goes here.
  </p>
  {{outlet}}
</script> 
```

每个状态状态（“待处理”、“就绪”、“完成”）都有一个单独的模板：

```
<script type="text/x-handlebars" data-template-name="status/pending">
  <div style="background-color: grey">
    The status is pending.
  </div>
</script>

<script type="text/x-handlebars" data-template-name="status/ready">
  <div style="background-color: blue">
  The status is ready.
  </div>
</script>

<script type="text/x-handlebars" data-template-name="status/finished">
  <div style="background-color: green">
    The status is finished.
  </div>
</script> 
```

Status 对象没什么特别的，属于 StatusController：

```
App.StatusRoute = Ember.Route.extend({
  model: function() {
    return App.Status.create();
  }
});

App.Status = Ember.Object.extend({
  value: 0
}); 
```

我的第一次尝试是在状态值更改时更改视图的模板名称。但这感觉很老套，甚至似乎对 Status 值的变化没有反应：

```
App.StatusStateView = Ember.View.extend({
  templateName: function() {
    var templateName = 'status/pending';
    var value = this.get('controller.model.value');
    if (value === 1) {
      templateName = 'status/ready';
    }
    else if (value === 2) {
      templateName = 'status/finished';
    }
    return templateName;
  }.property('controller.model.value')
}); 
```

**简而言之，我将如何根据具有超过 2 个选择的模型值更改仅部分页面的视图或模板？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:48:39.407

这是我将如何处理这个问题。将布尔计算属性添加到模型或控制器，并使用带有 {{#if }} 帮助器的单个模板。例如

```
App.Status = Ember.Object.extend({
  value: 0,
  ready: function(){
     return this.get('value') === 1;
  }.property('value'),
  finished: function(){
     return this.get('value') === 2;
  }.property('value'),
  pending: function(){
     var value = this.get('value');
     return value !== 1 && value !== 2;
  }.property('value')
}); 
```

在一个模板中：

```
{{#if pending}}
  I'm pending
{{/if}}
{{#if ready}}
  I'm ready!
{{/if}}
{{#if finished}}
  I'm finished.
{{/if}} 
```

# java - 是否可以在 NoSQL / BigTable (GAE) 中建模无限规模的关系？

> ID：16072566
> 
> 赞同：0
> 
> 时间：2013-04-18T00:30:30.410
> 
> 标签：java, google-app-engine, entity-relationship, data-modeling, bigtable

我的团队正在使用 GAE (Java) 编写一个应用程序，这让我质疑 BigTable 等面向对象数据库中实体关系建模（特别是多对多）的可扩展性。

在 App Engine 数据存储区中建模无主的一对多和多对多关系的首选解决方案（请参阅[JDO 中的实体关系](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships?hl=en)）似乎是键列表。然而，谷歌警告：

> “以这种方式实现多对多关系有一些限制。首先，您必须显式检索存储列表的集合一侧的值，因为所有可用的都是 Key 对象。另一个更重要的是你想避免存储过大的键列表......”

说到*过大的键列表*，如果您尝试以这种方式建模并假设您为每个键存储一个 Long ，那么每个实体的限制为 1MB，每个实体的理论最大关系数约为 130k。对于一个主要优势是可扩展性的平台来说，实际上并没有那么多关系。所以现在我们正在研究可能需要超过 130k 关系的分片实体。

作为 AppEngine 开发人员资源中掌握数据存储系列的一部分，[建模实体关系](https://developers.google.com/appengine/articles/modeling)一文中概述了另一种方法（关系模型） 。然而，即使在这里谷歌警告关系模型的性能：

> “但是，您需要非常小心，因为遍历集合的连接将需要对数据存储进行更多调用。仅在您真正需要时才使用这种多对多关系，并注意性能你的申请。”

所以现在你在问：**“为什么每个实体需要超过 13 万个关系？”** 好吧，我很高兴你问。让我们以一个拥有 100 万用户的 CMS 应用程序为例（嘿，我能做梦吗？！）

用户可以上传内容并分享给： 1\. 公众 2\. 个人 3\. 群组 4\. 任意组合

现在有人登录并导航到仪表板，该仪表板显示来自他们在任何组中连接的人的新上传。此仪表板应包括公共内容，以及专门与此用户或此用户所属的组共享的内容。还不错吧？让我们深入研究一下。

```
public class Content {
  private Long id;
  private Long authorId;
  private List<Long> sharedWith; //can be individual ids or group ids
} 
```

现在，我获取允许查看的所有内容的查询可能如下所示：

```
List<Long> idsThatGiveMeAccess = new ArrayList<Long>();
idsThatGiveMeAccess.add(myId);
idsThatGiveMeAccess.add(publicId); //Let's say that sharing with 0L makes it public
for (Group g : groupsImIn)
    idsThatGiveMeAccess.add(g.getId());

List<Long> authorIdsThatIWantToSee = new ArrayList<Long>();
//Add a bunch of authorIds

Query q = new Query("Content")
            .addFilter("authorId", Query.FilterOperator.IN, authorIdsThatIWantToSee)
            .addFilter("sharedWith", Query.FilterOperator.IN, idsThatGiveMeAccess); 
```

显然我已经违反了几条规则。也就是说，使用两个 IN 过滤器会炸毁。即使是任何尺寸接近我们正在谈论的极限的单个 IN 过滤器也会爆炸。除此之外，假设我想限制和翻阅结果......不，不！如果您使用 IN 过滤器，则不能这样做。我想不出任何方法可以在单个查询中执行此操作 - 这意味着如果没有大量的读取时间处理和管理多个游标，您将无法对其进行分页。

所以这里是我能想到的工具：非规范化、分片或关系实体。然而，即使有了这些概念，我也看不出如何以可扩展的方式对这些数据进行建模。显然这是可能的。谷歌和其他公司一直在这样做。我只是看不出怎么做。**任何人都可以阐明如何对此建模或向我指出任何基于 NoSQL DB 的 cms 式访问控制的良好资源吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:40:14.927

将 id 列表存储为属性不会扩展。为什么不简单地为每个新关系存储一个新对象？（就像在 sql 中一样）。该对象将为您的 cms 存储两个属性：共享项目的 ID 和用户 ID。如果它与 1000 个用户共享，您将拥有其中的 1000 个。为给定用户查询它是微不足道的。列出给定项目的权限或用户与他们共享的内容列表也很容易。

# c - C中的华氏转换公式问题

> ID：16072574
> 
> 赞同：3
> 
> 时间：2013-04-18T00:31:57.750
> 
> 标签：c

在用 C 编写程序以将摄氏度转换为华氏度时，以下公式给出了不正确的输出：

```
 int fahr = 9 / 5 * celsius + 32; 
```

现在，我知道这可能是 9/5 被解释为整数的问题，但我不明白的是，使用`double`或`float`它仍然给出相同的错误输出。

奇怪的是，尽管也将类型设置为，但以下公式给出了正确的输出`int`：

```
int fahr = celsius / 5 * 9 + 32; 
```

此外，我注意到即使像下面这样简单的东西，当类型设置为 时`double`，输出仍然是 1.0 而不是 1.8：

```
 double x = 9 / 5;
 printf("%lf\n", x); 
```

我读过这个线程：

[C程序将华氏温度转换为摄氏温度](https://stackoverflow.com/questions/4890480/converting-fahrenheit-to-celsius-in-c)

但我仍然不明白为什么`int fahr = celsius / 5 * 9 + 32;`有效但无效`int fahr = 9/5 * celsius+32;`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T00:33:16.913

你正在用整数做数学。这个表达式：

```
9 / 5 
```

C 中的产量`1`。当您说您使用`double`or`float`时，您可能只是更改了 的类型`fahr`，这对发生在 assignemtn 运算符右侧的操作没有任何作用。要获得正确的行为，您还需要将这些常量中的至少一个设为 a `double`：

```
9.0 / 5 
```

同样，在此声明中：

```
double x = 9 / 5; 
```

您仍在进行整数数学运算，然后将结果分配给`double`变量。没有其他事情发生。通过执行以下操作之一，您将得到正确的答案：

```
double x = 9.0 / 5;
double x = 9 / 5.0;
double x = 9.0 / 5.0; 
```

这个表达式的原因：

```
int fahr = celsius / 5 * 9 + 32; 
```

似乎工作只是一个操作顺序的事情 - 在这里你将输入除以 5，然后乘以 9，而不是先进行常量操作。通过执行以下操作，您仍然可以获得更准确的答案：

```
int fahr = celsius * 9 / 5 + 32; 
```

除此之外，您还可以在此表达式中进行浮点数学运算：

```
int fahr = celsius * 9.0 / 5 + 32; 
```

如果你想使用整数进行原始计算，你当然可以 - 你只需要在除法之前相乘：

```
int fahr = 9 * celsius / 5 + 32; 
```

此表达式等效于上面使用的表达式之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T00:37:08.357

（在大多数情况下）评估每个表达式或子表达式的类型，而不考虑它出现的上下文。

在此声明中：

```
double x = 9 / 5; 
```

初始化表达式是`9 / 5`；它由两个`int`表达式和一个除法运算符组成。由于 的操作数`/`是类型`int`的，所以它是一个`int`除法，产生一个`int`值。由于整数除法会截断，结果是`1`, 类型`int`。

然后使用该表达式的结果来初始化`x`. 由于`x`is 的类型`double`，该值被隐式地从`int`to转换`double`，从而导致`x`持有该值`1.0`。

如果你想要的值`x`是`1.8`，你需要做浮点除法，这意味着你需要浮点操作数。最简单和最清晰的方法是：

```
double x = 9.0 / 5.0; 
```

还有其他几种（恕我直言不太清楚）方法。如果一个`/`运算符有两个操作数，一个是 type `int`，一个是 type `double`，则`int`操作数被提升为`double`，因此其中任何一个也将设置`x`为`1.8`：

```
double x = 9.0 / 5;
/* or */
double x = 9 / 5.0; 
```

但要小心这种方法：

```
double y = 9 / 5 / 3.0; 
```

这相当于：

```
double y = (9 / 5) / 3.0; 
```

它计算`9 / 5`为`int`, yielding `1`，然后将该结果提升为 ,`double`并除以`3.0`, yielding `0.333333333`。

关键是表达式的上下文不会对表达式或其操作数强加类型；表达式被评估为好像它是孤立的，*然后*可以根据其上下文转换结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T00:37:34.500

*我仍然不明白为什么`int fahr = celsius / 5 * 9 + 32;`有效但无效`int fahr = 9/5 * celsius+32;`*

对于前者，您可能将其声明`celsius`为 a`float`或 a `double`，从而使整个右侧如此评估。假设您使用`float`，它的工作原理如下：

```
celsius / 5 * 9 + 32
(celsius / 5.0) * 9 + 32
(celsius / 5.0 * 9.0) + 32
(celsius / 5.0 * 9.0 + 32.0) 
```

对于后者，`9/5`是整数算术，`1`在其余数学作为浮点数发生之前计算。在这种情况下：

```
9 / 5 * celsius + 32
1 * celsius + 32 // Because of this, you get an incorrect answer
celsius + 32
celsius + 32.0 
```

注意左侧的类型无关紧要；右侧的评估不考虑这一点。

**更新：**您说`celsius`的是`int`，这意味着您碰巧幸运并使用 的倍数进行测试，在对语句的其余部分执行有效的整数运算之前`5`为您提供正确的整数结果。`celsius / 5`在你的第二个例子中，作为一个倍数对`5`你没有帮助。

无论如何，现在您知道自己为什么幸运了，但是链接的问题为您提供了实际需要做的事情的`celsius`答案`5`那里的答案。

# asp.net-mvc - 新区域结果为 404

> ID：16072579
> 
> 赞同：0
> 
> 时间：2013-04-18T00:32:34.360
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-4, routes, asp.net-mvc-areas

我已经阅读了有关该主题的每个主题/问题，但从未找到答案。

在我的 MVC4 项目中，我刚刚添加了一个名为“Admin”的新区域。我看到`AdminAreaRegistration.vb`默认情况下已生成：

```
Public Class AdminAreaRegistration
    Inherits AreaRegistration

    Public Overrides ReadOnly Property AreaName() As String
        Get
            Return "Admin"
        End Get
    End Property

    Public Overrides Sub RegisterArea(ByVal context As System.Web.Mvc.AreaRegistrationContext)
        context.MapRoute( _
            "Admin_default", _
           "Admin/{controller}/{action}/{id}", _
            New With {.action = "Index", .id = UrlParameter.Optional} _
        )
    End Sub
End Class 
```

我创建了一个“AdminController”和一个适当的视图并构建了项目。试图导航到

`/Admin`

`/Admin/Admin`

`/Admin/Admin/Index`

一切以失败告终

![通用 404](https://i.stack.imgur.com/hFmcv.png)

我尝试删除管理区域并创建一个`Dashboard`用`Admin`控制器调用的新区域。

![文件夹结构](https://i.stack.imgur.com/4A910.png)

我还修改了我的 MapRoute

```
context.MapRoute( _
    "Dashboard_default", _
    "Dashboard/{controller}/{action}/{id}", _
    New With {.controller = "Admin", .action = "Index", .id = UrlParameter.Optional} _
) 
```

我尝试了命名空间的每一种组合`DashboardAreaRegistration`

`Namespace Areas`

`Namespace Areas.Dashboard`

`Namespace Dashboard`

我尝试了命名空间的每一种组合`AdminController`

`Namespace Areas`

`Namespace Areas.Dashboard`

`Namespace Areas.Controllers`

`Namespace Areas.Dashboard.Controllers`

我还尝试将命名空间包含在`\App_Start\RouteConfig.vb`

`Imports Areas`

`Imports Areas.Dashboard`

`Imports Areas.Dashboard.Controllers`

没有变化，只是 404。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:06:24.153

2天后，我终于解决了这个问题，**我不知道为什么会这样**。

在我的主要`Web.config`我发现

```
<section name="glimpse" type="Glimpse.Core.Configuration.Section, Glimpse.Core" /> 
```

这是 Glimpse 的线 - 我安装的一个 NuGet 包，首先试图帮助解决我的问题。它的功能之一是协助进行路由调试。*请注意，在我安装 Glimpse 之前和之后出现的问题完全相同；所以我认为这无关。*

1.  我删除了这一行
2.  已保存`Web.config`
3.  刷新浏览器，出现错误（500）
4.  把线放回去
5.  再次保存
6.  再次刷新页面，一切正常；我可以访问`/Dashboard`

某种故障或腐败？

# php - 服务器不会返回启用 CORS 的 AJAX GET 请求

> ID：16072582
> 
> 赞同：1
> 
> 时间：2013-04-18T00:32:43.353
> 
> 标签：php, http, cors

我正在尝试启用外部资源以向我的服务器发出 GET 请求。现在我只是在我的个人服务器上通过godaddy托管来测试它。这可能是个问题吗？

我在尝试发出请求的页面上有以下代码

```
//page.php
<?php
header("Content-Type: application/json")
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET');  

include_once 'php_dom/simple_html_dom.php';
include_once 'phpQuery.php';

if(isset($_GET['item'])){
    echo json_encode(array("data" => $_GET['item']));
}
else{
    echo json_encode(array("Error"=>"No item provided"));
} 
```

我尝试提出这样的请求（显然是使用我的 URL），但我没有得到任何回报。

```
$.getJSON("http://www.example.com/page.php?item=123&format=json&callback=?", function(data) {
    alert(data);
}); 
```

Chrome 开发人员显示成功的请求，但没有返回任何内容。我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:41:26.720

当您使用时`callback=?`，响应将作为 JSONP 处理。尝试这样的事情：

```
if(isset($_GET['item']) && isset($_GET['callback'])){
    echo $_GET['callback'].'('.json_encode(array("data" => $_GET['item'])).');';
} 
```

...或省略回调参数。

# ruby-on-rails - 有没有办法阻止rails记录所有内容？

> ID：16072585
> 
> 赞同：3
> 
> 时间：2013-04-18T00:32:56.437
> 
> 标签：ruby-on-rails, ruby, logging, privacy

我不希望它记录传入的 IP，也不希望它记录任何内部事件。
我只希望 Rails 在请求进入时对其进行处理，仅此而已。

这可能吗？

如何防止不断增长的 development.log 或 production.log？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T00:37:45.933

设置日志级别。

可用的日志级别是：`:debug, :info, :warn, :error`和`:fatal`

如果你想知道当前的日志级别，你可以调用 Rails.logger.level 方法。

更改`config.log_level = :fatal`环境初始化程序中使用的日志级别，或 `Rails.logger.level = 0`随时内联

另一种选择可能是将日志文件符号链接到 /dev/null

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T00:52:50.127

您可以将 Rails 日志记录工具替换为记录到 /dev/null 的记录器：

```
class NullLoggerRailtie < Rails::Railtie
  initializer 'null_logger', :before => 'initialize_logger' do |app|
    Rails.logger = ActiveRecord::Base.logger = ActionController::Base.logger = ::Logger.new("/dev/null")
  end
end 
```

这会将所有 Rails 日志重新路由到 null 设备，而不是让它转到任何地方的文件。日志记录仍然会发生，但它会立即被丢弃。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-05T15:11:48.813

简化[Chris Heald 答案](https://stackoverflow.com/a/16072726/462015)，您可以将记录器设置为`/dev/null`按环境：

```
Rails.application.configure do
  config.logger = Logger.new("/dev/null")
end 
```

只需将代码放在正确的文件中：

*   发展：`config/environments/development.rb`
*   测试：`config/environments/test.rb`
*   生产：`config/environments/production.rb`
*   所有环境：`congig/applications.rb`

# java - 如何从 jruby 调用 java 静态方法

> ID：16072587
> 
> 赞同：1
> 
> 时间：2013-04-18T00:33:18.537
> 
> 标签：java, jruby

我该怎么做呢？

```
include Java
Thread.currentThread.sleep 3 
```

我看到几年前的一个帖子，但它没有直接回答这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:27:56.260

任何一个：

```
Java::JavaLang::Thread::sleep 3 
```

或者

```
Java::JavaLang::Thread.sleep 3 
```

（注意，Thread 上的静态调用[sleep()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long%29)会导致当前线程休眠，因此无需调用`currentThread()`，并且休眠时间以毫秒为单位）。

这是一个示例（如果您使用 1.7 之前的 JRuby，则需要添加`require 'java'`）：

```
t = Java::JavaLang::Thread.new do
  puts "Hi."
  Java::JavaLang::Thread::sleep 3000
  puts "Done."
end
t.start 
```

# java - 实时替换用户输入击键（Java）

> ID：16072593
> 
> 赞同：1
> 
> 时间：2013-04-18T00:34:04.157
> 
> 标签：java, swing, input, time, passwords

我正在尝试编写一个java程序，它将用户输入实时转换为星号（为了隐藏信息，比如用户正在输入密码），但是我不知道如何做到这一点，我甚至不确定这个术语到底是什么。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T00:35:54.477

[`JPasswordField`](http://docs.oracle.com/javase/tutorial/uiswing/components/passwordfield.html)为此使用 a 。

![在此处输入图像描述](https://i.stack.imgur.com/N89Q5.png)

# c# - C# 中的有效视频流压缩

> ID：16072594
> 
> 赞同：1
> 
> 时间：2013-04-18T00:34:14.077
> 
> 标签：c#, video-streaming, audio-streaming, h.263

我正在寻找一种有效的方法来压缩实时视频流。在我的项目中，流似乎很重要，因为我的系统将同时发送和接收音频和视频流。我正在考虑使用 H261 或 H263。如何使用 C# 实现这样的压缩比？

PS 我找到了一个叫做 H323Plus 的东西，但是我不知道如何调用这个库，因为它是用 C++ 编写的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:49:06.380

如果您想通过 UDP 对音频和视频流进行实时流式传输，您可以使用 DirectShow API（如果您的目标是 Windows）。

> [http://msdn.microsoft.com/en-us/library/windows/desktop/dd375454(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375454(v=vs.85).aspx)

您将在此处找到 DirectShow 的 .NET 包装器

> [http://directshownet.sourceforge.net/](http://directshownet.sourceforge.net/)

您还可以在 codeproject.com 上找到更多示例，其中大多数使用此包装器

> [http://www.codeproject.com/kb/audio-video/#DirectShow](http://www.codeproject.com/kb/audio-video/#DirectShow)

如果您计划仅针对 Windows 7 和更新版本，那么您将需要使用 Windows Media Foundation API

> [http://msdn.microsoft.com/en-us/library/windows/desktop/ms694197(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694197(v=vs.85).aspx)

# javascript - 使用 JQuery 我可以用加载事件的结果替换一个空的 div

> ID：16072596
> 
> 赞同：0
> 
> 时间：2013-04-18T00:34:31.993
> 
> 标签：javascript, jquery

我有一个占位符 div 嵌套在另一个 div 中。当单击父div时，
我想用调用返回的数据替换占位符div，使用它的功能......`.load()``onclick`

例如：

```
function accordianClick(projectId) {
         $("#project-placeholder-" + projectId).replaceWith(
               $.load("projectDetail?projectId=" + projectId));
} 
```

诀窍是我只想在占位符 div 存在的情况下获取要加载的数据，所以一旦你点击父级并在第一次它不再存在时替换它，因此不会调用加载函数。

例如，这可行，但每次我单击父 div 时，它仍会获取数据。

```
function accordianClick(projectId) {
    $.get("projectDetail?projectId=" + projectId, function(data) {
        $("#project-placeholder-" + projectId).replaceWith(data);
    }, 'html');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:45:33.080

用于`length`检查它是否存在。

```
function accordianClick(projectId) {
    var $container = $("#project-placeholder-" + projectId);
    if( $container.length > 0 ) {
        $.get("projectDetail?projectId=" + projectId, function(data) {
            $container.replaceWith(data);
        }, 'html');
    }
} 
```

# css - Facebook Like 社交插件大小问题

> ID：16072600
> 
> 赞同：0
> 
> 时间：2013-04-18T00:35:14.263
> 
> 标签：css, facebook, plugins

我在我的网站上使用 Facebook Like 社交插件，每次页面加载时，插件都会拉伸它所在的 div 的高度，直到插件加载。

我确实定义了社交插件所在 div 的高度，但即使高度保持不变，您仍然可以看到这种变化。我也在使用 Twitter 和 Google plus 社交插件——这使得这种转变更加明显，因为它们也被转移了（在 h3 标题下转移）。

.socialBookmarks {margin:30px 0;padding:5px 15px;overflow:hidden;}

.socialBookmarks .social-wrap {display:inline-block;vertical-align:middle;}

.social-wrap .ezimageBox {float:left}

```
<div class="socialBookmarks">

   <h3 class="inline-block">Share:</h3>

      <div class="social-wrap clearfix">

         <div class="ezimageBox">
         (loads twitter social plugin)
         </div>

        <div class="ezimageBox">
        (loads google plus social plugin
        </div>

        <div class="ezimageBox">
        (loads facebook social plugin)      
        </div>

      </div>
</div> 
```

有人对如何解决这个问题有任何想法吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:27:07.317

设置包装的宽度和高度`<div>`（在您的情况下为 .ezimageBox）通常对我有用。

尝试这个：

```
.social-wrap .ezimageBox {float:left, width:100px, height: 20px; overflow:hidden;} 
```

它仍然闪烁吗？

# asp.net - 如何正确编写此数据库搜索查询？

> ID：16072603
> 
> 赞同：0
> 
> 时间：2013-04-18T00:35:31.597
> 
> 标签：asp.net, sql, tsql, search, dotnetnuke

我正在尝试编写一个查询，该查询将根据许多不同的表单字段搜索数据库。我希望查询按输入的字段进行过滤，并简单地忽略未在表单上输入的任何字段。例如：

表单字段：-项目名称-项目编号-项目经理

因此，如果用户为项目名称输入“Joe”，则无论该记录中的其他值是什么，它都应该在名称字段中返回任何形式的“joe”的所有结果。

我一直在尝试使用严格的 SQL 来完成此操作，但结果不正确（但预期）。我有一些非常重要的疑问，如果它们牵强附会，我深表歉意。

第一个查询是针对所有条件使用 AND 语句设置的。我意识到它不起作用，因为数据库中的 NULL 值仍然没有被通配符拾取。

```
 <ListDataSource CommandText="
SELECT [surveyid], 
       [projectnumber], 
       [siteno], 
       [person], 
       [subatpdate], 
       [projectname], 
       [priorsurveyor], 
       [siteaddress], 
       [sitecity], 
       [sitestate], 
       [sitezip], 
       [survey], 
       [zoning], 
       [environmental], 
       [emg_projectnumber], 
       [zoning_projectnumber], 
       [surveyor_projectnumber] 
FROM   tblrawprojectdatabase 
WHERE  [projectnumber] LIKE '%' + @projectnumber + '%' 
       AND [siteno] LIKE '%' + @siteno + '%' 
       AND [person] LIKE '%' + @person + '%' 
       AND [subatpdate] LIKE '%' + @subatpdate + '%' 
       AND [projectname] LIKE '%' + @projectname + '%' 
       AND [priorsurveyor] LIKE '%' + @priorsurveyor + '%' 
       AND [siteaddress] LIKE '%' + @siteaddress + '%' 
       AND [sitecity] LIKE '%' + @sitecity + '%' 
       AND [sitestate] LIKE '%' + @sitestate + '%' 
       AND [sitezip] LIKE '%' + @sitezip + '%' 
       AND [survey] LIKE '%' + @survey + '%' 
       AND [zoning] LIKE '%' + @zoning + '%' 
       AND [environmental] LIKE '%' + @environmental + '%' 
       AND [emg_projectnumber] LIKE '%' + @emg_projectnumber + '%' 
       AND [zoning_projectnumber] LIKE '%' + @zoning_projectnumber + '%' 
       AND [surveyor_projectnumber] LIKE '%' + @surveyor_projectnumber + '%' " 
```

我的第二次尝试检查空值。这会更好一些，除非您输入“Jim”作为项目经理，它还会返回所有带有 null 作为项目经理值的记录。

```
 <ListDataSource CommandText="
SELECT [surveyid], 
       [projectnumber], 
       [siteno], 
       [person], 
       [subatpdate], 
       [projectname], 
       [priorsurveyor], 
       [siteaddress], 
       [sitecity], 
       [sitestate], 
       [sitezip], 
       [survey], 
       [zoning], 
       [environmental], 
       [emg_projectnumber], 
       [zoning_projectnumber], 
       [surveyor_projectnumber] 
FROM   tblrawprojectdatabase 
WHERE  ( [projectnumber] LIKE '%' + @projectnumber + '%' 
          OR [projectnumber] IS NULL ) 
       AND ( [siteno] LIKE '%' + @siteno + '%' 
              OR [siteno] IS NULL ) 
       AND ( [person] LIKE '%' + @person + '%' 
              OR [person] IS NULL ) 
       AND ( [priorsurveyor] LIKE '%' + @priorsurveyor + '%' 
              OR [priorsurveyor] IS NULL ) 
       AND ( [siteaddress] LIKE '%' + @siteaddress + '%' 
              OR [siteaddress] IS NULL ) 
       AND ( [sitecity] LIKE '%' + @sitecity + '%' 
              OR [sitecity] IS NULL ) 
       AND ( [sitestate] LIKE '%' + @sitestate + '%' 
              OR [sitestate] IS NULL ) 
       AND ( [sitezip] LIKE '%' + @sitezip + '%' 
              OR [sitezip] IS NULL ) 
       AND ( [survey] LIKE '%' + @survey + '%' 
              OR [survey] IS NULL ) 
       AND ( [zoning] LIKE '%' + @zoning + '%' 
              OR [zoning] IS NULL ) 
       AND ( [environmental] LIKE '%' + @environmental + '%' 
              OR [environmental] IS NULL ) 
       AND ( [emg_projectnumber] LIKE '%' + @emg_projectnumber + '%' 
              OR [emg_projectnumber] IS NULL ) 
       AND ( [zoning_projectnumber] LIKE '%' + @zoning_projectnumber + '%' 
              OR [zoning_projectnumber] IS NULL ) 
       AND ( [surveyor_projectnumber] LIKE '%' + @surveyor_projectnumber + '%' 
              OR [surveyor_projectnumber] IS NULL ) " 
```

有没有办法使用 OR 并使其作为短路评估工作，以便在满足第一个条件时无法检查空值？

谢谢，关于如何完成我的搜索查询的任何建议都会非常好。

# 更新：

我在最初的帖子中遗漏的一些有价值的信息是我正在使用一个名为 XModPro 的 DotNetNuke 模块。我不知道有任何方法可以成功使用条件和循环逻辑我需要使用 ASP 构建查询，因为模块限制您使用它们的标签（据我所知，它只提供 if 和 select 语句并使变量使用比应有的更复杂）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:46:36.753

在您构建 CommandText 变量时，在您的 asp 代码中执行一些条件逻辑。例如，如果在 ProjectName 文本框中未输入任何内容，请不要将其包含在查询中。此外，您可以考虑使用 OR 逻辑而不是 AND。这将取决于您要达到的目标。

这是一个关于如何做到这一点的粗略想法。这不是真正的代码，它只是显示了方法：

```
string WhereClause = "where 1 = 2 "
if a project name was specified.
WhereClause = WhereClause + something about the project name.
etc 
```

另外，请记住包含查询参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:53:12.987

怎么样，添加临时表中的所有内容删除您想要的任何内容并从临时表返回。

```
SELECT [surveyid], [projectnumber], [siteno], [person], [subatpdate], [projectname], 
[priorsurveyor], [siteaddress], [sitecity], [sitestate], [sitezip], [survey], [zoning], 
[environmental], [emg_projectnumber], [zoning_projectnumber], [surveyor_projectnumber] 
INTO #temp
FROM tblRawProjectDatabase
 WHERE ([projectnumber] LIKE '%' + @projectnumber + '%' OR [projectnumber] IS NULL) AND 
([siteno] LIKE '%' + @siteno + '%' OR [siteno] IS NULL) AND 
([person] LIKE '%' + @person + '%' OR [person] IS NULL) AND 
([priorsurveyor] LIKE '%' + @priorsurveyor + '%' OR [priorsurveyor] IS NULL) AND 
([siteaddress] LIKE '%' + @siteaddress + '%' OR [siteaddress] IS NULL) AND 
([sitecity] LIKE '%' + @sitecity + '%' OR [sitecity] IS NULL) AND 
([sitestate] LIKE '%' + @sitestate + '%' OR [sitestate] IS NULL) AND 
([sitezip] LIKE '%' + @sitezip + '%' OR [sitezip] IS NULL) AND 
([survey] LIKE '%' + @survey + '%' OR [survey] IS NULL) AND 
([zoning] LIKE '%' + @zoning + '%' OR [zoning] IS NULL) AND 
([environmental] LIKE '%' + @environmental + '%' OR [environmental] IS NULL) AND 
([emg_projectnumber] LIKE '%' + @emg_projectnumber + '%' OR [emg_projectnumber] IS NULL) AND 
([zoning_projectnumber] LIKE '%' + @zoning_projectnumber + '%' OR [zoning_projectnumber] IS NULL) AND 
([surveyor_projectnumber] LIKE '%' + @surveyor_projectnumber + '%' OR [surveyor_projectnumber] IS NULL)

DELETE FROM #temp WHERE ProjectManaer IS NULL
SELECT * FROM #temp
DROP TABLE #temp 
```

# css - 折叠的 Bootstrap 手风琴面板打开时在 DIV 之外展开

> ID：16072605
> 
> 赞同：0
> 
> 时间：2013-04-18T00:35:42.947
> 
> 标签：css, html, twitter-bootstrap, accordion

我正在使用手风琴作为 BizStrap 响应式网站主题的一部分。默认情况下，底部面板是打开的。

手风琴的设置根据模板进行，除了设置类和高度以关闭所有面板：

```
<a href="#collapseOne" data-parent="#accordion2" data-toggle="collapse" class="accordion-toggle collapsed">
Panel title</a>
</div>
<div class="accordion-body collapse" id="collapseOne" style="height: 0px;">
<div class="accordion-inner"> 
```

开发 [页面在这里。](http://www.asam.edu.au/2013/site/industry_conferences_young_leaders.html)

我还尝试在第一个面板打开的情况下进行设置。这种情况下的问题是，当顶部面板下方的面板打开时，顶部面板保持打开状态，并且第二个面板的内容延伸到容器 DIV 之外。奇怪的是，如果我先点击顶部面板，然后手风琴下方的面板正常运行。这个类是'accordion-toggle e'，高度设置为'auto'。开发[页面在这里。](http://www.asam.edu.au/2013/site/programs_aamc.html)

我没有使用 Bootstrap 设置手风琴，并且很难理解它。如果有人对帮助我实现这些结果中的任何一个有任何指示，我将不胜感激！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:05:30.520

手风琴内容溢出包含的原因`<div>`是设置的行内高度，如下所示 -

```
<div style="height: 188px;" id="accordion2" class="accordion in collapse"> 
```

只需删除高度。

如果您希望手风琴面板在加载时关闭，请删除该类`in`

如在-

```
<div id="accordion2" class="accordion collapse"> 
```

看到这个相关的问题 -

[如何让我的手风琴在所有菜单关闭的情况下加载？](https://stackoverflow.com/questions/9419470/how-do-i-get-my-accordion-to-load-with-all-the-menus-closed)

# objective-c - 从 RootViewController 调用函数

> ID：16072607
> 
> 赞同：0
> 
> 时间：2013-04-18T00:35:55.280
> 
> 标签：objective-c

如何从中调用`RootViewController`函数`FirstViewController`？我正在使用带有情节提要的 Xcode 4.6。

* * *

RootViewController.m：

```
-(void)openMenu
{
    ...
} 
```

第一视图控制器：

```
- (IBAction)btnMenu:(id)sender {
    RootViewController *root = [[RootViewController alloc] init];
    [root openMenu]; // No visible @interface for 'RootViewController' declares the selector 'openMenu'
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T00:37:38.810

您必须在标头中声明该方法`RootViewController.h`。例子

```
- (void)openMenu; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T00:49:32.383

这种情况的常见做法是使用委托。您`FirstViewController`将有一个委托，然后您`RootViewController`将为实例设置委托，并接收事件的信息。

**第一视图控制器.h**

```
@protocol FirstViewDelegate;

@interface FirstViewController : UIViewController

@property (strong) id<FirstViewDelegate> delegate;

@end

@protocol FirstViewDelegate <NSObject>

- (void)openMenu;

@end 
```

**第一视图控制器.m**

```
- (IBAction)btnMenu:(id)sender {
    [self.delegate openMenu];
} 
```

**主视图控制器.h**

```
#import "FirstViewController.h"

@interface RootViewController : UIViewController
<
FirstViewDelegate
> 
```

**主视图控制器.m**

```
-(IBAction)showFirstViewButtonClicked:(id)sender {
    FirstViewController *firstViewController = [[FirstViewController alloc] init];
    firstViewController.delegate = self;
    [self presentViewController:firstViewController animated:YES completion:nil];
}

-(void)openMenu {
   // this will be called when the btnMenu action is fired in the firstViewController
} 
```

# java - 我可以遍历在 Java 中的 for 循环中定义的数组吗？

> ID：16072609
> 
> 赞同：2
> 
> 时间：2013-04-18T00:35:58.477
> 
> 标签：java, arrays, for-loop

Java 是否提供了一种方法来执行以下操作，而无需在单独的变量中声明数组？

```
for (String s : {"HEY", "THERE"}) {
    // ...
} 
```

我能想到的最好的是：

```
for (String s : new ArrayList<String>() {{ add("HEY"); add("THERE"); }}) {
    // ...
} 
```

这不漂亮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T00:38:30.403

好吧，您至少可以这样做：

```
for (String s : new String[]{"HEY", "THERE"}) {
    // ...
} 
```

由于`Array`s 在 Java 中是“可迭代的”（尽管[没有实现`Iterable`](https://stackoverflow.com/questions/1160081/why-is-an-array-not-assignable-to-iterable)），因此您可以迭代 an`Array`而不是 an `ArrayList`，它也可以内联初始化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T00:39:48.760

```
for (String s : Arrays.asList("HEY", "THERE")) {
    // ...
} 
```

不知道你为什么要这样做，但你有它。

# performance - Delphi过程参数：var比指针慢？

> ID：16072625
> 
> 赞同：0
> 
> 时间：2013-04-18T00:37:57.980
> 
> 标签：performance, delphi, pointers, parameters

我在 Delphi 6 中有一个“发送”例程，它接受可变大小的数据块（一个固定大小的标头，后跟不同数量的数据），该例程最终在 Winsock 中调用 sendto()。我以两种方式对其进行了编码，一次是传递的块是 var（有点误导，但它有效），一次是传递指向块的指针。用于基准测试的简单版本如下所示：

```
type 
  header = record destination, serialnumber: integer end;
  pheader = ^header;

var
  smallblock: record h: header; data: array[1..5] of integer end;
  bigblock: record h: header; data: array[1..100] of integer end;

procedure send1(var h: header; size: integer);
begin
h.destination := 1; // typical header adjustments before sendto()
h.serialnumber := 2;
sendto(sock, h, size, 0, client, sizeof(client))
end;

procedure send2(p: pheader; size: cardinal);
begin
p^.destination := 1;
p^.serialnumber := 2;
sendto(sock, p^, size, 0, client, sizeof(client))
end;

procedure doit1;
begin
send1(smallblock.h, sizeof(smallblock));
send1(bigblock.h, sizeof(bigblock));
end;

procedure doit2;
begin
send2(@smallblock, sizeof(smallblock));
send2(@bigblock, sizeof(bigblock));
end; 
```

“发送”例程将经常被调用，具有许多不同的块大小，并且应该尽可能快。在运行了一些简单的基准测试之后（通过使用 gettickcount 计时调用），指针技术（doit2）在我的机器上运行似乎比 var 技术（doit1）快 3%，尽管我没有看到任何真正的区别在目标代码中的两种技术之间（不是说我是汇编大师）。

3% 是我粗略的基准造成的错觉，还是指针技术真的击败了 var 技术？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T01:16:41.300

`var`传递参数与指针参数没有性能差异。它们做完全相同的事情（传递内存地址），并编译成相似的（如果不相同的话）汇编代码。因此，任何基准测试差异都可能是由基准测试本身的问题引起的，而不是由被基准测试的代码引起的。 `GetTickCount()`例如，它并不完全是最好的基准测试工具。为代码计时的最佳方法是使用外部分析器，例如 AQTime。

顺便说一句，您的`doit2()`测试应该是这样的：

```
procedure doit2;
begin
  send2(@(smallblock.h), sizeof(smallblock));
  send2(@(bigblock.h), sizeof(bigblock));
end; 
```

# mysql - Mysql 存储函数给出的结果与原始查询不同（某些条件不起作用）

> ID：16072626
> 
> 赞同：1
> 
> 时间：2013-04-18T00:37:59.313
> 
> 标签：mysql, sql

我在mysql存储函数中有一个奇怪的问题。该函数返回的结果与我单独运行查询不同。这是我的功能：

```
DELIMITER $$
CREATE DEFINER=`admin`@`%` FUNCTION `getARetention`
(appID int(10), currentDate DATE) 
RETURNS int(11)
    READS SQL DATA
    DETERMINISTIC
BEGIN

  RETURN 
(SELECT count(DISTINCT UserId)
           FROM
               Session 
       WHERE  (Date(Started) = currentDate  AND AppId=appID));
END 
```

我是这样称呼它的：

```
SELECT getARetention(5,DATE('2013-04-03')); 
```

这是单独的查询：

```
SELECT count(DISTINCT UserId)
           FROM
               Session 
       WHERE  (Date(Started) = DATE('2013-04-03')  AND AppId=5) 
```

该函数返回错误的 2502。单独查询返回 5，这是正确的。另外，如果我从单独的查询中删除“AND AppId=5”，那么它会返回 2502，这意味着在存储的函数中该条件不起作用。

有人知道为什么吗？我有一段时间没有使用 mysql，所以我可能遗漏了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T00:50:33.313

`MySQL`这里无法区分变量名和列名。

否则命名变量：

```
DELIMITER $$
CREATE DEFINER=`admin`@`%` FUNCTION `getARetention`
        (
        _appID int(10),
        _currentDate DATE
        ) 
RETURNS int(11)
READS SQL DATA
DETERMINISTIC
BEGIN
        RETURN  (
                SELECT COUNT(DISTINCT UserId)
                FROM   Session 
                WHERE  appId = _appId
                       AND started >= _currentDate
                       AND started < _currentDate + INTERVAL 1 DAY
                );
END
$$ 
```

# python - 把我的功能变成一个类

> ID：16072627
> 
> 赞同：1
> 
> 时间：2013-04-18T00:38:20.017
> 
> 标签：python, class

我有一个完全按照我想要的方式工作的函数，但是对于我的课程工作，我必须把这个函数变成一个类：

*   必须有一个名为`solveIt`,
*   返回以下两个值：
    *   如果您已解决此背包问题，则为 True 的布尔值，并且
    *   具有正确值的背包对象。

该类必须有一个`__str__()`返回这样的字符串的函数。第一行是大小，第二行是逗号分隔的元素列表：

```
10
4,1,9,2,0,4,4,4,3,7 
```

我不太了解课程，因此将不胜感激。这是我现在拥有的功能：

```
from itertools import combinations

def com_subset_sum(seq, target):
    if target == 0 or target in seq:
        print(target)
        return True

    for r in range(len(seq),1,-1):
        for subset in combinations(seq, r):
            if sum(subset) == target:
                print(subset)
                return True
    return False

print(com_subset_sum([4,1,9,2,0,4,4,4,3,7],10)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:50:06.977

将函数转换为类的一种明显方法是将函数参数（或其中一些参数）转换为对象属性。例如：

```
class Knapsack(object):
    def __init__(self, seq, target):
        self.seq = seq
        self.target = target
        self.solution = None
    def solveIt(self):
        if self.target == 0 or self.target in self.seq:
            self.solution = (target,)
            return True, self.solution
        for r in range(len(self.seq),1,-1):
            for subset in combinations(self.seq, r):
                if sum(subset) == self.target:
                   self.solution = subset
                   return True, self.solution
        return False, () 
```

现在你可以这样做：

```
>>> knapsack = Knapsack([4,1,9,2,0,4,4,4,3,7],10)
>>> print(knapsack.solveIt())
(True, (4, 1, 2, 0, 3)) 
```

然后，添加一个`__str__`方法很简单：

```
def __str__(self):
    if self.solution is None:
        self.solveIt()
    return '{}\n{}'.format(len(self.seq), 
                           ','.join(map(str, self.solution))) 
```

我添加的原因`self.solution`是，一遍又一遍地调用`__str__`不会一遍又一遍地计算结果。您可以轻松地删除该成员并编写以下内容：

```
def __str__(self):
    solved, solution = self.solveIt()
    return '{}\n{}'.format(len(self.seq), 
                           ','.join(map(str, solution))) 
```

无论哪种方式，我都不确定这比功能更好。（事实上​​，更糟糕的是：使用函数，您始终可以使用`functools.partial`绑定仅序列，或序列和目标，或者当然两者都不绑定，而使用类，您总是必须绑定两者.)

也许你的教授给了你一些关于你想如何使用这个可能有帮助的对象的提示？或者，也许你的教授只是个白痴，不知道如何想出一个很好的激励性任务来教你上课……</p>

# javascript - 用javascript函数改变背景

> ID：16072630
> 
> 赞同：0
> 
> 时间：2013-04-18T00:38:34.860
> 
> 标签：javascript, html

我正在尝试制作一个更改 div 背景的按钮。我想为 javascript 函数提供 2 个参数。

我将更改背景的 div 的 ID 背景类型的数量。

例如...

```
 <div id="background" class="background1">
     <p>Choose a Background</p>
     <a href="javascript:change(background,10)" class="btn"></a>
    </div> 
```

我想要的函数将背景DIV的类更改为background1、background2、background3、background4 ...直到10（参数）

我想要一个带参数的函数，因为我会在很多 div 中使用！做不到 =(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:42:13.570

尝试这个...

```
var nextId = 1;
var highestId = 10; //highest image Id

function change(DivId) {

    //Change the background image only...
    document.getElementById(DivId).style.backgroundImage = '../' + nextId + '.jpg';

    /*Or to set class instead, swap the above line for the one below...*/
    //document.getElementById(DivId).className = 'BackgroundClass' + nextId;

    if(nextId > highestId) {nextId = 1;}
    return false;
} 
```

样品用法：

```
<div id="Something"></div>
<a href="#" onclick="return change('Something')">Change Background</a> 
```

[在这里工作 jsfiddle](http://jsfiddle.net/gApWv/1/)（鉴于我没有你的背景图片，我正在提醒它设置的内容）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:08:17.627

如果您对新的 HTML5 功能持开放态度，我将使用属性“数据”来存储每个 div 上的 bg 计数，并且我将通过仅使用 3 个可能的背景来简化答案，但您可以在大批：

```
var bgs = new Array('images/bg_a.jpg','images/bg_b.jpg','images/bg_c.jpg');

function change(div_id){
   elm_div = document.getElementById(div_id);
   if((elm_div.getAttribute('data-bg') == null || elm_div.getAttribute('data-bg') == (bgs.length-1)){
     new_bg_pos = 0
   }else{
     new_bg_pos = elm_div.getAttribute('data-bg');
     new_bg_pos++
   } 
   elm_div.setAttribute('data-bg',new_bg_pos);
   elm_div.style.background = "url("+bgs[new_bg_pos]+")";
} 
```

div_id 是您要更改的分区的 id，该函数将为每个分区分别旋转遍历数组的所有背景，并保存属性“data-bg”上的位置（可能与旧浏览器不兼容）。

同样在 HTML 中，锚点会尝试将您发送到某个位置，而不是使用其他链接，例如跨度：

```
<span onclick="change('my_div')" >Change BG of "my_div" the next bg </span> 
```

# ruby-on-rails - 为什么 ActiveRecord/PostgreSQL 在数据库中找不到我的数据？

> ID：16072631
> 
> 赞同：2
> 
> 时间：2013-04-18T00:38:41.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord, rails-activerecord

我确定这是我忽略的简单问题，但是由于我已经处理这个奇怪的问题几天了，现在我正在寻求帮助。

### 这是我的应用程序设置和问题：

带有 pg gem 和以下数据库方案的 Rails 3.2.13 应用程序：

```
create_table "clients", :force => true do |t|
  t.string   "uuid"
  t.string   "private_key"
  t.datetime "created_at",  :null => false
  t.datetime "updated_at",  :null => false
end

add_index "clients", ["private_key"], :name => "index_clients_on_private_key"
add_index "clients", ["uuid"], :name => "index_clients_on_uuid" 
```

### 我目前在我的“客户”数据库中有两行。他们如下图：

![在此处输入图像描述](https://i.stack.imgur.com/GfzXs.png)

### 问题

当我执行一个简单的“SELECT * FROM clients;” 使用 RubyMine 数据库控制台，我得到了上面屏幕截图中所示的行。当我执行“SELECT * FROM clients WHERE id = 11;”时 我明白了，一切都很好。但是，问题是当我尝试执行“SELECT * FROM clients WHERE private_key = "MkRBNUZBQzUtMzVDRi00NzQ3LThFNjEtNjI4OThERUQzQkRF";”时 它失败并在控制台输出中显示以下内容...

```
sql> SELECT * FROM clients WHERE private_key = "MkRBNUZBQzUtMzVDRi00NzQ3LThFNjEtNjI4OThERUQzQkRF"
[2013-04-17 20:09:51] [42703] ERROR: column "MkRBNUZBQzUtMzVDRi00NzQ3LThFNjEtNjI4OThERUQzQkRF" does not exist
  Position: 43 
```

我还尝试通过使用活动记录帮助器方法将这一行从数据库中拉出......

```
Client.exists?(:private_key => token)
Client.find_by_private_key(token) 
```

但是，没有任何效果，它永远不会找到数据库中确实存在的记录。有谁知道这里发生了什么？我需要做的就是利用活动记录助手，特别是“Client.exists？（：private_key => token）”来检查数据库中是否存在提供的令牌。

谢谢你的帮助！

## 2013 年 4 月 18 日上午 9:30 更新

我只是`Client.find(12)`想看看它是否会通过 id 找到记录，这很有效。这并不能帮助我理解为什么我仍然不能使用`Client.exists?(:private_key => token)`or `Client.find_by_private_key(token)`。

## 2013 年 4 月 19 日上午 9:15 更新

这个问题的答案是生成我的 private_key 值的代码在值的末尾添加了一个返回/空格。因此，当尝试根据 private_key 查询数据库中的行时，它总是找不到任何东西。

为了解决这个问题，我在生成 private_key 的代码末尾添加了一个 gsub，如下所示......

```
private_key = SecurityHelper.encrypt_private_key(client_uuid).gsub(/\s+/, "") 
```

这会从生成的私钥中去除所有空白并解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:48:12.163

您使用了错误的引用样式。PostgreSQL 中使用的 ANSI SQL 引用是：

```
 "SELECT * FROM clients WHERE private_key = 'MkRBNUZBQzUtMzVDRi00NzQ3LThFNjEtNjI4OThERUQzQkRF';" 
```

注意单引号。

不清楚第一个语句是如何被 Ruby 解析的，因为内部双引号会结束引用的字符串，导致：

```
"SELECT * FROM clients WHERE private_key = "MkRBNUZBQzUtMzVDRi00NzQ3LThFNjEtNjI4OThERUQzQkRF";"
                                           ^^^^
                                           should be Ruby syntax error here 
```

不过，我并没有真正使用 Rails，所以我不能说出正确的 Rails 语法来通过 ActiveRecord 进行此检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:50:33.370

你有没有尝试过

```
Client.exists?(:private_key => "MkRBNUZBQzUtMzVDRi00NzQ3LThFNjEtNjI4OThERUQzQkRF") 
```

# c++ - 隐藏元素后调整组框的大小？

> ID：16072635
> 
> 赞同：2
> 
> 时间：2013-04-18T00:39:18.717
> 
> 标签：c++, qt, qt3

在我的项目中，我有一个组框，其中包含一些可能需要隐藏的元素，以及上方和下方的其他元素。如果我用 setHidden(true) 隐藏这些元素，这些元素会被隐藏，但会在其他元素之间留下很大的空间。

隐藏这些元素后如何压缩组合框，所以没有这么大的空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:33:56.617

原因不在 invalidate() 中。这是因为您对 GroupBox 内容的布局不正确。如果你 hide() 或 show() 任何 QWidget QT 会自动使直到最顶层父级的所有内容都无效，这可能会受到可见性变化的影响。因此，在您的情况下，QGroupBox 缺少布局，因此您隐藏元素，QGroupBox 几何形状没有任何改变，这就是您看不到预期拉伸的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:59:42.507

没有代码，有点难以猜测，缺少什么。

您是否尝试过`QLayout::invalidate()`隐藏框后保持组框的布局？

# c - 将字符连接到句子 c

> ID：16072636
> 
> 赞同：0
> 
> 时间：2013-04-18T00:39:39.117
> 
> 标签：c, concatenation, string-concatenation, sentence

如何在句子中添加字符。

例如，我有一个 player1，想将 player1 添加到句子的开头“请输入你想洗牌的次数。

我习惯了java，你可以在其中添加+来连接变量和字符串

到目前为止我有这个，但它不喜欢我输入的任何内容：

```
printf(&player1 + " please enter how many times you would like to shuffle the deck: ");
int numShuf;
scanf("%i", &numShuf); 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:42:38.953

尝试这个：

```
printf("%s please enter how many times you would like to shuffle the deck: ", player1); 
```

`printf`表示打印格式化，因此您可以格式化要打印的内容并将变量添加为参数。

# sql - 如何更改与时间相关的sql中的状态

> ID：16072638
> 
> 赞同：0
> 
> 时间：2013-04-18T00:39:44.947
> 
> 标签：sql, postgresql-8.4

嗨，我正在做一个项目，但我遇到了以下问题保留或持有。如果座位立即得到确认，则为保留，如果没有，乘客有 24 小时的时间进行保留并将其从保留状态更改为保留状态。此外，如果座位在 24 小时后未预订，则会更改为过期状态。

到目前为止我能想出的是

插入（值）到不同的表中，当它被预订时，bookingid.status = R 或 bookingid.status = bookingtime > 24 = E

这里没有线索，所以感谢一些帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:03:30.570

有很多方法可以做到这一点，但最简单的方法是将预订状态初始化为**reserved**如果它是立即预订的，如果不是，你会设置为**hold**。现在，您将不得不依靠视图（或其他类似方法）来获取动态计算的状态。如果用户稍后预订他的预订，您只需更新预订状态即可预订。

*请注意，我没有必要建议将状态表示为字符串，仅用于示例。*

```
SELECT 
    CASE
        WHEN status = 'held' AND DATEDIFF(hh, booking_date, now()) > 24 THEN 'expired'
        ELSE status
    END AS status
FROM booking 
```

# android - 切换活动时Android应用程序崩溃

> ID：16072644
> 
> 赞同：0
> 
> 时间：2013-04-18T00:41:11.750
> 
> 标签：android

单击列表视图的任何项目后，我希望启动一个新活动。当我通过模拟器运行它时，我的应用程序每次都会崩溃。我很肯定我的 AndroidManifest 也是正确的。任何帮助表示赞赏。

```
public static class SectionFragment extends ListFragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";
    private String dataArrayOne[];
    private String dataArrayTwo[];

    public SectionFragment() {
        dataArrayOne = new String[] {
                "Steven's Portfolio",
                "Sean's Portfolio",
                "Logan's Portfolio",
        };

        dataArrayTwo = new String[] {
                "GOOG",
                "YHOO",
                "AAPL",
                "MSFT"
        };
    }

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        switch(getArguments().getInt(ARG_SECTION_NUMBER))
        {
        case 0:
            ListAdapter listAdapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, dataArrayOne);
            setListAdapter(listAdapter);
            break;
        case 1:
            ListAdapter listAdapter1 = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, dataArrayTwo);
            setListAdapter(listAdapter1);
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_main_dummy, container, false);
    }

    @Override
    public void onListItemClick(ListView list, View v, int position, long id)
    {
        Toast.makeText(getActivity(), getListView().getItemAtPosition(position).toString(), Toast.LENGTH_SHORT).show();

        Intent intent = new Intent(getActivity(), Portfolio_Select.class);
        intent.putExtra("USERNAME", getListView().getItemAtPosition(position).toString());
        startActivity(intent);

    } 
```

**AndroidManifest.xml**

```
<activity
        android:name=".Portfolio_Select"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
</activity> 
```

**投资组合_选择代码**

```
public class Portfolio_Select extends Activity {

    // variables go here

    TextView display;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(com.example.stockticker.R.layout.activity_main);

        display.setText("Stocks go here!");

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:43:59.387

```
TextView display; 
```

被声明，但它总是引用，`null`因为`findViewById()`它没有被用来给它任何其他东西。

这意味着当

```
display.setText("Stocks go here!"); 
```

被调用，你会得到一个 NPE。

因此，请确保您有一个带有 id的`TextView`in ，然后用于提供该参考`R.layout.activity_main``findViewById()``display``TextView`

```
setContentView(com.example.stockticker.R.layout.activity_main);

display = (TextView) findViewById (R.id.your_text_view_id);

display.setText("Stocks go here!"); 
```

如果还有其他问题，请将堆栈跟踪添加到您的问题中，这样就不会涉及其他猜测。

# c# - 我如何知道我的应用程序需要哪些先决条件？

> ID：16072646
> 
> 赞同：0
> 
> 时间：2013-04-18T00:41:40.500
> 
> 标签：c#, .net, prerequisites

所以我写了一个应用程序并创建了一个安装程序。当我尝试在其他机器上安装它时，该应用程序根本无法运行。搞砸了一段时间后，似乎我需要选择可视化 C++ 运行时库作为先决条件。现在我想知道我是否可能需要其他先决条件。我到底怎么知道一个应用程序需要的所有先决条件是什么？

# actionscript-3 - 位图被缓存为位图

> ID：16072647
> 
> 赞同：2
> 
> 时间：2013-04-18T00:41:49.343
> 
> 标签：actionscript-3, air

我有一个我正在开发的 AIR Mobile for iOS 的幻灯片类型部分。用户可以滚动浏览四个页面。每个页面包含一个使用`Bitmap`类和两个`TextField`s. 当我滚动浏览它们时（使用在整个应用程序中没有任何问题的自定义滚动框架），应用程序将每个 PNG 图像缓存为位图，因为它们进入屏幕并在它们离开屏幕后卸载它们周期（很可能是下一次 GC，尽管它似乎不如 GC 随机）。

在 iOS 上缓存 PNG 的动作非常慢，尤其是当它发生在另一个动作（例如滚动）发生时。这会在滚动时产生约 1 秒的延迟，这显然是不可接受的。有没有办法a）防止缓存或b）将它们缓存更长时间/无限期直到图像本身有资格进行GC？

我已经三重检查了我的代码，没有任何内容设置为 cacheAsBitmap。此外，我一直在使用 Adob​​e Scout 来查明导致瞬间冻结的原因，这肯定是由于缓存图像。我还消除了任何转换或缩放或过滤器或任何可能打开 cacheAsBitmap 以进行操作的东西，结果保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:14:49.770

事实证明，位图缓存毕竟不是真正的问题。查了很多，才发现原来是PNG解压。基本上，Flash 在 PNG 出现在屏幕上时对其进行解压缩（这比缓存更昂贵），将它们添加到内存中，并在它们离开屏幕一段时间后撤消该过程，这意味着我必须解压缩在每张图像的那段时间之后重新开始。

要解决这个问题，您只需以`BitmapData`某种方式访问​​该对象。我`getPixel( 0, 0 )`在我的构造函数中使用，图像被解压缩并永久加载到 BitmapData 中。它会增加一些启动时间，但以这种方式预加载会带来更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T07:07:01.153

为避免在运行时（按需）解压缩，您可以请求闪存在加载时对其进行解压缩。这将增加加载时间，但会提高应用程序的感知性能，因为一个单独的线程负责解压缩。这当然意味着图像在屏幕上时不会出现抖动或跳过。

```
var loaderContext:LoaderContext = new LoaderContext(); 
loaderContext.imageDecodingPolicy = ImageDecodingPolicy.ON_LOAD 
var loader:Loader = new Loader(); 
loader.load(new URLRequest("http://www.adobe.com/myimage.png"), loaderContext); 
```

请参阅：[http ://help.adobe.com/en_US/as3/dev/WS52621785137562065a8e668112d98c8c4df-8000.html](http://help.adobe.com/en_US/as3/dev/WS52621785137562065a8e668112d98c8c4df-8000.html)

和

[http://www.bytearray.org/?p=2931](http://www.bytearray.org/?p=2931)

嵌入式图像（通过代码）不应该被压缩，所以这个问题不应该出现在这样做的应用程序中。但是，如果您像我一样，使用 Flash Pro IDE 导入 PNG 或其他位图资源，Flash Pro 默认使用图像本身提供的设置将它们压缩为 JPG。

要解决此问题并避免这些解压缩问题，只需转到您的 Flash Pro 资源库，右键单击要更改的图像，单击属性并选择“无损/PNG/GIF”作为压缩。这将大大增加加载时间，但您将获得此处讨论的更好的感知性能。除了实现上面的代码之外，还应该这样做，否则不会有任何区别。

根据我的经验，平均帧速率仅下降了每秒一帧，但它更加一致，没有任何对游戏至关重要的跳跃或滞后。

由于 Flash Player 将释放 BitmapData 的解压缩位图内存，如果在此之后仍然发生解压缩，这里有一个解决方案：[保持位图解压缩](http://jacksondunstan.com/articles/2105)。

# javascript - JQuery 使用单元格数据来重构单元格

> ID：16072652
> 
> 赞同：1
> 
> 时间：2013-04-18T00:43:09.173
> 
> 标签：javascript, jquery

我正在使用 jquery 以及 CSVtoTable（此处的插件：[https](https://code.google.com/p/jquerycsvtotable/) ://code.google.com/p/jquerycsvtotable/ ）插件将大型 CSV 文件转换为我可以操作的表。我需要附加与每一行相关的链接。

我需要转换其中一行中的文本以添加指向 pdf 的链接。问题是我似乎无法修改字符串。我正在使用这样的数据：http: [//jsfiddle.net/bstrunk/vaCuY/297/](http://jsfiddle.net/bstrunk/vaCuY/297/)

我的系统生成的文件名不容易编辑，所以我坚持使用这些格式：

*   423-1.pdf

所以我需要从格式如下的表中转换两个字符串：

*   2013 年 4 月 23 日

*   1

删除年份和斜线，并添加“-”，然后添加额外的数字。我能够获取表格数据，但我似乎无法使用 .replace 或 .substr 来操作变量

```
$(document).ready(function () {
    $("tr td:nth-child(5)").each(function () {
        var $docket = $('td=eq(5)');
        var $td = $(this);
        var $dataDate = $td.substr(0, $td.lastIndexOf("/"));
        var $newDataDate = $dataDate.replace("/", "");
        $td.html('<a html="./docs/' + $newDataDate.text() + '-' + $docket.text() + '.pdf">' + $td.text() + '</a>');
    });
}); 
```

（编辑）：示例表数据：

```
<tr><td>13CI401111</td><td>22</td><td>Name1</td><td>Name2</td><td>4/23/2013</td><td>1</td></tr>
<tr><td>13CI401112</td><td>22</td><td>Name1</td><td>Name2</td><td>4/24/2013</td><td>2</td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:36:55.230

首先正确设置表id：

```
<table id="CSVTable"> 
```

然后使用右选择器选择每行中的第 5 个单元格：

```
$("#CSVTable tr td:nth-child(5)") //note that we need to tell Jquery to look for the cells inside `CSVTable` otherwise it will search the whole document 
```

每个变量的开头不需要美元符号并且没有任何意义，您可以将其删除。
这行不通：

```
var $docket = $('td=eq(5)'); 
```

它告诉 jquery 寻找第 6 个单元格，但在哪里？您应该指定父级，例如：

```
$("#CSVTable tr td:nth-child(6)"); 
```

但我们只需要下一个单元格到已经在`each`函数中选择的单元格，所以更好的方法是使用`next()`直接选择下一个 td 的方法：

```
$(this).next('td'); 
```

完整代码：

```
$(document).ready(function () {
    $("#CSVTable tr td:nth-child(5)").each(function () {
        var td = $(this),
            docket = td.next('td').text(),
            dataDate = td.text(),
            newDate = dataDate.substr(0, dataDate.lastIndexOf('/')).replace("/", '');

        td.html('<a href="/docs/' + newDate + '-' + docket + '.pdf">' + dataDate + '</a>');
    });
}); 
```

[演示](http://jsfiddle.net/arcm111/UPELM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:39:27.387

Bstrunk，试试这个：

```
$(function() {
    $("tr").each(function () {
        var $tr = $(this);
        var $td_date = $tr.find('td').eq(4);
        var $td_docket = $tr.find('td').eq(5);
        var dateArr = $td_date.text().split("/");
        $td_date.html('<a html="./docs/' + dateArr[0] + dateArr[1] + '-' + $td_docket.text() + '.pdf">' + $td_date.text() + '</a>');
    });
}); 
```

# c++ - C++ 没有匹配的构造函数

> ID：16072662
> 
> 赞同：0
> 
> 时间：2013-04-18T00:44:38.657
> 
> 标签：c++

最近，我开始学习 C++，这是我的第一个 C++ 程序——但它不起作用。

错误信息：

> “文档”的初始化没有匹配的构造函数。

我使用的 IDE 是 Xcode。

```
 class Document {

    private:

    int doc_id;
        int lan_id;
        std::vector<int>::size_type n_total;
        std::vector<int> words;
        std::vector<int> counts;

        inline int doc_type(){return (counts.empty() && !words.empty())? 1:0;};
    public:

        Document(int docId)
        {
            doc_id = docId;
            n_total = 0;
        }
        Document(int docId, int lanId)
        {
            lan_id = lanId;
            doc_id = docId;
            n_total = 0;
        }

        inline void add(int word, int count)
        {
            words.push_back(word);
            counts.push_back(count);
        }
        inline void add(int word) { words.push_back(word);}
        inline int word(int i) { return words[i]; }
        inline int count() { return counts[1];};
        inline std::vector<int>::size_type size() {  return n_total;};
        inline void setSize(std::vector<int>::size_type total){ n_total = total;};
        inline std::vector<int>::size_type  types() { return words.size();}

        ~ Document()
        {
            words.clear();
            counts.clear();
        }
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T00:47:58.247

我的猜测是您正在尝试`Document`使用默认构造函数来实例化您的类，但是，您没有在代码中定义默认构造函数。您只在公共部分定义了构造函数的两个重载版本：

```
Document(int docId, int lanId) 
```

和

```
Document(int docId) 
```

如果您按如下方式实例化您的对象

```
Document d; 
```

它会给你编译错误，因为编译器找不到默认构造函数来完成对象的创建。同时，您已经定义了自己的构造函数，因此编译器不会为您生成默认构造函数。

此外，你有几个地方放了多余的分号，这很容易出错，不应该在那里。

例如：

```
 inline int doc_type(){return (counts.empty() && !words.empty())? 1:0;};
                                                                     //^^^^
 inline int count() { return counts[1];};
 inline std::vector<int>::size_type size() {  return n_total;};
 inline void setSize(std::vector<int>::size_type total){ n_total = total;}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T01:00:56.710

问题出在您没有向我们展示的代码中，您尝试在其中创建这种类型的对象。您需要使用定义的构造函数之一：

```
Document d1(docId); 
Document d2(docId, lanId); 
```

我的疯狂猜测是您正在尝试默认构造一个：

```
Document d; 
```

该类没有（并且可能不应该）有默认构造函数`Document()`，所以这不起作用。

# c++ - 获取错误表达式必须具有 C++ 中的类类型

> ID：16072663
> 
> 赞同：4
> 
> 时间：2013-04-18T00:44:39.713
> 
> 标签：c++, compiler-errors

我收到以下 IntelliSense 错误：

> 表达式必须具有类类型 f:\C++\prj\map1\map1\testMap1.cpp 11

这是指我的代码中的以下行（如下所示）：

`theMap.insert(1, "one");`

我无法弄清楚问题是什么。它似乎与 的声明无关`theMap`，但每次我尝试调用一个方法时，`theMap`我都会收到错误消息。这是我的代码：

地图1.h

```
#ifndef MAP_H
    #define MAP_H
    #include <list>
    #include <utility>
    using namespace std;

//pair class definition
template<typename F, typename S>
class Pair
{
public:
Pair(const F& a, const S& b);
F get_first() const;
S get_second() const;
private:
F first;
S second;
};

template<typename F, typename S>
inline Pair<F, S>::Pair(const F& a, const S& b):first(a),second(b){}

template<typename F, typename S>
inline F Pair<F, S>::get_first() const
{
    return first;
}

template<typename F, typename S>
inline S Pair<F, S>::get_second() const
{
    return second;
}

template<typename K, typename V>
class map
{
public:
    map();
    void insert(const K& key, const V& value);
    bool contain_key(const K& key);
    V value_of(const K& key);
    void remove_key(const K& key);
    void print();

private:
    list<Pair<K, V>> theList;
};

template<typename K, typename V>
inline map<K, V>::map():{}

template<typename K, typename V>
inline void map<K, V>::insert(const K& key, const V& value)
{
    bool notThere = true;
    if(contain_key(key))
    {
        notThere = false;
    }
    if(notThere)
    {
    theList.push_back<pair<key, value>>
    }
}

template<typename K, typename V>
inline bool map<K, V>::contain_key(const K& key)
{
    iterator iter = theList.begin();
    K temp;
    for(int x=0 : x< theList.size() ; x++)
    {
        temp = iter->first;
        if(temp == key)
        {
            return true;
        }
        iter.advance();
    }

    return false;
}

template<typename K, typename V>
inline V map<K, V>::value_of(const K& key)
{
    iterator iter = theList.begin();
    K temp;
    for(int x=0; x < theList.size() ; x++)
    {
        temp = iter->first;
            if(temp == key)
            {
                return iter->second;
            }
    }
    cout << “we don’t have this key " << key << " in the map” "\n";
    return 0;
}

template<typename K, typename V>
inline void map<K, V>::remove_key(const K& key)
{
    iterator iter = theList.begin();
    K temp;
    for(int x=0; x < theList.size() ; x++)
    {
        temp = iter->first;
        if(temp == key)
        {
            theList.erase(iter)
        }

    }
}

template<typename K, typename V>
inline void map<K, V>::print()
{
    iterator iter = theList.begin;
    K temp;
    V temp2;
    for(int x=0; x < theList.size() ; x++)
    {
        temp = iter->first;
        temp2 = iter->second;
        cout << "Key:" << temp << " Value:" << temp2 << "\n";
    }

}

#endif; 
```

测试地图1.cpp

```
#include "map1.h"
#include <string>
#include <iostream>

using namespace std;

int main()
{
    map<int, string> theMap();
    theMap.insert(1, "one");
    theMap.insert(2, "two");
    theMap.insert(2, "double");
    theMap.insert(3, "three");

    theMap.print();

    theMap.remove_key(3);

    cout << "please enter a number" << "\n";
    int temp;
    cin >> temp;

    bool contains = theMap.contain_key(temp);
    if(contains)
    {
        cout << theMap.value_of(temp);
    }
    else
    {
        cout << "we don’t have this key " << temp << " in the map" << "\n";
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T00:56:53.033

```
map<int, string> theMap(); 
```

这是声明一个函数 theMap 不调用的默认构造函数`map`

消除 （）

```
map<int, string> theMap/*()*/; 
```

# mysql - 在子查询中使用 Distinct

> ID：16072665
> 
> 赞同：0
> 
> 时间：2013-04-18T00:44:56.270
> 
> 标签：mysql, sql

如何根据不同的 1 个字段显示一行的所有字段（即该字段不应重复）

假设有一个名为 Office_Roles 的表，其字段和数据如下

```
Name   Department   Designation

John   Marketing    Executive
John   Sales        Executive
John   PR           Executive 
```

所以我希望最终结果连续显示所有字段，但只显示 1 个 John（不同）

输出如 -

约翰营销（或销售）（或公关）执行官

我在想类似的东西

```
select * from Office_Roles where name =(select distinct name from Office_Roles); 
```

我们如何正确地做这样的事情？我还想做一个 Order By 并限制最终结果每页的结果数......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:08:24.343

这不会完全输出你想要的，但看看它是否适合你。只是给你一个想法。

```
select name, group_concat(Department SEPARATOR ' or ') as departments,
       Designation
from Office_Roles  a
group by name,Designation 
```

Yoy 可以在这里玩 SQL Fiddle [Demo](http://sqlfiddle.com/#!2/1bebe/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:48:47.723

查询的列数不能可变。您可以做的一件事是将这些值连接在一起：

```
select name, group_concat(Department) as departments,
       group_concat(Designation) as designations
from Office_Roles o
group by name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T00:51:42.147

无论哪种方式，您都将获得 3 行，因为表中有 3 行匹配，您要排除哪些行以及查询应该如何知道不显示的内容？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-18T00:48:02.740

我只会使用 GROUP BY

```
SELECT * FROM Office_Roles GROUP BY name; 
```

简单的。

# ios - 由于 sqlite3_step 和 while（重试）导致的 FMDB 无限循环

> ID：16072666
> 
> 赞同：0
> 
> 时间：2013-04-18T00:45:07.487
> 
> 标签：ios, fmdb

我有一个 FMDB executeUpdate 导致无限循环：

```
FMDatabase *db = [FMDatabase databaseWithPath:[CDDBManager getDatabasePath]];

[db closeOpenResultSets];
[db close];
NSLog(@"successfully pass closes");
[db open];
NSLog(@"successfully pass open");
[db setTraceExecution:YES];
BOOL success = [db executeUpdate:@"INSERT OR REPLACE INTO Player (id, ..., is_user) VALUES (?, ..., ?)",
                [NSNumber numberWithInt:self.player_id],
                ...
                [NSNumber numberWithInt:1]];

NSLog(@"end update");
[db close]; 
```

我在两个不同的 VC 中调用此方法，在一个中它完美地工作......在另一个我有一个无限循环（我在 FMDB 的“do {} while（）”中打印重试），所以我没有看到“结束更新” ...如您所见，我已经尝试关闭所有结果集和数据库 ...

任何人都可以看到我失败的地方吗？

欢迎所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:10:22.943

我想我们有同样的问题。我正在为我想调用我的数据库的每个方法打开一个连接。我通过在初始化时打开连接来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:05:03.057

很抱歉，这是一个简单的函数错误，我在条件子句中返回后关闭**FMResultSet ...**

# html - 有没有一种无痛的方法来制作“css 沙盒”？

> ID：16072670
> 
> 赞同：13
> 
> 时间：2013-04-18T00:45:33.860
> 
> 标签：html, css

CSS 沙盒是指布局中具有完全独立外观的部分。我需要这个，因为我的某些类需要在布局中输出一些内容“窗口”，但我不希望应用程序的 css 与它们混淆。它们大多与调试相关，例如打印 var 内容、基准图或显示一些错误/异常。

到目前为止，我一直在进行某种本地重置，但是为了避免冲突，这真的很烦人，如果我忘记了一些规则，可能会失败。前任：

```
html body div.eh-box {
    margin: 0 !important;
    padding: 0 !important;
    border: 0 !important;
    font-size: 100% !important;
    vertical-align: baseline !important;
    background-color: #fff !important;
    font: 12px/12px 'Helvetica Neue', Helvetica, Arial, sans-serif !important;
    margin-bottom: 20px !important;
}

html body div.eh-box * {
    margin: 0 !important;
    padding: 0 !important;
    border: 0 !important;
    font-size: 100% !important;
    font: inherit !important;
    vertical-align: baseline !important;
    color: #333 !important;
}

html body div.eh-box .title {
    font-size: 50px !important;
    line-height: 75px !important;
    /*font-weight: bold !important;*/
}

html body div.eh-box .desc {
    font-size: 24px !important;
    line-height: 36px !important;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T14:27:35.527

我对此了解不多，但我认为这或多或少是[Shadow DOM](http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom/)所做的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T15:12:16.443

另一种可能的解决方案 - 根据您的应用程序，是加载该布局部分`iframe`- 这样它是一个完全独立的文档，受一组单独的样式。不确定我是否需要提及使用框架存在某些缺点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T02:14:45.400

您可以使用 ID 创建容器元素，然后重置其规则（确保最后加载此部分）。您可能遇到的唯一问题是`!important`规则，但您也可以在重置部分使用这些规则（不是真正推荐的做法，但它会起作用）。

此外，根据您网站的结构，您可能希望尽可能具体地调用您的容器元素，例如`body #top_element #another_top_element #container`为了给它更高的优先级，但在大多数情况下，这不是必需的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-07T17:40:03.357

有一种技术叫做**Scoped CSS**

您不能再使用它 [1]，但是您可以尝试使用 polyfill [2]。

[1] [https://caniuse.com/#feat=style-scoped](https://caniuse.com/#feat=style-scoped)

[2] [https://github.com/PM5544/scoped-polyfill](https://github.com/PM5544/scoped-polyfill)

# php - 如何在 PHP 中回显抓取的 div？

> ID：16072672
> 
> 赞同：0
> 
> 时间：2013-04-18T00:46:07.953
> 
> 标签：php, curl, foreach, web-scraping, screen-scraping

如何回显和抓取 div 类？我试过这个，但它不起作用。我正在使用 cURL 建立连接。我该如何回应它？我想要它在实际页面上的样子。$document = new DOMDocument(); $document->loadHTML($html); $selector = new DOMXPath($document); $anchors = $selector->query("/html/body//div[@class='resultitem']"); //你要检索的URL

```
foreach($anchors as $a) { 
    echo $a;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T02:49:57.000

邻居，我刚刚在下面制作了这个片段，它使用了您的逻辑，并进行了一些调整以在 get_contents 函数中显示网页中的指定类。也许您可以插入您的价值观并尝试一下？

（注意：我将错误检查放在那里以查看一些错误。在您调整时使用它会有所帮助。）

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');

$url = "http://www.tizag.com/cssT/cssid.php";
$class_to_scrape="display";

$html = file_get_contents($url);
$document = new DOMDocument(); 
$document->loadHTML($html); 
$selector = new DOMXPath($document); 

$anchors = $selector->query("/html/body//div[@class='". $class_to_scrape ."']");

echo "ok, no php syntax errors. <br>Lets see what we scraped.<br>";

foreach ($anchors as $node) {
    $full_content = innerHTML($node);
   echo "<br>".$full_content."<br>" ;
}

/* this function preserves the inner content of the scraped element. 
** http://stackoverflow.com/questions/5349310/how-to-scrape-web-page-data-without-losing-tags
** So be sure to go and give that post an uptick too:)
**/
function innerHTML(DOMNode $node)
{
  $doc = new DOMDocument();
  foreach ($node->childNodes as $child) {
    $doc->appendChild($doc->importNode($child, true));
  }
  return $doc->saveHTML();
}

?> 
```

# php - SQL Server 和 WAMP Server 是否冲突？我需要使用不同的端口吗？

> ID：16072677
> 
> 赞同：2
> 
> 时间：2013-04-18T00:46:51.243
> 
> 标签：php, mysql, sql-server-2008, apache

好吧，我对编程完全陌生，所以请放轻松。我按照我的 Lynda.com 帐户中关于如何安装 Windows 7 的 WampServer 的说明进行操作，但运行时我无法让我的橙色图标变为绿色。我尝试连接到“将其联机”，但收到以下错误：

“无法执行菜单项（内部错误）[异常] 无法执行服务操作：服务尚未启动”

所以我用同样的错误重新启动了所有服务。我还尝试停止服务然后重新启动。没有运气，我仍然得到同样的错误。

要记住以下几点：

*   在我尝试安装 WAMP 服务器之前，我已经安装了 SQL Server，所以想知道它们是否链接到同一个端口。如果是这样，不确定如何查找和编辑此端口。

-我没有 SKYPE，所以他们没有使用相同的端口。

我的理论是这与让 SQL Server 和 MySQL 使用相同的端口有关。如果是这样，我该如何更改端口。在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:07:20.177

您可以通过单击 Wamp 服务器、Apache、服务，然后单击测试端口 80 来测试端口 80。如果正在使用它，它会告诉您，否则它会告诉您在该实例中没有使用它。

停止 SQL 报告服务，开始，然后键入管理工具，单击名称，选择计算机管理，然后选择服务和应用程序> SQL Server 配置> 服务并查找 SQL 报告服务，将其设置为手动启动，然后停止。

重启你的 WAMP 服务器，测试你的端口，这次你不会发现它 BUSY。重新启动所有服务。

有关更改端口或其他问题的更多信息，请查看[此处](http://sreypoevitc.wordpress.com/2013/04/18/resolving-yellow-wamp-server-status/)

希望它可以帮助你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-09T06:47:57.560

我遇到了同样的问题，发现冲突的不是 SQL 服务器，而是 SQL 服务器报告服务。我去了**services.msc**并停止了 SQL **server Reporting service**。我还将它更改为**手动**，以便它不会在重新启动时**自动**启动。现在我重新启动了 WAMP 服务器，它变成了绿色。

Tnx- SJ 创作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T16:17:32.220

有两个步骤

1.  将端口号从 80 更改为 8888（以千计） - 要更改端口号，您必须单击 wamp 或 mamp，然后单击 apache，然后单击 httpd.conf，然后搜索 listen。将端口号更改为 4444 或 8888 或数千个。

2.  如果 wamp 现在正在工作，但你仍然得到

未找到

HTTP 错误 404。未找到请求的资源。

你必须正确的绝对路径如下

本地主机：8888/文件夹名/文件名.php

这应该可以解决您的问题

另外：你可以去dreamweaver并点击服务器。然后放置 localhost:8888 而不是简单地使用 localhost

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-13T07:34:13.380

我遇到了同样的问题，发现冲突的不是 SQL 服务器，而是 SQL 服务器报告服务。似乎它使用的是 MYSql 正在使用的相同端口 3306。我去了 services.msc 并停止了 SQL 服务器报告服务。我还将它更改为手动，以便它不会在重新启动时自动启动。现在我重新启动了 WAMP 服务器，它变成了绿色。

目前我没有使用 SQL 服务器报告服务，因此我可以保持服务停止。我不知道如何更改此服务的端口，以免它们发生冲突。如果有人真的想使用 SQL Server 报告服务，他或她可能会更深入地研究这项服务，以某种方式更改端口。

谢谢，

潘卡伊

# java - 在编译 Java 代码库时提取参考图？

> ID：16072683
> 
> 赞同：2
> 
> 时间：2013-04-18T00:47:13.460
> 
> 标签：java, ant, javac

背景：

*   我正在使用（对我而言）一个相当大的代码库（例如：我目前只检查了一些相关项目，以及它的 > 11000 个类）。
*   Build 是 ant，Tests 是 JUnit，CI 是 Jenkins。
*   在签入之前运行所有测试不是一种选择，它需要 Jenkins 几个小时。即使对于某些单独的应用程序，它也可能是 45 分钟。
*   有些测试不引用基于反射的单个方法，在某些情况下甚至不直接引用被测方法的类，因为它们询问聚合器类，并且知道传递方法的模式在这里使用。因为它是一个很大的代码库，超过 10 个开发人员，而且我不是负责人，*所以这是我目前无法更改的。*

我想要的是能够在签入之前打印出与 git diff 列表中的任何类相距两度（Kevin-Bacon-wise）的所有测试类的列表。这样，当我错过的东西最终运行并出现错误时，我可以将它们全部运行并减少来自 Jenkins 的愤怒电子邮件。

我能想到的最简单的方法是自己用 Ruby 脚本或类似的脚本编写代码，这样我就可以解释我们正在使用的一些模式，但要做到这一点，我需要能够查询“哪个类引用类 X？”

我可以解析 .java 或（更简单的） .class 文件来获取此信息，但我不想:) 有没有办法让 Javac 在编译时以简单的格式导出它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T03:42:15.180

> 有没有办法让 Javac 在编译时以简单的格式导出它？

AFAIK，不。

但是，还有其他方法可以获取依赖项列表：

*   [如何获取主类的 Java 类依赖项列表？](https://stackoverflow.com/questions/200483/how-do-i-get-a-list-of-java-class-dependencies-for-a-main-class).

（但是请注意，您不太可能获得静态工具来提取来自 等的依赖`Class.forName()`项。另请注意，由于“编译时间常量”的处理方式，您无法从字节码文件中推断出完整的依赖项集。）

* * *

我觉得这里有几个问题：

*   这听起来像你的构建，实际上你的项目结构是单一的。如果您可以将代码库重组为单独构建的大型模块（根据它们的依赖关系），并单独控制版本，那么您只需要进行完整构建并在发生变化时运行所有单元测试.. . 在其他一切都依赖的模块中。（我可以建议使用“Maven”这个词吗？它确实有助于大型代码库，并且 11,000 个类很大。）

*   听起来您可能正遭受经典 VCS 系统的“分支很难”问题。

*   听起来您可能需要更强大的 CI 系统。如果你有更多的内核并且构建框架是正确的，你应该能够获得更快的 CI 构建。（如果你模块化以便重建更少......）

我认为以这种方式解决缓慢的构建/测试周期可能比通过额外的（可能是定制的）工具来进行依赖性分析更容易。

但我认识到，做出这些决定可能不取决于你。

# python - MSVCR100.dll, 0xc000007b Python cx_freeze

> ID：16072685
> 
> 赞同：2
> 
> 时间：2013-04-18T00:47:28.737
> 
> 标签：python, python-3.x, dependencies, cx-freeze, msvcr90.dll

我完成了我的第一个程序！我无法使用 Python 3 和 cx_freeze 制作二进制文件。该二进制文件在我的计算机上运行，​​但在我正在测试的另一台计算机上，我收到消息“找不到 MSCVR100.dll”。我查了一下，它似乎是一个 Visual Studio C++ 文件。

我在我的 Windows/sysWOW64 目录中找到了 DLL，并将它移到了出现错误的计算机上的应用程序目录中。（两者都是 Win 8 64 位）我现在收到错误 0xc000007b，这似乎是 64 位兼容性错误。[该网站](http://www.rhyous.com/2010/09/16/avoiding-the-msvcr100-dll-or-msvcr100d-dll/)描述了按顺序接收这两个错误，大概是使用 C++。他发现修复是安装 Visual Studio。没有意义。

很少有关于 DLL 或 07b 错误的可用信息提到 python 或 cx_freeze，这就是我难过的原因。该程序确实使用了QT，我觉得这可能与它有关。有任何想法吗？

# c - 创建一个线程并通过父级传递输入

> ID：16072694
> 
> 赞同：0
> 
> 时间：2013-04-18T00:48:07.243
> 
> 标签：c, mutex

我正在尝试使用互斥锁使线程等待来自父线程的用户输入。我目前面临的问题是孩子不会等待，即使我有一个互斥锁可以锁定和解锁，然后我也将它加入到父线程中。另外，我目前不确定我的结构是否被正确使用？main() 和 *chthread() 是否使用相同的“锁”实例？我知道，当我在创建线程之前获得用户输入时，它可以工作，但是本练习的要求表明它旨在在创建线程之后传递信息。

```
#define _GNU_SOURCE
#include <stdio.h>
#include <pthread.h>
#include <errno.h>
#include <string.h>
#include <stdlib.h>
#include <readline/readline.h>
#include <readline/history.h>

# define BUFFER_SIZE 256

void *chthread(void *arg);

struct  {
pthread_t pth;
pthread_mutex_t lock;
int ret;
void* ex;
} muinfo;

int main(int argc, char *argv[])
{
//struct mutex args;

char line[BUFFER_SIZE];
char *temp = NULL;  

pthread_mutex_init(&muinfo.lock, NULL);
if((pthread_create(&muinfo.pth, NULL, chthread, line)) != 0) {
        perror("Problem creating thread");
}

using_history();
temp = readline("enter a string:  ");
strcpy(line, temp);

if((pthread_join(muinfo.pth, &muinfo.ex)) !=0) {
        perror("Thread join error");
}
free(temp);

pthread_mutex_destroy(&muinfo.lock);   

pthread_exit(NULL); 
}

void *chthread(void *arg)
{
//struct mutex args;
pthread_mutex_lock(&muinfo.lock);
char *line = (char*)arg;

printf("testing %s\n", line);

pthread_mutex_unlock(&muinfo.lock);

pthread_exit(&muinfo.ret);    
//return NULL;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:24:47.567

至于您的主要问题，您需要先在 main 锁定互斥锁（可能在初始化之后），
并在获得用户输入后解锁它，
因此子线程将等到 main 解锁。

```
pthread_mutex_init(&muinfo.lock, NULL);
pthread_mutex_lock(&muinfo.lock);
if((pthread_create(&muinfo.pth, NULL, chthread, line)) != 0) {
        perror("Problem creating thread");
}

using_history();
temp = readline("enter a string:  ");
strcpy(line, temp);
pthread_mutex_unlock(&muinfo.lock); 
```

我删除了 using_history() 并使用延迟的 strcpy 固定字符串而不是 readline 作为测试，
它对我来说很好。

# node.js - nodejs setTimeout内存泄漏？

> ID：16072699
> 
> 赞同：10
> 
> 时间：2013-04-18T00:48:28.753
> 
> 标签：node.js, memory

v0.10.4

这是导致内存使用量不断增加的简单循环：

```
function redx(){
      setTimeout(function(){ redx() },1000);
      console.log('loop');
}

redx(); 
```

我究竟做错了什么 ？？

# 编辑

好的，刚刚尝试了在范围内引用超时对象的建议，似乎垃圾收集确实在大约 40 秒后开始，这是来自 TOP 的缩写日志：

3941 root 20 0 32944 7284 4084 S 4.587 3.406 0:01.32 node
3941 root 20 0 32944 7460 4084 S 2.948 3.489 0:01.59 node
3941 root 20 0 32944 7516 4084 S 2.948 3.515 0:01.68 node
3941 root 20 0 33968 8400 4112 S 2.948 3.928 0:02.15 node
3941 root 20 0 33968 8920 4112 S 3.275 4.171 0:02.98 node
3941 root 20 0 33968 8964 4112 S 2.948 4.192 0:03.07 node
3941 root 20 0 33968 9212 4112 S 2.953 4.308 0:03.16 node
3941 root 20 0 33968 9212 4112 S 2.953 4.308 0:03.25 节点
3941 根 20 0 33968 9212 4112 S 3.276 4.308 0:03.35 节点
3941 根 20 0 33968 9212 4112 S 2.950 4.308 0:03.44 节点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T09:28:38.957

不知道为什么，但显然如果你在函数 nodejs 的范围内引用超时对象，就会正确地进行垃圾收集。

```
function redx(){
      var t = setTimeout(function(){ redx() },50);
      console.log('hi');
}

redx(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T10:08:10.920

实际上，我认为这可能正是 V8 垃圾收集器的工作方式。

在我的系统上，节点堆往往会增加到 48 MB 然后稳定下来，所以我认为如果你让程序长时间运行，内存消耗最终会稳定下来。

您可以通过使用 V8 命令行选项之一启动节点来获得有关 GC 何时/如何启动的信息： --trace_gc 标志。

在您第一次尝试使用 Redis 时，您在每次调用时都系统地连接/断开与 Redis 的连接。这往往会产生垃圾。您应该打开一次连接并多次使用它。尽管如此，即使我这样做，内存消耗也趋于稳定。以下是 Redis 示例中内存消耗的演变：

```
// something close to your initial function (when Redis was still in the picture)
function redx(){
    var client = redis.createClient();
    client.get("tally", function(err, reply) {
        client.quit();
    });
    setTimeout(function(){ redx() }, 50 );
} 
```

![使用 Redis 连接/断开连接的内存消耗演变](https://i.stack.imgur.com/hk52o.png)

在这里，60 MB 之后的稳定性似乎相当明显。

# c# - 在 C# 中将字符串转换为字节数组

> ID：16072709
> 
> 赞同：843
> 
> 时间：2013-04-18T00:50:24.223
> 
> 标签：c#, string, encoding, byte

我正在将一些东西从 VB 转换为 C#。此语句的语法有问题：

```
if ((searchResult.Properties["user"].Count > 0))
{
    profile.User = System.Text.Encoding.UTF8.GetString(searchResult.Properties["user"][0]);
} 
```

然后我看到以下错误：

> 参数 1：无法从 'object' 转换为 'byte[]'
> 
> 'System.Text.Encoding.GetString(byte[])' 的最佳重载方法匹配有一些无效参数

我试图根据[这篇](https://stackoverflow.com/questions/10180864/converting-byte-array-to-string-not-working-in-c-sharp)文章修复代码，但仍然没有成功

```
string User = Encoding.UTF8.GetString("user", 0); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1499
> 
> 时间：2013-04-18T00:54:23.140

如果您已经有一个字节数组，那么您将需要知道使用什么类型的编码将其放入该字节数组。

例如，如果字节数组是这样创建的：

```
byte[] bytes = Encoding.ASCII.GetBytes(someString); 
```

您需要将其转回这样的字符串：

```
string someString = Encoding.ASCII.GetString(bytes); 
```

如果您可以在继承的代码中找到用于创建字节数组的编码，那么您应该进行设置。

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2015-12-18T04:40:31.830

首先，添加`System.Text`命名空间

```
using System.Text; 
```

然后使用此代码

```
string input = "some text"; 
byte[] array = Encoding.ASCII.GetBytes(input); 
```

希望修复它！

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2017-06-22T14:59:57.467

您还可以使用[*扩展方法*](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/extension-methods)向`string`类型添加方法，如下所示：

```
static class Helper
{
   public static byte[] ToByteArray(this string str)
   {
      return System.Text.Encoding.ASCII.GetBytes(str);
   }
} 
```

并像下面这样使用它：

```
string foo = "bla bla";
byte[] result = foo.ToByteArray(); 
```

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2019-12-06T11:07:49.667

## 不应使用 Encoding.Default...

一些答案使用`Encoding.Default`，但微软[对此提出警告](https://docs.microsoft.com/en-us/dotnet/api/system.text.encoding.default?view=netframework-4.8)：

> 不同的计算机可以使用不同的编码作为默认值，并且默认编码可以在单台计算机上更改。如果您使用默认编码对计算机之间流式传输的数据进行编码和解码，或在同一台计算机上的不同时间检索数据，则可能会错误地转换该数据。此外，Default 属性返回的编码使用 best-fit fallback **[即编码完全搞砸了，所以你不能重新编码它]**将不支持的字符映射到代码页支持的字符。由于这些原因，不建议使用默认编码。为确保正确解码编码字节，您应该使用 Unicode 编码，例如 UTF8Encoding 或 UnicodeEncoding。您还可以使用更高级别的协议来确保使用相同的格式进行编码和解码。

要检查默认编码是什么，请使用`Encoding.Default.WindowsCodePage`（在我的情况下为 1250 - 遗憾的是，没有预定义的 CP1250 编码类，但可以将对象检索为`Encoding.GetEncoding(1250)`）。

## ...应该改用UTF-8/UTF-16LE编码...

`Encoding.ASCII`得分最高的答案是 7bit，所以它也不起作用，就我而言：

```
byte[] pass = Encoding.ASCII.GetBytes("šarže");
Console.WriteLine(Encoding.ASCII.GetString(pass)); // ?ar?e 
```

按照微软的建议：

```
var utf8 = new UTF8Encoding();
byte[] pass = utf8.GetBytes("šarže");
Console.WriteLine(utf8.GetString(pass)); // šarže 
```

`Encoding.UTF8`别人推荐的是UTF-8编码的一个实例，也可以直接使用或者作为

```
var utf8 = Encoding.UTF8 as UTF8Encoding; 
```

`Encoding.Unicode`在内存中的字符串表示中很受欢迎，因为它使用固定的每个字符 2 个字节，因此可以在恒定时间内以更多的内存使用为代价跳转到第 n 个字符：它是 UTF-16LE。在 MSVC# 中，*.cs 文件默认为 UTF-8 BOM，其中的字符串常量在编译时转换为 UTF-16LE（请参阅@OwnagesMagic 注释），但未将其定义为默认值：[StreamWriter](https://docs.microsoft.com/en-us/dotnet/api/system.io.streamwriter.-ctor?redirectedfrom=MSDN&view=net-6.0#System_IO_StreamWriter__ctor_System_IO_Stream_)等许多类使用 UTF -8 作为默认值。

## ...但它并不总是使用

默认编码具有误导性：.NET 在任何地方都使用 UTF-8（包括在源代码中硬编码的字符串）和 UTF-16LE ( [)](https://en.wikipedia.org/wiki/Windows_code_page#List)将字符串存储在内存中，但Windows`Encoding.Unicode`实际上使用 2 个其他非 UTF8 默认值：.NET 之前）和[OEM 代码页](https://en.wikipedia.org/wiki/Category:DOS_code_pages)（又名 DOS 标准）。这些因国家/地区而异（例如，Windows 捷克版使用 CP1250 和 CP852）并且通常在 Windows API 库中进行硬编码。因此，如果您只是将 UTF-8 设置为控制台（因为 .NET 隐式执行并假装它是默认设置）并运行一些本地化命令（如 ping），它可以在英文版本中运行，但您会在捷克共和国获得豆腐文本。`chcp 65001`

让我分享一下我的真实经历：我创建了 WinForms 应用程序，为教师定制了 git 脚本。[输出是通过 Microsoft 描述](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.processstartinfo.useshellexecute?view=netcore-3.1)为（我添加的粗体文本）的过程在后台异步获得的：

> 在此上下文中，“shell”一词**(UseShellExecute)**指的是图形 shell **(ANSI CP)**（类似于 Windows shell）而不是命令 shell（例如 bash 或 sh）**（OEM CP）**，它允许用户启动图形应用程序或打开文档**（在非美国环境中输出混乱）**。

因此有效地 GUI 默认为 UTF-8，进程默认为 CP1250，控制台默认为 852。所以输出在 852 中解释为 UTF-8，解释为 CP1250。我得到了豆腐文本，由于双重转换，我无法从中推断出原始代码页。我花了一周的时间来弄清楚为进程脚本显式设置 UTF-8 并在主线程中将输出从 CP1250 转换为 UTF-8。现在它在东欧工作，但西欧 Windows 使用 1252。ANSI CP 不容易确定，因为许多命令`systeminfo`也已本地化，其他方法[因版本而异](https://serverfault.com/a/836221/306904)：在这种环境中可靠地显示国家字符几乎是不可行的。

因此，直到 21 世纪下半叶，请不要使用任何*“默认代码页”*并**明确**设置（如果可能，设置为 UTF-8 或 UTF-16LE）。

* * *

## 回答 #5

> 赞同：48
> 
> 时间：2017-09-29T04:31:58.107

```
var result = System.Text.Encoding.Unicode.GetBytes(text); 
```

* * *

## 回答 #6

> 赞同：34
> 
> 时间：2014-04-28T19:47:54.310

```
static byte[] GetBytes(string str)
{
     byte[] bytes = new byte[str.Length * sizeof(char)];
     System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
     return bytes;
}

static string GetString(byte[] bytes)
{
     char[] chars = new char[bytes.Length / sizeof(char)];
     System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
     return new string(chars);
} 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2019-12-02T21:28:41.063

这对我有用

```
byte[] bytes = Convert.FromBase64String(textString); 
```

反过来：

```
string str = Convert.ToBase64String(bytes); 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2019-05-10T12:35:29.877

在[Ali 的回答](https://stackoverflow.com/a/44703015/1304050)基础上，我会推荐一种扩展方法，允许您有选择地传入您想要使用的编码：

```
using System.Text;
public static class StringExtensions
{
    /// <summary>
    /// Creates a byte array from the string, using the 
    /// System.Text.Encoding.Default encoding unless another is specified.
    /// </summary>
    public static byte[] ToByteArray(this string str, Encoding encoding = Encoding.Default)
    {
        return encoding.GetBytes(str);
    }
} 
```

并像下面这样使用它：

```
string foo = "bla bla";

// default encoding
byte[] default = foo.ToByteArray();

// custom encoding
byte[] unicode = foo.ToByteArray(Encoding.Unicode); 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2015-06-30T14:43:05.347

用这个

```
byte[] myByte= System.Text.ASCIIEncoding.Default.GetBytes(myString); 
```

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2016-03-04T18:57:25.140

仅当字符为 1 字节时，以下方法才有效。（默认 unicode 不起作用，因为它是 2 个字节）

```
public static byte[] ToByteArray(string value)
{            
    char[] charArr = value.ToCharArray();
    byte[] bytes = new byte[charArr.Length];
    for (int i = 0; i < charArr.Length; i++)
    {
        byte current = Convert.ToByte(charArr[i]);
        bytes[i] = current;
    }

    return bytes;
} 
```

保持简单

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2019-10-16T13:09:25.470

您可以使用[MemoryMarshal API](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.memorymarshal?view=netcore-3.0)执行非常快速和高效的转换。`String`将隐式转换为`ReadOnlySpan<byte>`, 作为`MemoryMarshal.Cast`接受`Span<byte>`或`ReadOnlySpan<byte>`作为输入参数。

```
public static class StringExtensions
{
    public static byte[] ToByteArray(this string s) => s.ToByteSpan().ToArray(); //  heap allocation, use only when you cannot operate on spans
    public static ReadOnlySpan<byte> ToByteSpan(this string s) => MemoryMarshal.Cast<char, byte>(s);
} 
```

以下基准显示了差异：

```
Input: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s,"

|                       Method |       Mean |     Error |    StdDev |  Gen 0 | Gen 1 | Gen 2 | Allocated |
|----------------------------- |-----------:|----------:|----------:|-------:|------:|------:|----------:|
| UsingEncodingUnicodeGetBytes | 160.042 ns | 3.2864 ns | 6.4099 ns | 0.0780 |     - |     - |     328 B |
| UsingMemoryMarshalAndToArray |  31.977 ns | 0.7177 ns | 1.5753 ns | 0.0781 |     - |     - |     328 B |
|           UsingMemoryMarshal |   1.027 ns | 0.0565 ns | 0.1630 ns |      - |     - |     - |         - | 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2015-03-29T14:31:09.873

对 JustinStolle 编辑的改进（Eran Yogev 对 BlockCopy 的使用）。

建议的解决方案确实比使用编码更快。问题是它不适用于对长度不均匀的字节数组进行编码。如给定的那样，它引发了一个越界异常。从字符串解码时，将长度增加 1 会留下一个尾随字节。

对我来说，当我想从 to 编码时就需要`DataTable`了`JSON`。我正在寻找一种将二进制字段编码为字符串并从字符串解码回`byte[]`.

因此，我创建了两个类 - 一个包含上述解决方案（从字符串编码时很好，因为长度总是偶数），另一个处理`byte[]`编码。

我通过添加一个字符来解决不均匀长度问题，该字符告诉我二进制数组的原始长度是奇数（'1'）还是偶数（'0'）

如下：

```
public static class StringEncoder
{
    static byte[] EncodeToBytes(string str)
    {
        byte[] bytes = new byte[str.Length * sizeof(char)];
        System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
        return bytes;
    }
    static string DecodeToString(byte[] bytes)
    {
        char[] chars = new char[bytes.Length / sizeof(char)];
        System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
        return new string(chars);
    }
}

public static class BytesEncoder
{
    public static string EncodeToString(byte[] bytes)
    {
        bool even = (bytes.Length % 2 == 0);
        char[] chars = new char[1 + bytes.Length / sizeof(char) + (even ? 0 : 1)];
        chars[0] = (even ? '0' : '1');
        System.Buffer.BlockCopy(bytes, 0, chars, 2, bytes.Length);

        return new string(chars);
    }
    public static byte[] DecodeToBytes(string str)
    {
        bool even = str[0] == '0';
        byte[] bytes = new byte[(str.Length - 1) * sizeof(char) + (even ? 0 : -1)];
        char[] chars = str.ToCharArray();
        System.Buffer.BlockCopy(chars, 2, bytes, 0, bytes.Length);

        return bytes;
    }
} 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2018-12-07T14:43:12.823

这个问题已经回答了很多次了，但是随着 C# 7.2 和 Span 类型的引入，在不安全的代码中可以更快地做到这一点：

```
public static class StringSupport
{
    private static readonly int _charSize = sizeof(char);

    public static unsafe byte[] GetBytes(string str)
    {
        if (str == null) throw new ArgumentNullException(nameof(str));
        if (str.Length == 0) return new byte[0];

        fixed (char* p = str)
        {
            return new Span<byte>(p, str.Length * _charSize).ToArray();
        }
    }

    public static unsafe string GetString(byte[] bytes)
    {
        if (bytes == null) throw new ArgumentNullException(nameof(bytes));
        if (bytes.Length % _charSize != 0) throw new ArgumentException($"Invalid {nameof(bytes)} length");
        if (bytes.Length == 0) return string.Empty;

        fixed (byte* p = bytes)
        {
            return new string(new Span<char>(p, bytes.Length / _charSize));
        }
    }
} 
```

请记住，字节表示 UTF-16 编码的字符串（在 C# 领域中称为“Unicode”）。

一些快速的基准测试表明，对于中等大小的字符串（30-50 个字符），上述方法比它们的 Encoding.Unicode.GetBytes(...)/GetString(...) 实现快大约 5 倍，对于较大的字符串甚至更快。这些方法似乎也比使用带有 Marshal.Copy(..) 或 Buffer.MemoryCopy(...) 的指针更快。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-12-16T23:53:14.283

如果 'searchResult.Properties [ "user" ] [ 0 ]' 的结果是一个字符串：

```
if ( ( searchResult.Properties [ "user" ].Count > 0 ) ) {

   profile.User = System.Text.Encoding.UTF8.GetString ( searchResult.Properties [ "user" ] [ 0 ].ToCharArray ().Select ( character => ( byte ) character ).ToArray () );

} 
```

关键是可以使用 LINQ 将字符串转换为字节 []：

```
.ToCharArray ().Select ( character => ( byte ) character ).ToArray () ) 
```

反过来：

```
.Select ( character => ( char ) character ).ToArray () ) 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2017-04-12T16:25:49.320

有谁知道为什么不这样做？

```
mystring.Select(Convert.ToByte).ToArray() 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-13T12:27:07.103

这已经得到了很多回答，但对我来说，唯一的工作方法是这个：

```
 public static byte[] StringToByteArray(string str)
    {
        byte[] array = Convert.FromBase64String(str);
        return array;
    } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-02-06T09:36:31.900

这对我有用，之后我可以将我的图片转换为我数据库中的 bytea 字段。

```
using (MemoryStream s = new MemoryStream(DirEntry.Properties["thumbnailphoto"].Value as byte[]))
{
    return s.ToArray();
} 
```

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2021-09-08T17:54:02.770

谢谢帕维尔·马加

你的贡献可以这样完成：

```
 public static byte[] ToByteArray(this string s) => s.ToByteSpan().ToArray();
    public static string FromByteArray(this byte[] bytes) => ToCharSpan(new ReadOnlySpan<byte>(bytes)).ToString();
    public static ReadOnlySpan<byte> ToByteSpan(this string str) => MemoryMarshal.Cast<char, byte>(str);
    public static ReadOnlySpan<char> ToCharSpan(this ReadOnlySpan<byte> bytes) => MemoryMarshal.Cast<byte, char>(bytes); 
```

# windows - Erlang 输出到文本文件

> ID：16072710
> 
> 赞同：1
> 
> 时间：2013-04-18T00:50:32.953
> 
> 标签：windows, erlang

我是 Erlang 的新手，我正在尝试找到一种简单的方法将 Erlang 命令结果输出到 Windows 命令行中的测试文件。这是我到目前为止所尝试的：

```
c:\Windows\Temp>erl example.erl "main" -e > output.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:43:13.990

[如果它是一个小脚本，也许你可以使用这里](http://erlang.org/doc/man/escript.html)描述的 escript

> escript 提供对运行短 Erlang 程序的支持，而无需先编译它们，并且提供了一种检索命令行参数的简单方法

那么你就可以得到你想要的东西以你想要的方式工作

```
escript myfunctions_tests > output.txt 
```

# javascript - 使用 javascript 从 parse.com 数据库显示图像的简单方法

> ID：16072713
> 
> 赞同：1
> 
> 时间：2013-04-18T00:50:49.200
> 
> 标签：javascript, html, image, parse-platform

我正在处理一个非常简单的页面，它只是从 parse.com 的表格中提取和显示图像。我对 javascript 没有太多经验，这可能从下面的代码中可以看出。

我需要图像按时间顺序显示。使用当前代码，它在大多数情况下都可以正常工作，但有一点问题。

有2个主要问题：

1）有时，随机地，一个特定的新图像可能不会出现在顶部，而是出现在两者之间的某个位置。

2) 此页面适用于 Firefox 和 Chrome，但不适用于 IE。

有没有更好的方法来实现这一点，或者我应该改变什么？任何帮助，将不胜感激。

页面来源-

```
<!doctype html>
<head>
  <meta charset="utf-8">

  <title>My parse images</title>
  <meta name="description" content="My Parse App">
  <meta name="viewport" content="width=device-width">
  <!-- <link rel="stylesheet" href="css/reset.css"> -->
  <link rel="stylesheet" href="css/styles.css">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.0.min.js"></script>
</head>

<body>

  <div id="main">

  <script type="text/javascript">
    Parse.initialize("xxxxxxxxxxxxxxxxxx", "xxxxxxxxxxxxxxxx");

    var config = {
    parseAppId: 'xxxxxxxxxxxxxxxxxxx',
    parseRestKey: 'xxxxxxxxxxxxxxxxxx',
    streamName: 'parse-demo'
};

var getPhotos = function() {
  var userImages = Parse.Object.extend("userImages");
  var query = new Parse.Query(userImages);

  query.find({
    success: function(results) {

      $('#photo-container').children().remove();

      for(var i=results.length - 1; i>=0; i--){

          var img = new Image();
          img.src = results[i].get("image").url;
          img.className = "photo";
          document.body.appendChild( img );

      } 

    },
    error: function(error) {
      alert("Error: " + error.code + " " + error.message);
    }
  });
};

  function refresh (timeoutPeriod){ 
    refresh = setTimeout(function(){window.location.reload(true);},timeoutPeriod); 
  }

$(document).ready(function() {

  getPhotos();

 // refresh(10000);

});

  </script>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:41:20.543

Internet Explorer 阻止混合内容。由于 Parse 的 JavaScript SDK 需要 SSL，因此您还需要使用 HTTPS 托管您的应用程序，以便从 IE 访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T07:11:56.487

嘿，你犯了一个错误。它不适合我。然后我发现它是 url() 而不是 url。修改为 img.src = results[i].get("image").url();

```
<!doctype html>
<head>
<meta charset="utf-8">

<title>My parse images</title>
<meta name="description" content="My Parse App">
 <meta name="viewport" content="width=device-width">
 <!-- <link rel="stylesheet" href="css/reset.css"> -->
  <link rel="stylesheet" href="css/styles.css">
  <script type="text/javascript"    src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
 <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.0.min.js">
 </script> 
 </head>

 <body>

  <div id="main">

   <script type="text/javascript">
      Parse.initialize("xxxxxxxxxxxxxxxxxx", "xxxxxxxxxxxxxxxx");

      var config = {
      parseAppId: 'xxxxxxxxxxxxxxxxxxx',
      parseRestKey: 'xxxxxxxxxxxxxxxxxx',
      streamName: 'parse-demo'
      };

      var getPhotos = function() {
      var userImages = Parse.Object.extend("userImages");
      var query = new Parse.Query(userImages);

      query.find({
      success: function(results) {

       $('#photo-container').children().remove();

       for(var i=results.length - 1; i>=0; i--){

        var img = new Image();
        img.src = results[i].get("image").url();
        img.className = "photo";
        document.body.appendChild( img );

      } 

     },
      error: function(error) {
      alert("Error: " + error.code + " " + error.message);
      }
    });
    };

   function refresh (timeoutPeriod){ 
         refresh = setTimeout(function(){window.location.reload(true);},timeoutPeriod); 
```

}

$(文档).ready(函数() {

获取照片（）；

// 刷新（10000）；

});

# batch-file - 如何在一个批处理文件中启动两台服务器（mysqld 和 Thin）？

> ID：16072715
> 
> 赞同：0
> 
> 时间：2013-04-18T00:51:29.987
> 
> 标签：batch-file

我想创建一个批处理文件来启动 MySQL 服务器 ( `mysqld`) 和 Rails Thin 服务器 ( `rails s thin`)。但只有 MySQL 启动，`rails s thin`不会：

```
@ECHO OFF
cd C:\path\to\app
CMD /C "mysqld --console"
REM exit  <-- with or without it
REM cd C:\path\to\app  <-- with or without it
CMD /C "rails s thin" 
```

我还尝试为此创建三个文件。主要的运行其他两个。也无济于事，只有 MySQL 运行。而且我需要在 Rails 之前启动 MySQL。Rails 需要运行 MySQL。如何编写这样的批处理？

**UPD：** [如何在 Windows 命令提示符下同时启动 2 个程序](https://stackoverflow.com/questions/6487766/how-to-start-2-programs-simultaniously-in-windows-command-prompt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:20:02.257

使用开始

例如

启动记事本.exe

启动计算.exe

如果你想一个接一个地运行一些测试，你可能需要编写自己的程序。

# sql - 为什么我在此查询中得到“不明确的列名”？

> ID：16072719
> 
> 赞同：1
> 
> 时间：2013-04-18T00:52:05.803
> 
> 标签：sql, sql-server-2008

我有以下查询：

```
$sql = "SELECT * FROM employee AS emp LEFT JOIN tr_bls_date AS bls ON emp.employee_id=bls.employee_id AND employee_id='".$id."'"; 
```

基本上，`emp`和`bls`表都有一个共同的`employee_id`字段。我正在通过员工 ID ( `$id`) 寻找某个员工。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T00:54:10.533

因为有两个表包含`employee_id`并且服务器很困惑它将在哪里搜索。要解决此问题，请添加源表，例如。

```
ON emp.employee_id = bls.employee_id AND 
   emp.employee_id = ?      // this will search on table employee 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T00:53:39.497

你正在做一个`left join`，所以你应该使用别名`emp`：

```
. . .
emp.employee_id=bls.employee_id AND emp.employee_id=. . . 
```

您应该使用 a 中第一个表的别名，`left join`因为您始终可以保证它具有值。

# objective-c - -[NSInvocation retainArguments] 是否复制块？

> ID：16072720
> 
> 赞同：7
> 
> 时间：2013-04-18T00:52:29.337
> 
> 标签：objective-c, objective-c-blocks, retain, nsinvocation

`NSInvocation`的`-retainArguments`方法在您不`NSInvocation`立即运行但稍后执行时很有用；它保留对象参数，因此它们在此期间保持有效。

众所周知，块参数应该被复制而不是保留。我的问题是，`-retainArguments`当它是块类型时，是否知道复制而不是保留参数？文档并未表明它确实如此，但这似乎是一件简单而明智的事情。

**更新：** iOS 7 中的行为似乎发生了变化。我刚刚对此进行了测试，在 iOS 6.1 及之前的版本中，`-retainArguments`没有复制块类型的参数。在 iOS 7 及更高版本中，`-retainArguments`不会复制块类型的参数。的文档`-retainArguments`已更新为说它复制了块，但没有说明行为何时改变（这对于支持旧操作系统的人来说真的很危险）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-22T17:44:29.263

它当然应该（尽管我自己没有测试过）。根据[文档](https://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/classes/nsinvocation_class/reference/reference.html)：

> 保留参数
> 
> 如果接收者尚未这样做，则保留接收者的目标和所有对象参数，并复制其所有 C 字符串参数和块。
> 
> *   (void)retainArguments
> 
> 讨论
> 
> 在调用此方法之前，argumentsRetained 返回 NO；之后，它返回 YES。
> 
> 为了提高效率，新创建的 NSInvocation 对象不保留或复制它们的参数，也不保留它们的目标、复制 C 字符串或复制任何关联的块。如果您打算缓存它，您应该指示 NSInvocation 对象保留其参数，因为否则可能会在调用调用之前释放参数。NSTimer 对象总是指示它们的调用保留它们的参数，例如，因为在计时器触发之前通常会有延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:14:25.337

不。

图像如果答案是肯定的，在哪里`NSInvocation`聪明到可以复制块，它应该做这样的事情：

```
for (/*every arguments*/) {
    if (/*arg is object. i.e. @encode(arg) is '@'*/) {
        if ([arg isKindOfClss:[NSBlock class]]) {
            arg = [arg copy]; // copy block
        } else {
            [arg retain];
        }
    }
} 
```

问题是`arg`在复制块时被修改，这不应该发生，因为这意味着 call`retainArguments`可能会更改`NSInvocation`.~~这将打破许多已经做出的假设。（即参数 get from`NSInvocation`应该与用于创建的参数相同`NSInvocation`）~~

* * *

**更新**

刚刚做了测试以确认答案是**否定**的，但我之前的观点是不正确的......

```
@interface Test : NSObject

@end

@implementation Test

- (void)testMethodWithBlock:(void (^)(void))block obj:(id)obj cstr:(const char *)cstr {
    NSLog(@"%p %p %p %@", block, obj, cstr, [block class]);
}

@end

@implementation testTests

- (void)test1 {
    __block int dummy;
    Test *t = [[Test alloc] init];
    NSMethodSignature *ms = [t methodSignatureForSelector:@selector(testMethodWithBlock:obj:cstr:)];
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:ms];
    void (^block)(void) = ^ {
        dummy++;    // stop this become global block
    };
    id obj = @"object";
    char *cstr = malloc(5);
    strcpy(cstr, "cstr");

    NSLog(@"%@", [ms debugDescription]);

    NSLog(@"%p %p %p %@", block, obj, cstr, [block class]);

    [invocation setSelector:@selector(testMethodWithBlock:obj:cstr:)];
    [invocation setArgument:&block atIndex:2];
    [invocation setArgument:&obj atIndex:3];
    [invocation setArgument:&cstr atIndex:4];

    [invocation invokeWithTarget:t];

    [invocation retainArguments];

    [invocation invokeWithTarget:t];

    free(cstr);
}

@end 
```

输出，ARC 禁用（并崩溃）：

```
2013-04-18 19:49:27.616 test[94555:c07] 0xbfffe120 0x70d2254 0x7167980 __NSStackBlock__
2013-04-18 19:49:27.617 test[94555:c07] 0xbfffe120 0x70d2254 0x7167980 __NSStackBlock__
2013-04-18 19:49:27.618 test[94555:c07] 0xbfffe120 0x70d2254 0x736a810 __NSStackBlock__ 
```

启用 ARC：

```
2013-04-18 19:51:03.979 test[95323:c07] 0x7101e10 0x70d2268 0x7101aa0 __NSMallocBlock__
2013-04-18 19:51:03.979 test[95323:c07] 0x7101e10 0x70d2268 0x7101aa0 __NSMallocBlock__
2013-04-18 19:51:03.980 test[95323:c07] 0x7101e10 0x70d2268 0xe0c1310 __NSMallocBlock__ 
```

如您所见，c 字符串被复制`retainArguments`但不是块。但是启用 ARC 后，问题应该会消失，因为 ARC 在某个时候为您复制了它。

# java - 显示 LinkedStack 的内容而不删除它们

> ID：16072721
> 
> 赞同：0
> 
> 时间：2013-04-18T00:52:37.920
> 
> 标签：java

我是java初学者，目前正在使用Nodes。我想知道是否有一种方法可以显示列表的内容而不必使用 .getNext 方法，因为一旦我使用它，它就会删除节点上的元素，并且实际上会删除顶部的节点。我在这段代码中尝试做的是使用输入将两个字符串元素存储在新的两个节点中，然后使用方法*proveTitle*来证明这些元素在列表中。一旦我这样做了，我会确保元素仍然完好无损并使用 toString 方法检查列表。**请注意，由于某些奇怪的原因，在 Book 类中，如果我将 <> 放在 T 周围，则除了类和实现的类之外，T 不会显示。**

继承人的代码：

# 我的节点类：

```
public class myNode<T> 
{

private T data;
private myNode next;

public myNode(T _data)
{
data = _data;
}
public myNode(T _data, myNode _next)
{
data = _data;
next = _next;
}

public T getData()
{
return data;    
}

public void setData(T _data)
{
data = _data;    
}

public myNode getNext()
{

return next;    
}

public void setNext(myNode _next)
{
 next = _next;   
}

} 
```

# 接口类：

```
public interface myInterface<T> 
{
   public void pushTitle(T data);
   public T pop();
   public T peek();
   public String toString();
   public boolean isEmpty();
   public int size();
   public myNode getNode();
} 
```

# Book 类，其中包含方法

公共类 Book 实现 myInterface

```
{
 private int count;
 private T author;
 private T title;
 private int stock;

 private myNode<T> top;

 public Book()
 {
     count = 0;
     top = null;
 }

@Override
 public myNode getNode()
 {
 return top;
 }

 @Override
 public void pushTitle(T title)
 {
 myNode<T> current = new myNode<>(title, top);
 current.setNext(top);
 top = current;
 count++;
 }

 public void proveTitle(T title)
 {
  T result;

  myNode<T> current = top;   

  if(title.equals(current.getData()))
  {
  result = current.getData();
  System.out.println("The title " + "'" + result + "'" + " exist."); 
  top = top.getNext();

 }
 }

 @Override
 public T pop()
 {
 T result;
 if(count == 0 || top == null )
 {
     System.out.println("List is empty");
 }
 System.out.println("The element on top is:"  +  top.getData());
 result = top.getData();
 top = top.getNext();

 count--;
 return result;

 }
 @Override

 public T peek()
 {
     System.out.println("Element on top is: " + top.getData());
     return top.getData();
 }
 @Override
 public boolean isEmpty()
 {
     if(top == null)
     {
     System.out.println("The list is empty");
     }
     else
     {
       System.out.println("The list is not empty." + "It has" + count + "elements");    
     }

  return top == null;   
 }
 @Override
 public int size()
 {
     System.out.println("The size of the list is" + count);
 return count;    
 }
 @Override
 public String toString()
 {
  String result = "";
  myNode current = top;
  System.out.println("Top");
  while(current != null)
  {
  result += ("[" + current.getData() + "]\n");
  current = current.getNext();
  }
  return result + "Bottom";
 }

} 
```

# 主类：

```
package node;
import java.util.Scanner;

public class myDriver 
{
    public static void main(String[]args)
    {
    Scanner input = new Scanner(System.in);  

    Book<String> title = new Book<>();

    myNode<String> current;
    current = title.getNode();
    String push;
    String push2;

    System.out.println("Enter title of book 1");
    push = input.nextLine();
    title.pushTitle(push);

    System.out.println("Enter title of book 2");
    push2 = input.nextLine();
    title.pushTitle(push2);

    title.proveTitle(push);
    title.proveTitle(push2);

    System.out.println(title.toString());

}
} 
```

# 输出：

```
run:
Enter title of book 1
Tiger
Enter title of book 2
crossed
The title 'crossed' exist.
Top
[Tiger]
Bottom
BUILD SUCCESSFUL (total time: 7 seconds) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:56:09.147

您似乎正在尝试`List`使用 a 来实现 a `Stack`。这些是非常不同的数据结构。您尝试做的事情在`List`. 在一个`Stack`它要求你有第二个堆栈。当您从当前堆栈中弹出每个对象时，您将其推入第二个堆栈。

如果顺序无关紧要，您可以执行一次并切换到使用第二个堆栈。如果顺序确实很重要，您将不得不反转该过程以取回原始堆栈。

另请注意，更好的方法可能是只使用`List`.

# python - 使用 httplib/http.client 获取响应编码

> ID：16072722
> 
> 赞同：2
> 
> 时间：2013-04-18T00:52:39.540
> 
> 标签：python, python-2.7, character-encoding, python-3.x, httplib

如何使用 httplib/http.client 获取传入响应的编码？

我可以使用 getheaders() 将其视为 Content-Type 的一部分，但我认为解析它是一种不好的做法，因为它可能采用几种不同的格式，并且您应该在 httplib/http.client 中使用特定方法反而：

```
>>> r = h.getresponse()
>>> r.getheaders()
[('transfer-encoding', 'chunked'), ('expires', 'Tue, 11 Oct 1988 22:00:00 GMT'), ('vary', 'Accept-Encoding'), ('server', 'nginx/1.2.6'), ('connection', 'keep-alive'), ('pragma', 'no-cache'), ('cache-control', 'no-cache, must-revalidate'), ('date', 'Thu, 18 Apr 2013 00:46:18 GMT'), ('content-type', 'text/html; charset=utf-8')] 
```

获取传入编码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:56:56.440

不是直接的答案，但也许你会发现这很有用。使用[请求](http://docs.python-requests.org/en/latest/)库。

人们停止构建自己的 http 库是有原因的。事实上，httplib 甚至说 use `urllib`which uses `http`library。反过来，请求使用 urllib3。

```
>>> import requests
>>> r = requests.get("http://bitbucket.org")
dir>>> dir(r)
['__bool__', '__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__nonzero__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_content', '_content_consumed', 'apparent_encoding', 'close', 'connection', 'content', 'cookies', 'encoding', 'headers', 'history', 'iter_content', 'iter_lines', 'json', 'links', 'ok', 'raise_for_status', 'raw', 'reason', 'request', 'status_code', 'text', 'url']
>>> r.encoding
'utf-8' 
```

# html - Css 兄弟 (~) 选择器不适用于选中的属性

> ID：16072723
> 
> 赞同：8
> 
> 时间：2013-04-18T00:52:40.367
> 
> 标签：html, css

为什么我下面的 CSS 对我不起作用？谁能给我建议。

```
#slide1:checked ~ #inner { margin-left: 0;}
#slide2:checked ~ #inner { margin-left: -800px;}
#slide3:checked ~ #inner { margin-left: -1600px;} 
```

下面的CSS确实有效。我不知道从这里去哪里。

```
#slide1:checked ~ #broadControl label:nth-child(1),
#slide2:checked ~ #broadControl label:nth-child(2),
#slide3:checked ~ #broadControl label:nth-child(3){
    background: #333;
    border-color: #333; !important;
} 
```

**HTML：**

```
<div id="broadcast">
    <div id="overflow">
        <div id="inner">

            <article>
                <div class="info"></div>
                <div id="pic1"></div>
                <!--img src=""-->
            </article>
            <article>
                <div class="info"></div>
                <div id="pic2"></div>
                <!--img src=""-->
            </article>
            <article>
                <div class="info"></div>
                <div id="pic3"></div>
                <!--img src=""-->
            </article>

        </div>
    </div>
</div>

<!-- Broadcast controls -->
<input checked type="radio" name="slider" id="slide1">
<input type="radio" name="slider" id="slide2">
<input type="radio" name="slider" id="slide3">
<div id="broadControl">
    <label for="slide1"></label>
    <label for="slide2"></label>
    <label for="slide3"></label>
</div> 
```

我正在尝试使用纯 CSS 进行幻灯片转换，以了解更多 CSS。

但是我已经在这里呆了3天了。

我不知道为什么它不起作用。

如果您有任何想法，请向我提出建议。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T00:56:22.257

```
#slide1:checked ~ #broadControl label:nth-child(1) 
```

该`~`运算符仅适用于元素之后的元素。在这种情况下，在标签元素之后`#slide1`搜索，它不能在它之前搜索。`#broadControl``#slide1`

**小提琴示例：http:**
[//jsfiddle.net/9vxYJ/](http://jsfiddle.net/9vxYJ/)

你会在那个小提琴中看到我把你的`#broadcast`部分移到了`broadcast controls`.

另一个问题是`~`兄弟*选择器*，这意味着它只能找到同一级别的元素。但是您可以解决此问题，因为`#broadcast`IS 与 etc. 处于同一级别`#slide1`，您可以埋入`#inner`，如下所示：

```
#slide1:checked ~ #broadcast > #overflow > #inner { margin-left: 0;}
#slide2:checked ~ #broadcast > #overflow > #inner { margin-left: -800px;}
#slide3:checked ~ #broadcast > #overflow > #inner { margin-left: -1600px;} 
```

# sql - 从 Excel 运行现有的 .sql 文件

> ID：16072727
> 
> 赞同：0
> 
> 时间：2013-04-18T00:52:51.650
> 
> 标签：sql, sql-server, excel, excel-2010, export-to-excel

我有一个包含`select`语句的 .sql 文件。有没有办法在 Excel 中直接导入/运行此查询？我可以在现有数据库连接的“连接属性”中编辑“命令文本”，但这需要复制和粘贴 .sql 代码。浏览和选择我想要的文件会很有帮助。

我正在使用 SQL Server 2008 R2 和 Excel 2010。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T22:22:42.233

我会先将它读入一个变量，然后你可以在查询中使用它。使用这样的东西：

```
strPath = "P:\...sql"
Open strPath For Binary As #1
MyData = Space$(LOF(1))
Get #1, , MyData
Close #1 
```

现在您在 MyData 变量中有查询。在尝试运行它之前，您可能需要重新格式化它以删除换行符。

# vim - 在 Windows 上正确地将路径从 zsh (cygwin) 传递到 vim

> ID：16072736
> 
> 赞同：0
> 
> 时间：2013-04-18T00:53:36.473
> 
> 标签：vim, zsh

我有以下别名/函数`.zshrc`以文件名作为参数打开 gvim。

```
vim() { 
    if [[ $# -ge 1 ]]; then
        gvim "$*";
    else 
        gvim;
    fi
} 
```

它可以很好地打开文件`~`，但是当我尝试传递路径时，它不起作用。例如，从 zsh 我说`vim ~/dir/test1.txt`（一个存在于 上的文件`C:\Users\myname\dir\test1.txt`）和 gvim 打开以下文件`\c\Users\myname\dir\test1.txt`[NEW DIRECTORY] 不存在？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:27:26.047

[cygpath](http://cygwin.com/cygwin-ug-net/using-utils.html)在这里可能会有所帮助，如下所示：

```
gvim `cygpath -w $*` 
```

# android - 试图在android中为我的文本设置颜色

> ID：16072738
> 
> 赞同：0
> 
> 时间：2013-04-18T00:53:46.340
> 
> 标签：android, colors

我正在尝试在 android 中为我的文本设置颜色。每次我启动我的应用程序时，它都会关闭。这是我在 color.xml 文件中的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
<color name="background_color">#006400</color>
<color name="app_text_color">#FFE4C4</color> 
```

这是我的 MainActivity 类中的内容：

```
int textColor = getResources().getColor(R.color.app_text_color);

        TextView helloText = (TextView)findViewById(R.string.hello_world);

        helloText.setTextColor(textColor); 
```

这是布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/hello_world"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world"
         />  

</RelativeLayout> 
```

原木车：

```
04-17 21:00:39.290: E/AndroidRuntime(9986):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1670) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:56:26.877

代替

```
TextView helloText = (TextView)findViewById(R.string.hello_world); 
```

您必须在 findViewByID 中使用一些 ID，例如

```
TextView helloText = (TextView)findViewById(R.id.your_textview_id); 
```

这里 your_textview_id 是布局 xml 中 textview 的 id。

```
<TextView
    android:id="@+id/your_textview_id"
     .............
      ......... 
```

我刚试过这个，它对我有用：

```
TextView helloText = (TextView)findViewById(R.id.hello_world);

helloText.setTextColor(getResources().getColor(R.color.app_text_color)); 
```

# cuda - __CUDA_ARCH__ 宏的行为

> ID：16072740
> 
> 赞同：5
> 
> 时间：2013-04-18T00:53:46.747
> 
> 标签：cuda, gpu, nvidia

在主机代码中，宏似乎`__CUDA_ARCH__`不会生成不同的代码路径，而是会生成与当前设备的代码路径完全相同的代码。

但是，如果`__CUDA_ARCH__`在设备代码中，它将为编译选项 (/arch) 中指定的不同设备生成不同的代码路径。

谁能确认这是正确的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T02:22:12.907

`__CUDA_ARCH__`当在设备代码中使用时，将携带一个定义的数字，反映当前正在编译的代码架构。

它不打算在主机代码中使用。从nvcc[手册](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#virtual-architecture-identification-macro)：

> 该宏可用于 GPU 函数的实现，以确定当前正在为其编译的虚拟架构。主机代码（非 GPU 代码）不能依赖它。

因此，在主机代码中的使用`__CUDA_ARCH__`是未定义的（至少由 CUDA 定义）。正如@tera 在评论中指出的那样，由于宏在主机代码中未定义，它可用于区分主机/设备路径，例如，在`__host__ __device__`函数定义中。

```
#ifndef __CUDA_ARCH__
//host code here
#else
//device code here
#endif 
```

# c# - 使用 html.encode 查询字符串参数

> ID：16072748
> 
> 赞同：2
> 
> 时间：2013-04-18T00:55:48.133
> 
> 标签：c#, asp.net, architecture, html.encode

在将查询字符串参数传递给业务层之前使用 html.encode 是一种好习惯吗？该场景与 asp.net 框架有关，我想知道在从键中读取值之前是否必须对查询字符串的内容进行编码？

我知道我们总是可以将内容转换为预期的数据类型，但我的问题是从设计的角度来看。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:16:59.960

我会说是的。至少*你*想要，因为浏览器可能会得到错误的编码。一个符号可能显示为另一个符号，或者显示为未知字符。如果浏览器出错，它甚至可能与前面的字符混淆。

更复杂的原因包括它有助于防止 HTML 注入。

为什么需要使用 HTML 编码的简短解释很简单，一组字符在 HTML 中意味着特殊的东西，编码将有助于在所有浏览器中优雅地处理脱字符号和 & 号等符号。

# c++ - diab 5.7 编译器中的逻辑与运算符返回非布尔类型

> ID：16072750
> 
> 赞同：1
> 
> 时间：2013-04-18T00:56:16.383
> 
> 标签：c++

当使用 diab c++ 编译器 (dplusplus) 编译以下代码时，它会在第三行生成转换警告。它可以通过将 (&&) 运算符的结果转换为 bool 以外的任何值来解决。

代码：

```
bool first = 1;
bool second = 1;
bool ret = (first && second); //generates compile warning 
```

错误：

> 警告：（etoa:1643）：发现缩小或有符号到无符号的类型转换：int 到 unsigned char

我证实没有任何东西将 bool 定义为另一种类型。这看起来像编译器问题，还是我可能缺少其他可能导致这种情况的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:15:09.047

[Wind River 的网站](http://www.windriver.com/products/development_suite/wind_river_compiler/)表明 Diab 编译器可以编译 C 或 C++。

在 C 中，`&&`运算符产生一个类型为 的结果`int`，其值为`0`or `1`。这与您看到的警告一致。

从 1990 年 ISO 标准开始，C 没有内置`bool`类型。通常定义`bool`为 typedef。从消息中可以看出，它`bool`是 的 typedef `unsigned char`，可能在某些标头中。1999 ISO C 标准添加了一个新的预定义布尔类型，称为`_Bool`; 标识符`bool`被定义`<stdbool.h>`为扩展为 的宏`_Bool`。但如果`<stdbool.h>`不包括在内，`bool`可以用其他方式定义。

在 C++ 中，`&&`产生一个`bool`值为`false`or的类型的结果`true`，并且`bool`是一个独特的基本类型。至少从 1998 年 ISO C++ 标准开始就是这种情况。

我强烈怀疑您收到此警告是因为您将代码编译为 C 而不是 C++。不太可能的可能性是 Diab 编译器不完全符合 C++ 标准。它可能有办法告诉它更紧密地符合。

我没有使用过 Diab 编译器。通常，您可以通过使用特定的文件扩展名（通常`.c`用于 C 和`.cpp`C++）或使用不同的命令或两者兼而有之来控制正在编译的语言。

请查阅编译器的文档以了解如何将其作为符合标准的 C++ 编译器来调用。

作为一个实验，在更改调用编译器的方式之前，您可以尝试添加一个声明：

```
int class; 
```

到您的源文件。这在 C 中是合法的，但在 C++ 中是语法错误（因为`class`是 C++ 关键字）。

**更新：**

OP 说他肯定是编译为 C++，而不是 C。但警告消息暗示`&&`yield `int`，并且`bool`与`unsigned char`.

警告并不直接表明编译器不符合要求；编译器可以警告他们喜欢的任何事情。但是这个警告的内容确实暗示了一个编译器错误，或者至少是一个不符合任何 C+ 的编译器

任何符合标准的 C++ 编译器都必须为此程序生成诊断。你的编译器是做什么的？（请*不要*添加任何`#include`指令。）

```
int main() {
    class dummy { };         // Just to make sure it's C++
    bool b;
    unsigned char c;
    bool* pb = &c;           // Invalid conversion
    unsigned char* pc = &b;  // Invalid conversion
} 
```

当你编译和执行这个程序时，你会得到什么输出？

```
#include <iostream>
int main() {
    std::cout << "__cplusplus = " << __cplusplus << "\n";
} 
```

# java - 为什么我的较小方法给了我一个错误

> ID：16072751
> 
> 赞同：-3
> 
> 时间：2013-04-18T00:56:21.013
> 
> 标签：java, return, this, geometry

这是我的第一堂课，叫做课堂圈：

```
public class circle
{
   //circle class begins
   //declaring variables 
   public double circle1;
   public double circle2;
   public double circle3;
   public double Xvalue;
   public double Yvalue;
   public double radius;
   private double area;

   //Constructor
   public circle(int x,int y,int r)
   {//constructor begins
       Xvalue = x;
       Yvalue = y;
       radius = r;
   }//constructor ends

   //method that gets the area of a circle       
   public double getArea ()
   {//method getArea begins

      area = (3.14*(this.radius * this.radius));
      return area;
   }//getArea ends

   public static smaller (circle other)
   {
      if (this.area > other.area)
      {
         return other;
      else 
      {
         return this;
      }

      //I'm not sure what to return here. it gives me an error( I want to return a circle)
    }
}//class ends
} 
```

这是我的测试类：

```
public class tester
{//tester begins
  public static void main(String args [])
  {

        circle circle1 = new circle(4,9,4);
        circle circle2 = new circle(4,7,6);
        c3 = c1.area(c2);

        System.out.println(circle1.getArea());
        //System.out.println(
  }
}//class tester ends 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:01:04.763

该`smaller`方法应该有一个返回类型。关键字也`this`不能在`static`方法中使用。即该方法将无法访问`Circle`. 考虑到方法名称的含义，这是有道理的`smaller`——它将当前实例`Circle`与传入的另一个实例进行比较。

```
public Circle smaller(circle other) {
   if (this.area > other.area) {
    return other;
   } else {
    return this;
   }
} 
```

要使用：

```
Circle smallerCircle = circle1.smaller(circle2); 
```

`Aside:`Java 命名约定表明类名以*大写*字母开头`Circle`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:01:43.093

进行操作时未分配区域：

```
 c3 = c1.area(c2); 
```

您需要先调用 GeArea()，然后才能使用类的 area 字段。

例如：

```
circle circle1 = new circle(4,9,6);

circle circle2 = new circle(4,7,6);
circle2.area = c1.getArea(); 
```

那是假设您尝试分配的 c3 var 已被实例化为一个圆圈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T01:01:44.813

你只是忘记了一个右括号

```
if (this.area > other.area)
{
    return other;
} //You forgot this brace and confused the compiler
else 
{
    return this;
} 
```

# xcode - 无法识别的选择器发送到类错误

> ID：16072756
> 
> 赞同：0
> 
> 时间：2013-04-18T00:56:51.087
> 
> 标签：xcode

所以我有一个名为 IAP 的类，带有 .h 和 .m 文件。.h 看起来像这样：

```
#import <UIKit/UIKit.h>
#import <StoreKit/StoreKit.h>

@interface IAP : UIViewController <SKProductsRequestDelegate,      SKPaymentTransactionObserver, UIAlertViewDelegate>

+(void)myIAPWithItem;

@end 
```

但是当我调用函数 myIAPWithItem 时，我得到了错误。我这样称呼它：

```
[IAP myIAPWithItem]; 
```

还有一个项目参数，我只是把它拿下来测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:01:54.157

您的 .m 文件中有实现吗？

```
// in IAP.m

@implementation IAP

+(void)myIAPWithItem {
    // do something
}

@end 
```

# google-drive-api - 无法通过下载 URL 检索文件内容

> ID：16072758
> 
> 赞同：2
> 
> 时间：2013-04-18T00:57:08.923
> 
> 标签：google-drive-api

大约一个小时后，我无法通过下载 URL 属性检索文件内容。

每次我尝试获取它时，API 都会回答 401（未经授权的错误）。

这是使用的代码：[https](https://gist.github.com/arnaudbreton/5409015) ://gist.github.com/arnaudbreton/5409015 凭据存储在 GAE 数据存储中并成功检索/刷新。对文件端点的第一次调用正在工作，但对下载内容的第二次调用无效。

今天早上它正在工作。到目前为止，我尝试了不同的事情： - 撤销客户端密码（在另一个线程中作为解决方案找到） - 创建一个新客户端进行测试 - 断开我的 APP 与 Drive 的连接，再次接受它

似乎没有什么能解决我的问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:12:04.400

修复/回滚正在进行中，应该很快就会恢复正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T12:45:32.833

您可以使用

```
resp.alternateLink;
resp.webContentLink; 
```

一天前我被困在同一个问题上，使用 downloadUrl 获取内容，但使用 webContentLink 获取。

```
var request = gapi.client.drive.files.list();
                request.execute(function (resp) {

resp.alternateLink;
    resp.webContentLink;
}); 
```

# jquery - 如何在 webmatrix（ASP.NET 网页）中使用 jQuery 文件上传？

> ID：16072762
> 
> 赞同：2
> 
> 时间：2013-04-18T00:57:32.430
> 
> 标签：jquery, file-upload, webmatrix

我想在我的网站[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)上使用这个 jQuery 文件上传，根据文档，我需要创建自己的文件上传处理程序，我想知道是否有人有在 webmatrix 网站中使用 jQuery 文件上传有什么经验吗？

而且，我找不到创建自己的文件上传处理程序所需的信息。如果有人可以提供帮助，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:15:13.823

我可以帮助你，我为我创建的网站创建一个文件（图像）上传器。

CSHTML 部分 (sub_archivos.cshtml)：

```
@{
    if (IsPost)
    {
        var fileName = Path.GetFileName(Request.Files["archivo"].FileName);
        var fileSavePath = Server.MapPath("~/Temp/" + fileName);
        try
        {
            Request.Files["archivo"].SaveAs(fileSavePath);

            <img src="~/Temp/@fileName" /> @*you could comment this line...it was the succesful response...an image preview*@

        }
        catch (Exception)
        {
            <text>Error en la subida del archivo</text> @*you could comment this line...error in the uploading*@
        }
    }
} 
```

JQUERY/JAVASCRIPT 部分：

```
function sube(archivo) {
  var primer_archivo = archivo.files[0];
  var data = new FormData();
  data.append('archivo', primer_archivo);
  $.ajax({
    url: "@Href("../../operaciones/sube_archivos.cshtml")",
    type: "POST",
    contentType: false,
    data: data,
    processData: false,
    cache: false,
    success: function (response) {

      //here I put the response ....the image preview or the error message
      $(archivo).parent().next('.imagen_cargada').html(response);

      //here I get the file name and I add it to some specific div
      $(archivo).parent().next().next('.nombre_imagen').val($(archivo).val().split('\\').pop());
    }
  });
} 
```

HTML部分：

```
 <form method="post" enctype="multipart/form-data">
      <input type="file" name="archivo" onchange="sube(this)" />
    </form> 
```

祝你好运，如果有什么不清楚的地方告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T12:49:55.507

Blueimp 是一个痛苦的插件......我建议你使用[这个](http://malsup.com/jquery/form/)插件来上传表单和文件。它的配置更简单，而且非常灵活。blueimp 的问题不仅仅是让插件准备好使用。在 asp.net mvc 和 asp.net webmatrix 上的服务器端也很痛苦。

# c# - C# 解决方案设计从复杂计算中显示 Web 内容？

> ID：16072763
> 
> 赞同：0
> 
> 时间：2013-04-18T00:57:34.350
> 
> 标签：c#, service, web, date-arithmetic

我需要处理复杂的计算以生成报告并显示为网页。它必须定期运行以根据新输入重新计算公式。

我有几个想法： 1\. 创建一个 Web 服务来处理和缓存内容，然后创建一个 Web 应用程序来定期通过 HTTP 请求内容。2\. 创建服务以定期输出文件，然后创建 Web 应用程序来读取文件。3\. 创建一个 Web 应用程序，其中有一个任务定期运行以生成输出，然后创建一个网页来显示它。

我已经阅读了一些旧线程，但我想知道哪种方法更好，利弊，或者是否有更新的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:20:10.833

吉特！

我做了一个和你类似的程序。任务是在用户要求应用程序执行时生成报告。通常是日报，但计算需要几分钟，因为记录太多，公式也很复杂。

我们创建了一个周期性线程来检查是否是计算的时间。因此该线程将计算并将条件和结果存储到 SqlServer 中。当用户点击按钮查看每日报告时，该报告在 DB 中，应用程序只需从 DB 中读取出来，并显示在屏幕上。

让我们讨论您的解决方案：解决方案 1 和 2 看起来不错，但解决方案 3 与 DesignPatterns 不匹配，因为所有任务都放在一个应用程序中。

希望一切顺利！

```
 David Liu 
```

# javascript - Chrome 扩展整页或浏览器中的 Chrome 打包应用程序

> ID：16072765
> 
> 赞同：0
> 
> 时间：2013-04-18T00:57:49.310
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

我想知道是否有一种方法可以创建一个 chrome 打包的应用程序或扩展程序，我可以在其中在浏览器中打开一个相当复杂的 GUI（类似于如果您访问 chrome 的设置或扩展程序页面，您基本上可以在其中获得一个选项卡但这是内置在浏览器中的）。我知道您可以使用打包的应用程序启动一个新窗口，或者使用 chrome 扩展程序进行“弹出”。但本质上，我希望能够启动一个新的 chrome 实例，其中包含我的应用程序，就像 chrome:// 页面一样。这可能吗？

我知道已经提到了一些变通方法，例如使用 chrome 扩展程序打开一个选项卡，然后该选项卡将与后台应用程序通信，但这似乎太过分了。有什么更优雅的方法可以做到这一点吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:41:52.567

单击应用程序按钮时，您可以打开一个临时页面，该页面是一个空页面，将使用 chrome.tabs api 打开一个带有您想要的应用程序页面的新选项卡

```
chrome.tabs.create({url:'http://www.google.com/'}); 
```

当然，您将替换 url 将使用所需页面的完全限定路径

```
chrome.extension.getURL('Relative app path here') 
```

然后你可以打电话

```
history.back(); 
```

返回到新标签页。

# html - 图像阻碍了我的导航栏和上面的图像。基本 HTML/CSS 问题

> ID：16072768
> 
> 赞同：1
> 
> 时间：2013-04-18T00:58:33.077
> 
> 标签：html, css, image

我的网站上有一张图片，我想将其设置为自己的实体，我可以自由地调整和调整而不会与其他元素发生冲突，我有它的 CSS 为

```
#backgroundImage{
position:absolute;
float:right;    
top:0;
left:50%;
} 
```

使用固定和绝对位置会导致图像与导航栏堆叠级别，但任何其他位置都会导致导航栏在我正在使用的图像下方跳转（这是月亮的图片）它正在切断图像，文本，但它位于导航栏的后面。

我尝试过的事情：把它放在一个我不知道这会如何工作，我尝试将它浮动包含在一个 div 中。

我还阅读了一些关于将它放在 z 或 y 轴上的评论，但我不知道这意味着什么，我仍在阅读它或试图找到一些东西来帮助我理解它。

这是一个学校项目，我在这个领域还是很基础的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:09:23.913

使用`z-index`一个`-1`：

```
#backgroundImage {
    z-index: -1;
} 
```

此外，不建议您使用驼峰式命名元素 - 改用破折号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:14:48.577

如果您希望元素完全独立，请尝试使用 html 中的元素。但是，它不一定会留在后台。希望这就是你要找的

# android - Android Webview - 以编程方式更改特定网页的方向而无需重新加载

> ID：16072790
> 
> 赞同：0
> 
> 时间：2013-04-18T01:01:26.193
> 
> 标签：android, android-layout, android-webview

我正在尝试查看如何更改某个页面上的 webview，以便如果该页面包含视频，他们可以在横向模式下观看。我希望它不重新加载 webview，但允许该页面旋转。怎么可能呢？甚至不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:29:14.420

我没有这样做，但我认为它应该按照你的意愿工作。

1.  需要时从您的代码更改方向
2.  因为您不想中断内容，所以在方向更改时禁用活动重新启动

3.  从代码使用改变方向

    `setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE)`

    `setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);`

4.  并防止您的活动在方向更改时重新启动，请在清单中使用以下内容

    `android:configChanges="keyboardHidden|orientation|screenSize"`

# java - 如何将输出通过管道传输到文件末尾？（Java，终端）

> ID：16072791
> 
> 赞同：2
> 
> 时间：2013-04-18T01:01:29.443
> 
> 标签：java, terminal, pipe

我目前在命令行中输入：

```
javac *.java && java NeuralNetApp > xorMomentumTest.txt 
```

这会擦除*xorMomentumTest.txt*中的所有内容，然后用程序的输出填充它。

我想要它做的是将输出添加到*xorMomentumTest.txt*的末尾，而不是替换它的内容，这样我就可以多次运行程序并保留所有输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:03:29.020

尝试这个：

```
javac *.java && java NeuralNetApp >> xorMomentumTest.txt 
```

这更像是一个操作系统问题，而不是 Java 问题。我假设你有一个 unix 或 linux 操作系统。

# c# - OpenTK Picking 样本崩溃

> ID：16072792
> 
> 赞同：0
> 
> 时间：2013-04-18T01:01:30.177
> 
> 标签：c#, opentk

我正在查看随 OpenTK 安装提供的 OpenTK (opentk-2010-10-06.exe) 示例代码。我有兴趣选择示例，但它崩溃了。但其他样本正在工作。问题是什么？有没有人遇到过这个问题。请帮忙

我无法在此处发布图片，但例外是关于 OpenTK.Graphics.GraphicsErrorException

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T05:40:41.893

该线程给出了答案（opentk.com/node/2913）。如果你想开发一个sample/或者tryout的picking机制，选择redbook sample（来自Tao），改成OpenTK命令，非常简单直接:-)

# vb.net - 使用 Vb.Net 的 KINECT 项目中的 ScaleTo 错误

> ID：16072798
> 
> 赞同：0
> 
> 时间：2013-04-18T01:01:53.963
> 
> 标签：vb.net, kinect

我仍在为我的问题寻找解决方案...

我需要在 ScaleTo() 方法代码中解决我的项目问题：

Dim scaledJoint = joint.ScaleTo(ScreenMaxX, ScreenMaxY, 0.5F, 0.2F)

错误提示“‘ScaleTo’不是‘Microsoft.Research.Kinect.Nui.Joint’的成员”

请我需要一个解决方案...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:42:52.263

`ScaleTo`是[Coding4Fun Kinect Toolkit](http://c4fkinect.codeplex.com/)的一部分。它不是标准 Kinect SDK 的一部分。

此外，`Microsoft.Research.Kinect.Nui`命名空间代表 SDK 的一个非常旧的版本。自 SDK 1.5 和现在的 SDK 1.7 发布以来，发生了几项重大变化。您不应该学习这种过时的 SDK 版本。

# javascript - 如果第一个隐藏字段有内容，则将复选框值添加到另一个隐藏输入字段

> ID：16072800
> 
> 赞同：4
> 
> 时间：2013-04-18T01:02:12.247
> 
> 标签：javascript, jquery, html

我有一组 4 个复选框。

当任何两个被选中时，它们的值就会被复制到两个隐藏的输入字段中。

第一个选中的复选框值转到第一个输入`id="checkedBox1"`

如何获取第二个选中的复选框值以转到第二个隐藏的输入字段`id="checkedBox2"`

我使用下面的 JavaScript 函数将值放入各个复选框的每个输入中，但无法弄清楚如何遍历所有四个复选框的列表并将两个选中的复选框放入每个单独的输入字段中。

**复选框：**

```
<input type="checkbox" value="test1" id="a" name="one"><label>Test11</label>
<input type="checkbox" value="test2" id="b" name="one"><label>Test12</label>
<input type="checkbox" value="test3" id="c" name="one"><label>Test13</label>
<input type="checkbox" value="test4" id="d" name="one"><label>Test14</label>

  <input type="hidden" value="" id="checkedBox1">
  <input type="hidden" value="" id="checkedBox2">

<script>
function populate() {
  var checkboxes = document.getElementsByName('one');
  var ip1 = document.getElementById('checkedBox1');
  var ip2 = document.getElementById('checkedBox2');

  // clear current values
  ip1.value = ip2.value = '';

  var first = false;
  var second = false;

  // Loop over checkboxes,stop when found 2 that are checked
  for (var i=0,iLen=checkboxes.length; i<iLen || !(first && second); i++) {

  if (checkboxes[i].checked) {

  if (!first) {
    ip1.value = checkboxes[i].value;
    first = true;

  } else if (!second) {
    ip2.value = checkboxes[i].value;
    second = true;
  }
  }
  }
  }

 $('input[type="checkbox"]').on('change', function() {
 populate();
 }).change();
 </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T01:16:28.100

您可以尝试纯 JS，但我会使用表单属性访问而不是*getElementsByName*或*getElementById*：

```
function populate() {
  var checkboxes = document.getElementsByName('one');
  var ip1 = document.getElementById('checkedBox1');
  var ip2 = document.getElementById('checkedBox2');

  // clear current values
  ip1.value = ip2.value = '';

  var first = false;
  var second = false;

  // Loop over checkboxes,stop when found 2 that are checked
  for (var i=0,iLen=checkboxes.length; i<iLen || !(first && second); i++) {

    if (checkboxes[i].checked) {

      if (!first) {
        ip1.value = checkboxes[i].value;
        first = true;

      } else if (!second) {
        ip2.value = checkboxes[i].value;
        second = true;
      }
    }
  }
} 
```

### 编辑

感谢 Mal，每次都添加了一行来清除隐藏输入的值。

# php - 限制从数组 Codeigniter 回显的文本大小？

> ID：16072801
> 
> 赞同：0
> 
> 时间：2013-04-18T01:02:15.430
> 
> 标签：php, codeigniter, codeigniter-2

在我的 CI 应用程序中，我正在显示数组中的文本：

```
<?php echo $music[0]['title']?> 
```

限制文本大小的最简单方法是什么我想根据字符或像素大小来限制文本。我尝试使用 CSS，但它只适用于实际文本。任何帮助都是适当的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:17:35.083

```
 //IN CONTROLLER
    $this->load->helper('text');

    //In view file
    //For Word Limiter use word_limiter($str, $limit = 100, $end_char = '&#8230;');
    //FOr Character character_limiter($str, $n = 500, $end_char = '&#8230;');
    Example:
    <?php echo word_limiter($music[0]['title'],30); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:05:24.503

一个简单的截断函数可以工作，如下所述：[http ://www.the-art-of-web.com/php/truncate/#.UW9GjLW9uSo](http://www.the-art-of-web.com/php/truncate/#.UW9GjLW9uSo)

```
// Original PHP code by Chirp Internet: www.chirp.com.au
// Please acknowledge use of this code by including this header.
function myTruncate($string, $limit, $break=".", $pad="...")
{
  // return with no change if string is shorter than $limit
  if(strlen($string) <= $limit) return $string;

  // is $break present between $limit and the end of the string?
  if(false !== ($breakpoint = strpos($string, $break, $limit))) {
    if($breakpoint < strlen($string) - 1) {
      $string = substr($string, 0, $breakpoint) . $pad;
    }
  }

  return $string;
} 
```

那么您的代码将是（如果您想最多显示 30 个字符）：

```
<?php echo myTruncate($music[0]['title'], 30) ?> 
```

# rspec - Rspec 请求规范和会话值

> ID：16072804
> 
> 赞同：1
> 
> 时间：2013-04-18T01:02:44.723
> 
> 标签：rspec, rspec2

我正在编写一些请求规范（rspec 2.13.1）并想直接访问会话哈希。我认为这在控制器规范中是可能的语法，但不确定这是否可以在请求规范中完成。

```
describe 'Api' do
  let(:user) { FactoryGirl.create(:user) }
  session[:auth_token]=user.auth_token 
```

我收到以下错误：

```
 Failure/Error: session[:auth_token]=user.auth_token                              │lock (2 levels) in top_level'                                                         
 NoMethodError:                                                                   │/Users/jt/.rvm/gems/ruby-1.9.3-p392/gems/rake-10.0.4/lib/rake/application.rb:101:in `e
   undefined method `session' for nil:NilClass                                    │ach'                                                                                  
 # ./spec/requests/api_spec.rb:7:in `block (2 levels) in <top (required)>' 
```

我[在请求规范中看到了以下问题访问会话哈希，](https://stackoverflow.com/questions/12555800/access-session-hash-in-request-spec)但不确定这是否准确。

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-03-06T21:31:41.313

`:request`使用规范类型时，会话数据访问被有意排除在规范之外。通常，这是因为不应直接对其进行测试。`:controller`如果要访问会话数据，则需要使用旧类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-19T14:46:09.370

有几个小错误

1.  您应该描述 api_controller
2.  请求的变量分配应该在 before(:each) 块内。
3.  你缺少一个`it`块
4.  当文件未放在规范/控制器中时，您需要指定它是一个控制器测试`:type => :controller`

这是一个例子：

```
require 'spec_helper'

describe ApiController, :type => :controller do
  let(:user) { FactoryGirl.create(:user) }

  before :each do
    session[:auth_token]=user.auth_token
  end

  it 'should do something' do
    get :index
    response.status.should_not eq 401
  end
end 
```

# networking - 小 TCP 接收窗口的好处？

> ID：16072806
> 
> 赞同：1
> 
> 时间：2013-04-18T01:02:48.543
> 
> 标签：networking, tcp, buffer, flow-control

当我遇到接收窗口的概念时，我正在尝试了解 TCP 流控制是如何工作的。

我的问题是，为什么 TCP 接收窗口可以缩放？实现小接收窗口大小有什么好处吗？

因为据我了解，接收窗口大小越大，吞吐量就越高。而接收窗口越小，吞吐量越低，因为 TCP 总是会等到分配的缓冲区未满再发送更多数据。那么，让接收窗口始终处于最大值以获得最大传输速率是否有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:54:29.877

> 我的问题是，为什么 TCP 接收窗口可以缩放？

那里有两个问题。窗口缩放是将比例乘以 2 的幂的能力，因此您可以拥有 > 64k 的窗口大小。但是，您问题的其余部分表明您确实在问为什么它是*可调整大小*的，答案是“因此应用程序可以选择自己的接收窗口大小”。

> 实现小接收窗口大小有什么好处吗？

并不真地。

> 因为据我了解，接收窗口大小越大，吞吐量就越高。

正确，直到带宽延迟产品。除此之外，增加它没有任何效果。

> 而接收窗口越小，吞吐量越低，因为 TCP 总是会等到分配的缓冲区未满再发送更多数据。那么，让接收窗口始终处于最大值以获得最大传输速率是否有意义？

是的，直到带宽延迟产品（见上文）。

> 一个小的接收窗口确保当检测到数据包丢失（在高冲突网络上经常发生）时，

不，它没有。模拟表明，如果数据包丢失率超过百分之几，TCP 就会变得不可用。

> 发件人不需要重新发送很多数据包。

它不会那样发生。除了较低的内存占用外，小窗口大小没有任何优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:09:00.410

经过大量阅读，我想我可能已经找到了答案。

吞吐量不仅仅是接收窗口的函数。小接收窗口和大接收窗口都有各自的好处和坏处。

一个小的接收窗口确保当检测到数据包丢失（在高冲突网络上经常发生）时，发送方不需要重新发送大量数据包。

较大的接收窗口确保发送方在等待接收方确认已收到数据包时大部分时间不会处于空闲状态。

接收窗口需要可调整以获得任何给定网络的最佳吞吐量。

# mysql - 如何批量编辑和替换 MySQL 数据库行，使用列表替换所有行？

> ID：16072807
> 
> 赞同：0
> 
> 时间：2013-04-18T01:02:50.317
> 
> 标签：mysql

因此，我的数据库表中已经有 230 个国家的列表，名为“countrylist”，位于“country”行内。除了“国家”行之外，我还有“代码”行，其中包含该国家/地区的国家代码。

这些国家是英文的，因为我也需要其他 3 种语言的国家名称，所以我也复制了其他 3 种语言的表格。我还编写了 PHP 代码以根据语言选择正确的表。

我已经准备好其他 3 种语言的国家名称列表，它们的顺序相同。

但是......这让我有 230 个国家可以用 3 种语言替换，而且我已经知道应该比基本复制粘贴简单得多的东西浪费了很多时间。虽然我什至不知道如何或是否可以做到这一点......

我想知道是否有办法保留表中的“代码”行并用查询/命令替换“国家”行中的所有国家？

谢谢，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:17:49.490

```
INSERT INTO countries_fr (code) SELECT countries_en.code FROM countries_en 
```

假设您有表 countries_fr 和 countries_en，并且两者都有`code`列。这会将 countries_en 表中的所有数据插入`code`countries_fr 表的代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:28:50.170

所以它是标准化的，你必须为表中的其他 3 个名称添加列，所以（用所需的语言替换语言）：

```
alter table countries add french varchar(45),spanish varchar(45),russian varchar(45); 
```

由于代码完全相同，因此您可以将其作为关键字段使用。

```
update countries c set c.french=(select country from french where french.code = countries.code),
c.spanish=(select country from spanish where spanish.code = countries.code),
c.russian=(select country from russian where russian.code = countries.code); 
```

**另一方面...**

如果您要简单地替换国家名称，则必须维护 4 组代码。

```
update countries set country=(select country from language2 where language2.code=countries.code); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T01:09:36.077

您创建一个*关系*模型。

```
country (id, name)
countryLang (countryId, lang, translatedName) 
```

这样，语言就独立于您的母国名称。

```
| 身份证 | 姓名 | 国家ID | 朗 | 翻译姓名 |
-------------------------------------------------- -
| 1 | 波兰 | 1 | zh | 波兰 |
| 1 | 波兰 | 1 | pl | 波兰 |
```

[查看演示](http://sqlfiddle.com/#!2/caec4/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T01:20:38.280

由于之前代码的性质，没有一个答案是实用的，所以我不得不使用 Dreamweaver 复制和替换手动重做所有事情。花了一个小时，但它做得对。

# c# - 将组合框选定项内容绑定到元素

> ID：16072808
> 
> 赞同：0
> 
> 时间：2013-04-18T01:03:02.887
> 
> 标签：c#, wpf, data-binding, datagrid, combobox

我正在使用 WPF 使用实体框架和数据绑定来管理数据库中的 PRODUCT 和 BRAND。PRODUCT 包含 BrandID 属性。为了在数据网格中显示品牌名称而不是 ID，我使用了这样的 DataGridComboBoxColumn：

C＃

```
gridProducts.DataContext = this.DbContext.Products;
brandColumn.ItemsSource = this.DbContext.Brands; 
```

XAML

```
<DataGrid Name="gridProducts" IsSynchronizedWithCurrentItem="True"
          RowEditEnding="dg_RowEditEnding" ItemsSource="{Binding}" >
  <DataGrid.Columns>
    ...
    <DataGridComboBoxColumn Header="BRAND" x:Name="brandColumn" DisplayMemberPath="BrandName" 
       SelectedValuePath="ID" SelectedValueBinding="{Binding Path=BrandID}" />
 </DataGrid.Columns>
<DataGrid> 
```

它工作正常。但现在我需要将组合框选定值绑定到文本框文本中。我试过这个：

XAML

```
 <TextBox Name="brand" Text="{Binding Path=SelectedValue.Content, 
      ElementName=brandColumn}"/> 
```

但它不起作用。关于如何在文本框中绑定组合框选定值（BrandName - 而不是 BrandID）的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:19:17.580

不要在 xaml 中绑定它，而是在实体/视图模型中创建一个公共属性并将其绑定到该属性。

# google-chrome - Chrome 通过 jQuery ajax 调用跨域 jsonp 资源的问题

> ID：16072809
> 
> 赞同：4
> 
> 时间：2013-04-18T01:03:12.093
> 
> 标签：google-chrome, jquery, cross-domain, jsonp

# 解决了 - 是 Adblock Plus

我有一个跨域 OAuth 场景，我直接从 JavaScript 在第 3 方 api 上调用 OAuth 保护的 jsonp 资源。

客户端依赖我的服务器（原始站点）为提供程序上的 OAuth 资源生成签名请求 URL。客户端直接获取这些 OAuth 资源，试图将我的服务器的 OAuth 代理职责限制为简单地生成签名资源 url 并让 JS 完成其余的工作。这是JS：

```
myNamespace = {
    callApi: function(signedRequest, callback) {
        $.ajax({
            url: signedRequest,
            dataType: "jsonp",
            type: "GET",
            crossDomain: true,
            jsonp: false,
            jsonpCallback: callback,
            cache: true,
            async: true
        });
    },
    usersCallback: function(jsonp) {
        alert(jsonp);
    },
    getOAuthResource: function(resource, callback) {
        $.ajax({
            url: "/GetSignedRequest?resource=" +  encodeURIComponent(resource + "&callback=" + callback),
            success: function (signedRequest) {
                myNamespace.callApi(signedRequest, callback);
            }
        });
    }
} 
```

因为在签署请求时参数顺序很重要，所以我手动包含回调，以便它被排序并包含在服务器生成的签名请求中。

因此，示例用法很简单，

```
myNamespace.getOAuthResource("/users?id=1", "myNamespace.usersCallback"); 
```

这适用于 FireFox 20 和 IE 10 - 我从提供者那里得到警报消息和预期的 json。

Chrome 26 拒绝对提供者执行跨域调用。在开发工具中，跨域资源的 GET 立即显示“（失败）”状态，并且 GET 在控制台中显示为错误。

如果我随后要求 Chrome 在新窗口中打开这个所谓的“失败”的 URL，它会直接在提供程序上重新请求 URL，我会得到预期的 jsonp 响应：

```
myNamespace.usersCallback({...}) 
```

为什么 Chrome 不执行跨域调用？

# c++ - QDataStream 和 QByteArray 的区别

> ID：16072812
> 
> 赞同：3
> 
> 时间：2013-04-18T01:03:27.957
> 
> 标签：c++, qt, qfile

```
QTemporaryFile tf;
tf.open ();
QDataStream tfbs (&tf);
tfbs << "hello\r\n" << "world!\r\n";
const int pos = int (tf.pos ());

QByteArray ba;
ba.append ("hello\r\n");
ba.append ("world!\r\n");
const int size = ba.size (); 
```

基本上我的问题是，我做错了什么？为什么是 pos > size？我不应该使用 << 吗？我不应该使用 QDataStream 吗？

编辑：有没有办法配置 QDataStream 或 QTemporaryFile 以便 << 运算符不会在字符串前面加上 32 位长度并将空终止符存储在文件中？当我只有一系列带引号的字符串时调用 QDataStream::writeBytes 并且 QStrings 会产生非常丑陋的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:16:13.563

答案在文档中。我不打算讨论 QByteArray，因为我相信它按预期工作是相当明显的。

QDataStream 运算符<<(char*) 重载计算为[writeBytes() 函数](http://qt-project.org/doc/qt-4.8/qdatastream.html#writeBytes)。

该函数输出：

> 将长度说明符 len 和缓冲区 s 写入流并返回对流的引用。len 被序列化为 quint32，后跟来自 s 的 len 个字节。请注意，数据未编码。

所以对于`"hello\r\n"`，我希望输出是：

```
0,0,0,8,'h','e','l','l','o','\r','\n',0 
```

4 字节长度，后跟字符串中的字节。字符串结尾的 NULL 可能也被添加到末尾，这将解释原本神秘的额外两个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:47:03.363

所以我最终编写了自己的辅助类来序列化我的数据：

```
class QBinaryStream
{
public:
    QBinaryStream (QIODevice& iod) : m_iod (iod) {}
    QBinaryStream& operator << (const char* data)
    {
        m_iod.write (data);
        return *this;
    }
    QBinaryStream& operator << (const QString& data)
    {
        return operator << (data.toUtf8 ());
    }
    QBinaryStream& operator << (const QByteArray& data)
    {
        m_iod.write (data);
        return *this;
    }

private:
    QIODevice& m_iod;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-09T08:19:57.970

> 我不应该使用 QDataStream 吗？

在你的情况下，也许`QTextStream`甚至`QString`会这样做。

> QTextStream 类为读写文本提供了一个方便的接口。
> 
> QTextStream 可以对 QIODevice、QByteArray 或 QString 进行操作。使用 QTextStream 的流式操作符，您可以方便地读写单词、行和数字。

至于`QByteArray`,`Qstring`应该尽可能优先

> QByteArray 类提供了一个字节数组。
> 
> QByteArray 可用于存储原始字节（包括“\0”）和传统的 8 位“\0”结尾的字符串。使用 QByteArray 比使用 const char * 方便得多。在幕后，它始终确保数据后跟一个 '\0' 终止符，并使用隐式共享（写时复制）来减少内存使用并避免不必要的数据复制。
> 
> 除了 QByteArray，Qt 还提供了 QString 类来存储字符串数据。对于大多数用途，QString 是您要使用的类。它存储 16 位 Unicode 字符，从而可以轻松地在您的应用程序中存储非 ASCII/非拉丁 1 字符。此外，QString 贯穿于 Qt API 中。适合 QByteArray 的两种主要情况是，当您需要存储原始二进制数据时，以及当内存保护至关重要时（例如，使用 Qt for Embedded Linux）。

# java - 本地小程序安全异常

> ID：16072814
> 
> 赞同：5
> 
> 时间：2013-04-18T01:03:29.550
> 
> 标签：java, applet, localhost

我正在尝试在我的浏览器中运行一个基本的 hello world Java 小程序，但我不断收到“应用程序被安全设置阻止”并显示以下消息：

> SecurityException：您的安全设置已阻止本地应用程序运行

[我尝试通过Java 控制面板](http://www.java.com/en/download/help/jcp_security.xml)更改安全设置，但没有滑块，只有证书。

尝试在其他浏览器中打开 .html 文件时出现相同的错误。

**小程序代码：**

```
import javax.swing.*;
import java.awt.*;

public class HelloWorldApp extends JApplet
{
    public void init()
    {
        JLabel label = new JLabel("Hello World");
        add(label);
    }
} 
```

**HTML**

```
<!DOCTYPE html>
<html>
<head></head>    
<body>    
   <applet code="HelloWorldApp.class" width="300" height="100"></applet>    
</body>    
</html> 
```

**问题**：我怎样才能让小程序工作？或者更确切地说，如果这是问题而不是其他问题，我该如何更改安全设置以允许小程序在本地运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:59:29.803

好的，删除Java 6和7并重新安装7并重新启动计算机后，它现在可以工作了。不知道即使在我更新到 7 之后我也必须删除旧版本，因为我认为这是在更新时自动完成的。

[该网站](http://answers.ea.com/t5/Pogo/Solution-WINDOWS-Java-issues-step-by-step/m-p/393326/highlight/true#M14757)提供了指导。我对这么简单的问题不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T07:34:17.120

“使用网络服务器测试本课示例。不建议使用本地小程序，当Java控制面板中的安全级别设置为高或非常高时，本地小程序会被阻止。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T01:36:30.833

我今天遇到了完全相同的问题。新的 Java 改进了它的安全性，下面的[文章](http://blog.eisele.net/2013/04/java-7-update-21-security-improvements.html)将详细讨论它。

我很惊讶您没有看到 Java 控制面板上的滑块。我能够将设置更改为`MEDIUM`from`HIGH`然后它对我有用。

[Java 控制面板的位置](http://www.java.com/en/download/help/jcp_security.xml#control%20panel)

[使用 Java 控制面板更改安全设置](http://www.java.com/en/download/help/jcp_security.xml)

# dns - 挖掘结果中的权威部分是什么意思？

> ID：16072817
> 
> 赞同：48
> 
> 时间：2013-04-18T01:03:45.440
> 
> 标签：dns, dig

昨天我将我的域名服务器从 cloudflare 更改为 dnspod。我用 dig 来测试它。但 ANSWER SECTION 始终是旧名称服务器。

```
;; AUTHORITY SECTION:
amazingjxq.com.         21336   IN      NS      kim.ns.cloudflare.com.
amazingjxq.com.         21336   IN      NS      brad.ns.cloudflare.com. 
```

ANSWER SECTION 代表名称服务器吗？如果是，为什么不改变？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-18T02:05:47.783

[权威部分指示](http://en.wikipedia.org/wiki/Domain_Name_System#Authoritative_name_server)作为回答有关该域的 DNS 查询的最终权威的服务器。

本节的原因是您可以查询任何* DNS 服务器来回答您的查询。该服务器可能会选择从缓存中回答查询。但是，如果您想确保获得权威响应（可以说是“来自马口”） - 您应该在权威部分询问服务器。

（* = 任何将接受您的查询的服务器。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-18T01:47:45.283

这些是来自旧服务器的缓存记录。Cloudflare 在 NS 记录上有 1 天的 TTL，这表明您的解析器大约在 18 小时前缓存了它们，它们应该会在 6 小时内消失。

# scheme - 从伪代码到方案

> ID：16072818
> 
> 赞同：1
> 
> 时间：2013-04-18T01:03:49.640
> 
> 标签：scheme, pseudocode

w 中每个字符 c 的 key <-5381 do key <-33.key + ctv(c) end for

这是要在方案中实现的关键功能的伪代码，但在我的一生中，我无法弄清楚如何将其转换为实际代码。任何帮助，将不胜感激。ctv 是将每个字符转换为其整数值的函数，即 a 为 1，z 为 26

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:40:34.677

我只会给你解决方案的一般结构，因为这看起来像家庭作业，你应该尝试自己解决它：

```
(define (key str)
  (let loop ((chars <???>) ; transform the string into a list of chars
             (acc 5381))   ; this is the initial value of the accumulator
    (if <???>              ; if the list of chars is empty
        acc                ; then return the accumulator
        (loop <???>        ; otherwise advance recursion over list
              <???>))))    ; update accumulator, use `ctv` and apply the formula 
```

请注意，我们使用递归来实现循环，我们遍历参数`chars`（字符列表）并使用参数`acc`来累积将在最后返回的结果。例如，以下是`acc`变量的值如何在连续迭代中更新：

```
acc: 5381              ; initial  value,  acc = 5381
acc: 33 * acc + ctv(d) ; processing 'd',  acc = 177577
acc: 33 * acc + ctv(a) ; processing 'a',  acc = 5860042
acc: 33 * acc + ctv(y) ; processing 'y',  acc = 193381411 
```

最后别忘了测试一下，像这样：

```
(key "day")
=> 193381411 
```

# ruby-on-rails - 为什么Ruby on Rails会在文件末尾添加一个空行？

> ID：16072822
> 
> 赞同：9
> 
> 时间：2013-04-18T01:04:38.007
> 
> 标签：ruby-on-rails

运行`rails generate controller Foo home`结果：

```
class FooController < Application Controller
  def home
  end
end
(There's nothing on this line in the actual file, just a blank line) 
```

这个空行有目的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T01:20:41.447

通常使用换行符来表示行尾，即使是最后一行。许多编辑器（比如我使用的 vi）默默地添加这个换行符。共识是文本文件（尤其是在 Unix 世界中）应该以换行符结尾，如果它不存在，历史上就会出现问题。 [为什么文本文件应该以换行符结尾？](https://stackoverflow.com/questions/729692/why-should-files-end-with-a-newline)

我用来计算文件“wc”中行数的工具只计算文件中的换行符，所以如果没有尾随换行符，它将显示 3 而不是 4。

它还提高了生成器中使用的模板的可读性。考虑： [https ://github.com/rails/rails/blob/master/railties/lib/rails/generators/rails/controller/templates/controller.rb](https://github.com/rails/rails/blob/master/railties/lib/rails/generators/rails/controller/templates/controller.rb)

要删除尾随换行符，该模板将具有最后一行：

```
end<% end -%> 
```

代替：

```
end
<% end -%> 
```

这对我来说似乎不太可读。

* * *

## 下面的讨论指的是文件前面的空行，而不是尾随的换行符。

这是一个疏忽，并在更高版本的 Rails 中得到了修复。

您可以在此处的提交历史记录中看到删除空行的位置：

[https://github.com/rails/rails/commits/master/railties/lib/rails/generators/rails/controller/templates/controller.rb](https://github.com/rails/rails/commits/master/railties/lib/rails/generators/rails/controller/templates/controller.rb)

这是它被删除的提交：
[删除底部多余的空白行](https://github.com/rails/rails/commit/42cf5eba260f97e6da0ef66b954d95b9e7c2b102 "去除底部多余的空行")

它还向您展示了它存在的原因，以前他们只是在每个操作后添加一个空行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T01:24:55.997

将源代码保存在 git 等 SCM 中时，通常使用换行符结束文件。假设您在最后添加一些内容并提交更改。现在比较两种情况下的差异。

1）以换行符结尾：

```
--- foo_controller.rb   2013-04-18 09:14:48.000000000 +0800
+++ foo_controller2.rb  2013-04-18 09:15:10.000000000 +0800
@@ -1,4 +1,7 @@
 class FooController < ApplicationController
   def home
   end
-end
\ No newline at end of file
+end
+
+p FooController.methods
\ No newline at end of file 
```

2）没有换行符：

```
--- foo_controller.rb   2013-04-18 09:16:28.000000000 +0800
+++ foo_controller2.rb  2013-04-18 09:16:35.000000000 +0800
@@ -2,3 +2,5 @@
   def home
   end
 end
+
+p FooController.methods 
```

您会看到 diff 将“end”和“end\n”视为两条不同的行，这在第一种情况下会导致不太干净的视图。

# sitecore - 缺少营销人员数据的网络表单

> ID：16072831
> 
> 赞同：0
> 
> 时间：2013-04-18T01:05:33.167
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers

我正在尝试对安装了 Webforms for Marketingers 模块的 Sitecore 系统进行故障排除。

我已经从前端提交了一个联系表单，但是当我查看表单报告时，“数据”选项卡上只有旧数据。如果我查看“可用性报告”选项卡，我确实可以看到我提交的数据。

设置了几个保存操作，其中一个是保存到数据库，另一个是发送邮件。两者似乎都没有开火。

由于数据在可用性报告下，似乎有些东西在起作用，但我不确定如何解决问题的根源。

一个关键信息是该站点最近已从一台服务器移动到另一台服务器。然而，据我所知，连接字符串是有效的。此外，没有 CD/CM 分离，只有 Master => Web 发布设置，虽然在我接触它之前似乎有一次，有一个登台服务器。就像我说的那样，连接字符串似乎是有序的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:24:58.720

事实证明，我认为它确实与以前的登台服务器有关。我从以下内容中删除了`ConnectionStrings.config`

```
<add name="remoteWfmService" connectionString="url=http://{mysite}/sitecore%20modules/shell/Web%20Forms%20for%20Marketers/Staging/WfmService.asmx;user={myuser};password={mypass};timeout=60000"/> 
```

一旦出现，一切都开始按预期工作。

# c++ - C++：避免 优化变量

> ID：16072836
> 
> 赞同：3
> 
> 时间：2013-04-18T01:06:03.407
> 
> 标签：c++

我在构造函数或类中有一些有用的代码`Valuable`。我想确保它之前执行过`submain`。我如何保证它没有被优化？

```
int main()
{
    // Dear compiler, please don't optimize ctor call out!
    Valuable var;

    return submain();
} 
```

局部变量是否足够？我需要使用`static`：

```
static Valuable *v = new Valuable();
delete v;
v = NULL; 
```

我可以缩短之前的一个班轮：

```
delete new Valuable(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T01:08:57.327

如果您的构造函数或析构函数具有可观察的行为，则**不允许**编译器对其进行优化。所以没有必要做任何棘手的事情。

# python - Python 没有打开 .py 文件

> ID：16072837
> 
> 赞同：2
> 
> 时间：2013-04-18T01:07:06.817
> 
> 标签：python, scripting

我正在尝试在我的计算机上打开一个 .py 脚本，但不幸的是它一直在记事本中打开。我已经尝试在我的计算机上更改关联，但即使我浏览到 python.exe 并单击它，它也不会显示为可用程序（有趣的是，pythonw.exe 可以与之关联，但是当我单击时什么也没有打开在与 pythonw 关联的文件上）。有什么办法可以解决这个问题吗？如果没有，我怎样才能从 Python 解释器手动运行我的脚本？

另外，我尝试重新安装 Python，但没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T02:50:56.947

您可以检查注册表以查看与 .py 和 .pyw 文件相关联的内容。对我来说 .py 与 Python.File 相关联，它使用它的 shell\open 命令：

```
"C:\Python27\python.exe" "%1" %* 
```

同样，.pyw 与使用 pythonw.exe 打开的 Python.NoConFile 相关联。在 HKEY_CLASSES_ROOT 下查找这些扩展名和文件类型作为键。

您还可以使用控制台窗口中的 ASSOC 和 FTYPE 命令来检查这些：

```
C:\projects>assoc .py
.py=Python.File

C:\projects>ftype python.file
python.file="C:\Python27\python.exe" "%1" %* 
```

它们还具有命令行变体，可让您设置新值。查看他们的帮助屏幕以获取更多信息，并在 Stack Overflow 中搜索大量示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T01:25:21.320

在 Windows 上执行 python 脚本的标准方法是在 (DOS) 命令行上使用脚本名称作为参数调用 python 解释器。尽管 python.exe 的路径包含在您的 Path 系统变量中，但这是必要的。

```
python myprogram.py 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T01:17:45.047

我过去使用 IDLE 来运行我正在处理的脚本。 [http://docs.python.org/2/library/idle.html](http://docs.python.org/2/library/idle.html)

从 IDLE 的`Edit`菜单中，您应该能够运行打开的脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T01:27:03.243

如果您使用的是安装了 IDLE 的 Windows 操作系统，则右键单击 .py 文件应该会为您提供在 IDLE 中进行编辑的选项。

# java - 归并排序泛型方法

> ID：16072838
> 
> 赞同：1
> 
> 时间：2013-04-18T01:07:13.340
> 
> 标签：java, sorting, mergesort

我的合并排序似乎无法正常工作。当我显示排序列表时，它没有排序并添加元素，应该有 9 的地方有 49。有人知道我哪里出错了吗？

```
public static <E extends Comparable<E>> void mergeSort(List<E> A) {
    int n = A.size();
    if (n > 1) {
        int half = n / 2;
        List<E> B = copyPartialArray(A, 0, half);
        List<E> C = copyPartialArray(A, half, n);
        mergeSort(B);
        mergeSort(C);
        merge(B, C, A);
    }
}

public static <E extends Comparable<E>> void merge(List<E> B, List<E> C, List<E> A) {
    int n1 = B.size();
    int n2 = C.size();
    int i = 0;
    int j = 0;
    int k = 0;
    while (i < n1 && j < n2) {
        if (B.get(i).compareTo(C.get(j)) < 0) {
            A.add(k, B.get(i));
            i++;
        }
        else {
            A.add(k, C.get(j));
            j++;
        }
        k++;
    }
    if (i == n1)
        for (int p = j; p < n2; p++) {
            A.add(k, C.get(p)); k++;
        }
    else if (j == n2)
        for (int p = i; p < n1; p++) {
            A.add(k, B.get(p)); k++;
        }
}

private static <E extends Comparable<E>> List<E> copyPartialArray(List<E> A, int first, int last) {
    int n = last - first;
    List<E> copy = new ArrayList<E>(n);
    for (int i = 0; i < n; i++)
    copy.add(i, A.get(first + i));
    return copy;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:00:38.220

这个答案将试图让你意识到出了什么问题。

很明显，mergeSort 不会对一个元素数组做任何事情，但是如果有两个（例如 [2,1]）会发生什么？您提到结果列表（列表 A）中的元素比以前更多。为什么？对那个列表做了什么合并？[提示](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28int,%20E%29)。

# objective-c - 此处是否需要 CFRelease 以防止泄漏？

> ID：16072841
> 
> 赞同：0
> 
> 时间：2013-04-18T01:07:28.823
> 
> 标签：objective-c, core-graphics

所以我听说了，`new` `alloc`并`copy`在你负责的堆上创建了新的内存。我想确保 Core Graphics 中的 C 函数也是如此：

`myIvar=CGDataProviderCopyData(CGImageGetDataProvider(cgImage));`

这是否意味着我*必须*稍后发布它：

`CFRelease(myIvar);`

也就是说，如果我**稍后*****在没有*****发布声明的情况下重新分配，会导致泄漏吗？`myIvar`**

 *关于评论，我上传了这个截图：

![在此处输入图像描述](https://i.stack.imgur.com/otJlw.png)

注释掉的行工作正常。在这条线之前，我有`m_parsedImage = CGDataProviderCopyData(CGImageGetDataProvider(cgImage));`它也可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:29:37.123

是的，按照惯例，任何名称中带有 Copy 或 Create 的函数都会返回您必须释放的内容。

在这种情况下，快速查看文档以了解`CGDataProviderCopyData`节目：

> **返回值**
> 包含提供者数据副本的新数据对象。您有责任释放此对象。

在发布此类问题之前，请花点时间查看文档。你会为自己节省很多时间。:)*

# sql - 需要表中的所有数据

> ID：16072843
> 
> 赞同：1
> 
> 时间：2013-04-18T01:07:48.740
> 
> 标签：sql, sql-server, tsql

请帮忙。

我有一张名为 Employee 的表。

我想要该表中的所有记录，并使用 parentid 自加入

记录就像

A 是父母
B 是 A 的孩子
C 是 A 的孩子
D 是 C
的孩子 F 是 B 的孩子
E 是父母
G 是 E 的孩子
H 是 G 的孩子

如果我把自我加入并把所有记录放在A是父母的地方，我只得到A，B，C而不是D和F

我想要 A 是父母的所有记录，例如 A,B,C,D,E 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T01:27:12.310

如果没有设定数量的父/子级别，则需要为此使用递归 cte。假设您使用的是 SQL Server 2005 或更高版本，这应该是您正在寻找的：

```
with cte as (
  select id, 
    id parentid
  from employee
  where parentid is null
  union all
  select e.id, 
    c.parentid
  from employee e
    join cte c on e.parentid = c.id
  )
select id 
from cte
where parentid = 'A' 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/9d3bc/2)

顺便说一句——这会导致 A、B、C、D 和 F——而不是 E。我认为这是您帖子中的错字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:55:23.397

```
select distinct(e.ParentName) from Employee e left join Employee e1 
on  e.employeeId=e1.ParentID 
```

# asp.net - 子域中的 MachineKey 关系。可以跨服务器吗？

> ID：16072845
> 
> 赞同：0
> 
> 时间：2013-04-18T01:08:16.093
> 
> 标签：asp.net, cookies, iis-7, forms-authentication, machinekey

在这个例子中，我有几个站点。

*   a.site.com*   b.site.com*   c.site.com

上述每个站点都具有相同的相同点`machinekey`。此示例 a.site.com 和 b.site.com 也存在于服务器 1 上，而 c.site.com 存在于服务器 2 上。

使用表单身份验证，我可以毫无问题地在 a.site.com 和 b.site.com 之间导航，只需验证一次。但是，即使 c.site.com 具有相同的内容，`machinekey`我也无法导航到 c.site.com 并保持登录状态。

我可以使用域 cookie 来解决这个问题。但这不是理想的解决方案，原因有很多。

如何在没有域 cookie 的情况下跨服务器使用机器密钥？

它们在同一个域中。这些站点也是完全相同的代码，只是多个 IIS 页面。唯一的区别是站点位于不同的服务器上

谢谢！

编辑 web.config

```
 <machineKey decryptionKey="encryptkey" validationKey="encryptkey" validation="SHA1"  decryption="AES"/>
<customErrors mode="Off" defaultRedirect="noaccess.aspx" />
<authentication mode="Forms">
  <forms timeout="120" domain=".site.com" cookieless="UseCookies" enableCrossAppRedirects="true" name=".ASPXAUTH" loginUrl="default.aspx" protection="All" path="/" />
</authentication> 
```

我的意思是我去发布 a.site.com - server1 : publsh b.site.com -server1 : publish - c.site.com server2 代码没有变化。是的，我删除了密钥，但我确信密钥已正确创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:13:46.483

您需要使用共享[会话状态机制](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx)，例如状态服务器或 SQL 服务器，以便网络场中的所有服务器共享会话状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:05:29.600

您能否仔细检查所有 3 台服务器是否安装了相同的 Windows 更新（特别是 .NET 框架）和相同的服务包级别。所有 3 台服务器上的 .NET 版本是否相同？

# jquery - JQuery中的动态高度

> ID：16072848
> 
> 赞同：0
> 
> 时间：2013-04-18T01:08:49.077
> 
> 标签：jquery, css, dynamic, resize

我在使用 jquery 代码块时遇到了一些麻烦，该代码块根据其中包含的徽标的**宽度**设置菜单栏的**高度。**问题是该站点是一个响应式设计，因此徽标的宽度会根据窗口的宽度而有所不同......由于某种原因，此代码仅在您第一次加载页面时有效，但不会继续调整大小随着徽标随页面窗口调整大小时的菜单栏。任何帮助，将不胜感激; 这是代码：

 **```
$(document).ready(function(){
  var logoWidth = $('#logo').css('width'); //Get width of logo
  var newHeight = parseInt(logoWidth) * 0.34666667; //Calculate resultant height of menu-bar
  $("#grey-section").height(newHeight ); //Set new height of menu-bar
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:33:47.993

你可以做

```
$(window).on('resize', function() {
    var logoWidth = $('#logo').css('width'); //Get width of logo
    var newHeight = parseInt(logoWidth) * 0.34666667; //Calculate resultant height of menu-bar
    $("#grey-section").height(newHeight ); //Set new height of menu-bar
}); 
```

编辑：您还必须保留当前代码，或将其替换为

```
$(function() {
  $(window).trigger('resize');
}); 
```

使其在页面加载时具有正确的高度

你可能只做css

```
#logo { width: 100%; height: auto } 
```

假设你想保持纵横比

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:36:23.610

```
function getscreenheight()
{
   var  myHeight = 0;
             if (typeof (window.innerWidth) == "number") {
                  myHeight = window.innerHeight;
                } else {
                  if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {
                      myHeight = document.documentElement.clientHeight;
                      } else {
                          if (document.body && (document.body.clientWidth || document.body.clientHeight)) {
                              myHeight = document.body.clientHeight;
                             }
                     }
               }
     return myHeight;  
}

function getscreenwidth()
{
 var myWidth = 0;
             if (typeof (window.innerWidth) == "number") {
                  myWidth = window.innerWidth;
                } else {
                  if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {
                      myWidth = document.documentElement.clientWidth;
                      } else {
                          if (document.body && (document.body.clientWidth || document.body.clientHeight)) {
                              myWidth = document.body.clientWidth;
                             }
                     }
               }

             return myWidth;
} 
```

使用上面的代码获取窗口的高度和宽度，然后使用 jQuery 的 .resize() 来触发它。( [http://api.jquery.com/resize/](http://api.jquery.com/resize/) )

所以你可以每次调整你的东西。

你的，伊万**

# ruby - 访问嵌套对象中的 ruby 变量

> ID：16072851
> 
> 赞同：1
> 
> 时间：2013-04-18T01:09:12.570
> 
> 标签：ruby, variables, scope

我有一颗正在研究的宝石。它是一个解析配置文件然后实例化几个对象的可执行文件。然后这些对象之一实例化许多“处理程序”对象。我正在将配置文件解析为一个数组，`CONFIG`但其中的设置在任何其他对象中都无法访问。处理程序中需要它们。当我尝试使用它们时，变量不存在。

我知道这是一个可变范围问题。但是，我不确定我需要做什么才能使这些在整个程序（包括子/嵌套对象）中都可以访问，而不仅仅是初始可执行文件。虽然程序中的每个对象都在一个模块中，但可执行文件中的操作却不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:46:25.680

常量是全局的，但它们存在于定义它们的命名空间中。

如果您`CONFIG`在主上下文中定义，它将在根级别是全局的。如果在类或模块中定义它，则必须在该上下文之外通过其全名引用它。

例如：

```
class Foo
  CONFIG = File.read(...)
end

CONFIG # => Error, not defined
Foo::CONFIG # => Defined 
```

按名称引用常量通常是不好的形式，它们违背了正确的面向对象设计的原则。因此，如果您定义常量，它们应该只在内部使用，并通过子类可以根据需要重新定义或修补的方法公开。

一个更好的例子：

```
class Foo
  CONFIG = File.read(...)

  def self.config
    CONFIG
  end
end

Foo.config # => Your configuration 
```

这个简单的抽象很重要，因为子类可以重新定义您的配置：

```
class Bar < Foo
  def self.config
    # ... Different implementation
  end
end

Bar.config # => Different result 
```

更好的是完全避免常量，并根据需要简单地延迟加载：

```
class Foo
  def self.config
    @config ||= File.read(...)
  end
end

Foo.config # => Your configuration 
```

常量最好保留给不会改变的东西，例如`SEPARATOR = ':'`，在不破坏大量代码的情况下重新配置它们是不可能或不切实际的。

如果您有从外部源读取的内容，并且可能会根据配置或偏好而有所不同，那么使用中间的方法通常会更方便。

# wcf - WebHttpBinding 是否使用 TCP 连接池？

> ID：16072859
> 
> 赞同：0
> 
> 时间：2013-04-18T01:09:41.650
> 
> 标签：wcf, connection-pooling, wcf-binding, webhttpbinding

我可以在 MSDN 页面中看到，新 .NET 4.5 中的 NetTcpBinding 基于服务的主机 DNS 名称和服务正在侦听的端口号使用 TCP 连接池。WebHttpBinding 也是如此吗？我找不到这个问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:49:59.710

似乎，仅 tcp (TcpConnectionPoolSettings) 和命名管道 (NamedPipeConnectionPoolSettings) 允许连接池。

另请参阅[此 msdn 帖子](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T14:52:52.023

连接池是基于 ServicePointManager/ServicePoint 类完成的，因此 ServicePointManager MaxServicePoints/MaxServicePointIdleTime 用于控制缓存。

# iphone - 如何从委托访问 UITableView？

> ID：16072860
> 
> 赞同：0
> 
> 时间：2013-04-18T01:09:46.230
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

当我关闭一个模式时，我会覆盖`viewWillAppear`以使视图中的表格视图重新加载。问题是我没有任何指向表视图的指针来调用它来刷新。我考虑过笨拙的解决方案，例如当 tableview 第一次加载并`UIViewController`为每一行调用（委托）时将其存储在指针中，但似乎必须在某处有指向它的指针。有谁知道如何得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:17:56.517

`viewController`在它的视图层次结构中带有 a 的 a `UITableView`（即使作为根，在 a 的情况下）为这种事情`UITableViewController`保留一个指向 the 的弱指针是很常见的。`UITableView`

如果`UITableView`是内置的`storyboard/xib`，则将其设置为`IBOutlet`，否则，构建`UITableView`in 代码，将其添加为子视图并分配指向 的指针`self.tableView`。

`viewWillAppear`是一个非常明智的说法`[self.tableView reloadData]`

# javascript - jquery 最后一个子边框 if..else

> ID：16072862
> 
> 赞同：0
> 
> 时间：2013-04-18T01:09:47.657
> 
> 标签：javascript, jquery, css

HTML

```
<div class="aa">
    <div class="bb">1
    </div>
     <div class="cc">a
    </div>
</div>
<div class="aa">
    <div class="bb">2
    </div>
     <div class="cc">b
    </div>
</div> 
```

jQuery

```
$('.bb:last').addClass('red');
$('.bb').click(function(){
    $(this).next('.cc').fadeToggle();
    if(!$('.cc:last').is(':hidden')){
        if($('.bb:last').hasClass('red')){
            $('.cc:last').addClass('red');
            $('.bb:last').removeClass('red');
        }
    }else{
    $('.bb:last').addClass('red');
  }
}); 
```

**[在线示例-Fiddle](http://jsfiddle.net/L8VqB/3/)**

单击框时`2`，应删除边框，`bb`然后将其分配给“cc”，第二次单击边框应返回`bb`当我无法正确处理时。从不 `else{$('.bb:last').addClass('red');}`工作。

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:49:46.153

我认为这应该可以解决您遇到的问题。

```
$('.bb:last').addClass('red');
$('.bb').click(function(){
    $(this).next('.cc').fadeToggle();
    if($('.bb:last').is(this)){
        $(this).toggleClass('red');
    }
}); 
```

这是[小提琴](http://jsfiddle.net/andyjmeyers/BXHSJ/)的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:31:29.860

您的`else`子句与错误的`if`. 这可以正常工作：

```
$('.bb:last').addClass('red');
$('.bb').click(function () {
    $(this).next('.cc').fadeToggle();
    if (!$('.bb:last').is(':hidden')) {
        if ($('.bb:last').hasClass('red')) {
            $('.cc:last').addClass('red');
            $('.bb:last').removeClass('red');
        } else {
            $('.bb:last').addClass('red');
        }
    }
}); 
```

[小提琴](http://jsfiddle.net/barmar/L8VqB/2/)

# python - 如何在 MongoKit 中设置收集的 TTL 索引？

> ID：16072865
> 
> 赞同：0
> 
> 时间：2013-04-18T01:10:09.110
> 
> 标签：python, mongokit

我想在我的应用程序（flask+mongokit）中使用“生存时间”收集功能（[http://docs.mongodb.org/manual/tutorial/expire-data/](http://docs.mongodb.org/manual/tutorial/expire-data/)）。

当我描述我的模型或者我需要使用 pymongo 时，是否可以通过 MongoKit 为集合中的所有文档创建 TTL 索引？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:51:30.383

您可以使用 pymongo 层为所有文档创建 TTL 索引：

[http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.ensure_index](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.ensure_index)

假设您有一个 User mongokit 模型的示例：

```
db.User.collection.ensure_index("name", 300) 
```

请注意，TTL 现在在 pymongo 2.3 中已弃用。请改用 cache_for。

# sql-server - 使用经典 ASP 更新 SQL 数据库

> ID：16072868
> 
> 赞同：1
> 
> 时间：2013-04-18T01:10:29.690
> 
> 标签：sql-server, asp-classic

我必须修改旧的 ASP 页面以允许用户更新他们列出的电话号码，这些电话号码存储在 SQL 2005 数据库中。该页面的代码看起来非常繁重，因此我为它的密度道歉。用户在表单中输入名称并被定向到以下结果页面：

```
 <h1>Phone Directory Results Detail</h1>
         <div class="subContentStyles">
            <br />

<%
MM_Telephone_STRING = "dsn=Telephone;uid=sa;pwd=sapw;"
%>
<%
Dim Telephone__varName
Telephone__varName = "%"
if (Request("FullName")  <> "") then Telephone__varName = Request("FullName") 
%>
<%
Dim Telephone__varJob
Telephone__varJob = "%"
if (Request("JobTitle")   <> "") then Telephone__varJob = Request("JobTitle")  
%>
<%
set Telephone = Server.CreateObject("ADODB.Recordset")
Telephone.ActiveConnection = MM_Telephone_STRING
Telephone.Source = "SELECT Ext, FullName, JobTitle, EMailAddress, Photo, Extras,       Keywords, dbo.SearchDetailScreen.Photo, siteadd, department2, sitefax, Mobile  FROM dbo.SearchDetailScreen  WHERE FullName LIKE '" + Replace(Telephone__varName, "'", "''") + "' AND JobTitle LIKE '" + Replace(Telephone__varJob, "'", "''") + "'    OR FullName LIKE '" + Replace(Telephone__varName, "'", "''") + "' AND JobTitle is null"
Telephone.CursorType = 0
Telephone.CursorLocation = 2
Telephone.LockType = 3
Telephone.Open()
Telephone_numRows = 0
%>
<%
'  *** Recordset Stats, Move To Record, and Go To Record: declare stats variables
' set the record count
Telephone_total = Telephone.RecordCount
' set the number of rows displayed on this page
If (Telephone_numRows < 0) Then
  Telephone_numRows = Telephone_total
Elseif (Telephone_numRows = 0) Then
  Telephone_numRows = 1
End If
' set the first and last displayed record
Telephone_first = 1
Telephone_last  = Telephone_first + Telephone_numRows - 1
' if we have the correct record count, check the other stats
If (Telephone_total <> -1) Then
  If (Telephone_first > Telephone_total) Then Telephone_first = Telephone_total
  If (Telephone_last > Telephone_total) Then Telephone_last = Telephone_total
  If (Telephone_numRows > Telephone_total) Then Telephone_numRows = Telephone_total
End If
%>
<%
' *** Move To Record and Go To Record: declare variables
Set MM_rs    = Telephone
MM_rsCount   = Telephone_total
MM_size      = Telephone_numRows
MM_uniqueCol = ""
MM_paramName = ""
MM_offset = 0
MM_atTotal = false
MM_paramIsDefined = false
If (MM_paramName <> "") Then
  MM_paramIsDefined = (Request.QueryString(MM_paramName) <> "")
End If
%>
<%
' *** Move To Specific Record: handle detail parameter
If (MM_paramIsDefined And MM_rsCount <> 0) Then
  ' get the value of the parameter
  param = Request.QueryString(MM_paramName)
  ' find the record with the unique column value equal to the parameter value
  MM_offset = 0
  Do While (Not MM_rs.EOF)
    If (Cstr(MM_rs.Fields.Item(MM_uniqueCol).Value) = param) Then
      Exit Do
    End If
    MM_offset = MM_offset + 1
    MM_rs.MoveNext
  Loop
  ' if not found, set the snumber of records and reset the cursor
  If (MM_rs.EOF) Then
    If (MM_rsCount < 0) Then MM_rsCount = MM_offset
    If (MM_size < 0 Or MM_size > MM_offset) Then MM_size = MM_offset
    MM_offset = 0
    ' reset the cursor to the beginning
    If (MM_rs.CursorType > 0) Then
  MM_rs.MoveFirst
    Else
      MM_rs.Close
      MM_rs.Open
    End If
  End If
End If
%>
<%
' *** Move To Record: handle 'index' or 'offset' parameter
if (Not MM_paramIsDefined And MM_rsCount <> 0) then
  ' use index parameter if defined, otherwise use offset parameter
  r = Request.QueryString("index")
  If r = "" Then r = Request.QueryString("offset")
  If r <> "" Then MM_offset = Int(r)
  ' if we have a record count, check if we are past the end of the recordset
  If (MM_rsCount <> -1) Then
    If (MM_offset >= MM_rsCount Or MM_offset = -1) Then  ' past end or move last
      If ((MM_rsCount Mod MM_size) > 0) Then         ' last page not a full repeat region
        MM_offset = MM_rsCount - (MM_rsCount Mod MM_size)
      Else
        MM_offset = MM_rsCount - MM_size
      End If
    End If
  End If
  ' move the cursor to the selected record
  i = 0
  While ((Not MM_rs.EOF) And (i < MM_offset Or MM_offset = -1))
    MM_rs.MoveNext
    i = i + 1
  Wend
  If (MM_rs.EOF) Then MM_offset = i  ' set MM_offset to the last possible record
End If
%>
<%
' *** Move To Record: if we dont know the record count, check the display range
If (MM_rsCount = -1) Then
  ' walk to the end of the display range for this page
  i = MM_offset
  While (Not MM_rs.EOF And (MM_size < 0 Or i < MM_offset + MM_size))
    MM_rs.MoveNext
    i = i + 1
  Wend
  ' if we walked off the end of the recordset, set MM_rsCount and MM_size
  If (MM_rs.EOF) Then
    MM_rsCount = i
    If (MM_size < 0 Or MM_size > MM_rsCount) Then MM_size = MM_rsCount
  End If
  ' if we walked off the end, set the offset based on page size
  If (MM_rs.EOF And Not MM_paramIsDefined) Then
    If (MM_offset > MM_rsCount - MM_size Or MM_offset = -1) Then
      If ((MM_rsCount Mod MM_size) > 0) Then
        MM_offset = MM_rsCount - (MM_rsCount Mod MM_size)
      Else
        MM_offset = MM_rsCount - MM_size
      End If
    End If
  End If
  ' reset the cursor to the beginning
  If (MM_rs.CursorType > 0) Then
    MM_rs.MoveFirst
  Else
    MM_rs.Requery
  End If
  ' move the cursor to the selected record
  i = 0
  While (Not MM_rs.EOF And i < MM_offset)
    MM_rs.MoveNext
    i = i + 1
  Wend
End If
%>
<%
' *** Move To Record: update recordset stats
' set the first and last displayed record
Telephone_first = MM_offset + 1
Telephone_last  = MM_offset + MM_size
If (MM_rsCount <> -1) Then
  If (Telephone_first > MM_rsCount) Then Telephone_first = MM_rsCount
  If (Telephone_last > MM_rsCount) Then Telephone_last = MM_rsCount
End If
' set the boolean used by hide region to check if we are on the last record
MM_atTotal = (MM_rsCount <> -1 And MM_offset + MM_size >= MM_rsCount)
%>
<%
' *** Go To Record and Move To Record: create strings for maintaining URL and Form    parameters
' create the list of parameters which should not be maintained
MM_removeList = "&index="
If (MM_paramName <> "") Then MM_removeList = MM_removeList & "&" & MM_paramName & "="
MM_keepURL="":MM_keepForm="":MM_keepBoth="":MM_keepNone=""
' add the URL parameters to the MM_keepURL string
For Each Item In Request.QueryString
  NextItem = "&" & Item & "="
  If (InStr(1,MM_removeList,NextItem,1) = 0) Then
    MM_keepURL = MM_keepURL & NextItem & Server.URLencode(Request.QueryString(Item))
  End If
Next
' add the Form variables to the MM_keepForm string
For Each Item In Request.Form
  NextItem = "&" & Item & "="
  If (InStr(1,MM_removeList,NextItem,1) = 0) Then
    MM_keepForm = MM_keepForm & NextItem & Server.URLencode(Request.Form(Item))
  End If
Next
' create the Form + URL string and remove the intial '&' from each of the strings
MM_keepBoth = MM_keepURL & MM_keepForm
if (MM_keepBoth <> "") Then MM_keepBoth = Right(MM_keepBoth, Len(MM_keepBoth) - 1)
if (MM_keepURL <> "")  Then MM_keepURL  = Right(MM_keepURL, Len(MM_keepURL) - 1)
if (MM_keepForm <> "") Then MM_keepForm = Right(MM_keepForm, Len(MM_keepForm) - 1)
' a utility function used for adding additional parameters to these strings
Function MM_joinChar(firstItem)
  If (firstItem <> "") Then
    MM_joinChar = "&"
  Else
    MM_joinChar = ""
  End If
End Function
%>
<%
' *** Move To Record: set the strings for the first, last, next, and previous links
MM_keepMove = MM_keepBoth
MM_moveParam = "index"
' if the page has a repeated region, remove 'offset' from the maintained parameters
If (MM_size > 0) Then
  MM_moveParam = "offset"
  If (MM_keepMove <> "") Then
    params = Split(MM_keepMove, "&")
    MM_keepMove = ""
    For i = 0 To UBound(params)
  nextItem = Left(params(i), InStr(params(i),"=") - 1)
      If (StrComp(nextItem,MM_moveParam,1) <> 0) Then
        MM_keepMove = MM_keepMove & "&" & params(i)
      End If
    Next
    If (MM_keepMove <> "") Then
      MM_keepMove = Right(MM_keepMove, Len(MM_keepMove) - 1)
    End If
  End If
End If
' set the strings for the move to links
If (MM_keepMove <> "") Then MM_keepMove = MM_keepMove & "&"
urlStr = Request.ServerVariables("URL") & "?" & MM_keepMove & MM_moveParam & "="
MM_moveFirst = urlStr & "0"
MM_moveLast  = urlStr & "-1"
MM_moveNext  = urlStr & Cstr(MM_offset + MM_size)
prev = MM_offset - MM_size
If (prev < 0) Then prev = 0
MM_movePrev  = urlStr & Cstr(prev)
%>

        <table id="phone">
                    <tr>
                    <td colspan="3" id="PhoneDetailHead">Need to change your extension? <a href="#" data-reveal-id="myModal">Click here</a></td>
                    </tr>
          <tr> 
            <td id="PhoneDetailHead">Full Name&nbsp;</td>
            <td id="phoneresults"><%=(Telephone.Fields.Item("FullName").Value)%></td>
            <td rowspan="8" id="phoneresults">&nbsp;&nbsp;&nbsp;<img src="<%=(Telephone.Fields.Item("Photo").Value)%>" alt="<%=(Telephone.Fields.Item("FullName").Value)%>" />&nbsp;&nbsp;&nbsp;</td>
          </tr>
          <tr> 
            <td id="PhoneDetailHead">Ext&nbsp;</td>
            <td id="phoneresults"><%=(Telephone.Fields.Item("Ext").Value)%>&nbsp;<%=(Telephone.Fields.Item("Extras").Value)%></td>
          </tr>
           <tr> 
            <td id="PhoneDetailHead">Mobile&nbsp;</td>
            <td id="phoneresults"><%=(Telephone.Fields.Item("Mobile").Value)%></td>
          </tr>  
          <tr> 
            <td id="PhoneDetailHead">&nbsp;Email Address&nbsp;</td>
            <td id="phoneresults">
              <% strMail = "mailto:" & Telephone.Fields.Item("EMailAddress").Value %>
              <a href="<%=strMail%>" ><%=(Telephone.Fields.Item("EMailAddress").Value)%></a></td>
          </tr>
          <tr> 
            <td id="PhoneDetailHead">Job Title&nbsp;</td>
            <td id="phoneresults"><%=(Telephone.Fields.Item("JobTitle").Value)%></td>
          </tr>
          <tr> 
            <td id="PhoneDetailHead">Department&nbsp;</td>
            <td id="phoneresults"><%=(Telephone.Fields.Item("department2").Value)%></td>
          </tr>
          <tr> 
            <td id="PhoneDetailHead">Site&nbsp;</td>
            <td id="phoneresults"><%=(Telephone.Fields.Item("siteadd").Value)%></td>
          </tr>
          <tr> 
            <td id="PhoneDetailHead">Fax&nbsp;</td>
            <td id="phoneresults"><%=(Telephone.Fields.Item("sitefax").Value)%></td>
          </tr>
          <tr id="phoneresults"> 
            <td colspan="3"><a href="http://intranet/phone/phoneForm.asp" title="New Search">New Search</a></td>
          </tr>

        </table>
        <%
Telephone.Close()
%> 
```

我将如何允许用户更新“Ext”字段？

最初，我用一个简单的两字段表单制作了一个模态窗口。我似乎无法在不丢失大部分代码的情况下将代码粘贴到此处。它的字段被赋予标签和 ID 'FullName' 和 'Ext'。

该表单使用 Get 方法将捕获的信息发送到下一页 action=phoneresults.asp，它本质上是同一页。在该页面上，我有以下更新查询：

```
<%
Dim FullName, Ext
Dim sConnString, connection, sSQL
FullName = Request.Form("FullName")
Ext = Request.Form("Ext")
sSQL = "INSERT into dbo.telephone.staffdetails (FullName, Ext) values ('" & FullName & "', '" & Ext & "')" 
%> 
```

模态窗口实际上没有必要。这只是突然出现（出现？）的第一种更新方式。在网上看了很长时间，我开始怀疑这是否真的是最简单的方法；是不是太复杂了？

我的更新查询大概是巨大的，我猜也是，我试图给它所需的信息的方式。我为此道歉。在网上搜索，我正在处理的代码似乎也非常古老。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:05:44.513

您写道，您正在使用带有 GET 方法的 FORM。

在这种情况下，您必须使用`Request.Querystring("Fullname")`来获取值。`Request.Form(...)`将用于 HTTP 方法 POST。

`Request("Fullname")`如果您不关心数据通过哪种方法进入，您也可以使用。

我只需要补充一点，您应该在将值放入 SQL 语句之前对其进行清理以防止 SQL 注入，但您可能已经知道这一点...... :)

# ios - 移除一个自定义的 MKOverlayView

> ID：16072871
> 
> 赞同：1
> 
> 时间：2013-04-18T01:10:39.050
> 
> 标签：ios, objective-c, mkmapview, mkoverlay

我正在使用子类`MKOverlay`和子类`MKOverlayView`来显示 WMS 磁贴。让它运行良好。

`MKOverlayView`当我完成显示瓷砖时，我遇到了删除的问题。我可以删除`MKOverlay`就好了：

```
-(void)removeWMSOverlay {    
    for (WMSOverlay *overlay in self.mapView.overlays) {
        if ([overlay isKindOfClass:[WMSOverlay class]]) {            
            MKOverlayView *test = [self.mapView viewForOverlay:overlay];

            [self.mapView removeOverlay:overlay];
        }
    }
} 
```

但是`WMSOverlayView`仍然存在并且仍在运行其代码（不断检查是否可以绘制新图块），这会产生一些滞后。

我不知道在哪里可以找到`MKOverlayViews`活跃的列表。我试过：

```
-(void)removeWMSOverlay {    
    for (WMSOverlay *overlay in self.mapView.overlays) {
        if ([overlay isKindOfClass:[WMSOverlay class]]) {            
            MKOverlayView *test = [self.mapView viewForOverlay:overlay];

            [self.mapView removeOverlay:overlay];

            [test removeFromSuperview];

            test = nil;
        }
    }
} 
```

没有效果。代码仍在运行。

甚至试图将它的引用保持为零：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {
    if ([overlay isKindOfClass:[WMSOverlay class]]) {

        WMSOverlayView *view = [[WMSOverlayView alloc] initWithOverlay:overlay];
        view.alpha = .8;

        self.wmsOverlayView = view;

        return view;
    }

    return FALSE;
}

-(void)removeScene {    
    for (WMSOverlay *overlay in self.mapView.overlays) {
        if ([overlay isKindOfClass:[WMSOverlay class]]) {            
            [self.mapView removeOverlay:overlay];

            self.wmsOverlayView = nil;
        }
    }
} 
```

我可以删除`MKOverlayView`还是我需要弄清楚如何重用视图？

编辑：

我尝试重用`MKOverlayView`：

```
else if ([overlay isKindOfClass:[WMSOverlay class]]) {
    self.wmsOverlayView = [[WMSOverlayView alloc] initWithOverlay:overlay];

    return self.wmsOverlayView;
} 
```

并添加了一个计时器来显示不止一个 MKOverLayView 正在运行：

```
-(void)amIStillHere {
    DLog("I'M STILL RUNNING | self: %@", self);
} 
```

它们不会被重复使用或消失：

```
 DEBUG | -[WMSOverlayView startTimer] | I'M STILL RUNNING | self: <WMSOverlayView: 0x1d84afe0; frame = (6.02801e+07 9.44092e+07; 2.30324e+06 2.10344e+06); opaque = NO; layer = <MKOverlayClusterProxyLayer: 0x21bf3ff0>>
 DEBUG | -[WMSOverlayView startTimer] | I'M STILL RUNNING | self: <WMSOverlayView: 0x21be1a80; frame = (6.06487e+07 9.2838e+07; 2.36776e+06 2.15038e+06); opaque = NO; layer = <MKOverlayClusterProxyLayer: 0x1d8e2a20>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T16:19:37.203

好奇的是，我添加了 NSCacheDelegate 以查看项目何时被驱逐（我担心每个项目都有一个 NSCache`WMSOverlayView`以及它们的行为和内存使用情况，我将缓存设置为 32mb 并且不想吞噬所有内存）。我尝试命名每个缓存，以便查看是否有两个缓存，我可以查看是否清除了旧缓存以在内存中为新缓存腾出空间。意识到每个缓存总是被命名为相同的：

```
-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay {
    if (self.wmsOverlayView == nil) {
        self.wmsOverlayView = [[WMSOverlayView alloc] initWithOverlay:overlay withCacheName:@"CACHE!"];
    }
    else {
        self.wmsOverlayView = [[WMSOverlayView alloc] initWithOverlay:overlay withCacheName:@"THE NEW BETTER CACHE!"];
    }

    return self.wmsOverlayView;
} 
```

我还注意到它`self.wmsOverlayView`总是`nil`并且总是命名缓存 CACHE!。因此，`wmsOverlayView`当覆盖层被移除时，确实会被移除。但我的计时器一直响。所以我重构了我的代码以删除计时器，当我删除 时`WMSOverlay`，缓存被清除（让我的`cache:willEvictObject:`NSLog 垃圾邮件）。

所以我相信计时器保持`WMSOverlayView`活力。

故事的寓意：不要在`MKOverlayView`.

# python - Python：如何为列表元素设置值

> ID：16072872
> 
> 赞同：0
> 
> 时间：2013-04-18T01:10:40.910
> 
> 标签：python

我有一个列表，比如说 named `mac`，它保存了 6 字节的 mac 地址。我想将最后一个字节设置为 0，然后我使用：

```
mac[5] = 0 
```

但这给了我错误：

```
TypeError: 'str' object does not support item assignment 
```

如何修复此错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T01:12:07.183

因为`mac`is a`str`并且字符串在 python 中是不可变的。

```
mac = list(mac)
mac[5] = '0'
mac = ''.join(mac) #to get mac in str 
```

或 use `bytearray`，它可以用作可变字符串。

```
>>> x = bytearray('abcdef')
>>> x
bytearray(b'abcdef')
>>> x[5] = '0'
>>> x
bytearray(b'abcde0')
>>> str(x)
'abcde0' 
```

# jquery - jQuery Show/Hide 做了一些奇怪的事情，隐藏了错误的元素

> ID：16072875
> 
> 赞同：-2
> 
> 时间：2013-04-18T01:11:01.013
> 
> 标签：jquery, image, hover, hide, show

因此，我编写了一个对我来说有意义的 jQuery 片段，但它正在做一些我不打算让它做的事情。在导航栏上，翻车时，我希望使用显示/隐藏功能在下方显示一个小图像。因此，例如，当我将鼠标悬停在“主页”上时，我希望我的 image.png 出现在它的下方。这是jQuery。

```
$("#home").hover(
function () {
$(this).show(".mustache_one");
},
function () {
$(this).hide(".mustache_one");
}
); 
```

现在它所做的是在悬停时，什么都没有，然后当从“主页”中移除鼠标时，将包含导航栏的整个 div 向左移动以隐藏“主页”链接。同时， image.png 永远不会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:18:55.297

您不能将元素 id/class 传递给`show`or `hide`。此外，`$this`将引用`#home`，因此它会尝试显示/隐藏 home 元素。我不知道你的标记，但这就是你的 JS 的样子。

```
$("#home").hover(
    function () {
        $('.mustache_one').show('slow');
    },
    function () {
        $('.mustache_one').hide('slow');
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:19:03.423

jQuery .show() 在你想要执行 .show 的对象上执行，例如 $ .hide `(".mustache_one").show();`() 也一样；

[http://api.jquery.com/show/](http://api.jquery.com/show/)

让我知道这是否有帮助，或者如果您有任何问题:)

# mysql - 使用 MYSQL 在一个查询中选择两个表中的 COUNT

> ID：16072876
> 
> 赞同：0
> 
> 时间：2013-04-18T01:11:07.703
> 
> 标签：mysql, sql

有没有办法我可以通过一个查询选择两个表的 COUNT。

目前我有以下内容，但无法正常工作。

```
SELECT 
COUNT(t1.id) as t1_amount,
COUNT(t2.id) as t2_amount
FROM
table1 t1,
table2 t2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T01:12:01.823

这是一种方法：

```
select (select count(*) from table1) as t1_amount,
       (select count(*) from table2) as t2_amount 
```

这是另一种方式：

```
select t1.t1_amount, t2.t2_amount
from (select count(*) as t1_amount from table1) t1 cross join
     (select count(*) as t2_amount from table2) t2 
```

您的方法不起作用，因为子句中`,`的. 这会在两个表之间进行笛卡尔积。`from``cross join`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T01:20:07.303

由于它们是两个独立的查询，并且您希望它们在同一个结果集中，请使用 UNION：

```
(SELECT COUNT(*) AS `table1_total` FROM `table1`)
  UNION
(SELECT COUNT(*) AS `table2_total` FROM `table2`); 
```

# c - C 中硬链接和它的程序之间的区别

> ID：16072883
> 
> 赞同：0
> 
> 时间：2013-04-18T01:12:09.360
> 
> 标签：c, linux, filesystems, diskspace, hardlink

我正在编写一个程序，它的功能类似于 Linux 上的磁盘使用实用程序，但在硬链接方面我遇到了麻烦。

我目前正在运行程序，它确定程序是否有硬链接。我在文件上使用 stat() 来确定这一点。

```
if (st.st_nlink > 1) 
```

当我运行它时，链接和它链接的程序都返回，但是磁盘使用实用程序只会报告程序而不是它的硬链接。

如何使用 C 在 Linux 中区分程序及其硬链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:38:26.883

首先，为什么您处理具有多个硬链接的不同*程序*和*数据文件？*

然后，重要的不是名称或它们的编号（请注意硬链接会向文件添加另一个名称），而是[inode](http://en.wikipedia.org/wiki/Inode)。对于具有多个硬链接的“文件”（即一个 inode），指向同一个 inode 的所有名称都具有相同的权限（没有“主”名称，指向同一个 inode 的所有名称都是等效的）。

因此，在调用[stat(2)](http://man7.org/linux/man-pages/man2/stat.2.html)系统调用后，您希望同时使用`st_dev`和`st_ino`字段。它们一起唯一标识一个文件，即它的 inode。

因此，对于带有 的文件，`st.st_nlink>1`您可能会将 ( `st_dev`, `st_ino`) 对添加到某个哈希表或集合容器中。

在 C++ 中你甚至可以使用一些`std::set<std::pair<dev_t,ino_t> >`，但在 C 中你必须制作这样一个容器。

注意：一个文件（例如一些 inode）甚至可以有零名（例如，如果在`unlink(2)`之后调用了一个系统调用`open(2)`），这就是临时文件的制作方式。

# actionscript-3 - AS3 Hamcrest - 断言一个数组包含另一个数组

> ID：16072884
> 
> 赞同：2
> 
> 时间：2013-04-18T01:12:21.280
> 
> 标签：actionscript-3, apache-flex, unit-testing, hamcrest

我正在尝试使用 Flashbuilder 4.7 环境附带的 Hamcrest 匹配器。我有 2 个数组，数组 A 和数组 B。我想要做的是确保在 A 中找到 B 的所有成员，而不管顺序如何。我正在寻找类似这样的东西。

```
var a:Array = new Array( 1, 2, 3, 4);
var b:Array = new Array( 1, 2, 3, 4 );

//Both arrays contain the same values so this should
//return true
assertThat( a , hasEachAndEveryLastOneInsideOfIt(b)); 
```

现在我已经尝试了“allOf”和“hasItems”，但我不太能掌握语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:17:37.747

这应该有效：

```
assertThat(a, hasItems.apply(null, b)) 
```

当然，这会检查 中的所有项目`b`是否包含在 中`a`，这意味着`a`可以包含其他附加值。如果您想断言`a`并且`b`还具有相同数量的值，那么`assertEquals(a.length, b.length)`我很好。

这里的诀窍是使用`Function.apply()`因为`hasItems()`不需要数组而是`...rest`样式参数。

作为旁注，`allOf()`旨在为测试值创建匹配器列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T10:26:39.113

这是使用自定义 hamcrest 匹配器处理此问题的要点。

用法：assertThat(a,arrayExact(b));

Matcher 类：

[https://gist.github.com/jamieowen/5480802](https://gist.github.com/jamieowen/5480802)

以及速记“arrayExact()”函数访问：

[https://gist.github.com/jamieowen/5480819](https://gist.github.com/jamieowen/5480819)

它也应该匹配二维数组。

# google-app-engine - 如何强制所有请求在 appengine 中的自定义域上使用 https？

> ID：16072890
> 
> 赞同：3
> 
> 时间：2013-04-18T01:12:42.167
> 
> 标签：google-app-engine, ssl, python-2.7, https

我已经设置了我的证书。[http://www.example.com](http://www.example.com)和[https://www.example.com](https://www.example.com)都可以。

但是，我想将所有流量从[http://www.example.com](http://www.example.com)路由到[https://www.example.com](https://www.example.com)。

我怎样才能用 appengine 做到这一点？我正在使用 Python。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T04:16:19.650

Add this to your app.yaml:

```
handlers:

- url: YOUR_URL
  script: YOUR_SCRIPT
  secure: always 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-31T14:07:27.257

这是一篇较旧的帖子，但当我试图弄清楚如何自己使用最新的 GAE Flex 环境执行此操作时，我不断遇到它。我们正在使用 Django，而我们必须用来强制 SSL 的标头/键是：

```
SECURE_SSL_REDIRECT = True
SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')

SECURE_HSTS_SECONDS = 31536000  # - One Year
SECURE_HSTS_INCLUDE_SUBDOMAINS = True

SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True
SESSION_EXPIRE_AT_BROWSER_CLOSE = True 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T04:31:40.293

[从谷歌文档](https://cloud.google.com/appengine/docs/python/config/appconfig#Python_app_yaml_Secure_URLs)中提取

```
handlers:
- url: /youraccount/.*
  script: accounts.py
  login: required
  secure: always 
```

> always - 与此处理程序匹配但不使用 HTTPS 的 URL 请求会自动重定向到具有相同路径的 HTTPS URL。为重定向保留查询参数。

# ios - UICollectionViewCells 未出现在 UICollectionView 中

> ID：16072891
> 
> 赞同：21
> 
> 时间：2013-04-18T01:12:47.023
> 
> 标签：ios, uicollectionview, uicollectionviewcell

正如标题所示，我有`UICollectionView`一个`UIViewController`通过 IB 连接的。我有一个`UICollectionView`名为`imageCell`. 在 viewcontroller`viewDidLoad`方法中，我像这样注册类：

```
CGRect collectionViewRect = CGRectMake(384, 60, 728, 924);
UICollectionViewFlowLayout *flow = [[UICollectionViewFlowLayout alloc] init];
imageCollectionView = [[UICollectionView alloc] initWithFrame:collectionViewRect collectionViewLayout:flow];
[imageCollectionView registerClass:[imageCell class] forCellWithReuseIdentifier:@"Cell"];
imageCollectionView.delegate = self;
imageCollectionView.dataSource = self; 
```

然后我调用一个从服务中获取照片的方法`getPhotos`in `viewDidAppear`（出于 UI 原因），然后我调用`[imagCcollectionView reloadData];`inside `getPhotos`。

然后在`cellForItemAtIndexPath`我执行以下操作：

```
imageCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
GRKAlbum *album = [albums objectAtIndex:indexPath.item];
cell.titleLabel.text = album.name;
return cell; 
```

我知道我在这里没有做错任何事情，因为正在调用该方法并且`cell`is not`nil`也不是`album`。

所以，当我运行所有这些代码时，会`UICollectionView`出现，但里面什么都没有。我能看到的只是`collectionView`. 任何帮助都将不胜感激。

注意：我在制作课程时没有为课程创建 XIB，`imageCell`我使用的是 Storyboard。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-04-18T04:23:55.097

有一些方法可以调试这种情况。

1.  注册**UICollectionViewCell**类而不是您的**customCell**并设置单元格的背景颜色`cellForItem...`

2.  如果单元格出现在第一步中，请尝试使用您自己的单元格类并设置其背景

**你在用故事板吗？然后..**

您不必为集合视图注册任何单元格。您可以使用原型单元，只需为单元提供正确的 id。您可以设计原型单元中的所有内容。并非所有情况都需要自定义类。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-04-18T04:32:46.027

如果您在情节提要中创建了单元格，则只需删除 register 类语句。如果您在情节提要中制作单元格，则不需要注册任何内容（对于集合视图或表格视图）（实际上，如果这样做，它会搞砸）。您唯一需要做的就是确保您在 IB 中设置了标识符。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-01-11T14:04:38.920

我用下面的行替换常规`registercell`行解决了同样的问题

```
[self.collection registerNib:[UINib nibWithNibName:@"nibname" bundle:nil] forCellWithReuseIdentifier:identifier]; 
```

Swift 4.2 版本：（感谢 Nikolay Suvandzhiev）

```
self.collection.register(UINib(nibName: "nibname", bundle: nil), forCellWithReuseIdentifier: identifier)
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-17T21:44:17.010

当我意识到我的收藏视图单元格被我的导航栏覆盖时，我感觉自己像个傻瓜。所以，请确保您的导航栏（如果有的话）没有覆盖您正在测试的集合视图单元格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-07T06:58:08.390

错误在于您注册 Nib/Xib 文件的方式（使用 Swift 5）：

使用此注册方法：

```
myCollectionView.register(UINib(nibName: "myCustomCell", bundle: nil), forCellWithReuseIdentifier: "myCustomCell") 
```

而不是这个：

```
myCollectionView.register(myCustomCell.self, forCellWithReuseIdentifier: "myCustomCell") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T06:32:20.287

您正在代码中实例化一个新的集合视图，但没有将视图添加到屏幕上。您说您已经在使用情节提要，我猜您可以看到情节提要中的集合视图，大概没有连接到数据源或委托？要么，要么你没有在正确的集合视图上调用 reload。

在情节提要中配置您的集合视图（并为必须在代码中完成的任何事情设置一个出口）或完全在代码中设置它。目前我认为你有两个集合视图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-28T12:48:36.360

我使用 Xcode 6.2 故事板制作它。希望能帮助到你

```
#import <UIKit/UIKit.h>

@interface InfoSecurity : UIViewController
@property (strong, nonatomic) IBOutlet UICollectionView *tabsCV;

@end

.m
**************

#import "InfoSecurity.h"
#import "TabsCell.h"

@interface InfoSecurity ()<UICollectionViewDataSource,UICollectionViewDelegateFlowLayout>

@end

@implementation InfoSecurity

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    [self.tabsCV registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"TabsCell"];

}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return 03;
}
- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 01;
}
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    return CGSizeMake(90, 50);
}
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *reuseIdentifier = @"tabscellID";

    TabsCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:reuseIdentifier forIndexPath:indexPath];

    cell.TabTitleLabel.text= @"OPTIONS";

    return cell;

}
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-16T23:10:10.533

有时集合视图单元格是黑色的（与背景颜色相同，不可见，隐藏不），重新加载可见单元格是一种解决方法。

# wordpress - 如何将标签附加为类

> ID：16072893
> 
> 赞同：0
> 
> 时间：2013-04-18T01:13:03.693
> 
> 标签：wordpress

在遍历所有帖子的 for 循环中，如何将帖子的所有标签附加为 div 类的一部分？

```
 <?php
      $page_name = $wp_query->post->post_name;
      query_posts('category_name='. $page_name .'&posts_per_page=-1&orderby=date&order=DESC');
      ?>
          <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
              <div class="galleryItem ">
                    <a href="<?php the_permalink(); ?>"><?php the_post_thumbnail(); ?></a>
                   <div class="titlePlate">
                      <h3><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"> <?php the_title(); ?></a></h3>
                  </div><!--END titlePlate-->
              </div><!--END galleryItem-->        

          <?php endwhile; else: ?>

              <p>Sorry, no posts matched your criteria.</p>

          <?php endif; ?><?php wp_reset_query(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:37:10.910

您可以使用以下代码打印帖子的所有标签：

```
<?php
$postid = get_the_ID(); 
$tags = wp_get_post_tags($postid);

foreach ($tags as $tag) {
echo $tag->name . " "; //put a space to seperate every tag.
}
?> 
```

这些代码将显示帖子的所有标签，然后您可以将其插入到您需要的确切 Div 的 class 属性中。

# javascript - 如何使用 jquery 滚动到模式中的元素？

> ID：16072895
> 
> 赞同：13
> 
> 时间：2013-04-18T01:13:19.987
> 
> 标签：javascript, jquery, html, scroll, modal-dialog

我有一个打开的模式，我将元素逐行插入。每行都有自己的 ID 标签。目前，随着列表变得比模态窗口大，文本只是隐藏在模态窗口的底部。您可以手动使用滚动条，但我希望文本在打印时在模式窗口中向上滚动。

我玩过以下代码，但这只是滚动模态后面的网页。我也尝试用模态元素替换“html，body”无济于事。

```
$('html, body').animate({ scrollTop: $('#Element').offset().top }, 500); 
```

我确定我关门了。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T01:50:34.580

看起来您正在对 html 和 body 调用 animate 方法。

```
$('html, body').animate(...); 
```

如果要滚动模态窗口，则必须改为在该元素上调用 animate 方法。

```
$('#modal').animate(...); 
```

`#modal`包含您创建的元素的元素在哪里。

编辑：

我看到您试图在模态框上调用动画。 [这](http://jsfiddle.net/CGQJ7/2/)是一个小提琴，当您单击按钮时，它会在模式中滚动元素。

同样在代码中，您有一个右括号，之后`#Element`会导致脚本出错：`...scrollTop: $('#Element'])...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:29:08.980

如果您想查看隐藏的内容，可以向 DIV 添加 CSS 样式以处理溢出。一旦内容超出DIV的视图区域，这将自动为您创建一个垂直滚动条。

```
$("#someDivID").css("overflow","auto"); 
```

所有属性都可以在下面的 URL 中引用。

[http://www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-20T13:02:37.940

如果您想将其与 Bootstrap 模态一起使用，请务必使用

```
$("#modalcontent").animate(...); 
```

因为它是具有滚动条的模态内容。

在要显示的内容之后使用占位符也可能很有用。考虑一下：你有一个模态，最后你有一个按钮，例如在你的模态中提交一个表单。提交完成后，您可能希望在模式中显示确认或错误。因为您要显示的消息不应该放在表单中，所以您可能希望将其放在按钮下方。但是，如果您的模式已经有滚动条，则在显示您的消息时它不会自动滚动，例如使用 Bootstrap 警报。那是因为上面的解决方案引用了您消息的上角。要解决此问题，您可以向您的位置添加偏移量，例如

```
$("#modalcontent").animate({scrollTop: $('#messagebox').offset().top + offset}, 200); 
```

或者您可以在警报下方添加一个占位符。

```
$("#modalcontent").animate({scrollTop: $('#placeholder').offset().top}, 200); 
```

有时将这两个选项结合起来是合适的，例如，当您的表单中有其他警报时，当您显示提交消息时仍然可见。

# html - 如何在 nodejs 中获取 HTML 页面？

> ID：16072899
> 
> 赞同：0
> 
> 时间：2013-04-18T01:14:07.000
> 
> 标签：html, node.js

**测试.html**

```
<html>
    <head>
        <title>Test Page</title>
    </head>
    <body> This is the body</body>
</html> 
```

我该如何修改：

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

返回上面的**test.html**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:25:36.317

这是一个简单的流式静态服务器的示例

```
var basepath = '/files'

http.createServer(function (req, res) {
  if (req.method !== 'GET') {
    res.writeHead(400);
    res.end();
    return;
  }
  var s = fs.createReadStream(path.join(basepath, req.path));
  s.on('error', function () {
    res.writeHead(404);
    res.end();
  });
  s.once('fd', function () {
    res.writeHead(200);
  });
  s.pipe(res);
}); 
```

在实践中，您应该使用 express.static：[http ://runnable.com/UWw3g0PKxoAWAA6K](http://runnable.com/UWw3g0PKxoAWAA6K)

或像[https://github.com/jesusabdullah/node-ecstatic这样的专用静态模块](https://github.com/jesusabdullah/node-ecstatic)

# c - 在字符串中查找未知单词

> ID：16072900
> 
> 赞同：0
> 
> 时间：2013-04-18T01:14:11.923
> 
> 标签：c

我正在构建一个简单的菜单，但提出了一个疑问：用户将拥有一些已定义的命令，例如，一个条目将是“compact image < filename >.jpeg”。如何从字符串中间获取文件名和扩展名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:54:21.883

使用**strstr**在“haystack”中查找“needle”的实例 - 例如，它将返回“.”的索引，您可以使用该索引构造包含文件名和扩展名的新字符串。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:19:18.220

如果这是您需要从中获取文件名的字符串的实际示例，则可以：

1.  拆分将分隔符定义为空格的字符串
2.  取拆分的最后一个位置，并将所有内容带到 fileExtension 或 Period

# javascript - window.postMessage 的 DOM 异常 12

> ID：16072902
> 
> 赞同：1
> 
> 时间：2013-04-18T01:14:36.927
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在学习构建 Chrome 扩展程序，并且正在尝试遵循[此处](https://developer.chrome.com/extensions/content_scripts.html#host-page-communication)官方指南中的说明之一。

我想要完成的是：

1.  background.js 显示目标 URL 的页面操作。
2.  页面操作在单击时执行脚本。
3.  执行的脚本在页面上注入 javascript。

到目前为止，一切都很好！我使用以下脚本注入页面。

```
var injectJS = function(url, cb) {
    var h = document.getElementsByTagName('head')[0],
        s = document.createElement('script');
    s.type = 'text/javascript';
    s.src = url;
    if (cb)
        s.onload = cb;
    h.appendChild(s);
};
injectJS(chrome.extension.getURL('script/do_something.js')); 
```

现在，我希望注入的脚本能够与扩展通信。
看来我正在寻找的是文档中描述的内容。

[https://developer.chrome.com/extensions/content_scripts.html#host-page-communication](https://developer.chrome.com/extensions/content_scripts.html#host-page-communication)

问题是，当我尝试执行`window.postMessage`控制台显示错误“DOM Exception 12”时。

* * *

编辑：运行示例代码的第一个问题已解决。
我从 smae 代码中得到的另一个错误来自`port.postMessage`：

`Uncaught Error: Attempting to use a disconnected port object`

这是代码：

```
var port = chrome.runtime.connect();

// Respond to messages from the injected script to collect results
window.addEventListener('message', function(e) {
    if (e.source != window)
        return;
    if (e.data.type && (e.data.type == 'FROM_PAGE')) {
        console.log('Content script received: %s', e.data.text);
        port.postMessage(e.data.text);
    }
}, false); 
```

基本上我试图在页面重新加载时暂时保留一些数据。内容脚本/注入脚本收集数据，然后加载下一页。后台脚本应该保存结果，直到所有页面都已加载。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T10:44:21.263

不要将`port.postMessage`contentscript.js 示例中的 与`window.postMessage`.

[`port.postMessage`](https://developer.chrome.com/extensions/runtime.html#type-Port)是一个 Chrome 扩展特定的 API，旨在在扩展内传递消息，同时[`window.postMessage`](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)是一种用于与框架通信的 JavaScript 方法。第二个参数 to`window.postMessage`是必需的，用于验证是否允许目标接收消息。

在您的情况下，使用通配符可能就足够了，因为您正在从页面向自身发送消息：

```
window.postMessage({ type: "FROM_PAGE", text: "Hello from the webpage!" }, **"*"**);
                                                                           **^^^**
```

# java - 如何将对角线转到另一侧？

> ID：16072908
> 
> 赞同：1
> 
> 时间：2013-04-18T01:15:34.710
> 
> 标签：java, diagonal

我有这个代码，但它正在打印这样的对角线......我想从右上角到左下角，知道如何转动它吗？

```
*
 *
  *
   *
    * 
```

代码：

```
class Diagonal {
    public static void main(String args[]) {
        int row, col;

        String spaces = " ";

        for( row = 1; row < 6; row++) {
            System.out.println(spaces +"*");
            spaces += " ";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:18:36.127

您可以通过为每个额外的行插入一个空格来构建对角线。因此，如果你从一些行开始并删除一个空格，你应该得到一个反转。但是我们需要清理我们如何处理空格，以便我们可以更轻松地减去每行的数字。

```
class Diagonal{
  public static void main(String args[]) {
    int row, col;
    for( row = 6; row > 0; row--) {
      for (int x = 0; x < row; x++) {
        System.out.print(" ");
      }
      System.out.print("*\n");//note carriage return
    }
  }
} 
```

# go - 在 Go 中获取图像的子图像时遇到问题

> ID：16072910
> 
> 赞同：11
> 
> 时间：2013-04-18T01:15:48.217
> 
> 标签：go

我正在 Go 中进行一些图像处理，并且正在尝试获取图像的子图像。

```
import (
  "image/jpeg"
  "os"
)
func main(){
  image_file, err := os.Open("somefile.jpeg")
  my_image, err := jpeg.Decode(image_file)
  my_sub_image := my_image.SubImage(Rect(j, i, j+x_width, i+y_width)).(*image.RGBA)
} 
```

当我尝试编译它时，我得到`.\img.go:8: picture.SubImage undefined (type image.Image has no field or method SubImage)`.

有什么想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-18T21:09:37.843

这是另一种方法 - 使用类型断言来断言`my_image`具有`SubImage`方法。这适用于任何具有该方法的[图像](http://golang.org/pkg/image)`SubImage`类型（除了`Uniform`快速扫描之外的所有图像类型）。这将返回另一个`Image`未指定类型的接口。

```
package main

import (
    "fmt"
    "image"
    "image/jpeg"
    "log"
    "os"
)

func main() {
    image_file, err := os.Open("somefile.jpeg")
    if err != nil {
        log.Fatal(err)
    }
    my_image, err := jpeg.Decode(image_file)
    if err != nil {
        log.Fatal(err)
    }

    my_sub_image := my_image.(interface {
        SubImage(r image.Rectangle) image.Image
    }).SubImage(image.Rect(0, 0, 10, 10))

    fmt.Printf("bounds %v\n", my_sub_image.Bounds())

} 
```

如果您想经常这样做，那么您将使用`SubImage`接口创建一个新类型并使用它。

```
type SubImager interface {
    SubImage(r image.Rectangle) image.Image
}

my_sub_image := my_image.(SubImager).SubImage(image.Rect(0, 0, 10, 10)) 
```

[类型断言](http://golang.org/ref/spec#Type_assertions)的常见警告适用 -`,ok`如果您不想恐慌，请使用该表单。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-18T01:27:30.397

因为`image.Image`没有方法`SubImage`。您需要使用类型断言来获取适当的`image.*`类型。

```
rgbImg := img.(image.RGBA)
subImg := rgbImg.SubImage(...) 
```

# core-data - iOS UICollectionView 和 CoreData

> ID：16072911
> 
> 赞同：0
> 
> 时间：2013-04-18T01:15:49.330
> 
> 标签：core-data, ios6, uicollectionview

我是 iOS 新手，但仍在努力了解基础知识（我的新手免责声明）。我开始使用持久数据并使用 uicollectionview 呈现这些数据。

我可以使用数组创建单元格和正确的数量，但与核心数据交互的正确数量的单元格存在问题。我将尝试一个示例来澄清：我有一个具有名字和姓氏属性的实体人。假设我有 1 人得救。当我在部分中获得我的对象数量时，我为我的 1 个人获得 1 个对象。这个数字用于创建单元格的数量，对于我的 1 个人来说是 1。我想为每个人创建 2 个单元格（一个用于名字，一个用于姓氏），但我无法弄清楚。我尝试将每个实体放入自己的部分，然后使用算术在部分中返回 2 * #of 个实体，但帽子崩溃了。

这似乎很简单，但我无法弄清楚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:04:39.193

在 numberOfSectionsInCollectionView::

```
return 1; 
```

在 collectionView:numberOfItemsInSection::

```
return fetchedData.count*2; 
```

在 collectionView:cellForItemAtIndexPath::

```
Person *p = fetchedData[indexPath.row/2]; // integer division
...
cell.textLabel = indexPath.row % 2 ? 
        p.firstName     // odd row number
       :p.lastName;     // even row number 
```

# keyboard - 如何在 Mac OS X 中为自定义键盘创建自定义键修饰符

> ID：16072918
> 
> 赞同：0
> 
> 时间：2013-04-18T01:16:30.813
> 
> 标签：keyboard, applescript, keyboard-maestro

我要从罗技购买键盘：适用于 Android 的罗技平板电脑键盘。我想将它用于我的 macbook。

键盘上没有“命令”键，它只有“搜索”键替换“空格键”键之前和“alt”键之后的“命令”键。但是“搜索”键不能用作“命令”键，它也没有在 mac 键盘首选项中识别。

所以我尝试使用键盘大师，找不到任何功能将“搜索”键重新映射到“命令”键。然后我尝试在 Keyboard Maestro 中使用 Apple Script，如下图所示，但它没有像我预期的那样工作。当我按下“搜索”键+“z”时，我猜它的行为应该像“命令”+“z”，但事实并非如此，我应该按两次“搜索”键然后按“a”，有时是“命令”事件仍然按下，所以在那之后我无法输入任何内容。

有没有办法让“搜索”键重新映射到“命令”键？

## [http://dl.dropboxusercontent.com/u/1550865/Keyboard_Maestro.png](http://dl.dropboxusercontent.com/u/1550865/Keyboard_Maestro.png)

[http://dl.dropboxusercontent.com/u/1550865/Keyboard_Maestro-2.png](http://dl.dropboxusercontent.com/u/1550865/Keyboard_Maestro-2.png)

如果屏幕截图没有出现，请使用以下 dropbox 链接：1) [http://dl.dropboxusercontent.com/u/1550865/Keyboard_Maestro.png](http://dl.dropboxusercontent.com/u/1550865/Keyboard_Maestro.png) 2) [http://dl.dropboxusercontent.com/u/1550865/Keyboard_Maestro- 2.png](http://dl.dropboxusercontent.com/u/1550865/Keyboard_Maestro-2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:39:16.837

尝试在 KeyRemap4MacBook中的[private.xml](http://pqrs.org/macosx/keyremap4macbook/xml.html.en)中添加类似这样的内容：

```
<autogen>__KeyToKey__ KeyCode::Q, KeyCode::COMMAND_L</autogen> 
```

如果可以，打开 EventViewer.app 看看搜索键是否有正常的键码。如果是例如 0x6e，则更`KeyCode::Q`改为`KeyCode::PC_APPLICATION`. 也可以添加[特定于设备的设置](http://pqrs.org/macosx/keyremap4macbook/xml-devicedef.html.en)。

请参阅[关键代码值](https://github.com/tekezo/KeyRemap4MacBook/blob/master/src/bridge/generator/keycode/data/KeyCode.data)和[预定义设置](http://raw.github.com/tekezo/KeyRemap4MacBook/master/Tests/lib/string/data/checkbox.xml)的来源。

# python - 添加键匹配的字典值

> ID：16072927
> 
> 赞同：1
> 
> 时间：2013-04-18T01:18:21.793
> 
> 标签：python, list, dictionary

我有一个字典列表，如下所示：

```
a=[{'a':1},{'b':2},{'c':3},{'a':-2},{'b':4}] 
```

我需要遍历列表并添加键匹配的值。结果应如下所示：

```
a=[{'a':-1},{'b':6},{'c':3}] 
```

对此的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T01:31:21.047

我能够用类似的东西来实现它

```
a = [{'a':1},{'b':2},{'c':3},{'a':-2},{'b':4}]
b = {}

for x in a:
    k,v = x.popitem()

    # Check if the key is already in our output dict
    if k in b.keys():
        b[k] += v

    # If not, create it
    else:
        b[k] = v 
```

哪个输出

```
b = {'a': -1, 'b': 6, 'c': 3} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T01:20:06.180

你可以使用`collections.Counter`：

```
from collections import Counter
a=[{'a':1},{'b':2},{'c':3},{'a': 4},{'b':4}]
result = sum((Counter(x) for x in a),Counter()) 
```

这导致：

```
Counter({'b': 6, 'a': 5, 'c': 3}) 
```

但是，要使用负数，您必须使用循环：

```
c = Counter()
a=[{'a':1},{'b':2},{'c':3},{'a':-2},{'b':4}]
for x in a:
    c.update(x) 
```

导致：

```
Counter({'b': 6, 'c': 3, 'a': -1}) 
```

这些方法使用一个`Counter`（类似于 multiset/bag），我认为它是一个比 1 元素字典列表更有用的数据结构，但如果你真的想要的话，应该很容易转换为你的数据结构。 .

```
[{k:v} for k,v in result.items()] 
```

如果订单很重要或其他东西，可能会排序`result.items()`......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T01:41:10.390

国际大学联盟：

```
from collections import defaultdict

def dicts_combine(dcts):

    cd = defaultdict(int)
    for subdict in dcts:
        for k,v in subdict.items():
            cd[k] += v

    dsplit = [{k: v} for k,v in sorted(cd.items())]

    return dsplit 
```

应该给出你想要的输出：

```
>>> a = [{'a':1},{'b':2},{'c':3},{'a':-2},{'b':4}]
>>> dicts_combine(a)
[{'a': -1}, {'b': 6}, {'c': 3}] 
```

您可以随意删除`sorted`。

# android - 如何防止活动标签在旋转时发生变化

> ID：16072935
> 
> 赞同：1
> 
> 时间：2013-04-18T01:18:51.133
> 
> 标签：android, android-activity

我用来`setTitle`在运行时更改活动标签。但是每次旋转手机时，活动标签都会变回其初始状态。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:34:35.637

`onSaveInstanceState()`您可以使用和保存和恢复您的 Activity 状态`onRestoreInstanceState()`。

防止方向改变也是一个好方法，但我想推荐使用这些功能为您的应用程序提供更大的灵活性。

有关更多信息，您可以查看此[链接](https://stackoverflow.com/questions/4096169/onsaveinstancestate-and-onrestoreinstancestate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:21:46.823

在清单文件中的活动声明中写入以下内容

```
android:configChanges="orientation" 
```

当方向改变时，它将阻止您的活动重新启动。

编辑：

从this [so answer](https://stackoverflow.com/a/456918/931982)建议将以下内容用于较新的api

```
android:configChanges="keyboardHidden|orientation|screenSize" 
```

# php - HTML Dom Parse 5000 + 项目

> ID：16072938
> 
> 赞同：1
> 
> 时间：2013-04-18T01:19:13.093
> 
> 标签：php, mysql, parsing

有没有办法有效地运行/编写下面的代码？

当我运行它（通过 chrome 浏览器）时，总是倾向于在第 500 项左右超时并将我重定向回我的主页。

```
<?php

include_once('config.php');
include_once('simple_html_dom.php');

for($i = 0; $i <= 5000; ++$i){

// Retrieve the DOM from a given URL
$html = file_get_html($url);

// Loop that checks through page contents and retrieves all required
foreach($html->find('div.product-details-contents') as $content) {
$detail['productid'] = $i;
$detail['title'] = $content->find('span.title', 0)->plaintext;
$detail['unit'] = $content->find('span.unit-size', 0)->plaintext;

$sqlstring = implode("','", $detail); 

$sql = "INSERT INTO `cdidlist` (`productid`, `title`, `unit`) VALUES ('$sqlstring')";

if (!mysqli_query($connect, $sql)) {
echo "Error: " . mysqli_error();
}
echo $id . " " . $detail['title'] . " Item Added SUCSESSFULLY! <br>";

    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:23:49.553

首先，移除`sleep(10);`应该可以为您节省大约 50,000 秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:28:09.653

您正在打开 5000 个网页并对其进行解析。不能那么有效地做到这一点。但是为了防止你的脚本死机，你可以在 for 循环中使用[set_time_limit](http://php.net/manual/en/function.set-time-limit.php) (600)，确保你[在 php.ini](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)中也有一个适当高的超时时间。

**编辑**：您不拥有服务器。这意味着您将不得不将其推到客户端。它会是这样的：

PHP：

```
if(isset($_REQUEST['i'])) {
   $i = (int) $_REQUEST['i']; // sanitize the input
   $error_message = false;
   /*
     load the page, parse the page and input it into the DB.
     If there is an error, save it to $error_message
   */
   if(!$error_message) {
       die(json_encode('ok')); // just die'ing is usually bad, but this is a one-off script
   } else {
       die(json_encode($error_message));
   }
} 
```

在您的 html 中：

```
<p id="status">Status</p>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
  $(function () {
     'use strict';
     var get = function (i) {
         if (i > 5000) {
             $('#status).html('complete');
         } else {
            $.get({
                url: window.location.href,
                data: {i: i},
                success: function (data) {
                   if(data === 'ok'){
                      $('#status').html('fetched ' + i);
                      get(i + 1);
                   } else {
                      $('#status').html('error fetching ' + i + ': ' + data);
                   }
                }  
            });
         }
     };
     get(0);
  });
</script> 
```

**编辑 2**：正如其他人所提到的，这很容易受到 sql 注入的影响。请参阅[PDO](http://php.net/manual/en/book.pdo.php)和[PDOStatement](http://www.php.net/manual/en/class.pdostatement.php)了解准备好的语句。

# python - 我如何更改 argparse 帮助参数的 registry_name

> ID：16072941
> 
> 赞同：3
> 
> 时间：2013-04-18T01:19:21.127
> 
> 标签：python, python-3.x, argparse

python3 argparse 总是使用 -h 和 --help 作为帮助参数。现在我想使用 -h 和 --host 作为主机名参数。如何停止 argparse 以使用 -h 寻求帮助？

我知道在创建 ArgumentParse 实例时可以使用 add_help=False。但后来我开始处理我自己的 print_help 。像这样：

```
import os
import argparse
from inc import epilog

def ParseCommandLine():
    parser = argparse.ArgumentParser(
        description = "Network client program",
        epilog = epilog,
        add_help = False,
        )
    parser.add_argument(
        "--help",
        dest="help",
        action="store_true",
        help="show this help message and exit",
    )
    parser.add_argument(
        "-h", "--host",
        dest="host",
        action="store",
        help="target host",
        )
    parser.add_argument(
        "-p", "--port",
        dest="port",
        action="store",
        type=int,
        help="target port",
        )

    return parser, parser.parse_args()

def Main():
    parser, opt = ParseCommandLine()
    if opt.help:
        parser.print_help()
        os.sys.exit(0) 
```

有用。但现在我想为主机和端口参数添加 required=True 。然后就破了。因为当您执行 python xxxx.py --help 时，argparse 看到您缺少所需的参数主机和端口，它只会向您抱怨，并且不显示帮助屏幕。

任何人都知道如何更改 argparse 帮助参数的默认 registry_name 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:52:25.643

使用 conflict_handler='resolve' 覆盖 register_name。

```
import os
import argparse
from inc import epilog

def ParseCommandLine():
    parser = argparse.ArgumentParser(
        description = "Network client",
        epilog = epilog,
        conflict_handler='resolve'
        )
    parser.add_argument(
        "-w", "--crlf",
        dest="crlf",
        action="store_true",
        help="use CRLF at the end of line"
        )
    parser.add_argument(
        "-l", "--line",
        dest="line",
        action="store_true",
        help="send line by line",
        )
    parser.add_argument(
        "-h", "--host",
        dest="host",
        action="store",
        required=True,
        help="target host",
        )
    parser.add_argument(
        "-p", "--port",
        dest="port",
        action="store",
        type=int,
        required=True,
        help="target port",
        )
    return parser, parser.parse_args()

def Main():
    parser, opt = ParseCommandLine()

if __name__ == '__main__':
    Main() 
```

让我们看看它是如何工作的

```
D:\pytools>python nc.py
usage: nc.py [--help] [-w] [-l] -h HOST -p PORT
nc.py: error: the following arguments are required: -h/--host, -p/--port 
```

是的，它可以按我的意愿工作

```
D:\pytools>python nc.py --help
usage: nc.py [--help] [-w] [-l] -h HOST -p PORT

Network client

optional arguments:
  --help                show this help message and exit
  -w, --crlf            use CRLF at the end of line
  -l, --line            send line by line
  -h HOST, --host HOST  target host
  -p PORT, --port PORT  target port

Report nc.py bugs to http://www.truease.com/forum-66-1.html 
```

是的，这也是我想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:44:23.167

您可以通过更改子类`argparse.ArgumentParser`化并覆盖该方法`error`

```
 self.print_usage(_sys.stderr) 
```

至

```
 self.print_help(argparse._sys.stderr) 
```

* * *

```
import argparse

class MyArgumentParser(argparse.ArgumentParser):
    def error(self, message):
        """error(message: string)

        Prints a usage message incorporating the message to stderr and
        exits.

        If you override this in a subclass, it should not return -- it
        should either exit or raise an exception.
        """
        self.print_help(argparse._sys.stderr)
        self.exit(2, argparse._('%s: error: %s\n') % (self.prog, message))

def parse_command_line():
    parser = MyArgumentParser(
        description="Network client program",
        # epilog = epilog,
        add_help=False,)
    parser.add_argument(
        "-h", "--host",
        dest="host",
        action="store",
        help="target host",
        required=True)
    parser.add_argument(
        "-p", "--port",
        dest="port",
        action="store",
        type=int,
        help="target port",)

    return parser, parser.parse_args()

parser, opt = parse_command_line() 
```

* * *

顺便说一句，您不需要添加`--help`参数，因为如果您省略它并且用户 types `--help`，该`error`方法将被相同地调用。

# variables - 在 powershell 中分配变量并传递给命令

> ID：16072942
> 
> 赞同：0
> 
> 时间：2013-04-18T01:19:56.680
> 
> 标签：variables, powershell

我正在尝试利用`get-mailboxfolderstatistics`命令行开关来获取分发列表中用户列表的某些收件箱文件夹的项目计数。

我使用`get-distributiongroupmember`命令行开关过滤“名称”​​并将其分配给一个变量。

这是我需要帮助的地方，也许有一个更简单的方法，我想将每个用户名传递给`get-mailboxfolderstats`命令的“身份”参数，以便脚本将为给定通讯组中的每个用户提供我我想要的文件夹统计信息。

感谢您的阅读和您的帮助。

到目前为止，我有：

```
$s = get-distributiongroupmember -identity 23rdFloor | Select Name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:07:41.420

您可以将组成员直接通过管道传输到 Get-MailboxFolderStatistics：

```
Get-DistributionGroupMember 23rdFloor |
Where-Object {$_.RecipientType -eq 'UserMailbox'} | 
Get-MailboxFolderStatistics 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:40:46.703

将结果传递给 foreach 命令应该可以工作；

> $s = get-distributiongroupmember -identity 23rdFloor | 选择姓名
> $s | ForEach-Object {get-mailboxfolderstatistics -identity $_.Name }

[http://www.mikepfeiffer.net/2010/02/exchange-management-shell-error-pipelines-cannot-be-executed-concurrently/](http://www.mikepfeiffer.net/2010/02/exchange-management-shell-error-pipelines-cannot-be-executed-concurrently/)

# java - 复制数组并对其进行操作

> ID：16072943
> 
> 赞同：0
> 
> 时间：2013-04-18T01:19:59.457
> 
> 标签：java, encapsulation

我之前问过一个关于克隆数组的问题，这样当您更改区域/缩放多边形等时......它不会更改数组的值（封装的基础知识）。在尝试将数组复制到另一个数组、使用克隆数组或使用数组列表后，我仍然遇到问题。任何人都对如何复制我的数组有任何建议，以便我可以对其进行更改，返回方法中的值，但仍然保持传递给构造函数的原始数组的完整性？Point 类定义了传入的值。我也会发布它。Polygon 创建了这些方法中的大部分。沮丧的...

```
 public class Point {

private double x;
private double y;

public Point(double x, double y) {
    this.x = x;
    this.y = y;
}

public double getX() {
    return x;
}

public double getY() {
    return y;
}

public Point translate(double dx, double dy) {
    return new Point(x+dx, y+dy);
}

public double distanceTo(Point p) {
    return Math.sqrt((p.x - x)*(p.x -x) + (p.y-y)*(p.y-y));
} 
```

}

```
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

 public class PolygonImpl implements Polygon {

   private double xSum=0;
    private double ySum=0;
    private Point[] points;
   private Point[] cloneList;
   private Point a;

  public PolygonImpl(Point[] points) {
 this.points = new Point[points.length];
 for (int i = 0; i < points.length; i++)
 this.points[i] = points[i];
}

public Point getVertexAverage() {
     double xSum = 0;
     double ySum = 0;
    for (int index = 0; index < points.length; index++) {
         xSum = xSum + points[index].getX();
         ySum = ySum + points[index].getY();
        }

    return new Point(xSum/getNumSides(), ySum/getNumSides());
}

public int getNumSides() {
    return points.length;
}

public void move(Point c) {
    Point a = getCentroid();
    Point newCentroid = new Point(a.getX()+ c.getX(), a.getY() +c.getY());

}

public void scale(double factor) {
    for (int index = 0; index < points.length; index++)
    {
        double x = points[index].getX() *factor;
        double y = points[index].getY() * factor;
        Point a = new Point(x,y);
        points[index] = a;

    }
}

public Point[] getPoints() {
   //  Point[] newPoints = new Point[0];
    //for (int i = 0; i <newPoints.length; i++)
    //{
    // newPoints = points.get(i);
    //}
    return points;

}

public Rectangle getBoundingBox() {
    double minX= 99999;
    double maxX= -999999;
    double minY= 999999;
    double maxY= -999999;

    for (int i = 1; i<points.length; i ++){
        if (points[i].getX()< minX )
        {
            minX= points[i].getX();
        }
        if (points[i].getX() > maxX)
        {
            maxX= points[i].getX();
        }
        if (points[i].getY()< minY )
        {
            minY= points[i].getY();
        }
        if (points[i].getY() > maxY)
        {
            maxY= points[i].getY();
        }

        Point a = new Point(minX, minY);
        Point b = new Point(maxX, maxY);
        //need for next three cases
    }
    return null;
            //new Rectangle(Point a, Point b);
}

public Point getCentroid() {
    double x = 0;
    double y =0;
    double something = 1/(6*getArea());
    for (int i = 0; i< points.length-1; i++)
    {
        x+= (points[i].getX() + points[i+1].getX())*(points[i].getX()*points[i+1].getY()-points[i+1].getX()*points[i].getY());
        y+= (points[i].getY() + points[i+1].getY())*(points[i].getX()*points[i+1].getY()-points[i+1].getX()*points[i].getY());
    }
        x = x*something;
        y= y*something;

    Point a = new Point(x,y);
    return a;
}

public double getArea() {
    double area = 0;
for (int i = 0; i <points.length-1; i++){
    area += points[i].getX()*points[i+1].getY() - points[i+1].getX()*points[i].getY();
}
    area = area/2;
return area;
}

public void move(double dx, double dy) {
    //ArrayList<Point> points = new ArrayList<Point> ();

    for (int index = 0; index < points.length; index++) {
        { double x = points[index].getX()+dx;
          double y = points[index].getY()+dy;
          Point a = new Point(x,y);

        }
}

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:46:05.057

我不确定你想在哪里克隆你的阵列；但是我相信您尝试过类似的方法：

```
// This won't work because you keep the same reference to the old objects
public Point[] cloneArrayOfPoints(Point[] points) {
    Point[] result = new Point[points.length];
    for (int i = 0; i < points.length; i++){
        result.points[i] = points[i];
    }
    return result;
} 
```

但是，你应该试试这个：

```
// This will work because you create new objects with same old values
public Point[] cloneArrayOfPoints(Point[] points) {
    Point[] result = new Point[points.length];
    for (int i = 0; i < points.length; i++){
        result.points[i] = new Point(points[i].getX(), points[i].getY());
    }
    return result;
} 
```

# c - 你能告诉我这有什么问题吗

> ID：16072950
> 
> 赞同：-1
> 
> 时间：2013-04-18T01:20:16.447
> 
> 标签：c

需要帮助，请需要帮助，请我的代码编译得很好，但是当我运行它时会出现段错误，我不知道为什么。我已经检查了很多次代码，但仍然不知道问题出在哪里。需要帮助。

```
void insertionSort(listNode ** listPtr, listNodeCompareFcn compare)
{

  listNode * sorted = *listPtr; 
  listNode * swapper; 
  listNode * prev; 
  int swapped; 

  while(sorted != NULL)
  {

    swapper = sorted -> next;
    prev = findprev(*listPtr, swapper);
    swapped = 0; 

    while(swapper != NULL && prev != NULL && swapper != *listPtr && compare(swapper,prev))

    { 
        swapNodes(*listPtr, prev, swapper); 
        prev = findprev(*listPtr, swapper); 
        swapped = 1;
    }

         if (!swapped) sorted = sorted -> next;

  }

}

static listNode * findprev(listNode * head, listNode * ptr){

    listNode * current = head;

    while (current -> next != NULL){
        if ((current -> next) == ptr) return current;
        current = current -> next;
   }    

  return NULL; 

} 

void swapNodes(listNode * head, listNode * l1, listNode * l2){

  listNode * prev = findprev(head, l1);
  prev -> next = l2;
  l1 -> next = l2 -> next;
  l2 -> next = l1; 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:16:11.513

我评论说：

> 我在 SSCCE 上做了足够多的工作，知道您的问题的主要部分是您对列表的头部不够小心。如果交换头节点和下一个节点，则需要更新头节点指针，否则会丢失链表的最前面。我可以肯定这只是问题的一部分[*实际上是整个问题*]。给定一个有效的列表，该`findprev()`函数可以正常工作。我认为，既`swapNodes()`不能也`insertionSort()`不能得到一份干净的健康单（*还没有！*）。例如，如果`findprev()`返回 NULL，则`swapNodes()`愉快地取消对 NULL 指针的引用；碰撞！

这是您的代码的 SSCCE 版本，更新了有关修复的反向通道信息，以`swapNodes()`在上面的评论中标识。该`compare()`函数原来是 C++ 风格的比较器，而不是 C 风格的比较器；也就是说，如果节点 1 在节点 2 之前，则返回 true，否则返回 false（而 C 样式的比较器返回 -1、0、+1 — 或者严格来说，负数、零、正数 — 对于小于、等于、大于）。只需修复`swapNodes()`接口和代码更改以及正确的比较器语义，列表就可以正确排序。几乎不是一个详尽的测试，而是一个好的开始。

```
#include <assert.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct listNode listNode;
struct listNode
{
    int datum;
    listNode *next;
};

typedef int (*listNodeCompareFcn)(const listNode *n1, const listNode *n2);
//static void swapNodes(listNode *head, listNode *l1, listNode *l2);
static void swapNodes(listNode **head, listNode *l1, listNode *l2);
static listNode *findprev(listNode *head, listNode *ptr);

static int node_compare(const listNode *n1, const listNode *n2)     // SSCCE
{
    assert(n1 != 0 && n2 != 0);
    printf("Compare: %2d and %2d\n", n1->datum, n2->datum);
    if (n1->datum < n2->datum)
        return 1;
//    if (n1->datum < n2->datum)
//        return -1;
//    else if (n1->datum > n2->datum)
//        return +1;
    else
        return 0;
}

static void insertionSort(listNode **listPtr, listNodeCompareFcn compare)
{
    listNode *sorted = *listPtr;

    while (sorted != NULL)
    {
        listNode *swapper = sorted->next;
        listNode *prev = findprev(*listPtr, swapper);
        int swapped = 0;

        while (swapper != NULL && prev != NULL && swapper != *listPtr && compare(swapper, prev))
        {
            //swapNodes(*listPtr, prev, swapper);
            swapNodes(listPtr, prev, swapper);
            prev = findprev(*listPtr, swapper);
            swapped = 1;
        }

        if (!swapped)
            sorted = sorted->next;
    }
}

static listNode *findprev(listNode *head, listNode *ptr)
{
    listNode *current = head;
    assert(current != 0);

    while (current->next != NULL)
    {
        if (current->next == ptr)
            return current;
        current = current->next;
    }

    return NULL;
}

// Update via email
void swapNodes(listNode **listPtr, listNode *l1, listNode *l2)
{
    listNode *prev = findprev(*listPtr, l1);
    if (prev == NULL)
    {
        l1->next = l2->next;
        *listPtr = l2;
        l2->next = l1;
    }
    else
    {
        prev->next = l2;
        l1->next = l2->next;
        l2->next = l1; 
    }
}

/*
static void swapNodes(listNode *head, listNode *l1, listNode *l2)
{
    listNode *prev = findprev(head, l1);
    prev->next = l2;
    l1->next = l2->next;
    l2->next = l1;
}
*/

static listNode *node_insert(listNode *head, int datum)     // SSCCE
{
    listNode *node = malloc(sizeof(*node));
    node->datum = datum;
    node->next = head;
    return node;
}

static void print_list(const char *tag, const listNode *list)       // SSCCE
{
    printf("%-8s", tag);
    while (list != 0)
    {
        printf(" -> %2d", list->datum);
        list = list->next;
    }
    putchar('\n');
}

int main(void)      // SSCCE
{
    static const int unsorted[] = { 29, 3, 14, 2, 91, 87, 13, 29, 1 };
    enum { NUM_VALUES = sizeof(unsorted) / sizeof(unsorted[0]) };
    listNode *head = 0;

    print_list("Empty:", head);
    for (int i = 0; i < NUM_VALUES; i++)
    {
        head = node_insert(head, unsorted[i]);
        print_list("Added:", head);
    }

    for (listNode *curr = head; curr != 0; curr = curr->next)
    {
        listNode *prev = findprev(head, curr);
        if (prev == 0)
            printf("%2d - no prior node\n", curr->datum);
        else
            printf("%2d - prior node %2d\n", curr->datum, prev->datum);
    }

    print_list("Before:", head);
    insertionSort(&head, node_compare);
    print_list("After:", head);

    return 0;
} 
```

SSCCE 的输出（包括诊断）：

```
Empty:  
Added:   -> 29
Added:   ->  3 -> 29
Added:   -> 14 ->  3 -> 29
Added:   ->  2 -> 14 ->  3 -> 29
Added:   -> 91 ->  2 -> 14 ->  3 -> 29
Added:   -> 87 -> 91 ->  2 -> 14 ->  3 -> 29
Added:   -> 13 -> 87 -> 91 ->  2 -> 14 ->  3 -> 29
Added:   -> 29 -> 13 -> 87 -> 91 ->  2 -> 14 ->  3 -> 29
Added:   ->  1 -> 29 -> 13 -> 87 -> 91 ->  2 -> 14 ->  3 -> 29
 1 - no prior node
29 - prior node  1
13 - prior node 29
87 - prior node 13
91 - prior node 87
 2 - prior node 91
14 - prior node  2
 3 - prior node 14
29 - prior node  3
Before:  ->  1 -> 29 -> 13 -> 87 -> 91 ->  2 -> 14 ->  3 -> 29
Compare: 29 and  1
Compare: 13 and 29
Compare: 13 and  1
Compare: 87 and 29
Compare: 91 and 87
Compare:  2 and 91
Compare:  2 and 87
Compare:  2 and 29
Compare:  2 and 13
Compare:  2 and  1
Compare: 14 and 91
Compare: 14 and 87
Compare: 14 and 29
Compare: 14 and 13
Compare:  3 and 91
Compare:  3 and 87
Compare:  3 and 29
Compare:  3 and 14
Compare:  3 and 13
Compare:  3 and  2
Compare: 29 and 91
Compare: 29 and 87
Compare: 29 and 29
After:   ->  1 ->  2 ->  3 -> 13 -> 14 -> 29 -> 29 -> 87 -> 91 
```

# java - 使用用户/输入确定的元素创建数组

> ID：16072953
> 
> 赞同：1
> 
> 时间：2013-04-18T01:20:31.470
> 
> 标签：java, arrays

尝试创建一个数组，并希望元素与输入的大小一样大。最终这应该需要 x 数量的数字，放在一个数组中，然后返回平均值。但首先我需要弄清楚如何在数组中放置元素的大小。

```
import java.util.Scanner;
import java.util.ArrayList;
//needs to be an array

public class statsv2
{
   public static void main (String args[])
    {
        int[] a= new int[5];
        Scanner sc=new Scanner(System.in);
        System.out.println("Please enter numbers...");
        for(int j=0;j<5;j++)
        {
            a[j]=sc.nextInt();
        }
     }
} 
```

所以我本质上希望'5'（出现两次）是用户不断输入新数字的次数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:26:45.607

首先，代替`j<5`，使用`yourArray.length`。

至于数组大小，这不能动态完成，您有三个选择：

1）创建一个足够大的数组以使用户不会超出它，您必须进行一些额外的检查才能在用户输入结束时停止。

2) 使用`ArrayList`可以动态添加的 ，然后在用户输入数据后调用 'toArray()' 以提取数组进行处理。

3）完全跳过数组并用于`ArrayList`保存和处理输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:31:05.917

数组的长度实际上不可能是动态的。我会做的一件事是将所有数据放入数组列表之类的结构中，然后当您到达输入末尾时，将该结构转换为数组。

像这样的东西会起作用。

```
import java.util.*;
import java.lang.Integer;

public class wut {
  public static void main(String[] args) { 
    ArrayList<String> list = new ArrayList<String>();
    Scanner scan = new Scanner(System.in);

    while (scan.hasNext())
    {   
      list.add(scan.next());
    }   

    //^D received.

    int[] a = new int[list.size()];
    for (int i = 0; i < list.size();i++)
    {   
      a[i] = Integer.parseInt(list.get(i));
    }   
    System.out.println(Arrays.toString(a));
  }   
} 
```

输出：

```
javac *.java

$ java wut
3
4
5
6
7
8
^D
[3, 4, 5, 6, 7, 8] 
```

对于您要查找的输入类型，请查看此问题的答案：[如何使用 Java Scanner 测试空白行？](https://stackoverflow.com/questions/7320315/how-to-test-for-blank-line-with-java-scanner)

# javascript - 轮播不适用于 jQuery Galleria

> ID：16072955
> 
> 赞同：0
> 
> 时间：2013-04-18T01:20:47.587
> 
> 标签：javascript, jquery, html, galleria

我正在使用 Galleria jQuery 幻灯片，但底部的缩略图轮播出现问题。我知道在代码中，如果存在“轮播”（在主页上显示的缩略图太多），缩略图容器 div 会添加一个 .carousel 类。这不会发生在我的身上，它只是显示溢出的缩略图。此外，左右导航项在加载时添加了 .disabled 类。

为什么会发生这种情况是否存在已知问题？我似乎无法弄清楚问题是什么。我在加载时在控制台中遇到的唯一错误是“未捕获的错误：致命错误：无法从 CSS 中提取舞台高度。跟踪高度：0px。” 但我不相信这是相关的（虽然可能）。幻灯片加载正常，出现此错误，除轮播外一切正常。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T22:30:00.903

您可能在某处设置了选项 carousel:false 。 `(http://jsfiddle.net/FGbN7/4/)`

# javascript - 如何避免使用自定义预输入显示 JSON 字符串

> ID：16072956
> 
> 赞同：1
> 
> 时间：2013-04-18T01:20:49.210
> 
> 标签：javascript, twitter-bootstrap, bootstrap-typeahead

我已经重写了 typeahead 方法以启用 AJAX 调用（获取 JSON 对象结果，因为我需要一个`name`要显示的字段和一个`url`要隐藏的字段）。

但这还不够，当用户记录一些研究时，一切正常，但是如果您选择结果，或者只是按`TAB`，输入中会出现 JSON 字符串，例如：

```
{
    "name":"test",
    "url":"http://mysite.com/test"
} 
```

我只想`name`在输入中显示该字段，就像我`dropbox`通过覆盖`highlighter`方法一样，但我不知道这是否可能。

```
highlighter: function (obj) 
{
    var item = JSON.parse(obj);
    var query = this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&')
    return item.name.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) 
    {
        return '<strong>' + match + '</strong>'
    });
} 
```

有没有办法做这个简单的事情？

我无法理解他们提供了我们可以覆盖的方法，如果我们不能......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:26:10.017

默认情况下，Typeahead 2.x 不允许存储或加载 JSON 数据。看起来您正在尝试在您的`highlighter`方法中解决这个问题`JSON.parse`，但您可以覆盖一些类似于[不同问题](https://stackoverflow.com/questions/16050356/make-twitter-bootstraps-typead-search-within-multiple-fields)的方法。

您可以覆盖 Typeahead 中的几乎任何方法，但是您必须作弊才能对`render`and执行此操作`select`，您需要将其从使用更改为`attr('data-value' ...)`，`data('value' ...)`就像我在另一个答案中所做的那样。

除此之外，您必须更改主动接触 JSON 对象的每一个方法：`highlighter`、`matcher`、`sorter`和`updater`.

因为您只想在突出显示中显示名称，所以您可以通过对上一个问题进行一些`highlighter`修改来避免更改`render`：

```
typeahead.render = function(items) {
    var that = this

    items = $(items).map(function (i, item) {
        i = $(that.options.item).data('value', item)  // <- modified for data
        i.find('a').html(that.highlighter(item.name)) // <- modified for .name
        return i[0]
    });

    items.first().addClass('active')
    this.$menu.html(items)
    return this
}; 
```

忽略`select`我在另一个答案中显示的 ，您仍然需要覆盖`matcher`、`sorter`和`updater`，其中包括`highlighter`，都可以通过传入的选项来完成：

```
var typeahead = $("#mytypeahead").typeahead({
    matcher: function (item) {
        return ~item.name.toLowerCase().indexOf(this.query.toLowerCase())
    },
    sorter: function (items) {
        var beginswith = []
            , caseSensitive = []
            , caseInsensitive = []
            , item

        while (item = items.shift()) {
            if (!item.name.toLowerCase().indexOf(this.query.toLowerCase())) beginswith.push(item)
            else if (~item.name.indexOf(this.query)) caseSensitive.push(item)
            // NOTE: they assume, by default, that all results contain the text
            else caseInsensitive.push(item)
        }

        return beginswith.concat(caseSensitive, caseInsensitive)
    },
    updater: function(item) {
        // NOTE: this is called when the user picks the option, so you can also
        //  use item.url here
        return item.name
    }
}); 
```

`sorter`在您覆盖的`source`方法调用之后调用`process`，这会启动其他所有操作。

# android - 为什么在调用 ArrayAdapter 时使用 simple_list_item_1

> ID：16072957
> 
> 赞同：0
> 
> 时间：2013-04-18T01:20:55.943
> 
> 标签：android, listview, concept

我知道 simple_list_item_1 是我们在创建列表视图时使用的预先编写的 xml 布局文件。
我们将它作为参数之一传递给 ArrayAdapter<> 的构造函数。但是为什么我们需要一个中间人呢？
这个构造函数的android手册说参数需要是“布局文件的资源ID，其中包含实例化视图时要使用的布局。” 但是我想了解为什么在我看到的所有示例中，他们使用 simple_list_item_1，而不是仅仅传入他们自己的包含他们想要填充的 ListView 的布局文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:44:40.703

很可能是因为易于使用现成的固定代码。如果不需要编写自己的布局，何必费心呢？但是，如果需要自定义，则制作自己的布局并通过它来代替。这是一个 SMS 应用程序教程的链接，该应用程序对 ListView 中的行使用自定义布局：

[http://adilsoomro.blogspot.com/2012/12/android-listview-with-speech-bubble.html](http://adilsoomro.blogspot.com/2012/12/android-listview-with-speech-bubble.html)

希望有帮助！

# java - 在对象名称中添加循环编号

> ID：16072961
> 
> 赞同：2
> 
> 时间：2013-04-18T01:22:05.963
> 
> 标签：java, arrays, object, cycle

我在 Java 中有这段代码

```
for (int j = 0; j < 8; j++) 
        {
            Boton[1][j].setIcon(PeonN);
            Peon PeonNegro = new Peon('N');
            Boton[6][j].setIcon(PeonB);
        } 
```

这是针对国际象棋的，我希望每个新对象都有循环的编号，在不创建数组的情况下独立使用它，有类似的东西

```
for (int j = 0; j < 8; j++) 
            {
                Boton[1][j].setIcon(PeonN);
                Peon PeonNegro+i = new Peon('N');
                Boton[6][j].setIcon(PeonB);
            } 
```

所以我会有 PeonNegro0、PeonNegro1 等等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:30:02.867

如果没有数组或`Collection`. （在 Java 中，很难使用动态变量名）。您必须声明类似数组或`ArrayList`在 for 循环之外的内容，如下所示。

```
Peon[] peons = new Peon[8];
for (int j = 0; j < 8; j++) 
{
    Boton[1][j].setIcon(PeonN);
    peons[j] = new Peon('N');
    Boton[6][j].setIcon(PeonB);
}

// So we can access a single peon like this
Peon p3 = peons[3];

// Or iterate over all peons and get the cycle number like this
for (int cycle_num = 0; cycle_num < 8; cycle_num++) {
    Peon peon = peons[cycle_num];

    // Do something with peon and cycle_num here

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:26:30.457

这不是 JAVA 的工作方式。如果您想要一个连续的变量列表，您的选择是使用数组或其中一个`Collection`对象。变量不能动态命名。

此外，值得注意的是，由于您在循环中声明了该变量`for`，因此该变量只能在循环的下一次迭代之前访问。也就是说，你甚至不能在循环之外使用变量，所以没有理由给它们编号。

# ruby - 为什么方法参数不适用于赋值？

> ID：16072965
> 
> 赞同：2
> 
> 时间：2013-04-18T01:22:54.160
> 
> 标签：ruby

在 Ruby 中，像许多语言一样，方法的参数不会自动分配为实例变量。

这有效：

```
def initialize(a)
  @a = a
end 
```

这不会：

```
def initialize(@a)
end 
```

例如，在 CoffeeScript 中，这是有效的：

```
constructor: (@name) -> 
```

Ruby 中还有很多其他语法糖，例如`||=`运算符、`&`符号上的一元等。有什么原因，技术或其他原因，为什么这个糖不是设计的一部分？

**编辑**

问题的范围不限于`initialize`.

在 CoffeeScript 你也可以做

```
class Foo
  baz: (@bar) -> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T05:46:03.640

原因是马茨是这样决定的，至少现在是这样。有相当多的支持者试图说服 Matz有一个[开放的功能请求。](https://bugs.ruby-lang.org/issues/5825)

请注意，您通常应该考虑从[`Struct.new(:name, ...)`](http://ruby-doc.org/core-2.0/Struct.html)哪个继承定义一个默认构造函数，以便您设置相应的实例变量，以及访问器、`==`、`eql?`、`hash`等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T01:34:18.763

在 Ruby 1.8 及更早版本中，块参数使用赋值语义而不是参数绑定语义，因此您可以这样做：

```
define_method(:initialize) do |@a| end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T01:37:16.763

在许多语言中这是不允许的，在 Ruby 中也是如此。例如，在 C++ 中，您不能直接在构造函数的参数列表中分配成员变量（使用初始化列表仍然需要您手动将参数复制到成员变量）。

*我个人认为`@a = a`在构造函数体中比`initialize(@a)`直接注入到对象成员变量中更干净。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T01:30:48.207

不知道你在追求什么。Ruby 2 之前的 Ruby 没有命名参数，因此要执行您所描述的操作，您需要同时传递名称和值。但在这种情况下，您不妨传递一个哈希，解析起来很简单，如下所示：[https ://stackoverflow.com/a/12763031/341994](https://stackoverflow.com/a/12763031/341994)

# c - 用 C 转换子网掩码前缀

> ID：16072967
> 
> 赞同：1
> 
> 时间：2013-04-18T01:22:56.430
> 
> 标签：c, ip-address, bitwise-operators

我想使用按位运算将 /24 之类的前缀转换为 255.255.255.0。

我试过像这样使用 unsigned int ：

```
unsigned int mask = -(1 << 32 - prefix); 
```

我正在考虑创建一个 while 循环，将 1 添加到正确的位置，然后递减到 0。

所有帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T01:46:26.683

利用

```
unsigned long mask = (0xFFFFFFFF << (32 - prefix)) & 0xFFFFFFFF;

printf("%lu.%lu.%lu.%lu\n", mask >> 24, (mask >> 16) & 0xFF, (mask >> 8) & 0xFF, mask & 0xFF); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:41:21.637

你有没有尝试过？

```
#include <stdint.h>
uint32_t mask = (-1) << (32 - prefix); 
```

一旦 -1 是 2-补码表示法中的 0xFFFFFFFF，它就可以工作

# objective-c - cocos2d中点击图片时访问网站

> ID：16072969
> 
> 赞同：0
> 
> 时间：2013-04-18T01:23:10.753
> 
> 标签：objective-c, url, web, cocos2d-iphone, ccsprite

我正在使用 cocos2d 制作一个应用程序来使用图像显示数据。我想将显示图像作为“链接”。因此，当用户点击图像时，它会打开一个特定的网站。我是第一次使用 cocos2d 和 Objective-c。我不知道该怎么做

任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:44:36.180

试试这个：

```
-(void)createImageButton
{
        CCSprite *image_1   = [CCSprite spriteWithFile:@"Image_1.png"];
        CCSprite *image_2   = [CCSprite spriteWithFile:@"Image_2.png"];

        CCMenuItemSprite *imageBtn = [CCMenuItemSprite itemFromNormalSprite: image_1
                                       selectedSprite:image_2
                                               target:self
                                             selector:@selector(imageBtnPress:) ];

        imageBtn.position = ccp(width*0.5f, height*0.5f);

        CCMenu  *menu = [CCMenu menuWithItems: imageBtn, nil];
        menu.position = ccp(0.0f, 0.0f);
        [self addChild: menu z:100];
}

-(void) imageBtnPress:(id)sender
{
    //here open website link
     [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.apple.com"]];
} 
```

# mips - MIPS：n选择k函数

> ID：16072970
> 
> 赞同：2
> 
> 时间：2013-04-18T01:23:39.020
> 
> 标签：mips

所以我目前正在用 MIPS 编写一个计算器，我正在尝试编写一个 n 选择 k 函数。我想使用的算法是这样的：

如果我想做 5 选择 3，那么我将有一个执行 (5*4*3)/(3*2*1) 的循环。假设我已经有乘法和除法函数，我将如何在 MIPS 中实现它？

现在我有这个，但它根本不起作用：

```
calnchoosek:
    move $t1, $a0
    move $t2, $a2

    move $t3, $a0 # copies for the counter
    move $t4, $a2

loop_top:
    beq $t3, $t4, loop_bottom
    subi $t3, $t3, 1

    move $a0, $t1
    move $a2, $t3
    jal multi
    move $t1, $v0

    j loop_top

loop_bottom:
    beq $t4, $zero, exit1
    subi $t4, $t4, 1

    move $a0, $t2
    move $a2, $t4
    jal multi
    move $t2, $v0

    j loop_bottom

exit1:
    move $a0, $t1
    move $a2, $t2
    jal divi 
```

我认为我的逻辑完全有缺陷，我可能不得不重新开始。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T02:23:25.207

在`loop_bottom`,`$t4`将在最后一次迭代中设置为 0。乘以`$t2`零，分母为零。`divi`正在计算 K*(N!-K!)/0 - 你除以零！

# google-maps-api-3 - Google Maps InfoWindow 有水平滚动条

> ID：16072971
> 
> 赞同：1
> 
> 时间：2013-04-18T01:23:46.977
> 
> 标签：google-maps-api-3, infowindow

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T10:13:32.857

在我的 ubuntu chrome 上，我没有水平滚动条，直到我向下滚动信息窗口内的文本末尾。此时会出现一个水平滚动条。

只需添加

`.gm-style-iw div { overflow:hidden !important; }`

在你的 CSS 中摆脱它

# javascript - Javascript 数字正则表达式测试失败 - 不知道为什么

> ID：16072977
> 
> 赞同：0
> 
> 时间：2013-04-18T01:24:23.273
> 
> 标签：javascript, regex

这是一个 jsFiddle：[jsFiddle](http://jsfiddle.net/BUpyd/)

相关代码：

```
var number = /\d+(.\d+)?/g;

$('body').append(number.test(2.5) + "<br>");
$('body').append(number.test(20) + "<br>");
$('body').append(number.test(2) + "<br>"); 
```

输出

```
true
false
true 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T01:28:24.893

摆脱`g`. 它不是必需的，它会导致正则表达式失败，因为 RegExp 对象根据之前的匹配跟踪其位置：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/测试](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)

> 与 exec （或与它结合使用）一样，在同一个全局正则表达式实例上多次调用 test 将超过上一次匹配。

[http://jsfiddle.net/BUpyd/1/](http://jsfiddle.net/BUpyd/1/)

# mysql - 运行 WEBrick 时出错：无法连接到 MySQL 服务器

> ID：16072979
> 
> 赞同：0
> 
> 时间：2013-04-18T01:24:28.010
> 
> 标签：mysql, ruby, ruby-on-rails-3, error-handling, webrick

嘿，我不知道该怎么做才能修复此错误消息。刚开始使用带有 Rails 的 ruby​​ 并尝试将其全部设置好，以便我可以了解更多信息，但并坚持尝试让 WEBrick 工作。任何事情都会有所帮助，谢谢！

```
 C:\Users\Brandon\Documents\Sites\simple_cms>rails server
=> Booting WEBrick
=> Rails 3.2.13 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_record/connec
tion_adapters/mysql_adapter.rb:411:in `real_connect': Can't connect to MySQL ser
ver on 'localhost' (10061) (Mysql::Error)
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/mysql_adapter.rb:411:in `connect'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/mysql_adapter.rb:131:in `initialize'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/mysql_adapter.rb:38:in `new'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/mysql_adapter.rb:38:in `mysql_connection'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_ 
record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/abstract/connection_pool.rb:325:in `checkout_new_conn
ection'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/abstract/connection_pool.rb:247:in `block (2 levels)
in checkout'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout
'
    from C:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_ 
record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/abstract/connection_pool.rb:102:in `block in connecti
on'
    from C:/Ruby193/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connecti   
on'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve
_connection'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/connection_adapters/abstract/connection_specification.rb:145:in `connecti
on'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.13/lib/active_
record/railtie.rb:88:in `block in <class:Railtie>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/initi
alizable.rb:30:in `instance_exec'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/initi
alizable.rb:30:in `run'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/initi
alizable.rb:55:in `block in run_initializers'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/initi
alizable.rb:54:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/initi
alizable.rb:54:in `run_initializers'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/appli
cation.rb:136:in `initialize!'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/railt
ie/configurable.rb:30:in `method_missing'
    from C:/Users/Brandon/Documents/Sites/simple_cms/config/environment.rb:5
:in `<top (required)>'
    from C:/Users/Brandon/Documents/Sites/simple_cms/config.ru:3:in `require
'
    from C:/Users/Brandon/Documents/Sites/simple_cms/config.ru:3:in `block i
n <main>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:
51:in `instance_eval'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:
51:in `initialize'
    from C:/Users/Brandon/Documents/Sites/simple_cms/config.ru:in `new'
    from C:/Users/Brandon/Documents/Sites/simple_cms/config.ru:in `<main>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:
40:in `eval'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:
40:in `parse_file'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:2
00:in `app'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/comma
nds/server.rb:46:in `app'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:3
04:in `wrapped_app'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:2
54:in `start'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/comma
nds/server.rb:70:in `start'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/comma
nds.rb:55:in `block in <top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/comma
nds.rb:50:in `tap'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.13/lib/rails/comma
nds.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我正在尝试一些不同的事情来完成这项工作，我看到有人说这可能是没有 gemfile opensll 或其他东西的问题，然后我读了另一件事，上面写着要尝试 rake db:create，我也收到了这个错误消息.

```
C:\Users\Brandon\Documents\Sites\simple_cms>rake db:create
Can't connect to MySQL server on 'localhost' (10061)
Couldn't create database for {"adapter"=>"mysql2", "encoding"=>"utf8", "reconnec
t"=>false, "database"=>"simple_cms_development", "pool"=>5, "username"=>"root",
"password"=>nil, "host"=>"localhost"}, charset: utf8, collation: utf8_unicode_ci

(if you set the charset manually, make sure you have a matching collation)
Can't connect to MySQL server on 'localhost' (10061)
Couldn't create database for {"adapter"=>"mysql2", "encoding"=>"utf8", "reconnec
t"=>false, "database"=>"simple_cms_test", "pool"=>5, "username"=>"root", "passwo
rd"=>nil, "host"=>"localhost"}, charset: utf8, collation: utf8_unicode_ci
(if you set the charset manually, make sure you have a matching collation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:07:10.253

[您需要在此处](http://dev.mysql.com/downloads/installer/)为​​ Windows 安装 mysql 。Mysql 不是 Ruby 环境的一部分，它不被 Bundler 和/或 Rails 处理。您的计算机上是否安装了 mysql 实例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:51:49.293

看起来任何配置信息`config/database.yml`都无效，或者您没有正确配置 MySQL 服务器。

从您收到的错误来看，您的 MySQL 服务器似乎没有运行，或者没有在您定义的端口上响应。

测试您是否可以使用`mysql`命令行工具或等效工具进行连接。

# memory-leaks - Gstreamer 元素内存泄漏

> ID：16072981
> 
> 赞同：0
> 
> 时间：2013-04-18T01:24:33.713
> 
> 标签：memory-leaks, gstreamer

如何在 gstreamer 元素/插件中找到内存泄漏问题？如何分析内存/对象泄漏/引用计数的 gst 引用计数？有什么例子吗？我正在使用appsrc 和appsink 将缓冲区推入和拉出gstreamer 管道。这些元素似乎存在一些内存问题。我有将数据提供给管道的实时源，通常要在 appsrc 和 appsink 上为实时源设置哪些属性？谢谢-opensid

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:42:16.140

您可以使用 valgrind (memcheck) 或 asan (address sanitizer) 等工具来检查此类问题。Refcount 问题很难找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T03:42:48.363

如果您使用的是 AppSrc 示例，那么有一个相当简单的解决方案就是将 Gst.Buffer 分配包装在 using 语句中。

EG 改变以下方法

```
static void PushAppData (object o, Gst.App.NeedDataArgs args) {
  ulong mseconds = 0;
  if (appsrc.Clock != null)
    mseconds = appsrc.Clock.Time / Clock.MSecond;
  Gst.Buffer buffer = DrawData (mseconds);
  appsrc.PushBuffer (buffer);
} 
```

对此

```
static void PushAppData (object o, Gst.App.NeedDataArgs args) {
  ulong mseconds = 0;
  if (appsrc.Clock != null)
    mseconds = appsrc.Clock.Time / Clock.MSecond;
  using(Gst.Buffer buffer = DrawData (mseconds))
    appsrc.PushBuffer (buffer);
} 
```

以前我的这个示例会在 <30 秒内崩溃。现在它一直运行，直到我杀死它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-15T11:14:21.477

尝试使用[Valgrind 工具](http://valgrind.org/docs/manual/quick-start.html)

看到这个样本： [http ://cs.ecs.baylor.edu/~donahoo/tools/valgrind/](http://cs.ecs.baylor.edu/~donahoo/tools/valgrind/)

# arrays - 基于列（双非字符）值对元胞数组进行排序

> ID：16072984
> 
> 赞同：3
> 
> 时间：2013-04-18T01:24:37.143
> 
> 标签：arrays, matlab, sorting, cell

我有一个 3x1 单元阵列 A，其中包括：

```
10.2  
15.2  
7.2 
```

另一个 3x1 单元阵列 B 包括：

```
m
l
s 
```

我想将这些加入到一个新的 3x2 单元阵列 C 中，包括：

```
10.2  m
15.2  l
7.2   v 
```

然后我想根据应该是的第一列的值对 C 进行排序

```
7.2 v
10.2 m
15.2 l 
```

到目前为止，我所做的如下：

```
C=A;
C(:,2)=B;
C=sortrows(C,1); 
```

然而结果是：

```
10.2 m
15.2 l
7.2 v 
```

我认为原因是它将第一列中的数字视为字符，并且对它们进行排序的方式是从左侧一个接一个地查看每个数字的数字。因此 10.2 小于 7.2。
我正在寻找一种将数字作为数字分配给 C 的方法，因此当我对它们进行排序时，它会将它们视为数字而不是字符。在将 A 和 B 分配给 C 时，我尝试使用 cell2mat，但没有奏效。我已经在网上搜索了这个，但找不到我要找的东西。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T02:05:30.623

这会做你需要的：

```
>>
C = cell(numel(A),2);
[Sorted_A, Index_A] = sort(cell2mat(A));
C(:,1) = num2cell(Sorted_A);
C(:,2) = B(Index_A); 
```

例如，对于如下输入：

```
>>
A = {10.2; 15.2; 7.2};
B = {'m'; 'l'; 'v'}; 
```

结果将是：

```
>> C

C = 

    [ 7.2000]    'v'
    [10.2000]    'm'
    [15.2000]    'l' 
```

## 编辑

在您的情况下，输入数组似乎`A`不仅仅是一个数字元胞数组，而是一个字符串元胞数组；即，例如，

```
>>
A = {'10.2'; '15.2'; '7.2'}; 
```

在这种情况下，您需要进行以下更改：

1.  使用`str2double(A)`代替`cell2mat(A)`
2.  使用`strtrim(cellstr(num2str(Sorted_A)))`代替`num2cell(Sorted_A);`

您的最终代码现在将是：

```
>>
C = cell(numel(A),2);
[Sorted_A, Index_A] = sort(str2double(A));
C(:,1) = strtrim(cellstr(num2str(Sorted_A)));
C(:,2) = B(Index_A); 
```

例如，对于如下输入：

```
>>
A = {'10.2'; '15.2'; '7.2'};
B = {'m'; 'l'; 'v'}; 
```

结果将是：

```
>> C

C = 

    '7.2'     'v'
    '10.2'    'm'
    '15.2'    'l' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T07:36:58.093

最简单的方法：使用来自的第二个输出`sort`：

```
% your data
a = {
    '10.2' 
    '15.2' 
    '7.2'
};

b = {
    'm'
    'l'
    's'
};

c = [a b];

% sort the first column, and save the indices    
[~,I] = sort(str2double(c(:,1)))

% use the indices to sort the concatenation c:
c(I,:) 
```

# orchardcms - 模块管理员的果园寻呼机

> ID：16072993
> 
> 赞同：0
> 
> 时间：2013-04-18T01:25:21.943
> 
> 标签：orchardcms

所以我编写了一个简单的模块，并通过 AdminMenu 显示特定 ContentItems 的列表。除了寻呼机外，一切都很好。寻呼机显示*所有*ContentItems 的计数，而不是过滤列表。我敢肯定，我错过了一些简单的事情，但我无法弄清楚。

这是我的控制器代码：

```
 public ActionResult List(ListContentsViewModel model, PagerParameters pagerParameters) {
        var pager = new Pager(_siteService.GetSiteSettings(), pagerParameters);
        var query = _contentManager.Query<EventPart>(VersionOptions.Latest);

        switch (model.Options.OrderBy) {
            case ContentsOrder.Modified:
                query.OrderByDescending<CommonPartRecord>(cr => cr.ModifiedUtc);
                break;
            case ContentsOrder.Published:
                query.OrderByDescending<CommonPartRecord>(cr => cr.PublishedUtc);
                break;
            case ContentsOrder.Created:
                query.OrderByDescending<CommonPartRecord>(cr => cr.CreatedUtc);
                break;
        }

        var pagerShape = Shape.Pager(pager).TotalItemCount(query.Count());
        var pageOfContentItems = query.Slice(pager.GetStartIndex(), pager.PageSize).ToList();

        var list = Shape.List();
        list.AddRange(pageOfContentItems.Select(ci => _contentManager.BuildDisplay(ci, "SummaryAdmin")));

        dynamic viewModel = Shape.ViewModel()
                                 .ContentItems(list)
                                 .Pager(pagerShape)
                                 .Options(model.Options);

        // Casting to avoid invalid (under medium trust) reflection over the protected View method and force a static invocation.
        return View((object)viewModel);
    } 
```

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:40:29.200

好的，为了文档；当我评论说我认为这与`.Query<EventPart>`. 我不确定它背后的逻辑，但查询需要是：

```
var query = _contentManager.Query<EventPart, EventPartRecord>(VersionOptions.Latest); 
```

...参考*PartRecord*。

如果有人可以就其背后的逻辑提供评论，以便我（和其他阅读本文的人）可以有更好的理解，那就太棒了！

# c# - 如何使用 let 在 LINQ 查询中定义一组新数据？

> ID：16072994
> 
> 赞同：4
> 
> 时间：2013-04-18T01:25:22.263
> 
> 标签：c#, linq

我有一个代表食谱所有成分的类

```
public class ViewRecipe
{
    public string RecipeName { get; set; }
    public string IngredientName { get; set; }
    public double UnitWeight { get; set; }
    public double TotalWeight { get; set; }

    public ViewRecipe() { }
    public ViewRecipe(string _RecipeName, string _IngredientName, double _UnitWeight, double _TotalWeight)
    {
        RecipeName = _RecipeName;
        IngredientName = _IngredientName;
        UnitWeight = _UnitWeight;
        TotalWeight = _TotalWeight;
    }
}(in reality there are a LOT more data members like quantity, weight, etc....) 
```

实际的数据集是一个名为 ViewRecipeSummary 的列表，它看起来像这样：

```
RecipeName IngredientName
1          A
1          B
1          C
2          D
2          E
3          A
3          Z 
```

我有一个找到 INGRIDENT (recipeGroup.Key) 的现有查询，我现在需要执行以下操作：

1-找到所有含有该成分的食谱

2-从我的数据中为这些食谱返回所有行

然后我需要在我的查询中使用它（所以它需要使用 LET 或其他东西）

假设我正在寻找所有共享成分 A 的食谱，我希望我的 LET 的最终结果（基于我上面显示的数据）看起来完全像这样：

```
RecipeName IngredientName
1          A
1          B
1          C
3          A
3          Z 
```

因此，对于任何含有成分 A（1 和 3）的食谱，返回这些食谱的所有行，这样我就有了我需要的所有成分。这应该与我的 ViewRecipe 类采用相同的形式（不是一些新的 {RecipeName, List} 等......），它应该以相同的格式提供相同的数据行。

当前的 LINQ 查询：

```
 ViewFullRecipeGrouping = (
                from data in ViewRecipeSummary
                group data by data.RecipeName into recipeGroup
                let fullIngredientGroups = recipeGroup.GroupBy(x => x.IngredientName)
                select new ViewFullRecipe()
                {
                    RecipeName = recipeGroup.Key,
                    RecipeIngredients = (
                        from ingredientGroup in fullIngredientGroups
                        select new GroupIngredient()
                        {
                            IngredientName = ingredientGroup.Key,
                        }
                    ).ToList(),
                    ViewGroupRecipes = (

            // THIS IS WHERE I NEED TO ADD MY CODE SO THAT I CAN USE THE RESULT BELOW
            let a = .....
            // BUT I HAVE NO CLUE HOW TO PERFORM SUCH A QUERY HERE

                        select new GroupRecipe()
                        {
            // USE THE RESULTS FOUND TO GENERATE MY RECIPE GROUP
            // BASED ON THE RESULTS FOUND ABOVE
            RecipeName = a.key

                        }).ToList(),
                }).ToList(); 
```

就像是：

```
 let a = ViewRecipeSummary.GroupBy(x => x.RecipeName)
                        .Where(g => g.Any(x => x.IngredientName == recipeGroup.Key))
                        .Select(g => new ViewRecipe()
                            {
                                RecipeName = g.Key,
                                IngredientName = g.Select(x => x.IngredientName)
                            }) 
```

但这会返回一个列表，我需要将它分解为相同的结构。

以下是使用的类：

```
 public class GroupRecipe
    {
        public string RecipeName { get; set; }
        public List<GroupIngredient> Ingredients { get; set; }

        public GroupRecipe() { }
        public GroupRecipe(string _recipeName, List<GroupIngredient> _ingredients)
        {
            RecipeName = _recipeName;
            Ingredients = _ingredients;
        }
    }

   public class GroupIngredient
    {
        public string IngredientName { get; set; }
        public double UnitWeight { get; set; }
        public double TotalWeight { get; set; }

        public GroupIngredient() { }
        public GroupIngredient(string _IngredientName, double _UnitWeight, double _TotalWeight)
        {
            IngredientName = _IngredientName;
            UnitWeight = _UnitWeight;
            TotalWeight = _TotalWeight;
        }
    }
    public class ViewFullRecipe
    {
        public string RecipeName { get; set; }
        public List<GroupIngredient> RecipeIngredients { get; set; }
        public List<GroupRecipe> ViewGroupRecipes { get; set; }

        public ViewFullRecipe() { }
        public ViewFullRecipe(string _RecipeName, List<GroupIngredient> _RecipeIngredients, List<GroupRecipe> _ViewGroupRecipes)
        {
            RecipeName = _RecipeName;
            RecipeIngredients = _RecipeIngredients;
            ViewGroupRecipes = _ViewGroupRecipes;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:32:19.277

如果我确实理解了您的问题，那么以下代码应该可以工作。正如其他人所说，我确实认为您的查询很复杂，不需要在哪里我认为您可能不想更改一直在工作的内容，我只是保持不变

```
var viewFullRecipeGrouping =
(
    from data in viewRecipeSummary
    group data by data.RecipeName
    into recipeGroup
    let fullIngredientGroups = recipeGroup.GroupBy(x => x.IngredientName)
    select new ViewFullRecipe()
        {
            RecipeName = recipeGroup.Key,
            RecipeIngredients =
                (
                    from ingredientGroup in fullIngredientGroups
                    select
                        new GroupIngredient
                            {
                                IngredientName = ingredientGroup.Key,
                                UnitWeight = ingredientGroup.Average(r => r.UnitWeight),
                                TotalWeight = ingredientGroup.Sum(r => r.TotalWeight)
                            }
                ).ToList(),

            ViewGroupRecipes =
                (
                    from recipeName in
                        viewRecipeSummary.GroupBy(x => x.IngredientName)
                                            .Where(g => fullIngredientGroups.Any(f => f.Key == g.Key))
                                            .SelectMany(g => g.Select(i => i.RecipeName))
                                            .Distinct()
                    select new GroupRecipe()
                        {
                            RecipeName = recipeName,
                            Ingredients =
                                viewRecipeSummary.Where(v => v.RecipeName == recipeName)
                                                    .GroupBy(i => i.IngredientName)
                                                    .Select(
                                                        g => new GroupIngredient
                                                            {
                                                                IngredientName = g.Key,
                                                                UnitWeight = g.Sum(i => i.UnitWeight),
                                                                TotalWeight = g.Average(i => i.TotalWeight)
                                                            }).ToList()
                        }
                ).ToList()
        }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:39:56.703

我假设您的食谱组定义如下：

```
public class Recipe
{
    public string RecipeName { get; set; }
    public string IngredientName { get; set; }

    public Recipe() { }
    public Recipe(string _recipeName, string _IngredientName)
    {
        RecipeName = _recipeName;
        IngredientName = _IngredientName;
    }
}

public class RecipeGroup
{
    public string RecipeName{get;set;}
    public List<Recipe> Recipe{get;set;}
}

public class RecipeGroupDictionary
{
    private Dictionary<string, List<Recipe>> data;
    public RecipeGroupDictionary()
    {
        data = new Dictionary<string, List<Recipe>>();
    }
    public bool add(Recipe vr)
    {
        this[vr.RecipeName].Add(vr);
        return true;
    }
    public List<Recipe> this[string key]
    {
        get
        {
            if (!data.ContainsKey(key))
                data[key] = new List<Recipe>();
            return data[key];
        }
        set
        {
            data[key] = value;
        }
    }
    public ICollection<string> Keys
    {
        get
        {
            return data.Keys;
        }
    }
    public List<RecipeGroup> getRecipeGroup()
    {
        var result = new List<RecipeGroup>();
        foreach (var key in data.Keys)
        {
            result.Add(new RecipeGroup { RecipeName = key, Recipe = data[key] });
        }
        return result;
    }
}

class Program
{
    static void Main(string[] args)
    {
        var arr = new List<Recipe>();
        var recipeGroup = new RecipeGroupDictionary();
        arr.Add(new Recipe{ RecipeName="1", IngredientName="A"});
        arr.Add(new Recipe{ RecipeName="1", IngredientName="B"});
        arr.Add(new Recipe{ RecipeName="1", IngredientName="C"});
        arr.Add(new Recipe { RecipeName = "2", IngredientName = "B" });
        arr.Add(new Recipe { RecipeName = "2", IngredientName = "C" });
        arr.Add(new Recipe { RecipeName = "3", IngredientName = "A" });
        arr.Add(new Recipe { RecipeName = "3", IngredientName = "X" });
        arr.Add(new Recipe { RecipeName = "3", IngredientName = "Y" });

        var rnset = from row in arr
                    where row.IngredientName == "A"
                    select row.RecipeName;
        var result = (from row in arr
                      where rnset.Contains(row.RecipeName) && recipeGroup.add(row) //Won't be executed if the first condition is false.
                      select row ).ToArray(); //To array is List<Recipe>, if you don't want recipe group you can remove all the recipe dictionary related.
        foreach (var key in recipeGroup.Keys)
        {
            foreach(var recipe in recipeGroup[key])
                Console.WriteLine("RN:{0}, IA:{1}", recipe.RecipeName, recipe.IngredientName);
        }                      
    }
} 
```

# java - 在 Open GL ES 2.0 中画一条线

> ID：16072995
> 
> 赞同：0
> 
> 时间：2013-04-18T01:25:29.527
> 
> 标签：java, android, opengl-es-2.0

给定两个可以随意更改的点，我想快速绘制一条固定颜色的线。

我有一些其他的对象，我有着色器和纹理，我可以在上面使用代码片段，但是它们的代码比我认为的简单线条所必需的要多得多。我对 Open GL ES 2.0 还很陌生，我不知道如何在我的屏幕上放置一条黄色的 3D 线而不制作一些持有者对象。

这是在我的渲染器的 onDrawFrame 方法中

```
 private void drawTestLine() {
       float[] lineEndPoints = new float[6];
       System.arraycopy(nearPoint, 0, lineEndPoints , 0, nearPoint.length);
       System.arraycopy(farPoint, 0, lineEndPoints , 3, farPoint.length);

//need help here
       GLES20.glDrawArrays(GLES20.GL_LINES, 0, 2);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:18:11.187

顶点着色器：

```
attribute vec3 a_posL;
uniform mat4 u_mvpMatrix;
void main()
{
    gl_Position = u_mvpMatrix*vec4(a_posL,1.0);
} 
```

片段着色器：

```
precision mediump float;
uniform vec4 u_lineColor;
void main()
{
    gl_FragColor = u_lineColor;
} 
```

一旦有了这些着色器，只需使用 glVertexAttribPointer 和 glUniforms 传递位置、颜色和矩阵

# javascript - Javascript - 如何删除一个对象？

> ID：16072999
> 
> 赞同：1
> 
> 时间：2013-04-18T01:26:06.627
> 
> 标签：javascript

我有一个对象：

`var myObj = new myAwsumObj();`

现在，目前我正在像这样删除它：

`myObj = undefined;`

但这显然没有任何作用，因为对象仍然存在（我可以看到异常是由定义该对象的“外部”javascript文件中的东西引发的）。

我如何清除所有这些东西？可能吗？因为它似乎`myObj`在这个外部 javascript 文件中做了很多工作，甚至可能创建新对象，是否可以在不重构这个外部文件的情况下清除所有这些混乱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:34:55.073

不幸的是，这是不可能的。根据您的描述，对象本身似乎正在通过添加事件处理程序、设置超时/间隔、ajax 回调等方式创建对自身的引用。即使您清除了对自己创建的对象的所有引用，您仍然必须清除它自己创建的引用。只有这样，它才会变为非活动的、未引用的并且有资格进行垃圾收集。

但是查看它的源代码，也许该对象提供了一个“destruct”方法来处理所有这些混乱。