# StackOverflow 问答 14195000-14195999

# c++ - 运算符重载：出现无法识别的错误

> ID：14195001
> 
> 赞同：0
> 
> 时间：2013-01-07T11:30:17.893
> 
> 标签：c++, operator-overloading

```
#include <iostream>
using namespace std;

class sales_item  
{  
    friend ostream& operator<<(ostream&,const sales_item&);

public:

    int item;
    sales_item()
    {
        item=2;
    }
    sales_item operator+(sales_item& item1)
    {
        sales_item item2;
        item2.item = item1.item+item;
        return item2;
    }
};

ostream& operator<<(ostream &out, sales_item& item3)  
{

    out<<item3.item;
    return out;
}

int main(int argc, const char * argv[])  
{  
    sales_item item1,item2;
    sales_item item3=(item1+item2);
    cout<<item3;
    return 0;
} 
```

在这个程序中，我重载了 + 和 << 运算符。但是当我试图替换行 cout << item3 ; 与 cout << (item1+item2) ; 或 cout << item1+item2 ;

我收到以下错误：

```
Undefined symbols for architecture x86_64:
  "operator<<(std::__1::basic_ostream<char, std::__1::char_traits<char> >&, sales_item const&)", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

情况如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T11:31:52.277

你实施了

```
ostream& operator<<(ostream &out, sales_item& item3) 
```

对比

```
friend ostream& operator<<(ostream&,const sales_item&);
//                                    ^
//                        const is missing in definition 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:46:51.867

嘿，错误是因为我在函数 ostream& operator<<(ostream &out,sales_item &item3); 中引用了销售项目；当我删除＆它开始工作正常..谢谢

# html - html查询字符串，获取样式请求

> ID：14195002
> 
> 赞同：0
> 
> 时间：2013-01-07T11:30:26.533
> 
> 标签：html, query-string

在 php 文件中，我通常会生成如下链接：

```
<a href="admin.php?t=email&id=3">Edit Primary Email</a> 
```

当我在 FireFox 的“查看源代码”窗口中查看它时，我注意到它以红色突出显示，并说“& 没有开始字符引用”，这是真的，但这对查询字符串有效吗？`&amp`如果我将其更改为;它仍然有效（并消除“错误”）但我现在很好奇它应该是官方的方式（我认为这是第一个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:34:06.370

Firefox 和你都是对的。

查询字符串确实用于`&`分隔参数 - 但*HTML 文档*需要对 & 符号进行编码`&amp;`。

请参阅[我真的需要将“&”编码为“&”吗？](https://stackoverflow.com/questions/3493405/do-i-really-need-to-encode-as-amp)了解更多背景信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:45:02.087

> 但这对查询字符串有效吗？

对于查询字符串本身？不。

对于以 HTML 表示的查询字符串？是的。

这是后者。

# java - 将 Access 数据库中的所有表列出到 JScrollPane 中

> ID：14195004
> 
> 赞同：0
> 
> 时间：2013-01-07T11:30:34.117
> 
> 标签：java, swing, jdbc, odbc

这是我想要实现的目标：

*   有一组已创建的表，其中填充了数据*   用户将使用 GUI 来查看表的内容或删除表。就是这样，只有两个操作*   表格列表必须以 a 形式呈现，`JScrollPane`以便用户可以选择。

我不知道该怎么做。
虽然我可以做 SQL，但问题是在`JScrollPane`
帮助中列出内容将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:43:30.143

为了从 Access 数据库中获取所有表，您必须查询 TableDefs 表。本文更详细地[介绍](http://www.techrepublic.com/article/how-to-create-a-list-of-tables-or-queries-from-access/5047664)了如何编写查询。

为了显示 Access 数据库中的所有表，您需要创建一个 JList，它有一个 JScrollPane 父级，该父级包含在 JFrame 的主 JPanel 中。所有这些组件都必须存在于 Swing Event Dispatch 线程上。

要了解有关 Swing 组件的更多信息，请阅读[Oracle Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/)。

# algorithm - 对上限的更好猜测

> ID：14195011
> 
> 赞同：5
> 
> 时间：2013-01-07T11:31:04.600
> 
> 标签：algorithm, complexity-theory

这是《算法导论》中的一道题，编号为4.4-5，描述如下：

> 使用递归树确定递归 T(n) = T(n-1) + T(n/2) + n 的良好渐近上限。使用替换方法来验证您的答案。

我发现我很难计算递归树的递归。我给的答案

> 数学.pow(2,n)

似乎太松散了。也许存在一些更好的猜测。感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T14:09:11.283

希望我没有做错:)

让我们`A(n)=T(n/2)+n`

```
0\. T(n)=T(n-1)+A(n)=T(n-2)+A(n-1)+A(n)=...=A(1)+A(2)+...+A(n)
   T(n)=sum[1..n]A(n)
   T(n)=sum[i=1..n]T(i/2)+sum[i=1..n]i 
```

假设`n/2`是整数除法，`T(n/2)=T((n+1)/2)`对于偶数`n`，所以第一个和由两个相等的一半组成：`T(1)+T(1)+T(2)+T(2)+...`

```
1\. T(n)=2*sum[1..n/2]T(i)+n*(n-1)/2 
```

自从`T(n)<=T(m) for every n<=m`

```
2\. T(n)<=n*T(n/2)+n*(n-1)/2 
```

自从`T(n/2)>=n/2>=(n-1)/2`

```
3\. T(n)<=n*T(n/2)+n*T(n/2)=2*n*T(n/2) 
```

让我们只考虑这个`n=2^k`，因为`T`它是单调的：`n=2^k`和`U(k)=T(2^k)`

```
4\. U(k)<=2*(2^k)*U(k-1)=2^(k+1)*U(k-1) 
```

让`L(k)=log2 U(k)`

```
5\. L(k)<=k+1+L(k-1) 
```

就像我们在 step0 和 step1 之间所做的一样

```
6\. L(k)<=k*(k-1)/2+k=k*k/2-k/2+k<=k*k

7\. U(k)=2^L(k)<=2^squared(k)

8\. T(n)=U(log2 n)<=2^squared(log2 n) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:41:39.483

递归关系似乎产生了次指数和超线性计算时间，这意味着任何选择的基都可以作为一个上限，给定一个足够大的`n`.

您的选择`2^n`是一个很好的答案，并且可能是他们在书中寻找的答案。这是一个简单的解决方案，即使对于非常小的`n`. （不过，我理解您为什么要问这个问题，因为它的增长速度确实比`T(n)`中等大的`n`.）

给定`T(1) = 1`（或其他一些常数），递归方程为我们提供了前几个值的运行时间，如下所示`n`。

```
T(1) = 1          n^1 = 2
T(2) = 4          n^2 = 4
T(3) = 11         n^3 = 8
T(4) = 19         n^4 = 16
T(5) = 35         n^5 = 32
T(6) = 52         n^6 = 64
T(7) = 78         n^7 = 128
T(8) = 105        n^8 = 256
T(9) = 149        n^9 = 512 
```

我们可以看到，`2^n`作为上限的选择对于所有`T(6)`及以上的值都有效。

如果您想要一个下限，`2^n`那么您可以选择一个较低的基数（权衡它只对更高数量的 有效`n`）。但我必须补充一点，它仍然与您已有的解决方案基本相同。

任何大于 1 的基都可以，但为了更具体一点，我们可以例如看到递归方程`T(n) = T(n-1) + T(n/2) + n`受方程的`T(n) = T(n-1) + T(n-2)`限制`n>5`。

这与斐波那契数列的递归关系相同，并且按照[这个](https://stackoverflow.com/questions/360748/computational-complexity-of-fibonacci-sequence)问题的答案中的步骤，它的计算复杂度与黄金比例`(1+sqrt(5))/2 = 1,618`与 的幂相匹配`n`。

绘制实际值，我们可以看到`n`的值以`T(n)`为界`((1+sqrt(5))/2)^n`。从图中它似乎是值`n=13`及以上。

![算法的计算复杂度。](../Images/68cf4a88258ac38652eec062a660df42.png)

综上所述，我已经考虑过使用一些次指数函数来近似运行时间。这似乎不容易做到，正如我所说，我相信你已经找到了预期的答案。

# objective-c - 为什么不能将 ivar 的地址传递给 ARC 下的“id __autoreleasing *”参数？

> ID：14195017
> 
> 赞同：6
> 
> 时间：2013-01-07T11:31:15.737
> 
> 标签：objective-c, memory-management, syntax, automatic-ref-counting, ownership

在 ARC 下，out 参数采用以下形式（默认情况下；这等效于`NSError **`）：

```
- (BOOL)tryWithError:(NSError *__autoreleasing *)err; 
```

从[Transitioning to ARC Release Notes](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW4)中，如果我们传递一个`__strong`局部变量的地址，编译器将创建一个临时变量并生成以下代码：

```
NSError *error; // strong
BOOL ok = [myObject tryWithError:&error];

// translated to

NSError *__strong error;
NSError *__autoreleasing tmp = error;
BOOL ok = [myObject tryWithError:&tmp];
error = tmp; 
```

但是如果我们用一个实例变量来做：

```
@implementation Foo {
    NSError *_error; // strong
}
- (void)bar
{
    [myObject tryWithError:&_error];
}
... 
```

这给了我们错误

> 将非本地对象的地址传递给`__autoreleasing`参数以进行回写。

**为什么这是无效的？**编译器不能自动将这样的代码翻译成这个吗？

```
- (void)bar
{
    NSError *__autoreleasing tmp = _error;
    [myObject tryWithError:&tmp];
    _error = tmp;
} 
```

毕竟，这是我无论如何都会写来解决问题的！

[注意：将`out`关键字添加到参数类型[会稍微减少编译器的工作，](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#passing-to-an-out-parameter-by-writeback)因为它不必将当前值读入临时变量——但这并不能解决错误。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T14:28:58.613

不能将指向 ivar 的指针传递给 ARC 下的“id __autoreleasing *”参数，因为这种 pass-by-writeback 格式不正确。ARC 规范中的[相应部分](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#passing-to-an-out-parameter-by-writeback)列出了 pass-by-writeback 的合法形式，此处唯一适用的是

> &var，其中 var 是具有可保留对象的自动存储持续时间的标量变量

，因此只允许自动存储持续时间（局部变量）。

**为什么这是无效的：**我很确定这里的原因是与旧代码的兼容性：

1）[您应该只查看失败情况下的错误写回](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ErrorHandlingCocoa/CreateCustomizeNSError/CreateCustomizeNSError.html#//apple_ref/doc/uid/TP40001806-CH204-SW1)。在成功的情况下，根本无法保证错误指针中的内容。

2) 一般情况下，是否使用回写值取决于方法的约定。这是编译器无法检查的。

这是将`&error`( `NSError * __autoreleasing *`) 的类型与写回 (`NSError **`被解释为`NSError * __autoreleasing *`) 的类型相匹配的代码版本。如果`ok`为YES，则不会触及错误值。

```
NSError * __autoreleasing error;
BOOL OK = [myObject performOperationWithError:&error];
if (!OK) {
    // use error
} 
```

然而，这些`__autoreleasing`都很丑陋，所以编译器不会强迫我们到处使用，而是`__autoreleasing`允许我们传递一个`__strong`（但本地的）变量（默认所有权）：

```
NSError *error;
BOOL OK = [myObject performOperationWithError:&error];
if (!OK) {
    // use error
} 
```

根据文档，它被重写为：

```
NSError * __strong error;
NSError * __autoreleasing tmp = error;
BOOL OK = [myObject performOperationWithError:&tmp];
error = tmp;
if (!OK) {
    // use error
} 
```

根本不是问题，错误只会在成功的情况下使用。

现在让我们看一下`__strong`实例变量`_error`。为什么编译器不允许这样做？这是重写的样子：

```
NSError * __autoreleasing tmp = _error;
BOOL OK = [myObject performOperationWithError:&tmp];
_error = tmp;
if (!OK) {
    // use error
} 
```

这里的问题是*总是*`tmp`会使用写回（分配给实例变量），*而忽略了*写回应该只在错误情况下使用的方法的约定（或者一般来说，无论方法的文档说什么）。将最后一个错误分配给实例变量的安全方法是*`_error`*

 **```
NSError * __autoreleasing tmp = _error;
BOOL OK = [myObject performOperationWithError:&tmp];
if (!OK) {
    _error = tmp; 
    // use error
} else {
    _error = nil; // Make sure that _error is nil if there was no error.
} 
```

这仅适用于返回错误的 Cocoa 方法的约定。一般来说，编译器无法判断方法将如何处理`id *`: 可能有一些旧方法使用不同的约定。因此，如果您真的想将写回存储在`__strong`实例变量中，您目前必须自己加倍努力，我不希望这会改变。**

# ios - 是否可以在收到推送通知后对其进行修改？

> ID：14195022
> 
> 赞同：1
> 
> 时间：2013-01-07T11:31:40.280
> 
> 标签：ios, apple-push-notifications

例如，如果我在 twitter 应用程序上收到 @mention，我可能会收到如下通知：

```
 "You have 1 new mention" 
```

如果我在打开上一个推送通知之前收到另一个@提及，我希望它更新为：

```
 "You have 2 new mentions" 
```

而不是像第一个那样发送另一个通知并最终得到：

```
 "You have 1 new mention"
    "You have 1 new mention" 
```

在锁定屏幕上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:51:07.943

我可能说的是显而易见的，但只是为了让事情清楚。

**已发送**通知和**已收到通知**是两种不同的状态（您的问题有歧义）

发送的通知不一定已发送给用户*。*如果新通知在前一个通知发送之前到达 APN 服务器，它将被丢弃，并且只会将较新的通知发送给用户。

对于这种情况，当新通知在前一个通知发送之前到达 APN 服务器时，您需要一种机制来了解“未读”消息/提及的数量。

*收到*的通知是已发送到设备的通知，根据应用程序的状态（已终止/活动/在后台），您可以对其做出反应。

一旦发送（和接收）通知就无法修改，但您显然可以更新应用程序的徽章编号，以向用户显示“未读”通知的数量。

因此，我建议通知消息的可用性可能更好。

*   来自谁的通知
*   实际提及消息
*   等等

因为徽章编号更适合用于新通知的数量。

# vba - 如何访问单独的 Excel 实例的 UserForms 集合？

> ID：14195029
> 
> 赞同：0
> 
> 时间：2013-01-07T11:31:54.520
> 
> 标签：vba, excel

是否有任何方法可以获取单独的 Excel 实例的 UserForms 集合（对象浏览器表明它是 VBA.Global 的成员）？我需要检查表单是否已加载，如果没有则适当地退出远程应用程序，以免留下任何幽灵进程 - 但我无法找到一种简单地检测到这一点的方法。

我可能会使用一系列复杂的 API 调用来识别所有 UserForm 窗口（“ThunderDFrames”），然后识别它们的父进程，然后识别它们的父进程的 hWnd，然后检测它是否与已知的 Application 对象的 hW​​nd 匹配由托管，但简单地获取 UserForms 集合以供应用程序测试会感觉更优雅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:25:10.153

那么对于一个更简单的答案 - 不。[为什么？](https://groups.google.com/forum/#!msg/exceldna/3ikM3M68IMQ/Zs0Sj60zpnoJ).

因为正如@Daniel 指出的那样，不同进程中的每个内存都是相互隔离和独立的。因此，如果没有一点繁重的设计，就无法在另一个进程中读取内存。

解决方法是将用户窗体的数据保存`collection`到工作簿并从那里读取。就像在封闭的工作簿中写入和阅读一样。这将作为你的记忆位置。效率不高但可行:) 没有太多汗水。

# php - PDO 准备好的语句 - 语法和清理

> ID：14195032
> 
> 赞同：0
> 
> 时间：2013-01-07T11:32:01.290
> 
> 标签：php, pdo

我正在尝试使用以下内容更新我的数据库：

```
$fields = array(
    'titulo',
    'tipo_produto',
    'quantidade_peso',
    'unidade_de_venda',
    'unidades_por_caixa',
    'caixas_piso',
    'pisos_palete',
    'tipo_palete',
    'unidades_palete',
    'caixas_palete',
    'uni_diametro',
    'uni_largura',
    'uni_profundidade',
    'uni_altura',
    'caixa_largura',
    'caixa_profundidade',
    'caixa_altura',
    'altura_palete',
    'volume_unidade',
    'volume_caixa',
    'volume_palete',
    'peso_caixa',
    'peso_palete'
);
$sql = 'UPDATE ficha_item SET '.implode(', ', array_map(create_function('$value', 'return "$value=\"" . $_POST["$value"] ."\"";'), $fields)).' WHERE id=?';

$stmt = $db->prepare($sql);

$stmt->execute(array($_POST['item_id']));
$stmt->closeCursor(); 
```

这似乎工作得很好，但我想知道安全性，这是否经过消毒？

在尝试（没有成功）另一个解决方案后，我想出了这个解决方案：

```
$fields = array(
    'titulo',
    'tipo_produto',
    'quantidade_peso',
    'unidade_de_venda',
    'unidades_por_caixa',
    'caixas_piso',
    'pisos_palete',
    'tipo_palete',
    'unidades_palete',
    'caixas_palete',
    'uni_diametro',
    'uni_largura',
    'uni_profundidade',
    'uni_altura',
    'caixa_largura',
    'caixa_profundidade',
    'caixa_altura',
    'altura_palete',
    'volume_unidade',
    'volume_caixa',
    'volume_palete',
    'peso_caixa',
    'peso_palete'
);
$sql = 'UPDATE ficha_item SET ? WHERE id=?';

$valuesClause = implode(', ', array_map(create_function('$value', 'return "$value=\"" . $_POST["$value"] ."\"";'), $fields));

$stmt = $db->prepare($sql);

$stmt->execute(array($valuesClause, $_POST['item_id']));
$stmt->closeCursor(); 
```

完全没有错误，但我的数据库不会更新。我的第一个解决方案完全消毒了吗？我最初的想法出了什么问题？我认为这与 PDO 如何在执行时清理查询有关......但我不知道该去哪里。

**注意：**数据库列名称和输入名称相同，这就是`$value`有效的原因。如果您还想知道，由于 PHP 版本是实时的，匿名函数是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:37:15.523

准备好的语句是准备好的语句，由于显而易见的原因，语句参数/参数不被视为 SQL。

在准备语句之前，您需要准备查询。

我建议你阅读[PDO](http://php.net/pdo)手册。您还应该查看[这个问题](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)，以了解如何保护您的查询。

```
$columns = array();
foreach ($fields as $column)
    $columns[] = "$column = ?";

$sql = "UPDATE table SET " . implode(" AND ", $columns) . " WHERE id = ? ";

// Now you may prepare the statement 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:58:06.570

```
$fields = array(
    'titulo',
    'tipo_produto',
    'quantidade_peso',
    'unidade_de_venda',
    'unidades_por_caixa',
    'caixas_piso',
    'pisos_palete',
    'tipo_palete',
    'unidades_palete',
    'caixas_palete',
    'uni_diametro',
    'uni_largura',
    'uni_profundidade',
    'uni_altura',
    'caixa_largura',
    'caixa_profundidade',
    'caixa_altura',
    'altura_palete',
    'volume_unidade',
    'volume_caixa',
    'volume_palete',
    'peso_caixa',
    'peso_palete'
);
$sql="UPDATE ficha_item SET ".implode(", ",array_map(function($s){
    return "$s = ?";
},$fields))." WHERE id=?";
print_r($sql); 
```

输出：

```
UPDATE ficha_item SET titulo = ?, tipo_produto = ?, quantidade_peso = ?, unidade_de_venda = ?, unidades_por_caixa = ?, caixas_piso = ?, pisos_palete = ?, tipo_palete = ?, unidades_palete = ?, caixas_palete = ?, uni_diametro = ?, uni_largura = ?, uni_profundidade = ?, uni_altura = ?, caixa_largura = ?, caixa_profundidade = ?, caixa_altura = ?, altura_palete = ?, volume_unidade = ?, volume_caixa = ?, volume_palete = ?, peso_caixa = ?, peso_palete = ? WHERE id=? 
```

这是您需要的*SQL 语句*`prepare`。现在得到你*准备好的声明*：

```
$stmt=$db->prepare($sql);
$stmt->execute(array_merge(array_map(function($s){
    return $_POST[$s];
},$fields),array($_POST["item_id"]))); 
```

没有数据库供我测试，但这应该是正确的轨道。

请注意，我只是遵循您的“风格”；尽管此代码将 all`$_POST`视为参数，从而避免了 SQL 注入，但它假设 every`$_POST[$fields[$idx]]`存在，任何用户都可以轻松破坏，所以这是你应该清理的地方。

**编辑**：

由于您已更新不能使用匿名函数，因此您可以手动构造所需的数组：

```
$cache=array();
foreach($fields as $field)
    $cache[]="$field = ?";
$sql="UPDATE ficha_item SET ".implode(", ",$cache)." WHERE id=?";

$cache=array();
foreach($fields as $field)
    $cache[]=isset($_POST[$field])?$_POST[$field]:null;
$cache[]=$_POST["item_id"]
/*...*/
$stmt->execute($cache); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T12:06:03.017

你有一个很好的目标
当你的字段在你的代码中被*列入白名单*时，这足以保护（事实上。白名单是这里唯一合适的解决方案）。

因此，您唯一需要做的就是从白名单和 $_POST 数组中获取正确的 SQL。
瞧——[这里是为此目的而编写的一个有用的函数](https://stackoverflow.com/a/3921798/285587)。
有了它，您的代码将成为

```
$sql  = "UPDATE ficha_item SET ".pdoSet($fields,$values)." WHERE id = :id";
$stmt = $db->prepare($sql);
$values["id"] = $_POST['id'];
$stmt->execute($values); 
```

（用户定义的）功能很棒。不知道为什么没有人使用它们。

# django - Django - 保存表单时如何进行事务？

> ID：14195035
> 
> 赞同：1
> 
> 时间：2013-01-07T11:32:08.163
> 
> 标签：django, django-forms

我正在保存一个表单，但是事务之外有一个 save() 方法。事务外的 save() 方法是“BicycleAdCategoryForm”上的 save()。

这是代码：

模型.py

```
class Main(models.Model):
    section             = models.ForeignKey(Section)
    user                = models.ForeignKey(User)
    title               = models.CharField(max_length=250)
    date_inserted       = models.DateTimeField(auto_now_add=True)
    date_last_update    = models.DateTimeField(auto_now=True)

    def __unicode__(self):
        return self.title

    # To order in the admin by name of the section
    class Meta:
        ordering = ['date_inserted']

class BicycleAd(models.Model):
    main                = models.ForeignKey(Main)
    bicycleadtype       = models.ForeignKey(BicycleAdType)
    bicycleaditemkind   = models.ForeignKey(BicycleAdItemKind) # MPTT Model
    bicycleadcondition  = models.ForeignKey(BicycleAdCondition)
    country             = models.ForeignKey(GeonamesCountry)       
    city                = models.ForeignKey(GeonamesLocal) 
    date_inserted       = models.DateTimeField(auto_now_add=True)
    date_last_update    = models.DateTimeField(auto_now=True)

    # To order in the admin by name of the section
    class Meta:
        ordering = ['date_inserted']   

class BicycleAdCategoryType(models.Model):
    n_bicycle_ad_category_type = models.CharField(max_length=100) # COMPRA, VENDA, TROCA
    date_inserted              = models.DateTimeField(auto_now_add=True)
    date_last_update           = models.DateTimeField(auto_now=True)

    def __unicode__(self):
        return self.n_bicycle_ad_category_type

    # To order in the admin by name of the section
    class Meta:
        ordering = ['n_bicycle_ad_category_type'] 
```

表格.py

```
class MainForm(forms.ModelForm):
    class Meta:
        model = Main
        exclude = ('user', 'section')

class BicycleAdForm(forms.ModelForm):
    class Meta:
        model = BicycleAd
        exclude = ('main', 'bicycleadtype', 'bicycleaditemkind', 'bicycleadcondition', 'city') # DPS RETIRAR DAQUI A "CITY"

class BicycleAdCategoryForm(forms.ModelForm):
    bicycleadcategorytype = forms.ModelMultipleChoiceField(queryset=BicycleAdCategoryType.objects.all(), required=False, widget=forms.CheckboxSelectMultiple) # Se retirar o widget fico uma SELECT box em q posso selecionar varias opcoes

    class Meta:
        model = BicycleAdCategory
        exclude = ('bicyclead',)

    def save(self, commit, rel_obj):
        data = self.data.getlist('bicycleadcategorytype')
        for item in data:
            obj_bicycleadcategory = BicycleAdCategory()
            obj_bicycleadcategory.bicyclead = rel_obj
            obj_bicycleadcategory.bicycleadcategorytype = BicycleAdCategoryType.objects.get(pk=item)
            obj_bicycleadcategory.save()

    def clean_bicycleadcategorytype(self):
        data = self.cleaned_data['bicycleadcategorytype']
        try:
            for item in data:
                bicycleadcategorytype = BicycleAdCategoryType.objects.get(pk=item.pk)
            return bicycleadcategorytype
        except (KeyError, BicycleAdCategoryType.DoesNotExist):
            raise forms.ValidationError('Invalid Bicycle Ad Category Type. Please try again.') 
```

视图.py

```
def submit_ad_view(request):
    if request.method == 'POST':      
        model_main = Main()
        model_main.section = Section.objects.get(pk=request.POST['section'])
        model_main.user = request.user

        model_bicyclead = BicycleAd()
        model_bicyclead.bicycleadtype = BicycleAdType.objects.get(pk=2)
        model_bicyclead.bicycleaditemkind = BicycleAdItemKind.objects.get(pk=4)
        model_bicyclead.bicycleadcondition = BicycleAdCondition.objects.get(pk=2)
        model_bicyclead.city = GeonamesLocal.objects.get(pk=4803854)

        form_main = MainForm(request.POST, instance = model_main)
        form_bicyclead = BicycleAdForm(request.POST, instance = model_bicyclead)
        form_bicycleadcategory = BicycleAdCategoryForm(request.POST)

        if form_main.is_valid() and form_bicyclead.is_valid() and form_bicycleadcategory.is_valid():
            main_f = form_main.save()

            bicyclead_f = form_bicyclead.save(commit=False)
            bicyclead_f.main = main_f
            bicyclead_f.save()

            bicycleadcategory_f = form_bicycleadcategory.save(commit=False, rel_obj=model_bicyclead)

            resultado = 'valid'
        else:
            resultado = 'n_valid'

    return render_to_response('app/submit_ad.html', {'resultado': resultado}, context_instance=RequestContext(request)) 
```

我认为 main_f 和 bikead_f 在事务内，但 bikeadcategory_f 在事务外。当bikeadcategory_f 失败时，main_f 和bikead_f 存储在数据库中。

关于我做错了什么的任何线索？

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:54:27.753

Django 使用 commit_on_success 装饰器执行视图（或者至少它的行为方式是这样的）。如果您正在查看崩溃（未捕获的异常），则应该进行回滚。如果存储了一些数据，而没有存储一些数据，则您的数据库引擎可能不支持事务处理。

查看 django 文档以获取更多信息 [https://docs.djangoproject.com/en/dev/ref/databases/](https://docs.djangoproject.com/en/dev/ref/databases/)

例如，如果您将 MySQL 与 MyISAM 一起使用，您可能会遇到一些问题

编辑： [Krzysiek Szularz](https://stackoverflow.com/users/1085511/krzysiek-szularz)：我想每个人都在使用 django TransactionMiddleware 或类似的东西，所以我跳过了它——只提到了逻辑层。

# wordpress - Nginx 上的 Wordpress 博客 - 未找到 CSS 和 JS 文件

> ID：14195036
> 
> 赞同：3
> 
> 时间：2013-01-07T11:32:12.397
> 
> 标签：wordpress, nginx

我构建了一个自定义 PHP/MySQL 网站 (www.mywebsite.com)，并在该网站上附加了一个 wordpress 博客 (www.mywebsite.com/blog)。我一直在尝试很多不同的 nginx 配置，并阅读了很多博客文章，以至于我现在迷路了 :-)

主要网站部分工作正常。我所有的 url 重写工作正常。但是在博客部分，我不知道该怎么做才能让 Wordpress 正常工作。

这是我对博客部分的最后一次会议。固定链接有效，但找不到 css 和 js 文件。

```
location /blog {
  root /var/www/mywebsite.com/blog/;
  index index.php index.html index.htm;

  try_files $uri $uri/ /blog/index.php;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:04:06.543

您可以为他们添加一个位置，并且一个也可以过期。

```
location ~* \.(js|css|xml|txt)$ {
  expires 14d;
  root /to/the/folder/they/live/in;
  access_log off;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:51:49.663

发现了一个我绝对推荐的很棒的博客 => [http://blog.martinfjordvald.com/](http://blog.martinfjordvald.com/)

通读后，我更新了我的位置块中的根，如下所示：

```
 location /blog {
      root /var/www/mywebsite.com;
      index index.php index.html index.htm;    
      try_files $uri $uri/ /blog/index.php;
} 
```

现在工作正常！

# lua - 如何使用表格元素

> ID：14195038
> 
> 赞同：0
> 
> 时间：2013-01-07T11:32:16.883
> 
> 标签：lua, coronasdk, lua-table

我将电影标题显示为字母图像，例如每个字母的单独图像。然后可以将每个字母拖到空间/容器中。这是我显示容器的代码

```
posX = {}
posY = 124
px = 10
containers = {}
for i = 1, #letters do
    if(letters[i]==" ") then
        px = px + 10
        -- print(posX[i])
        -- table.remove(posX, posX[i])
    else
    posX[i] = px
    containers[i] = display.newImage( "Round1_blue_tileEnlarged 40x40.png",      posX[i],posY )
    px = px + 40
    end
end 
```

如您所见，我正在检查一个空格，例如，如果 batman 开头是标题，如果标题是一个单词，我没有问题，但是添加空格会在我的数组中添加另一个元素，这会在我放置一个错误时导致错误我的容器中的对象。您可以在“if”中看到我只是添加了一个空格，但我不希望它成为我的表 posX 的一个元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:56:54.390

我不确定我是否理解您的问题，但如果我这样做是您的问题：您正在`i`用作索引，`posX`但`i`即使是空格也会被 for 循环递增。这会导致表格`posX`和`containers`表格中出现漏洞。

您可以通过多种方式解决此问题，这是一个简单的方法：

```
posX = {}
posY = 124
px = 10
containers = {}
local j = 1
for i = 1,#letters do
    if(letters[i]==" ") then
        px = px + 10
    else
        posX[j] = px
        containers[j] = display.newImage( "Round1_blue_tileEnlarged 40x40.png", posX[j],posY )
        px = px + 40
        j = j + 1
    end
end 
```

您也可以使用`#posX`代替`j`.

# jquery - 修改单词计数jquery函数

> ID：14195039
> 
> 赞同：0
> 
> 时间：2013-01-07T11:32:17.523
> 
> 标签：jquery

```
(function($){
    $.fn.textareaCounter = function(options) {
        // setting the defaults
        // $("textarea").textareaCounter({ limit: 100 });
        var defaults = {
            limit: 150
        };  
        var options = $.extend(defaults, options);

        // and the plugin begins
        return this.each(function() {
            var obj, text, wordcount, limited;

            obj = $(this);
            obj.next(".hint").after('<span style="font-size: 11px; font-weight: bold; color:#6a6a6a; clear: both; margin: 3px 0 0 150px; float: left; overflow: hidden;" id="counter-text">Max. '+options.limit+' words</span>');

            obj.on("keyup keydown", function() {
                text = obj.val();
                if(text === "") {
                    wordcount = 0;
                } else {
                    wordcount = obj.val().split(" ").length;
                }
                if(wordcount == options.limit) {
                    obj.next(".hint").next("#counter-text").html('<span style="color: #DD0000;">0 words left</span>');
                    limited = $.trim(text).split(" ", options.limit);
                    limited = limited.join(" ");
                    $(this).val(limited);
                } else {
                    obj.next(".hint").next("#counter-text").html((options.limit - wordcount)+' words left');
                } 
            });
        });
    };
})(jQuery); 
```

我使用上面的 jQuery 函数来计算在`textarea`. 目前它为我工作。使用这个脚本，我可以计算表单中所有文本区域中的单词，限制为 150 个单词。

但我需要将此功能应用于 textarea 以计算具有不同限制条件的单词。这意味着 1 个文本区域有 150 个单词，一个有 100 个单词，一个有 60 个单词等等......这里有人可以帮我做这个修改吗？

注意：我使用这个功能是这样的..`$("textarea").textareaCounter();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:35:24.877

像这样使用它：

```
$("#textarea-id").textareaCounter({
     limit:100 // world limit here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:36:46.567

您所要做的就是为特定的 textarea 字段设置不同的设置。

所以这是一个非常通用的解决方案：

```
$("textarea").textareaCounter(); 
```

它告诉每个文本框使用默认值。您可以使用 id（或类）为特定的文本区域设置不同的设置

在下面的示例中，它假定页面上的 2 个文本区域具有另一个`my100limittextarea`id`my150limittextarea`

```
$("#my100limittextarea").textareaCounter({limit:100});
$("#my150limittextarea").textareaCounter({limit:150}); 
```

# jquery - Struts2 jQuery 配置问题

> ID：14195045
> 
> 赞同：3
> 
> 时间：2013-01-07T11:32:50.553
> 
> 标签：jquery, struts2, struts2-jquery

在我的 webapp 中，我使用的是 struts2-jquery 插件。

```
Struts2 version - 2.3.7
struts.jquery.version - 3.5.0 
```

为了在 Struts 中使用 jQuery，我使用了以下配置 -

在 pom.xml 中

```
 <dependency>
            <groupId>com.jgeppert.struts2.jquery</groupId>
            <artifactId>struts2-jquery-plugin</artifactId>
            <version>${struts.jquery.version}</version>
        </dependency> 
```

在我的 JSP 中添加了以下标签：

```
 <sj:head  jqueryui="true"/> 
```

并使用了`autocompleter`这样的小部件：

```
<s:url var="supUrl" namespace="/ajax" action="suppliers"/>
 <sj:autocompleter
    id="supplierMap"
    name="echo"
     label="Handle a Map"
     href="%{supUrl}"
     list="supplierMap"/> 
```

我收到以下 JavaScript 错误：

```
Cannot call method 'bind' of undefined
jQuery.struts2_jquery_ui.bind(jQuery('#supplierMap_widget'),options_supplierMap_widget); 
```

当我在浏览器中*查看页面源*时，我看到以下内容。这里 JavaScript 包含的路径与它在 struts2-jquery-plugin.jar 中的打包方式不同。

```
<script type="text/javascript" src="/struts/js/base/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="/struts/js/base/jquery.ui.core.min.js?s2j=3.5.0"></script>
  <script type="text/javascript" src="/struts/js/plugins/jquery.subscribe.min.js"></script>

  <script type="text/javascript" src="/struts/js/struts2/jquery.struts2.min.js?s2j=3.5.0"></script>

<script type="text/javascript">
$(function() {
    jQuery.struts2_jquery.version="3.5.0";
    jQuery.scriptPath = "/struts/";
    jQuery.ajaxSettings.traditional = true;

    jQuery.ajaxSetup ({
        cache: false
    });

    jQuery.struts2_jquery.require("js/struts2/jquery.ui.struts2.min.js");

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:06:16.680

看，如果你使用 struts2jQuery 插件，你必须在 web.xml 中有以下 url 模式 /* 的过滤器映射

```
<filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

休息应该可以正常工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:47:00.317

在您的库中维护以下版本的 jar。我想你不会遇到任何问题

antlr-2.7.6.jar commons-beanutils-1.7.0.jar commons-collections-3.2.jar commons-digester.jar commons-fileupload-1.2.2.jar commons-io-2.4.jar

commons-lang-1.2.jar commons-logging-1.1.jar freemarker-2.3.16.jar javassist-3.7.ga.jar ognl-3.0.jar struts2-core-2.2.3.jar

xwork-core-2.2.1.jar struts2-jquery-plugin-3.1.1.jar

struts2

```
 <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter></i> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:49:17.810

尝试删除您可能在 struts.xml 中添加的任何命名空间，相应地调整您的 url。看看它是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T13:07:32.850

我的猜测是您的问题与上述任何答案有关。

正如错误消息所说，您的问题是 jQuery.struts2_jquery_ui 未定义。

这是作为代码警告提供的：

```
 jQuery.struts2_jquery.require("js/struts2/jquery.ui.struts2.min.js"); 
```

此文件不在您的标签中。请参阅 .ui。？？？

你所拥有的是：

```
 "/struts/js/struts2/jquery.struts2.min.js?s2j=3.5.0" 
```

# wcf - 如何实现跨机发布/订阅通信

> ID：14195046
> 
> 赞同：3
> 
> 时间：2013-01-07T11:32:51.667
> 
> 标签：wcf, c#-4.0, wcf-binding

我有一个托管在服务器 windows 2008 上的 .Net 服务，以及通过 Internet 连接到该服务器的 .Net 客户端。

我想使用 wsDualHttpBinding 实现发布订阅模型相同的 Microsoft 示例，其中客户端可以订阅服务上的事件并在数据可用时将数据推送给它们。

我已经在服务器上实现了服务并且能够成功浏览。但是当我尝试从客户端进行通信时，它将以超时结束（我增加了文件客户端和服务器上配置文件的时间属性）

客户端配置文件：

```
<client>
  <endpoint name="" address="http://x.x.x.x/servicemodelsamples/service.svc" binding="wsDualHttpBinding" bindingConfiguration="Binding1" contract="Microsoft.ServiceModel.Samples.ISampleContract"/>
</client>

<bindings>
  <wsDualHttpBinding>
    <!--If running in cross machine then replace localhost with the FQDN of the machine on whihc datasource.exe is run-->
    <binding name="Binding1" clientBaseAddress="http://xxxx:xxxx/myClient/" closeTimeout="00:05:00"
        openTimeout="00:05:00" receiveTimeout="00:10:00" sendTimeout="00:05:00"
        bypassProxyOnLocal="false" maxBufferPoolSize="524288" maxReceivedMessageSize="500000000"
        useDefaultWebProxy="true">
      <security mode="None">
        <message clientCredentialType="None" negotiateServiceCredential="false" />
      </security>

    </binding>
  </wsDualHttpBinding>
</bindings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:03:32.370

# jquery - 在 YII 中的 View 中包含 JS 文件

> ID：14195048
> 
> 赞同：1
> 
> 时间：2013-01-07T11:32:57.020
> 
> 标签：jquery, yii, yii-extensions, yii-components, yii-events

我想加载`JS` 文件以避免我的应用程序负载过重。我正在使用这个`JS`文件来`CgrdView`查看。所以我试过这个：

```
Yii::app()->clientScript->registerScriptFile(
Yii::app()->baseUrl.'/assets/9d419b82/jquery.ba-bbq.js?v=1.0.127'
); 
```

在我的视图标题中。但我收到错误：未捕获的**ReferenceError：jQuery 未定义** 如前所述，我想加载 jquery.ba-bbq.js 文件以查看 CgriView，但我无法加载该文件。相反，我使用以下，但不知道加载与否的有效方式。

```
<script src="/assets/9d419b82/jquery.ba-bbq.js?v=1.0.127" type="text/javascript"></script> 
```

当我在布局中加载它时正在工作，但这不是有效的方法。

仅供参考：我正在使用`cgridview`搜索框将搜索框条目发布到我的控制器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T06:24:44.743

bbq 脚本可作为核心脚本使用，注册它也会加载 jquery.js。所以要使用 bbq 你只需要这样做：

```
Yii::app()->clientScript->registerCoreScript('bbq'); 
```

assets 文件夹本质上是动态的，它用于在 Web 可访问的目录中存储脚本、css、图像。它由各种 Yii 小部件自动填充，当你调用`registerCoreScript`. 由于这些原因[以及更多](http://www.yiiframework.com/wiki/148/understanding-assets/)原因，您不应该依赖资产文件夹来包含 js、css、图像，而是让框架为您包含它。

* * *

我在文档中找不到核心包的列表，但可以在源文件中看到它：[*framework/web/js/packages.php*](https://github.com/yiisoft/yii/blob/master/framework/web/js/packages.php)。

* * *

如果您希望在带有 的视图中使用它`CGridView`，那么让我告诉您它`CGridView`会自动加载此脚本，而您不必再次注册它。

# jquery - 多次使用 jQuery(function($)

> ID：14195052
> 
> 赞同：0
> 
> 时间：2013-01-07T11:33:18.760
> 
> 标签：jquery

我刚刚学习 jQuery，并发现了`jQuery(function($)`文档准备好的简写（[在此处](http://api.jquery.com/jQuery/#jQuery3)描述）。

我的问题：是否可以在从同一页面下载到浏览器的不同文件中多次使用此语法？（我不需要从文件 B 中的文件 A 中调用变量）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:36:19.313

是的，你可以....所有都将在第一次调用第一次运行的基础上执行....

# php - PHP中API请求的队列管理器

> ID：14195057
> 
> 赞同：3
> 
> 时间：2013-01-07T11:33:24.827
> 
> 标签：php, message-queue, priority-queue

我正在 Laravel 中开发一个可以通过 Curl 调用的 REST API。

API 的目的是根据请求参数生成文件，并在 JSON 响应中将这些文件作为 base64 字符串返回。生成过程受这些文件大小（范围从 0.5Mb 到 30Mb）的影响很大。整个过程（从请求到响应）平均需要 1 秒到 2 分钟。

这些 HTTP 请求应该由可以处理优先级队列的队列管理器（例如 gearman）处理。该管理器应该能够分配 2-3 个工作人员进行负载平衡。队列中最大文件的一个工作人员和较小的文件的 1-2 个工作人员。

我的问题是，这些请求不像典型的邮件队列，例如，您可以将请求排队，后台作业将处理它。我必须在获得结果文件后立即以相同的响应归还它们。

在这种情况下，您将如何实现队列？例如，我查看了 gearman，但我不明白如何在相同的 HTTP 响应中返回结果。

（对不起，如果我的问题不清楚，如果需要我会尝试更新它......）

更新：

我需要一个队列，因为可能有大量客户端同时请求大量文件，并且在同时运行几个大请求后服务器会崩溃。1\. 只能有少量同时运行的进程（最多 3 个） 2\. 不会​​因为服务器内存或 CPU 能力最大化而丢失任何进程 3\. 应在队列上强制执行优先级以对小型进程公平与可以在几分钟内送达的大型食品相比，可以在几秒钟内送达。

我如何能够满足这些请求并拥有这个队列？那是我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T22:13:18.827

这里描述的方法是一个很好的例子，在我的情况下该怎么做：http: [//www.adayinthelifeof.nl/2011/06/02/asynchronous-operations-in-rest/](http://www.adayinthelifeof.nl/2011/06/02/asynchronous-operations-in-rest/)

# r - 在 R 中计算月收益

> ID：14195059
> 
> 赞同：4
> 
> 时间：2013-01-07T11:33:28.990
> 
> 标签：r, for-loop, finance, portfolio

这可能是一个无关紧要的问题，但不幸的是我无法解决它。我有 50 家公司的股票投资组合。我有每家公司在那一天的日期和收盘价。每家公司的数据因股票交易日期而异。

我使用此代码计算每日收益：

```
return=matrix(NA,nrow(companies),ncol(companies)-1)

for (j in 2:52){
  k=0
  for (i in 1:nrow(companies)){
    if (!is.na(companies[i,j]) & k==0) {
      base= companies[i,j]
      k=k+1
    }
    else {if ( k==1) {return[i,j-1] = ((companies[i,j]-base)/base)*100} 
          else {temp=0}
    }
  }
}
return[1:30,] 
```

我现在想计算相同公司投资组合的每月回报。我用来计算的公式是：

```
Return = [(Price on Last day of month) - (Price on other day)]*100/(Price on last day of month) 
```

我想在一年中重复这个过程 12 个月和 12 年（因为那是我拥有的数据的持续时间）。我打算写一个for循环来做这个计算。有人可以帮我解决这个问题。不幸的是，我不能使用 quantmod 包，因为股票价格来自印度证券交易所，quantmod 无法从中读取价格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:50:22.887

你应该绝对使用`quantmod`，你可以。这些`quantmod`方法`monthlyReturn, dailyReturn, ..., allReturns`需要`xts`时间序列作为输入。因此，如果您有每日数据（例如收盘价）和相应的日期，您可以构建您的时间序列并将其传递给所需的`quantmod`方法。

例子：

```
library(package="quantmod")

prices <- c(7655.88, 7612.39, 7612.39, 7778.78, 7756.44, 7776.37)
dates <- as.Date(c("2012-12-26", "2012-12-27", "2012-12-30", "2013-01-01", "2013-01-02", "2013-01-03"))
ts <- xts(prices, dates)

dailyReturn(ts)
monthlyReturn(ts) # this will return bogus data because we don't have one month of data in this example 
```

# java - 在运行时创建摆动组件

> ID：14195060
> 
> 赞同：5
> 
> 时间：2013-01-07T11:33:30.350
> 
> 标签：java, swing, swingworker, event-dispatch-thread, invokelater

我创建了应用程序，它的行为与预期的差不多。只要数据库查询正在运行，gui 就会保持响应。当使用 SwingUtilities.invokeLater() 创建自定义面板时，gui 会冻结很短的时间。

当我使用 SwingUtilities.invokeAndWait() 时，它在高端游戏 PC 上运行非常流畅。（可能不是最好的编码机器......）但是在相对较慢的机器（双核，2GB RAM）上，gui“滞后”

我创建了一个非常小的版本的程序来重现该行为。测试时增加 TEST_NUMBER_OF_PANELS 的值。

它将它设置为一个非常大的值，以在我当前的 PC 上重现行为，而无需任何花哨的外观和感觉以及其他组件。但我不想这样发布。所以我把它减到100

```
package test;

import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Vector;

import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.GroupLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.JTable;
import javax.swing.SwingConstants;
import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.event.TableModelEvent;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;

//import org.pushingpixels.substance.api.SubstanceLookAndFeel;
//import org.pushingpixels.substance.api.skin.BusinessBlackSteelSkin;
//import org.pushingpixels.substance.api.skin.SubstanceBusinessBlackSteelLookAndFeel;

public class Test extends JFrame {
    private static final int TEST_NUMBER_OF_PANELS = 100;
    private static JTabbedPane tabbedPane = new JTabbedPane();
    Test() {
        this.setLayout(new BorderLayout());
        this.setSize(1050, 700);
        this.setMinimumSize(new Dimension(400,200));
        this.add(tabbedPane, BorderLayout.CENTER);

        JButton testbutton = new JButton("new tab");
        testbutton.addMouseListener(new MouseListener() {
            @Override
            public void mousePressed(MouseEvent e) {
                tabbedPane.addTab("tab x", new TestTabContent());
            }
            @Override
            public void mouseReleased(MouseEvent e) {
            }
            @Override
            public void mouseExited(MouseEvent e) {
            }
            @Override
            public void mouseEntered(MouseEvent e) {
            }
            @Override
            public void mouseClicked(MouseEvent e) {
            }
        });
        this.add(testbutton, BorderLayout.NORTH);
        //tabbedPane.addTab("tab1", new TestTabContent());
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new Test().setVisible(true);
                /*
                try {
                    UIManager.setLookAndFeel(new SubstanceBusinessBlackSteelLookAndFeel());
                } catch (Exception e) {
                    System.out.println("Substance Business failed to initialize");
                }
                SubstanceLookAndFeel.setSkin(new BusinessBlackSteelSkin());
                new Test()
                .setVisible(true);
                */
            }
        });

    }

    private class TestTabContent extends JPanel {
        TestTabContent() {
            final JPanel boxContainer = new JPanel();
            boxContainer.setLayout(new BoxLayout(boxContainer, BoxLayout.Y_AXIS));
            JPanel boxContainerOuter = new JPanel();
            boxContainerOuter.setLayout(new BorderLayout());
            boxContainerOuter.add(boxContainer, BorderLayout.NORTH);
            JScrollPane mainScrollPane = new JScrollPane(boxContainerOuter);

            // create toolbar
            JPanel toolBar = new JPanel();
            toolBar.setLayout(new BorderLayout());

            //east
            JPanel InfoPanel = new JPanel();
            InfoPanel.setLayout(new BoxLayout(InfoPanel, BoxLayout.X_AXIS));
            InfoPanel.add(new JLabel("test: some info ..."));
            toolBar.add(InfoPanel, BorderLayout.WEST);
            //west
            JPanel viewOptionPanel = new JPanel();
            viewOptionPanel.setLayout(new BoxLayout(viewOptionPanel, BoxLayout.X_AXIS));
            viewOptionPanel.add(new JLabel("some controls.."));
            toolBar.add(viewOptionPanel, BorderLayout.EAST);

            // set main panel´s layout
            GroupLayout layout = new GroupLayout(this);
            this.setLayout(layout);
            layout.setHorizontalGroup(
                    layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addComponent(toolBar, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(mainScrollPane)
                    );
            layout.setVerticalGroup(
                    layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                            .addComponent(toolBar, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                            .addGap(0, 0, 0)
                            .addComponent(mainScrollPane, GroupLayout.DEFAULT_SIZE, 413, Short.MAX_VALUE))
                    );

            // create controls 
            SwingWorker<String, Void> worker = new SwingWorker<String, Void>() {
                @Override
                protected String doInBackground() throws Exception {
                    // RUN DATABASE QUERY
                    // ------------------
                    //Thread.sleep(1000);
                    // ------------------
                    // CREATE TESTPANELS

                    ArrayList<ArrayList<ArrayList<String>>> dataFromQuery = createDummyData();

                    for (final ArrayList<ArrayList<String>> tableData : dataFromQuery) {
                        //SwingUtilities.invokeAndWait(new Runnable() {
                        SwingUtilities.invokeLater(new Runnable() {
                            @Override
                            public void run() {
                                // create panels on edt
                                TestPanel newTestPanel = new TestPanel(tableData);
                                JPanel seperator = new JPanel(new BorderLayout());
                                seperator.setBackground(Color.black);
                                seperator.add(newTestPanel);

                                boxContainer.add(seperator);
                            }
                        });
                    }
                    return "";
                }

            };
            worker.execute();
        }
        private ArrayList<ArrayList<ArrayList<String>>> createDummyData () {
            ArrayList<String> columns = new ArrayList<String>();
            ArrayList<ArrayList<String>> rows = new ArrayList<ArrayList<String>>();
            ArrayList<ArrayList<ArrayList<String>>> tables = new ArrayList<ArrayList<ArrayList<String>>>();
            for (int i = 0; i < 15; i ++) {
                columns.add("test213124");
            }
            for (int i=0; i < 8; i++) {
                rows.add(columns);
            }
            for (int i=0; i < TEST_NUMBER_OF_PANELS; i++) {
                tables.add(rows);
            }
            return tables;
        }
    }
    public class TestPanel extends JPanel { 
        private static final long serialVersionUID = -3853151036184428736L;
        public static final int radioButtonWidth = 20;

        private JTable table;
        private DefaultTableModel tableModel;
        private JPanel collapsiblePane; 
        private JButton collapsingButton;

        TestPanel(ArrayList<ArrayList<String>> tableData) {
            System.out.println("testpanel constructor");
            createTestPanel(tableData);
        } 

        private void createTestPanel(ArrayList<ArrayList<String>> tableData) {          
            // container with boxLayout for collapsiblePane
            JPanel boxContainer = new JPanel();
            boxContainer.setLayout(new BoxLayout(boxContainer, BoxLayout.Y_AXIS));
            boxContainer.setBorder(BorderFactory.createMatteBorder(0, 1, 1, 1, Color.BLACK));

            // set table stuff
            tableModel = new DefaultTableModel();

            tableModel.setColumnIdentifiers(
                    new Object[] {
                            "test", "test", "test", "test", "test", "test", "test", "test", "test", "test", "test", "test", "test", "test", "test"});

            for (ArrayList<String> rowData : tableData) {
                Vector<Serializable> data = new Vector<Serializable>();

                for (String columnData : rowData) {
                    data.add(columnData);
                }
                tableModel.addRow(data);

            }
            table = new JTable(tableModel) {
                public void tableChanged(TableModelEvent e) {
                    super.tableChanged(e);
                    repaint();
                }

                public Component prepareRenderer(TableCellRenderer renderer, int row, int column){
                    Component returnComp = super.prepareRenderer(renderer, row, column);
                    Color alternateColor = new Color(225,225,238);
                    Color usualColor = Color.WHITE;
                    if (!returnComp.getBackground().equals(getSelectionBackground())){
                        Color bg = (row % 2 == 0 ? alternateColor : usualColor);
                        returnComp .setBackground(bg);
                        bg = null;
                    }
                    return returnComp;
                }
            };

            boxContainer.add(table.getTableHeader(), BorderLayout.NORTH);
            boxContainer.add(table, BorderLayout.CENTER);

            // other controls / toolbar
            JPanel toolbar = new JPanel();
            toolbar.setLayout(new BorderLayout());

            // buttons to the right
            JPanel toolbarButtonGroup = new JPanel();
            toolbarButtonGroup.setLayout(new BoxLayout(toolbarButtonGroup, BoxLayout.X_AXIS));

            // test button
            JButton button = new JButton("test");
            JPanel sepPanel = new JPanel();
            sepPanel.add(button);
            toolbarButtonGroup.add(sepPanel);
            // test button
            button = new JButton("test");
            sepPanel = new JPanel();
            sepPanel.add(button);
            toolbarButtonGroup.add(sepPanel);
            // test button
            button = new JButton("test");
            sepPanel = new JPanel();
            sepPanel.setBorder(BorderFactory.createEmptyBorder(0,0,0,5));
            sepPanel.add(button);

            toolbarButtonGroup.add(sepPanel);

            toolbar.add(toolbarButtonGroup, BorderLayout.EAST);
            boxContainer.add(toolbar);

            JPanel subPanel = new JPanel();
            subPanel.setLayout(new BoxLayout(subPanel, BoxLayout.Y_AXIS));

            JPanel buttonPanel = new JPanel(); 
            buttonPanel.setLayout(new BorderLayout());
            buttonPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 24));

            collapsingButton = new JButton(tableModel.getValueAt(0, 8).toString());
            collapsingButton.setName("toggleButton"); 
            collapsingButton.setHorizontalAlignment(SwingConstants.LEFT);
            collapsingButton.setBorderPainted(false);
            collapsingButton.setFocusPainted(false);

            buttonPanel.add(collapsingButton, BorderLayout.CENTER); 
            buttonPanel.setBorder(BorderFactory.createLineBorder(Color.BLACK));
            subPanel.add(buttonPanel);

            collapsiblePane = new JPanel();

            collapsiblePane.setName("collapsiblePane"); 
            collapsiblePane.setLayout(new CardLayout()); 

            collapsiblePane.add(boxContainer, ""); 
            subPanel.add(collapsiblePane); 

            add(subPanel);      
        } 
    } 
} 
```

我想我应该使用 SwingWorker 而不是在 EDT 上运行尽可能多的代码。我知道我应该在单独的线程中访问 TableModel。如果应用程序中只有一个 JTable，它很简单：我在 EDT 上创建表并更新线程上的数据。

在那种情况下，我不确定哪种方法是可取的。现在所有与 tabe 相关的东西都在 TestPanel 类中管理。它完全在 EDT 上运行。

当然，我可以在 TestPanel 中运行一个线程来处理 TableModel，但是为每个面板创建一个新线程对我来说听起来不是一个聪明的主意。

另一个“想法”是在运行数据库查询的同一线程上直接在 TestTab 中创建模型。但由于它属于 TestPanel，这种方法听起来像是糟糕的设计。

到目前为止，我最肮脏的想法是使用 invokeAndWait() 并让 Tread.sleep() 一段时间，这样 ETD 就不会每隔几毫秒就被新调用打耳光。但我实际上并不想那样编码。

什么设计方法可能是最可取的？

* * *

我想在运行时在 JTabbedPane 中创建几个自定义面板。自定义面板的数量取决于数据库查询的结果集。

每个自定义面板都包含一个 JTable，其中包含来自结果集中的大量数据和一些 JButton。

我的计划是使用 SwingWorker 在单独的线程上运行数据库查询。然后使用 invokeLater() 在 Event Dispatch Thread 上安排一个任务来创建自定义面板，因为必须在 EDT 中创建和访问 Swing 组件。

使用这种方法，如果结果集包含很多行，则 gui 在创建自定义面板时可能会冻结。

解决或最小化这个问题的最优雅的方法是什么？

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:43:24.663

您可能应该首先考虑限制显示的结果数量！

除此之外，Swing 组件的创建非常高效。事实上，我希望它能够在结果从数据库返回时一样快地创建屏幕外组件实例，如果不是更快的话。你确定这真的是瓶颈吗？

最后，如果您担心冻结，您可以随时使用 invokeLater 为每个自定义面板触发单独的事件。然后将有机会在每个面板创建之间发生事件处理，这应该消除“冻结”效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:52:12.177

你想在不干扰数据库的情况下运行数据库查询`EDT`，所以总是欢迎单独运行。在里面运行你的程序`invokeLater`，然后是一个用于数据库查询的新线程。巧合的是，我也处理过与你类似的问题，所以有看看我做了什么。

```
 ////start a Thread  for DB query on a button click or whatever you want
   private void jButton2ActionPerformed(java.awt.event.ActionEvent evt)   
{                                         
 new Thread(new thread1()).start();

} 
```

内线：

```
public class thread1 implements Runnable
{

    public void run() {
     insert ins=new insert();/*make object of class if needed(class to handle Db operations)*/

    try {
        ins.insert(path); //call the function to insert into database or any other query
    } 

   catch (ClassNotFoundException ex) {
        Logger.getLogger(forminsert.class.getName()).log(Level.SEVERE, null, ex);
    } catch (SQLException ex) {
        Logger.getLogger(forminsert.class.getName()).log(Level.SEVERE, null, ex);
    }

    JOptionPane.showMessageDialog(frame, "Successfully inserted into database");
    ///show it is inserted

    getRootPane().updateUI();//may work without this(optional)

    }
} 
```

有了这个，我从来没有遇到过任何冻结问题。它插入数据库没有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:39:48.127

> 我的计划是使用 SwingWorker 在单独的线程上运行数据库查询。然后使用 invokeLater() 在 Event Dispatch Thread 上安排一个任务来创建自定义面板，因为必须在 EDT 中创建和访问 Swing 组件。
> 
> 使用这种方法，如果结果集包含很多行，则 gui 在创建自定义面板时可能会冻结。

它不应该**冻结**，我认为您的方法是正确的。

如果您仍然觉得它会冻结，请尝试告诉我们。

# bash - 我如何在 curl 中传递没有转义序列的 json？

> ID：14195065
> 
> 赞同：-1
> 
> 时间：2013-01-07T11:33:45.000
> 
> 标签：bash

我必须在 cURL 中将 JSON 作为请求发布为

`curl -H 'Content-Type: application/json' -X POST http://localhost:3000/users.json\ -d "{"user" : {"email":"sample@example.com", "password":"qwerty", "password_confirmation":"qwerty"}}"`

但这显示`Multi_json decode`错误。

它改为接受这个。

`curl -H 'Content-Type: application/json' -X POST http://localhost:3000/users.json -d "{\"user\" : {\"email\":\"sample@example.com\", \"password\":\"qwerty\", \"password_confirmation\":\"qwerty\"}}"`

如何在不转义的情况下发送 JSON？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:00:30.790

这与 cURL 或 JSON 无关。

这里真正的问题是：“如何在 bash 中传递包含引号字符的参数？” （或任何用于访问命令行 curl 应用程序的 shell）。

`'`用字符而不是字符引用字符串`"`。

这仅在数据不包含`'`字符时才有效。

# android - Android GCM 开启灯

> ID：14195067
> 
> 赞同：6
> 
> 时间：2013-01-07T11:33:50.913
> 
> 标签：android, push-notification, google-cloud-messaging

我正在做一个Android项目。我可以成功接收推送通知。

收到推送通知时如何开灯？

而且我需要在收到推送通知时振动我的手机。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T11:37:19.577

有关更多信息，请参阅此[链接](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)。

向清单文件添加权限

```
<uses-permission android:name="android.permission.VIBRATE"></uses-permission> 
```

**编辑** // 1\. 获取 NotificationManager 的引用

```
String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns); 
```

// 2\. 实例化通知

```
int icon = R.drawable.notification_icon;
CharSequence tickerText = "Hello";
long when = System.currentTimeMillis();
Notification notification = new Notification(icon, tickerText, when); 
```

// 3\. 定义Notification的扩展消息和Intent

```
Context context = getApplicationContext();
CharSequence contentTitle = "My notification";
CharSequence contentText = "Hello World!";
Intent notificationIntent = new Intent(this, MyClass.class);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent); 
```

// 4\. 将通知传递给 NotificationManager

```
private static final int HELLO_ID = 1;
mNotificationManager.notify(HELLO_ID, notification); 
```

// ---------------------- // 添加声音 // -------------------- - // 一个。默认声音

```
notification.defaults |= Notification.DEFAULT_SOUND; 
```

// b. 来自 SD 卡的自定义声音

```
notification.sound = Uri.parse("file:///sdcard/notification/SOUND.mp3"); 
```

// ---------------------- // 添加振动 // -------------------- - // 一个。默认振动

```
notification.defaults |= Notification.DEFAULT_VIBRATE; 
```

// b. 自定义振动

```
long[] vibrate = {0,100,200,300};
notification.vibrate = vibrate; 
```

// ------------------------------------ // 添加闪光灯 // ----------------- - - - - // 一个。默认灯

```
notification.defaults |= Notification.DEFAULT_LIGHTS; 
```

// b. 定制灯

```
notification.ledARGB = 0xff00ff00;
notification.ledOnMS = 300;
notification.ledOffMS = 1000;
notification.flags |= Notification.FLAG_SHOW_LIGHTS; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-25T03:34:07.230

```
 NotificationManager notificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);

    NotificationCompat.Builder mBuilder     = new NotificationCompat.Builder(context)
                                                    .setSmallIcon(icon)
                                                    .setContentTitle(title)
                                                    .setContentText(message)
                                                    .setAutoCancel(true)
                                                    .setDefaults(Notification.DEFAULT_LIGHTS);

    Intent              notificationIntent  = new Intent(context, MyActivity.class);

    /* Set intent so it does not start a new activity */
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);

    AudioManager am = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);

    /* Even if the mode is set to "Sound & Vibration" in the phone, 
     * the status code that getRingerMode() returns is RINGER_MODE_NORMAL.
     */
    switch (am.getRingerMode()) 
    {
        case AudioManager.RINGER_MODE_VIBRATE:
            mBuilder.setDefaults(Notification.DEFAULT_VIBRATE);
            break;
        case AudioManager.RINGER_MODE_NORMAL:
            mBuilder.setDefaults(Notification.DEFAULT_SOUND);
            break;
        default:
            mBuilder.setDefaults(Notification.DEFAULT_SOUND);
     }

    mBuilder.setContentIntent(intent);        
    notificationManager.notify(id, mBuilder.build()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:36:28.047

请在设置通知方法中添加此代码

```
 notification.flags   |= Notification.FLAG_AUTO_CANCEL;
    notification.defaults |= Notification.DEFAULT_SOUND;
    notification.defaults |= Notification.DEFAULT_LIGHTS;
    notification.defaults |= Notification.DEFAULT_VIBRATE; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:38:12.917

用这个

```
notification.flags |= Notification.FLAG_SHOW_LIGHTS; 
```

参考这个[链接](http://developer.android.com/reference/android/app/Notification.html)

# api - 我需要 REST API 包吗？

> ID：14195069
> 
> 赞同：2
> 
> 时间：2013-01-07T11:33:53.733
> 
> 标签：api, http, rest, definition

一般来说，我对 Web 开发还很陌生。

为什么要实现 REST api？
[使用包创建 RESTful API 接口有什么好处](https://stackoverflow.com/questions/8452686/whats-the-advantage-of-using-a-package-to-create-a-restful-api-interface?rq=1)

我将 JSON 返回到移动设备，将 HTML 返回到浏览器，但我认为这不算`you need to support multiple serializations (XML, YAML, Plists, or JSONP in addition to JSON)`

并且列出的这些原因在短时间内对我来说都不会成为现实。
（我怀疑没有多少网站会因为这些原因而符合条件。）但是我看到很多关于 REST api 的 SO 问题。

这让我想知道 `What would be the dominating reasons a web developer would start implementing REST API?`

我想我的困惑是由于我对什么是 REST 缺乏了解。我读了似乎是最简单的关于什么是休息的介绍。
[http://tomayko.com/writings/rest-to-my-wife](http://tomayko.com/writings/rest-to-my-wife)
[RESTful 编程到底是什么？](https://stackoverflow.com/questions/671118/what-exactly-is-restful-programming)

那么 REST 是什么？- 以下是我的理解。

> 您通过 URL 公开您的资源。(/user/3)
> 客户端可以对资源（URL）应用不同的动词（GET/POST/PUT/DELETE）来访问/操作资源。

我可以在不使用tastepie 或django-piston 的情况下做到这一点。（我使用django 作为我的web 框架）
这些包（一般来说，PHP、JAVA 等似乎有类似的包）给你买了什么？

简而言之，我很好奇，

1.  当一个普通的 Web 开发人员需要关心 REST API 时？
2.  因为 REST 是*（什么）*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:11:34.060

你是对的，REST 主要是关于正确使用 HTTP。在没有任何框架的情况下这样做和 RESTful 一样好。我认为 REST 的全部*意义*在于没有魔法，只有 HTTP。

框架/库可能会使您免于重新实现一些样板代码，并为您提供方便的方法。所以如果我是你，我不会完全排除它们。当您开始分解通用代码时，您最终可能会重新实现其中一个库:-)

例如，在一个已经使用 SpringMVC 的项目上，为 AJAX 请求添加一些 JSON REST 服务只是注释控制器的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:24:38.057

> 我可以在不使用tastepie 或django-piston 的情况下做到这一点。（我使用django 作为我的Web 框架）这些包（一般来说，PHP、JAVA 等似乎有类似的包）给你买了什么？

如果您使用 Django，我强烈建议您使用其中一种 API 框架。我建议您查看[django-tastypie](http://tastypieapi.org/)或[django-rest-framework](http://django-rest-framework.org)，因为活塞现在似乎没有维护。

这不是绝对必要的，但它最终可能会为您节省大量时间，因为它们都包括对序列化、身份验证、权限、限制等等的各种有用的支持。如果您推出自己的 API，您最终可能会重复这些框架中的任何一个为您完成的大量工作。

它们还将通过为构建 Web API 提供正确的抽象来为您提供一个合理的结构来帮助您工作，因此您无需从第一原理开始考虑所有事情。

# java - 将时间戳添加到 hashmap Post。如何？

> ID：14195070
> 
> 赞同：0
> 
> 时间：2013-01-07T11:33:59.100
> 
> 标签：java, spring, post, hashmap, timestamp

所以，我正在尝试将 TIMESTAMP 添加到 hashmap 帖子中。（规则-publish_date 和expiration_date）我正在使用在json 中编码的api 将数据发布到远程服务器。

这是 POST 格式的示例

```
 content={
    "external_id": 1000,
    "template_type_id": 103,
    "channel_id": 226,
    "title": "Título do Conteúdo",
    "text": "Descrição do Conteúdo",
    "rules": {
        "publish_date": "2012-07-20T11:18:00-03:00",
        "expiration_date": "2012-08-25T11:18:00-03:00",
        "notify_publish": true,
        "notify_expiration": false,
        "highlighted": true
    },
    "interactions": {
        "allow_comment": true,
        "auto_download": false
    }
} 
```

首先，我创建了一个名为 ContentDTO 的类并添加了它的代码

```
package br.com.xxxx.xxxx;

public class ContentDTO {

    public ContentDTO(String external_id, Integer template_type_id, String channel_id, String title, String text, RulesDTO rules, InteractionsDTO interactions) {
        super();
        this.external_id = external_id;
        this.template_type_id = template_type_id;
        this.channel_id = channel_id;
        this.title = title;
        this.text = text;
        this.rules = rules;
        this.interactions = interactions;
    }

    public ContentDTO() {
        super();
    }

    private String external_id; 

    private Integer template_type_id;

    private String channel_id;

    private String title;

    private String text;

    private RulesDTO rules;

    private InteractionsDTO interactions;

    public String getExternal_id() {
        return external_id;
    }

    public void setExternal_id(String external_id) {
        this.external_id = external_id;
    }

    public Integer getTemplate_type_id() {
        return template_type_id;
    }

    public void setTemplate_type_id(Integer template_type_id) {
        this.template_type_id = template_type_id;
    }

    public String getChannel_id() {
        return channel_id;
    }

    public void setChannel_id(String channel_id) {
        this.channel_id = channel_id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    public RulesDTO getRules() {
        return rules;
    }

    public void setRules(RulesDTO rules) {
        this.rules = rules;
    }

    public InteractionsDTO getInteractions() {
        return interactions;
    }

    public void setInteractions(InteractionsDTO interactions) {
        this.interactions = interactions;
    }

} 
```

然后，我创建了 InteractionsDTO 和 RulesDTO。这是RulesDTO 代码。

```
package br.com.xxxx.xxxx;

import java.security.Timestamp;

public class RulesDTO {

    public RulesDTO(Timestamp publish_date, Timestamp expiration_date,
            Boolean notify_publish, Boolean notify_expiration,
            Boolean highlihted) {
        super();
        this.publish_date = publish_date;
        this.expiration_date = expiration_date;
        this.notify_publish = notify_publish;
        this.notify_expiration = notify_expiration;
        this.highlihted = highlihted;
    }

    public RulesDTO() {
        super();

    }

    public Timestamp publish_date;

    public Timestamp expiration_date;

    public Boolean notify_publish;

    public Boolean notify_expiration;

    public Boolean highlihted;

    public Timestamp getPublish_date() {
        return publish_date;
    }

    public void setPublish_date(Timestamp publish_date) {
        this.publish_date = publish_date;
    }

    public Timestamp getExpiration_date() {
        return expiration_date;
    }

    public void setExpiration_date(Timestamp expiration_date) {
        this.expiration_date = expiration_date;
    }

    public Boolean getNotify_publish() {
        return notify_publish;
    }

    public void setNotify_publish(Boolean notify_publish) {
        this.notify_publish = notify_publish;
    }

    public Boolean getNotify_expiration() {
        return notify_expiration;
    }

    public void setNotify_expiration(Boolean notify_expiration) {
        this.notify_expiration = notify_expiration;
    }

    public Boolean getHighlihted() {
        return highlihted;
    }

    public void setHighlihted(Boolean highlihted) {
        this.highlihted = highlihted;
    }

} 
```

然后，哈希图。

```
HashMap<String, ContentDTO> cnt = new HashMap<String, ContentDTO>();

    ContentDTO contentDTO = new ContentDTO();
    contentDTO.setExternal_id("CNT1");
    contentDTO.setTemplate_type_id(103);
    contentDTO.setChannel_id("CHN1");
    contentDTO.setTitle("Conteudo1");
    contentDTO.setText("Conteudo teste 1");
    RulesDTO rules = new RulesDTO();
    rules.setPublish_date("2012-012-28T11:18:00-03:00");
    rules.setExpiration_date("2013-08-25T11:18:00-03:00");
    rules.setNotify_publish(true);
    rules.setNotify_expiration(false);
    rules.setHighlihted(true);

    contentDTO.setRules(rules);

    InteractionsDTO interactions = new InteractionsDTO();
    interactions.setAllow_comment(true);
    interactions.setAuto_downloa(false);

    contentDTO.setInteractions(interactions);

    cnt.put("content",contentDTO); 
```

但是我在 publish_date 和 expiration_date 中得到一个错误。（RulesDTO 中的方法 setPublish_date(timestamp) 不适用于参数（字符串））

我应该怎么办？

谢谢转发！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:41:00.393

你有

```
public void setPublish_date(Timestamp publish_date) { 
```

和

```
rules.setPublish_date("2012-012-28T11:18:00-03:00"); 
```

A`Timestamp`不是 a `String`，您必须将`"2012-012...."`字符串转换为`Timestamp`对象，这[`SimpleDateFormat.parse(...)`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29)或`Timestamp.valueOf(...)`可以帮助您 - 但请注意，您可能不想将*december*编码为“012”，而是使用“12”...

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:41:38.173

`setPublish_date(Timestamp)`期望 a `Timestamp`not a `String`as 参数。您可以使用[`Timestamp.valueOf`](http://docs.oracle.com/javase/6/docs/api/java/sql/Timestamp.html#valueOf%28java.lang.String%29)

```
rules.setPublish_date(Timestamp.valueOf("2012-01-28 11:18:00")); 
```

# java - 如何在 Java 中移动形状？

> ID：14195071
> 
> 赞同：1
> 
> 时间：2013-01-07T11:33:59.063
> 
> 标签：java, multithreading, shape, graphics2d

我在单独的线程中在 JPanel 上绘制形状。我想通过调用方法移动这些形状，`move()`但图形不会改变它的位置。

这是我的 CustomShape

```
public class CustomShape {
    private static final int Y_STEP = 5;
    private static final int X_STEP = 5;
    public String name;
    public Shape shape;
    public Color color;
    private Point newLocation;

    public void move() {
        newLocation.x += X_STEP;
        newLocation.y += Y_STEP;
        //How set new location ?
        //It doesn't work
        this.shape.getBounds().setLocation(newLocation);        
        System.out.println(String.format("New location is [%d,%d]",newLocation.x, newLocation.y));
        System.out.println(String.format("Move to [%d,%d]", this.shape.getBounds().getLocation().x, this.shape.getBounds().getLocation().y));       
    }

    public CustomShape(Shape shape, Color color, String name) {
        this.shape = shape;
        this.color = color;
        this.name = name;
        newLocation = this.shape.getBounds().getLocation();
    } 
```

控制台上的示例输出

```
New location is [15,15]
Move to [10,10]
New location is [20,20]
Move to [10,10]
New location is [25,25]
Move to [10,10] 
```

我的 JPanel

```
public class ViewPanel extends JPanel {
    private static final long serialVersionUID = 5252479726227082794L;
    private List<CustomShape> shapeList = new ArrayList<CustomShape>();
    private Map<String, Thread> threads = new HashMap<String, Thread>();
    private Timer timer;
    private static final int TIMER_SPEED = 1000;

    public ViewPanel() {
        super();
        this.setDoubleBuffered(true);
        timer = new Timer(TIMER_SPEED, null);

        timer.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                testMove();
            }
        });
    }
    private void testMove() {
        for (CustomShape shape : shapeList) {
            shape.move();
        }
    }

    public void startMove() {
        timer.start();
    }

    public void stopMove() {
        timer.stop();
    }

    public void addShape(CustomShape shape) {
        shapeList.add(shape);
        if (!threads.containsKey(shape.getName())) {
            Thread t = new Thread(new DrawThread(shape, this.getGraphics()),
                    shape.getName());
            threads.put(shape.getName(), t);
            t.start();
        }
        this.repaint();
    }

    public void removeShape(CustomShape shape) {
        if (threads.containsKey(shape.getName())) {
            Thread t = threads.remove(shape.getName());
            t.interrupt();
            shapeList.remove(shape);
        }
        this.repaint();
    }
} 
```

绘制形状的螺纹

```
public class DrawThread implements Runnable {
    private static final int THREAD_SLEEP = 100;
    private CustomShape shape;
    private Graphics2D g2d;
    private boolean interrupted = false;

    public DrawThread(CustomShape shape, Graphics g) {
        this.shape = shape;
        this.g2d = (Graphics2D)g;
    }

    @Override
    public void run() {
        while (true) {
            try {
                Thread.sleep(THREAD_SLEEP);
                g2d.setColor(this.shape.getColor());
                g2d.draw(this.shape.getShape());
            } catch (InterruptedException e) {
                System.out.println(String.format("interrupt %s", Thread
                        .currentThread().getName()));
                interrupted = true;
            } finally {
                if (interrupted)
                    break;
                }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:41:43.420

它有很多代码要阅读，很难找到错误，所以最好为此发布一个 SSCCE。但是，这里有一个镜头 EG，展示如何通过箭头键移动形状，`JApplet`重点是鼠标点击.如果不想使用方向键，可以实现鼠标移动。请参阅`comments`程序以获得更好的理解。

![向右移动](../Images/f03cd56d4ae27e7deb054ae36272778f.png)

![在此处输入图像描述](../Images/c08d2fd1cc85c2e7628c6a3bd3afbad7.png)

这是代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class EgToMove extends JApplet
              implements KeyListener, FocusListener, MouseListener {

static final int SQUARE_SIZE = 40;
int squareTop, squareLeft;

boolean focussed = false; 
DisplayPanel canvas;

public void init() {

  squareTop = getSize().height / 2 - SQUARE_SIZE / 2;
  squareLeft = getSize().width / 2 - SQUARE_SIZE / 2;

  canvas = new DisplayPanel();  
  setContentPane(canvas);     

  canvas.setBackground(Color.BLACK);
  canvas.addFocusListener(this);   // Set up the applet to listen for events
  canvas.addKeyListener(this);   
  canvas.addMouseListener(this);

  } 

 public void keyTyped(KeyEvent e) {
  //do nothing, if u want something
 }

class DisplayPanel extends JPanel {

  public void paintComponent(Graphics g) {

     super.paintComponent(g);  

     if (focussed)
        g.setColor(Color.cyan);
     else
        g.setColor(Color.lightGray);

     int width = getSize().width;  
     int height = getSize().height; 
     g.drawRect(0,0,width-1,height-1);
     g.drawRect(1,1,width-3,height-3);
     g.drawRect(2,2,width-5,height-5);
     g.fillRect(squareLeft, squareTop, SQUARE_SIZE, SQUARE_SIZE);

     if (!focussed) {
        g.setColor(Color.magenta);
        g.drawString("Click to activate",7,20);
     }
  }  
  }

  // --------- Event handling methods

  public void focusGained(FocusEvent evt) {

  focussed = true;
  canvas.repaint();  // redraw with cyan border ///may b u had problem here
  }

  public void focusLost(FocusEvent evt) {

  focussed = false;
  canvas.repaint();  // redraw without cyan border///may b u had problem here
  }

  public void keyPressed(KeyEvent evt) {

  int key = evt.getKeyCode();  // keyboard code for the key that was pressed

  if (key == KeyEvent.VK_LEFT) {
     squareLeft -= 8;
     if (squareLeft < 3)
        squareLeft = 3;
     canvas.repaint();
  }
  else if (key == KeyEvent.VK_RIGHT) {
     squareLeft += 8;
     if (squareLeft > getSize().width - 3 - SQUARE_SIZE)
        squareLeft = getSize().width - 3 - SQUARE_SIZE;
     canvas.repaint();
  }
  else if (key == KeyEvent.VK_UP) {
     squareTop -= 8;
     if (squareTop < 3)
        squareTop = 3;
     canvas.repaint();
  }
  else if (key == KeyEvent.VK_DOWN) {
     squareTop += 8;
     if (squareTop > getSize().height - 3 - SQUARE_SIZE)
        squareTop = getSize().height - 3 - SQUARE_SIZE;
     canvas.repaint();
  }

  } 

 public void keyReleased(KeyEvent evt) {
  // empty method, required by the KeyListener Interface
 }

 public void mousePressed(MouseEvent evt) {
    // Request that the input focus be given to the
    // canvas 
  canvas.requestFocus();
 }

 public void mouseEntered(MouseEvent evt) { }
 public void mouseExited(MouseEvent evt) { }
 public void mouseReleased(MouseEvent evt) { }
 public void mouseClicked(MouseEvent evt) { }

 } 
```

# jquery - 图像交换 jquery mouseover

> ID：14195073
> 
> 赞同：2
> 
> 时间：2013-01-07T11:34:00.600
> 
> 标签：jquery, image, mouseover, swap, mouseout

我目前在让 mouseover 和 mouseout 函数在 jquery 中工作时遇到一些问题。我有两个名为“images/doomsday.jpg”的图像和另一个名为“keep_calm.png”的图像，我想在鼠标悬停时交换它们，然后在没有时交换回来。我已经包含了我目前正在尝试使用的代码，任何人都可以看到它的任何问题以及我哪里出错了吗？

```
$(function() {
$("images/doomsday.jpg")
    .mouseover(function() { 
        var src = $(this).attr("src").match(/[^\.]+/) + "images/keep_calm.png";
        $(this).attr("src", src);
    })
    .mouseout(function() {
        var src = $(this).attr("src").replace("images/keep_calm.png");
        $(this).attr("src", src);
    }); 
```

});

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T11:42:57.013

你的选择器是错误的。[您可以在此处](http://docs.jquery.com/Selectors)了解选择器。

这是图像交换的[演示](http://jsbin.com/asalod/2/edit)。

代码 ：

```
$('document').ready(function() {

  $('img').on({
    'mouseover' : function() {
      $(this).attr('src','http://media02.hongkiat.com/css3-code-slim/css3-markup.jpg');
    },
    mouseout : function() {
  $(this).attr('src','http://www.w3.org/html/logo/downloads/HTML5_Logo_512.png');
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:02:40.660

没有使用选择器。这是您的最终代码的样子

的HTML

```
<div> <img src="images/doomsday.jpg" id='myimage' /> </div> 
```

Javascript

```
$('document').ready(function() {
$(function() {
$("#myimage")
    .mouseover(function() { 
        var src = $(this).attr("src").match(/[^\.]+/) + "images/keep_calm.png";
        $(this).attr("src", src);
    })
    .mouseout(function() {
        var src = $(this).attr("src").replace("images/keep_calm.png");
        $(this).attr("src", src);
    });
});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:53:36.220

也许像这样的**演示**：http: [//jsfiddle.net/m4WuU/](http://jsfiddle.net/m4WuU/)只需使用 Jquery [toggleClass](http://api.jquery.com/toggleClass/)

HTML

```
 <div class="holder"><div> 
```

CSS：

```
 .holder { 
     background-image:url('images/keep_calm.png');         
  }

.swapHolder { 
   background-image:url('images/doomsday.png'); 
 } 
```

JS：

```
$('.holder').on('hover', function () {  
   $('.holder').toggleClass('swapHolder'); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:39:18.260

显然选择器是错误的：您应该使用例如`$("#imageid")`where image id 是您要更改的图像的 id。

# sqoop - Sqoop 并行连接不同的 MySQL 数据库

> ID：14195074
> 
> 赞同：0
> 
> 时间：2013-01-07T11:34:03.183
> 
> 标签：sqoop

Sqoop 可以与不同主机中的许多不同 Mysql 数据库并行连接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:52:10.423

目前还没有，但已经有 SQOOP-394 [1] JIRA 来添加这样的支持。

雅尔切克

链接：1：[https ://issues.apache.org/jira/browse/SQOOP-394](https://issues.apache.org/jira/browse/SQOOP-394)

# python - 在 Python 中实现类似于接口的东西的好方法是什么？

> ID：14195075
> 
> 赞同：2
> 
> 时间：2013-01-07T11:34:04.187
> 
> 标签：python, types, interface

什么是在 Python 中实现类似于 Delphi/C# 接口或抽象类的好方法？一个将强制其所有子类实现一组特定方法的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T12:42:06.230

最简单的方法是使用自 2.7 版以来已包含在 Python 中的抽象基类实现。

这使您可以使用元类将基类标记为抽象`abc.ABCMeta`类。然后，您可以将方法和属性标记为抽象。当您使用`ABCMeta`元类（或其任何子类）实例化一个类时，如果任何抽象属性或方法在实例中仍未定义，则会引发异常。

例如

```
>>> from abc import ABCMeta, abstractmethod
>>> class Foo(object):
    __metaclass__ = ABCMeta
    @abstractmethod
    def bar(self): pass

>>> class BadFoo(Foo):
    pass

>>> BadFoo()

Traceback (most recent call last):
  File "<pyshell#9>", line 1, in <module>
    BadFoo()
TypeError: Can't instantiate abstract class BadFoo with abstract methods bar
>>> class GoodFoo(Foo):
    def bar(self):
        return 42

>>> GoodFoo()
<__main__.GoodFoo object at 0x027354B0>
>>> 
```

仅当类被实例化时才进行检查，因为拥有一个只实现一些抽象方法的子类是完全合法的，因此它本身就是一个抽象类。

# jsf - 通过 JSF 中的 datahandler 对象下载文件

> ID：14195080
> 
> 赞同：1
> 
> 时间：2013-01-07T11:34:16.653
> 
> 标签：jsf, download, liferay, portal

我想在我的 jsf 项目中下载一个文件。在 bean 方面，我得到了 DataHandler 的对象。我试图搜索很多次，但我没有找到任何与之相关的东西。如何通过 datahandler 对象下载文件？

```
DataHandler src = attachment.getAttachment();

ByteArrayOutputStream output = new ByteArrayOutputStream();
src.writeTo(output);
FacesContext facesContext = FacesContext.getCurrentInstance();
ExternalContext externalContext = facesContext.getExternalContext();
externalContext.setResponseHeader("Content-Type", src.getContentType());            
externalContext.setResponseHeader("Content-Disposition", "attachment;filename=sachin.jpg");
externalContext.getResponseOutputStream().write(output.toByteArray());
facesContext.responseComplete(); 
```

如果有人知道一个关于文件下载和文件上传的好教程，它详细描述了整个过程，对我来说会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:15:20.363

我的一位朋友为我解决了这个问题。实际上liferay环境是问题所在。早些时候，我正在设置一个 portlet 响应。因此，他制作了一个不同的 servlet 供下载。

# c# - 在贝宝上显示信息

> ID：14195084
> 
> 赞同：1
> 
> 时间：2013-01-07T11:34:34.633
> 
> 标签：c#, paypal

![在下面](../Images/849a79083556b99af3dc2d0f3100dc12.png)

在上图中，您可以看到产品名称、价格和价格总和作为“项目总计”。我还想在“项目金额”之后显示“增值税金额”和“总金额”。

我正在向 Paypal 发送数据，如下所示：

```
<input type='hidden' value='" + ProductName + "' name='item_name_'>
<input type='hidden' value='" + PriceExVat + "' name='amount_'> 
```

现在我正在尝试将增值税金额发送为：

```
<input type='hidden' value='" + VatAmount + "' name='vat_'> 
```

但它不会显示在 Paypal 上。我怎样才能显示这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:13:58.690

用 PayPal 做你想做的事是不可能的。我可以提出的一项建议是计算您的增值税并将其作为单独的行项目传递，或者只是将增值税添加到每个项目本身的成本中。

# c# - 将图像从数据库显示到背景

> ID：14195086
> 
> 赞同：-1
> 
> 时间：2013-01-07T11:34:44.227
> 
> 标签：c#, asp.net

我创建了一个从计算机获取图像并存储在数据库中的应用程序。现在我想在我的图像控件中显示该图像我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:47:46.373

您可以在 aspx 页面上使用嵌入 c#。 [http://msdn.microsoft.com/en-us/library/ms178135%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms178135%28v=vs.100%29.aspx)。提取图像的来源并将其分配给 HTML 图像标签的 src 属性

# spring - 休眠事务管理器

> ID：14195087
> 
> 赞同：1
> 
> 时间：2013-01-07T11:34:48.383
> 
> 标签：spring, hibernate, jboss, transactionmanager

我有一个使用spring和hibernate在jboss env中部署的网络应用程序。问题是我的日志中一直有这条消息：

```
12:28:44,895 FINE  [org.hibernate.jdbc.ConnectionManager] transaction completed on session with on_close connection release mode; be sure to close the session to release JDBC resources! 
```

我应该担心吗？所有数据都正确存储在数据库（oracle）中，一切似乎都运行良好。

这是我的配置（数据库相关）：

```
<bean name="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName">
        <value>java:jboss/datasources/DbDS</value>
    </property>
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="annotatedClasses">
        <list>
            ..
        </list>
    </property>

    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.connection.release_mode">auto</prop>
            <prop key="hibernate.transaction.auto_close_session">false</prop>
        </props>
    </property>
</bean>

<bean id="txManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="dataSource" ref="dataSource" />
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

--> --> -->

```
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView"></property>
    <property name="prefix" value="/WEB-INF/jsp/"></property>
    <property name="suffix" value=".jsp"></property>
</bean>

<bean
    class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

<bean
    class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" /> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:55:01.043

你可以试试这个——

```
<prop key="hibernate.connection.release_mode">after_statement</prop> 
```

另外，请查看以下链接以获取更多详细信息-

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-connection-release](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-connection-release)

# iphone - uialertview 中的图像...？

> ID：14195091
> 
> 赞同：1
> 
> 时间：2013-01-07T11:35:02.687
> 
> 标签：iphone, popup, uiimage, uialertview

我知道这是一个常见问题，即如何在 uiAlertView 中显示另一个控件而不是消息。我有一个应用程序在我的视图中有图像，当用户点击该图像时，我想放大它。所以，我可以选择在 uialertview 中使用相同的图像和放大的图像弹出它。当我也尝试它时，但没有正确的解决方案。

下面是我的代码

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NULL message:@"\n\n\n\n\n\n\n\n\n\n\n\n\n" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
UIImage *image = [UIImage imageNamed:@"GM00132002062125.png"];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
CGFloat imageHeight = 250;
CGFloat imageWidth = imageHeight * image.size.width / image.size.height;
imageView.frame = CGRectMake(floor((284 - imageWidth)/2), 47, imageWidth, imageHeight);
[alert addSubview:imageView];
[alert show]; 
```

在这里我必须给 \n\n 的消息，

![在此处输入图像描述](../Images/c9538716febf33f78423a1cb7c44c4df.png)

如果我在消息中提供更多\n，您可以看到它重叠

![在此处输入图像描述](../Images/f971298a08a7fa47fee7690982a34308.png)

对此没有特别的解决方案

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:38:38.280

使用下面的代码...

```
 UIImageView *imageView = [[UIImageView alloc] initWithFrame:setYourFrameHere];

    NSString *imgPath = [[NSString alloc] initWithString:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"GM00132002062125.png"]];
    UIImage *yourImage = [[UIImage alloc] initWithContentsOfFile:imgPath];
    [imageView setImage:yourImage];
    [yourImage release];
    [imgPath release];

    [alert addSubview:imageView];
    [imageView release];

    [alert show];
    [alert release]; 
```

**更新：**

为了在我们的视图中居中图像或一些自定义视图，我使用这种类型的波纹管代码..试试这个...

```
myCustomView.frame = CGRectMake(floorf(backgroundView.size.width - customView.size.width / 2.0f), 0.0, myCustomView.size.widht, myCustomView.size.height); 
```

# azure - 在 azure web 角色中运行许多项目

> ID：14195094
> 
> 赞同：4
> 
> 时间：2013-01-07T11:35:09.083
> 
> 标签：azure, installation, asp.net-web-api, azure-web-roles

在我目前的公司，我们正在对 azure 进行一些研究，以期将我们的一些旧系统迁移到云中。我们有以下系统都安装在客户的位置。

数据库 (SqlServer) 处理服务器 (Winform App) 各种客户端 (Winform Apps)

我们想要做的是将处理服务器转换为 ASP.NET Web API 并创建一个新的 Job Scheduler 作为某种长时间运行的进程，它将轮询数据库并向处理服务器发送请求。

这一切都很好，但我们不确定执行此操作的最佳方法。

我们很高兴为作业调度程序使用服务，为服务器使用 ASP.NET Web API，但我们不知道管理安装的最佳方式。

我们想做的是让每个大客户拥有一个带有调度程序和服务器的 WebRole，以及一个带有多个调度程序和服务器同时运行的 WebRole。

所以对于这个问题，

这真的可能吗？您可以在 Web 角色中运行许多项目吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:52:42.273

Web 角色本质上是一个带有一些代码脚手架的 Windows Server 虚拟机。您可以运行任何可以通过无交互 MSI/xcopy/等安装的东西。您有启动脚本以及从代码安装的能力（在`OnStart()`事件处理中）。

Web Role 和 Worker Role 的区别主要在于 IIS 的激活。否则，您可以将它们视为等效。

定义不同角色（无论是网络角色还是工作角色）的好处是：每个角色都有自己的大小和数量。例如，这使您可以为前端设置一堆小型 Web 角色实例，并可能设置一个或两个大型实例来执行一些计算密集型任务。但是，实际上，没有什么能阻止您将所有内容加载到一个角色中。只是现在一切都将同步进行。

SQL Server 不适合 web/worker 角色模型，因为安装不能完全自动化。这更适合虚拟机（允许您构建虚拟机并保存它，以便随时运行，完全构建）。更多关于虚拟机的信息在[这里](http://www.windowsazure.com/en-us/home/features/virtual-machines/)。如果你走这条路，你需要从你的网络角色提供对你的数据库的直接访问。您可以为此使用[虚拟网络](http://www.windowsazure.com/en-us/manage/services/networking/)。

关于 SQL 的最后一件事：[Windows Azure SQL 数据库](http://www.windowsazure.com/en-us/home/features/data-management/)是数据库即服务，您无需构建任何东西：只需启用它，设置最大大小，然后开始使用它。虽然它不具备 SQL Server 的所有功能，但它涵盖了绝大多数功能，并且每个数据库可扩展到 150GB（并提供分片以超出此范围）。您只需为 Windows Azure SQL 的存储容量付费；运行它的服务器没有成本，也不需要维护数据库服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:16:51.003

您可以将 WebRole 用于您的 API，并将 WorkerRole 用作您的调度程序。如果需要，您可以对两者使用不同的大小和实例计数，并将它们保留在同一个 VisualStudio 解决方案中。

我会避免使用 WebRole 作为调度程序。

# windows - perl中的fork实现

> ID：14195099
> 
> 赞同：8
> 
> 时间：2013-01-07T11:35:20.457
> 
> 标签：windows, perl, unix, process

我想在 perl 中执行一个子进程。我还希望我的代码独立于平台（对于 windows 和 unix 都是一样的，除了文件路径等一些小故障）。

问题是在windows中fork的perl实现，是一个伪进程，实际上是一个线程。请在[此处](http://perldoc.perl.org/perlfork.html)参考 windows 的 perl fork 仿真。

它还提到了伪进程的执行`kill`和命令问题。`exec`为不同的平台使用两个不同版本的 fork 是否安全，或者我应该使用特定于操作系统的 API？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T16:44:01.793

[`Forks::Super`](http://search.cpan.org/perldoc?Forks%3a%3aSuper#kill)已经担心并解决了很多这些可移植性问题，让您可以便携地运行代码，例如

```
use Forks::Super;

$pid = fork();
if ($pid != 0) {
   ...
   if (kill 'ZERO',$pid) { print "Job is running.\n"; }
   kill 'STOP', $pid; # or $pid->suspend
   kill 'CONT', $pid; # or $pid->resume
   kill 'TERM', $pid; # or $pid->terminate
   waitpid $pid, 0;   # or $pid->wait or $pid->waitpid(0)
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T13:22:08.933

假设您需要异步进程，请使用特定于平台的 API（如果您可以等待子进程，则可以使用`system`or `qx`）。

那是`fork`/`exec`在 UNIX 上，`Win32::Process::Create`在 Windows 上。Windows 上的 fork 仿真是一次勇敢的尝试，但平台在这方面是如此不同，我认为你在尝试产生一个可以满足所有条件的便携式解决方案时比较松散。

示例：python 试图将接口与其`subprocess`模块统一起来。它适用于简单的东西，但有 4 个 UNIX 特定参数和 2 个 Windows 特定参数（到 Popen）。

# android - 如何在 android.widget.TextView 中格式化段落长字符串以使行均匀？

> ID：14195100
> 
> 赞同：0
> 
> 时间：2013-01-07T11:35:21.153
> 
> 标签：android, android-layout

我正在写一个关于页面，我得到一个很长的段落。我把它放在 TextView 中，它看起来像下面

```
 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
     AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
     AAAAAAAAAAA.  AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
     AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA. 
```

有什么办法让它格式化，使线条有点均匀？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:46:51.480

我也有同样的问题......我使用 WebView 而不是 TextView 和..我有加载数据之类的。

```
webview.loadDataWithBaseURL(null,"<head><style>* {margin:0;padding:0;font-size:15; text-align:justify}</style></head>"+YOUR TEXT),"text/html","UTF-8","about:blank"); 
```

所以你可以在你的网页视图中证明文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:16:53.723

在您的 strings.xml 中，定义一个包含该段落的字符串，

例如

```
 <string name="longtext">
   <![CDATA[
    <html><body><p style="text-align:justify">
    your paragraph text
   </p></body></html>]]>
   </string> 
```

并通过使用在您的文本视图中设置此文本，

```
 tvTemp.setText(Html.fromHtml(getResources().getString(R.string.longtext))); 
```

# proxy - 在活动目录环境中使用 JMeter

> ID：14195102
> 
> 赞同：1
> 
> 时间：2013-01-07T11:35:24.840
> 
> 标签：proxy, active-directory, jmeter

我正在使用配置了活动目录的机器。在这台机器上，我试图通过在浏览器中设置代理来记录 JMeter 脚本。但是当我尝试打开 URL 时，它给了我身份验证管理器窗口来输入用户名和密码。即使我输入了正确的凭据，它也不会重定向到我要测试的网站。

我错过了什么吗？
当我在配置了 AD 的 Jmeter 中录制脚本时，有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-18T12:00:47.000

Active Directory 身份验证不是您可以有效记录的内容，因为需要构建 NTLM 标头和 Kerberos 令牌，并且该过程相当复杂。

JMeter 提供[HTTP 授权管理器](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Authorization_Manager)以处理 Basic、NTLM 和 Kerberos 身份验证类型。对于 Basic，您只需要提供用户名和密码，对于 NTLM - 域名，对于 Kerberos - 域名，真实姓名，并且在您的 JMeter 安装的 /bin 文件夹中具有适当的配置`krb5.conf`和文件。`jaas.conf`

有关更多详细信息和操作方法，请参阅[Windows Authentication with Apache JMeter](http://blazemeter.com/blog/windows-authentication-apache-jmeter)指南。

# c - C: snprintf 不接受 \n 用于 GUI 显示。需要建议

> ID：14195109
> 
> 赞同：1
> 
> 时间：2013-01-07T11:35:55.560
> 
> 标签：c, linux, printf

我需要将最后一个有效字符作为 NUL, `'\0'`。

有一个char数组`char cursStr[128];` 我的意图是：`cursStr [lastCharacter where ends] = '\0'`

这是如何填充此数组的代码片段：

```
snprintf(num_range, sizeof(num_range), "%d-%d", devIndex, devIndex+127);
snprintf(dev_range, sizeof(dev_range), "%s%d...%s%d", devices[devPointer].name, 1, devices[devPointer].name, 128);
sprintf(cursStr, "%-7s  %-25.50s  %c%-30.30s  %5Ld%11s\n",
            num_range, dev_range,' ', "Empty", (var64)0, "GPT"); 
```

我这样做的原因是，通过在 GUI 中打印，它最后会显示一些垃圾字符。但是在控制台打印就好了。我什至试图对`memset`这个数组做一个 0 ，但它没有帮助。

这就是它被打印到 GUI 和控制台的方式。

```
 if (cursLine) {
                    TVdisplayText(cursLine, cursStr, &usedLines); // GUI
                    cursLine += usedLines;
             } else {
                    printf("%s\n",cursStr); // console
             } 
```

使用的 GUI 库是 TVision (Turbo Vision)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:09:59.433

许多 GUI 系统无法正确显示换行符等特殊字符。不要在`sprintf`调用中添加换行符，或者手动删除它：

```
/* Remove the last character from the string */
cursStr[strlen(cursStr) - 1] = '\0'; 
```

# c++ - R-Trees：我应该重新发明轮子吗？

> ID：14195111
> 
> 赞同：3
> 
> 时间：2013-01-07T11:36:05.763
> 
> 标签：c++, stl, r-tree

我试图了解如何实现一个 R-Tree，它将用于“选择”包含在边界矩形中的一组几何对象。我查看了 Wikipedia 上的[文章](http://en.wikipedia.org/wiki/R-tree)，其中显示了[B-Tree](http://en.wikipedia.org/wiki/B-tree)的数据布局示例。

我*可以*编写一个 B-Tree 并用它来编写一个 R-Tree，但这是两个复杂的数据结构，我必须调试、测试等。我宁愿重用现有的树实现（std::set/ multiset) 并提供排序操作。

假设我的形状有以下界面：

```
class Shape
{
    public:
        Shape();
        virtual ~Shape();
        const AABB & bounding_box() const = 0;
}; 
```

并提供这个函子来订购形状：

```
struct OrderShapes
{
    bool operator()(Shape * const & left, Shape * const & right) const
    {
        return right->bounding_box().contains(left->bounding_box());
    }
}; 
```

a 会`std::set<Shape *, OrderShapes>`表现得像一个有效的 R-Tree 吗？如果没有，我怎样才能在不重新发明轮子的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-22T21:16:33.363

您还可以使用 Boost.Geometry 库：

[http://www.boost.org/doc/libs/release/libs/geometry/doc/html/index.html](http://www.boost.org/doc/libs/release/libs/geometry/doc/html/index.html)

如果你想使用你自己的 Point 和 AABB 类型，你应该让它们适应 Point 和 Box 的概念，以便告诉 Boost.Geometry 库如何处理这些类型。例如参见以下页面：

[http://www.boost.org/doc/libs/release/libs/geometry/doc/html/geometry/reference/adapted/register/boost_geometry_register_box.html](http://www.boost.org/doc/libs/release/libs/geometry/doc/html/geometry/reference/adapted/register/boost_geometry_register_box.html)

否则你可以使用预定义的。

假设您想在 rtree 中存储指针（我将使用 boost::shared_ptr），代码可能如下所示：

```
#include <boost/geometry.hpp>
#include <boost/geometry/index/rtree.hpp>
#include <boost/foreach.hpp>
#include <vector>

namespace bg = boost::geometry;
namespace bgi = boost::geometry::index;
namespace bgm = boost::geometry::model;

/* The registration of your Point and Box types goes here */

// OR use predefined ones
typedef bgm::point<float, 2, bg::cs::cartesian> Point;
typedef bgm::box<Point> AABB;

class Shape
{
public:
    Shape() {}
    virtual ~Shape() {}
    const AABB & bounding_box() const { return m_aabb; }
private:
    AABB m_aabb;
};

// Tell the rtree how to extract the AABB from the Shape
namespace boost { namespace geometry { namespace index {

template <>
struct indexable< boost::shared_ptr<Shape> >
{
    typedef boost::shared_ptr<Shape> V;
    typedef AABB const& result_type;
    result_type operator()(V const& v) const { return v->bounding_box(); }
};

}}} // namespace boost::geometry::index

int main()
{
    // The rtree
    bgi::rtree< boost::shared_ptr<Shape>, bgi::rstar<32> > rt;

    // Store some shapes
    rt.insert(boost::shared_ptr<Shape>(new Shape()));
    rt.insert(boost::shared_ptr<Shape>(new Shape()));
    rt.insert(boost::shared_ptr<Shape>(new Shape()));
    /*...*/

    // Search for some shapes
    std::vector<boost::shared_ptr<Shape> > query_result;
    rt.query(bgi::intersects(AABB(/*...*/)), std::back_inserter(query_result));

    BOOST_FOREACH(boost::shared_ptr<Shape> & s, query_result)
    {
        /* Do something with each shape */
        /* but don't modify the AABB if the Shape is stored in the rtree! */
    }

    // Remove them from the rtree
    BOOST_FOREACH(boost::shared_ptr<Shape> & s, query_result)
    {
        rt.remove(s);
    }

    return 0;
} 
```

请记住，因为 AABB 是 Shape 的属性并且我们正在存储指针，所以可以从 rtree 空间索引的外部修改 AABB。当值存储在索引或容器中时，您不应修改用作键的数据。

如果您不想将 AABB 存储在 Shape 内或/和提高 rtree 安全性，您可以存储例如 std::pair< AABB, boost::shared_ptr >。您将无法从索引外部修改用于索引的 AABB。在这种情况下，您不必专门化 bgi::indexable<> 因为 rtree 默认知道如何处理 std::pair< Box, ... > 类型。这可能看起来像这样：

```
// The value type
typedef std::pair<AABB, boost::shared_ptr<Shape> > MyVal;

// The rtree
bgi::rtree<MyVal, bgi::rstar<32> > rt;

// Store a shape
boost::shared_ptr<Shape> s(new Shape());
rt.insert(std::make_pair(s->calculate_aabb(), s));

/* The rest of the code */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T07:38:41.993

R-Trees*不是 B-Trees*。它们确实有一些共同点，但可能不会比任何其他面向块（=磁盘优化）的树数据结构更多。

恕我直言，首先实现 B-Tree 有两个好处：A) 经验，以及 B) 获得用于快速块 I/O 的稳定 API。

R-Trees 的主要困难**不是查询**。他们几乎可以直接查询。挑战在于如何有效地修改树，即删除元素和添加元素，同时保持树的平衡。在 1 维数据集中 - 即在 B+-树中 - 这相当容易，因为您确实有一个可以用于平衡的唯一邻居。这不再适用于高维数据。

但是您当然可以寻找现有的 R-tree 库，例如`libspatialindex`

PS对于查询R-tree，你需要`overlaps`，而不是`contains`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T11:46:27.463

> std::set 表现得像一个有效的 R-Tree？

绝对没有。STL 甚至不包含 B-tree 实现。std::set 只是一个红黑树，而不是 B 树。

> 如何在不重新发明轮子的情况下解决这个问题？

[你看到这个答案了吗？](https://stackoverflow.com/a/2709368/126995)

# objective-c - iOS6.0 项目在 iOS5 手势识别器上崩溃

> ID：14195116
> 
> 赞同：2
> 
> 时间：2013-01-07T11:36:35.693
> 
> 标签：objective-c, ios, ios5, ios6, uigesturerecognizer

我最初在 XCode 4.5 中使用故事板使用 iOS6 SDK 创建了一个应用程序。它的部署目标是iOS5.0

它基本上`tabBarController`有 3 个视图，一个进入输入屏幕（然后进入另一个视图链），一个进入首选项，一个进入图表。

图表页面由连接到自定义视图 ( ) 的`viewController`( ) 组成。它还有一个.`AdChartViewController``AdChartView``PinchGesture Recognizer`

如果我在 iPhone 6 模拟器中运行这个应用程序，它一切正常。如果它在 iPhone 5.0 模拟器上运行它，它工作正常，直到我单击视图的选项卡项，它在`objc_msgsend`. 查看堆栈跟踪给了我`UINib instatiateWithOwner:Options`，`CFRetain`在`NSArray`.

如果我删除捏识别器，它不会崩溃。当我将其添加回来时。`pinchGestureRecognizer`连接到`pinchGestureAction:`在 iOS5 上崩溃之前不会被调用的操作，并且在 iOS6 上工作正常。

我认为没有理由 a`pinchRecognizer`不应该在 iOS5 上运行。谁能让我知道我错过了什么，或者下一步该去哪里看？

# tsql - 仅当表不为空时，T-SQL 才连接表

> ID：14195117
> 
> 赞同：4
> 
> 时间：2013-01-07T11:36:38.847
> 
> 标签：tsql, join, sql-server-2012

我有以下表格，其中包含一列（RecordID）：

```
TableOne
101
102
103
104
105
106

TableTwo
101
102
103
104 
```

并且只有在 TableTwo 不为空时才想在它们之间进行连接。这可以通过示例 IF 语句来完成，但在我的实际情况下，这会导致大量代码重复。

我尝试了以下方法：

```
SELECT * FROM
TableOne T1
WHERE exists (select 1 from TableTwo where T1.RecordID=RecordID)
      and exists (select 1 from TableTwo) 
```

使用这个[答案](https://stackoverflow.com/questions/13027482/t-sql-using-cross-apply-with-delete-statement)，但相同的逻辑对我不起作用 - 它仅在第二个表不为空时有效，如果它为空，则不返回任何内容。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T11:39:04.817

我假设你想全选，如果`TableTwo`. 你需要一个`OR`和`NOT EXISTS`：

```
SELECT 
   T1.* 
FROM
   TableOne T1
WHERE 
   EXISTS(SELECT 1 from TableTwo WHERE T1.RecordID=RecordID)
   OR NOT EXISTS(SELECT 1 FROM TableTwo) 
```

[**SQL小提琴**](http://www.sqlfiddle.com/#!6/2ef80/1/0)

# codeigniter - Halogy CMS 中的自定义导航

> ID：14195122
> 
> 赞同：0
> 
> 时间：2013-01-07T11:36:59.960
> 
> 标签：codeigniter, content-management-system, halogy

有人能告诉我如何在 Halogy CMS 中使用自定义导航吗？

我直接在数据库中修改了权限，现在我可以访问 /admin/pages/navigation 但是管理面板或前面没有显示任何内容......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:45:05.427

据我了解你的问题。我建议您创建页面并将其状态设置为发布和刷新前端，您将在列表中看到带有 Home 、 Blog 、 Shop 、 Admin 的导航项。

# android - 为什么我的解压缩类不创建目录？

> ID：14195125
> 
> 赞同：0
> 
> 时间：2013-01-07T11:37:17.537
> 
> 标签：android, zip, directory, unzip, zipfile

我有一个解压缩文件的类，当 zip 里面没有任何文件夹时它可以正常工作。如果确实如此，那么它只会抛出错误。

她的我的课：

```
public class Decompress
{
private String _zipFile;
private String _location;
ZipEntry ze = null;

public Decompress(String zipFile, String location)
{
    _zipFile = zipFile;
    _location = location;

    _dirChecker("");
}

public void unzip()
{
    try
    {
        FileInputStream fin = new FileInputStream(_zipFile);
        ZipInputStream zin = new ZipInputStream(fin);
        while ((ze = zin.getNextEntry()) != null)
        {
            Log.v("Decompress", "Unzipping " + ze.getName()); 

            if (ze.isDirectory())
            {
                _dirChecker(ze.getName());
            }
            else
            {
                FileOutputStream fout = new FileOutputStream(_location + ze.getName());
                for (int c = zin.read(); c != -1; c = zin.read())
                {
                    fout.write(c);
                }

                zin.closeEntry();
                fout.close();
            } 

        }
        zin.close();
    }
    catch (Exception e)
    {
        Log.e("Decompress", "unzip", e);
    }

}

private void _dirChecker(String dir)
{
    File f = new File(_location + dir);

    Log.d("Decompress", f.getAbsolutePath().toString());

    if (!f.isDirectory())
    }
        f.mkdirs();
    }
} 
```

这是我的日志：

```
01-07 07:33:49.941 D/Decompress(19375): /sdcard/test
01-07 07:33:49.941 V/Decompress(19375): Unzipping META-INF/
01-07 07:33:49.941 D/Decompress(19375): /sdcard/test/META-INF
01-07 07:33:49.941 V/Decompress(19375): Unzipping META-INF/CERT.RSA
01-07 07:33:49.949 E/Decompress(19375): unzip
01-07 07:33:49.949 E/Decompress(19375): java.io.FileNotFoundException: /sdcard/test/META-INF/CERT.RSA: open failed: ENOENT (No such file or directory)
01-07 07:33:49.949 E/Decompress(19375):     at libcore.io.IoBridge.open(IoBridge.java:416)
01-07 07:33:49.949 E/Decompress(19375):     at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
01-07 07:33:49.949 E/Decompress(19375):     at java.io.FileOutputStream.<init>(FileOutputStream.java:128)
01-07 07:33:49.949 E/Decompress(19375):     at java.io.FileOutputStream.<init>(FileOutputStream.java:117)
01-07 07:33:49.949 E/Decompress(19375):     at com.mycompany.myapp3.Decompress.unzip(Decompress.java)
01-07 07:33:49.949 E/Decompress(19375):     at com.mycompany.myapp3.MainActivity.onCreate(MainActivity.java)
01-07 07:33:49.949 E/Decompress(19375):     at android.app.Activity.performCreate(Activity.java:5108)
01-07 07:33:49.949 E/Decompress(19375):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-07 07:33:49.949 E/Decompress(19375):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2263)
01-07 07:33:49.949 E/Decompress(19375):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2359)
01-07 07:33:49.949 E/Decompress(19375):     at android.app.ActivityThread.access$600(ActivityThread.java:153)
01-07 07:33:49.949 E/Decompress(19375):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1247)
01-07 07:33:49.949 E/Decompress(19375):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 07:33:49.949 E/Decompress(19375):     at android.os.Looper.loop(Looper.java:137)
01-07 07:33:49.949 E/Decompress(19375):     at android.app.ActivityThread.main(ActivityThread.java:5202)
01-07 07:33:49.949 E/Decompress(19375):     at java.lang.reflect.Method.invokeNative(Native Method)
01-07 07:33:49.949 E/Decompress(19375):     at java.lang.reflect.Method.invoke(Method.java:511)
01-07 07:33:49.949 E/Decompress(19375):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
01-07 07:33:49.949 E/Decompress(19375):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
01-07 07:33:49.949 E/Decompress(19375):     at dalvik.system.NativeStart.main(Native Method)
01-07 07:33:49.949 E/Decompress(19375): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
01-07 07:33:49.949 E/Decompress(19375):     at libcore.io.Posix.open(Native Method)
01-07 07:33:49.949 E/Decompress(19375):     at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
01-07 07:33:49.949 E/Decompress(19375):     at libcore.io.IoBridge.open(IoBridge.java:400)
01-07 07:33:49.949 E/Decompress(19375):     ... 19 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:57:36.687

好吧，我解决了这个重写代码的问题。我真的不知道发生了什么，因为它的代码相同。但现在它工作得很好。

# facebook - Facebook Drupal (fboauth) 弹出窗口以全屏方式打开

> ID：14195134
> 
> 赞同：4
> 
> 时间：2013-01-07T11:37:55.833
> 
> 标签：facebook, drupal, popup

我正在为 Facebook 连接使用 Drupal fboauth 模块。当我单击登录按钮时，它应该打开一个对话框弹出框来验证应用程序，但它却显示在完整的浏览器视图中。![请看附件截图](../Images/358a0852cfb11249ccd296a44663a068.png)

根据文档[http://developers.facebook.com/docs/reference/dialogs/oauth/](http://developers.facebook.com/docs/reference/dialogs/oauth/)我也给出了 display=popup 的参数，但它仍然显示在完整的浏览器视图中。所有浏览器都会发生这种情况。

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-25T09:19:18.903

我的问题是我启用了“[外部链接”模块。](https://www.drupal.org/project/extlink)它将 facebook url 视为外部 URL，并立即添加了 target="_blank"，导致所有点击都在新窗口中打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:47:36.343

> 根据文档[http://developers.facebook.com/docs/reference/dialogs/oauth/](http://developers.facebook.com/docs/reference/dialogs/oauth/)我也给出了 display=popup 的参数，但它仍然显示在完整的浏览器视图中。

从那里引用：

> *在“弹出”模式下，OAuth 对话框以适合嵌入弹出窗口的形式显示。*

此参数的唯一目的是修改登录对话框的外观，使其适合较小的弹出窗口，而不是显示在“完整”页面中。

此参数不会*触发*弹出窗口的打开 - 如果您希望在弹出窗口中打开 URL，您必须自己执行此操作。（并且在您自己成功验证后处理它正在关闭。）

您的另一个选项是使用`FB.login`JavaScript SDK——它将为您打开和关闭弹出窗口。

# c# - C#中的引用数组？

> ID：14195138
> 
> 赞同：6
> 
> 时间：2013-01-07T11:38:03.527
> 
> 标签：c#, arrays

我有字节数组：

```
byte[] alldata = new byte[1024]; 
```

然后我需要将此数据转换为`UInt32`：

```
UInt32[] block32 = new UInt32[(int)Math.Ceiling((double)alldata.Length / 4)];
Buffer.BlockCopy(alldata, 0, block32, 0, alldata.Length); 
```

在此之后我需要转换`block32`回`byte`数组。

问题是我是否可以让`block32`数组只是我的数组的 32 位引用数组`byte`以**避免**相互转换`UInt32`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T11:42:01.947

您的问题并不完全清楚-但引用仅针对单个对象，而数组对象“知道”其真实类型……您不能只将 a`uint[]`视为 a `byte[]`，反之亦然。

现在你*可以*做的就是把它隐藏在另一个对象后面。`ByteArrayView`您可以拥有一个在 an和 an之间共享的单字节数组，`UInt32ArrayView`其中每个类都知道如何寻址单个底层字节数组。不过，您必须自己编写这些类——我不相信它们存在于现有框架中的任何地方。

您可能会创建一个抽象类或接口，这些不同的类也将实现，例如

```
class ByteArrayView : IArrayView<byte>
class UInt32ArrayView : IArrayView<uint> 
```

（或者只是`IList<T>`适当地实施，当然......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:23:22.907

我已经修改了[从](https://stackoverflow.com/questions/621493/c-sharp-unsafe-value-type-array-to-byte-array-conversions/3577227#3577227)Omer [Mor](https://stackoverflow.com/users/61061/omer-mor)找到的答案。这基本上使用不安全代码来临时更改数组认为的类型。

从好的方面来说，您不需要重写任何其他代码来使用不安全的指针或包装类。不利的一面是，这不仅是不安全的代码，而且是与类型系统混淆的讨厌的不安全代码。

```
static class ArrayCaster
{
    [StructLayout(LayoutKind.Explicit)]
    private struct Union
    {
        [FieldOffset(0)]
        public Byte[] Bytes;
        [FieldOffset(0)]
        public UInt32[] UInt32s;
    }

    static unsafe int UInt32Id
    {
        get
        {
            fixed (UInt32* pUints = new UInt32[1])
            {
                var pBytes = (Byte*)pUints;
                return *(int*)(pBytes - 8);
            }
        }
    }

    static unsafe void SetSizeAndId(
        byte[] bytes,
        int newSize, int newId,
        out int oldSize, out int oldId)
    {
        fixed (Byte* pBytes = bytes)
        {
            int* size = (int*)(pBytes - 4);
            oldSize = *size;
            *size = newSize;
            int* id = (int*)(pBytes - 8);
            oldId = *id;
            *id = newId;
        }
    }

    public static void WithBytesAsUInt32s(
        Byte[] bytes, Action<UInt32[]> withUints)
    {
        if (bytes.Length % sizeof(UInt32) != 0) throw new ArgumentException();

        Union u = new Union { Bytes = bytes };
        int origSize, origId;
        SetSizeAndId(bytes, bytes.Length / sizeof(UInt32), UInt32Id,
                     out origSize, out origId);
        try
        {
            withUints(u.UInt32s);
        }
        finally
        {
            SetSizeAndId(bytes, origSize, origId, out origSize, out origId);
        }
    }
} 
```

在您的代码中：

```
byte allData = new byte[1024];
ArrayCaster.WithBytesAsUInt32s(allData, uintArray => Encrypt(unitArray)); 
```

* * *

编辑：如果您的加密/解密方法采用显式长度以及数组，您可以*完全*`UInt32`删除`unsafe`代码；只是使用工作正常，除了（a）调试器检查器混淆，（b）长度不更新。如果你能告诉你的方法只使用数组的四分之一，那么你就是黄金。*`Union`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T15:11:48.363

正如您已经提到的，您将使用`uint[]`for 加密。

由于某些原因，您使用`BlockCopy`. 但是您想像访问`byte[]`一样访问`uint[]`，而不转换或转换整个数组。

那么，有什么不足呢？C#中有什么东西可以做到这一点吗？

再想一小时后，我猜你想要它的目的，应该是`indexer`.

这是代码。这很简单。

```
public partial class UIntIndexer {
    static int ComputeElementCount(int size, int bytesCount) {
        var r=~0;
        return Math.DivRem(bytesCount, size, out r)+(r>0?1:0);
    }

    static int ComputeIndex(int index) {
        return sizeof(uint)*index;
    }

    public UIntIndexer(byte[] array) {
        m_Length=ComputeElementCount(sizeof(uint), (m_Array=array).Length);
    }

    public uint this[int index] {
        set {
            var startIndex=ComputeIndex(index);
            var bytes=BitConverter.GetBytes(value);
            var count=m_Length>1+index?sizeof(uint):m_Array.Length-startIndex;
            Buffer.BlockCopy(bytes, 0, m_Array, startIndex, count);
        }

        get {
            var startIndex=ComputeIndex(index);

            if(m_Length>1+index)
                return BitConverter.ToUInt32(m_Array, startIndex);
            else {
                var bytes=new byte[sizeof(uint)];
                Buffer.BlockCopy(m_Array, startIndex, bytes, 0, m_Array.Length-startIndex);
                return BitConverter.ToUInt32(bytes, 0);
            }
        }
    }

    public int Length {
        get {
            return m_Length;
        }
    }

    byte[] m_Array;
    int m_Length;
} 
```

如果应该考虑线程安全，您可能需要保持源数组同步。以下是测试它的代码：

```
var alldata=new byte[] { 1, 2, 3, 4, 5, 6, 7, 8, 9 };
var block32=new byte[alldata.Length];
var uintIndexer=new UIntIndexer(block32);
Buffer.BlockCopy(alldata, 0, block32, 0, alldata.Length);

Debug.Print("uintIndexer.Length={0}", uintIndexer.Length);

for(var i=uintIndexer.Length; i-->0; )
    Debug.Print("uintIndexer[{0}]={1}", i, uintIndexer[i]); 
```*

# jquery - jquery：脚本不工作

> ID：14195144
> 
> 赞同：1
> 
> 时间：2013-01-07T11:38:22.740
> 
> 标签：jquery

我是 jquery 新手，我开始学习 jquery 基础知识。我为注册表单制作 jquery 脚本。它在提交单个或两个字段为空的表单时工作正常，查询显示错误消息，但如果我再次填写空字段，那么它也会显示相同的错误消息，并且在重新加载消息时停止显示。

```
<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
  <style>
  c { color:red; margin:4px; }
  b { color:blue; }
  </style>
  <script src="jquery-latest.js"></script>
  <script src="jquery.js"></script>
</head>
<body>

<h1>Registration Form:</h1>

<form id="form1">

<div>First Name<input type="text" name="fname" id="fname"><span></span></div>
<div>Last Name<input type="text" name="lname" id="lname"><span></span></div>
<div><input type="submit" value="submit" ></div>

</form> 

<script>

$(document).ready(function(){

    $("#form1").submit(function(){
        var $spans = $("span");

        if ($('#fname').val()=="") {    
        $spans.eq(0).html("<c>Please enter your Firstname</c>");
        }       
        if ($('#lname').val()==""){
        $spans.eq(1).html("<c>Please enter your Lastname</c>");

        }return false;

    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:42:23.273

那是因为当输入不为空时，您不会删除文本内容。请注意，您不应将 jQuery 加载两次，并且`c`不是有效标签。

```
var $spans = $("span"); 
$("#form1").submit(function(){ 
    $spans.eq(0).html( $('#fname').val() == "" ? "Please enter your Firstname" : "");
    $spans.eq(1).html( $('#lname').val() == "" ? "Please enter your Lastname" : "");
    return false;
}); 
```

# java - 如何在android项目上运行java类？

> ID：14195148
> 
> 赞同：0
> 
> 时间：2013-01-07T11:38:38.143
> 
> 标签：java, android

我已经编写了一个带有 android 客户端和服务器 java 的应用程序。所有的类都在一个包中，但是当我运行我的项目时，我遇到了这个错误：

```
guarantee(_name_index != 0 && _signature_index != 0) failed: bad constant pool index for fieldDescriptor 
```

我读到这是因为我的服务器是用 java 而不是 android 编写的。那么我能做些什么来测试我的代码呢？我还为服务器创建了一个 Java 项目，但我不知道如何导入和链接它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:44:01.573

首先，Java 是一种语言，Android 是您运行它的目标。

其次，将程序运行为`Android Application`.

`Run as > Android Application`

只要你有一个可以扩展的类`Activity`，你就可以开始了。

# java - iBatis 创建多个注解的数组（注解重用）

> ID：14195155
> 
> 赞同：2
> 
> 时间：2013-01-07T11:38:59.850
> 
> 标签：java, ibatis

我的问候！

我很新`iBatis`，我遇到过这样的优化问题：我有两个完全相同`@Results`的参数，只有一个参数不同。有什么办法可以创建某种注释数组来重用它进行映射？源代码如下所示：

```
public static interface StoreMapper {
   @Select("SELECT * FROM STORE WHERE STORE_NUMBER = #{storeNumber}")
   @Results(value = {
      @Result(property="storeNumber", column="STORE_NUMBER"),
      @Result(property="districtId", column="DISTRICT_ID"),
      @Result(property="managerName", column="MANAGER_NAME")})
   Store findByStoreNumber (Integer storeNumber) throws FacadeException;

   @Select("SELECT * FROM STORE WHERE STATE = #{state}")
   @Results(value = {
      @Result(property="storeNumber", column="STORE_NUMBER"),
      @Result(property="districtId", column="DISTRICT_ID"),
      @Result(property="managerName", column="MANAGER_NAME")})
   List<Store> findByState (String state) throws FacadeException;
} 
```

我读到，我可以使用 XML，但是有没有办法使用注释来做到这一点？它们非常方便。

# jquery - 哪个 jQuery 移动版本用于滑动面板？

> ID：14195160
> 
> 赞同：0
> 
> 时间：2013-01-07T11:39:10.260
> 
> 标签：jquery, jquery-mobile

我应该使用包含滑动面板的 jQuery mobile 的哪个分支？

我不认为它包含在 1.2.0 最终版本中？

它包含在以下分支中，但这些是来自 1.2.0 的分支吗？

*   分支：滑动面板
*   分支：滑动面板重构

谢谢

作为一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:36:49.013

官方 1.2 版本中不存在滑动面板。与所有新功能一样，它可能会包含在下一个 jQM 版本中，但在发布 1.3 alpha 版本之前我们不会知道这一点。

在那之前看看这个为 jQuery 移动创建的第 3 方幻灯片菜单插件。与官方版本不同的是，这个版本稳定且有效：

[https://github.com/tegansnyder/JQuery-Mobile-Slide-Menu](https://github.com/tegansnyder/JQuery-Mobile-Slide-Menu)

这是一个工作演示：[http ://www.tegdesign.com/tegansnyder-JQuery-Mobile-Slide-Menu/](http://www.tegdesign.com/tegansnyder-JQuery-Mobile-Slide-Menu/)

这个实现就像 jQM 滑动面板的当前 beta 版本一样工作。

# clearcase - 在 ClearCase 中查找具有特定版本的所有文件

> ID：14195165
> 
> 赞同：1
> 
> 时间：2013-01-07T11:39:17.160
> 
> 标签：clearcase

我想在 ClearCase 中查找具有特定版本的所有文件。我这样做了：

```
cleartool find . -version 'version(<version-specifier>)' -print 
```

这会打印出我感兴趣的文件的完全限定版本，这很好。这样做的问题是它只能找到从当前视图可见的文件。例如，有一个文件`some_directory/some_file`，并且版本`<version-specifier>`（例如`/main/some_branch/LATEST`or `/SOME_LABEL`）同时存在`some_directory`和`some_file`。但是，`some_file`在当前视图中不存在（因为视图`some_directory`选择的版本不包含该文件）。在这种情况下，上面的查询没有找到文件`some_file`。

有没有办法找到所有版本的文件`<version-specifier>`？更准确地说，`<version-specifier>`在具有相同版本说明符的任何目录中找到所有具有该版本的文件对我有好处吗？是否可以不创建新视图或修改配置规范？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:00:50.090

您可以从添加`-nvis`选项开始（来自[`cleartool find`man page](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_find.htm)）：

```
-nvi/sible 
```

> 仅包括那些在视图中不可见（没有标准路径名）的元素及其分支和版本。

这可以找到在您用于`cleartool find`.

OP正确评论：

> 这只适用于我使用`cleartool find -all`（然后我什至不必使用`-nvisible`），但问题是它会找到vob中的所有文件，而不仅仅是基于参数中指定的目录的文件。

使用正确的配置规范创建专用视图是查看和找到所需内容的最可靠方法：

*   首先是您的具体选择规则，
*   然后是更一般的（确保选择目录），
*   最后`element * /main/LATEST`，这是一个[选择规则塞子](https://stackoverflow.com/a/12062472/6309)。

# ruby - 它是否是 IP 地址的有效正则表达式

> ID：14195168
> 
> 赞同：1
> 
> 时间：2013-01-07T11:39:23.567
> 
> 标签：ruby, regex

这是 IP 地址的有效正则表达式吗？

```
^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-5]{2}|0{2}|0{3})\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-5]{2}|0{2}|0{3})$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:57:13.650

不正确：在第一部分 ((....){3}) ：最后一个 2[0-5]{2} 将允许 201、254 等，但不允许 239 等（即，最后一位 >5 )

现在，在搜索引擎中搜索 5 秒后，我得到了这个网址：[http ://answers.oreilly.com/topic/318-how-to-match-ipv4-addresses-with-regular-expressions/](http://answers.oreilly.com/topic/318-how-to-match-ipv4-addresses-with-regular-expressions/)

正如@Sigardave 指出的那样，一个更“本地”的解决方案^^（即在互联网的同一区域）：[匹配DNS 主机名或IP 地址的正则表达式？](https://stackoverflow.com/questions/106179/regular-expression-to-match-hostname-or-ip-address)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T14:09:25.040

这就是标准库中的[IPAddr](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/ipaddr/rdoc/IPAddr.html)是如何做到的：

```
# Returns +true+ if +addr+ is a valid IPv4 address.
def valid_v4?(addr)
  if /\A(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\Z/ =~ addr
    return $~.captures.all? {|i| i.to_i < 256}
  end
  return false
end 
```

# iphone - 在适用于 iOS 的视频通话应用中需要帮助

> ID：14195169
> 
> 赞同：0
> 
> 时间：2013-01-07T11:39:27.260
> 
> 标签：iphone, objective-c, avcapturesession, cmsamplebufferref

我正在创建一个简单的视频通话应用程序，其中音频/视频将从一个设备流式传输到另一个设备，但问题是我不知道视频通话是如何工作的，尤其是如何在`iOS`. 到目前为止，我已经通过使用`AVCaptureSession`和使用此委托方法中的缓冲区来捕获视频

```
 - (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection
{} 
```

为了测试，我使用 . 将音频和视频缓冲区写入文档目录`AVAssetWriter`。之后，我轻松地将视频存储到 iPhone 画廊或使用`MPMoviecontroller`播放器播放。

现在，我有以下问题

1.  我不知道如何将这些缓冲区连续发送到服务器，然后将服务器发送到其他设备。
2.  如果我成功地将数据发送到其他设备，那么我将如何对其进行解码以在其他设备上显示视频。

    我已经搜索过了。喜欢通过 udp 数据包发送数据，但我对此一无所知。

    如果我得到正确的知识该做什么，那么我相信我将能够做到。请向我提供您的意见，我应该怎么做才能实现这一目标。我会感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:05:37.060

OpenTok 工作完美。你可以在[http://www.tokbox.com/opentok/api/documentation/gettingstarted获得教程](http://www.tokbox.com/opentok/api/documentation/gettingstarted)

# c++ - 由 bbutil.c 引起的 OpenGL 应用程序错误

> ID：14195170
> 
> 赞同：1
> 
> 时间：2013-01-07T11:39:27.207
> 
> 标签：c++, c, opengl-es, blackberry-10

嗨，我正在尝试按照本[教程](http://developer.blackberry.com/native/documentation/bb10/good_citizen_overview_new_2006631_11.html)绘制一个立方体。我正在使用来自[此](https://github.com/blackberry/NDK-Samples/tree/master/GoodCitizen)来源的 bbutil.h 和 bbutil.c 文件。但我总是得到

`error bbutil must be compiled with either USING_GL11 or USING_GL20 flags`

我的 GoodCitizen.pro 文件是这样的，

```
APP_NAME = GoodCitizen

 CONFIG += qt warn_on cascades10
 LIBS   += -lpps -lscreen -lEGL -lGLESv1_CM -lfreetype -lpng  -lbb
 #LIBS   += -lpps -lscreen -lEGL -lGLESv1_CM -lfreetype -lpng  -lbb -lQtCascades -    lheimdall ${QNX_TARGET}/../target-override/armle-v7/usr/lib/libQtCascades_main.a
 CCFLAGS+=-DUSING_GL11
 include(config.pri) 
```

我不知道要修复什么来消除该错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:28:25.210

我发现了问题。

我没用 `#define USING_GL11`

在 bbutil.cpp 文件的包含项下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:34:37.797

您可以添加编译器选项 -DUSING_GL11 来解决此问题。

一个简单的方法是打开项目的属性，然后选择 C/C++ Build->Settings->QCC Compiler->Preprocessor，然后将 USING_GL11 添加到 Defines 面板。

![在此处输入图像描述](../Images/0e3afbdfadf58fabc1485a7b61ed1029.png)

# c - 那么函数指针的*可以省略吗？

> ID：14195171
> 
> 赞同：4
> 
> 时间：2013-01-07T11:39:35.607
> 
> 标签：c, function-pointers, shorthand

`gcc`似乎在告诉我`int foo(int (*f)(void))`与`int foo(int (f)(void))` `f`指向不带参数的函数的指针返回相同`int`。为什么我们可以省略`*`这里。

但是，我也尝试过`int (*p)(void)`and `int (p)(void)`。第一个`p`是函数指针，第二个是函数。

那么，发生了什么事？什么情况下可以省略星号？我在 K&R 中查找它并没有发现任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T11:50:28.033

引用我的 Harbison and Steele 副本（第 5 版，第 9.3 节）：

> 在参数列表中，类型“函数返回 T”被隐式重写为具有类型“指向函数返回 T”的类型。

这意味着在形式参数列表的上下文中，它们是等价的。在任何其他情况下，它们都是不同的。

就风格而言，我永远不会省略 *.

# eclipse - 在使用 Eclipse 时更改 git 分支（正确的顺序是什么）？

> ID：14195178
> 
> 赞同：0
> 
> 时间：2013-01-07T11:40:00.603
> 
> 标签：eclipse

我的问题是有时我在 Eclipse 中工作时会更改 git 分支。但我不知道我应该做什么（以什么顺序，不要在两个项目中搞砸）。所以我的程序是：

1.  日食是开放的（解决一些问题）
2.  git 更改分支
3.  eclipse > 选择项目并点击刷新
4.  在eclipse上工作，继续工作

没关系还是我应该先使用 Clear&Build 然后刷新项目？您认为，在更改分支时执行此操作重要的女巫命令吗？请帮忙，因为我正在和朋友一起做大项目，我不想破坏任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:50:15.197

如果您在一个特定的分支上工作并且您想保留您一直在做的任何事情，您应该先将这些更改（`git add`或`git commit`）添加或提交到该分支，然后再更改到另一个分支。

如果您在两个分支中都有相同的项目，那么在更改分支后刷新项目应该没问题，但理想情况下是清理/构建。

如果您想真正安全，您可以在更改分支之前先关闭项目，然后在更改分支后刷新并重新打开它们。

# hibernate - Hibernate Criteria Restrictions：将两个属性作为简单表达式进行比较

> ID：14195179
> 
> 赞同：3
> 
> 时间：2013-01-07T11:40:01.290
> 
> 标签：hibernate, criteria, restrictions

我有一个休眠标准，以下适用：

```
criteria.add(Restrictions.eqProperty("x", "tbl.y")); 
```

但我现在想修改标准以检查一系列可能的值（'x' 和 'y' 都是整数），例如，这不起作用：

```
criteria.add(Restrictions.geProperty("x", "tbl.y - 1")); 
```

我尝试过使用 sqlRestriction，例如：

```
criteria.add(Restrictions.sqlRestriction("{alias}.x >= (tbl1_.y - 1)")); 
```

但是如何知道实际的别名 ('tbl1_') ？

我将不得不使用子选择来完成这项工作吗？（现在使用 HQL 不是一个实用的选择。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T14:11:47.127

这就是我解决它的方法：

```
criteria.add(new PropertyExpression(null, null, null) {
    @Override
    public String toSqlString(Criteria criteria, CriteriaQuery criteriaQuery) throws HibernateException {
        String x = criteriaQuery.getColumnsUsingProjection(criteria, "x")[0];
        String y = criteriaQuery.getColumnsUsingProjection(criteria, "tbl.y")[0];
        StringBuilder result = new StringBuilder();
        result.append(x);
        result.append(">= (");
        result.append(y);
        result.append(" - 1)");
        return result.toString();
    }
}); 
```

遗憾的是，没有办法使用 Hibernate Criteria API 来执行此操作（别名为连接表）：

```
criteria.add(Restrictions.sqlRestriction("{alias}.x >= ({tbl}.y - 1)")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-12T10:58:28.400

您可以为此实现自己的 Criterion 实现：

```
public static class YourCriterion implements Criterion{

    @Override
    public TypedValue[] getTypedValues(Criteria arg0, CriteriaQuery arg1) throws HibernateException {
        return new TypedValue[0];
    }

    @Override
    public String toSqlString(Criteria criteria, CriteriaQuery criteriaQuery) throws HibernateException {
        String x = criteriaQuery.getColumnsUsingProjection(criteria, "x")[0];
        String y = criteriaQuery.getColumnsUsingProjection(criteria, "tbl.y")[0];
         StringBuilder query = new StringBuilder();
         query.append(x);
         query.append(">= (");
         query.append(y);
         query.append(" - 1)");
         return query.toString();
    }

}
 criteria.add(new YourCriterion()); 
```

供参考：[PropertyExpression](http://grepcode.com/file/repo1.maven.org/maven2/org.hibernate/hibernate-core/4.3.4.Final/org/hibernate/criterion/PropertyExpression.java#PropertyExpression)

# java - 如何在检票口中嵌套动态表？

> ID：14195180
> 
> 赞同：2
> 
> 时间：2013-01-07T11:40:01.183
> 
> 标签：java, listview, html-table, wicket

我正在使用 wicket 来显示表格列表。表的数量和每个表中的行数都是动态的。

我试图保持简单，并为每个使用 RepeatingView，并嵌套它们，但 wicket 说：

> java.lang.IllegalArgumentException：ID 为“表”的孩子已经存在

这是我的Java：

```
 RepeatingView view = new RepeatingView("listoftables");

    for (CCSubscription sub: getCustomer().getSubscriptions())  {

        //resource balance table
        ResourceBalance[] resBals = sub.getResourceBalances();
        if(resBals!=null && resBals.length>0)   {
        ListView<ResourceBalance> resBalTable = new ListView<ResourceBalance>("table", Arrays.asList(resBals)) {

            @Override
            protected void populateItem(ListItem<ResourceBalance> item) {
                ResourceBalance bal = item.getModelObject();
                item.add(new Label("resource", bal.getResource().getName()));
                item.add(new Label("balance", bal.getBalance()));
            }
        };
        view.add(resBalTable);
        }   //end if sub has non-null resource balance

    }   //end loop through subscriptions

    add(view); 
```

我的html是：

```
<ul>
<li wicket:id="listoftables">
<fieldset>
<legend><b>Resource Balances</b>
</legend>
    <table class="dataview" style="width:50%">
        <thead>
            <tr class="headers">
                <th>Resource</th>
                <th>Balance</th>

            </tr>
        </thead>
        <tr wicket:id="table">
            <td>
                <span wicket:id="resource"></span>
            </td>
            <td>
                <span wicket:id="balance"></span>
            </td>
        </tr>
    </table>
</fieldset>
<br/> 
```

我承认我可能会以错误的方式解决这个问题，但我看不出正确的方式应该是什么。

希望有人能帮忙！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:45:08.743

好的，我得到了它的工作：

```
final ListView<CCSubscription> tables = new ListView<CCSubscription>(
            "tables", getCustomer().getSubscriptions()) {
        @Override
        protected void populateItem(ListItem<CCSubscription> item) {
            ListView<ResourceBalance> resBalTable = new ListView<ResourceBalance>("listview", Arrays.asList(item.getModel().getObject().getResourceBalances())) {

                @Override
                protected void populateItem(ListItem<ResourceBalance> item) {
                    ResourceBalance bal = item.getModelObject();
                    item.add(new Label("resource", bal.getResource().getName()));
                    item.add(new Label("balance", bal.getBalance()+""));
                }
            };
            item.add(resBalTable);
        }
    };

    add(tables); 
```

html 如下所示：

```
<span wicket:id="tables">
<fieldset>
<legend><b>Resource Balances</b>
</legend>
    <table class="dataview" style="width:50%">
        <thead>
            <tr class="headers">
                <th>Resource</th>
                <th>Balance</th>

            </tr>
        </thead>
        <tr wicket:id="listview">
            <td>
                <span wicket:id="resource"></span>
            </td>
            <td>
                <span wicket:id="balance"></span>
            </td>

        </tr>
    </table>
</fieldset>
<br/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T12:28:06.480

您不能将具有相同 ID ( `ListView("table")`) 的两个组件添加到单个容器 ( `RepeatingView`) 中。

该`RepeatingView`对象有一个为其子组件生成 ID 的方法。从[javadoc](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/markup/repeater/RepeatingView.html)：

```
RepeatingView view = new RepeatingView("repeater");
view.add(new Label(view.newChildId(), "hello"));
view.add(new Label(view.newChildId(), "goodbye"));
view.add(new Label(view.newChildId(), "good morning"));
add(view); 
```

您还可以创建自己的逻辑来生成 ID：

```
RepeatingView view = new RepeatingView("repeater");
for (int i=0; i < 10; i++)
    view.add(new MyListView("list" + i));
add(view); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:54:39.730

您在循环中多次添加相同的对象，这不是您想要实现的。一个命名组件只能添加到给定页面一次。

您需要将您的类定义为 ListView 的扩展，并将要呈现的对象列表传递给它。看看这里[https://cwiki.apache.org/WICKET/listview-and-other-repeaters.html](https://cwiki.apache.org/WICKET/listview-and-other-repeaters.html)

# jquery - 如何访问被删除的元素

> ID：14195183
> 
> 赞同：0
> 
> 时间：2013-01-07T11:40:05.160
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

我在这个[小提琴](http://jsfiddle.net/SGevw/)中使用可拖动的 connectToSortable 和克隆选项：

```
var draggable_opts = {
        connectToSortable: ".sph-callout-portlet",
        helper: "clone",
        opacity: 0.75,
        revert: 'invalid',
        stop: function(event, ui) {
            // this seems to only access the original item not the clone
        }
    };

$(function() {
    $( ".sph-callout-portlet" ).sortable({
        opacity: 0.75,
        placeholder: "ui-state-highlight",
    }).disableSelection();

    $( "#sph-callout-portlet-avail li" ).draggable(draggable_opts);

}); 
```

当我删除元素时，我想获取它被放入的区域的 ID，或者至少是元素本身。现在，根据文档`draggable + connectToSortable + clone`使用`droppable`，但我看不到获取删除元素的方法。

（上面的代码最初发布在一个有不同问题的问题中[）](https://stackoverflow.com/questions/10626108/jquery-ui-draggable-sortable-dynamically-added-items-not-draggable)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:06:59.747

要获取它被丢弃的元素，您可以执行以下操作：

```
$(".sph-callout-portlet" ).sortable({
   opacity: 0.75,
   placeholder: "ui-state-highlight",
   receive: function(event, ui) {
     console.log($(this).data().sortable.element);
   }
}).disableSelection(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:54:38.203

尝试这个

```
 $( "#sph-callout-portlet-avail li" ).droppable({
     drop: function (event, ui) {
       console.log(ui.draggable.text());
     }
 }); 
```

在这里[摆弄](http://jsfiddle.net/SGevw/36/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:43:48.730

您需要在可放置区域上实例化[可](http://jqueryui.com/droppable/)放置对象：

```
$(area_selector).droppable({
    drop: function (event, ui) {
        var $area = $(this); // The droppable
        var $draggable = ui.draggable; // The draggable
    }
}); 
```

# excel - 链接的 Access 查询中缺少行

> ID：14195189
> 
> 赞同：0
> 
> 时间：2013-01-07T11:40:21.323
> 
> 标签：excel, ms-access, rows, missing-data

使用 Excel 2007，我使用 Data>From Access 按钮链接到 Access 查询，并将其设置为显示为表格。除了“安置费”类型的行之外，所有行都存在。

例如，在下面的示例中，Excel 表格中显示了免费案例填写扣除额，但没有显示安置费扣除额。此查询从 Access 导出为 Excel 格式，因此似乎是 Excel 在链接到它时忽略了这些行。

有什么想法会导致在链接到 Access 查询时忽略行？

```
Chain       Account     Distributor Warehouse  StoreID USDate    Type of Deduction  TotalValue 
Bob's Shops Bob's Shops SMITHS      Romeoville KH00463 5/1/2012  Free Case Fill     29.8 
Bob's Shops Bob's Shops SMITHS      Romeoville KH00463 5/1/2012  Placement fee      2.98 
Bob's Shops Bob's Shops JONES       Greenwood  UN20521 6/1/2011  Free Case Fill     38.81 
```

-编辑-

SQL 如下 - 大约有四到五个堆叠查询，直到它下降到表级别。

安置费是单独计算的，然后直接从扣除表中添加到其余的扣除中，所以我唯一能想到的是它们的格式略有不同，Excel 忽略它们可能是因为值不一样数字类型作为其他扣除？但是，当我直接从 Access 导出查询时，一切看起来都像同一类型（即所有值都右对齐，因为它们被视为数字）。

```
SELECT Chain, Account, Distributor, Warehouse, StoreID, USDate, [Type of Deduction], SUM([Total Value($)]) AS TotalValue
FROM (SELECT Chain, Account, Distributor, Warehouse, StoreID, USDate, [Type of Deduction], [Total Value($)]
FROM DeductionsStoresGroupedByMonth
UNION ALL SELECT [Chain/Account/Warehouse], [Chain/Account/Warehouse2], Distributor, [Chain/Account/Warehouse3], StoreID, USDate, [Type of Deduction], [Amount($)]
FROM DeductionsByChainNoStoreID)  AS [%$##@_Alias]
GROUP BY Chain, Account, Distributor, Warehouse, StoreID, USDate, [Type of Deduction]; 
```

-编辑2-

此查询（以及其他三个类似的查询）在从 Excel 链接为表格时仅显示两个空行 - 它只是一列字符串和一列整数，所以不知道这个问题是什么：

```
SELECT Deductions.[Distributor's Reference], Count(Deductions.StoreID) AS NumFreeCaseFills
FROM Deductions
WHERE (((Deductions.[Type of Deduction]) Like "*free case fill*") AND ((Deductions.Details) Not Like "*placement fee*"))
GROUP BY Deductions.[Distributor's Reference]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:59:43.963

尝试[使用 ANSI-92 查询模式通配符](https://stackoverflow.com/a/720896/77335)作为`Like`模式。

```
WHERE
        Deductions.[Type of Deduction] Like "%free case fill%"
    AND Deductions.Details Not Like "%placement fee%" 
```

# android - 布局是否可以同时具有 onTouch 侦听器和 Gesture 侦听器？

> ID：14195192
> 
> 赞同：1
> 
> 时间：2013-01-07T11:40:27.460
> 
> 标签：android, touch, gesture

大家好，在我的 android 应用程序中，我根据用户输入在屏幕上移动对象。基本上我必须处理两个输入 - 拖动和向上（触摸和删除）

所以我实现了手势侦听器，其中两种方法 - `onScroll()`&`onSingleTapUp()`用于处理这两个输入事件。

但是`onSingleTapUp()`，如果用户将手指长时间放在屏幕上然后抬起它，则不起作用。

因此，现在的条件要求我实施`onTouch`以利用该`MotionEvent.ACTION_UP`功能。

但是同时使用`onTouch`& Gesture Listener 是个好主意。

或者我应该将我的代码转移到 onTouch 并删除手势监听器？

# wpf - 如何在 3D 中创建一个具有已知中心点、半径的圆，并且它位于与 WPF 中的一条线垂直的平面上？

> ID：14195196
> 
> 赞同：3
> 
> 时间：2013-01-07T11:40:48.900
> 
> 标签：wpf, 3d, geometry

如何在 3D 中创建一个具有已知中心点、半径的圆，并且它位于与 WPF 中的线（矢量）垂直的平面上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:42:52.883

以下是基于我之前发布的评论的示例。

首先我们定义一个函数来生成圆的模型：

```
 /// <summary>
    /// Generates a model of a Circle given specified parameters
    /// </summary>
    /// <param name="radius">Radius of circle</param>
    /// <param name="normal">Vector normal to circle's plane</param>
    /// <param name="center">Center position of the circle</param>
    /// <param name="resolution">Number of slices to iterate the circumference of the circle</param>
    /// <returns>A GeometryModel3D representation of the circle</returns>
    private GeometryModel3D GetCircleModel(double radius, Vector3D normal, Point3D center, int resolution)
    {
        var mod = new GeometryModel3D();
        var geo = new MeshGeometry3D();

        // Generate the circle in the XZ-plane
        // Add the center first
        geo.Positions.Add(new Point3D(0, 0, 0));

        // Iterate from angle 0 to 2*PI
        double t = 2 * Math.PI / resolution;
        for (int i = 0; i < resolution; i++)
        {
            geo.Positions.Add(new Point3D(radius * Math.Cos(t * i), 0, -radius * Math.Sin(t * i)));
        }

        // Add points to MeshGeoemtry3D
        for (int i = 0; i < resolution; i++)
        {
            var a = 0;
            var b = i + 1;
            var c = (i < (resolution - 1)) ? i + 2 : 1;

            geo.TriangleIndices.Add(a);
            geo.TriangleIndices.Add(b);
            geo.TriangleIndices.Add(c);
        }

        mod.Geometry = geo;

        // Create transforms
        var trn = new Transform3DGroup();
        // Up Vector (normal for XZ-plane)
        var up = new Vector3D(0, 1, 0);
        // Set normal length to 1
        normal.Normalize();
        var axis = Vector3D.CrossProduct(up, normal); // Cross product is rotation axis
        var angle = Vector3D.AngleBetween(up, normal); // Angle to rotate
        trn.Children.Add(new RotateTransform3D(new AxisAngleRotation3D(axis, angle)));
        trn.Children.Add(new TranslateTransform3D(new Vector3D(center.X, center.Y, center.Z)));

        mod.Transform = trn;

        return mod;
    } 
```

设置我们的 ViewPort3D：

```
 <Grid Background="Black">
        <Viewport3D Name="mainViewPort">
            <Viewport3D.Camera>
                <PerspectiveCamera NearPlaneDistance="0.1" FarPlaneDistance="100" UpDirection="0,1,0" Position="0,0,10" 
                               LookDirection="0,0,-1" FieldOfView="60" />
            </Viewport3D.Camera>
            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <Model3DGroup>
                        <AmbientLight Color="#40FFFFFF" />
                        <DirectionalLight Color="#FFFFFF" Direction="1,-1,-1" />
                    </Model3DGroup>
                </ModelVisual3D.Content>
            </ModelVisual3D>
        </Viewport3D>
    </Grid> 
```

然后进行测试：

```
 private void AddCircleModel()
    {
        var mod = GetCircleModel(1.5, new Vector3D(0, 1, 1), new Point3D(0, -1, 0), 20);
        mod.Material = new DiffuseMaterial(Brushes.Silver);
        var vis = new ModelVisual3D() { Content = mod };
        mainViewPort.Children.Add(vis);
    } 
```

加载您的窗口，打电话`AddCircleModel();`并享受。调整视图/参数，让您随心所欲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-15T10:01:39.053

旧线程，但仍然，如果有人遇到。“newb”答案会起作用，但它是相当懒惰的数学和耗时的 wize，原因如下：

*   有 2 个 for 循环，真正需要 1 个。
*   在以 (0,0,0) 为中心的 (x,z) 平面上构建圆后使用变换是多余的，因为您知道数学和向量约束。

我建议你以这种方式实现它（我做了它，所以它也适用于椭圆，只需将 uSize = vSize 设置为圆，u 和 v 真的只需要不平行即可工作，但出于网格质量目的，我强迫他们垂直）：

```
public static Mesh CreateEllipse3D(Vector3 center, Vector3 normal, Vector3 u, 
                                   Vector3 v, float uSize, float vSize, int 
                                   subdiv = 30)
    {
        if (Math.Abs(Vector3.Dot(u, v)) != 0)
        {
            Debug.LogError("Vectors u and v must be orthogonals");
            return new Mesh();
        }
        var mesh = new Mesh();
        var vertices = new List<Vector3>();
        var normals = new List<Vector3>();
        var triangles = new List<int>();
        vertices.Add(center);
        float t = 2 * Mathf.PI / subdiv;
        int a = 0, b, c;
        for (int i = 0; i < subdiv; i++)
        {
            vertices.Add(center + u.normalized * uSize * Mathf.Cos(t * i) - 
            v.normalized * vSize * Mathf.Sin(t * i));

            b = i + 1;
            c = (i < (subdiv - 1)) ? i + 2 : 1;

            triangles.Add(a);
            triangles.Add(b);
            triangles.Add(c);

            normals.Add(normal);
            normals.Add(normal);
            normals.Add(normal);
        }

        mesh.vertices = vertices.ToArray();
        mesh.triangles = triangles.ToArray();
        mesh.normals = normals.ToArray();
        return mesh;
    } 
```

# php - imap_mail_move 后的邮件 ID

> ID：14195198
> 
> 赞同：1
> 
> 时间：2013-01-07T11:41:00.370
> 
> 标签：php, imap

在将消息移动到具有 PHP 的 IMAP 函数 s.th 的新文件夹后，我想将消息标记为看不见。像：

```
$uioTmp = imap_uid($mailbox, $msgNumber);
imap_mail_move($mailbox, $msgNumber, "INBOX.undetected");
imap_clearflag_full($mailbox, $uidTmp, "\\Seen", ST_UID); 
```

因为 PHP`imap_mail_move`并没有真正移动消息（而是复制消息而不是删除旧消息），所以我认为新消息将获得一个新消息 id。

有没有办法获取复制消息的消息 ID 或正确的 UIO？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:28:45.843

解决方案是首先将其标记为看不见，然后将其移动到文件夹：

```
imap_clearflag_full($mailbox, imap_uid($mailbox, $msgNumber), "\\Seen", ST_UID);
imap_mail_move($mailbox, $msgNumber, "INBOX.undetected"); 
```

# android - 在 XML (Android) 中缩放可绘制资源

> ID：14195206
> 
> 赞同：8
> 
> 时间：2013-01-07T11:41:15.177
> 
> 标签：android, xml, android-layout

我正在尝试将可绘制对象缩放到其原始大小的两倍。我正在尝试使用它：[Drawable Resouces](http://developer.android.com/guide/topics/resources/drawable-resource.html#Scale)。我目前的代码是：

**可绘制：**

```
<?xml version="1.0" encoding="utf-8"?>
<scale xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/ic_launcher"
    android:scaleHeight="80%"
    android:scaleWidth="80%" >

</scale> 
```

**布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/scale2" />

</LinearLayout> 
```

但是第二个 ImageView 中没有显示任何内容。我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-08-06T20:41:48.910

一旦我遇到这个问题，我就通过使用 inset 而不是 scale 找到了解决方案。在 drawable 文件夹中创建一个新的 xml 可绘制文件并添加如下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
android:drawable="@drawable/buttonright"
android:insetTop="4dp"
android:insetLeft="4dp"
android:insetRight="4dp"
android:insetBottom="4dp"
/> 
```

像这样使用它

```
 <ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/scale" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T12:00:54.257

可绘制

```
<?xml version="1.0" encoding="utf-8"?>
<scale xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/logo"
    android:scaleGravity="center_vertical|center_horizontal"
    android:scaleHeight="80%"
    android:scaleWidth="80%" /> 
```

布局

```
 <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/scale" /> 
```

试试这样，或者你可以检查这个链接。

[http://developer.android.com/guide/topics/resources/drawable-resource.html](http://developer.android.com/guide/topics/resources/drawable-resource.html)

# android - 将常量文本放在应该不可编辑的 EditText 中 - Android

> ID：14195207
> 
> 赞同：80
> 
> 时间：2013-01-07T11:41:15.877
> 
> 标签：android, textview, android-edittext, material-design, material-components-android

我想在editText中有常量文本，例如：

```
http://<here_user_can_write> 
```

用户应该无法从“ `http://`”中删除任何字符，我对此进行了搜索并发现了这个：

```
editText.setFilters(new InputFilter[] {
    new InputFilter() {
        public CharSequence filter(CharSequence src, int start,
            int end, Spanned dst, int dstart, int dend) {
            return src.length() < 1 ? dst.subSequence(dstart, dend) : "";
        }
    }
}); 
```

*但我不知道它是否限制用户*从头到尾不删除任何字符限制。我也无法理解 Spanned 类的使用。

如果我们可以放入`TextView`内部，一种方法将是一个不错的选择，`EditText`但我认为这在 Android 中是不可能的，因为两者都是视图，这可能吗？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-01-07T12:04:53.007

你试过这个方法吗？

```
final EditText edt = (EditText) findViewById(R.id.editText1);

edt.setText("http://");
Selection.setSelection(edt.getText(), edt.getText().length());

edt.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            if(!s.toString().startsWith("http://")){
                edt.setText("http://");
                Selection.setSelection(edt.getText(), edt.getText().length());

            }

        }
    }); 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2019-11-09T13:13:03.337

从[材料设计库](https://github.com/material-components/material-components-android)[1.2.0-alpha01](http://github.com/material-components/material-components-android/releases)版本开始，文本字段支持前缀和后缀：

```
<com.google.android.material.textfield.TextInputLayout
        app:prefixText="Price: "
        app:prefixTextAppearance="..."
        app:prefixTextColor="..."
        app:suffixText="Dollar"
        app:suffixTextColor="..."
        app:suffixTextAppearance="...">

    <com.google.android.material.textfield.TextInputEditText .../>

</com.google.android.material.textfield.TextInputLayout> 
```

我认为唯一的缺点是**后缀**固定在文本字段的末尾，并且没有选项可以使其与输入文本一起流动。[您可以为此问题](https://github.com/material-components/material-components-android/issues/750)投票。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-04-03T17:58:49.397

这就是你可以用一个实际做到的方式`InputFilter`：

```
final String prefix = "http://"
editText.setText(prefix);

editText.setFilters(new InputFilter[] {
    new InputFilter() {
      @Override
      public CharSequence filter(final CharSequence source, final int start,
          final int end, final Spanned dest, final int dstart, final int dend) {
        final int newStart = Math.max(prefix.length(), dstart);
        final int newEnd = Math.max(prefix.length(), dend);
        if (newStart != dstart || newEnd != dend) {
          final SpannableStringBuilder builder = new SpannableStringBuilder(dest);
          builder.replace(newStart, newEnd, source);
          if (source instanceof Spanned) {
            TextUtils.copySpansFrom(
                (Spanned) source, 0, source.length(), null, builder, newStart);
          }
          Selection.setSelection(builder, newStart + source.length());
          return builder;
        } else {
          return null;
        }
      }
    }
}); 
```

如果您还希望前缀不可选，您可以添加以下代码。

```
final SpanWatcher watcher = new SpanWatcher() {
  @Override
  public void onSpanAdded(final Spannable text, final Object what,
      final int start, final int end) {
    // Nothing here.
  }

  @Override
  public void onSpanRemoved(final Spannable text, final Object what, 
      final int start, final int end) {
    // Nothing here.
  }

  @Override
  public void onSpanChanged(final Spannable text, final Object what, 
      final int ostart, final int oend, final int nstart, final int nend) {
    if (what == Selection.SELECTION_START) {
      if (nstart < prefix.length()) {
        final int end = Math.max(prefix.length(), Selection.getSelectionEnd(text));
        Selection.setSelection(text, prefix.length(), end);
      }
    } else if (what == Selection.SELECTION_END) {
      final int start = Math.max(prefix.length(), Selection.getSelectionEnd(text));
      final int end = Math.max(start, nstart);
      if (end != nstart) {
        Selection.setSelection(text, start, end);
      }
    }
  }
};

editText.getText().setSpan(watcher, 0, 0, Spanned.SPAN_INCLUSIVE_EXCLUSIVE); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-01-22T23:17:08.847

@Rajitha Siriwardena 的回答有一点问题。它假设除了后缀之外的整个字符串在后缀之前已经被删除，如果你有字符串

```
http://stackoverflow.com/ 
```

并尝试删除`http://`您将删除的任何部分`stackoverflow.com/`仅导致`http://`.

我还添加了一个检查，以防用户尝试在前缀之前输入。

```
 @Override
 public void afterTextChanged(Editable s) {
     String prefix = "http://";
     if (!s.toString().startsWith(prefix)) {
         String cleanString;
         String deletedPrefix = prefix.substring(0, prefix.length() - 1);
         if (s.toString().startsWith(deletedPrefix)) {
             cleanString = s.toString().replaceAll(deletedPrefix, "");
         } else {
             cleanString = s.toString().replaceAll(prefix, "");
         }
         editText.setText(prefix + cleanString);
         editText.setSelection(prefix.length());
    }
} 
```

注意：这不处理用户尝试仅在前后编辑前缀本身的情况。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-01-30T04:52:53.627

> 取自 Ali Muzaffar 的博客，有关详细信息，请参阅[原始帖子。](https://medium.com/@ali.muzaffar/adding-a-prefix-to-an-edittext-2a17a62c77e1)

使用自定义`EditText`View 绘制前缀文本并根据前缀文本大小添加填充：

```
public class PrefixEditText extends EditText {

private String mPrefix = "$"; // add your prefix here for example $
private Rect mPrefixRect = new Rect(); // actual prefix size

public PrefixEditText(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    getPaint().getTextBounds(mPrefix, 0, mPrefix.length(), mPrefixRect);
    mPrefixRect.right += getPaint().measureText(" "); // add some offset

    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawText(mPrefix, super.getCompoundPaddingLeft(), getBaseline(), getPaint());
}

@Override
public int getCompoundPaddingLeft() {
    return super.getCompoundPaddingLeft() + mPrefixRect.width();
}
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-10-14T11:17:26.297

你几乎是对的，试试

```
private final String PREFIX="http://";

editText.setFilters(new InputFilter[]{new InputFilter() {
            @Override
            public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int
                    dend) {
                return dstart<PREFIX.length()?dest.subSequence(dstart,dend):null;
            }
        }}); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-08-31T10:05:14.203

**将自定义前缀添加到您的编辑文本的代码（前缀不可编辑）**

Ali Muzaffar 来自 Medium 的代码

```
public class PrefixEditText extends AppCompatEditText {
    float originalLeftPadding = -1;

    public PrefixEditText(Context context) {
        super(context);
    }

    public PrefixEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public PrefixEditText(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        calculatePrefix();
    }

    private void calculatePrefix() {
        if (originalLeftPadding == -1) {
            String prefix = (String) getTag();
            float[] widths = new float[prefix.length()];
            getPaint().getTextWidths(prefix, widths);
            float textWidth = 0;
            for (float w : widths) {
                textWidth += w;
            }
            originalLeftPadding = getCompoundPaddingLeft();
            setPadding((int) (textWidth + originalLeftPadding),
                getPaddingRight(), getPaddingTop(),
                getPaddingBottom());
        }
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        String prefix = (String) getTag();
        canvas.drawText(prefix, originalLeftPadding, getLineBounds(0, null), getPaint());
    }
} 
```

和 XML

```
<com.yourClassPath.PrefixEditText
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="bottom"
    android:textSize="14sp"
    android:tag="€ " /> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-10-26T18:21:40.330

用于此目的的易于使用的 Kotlin 扩展功能

```
fun EditText.stickPrefix(prefix: String) {
    this.addTextChangedListener(afterTextChanged = {
        if (!it.toString().startsWith(prefix) && it?.isNotEmpty() == true) {
            this.setText(prefix + this.text)
            this.setSelection(this.length())

        }
    })
}
//someEditText.stickPrefix("+") 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-10-05T16:57:18.200

我知道我正在恢复一篇旧帖子，但我想与社区分享我这些天一直在努力解决这个话题的社区，我发现放置一个`TextView`不仅`EditText`是完全可行的（回答问题的第二部分） ，在这种情况下，当在起始位置需要常量文本时更多，但也更可取。此外，光标甚至根本不会在“可变”文本之前移动，这是一种优雅的效果。我更喜欢这个解决方案，因为它不会增加我的应用程序的工作量和复杂性以及监听器等等。

这是我的解决方案的示例代码：

```
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginStart="3dp"
        android:text="http://" />

    <EditText
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:inputType="textUri"
        android:paddingStart="choose an appropriate padding" />
</RelativeLayout> 
```

通过将视图包含在 a 中，`RelativeLayout`它们将重叠。这里的技巧是使用 , 的属性`android:paddingStart`使`EditText`文本在`TextView`,之后开始至少在使用材质主题时会发生这种情况）。`android:layout_centerVertical="true"``android:layout_marginStart="3dp"``TextView``EditText`

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-07-07T07:16:53.883

我制作了 Kotlin 扩展函数来添加前缀`EditText`

```
fun EditText.addPrefix(prefix: String) {
        var text = ""
        var isPrefixModified = false
        val formattedPrefix = "$prefix "
        var lastCharSequence: CharSequence? = null

        val setEditText: () -> Unit = {
            setText(text)
            Selection.setSelection(editableText, text.length)
        }

        this.addTextChangedListener(object : TextWatcher {
            override fun afterTextChanged(editable: Editable?) {
                val newText = editable.toString()

                when {
                    isPrefixModified -> {
                        isPrefixModified = false
                        setEditText()
                    }
                    isTryingToDeletePrefix(newText) -> {
                        setEditText()
                    }
                    isNewInput(newText) -> {
                        text = "$formattedPrefix$newText"
                        setEditText()
                    }
                    else -> {
                        text = newText
                    }
                }
            }

            override fun beforeTextChanged(charSequence: CharSequence?, start: Int,
                                           count: Int, after: Int) {
                charSequence?.let {
                    if (it != lastCharSequence && it.isNotEmpty() && start <= prefix.length) {
                        isPrefixModified = true
                    }
                    lastCharSequence = charSequence
                }
            }

            override fun onTextChanged(charSequence: CharSequence?, start: Int,
                                       before: Int, count: Int) {
                // Ignore
            }

            private fun isTryingToDeletePrefix(newText: String) =
                    text.isNotEmpty() && newText.length < text.length && isNewInput(newText)

            private fun isNewInput(newText: String) = !newText.contains(formattedPrefix)
        })
    } 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-07-18T14:21:25.210

这基本上是在电话号码的编辑文本字段中添加前缀“+91”。

1.将此代码添加到活动的oncreate（）中

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_sign_up);

   // Write other things......//

   etPhoneNumber.setFilters(new InputFilter[]{getPhoneFilter(),newInputFilter.LengthFilter(13)});

    etPhoneNumber.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {
                if (etPhoneNumber.getText().toString().isEmpty()) {
                    etPhoneNumber.setText("+91");
                    Selection.setSelection(etPhoneNumber.getText(), etPhoneNumber.getText().length());                    }
            } else {
                if (etPhoneNumber.getText().toString().equalsIgnoreCase("+91")) {
                    etPhoneNumber.setFilters(new InputFilter[]{});
                    etPhoneNumber.setText("");
                    etPhoneNumber.setFilters(new InputFilter[]{getPhoneFilter(),new InputFilter.LengthFilter(13)});

                }
            }
        }
    });
} 
```

2.声明一个名为getPhoneFilter()的方法

```
 private InputFilter getPhoneFilter() {

    Selection.setSelection(etPhoneNumber.getText(), etPhoneNumber.getText().length());

    etPhoneNumber.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                                      int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
            if(!s.toString().startsWith("+91")){
                if (etPhoneNumber.getFilters() != null && etPhoneNumber.getFilters().length > 0) {
                    etPhoneNumber.setText("+91");
                    Selection.setSelection(etPhoneNumber.getText(), etPhoneNumber.getText().length());
                }
            }
        }
    });

     // Input filter to restrict user to enter only digits..
    InputFilter filter = new InputFilter() {

        public CharSequence filter(CharSequence source, int start, int end,
                                   Spanned dest, int dstart, int dend) {

            for (int i = start; i < end; i++) {

                if (!String.valueOf(getString(R.string.digits_number)).contains(String.valueOf(source.charAt(i)))) {
                    return "";
                }
            }
            return null;
        }
    };
    return filter;
} 
```

3.在你的值文件中声明“digits_number”

```
 <string name="digits_number">1234567890+</string> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-09-04T11:43:30.673

基于[@demaksee](https://stackoverflow.com/users/755313/demaksee)评论。我扩展了 EditText 并覆盖了 onSelectionChanged 函数。所以用户甚至不能编辑前缀。非常简单实用。科特林：

```
private var prefix : String? = ""

override fun onSelectionChanged(selStart: Int, selEnd: Int) {
    if (prefix != null && prefix!!.isNotBlank()) {
        var finalStart = selStart
        var finalEnd = selEnd

        val prefixLength = prefix!!.length
        if (prefixLength > selStart) {
            finalStart = prefixLength
        }

        if (prefixLength > selEnd) {
            finalEnd = prefixLength
        }

        if (finalStart == selStart && finalEnd == selEnd) {
            super.onSelectionChanged(finalStart, finalEnd)
        } else {
            val startWithPrefix = text?.startsWith(prefix ?: "") ?: prefix.isNullOrBlank()
            if (!startWithPrefix) {
                setText(prefix)
            }

            setSelection(finalStart, finalEnd)
        }
    }
}

public fun setPrefix(prefix: String) {
    editText.setText(prefix)
    editText.setSelection(prefix.length)
    this.prefix = prefix
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-09-14T22:38:09.870

这是一个效率较低的解决方案，它应该处理在前缀周围删除/插入字符或单词的所有情况。

```
prefix = "http://"
extra = "ahhttp://"
differencePrefix(prefix, extra) = "aht" 
```

代码：

```
public static String differencePrefix(String prefix, String extra) {
    if (extra.length() < prefix.length()) return "";
    StringBuilder sb = new StringBuilder();
    StringBuilder eb = new StringBuilder();
    int p = 0;
    for (int i = 0; i < extra.length(); i++) {
        if (i >= prefix.length()) {
            while(p < extra.length()) {
                eb.append(extra.charAt(p));
                p++;
            }
            break;
        }
        if (p >= extra.length()) break;
        char pchar = extra.charAt(p);
        char ichar = prefix.charAt(i);
        while(pchar != ichar) {
            //check if char was deleted
            int c = i + 1;
            if (c < prefix.length()) {
                char cchar = prefix.charAt(c);
                if (cchar == pchar) {
                    break;
                }
            }
            sb.append(pchar);
            p++;
            if (p >= extra.length()) break;
            pchar = extra.charAt(p);
        }
        p++;
    }

    return eb.toString() + sb.toString();
} 
```

你可以像这样使用它

```
editText.addTextChangedListener(new TextWatcher() {
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void afterTextChanged(Editable s) {
        String input = s.toString();
        if (!input.startsWith(prefix)) {
            String extra = differencePrefix(prefix, input);
            String newInput = prefix + extra;
            editText.setText(newInput);
            editText.setSelection(newInput.length());
        }
    }
}); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-03-04T20:31:14.620

我刚刚找到了如何使前缀不可编辑以及如果您尝试删除前缀如何保存文本的解决方案。这非常接近@Rajitha Siriwardena 的答案。您错过的只是在应用任何更改之前保存文本。它将在 afterTextChanged(...) 中恢复。

代码：

```
final String prefix = "http://";
editText.setText(prefix);
Selection.setSelection(editText.getText(), editText.getText().length());

editText.addTextChangedListener(new TextWatcher() {
    String text;
    @Override
    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {
        text = charSequence.toString();
    }

    @Override
    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
    }

    @Override
    public void afterTextChanged(Editable editable) {
        if (!editable.toString().startsWith(prefix)) {
            editText.setText(text);
            Selection.setSelection(editText.getText(), editText.getText().length());
        }
    }
}); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-04-07T07:21:54.300

```
 EditText msg=new EditText(getContext());
                msg.setSingleLine(true);
                msg.setSingleLine();
                msg.setId(View.generateViewId());
                msg.measure(0,0);

                TextView count=new TextView(getContext());
                count.setTextColor(Color.parseColor("#666666"));
                count.setText("20");
                count.setPadding(0,0,(int)Abstract.getDIP(getContext(),10),0);
                count.measure(0,0);
float tenPIX =TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,10,getContext().getResources().getDisplayMetrics());

 msg.setPadding((int)tenPIX,(int)tenPIX,(int)(int)tenPIX+count.getMeasuredWidth(),(int)tenPIX);

                RelativeLayout ll1=new RelativeLayout(getContext());
                ll1.addView(msg,new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

LayoutParams countlp=new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                countlp.addRule(RelativeLayout.ALIGN_END,msg.getId());
                countlp.addRule(RelativeLayout.ALIGN_BASELINE,msg.getId());
                ll1.addView(count,countlp); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-01-17T14:10:49.090

下面的代码对我有用。它处理用户编辑前缀、删除它、从缓冲区插入文本、更改选定文本的情况。如果用户更改前缀，则焦点移动到前缀的末尾。

```
 final String prefix = "http://";
    final String[] aLastText = {prefix};
    et.setText(prefix);
    et.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {}
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
        @Override
        public void afterTextChanged(Editable sNew) {

            if (!sNew.toString().startsWith(prefix)) {
                String sLast = aLastText[0];
                boolean isRemoving = sNew.length() < sLast.length();

                int start;
                int end = sNew.length() - 1;
                for (start = 0; start < sLast.length() && start < sNew.length(); start++) {
                    if (sLast.charAt(start) != sNew.charAt(start)) 
                        break;
                }
                int k = sLast.length() - 1;
                for (; end >= start && k >= 0; end--, k--) {
                    if (sLast.charAt(k) != sNew.charAt(end)) 
                        break;
                }
                String sEdited = sNew.toString().substring(start, ++end);
                k += isRemoving ? 1 : 0;
                k = k < prefix.length() ? prefix.length() : k;
                String sSuffix = sLast.substring(k, sLast.length());

                et.setText(prefix + sEdited + sSuffix);
                et.setSelection(et.getText().length() - sSuffix.length());
            }
            aLastText[0] = et.getText().toString();
        }
    }); 
```

例子：

ht5tp://localhost, 5http://localhost, http://5/localhost -> [http://5localhost](http://5localhost)

http:localhost -> [http://localhost](http://localhost)

# python - 谷歌应用引擎中的python Channel API到期和使用

> ID：14195210
> 
> 赞同：0
> 
> 时间：2013-01-07T11:41:30.230
> 
> 标签：python, google-app-engine, app-engine-ndb, channel-api

我想使用频道 api 推送更新以打开页面，到目前为止我所做的是将页面客户端 id 存储在 ndb 中 - 我已经包含了代码摘要

我的问题是：如何管理已关闭的页面和过期的令牌？

这是将更新推送到许多打开页面的最佳方式吗？

打开页面代码：

```
import webapp2
import uuid
from google.appengine.api import channel
from google.appengine.ext import ndb

class Frame(ndb.Model):
  clientID = ndb.StringProperty()
  date = ndb.DateTimeProperty(auto_now_add=True)

class MainHandler(BaseHandler):
    def get(self):
        client_id = str(uuid.uuid4())
        channel_token = channel.create_channel(client_id)
        frame = Frame(clientID = client_id)
        frame.put()

        self.render_response('home.html',** "token":channel_token,"client_id":client_id) 
```

发送消息代码：

```
from google.appengine.api import channel
from google.appengine.ext import ndb

class Frame(ndb.Model):
  clientID = ndb.StringProperty()
  date = ndb.DateTimeProperty(auto_now_add=True)

frames = Frame.query().fetch(10)

for i in frames:
   channel.send_message(i.clientID, "some message to update") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:06:58.890

当您启用 channel_presence 时，您的应用程序会接收到以下 URL 路径的 POST：

```
POSTs to /_ah/channel/connected/ 
POSTs to /_ah/channel/disconnected/ 
```

这些信号表明客户端已连接到通道并且可以接收消息或已断开连接。

[Tracking_Client_Connections_and_Disconnections](https://developers.google.com/appengine/docs/python/channel/overview#Tracking_Client_Connections_and_Disconnections)

处理过期令牌：

> 默认情况下，令牌会在两小时后过期，除非您在生成令牌时通过向 create_channel() 函数提供 duration_minutes 参数来明确设置过期时间。如果客户端保持连接到通道的时间超过令牌持续时间，则调用套接字的 onerror() 和 onclose() 回调。此时，客户端可以向应用程序发出 XHR 请求以请求新令牌并打开新通道。

所以在你的`onerror`功能上，你基本上就像原来的连接一样重新做一遍。

[代币和安全](https://developers.google.com/appengine/docs/python/channel/overview#Tokens_and_Security)

要向许多打开的页面发送更新，只需遍历您的已连接用户列表并单独向他们发送消息。没有“传送给所有人”功能。

您可能还想构建一个“心跳”，将消息发送到假定连接的客户端，如果没有回复，则将其删除。这是因为有时（显然）在关闭浏览器窗口时不会发送断开连接的消息（电源故障等）。

# iphone - 如何在 iphone 中录制音频时创建波形图的动画视图？

> ID：14195214
> 
> 赞同：0
> 
> 时间：2013-01-07T11:41:54.190
> 
> 标签：iphone, ios5, audio, audio-recording

在我的相机应用程序中，相机会拍照并记录**音频**。因此，在录制音频时，我想显示一个**动画波形图**。动画波形图在意义上，波形应该基于**音频幅度**。下面是图片，我想要波形图的样子。如何在 iOS5 中做到这一点？ ![音频波形图](../Images/c41c280ea77a45f36074bc55fe4d9054.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:25:36.697

*   对于“动画波形图”，您可以查看 Apple 示例[“aurioTouch”](http://developer.apple.com/library/ios/#samplecode/aurioTouch/Introduction/Intro.html)

*   对于处理音频，您还可以查看[SpeakHere](http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html)

# html - jquery 函数只运行一次

> ID：14195217
> 
> 赞同：0
> 
> 时间：2013-01-07T11:42:03.757
> 
> 标签：html, ajax, jquery

我在下面有这个功能。效果很好，来自[http://caroufredsel.dev7studios.com/](http://caroufredsel.dev7studios.com/) （到目前为止，如果其他人在轮播之后，我发现这是最好的和最容易的）

```
<script type="text/javascript" language="javascript">
  $(function() {
    $('#foo1').carouFredSel({
     auto: {
     pauseOnHover: 'resume',
     progress: '#timer1'
     }
    });
  });
</script> 
```

无论如何，我的轮播会循环选择一系列图像。现在我有一个单独的函数，通过下面的 ajax 调用重新加载 div。它根据用户选择的文件夹用一组新的图像填充 div。

```
<script>
  function getImages(id)
  {
     $.ajax({

 type: "GET",
 url: 'getImage.php',
 data: "id=" + id, 
 success: function(data) {

      $('#scrolimg').html(data);
    }

   });

  }
</script> 
```

这也很好用。问题是当您单击一个新文件夹并重新加载时，会刷新轮播完全停止的 div。无论如何基于ajax调用的成功来重新触发jquery函数以使轮播再次运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:46:13.860

在你调用的AJAX的回调函数上，你要重新申请：

```
success: function(data) {  
        $('#foo1').carouFredSel({
            auto: {
                pauseOnHover: 'resume',
                progress: '#timer1'

            }
        });
...
} 
```

如果您使用`.html()`函数或类似函数来重写`foo`元素，那么您也将擦除与其关联的任何事件，因此您必须再次调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:54:10.947

在你的回调中添加这样的东西：

```
$('#foo1').carouFredSel({
    auto: {
        pauseOnHover: 'resume',
        progress: '#timer1'

    }
}); 
```

它应该工作。尊重！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:48:55.353

假设在您的示例中 foo1 == scrolimg，请执行以下操作：

```
<script>
  function getImages(id)
  {
     $.ajax({

 type: "GET",
 url: 'getImage.php',
 data: "id=" + id, 
 success: function(data) {

      $('#scrolimg')
         .carouFredSel('destroy')
         .html(data)
         .carouFredSel({
            auto: {
            pauseOnHover: 'resume',
            progress: '#timer1'
           }
         });
      }

   });

  }
</script> 
```

# php - 在smarty中创建从fpdf创建的pdf时如何下载pdf

> ID：14195223
> 
> 赞同：-2
> 
> 时间：2013-01-07T11:42:13.837
> 
> 标签：php, pdf, header, smarty, fpdf

嗨，我需要在 smarty 中创建一个 pdf 的下载行，我是从 fpdf 制作的，在 fire bug 中显示 pdf 文件，但我可以在 smarty 中创建一个下载链接，我的代码如下。

```
$content = $this->view->fetch($pdf->Output());
 $router->disableRender();
    header('Content-Description: File Transfer');
    header('Content-Type: application/pdf');
    header('Content-disposition: attachment; filename="doc.pdf"');
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');

    ob_clean();
    flush();

    readfile(doc.pdf);
    die; 
```

请帮助我 thax adv........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:59:42.967

在代码的顶部，你说

```
$content = $this->view->fetch($pdf->Output());
 $router->disableRender(); 
```

然后在底部，你说

```
ob_clean();
flush();

readfile(doc.pdf);
die; 
```

现在，除了这应该会导致 PHP 警告（未定义的常量 doc.pdf、假设是字符串等）之外，这段代码并没有按照您的想法执行。您绝不会将 PDF 内容写入磁盘，那么您如何期望从磁盘读取它会起作用？

您需要`$content`在发出文件之前写入文件，或者只需要`echo $content`.

您是否*尝试*过对此进行故障排除？

# iphone - cocos2d 如何改善 iPhone 应用中的 png alpha 通道？

> ID：14195225
> 
> 赞同：1
> 
> 时间：2013-01-07T11:42:22.583
> 
> 标签：iphone, objective-c, cocos2d-iphone

我在模拟器中导入了我的作品，它是这样的：

![在此处输入图像描述](../Images/9dea32eb7a97089f6726d954911e90bf.png)

模拟器中不支持 Alpha 通道。pnb 是在 win xp 机器上用 Photoshop 制作的，然后在 mac 上导入。

这只是一个模拟器问题吗？我没有要测试的设备。

如果它不是特定于模拟器的，我应该怎么做才能提高 png 质量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:09:56.343

这也将发生在设备上。这种现象被称为“色带”，由用于表示每个颜色通道的有限位数引起，并影响所有图像，尤其是渐变缓慢的图像。您可以通过应用一些抖动算法来减轻影响（我相信 TexturePacker 工具具有一些后处理抖动功能）。有关某些抖动算法效果的示例，请参阅[本文。](http://en.wikipedia.org/wiki/Dithering)

# ios - 点击 UITextField iPad 后 UIPopover 中的 datePicker

> ID：14195226
> 
> 赞同：2
> 
> 时间：2013-01-07T11:42:23.500
> 
> 标签：ios, ipad, ios5, ios6

我想`UIPopover`在 iPad 上创建一个`UIDatePicker`里面，点击`UITextField`.

我使用下面的代码来执行此操作，但我不知道`tempButton.frame`代表什么或是什么`tempButton`。

是否可以使用故事板做同样的事情？提前致谢。

```
UIViewController* popoverContent = [[UIViewController alloc] init]; //ViewController

UIView *popoverView = [[UIView alloc] init];   //view
popoverView.backgroundColor = [UIColor blackColor];

UIDatePicker *datePicker=[[UIDatePicker alloc]init];//Date picker
datePicker.frame=CGRectMake(0,44,320, 216);
datePicker.datePickerMode = UIDatePickerModeDateAndTime;
[datePicker setMinuteInterval:5];
[datePicker setTag:10];
[datePicker addTarget:self action:@selector(Result) forControlEvents:UIControlEventValueChanged];
[popoverView addSubview:datePicker];

popoverContent.view = popoverView;
popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
popoverController.delegate=self;
[popoverContent release];

[popoverController setPopoverContentSize:CGSizeMake(320, 264) animated:NO];
[popoverController presentPopoverFromRect:tempButton.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];//tempButton.frame where you need you can put that frame 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:19:24.330

至于按钮本身，您可以使用[UITextField的](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)[rightView](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextField_Class/Reference/UITextField.html#//apple_ref/doc/uid/TP40006888-CH3-SW27)属性。

并且也可以为 datepicker 视图使用故事板。

1) 将 ViewController 拖到情节提要。

2）在身份检查器中将其类设置为您的自定义类。

3) 在 Identity Inspector 中为“StoryBoard ID”设置一个值。

4) 使用您的 datePicker 设置视图。

5) #import "PopoverContentViewController.h" 到您呈现的 ViewController。

当你展示你的弹出框时：

```
PopoverContentViewController *popoverContent = [self.storyboard instantiateViewControllerWithIdentifier:@"myStoryboardID"];
popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
popoverController.delegate=self;
[popoverController setPopoverContentSize:CGSizeMake(320, 264) animated:NO];
[popoverController presentPopoverFromRect:myTextField.myRightView.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

您可能需要设置一个委托，以便`UIDatePicker`可以与演示者进行通信`ViewController`。

# scala - Scala 有像 Java 这样的静态导入吗？

> ID：14195231
> 
> 赞同：20
> 
> 时间：2013-01-07T11:42:50.123
> 
> 标签：scala, static, import

Scala 是否像 Java 一样支持静态导入？

比如，说：

```
import static java.util.Collections.singleton; 
```

我也可以在 Scala 中执行上述操作吗？我在尝试时遇到编译错误——关于一个错位的点——所以大概我的语法不正确？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-07T11:47:34.917

Scala 中没有静态，最接近的概念是单例对象。与 Java 静态导入一样，您可以导入单例对象的所有成员。

```
object MySingleton { .... }

object Main {
  import MySingleton._

} 
```

您还可以从 Scala 中导入 Java 类的所有静态成员，只需省略 static。

```
import java.lang.Math._ 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-07T11:44:45.890

只需省略单词`static`，它就会起作用。

（也可以省略分号）

# asp.net-mvc - 使用从父域登录的自定义表单身份验证

> ID：14195234
> 
> 赞同：1
> 
> 时间：2013-01-07T11:43:01.177
> 
> 标签：asp.net-mvc, authentication, forms-authentication, subdomain

我有一个父 MVC 站点，它处理具有域 mysite.com 的登录。这基本上是开箱即用的模板 MVC Internet 应用程序 - 用户登录，它使用域 .mysite.com 设置一个 .ASPXAUTH cookie。

我还有另一个在 child.mysite.com 域上运行的 MVC 站点。我打算使用自定义表单身份验证从父设置的 cookie 中对用户进行身份验证。当我在 Firefox 中浏览到 child.mysite.com 时，我可以在 Firebug 中看到登录站点设置的 cookie，因此我知道子站点可以访问它，但我似乎无法从我的代码中检索此 cookie在子站点中。

我在 Global.asax 中实现 FormsAuthentication_OnAuthenticate，我希望 cookie 在 Request.Cookies 中可见，但那里没有 cookie。

如何访问 FormsAuthentication_OnAuthenticate 中父登录站点设置的 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:41:53.487

我想我找到了问题所在。子站点正在查找 cookie，但是当它试图解密它时，它出错了，因此没有完全验证。子网站上的这段代码会出错：

```
void FormsAuthentication_OnAuthenticate(Object sender, FormsAuthenticationEventArgs e)
{
    var cookie = FormsAuthentication.Decrypt(Request.Cookies[FormsAuthentication.FormsCookieName].Value);
} 
```

错误是“填充无效且无法删除”，这是由于子站点无法解密父站点设置的 cookie。

答案是将 web.config 中 system.web 中的机器密钥设置为两个站点相同：

```
<machineKey 
    validationKey='241FF35BE3921690EBA492A89CC03719ECF5552D019448C44F8B28B01F546FCDC4AEDCD273380EB45BE8A49AFB9C14FE60BECF0B5ECBA4901C306875FED98DEA'
decryptionKey='864559FC58AC5FFB5B9581008552B4A873ACBE86469A81CB'
validation='SHA1'/> 
```

# clearcase - 如何将 ClearCase 许可证服务器从 Solaris 移动到 Windows

> ID：14195235
> 
> 赞同：0
> 
> 时间：2013-01-07T11:43:20.413
> 
> 标签：clearcase

我们在 Solaris 机器上安装了 ClearCase 许可证服务器，这是一台非常古老的机器。所以我们的 IT 部门想要停止使用这台机器，并要求我们将 ClearCase 许可证服务器移动到其他地方。所以我们在 Windows 机器上安装了 Clear Case 许可证服务器和许可证管理员。现在我们需要将已经存在的许可证（数量为 300）从 Solaris 盒子移动到 Windows。我们可以这样做吗？这样做的程序是什么？还有一件事是现在我们应该只使用这 300 个许可证中的 22 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:06:02.227

您可以查看“[如何将许可证移动到新服务器](http://www-01.ibm.com/support/docview.wss?uid=swg21308308)”中描述的过程。

**[您需要通过Rational License Key Center](http://www-01.ibm.com/software/rational/support/licensing/)**发布和重新分配许可证，您可以[在那里登录](https://licensing.subscribenet.com/control/ibmr/login)）。
您将只能为新许可证服务器分配所需数量的许可证。

# android - 在textchange上的android EditText视图中格式化单词

> ID：14195238
> 
> 赞同：0
> 
> 时间：2013-01-07T11:43:24.263
> 
> 标签：android, formatting, textchanged

我正在使用 android 2.2。我想根据我的适配器包含格式化多个单词。喜欢

```
final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1);
        adapter.add("aaaa");
        adapter.add("abaa");
        adapter.add("acaa");
        adapter.add("adaa");
        adapter.add("aaba");
        adapter.add("aaca");
        adapter.add("aaba");
        adapter.add("aaae"); 
```

我有一个 EditText 视图，我正在其中编写文本，但如果在文本更改时发现任何与我想要突出显示的适配器值匹配的单词。

请参考以下关于文本更改但未获得完美输出的代码。

```
@Override
            public void afterTextChanged(Editable s) {
                CharSequence cs;
                // TODO Auto-generated method stub

                str = myAutoComplete.getText().toString();
            for(int i = 0; i < adapter.getCount(); i++)
            {   
                String s2 = adapter.getItem(i).toString().toLowerCase();    

                if (str.contains(s2) == true) 
                {   Log.e("s2",s2);                     
                    str =  str.replaceAll(s2, "<font color='red'>"+s2+"</font>");
                    Log.e("str",str);
                    myAutoComplete.setText(Html.fromHtml(str), TextView.BufferType.SPANNABLE);
                }

            }
} 
```

![在此处输入图像描述](../Images/3c65b24761be9ffa8ee4f31246213bff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:06:29.257

尝试这个

```
 SpannableStringBuilder ssb = new SpannableStringBuilder(eT
                    .getText().toString());

            ForegroundColorSpan fcs = new ForegroundColorSpan(Color.GREEN);

                   // 5,10 specifies selected characters
            ssb.setSpan(fcs, 5, 10, Spannable.SPAN_INCLUSIVE_EXCLUSIVE);

            eT.setText(ssb); 
```

# c# - 如何根据登录的人隐藏主窗体中的按钮？

> ID：14195242
> 
> 赞同：1
> 
> 时间：2013-01-07T11:43:37.690
> 
> 标签：c#, winforms, button, sql-server-ce

我是编程和使用的新手`SQL Server Compact`，我正在做这个个人项目来学习，所以非常感谢任何帮助。

我试图隐藏成功登录`button`的`Main Form`取决于用户类型的帐户。

在我的数据库中，我有 3 列，它们`username`是`password`和`type - (this is what I am trying to access for this project)`。

我认为要获得我想要的效果，我必须处理 Main_load 所以这是我放置此代码的地方：

```
 private void Main_Load(object sender, EventArgs e)
    {
        admincontrolbtn.Visible = false;
        conn = new SqlCeConnection("Data Source=Users.sdf; Persist Security Info = False");
        comm = new SqlCeCommand("Select * from [user]", conn);
        reader = comm.ExecuteReader();
        while (reader.Read())
        {
            try
            {
                conn.Open();
                if (reader.GetString(2) == "Administrator")
                {
                    admincontrolbtn.Visible = true;
                }
                else
                {
                    admincontrolbtn.Visible = false;
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
            finally
            {
                conn.Close();
            }
        }
    } 
```

当我构建代码时，没有发现错误。我以为我走在正确的轨道上。但是，当我使用具有 的凭据登录时`User" type`，`button`仍然可见。我已经尝试通过在`Main_load`自身上放置一个中断来调试代码，但是当我运行它并登录时，它会显示主页，完全忽略 Main_load。

我还尝试将属性的可见性设置`button`为 false，但是当主页加载时，即使使用**管理员**类型的凭据，也会`button`保持隐藏状态。

代码的语法错了吗？和/或也许我的思维方式`Main_load`是我的目标错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:48:56.350

通常，当用户登录时，您会创建一个包含该用户所有相关信息的用户对象。然后，您不必每次想了解有关用户的信息时都访问数据库。

```
class User
{
  string role;
  //.. other user attributes.
} 
```

您的命令应该有所不同，因为您只需要有关一个用户的信息：

```
comm = new SqlCeCommand("Select * from [user] where user_id=1", conn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:49:11.697

> 我已经尝试通过在 Main_load 本身上放置一个中断来调试代码，但是当我运行它并登录时，它会完全忽略 Main_load 来显示主页。

这通常意味着您的方法`Main_Load`未绑定到表单的[Load事件。](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)检查您如何处理表单[加载](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)事件（如果您处理它）并解决问题。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:58:44.133

我不明白这怎么可能抛出一个`SqlException`; 有两个原因：

1.  您编写的 SQL 似乎不正确，并且

2.  如果它是正确的，您似乎会期待多重结果（使用`*`），在这种情况下，使用`while (reader.Read()) { ... }`将遍历每个结果并相应地设置逻辑。因此，如果您拥有的第一个用户是`USER`第二个用户`Administrator`，则按钮启用状态将根据最后访问的值设置 - 而不是您想要的。

相反，设置一个静态实用程序类来帮助进行 SQL 查询。所以你会有一些像

```
public static calss Utilities
{
    public static bool SQLResult(SqlConnection conn, string strSQL)
    {
        try
        {
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = conn;
            cmd.CommandText = strSQL;
            strResult = cmd.ExecuteScalar().ToString();
        }
        catch (Exception e)
        {
            // Return error or display.
            return false;
        }
        return true;
    }
} 
```

该方法将期望返回单个文本结果。

现在您要使用的 SQL 是

```
SELECT SYSTEM_USER;
GO 
```

这将返回当前登录的用户；执行查询的用户。对我来说，它返回'ServerName\Administrator'。所以你的逻辑可能是

```
string sql = "SELECT SYSTEM_USER;";
string result = Utilities.SQLResult(someValidConnection, sql);
if (result.Contains("Administrator"))
    // Do stuff. 
```

我希望这有帮助。

*笔记。以上并未考虑 SQL 注入攻击或其他安全问题。对于大多数基本的 WinForm 应用程序（非基于 Web 的），这些安全问题是 IMO 不值得担心的。*

# android - 没有根点的android崩溃异常

> ID：14195243
> 
> 赞同：1
> 
> 时间：2013-01-07T11:43:43.620
> 
> 标签：android, exception, android-viewpager

当我遇到异常但不知道在哪里寻找时该怎么办

我的意思是我知道它在我的 NewHomeTabActivity 中，但我应该从哪里开始搜索。我尝试插入一些日志行和断点，但仍然无法解决根本原因

```
01-07 13:39:33.133: W/dalvikvm(12350): threadid=1: thread exiting with uncaught exception (group=0x40c471f8) 
01-07 13:39:33.133: W/System.err(12350): java.lang.IllegalStateException: Could not find a method onTabClicked(View) in the activity class att.uc.ui.screen.NewHomeTabActivity for onClick handler on view class android.widget.RelativeLayout with id 'tab_dialer' 
01-07 13:39:33.138: W/System.err(12350): at android.view.View$1.onClick(View.java:3085) 
01-07 13:39:33.143: W/System.err(12350): at android.view.View.performClick(View.java:3620) 
01-07 13:39:33.143: W/System.err(12350): at android.view.View$PerformClick.run(View.java:14292) 
01-07 13:39:33.143: W/System.err(12350): at android.os.Handler.handleCallback(Handler.java:605) 
01-07 13:39:33.148: W/System.err(12350): at android.os.Handler.dispatchMessage(Handler.java:92) 
01-07 13:39:33.148: W/System.err(12350): at android.os.Looper.loop(Looper.java:137) 
01-07 13:39:33.148: W/System.err(12350): at android.app.ActivityThread.main(ActivityThread.java:4507) 
01-07 13:39:33.153: W/System.err(12350): at java.lang.reflect.Method.invokeNative(Native Method) 
01-07 13:39:33.153: W/System.err(12350): at java.lang.reflect.Method.invoke(Method.java:511) 
01-07 13:39:33.153: W/System.err(12350): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980) 
01-07 13:39:33.158: W/System.err(12350): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747) 
01-07 13:39:33.158: W/System.err(12350): at dalvik.system.NativeStart.main(Native Method) 
01-07 13:39:33.158: W/System.err(12350): Caused by: java.lang.NoSuchMethodException: onTabClicked [class android.view.View] 
01-07 13:39:33.163: W/System.err(12350): at java.lang.Class.getConstructorOrMethod(Class.java:460) 
01-07 13:39:33.163: W/System.err(12350): at java.lang.Class.getMethod(Class.java:915) 
01-07 13:39:33.168: W/System.err(12350): at android.view.View$1.onClick(View.java:3078) 
01-07 13:39:33.173: W/System.err(12350): ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:51:07.873

从下到上逐行阅读 sacttrace 以获得相关信息。它崩溃是因为它在您的活动中
找不到该方法。`onTabClicked(View)`

我假设你有一个 XML 控件，它被赋予了`onClick`属性，如下所示：

```
android:onClick="onTabClicked" 
```

如果是这样，那么您的活动应该有一个调用的方法，该方法`onTabClicked(View view)`接受 type 的参数`View`，这是强制性的。像这样：

```
public void onTabClicked(View view){
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:52:22.550

日志表明它是一个 RunTimeException ，因此您无法通过放置日志找到它，在 RunTime 找不到您使用的 onTabClicked 方法（可能在 xml 文件中定义），这可能是因为您在针对较低版本构建时调用了更高的 sdk 版本sdk 版本，您可以针对更高的 sdk 版本或使用替代方法进行 onclick

类似的链接可以建议一个可能的解决方案[Android TabWidget 检测点击当前选项卡](https://stackoverflow.com/questions/4337514/android-tabwidget-detect-click-on-current-tab?tab=active#tab-top)

# java - 如何像这样在 Java 中获取日期和时间 02-Oct-12 12:58:20 AM

> ID：14195247
> 
> 赞同：2
> 
> 时间：2013-01-07T11:43:51.887
> 
> 标签：java, datetime

我试过这样的事情

```
package com.poc;

import java.util.Date;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;

public class GetCurrentDateTime {
  public static void main(String[] args) {

       DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
       //get current date time with Date()
       Date date = new Date();
       System.out.println(dateFormat.format(date));

       //get current date time with Calendar()
       Calendar cal = Calendar.getInstance();
       System.out.println(dateFormat.format(cal.getTime()));

  }
} 
```

我`2013-01-07 17:12:27`的输出是：但希望输出是这样的`2013-Jan-07 17:12:27 PM`

如何在java中做到这一点？

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:45:26.653

你的格式应该是

```
yyyy-MMM-dd hh:mm:ss a 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T11:51:25.023

你的格式应该是

```
new SimpleDateFormat("dd-MMM-yy hh:mm:ss a"); 
```

**2013 年 1 月 7 日下午 7:20:02**

```
new SimpleDateFormat("dd-MMM-yy HH:mm:ss"); 
```

**2013 年 1 月 7 日 19:20:02**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T11:47:39.003

改用这个：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MMM-dd hh:mm:ss a"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T11:50:19.980

看[`Class SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

> **Month**：如果模式字母的数量为 3 个或更多，则将月份解释为文本；否则，它被解释为一个数字。

所以`MM`被解释为数字和`MMM`或更多被解释为文本（即月份*名称*）

# python - 从 html 字符串中删除 python 正则表达式中不需要的模式

> ID：14195248
> 
> 赞同：-1
> 
> 时间：2013-01-07T11:43:52.737
> 
> 标签：python, regex

我必须从 html 解析自定义 vin 号

我也得到了一些错误的匹配号码。

```
 .....
 <meta name="google-site-verification" content="l4du7Ao9MH6TM2nJ5L54qqWoXWcuOkdeqhXCADgKErc" />
 <meta name="msvalidate.01" content="FAD32C2469C51767894EB50068D37244" />
     .....
  <div class="hproduct auto chevrolet" data-classification="primary" data- vin="3GNDA23D18S647673" data-make="Chevrolet" >

 .....
 </dd></dl><dl class='vin'><dt>VIN:</dt><dd>3GNDA23D18S647673</dd></dl> <span 
 ....... etc.... 
```

这是包含所需部分的 html

当我在 python 中应用我的正则表达式时

```
import re
re.findall("([0-9A-Z]{8}[0-9xX]{1}[1-9A-Y^U]{1}[0-9A-Z]{2}[0-9]{5})",html) 
```

我得到了所需的结果以及不需要的数据，例如

```
['FAD32C2469C517678',
 '3GNDA23D18S647673',
 '3GNDA23D18S647673'] 
```

FAD32C2469C517678 是不需要的。

如何在 python 的正则表达式中摆脱这种不需要的模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:50:56.297

请使用解析器：

```
import lxml.html as lh
doc=lh.fromstring(html)
doc.xpath('.//@vin') 
```

**出去**

```
["3GNDA23D18S647673"] 
```

编辑：如果 vin 始终是一个属性，但您不知道名称，您可以尝试：

```
doc.xpath('.//@*[string-length() = "17"]') # get's attrs with lenght 17 
```

或使用正则表达式，如果你真的，真的必须：

```
import re
re.findall('"([A-Z0-9]{17})"',html) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:49:53.323

您确实应该使用**HTML 解析器**，但为了快速修复，请使用 regexp `(?<=vin=")[^"]+`：

```
>>> import re
>>> html = """.....
...  <meta name="google-site-verification" content="l4du7Ao9MH6TM2nJ5L54qqWoXWcuOkdeqhXCADgKErc" />
...  <meta name="msvalidate.01" content="FAD32C2469C51767894EB50068D37244" />
...      .....
...   <div class="hproduct auto chevrolet" data-classification="primary" data- vin="3GNDA23D18S647673" data-make="Chevrolet" >
... 
...  .....
...  </dd></dl><dl class='vin'><dt>VIN:</dt><dd>3GNDA23D18S647673</dd></dl> <span 
...  ....... etc...."""

>>> re.findall('(?<=vin=")[^"]+',html)
['3GNDA23D18S647673'] 
```

这使用[正向后](http://www.regular-expressions.info/lookaround.html)向匹配`[^"]+` *（一个或多个字符不是双引号）* after 的字符串`vin="`。

如果你想在你的比赛中更严格，你可以将你的正则表达式与积极的lookbehind结合使用：

```
re.findall('(?<=vin=")[0-9A-Z]{8}[0-9xX]{1}[1-9A-Y^U]{1}[0-9A-Z]{2}[0-9]{5}',html)
['3GNDA23D18S647673'] 
```

# php - 包括路径的工作

> ID：14195254
> 
> 赞同：0
> 
> 时间：2013-01-07T11:44:24.813
> 
> 标签：php

我正在我的开发服务器上建立一个旧网站，我遇到了一些 PHP 错误消息，它们如下；

文件路径**/php/register_company.php**

> 警告：include(./_mrprivate/includes/dblogin.php)：无法打开流：第 29 行的 /Sites/Martin James/_mrprivate/includes/dbaccess.php 中没有此类文件或目录
> 
> 警告：include()：无法在 /Sites/Martin James/_mrprivate/includes/ 中打开 './_mrprivate/includes/dblogin.php' 以包含 (include_path='.:/usr/local/php5/lib/php')第 29 行的 dbaccess.php
> 
> 警告：include(./_mrprivate/includes/dbapplogin.php)：未能打开流：第 30 行的 /Sites/Martin James/_mrprivate/includes/dbaccess.php 中没有此类文件或目录
> 
> 警告：include()：无法在 /Sites/Martin James/_mrprivate/includes/ 中打开 './_mrprivate/includes/dbapplogin.php' 以包含 (include_path='.:/usr/local/php5/lib/php')第 30 行的 dbaccess.php

我玩过文件路径，但错误消息丝毫没有改变！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:00:51.463

> 警告：include(./_mrprivate/includes/dblogin.php)：无法打开流：第 29 行的 /Sites/Martin James/_mrprivate/includes/dbaccess.php 中没有此类文件或目录

您的代码试图包含

```
/Sites/Martin James/_mrprivate/includes/./_mrprivate/includes/dblogin.php 
```

但我怀疑你真的想包括

```
/Sites/Martin James/_mrprivate/includes/dblogin.php 
```

不要更改您的 include_path，使用正确的相对路径（即相对于包含 include/require 指令的文件）或绝对路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:56:45.973

我假设你有这样的代码：

```
include('./_mrprivate/includes/dblogin.php') 
```

使用您配置的包含路径：

```
include_path='.:/usr/local/php5/lib/php' 
```

无论如何，您都不需要`.`在前面添加。然而，由于这通常是导致问题的原因，因此最好将其与魔术常量`__FILE__`和 (PHP 5.3+)联系起来`__DIR__`：

```
include(dirname(__FILE__) . '/_mrprivate/includes/dblogin.php'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:51:08.017

更改数据库中的站点名称..我不确定，但它可能会帮助你

# gridview - 在gridview中绑定组合框

> ID：14195257
> 
> 赞同：3
> 
> 时间：2013-01-07T11:44:40.787
> 
> 标签：gridview, binding, combobox, gridviewcolumn

我有一个包含网格视图的列表视图。我有一个带有设备列表的单独列表。每个设备都有一个连接器列表。每个连接器都有一个标签列表。每个标签都有一个属性 X。

目前，当我从设备列表中选择设备时，我在 gridview 中显示设备的连接器。gridview 包含一个带有 ConnectorName 的列和一个带有 Combobox 的列，假设显示每个 Tag 的 X 属性。我想用 Tags.X 属性填充每个连接器的每个组合框。

代码如下：

// GridView 保存设备列表中所选设备的连接器，其中包含两列：连接器名称和组合框以显示每个连接器的 tags.X 值

```
<ListView Grid.Row="2"
            ItemsSource="{Binding ElementName=lstDevices, Path=SelectedItem.Connectors}"
            Background="Transparent"
            SelectionChanged="ListView_SelectionChanged">
    <ListView.View>
        <GridView>
            <GridViewColumn Width="200"
                            Header="Connector Name"
                            DisplayMemberBinding="{Binding ConnectorName}"/>
            <GridViewColumn>
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <ComboBox IsSynchronizedWithCurrentItem="True"
                                    ItemsSource="{Binding SelectedItem.Connectors}"
                                    DisplayMemberPath="{Binding Connector.IOTags.InputSignalType}"/>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

有任何想法吗？

谢谢，伊多

# asp.net-mvc - MVC：如何在不刷新整个页面的情况下在网格中插入项目

> ID：14195264
> 
> 赞同：1
> 
> 时间：2013-01-07T11:45:10.380
> 
> 标签：asp.net-mvc

我有这个视图，我在其中创建了一个添加到数据库中的新公司。该视图分为 2 个部分，左侧和右侧。在右侧，我想输入该公司的交易。一家公司可以有 1 笔或多笔交易，这包括 1 笔主要交易，以及 0 到许多其他交易。当用户添加其他交易时，每笔交易将被添加到下面的列表中。我还没有为此输入代码。对于列表中的每笔交易，他可以选择将其删除。当他输入了所有细节后，他点击提交，所有数据都保存在数据库中。现在我正在考虑为其他交易添加部分视图，但我想知道如何做到这一点，并且每次从自动完成中选择交易时，数据都会发布到控制器方法并返回部分视图。但这将清除左侧部分中的数据。那么我该怎么做呢？我的观点看起来像

```
@model SCD.ViewModels.SubcontractorViewModel

@{
    ViewBag.Title = "Create";
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Create Subcontractor</legend>
        <section class="wrapper">
            <section class="leftside">
                <table class="formTable">
                    <tr>
                        <td class="leftCell">@Html.LabelFor(model => model.Subcontractor.CompanyName)</td>
                        <td class="rightCell">@Html.TextBoxFor(model => model.Subcontractor.CompanyName, new { @style = "width: 300px;" })</td>
                    </tr>
                    <tr>
                        <td class="leftCell">@Html.LabelFor(model => model.AddressViewModel.Address1)</td>
                        <td class="rightCell">@Html.TextBoxFor(model => model.AddressViewModel.Address1, new { @style = "width: 300px;" })</td>
                    </tr>
                    <tr>
                        <td colspan="2" style="text-align: center;" class="rightCell"><input type="submit" value="Save"/></td>
                    </tr>
                </table>
                <div style="float: left">@Html.ActionLink(" ", "List", null, new { @class = "buttonBackToList" })</div>
            </section>
            <section class="rightside">
                <table class="formTable">
                    <tr>
                        <td class="leftCell">@Html.LabelFor(model => model.PrimaryTrade)</td>
                        <td class="rightCell"><input type="search" name="searchPrimaryTrade" id="searchPrimaryTrade" data-scd-autocomplete="@Url.Action("AutocompletePrimaryTrade", "DataService")" style = "width: 300px;"/>
                            <input type="button" id="ResetPrimaryTrade" value="Reset"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="leftCell">@Html.LabelFor(model => model.OtherTrades)</td>
                        <td class="rightCell"><input type="search" name="searchOtherTrade" id="searchOtherTrade" data-scd-autocomplete="@Url.Action("AutocompleteOtherTrade", "DataService")" style = "width: 300px;"/>
                            <input type="button" id="ResetOtherTrade" value="Reset"/>
                        </td>
                    </tr>
                </table>
            </section>
        </section>

    </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:50:20.793

[Ajax](http://api.jquery.com/jQuery.ajax/)是您的答案，当您不想重新加载页面时，使用客户端 ajax 与服务器通信是唯一的选择。

我会使用 jQuery 或通过 ajax 添加行，这会将它们插入到您的数据库中并再次返回填充的模型并将其作为`PartialView()`. 然后，您的 ajax 将`onSuccess`：用返回的结果替换您的 tableID。

所以你的 jQuery 会是这样的：

```
$('.rightside').children('.formTable').replaceWith(theReturnedPartialFromAjaxCall); 
```

如果要添加动态行，有两个选项：

在添加一行时，您可以调用 ajax 请求，该请求还将向数据库添加一个空白行，然后重新填充您的模型并返回部分视图。这将在新的空白行上设置模型绑定，删除空白行或任何行也可以通过 ajax 完成，因为该行现在有一个 ID。但是，请确保在遍历每一行时将 ID 作为隐藏字段放入。

或（不是首选方式，但可能是您必须执行保存时需要执行的操作）

您可以在保存中捕获表单集合，如果有多行则将其存储在数组中

```
public ActionResult Save(MyModel model, FormCollection frm) {
    String[] name = frm["name"].Split(',');
} 
```

我不喜欢这种方式，因为它容易出错，第一种方法将允许您绑定 MVC 的模型验证

# objective-c - Facebook OpenGraph Places 类别和描述

> ID：14195272
> 
> 赞同：0
> 
> 时间：2013-01-07T11:45:38.360
> 
> 标签：objective-c, ios, facebook, facebook-graph-api

我正在研究 Facebook OpenGraph，我想知道 FBGraphPlace 是否继承了从另一个对象继承的某种描述字段。我需要一些关于我使用 iOS Facebook SDK 拉取的场所的基本信息。

我试过的代码是这样的：（地点是一个 FBGraphObject）

```
[venue objectForKey:@"description"]; 
```

但它返回一个空字符串。

第二个问题是开放图返回的场所类别几乎总是“本地企业”，而在 Facebook 上，它们具有更具体的类别，例如“披萨店”或“餐厅”。我正在访问该类别：

```
myString = venue.category; 
```

提前谢谢你的帮助！

# objective-c - Segue 到新导航控制器动画后弹出键盘如何完成

> ID：14195273
> 
> 赞同：0
> 
> 时间：2013-01-07T11:45:41.917
> 
> 标签：objective-c, ios

我使用自定义 segue 从 tableview 到详细视图控制器。

```
 @implementation QuickNoteFlipSegue

- (void) perform {

    UIViewController *src = (UIViewController *) self.sourceViewController;
    UIViewController *dst = (UIViewController *) self.destinationViewController;
    dst.navigationItem.hidesBackButton = YES;
    [UIView transitionWithView:src.navigationController.view duration:1.00
                       options:UIViewAnimationOptionTransitionCurlUp
                    animations:^{
                        [src.navigationController pushViewController:dst animated:NO];
                    }
                    completion:^(BOOL finished){
                        if (finished) {
                                                        }
                    }];

}

@end 
```

转换完成后我想做什么，弹出我的文本视图的键盘。

我目前通过调用来做到这一点

> [textView 成为FirstResponder];

这会弹出键盘 OK 但在过渡动画完成之前。如何在弹出键盘之前检测动画何时完成？

我也许应该放一些东西是动画的完成，但是如何让自定义 segue 知道它的目的地中的 textview 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:55:18.477

做：

```
-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [textView becomeFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:28:05.900

添加一个方法到你的`DestinationViewController`：

```
-(void)openKeyboard
{
    [textView becomeFirstResponder];
} 
```

然后改变你的`perform`方法：

```
- (void) perform {

    UIViewController *src = (UIViewController *) self.sourceViewController;
    DestinationViewController *dst = (DestinationViewController *) self.destinationViewController;
    dst.navigationItem.hidesBackButton = YES;
    [UIView transitionWithView:src.navigationController.view duration:1.00
                       options:UIViewAnimationOptionTransitionCurlUp
                    animations:^{
                        [src.navigationController pushViewController:dst animated:NO];
                    }
                    completion:^(BOOL finished){
                        if (finished) {
                            [dst openKeyboard];
                        }
                    }];
} 
```

# vb.net - 如何检查 VB.NET 代码中 Access SysCmd 失败的原因？

> ID：14195275
> 
> 赞同：2
> 
> 时间：2013-01-07T11:45:51.370
> 
> 标签：vb.net, ms-access

我们有一个在 VB.NET 和客户端的 VBA 中开发的应用程序。在 VB.NET 中开发的安装程序自定义操作中，我们使用 Access 的 SysCmd 603 将 mdb 文件编译为 mde，这是著名的未记录的。示例代码如下所示：

```
a = CreateObject("Access.Application")
If a.SysCmd(603, PATH_TO_BXB_FILE, PATH_TO_BXE_FILE) = 0 Then
    MsgBox("Fail to compile to MDB file")
End If 
```

这段代码直到最近才起作用。现在 Syscmd 调用返回 0，表示编译失败。但是由于我不熟悉Access编程，我不知道如何进一步检查导致此失败的原因。在此链接[Application.SysCmd Method (Access)](http://msdn.microsoft.com/en-us/library/office/ff193809.aspx)中，它说如果失败，它将生成运行时错误，但我不知道如何检查此错误。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:56:35.190

[syscmd](http://msdn.microsoft.com/en-us/library/office/aa199129%28v=office.10%29.aspx)的 603 参数未记录。它会因多种原因而失败，例如，在 VBA 下运行，如果您不使用单独的 MS Access 实例，它将失败。在[此](http://social.msdn.microsoft.com/Forums/en-US/accessdev/thread/6d0133ed-b8a8-46bb-aa48-bd40c9b41231/)，其他失败的原因如下：

> *   当它用于在单独的 Access 数据库（与解决方案数据库分开）中运行的 VBA 代码中时；
> *   当解决方案数据库关闭时；和
> *   当解决方案数据库中的 VBA 代码中没有语法错误时。

该文档还列出了这些参考：

> Douglas Steele 在这里提出了一个有趣的观点：
> [http](http://www.pcreview.co.uk/forums/thread-2621925.php)
> ://www.pcreview.co.uk/forums/thread-2621925.php Tony Toews 在这里调查了未记录的 SysCmds：
> [https ://msmvps.com/blogs/access/archive/2007/ 08/19/so-what-are-the-undocumented-syscmd-items.aspx](https://msmvps.com/blogs/access/archive/2007/08/19/so-what-are-the-undocumented-syscmd-items.aspx)
> Tony Toews 还链接到此页面：
> [http ://www.everythingaccess.com/tutorials.asp?ID=Undocumented-SysCmd-Functions](http://www.everythingaccess.com/tutorials.asp?ID=Undocumented-SysCmd-Functions)

# jquery - 使用 Mika Tuupola 的视口选择器时设置阈值

> ID：14195281
> 
> 赞同：0
> 
> 时间：2013-01-07T11:46:27.547
> 
> 标签：jquery, jquery-selectors, viewport

我目前正在使用水平导航的投资组合网站 (http://espaun256.prompt-dev.com/moving/)，我正在使用 Mika Tuupola 的视口选择器 (http://www.appelsiini.net/projects /viewport) 设置最靠近屏幕中心的元素。

到目前为止，我有这个：

```
$('#wrap').bind('scrollstop', function(){
    var inview = $('article.post:in-viewport').get().length,
        center = Math.round(inview/2)-1;

    $('article.post:in-viewport:eq('+center+')').addClass('activo');
}); 
```

即使我接近得到我正在寻找的东西，我知道必须有更好和更清洁的方法来做到这一点......

...例如使用相同的视口选择器插件设置左右屏幕阈值...任何帮助弄清楚如何设置阈值将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:36:38.510

好的！所以...我在这里发现了 Mika Tuupola 的视口选择器的出色改进： [https](https://github.com/theluk/jquery_viewport/tree/d7ed501b5eac2bed90253c134df611cd2d843112) ://github.com/theluk/jquery_viewport/tree/d7ed501b5eac2bed90253c134df611cd2d843112 它增加了将阈值作为选择器参数传递的能力...

谢谢 theluk [1](https://github.com/theluk)的帮助。

所以，我来到了这个：

```
$('#wrap').bind('scrollstop', function(){
    var inviewID = $('article.post:not(:left-of-screen('+ whatever-treshold +'))').attr('id');
    $('#'+inviewID).addClass('activo');
}); 
```

...而且效果更好！

# c++ - 从 IA-32 中的程序集访问 C++ 中的函数参数

> ID：14195283
> 
> 赞同：2
> 
> 时间：2013-01-07T11:46:35.827
> 
> 标签：c++, function, assembly, x86, 64-bit

我一直在学习 IA-32 汇编编程。所以我想在汇编中编写一个函数并从 C++ 中调用它。

我正在关注的教程实际上是针对 x64 程序集的。但我正在研究 IA-32。**在 x64 中，它表示函数参数存储在 RCX、RDX、R8、R9 等寄存器中。**

但是稍微搜索一下，我可以理解**在 IA-32 中，参数存储在堆栈中，而不是寄存器中。**

**下面是我的 C++ 代码：**

```
#include <iostream>
#include <conio.h>

using namespace std;
extern "C" int PassParam(int a,int b);

int main()
{
    cout << "z is " << PassParam(15,13) << endl;
    _getch();
    return 0;
} 
```

下面是 PassParam() 函数的汇编代码（它只是添加了两个参数，仅此而已。仅用于学习目的）：

**汇编中的 PassParam() ：**

```
.model C,flat
.code
PassParam proc
    mov eax,[ebp-212]
    add eax,[ebp-216]
    ret
PassParam endp
end 
```

在我的汇编代码中，您可以看到我将第一个参数从 [ebp-212] 移至 eax。该值的获得如下：

我用 C++ 本身编写了 PassParam() 函数并将其反汇编。然后检查 ebp 在哪里以及第二个参数存储在哪里（参数从右到左存储）。我可以看到有 212 的差异，所以这就是我获得该值的方式。然后像往常一样，第一个参数在 4 个字节后存储。它工作正常。

**问题 ：**

**这是从程序集中访问参数的正确方法吗？我的意思是，是否总是 [ebp-212] 存储参数？**

**如果没有，任何人都可以解释将参数从 C++ 传递到程序集的正确方法吗？**

**笔记 ：**

我在 Windows 7 机器上使用 Visual C++ 2010。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T12:13:54.273

在 32 位体系结构上，它取决于调用约定，例如 Windows 有两者`__fastcall`，`__thiscall`并且使用寄存器和堆栈参数，并且`__cdecl`使用`__stdcall`堆栈参数，但在谁进行清理方面有所不同。[MSDN在这里](http://msdn.microsoft.com/en-us/library/984x0h58.aspx)有一个很好的列表（或者更[面向汇编的版本](http://msdn.microsoft.com/en-us/library/ff561502.aspx)）。请注意，FPU/SSE 操作也有自己[的约定](http://msdn.microsoft.com/en-us/library/ha59cbfz.aspx)。

为了简单起见，请尝试使用`__stdcall`所有内容，这允许您使用堆栈帧通过 来访问 args `MOV r32,[EBP+4+(arg_index * 4)]`，或者如果您不使用堆栈帧，则可以使用`MOV r32,[ESP+local_stack_offset+(arg_index * 4)]`. [此处](http://msdn.microsoft.com/en-us/library/ff538086.aspx)带注释的 C++ -> x86 Assembly 示例应该会有所帮助。

* * *

举个简单的例子，假设我们`MulAdd`在汇编中有函数，使用 C++ 原型`int __stdcall MulAdd(int base, int mul, int add)`，它看起来像：

```
MOV EAX,[ESP+4] //get the first arg('base') off the stack
MOV ECX,[ESP+8] //get the second arg('mul') off the stack
IMUL EAX,ECX //base * mul
MOV ECX,[ESP+12] //get arg 3 off the stack
ADD EAX,ECX
RETN 12 //cleanup the 3 args and return 
```

或者，如果您使用堆栈帧：

```
PUSH EBP
MOV EBP,ESP //save the stack
MOV EAX,[EBP+8] //get the first arg('base') off the stack
MOV ECX,[EBP+12] //get the second arg('mul') off the stack
IMUL EAX,ECX //base * mul
MOV ECX,[EBP+16] //get arg 3 off the stack
ADD EAX,ECX
MOV ESP,EBP //restore the stack
POP EBP
RETN //return to caller 
```

`PUSH`使用堆栈帧避免需要通过 args、溢出或寄存器或为局部变量进行的堆栈分配来调整对堆栈所做的更改。它的缺点是它减少了您必须使用的寄存器数量。

# java - 使用特殊字符加密和解密字符串

> ID：14195287
> 
> 赞同：2
> 
> 时间：2013-01-07T11:46:56.867
> 
> 标签：java, encryption

我正在尝试加密客户端的名称（字符串格式），将其存储在数据库中，然后检索它并解密它。由于我需要避免使用任何第三方库，因此我使用了 Java 发行版中随时可用的类。

该过程运行良好，直到我遇到一个带有特殊字符的名称（Ascii：48910）。这显示为问号（？）。加密和解密都很顺利，但解密后特殊字符被问号替换。

所以我将编码格式从*'UTF-8'*更改为*'ISO-8859-1'*。这解决了显示问题，但解密后特殊字符仍然被替换。

正在使用的代码和输出如下（我已经删除了不必要的代码）：

```
package crypt;

import java.io.PrintStream;
import java.nio.charset.Charset;
import java.security.spec.KeySpec;

import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.DESedeKeySpec;
import javax.xml.bind.DatatypeConverter;

public class SecretKeyEncryptionExample {

    private static final String FORMAT = "ISO-8859-1";
    public static final String DESEDE_ENCRYPTION_SCHEME = "DESede";

    private KeySpec ks;
    private SecretKeyFactory skf;
    private Cipher cipher;
    SecretKey key;

    public SecretKeyEncryptionExample() throws Exception {

        String myEncryptionKey = "4A144BEBF7E5E7B7DCF26491AE79C54C768C514CF1547D23";

        ks = new DESedeKeySpec(myEncryptionKey.getBytes(FORMAT));
        skf = SecretKeyFactory.getInstance(DESEDE_ENCRYPTION_SCHEME);
        cipher = Cipher.getInstance(DESEDE_ENCRYPTION_SCHEME);
        key = skf.generateSecret(ks);
    }

    public String encrypt(String unencryptedString) throws Exception {

        String encryptedString = null;
        cipher.init(Cipher.ENCRYPT_MODE, key);
        byte[] plainText = unencryptedString.getBytes(FORMAT);
        byte[] encryptedText = cipher.doFinal(plainText);
        encryptedString = DatatypeConverter.printBase64Binary(encryptedText);

        return encryptedString;
    }

    public String decrypt(String encryptedString)  throws Exception {

        String decryptedText = null;
        cipher.init(Cipher.DECRYPT_MODE, key);
        byte[] encryptedText = DatatypeConverter.parseBase64Binary(encryptedString);
        byte[] plainText = cipher.doFinal(encryptedText);
        decryptedText = new String(plainText);

        return decryptedText;
    }

    public static void main(String args[]) throws Exception {

        SecretKeyEncryptionExample td = new SecretKeyEncryptionExample();

        String target = "Expendable" + getSpecialCharacter(49810) + "s Pte Ltd";

        String encrypted = td.encrypt(target);
        String decrypted = td.decrypt(encrypted);

        PrintStream out = new PrintStream(System.out, true, FORMAT);
        out.println("String To Encrypt: " + target);
        out.println("Encrypted String: " + encrypted);
        out.println("Decrypted String: " + decrypted);

    }

    public static String getSpecialCharacter(int code) {

        Charset charSet = Charset.forName(FORMAT);
        String specialCharacter = new String(new byte[] { (byte) code }, charSet);
        specialCharacter = String.format("%s", specialCharacter);

        return specialCharacter;
    }

} 
```

输出：

```
String To Encrypt: Expendable’s Pte Ltd
Encrypted String: TAAJuF7KOmBZHBXFHsW0FB9YBwH7Tcif
Decrypted String: Expendable?s Pte Ltd 
```

请告知如何在不替换特殊字符的情况下进行解密。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:00:24.823

我认为每次从字符串到字节数组并返回时都应该指定编码。特别是，这一行：

```
decryptedText = new String(plainText); 
```

应该读：

```
decryptedText = new String(plainText, FORMAT); 
```

否则，您将依赖环境的编码，这很可能与 FORMAT 不同，并导致特殊字符被打印为“？”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:57:53.293

了解一些可能有用的东西。

```
System.out.println((int) getSpecialCharacter(49810).charAt(0)); 
```

印刷

```
146 
```

这是您在此处实际创建的角色。

```
System.out.println("The Falcon" + (char) 146 + "s Hangar Pte Ltd"); 
```

印刷

```
The Falcon’s Hangar Pte Ltd 
```

我认为问题在于您使用 ISO-8859-1 字符集获取字节

```
byte[] plainText = unencryptedString.getBytes(FORMAT); 
```

但是当您将其转回字符串时，您将使用系统默认值。

```
decryptedText = new String(plainText); 
```

我怀疑这应该是

```
decryptedText = new String(plainText, FORMAT); // use the same Charset 
```

# visual-c++ - bmp图像格式可以处理透明度吗

> ID：14195289
> 
> 赞同：12
> 
> 时间：2013-01-07T11:47:10.460
> 
> 标签：visual-c++, opengl, glut, soil

我正在制作这个具有按钮、按钮容器、聊天框等的 C++ 程序，并且我想用纹理将它包裹起来。

我想为我制作的所有矩形生成平滑的边缘，并且我不希望顶点绘图方法为它完成工作，因为它消耗更多的 CPU 使用率并且看起来不太好，我不知道是否它可以使用纹理坐标（即*glTexCoord(u, v)*和*glVertex2f(x, y)* w/c 应该只有 4，因为它是一个四边形）

我曾经使用**SDL_LoadBMP()** w/c 加载纹理，只能加载*.bmp*的格式。（我不确定，因为那里只说 LoadBMP）。

# 所以我的问题是：

*   *.bmp*格式可以处理透明度吗？如果是这样，该怎么做？

*   你能告诉我一些使用[SOIL](http://www.lonesock.net/soil.html)加载*.gif*格式的图像或任何其他可以处理图像透明度的格式的代码示例吗？

*   四边形可以在不绘制背景的情况下处理六边形或星形等不规则/多边形形状吗？

# 附加问题

*如何导入通过c ++ opengl呈现的原始文本框，以便我可以将那里的文本复制到剪贴板？至于我程序中的聊天会话。

* * *

我制作了自己的库，该库使用 GL_POINTS 绘制文本，并且在调整窗口大小时看起来不太好，因为这些点已展开。需要`const char*`避免文本，`#include <*string*>`因为我希望我的程序不依赖于 C++ 的核心功能。

所以更好的解决方案是使用位图来绘制它。

有些人建议使用图像来绘制它，所以我真的需要透明度的东西，因为我希望它只使用四边形来绘制。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-12T03:43:40.520

是的，位图格式*确实*支持透明度。

这取决于压缩方式，默认`RGB`方式支持 24 位颜色，但`BITFIELDS`压缩支持 32 位颜色（24 位 + alpha 通道）。

您可以在[http://en.wikipedia.org/wiki/BMP_file_format阅读更多内容](http://en.wikipedia.org/wiki/BMP_file_format)

我在 Lime 项目中成功使用它，这是用 Haxe 编写的实现：[https ://github.com/openfl/lime/blob/4adb7d638d15612e2542ae3a0ef581a786d21183/src/lime/_internal/format/BMP.hx](https://github.com/openfl/lime/blob/4adb7d638d15612e2542ae3a0ef581a786d21183/src/lime/_internal/format/BMP.hx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:05:28.320

这个答案只解决了 bmp 文件是否可以处理透明度，以及如何使用 SOIL 加载 png 文件，我认为如果你通过推理进一步看，它也会向你展示如何加载 gif 文件。根据[这篇 wikipedia 文章，bmp 是一种通过](https://en.wikipedia.org/wiki/Transparency_%28graphic%29)[Alpha 通道](https://en.wikipedia.org/wiki/Alpha_channel)支持透明度的文件类型。但根据[this](https://stackoverflow.com/questions/4758833/saving-bitmap-as-32bpp-doesnt-keep-transparency) SO article它没有。以我自己的经验，我还没有找到使 bmp 透明度起作用的方法。所以理论上 32 位 bmp 文件应该支持透明度，但我对此表示怀疑。（也许我会吃我的话？）

好的，来自[SOIL 网站](http://www.lonesock.net/soil.html)，这段代码告诉了如何加载处理透明度的 png 文件：

```
/* load an image file directly as a new OpenGL texture */
 GLuint tex_2d = SOIL_load_OGL_texture
 (
       "img.png"
       SOIL_LOAD_AUTO,
       SOIL_CREATE_NEW_ID,
       SOIL_FLAG_MIPMAPS | SOIL_FLAG_INVERT_Y | SOIL_FLAG_NTSC_SAFE_RGB |
       SOIL_FLAG_COMPRESS_TO_DXT
 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-11T11:57:44.703

BMP 透明度在 Photoshop 中是可能的，至少具有 24 位深度。它不会在 Matlab 中作为“imwrite”选项出现。

# codeigniter - Codeigniter - 挂钩记录 GET / POST 请求

> ID：14195291
> 
> 赞同：8
> 
> 时间：2013-01-07T11:47:31.633
> 
> 标签：codeigniter, post, logging, get, hook

客户要求记录所有 GET/POST 请求并将其存储 90 天以供其应用。我写了一个 HOOK，它似乎记录了一些GETS / POSTS，但数据比我预期的要少。例如，在提交表单数据时，条目似乎没有放在日志中。有没有人写过类似的东西？

到目前为止，这是我的版本：

```
class Logging {

    function __construct() {
        $this->CI =& get_instance();
    }

    function index() {
        $this->CI->load->model('Logging_m');
        $this->CI->load->model('Portal_m');

        //get POST and GET values for LOGGING        
        $post = trim(print_r($this->CI->input->post(), TRUE));
        $get = trim(print_r($this->CI->input->get(), TRUE));

        $this->CI->Logging_m->logPageView(array(
                'portal_id' => $this->CI->Portal_m->getPortalId(),
                'user_id' => (!$this->CI->User_m->getUserId() ? NULL : $this->CI->User_m->getUserId()),
                'domain' => $_SERVER["SERVER_NAME"],
                'page' => $_SERVER["REQUEST_URI"],
                'post' => $post,
                'get' => $get,
                'ip' => $this->CI->input->ip_address(),
                'datetime' => date('Y-m-d H:i:s')
        ));
    }

} 
```

这些数据存储在一个名为“Logging_m”的模型中，如下所示：

```
<?php 
class Logging_m extends CI_Model {

  function __construct() {
    parent::__construct();
  }

  function logPageView($data) {
    $this->db->insert('port_logging', $data);
  }

}

/* End of file logging_m.php */
/* Location: ./application/models/logging_m.php */ 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T13:35:22.643

正如 Patrick Savalle 提到的，你应该使用钩子。使用`post_controller_constructor`钩子，这样你就可以使用所有其他 CI 的东西。

1) 在`./application/config/config.php`集合中`$config['enable_hooks'] = TRUE`

2）在`./application/config/hooks.php`添加以下钩子

```
$hook['post_controller_constructor'] = array(
    'class' => 'Http_request_logger',
    'function' => 'log_all',
    'filename' => 'http_request_logger.php',
    'filepath' => 'hooks',
    'params' => array()
); 
```

3）创建文件`./application/hooks/http_request_logger.php`并添加以下代码作为示例。

```
if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Http_request_logger {

    public function log_all() {
        $CI = & get_instance();
        log_message('info', 'GET --> ' . var_export($CI->input->get(null), true));
        log_message('info', 'POST --> ' . var_export($CI->input->post(null), true));                
        log_message('info', '$_SERVER -->' . var_export($_SERVER, true));
    }

} 
```

我已经对其进行了测试，它对我有用（确保您在配置文件中激活了日志记录）。

# backbone.js - 应该如何使用 Backbone.js 构建项目

> ID：14195299
> 
> 赞同：0
> 
> 时间：2013-01-07T11:47:50.570
> 
> 标签：backbone.js

我以前使用过 ASP.NET MVC，现在我正在研究 Backbone.js。

项目应该如何构建？也就是说，在 ASP.NET MVC 中，您可以为模型、视图和控制器代码创建单独的文件，并且实现真正的代码分离。我如何使用 Backbone.js 实现这一点，我是否只是创建一系列 JS 包含并将它们放置在我的主页 index.html 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:59:28.047

Backbone 不会对您的应用程序结构施加任何特定的组织层次结构。所以是的，您可以自由地以任何您想要的方式设置您的应用程序结构。就单独的文件而言，您绝对可以（并且我建议您这样做）您的模型、视图等在单独的文件中。如果您的应用程序越来越大，包含多个文件，请检查 javascript 依赖管理器/模块加载器，例如。[需要.js](http://requirejs.org)

如果您正在寻找更有条理和固执己见的东西，您可以看看构建在 Backbone 之上的元框架之一，例如。卓别林：[http ://chaplinjs.org/](http://chaplinjs.org/)

引用卓别林网站：

> Chaplin 是一种使用 Backbone.js 库的 JavaScript 应用程序架构。Chaplin 通过提供轻量级和灵活的结构来解决 Backbone 的局限性，该结构具有成熟的设计模式和最佳实践。

另一个流行的替代方案是：[Backbone.marionette](https://github.com/marionettejs/backbone.marionette)

引用自 README.md

> Backbone.Marionette 是 Backbone.js 的复合应用程序库，旨在简化大型 JavaScript 应用程序的构建。它是我（Derick Bailey）使用 Backbone 构建的应用程序中发现的常见设计和实现模式的集合，包括受复合应用程序架构启发的各种部分，例如 Microsoft 的“Prism”框架。

# javascript - 如果使用 Javascript 按钮连接了特定设备，则打开任何应用程序

> ID：14195300
> 
> 赞同：-5
> 
> 时间：2013-01-07T11:47:51.867
> 
> 标签：javascript

请我需要一个 javascript 代码按钮，以检查有多少设备连接到笔记本电脑，以及是否连接了特定或特定设备让它打开任何应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:59:01.933

由于安全限制和 API 限制，您无法使用 JavaScript 执行此操作。我猜您正在寻找一些 Java 解决方案。

# php - jquery ajax表单成功消息不起作用

> ID：14195301
> 
> 赞同：0
> 
> 时间：2013-01-07T11:47:54.127
> 
> 标签：php, jquery, ajax, forms, contact

jquery ajax表单：仅加载图像并且不会停止并且成功消息不起作用

这是我的联系表格

```
 <form method="post" action="" class="comments-form" id="contactform" />

                <p class="input-block">
                    <label for="name">Name:</label>
                    <input type="text" name="name" id="name" />
                </p>

                <p class="input-block">
                    <label for="email">E-mail:</label>
                    <input type="text" name="email" id="email" />
                </p>

                <p class="input-block">
                    <label for="message">Message:</label>
                    <textarea name="message" id="message" cols="30" rows="10"></textarea>   
                </p>

                <p class="input-block">
                    <button class="button default" type="submit" id="submit">Submit</button>
                </p>

            </form> 
```

这是我的 jquery ajax 函数不起作用

```
(function() {

    if($('#contactform').length) {

        var $form = $('#contactform'),
        $loader = '<img src="images/preloader.gif" alt="Loading..." />';
        $form.append('<div class="hidden" id="contact_form_responce">');

        var $response = $('#contact_form_responce');
        var $p
        $response.append('<p></p>');

        $form.submit(function(e){

            $response.find('p').html($loader);

            var data = {
                action: "contact_form_request",
                values: $("#contactform").serialize()
            };

            //send data to server
            $.post("php/contact-send.php", data, function(response) {

                response = $.parseJSON(response);

                $(".wrong-data").removeClass("wrong-data");
                $response.find('img').remove();

                if(response.is_errors){

                    $response.find('p').removeClass().addClass("error type-2");
                    $.each(response.info,function(input_name, input_label) {

                        $("[name="+input_name+"]").addClass("wrong-data");
                        $response.find('p').append('Please enter correctly "'+input_label+'"!'+ '</br>');
                    });

                } else {

                    $response.find('p').removeClass().addClass('success type-2');

                    if(response.info == 'success'){

                        $response.find('p').append('Your email has been sent!');
                        $form.find('input:not(input[type="submit"], button), textarea, select').val('').attr( 'checked', false );
                        $response.delay(1500).hide(400);
                    }

                    if(response.info == 'server_fail'){
                        $response.find('p').append('Server failed. Send later!');
                    }
                }

                // Scroll to bottom of the form to show respond message
                var bottomPosition = $form.offset().top + $form.outerHeight() - $(window).height();

                if($(document).scrollTop() < bottomPosition) {
                    $('html, body').animate({
                        scrollTop : bottomPosition
                    });
                }

                if(!$('#contact_form_responce').css('display') == 'block') {
                    $response.show(450);
                }

            });

            e.preventDefault();

        });             

    }

})(); 
```

这是我的contact-send.php，它将消息保存在我的数据库中。

```
require_once "../includes/database.php";
    $cname=$_POST['name'];
    $cemail=$_POST['email'];
    $cmessage=$_POST['message'];
    $date=date("Y-m-d");    
            $sql = "INSERT INTO messages (sendername,senderemail,message,datesent) VALUES (:name,:email,:message,:date)";
            $qry = $db->prepare($sql);
            $qry->execute(array(':name'=>$cname,':email'=>$cemail,':message'=>$cmessage,':date'=>$date)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:55:46.963

我认为你的问题在这里：

```
$.post("php/contact-send.php", data, function(response) {

            response = $.parseJSON(response);
       //--^--------------------------------------missing '$' 

            $(".wrong-data").removeClass("wrong-data");
            $response.find('img').remove();
      //----^------------------------------------used the '$' for other codes 
```

尝试把一个放在`$`这里，看看这是否能解决问题：

```
$response = $.parseJSON(response); 
```

和`if you are getting some ajax errors plz mention it.`

# android - Eclipse 和自动截图

> ID：14195302
> 
> 赞同：1
> 
> 时间：2013-01-07T11:47:58.753
> 
> 标签：android, eclipse, screenshot, android-screen

我正在使用 eclipse Indigo 进行 Android 开发。这听起来可能有点疯狂，但是 Eclipse 中是否有任何功能可以在应用程序运行时自动截取每个屏幕的屏幕截图？还是需要以编程方式完成？实际上我想要的是，我需要我的应用程序中所有屏幕的屏幕截图。我想避免使用 DDMS 视角手动获取它们。

任何信息都会有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:57:06.903

> eclipse中是否有任何功能可以在应用程序运行时自动截取每个屏幕的屏幕截图？

是的，如果你可以截图

> 打开 Android 视图“设备”（在 Window --> Show View --> Other... --> Android --> Devices 下）。单击要截屏的设备或模拟器，然后单击“屏幕捕获”按钮（它看起来像一张小图片，应该在停车标志按钮旁边）。有时设备不会立即加载图片；有时您必须关闭/重新打开屏幕捕获窗口。

**这相当于通过 DDMS 拍照**，但是您可以在 Eclipse 中进行，而不是打开另一个应用程序。

> 这需要以编程方式完成吗？

**是**的，您也可以按照以下代码建议的方式进行操作。

```
// image naming and path  to include sd card  appending name you choose for file
String mPath = Environment.getExternalStorageDirectory().toString() + "/" + ACCUWX.IMAGE_APPEND;   

// create bitmap screen capture
Bitmap bitmap;
View v1 = mCurrentUrlMask.getRootView();
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false);

OutputStream fout = null;
imageFile = new File(mPath);

try {
    fout = new FileOutputStream(imageFile);
    bitmap.compress(Bitmap.CompressFormat.JPEG, 90, fout);
    fout.flush();
    fout.close();

} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

然后，当您需要访问时，请使用以下内容：

```
Uri uri = Uri.fromFile(new File(mPath)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:13:50.780

这是我发现的东西，它有效。 [http://www.mightypocket.com/2010/08/android-screenshots-screen-capture-screen-cast/](http://www.mightypocket.com/2010/08/android-screenshots-screen-capture-screen-cast/)

# php - php多个mySQL查询

> ID：14195303
> 
> 赞同：1
> 
> 时间：2013-01-07T11:48:02.130
> 
> 标签：php, mysql, mysqli-multi-query

是否可以在一个查询中从多个表中检索一组数据？例如，我从 table1 获取一个数组，但我也想从其他几个表中检索数据：

```
<?php

   $con = mysql_connect($hostname,$username, $password);
   if (!$con)
     {
     die('Could not connect: ' . mysql_error());
   }
   mysql_select_db($dbname, $con);

   $today = date('Y-m-d H:i:s', time());
   $today1DayAgo = date('Y-m-d H:i:s', strtotime("$today -1 day"));
   $query = "SELECT * FROM table1 WHERE omtr_date BETWEEN '$today1DayAgo' AND '$today'";

   $result = mysql_query($query);

   while($row = mysql_fetch_array($result)){
       echo $row["omtr_page_view"]);
   }

   mysql_close($con);

  ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:50:33.650

您可以使用连接来执行此操作：

例如

```
SELECT t1.*, t2.id, t2.someothercolumn FROM table1 t1 LEFT JOIN table2 t2 ON t1.id=t2.t1_id WHERE omtr_date BETWEEN '$today1DayAgo' AND '$today' 
```

（未经测试）

可能值得一读。[http://www.sitepoint.com/understanding-sql-joins-mysql-database/](http://www.sitepoint.com/understanding-sql-joins-mysql-database/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:06:27.867

如果你的表有一些共同点，比如 table1 的 1 列是 table2 的主键，或者任何类型的关系（比如同一列），你可以使用 JOINS。

否则你也可以使用 UNION ，比如

```
SELECT omtr_date1.a AS a1, omtr_date1.b AS b1 FROM table1 WHERE omtr_date1 BETWEEN '$today1DayAgo' AND '$today'
UNION
SELECT omtr_date2.c AS a1, omtr_date2.d AS b1 FROM table1 WHERE omtr_date2 BETWEEN '$today1DayAgo' AND '$today' 
```

但是两个 select 语句必须产生相同数量的列名称相同的列。

这对你有好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:30:47.397

使用 Mysql 连接。

这是一个例子：

```
<?php
// Make a MySQL Connection

// Construct our join query
$query  = "SELECT family.Position, food.Meal ";
$query .= "FROM family INNER JOIN food ";
$query .= "WHERE family.Position = food.Position";

//Execute query  
$result = mysql_query($query) or die(mysql_error());

// Print out the contents of each row into a table 
while($row = mysql_fetch_array($result)){
    echo $row['Position']. " - ". $row['Meal'];
    echo "<br />";
}
?> 
```

此处列出了更多 mysql 连接示例：http: [//phpweby.com/tutorials/mysql/32](http://phpweby.com/tutorials/mysql/32)

# vb.net - 将 UTF8 转换为 ANSI？

> ID：14195306
> 
> 赞同：1
> 
> 时间：2013-01-07T11:48:05.450
> 
> 标签：vb.net, utf-8

我想使用.Net 的`WebClient`类下载网页，提取标题（即和之间的内容`<title>`）`</title>`并将页面保存到文件中。

问题是，页面以 UTF-8 编码，并且`System.IO.StreamWriter`在使用带有此类字符的文件名时会引发异常。

我用谷歌搜索并尝试了几种将 UTF8 转换为 ANSI 的方法，但无济于事。有人有这方面的工作代码吗？

```
'Using WebClient asynchronous downloading
Private Sub AlertStringDownloaded(ByVal sender As Object, 
                                  ByVal e As DownloadStringCompletedEventArgs)
    If e.Cancelled = False AndAlso e.Error Is Nothing Then
        Dim Response As String = CStr(e.Result)

        'Doesn't work               
        Dim resbytes() As Byte = Encoding.UTF8.GetBytes(Response)
        Response = Encoding.Default.GetString(Encoding.Convert(Encoding.UTF8, 
                                              Encoding.Default, resbytes))

        Dim title As Regex = New Regex("<title>(.+?) \(", 
                                       RegexOptions.Singleline)
        Dim m As Match
        m = title.Match(Response)
        If m.Success Then
            Dim MyTitle As String = m.Groups(1).Value

            'Illegal characters in path.
            Dim objWriter As New System.IO.StreamWriter("c:\" & MyTitle & ".txt")
            objWriter.Write(Response)
            objWriter.Close()
        End If
    End If
End Sub 
```

* * *

编辑：感谢大家的帮助。事实证明，错误不是由 UTF8 引起的，而是页面标题部分中隐藏的 LF 字符，这显然是路径中的非法字符。

* * *

编辑：这是删除文件名/路径中一些非法字符的简单方法：

```
Dim MyTitle As String = m.Groups(1).Value
Dim InvalidChars As String = New String(Path.GetInvalidFileNameChars()) + New String(Path.GetInvalidPathChars())
For Each c As Char In InvalidChars
    MyTitle = MyTitle.Replace(c.ToString(), "")
Next 
```

* * *

编辑：这是告诉 WebClient 期待 UTF-8 的方法：

```
Dim webClient As New WebClient
AddHandler webClient.DownloadStringCompleted, AddressOf AlertStringDownloaded
webClient.Encoding = Encoding.UTF8
webClient.DownloadStringAsync(New Uri("www.acme.com")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:59:42.060

我认为问题与 UTF-8 无关。我认为您的正则表达式将包括`</title>`它是否出现在同一行。Windows 文件名中的字符`<>`无效。

如果这不是问题，那么查看一些示例输入和输出值会很有帮助`MyTitle`。

# php - 在php中拆分规范化字符串并放入数组？

> ID：14195308
> 
> 赞同：0
> 
> 时间：2013-01-07T11:48:05.620
> 
> 标签：php

我想在`PHP`.

弦 **拉胡尔：12345644，贾廷：23452223，拉曼：33343212**

我怎么能以下面的结果格式显示这个。

```
 Array
    (
        [0] => Rahul 
            (
                [0] => 12345644
            )

        [1] => Jatin
            (
                [0] => 23452223
            )

        [2] => Raman
            (
                [0] => 33343212
            )

    ) 
```

我试过这个

```
$arrayData = explode(",", $data); 
```

结果是

```
Array
        (
            [0] => Rahul :12345644
            [1] => Jatin :23452223               
            [2] => Raman :33343212
        ) 
```

之后

```
foreach($arrayData as $eachValue) {
 echo $eachValue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:54:37.907

也许：

```
$resultArray = array();
$arrayData = explode(",", $data);
foreach($arrayData as $eachValue) {
    $resultArray[] = explode(':',$eachValue);
} 
```

这是（至少）一个有效的数组结构

```
Array ([0] => Array ([0] Rahul 
                     [1] => 12345644
                    )
       [1] => Array ([0] Jatin
                     [1] => 23452223
                    )
       [2] => Array ([0] Raman
                     [1] => 33343212
                    )
     ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:43:51.307

如果您愿意更改格式以便使用等号和 & 符号，则可以使用 PHP 内置函数[`parse_str()`](http://php.net/manual/en/function.parse-str.php)。

例如：

```
$input = "Rahul=12345644&Jatin=23452223&Raman=33343212";
parse_str($input, $output);
print_r($output); 
```

给出：

```
Array
(
    [Rahul] => 12345644
    [Jatin] => 23452223
    [Raman] => 33343212
) 
```

这与您所追求的非常接近。

如果您想保留现有格式但仍使用`parse_str()`，则可以使用`str_replace()`or`strtr()`或类似方法来交换冒号和逗号，以便调用`parse_str()`：

```
$input = "Rahul:12345644,Jatin:23452223,Raman:33343212";
parse_str(strtr($input,':,','=&'),$output); 
```

希望有帮助。

# windows - 是否可以按命名空间和类名列出 COM 对象？

> ID：14195317
> 
> 赞同：1
> 
> 时间：2013-01-07T11:48:56.810
> 
> 标签：windows, com, batch-file

从批处理文件中，在用户安装某些东西之前，我需要验证他没有使用给定的命名空间和类名注册其他 CLSID。这可能吗 ？我的理解是，这是 ProgID。我知道 ProgID 不是必需的，并且某些 COM 对象可能会丢失，但如果它存在，我想检查它。

我可以通过 regedit 直观地做到这一点，但这显然不符合我的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:35:16.087

这将使用 ProgID 键遍历所有 CLSID，并检查它们是否与指定的字符串匹配。

```
@echo off
setlocal EnableDelayedExpansion

set "xLast="
for /F "tokens=1,2,*" %%A in ('reg query HKCR\CLSID /s /f ProgID /k /e /ve') do (
    rem echo(%%C
    if "%%~C" EQU "Enter ProgID to match on here" echo Found Match: !xLast!
    set "xLast=%%A %%B %%C"
)

endlocal
pause 
```

# excel - 带有 Excel OLAP 扩展的 MDX 公式

> ID：14195318
> 
> 赞同：0
> 
> 时间：2013-01-07T11:49:00.490
> 
> 标签：excel, pivot, mdx, olap

我无法弄清楚：

假设我有一个 olap 表，其中显示了有关产品的一些事实。其中之一是其销售量。

如何添加显示我与去年的差异的字段？如果我不允许创建新度量，而是使用公式？

![在此处输入图像描述](../Images/466e6e6e7e3aaf8b68153bf67326f38d.png)

像我的伪代码这样“简单”的东西：

```
[Measures].[Volume] From 'FilterYear'
- [Measures].[Volume] From 'FilterYear' -1 
```

这甚至可能吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:08:21.707

是的，这完全有可能，但需要比您的伪代码更多的 MDX 技巧。

尝试类似：

```
Aggregate([Date].CurrentMember.Lag(1), [Measures].[Volume]) 
```

这假设您在某个轴上使用 year 成员；如果您选择了一天成员，它将为您提供前一天的交易量。

这是一个关于聚合函数和 MDX 函数[的好资源。](http://msdn.microsoft.com/en-us/library/ms145524.aspx)

# power-management - MSR 0x2E 在最近的 Intel CPU 中的功能？

> ID：14195326
> 
> 赞同：2
> 
> 时间：2013-01-07T11:49:29.313
> 
> 标签：power-management, cpu-registers, motherboard

我遇到了现代 Intel CPU 的一项功能，称为 MSR 0x2E，它以某种方式涉及电源管理功能。我认为 MSR 代表特定于模型的寄存器，我猜这个 MSR 至少从 Sandy Bridge 一代开始就已经存在，但可能会更长。

现在，自 2012 年以来，许多主板在启动时锁定此寄存器，因此任何写入它的尝试都会导致 GPF。这对于某些流行的操作系统（这里不再赘述）是一个问题，因为它无法在不修改主板或操作系统的情况下安装在这些主板上。

**出于好奇，MSR 0x2E 是做什么的？为什么大多数主板（微星、华擎、富士康……）厂商都锁定它？**

（出于安全原因？他们是否在销售高级解锁版本（他们使用 VT-X/VT-D 执行此操作，这在某些“消费者”板上不可用）？他们是否与 Apple 或 Microsoft 达成协议？等等...）

# winapi - 如何在不出现 WER 对话框的情况下使 Windows-7 上的进程崩溃？

> ID：14195327
> 
> 赞同：9
> 
> 时间：2013-01-07T11:49:34.723
> 
> 标签：winapi, visual-c++, windows-7, unhandled-exception, windows-error-reporting

### 是否有可能在没有获得 Windows 错误报告 (WER) 对话框的情况下使 Windows-7 上的常规用户模式进程崩溃？（何时以及是否正常启用 WER 并且未应用特定标志。）

*注意：我对**禁用 WER****不**感兴趣，我对**未启动 WER 的崩溃场景感兴趣，尽管它应该启动**并且 Windows“静默”终止应用程序。*

 ****在 Windows XP 上，编写一个 C 或 C++ 应用程序（在用户模式下）以这样的方式弄乱自己的地址空间是非常简单的，当最终引发访问冲突（或其他未处理的 Win32 异常）时，Windows XP 将只是默默地终止进程而不通知用户：

```
...
void stackbreaker() {
    printf("%s\n", __FUNCTION__);
    // global/static buffer
    static char buf[128] = "In a hole in the ground there lived a hobbit. And it burrowed through your stack. It even built a round door into you function.";
    // Get address on the stack
    char local;
    char* stack = &local;
    // nuke the stack:
    memcpy(stack - 64, buf, sizeof(buf));
    // Kaboom. No user defined unhandled exception filter will be called. Stack nuked.
    // Process will terminate silently on Windows XP.
    // But on Windows-7 you still get the WER dialog.
}
... 
```

在一个简单的 C++ 项目中调用上述函数（在发布模式下——在测试时注意那些编译器优化——而不是在调试器下运行）将：

*   在 XP 下静默终止进程。
*   在 Windows-7 下显示 WER 崩溃对话框。
*   旁白：在任何情况下，它都不会调用您自己的未处理异常过滤器，即使您设置了一个通过`SetUnhandledExceptionFilter`

我现在想知道的是 - 在 Windows 7 下 - WER 机制是否已经以一种方式实现，即我的应用程序中*总是会出现崩溃*^([a])的错误对话框，或者**即使在 Windows 7 中是否存在进程损坏情况，这将阻止 WER 对话框弹出？**

* * *

我将添加一些我所做的阅读：

在[*Windows via C/C++*（Richter, Nasarre 第 5 版）](http://www1.wintellect.com/Resources/Details/86)一书中，他们描述了“故障过程”中发生的情况（第 711 页）：

> 1.  异常过滤器。
> 2.  ...
> 3.  ...
> 4.  **内核检测到未处理的异常**
> 5.  **阻止对 Wer 服务的 ALPC 调用**
> 6.  WER 报告开始。
> 7.  ...

现在，他们指出，Win7 的做法与 Windows XP 不同（引用本书第 710 页：）

> ... 从 Windows Vista 开始，该`UnhandledExceptionFilter`功能不再向 MS 的服务器发送错误报告。反而。内核检测到用户模式线程未处理异常（步骤 4）...

所以这意味着，根本**没有办法**让进程“崩溃”——在 Vista 及更高版本中——以一种阻止 WER 启动的方式。我试图确认或反驳这一点。

* * *

[a]：显然，通过调用各种`*exit`或`terminate*`函数之一，可以轻松地“杀死”进程而不会留下任何痕迹。问题是，如果您可以排除这种终止原因，（如何）可能以阻止显示 WER 对话框的方式在 Win7 上“崩溃”用户模式进程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T23:28:38.603

我查看了我的 Windows Internals 版本，但在这个主题上并没有太多要说的。在早期版本中，Windows 错误报告例程发生在崩溃线程的上下文中。这意味着如果堆栈被丢弃（如您的示例中所示），它可能无法运行。

在 Vista 及更高版本中，它在崩溃线程的外部运行。此外，内核本身负责在进程崩溃时通知 WER（通过高级本地过程调用）。

根据 Windows Internals 的说法，这些更改修复了消失的进程问题。我只能相信他们的话。显然，如果 WER 服务本身损坏（或停止），您仍然会遇到静默崩溃。

**编辑**

来自 Windows Internals，第 5 版，第 122 页：

> 在 Windows Vista 之前，我们描述的所有 [WER] 操作都必须发生在崩溃线程的上下文中……在某些类型的崩溃中……未处理的异常过滤器本身就崩溃了。这种“静默进程死亡”没有记录在任何地方。...如果未处理的异常过滤器本身崩溃，Windows Vista 和更高版本通过从崩溃的线程外部执行这项工作来改进 WER 机制。

第 124 页：

> ...所有 Windows 进程现在都有一个错误端口，该端口实际上是 WER 服务注册的 ALPC 端口对象。内核...将使用此端口向 WER 服务发送消息，然后该服务将分析崩溃过程。...这解决了静默进程死亡的所有问题...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-20T04:09:46.030

您已经知道如何使进程崩溃，所以我回答有关隐藏 WER 对话框的问题。
自 Windows XP 以来隐藏 WER 对话框的方法：

```
UINT WINAPI SetErrorMode(_In_  UINT uMode); 
```

> SEM_NOGPFAULTERRORBOX 0x0002 系统不显示 Windows 错误报告对话框。

请注意，错误对话框还有其他原因，也可以使用此功能禁用它们，请查看文档以获取更多信息。

此外，从 Windows 7 开始：

```
BOOL SetThreadErrorMode(
  _In_   DWORD dwNewMode,
  _Out_  LPDWORD lpOldMode
); 
```

一些程序和 dll-s 使用这些功能向用户隐藏错误。****

# php - Onclick->仅刷新图像而不是页面

> ID：14195328
> 
> 赞同：0
> 
> 时间：2013-01-07T11:49:39.590
> 
> 标签：php, javascript

只有当我单击图像并且计数增加时，我才能使用任何方法来刷新图像？我不想刷新整个页面，因为如果刷新页面，点击计数器将需要再次从 0 开始计数。

```
<?php

include("connection.php");

$table1=mysql_query("select * from pic_a");
$table2=mysql_query("select * from pic_b");
$table3=mysql_query("select * from pic_c");

$tab1[0]=0;
$tab2[0]=0;
$tab3[0]=0;

$i=0;
while($row=mysql_fetch_assoc($table1))
{
    $tab1[$i]= $row['pic_link']; 
    $i++;
}

$i=0;
while($row=mysql_fetch_assoc($table2))
{
    $tab2[$i]= $row['pic_link']; 
    $i++;
}

$i=0;
while($row=mysql_fetch_assoc($table3))
{
    $tab3[$i]= $row['pic_link']; 
    $i++;
}

    $rand1=rand(0,9);
$rand2=rand(0,9);
$rand3=rand(0,9);
?>

<script type="text/javascript">

        var count = 0;
function countClicks() {
         count = count + 1;
            document.getElementById("p2").innerHTML = count;
        } 
```

```
<table  border="1">
          <tr id="bird" onclick="countClicks();">
            <td><img src="password\<?php echo $tab1[$rand1]; ?>" alt="" width="76" height="67"></td>
            <td>Bird</td>
          </tr>
          <tr id="car" onclick="countClicks();">
            <td><img src="password\<?php echo $tab2[$rand2]; ?>" alt="" width="76" height="67"></td>
            <td>Car</td>
          </tr>
          <tr id="computer" onclick="countClicks();">
            <td><img src="password\<?php echo $tab3[$rand3]; ?>" alt="" width="76" height="67"></td>
            <td>Computer</td>
          </tr>

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:55:45.030

没有`onclick`事件`<img>`。

你必须把它包在一个`<a>`

然后您可以调用`onclick`函数并使用 js 变量来跟踪点击次数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:55:57.500

您始终可以使用 AJAX 在单击图像时更新计数器。（如果您想将其保存在数据库中）

jQuery AJAX 是最简单和最快速的启动方式。

**别的**

在页面上创建一个 id = "cnt" 的元素

```
function countClicks()
{
   document.getElementById("cnt").value = Number(document.getElementById("cnt").value) + 1;
} 
```

# c++ - 使用 Qt 生成自签名 SSL 证书

> ID：14195332
> 
> 赞同：2
> 
> 时间：2013-01-07T11:49:58.117
> 
> 标签：c++, qt, ssl, ssl-certificate

Qt 程序是否可以仅使用 Qt 函数生成自签名 SSL 证书和私钥，即`cacert.pem`和文件？`privkey.pem`

该程序将在 Symbian 手机（它是一个 FTPS 服务器）上运行，因此 openssl 命令行工具将不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T15:42:56.970

我已经为 Qt 编写了一个插件，它允许您使用一个不错的 Qt 风格的 API 来做到这一点。它可以在这里获得[https://gitorious.org/qt-certificate-addon/](https://gitorious.org/qt-certificate-addon/)并且文档在线[http://xmelegance.org/devel/qt-certificate-addon/](http://xmelegance.org/devel/qt-certificate-addon/)它包括几个应该得到的示例你开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:12:46.840

在 Qt 中似乎没有这样做的类，所以目前不可能只使用 Qt 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-14T11:43:43.533

从 Qt 5.14 版开始，显然有一些 Qt 类可以做到这一点：

[https://doc.qt.io/qt-5/qopcuax509certificatesigningrequest.html](https://doc.qt.io/qt-5/qopcuax509certificatesigningrequest.html)

# google-maps-api-3 - 谷歌地图 v3 在 fancybox 2.1.3 中的可拖动标记

> ID：14195337
> 
> 赞同：0
> 
> 时间：2013-01-07T11:50:20.920
> 
> 标签：google-maps-api-3, draggable, google-maps-markers, fancybox-2

我对谷歌地图中显示在花式框中的可拖动标记有疑问。“draggable: false” 工作正常，如果我碰巧将它设置为“true”，它就不再工作了。

我有谷歌地图 api v3 和 fancybox 2.1.3

例如： http: [//www.lenticularis.net/fancyboxtest/google-maps-and-fancybox.php](http://www.lenticularis.net/fancyboxtest/google-maps-and-fancybox.php)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:07:25.020

地图需要`center`-option，但在`myOptions`您提供`position`-option。

# jquery - 数据表 Jquery 单个列过滤器/搜索

> ID：14195338
> 
> 赞同：2
> 
> 时间：2013-01-07T11:50:22.423
> 
> 标签：jquery, search, filter, datatable

我想搜索表中的所有列。我尝试了很多，但没有工作。这里缺少什么？

```
<table id="table_id" class="display">
<thead>
    <tr>
        <th>Column 1</th>
        <th>Column 2</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>Row 1 Data 1</td>
        <td>asdf</td>
    </tr>
    <tr>
        <td>tt</td>
        <td>Row 2 Data 2</td>
    </tr>
</tbody> 
```

这是我的代码：

```
<script type="text/javascript"  src="media/js/jquery.js"></script>
<script type="text/javascript" src="media/js/jquery.dataTables.js">   </script>
<link rel="stylesheet" href="media/css/demo_table.css" media="screen"  />
<script language="javascript" type="text/javascript">
$(document).ready(function(){
$('#table_id').dataTable().columnFilter();
 });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:42:33.550

如果您不使用默认的列过滤器，则需要包含列过滤器插件。

jquery.dataTables.columnFilter.js

[http://jquery-datatables-column-filter.googlecode.com/svn/trunk/index.html](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/index.html)

包含插件后，尝试指定如下内容，

```
 $('#example').dataTable({
             bJQueryUI: true,
             "sPaginationType": "full_numbers"
})

  .columnFilter({  null,  null}); 
```

# jquery - 克隆后输入字段值为空

> ID：14195343
> 
> 赞同：0
> 
> 时间：2013-01-07T11:50:27.393
> 
> 标签：jquery, html, dom, post

所以我在使用 jQuery Clone 函数时遇到了问题。我有这个带有表单元素的 div，当用户要求它时，我想将其添加到我的表单中。

但是，当我将克隆的输入字段附加到表单时，输入字段的值将保持为空。这会导致我的 POST 变量未设置。

有没有人有这东西的经验？

谢谢

编辑：我尝试不使用克隆功能，只做了这个代码：[https ://dl.dropbox.com/u/6614378/code.png](https://dl.dropbox.com/u/6614378/code.png)

上面的代码仍然没有给我的输入字段带来真正的价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:42:47.430

检查此[**演示**](http://jsfiddle.net/xQBnB/4/)

```
$(document).ready(function(){
        var num = 1;
        $('#button').click(function(){
            var toAppend = '<br><input type="text" value="" placeholder="put something in" name="product['+ num +'][name]">';
            $('#product').append(toAppend);
            num++;
        });

      $('#frmsub').click(function(){
        $('input[name^="product"]').each(function(){
          alert($(this).val());
        });
        });

    }); 
```

如您所见，它与 value 属性无关，您在文本框中输入的任何值都将成为文本框的值

*更新 2) 获取 php 中的值*

```
<form id="product" action="" method="post">
    <input type="text" name="product[0][name]" value="5">
    <input type="hidden" name="multtxt" value="1">
    <input type="submit" name='frmsub' id='frmsub' value='submit'>
</form>

<?php
if(isset($_POST['multtxt'])){

    $prod_cnt = $_POST['product'];
    foreach($prod_cnt as $prod)
    echo $prod['name'];

}
?> 
```

# jenkins - Jenkins 为具有提供的依赖项的项目构建

> ID：14195345
> 
> 赞同：1
> 
> 时间：2013-01-07T11:50:32.713
> 
> 标签：jenkins, gradle

当我通过 Jenkins 构建基于 Gradle 的项目时，我遇到了编译错误。发生这种情况是因为 build.gradle 文件中有几个 jars 范围为“提供”。我需要这个不要将它们包含到生成的 jar 文件中。如何指定路径或其他东西以让项目在集成服务器上构建？提前谢谢。

* * *

提供的构建文件列表

```

配置{
        假如
    }
    源集{
        主要的 {
            java { srcDir 'src/main/java' }
            资源 { srcDir 'src/main/resources' }
            compileClasspath +=configurations.provided
        }
    }
    依赖{
        提供'somelib1'
        提供'somelib2'
        提供'somelib3'
    }

```

# java - Reduce program runtime in java - Making a code faster

> ID：14195351
> 
> 赞同：0
> 
> 时间：2013-01-07T11:50:54.527
> 
> 标签：java, performance, runtime, time-limiting

```
import java.util.Scanner;

class main{
public static void main(String args[]){
    Scanner input = new Scanner(System.in);
    int n,k,m=0;
    n = input.nextInt();
    k = input.nextInt();
    for(int c = 0 ; c < n ; c++){
        if(input.nextInt() % k == 0) m++;
    }
    System.out.println(m);
}
} 
```

This is my solution to [SPOJ Problem 442](https://www.spoj.com/problems/INTEST/). I wanted to know how can i make this code run faster? What are techniques that can be used to make a java code faster?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:20:41.500

My solution!

`Scanner` is too slow for huge input data.

You should write a simple Scanner by yourself then you'll get ac!

```
import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;

public class Main {

  static int nextInt(InputStream in) throws IOException {
    int ch;
    for (; (ch = in.read()) < '0' || ch > '9';);
    int c = ch - '0';
    for (; (ch = in.read()) <= '9' && ch >= '0'; c = c * 10 + ch - '0');
    return c;
  }

  public static void main(String[] args) throws IOException {

    InputStream in = new BufferedInputStream(System.in, 4096);
    int n = nextInt(in);
    int k = nextInt(in);
    int t = 0;
    for (int i = 0; i < n; i++) {
      if (nextInt(in) % k == 0) t++;
    }
    System.out.println(t);
  }
} 
```

# mysql - ZF2如何使用连接重命名字段名称

> ID：14195354
> 
> 赞同：5
> 
> 时间：2013-01-07T11:51:00.807
> 
> 标签：mysql, join, zend-framework2

因为我的联接还包括一个名为“id”的字段，所以我需要在我的 sql 中重命名这个字段名，这样它就不会覆盖我从第一个选定表格中的 id 字段名。

我的查询如下所示；

```
$select = new \Zend\Db\Sql\Select();
$select->from('websites');
$select->join(array('s' => 'websites_statistics'), 's.website_id = websites.id');
$select->where(array('websites.website' => $website));
$select->order('s.timestamp DESC')->limit(1);

$rowset = $this->tableGateway->selectWith($select);
$row = $rowset->current();

return $row; 
```

所以，'s' 'id' 字段应该重命名为 'stat_id' 之类的东西。

提前致谢！

缺口

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T12:02:34.830

```
$select = new \Zend\Db\Sql\Select();
$select->from('websites');
       ->join(array('s' => 'websites_statistics'), 's.website_id = websites.id',
           array('stat_id' => 's.id')); // <-- here is the alias
       ->where(array('websites.website' => $website));
       ->order('s.timestamp DESC')
       ->limit(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T06:24:24.040

```
 $db = Zend_Db_Table::getDefaultAdapter();
    $select = $db->select();
    $select->from(array('p' => 'sub_categories'), array('subcategory_id'=>'p.subcategory_id','subname'=>'p.name'))
    ->join(array('pa' => 'categories'), 'pa.category_id = p.category_id', array('catname'=>'pa.name'));
    $result = $this->getAdapter()->fetchAll($select); 
```

## ***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T07:40:05.100

我们也可以使用这种方法

```
use Zend\Db\Sql\Expression;

->join(array('s' => 'websites_statistics'), 's.website_id = websites.id',
       array('stat_id' => new Expression('s.id'))); // <-- here is the alias 
```

这是最好的方法如果你必须在 zf2 上使用 Mysql 'AS'

```
example : array('Month' => new Expression('DATE_FORMAT(`salesInvoiceIssuedDate`, "%m")')) 
```

# mysql - java - 如何在javaprepared statement中设置mysql十进制值？

> ID：14195359
> 
> 赞同：5
> 
> 时间：2013-01-07T11:51:12.370
> 
> 标签：mysql, prepared-statement

如何在 java 准备好的语句中设置十进制值。我被尝试如下

我的表查询

`create table A (x decimal(22,0))`

在java中我试图将它设置为

```
preperedStatmentObj.setLong(1,aLongValue); 
```

但我收到以下错误

```
java.lang.ClassCastException: java.lang.Long cannot be cast to java.lang.Integer 
```

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T13:37:07.227

尝试使用**[setBigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/PreparedStatement.html)**

```
BigDecimal d = new BigDecimal(aLongValue);
preperedStatmentObj.setBigDecimal(1, d); 
```

# matlab - Matlab中`step`和`stepinfo`结果的区别

> ID：14195360
> 
> 赞同：4
> 
> 时间：2013-01-07T11:51:15.243
> 
> 标签：matlab

我正在使用该功能`stepinfo`来获取系统的阶跃响应。但是我得到的信息和我从制作的情节中得到的信息`step`不匹配。对于闭环系统：

```
m1=3; m2=2; k=12; B=6;
p=35.1263; z=4.9686; K=683.9;

s=tf('s');
G=(B*s+k+s^2*m2)/(s^2*(s^2*m1*m2+(m1+m2)*(B*s+k)));
H=K*(s+z)/(s+p);
T=(G*H/(1+G*H)); 
```

结果`stepinfo(T)`是

```
ans = 

        RiseTime: 0.3876
    SettlingTime: 1.4245
     SettlingMin: 0.9863
     SettlingMax: 1.1881
       Overshoot: 18.8102
      Undershoot: 0
            Peak: 1.1881
        PeakTime: 0.5756 
```

虽然得出的图表`step(T,0:1e-3:10)`清楚地显示响应超过 1.2，这意味着 Overshoot 大于 20 而不是 18.81。 ![阶跃响应](../Images/12c0f1731813e0b02a3063b232bf0444.png)

差异的根源是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:30:29.637

这似乎是 R2009b 版本的某种错误。如评论中所述，我在 R2012a 版本的机器上运行了相同的代码，结果`stepinfo`为：

```
ans = 

    RiseTime: 0.1671
SettlingTime: 1.3591
 SettlingMin: 0.9066
 SettlingMax: 1.2094
   Overshoot: 20.9442
  Undershoot: 0
        Peak: 1.2094
    PeakTime: 0.4604 
```

这是预期的结果。

# c# - WebClient回调异步结果？

> ID：14195361
> 
> 赞同：2
> 
> 时间：2013-01-07T11:51:20.003
> 
> 标签：c#, webclient

我想编写一个处理我的 WebClient-Tasks 并返回其结果的类。
问题是，异步下载不会让一个简单的`return`处理：

```
public void checkAvailability()
{
     WebClient wc = new WebClient();
     wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
     wc.UploadStringCompleted += wc_UploadStringCompleted;
     wc.UploadStringAsync(new Uri("http://random.php"), "?lookup=10");

     //return parsed content from wc_UploadStringCompleted
}

private void wc_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)
{
     // do something
} 
```

我怎样才能把它们放在一起让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:12:11.767

好的，使用 Visual Studio 2012 和 .NET 4.5 可以更轻松地使用类中的`UploadStringTaskAsync()`方法`System.Net.WebClient`：

```
public async Task<string> CheckAvailability()
{
    var webClient = new WebClient();
    webClient.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
    var result = await webClient.UploadStringTaskAsync(new Uri("http://random.php"), "?lookup=10");
    return result;
} 
```

该方法抛出的任何异常都会像常规的非异步方法一样中断您的应用程序流程。请注意，`await`无论您在何处调用此方法，您都必须使用该方法才能获得结果，因此：

```
var availability = await CheckAvailability(); 
```

在其他一些`async`标记的方法中。

如果您不想使用它，则必须使用回调：

```
public void CheckAvailability(Action<Exception, string> callback)
{
    var webClient = new WebClient();
    webClient.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
    webClient.UploadStringCompleted += (s,e) => { 
                                                    if(e.Error != null)
                                                        callback(e.Error, string.Empty);
                                                    else
                                                        callback(null, e.Result);
                                                };
    wc.UploadStringAsync(new Uri("http://random.php"), "?lookup=10");
} 
```

现在您必须传递返回`void`并获取两个类型参数的函数`Exception`，该函数`string`将在上传完成时执行，但您必须手动处理异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:02:49.127

usse UploadStringTaskAsync 确实是更好的选择！

```
string data = "lookup=10";
string json = await WebClient.UploadStringTaskAsync(Uri, data); 
```

帖子数据不需要“？”

# javascript - 更改窗口后的 Safari 模糊事件循环

> ID：14195365
> 
> 赞同：2
> 
> 时间：2013-01-07T11:51:37.803
> 
> 标签：javascript, jquery, safari

我想用警报框对模糊事件做出反应。这个想法是验证内容并在值无效时提供反馈。我没有使用警告框进行调试，我的客户坚持要给用户反馈。我在这里有一个类似的：（但这个问题不是多余的！）[Focusout 事件循环](https://stackoverflow.com/questions/14126947/focusout-event-loop/14127043)

**所以我目前的解决方案看起来像这样**

HTML：

```
Type some stuff here:
<br>
<input type="text" id="test" /> 
```

JavaScript：

```
var doFocus = function () {
  $("#test").focus();
    console.log("do focus");
};

$("#test").blur(function () {
  console.log("Blur event got triggered.");
  alert("Blur event got triggered.");
  window.setTimeout(function () {
    doFocus();
  }, 1);
}); 
```

到目前为止，这是可行的，但 **问题是：**如果您打开站点，请单击输入字段，然后更改窗口。例如打开一个文本编辑器，然后改回来。Safari 卡在事件循环中（回调被一次又一次地调用）......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:53:26.687

只需删除此行：

```
alert("Blur event got triggered."); 
```

永远不要在任何模糊事件回调函数中使用 Alert()。

**更新**

[演示](http://jsfiddle.net/PtGNX/)

```
var doFocus = function () {
  $("#test").focus();
    console.log("do focus");
};

var bluring = function(sender){
    $(sender).off('blur');
    console.log("Blur event got triggered.");
    alert("Blur event got triggered.");
    window.setTimeout(function () {
      doFocus();
      $(sender).on('blur',function(){bluring(this)});
    }, 1);
};

$("#test").blur(function(){bluring(this)}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T09:14:58.087

我能够添加警报。当仍在旧窗口上时，Safari 会为新窗口调用“激活”。添加“超时”以输入正确的时间范围。在第一次警报发生之前将警报设为条件并更改相关变量可防止警报循环.

例子：

```
safari.application.addEventListener("activate", function(){
  //setTimeout prevents boundary complications
  setTimeout(
  function() {
    if (enabled) {
      var tab = safari.application.activeBrowserWindow.activeTab;
      if (curTab != tab) {
        curTab = tab;
        if (selectedTab != tab)
        alert('This is an alert!!');

      }
    }
  }
  ,1000);
},true); 
```

# c# - 调用 javascript 并在服务器代码中获取 yes no 值

> ID：14195368
> 
> 赞同：0
> 
> 时间：2013-01-07T11:51:52.757
> 
> 标签：c#, javascript, ajax, updatepanel

我正在调用一个 javascript 函数以在更新面板内的按钮单击事件中返回来自用户的是、否值。我想根据用户操作（是/否）调用某些服务器端功能。我的javascript代码如下

```
function Confirm() {
        var confirm_value = document.createElement("INPUT");
        confirm_value.type = "hidden";
        confirm_value.name = "confirm_value";
        if (confirm("Do you want to save data?")) {
            confirm_value.value = "Yes";
        } else {
            confirm_value.value = "No";
        }
        document.forms[0].appendChild(confirm_value);
    } 
```

我在我的服务器端按钮单击中调用它，如下所示。

```
 if ((Convert.ToInt32(_dsLeaveDetails.Tables[0].Rows[0][0]) == 1) 
            {

                ShowAlert("Leave is already marked for this date");
                return;

            }
            else if ((Convert.ToInt32(_dsAttendanceDetails.Tables[0].Rows[0][0]) >= 1)) 
            {

                ScriptManager.RegisterStartupScript(this, this.GetType(), "alert", "Confirm();", true);
                string confirmValue = Request.Form["confirm_value"];
                if (confirmValue == "Yes")
                {
                      ScriptManager.RegisterStartupScript(this, this.GetType(), "alert", "alert('You clicked YES!');", true);
                }
                else
                {
                  ScriptManager.RegisterStartupScript(this, this.GetType(), "alert", "alert('You clicked YES!');", true);
                }

                return;
            } 
```

问题是，仅在代码完全执行后才会显示弹出窗口，因此无法进一步处理用户操作（是/否）。我也不能在 clientclick 事件上调用 javascript 函数，因为我不需要弹出窗口。只有在检查数据集 dsAttendanceDetails 之后，我才需要弹出窗口。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:28:19.817

您似乎假设该行`ScriptManager.RegisterStartupScript(this, this.GetType(), "alert", "Confirm();", true);`会立即执行 java-script 函数 - 但这根本不可能。当响应到达客户端时，即当后续服务器代码已经执行时，此调用将执行 JS 函数。

java-script 函数将在客户端执行，您将需要表单提交（同步或异步无关紧要）以在服务器端检索用户的选择。因此，您需要两个请求 - 首先将注册确认用户选择的脚本，然后注册将用户选择发送到服务器的后续请求。

# c++ - 视频序列的运动估计

> ID：14195371
> 
> 赞同：0
> 
> 时间：2013-01-07T11:52:06.400
> 
> 标签：c++, opencv

对于我的项目，我必须跟踪视频序列中某些对象的运动，使用基于两个连续帧之间的块匹配算法的技术进行运动估计，此时我想使用有关运动的信息在前一帧获得的估计以产生下一帧的估计，也就是说，将先前估计的信息用于当前估计，而不必处理序列的两个连续帧的强度。有人可以建议我一些技术吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:55:43.237

使用光流技术...使用 goodfeaturestotrack 找到一些兴趣点并在每一帧中继续跟踪它们...与前一帧相比，每帧中这些点的位移将使您了解 2 之间的运动性质帧..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:01:09.097

如果您想跟踪视频中的某些内容，请使用**mean-shift**和**cam-shift**。opencv 提供了这两种算法。您可以使用 cvMeanshift 或 cvcamshift 函数进行跟踪。该算法基于质心计算。均值偏移找到应该跟踪的给定对象的质心，然后通过优化算法在下一帧中找到它。在凸轮移位方法中，如果对象的尺寸发生变化，它已经可以跟踪它。
你可以在 opencv 网站上找到更多关于 mean-shift 和 cam-shift 的信息

# jquery - jQuery 目标父级

> ID：14195373
> 
> 赞同：2
> 
> 时间：2013-01-07T11:52:18.037
> 
> 标签：jquery, jquery-selectors

我有以下html结构：

```
<ul>
<li id = "1"><a href = "">1</a></li>
<li id = "2"><a href = "" class = "active">2</a></li>
<li id = "3"><a href = "">3</a></li>
<li id = "1"><a href = "">4</a></li>
</ul> 
```

我想将“活动”类应用于 id 为 2 的 li 元素。我尝试了以下方法：

```
if(jQuery('#navigation ul li a').hasClass('active')){
jQuery(this).parent().addClass('active');
} 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:54:38.807

使用以下内容：

```
$('#navigation a.active').closest('li').addClass('active'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T11:55:52.290

在您当前的代码中，您`this`是无效的 - 没有功能在做这项工作，因此`this`不会设置为您认为您正在处理的元素。

不要使用`.hasClass`，而是使用您的选择器来查找匹配的元素。然后，您可以使用`.each()`迭代每个匹配的元素，`this`每次正确设置：

```
jQuery('#navigation ul li a.active').each(function() {
    jQuery(this).parent().addClass('active');
}); 
```

这使您的代码与原始代码非常相似。

不过，康斯坦丁的答案更好——它完全避免了手动迭代的需要。作为该答案的变体，如果您确定每个`<a>`元素都直接包含在`<li`需要该类的 > 中，则可以使用以下命令：

```
jQuery('#navigation li > a.active').parent().addClass('active'); 
```

注意：您的 ID 字段应该是唯一的，数字 ID 仅在 HTML5 中有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:54:43.773

首先，如果您使用 HTML4，您*不*`id`应该只是数字，而是以字母开头，例如“id2”。然后只需选择id

 *```
$('#id2').addClass('active'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:54:52.053

只需使用：

```
$('#2').addClass('active'); 
```

您的代码不起作用的原因是选择器“#navigation ul li a”可能返回了许多结果，而您的代码假定它只返回一个。如果您想遍历每个元素并测试“活动”，请尝试：

```
$('#navigation ul li a').each(function() {
  if($(this).hasClass('active')) {
    $(this).parent().addClass('active');
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T12:02:33.053

```
$(".active").parent().addClass('active') 
```*

# android - 我可以删除 Place API 建议的一些地名吗？

> ID：14195377
> 
> 赞同：1
> 
> 时间：2013-01-07T11:52:37.423
> 
> 标签：android, google-places-api

例如，当我选择咖啡厅选项时，它会给出所有咖啡厅名称和网吧名称。我想删除网吧名称。

我是android开发的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:05:39.780

删除到底是什么意思？

您可以过滤 google places API 返回的位置，并仅显示您希望用户在 listView 中看到的位置。

# java - Java JTable 定制设计

> ID：14195378
> 
> 赞同：1
> 
> 时间：2013-01-07T11:52:54.487
> 
> 标签：java, swing, jtable

我正在用 Java 创建一个桌面应用程序，以摆脱我们目前使用 Word 文档实现的手动任务。正如您可以想象的那样，这很慢，为错误留下了空间等。

Word 文档以表格形式捕获数据，然后我们手动将其添加到电子表格并打印出表格。java 应用程序将使用本地 derby 数据库来存储捕获的数据库，并允许出于遗留原因即时创建旧的 windows 文档（我将通过将原始 xml 写入 docx 格式来创建它）。

我的问题是在 Java 中创建一个数据捕获表单。当然，我可以将标准组件用作独立组件，然后在提交表单时从 jTextField 区域获取值，但我发现我无法将它们对齐或使它们看起来足够光滑。当前的 MSWord 表单使用一个简单的表格，但每隔几行合并了标题字段，以清楚地标记表单的不同部分。这可以使用 a 来完成`JTable`吗？同样在某些行的列值中，我会使用普通的文本条目，但在其他单选按钮或组合框上。这可以对每一列逐行完成吗？据我所知，这会改变整个列（所有行）。

我一直在看`TableModels`，`TableColumnModels`等等，如果有人能指出我正确的方向，或者看一个很棒的高级表单创建教程。

或者这`JTable`不是正确的组件？我错过了什么吗？

**编辑：**当前表格看起来像这样：

```
[ One long cell across the two columns]

    [ name:] [value]

  [ address] [value]

   [ gender] [value]

[one long cell across the two columns for part 2 heading]

[ interests] [combo box ]

...

... 
```

依此类推（我认为长时间合并的单元格将是最棘手的？）。

期待回复，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:49:53.660

你想要的是一个*表格*。查看[JGoodies](http://www.jgoodies.com/freeware/libraries/forms/)。

# oracle - 使用选择插入合并触发器

> ID：14195380
> 
> 赞同：0
> 
> 时间：2013-01-07T11:52:56.080
> 
> 标签：oracle, plsql, oracle11g

这个问题我之前发过。但现在我的项目经理回来了，给了我一套新的指示。同样，我现在有点迷茫，并试图在某种程度上修复它。

我正在研究一个需要 INSERT INTO 和 WHERE 逻辑的触发器。

我有三张桌子。

缺席表：

```
-----------------------------
|  user_id | absence_reason |
-----------------------------
|  1234567 |   40           |
|  1234567 |   50           |
|  1213    |   40           |
|  1314    |   20           |
|  1111    |   20           |
----------------------------- 
```

公司表：

```
-----------------------------
| user_id  | company_id     |
-----------------------------
| 1234567  |  10201         |
| 1213     |  10200         |
| 1314     |  10202         |
| 1111     |  10200         |
----------------------------- 
```

就业表：

```
-------------------------------------------
| user_id  |   emp_type    |  employee_id |
-------------------------------------------
| 1234567  |   Int         |    1         |
| 1213     |   Int         |    2         |   
| 1314     |   Int         |    3         |
| 1111     |   Ext         |    4         |
------------------------------------------- 
```

最后我列出了只有emp_type = Int inemployment_table 和company_id = 10200 的数据应该去哪里的表格

出去：

```
-------------------------------------------
| employee_id | absence_reason |  user_id |
-------------------------------------------
|  1          |    40          |  1234567 |
|  1          |    50          |  1234567 |
|  2          |    40          |  1213    |
|  3          |    20          |  1314    |
------------------------------------------- 
```

这是我的触发器：

```
CREATE OR REPLACE TRIGGER "INOUT"."ABSENCE_TRIGGER" 
   AFTER INSERT ON arc_hrcs.absences_data 
   FOR EACH ROW
DECLARE
BEGIN
  CASE
      WHEN UPDATING THEN
           MERGE INTO out o USING DUAL ON (out.user_id =:NEW.user_id)
           WHEN MATCHED THEN UPDATE SET
                      out.employee_id = (SELECT employee_id FROM employment_table WHERE user_id = :NEW.user_id),   
                      out.absence_reason = :NEW.absence_reason,
                      out.user_id = :NEW.user_id
           WHEN NOT MATCHED THEN 

     insert into out (absence_reason, employee_id)
select :NEW.absence_reason, e.employee_id
  from employment_table e 
       inner join company_table c
               on c.user_id = e.user_id
 where e.user_id = :NEW.user_id
   and e.emp_type = 'INT'
   and c.company_id = '10200';
  END CASE;
END absence_trigger; 
```

我不知道如何根据合并语法在 WHEN NOT MATCHED THEN 代码之后更改代码。一些指导会帮助我:-)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:30:57.987

我之前的回答有点太快了。

我会将合并重写为：

```
MERGE INTO out o USING (select e.employee_id, :NEW.user_id as user_id
                        from employment_table e 
                        inner join company_table c
                           on c.user_id = e.user_id
                        where e.user_id = :NEW.user_id
                             and e.emp_type = 'INT'
                             and c.company_id = '10200') S
ON (out.user_id =S.user_id)
WHEN MATCHED THEN UPDATE SET
     out.employee_id = s.employee_id,   
     out.absence_reason = :NEW.absence_reason,
     out.user_id = :NEW.user_id
WHEN NOT MATCHED THEN 
     insert (absence_reason, employee_id)
     values (:NEW.absence_reason, S.employee_id); 
```

# android - Google Place API for android 查找城市

> ID：14195382
> 
> 赞同：9
> 
> 时间：2013-01-07T11:53:01.023
> 
> 标签：android, google-places-api

我已经看过教程（[教程](https://developers.google.com/academy/apis/maps/places/autocomplete-android)）在 android.i 中使用自动完成文本视图来查找城市。我已经完成了所指示的所有事情，但是现在当我点击[这个 url](https://maps.googleapis.com/maps/api/place/autocomplete/json?sensor=false&key=API_KEY&input=sa)

它总是给我一个异常说： `java.net.UnknownHostException: Unable to resolve host "maps.googleapis.com": No address associated with hostname`

但是当我通过浏览器点击时，相同的 url 工作正常，我也得到了结果。

这是我遇到的代码：

```
public class PlacesAutoCompleteAdapter extends ArrayAdapter< String > implements Filterable{
 private ArrayList<String> resultList;
 private static final String LOG_TAG = "ExampleApp";

 private static final String PLACES_API_BASE = "https://maps.googleapis.com/maps/api/place";
 private static final String TYPE_AUTOCOMPLETE = "/autocomplete";
 private static final String OUT_JSON = "/json";

 private static final String API_KEY = "I have generated the correct api key also";

public PlacesAutoCompleteAdapter(Context context, int textViewResourceId) {
    super(context, textViewResourceId);

}

@Override
public int getCount() {
    return resultList.size();
}

@Override
public String getItem(int index) {
    return resultList.get(index);
}

@Override
public Filter getFilter() {
    Filter filter = new Filter() {
        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
              FilterResults filterResults = new FilterResults();
                if (constraint != null) {
                    // Retrieve the autocomplete results.
                    resultList = autocomplete(constraint.toString());

                    // Assign the data to the FilterResults
                    filterResults.values = resultList;
                    filterResults.count = resultList.size();
                }
                return filterResults;
        }

        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {
             if (results != null && results.count > 0) {
                    notifyDataSetChanged();
                }
                else {
                    notifyDataSetInvalidated();
                }
        }
    };
    return filter;
}

private ArrayList<String> autocomplete(String input) {
    ArrayList<String> resultList = null;

    HttpURLConnection conn = null;
    StringBuilder jsonResults = new StringBuilder();
    try {
        StringBuilder sb = new StringBuilder(PLACES_API_BASE + TYPE_AUTOCOMPLETE + OUT_JSON);
        sb.append("?sensor=false&key=" + API_KEY);
    //   sb.append("&components=country:in");
        sb.append("&input=" + URLEncoder.encode(input, "utf8"));
      // sb.append("&input=" + input);

       System.out.println("URL ---------------: "+sb.toString());
        URL url = new URL(sb.toString());
        conn = (HttpURLConnection) url.openConnection();
        InputStreamReader in = new InputStreamReader(conn.getInputStream());

        // Load the results into a StringBuilder
        int read;
        char[] buff = new char[1024];
        while ((read = in.read(buff)) != -1) {
            jsonResults.append(buff, 0, read);
        }
    } catch (MalformedURLException e) {
        Log.e(LOG_TAG, "Error processing Places API URL", e);
        return resultList;
    } catch (IOException e) {
        e.printStackTrace();
       // Log.e(LOG_TAG, "Error connecting to Places API", e);
        return resultList;
    } finally {
        if (conn != null) {
            conn.disconnect();
        }
    }

    try {
        // Create a JSON object hierarchy from the results
        JSONObject jsonObj = new JSONObject(jsonResults.toString());
        JSONArray predsJsonArray = jsonObj.getJSONArray("predictions");

        // Extract the Place descriptions from the results
        resultList = new ArrayList<String>(predsJsonArray.length());
        for (int i = 0; i < predsJsonArray.length(); i++) {
            resultList.add(predsJsonArray.getJSONObject(i).getString("description"));
        }
    } catch (JSONException e) {
        Log.e(LOG_TAG, "Cannot process JSON results", e);
    }

    return resultList;
} 
```

}

* * *

哎呀！对不起大家。我发现解决方案是一个愚蠢的错误。我没有在清单中定义 INTERNET 权限。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T12:27:18.133

请检查您是否在清单中添加了 INTERNET 权限。

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T21:16:39.117

这个错误今天发生在我身上。我通过以下步骤弄清楚了： 1：检查您是否在清单中添加了 INTERNET 权限。

2：确保您的笔记本电脑或您正在测试应用程序的设备可以访问互联网。

仅供参考，至于地方 API 的密钥，您应该使用“**浏览器应用程序的密钥（带有引用者）** ”，而不是 Android 应用程序的密钥。

祝你好运。

# android - 如何构建一个 GreenDao 查询来加载通过 id 列表指定的所有项目？

> ID：14195383
> 
> 赞同：8
> 
> 时间：2013-01-07T11:53:04.813
> 
> 标签：android, greendao

我有一个字符串列表，每个字符串都是通过 GreenDao 持久保存的项目的唯一标识符。

如何构建允许我从数据库中加载所有这些项目的查询？

有没有可能用 QueryBuilder 来做，还是我需要回去写 SQL？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T09:29:17.343

这在 Property 类中的[in条件下是可能的。](http://greendao-orm.com/javadoc/greendao/de/greenrobot/dao/Property.html#in%28java.util.Collection%29)

此示例加载所有具有包含在 中的字段值的框`fieldValues`。`fieldValues`是类型`List<String>`

```
 List<LocalBox> boxes = getBoxDao(context).queryBuilder()
        .where(LocalBoxDao.Properties.field.in(fieldValues)).list(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T07:22:02.040

我想在“查询中”做一些说明，
这有一个限制，我们不能在查询中传递超过 100 个 id
所以我为实现这一目标所做的是：

```
List<Product> productList = new ArrayList<Product>();
DaoSession daoSessionUni = TarneaAndroidApplicationContext.getInstance().getDaoSession();

for (int i = 0; i < rowIds.size(); i = i + 100) 
{
    ProductDao productDao = daoSessionUni.getProductDao();
    QueryBuilder<Product> queryBuilder = productDao.queryBuilder().where(
        ProductDao.Properties.Id.in(rowIds.subList(i + 100 < rowIds.size() ? 
                                                   i + 100 : 
                                                   rowIds.size())),
        ProductDao.Properties.IsDeleted.eq(0));             
    productList.addAll(queryBuilder.list());
} 
```

如果我们想在 Query 中传递一个 id 列表，我们可以使用这个方法。

# android - 如何在不丢失文本字段内的文本的情况下返回最后一个意图

> ID：14195384
> 
> 赞同：0
> 
> 时间：2013-01-07T11:53:04.987
> 
> 标签：android, android-intent

在我的程序中，有一些文本字段和一个打开相机意图的按钮。（假设页面名称是 mainIntent）...假设用户填写文本字段并单击按钮；cameraIntent 打开，用户拍摄照片。现在，我希望程序返回具有文本字段和按钮的页面。但如果我这样做

```
Intent i = new Intent(cameraIntent.this, mainIntent.class);
startActivity(i); 
```

用户写的所有文字都不见了。我需要使用`return mainIntent`我想的东西......

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:57:45.143

您需要覆盖 onSaveInstanceState(Bundle savedInstanceState) 并将要更改的应用程序状态值写入 Bundle 参数，如下所示：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
  super.onSaveInstanceState(savedInstanceState);
  // Save UI state changes to the savedInstanceState.
  // This bundle will be passed to onCreate if the process is
  // killed and restarted.
  savedInstanceState.putBoolean("MyBoolean", true);
  savedInstanceState.putDouble("myDouble", 1.9);
  savedInstanceState.putInt("MyInt", 1);
  savedInstanceState.putString("MyString", "Welcome back to Android");
  // etc.
} 
```

Bundle 本质上是一种存储 NVP（“名称-值对”）映射的方式，它将被传递给 onCreate 和 onRestoreInstanceState，您可以在其中提取如下值：

```
@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
  super.onRestoreInstanceState(savedInstanceState);
  // Restore UI state from the savedInstanceState.
  // This bundle has also been passed to onCreate.
  boolean myBoolean = savedInstanceState.getBoolean("MyBoolean");
  double myDouble = savedInstanceState.getDouble("myDouble");
  int myInt = savedInstanceState.getInt("MyInt");
  String myString = savedInstanceState.getString("MyString");
} 
```

您通常会使用这种技术来存储应用程序的实例值（选择、未保存的文本等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T12:15:16.910

在第一个活动中使用[startActivityForResult 。](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)因此，您将能够返回调用活动。而且您不会丢失编辑文本的数据。

```
Intent i = new Intent(mainIntent.this, cameraIntent.class);
startActivityForResult(i, MY_REQ_CODE); 
```

您可以将其添加为`onActivityResult()`：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data)
      {
      switch(requestCode) {
      case MY_REQ_CODE: 
            if (resultCode == RESULT_OK) {
                //Do action that's needed
                break;
            }

      }
} 
```

在您的活动下一个活动中，您只需要调用`setResult()`并`finish()`如下所示。您无需在此处开始新活动：

```
Intent returnIntent = new Intent();
returnIntent.putExtra("ImageName",imgName);   //Required if you want to pass some data back
setResult(RESULT_OK,returnIntent);        
finish(); 
```

希望能帮助到你。

# asp.net-mvc-3 - 3.4.6.0 中没有 FluentValidation.Mvc.MetadataExtensions（避免 System.Security.VerificationException）

> ID：14195387
> 
> 赞同：0
> 
> 时间：2013-01-07T11:53:15.583
> 
> 标签：asp.net-mvc-3, .net-4.5, fluentvalidation

我继承了一些使用 FluentValidation 3.0.0.1 的代码，并且在安装了 .NET 4.5 的机器上出现了可怕的`System.Security.VerificationException : Operation could destabilize the runtime`错误。阅读这篇文章后：[http](http://elegantcode.com/2012/08/23/net-4-5-operation-could-destabilize-the-runtime-yikes/) : //elegantcode.com/2012/08/23/net-4-5-operation-could-destabilize-the-runtime-yikes/ 我将 FluentValidation 和 FluentValidation.MVC3 nuget 包更新到最新版本 3.4 .6.0。

但是...更新后，此代码无法编译：

```
rules.RuleFor(x => x.Number).DisplayName("Bla bla bla"); // <-- No DisplayName method 
```

它失败了，因为它中继，`using FluentValidation.Mvc.MetadataExtensions`并且这个命名空间在 3.4.6.0 安装的 DLL 中不存在

`MetadataExtensions`最新的 FV 中是否有一些等价物？如果没有，我如何用最新的 3.4.6.0 中的方法替换 、 和类似`DisplayName`方法`Scaffold`？`HiddenInput`

*（我对 FluentValidation 完全陌生——只是因为 VerificationException 而偶然发现它）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:31:04.817

由于您使用的是 FluentValidation 新版本，因此您必须使用 WithMessage 而不是如下所示的显示

```
 RuleFor(x => x.city).NotNull().WithMessage("City is required"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:48:49.490

安装最新版本不是一种选择，但我已经下载了[3.0.0.1 源](https://github.com/thecodejunkie/FluentValidation/archive/3.0.0.1.zip)并将[更改](https://github.com/thecodejunkie/FluentValidation/commit/ddc1d7235b9c122c06fd224e8490b94791a715c0)应用于 AbstractValidator 类。

```
// Func<CascadeMode> cascadeMode = () => ValidatorOptions.CascadeMode; // Deleted
static Func<CascadeMode> s_cascadeMode = () => ValidatorOptions.CascadeMode; // Added
Func<CascadeMode> cascadeMode = s_cascadeMode; // Added 
```

将原始 3.0.0.1 替换为修补版本后，应用程序启动时没有`VerificationException`.

# android - ActionBarSherlock 以编程方式设置水平进度条最大值

> ID：14195393
> 
> 赞同：1
> 
> 时间：2013-01-07T11:53:31.197
> 
> 标签：android, actionbarsherlock, android-progressbar

我在我的应用程序中使用 ACB，我在设置水平进度最大值的最大值时遇到了一点问题。据我所知（并通过互联网找到/阅读），有一种方法可以使用自己的 xml 设置水平进度条风格喜欢

```
<item name="android:max">value</item> 
```

但是在我的应用程序中，我正在下载数据，并且根据某些值，用户可以下载不同类型的数据包/信息，我需要以编程方式设置 progressBar 的最大值。每个数据包的最大值将根据其大小而变化。

任何想法如何每次都增加最大值并根据它计算进度条的当前值？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:56:46.447

试试这个代码：

```
ProgressBar pg = new ProgressBar(getApplicationContext());
pg.setMax(100); 
```

对于夏洛克`progressbar`，您可以使用此示例代码：在此代码中设置值`mProgress` 以设置最大值`progressbar`

```
import android.os.Bundle;
import android.os.Handler;
import android.view.View;

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Window;

public class Progress extends SherlockActivity  {
    Handler mHandler = new Handler();
    Runnable mProgressRunner = new Runnable() {
        @Override
        public void run() {
            mProgress += 2;

            //Normalize our progress along the progress bar's scale
            int progress = (Window.PROGRESS_END - Window.PROGRESS_START) / 100 * mProgress;
            setSupportProgress(progress);

            if (mProgress < 100) {
                mHandler.postDelayed(mProgressRunner, 50);
            }
        }
    };

    private int mProgress = 100;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        setTheme(SampleList.THEME); //Used for theme switching in samples
        super.onCreate(savedInstanceState);

        //This has to be called before setContentView and you must use the
        //class in com.actionbarsherlock.view and NOT android.view
        requestWindowFeature(Window.FEATURE_PROGRESS);

        setContentView(R.layout.progress);

        findViewById(R.id.go).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                if (mProgress == 100) {
                    mProgress = 0;
                    mProgressRunner.run();
                }
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:16:35.217

所以我可以看到没有办法在运行时更新水平进度条的最大值，除了以 xml 样式设置它。

如果其他人找到了解决方案，请回答。

# facebook - 如何获取 Facebook 用户页面之类的信息

> ID：14195396
> 
> 赞同：-3
> 
> 时间：2013-01-07T11:53:36.487
> 
> 标签：facebook, facebook-graph-api

是否有任何 Graph API 提供用户喜欢 Facebook 上的信息活动。我有一个任务，在这个任务中，我需要获取 facebook 用户喜欢的页面列表，并且需要每 7 天在我们的数据库中更新一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:02:21.667

我认为这就是您要搜索的内容：

```
$facebopok->api("USER_ID/likes"); 
```

[您可以在API Explorer](https://developers.facebook.com/tools/explorer?method=GET&path=me%2Flikes)中尝试。

# java - Xml 反序列化无法使用 Xstream

> ID：14195397
> 
> 赞同：1
> 
> 时间：2013-01-07T11:53:40.353
> 
> 标签：java, serialization, xstream, mime-message

我有一个正在序列化的类

> org.springframework.integration.core.Message

进入文件如下：

**示例.java**

```
public static void receive(Message<?> message) throws IOException, MessagingException
{
    XStream xStream = new XStream();
    File file = new File("c:/temp/temp.xml");
    FileOutputStream fileOutputStream = new FileOutputStream(file);
    xStream.toXML(message,fileOutputStream);
} 
```

**UnMarshall.java**

```
public static void main(String[] args) throws IOException, MessagingException, ClassNotFoundException
{
    XStream xStream = new XStream();
    File file = new File("c:/temp/temp.xml");
    FileInputStream fileOutputStream = new FileInputStream(file);
    Message message = (Message) xStream.fromXML(fileOutputStream);
} 
```

如果我运行 UnMarshall.java 那么我得到以下异常：

**问题**

*   是否可以使用 XStream 序列化/反序列化消息对象？
*   如果不是，我还有什么其他选择？

    线程“主”com.thoughtworks.xstream.converters.ConversionException 中的异常：无法构造类 java.lang.Class ---- 调试信息 ---- 消息：无法构造类 java.lang.Class 原因-异常：java。 lang.InstantiationException 原因消息：javax.activation.ActivationDataFlavor 类：org.springframework.integration.message.GenericMessage 所需类型：javax.activation.ActivationDataFlavor 路径：/org.springframework.integration.message.GenericMessage/payload/dh/dataContentHandler /dch/myDF 行号：14 ------------------------------- com.thoughtworks.xstream.converters.reflection。 com.thoughtworks.xstream.core 上的 ExternalizableConverter.unmarshal(ExternalizableConverter.java:110)。TreeUnmarshaller.convert(TreeUnmarshaller.java:56) at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:45) at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:46) at com .thoughtworks.xstream.annotations.AnnotationReflectionConverter.unmarshallField(AnnotationReflectionConverter.java:66) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:188) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter .unmarshal(AbstractReflectionConverter.java:125) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:56) 在 com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller。convert(AbstractReferenceUnmarshaller.java:45) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:46) 在 com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.unmarshallField(AnnotationReflectionConverter.java:66) 在 com.thoughtworks .xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:188) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:125) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convert (TreeUnmarshaller.java:56) 在 com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:45) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:46) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:188) 在 com.thoughtworks.xstream.java:66) 在 com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.unmarshallField(AnnotationReflectionConverter.java:66) 在 com.thoughtworks.xstream.converters .reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:125) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:56) 在 com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:45) ) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:46) 在 com.thoughtworks.xstream.annotations.AnnotationReflectionConverter.unmarshallField(AnnotationReflectionConverter.java:66）在com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal（AbstractReflectionConverter.java:188）在com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal（AbstractReflectionConverter.java:125）在com.thoughtworks.xstream .core.TreeUnmarshaller.convert(TreeUnmarshaller.java:56) 在 com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:45) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:46) ) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:188) 在 com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:125) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:56) 在 com.thoughtworks.xstream.core .AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:45) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:46) 在 com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:117) 在com.thoughtworks.xstream.core.ReferenceByXPathMarshallingStrategy.unmarshal(ReferenceByXPathMarshallingStrategy.java:29) 在 com.thoughtworks.xstream.XStream.unmarshal(XStream.java:846) 在 com.thoughtworks.xstream.XStream.unmarshal(XStream.java: 833）在 com.thoughtworks.xstream.XStream。fromXML(XStream.java:789) at org.springframework.integration.samples.mail.imapidle.DefaultEmailReceiverUtilService.main(DefaultEmailReceiverUtilService.java:103) 原因：java.lang.InstantiationException：java.lang 中的 javax.activation.ActivationDataFlavor。 Class.newInstance0(Class.java:340) at java.lang.Class.newInstance(Class.java:308) at com.thoughtworks.xstream.converters.reflection.ExternalizableConverter.unmarshal(ExternalizableConverter.java:80) ... 39更多的newInstance(Class.java:308) at com.thoughtworks.xstream.converters.reflection.ExternalizableConverter.unmarshal(ExternalizableConverter.java:80) ... 39 更多newInstance(Class.java:308) at com.thoughtworks.xstream.converters.reflection.ExternalizableConverter.unmarshal(ExternalizableConverter.java:80) ... 39 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-26T14:20:02.580

[当我在谷歌上搜索我的 XStream 错误](https://github.com/x-stream/xstream/issues/13)时，我发现了这个问题。这里的问题是 XStream 依赖于 ActivationDataFlavor 声称是 Externalizable 的事实。但要完全做到这一点，它需要一个公共的无参数构造函数，它没有，因此 java.lang.InstantiationException。

好消息是 XStream 的作者解决了这个问题。因此，如果您使用 XStream 1.5.0-SNAPSHOT，您应该不会再遇到这个问题。

坏消息是我还没有找到一种方法让 Oracle 注意到[ActivationDataFlavor](https://docs.oracle.com/javase/8/docs/api/javax/activation/ActivationDataFlavor.html)和[PrivateMLet](https://docs.oracle.com/javase/8/docs/api/javax/management/loading/PrivateMLet.html)都不完全尊重[Externalizable](https://docs.oracle.com/javase/8/docs/api/java/io/Externalizable.html)接口。诚然，这个公共的无参数构造函数要求非常隐蔽，但正如您在上面的 StackTrace 中看到的那样，它确实是必需的

> 重构 Externalizable 对象时，会使用公共无参数构造函数创建实例，然后调用 readExternal 方法。

# jquery - jquery 对话框 zindex 设置在第二次打开时不起作用

> ID：14195399
> 
> 赞同：0
> 
> 时间：2013-01-07T11:53:57.917
> 
> 标签：jquery, jquery-ui

```
subscribeDialog = $('#metrics-subscribe-popup').dialog({
        autoOpen: false,
        width: 600,
        modal: true,
        zIndex: 20,
        buttons: {
            "OK": function() {

                $(this).dialog("close");
            }
        }
    });

subscribeDialog.dialog('open') 
```

当我第二次使用 subscribeDialog.dialog('open') 打开对话框时，zIndex 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:09:29.763

它工作正常。对话框打开和关闭与对话框的 z-index 属性无关。

但是您也可以像这样在第二次打开时明确设置 z-index

```
subscribeDialog.dialog({
     zIndex: 100
});
subscribeDialog.dialog('open'); 
```

# xcode - 使用 NSXMLParser 解析 XML 属性

> ID：14195402
> 
> 赞同：1
> 
> 时间：2013-01-07T11:54:15.143
> 
> 标签：xcode, uitableview, attributes, nsxmlparser

我正在搜索从这个简化的 xml 文件的 N 个标签中解析所有属性“unit1”和“unit2”，然后将它们放在 UITableView 中：

```
<xml>
<meta></meta>
<time1>
<product>
<value1 id="id1Time1" unit1="unit1Time1" number1="number1Time1"/>
<value2 id="id2Time1" unit2="unit2Time1" number2="number2Time1"/>
</product>
</time1>
<time2>
<product>
<value1 id="id1Time2" unit1="unit1Time2" number1="number1Time2"/>
<value2 id="id2Time2" unit2="unit2Time2" number2="number2Time2"/>
</product>
</time2>
...
<timeN>
<product>
<value1 id="id1TimeN" unit1="unit1TimeN" number1="number1TimeN"/>
<value2 id="id2TimeN" unit2="unit2TimeN" number2="number2TimeN"/>
</product>
</timeN>
</xml> 
```

我正在使用 NSXMLParser、自我委托，并且我正在使用以下代码：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    currentElement = [elementName copy];
    if ([elementName isEqualToString:@"value1"]) {
        arrayUnit1 = [[NSMutableArray alloc] init]; 
        stringUnit1 = [attributeDict objectForKey:@"unit1"];
        [arrayUnit1 addObject:stringUnit1];
    }
    if
        ([elementName isEqualToString:@"value2"]) {
        arrayUnit2 = [[NSMutableArray alloc] init];
        stringUnit2 = [attributeDict objectForKey:@"unit2"];
        [arrayUnit2 addObject:stringUnit2];
    }
} 
```

要使用 value1 和 value2 填充 UITableView 我正在使用：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [arrayUnit1 count]; // <--- I Know, here is the problem!
} 
```

...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:
                UITableViewCellStyleSubtitle reuseIdentifier:@"Cell"];
    }

    cell.textLabel.text = [NSString stringWithFormat:@"%@",[arrayUnit1 objectAtIndex:indexPath.row]];
    cell.detailTextLabel.text = [NSString stringWithFormat:@"%@",[arrayUnit2 objectAtIndex:indexPath.row]];

    return cell;
} 
```

好吧，解析很完美，我也可以每隔 N 个 stringValues 进行 NSLog 记录，但在我的 UITableView 中，我只能看到一行包含 arrayUnit N 的最后一个值（在本例中为 unit1TimeN 和 unit2TimeN）。那么如何用每个值填充表，我的数组的所有 N 值？也许我还需要实现 - (void)parser:(NSXMLParser *)parser didEndElement:? 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:33:06.427

从这里删除这一行

> arrayUnit1 = [[NSMutableArray alloc] init];

并在分配解析器时将其放在其他位置..这是删除数组的所有先前元素并为其分配新内存，因此您只会看到添加的最后一个元素..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:35:46.803

您正在为每个解析的元素重新分配一个新数组，只需分配一次数组：

```
if (!arrayUnit1)
   arrayUnit1 = [[NSMutableArray alloc] init]; 
```

# java - 在richfaces中使用自定义skin.properties文件时找不到skinning.css和packed.css

> ID：14195404
> 
> 赞同：2
> 
> 时间：2013-01-07T11:54:30.340
> 
> 标签：java, jsf, jsf-2, richfaces

如果我在 web.xml 中使用 myskin 而不是 blueSky ，则有两个 css 文件未加载 (skinning.css 和 packed.css) ，我的日志显示：

```
 1\. WARNING JSF1064: Unable to find or serve resource,
    org.richfaces.staticResource/4.2.0.Final/Packed/mysking/skinning.css.
 2\. WARNING JSF1064: Unable to find or serve resource,
    org.richfaces.staticResource/4.2.0.Final/Packed/mysking/packed/packed.css. 
```

谁能帮我解决上述问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:02:04.353

您需要“手动”创建这些文件。

我最近写了一篇关于这个的博客文章，[看看吧](https://community.jboss.org/people/michpetrov/blog/2012/11/27/resource-optimization-with-maven-resources-plugin)。

编辑：在您的情况下，您需要将其添加到 pom.xml

```
<plugin>
     <groupId>org.richfaces.cdk</groupId>
     <artifactId>maven-richfaces-resources-plugin</artifactId>
     <version>4.2.0.Final</version>
     <configuration>
          <skins>
               <skin>mysking</skin>
          </skins>
          <excludedFiles>
               <exclude>^\Qorg.richfaces.renderkit.html.images.\E.*</exclude>
               <exclude>^\Qorg.richfaces.renderkit.html.iconimages.\E.*</exclude>
          </excludedFiles>
          <includedContentTypes>
               <include>text/css</include>
               <include>image/.+</include>
          </includedContentTypes>
          <fileNameMappings>
                <property>
                     <name>^.*showcase.*/([^/]+\.css)$</name>
                     <value>org.richfaces.showcase.css/$1</value>
                </property>
                <property>
                     <name>^.+/([^/]+\.(png|gif|jpg))$</name>
                     <value>org.richfaces.images/$1</value>
                </property>
                <property>
                     <name>^.+/([^/]+\.css)$</name>
                     <value>org.richfaces.css/$1</value>
                </property>
          </fileNameMappings>
     </configuration>
     <executions>
          <execution>
               <id>process-resources</id>
               <goals>
                    <goal>process</goal>
               </goals>
               <configuration>    
                    <staticResourceMappingFile>${project.build.outputDirectory}/META-INF/richfaces/packed-resource-mappings.properties</staticResourceMappingFile>

                    <resourcesOutputDir>${project.build.outputDirectory}/META-INF/resources/org.richfaces.staticResource/4.2.0.Final/Packed/</resourcesOutputDir>
                    <staticResourcePrefix>org.richfaces.staticResource/4.2.0.Final/Packed</staticResourcePrefix>

                    <pack>true</pack>                            
                    <compress>false</compress>

                    <excludedFiles>
                         <exclude>^javax.faces</exclude>
                         <exclude>^\Qorg.richfaces.renderkit.html.images.\E.*</exclude>
                         <exclude>^\Qorg.richfaces.renderkit.html.iconimages.\E.*</exclude>
                         <exclude>^jquery\.js$</exclude>
                    </excludedFiles>

               </configuration>
          </execution>
     </executions>
</plugin> 
```

# python - 不支持库 xlrd

> ID：14195415
> 
> 赞同：-1
> 
> 时间：2013-01-07T11:54:50.417
> 
> 标签：python, google-app-engine, xlrd

> **可能重复：**
> [Google App Engine 是否支持 xlrd？](https://stackoverflow.com/questions/13140613/is-xlrd-supported-in-google-app-engine)

我正在开发一个谷歌应用引擎应用程序，我想在其中读取一些 exel 文件。我正在使用 xlrd lib，但它向我显示错误 ***ImportError: No module named xlrd***

我还添加了

```
libraries:
- name: xlrd
  version: latest 
```

到 app.yaml 文件，但显示错误***，不支持库“xlrd”***

我已经检查[了 Python 2.7 中的第三方库，](https://developers.google.com/appengine/docs/python/tools/libraries27) 但似乎谷歌应用引擎不支持 xlrd。

谷歌应用引擎是否支持 xlrd ？还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:02:02.383

GAE 原生支持大多数默认 Python 库和[Python 运行时环境中提到的少数自定义库](https://developers.google.com/appengine/docs/python/runtime)

我使用了 xlwt 并且以同样的类比，我假设 xlrd 也将得到支持（除非 xlrd 有任何 C 扩展），但我不知道。

为了使用 xlrd，您必须将它与您的 Python 源打包并上传到 GAE。您不能指望 GAE 为您提供库。

# vb.net - 从特定托盘打印 Word 文档

> ID：14195424
> 
> 赞同：0
> 
> 时间：2013-01-07T11:55:21.680
> 
> 标签：vb.net

我需要将 word 活动文档打印到特定托盘中。例如，如果用户单击按钮字母，则文档应从托盘 2 打印。目前我正在使用这段基本代码

```
Dim word As Word.Application = Globals.ThisAddIn.Application
        Dim pd As New PrintDialog()
        pd.PrinterSettings = New PrinterSettings()
            If pd.ShowDialog() = DialogResult.OK Then
            word.PrintOut()
        End If 
```

如果我使用属性 prindocument()，我已经设法完成了一些与此相关的工作。类似的东西

Dim pkSource As Printing.PaperSource Dim printDoc As New PrintDocument ' AddHandler printDoc.PrintPage

```
 printDoc.PrinterSettings.PrinterName = strPrinter
        For Each pkSource In printDoc.PrinterSettings.PaperSources
            If pkSource.RawKind = "261" Then

                printDoc.PrinterSettings.DefaultPageSettings.PaperSource.RawKind = pkSource.RawKind
                Dim psize As Printing.PaperSize = printDoc.PrinterSettings.PaperSizes.Item(5)
                printDoc.DefaultPageSettings.PaperSize = psize
                printDoc.PrinterSettings.PrintRange = PrintRange.AllPages
                'AddHandler printDoc.PrintPage, AddressOf Me.PrintDoc_PrintPage
                printDoc.PrinterSettings.Copies = num_copies
                printDoc.PrinterSettings.Duplex = Duplex.Default
                AddHandler printDoc.PrintPage, AddressOf Me.PrintPageHandler
                'PrintDocument1 = oWord.ActiveDocument
                Try
                    'PrintDocument1.Print()
                    printDoc = app
                Catch ex As System.Exception
                    MsgBox(ex.Message)
                End Try

                'printDoc.Print()
                ' MsgBox("printed")
                RemoveHandler printDoc.PrintPage, AddressOf Me.PrintPageHandler
            End If
        Next 
```

但我不想使用打印文档，因为我需要打印激活的 Word 文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:15:23.010

我很确定您不能向 PrintDocument 对象添加内容 - 但它确实公开了您可以在页面级别操作的事件。

话虽如此，您似乎正在这里的 Word 中工作。为什么不使用 word object 的 ActiveDocument 来设置托盘（firstPageTray 和 otherPagesTray）？

# asp.net - 如何连接到网络服务

> ID：14195426
> 
> 赞同：0
> 
> 时间：2013-01-07T11:55:33.677
> 
> 标签：asp.net, web-services

我正在尝试连接到外部 Web 服务——这不是我以前做过的事情。

使用 VS2010/c#。

我发现了 Web 服务（如果这是正确的术语），现在可以访问它的方法和属性。

以下代码自动添加到我的 web.config 文件中：

但是，当我调用该服务时，出现错误：

无法加载合同“PingTree.PayDayLoansSoap”的端点配置部分，因为找到该合同的多个端点配置。请按名称指明首选端点配置部分。

显然，我可以看到有多个配置/端点，但是我不确定我需要指定哪一个。我还应该从 web.config 中删除不需要的还是通过调用方法指定（有可以做到这一点的重载）？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:31:11.200

您需要选择具有重载版本数据的绑定名称之一。选择哪一个，取决于您的要求。

我可以看到有两个 basicHttpBinding 唯一的区别是安全性。PayDayLoansSoap 使用传输模式安全性，而 PayDayLoansSoap1 不使用任何东西。所以我建议选择第一个。

您不需要删除未使用的绑定，让它保留并使用代理的重载版本。

PayDayLoansSoap12 是一个自定义绑定，因此您可能需要了解它的实际作用。

如果有任何混淆/疑虑，请告诉我。

# javascript - 对同一页面中的多个表进行过滤和排序

> ID：14195428
> 
> 赞同：0
> 
> 时间：2013-01-07T11:55:42.603
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我在同一页面中有多个表格，例如

表1（包含酒店名称、价格、星级）

表2（包含酒店名称、价格、星级）

表1（包含酒店名称、价格、星级）

表3（包含酒店名称、价格、星级）

表4（包含酒店名称、价格、星级）

......等等作为信封。

我需要 JQUERY PLUGIN 来过滤和排序表格中的数据，例如价格排序器，从低到高价格并过滤酒店名称。我能找到这个插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:58:31.717

jQuery [TableSorter](http://tablesorter.com/docs/#Demo)会为您工作吗？

或者可以在那里找到的任何 gazillions 表排序/过滤：

*   [http://www.tripwiremagazine.com/2012/05/jquery-filter-sort-plugins.html](http://www.tripwiremagazine.com/2012/05/jquery-filter-sort-plugins.html)
*   [http://www.jquery4u.com/plugins/30-amazing-jquery-tables/](http://www.jquery4u.com/plugins/30-amazing-jquery-tables/)
*   ...

# forms - 使用 Zend\Form 的优势？

> ID：14195431
> 
> 赞同：0
> 
> 时间：2013-01-07T11:55:45.833
> 
> 标签：forms, zend-framework2

您好我正在再次创建我的网站，但在 Zend Framework 中，但我很困惑，为什么有 Zend\Form 用于创建表单？我认为最简单的方法是在 HTML 中创建一个视图，但也许我错了。我想知道为什么 Zend 提供我们以这种方式创建表单。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:08:50.670

将对象绑定到表单并使用其他数据填充对象或表单很容易。为表单元素提供过滤器和/或验证器很容易。`echo $this->formCollection($form)`即使你有 120 个表单元素，你也不需要写超过。更改表单实际上也不需要您更改视图（取决于您的工作方式）。表单错误很容易附加到特定元素等...等...

这就是面向对象编程（OOP）。您不需要**任何**这些，但是男孩确实对完成工作有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:50:35.207

`Zend\Form`不仅用于创建表单。它也用于**验证**。当用户提交表单并且您获得数据时，`Zend\Form`可以为您验证数据。例如，它可以检查密码是否至少为 8 个字符。或者，如果电子邮件地址实际上是有效的电子邮件地址。

# c# - 运行我的安装项目导致“模块注册失败”错误

> ID：14195440
> 
> 赞同：1
> 
> 时间：2013-01-07T11:56:04.893
> 
> 标签：c#, wpf, installation, dllregistration, vdproj

我正在尝试部署我的项目并创建一个安装程序。我创建了一个 .vdproj，它有一个输出 setup.msi 运行 .msi 设置向导时，我收到错误：

> “模块 xyz 注册失败。HRESULT -2147024769。请联系您的支持人员。”

注册失败的模块是 C++ dll，而我的应用程序是 WFF-C# 应用程序。

有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:06:48.877

错误是 0x8007007F（十六进制），转换为[Windows 错误代码 127 (0x7F)`ERROR_PROC_NOT_FOUND`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.110%29.aspx)。问题可能是因为 proc [DllRegisterServer](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682162%28v=vs.85%29.aspx)（用于注册由该程序集导出的 COM 类型的标准 proc）不是由 DLL 导出的。您可能需要[注册一个关联的类型库](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221610%28v=vs.85%29.aspx)。

否则，请参阅 Stack Overflow 上的类似问题，例如 [LoadLibrary() 错误代码 127](https://stackoverflow.com/questions/1053180/loadlibrary-error-code-127)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:28:22.943

可能有两个原因

*   您尝试注册的 dll（使用安装程序）不是 activeX dll，因此不需要注册。标准 dll 不需要注册。您只需将其复制到系统文件夹或应用程序文件夹中。您应该尝试从尝试注册所有安装程序的安装程序中删除这些指令

*   第二个 reson 可以按照 akron 的建议，您需要注册关联的类型库而不是 dll 本身。

您可以使用[dependency walker](http://www.dependencywalker.com)找出它是什么类型的dll 以及与之链接的其他dll。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:31:43.810

安装程序抱怨它无法在 DLL 中找到导出的函数来注册它，即[DllRegisterServer 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369359%28v=vs.85%29.aspx)。当 DLL 实际上不是 COM 服务器时，您要求安装程序注册 DLL 的可能性很大。并非每个 C++ dll 都是 COM dll。大多数不是。

您应该能够以在代码中使用 DLL 的方式看到这一点。您通常通过添加对 DLL 或类型库的引用来使用 COM dll，并且您将在构建目录中拥有一个 Interop.Foo.dll 程序集。相反，您在代码中使用具有 [DllImport] 属性的非 COM dll。

将 DLL 的“Register”属性改回 vsdrpDoNotRegister 并重试。

# c - 来自枚举的非法隐式转换？我究竟做错了什么？

> ID：14195442
> 
> 赞同：0
> 
> 时间：2013-01-07T11:56:06.213
> 
> 标签：c, types, enums

我收到错误消息 Error: Illegal implicit conversion from '@enum$1main_c**' to '@enum$1main_c*'

```
//example.h
typedef enum {eg_1, eg_2} valType;

//main.c
#include "example.h"
void main(void)
{
 valType *testVal;
while(1)
 {
 read(x,y,*testval);
 }
} 
```

你能告诉我我做错了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:57:53.777

如果这是`read`from `unistd.h`，它的最后一个参数必须是 a `size_t`，而不是 a `valType`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:01:31.320

你能发布`read()`函数的源代码吗？可能它`testVal`作为一个指针，但你作为一个值传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:17:01.003

没有任何进一步的信息，我可以说 testVal 有一个未定义的值，它是一个未初始化的指针。我*假设*read 会尝试在 testVal 中放入一些东西，所以现在，将您的代码更改为：

```
//example.h
typedef enum {eg_1, eg_2} valType;

//main.c
#include "example.h"
void main(void)
{
 valType testVal;
while(1)
 {
 read(x,y, &testval);
 }
} 
```

让我们知道进展如何。

# jquery - 如何使用 jQuery 访问它？

> ID：14195446
> 
> 赞同：0
> 
> 时间：2013-01-07T11:56:14.413
> 
> 标签：jquery

我是 jQuery 的新手。所以请告诉我如何`this`在循环中使用变量。

例如。

```
this.tblsize=10;
$.each([1,2],function(idx,val){
console.log(this.tblsize)
}); 
```

输出

```
undefined
undifined 
```

但我需要将输出作为`10 10`.

哪里不对了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:58:57.553

您需要使用[闭包](http://jibbering.com/faq/notes/closures/)才能`this`从不同的范围访问：

```
this.tblsize=10;
var self = this;
$.each([1,2],function(idx,val){
    console.log(self.tblsize)
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:58:27.897

只是不要使用它，使用任何其他变量名：

```
var tblsize=10;
$.each([1,2],function(idx,val){
console.log(tblsize)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:57:38.273

你不能使用这个`inside`匿名函数，因为它是另一个范围。

这应该工作

```
 this.tblsize=10;
    var thisref = this;

    $.each([1,2],function(idx,val){
    console.log(thisref.tblsize)
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T12:04:40.823

`this`在调用 $.each 之前创建一个副本。在 $.each`this`中将引用`$.each()`.

```
this.tblsize=10;
var $this = this;
$.each([1,2],function(idx,val){
    console.log($this.tblsize)
}); 
```

[http://api.jquery.com/each/](http://api.jquery.com/each/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T12:01:14.593

***只需尝试以下示例：***

```
<ul>
    <li>foo</li>
    <li>bar</li>
</ul>

$( "li" ).each(function( index ) {
  console.log( index + ": "" + $(this).text() );
}); 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T12:08:32.433

让我们看看你的代码：

```
this.tblsize = 10; 
```

此处，该`tblsize`值已在范围之外指定`$.each()`

接下来如果你这样做：

```
$.each([1,2],function(idx,val){
      console.log(this)
}); 
```

您将获得类似`1`&的值`2`，因为`this`这里指的是`$.each()`方法的内部结果范围。所以，在你的情况下，如果你做类似的事情`this.tblsize`，你肯定会得到类似的东西，`undefined`因为每个里面都没有这个名字的变量。

因此，要获得您想要的，您可以简单地创建一个循环全局对象，将外部范围变量存储在其中并在`$.each()`方法内部访问它，例如：

```
this.tblsize = 10;

// circular global object
var table_size = this;

$.each([1,2],function(idx,val){
      console.log(table_size.tblsize);        // way 1
      console.log($(table_size)[0].tblsize);  // way 2
}); 
```

# wxpython - 从 python 中的 listctrl 中删除

> ID：14195448
> 
> 赞同：2
> 
> 时间：2013-01-07T11:56:27.890
> 
> 标签：wxpython

我想从（python）列表控件中的第 0 个索引中删除一个项目。在我的应用程序中，正在从超过第 0 个索引中删除项目，但没有删除第 0 个索引。我的代码没有报告错误。

例如：- 有以下数据列表；0 keydown(key+ctrl)
1 wait(0.21) 2 click(....) 3 wait(1.25) 以此类推

所以我想从列表控件中删除第一行。在这个例子中，0,1,2,3 只是列表控件的列表索引号。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T15:35:19.843

```
import wx

DATA = [("0", "Zero"), ("1", "One"), ("2", "Two")]

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)

        self.list = wx.ListCtrl(self.panel, style=wx.LC_REPORT)
        self.list.InsertColumn(0, "#")
        self.list.InsertColumn(1, "Number")       
        for data in DATA:
            self.list.Append((data[0], data[1]))

        self.button = wx.Button(self.panel, label="Delete index 0")
        self.button.Bind(wx.EVT_BUTTON, self.OnButton)

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.list, 1, wx.ALL | wx.EXPAND, 5)
        self.sizer.Add(self.button, 0, wx.ALL | wx.EXPAND, 5)
        self.panel.SetSizerAndFit(self.sizer)

        self.Show()

    def OnButton(self, e):
        self.list.DeleteItem(0)

if __name__ == "__main__":
    app = wx.App(False)
    win = MainWindow(None)
    app.MainLoop() 
```

# asp.net - 在 Internet Explorer 中运行 SSRS 2005 报告时出错

> ID：14195449
> 
> 赞同：0
> 
> 时间：2013-01-07T11:56:38.747
> 
> 标签：asp.net, internet-explorer, reporting-services, reportingservices-2005

我们使用 SSRS 2005 开发了一份报告。它嵌入在基于 C#/ASP.Net（3.5 框架/VS 2008）构建的 Web 应用程序中。

报告部署在报告/数据库服务器中，该服务器是两层架构的一部分，即。应用程序和数据库。该报告需要一个多小时来执行和生成输出，因为它调用了一个处理大量数据的存储过程。当报告正在运行时，经过的时间接近一个小时，则会显示一条错误消息：“Internet Explorer 无法显示该网页”。

事件查看器日志有以下消息：

```
事件类型：警告
事件源：ASP.NET 2.0.50727.0
活动类别：网络活动
事件编号：1309
日期：2013 年 1 月 7 日
时间：上午 10:58:04
用户：不适用
计算机：  -  -  -  -  -  -  -  -  -  - 
描述：
事件代码：3005
事件消息：发生未处理的异常。
进程 ID：7456
进程名称：w3wp.exe
帐户名称：NT AUTHORITY\NETWORK SERVICE
异常类型：AspNetSessionExpiredException
异常消息：ASP.NET 会话已过期
请求网址：http://------/ABC/Reserved.ReportViewerWebControl.axd?ReportSession=1ki0jo3ouutixi555breaja4&ControlID=9ab46efcbab44cb987c5b9967fea54c3&Culture=1033&UICulture=1033&ReportStack=1&OpType=SessionKeepAlive&TimerMethod=KeepAliveMethodctl00_ContentPlacePlaceViewer11

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:27:59.543

一个小时的报告执行时间永远不会可行。当数据量增加时会发生什么？如果 2 个用户同时请求报告怎么办？如果 50 个用户同时请求报告怎么办？

我的目标是 5 秒，即使在数据量很大和要求复杂的情况下也可以实现。

您应该重新访问您的 SP 代码和/或索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:23:10.597

What Mike said. If however you like a reaaally slow report, you can set your session timeout in Web.Config: [http://msdn.microsoft.com/en-us/library/h6bb9cz9(vs.80).aspx](http://msdn.microsoft.com/en-us/library/h6bb9cz9(vs.80).aspx)

# android - 如何将 Android 应用程序连接到 CakePhp 以交换数据

> ID：14195461
> 
> 赞同：-1
> 
> 时间：2013-01-07T11:57:24.740
> 
> 标签：android, database, cakephp, login

## 标题

我想为已经创建的网站（在 cakephp 中）创建一个应用程序，

我想从我的应用程序登录到 CakePhp 数据库，我该怎么做？

另外我想从网站获取一些用户信息到我的应用程序请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:49:03.320

对于用户来说，使用 CakePHP 构建的网站与没有使用 CakePHP 构建的网站是一样的。CakePHP 只是简化了构建过程。因此，也就是说，如果您想在 Android 中使用浏览器访问信息，您需要创建一个登录页面或 API。

真的没有一个特定的方法来只针对 android。如果您想连接到一个站点（也许要进行身份验证？）然后看看这样的问题：[How to do HTTP authentication in android?](https://stackoverflow.com/questions/1968416/how-to-do-http-authentication-in-android) 或者做一些谷歌搜索并返回一个更具体的问题

# android - 如何确保用户点击后退按钮后活动产生的线程保持活动状态？

> ID：14195464
> 
> 赞同：0
> 
> 时间：2013-01-07T11:57:31.187
> 
> 标签：android, multithreading

我在活动 A 中有一个列表视图，在活动 B 中有一个列表项的详细视图，现在我在活动 B 中启动一个线程以从 Internet 下载一个 zip 文件，然后点击返回按钮。如何确保线程在完成下载之前一直保持活动状态？我在[这里](https://stackoverflow.com/questions/12969324/how-to-check-if-a-thread-spawned-by-an-activity-is-alive-after-the-activity-has)查看了帖子，但我不确定当系统内存不足时线程是否会死掉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:02:14.080

使用服务下载文件。

# java - 检查android堆大小

> ID：14195469
> 
> 赞同：0
> 
> 时间：2013-01-07T11:57:42.517
> 
> 标签：java, android, air-native-extension

有没有一种好方法可以检查设备在 Java 中的总堆大小中有多少内存？我的应用程序是用 adobe air 编写的，它使用原生 Java 扩展从 SD 卡加载多个图像。我找到了这段代码来检查位图是否可以加载到内存中：

```
public boolean checkBitmapFitsInMemory(long bmpwidth,long bmpheight, int bmpdensity ){

        long reqsize=bmpwidth*bmpheight*bmpdensity;
        long allocNativeHeap = Debug.getNativeHeapAllocatedSize();
        final long heapPad=(long)Math.max(4*1024*1024,Runtime.getRuntime().maxMemory()*0.1);
        if ((reqsize + allocNativeHeap + heapPad) >= Runtime.getRuntime().maxMemory())
        {
            return false;
        }
        return true;

    } 
```

但是，在我的 Galaxy S2 上，它似乎被完全忽略了。也许是因为该应用程序由两部分组成 - 一是 Java，二是 adobe air。在将图像加载到应用程序内存之前，我应该检查其他内存值吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:10:10.183

查看[Android 运行时](http://developer.android.com/reference/java/lang/Runtime.html)

调用`Runtime.getRuntime().freeMemory()`返回可用于正在运行的应用程序的内存资源。

还有，[这](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass%28%29)

# android - 如何在 ListView 中重绘视图

> ID：14195473
> 
> 赞同：0
> 
> 时间：2013-01-07T11:57:53.743
> 
> 标签：android, android-listview, android-fragments

我在片段中有一个 listView 。列表视图中视图的某些文本部分是从适配器中的 Web 下载的。当我从另一个片段更改此文本部分时，我希望第一个片段重绘它的视图。

我试过：

```
myListView.invalidate();
myListView.invalidateViews();
myListView.refreshDrawableState();
adapter.notifyDataSetChanged();
adapter.updateComments(); 
```

UpdateComments 是我自己的功能。我在 onScroll 中保存指向当前显示视图的指针，并要求每个视图更新请求的视图，但没有任何反应。

如果我向下滚动然后向上滚动并使用适配器的 getView 方法重绘我的视图，则会显示新文本。

如何在不滚动的情况下更新视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:38:05.797

更新后在列表中再次使用 setAdapter 或 setListAdapter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:30:38.160

它适用于

```
adapter.notifyDataSetInvalidated(); 
```

但它滚动到列表视图的顶部，所以我然后使用

```
feed.setSelection(adapter.lastPosition); 
```

我在 listview 的 onScroll 方法中获取 lastPosition。

# .net - Mono cecil SaveSymbols(); 在版本 0.9.5.0

> ID：14195474
> 
> 赞同：4
> 
> 时间：2013-01-07T11:57:56.367
> 
> 标签：.net, mono.cecil

有一个 AssemblyDefinition.MainModule.SaveSymbols(); 但在 0.9.5.0 版本中，我们如何在保存 AssemblyDefinition 之前保存 .pdb 文件。

***//这里添加保存.pdb文件的命令***

AssemblyDefinition.Write( ***_*** );

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T01:00:22.613

您首先需要该程序集的副本，`Mono.Cecil.Pdb.dll`然后从您的应用程序中添加对该程序集的引用。

明智地编写代码：

```
var parameters = new WriterParameters ();
parameters.SymbolWriterProvider = new Mono.Cecil.Pdb.PdbWriterProvider ();
assembly.Write ("myassembly.dll", parameters); 
```

# c# - 选项卡在窗口应用程序中不起作用

> ID：14195475
> 
> 赞同：1
> 
> 时间：2013-01-07T11:58:02.163
> 
> 标签：c#, winforms

我的应用程序中有两个文本框，一个是`txtCampaign`，第二个是`txtUrl`。TabIndex 为`txtCampaign`1，TabIndex 为`txtUrl`2。

现在我使用了以下代码：

```
 private void txtCampaign_Enter(object sender, EventArgs e)
 {
        txtCampaign.BorderStyle = BorderStyle.FixedSingle;
        txtUrl.BorderStyle = BorderStyle.Fixed3D;
 }

 private void txtUrl_Enter(object sender, EventArgs e)
 {
       txtUrl.BorderStyle = BorderStyle.FixedSingle;
       txtCampaign.BorderStyle = BorderStyle.Fixed3D;
 } 
```

现在，当我使用第一个文本框中的选项卡时，`txtCampaign`它不允许我转到第二个文本框。

我不确定为什么会这样？但是，如果我删除上面的代码，它对我来说工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:09:31.150

在您的活动中使用 SetFocus()。示例代码：

```
public Form1()
{
    InitializeComponent();
    textBox1.Enter += textBox1_Enter;
    textBox2.Enter += textBox2_Enter;
}

private void textBox2_Enter(object sender, EventArgs e)
{
    textBox1.BorderStyle = BorderStyle.Fixed3D;
    textBox2.BorderStyle = BorderStyle.FixedSingle;
    textBox2.Focus();
}

private void textBox1_Enter(object sender, EventArgs e)
{
    textBox2.BorderStyle = BorderStyle.Fixed3D;
    textBox1.BorderStyle = BorderStyle.FixedSingle;
    textBox1.Focus();
} 
```

# c# - 如何从 sql server 生成 .txt 文件然后打印

> ID：14195477
> 
> 赞同：-2
> 
> 时间：2013-01-07T11:58:13.183
> 
> 标签：c#, sql, sql-server-2008

在谷歌做了几个小时的研究后，我觉得我更困惑了......我想

a) 通过存储过程从 sql server 生成文本文件（.txt 或 .doc .pdf）。该文件包含一些简单布局格式的表格数据

接着

b) 将此文件打印到网络打印机。

以上所有通过代码。有可能吗？有什么想法吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:35:32.900

当我努力寻找合适的解决方案时，我决定分享我的实施

a) 在 bcp 实用程序的帮助下将表数据提取到一个简单的 .txt 文件中。在存储过程里面写类似这样的东西

```
EXEC xp_cmdshell 'bcp "SELECT * FROM [yourDatabase]..[yourTable]" queryout "C:\Folder\archive.txt" -T -w  -t ,' 
```

我使用“，”作为字段终止符。您可以在此处阅读有关 bcp 参数的更多信息[http://msdn.microsoft.com/en-us/library/ms162802.aspx](http://msdn.microsoft.com/en-us/library/ms162802.aspx)

b）现在我有了原始数据，我想打印它。我已经实现了一项服务，它只检查是否创建了新文件。这是一个很好的教程[http://midnightcubicle.wordpress.com/2011/04/ 25/创建-windows-service-in-c/](http://midnightcubicle.wordpress.com/2011/04/25/creating-windows-service-in-c/)

该服务调用一个新进程，该进程运行一个 .exe 文件来完成这项工作。

需要注意的一些事项：

- 通常服务在本地运行。如果你想打印在“用户模式”下运行你的服务，通过 services.msc 检查你的服务属性

- 从 bcp 中提取的数据是“原始”格式，所以如果你想给你的文本一个漂亮的布局，你必须用 StreamReader 读取它的内容，将它的数据保存在内存中（例如，列表中的对象 - 每行都是一个对象 - 每字段一个属性），然后使用 string.Format 和其他格式化技术。

- 您可能会在 Windows 控制台和打印机中看到完全不同的结果。这是因为您的控制台使用了打印机不使用的固定宽度字体（至少默认情况下）。因此，空格在您的打印机上占用的空间更少，而您的字母根据其实际宽度占用或多或少的空间。考虑使用 Lucida Console 或其他固定宽度字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:27:24.470

您可以使用 EXEC @rc = master.dbo.xp_cmdshell 并调用 exe 来打印文件

# python - 从文件类型字段下载文件？

> ID：14195478
> 
> 赞同：-2
> 
> 时间：2013-01-07T11:58:15.040
> 
> 标签：python, selenium, python-2.7, beautifulsoup

我正在寻找一种从不同页面下载文件并将它们存储在本地计算机的特定文件夹下的方法。我正在使用 Python 2.7

请参阅以下字段：

![文件类型字段](../Images/f7c92a5a52109679749ab0070a598363.png)

**编辑**

*这是html内容：*

```
<input type="hidden" name="supplier.orgProfiles(1152444).location.locationPurposes().extendedAttributes(Upload_RFI_Form).value.filename" value="Screenshot.docx">

<a style="display:inline; position:relative;" href="

                                      /aems/file/filegetrevision.do?fileEntityId=8120070&cs=LU31NT9us5P9Pvkb1BrtdwaCrEraskiCJcY6E2ucP5s.xyz">
                                Screenshot.docx
                             </a> 
```

***我刚刚尝试过***的一种可能性：如果添加 html 内容`https://xyz.test.com`并构造如下所示的 URL

[https://xyz.test.com/aems/file/filegetrevision.do?fileEntityId=8120070&cs=LU31NT9us5P9Pvkb1BrtdwaCrEraskiCJcY6E2ucP5s.xyz](https://xyz.test.com/aems/file/filegetrevision.do?fileEntityId=8120070&cs=LU31NT9us5P9Pvkb1BrtdwaCrEraskiCJcY6E2ucP5s.xyz)

并将该 URL 放在浏览器上，然后点击`Enter`让我有机会下载文件，如屏幕截图所述。但是现在我们能找到这样`aems/file/filegetrevision.do?fileEntityId=8120070&cs=LU31NT9us5P9Pvkb1BrtdwaCrEraskiCJcY6E2ucP5s.xyz`的值吗？它在那里存在多少？

**编码** *我到现在为止的尝试*

只是痛苦如何下载该文件。使用脚本构造的 URL：

```
for a in soup.find_all('a', {"style": "display:inline; position:relative;"}, href=True):
    href = a['href'].strip()
    href = "https://xyz.test.com/" + href
print(href) 
```

请在这里帮助我！

如果你们需要我提供更多信息，请告诉我，我很乐意与你们分享。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:56:35.667

正如@JohnZwinck 建议的那样，您可以使用`urllib.urlretrieve`该`re`模块在给定页面上创建链接列表并下载每个文件。下面是一个例子。

```
#!/usr/bin/python

"""
This script would scrape and download files using the anchor links.
"""

#Imports

import os, re, sys
import urllib, urllib2

#Config
base_url = "http://www.google.com/"
destination_directory = "downloads"

def _usage():
    """
    This method simply prints out the Usage information.
    """

    print "USAGE: %s <url>" %sys.argv[0]

def _create_url_list(url):
    """
    This method would create a list of downloads, using the anchor links
    found on the URL passed.
    """

    raw_data = urllib2.urlopen(url).read()
    raw_list = re.findall('<a style="display:inline; position:relative;" href="(.+?)"', raw_data)
    url_list = [base_url + x for x in raw_list]
    return url_list

def _get_file_name(url):
    """
    This method will return the filename extracted from a passed URL
    """

    parts = url.split('/')
    return parts[len(parts) - 1]

def _download_file(url, filename):
    """
    Given a URL and a filename, this method will save a file locally to the»
    destination_directory path.
    """
    if not os.path.exists(destination_directory):
        print 'Directory [%s] does not exist, Creating directory...' % destination_directory
        os.makedirs(destination_directory)
    try:
        urllib.urlretrieve(url, os.path.join(destination_directory, filename))
        print 'Downloading File [%s]' % (filename)
    except:
        print 'Error Downloading File [%s]' % (filename)

def _download_all(main_url):
    """
    Given a URL list, this method will download each file in the destination
    directory.
    """

    url_list = _create_url_list(main_url)
    for url in url_list:
        _download_file(url, _get_file_name(url))

def main(argv):
    """
    This is the script's launcher method.
    """

    if len(argv) != 1:
        _usage()
        sys.exit(1)
    _download_all(sys.argv[1])
    print 'Finished Downloading.'

if __name__ == '__main__':
    main(sys.argv[1:]) 
```

您可以根据需要更改 和 并将脚本另存`base_url`为. 然后从终端使用它就像`destination_directory``download.py`

```
python download.py http://www.example.com/?page=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:02:40.057

我们不知道您从哪个服务获得了第一张图片，但我们假设它位于某种网站上——可能是您公司内部的网站。

您可以尝试的最简单的方法是使用[urllib.urlretrieve](http://docs.python.org/2/library/urllib.html#urllib.urlretrieve)根据其 URL “获取”文件。如果您可以右键单击该页面上的链接、复制 URL 并将其粘贴到您的代码中，您也许可以执行此操作。

但是，这可能不起作用，例如，如果在访问该页面之前需要进行复杂的身份验证。您可能需要编写实际执行登录的 Python 代码（就像用户在控制它，输入密码一样）。如果你走得那么远，你应该把它作为一个单独的问题发布。

# c++ - 允许我更改 QwtPlot 颜色背景的方法

> ID：14195483
> 
> 赞同：0
> 
> 时间：2013-01-07T11:58:39.907
> 
> 标签：c++, qt, qwt

我想知道在创建 QwtPlot 之后可以使用哪些方法来更改它以及如何使用它。到目前为止，我在构造函数中使用 QwtPlot->setCanvasBackground() ，但是在我的程序中，用户可以选择使用其他一些图形选项来更改绘图的背景颜色，这些图形选项都设置在属于类的特定方法中继承自 QwtPlot。有什么建议吗？谢谢你的支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T17:35:39.913

您可以使用[Qt StyleSheets](http://doc.qt.digia.com/qt/stylesheet.html)。以下代码将画布背景颜色设置为灰色：

```
 QwtPlotCanvas { background: #888888; } 
```

# iphone - UISegmentedControl 选定和未选定段的不同字体颜色

> ID：14195484
> 
> 赞同：3
> 
> 时间：2013-01-07T11:58:42.263
> 
> 标签：iphone, uisegmentedcontrol

> **可能重复：**
> [如何更改 UISegmentedControl 的字体颜色](https://stackoverflow.com/questions/9029760/how-to-change-font-color-of-uisegmentedcontrol)

是否可以为`selected`和`unselected` `segment`的文本保留不同的字体颜色`UISegmentedControl`？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:17:49.287

```
// Instantiate as usual
NSArray *items = [NSArray arrayWithObjects:@"first", @"second", [UIImage imageNamed:@"image.png"], nil];
MCSegmentedControl *segmentedControl = [[MCSegmentedControl alloc] initWithItems:items];

// set frame, add to view, set target and action for value change as usual
segmentedControl.frame = CGRectMake(10.0f, 10.0f, 300.0f, 44.0f);
[self.view addSubview:segmentedControl];
[segmentedControl addTarget:self action:@selector(segmentedControlDidChange:) forControlEvents:UIControlEventValueChanged];

// Set a tint color
segmentedControl.tintColor = [UIColor orangeColor];

// Customize font and items color
segmentedControl.selectedItemColor = [UIColor yellowColor];
segmentedControl.unselectedItemColor = [UIColor darkGrayColor]; 
```

如果使用 Interface Builder，添加一个普通的 UISegmentedControl，在 Identity Inspector 中将其类设置为 MCSegmentedControl，在 Attributes Inspector 中设置 Tint。

目前，不支持动画和以下 UISegmentedControl 方法：

```
- (void)setWidth:(CGFloat)width forSegmentAtIndex:(NSUInteger)segment;
- (void)setContentOffset:(CGSize)offset forSegmentAtIndex:(NSUInteger)segment 
```

以下是文件：

[MCSegmentedControl.zip](http://matteocaldari.it/download/MCSegmentedControl.zip)

# unit-testing - 错误：在 cakePHP 的 PHPunit 中找不到类“SebastianBergmann\Version”

> ID：14195486
> 
> 赞同：0
> 
> 时间：2013-01-07T11:58:47.870
> 
> 标签：unit-testing, cakephp, testing, phpunit

我想这不是一个问题，但是当您为 cakePHP 框架安装 PHPunit 时，您可能会遇到这个奇怪的错误：

```
Error: Class 'SebastianBergmann\Version' not found  
File: /var/www/clients/client0/web29/web/app/Vendor/PHPUnit/Runner/Version.php  
Line: 70 
```

这会导致单元测试不起作用。当您转到 /app/Vendor/PHPUnit/Runner/Version.php 时，您可以编辑*公共静态函数 id*方法并将其替换为*return '3.8';*

我不确定这是否是正确的方法，但至少它似乎有效。而且我认为 phpunit 的安装可能会出现问题，所以还要检查一下：[运行 PHPUnit 时出错](https://stackoverflow.com/questions/8991620/error-when-running-phpunit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:36:35.117

PHPUnit 3.8 尚未发布且远非稳定。

我不建议使用它，而是使用已发布的 3.7 分支。

您的文件夹结构表明您正在使用 composer 安装 PHPUnit？在这种情况下，请确保您需要`stable`发布，或者，如果由于其他原因无法发布，请将 PHPUnit 版本放入`3.7.*`.

当前的作曲家安装问题`master`将很快得到解决，但如果您现在没有很好的理由运行 3.8，我会强烈建议您反对它（因为它会再次中断）。

# c# - 通过模式将字符串转换为 TimeSpan

> ID：14195488
> 
> 赞同：0
> 
> 时间：2013-01-07T11:59:00.497
> 
> 标签：c#, .net, datetime, time

我有这个时间字符串`18:08:23.580`模式似乎是`HH:mm:ss.fff` 如何使用我的模式将此字符串转换为`TimeSpan`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:03:06.573

您可以[`TimeSpan.Parse`](http://msdn.microsoft.com/en-us/library/se73z7b9%28v=vs.110%29.aspx)在没有明确模式的情况下简单地使用：

```
TimeSpan.Parse("18:08:23.580") 
```

[**演示**](http://ideone.com/XA7uKu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:03:07.103

尝试：

```
DateTime t = DateTime.ParseExact("18:08:23.580", "HH:mm:ss.fff", ultureInfo.InvariantCulture);
var span = t.TimeOfDay; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:04:20.473

**解析（字符串，IFormatProvider）**

> 将时间间隔的字符串表示形式转换为其等效的 TimeSpan。

更多信息：[这里](http://msdn.microsoft.com/en-us/library/system.timespan.parse.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T12:07:07.063

看起来这是要走的路：

```
 TimeSpan ts =  TimeSpan.ParseExact(value, @"hh\:mm\:ss\.fff", CultureInfo.InvariantCulture); 
```

另请参阅： [为什么 TimeSpan.ParseExact 不起作用](https://stackoverflow.com/questions/11719055/why-does-timespan-parseexact-not-work)

并且：http: [//msdn.microsoft.com/en-us/library/ee372287.aspx](http://msdn.microsoft.com/en-us/library/ee372287.aspx)

# php - wordpress 显示当前页面的兄弟姐妹 w/bootstrap

> ID：14195493
> 
> 赞同：2
> 
> 时间：2013-01-07T11:59:23.510
> 
> 标签：php, html, wordpress, twitter-bootstrap

我正在自定义一个 wordpress 主题，我正在尝试实现一个子菜单，它只显示当前页面的兄弟页面，不包括我所在的页面。例如，如果结构是：

水果
——苹果—— 梨
——橙子

我在“Apples”上，子菜单将显示“梨”和“橙子”的链接。

另一个转折是我正在使用 twitter bootstrap 进行样式设置。我有以下来自[http://wp-snippets.com/list-subpages-and-siblings/](http://wp-snippets.com/list-subpages-and-siblings/)的 wordpress 功能：

```
<?php
global $wp_query;
if( empty($wp_query->post->post_parent) ) {
    $parent = $wp_query->post->ID;
}
else {
$parent = $wp_query->post->post_parent;
} ?>

<?php if(wp_list_pages("title_li=&child_of=$parent&echo=0" )): ?>

<div id="submenu">
    <ul class='breadcrumb'>

 <?php wp_list_pages("title_li=&child_of=$parent" ); ?>

    </ul>
</div>
<?php endif; ?> 
```

我无法弄清楚如何在输出链接（不包括最终链接）之后的链接之间添加分隔符，以及如何从打印中删除我所在的页面。

这是我想要的纯 HTML 标记：

```
<ul class="breadcrumb smaller-bread">
                      <li><a href="<?php echo site_url('/offerings/apples/'); ?>">Apples</a><span class="divider">-</span></li>
                      <li><a href="<?php echo site_url('/offerings/pears/'); ?>">Pears</a><span class="divider">-</span></li>
                      <li><a href="<?php echo site_url('/offerings/oranges/'); ?>">Oranges</a><span class="divider">-</span></li>
</ul> 
```

有没有人有任何提示或指示让我上路？赞赏，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:24:23.127

你可以放一个 IF ！检查每个 li，并根据当前 URL 检查它。像这样的东西会给你当前页面：[http ://webcheatsheet.com/php/get_current_page_url.php](http://webcheatsheet.com/php/get_current_page_url.php)

然后：

```
<?php if(! $pageURL == $curPageURL) ?>
  <li> ... </li>
<?php endif; ?> 
```

然后使用 CSS 放置边框，而不是分隔元素，例如：

```
ul.breadcrumb li {
  border-bottom: 1px solid;
}
ul.breadcrumb li:last-child {
  border-bottom: none;
} 
```

# ios - IOS facebook 收到通知

> ID：14195494
> 
> 赞同：0
> 
> 时间：2013-01-07T11:59:23.840
> 
> 标签：ios, facebook, cocoa, push-notification

我正在开发一个 iOS 应用程序，我希望在我的 facebook 帐户中收到通知时立即收到通知。

我可以使用 JSON 提取通知，每 5 分钟轮询一次。

我可以自动获得推送通知之类的东西，而不是拉取通知。

不是从 facebook 到我的应用程序的推送通知，而是我可以通过什么方式执行此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:01:23.790

您不会收到来自 Facebook 的任何推送通知。Facebook 只会将推送通知发送到他们自己的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:21:06.283

我不熟悉 Facebook 的[通知 API](https://developers.facebook.com/docs/app-notifications/)，但看起来可能有一种方法可以获取给定[用户的通知](http://developers.facebook.com/docs/reference/rest/notifications.get/)（有一些限制）。

一旦您能够使用您的服务器提取 Facebook 通知，那么您将希望再次使用您自己的服务器，使用[Apple Push Notification Service](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)将推送通知发送到用户的移动设备。

这可能需要相当多的后端工作才能发挥作用，或者您可以使用 Parse 或 Urban Airship 之类的东西。但首先我会阅读[Apple Push Notification Service](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)以及如何将推送通知发送到移动设备。

# haskell - 数据族用例

> ID：14195497
> 
> 赞同：21
> 
> 时间：2013-01-07T11:59:29.950
> 
> 标签：haskell, type-families

使用类型*同义词*族的好处很明显——它是类型级函数。

但*数据*系列并非如此——所以我的问题是，数据系列的用例是什么？我应该在哪里使用它？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-07T13:25:27.953

一个好处是数据族是单射的，不像类型族。

如果你有

```
type family TF a
data family DF a 
```

然后你知道这`DF a ~ DF b`意味着`a ~ b`，虽然使用 TF，但你不会——因为任何`a`你可以确定这`DF a`是一个全新的类型（就像`[a]`是一个不同的类型`[b]`，除非当然`a ~ b`），而一个类型族可以映射多个输入类型到相同的现有类型。

第二个是数据族可以部分应用，就像任何其他类型构造函数一样，而类型族不能。

这不是一个特别真实的示例，但是例如，您可以这样做：

```
data instance DF Int    = DInt    Int
data instance DF String = DString String

class C t where
    foo :: t Int -> t String

instance C DF where -- notice we are using DF without an argument
                    -- notice also that you can write instances for data families at all,
                    -- unlike type families
    foo (DInt i) = DString (show i) 
```

基本上，`DF`并且`DF a`它们本身就是实际的、一流的、合法的类型，就像你用 . 声明的任何其他类型一样`data`。`TF a`只是一种计算类型的中间形式。

但我想所有这些都不是很有启发性，或者至少对我来说不是，当我想知道数据系列并阅读类似的东西时。

这是我遵循的经验法则。每当您发现自己重复具有类型族的模式时，并且对于每个输入类型，您都`data`为要映射到的类型族声明一个新类型，最好去掉中间人并改用数据族。

来自[向量](http://hackage.haskell.org/package/vector)库的真实示例。`vector`有几种不同的向量：装箱向量、未装箱向量、原始向量、可存储向量。对于每种`Vector`类型，都有一个对应的可变`MVector`类型（普通向量是不可变的）。所以它看起来像这样：

```
type family Mutable v :: * -> * -> * -- the result type has two type parameters

module Data.Vector{.Mutable} where
data Vector a = ...
data MVector s a = ...
type instance Mutable Vector = MVector

module Data.Vector.Storable{.Mutable} where
data Vector a = ...
data MVector s a = ...
type instance Mutable Vector = MVector

[etc.] 
```

现在，我宁愿拥有：

```
data family Mutable v :: * -> * -> *

module Data.Vector{.Mutable} where
data Vector a = ...
data instance Mutable Vector s a = ...
type MVector = Mutable Vector

module Data.Vector.Storable{.Mutable} where
data Vector a = ...
data instance Mutable Vector s a = ...
type MVector = Mutable Vector

[etc.] 
```

它编码了对于每种`Vector`类型都只有一种`Mutable Vector`类型的不变量，并且它们之间存在一对一的对应关系。a 的可变版本`Vector`总是被称为`Mutable Vector`: 这是它的名字，它没有别的名字。如果你有 a `Mutable Vector`，你可以获得对应的 immutable 的类型`Vector`，因为它作为类型参数就在那里。使用`type family Mutable`，一旦将其应用于参数，它就会评估为未指定的结果类型（大概称为`MVector`，但您不知道），并且您无法向后映射。

# javascript - JQuery Onclick在提交前清除动作值

> ID：14195505
> 
> 赞同：1
> 
> 时间：2013-01-07T12:00:24.833
> 
> 标签：javascript, jquery

我有一个表格：

```
<form id="Myform" action="something here" method="post">

...

<input type="image" src="submit.png" id="mysubmit" name="submit" /> 
```

我需要在提交之前清除表单的操作值。

我怎么能在 JQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:03:47.360

```
$("#Myform").submit(function(){
   $(this).attr("action","");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:03:29.353

我想你正在寻找的是

```
$('MyForm').on('submit', function(){
    $(this).attr('method', '');
}); 
```

# redirect - 使用 htaccess 将子域重定向到域

> ID：14195516
> 
> 赞同：1
> 
> 时间：2013-01-07T12:00:52.823
> 
> 标签：redirect, subdomain

我想将子域重定向到其主域中的文件夹。
子域是 blog.mydomain.com ，我想将其重定向到[http://www.mydomain.com/blog](http://www.mydomain.com/blog)。

我尝试使用 htaccess 文件执行此操作，如下所示：

```
RewriteEngine on
Options +FollowSymlinks -MultiViews

RewriteCond %{SERVER_PORT} =80
RewriteCond 5{HTTP-HOST} ^blog.mydomain.com$ [NC]
RewriteRule ^(.*)$ /blog/$1 [PT,L] 
```

但它不起作用（重定向不会发生）。

有谁知道我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:08:03.600

尝试

```
Redirect 301 / http://www.mydomain.com/blog 
```

如果这不起作用，我会尝试其他的

# mysql - 在数据库中搜索数组元素

> ID：14195520
> 
> 赞同：0
> 
> 时间：2013-01-07T12:01:11.647
> 
> 标签：mysql

我想创建一个名为的表`user_ports`，其中包含用户在数据库中打开的所有端口。

而不是将每个列称为“port_80”，“port_100”

我想知道是否可以将其输入到将被称为`opened_ports`数组的列中。

但是，如果我想打开所有 80 端口的用户，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:14:56.880

据我了解，您只需要在 user_ports 表中有 2 列：user_id 将引用适当的用户，opened_port 将描述特定的打开端口。那么您可能应该将 (user_id,opened_port) 对声明为主键。有了这样的表结构，您可以通过以下查询选择打开 80 端口的用户的 id：

```
SELECT user_id FROM user_ports WHERE opened_port = 80; 
```

您可以将用户打开的*所有*端口作为 CSV 存储在一条记录中，但这将：

1.  需要额外的代码来处理这种诡计；
2.  使您的数据库查询复杂化并减慢速度；
3.  非规范化您的数据库（应该避免）。

# php - 查询未使用动态值执行

> ID：14195527
> 
> 赞同：0
> 
> 时间：2013-01-07T12:01:36.923
> 
> 标签：php, mysql, excel, variables, select

我正在从`$number_column`变量中的 excel 表中读取值

```
$number_column = $data->sheets[0]['cells'][$row1][1]; 
```

然后进行选择查询

```
$query_patent = "SELECT `id` FROM `ipoverview` WHERE number ='$number_column'"; 
```

它不工作。如果我回显我`$number_column`的数据，我将在该位置获取数据。

如果将任何数字硬编码为`$number_column`，则该查询正在执行。

```
 $number_column="12345";
 echo $query_patent = "SELECT `id` FROM `ipoverview` WHERE number ='$number_column'"; //This works 
```

帮我解决这个问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:57:12.307

确保您将 UTF-8 作为 excel 文件的字符编码，并确保您应该将 utf8_general_ci 作为数据库列的排序规则以获取更多信息，请参阅[http://docs.php.net/manual/en /mysqli.set-charset.php](http://docs.php.net/manual/en/mysqli.set-charset.php)。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:10:13.427

试试这个。还有`echo $query_patent`在执行查询之前你是否在该变量上获取一个变量。

```
echo $query_patent = "SELECT `id` FROM `ipoverview` WHERE number ='".$number_column."'"; 
```

上述回声的响应

```
SELECT `id` FROM `ipoverview` WHERE number = 'E1234A'    
SELECT `id` FROM `ipoverview` WHERE number = 'E1234B'
SELECT `id` FROM `ipoverview` WHERE number = 'E1234C' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:11:52.453

你有这条线：

```
echo $query_patent = "SELECT `id` FROM `ipoverview` WHERE number ='$number_column'"; 
```

不应该是这样的：

```
$query_patent = "SELECT `id` FROM `ipoverview` WHERE number ='$number_column'";
$rResult = mysqli_query($dblink,$query_patent)or die("something went wrong when executing this query:<br /><br />" + $query_patent + "<br /><br />"+ mysqli_error($dbLink));
// Dot Stuff with $rResult
while($row = mysqli_fetch_row($rResult)){
    print_r($row);
} 
```

# javascript - 如何在 HTML 页面上显示原始 JSON 数据

> ID：14195530
> 
> 赞同：26
> 
> 时间：2013-01-07T12:01:52.727
> 
> 标签：javascript, jquery, html, css, json

> **可能重复：**
> [使用 JavaScript 的 JSON 漂亮打印](https://stackoverflow.com/questions/4810841/json-pretty-print-using-javascript)

我想像 JSONview 一样在 HTML 页面上显示我的原始 JSON 数据。例如，我的原始 json 数据是：

```
 {
   "hey":"guy",
   "anumber":243,
   "anobject":{
      "whoa":"nuts",
      "anarray":[
         1,
         2,
         "thr<h1>ee"
      ],
      "more":"stuff"
   },
   "awesome":true,
   "bogus":false,
   "meaning":null,
   "japanese":"明日がある。",
   "link":"http://jsonview.com",
   "notLink":"http://jsonview.com is great"
} 
```

它来自[http://jsonview.com/](http://jsonview.com/) ，如果您使用 Chrome 并安装了 JSONView 插件，我想要实现的就像 [http://jsonview.com/example.json 。](http://jsonview.com/example.json)

我尝试过但无法理解它是如何工作的。我想使用 JS 脚本（CSS 突出显示）来自定义格式我的原始 JSON 数据，这些数据由 ajax 检索，最后将其放在 HTML 页面上的任何位置，如 div 元素。是否有任何现有的 JS 库可以实现这一点？或者怎么做？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-07T14:33:20.807

我认为在 HTML 页面上显示数据所需的只是[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify).

例如，如果您的 JSON 是这样存储的：

```
var jsonVar = {
        text: "example",
        number: 1
    }; 
```

然后您只需执行此操作即可将其转换为字符串：

```
var jsonStr = JSON.stringify(jsonVar); 
```

然后你可以直接插入到你的 HTML 中，例如：

```
document.body.innerHTML = jsonStr; 
```

当然，您可能希望`body`通过`getElementById`.

至于您问题的 CSS 部分，您可以使用 RegExp 在将字符串化对象放入 DOM 之前对其进行操作。例如，这段代码（[出于演示目的也在 JSFiddle 上](http://jsfiddle.net/f24UP/2/)）应该注意花括号的缩进。

```
var jsonVar = {
        text: "example",
        number: 1,
        obj: {
            "more text": "another example"
        },
        obj2: {
             "yet more text": "yet another example"
        }
    }, // THE RAW OBJECT
    jsonStr = JSON.stringify(jsonVar),  // THE OBJECT STRINGIFIED
    regeStr = '', // A EMPTY STRING TO EVENTUALLY HOLD THE FORMATTED STRINGIFIED OBJECT
    f = {
            brace: 0
        }; // AN OBJECT FOR TRACKING INCREMENTS/DECREMENTS,
           // IN PARTICULAR CURLY BRACES (OTHER PROPERTIES COULD BE ADDED)

regeStr = jsonStr.replace(/({|}[,]*|[^{}:]+:[^{}:,]*[,{]*)/g, function (m, p1) {
var rtnFn = function() {
        return '<div style="text-indent: ' + (f['brace'] * 20) + 'px;">' + p1 + '</div>';
    },
    rtnStr = 0;
    if (p1.lastIndexOf('{') === (p1.length - 1)) {
        rtnStr = rtnFn();
        f['brace'] += 1;
    } else if (p1.indexOf('}') === 0) {
         f['brace'] -= 1;
        rtnStr = rtnFn();
    } else {
        rtnStr = rtnFn();
    }
    return rtnStr;
});

document.body.innerHTML += regeStr; // appends the result to the body of the HTML document 
```

此代码只是在字符串中查找对象的各个部分并将它们分隔为 div（尽管您可以更改其中的 HTML 部分）。但是，每次遇到花括号时，它都会根据它是左大括号还是右大括号来增加或减少缩进（行为类似于['JSON.stringify'](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)[的*空格*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)参数）。但是您可以将其作为不同类型格式的基础。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T12:08:51.600

请注意，您提供的链接不是 HTML 页面，而是 JSON 文档。格式化由浏览器完成。

您必须决定是否：

1.  您想显示原始 JSON（不是 HTML 页面），如您的示例中所示
2.  显示带有格式化 JSON 的 HTML 页面

如果您想要 1.，只需告诉您的应用程序使用 JSON 呈现响应正文，设置 MIME 类型（应用程序/json）等。在这种情况下，格式由浏览器（和/或浏览器插件）处理

如果是 2.，则需要使用 JSON 呈现一个简单的最小 HTML 页面，您可以在其中以多种方式突出显示它：

*   服务器端，取决于您的堆栈。几乎每种语言都有解决方案
*   带有 Javascript 高亮库的客户端。

如果您提供有关堆栈的更多详细信息，则提供示例或资源会更容易。

编辑：例如，对于客户端 JS 突出显示，您可以尝试[higlight.js](http://softwaremaniacs.org/soft/highlight/en/ "高亮.js")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:12:06.890

除 tag 之外的任何 HTML 标记中`<script>`的 JSON 都只是文本。因此，就像您在 HTML 页面中添加故事一样。

但是，关于格式化，这是另一回事。我想你应该改变你的问题的标题。

看看[这个](https://stackoverflow.com/questions/883977/display-json-as-html)问题。另请参阅[此](http://chris.photobooks.com/json/default.htm)页面。

# file - 如何在辅助存储器中实现不同的封闭散列变体？

> ID：14195533
> 
> 赞同：0
> 
> 时间：2013-01-07T12:02:08.903
> 
> 标签：file, data-structures, filesystems

我真的不知道如何放置它，但是，除了它在主内存（即堆）中实现之外，我如何将变体 1,2 或 3 或任何变体实现到我们操作文件的辅助内存中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:31:48.953

假设您的辅助内存是诸如硬盘驱动器之类的寻道时间相对较慢的东西，通常您希望实现一个基于“桶”的封闭式哈希方案，其中桶可以相对快速地全部分页到主内存中。通过这种方式，您*通常*不必为冲突或未存储的密钥执行昂贵的磁盘寻道。这不是一项特别简单的工作，通常最终会使用经典[gdbm](http://www.gnu.org.ua/software/gdbm/)或[其他](http://www.dss.ca/dx/free_databases/free_dbs.html)库（另见[wikipedia](http://en.wikipedia.org/wiki/Dbm)）。

大多数存储桶方案都基于[可扩展散列](http://en.wikipedia.org/wiki/Extendible_hashing)，并具有一种特殊情况，用于尝试存储不能很好地放入存储桶中的大键或数据。[CiteSeer](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.127.4934)也是查找与可扩展散列相关的论文的好地方。（例如，请参阅链接论文的参考资料。）

# apache-flex - Flex 4子元素错误

> ID：14195535
> 
> 赞同：0
> 
> 时间：2013-01-07T12:02:14.407
> 
> 标签：apache-flex, flex4, flex3, flash-builder

我在上面的代码中得到一个错误，

**错误：用作“mxmlContentFactory”默认属性值的“FormItem”子元素必须是连续的。**

```
<s:Form id="bxPrePaidTypeAdvanced" width="100%">
    <s:layout>
    <s:VerticalLayout paddingTop="0" paddingLeft="0" paddingRight="0" paddingBottom="0"/>
    </s:layout>

    <s:FormItem width="0" label="Form Item:">
    <s:Label text="label text" />
    <s:layout>
    <s:HorizontalLayout paddingLeft="{(-1)*(rbPerDay.width + 16)}" gap="16"/>   
    </s:layout>

    <mx:RadioButton groupName="prePaidAdvanced"
id="rbPerDay"
label="{resourceManager.getString('locale','perDay')}"
labelPlacement="left"
change="rbPerDay_changeHandler(event)"/>

<mx:ComboBox id="cbDueDay" width="80" dataProvider="{daysArray}"/>
</s:FormItem> 
```

我正在将 flex 3 迁移到 4，所以我不知道是否需要在这里进行一些更改。

还有一件事，当我尝试更改`<mx:RadioButton to <s:RadioButton`以下错误时，出现 **无法解析组件类型 spark.component.RadioButton 的属性“labelPlacement”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:59:40.380

除了布局和所有其他格式设置之外，这里的问题是您将 mxml 对象的默认值（一个因组件而异的属性）与其他属性混合在一起。每个 mxml 组件都有一个默认属性。默认属性不需要您在对象前面加上属性名称，就像您在设置布局时所做的那样。

让我们分解你的子对象`<s:FormItem />`：

*   第一个子项是一个显示对象，a `<s:Label />`-- 因为这个标签只是作为表单项的子项出现，所以它使用称为“mxmlContentFactory”的默认属性。

*   第二个孩子是`<s:layout>`财产。这个标签告诉`<s:FormItem />`设置它的`layout`属性 ... 在这种情况下为 a `<s:HorizontalLayout />`。在这里使用非默认布局可能很好，这绝对不是您的错误消息的原因。

*   第三个孩子是另一个显示对象 a `<s:RadioButton />`。这个孩子应该是第一个孩子正在使用的默认属性 (mxmlContentFactory) 的一部分。

您的错误消息指出，用于“默认属性”的项目应该是连续的。因此，通过将布局属性设置在两个“默认”属性的中间，您会创建此错误。

解决方案很简单：将任何属性声明（如`<s:layout>`）移动到表单项标记的开头或结尾，这样它们就不会干扰“默认属性”使用的值：

```
<s:FormItem width="0" label="Form Item:">
    <s:layout>
        <s:HorizontalLayout paddingLeft="{(-1)*(rbPerDay.width + 16)}" gap="16"/>   
    </s:layout>

    <s:Label text="label text" />
    <mx:RadioButton groupName="prePaidAdvanced" id="rbPerDay" label="{resourceManager.getString('locale','perDay')}" labelPlacement="left" change="rbPerDay_changeHandler(event)"/>

    <mx:ComboBox id="cbDueDay" width="80" dataProvider="{daysArray}"/>
<s:/FormItem> 
```

`HorizontalLayout`此错误会在 Flex 3 或 Flex 4中发生。同样，它与您尝试使用`FormItem`.

# java - 如何强制 Eclipse Applet Viewer 执行安全检查？

> ID：14195537
> 
> 赞同：1
> 
> 时间：2013-01-07T12:02:19.920
> 
> 标签：java, eclipse, security, applet

我在 Eclipse 中开发小程序，使用默认的内置小程序查看器运行良好。由于许多安全异常，它在浏览器中不起作用。因此，每次代码更改时，我都必须重建 jar 并在浏览器 (IE) 中运行以进行测试。

如何强制 Eclipse Applet Viewer 使用与小程序的 IE 浏览器相同的安全策略？

我尝试如下指定 JVM 参数，但小程序在 Eclipse 中仍然成功，但由于安全策略，我需要它失败。

```
-Djava.security.policy=="java.policy.applet" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:13:03.967

Eclipse 会自动在已编译项目的根目录中创建一个策略文件“java.policy.applet”，该文件授予所有权限。并设置JVM参数“-Djava.security.policy=java.policy.applet”。似乎无法禁用此行为。

您可以尝试使用不同的策略文件添加相同的 JVM 参数，但是 Eclipse 在您的之后添加其参数，并且 JVM 似乎只考虑最后一个。所以这没有帮助。

但是，如果您在源文件夹的根目录中创建自己的策略文件 (java.policy.applet)，Eclipse 不会覆盖它。您可以复制 %JAVA_HOME%\lib\security\java.policy 以获取真正的 java 策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:27:05.093

首先，您需要启用安全管理器。下面的 JVM 选项将为您执行此操作：

-Djava.security.manager

启用安全管理器将使用 Eclipse 使用的任何 Java 版本的默认安全设置（例如：java.policy）。

IE 可能正在使用它自己的 JRE，它与您的 Eclipse JRE 版本不同。你在这里有两个选择。

1) 通过更改 IE 的 JRE 版本，让您的浏览器使用与 Eclipse 相同的 JRE。在 Windows7 中，单击控制面板>Java>（选择 Java 选项卡）>添加安装在系统上的 Eclipse 使用的 JRE 路径

2) 更改 Eclipse JRE 环境以使用与您的 IE 相同的 JRE。

-Djava.security.policy=java.policy PayrollApp

# android - 在 android 中为 ksoap2 中的标头提供安全性

> ID：14195540
> 
> 赞同：1
> 
> 时间：2013-01-07T12:02:21.323
> 
> 标签：android, bpel, ksoap

我想使用 ksoap2 库在 android 中调用 wsdl 文件。我必须为肥皂信封中的标题提供安全性。我提出以下类型的肥皂请求，如下所示。

```
<soap:Envelope 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">

    <soap:Header>
        <wsse:Security 
            xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
            xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
            xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" soap:mustUnderstand="1">
                <wsse:UsernameToken 
                    xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
                    xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
                            <wsse:Username>cbrown</wsse:Username>
                            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">welcome</wsse:Password></wsse:UsernameToken>
        </wsse:Security>
    </soap:Header>
    <soap:Body xmlns:ns1="http://xmlns.oracle.com/bpel/aubi/mobile/Worklist">
        <ns1:WorklistRetrievalREQ>
            <ns1:WorklistType>HR_OFFER</ns1:WorklistType>
            <ns1:Status>TODO</ns1:Status>
            <ns1:Mode/>
        </ns1:WorklistRetrievalREQ>
    </soap:Body>
</soap:Envelope> 
```

但我不知道如何在信封头（）中提供安全性。所以，请帮助代码。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:55:43.723

最后我得到了我的问题的答案。

```
public class SOAP_WebService extends Activity
{

    private final String NAMESPACE = "http://ws.simple/";
    private final String URL = "http://10.0.2.2/SimpleWebservice/simple";
    private final String SOAP_ACTION = "http://ws.simple/getString";
    private final String METHOD_NAME = "getString";

    public void onCreate(Bundle savedInstanceState) 
    {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.soap_webservice);

         Button btnClick = (Button) findViewById(R.id.btnClick);
         btnClick.setOnClickListener(new OnClickListener()
         {
            @Override
            public void onClick(View v) 
            {
                callWebservice();
            }
        });
    }
    public void callWebservice()
    {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        PropertyInfo weightProp =new PropertyInfo();
        weightProp.name = "arg0";
        weightProp.setValue("rajan");
        request.addProperty(weightProp);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        // create header
        Element[] header = new Element[1];
        header[0] = new Element().createElement("http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd","Security");
        header[0].setAttribute(null, "mustUnderstand","1");

        Element usernametoken = new Element().createElement("http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", "UsernameToken");
        usernametoken.setAttribute(null, "Id", "UsernameToken-1");
        header[0].addChild(Node.ELEMENT,usernametoken);

        Element username = new Element().createElement(null, "n0:Username");
        username.addChild(Node.IGNORABLE_WHITESPACE,"CBROWN");
        usernametoken.addChild(Node.ELEMENT,username);

        Element pass = new Element().createElement(null,"n0:Password");
        pass.setAttribute(null, "Type", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText");
        pass.addChild(Node.TEXT, "welcome");

        usernametoken.addChild(Node.ELEMENT, pass);

        // add header to envelope
        envelope.headerOut = header;

        Log.i("header", "" + envelope.headerOut.toString());

        envelope.dotNet = false;
        envelope.bodyOut = request;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        Log.i("bodyout", "" + envelope.bodyOut.toString());

        try 
        {
            androidHttpTransport.debug = true;
            androidHttpTransport.call(SOAP_ACTION, envelope);

            SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            Log.i("myApp", response.toString());
        } 
        catch (SoapFault e)
        {
            e.printStackTrace();
        }
        catch (Exception e) 
        {
            e.printStackTrace();
            Log.d("Exception Generated", ""+e.getMessage());
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T09:28:28.213

这对我有用...试试这个。

```
public static Element buildAuthHeader() {
        Element headers[] = new Element[1];
        headers[0]= new Element().createElement("http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", "Security");
        headers[0].setAttribute(null, "mustUnderstand", "1");
        Element security=headers[0];

        //user token
        Element usernametoken = new Element().createElement(security.getNamespace(), "UsernameToken");
        usernametoken.setAttribute("http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd", "Id", "UsernameToken-14CBAE357AC169AFA614664925178422");

        //username
        Element username = new Element().createElement(security.getNamespace(), "Username");
        username.addChild(Node.TEXT, HttpConstant.REQ_HEADER_USERNAME);
        usernametoken.addChild(Node.ELEMENT,username);

        // password
        Element password = new Element().createElement(security.getNamespace(), "Password");
        password.setAttribute(null, "Type", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText");
        password.addChild(Node.TEXT, HttpConstant.REQ_HEADER_PASSWORD);
        usernametoken.addChild(Node.ELEMENT,password);

        headers[0].addChild(Node.ELEMENT, usernametoken);

        return headers[0];
    } 
```

# bash - FTP并从文件中获取行数

> ID：14195542
> 
> 赞同：0
> 
> 时间：2013-01-07T12:02:33.633
> 
> 标签：bash, unix, ftp, mainframe

**FTP 服务器**- xxx.xx.xxx.xxx（大型机）

**Unix**

```
$> ftp xxx.xx.xxx.xxx 
$> get filename 
```

**问题**

在该实用程序中，我们希望**从文件中获取行数**。

可以通过以下方式完成：

*   使用 ftp 获取 UNIX 路径中的文件

*   应用于`wc -l`该文件。

但是我们对上述技术几乎没有问题：

*   空间问题（文件大小 > 100 GB）。

*   资源和耗时。

**使用 FTP 从文件中获取行数的**任何简单解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:32:34.367

大型机上的 USS 安装了 wc 实用程序。假设您必须在分布式系统上运行实用程序，您可以使用 FTP 提交 JCL 作业，该作业使用 bpx 批处理在您感兴趣的 USS 文件上运行 wc 实用程序。您可以将 wc 输出通过管道传输到文件，然后检索该文件以在您的实用程序中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:33:51.293

建议：

创建一些脚本或程序，定期检查行数并将其写入文件，例如 number_of_line.txt

FTP 文件 number_of_line.txt 并提取信息。

# python - 如何在 Django 中处理数据库异常

> ID：14195544
> 
> 赞同：19
> 
> 时间：2013-01-07T12:02:37.840
> 
> 标签：python, django

我想知道处理数据库异常并将消息返回给用户的最佳方法。我一直在`messages.add_message`尝试查看我的观点。

例如：

以下错误`(1062, "Duplicate entry '123321' for key 'PRIMARY'")`。显示回用户友好消息：`"Error uploading CSV Duplicate entries"`

1.  是推荐的方式吗？

2.  是否有任何关于错误处理的好教程（即博客文章）作为一种好方法推荐？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T12:19:13.500

`Database Exceptions`已[记录](https://docs.djangoproject.com/en/dev/ref/exceptions/#database-exceptions)，请查看[此答案](https://stackoverflow.com/a/11293459/630877)以查看如何使用它们的示例。

[如果您在处理表单](https://docs.djangoproject.com/en/dev/topics/forms/#working-with-forms)时遇到此错误，您可能应该在验证表单时处理该异常。因此，如果引发异常，您可以使用适当的错误消息[重新显示表单。](http://www.djangofoo.com/61/show-form-errors-non-fiel-errors)

# python - 使用 pyside 截取 iFrame

> ID：14195546
> 
> 赞同：1
> 
> 时间：2013-01-07T12:02:47.653
> 
> 标签：python, qt, python-3.x, pyqt, pyside

我在截取 Google 翻译页面的屏幕截图时遇到问题。下面的脚本在*没有*谷歌翻译的情况下工作正常（截图）：

```
class Render(QWebPage):
    def __init__(self, url):
        self.web_page = QWebPage()
        self.finished = False
        s = self.web_page.settings()
        s.setAttribute(QWebSettings.JavascriptCanOpenWindows, False)
        s.setAttribute(QWebSettings.PluginsEnabled, True)
        self.web_page.mainFrame().setScrollBarPolicy(Qt.Horizontal, Qt.ScrollBarAlwaysOff)
        self.web_page.loadFinished.connect(self._loadFinished)  
        self.web_page.mainFrame().load(QUrl(url))

    def _loadFinished(self, result):
        frame = self.web_page.mainFrame()
        size = frame.contentsSize()
        size.setWidth(1000)
        self.web_page.setViewportSize(size)
        image = QImage(self.web_page.viewportSize(), QImage.Format_ARGB32)
        painter = QPainter(image)
        frame.render(painter)
        painter.end()
        self.filepath="screenshot_name.jpg"
        image.save(self.filepath)
        self.finished = True

def run(url):
    app=QApplication.instance()
    if not app:
        app = QApplication(sys.argv)
    r = Render(url)
    while not r.finished:
        app.processEvents()
        time.sleep(0.01)
    return r.filepath

news_url="http://arabic-media.com/arabicnews.htm"
news_url_google_translate = "http://translate.google.com/translate?hl=en&sl=auto&tl=en&u="+news_url
run(news_url_google_translate) 
```

但是我需要对翻译后的页面进行截图。谷歌翻译页面创建 iframe。所以我用下面的方法对内框（name=c）进行了截图：

```
frame = self.web_page.mainFrame().childFrames()[0] 
```

不幸的是，我的脚本仍在拍摄黑色屏幕截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:12:17.570

看看这个例子是否适合你。网络管理器的`finished`信号连接到一个检查已完成下载的 url 的插槽，如果在其中找到则触发屏幕截图`urlRequest`：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4 import QtCore, QtGui, QtWebKit, QtNetwork

urlTranslate = "http://translate.google.com/translate?hl=en&sl=auto&tl=en&u=http://arabic-media.com/arabicnews.htm"
urlRequest   = "http://www.google.com/cse/intl/ar/images/google_custom_search_watermark.gif"

class myWindow(QtWebKit.QWebView):
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)

        self.page().mainFrame().setScrollBarPolicy(QtCore.Qt.Horizontal, QtCore.Qt.ScrollBarAlwaysOff)
        self.page().mainFrame().setScrollBarPolicy(QtCore.Qt.Vertical, QtCore.Qt.ScrollBarAlwaysOff)

        self.page().networkAccessManager().finished.connect(self.on_networkAccessManager_loadFinished)

        self.load(QtCore.QUrl(urlTranslate))

    @QtCore.pyqtSlot(QtNetwork.QNetworkReply)
    def on_networkAccessManager_loadFinished(self, reply):
        if urlRequest in reply.url().toString():
            self.takeScreenshot()

    def takeScreenshot(self):
        fileName = self.title() + ".png"

        self.page().setViewportSize(QtCore.QSize(1000, 2000))

        image   = QtGui.QImage(self.page().viewportSize(), QtGui.QImage.Format_ARGB32)
        painter = QtGui.QPainter(image)

        self.page().mainFrame().render(painter)
        painter.end()

        if not image.isNull():
            image.save(fileName)
            print "Succesfully saved '{0}'".format(fileName)

        else:
            print "Failed to save '{0}'".format(fileName)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myWindow')

    main = myWindow()
    main.show()

    sys.exit(app.exec_()) 
```

![图片](../Images/36cdbd689880ba8160635f6f4af3dc8c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:54:46.527

我已经使用下面的代码修复了整页加载问题。现在这段代码将在 30 秒后停止并截取屏幕截图。

```
 self.web_page.networkAccessManager().finished.connect(self.on_networkAccessManager_loadFinished)
    self._error = None

    request = QNetworkRequest()
    request.setUrl(QUrl(url))

    self.timeout_timer = QTimer()
    self.timeout_timer.timeout.connect(self._request_timed_out)

    self.timeout_timer.start(30 * 1000)  #30 seconds
    self.web_page.mainFrame().load(request)

def _request_timed_out(self):
    self._error = 'Custom request timeout value exceeded.'
    print self._error
    self.timeout_timer.stop()
    self.web_page.killTimer(0)
    self.web_page.loadFinished.emit(False)
    self.takeScreenshot() 
```

# asp.net - 部署 Web 应用程序：如何使一页安全 (https)

> ID：14195547
> 
> 赞同：3
> 
> 时间：2013-01-07T12:02:48.900
> 
> 标签：asp.net, iis-7, https, web-hosting, web-deployment

我是 Web 部署的新手，我部署了一个用于测试`IIS`的网站，该网站是不安全的 ( `http`) 网站，但一个页面应该是安全的 ( `https`)。

谁能建议我如何实现它，并且在“http”和“https”之间切换时它不应该警告用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:08:41.307

`SSL`或*安全套接字层*将通过绑定绑定到网站。也就是说，您可以告诉 IIS 将传入的请求流量重定向到网站，例如，当请求的 URL 类似于`http://domain.com/`or`https://doamin.com`或`http://200.202.150.200:8080/`类似的东西时。

因此，只为一页设置 HTTPS 不是 IIS 的问题。而是如何在重定向用户时管理您的 URL。换句话说，这是一个导航问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:06:08.500

我没有使用过 IIS，但我最近使用 Apache 做到了这一点。

我做了以下事情：

*   为您希望保护的页面设置重定向，使其重定向到 HTTPS。
*   为每个其他页面设置重定向以从 HTTPS 重定向到 HTTP
*   确保图片 css 和 js 等静态文件不受上述规则影响（这些文件需要同时在 HTTP 和 HTTPS 上工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T17:05:02.387

如果您在商业上需要此功能，我建议您使用 Helicon 工具将该特定页面重定向到`HTTPS`.

使用 Helicon 工具，您可以通过编写规则将`HTTP`请求重定向到任何特定页面或整个站点。`HTTPS`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T17:14:03.370

在 IIS 7 中，可以在“URL 重写”部分为特定网站定义新规则。通过这种方式，您可以定义一个常规过期时间，并在此基础上，您可以将任何与表达式匹配的页面重定向到您想要的页面。假设您要将 http:\x.com\sample.aspx 重定向到 https:\x.com\sample.aspx。为此，请执行以下步骤：

*   在 IIS 上选择您的网站
*   点击 URL 重写
*   添加规则
*   选择空白规则
*   然后在这种情况下定义您的模式：让我们说 ^sample（任何以示例开头的页面）。您可以根据需要定义任何表达式。
*   在操作部分中，在操作类型下拉列表中选择重定向
*   在重定向 URL 中放入 https:\x.com\sample.aspx
*   保存并重新启动您的网站

然后，您可以根据需要添加任何其他规则来匹配您的请求并且在其他一些复杂的场景中，您可以在此处编写自己的脚本

# c# - 无法在 Visual Studio 2010 中使用服务器资源管理器创建 SQL 数据库

> ID：14195549
> 
> 赞同：1
> 
> 时间：2013-01-07T12:02:56.890
> 
> 标签：c#, sql-server, visual-studio-2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:13:58.683

是的，您猜对了，这是与您用于创建数据库的凭据有关的问题（实际上在您的情况下没有访问权限）

[Dariusz Parys在这里](http://blogs.msdn.com/b/dparys/archive/2009/09/17/create-database-permission-denied-in-database-master-my-fix.aspx)为您的问题提供了一个很好的解决方案

# php - 在 CodeIgniter 中触发事件

> ID：14195557
> 
> 赞同：0
> 
> 时间：2013-01-07T12:03:32.637
> 
> 标签：php, codeigniter

有没有办法在 CodeIgniter 中的某些函数调用之前调用某个事件 [events]？！从我读到的关于钩子的内容中......它们看起来很好，但它们是在调用整个控制器之前/之后执行的。我正在寻找类似的东西，但在功能级别而不是控制器级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:34:16.967

不。

钩子是应用程序中的预定义点，允许您在该点执行某些操作。

Hooks 无法知道你将要运行或已经运行的函数——你需要自己告诉应用程序。无论是在函数中还是在自己调用函数之前/之后。

# yii - 在 yii 登录中添加错误代码

> ID：14195560
> 
> 赞同：0
> 
> 时间：2013-01-07T12:03:48.460
> 
> 标签：yii

我正在尝试在我的登录名中添加新的自定义错误，如果 user_status 为 '0' 那么它应该给出错误，我按如下方式进行：

用户身份.php

```
const ERROR_USERNAME_INACTIVE=68;
    public function authenticate()
    {
        $user = Users::model()->findByAttributes(array('email'=>$this->username));

        if ($user===null)
        {
            $this->errorCode=self::ERROR_USERNAME_INVALID;
        }
        else if ($user->password !== md5($this->password))
        {
            $this->errorCode=self::ERROR_PASSWORD_INVALID;
        }
        else if($user->user_status !='1')
        {
            $this->errorCode=self::ERROR_USERNAME_INACTIVE;
        }
        else 
        {
            $this->errorCode=self::ERROR_NONE;
            $this->_id = $user->id;
        }
        return !$this->errorCode;
    } 
```

在 login.php 中

```
case UserIdentity::ERROR_NONE:
                    Yii::app()->user->login($identity);
                    break;
                case UserIdentity::ERROR_USERNAME_INVALID:
                    $this->addError('username','No Such user is associated with us .');
                    break;
                case UserIdentity::ERROR_USERNAME_INACTIVE:
                    $this->addError('user_status','Sorry, this user is not activated yet');
                default: // UserIdentity::ERROR_PASSWORD_INVALID

                    $this->addError('password','Password is incorrect.');
                    break; 
```

现在我遇到的问题是，当 user_Status 为 !=1 时，它会正确给出错误，但也会给出，密码不正确，而密码正确

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:10:23.300

您忘记`break`在最后一个 case 语句中添加 a。没有休息，`default`将被执行。

```
...
    break;
case UserIdentity::ERROR_USERNAME_INACTIVE:
    $this->addError('user_status','Sorry, this user is not activated yet');
    break;
default: // UserIdentity::ERROR_PASSWORD_INVALID
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:09:49.430

抱歉，我犯了一个愚蠢的错误，在 switch case 之后，我忘记放 break 语句，所以下一个默认语句也在执行。

```
 case UserIdentity::ERROR_USERNAME_INACTIVE:
             $this->addError('user_status','Sorry, this user is not activated yet');
             **break;**
                default: // UserIdentity::ERROR_PASSWORD_INVALID

                    $this->addError('password','Password is incorrect.');
                    break; 
```

# php - 在选择框中获取月份

> ID：14195564
> 
> 赞同：-2
> 
> 时间：2013-01-07T12:04:32.517
> 
> 标签：php, loops

```
<select name="month" id="month" >
    <option value="">Select</option>
    <?php

    for ($i = 0; $i < 12;   $i++) {
    $date_str = date('M', strtotime("+ $i months"));
    echo "<option value=$i>".$date_str ."</option>";

    } ?>
    </select> 
```

当我从 0 开始运行此代码值时，我想从 1 开始

例如：一月的值应该是“1”。这怎么可能 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:05:45.560

通过在输出前向每个月的数字添加一 (1)。

```
for( $i = 0; $i < 12; $i++ )
{
    $date_str = date( 'M', strtotime('+ $i months') );
    echo sprintf( '<option value="%d">%s</option>', $i + 1, $date_str );
} 
```

顺便说一句：HTML 属性应该用引号来写，以防止空格导致失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T12:10:28.090

```
<select name="month" id="month" >
<option value="">Select</option>
<?php

for ($i = 0; $i < 12; ) {
$date_str = date('M', strtotime("+ $i++ months"));
echo "<option value=$i>".$date_str ."</option>";

} ?>
</select> 
```

将 ++ 移到 strtotime 函数之后但显示之前将起作用。您需要将 for 的最后一部分留空才能正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:07:06.003

对于 ($i = 1; $i <= 12; $i++)

# sql - 如何在这里运行选择查询？

> ID：14195567
> 
> 赞同：0
> 
> 时间：2013-01-07T12:04:39.067
> 
> 标签：sql, time, range

这是我的查询

```
SELECT * 
FROM tbl_djr 
WHERE 1=1 
    AND djr_date_of_work >='12/31/2012'  
    AND djr_date_of_work<='01/06/2013' 
ORDER BY djr_id 
```

日期格式 = m/d/Y

这是我的桌子

```
djr_date_of_work    djr_client_name       
01/03/2013              Maitland CC     
01/07/2013              kokil CC 
01/01/2013              Maitland CC 
01/04/2013              Maitland CC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:37:49.170

```
SELECT * 
 FROM tbl_djr 
 WHERE 1=1 
  AND djr_date_of_work >='12/31/2012'  
  AND djr_date_of_work<='01/06/2013' 
ORDER BY djr_id 
```

上面的查询将不起作用，因为您使用了 and 条件表示 。

对于相同的条件，它应该同时满足 djr_date_of_work >='12/31/2012' 和 djr_date_of_work<='01/06/2013'

试试下面的查询

```
 SELECT * 
 FROM tbl_djr 
 WHERE 1=1 
  AND djr_date_of_Work between '12/31/2012'   and '01/06/2013' 
ORDER BY djr_id 
```

如果您的 djr_date_of_Work 是日期列，请尝试以下

```
 SELECT * 
 FROM tbl_djr 
 WHERE 1=1 
  AND djr_date_of_Work between TO_DATE('12/31/2012','DD/MM/YYYY') and TO_DATE('01/06/2013','DD/MM/YYYY') 
ORDER BY djr_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:14:14.347

[SQL小提琴](http://sqlfiddle.com/#!6/5e3be/1)

**MS SQL Server 2012 架构设置**：

```
CREATE TABLE tbl_djr  
    (djr_id int,[djr_date_of_work] datetime, [djr_client_name] varchar(11))
;

INSERT INTO tbl_djr  
    ([djr_id],[djr_date_of_work], [djr_client_name])
VALUES
    (1,'01/03/2013', 'Maitland CC'),
    (2,'01/07/2013', 'kokil CC'),
    (3,'01/01/2013', 'Maitland CC'),
    (4,'01/04/2013', 'Maitland CC')
; 
```

**查询 1**：

```
SELECT djr_id,convert(varchar(10), djr_date_of_work, 101),djr_client_name
FROM tbl_djr
WHERE djr_date_of_work BETWEEN '12/31/2012'
    AND '01/06/2013'
ORDER BY djr_id 
```

**[结果](http://sqlfiddle.com/#!6/5e3be/1/0)**：

```
| DJR_ID |   COLUMN_1 | DJR_CLIENT_NAME |
-----------------------------------------
|      1 | 01/03/2013 |     Maitland CC |
|      3 | 01/01/2013 |     Maitland CC |
|      4 | 01/04/2013 |     Maitland CC | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:12:47.500

如果没有异常/潜在问题，这很难诊断，但是正如有人在评论中指出的那样，没有`djr_id`列，因此您的查询无法执行。进一步声明：

`where 1=1`

是无用的，因为它总是评估为真。

你想要的是像这样修改你的架构：

```
alter table tbl_djr add column djr_id as number 
```

语法因您的数据库而异，但伪代码将帮助您入门。您的最终查询应如下所示：

```
select * from tbl_djr where djr_date_of_Work between '12/31/2012'   
and '01/06/2013' order by djr_id 
```

作为一种风格，这个名称：
`tbl_djr`不提供任何信息，因为已知这`djr`将是一个表格。此外，所有表名都应该是复数名称，例如`djrs`

# c# - 如何通过 Uri 创建视图的实例

> ID：14195569
> 
> 赞同：1
> 
> 时间：2013-01-07T12:04:40.987
> 
> 标签：c#, .net, silverlight

假设我有这个路径**/Views/LoginView.xaml**，如何在 Silverlight 中通过指定的 Uri 创建 View 的实例？

**编辑：**我正在开发一个完全由其他开发人员开发的项目。我想做的是一个简单的日志系统，它能够记录用户访问的每个视图。MainPage 中有一个框架和一个负责处理对 Pages 的请求的类。类具有对 MainPage 及其框架的引用，并具有通过给定路径导航到特定页面的方法。我知道我在这里有记录该请求的路径，但它只是一个路径，我希望有一个该页面的实例来获取其标题并记录该标题而不是其路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:40:47.807

据我了解，您需要在给定类名的情况下创建一个类的实例。这可以使用反射来实现，更具体地说是[Activator.CreateInstance(string className)](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)
您可以使用[Path.GetFileNameWithoutExtension()从路径中提取类名](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)

# html - 拆分 A/B 测试

> ID：14195575
> 
> 赞同：0
> 
> 时间：2013-01-07T12:05:09.767
> 
> 标签：html, google-analytics, ab-testing

我有一个由 Weebly.com 托管的网站，无法设置它以使用谷歌分析进行拆分测试。有3个附件：

```
 Shown in the attachment is my error notice.
 The second email shows how I input HTML into Weebly.
 The 3rd image is an email from Weebly telling me that this can be done but it is challenging. 
4th image is the Weebly editor where I can make html changes 
```

如果有人能指导我如何让这个工作，我将非常感激！

![在此处输入图像描述](../Images/5f9e4d1ad54b1729e585c825fba2dc0e.png) ![在此处输入图像描述](../Images/225ca448fb046242f9d1851a1f05efbf.png) ![在此处输入图像描述](../Images/b0269b322843567fda8e0f7586395469.png) ![在此处输入图像描述](../Images/33a2e5be701368aa45a7d83625c9a256.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:06:45.460

我强烈建议切换到在您的 GA 代码上使用[前缀。](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gaq#_gaq.push "字首")理想情况下，Weebly 应该使用这个前缀，因为他们是供应商，但在这种情况下他们不是。

就目前而言，您会发生以下情况：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-28626443-1']);
_gaq.push(['_trackPageview']); 
```

然后在页面的后面，Weebly 的 GA 代码被插入到页面上。

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-7870337-1']);
_gaq.push(['_setDomainName', 'none']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_trackPageview']); 
```

您可以看到这将覆盖您的跟踪器并更改域名（从自动更改为无）。我建议用以下代码替换您的代码：

```
var _gaq = _gaq || [];
_gaq.push(['my._setAccount', 'UA-28626443-1']);
_gaq.push(['my._trackPageview']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:28:18.410

除此之外，另外两个（可能）必要的更改 b/c Weebly 在您的页面上插入了自己的 GA 跟踪器。

[1] 在*您的*分析跟踪器代码中，您需要添加一个自定义域（在这种情况下，连同前缀一起）。所以*在*你之后

```
_gaq.push(['my._setAccount', 'UA-12345678-0']); 
```

添加以下内容：_gaq.push(['my._setDomainName', 'your-domain-name-whatever-it-is']);

因此，现在您的 GA 跟踪器代码应以以下内容开头： var _gaq = _gaq || []; _gaq.push(['my._setAccount', 'UA-12345678-0']); _gaq.push(['my._setDomainName', 'your-domain-name-whatever-it-is']); _gaq.push(['my._trackPageview']);

注意：如果您告诉 Google 您实际上正在跟踪子域，那么 _setDomainName 是 Google 默认告诉您的。在这种情况下，您的 Weebly 站点（很可能）是 weebly.com 的子域，例如 my-domain-name.weebly.com

[2] 在您的内容实验 (CE) 代码中，您必须告诉 Google 使用这个“其他”域。否则，它使用默认域（这似乎是 Weebly 的域）。

为此，请查看您的 CE 代码。它的开头可能是这样的：function utmx_section(){}function utmx(){}(function(){var k='12345678-0',d=document,l=d.location,c=d.cookie; if (l.search.indexOf('utm_expid='+k)>0)return; blah-blah-blah

在注释之后和函数之前插入以下行：_udn = "your-domain-name-whatever-it-is"

所以现在您的 CE 代码如下所示：

```
<!-- Google Analytics Content Experiment code -->
<script>_udn = "your-domain-name-whatever-it-is"</script>
<script>function utmx_section(){}function utmx(){}(function(){var
k='12345678-0',d=document,l=d.location,c=d.cookie;
if(l.search.indexOf('utm_expid='+k)>0)return;
blah-blah-blah 
```

最后一点很重要。CE 代码仅出现在 AB 测试页面的“主要”或“A”版本上。通过转到 Weebly 的“A”版本 AB 测试页面的“高级设置”，将此代码放在页面的“标题”中。

但是，CE 代码*必须*出现*在前面*您的分析跟踪器代码 Weebly 的跟踪器代码（为此很有帮助）位于每个页面的页脚中。因此，Weebly 的跟踪器代码不会干扰您的 AB 测试代码。但是，如果您使用站点设置将您的分析跟踪器代码放置到您的 Weebly 站点的每个页面上，那么您可能希望使用站点设置 FOOTER（为强调而大写）而不是标题。Weebly 似乎将站点设置标题放在页面特定标题上方（前面）。内容实验会对此感到窒息。如果您真的希望您的 Analytics 跟踪器代码出现在每个页面的标题中（并且有一些原因与计算跳出次数等有关），那么您可能需要使用高级设置手动将跟踪器代码粘贴到每个页面标题上。当您进入 AB 测试页面的“A”版本时，

# c# - 为什么base关键字不能在静态方法中使用？

> ID：14195581
> 
> 赞同：2
> 
> 时间：2013-01-07T12:05:39.357
> 
> 标签：c#

为什么我们不能使用 base 关键字在静态方法中使用基类方法？

两者都在编译时可用。

```
class A
{ 
    public virtual void Func(int a=4){
        Console.WriteLine(" A Class: "+a);
    }
}

class B : A
{
    public new void Func(int a = 12)
    {
        Console.WriteLine(" B Class: "+ a);
    }
}

class C : B
{
    public static void Func()
    {
        base.Func();  // why not ????
    }
}

public class Program
{
    public static void Main(string[] args)
    {
        B ob = new C();
        ob.Func();
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-07T12:06:55.590

因为 base 关键字是指当前类**实例**的基类。但是您在静态方法中没有当前实例 - 它们是静态的而不是实例。

`B.Func()` 如果您`Func()`在 B 类中将方法设为静态，您将能够调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:22:40.363

[C# 语言规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)在第10.6.4**节覆盖方法**（强调我的）中声明：

> 除非对覆盖声明满足以下所有条件，否则会发生编译时错误：
> 
> ...
> 
> *   被覆盖的基方法是虚拟的、抽象的或覆盖的方法。换句话说，**被覆盖的基本方法不能是静态的或非虚拟的。**

从理论上讲，可以查看引用类型的基类。毕竟类之间的继承关系是在类型上定义的，而不是在实例上。例如，如果我有`class A: B`，当出现 时`A.Foo()`，编译器可以`static virtual`在 B`Foo`中查找在查找类之后调用的方法，`A`或者在 for `base`in`A.Foo()`中返回静态方法列表`B`。但是，我怀疑这是一种编译器优化和语言简化，以避免仅处理对静态方法列表的引用以及它会引起的混乱。

# java - 在 java 代码中调用 jasper 报告以创建条形码

> ID：14195583
> 
> 赞同：0
> 
> 时间：2013-01-07T12:05:40.193
> 
> 标签：java, jasper-reports, barcode

我正在尝试在 JasperReports 中使用条形码，为此我使用了barcode.jar，这在 jrxml 之后：

```
<image>
<reportElement x="265" y="44" width="100" height="50"/>
<imageExpression class="net.sf.jasperreports.engine.JRRenderable">
    <![CDATA[new com.onbarcode.barcode.jasper.JasperRenderer(
        com.onbarcode.barcode.jasper.BarcodeGenerator.draw(2, "12345", "", "X=2&Y=60"))]]>
    </imageExpression>
</image> 
```

但是当我在 Java 代码中调用这个 jrxml 以在我的应用程序中使用时，我得到了错误并且没有清晰的错误消息，请告诉我在应用程序中添加了哪些 jar 或其他简单的方法来在 jasper 中创建条形码，然后在 Java 代码中调用它。

# ruby-on-rails - ActiveRecord::Relation 上的类方法调用如何获取上下文？

> ID：14195591
> 
> 赞同：1
> 
> 时间：2013-01-07T12:06:11.947
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

为什么根据文档的代码有效？ [http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html)

```
class Article < ActiveRecord::Base
  scope :featured, where(:featured => true)

  def self.titles
    map(&:title)
  end
end

Article.featured.titles 
```

在我的控制台中得到：

```
NoMethodError: undefined method `map' for #<Class:0xb70bfb0> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-13T03:56:12.883

如果此特定行为在 Rails 3.x 中与在 Rails 4.x 中相同，那么您可以尝试：

```
class Article < ActiveRecord::Base
  scope :featured, where(:featured => true)

  def self.titles
    all.map(&:title)
  end
end

Article.featured.titles 
```

由@Nermin 提供的[用于收集对象的 Rails 模型类方法中的](https://stackoverflow.com/questions/31155085/rails-model-class-method-for-collection-of-objects)回答，并在此处复制以供后代使用。骗人的，但也许不是因为我相信 Rails 版本是不同的。

顺便说一句，我还提交了[https://github.com/rails/rails/issues/21943](https://github.com/rails/rails/issues/21943) ，因为这充其量是一个误导性的文档问题，或者最坏的情况是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:35:47.117

我最初的答案是正确的：它不能工作......

我想我终于说服了自己，因为文档应该统治......

好吧，我认为文档中重要的是这个想法：您可以将作用域与类方法链接起来。

但是示例中给出的类方法的实现肯定是错误的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T13:57:16.360

这是因为返回的对象 (AR::Relation) 接受 3 种方法：

1) AR::Relation 'native' 方法，例如 :where、:includes、:joins、:limit 等...

2) 可枚举的方法。它们中的大多数委托给范围集合，即 Array。

**3）其他方法：通过' method_missing** '委托给基类

因此，该部分的 API 文档（与类方法链接）是错误的 :)

# objective-c - UIScrollView 中的几个 UITextField，被键盘覆盖

> ID：14195594
> 
> 赞同：0
> 
> 时间：2013-01-07T12:06:23.107
> 
> 标签：objective-c, ios, uiscrollview, uitextfield

我有几个`UITextFields`在一个`UIScrollView`。当我编辑其中一个并弹出键盘时，该字段被键盘覆盖。

我想向上滚动视图，我认为这是由 iOS 自动完成的，但似乎并非如此。

我目前正在使用这种方法来滚动视图，但效果不是很好。

```
- (void)scrollToView:(UIView *)view
{
    CGRect viewFrame = [[edit scrollView] convertRect:[view frame] fromView:[view superview]];

    CGRect finalFrame = CGRectMake(viewFrame.origin.x, viewFrame.origin.y, viewFrame.size.width, (viewFrame.size.height + (inputAccessory.frame.size.height) + 4.0));

    [[edit scrollView] scrollRectToVisible:finalFrame animated:YES];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:13:03.800

就我而言，我所做的是在 的情况下减小 的大小`scrollView`，`Editing Did Begin`如下`UITextField`所示：

```
- (IBAction)didEnterInTextField:(id)sender
{
    [sender becomeFirstResponder];
    // Resize the scroll view to reduce the keyboard height
    CGRect scrollViewFrame = self.scrollView.frame;
    if (scrollViewFrame.size.height > 300) {
        scrollViewFrame.size.height -= 216;
        self.scrollView.frame = scrollViewFrame;
    }

    // Scroll the view to see the text field
    UITextField *selectedTextField = (UITextField *)sender;
    float yPosition = selectedTextField.frame.origin.y - 60;
    float bottomPositon = self.scrollView.contentSize.height - self.scrollView.bounds.size.height;
    if (yPosition > bottomPositon) {
        yPosition = bottomPositon;
    }
    [self.scrollView setContentOffset:CGPointMake(0, yPosition) animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:12:37.320

这是同样的好教程

[http://www.iphonesampleapps.com/2009/12/adjust-uitextfield-hidden-behind-keyboard-with-uiscrollview/](http://www.iphonesampleapps.com/2009/12/adjust-uitextfield-hidden-behind-keyboard-with-uiscrollview/)

希望对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T12:25:53.363

试试这个示例代码[TPKeyboardAvoiding](https://github.com/michaeltyson/TPKeyboardAvoiding)

它易于实施。只需拖放自定义类并将自定义类从 UIScrollview 更改`TPKeyboardAvoidingScrollView`为 xib

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T12:12:05.667

//注册键盘通知

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(keyboardWillShow:)
                                             name:UIKeyboardWillShowNotification
                                           object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(keyboardWillHide:)
                                             name:UIKeyboardWillHideNotification
                                           object:nil]; 
```

在这两种方法中设置滚动视图的框架..当键盘显示或隐藏时。

或者设置滚动视图的**scrollRectToVisible**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T12:30:48.957

```
- (void)scrollViewToCenterOfScreen:(UIView *)theView
{
    CGFloat viewCenterY = theView.center.y;
    CGFloat availableHeight;
    CGFloat y;

    if(!isReturned)
    {
        if (UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
        {
            availableHeight = 1080;
        }
        else
        {
            availableHeight = 220;
        }
    }
    else
    {
        if (UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
        {
            availableHeight = 1400;
        }
        else
        {
            availableHeight = 530;
        }

    }

    y = viewCenterY - availableHeight / 2.0;
    if (y < 0) {
        y = 0;
    }
    [sclView setContentOffset:CGPointMake(0, y) animated:YES];
} 
```

在文本字段或文本视图中调用此方法开始编辑。它将起作用。

# c - 如何在特定位置打印文本？

> ID：14195596
> 
> 赞同：3
> 
> 时间：2013-01-07T12:06:31.360
> 
> 标签：c, dos, conio

```
#include <stdio.h>
#include <dos.h>
#include <conio.h>
#include <stdlib.h>
#include <time.h>
#define MAX 25

main(){
    int a[MAX],i,j,lvl=2,score=0;
    float time=1.0,speed;
    speed=time/lvl;

    clrscr();

    for(i=0;i<MAX;i++)
        a[i]=rand()%50+1;

    while(1){
        for(j=0;j<MAX;j++){
            gotoxy(a[j],1);
            printf("*");
            gotoxy(1,1);
            insline();
            sleep(speed);
            score++;
            gotoxy(57,1);
            clrscr();
            printf("%d",score);
            if(score==100)
                lvl++;
        }
    }
} 
```

嗨，我正在尝试使用`gotoxy()`. 我曾经使用`gotoxy(1,1)`. 设置应该插入空白行的光标位置`insline()`。但是每次我在屏幕上打印分数时，它都会连续打印分数，如下所示：

![DOS屏幕截图，分数在右侧重复](../Images/c670393f8e0dfebc48aeec7b03cb84d0.png)

*强调文本*还有其他方法可以打印分数并在插入新行时将其删除到最后一个位置，`insline()`这样最后一个分数就不会打印在屏幕上，而只会打印当前分数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:59:05.703

你应该使用这个功能

```
WriteConsoleOutput(....); 
```

在 MSDN 上查看

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms687404(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687404(v=vs.85).aspx)

# javascript - IE8 中的图片加载事件；事件未定义，这是“窗口”对象

> ID：14195607
> 
> 赞同：0
> 
> 时间：2013-01-07T12:07:08.407
> 
> 标签：javascript

我已经编写了下面的代码，它可以在所有现代浏览器中运行，除了`<IE9`

```
<script>
    function eventH(event) {
        alert(this);
    }
</script>

<img src="h300.png" onload="eventH(arguments[0]);"/> 
```

它触发事件处理程序，但`event`未定义且`this`值是父对象。为什么？

IE 是否以不同的方式处理这个问题，或者我在理解这个方面有什么错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:12:39.217

Internet Explorer 8 及更低版本不实现 W3C 事件模型。对于 IE，您需要的可能是`window.event`.

QuirksMode 提供了一组很好的[示例](http://www.quirksmode.org/js/events_properties.html)，说明如何编写与现代浏览器和旧 IE 版本兼容的事件处理代码。

另请注意，当您在不使用点符号的情况下调用 JavaScript 函数时，全局窗口对象是`this`（在 ES5 严格模式下除外，`this`在这种情况下不允许访问）。相反，您可以将`this`其作为参数传递给您的函数。

但是，最好只使用.addEventListener( [)](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)（W3C 模型）或[.attachEvent()](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)（Microsoft 模型）附加您的事件处理程序，而不是在 HTML 中指定它。然后，`this`将按预期工作。

# facebook-graph-api - Facebook页面令牌和上传，如果不是管理员

> ID：14195608
> 
> 赞同：0
> 
> 时间：2013-01-07T12:07:10.497
> 
> 标签：facebook-graph-api, titanium, appcelerator

我对 Facebook 页面及其访问令牌有一些疑问。

现在我正在尝试为我的乐队构建一个移动应用程序，我希望它具有一个功能，允许用户拍照或从手机图库中选择并将其上传到我们在 Facebook 上的粉丝专页。

我在阅读此内容时所了解的是，我可以制作一个 fb 应用程序并将扩展权限设置为`manage_pages`，然后从我作为管理员的页面获取页面访问令牌。

好吧，移动应用程序的每个用户都不会成为我们粉丝专页的管理员......

所以我想知道是否有某种方法可以获得粉丝页面访问令牌并让用户将图片上传到我们的粉丝页面。

或者，如果您有其他方法，请告诉我。

我正在使用 appcelerator Titanium 构建，所以我使用 javascript。

如果您对此有答案，请像我 6 岁一样解释。

# jquery - 颜色框中的标签不可点击

> ID：14195609
> 
> 赞同：0
> 
> 时间：2013-01-07T12:07:22.887
> 
> 标签：jquery, html, label, colorbox

我有简单的[颜色框](http://www.jacklmoore.com/colorbox)加载：

```
$.colorbox({html: $('#widget-login').html()}); 
```

colorbox 的内容是一个表单（输入+标签）：

```
<form name="f-login" id="f-login" action="#" method="post">
    <fieldset>
        <label for="f-email">e-mail:</label>
        <input type="email" name="email" id="f-email" />
        <input type="submit" value="go" />
    </fieldset>
</form> 
```

当我点击标签“电子邮件”时，我应该专注于`f-email`输入，但没有任何反应。我做错了什么？

FF 17.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:15:07.047

不确定这是否是您要的，但试试这个..

```
$(label['for="f-email"').click(function(){
       $('#email').focus();
    }); 
```

[小提琴](http://jsfiddle.net/V3QeR/)..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:30:51.123

colorbox 与表单元素无关。

请将此添加到您的表单html的头文件中。由于您的标签没有任何 ID，我输入 $('label') 否则您可以给标签一个 ID，然后使用下面的 jquery 跟踪它。此外，您可以了解 jquery 的想法，它很简单。

```
$(document).ready(function() {
// put all your jQuery code in here.
    $('label').on('click', function(){
       $('#f-email').focus();
    });
});; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:54:00.010

解决了 ：]

我编辑了我的问题，有重大更新：`html`不在`href`彩盒触发器中。在这种情况下，有 2 个具有相同 ID 的元素——一个在隐藏的 div 中，第二个在颜色框中。

谢谢大家，很抱歉浪费了您的时间。

# php - 获取数据库中每一行的所有行

> ID：14195610
> 
> 赞同：0
> 
> 时间：2013-01-07T12:07:30.297
> 
> 标签：php, mysql, database

我有一个包含成员列表的数据库。我执行某个查询，它选择满足条件的所有成员。然后对于结果集中的每个成员，我想发送输出中生成的所有成员的详细信息并继续循环直到结果集结束。我当前的 SQL 查询是：

```
if( $result || mysql_num_rows($result) != 0) 
{
    $string = "result";
    while($r = mysql_fetch_array($result,MYSQL_ASSOC))
    {
           while($row = mysql_fetch_array($result,MYSQL_ASSOC))
           {
                  $string .= "," . $row['latitude'] . "," . $row['longitude'];
                  $i = $i + 1;
           }

         **$registration_id = $r['user_id'];**
    }
} 
```

这没有给我预期的结果？这有什么漏洞或错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:15:02.930

尝试不先 WHILE

```
if( $result || mysql_num_rows($result) != 0) 
{
$string = "result";

       while($row = mysql_fetch_array($result,MYSQL_ASSOC))
       {
              $string .= "," . $row['latitude'] . "," . $row['longitude'];
              $i = $i + 1;
       }
      //Send notification to that member
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:13:36.427

第一个`while`获取整行作为数组。第二个`while`没有意义。

```
if( $result || mysql_num_rows($result) != 0) 
{
    $string = "result";
    while($r = mysql_fetch_array($result,MYSQL_ASSOC))
    {
        $string .= "," . $r['latitude'] . "," . $r['longitude'];
            $i = $i + 1;

          //Send notification to that member
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T09:52:34.237

尝试`foreach`PHP 循环

像这样; 查询数据库并在给定特定条件的情况下构建成员数组并像这样构建成员数组

```
$members = array(); // Intialize Empty Array
$sql = "SELECT member_name FROM .... WHERE ... "; // Ensure you're selecting one field here
while($result = $mysql_fetch_assoc(mysql_query($sql)))
{
$members[]=$result['member_name'];//This is the members array we're adding members to
}
//Get Members Array Count
$member_count = count($members);
//Check whether members array is more than 0 
if($member_count != 0)
{
//Do for each loop to select profiles for each member in our array
foreach($members as $key)
  {
  $sql = " SELECT email,number,imei,device,latitude,longitude,userID FROM ... WHERE member_name LIKE '$key' ";
   while($result = $mysql_fetch_assoc(mysql_query($sql)))
      {
        //print results here
        .
        .
        .
      }

  }
} 
```

# qt - 在 QML 中清除文本输入

> ID：14195615
> 
> 赞同：2
> 
> 时间：2013-01-07T12:07:46.053
> 
> 标签：qt, qml

我有文本输入框：

```
TextInput {           
    x: 5
    y: 2
    maximumLength: 16
    width: maximumLength * 20
    height: 17
    focus: false
    validator: RegExpValidator { regExp: /\d+/ }
    KeyNavigation.down: amount
} 
```

还有一个清除按钮。当我单击清除按钮时，它应该清除文本输入框。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:54:08.110

您必须将该`id`属性添加到您的`TextInput`元素。

```
TextInput {
    id: mytextbox
    x: 5
    y: 2
    ...
} 
```

`MouseArea`在您点击清除按钮的事件中，您可以执行以下操作：

```
 onClicked: {
        mytextbox.text = "0"; 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-14T17:30:23.813

用你的 MouseArea 试试这个：

```
onClicked: {
  textEdit1.text = " "
  mouseArea4.visible = false
} 
```

# android - Bluetooth.connect() 在三星 S3 中抛出 NullPointerException 但在三星 S 中运行良好。请有人知道原因吗？

> ID：14195618
> 
> 赞同：0
> 
> 时间：2013-01-07T12:07:48.720
> 
> 标签：android, nullpointerexception

我试图使用编写蓝牙不安全连接代码

```
 Method m = bleutoothdevice.GetMethod("createInsecureRfComm",

            new Class[]{int.class};
    bluetoothSocket = m.InvokeMethod(,) 
```

像那样，但在 bluetoothSocket.connect 调用中，当在 S3 上运行时，它会给出 Null 指针异常，但相同的代码在 S2 和 Acer Tab 上工作正常。

有谁知道原因？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:57:45.610

您可以尝试调用方法“createRfcommSocket”

# jquery - 滚动时解除绑定事件 - 推荐？

> ID：14195621
> 
> 赞同：2
> 
> 时间：2013-01-07T12:07:54.320
> 
> 标签：jquery, backbone.js, marionette, backbone-views, backbone-events

我的网站建立在主干上。它具有基于提要的 UI，这意味着提要中通常会显示大量内容。大约有 30 个事件绑定到每个项目。

向下滚动几页后它变得迟缓。

取消绑定已经滚出的项目，并在它们滚入时再次绑定是否有意义？

*   如果是这样，一些帮助（示例代码/资源指针会很棒）
*   有什么导致缓慢的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:53:29.503

很难说缓慢是因为事件处理程序，还是仅仅因为浏览器无法处理页面上大量的 DOM 节点，或者任何其他原因。

这是为不在当前视口中的视图取消委派事件的快速解决方案。它不完全是生产就绪的，但应该可以帮助您测试事件处理程序是否是性能问题的原因。

（[在这里工作 JSFiddle](http://jsfiddle.net/uysZt/)，还要检查浏览器控制台）

```
var View = Backbone.View.extend({

  onScroll: function() {

    var wasInView = this.isInView;
    var isInView = this.checkIsInView();

    if(wasInView === true) {
      if(!isInView) {
         this.undelegateEvents(); 
      }
    } 
    else if(wasInView === false) {
      if(isInView) {
        this.delegateEvents();
      }
    }
    else {
      //first pass
      if(!isInView) {
        this.undelegateEvents();
      }
    }

    this.isInView = isInView;
  },

  checkIsInView: function() {
    var $el = this.$el,
        top = $el.offset().top,
        bottom = top + $el.height(),
        windowTop = $(window).scrollTop(),
        windowBottom = windowTop + $(window).height();

    return ((bottom <= windowBottom) && (top >= windowTop));
  },

  render: function () {

    //rendering code here...

    if(!this.lazyScroll) {
      //wait for scroll events to stop before triggering scroll handler
      this.lazyScroll = _.debounce(_.bind(this.onScroll, this), 50);
      $(window).bind('scroll', this.lazyScroll)
               .bind('resize', this.lazyScroll); 
    }

    return this;
  },

  remove: function() {
    if(this.lazyScroll) {
      $(window).unbind('scroll', this.lazyScroll)
               .unbind('resize', this.lazyScroll); 
      delete this.lazyScroll;
    }
    Backbone.View.prototype.remove.apply(this, arguments);
  }
}); 
```

# android - 使用android在对话框界面中显示数据库值

> ID：14195623
> 
> 赞同：1
> 
> 时间：2013-01-07T12:08:07.423
> 
> 标签：android, database, dialog

当用户单击按钮时，我正在获取数据库表内容并将其显示在对话框界面中，该界面具有用于显示名称的复选框。问题是当我单击按钮时出现“停止工作”错误。

这是代码：

```
protected String[] Friends;

protected void showSelectFriendsDialog() {
    SQLiteDatabase db = playerDB.getReadableDatabase();

    String[] Friend = {"player_name"};

    Cursor cursor = db.query(DBHelper.DATABASE_TABLE_NAME_USERINFO, Friend, null, null,  null, null, null);

    if(cursor != null) {
        startManagingCursor(cursor);
        while (cursor.moveToNext()) {         
            String name = cursor.getString(0);

            for(int i = 0; i < cursor.getCount(); i++) {
                Friends[i] = name;
            }
        }
    }

    boolean[] checkedFriends = new boolean[Friends.length];
    int count = Friends.length;

    for(int i = 0; i < count; i++)
        checkedFriends[i] = selectedFriends.contains(Friends[i]);

    DialogInterface.OnMultiChoiceClickListener coloursDialogListener = new DialogInterface.OnMultiChoiceClickListener() {
        public void onClick(DialogInterface dialog, int which, boolean isChecked) {
            if(isChecked)
                selectedFriends.add(Friends[which]);
            else
                selectedFriends.remove(Friends[which]);
        }
    };

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Select Friends");
    builder.setMultiChoiceItems(Friends, checkedFriends, coloursDialogListener);

    AlertDialog dialog = builder.create();
    dialog.show();
} 
```

这是日志猫：

```
01-07 12:17:50.770: E/AndroidRuntime(848): FATAL EXCEPTION: main
01-07 12:17:50.770: E/AndroidRuntime(848): java.lang.NullPointerException
01-07 12:17:50.770: E/AndroidRuntime(848):  at apk.game.mindwords.Play.showSelectFriendsDialog(Play.java:235)
01-07 12:17:50.770: E/AndroidRuntime(848):  at apk.game.mindwords.Play.onClick(Play.java:191)
01-07 12:17:50.770: E/AndroidRuntime(848):  at android.view.View.performClick(View.java:4084)
01-07 12:17:50.770: E/AndroidRuntime(848):  at android.view.View$PerformClick.run(View.java:16966)
01-07 12:17:50.770: E/AndroidRuntime(848):  at android.os.Handler.handleCallback(Handler.java:615)
01-07 12:17:50.770: E/AndroidRuntime(848):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-07 12:17:50.770: E/AndroidRuntime(848):  at android.os.Looper.loop(Looper.java:137)
01-07 12:17:50.770: E/AndroidRuntime(848):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-07 12:17:50.770: E/AndroidRuntime(848):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 12:17:50.770: E/AndroidRuntime(848):  at java.lang.reflect.Method.invoke(Method.java:511)
01-07 12:17:50.770: E/AndroidRuntime(848):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-07 12:17:50.770: E/AndroidRuntime(848):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-07 12:17:50.770: E/AndroidRuntime(848):  at dalvik.system.NativeStart.main(Native Method) 
```

# c# - 带有 C# windows 窗体应用程序的 Oracle 即时客户端

> ID：14195630
> 
> 赞同：4
> 
> 时间：2013-01-07T12:08:36.023
> 
> 标签：c#, .net, oracle, dll, instantclient

我一直在寻找这个，我已经使用 C# 开发了必须连接 Oracle 数据库的 Windows 窗体应用程序，这个应用程序将在许多使用 windows XP 和 windows 7 的 PC 上使用经过长时间的研究，我发现我需要使用 OBP.net 进行 oracle 访问，但问题是我无法在每台 PC 上安装 oracle 客户端，但是我发现在[CodePorject Example](http://www.codeproject.com/Articles/18692/Instant-Oracle-Using-C)中可以下载 5 个 DLL 文件来完成相同的工作

```
OCI Instant Client Data Shared Library
    oraociicus10.dll (Basic-Lite version)
    oraociei10.dll (Basic version)
Client Code Library
    oci.dll
Security Library
    orannzsbb10.dll
OCCI Library
    oraocci10.dll 
```

但是当我发布应用程序时，它不会连接到 Oracle 数据库请帮助我如何让我的 Windows Forms 应用程序在没有安装 Oracle 客户端的 PC 的情况下连接 Oracle 数据库，如果可以通过上述 DLLS 实现这一点，我该怎么做？

**编辑：**

```
DataTable dt = new DataTable();
OracleConnection Oracle_connection = new OracleConnection();
Oracle_connection.ConnectionString = con;
Oracle_connection.Open(); 
```

连接超时，`Oracle_connection.Open();`在调试模式下，我不使用 TNSNAMES.ORA 因为我的连接字符串是

```
Data Source=(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 10.20.2.54)(PORT = 1521))(CONNECT_DATA = (SERVER = DEDICATED)(SERVICE_NAME = PRD))) ;User Id=catering;Password=catering;"` 
```

试图发布它在 Windows 7 PC 上工作但在 Windows XP 上不起作用的代码 `System.TypeInitializationException: The type initializer for 'Oracle.DataAccess.Client.OracleConnection' threw an exception. ---> Oracle.DataAccess.Client.OracleException The provider is not compatible with the version of Oracle client at Oracle.DataAccess.Client.OracleInit.Initialize()`

不知道它是否与 Windows 相关或缺少某些 DLL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T20:57:35.770

还有完全托管的 .net 连接器，又名 ODP.NET 托管驱动程序：

*   [安装说明，发行说明](http://www.oracle.com/technetwork/database/windows/downloads/odpmbetainstall-1696475.html)
*   [下载](http://www.oracle.com/technetwork/database/windows/downloads/odpmbeta-1696432.html)
*   [Youtube 演示](http://www.youtube.com/watch?v=I1q50HnUh_w)

我已经在安装了 .NET 4.0 框架的 Windows 8 和 Windows XP SP3 上对其进行了测试——一切都按预期工作。部署时，只需要 1 个 dll (Oracle.ManagedDataAccess.dll)，其重量为 6 MB（与几乎 40 MB 的即时客户端 lite 相比）。

更新：使用托管 oracle 驱动程序的最佳方法可能是通过 NuGet ( [ODP.NET @ nuget](https://www.nuget.org/packages/odp.net.managed/) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:39:02.703

ODP.net 对混合版本号很挑剔。错误信息：

> System.TypeInitializationException：“Oracle.DataAccess.Client.OracleConnection”的类型初始化程序引发了异常。---> Oracle.DataAccess.Client.OracleException 提供程序与 Oracle.DataAccess.Client.OracleInit.Initialize() 处的 Oracle 客户端版本不兼容

表明它在某处选择了错误的客户端 DLL 版本。当我使用 Oracle 和 Visual C# 2010 进行一些开发时，我从以下位置下载了 ODP.NET 库：

[http://www.oracle.com/technetwork/developer-tools/visual-studio/downloads/index.html](http://www.oracle.com/technetwork/developer-tools/visual-studio/downloads/index.html)

然后，我为我将使用的 Oracle 版本选择了正确的版本，并在我的项目中使用了这些 DLL。我不确定重新分配的限制是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T19:41:44.413

看这个帖子：[provider is not compatible with the version of Oracle client](https://stackoverflow.com/questions/659341/the-provider-is-not-compatible-with-the-version-of-oracle-client)

那里列出的 DLL 为我完成了这项工作（都在与 exe 相同的目录中）。

# mysql - 子查询选择字段

> ID：14195637
> 
> 赞同：0
> 
> 时间：2013-01-07T12:08:59.627
> 
> 标签：mysql, sql, subquery

我试图在 MySQL selct 语句中进行子选择，例如如下所示：

```
SELECT
  c.id AS id,
  c.name AS name,
  (SELECT count(*) FROM orders o WHERE o.user_id = c.id) AS order_count
FROM
  customers c 
```

任何想法为什么这在 MySQL 中不起作用？是否可以在 MySQL 中做类似的事情？在版本 3.23.58 和 5.1.60 中尝试过。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:10:39.920

你错过了`,`之后`name`，试试这个：

```
SELECT
  c.id AS id,
  c.name AS name,
  (SELECT count(*) FROM orders o WHERE o.user_id = c.id) AS order_count
FROM
  customers c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T12:16:22.790

为了避免这些类型的错误（比如缺少逗号），我喜欢这样写查询......

```
 SELECT c.id 
         , c.name 
         , COALESCE(COUNT(o.user_id),0) order_count
      FROM customers c
      LEFT
      JOIN orders o
        ON o.user_id = c.id
     GROUP
        BY c.id; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T12:14:02.883

```
SELECT
  c.id AS id ,
  c.name AS name ,
 (SELECT count(*) 
   FROM orders o 
   WHERE o.user_id = c.id) AS order_count
FROM
 customers c 
```

在每列之后使用“，”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T12:15:33.800

另一种方法使用`joins`

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/a6a90/2)

样本数据：

```
ID  NAME
1   john
2   jack
3   kelly

ID  USERID
10  1
11  2
12  1
13  3
14  2
15  3
16  2
17  4
18  1 
```

询问：

```
SELECT count(o.userid), c.id, c.name
FROM cusomter c
LEFT JOIN orders o
ON c.id = o.userid
GROUP BY c.id
; 
```

`case when`如果客户没有任何订单，您可以添加将 null 表示为 0。你的选择。

结果：

```
COUNT(O.USERID)     ID  NAME
3                   1   john
3                   2   jack
2                   3   kelly 
```

# ios - 使用自动布局在调整大小时平等地改变空间

> ID：14195638
> 
> 赞同：9
> 
> 时间：2013-01-07T12:09:01.010
> 
> 标签：ios, xcode, ios6, autolayout

如果我的应用中有一个视图，其中包含 3 个子视图（例如），它们之间的间距如下：

TOP - 40 分 - SUBVIEW 1 - 60 分 - SUBVIEW 2 - 80 分 - SUBVIEW 3 - 80 分 - BOTTOM

我了解如何使用自动布局来确保每个子视图保持其高度和宽度，并且我可以在 3.5 或 4 英寸 iPhone 屏幕上对齐所有内容。

但我不知道我需要做什么样的约束，这样如果它针对 3.5" 屏幕对齐，然后转到 4" 屏幕，每个间距都会按比例增加（例如 40 点将变为 47 , 60 到 71, 80 到 95 - 或大约）。

这可能吗？还是我需要使元素之间的所有间距都相等？（如果是这样，我怎样才能让它同样调整大小？）

我是自动布局的新手，所以如果我遗漏了任何内容，或者没有明确我的意思，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T17:44:19.227

诀窍是在视图之间不仅添加一个约束，而且添加**两个约束。**一个带有“**大于或等于**”，一个带有“**小于等于**”。最小尺寸（大于或等于）应为 3.5" 显示器上的间距。最大尺寸（小于或等于"应为 4" 显示器上的间距。

**例子：**

TOP - 40 分 - SUBVIEW 1 - 60 分 - SUBVIEW 2 - 80 分 - SUBVIEW 3 - 80 分 - BOTTOM

TOP - SUBVIEW1：在 Interface Builder 中选择两者。添加约束“垂直间距”**两次。** 将一个设置为大于或等于 40。将另一个设置为小于或等于 47。

所有 Greater Then 值的总和 + 视图的所有高度应为 480 像素 (3.5") 所有 Lesser Then 值的总和 + 视图的所有高度应为 568 像素 (4")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T16:46:19.327

我不知道有什么简单的方法可以做到这一点。我做了一个所有空格都相等的地方，但要做到这一点，我必须用不可见的标签填充空格（只是没有标题的标签）。所以，我的 4 个可见对象和 5 个“间隔标签”都在彼此的顶部。我使 4 个可见对象都具有明确的高度，并且没有固定高度的垫片，但设置为完全相同：

```
-(void)viewDidLoad {
    [super viewDidLoad];

    NSMutableDictionary *viewsDict = [NSMutableDictionary dictionary];
    for (int i=1; i<5; i++) { // Labels with titles
        UILabel *b = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 150, 44)];
         b.text = @"This is my label";
        [b setTranslatesAutoresizingMaskIntoConstraints:NO];
        [viewsDict setObject:b forKey:[NSString stringWithFormat:@"b%d",i]];
    }

    for (int i=1; i<6; i++) { // Spacer labels
        UILabel *l = [[UILabel alloc ]init];
        [l setTranslatesAutoresizingMaskIntoConstraints:NO];
        [viewsDict setObject:l forKey:[NSString stringWithFormat:@"l%d",i]];
    }

    for (id obj in viewsDict.allKeys) 
        [self.view addSubview:viewsDict[obj]];

    NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[l1][b1][l2(==l1)][b2][l3(==l1)][b3][l4(==l1)][b4][l5(==l1)]|"
                                                                   options:NSLayoutFormatAlignAllLeading
                                                                   metrics:nil
                                                                     views:viewsDict];

    NSArray *constraints2 = [NSLayoutConstraint constraintsWithVisualFormat:@"|-[b1]"
                                                                   options:0
                                                                   metrics:nil
                                                                     views:viewsDict];

    [self.view addConstraints:constraints];
    [self.view addConstraints:constraints2];
} 
```

为了使空间不同，我认为你必须使用更长的形式来表达约束，而不是视觉格式。下面的代码似乎对我有用。我使用与上面相同的视图定义，除了我将标题标签的数量减少到 3 个，将分隔符的数量减少到 4 个以匹配您的问题。相对间距应如您的示例中所示，2:3:4:4。

```
NSLayoutConstraint *con1 = [NSLayoutConstraint constraintWithItem:self.view attribute:NSLayoutAttributeTop relatedBy:0 toItem:viewsDict[@"l1"] attribute:NSLayoutAttributeTop multiplier:1 constant:0];
    NSLayoutConstraint *con2 = [NSLayoutConstraint constraintWithItem:viewsDict[@"l1"] attribute:NSLayoutAttributeBottom relatedBy:0 toItem:viewsDict[@"b1"] attribute:NSLayoutAttributeTop multiplier:1 constant:0];
    NSLayoutConstraint *con3 = [NSLayoutConstraint constraintWithItem:viewsDict[@"b1"] attribute:NSLayoutAttributeBottom relatedBy:0 toItem:viewsDict[@"l2"] attribute:NSLayoutAttributeTop multiplier:1 constant:0];
    NSLayoutConstraint *con4 = [NSLayoutConstraint constraintWithItem:viewsDict[@"l2"] attribute:NSLayoutAttributeBottom relatedBy:0 toItem:viewsDict[@"b2"] attribute:NSLayoutAttributeTop multiplier:1 constant:0];
    NSLayoutConstraint *con5 = [NSLayoutConstraint constraintWithItem:viewsDict[@"b2"] attribute:NSLayoutAttributeBottom relatedBy:0 toItem:viewsDict[@"l3"] attribute:NSLayoutAttributeTop multiplier:1 constant:0];
    NSLayoutConstraint *con6 = [NSLayoutConstraint constraintWithItem:viewsDict[@"l3"] attribute:NSLayoutAttributeBottom relatedBy:0 toItem:viewsDict[@"b3"] attribute:NSLayoutAttributeTop multiplier:1 constant:0];
    NSLayoutConstraint *con7 = [NSLayoutConstraint constraintWithItem:viewsDict[@"b3"] attribute:NSLayoutAttributeBottom relatedBy:0 toItem:viewsDict[@"l4"] attribute:NSLayoutAttributeTop multiplier:1 constant:0];
    NSLayoutConstraint *con8 = [NSLayoutConstraint constraintWithItem:viewsDict[@"l4"] attribute:NSLayoutAttributeBottom relatedBy:0 toItem:self.view attribute:NSLayoutAttributeBottom multiplier:1 constant:0];
    NSLayoutConstraint *con9 = [NSLayoutConstraint constraintWithItem:viewsDict[@"l1"] attribute:NSLayoutAttributeHeight relatedBy:0 toItem:viewsDict[@"l2"] attribute:NSLayoutAttributeHeight multiplier:.66 constant:0];
    NSLayoutConstraint *con10 = [NSLayoutConstraint constraintWithItem:viewsDict[@"l1"] attribute:NSLayoutAttributeHeight relatedBy:0 toItem:viewsDict[@"l3"] attribute:NSLayoutAttributeHeight multiplier:.5 constant:0];
    NSLayoutConstraint *con11 = [NSLayoutConstraint constraintWithItem:viewsDict[@"l1"] attribute:NSLayoutAttributeHeight relatedBy:0 toItem:viewsDict[@"l4"] attribute:NSLayoutAttributeHeight multiplier:.5 constant:0];
    NSLayoutConstraint *con12 = [NSLayoutConstraint constraintWithItem:viewsDict[@"b1"] attribute:NSLayoutAttributeLeading relatedBy:0 toItem:self.view attribute:NSLayoutAttributeLeading multiplier:1 constant:100];
    NSLayoutConstraint *con13 = [NSLayoutConstraint constraintWithItem:viewsDict[@"b2"] attribute:NSLayoutAttributeLeading relatedBy:0 toItem:self.view attribute:NSLayoutAttributeLeading multiplier:1 constant:100];
    NSLayoutConstraint *con14 = [NSLayoutConstraint constraintWithItem:viewsDict[@"b3"] attribute:NSLayoutAttributeLeading relatedBy:0 toItem:self.view attribute:NSLayoutAttributeLeading multiplier:1 constant:100];

    NSArray *constraints = @[con1,con2,con3,con4,con5,con6,con7,con8,con9,con10,con11,con12,con13,con14];
    [self.view addConstraints:constraints]; 
```

# spring-mvc - 为什么无法加载应用程序上下文？

> ID：14195639
> 
> 赞同：0
> 
> 时间：2013-01-07T12:09:06.227
> 
> 标签：spring-mvc, maven-3, junit4

任何人都可以解释为什么我应该在测试我的测试用例时收到以下错误消息“无法加载 ApplicationContext”

```
 mvn test 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:20:50.043

如果您使用 Spring 框架，则可以使用 @ContextConfiguration 注解指定 applicationContext.xml 文件的位置：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "/path/to/your/applicationContext.xml" })
public class MyTest {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:48:14.130

检查您的@ContextConfiguration。引用[Spring 文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#testcontext-ctx-management-xml)：

> 普通或相对路径（例如“context.xml”）将被视为与定义测试类的包相关的类路径资源。以斜杠开头的路径被视为绝对类路径位置，例如“/org/example/config.xml”。代表资源 URL 的路径（即以 classpath:、file:、http: 等为前缀的路径）将按原样使用。

所以我想你必须使用“ `/applicationContext.xml`”而不是“ `/src/test/resources/applicationContext.xml`”，因为文件将放置在类路径的根级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:33:04.400

由于我看不到您的配置，您可以更改您的测试以使用以下类级别注释。只要它位于类路径中，这应该有助于找到应用程序上下文。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "classpath:applicationContext.xml" }) 
```

# iphone - 弹出窗口的屏幕截图不清晰

> ID：14195640
> 
> 赞同：3
> 
> 时间：2013-01-07T12:09:09.370
> 
> 标签：iphone, objective-c, ios, ipad, uipopovercontroller

我正在开发一个 ios 应用程序，我需要在其中截取图像，但我无法在屏幕上截取正确的弹出框截图。这是我的实际图像

![在此处输入图像描述](../Images/8fdb8dd9d94490866db678d6f03b887b.png)

截屏后，我得到以下图像

![在此处输入图像描述](../Images/6edc93b29673923864c51680b2fede73.png)

我捕获图像的代码如下

```
 UIWindow *topWindow = nil;

    topWindow = [[[UIApplication sharedApplication] delegate] window];

    CGSize size = CGSizeZero;
    if(view == nil){
        size =  [[topWindow.rootViewController view] bounds].size;
    }else{
        size =  [view bounds].size;
    }

    if([UIScreen instancesRespondToSelector:@selector(scale)] && [[UIScreen mainScreen] scale] == 2.0f){
        UIGraphicsBeginImageContextWithOptions(size,NO,2.0f);
    }else{
        UIGraphicsBeginImageContext(size);
    }

    if(view == nil){
        // Put everything in the current view into the screenshot
        [[[[topWindow subviews] objectAtIndex:0] layer] renderInContext:UIGraphicsGetCurrentContext()];

        //Code for capturing popover
        [[[topWindow subviews].lastObject layer] renderInContext:UIGraphicsGetCurrentContext()];

        }
    }else{
        // Put everything in the current view into the screenshot
        [[view layer] renderInContext:UIGraphicsGetCurrentContext()];
    }

    // Save the current image context info into a UIImage
    UIImage *imageToBeEdited = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:27:39.887

请尝试更改：

```
if(view == nil)
{
   size =  [[topWindow.rootViewController view] bounds].size;
}else{
   size =  [view bounds].size;
} 
```

至 ：

```
if(view == nil)
{
    size =  [[topWindow.rootViewController view] bounds].size;
}else{
    size =  view.frame.size;
} 
```

# android - 当我返回到我的活动时，会引发 onCreate 而不是 onActivityResult？

> ID：14195642
> 
> 赞同：1
> 
> 时间：2013-01-07T12:09:25.350
> 
> 标签：android, back, oncreate, start-activity

我有一个 Activity 可以为这样的结果打开一个新的 Activity：

```
Intent i = new Intent(ActDocument.this, ActCustomers.class);
startActivityForResult(i, ActDocument.DIALOG_CUSTOMER); 
```

当我在子 Activity 中按下并返回父 Activity`onActivityResult`时，所有设备都正确调用了它，但我找到了一个`onCreate`被调用的设备，而不是`onActivityResult`.

该设备是三星 Galaxy Tab-P5100 Android 4.0.3。奇怪的是，我已经在三星 Galaxy Tab-P5100 Android 4.0.3 的其他设备上测试了我的应用程序，这没问题，但我只在这个设备上有问题。

为什么？我该如何解决？

**更新**

我注意到`onDestroy()`在此设备上打开子 Activity 后调用了父 Activity。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T12:20:59.287

大多数情况下，后退按钮将完成活动，除非您具体覆盖

> OnBackPressed()

我认为您的问题是缺乏资源，或者您可能有一些开发人员选项，例如 kill activty 标志或限制后台进程检查这个。

**更新**

转到设置-> 开发人员选项未选中不要将活动和后台进程限制设置为标准限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:11:14.580

也许`back`按钮没有完成活动。所以，覆盖`onBackPressed`.

# android - ListView：空指针异常

> ID：14195646
> 
> 赞同：4
> 
> 时间：2013-01-07T12:09:35.593
> 
> 标签：android, listview

再会。我的 android 项目特别是 listview 有一些问题。我尝试在此站点中搜索其他信息，并实施了一些答案。但是，它仍然无法正常工作。

错误具体是

> 在 MainActivity 第 76 行出现 NullPointerException

这是我的 MainActivity 的代码

```
import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class MainActivity extends Activity {

     final ArrayList<String> studentName = new ArrayList<String>();

     ArrayAdapter<String> aa;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ListView myList = (ListView) findViewById(R.id.listName);

         aa = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, studentName);

         myList.setAdapter(aa);

        //droid.R.id.list;

        //add
        Button bAdd = (Button) findViewById(R.id.addstudent);
        bAdd.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View v) {
                startActivity(new Intent("android.intent.action.ADDSTUDENTS"));
            }   
        });

        //edit

        Button bEdit = (Button) findViewById(R.id.editstudent);
        bEdit.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View x) {
                startActivity(new Intent("android.intent.action.EDITSTUDENTS"));
            }
        });

        //edit

        Button bDelete = (Button) findViewById(R.id.deletestudent);
        bDelete.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View x) {
                startActivity(new Intent("android.intent.action.DELETESTUDENTS"));
                }
            });

    }

    public ArrayList<String> getArray(){
        return studentName;
    }

    public void notifyArray(){
        aa.notifyDataSetChanged();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

顺便说一句，第 76 行是

```
aa.notifyDataSetChanged(); 
```

这是我的 AddStudents 类代码

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class AddStudents extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.add_student);

        Button bAddStudents = (Button) findViewById(R.id.add);
        final EditText et = (EditText) findViewById(R.id.student_name);

        bAddStudents.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View v) {

                MainActivity as = new MainActivity();

                as.getArray().add(et.getText().toString());
                as.notifyArray();
                finish();

            }   

        });

        Button bBack = (Button) findViewById(R.id.backadd);

        bBack.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View v) {

                finish();

            }   
    });

    }

} 
```

并且带有列表视图的 xml 部分是

```
 <ListView
            android:id="@+id/listName" 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

        </ListView> 
```

我希望你能帮助我，因为我也想知道我的错误是什么。如果您愿意，我可以添加其他信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:30:35.787

在您的`AddStudents`课堂上，您在`notifyArray()`实例化`MainActivity`. `MainActivity.onCreate()`不会仅仅通过实例化它来调用。

无论如何实例化你的`MainActivity`there 可能不是你想要的（因为该对象将在`onClick`处理程序完成后直接释放）。

相反，您想要的是访问`MainActivity`. 为此，将对当前实例的引用添加到`MainActivity`类的静态成员中，例如

```
public class MainActivity extends Activity {
    public static MainActivity activity;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        activity = this;
    }
} 
```

然后在您的`AddStudent`班级中通过

```
MainActivity.activity.notifyArray() 
```

这不是解决问题的最佳方式，但只要您确定只有一个`MainActivity`实例，它就可以工作。（如果没有，您可以将数组本身设为静态；或者为它创建一个单例包装类。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:16:35.253

`notifyArray()`之前被调用`onCreate`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:05:57.223

尝试调用 getArray().add(et.getText().toString()); 和 notifyArray(); 在 MainActivity 的 onResume() 中，而不是来自 AddStudentActivity（不推荐！）

所以 onResume() 理想情况下，您希望将一个新学生添加到列表中，因此在您的情况下，您可以使用一个常见的可共享对象（如哈希表或类似的东西）检索学生姓名，使其成为单例，并在任何地方使用它在申请中

普通类可能类似于：

```
class CommonHashtable{

private static Hashtable<String, Object> commonHashtable = null;

public static getInstance(){
    if(commonHashtable == null)
        commonHashtable = new Hashtable<String, Object>();

    return commonHashtable;
} 
```

在 getInstance() 上，它返回一个 commonHashtable，可用于临时存储值！

所以，在addbutton点击事件中添加这个

```
Hashtable hash = CommonHashtable.getInstance();
hash.put("NEW_STUDENT_NAME", et.getText().toString()); 
```

并将其添加到 MainActivity 的 onResume() 中

```
Hashtable hash = CommonHashtable.getInstance();
Object studentName = (String) hash.get("NEW_STUDENT_NAME");

if(studentName != null){
    notifyArray();
} 
```

# sql-server - SQL Server 正在创建太多 LOB 页

> ID：14195651
> 
> 赞同：0
> 
> 时间：2013-01-07T12:09:56.193
> 
> 标签：sql-server, sql-server-2008-r2

我有一个 SQL Server 数据库的奇怪情况，表中的实际数据大约是*320 MiB*。这是通过对`DATALENGTH`所有列求和来确定的。这将忽略碎片、索引空间和其他 SQL Server 内部开销。但问题是该表的大小大约为**40 GiB**，并且它以惊人的速度增长，与插入的字节或行中的数据量非常不成比例。

我使用该`sys.dm_db_index_physical_stats`功能查看物理数据，大约 40 GiB 的数据被捆绑在`LOB_DATA`.

构成表格内容的 320 MiB 中的大部分都是`ntext`. 现在，我的问题是 SQL Server 为何`LOB_DATA`在只有大约 310 MiB`ntext`数据的情况下分配了 40 GiB。

如果我们将列转换为 ，问题会消失`nvarchar(max)`吗？`ntext`是否有任何存储引擎细节`LOB_DATA`导致`LOB_DATA`页面不被回收？为什么它在改变的数量方面以如此不成比例的速度抱怨？

# php - 无法通过 uri 段

> ID：14195652
> 
> 赞同：1
> 
> 时间：2013-01-07T12:09:57.000
> 
> 标签：php, laravel, laravel-routing

我在让 Laravel 4 路线正常工作时遇到了一些麻烦——只是无法理解我做错了什么。

我的作曲家包是最新的，我正在使用最新版本的照明/应用程序。

这是一条运行良好的路线：

```
GET /hello

Route::get('hello', function()
{
    return 'yey';
}); 
```

但我就是无法让第二个 uri 段作为参数传递。

这没有用：

```
GET /hello/1

Route::get('hello/(:num)', function($id)
{
    return 'yey ' . $id;
}); 
```

或者：

```
GET /hello/1

Route::get('hello/(:any)', function($id)
{
    return 'yey ' . $id;
}); 
```

最终我想要一个控制器来处理我的东西——但我只是不知道我现在做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:27:13.097

几乎。你真的想这样做：

```
Route::get('hello/{num}', function($id)
{
    return 'yey ' . $id;
}); 
```

# mysql - Mysql从5.1升级到5.5

> ID：14195658
> 
> 赞同：2
> 
> 时间：2013-01-07T12:10:15.443
> 
> 标签：mysql

我打算卸载 mysql 5.1，然后在上面安装 mysql 5.6。但是在mysql的官方网站上，显示slave应该在master之前更新。但是我们正在从两端进行复制，这意味着配置了主-主复制 那么首先升级哪个服务器？升级两台服务器应遵循什么方法？

如果 mysql 从 5.1 升级到 5.5，它们在 mysql 5.1 的表、复制、索引中是否会出现任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:31:39.957

如果你有一个master-master，它仍然是一个两步的过程。

这就是我会做的。

如果前面有负载均衡器，将一台服务器拉出，或将其设置为只读模式，确保那里没有写入，升级它，然后恢复复制，让它赶上，然后升级第二台服务器（这实际上意味着停机），然后恢复主-主复制并启用对第一台服务器的写入。

# jquery - “唯一可见的孩子”元素？

> ID：14195660
> 
> 赞同：2
> 
> 时间：2013-01-07T12:10:18.233
> 
> 标签：jquery, css, jquery-selectors, css-selectors

我有一个很大的外部**div** ，里面有许多相同的圆圈*（这是一个较小的**div**，边框半径为 100%）*。

当用户单击它们时，我正在使用 jquery 淡出这些圆圈，但是我想在单击唯一剩余的圆圈时添加其他事件。

**:last-child**或**:nth-child()**不会有帮助，因为我不介意点击哪个圆圈，直到只剩下一个圆圈。

* * *

同样，元素已**淡出**，因此它们仍然是可见元素的兄弟姐妹。所以我需要的是选择“最后一个可见”元素。

```
<div>

<div class="circle"></div>

<div class="circle"></div>

<div class="circle"></div>

<div class="circle"></div>

<div class="circle"></div>

<div class="circle"></div>

<div class="circle"></div>

<div class="circle"></div>

</div> 
```

* * *

```
$(document).ready(function(){
    $(".circle").click(function(){
        $(this).fadeOut("slow");
    });
    $("XXX").click(function(){
        alert("I was the last of Mohicans");
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T12:11:13.910

为什么不

```
.circle:first-child:last-child { 
```

?

**编辑已编辑的问题：**

如果您想在单击时测试该元素是否是唯一可见的元素，您可以这样做：

```
$(document).ready(function(){
    $(".circle").click(function(){
        $(this).fadeOut("slow");
        if ($('.circle:visible').length>1) return; // returns if not the last one
        alert("I was the last of Mohicans");
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T12:16:19.110

jQuery 实际上有一个`only-child`选择器，请参见此处：[http ://api.jquery.com/only-child-selector/](http://api.jquery.com/only-child-selector/)

（希望我已经理解你在问什么）

**根据对问题的编辑，请参见下文：**

也许你应该尝试这样的事情：

```
$(document).ready(function(){
    $(".circle").click(function(){
        var numCircles = $('.circle').length;
        var numFaded = $('.faded').length;
        if( (numCircles - numFaded) == 1 ) {
            alert("I was the last of Mohicans!");
        }
        $(this).fadeOut("slow");
        $(this).addClass("faded");
    });
}); 
```

我意识到上面的内容可能不是最佳的（我不是 JavaScript/jQuery 大师），但它应该相当快（只要你不添加很多圈子），它应该可以根据你的需要运行。

请记住，我没有测试上述内容，希望如果它不起作用，它至少应该让你朝着正确的方向前进，但如果你需要更多帮助，请在下面发表评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T12:55:45.440

一种解决方法是为这些 div 增加一个额外的类并且只有一个孩子。当 $(".extraclass :only-child") 被点击而不是添加你的新事件。否则删除你的额外类并应用淡出效果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T12:57:57.997

```
$(document).ready(function () {
  $(".circle").click(function () {
   var $this = $(this);
   $this.fadeOut("slow");
   if ($this.siblings(':visible').length === 0) {
     alert("I was the last of Mohicans");
   }
 });
}); 
```

计算可见的兄弟姐妹是最好的选择......如果你需要，你也可以添加类选择器......

# java - Apache Camel 术语的精妙之处

> ID：14195675
> 
> 赞同：2
> 
> 时间：2013-01-07T12:11:00.813
> 
> 标签：java, apache-camel

我正试图围绕 Apache Camel 展开思考，今天早上花了一些时间阅读了在线 Camel 文档和 Javadocs 之后，我有一些问题似乎无法找到答案。

1.  是否所有端点都是消费者或生产者（或两者兼而有之）？所有处理器都是端点是真的吗？是否有任何不是处理器的端点？
2.  Message header 和 Exchange 之间有什么区别？交换被认为是“消息容器”，但它与标头包含的元数据有何不同？
3.  实现自己的消息/交换是否很典型？如果是这样，这样做的例子是什么，并且“偏离”了典型的`DefaultMessage`and `DefaultExchange`？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:12:23.887

首先要做的事情：一个好的建议是阅读 Camel in Action 一书，它解释了大部分基本概念。在线提供免费的第一章，解释了您提出的问题[http://manning.com/ibsen/](http://manning.com/ibsen/)

1.  端点引用一个[组件](http://camel.apache.org/component)和一些特定于组件的选项，例如地址等。然后端点可以（取决于组件）充当消费者（例如`"servlet:path/to/web/service"`）或生产者（例如`"http://localhost/path/to/web/service"`）或两者兼而有之（例如`"jms:queue:orderQueue"`）。

2.  Camel 消息中也有标题。交换比整个路由更长寿，交换属性也将在整个路由中保留。Camel 中的消息头是一个有点不同的概念。它们通常紧密映射到使用的组件 - 即 HTTP 端点可能设置/更改标头（例如 COOKIES 等），而 HTTP 标头对交换属性没有影响，因为它们仅用于骆驼路由和骆驼逻辑。交换还包装了其他非消息特定的东西，例如异常。

3.  开发新的消息实现并不常见。`DefaultMessage`当您实现了自己的组件/协议并且需要在消息或诸如此类的东西中保留辅助对象的实例时，扩展可能会有一点意义。即使在开发组件时通常也不会这样做。我从未听说过 Exchange 的任何自定义实现，您通常不应在没有充分理由的情况下这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T00:50:31.487

[@DirtyMikeAndTheBoys](https://stackoverflow.com/users/892029/dirtymikeandtheboys) 你写道：

> 所有处理器都是端点是真的吗？是否有任何不是处理器的端点？

这不是真的。Camel 术语中的“**处理器**”是回调，它是某些模式的一部分（如聚合器、消息通道或 RoutingSlip）。**处理器**在路由中流动时接收消息并对消息执行某些操作。消息包装在**Exchanges**中。

**端点**是路由接收消息的地方（消费者**端点**）和发送处理过的消息的地方（**到端点**）。因此，当您在路由中看到“ **from** ”子句时，Camel 引擎正在使用与“ **from** ”子句中定义的端点实例相关联的“ **Consumer** ”实例。这实际上取决于端点实现，是否在骆驼上下文中的“from”子句中出现给定端点的每个地方创建/重用一个新的消费者实例。

 **Similarly when the same endpoint is mentioned in a '**To**' clause, a **Producer** instance will be used (either created/reused) and will remain associated with the endpoint instance.**

# forms - 从子窗口提交父窗口表单

> ID：14195683
> 
> 赞同：0
> 
> 时间：2013-01-07T12:11:29.240
> 
> 标签：forms, jsp, popup, window, struts

我正在显示一个带有一些选择的弹出窗口（子窗口）。一旦用户在子窗口中提交它们，我就会将这些值传递给父窗口并提交表单。这些值正在毫无问题地提交到后端。但是，提交表单时父窗口不会刷新。

```
function commonPopup(popup, width, height, e, top, left) {
    myWindow=window.open('about:blank', popup, 'directories=0,scrollbars=yes, resizable=yes, location=0, menubar=0, status=0, toolbar=0, width=' + width + ', height=' + height + ', top=' + top + ', left=' + left);   
    myWindow.document.write('<HEAD>'); 
    myWindow.document.write('   <TITLE>Waiting for results</TITLE>'); 
    myWindow.document.write('</HEAD>');

}
function post_lock_unlock_value(reason,comment) {
    document.getElementById('lockReason').value = reason;
    document.getElementById('lockComment').value = comment;
    document.getElementById('triggerActionId').value='';
    document.getElementById('admRepairLock').submit();
}
<s:form name="lock" id="lock" action="my.action">
    <s:submit value="Lock Repair Profile" id="lockIndicator" name="lockIndicator"
                                                            onclick="commonPopup('lockProfile',450, 200, event,'lockRepairProfile');" cssStyle="width:200px" theme="simple"/>
</s:form> 
```

在子页面中

```
function postback() {  
    window.opener.post_lock_unlock_value("data","data");
    self.close();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T00:31:06.380

尝试这个：

```
var newPartyId = $("#desc_textarea").val();
window.opener.$("#desc_textarea").val(newPartyId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:20:27.863

在关闭子窗口之前像这样刷新父级（在您的 之前添加这个`self.close()`）：

```
if ( window.opener && !window.opener.closed ) {
   window.opener.location.reload();                     
   window.opener.focus();
} 
```

# cakephp - Cakephp递归查找再次包括顶级模型

> ID：14195686
> 
> 赞同：1
> 
> 时间：2013-01-07T12:11:42.437
> 
> 标签：cakephp, recursion, model, include, find

我有这个 cakephp 查找查询：

```
$results = $this->Instrument->find('all', array('recursive' => 2, 'conditions' => array('OR' => array('Instrument.name' => $tag_search, 'Instrument.nameEN' => $tag_search)))); 
```

Model Instrument 拥有并属于许多 Instrumentbox。我想找到一个带有所有乐器的 Instrumentbox，用 . 搜索一个乐器名称`$tag_search`。它返回正确具有该仪器的仪器箱，但它不包括仪器中的所有仪器。有没有办法告诉 cakephp 再次加载“顶级模型”以便我得到结构

```
$results = array(
   0 => [
     'Instrument' => [
        'name' => "$tag_search value",
        '...' => ...,
        'Instrumentbox' => [
           0 => [
             '...' => '...', //everything else is properly included
             'Instrument' => [...] //this is NOT included, how can I include it?
           ]
        ]
     ]
   ] 
```

当我用标签搜索它时也会发生同样的事情，所以想象一下在“标签”而不是“仪器”上方的结构中，仪器包含在仪器箱中，但标签不包含。因此，“顶级模型”不再包含在结构中。我必须手工制作还是可以让 cakephp 完成？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T04:21:52.727

您可以尝试使用 Contain 执行此操作。无论如何，它比使用递归超过 1 好得多。你可以精确控制你想要得到的结果，这对这类事情有好处，而且通常对性能更好。

[http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

所以，未经测试的代码：

```
//model
public $actsAs = array('Containable');
// controller
$this->Instrument->recursive=1;
$this->contain(array('Instrument'=> array('InstrumentBox'=> array('Instrument')))); 
```

# google-closure - Closure中递归修饰的首选方法

> ID：14195690
> 
> 赞同：2
> 
> 时间：2013-01-07T12:11:53.020
> 
> 标签：google-closure, google-closure-library, google-closure-templates

我正在寻找一种在 Google Closure 中获取文档片段（从 Soy 模板生成）的方法，并在注册表中使用相应的 UI 组件递归地装饰任何元素。

在我看来，使用遍历 DOM、根据注册表检查类并在适当时进行装饰的函数应该相对简单，但这似乎是一个基本的用例，我想知道我是否缺少一些简单的东西.

我应该继续我计划的实现，还是在库中的某个地方有一个函数可以在某个地方处理这个问题？

或者，我装饰模板的整体方法是否存在缺陷？我的目的是能够使用最少的 JavaScript 在 Soy 中以声明方式从 UI 组件库中设计复杂的组件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:14:05.980

是的，该库不支持开箱即用，也许一些内部谷歌代码支持，但我认为他们可能倾向于使用不那么完整的方法来获得更多控制。

我们的方法更加多阶段，我会稍微解释一下。

鉴于我们想（尽可能）使用预渲染，我们的 json 数据应该从 1 到 1 映射到我们的模板，因此我们的 json 文件提供了一个模式，我们根据该模式生成我们的 javascript，使我们的模型保持最新，创建我们的组件（您可以通过在工厂注册它然后注册装饰来扩展它）。这个生成的代码然后有一个 decorateChildren 步骤，当组件装饰时会自动调用它，因此我们得到递归。我们实际上还生成了可扩展的模板，然后通过使用委托模板覆盖（模板系统 IMO 的一个很棒的功能）

我认为您已经走在正确的轨道上，您只需要编写一些代码来满足您的需求。

# adobe - CQ5开发者版在哪里下载

> ID：14195691
> 
> 赞同：0
> 
> 时间：2013-01-07T12:11:53.710
> 
> 标签：adobe, aem

我是 CQ 的新手。我想在我的家用电脑上安装 CQ。是否有 CQ 的开发者版本可用？fatwire 中的 JSK 之类的东西？哪里可以下载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T14:36:08.637

据我了解，您需要参加开发人员培训或在目前使用 CQ5 的公司工作，以获得本地实例的许可证。

# jsf-2 - p:fileupload 如何设置文件名宽度？

> ID：14195692
> 
> 赞同：1
> 
> 时间：2013-01-07T12:11:57.110
> 
> 标签：jsf-2, primefaces

现在我正在使用 primefaces 文件上传。我将宽度设置为文件上传。但选择长文件名时，文件名是溢出。像 ![在此处输入图像描述](../Images/24aad83fbc4742559c6efacb5ae1953d.png)

这个怎么解决？？？我的CSS是

```
.ui-panelgrid tr,.ui-panelgrid td {
    border: none;
}

.ui-fileupload .cancel {
    display: none;
}

.ui-fileupload .progress {
    display: none;
}

.ui-widget-content {
    background: none;
    border: 1px solid #A8A8A8;
    color: #4F4F4F;
}

.ui-widget-header {
    background: none;
    border: none;
    color: #333333;
    font-weight: bold;
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.7);
    width: 450px;
}

.fileupload-content {
    padding: 0.2em 0.4em;
}

.fileupload-with {
    width: 600px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:55:28.943

您只需要修复您的 CSS，通常在 SO 上已被多次询问。由于您使用的是 PF fileUpload 特别是您可以使用这样的东西。

```
 .files td.name {
    word-break:break-all;
 } 
```

更多信息：

[http://css-tricks.com/almanac/properties/w/word-break/](http://css-tricks.com/almanac/properties/w/word-break/)

# sql - 排列组合

> ID：14195693
> 
> 赞同：0
> 
> 时间：2013-01-07T12:11:59.757
> 
> 标签：sql, permutation, combinations, cross-join

我有一张桌子，只有一列由 5 种颜色组成-

```
colour
-------
red
black
white
green 
orange 
```

我想得到所有的组合，比如

（红色，橙色）（黑色，白色）。. . 等，除了相同的。我试图交叉加入表格。

```
select * 
from table1 cross join table1 
```

但我没有得到想要的答案。它返回了所有的组合。还有相同的组合。我怎么能得到它？？？有没有其他方法可以在不创建另一个表的情况下做到这一点？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T12:16:00.017

如果相同，您的意思是像 (white, white) 这样的对，也许这就是您想要的：

```
SELECT a.color, b.color
FROM colors a
CROSS JOIN colors b
WHERE a.color != b.color 
```

如果相同，您还意味着仅保留 (white, black) 或 (black, white) 之一，也许这就是您想要的：

```
SELECT a.color, b.color
FROM colors a
CROSS JOIN colors b
WHERE a.color > b.color 
```

重要的部分是在执行交叉连接后拒绝不需要的元素。

请注意，*这不会创建任何新表或修改现有表*。`a`并且`b`只是同一张表的两个不同别名`colors`。该表只有一列`color`，但由于该表在 SELECT 中出现两次，因此您需要区分表的两个（概念上的，而不是事实的！）实例`colors`。

*你不能没有 a* `join`（那么你的行太少），你也不能轻松地没有别名（你必须引用两列来拒绝某些行），也没有理由分配别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:22:59.297

组合：

```
SELECT a.color,b.color
FROM  colors a
JOIN colors b
ON a.color < b.color 
```

排列：

```
SELECT a.color,b.color
    FROM  colors a
    JOIN colors b
    ON a.color != b.color 
```

# extjs - ExtJS 2.x 重复数据的网格单元验证

> ID：14195697
> 
> 赞同：0
> 
> 时间：2013-01-07T12:12:06.867
> 
> 标签：extjs, extjs2

我有 ExtJS 网格，其中有名为“手机号码”的列。我在这里做了简单的事情当我编辑超过 2 行并且如果我修改列“手机号码”它将检查它是否存在于网格中。

如果发现重复号码，我将给出输入手机号码已存在的消息并重新加载整个网格，因此所有编辑的数据都将消失。

但是，我希望对不重复的数据进行编辑。

那么，如何在重新加载整个网格后保持我的非重复数据不变。

我只想删除发现重复和其他已编辑行保持原样的重复行。

> 我可以使用这个 RowEditor 插件来兼容 ExtJS 2.x。

[http://dev.sencha.com/deploy/ext-3.4.0/examples/grid/row-editor.html](http://dev.sencha.com/deploy/ext-3.4.0/examples/grid/row-editor.html)

我的邮箱：ashwin.parmar2020@gmail.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:20:32.943

您应该将 a`validator`用于检测重复并拒绝重复号码的手机号码字段。所以你不必重新加载网格。

如果您无论如何都想重新加载网格，您可以`dirty`在这样做之前获取行并在之后存储/重新应用它们。

要获取脏记录，您可以使用`getModifiedRecords()`网格存储的功能。使用`commitChanges`商店的功能在验证/处理后应用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:34:30.510

要查找该事件的重复数据使用`afteredit`事件， `Ext.grid.EditorGridPanel`您将获得当前记录，因此只需显示消息并在该字段中添加空值

# actionscript-3 - AS3：键盘输入在 Internet Explorer 上不起作用

> ID：14195698
> 
> 赞同：1
> 
> 时间：2013-01-07T12:12:08.763
> 
> 标签：actionscript-3, internet-explorer, keyboard-events

我有一个导入外部 SWF 的 Flash 电影。我在外部 SWF（WASD 移动星星）和容器中（O 更改圆圈颜色）有一些交互。一切都可以在 Chrome 和 Firefox 上运行，但不能在 Internet Explorer 上运行，这让我很头疼。这里是测试：[http](http://clients.adrime.com/files/campaigns2/9785452187/38177/default.htm) ://clients.adrime.com/files/campaigns2/9785452187/38177/default.htm 这里是容器交互的代码：

```
stage.focus = stage;
stage.addEventListener(KeyboardEvent.KEY_DOWN, onoff);
function onoff(e:KeyboardEvent):void
{
    if(e.keyCode == 79) //O
        bulb.gotoAndStop(bulb.currentFrame == 1 ? 2 : 1);
} 
```

这是外部 SWF 之一：

```
this.addEventListener(Event.ADDED_TO_STAGE, added);

function added(e:Event):void
{
    stage.addEventListener(KeyboardEvent.KEY_DOWN, tastiera);
}

function tastiera(e:KeyboardEvent):void
{
    if(e.keyCode == Keyboard.A)
        st.x -= 5;
    else if(e.keyCode == Keyboard.D)
        st.x += 5;
    else if(e.keyCode == Keyboard.W)
        st.y -= 5;
    else if(e.keyCode == Keyboard.S)
        st.y += 5;
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:46:14.167

操作系统和 Web 浏览器将在 Adob​​e Flash Player 或 AIR 之前处理键盘事件。

出于安全原因**，FLASH 永远不会自动对焦**- 否则窃取键盘输入将是一件轻而易举的事。

> 当页面首次在 Web 浏览器中加载时，嵌入在 HTML 页面中的 Flash 影片不会接收关键事件。

有一个[官方的 Javascript 解决方案](http://kb2.adobe.com/cps/155/tn_15586.html)。您还可以使用[SWFObject](http://code.google.com/p/swfobject/)嵌入您的 Flash 内容。

# tridion - 发布失败

> ID：14195699
> 
> 赞同：2
> 
> 时间：2013-01-07T12:12:11.433
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们正在使用 Tridion 2011 SP1。某些页面/组件在发布时出现以下错误。

```
Phase: Deployer Prepare Phase failed, Unable to unzip,
D:\Inetpub\TridionPublisherFS4SP\incoming\tcm_0-286137-66560.Content.zip (The process 
cannot access the file because it is being used by another process), 
D:\Inetpub\TridionPublisherFS4SP\incoming\tcm_0-286137-66560.Content.zip (The process 
cannot access the file because it is being used by another process), Unable to unzip, 
D:\Inetpub\TridionPublisherFS4SP\incoming\tcm_0-286137-66560.Content.zip (The process 
cannot access the file because it is being used by another process), 
D:\Inetpub\TridionPublisherFS4SP\incoming\tcm_0-286137-66560.Content.zip (The process 
cannot access the file because it is being used by another process) 
```

组件/页面在 stage 下失败`Preparing Deployment`，我们应该如何修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:28:20.397

您是否有多个部署者使用相同的传入位置？

看起来您正在将 Deployer 作为 WebApp 运行 - Deployer 服务是否也在系统上运行？

如果您搜索所有名为“cd_deployer_conf.xml”的文件，它们是否定义了相同的传入文件夹 (D:\Inetpub\TridionPublisherFS4SP\incoming)？

否则，您可能会使用[ProcMon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来查看文件夹并查看还有什么正在访问该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:21:31.637

如果您仍然有此问题，您可以尝试 1\. 删除传入下的所有文件，2\. 确保传入文件夹没有启用加密（有些公司立即对添加到驱动器的文件应用加密脚本）或 3 . 确保您的防病毒软件没有筛选该文件夹（如 Nuno 所述）。

重新启动部署应用程序并在日志中验证？

# ruby-on-rails-3 - Rails 可以为 data_store 和 session_store 使用相同的 memcached 实例吗？

> ID：14195704
> 
> 赞同：0
> 
> 时间：2013-01-07T12:12:21.067
> 
> 标签：ruby-on-rails-3, memcached, dalli

当我对 session_store 和 cache_store 使用一个 memcached 实例时会发生什么？

例如：

```
config.cache_store = :dalli_store, 'localhost:11211'
config.session_store = :dalli_store, 'localhost:11211' 
```

完整的 cache_store 可以从 memcached 中删除会话吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:24:14.600

如果您担心缓存会影响会话（或其他），您可以使用命名空间：

```
config.cache_store = :dalli_store, 'localhost:11211', :namespace => 'cache'
config.session_store = :dalli_store, 'localhost:11211', :namespace => 'sessions' 
```

# build - gcc g++中间汇编错误

> ID：14195705
> 
> 赞同：1
> 
> 时间：2013-01-07T12:12:26.020
> 
> 标签：build, llvm-gcc

有时，我尝试编译一些代码，但 g++ 似乎会创建错误的临时程序集，如下所示：

```
$ g++ -m32 -o foobar foo.cc bar.cc -O2 -lm -Wall
/var/folders/dz/yk2hf77n13x362dhx14czh4r0000gn/T//cc08wrgL.s:6011:FATAL:Symbol label already defined. 
```

如何调试这个？

gcc 配置 =

```
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00) 
```

其他观察：我正在使用`-m32`开关构建 32 位（上面的示例已更新）。如果我编译`-O1`或者`-O4`我没有这个问题。

# ios - 地图上的多个位置（使用 MKMapItem 和 CLGeocoder）

> ID：14195706
> 
> 赞同：6
> 
> 时间：2013-01-07T12:12:26.273
> 
> 标签：ios, cocoa-touch, clgeocoder, mkmapitem

我正在尝试在 中显示多个位置`MKMapItem`。我从 a 获取这些位置`CLGeocoder`，不幸的是它只接受一个位置。即使我传入一个`NSArray`它只返回一个位置。

以下适用于单个位置，但不适用于多个位置。如何对多个位置进行地理编码？

```
Class mapItemClass = [MKMapItem class];
if (mapItemClass && [mapItemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {
    NSArray *addresses = @[@"Mumbai",@"Delhi","Banglore"];

    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:@[addresses] completionHandler:^(NSArray *placemarks, NSError *error) {
        CLPlacemark *geocodedPlacemark = [placemarks objectAtIndex:0];
        MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:geocodedPlacemark.location.coordinate addressDictionary:geocodedPlacemark.addressDictionary];
        MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
        [mapItem setName:geocodedPlacemark.name];

        [MKMapItem openMapsWithItems:@[mapItem] launchOptions:nil];
    }];
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T15:08:57.557

在回答您的问题时，您一次只能发送一个地理编码请求是正确的。事实上，[CLGeocoder 类参考](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)说我们的应用程序应该“为任何一个用户操作发送最多一个地理编码请求”。

因此，为此，您必须发送单独的请求。但是这些请求（异步运行）不应该同时运行。所以，问题是如何让一系列异步地理编码请求一个接一个地依次运行。

有很多不同的方法可以解决这个问题，但一种特别优雅的方法是使用并发子类，它在调用地理编码请求的异步完成块之前`NSOperation`不会完成操作（即不执行 KVN）。`isFinished`（有关并发操作的信息，请参阅*并发编程指南的*[操作队列](https://developer.apple.com/library/mac/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW1)一章的*为并发执行配置操作*部分）。然后只需将这些操作添加到串行操作队列中。

 *另一种方法是使此异步地理编码请求以同步方式运行，然后您只需将请求添加到串行队列，请求将按顺序执行而不是并行执行。您可以通过使用信号量来实现这一点，有效地指示分派的任务在地理编码请求完成之前不返回。你可以这样做：

```
CLGeocoder *geocoder = [[CLGeocoder alloc]init];
NSMutableArray *mapItems = [NSMutableArray array];

NSOperationQueue *queue = [[NSOperationQueue alloc] init];
queue.maxConcurrentOperationCount = 1;   // make it a serial queue

NSOperation *completionOperation = [NSBlockOperation blockOperationWithBlock:^{
    [MKMapItem openMapsWithItems:mapItems launchOptions:nil];
}];

NSArray *addresses = @[@"Mumbai, India", @"Delhi, India", @"Bangalore, India"];

for (NSString *address in addresses) {
    NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^{
        dispatch_semaphore_t semaphore = dispatch_semaphore_create(0);

        [geocoder geocodeAddressString:address completionHandler:^(NSArray *placemarks, NSError *error) {
            if (error) {
                NSLog(@"%@", error);
            } else if ([placemarks count] > 0) {
                CLPlacemark *geocodedPlacemark = [placemarks objectAtIndex:0];
                MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:geocodedPlacemark.location.coordinate
                                                               addressDictionary:geocodedPlacemark.addressDictionary];
                MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
                [mapItem setName:geocodedPlacemark.name];

                [mapItems addObject:mapItem];
            }
            dispatch_semaphore_signal(semaphore);
        }];

        dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);
    }];

    [completionOperation addDependency:operation];
    [queue addOperation:operation];
}

[[NSOperationQueue mainQueue] addOperation:completionOperation]; 
```

或者，您也可以使用更传统的模式。例如，您可以编写一个执行单个地理编码请求的方法，并在完成块中启动下一个请求，然后重复该过程，直到发出所有请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-20T15:52:32.473

对于寻找 Swift 解决方案的人：

```
func getCoordinate( addressString : String, completionHandler: @escaping(CLLocationCoordinate2D, NSError?) -> Void ){
            let geocoder = CLGeocoder()
            geocoder.geocodeAddressString(addressString) { (placemarks, error) in
                if error == nil {
                    if let placemark = placemarks?[0] {
                        let location = placemark.location!
                        completionHandler(location.coordinate, nil)
                        return
                    }
                }

                completionHandler(kCLLocationCoordinate2DInvalid, error as NSError?)
            }
        } 
```

感谢苹果。官方文档[链接](https://developer.apple.com/documentation/corelocation/converting_between_coordinates_and_user_friendly_place_names)

您可以通过以下方式将代码段用于多个地址：

```
let address = ["India","Nepal"]

for i in 0..<address.count {
 getCoordinate(addressString: address[i], completionHandler: { (location, error) in
                //Do your stuff here. For e.g. Adding annotation or storing location
      })

} 
```*

# transform - 将文本字段中输入的每个字符转换为检票页中的大写

> ID：14195710
> 
> 赞同：0
> 
> 时间：2013-01-07T12:12:38.753
> 
> 标签：transform, converter, uppercase, wicket-1.5

我有一个要求，程序应该将输入到检票口文本字段的每个字符都转换为大写。当我们从模型中获取值时，它应该是一个大写的字符串。

**大写行为.java**

```
import org.apache.wicket.Component;
import org.apache.wicket.behavior.AttributeAppender;
import org.apache.wicket.model.Model;

public class UpperCaseBehavior extends AttributeAppender {'
    private static final long serialVersionUID = 1L;

    public UpperCaseBehavior() {
        super("style", new Model<String>("text-transform: uppercase"), ";");
    }

    @Override
    public void bind(Component component) {
        super.bind(component);
        component.add(new AttributeAppender("onkeyup", new Model<String>(
                "this.value = this.value.toUpperCase()"), ";"));
    }
}

**adding upper case behaviour to textfield**<br/>
TextField<String> comp= new TextField<String>("chitMasterId",
                new PropertyModel<String>(this, "id"));
comp.add(new UpperCaseBehavior()); 
```

当我按顺序输入字符时，上面的代码工作正常。假设'|' 作为光标。
例如：ABCDEF|
当我将光标带到字符串的中间（某处但不是末尾）时，
例如：ABC|DEF
一旦我输入字符，字符就会被转换为大写并且光标会到字符串的末尾。
例如：ABCGDEF|
我无法按顺序更改字符串中间的字符。

# java - TableView 中的 JavaFX 单元格颜色

> ID：14195711
> 
> 赞同：1
> 
> 时间：2013-01-07T12:12:41.307
> 
> 标签：java, css, javafx-2

我想用多色单元格创建 TableView。但我仍然需要在选定的行中突出显示单元格。我怎样才能做到这一点？例如，我有类 User - 具有 FXproperties 的 bean，并且我需要在“订单计数”列中绘制单元格，其中包含“1”。如果选择了包含此类单元格的行 - 也应选择此单元格。用户等级：

```
public class User {
private StringProperty firstName = new SimpleStringProperty();
private StringProperty lastName = new SimpleStringProperty();
private IntegerProperty ordersCount = new SimpleIntegerProperty(0);

public User(String firstName, String lastName, int ordersCount) {
    this.firstName.set(firstName);
    this.lastName.set(lastName);
    this.ordersCount.set(ordersCount);
}

public final String getFirstName() {
    return firstName.get();
}

public final String getLastName() {
    return lastName.get();
}

public Integer getOrdersCount() {
    return ordersCount.get();
}

public void setFirstName(String firstName) {
    this.firstName.set(firstName);
}

public void setLastName(String lastName) {
    this.lastName.set(lastName);
}

public void setOrdersCount(Integer ordersCount) {
    this.ordersCount.set(ordersCount);
}

public StringProperty firstNameProperty(){
    return firstName;
}

public StringProperty lastNameProperty(){
    return lastName;
}

public IntegerProperty ordersCountProperty(){
    return ordersCount;
} 
```

}

css 文件：

```
.oneCell  {  
 -fx-control-inner-background: lightsteelblue;
 -fx-background-color: -fx-table-cell-border-color, -fx-control-inner-background;
 -fx-background-insets: 0, 0 0 1 0;
} 
```

主类：

```
public class JavaFXApplication13 extends Application {

@Override
public void start(Stage primaryStage) {
    ObservableList<User> users = FXCollections.observableArrayList();
    for(int i = 0; i < 100; i++){
        users.add(Helper.createRandomUser());
    }        
    TableView<User> tableView = new TableView<>();
    tableView.setItems(users);
    TableColumn<User, String> firstNameColumn = new TableColumn<>("First name");
    firstNameColumn.setCellValueFactory(new PropertyValueFactory<User, String>("firstName"));
    TableColumn<User, String> lastNameColumn = new TableColumn<>("Last name");
    lastNameColumn.setCellValueFactory(new PropertyValueFactory<User, String>("lastName"));
    TableColumn<User, Object> ordersCountColumn = new TableColumn<>("Orders count");
    ordersCountColumn.setCellValueFactory(new PropertyValueFactory<User, Object>("ordersCount"));
    ordersCountColumn.setCellFactory(new CellFactory());
    tableView.getColumns().addAll(firstNameColumn, lastNameColumn, ordersCountColumn);

    StackPane root = new StackPane();
    root.getChildren().add(tableView);
    Scene scene = new Scene(root, 500, 500);
    scene.getStylesheets().add("javafxapplication13/main.css");
    primaryStage.setTitle("Hello World!");
    primaryStage.setScene(scene);
    primaryStage.show();
}

public static void main(String[] args) {
    launch(args);
}

 private class CellFactory implements Callback<TableColumn<User, Object>, TableCell<User, Object>> {

    @Override
    public TableCell<User, Object> call(TableColumn<User, Object> p) {
       TableCell<User, Object> cell = new TableCell<User, Object>(){
          @Override
            public void updateItem(Object item, boolean empty) {
                super.updateItem(item, empty);
                String text = getString();
                setText(empty ? null : text);
                setGraphic(null);
                getStyleClass().remove("oneCell");
                if (text != null && text.contains("1")) {
                    getStyleClass().add("oneCell");
                }
            }

            private String getString() {
                return getItem() == null ? "" : getItem().toString();
            }  
       };
       return cell;
    }
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:11:31.473

蛮力解决方案：

```
private class CellFactory implements Callback<TableColumn<User, Object>, TableCell<User, Object>> {

    @Override
    public TableCell<User, Object> call(TableColumn<User, Object> p) {
        TableCell<User, Object> cell = new TableCell<User, Object>() {

            @Override
            public void updateItem(Object item, boolean empty) {
                super.updateItem(item, empty);
                String text = getString();
                setText(empty ? null : text);
                setGraphic(null);
                updateStyles(false);

                getTableView().getSelectionModel().getSelectedItems().addListener(new ListChangeListener<User>() {

                    @Override
                    public void onChanged(Change<? extends User> change) {
                        while (change.next()) {
                            if (getTableRow() != null) {
                                if (change.wasRemoved() && change.getRemoved().contains(getTableRow().getItem())) {
                                    updateStyles(false);
                                }
                                if (change.wasAdded() && change.getList().contains(getTableRow().getItem())) {
                                    updateStyles(true);
                                }
                            }
                        }
                    }
                });
            }

            private String getString() {
                return getItem() == null ? "" : getItem().toString();
            }

            private void updateStyles(boolean becameSelected) {
                if (becameSelected) {
                    getStyleClass().remove("oneCell");
                } else {
                    if (getString() != null && getString().contains("1")) {
                        getStyleClass().add("oneCell");
                    }
                }
            }
        };
        return cell;
    }
} 
```

# nhibernate - 从域对象访问服务的规则

> ID：14195712
> 
> 赞同：5
> 
> 时间：2013-01-07T12:12:46.210
> 
> 标签：nhibernate, dependency-injection, domain-driven-design, castle-windsor, ioc-container

我正在比较从域模型中使用服务的可能性（在流程本地组件的意义上，如 Windsor IoC 容器中）。

我有 3 种方法可以实现这一目标：

1.  发布域事件并让服务层代码处理它

2.  通过模型对象上的方法注入服务

3.  在模型对象中注入服务

(4\. 使用服务定位器)

第一个导致了非常有表现力和重复性的模式，以过程风格为其他简单的任务创建域事件和处理程序。但它具有模型与其所使用环境的最佳解耦（模型是自定义的）。

第二个使方法参数更长并且看起来像它破坏了封装（如果模型对象的操作需要其他服务，则所有调用者都必须更改）。

第三个将注入当前事务不需要的依赖项。为此，还需要“扩展”NHibernate。由于阅读了其他建议，我会避免使用这种方法。

因为我想在我们的文档中写这个，我需要告诉读者什么时候使用哪种方法。我正在考虑“如果要将域事件处理程序放入模型程序集中，请使用方法注入”，但它并没有真正切中要害。

对这条规则的建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T12:43:36.750

如果 AR（聚合根）需要来自服务的一些数据，则该数据应被视为依赖项（而不是服务）。基本上，AR 根本不知道该服务。

如果某些方法确实具有在构造函数中注入没有意义的依赖关系，请将其作为方法参数传递。我认为您不应该通过服务（但这取决于），直接传递所需的数据。

如果 AR 做了一些需要服务来更新内容的事情，我认为消息驱动是要走的路（生成事件）。

关于 NHibernate 或其他细节，AR 不需要知道它们。如果它不是领域概念，请远离 AR。

就个人而言，我尝试对 AR 进行建模，使其不需要服务。如果一个场景涉及多个 AR，我将使用具有可靠服务总线的域事件。这意味着任何数据库事务都是不可能的。我只将事务性的东西保存在 AR 中，更准确地说是在 AR 存储库中，因为其他所有内容最终都具有一致性。

# wcf - WCF DataContact 和代理 WCF 服务。

> ID：14195715
> 
> 赞同：0
> 
> 时间：2013-01-07T12:12:49.590
> 
> 标签：wcf, proxy, datacontract

我有两个 WCF 服务，一个在主服务器上（由第三方管理，在那里没有太多访问权限），另一个在我的本地服务器上，基本上本地服务存在的原因是在本地存储数据以防主服务器服务离线（出于任何原因），然后在主服务可用时上传数据。

为了保持客户端应用程序对数据命中位置（主服务/本地服务）的透明性，我将本地服务作为代理。即，客户端应用程序只会调用本地服务，然后依次检查主服务器的健康状况以获取/发布数据，如果它离线，它使用本地缓存，并在可用时将数据推送回服务器。

现在主服务中有一些复杂的 DataContract（它们是它们的负载），而且我无法访问实际的数据合同属性文件（它由第三方管理），并且由于任何添加的引用（SOAP ) 在本地创建复杂类型，但是使用 XML 序列化属性而不是 DataMembers/DataContracts 我将无法按原样重用这些类型，或者我可以吗？

有没有办法或者我只需要通过第 3 方或创建我的合同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:11:54.753

我有一些疑问：-

1.  那么由第三方管理是什么意思？它是一个单独的组织提供/维护 WCF 服务并且您没有代码吗？

2.  你是本地服务类型的包装器吗？

如果您以任何方式获得数据合同和服务合同，这将是最好的，因为您是本地服务可以使用相同的数据合同实施相同的服务合同。除此之外，您还可以拥有一个服务合同，您可以使用它在主服务启动时将数据推回。

请参阅下面的示例：-

```
public interface IMasterService
{
    TResponse PersistData(TRequestObject request);
}

public interface ILocalService
{
    TResponse PushDataInBatch(TRequestObject[] requestBatch);

    //We can add more methods here if required
}

public MasterService : IMasterService
{
    public TResponse PersistData(TRequestObject request) 
    {
        //persist data in Master DB
    }
}

public LocalService : IMasterService, ILocalService
{
    public TResponse PersistData(TRequestObject request) 
    {
        //persist data in local cache
    }

    public TResponse PushDataInBatch(TRequestObject[] requestBatch) 
    {
        //persist data in local cache
    }
} 
```

让我知道上述想法是否对您有所帮助，请随时提供更多信息，然后我们可以详细检查。

* * *

如果您可以访问他们的库，则上述实现可能是这种方法，但是如果您没有，那么您只剩下一个选项来获取 MasterService 的服务引用并相应地保留数据。

假设您正在复制持久化逻辑（在本地数据存储中），在您的 LocalService 中再进行一个查询？

# excel - 未知行范围内的列 sumif

> ID：14195719
> 
> 赞同：0
> 
> 时间：2013-01-07T12:13:13.373
> 
> 标签：excel, sum, range, sumifs

对我肯定的事情的快速查询必须是直截了当的，但开始让我省心。

我想对我定义范围的列求和。但是，我实际上并不知道范围。这将每周、每月进行。我从第 3 方程序中获取数据。我将把这些数据粘贴到这个 s/sheet 中；但是，我不知道在任何给定点每列会有多少行。这个数字可以是 500 或 15000。

这是我目前拥有的，很好：

`= SUMIF(DataExtrGoesHere!A2:A999, "0", DataExtrGoesHere!I2:I999)`

但是，这有点业余，我可能会收到超出 999 行范围的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:51:19.533

我会使用整个专栏（假设您不想再往下看）。SUMIF 通常仅使用“使用范围”，因此效率不应该降低

`=SUMIF(DataExtrGoesHere!A:A,0,DataExtrGoesHere!I:I)`

# android - IIlegalArgument 异常，自定义内容提供程序中的未知 URL 错误

> ID：14195720
> 
> 赞同：0
> 
> 时间：2013-01-07T12:13:25.183
> 
> 标签：android

我正在通过示例学习内容提供者。

我的 logcat 显示**“IIlegalArgument Exception ,unknown URL”**。

> 内容 URI = "content://com.example.DetailProvider/personaldetail"

在哪里

```
com.example - packagename
DetailProvider - ContentProvider
class name      personaldetail - Tablename 
```

URI 声明是否正确？

# android - android Spinner：在调用onItemSected之前获取选中的项目

> ID：14195725
> 
> 赞同：1
> 
> 时间：2013-01-07T12:13:49.723
> 
> 标签：android, android-spinner

我有一个在视图中动态创建的微调器列表。单击微调器时，它会返回当前选定的项目。有什么方法可以让我获得此选择之前的项目吗？

除了 onItemSelected() 之外还有其他可能的事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:20:59.533

请看这段代码：

```
Spinner sp= (Spinner) findViewById(R.id.type_spinner);
sp.setOnItemSelectedListener(this); 
```

这是您选择的微调器值的方法：

如果您没有任何选择值，则默认选择第一个值

```
public void onItemSelected(AdapterView<?> parent, View view, int position,
        long arg3) {

    String main = (int) parent.getSelectedItemId();

    Log.e("Spinner Value",main);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:18:49.933

**错误答案，问题误解**

当你`onItemSelected()`被调用时，你会得到一个`position`参数。您可以使用`position - 1`来知道元素在所选元素之前的位置。如果您有**相应**的元素数组，并且微调器元素的位置相似，那么`corresponding_spinner_array[position-1]`应该为您提供所需的元素。

**问题重构后**

为什么不只记住单个变量中的每个选择？

**示例更新：**

```
 String[] items = {"a","b","c"};
    String selectedItem;
    /*get your spinner element from your XML layout*/
    /*or if you already have access to it, no need for this*/
    Spinner spin = (Spinner) findViewById(R.id.spinner);
    spin.setOnItemSelectedListener(this);

    ArrayAdapter<String> aa = new ArrayAdapter<String>(this,
    android.R.layout.simple_spinner_item, items);

    spin.setAdapter(aa);

    public void onItemSelected(AdapterView<?> parent, View v, int position,
     long id) {
          selectedItem = items[position];     
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:40:36.393

可能不是，你必须保持自己的价值。AdapterView 确实有一个`mOldSelectedPosition`字段，但它不可访问。

# objective-c - 如何导航到基于 UILocalNotification 的详细视图？

> ID：14195729
> 
> 赞同：0
> 
> 时间：2013-01-07T12:13:53.713
> 
> 标签：objective-c, ios, uilocalnotification, detailsview

我有一个应用程序每天创建 6 个 UILocalNotifications，间隔为 2 小时。每个通知都与一个唯一的日志条目屏幕相关联。在应用程序的导航控制器中，堆栈的根是一个 UITableView，其中包含关于今天的信息以及今天应该填写的六个日志条目。

我希望用户能够从通知中心下拉屏幕（或从锁定屏幕）滑动通知并直接进入他们需要填写的特定日志条目屏幕。

我一直在寻找有关如何完成此操作的教程或文档，但我没有运气使用正确的概念进行搜索。谁能给我一些好的资源来帮助我学习如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:25:39.603

在您的应用程序委托中，主要功能 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions; 如您所见，带有launchOptions。如果用户正常打开应用程序，则该启动选项为空。但是，如果通过本地通知打开应用程序，则此 launchOptions 有一个带有键“UIApplicationLaunchOptionsLocalNotificationKey”的对象。您可以在那里查看本地通知的详细信息并根据需要进行处理

# windows - Windows 批处理脚本

> ID：14195731
> 
> 赞同：0
> 
> 时间：2013-01-07T12:13:58.710
> 
> 标签：windows, iis-7, batch-file, iis-6, iis-5

我编写了如下的 Windows 批处理命令来静默安装应用程序

> msiexec /q /i ZFPSetup.msi WIXUI_INSTALLDIR="C:\GEHC\" TARGETVDIR="ZFP" WIXUI_EXITDIALOGOPTIONALCHECKBOX=1 /l*v "C:\gehc\log.txt"

但是该应用程序文件夹中有一个批处理文件，应该在安装时运行。我应该在上面的命令中添加什么才能调用该批处理文件。好像那个批处理文件没有运行，安装不成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:22:25.033

假设您的 MSI 文件位于“c:\GEHC”中，并且应用程序安装在“c:\program files\ZFP”中，请尝试此批次：

```
 start /wait msiexec /q /i c:\ZFPSetup.msi WIXUI_INSTALLDIR="C:\GEHC\" TARGETVDIR="ZFP" WIXUI_EXITDIALOGOPTIONALCHECKBOX=1 /l*v "C:\gehc\log.txt"

call "c:\program files\ZFP\abc.bat" 
```

您可以像这样添加错误处理：

```
if errorlevel neq 0 echo ERROR 
```

但是您必须在批处理中使用的每个命令之后放置错误处理程序。您还可以检查批处理文件是否存在，如果不存在，您可以假设 msi 没有正确安装：

```
if not exist "c:\program files\ZFP\abc.bat" echo ERROR 
```

获取更多示例类型“如果/？” 在一个 cmd

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:19:15.687

通过将其放在下面的行来调用批处理文件

```
call youruninstaller.bat 
```

# php - 如何通过定义的键对数组值求和？

> ID：14195734
> 
> 赞同：3
> 
> 时间：2013-01-07T12:14:15.527
> 
> 标签：php, arrays, sum

```
$array[0] = 100;
$array[1] = 10;
$array[2] = 15; 
```

我怎样才能通过它的键得到数组的总和，就像`key = (0,1)`这样`sum = 110`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:21:10.203

```
$sum = array_sum(
    array_intersect_key($array, array_flip([0,1])
); 
```

没有测试它，但应该可以工作:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T12:16:50.387

尝试：

```
$array = array(
  0 => 100,
  1 => 10,
  2 => 15
);
$keys  = array(0, 1);
$sum   = 0;

foreach ( $keys as $key ) {
  $sum += $array[$key];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T12:19:11.207

最好和最简单的方法是

```
$result = array_sum($your_array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-24T19:23:25.023

这是我通过定义的键对数组求和的解决方案：

```
$myArray=Array("Array Title","1000",2000,3000}; // array example with stings and integers

var_dump(array_intersect_key($myArray, array_flip(Array(1,2)))); // int(3000)
var_dump($myArray); // int(6000) 
```

参考：

[array_intersect_key](http://php.net/manual/function.array-intersect-key.php)

[数组翻转](http://php.net/manual/function.array-flip.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T12:27:15.590

```
$array[0] = 100;
$array[1] = 10;

$array[2] = 15;

$sum = function($keys = array(),$arrayList= array())  {
        $s = 0;
        foreach ($arrayList as $key => $value) {
           if(in_array($key, $keys)) {
               $s+= $value;
            }
        }
        echo $s;
};
$sum(array(0,1),$array); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-11T04:48:50.203

尝试这个

```
$array[0] = 100;
$array[1] = 10;
$array[2] = 15;

echo array_sum($array); 
```

或者试试这个

```
$array[0] = 100;
$array[1] = 10;
$array[2] = 15;
$sum=0;
foreach (range(0,1) as $key)
{
    $sum = $sum+$array[$key];
}
echo $sum; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-07T12:17:52.583

如果您想对初始两个键求和，请使用以下代码：

```
array_sum(array_slice($array,0,2)); // will return 110 
```

参考：

[`array_sum`](http://php.net/manual/en/function.array-sum.php)

[`array_slice`](http://php.net/manual/en/function.array-slice.php)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-01-07T12:16:29.163

```
$count = 0;
for($i=0;$i<count($array);$i++){
 $count = $count + $array[$i];
}

echo $count; 
```

# c - 用于连接符号与 C 中的变量值的预处理器指令

> ID：14195735
> 
> 赞同：1
> 
> 时间：2013-01-07T12:14:18.390
> 
> 标签：c, macros, c-preprocessor, avr-gcc

这就是**C**中符号连接的方式。

`#define conc(a,b) a ## b`

例如：

`conc(hello,World)`将制作符号`helloWorld`。

我需要知道的有点不同。假设有一个变量`n`包含一些整数。现在我需要通过将另一个符号**与** `n`.

例如：

`n = 2`
我需要定义一些`function(...)`，以便`function(symbol,n)`给出`symbol1`（不`symboln`）以及何时`n = 3`，`function(symbol,n)`将给出`symbol3`等......

我怎么能定义这样的东西？

* * *

这是我真正想要实现的。首先，这是用于对微控制器`AtmelStudio`进行编程。`atmega`那里有 4 个`USART`模块，因此有一组单独的寄存器，它们仅根据模块的编号更改名称。

例如，四个模块中的四个波特率寄存器是`UBRR0L`, `UBRR1L`, `UBRR2L`, `UBRR3L`。（还有更多，见下文）。

![在此处输入图像描述](../Images/8e0c2e4dcd4d810016fee4a61137acd0.png)

我需要编写一个函数来通过设置相关寄存器的值来初始化给定的模块。由于寄存器名称仅因模块编号而异，如果我可以按照本文中的要求定义一些预处理器指令，我可以编写一个用一些符号表示寄存器名称的函数，因此这些符号将带有相关的寄存器名称和一切都会好起来的。。

例如：

如果我可以定义`conc(a,b)`做我需要的，一个简单的功能

```
void init(int no){
    conc(UBRR,no) = 0xF0;
} 
```

将能够用来表示以下所有内容；

```
UBRR0 = 0xF0;
UBRR1 = 0xF0;
UBRR2 = 0xF0;
UBRR3 = 0xF0; 
```

如果这无法实现，我只知道重新编写四个单独的函数。但希望会有更好的选择..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T12:21:16.650

预处理器将在编译之前对您的代码进行操作，并且显然是在运行时之前。因此，没有预处理器指令可以解决您的目的。

最接近的匹配是使用如下开关盒：

```
switch(n){
case 0: ptr=&symbol0; break;
case 1: ptr=&symbol1; break;
case 2: ptr=&symbol2; break;
case 3: ptr=&symbol3; break;
case 4: ptr=&symbol4; break;
case 5: ptr=&symbol5; break;
//etc... needs to be filled manually.
} 
```

然后操作`*ptr`...

此外，如果您的变量名称是连续的，为什么不使用一个数组，将名称作为符号 &`symbol0`更改为`symbol[0]`？

编辑：现在看到问题中的编辑。您可以使用如上所示的 switch case，或创建一个指针数组，该数组将保存`UBRR0L`等`UBRR0L`，然后将其与索引一起使用。据我所知，它们只是寄存器，将出现在固定地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T12:17:31.383

您不能使用 C 预处理器来执行此操作，因为变量的值是在运行时确定的。但是您可以使用`snprintf()`在运行时基于数字构建字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T21:16:43.703

在我看来，寄存器（例如 RXC0、RXC1、RXC2 等）是等距的。如果这个假设成立，您可以计算以下寄存器的地址（只需替换`rint`为寄存器的类型）：

```
rint *
register_address(rint *first, rint *second, unsigned int n)
{
    size_t diff = second - first;

    return first + diff * n;
} 
```

您的`init()`函数将如下所示：

```
void
init(int no)
{
    *register_address(&UBRR0, &UBRR1, no) = 0xF0;
} 
```

此函数调用可以通过宏简化/隐藏：

```
#define register_value(name, no) *register_address(&conc(name, 0), &conc(name, 1), no) 
```

所以你可以写：

```
void
init(int no)
{
    register_value(UBRR, no) = 0xF0;
} 
```

这段代码未经测试，我不确定它是否真的有效。如果它有效并且您将使用它，我将通过静态断言测试假设。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-23T13:19:44.930

真正的诀窍如下：

```
#define TIMER_0     0
#define TIMER_1     1
#define TIMER_2     2

#define _SET_TIMER_NORMAL_MODE(val)        TCCR ## val &= ~(1 << WGM ## val ## 0)
#define SET_TIMER_NORMAL_MODE(instance)     _SET_TIMER_NORMAL_MODE(instance) 
```

现在我们可以将其用作：

```
SET_TIMER_NORMAL_MODE(TIMER_0) 
```

扩展为：

```
 _SET_TIMER_NORMAL_MODE(0) 
```

此外，这扩展到：

```
TCCR0 &= ~(1 << WGM00) 
```

# postgresql - 在 pl/pgsql 中生成 UUID

> ID：14195737
> 
> 赞同：1
> 
> 时间：2013-01-07T12:14:26.303
> 
> 标签：postgresql, plpgsql

我想在 pl/pgsql 中生成 UUID，并且我已经编写了这段代码。我没有错误，但在输出中看不到 UUID，并且消息也没有出现。

```
CREATE OR REPLACE FUNCTION generatesurrogat() RETURNS uuid[] AS
$BODY$DECLARE 
uid UUID;
BEGIN
uid:=(select uuid_generate_v1());
RAISE NOTICE 'My UUID is',uid;
return uid;
END$BODY$ 
```

你能告诉我如何解决我的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:57:24.727

这个功能就像一个魅力

```
CREATE OR REPLACE FUNCTION generatesurrogat() RETURNS uuid AS
$BODY$DECLARE 
uid UUID;
BEGIN
uid:=(select uuid_generate_v1());
RAISE NOTICE 'My UUID is %',uid;
return uid;
END$BODY$
LANGUAGE plpgsql VOLATILE
COST 100; 
```

`%`您在`RAISE NOTICE`语法中错过了 a 。你也错过了**语言规范**

我假设您使用的是 PGAdmin3。如果是这样，您可以在***输出窗格的*** ***消息选项卡***中找到该消息。

希望能帮助到你。

# c# - 在发布到 Facebook 之前批准评论

> ID：14195739
> 
> 赞同：0
> 
> 时间：2013-01-07T12:14:34.220
> 
> 标签：c#, .net, facebook, comments, facebook-social-plugins

我有一个网站，我正在使用评论插件。

当有人在我的网站上发表评论时，这也会在个人 Facebook 时间轴上发布评论

我想要做的实际上是在将评论发布到人员时间表之前批准该评论

如果可以的话，这可能吗？请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:35:14.690

您是否在 Facebook 的设置中检查过您的评论审核工具？

[https://developers.facebook.com/tools/comments](https://developers.facebook.com/tools/comments)

转到设置并选择更改审核模式，因此您必须在每条评论出现之前批准它。

# html - 空的 HTML5 页面仍然溢出并在移动设备上触发滚动条

> ID：14195740
> 
> 赞同：4
> 
> 时间：2013-01-07T12:14:41.680
> 
> 标签：html, mobile, scroll, overflow

我期望的是一个没有溢出的页面，因为没有内容，因此不需要滚动。但是我得到的是一个空的页面，但它仍然滚动，而不仅仅是出现在触摸事件上的滚动条的外观问题。它实际上抵消了视口中的背景。

我一直在尝试 Google 向我抛出的所有内容，以确保 body 块的宽度和高度与视口的大小相同，而不是更大。我也试过 over-flow: hidden 无济于事。我还尝试将主体尺寸设置为小于视口，但仍然没有运气。

```
 <!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>mobile</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
        <style type="text/css" media="screen and (max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 1.5)">

            body, html{
                padding: 0px;
                margin: 0px;
                border: 0px;
                min-height: 100%;
                min-width: 100%;
                max-width: 100%;
                overflow:hidden;
            }

            body{
                background-image: url(lol.gif);
            }

        </style>
    </head>

    <body>
    </body>
</html> 
```

我还编写了一些 javascript 来向我报告，同时在 chrome for android 上通过 document.documentElement.clientWidth 查看视口宽度，并且低，document.documentElement.clientWidth 等于通过 chrome 的检查器指示的 body 元素的宽度。我什至更进一步并执行了这个：`document.getElementsByTagName('body')[0].style.width = (document.documentElement.clientWidth-100)+"px";` 我仍然可以滚动。

这真的让我的吉米沙沙作响。

我尝试过的事情：

*   最小高度：100%，最小宽度：100%
*   溢出-x 和溢出-y 隐藏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T10:40:08.300

尝试从您的声明中删除 'width=device-width'。我遇到了您描述的完全相同的问题，删除 'width=device-width' 为我修复了它。

# scala - Scala 队列和 PriorityQueue 基本特征

> ID：14195742
> 
> 赞同：4
> 
> 时间：2013-01-07T12:14:44.570
> 
> 标签：scala, data-structures

`collection.mutable.Queue`有什么理由`collection.mutable.PriorityQueue`不共享`QueueLike`Scala 标准库中的基本特征之类的东西吗？`enqueue`&`dequeue`方法似乎具有相同的签名。为什么这些类不能作为队列容器互换，或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T05:58:36.687

也许这应该是一个答案，而不仅仅是评论......

您使用的是哪个版本的 Scala？我检查了 2.10、2.9、2.8 和 2.7 API 文档，它们都没有`QueueLike`特征。如果问题是关于`QueueLike`可以由不可变和可变实现共享的共同特征的概念，那么就有一个问题：可变类在其包含的类型参数中都是不变的。不可变集合类在其包含的类型参数中都是协变的。任何涉及包含类型值的 API 成员，无论是作为参数还是返回类型，都不能由不可变和可变实现共享。

第二轮：

```
package rrs.scribble

import  scala.collection.mutable.{Queue, PriorityQueue}
import  scala.math.Ordering

trait   QueueOps[T]
{
  def dequeue(): T
  def enqueue(elems: T*): Unit
}

object  UniQueue
{
  sealed trait QSel
  object PrioQ extends QSel
  object PlainQ extends QSel

  def apply[T : Ordering](kind: QSel): QueueOps[T] =
    kind match {
      case PrioQ  => new PriorityQueue[T]() with QueueOps[T]
      case PlainQ => new Queue[T]() with QueueOps[T]
    }
}

object  UQTest
{
  import UniQueue._

  def main(args: Array[String]) {
    val prq1 = UniQueue[Int](PrioQ)
    val plq1 = UniQueue[Int](PlainQ)

    prq1.enqueue(1, 4, 9)
    plq1.enqueue(9, 4, 1)
    val prq2 = UniQueue[Int](PrioQ)
    val plq2 = UniQueue[Int](PlainQ)

    printf("prq1: dequeue=%d; dequeue=%d; dequeue=%d%n", prq1.dequeue, prq1.dequeue, prq1.dequeue)
    printf("plq1: dequeue=%d; dequeue=%d; dequeue=%d%n", plq1.dequeue, plq1.dequeue, plq1.dequeue)

    prq2.enqueue(9, 4, 1)
    plq2.enqueue(1, 4, 9)
    printf("prq2: dequeue=%d; dequeue=%d; dequeue=%d%n", prq2.dequeue, prq2.dequeue, prq2.dequeue)
    printf("plq2: dequeue=%d; dequeue=%d; dequeue=%d%n", plq2.dequeue, plq2.dequeue, plq2.dequeue)
  }
} 
```

在 SBT 中运行：

```
> run
[info] Running rrs.scribble.UQTest 
prq1: dequeue=9; dequeue=4; dequeue=1
plq1: dequeue=9; dequeue=4; dequeue=1
prq2: dequeue=9; dequeue=4; dequeue=1
plq2: dequeue=1; dequeue=4; dequeue=9 
```

但是，您会发现，正如所写，您只能对 UniQueue.apply() 返回的值做两件事，那就是 call`enqueue`和`dequeu`。您必须复制您希望能够使用的所有其他方法签名`trait QueueOps[T]`，如果有任何带有变体签名的方法签名，您将无法这样做。

# asp.net - 从 Excel 中读取指定单元格并插入到 SQL 表中

> ID：14195746
> 
> 赞同：0
> 
> 时间：2013-01-07T12:14:50.813
> 
> 标签：asp.net

我有以下结构的 Execl Sheet (2007)。Excel 工作表`Sno.,Details, State1, State2,Name,College,Address,Department` 中的标题

```
--------------------------------------------
Sno. | DETAILS | STATE1 | STATE2
--------------------------------------------
1    | NAME | John | Peter

2    | COLLEGE | AAA | BBB

3    | ADDRESS | YY | ZZ 

4    | DEPARTMENT | IT | ECE 
```

我想插入`STATE1,STATE2`我的数据库。

您能否为以下 excel 和代码提供表结构以仅选择`STATE1,STATE2`列并将列`STATE1,STATE2`详细信息插入数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:52:26.070

这只是一个例子。相应地更改您的字段。

```
 var myConnection = new OleDbConnection("provider=Microsoft.Jet.OLEDB.4.0;Data Source='c:\\Language_Batch1_OneClick.xls';Extended Properties=Excel 8.0;"); ;
    var myCommand = new OleDbCommand();
    var upCommand = new OleDbCommand();
    int i = 0;
    try
    {

        string sql = null;
        myConnection.Open();
        myCommand.Connection = myConnection;
        sql = "select STATE1,STATE2 from [sheet-name]";
        myCommand.CommandText = sql;
        var dataReader = myCommand.ExecuteReader();

        while (dataReader.Read())
        {
            var langText = dataReader["STATE1"].ToString();
            var ansCode = dataReader["STATE2 "].ToString();
            //call your function here update /insert to your database
        }
} 
```

# reporting-services - 也许是多栏报告？

> ID：14195748
> 
> 赞同：1
> 
> 时间：2013-01-07T12:14:56.747
> 
> 标签：reporting-services

我正在尝试创建与此类似的报告，当您单击汽车注册号时，您会获得与该注册相关的部件信息，以块显示，类似于多列报告。我可以从注册到零件的子报告，但我不能像我想要的那样格式化零件报告，我想在下面显示类似这个块的内容

零件编号：0123

零件描述：断裂垫

日期 : 01/02/2013

将有 3 个块和 2 个块，我希望每页不超过 6 个块并将块保持在一起，我尝试了这个解决方案，但不确定如何限制页面下方显示的数量，因为它只是列出的给定数据集中的所有条目：-

[http://picnicerror.net/development/sql-server/create-multi-column-lists-sql-server-reporting-services-ssrs-2011-10-03/](http://picnicerror.net/development/sql-server/create-multi-column-lists-sql-server-) _

不过，我对其他建议的解决方案持开放态度。

感谢 PJD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:12:34.420

我认为您需要进入行组属性，将 Group / PageBreak / BreakLocation 设置为 End，并将 Group / PageBreak / Disabled 设置为仅每 6 行启用一次中断的表达式，例如：

```
= Iif ( RowNumber ( "dsData" ) MOD 6 > 0 , True , False ) 
```

# java - Glassfish 客户端的 JBoss Web 服务客户端替代品

> ID：14195757
> 
> 赞同：1
> 
> 时间：2013-01-07T12:15:43.103
> 
> 标签：java, web-services, jboss, glassfish

一旦您部署了 Web 服务，Glassfish 会提供一个非常好的测试页面，您可以快速轻松地测试您的 Web 服务（客户端）。我必须使用 JBoss，我似乎在 JBoss 中找不到任何替代方法，我想出的最好的方法是自己添加页面。没有更快的方法从 web 服务自动生成页面吗？

# scala - 类型参数和类型上限

> ID：14195758
> 
> 赞同：0
> 
> 时间：2013-01-07T12:15:58.550
> 
> 标签：scala, types

无法弄清楚为什么这不起作用：

```
def f[A: Double](x: A) = x / 4 // error: "Double does not take type parameters"

println(f(87.7)) 
```

虽然这个有效：

```
def f[A <: Double](x: A) = x / 4

println(f(87.7)) 
```

唯一的区别是在第一种情况下我只指定特定类型，而在第二种情况下我定义类型上限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:23:22.317

那是因为`[A: Double]`不是定义类型参数的正确方法。此表单适用于定义~~类清单~~ *上下文绑定*（Scala 2.8 中的新功能 - 感谢@mhs 提供链接）；但是，`ClassManifest[T]`用于表示上下文边界的类型是参数化类型，因此`Double`不适合作为类清单。

请注意，尽管引入了上下文边界和清单是为了解决通用数组创建的问题，所以在这里使用一个没有意义，因为您的函数 - 如上所示 - 与数组无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T00:55:53.220

当形式类型参数具有此定义中的形式时：

```
def floob[Glorp : Fleeb](arg1: Glorp): Swish = ... 
```

...它只是这个定义的语法糖：

```
def floob[Glorp](arg1: Glorp)(implicit i1: Fleeb[Glorp]): Swish = ... 
```

这称为*上下文绑定*。

这解释了为什么您会得到关于`Double`不采用类型参数的诊断。

因为单冒号的这种用法与类型注释和类型归属中使用的完全无关，所以我统一在冒号两边用空格写上下文边界，从不写类型注释或在左边有空格的类型归属（除了需要时，当左边的名称是标点符号而不是字母数字时）。

# c - C中字符串数组的二进制搜索

> ID：14195762
> 
> 赞同：0
> 
> 时间：2013-01-07T12:16:10.567
> 
> 标签：c, binary-search

我想用 C 编写一个对字符串数组的二进制搜索。

我已经编写了这段代码，它编译时没有错误，但是当我尝试搜索时，它没有给出任何结果。任何帮助，将不胜感激。

字符串是一个类型定义。很抱歉一开始没有澄清这一点。

```
//Looks up word s, in dictionary.
bool lookup(string s)
{  
    int min = 0;
    int max = dictionary.size - 1;
    int mid;
    bool found = false;

    while (min <= max && !found)
    {
        mid = (min + max) /2;
        if (dictionary.words[mid].letters == s)
            found = true;
        else if (dictionary.words[mid].letters > s)
            max = mid -1;
        else
            min = mid + 1;
    }
    return found;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:21:22.683

C中的String只是char数组，由于数组之间的比较使用`==`只比较起始地址，所以需要使用librray函数[`strcmp`](http://en.cppreference.com/w/cpp/string/byte/strcmp)来`string.h`比较数组的内容。像这样：

```
if (strcmp(dictionary.words[mid].letters, s) == 0) 
```

**编辑**

我看到尽管有`c`标签，但你有某种`string`类型。这是 C 还是 C++？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:05:12.013

我认为如果您粘贴字符串和字典结构会有所帮助。

假设 Dictionary 是 word.Strings （char 数组）的排序数组，而 string 也是 char 数组，那么我会假设当您执行`dictionary.words[int].letters` 此操作时，返回类型是内存，而 .Strings 也是如此`s`。由于这两个字符串保存在不同的内存位置，因此您无法找到该字符串。

尝试遍历字符串以比较字符串

```
bool lookup(string s)
{  
    int min = 0;
    int max = dictionary.size - 1;
    int mid;
    bool found = false;
    int i;
    int length = 0;                 //calculate the length of the input string
    while (s[length] != '\0')
    {
    length++;
    }

    while (min <= max && !found)
    {
        mid = (min + max) /2;
        for(i=0;i<length;i++)
        {
            if(dictionary.words[mid].letters[i] == '\0')
                break;
            if (dictionary.words[mid].letters[i] == s[i])
                continue;
            else if (dictionary.words[mid].letters[i] > s[i])
                max = mid -1;
            else
                min = mid + 1;
            break;
        }
        if(i==length)
            found=true;
    }
    return found;
} 
```

我还没有编译代码，但这应该给你要点。

# magento - Magento：一个产品多个仓库

> ID：14195766
> 
> 赞同：0
> 
> 时间：2013-01-07T12:16:21.637
> 
> 标签：magento

我有两个仓库，一个在美国，一个在欧洲。我有两个商店视图，一个是美国的，一个是欧洲的。我有一种产品具有相同的 sku，但美国和欧洲的库存价值不同。我只能从美国仓库向美国销售产品，从欧洲仓库向欧洲销售产品。问题是，如果我在欧洲仓库有产品“有货”，但对于美国仓库“缺货”，它仍然显示产品在美国商店视图中是“有货”。如何区分美国和欧洲商店视图的仓库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:48:42.943

Magento CE 或 EE 中的开箱即用您不能。不支持多仓库（多库存）。

您可以查看可以执行多位置的模块：[嵌入式 ERP](http://www.boostmyshop.com/english/extension-logistique.html)（您可以自己进行更多研究以找到其他提供商）。

通常，如果您有这种复杂性，库存由 ERP 系统管理。

# plugins - 设置参考 CRM 2011 插件时出错

> ID：14195768
> 
> 赞同：0
> 
> 时间：2013-01-07T12:16:30.853
> 
> 标签：plugins, dynamics-crm-2011

我使用下面的代码。一切正常，直到我想在“var workReportItem”最后一行的 workReportItem 上设置客户（帐户）的引用。代码是：

```
private static void AddWRItoServiceActivity(IOrganizationService service, Guid id)
    {
        using (var crm = new XrmServiceContext(service))
        {

            var serviceactivity = crm.ServiceAppointmentSet.Where(c => c.Id == id).First();
            var serviceitem = crm.brd_serviceitemSet.Where( c => c.brd_RegardingServiceId.Id == serviceactivity.ServiceId.Id);

            foreach (var S in serviceitem)
            {
                var workReportItem = new brd_workreportitem
                   {
                       brd_name = S.brd_name,
                       brd_serviceappointment_brd_workreportitem = serviceactivity,
                       brd_brd_serviceitem_brd_workreportitem_ServiceItem = S,
                       brd_brd_servicereportitem_brd_workreportitem_ServiceReportItem = S.brd_brd_servicereportitem_brd_serviceitem_ServiceReportItem,
                       brd_Customer = serviceactivity.Customers.First().ToEntityReference(),
                    };

                // Setting the optionset value "type"
                OptionSetValue myOptionSet = new OptionSetValue();
                myOptionSet.Value = S.brd_brd_servicereportitem_brd_serviceitem_ServiceReportItem.brd_Type.Value;
                workReportItem.Attributes["brd_type"] = myOptionSet;

                crm.AddObject(workReportItem);
                crm.SaveChanges();
            }
        }
    } 
```

错误是：值不能为空。参数名称：来源。如果有人可以提供帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:29:37.027

看起来像客户为空。您必须对客户集执行另一个查询，以便为服务活动拉回客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:36:14.503

我使用以下代码在派对列表上设置参考：

```
ActivityParty activityParty = new ActivityParty { PartyId = new EntityReference(MissionAccount.LogicalName, MissionAccount.Id) };
var customer = new List<ActivityParty>();
customer.Add(activityParty);
serviceactivity.Customers = customer; 
```

# javascript - 使用 Javascript 禁用 AJAX 日历

> ID：14195771
> 
> 赞同：-1
> 
> 时间：2013-01-07T12:16:42.293
> 
> 标签：javascript, asp.net, ajax

如何使用 JavaScript 在页面中禁用[日历扩展器？](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:19:06.893

我从 msdn 找到的这个脚本

```
<script type="text/javascript" language="javascript">
            function enableCalendar(){
                $get("<%=TextBox1.ClientID %>").disabled = false;
                $get('btnDisable').disabled = false;
                $get('btnEnable').disabled = true;
                $find('myCEID').set_button($get("<%=ImageButton1.ClientID%>"));
            }
            function disableCalendar(){
                $get("<%=TextBox1.ClientID %>").disabled = true;
                $get('btnDisable').disabled = true;
                $get('btnEnable').disabled = false;
                $find('myCEID').hide();
                $common.removeHandlers($find('myCEID')._button, $find('myCEID')._button$delegates);
                $find('myCEID')._button = null;
            }
        </script> 
```

你可以在那里查看完整的答案：[**禁用 CalendarExtender**](http://forums.asp.net/t/1181409.aspx)

# r - 预测包中的模拟.Arima 函数

> ID：14195782
> 
> 赞同：2
> 
> 时间：2013-01-07T12:17:31.243
> 
> 标签：r, time-series, forecasting

我正在使用包预测进行季节性时间序列模拟，我有两个问题：

1）我不完全理解“未来”选项的含义和效用。它默认设置为 TRUE，如果我想预测该系列的未来值，我认为应该是这样，但我不明白未来 = FALSE 的模拟有什么用。

2) 模拟.Arima 功能基本上是对传统 arima.sim 功能的改进。但是，使用 arima.sim，可以使用 innov 参数为函数提供一些用户定义的创新过程，而使用模拟.Arima 则无法这样做。我错过了什么 ？如果没有，并且如果 Hyndman 先生阅读了这篇文章，是否有可能在未来的版本中添加这样的选项？目前，我想我会得到源代码并尝试自己修改代码。

感谢，并有一个愉快的一天。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T23:25:10.227

1.  根据帮助文件，`future`意思是“生成未来并以对象中的数据为条件的示例路径。”。因此，如果 `future=TRUE`，则模拟观察以历史观察为条件。换句话说，它们是时间序列未来可能的样本路径。但如果`future=FALSE`，则忽略历史数据，模拟是与原始数据无关的时间序列模型的可能实现。

2.  [我将在https://github.com/robjhyndman/forecast/issues?state=open](https://github.com/robjhyndman/forecast/issues?state=open)的功能请求列表中添加允许用户指定创新的建议 。同时，这是一个非常容易的修改。只需找到调用`rnorm`并替换它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T15:28:00.680

当您想要检查模型与数据的拟合度时，将`future`选项设置为很有用。`FALSE`例如，在下图中，模型拟合为红色，而实际数据为黑色。

```
library(forecast)
fit <- Arima(USAccDeaths)
plot(simulate(fit,future=FALSE),col='red')
lines(c(USAccDeaths)) 
```

![在此处输入图像描述](../Images/05943f0b091c7ed51ab5b3947a5ec591.png)

更有趣的是得到两者之间的区别：

```
plot(simulate(fit,future=FALSE)-c(USAccDeaths)) 
```

![在此处输入图像描述](../Images/08f95900e243d3a438d0feeb0f52d3f2.png)

# php - 将自定义字段添加到产品并在前端选项中根据此字段进行过滤

> ID：14195783
> 
> 赞同：0
> 
> 时间：2013-01-07T12:17:33.127
> 
> 标签：php, magento, magento-1.7

我想在“目录->管理产品->产品信息”中添加一个新文件，比如“年龄”。它将是下拉列表（必填**字段**）。值可以是 0-6 个月、1-2 年、2-5 年等

在前端，就像有一个显示类别的框一样，会有另一个框显示这些值，即 0-6 个月、1-2 年、2-5 年等当用户单击这些链接时，它将仅列出具有年龄的相同值。

我已经找到：

*   [Magento - 在管理员的产品选项中添加一个新字段](https://stackoverflow.com/questions/2136515/magento-adding-a-new-field-to-the-product-options-in-admin)
*   [Magento - 在管理员的产品选项中添加一个新字段](https://stackoverflow.com/questions/2136515/magento-adding-a-new-field-to-the-product-options-in-admin)

正如你所看到的，它们对我的工作来说是不够的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:20:53.237

添加“年龄”属性时，确保“在分层导航中使用”设置为“是”。更多信息[http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-attributes-custom-fields](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-attributes-custom-fields)

# extjs - 如何将多选集中在 extjs 中的制表键上？

> ID：14195784
> 
> 赞同：0
> 
> 时间：2013-01-07T12:17:34.437
> 
> 标签：extjs, extjs4, extjs4.1, multi-select

我在我的页面中使用了一个多选控件（xtype：Ext.ux.form.MultiSelect）。当我使用选项卡从一个控件切换到另一个控件时，它正在跳过多选控件。当我使用 Tab 键时，如何聚焦多选控件？

**更新**：下面的示例代码

```
Ext.create('Ext.container.Container', {
                layout: {
                    type: 'vbox'
                },
                width: 400,
                minHeight:200,
                renderTo: Ext.getBody(),
                border: 1,
                style: { borderColor: '#000000', borderStyle: 'solid', borderWidth: '1px' },
                defaults: {
                    labelWidth: 80,
                    style: {
                        padding: '10px'
                    }
                },
                items: [{
                    xtype: 'datefield',
                    name: 'startDate',
                    fieldLabel: 'Start date'
                }, {
                    xtype: 'multiselect',
                    name: 'multi select',
                    fieldLabel: 'multiSelect',
                    store: [[123,'One Hundred Twenty Three'],
                            ['1', 'One'], ['2', 'Two'], ['3', 'Three'], ['4', 'Four'], ['5', 'Five'],
                            ['6', 'Six'], ['7', 'Seven']
                            ]

                }, {
                    xtype: 'datefield',
                    name: 'endDate',
                    fieldLabel: 'End date'
                }]
            }); 
```

# css - ie9不渲染背景渐变的底部

> ID：14195786
> 
> 赞同：0
> 
> 时间：2013-01-07T12:17:46.687
> 
> 标签：css, html, wordpress, internet-explorer, twitter-bootstrap

我正在使用 Wordpress 和 320press 的 wp-bootstrap 主题构建一个网站。我已经为它创建了自己的色板主题，并且一切正常，除了在 IE 中，网站的底部，在页面加载时不可见的部分，被灰色替换，就好像它从未渲染过一样。所以该网站看起来不错，直到我向下滚动。

我已经在 3 个不同的 IE9 实例上对此进行了测试。

有没有其他人见过这样的渲染错误？我在互联网上找不到任何东西，也看不到 html 或 css 中的任何错误。

我会指向该网站，但它目前仅存在于本地。

编辑：我发现通过停用此规则：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d6dae0', endColorstr='#7490a0',GradientType=0 ); 
```

问题消失了。不幸的是，它被替换为

```
background: rgb(214,218,224); 
```

这不是渐变。

我试图在 jsfiddle 重新创建问题：http: [//jsfiddle.net/3AFw8/2/](http://jsfiddle.net/3AFw8/2/)但它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:58:28.300

对我来说，我将使用 .SVG 为 IE9 渲染

```
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2Q2ZGFlMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM3NDkwYTAiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+); 
```

我会推荐你​​使用： http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# asp.net - 空应用程序，缺少属性和引用文件夹？

> ID：14195790
> 
> 赞同：1
> 
> 时间：2013-01-07T12:17:53.360
> 
> 标签：asp.net, visual-studio-2012, asp.net-4.0

我刚开始使用 ASP.NET。我目前正在学习一个从创建`ASP.NET Empty Web Application`. 我所拥有的，有点相似，是`ASP.NET Empty Website`。

但是该项目模板仅提供一个`web.config`几乎没有任何内容的文件，仅此而已。但是在教程中它显示他的项目有一个`Properties`和一个`References`文件夹。并且可能更完整`web.config`。

那么我能做什么最好呢？有没有办法以某种方式添加`Properties`and`References`文件夹？那不完整的`web.config`呢？这是里面唯一的东西：

```
<configuration>
  <system.web>
    <compilation debug="false" targetFramework="4.0">
      <assemblies>
      </assemblies>
    </compilation>
  </system.web>
</configuration> 
```

还是我最好从 a 开始`ASP.NET Web Forms Site`，然后删除我不需要的所有文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:03:04.327

网站和应用程序之间存在差异（=>[网站和 Web 应用程序之间有什么区别？](https://stackoverflow.com/questions/8694922/whats-the-difference-between-a-web-site-and-a-web-application)）。打开`File > New > Project`( `Ctrl + Shift + N`) 并`ASP.NET Empty Web Application`从那里选择。

# php - 将 jQuery UI 对话框模态表单数据插入 mySQL

> ID：14195792
> 
> 赞同：2
> 
> 时间：2013-01-07T12:18:04.180
> 
> 标签：php, jquery, html, ajax, user-interface

我正在使用 jQuery UI 对话框在我的网站上注册新用户。对话框工作正常。但是，当我提交表单时，AJAX 调用没有做任何事情。我已经在网上搜索了一段时间，但找不到有效的解决方案。这是我目前的代码：

```
var username=$("#username").val();
var password=$("#password").val();
var checkpassword=$("#checkpassword").val();
var email=$("#email").val();
var user_level=$("#user_level").val();
var date_created=$("#date_created").val();

$( "#dialog-form" ).dialog({
    autoOpen: false,
    height: 500,
    width: 600,
    modal: true,
    buttons: {
        "Registreren": function() {
            var bValid = true;
            allFields.removeClass( "ui-state-error" );

                bValid = bValid && checkLength( username, "username", 3, 16 );
                bValid = bValid && checkLength( email, "email", 6, 80 );
                bValid = bValid && checkLength( password, "password", 4, 16 );
                bValid = bValid && checkLength( checkpassword, "checkpassword", 4, 16 );
                bValid = bValid && checkLength( user_level, "user_level", 0, 2 );
                bValid = bValid && checkRegexp( username, /^[a-z]([0-9a-z_])+$/i, "error" );
                bValid = bValid && checkRegexp( email, "error");
                bValid = bValid && checkRegexp( password, /^([0-9a-zA-Z])+$/, "error" );
                bValid = bValid && checkRegexp( checkpassword, /^([0-9a-zA-Z])+$/, "error" );

            if ( bValid ) {
                $.post({
                url: 'register.php',
                data: 
                        {  
                            username: username,
                            password: password,
                            checkpassword: checkpassword,
                            email: email,
                            user_level: user_level,
                            date_created: date_created
                        }//end data
                })//end AJAX post
           }//End if
        }//End function
    }//end buttons
});//end dialog 
```

我的表单只是一个带有指定 ID 的简单 HTML 输入表单

例如输入用户名：

```
<form name="registeracc" id="registeracc" action="register.php" method="post">
<input required type="text" id="username" name="username" class="text ui-widget-content ui-corner-all" />
</form> 
```

我在网上找到了几个针对这个问题的“修复”，但它们似乎对我不起作用。

前任：

```
data: $('#registeracc :input').serialize(),
error: function(xml, status, error) {
$('#registeracc').html('<p>???</p>'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:35:15.950

我不确定，但根据[jQuery API Reference](http://api.jquery.com/jQuery.post/)尝试

```
$.post(
    'register.php',
    {  
        username: username,
        password: password,
        checkpassword: checkpassword,
        email: email,
        user_level: user_level,
        date_created: date_created
    }//end data
)//end AJAX post 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:13:57.137

找到了解决我问题的答案：

```
$.post({
url: 'register.php',
data: 
{  
   username: username,
   password: password,
   checkpassword: checkpassword,
   email: email,
   user_level: user_level,
   date_created: date_created
} 
```

应该：

```
$.post("register.php", $("#registeracc").serialize()); 
```

# iphone - 无法使用 iphone 中的默认 Twitter 将数据从应用程序发送到 twiiter

> ID：14195793
> 
> 赞同：2
> 
> 时间：2013-01-07T12:18:05.533
> 
> 标签：iphone, twitter

我已经使用 Twitter 框架发送推文。我想将一些数据从应用程序传递到推文，但它不能。

我的代码。`

```
 if ([TWTweetComposeViewController canSendTweet]) {

        // Initialize Tweet Compose View Controller
        TWTweetComposeViewController *vc = [[TWTweetComposeViewController alloc] init];
        UITextField *txtFild1=[[UITextField alloc]init];
        txtFild1.text=shareString;
        // Settin The Initial Text
        [vc setInitialText:self.shareString];
        [txtFild1 release];
        // Adding an Image

        // Adding a URL

        // Setting a Completing Handler
        [vc setCompletionHandler:^(TWTweetComposeViewControllerResult result) {
            [self dismissModalViewControllerAnimated:YES];
        }];

        // Display Tweet Compose View Controller Modally
        [self presentViewController:vc animated:YES completion:nil]; 
```

`

我的数据在共享字符串中。但它不设置为初始文本。

怎么解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:24:32.930

首先添加`Twitter.framework`from`Build Phases => LinkBinary with Libraries`然后将此文件导入您的`.m`文件中，如下所示...

```
#import <Twitter/TWTweetComposeViewController.h> 
```

然后像下面这样使用它..这只是一个例子..

```
- (IBAction)CallTwitter
{   
    TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];

    [twitter setInitialText:@"Write Some Text Here"];

    [self presentViewController:twitter animated:YES completion:nil];

    twitter.completionHandler = ^(TWTweetComposeViewControllerResult res) {

        if(res == TWTweetComposeViewControllerResultDone)
        {

            UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:@"Success!" message:@"Your Tweet was posted succesfully" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

            [alertView show];
            [alertView release];

        }else if(res == TWTweetComposeViewControllerResultCancelled)
        {

            UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:@"Canceled" message:@"Your Tweet was not posted" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

            [alertView show];
            [alertView release];
        }
        [self dismissModalViewControllerAnimated:YES];
    };
} 
```

# ios - UIScrollview 的元素不是从 0,0 开始

> ID：14195794
> 
> 赞同：0
> 
> 时间：2013-01-07T12:18:06.390
> 
> 标签：ios, xcode, uiscrollview, xib

![----------](../Images/7728a913f776ef0c96d7d7d9243e3b63.png)

我遇到了一个奇怪的问题....我正在使用 Xcode 4.5.2 iOS sdk 6.0 我在 XIB 中使用了滚动视图...我关闭了自动布局功能...我想添加一个图像视图（或任何其他 UIView或其子类）在位置（0,0）...我可以将视图拖放到该位置，但在 XIB 的大小检查器中它显示奇怪的数据....它在图片中显示imageview 是（160,303）..我尝试使用 XIB 创建新类，但问题一次又一次地重复..如果您有解决方案，请提前感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:20:52.347

检查您的`origin`，将其设置为`left top`

它应该是

![在此处输入图像描述](../Images/19edca7520ae0fb435ad2e23f6fd22ad.png)

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:19:38.667

您的原点设置为底部中间。将其更改为左上角

![在此处输入图像描述](../Images/e6f3bbe32d66e87bd45c5671279d8580.png)

# jquery - jQuery Drag & Drop 不在 IE 中设置背景 - 适用于所有其他浏览器

> ID：14195799
> 
> 赞同：1
> 
> 时间：2013-01-07T12:18:21.100
> 
> 标签：jquery, jquery-ui, drag-and-drop

我正在尝试将背景图像设置为带有 jquery 可拖放和可拖放的 DIV。它适用于除 IE 之外的所有浏览器（至少我正在测试的 IE 9）。

在代码中找不到错误，有人知道为什么它不起作用吗？

```
$(function() {
     $("#draggable1" ).draggable({helper:'clone'});
     $("#draggable2" ).draggable({helper:'clone'});
     $("#draggable3" ).draggable({helper:'clone'});
        $( "#droppable" ).droppable({
            drop: function( event, ui ) {
                    $("#droppable").css('background-image', 'url(' + $(ui.draggable).attr("src") + ')');                    
            }
        });
 }); 
```

在这里演示：http: [//jsfiddle.net/spairus/tXCjH/57/](http://jsfiddle.net/spairus/tXCjH/57/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:25:42.770

IE 默认不支持使脚本停止的控制台支持，按 F12 打开它或将调试模式设置为 false：

[在这里演示](http://jsfiddle.net/tXCjH/69/)

```
var debugmode = false; 
```

顺便说一句，您可以将代码简化为：

```
$("#draggable1,#draggable2,#draggable3" ).draggable({helper:'clone'}); 
```

# maven - 如何为 Doxia 的部分添加本地 HTML 锚？

> ID：14195801
> 
> 赞同：2
> 
> 时间：2013-01-07T12:18:30.753
> 
> 标签：maven, maven-site-plugin, doxia

在 Maven 站点文档中，我对部分使用如下代码：

```
<section name="Hibernate statistics">
  Foo
</section> 
```

如何告诉 Doxia 我希望部分名称/标题成为 HTML 本地锚？[http://maven.apache.org/doxia/references/doxia-apt.html#Anchors](http://maven.apache.org/doxia/references/doxia-apt.html#Anchors)确实谈到了这一点，但我一直无法将它应用于`<section>`s。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T14:01:56.523

我仍然不知道如何“正确”地做到这一点。但是，有一个非常简单且无痛的解决方法；使用`id`属性：

```
<section name="Hibernate statistics" id="hibernate-statistics">
  Foo
</section> 
```

`id`以原样在 HTML 标记中结束。现在大多数浏览器都支持使用`id`s 作为锚点：`http://server/page.html#hibernate-statistics`

# javascript - Meteor 中未捕获的类型错误

> ID：14195802
> 
> 赞同：2
> 
> 时间：2013-01-07T12:18:32.017
> 
> 标签：javascript, node.js, mongodb, undefined, meteor

我有这个代码：

```
Meteor.subscribe('practices');

Session.set('practice', 'Practice 1');

Template.laps_t.laps = function () {
  var obj = Practices.findOne({name: Session.get('practice')});
  return obj.lap_n;
}; 
```

我收到一个错误：`Uncaught TypeError: Cannot read property 'lap_n' of undefined`.

我知道这`lap_n`实际上是`obj`.

我没有使用自动订阅。有任何想法吗？

**编辑：**

解决了。多谢你们。

if(obj){ return obj.lap_n } 就像你说的那样成功了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:59:15.747

您应该始终检查模板内是否存在对象。它的工作方式是模板将在页面加载时立即执行，甚至可能在订阅从服务器检索到 mongo 数据之前，因此在这种情况下，您`obj`将是未定义的，并且不会具有您期望的属性。但是由于模板是反应式的，一旦数据可用，您的`Practices.findOne`调用将被重新评估并重新执行模板。然后它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:46:08.503

您可能必须等到数据到达，所以您可以尝试添加

```
if obj
    return obj.lap_n
else
    return {
        lap_n: 0
    } 
```

# ruby-on-rails - 为什么 view.json.erb 中的 render :json 会导致错误，需要 :partial、:template、:inline

> ID：14195806
> 
> 赞同：4
> 
> 时间：2013-01-07T12:19:02.140
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在控制器中：

```
def some_action
  @foo = 'bar'
end 
```

并在`some_action.json.erb`：

```
<%= render :json => @foo %> 
```

这会导致错误：

```
ArgumentError - You invoked render but did not give any of :partial, :template, :inline, :file or :text option.:
  (gem) actionpack-3.2.10/lib/action_view/renderer/template_renderer.rb:36:in `ActionView::TemplateRenderer#determine_template'
  (gem) actionpack-3.2.10/lib/action_view/renderer/template_renderer.rb:10:in `ActionView::TemplateRenderer#render'
  (gem) actionpack-3.2.10/lib/action_view/renderer/renderer.rb:36:in `ActionView::Renderer#render_template'
  (gem) actionpack-3.2.10/lib/action_view/renderer/renderer.rb:17:in `ActionView::Renderer#render'
  (gem) actionpack-3.2.10/lib/action_view/helpers/rendering_helper.rb:24:in `#<Class:0xb4a2378>#render'
   ... 
```

尽管我把头绕在它周围，但我不明白为什么`render :json => ...`不应该在这里工作。我知道我可以直接从控制器为 format.json 渲染，但我试图通过视图来完成它，而不是在 .erb 中手动制作 json。

Ruby 1.9 上的 Rails 3.2.10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T15:34:49.893

[`render`视图上下文中](http://api.rubyonrails.org/classes/ActionView/Helpers/RenderingHelper.html#method-i-render)的方法[`render`和控制器上下文](http://api.rubyonrails.org/classes/AbstractController/Rendering.html#method-i-render)中的方法是两种不同的方法，前者不期望`:json`选项。

正如[apneadiving](https://stackoverflow.com/users/350087/apneadiving)建议的那样，使用`@foo.to_json`json builder。

# php - Magento：监控所有 cron 作业的执行时间？

> ID：14195809
> 
> 赞同：3
> 
> 时间：2013-01-07T12:19:07.070
> 
> 标签：php, magento

我继承了一个基于 Magento Enterprise 1.9 的网站，该网站有很多定期运行的 cron 作业。

这些 cron 作业由第三方模块配置，不是 Magento 核心的一部分。

一组作业处理将数据文件从 Magento 导出和导入到仓库管理系统，有时 cron 作业会卡在某种循环中，并且会持续处理数小时，而它们本应该只需要几分钟。

我想以某种方式监控这些工作需要多长时间，但不修改每个脚本本身。也许某种观察者，如果这样的事情是可能的？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T14:49:44.480

`core_schedule`可以从表中收集对 Magento 中计划作业的调度和运行的基本了解。**请注意，根据System > Configuration > System > Cron Schedule**中的设置添加和删除条目。可以从任何给定模块的*config.xml*`<crontab />`中的节点确定发起的计划作业配置（类、方法和 cron 表达式） 。

 *[通过使用Fabrizio Branca 的 AOE_Scheduler 模块（链接）](http://www.fabrizio-branca.de/magento-cron-scheduler.html)，可以在 Admin 中对其中的许多进行可视化和交互。

要捕获性能（内存使用情况、开始/停止时间），可能需要在这些 cron 触发的脚本中删除一些日志记录调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T05:08:18.197

**构建一个脚本，该脚本执行从cron_schedule**表创建的格式化表。

~~我知道发布链接的常见做法，但 MagentoCommerce.com 可能不会很快消失，在这里发布代码是一个皇家 PITA。[所以这里是读取 cron_schedule 并创建完整报告的 PHP 脚本的链接。](http://www.magentocommerce.com/boards/viewreply/351010/)~~代码见底部。进入系统配置 cron 设置并告诉它保存信息 24 小时。

![在此处输入图像描述](../Images/1a6b25236c9b70993c3d7abf8cc7875a.png)

您现在可以看到正在计划的所有内容以及已执行的所有内容，如以下输出示例所示。

![在此处输入图像描述](../Images/0ca30288b1161c54c2c79609853b6c09.png) ![在此处输入图像描述](../Images/571e8ffa977e897e111596798c77b286.png)

对链接上的 MageBayvaporation 感到抱歉，我试图将最重要的东西移到这里，但错过了这一点。幸运的是，它仍在其中一个站点上运行。

```
<?php

/******************************************************
 * Magento Log File Contents Monitor.
 * Released under the Digital Damnation Copyright
 * Free to do whatever the 7734 you want to do with it.
 * provided without warranty or support
 ******************************************************/

/***********************
 * Scan Magento local.xml file for connection information
 * Run out of password protected scripts/ directory
 ***********************/

if (file_exists('../app/etc/local.xml')) {

$xml = simplexml_load_file('../app/etc/local.xml', NULL, LIBXML_NOCDATA);

$db['host'] = $xml->global->resources->default_setup->connection->host;
$db['name'] = $xml->global->resources->default_setup->connection->dbname;
$db['user'] = $xml->global->resources->default_setup->connection->username;
$db['pass'] = $xml->global->resources->default_setup->connection->password;
$db['pref'] = $xml->global->resources->db->table_prefix;

$tables = array(
   'dataflow_batch_export',
   'dataflow_batch_import',
   'log_customer',
   'log_quote',
   'log_summary',
   'log_summary_type',
   'log_url',
   'log_url_info',
   'log_visitor',
   'log_visitor_info',
   'log_visitor_online',
   'catalog_compare_item',
   'report_event',
   'report_compared_product_index',
   'report_viewed_product_index',
   'sales_flat_quote',
   'sales_flat_quote_address',
   'sales_flat_quote_address_item',
   'sales_flat_quote_item',
   'sales_flat_quote_item_option',
   'sales_flat_quote_payment',
   'sales_flat_quote_shipping_rate'
);

} 

else {
    exit('Failed to open ../app/etc/local.xml');
}

/** Get current date, time, UTC and offset **/

$date   = date("Y-m-d");
$time   = date("H:i:s T");
$offset = date("P");
$utc    = gmdate("H:i:s");

/***********************
 * Start HTML output
 ***********************/

echo '<html><head><title>Magento Log File Contents on ' . $date . ' ' . $time . '</title>
<meta http-equiv="refresh" content="30">
<style type="text/css">html {width: 100%; font-family:  Arial,Helvetica, sans-serif;}
body {line-height:1.0em; font-size: 100%;}
table {border-spacing: 1px;}
th.stattitle {text-align: left; font-size: 100%; font-weight: bold; color: white; background-color: #101010;}
th {text-align: center; font-size: 90%; font-weight: bold; padding: 5px; border-bottom: 1px solid black; border-left: 1px solid black; }
td {font-size: 90%; padding: 4px; border-bottom: 1px solid black; border-left: 1px solid black;}
</style>
</head><body>';

/** Output title, connection info and cron job monitor runtime **/

echo '<h2>Magento Log File Contents Report</h2><h3>Connection: '.$db['user'].'@'.$db['host'].'&nbsp;&nbsp;&ndash;&nbsp;&nbsp;Database: ' . $db['name'] . '</h3>';
echo '<h3>Runtime: ' . $date . '&nbsp;&nbsp;&nbsp;' .$time . '&nbsp;&nbsp;&nbsp;' . $utc . ' UTC</h3>';
echo '<h4>Note: Your timezone offset is ' . $offset . ' hours from UTC</h4>';

/** Connect to database **/

$conn = mysql_connect($db['host'],$db['user'],$db['pass']);
@mysql_select_db($db['name']) or die(mysql_error());

/***********************
 * Get table record counts
 ***********************/

echo '<table><tbody><tr><th class="stattitle" colspan="2">Log Tables</th></tr>';
echo '<tr><th>Table</th><th>Row Count</th></tr>';

foreach($tables as $tblname) {
   $result  = mysql_query('SELECT COUNT(*) FROM ' . $db['pref'] . $tblname) or die(mysql_error());
   $numrows = mysql_fetch_array($result);
   $num     = $numrows[0];

   /* Table output */
   echo '<tr>';
   echo '<td>'.$db['pref'].$tblname.'</td>';
   echo '<td align="right">'.$num.'</td>'; 
   echo '</tr>';                 
}

echo '</tbody></table></body></html>';

/***********************
 * End of report
 ***********************/

mysql_close($conn);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-13T17:24:32.763

我有一个客户也有同样的担忧，他们没有看到作业运行了多长时间，也没有很好地了解他们的 cron 中发生的事情。有一些解决方案，但他们并没有完全做到他们想要的，所以我最终构建了一个小型服务，我称之为[Job Health Data Vault](https://vh.10n-software.com/)。任何人都可以免费使用。*

# jquery-ui - 如何在 Jquery Mobile UI 中对齐 div(data-role="horizo ntal") 宽度？

> ID：14195813
> 
> 赞同：0
> 
> 时间：2013-01-07T12:19:18.757
> 
> 标签：jquery-ui, jquery-mobile, pug

我想给 10% 给 div(class='ui-block-a')，剩下的给 div(class='ui-block-b')。但我不能这样做？？

```
div(data-role="horizontal", data-theme="a", class="ui-bar ui-grid-a",data-overlay-theme="a", data-inline="true")
           div(class='ui-block-a',style="width:10%;)
             div(class='content-primary')
                        ul(data-role='listview')
                            li 
                                a(href="acura.html") Acura
            div(class='ui-block-b', style="width:90%;)
                img(src='/images/sample.jpg', width='500', height='590', style='margin:8px 10px 10px 20px;') 
```

![在此处输入图像描述](../Images/7b9c4a2888822b5f22d1080ec2ded187.png)

我的输出是：

但我想要左边的 10% 和右边的 90%。但它是平等的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:49:01.240

所以你想定制一个 jQM 网格。事情不会那么简单。

为什么不尝试使用第 3 方 jQuery 移动网格插件。它可以比原来的配置好得多，它只需要一个额外的 css 文件：

这个插件叫做 960 网格，可以在这里找到：http: [//jeromeetienne.github.com/jquery-mobile-960/](http://jeromeetienne.github.com/jquery-mobile-960/)

同样，这是您希望使用此网格实现的内容：http: [//jsfiddle.net/Gajotres/jbGx4/](http://jsfiddle.net/Gajotres/jbGx4/)

```
 <div data-role="content">
      <fieldset class="container_12">
        <div class="grid_2"><a data-role="button">2</a></div>
        <div class="grid_10"><a data-role="button">10</a></div>  
      </fieldset>          
    </div> 
```

# java - Solrj 日期时区

> ID：14195814
> 
> 赞同：2
> 
> 时间：2013-01-07T12:19:20.237
> 
> 标签：java, solr, solrj

我用`apache solr 4`，我是新人`Solr`，我想在两个日期之间查询，但是我有一个关于时区的问题：如果我想查询一天，我会在这一天的前一天得到。

```
String urlString = "http://localhost:8983/solr"; 
SolrServer solr = new CommonsHttpSolrServer(urlString);
QueryResponse rsp = solr.query(  new SolrQuery("last_modified:[2013-01-03T00:00:00Z TO 2013-01-05T23:59:59Z]") );
SolrDocumentList docs = rsp.getResults();
for(int i=0;i<docs.getNumFound() ; i++) {
    System.out.println (docs.get(i).getFieldValue("id"));
} 
```

我搜索了一下，发现了一个建议：

> *写 +00:00 而不是 Z 。例如，2002-10-10T12:00:00+05:00 是 2002-10-10T07:00:00Z*

但是当我这样做时，我得到了例外：

```
QueryResponse rsp = solr.query( new SolrQuery("last_modified:[2013-01-03T00:00:00+04:00 TO 2013-01-05T23:59:59+04:00]") ); 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T11:44:17.987

可悲的是，Solr 仅支持该`Z`格式，并且据我所知不了解时区语法。

显然，您不在 UTC，因此您想将其转换为您的时区。最简单的方法是在您的代码中使用正确的语言环境执行此操作 - 例如，计算您需要的任何范围的 UTC 时间。

```
SimpleDateFormat genericDateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssz");

SimpleDateFormat dateFormatUTC = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
dateFormatUTC.setTimeZone(TimeZone.getTimeZone("UTC"));

Date start = genericDateFormat.parse("2013-01-03T00:00:00+0400");
Date end = genericDateFormat.parse("2013-01-03T23:59:59+0400");

String range = "[" + dateFormatUTC.format(start) + " TO " + dateFormatUTC.format(end) + "]"; 
```

`range`将包含`[2013-01-02T20:00:00Z TO 2013-01-03T19:59:59Z]`对应于 UTC + 4 中 1 月 3 日全天的字符串。

# unit-testing - Boost Test：如何编写参数化测试用例

> ID：14195819
> 
> 赞同：7
> 
> 时间：2013-01-07T12:19:50.960
> 
> 标签：unit-testing, boost, boost-test, parameterized-unit-test

我有一个提升测试用例。无论参数如何，都会执行此测试用例的大多数行。但是有些部分是根据提供的参数执行的。我想避免编写两个单独的测试用例，它们几乎相同，除了一些小部分。所以我需要使用类似下面的方法来创建参数化测试用例：

```
BOOST_FIXTURE_TEST_CASE(caseA, Fixture)
{
    TestFunction("parameterA");
}

BOOST_FIXTURE_TEST_CASE(caseB, Fixture)
{
    TestFunction("parameterB");
}

void TestFunction(string param)
{
    // ...
    // lots of common checks regardless of parameters
    // ...
    if(param == "parameterA")
        BOOST_CHECK(...);
    else if(param == "parameterB")
        BOOST_CHECK(...);
} 
```

有没有其他方法可以更方便地实现我的目标？我可以找到[BOOST_PARAM_CLASS_TEST_CASE](http://www.boost.org/doc/libs/1_35_0/libs/test/doc/components/utf/components/test_case/param_class_tc.html)宏，但我不确定它在这种情况下是否相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-06-03T06:38:06.107

查看 BOOST_DATA_TEST_CASE 正是您需要的。提升 1.62 中的新功能。

（这个问题有点老了，但是当我搜索如何做到这一点时，这是第一个命中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-08T15:47:49.063

没有 Boost 支持 AFAIK，所以我这样做：

```
void test_function(parameters...)
{
    <test code>
}

BOOST_AUTO_TEST_CASE(test01) {
    test_function(parameters for case #1)
}

BOOST_AUTO_TEST_CASE(test02) {
    test_function(parameters for case #2)
} 
```

如果你喜欢模板，你可以这样做：

```
template<int I, bool B>
void test_function()
{
    for(int i=0; i<I; i++)
        if (B) BOOST_REQUIRE(i<10);
}

BOOST_AUTO_TEST_CASE(test01) {
    test_function<10, true>();
}

BOOST_AUTO_TEST_CASE(test02) {
    test_function<20, false>();
} 
```

# redis - Redis 或服务器配置问题

> ID：14195820
> 
> 赞同：1
> 
> 时间：2013-01-07T12:20:01.130
> 
> 标签：redis

我们有 3 台来自 Hetzner 的专用服务器并遇到此处描述的相同问题：[http ://code.google.com/p/redis/issues/detail?id=500](http://code.google.com/p/redis/issues/detail?id=500)

我们已经建立了一个广告网络，每天提供大约 20 万次广告展示，在某些日子里，当我们的流量比平时多时，我们就会开始出错并失去展示次数。

Web 服务器和 Redis 在不同的服务器上运行。我们尝试使用 2 个不同的 redis 连接器（phpredis 扩展和 predis 库），但仍然遇到相同的问题 - 不时出现“连接超时”错误。

我们尝试在 redis.conf 中增加各种限制，但没有任何运气。

两台服务器都有 CPU 能力和可用内存。

也许有人有一些新想法，如何解决这个问题？

# .htaccess - 使用 301 重定向重写 htaccess 中的查询字符串 URL

> ID：14195826
> 
> 赞同：0
> 
> 时间：2013-01-07T12:20:27.947
> 
> 标签：.htaccess, redirect, url-rewriting, query-string

我试图在 Stackoverflow 上的其他问题中找到我的问题的解决方案，但是尽管有很多这样的问题针对完全相同的问题得到了回答，但它是不同的，因为我在问我应该如何定义两个以上的查询重写条件中的字符串，

我正在尝试对查询字符串 URL 进行 301 重定向：

> [http://abc.com/index.php?arg1=abc&arg2=abc](http://abc.com/index.php?arg1=abc&arg2=abc)

将其掩盖为

> [http://abc.com/prettified_url](http://abc.com/prettified_url)

，并尝试在 htaccess 中使用以下代码：

```
RewriteRule ^http://abc.com/index.php?arg1=abc&arg2=abc$ /prettified_url  [R=301,L,NC] 
```

也尝试过使用：

```
RewriteCond %{HTTP_HOST} !^.*abc\.com
    RewriteRule .? - [S=2]
    RewriteCond %{REQUEST_URI} ^index.php
    RewriteCond %{QUERY_STRING} ^arg1=abc [NC]
    RewriteCond %{QUERY_STRING} arg2=abc [NC]
    RewriteRule ^(.*)$ /prettified_url [R=301,L]

    RewriteRule .? - [S=1]
    RewriteRule - - 
```

还尝试在查询字符串 ReWrite Condition 中使用以下代码：

```
RewriteCond %{QUERY_STRING} ^arg1=abc&arg2=abc [NC] 
```

不过，我看不到它被重定向到**/prettified_url**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:30:59.417

尝试以下一项：

```
RewriteCond %{QUERY_STRING} ^arg1=abc&arg2=abc
RewriteRule (.*) http://abc.com/prettified_url? [L,R=301] 
```

# javascript - 动态获取 HTML5 视频文件

> ID：14195835
> 
> 赞同：0
> 
> 时间：2013-01-07T12:20:59.220
> 
> 标签：javascript, html, html5-video

我有一个 HTML5 视频播放器，我想让它充当视频播放列表。主要问题是它获取的视频是一个名为“video.ogg”的文件，但它总是每 1-2 秒被覆盖一次，并且持续时间小于 1 秒。我可以有类似的东西，

视频_1 视频_2 视频_3 ... ..

但我认为只有一个文件可以让事情变得更干净并且不占用大量空间。

现在从 JS 方面我得到了这个：

```
function play_live_video_test(){
    console.log('Started!!');
    var i=1;
    setInterval(function() {
      console.log(' ->Fetching!!');
      video=fetch_video();
      console.log(' ->Updating Source!!');
      video.src="../../video.ogg";
      console.log(' ->Loading!!');
      video.load();
      console.log(' ->Playing!!');
      video.play();
      i++;
      console.log("Value of i: "+i);
    }, 1000);

    console.log('Ended!!!');
};

function fetch_video(){
  var video=document.getElementById('video');
  return video;
}; 
```

所以每 1000 毫秒我都会“更新”视频标签的来源，并播放视频，但似乎它不起作用！

任何想法如何解决这一问题？或者使用 HTML5 视频实现视频播放列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:22:29.930

当您在视频中获得[`ended`事件](http://dev.w3.org/html5/spec-author-view/video.html#event-media-ended)时更新源，而不是在特定时间过去之后。

# html - google.loader.clientlocation 是否仍受支持

> ID：14195837
> 
> 赞同：18
> 
> 时间：2013-01-07T12:21:12.503
> 
> 标签：html, geolocation, google-api, google-geocoding-api

我使用 google.loader.ClientLocation 进行了一些测试：

*   [http://www.google.com/jsapi](http://www.google.com/jsapi)

但我的测试为空：

```
if (google.loader.ClientLocation) 
```

这是 google 找不到 IP 信息时的行为。

我搜索了 StackOverflow，有很多关于它的问题，但没有好的答案。

我在网上搜索并看到了这两个链接：

*   [https://groups.google.com/forum/?fromgroups=#!topic/google-ajax-search-api/8q_oG-Y9fp8](https://groups.google.com/forum/?fromgroups=#!topic/google-ajax-search-api/8q_oG-Y9fp8)
*   [http://code.google.com/p/google-ajax-apis/issues/detail?id=586](http://code.google.com/p/google-ajax-apis/issues/detail?id=586)
*   [https://groups.google.com/forum/?fromgroups=#!topic/google-ajax-search-api/rzoIh4RrtOQ](https://groups.google.com/forum/?fromgroups=#!topic/google-ajax-search-api/rzoIh4RrtOQ)

这似乎是说应该使用导航器 HTML 地理位置。

Google API 文档不再提及它。

**我想确认 Google google.loader.clientlocation 是否仍在工作？**

我的代码如下：

```
<html>
<head>
  <script type="text/javascript" src="http://www.google.com/jsapi"></script>
</head>
<body>
<script type="text/javascript"> 
function geoTest() {

    if (google.loader.ClientLocation) {

        var latitude = google.loader.ClientLocation.latitude;
        var longitude = google.loader.ClientLocation.longitude;
        var city = google.loader.ClientLocation.address.city;
        var country = google.loader.ClientLocation.address.country;
        var country_code = google.loader.ClientLocation.address.country_code;
        var region = google.loader.ClientLocation.address.region;

        var text = 'Your Location<br /><br />Latitude: ' + latitude + '<br />Longitude: ' + longitude + '<br />City: ' + city + '<br />Country: ' + country + '<br />Country Code: ' + country_code + '<br />Region: ' + region;

    } else {

        var text = 'Google was not able to detect your location';

    }

    document.write(text);
}

geoTest();

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T17:59:44.527

看起来这个 API 有点“弃用”，尽管它仍然适用于某些 IP。

这是我从这里得到的答案：

*   [http://code.google.com/p/google-ajax-apis/issues/detail?id=586](http://code.google.com/p/google-ajax-apis/issues/detail?id=586)

> Loader 中的地理定位功能本身并没有退役。几年前我们停止记录它，并推荐了基于 HTML 的解决方案，因为它们提高了准确性，但目前尚未从加载器中删除该功能本身。谢谢！

因此，当找不到 IP 的位置时，google.loader.ClientLocation 为空

# file - 垂直串联matlab

> ID：14195840
> 
> 赞同：2
> 
> 时间：2013-01-07T12:21:21.543
> 
> 标签：file, matlab, matrix, concatenation

我有 3 个带有浮点数据的 txt 文件。每个文件有 17 行。第一个文件有 3 列，其他两个各有 1 列。我正在尝试将这些文件连接到一个大文件中，这样我在一个文件中就有 5 列这些文件。我会这样做：

```
alldata = [ ];        
  fid2 = fopen(CombinAttrDiff, 'wt')        
NumberOfFiles = 3        
for K = 1 : NumberOfFiles   %looping over all of the files        
thisfile = sprintf('AttrDiff%d.txt',K)        
thisdata = load(thisfile);        
 alldata = [alldata, thisdata];         
end        
      fprintf(fid2, '%f %f %f %f %f\n',alldata);        
fclose all 
```

打印出来的大输出文件不会垂直连接文件 - 第一个文件的第一列的所有值都由大输出文件的行填充，然后取第二列并继续按行填充。我在这里做错了什么？将文件连接到一个文件中以便以后将其用作矩阵是否是正确的方法。我希望新创建的文件的每一行都是这样的向量数组 a=[0.32588 0.58425 0.35887 0.00004 0.75544]。我需要这个，所以我可以在之后比较那些行（数组）。我打算对大文件应用重塑以获取矩阵。

我是matlab的新手，并且已经尝试了几天完成这项工作。非常感谢任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:28:12.443

尝试

```
fprintf( fid2, '%f %f %f %f %f\n', alldata.'); 
```

**编辑：** 为什么这个改变有效？

Matlab 以“列堆栈”方式将其数组存储在内存中：也就是说，内存中的第二个元素是`alldata(2,1)`. 因此，当您打印`alldata`到`fid2`matlab 时，会根据元素的“内存中”顺序对元素进行排序，而不管您提供的格式字符串如何。转置数组会更改顺序以适应您的意图。

# php - 使用 php 上传视频文件时出错

> ID：14195841
> 
> 赞同：0
> 
> 时间：2013-01-07T12:21:21.533
> 
> 标签：php, html

```
<form enctype="multipart/form-data" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST">
                  <table align="center">
                  <tr>
                    <td>Title :</td>
                        <td><input type="text" name="title" size="150"  value= "" /> </td>
                  </tr>
                   <tr>
                        <td>Choose a file to upload: </td>
                      <td><input type="file" name="file" id="file"/></td>
                  </tr>
                  <tr>
                        <td><input type="submit" name="submit" value="Upload File" /></td>
                    </tr>
                </table>
                </form> 
```

**我的PHP：**

```
if ($_SERVER['REQUEST_METHOD'] == 'POST')
{

    if ($_FILES["file"]["error"] > 0)//get error on here when upload video
      {
      echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
      }
    else
      {
         // echo "Upload: " . $_FILES["file"]["name"] . "<br>";
         // echo "Type: " . $_FILES["file"]["type"] . "<br>";
        /*  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
          echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";
          */

          if (file_exists("pdf/" . $_FILES["file"]["name"]))//get error on here when upload video
            {
               //echo $_FILES["file"]["name"] . " already exists. ";
            }
          else
            {
                move_uploaded_file($_FILES["file"]["tmp_name"],
                "pdf/" . $_FILES["file"]["name"]);
             }}} 
```

我可以使用此代码上传 pdf、图像、mp3 文件，但无法上传视频我收到错误消息：“注意：未定义索引：文件在”如何消除此错误？请帮忙......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:25:29.400

这可能意味着 php 脚本找不到该文件。很有可能这是因为您尝试上传的文件太大而服务器拒绝了它。检查您的 php.ini 文件并更改`upload_max_size`属性（也更改`post_max_size`）。

要检查这是否真的是问题，您可以获取另一个 mp3 文件并使其与视频文件一样大。如果上传此文件也失败，问题应该是上传数据的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:34:03.107

对于任何类型的文件，视频上传过程都完全相同。只需更改代码的扩展检查部分。此外，PHP 对上传有大小限制，视频文件更有可能超过。这可以在 php.ini 中更改。

您的错误的可能原因：

文件太大，超出了 php.ini 中设置的限制。寻找upload_max_filesize 和max_post_size。默认情况下，这些只是几兆，这对于视频文件来说可能是不够的。

# .htaccess - 如何仅授予访问子域/文件夹一个IP？

> ID：14195843
> 
> 赞同：0
> 
> 时间：2013-01-07T12:21:23.480
> 
> 标签：.htaccess, ip, subdomain

我很好奇如何仅授予来自一个 IP（公共 ip）的流量访问子域上的一个文件夹？

例如：我有一个来自我的 DSL 提供商（家庭使用）的公共 IP，只有在我家之外我才能访问 subdomain.example.com/test/index.html 和 subdomain.example.com/test/info/info.html

我听说过一个 .htaccess 文件，但是我必须在哪个目录中放置这个文件，里面应该有什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:33:16.963

欢迎来到 stackoverflow.com 我建议您将`.htaccess`文件`subdomain.example.com/test/`放入并将以下代码添加到您的 .htaccess 文件中

**.htaccess**

```
<LIMIT GET>
order deny,allow
deny from all
allow from  192.168.0.18
</LIMIT> 
```

确保将 192.168.0.18 更改为您也希望允许访问的 IP 地址。我用我自己的服务器*chrisrjones.com/test/test.html*对此进行了测试，而且我只能从我的 WAN IP 而不是我的手机访问这个页面。

这也是一个很好的阅读， [http://httpd.apache.org/docs/2.2/howto/access.html](http://httpd.apache.org/docs/2.2/howto/access.html)

# dns - DNS 无法解析，意味着 API 在连接到站点时失败

> ID：14195848
> 
> 赞同：-1
> 
> 时间：2013-01-07T12:21:47.933
> 
> 标签：dns

我将我网站的 DNS 详细信息更改为新的名称服务器，但我意识到这些是不正确的（24 小时后）。因此，它们被更改为正确的值。这些站点现在正慢慢开始通过不同的 ISP 解决。

我遇到的问题是一个网站通过 API 使用来自另一个网站的数据，而这现在已经坏了。有没有办法强制它使用正确的细节？例如，将 IP 添加到主机文件是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:24:28.060

它可能会起作用，除非另一端执行反向查找。如果是这种情况，那么假设您可以控制另一台服务器，则需要更改双方的设置。

如果它执行反向查找并且您无法控制第二台服务器，那么您只需要等待公共记录更新即可。

# java - 在 EJB 3.0 中等待一小段时间

> ID：14195852
> 
> 赞同：3
> 
> 时间：2013-01-07T12:22:00.303
> 
> 标签：java, ejb-3.0

我应该在 Web 服务 (EJB 3.0) 中等待一小段时间（一或两秒）。

我发现[了这个](https://stackoverflow.com/questions/8834499/waiting-at-most-x-seconds-for-async-ejbs)关于我的问题的问题，这似乎是 EJB 世界中唯一的合法解决方案，但我仍然找不到如何等待的解决方案。我搜索了很多，但似乎无法使用 EJB 3.0 的工具来实现。

真的吗？或者有解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T14:59:19.753

Waiting 1 or 2 seconds in a thread via `Thread.sleep` is just fine and won't hurt the app server. There's little difference between this and doing actual work for 1 or 2 seconds. If we were talking 1 or 2 minutes, that would be of more concern and would merit investigating better options for coordinating communication simply for the fact there are better things to do with your CPU than wait.

The primary motivation for the restrictions in the EJB specification around Threads are really there to prevent people from starting threads or destroying threads (`start()`, `join()`, `stop()`, `suspend()`, etc.) or changing the thread's state (`setName(String)`, `setContextClassLoader(ClassLoader)`, `setDaemon(boolean)`, `setPriority(int)`, etc.). The key thing to understand is that threads are pooled and reused by the container for efficiency. So anything that would affect the state of the pool (dirtying a thread by changing the thread object itself) or compete with that pool (starting/stopping threads) is a very big no-no. The container will also set state in threads indirectly using `ThreadLocal` objects for things such as providing JNDI, Transaction, Security and connection management. This makes starting/stopping your own threads a doubly big no-no.

Sleeping in a thread is simply a waste of your own servers time and resources. Not horrible in very small quantities -- it's your time to waste. Longer times would be of concern.

I would, however, say **never** call `Thread.sleep()` in a **transaction**. Holding locks and calling `sleep` is a big no-no. So make sure you mark this method as `@TransactionAttribute(NOT_SUPPORTED)` or similar.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T12:31:50.143

我觉得`Thread.sleep(2000)`应该是一个简单的解决方案。为什么你觉得行不通？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:33:32.930

如果您想在 EJB 方法中等待，您可以使用著名`Thread.sleep`的暂停当前执行线程。

**注意：**您不应该`Thread`在 EJB 中进行管理，休眠是一种管理，因此暂停 EJB 不是一种好的做法。

可能你的要求是一种气味，所以它建议你看看你的设计，如果有什么问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:52:09.470

> EJB 不应该（...）创建或管理线程。

在 EJB/Application 容器中生成自己的线程不是首选，尤其是它们由容器管理。一种方法是使用 framework/WorkManager 来执行与线程相关的操作。

> WorkManager 是来自 commonj.work(commonj-twm.jar) 的 API

此外，我认为 EJB 的停止在设计上是不好的，而是您可以通过将功能分为两个操作来控制客户端/服务层的延迟。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T14:24:52.310

Interaction with thread isn't recommended with EJB, it's the responsibility of the container.

As a work-around, you can try creating a timer with `createTimer(duration, info)`, where you can pass serializable object, if you have to maintain state or hold necessary information for further execution. You can split your logic into two parts/methods, the second method will be executed after specific interval when prior exits.

Therefore, after definied interval, timeout method will be invoked & you can carry the execution forward with the serialized object, if its needed.

# sql-server-2008 - Sql Server Profiler 在单行上显示长查询时无响应

> ID：14195854
> 
> 赞同：2
> 
> 时间：2013-01-07T12:22:24.250
> 
> 标签：sql-server-2008, sql-server-profiler

我正在使用 SQL Server 2008 R2。

我使用 NHibernate 作为 DAL，一些映射导致生成的查询很长。

因此，当我尝试在 sql server profiler 中查看已执行的查询时，它变得无响应，并且在等待 10-20 分钟后！！！它将显示查询。

需要说明的是，我的 PC 有 SSD、i5 处理器和 8gb 内存，所以这不是硬件问题。

你们中有人遇到过这个问题吗？有什么办法解决吗？

# media - 无法播放使用 MFT 创建的 MP4 文件

> ID：14195855
> 
> 赞同：0
> 
> 时间：2013-01-07T12:22:25.053
> 
> 标签：media, encode, h.264, ms-media-foundation

我正在尝试使用 msdn[示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ff819476%28v=vs.85%29.aspx)创建 MP4 文件。我使用相同的代码没有变化。我使用的是罗技 H264 相机。代码能够创建文件并保存视频数据，但它没有播放。我在媒体播放器中尝试过vlc 也是如此，但没有成功。

我无法弄清楚这是由于相机还是我在这里遗漏了什么？

# opengl - glDepthRange 是如何工作的？

> ID：14195857
> 
> 赞同：5
> 
> 时间：2013-01-07T12:22:29.523
> 
> 标签：opengl, depth, depth-buffer, depth-testing

我的顶点线是：

```
GLfloat vertices[]=
    {
        0.5f,0.5f,0.5f,                                   
        -0.5f,0.5f,0.5f,
        -0.5f,-0.5f,0.5f,
        0.5f,-0.5f,0.5f,//face 1

        0.5f,-0.5f,-0.5f,
        -0.5f,-0.5f,-0.5f,
        -0.5f,0.5f,-0.5f,
        0.5f,0.5f,-0.5f,//face 2

        0.5f,0.5f,0.5f,
        0.5f,-0.5f,0.5f,
        0.5f,-0.5f,-0.5f,
        0.5f,0.5f,-0.5f,//face 3                

        -0.5f,0.5f,0.5f,
        -0.5f,0.5f,-0.5f,
        -0.5f,-0.5f,-0.5f,
        -0.5f,-0.5f,0.5f,//face 4

        0.5f,0.5f,0.5f,
        0.5f,0.5f,-0.5f,
        -0.5f,0.5f,-0.5f,
        -0.5f,0.5f,0.5f,//face 5

        -0.5f,-0.5f,0.5f,
        -0.5f,-0.5f,-0.5f,
        0.5f,-0.5f,-0.5f,
        0.5f,-0.5f,0.5f//face 6     

    }; 
```

现在，我正在通过以下方式更改 z 线：

```
for(int i=0;i<24;i++)
    vertices[i*3+2]*=10
glDepthRange(0,10.0); 
```

现在，由于 glDepthRange 调用，我期望 z 线将映射到 -0.5 到 0.5 的范围，并且我可以看到一个合适的立方体，但是当我使用扭曲的几何图形在上面评论 glDepthRange 调用时，它会给出 o/p。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T12:25:40.710

让我引用你的手册页：

> 剪裁除以 w 后，深度坐标的范围为 -1 到 1，分别对应近剪裁平面和远剪裁平面。glDepthRange 指定此范围内的归一化深度坐标到窗口深度坐标的线性映射。无论实际的深度缓冲区实现如何，窗口坐标深度值都被视为范围**从 0 到 1**（如颜色分量）。因此，**glDepthRange 接受的值在被接受之前都被限制在这个范围内**。

*突出我的*

换句话说，你*不能*真正使用大于 1 的深度值；相反，您必须自己正确计算它们。它基本上总结为在您的投影矩阵中设置适当`near`的值并在您的模型视图矩阵中*转换*Z 坐标，以便所有最终 Z 都在上述之间。`far`

 *如果您需要更详细的解释，请发表评论。*

# android - 在新的 Google Maps Android API v2 上捕获双击事件

> ID：14195858
> 
> 赞同：0
> 
> 时间：2013-01-07T12:22:31.497
> 
> 标签：android, android-mapview

我有一个带有 ViewSwitcher 的应用程序，它有一个 MapView (v1) 和另一个 View，并且使用 GestureDetector 我可以检测到双击并在两个视图之间切换。

现在我正在尝试将应用程序切换到新的[Google Maps Android API V2](http://developer.android.com/google/play-services/maps.html)，我遇到的问题是 MapView 上设置的 GestureDetector 不再对双击做出反应，而是地图正在放大。有谁知道如何改变它行为？

我正在使用原始`MapView`类，而不是 Map 片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:35:40.640

好的，我现在找到了方法。我必须创建一个子类`MapView`（实际上是 a `ViewGroup`）并`interceptTouchEvent()`在那里实现以检测和捕获双击。

此处详细解释了这是如何实现的：[Double Tap -> Zoom on Android MapView?](https://stackoverflow.com/questions/2691235/double-tap-zoom-on-android-mapview/12646465#12646465)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:28:53.817

据我所知（并根据：http: [//developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html)），您可以设置为`GoogleMap`对象（也可以设置为`MapView`）单击和长按监听器。所以我认为你不能设置双击监听器。

但是你可以试试这个：

```
GoogleMap map=mapView.getMap();
map.getUiSettings().setZoomGesturesEnabled(false); 
```

也许它会对您的 GestureDetector 做出反应。

# css - CompassSusy 嵌套网格未提供正确的列宽/边距

> ID：14195859
> 
> 赞同：0
> 
> 时间：2013-01-07T12:22:33.953
> 
> 标签：css, width, sass, compass-sass, susy-compass

我有一个带有 susy 的主网格设置，然后在`footer`元素中我使用 Susy 的`with-grid-settings()`mixin 生成一个稍微不同的网格，如下所示：

```
footer
  +span-columns(5 omega, 5)
  +with-grid-settings(5, 174px ,20px ,0)
    +container
    @if $dev-mode-footer == true
      +susy-grid-background
    height: 240px 
```

所以`footer`应该跨越所有 5 个主要列，并包含一个宽度略有不同的新网格，并使用`container`mixin 来应用它。

所以，然后在里面`footer`我有一些`ul`设置为每个跨越 1 列的 's，但剩下的边距实际上翻了一番。

这是CSS：

```
footer
  .banner
    +span-columns(5 omega, 5)
    height: 187
    border-top: 3px solid $highlight-1
    border-bottom: 3px solid $highlight-1
    padding: 10px 0

    ul
      +pie-clearfix

    li
      +span-columns(1, 5)
      border-right: 1px dotted $highlight-2
      padding-left: 35px 
```

和结果图片：

![Susy 和错误的宽度](../Images/8457eb31366350ca538760ae7ce21f2a.png)

似乎它与错误的网格上下文对齐。这与两个网格具有相同数量的列或其他东西有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:14:22.630

事情不是这样运作的，抱歉。这确实是一个概念问题。Susy 帮你设计成一个网格，但网格本身*并不存在于任何地方*。除了适当的最大宽度外，应用`container`不会建立任何东西。该容器对其内部的网格一无所知。`with-grid-settings`同样无法影响自身之外的任何事物。新网格上的任何项目都必须在`with-grid-settings`mixin 中传递。

# 这是您实际在做的事情：

首先，`+span-columns(5 omega, 5)`没有做任何有用的事情。您刚刚将一个项目浮动到右侧，并应用了 100% 的宽度。但是块元素默认跨越它们的完整上下文，所以没有真正的变化——只是额外的代码。您可能想要的一个效果是清除浮动，但您应该使用`clearfix`它来代替。

然后，在同一个元素上，`container`只需设置一个新`max-width`的和自动边距。也就是说，实际上，所有容器都是 - 在这种情况下您不需要它。新的嵌套网格不需要新的容器。你只需要`with-grid-settings`.

# 这是我对你真正想要的猜测：

```
footer
  +clearfix
  +with-grid-settings(5, 174px ,20px ,0)
    @if $dev-mode-footer == true
      +susy-grid-background
    height: 240px
    .banner
      +clearfix
      height: 187
      border-top: 3px solid $highlight-1
      border-bottom: 3px solid $highlight-1
      padding: 10px 0

      ul
        +pie-clearfix

      li
        +span-columns(1, 5)
        border-right: 1px dotted $highlight-2
        padding-left: 35px 
```

您可能还需要`nth-omega(5n)`在 li 上使用。

# javascript - 从动态行获取下拉值和文本到两个文本字段

> ID：14195860
> 
> 赞同：0
> 
> 时间：2013-01-07T12:22:38.893
> 
> 标签：javascript

如果我想获取下拉列表的值和文本，并将其放在两个文本字段中。我只能获取值，但不能获取下拉文本。例如，单击添加行并单击下拉列表后，值和下拉文本出现在两个文本字段中。这是代码

```
<HTML>
    <HEAD>
    <TITLE> Add/Remove dynamic rows in HTML table </TITLE>
    <SCRIPT language="javascript">
    function addRow(tableID) {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);
        var colCount = table.rows[0].cells.length;
        for(var i=0; i<colCount; i++) {
            var newcell = row.insertCell(i);
            newcell.innerHTML = table.rows[0].cells[i].innerHTML;
            //alert(newcell.childNodes);
            switch(newcell.childNodes[0].type) {
            case "text":
            newcell.childNodes[0].value = "";
            newcell.childNodes[0].id = "txt"+rowCount;
            break;
            case "checkbox":
            newcell.childNodes[0].checked = false;
            break;
            case "select-one":
            newcell.childNodes[0].selectedIndex = 0;
            break;
            }
        }
    }
    function deleteRow(tableID) {
        try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;
            for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
            if(rowCount <= 1) {
            alert("Cannot delete all the rows.");
            break;
            }
            table.deleteRow(i);
            rowCount--;
            i--;
            }
            }
        }catch(e) {
        alert(e);
        }
    }
    function addVal(obj,ob){
        var suf = ob.parentNode.parentNode.rowIndex;
        var txt = document.getElementById('txt'+suf);
        txt.value = obj;
    }
    </SCRIPT>
    </HEAD>

    <BODY>
    <INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />
    <INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />
    <TABLE id="dataTable" width="350px" border="1">
      <TR>
        <TD><INPUT type="checkbox" name="chk"/></TD>
        <TD><INPUT type="text" id="txt0" name="txt"/></TD>
        <TD><INPUT type="text" id="txtt0" name="txtt"/></TD>
        <TD>
          <SELECT name="country" onchange="addVal(this.options[this.selectedIndex].innerHTML,this)">
            <OPTION value="in">India</OPTION>
            <OPTION value="de">Germany</OPTION>
            <OPTION value="fr">France</OPTION>
            <OPTION value="us">United States</OPTION>
            <OPTION value="ch">Switzerland</OPTION>
          </SELECT>
        </TD>
      </TR>
    </TABLE>
    </BODY>
    </HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:45:53.693

**[演示](http://jsfiddle.net/JATry/1/)**

将您更改`<select>`为：

```
<SELECT name="country" onchange="addVal(this)"> 
```

将您的 addRow 函数更改为：

```
 function addRow(tableID) {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);
        var colCount = table.rows[0].cells.length;
        for(var i=0; i<colCount; i++) {
            var newcell = row.insertCell(i);
            newcell.innerHTML = table.rows[0].cells[i].innerHTML;

            switch(newcell.childNodes[0].type) {
            case "text":
            newcell.childNodes[0].value = "";
            if(i == 1)
            {
             newcell.childNodes[0].id = "txt"+rowCount;
            }
            else if(i==2)
            {
             newcell.childNodes[0].id = "txtt"+rowCount;
            }
            break;
            case "checkbox":
            newcell.childNodes[0].checked = false;
            break;
            case "select-one":
            newcell.childNodes[0].selectedIndex = 0;
            break;
            }
        }
    } 
```

将您的 addVal 函数更改为：

```
function addVal(ob){
    var suf = ob.parentNode.parentNode.rowIndex;
    var text = ob.options[ob.selectedIndex].text;
    var value = ob.value;

    document.getElementById("txt" + suf).value = text;
    document.getElementById("txtt" + suf).value = value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:35:59.087

您只是传递所选选项的文本，而不是值。如果您只是传递下拉对象 ob，您可以使用它来获取两个部分：

```
function addVal(ob){
    var suf = ob.parentNode.parentNode.rowIndex;
    var txt = document.getElementById('txt'+suf);
    txt.value = ob.options[ob.selectedIndex].innerHTML;
    var val = document.getElementById('txtt'+suf);
    val.value = ob.options[ob.selectedIndex].value;
}

<SELECT name="country" onchange="addVal(this)"></select> 
```

您还需要整理 addRow() 以便第二个文本框与第一个文本框具有不同的 id，以便您的代码可以区分它们。具有相同 ID 的 2 个元素在技术上是无效的 html（请参阅[http://www.w3schools.com/tags/att_global_id.asp](http://www.w3schools.com/tags/att_global_id.asp)中的定义和用法）

# diazo - 是否可以通过重氮修改 Javascript？

> ID：14195867
> 
> 赞同：1
> 
> 时间：2013-01-07T12:23:08.277
> 
> 标签：diazo

如何使用重氮通过内容的 //div/img/@src 替换主题的 javascript 中的“image.png”？

内容：

```
<div>
    <img src="http://127.0.0.1:8080/plone/example/@@download/image/any.png" width="640" height="360" />
</div> 
```

主题：

```
<script type="text/javascript">
    $.anystretch("image.png", {speed: 150});
</script> 
```

# c#-4.0 - 如何在视图中设置模型参数值

> ID：14195870
> 
> 赞同：0
> 
> 时间：2013-01-07T12:23:18.660
> 
> 标签：c#-4.0, razor, asp.net-mvc-4

```
<div class="forms-box">
   <div class="inputs">
       @Html.HiddenFor(model => model.AddNewComment.CommentParentID)
       @Html.LabelFor(model => model.AddNewComment.CommentText)
       <div class="input-box">
          @Html.TextAreaFor(
               model => model.AddNewComment.CommentText,
                new { @class = "comment-text" })
        </div>
        @Html.ValidationMessageFor(model => model.AddNewComment.CommentText)
   </div> 
```

在代码中：

我从两个中得到一个值

1.  Model.AddNewComment.CommentParentID 或

2.  模型.AddNewComment.CommentText

在我的控制器中。

```
 public ActionResult BlogCommentReply(
         int blogPostId,
         BlogPostModel model, 
         bool captchaValid)
 {

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:40:55.183

解决方案：model.AddNewComment.CommentText 字段是强制性的。所以我只是做了以下事情。

```
 @using (Html.BeginForm())
                        {
                            <div id="div_@Count" style="display: none;">
                                @{CommentParentID = comment.Id;
                                  Model.AddNewComment.CommentParentID = CommentParentID;
                                  Model.AddNewComment.CommentText = comment.CommentText;}
                                <div id="ChildComments">
                                    @Html.HiddenFor(model => model.AddNewComment.CommentParentID)
                                    @Html.Label("Reply Comment")
                                    <div>
                                        @Html.TextAreaFor(model => model.AddNewComment.ChildCommentText)
                                    </div>
                                    @Html.HiddenFor(model => model.AddNewComment.CommentText)
                                </div>
                                <div class="buttons">
                                    <input type="submit" name="reply-comment"  value="@T("Blog.Comments.ReplyButton")" />
                                </div>
                            </div>

                        } 
```

# objective-c - 将 NSString 转换为 int HEX

> ID：14195871
> 
> 赞同：1
> 
> 时间：2013-01-07T12:23:19.933
> 
> 标签：objective-c, ios, c

我正在尝试将 a 转换`NSString`为 int HEX 数组。

例如，如果我有`@"HELLO"`并且我想得到`0x48 0x45 0x4c 0x4c 0x4f`

我已经尝试过字符串的每个字符：

```
unsigned int hexInt;
sscanf([stringParam UTF8String], "%u", &hexInt); 
```

和

```
unsigned int hexInt;
[[NSScanner scannerWithString:stringParam]scanHexInt:&hexInt]; 
```

它们似乎都不起作用。

获得的最佳方法是什么：`unsigned int res[]`从 ASCII `NSString`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:13:22.243

不是真正的答案，但我怀疑原始问题对“十六进制”和“二进制”之间的区别感到困惑。现代计算机内部的所有数据都以“位”（一和零）进行操作。“整数”通常是 32 或 64 个 1/0 加在一起。一个“字符”是 8、16 或 32 个 1/0，具体取决于特定的字符集和上下文。

为了允许人类检查这些电子 1 和 0，它们必须以某种人类可读的形式呈现。最简单的是“二进制”——例如，00001010 二进制的数值为 10（十进制）。由于二进制不是很紧凑，因此发明了“八进制”。在八进制中，00001010 二进制值将是 012。

但大多数计算机“字”都是 8 位的倍数，而八进制不能均匀地表示 8 位的倍数，因此发明了“十六进制”（“hexadecimal”）。在十六进制中，00001010 表示为 0A。

这意味着您唯一将某些内容“转换”为十六进制的时间就是显示它。但相当频繁的新手在这一点上感到困惑，并认为将字符转换为数字内部表示就是“将其转换为十六进制”。

事实上，字符已经*有*一个数字内部表示——只需提取单个字符并（可选）将其“转换”为整数类型（请注意，“转换”不会改变值，只是类型它可以存储在变量中）。

在他的最后一句话中，OP 表示他想要一个值数组`int`。单个 NSString 字符已经是整数，只是`unichar`类型。“转换”为整数只是转换为所需目标类型的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:44:51.957

那么，您想将字符串的字符存储在整数数组中，对吗？

如果您可以使用`unsigned short`（16 位）而不是`unsigned int`（32 位），那真的很容易。

```
NSUInteger length = [stringParam length];
unichar *characters = malloc(sizeof(unichar) * length);
[stringParam getCharacters:characters range:NSMakeRange(0, length)];
// Do whatever you want with the characters, then, once you're done...
free(characters); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-07T12:33:33.940

试试这个功能：

```
- (NSArray *)stringToHex:(NSString *)str
{
    NSUInteger len = [str length];
    unichar *chars = malloc(len * sizeof(unichar));
    [str getCharacters:chars];

    NSMutableArray *hexArray = [NSMutableArray array];

    for(NSUInteger i = 0; i < len; i++ )
    {
        NSString *hexString = [NSString stringWithFormat:@"%02x", chars[i]];
        [hexArray addObject:hexString];
    }
    free(chars);

    return hexArray;
} 
```

# c# - 在 C# 库上使用成员资格

> ID：14195875
> 
> 赞同：1
> 
> 时间：2013-01-07T12:23:23.170
> 
> 标签：c#, login, membership

我目前正在使用由会员提供商管理登录的网站。问题是我还需要使用相同的凭据登录另一个应用程序，这意味着我需要为此使用会员资格。该应用程序是一个 C++ OpenGl 应用程序，它访问与网站相同的 Web 服务。有没有在不使用 asp.net 的情况下访问 c# 中的成员资格，以便登录 OpenGl c++ 应用程序？

# cakephp - 在同一服务器上的不同 Cake 安装中共享模型

> ID：14195876
> 
> 赞同：1
> 
> 时间：2013-01-07T12:23:30.670
> 
> 标签：cakephp, cakephp-2.1

我在同一台服务器上有多个站点，每个站点都有自己的 Cake 安装。我想在这些不同的应用程序之间共享模型。

如何导入和使用应用程序外部的共享模型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:37:15.957

您可以按照文档中的说明使用[App::build](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#App%3a%3abuild)

`App::build(array('Model' => array('/a/full/path/to/models/')));`

# delphi - 如何将聚合字段值作为货币访问？

> ID：14195878
> 
> 赞同：1
> 
> 时间：2013-01-07T12:23:33.400
> 
> 标签：delphi, aggregate, currency, tclientdataset

当我尝试访问**聚合字段**(SU​​M_TOTAL) 的值时，如下行：

```
DM.cdsTOTAL.AsCurrency := DM.cdsItemSUM_TOTAL.AsCurrency; 
```

出现以下错误：

**无法以浮点类型访问字段“SUM_TOTAL”。**

我的临时解决方案是这样的：

```
DM.cdsTOTAL.AsCurrency := StrToCurrDef(DM.cdsItemSUM_TOTAL.AsString, 0); 
```

还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T06:37:24.647

这就是 TAggregateField 设计不足的原因。请参阅 db.pas 中的实现细节以了解它不会覆盖引发上述 AccessError 的基本 TField.GetAs... 系列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:05:59.633

只是在黑暗中拍摄：

```
begin
  If DM.cdsItemSUM_TOTAL.IsNull then
  begin 
    DM.cdsTOTAL.AsCurrency := 0;
  end 
  else
  begin
     DM.cdsTOTAL.AsCurrency := Currency(DM.cdsItemSUM_TOTAL.Value);
  end;
end; 
```

由于该值是浮点数（可能是双精度），我相信它可以转换为货币变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T21:00:42.833

您可以为 TAggregateField 实现类助手，如果需要，可以为 TAggregate

```
type
  TAggregateHelper=Class Helper for TAggregate
  private
    function GetCurrency: Currency;
  published
    Property asCurrency:Currency read GetCurrency;
  End;

  TAggregateFieldHelper=Class Helper for TAggregateField
  private
    function GetCurrency: Currency;
  published
    Property asCurrency:Currency read GetCurrency;
  End;

implementation

{ TAggregateHelper }

function TAggregateHelper.GetCurrency: Currency;
begin
  if not VarIsNull(Value) then
     Result := Value
  else Result := Value;
end;
{ TAggregateFieldHelper }

function TAggregateFieldHelper.GetCurrency: Currency;
begin
  if not VarIsNull(Value) then
     Result := Value
  else Result := Value;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  Showmessage(FloatToStr(CDSTotal.AsCurrency) + '-' + FloatToStr(CDS.Aggregat[0].asCurrency));
end; 
```

# c# - OnClientClick 正在停止回发

> ID：14195881
> 
> 赞同：4
> 
> 时间：2013-01-07T12:23:47.617
> 
> 标签：c#, javascript, asp.net, .net

我有一组 ASP.NET 控件：

```
<asp:LinkButton ID="Find"
    ClientIDMode="Static"
    runat="server"
    CausesValidation="true"
    OnClientClick="$('#Find').attr('disabled', 'disabled'); $('#SearchingLabel').show();">
    <span>Search</span>
</asp:LinkButton>
<asp:Label ID="SearchingLabel"
    ClientIDMode="Static"
    runat="server"
    Text="Searching..."
    style="display: none;" /> 
```

正如您所看到的，我正在使用，`OnClientClick`以便我可以禁用`Find`按钮并显示`SearchingLabel`（**并且 JavaScript 可以正常工作，顺便说一句**）。很基本的东西。

此外，围绕`CausesValidation`属性，我在页面上确实有验证控件，但没有当前的验证错误。

但是，即使我没有`false`从 JavaScript 返回页面**也没有回发**。我什至尝试过，`return true;`但这并没有改变任何东西（*并不那么令人惊讶，但值得一试*）。

我期待您的反馈！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T12:32:42.613

在回发之前，您似乎正在禁用您的按钮。

您可以在没有禁用部分的情况下尝试您的页面/脚本：

```
OnClientClick="$('#SearchingLabel').show();" 
```

如果这可行，请稍等片刻尝试：

```
OnClientClick="setTimeout(function() { $('#Find').attr('disabled', 'disabled'); }, 100); $('#SearchingLabel').show();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:49:41.883

试试这个js代码onload

```
Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(BeginRequest);
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequest);
function BeginRequest(sender, e) {
    e.get_postBackElement().disabled = true;
    // or your code

}
function EndRequest(sender, e) {
   .......
} 
```

# php - 删除 PHP 中的注释行

> ID：14195882
> 
> 赞同：-2
> 
> 时间：2013-01-07T12:24:03.837
> 
> 标签：php

我一直在使用不同的 PHP 脚本做一些工作，并且有一个快速的问题。在其中不少有这样的注释行：

```
/*
  $a = 1; $b = 2; $x = 1;

  $y = $a * $x + $b;

  if ( $y < 5 )
*/ 
```

如果这些行被注释掉，是否可以安全删除？在刚刚注释掉的文件中包含代码有什么意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:26:55.823

> 在刚刚注释掉的文件中包含代码有什么意义？

没有。一些开发人员这样做是为了积压旧代码。这是一种不好的做法，因为应该改用源代码控制（例如 SVN 或 GIT），并且所有历史记录都将与提交消息**一起**保存在那里，为什么它被注释掉/替换了。

它们绝对可以安全删除，但您可能想问开发人员*为什么*将它们注释掉而不是简单地删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:25:25.140

是的，这些线可以安全地移除。但是，您应该小心，代码仍然不相关；它可能由于其他开发人员的原因而留在了那里。

注释通常用作“禁用”一段代码而不完全删除它的工具，因此如果您以后需要代码，您可以简单地取消注释以恢复它。

但是，长期保留注释代码是一种不好的做法（这就是版本控制的用途）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:25:28.883

之前的作者可能在他们的代码中做了一些测试，然后将它们注释掉以备将来测试。可能有很多原因。

是的，如果它们打扰您，删除这些评论是完全安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T12:25:38.483

您是唯一真正知道是否可以安全移除线路的人。

基本上，是的 - 如果您的应用程序按预期工作，请务必删除它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T12:25:59.573

删除上面这样的注释块不会对代码的输出产生影响。

人们经常注释掉代码而不是删除它，如果他们希望稍后再参考它。更好的选择是使用源代码控制，然后您可以回顾之前的代码并了解它被删除的原因和时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T12:26:21.617

删除这些是安全的。实际上，如果您使用的是版本控制系统，那么有这样的评论是没有用的。这种注释通常发生在人们不使用版本控制系统并注释代码以尝试某些事情并希望保留旧代码以防万一时。如果您使用的是版本控制系统，您总是可以取回旧版本的代码，因此请务必删除这些注释。如果你没有使用版本控制系统，你真的应该。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-07T12:26:22.693

在你知道为什么代码注释之前不要触摸。询问开发此代码的开发人员或查看代码并首先了解您是否需要这些行。

# python - python 元组和列表。拒绝转换的元组

> ID：14195885
> 
> 赞同：5
> 
> 时间：2013-01-07T12:24:07.937
> 
> 标签：python, list, python-2.7, tuples, iterable-unpacking

我需要知道为什么会失败：

```
class ConfigurationError(Exception):
    def __init__(self, *args):
        super(ConfigurationError, self).__init__(self, args)

        self.args = list(args)
        # Do some formatting on the message string stored in self.args[0]
        self.args[0]=self.__prettyfi(self.args[0])

    def __prettyfi(self, arg):
        pass
        # Actual function splits message at word
        # boundaries at pos rfind(arg[1:78]) if len(arg) >78
        # it does this by converting a whitespace char to a \n 
```

当我运行代码时，我收到以下消息： `<snip> ConfigurationError.py", line 7, in __init__ self.args[0]=self.__prettyfi(self.args[0]) TypeError: 'tuple' object does not support item assignment`

我编辑了行号。以匹配此代码示例。

我不明白为什么`self.args = list(args)`没有正确地将元组解包到第 5 行的列表中。

（我有一个偷偷摸摸的怀疑我没有记住一些超级基本的东西......）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T12:25:30.803

`Exception.args`是一个[描述符](http://docs.python.org/2/reference/datamodel.html#implementing-descriptors)；它[`__set__`](http://docs.python.org/2/reference/datamodel.html#object.__set__)可以将您分配的*任何内容*`self.args`转换为元组。

因此，一旦将列表分配给`self.args`，描述符就会将其转换回元组。不是你的`list()`电话失败，只是`Exception.args`很特别。

`BaseException.args`被记录为一个元组，在 Python 2 中，异常对象支持切片：

```
>>> ex = Exception(1, 2)
>>> ex.args
(1, 2)
>>> ex[0]
1 
```

异常也应该是不可变的；将`.args`属性保留为元组有助于使它们保持不变。此外，`__str__`异常处理程序期望`.args`是一个元组，并且将其设置为其他东西[在过去导致了奇怪的错误](http://bugs.python.org/issue610610)。

# windows - wglMakeCurrent() 是否在工作线程中泄漏内存？

> ID：14195887
> 
> 赞同：3
> 
> 时间：2013-01-07T12:24:11.133
> 
> 标签：windows, opengl

我一直在 MS Windows 下使用 OpenGL 编写服务器端离屏渲染。工作流程包括以下步骤：

1.  客户端发送体绘制请求。

2.  服务器接收到请求，派生一个工作线程以使用请求中包含的参数进行一些光线投射。

3.  服务器检索渲染图像，将其发送到客户端并终止工作线程。

一开始它工作得很好。但是，在 10,000 个请求之后，wglMakeCurrent() 将失败并且可以检测到显着的内存泄漏。所以我做了一个简化的测试程序，它只包含 OpenGL 上下文的创建和删除。如下图所示。wglMakeCurrent() 在大约 10,000 次循环后总是失败。有人可以告诉我代码是否有问题吗？我使用的是 Nvidia Quadro GPU，驱动版本是 307.45，操作系统是 Windows 7 64 位。

```
 #include <cstdio>
 #include <windows.h>
 #include <tchar.h>
 #include <process.h>

 LRESULT CALLBACK WndProc_GL(HWND handle, UINT message, WPARAM w_param, LPARAM l_param)
 {
   return DefWindowProc(handle, message, w_param, l_param);
 }//-------------------------------------------------------

 unsigned int __stdcall OpenglThreadProc(void *ptr_input)
 {
   HINSTANCE inst_handle = GetModuleHandle(NULL);
   WNDCLASS wnd_class = {CS_HREDRAW | CS_VREDRAW | CS_OWNDC,
    (WNDPROC)WndProc_GL,
    0, 0, inst_handle, NULL, NULL, NULL, NULL,
    _T("OpenGL Hidden Window Class")
   };
   if (!RegisterClass(&wnd_class)) return 0;
   HWND window_handle = CreateWindow(_T("OpenGL Hidden Window Class"),
     _T("Window For OpenGL"),
     WS_OVERLAPPEDWINDOW|WS_CLIPSIBLINGS|WS_CLIPCHILDRE N, 0, 0, 256, 256,
     NULL, NULL, inst_handle, NULL);
   if (!window_handle) return 0;
   HDC dc_handle = GetDC(window_handle);
   PIXELFORMATDESCRIPTOR ogl_pfd = {sizeof(PIXELFORMATDESCRIPTOR), 1,
     PFD_SUPPORT_OPENGL,
     PFD_TYPE_RGBA, 32,
     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
     24, 8, 0, 
     PFD_MAIN_PLANE, 
     0, 0, 0, 0
   };
   int pixel_format = ChoosePixelFormat(dc_handle, &ogl_pfd);
   if (!SetPixelFormat(dc_handle, pixel_format, &ogl_pfd)) return 0;
   HGLRC rc_handle = wglCreateContext(dc_handle);
   if (!rc_handle || !wglMakeCurrent(dc_handle, rc_handle)) return 0;

   _tprintf_s(_T("Executing Thread %d.\n"), *(reinterpret_cast<int*>(ptr_input)) + 1);

   // Deletes OpenGL context and destroys window.
   wglMakeCurrent(NULL, NULL);
   wglDeleteContext(rc_handle);
   ReleaseDC(window_handle, dc_handle);
   DestroyWindow(window_handle);
   UnregisterClass(_T("OpenGL Hidden Window Class"), GetModuleHandle(NULL));
   return 1;
 }//--------

 int main (const int argc, TCHAR *argv[])
 {
   int i = 0; 
   for (; i < 20000; i++) {
     HANDLE running_thread = reinterpret_cast<HANDLE>(_beginthreadex(NULL, 0,
       OpenglThreadProc, &i, 0, NULL));
     WaitForSingleObject(running_thread, INFINITE);
     CloseHandle(running_thread);
   }
   return 1;
}//--------- 
```

我发现这个测试程序有些令人困惑。wglMakeCurrent() 每次被调用时都会创建一个 Windows 用户对象，但是这个对象并没有在 wglDeleteContext() 中释放。即使在worker终止后它仍然存在，导致内存泄漏。在 Windows 下存在每个进程的用户对象限制，因此程序最终会失败。

当上下文创建/删除的代码移动到主线程时，wglMakeCurrent() 在第一次调用后不会创建新的用户对象。所以看起来 wglMakeCurrent() 只在新线程中创建新的用户对象。但是由于 OpenGL 上下文被显式删除并且线程被终止，与该上下文相关的资源也应该被释放。我不确定这是我的代码或驱动程序的问题。有人可以帮我吗？

# svn - 将 SVN 添加到现有的 XAMPP 安装

> ID：14195888
> 
> 赞同：1
> 
> 时间：2013-01-07T12:24:11.837
> 
> 标签：svn, xampp

我使用旧[指南](http://serk01.wordpress.com/2008/09/21/how-to-create-your-own-home-svn-repository-with-xamppapache/)（从 2008 年开始）尝试将 SVN 模块安装到 XAMPP 附带的现有 apache 服务器中。当我尝试启动 apache 时，它​​给出了一个错误，它无法加载 dav_svn 模块，因为找不到该过程。

我的猜测是最新版本的 SVN 与 XAMPP 附带的 apache 版本不兼容。有没有人有指导让它正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:36:09.957

您必须升级**XAMPP 附带的 Apache 版本，**否则您必须使用较低版本的 SVN，即您必须使用在 XAMPP 的 Apache 版本发布时发布的 svn 版本。

尽管您可以使用，但这将彻底解决您的问题

1.  [http://www.codeproject.com/Articles/18106/Subversion-TortoiseSVN-Installed-and-started-on-Wi](http://www.codeproject.com/Articles/18106/Subversion-TortoiseSVN-Installed-and-started-on-Wi)
2.  [http://svn-ref.assembla.com/subversion-server-guide-windows.html](http://svn-ref.assembla.com/subversion-server-guide-windows.html)

# php - Zend SOAP 服务器 WSDL URI 和 http 认证

> ID：14195890
> 
> 赞同：2
> 
> 时间：2013-01-07T12:24:14.097
> 
> 标签：php, zend-framework, soap

我正在尝试使用 Zend_Soap_Server 设置 SOAP 服务。(ZF1)
我的问题是 WSDL URI 受密码保护。可以通过将 'https://username:password@wsdl.uri' 设置为 URI 来访问它，但是对于应用程序的开发和实时版本，用户名和密码是不同的。
我试过设置登录名和密码，`$soapServer->setOptions(array('login'=>$login, 'password'=>$password));`但没有任何反应。
我怎样才能做到这一点？（如果它是可能的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T11:22:05.990

的[文档](http://php.net/manual/en/class.soapclient.php)`SoapClient`没有提到用户名和密码身份验证（htpasswd），所以我认为这种类型的身份验证是不可能的。

# java - SmartGWT 和 Selenium：如何对 SmartGWT 的 DynamicForm 元素进行硒测试？

> ID：14195892
> 
> 赞同：0
> 
> 时间：2013-01-07T12:24:24.677
> 
> 标签：java, gwt, selenium, smartgwt

我是 Selenium 以及 GWT 和 SmartGWT 组件的新手。

我无法找到测试 SmartGWT 的 DynamicForms 组件（如 TextItem、SelectItem 等）的方法。这些组件是复合组件，没有设置标识符属性的方法。

请指导我如何使用 Selenium 测试 DynamicForm。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:31:35.680

SmartGWT 为 Selenium 提供了广泛的内置支持。在这里阅读：

[http://www.smartclient.com/smartgwtee-latest/javadoc/com/smartgwt/client/docs/UsingSelenium.html](http://www.smartclient.com/smartgwtee-latest/javadoc/com/smartgwt/client/docs/UsingSelenium.html)

不要尝试设置自己的 DOM 标识符。这是不必要的，而且是错误的方法。

# c# - ReaderWriterLockSlim - 不明确的异常信息

> ID：14195894
> 
> 赞同：3
> 
> 时间：2013-01-07T12:24:32.537
> 
> 标签：c#, locking

我的 C# 服务中出现以下异常：

在持有读锁的情况下可能无法获取写锁。这种模式很容易出现死锁。请确保在获取写锁之前释放读锁。如果需要升级，请使用升级锁代替读锁。

```
 Stack trace:    at System.Threading.ReaderWriterLockSlim.TryEnterWriteLockCore(Int32 millisecondsTimeout)
   at System.Threading.ReaderWriterLockSlim.TryEnterWriteLock(Int32 millisecondsTimeout)
   at System.Threading.ReaderWriterLockSlim.EnterWriteLock() 
```

我试图理解这意味着什么。我相信这意味着我的应用程序中的一个线程已经获得了一个对象的读锁，而同一个线程现在正试图获得同一个对象的写锁。这个对吗？

# c# - 对象 A 具有对象 B 的集合。在使用 LINQ 的 NHibernate 中，如何检索具有至少一个 B 的 A 列表

> ID：14195896
> 
> 赞同：-2
> 
> 时间：2013-01-07T12:24:37.883
> 
> 标签：c#, .net, nhibernate, .net-4.5, nhibernate-3

让我们以这些域对象为例：

```
public class A 
{
    public Guid Id { get; set; }
    public ICollection<B> CollectionOfB { get; set; }
}

public class B 
{
    public Guid Id { get; set; }
    public string Name { get; set; }
} 
```

**我需要使用 NHibernate 3.x检索具有这些名称的任何`A`对象`B``name1``name2`**。

例如，假设您`B`从名称数组中获取要检索的字符串作为字符串`string[] names = new string[] { "name1", "name2" }`。

我想过`.Query<A>().Where(someA => some.CollectionOfB.Any(someB => names.Contains(someB.Name)))`，~~我怀疑这会被 NHibernate LINQ 提供程序编译为 SQL 查询。~~也许这会被编译成一个不是很优化的 SQL 查询。

**使用 NHibernate 3.x LINQ 提供程序**构建此查询的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:03:54.247

你想到的查询：

```
var someAs = session.Query<A>().Where(someA => some.CollectionOfB.Any(someB => names.Contains(someB.Name))); 
```

工作正常，我在类似的结构上对其进行了测试。NHibernate 发出一个包含 IN 子句的相关子查询。

[编辑]关于您的评论，从代码中可以清楚查询的意图的意义上说，这是最佳的。必须测量性能，并且数据库引擎使用查询优化器，该优化器通常可以将丑陋的查询转换为非常有效的查询，因此，像许多事情一样，您无法判断查询的外观。

我将示例查询更改为使用内部联接并获得了更好的执行计划（它消除了排序操作）。如果我使用 LINQ 查询语法重新编写查询，它会使用更好的执行计划，但查询不包含内部联接；相反，它在 where 子句中使用旧式连接。

```
var someAs = (from someA in session.Query<A>()
              join someB in session.Query<B>() on someA.Id equals someB.A_Id
              where names.Contains(someB.Name)
              select someA).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:32:59.310

如果您扩展 B 类以引用 A：

```
public class B 
{
    public A A {get;set;}
    public Guid Id { get; set; }
    public string Name { get; set; }
} 
```

然后像这样做子查询：

```
var aObjectsToRetrieve = Query<B>().Where(x=>x.Name.StartsWith("name1")).Select(x=>x.A.Id); 
```

然后在 A 的查询中应用 Exists() 以获取您需要的 A 对象。如果您有一组名称，您可以尝试这样的事情（或根据您的情况使用连词）：

```
 var disjunction = new Disjunction();
  var names = new[] {"name1", "name2"};
  foreach (string name in names)
            disjunction.Add(Restrictions.InsensitiveLike(PropName<User>(x => x.Name), name)); 
```

# java - Apache Camel：实际路由的是什么？

> ID：14195898
> 
> 赞同：8
> 
> 时间：2013-01-07T12:24:57.810
> 
> 标签：java, apache-camel

Apache Camel 路线中的“促销单位”或流程是什么？意思是，实际被路由的对象是什么？一个`Message`？一个`Exchange`？

我问是因为我*认为*a`Route`由 1+个`Processor`端点组成，并且 a `Exchange`（包含 a `Message`）实际上是跨所有端点路由的。

但它似乎`Exchange`可以同时具有 inbound 和 outbound `Message`，这表明消息可以*通过*交换（而不是通过处理器/端点移动的交换）。有人可以帮助澄清为什么交换有入站和出站消息，以及实际传递到每个处理器/端点的路由是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T13:37:59.257

交换只是单个路由中消息的包装对象。

交换中的输入和输出消息用于处理不同的交换模式 (MEP)。

通常，这用于返回答案的处理器/端点（即请求/响应模式），在 Camel 中它被命名为 InOut。然后处理器/组件将从参数中读取请求并在`In`参数中设置响应`Out`。在路线的下一步中，Out 将变为 In。

如果您想在某处放置消息而不担心响应，则可以使用`ExchangePattern.InOnly`.

即使您在处理器中并且想要转换消息，您也可以对 In 消息进行操作，它将被复制到 Out。

这也在《骆驼行动》第 1 章中有所描述。

路由正在传递消息，而 Exchange 是一个访问对象，用于传递消息并访问一些全局元数据。

# grails - grails database-migration - 即使没有域模型更改，也会生成更改日志

> ID：14195900
> 
> 赞同：0
> 
> 时间：2013-01-07T12:25:00.370
> 
> 标签：grails, database-migration

我们希望使用数据库迁移工具通过我们的 Jenkins(Hudson) 构建服务器在我们的 UAT 和实时系统中实现 DB 模式更改。

最简单的方法是每次运行“-Dgrails.env=uat dbm-gorm-diff changelog-.xml --add”。但是，我的试验表明，即使在域模型中没有更改时，总是会创建一个“空”的变更日志并更新 changelog-master.xml。这并不理想。

是否有一个我没有找到的选项，上面写着：“仅在域模型更改时才创建更改日志”？

否则，看起来好像我必须在 Ant 构建脚本中添加步骤以在 changelog-.xml 文件中查找条目，如果未找到：删除该文件并从备份中恢复主变更日志，或对其进行编辑删除最新的“包含”条目。

如果有人有其他好的想法，他们将非常受欢迎。

问候，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:23:34.440

避免 ：

grails.plugin.databasemigration.MigrationUtils.dataSourceNameWithSuffix() 适用于参数类型：(null) 值：[null] at

您不必通过更改项目名称等来完成所有这些事情。您只需要清除

"path_to_user_dir"/.grails/projects/"project_name"/scriptCache 目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:08:52.100

安装 1.3.2 似乎在删除插件时未删除的某处添加了一些东西。对不起，不是一个非常科学的描述，但它就是这样出现的。

我现在回到 1.2.2，但无论我运行什么 dbm-* 脚本，我都会收到相同的错误：

=======================

错误 执行脚本时出错 DbmGenerateGormChangelog：groovy.lang.MissingMethodException：没有方法签名：静态 grails.plugin.databasemigration.MigrationUtils.dataSourceNameWithSuffix() 适用于参数类型：(null) 值：[null]（注意：堆栈跟踪已在_DatabaseMigrationCommon_groovy$_run_closure1.doCall(_DatabaseMigrationCommon_groovy:37) 在 DbmGenerateGormChangelog$_run_closure1.doCall(DbmGenerateGormChangelog:23) 错误执行脚本 DbmGenerateGormChangelog 时出错：groovy.lang.MissingMethodException：没有方法签名：静态 grails.plugin.databasemigration。MigrationUtils.dataSourceNameWithSuffix() 适用于参数类型：(null) 值：[null]

===============

我删除了 1.3.2，重述了 GGTS，然后安装了早期版本，甚至回到 1.2.1，然后返回到 1.2.2，但没有任何变化。看起来我可能不得不尝试使用新的工作区，看看我是否可以让 1.2.2 再次工作。Rgds，约翰

# wpf - 从另一个窗口更新 WPF 中的 DataGrid

> ID：14195901
> 
> 赞同：4
> 
> 时间：2013-01-07T12:25:08.010
> 
> 标签：wpf, data-binding, wpfdatagrid

我在名为 MainWindow 的窗口上有一个 DataGrid 控件。在 MainWindow 中，我在单击按钮时使用以下代码打开另一个名为 NewCustomerWindow 的窗口。

```
NewCustomerWindow newCustomerWindow = new NewCustomerWindow();
newCustomerWindow.ShowDialog(); 
```

在 NewCustomerWindow 中，我有一个带有文本框的表单，有人可以在其中输入有关客户的信息，然后将这些信息保存到数据库中。保存这些信息后，我想更新 MainWindow 中的 DataGrid，所以我使用以下代码

```
var mainWindow = Application.Current.Windows
                .OfType<MainWindow>()
                .FirstOrDefault(window => window is MainWindow);

mainWindow.customersGrid.Items.Add(new 
            {
                CustomerID = txtCustomerID.Text,
                CompanyName = txtCompanyName.Text,
                ContactName = txtContactName.Text,
                ContactTitle = txtContactTitle.Text,
                Address = txtAddress.Text,
                City = txtCity.Text,
                Region = txtRegion.Text,
                PostalCode = txtPostalCode.Text,
                Country = txtCountry.Text,
                Phone = txtPhone.Text,
                Fax = txtFax.Text
            }); 
```

上面的代码返回以下错误：**“使用 ItemsSource 时操作无效。请改用 ItemsControl.ItemsSource 访问和修改元素。”**

customersGrid 是 MainWindow 中 DataGrid 的名称，其结构如下。

```
<DataGrid AutoGenerateColumns="False" HorizontalAlignment="Stretch" Margin="8,29,8,8" Name="customersGrid" VerticalAlignment="Stretch" Loaded="customersGrid_Loaded">
        <DataGrid.Columns>
            <DataGridTextColumn Width="Auto" Binding="{Binding CustomerID}" Header="Κωδικός Πελάτη"/>
            <DataGridTextColumn Width="Auto" Binding="{Binding CompanyName}" Header="Όνομα Εταιρίας"/>
            <DataGridTextColumn Width="Auto" Binding="{Binding ContactName}" Header="Όνομα Επαφής"/>
            <DataGridTextColumn Width="Auto" Binding="{Binding ContactTitle}" Header="Τίτλος Επαφής"/>
            <DataGridTextColumn Width="Auto" Binding="{Binding Address}" Header="Διεύθυνση"/>
            <DataGridTextColumn Width="Auto" Binding="{Binding City}" Header="Πόλη"/>
            <DataGridTextColumn Width="Auto" Binding="{Binding Region}" Header="Περιοχή"/>
            <DataGridTextColumn Width="Auto" Binding="{Binding PostalCode}" Header="Ταχυδρομικός Κώδικας"/>
            <DataGridTextColumn Width="Auto" Binding="{Binding Country}" Header="Χώρα"/>
            <DataGridTextColumn Width="Auto" Binding="{Binding Phone}" Header="Τηλέφωνο"/>
            <DataGridTextColumn Width="Auto" Binding="{Binding Fax}" Header="Fax"/>
        </DataGrid.Columns>
    </DataGrid> 
```

我想一个解决方案是使用所有数据再次设置 DataGrid 的 ItemsSource 属性，但这不是一个好的选择，因为客户数据来自带来大量记录的 wcf 服务。那么，有什么好的方法可以解决这个问题呢？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:18:15.640

您设置您的`MainWindow.DataContext = MainViewModel.Instance` （您选择是否创建单例）

你的 MainViewModel 类应该有一个 observableCollection 依赖属性让我们称之为客户。您将 DataGrid 绑定到客户

```
<DataGrid ItemsSource="{Binding Customers}" /> 
```

因此，当您想要更新数据网格时，您只需更新客户（例如从 NewCustomerWindow），数据网格将自动更新

这里有很好的例子：

[A-Practical-Quick-start-Tutorial-on-MVVM-in-WPF](http://www.codeproject.com/Articles/81484/A-Practical-Quick-start-Tutorial-on-MVVM-in-WPF)

[数据网格教程](http://www.wpftutorial.net/DataGrid.html)

# jsf - 从请求参数设置 bean 属性

> ID：14195902
> 
> 赞同：0
> 
> 时间：2013-01-07T12:25:10.637
> 
> 标签：jsf, parameters, request

从请求的参数中设置托管 bean 的属性的正确（最佳）方法是什么？

我的 JSF 页面的 URL 如下所示：

```
https://eample.com/app/faces/page.xhtml?ts=2012-01-05T10:00:00.000 
```

我发现我可以使用以下方法读取参数：

```
<h:outputText value="#{param['ts']}" /> 
```

但我真正需要做的是从这个值设置我的 bean 的属性。那么最好的JSF方式是什么，所以我得到了一些结果Java代码如下：

```
myBean.setTimestamp(request.getParameter("timestamp")); 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:35:47.670

假设一个具有请求范围的 JSF 托管 bean，将其作为托管属性注入：

```
import javax.faces.bean.*;

@ManagedBean @RequestScoped
public class ReqBean {
    @ManagedProperty("#{param.ts}") private String ts;

    public String getTs() {
        return ts;
    }

    public void setTs(String ts) {
        this.ts = ts;
    }
} 
```

如果 bean 在更广泛的范围内，您将需要以编程方式查找它：

```
private String lookUpTs() {
    return FacesContext.getCurrentInstance()
                       .getExternalContext()
                       .getRequestParameterMap()
                       .get("ts");
} 
```

如果您使用的是 CDI bean，则需要考虑其他选项（请参阅[此处](http://illegalargumentexception.blogspot.co.uk/2012/07/jsf-cdi-and-el.html)了解一种方法。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:47:22.563

根据您的问题历史，您正在使用 JSF2，所以[`<f:viewParam>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/viewParam.html)应该这样做。

```
<f:metadata>
    <f:viewParam name="ts" value="#{myBean.timestamp}" />
</f:metadata> 
```

而已。

从（like等）`<f:viewParam>`扩展而来，您甚至可以使用例如和对其执行转换和验证。`UIInput``<h:inputText>``<f:convertDateTime>``required="true"`

```
<f:metadata>
    <f:viewParam id="ts" name="ts" value="#{myBean.timestamp}" required="true">
        <f:convertDateTime pattern="yyyy-MM-dd'T'HH:mm:ss.SSS" />
    </f:viewParam>
</f:metadata>
...
<h:message for="ts" /> 
```

这样，它`#{myBean.timestamp}`可以成为一个完全值得的`java.util.Date`财产。任何转换和验证错误最终都将`<h:message>`与`<f:viewParam id>`.

请注意，与 with 不同`@ManagedProperty`，the`#{myBean}`只能是`@ViewScoped`一个。

### 也可以看看：

*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)
*   [ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)

# java - 用Java中的值替换变量

> ID：14195903
> 
> 赞同：1
> 
> 时间：2013-01-07T12:25:14.703
> 
> 标签：java, string, replace

我有一个包含某些变量的字符串，例如`"This is string containing $variable$"`. 我想`$variable$`用一个新字符串替换它。如果我使用 replaceall 方法，就像`str.replaceall("$variable$","new_value")`它没有被替换一样。但如果我给出没有`$`符号，它就是替换。但我的输出是这样的，`$new_value$`. 我需要它没有`$`符号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:30:15.520

String.replaceAll() 将[正则表达式](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)作为参数，其中 $ 具有特殊含义。只需使用 \ 转义美元符号：

```
myString.replaceAll("\\$variable\\$", replacement); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T12:30:52.927

尝试使用[String.replace(CharSequence, CharSequence)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28char,%20char%29)：

```
str.replace("$variable$","new_value"); 
```

因为**String.replaceAll()**需要一个正则表达式作为第一个参数，而正则表达式上的**$**字符代表“在字符串末尾匹配”

# codenameone - 与按钮关联的命令作为默认操作 无

> ID：14195904
> 
> 赞同：1
> 
> 时间：2013-01-07T12:25:15.937
> 
> 标签：codenameone

在资源编辑器中，命令属性中按钮的默认操作是无操作。所以我的按钮动作事件在 clicked 或 selected 上无法正常工作。任何人都知道如何在 codenameone 的资源主题上创建的任何按钮上将动态操作设置为 null 或禁用命令操作属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:41:24.300

我刚刚修好了。只需删除设置命令按钮并添加具有相同 UIID 的新按钮，不要单击任何命令，让它为 null 。

# android - 在活动中的任意位置键入以在 android 中打开编辑文本视图

> ID：14195906
> 
> 赞同：2
> 
> 时间：2013-01-07T12:25:22.850
> 
> 标签：android, android-edittext, android-softkeyboard, keyboard-events

当用户开始在硬件键盘上书写时，我需要该活动将该输入定向到某个编辑文本视图。

我试图通过覆盖关键事件来“硬编码”它，但这是非常低效的。尤其是在支持各种国家和语言时..

例子：

```
case KeyEvent.KEYCODE_A:
case KeyEvent.KEYCODE_B:
case KeyEvent.KEYCODE_C:
etc. 
```

有没有办法在Android中做到这一点简单而干净？作为参考，Google Play 商店具有我正在寻找的相同功能。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:31:53.137

你可以试试这个。

```
@Override   
 public boolean onKeyDown(int keyCode, KeyEvent event){

    final EditText mEditText = (EditText) findViewById(R.id.edit_text);
    if (!mEditText.hasFocus()){ 
        mEditText.requestFocus();
        mEditText.onKeyDown(keyCode, event);
    }
    return super.onKeyDown(keyCode, event);
} 
```

# javascript - 在 Google Chrome 中禁用放大镜、设置壁纸和保存图像的代码？

> ID：14195910
> 
> 赞同：2
> 
> 时间：2013-01-07T12:25:29.387
> 
> 标签：javascript, html, css, google-chrome

我正在构建一个带有自定义按钮（图像）的网络应用程序。谷歌浏览器将鼠标悬停在它们上方时会显示三个图标；放大镜、设置壁纸和保存图像。如果您是 Google Chrome 用户，我相信您已经看过它们。它不仅丑陋且令人分心，而且在这种情况下毫无用处，在我看来，这些额外的操作正在减慢速度。有什么方法可以为我的页面或单个图像禁用此操作？

请注意，这是一个编程问题，而不是关于在 Google Chrome 中设置功能的问题。在我的 Chrome 副本中禁用此功能无法解决此问题。我担心该页面是否适合所有访问者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:32:37.363

它不是默认的 Chrome 功能，而是带有[Chrome 工具箱扩展程序](https://chrome.google.com/webstore/detail/chrome-toolbox-by-google/fjccknnhdnkbanjilpjddjhmkghmachn)。如果人们安装了扩展程序，则可以合理地假设他们想要该功能。

除非他们忘记了他们已经安装了它并且不知道图标来自哪里，但即便如此，我也会将其写为“用户错误”。

# php - 关联数组，对同一键的值求和

> ID：14195916
> 
> 赞同：11
> 
> 时间：2013-01-07T12:25:41.817
> 
> 标签：php, arrays, sum, associative-array

所以我有这个关联数组（用 kint 完成转储）

![用 Kint 完成转储](../Images/4b626acaa79dfe051da787862ef275d2.png) d

而不是让“ `Conference`”键重复 3 次。我只想拥有一次并将 3 个值相加为一个，以便获得类似的结果：

会议：4534

对于所有其他重复的键也是如此。

有没有可以做到这一点的本机功能？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-07T12:50:25.323

你可以试试

```
$data = array(
  0 => array(
    'event' => 'Conference',
    'budget' => 3700,
  ),
  1 => array(
    'event' => 'Conference',
    'budget' => 500,
  ),
  2 => array(
    'event' => 'Showroom',
    'budget' => 1000,
  ),
  3 => array(
    'event' => 'Mission Chez client',
    'budget' => 2000,
  ),
  4 => array(
    'event' => 'Séminaire',
    'budget' => 700,
  ),
  5 => array(
    'event' => 'Livraison',
    'budget' => 4000,
  ),
  6 => array(
    'event' => 'Conference',
    'budget' => 334,
  ),
);

$sum = array_reduce($data, function ($a, $b) {
    isset($a[$b['event']]) ? $a[$b['event']]['budget'] += $b['budget'] : $a[$b['event']] = $b;  
    return $a;
});

print_r(array_values($sum)); 
```

输出

```
Array
(
    [0] => Array
        (
            [event] => Conference
            [budget] => 4534
        )

    [1] => Array
        (
            [event] => Showroom
            [budget] => 1000
        )

    [2] => Array
        (
            [event] => Mission Chez client
            [budget] => 2000
        )

    [3] => Array
        (
            [event] => Séminaire
            [budget] => 700
        )

    [4] => Array
        (
            [event] => Livraison
            [budget] => 4000
        )

) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T12:29:14.107

一个简单的建议：

```
$results = array();
foreach ($budgetByEventTemp as $value)
{
  if( ! isset($results[$value['event']]) )
  {
     $results[$value['event']] = 0;
  }

  $results[$value['event']] += $value['budget'];

}

var_dump($results); 
```

**根据评论**更新****

 **您可以再次运行它们：

```
foreach($results as $key => $value)
{
  $structured_results[] = array('event' => $key, 'budget' => $value);
}

var_dump($structured_results); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T12:34:19.587

```
$sumArray = array();

foreach ($myArray as $k=>$subArray) {
foreach ($subArray as $id=>$value) {
  $sumArray[$id]+=$value;
  }
}

print_r($sumArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T12:34:27.967

此选项将对数组中所有重复索引的值进行分组和求和。

**代码在这里：**

```
$aValues[]=array("nametogroup",10);
$aValues[]=array("nametogroup",20);
$aValues[]=array("nametogroup2",30);
$aValues[]=array("nametogroup2",20);
echo var_dump($aValues); // array before grouping
foreach ($aValues as  $id=>$value) 
{
  $a2sum["{$value[0]}"]=$value[1] + $a2sum["{$value[0]}"];
}
echo var_dump($a2sum); //array after group and adding values 
```

这将导致：

```
array
0 => 
array
  0 => string nametogroup (length=11)
  1 => int 10
1 => 
array
  0 => string nametogroup (length=11)
  1 => int 20
2 => 
array
  0 => string nametogroup2 (length=12)
  1 => int 30
3 => 
array
  0 => string nametogroup2 (length=12)
  1 => int 20

array
nametogroup => int 30
nametogroup2 => int 50 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-13T11:08:33.330

迭代一组数据并返回一组可能更小的数据，`array_reduce()`是一个明智的“功能”选择。这是@Baba 使用空合并运算符和更直观的变量命名约定的答案的细微变化。

代码：（[演示](https://3v4l.org/HS3UC)）

```
var_export(
    array_reduce(
        $data,
        function ($carry, $row) {
            $carry[$row['event']] = ($carry[$row['event']] ?? 0) + $row['budget'];
            return $carry;
        }
    )
); 
```**

# datatable - ORA-39776: 加载表的致命 Direct Path API 错误

> ID：14195918
> 
> 赞同：0
> 
> 时间：2013-01-07T12:25:44.330
> 
> 标签：datatable, oracle11g, odp.net

我正在尝试通过 Oracle ODP.NET（版本 5 (11.2.0.3.20)）使用 OracleBulkCopy 将 .NET 数据库传递到 Oracle：

```
 // Copy table to Oracle
        OracleBulkCopy bulkCopy = new OracleBulkCopy(cmdOra.Connection);
        bulkCopy.DestinationTableName = "INBOUND_JOB_TMP";

        bulkCopy.BatchSize = 10000;
        bulkCopy.BulkCopyTimeout = 300;
        bulkCopy.WriteToServer(dtJobs);

        bulkCopy.Dispose();
        bulkCopy = null; 
```

这些作业是从 SQL Server 数据库中检索的：

```
 SqlDataReader reader;
        cmdSql.CommandTimeout = 120;
        cmdSql.CommandType = CommandType.StoredProcedure;
        cmdSql.CommandText = "DOWNLOAD_JOBS";
        cmdSql.Parameters.Clear();
        reader = cmdSql.ExecuteReader();

        // Retrieve Job records
        dtJobs = new DataTable();
        if (reader.HasRows)
        {
            dtJobs.Load(reader);
        }
        else
            Trace.WriteLine("No rows returned."); 
```

传递的字段之一是签名字段：

```
 SQL Server:

    CREATE TABLE [dbo].[JOBS_DOWNLOAD](
        [UniqueId] [int] IDENTITY(1,1) NOT NULL,
        [MobileJobNo] [varchar](20) NOT NULL,
        [MobileJobStatus] [varchar](1) NULL,
        [TenantSignatureImage] [varbinary](max) NULL,
    PRIMARY KEY CLUSTERED 
    (
        [UniqueId] ASC
    )

    Oracle:

    CREATE TABLE "DBA"."INBOUND_JOB_TMP" 
       ("UNIQUE_ID" NUMBER(20,0), 
        "MOBILE_JOB_NO" VARCHAR2(20) NOT NULL ENABLE, 
        "TENANT_SIGNATURE" BLOB) ; 
```

现在，当我运行此代码将数据行从 Sql Server 复制到 Oracle 时，它​​工作正常。签名图像被复制。

但是，如果签名图像的大小大于 4K 左右，我会收到以下错误消息：

```
 Oracle.DataAccess.Client.OracleException was unhandled by user code
      HResult=-2147467259
      Message=Error in row '1' column '1'
    ORA-39776: fatal Direct Path API error loading table DBA.INBOUND_JOB_TMP 
    ORA-00600: internal error code, arguments: [25029], [2147483647], [], [], [], [], [], [], [], [], [], []
      Source=Oracle Data Provider for .NET
      ErrorCode=-2147467259
      DataSource=""
      Number=-2754
      Procedure=""
      StackTrace:
           at Oracle.DataAccess.Client.OracleBulkCopy.PerformBulkCopy()
           at Oracle.DataAccess.Client.OracleBulkCopy.WriteDataSourceToServer()
           at Oracle.DataAccess.Client.OracleBulkCopy.WriteToServer(DataTable table, DataRowState rowState)
           at Oracle.DataAccess.Client.OracleBulkCopy.WriteToServer(DataTable table)
           at JobDataSync.SyncTables.Jobs.PostJobs() in C:\Development\JobSyncService\JobDataSync\SyncTables\Jobs.cs:line 114
           at JobDataSync.SyncTables.Jobs.Sync() in C:\Development\JobSyncService\JobDataSync\SyncTables\Jobs.cs:line 42
           at JobDataSync.TransactionalDataSync.SyncData() in C:\Development\JobSyncService\JobDataSync\TransactionalDataSync.cs:line 73
           at JobDataSyncConsole.DebugConsole.syncTimer_Elapsed(Object sender, ElapsedEventArgs e) in C:\Development\JobSyncService\JobDataSync\Console\DebugConsole.cs:line 74
           at System.Timers.Timer.MyTimerCallback(Object state)
      InnerException: 
```

如果我回写到 SQL Server 表，则不存在此问题。

有什么想法有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:32:42.240

将数据推送到定义为全局临时表而不是标准数据库表的 Oracle 表时会出现此问题。

引发了 Oracle 支持日志。

# ios - NSTimer 没有按预期重复

> ID：14195921
> 
> 赞同：4
> 
> 时间：2013-01-07T12:25:57.233
> 
> 标签：ios, objective-c, nstimer, repeat

> **可能重复：**
> [NSTimer timerWithTimeInterval：不工作](https://stackoverflow.com/questions/11058571/nstimer-timerwithtimeinterval-not-working)

在我的应用程序中，我有以下设置来使用 NSTimer 运行操作：

在他们中。文件：

```
@implementation MYViewController {
      NSTimer *aTimer;
} 
```

比，当用户单击相关按钮时，我有：

```
- (IBAction)userClick:(id)sender {
     aTimer = [NSTimer timerWithTimeInterval:1.0 
                                      target:self 
                                    selector:@selector(doSomethingWithTimer:) 
                                    userInfo:nil 
                                     repeats:YES]; 
     //[aTimer fire]; //NSTimer was fired just once.
} 
```

我也有：

```
-(void)doSomethingWithTimer:(NSTimer*)timer {
     NSLog(@"something to be done");
} 
```

我希望领事每隔一秒就会有一条线说“要做的事情”。计时器甚至没有被调用一次。我已经尝试使用 [aTimer fire] 触发 NSTimer，但它只会触发一次并且不会像我预期的那样重复。

谁能指导我如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T12:32:41.227

采用

```
- (NSTimer *)scheduledTimerWithTimeInterval:target:selector:userInfo:repeats: 
```

然后您不必手动将其添加到运行循环中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T12:29:47.653

您需要将计时器添加到运行循环：

```
[[NSRunLoop mainRunLoop] addTimer:aTimer forMode:NSDefaultRunLoopMode]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T12:29:42.490

这里的问题是范围。您的`aTimer`变量必须是一个字段，因此一旦您离开该方法，它就不会被 GC处理，`userClick`例如

```
NSTimer *timer;

...

- (IBAction)userClick:(id)sender {
    if (timer != nil && [timer isValid]) {
        [timer invalidate];
        timer = nil;
    }
    timer = [NSTimer scheduledTimerWithTimeInterval:1.0 
                                             target:self 
                                           selector:@selector(doSomethingWithTimer:) 
                                           userInfo:nil 
                                            repeats:YES]; 
} 
```

# iphone - 在正确的 App Store 中提交 App

> ID：14195922
> 
> 赞同：-3
> 
> 时间：2013-01-07T12:25:57.573
> 
> 标签：iphone, ios, app-store, app-store-connect

我已将我的应用程序提交到应用程序商店，但它会进入美国应用程序商店，当我尝试访问它时出现此错误

“您请求的商品目前在英国商店不可用，但在美国商店有售。单击更改商店查看此商品”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:31:17.317

连接到您的 iTunes Connect 帐户。转到“管理您的应用程序”选择您的应用程序，然后选择“权利和定价”并单击“特定商店”。添加您希望您的应用程序所在的国家/地区并保存。

# asp.net - 是否有必要为在 asp.net 中的同一 webproject 中创建的 web 服务添加 web 引用

> ID：14195926
> 
> 赞同：0
> 
> 时间：2013-01-07T12:26:21.223
> 
> 标签：asp.net, web-services, web-project

是否有必要为在 asp.net 中的同一 webproject 中创建的 web 服务添加 web 引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:36:45.087

仅当您想在项目中将其用作 Web 服务时。

由于您的 Web 服务类也是一个常规类，因此您可以直接调用 Web 方法而无需代理。

在这种情况下，您的 Web 服务只会向消费者公开所需的功能。

# java - 是 Thread.sleep(1000); 使用可靠的东西？

> ID：14195929
> 
> 赞同：2
> 
> 时间：2013-01-07T12:26:23.517
> 
> 标签：java

我知道这`Thread.sleep(1000);`可以用来冻结当前线程（在示例中为 1 秒），但是由于您需要抛出一个`Exception`我想知道使用它是否安全。我不想在程序中使用它并意外导致问题。

使用“可以”`Thread.sleep();`还是有更好的方法来达到相同的结果？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-07T12:33:53.950

顺便说一句，如果你想睡觉并且知道你不会使用中断，避免处理 InterruptedExceptions 的一种方便方法是使用 Guava 的 Uninterruptibles，例如

```
Uninterruptibles.sleepUninterruptibly(1000, TimeUnit.MILLISECONDS); 
```

如果以推荐的方式抛出异常（即重置中断状态），这将透明地处理 InterruptedException，并避免难看的 try-catch 块。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T12:28:10.453

> 因为你需要抛出一个异常，所以我想知道使用它是否安全。

[Thread#sleep 仅抛出 2 个异常](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long%29)：

*   `IllegalArgumentException`如果参数为负
*   `InterruptedException`如果线程被中断

=> 如果您传递一个正数并且线程没有被中断，则不会有例外。

除非你`theThread.interrupt()`从另一个线程调用你会没事的。

**编辑**

您似乎想创建一个计时器 - 在这种情况下，您可以通过使用[内置机制](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)让您的生活变得更加简单：

```
Runnable r = new Runnable() {
    public void run() { runYourTaskHere(); }
};
ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
scheduler.scheduleAtFixedRate(r, 0, 1, TimeUnit.SECONDS); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:28:55.883

取决于您要做什么，我见过`Thread.sleep`使用它并且通常用于修复编程错误，因为人们认为它可以解决竞争条件。 `Thread.sleep`必须抛出异常，因为 Java 不控制 CPU（我上次检查过），所以如果 CPU 有错误，或者即使它没有并提前唤醒线程/以某种方式中断它，程序（Java）需要一种方法来终止自身并将消息向上传播到堆栈。此外，这在很大程度上取决于您所说的“相同结果”是什么意思

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T12:29:44.383

这是完全安全的。JVM提供了InterruptedException，以便您可以在需要时处理它（假设您想在该线程被中断时做一些额外的事情）......这实际上并不意味着发生了不好的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T13:17:27.907

由于`thread.sleep`暂停当前线程指定时间（而不是杀死它）。所以使用它是安全的。

# google-places-api - 指定多边形纬度/经度以在 Google Places API 中定义边界

> ID：14195931
> 
> 赞同：1
> 
> 时间：2013-01-07T12:26:30.727
> 
> 标签：google-places-api

作为项目的一部分，我正在开发一个 Web 应用程序，该应用程序需要使用 Google Places API 提取 POI 信息。此外，还需要应用程序根据用户定义的空间层过滤上述提取的 POI。

例如：我有地图信息格式的国家边界层。我需要过滤掉某个国家/地区的 ATM（国家/地区将由用户选择）。

我已经成功地将用户定义的空间数据覆盖到谷歌地图上，但我无法提取与用户选择的国家边界层相交的特征。有没有一种方法可以在调用位置服务时定义一个多边形来构造边界对象？

# c# - Observable.Iterate 在上一个版本中丢失

> ID：14195933
> 
> 赞同：1
> 
> 时间：2013-01-07T12:26:39.840
> 
> 标签：c#, .net, system.reactive

我有一些代码，需要让它与最新的 RX 一起工作。我已经看到建议使用 Create 而不是 Iterate 但我不知道如何使用 Create 可以帮助解决这个问题吗？

```
IEnumerable<IObservable<Object>> sequence = ...;

disposable = Observable.Iterate(sequence)
            .Subscribe(
                next => { },
                exception,
                ()=>completed(_result)); 
```

更新：

评论中有一个指向 social.msdn 的链接，我已经看过这个帖子，但没有找到解决方案。他们只提供了一些建议。不幸的是，我不熟悉 RX。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:19:53.053

```
IEnumerable<IObservable<Object>> sequence;

sequence.ToObservable()
    .Concat()
    .Subscribe(x => /* ... */); 
```

# java - Quartz JobScheduler dataMap 在从另一个类访问时似乎正在丢失数据

> ID：14195934
> 
> 赞同：1
> 
> 时间：2013-01-07T12:26:40.507
> 
> 标签：java, quartz-scheduler, jobs, job-scheduling

我正在尝试使用石英作业调度程序自动发送电子邮件。为此，我使用 jobDataMap 将完成作业所需的数据从初始化 cronTrigger 的类传递到执行作业的类。但是，当我尝试访问应该使用 jobDataMap 传递的数据时，它总是返回 null。任何人都有任何想法可能会出现什么问题？这是我初始化触发器的类中的代码：

```
trigger = new CronTrigger("SendReportEmailsTrigger", "CronTriggerGroup", "0 0/1 * * * ?");
        List < UserDetails> aList = customerDetailsService.getUsersConfiguredForEmailedReports();

        JobDataMap jobDataMap = new JobDataMap();
        jobDataMap.put("service", reportService);
        trigger.setJobDataMap(jobDataMap); 
```

这是执行作业的代码：

```
public void execute(JobExecutionContext context) throws JobExecutionException {

    JobDataMap dataMap = context.getJobDetail().getJobDataMap();
    logger.debug("map = " + dataMap.entrySet());
    logger.debug("dataMap = " + context.getJobDetail().getJobDataMap());
    for (Object val : dataMap.entrySet()) {
        logger.debug("next data map val = " + val);
    }
    EmailReportService emailReportService = (EmailReportService) dataMap.get("service");

    logger.debug("email report service = " + emailReportService); 
```

在日志中 emailReportService 返回为 null。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:57:37.187

您正在保存`JobDataMap`at 触发器，并且您正在从`jobDetail`. 尝试使用[JobExecutionContext.html#getMergedJobDataMap()](http://quartz-scheduler.org/api/2.0.0/org/quartz/JobExecutionContext.html#getMergedJobDataMap%28%29)或`JobDataMap`从JobExecutionContext.html [#getTrigger()获取](http://quartz-scheduler.org/api/2.0.0/org/quartz/JobExecutionContext.html#getTrigger%28%29)

# hadoop - Sqoop 与 hadoop 集成，用于使用 oraoop 导入 Oracle 数据

> ID：14195935
> 
> 赞同：0
> 
> 时间：2013-01-07T12:26:42.270
> 
> 标签：hadoop, sqoop

我一直在尝试使用带有 oraoop 的 scoop 将数据从 oracle Express edition 11g R2 导入到 hadoop。

我安装了 CDH sqoop 并尝试集成已经运行的 apache hadoop。

我发现 oraoop 使用正确，但我在导入时遇到以下问题。我也尝试使用 apache sqoop 和 apache hadoop，但仍然遇到以下问题。网络搜索也建议使用 CDH hadoop 而不是 apache Hadoop。

**

> 线程“main”java.lang.IncompatibleClassChangeError 中的异常：找到类 org.apache.hadoop.mapreduce.JobContext，但在 com.quest.oraoop.OraOopDataDrivenDBInputFormat.getDesiredNumberOfMappers(OraOopDataDrivenDBInputFormat.java:201) 处需要接口。 oraoop.OraOopDataDrivenDBInputFormat.getSplits(OraOopDataDrivenDBInputFormat.java:51)

**

总结一下，

> CDH sqoop + Apache Hadoop - 上述数据导入失败
> 
> 异常 Apache Sqoop + Apache hadoop - 数据导入失败，出现上述异常
> 
> CDH Sqoop + CDH Hadoop - 这是正确的组合吗？

有什么建议么？我不确定我是否走对了路。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:45:27.863

Hadoop 经历了从 Hadoop 1.0 到 Hadoop 2.0（相应地从 CDH3 到 CDH4）的巨大代码重构。一个副作用是针对 Hadoop 1.0 (CDH3) 编译的代码与 Hadoop 2.0 (CDH4)*不*兼容，反之亦然。但是源代码是兼容的，因此只需要使用目标 Hadoop 发行版重新编译代码。

当您在 Hadoop 2.0 (CDH4) 上运行为 Hadoop 1.0 (CDH3) 编译的代码时，异常“找到类 X，但预期接口”非常常见，反之亦然。

解决方法很简单，你需要同步版本。使用 CDH3 Hadoop + CDH3 Sqoop 或 CDH4 Hadoop + CDH4 Sqoop 是最简单的方法。如果您更喜欢使用上游 Sqoop 版本，那么您必须确保您使用的是为您的 Hadoop 发行版编译的二进制工件。Sqoop 使这很容易，因为目标 hadoop 分布在工件名称中编码 - 例如 sqoop-1.4.2.bin__hadoop-1.0.0.tar.gz 旨在用于 Hadoop 1.0 [1]。

完全相同的约束也适用于连接器。您必须下载正在运行的 Hadoop 版本的连接器。在 OraOop 的情况下，CDH3 和 CDH4 [2] 也有单独的工件。

雅尔切克

链接：

1： http: [//www.apache.org/dist/sqoop/1.4.2/](http://www.apache.org/dist/sqoop/1.4.2/)

2：[https ://ccp.cloudera.com/display/con/Quest+Data+Connectors](https://ccp.cloudera.com/display/con/Quest+Data+Connectors)

# windows-phone-7 - Windows phone 7 中的 Web 浏览器和硬件后退按钮

> ID：14195941
> 
> 赞同：1
> 
> 时间：2013-01-07T12:27:16.627
> 
> 标签：windows-phone-7, windows-phone-7.1

我的 Wp7 应用程序未能在市场上获得认证，因为我在应用程序的起始页的 WebBrowser 中加载网页，它依次加载三个页面（网页），每个页面都有两个弹出窗口。市场中的测试团队期望 onbackkeypress （硬件后退按钮）在打开而不是关闭 webbrowser 时关闭弹出窗口。我尝试了 webbrowser.invoke 但它失败了，因为当我在第二个网页中并且弹出窗口打开时 webbrowser.invoke 使页面重新加载并出现回到第一个网页。请指导我！

# jsf - jsf中的保存对话框

> ID：14195944
> 
> 赞同：0
> 
> 时间：2013-01-07T12:27:19.947
> 
> 标签：jsf, download, jsf-1.2

我已经使用 IText 库创建了 pdf 现在我希望当用户单击按钮时，它应该向用户提示一个保存对话框，以允许浏览目标位置来存储文件。

现在我的代码看起来像

```
 Document document = new Document();
    try {

                    FacesContext context = FacesContext.getCurrentInstance();
        HttpServletResponse response = (HttpServletResponse) context.getExternalContext().getResponse();
        response.reset();  
        response.setContentType("application/pdf");

        response.setHeader("Content-Disposition", "attachment; filename=ABC.pdf");
        response.setHeader("Cache-Control", "no-cache");  
        response.setDateHeader("Expires", 0);  
        response.setHeader("Pragma", "No-cache");
        PdfWriter.getInstance(document, response.getOutputStream());

        document.addTitle("Form");
        document.addSubject("Form");

        document.open();

        Paragraph paragraph12 = new Paragraph("FORM",

        FontFactory.getFont(FontFactory.HELVETICA,

        18, Font.BOLD, new CMYKColor(0, 255, 255, 17)));

        Chapter chapter1 = new Chapter(paragraph12, 1);
        paragraph12.setSpacingAfter(25);
        paragraph12.setAlignment(Element.ALIGN_CENTER);
        document.add(paragraph12);
        // Centered

        Chunk underline = new Chunk(AppNo);
        underline.setUnderline(0.2f, -2f);

        Paragraph paragraph = new Paragraph("Application No:");
        paragraph.add(underline);
        paragraph.setAlignment(Element.ALIGN_LEFT);
        paragraph.setSpacingAfter(20);
        document.add(paragraph);
        // Left
        paragraph = new Paragraph("To,");
        paragraph.setAlignment(Element.ALIGN_LEFT);
        document.add(paragraph);
        // Left with indentation
        paragraph = new Paragraph(
                "");
        paragraph.setAlignment(Element.ALIGN_LEFT);
        document.add(paragraph);

        Paragraph paragraph2 = new Paragraph(
                "Subject: ");

        paragraph2.setSpacingAfter(15);
        paragraph2.setSpacingBefore(15);
        paragraph2.setAlignment(Element.ALIGN_LEFT);
        paragraph2.setIndentationRight(50);
        document.add(paragraph2);

        Paragraph paragraph3 = new Paragraph("I  ");
        String laName=deaclarationOpr.getDeclarationDetailsobj()
                .getLaName();
        if(laName!=null){
        Chunk name = new Chunk(laName);
        name.setUnderline(0.2f, -2f);
        paragraph3.add(name);
        }
        paragraph3.add("  request you to process the Application  ");
        paragraph3.add(underline);
        paragraph3.add("  for product  ");

        String productName=deaclarationOpr
                .getDeclarationDetailsobj().getProductName();
        if(productName!=null){
        Chunk product = new Chunk(productName);
        product.setUnderline(0.2f, -2f);
        paragraph3.add(product);
        }
        paragraph3
                .add("");

        paragraph3.setSpacingAfter(15);
        paragraph3.setSpacingBefore(15);
        paragraph3.setAlignment(Element.ALIGN_LEFT);
        paragraph3.setIndentationLeft(50);
        paragraph3.setIndentationRight(50);
        document.add(paragraph3);

        Paragraph paragraph4 = new Paragraph(
                "");

        String code=deaclarationOpr
                .getDeclarationDetailsobj().getAdvisorCode();
        if(code!=null){
        Chunk advisorCode = new Chunk(code);
        advisorCode.setUnderline(0.2f, -2f);
        paragraph4.add(advisorCode);
        }
        paragraph4
                .add("");

        paragraph4.setSpacingAfter(15);
        paragraph4.setSpacingBefore(15);
        paragraph4.setAlignment(Element.ALIGN_LEFT);
        paragraph4.setIndentationLeft(50);
        paragraph4.setIndentationRight(50);
        document.add(paragraph4);

        Paragraph paragraph5 = new Paragraph(
                "");

        paragraph5.setSpacingAfter(15);
        paragraph5.setSpacingBefore(15);
        paragraph5.setAlignment(Element.ALIGN_LEFT);
        paragraph5.setIndentationLeft(50);
        paragraph3.setIndentationRight(50);
        document.add(paragraph5);

        Paragraph paragraph6 = new Paragraph(
                "");

        paragraph6.setSpacingAfter(15);
        paragraph6.setSpacingBefore(15);
        paragraph6.setAlignment(Element.ALIGN_LEFT);
        paragraph6.setIndentationLeft(50);
        paragraph6.setIndentationRight(50);
        document.add(paragraph6);

        Paragraph paragraph7 = new Paragraph("Date:      ");
        DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
        // get current date time with Date()
        Date date = new Date();
        paragraph7.add(dateFormat.format(date));
        paragraph7.setSpacingBefore(15);
        paragraph7.setIndentationLeft(50);
        paragraph7.setIndentationRight(50);
        paragraph7.setAlignment(Element.ALIGN_LEFT);
        document.add(paragraph7);

        Paragraph paragraph8 = new Paragraph("Name of the Proposer:      ");

        String propoer=deaclarationOpr
                .getDeclarationDetailsobj().getProposerName();
        if(propoer!=null){
        Chunk proposerName = new Chunk(propoer);
        proposerName.setUnderline(0.2f, -2f);
        paragraph8.add(proposerName);
        }
        paragraph8.setAlignment(Element.ALIGN_LEFT);
        paragraph8.setIndentationLeft(50);
        paragraph8.setIndentationRight(50);
        document.add(paragraph8);

        Paragraph paragraph9 = new Paragraph("Place:      ");
        paragraph9.setIndentationLeft(50);
        paragraph9.setIndentationRight(50);
        paragraph9.setAlignment(Element.ALIGN_LEFT);
        document.add(paragraph9);

        document.close(); 
```

context.responseComplete(); } catch (FileNotFoundException e) { // TODO 自动生成的 catch 块 e.printStackTrace(); } catch (DocumentException e) { // TODO 自动生成的 catch 块 e.printStackTrace(); }

以下过滤器在 web.xml 中定义

```
<filter>
        <display-name>RichFaces Filter</display-name>
        <filter-name>richfaces</filter-name>
        <filter-class>org.ajax4jsf.Filter</filter-class>
        <init-param>
            <param-name>createTempFiles</param-name>
            <param-value>false</param-value>
        </init-param>
        <init-param>
            <param-name>maxRequestSize</param-name>
            <param-value>20000000</param-value>
        </init-param>
        <init-param>
            <param-name>enable-cache</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>richfaces</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>INCLUDE</dispatcher>
    </filter-mapping> 
```

而上面的代码是写在Backing Bean类的方法中的

并调用

```
<tr>
<td align="center"><a4j:commandButton
value="Print" styleClass="button"
action="#{declarationBB.convertToPdf}"></a4j:commandButton></td>
</tr> 
```

我在新页面下面

```
%PDF-1.4 %��3 0 obj <>stream x��V����Ժ@��rs�0��m|셒F6[�T���H[��E D'��7�� 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:38:46.660

只需将 PDF 写入 HTTP 响应而不是本地文件。

代替

```
PdfWriter.getInstance(document, new FileOutputStream("D:/Files/ABC.pdf")); 
```

经过

```
FacesContext context = FacesContext.getCurrentInstance();
HttpServletResponse response = (HttpServletResponse) context.getExternalContext().getResponse();
response.setContentType("application/pdf");
response.setHeader("Content-Disposition", "attachment; filename=\"ABC.pdf\"");
PdfWriter.getInstance(document, response.getOutputStream());

// ... (your PDF building code here)

context.responseComplete(); 
```

并在与下载按钮关联的操作方法中调用它。`Content-Disposition`值为的标题`attachment`将强制进行*另存为*对话框（*除非*浏览器配置为在 Adob​​e Reader 中自动打开 PDF 文件！）。

### 也可以看看：

*   [如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)

* * *

**更新**：根据您的更新，您正在通过 ajax 调用下载。

```
<a4j:commandButton value="Print" styleClass="button" action="#{declarationBB.convertToPdf}"></a4j:commandButton> 
```

这行不通。您不能通过 ajax 下载文件。Ajax 由 JavaScript 执行，但由于明显的安全原因，它没有工具来以编程方式强制与某个变量中异步获取/生成的内容进行“*另存为”对话。*改为正常请求。改为使用`<h:commandButton>`。

# java - JSON 在响应时返回空值

> ID：14195945
> 
> 赞同：0
> 
> 时间：2013-01-07T12:27:23.820
> 
> 标签：java, json, web-services, jackson

My`response`给了我`null`价值，但是当我在 中运行相同的值时`fiddler`，我得到了很多数据。我编写的代码非常少，并使用在线工具来生成我的代码。我想知道我在哪里搞砸了。

```
 Publications response = null ;
    // First open URL connection (using JDK; similar with other libs)
    try {
        URL url = new URL(
                "http://myserver:myport/Mobile/GetPublications");
        HttpURLConnection connection = (HttpURLConnection)url.openConnection() ;
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setRequestMethod("POST") ;
        connection.setRequestProperty("Content-Type", "application/json") ;
        // and other configuration if you want, timeouts etc
        // then send JSON request
        Publications request = new Publications(); // POJO with getters or public fields
        ObjectMapper mapper = new ObjectMapper(); 
        mapper.writeValue(connection.getOutputStream(), request);
        // and read response
        response = mapper.readValue(
                connection.getInputStream(), Publications.class);
    } catch (JsonGenerationException e) {
        e.printStackTrace();
        fail() ;
    } catch (JsonMappingException e) {
        e.printStackTrace();
        fail() ;
    } catch (IOException e) {
        e.printStackTrace();
        fail() ;
    }
    assertNotNull(response) ;
    assertTrue(response.getPublicationInfo() != null) ;
//      assertTrue(response.getPublicationInfo().size() > 0);
//      assertNotNull( ((PublicationInfo)response.getPublicationInfo().get(0)).getPublicationTitle() != null) ; 
```

出版物 POJO 是

```
import com.fasterxml.jackson.*

@JsonSerialize(include = JsonSerialize.Inclusion.NON_NULL)
@Generated("com.googlecode.jsonschema2pojo")
@JsonPropertyOrder({ "ErrorInfo", "PublicationInfo" })
public class Publications {

@JsonProperty("ErrorInfo")
private Object ErrorInfo;

@JsonProperty("PublicationInfo")
private List<PublicationInfo> PublicationInfo = new ArrayList<PublicationInfo>();
private Map<String, Object> additionalProperties = new HashMap<String, Object>();

@JsonProperty("ErrorInfo")
public Object getErrorInfo() {
    return ErrorInfo;
}

@JsonProperty("ErrorInfo")
public void setErrorInfo(Object ErrorInfo) {
    this.ErrorInfo = ErrorInfo;
}

@JsonProperty("PublicationInfo")
public List<PublicationInfo> getPublicationInfo() {
    return PublicationInfo;
}

@JsonProperty("PublicationInfo")
public void setPublicationInfo(
        List<PublicationInfo> PublicationInfo) {
    this.PublicationInfo = PublicationInfo;
}

@JsonAnyGetter
public Map<String, Object> getAdditionalProperties() {
    return this.additionalProperties;
}

@JsonAnySetter
public void setAdditionalProperties(String name, Object value) {
    this.additionalProperties.put(name, value);
}
} 
```

我在`assertTrue(response.getPublicationInfo().size() > 0);`. 但提琴手返回以下

```
{
"SpecialPublications": {
    "ErrorInfo": null,
    "SpecialPublicationInfo": [
        {
            "Date": "2/3/2010",
            "URL": "SOME URL HERE",
            "Description": "So much to do so less time."
        },
        {
            "Date": "2/4/2010",
            "URL": "SOME MORE URL HERE",
            "Description": "I need more time"
        }
   ]
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T13:14:00.633

您应该在所有地方更改`@JsonProperty("PublicationInfo")`为。`@JsonProperty("SpotlightPublicationInfo")`你把属性名弄错了。

的语义`@JsonProperty`是：出现在 json 中的属性名称。

**编辑**还从 json 中去除虚假属性名称。代替：

```
response = mapper.readValue(connection.getInputStream(), Publications.class); 
```

和：

```
JsonNode responseJson = mapper.readTree(connection.getInputStream());
response = mapper.readValue(responseJson.traverse().getValueAsString("SpecialPublications"), Publications.class); 
```

`{"SpecialPublications": ... }`这将去除您尝试解析的对象的虚假包装。

# php - 没有绑定参数的mysqli准备好的语句仍然安全吗？

> ID：14195953
> 
> 赞同：5
> 
> 时间：2013-01-07T12:28:08.210
> 
> 标签：php, mysql, mysqli

这是我在这里的第一篇文章，我对编程世界也比较陌生。简而言之，在结束我使用 php、mysql 和 javascript/jquery 开发的电子商务网站时，我发现我构建所有查询的方式（使用 mysql_connect）可能会导致 mysql 注入和许多其他讨厌的事情事物。

试图将所有内容“转换”为更安全的 mysqli 准备语句方式，我编写了一个包含从数据库中检索信息所需的所有方法的类，但我不确定我正在制作的方式查询。

一些代码：类构造函数

```
class Database {

    private $DBH;

    public function __construct() {
        $this->DBH = new mysqli(WEB_SERVER, WEB_USER, WEB_PASS, WEB_NAME);
        if ($this->DBH->connect_errno) {
            return "Failed to connect to MySQL: (" . $this->DBH->connect_errno . ") " . $this->DBH->connect_error;
            exit();
        }
    }
    ...
} 
```

...和一个查询示例：

```
public function get_record_by_param($record, $param, $value) {
    $stmt = $this->getDBH()->stmt_init();

    $query = "SELECT * ";
    $query .= "FROM {$record} ";
    $query .= "WHERE {$param} = {$value} LIMIT 1";

    if($stmt->prepare($query)){
        return $this->execute_simpleAssoc($stmt);
    } else {
    return "Prepare failed: (" . $this->getDBH()->errno . ") " . $this->getDBH()->error;
    }
} 
```

使用这样的查询仍然安全吗？还是我一定需要使用 bind_param 方法？

希望我没有混淆，谢谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:29:39.863

不，它不安全。mysqli 无法解析查询字符串中的哪些是（可能易受攻击的）数据，哪些不是。

如果您希望数据转义，则需要分别绑定每个参数。

但是，绑定参数仅适用于*数据*。对于列名，您需要应用@Michael 在他的评论中指出的白名单。无法自动转义列/表名。

这适用于*所有*数据库层，包括 PDO。如果您为图层提供完整的查询字符串，则其中的数据**不会**被神奇地转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:46:55.763

好吧，这更像是一个术语问题。看，有

*   占位符的一般概念，用于在查询中表示您的数据
*   准备好的语句，它是占位符的子集
*   绑定的东西，属于准备好的语句，但可以省略

最有可能在“绑定”下您的意思是准备好的陈述。在这种情况下，答案可能会有所不同。
但是如果您采用占位符的想法，答案将会改变：
您运行查询的方式当然仍然不安全。
但是可以在没有（手动）绑定的情况下进行完全安全的查询。
因此，不需要 bind_param。

# bash - 匹配两个文件的第一列中的值并将匹配的行加入新文件中

> ID：14195954
> 
> 赞同：4
> 
> 时间：2013-01-07T12:28:09.317
> 
> 标签：bash, awk, grep, match

我需要找到与 file1.txt 中第 1 列 ($1) 中的字符串与 file2.txt 中第 1 列 ($1) 中的字符串相匹配的内容。然后我想加入新文件中匹配的行。

```
cat file1.txt
1050008 5.156725968 8.404038296 124.9198605 3.23E-21    2.33E-17    38.57865782
3310747 5.631470026 8.581936875 124.6039122 3.34E-21    2.33E-17    38.55204806
5910451 4.900364671 8.455329195 124.5720603 3.35E-21    2.33E-17    38.54935989
730156  5.565210738 8.48792701  122.2168789 4.28E-21    2.33E-17    38.34773989

cat file2.txt
4230037 ILMN Controls   ILMN_Controls   ERCC-00071  ILMN_333646 ERCC-00071  ERCC-00071
1050008 ILMN Controls   ILMN_Controls   ERCC-00009  ILMN_333584 ERCC-00009  ERCC-00009
5260356 ILMN Controls   ILMN_Controls   ERCC-00053  ILMN_333628 ERCC-00053  ERCC-00053
3310747 ILMN Controls   ILMN_Controls   ERCC-00144  ILMN_333719 ERCC-00144  ERCC-00144
5910451 ILMN Controls   ILMN_Controls   ERCC-00003  ILMN_333578 ERCC-00003  ERCC-00003
1710435 ILMN Controls   ILMN_Controls   ERCC-00138  ILMN_333713 ERCC-00138  ERCC-00138
1400612 ILMN Controls   ILMN_Controls   ERCC-00084  ILMN_333659 ERCC-00084  ERCC-00084
730156  ILMN Controls   ILMN_Controls   ERCC-00017  ILMN_333592 ERCC-00017  ERCC-00017 
```

我希望输出文件看起来像这样：

```
out.txt
1050008 5.156725968 8.404038296 124.9198605 3.23E-21    2.33E-17    38.57865782 1050008 ILMN Controls   ILMN_Controls   ERCC-00009  ILMN_333584 ERCC-00009  ERCC-00009
3310747 5.631470026 8.581936875 124.6039122 3.34E-21    2.33E-17    38.55204806 3310747 ILMN Controls   ILMN_Controls   ERCC-00144  ILMN_333719 ERCC-00144  ERCC-00144
5910451 4.900364671 8.455329195 124.5720603 3.35E-21    2.33E-17    38.54935989 5910451 ILMN Controls   ILMN_Controls   ERCC-00003  ILMN_333578 ERCC-00003  ERCC-00003
730156  5.565210738 8.48792701  122.2168789 4.28E-21    2.33E-17    38.34773989 730156  ILMN Controls   ILMN_Controls   ERCC-00017  ILMN_333592 ERCC-00017  ERCC-00017 
```

这些文件是制表符分隔的，并且在某些列中缺少值。

file2.txt 中有 31 列和 >47000 行，我正在尝试在 bash (OSX) 中执行此操作

如果您有解决方案，如果您能简要解释一下这些步骤，我将不胜感激，因为我对此很陌生。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T12:32:48.983

```
awk 'BEGIN {
  FS = OFS = "\t"
  }
NR == FNR {
  # while reading the 1st file
  # store its records in the array f
  f[$1] = $0
  next
  }
$1 in f {
  # when match is found
  # print all values
  print f[$1], $0
  }' file1 file2 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T12:32:56.793

如果您不介意按第一列排序的输出，则可以使用[join](http://unixhelp.ed.ac.uk/CGI/man-cgi?join)命令的此调用：

```
join <(sort file1.txt) <(sort file2.txt) >out.txt 
```

# c++ - cocos2d-x cclayer dosent 处理我的多层触摸

> ID：14195957
> 
> 赞同：0
> 
> 时间：2013-01-07T12:28:16.067
> 
> 标签：c++, touch, cocos2d-x, cclayer

我在 cocos2d-x 中的触摸处理有问题。我有两层。其中一个是一种工作空间，另一个是位于工作空间层之上的工具箱。他们都有特殊的触摸处理。当我单击上层（工具箱）时，一切正常，但我无法单击第二层（工作区）。工具箱是屏幕的一小块区域，但是当我单击工作区层时，cocos2d 会调用工具箱触摸处理程序。我在工具箱和工作区中使用过这个命令

```
ToolBox::registerWithTouchDispatcher(){
        CCDirector::sharedDirector()->getTouchDispatcher()->addTargetedDeligate(this,0,1);
} 
```

我在工作区层有相同的代码。如果我将此函数的第三个参数更改为 0，cocos2d 将只处理工作区触摸，工作区将不起作用。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:52:49.023

将工具箱一更改为 (this, -5, 0) 并将工作区一更改为 (this, 0 , 1)

# css - EF和E~F css3选择器有什么区别

> ID：14195962
> 
> 赞同：3
> 
> 时间：2013-01-07T12:28:46.737
> 
> 标签：css, css-selectors

在阅读了关于 CSS3 选择器的[W3C 文档](http://www.w3.org/TR/selectors/)后，我仍然有点困惑，EF 和 E ~ F 选择器有什么区别。

```
E   F   an F element descendant of an E element
E ~ F   an F element preceded by an E element 
```

在我看来，它们是完全一样的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:31:25.710

```
E F 
```

选择一个元素`F`，它是 的子项（后代）`E`。所以你有一个嵌套结构，.`E`的*父*（祖先）在哪里`F`。

```
<!-- E F will match: -->
<e>
  <f></f>
</e> 
```

这类似于`E > F`which will only match if `F`is a **direct** child of `E`(no other elements in between)。

尽管

```
E ~ F 
```

选择一个`F`前面有一个元素的元素`E`。在这种情况下，您有一个非嵌套结构，`E`并且`F`是*Siblings*。

```
<!-- E ~ F will match: -->
<e></e>
<f></f> 
```

这又类似于，`E + F`除了这里，`F`必须`E`直接跟随（中间没有其他元素）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T12:30:37.067

在后者中，两个元素“E”和“F”必须是*兄弟*，而不是父/后代。

这将匹配`E F`：

```
<e> ... <f> </f> ... </e> 
```

这将匹配`E ~ F`

```
<e> </e> ... <f> </f> 
```

在这两种情况下，都是元素“F”被选中——元素“E”仅用于限制*哪个*元素“F”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T12:49:41.793

在这里引起混淆的是家谱隐喻（带有“孩子”、“父母”、“后代”等）。所以让我们看看没有它的问题：

一个元素可能有子元素，例如`li`列表（`ul`或`ol`）中的列表项（）是它的子元素。选择器`E F`匹配一个匹配的元素`F`并且是 的子元素`E`。选择器`E ~ F`非常不同：它匹配一个匹配的元素，`F`如果它是元素*X*的子元素，因此*X*也有一个匹配的子元素，并且在匹配的那个`E`之前`F`。考虑到简单的类型选择器，这意味着类似

```
<X>...<E>...</E>...<F>this matches E ~ F</F>...</X> 
```

就文档树而言，像往常一样以根在顶部进行可视化，这意味着`E F`匹配结构中`F`直接位于下方`E`的 an，而`E ~ F`匹配与 an`F`处于同一级别`E`并出现在其之前的同一分支中的 an。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T12:31:40.157

前者选择作为 E 的后代的所有 F。后者选择作为 E 的兄弟姐妹并且出现在它之后的任何点的所有 F。

区别在于，在第一种情况下，F 必须在 E*内部*的某个位置，而在第二种情况下，F 必须是E的*父级的直接子级。*

事实上，如果 F 元素*在*E 元素内部，它不可能是 E 的父元素的直接子元素。这意味着这两个选择器不仅不同，**而且是互斥的**。

一个例子`E F`：

```
<e> <f> <f> </e>
    _______ 
```

一个例子`E ~ F`：

```
<e> </e> <g> </g> <f> </f>
                  ________ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T12:32:39.737

答案在问题中：

```
<p>
    <span id="1"></span>
</p>
<span id="2"></span> 
```

```
p span{
    /* this matches the span with id=1 */
}
p ~ span{
    /* this matches the span with id=2 */
} 
```

因此，在第一种情况 ( `p span`) 中，`p`是跨度的父级。
在第二种情况下（`p ~ span`），`p`是跨度的兄弟。

# java - Java 中的 OraclePreparedStatement 方法 setStringForClob

> ID：14195964
> 
> 赞同：0
> 
> 时间：2013-01-07T12:28:51.040
> 
> 标签：java, oracle

我尝试使用以下代码在 Oracle DB 中插入 CLOB。

[我从这个链接中找到了下面的代码](http://www.coderanch.com/t/508848/Oracle-OAS/Insert-CLOB-JDBC)

但 setStringForClob 不可用，请告诉我做错了什么。我正在使用 oracle 驱动程序 ojdbc14.jar 和 jdk 1.5

```
String sql = "insert into table values('abc',123,?)"; 
OraclePreparedStatement st = (OraclePreparedStatement) connection.prepareStatement(sql);  
st.setStringForClob(1, /*String variable which contains the CLOB string*/); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:05:03.550

尝试获取更新的 JDBC 驱动程序 ojdbc14.jar 真的很旧。使用 oracle 的 ojdbc6.jar。

# iphone - 设置默认固定空间 UIBarButtonItem 宽度

> ID：14195967
> 
> 赞同：1
> 
> 时间：2013-01-07T12:29:03.947
> 
> 标签：iphone, ios, xcode, uibarbuttonitem, uiappearance

基本上，标题说明了一切。我正在尝试进行一些自定义，我需要使用小于零的宽度来使按钮彼此更接近。

我从[这个答案](https://stackoverflow.com/a/8070763/1280800)中学到了。

我可以通过手动设置每个固定的空间宽度来做到这一点，但我怎样才能通过 [外观] 或其他方式将其设为默认值？

像这样的东西：

```
// works for every button not only Fixed Space
[UIBarButtonItem appearance] setWidth:-10]; 
```

**！！！或者 ！！！**

如何在 XCode 中设置小于零的宽度？无论如何，我正在使用 Storyboard 创建所有内容，它说这不是一个有效的设置值。

任何帮助都会非常棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:55:39.900

`layoutSubviews`我通常通过子类化容器并覆盖or来解决此类问题`didLayoutSubviews`。这使您可以对各种样式行为进行大量控制。在这种特殊情况下，您将以编程方式确定宽度并相应地调整框架。

使您的实例类成为该子类的子类，您将可以将布局代码与您的实现巧妙地分开。

# javascript - 如何使用 jquery 获取父框架集中的元素？

> ID：14195969
> 
> 赞同：0
> 
> 时间：2013-01-07T12:29:13.137
> 
> 标签：javascript, jquery

我有一个框架集中有框架的主页：

```
<FRAMESET>
    <FRAMESET >
        <FRAME name="menu" src=<%=menu%>>
        <FRAME marginWidth="0" src=<%=bottom%> >
    </FRAMESET>
    <FRAMESET>
        <FRAME src=<%=title%>>
        <FRAME name="main"src=<%=main%>>
    </FRAMESET>
</FRAMESET> 
```

我在`main`框架中，我需要找到一个`myspan` `span`在`menu`框架中的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:55:16.343

尽管我不喜欢索引来获取`menu`框架，但这有效：

`var mySpan = $('#myspan', window.parent.frames[0].document);`

# javascript - 尝试在 TD 标签的 Click 事件上切换 Div，但遇到问题

> ID：14195970
> 
> 赞同：1
> 
> 时间：2013-01-07T12:29:14.947
> 
> 标签：javascript, jquery, onclick, toggle

我正在尝试使用 jQuery 基于 TD 标签的点击事件来切换（增加和减少高度）DIV。请注意我是 jQuery 新手。

```
<td id="ProductionTargetDEtd" class="collapsibleTdRelease" width="100%" onclick="javascript:toggleHeader();">
<table width="100%">
    // Some Html code here
</table>
</td></tr>
<tr><td>
<div id="ProductionTargetDEDiv" class="slidingDiv" style="">
  // Some Html code here
</div>
</td> 
```

现在在 JSP 脚本标签中，我通过给出 height = 0 来隐藏 DIV，如下所示：

```
<script>
$(document).ready(function(){
    $(this).find("div#ProductionTargetDEDiv").each(function() {$(this).css({  overflow: "hidden", height: "0px" })});
</script>
}); 
```

最后，在 TD id="ProductionTargetDEtd" 的点击事件上，我们在下面调用 javascript 方法 toggleHeader()：

```
function toggleHeader(){
    $("td#ProductionTargetDEtd").removeAttr("onclick");

    $("td#ProductionTargetDEtd").toggle(function(){
            $("div#ProductionTargetDEDiv").animate({ height: 135}, 400);
        },function(){
            $("div#ProductionTargetDEDiv").animate({ height: 0 }, 400);
    });
} 
```

现在这一切应该做的是，当我单击 TD 标签时，DIV 应该向下滑动，然后单击它应该向上滑动。上述方法工作正常，除了 1 个异常：

1）在第一次点击时，什么都没有发生，只有在第二次点击和以后，DIV 平滑地向下和向上滑动

令人惊讶的是，如果我不使用内联 javascript 调用调用 Javascript 方法 toggleHeader()

```
onclick="javascript:toggleHeader()" 
```

相反，我将所有 jQuery 代码放在 JSP 的标签中，然后这个第一次点击问题就解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:05:26.823

为什么你需要触发 ProductionTargetDEDiv 点击...删除它..

您正在调用`td#ProductionTargetDEtd`两次单击事件.. 一个在您的 html 中

这里

```
<td id="ProductionTargetDEtd" class="collapsibleTdRelease" width="100%" onclick="javascript:toggleHeader();"> 
```

和这里

```
 $("td#ProductionTargetDEtd").click( //inside the toggleHeader function 
```

所以删除`$("td#ProductionTargetDEtd").click(`里面`toggleHeader` 应该解决你的点击功能

最终结果...替换`toggleHeader`为

```
function toggleHeader(){
  $("div#ProductionTargetDEDiv").toggle(function(){
        $(this).animate({ height: 135 }, 200);
    },function(){
        $(this).animate({ height: 0 }, 200);
  });
} 
```

它应该可以工作

# c - 防止 getpeername() 返回 127.0.0.1

> ID：14195972
> 
> 赞同：0
> 
> 时间：2013-01-07T12:29:34.917
> 
> 标签：c, linux, sockets, tcp

我有一个服务器 (A) 和一个客户端 (B)，用 C 编写，在同一台 Linux 机器上运行。服务器将一个端口绑定到 INADDR_ANY，客户端将另一个端口绑定到 INADDR_ANY。当另一个运行在*另一*台 Linux 机器上的客户端（C）连接到服务器时，我希望服务器获取客户端 B 的 IP 地址并将其发送给客户端 C。

当我从服务器使用 getpeername() 时，它返回“127.0.0.1”，这是正确的，但我无法将此地址发送给客户端 C-它将无法使用该地址连接到客户端 B。

有没有什么聪明的方法可以获取客户端 B 的实际 IP？如果它更容易一些，我可以让每个客户端将其 IP 发送到服务器。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:36:49.073

使用[getifaddrs()](http://www.kernel.org/doc/man-pages/online/pages/man3/getifaddrs.3.html)获取接口 IP 地址，手册页中有一个示例。请注意，您可以发送任何接口的 IP 地址，因为服务器已绑定使用`INADDR_ANY`，因此它侦听所有接口。从人[ip(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/ip.7.html)

> 在绑定调用中指定 INADDR_ANY 时，套接字将绑定到所有本地接口。

如果您想要*公共*IP 地址，请参考以下问题：

[获取公共/外部 IP 地址？](https://stackoverflow.com/questions/3253701/c-sharp-get-public-external-ip-address)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:16:04.720

您真正想知道的是接口的 IP 地址，它将用于路由到客户端 C。
使用 Linux 命令行，您可以这样做（假设 C 是 10.0.0.1）：

```
# ip route show match 10.0.0.1
default via 20.0.0.2 dev eth0
# ifconfig eth0
eth0        Link encap:Ethernet  HWaddr 00:00:00:00:00:00
            inet addr:20.0.0.3  Bcast:20.0.0.255  Mask:255.255.255.0 
```

在这种情况下，您需要使用`20.0.0.3`.

问题仍然是如何在 C 中获得所有这些。一种方法是连接到 C 上的某些服务，并`getsockname`在生成的套接字上运行。

# php - 在 Laravel 的 URL 中使用破折号而不是下划线

> ID：14195973
> 
> 赞同：3
> 
> 时间：2013-01-07T12:29:35.750
> 
> 标签：php, laravel

我真的很想能够使用 Laravel (3) 并将破折号作为 url 分隔符而不是下划线。

我希望能够自动执行此操作，而不必为every_single_page 定义新路由。

我看不出如何实现这一点，并确保 Laravel 同时正常工作。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:47:52.560

只需使用：

```
return Str::slug('My First Blog Post!'); 
```

它会回显类似***mypage/my-first-blog-post的链接***

你也可以更精确：

```
return Str::slug('My First Blog Post!', '_'); 
```

会给***mypage/my_first_blog_post***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-06T05:44:27.397

我已经创建了对修复此问题的 3.x 分支的[拉取请求。](https://github.com/laravel/laravel/pull/1965)

您可以使用[补丁](https://github.com/laravel/laravel/pull/1965.patch)或[我仍然支持](https://github.com/neoascetic/laravel)的框架 3.x 分支的分支。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T14:34:36.773

您可以尝试将 - by _ 替换为 .htaccess 文件。

# string - 为什么 Perl 只读取文件中的一半行？

> ID：14195980
> 
> 赞同：1
> 
> 时间：2013-01-07T12:29:51.637
> 
> 标签：string, perl, file, split, line

我想逐行读取文件，并为每一行拆分字符串并打印它。但是脚本只打印偶数行。

文件：

```
line1:item1
line2:item2
line3:item3
line4:item4
line5:item5
line6:item6 
```

和脚本：

```
$FILE = "file";
open($FILE, "<", "file") or die("Could not open file.");

while (<$FILE>) {
    my $number = (split ":", <$FILE>)[1];
    print $number;
} 
```

输出：

```
item2
item4
item6 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-07T12:32:55.843

这是因为您每循环读取两行

```
while (<$FILE>) { # read lines 1, 3, 5
    my $number = (split ":", <$FILE>)[1]; # read lines 2, 4, 6
    print $number;
} 
```

改用这个

```
while (<$FILE>) {
    my $number = (split /:/)[1];
    print $number;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T12:32:32.100

`<$FILE>`会读一行。您在 while 中读取一行，然后在 split 中读取另一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:32:54.997

因为您在此期间阅读了 1 行，而在拆分时又阅读了另一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T12:33:57.403

小错误。您在 while 中读取一行，在下一个直接行中读取另一行（使用 split 的地方）。

# php - Phpdocumentor 和 Slim 路由器文档

> ID：14195982
> 
> 赞同：3
> 
> 时间：2013-01-07T12:30:01.840
> 
> 标签：php, routing, documentation, slim, phpdoc

我使用 phpdocumentor 为我的项目生成文档。它为我的功能生成了很好的文档，例如：

```
 /**
       * Hash generator
       *
       * Long description
       *
       * @param string $password Password
       * @return string
       */
    function generate_hash($password) {
        global $PASSWORD_SALT;
        return crypt($password, $PASSWORD_SALT);
    } 
```

但我还没有找到一种记录 slim 映射的方法（php 框架）：

```
 /**
     * Delete news
     *
     * Delete news by id
     *
     * @link /news/delete/:id
     *
     */
    $app->get('/news/delete/:id', function ($id) use ($app) {
        $item = ORM::for_table('news')->find_one($id);
        if ($item)
            $item->delete();
        $app->redirect('/');
    })->conditions(array('id'=>'\d+')); 
```

记录这样的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:54:23.420

To describe my comment as an answer I'd point you towards something similiar to:

```
/**
 * Delete news
 *
 * Delete news by id
 *
 * @link /news/delete/:id
 *
 */
public function deleteNewsByID (&$app, $id)
{
     return $app->get('/news/delete/:id', function ($id) use ($app) {
         $item = ORM::for_table('news')->find_one($id);
         if ($item)
             $item->delete();
         $app->redirect('/');
     })->conditions(array('id'=>'\d+'));
} 
```

But I am not familiar with slim so I cannot insure this will work at all. And it is not recommended nor pretty, as stated in the comments below.

# objective-c - 如何使用 Matt Gallagher AudioStreamer 在 iphone 应用程序中流式传输 SHOUTcast 广播电台？

> ID：14195983
> 
> 赞同：0
> 
> 时间：2013-01-07T12:30:04.853
> 
> 标签：objective-c, ios, cocoa, audiostreamer

我已经实现了 Matt Galagher 的 AudioStreamer 类来从 ShoutCast 流式传输广播电台。问题是当我使用这种方法传递广播电台的 URL 时：

```
NSURL *streamingURL = [NSURL URLWithString:http://yp.shoutcast.com/sbin/tunein-station.pls?id=1280356];
streamer = [[AudioStreamer alloc] initWithURL:streamingURL]; 
```

我得到了 Matt Galagher 的 AudioStreamer 类无法播放的流扩展类型 = .pls，并且出现以下错误：“无法配置网络读取流”

请告诉任何方法流式传输 .pls 文件扩展名或提供任何其他可以解析和流式传输具有 .pls 文件扩展名格式的站的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:13:58.400

您在问题中提供的 URL 返回以下播放列表：

```
[playlist]
numberofentries=0
Version=2 
```

我不熟悉 AudioStreamer，但即使它可以读取 .pls 文件，也没有什么可以播放的，所以我预计它会失败。您可以尝试使用另一个已知良好的 URL。

至于解析 PLS 文件，[这里](http://en.wikipedia.org/wiki/PLS_%28file_format%29)描述了一般格式。按照惯例，.PLS 文件似乎只是一个 INI 文件，其中包含某些值。使用 Google，我发现[这个 INI 解析器是用 Objective-C 编写的](http://marm.homepage.t-online.de/HTML/ini/download.html)。可能还有其他人。

# c++ - 无法在 Linux 中使用 OpenCV 打开相机

> ID：14195985
> 
> 赞同：1
> 
> 时间：2013-01-07T12:30:24.757
> 
> 标签：c++, opencv, qt-creator

我现在在 linux 上使用 OpenCV 2.4.3。在我的 /dev/ 中有一个名为 video0 的设备，它可以很好地处理奶酪。

目前我正在使用以下代码尝试访问相机。这段代码是用 qtcreator 编写的，并用 qmake 编译以包含必要的库。至于OpenCV库，我下载了源代码，并在我的机器上按照网站上的说明进行编译。

++main.cpp:

```
#include <iostream>
#include <opencv2/opencv.hpp>
#include <cstdlib>

int main(int argc, char** argv) {
    int cameraNumber = 0;
    if (argc>1)
        cameraNumber = atoi(argv[1]);
    cv::VideoCapture camera;
    camera.open(cameraNumber);
    if(!camera.isOpened()) {
        std::cerr<<"Error opening camera"<<std::endl;
        exit(1);
    }
    camera.set(CV_CAP_PROP_FRAME_WIDTH,640);
    camera.set(CV_CAP_PROP_FRAME_HEIGHT,480);

    while(true) {
        cv::Mat cameraFrame;
        camera>>cameraFrame;
        if (cameraFrame.empty()){
            std::cerr<<"No frame read from camera"<<std::endl;
            exit(1);
        }
        imshow("Camera",cameraFrame);

        char keypress = cv::waitKey(20);
        if (keypress==27) {
            break;
        }
    }
    return 0;
} 
```

* * *

++test.pro

```
TEMPLATE = app
CONFIG += console
CONFIG -= app_bundle
CONFIG -= qt

SOURCES += main.cpp

win32:CONFIG(release, debug|release): LIBS += -L$$PWD/../../../../opt/OpenCV-2.4.3/lib/release/ -lopencv_core
else:win32:CONFIG(debug, debug|release): LIBS += -L$$PWD/../../../../opt/OpenCV-2.4.3/lib/debug/ -lopencv_core
else:unix: LIBS += -L$$PWD/../../../../opt/OpenCV-2.4.3/lib/ -lopencv_core

win32:CONFIG(release, debug|release): LIBS += -L$$PWD/../../../../opt/OpenCV-2.4.3/lib/release/ -lopencv_highgui
else:win32:CONFIG(debug, debug|release): LIBS += -L$$PWD/../../../../opt/OpenCV-2.4.3/lib/debug/ -lopencv_highgui
else:unix: LIBS += -L$$PWD/../../../../opt/OpenCV-2.4.3/lib/ -lopencv_highgui

INCLUDEPATH += $$PWD/../../../../opt/OpenCV-2.4.3/include
DEPENDPATH += $$PWD/../../../../opt/OpenCV-2.4.3/include 
```

但是，运行程序时会输出`Error opening camera`并退出，这意味着相机没有成功打开。我已经用谷歌搜索了一段时间，没有找到任何可能的解决方案来解决这个问题。有人能给我一些关于如何解决这个问题的建议吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:23:15.370

也许您缺少一些 linux 所需的附加库。

根据[OpenCV 安装指南 Extra Prerequisites](http://opencv.willowgarage.com/wiki/InstallGuide)，在 linux 上使用 OpenCV 时，您需要安装以下库：ffmpeg、libgstreamer、libv4l、libxine、unicap、libdc1394 2.x。

在 Ubuntu 12.04 上，安装以下软件包对我有用 (*sudo apt-get install **__** *)：

*   python-opencv
*   libhighgui2.3
*   libhighgui-dev
*   ffmpeg
*   libgstreamer0.10-0
*   libv4l-0
*   libv4l-开发
*   libxine2
*   libunicap2
*   libdc1394-22

祝你好运！

# node.js - Mongoose 变量键名

> ID：14195991
> 
> 赞同：8
> 
> 时间：2013-01-07T12:30:35.673
> 
> 标签：node.js, mongodb, schema, mongoose, schema-design

我有一个`mongo`对象并希望通过`mongoose`我的网络应用程序访问它。我定义的模式有一个`Object`存储用户 ID 和一个 3 级值（是、可能或否）。

例如

```
"user_info": {
    "<id_value_1>": "y",
    "<id_value_2>": "n"
} 
```

上面的`id_value_*`s 是用户会话 ID，因此是一长串随机字符。我怎样才能`mongoose` `Schema`为此创建一个？

1.  会`user_info: {String, String}`工作吗？

2.  我可以对其进行重组，使其成为`user_info`一个对象数组`{ "sessionid": "<value>", "value: "y"}`，这没关系，这是最好的选择吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T13:56:25.663

如果您避免在架构中使用动态键并采用您的第二个想法，您会更好：

```
user_info: [{sessionid: String, value: String}] 
```

您可以使用[`$`位置运算符](http://docs.mongodb.org/manual/reference/operator/positional/)来更新单个`user_info`数组元素`sessionid`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-04T22:34:41.987

您可以像这样尝试混合模式类型

```
var user = new Schema({
   info:    [Schema.Types.Mixed]
 });

user.info = { any: { thing: 'i want' } };
user.markModified('info'); 
```

[你可以在这里](http://mongoosejs.com/docs/schematypes.html)阅读更多关于它的信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T12:30:35.673

在测试了上述内容之后，我发现将架构定义为`user_info: { String: String }`是一种有效的方法（问题中指定了选项 1）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:12:00.927

您可以在架构中定义对象和数组。你甚至可以将它们结合起来。例如，这是一个对象数组：

```
var user = new Schema({
    foo: [ {
        address: {type: String},
        email: {type: String, unique: true}
    }],
    bar: [ "simple", "array" ]
}); 
```

# javascript - how do I disable auto indenting and code completion in ace editor

> ID：14195996
> 
> 赞同：2
> 
> 时间：2013-01-07T12:30:45.283
> 
> 标签：javascript, ace-editor

When you type `<div>` and press enter on the standard ace editor (in html mode) it automatically creates a closing div tag and indents the cursor. You can see it [here](http://ace.ajax.org/#nav=about).

They have disabled it for the [kitchen sink](http://ace.ajax.org/build/kitchen-sink.html) which is what I am after.

Is their a simple property setting like

```
editor.autoIndent = false;
editor.autoComplete = false; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T06:50:41.120

you can use `editor.setBehavioursEnabled(false)` [https://github.com/ajaxorg/ace/blob/master/demo/kitchen-sink/demo.js#L353](https://github.com/ajaxorg/ace/blob/master/demo/kitchen-sink/demo.js#L353)