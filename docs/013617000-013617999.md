# StackOverflow 问答 13617000-13617999

# jquery - 使用 ajax post 将数组发布到 MVC3 控制器

> ID：13617003
> 
> 赞同：1
> 
> 时间：2012-11-29T00:45:44.687
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui, razor

如何使用 jQuery Ajax post 将元素数组发布到控制器操作。

这就是我正在尝试的方式，但我的控制器接收到一个空数组。

```
function dipatchAllocations() {
            // unSelected is an array of items of type int.
            if (unSelected.length == 0) {
                alert("Please select a line item to be dispatched.");
                return;
            }
            debugger;
            $.ajax({
                type: 'POST',
                url: '/Batch/SetToDispatch',
                data: '{ "allocationId[]" : "[' + unSelected + ']","batchId" : "' + @Model.Id + '" }',
                contentType: "application/json; charset=utf-8",
                traditional: true,
                success: updateView,
                error: errorInSubscribing
            });
        }; 
```

这是我的控制器

```
[HttpPost]
public ActionResult SetToDispatch(long[] allocationId,long batchId)
{   
  // Perform some action here
   return View("_ReadyToDispatchItems",model);
} 
```

有人可以告诉我我缺少什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:27:45.373

尝试这个：

```
var data = { allocationId : unSelected, batchId : @Model.Id };
$.ajax({
                type: 'POST',
                url: '/Batch/SetToDispatch',
                data: JSON.stringify(data),
                contentType: "application/json; charset=utf-8",
                traditional: true,
                success: updateView,
                error: errorInSubscribing
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:28:27.027

您的 json 语法似乎已关闭，在 allocationId[] 之后不需要 [] 请参阅：[http](http://www.w3schools.com/json/json_syntax.asp) ://www.w3schools.com/json/json_syntax.asp 以了解数组的语法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T05:10:29.063

您可以简单地将数据作为查询字符串提供给控制器，它将起作用

```
 $.ajax({
            type: 'POST',
            url: '/Batch/SetToDispatch/' + unSelected + ',' + batchId
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            traditional: true,
            success: updateView,
            error: errorInSubscribing
        }); 
```

它的逗号分隔您可以将其拆分到控制器中并使用它。希望能帮助到你

# javascript - 分配一个新的字符串值会创建需要收集的垃圾吗？

> ID：13617005
> 
> 赞同：8
> 
> 时间：2012-11-29T00:45:58.743
> 
> 标签：javascript, performance, garbage-collection

考虑这个 javascript 代码：

```
var s = "Some string";
s = "More string"; 
```

垃圾收集器（GC）在这种操作之后会有工作吗？

（我想知道在尝试最小化 GC 暂停时是否应该担心分配字符串文字。）

*e：*我觉得有点好笑，虽然我在问题中明确指出我需要最小化 GC，但每个人都认为我错了。如果真的必须知道具体细节：我有一个 javascript 游戏——它在 Chrome 中运行良好，但在 Firefox 中有半频繁的暂停，这似乎是由于 GC。（我什至检查了 Firefox 的 MemChaser 扩展，停顿与垃圾收集完全一致。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T01:39:26.103

是的，字符串需要被垃圾收集，就像任何其他类型的动态分配的对象一样。是的，这是一个有效的问题，因为在繁忙的循环中不小心分配对象肯定会导致性能问题。

但是，字符串值是不可变的（不可更改），并且大多数现代 JavaScript 实现都使用“字符串实习”，即它们只存储每个唯一字符串值的一个实例。这意味着如果你有这样的东西......

```
 var s1 = "abc",
     s2 = "abc"; 
```

...只会分配一个“abc”实例。这仅适用于字符串值，不适用于`String`对象。

要记住几件事：

1.  `substring`,等函数`slice`将为每个函数调用分配一个新对象（如果使用不同的参数调用）。

2.  即使两个变量都指向内存中的相同数据，当 GC 循环运行时，仍然有两个变量需要处理。过多的局部变量也会对您造成伤害，因为它们中的每一个都需要由 GC 处理，从而增加开销。

一些关于编写高性能 JavaScript 的进一步阅读：

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Memory_Management](https://developer.mozilla.org/en-US/docs/JavaScript/Memory_Management)
*   [https://www.scirra.com/blog/76/how-to-write-low-garbage-real-time-javascript](https://www.scirra.com/blog/76/how-to-write-low-garbage-real-time-javascript)
*   [http://jonraasch.com/blog/10-javascript-performance-boosting-tips-from-nicholas-zakas](http://jonraasch.com/blog/10-javascript-performance-boosting-tips-from-nicholas-zakas)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T00:54:55.570

是的，垃圾收集器将有一个包含`"Some string"`要摆脱的字符串对象。而且，在回答您的问题时，该字符串分配将为 GC 工作。

因为字符串是不可变的并且被大量使用，所以 JS 引擎有一种非常有效的方式来处理它们。您应该不会注意到垃圾收集一些字符串的任何暂停。垃圾收集器在 javascript 编程的正常过程中一直有工作要做。这就是它应该如何工作的方式。

如果您正在观察 GC 的暂停，我宁愿怀疑它来自几个字符串。更有可能发生更大的问题。要么你有成千上万的对象需要 GC，要么有一些非常复杂的 GC 任务。如果不研究整体代码，我们无法真正推测这一点。

除非您正在执行一些巨大的循环并处理数以万计的对象，否则这不应该是一个问题。在这种情况下，可能需要更仔细地进行编程，以尽量减少创建的中间对象的数量。但是，如果没有该级别的对象，您应该首先正确清晰、可靠的代码，然后仅在某些事情表明您需要担心性能问题时才针对性能进行优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T00:55:55.657

是的，但是除非您在循环中执行此操作数百万次，否则它不太可能成为您担心的因素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T01:27:38.307

正如您已经注意到的，JavaScript 不是 JavaScript。它在不同的平台上运行，因此将具有不同的性能特征。所以对于“在这种操作之后 GC 有工作要做吗？”这个问题的明确答案。是：也许。如果脚本和您展示的一样短，那么 JIT 编译器可能会完全删除第一个字符串。但是语言定义中没有规定必须以这种方式或其他方式。所以最终它就像在 JavaScript 中经常发生的那样：你必须尝试它。

更有趣的问题也可能是：如何避免垃圾收集。那就是尽量减少新对象的分配。游戏通常具有相当数量的对象，并且通常在旧对象未被使用之前不会有新对象。对于字符串，这可能更难，因为它们在 JS 中是不可变的。因此，尽可能尝试用其他（可变）表示替换字符串。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-29T00:56:14.933

要回答您的问题“我想知道在尝试最小化 GC 暂停时是否应该担心分配字符串文字”：不。

关于垃圾收集，你真的不需要担心这种事情。

GC 仅在创建和销毁大量 Javascript 对象或大量 DOM 元素时才需要考虑。

# javafx-2 - 使用 fx:root 是否需要以编程方式设置控制器？

> ID：13617007
> 
> 赞同：3
> 
> 时间：2012-11-29T00:46:16.743
> 
> 标签：javafx-2, fxml

我到处都看到有关使用 o FXMLLoader#setController() 的解释，它与使用 fx:root 以及以编程方式设置根节点相关联（[Oracle Docs](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#fxmlloader)和[SO 答案](https://stackoverflow.com/questions/9717852/how-to-pass-object-created-in-fxml-controller1-to-controller2-of-inner-fxml-cont)都有这种模式）。是要求吗？或者我可以使用一些好的旧容器创建一个常规的 FXML（可能使用 SceneBuilder），然后**仅以**编程方式设置控制器吗？

在 FXML 中：

```
<BorderPane fx:id="root" prefHeight="500.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml" > </Borderpane> 
```

在某些代码中（可能是控制器）：

```
FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("fxml_example2.fxml"));
fxmlLoader.setController(this);
try {
    fxmlLoader.load();            
} catch (IOException exception) {
    throw new RuntimeException(exception);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T16:07:19.910

我不认为这是一个要求。我通过在我的应用程序类中调整[Oracle 教程代码](http://docs.oracle.com/javafx/2/get_started/fxml_tutorial.htm)使其看起来像这样来完成这项工作：

```
@Override
public void start(Stage stage) throws Exception {

    FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("fxml_example.fxml"));
    fxmlLoader.setController(new ExampleController());
    Parent root = (Parent)fxmlLoader.load();

    stage.setTitle("FXML Welcome");
    stage.setScene(new Scene(root, 300, 275));
    stage.show();
} 
```

正如您所看到的，我以编程方式设置了我的 ExampleController，而不是`fx:controller="ExampleController"`在 FXML 中使用，而且我不必在`id:root`任何地方进行设置。

顺便说一句，我非常喜欢这种方法，因为它更接近地模拟了使用 WPF 在 MVVM 中设置数据上下文，并进一步将视图与控制器分离。

# javascript - 函数内的 JS 函数不会被调用

> ID：13617009
> 
> 赞同：1
> 
> 时间：2012-11-29T00:46:28.850
> 
> 标签：javascript, jquery, bind, mouseover

我有一个我希望是一个非常简单的问题。事实上，我认为这很愚蠢，我还没有弄清楚。我在这里有一个我的代码示例：

[http://jsfiddle.net/joeljoelbinks/pVSDL/](http://jsfiddle.net/joeljoelbinks/pVSDL/)

摘抄：

```
function lighten() {

jQuery(this).css('opacity', '0.5');
jQuery(this).html('DO IT!');
}

function darken() {

jQuery(this).css('opacity', '1');
jQuery(this).html('CLICK TO EXPAND');
}

function expand() {

jQuery(this).off('click', expand);
jQuery(this).off('mouseover', lighten);
jQuery(this).on('click', contract);
darken(); //this doesn't get called
jQuery(this).animate({width: '200px', height: '200px'}, 500);

}

function contract() {

jQuery(this).off('click', contract);
jQuery(this).on('mouseover', lighten);
jQuery(this).on('click', expand);
lighten(); //this doesn't get called
jQuery(this).animate({width: '100px', height: '100px'}, 250);

} 
```

这是我正在开发的网站上实现的扩展 div 设计的简化原型。除了在 expand() 或 contract() 函数中不调用 lighten() 和 darken() 函数外，一切都按设计工作。我尝试了多种方法从函数中调用它们，但它们不起作用。请注意，我将它们留在那里只是为了向您展示这就是需要解决的问题。在扩展/收缩功能中如何让它们触发？它们在绑定到我在开始时编码的鼠标悬停/鼠标悬停事件时工作，但不在其他函数中。如果我让它们执行一个 alert() 函数，那么它们可以在所有上下文中工作，但如果我试图用它们修改 JQuery(this) 则不会。

额外的问题：另外，看看 js 的顶部：我如何将两个变量绑定到相同的事件，而不是我必须单独绑定它们的当前代码？我已经尝试过 bind() 和其他几件事，但我只能在单独执行它们时让它们绑定，这违反了 DRY 原则；)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T00:50:00.437

您需要确保`this`指的是正确的事情：

```
darken.call(this); 
```

代替

```
darken(); 
```

的值`this`是在**每次**函数调用时确定的，因此您需要通过使用来确保它是正确的`.call()`。或者，您可以更改您的`darken()`and`lighten()`函数，以便它们采用参数来影响元素。

*编辑*-至于您的“奖励”，如果没有其他功能来“序列化”对您需要绑定到“点击”（或其他）的两个事件处理程序的调用，您将无法做到这一点。这当然是可能的，但它的价值值得怀疑。您总是可以只编写一个函数来调用有问题的两个函数（再次注意`this`适当地显式传递）。

# ruby-on-rails - 运行 rake db:seed 未从 seed.rb 加载

> ID：13617015
> 
> 赞同：23
> 
> 时间：2012-11-29T00:47:16.657
> 
> 标签：ruby-on-rails, ruby, sqlite

我正在尝试为一组足球队和足球位置播种，但奇怪的是，Rails 根本没有这样做。

```
rake db:seed --trace
** Invoke db:seed (first_time)
** Execute db:seed
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:abort_if_pending_migrations 
```

一切看起来都很好，但是当我打开我的网站时（以前工作得很好，我知道这不是那里的代码）没有记录。

我正在加载三个对象：团队、球员和位置。有趣的是，当我要组建一个新团队时，没有场地，但当我要组建新球员时，却有场地。

**Seeds.rb 看起来像这样：**

```
position = Position.create(:positionName => 'Quarterback', :positionShort => 'QB', :stance => 'offense')
team = Team.create( name:'Patriots', location:'New England', conference:'AFC', division:'East', wins:'5', losses:'3') 
```

让我知道您还需要看什么，我正处于缺乏经验和莫名其妙的错误的十字路口。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-29T00:52:05.083

我将提出一个建议，希望您会看到错误。在您的种子文件中使用`create!`而不是`create`. 如果模型不满足约束，这将导致操作抛出异常。试一试，看看是否有帮助。

```
position = Position.create!(:positionName => 'Quarterback', :positionShort => 'QB', :stance => 'offense')
team = Team.create!( name:'Patriots', location:'New England', conference:'AFC', division:'East', wins:'5', losses:'3') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-13T04:43:26.500

# 替代解决方案？

大家好，只是想添加一个可能的解决方案，以防上面的以下建议不起作用。

我必须重置我的数据库，否则 rails 'db:seed' 会以与上述相同的方式失败。

这对我有用：

```
rails db:migrate:reset
rails db:seed 
```

# jquery - 如何从 mvc4 webapi 使用 jquery 弹出下载

> ID：13617016
> 
> 赞同：0
> 
> 时间：2012-11-29T00:47:23.850
> 
> 标签：jquery, asp.net-mvc, rest, asp.net-web-api

我想从 api apicontroller 下载客户端文件：

```
 public HttpResponseMessage PostOfficeSupplies()
 {
    HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);
    result.Content = new StreamContent(File.OpenRead("D:\\Others\\Images\\file.png"));
    result.Content.Headers.ContentType = new MediaTypeHeaderValue     ("application/octet-stream");

    result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment");
    result.Content.Headers.ContentDisposition.FileName = "file.png";
    return result;    
} 
```

使用 jquery 为我弹出下载的客户端代码（视图）怎么样？

我的客户端：

```
 $.ajax(
                    {
                        url: 'api/MyAPI'
                    , type: "post"
                    , contentType: "application/octet-stream"
                    , data: ''
                    , success:
                    function (retData) {
                        $("body").append("<iframe src='" + retData + "' style='display: block;' ></iframe>");
                                        $("#sp123").text(retData);}

                    }); 
```

我只想弹出下载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:49:53.747

我不确定您是否能够使用 ajax 调用显示下载弹出窗口，但您可以通过提交表单来显示下载确认窗口

```
<form id="downloadForm" method="post" action="~/api/MyAPI">
 <!--use this if you want to pass any values !-->
 <!--  <input type="hidden" name="Param1" id="Param1HidenValue" /> !-->
</form> 
```

并从JavaScript这样称呼它

```
$('#downloadForm').submit(); 
```

# windows-phone-8 - Windows Phone 8 连接处理程序/互联网可用性

> ID：13617017
> 
> 赞同：12
> 
> 时间：2012-11-29T00:47:37.697
> 
> 标签：windows-phone-8

我的团队正在开发团队项目应用程序。目前，我们需要一个事件处理程序来检查连接状态（如果它是开/关的）。

我对`System.Net.NetworkInformation`命名空间寄予厚望，但不幸的是 wp8 不支持最重要的事情。

任何人都可以帮助我吗？

编辑1#

看来，我没有很好地说明我的问题。我正在使用 Mvvm light expresion，它不支持该命名空间，或者至少我无法添加它。

我是使用 VS 和 c# atm 的新手，也许我做错了什么，但只是当我尝试将引用添加到我的项目时它没有列出。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-29T01:35:12.853

我还没有在 WP8 上尝试过 System.Net.NetworkInformation 命名空间。但是新的 WP8 Windows.Networking.Connectivity Windows Phone 运行时命名空间工作得很好。

使用 Windows.Networking.Connectivity.NetworkInformation.NetworkStatusChanged 了解网络条件何时发生变化，并使用 Microsoft.Phone.Net.NetworkInformation.NetworkInterface 属性或 Windows.Networking.Connectivity.NetworkInformation 属性查看发生了什么。

```
 private async void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        PrintNetworkStatus();

        NetworkInformation.NetworkStatusChanged += NetworkInformation_NetworkStatusChanged;
    }

    void NetworkInformation_NetworkStatusChanged(object sender)
    {
        PrintNetworkStatus();
    }

    private void PrintNetworkStatus()
    {
        Dispatcher.BeginInvoke(() =>
        MessageBox.Show(NetworkInterface.NetworkInterfaceType +
                        Environment.NewLine +
                        NetworkInterface.GetIsNetworkAvailable()));
    } 
```

当我在我的 WP8 Lumia 920 上测试此代码片段时，它按预期工作。在我的手机仅在 WiFi 上启动时，我会看到以下消息框：

![已连接的消息框](../Images/857306f75fae054b732d79db4b382460.png)

一旦我关闭我的 WiFi 路由器并且手机上的 WiFi 连接丢失，我会看到以下消息框：

![Disconnected MessageBox](../Images/46eaf44a4ad420d7242b05f5a6d52e59.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-22T15:17:05.080

试试这个：

```
bool isNetwork=NetworkInterface.GetIsNetworkAvailable();
if(!isNetwork)
{
   //proceed with your code

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-11T06:01:47.303

在 App.xaml.cs 中，创建如下所示的属性

```
/// <summary>
/// check if network is available
/// </summary>
public bool IsNetworkAvailable
{
    get
    {
        return NetworkInterface.NetworkInterfaceType != NetworkInterfaceType.None;
    }
} 
```

您可以在项目中的任何位置使用此属性，如下面的代码所示

```
if (((App) Application.Current).IsNetworkAvailable)
{
         //Lines of Code
}
else
{
     MessageBox.Show("Not Connected to Network!", "Checking Connection!",
               MessageBoxButton.OK);     
} 
```

# python - 并行python，还是MPI？

> ID：13617019
> 
> 赞同：7
> 
> 时间：2012-11-29T00:48:05.450
> 
> 标签：python, parallel-processing, cluster-computing, mpi, smp

我有一个包含大量符号计算的代码（许多多个符号积分）。我还可以访问一台 8 核 cpu 计算机（具有 18 GB RAM）和一个小型 32 cpu 集群。我更喜欢留在我教授的 8 核电脑上，而不是在更有限的时间内使用他的集群去另一个教授的实验室，但是，我不确定它是否可以在 SMP 系统上运行，所以我正在寻找一个*并行***Python中的***工具*，可以在**SMP**和**Clusters**上使用，当然更喜欢一个系统上的代码可以**轻松且轻松地**修改以在另一个系统上使用。

到目前为止，我发现 Parallel Python (PP) 很有希望满足我的需求，但我最近告诉 MPI 也可以做同样的事情（pyMPI 或 MPI4py）。我不能批准这一点，因为在网上似乎很少讨论这个问题，只有[在这里](http://wiki.python.org/moin/ParallelProcessing)声明 MPI（pyMPI 或 MPI4py）仅可用于**集群**，如果我对“仅”是正确的！

“Parallel Python”是我唯一的选择，还是我也可以愉快地使用基于 MPI 的解决方案？哪一个更有希望满足我的需求？

**附言**。似乎他们都没有非常全面的文档，所以如果您知道他们的官方网站以外的一些链接可以帮助新手进行并行计算，如果您在回答中也提到它们，我将非常感激:)

* * *

**编辑**.

我的代码在另一个内部有两个循环，**外部循环**不能并行化，因为它是一种迭代方法（*递归解决方案*），每一步都取决于在上一步中计算的值。外循环包含*内循环*以及*3 个额外方程*，其计算取决于内循环的整个结果。但是，**内部循环**（包含每一步可计算的 12 个方程中的 9 个）可以安全地并行化，所有 3*3 方程彼此独立，仅取决于上一步。我所有的方程计算量都很大，因为每个方程都包含许多多重符号积分。似乎我可以并行化**内循环的 9 个方程**以及**这 9 个方程中的每一个方程中的积分计算，并将****其他 3 个方程中的所有积分与内循环**并行化。[**如果它可以帮助您更好地理解我的需求，您可以在此处**](http://ask.sagemath.org/question/1661/how-to-speed-up-a-code-containing-several-symbolic)找到我的代码，它是在*SageMath*中编写的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T00:52:14.587

我会查看`multiprocessing` [（doc）](http://docs.python.org/2/library/multiprocessing.html)，它提供了一堆用于生成和处理子流程的好工具。

引用文档：

> multiprocessing 是一个使用类似于 threading 模块的 API 支持生成进程的包。multiprocessing 包提供本地和远程并发，通过使用子进程而不是线程来有效地避开全局解释器锁。

从评论中我认为`Pool`这`map`将符合您的目的[（doc）](http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing.pool)。

```
def work_done_in_inner_loop(arg):
    # put your work code here
    pass

p = Pool(9)
for o in outer_loop:
     # what ever else you do
     list_of_args = [...] # what your inner loop currently loops over
     res = p.map(work_done_in_inner_loop,list_of_args])
     # rest of code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:41:47.990

似乎有一些合理的方法来设计它。

让我把你的工作称为主要工作，9个中间工作，以及中间工作可以衍生的许多内部工作。我假设中间工作在内部工作全部完成后有一个“合并”步骤，外部工作也是如此。

最简单的设计是主作业触发中间作业，然后在执行合并步骤之前等待它们全部完成。然后中间作业然后触发内部作业并等待它们全部完成，然后再执行合并步骤。

这可以与单个共享队列一起使用，但您需要一个在等待时不会阻塞工作池的队列，而且我不认为`multiprocessing`它`Pool`可以`Queue`开箱即用地做到这一点。一旦你的所有进程都在等待加入他们的子进程，就什么也做不了。

解决此问题的一种方法是更改​​为连续传递样式。如果您知道哪个中间作业将最后完成，您可以将句柄传递给其他中间作业并让它加入它们并执行合并，而不是外部作业。中间人同样将合并传递给他们最后的内部工作。

问题是你通常无法知道最后会完成什么，即使没有日程安排问题。所以这意味着您需要某种形式的共享（例如，信号量）或作业之间的消息传递来在它们之间进行协商。您可以在`multiprocessing`. 唯一的问题是它破坏了您工作的独立性，并且您突然要处理所有令人讨厌的共享并发问题。

另一种选择是为每个中间作业设置单独的池和队列，并在池之间进行某种负载平衡，以确保每个核心都运行一个活动进程。

或者，当然，实现比 's 更复杂的单个池`multiprocessing`，它执行负载平衡或协作调度，因此加入者不会阻塞核心。

或者一个超级简单的解决方案：过度调度，并为简单起见在上下文切换中付出一点代价。例如，即使您只有 8 个内核，您也可以运行 32 个工作程序，因此您有 22 个活动工作程序和 10 个等待工作程序。每个核心都有 2 或 3 个活跃的工作人员，这会减慢一点速度，但可能不会太糟糕——而且至少没有人闲置，而且除了将不同的参数传递给`multiprocessing.Pool`构造函数之外，您无需编写任何代码。

无论如何，`multiprocessing`它非常简单，并且几乎没有不适用于其他解决方案的额外概念。因此，在遇到砖墙或不撞墙之前，可能需要更少的时间来玩它，而不是提前尝试弄清楚它是否适合您。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T01:23:19.630

我最近遇到了类似的问题。但是，以下解决方案仅在以下情况下有效：（1）您希望在一组文件上单独运行 python 脚本，并且（2）脚本的每次调用都独立于其他脚本。

如果上述情况适用于您，最简单的解决方案是在 bash 中编写一个包装器，如下所示：

```
for a_file in $list_of_files
do
    python python_script.py a_file &
done 
```

'&' 将作为子进程运行前面的命令。优点是 bash 在继续 for 循环之前不会等待 python 脚本完成。

您可能希望对同时运行的进程数设置上限，因为此代码将使用所有可用资源。

# jquery - Fancybox 2.1.3 防止 iframe 使用滚动条

> ID：13617022
> 
> 赞同：2
> 
> 时间：2012-11-29T00:48:12.243
> 
> 标签：jquery, fancybox, scrollbar, fancybox-2

我正在使用 fancybox.js 2.1.3 版将外部内容放入 iframe。我通过放置 url 后跟一个 div id（例如[http://somesite.com#about](http://somesite.com#about)）来做到这一点，这似乎工作但问题是我还没有找到阻止fancybox滚动的方法。防止滚动是必要的，因为我将在同一个外部页面上放置多个 div id，然后将它们放置在带有 fancybox 的 iframe 中，并且我不想让查看者能够在 iframe 内向下滚动以查看其他 div id外部页面。

```
//fancybox window script
$(document).ready(function() {
    $(".various").fancybox({
        type        :'iframe',
            scrolling   : 'no',
        maxWidth    : 800,
        maxHeight   : 400,
        fitToView   : true,
        width       : '70%',
        height      : '70%',
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none',
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:13:50.427

您可以使用帮助程序禁用滚动，如下所示：

```
 iframe : {
        scrolling : 'no'
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T07:12:50.517

为什么不只加载所需的片段而不是整个文档？这样，您就不需要阻止滚动。

如果这是一个选项，您将需要更改加载文件的方式......一种 ajax 方法会比 iframe 更好地工作。

我建议使用 jQuery`.load()`仅提取`div`其 .... 引用的请求内部，`ID`因此如果您的目标`href="http://somesite.com#about"`是例如，那么我们需要调用`$("#targetContainer").load("http://somesite.com #about");`

为了实现这一点，我们需要将`hash`( )`#about`从`url``.load()``url``hash`

```
<a class="various" href="http://somesite.com#about">about</a> 
```

...这个脚本应该可以工作：

```
// open only selected div (hash)
var thisHref, thisHash;
$(".various").on("click", function() {
    thisHref = this.href.split("#")[0];
    thisHash = this.href.split("#")[1];
    targetContent = $("<div />").load(thisHref + " #" + thisHash);
    $.fancybox(targetContent, {
        maxWidth: 800,
        maxHeight: 400,
        fitToView: true,
        width: '70%',
        height: '70%',
        autoSize: false,
        closeClick: false,
        openEffect: 'none',
        closeEffect: 'none'
    }); // fancybox
    return false; // prevent default
}); // on 
```

请参阅**[此工作演示](http://www.picssel.com/playground/jquery/loadPartialContent_28nov12.html)**。第一个链接拉出整个文件，因此滚动条出现，而仅跟随请求的片段。

**注意**：由于浏览器安全限制，大多数“Ajax”请求都遵循**[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)**；请求无法从不同的域、子域或协议中成功检索数据。

顺便说一句，`.on()`需要 jQuery 1.7+

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-23T18:00:40.450

非常简单：只需添加

```
 .fancybox-inner {
    overflow: hidden !important;
  } 
```

滚动条不见了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-15T22:13:18.323

您可以简单地编辑 Fancybox 文件“jquery.fancybox.js”。

改变：

```
iframe : {
                scrolling : 'auto',
                preload   : true
            } 
```

进入这个：

```
iframe : {
                scrolling : 'no',
                preload   : true
            } 
```

检查 Fancybox 2.1.5。

# memcached - 如何增量刷新 memcached 节点以避免停机

> ID：13617023
> 
> 赞同：0
> 
> 时间：2012-11-29T00:48:53.327
> 
> 标签：memcached, flush, distributed-caching, spymemcached

我有一组 memcached 节点。刷新缓存当前会擦除所有节点，然后我正在运行的服务在重新缓存时暂时不可用。

有谁知道我如何刷新一个缓存，然后用新的缓存数据重新加载它，然后刷新下一个节点并重新加载它的数据，等等？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T17:51:35.743

我创建了我想要临时存储的值。完成填充后，我删除旧缓存并交换。

# ruby - 为什么这个 Ruby While 语句不起作用

> ID：13617024
> 
> 赞同：-1
> 
> 时间：2012-11-29T00:49:03.700
> 
> 标签：ruby, rspec, page-object-gem

背景：这是使用页面对象和 Rspec。页面，对象设置正确。基本上发生的事情是它跳过while语句并直接检查`label`页面上存在的变量。

它应该做的是检查`label`变量是否在页面上，如果没有，则等待 20 秒并刷新页面，然后再次检查最多 30 次，如果它在第 30 次失败，那么它应该一起失败。如果它找到它，那么它应该再次检查并通过它。

```
def check_label(label, current_page)
  labels_filter_element.click
  check_label_sla(label, current_page)
  current_page.text.should include label
end

def check_label_sla(label, current_page)
  t = 30
  i = 0
  while i < t
    if current_page.text.should include label
      return
    else
      sleep(20)
      current_page.refresh
      i += 1
    end
  end
end 
```

我认为正在发生的事情是 if`current_page.text.should include label`总是返回 TRUE，但我不确定。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:00:00.300

我做出以下假设：

*   您看到的行为是页面首次加载，labels_filter_element 被点击，标签不在页面上并且测试立即失败而没有刷新页面。
*   `label`是一个字符串

鉴于这些假设，问题在于 if 语句：

```
if current_page.text.should include label 
```

当执行 if 语句时，它将断言页面包含标签：

*   如果页面有标签，则执行 if 中的代码（即立即返回，并通过 in 的断言`check_label`）。
*   在页面没有标签的情况下，断言将抛出异常，导致测试立即失败（即不会执行 else 代码）。所以测试在方法内部失败`check_label_sla`，而不是在结束时`check_label method`（这使得 while 循环似乎不起作用）。

您希望 if 语句检查文本是否包含在内，而不做出断言。因此你想要：

```
if current_page.text.include? label 
```

所以你的`check_label_sla`方法会变成：

```
def check_label_sla(label, current_page)
  t = 30
  i = 0
  while i < t
    if current_page.text.include? label
      return
    else
      sleep(20)
      current_page.refresh
      i += 1
    end
  end
end 
```

或者您可以将其简化为：

```
def check_label_sla(label, current_page)
  30.times do
    return if current_page.text.include? label
    sleep(20)
    current_page.refresh
  end
end 
```

# python-2.7 - 为什么我的 Python 代码在写入和读取文件时会添加额外的字符

> ID：13617026
> 
> 赞同：1
> 
> 时间：2012-11-29T00:49:13.903
> 
> 标签：python-2.7

我只是在学习如何在 Python 中编码，并且无法找到解决方案或答案，说明为什么当我尝试读取刚刚写入的文件时带有额外的字符。

***代码***

```
#-*-coding:utf-8-*-
from sys import argv
from os.path import exists

script, source, copy = argv

print "We'll be opening, reading, writing to and closing a file"
opensource = open(source)
readsource = opensource.read()
print readsource
print "Great. We opened and read file"

opencopy = open(copy, 'w+') #we want to write and read file
opencopy.write(readsource) #copy the contents of the source file
opencopy.read()

opensource.close()
opencopy.close() 
```

***输出***

![在此处输入图像描述](../Images/348e5643c932be13209bc03e2058511e.png)

***内容***

```
test    °D                                                                                                               Îƒ ø U     ø U     ` 6    ` 6     0M     Ð 
```

我在 Windows 7 Professional 64bit 上运行 Python 2.7 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:35:06.577

这似乎是一个 Windows 问题，在写入后直接读取用“w+”打开的文件。从添加两个打印语句开始，如下所示：

```
opencopy.write(readsource) #copy the contents of the source file
print opencopy.tell()
opencopy.read()
print opencopy.tell() 
```

并在仅包含“test”+ CR + LF 作为内容的文件上运行它，您将得到输出：

```
We'll be opening, reading, writing to and closing a file
test

Great. We opened and read file
6
4098 
```

（如果您在 Linux 下执行相同操作，则读取在文件末尾之后不起作用（并且您从 opencopy.tell() 获得值 6 的两倍。）

您可能想要做的是：

```
print opencopy.tell()
opencopy.seek(0)
print opencopy.tell()
opencopy.read()
print opencopy.tell() 
```

然后你得到 6 和 6 作为tell() 的输出。现在这将导致读取您刚刚编写的单词“test”。

如果您不想阅读刚刚写的内容，请`opencopy.flush()`在 read 和 write 语句之间放置：

```
opencopy.write(readsource) #copy the contents of the source file
print opencopy.tell()
opencopy.flush()
opencopy.read()
print opencopy.tell() 
```

# sql - SQL Reporting Services - 绘制过去 3 个月的图表

> ID：13617029
> 
> 赞同：1
> 
> 时间：2012-11-29T00:49:43.790
> 
> 标签：sql, date, reporting-services, charts

我正在尝试为 SSRS 中的票务到达数字创建登录页面；当您打开页面时，理想情况下，它将显示最近 3 个月每月的票数。（我还想做一个仅包含当前月份和每天票数的图表）

我四处寻找 GETDATE 选项以避免使用日期输入参数，但它们似乎在 SSRS 中不起作用。

我现在使用的是：

```
Select Incident_Number, Assignee, 
CASE
datepart(m, dateadd(second,Submit_Date,'1969-12-31 16:00:00'))
WHEN 1 THEN 'January'
WHEN 2 THEN 'Febuary'
WHEN 3 THEN 'March'
WHEN 4 THEN 'April'
WHEN 5 THEN 'May'
WHEN 6 THEN 'June'
WHEN 7 THEN 'July'
WHEN 8 THEN 'August'
WHEN 9 THEN 'September'
WHEN 10 THEN 'October'
WHEN 11 THEN 'November'
WHEN 12 THEN 'December'
END as SubmitDate1

FROM Tbl_TABLE
WHERE (Assigned_Group = 'My Group' 
```

然后，我将使用 SubmitDate1 并为我的图表计算它。

任何关于如何完成这项工作的想法将不胜感激。

# excel - 查找一个值的最长/最小连续序列

> ID：13617034
> 
> 赞同：-1
> 
> 时间：2012-11-29T00:50:03.487
> 
> 标签：excel

我在一列中有一系列两个值（赢/输），并且想要一个公式来返回每个值的最长和最小连续序列。

例如，如果 A 列中的值为：

```
Win, Lost, Lost, Win, Win, Lost, Lost, Lost, Win, Lost, Lost, Lost, Lost, Lost, Win, Win, Win 
```

那么结果（在 B 列的某处）应该是：

最长获胜序列=3
最小获胜序列=1
最长失败序列=5
最小失败序列=2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:24:11.127

您是否可以使用一些额外的列（您可以将其隐藏或放置在更右侧）？如果是这样 - 然后插入一个空白行 1。然后使用从 B2 开始的这个公式，并向下拖动：

```
=if(and($A1="Win",$A2="Win"),B1+1,"") 
```

这个公式从 C2 开始，向下拖动：

```
=if(and($A1="Lost",$A2="Lost"),B1+1,"") 
```

进而

在 D2 中：`="Longest Win Sequence=" & max(B:B)`

在 D3 中：`="Shortest Win Sequence=" & min(B:B)`

在 D4 中：`="Longest Lost Sequence=" & max(C:C)`

在 D5 中：`="Shortest Lost Sequence=" & min(C:C)`

# c# - 无法从 memcached 中取回缓存的项目？

> ID：13617035
> 
> 赞同：1
> 
> 时间：2012-11-29T00:50:08.770
> 
> 标签：c#, memcached

我只是在我网络上的 ubuntu 系统上设置了 memcached。没有更改任何选项，所以一切都是默认的。我想尝试使用 Enyim 连接到服务器。它没有失败，但是当我尝试检索项目时，它们始终为空。我不是一个低水平的人，但我之前已经能够从wireshark中辨别出东西，所以我决定试一试。我无法辨别任何东西，但我注意到我发送的第一个 .Store() 命令实际上将网络数据包发送到了正确的地址。每个 .Store() 命令都没有做任何事情。

这是我的 app.config：

我已经尝试过“二进制”和“文本”协议，他们做了同样的事情。

这是我的 C# 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;
using Enyim.Caching;
using Enyim.Caching.Configuration;
using Enyim.Caching.Memcached;

namespace MemCacheTest
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            //var config = new MemcachedClientConfiguration();
            //config.Servers.Add(new IPEndPoint(new IPAddress(new byte[] {10, 0, 0, 1}), 11211));
            //config.Protocol = MemcachedProtocol.Binary;

            var mc = new MemcachedClient();
            for (var i = 0; i < 100; i++)
               mc.Store(StoreMode.Set, "Hello", "World");
            mc.Store(StoreMode.Set, "MyKey", "Hello World");
            Console.WriteLine(mc.Get("MyKey"));
            Console.WriteLine("It should have failed!!!");

            Console.ReadLine();

        }

    }
} 
```

有谁知道发生了什么或我如何确定出了什么问题？我觉得奇怪的是我没有收到任何异常，所以我在配置文件中设置了一个无效的 IP 地址。结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:35:12.733

添加到dasun答案。默认情况下安装 memcached 时，它配置为仅侦听“lo/localhost”接口。它是唯一真正拥有的安全内存缓存。即使您尝试在本地远程登录并指定 lo 接口，例如：

```
telnet 10.0.0.1 11211 
```

它会失败。要修复，您必须进入 memcached.conf 文件并注释掉

```
# -l 127.0.0.1 
```

然后重启服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:57:50.243

简短的回答：如果您的服务正在运行，请检查您的端口，它应该以某种方式被阻止。（您是否在 Ubuntu 防火墙（iptables）中为端口 11211 添加了例外？）

`telnet 10.0.0.1 11211`如果您的服务器上有 telnet 客户端，这将显示端口不可访问。

即使端口不可访问，Enyim 也不会向您抛出错误。是的，这很奇怪。

# windows - ansi c：windows下到gnuplot的管道

> ID：13617036
> 
> 赞同：1
> 
> 时间：2012-11-29T00:50:13.587
> 
> 标签：windows, pipe, gnuplot

希望你能帮助我解决这个问题。

我一直在linux下使用gnu plot没有问题，但是atm我正在为windows开发一个项目。

我已经为 windows 安装了 gnuplot 4.6 并将 gnuplot/bin 添加到我的系统路径中。我的代码编译并运行，但 gnuplot 没有显示任何图表。

我的代码看起来像这样：

```
FILE *pipe = _popen("pgnuplot -persist","w");
fprintf(pipe, "set title \"%s\"\n",plotname); 
fprintf(pipe,"plot '-' with lines\n");

for(i = 0; i < alot ;i++)
{
    fprintf(pipe, "%d %d \n", i, data[i]); 
}

fprintf(pipe, "e");
fflush(pipe);
fclose(pipe); 
```

我试过使用'-noend'命令，将终端设置为windows并使用wgnuplot.exe等，但到目前为止还没有运气。

任何帮助将不胜感激。

亲切的问候

# c# - 支持 Google Checkout 的 C# WinForm 应用程序？

> ID：13617038
> 
> 赞同：1
> 
> 时间：2012-11-29T00:50:19.207
> 
> 标签：c#, google-checkout

我正在开发一个项目，其中整个应用程序都是 C# WinForm 桌面应用程序。现在我们的客户想要支持表单上的操作，该操作导致用户通过他/她的 Google 结帐帐户被收费。我想知道是否可以使用 Windows 窗体提供类似于 Web 浏览器的结帐界面。如果是这样，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:57:58.987

你试过原生的winforms WebBrowser 控件吗？

WebBrowser 控件允许您在 Windows 窗体应用程序中托管网页和其他支持浏览器的文档。例如，您可以使用 WebBrowser 控件在应用程序中提供集成的基于 HTML 的用户帮助或 Web 浏览功能。此外，您可以使用 WebBrowser 控件将现有的基于 Web 的控件添加到 Windows 窗体客户端应用程序中。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)

# mysql - MySQL LEFT JOIN 请求找不到错误

> ID：13617039
> 
> 赞同：0
> 
> 时间：2012-11-29T00:50:23.867
> 
> 标签：mysql, datetime, left-join

我有一个表，其中包含一个名为 add_time 的日期时间列

我想做这个：

以 id 为 10 的元素之前添加的 5 个元素为例。

我只看到这样做的一种方法，这里是但 mysql 返回零行。

```
SELECT i.* 
FROM  `image` AS  `i` 
LEFT JOIN  `image` AS  `i2` ON i.id = i2.id
WHERE i2.id =1317
AND i.`add_date` < i2.`add_date` 
ORDER BY i.add_date DESC 
LIMIT 0 , 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:53:20.220

```
select *
from image
where date_add < (select date_add from image where id = 10)
order by date_add desc
limit 5 
```

# android - DownloadManager 下载在下载过程中“停止”

> ID：13617041
> 
> 赞同：1
> 
> 时间：2012-11-29T00:50:28.893
> 
> 标签：android, download, android-download-manager

我正在尝试通过 DownloadManager 进行下载。它调用得很好，似乎初始化得很好。我可以看到在我的“音乐”目录中创建了一个文件，它甚至开始增长一点。一旦达到 3-4 MB 左右，下载将取消并显示“下载”不成功。这可能是因为我从一个缓慢的来源下载，但它绝对是可用的。关于如何不退出/超时的任何想法。以下是我正在使用的功能。

万一很重要。我从一个异步方法调用它，我正在循环遍历一个地图，该地图将开始下载 20 个（左右）mp3 文件。

谢谢，克雷格

```
 private void download(String strUrl, String fileName){
    try {

        DownloadManager.Request request = new DownloadManager.Request(Uri.parse(strUrl));
        request.setDescription(strUrl);
        request.setTitle(fileName);request.allowScanningByMediaScanner();
        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
        request.setDestinationInExternalPublicDir(Environment.DIRECTORY_MUSIC,fileName);

        // get download service and enqueue file
        DownloadManager manager = (DownloadManager) ctx.getSystemService(Context.DOWNLOAD_SERVICE);
        manager.enqueue(request);
    } catch (Exception e) {
        e.printStackTrace();
        Log.i("ERROR: ", e.getCause().getMessage());
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:57:35.940

FWIW - 我从来没有找到这个问题的好答案，但是一旦我修复了我的网络，它似乎就消失了。它仍然偶尔发生，但它相对不常见并且似乎与网络相关。

# php - 使用 jQuery 解析 PHP Json 对象。

> ID：13617042
> 
> 赞同：4
> 
> 时间：2012-11-29T00:50:33.683
> 
> 标签：php, jquery, ajax, json

我正在使用 jQuery 的 AJAX 功能——我得到了很好的响应，但由于某些奇怪的原因，我无法解析其中的信息！

我正在调用以下内容：

```
console.log(results);   
console.log(results.data); 
```

我得到的是：

```
{"data":[{"member":"asdfasdf","status":"Invalid Email"}]}
undefined 
```

这是我的 jQuery：

```
$.ajax({
    type: "POST",
    url: "<?php echo Uri::base();?>ajax/add_members/organization",
    data: { 
        organization_id: <?php echo $organization->id;?>,
        members: $('#members').val(), 
        position: $('#position').val() 
    }
}).done(function (results) {
    // lets add them to the table
    console.log(results);   
    console.log(results.data);  
}); 
```

更新：`dataType: 'json',`是必需的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T00:57:54.060

仅仅因为您已成功检索到字符串`results`并不意味着它已经是一个对象。您需要将 JSON 字符串解析为一个对象（这可以作为快捷方式完成，具体取决于您的实际调用方法（即`getJSON`）。

你可能需要做这样的事情才能真正得到一个对象。

```
var obj = $.parseJSON(results); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T00:54:31.353

```
var obj = jQuery.parseJSON('{"name":"John"}');
alert( obj.name === "John" ); 
```

# android - 为 Spatialite Android 升级 libspatialite

> ID：13617044
> 
> 赞同：0
> 
> 时间：2012-11-29T00:51:00.623
> 
> 标签：android, sqlite, android-ndk, spatialite, geos

嗨，我查看了这个[http://code.google.com/p/spatialite-android/](http://code.google.com/p/spatialite-android/)关于使用 android 的 spatialite。我试过了，效果很好。

是否可以升级示例以使用 libspatialite-4.0.0 而不是 libspatialite-amalgamation-3.0.1？如果可能的话，有人可以指出一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:04:24.217

Spatialite-Android 由[第三方](http://www.agc.army.mil/)维护；您不能指望他们在新的 libspatialite 发布后仅仅四天就升级、测试和发布新版本。

最简单的升级方法是等待他们执行此操作。

似乎还没有人这样做，所以如果你不耐烦，你必须自己做。

# javascript - 网络音频 API，事件？

> ID：13617047
> 
> 赞同：13
> 
> 时间：2012-11-29T00:51:57.117
> 
> 标签：javascript, web-audio-api

是否可以将事件侦听器添加到网络音频 api 声音？我一直在寻找声音完成但找不到任何东西的事件或触发器。这是我想象它的工作方式：

```
soundSource = context.createBufferSource();
soundBuffer = context.createBuffer(audioData, true);
soundSource.buffer = soundBuffer;
soundSource.connect(volumeNode);
soundSource.addEventListener('ended', function(e){
    console.log("ended", "", e);
}, false);
soundSource.noteOn(context.currentTime); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-16T23:48:50.520

```
var isFinished = false;
var source = context.createBufferSource();
source.onended = onEnded;
function onEnded() {
    isFinished = true;
    console.log('playback finished');
} 
```

[看一下这个](https://developer.mozilla.org/en-US/docs/Web_Audio_API/Porting_webkitAudioContext_code_to_standards_based_AudioContext)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T11:30:58.910

不是今天，不是。我知道有关于添加某种事件系统的讨论，但它还没有在规范中（如果有的话）。但是，您可以查看缓冲区源上的playbackState 属性：[https ://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#AudioBufferSourceNode](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#AudioBufferSourceNode)

除此之外，您最好的选择是使用基于缓冲区长度的超时，并在触发时运行您的回调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-15T15:20:29.153

是的，看起来它已被添加：AudioBufferSourceNode.onended [https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode/onended](https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode/onended)

# nservicebus - 尝试与系统 [服务器名称] 建立安全连接时，间歇性 MSDTC 遇到错误 (HR=0x80000171)

> ID：13617060
> 
> 赞同：6
> 
> 时间：2012-11-29T00:53:29.680
> 
> 标签：nservicebus, msdtc

我们偶尔会在我们的服务器上看到错误“MSDTC 在尝试与系统 [servername] 建立安全连接时遇到错误 (HR=0x80000171)”。我们正在使用 NServiceBus。

重新启动服务器后，一切正常，一切正常。但是，在不确定的时间后，此错误随机发生，服务停止工作，一切都停止了。

有没有人遇到过这个？

# css - 无法应用填充

> ID：13617062
> 
> 赞同：0
> 
> 时间：2012-11-29T00:53:46.817
> 
> 标签：css

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T00:56:16.020

将其显示为一个块。

```
display: block; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T00:57:45.777

要补充上述内容，请将您的 CSS 更新为：

```
b {
     display: block;
     padding-top: 100px;
} 
```

否则元素将显示为行的一部分，因此您无法添加`padding-top`等。

# java - 扩展类，隐式超级构造函数未定义错误

> ID：13617063
> 
> 赞同：0
> 
> 时间：2012-11-29T00:53:57.517
> 
> 标签：java, processing

我正在使用 Java。我有 2 节课

```
class Card
class Deck extends Card 
```

我得到一个构造函数错误。

我必须为大学制作二十一点游戏，并且必须延长甲板课。

我能做些什么来解决这个问题？

```
class Card
{
    int rank, suit;
    String[] suits = { "hearts", "spades", "diamonds", "clubs" };
    String[] ranks  = { "Ace", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King" };

    Card(int suit, int rank)
    {
        this.rank=rank;
        this.suit=suit;
    }

    String toString()
    {
          return ranks[rank] + " of " + suits[suit];
    }

    int getRank() {
         return rank;
    }

    int getSuit() {
        return suit;
    }
}

class Deck extends Card{

    ArrayList <Card> cards;
    int numberdeck;
    Deck()
    {
        cards = new ArrayList<Card>();
        for (int a=0; a<=3; a++)
        {
            for (int b=0; b<=12; b++)
            {
                cards.add( new Card(a,b) );
            }
        }
    }

    Card drawFromDeck()
    {
        Random generator = new Random();
        int index= generator.nextInt( cards.size() );
        return cards.remove(index);
    }

    int getTotalCards()
    {
        return cards.size();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T00:56:54.337

子类中的构造函数应该调用超类中的相应构造函数，但是，在您的代码中找不到这样的构造函数。

要么向超类添加一个不带参数的构造函数，要么让子类中的构造函数调用超类中的构造函数。

`super(0, 0);`您可以使用子类构造函数主体的开头来调用超类的构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T00:59:50.267

`Deck`真的不应该延长`Card`。子分类编码一个*is-a*关系。狮子是动物，所以`Lion extends Animal`。您可以看出子分类是不合适的，因为 getRank() 和 getSuit() 方法在整副纸牌上毫无意义。

一副纸牌不是纸牌；一副牌*包含*其他牌。*包含*关系已经由数组`ArrayList <Card> cards`表示。

# c# - 在 MouseOver WPF 上更改标签的前景色

> ID：13617064
> 
> 赞同：0
> 
> 时间：2012-11-29T00:53:58.200
> 
> 标签：c#, .net, wpf, xaml, expression-blend

我有以下问题：我有一个`Button`，里面有一个，`StackPanel`里面有一个`ContentControl`和一个`Label`，`StackPanel`我已经设置了按钮的属性`IsMouseOver`并`IsPressed`在动作发生时更改按钮的颜色。但是，当鼠标悬停在按钮上时，我想反转标签的颜色。

这是我的按钮代码：（因为我觉得我的描述不够清楚）：

```
<Button Template="{StaticResource OnMouseOver}" ToolTip="Release" >
    <StackPanel Orientation="Horizontal">
        <ContentControl Template="{StaticResource Release}"/>
        <Label Content="Release" Foreground="#457345" />
    </StackPanel>
</Button> 
```

这就是我在按下按钮和鼠标悬停在按钮上时更改按钮属性的方式：

```
<ControlTemplate TargetType="Button" x:Key="OnMouseOver">
    <Border x:Name="border" Background="Transparent">
        <ContentPresenter ContentSource="Content" />
    </Border>
    <ControlTemplate.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter TargetName="border" Property="Background" Value="#A1CCA1"/>
        </Trigger>
        <Trigger Property="IsPressed" Value="True">
            <Setter TargetName="border" Property="Background" Value="#AFD8AF"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

郑重声明，我曾尝试`ControlTemplate`为我的厂牌做类似的事情，但没有奏效，我的厂牌在我做的时候就消失了。

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:32:23.407

尝试这个 ：

```
 <ControlTemplate TargetType="Button" x:Key="OnMouseOver">
<Border x:Name="border" Background="Transparent">       
    <StackPanel Orientation="Horizontal">
            <ContentControl />
            <Label x:Name="label" Content="Release" Foreground="#457345" />
        </StackPanel>
</Border>
<ControlTemplate.Triggers>
    <Trigger Property="IsMouseOver" Value="True">
        <Setter TargetName="border" Property="Background" Value="#A1CCA1"/> 
         <Setter TargetName="label" Property="Foreground" Value="#AFD8AF"/>     
    </Trigger>
    <Trigger Property="IsPressed" Value="True">
        <Setter TargetName="border" Property="Background" Value="#AFD8AF"/>
         <Setter TargetName="label" Property="Foreground" Value="#A1CCA1"/> 
    </Trigger>
</ControlTemplate.Triggers> 
```

```
<Button x:Name="button" Template="{StaticResource OnMouseOver}" ToolTip="Release" Height="42" VerticalAlignment="Bottom" Margin="235,0,127,143" >

    </Button> 
```

# coq - Coq 中的连词与蕴涵

> ID：13617065
> 
> 赞同：5
> 
> 时间：2012-11-29T00:53:59.207
> 
> 标签：coq

我目前正在阅读《[软件基础](http://www.cis.upenn.edu/~bcpierce/sf/)》一书。当定理被定义时，我经常看到我认为连词更有意义的含义链。例如，在定义鸽巢原则时，作者写道：

```
Theorem pigeonhole_principle: ∀{X:Type} (l1 l2:list X),
  excluded_middle →
  (∀x, appears_in x l1 → appears_in x l2) →
  length l2 < length l1 →
  repeats l1. 
```

如果它看起来更像这样，这个定义对我来说会更有意义：

```
Theorem pigeonhole_principle: ∀{X:Type} (l1 l2:list X),
  (excluded_middle /\
  (∀x, appears_in x l1 → appears_in x l2) /\
  length l2 < length l1) →
  repeats l1. 
```

为什么第一个版本是正确的？为什么连词不更合适？

这只是一个例子。更一般地说，我在问为什么在 coq 中似乎回避连词以支持含义链。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T00:58:10.737

这是[函数 currying](http://en.wikipedia.org/wiki/Currying)的定理证明者版本。

总而言之，这两个表达式都是正确的（它们是等价的）。

一个人说：给我一个“排斥的中间”。现在给我假设 2。现在给我假设 3。好的，这是一个属性“repeats l1”。

另一个说：给我一个“排除的中间”，以及假设 2 和假设 3。好的，这里有一个属性“repeats l1”。

Coq 等证明助手的用户和实现者也是函数式程序员，对他们来说，curried 版本和 uncurried 版本一样自然。

# java - 无法在 Java 中初始化二维对象数组

> ID：13617066
> 
> 赞同：2
> 
> 时间：2012-11-29T00:54:15.563
> 
> 标签：java, arrays, object

我正在尝试制作一个战舰游戏，为此我需要一个 2D 正方形数组，这是一个人可以选择的地方。然而，当我运行我的程序时，当我尝试调用 resetBoard() 函数时出现空指针异常。

战舰等级：

```
public class Battleship
{
    private Square[][] squares;
    private boolean aircraftCarrierSunk;
    private boolean battleshipSunk;
    private boolean submarineSunk;
    private boolean patrolBoatSunk;
    private int boardSize;
    public int turns;

    public Battleship(int x)
    {
        squares = new Square[x][x];
//         for(int i = 0; i < boardSize; i++) //not sure if I need this
//         {
//             for(int j = 0; j < boardSize; j++)
//             {
//                 squares[i][j] = new Square();
//             }
//         }
        boardSize = x;
        aircraftCarrierSunk = false;
        battleshipSunk = false;
        submarineSunk = false;
        patrolBoatSunk = false;
    }

    public void resetBoard()
    {
        for(int i = 0; i < boardSize; i++)
        {
            for(int j = 0; j < boardSize; j++)
            {
                squares[i][j].setContents(0);
            }
        }
    } 
```

司机：

```
public static void main (String [] args)
{
    Battleship game = new Battleship(5);        // play on a 5 by 5 board

    System.out.println("Battleship!");
    System.out.println("-----------\n");

    for (int gameNumber = 1; gameNumber <= 2; gameNumber++)
    {
        game.resetBoard(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T01:00:10.163

明白了-取消注释中的行`Battleship`，然后移到`boardSize = x;`该 for 循环之上。

# javascript - 为什么我的 jPlayer 不能在 Chrome 中运行？

> ID：13617067
> 
> 赞同：1
> 
> 时间：2012-11-29T00:54:17.007
> 
> 标签：javascript, wordpress, jplayer

我正在为我运行的音乐博客制作音频播放器，但我似乎无法让 jPlayer 在我的网站上正常工作。现在，我已将其设置为只有管理员才能查看播放器（因为它不起作用），但我制作了一个小测试网站，以便您也能明白我的意思。

该播放器在 Firefox 中运行良好，但在 Chrome 中无法正常运行。我有一种感觉，它与它用于 Firefox 的 flash 回退有关，但我不明白为什么它也不能在 Chrome 上运行。它似乎根本不想加载/流式传输歌曲。

我制作了一些功能，因此可以在您正在查看的任何页面上动态添加歌曲。我相信我正确设置了所有内容。我使用一个数组作为歌曲的标题和 MP3 的 URL，它们是由 WordPress 动态添加的。每次添加新歌时，我都会调用下面的 JavaScript 函数 add_song...

```
function add_song(title, mp3)
{
    theTitles[index] = title;
    theMP3s[index] = mp3;
    index++;
} 
```

然后对于 document.ready 函数，我使用我创建的另一个名为 get_playlist() 的函数来设置我的 jPlayer；

```
function get_playlist()
{
    var playlist = new Array();

    for(var i = 0; i < theTitles.length; i++)
    {
        playlist[i] = {title: theTitles[i], mp3: theMP3s[i]};
    }
    return playlist;
}

$(document).ready(function()
{
    var playlist = get_playlist();
    new jPlayerPlaylist({
        jPlayer: "#jquery_jplayer_1",
        cssSelectorAncestor: "#jp_container_1",
        oggSupport:false
    }, playlist, {
        swfPath: "/js",
        supplied: "mp3",
        wmode: "window"
    });
}); 
```

我有一种感觉，我错过了一些简单的东西，为什么它可以在 Firefox 而不是 Chrome 上运行，但我不知道它是什么。这是我到测试站点的[网址](http://www.startingtofeelit.com/text.php)，因此如果您有任何问题，您可以自己查看播放器。

谢谢大家！

# java - 更快或更简洁的方法来确定是否在 Android 上安装了一个包

> ID：13617068
> 
> 赞同：5
> 
> 时间：2012-11-29T00:54:29.917
> 
> 标签：java, android

我知道我可以捕获`NameNotFoundException`from 调用`PackageManager.getPackageInfo`或遍历`PackageInfo`返回的列表`PackageManager.getInstalledPackages`以了解是否安装了特定包，但这两者看起来要么冗长要么丑陋。在我的个人手机上，我安装了 300 多个软件包，所以我不想每次需要检查时都必须执行该操作。捕获异常作为执行应用程序逻辑的一种方式只会让我感觉整个人都错了。我是否在某处遗漏了 isPackageInstalled 方法，还是只需要使用上述技术之一自己实现它？如果是后者，哪个会被认为是更快和更少资源密集型的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T02:25:40.680

由于[`PackageManager.getInstalledPackages()`](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstalledPackages%28int%29)返回 a `List`，因此您无需手动循环遍历它。您可以使用[`List.contains()`](http://developer.android.com/reference/java/util/List.html#contains%28java.lang.Object%29)或[`List.containsAll()`](http://developer.android.com/reference/java/util/List.html#containsAll%28java.util.Collection%60?%62%29)在一行代码中完成任务。当然，这不会改变效率，因为这两种方法本身都可能包含一个循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T02:55:28.793

如果使用 API 确实让你犯了错误，那么你可能会研究涉及以下内容的黑客攻击

获取 PM 列表的 Bash shell 表达式 Java 运行时表达式 Java 管道、缓冲区和流 Java NIO Java grep

所以 bash 表达式将是：

pm 列出包 -f | sed 's/^package.//' | awk -F"=" ' { 打印 $2" "$1 } ' | 种类

以及以可能更快的方式处理“pm list”中的标准输出的参考列表......

[管道缓冲区](http://docs.oracle.com/javase/6/docs/api/java/io/PipedInputStream.html)

[蔚来/grep](http://docs.oracle.com/javase/1.4.2/docs/guide/nio/example/index.html)

[运行时/流](https://stackoverflow.com/questions/6018126/problem-with-runtime-exec-and-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T03:57:20.820

我编写了一些基准测试并测试了捕获异常与获取已安装包并循环它们的几种不同方法。这是我的结果

1.  在所有情况下，无论是否安装了请求的包，调用 PackageManager.getPackageInfo 并捕获 NameNotFoundException 都需要 1 到 4 毫秒，并且我确保还包括首次调用 PackageManager 以执行特定应用程序的情况并作为后续调用，以防框架在每次应用启动时对这些信息进行任何缓存。

2.  在所有情况下，调用 PackageManger.getPackageInfo 也需要 1 到 1.5 秒。

调用 getPackageInfo 并捕获异常以确定是否未安装包是迄今为止更快的检查方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T02:06:38.080

处理 NameNotFoundExcepetion 不应该让你觉得“完全错了”恕我直言。根据[文档](http://developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationInfo%28java.lang.String,%20int%29)，如果自 api 级别 1 起包不存在，则会引发此异常。使用 try/catch 语句与使用 if/then 语句测试空值非常相似。

在这种情况下，不应将其视为解决方法或 hack，因为您正在使用记录在案的和预期的异常返回值来确定包是否存在。

我认为这种方法比遍历 getInstalledPackages() 返回的列表要快。但是，我不知道 android 在返回 NameNotFoundExcepetion 之前采取了哪些步骤。这将是一个有趣的基准测试。

我不知道有任何其他实用的方法来测试已安装的包。

# .net - Mono 中的尾调用消除

> ID：13617071
> 
> 赞同：19
> 
> 时间：2012-11-29T00:54:40.000
> 
> 标签：.net, mono

我有一个大量使用尾递归（用 F# 编程）的 .NET 4.0 应用程序。它在 .NET VM 上运行良好，但在 Mono-3.0.1 上用完堆栈。

我试过跑步，`mono --optimize=tailc`但这似乎并没有改变任何东西。

有没有办法强制单声道消除尾音？有没有办法增加单声道的最大堆栈大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T22:51:13.423

最近有一个非常相似的问题，提供了有用的答案：[Stack size under Mono](https://stackoverflow.com/q/19817790/2157640)

正如 Robert Harvey 在评论中已经指出的那样，Mono 已经破坏/不完整的 F# 尾调用支持（[错误 476785：F# 中的尾调用支持](https://bugzilla.novell.com/show_bug.cgi?id=476785)）。此问题的修复[在 Mono 的运行时正在进行的项目列表中](http://www.mono-project.com/Runtime_Projects#Runtime_Fixes)。

堆栈大小可以使用`System.Threading.Thread`构造函数或在 PE 标头中增加。但是，这种`System.Threading.Thread`方式[在 Mono 中不起作用](https://stackoverflow.com/a/19909421/2157640)。要更改 PE，您可能[需要 MS Visual Studio](http://social.msdn.microsoft.com/Forums/vstudio/en-US/8a5e235b-5042-4b96-959c-497e865b73ba/how-to-increase-stack-size-of-a-net-exe-in-windows?forum=netfxbcl)，因为它可能没有其他选择[`editbin.exe /stack`](http://msdn.microsoft.com/en-us/library/35yc2tc3.aspx)。

# xcode - 用于指定 API 目标的自动化测试和 Xcode 配置文件

> ID：13617081
> 
> 赞同：3
> 
> 时间：2012-11-29T00:56:10.203
> 
> 标签：xcode, xcodebuild, ios-ui-automation

所以我正在编写从命令行运行的自动化测试来测试我的 iOS 应用程序的 UI。我有 bash 脚本可以清理和构建项目并运行我的 UI 自动化测试。

问题是，我希望命令行脚本能够更改我的 Xcode 项目中的 C 标志，以确定我的应用程序指向哪个服务器。例如：

```
./run-test -target "Debug-Server" 
```

将 C-Flag SERVER_ADDRESS 的值更改为 DEBUG_SERVER，同时：

```
./run-test -target "QA-Server" 
```

将 C-Flag SERVER_ADDRESS 的值更改为 QA_SERVER

为了做到这一点，我计划创建一个 .xcconfig 文件，该文件被输入到 xcodebuild 中，它将在我的代码中设置 C 标志以指向正确的服务器。像这样的东西：

```
xcodebuild -target <TARGET_NAME> -configuration Debug-QA.xcconfig -sdk "$DEVICE_SLUG""$CURRENT_SDK" DSTROOT=. clean build 
```

我真的一点也不熟悉 .xcconfig 文件，所以我对它们有一些疑问。

1.  我是否必须在我的 .xcconfig 文件中描述每个构建设置？还是 Xcode 使用某种“默认”值？
2.  有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T02:18:06.413

我想通了，使用了 .xcconfig 和 #ifdef 语句的组合：

在我声明服务器的配置文件中：

```
#ifdef USE_DEV
#define SERVER_ADDRESS   DEV_SERVER_ADDRESS   //USED IN AUTOMATED TESTING DEBUG SERVERS

#elif defined USE_QA
#define SERVER_ADDRESS   QA_ADDRESSS          //USED IN AUTOMATED TESTING STAGING SERVERS 

#elif defined USE_LIVE
#define SERVER_ADDRESS   LIVE_SERVER_ADDRESS  //USED IN AUTOMATED TESTING LIVE SERVERS

#else
#define SERVER_ADDRESS   DEV_SERVER_ADDRESS   //DEFAULT VALUES
#endif 
```

然后我使用了三个 .xcconfig 文件，其中说明了以下内容：

# 开发者.xcconfig：

```
GCC_PREPROCESSOR_DEFINITIONS = USE_DEV 
```

# QA.xcconfig：

```
GCC_PREPROCESSOR_DEFINITIONS = USE_QA 
```

# LIVE.xcconfig：

```
GCC_PREPROCESSOR_DEFINITIONS = USE_LIVE 
```

# ruby-on-rails - 如何在控制器/视图之外获取应用程序的域/子域？

> ID：13617086
> 
> 赞同：0
> 
> 时间：2012-11-29T00:56:30.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何在不处于控制器/视图中的情况下获取应用程序的域和子域？

需要这个的原因是我在初始化程序中订阅 process_action.action_controller 通知，并且我需要该初始化程序中的应用程序 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:14:17.183

如果 URL 的主机部分（域、子域）是动态的……也就是说“取决于请求”，那么当然，获取它的唯一方法是在请求本身的上下文中，即控制器和意见知道。

所以我假设应用程序有一个已知的主机，可能依赖于运行时环境（生产、测试​​、开发等），或者可能基于服务器环境，但其他方面是静态的。在这种情况下，您可以定义一个包含名称的自定义配置变量，正如 Jack Pratt 最近对这个 SO 问题的回答中所述：[如何在 rails 中定义自定义配置变量](https://stackoverflow.com/questions/1450285/how-to-define-custom-configuration-variables-in-rails)。

# php - Rekognition Facial Recognition 使用 PHP 解析 JSON

> ID：13617087
> 
> 赞同：2
> 
> 时间：2012-11-29T00:56:35.540
> 
> 标签：php, json, api, parsing, pattern-recognition

> **可能重复：**
> [在 php 中解析 Json](https://stackoverflow.com/questions/4035742/parse-json-in-php)

我使用 API 将提交的用户图像卷曲到远程服务器，响应是 JSON，我不知道如何解析它。

这是我的 php CURL 文件

```
<?php
$api_key = 'xxxxxx';
$api_secret = 'xxxxx';
$Dirty_uid = $_GET['uid'];
$uid = htmlentities($Dirty_uid);
$Dirty_img = $_GET['img'];
$img = htmlentities($Dirty_img);

$query2 = 'http://rekognition.com/func/api/?api_key='.$api_key.'&api_secret='.$api_secret.'&jobs=face_recognize&urls='.$img.'&name_space=xxx&user_id=xxx';

$ch2 = curl_init();
curl_setopt($ch2, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch2, CURLOPT_URL, $query2);    // get the url contents

$data2 = curl_exec($ch2); // execute curl request
curl_close($ch2);

$json2 = json_decode($data2);
print_r($json2)
?> 
```

这是返回的 JSON 数据示例（通用）

代码：

```
{
url: "http://farm3.static.flickr.com/2566/3896283279_0209be7a67.jpg",
face_detection: [
  {
      boundingbox:
      {
        tl: {
          x: 50,
          y: 118
         },
         size:{
          width:232;
          height:232;
         }
      }
      name: "mona_lisa:0.92,barack_obama:0.02,mark_zuckerberg:0.01,"
  }
  ]

usage: {
status: "success",
quota: 999,
api_id: "xxx"
}
} 
```

如果 json 字符串显示“名称”，我需要我的脚本仅在数字（在 : 之后高于阈值（现在让我们说 .70）时打印用户名。

我该怎么做呢？我之前使用过 XML api，并且使用代码返回数据很简单：

```
$xml = simplexml_load_string($data); 
```

类型的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:00:46.640

你已经拥有了大部分。你已经`json_decode`编辑了结果。现在您只需要访问数据

```
$name = $json2->face_detection[0]->name 
```

# jquery - 如何使用 jsredner 遍历嵌套数组

> ID：13617088
> 
> 赞同：0
> 
> 时间：2012-11-29T00:56:49.513
> 
> 标签：jquery, arrays, nested, jsrender

我有以下json：

```
[
   {
      "Name":"Billy in the Lowground",
      "Key":"A",
      "chords":[
         [
            "G",
            "",
            "D",
            ""
         ],
         [
            "C",
            "",
            "G",
            ""
         ],
         [
            "C",
            "",
            "G",
            ""
         ],
         [
            "A",
            "",
            "D",
            ""
         ],
         [
            "G",
            "",
            "D",
            ""
         ],
         [
            "C",
            "",
            "G",
            ""
         ],
         [
            "C",
            "",
            "G",
            ""
         ],
         [
            "D",
            "",
            "G",
            ""
         ],
         "Em",
         "",
         "",
         "B7",
         "Em",
         "",
         [
            "C",
            "",
            "G",
            ""
         ],
         [
            "D",
            "",
            "G",
            ""
         ]
      ]
   }
]; 
```

在和弦下，我将每个小节映射到和弦数组中的一个点，然后每个小节都是另一个数组，对应于小节中的节拍数。在本例中为 4 拍。

所以我在弄清楚如何迭代嵌套数组时遇到了问题，但是当我写这个问题时，我想我找到了答案，但这是访问和迭代嵌套数组的最佳方式：

```
 <script id="chord-tpl" type="text/x-jsrender">  
                {{for chords}}
                    <tr>
                        {{for #parent.data[#index]}}

                            <td>{{:#parent.data[#index]}}</td>
                        {{/for}}
                    </tr>
                {{/for}}

        </script> 
```

另外我想知道是否有一种方法可以查看您在数组上迭代了多少次并根据 # 次做某事，

例如

```
for( i=0; i == chords.length; $i++ ) {
   if( i % 4 ) {
       // start new table row
   }
   else {
       // echo out table cell
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:44:18.273

> 这是访问和迭代嵌套数组的最佳方式吗

您可以将模板修改为：

```
{{for chords}}
    <tr>
       {{for #data}}
           <td>{{:#data}}</td>
       {{/for}}
    </tr>
{{/for}} 
```

* * *

> 我想知道是否有一种方法可以查看您对数组进行了多少次迭代并根据 # of times 执行某些操作

您允许引入一个变量。

```
{{for chords ~count=chords.length}} 
```

您可以在[此处找到更多详细信息](http://borismoore.github.com/jsrender/demos/scenarios/02_separators-scenario.html)

* * *

您还可以使用[“辅助函数”](http://borismoore.github.com/jsrender/demos/step-by-step/09_helper-functions.html)调试模板 此代码段可以帮助您

```
$.views.helpers({
  debug:function(){
     console.dir(this);
  }
}); 
```

# android - jQuery Mobile ListView

> ID：13617091
> 
> 赞同：0
> 
> 时间：2012-11-29T00:57:09.363
> 
> 标签：android, jquery-mobile

我用于提取一些数据以在列表视图中使用的代码有 2 个奇怪的问题。这是我的javascript：

```
function getOrders(status, url) {
    $(function () {
        //check if url from pagination
        if (!url) {
            url = api_url + '/orders/?callback=?&status=' + status;
        } else {
            url = root_url + url + '&callback=?';
        }
        $.mobile.loading('show');
        $.getJSON(url, null, function (d) {
            //declare a variable with which to build our output (it's best to buffer output and only do one append at the end since DOM manipulation is CPU expensive)
            var output = '';

            //iterate through the data (we could also get rid of the jQuery here by using `for (key in data) {
            $.each(d.objects, function (index, value) {

                output += '<li><a id="' + value.reference + '" href="view_order.html" class="view_order"><h3>' + value.reference + ' - ' + value.client.company + '</h3><p>' + value.order_date + ' ' + value.user.username + '</p></a><a href="asd" data-icon="gear"  data-iconpos="notext"></a></li>';
            });
            $('#orders_list').html(output).listview('refresh');
            //if paginated, update next button
            if (d.meta.next) {
                $("#id_ordersNext").attr('href', d.meta.next);
                $("#id_ordersNext").show();
            } else {
                $("#id_ordersNext").hide();
            }
            if (d.meta.previous) {
                $("#id_ordersPrevious").attr('href', d.meta.previous);
                $("#id_ordersPrevious").show();
            } else {
                $("#id_ordersPrevious").hide();
            }
            $("#id_ordersTotal").html(d.meta.total_count);
            $.mobile.loading('hide');
        });
    });
}

$(function () {

    //bind the nav
    $(".order_nav").die();
    $(".order_nav").live('click', function () {
        $(".order_nav").each(function () {
            $(this).removeClass('ui-btn-active');
        });
        $(this).addClass('ui-btn-active');
        getOrders($(this).attr('href'));
        return false;
    });

    //bind the view order
    $(".view_order").die();
    $(".view_order").live('click', function () {
        //save var
        window.viewOrderReference = $(this).attr('id');
        $.mobile.changePage("view_order.html");
    });

    $("#id_ordersNext,#id_ordersPrevious").die();
    $("#id_ordersNext,#id_ordersPrevious").live('click', function () {
        getOrders(null, $(this).attr('href'));
        return false;
    });

    //default view
    getOrders('Order Placed');
}); 
```

这是我用于通过 JQMobile 加载的页面的 html：

```
<div data-role="page" data-needs-auth='true'>
    <script src="js/list_orders.js"></script>
    <div class="headerDiv" data-role='header' data-theme='b'><a href="index.html" data-icon="home">Home</a>

        <h1>Jubilee Distributors</h1>
        <a href="login.html" class="logged_in" data-icon="home">Login</a></div>
    <div data-role='navbar'>
        <ul>
            <li><a href="Order Placed" class='ui-btn-active order_nav' data-ajax="false">Placed</a></li>
            <li><a href="Order Picked" class='order_nav' data-ajax="false">Picked</a></li>
            <li><a href="Order Delivered" class='order_nav' data-ajax="false">Delivered</a></li>
        </ul>
    </div>

    <div data-role="content">
        <ul data-role='listview' id="orders_list" data-filter="true"><li>No records found</li></ul>
        <p><a href='#' id='id_ordersPrevious' style='display:none;' data-role="button" data-icon="arrow-l" data-iconpos="notext" data-inline="true">Previous</a> <span id='id_ordersTotal' class='record-count'></span> records found <a href='#' id='id_ordersNext' style='display:none;' data-role="button" data-icon="arrow-r" data-iconpos="notext" data-inline="true">Previous</a>
        </p>
    </div>
    <div id='footerDiv' data-role="footer"></div>
</div> 
```

这一切在桌面上的任何浏览器中都可以正常工作，但是当我在 Android 设备上运行它时，会发生 2 件事，或者说不会。

1.  $(function() - getOrders('Order Placed') 中的最后一行似乎没有执行，或者如果执行了，它不会使用返回的结果更新列表。如果我单击第一个带有“已下订单”它没有问题。
2.  addClass 实际上并没有添加类。

就像我说的，这在任何桌面浏览器中都可以正常工作，但在 Android 设备上却不行。

有任何想法吗？

**编辑：**修复了第二个问题，但是第一个问题仍然存在。如果我导航到页面，然后离开它，然后再返回，它就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:26:21.520

通过将 dom 就绪函数更改为 pageinit 来修复此错误。

# c# - 安装完成后以安装用户身份运行程序

> ID：13617092
> 
> 赞同：0
> 
> 时间：2012-11-29T00:57:25.777
> 
> 标签：c#, .net, windows-installer

我们使用一个 msi 来安装我们的程序。我们有类似于以下的自定义安装代码：

```
 using System;
 using System.Configuration.Install;

[RunInstaller(true)]
public partial class Installer1 : Installer
{

    protected override void OnAfterInstall(IDictionary savedState)
    {
        base.OnAfterInstall(savedState);
        MyProgram.Start();
    }
} 
```

问题是程序将以 SYSTEM 用户身份启动，因为 msiexec 以 SYSTEM 身份运行。是否有一种明智的方法可以让程序以最初执行 msi 而不是 SYSTEM 的用户身份启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:03:36.100

看看这篇关于如何在安装结束时启动非提升进程的文章

[在安装结束时启动非提升进程](http://www.codeproject.com/Articles/18946/High-elevation-can-be-bad-for-your-application-How)

**另一种选择是执行以下操作**

要在安装完成后运行任何应用程序，请右键单击您的安装项目，单击自定义操作。然后右键单击提交，添加自定义操作，然后选择您要运行的文件。请注意，它必须已经在您的应用程序文件夹中，这在您的情况下应该不是问题，因为您无论如何都在运行您的程序。只需选择项目的输出。

然后，单击这个添加的 .exe，并将 InstallerClass 更改为 false。这是至关重要的，因为否则它将寻找安装程序。

# entity-framework - 具有实体框架实体与业务对象的存储库模式

> ID：13617108
> 
> 赞同：1
> 
> 时间：2012-11-29T00:59:35.630
> 
> 标签：entity-framework, design-patterns, repository-pattern

在与存储库模式一起使用的 EF 代码优先实现中，存储库应该从域模型返回业务对象，还是从数据模型返回简单实体？

据我所知，存储库的目的是返回业务对象，而不是实体，以便您可以使用它们。但是我发现的大多数代码示例都是返回数据模型，这对我来说似乎是个坏主意，因为如果数据源发生变化怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:42:47.767

如果您使用 CodeFirst 开发，您也可以轻松地将业务对象用作数据模型。您可以在单独的 DLL 中编写 Ef 映射，以消除 EF 对业务模型的依赖性。如果您想将数据源更改为另一个而不是 EF，您也可以为此保留相同的业务（域）类。

# javascript - 我无法将 Source 按钮添加到 CKEditor 4 的工具栏

> ID：13617111
> 
> 赞同：5
> 
> 时间：2012-11-29T00:59:54.043
> 
> 标签：javascript, ckeditor

我在将 Source 按钮添加到 CKEditor 4 的工具栏时遇到问题。我今天刚刚下载了新的 CKEditor。

我正在使用一个名为 oConfig 的配置对象：

```
oConfig.toolbar = 'Custom';
oConfig.toolbar_Custom = [
  ['Bold', 'Source', 'Italic']
]; 
```

工具栏仅显示粗体和斜体按钮。[CKEditor 文档中的这个例子](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-toolbar)告诉我它应该可以工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T16:43:03.960

发生这种情况的原因有两个：

1.  您已经下载了基本包，其中不包含[sourcearea插件。](http://ckeditor.com/addon/sourcearea)

2.  您正在内联模式下使用 CKEditor。源代码模式在内联模式中尚不可用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-30T17:53:27.827

未来的 googlers，对于 CKEditor v4.2 现在有一个插件可以在内联编辑模式下查看源代码。

[http://ckeditor.com/addon/sourcedialog](http://ckeditor.com/addon/sourcedialog)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-04T22:24:28.300

这是我制作的一个插件：

首先，在里面`ckeditor/plugins/`创建一个名为“htmlSource”的新文件夹，在其中创建一个名为“plugin.js”的文件，并在该文件中粘贴以下代码：

```
//-----------------------------Start Plugin Code-------------------------

plugInName = 'htmlSource';

CKEDITOR.plugins.add(plugInName,
{  
  init: function (editor) {

    editor.addCommand('htmlDialog', new CKEDITOR.dialogCommand('htmlDialog'));
    editor.ui.addButton(plugInName, {
        label: 'Html Source',
        icon: 'http://www.example.com/images/btn_html.png',
        command: 'htmlDialog'
    });

    CKEDITOR.dialog.add('htmlDialog', function (editor) {
        return {
            title: 'Fuente Html',
            minWidth: 600,
            minHeight: 400,
            contents: [
                        {
                            id: 'general',
                            label: 'Settings',
                            elements:
                            [
                            // UI elements of the Settings tab.
                                {
                                type: 'textarea',
                                id: 'contents',
                                rows: 25,
                                onShow: function () {
                                    this.setValue(editor.container.$.innerHTML);

                                },
                                commit: function (data) {              //--I get only the body part in case I paste a complete html
                                    data.contents = this.getValue().replace(/^[\S\s]*<body[^>]*?>/i, "").replace(/<\/body[\S\s]*$/i, "");
                                }

                            }
                                ]
                        }
                    ],

            onOk: function () {
                var data = {};
                this.commitContent(data);
                $(editor.container.$).html(data.contents);
            },
            onCancel: function () {
                //  console.log('Cancel');
            }
        };
    });
}

});

//--------------------Plugin Code Ends Here-------------------- 
```

请注意，有一个名为 icon 的参数，您必须在其中设置插件按钮图像的 url，我只是放了一个示例 url (' [http://www.example.com/images/btn_html.png](http://www.example.com/images/btn_html.png) ') 你必须使用有效的一个看到插件按钮。

要在 ckeditor 工具栏中设置此插件，您必须在 config.js 文件中对其进行配置，例如：

```
CKEDITOR.editorConfig = function (config) {
    config.plugins =
    'htmlSource,' +    //Here is the plugin
    'about,' +
    'a11yhelp,' +
    'basicstyles,' +
    'bidi,' +
    .....;
config.toolbar = 'Full';   //Add the plugin to the full toolbar

config.toolbar_Full =      //Note that our plugin will be the first button in the toolbar
        [
        ['htmlSource', '-', 'Save', 'NewPage', 'Preview', '-', 'Templates'],
        ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Print',    'SpellChecker', 'Scayt'],
        ['Undo', 'Redo', '-', 'Find', 'Replace', '-', 'SelectAll', 'RemoveFormat'],
        ['Form', 'Checkbox', 'Radio', 'TextField', 'Textarea', 'Select', 'Button', 'ImageButton', 'HiddenField'],
        ['BidiLtr', 'BidiRtl'],
        '/',
        ['Bold', 'Italic', 'Underline', 'Strike', '-', 'Subscript', 'Superscript'],
        ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', 'Blockquote', 'CreateDiv'],
        ['JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock'],
        ['Link', 'Unlink', 'Anchor'],
        ['Image', 'Flash', 'Table', 'HorizontalRule', 'Smiley', 'SpecialChar', 'PageBreak'],
        '/',
        ['Styles', 'Format', 'Font', 'FontSize'],
        ['TextColor', 'BGColor'],
        ['Maximize', 'ShowBlocks', '-', 'About']
   ]; 
}; 
```

我知道这是有效的，所以如果您有任何问题，请告诉我。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-24T14:57:47.037

对我来说，它有助于使用：

```
config.extraPlugins = 'htmlSource'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-01T19:55:50.883

对于 CKEditor 4.1.1，上述两个答案的组合对我有用，尽管我必须进行一些小的调整。上面写着“--- Start Plugin here ---”的部分我可以照原样复制。对于配置选项，我不得不使用

```
CKEDITOR.config.extraPlugins = 'htmlSource'; // Notice: "extraPlugins".
CKEDITOR.config.toolbar = 'Full';
CKEDITOR.config.toolbar_Full = ...; 
```

代替

```
CKEDITOR.editorConfig = function (config) { ... 
```

最后，这一切都是在简单的香草安装的内联模式下完成的，即我不需要下载任何额外的插件来完成这项工作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-19T16:56:30.717

我正在使用带有版本 4 的 Julio 插件，并且需要进行调整以避免此 JS 错误：

> TypeError: $(...).html 不是函数

我交换了这一行：

```
$(editor.container.$).html(data.contents); 
```

有了这个：

```
// See http://docs.ckeditor.com/#!/api/CKEDITOR.editor-method-setData
editor.setData(
    data.contents,
    function() {
        this.checkDirty();
    }
); 
```

我的猜测是 Julio 的解决方案需要 jQuery，而我的方法是 CKEditor 方法（或者至少更接近它！）。

# r - 在 attach() 中引用新定义的变量

> ID：13617116
> 
> 赞同：2
> 
> 时间：2012-11-29T01:00:16.723
> 
> 标签：r, dataframe

我想对数据框的列进行许多修改。但是，由于需要大量列和转换，我想避免一遍又一遍地使用数据框名称。

在 SAS 数据步骤中，在一个数据步骤中，您可以创建一个变量并在定义后立即引用它：

```
 data A;
 set A;
 varA = varB > 1;
 varC = var A + varB;
 ....
 run; 
```

可以在R中做到这一点吗？

我能想到的一种方法是使用 attach()，然后创建数百个数组，然后在 detach() 之前对它们进行 cbind()。我知道很多 R 的老手建议不要使用 attach()。但是我需要进行大量的数据操作（数百个新变量），并且按顺序对每个人调用 transform(df,) 会非常麻烦。

例如：

```
attach(A)
varA <- varB > 1
varC <- varA + varB
A <- cbind(varA, varB, varC)
detach() 
```

但我不确定这是否是在 R 中执行此操作的最佳方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T01:07:44.687

您可以使用`plyr`和`mutate`。

```
A <- data.frame(varB = 1:5)
library(plyr)
A <- mutate(A, varA = varB>1, varC = varA + varB) 
A
  varB  varA varC
1    1 FALSE    1
2    2  TRUE    3
3    3  TRUE    4
4    4  TRUE    5
5    5  TRUE    6 
```

或者`within`在`base`R 中。请注意，它`within`会以相反的顺序返回您创建的列。

```
A <- data.frame(varB = 1:5)
A <- within(A, {varA <- varB>1; varC <- varA + varB})
A
 varB varC  varA
1    1    1 FALSE
2    2    3  TRUE
3    3    4  TRUE
4    4    5  TRUE
5    5    6  TRUE 
```

* * *

到目前为止，我最喜欢的是`data.table`和`:=`

```
DA <- data.table(varB = 1:5)

DA[,varA := varB >1 ][, varC := varA + varB]

 DA
   varB  varA varC
1:    1 FALSE    1
2:    2  TRUE    3
3:    3  TRUE    4
4:    4  TRUE    5
5:    5  TRUE    6 
```

目前`:=`最容易使用，每次调用`[`. 有一些方法可以解决这个问题，但我认为这一系列`[`调用并不难理解（它会比`mutate`任何使用 data.frames 的方法快得多。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T01:07:47.380

如果你想在你的数据框中创建一个新变量`varC`，`A`你可以使用

```
A$varC <- A$varA + (A$varA > 1) 
```

# ios - IOS视频播放器示例

> ID：13617118
> 
> 赞同：3
> 
> 时间：2012-11-29T01:00:28.163
> 
> 标签：ios, open-source, video-player

您好，我想为视频播放器添加一些功能，但是我没有足够的时间编写播放器本身。那么有谁知道任何通过互联网播放 .MOV 扩展视频的开源视频播放器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-19T14:24:50.493

您可以查看许多可用的开源视频播放器。以下是一些链接：

*   [http://openvideoplayer.sourceforge.net/](http://openvideoplayer.sourceforge.net/)
*   [http://www.videolan.org/vlc/download-ios.html](http://www.videolan.org/vlc/download-ios.html)
*   [https://github.com/ign/VideoPlayerKit](https://github.com/ign/VideoPlayerKit)

这些应该可以帮助您入门，但请注意，摸索代码可能需要一些时间。

# php - PHP Socket 帮助理解

> ID：13617122
> 
> 赞同：1
> 
> 时间：2012-11-29T01:00:50.703
> 
> 标签：php, sockets

我试图了解套接字在 PHP 中是如何工作的。

假设我有一个名为 的文件`socket.php`，这会在端口 99 上创建一个绑定到我的 localhost 的套接字。

然后我循环运行套接字，`while`使其不断连接。

PHP中是否有一个函数可以在监听时调用该套接字？

另一个问题是：如果我有其他服务，例如`Java running on a socket`-- 使用 PHP 连接到套接字进行调用是不是一个坏主意。我问是因为我可能会多次重新创建新的套接字连接。

那么在 PHP 中必须重新连接数百次套接字是不是很糟糕？或者我应该以某种方式重新使用相同的套接字连接？（我正在考虑对连接到 Java 套接字的 PHP 的 AJAX 调用）。

* * *

编辑：您可以看到示例代码：[https ://github.com/JREAM/sandbox/tree/master/php](https://github.com/JREAM/sandbox/tree/master/php)

我试图在 socket.php 和 socket_send.php 中进行通信——我让 socket.php 运行并打开另一个控制台并运行 socket_send.php 并尝试将结果输入控制台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:08:54.050

回答您的第一个问题：我建议您在[此处查看](http://php.net/manual/en/book.sockets.php)有关套接字所需的一切。基本上，如果使用 UDP，您要使用的函数是 socket_read 或 socket_recvfrom。

回答您的第二个问题：套接字只是向服务发送消息的一种方式。客户端是否使用 php 而服务器使用 Java 并不重要。这样想吧。您在带有 windows Box 的 linux Web 服务器上查看网页是否重要？

# android - 在 tabhost 中发送数据

> ID：13617124
> 
> 赞同：0
> 
> 时间：2012-11-29T01:00:57.343
> 
> 标签：android, android-intent, android-tabhost

我有 3 个活动：main_tabhost、tab1、tab2 和一个变量 int t；

当我点击tab1时，增加t。然后我点击 tab2：如何在 tab 2 中获取 t 的值？给我一些想法或源代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:42:38.990

尝试使用`Intent`来自 tab1 的“粘性”广播。

在 tab1中`Activity`何时`t`更改...

```
Intent i = new Intent("myapp.action.DO_SOMETHING");
i.putExtra("t_value", t);
sendStickyBroadcast(i); 
```

在 tab2 中`Activity`，您需要创建一个内部`BroadcastReceiver`...

```
public class MyActivity2 extends Activity {

    ...

    private class MyReceiver extends BroadcastReceiver {
        ...
    }
} 
```

在`onResume()`tab2 的方法中`Activity`注册接收器并获取“粘性” `Intent`...

```
int t;
Intent i = registerReceiver(new MyReceiver(), new IntentFilter("myapp.action.DO_SOMETHING"));
if (i != null)
    t = i.getIntExtra("t_value", 0);
// Do something with `t` 
```

注意：您需要`android.permission.BROADCAST_STICKY`在清单文件中指定权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T01:30:38.020

将 t 定义为公共静态变量。

# typescript - 从 TypeScript 子类中的回调调用超类方法时出现错误的“this”

> ID：13617130
> 
> 赞同：2
> 
> 时间：2012-11-29T01:01:58.913
> 
> 标签：typescript

我有一些 TypeScript 代码（实际上）看起来像这样：

```
class User {
    name: string = "Bob";
    sayHello(): void {
        console.log("Hello, " + this.name);
    }
}

class RegisteredUser extends User {
    name: string = "Frank";
    sayHello(): void {
        var s = super;
        setTimeout(() => s.sayHello(), 1000);
    }
}

var registeredUser = new RegisteredUser();
registeredUser.sayHello(); 
```

问题是 TypeScript（莫名其妙地，IMO）遵循关于“this”的奇怪的 JavaScript 规则，而不是像世界上所有其他编程语言那样做。因此，当从 RegisteredUser.sayHello() 中的覆盖调用 User.sayHello() 时，`this`指向 User*类*而不是实例化的 RegisteredUser*对象*，因此实际记录的是：

```
Hello, undefined 
```

除了这对我来说这样做没有任何意义（请参阅[https://typescript.codeplex.com/workitem/477](https://typescript.codeplex.com/workitem/477)）之外，解决此问题的最佳方法是什么，以便`this`在 User.sayHello () 从回调调用时指向正确的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:10:15.080

好的，这有效：

```
setTimeout(() => s.sayHello.call(this), 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:27:04.267

这也有效并消除了对`s`var 的需要：

```
sayHello(): void {
    setTimeout(super.sayHello.bind(this), 1000);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:59:12.023

如果你避免`var s = super`分配，`super.sayHello`直接调用，TS会为你插入那个魔法咒语。在 TS Playground 中尝试一下。

# javascript - javascript退格并防止后退按钮，同时仍为按键提供退格含义

> ID：13617134
> 
> 赞同：0
> 
> 时间：2012-11-29T01:02:26.760
> 
> 标签：javascript

我的应用程序将允许人们在画布上书写，因此我在按键上附加了一个事件监听器，这会触发以下功能：

```
var Keypress = function(event) {
    if (event.keyCode == 8) {
        chatRoom.removeLetter();
        event.preventDefault();
    }

    if(event.keyCode == 13){
        chatRoom.newLine();
    }
    chatRoom.addText(event.charCode,"White");
} 
```

问题是这样的，目前如果有人点击退格 1 个字符可以被删除，退格被冻结并且在按下另一个键之前不能再次使用。但是，我正在寻找的是能够多次击退退格键，删除许多字符并且没​​有人最终返回一页。

本质上，我试图找到一种方法让函数触发 removeLetter() 事件并禁用返回浏览器，但是我见过的所有示例都冻结了退格（导致这个字母可以被删除）或不工作（返回 false 对我来说根本不起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:05:41.240

问题是您正在将退格“字符”写入聊天室。因此，当您第二次按退格键时，您只是删除了该退格符，然后将其重写。

删除您的信件后尝试返回：

```
if (event.keyCode == 8) {
    chatRoom.removeLetter();
    event.preventDefault();
    return;
} 
```

# ios - NSAttributedString 中的 UITextField 下划线只有 1 个像素高？

> ID：13617135
> 
> 赞同：1
> 
> 时间：2012-11-29T01:02:36.567
> 
> 标签：ios, uitextfield, nsattributedstring, underline

标签（图片底部）和文本字段（顶部）具有相同的属性Text。但请看下划线。文本字段中的那些只有一个像素高。这看起来很可怕。有谁知道是什么原因造成的或如何预防？

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        UITextField* textField = [[UITextField alloc]initWithFrame:CGRectMake(100, 100, 600, 200)];
        NSMutableAttributedString* string = [[NSMutableAttributedString alloc]initWithString:@"The quick brown fox jumps"];
        NSNumber* underlineNumber = [NSNumber numberWithInteger:NSUnderlineStyleSingle];
        UIFont* font = [UIFont systemFontOfSize: 50];
        [string addAttribute:NSFontAttributeName value:font range:NSMakeRange(0, string.length)];
        for (NSInteger i=0; i<20; i++) {
            if (i%3==0) {
                [string addAttribute:NSUnderlineStyleAttributeName value:underlineNumber range:NSMakeRange(i, 1)];
            }
        }
        textField.backgroundColor = [UIColor whiteColor];
        textField.attributedText = string;
        [self addSubview:textField];
        UILabel* label = [[UILabel alloc]initWithFrame:CGRectMake(100, 400, 600, 200)];
        label.attributedText = string;
        label.font = font;
        label.backgroundColor = [UIColor whiteColor];
        [self addSubview:label];
    }
    return self;
} 
```

![在此处输入图像描述](../Images/2f53ee1c8b0f251fca4ab9a20898c69a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T05:09:50.443

标签使用自定义渲染样式来绘制下划线，不幸的是，这与 UITextField 使用的不同，后者在编辑时使用 WebKit 进行渲染，在静态时使用 Core Text 进行渲染。请向 bugreporter.apple.com 提交错误。谢谢！

# iphone - 视图似乎重新加载了自己

> ID：13617136
> 
> 赞同：0
> 
> 时间：2012-11-29T01:02:37.737
> 
> 标签：iphone, ios

如果我长时间停止使用我的应用程序然后返回它，似乎该`viewDidLoad`方法再次被调用，即使我**从未**“退出”应用程序（通过按两次 home 键并点击 X）我也没有重新启动 iPhone。如果我只是转到主屏幕，然后在短时间内再次打开应用程序，则不会发生这种情况。到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:06:59.383

这与操作系统管理内存的方式以及它如何处理同时打开许多不同的应用程序有关。简而言之，如果您的应用程序在后台运行了很长时间，最终，操作系统将决定它处于非活动状态，并且与其视图关联的内存将被标记为在其他更需要它的地方重用。这是`viewDidUnload`您的视图控制器中的方法。每当`viewDidUnload`调用该方法时，都会再次调用 viewDidLoad 方法，以便您有机会在用户看到它之前重新加载您的视图。

编辑：

你不能指望这种现象每`x`分钟都在发生。只有当操作系统需要更多内存用于活动应用程序时才会发生这种情况。如果您想确保用户在恢复使用您的应用程序时始终获得更新信息，请使用 NSNotificationCenter 并注册`UIApplicationDidBecomeActive`通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:11:14.143

您可以尝试监视内存警告。像这样的大多数情况是内存警告获取触发器，并且如果视图不是最顶部的，则在此之后调用 viewDidUnload。因此，当您返回该视图时， viewDidLoad 将再次被调用。

您可以尝试在 UIViewController 中覆盖此方法并查看是否调用了内存警告。它可能由您的应用程序中的其他一些组件触发。

```
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
} 
```

# g++ - LD_LIBRARY_PATH 和 -rpath 有什么区别

> ID：13617137
> 
> 赞同：6
> 
> 时间：2012-11-29T01:02:38.730
> 
> 标签：g++, linker-scripts

链接库时，使用-rpath 将动态库的地址传递给ld。我的问题是，如果我在 LD_LIBRARY_PATH 中设置地址，我的链接过程中还需要 -rpath 标志吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T14:05:02.167

通常，您不需要它，实际上最好不要在可执行文件中编码库搜索路径（该`-rpath`选项将二进制文件中的路径编码为`DT_RPATH`或`DR_RUNPATH`）

PS。我自己的一般方法是将可执行文件**与**选项链接，`--rpath`而它们在构建树中并依赖于构建树中的其他库，以方便调试，但在安装（`make install`，构建包）时重新链接**没有** `--rpath`选项并离开任务找到共享库到`ld.so.conf`目标平台的适当动态链接器配置（例如）。

# php - 下拉菜单的php验证不正确

> ID：13617138
> 
> 赞同：0
> 
> 时间：2012-11-29T01:03:01.553
> 
> 标签：php, validation

我在下面有一个代码，它在下拉菜单中显示学生详细信息，然后它执行 php 验证以查看是否从下拉菜单中选择了学生：

```
$sql = "SELECT StudentUsername, StudentForename, StudentSurname FROM Student ORDER BY StudentUsername"; 

$sqlstmt = $mysqli->prepare($sql);

$sqlstmt->execute(); 

$sqlstmt->bind_result($dbStudentUsername, $dbStudentForename, $dbStudentSurname);

$students = array(); // easier if you don't use generic names for data 

$studentHTML = "";  
$studentHTML .= '<select name="students" id="studentsDrop">'.PHP_EOL; 
$studentHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

$outputstudent = "";

while($sqlstmt->fetch()) 
{
    $student = $dbStudentUsername;
    $firstname = $dbStudentForename;
    $surname = $dbStudentSurname; 

    $studentHTML .= "<option value='" . $student . "'>" . $student . " - " . $firstname . " " . $surname . "</option>" . PHP_EOL;  
} 

$studentHTML .= '</select>'; 

$errormsg = (isset($errormsg)) ? $errormsg : '';

if(isset($_POST['resetpass'])) {
    //get the form data
    $studentdrop = (isset($_POST['students'])) ? $_POST['students'] : '';

    if($studentdrop = "") {
        $errormsg = "Student is Selected";
    }
    else{
        $errormsg = "You must Select a Student";
    }

} 
```

我遇到的问题是，即使我从下拉菜单中选择了一个学生，它仍然会显示一条消息，指出“您必须选择一个学生”。

假设发生的情况是，如果用户没有选择学生，或者换句话说，当他们提交表单并且下拉菜单仍然在“请选择”选项上时，它会显示一条消息，说明用户必须选择学生，否则如果用户确实从下拉菜单中选择了学生，则显示学生已被选中的消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T01:08:02.993

您应该使用`if($studentdrop == ""){`for equal 或`if($studentdrop != ""){`for not equal。请注意比较运算符。

如果使用`if($studentdrop = ""){`，则意味着您将空字符串分配给变量`$studentdrop`。

# grails - 使用 weceem grails-plugin 时 springSecurityService.currentUser 上的空指针

> ID：13617139
> 
> 赞同：1
> 
> 时间：2012-11-29T01:03:10.000
> 
> 标签：grails, weceem

我在我的项目中使用 Grails 2.1.1，现在我正在使用 springSecurityService.currentUser 来获取用户凭据等。

在过去的两天里，我的项目需要一些 CMS 扩展，我偶然发现了 Weceem 插件。在这里和那里设置东西，最后我的带有 Weceem 插件的项目现在正在运行，但是每次调用 springSecurityService.currentUser 方法时都会出现空指针异常。

没有 weceem grails-plugin 一切都运行良好，所以我假设我需要进行一些设置。问题是在哪里和什么？

这是我的用户类

```
class User {

transient springSecurityService

String username
String password
boolean enabled = true
boolean accountExpired = false
boolean accountLocked = false
boolean passwordExpired = false
Person person

static hasOne = [Person]
static hasMany = [roles: Role]

static constraints = {
    username blank: false, unique: true
    password blank: false
}

static mapping = {
    password column: '`password`'
}

Set<Role> getAuthorities() {
    roles as Set
}

def beforeInsert() {
    encodePassword()
}

def beforeUpdate() {
    if (isDirty('password')) {
        encodePassword()
    }
}

protected void encodePassword() {
    password = springSecurityService.encodePassword(password)
}} 
```

这是我调用 springSecurityService 的控制器

```
//show the list of all person
def list = {
    //get all the sorting params
    params.sort = params.sort ?: 'firstName'
    params.order = params.order ?: 'asc'
    params.max = params.max ?: 10
    params.offset = params.offset ?: 0

    def test = springSecurityService.getCurrentUser()

    def personList = Person.createCriteria().list (max: params.max, offset: params.offset) {
        if (springSecurityService.currentUser.person.affiliate.value != 'Admin'){
            eq("affiliate", springSecurityService.currentUser.person.affiliate)
            eq("deleted", false)
        }
        order(params.sort, params.order)
    }
    render view:'list', model:[persons: personList, personTotal: personList.totalCount]
} 
```

# android - 是否可以在您自己的应用程序中使用 Android 的原生相机控件/图形？

> ID：13617145
> 
> 赞同：0
> 
> 时间：2012-11-29T01:03:42.900
> 
> 标签：android, button, camera, native

我不希望我的应用通过以下意图打开现有的相机应用：http: [//developer.android.com/guide/topics/media/camera.html#intents](http://developer.android.com/guide/topics/media/camera.html#intents)

我基本上想将我自己的自定义 Camera 对象与 SurfaceView 一起使用（这很简单并且有完整的文档），但我希望相机布局看起来像手机的相机库存图形。拍照按钮、闪光灯按钮等虽然我不相信我可以访问这些特定按钮的原生 android.r.drawables 对吗？而且我不能简单地从 sdk 文件夹中复制特定按钮的图形并将其放在我自己的 drawables 文件夹中，因为它必须在每个设备上都是动态的，才能看起来像手机的相机应用程序。

任何人都可以从 Android 中找到官方文档说这不能完成吗？我需要正式知道这是否可行。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:24:30.240

您可以下载相机应用程序的源代码。它包含所有资源。看到这篇文章[https://stackoverflow.com/a/1105311/661079](https://stackoverflow.com/a/1105311/661079)

# c++ - 无法计算字符串中的字符

> ID：13617147
> 
> 赞同：0
> 
> 时间：2012-11-29T01:04:09.923
> 
> 标签：c++, string, counter

它总是出现 0 和 0，我只是想计算用户给出的字符串中的 Gs 和 Cs（以及非 Gs 和 Cs）。我知道这是一个初学者问题，对此感到抱歉:(

```
#include <iostream>
#include <string>
using namespace std;

int main()
{

int x = 0
int y = 0

string s;

cout << "Enter a sequence" << endl;
cin >> s;

for (int i = 0; i > 100; i++)
    if (s[i] == 'g' || s[i] == 'c')
        x += 1;
    else
        y += 1;

cout << x << endl;
cout << y << endl;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:05:08.887

你确实意识到

```
for (int i = 0; i > 100; i++) 
```

从不跑，对吧？

你是在说 - “让`i`......`0`只要`i > 100`（大声笑 - 从不）做某事”。

你可能是说

```
for (int i = 0; i < s.size(); i++) 
```

或者你可以使用`std::count_if`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:05:15.930

for (int i = 0; i > 100; i++)

由于 0 不大于 100，因此该循环执行零次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T01:06:33.427

在循环中，它应该`i < 100`

# ruby-on-rails - Ruby on Rails 集成测试期间的间歇性 ActiveRecord::RecordNotFound

> ID：13617152
> 
> 赞同：7
> 
> 时间：2012-11-29T01:05:02.223
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, integration-testing

我有间歇性失败的集成测试，并且总是有`ActiveRecord::RecordNotFound`错误。错误发生在控制器内部，在`find`给定夹具 ID 的情况下进行调用。不过，它发生在多个控制器中。我在浏览网站时从未看到过这种行为，但我会说测试失败的概率约为 30-50%。失败后再次运行测试似乎可以解决问题。

如果我手动将固定装置加载到开发数据库中，似乎找不到的 ID 确实存在于表中。

我还没有找到很多关于有同样问题的人的信息……有什么想法吗？

**更新**：这是 test_helper.rb 的内容

```
ENV["RAILS_ENV"] = "test"
require File.expand_path('../../config/environment', __FILE__)
require 'rails/test_help'
require 'capybara/rails'
class ActiveSupport::TestCase
  # Setup all fixtures in test/fixtures/*.(yml|csv) for all tests in alphabetical order.
  #
  # Note: You'll currently still have to declare fixtures explicitly in integration tests
  # -- they do not yet inherit this setting
  fixtures :all
  # Add more helper methods to be used by all tests here...
end
# Transactional fixtures do not work with Selenium tests, because Capybara
# uses a separate server thread, which the transactions would be hidden
# from. We hence use DatabaseCleaner to truncate our test database.
DatabaseCleaner.strategy = :truncation
class ActionDispatch::IntegrationTest
  # Make the Capybara DSL available in all integration tests
  include Capybara::DSL
  # Make the Capybara Email DSL available in all integration tests
  include Capybara::Email::DSL
  # Stop ActiveRecord from wrapping tests in transactions
  self.use_transactional_fixtures = false
  # Switch to selenium as the default driver for JS support
  Capybara.default_driver = :selenium
  # Only click on visible links!
  Capybara.ignore_hidden_elements = true
  teardown do
    DatabaseCleaner.clean       # Truncate the database
    Capybara.reset_sessions!    # Forget the (simulated) browser state
    Capybara.use_default_driver # Revert Capybara.current_driver to Capybara.default_driver
  end
end 
```

**更新**这是连续运行 5 次相同测试的结果。我运行测试，等到它们完成，然后立即使用 command 再次运行它们`rails test:integration`。注意：在整个测试中一致的 E 和 F 实际上是测试错误——我正在努力修复这些错误。例如，第二次测试运行是“正确的”，但第一次显示的是虚假错误。

```
..E......E..........F.
.........E..........F.
..E......E..........F.
..E......E..........F.
..E....E.E..........F. 
```

这些错误确实发生在两个单独的表中——它们不是试图找到相同的记录。但它似乎只是有这个问题的测试的一个子集......

**更新**这是测试结果中实际错误的样子：

```
 1) Error:
test_browsing_user_snops(BrowseStoriesTest):
ActiveRecord::RecordNotFound: Couldn't find User with id=980190962
    /home/myuser/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.9/lib/active_record/relation/finder_methods.rb:341:in `find_one'
    /home/myuser/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.9/lib/active_record/relation/finder_methods.rb:312:in `find_with_ids'
    /home/myuser/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.9/lib/active_record/relation/finder_methods.rb:107:in `find'
    /home/myuser/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.9/lib/active_record/querying.rb:5:in `find'
    /home/myuser/Projects/myproject/app/controllers/users_controller.rb:18:in `show'
    ... 
```

请注意，当控制器尝试查找记录时会出现错误。相关线路实际上是`@user = User.find(params[:id])`. 它也发生在其他模型中，不仅仅是用户控制器，而不仅仅是用户模型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T02:03:32.930

我担心在截断数据和 Capybara 驱动 Web 浏览器的速度期间可能会有延迟，这有时可能会导致标识列值以意外值开始（即记录 #1 为 7 - 当您期望 1，因为该身份生成器尚未重置）。我没有证据表明情况确实如此，但这是我最好的猜测。

看看[这个 URL 上的第 3 项](http://blog.plataformatec.com.br/2011/12/three-tips-to-improve-the-performance-of-your-test-suite/)。这是一个非常直接的 hack，`use_transactional_fixtures`通过将该代码粘贴到您的`test_helper.rb`. 这有助于消除可能是潜在问题的任何间歇性磁盘 IO 问题。

`:memory:`您可以尝试的另一件事是通过在您的文件中设置该数据库的文件名来限制您的 SQLite 测试数据库`database.yml`。这应该完成与上述相同的事情 - 消除可能导致这些间歇性问题的虚假磁盘 IO。

# c++ - 没有要调用的匹配函数（构造函数），候选的不同之处在于对给定类型的引用

> ID：13617154
> 
> 赞同：0
> 
> 时间：2012-11-29T01:05:12.693
> 
> 标签：c++, constructor

我的编译器以下列方式抱怨：

```
Matrix.cpp:58: error: no matching function for call to ‘List::miterator::miterator(List::miterator)’
List.h:99: note: candidates are: List::miterator::miterator(List::miterator&)
List.h:98: note:                 List::miterator::miterator(List::Node*, Dim)
List.h:97: note:                 List::miterator::miterator(Dim) 
```

我有继承自 List 的类 List 和类 Matrix。miterator 类放置在类 List 中。第 58 行说：

```
miterator i( nula(ROW) ); 
```

并放置在里面：

```
Matrix Matrix::operator*( const Matrix& right ) const 
```

矩阵是稀疏的，List 是一个二维环。方法 nula 返回给定维度中第一个边缘标记的迭代器。该维度在全球范围内定义为：

```
typedef enum { ROW, COL } Dim;
Dim operator!(Dim dim) { return dim == COL ? ROW : COL; } 
```

列表的节点在 List 中定义并包含以下字段：

```
private:
    unsigned index[2];
    T num;
public:
    Node *next[2]; 
```

我会很感激任何帮助，我不知道出了什么问题。请记住，我是一名初学者 C++ 程序员。提前致谢。

编辑：这也可能有帮助。从 miterator 定义的内部：

```
 miterator( Dim dir ) { direction_flag = dir; }
    miterator( Node *n, Dim dir ) { node = n; memory = n; direction_flag = dir; }
    miterator( miterator &i ) { node = i.node; memory = i.memory; direction_flag = i.direction_flag; }
    ~miterator() {}
    inline bool operator==( const miterator& i) const { return node == i.node; }
    inline bool operator!=( const miterator& i) const { return node != i.node; }
    inline miterator& operator=( const miterator i ) { node = i.node; memory = i.memory; return *this; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:06:54.033

```
List::miterator::miterator(List::miterator&) 
```

应该

```
List::miterator::miterator(List::miterator const&) 
```

临时（`nula(ROW)`在您的情况下）不能绑定到非`const`引用。更改构造函数（推荐）或不使用临时构造函数。

```
nula n(ROW);
miterator i(n); 
```

# php - php空字节注入？

> ID：13617156
> 
> 赞同：5
> 
> 时间：2012-11-29T01:05:17.797
> 
> 标签：php, null, byte

```
$num = $_GET['fileid'];                        // get file id

$realfile = "filename".$num.'.txt'; 
```

我的问题是它仍然可以使毒无效吗？根据我的实验，最后的 .'.txt' 不会因空字节注入而消失。有没有办法使这个字节为空？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T01:32:40.203

我相信您的代码可能容易受到目录遍历攻击 - 如果有人提供 "/../../foo" 作为`fileid`，那么路径将是`"filename/../../foo.txt"`，这可能是一个有效的目标。见：[http ://en.wikipedia.org/wiki/Directory_traversal](http://en.wikipedia.org/wiki/Directory_traversal)

我和@jeroen 和@shiplu.mokadd.im 在一起，他们建议清理你的输入——假设`fileid`是一个数字，那么这个`intval()`函数就可以了：

```
$num = $_GET['fileid'];
$num = intval( $num );
if( $num == 0 ) {
    echo "Invalid file ID: Not a number.";
    exit;
} else {
    $fileName = 'filename' . $num . '.txt'; 
    if( !file_exists( $fileName ) ) {
        echo "Invalid file ID: Doesn't exist.";
    } else {
        // do something
    }
} 
```

# javascript - 在javascript中用递增的数字替换HTML文本

> ID：13617157
> 
> 赞同：1
> 
> 时间：2012-11-29T01:05:33.570
> 
> 标签：javascript, replace

我有一堆没有 HTML 的文本，我试图找到所有替换所有实例的问题`String`。问题`<span id="x">String</span>`
是我每次都试图增加 x 以获得一堆唯一可识别的跨度，而不是相同的跨度。
获取 String 的所有实例都没有问题，但在我的一生中，我无法让增量工作。我能找到的所有帮助似乎都与此相反。
有什么想法我能做什么或在哪里寻求帮助？

编辑：
这是针对 ID 为“结果”且仅包含文本的 div。

```
 var target = "String";
    var X = //the number I was trying to increment
    var re = new RegExp(" " + target + " ","g");
    document.getElementById('result').innerHTML = document.getElementById('result').innerHTML.replace(re, '<span id="' + X + '">' + target + '</span>'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T01:19:49.997

我猜你正在使用正则表达式，这很好，但你可以指定一个函数作为第二个参数`replace`并在那里执行你的逻辑。

执行此操作的 MDN 文档在这里 - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)

你可以使用这样的东西：

[http://jsfiddle.net/gjrCN/2/](http://jsfiddle.net/gjrCN/2/)

```
function replacer(orig, target) {
    var x = 0;
    var re = new RegExp(target, "g");
    var ret = orig.replace(re, function (match) {
        return "<span id='" + (++x) + "'>" + match + "</span>";
    });
    return ret;
}

var example = "String Stringasdf String2344 String";
var replaced = replacer(example, "String");
console.log(replaced); 
```

如果您希望计数开始于而不是 ，您可以更改`++x`为。`x++``0``1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:20:40.047

参考[这些文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)。

您可以将一个函数传递给该方法，该`String.replace`方法将允许您在每次调用时增加一个计数器并使用它来设置您的 ID：

```
var forReplacements = "I do like a String that's a nice long String with Strings in it";

var incrementer = (function() {
    var counter = -1;
    var fn = function(match) {
        counter++;
        return "<span id='"+counter+"'>"+match+"</span>";
    };
    fn.reset = function() {
        counter = -1;
    }
    return fn;
}());
var newString = forReplacements.replace(/String/g, incrementer ) 
```

看[这个小提琴](http://jsfiddle.net/vL4Qq/1/)看看它在行动

# python - 定位较低级别的模板

> ID：13617159
> 
> 赞同：1
> 
> 时间：2012-11-29T01:05:52.850
> 
> 标签：python, templates, bottle

嗨，我在使用 Bottle 的模板时遇到问题

我的文件夹结构是这样的：

```
|views  
 --main.tpl
 --|blog
    --home.tpl 
```

我想做的是：

```
def home():
    return template('blog/home') 
```

但它不会工作

我只需调用以下命令就可以让它工作：

```
def home():
    return template('main') 
```

但是我希望能够拥有许多不同的文件夹，我知道由于缓存，我仍然需要保留唯一的名称，请不要说使用不同的框架，因为这不是我的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:46:06.827

您可以尝试将 template_lookup 参数传递给模板函数。查找模板时，template_lookup 会覆盖默认的 .views 路径。但是我相信这只有在模板的名称不在视图文件夹中时才有效。因此，如果您有一个 /views/main.tpl 和一个 /blog/main.tpl 它将不起作用，每个模板都需要一个唯一的名称。这是必需的，因为瓶子只会在之前没有找到模板的情况下查找模板，并将找到的模板存储在以模板名称作为键的字典中。因此，如果模板具有相同的名称，它将使用第一个。

```
return template("home", template_lookup="full_path_to/views/blog/" 
```

# perl - 为 dzil 测试创建和运行作者测试

> ID：13617160
> 
> 赞同：5
> 
> 时间：2012-11-29T01:05:52.570
> 
> 标签：perl, testing, plugins, module, dist-zilla

我正在尝试使用几个 Dist::Zilla 插件来生成和运行作者测试。`dzil build`唯一的问题是它们是由`dzil test`. 例如，以下是我的 dist.ini 中的一些行：

```
[Test::Compile]     ; Create t/00-compile.t
[Test::UnusedVars]  ; Create xt/unused-vars.t
[RunExtraTests]     ; run the xt/ tests when dzil test is run. 
```

但是，运行`dzil test`时仅运行创建的测试文件之一- `00-compile.t`. `unused-vars.t`在我运行之前甚至没有创建`dzil build`。为了测试作者这样创建的所有测试，我需要先运行`dzil build`cd 进入新目录，然后运行`dzil test`​​. 然后，当出现故障时，我必须使用原始副本，而不是 build 命令创建的副本。冲洗并重复。

有没有办法在构建时生成作者测试，以便我可以在`dzil test`不更改目录的情况下运行它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T01:15:24.343

`dzil test --release`就是你要找的。我也强烈建议您尝试[Dist::Zilla::PluginBundle::TestingMania](https://metacpan.org/module/Dist%3a%3aZilla%3a%3aPluginBundle%3a%3aTestingMania)

# c - 如何在c中初始化泛型函数

> ID：13617168
> 
> 赞同：1
> 
> 时间：2012-11-29T01:06:46.110
> 
> 标签：c, generics

我尝试了一个在 c 中使用通用比较函数的简单示例，但是在初始化它时，我收到警告消息，指出初始化它们时类型不兼容。感觉我在这里缺少一些基本的东西......

```
#include <stdio.h>
#include <string.h>

int
compare(int (*comp)(void *first, void *second), void *arr, int size)
{
    int i, j, dups=0, arrsize=sizeof(arr)/size;
    for(i=0; i<arrsize; i++)
    {
        for(j=0; j<arrsize; j++)
        {
            if(j!=i)
                dups+=(*comp)(&arr[i], &arr[j]);
        }  
    }
     return dups;
}

int
compareints(int *first, int *second)
{
    if(*first==*second)
        return 1;
    return 0;
}

int main(int argc, const char * argv[])
{
    int (*comp)(void *, void *)=&compareints; //Here is where I get the warning...
    int arr[10]={22, 39, 78, 22, 99, 12, 82, 10, 11, 28};
    printf("The arr has dups: %d\n", compare(comp, arr, sizeof(int)));
    return 0;
} 
```

编辑：程序运行不正常，它与数组的处理有关。功能编的修改如下：

```
int
compare(int (*comp)(void *first, void *second), void **arr, int size)
    ....
    ....
    ....
    dups+=(*comp)(arr[i], arr[j]);

int 
compareints(....)
    if((*((int *)first))==(*((int *)second)))
       return 1;

int 
main(int argc, const char * argv[])
{
     int (*comp)(void *, void *)=&compareints;
     int arr[10]={22, 39, 78, 22, 99, 12, 82, 10, 11, 28};
     void **arr2=malloc(sizeof(int *)*10);
     for(int i=0; i<10; i++)
     {
         arr2[i]=&arr[i];
     }
     printf("The arr has dups: %d\n", compare(comp, arr2, 10));
     return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T01:09:05.797

不幸的是，当它们是函数签名的一部分时，您不能混合`void *`并喜欢这样。`int *`即使`int *`可以转换为`void *`，`int (*)(int *, int *)`也不能转换为`int (*)(void *, void *)`。签名必须完全匹配。

```
int
compareints(void *first, void *second)
{
    if (*((int *) first) == *((int *) second))
        return 1;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:13:30.160

类型：

```
int compareints(int *first, int *second) 
```

不等于：

```
int (*comp)(void *first, void *second) 
```

您必须更改函数的签名以接受两个 void * 参数，或者在分配期间对其进行类型转换。

# ios - iOS 从服务器接收数据

> ID：13617170
> 
> 赞同：0
> 
> 时间：2012-11-29T01:06:55.750
> 
> 标签：ios, text

我有兴趣制作一个从文件中读取“文本”并将其打印到标签中的应用程序。

我将从服务器接收数据，标签将打印该文本。

有没有人有基本的网站，我应该看看的文件？

我需要找到一个起点。对任何代码都不感兴趣，因为我这样做是为了学习。你知道一个好的起点吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:13:08.073

首先看一下`NSURLConnection`。[您可以在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)找到基本大纲（和代码）。如果你用谷歌搜索的话，有很多关于这方面的例子。

# sql-server - 在 T SQL 中查找两个日期之间的日期

> ID：13617175
> 
> 赞同：4
> 
> 时间：2012-11-29T01:07:38.127
> 
> 标签：sql-server, tsql, date

我的表中有两个 DateTime 列，ArrivalDateTime,DepartureDateTime，其值类似于 '26/11/2012 00:00:00' '28/11/2012 00:00:00' 现在我想从该表中查找所有记录使用 T Sql 在这些日期之间存在一个给定的日期，比如 27/11/2012

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T01:12:07.317

您可以使用[`BETWEEN`](http://msdn.microsoft.com/en-us/library/ms187922.aspx)：

```
SELECT * FROM table 
WHERE '2012-11-27' BETWEEN ArrivalDateTime AND DepartureDateTime 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T06:24:27.240

尝试这个。

```
DECLARE @GivenDate VARCHAR(10)
SET @GivenDate = '27/11/2012'

SELECT * FROM myTable WHERE CONVERT(DATETIME, ArrivalDateTime, 103) < CONVERT(DATETIME, @GivenDate, 103) AND CONVERT(DATETIME, DepartureDateTime, 103) > CONVERT(DATETIME, @GivenDate, 103) 
```

如果您想包括抵达和离开日期。

```
SELECT * FROM myTable WHERE CONVERT(DATETIME, ArrivalDateTime, 103) <= CONVERT(DATETIME, @GivenDate, 103) AND CONVERT(DATETIME, DepartureDateTime, 103) >= CONVERT(DATETIME, @GivenDate, 103) 
```

如果您只想比较日期而不是时间，那么试试这个。

```
SELECT * FROM myTable WHERE CONVERT(DATE, ArrivalDateTime, 103) <= CONVERT(DATE, @GivenDate, 103) AND CONVERT(DATE, DepartureDateTime, 103) >= CONVERT(DATE, @GivenDate, 103) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T01:14:49.147

你可以试试这个：

```
select * from MYTABLE where ArrivalDateTime < '2012-11-27' and DepartureDateTime > '2012-11-27' 
```

# jquery - 点击事件中的jquery调用函数导致不需要的函数多次调用

> ID：13617188
> 
> 赞同：1
> 
> 时间：2012-11-29T01:08:22.913
> 
> 标签：jquery

我遇到了以下问题。我尝试做的是每次单击 ID 为 #add_new_row 的按钮时创建一个新的 TR。单击事件添加一行，其中包含一个输入，其中包含 CLASS p_pocet。在任何点击之前，我会在每次页面加载时生成第一个 TR，所以我调用函数 countPolozky() 来为输入提供必要的 BLUR 函数。问题是这样的：1）在第一页加载时，我单击页面上唯一的一个输入，然后我收到警报，提示我单击的行的输入值正确。2）在我单击按钮添加新行后。jquery 添加一个新行并再次调用函数 countPolozky()。（如果我不调用它，BLUR 函数只会对第一个 TR 的输入做出反应）。如果我点击新 TR 的输入，在我结束焦点后，我会再次收到正确的警报，但如果我点击第一个 TR，我会收到 2 个警报。我只想要一个警报来获取我单击的活动行的值。如果我添加其他行，警报只会成倍增加。

```
 ( function($) {
        $(document).ready(function() {

                    $("#add_new_row").click(function(){
                      var pocet = parseInt($("#tbl_rows_count").attr('value')) + 1;
                      $("#tbl_rows_count").val(pocet);
                      $("#add_new_row").before('<tr></td><td><input name="pocet[]" id="pocet'+                    pocet +'" class="polozky p_pocet" type="text" value="1.0"></td></tr>');
                      $(".add_news2").click(function(){
                          $(this).parents('tr').remove();
                      });
                      countPolozky();
                    });
                    countPolozky();
       });
    } ) 
( jQuery );

     function countPolozky()    
        {
            //$(".polozky").die("blur");
            $(".polozky").blur(function() {
                pocet = $(this).closest('tr').find('.p_pocet').val();
                alert(pocet);
            });    
        } 
```

你可以在这里看到问题，它是一个在表格末尾制作发票的网站，有用于添加项目的输入，这就是问题所在。 [http://www.vzor-faktury.cz/#vygenerovat-fakturu](http://www.vzor-faktury.cz/#vygenerovat-fakturu)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:41:29.147

你有几个选择：

1.  创建新元素时，仅将新事件处理程序绑定到新元素，而不是 Everything `.polozky`。
2.  使用事件委托。

事件委托允许您在容器对象（例如表格元素）上设置单个事件处理程序，该处理程序将处理`.polozky`表格内所有元素的所有模糊事件。因此，您可以动态添加/修改/删除`.polozky`您想要的所有元素，而无需绑定新的事件处理程序。

有几篇文章讨论了[事件委托](https://stackoverflow.com/questions/13166602/when-clicking-a-nested-div-div-returns-parent-id-how-do-i-return-child-id-with)，您可以将其用作参考。

# javascript - 简单的角度重复

> ID：13617189
> 
> 赞同：2
> 
> 时间：2012-11-29T01:08:24.783
> 
> 标签：javascript, angularjs

我是 js/html/css 等的新手，并试图自学有角度，但我被困在一些看似简单的事情上。

当我加载下面描述的页面时，我得到标题和一个项目列表，其中包含我想要用角度替换“{{e.someKey}}”的文本。我正在寻找的是两个项目符号 - someValue1 和 someValue2。

在 index.html 中：

```
<!doctype html>
<html lang="en" ng-app="myfirstapp">
<head>
  <meta charset="utf-8">
  <title>my first app</title>
  <link rel="stylesheet" href="css/app.css">
  <link rel="stylesheet" href="css/bootstrap.css">
  <script src="lib/angular/angular.js"></script>
  <script src="js/app.js"></script>
  <script src="js/controllers.js"></script>
</head>
<body>
  <h1>My First App</h1>
  <div ng-controller="MyFirstAppController">
    <ul>
      <li ng-repeat="e in elementArray">
        <p>{{e.someKey}}</p>
      </li>
    </ul>
  </div>
</body>
</html> 
```

控制器如下所示：

```
function MyFirstAppController($scope) {
    $scope.elementArray = [
        { someKey : 'someValue1', someOtherKey : 'someOtherValue1' },
        { someKey : 'someValue2', someOtherKey : 'someOtherValue2' }
    ];
} 
```

我已经对此进行了大量的语法调整，但我一定错过了一些更基本的东西。任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:43:11.747

只需将其更改为：

```
<html lang="en" ng-app> 
```

这是 JSFiddle 的工作版本：http: [//jsfiddle.net/EgPYA/](http://jsfiddle.net/EgPYA/)

# html - z-index 问题 - 在菜单下方定位 css3 三角形

> ID：13617190
> 
> 赞同：0
> 
> 时间：2012-11-29T01:08:46.333
> 
> 标签：html, css, z-index

您好，感谢您花时间研究我的问题。

我正在尝试实现一个看起来[像这样](http://www.stretchshapes.net)的菜单：

这里的主要内容是为任一侧创建这些三角形，然后将它们放置在菜单下方以赋予其 3d 效果。

我让它工作只是在上面的网站上找到，但我似乎无法让它在这个其他项目上工作。

这是[我试图让它工作的网站](http://mikelucid.com/test.php)：

设置 将`z-index: -1;`三角形放在所有背景图像后面，包括白色背景`body`，在其他站点设置中，`z-index: -1;`将三角形放在身体背景上方。

我尝试将所有背景图像设置为`z-index: -1;`，将三角形设置为`z-index: 1;`，将菜单设置为，`z-index: 2;`但仍然无法正常工作。

谁能让我更好地了解如何在我的特定情况下使用 z-index 属性？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:25:38.807

我能够通过使用这个答案找出我的问题：stackoverflow.com/questions/8456575/3d-ribbon-corners-how-to-do

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:47:02.473

好的，我很难弄清楚你到底在看/想要什么，但是你正在使用的这些元素是定位的，对吗？如果 Z-index 未定位为绝对、相对或固定，则 Z-index 将不起作用。

[Z-index 上的 W3Schools](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

# postgresql - postgresql.conf max_prepared_transactions 不起作用

> ID：13617192
> 
> 赞同：7
> 
> 时间：2012-11-29T01:08:48.877
> 
> 标签：postgresql, transactions, prepare

我在 postgres 数据文件夹中打开了我的 postgresql.conf 文件，并将 max_prepared_connections 的值更改为非零值。

但是，每次我尝试使用“PREPARE TRANSACTION 'foo';”命令时，都会收到一条错误消息，指出 max_prepared_connections 设置为零。

我做错什么了吗？我只想能够使用准备事务命令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T06:46:08.450

更改此参数后，您必须重新启动 PosgreSQL 服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-10T10:32:41.757

转到安装 postgresql 的位置...在 windows 中，转到 C:\Program Files\PostgreSQL\9.5\data\postgresql.conf 打开，然后搜索“max_prepared_transactions”并取消注释。然后设置 max_prepared_transactions = 1
零禁用该功能（更改需要重新启动） 注意：增加 max_prepared_transactions 每个事务槽需要大约 600 字节的共享内存，加上锁空间（请参阅 max_locks_per_transaction）。除非您主动打算使用准备好的事务，否则不建议将 max_prepared_transactions 设置为非零。

之后在开始菜单中输入服务并搜索 postgresql 并从左上角停止服务。然后重新启动此服务。然后重新启动 jboss 服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-06T16:13:20.447

我想补充一点，可以有一个`C:\Program Files\PostgreSQL\10\share\postgresql.conf.sample`与`Files\PostgreSQL\9.5\data\postgresql.conf`. 因此，您还应该更改`max_prepared_transactions`该文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-14T18:37:03.180

1.  运行以下查询，例如 ALTER SYSTEM SET max_prepared_transactions = 100;
2.  重启服务
3.  通过运行以下查询进行验证：- SHOW max_prepared_transactions;

# linux - rsync 将文件更改到不同的目录

> ID：13617194
> 
> 赞同：2
> 
> 时间：2012-11-29T01:08:56.260
> 
> 标签：linux, rsync

我正在尝试将 rsync 从远程同步到本地，并将所有更改的文件放到不同的目录中。

例如，在远程盒子中，

```
/tmp
 -file1.txt
 -file2.txt
 -file3.txt 
```

在我当地

```
/tmp
 -file1.txt
 -file2.txt

/new 
```

如果我执行 rsync，我的本地将是

```
/tmp
 -file1.txt
 -file2.txt
 -file3.txt

/new
 -file3.txt 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T19:15:50.817

尝试选项`--compare-dest=DIR`，例如：

```
rsync --compare-dest=/tmp remotebox:/tmp /new 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-05T21:37:54.143

我必须做一些修改才能让它对我正常工作，但基本上我必须使用 rsync 两次。这对我来说似乎是非常错误的，但只要它对我有用，就没有关系。第一次调用`--compare-dest`仅用于将新文件同步到`/new`文件夹。第二次调用`/tmp`正常同步文件夹。

它应该看起来像这样：

```
rsync --compare-dest=/tmp remotebox:/tmp /new
rsync remotebox:/tmp /tmp 
```

# algorithm - 了解涉及列表附加的递归 SML 函数的运行时（使用 @）

> ID：13617196
> 
> 赞同：1
> 
> 时间：2012-11-29T01:09:01.523
> 
> 标签：algorithm, sml

我是算法分析和 SML 的新手，并且被以下 SML 函数的平均情况运行时挂断了。我会很感激一些关于我的想法的反馈。

```
fun app([]) = []
  | app(h::t) = [h] @ app(t) 
```

因此，在每次递归之后，我们都会得到一堆单元素列表（和一个无元素列表）。

```
[1]@[2]@[3]@...@[n]@[] 
```

`n`原始列表中的元素数量在哪里，`1, 2, 3, ..., n`只是为了说明我们正在谈论的原始列表中的哪些元素。`L @ R`花费时间与列表 L 的长度成线性关系。假设`A`每个元素 @ 花费的时间是恒定的，我想这就像：

```
[1,2]@[3]@[4]@...@[n]@[] took 1A
[1,2,3]@[4]@...@[n]@[]   took 2A
[1,2,3,4]@...@[n]@[]     took 3A
...
[1,2,3,4,...,n]@[]       took (n-1)A
[1,2,3,4,...,n]          took nA 
```

因此，我认为当时的复发会是这样的：

```
T(0) = C                 (if n = 0)
T(n) = T(n-1) + An + B   (if n > 0) 
```

Where`C`只是基本情况的最终匹配，`app([])`并且`B`是 的常数`h::t`。关闭递归，我们将得到这个（证明省略）：

```
T(n) = (n²+n)A/2 + Bn + C = (A/2)n² + (A/2)n + Bn + C = Θ(n²) 
```

这是我自己的结论，与提供给我的答案不同，即：

```
T(0) = B                 (if n = 0)
T(n) = T(n-1) + A        (if n > 0) 
```

封闭式

```
T(n) = An + B = Θ(n) 
```

这是完全不同的。（Θ（n）与Θ（n²）！）但这不是假设`L @ R`需要恒定时间而不是线性时间吗？例如，加法是真的

```
fun add([]) = 0
  | add(h::t) = h + add(t) (* n + ... + 2 + 1 + 0 *) 
```

甚至串联

```
fun con([]) = []
  | con(h::t) = h::con(t)  (* n :: ... :: 2 :: 1 :: [] *) 
```

我是误解了`L @ R`存在的方式还是我的分析（至少在某种程度上）是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:03:31.953

是的。手动运行`app [1,2,3]`命令，一次调用一个函数会给出：

```
app [1,2,3]
[1]@(app [2,3])
[1]@([2]@(app [3]))
[1]@([2]@([3]@(app [])))
[1]@([2]@([3]@([])))
[1]@([2]@[3])
[1]@([2,3])
[1,2,3] 
```

这是函数调用位于`@`.

将此与 的幼稚版本进行比较`rev`：

```
fun rev [] = []
  | rev (x::xs) = rev xs @ [x] 
```

这具有您期望的运行时间：一旦递归完全扩展为表达式`((([])@[3])@[2])@[1]`（采用线性时间），它需要 n + (n - 1) + (n - 2) + ... + 1，或 n(n +1)/2 或 O(n^2) 步来完成计算。更有效的`rev`可能如下所示：

```
local
  fun rev' [] ys = ys
    | rev' (x::xs) ys = rev' xs (x::ys)
in
  fun rev xs = rev' xs []
end 
```

# c# - 从 Activator.CreateInstance() 而不是对象返回所需的类型

> ID：13617200
> 
> 赞同：1
> 
> 时间：2012-11-29T01:09:58.577
> 
> 标签：c#, c#-4.0, system.reflection

我正在尝试创建一个指定`Type`用户想要拥有的实例。为了快速说明我的目的，请参阅下面的代码：

```
 static void Main(string[] args)
    {
        object o = GetInstance(typeof(int));
        Console.WriteLine("Created type: {0}", o.GetType().FullName);
    }

    public static object GetInstance(Type t)
    {
        Console.WriteLine("Creating instance of {0}", t.FullName);
        return Activator.CreateInstance(t);
    } 
```

问题是默认`Activator.CreateInstance()`返回**`object`**。此方法还有一个重载，例如`T Activator.CreateInstance<T>()`它是无参数的，并返回您指定为的类型`T`。

但是，问题是`T`在调用此方法时应该是硬编码的，因此应该是一个固定值。我正在尝试创建所需类的实例并将其作为其类型返回。

现在，如果您使用此方法，您应该编写如下内容：

```
int i = GetInstance(typeof(int)) as int 
```

我试图将其减少到：

```
int i = GetInstance(typeof(int)) 
```

有没有办法可以在里面进行投射`GetInstance`并摆脱这种`as int`重复？通过这种方式，我的返回类型（以及我将对象转换为的类型）*在编译时将是未知的*。

对我来说，这似乎是设计上不可能的，但如果你能弄清楚，我将不胜感激。

**编辑：**我被卡住的地方是，例如，当你在铸造时，`return (T) result`如果你使用的是通用方法，你可以这样做，但你不能这样做，`Type t = ...; return (t) result`这是行不通的。您不能转换为作为**编译时未知**的参数传递给您的类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-28T03:37:22.460

## 遵循已知模式

这不是一个新问题。这是任何允许特定类型返回值的 API 所面临的问题。例如，像 Newtonsoft 这样的 JSON 解析库（即 2019 年 .NET 程序员下载的最流行的单个 .NET 包）必须能够解析字符串并返回特定于类型的对象，该对象可能会或可能会在编译时不知道。效仿他们的榜样可能是有意义的。

Newtonsoft 在反序列化时公开**了三种**指定类型的方法。你可以像现在一样做：

```
//Cast required
var result = JsonConvert.DeserializeObject(text, typeof(MyType)) as MyType; 
```

您可以使用通用方法：

```
//No cast required, but you have to hardcode a type as a type parameter
var result = JsonConvert.DeserializeObject<MyType>(text); 
```

或者您可以将实例用作模板，这对于匿名类型来说非常有用，尽管您也可以将它与非匿名类一起使用。这个通过泛型类型推断工作：

```
//No cast required and no need to specify type; the type is inferred from the argument
var result = JsonConvert.DeserializeAnonymousType(text, new MyType()); 
```

**以下是你的做法：**

因此，为了让您完成这项工作，您的代码可能如下所示：

```
public object GetInstance(Type type)
{
    return Activator.CreateInstance(type);
}

int i = GetInstance(typeof(int)) as int;

public T GetInstance<T>()
{
    return Activator.CreateInstance<T>();
}

int i = GetInstance<int>();

public T GetInstance<T>(T template)
{
    return Activator.CreateInstance<T>();
}

int i = GetInstance(0); 
```

如果你这样做，很难想象任何程序员会在使用你的库时遇到麻烦，因为他们应该已经熟悉这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:36:30.980

其实你可以这样写`GetInstance`：

```
static T GetInstance<T>()
{
    return Activator.CreateInstance<T>();
} 
```

并使用它：

```
int j = GetInstance<int>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T02:17:41.510

这可能会帮助您创建所需类型的实例：

```
public class ConcreteFactory<T>  : AbstractFactory<T>
    {
        public override T CreateInstance(string typeName,params object[] parameters)
        {
            var path = Assembly.GetExecutingAssembly().CodeBase;
            var assembly = Assembly.LoadFrom(path);
            var type = assembly.GetTypes().SingleOrDefault(t => t.Name == typeName);
            return (T)Activator.CreateInstance(type, parameters);
        }
} 
```

这里的关键是泛型类型 T 可以用来转换创建的实例，这可以用作模板来创建具有参数化构造函数的任何类型的实例

# java - 如何在mac上卸载java开发者包

> ID：13617202
> 
> 赞同：1
> 
> 时间：2012-11-29T01:10:06.873
> 
> 标签：java, macos, rjb

我在安装 rjb 时遇到了一些问题。没有这样的文件或目录 - /System/Library/Frameworks/JavaVM.framework/Headers 我搜索了安装Java开发人员包的解决方案。但是可能是我安装了错误的版本。安装后，还是没有那个目录。所以我想卸载它。有没有人可以告诉我该怎么做。非常感谢。

# node.js - 处理来自 EventEmitter 的错误

> ID：13617203
> 
> 赞同：2
> 
> 时间：2012-11-29T01:10:12.660
> 
> 标签：node.js

在继承 EventEmitter 的类中，我们通常有两个点来处理错误。

```
someClass.on('error', function eventEmitterCallback(err){/* handle error*/});
//and
someClass.someAsyncAction(function asyncActionCallback(err){/* handle error*/}) 
```

我们不知道错误会出现在哪里，以及会执行什么回调。例如，[乏味](http://pekim.github.com/tedious/api-connection.html)（MS SQL Server 的模块）：

*   密码错误：两个回调
*   不正确的数据库名称：仅`eventEmitterCallback`；`someAsyncAction`执行没有错误
*   不正确的主机：仅`someAsyncAction`
*   主机IP格式不正确（例如`1234.10.0.1`）：node.js刚刚关闭，没有任何错误:)

我想创建一个简单的函数，它将模块中的所有错误委托给回调的第一个参数。

```
function getSomeStuffFromDb(callback) { 
    var connection = new dbConnection(options);
    connection.on('error', callback);
    connection.connect(function(err) {
        if (err) return callback(err);
        /*exec SQL query*/
    }
} 
```

当然，如果有任何错误原因，我只想执行一次回调。我该怎么做呢？如何正确地将两点错误处理合二为一？也许如果在我的类中我使用继承 EventEmiter 的类，我也需要从 EventEmitter 继承我的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:23:31.393

`once`如果您想避免反复运行相同的事件处理程序，请使用事件绑定。鉴于您的代码示例，我不相信`once`并且`on`会表现出任何不同，因为该`connection`对象不是长期存在的，但它更清楚地传达了意图。然后使用闭包范围标志来避免事件处理程序和回调响应相同的底层错误。

```
function getSomeStuffFromDb(callback) { 
    var handled = false;
    var connection = new dbConnection(options);
    connection.once('error', function (err) {
        if (err && !handled) {
            handled = true;
            return callback(err);
        }
    });
    connection.connect(function(err) {
        if (err) {
          if (handled) {
            return;
          } else {
            handled = true;
            return callback(err);
          }
        }
        /*exec SQL query*/
        callback();
    }
} 
```

# c# - Asp.net 母版页未在 IE 中显示

> ID：13617209
> 
> 赞同：1
> 
> 时间：2012-11-29T01:10:37.420
> 
> 标签：c#, asp.net, internet-explorer, master-pages

我用 asp.net 为我的公司建立了一个内部站点。我将站点复制到服务器并在 Firefox 和 ie 中测试了每个页面，一切看起来都很好，但我注意到我忘记为几个页面添加标题。添加标题并将更新的文件复制到服务器后，在 ie 中查看时不再显示我的母版页。仍然显示所有内容，但我的母版页中没有任何内容。Firefox 显示一切正常。我已尝试重新复制所有文件并重新启动应用程序池。当我使用 ie 从服务器浏览网站时，一切正常。当我使用 vwd2010 在本地预览站点时，一切正常。我尝试使用 ie 从 3 台不同的机器上查看该站点，它们都显示相同的内容。有没有人见过这样的事情？

母版页

```
 <%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage.master.cs"     Inherits="MasterPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>
    <link rel="Stylesheet" type="text/css" href="styles/Styles.css" />
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <div class="page">
            <div class="header">
                <div class="title">
                    <h1>
                        register support
                    </h1>
                </div>
                <div class="clear hideSkiplink">
                <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                    <Items>
                        <asp:MenuItem NavigateUrl="default.aspx" Text="Home"/>
                        <asp:MenuItem NavigateUrl="howto.aspx" Text="Common Problems"/>
                        <asp:MenuItem NavigateUrl="search.aspx" Text="Search"/>
                        <asp:MenuItem NavigateUrl="~/incidents.aspx" Text="Incidents" />
                    </Items>
                </asp:Menu>
                </div>
            </div>
            <div class="main">
                <asp:ContentPlaceHolder ID="ContentPlaceHolder2" runat="server" />
            </div>      

        </div>
        <div class="bottomlinks">
            <a href="Admin/managebroadcasts.aspx">[administrators]</a>    
        </div>  
    </div>
    </form>
</body>
</html> 
```

内容页：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder2" Runat="Server">
    <div>
        <asp:PlaceHolder ID="place1" runat="server" />
        <asp:PlaceHolder ID="place2" runat="server" />
    </div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:34:47.483

我正在处理母版页，我想看看你的 .aspx 网页的顶部是什么样子的。例如，它应该看起来像这样

```
<%@ Page Title="Student Registration" Language="C#" MasterPageFile="~/Site.Master"
    AutoEventWireup="true" CodeBehind="StudentInfo.aspx.cs" Inherits="MRC_IDSWeb.Pages.StudentInfo" MaintainScrollPositionOnPostback="true" %> 
```

分别在页面标题中设置页面标题.. 不像在不使用 MasterPages 的 .aspx 页面中那样在 html 中设置页面标题希望这对您有意义

# php - jQuery/ajax 表单不工作 php

> ID：13617210
> 
> 赞同：0
> 
> 时间：2012-11-29T01:10:39.847
> 
> 标签：php, jquery, html, ajax, forms

HTML 代码：

```
<form class="contact_form" action="" name="contact_form">
<ul><li>
<input type="email" name="email" placeholder="Enter your email here" required />
</li><li>
<button class="submit" type="submit" style="float:left" onclick="form()"onsubmit="hide_form('container_subscribe')">Send</button>
</li></ul>
</form> 
```

jQuery/Ajax 代码：

```
$(function() {  
  $(".submit").click(function() {  
    // validate and process form here  
    var field1 = $('input[name=email]').val();
    $.ajax({
        type: "POST",
        url: "mail.php?f1="+field1,
    });
  });  
}); 
```

PHP代码：

```
<?php
$to      =  $_POST['field1'];
$subject =  'the subject';
$message =  'hello';
$headers =  'From: webmaster@example.com' . "\r\n" .
               'Reply-To: webmaster@example.com' . "\r\n" .
               'X-Mailer: PHP/' . phpversion();
mail($to, $subject, $message, $headers);
?> 
```

如果我使用 $_GET 而不是 $_POST 单独运行 php 脚本（发送邮件），则 php 脚本正在工作，所以我认为 ajax 无法与 php 文件通信。我不知道如何调试它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:12:14.103

一个问题是您`f1`在 AJAX 和`field1`PHP 中调用参数。这些需要匹配。

您还需要像这样编写您的 AJAX

```
$.ajax({
    type: "POST",
    data: "f1="+field1,
    url: "mail.php"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:14:35.643

```
$(function() {  
$(".submit").click(function() {  
  // validate and process form here  
 var field1 = {'field1' : $('input[name=email]').val()};
 $.ajax({
     type: "POST",
     url: "mail.php",
     data: field1,
     success: function(out){ alert('Mail sended!'); },
     error: function(err){ alert(err.statusText); }
    });
  });  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T01:14:47.267

在下面试试这个。

```
$.ajax({
     url: "mail.php",
     type: "POST", 
     data:$(".contact_form").serialize(),
     success:function(result)
         alert(result);
     },
     error:function(){
         alert("Error");
     },
}); 
```

这将允许您向表单添加任意数量的字段，并在 PHP 级别通过它们的名称检索它们。

# c# - 按钮点击事件不会在第一次点击时触发，但总是在后续点击时触发

> ID：13617217
> 
> 赞同：0
> 
> 时间：2012-11-29T01:11:18.200
> 
> 标签：c#, asp.net, .net, ajax

我有一个正在处理的大型 asp.net 项目（ASP.NET 的新手），我遇到了一些动态添加的按钮在第一次点击时没有触发其点击事件的问题。奇怪的是，这并不总是发生。有时它们在第一次单击时工作得很好，有时如果我运行项目并遵循完全相同的步骤，则按钮在第一次单击时将不起作用。

这里有一些背景...

有问题的页面用于将某些内容的不同版本部署到客户端。该页面有一个包含一堆表格的 UpdatePanel，并且在任何给定时间只有其中一个是可见的。每个表代表一个类似向导的工作流的不同“屏幕”。因此，当页面加载时，第一个表是可见的，而其他所有表都不可见，并且第一页有一个带有部署类型的单选按钮列表和一个继续按钮。单击“继续”按钮时，会为下一个“屏幕”加载一些数据，第一个表不可见，下一个表可见。

所以现在你已经有了一些背景，关于这个问题......

其中一张表上有一个空的 Accordion，当点击前一个“屏幕”的 Continue 按钮时，Accordion 会动态填充来自 DB 的数据；每个主要版本都有一个窗格，每个窗格中都有一个表格，每个次要版本都有一行。这些行中的每一行都有版本号、部署状态和一个操作按钮，允许用户部署版本，或者如果它已经部署，他们可以重新部署。无论如何，这些操作按钮是我遇到的问题，有时它们在第一次单击时不起作用。就像我说的，按钮是在前一个“屏幕”上的继续按钮的单击事件中创建的，我设置了每个按钮的 ID，并将事件链接到创建按钮时的单击事件。我可以对此进行调试并看到添加的事件处理程序没有问题，但是当我第一次单击按钮时（这实际上并不一致；有时它们第一次工作！）他们什么也没做，但是在第二次单击时，它们可以正常工作。我有一个名为 populateAccordion() 之类的方法，它负责从数据库中实际加载数据并使用其中的按钮创建这些记录。如果它是回发，我会在 page_load 上调用此方法，但前提是来自先前“屏幕”的缓存选择不为空（即，我在先前的“屏幕”上缓存了 subjectId 和 centerId，并且仅在它们不为空时加载 Accordion 数据） . 有时他们第一次工作！）他们什么都不做，但在第二次点击时他们正常工作。我有一个名为 populateAccordion() 之类的方法，它负责从数据库中实际加载数据并使用其中的按钮创建这些记录。如果它是回发，我会在 page_load 上调用此方法，但前提是来自先前“屏幕”的缓存选择不为空（即，我在先前的“屏幕”上缓存了 subjectId 和 centerId，并且仅在它们不为空时加载 Accordion 数据） . 有时他们第一次工作！）他们什么都不做，但在第二次点击时他们正常工作。我有一个名为 populateAccordion() 之类的方法，它负责从数据库中实际加载数据并使用其中的按钮创建这些记录。如果它是回发，我会在 page_load 上调用此方法，但前提是来自先前“屏幕”的缓存选择不为空（即，我在先前的“屏幕”上缓存了 subjectId 和 centerId，并且仅在它们不为空时加载 Accordion 数据） .

这对于发布代码来说有点太复杂了，但是有没有人知道可能出了什么问题，或者我怎么能解决这个问题？我已经做了很多调试，并且我的 populateAccordion() 总是在前一个屏幕的 Continue 按钮单击以及之后的每个 page_load 上正确调用，并且 Click 事件总是在创建按钮时正确连接方法，所以我无法弄清楚为什么点击事件不会在第一次尝试时触发。

问题与本文中提到的问题相似...

[https://stackoverflow.com/a/2784140/1246574](https://stackoverflow.com/a/2784140/1246574)

但我肯定会为我的所有按钮设置 ID，因此该帖子中提到的解决方案不能解决我的问题。

我还阅读了很多其他帖子，这些帖子说将您的代码从 Page_Load 移动到 Page_PreRender，但在这种情况下这并没有改变任何东西；它的作用完全相同。

我还尝试设置按钮的 UseSubmitBehavior = false，但没有运气。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:18:07.387

这可能是一个延迟问题。听起来您可以在页面完全加载所有 JS 之前单击控件。那里有 onload() 函数吗？也许您可以尝试隐藏控件直到页面完成加载？

# uinavigationcontroller - 在 CCLayer 中添加 UINavigationController

> ID：13617221
> 
> 赞同：0
> 
> 时间：2012-11-29T01:11:36.507
> 
> 标签：uinavigationcontroller, crash, cocos2d-iphone, cclayer

我正在尝试创建一个使用 cocos2d 作为主屏幕的应用程序，以及一个 UINavigationController 用于一些表和信息的应用程序。我使用此代码尝试将 UINavigationController（设置）推送到视图中

```
UINavigationController *controller = [[UINavigationController alloc] init];
Settings *newTableViewController = [[Settings alloc] init];
[controller pushViewController:newTableViewController animated:YES]; 
```

此代码在 CCLayer 中执行，Settings 是 UINavigationController。

我收到这个错误

`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Pushing a navigation controller is not supported'`

这是否意味着我不能将 NaviagationController 推送到 CCLayer 中？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:37:56.050

您不能“将视图控制器推送到 CCLayer”。您使用 cocos2d 所做的一切都发生在一个 OpenGL 视图中。

如果你真的想做这样的事情，你可以改变应用程序的根视图控制器的创建。使您的应用程序视图控制器成为 UINavigationController 而不是 UIViewController 的子类，然后只需从您的应用程序委托中获取 rootViewController 并在需要时将任何其他视图控制器推送/弹出到它。无论如何，我不认为这是一个好主意。

关于您的异常，我假设您的 Settings 类是 UINavigationController 的子类。您要推送到导航控制器的所有控制器都必须派生自 UIViewController，而不是 UINavigationController。

# java - Java JCombobox 不会更改 JPanel 中的图像

> ID：13617223
> 
> 赞同：0
> 
> 时间：2012-11-29T01:11:36.693
> 
> 标签：java, swing, jcombobox

我有个问题。我有一个 JPanel 的元素。在这个 JPanel 中将有四个 JButton 和图像。此图像是“绿色 LED 灯”，会根据按下的 JButton 而变化。它工作得很好。但我也希望 JComboBox 更改此参数。

这就是问题所在。虽然参数（从 1 到 4）在变化，（这显示 JLabel 靠近 LED），但图片（LED 灯）不想将其更改为右侧。

[截屏](http://zapodaj.net/images/e0b2488304678.jpg)

该计划分为3类。

**MyFrame.class** 这个主类。

```
public class MyFrame extends JFrame {

int ctrlTriggers = 1;
private JLabel label = new JLabel();
private Triggers triggers;
private String[] typeTrig = {"1", "2", "3", "4"};

public MyFrame() {
  JFrame frame = new JFrame("JComboBox Problem");
  frame.setBounds(50, 0, 800, 240);
  frame.setLayout(new BorderLayout());

  int tvalue = 1;
  String tstr = Integer.toString(tvalue);
  JPanel panelTrig = new JPanel(new BorderLayout());
  label = new JLabel(tstr, 4);
  panelTrig.add(label);
  final JLabel et = label;

  triggers = new Triggers(typeTrig, "trigger " + Integer.toString(1));

  triggers.addChangeListener(new ChangeListener() {
     public void stateChanged(ChangeEvent e) {
        Triggers tr = (Triggers) e.getSource();
        int vol;

        vol = (int) tr.getValue();
        et.setText(Integer.toString(vol));

     }
  });

  panelTrig.add(triggers, BorderLayout.LINE_START);

  // JCOMBOBOX
  JPanel pCombo = new JPanel();
  pCombo.setLayout(new FlowLayout());
  Presets combo = new Presets();
  combo.addChangeListener(new ChangeListener() {
     public void stateChanged(ChangeEvent e) {
        Presets presetcombo = (Presets) e.getSource();
        int tval;
        tval = (int) presetcombo.getValue(ctrlTriggers);
        label.setText(Integer.toString(tval));
        triggers.setValue(tval);
     }
  });

  pCombo.add(combo, BorderLayout.CENTER);
  frame.add(pCombo, BorderLayout.CENTER);
  frame.add(panelTrig, BorderLayout.LINE_START);

  frame.addWindowListener(new WindowAdapter() {
     public void windowClosing(WindowEvent e) {
        System.exit(0);
     }
  });

  setDefaultCloseOperation(DISPOSE_ON_CLOSE);
  frame.show();
}

public static void main(String[] args) {
  SwingUtilities.invokeLater(new Runnable() {
     public void run() {
        new MyFrame();
     }
  });
 }
} 
```

**Triggers.class**这个类是 JPanel，其中有 4 个 JButton 和 'LED like image'

```
public class Triggers extends JPanel
    implements ActionListener, ItemListener {

public Triggers(String s[], String name) {

  JPanel panel = new JPanel(new BorderLayout());
  this.value = Integer.parseInt(s[selected]);

  for (int i = 0; i < s.length; i++) {

     ImageIcon cup = new ImageIcon();
     button[i] = new JButton(z[i], cup);
     button[i].setPreferredSize(new Dimension(70, 25));

     Font font = button[i].getFont();
     button[i].setFont(new Font(font.getFontName(), font.getStyle(), 10));
     button[i].setActionCommand(s[i]);

     if (i == selected) {
        button[i].setSelected(true);
     } else {
        button[i].setSelected(false);
     }
  }

  ButtonGroup group = new ButtonGroup();

  for (int i = 0; i < s.length; i++) {
     group.add(button[i]);
     button[i].addActionListener(this);
     button[i].addItemListener(this);

  }

  diody = new JLabel(createImageIcon("/resources/diody/"
          + this.value
          + ".png"));

  diody.setPreferredSize(new Dimension(20, 100));

  JPanel triggs = new JPanel(new FlowLayout());
 triggs.setPreferredSize(new Dimension(80, 120));

  for (int i = 0; i < s.length; i++) {
     triggs.add(button[i]);
  }

  panel.add(triggs, BorderLayout.LINE_START);
  panel.add(diody, BorderLayout.LINE_END);
  add(panel);

}

public void actionPerformed(ActionEvent e) {

  cmd = e.getActionCommand();
  diody.setIcon(createImageIcon("/resources/diody/"
          + cmd
          + ".png"));

  if (cmd.equals("1")) {

     setValue(1);

  } else if (cmd.equals("2")) {

     setValue(2);

  } else if (cmd.equals("3")) {

     setValue(3);

  } else if (cmd.equals("4")) {

     setValue(4);
  }
}

public static ImageIcon createImageIcon(String path) {
  java.net.URL imgURL = Triggers.class.getResource(path);
  if (imgURL != null) {
     return new ImageIcon(imgURL);
  } else {
     System.err.println("Couldn't find file: " + path);
     return null;
  }
}

public int setController() {
  return value;
}

public void setValue(int k) {

  this.value = k;
  cmd = Integer.toString(this.value);
  repaint();
  fireChangeEvent();
}

public int getValue() {
  return this.value;
}

public void setSel(int k) {
  selected = k;
  repaint();
  fireChangeEvent();
}

public void itemStateChanged(ItemEvent ie) {
  String s = (String) ie.getItem();
}

public void addChangeListener(ChangeListener cl) {
  listenerList.add(ChangeListener.class, cl);

}

public void removeChangeListener(ChangeListener cl) {
  listenerList.remove(ChangeListener.class, cl);
}

protected void fireChangeEvent() {
  Object[] listeners = listenerList.getListenerList();
  for (int i = listeners.length - 2; i >= 0; i -= 2) {
     if (listeners[i] == ChangeListener.class) {
        if (changeEvent == null) {
           changeEvent = new ChangeEvent(this);
        }
        ((ChangeListener) listeners[i + 1]).stateChanged(changeEvent);
     }
  }
}
private ChangeEvent changeEvent = null;
private EventListenerList listenerList = new EventListenerList();
private JLabel diody;
private int x = 1;
private int y = 4;
private JButton button[] = new JButton[y];
double border = 4;
double vborder = 1;
int controller[] = new int[4];
String z[] = {"1", "2", "3", "4"};
private int selected;
private int value;
private String cmd;
} 
```

**类 Presets**这里是 JCombobox。

```
public class Presets extends JPanel
       implements ActionListener {
  private int value;
  private int[] ctrlIdx = new int[27];
  private int controller;
  private ChangeEvent changeEvent = null;
  private EventListenerList listenerList = new EventListenerList();
  private JLabel label;
  private String[][] presets = {
     {"0", "3"},
     {"1", "2"},
     {"2", "3"},
     {"3", "1"},
     {"4", "4"},
     {"5", "2"},};
  String[] ctrlName = {"preset 1 (value 3)", "preset 2 (value 2)", "preset 3 (value 3)", "preset 4 (value 1)", "preset 5 (value 4)", "preset 5 (value 2)"};

  public Presets() {

     JPanel panel = new JPanel();
     panel.setLayout(new BorderLayout());
     panel.setPreferredSize(new Dimension(600, 30));

     JComboBox combolist = new JComboBox(ctrlName);
     combolist.setSelectedIndex(2);
     combolist.addActionListener(this);

     combolist.setPreferredSize(new Dimension(300, 30));
     label = new JLabel();
     label.setFont(label.getFont().deriveFont(Font.ITALIC));
     label.setHorizontalAlignment(JLabel.CENTER);
     int indeks = combolist.getSelectedIndex();
     updateLabel(ctrlName[combolist.getSelectedIndex()], indeks);

     label.setBorder(BorderFactory.createEmptyBorder(10, 0, 0, 0));
     label.setPreferredSize(new Dimension(300, 30));

     panel.add(combolist, "East");
     add(panel);
     setPreferredSize(new Dimension(600, 40));

  }

  public void setSelectedItem(int a) {
  }

  public void setValue(int c, int v) {

     controller = c;
     value = v;
     ctrlIdx[controller] = value;

     repaint();
     fireChangeEvent();

  }

  public int getController() {
     return controller;
  }

  public int getValue(int c) {
     int w = (int) ctrlIdx[c];
     return (int) w;
  }

  public void actionPerformed(ActionEvent e) {
     JComboBox cb = (JComboBox) e.getSource();
     String pres = (String) cb.getSelectedItem();
     int indeks = cb.getSelectedIndex();
     updateLabel(pres, indeks);

     for (int i = 0; i < ctrlName.length; i++) {
        for (int j = 0; j < 2; j++) {

           setValue(j, Integer.parseInt(presets[indeks][j]));
        }
     }

  }

  protected void updateLabel(String name, int ii) {

     label.setToolTipText("A drawing of a " + name.toLowerCase());

  }

  protected static ImageIcon createImageIcon(String path) {
     java.net.URL imgURL = Presets.class.getResource(path);
     if (imgURL != null) {
        return new ImageIcon(imgURL);
     } else {
        System.err.println("Couldn't find file: " + path);
        return null;
     }
  }

  public void addChangeListener(ChangeListener cl) {
     listenerList.add(ChangeListener.class, cl);
  }

  public void removeChangeListener(ChangeListener cl) {
     listenerList.remove(ChangeListener.class, cl);
  }

  protected void fireChangeEvent() {

     Object[] listeners = listenerList.getListenerList();

     for (int i = listeners.length - 2; i >= 0; i -= 2) {
        if (listeners[i] == ChangeListener.class) {

           if (changeEvent == null) {
              changeEvent = new ChangeEvent(this);
           }
           ((ChangeListener) listeners[i + 1]).stateChanged(changeEvent);
        }
     }
  }

} 
```

有人可以帮助我，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:41:13.253

您的图像仅在`actionPerformed`您的类的方法中开始加载`Triggers`，这意味着当您调用`setValue`以响应类`stateChanged`引发的事件时`Presets`，不会开始加载新图像。

移动您的图像加载逻辑，使其在方法中或由方法`setValue`触发`setValue`

# sql - 将多行选择到列中 - 动态透视

> ID：13617224
> 
> 赞同：1
> 
> 时间：2012-11-29T01:11:44.207
> 
> 标签：sql, pivot

以下是初始查询返回的内容：

```
plan_id   Rep_id     rep_nm         employee_id    Row_id
6720      35         Robert Jones   160            1
6720      36         Pam Smith      23             2
6720      37         Erik Johnson   85             3
6720      38         Sally Ells     212            4
6719      40         Barbara Wax    168            5 
```

我需要使行如下：

```
plan_id  Rep_id1 rep_nm1      emp_id1  Rep_id2  rep_nm2   emp_id2 Rep_id3  etc.
6720     35      Robert Jones 160      36       Pam Smith 23      Erik Johnson
6719     40      Barbara Wax  168      NULL     NULL      NULL    NULL 
```

最大`rep_id*`列数为 5。我尝试为此类示例搜索数据透视查询，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:48:52.170

您没有指定您使用的是什么 RDBMS，但如果您使用的是 SQL 服务器，那么您可以同时实现`UNPIVOT`和`PIVOT`函数。如果您知道要使用多少个值，则可以对这些值进行硬编码：

```
select *
from
(
  select plan_id, value, col+cast(rn as varchar(10)) col
  from
  (
    select plan_id, 
      cast(rep_id as varchar(12)) rep_id, 
      rep_nm, 
      cast(employee_id as varchar(12)) employee_id, 
      row_number() over(partition by plan_id order by rep_id) rn
    from yourtable
  ) src
  unpivot
  (
    value
    for col in (rep_id, rep_nm, employee_id)
  ) up
) un
pivot
(
  max(value)
  for col in ([rep_id1], [rep_nm1], [employee_id1], 
              [rep_id2], [rep_nm2], [employee_id2],
              [rep_id3], [rep_nm3], [employee_id3],
              [rep_id4], [rep_nm4], [employee_id4])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/2865a/13)

但是如果你有一个未知数量的值，那么你可以使用类似于这样的动态 SQL：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name not in ('plan_id', 'Rep_id', 'Row_id')
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name 
                         + cast(t.rn as varchar(10)))
                    from
                    (
                      select row_number() over(partition by plan_id order by rep_id) rn
                      from yourtable
                    ) t
                    cross apply sys.columns as C
                   where C.object_id = object_id('yourtable') and
                         C.name not in ('plan_id', 'Rep_id', 'Row_id')
                   group by c.name, t.rn
                   order by t.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select plan_id, value, col+cast(rn as varchar(10)) col
        from 
        (
          select plan_id, 
            cast(rep_id as varchar(12)) rep_id, 
            rep_nm, 
            cast(employee_id as varchar(12)) employee_id, 
            row_number() over(partition by plan_id order by rep_id) rn
          from yourtable
        ) x
        unpivot
        (
          value
          for col in ('+ @colsunpivot +')
        ) u
      ) src
      pivot
      (
        max(value)
        for col in ('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/46dcb/7)

两者都会产生相同的结果：

```
| PLAN_ID | EMPLOYEE_ID1 |      REP_NM1 | EMPLOYEE_ID2 |   REP_NM2 | EMPLOYEE_ID3 |      REP_NM3 | EMPLOYEE_ID4 |    REP_NM4 |
------------------------------------------------------------------------------------------------------------------------------
|    6719 |          168 |  Barbara Wax |       (null) |    (null) |       (null) |       (null) |       (null) |     (null) |
|    6720 |          160 | Robert Jones |           23 | Pam Smith |           85 | Erik Johnson |          212 | Sally Ells | 
```

# java - 错误无法访问 jarfile C:\Jar

> ID：13617226
> 
> 赞同：14
> 
> 时间：2012-11-29T01:12:12.240
> 
> 标签：java, command-line

我的 jar 文件 P2.jar（它有一个 main 方法和清单文件）位于`C:\Jar Folder`. 我尝试像这样从 cmd 运行它：

`C:SomeRandomFolder> java -jar C:\Jar Folder\P2.jar`

我得到错误：

```
unable to access jarfile C:\Jar 
```

当我从 jar 所在的文件夹中运行它时，它可以工作，如下所示：

```
C:\Jar Folder> java -jar P2.jar 
```

为什么我不能使用第一个命令？为什么我必须转到我的 jar 文件的目录？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-29T01:15:41.270

那是因为路径名中有空格。在 Windows 上，使用引号：

`java -jar "C:\Jar Folder\P2.jar"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T23:26:24.830

如果您在终端中，并且您所在的文件夹已从您下方删除并替换为相同的内容，则 jar 文件将显示为`ls`，但由于当前目录已删除并替换为看起来很像。

我也遇到了这个错误：

```
el@apollo:/myproject/build/jar$ java -jar CalculateStats.jar
Unable to access jarfile CalculateStats.jar 
```

要解决这个问题。 `cd`建立一个目录并`cd`返回，如下所示：

```
el@apollo:/myproject/build/jar$ cd ..
el@apollo:/myproject/build$ cd jar/
el@apollo:/myproject/build/jar$ java -jar CalculateStats.jar
Program completed successfully 
```

# java - 打开文件以读取数字并将其添加到链接列表

> ID：13617228
> 
> 赞同：1
> 
> 时间：2012-11-29T01:12:14.013
> 
> 标签：java, file-io

使用文件和链表。我从文件中读取双数并应该将其添加到“链接列表”的代码。当它显示数字时，它要求用户输入一个双数字。在输出中，它不会将键入的数字添加到链接列表中。不知道如何将这些数字添加到链接列表中，因此我可以对其进行操作，例如（添加/删除）。

```
public class LinkList
{
  public static void main(String [] args) 
  {
    linkedListNumbers numbers= new linkedListNumbers();
    numbers.newLinkList();   
    numbers.addElementToList();
  }
}

class NumNode 
{
  private double num;
  private NumNode next;

  public NumNode()
  { 
    next = null;
  }

  public NumNode(double num)
  {
    this.num = num;
    next = null;
  }

  public void setNum(double num)
  {
    this.num = num;
  }

  public double getNum()
  {
    return num;
  }

  public void setNext(NumNode next)
  {
    this.next = next;
  }

  public NumNode getNext()
  {
    return next;
  }

  public String toString()
  {
    String str = "" + num;
    return str;
  }
}

class linkedListNumbers
{
  private NumNode head;
  private int count;
  NumNode aNode = new NumNode();

  public void newLinkList()
  {
    Scanner scan = new Scanner(System.in);

    Scanner fileScan;
    boolean validName = false;
    double num = 0.0;
    boolean validNumber = false;

    NumNode current = null;
    NumNode previous = null;

    do
    {
      System.out.print("Enter file name: ");
      String str = scan.nextLine();
      try 
      {
        fileScan = new Scanner(new File(str));
        validName = true;

        double count = 0;
        while(fileScan.hasNextLine())
        {
          try
          {
            str = fileScan.nextLine();
            num = Double.parseDouble(str);
            validNumber = true;
            count++;
            System.out.print(String.format("\t%6.2f", num));
          }
          catch (NumberFormatException nfe) 
          {
            //System.out.println("is not a Double number");
          }   
        }

        System.out.println("\nNumber of nodes = " + count);
        System.out.println(aNode);
      }
      catch (FileNotFoundException fnfe)
      {
        System.out.println("Invalid File name: enter again");
      }
    } while(!validName);
  }

  public void printList()
  {
    NumNode current = head;
    int reading = 0;
    while(current!= null)
    {
      System.out.printf("\t%6.2f", ++reading, current.toString());
    }
  }

  public void addElementToList()
  {
    Scanner scan = new Scanner(System.in);
    boolean validN = false;
    double num = 0.0;
    NumNode current = null;
    NumNode previous = null;
    double numToAdd = 0.0;

    double count =0;
    do
    {
      System.out.println("Enter double number");
      String str = scan.nextLine();

      try
      {
        num = Double.parseDouble(str);
        aNode.setNext(head);
        head = aNode;
        count++;
      }
      catch (NumberFormatException nfe) 
      {
        System.out.println("is not a Double number");
      }   
    } while(!validN && count<1);

    System.out.println(aNode.toString());
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:52:02.917

这不能回答你的问题；我只是有一些关于设计的不请自来的建议：linkedListNumbers 类应该只控制数据结构而不依赖任何 I/O 操作。我建议您首先修改`addElementToList()`以获取一个参数，该参数是要添加到列表中的元素。这个方法应该只关心那个特定的任务：向你的链表添加一个元素。所有的 I/O 逻辑都应该在某个地方的单独方法中。同样，该`newLinkedList()`方法不应包含任何 I/O 逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T02:04:30.357

首先，一些一般性建议：

1.  正如 Code-Guru 所说，您的 LinkedListNumbers 类应该只控制数据结构——不要在这里搞乱文件 I/O。
2.  从小处着手，然后努力。在编写处理文件 I/O 的代码**之前**，设计/编写代码以将项目添加到 LinkedList 。使用小数据集进行增量测试。以后可以省去很多麻烦；我保证。 `:)`

通常，LinkedList 有一个`head`节点，该节点存储在主程序级别的变量中。 `head`存储对 LinkedList 中第一个节点的引用。

另一个节点，称为`tail`也被存储；`tail`存储对 LinkedList 中最近添加的节点的引用。

每个节点有两个属性：

1.  在您的实现中称为子节点`next`
2.  节点的值，在您的实现中称为`num`.

要将项目添加到 LinkedList，过程是：

1.  使用新值创建一个临时节点。（我将调用此节点`tempNode`。）
2.  将当前`tail`的孩子设置为`tempNode`.
3.  更新`tail`节点以指向 LinkedList 中的（新的）最后一个节点——这个新的最后一个节点恰好是`tempNode`.

因此，让我们创建一个名为的子例程`add(double num)`，将一个值添加到 LinkedList 的末尾。（我正在用半伪代码编写——你必须处理经过微调的 Java。）

```
add(double num) {
  //Step 1 from above
  NumNode tempNode = new NumNode(num)

  //Step 2
  tail.child = tempNode

  //Step 3
  tail = tempNode
} 
```

现在，在伪代码中，填充链表的程序：

```
//These should be declared globally so the add method can access them...
NumNode head
NumNode tail

//The first node is different--here you set the head.
head = new NumNode(firstReadValue)
tail = head

//Now loop through
while (There remains lines to read) {
  add(nextReadValue)
} 
```

让我知道这是否需要更多解释。

# python - 如何在烧瓶中使用 g.user global

> ID：13617231
> 
> 赞同：63
> 
> 时间：2012-11-29T01:12:22.980
> 
> 标签：python, flask, jinja2, flask-login

据我了解 Flask 中的 g 变量，它应该为我提供一个全局位置来存储数据，例如在登录后保存当前用户。这个对吗？

我希望我的导航在整个站点上显示我的用户名，一旦登录。

我的观点包含

```
from Flask import g #among other things 
```

在登录期间，我分配

```
user = User.query.filter_by(username = form.username.data).first()
if validate(user):
    session['logged_in'] = True
    g.user = user 
```

我似乎无法访问 g.user。相反，当我的 base.html 模板具有以下内容时...

```
<ul class="nav">
    {% if session['logged_in'] %}
        <li class="inactive">logged in as {{ g.user.username }}</li>
    {% endif %}
</ul> 
```

我得到错误：

```
jinja2.exceptions.UndefinedError
UndefinedError: 'flask.ctx._RequestGlobals object' has no attribute 'user' 
```

否则登录工作正常。我错过了什么？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-11-29T17:40:32.843

`g`是一个[线程本地](http://flask.pocoo.org/docs/advanced_foreword/#thread-locals-in-flask)并且是每个请求的（请参阅[代理注意事项](http://flask.pocoo.org/docs/reqcontext/#notes-on-proxies)）。这`session`也是一个本地线程，但在默认上下文中被持久*化为*MAC 签名的 cookie 并发送到客户端。

您遇到的问题`session`是在每个请求上都重新构建（因为它被发送到客户端并且客户端将其发送回给我们），而数据集`g`仅在*此*请求的生命周期内可用。

最*简单*的事情（注意`simple != secure`- 如果您需要安全，请查看[Flask-Login](https://flask-login.readthedocs.org/en/latest/)）是简单地将用户的 ID 添加到会话并在每个请求上加载用户：

```
@app.before_request
def load_user():
    if session["user_id"]:
        user = User.query.filter_by(username=session["user_id"]).first()
    else:
        user = {"name": "Guest"}  # Make it better, use an anonymous User instead

    g.user = user 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-10-08T03:20:39.760

小修正，g 对象现在绑定到应用程序上下文而不是请求上下文。

[“从 Flask 0.10 开始，它存储在应用程序上下文中，不再存储在请求上下文中，这意味着如果仅绑定了应用程序上下文而不是请求，它就变得可用。”](https://flask.palletsprojects.com/en/1.1.x/api/#flask.g)

* * *

## 回答 #3

> 赞同：-29
> 
> 时间：2016-02-10T15:11:41.660

我会尝试一起摆脱全局变量，将您的应用程序视为一组执行任务的函数，每个函数都有输入和输出，并且不应该接触全局变量。只需获取您的用户并传递它，它就会使您的代码更具可测试性。更好的是：摆脱烧瓶，烧瓶促进使用全局变量，例如

```
from flask import request 
```

# coq - 无法证明有关使用 Program Fixpoint 定义的函数的简单事实

> ID：13617232
> 
> 赞同：4
> 
> 时间：2012-11-29T01:12:33.933
> 
> 标签：coq, dependent-type

之前，我能够证明`forall nat1: Nat, Trim nat1 -> Trim (pred nat1)`的以下定义`pred`。

```
Fixpoint pred (nat1: Nat): Nat :=
  match nat1 with
  | Empt => Empt
  | Fill Zer nat3 => Fill One (pred nat3)
  | Fill One nat3 => trim (Fill Zer nat3)
  end. 
```

但是用下面的新定义`pred`我不知道如何证明`forall nat1: {nat2: Nat | Trim nat2 /\ Pos nat2}, Trim (pred nat1)`。

```
Program Fixpoint pred (nat1: Nat | Trim nat1 /\ Pos nat1) {measure (meas nat1)}: Nat :=
  match nat1 with
  | Empt => _
  | Fill Zer nat3 => Fill One (pred nat3)
  | Fill One nat3 => trim (Fill Zer nat3)
  end. 
```

有人可以给我一个提示吗？我不知道用`sig`. 或者，也许我做错了什么。我不知道。完整的代码在[这里](http://pastebin.com/mRL2LqUC)。之前的代码[在这里](http://pastebin.com/Cz4pXwW5)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T00:06:58.103

我决定作弊。

```
Fixpoint pred' (n1: Nat): Nat :=
  match n1 with
  | Empt => Empt
  | Fill Zer n1 => Fill One (pred' n1)
  | Fill One n1 => trim (Fill Zer n1)
  end.

Definition pred (n1: Nat) (H1: Trim n1) (H2: comp n1 zer = Great): Nat :=
  pred' n1. 
```

# grails - Grails 单元测试在 GGTS 3.1 中失败，BytecodeInterface8 出现 NoClassDefFoundError 错误

> ID：13617236
> 
> 赞同：0
> 
> 时间：2012-11-29T01:13:17.533
> 
> 标签：grails

我将 GGST 3.1 与 Grails 1.3.7 应用程序一起使用。我为服务方法创建了一个单元测试，并成功运行它。（它也通过了！）然后我修改了被测方法，修改了单元测试，并尝试再次运行它。测试未能通过以下堆栈跟踪运行

```
java.lang.NoClassDefFoundError: org/codehaus/groovy/runtime/BytecodeInterface8
    at com.fxpal.querium.QuerySpecService.extractQueryFields(QuerySpecService.groovy:133)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:266)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.call(PogoMetaMethodSite.java:63)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:124)
    at com.fxpal.querium.QuerySpecServiceTests.testExtractQuery(QuerySpecServiceTests.groovy:18)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at junit.framework.TestCase.runTest(TestCase.java:168)
    at junit.framework.TestCase.runBare(TestCase.java:134)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at junit.framework.TestSuite.runTest(TestSuite.java:232)
    at junit.framework.TestSuite.run(TestSuite.java:227)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassNotFoundException: org.codehaus.groovy.runtime.BytecodeInterface8
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    ... 30 more 
```

这似乎与我看到的与部署 WAR 文件相关的其他错误实例相似，但就我而言，我只是通过 IDE 运行单元测试。（不是`grails test-app`，而是`Run as/JUnit test`从上下文菜单中选择。）

接下来我应该尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:42:59.627

我相信这个错误是因为（在战争和我们的案例中）有两个 groovy 版本（控制台和 IDE），试图运行相同的测试用例，有时它们会相互获取字节码。要确保的一件事是他们是否不共享保存字节码的文件夹。

您可以尝试的其他方法是验证 groovy 库是否在测试的类路径中，上次发生这种情况时，我只是将它们添加到类路径中并且它运行正常。

格尔

# ios - 调整 UILabel 以适应横向和纵向模式

> ID：13617239
> 
> 赞同：0
> 
> 时间：2012-11-29T01:13:31.427
> 
> 标签：ios, uilabel, landscape

我正在尝试制作一个在横向和纵向模式下都能正确显示的标签。当我处于纵向模式时，标签看起来很好，但是当我切换到横向模式时，标签没有正确对齐。有没有办法在屏幕从一种模式切换到另一种模式时自动调整 UIlabel。

**编辑：** 这是我拥有的代码

```
UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(100 , 100, 100, 100)];
[label setText:@"xxx."];
label.adjustsFontSizeToFitWidth=YES;
[self.view addSubview:label];
[label release]; 
```

我还创建了一个 NStimer 方法，该方法在 5 秒后丢弃标签

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T01:27:17.640

自动是什么意思，你希望它如何对齐？

您可以添加代码以`-willRotateToInterfaceOrientation:duration:`提供`UILabel`新框架 - 但很难发布确切的代码，除非您具体说明您希望标签做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:29:40.727

我想，你的意思是转移你的标签。

您可以使用`autoresizingMask`. 例如，将标签与屏幕左侧连接：

```
yourLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T12:40:48.297

使用 autoresizingMask

```
lblBookmarkName.autoresizingMask = UIViewAutoresizingFlexibleWidth; 
```

# c++ - 相同类型的对象 cout、cerr、clog 的表现如何不同？

> ID：13617241
> 
> 赞同：2
> 
> 时间：2012-11-29T01:13:47.653
> 
> 标签：c++, iostream

```
extern ostream cout;
extern ostream cerr;
extern ostream clog; 
```

cout、cerr 和 clog 被声明为 ostream 的类型。但是 cout 和 clog 有缓冲区，而 cerr 没有。

为什么相同类型的对象表现不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:16:54.953

这三个对象具有相同的类型，但它们不是同一个实例。的实例`ostream`可以配置不同；在这种情况下，这三个对象被配置为以特定方式处理每个对象的缓冲。这是有道理的：如果同一类的所有对象都以完全相同的方式表现，那么一开始就没有理由将它们分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T01:17:11.307

构造[函数](http://www.cplusplus.com/reference/ostream/ostream/ostream/)接受一个`streambuf`选项

`explicit ostream (streambuf * sb);`

我猜他们每个人都使用不同的`streambuf`输出，这些`streambuf`对象控制输出的缓冲（或不缓冲）。

# ios - 如何从后台检查 phonegap 应用程序是否处于活动状态？

> ID：13617242
> 
> 赞同：2
> 
> 时间：2012-11-29T01:14:07.463
> 
> 标签：ios, cordova

我想知道是否有可能有一个事件处理程序，它总是在

应用程序将进入前台并从后台状态变为活动状态。

phonegap 是否提供任何插件来监听被重新激活的事件？

或者......有什么本地方法吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T01:16:40.303

是的 - 检查[暂停](http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#pause)和[恢复](http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#resume)。

# asp.net - 将 Gridview 转换为 RadGrid

> ID：13617247
> 
> 赞同：0
> 
> 时间：2012-11-29T01:14:40.990
> 
> 标签：asp.net, telerik, telerik-grid, radgrid

如何将以下代码从 GridView 更改为 RadGrid？下面是我的gridview的代码：

```
protected void gv_Movie_RowCommand(object sender, GridViewCommandEventArgs e)
{
    //get the row number of the selected row
    int rowNo = int.Parse(e.CommandArgument.ToString());
    //get the selected row
    GridViewRow row = gv_Movie.Rows[rowNo];

    //Get movie ID, which is on the 1st column of the gridview

    string movieID = row.Cells[0].Text;
    if (e.CommandName == "Select")
    {
        Response.Redirect("MovieSelect.aspx?id=" + movieID);
    }
    else if (e.CommandName == "Update")
    {
        Response.Redirect("MovieUpdate.aspx?id=" + movieID);
    }
} 
```

我尝试了以下代码，但由于`e.CommandArgument`. 有什么解决办法吗？

```
protected void RadGrid1_ItemCommand(object sender, Telerik.Web.UI.GridCommandEventArgs e)
{
    int rowNo = int.Parse(e.CommandArgument.ToString());

    GridDataItem row = RadGrid1.Items[rowNo];

    string movieID = row.Cells[0].Text;
    if (e.CommandName == "Select")
    {
        Response.Redirect("movieSelect.aspx?id=" + movieID);
    }
    else if (e.CommandName == "Delete")
    {
        Response.Redirect("movieUpdate.aspx?id=" + movieID);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:14:26.637

代替

```
 int rowNo = int.Parse(e.CommandArgument.ToString());
 GridDataItem row = RadGrid1.Items[rowNo]; 
```

采用

```
GridDataItem row = e.Item as GridDataItem; 
```

Telerik 自动将当前行检索为 e.Item。其余的应该是一样的。

或者更好的是，如果合适的话，尝试使用 Utilize `DataKeyNames`。

因此，在您的标记中，您将拥有如下内容：

```
<telerik:RadGrid id="grid" runat="server">
   <MasterTableView DataKeyNames="movieID">
      .....
   </MasterTableView>
</telerik:RadGrid> 
```

然后，您可以像这样检索movieID：

```
 var row = e.Item as GridDataItem;  
 string movieID = row.GetDataKeyValue("movieID"); 
```

# php - 如何阻止对指定目录中php文件的直接请求？

> ID：13617253
> 
> 赞同：3
> 
> 时间：2012-11-29T01:15:15.690
> 
> 标签：php, apache, .htaccess, include

我有一个主文件夹，其中保存了我的所有资源，例如 js、css、图像等，称为 /resources/。

在 /resources/ 中，我在我的网站页面上包含了 php 文件，但是，如果输入浏览器，它们目前可以直接访问。

有没有办法让我在该目录中使用 .htaccess 来防止直接请求某些扩展名（例如 PHP）的任何文件？防止盗链并不是我真正想要的。我只需要一种方法来终止对这些 PHP 文件（特别是在 /resources/ 目录中）的任何类型的直接请求，这些文件是由网站本身以外的任何东西发出的。

任何帮助表示赞赏。非常感谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T01:20:21.953

`.htaccess`在`/resources/`包含以下内容的文件夹中添加

```
<Files ~ "\.php$">
  Order allow,deny
  Deny from all
</Files> 
```

它应该阻止访问所有`.php`文件

# javascript - 在 localStorage 中为 GoogleChrome 扩展选项面板保存数据并访问数据

> ID：13617257
> 
> 赞同：2
> 
> 时间：2012-11-29T01:15:37.123
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在为 Google Chrome 制作[扩展程序](https://stackoverflow.com/questions/13557159/googlechrome-extension-that-deletes-browsing-history-with-one-click-from-an-icon)，当用户单击它时，该扩展程序会删除所有浏览数据，该扩展程序工作正常，但现在我尝试添加一个选项面板，用户可以在其中选择要删除的数据，我的问题是用户在选项面板中所做的选项没有被保存（或者我无法正确检索存储在 localStorage 中的数据），因为当我在保存并关闭后再次访问选项面板时，复选框再次为空白。

清单 [manifest.json]

```
{
  "name": "TEST TITLE",
  "version": "1.0",
  "manifest_version": 2,
  "description": "TEST DESCRIPTION",
  "options_page": "options.html",
  "icons": { "16": "icon-small.png",
            "48": "icon-medium.png",
            "128": "icon-big.png" },
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "storage",
    "browsingData"
  ]
} 
```

HTML [popup.html]

```
<!DOCTYPE html>
<html>
  <head>
  <script src="script.js"></script>
  </head>
  <body>
  </body>
</html> 
```

HTML [选项.html]

```
<!DOCTYPE html>
<html>
  <head>
  <script src="script-options.js"></script>
  <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body onLoad="loadOptions()">
  <div id="wrapper-options">
  <div id="header-options">OPTIONS</div>
  <div id="content-options">
  <div id="checkbox-options">
  <input name="" id="protectedWeb-checkbox" type="checkbox" value="">Websites that have been installed as hosted applications
  </div>
  <div id="checkbox">
  <input name="" id="unprotectedWeb-checkbox" type="checkbox" value="">Normal websites
  </div>
  <div id="checkbox">
  <input name="" id="extension-checkbox" type="checkbox" value="">Extensions and packaged applications a user has installed
  </div>
  <div id="checkbox">
  <input name="" id="appcache-checkbox" type="checkbox" value="">Websites appcaches
  </div>
  <div id="checkbox">
  <input name="" id="cache-checkbox" type="checkbox" value="">Browser's cache
  </div>
  <div id="checkbox">
  <input name="" id="cookies-checkbox" type="checkbox" value="">Browser's cookies
  </div>
  <div id="checkbox">
  <input name="" id="downloads-checkbox" type="checkbox" value="">Browser's download
  </div>
  <div id="checkbox">
  <input name="" id="fileSystems-checkbox" type="checkbox" value="">Websites file systems
  </div>
  <div id="checkbox">
  <input name="" id="formData-checkbox" type="checkbox" value="">Browser's stored form data
  </div>
  <div id="checkbox">
  <input name="" id="history-checkbox" type="checkbox" value="">Browser's history
  </div>
  <div id="checkbox">
  <input name="" id="indexedDB-checkbox" type="checkbox" value="">Websites IndexedDB data
  </div>
  <div id="checkbox">
  <input name="" id="localStorage-checkbox" type="checkbox" value="">Websites local storage data
  </div>
  <div id="checkbox">
  <input name="" id="pluginData-checkbox" type="checkbox" value="">Plugins data
  </div>
  <div id="checkbox">
  <input name="" id="passwords-checkbox" type="checkbox" value="">Stored passwords
  </div>
  <div id="checkbox">
  <input name="" id="webSQL-checkbox" type="checkbox" value="">Websites WebSQL data
  </div>
  <div id="button-option">
  <input name="" type="button" value="SAVE" onClick="saveOptions()">
  <input name="" type="button" value="CANCEL" onClick="">
  </div>
  </div>
  </div>
  </body>
</html> 
```

JavaScript [脚本.js]

```
// JavaScript Document

function browsingdata(){
chrome.browsingData.remove({
  "originTypes": {
    "protectedWeb": true, // Set to true or false as per your requirement / Websites that have been installed as hosted applications
    "unprotectedWeb":true, // Set to true or false as per your requirement / Normal websites
    "extension":true // Set to true or false as per your requirement / Extensions and packaged applications a user has installed
  }
}, {
  "appcache": true, // Set to true or false as per your requirement / Websites appcaches
  "cache": true, // Set to true or false as per your requirement / Browser's cache
  "cookies": true, // Set to true or false as per your requirement / Browser's cookies
  "downloads": true, // Set to true or false as per your requirement / Browser's download
  "fileSystems": true, // Set to true or false as per your requirement / Websites file systems
  "formData": true, // Set to true or false as per your requirement / Browser's stored form data
  "history": true, // Set to true or false as per your requirement / Browser's history
  "indexedDB": true, // Set to true or false as per your requirement / Websites IndexedDB data
  "localStorage": true, // Set to true or false as per your requirement / Websites local storage data
  "pluginData": true, // Set to true or false as per your requirement / Plugins data
  "passwords": true, // Set to true or false as per your requirement / Stored passwords
  "webSQL": true // Set to true or false as per your requirement / Websites WebSQL data
}, function (){
    console.log("All data Deleted");
});
}
window.onload=browsingdata; 
```

JavaScript [脚本选项.js]

```
// JavaScript Document

function saveOptions() {
    if (document.getElementById('protectedWeb-checkbox').checked) {
        localStorage.setItem('protectedWeb-checkbox', "true");
    } else {
        localStorage.setItem('protectedWeb-checkbox', "false");
    }
}

function loadOptions() {
    if (localStorage.getItem('protectedWeb-checkbox') == "true") {
        console.log("its checked");
        document.getElementById("protectedWeb-checkbox").checked=true;
    } else {
        console.log("its not checked");
    }
} 
```

除了主要问题之外，我还想知道您认为将其他 14 个选项添加到 JavaScript [script-options.js] 的最佳方式，以及您建议我如何更改值（真/假） JavaScript [script.js] 也使用 JavaScript，任何关于整个扩展代码的建议或建议也将不胜感激。

一如既往地提前感谢您花时间阅读本文，下面的列表是我迄今为止阅读的所有 StackOverflow 问题和网站。

```
https://stackoverflow.com/questions/3033829/google-chrome-extension-local-storage
https://stackoverflow.com/questions/2153070/do-chrome-extensions-have-access-to-local-storage
https://stackoverflow.com/questions/11679967/remember-checkbox-with-localstorage-onclick
http://julip.co/2010/01/how-to-build-a-chrome-extension-part-2-options-and-localstorage/
https://developer.chrome.com/stable/extensions/storage.html 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:30:30.057

这是我的贡献。
这样做是因为我讨厌做 html/css ;)
自动保存选项，所以不需要保存按钮。
注释掉在弹出新闻中清除内容的位，不想清除任何内容。
**清单.json**

```
{
  "name": "ProtectedWeb",
  "description" : "http://stackoverflow.com/questions/13617257/saving-data-in-localstorage-for-a-googlechrome-extension-options-panel-and-acces/",
  "version": "1.0",
  "permissions": [
    "tabs", "<all_urls>","storage","browsingData"
  ],
  "browser_action": {
      "default_title": "Clear stuff",
      "default_icon": "icon.png",
      "default_popup": "popup.html"
  },
  "options_page": "options.html",
  "manifest_version":2
} 
```

**选项.html**

```
<html>
  <head>
  <script src="options.js"></script>
  </head>
  <body>
  <div id="wrapper-options">
  <div id="header-options">OPTIONS</div>
  <div id="content-options">
    <br />
    Origin Type
    <div id="originTypes">
    </div>
  <div id="checkbox-options">
    <br />
    Options
    <div id="options">
    </div>
  </div>
  </div>
  </div>
  </body>
</html> 
```

**选项.js**

```
// This is where we store the default options if there aren't any options saved and it gets replaced with what is saved on load if there is anything in storage
var Options = {
    "originTypes": {
        "protectedWeb": false,
        // Set to false or false as per your requirement / Websites that have been installed as hosted applications
        "unprotectedWeb": true,
        // Set to true or false as per your requirement / Normal websites
        "extension": false
        // Set to true or false as per your requirement / Extensions and packaged applications a user has installed
    },
    options: {
        "appcache": true,
        // Set to false or false as per your requirement / Websites appcaches
        "cache": true,
        // Set to false or false as per your requirement / Browser's cache
        "cookies": true,
        // Set to false or false as per your requirement / Browser's cookies
        "downloads": true,
        // Set to false or false as per your requirement / Browser's download
        "fileSystems": true,
        // Set to false or false as per your requirement / Websites file systems
        "formData": true,
        // Set to false or false as per your requirement / Browser's stored form data
        "history": true,
        // Set to false or false as per your requirement / Browser's history
        "indexedDB": true,
        // Set to false or false as per your requirement / Websites IndexedDB data
        "localStorage": true,
        // Set to false or false as per your requirement / Websites local storage data
        "pluginData": true,
        // Set to false or false as per your requirement / Plugins data
        "passwords": true,
        // Set to false or false as per your requirement / Stored passwords
        "webSQL": true
        // Set to false or false as per your requirement / Websites WebSQL data
    }
}

var optionsTemplate = {
    originTypes: [{
        name: "appcache",
        title: "appcache",
        description: "Websites appcaches"

    }, {
        name: "unprotectedWeb",
        title: "Unprotected Web",
        description: "Normal websites"

    }, {
        name: "extension",
        title: "Extension",
        description: "Extensions and packaged applications a user has installed"

    }],
    options: [{
        name: "appcache",
        title: "appcache",
        description: "Websites appcaches"

    }, {
        name: "cache",
        title: "cache",
        description: "Browser's cache"

    }, {
        name: "cookies",
        title: "cookies",
        description: "Browser's cookies"

    }, {
        name: "downloads",
        title: "downloads",
        description: "Browser's download"

    }, {
        name: "fileSystems",
        title: "fileSystems",
        description: "Websites file systems"

    }, {
        name: "formData",
        title: "formData",
        description: "Browser's stored form data"

    }, {
        name: "history",
        title: "history",
        description: "Browser's history"

    }, {
        name: "indexedDB",
        title: "indexedDB",
        description: "Websites IndexedDB data"

    }, {
        name: "localStorage",
        title: "localStorage",
        description: "Websites local storage data"

    }, {
        name: "pluginData",
        title: "pluginData",
        description: "Plugins data"

    }, {
        name: "passwords",
        title: "passwords",
        description: "Stored passwords"

    }, {
        name: "webSQL",
        title: "webSQL",
        description: "Websites WebSQL data"
    }]
}

var optionsTemplateSelectors = {
    originTypes: '#originTypes',
    options: '#options'
}

renderHTML = function(template, targets) {
    var key, keys, elements = {};
    keys = Object.keys(targets);
    for(var i = 0; i < keys.length; i++) {
        key = keys[i];
        elements[key] = document.querySelector(targets[key]);
        if (elements[key]===null) console.debug('Couldn\'t find "'+key+'"" using the querySelector "'+targets[key]+'"');
    }

    var sections = Object.keys(template),
        section;
    var item;
    var checkbox, div, text;
    for(var z = 0; z < sections.length; z++) {
        section = sections[z];
        for(var i = 0; i < template[section].length; i++) {
            item = template[section][i];
            div = document.createElement('div');
            text = document.createTextNode(item.title);
            checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.id = item.name + '-checkbox';
            checkbox.dataset['section'] = section;
            checkbox.dataset['key'] = item.name;
            checkbox.title = item.description;
            if(Options[section][item.name] === true) checkbox.checked = true;
            checkbox.addEventListener('change', checkboxChanged);
            div.id = item.name;
            div.appendChild(checkbox);
            div.appendChild(text);
            elements[section].appendChild(div);
        }
    }
}

checkboxChanged = function(evt) {
    var src = evt.srcElement;
    var checked = src.checked;
    Options[src.dataset['section']][src.dataset['key']] = checked;
    chrome.storage.local.set({
        'options': Options
    });
}

init = function() {
    chrome.storage.local.get('options', function(options) {
        if(Object.keys(options).length === 0) {
            chrome.storage.local.set({
                'options': Options
            });
        } else {
            Options = options.options;
        }
        renderHTML(optionsTemplate, optionsTemplateSelectors);
    })
}

window.addEventListener('load', init); 
```

**popup.html**

```
<!doctype html>
<html>
  <head>
    <script src="popup.js"></script>
  </head>
  <body>
  </body>
</html> 
```

**popup.js**

```
chrome.storage.local.get('options', function(data) {
    chrome.browsingData.remove({
  "originTypes":data.options.originTypes
},data.options.options);
});

//window.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T06:51:34.553

您删除了 popup.html 中的所有本地存储数据。因此，每次打开它时，您的设置都会消失。如果你不打开它，设置并没有真正的用处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T06:55:56.847

浏览完您的代码后，我准备了一个结构，您可以进一步扩展所有复选框；

我已经在以下情况下对其进行了测试，如果您仍然有困难，请告诉我：

**页面开头：**

![在此处输入图像描述](../Images/6d6cc268b58ea70009ffb12dbf6bcfea.png)

**选择后**

![在此处输入图像描述](../Images/83fa54f66dcd74c60092a08746ef1e1b.png)

**页面加载后：**

![在此处输入图像描述](../Images/424b347677b91bb257ff9ea8dcb8fd39.png)

**刷新：**

![在此处输入图像描述](../Images/751068a3904ebb7e7cf989a374f7ff53.png)

您可以使用 chrome 存储 API 而不是本地存储

***清单.json***

```
{
  "name": "TEST TITLE",
  "version": "1.0",
  "manifest_version": 2,
  "description": "TEST DESCRIPTION",
  "options_page": "options.html",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "storage",
    "browsingData"
  ]
} 
```

***popup.html***

```
<html>
  <head>
  <script src="scripts.js"></script>
  </head>
  <body>
  </body>
</html> 
```

***选项.html***

```
<html>
  <head>
  <script src="script-options.js"></script>
  </head>
  <body>
  <div id="wrapper-options">
  <div id="header-options">OPTIONS</div>
  <div id="content-options">
  <div id="checkbox-options">
  <input name="" id="protectedWeb" type="checkbox" value="">Websites that have been installed as hosted applications
  </div>
  <div id="button-option">
  <input name="" type="button" value="SAVE" id="save" >
  </div>
  </div>
  </div>
  </body>
</html> 
```

***脚本.js***

```
// JavaScript Document

function browsingdata(){

var protectedWeb;
chrome.storage.local.get('protectedWeb',function (obj){
    console.log(obj.protectedWeb);
    protectedWeb = obj.protectedWeb;
});

chrome.browsingData.remove({
  "originTypes": {
        "protectedWeb": protectedWeb, // Set to false or false as per your requirement / Websites that have been installed as hosted applications
        "unprotectedWeb":true, // Set to true or false as per your requirement / Normal websites
        "extension":true // Set to true or false as per your requirement / Extensions and packaged applications a user has installed

    }}, {
  "appcache": false, // Set to false or false as per your requirement / Websites appcaches
  "cache": false, // Set to false or false as per your requirement / Browser's cache
  "cookies": false, // Set to false or false as per your requirement / Browser's cookies
  "downloads": false, // Set to false or false as per your requirement / Browser's download
  "fileSystems": false, // Set to false or false as per your requirement / Websites file systems
  "formData": false, // Set to false or false as per your requirement / Browser's stored form data
  "history": false, // Set to false or false as per your requirement / Browser's history
  "indexedDB": false, // Set to false or false as per your requirement / Websites IndexedDB data
  "localStorage": false, // Set to false or false as per your requirement / Websites local storage data
  "pluginData": false, // Set to false or false as per your requirement / Plugins data
  "passwords": false, // Set to false or false as per your requirement / Stored passwords
  "webSQL": false // Set to false or false as per your requirement / Websites WebSQL data
}, function (){
    console.log("All data Deleted");
});

}
window.onload=browsingdata; 
```

***脚本选项.js***

// JavaScript 文档 var storage = chrome.storage.local;

```
function saveOptions() {
    console.log("Clicked ... ");
//Use document.querySelectorAll() function when you all multiple check boxes and iterate over them instead of huge if-else chains
    if (document.getElementById('protectedWeb').checked) {
        // Save it using the Chrome extension storage API.
        storage.set({'protectedWeb': 'true'}, function() {
            // Notify that we saved.
            console.log('Settings saved');
        });

    } else {
        // Save it using the Chrome extension storage API.
        storage.set({'protectedWeb': 'false'}, function() {
            // Notify that we saved.
            console.log('Settings saved');
        });
    }
}

function getSelectedData() {
    chrome.storage.local.get('protectedWeb',function (obj){
    if(obj.protectedWeb == "true"){
    document.getElementById('protectedWeb').checked = true;
}else{
    document.getElementById('protectedWeb').checked = false;
}
});
}

window.onload = function (){
    getSelectedData();
    document.getElementById('save').onclick=saveOptions;
} 
```

# javascript - Jquery/Javascript 无法在 Firefox 上运行。为什么？

> ID：13617261
> 
> 赞同：1
> 
> 时间：2012-11-29T01:15:49.870
> 
> 标签：javascript, jquery, firefox, scroll

我刚刚发现我的脚本在 Chrome 中运行良好，但在 FireFox 中却没有——我不知道为什么。

这是正在开发的网站：[www.fireflycovers.com](http://www.fireflycovers.com)

**当单击绿色圆形按钮**之一时，脚本应执行。（将窗口滚动到下一个容器）

脚本现在看起来像这样：

```
$('.scroll').css('display' , 'block');
$('.scroll').on('click', function(e) {
    var container = $(this).parent();

    // Scans if last container in group
    while (document != container[0] && 
           container.find('~.col, ~:has(.col)').length == 0) {

           // If so, search siblings of parent instead
           var container = container.parent(),
               nextdiv = container.nextAll('.col, :has(.col)').first();
    }

    // Back to first .col (when no next .col)
    if (nextdiv.length == 0) {
        nextdiv = $(document).find('.col:first')
    };

    // Animates scrolling to new position
    $('body').animate({scrollTop:nextdiv.offset().top}, 1000);  
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:32:57.407

您是否尝试过调试？例如，在您的方法中放置`console.log`语句以查看事物在特定时间的值并观察它的执行？无论如何，使用这个有帮助吗？

```
$('body,html').animate({scrollTop:nextdiv.offset().top}, 1000); 
```

从[Animate scrollTop 验证在 firefox 中不工作](https://stackoverflow.com/questions/8149155/animate-scrolltop-not-working-in-firefox)

您需要`html`，因为 Firefox 在`overflow`.

# jquery - Ajax 对 Select_tag 提出请求

> ID：13617262
> 
> 赞同：0
> 
> 时间：2012-11-29T01:15:58.960
> 
> 标签：jquery, ruby-on-rails, ajax, spree

我的视图中有一个下拉菜单，它有一个回调，一旦它检测到更改事件就会被触发。我想通过 ajax 将 DropDown 中选择的值传递给我的 Line_items 控制器并更新特定记录。
可悲的是，$.ajax 对我来说仍然是一个陌生人。

到目前为止，我有：

```
$.ajax(
      type: 'POST',
      dataType: 'text'
      url: 'orders/:order_id/line_items/:id',
      data:
        "variant_id": selectedData.selectedData.value

      success: ->
        alert ('test')
    ) 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:49:56.613

基本上你可以在数据中将该值作为 json 对象传递；您的功能可能如下所示：

```
$('#my_dropdown_id').change(function() {
  var sel_value = $(this).val();
  // here you can do some validation, etc; before fire the ajax call if is necessary
  $.ajax({
     url: 'orders/:order_id/line_items/:id',
     type: 'POST',
     data: {variant_id: sel_value},
     success: function(data) {
       alert('OK!')
     }
  })
}); 
```

然后在您的后端，您可以从 post 参数中获取该值。即参数['variant_id']

我假设您将使用正确的 id 值构建 URL；IE

```
url: 'orders/'+ your_order_id +'/line_items/'+ line_item_id, 
```

# asp.net-mvc - 如何在 MVC4 Jquery 中重置包含级联下拉列表的部分视图

> ID：13617263
> 
> 赞同：2
> 
> 时间：2012-11-29T01:16:01.473
> 
> 标签：asp.net-mvc, jquery, drop-down-menu, cascading

我正在使用 MVC4/EF，我有四个级联下拉列表，我第一次就让它工作了。因此，当页面第一次呈现时，我可以选择第一个下拉列表并在第二个下拉列表中过滤结果，通过选择第二个 dropdowm，第三个 dropdwon 被过滤，第四个并基于第四个下拉列表填充编辑视图。但是，当我返回并更改第一个下拉列表中的选择时，它会过滤第二个下拉列表，但不会重置第三、第四个 dropdwon 列表和编辑部分视图。这是第一个 dropdwon 部分视图代码。

CampusUsercontrol.cshtml

```
@model RHMS.Models.RoomEditor
@using (Ajax.BeginForm("SelectCampus", "RoomEditor", new AjaxOptions { UpdateTargetId  = "Buildings" }))
{ 
@Html.DropDownListFor(
        m => m.SelectedCampusID,
        new SelectList(Model.Campuses,"CampusId", "Name"),
       string.Empty
    )
}

<script type="text/javascript">

$('#SelectedCampusID').change(function () {
    $(this).parents('form').submit();

 });
</script> 
```

索引.cshtml

```
 @model RHMS.Models.RoomEditor
 @{
ViewBag.Title = "Index";
Layout = "~/Views/Shared/_Layout.cshtml";
 }
   <table cellpadding="0" cellspacing="4" border="0">
<tr>
    <td>Campus </td>
    <td> :</td>
    <td>@Html.Partial("CampusUserControl", Model)</td>
</tr>
<tr>
    <td>Building </td>
    <td> :</td>
    <td><div id="Buildings">@Html.Partial("BuildingUserControl", Model)</div></td>
</tr>
<tr>
    <td>Floor </td>
    <td> :</td>
    <td><div id="Floor">@Html.Partial("FloorsUserControl", Model)</div></td>
</tr>
 <tr>
    <td>Room </td>
    <td> :</td>
    <td><div id="Room">@Html.Partial("RoomUserControl", Model)</div></td>
</tr>
</table>
<div id="RoomInfo">
@Html.Partial("RoomInfoUserControl", Model)
</div> 
```

请帮助我在更改第一个部分视图时如何刷新其他部分视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T13:26:31.640

Looks like this part of your javascript code is beeing executed only on the first load of the page

```
<script type="text/javascript">

$('#SelectedCampusID').change(function () {
    $(this).parents('form').submit();

 });
</script> 
```

try wiring the `change` event for `#SelectedCampusID` using Jquery's [`on`](http://api.jquery.com/on/) binding. You might also have to do the same for the other dropdowns.

# java - 使用 java 进行 RSA SecurID 开发

> ID：13617266
> 
> 赞同：-1
> 
> 时间：2012-11-29T01:16:12.520
> 
> 标签：java, rsa, securid

> **可能重复：**
> [将 RSA SecurID 身份验证与 j2ee 服务器集成？](https://stackoverflow.com/questions/3661231/integrate-rsa-securid-authentication-with-a-j2ee-server)

我正在尝试使用jsp和java进行开发。是否有任何 java 支持实现 RSA SecurID 身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:28:38.383

这是[你](http://www.emc.com/security/rsa-securid/rsa-authentication-agents/sun-java-5-3.htm)要找的吗？

# php - PHP-你如何将一组不同的行拆分为一个？

> ID：13617267
> 
> 赞同：1
> 
> 时间：2012-11-29T01:16:18.853
> 
> 标签：php, postgresql

我正在尝试制作购物车，并设法将用户选中的复选框提交到我的购物车页面。它与数据库中的详细信息相呼应，但我意识到我无法自行发布我的详细信息。

有一个大组，有没有办法添加到我的代码中以取消组合并将它们放在一个表中？

这是我用来将详细信息发布到我的购物车的代码：

```
<?php
if (isset($_POST['games'])) {
    $n = count($_POST['games']);
    for($i=0; $i < $n; $i++)
        echo $_POST['games'][$i];
    } 
?> 
```

这是数据库：

```
 <?php
        $con = pg_connect(bla bla);
        if (!$con){
            die('Could not connect: ' . pg_error());
        }

        $result = pg_query("SELECT * FROM CSGames");
        echo "
        <table>
            <tr>
                <th>Title</th>
                <th>Platform</th>
                <th>Description</th>
                <th>Price</th>
                <th>Select</th>
            </tr>";

        while($row = pg_fetch_array($result)){
            echo"<tr>";
            echo "<td>" . $row['1'] . "</td>";
            echo "<td>" . $row['2'] . "</td>";
            echo "<td>" . $row['3'] . "</td>";
            echo "<td>" . $row['4'] . "</td>";
            echo '<td><input type="checkbox" name="games[]" value="' . $row['0'] . $row['1'] . $row['2'] . $row['3'] . $row['4'] . '"/></td>';

            echo"</tr>";      
        }
        echo"</table>";

        pg_close($con);

        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:42:29.330

您从中获取的数据的问题`$_POST['games']`在于您如何填充输入的“值”属性。

虽然我个人会在您的数据库表中添加一个游戏 ID，并且只将游戏 ID 的值作为输入值，然后在您的购物车输出页面上查找所选游戏的数据，但我会在您的情况下坚持使用该框架已经为我的回答做了一些事情。

这是你的问题：

```
<input type="checkbox" name="games[]" value="' . $row['0'] . $row['1'] . $row['2'] . $row['3'] . $row['4'] . '"/> 
```

在这里，您只是将一堆字符串连接在一起，没有任何类型的分隔符，您可以稍后将其拆分。我只是建议做这样的事情：

```
<input type="checkbox" name="games[]" value="' . $row['0'] . '|||' . $row['1'] . '|||' . $row['2'] . '|||'. $row['3'] . '|||' . $row['4'] . '"/> 
```

我添加了三重管道`|||`，您可以稍后使用它们来拆分这些字段。

因此，当您开始输出时，您可以执行以下操作：

```
<?php
if (isset($_POST['games'])) {
?>
<table>
<tr>
    <tr>
        <th>Title</th>
        <th>Platform</th>
        <th>Description</th>
        <th>Price</th>
    </tr>
<?php
    foreach($_POST['games'] as $game_string) {
        $game = explode('|||', $game_string);
?>
    <tr>
<?php
        foreach ($game as $attr) {
?>
         <td><?php echo $attr; ?></td>
<?php
        }
?>
    </tr>
<?php
    }
?>
</table>
<?php
} 
?> 
```

# ruby-on-rails - Rails - 表单第一行中未定义的方法“project_path”？

> ID：13617276
> 
> 赞同：1
> 
> 时间：2012-11-29T01:17:10.507
> 
> 标签：ruby-on-rails, forms, redirect, nested, render

我想我遇到了渲染/重定向问题。在我的 Rails 应用程序中，我的客户可以拥有许多项目。当我更新一个项目时，我使用带有 form_for 方法的嵌套表单，分别向它传递一个客户端和项目实例变量。

这是我的代码：

# 路线.rb：

```
resources :clients do
  resources :projects
end 
```

# 项目控制器.rb

```
def edit
  @client = Client.find(params[:client_id])
  @project = Project.find(params[:id])
end

def update
  @project = Project.find(params[:id])

  respond_to do |format|
    if @project.update_attributes(params[:project])
      format.html { redirect_to client_project_path(@project.client, @project), notice: 'Project was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "edit" } # !!this seems to be the problem
      format.json { render json: @project.errors, status: :unprocessable_entity }
    end
  end
end 
```

# 意见/项目/_form.html.erb：

```
<%= simple_form_for([@client, @project]) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :title %>
    <%= f.input :start_on %>
    <%= f.input :end_on %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

当我简单地显示编辑操作时，一切正常。如果我用有效数据更新项目，一切都很好，也是。当我在表单中输入无效或丢失的数据时会出现问题 - 然后调用更新方法的“其他部分”，并且应该呈现“编辑”操作。

这确实发生了，但在我看来，“编辑”方法或我的表单有问题，因为当我更改`render action: "edit"`为时`redirect_to action: "edit"`，它确实重定向了我（当然没有错误消息，所以它显然不是所需的解决方案，但是我只是想测试）。

呈现“编辑”时，这是我收到的错误消息：

```
undefined method `project_path' 
```

这只是指我表格中的第一行。

我在这里做错了什么？对不起，很长的问题，感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:24:54.987

您需要在更新操作中加载您的 @client 变量。这样想，如果你点击 else，编辑为视图提供了什么，因为你在渲染而不是重定向时只需要它。由于您的资源是嵌套的，因此 form_for 助手需要客户端和项目。

# php - PHP cURL：CURLOPT_USERPWD 的最大长度？

> ID：13617278
> 
> 赞同：4
> 
> 时间：2012-11-29T01:17:16.773
> 
> 标签：php, curl, basic-authentication

我在 PHP 中有一个使用 cURL 的简单 GET 请求。它使用基本身份验证进行身份验证。

但是，当 {username}:{password} 超过 266 个字符时，它似乎会被截断。我到处找，但没有找到任何说明这一点的文件。只有我吗？

```
$data = curl_init($url);

curl_setopt($data, CURLOPT_USERPWD, $username . ":" . $password);
curl_setopt($data, CURLOPT_HTTPAUTH, CURLAUTH_ANY);

$results = curl_exec($data);

echo $results;

curl_close($data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:42:37.043

我不是 C 专家，但我在 CURL 源代码中找到了以下代码（！不是 php 扩展，而是原始 curl）看起来 CURL 只为密码分配了 256 字节。

**编辑** 删除了旧代码，因为正如 Daniel Steinberg 下面所述，此代码不再使用。

# iphone - 向 NSMutableArray 添加项目不起作用

> ID：13617282
> 
> 赞同：0
> 
> 时间：2012-11-29T01:17:39.463
> 
> 标签：iphone, ios, nsmutablearray

我正在尝试创建一个数字数组，稍后我将使用这些数字来确定我的 tableviewcells 的大小。

但是我对数组有一些问题，在我的while语句之后它返回为NULL，但是当我记录我从我的对象数组中获得的值时它们是正确的......并且if语句完美地工作。

这是我的代码

```
int count = 0;

// Cell heights
int smallCell = 69;
int largeCell = 120;

NSNumber *currentHeight = [[NSNumber alloc] init]; // allows int to be stored into NSArray

while (count < seriesSearchArray.count) {
    myObj = (SeriesSearchResultItem*)[dataArrayOfObjects objectAtIndex:count];

    if (![myObj.seriesNote isEqualToString:@""]) {
        NSLog(@"%@", myObj.seriesNote);
        currentHeight = [NSNumber numberWithInt:largeCell];
        NSLog(@"%@", currentHeight); // correct value shown
        [heightArray addObject:currentHeight];
    }
    else {
        currentHeight = [NSNumber numberWithInt:smallCell];
        NSLog(@"%@", currentHeight); // correct value shown
        [heightArray addObject:currentHeight];
    }

    NSLog(@"%@", heightArray); // NULL Shown

    count ++;
} 
```

所以这就是如果，我试图从我的数组中每个有效的对象中获取值，if 语句完美地工作，但是当我尝试将它们添加到我的新数组时，它总是返回为 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:28:34.687

移动评论以回答

你需要类似的东西

```
heightArray = [NSMutableArray arrayWithCapacity:seriesSearchArray.count] 
```

# android - 为 android 推送通知使用动态图标？

> ID：13617284
> 
> 赞同：-1
> 
> 时间：2012-11-29T01:17:49.960
> 
> 标签：android, push-notification

我是否可以将图像的 url 传递给 android 设备，以便系统托盘中的推送通知能够具有动态图标图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:33:24.443

一条 GCM 消息的最大数据包大小为 4KB。理论上，您可以在此数据包中传递位图并加载它，只要您不超过数据包限制。

我们在这里谈论多少个图标？您可以将它们与您的应用程序一起发送，并在显示通知时按下要使用的图标名称。

# iphone - UIButton 上的 backgroundImage 缩放错误

> ID：13617286
> 
> 赞同：6
> 
> 时间：2012-11-29T01:18:20.850
> 
> 标签：iphone, objective-c, ios, xcode, storyboard

当用户按下按钮然后为宽度设置动画时，我试图给我的 UIButton 一个新的背景图像。问题是按钮不缩放图像（我只使用视网膜图像）。

**点击前：**

![在此处输入图像描述](../Images/1efb283909e540df20399e40e8d37e66.png)

**点击后：**

![在此处输入图像描述](../Images/7a0074c0904bf49c176b948d0d56f59e.png)

**以及使事情发生的代码：**

```
UIImage *buttonProfileDefault = [[UIImage imageNamed:@"Profile_Button_Default"] resizableImageWithCapInsets:UIEdgeInsetsMake(3, 3, 3, 3)];
        [self.profileButton setBackgroundImage:buttonProfileDefault forState:UIControlStateNormal];

[self.profileButton removeConstraint:self.profileButtonConstraint];

// Animate
CGRect originalFrame = self.profileButton.frame;
originalFrame.size.width = 40;
[UIView animateWithDuration:0.2f
    animations:^{
        self.profileButton.frame = originalFrame;
    }
        completion:^(BOOL finished) {
    }]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:13:20.013

试试这个代码...

```
 [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    [self.profileButton setBackgroundImage:[UIImage imageNamed:@"Profile_Button_Default"] forState:UIControlStateNormal];
    [self.profileButton setBackgroundImage:[UIImage imageNamed:@"Profile_Button_Default"] forState:UIControlStateSelected];
    [self.profileButton setFrame:CGRectMake(self.profileButton.frame.origin.x, self.profileButton.frame.origin.y, self.profileButton.frame.size.width + 40, self.profileButton.frame.size.height)];
    [UIView commitAnimations]; 
```

我希望这可以帮助你...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T07:11:45.203

试试这个，而不是将图像分配为

```
UIImage *buttonProfileDefault = [[UIImage imageNamed:@"Profile_Button_Default"] resizableImageWithCapInsets:UIEdgeInsetsMake(3, 3, 3, 3)]; 
```

做这个

```
UIImage *buttonProfileDefault = [UIImage imageNamed:@"Profile_Button_Default"]; 
```

无需设置 resizableImageWithCapInsets 的约束。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T14:20:23.060

我在以下几点修改了您的代码：

*   提供图像 Profile_Button_Default.png（或 .jpg 等）的完整名称，
*   在正常情况下为图像添加状态，这些效果不会出现在按钮开始触摸时

现在检查：

```
UIImage *buttonProfileDefault = [[UIImage imageNamed:@"Profile_Button_Default.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(3, 3, 3, 3)];
[self.profileButton setBackgroundImage:buttonProfileDefault forState:UIControlStateNormal];
[self.profileButton setBackgroundImage:buttonProfileDefault
                              forState:UIControlStateSelected];
[self.profileButton setBackgroundImage:buttonProfileDefault forState:UIControlStateHighlighted];

[self.profileButton removeConstraint:self.profileButtonConstraint];

// Animate
CGRect originalFrame = self.profileButton.frame;
originalFrame.size.width = 40;
[UIView animateWithDuration:0.2f
                 animations:^{
                     self.profileButton.frame = originalFrame;
                 }
                 completion:^(BOOL finished) {
                 }]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T09:00:45.263

您创建边缘插图的方式将保持最左边的 3 个和最右边的 3 个点（或像素）不变，并且会拉伸按钮上的头部。如果你想让头部的大小保持不变，你必须将它包含在左侧，留下 1 个像素可拉伸，然后是右侧。假设你的图片的宽度是 50，你会写：

`UIImage * buttonProfileDefault = [[UIImage imageNamed:@"Profile_Button_Default"] resizableImageWithCapInsets:UIEdgeInsetsMake(3, 46, 3, 3)];`

但是，这会使您的图片位于按钮的左侧。我推荐的解决方案是使用 2 张图片：

1.  仅包含按钮边框的可调整大小的图像，设置为按钮的背景图像
2.  仅包含头部的图像，设置为恒定大小的按钮图像

代码看起来像：

`UIImage *backgroundImage = [[UIImage imageNamed:@"border.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(3, 3, 3, 3)]; // in this case you can use 3, 3, 3, 3`

`[self.profileButton setBackgroundImage:backgroundImage forState:UIControlStateNormal];`

`UIImage *titleImage = [UIImage imageNamed:@"head.png"];`

`[self.profileButton setImage:titleImage forState:UIControlStateNormal];`

希望这可以帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-05T16:34:39.877

我认为问题在于您更改背景然后调整大小。

让它与自动布局一起工作的关键是为 widthConstraint 常量值设置动画，并在动画中设置背景图像。

例如，我的视图名称**button上有一个按钮，我有一个名为****buttonWidth**的宽度约束的 IBOutlet - 下面是我的 buttonPress 的代码：

```
UIImage *imageButton = [[UIImage imageNamed:@"button"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)];

[UIView animateWithDuration:0.01f
                 animations:^{
                     [self.button setBackgroundImage:imageButton forState:UIControlStateNormal];
                 }
                 completion:^(BOOL finished) {
                     [UIView animateWithDuration:1.0f
                                      animations:^{
                                          self.buttonWidth.constant = 300;
                                          [self.view layoutIfNeeded];
                                      }
                                      completion:^(BOOL finished) {
                                      }];

                 }]; 
```

正如您在上面的代码中看到的那样，让它对我有用的关键是在动画中设置按钮背景，由于某种原因，如果我在动画之外更改了背景图像，它在动画完成之前不会正确设置。

使用 autoLayout 时也设置框架对我不起作用，所以我为约束常量设置了动画

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-03T16:18:39.183

在使用笔尖时，我也遇到过类似的情况来调整子视图的大小。不确定您是否是，但解决我的问题的是在我的各种视图中取消选中“使用自动布局”。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-05T14:50:36.690

您不能复制图像并将其调整为正确的按钮大小吗？

[在这篇文章](https://stackoverflow.com/questions/2658738/the-simplest-way-to-resize-an-uiimage)中查看 IWasRobbed 的答案。

他在那里为您提供了一个很好的功能，并声称将这种方法用于他的按钮。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-29T04:06:02.073

我遇到了同样的问题，但它发生在我的应用程序加载时，我弄乱`button`了检查器中的属性，如果你向下滚动并取消检查`autoresize subviews`它可能会起作用，它对我有用！

# c# - 您无权在群组中发帖

> ID：13617291
> 
> 赞同：2
> 
> 时间：2012-11-29T01:19:12.930
> 
> 标签：c#, facebook, winforms, facebook-c#-sdk

我已经用 C# 完成了一个程序，它与 Facebook 集成并通过点击发布到多个组

但是我现在面临一个问题，当有一个您无权向其发布的群组时，我无法完成向其他群组发布

这是我把它放在其他类中的 post 函数

```
public static bool PostImage(Frm form,string AccessToken, string Status, string ImagePath) 
{
    try
    {
        if (form.listBox2 .SelectedItems .Count  > 0)
        {
            string item;
            foreach (int i in form. listBox2.SelectedIndices)
            {
                item = form.listBox2.Items[i].ToString();
                groupid = item;

                FacebookClient fbpost = new FacebookClient(AccessToken);
                var imgstream = File.OpenRead(ImagePath);
                dynamic res = fbpost.Post("/" + groupid + "/photos", new
               {
                   message = Status,
                   File = new FacebookMediaStream
                   {    
                       ContentType = "image/jpg",
                       FileName = Path.GetFileName(ImagePath)
                   }.SetValue(imgstream)

               });
                result = true;
            }
        }
        return result;
    }
    catch (Exception ex)
    {
        System.Windows.Forms.MessageBox.Show(ex.Message);
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:06:50.700

您需要在循环内放置一个 try catch 块。然后，在 catch 块中记录错误（或用它做任何你想做的事情），然后继续循环：

```
foreach (int i in form. listBox2.SelectedIndices)
{
    try
    {
        item = form.listBox2.Items[i].ToString();
        groupid = item;

        FacebookClient fbpost = new FacebookClient(AccessToken);
        var imgstream = File.OpenRead(ImagePath);
        dynamic res = fbpost.Post("/" + groupid + "/photos", new
       {
           message = Status,
           File = new FacebookMediaStream
           {    
               ContentType = "image/jpg",
               FileName = Path.GetFileName(ImagePath)
           }.SetValue(imgstream)

       });
        result = true;
    }
    catch(exception excp)
    {
        //Do something with the exception
    }
} 
```

现在我不知道你的代码是如何工作的，但这应该给你一个粗略的想法。

# c# - 如何将 C# 性能提高到实时

> ID：13617292
> 
> 赞同：-3
> 
> 时间：2012-11-29T01:19:14.140
> 
> 标签：c#, sql

我有大量数据需要通过 C# 计算我在 DB 上有 10000 名患者，每个患者在 DB 上的记录平均有 30 次访问我需要检查他的访问组合，我通过 LINQ 完成了C# 中的[SQL 组合](https://stackoverflow.com/questions/13554279/sql-combinations)并将其与其他患者进行比较，如果我发现其他 4 个患者具有相同的组合，我会认为它是安全的

我将此用于循环代码，但需要时间，我需要提高性能

```
Parallel.For(0, 10000, (j,loopState) =>
        {
            int id1 = getid(names[j].ToString(), 101);
            Parallel.For(0, 10000, (t,loopState1) =>
                {
                    generate_firstACV5A(id1, nvisit(id1), names[j].ToString());
                    int id2 = getid(names[t].ToString(), 10000);
                    if (id1 == id2) { }
                    else
                    {
                        generate_firstACV5B(id2, nvisit(id2), names[t].ToString());
                    }

                    if (Enumerable.SequenceEqual(ACV5BFirst, ACV5Afirst) == true)
                    {
                        if (count == 0)
                     {
                         safecount++;
                         if (safecount == 4) {
                             ListViewItem it = new ListViewItem(getid(names[j].ToString(), 1000).ToString());
                             it.SubItems.Add(names[j].ToString());
                             listView3.Items.Add(it); loopState1.Break();
                         }

                       }
                    }
                }); 
```

当我将列表比较为真时出现一些运行错误

我感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:33:33.900

如果您的代码至少有数百个`ListViewItems`生成，那么问题之一是您`ListViewItems`在代码执行期间添加了触发`ListView`重绘的代码（与您拥有的所有其他计算相比，这很慢）。把你`ListViewItems`放在第`List`一个，当你完成时，你将它们添加为数组，如下所示：

```
List<ListViewItems> list = new List<ListViewItems>();
Object myLock = new Object();
Parallel.For(0, 10000, (j,loopState) =>
        {
            int id1 = getid(names[j].ToString(), 101);
            Parallel.For(0, 10000, (t,loopState1) =>
                {
                    generate_firstACV5A(id1, nvisit(id1), names[j].ToString());
                    int id2 = getid(names[t].ToString(), 10000);
                    if (id1 == id2) { }
                    else
                    {
                        generate_firstACV5B(id2, nvisit(id2), names[t].ToString());
                    }

                    if (Enumerable.SequenceEqual(ACV5BFirst, ACV5Afirst) == true)
                    {
                        if (count == 0)
                     {
                         safecount++;
                         if (safecount == 4) {
                             ListViewItem it = new ListViewItem(getid(names[j].ToString(), 1000).ToString());
                             it.SubItems.Add(names[j].ToString());

                             lock (myLock )
                             {
                                 list.Add(it); 
                             }

                             loopState1.Break();
                         }

                       }
                    }
                });
listView3.Items.AddRange(list.ToArray()); 
```

即使在添加期间锁定对列表的访问也会比用大约 1000 个项目重绘 listView 快得多。当我测试时，这种方法快了近 10 倍。

# google-nativeclient - 在 Windows 上，如何在 Chrome 之外运行 Google 的 Native Client？

> ID：13617293
> 
> 赞同：3
> 
> 时间：2012-11-29T01:19:17.593
> 
> 标签：google-nativeclient

*这个问题专门针对 Windows（64 位）。*

[此处](https://stackoverflow.com/questions/4690526/can-i-run-googles-native-client-outside-of-the-browser)提出了类似的问题，但答案似乎特定于 Linux（可能还有 OS X）。

非 Windows 的答案是使用 sel_ldr 但在 Windows 上的 Chrome 安装中没有这样的文件。nacl64.exe 似乎是具有相同功能的文件。这个[页面](http://code.google.com/p/nativeclient/wiki/ChromiumIntegration)提到了“NaCl 进程”，即使 Chrome 在 x64 Windows 上是 32 位进程，sel_ldr 也需要是 64 位，因此是一个单独的进程。我还看到 nacl64.exe 在我的插件加载时运行，而当我在没有加载 NaCl 插件的情况下启动 Chrome 时没有运行。

Visual Studio的[NaCl 插件](https://developers.google.com/native-client/dev/devguide/devcycle/vs-addin)需要在 64 位窗口上运行，因此上面关于 64 位的注释。

在此[页面上](https://groups.google.com/forum/#!topic/native-client-discuss/u68-MImnT0U/discussion)，我发现了一个在 Linux 上被报告为成功的示例：

```
~/nacl_sdk/pepper_19/tools/sel_ldr_x86_64 -B ~/nacl_sdk/pepper_19/tools/irt_x86_64.nexe hello_x86_64.nexe 
```

[在这里](https://groups.google.com/forum/#!topic/native-client-discuss/WK0f53cTG0s/discussion)我也为 Linux 找到了这个例子：

```
/home/ubuntu/nacl_sdk/pepper_19/tools/sel_ldr_x86_32 -a -S -B /home/ubuntu/nacl_sdk/pepper_19/tools/irt_core_x86_32.nexe <plug-in path> 
```

所以我尝试了一些以此为模型的命令，但都导致 nacl64.exe 崩溃：

```
<user directory>\AppData\Local\Google\Chrome\Application\23.0.1271.91>nacl64.exe -B nacl_irt_x86_64.nexe <NaCL SDK root>\vs_addin\examples\hello_nacl_cpp\hello_nacl_cpp\NaCl64\newlib\Debug\hello_nacl_cpp_64.nexe

d:\><user directory>\AppData\Local\Google\Chrome\Application\23.0.1271.64\nacl64.exe -B <user directory>\AppData\Local\Google\Chrome\Application\23.0.1271.64\nacl_irt_x86_64.nexe <NaCL SDK root>\vs_addin\examples\hello_nacl_cpp\hello_nacl_cpp\NaCl64\newlib\Debug\hello_nacl_cpp_64.nexe

d:\><user directory>\AppData\Local\Google\Chrome\Application\23.0.1271.64\nacl64.exe -a -S -B <user directory>\AppData\Local\Google\Chrome\Application\23.0.1271.64\nacl_irt_x86_64.nexe <NaCL SDK root>\vs_addin\examples\hello_nacl_cpp\hello_nacl_cpp\NaCl64\newlib\Debug\hello_nacl_cpp_64.nexe 
```

我已经验证了 hello_nacl_cpp_64.nexe 在通过网页在 Chrome 中运行时可以正常工作。

那么问题来了，在 Windows 上，如何在 Chrome 之外成功运行 Google 的 Native Client？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T06:44:51.850

您可以在文件夹中的 NaCl SDK 中找到 sel_ldr.exe 和非浏览器 IRT `pepper_<version>/tools`。

请注意，NaCl 应用程序无法在浏览器和 sel_ldr 中成功运行。浏览器应用程序不应该有主，命令行应用程序必须有它。命令行应用程序也不能使用 Pepper API，因为 sel_ldr 没有实现它们。

# c# - asp.net，使用登录时提取的数据

> ID：13617294
> 
> 赞同：0
> 
> 时间：2012-11-29T01:19:30.677
> 
> 标签：c#, asp.net, sql-server

我有一个通向主页的登录页面，登录页面从数据库中的一个视图中提取以验证用户名和密码（该视图有 3 列，用户名、密码和名称）它选择所有数据，包括名称但仅使用用户名和密码。

这是登录代码：

```
 protected void LoginButton_Click(object sender, EventArgs e)
    {
        lblerror.Visible = false;     
        SqlConnection conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["SurveySystemConnectionString"].ConnectionString);
        conn.Open();
        string queryString = "SELECT * FROM [Users] WHERE Username=@username AND Password= @password";
        SqlCommand command = new SqlCommand(queryString, conn);
        command.Parameters.AddWithValue("@username", UserNameTextBox.Text);
        command.Parameters.AddWithValue("@password", PasswordTextBox.Text);

        SqlDataReader reader = null;
        reader = command.ExecuteReader();

        if (reader.Read())
        {
            Session["Username"] = UserNameTextBox;
            Session["Password"] = PasswordTextBox;
            Response.Redirect("Home.aspx");
           }
          else
            {
                lblerror.Visible = true;
                lblerror.Text = "Incorrect Username/Password Combination";
            }
            conn.Close();
 } 
```

我想要做的是在主页上显示一条欢迎消息，“欢迎（刚刚使用其 id 的用户的名称）”。如何做到这一点，以便主页在他/她注销之前始终具有该人的姓名，这意味着即使他们在登录时来回进入其他页面。我正在为我的数据库使用 Sql 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:41:01.133

例子：

在您的登录代码上，只需获取用户名列并将其传递给会话

```
Session["Name"] = reader["Name"].ToString() //Supposed your column name is called Name 
```

检查此链接以了解如何在 datareader 上检索列值：[使用 C# .NET DataReader 检索数据](http://www.akadia.com/services/dotnet_data_reader.html)

然后在您的母版页标题上添加带有 id lblusername 的标签控件

```
<table>
<tr>
<td align="right">
Welcome :
<asp:Label ID="lblUserName" runat="server"></asp:Label>
<td>
</tr>
</table> 
```

然后在你后面的代码上添加

```
lblUserNAme.Text =  Session["Name"].toString(); 
```

在您的母版页 page_load

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:22:35.640

您似乎将用户名存储在 Session["Username"] 中，因此您可以在成功登录后检索该值并将标签的文本设置为该值。

您可以在后面的代码中执行此操作，或者在 *.aspx 中内联：

```
Welcome <%= Session["Username"] %>! 
```

# coldfusion - CFDocument在循环中忽略背景颜色

> ID：13617295
> 
> 赞同：0
> 
> 时间：2012-11-29T01:19:43.640
> 
> 标签：coldfusion, coldfusion-9, cfdocument

我正在运行一个循环来构建多个 PDF。在循环中创建的 pdf 2+ 的背景颜色完全消失了。背景颜色是否在 CSS 中定义、作为 HTML 样式、使用十六进制代码或仅使用颜色名称都无关紧要。

如果我要在没有循环的情况下连续创建 2 个 pdf，这不是问题。

知道什么给出了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T16:47:31.697

这是一个错误，它只影响保存在内存中的 cfdocument，不影响直接显示给浏览器的 cfdocument。如果您必须将文档保存在内存中，解决方法非常简单；使用包含或 cfc。

**我的文档.cfm**

```
<cfdocument name = "myDoc">
 ...
 ...
</cfdocument> 
```

**myLoop.cfm**

```
<cfloop ...>
  <cfinclude template= "myDocument.cfm">
</cfloop> 
```

我在这里提到了这个错误和解决方法：[cfdocument prevent page breaks mid-row](https://stackoverflow.com/questions/12061281/cfdocument-prevent-page-breaks-mid-row)

# html - 引导跨度2不工作

> ID：13617304
> 
> 赞同：0
> 
> 时间：2012-11-29T01:21:14.980
> 
> 标签：html, css, twitter-bootstrap

[http://thegsx.com/bootstrap.htm](http://thegsx.com/bootstrap.htm)

出于某种原因，如果我在流体行上执行 span2，它会导致 div 为 100% 宽并破坏设计

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:30:57.823

由于某种原因，您的 bootstrap-responsive.css 文件缺少以下块：

```
 .row-fluid .span2 {
    width: 14.52991452991453%;
    *width: 14.476723040552828%;
  } 
```

将其添加回来，它应该可以按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:28:37.433

删除具有类 span2 的元素上的行类。

# vba - vba循环中的类型不匹配错误

> ID：13617305
> 
> 赞同：1
> 
> 时间：2012-11-29T01:21:21.357
> 
> 标签：vba, outlook

我在 Outlook VBA 中工作，并构建了一个 For Next 循环来读取 MailItems 的正文，这些邮件的格式类似于 Key=Value 对。在某种程度上它似乎正在工作，但是在第二次迭代结束时，当它到达“下一个项目”时，我得到了抛出“类型不匹配”的错误。好吧，还有第三个 MailItem 需要读入，所以我不知道为什么会出现这个错误。任何指导将不胜感激。

```
Sub ReadMailItems()

Dim olapp As Outlook.Application
Dim olappns As Outlook.NameSpace
Dim oitem As Outlook.MailItem
Dim ItemsToProcess As Outlook.Items
Dim myFolder As MAPIFolder
Dim sFilter As String
Dim dailyStats As CRBHA_Stats
Dim kvPairs As Collection
Dim Item As KeyValuePair
Dim today As Date
today = Date

On Error GoTo LocalErr

'set outlook objects
Set olapp = New Outlook.Application
Set olappns = olapp.GetNamespace("MAPI")
Set myFolder = olappns.GetDefaultFolder(olFolderInbox)
'Filter or only MailItems received today
sFilter = "[ReceivedTime] >= " & AddQuotes(Format(Date, "ddddd"))
Set ItemsToProcess = Session.GetDefaultFolder(olFolderInbox).Items.Restrict(sFilter)
Set StatsCollection = New Collection

For Each oitem In ItemsToProcess
 If CheckSubject(oitem.Subject) Then
   Set kvPairs = GetKeyValuePairs(oitem.body)
   'Iterate over the Collection and load up
   'an instance of CRBHA_Stats object
   Set dailyStats = New CRBHA_Stats
   dailyStats.SubmissionDate = today
   For Each Item In kvPairs
     If LCase(Item.Key) = LCase("EmployeeID") Then
        dailyStats.EmployeeID = Item.Value
     ElseIf LCase(Item.Key) = LCase("Approved") Then
        dailyStats.Approved = Item.Value
     ElseIf LCase(Item.Key) = LCase("Declined") Then
        dailyStats.Declined = Item.Value
     ElseIf LCase(Item.Key) = LCase("PFA") Then
        dailyStats.PFAs = Item.Value
     ElseIf LCase(Item.Key) = LCase("Followups") Then
        dailyStats.FollowUps = Item.Value
     ElseIf LCase(Item.Key) = LCase("CRA") Then
        dailyStats.CRAs = Item.Value
     End If
    Next Item

    'Add each CRBHA_Stats object to the StatsCollection
    StatsCollection.Add dailyStats

    Debug.Print dailyStats.ToString
    Debug.Print "_____________" & vbCrLf
  End If
Next oitem   '<<<<This is where it cuts out

ExitProc:
Set olapp = Nothing
Set olappns = Nothing
Set myFolder = Nothing
Set ItemsToProcess = Nothing
Set dailyStats = Nothing
Exit Sub

LocalErr:
  If Err.Number <> 0 Then
   Msg = "Error # " & Str(Err.Number) & " was generated by " _
       & Err.Source & Chr(13) & "Error Line: " & Erl & Chr(13) & Err.Description
   MsgBox Msg, , "Error", Err.HelpFile, Err.HelpContext
   End If
   'Resume Next

End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T01:54:50.773

```
Dim oitem As Object   'not Outlook.MailItem
'....
For Each oitem In ItemsToProcess
    if typename(oitem)="MailItem" then
        'process the mail
        '....
    end if
Next oitem
'........ 
```

# c# - 从 Windows 8/WinRT 中的不同线程更新 UI 元素

> ID：13617306
> 
> 赞同：1
> 
> 时间：2012-11-29T01:21:25.197
> 
> 标签：c#, asynchronous, windows-8, windows-runtime

我在 Windows 8“Metro”应用程序中有一个按钮和一个文本块。单击按钮时，它会通过 HttpWebRequest 调用 Web 服务。

```
private void buttonGo_Click(object sender, RoutedEventArgs e)
{
    HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://localhost/");

    req.BeginGetResponse(ResponseCallback, req);
}

private void ResponseCallback(IAsyncResult asyncResult)
{
    HttpWebRequest req = (HttpWebRequest)asyncResult.AsyncState;

    HttpWebResponse res = (HttpWebResponse)req.EndGetResponse(asyncResult);
    Stream streamResponse = res.GetResponseStream();
    StreamReader streamRead = new StreamReader(streamResponse);
    string responseString = streamRead.ReadToEnd();

    info.Text = responseString; // Can't do this as outside the UI thread
} 
```

我想`info.Text`用从 WebRequest 返回的数据进行更新，但是它会导致错误：*“应用程序调用了一个为不同线程编组的接口。”* 我知道这是因为它不是从 UI 线程调用的。

我发现了各种不同的解决方案，涉及`Dispatcher`, `SynchronizationContext`,`await`关键字。

最简单/最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T07:02:47.730

正如 Damir 所说，我们确实应该使用 async/await 模式，但有时只需在工作线程（任务）中更新 UI。这是使用将调用分派到 UI 线程的当前 CoreDispatcher 完成的：

```
private void ResponseCallback(IAsyncResult asyncResult)
{
   ...

   this.Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
   {
      info.Text = responseString;
   });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T05:40:56.707

在 Windows 应用商店应用程序中，您确实应该对所有异步调用使用 async await 模式——这是最简单和最有效的方法。您可以重写现有代码以使用此模式，如下所示：

```
private async void buttonGo_Click(object sender, RoutedEventArgs e)
{
    HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://localhost/");

    HttpWebResponse res = (HttpWebResponse)(await req.GetResponseAsync());
    Stream streamResponse = res.GetResponseStream();
    StreamReader streamRead = new StreamReader(streamResponse);
    // all IO operations should be called asynchronously
    string responseString = await streamRead.ReadToEndAsync();

    info.Text = responseString; // This way the code runs on UI thread
} 
```

每个 await 关键字之后的代码实际上就像在回调中一样，但它始终在 UI 线程上执行，因此您不必担心它。

适用于 Windows 应用商店应用程序的 API 中的所有 IO 绑定操作均以异步方式提供。你应该更喜欢它们而不是同步的，即使两者都可以防止 UI 线程阻塞——`ReadToEndAsync`例如上面的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T01:35:09.807

最简单和最好的：

```
private async void buttonGo_Click(object sender, RoutedEventArgs e)
{
  using (var client = new HttpClient())
  {
    info.Text = await client.GetStringAsync("http://localhost/");
  }
} 
```

在幕后，`await`捕获当前`SynchronizationContext`并在该上下文中恢复方法。Win8/WinRT`SynchronizationContext`反过来使用`Dispatcher`.

# playframework - 在 Play Framework 中是否会阻止 SQL 访问？

> ID：13617307
> 
> 赞同：4
> 
> 时间：2012-11-29T01:21:30.203
> 
> 标签：playframework, playframework-2.0

我可能误解了 Play Framework (2.x) 的一些基本内容，但是关于访问普通 SQL 数据库的文档和这样做的项目示例似乎都没有异步执行此操作。

没有`Promise<Result>`，没有 Akka 的东西等。

如果您使用普通的 MySQL JDBC 驱动程序进行数据库查询，您是否不会阻塞主服务器线程？我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:26:07.780

是的，db 驱动程序阻塞了等待数据库结果的线程。

即使您像 ico_ekito 建议的那样将 JDBC 调用包装在 Akka 未来中，它仍然会在整个数据库请求期间*阻塞一个服务器线程。*这样做可能只会在不同的线程上执行调用（取决于 Akka 决定如何执行它），但它仍然会阻塞该线程。

解决此问题的唯一正确方法是使用非阻塞数据库驱动程序。

顺便说一句，您可以很容易地发现阻塞的数据库驱动程序。如果它的界面看起来像这样：

```
ResultSet results = connection.execute(query); 
```

它肯定是阻塞的。您可以通过返回 Futures、Promises（具有写入端的 Futures）或接受回调的方法来识别非阻塞 API。

另请注意，没有“主”服务器线程（如浏览器/桌面应用程序中的 UI 线程）。只有几个线程处理请求。

如需更深入的讨论，请查看[此处](http://coding-time.blogspot.de/2012/06/non-blocking-io-demystified.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T08:58:55.907

AFAIK，如果您正在查看“计算机数据库”示例，那么您是完全正确的，它阻塞了主线程，因为操作不是异步执行的。

[这是样本](https://github.com/playframework/Play20/blob/2.0.4/samples/java/computer-database/app/controllers/Application.java)的摘录：

```
public static Result list(int page, String sortBy, String order, String filter) {
    return ok(
        list.render(
            Computer.page(page, 10, sortBy, order, filter),
            sortBy, order, filter
        )
    );
} 
```

在这里，`Computer.page()`正在执行一些 JDBC 阻塞调用。

如果您想异步执行此操作，则应将数据库调用包含在`async(F.Promise<Result>)`调用中。像这样的东西：

```
public static Result list(int page, String sortBy, String order, String filter) {
    return async(
            Akka.future(
                new Callable<Result>() {
                  public Result call() {
                    return ok(
                        list.render(
                            Computer.page(page, 10, sortBy, order, filter),
                            sortBy, order, filter
                        )
                    );
                  }
                }
        )
    ); 
```

}

# apache - 信号总线错误 (7)

> ID：13617308
> 
> 赞同：1
> 
> 时间：2012-11-29T01:21:32.167
> 
> 标签：apache, magento, nginx

几个月来，我们的一个客户站点一直在遭受信号总线错误 (7) 问题；作为一个交通繁忙的网站，已知该错误每天会出现 100 次。

在站点的前端，它显示 502 网关错误，主要是因为我们让 Nginx 与 Apache 一起运行。

我们的托管服务提供商已经检查了服务器硬件并重新安装了 Apache，但问题仍然存在。

网站暂停时；错误停止；使该站点停止维护意味着错误再次出现。

根据经验，这是否意味着这是一个站点代码级别的问题，如果是这样，在 Magento 站点上获取问题的推荐方法是什么？或者这可能与 APC 之类的东西有关吗？

作为参考，我们正在运行 Centos 5.8 服务器，具有 16 个 CPU 核心和 32GB 内存。我们正在运行带有 Ion Cube Loader 和 Zend 引擎的 PHP 5.3.18。服务器上的站点也在使用 APC。

任何想法将不胜感激；很高兴提供更多信息。

# javascript - 使用 jQuery 将选择数据附加到 URL

> ID：13617311
> 
> 赞同：0
> 
> 时间：2012-11-29T01:21:50.607
> 
> 标签：javascript, jquery

我在尝试根据 Select 元素的值使用 jQuery 将参数添加到 URL 时遇到问题。到目前为止，这是我的代码：

```
<script type="text/javascript">
$(document).ready(function () {
    $("#sel-1").change(function() {
        $(this).closest("form").submit();
});
var input = $("<input>").attr("type", "hidden").attr("name", "state").val($("#sel-1").val());
$('.start-form').append($(input));
});
</script>

<form action="process.php" class="start-form">
    <fieldset>
        <div class="row">
            <label for="sel-1">Select <strong>State</strong></label>
            <select id="sel-1">
                <option value="Select">Select</option>
                <option value="AK">AK</option>
                <option value="CA">CA</option>
                <option value="TX">TX</option>
            </select>
        </div>

        <input type="submit" class="hidden"/>
    </fieldset>
</form> 
```

出于某种原因，无论我选择哪个选项，URL 都会变成 process.php?state=Select。我需要它做的是变成 process.php?state=TX 或用户选择的任何选项。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:26:56.733

您需要更新隐藏输入的值：

```
$(document).ready(function () {
    $("#sel-1").change(function() {
        $('[name=state]').val($('#sel-1').val()); 
        $(this).closest("form").submit();
}); 
```

这里的例子：http: [//jsfiddle.net/wKvLm/1/show/](http://jsfiddle.net/wKvLm/1/show/)

另外...使用您当前的代码，无需通过 JS 创建该输入。您可以像这样在 HTML 中定义它：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#sel-1").change(function() {
            $('[name=state]').val($('#sel-1').val());        
            $(this).closest("form").submit();
        });
    });
</script>

<form action="process.php" class="start-form">
    <fieldset>
        <div class="row">
            <label for="sel-1">Select <strong>State</strong></label>
            <select id="sel-1">
                <option value="Select">Select</option>
                <option value="AK">AK</option>
                <option value="CA">CA</option>
                <option value="TX">TX</option>
            </select>
        </div>
        <input type="hidden" name="state" value="Select"/>
        <input type="submit" class="hidden"/>
    </fieldset>
</form>​ 
```

这里的工作示例：http: [//jsfiddle.net/wKvLm/2/show/](http://jsfiddle.net/wKvLm/2/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:25:56.703

发生这种情况是因为它在页面加载时获得了值。

尝试：

```
<script type="text/javascript">
$(document).ready(function () {
    $("#sel-1").change(function() {
        if ($("#sel-1").val() != "Select") {
            var input = $("<input>").attr("type", "hidden").attr("name", "state").val($("#sel-1").val());
            $('.start-form').append($(input));
            $(this).closest("form").submit();
        }
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T01:28:28.810

尝试这个。

```
 <script type="text/javascript">
$(document).ready(function () {
    $("#sel-1").change(function() {
        var input = $("<input>").attr("type", "hidden").attr("name", "state").val($("#sel-1").val());
$('.start-form').append($(input));
        $(this).closest("form").submit();
});

});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T01:33:00.993

一个简单的方法是使用 jQuery 的 serialize 方法：

```
<form action="process.php" class="start-form">
    <fieldset>
        <div class="row">
            <label for="sel-1">Select <strong>State</strong></label>
            <select id="sel-1">
                <option value="Select">Select</option>
                <option value="AK">AK</option>
                <option value="CA">CA</option>
                <option value="TX">TX</option>
            </select>
        </div>
        <input type="submit" onlick="alert($(this).closest('form').serialize()); return false;" class="hidden"/>
    </fieldset>
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T01:28:55.980

```
<script type="text/javascript">
$(document).ready(function () {

    $("#sel-1").change(function() {

      var input = $("<input>").attr("type", "hidden").attr("name", "state").val($("#sel-1").val());
        $('.start-form').append($(input));
        $(this).closest("form").submit();
});

});
</script> 
```

您应该在 on change 事件中设置变量数据。

我们在这里所做的是添加一个新的输入隐藏字段，并在下拉列表更改时删除值。然后附加输入字段并提交表单。

# wpf - WPFToolkit 未显示在 Visual Studio 2010 中

> ID：13617314
> 
> 赞同：0
> 
> 时间：2012-11-29T01:22:20.907
> 
> 标签：wpf, wpftoolkit

我是 WPF 及其工具包的新手，对使用它很感兴趣，并找到了以下 URL：

[如何在 Visual Studio 2010 中引用 WPF 工具包？](https://stackoverflow.com/questions/6779227/how-do-i-reference-the-wpf-toolkit-in-visual-studio-2010)

[WPF 工具包 - 验证升级？](https://stackoverflow.com/questions/8582626/wpf-toolkit-verify-upgrade)

但是，我不确定解决方案。我尝试通过在引用下添加其 DLL 从解决方案资源管理器添加其 DLL。是的，我在 Toolbox 上没有看到任何 WPFToolkit。我不确定他们为什么将这些行添加到 GAC 中。任何想法？

它已安装并且是最新版本。有人可以给我一个方向吗？

谢谢。

# ios - iOS 6 上的 UITextView ContentSize.Height 太高

> ID：13617317
> 
> 赞同：0
> 
> 时间：2012-11-29T01:22:35.480
> 
> 标签：ios, ios6, uitextview

我有以下代码来计算 UITableView 单元格的高度。

```
 UIFont *textFont = [SettingsManagerUI defaultFontItalicWithSize:14];

  UIView *tempView = [[UIView alloc] init];

  UITextView *locationText = [[UITextView alloc] init];
  UITextView *moreInfoText = [[UITextView alloc] init];

  [tempView addSubview:locationText];
  [tempView addSubview:moreInfoText];

  [locationText setFont:textFont];
  [moreInfoText setFont:textFont];

  NSString *locationDetails = [MembersSavePartnerDetailsMoreInfoTableCell generateLocationTextWithPartner:partner inLocation:location];
  locationText.text = locationDetails;

  NSString *moreInfo = partner ? partner.partnerDescription : location.partner.partnerDescription;
  moreInfoText.text = moreInfo;

  float locationTextHeight = locationText.contentSize.height;
  float moreInfoTextHeight = moreInfoText.contentSize.height; 
```

在 iOS 5.1.1 中，`locationTextHeight`是 88 和`moreInfoTextHeight`= 52。在 iOS 6 中，高度分别是 1420 和 2482。

为什么 iOS 6 中的高度不同，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:49:02.993

该问题是由于未使用框架初始化 UITextView 引起的。

```
UITextView *locationText = [[UITextView alloc] initWithFrame:CGFrameMake(0,0,200,20)];
UITextView *moreInfoText = [[UITextView alloc] initWithFrame:CGFrameMake(0,0,200,20)]; 
```

在 iOS 6 之前，UITextView 必须有一个宽度大于 0 的默认框架。

# c++ - cl.h 是否适用于 C++？

> ID：13617319
> 
> 赞同：0
> 
> 时间：2012-11-29T01:22:38.113
> 
> 标签：c++, opencl

我知道 OpenCL 有一个 C++ binder，但我使用了一个第三方库，它目前只与 CL.h 一起使用。我想用 C++ 编写我的程序。在 C++ 程序中包含 cl.h 并以 C 风格使用它是否安全？

我看到了一些在 C++ 中包含 cl.h 的示例，它们似乎正在工作。但是，我不确定。是否有任何可能导致问题的具体情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T01:26:48.293

是的。它是一个 C/C++ 头文件，带有适当的“extern "C" " 保护。

[http://www.khronos.org/registry/cl/api/1.0/cl.h](http://www.khronos.org/registry/cl/api/1.0/cl.h)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T01:24:24.383

如果它是 C 头文件，则可以将其包装在`extern "C"`指令中：

```
extern "C"
{
   #include "CL.h"
} 
```

这告诉链接器在查找头文件中声明的函数时不要应用名称修饰。

# c# - 工厂模式实现加上读写

> ID：13617320
> 
> 赞同：1
> 
> 时间：2012-11-29T01:23:05.087
> 
> 标签：c#, oop, design-patterns, factory-pattern, design-principles

我正在尝试以正确的方式设计应用程序，它应该

1.  从 SQL Server 读取发票数据（根据发票类型进行 2 次查询：销售或采购）
2.  处理它（Acme 可能需要比 SugarCorp 更少的字段和不同的格式）
3.  输出 txt 或 csv（将来可能会改变）

我发现工厂模式很有帮助，所以根据我的关注准备了一个 UML 图。

![UML 图](../Images/aaf72f693ced54ae59598311e97d7762.png)

每个都`InvoiceFactoryProvider`可以生成`PInvoice`或`SInvoice`（特定于它们）。`CreatePInvoice()`并且`CreateSInvoice()`应该调用`load()`和`save()`方法。

如何`load()`与 SQLReader 类结合以获取每一行作为`PInvoice`对象？和`save()`我的`IDataWriter`界面。你能提供一些例子/建议吗？

**编辑：**

在查看了桥接模式的示例后，正如 Atul 所建议的，我使用它为这个问题创建了一个类图，如下所示：

![UML 图 - 桥接模式](../Images/4752b92f3f0832c725cf8ccdf5ce939e.png)

`Invoice`SQL 查询可能会有所不同（应用程序可能会从不同的系统加载发票数据 -`PollosInvoice`或`StarInvoice`）以及它们的处理方式（不同的实现）。

在这种情况下，我将抽象`Invoice`从其实现中分离出来，将发票导出到某些软件（`AcmeExporter`或`SigmaExporter`）。`AcmeExporter`并将`SigmaExport`根据规范设置它们的字段——从 Invoice 的 DataTable 中获取的交易日期、付款方式、发票类型等。`ExportInvoice()`将返回`DataTable`所需的数据。`InvoiceExporter`也是使用编码和文件格式两个接口。

你怎么看待这件事？它有什么样的缺陷/优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:17:41.123

目前，您似乎正在使用抽象工厂设计模式来创建您的产品（发票）。但需要注意的是，您的加载和保存方法在产品（发票）内部，因此最好使用桥接设计模式。您的产品将使用 Reader 和 Writer 的实现来加载和保存记录。

注意：即使使用此设计模式，您也可以使用 AbstractFactory。

它看起来像下面......（只是一个类比）

![在此处输入图像描述](../Images/8ac29ad355f4312747a0521b49823197.png)

# ios - 在设备就绪上检查 navigator.globalization 在 iOS 上返回 undefined

> ID：13617325
> 
> 赞同：3
> 
> 时间：2012-11-29T01:23:24.353
> 
> 标签：ios, cordova

我在 iOS 上使用 PhoneGap 2.2.0 并绑定到 devicready 事件以查看 navigator.globalization 对象是否存在。我越来越不确定。

我的代码如下所示：

```
document.addEventListener('deviceready', onDeviceReady, false);

function onDeviceReady()
{
    alert('deviceready');
    navigator.globalization.getLocaleName(function(d)
    {
        window.localStorage.setItem('localeLanguage', d.value);
        console.log('localeLanguage: is'+d.value);
    },
    function(error)
    {
        console.log('error getting locale language');
    });
} 
```

`alert('deviceready')`永不开火。我在这里真的很茫然。我正在按如下方式设置我的脚本。

```
<script src="js/jquery-1.8.2.min.js"></script>
<script src="js/jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript" src="cordova-2.2.0.js"></script>
<script type="text/javascript">
    //alert(typeof navigator.globalization);
</script>
<script src="js/jquery.ui.map.full.min.js"></script>
<script src="js/jquery.ui.map.services.min.js"></script>
<script src="js/jquery.i18n.min.js"></script>
<script src="js/languages.js"></script>
<script src="js/oakglobalization.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
    app.initialize();
</script>
<script type="text/javascript" src="js/custom.js"></script> 
```

任何想法都会有所帮助，因为这现在是一个很好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T15:42:57.277

尝试 ：

```
$(document).ready(function() {  
    document.addEventListener("deviceready", onDeviceReady, false); 
}); 
```

添加您的事件侦听器。

也许尝试更新您的科尔多瓦版本。当前版本是 2.6.0。

另一点：使用 phonegap，使用 Navigator.notification.alert 方法而不是本机 javascript 警报。更多信息[在这里](http://docs.phonegap.com/en/2.6.0/cordova_notification_notification.md.html#notification.alert)。

希望这可以帮助 ！再见 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T20:42:00.633

不确定你是否解决了它，但至少对我来说（PG 3.3.0）使用 navigator.globalization 我必须安装 cordova 插件并相应地更改 XML。

```
command-line> cordova plugin add org.apache.cordova.globalization
config.xml>
    <feature name="Globalization">
        <param name="ios-package" value="CDVGlobalization" />
    </feature> 
```

在那一点上，它仅在真正的 iOS xcode 模拟器上不适用于浏览器模拟器（即：涟漪）...备份您的项目以防万一；）

# ios - UISwitch 和 viewWithTag 在 numberOfRowsInSection 中为零

> ID：13617329
> 
> 赞同：1
> 
> 时间：2012-11-29T01:24:05.517
> 
> 标签：ios, null

我正在尝试找出在 UITableView 的标题中添加和管理 UISwitch 的最佳方法，到目前为止，我已经阅读了几个关于如何最好地在表中使用 UISwitch 的链接：[here](https://stackoverflow.com/questions/9691865/viewwithtag-and-addsubview)、[here](https://stackoverflow.com/questions/4053541/tableview-cell-contentview-viewwithtag-is-returning-nil)和[here](https://stackoverflow.com/questions/12402299/viewwithtag-return-nil-on-subsequent-calls-to-cellforrowatindexpath)。这些链接演示了在单元格中使用 UISwitch 而我在标题的自定义 UIView 中使用它们。也就是说，我更喜欢使用标签来管理这些对象，但我无法弄清楚为什么 viewWithTag 方法不起作用。

旁注：我能够在运行时将 UISwitches 放入 NSMutableArray 并以这种方式管理它们，但我宁愿不要那么冗长，管理数组上的边界违规/索引或检查 nil 列表等...我也不清楚如何使用 IBOutlets 来做到这一点。这就是我尝试标签方法的原因。

我的目标是使用开关折叠/展开每个部分中的行，这就是为什么我考虑将 UISwitches 作为子视图标记并添加到我在 viewForHeaderInSection 中返回的 UIView。然后当我需要执行一些逻辑来折叠单元格时重新引用它们。此外，在运行时我可以有 1 个或多个部分，因此对标签号进行硬编码是不切实际的。这是该方法的代码：

假设：

```
#define kSwitchTagRange 2000 
```

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{    
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.tableView.bounds.size.width, 44)];

    // Add UISwitches and ensure that UISwitch doesn't already exist for this section...
    UISwitch *switchView = (UISwitch*)[self.tableView viewWithTag:(kLayerSwitchTagRange + section)];

    if (switchView == nil) {

        // Create switch
        switchView = [[UISwitch alloc] init];
        double xOffset = self.tableView.bounds.size.width - switchView.frame.size.width;
        switchView.frame = CGRectMake(xOffset,
                                      7,
                                      switchView.frame.size.width,
                                      switchView.frame.size.height);

        [switchView addTarget:self action:@selector(switchChanged:) forControlEvents:UIControlEventValueChanged];

        // Should we tag the switch view?
        switchView.tag = kSwitchTagRange + section;
    }

    // Add switch as subview
    [view addSubview:switchView];    

    return view;
} 
```

在 switchChanged: 我只是重新加载表的数据：

```
- (void)switchChanged:(id)sender {

     [self.tableView reloadData];
} 
```

最后，当重新创建表的数据时，我尝试检索 UISwitch 并确定它的开/关状态，然后如果为 OFF，则返回该部分中的行数 0，如果为 ON，则返回一些其他数字：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    NSInteger rowCount = 0;

    UISwitch *switchView = (UISwitch*)[self.view viewWithTag:(kSwitchTagRange + section)];

    if (switchView != nil && switchView.isOn == NO)
    {
        rowCount = 0;

    }
    else
    {
        // Row count is something other than 0
        rowCount = 3;
    }

    return rowCount;
} 
```

不幸的是，这个 switchView 总是为零。

我有一些猜测，但无法确定为什么会发生这种情况。

*   猜想 1：当重新加载表的数据时，我想要添加的开关的 UIView 被释放。它不存在于内存中，因此无法通过标签搜索。
*   猜测 2：我错误地将 UISwitch 添加到视图对象（在许多示例中，我看到对象添加到 UITableViewCell 的 contentView，但是由于我在 viewForHeaderInSection: 方法中发回 UIView，我不确定那些示例适用于此处。 addSubview 应该将任何对象添加到树中。

谁能告诉我为什么上面的 viewWithTag 方法会返回 nil？我倾向于 Guess #1，但没有找到任何文档告诉我自定义标头 UIView 随时被释放。单元格被重复使用，但是节标题呢？

最后，我读过[这篇文章](http://doing-it-wrong.mikeweller.com/2012/08/youre-doing-it-wrong-4-uiview.html)，虽然关于标签使用的建议是有道理的，但它似乎根本不喜欢标签方法。如果您不觉得使用标签很麻烦，而且它们被巧妙地使用，为什么不使用它们呢？为什么标签功能甚至可用？

真的，我只想知道为什么 viewWithTag 方法在我的情况下返回 nil。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:03:13.440

我不确定为什么您的 viewWithTag 总是返回 nil，我认为这可能与视图在某个时候被释放的事实有关。

然而，标签仍然可以做你想做的事，但你需要在你的模型对象中有一个属性或键来跟踪开关的值。您可以使用标签来告诉开关在其操作方法中的哪个部分，并适当地更新模型。这就是我所做的。我的模型是一个字典数组，其中键“rowData”的值是包含该部分所有数据的数组，键“switchValue”的值是 NSNumber，0 或 1，表示开关的状态. 因此，我的数据如下所示：

```
2012-11-28 22:50:03.104 TableWithSwitchesInHeaderView[3592:c07] (
        {
        rowData =         (
            One,
            Two,
            Three,
            Four
        );
        switchValue = 1;
    },
        {
        rowData =         (
            Red,
            Orange,
            Yellow,
            Green,
            Blue,
            Violet
        );
        switchValue = 1;
    },
) 
```

这是我在相关的表视图委托和数据源方法中所拥有的：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return self.theData.count;
}

-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.tableView.bounds.size.width, 44)];
    UISwitch *switchView = [[UISwitch alloc] init];
    double xOffset = self.tableView.bounds.size.width - switchView.frame.size.width;
    switchView.frame = CGRectMake(xOffset,7,switchView.frame.size.width,switchView.frame.size.height);
    [switchView addTarget:self action:@selector(switchChanged:) forControlEvents:UIControlEventValueChanged];
    switchView.tag = kSwitchTagRange + section;
    switchView.on = [[[self.theData objectAtIndex:switchView.tag - 101] valueForKey:@"switchValue"] boolValue];
    [view addSubview:switchView];
    return view;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    return 50;
}

- (void)switchChanged:(UISwitch *)sender {
    NSMutableDictionary *dict = [self.theData objectAtIndex:sender.tag - 101];
    [dict setValue:[NSNumber numberWithBool:sender.isOn] forKey:@"switchValue"];
    [self.tableView reloadData];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    BOOL switchValue = [[self.theData[section] valueForKey:@"switchValue"] boolValue];
    if (switchValue) {
        return [[self.theData[section] valueForKey:@"rowData"] count];
    }else{
        return 0;
    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];
    cell.textLabel.text = [[self.theData[indexPath.section]valueForKey:@"rowData"]objectAtIndex:indexPath.row] ;
    return cell;
} 
```

我的 kSwitchTagRange 被#defined 为 101。此代码用于折叠关闭开关的任何部分中的行（实际上删除了所有行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:06:06.090

从[这里](https://stackoverflow.com/questions/960119/reusable-tableview-header-views)的帖子看来，viewForHeaderInSection 返回的 UIView 已被释放，必须重新创建（以及它的所有子视图，包括我的 UISwitch），而不是重新使用。我相信 Apple 假设您的节标题比单元格少得多，因此没有提供用于检索节标题的可重用机制。@rdelmar 提出的数据绑定方法似乎对这种情况有意义。

# php - 访问已在 Controller 中设置的 View phtml 文件中的属性

> ID：13617336
> 
> 赞同：1
> 
> 时间：2012-11-29T01:24:32.453
> 
> 标签：php, oop, model-view-controller, overloading

我正在开发一个基于 MVC 的小型 PHP 网站。我有一个前端控制器 ( `front.php`)，它加载控制器 ( `services.php`)、运行操作方法 ( `hostingAction()`) 并包含 html ( `view.phtml`)。view.phtml ( `$this->renderContent()`) 中有一个包含内部内容 ( `hosting.phtml`) 的方法调用。

问题：如何`$title = 'My Title';`在方法中设置属性（例如），`hostingAction()`然后在 view.phtml 中设置`<title><?php echo $title ?></title>`？

Zend Framework`$this->view->title = 'My Title';`在控制器中执行类似的操作，然后在视图中执行类似`<title><?php echo $view->title; ?></title>`.

目前我正在重载属性。我正在设法在控制器操作中设置属性，但无法在我的视图中访问它们。我在这里做错了什么？

示例代码：

前台.php

```
class front {

    private $view;

    function __construct() {

        $this->view = new viewProperties();    
        $this->constructController();
        include('application/views/view.phtml');
    }

    private function constructController() {

        $c = new services();
        $this->doAction($c);
    }

    public function renderContent() {

        include('application/views/services/hosting.php');
    }

    private function doAction($c) {

        $c->hostingAction();
    }
} 
```

服务.php

```
class services {

    public function hostingAction() {

        $this->view->page_title = 'Services - Hosting';
        $this->view->banner_src = '/assets/images/banners/home_02.jpg';
        $this->view->banner_title = 'reload';
    }
} 
```

视图属性.php

```
class viewProperties {

    private $data = array ();

    public function __set($name, $value) {

        $this->data[$name] = $value;
    }

    public function __get($name) {

        if (array_key_exists($name, $this->data)) {
            return $this->data[$name];
        }
    }
} 
```

视图.phtml

```
<html>
    <head>
        <title><?php echo $this->view->page_title; ?></title>
    </head>
    <body>

    <?php $this->renderContent() ?>

    </body>
</html> 
```

托管.phtml

```
<div id="banner">
            <img src="<?php echo $this->view->banner_src ?>" alt="<?php echo $this->view->banner_title ?>" />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:41:10.153

您的`Services`对象无权访问`$view`.

试试这些模组：

**front.php**（带有设置器）

```
class front {

    private function constructController() {
        $c = new services();
        $c->setView($this->view);
        $this->doAction($c);
    }
} 
```

**services.php**（带有设置器）

```
class services {
    private $view;

    public function setView(viewProperties $view) {
        $this->view = $view;
    }

    public function hostingAction() {

        $this->view->page_title = 'Services - Hosting';
        $this->view->banner_src = '/assets/images/banners/home_02.jpg';
        $this->view->banner_title = 'reload';
    }
} 
```

# 使用单例

此外，您可以将 viewProperties 设为单例（根据您的评论）：

**viewProperties**（带单例）

```
class viewProperties {

    private $instance = null;

    private function __construct() {}

    public static function getInstance() {
        if (null === $this->instance) {
            $this->instance = new self();
        }
        return $this->view;
    }
} 
```

**前面**（带单例）

```
class front {

    private $view;

    function __construct() {

        $this->view = viewProperties::getInstance();
        $this->constructController();
        include('application/views/view.phtml');
    }
} 
```

**services.php**（带单例）

```
class services {

    private $view;

    function __construct() {
        $view = viewProperties::getInstance();
    }

    public function hostingAction() {

        $this->view->page_title = 'Services - Hosting';
        $this->view->banner_src = '/assets/images/banners/home_02.jpg';
        $this->view->banner_title = 'reload';
    }
} 
```

# 使用多维变量

最后，关于你使用'banner_src'和'banner_title'，你可以使用我在你原来的帖子中提到的方法，它可以更好地扩展。

**注意**下面的示例是从我对您原始帖子的回复中复制而来的，并且尚未修复以匹配您的新代码。它表明您可以为多维数据存储 arrays() 并显示如何从您的视图中访问它们。

```
class services extends controller {
    public function indexAction() {
        $this->view->banner = array
        (
            'src' => '/path/to/images/banners/home_02.jpg',
            'alt' => 'banner title'
         );
    }

    public function hostingAction() {
        $this->view->banner = array
        (
            'src' => '/path/to/images/banners/home_02.jpg',
            'alt' => 'banner title'
        );
    }
}

<img src="<?php echo $this->view->banner['src'] ?>" alt="<?php echo $this->view->banner['title'] ?>" /> 
```

# c++ - 如何在 C++ 中打印类对象？我已经完善了<<

> ID：13617338
> 
> 赞同：0
> 
> 时间：2012-11-29T01:25:00.130
> 
> 标签：c++

课堂测试：

```
ostream& operator <<(ostream& os, const Test& test){
    os<<"hooooo"<<endl;
    return os;
} 
```

在测试代​​码中：

```
Test t2 = Test(10, 20); 
```

为什么`cout<< t2 <<endl`编译弹出错误？我已经完善了<<。

'std::cout << t2' 中的 'operator<<' 不匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:34:04.600

您需要将其实际定义为友元函数。运算符必须由运算符前面的操作数定义。因此，您使用关键字定义它，`friend`以便该函数仍然可以处理您的类的内部结构，但可以按照它需要的方式工作。如果我不是很清楚，我很抱歉，我已经有一段时间没有这样做了。也不知道你应该把函数体放在哪里。只需查找`friend`关键字。

# php - 发布数据变量太多？

> ID：13617339
> 
> 赞同：1
> 
> 时间：2012-11-29T01:25:12.710
> 
> 标签：php, mysql, wordpress

这是我第一次发布问题：

我正在开发一个允许用户在数据库中创建数据行的 WordPress 插件。当表单要更新许多（超过 100 行）数据时，我遇到了问题。每行数据包含 8 个 POST 数据变量，因此当表单中有 100 行时，会发送 800 多个 post 变量。但是，只有一定数量的变量更新了数据库，现在只有 112 行更新。我不知道什么会阻止该功能完成对数据库的更新。似乎我的帖子变量或帖子数据大小过多？

使用更少的条目，一切都可以完美运行，但是一旦超过 100 行，事情就会停止工作。

这是我的表结构：

```
$sql2 = "CREATE TABLE IF NOT EXISTS $item_table (
    id smallint(5) NOT NULL AUTO_INCREMENT,
    menu smallint(5) NOT NULL,
    itemorder smallint(5) NOT NULL,
    item text NOT NULL,
    description text,
    image tinytext NOT NULL,
    value tinytext NOT NULL,
    value2 tinytext NOT NULL,
    UNIQUE KEY id (id)
    ) $charset_collate;";
} 
```

这是我的 POST 数据处理函数：

```
foreach($_POST['id'] as $i){

    $image = $_POST['image'][$i];
    $item = $_POST['item'][$i];
    $desc = $_POST['desc'][$i];
    $value = $_POST['value'][$i];
    $value2 = $_POST['value2'][$i];
    $order = $_POST['order'][$i];

    if ($_POST['strike'][$i] == 'checked' ){
        $wpdb->query( $wpdb->prepare("DELETE FROM $item_table WHERE id = $i") );
    }
    else{
        $wpdb->update( $item_table, array(
            'image' => $image,
            'item' => $item,
            'itemorder' => $order,
            'description' => $desc,
            'value' => $value,
            'value2' => $value2
         ),
         array( 'id' => $i ) );
        }
    }

    //Sort items by order, then rewrite the order with no gaps left from deleted items
    $targetmenu = $_POST['targetmenu'];

    $rows = "SELECT * FROM $item_table WHERE menu = $targetmenu ORDER by itemorder ASC";
    $result = $wpdb->get_results($rows);
    $n = 1;
    foreach ($result as $r){
        $id = $r->id;
        $wpdb->update( $jsrm_item_table , array( 'itemorder' => $n ), array( 'id' => $id ) );
        ++$n;
    }
    $loc = "&mode=editmenu&targetmenu=".$targetmenu;

    header("Location:".JSRM_SELF.$loc);
    exit(); 

} 
```

这是我的 PHP 表单：

```
$the_menu = $wpdb->get_row("SELECT * FROM $menu_table WHERE id = $_GET[targetmenu]");
$menuid = $the_menu->id;

$q = "SELECT * FROM $item_table WHERE menu = $menuid ORDER by itemorder ASC";
$result = $wpdb->get_results($q);
if ($result) {
?>
<form id="edit-menu-form" action="<?php echo _SELF; ?>" method="post">
    <input type="hidden" name="targetmenu" value="<?php echo $menuid; ?>">
    <input type="hidden" name="dbtouch" value="updateitems">

<table>
    <?php
    foreach ($result as $r) {
        $order = $r->itemorder;
        $image = $r->image;
        $imagesrc = ($image) ? esc_html(stripslashes($r->image)) : 'addimage.jpg';
        $item = esc_html(stripslashes( $r->item ));
        $description = esc_html(stripslashes($r->description));
        $value = esc_html(stripslashes($r->value));
        $value2 = esc_html(stripslashes($r->value2));
        $id = $r->id;
    ?>

    <tr id="<?php echo $id ?>">
        <td><?php echo $order ?></td>
        <td><a class="edit-item-img" id="item-image-<?php echo $id ?>" style="background-image:url(<?php echo $imagesrc ?>);" title="Edit image"></a>
            <input type="hidden" name="image[<?php echo $id ?>]" id="field-item-image-<?php echo $id ?>" value="<?php echo $image ?>" />
            <img class="remove-image-button" id="image-<?php echo $id ?>" src="removeimage.png"
                <?php if(!$image){ ?> 
                    style="visibility:hidden;" 
                <?php } ?>
            />
        </td>
        <td><textarea name="item[<?php echo $id ?>]"><?php echo $item ?></textarea></td>
        <td><textarea name="desc[<?php echo $id ?>]"><?php echo $description ?></textarea></td>
        <td><input type="text" name="value[<?php echo $id ?>]" value="<?php echo $value ?>" /></td>
        <td><input type="text" name="value2[<?php echo $id ?>]" value="<?php echo $value2 ?>" /></td>
        <td><input type="checkbox" class="strike" name="strike[<?php echo $id ?>]" value="checked"/></td>
        <input type="hidden" name="order[<?php echo $id ?>]" value="<?php echo $order ?>" id="order<?php echo $id ?>"/>
        <input type="hidden" name="id[<?php echo $id ?>]" value="<?php echo $id ?>" id="id<?php echo $id ?>"/>
    </tr>

    <?php
    }
    ?>  
</table/>
<p><input type="submit" id="update-items-button" value="Update All" class="button-primary"/></p>
</form>

<?php
}   
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T19:21:11.623

我今天遇到了类似的问题。我有一个包含 250 多行和每行 5 个变量的表单，但 $_POST 变量似乎被截断了。就我而言，它在 1000 个元素后停止。

有一个名为 max_input_vars 的 PHP 设置，默认为 1000。此设置设置了它将拉入 PHP 脚本的变量数量的上限。您可能需要在服务器设置上增加此值以使您的页面正常工作。增加这个值可能会导致拒绝服务攻击，我不完全理解一些安全隐患。

由于您正在开发一个 Wordpress 插件，您可能需要查看是否有办法更改您的表单以减少您发送的变量数量，因为您可能无法为使用您的插件的人更改服务器配置。

在此处阅读有关设置的更多信息：[http ://www.php.net/manual/en/info.configuration.php#ini.max-input-vars](http://www.php.net/manual/en/info.configuration.php#ini.max-input-vars)

# java - 在 Java 游戏中改变物体的速度

> ID：13617340
> 
> 赞同：0
> 
> 时间：2012-11-29T01:25:15.253
> 
> 标签：java

所以我正在用Java制作一种太空游戏。目前，如果用户不做任何事情，航天器会保持原位，并根据用户的按键输入以恒定速度沿不同方向移动。

我想改一下，让飞船在移动的时候，随着用户不断按键，飞船的速度会加快。

在我的移动方法中，我目前有

```
public void move() {
    x += dx;
    y += dy;
} 
```

我试过做这样的事情

```
public void move() {
    x *= dx;
    y *= dy;
} 
```

但是不断增加值会使航天器移动得太快。

有没有另一种方法来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:32:20.537

看起来您需要`dx`根据您选择的键盘事件进行更改。所以：

*   编写一个[监听](https://stackoverflow.com/questions/6885545/keyboard-actionlistener)器来捕获按键
*   测试密钥以查看它是否是您想要的（向上箭头、向下箭头等）
*   相应地增加/减少`dx`（测试最小/最大值）。您可以根据 ? 的当前值在这里做一些有趣的物理公式`dx`？

然后，当宇宙飞船`move`s,`dx`将变大或变小，取决于用户按了多少次键。

# java - 我可以将依赖项注入需要来自对象的数据的对象吗？

> ID：13617343
> 
> 赞同：0
> 
> 时间：2012-11-29T01:25:22.687
> 
> 标签：java, spring, ioc-container

我有一个用户工厂，它只是从 UserStore 获取一个用户：

```
public class UserFactory
{
    @Autowired
    private UserStore userStore;

    public User getUserFromId(String Id)
    {
        User foundUser = this.userStore.findUser(Id);

        return foundUser;
    }
} 
```

这是我的用户对象：

```
public class User implements Serializable
{
    @Autowired
    private List<Announcer> announcers;  //I want this injected

    private String twitterId;

    private String facebookId;

    public List<Announcer> getAnnouncers()
    {
        //lazy init?
        return this.announcers;
    }

} 
```

每个实例`announcers`都依赖于相应的服务 ID，例如`twitterId`，`facebookId`...我可以在 getter 中懒惰地构建它，但我很好奇是否有办法设置工厂来注入它。我也可以公开一个设置器，并将其设置在 UserFactory 中......但试图限制曝光。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-29T01:54:54.473

看看这个链接： [http ://www.tutorialspoint.com/spring/spring_injecting_collection.htm](http://www.tutorialspoint.com/spring/spring_injecting_collection.htm)

请参阅名为“注入 Bean 引用”的部分。

我不知道在没有 xml 配置的情况下执行此操作的方法，在这些情况下我所做的是定义要在 xml 文件中的列表中注入的 itens，然后将 bean 注入列表中。

就像是：

```
 <bean id="an1" class="FBAnnouncer"/>
 <bean id="an2" class="TWAnnouncer"/>
 <bean id="user" class="User">
     <property name="announcers">
        <list>
           <ref bean="an1"/>
           <ref bean="an2"/>
        </list>
      </property>
 </bean> 
```

# cookies - JMeter cookie 管理器可以覆盖应用程序设置的 cookie 吗？

> ID：13617344
> 
> 赞同：0
> 
> 时间：2012-11-29T01:25:26.947
> 
> 标签：cookies, jmeter

我正在测试一个需要用户进行身份验证的应用程序，然后使用 cookie 来跟踪用户会话。如果身份验证失败，则会设置一个 cookie，将会话标识为属于未识别的用户。

不幸的是，身份验证是通过 Kerberos 或 NTLM 进行的，这在 JMeter 2.8 中无法完成。因此，我的计划如下：

1.  使用 Internet Explorer 登录网站。
2.  将标识会话的 cookie 从 IE 复制到 JMeter cookie 管理器中作为用户定义的 cookie。
3.  使用 JMeter 测试应用程序

本质上，这是会话劫持。

我观察到的是（1）JMeter cookie 管理器似乎没有在第一个请求中向应用程序提供 cookie，（2）在第一个请求之后，应用程序将不同的 cookie 发送回 JMeter，以及（3）后续请求使用应用程序定义的 cookie，而不是我提供的那个。

所以我的问题是：

1.  至少在理论上，所描述的方法是否合理？
2.  应用程序定义的 cookie 是否总是覆盖用户定义的 cookie？
3.  为什么 cookie 管理器可能不发送我的用户定义的 cookie？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:09:00.663

尝试使用 JMeter nightly build，最近有报道称它在升级 httpclient 库后可以与 NTLM 一起使用。

*   [http://jmeter.apache.org/nightly.html](http://jmeter.apache.org/nightly.html)

你的方法对我来说似乎很奇怪，我认为它不会奏效，即使它确实是现实的。

# css - 父鼠标悬停改变子li的颜色

> ID：13617345
> 
> 赞同：0
> 
> 时间：2012-11-29T01:25:40.760
> 
> 标签：css

好吧，这真的让我很生气！我已经做了一个小时加上在线研究。好吧，我添加了#top-section li:hover a 所以当我还在子菜单中时，它会保持父链接悬停。韦尔普，我的问题是它也改变了子菜单的链接颜色。当链接假设为灰色时。

在#top-section ul ul li a 中，我的颜色为#8b8b8b。但是#top-section li:hover a 正在改变它们……这让我很生气！除了 jQuery，我找不到修复它的方法，这对我来说太令人困惑了，因为我讨厌仅依赖 jQuery 构建导航。

这是我的CSS：

```
 #top-section li:hover a, #top-section li a:hover {
    background: #fff;
    color: #bb461d;
} 
```

然后这是正在更改的部分：

```
 #top-section ul ul li a {
        display: block;
        padding: 3px 4px;
        width: 156px;
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        color: #8b8b8b;
        font-weight: normal;
    } 
```

我只是不知道为什么它排在第二位时会覆盖它..它会直接出现在子菜单 li a's... 有人可以帮帮我吗？

这是完整的 CSS，但如果你不需要它，你不需要阅读它。仅供参考：

```
 #top-section ul { list-style: none; }
#top-section li {
    display: block;
    float: left;
    position: relative;
    z-index: 500;
}
#top-section a {
    color: #b3b3b3;
    display: block;
    float: left;
    padding: 0 8px 0 0;
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    padding: 9px 35px 9px 9px;
}
#top-section li:hover a, #top-section li a:hover {
    background: #fff;
    color: #bb461d;
}
    /*** nested list ***/
    #top-section ul ul {
        display: none;
        position: absolute;
        left: 0;
        margin: 32px 0 0 -1px;
        list-style: none;
        background: #fff;
        border: 1px solid #ababab;
        border-top: none;
        width: 312px;
    }
    #top-section ul ul li {
        width: 156px;
        margin: 0;
    }
    #top-section ul ul li a {
        display: block;
        padding: 3px 4px;
        width: 156px;
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        color: #8b8b8b;
        font-weight: normal;
    }
    #top-section ul ul li a:hover {
        color: #8b8b8b;
        background: #ececec;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:49:55.057

`>`如果我正确阅读，使用组合器应该可以解决问题：

```
#top-section ul li:hover > a, #top-section ul li > a:hover {
    background: #fff;
    color: #bb461d;
} 
```

示例：http: [//jsfiddle.net/unbws/](http://jsfiddle.net/unbws/)

[编辑]

我添加此答案作为替代方法的原因在此链接中总结了[为什么不使用 !important](http://james.padolsey.com/usability/dont-use-important/)由[lavabeams](https://stackoverflow.com/users/261564/lavabeams)在另一个答案的评论中共享。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-29T01:34:49.763

第二个颜色值并不意味着它被优先考虑。使用`!important`例如： `color: #8b8b8b !important;`. 如果这不起作用，那么再看看你的 css，你的元素有很多重叠，所以可能就是这样。

# php - 字段列表中的未知列

> ID：13617350
> 
> 赞同：1
> 
> 时间：2012-11-29T01:25:58.600
> 
> 标签：php, mysql, pdo

我不断收到错误`Unknown Column in field List`。

该数据库具有以下字段：

```
ID - AUTO INCRIMENT
username
password
groupID
prefs_list_item 
```

这是我的代码。变量存储在上面作为一个设定值，我知道这不会给我任何问题，因为我在同一个脚本中的其他数据库中使用它们。

```
try {
$wpdb = new PDO('mysql:host=localhost; dbname=******', '*******', 
'*******');
$wpdb->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

//Creates the SQL statement to write into the picture database
$pictureUPDATE = $wpdb->prepare
("INSERT INTO pe_users (
username,
password,
groupID
) VALUES (
$username,
$passmd5,
$groupID
)
");
//Executes the writing into the picture database
$pictureUPDATE->execute();
echo("<p>Your account to upload photos is now active!</p>");            
                                        }
//catches any errors that might have come from updating the picture databse
catch (PDOException $ex) {
       $msg = $ex->errorInfo;
       error_log(var_export($msg, true));
       die("<p>Sorry, there was a unrecoverable database error with PICTURES.  
       Debug data has been logged.</p>");
                         } 
```

不知道怎么回事，有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:15:32.633

实际上这`groupID`不是问题，围绕我的变量我需要添加`'{ }'`所以它看起来像这样...... `$pictureUPDATE = $wpdb->prepare ("INSERT INTO pe_users ( username, password, groupID ) VALUES ( '{$username}', '{$passmd5}', '{$groupID}' ) ");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:43:54.600

尝试做：

```
$data = array( 'username' => $username, 'password' => $passmd5, 'groupID' => $groupID );

$pictureUPDATE = $wpdb->("INSERT INTO pe_users 
          (username, password, groupID) value (:username, :password, :groupID)");

$pictureUPDATE->execute($data); 
```

# r - 将组级别添加到数据框

> ID：13617351
> 
> 赞同：-1
> 
> 时间：2012-11-29T01:26:02.957
> 
> 标签：r, ggplot2

在 [How to change the order of facet labels in ggplot (custom facet wrap labels)](https://stackoverflow.com/questions/5490638/how-to-change-the-order-of-facet-labels-in-ggplot-custom-facet-wrap-labels)中描述了如何添加组级别以供以后在排序的 facet 网格中使用。

我如何生成组级别以`mtcars`使气缸数以相反的顺序转动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:54:33.317

这里的技巧是对唯一值进行排序，然后将级别设置为相反。

例如。

```
mtcars <- within(mtcars, Group <- factor(cyl, levels = rev(sort(unique(cyl)))))

ggplot(mtcars) + geom_point() + facet_grid(~Group) 
```

# javascript - javascript堆栈爆炸

> ID：13617352
> 
> 赞同：0
> 
> 时间：2012-11-29T01:26:07.403
> 
> 标签：javascript, stack

这篇[文章](http://simonwillison.net/2009/nov/23/node/)说以下代码会炸毁堆栈：

```
function fetchLatest() {
  $.getJSON('/wait?id=' + last_seen, function(d) {
    $.each(d, function() {
      last_seen = parseInt(this.id, 10) + 1;
      ul.prepend($('<li></li>').text(this.text));
    });
    fetchLatest();
  });
} 
```

> 客户端 JavaScript 只是使用 jQuery 的 getJSON 方法对简单的 URL 端点执行长轮询 递归地执行此操作可能是一个坏主意，因为它最终会破坏浏览器的 JavaScript 堆栈，但它在演示中运行良好。

这是真的吗？如果是这样，我们如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T01:27:20.277

那不是真的。

因为`getJSON`是异步的，下一个`fetchLatest()`调用将在前一个调用完成后的某个时间开始。

如果您编写这样的同步代码，它将冻结，然后引发堆栈溢出。

# java - java.io FileOutPutStream - 字符之间有空格。为什么？

> ID：13617353
> 
> 赞同：1
> 
> 时间：2012-11-29T01:26:43.210
> 
> 标签：java, string, java-io

我想用这段代码写一些东西，但是在我运行之后，字符之间有空格。但在代码中我没有给字符串空间。

```
import java.io.*;

public class WriteText{

public static void main(String[] args) {

FileOutputStream fos; 
DataOutputStream dos;

try {

  File file= new File("C:\\JavaWorks\\gui\\bin\\hakki\\out.txt");
  fos = new FileOutputStream(file);
  dos=new DataOutputStream(fos);

  dos.writeChars("Hello World!");
} 

catch (IOException e) {
  e.printStackTrace();
}

 }

 } 
```

输出是（在文本文件中）：`H e l l o W o r l d !`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T01:30:49.873

使用[writeBytes](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html#writeBytes%28java.lang.String%29)

```
dos.writeBytes("Hello World!"); 
```

本质上，writeChars 会将每个字符写入 2 个字节。您看到的第二个是额外的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:53:20.933

您也可以改用 FileWriter 和 BufferedWritter；完成后不要忘记关闭缓冲区或 dos。

```
 FileWriter file; 
        BufferedWriter bw = null;

    try {

        file = new FileWriter("C:\\JavaWorks\\gui\\bin\\hakki\\out.txt");
        bw = new BufferedWriter(file);

        bw.write("Hello World!");
    } 

    catch (IOException e) {
        e.printStackTrace();
    }

    finally{
        try{
            bw.close();
        }

        catch(IOException e){
            e.printStackTrace();
        }
    } 
```

# java - 将某些字符串模式替换为其他模式的内存有效方法是什么

> ID：13617357
> 
> 赞同：0
> 
> 时间：2012-11-29T01:26:59.683
> 
> 标签：java

例如：

我给了一个字符串，例如：“我现在要去学校，我现在要去学校”

要求正在改变 I -> We & am -> are 输出看起来像“我们现在要去学校，我们现在要去学校”

这意味着我必须将某些字符串模式替换为另一个。

在 Java 中实现这一目标的最佳方法是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T01:42:52.593

处理字符串在内存效率方面总是很糟糕，因为您不能更改字符串，只能创建新字符串。最好的办法是接收一个 StringBuilder（如果您需要 ThreadSafe，则为 StringBuffer），然后使用一些算法来更改字符串或类似的东西： [http ://www.java-examples.com/java-stringbuffer-replace-例子](http://www.java-examples.com/java-stringbuffer-replace-example)

但是，如果您自己收到一个字符串，我只会使用 replaceAll 方法来创建一个新字符串，因为无论如何您都需要这样做，即使使用字符串缓冲区：

[http://www.roseindia.net/java/string-examples/string-replaceall.shtml](http://www.roseindia.net/java/string-examples/string-replaceall.shtml)

但是，如果您需要对字符串进行多次后续更改，则始终需要先转换为字符串缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:46:08.987

这取决于你想要做什么。

*   如果您只是想将所有出现的“I”替换为“We”，将“am”替换为“are”，那么`String.replace`内存效率将比`String.replaceAll`.

*   如果您想将“I”和“am”视为单词而不是字符序列，那么`String.replace`将无法正常工作。相反，您需要使用`String.replaceAll`使用单词边界匹配的模式来避免（例如）`"I am going to school on a camel"`变成`"We are going to school on a careel"`.

在这两种情况下，您应该能够通过手动使用 StringBuilder 和循环迭代原始字符串的字符并构建新字符串来获得更好的内存效率（即更少的垃圾生成）。

**但是**......这样的编码是痛苦的，而不是你应该考虑做的事情，除非你有令人信服的证据表明你*需*要这样做。过早的优化是个坏主意。在 99.9% 的情况下，如果你产生的垃圾比理论上需要的多一点，这并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T02:37:43.623

这取决于您的应用程序。这可能和其他海报展示的一样简单，也可能很复杂并且是计算机科学的一部分。在后一种情况下，构建所谓的“trie”。这就像一棵树，但每个节点都有音节。
导航系统使用它来有效地存储一个国家所有街道的街道名称。

# html - Twitter bootstrap html select内部分页组件偏移且未对齐

> ID：13617358
> 
> 赞同：1
> 
> 时间：2012-11-29T01:27:04.970
> 
> 标签：html, css, twitter-bootstrap

当我尝试在分页组件内使用 html 选择时，html 选择会偏移并且未正确对齐。为简洁起见，我只包含了分页的前半部分，其中包含 html 选择。它应该说明问题，您可以在[此处查看 JSFiddle](http://jsfiddle.net/WdnUY/)。

```
<div class="pagination pagination-large pagination-centered">
     <ul>
       <li><a class="first_record" rel="tooltip" data-original-title="First record" href="#">First</a></li>
       <li><a class="previous_record" rel="tooltip" data-original-title="Previous" href="#">Previous</a></li>
       <li><span>Display <select class="input-mini page_size">
      <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
       </li>
    </ul>
   </div> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:04:10.003

试试下面的 CSS：

```
.pagination select {
  height: 30px;
  margin-top: -7px;
  margin-bottom: -5px;
} 
```

或者，或者：

```
.pagination select {
  height: 2em;
  margin-top: -0.5em;
  margin-bottom: -0.4em;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-09T12:15:54.373

如果您能够在没有标签的情况下做到这一点，那么这是我最终使用的 CSS。

CSS

```
.pagination select {
    background-color: #ffffff;
    border: 1px solid #dddddd;
    color: #337ab7;
    float: left;
    line-height: 1.42857;
    margin-left: -1px;
    padding: 6px 12px;
    position: relative;
    text-align: center;
}
.pagination > li:first-child > select {
    border-bottom-left-radius: 4px;
    border-top-left-radius: 4px;
    margin-left: 0;
}
.pagination > li:last-child > select {
    border-bottom-right-radius: 4px;
    border-top-right-radius: 4px;
}
.pagination > li > select:hover, 
.pagination > li > select:focus {
    background-color: #eeeeee;
    border-color: #dddddd;
    color: #23527c;
}

.pagination-lg > li > select {
    font-size: 18px;
    padding: 10px 16px;
}
.pagination-lg > li:first-child > select {
    border-bottom-left-radius: 6px;
    border-top-left-radius: 6px;
}
.pagination-lg > li:last-child > select {
    border-bottom-right-radius: 6px;
    border-top-right-radius: 6px;
}

.pagination-sm > li > select {
    font-size: 12px;
    padding: 5px 10px;
}
.pagination-sm > li:first-child > select {
    border-bottom-left-radius: 3px;
    border-top-left-radius: 3px;
}
.pagination-sm > li:last-child > select {
    border-bottom-right-radius: 3px;
    border-top-right-radius: 3px;
} 
```

HTML

```
<div class="container"><nav>
  <ul class="pagination">
    <li>
      <a href="#" aria-label="Previous">
        <span aria-hidden="true">«</span>
      </a>
    </li>
    <li><select onchange="if (this.value) window.location.href=this.value">
      <option value="?page=1">1</option>
      <option value="?page=2">2</option>
      <option value="?page=3">3</option>
      </select></li>
    <li>
      <a href="#" aria-label="Next">
        <span aria-hidden="true">»</span>
      </a>
    </li>
  </ul>
</nav>
</div> 
```

示例： http: [//www.bootply.com/KVb2hwLs57](http://www.bootply.com/KVb2hwLs57)

# python - Python：在列表中列出重复项

> ID：13617366
> 
> 赞同：0
> 
> 时间：2012-11-29T01:27:55.817
> 
> 标签：python

我对 Python 相当陌生，我有兴趣在列表中列出重复项。我知道如何删除列表中的重复项（**set() ）以及如何使用****collections.Counter**列出列表中的重复项；但是，对于我正在处理的项目，这不是最有效的方法，因为运行时间为**n(n-1)/2 --> O(n^2)**并且 n 介于 5k 之间-50k+ 字符串值。

所以，我的想法是，由于 python 列表是链接的数据结构，并在创建时分配给内存，所以我从创建列表的一开始就开始计算重复项。

1.  创建列表，第一个索引值是单词“dog”
2.  第二个索引值是单词'cat'
3.  现在，它将检查第二个索引是否等于第一个索引，如果它被附加到另一个名为 Duplicates 的列表中。
4.  第三个索引值被赋值为'dog'，第三个索引会检查它是否等于'cat'然后'dog'；因为它匹配第一个索引，所以它被附加到 Duplicates。
5.  第四个索引被指定为“dog”，但它只会检查第三个索引，而不是第二个和第一个，因为现在你可以假设，由于第三个和第二个不是重复的，所以第四个不需要之前检查，并且因为第三个/第一个相等，搜索在第三个索引处停止。

我的项目给了我这些值并将其附加到一个列表中，所以我想实现上述算法，因为我不在乎有多少重复项，我只想知道是否有重复项。

我想不出如何编写代码，但我想出了它的基本结构，但我可能完全不知道（使用随机 numgen 以便于使用）：

```
for x in xrange(0,10):
    list1.append(x)
    for rev, y in enumerate(reversed(list1)):
        while x is not list1(y):
            cond()
            if ??? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T01:32:02.577

我真的不认为你会比 a 更好`collections.Counter`：

```
c = Counter(mylist)
duplicates = [ x for x,y in c.items() if y > 1 ] 
```

构建计数器应该是`O(n)`（除非你使用的键对散列特别不利——但根据我的经验，你需要非常努力地做到这一点），然后获取重复列表也会`O(n)`给你一个总复杂度`O(2n) == O(n)`（用于典型用途）。

# git - 如何自动化主分支的 git 版本发布？

> ID：13617367
> 
> 赞同：2
> 
> 时间：2012-11-29T01:28:10.480
> 
> 标签：git

我正在寻找一种方法来自动化更新项目的主分支（发布版本）的过程。

基本上只有两个分支将存在于原始存储库中（开发和主......当修补程序或特定开发分支出现时可能更多）。

然而，运行 nvie 文章 (http://nvie.com/posts/a-successful-git-branching-model/) 中的所有命令在外包给多个潜在维护者时容易出错。

为了减轻版本命名约定中可能出现的拼写错误问题，并使所有维护者的过程一致和可靠，我想编写一个脚本来验证输入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T01:28:10.480

这是我`bump.sh`调用的脚本，我给它一个新版本来更新。它负责处理其余过程的大部分。

`me@server:~/git_repos/# ./bump.sh git_project`

```
Enter new version (Current 1.0.5): 1.0.6
Are you sure you want to release version 1.0.6? (y|n): y
Switched to a new branch 'release-1.0.6'
Switched to branch 'master'
Deleted branch release-1.0.6 (was 4abcd98e).

If you need to undo this last commit, abort now and run:
  git reset --hard HEAD~1
  git tag -d 1.0.6

Do you want to push this to the origin server (THIS IS NOT EASILY UNDONE)? (y|n): y
Password for 'https://user@bitbucket.org':
Counting objects: 7, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 704 bytes, done.
Total 5 (delta 2), reused 0 (delta 0)
remote: bb/acl: user is allowed. accepted payload.
To https://remote_repository.../.git
   ffffffab..010101ab  master -> master
Finished merging. 
```

`bump.sh`

```
if [ ! -d "$1" ]; then
    echo "Must pass git directory as the first argument."
    exit 2;
fi

cd $1
echo -e "Enter new version (Current `git describe --abbrev=0 --tags`): \c "
while read ver; do
    if ([[ ! -z "$ver" ]]) && ([ "$ver" == "`echo $ver | grep "^[0-9]\{1,\}\.[0-9]\{1,\}\.[0-9]\{1,\}$"`" ])
    then
        break
    else
        echo "  Version entered ($ver) was not formatted properly."
        echo -e "Enter new version (Current `git describe --abbrev=0 --tags`): \c "
    fi
done

echo -e "Are you sure you want to release version $ver? (y|n): \c "
read confirm

if([ $confirm == "y" ]) then
    git checkout -b release-$ver develop
    git checkout master
    result=`git merge --no-ff release-$ver`
    if([ "$result" == "`echo $result | grep "^Already up-to-date\."`" ]) then
        git branch -D release-$ver
        echo "The branch is already up to date.  Aborting version bump.";
        exit 3;
    else
        git tag -a $ver -m "Used bump script."
        git branch -D release-$ver
        echo ""
        echo "If you need to undo this last commit, abort now and run:"
        echo "  git reset --hard HEAD~1"
        echo "  git tag -d $ver"
        echo ""
        echo -e "Push this change to the origin server and merge back into the develop branch? (y|n): \c "
        read confirm 
        if([ $confirm == "y" ]) then
            git push origin master
            git checkout develop
            git merge master
        fi

        echo "Finished merging."
        exit 1;
    fi
else
    echo "Aborted the version bump."
    exit 1;
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:44:40.677

我想你正在寻找这个： [https ://github.com/nvie/gitflow](https://github.com/nvie/gitflow)

那是一组脚本，可以处理 git 流模型所需的所有内容。

# css - 如何使用 CSS “显示：无”到一些相邻的文本？

> ID：13617376
> 
> 赞同：2
> 
> 时间：2012-11-29T01:28:49.063
> 
> 标签：css, css-selectors

我需要处理的代码如下所示：

```
 <p>
    <a href="http://foo.com/foo.html"></a>
    <a href="http://creativecommons.org/publicdomain/mark/1.0/" rel="license">
    <img alt="Public Domain Mark" src="http://i.creativecommons.org/p/mark/1.0/88x31.png" style=""></a>
    <br> This work is free of known copyright restrictions... 
    </p> 
```

它显示图像，然后在图像之后显示一些文本。我既不需要显示。

这可以很好地摆脱图像：

```
a[rel="license"] {display:none;} 
```

但是，我需要一种方法来摆脱之后的文本`<br>`（如果可能的话，还有它的未闭合标签）并且不能丢失结束`</p>`标签。

我正在从远程站点获取 HTML，并且无法控制那里的标记。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:32:51.857

没有办法使用 CSS 隐藏此文本，除非在其上添加标签 - 根据您获取网站的方式，您最好的办法是尝试查找并用;`"This work is free of known copyright restrictions..."`包围的相同文本替换它。`<span></span>`或者干脆完全删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T15:05:56.990

我意识到这是一个老问题，但我发现它很有趣。我想知道是否不能摆弄`<p>`标签的盒子模型，以便*隐藏*你想要“摆脱”的东西，即使它仍然存在？

例如，假设我想显示图像，而不是下面的非元素文本。（我意识到您也想消除图像，但出于演示目的，在其中包含一些可见内容`<p>`是有帮助的。）由于我知道图像高 31 像素，因此我可能会使用以下内容：

```
p {
    height: 31px;
    overflow: hidden;
} 
```

等等瞧。无论这是否适合您的特定需求，我觉得我们没有足够的背景来确定。你*要求*的是留下一个包含不可见链接的空段落，没有更大的上下文没有明显的目的。

不过想一想……如果我还想隐藏图像，我只需对上面的样式稍作修改，然后附加：

```
a[rel="license"] { visibility: hidden; } 
```

（您不想使用`display: none`，因为这会影响`<p>`CSS 框的尺寸。）

这肯定对屏幕阅读器等产生了不幸的影响，但对于某些快速而肮脏的显示需求，它可能就足够了。

# mongodb - 我应该将活动时间线放在 mongodb 中的哪个位置，嵌入到用户中还是单独放置？

> ID：13617379
> 
> 赞同：1
> 
> 时间：2012-11-29T01:29:02.290
> 
> 标签：mongodb, schema-design

我正在构建一个电子学习应用程序，并将学生活动显示为时间线，我应该将它们嵌入到`user`集合中，还是使用`userId`.

约束：

*   一对多的关系。
*   用户活动详细且数量众多
*   在 90% 的情况下，我们一次只需要查看一个用户，另一种情况是主管（老师）需要查看用户活动的摘要（可能是另一个集合？）
*   搜索活动和找学生的用例我还没想过，也许我以后会有这个用处？（例如，看看谁先完成了某些特定活动？但这会将关系更改为多对多，这是一个完全不同的问题）

我在这两个问题中找到了相关问题的不同模式：

*   [MongoDB架构设计——选择两种收集方式或嵌入文档](https://stackoverflow.com/questions/9967740/mongodb-schema-design-choose-two-collection-approach-or-embedded-document)推荐`try and embed as much as possible`
*   [用于存储用户位置历史](https://stackoverflow.com/questions/9418633/mongodb-schema-for-storing-user-location-history)提醒的 MongoDB 模式`don't bloat a collection, because querying the elements deep below might be hard, especially if you're going to use lists`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:25:17.320

这两篇文章都是对的，也都是错的。

嵌入还是不嵌入？这始终是关键问题，它取决于您的需求、查询和存储，甚至是您的工作集。

归根结底，我们只能给出一些你实际上无法告诉你哪个最好的建议。

但是，考虑到活动提要的大小，我个人不会嵌入它，因为它很容易增长到超过 16meg（每个用户），但是对于查询的速度和能力，您可以汇总用户的最后 20 个活动，然后嵌入进入用户行（因为最后 20 个通常是查询最多的）。

但是随后嵌入聚合取决于，分片可以处理查询巨大的水平缩放集合，并且使用正确的查询意味着您不会从嵌入中获得任何真正的好处，并且可能通过维护索引、存储和维护该子文档所需的查询。

至于嵌入到死亡的地步。目前很多 MongoDB 的查询主要依赖于一层或两层嵌入，这就是为什么很难维护 12 个嵌套表的原因，此时您开始在这里看到问题以及如何维护这样的 Google 小组一个巨大的文件（如果你真的想，答案是客户端）。

> 在 90% 的情况下，我们一次只需要查看一个用户，另一种情况是主管（老师）需要查看用户活动的摘要（可能是另一个集合？）

考虑到这一点，我将在用户上进行聚合，这意味着用户可以通过一次往返单独查看自己或其他用户的活动。

但是，考虑到老师很可能必须拥有来自所有用户的页面结果，我将存放一个单独的活动集合并为他们查询。对子文档的聚合进行分页需要一些查询，在这种情况下，最好这样做。

希望这能让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:44:22.400

您不应将活动嵌入到学生文档中。

我对此非常有信心的原因是以下陈述：

“用户活动详细且数量众多”
“将学生活动显示为时间线”
“老师需要查看用户活动的摘要”

设计具有不断增长的文档的模式是一种不好的做法 - 因此，每次完成/添加另一个活动时，让学生文档不断增长是导致性能不佳的原因。

如果要对学生的活动进行排序，如果每个活动都是活动集合中的单独文档，则比学生文档中的数组要简单得多。

当您需要查询多个学生的活动时，将所有活动放在一个集合中会变得微不足道，但是将活动嵌入到学生文档中会变得很困难（您很可能需要聚合框架，这会使其速度变慢）。

您还说您将来可能需要“查看谁先完成了某些特定活动？但这会将关系更改为多对多，并且是一个完全不同的问题”-事实并非如此。您不需要将其视为多对多关系 - 您仍然可以存储与单个用户关联的多个活动，然后查询匹配活动“X”的所有记录，按完成时间（或其他）排序并查看哪个学生时间最短。

# c++ - 类私有数据 - 在堆栈或堆上

> ID：13617385
> 
> 赞同：3
> 
> 时间：2012-11-29T01:29:28.620
> 
> 标签：c++, heap-memory, stack-memory

在以下代码中：

```
class Array {
   public:
      int& operator[] (unsigned i) { if (i > 99) error(); return data[i]; }
   private:
      int data[100];
};

int main()
{
   Array a;
   a[10] = 42;
   a[12] += a[13];
   ...
} 
```

（如果我错了，请纠正我） Array 类型的变量 a 在堆栈上，因为没有使用 new 来分配它。Array 类具有 int data[100]，运算符重载返回对数据中特定索引的引用。

参考[问题](https://stackoverflow.com/q/4643713/682869)。

我的问题是 int data[100] 是在堆栈上还是在堆上？我认为它不应该是堆栈，否则像上面那样的引用返回如何仍然有效。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:32:17.053

它在堆栈上，因为正如您所指出的，它是在堆栈上`a`分配的。

栈和堆一样是内存；您可以返回对其中一部分的引用，就像在堆上分配的内存一样。唯一的区别在于内存的管理方式。

唯一需要注意的是不要访问已释放的内存。在堆栈的情况下，这发生在`a`'s 范围的末尾，而堆分配的数据必须被显式删除。

在您提到的问题中，对堆栈上声明的变量的引用是从函数返回的；在这种情况下，该变量在函数退出时被销毁，这就是该代码错误的原因。但是，在您的情况下，您将返回对其生命周期与对象`data`生命周期匹配的部分的引用；`Array`所以只要`a`没有被破坏，以这种方式访问​​它的数据是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:32:53.653

正如您所说，“数组类型的变量 a 在堆栈上”。从技术上讲，命名的*对象*`a`在堆栈上。这意味着对象的所有成员变量`a`都在堆栈上。

这意味着返回对命名成员数组中元素的引用`data`是非常危险的。编译器将允许它，但如果您在变量超出范围时尝试访问此引用`a`，那么您将遇到未定义的行为。

在您的示例中，所有调用`operator[]()`都在同一个方法中，所以一切都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T01:32:17.477

它在堆栈上。为什么参考返回是一个问题？您可以毫无问题地创建和使用对堆栈上事物的引用。

```
void foo(void)
{
 int i;
 int& j = i; // reference to variable on the stack
 j = 2;
} 
```

您认为这里可能存在什么问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T01:32:45.320

> 我的问题是 int data[100] 是在堆栈上还是在堆上？我认为它不应该是堆栈，否则像上面那样的引用返回如何仍然有效。

它分配有自动存储持续时间，即堆栈，而不是堆。您没有动态分配任何东西，因此不会发生动态（堆）分配。这将是一件可怕的事情，而 C++ 就是不为你不使用的东西付费。

如果离开`data`了`data`它`data`的声明范围，即`Array`. 现在，`Array`类型应该使用动态分配吗？几乎可以肯定，是的，对于通用容器。您有责任确保您没有保留对错误数据的引用或指针。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-29T01:32:37.110

它将在堆栈上。如果您在“a”超出范围后尝试使用该引用，您将获得未定义的行为。希望它会很快崩溃。

# asp.net-mvc - 是否可以使用带有超链接的 Jstree contextMenu

> ID：13617387
> 
> 赞同：1
> 
> 时间：2012-11-29T01:29:35.347
> 
> 标签：asp.net-mvc, contextmenu, jstree, http-redirect

是否可以在 jsTree 的上下文菜单中有一个 Mvc4 链接（`http://localhost:59446/TierManagement/CreateTier`），这将带我进入新视图（CreateTier 页面）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T04:21:28.193

在上下文菜单中单击该项目时，只需使用重定向到所需页面

```
document.location.href="<!--your link goes here-->"; 
```

代码是

```
action(obj){
document.location.href="<!--your link goes here-->";
} 
```

# yui - 在yui中选择html元素

> ID：13617389
> 
> 赞同：0
> 
> 时间：2012-11-29T01:29:48.243
> 
> 标签：yui

如何使用 yui 按 Id 选择 html 元素或 div，如何将以下代码从 Jquery 迁移到 YUI

jQuery("#resultTable").text("");

resulttable 是一个 div。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:48:27.610

这里有一个比较 YUI3 和 jQuery 的好表：http: [//jsrosettastone.com/](http://jsrosettastone.com/)

如您所见，它看起来非常相似：

```
// jQuery
jQuery('#resultTable').text('');

// YUI
Y.one('#resultTable').set('text', ''); 
```

# java - Eclipse图标装饰的含义

> ID：13617390
> 
> 赞同：7
> 
> 时间：2012-11-29T01:29:56.160
> 
> 标签：java, eclipse

在 Eclipse 的 Package Explorer 视图中，对象可以有一个由橙色矩形（或圆柱体）组成的装饰，如下所示：

![在此处输入图像描述](../Images/4a7b01b953bac07fa33c87020ab63c6b.png)

我在Eclipse Indigo的[图标参考](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-icons.htm)中找不到它。

这是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T01:31:18.787

这意味着该文件受版本控制。（即 cvs、svn、git 或其他）

您可以在这里查看含义：[http ://www.rorycullen.com/blog/2009/07/guide-to-subclipse-decorator-icons/](http://www.rorycullen.com/blog/2009/07/guide-to-subclipse-decorator-icons/)

也许不是你的版本控制系统，但它在 eclipse 中是相当标准的。

# iphone - 如何在核心数据中保存字符串

> ID：13617392
> 
> 赞同：0
> 
> 时间：2012-11-29T01:30:08.660
> 
> 标签：iphone, objective-c, ios, core-data

我使用主从核心数据模板创建了一个新的 xcode 项目。默认情况下，它会保存日期并将其作为表格中每个单元格的标题。我尝试更改它，以便它显示一个字符串，但每次都会崩溃。

我改变了这个

```
[newManagedObject setValue:[NSDate date] forKey:@"timeStamp"]; 
```

对此

```
[newManagedObject setValue:name forKey:@"name"]; 
```

我有一个名为 name 的字符串，我将默认的 nsdate“timeStamp”属性更改为字符串“name”。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:44:42.390

我建议您先删除设备或模拟器上的应用程序，然后重新构建并运行将解决您的问题。因为您已经修改了模型。

**注意**：每次修改模型时，最好先清理原始核心数据。

# .net - 学习托管 C++ 泛型

> ID：13617393
> 
> 赞同：0
> 
> 时间：2012-11-29T01:30:28.363
> 
> 标签：.net, generics, c++-cli, binary-search-tree

我在托管 C++ 中为学校创建了一个小型 BST 项目。工作得很好，但现在我试图弄清楚如何使用泛型做同样的项目（第一个项目使用 int）。对于我的生活，我看不到我从根本上搞砸了什么。希望有方向。

通用节点类.h：

```
/*
GenericNodeClass.h.  Created by Ed Thompson for IS375, C++ Intermediate, City University
of Seattle.

GenericNodeClass.h provides for members for creation of a generic binary tree

*/

#pragma once

#include "stdafx.h"
#include <iostream>
#include <deque>
#include <climits>

using namespace std;
using namespace System;
using namespace System::Collections;
using namespace System::Collections::Generic;

generic <typename T> where T : IComparable<T>, IEquatable<T>
ref class Node
{
public:
T data;
T parent;
Node<T> ^ left;
Node<T> ^ right;

// Constructor that takes one parameter:
// a T, representing the value of a new node
Node(T n) 
{
    data = n;
}
}; 
```

BinarySearchTreeClass.h

```
#include "stdafx.h"
#include <iostream>
#include <deque>
#include <climits>
#include "GenericNodeClass.h"

using namespace std;
using namespace System;
using namespace System::Collections;
using namespace System::Collections::Generic;

generic <typename T> where T : IComparable<T> , IEquatable<T>
ref class BinarySearchTreeClass

{
public:

Node<T>^ rootNode;
T _p;

// constructors
// default
BinarySearchTreeClass(){}

BinarySearchTreeClass(T t)
{
    // create a new Node in the Binary Search Tree 
    rootNode = gcnew Node<T> (t);
}

// method to return a node if it exists in the tree
// takes two parameters:  an instance of the Node class, and a
// value representing the value of the node to be looked up 
Node<T> ^ lookUp(Node<T> ^node, T key)
{
    if(node == nullptr)
        return node;
    if(node->data == key) 
        return node;
    else
    {
        if (node->data->CompareTo(key) < 0)
            return lookUp(node->right, key);
        else
            return lookUp(node->left, key);
    }
}

// method to create new node.  Method takes two parameters:
// a parameter of the value for the node data, and a value
// for the node's parent.
Node<T> ^newNode(T key, T parent)
    {
        Node<T> ^node = gcnew Node<T>(key);
        node->data = key;
        node->left = nullptr;
        node->right = nullptr;
        node->parent = parent;

        return node;
    }

// insertNode method inserts a new node into an existing 
// Binary Search Tree.  This method takes two parameters:
// an instance of Node<T> (node), and a value of T, 
// representing the value of the node being inserted
Node<T> ^insertNode(Node<T> ^node, T input)
{
    Node<T> ^returnNode;

    if (node != nullptr)
        _p = node->data;

    // if the node is non-existant, create a new node
    // with the value of the parameter 'input' and the 
    // value of the new node's parent (_p).
    if (node == nullptr)
    {
        // pass class variable _p to set value
        // of the new node's parent value.
        returnNode = newNode(input, _p);
        return returnNode;
    }

    // if the input parameter value is less than 
    // or equal to the node value, insert node using 
    // the left hand node leaf of the current node 
    // as starting point
    if (input->CompareTo(node->data) < 0)
    {
        // set variable p to value of node->data value (this
        // will be the parent of the new node)
        _p = node->data;
        node->left = insertNode(node->left, input);
    }

    // if the input parameter value is greater than 
    // the node value, insert node using the right hand
    // node leaf of the current node as starting point
    else
    {
        _p = node->data;
        node->right = insertNode(node->right, input);
    }
    return node;
}

// method to find the left most node in a Binary Search Tree
// takes an instance of Node<T> as parameter
Node<T> ^leftMost(Node<T> ^node)
{
    if (node == nullptr)
        return nullptr;
    while (node->left != nullptr)
        node = leftMost(node->left);
    return node;
}

// method of return the right most node in a Binary Search Tree
// takes an instance of Node<T> as parameter
Node<T> ^rightMost(Node<T> ^node)
{
    if (node == nullptr)
        return nullptr;
    while (node->right != nullptr)
        node = rightMost(node->right);
    return node;
}

// method to return the size of a Binary Tree
// takes an instance of Node<T> as parameter
int treeSize(Node<T> ^node)
{
    if(node == nullptr || node->left == nullptr && node->right == nullptr)
        return 0;

    else
        return treeSize(node->left) + 1 + treeSize(node->right);
}

// method that prints to console the value of each node from lowest to highest
// takes an instance of Node<T> as parameter
void printTreeInOrder(Node<T> ^node)
{
    if (node != nullptr)
    {
        printTreeInOrder(node->left);
        Console::WriteLine(node->data);
        printTreeInOrder(node->right);
    }
}

// method that prints to console a graphic representation of a binary tree
// takes an instance of Node<T> as parameter
void printGraphicRepresentation(Node<T> ^node)
{
    // the width of the tree is the max height /2 (?)
    // need to know how wide the tree is
    // At treeWidth / 2, print node 
    // on new line, at nodePosition - 1, if node has a left, print a "/"
    // on same line, at nodePosition + 1, if node has a right, print a "\"
}

// method that prints to console all members of a given node
// takes an instance of Node<T> as parameter
void printNodeMembers(Node<T> ^node)
{
    Console::WriteLine("Members of Node " + node->data + " include: ");
    if (node->parent != nullptr)
        Console::WriteLine("Parent: " + node->parent);
    else
        Console::WriteLine("This node has no parent.");
    if (node->left != nullptr)
        Console::WriteLine("Left-member: " + node->left->data);
    else
        Console::WriteLine("This node has no left-member.");
    if (node->right != nullptr)
     Console::WriteLine("Right-Member: " + node->right->data);
    else
        Console::WriteLine("This node has no right-member.");

}
}; 
```

测试类.cpp

```
#include "stdafx.h"
#include "GenericNodeClass.h"
#include "BinarySearchTreeClass.h"
#include <iostream>

using namespace std;
using namespace System;
using namespace System::IO;
using namespace System::Collections::Generic;

int main ()
{
BinarySearchTreeClass<int>^ BTree = gcnew BinarySearchTreeClass<int>();

// instantiate new Node instance with starter value
Node<int> ^rootNode = gcnew Node<int>(5);

// insert additional nodes
BTree->insertNode(rootNode, 3); 
BTree->insertNode(rootNode, 7);
BTree->insertNode(rootNode, 4);
BTree->insertNode(rootNode, 6);
BTree->insertNode(rootNode, 2);
BTree->insertNode(rootNode, 9);
BTree->insertNode(rootNode, 1);
BTree->insertNode(rootNode, 8);
BTree->insertNode(rootNode, 0);
BTree->insertNode(rootNode, 10);
BTree->insertNode(rootNode, 12);
BTree->insertNode(rootNode, 11);
Console::WriteLine("The value of the left-most node in this tree is: " + BTree->leftMost(rootNode)->data); 
Console::WriteLine("The value of the right-most node in this tree is: " + BTree->rightMost(rootNode)->data);
Console::WriteLine("The size of this Binary Search Tree is: " + BTree->treeSize(rootNode));
Console::WriteLine("Printing Binary Search Tree in order: ");
BTree->printTreeInOrder(rootNode);

// TO EXAMINE THE PROPERTIES OF A GIVEN NODE, CHANGE THE SECOND PARAMETER OF 
// THE lookUp METHOD IN THE FOLLOWING LINE OF CODE TO THE NODE DESIRED TO BE EXAMINED
BTree->printNodeMembers(BTree->lookUp(rootNode, 7));
Console::WriteLine();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:38:50.587

比较运算符不可用于泛型。没有定义它们的接口，并且与 C++ 模板不同，编译器不知道将使用的所有类型。

你想要的是`IComparable<T>`. 此接口定义方法`CompareTo(T)`，如果第一个对象分别小于、等于或大于另一个对象，则该方法将返回负数、零或正数。（这可能有点难以记住，所以请记住：`(x [symbol] y)`变成`(x.CompareTo(y) [symbol] 0)`。）

给定一个通用类型`T`，您不知道是否`T`实际实现`IComparable<T>`。您想要做的是强制编译器只允许实现`IComparable<T>`.

```
generic <typename T> where T : IComparable<T> ref class Node { ... };
generic <typename T> where T : IComparable<T> ref class BinarySearchTreeClass { ... }; 
```

现在您可以`CompareTo`在您的类中使用该方法：

```
if (node->data->CompareTo(key) < 0)
    return lookUp(node->right, key);
else
    return lookUp(node->left, key); 
```

其他几个小的语法问题：

`generic <typename T> ref class Node<T>`: 不需要`Node<T>`，只要`Node`。Node 类已经是通用的，因为`generic <typename T>`，您也不需要`<T>`。

`Node<T>(){}`: 你不需要`<T>`. 泛型类的构造函数已经是泛型的，不需要再指定。

# mysql - mySQL NATURAL JOIN 显示类似于 LEFT OUTER JOIN 的结果

> ID：13617394
> 
> 赞同：1
> 
> 时间：2012-11-29T01:30:32.753
> 
> 标签：mysql, sql, database-design, join

我有以下 mySQL 查询：

```
SELECT * FROM `objects`
natural join `gPeople`
natural join `gVip`
natural join `gTeachers` 
```

返回：

```
object_id       name            vip_code           subject
----------------------------------------------------------
003             John            9003               Math 
```

这是因为“John”属于 People、Vip 和 Teachers 组。

我只有两组其他人，并希望他们显示如下：

```
object_id       name            vip_code           subject
----------------------------------------------------------
001             Mary                               History
002             Holly           9002               
003             John            9003               Math 
```

我尝试了左外连接，但最终得到了 objects_id 列的许多副本，由于我使用结果的方式，这不是我们所希望的。

注意：我必须使用 * 因为它是我正在尝试做的事情的核心。我需要这些表能够支持添加/删除的列，并且查询能够获取它们。

[http://sqlfiddle.com/#!2/eefe7/3/0](http://sqlfiddle.com/#!2/eefe7/3/0)这是我尝试过的 SQL Fiddle 但是我的结果如下所示：

```
object_id   object_id   name      object_id   vip_code     object_id   subject
------------------------------------------------------------------------------
001         001         Mary                               001         History
002         002         Holly     002         9002                            
003         003         John      003         9003         003         Math 
```

有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:49:37.537

我能够通过在 PHP 中编辑结果来解决我的问题。

```
$sql = "SELECT `o`.`object_id` AS `ID`, `gP`.*, `gV`.*, `gT`.* FROM `objects` `o`
left outer join `gPeople` `gP` ON `o`.`object_id` = `gP`.`object_id`
left outer join `gVip` `gV` ON `o`.`object_id` = `gV`.`object_id`
left outer join `gTeachers` `gT` ON `o`.`object_id` = `gT`.`object_id`";

$result = mysql_query($sql);

while ($row = mysql_fetch_object($result)) {
    $row->object_id = $row->ID;
    unset($row->ID);
} 
```

这导致：

```
object_id       name            vip_code           subject
----------------------------------------------------------
001             Mary                               History
002             Holly           9002               
003             John            9003               Math 
```

代替：

```
object_id       name            vip_code           subject
----------------------------------------------------------
001             Mary                               History
                Holly           9002               
003             John            9003               Math 
```

似乎因为对象 002 的表 gSubject 中没有 object_id，所以它用空值覆盖了结果中的 object_id。

即，对于第一遍（对象表）上的对象 002，它等于 002，然后在第二遍（gPeople 表）上，它再次被 002 覆盖，然后在第三遍（gVip 表）上，它再次被 002 覆盖，然后在最后一遍（gTeachers 表）它被 null 覆盖，因为表中没有它的记录。

# javascript - 如何通过其扩展从 chrome 选项卡中获得响应？

> ID：13617398
> 
> 赞同：0
> 
> 时间：2012-11-29T01:30:38.517
> 
> 标签：javascript, google-chrome-extension, local-storage

假设我打开一个新的 chrome 选项卡供用户登录。该选项卡由 chrome 扩展程序中的 createTab 打开。一旦用户登录并且服务器发送响应，我将如何让我的 chrome 扩展程序获取响应数据？

我能够创建和删除选项卡，但我无法弄清楚如何让我的 chrome 扩展知道选项卡有响应，以便我的 chrome 扩展读取该响应，将其存储在本地存储中并删除/删除镀铬标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:24:10.940

`Suppose I open a new chrome tab for a user to sign in. The tab is opened by createTab from the chrome extension. And once the user signs in, and server sends a response, how would I make my chrome extension get the response data?`我假设服务器将响应登录 pass\fail 发送到由 chrome.newTab 新创建的页面。如果我的假设是正确的，那么这种结构对您的功能要求会有所帮助。

注入的内容脚本将查找收到的响应并通知 Chrome 扩展程序；Chrome 扩展程序可以根据需要使用数据。

![在此处输入图像描述](../Images/6021338b6b476033c113d262309f9535.png)

***清单.json***

```
{
  "name": "Content to Extension",
  "description": "A sample AJAX call and etc",
  "version": "0.1",
  "permissions": [
    "experimental", "tabs","<all_urls>"
  ],
  "browser_action": {
    "default_icon": "icon.jpg",
    "default_popup": "popup.html"
  },
  "manifest_version": 2,
  "content_scripts":[
  {
    "matches": ["<all_urls>"],
    "js":["content.js"]
  }
  ]
} 
```

***popup.html***

```
<html>
<head>
<script src='popup.js'></script>
</head>
<body>
</body>
</html> 
```

***内容.js***

```
function filtersearch(){

var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function(data) {
    if (xhr.readyState == 4) {
      if (xhr.status == 200) {
            console.log("message Sent");
            chrome.extension.sendMessage("Response recived");
        }
      } else {
        //callback(null);
      }
    }

var url = 'http://www.w3schools.com/html/default.asp';
xhr.open('GET', url, true);
xhr.send();

}
window.onload = filtersearch; 
```

***popup.js***

```
chrome.extension.onMessage.addListener(function (message,sender,callback){
    console.log("Message Recieved");

    //Store in Local Storage
    localStorage.messageRecieved = message;

    // Close or remove tabs or Do every thing here
}); 
```

如果您需要更多信息，请与我们联系。

# iphone - 从类方法调用 popViewController

> ID：13617402
> 
> 赞同：1
> 
> 时间：2012-11-29T01:30:57.807
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller

我想从视图 1 的类方法中返回我的根视图。在视图 1 的实例方法中，我只想说

```
[self.navigationController popViewControllerAnimated:YES]; 
```

但由于`self`不适用于类方法，我想知道如何实现这一点。关于下图，我目前在 View1Controller.m 的类方法中，我想回到 Rootview。谢谢。

![在此处输入图像描述](../Images/ea809c63fc81016303b1d7adfb25dee8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:43:55.917

您可以声明另一个方法：

```
-(void)closeThisViewController
{
    [self.navigationController popViewControllerAnimated:YES];   
} 
```

然后使用通知中心：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"notif_closeThisVC" selector:@selector(closeThisViewController) object:nil]; 
```

尽管正如 jonkroll 所说，您正在处理视图控制器的东西，但我们不明白为什么要将与视图控制器相关的代码放在类方法中。

## 编辑

对不起上面的错误代码。

我的意思是说你可以使用 NSNotificationCenter 来发布通知：

```
-(void)postNotificationName:(NSString *)notificationName object:(id)notificationSender 
```

然后在同一个视图控制器中声明一个 NSNotificationCenter 观察者：

```
- (void)addObserver:(id)notificationObserver selector:(SEL)notificationSelector name:(NSString *)notificationName object:(id)notificationSender 
```

我的大脑比我的手指快，所以当我试图解释解决方案时，我有点将两者合二为一：P

它应该更像这样：

```
// posting a notification with NSNotificationCenter
[[NSNotificationCenter defaultCenter] postNotificationName:@"notif_closeThisVC" object:nil]; 
```

在某处的 viewDidLoad 方法中（我建议在顶部），添加以下内容：

```
-(void)viewDidLoad
{
    // adding an observer with NSNotificationCenter
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(closeThisViewController) name:@"notif_closeThisVC" object:nil];

    ...
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T02:00:27.140

如果您不想将其从类方法重构为实例方法（当然在某些情况下您不想这样做），我建议您在类方法中添加一个完成块参数：

```
+ (void)doSomethingWithCompletion:(void(^)())completion {
    /* Do your thing... */
    completion();
}

- (IBAction)doSomething:(id)sender {
     [self.class doSomethingWithCompletion:^{
          [self.navigationController popViewControllerAnimated:YES];
     }];
} 
```

这将允许您将类方法执行的无实例操作与视图控制器的特定于实例的解除完全分开。如果操作失败，您还可以使完成块接受错误对象。

您可以对委托对象执行类似的操作，甚至可以通过传入视图控制器来关闭，但这种设计似乎提供了最干净的分离和最现代的感觉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T01:46:37.573

会有一些合理的论据鼓励你重构，这样你就可以访问当前的视图控制器，并且可以通过`currentVC.navigationController`. 请记住，它仍然可以是类方法，只需在您从 VC 调用它（或启动调用它的调用链）时给它一个额外的参数。

但是，我还必须在我的一个应用程序中解决这个问题，所以我只是确保每个人都可以全局访问导航控制器，总是通过指针（“弱引用”）

如果您声明这样的全局变量（例如，在“Navigation.h”中）

```
extern UINavigationController *gNavController; 
```

并在您的中定义它`AppDelegate.m`（如果您对此感到生疏，请查看声明/定义之间的区别）：

```
UINavigationController* gNavController; 
```

然后在您启动时分配它`application:didFinishLaunchingWithOptions:`：（假设委托有一个名为的属性`viewController`，即您的导航控制器）：

```
gNavController = viewController; 
```

然后，只要您`#import Navigation.h`，您就可以随时访问导航控制器。这也使得处理弹出窗口/弹出窗口的视图变得更加简单。这还假设您的导航控制器在应用程序的整个生命周期内都不会发布（可能是真的，除非您正在做一些不寻常的事情）。

# linux - 正则表达式与 Bash 中的文件两种文件类型不匹配

> ID：13617403
> 
> 赞同：0
> 
> 时间：2012-11-29T01:31:10.460
> 
> 标签：linux, bash

我正在尝试在 bash 中列出不是`.html`或`.js`

我已经厌倦了以下两种方法，但都不起作用？

```
ls !(*.html|*.js)

ls | grep -v '\.(html|js)$' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:58:47.310

还有另一种方法可以做到这一点。bash 有一个扩展 glob 模式的选项：

```
shopt -s extglob
ls !(*.html|*.js) 
```

（请注意，这仍然是一个 glob 模式，*而不是*正则表达式——例如，`*`表示“任何字符串”，而不是“前面的零个或多个”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:35:47.273

如果您的版本`ls`支持该`-I`标志：

```
ls -I *.js -I *.html 
```

从手册页：

```
-I, --ignore=PATTERN
       do not list implied entries matching shell PATTERN 
```

* * *

否则，使用`find`：

```
find . -maxdepth 1 -type f ! \( -name "*.html" -o -name "*.js" \) 
```

对于格式添加：

```
 -printf "%f\n" 
```

如果文件名需要通过管道传输，您只需要更改`printf()`语句：

```
-printf '%f\0' | xargs -0 ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T01:34:51.420

`extended-regexp`与`-E`选项一起使用：

```
ls | grep -E -v '\.(html|js)$' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:40:52.563

该`-I`标志可以过滤`ls`输出：

```
ls -I '*.html' -I '*.js' 
```

或者

```
ls | grep -v -e '\.html' -e '\.js' 
```

从手册页：

```
 -e PATTERN, --regexp=PATTERN
              Use PATTERN as the pattern; useful to protect patterns beginning with -. 
```

# android - 使用 facebook android SDK 查看 facebook 页面的图片

> ID：13617407
> 
> 赞同：0
> 
> 时间：2012-11-29T01:31:27.803
> 
> 标签：android, facebook, facebook-android-sdk

Salam 每个人我想开发一个项目，允许用户查看上传到特定页面的最新图片这个项目？最好的祝愿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:43:01.237

我总是建议希望将 Facebook 集成到他们的应用程序中的开发人员从我们的文档开始。我们开发人员页面上的本[教程](https://developers.facebook.com/docs/guides/mobile/android_hackbook/)将引导您完成一个示例应用程序，让您开始使用我们最基本的 SDK 功能，例如通过 Facebook 登录、上传图片和抓取用户的个人资料图片。一旦你完成了这些，你应该足够精通学习如何扩展 SDK 功能来做你想做的事。

当您有问题时，这个社区也非常有帮助（但您必须提供上下文、示例代码以及对您所面临问题的非常详尽的描述）。

# objective-c - pushViewController 不适用于实例化的 ViewController

> ID：13617408
> 
> 赞同：0
> 
> 时间：2012-11-29T01:31:35.060
> 
> 标签：objective-c, uiviewcontroller, pushviewcontroller

我又遇到了另一个问题...

我有一个视图，其中列出了 iBooks 等每本“书”的“封面”。必须先下载每本书，然后才能查看其内容。下载书籍的内容后，用户可以查看该内容（只是一系列图像）。

然而，突然间我对书页的看法停止了工作。在列出书籍封面的“书架”视图中，如果用户创建的书籍已经下载，我会为书籍页面实例化另一个视图控制器：

```
BookPageController *bookPageVc = [[BookPageController alloc] init];
bookPageVc.bookPageData = bookPageData;
[self.navigationController pushViewController:bookPageVc animated:YES]; 
```

我已经检查了它是否被 NSLog 正确实例化，并且 BookPageController 和 self.navigationController 都存在。然而，它总是因错误而崩溃：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil' 
```

我没有为此 BookPageController 更改/添加任何内容，它只是 UIViewController。
因为当我尝试使用另一个 UIViewController 时，它工作正常。

我在 BookPageController 中遗漏了什么吗？任何帮助或指向方向都会受到重视。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:53:25.280

也许我没有看到任何东西，但是当您插入和放弃（创建列表？）时发生错误，但我没有在您的代码中看到插入操作。

你能发那部分吗？（或者检查它是否在那一刻被实例化）。

# web - 构建基于 Web 的 BPMN 设计器的开源框架

> ID：13617409
> 
> 赞同：9
> 
> 时间：2012-11-29T01:31:36.643
> 
> 标签：web, designer, bpmn

我们已经在 Eclipse 框架上构建了一个 BPMN 设计器。在 EMF、Graphitti 等基于 Eclipse 的框架的大力支持下，它很容易构建。现在我们要构建一个基于 Web 的 BPMN 设计器。你能建议我可以使用哪些开源框架来做到这一点吗？我希望框架能够支持我定义 bpmn 元模型、图形编辑器等

请分享你的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T16:23:35.327

## Oryx / Signavio 核心组件

[Signavio 核心组件](http://code.google.com/p/signavio-core-components/)是 Oryx 的“继承者” 。那里有一个 github 镜像：[https ://github.com/IAAS/signavio-core-components/](https://github.com/IAAS/signavio-core-components/)

Signavio 核心组件从 MIT 转换为 GPL 许可证。此外，它们是无人维护的。

### 叉子

Wapama 是 Oryx 的一个分支。似乎[https://github.com/saifulomar/process-designer](https://github.com/saifulomar/process-designer)是最近更新的具有紧密 JBPM 集成的分支。

[Gemsbok](https://github.com/matthewhampton/Gemsbok)是 Signavio 核心组件的另一个分支。

[process-designer](https://bitbucket.org/openicar/process-designer)似乎得到了积极维护（截至 2013/06）

[在Flowable](https://www.flowable.org/)项目的上下文中删除了对 ExtJS 的依赖。有关[_](https://github.com/flowable/flowable-engine/tree/master/modules/flowable-ui-modeler/flowable-ui-modeler-app/src/main/resources/static/editor-app/editor) _电流源。

## 日食星尘/光尘

还有最近由 Eclipse 社区提供的。在[Stardust 项目](http://www.eclipse.org/stardust/)中，有一个基于 Web 的 BPMN Modeler，可通过 git 访问：http: [//git.eclipse.org/c/stardust/org.eclipse.stardust.ui.web.git/tree/stardust-web-建模器-bpmn2](http://git.eclipse.org/c/stardust/org.eclipse.stardust.ui.web.git/tree/stardust-web-modeler-bpmn2)。一些基本信息在[Stardust Wiki](http://wiki.eclipse.org/Stardust/Enhancing_and_Embedding_Stardust/Browser_Modeler)中，但没有单独使用基于 Web 的 BPMN 建模器的分步指南。

## 自行实现

[我们在https://ultimate-comparisons.github.io/ultimate-graphframework-comparison/](https://ultimate-comparisons.github.io/ultimate-graphframework-comparison/)对所有可用的基于 Web 的图库进行了比较。

最好的示例代码可在 [https://winery.github.io/javascript-graph-library-comparison/](https://winery.github.io/javascript-graph-library-comparison/)获得。这个想法类似于 TodoMVC，但这里创建了一个最小的图创建示例。

（后面有一些旧评论）

### 基于jsPlumb

有基于[jsPlumb的项目](http://jsplumb.org/)[https://github.com/Dzhyrma/BPMN_Modeler](https://github.com/Dzhyrma/BPMN_Modeler)。它包括[raphael](http://raphaeljs.com/)，这是一个基于 SVG 的绘图库。

### 直接画布绘制

[https://github.com/hallodom/BPMN-Modeller](https://github.com/hallodom/BPMN-Modeller)直接使用 2d 画布绘制 BPMN。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-16T09:24:58.960

[如果许可条款（包括徽标）适合您，那么http://bpmn.io/](http://bpmn.io/) 是最佳答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T02:13:53.560

已经有一个了。[羚羊](http://code.google.com/p/oryx-editor/)。我相信一些开源 bpmn 引擎利用了相同的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T11:25:33.340

对于基于 Stardust Web 的 BPMN 建模器的逐步使用，请参考链接： [http ://help.eclipse.org/kepler/topic/org.eclipse.stardust.docs.analyst/html/handbooks/modelling_analyst/models /model-preface.html?cp=52_7_3](http://help.eclipse.org/kepler/topic/org.eclipse.stardust.docs.analyst/html/handbooks/modelling_analyst/models/model-preface.html?cp=52_7_3)

# c++ - 在 ubuntu 12.10 中的 c++ 和 netbeans 中忽略了一条指令

> ID：13617410
> 
> 赞同：1
> 
> 时间：2012-11-29T01:31:39.270
> 
> 标签：c++, g++, sdl

> **可能重复：**
> [为什么没有调用构造函数？](https://stackoverflow.com/questions/3810570/why-is-there-no-call-to-the-constructor)
> [“int a(); 的作用是什么？” 在 C++ 中？](https://stackoverflow.com/questions/10084710/whats-the-effect-of-int-a-in-c)
> [Test t 有什么区别？和测试 t();? 如果测试是一个类](https://stackoverflow.com/questions/12686298/whats-the-differences-between-test-t-and-test-t-if-test-is-a-class)

对于我试图制作的游戏项目，由于某种原因，我创建对象的指令被忽略。

该项目刚刚开始，我不知道为什么会发生。

我使用netbeans作为ide，g++作为编译器，操作系统是ubuntu 12.10。

发生这种情况的代码是这样的：

```
#include "Vector.h"
#include"Motor.h"
int main(int argc, char** argv)
{ 
    Motor m1(); 
    return 0;
} 
```

当我在“Motor m1();”上设置一个断点时 并点击调试箭头跳转到它之后的返回指令并且不执行对象的构造函数

电机的代码是这样的：

```
#include "Motor.h"
Motor::Motor() {
    SDL_Init(SDL_INIT_EVERYTHING);
    pantalla=NULL;
    pantalla=SDL_SetVideoMode(800,600,32,SDL_SWSURFACE);

    SDL_Delay(2000);
}
Motor::~Motor() {
    SDL_Quit();
} 
```

“SDL_Delay(2000)”用于测试目的。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:41:57.043

```
Motor m1(); 
```

这意味着这`m1`是一个不带参数并返回 class 实例的函数`Motor`。

你的意思是：

```
Motor m1; 
```

这意味着默认构造一个类的实例`Motor`并调用它`m1`。

# javascript - CSS 以时间间隔显示 div 作为工具提示

> ID：13617411
> 
> 赞同：0
> 
> 时间：2012-11-29T01:31:42.960
> 
> 标签：javascript, css, html

我试图让大约 8 或 9 个 div 以定时间隔淡入和淡出。一个接一个地以 5 秒的间隔相互重叠 1 秒。我不确定从哪里开始。我正在考虑 CSS，然后为 onclick 数组创建一个 js ......

有任何想法吗？

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:53:55.130

工作代码:-)

```
</script>
<script src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
fadeLoop()
function fadeLoop() {

    var counter = 0,
        divs = $('.fader').hide(),
        dur = 300;

    function showDiv() {
        $("div.fader").fadeOut(dur) // hide all divs
            .filter(function(index) {
                return index == counter % divs.length;
            }) // figure out correct div to show
            .delay(dur) // delay until fadeout is finished
            .fadeIn(dur); // and show it
        counter++;
    }; // function to loop through divs and show correct div
    showDiv(); // show first div    
    return setInterval(function() {
        showDiv(); // show next div
    }, 7 * 1000); // do this every 5 seconds    
};

$(function() {
    var interval;

    $("#start").click(function() {
        if (interval == undefined){
            interval = fadeLoop();
            $(this).val("Stop");
        }
        else{
            clearInterval(interval);
            $(this).val("Start");
            interval = undefined;
        }
    });
});
});
</script>
<!--#include file="header.asp"-->
<% if Request("interactive") = "on" then %>
<form name="tutorial">

<div class="fader"><div class="arrow-w arrowlocation1" style="font-size:1em;" ></div><div id="tutorial1" class="tutorial createquestion1">Start by creating a title and selecting a folder for your question to be stored in.</div></div>

<div class="fader"><div class="arrow-w arrowlocation2" style="font-size:1em;" ></div>
<div id="tutorial2" class="tutorial createquestion2">Categories are key to your reporting effectiveness, be sure to include categories that relate to this question.</div></div>

<div class="fader"><div class="arrow-w arrowlocation3" style="font-size:1em;" ></div>
<div id="tutorial3" class="tutorial createquestion3">Select your options and/or upload an attachment (file, video or audio).</div></div>

<div class="fader"><div class="quicktiptitle quicktiplocation4">QUICK TIP</div><div class="arrow-n arrowlocation4" style="font-size:1em;" ></div>
<div id="tutorial4" class="quicktip createquestion4">To create questions easier update your question preferences in your account area options.</div></div>

<div class="fader"><div class="arrow-w arrowlocation5" style="font-size:1em;" ></div>
<div id="tutorial5" class="tutorial createquestion5">Your rationale can be used to provide feedback to students on this question and you also can use internal comment to track notes on changes, updates, textbook information and more.</div></div>

<div class="fader"><div class="arrow-e arrowlocation6" style="font-size:1em;" ></div>
<div id="tutorial6" class="tutorial createquestion6">Write your questions, answers and you are ready to go.</div></div>

<div class="fader"><div class="arrow-w arrowlocation7" style="font-size:1em;" ></div>
<div class="quicktiptitle quicktiplocation7">QUICK TIP</div>
<div id="tutorial7" class="quicktip createquestion7"> Click on this icon to open and close sections that you don't use. These will remain closed whenever you visit this page until you open them again.</div></div></form>

<% end if %> 
```

# python - 我的while循环一遍又一遍地重复

> ID：13617413
> 
> 赞同：3
> 
> 时间：2012-11-29T01:31:57.263
> 
> 标签：python, while-loop

它正在将一个棋盘引用到一个有 9 个插槽的游戏，一旦插槽被填满，##while 循环会在没有任何空位并且我不知道如何修复它时继续寻找新位置，请帮助！:(

```
 computer = random.randint(0, 8)
        if board[computer] != 'X' and board[computer] != 'O':
            print computer
            board[computer] = 'O'
        else:
            while board[computer] == 'O' or 'X':
                counter = 0
                if counter > 15:
                    break
                computer = random.randint(0, 8)
                print computer
                if board[computer] != 'X' and board[computer] != 'O':
                    board[computer] = 'O'
                counter += 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T01:34:10.387

您的`while`语句总是返回一个真值，因为`or 'X'`总是计算为`True`。首先，`board[computer] == '0'`求值，如果`False`，则继续到 的右侧`or`，即字符串`X`。您在代码的其他地方确实有这种模式是正确的，所以我怀疑这只是一个疏忽。

相反，您必须包括布尔比较的两边：

```
while board[computer] == 'O' or board[computer] == 'X': 
```

或者更好，你可以使用`in`

```
while board[computer] in ['O','X']: 
```

或者，由@icktoofay 在评论中提供，惯用语：

```
while board[computer] in 'OX': 
```

您`counter`必须在循环`0` *外*初始化，而不是在循环内重新初始化。

```
 # initialize outside the loop
 counter = 0
 while board[computer] == 'O' or 'X':
    # Don't re-initialize to 0 in the loop 
```

# asp.net - 使用 Global.asax 设置/检查会话变量和重定向（用于用户测试）

> ID：13617421
> 
> 赞同：7
> 
> 时间：2012-11-29T01:32:39.033
> 
> 标签：asp.net, asp.net-mvc

我想为我的站点添加非常简单的临时安全性。

我在 Home/UnderConstruction 创建了一个页面，测试站点的人可以输入硬编码密码，然后将“underconstruction”会话变量设置为“false”。

这是我到目前为止所拥有的，但它导致了太多的重定向：

```
 protected void Session_Start(Object sender, EventArgs e)
    {
        HttpContext.Current.Session["underconstruction"] = "true";
    }

    protected void Application_AcquireRequestState(Object sender, EventArgs e)
    {
                if (HttpContext.Current != null && HttpContext.Current.Session != null)
                {
                    var underconstruction = HttpContext.Current.Session["underconstruction"];
                    if (underconstruction != null)
                    {
                        string oc = underconstruction.ToString();
                        if (oc != "false") Response.Redirect("~/Home/UnderConstruction");
                    }
                }

    } 
```

这接近我需要做的吗？

**这是我们开始工作的代码：**

**UnderConstruction 视图的控制器代码**

```
 public ViewResult UnderConstruction()
    {
        return View();
    }

    [HttpPost]
    public ActionResult UnderConstruction(string ocp)
    {
        if (ocp == "mypassword")
        {
            Session["underconstruction"] = "false";
            return RedirectToAction("Index", "Home");
        }
        else
        {
            Session["beingredirected"] = "false";
            return View();
        }
    } 
```

**全球阿萨克斯**

```
 protected void Session_Start(Object sender, EventArgs e)
    {
        HttpContext.Current.Session["underconstruction"] = "true";
        HttpContext.Current.Session["beingredirected"] = "false";
    }

    protected void Application_AcquireRequestState(Object sender, EventArgs e)
    {
        if (HttpContext.Current != null && HttpContext.Current.Session != null)
        {
            bool uc = false;
            var underconstruction = HttpContext.Current.Session["underconstruction"];
            if (underconstruction != null)
            {
                uc = Boolean.Parse(underconstruction.ToString());
            }

            bool redirected = false;
            var beingredirected = HttpContext.Current.Session["beingredirected"];
            if (beingredirected != null)
            {
                redirected = Boolean.Parse(beingredirected.ToString());
            }

            if (uc && !redirected)
            {
                if (Request.HttpMethod == "GET")
                {
                    HttpContext.Current.Session["beingredirected"] = "true";
                    Response.Redirect("~/Home/UnderConstruction");
                }
                else if (Request.HttpMethod == "POST")
                {
                }

            }

            HttpContext.Current.Session["beingredirected"] = "false";
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T02:46:02.697

是`~/Home/UnderConstruction`在不同的网站吗？如果不是，它会不会总是重定向，因为它总是`oc`正确的？即 - 您是否还需要为您请求的页面添加检查，以便您可以绕过重定向（如果已经进入该`UnderConstruction`页面）？

**更新**

不确定检查页面名称是否是一个好主意，但这样的事情可能会起作用：

```
protected void Session_Start(Object sender, EventArgs e)
{
    HttpContext.Current.Session["underconstruction"] = "true";
    HttpContext.Current.Session["beingredirected"] = "false";
}

protected void Application_AcquireRequestState(Object sender, EventArgs e)
{
    if (HttpContext.Current != null && HttpContext.Current.Session != null)
    {
        bool uc = false;
        var underconstruction = HttpContext.Current.Session["underconstruction"];
        if (underconstruction != null)
        {
            uc = Boolean.Parse(underconstruction);
        }

        bool redirected = false;
        var beingredirected = HttpContext.Current.Session["beingredirected"];
        if (beingredirected != null)
        {
            redirected = Boolean.Parse(beingredirected);
        }

        if (uc && !redirected)
        {
            HttpContext.Current.Session["beingredirected"] = "true";
            Response.Redirect("~/Home/UnderConstruction");
        }

        HttpContext.Current.Session["beingredirected"] = "false";
    }
} 
```

请注意，我会清理它，这个例子只是给出一般的想法。

**更新**

如果您想使用评论中提到的角色，那么[ScottGu 博客中的这篇文章](http://weblogs.asp.net/scottgu/archive/2006/02/24/ASP.NET-2.0-Membership_2C00_-Roles_2C00_-Forms-Authentication_2C00_-and-Security-Resources-.aspx)可能会有所帮助。它有点复杂，但具有不引入临时代码的额外好处，因为上述解决方案将

# css - 父宽度不适合子宽度 css

> ID：13617429
> 
> 赞同：2
> 
> 时间：2012-11-29T01:33:08.753
> 
> 标签：css

我正在尝试使父 div 的宽度适合显示的图像。我这样做有很多麻烦，它似乎会自动调整到非常大。

图片： http: [//puu.sh/1vsqA](http://puu.sh/1vsqA)

内容是正文部分

图像是包含图像的白框

image img 是盒子本身内部的实际图像。

CSS：

```
html, body
{
    margin:0;
    padding:0;
    border:0;
    height:100%;
    width:100%;
}

body
{
    background-image: url('./page_bg.gif');
    background-repeat: repeat;
    font-family:"lucida grande",tahoma,verdana,arial,sans-serif;
    font-size:12px;
}

#navlinks
{
    width: 100%;
    height: 28px;
    line-height: 28px;
    background-color: #000;
    color: #FFF;
}

#links
{
    list-style-type: none;
    float: left;
    padding-left: 5px;
    margin: auto;
}

#links li
{
    float: left;
    padding-left: 5px;
    padding-right: 5px;
}

#content
{
    display: block;
    padding: 40px 40px 40px 40px;
}

#image
{
display: inline-block;
border: 1px solid #CCC;
border-color: #CCC #AAA #AAA #CCC;
padding: 3px;
margin-left: auto;
margin-right: auto;
background: #fff;
-moz-border-radius: 2px;
border-radius: 2px;
-webkit-border-radius: 2px;
-moz-box-shadow: 0 1px 0 #fff;
-webkit-box-shadow: 0 1px 0 #fff;
box-shadow: 0 1px 0 #fff;
max-width: 1107px;
}

#image img
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:51:43.860

请尝试`float:left`您的父 div

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T01:53:49.817

您可以尝试设置`#image`为`display: inline-block`. 我可能是错的，但我“认为”这就是你要找的。

这是一个链接示例：http: [//jsfiddle.net/RBWYL/](http://jsfiddle.net/RBWYL/)

# mysql - 具有多个 DISTINCT 的 SQL 语句

> ID：13617430
> 
> 赞同：2
> 
> 时间：2012-11-29T01:33:15.923
> 
> 标签：mysql, sql, distinct

我尝试构建的查询将使用**tableA**中的以下列：

*   姓名
*   描述

查询应提供以下过滤器：

*   从**tableA**中选择不重复的名称
*   仅选择没有重复描述的名称
*   选择不包含字符串的描述：“任何”或“已删除”
*   按名称排序

这是我目前的陈述，除了重复的描述之外，它给了我一切。如何将此添加到我当前的声明中？

> 选择
> 
> ```
>  DISTINCT name FROM tableA
> 
>  WHERE description NOT LIKE 'Any%'
> 
>  AND description NOT LIKE 'Deleted%' 
> ```
> 
> 按名称订购

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:51:04.103

您应该尝试使用自联接。
使用左侧表格过滤以“任何”或“已删除”开头的描述。由于您要消除具有重复描述的行，因此您只选择右侧具有相同描述但找不到不同名称的匹配行的结果：

```
SELECT
    leftSide.name,
    leftSide.description
FROM
    tableA as leftSide
    LEFT JOIN tableA as rightSide ON (
        leftSide.description = rightSide.description AND
        leftSide.name <> rightSide.name
    )
WHERE
    rightSide.description IS NULL AND
    leftSide.description NOT LIKE 'Any%' AND
    leftSide.description NOT LIKE 'Deleted%'
GROUP BY
    leftSide.name, leftSide.description
ORDER BY
    leftSide.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T07:24:31.143

SELECT t.name FROM tableA AS t GROUP BY t.name HAVING COUNT(*)=1 AND t.description NOT LIKE 'Any%' AND t.description NOT LIKE 'Deleted%' ORDER BY t.name;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T01:41:32.970

```
SELECT

 DISTINCT name FROM tableA

 WHERE description NOT LIKE 'Any%','Deleted%'

ORDER BY name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T01:42:03.687

这会是您正在寻找的解决方案吗？

参考：[SQLFIDDLE](http://sqlfiddle.com/#!2/dd670/2)

询问：

```
select distinct name, des
from data
where des not like '%any%'
and des not like '%delete%'
order by name ASC; 
```

结果：

```
NAME    DES

mary    yeah all or none
tim     yeah all or none
you     did you see he is in 
```

# android - Android中1920*1080会使用哪个res文件夹？

> ID：13617431
> 
> 赞同：2
> 
> 时间：2012-11-29T01:33:29.927
> 
> 标签：android, dpi, hdpi, highdpi

FHD（全高清）为 1920*1080。

FHD 中将使用哪个 res 文件夹，应设置什么 dpi 值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T04:23:35.247

由`Smallest width`制造商配置，因此可能会有所不同。例如，Nexus 7 和 Kindle Fire HD 的屏幕分辨率都是 1280x800，但 N7 的最小宽度是 600dp，而 Kindle Fire HD 是 533dp。

这是一种计算方法：

`If 480x800 is mdpi(160) for 5 inch device, the screen dpi(screenDPI) of the device with resolution 1080X1920 is 160*(1080/480)=360 (NOTE: manufacturer might change this number). Then the smallestWidth = 1080/(screenDPI/160).`

使用[配置](http://developer.android.com/reference/android/content/res/Configuration.html)查找设备的所有信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T01:50:40.793

这取决于屏幕尺寸，因为具有 FHD 的 7' 屏幕不会具有与具有 FHD 的 17' 屏幕相同的 dpi。要知道 DPI，我使用这个计算器：

[http://members.ping.de/~sven/dpi.html](http://members.ping.de/~sven/dpi.html)

对于文件夹，请尝试实际的谷歌文档，它非常完整：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

希望能帮助到你！

# php - mysqli_fetch_assoc (& PDO fetch assoc) 将数字存储为字符串

> ID：13617436
> 
> 赞同：1
> 
> 时间：2012-11-29T01:33:40.527
> 
> 标签：php, ajax, json, pdo, mysqli

像往常一样，尽我的职责到处寻找溶胶，但无济于事。

mysqli_fetch_assoc （显然）将我的数字存储为字符串。

通常情况下，我可能不太在意，但我的网站几乎 100% 使用 ajax，而且它会移动大量数据，所以所有这些 json " 开始加起来。

如果我只是抓取一个列值，我可以 intval，但我想抓取具有相关列名的整行。

有没有办法让 mysqli_fetch_assoc（和 PHP PDO 的 fetch assoc）将数字存储为数字？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:42:50.597

MySQL 可以存储 64 位数字和无符号数字，PHP 的`int`类型默认不支持这两种数字。如果您尝试从数据库中获取溢出`int`PHP 中的变量的数值数据，您将丢失信息。这就是 PHP 数据库客户端将数字作为字符串获取的原因。

回复您的评论：

是的，如果您担心 JSON 的大小，请在您的 PHP 应用程序中转换数据以获得更紧凑的表示。

尽管您说您将列名作为 JSON 的一部分进行传输，但字符串格式的整数和二进制整数之间的区别似乎并不是您的瓶颈。

我的意思是，将 string-int 转换为二进制 int 会将位数减少约 50%。但是，如果无论如何您都将列名作为字符串，那么您只会缩小 JSON 的一小部分。列仍然是字符串。

# javascript - Knockout.js - ObservableArray 不返回值

> ID：13617437
> 
> 赞同：1
> 
> 时间：2012-11-29T01:33:53.223
> 
> 标签：javascript, knockout.js

在淘汰赛中，这可以正常工作并正确绑定：

```
self.currentCustomer = ko.observable(new Customer("a","b","c","d","e","f","g","h")); 
```

但是，下面没有。

```
// Random list of customers
self.customers = ko.observableArray([
    new Customer("a","b","c","d","e","f","g","h")
]);

self.currentCustomer = ko.observable(self.customers[0]); 
```

我无法弄清楚为什么这不起作用。这种模式在我的应用程序的其他部分中正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:46:25.150

要访问数组，您必须打开它：

```
self.currentCustomer = ko.observable(self.customers()[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:30:23.813

补充一点，视图如下：

```
<p>Customer Name <input data-bind="value: currentCustomer().name" /></p> 
```

模型如下：

```
function AppViewModel() {
   // Random list of customers
self.customers = ko.observableArray([
    new Customer("ABC Corp.")
]);

self.currentCustomer = ko.observable(self.customers()[0]); // This is the correction.

}

function Customer(_name)
{
    this.name = ko.observable(_name);
}

// Activates knockout.js
ko.applyBindings(new AppViewModel()); 
```

# android - 由于 URI 无效，安装失败？仅在调试模式下安装？

> ID：13617440
> 
> 赞同：10
> 
> 时间：2012-11-29T01:34:19.587
> 
> 标签：android

android无法安装的可能原因是什么。无效的 URI？这指的是什么 URI，它以什么方式无效？它在调试模式下工作正常，但我无法让它在调试模式之外安装。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-29T06:28:31.540

这个错误可以指向很多不同的东西，并且有很多不同的修复。总结一下我收集的内容：

1.  Eclipse 的问题：清理项目，重建项目，重新启动 Eclipse。

2.  无效字符：删除 Eclipse 项目名称中的任何特殊字符。仅使用 [az] 和 [0-9] 甚至不使用 [ ]（空格）

3.  包含的 jar 中的错误：尝试不使用 jar 并查看它是否运行，是否以某种方式修复。
4.  清单包设置中的错误：在项目中右键单击 Eclipse -> Android 工具 -> 重命名应用程序包（重命名为类似的名称，您可以随时重命名）。
5.  设备问题：从设备中删除应用程序并尝试重新安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-23T07:33:13.430

上面的 ingyesid 基本上意味着您需要重构项目名称以不包含任何非 en/us 字符。然后，这将更改也不能有重音字母的 apk 文件名，例如；“ÖÄÅåäöééıßç....等”..（任何“res”资产都不能拥有这些）。我最近在做瑞典语时遇到了这个问题，请确保项目名称和所有文件名都是英文字符/数字。

- 但是，您可以将“res/values/Strings”中的 appname 变量设置为正确的国际字符。

这要么是一个错误，要么是代表 android 开发人员的一些短视。：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T11:11:35.080

/data/local 目录没有写入权限，在“其他人”上执行。

您必须使用超级用户应用程序并修改 /data/local 的权限。

将它们设置为 rwxrwxrwx 将起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T22:14:27.247

没有重音或不寻常的字符。我有口音，apk的名称在安装时产生了一个错误，去掉勾号就可以了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-08T07:44:22.673

如果您放置了无效的项目名称，例如**MyAPP_$33**，则会出现此问题，因此只允许使用字母 [a---z] 和数字 [0,1,2...]。 ***项目命名时不允许使用特殊字符***

# c++ - 设置 GTKEventBox 的大小

> ID：13617446
> 
> 赞同：2
> 
> 时间：2012-11-29T01:35:00.157
> 
> 标签：c++, gtk

我有`GtkHBox`2 件物品。在里面，在左边，我有`GtkHBox`4 个项目。前两个是`GtkEventBox`'s，然后是 a `GtkHScale`，最后是 a `GtkLabel`。

这两个`GtkEventBox`每个都包含一个`GtkVBox`带有两个项目，一个图像和一个标签（使用，`GtkEventBox`以便我可以捕获图像上的点击事件）。不幸的是，我似乎无法弄清楚如何为它们设置宽度。目前，它看起来像这样：

![current_look](../Images/ae09f7925ce4d7e6371c277aab800ec4.png)

但我希望选择和平移部分更窄。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:07:08.793

确保将事件框打包到您`GtkHBox`的`expand`和`fill`参数设置为 false 的情况下。

# php - 处理类中的错误，我应该使用什么方法？

> ID：13617447
> 
> 赞同：0
> 
> 时间：2012-11-29T01:35:06.763
> 
> 标签：php, class, error-handling

自 2000 年以来我一直在处理 PHP，但不是很活跃，而且我对 PHP5 的了解非常糟糕。最近，我在休息了 5 年之后重新对 Web 开发产生了兴趣，并开始着手一个项目。我为那个变得相当大的项目编写了一个类，但到目前为止还没有任何特定的错误处理。

该课程的目的是解析具有特定布局的 HTML 文件并处理其数据，这或多或少是我重新投入游戏的训练练习。我现在开始重写这个类，我决定是时候对错误处理更专业一点，而不是简单地使用 die()，到目前为止我一直在使用它。我想我们都同意这是一个可怕的方向。我希望该课程完全独立于项目，以便我可以将其分发给任何想要使用它的人。

我要解析的 HTML 文件包含具有特定边框颜色的表格、具有特定 bgcolors 的 trs，但元素的数量是动态的。为了验证 HTML 文件是否确实具有这种特定模式，我有以下示例（伪）代码

```
public function Validate() {

    $tables = getall('table', $this->data);

    foreach ($tables as $table) {
        if ($table->bordercolor != 'navy' && $table->cellspacing != 0) {
            // Error
        }

        foreach ($tables->tr as $tr) {
            if ($tr->bgcolor != '#fff') {
                // Error
            }
        }
    }
    return true;
} 
```

它说 // 错误的地方，HTML 布局没有检出，我的班级不应该尝试解析它。传统上我会这样做：

```
if ($table->bgcolor != '#fff') {
    $this->error = 'Invalid HTML layout';
    return false;
} 
```

从我调用我将使用的方法的地方

```
if ($class->Validate() === false) {
    exit_with_error($class->GetError()); // Simple return of $this->error
} 
```

我一直认为这是一种不错的方法，因为它很简单。然而，这也是一个缺点，因为除了文本本身之外，它并没有真正提供任何关于错误的深入信息。我看不到错误是在哪里触发的，调用了哪些方法等。

自从我恢复我的 PHP 爱好以来，我发现了异常。我对它们的问题只是我不明白如何正确使用它们。如果我应该使用它们。我希望我的课程是可移植的；我可以使用异常来处理错误吗？如果是，我如何传达错误（即翻译我的传统错误处理）？或者也许有更好的方法可以采取，我不知道。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:48:39.917

我认为您的操作方式没有问题，但是如果您想深入研究异常，请学习如何使用 try/catch 语句。通常它会是这样的：

```
try {
  //some code that may cause an error here
} catch (Exception e) {
  //if a error is found, or an exception is thrown in the try statement, whatever here will execute
  //you can get the error message by using e->getMessage()
} 
```

你可以在这里阅读更多信息：http: [//php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:58:00.140

你当然在思考正确的道路。通常，我喜欢将类设计与错误处理逻辑分开。换句话说，我不想`$this->error = 'something'`在类中有一堆逻辑，为什么要向每个类添加额外的代码来存储/处理/报告错误。

现在您将了解异常与错误以及何时使用它们。这可能是一个有争议的话题，但我个人的偏好主要是在代码中遇到无法恢复或没有逻辑处理的点的情况下抛出异常。我通常使用的一个很好的例子是在任何需要某种类型或值的参数的类方法的开头抛出异常。像这个例子：

```
public method set_attribute($value) {
   if (empty($value)) {
      throw new Exception('You must send me something');
   } else if (!is_string($value)) {
      throw new Exception("You sent me something but it wasn't the string I was expecting.");
   }
   // method logic here
} 
```

在这里，如果调用者没有给我们一个非空字符串，我们会抛出一个异常，因为我们没有预料到这一点，如果没有正确的值，我们不能保证方法的成功完成。根本没有理由继续使用该方法。我们向调用者发送异常消息，其中包含有关问题的消息。希望他们在 try-catch 块中调用此方法，并且可以优雅地处理异常并将其沿调用堆栈向上传递。如果没有，您的代码刚刚停止执行，因为未捕获的异常导致致命错误（在测试中很容易捕获）。

触发错误，老实说，我使用得更少，通常更多地用于调试和警告目的。这方面的一个示例可能是您仍想使用的已弃用方法，但您想给用户一个错误

```
public function old_method() {
   trigger_error('This method had been deprecated. You should consider not using it anymore.'. E_USER_WARNING);
   // method logic
} 
```

当然，您可以自己在这里触发任何级别的 E_USER 类警告。

就像我说的，我倾向于更多地使用异常，因为它们也很容易扩展，以便与日志记录等一起使用。我几乎总是会有一个自定义 Exception 类，它从 PHP 的基本 Exception 类扩展而来，它还提供日志记录等。

要考虑的另一件事是全局错误处理和异常处理。我强烈建议使用这些并将它们作为任何新项目中的第一行代码。同样，它可以让您更好地控制记录错误/异常的方式，而不是默认情况下获得的信息。

# javascript - 是什么让编辑器将 textarea 上的数据粘贴为 html -like 在丰富的所见即所得编辑器中？

> ID：13617450
> 
> 赞同：8
> 
> 时间：2012-11-29T01:35:16.940
> 
> 标签：javascript, html, wysiwyg

我想从网站复制/粘贴 html 并将它们存储在 mysql 数据库中。为此，我检查了 CKEditor，它允许我粘贴 html，甚至是 word 文档，并为它生成 html 代码。由于我想要的只是将粘贴的数据“生成”为 html，而不是使用像 CKEditor 这样的完整的所见即所得编辑器，我想编写一些代码（可能使用 jquery）来将粘贴的数据转换为具有 html 标记和格式。

为了实现这个功能，这些在线编辑器是做什么的？他们如何将剪贴板数据转换为 html 代码？为什么我在此处将 html 格式的文本或 div 或按钮粘贴到此 textarea 并在所见即所得编辑器上粘贴图像和适当大小的 div 时只得到文本？

编辑器是否访问剪贴板数据并对其进行操作？剪贴板是否以有组织的方式保存格式数据，允许“CKEditor”或其他人对其进行操作？

这可以用 jQuery 完成吗？还是我们也需要服务器端代码？

如果你能对这个主题有所了解，我将不胜感激。我只想知道方法，以便我可以为它编写适当的代码。

供参考：[http ://ckeditor.com/demo](http://ckeditor.com/demo)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T02:05:22.950

这是适用于 Chrome、IE9 和 Safari 的粗略演示：http: [//jsfiddle.net/SN6PQ/2/](http://jsfiddle.net/SN6PQ/2/)

```
<div contenteditable="true" id="paste-target">Paste Here</div>​

$(function(){
    $("#paste-target").on("paste", function(){
        // delay, or else innerHTML won't be updated
        setTimeout(function(){

            // option 1 - for pasting text that looks like HTML (e.g. a code snippet)
            alert($("#paste-target").text());

            // option 2 - for pasting actual HTML (e.g. select a webpage and paste it)
            alert($("#paste-target").html());
        },100);
    });        
});​ 
```

不确定这是否是您所追求的，但它会在粘贴时提醒 HTML。请记住，内容可编辑元素可能会更改粘贴时的标记。

# html - 从网络解析 HTML5 EventSource 流

> ID：13617458
> 
> 赞同：1
> 
> 时间：2012-11-29T01:35:51.560
> 
> 标签：html, parsing, server-sent-events

我研究了 HTML5 EventSource 规范，但不知道如何在接收到的数据结束时解析和处理回车。

应用程序接收由行组成的数据流。每行可以由 \r\n、\n 或 \r 终止。在空白行上，事件应被视为已准备好并已向侦听器触发。

```
data: foobar\r\n
id: 1\r\n
\r\n 
```

相同内容的同等有效事件

```
data: foobar\n
id: 1\r\n
\r 
```

完整规范在这里，[http](http://dev.w3.org/html5/eventsource/) ://dev.w3.org/html5/eventsource/ 第 6 章描述了输入的 BNF。

问题是在接收数据结束时看到回车。现在，据我所知，正确的解析方法是进行最长匹​​配搜索，然后等待下一批数据。问题是，如果 \r 确实是空行标记，则在下一批数据到达并且解析器有足够的数据尝试最长匹配之前，不会触发该事件。

当前数据批次

```
data: foobar\r\n
id: 1\r\n
\r 
```

下一批数据

```
\n
data: foobar2\r\n
id: 1\r\n
\r\n 
```

替代案例。下一批数据

```
data: foobar2\r\n
id: 1\r\n
\r\n 
```

这在传统解析中不会有问题，但它在 EventSource 中，因为我需要尽快触发事件，所以如果实现等待下一个数据批次获得最长匹配，如果发送方使用单个字符可能会等待很长时间\r' 作为空行标记，暂时不会发送任何其他内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T09:43:06.383

有趣的问题！我假设您没有使用浏览器，而是编写自己的客户端？（如果编写服务器端代码，请始终只发送 \n 或只发送 \r ！！）

解决方案是从套接字读取时，将任何“\r\n”序列转换为“\r”。换句话说，一旦你得到“\r”，你就可以把它当作行尾，做你需要的任何处理，并设置一个`CR_just_received`标志。如果你收到一个“\n”`CR_just_received==true`然后悄悄地吞下它。确保`CR_just_received`在收到除 \r 之外的任何字节时清除。

# c++ - int* 到 int 无效转换

> ID：13617461
> 
> 赞同：2
> 
> 时间：2012-11-29T01:36:24.880
> 
> 标签：c++, arrays

尝试使用 1d 和 2d 数组为 CS 的分配制作掷骰子并遇到问题

到目前为止我所拥有的是这个（是的，我知道布尔结构很糟糕）：

```
 #include <iostream>
  #include <ctime>
  #include <cstdlib>
  #include <iomanip>

  using namespace std;

  int main()
  {
int g[5][5] = {{}};
int d[11] = {};

int die1;
int die2;

srand(time(0));

for ( int roll = 1; roll <= 36000; ++roll )
{
    die1 = 1 + rand() % 6;
    die2 = 1 + rand() % 6;

    if (die1 == 1 && (die2 == 1))
        g[0][0] += 1;

    if (die1 == 1 && die2 == 2)
        g[0][1] += 1;

    if (die1 == 1 && die2 == 3)
        g[0][2] += 1;

    if (die1 == 1 && die2 == 4)
        g[0][3] += 1;

    if (die1 == 1 && die2 == 5)
        g[0][4] += 1;

    if (die1 == 1 && die2 == 6)
        g[0][5] += 1;

    if (die1 == 2 && die2 == 1)
        g[1][0] += 1;

    if (die1 == 2 && die2 == 2)
        g[1][1] += 1;

    if (die1 == 2 && die2 == 3)
        g[1][2] += 1;

    if (die1 == 2 && die2 == 4)
        g[1][3] += 1;

    if (die1 == 2 && die2 == 5)
        g[1][4] += 1;

    if (die1 == 2 && die2 == 6)
        g[1][5] += 1;

    if (die1 == 3 && die2 == 1)
        g[2][0] += 1;

    if (die1 == 3 && die2 == 2)
        g[2][1] += 1;

    if (die1 == 3 && die2 == 3)
        g[2][2] += 1;

    if (die1 == 3 && die2 == 4)
        g[2][3] += 1;

    if (die1 == 3 && die2 == 5)
        g[2][4] += 1;

    if (die1 == 3 && die2 == 6)
        g[2][5] += 1;

    if (die1 == 4 && die2 == 1)
        g[3][0] += 1;

    if (die1 == 4 && die2 == 2)
        g[3][1] += 1;

    if (die1 == 4 && die2 == 3)
        g[3][2] += 1;

    if (die1 == 4 && die2 == 4)
        g[3][3] += 1;

    if (die1 == 4 && die2 == 5)
        g[3][4] += 1;

    if (die1 == 4 && die2 == 6)
        g[3][5] += 1;

    if (die1 == 5 && die2 == 1)
        g[4][0] += 1;

    if (die1 == 5 && die2 == 2)
        g[4][1] += 1;

    if (die1 == 5 && die2 == 3)
        g[4][2] += 1;

    if (die1 == 5 && die2 == 4)
        g[4][3] += 1;

    if (die1 == 5 && die2 == 5)
        g[4][4] += 1;

    if (die1 == 5 && die2 == 6)
        g[4][5] += 1;

    if (die1 == 6 && die2 == 1)
        g[5][0] += 1;

    if (die1 == 6 && die2 == 2)
        g[5][1] += 1;

    if (die1 == 6 && die2 == 3)
        g[5][2] += 1;

    if (die1 == 6 && die2 == 4)
        g[5][3] += 1;

    if (die1 == 6 && die2 == 5)
        g[5][4] += 1;

    if (die1 == 6 && die2 == 6)
        g[5][5] += 1;
}

d[1] = g[0][0];
d[2] = g[1][0] + g[0][1];
d[3] = g[2][0] + g[0][2] + g[1][1];
d[4] = g[3]{0} + g[0][3] + g[1][2] + g[2][1];
d[5] = g[4][0] + g[0][4] + g[2][2] + g[3][1] + g[1][3];
d[6] = g[5][0] + g[0][5] + g[4][1] + g[1][4] + g[3][2] + g[2][3]; 
```

尝试使用 gnu 进行编译，并在底部开始 d[4] = ... 时出现此错误。

```
 error: invalid conversion from int* to int [-fpermissive] 
```

任何帮助将不胜感激，我真的需要完成这项任务......谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T01:39:22.047

这可能是一个错字，但下一行中的大括号是否正确（为清楚起见加粗）？

> d[4] = g[3] **{0}** + g[0][3] + g[1][2] + g[2][1];

应该是线吗？

> d[4] = g[3] **[0]** + g[0][3] + g[1][2] + g[2][1]；

# c# - 在 C# 中以不规则间隔调度一系列任务

> ID：13617464
> 
> 赞同：0
> 
> 时间：2012-11-29T01:36:40.730
> 
> 标签：c#, multithreading, timer, scheduled-tasks

假设我有一个文件，其中列出了要执行的任务以及执行它们的时间间隔，例如：

```
Task_A
2 seconds
Task_B
10 seconds
Task_C
1 minute
Task_A
... 
```

因此，当这个列表被读入，然后被允许执行时，它会执行 Task_A，等待 2 秒，执行 Task_B，等待 10 秒，以此类推。

我该怎么做？我对 System.threading.timer 进行了一些研究，但这似乎是在设定的时间间隔内执行重复任务，但在这种情况下，我正在阅读一个文件，其中列出了要做什么以及在你这样做之前需要多长时间上面（一种不同的语法，但这个更容易解释）。

这个函数在后台工作程序中，所以我可以做一个 Thread.Sleep(Timespan) 并且我的 GUI 没有任何问题，但这感觉就像用铁砧敲钉子一样。作为 System.threading.timer 的 OnTimedEvent 的一部分，我也可以有一个改变它自己的间隔的部分，但我不确定这是否是一个好的做法，或者它是否会起作用。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:40:04.493

System.Timers.Timer 可以提供帮助。

首先，任务的基本类，您可能会通过数据库或其他方式拥有它。

```
public class Task
{
    public Task()
    { 

    }

    public Task(String tName, Int32 iInterval, Int16 iPriority)
    {
        this.taskName = tName;
        this.nextInterval = iInterval;
        this.priority = iPriority;
    }

    private String taskName = String.Empty;

    public String TaskName
    {
        get
        {
            return this.taskName;
        }
        set
        {
            this.taskName = value;
        }
    }

    private Int32 nextInterval = 1;

    public Int32 NextInterval
    {
        get
        {
            return this.nextInterval;
        }
        set
        {
            this.nextInterval = value;
        }
    }

    private Int16 priority = 1;

    public Int16 Priority
    {
        get
        {
            return this.priority;
        }
        set
        {
            this.priority = value;
        }
    }
} 
```

然后是如何执行部分。

```
public class ExecuteTasks
{
    private System.Timers.Timer myTimer = new System.Timers.Timer();
    private Int32 TaskIndex = 0;
    private Int32 TaskCount = 3;

    protected void StartExecution()
    {
        myTimer.Interval = 1;
        myTimer.Elapsed += new System.Timers.ElapsedEventHandler(myTimer_Elapsed);
        myTimer.Start();
    }

    void myTimer_Elapsed(object sender, EventArgs e)
    {
        myTimer.Stop();

        if (TaskIndex < TaskCount)
        {             
            Task aTask = GetTasks()[TaskIndex++];
            StartTask(aTask.TaskName);
            SetNextTaskTimer(aTask.NextInterval);
        }
    }

    void SetNextTaskTimer(Int32 Seconds)
    {   
        myTimer.Interval = (Seconds * 1000) - DateTime.Now.Millisecond - 1;//Interval is set in miliseconds
        myTimer.Start();
    }

    void StartTask(String TaskName)
    {
        ProcessStartInfo objStartInfo = new ProcessStartInfo();
        objStartInfo.FileName = TaskName;

        Process objProcess = new Process();
        objProcess.StartInfo = objStartInfo;
        objProcess.Start();
    }

    //You will be reading your tasks from your database or a file
    List<Task> GetTasks()
    {
        List<Task> lstTasks = new List<Task>();

        lstTasks.Add(new Task("Task A", 2, 1));
        lstTasks.Add(new Task("Task B", 10, 2));
        lstTasks.Add(new Task("Task C", 60, 3));

        return lstTasks.OrderBy(le => le.Priority).ToList();
    }
} 
```

当给定时间过去时，我已经启动了一些进程。（您需要为该过程的开始提供正确的路径。即类似

```
ProcessStartInfo objStartInfo = new ProcessStartInfo();
objStartInfo.FileName = "C:\\Windows\\notepad.exe"; 
```

而不仅仅是任务名称。

最后触发执行部分。

```
ExecuteTasks iExecute = new ExecuteTasks();
iExecute.StartExecution(); 
```

对于多线程，您可以使用适合您需要的锁定机制、监控类等。IE

```
lock(obj)//lock on an object
{
    ExecuteTasks iExecute = new ExecuteTasks();
    iExecute.StartExecution();
} 
```

# php - MySQL 值作为 PHP 会话

> ID：13617465
> 
> 赞同：1
> 
> 时间：2012-11-29T01:36:47.830
> 
> 标签：php, mysql, session, mysqli

我有一个注册脚本，其中用户 ID 在注册后保存为会话变量，并且用户被重定向到他们的主页。由于某种原因，用户 ID 未存储在会话变量中。这个完全相同的脚本在另一个项目上工作，我只是拿了这个项目并更改了数据库连接设置，现在它不工作了。

这是注册脚本：

```
 mysqli_connect($db_host, $db_user, $db_pass) OR DIE (mysqli_error());
    // select the db
    mysqli_select_db ($link, $db_name) OR DIE ("Unable to select db".mysqli_error($db_name));

     // our sql query
    $sql = "INSERT INTO seekers (first_name, last_name, username, email, password, salt) VALUES ('$firstName', '$lastName', '$username', '$email', '$hashedPW', '$salt');";

    //save the updated information to the database          
    $result = mysqli_query($link, $sql) or die("Error in Query: " . mysqli_error($link));
    if (!mysqli_error($link)) {

        $row = mysqli_fetch_assoc($result);
        $_SESSION['user_id'] = mysqli_insert_id($link);
        $_SESSION['loggedin'] = TRUE;
        header("Location: ../index.php");
    } 
```

这是受保护页面上的会话检查和数据库查询：

```
session_start();

if(isset($_SESSION['loggedin']) && $_SESSION['user_id'] != 'user_id') {

    include_once('includes/user.header.php');

    //set user_id
    $user_id = $_SESSION['user_id'];

    //include the logged in user header
    include_once('includes/user.header.php');

    //select user information according to their logged in user_id
    $sql = $link->query('SELECT * FROM seekers WHERE id = "'.$user_id.'"');
    $row = mysqli_fetch_assoc($sql);

   //create piece name together
   $firstName = $link->real_escape_string($row['first_name']);
   $lastName = $link->real_escape_string($row['last_name']);
   $fullName = $firstName. " " .$lastName;

  //get username
  $username = $link->real_escape_string($row['username']); 
```

当我被重定向到 index.php 页面时，一切看起来都很好，除了没有从数据库中查询任何用户信息。

谁能看到这里有什么问题？我知道这一定是一件小事，我只是在看它。

请任何帮助将不胜感激。

**编辑：**所有信息也已成功存储在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:07:19.690

您正在尝试在没有选择查询的情况下使用 user_id ...确实您必须获取最后一个插入 ID

换行；

```
$_SESSION["user_id"]=mysql_insert_id(); 
```

和

```
if (!mysqli_error($link)) 
```

应该

```
 if (!mysqli_error($result)) 
```

和

```
 $sql = $link->query('SELECT * FROM seekers WHERE id = "'.$user_id.'"'); 
```

至

```
 $sql = $link->query('SELECT * FROM seekers WHERE user_id = "'.$user_id.'"'); 
```

# php - 如果不通过引用传递变量，如何覆盖？

> ID：13617467
> 
> 赞同：0
> 
> 时间：2012-11-29T01:36:55.193
> 
> 标签：php, oop, variables, object

这更像是一个讨论主题，而不是“帮助我”的问题。

我刚刚遇到一个奇怪的问题。当未在任何地方传递时，变量（对象）将被覆盖。

例子;

```
var_dump($node->title);
$entity = $server->pull($item);
var_dump($node->title); 
```

两个 var_dump 显示两个不同的值。

$item 是一个不相关的字符串。

在这一点上，我认为 'pull()' 方法的内容是不相关的——我不好奇它在哪里被覆盖，我很好奇它是如何被覆盖的。

除非已将变量传递给方法，否则 PHP 如何更改变量？

我的函数中没有引用，节点直接传递；

```
function my_function($node) { 
```

~~即使我克隆了我的对象~~ 即使我重命名了 var

```
$my_node = $node; 
```

~~克隆的对象*仍然*被覆盖。~~ 重命名的对象*仍然*被覆盖（即，它与名称无关。）

我很想知道这是怎么可能的。pull() （或相关方法）如何覆盖尚未给出的变量？

我需要重申；我不关心值**在哪里**被改变，我关心当它没有被传递给方法时它是**如何被改变的。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:19:32.413

这样做：

```
$my_node = $node; 
```

实际上并不克隆对象。如果更改 $my_node，它仍然会反映在 $node 中，因为两者都只是指向对象的指针，请参阅[http://www.php.net/manual/en/language.oop5.references.php](http://www.php.net/manual/en/language.oop5.references.php)

因此，可能某些东西正在作用于 $node 或 $node 的副本，因此会更改对象。

从上面的链接看这个例子：

```
class A {
    public $foo = 1;
}  

$a = new A;
$b = $a;     // $a and $b are copies of the same identifier
             // ($a) = ($b) = <id>
$b->foo = 2;
echo $a->foo."\n"; 
```

即使我们做了 $b = $a，如果我们改变 $b 的属性，它也会改变 $a 的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:48:04.333

所以，PHP5 中面向对象的一个​​重要部分是对象**总是**通过引用传递，我完全忘记了这一点。

这使得被调用的方法很可能通过引用访问我的对象，并使这个问题看起来很愚蠢。:)

[http://php.net/manual/en/language.oop5.references.php](http://php.net/manual/en/language.oop5.references.php)

# java - 使用 Spring 发送电子邮件

> ID：13617468
> 
> 赞同：2
> 
> 时间：2012-11-29T01:37:09.933
> 
> 标签：java, email, spring-mvc, jetty

我正在用 Spring MVC 和 Jetty 做一个项目。

我想从应用程序发送电子邮件。这是我到目前为止所拥有的：

（尝试发送电子邮件的班级）

```
package horaire;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.MailSender;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.stereotype.Service;

@Service("mailService")
public class Courriel {

@Autowired
private MailSender mailSender;

@Autowired
private SimpleMailMessage mailMessage;

public Courriel(String A, String De, String sujet, String message) {
    mailMessage = new SimpleMailMessage();

    mailMessage.setTo(A);
    mailMessage.setSubject(sujet);
    mailMessage.setFrom(De);
    mailMessage.setText(message);

}
public void Envoyer()
{
    mailSender.send(mailMessage);
}

} 
```

（使用）

```
Courriel message = new Courriel("myemail@gmail.com","myemail@gmail.com","Hi","My text");

message.Envoyer(); 
```

但我得到这个错误：

```
HTTP ERROR 500

Problem accessing /horaire. Reason:

Server Error

Caused by:

java.lang.NullPointerException
at horaire.Courriel.Envoyer(Courriel.java:30)
at ca.ulaval.projetspring.HomeController.horaire(HomeController.java:53)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:648)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:559)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
at org.eclipse.jetty.server.Server.handle(Server.java:365)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:627)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:51)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
at java.lang.Thread.run(Thread.java:722) 
```

我不明白为什么它是空的。我必须设置其他参数吗？我必须修改其他文件吗？（XML 之一？）

**更新：**我不知道它是否改变了什么，我正在使用 Spring MVC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:43:16.417

您需要为 SMTP 服务器、用户名、密码等设置 MailSender 的属性。 [这是一个示例](http://www.mkyong.com/spring/spring-sending-e-mail-via-gmail-smtp-server-with-mailsender/)。

# php - Mysql 在指定时间范围内按用户 id 抓取最后一次更新

> ID：13617469
> 
> 赞同：1
> 
> 时间：2012-11-29T01:37:16.737
> 
> 标签：php, mysql, greatest-n-per-group

我有两个表 tc_users 和 tc_timeclock。我想获取每个活跃用户的当前状态。但只有那些在过去 12 小时内进行了更新（打卡或打卡）的人。我已经弄清楚如何在过去 12 小时内获取所有更新，但不知道如何将其缩小到每个用户的最后一个。

这是我的表：

tc_users：

```
user_id | first_name | last_name | active
-----------------------------------------
1 | Frank   | Zappa     | 1
2 | John    | Mcneely   | 1
3 | Bill    | Mckenna   | 1
4 | Mark    | langdon   | 1
5 | Steve   | Mcalister | 0
6 | William | Stevens   | 1
7 | John    | Jones     | 0 
```

tc_timeclock：

```
tc_id | user_id | status | time_stamp
-------------------------------------
1  | 1 | IN  | 2012-11-28 09:00:25
2  | 2 | IN  | 2012-11-28 09:01:25
3  | 3 | IN  | 2012-11-26 09:03:25
4  | 4 | IN  | 2012-11-28 09:21:25
5  | 5 | IN  | 2012-11-28 09:01:12
6  | 6 | IN  | 2012-11-28 09:47:13
7  | 7 | IN  | 2012-11-12 09:00:22
8  | 7 | OUT | 2012-11-12 09:03:28
9  | 5 | OUT | 2012-11-28 09:21:25
10 | 6 | OUT | 2012-11-28 11:47:13
11 | 3 | OUT | 2012-11-26 11:03:25
12 | 2 | OUT | 2012-11-28 11:01:25
13 | 1 | OUT | 2012-11-28 11:27:25
14 | 4 | OUT | 2012-11-28 11:21:25
15 | 4 | IN  | 2012-11-28 12:21:25
16 | 1 | IN  | 2012-11-28 12:27:25
17 | 3 | IN  | 2012-11-26 12:03:25
18 | 6 | IN  | 2012-11-28 12:47:13
19 | 2 | IN  | 2012-11-28 12:01:25
20 | 1 | OUT | 2012-11-28 17:27:25
21 | 4 | OUT | 2012-11-28 17:21:25
22 | 3 | OUT | 2012-11-26 17:03:25
23 | 2 | OUT | 2012-11-28 17:01:25 
```

* * *

到目前为止，这是我提出的查询：

如果现在 = 2012-11-28 18:00:00

```
SELECT first_name, last_name, status, time_stamp 
FROM tc_timeclock 
  INNER JOIN tc_users 
    ON tc_timeclock.user_id = tc_users.user_id 
WHERE tc_users.active = 1 
  AND tc_timeclock.time_stamp BETWEEN '2012-11-28 06:00:00' AND '2012-11-28 18:00:00' 
```

这将显示过去 12 小时内的所有内容，如下所示：

```
first_name | last_name | status | time_stamp
-----------------------------------------------------
Frank      | Zappa     | IN     | 2012-11-28 09:00:25
John       | Mcneely   | IN     | 2012-11-28 09:01:25
Mark       | langdon   | IN     | 2012-11-28 09:21:25
William    | Stevens   | IN     | 2012-11-28 09:47:13
William    | Stevens   | OUT    | 2012-11-28 11:47:13
John       | Mcneely   | OUT    | 2012-11-28 11:01:25
Frank      | Zappa     | OUT    | 2012-11-28 11:27:25
Mark       | langdon   | OUT    | 2012-11-28 11:21:25
Mark       | langdon   | IN     | 2012-11-28 12:21:25
Frank      | Zappa     | IN     | 2012-11-28 12:27:25
William    | Stevens   | IN     | 2012-11-28 12:47:13
John       | Mcneely   | IN     | 2012-11-28 12:01:25
Frank      | Zappa     | OUT    | 2012-11-28 17:27:25
Mark       | langdon   | OUT    | 2012-11-28 17:21:25
John       | Mcneely   | OUT    | 2012-11-28 17:01:25 
```

* * *

我正在寻找的逻辑：获取过去 12 小时内每个活动用户的名字和姓氏、当前状态和记录状态的时间。

所以输出应该是：

```
first_name | last_name | status | time_stamp
Frank      | Zappa     | OUT    | 2012-11-28 17:27:25
John       | Mcneely   | OUT    | 2012-11-28 17:01:25
Mark       | langdon   | OUT    | 2012-11-28 17:21:25
William    | Stevens   | IN     | 2012-11-28 12:47:13 
```

用户 5 (Steve Mcalister) 和 7 (John Jones) 未激活，因此不会显示。

用户 3 (Bill Mckenna) 在过去 12 小时内没有任何活动，因此他也没有显示。

我错过了一些非常简单的东西吗？（我确定我是）

如果没有简单的解决方案，我有一个解决方法，我总是可以在 tc_users 表中添加两列：(tc_users.current_status 和 tc_users.status_time) 并简单地将它们与 tc_timeclock 表中的最后一个条目相同。

这样我可以很容易地选择它们，我不喜欢让数据冗余的想法，但如果我不需要的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:58:22.937

像这样的东西可能对你有用。

SQL：

```
SELECT `tc_users`.`first_name`, `tc_users`.`last_name`, `tc_timeclock`.`status`, `temp_table`.`last_updated`
  FROM `tc_users`
 INNER JOIN `tc_timeclock`
         ON `tc_users`.`user_id`=`tc_timeclock`.`user_id`
 INNER JOIN (
             SELECT `user_id`, MAX(`time_stamp`) AS `last_updated` FROM `tc_timeclock` GROUP BY `user_id`
            ) AS `temp_table`
         ON `tc_users`.`user_id`=`temp_table`.`user_id`
        AND `tc_timeclock`.`time_stamp`=`temp_table`.`last_updated`
 WHERE `tc_users`.`active`!=0
   AND `temp_table`.`last_updated`>(NOW() - INTERVAL 12 HOUR); 
```

出去：

```
+------------+-----------+--------+---------------------+
| first_name | last_name | status | last_updated        |
+------------+-----------+--------+---------------------+
| William    | Stevens   | IN     | 2012-11-28 12:47:13 |
| Frank      | Zappa     | OUT    | 2012-11-28 17:27:25 |
| Mark       | langdon   | OUT    | 2012-11-28 17:21:25 |
| John       | Mcneely   | OUT    | 2012-11-28 17:01:25 |
+------------+-----------+--------+---------------------+ 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:37:03.100

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/023e4/9)**

```
SELECT first_name, last_name, tml.status, tml.time_stamp 
FROM (SELECT * 
      FROM tc_timeclock tl
      WHERE tl.time_stamp = (SELECT MAX(time_stamp) 
                             FROM tc_timeclock
                             WHERE tl.user_id = user_id )) tml
  INNER JOIN tc_users 
    ON tml.user_id = tc_users.user_id 
WHERE tc_users.active = 1 
  AND tml.time_stamp BETWEEN '2012-11-28 06:00:00' AND '2012-11-28 18:00:00' 
```

结果：

```
| FIRST_NAME | LAST_NAME | STATUS |                      TIME_STAMP |
---------------------------------------------------------------------
|      Frank |     Zappa |    OUT | November, 28 2012 17:27:25+0000 |
|       John |   Mcneely |    OUT | November, 28 2012 17:01:25+0000 |
|       Mark |   langdon |    OUT | November, 28 2012 17:21:25+0000 |
|    William |   Stevens |     IN | November, 28 2012 12:47:13+0000 | 
```

# html - 如何在网页中居中 KineticJS 阶段

> ID：13617470
> 
> 赞同：2
> 
> 时间：2012-11-29T01:37:24.447
> 
> 标签：html, kineticjs

试图在网页中居中 KineticJS 阶段。

试过：

```
<div style="text-align: center">
  <div id="container"></div>
</div> 
```

但它集中在舞台的左侧，而不是舞台的中间。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:49:34.677

```
<div>
  <div id="container" style="width:600px;border:1px solid gray;margin:auto;height:200px;"></div>
</div> 
```

margin:auto 可以对齐这个 div 中心

# node.js - 节点应用程序之间的共享会话？

> ID：13617471
> 
> 赞同：9
> 
> 时间：2012-11-29T01:37:48.493
> 
> 标签：node.js, express, redis, session-state

我目前有两个独立的节点应用程序在两个不同的端口上运行，但共享相同的后端数据存储。我需要在两个应用程序之间共享用户会话，以便当用户通过一个应用程序登录时，他们的会话可用并且他们似乎已登录到另一个应用程序。在这种情况下，它是一个面向公众的网站和一个管理后端。

我们的设置如下：

*   带快递的节点
*   护照正被用于通过本地策略处理身份验证
*   我们使用 connect-redis 允许我们通过 redis 共享会话。
*   我们的域名如下所示：www.mydomain.com 和 adm.mydomain.com

两个应用程序的会话内容（和 redis）的配置是相同的：

```
session: {
    options: {
        secret: "my secret",
        cookie: {
            domain: "mydomain.com",
            maxAge:1000*60*60*24
        }
    },
    redis: {
        host: 'my host',
        maxAge: 86400000,
        secret: "my secret"
    }
} 
```

app.js 中会话内容的配置如下所示：

```
if ( app.settings.env === "production" ) {
    session.options.store = new RedisStore(session.redis);
}
app.use(express.session(session.options));
app.use(passport.initialize());
app.use(passport.session({ secret: 'a different secret' })); 
```

**我期望它做什么**：允许我们在两个应用程序之间的 cookie 中看到相同的会话 id。

*所以我的问题是*：如何设置 express、redis 和 passport，以便您可以在不同的子域之间共享会话？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-12T23:20:47.140

也许有点过时，但此时 Express-session 可以识别 cookie 的域选项。根据消息来源：

```
function session(options){
  var options = options || {}
  //  name - previously "options.key"
    , name = options.name || options.key || 'connect.sid'
    , store = options.store || new MemoryStore
    , cookie = options.cookie || {}
      ... 
```

这是用于设置cookie：

```
var Cookie = module.exports = function Cookie(options) {
  this.path = '/';
  this.maxAge = null;
  this.httpOnly = true;
  if (options) merge(this, options);
  ... 
```

所以，这样的事情将适用于当前的 1.10.1 master：

```
secret: "my secret",
    cookie: {
        domain: "mydomain.com", 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-24T20:38:48.677

Express-session 似乎无法识别 cookie 的“域”选项，因此您的问题。存储会话 ID 的 cookie 会自动绑定到每个应用程序的域，因此无法共享。

一种选择是编写您自己的单点登录模块以在 web 应用程序之间共享会话。它可能会在执行顺序的早期出现在 app.use() 声明中，并且会简单地创建一个单独的 cookie（这将是跨域的），创建一个单独的 SSO 会话 id，并将 SSO id 存储在这个新的 cookie 中. 之后，您只需根据需要交叉填充 req.session 和 req.sso-session。

# url - 仅通过 URL 提交网络表单？

> ID：13617474
> 
> 赞同：4
> 
> 时间：2012-11-29T01:38:10.640
> 
> 标签：url, http-post, url-parameters, forms, form-post

我不确定这是否属于这里，所以不要投反对票，只要让我知道是否是这样，我会迅速继续。

无论如何，有一个[网站](http://www.torec.net/)有一个搜索页面，当点击搜索按钮时，它不会在 URL 中包含搜索查询。

搜索某些内容后，页面被重定向到[`ssearch.asp`](http://www.torec.net/ssearch.asp)，但如上所述，查询不存在。

我的问题是是否有办法仅通过 URL 提交搜索值。

我想知道是否有办法伪造搜索提交按钮并根据表单字段名称通过 URL 发布搜索词。

输入框的名字是`search`，所以我试了这个网址：[http](http://www.torec.net/ssearch.asp?search=query) ://www.torec.net/ssearch.asp?search=query ，但是不行，服务器返回：

> 服务器错误。

需要明确的是，我不是在寻找服务器端解决方案，实际上也不是在寻找 HTML 解决方案，我只是希望能够在我的浏览器地址栏中粘贴一个普通的旧 URL 并在那里。

这可能吗？

**更新**

此链接不起作用：
[http ://www.torec.net/ssearch.asp?search=dark&page=1](http://goo.gl/6KZ1t)

虽然这个是：
[http ://www.torec.net/ssearch.asp?search=dark&page=2](http://goo.gl/FG9H8)

有什么办法绕过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:41:44.020

编辑：无法直接创建指向第一页的链接。但是，您可以通过创建表单轻松地将用户发送到第一页：

```
<form id="postForm" method="post" action="http://www.example.com/search">
    <input type="text" name="search" value="q">
</form> 
```

然后在用户单击伪链接时提交表单：

```
document.getElementById("postForm").submit(); 
```

这也可以通过在地址栏中输入 JavaScript 代码来完成：

`javascript:a=document.createElement("form");a.method="POST";a.action="http://www.torec.net/‌​ssearch.asp?search=dark&page=2";i=document.createElement("input");i.name="search";i.value="q";a.appendChild(inpu‌​t);a.submit();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:46:57.027

有时服务器会混淆 GET 和 POST 参数，如 PHP`$_REQUEST`哈希。但是，通常它们是分开的——并且期望其参数的服务器`multipart/form-data`可能根本不会查看 URL。在这种情况下，就像这里一样，您必须构造一个 POST 请求。在客户端，您可以通过 AJAX 或通过构建和发布表单来完成；在服务器端，您可以使用`curl`, 或库。你没有说你想用它做什么（以及你想在哪里使用它），所以你只是得到了一般的答案，恐怕。

编辑：这是 JavaScript 半解决方案。您必须已经在某个页面上（即不能在_blank 上使用它），而且我不确定它是否适用于所有浏览器。

```
javascript:d=document;f=d.createElement("form");h=d.createElement("input");f.setAttribute("method","post");f.setAttribute("enctype","application/x-www-form-urlencoded");f.setAttribute("action","http://www.torec.net/ssearch.asp");h.setAttribute("type","hidden");h.setAttribute("name","search");h.setAttribute("value","query");f.appendChild(h);d.body.appendChild(f);f.submit(); 
```

# extjs - Ext-JS 和 AMFPHP - 得到 Malformed Amf Packet 错误

> ID：13617475
> 
> 赞同：0
> 
> 时间：2012-11-29T01:38:25.040
> 
> 标签：extjs, amfphp

我有一个非常基本的连接测试设置，它在我使用 JSON ccontentType 时有效，但在我将其保留为默认值并仅请求字节数据时失败。我认为这一定是 AMFPHP 配置或服务器的错误或问题，不一定是 Ext-JS，这就是我主要将其标记为 AMFPHP 的原因。任何线索将不胜感激。提前致谢。

我的参数数组：

var amf_params = { serviceName: 'svcp' , methodName: 'fetchp' , 参数: [] };

**WORKS，以 JSON 格式返回数据集：**

```
Ext.Ajax.request({
            method: 'POST'
        ,   url: 'http://mysite.com/Amfphp/?contentType=application/json'
        ,   binary: true
        ,   params: JSON.stringify(amf_params)
        ,   success: function(response) {
            console.log('response as string: ' + JSON.stringify(response));
        }
}); 
```

控制台中的响应：

> [{"id":1,"TID":1,"updatedt":"2012-11-24 23:35:43","createdt":"2012-11-24 23:35:43","名字":"鲍勃" .... 等等。

**不工作，返回错误“格式错误的 Amf 数据包，连接可能已断开”**

```
Ext.Ajax.request({
            method: 'POST'
        ,   url: 'http://mysite.com/Amfphp/'
        ,   binary: true
        ,   params: JSON.stringify(amf_params)
        ,   success: function(response) {
                console.log('response as string: ' + JSON.stringify(response));
            console.log('responseText: ' + response.responseText);
        }
}); 
```

控制台中的响应（是的，带有时髦的字符 - 不打算将下面的任何内容加粗，只是不想编辑文本）：

`������/1/onStatus�null��C� faultCode����������faultString�1格式错误的 Amf 数据包，连接可能已断开。faultDetail#0 /home/public_html/Amfphp/核心/Amf/Deserializer.php(75)：Amfphp_Core_Amf_Deserializer->readHeaders()

# 1 /home/public_html/Amfphp/Core/Amf/Handler.php(92): Amfphp_Core_Amf_Deserializer->deserialize()

# 2 /home/public_html/Amfphp/Core/Gateway.php(187): Amfphp_Core_Amf_Handler->deserialize(Array, Array, '{"serviceName":...')

# 3 /home/public_html/Amfphp/index.php(34): Amfphp_Core_Gateway->service()

# 4 {main}�根原因�Amfphp_Core_Exception����`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:55:47.163

您看到的是 AMF，这是答案的默认格式。这意味着 Json 插件没有启动，要么因为它不存在，要么你以某种方式搞乱了调用。Javascript 示例是否有效？如果是这样，请尝试使用数据包嗅探器将您的代码发生的情况与它工作时发生的情况进行比较。如果没有，请回到这里。

# sql - 重写查询以使用子查询？

> ID：13617476
> 
> 赞同：0
> 
> 时间：2012-11-29T01:38:27.153
> 
> 标签：sql

我是一个真正的 SQL 菜鸟，但谁能告诉我如何让这个查询使用“子查询”来代替？...而不是加入我猜我现在正在做的表：

```
select Produkt.Namn from Produkt, Kund, InkOrder
where Produkt.ProdId = InkOrder.ProdId 
AND InkOrder.KundId = Kund.KundId
AND InkOrder.Datum = '2011-09-24'
AND Kund.Namn = 'Allstad' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:45:36.490

让我们首先使用连接重写查询：

```
SELECT Produkt.Namn
  FROM Produkt
  JOIN InkOrder ON Produkt.ProdId  = InkOrder.ProdId
  JOIN Kund     ON InkOrder.KundId = Kund.KundId
 WHERE InkOrder.Datum = '2011-09-24'
   AND Kund.Namn = 'Allstad' 
```

然后我们可以注意到 WHERE 子句中的条件可以下推到 ON 子句中：

```
SELECT Produkt.Namn
  FROM Produkt
  JOIN InkOrder ON Produkt.ProdId  = InkOrder.ProdId AND InkOrder.Datum = '2011-09-24'
  JOIN Kund     ON InkOrder.KundId = Kund.KundId AND Kund.Namn = 'Allstad' 
```

因此，如果子查询确实是一个好主意（可能不是，但优化器很有可能会发现它并像连接一样处理它），那么我们可以编写：

```
SELECT Produkt.Namn
  FROM Produkt
  JOIN InkOrder ON Produkt.ProdId  = InkOrder.ProdId AND InkOrder.Datum = '2011-09-24'
 WHERE InkOrder.KundId IN (SELECT KundID FROM Kund WHERE Namn = 'Allstad') 
```

然后得到第二个子查询：

```
SELECT Produkt.Namn
  FROM Produkt
 WHERE Produkt.ProdId IN
       (SELECT ProdId
          FROM InkOrder
         WHERE Datum = '2011-09-24'
           AND KundId IN (SELECT KundID FROM Kund WHERE Namn = 'Allstad')
       ) 
```

OTOH，具有显式 JOIN 操作的版本是迄今为止最清晰的。您可以在 ON 子句中编写过滤条件，但可以说将它们写入（主）WHERE 子句中更清晰，让优化器将过滤条件下推。这是一项非常重要的优化，任何生产质量的 DBMS 都不太可能不进行这种优化。

# foursquare - 如何从新的漂亮 url 获取foursquare场地ID

> ID：13617487
> 
> 赞同：3
> 
> 时间：2012-11-29T01:40:25.280
> 
> 标签：foursquare

新的场地 url 更漂亮，但 ID 不存在，并且没有机制可以从漂亮的 url 中查找 ID。

例如，这个特定的 url： [https ://foursquare.com/felice_83](https://foursquare.com/felice_83)

如何查找场地ID？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T21:03:20.353

在右侧边栏中，有一个声明该位置的链接。在该声明链接的 URL 中，“vid”参数是场地 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-29T08:19:06.527

在[foursquare.com](https://foursquare.com)上搜索地点或扩展`4sq.com`短链接时，ID 将自动附加到漂亮的URL，例如

```
https://foursquare.com/v/sim-lim-square/4b058815f964a520aab022e3 
```

`4b058815f964a520aab022e3`场地ID在哪里。[与从“ Claim it now.](https://foursquare.com/venue/claim?vid=4b058815f964a520aab022e3) ”链接逆向工程`vid`查询字符串参数相比，这将节省您手动查找的时间。

# c++ - 使用 boost 的集合中的成员函数代理

> ID：13617490
> 
> 赞同：0
> 
> 时间：2012-11-29T01:40:54.387
> 
> 标签：c++, boost

我在地图中有一组对象指针，在几个地方我需要遍历该集合并调用每个对象的成员函数。

目前，对于每个成员函数，我需要在集合中的每个元素上调用，我正在添加一个代理函数，该函数迭代调用关联成员的集合。

我想知道是否可以使用 boost 在集合类中创建一个模板函数，它会在一般情况下为我处理这个问题？

回答：事实证明这很容易，修改了我原来的例子，使其按需要工作：

```
class Object
{
public:
    void func1();
    void func2(int a);
};

class ObjectCollection : public std::map<std::string, Object*>
{
public:
    template <typename Func>
    void invokeMember(Func func)
    {
        for (iterator it = begin(); it != end(); ++it)
        {
            it->second->func();
        }
    }
};

void test()
{
    ObjectCollection collection;
    // ...
    collection.invokeMember(boost::bind(&Object::func1, _1));
    collection.invokeMember(boost::bind(&Object::func2, _1, 42));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:23:47.707

这是你想要做的：

```
boost::bind(&X::f, ref(x), _1)(i);      // x.f(i) 
```

取自[这里](http://www.boost.org/doc/libs/1_52_0/libs/bind/bind.html#with_algorithms)

如果你想拥有不同参数的不同函数，你可以有一个枚举来标识函数（你传递给invokeMember），传递可变数量的参数给invokeMember，并在那里调用bind。

与可变数量的参数相比，最好有一个包含所有可能参数的类（或传递一个`void *`指向定义该函数调用参数的类并使用动态转换的类）。

# mysql - 按多列对行进行排序

> ID：13617494
> 
> 赞同：1
> 
> 时间：2012-11-29T01:41:14.310
> 
> 标签：mysql, sql-order-by

标题说，我正在寻找一种方法来对 MySQL 表中的一组行进行排序。

我已经稍微简化了我的示例，但得到的解决方案也应该适用于我的确切设置。这是我的设置：

```
events
----------
event_name
created
updated

Event A 
12-09-2012
14-09-2012

Event B
12-09-2012
-

Event C
09-09-2012
13-09-2012 
```

我正在寻找一种根据最近的“活动”对行进行排序的方法，因此以最新的日期为准。因此，使用上述值，结果应该是 A、C、B。（从最近到较旧）。值得注意的是，我无法更改有关表格的任何内容。

我该怎么做呢？

问候， 沃特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:29:20.570

我想我可能会在这里做点什么...

```
SELECT *, GREATEST(created, updated) AS last_activity FROM events ORDER BY last_activity DESC 
```

这似乎确实有效，但我必须做一些测试，看看它是否万无一失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:53:15.627

试试这个，应该就是这么简单

```
 SELECT event_Name From Events
 ORDER created DESC 
```

# android - Trigger.IO 是否可以锁定某些视图的屏幕方向？

> ID：13617500
> 
> 赞同：1
> 
> 时间：2012-11-29T01:42:00.863
> 
> 标签：android, ios, screen-orientation, trigger.io

是否可以以编程方式将单个视图的方向设置为仅纵向或横向，同时保持其他视图的自由度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T02:07:27.813

是的，这是可能的。

我们的显示模块有一个 JavaScript API 来强制一个特定的方向，然后将其发布到所有任何地方： http: [//docs.trigger.io/en/v1.4/modules/display.html#api](http://docs.trigger.io/en/v1.4/modules/display.html#api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:12:17.680

是的，父视图控制器是限制因素。当父母禁止这样做时，您不能轻松地旋转到横向。但是当父级允许例如纵向和横向时，导航控制器调用的下一个视图控制器可以限制为例如仅纵向。
另一种方式很困难：如果父级限制为纵向，那么苹果标准技术将不允许视图控制器旋转到横向。

# c++ - C++ 对象生命周期优化

> ID：13617504
> 
> 赞同：4
> 
> 时间：2012-11-29T01:42:23.847
> 
> 标签：c++, compiler-optimization

我正在尝试使用 RAII 创建在流上起作用的对象，直到它们被销毁。例如，我有一个在`endl`添加时会自行刷新的流。大多数时候我想要这个，但并非总是如此。我希望能够说“不要在 endl 上刷新”，但我也需要它是异常安全的。所以我不能只`stream->NoFlush()`设置一个班级成员。无论如何，我想知道的是这个。如果我有类似的代码

```
CStreamModifier no_flush;
stream->NoFlush(no_flush);
// as long as no_flush is in scope I get the behaviour I want

... do some stuff on the stream, without referencing no_flush ...

// no_flush goes out of scope here. 
```

是否允许编译器优化 no_flush 的生命周期？例如，它在第 2 行之后没有使用，但我需要它一直保留到最后。我还没有真正听说过这样的优化，所以我认为我还可以，但我想确定一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:47:16.203

我会这样做：

```
struct Stream
{
    bool flush = true;
    // ...
};

struct NoFlush
{
    explicit NoFlush(Stream & s)
    : stream(s)
    , prev(stream.flush)
    { stream.flush = false; }

    ~NoFlush()
    { stream.flush = prev; }

    Stream & stream;
    bool prev;
}; 
```

现在你可以像这样使用它：

```
void foo(T arg, S brg, Stream & stream)
{
    NoFlush _(stream);

    // do stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T01:45:56.653

不，编译器不允许优化它。当对象超出范围时，将准确调用析构函数。

如果`NoFlush`按值获取参数，它可以做的是优化它的副本，但这无关紧要。

复制省略是编译器可以执行的唯一影响可观察行为的优化。

# java - 使用自定义选择器的 ListView 项目背景

> ID：13617505
> 
> 赞同：1
> 
> 时间：2012-11-29T01:42:25.733
> 
> 标签：java, android, listview, selector

我意识到这个问题有很多话题，我都看过了。但是我仍然很困惑为什么我的 ListView 背景仍然是黑色的。只有当我将构成我的 ListView 行的 LinearLayout 的背景设置为某种颜色时，我才能更改背景。但是，当我将 LinearLayout 的背景设置为颜色时，我无法查看选择器。

我设置了cacheColorHint="#00000000"，android:scrollingCache="false"，甚至尝试了android:drawSelectorOnTop="true"。我相信问题可能出在定义或创建我的选择器的某个地方，因为当我测试应用程序时，我从未能够在屏幕上查看我的更改。但这都是猜测，因为我无法解决我的问题，我真的不知道出了什么问题。您可以在下面查看我的代码。

我的选择器：list_background.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:state_focused="true" android:color="#80ff0000" /> <!-- focused -->
<item android:state_focused="true" android:state_pressed="true" android:color="#80ff0000" /> <!-- focused and pressed-->
<item android:state_pressed="true" android:color="#80ff0000" /> <!-- pressed -->
<item android:color="#ffffffff" /> <!-- default -->
</selector> 
```

我的列表视图：main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" 
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:background="#ffffffff">

<!-- List view -->
<ListView android:id="@+id/android:list" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:dividerHeight="0px"
    android:divider="#0099CC"
    android:listSelector="@drawable/list_background"
    android:drawSelectorOnTop="true"
    android:cacheColorHint="#00000000"
    android:scrollingCache="false"/>    

</RelativeLayout> 
```

我的线性布局：image_text_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal" 
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
android:background="#00000000">

    <ImageView android:id="@+id/feed_image"
    android:layout_width="100dip" 
    android:layout_height="100dip"
    android:paddingTop="5dip"
    android:paddingRight="3dip"
    android:background="#00000000"/>

    <TextView android:id="@+id/job_text" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:textColor="#FF4444"
    android:paddingTop="5dip"
    android:paddingBottom="28dip" 
    android:paddingLeft="8dip"
    android:paddingRight="8dip"
    android:background="#00000000"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:11:50.007

可能有两件事。

一：您可能需要将 LinearLayout 设为“android:clickable”或“android:focusable”。这是因为默认情况下布局不可点击。android默认的simple_list_item在哪里。

二：我也相信在处理自定义行时，您需要将选择器分配给自定义行的背景（image_text_layout.xml）LinearLayout 而不是列表视图。我不太确定。

# android - Google Play 服务 - 授予 Oauth2 权限

> ID：13617506
> 
> 赞同：0
> 
> 时间：2012-11-29T01:42:31.753
> 
> 标签：android, oauth-2.0, google-play-services

您可以在发出请求之前让用户授权 Oauth 权限（显示对话框）吗？我想请我的用户在他们第一次使用该应用程序时授予权限。我知道的唯一方法是捕获 UserRecoverableAuthException 并从那里启动意图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:14:12.043

您可以调用[http://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html#getToken(android.content.Context](http://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html#getToken(android.content.Context) , java.lang.String, java.lang。 String) 当你的应用程序第一次启动时，如果用户已经同意，它将返回一个有效的令牌，或者抛出 UserRecoverableAuthException，在这种情况下，你应该将用户引导到其中包含的意图。

# php - 使用模板选择器（页面 UI）创建自定义 Wordpress 帖子类型？

> ID：13617507
> 
> 赞同：0
> 
> 时间：2012-11-29T01:42:35.580
> 
> 标签：php, wordpress, wordpress-theming

我知道如何创建自定义帖子类型。从 Codex 看来，我应该能够创建一个行为类似于页面的自定义帖子类型，特别是能够使用模板选择器弹出窗口和类别/标签选择器分配模板。

到目前为止，我得到的只是基本编辑器，而且我可以获得一个特色图像选择器。但我正在寻找的基本上是一个我可以将其视为自定义帖子类型的页面。

编辑：我认为这很明显，但我是用functions.php做的：

```
register_post_type( hh_town,
array(
    'labels' => array(
        'name' => __( 'Towns' ),
        'singular_name' => __( 'Town' ),
        'add_new' => _x('Add Town', 'towns'),
              'add_new_item' => __('Add Town'),
              'edit' => _x('Edit Towns', 'Towns'),
              'edit_item' => __('Edit Town'),
              'new_item' => __('New Town'),
              'view' => _x('View Town', 'towns'),
              'view_item' => __('View Town')
    ),
    'public' => true,
    'has_archive' => true,
    'hierarchical' => true,
    'show_ui' => true,
    'supports' => array('title','editor','page-attributes','thumbnail', 'custom-fields'),
    'capability_type' => 'page',
    'taxonomies' => array('post_tag','category')
)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-03T07:03:51.847

只需将此代码添加到您的functions.php

```
add_action( 'add_meta_boxes', 'add_custom_page_attributes_meta_box' );
function add_custom_page_attributes_meta_box(){
global $post;
    if ( 'page' != $post->post_type && post_type_supports($post->post_type, 'page-attributes') ) {
        add_meta_box( 'custompageparentdiv', __('Template'), 'custom_page_attributes_meta_box', NULL, 'side', 'core');
    }
}

function custom_page_attributes_meta_box($post) {
    $template = get_post_meta( $post->ID, '_wp_page_template', 1 ); ?>
    <select name="page_template" id="page_template">
        <?php $default_title = apply_filters( 'default_page_template_title',  __( 'Default Template' ), 'meta-box' ); ?>
        <option value="default"><?php echo esc_html( $default_title ); ?></option>
        <?php page_template_dropdown($template); ?>
    </select><?php
}

add_action( 'save_post', 'save_custom_page_attributes_meta_box' );
function save_custom_page_attributes_meta_box( $post_id ) {
    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) return;
    if ( isset( $_POST['post_type'] ) && 'page' == $_POST['post_type'] ) return;
    if ( ! current_user_can( 'edit_post', $post_id ) ) return;
    if ( ! empty( $_POST['page_template'] ) && get_post_type( $post_id ) != 'page' ) {
        update_post_meta( $post_id, '_wp_page_template', $_POST['page_template'] );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-06T11:29:34.090

旧线程，但万一有人遇到这种情况：您实际上不再需要任何自定义元框。如果您创建一个模板 `template-my-template.php`并将其添加到顶部

```
<?php
/*
Template Name: My Template
Template Post Type: project, report, event
*/ 
```

然后列出的任何自定义帖子类型`Template Post Type`也支持页面属性（`add_post_type_support( 'my_post_type', ['page-attributes'] );`）将允许模板选择。

# ruby-on-rails - 如何在 ruby /rails 中定义 C/C++ 风格的宏

> ID：13617511
> 
> 赞同：1
> 
> 时间：2012-11-29T01:42:53.987
> 
> 标签：ruby-on-rails, ruby, macros

我注意到 ruby​​ on rails 有一些有交流感觉的小宏。

```
__FILE__ and __LINE__ 
```

例如。这使得调试和生成唯一缓存键变得更加容易。

```
store = Rails.cache.fetch("#{__FILE__}|#{__LINE__}|#{self.store_id}")... 
```

当我可能会为一组给定的订单一遍又一遍地获得同一家商店时，最方便。

我想知道的是；我可以创建自己的宏/定义吗？预编译代码虽然有时不是一个好主意，但确实有它的位置。

**问题**：有没有办法在 ruby​​/rails 中创建 c 风格的宏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T02:15:08.147

它们看起来像 C 但它们不是宏，它们只是对象，就像 ruby​​ 中的其他所有东西一样，它们特别具有确定当前正在解释的文件的名称和行号的能力。

C 宏只是对编译时可执行代码的引用。Ruby 是……完全与此相反 :-) Ruby 中的编译实际上是语法评估，然后是解释。如果像 C、C++ 和 Java 这样的语言是早期绑定的，而像 PHP 和 Python 这样的其他语言是后期绑定的，那么 ruby​​ 就错过了公共汽车，并且会在可能的最后时刻到达那里。

因此，如果您想创建自己的东西，请创建一个内部有东西的模块和/或类。您在内部创建的将是实例或类的变量、符号、常量或方法，可能是本地的，可能是公共的、受保护的或私有的。`__FOO__`使用特殊命名约定或其他（即使它们是有效名称）通常不是一种好的形式。

（回答结束......如果我听到你在问什么，也许这会帮助你实现所需的精神飞跃）......

我从 C 到 C++，再到 Java，然后到 Ruby。在为改革后的 Java 程序员提供了短暂的诊所后，我能够理解 ruby​​ 是多么强大。但是您确实必须考虑如何以不同的方式解决问题。

我强烈推荐这本书[Eloquent Ruby，在这里链接到 Amazon](https://rads.stackoverflow.com/amzn/click/com/B004MMEJ36)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T02:43:03.010

`__FILE__`并且*本身*`__LINE__`不是宏，它们是关键字（返回值）。*`String`*

 *话虽如此，您*可以*`_`定义以下划线或字符开头的常量和方法。例如：

```
__MICKEY__ = :mouse 
```

现在，一个常量可以引用任何东西——一个字符串、一个表达式，甚至是一个代码块（a `Proc`or `lambda`）或一个整体`Class`。

这意味着您可以利用（可以说更强大的）运行时代码执行，而不是编译时宏扩展（Ruby，作为一种解释语言，实际上并没有“编译阶段”）。

例如，C++ 宏：

```
#define SUM(a, b, c) a + b + c 
```

可以在 Ruby 中适当地近似为

```
def SUM(a, b, c); a + b + c; end 
```

我说“近似”是因为 a) 在这种情况下，我们定义的是*方法*，而不是*常量*或宏，并且 b) C++ 宏在使用与预期数量不同的参数进行评估时仍然可以工作（因为 C++ 宏被扩展，意思是，就好像我们确实找到并替换了），而 Ruby 方法调用语义开始发挥作用，例如检查方法和参数的数量。

为了解决这个问题，在我们的特定示例中，我们可以做（可以说是更灵活的事情）

```
def SUM(*args); args.inject(:+); end

SUM(1, 2) # => 3
SUM(1, 2, 3, 5) # => 11 
```

如您所见，通过利用 Ruby 的动态特性，您可以实现与 C++ 宏提供的类似（甚至可能更高）级别的表现力。*

# c# - 增加观看距离？

> ID：13617512
> 
> 赞同：1
> 
> 时间：2012-11-29T01:42:55.747
> 
> 标签：c#, xna

我想要做的是增加我的观看距离，以便我可以看到超过 10000f 的物体我已经包含了一张图片来帮助你理解我的意思，我想将我的观看距离设置为，比如说 50000f 这样我就可以看到更多更远的物体。

![观看距离](../Images/4c39f4fa8a7d5e6b75737ba48a746168.png)

下面是我的相机代码

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Media;
using Microsoft.Xna.Framework.Graphics;

namespace test1
{
public class ArcBallCamera
{
    //rotation
    public Matrix rotation = Matrix.Identity;
    //camera pos.
    public Vector3 position = Vector3.Zero;

    // Simply feed this camera the position of whatever you want its target to be
    public Vector3 targetPosition = Vector3.Zero;

    public Matrix viewMatrix = Matrix.Identity;

    public Matrix projectionMatrix = Matrix.Identity;

    private float zoom = 8000.0f;
    public float Zoom
    {
        get
        {
            return zoom;
        }
        set
        {    // Keep zoom within range
            zoom = MathHelper.Clamp(value, zoomMin, zoomMax);
        }

    }

    private float horizontalAngle = MathHelper.PiOver2;
    public float HorizontalAngle
    {
        get
        {
            return horizontalAngle;
        }
        set
        {    // Keep horizontalAngle between -pi and pi.
            horizontalAngle = value % MathHelper.Pi;
        }
    }

    private float verticalAngle = MathHelper.PiOver2;
    public float VerticalAngle
    {
        get
        {
            return verticalAngle;
        }
        set
        {    // Keep vertical angle within tolerances
            verticalAngle = MathHelper.Clamp(value, verticalAngleMin, verticalAngleMax);
        }
    }

    private const float verticalAngleMin = 0.01f;
    private const float verticalAngleMax = MathHelper.Pi - 0.01f;

    private const float zoomMin = 0.1f;
    private const float zoomMax = 8000.0f;

    // FOV is in radians
    // screenWidth and screenHeight are pixel values. They're floats because we need to divide them to get an aspect ratio.
    public ArcBallCamera(float FOV, float screenWidth, float screenHeight, float nearPlane, float farPlane)
    {
        if (screenHeight < float.Epsilon)
            throw new Exception("screenHeight cannot be zero or a negative value");

        if (screenWidth < float.Epsilon)
            throw new Exception("screenWidth cannot be zero or a negative value");

        if (nearPlane < 0.1f)
            throw new Exception("nearPlane must be greater than 0.1");

        this.projectionMatrix = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(FOV), screenWidth / screenHeight,
                                                                    nearPlane, farPlane);
    }

    public void Update(GameTime gameTime)
    {
        // Start with an initial offset
        Vector3 cameraPosition = new Vector3(0.0f, zoom, 0.0f);

        // Rotate vertically
        cameraPosition = Vector3.Transform(cameraPosition, Matrix.CreateRotationX(verticalAngle));

        // Rotate horizontally
        cameraPosition = Vector3.Transform(cameraPosition, Matrix.CreateRotationY(horizontalAngle));

        position = cameraPosition + targetPosition;
        this.LookAt(targetPosition);

        // Compute view matrix
        this.viewMatrix = Matrix.CreateLookAt(this.position,
                                              this.position + this.rotation.Forward,
                                              this.rotation.Up);
    }

    /// <summary>
    /// Points camera in direction of any position.
    /// </summary>
    /// <param name="targetPos">Target position for camera to face.</param>
    public void LookAt(Vector3 targetPos)
    {
        Vector3 newForward = targetPos - this.position;
        newForward.Normalize();
        this.rotation.Forward = newForward;

        Vector3 referenceVector = Vector3.UnitY;

        // On the slim chance that the camera is pointer perfectly parallel with the Y Axis, we cannot
        // use cross product with a parallel axis, so we change the reference vector to the forward axis (Z).
        if (this.rotation.Forward.Y == referenceVector.Y || this.rotation.Forward.Y == -referenceVector.Y)
        {
            referenceVector = Vector3.UnitZ;
        }

        this.rotation.Right = Vector3.Cross(this.rotation.Forward, referenceVector);
        this.rotation.Up = Vector3.Cross(this.rotation.Right, this.rotation.Forward);
    }

    public Matrix[] SetupEffectDefaults(Model myModel)
    {
        Matrix[] absoluteTransforms = new Matrix[myModel.Bones.Count];
        myModel.CopyAbsoluteBoneTransformsTo(absoluteTransforms);

        foreach (ModelMesh mesh in myModel.Meshes)
        {
            foreach (BasicEffect effect in mesh.Effects)
            {
                effect.EnableDefaultLighting();
                effect.Projection = projectionMatrix;
                effect.View = viewMatrix;
            }
        }
        return absoluteTransforms;
    }

}
} 
```

![当我远离 astroid 时](../Images/32eee8c427cbbb91790d8d48c093f44e.png)

![当我更接近小行星时](../Images/aeaa1640ca9034ddefe84f06528c72c3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:48:28.903

我们看不到你是如何创建你的`ArcBallCamera`，而只是将构造函数的最后一个参数更改为`50000`应该完成这项工作，请参阅[此处](http://msdn.microsoft.com/en-us/library/bb195665.aspx)`CreatePerspectiveFieldOfView`的文档。

# javascript - 使用变量时在正则表达式中转义方括号？

> ID：13617517
> 
> 赞同：4
> 
> 时间：2012-11-29T01:43:45.670
> 
> 标签：javascript, regex, replace

我有这段代码来替换所有内部有匹配变量的开始和结束方括号：

```
for (var j = 0; j <= temp.length; j++) {
    var re = new RegExp("["+j+"]", 'g');
    imgData = imgData.replace(re, temp[j]);
} 
```

该行`var re = new RegExp("["+j+"]", 'g');`不起作用，因为我认为括号没有被转义。有谁知道我将如何逃避它们，但仍然能够在模式中有一个变量？谢谢！:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T01:44:23.780

你应该用反斜杠转义它：

```
var re = new RegExp("\\[" + j + "\\]", "g"); 
```

# html - 谷歌地图在 3.9 和 3.10 之间发生了变化，平铺的画布覆盖

> ID：13617519
> 
> 赞同：1
> 
> 时间：2012-11-29T01:43:57.010
> 
> 标签：html, google-maps, google-maps-api-3, html5-canvas

我正在研究基于

> [http://www.giscloud.com/sandbox/jsapi/html5/?mid=11695](http://www.giscloud.com/sandbox/jsapi/html5/?mid=11695)

第15行可以看到导入（多行方便阅读）

```
<script type="text/javascript"
        src="http://maps.google.com/maps/api/js?sensor=false">
</script> 
```

上周开始加载 v3.10（发布）而不是 v3.9（现已冻结）。

从页面中可以看出，问题是画布现在加载到“MapPane”层中，远低于其他 6 个层（[参考：MapPanes](https://developers.google.com/maps/documentation/javascript/reference#MapPanes)）。该层不是交互式的。

有没有人遇到过这样的问题，或者更好的是，正在使用链接中的解决方案 - 并已将其升级为 v3.10？

**JS小提琴**

*   [不起作用（v3.10）](http://jsfiddle.net/gmmtJ/)
*   [作品（v3.9）](http://jsfiddle.net/gmmtJ/1/)

* * *

**更多信息**

在 v3.9 中，地图窗格的布局为

```
<div .. (parent)
    <div .. z-index:100.. >   --- << changed to 150
    <div .. z-index:101.. >
    <div .. z-index:102.. >
    <div .. z-index:103.. >
    <div .. z-index:104.. >
    <div .. z-index:105.. >
    <div .. z-index:106.. > 
```

解决方案中的代码操纵第一个窗格（“MapPane”）的 z-index，这违背了 API 的意图......

> el.map.getDiv().firstChild.firstChild.firstChild.firstChild.style.zIndex=150

我的自定义解决方案将其设置为 104，因为我使用了需要高于它的`overlayMouseTarget`(105) 和(106) 层。`floatPane`

在 v3.10 中，它们已重新排列如下（您可以确定 z-indexes 100-106）：

```
<div .. (parent)
    <div .. z-index:200.. >
        <div .. z-index:101.. >
    <div .. z-index:201.. >
        <div .. z-index:102.. >
        <div .. z-index:103.. >
    <div .. z-index:202.. >
        <div .. z-index:104.. >
        <div .. z-index:105.. >
        <div .. z-index:106.. >
    <div .. z-index:100.. >
         < overlay tile divs >  --<< the divs parenting the canvases in the solution
             <canvas ... > 
```

我认为正确的“修复”是将瓷砖移动到`floatShadow`MapPane，但它是否提供了 OverlayMapType 所做的平铺好处，这似乎是解决方案的基础？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:09:39.520

好的，我发布你的整个代码。

```
<!doctype html> 
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>  
  <title>GIS Cloud HTML5 Canvas Example</title>
  <style>
    body, html {
      padding: 0;
      margin: 0;
      overflow: hidden;
    }
  </style>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>  
  <link href="http://code.google.com/apis/maps/documentation/javascript/examples/standard.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <script type="text/javascript" src="http://api.giscloud.com/sandbox/html5c.js"></script>

  <script type="text/javascript">
    var map;

    function initialize() {

      map = new google.maps.Map(document.getElementById("map_canvas"));

      map.setZoom(4);
      map.setMapTypeId('terrain');
      map.setCenter(new google.maps.LatLng(35.818521016151, -100.932382588817));

      var dummyLayer = new google.maps.OverlayView();
      dummyLayer.onAdd = function() {
        var panes = this.getPanes();
        console.log(panes.mapPane);
        panes.mapPane.style.zIndex = 500;
      };
      dummyLayer.onRemove = function() {
      };
      dummyLayer.draw = function() {
      };
      dummyLayer.setMap(map);

      var gcmap = new giscloud.Html5Map(11695, map);
      map.overlayMapTypes.insertAt(0, gcmap);
      map.overlayMapTypes.insertAt(0, 0);

    }

  </script>

</head>
<body onload="initialize()">
  <div style="text-align:center"><h2>GIS Cloud HTML5 Canvas Example</h2><p>Showing interactive HTML5 vector map overlay hosted on GIS Cloud. The original project is <a href="http://www.giscloud.com/map/11695/us-unemployment-sep-2010">here</a>. </p></div>  <div id="map_canvas" style="width: 70%; height: 75%;margin:auto"></div>
  <br />
  <center>requires HTML5 compatible <a href="#" onclick="return false;" title="Chrome, Firefox, Safari, IE9">browser</a> - <a href="http://www.giscloud.com/blog/realtime-map-tile-rendering-benchmark-rasters-vs-vectors/">article &amp; benchmark: rasters vs vectors</a></center>
</body>
</html> 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:58:37.920

直接访问窗格不是更好的方法。要正确获取窗格，您的代码应如下所示：

```
var dummyLayer = new google.maps.OverlayView();
dummyLayer.onAdd = function() {
  var panes = this.getPanes();
  console.log(panes.mapPane);
  panes.mapPane.style.zIndex = 500;
};
dummyLayer.onRemove = function() {};
dummyLayer.draw = function() {};
dummyLayer.setMap(map); 
```

# php - 带有 <> 的 php 字符串似乎需要转义

> ID：13617524
> 
> 赞同：0
> 
> 时间：2012-11-29T01:44:40.607
> 
> 标签：php, string, escaping, angle, brackets

我把它归结为一个两行 php 文件：

> ```
>  $s = "<option value=\"%id%\">%desc%</option>";
>    die($s); 
> ```

这将输出：

> %降序%

如果我将 <>s 更改为`& l t ; & g t ;` 然后它可以工作，但我试图输出的字符串将被解释为 HTML。

我在 PHP 字符串文档中没有看到任何内容表明 <> 是需要转义的特殊字符。有趣的是，当我试图在这个论坛中引用问题时，我遇到了同样的问题！这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T01:48:07.713

您正在浏览器中获得正确的输出，即

```
<option value=\"%id%\">%desc%</option> 
```

但是，您的浏览器会将其解析为 HTML。您可以通过查看原始 HTML 源来确认这一点。

如果您不希望浏览器将其解析为 HTML，请使用`&lt;`and `&gt;`。

# java - Mongodb聚合框架中是否有地板功能？

> ID：13617526
> 
> 赞同：6
> 
> 时间：2012-11-29T01:44:45.077
> 
> 标签：java, mongodb, aggregation-framework

我尝试在 mongodb 中进行一些整数数学运算，但遇到了一些问题。有没有办法在 mongo db 聚合框架中向上或向下舍入双精度数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T20:07:54.903

根据 Stennie 的评论，不支持地板和天花板方法。

根据我上面的评论，我能找到的最好的解决方案就是做一个看起来像： (num-mod(num,1)) 的操作，它应该产生与 floor 函数相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-09T05:42:33.307

从[MongoDB 3.2](https://docs.mongodb.org/manual/release-notes/3.2/#new-aggregation-arithmetic-operators)开始，您可以使用以下可用的算术聚合运算符：

*   [`ceil`](https://docs.mongodb.org/master/reference/operator/aggregation/ceil/)
*   [`trunc`](https://docs.mongodb.org/master/reference/operator/aggregation/trunc/)
*   [`floor`](https://docs.mongodb.org/master/reference/operator/aggregation/floor/)

允许从您想要的任何一侧转换为整数。语法很简单：`{ $function: <number> }`

# java - 正则表达式*或其他方法*对所有文本的整个 URL 进行排序

> ID：13617527
> 
> 赞同：2
> 
> 时间：2012-11-29T01:44:46.533
> 
> 标签：java, regex, url, sorting, text

此链接：[http](http://www.otc.edu/GEN/schedule/all_classes_fall.txt) : //www.otc.edu/GEN/schedule/all_classes_fall.txt 包含我大学的课程，我正在尝试获取所有这些数据并将其存储在我创建的 ClassInformationFall 对象中。基本上，课程从课程标题开始，格式如下：“ABR-100-101”，并有课程讲师、上课日期、开始/结束时间等。

我已经写了一些正则表达式来挑选课程名称，以及一些更简单的东西，比如开始和结束时间，但我一直在努力尝试把剩下的东西拿出来。我正在考虑设置一些代码，每当遇到另一个类标题时，它将以下文本添加到一个新的 ClassInformationFall 对象中，我将其存储在该类型的列表中。但是，即使我有这个，我仍然无法成功地提取构成班级的所有事物的所有数据。

选择这些信息的正则表达式是什么，或者正则表达式甚至是要走的路？

感谢您的帮助，这让我很困惑。

PS - 我正在用 Java 开发应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:59:58.697

如果字段总是以相同的顺序排列，你可以用制表符分割每一行并处理结果数组。

```
String line = bufferedReader.readLine();

while (line != null) {

   String[] data         =  line.split("\\t+");
   String   name         =  data[0];
   String   credits      =  data[2];
   String   description  =  data[3];
   String   professor    =  data[11];

   ClassInfo ci = new ClassInfo(name, credits, description, professor);
   classInfoList.add(ci);

   line = bufferedReader.readLine();
} 
```

# objective-c - 无法以编程方式在 viewDidLoad 中移动标签

> ID：13617529
> 
> 赞同：0
> 
> 时间：2012-11-29T01:45:25.130
> 
> 标签：objective-c, ios, viewdidload

如果它是 iPhone 5（4" 显示器），我正在尝试将 uiLabel 向下移动。但是当代码在 viewDidLoad 中时它不起作用。如果我通过单击 uiButton 调用代码，它可以工作。这是代码：

```
-(void) viewDidLoad {
    if(CGSizeEqualToSize([[UIScreen mainScreen] preferredMode].size,CGSizeMake(640, 1136))) {
        CGRect frame = [self.timeOnCurrentQuestion frame];
        frame.origin.y += 40;  // change the location
        [self.timeOnCurrentQuestion setFrame:frame];
        nslog(@"This DOES get logged");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:33:34.213

Jonah，你在 viewWillAppear 方法中尝试过你的代码吗？也许，它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:04:09.777

也许这是你需要提防的事情。

```
- (void)viewDidLoad 
```

这是控制器 juz 创建其视图时的一种方法。

例如：也许在您的 init 方法中，您调用类似：

```
[self.view setBackground:[UIColor redColor]];
self.timeOnCurrentQuestion = [[UIView alloc] initWithFrame:kFrame]; 
```

在这种情况下，工作流程将是这样的：

```
[self.view setBackground:[UIColor redColor]];
[self viewDidload];
self.timeOnCurrentQuestion = [[UIView alloc] initWithFrame:kFrame]; 
```

这个工作流程的原因是因为调用了self.view，然后在正常的视图周期之前需要它的视图，所以，在这种情况下，viewDidload方法中的self.timeOnCurrentQuestion仍然是nil。

我不知道我的做法是不是最好的。

我总是在控制器的 init 方法中初始化 subView。并在 [self viewDidload] 中执行 [self.view addSubview:_subview]（//或所有需要 self.view 的方法调用）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T14:44:18.323

viewDidAppear 为我工作。生命周期似乎是

1.  加载视图（）
2.  viewDidLoad()
3.  viewWillAppear()
4.  viewDidAppear()

# matlab - 分配期间的索引

> ID：13617532
> 
> 赞同：3
> 
> 时间：2012-11-29T01:45:47.167
> 
> 标签：matlab, indexing, octave

说我有这个样本数据

```
A =
1.0000     6.0000   180.0000    12.0000
1.0000     5.9200   190.0000    11.0000
1.0000     5.5800   170.0000    12.0000
1.0000     5.9200   165.0000    10.0000
2.0000     5.0000   100.0000     6.0000
2.0000     5.5000   150.0000     8.0000
2.0000     5.4200   130.0000     7.0000
2.0000     5.7500   150.0000     9.0000 
```

我希望计算每列的方差，按类（第一列）分组。

我使用以下代码进行此操作，但它使用硬编码索引，需要了解每个类的样本数量，并且它们必须按特定顺序排列。

有一个更好的方法吗？

```
variances = zeros(2,4);
variances = [1.0 var(A(1:4,2)), var(A(1:4,3)), var(A(1:4,4));
             2.0 var(A(5:8,2)), var(A(5:8,3)), var(A(5:8,4))];

disp(variances);

1.0 3.5033e-02   1.2292e+02   9.1667e-01
2.0 9.7225e-02   5.5833e+02   1.6667e+00 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T01:58:39.453

将类标签和数据分成不同的变量。

```
cls = A(:, 1);
data = A(:, 2:end); 
```

获取类标签列表

```
labels = unique(cls); 
```

计算方差

```
variances = zeros(length(labels), 3);
for i = 1:length(labels)
  variances(i, :) = var(data(cls == labels(i), :)); % note the use of logical indexing
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T01:58:31.827

这些年来我已经做了很多这类事情，但是为了能够判断，更好还是最好，了解您期望在数据集或结构中发生什么变化会有所帮助。

否则，如果预计没有变化并且硬代码有效，请坚持下去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T02:34:59.363

十分简单。使用[合并器](http://www.mathworks.com/matlabcentral/fileexchange/8354-consolidator)。它在文件交换上。

```
A = [1.0000     6.0000   180.0000    12.0000
1.0000     5.9200   190.0000    11.0000
1.0000     5.5800   170.0000    12.0000
1.0000     5.9200   165.0000    10.0000
2.0000     5.0000   100.0000     6.0000
2.0000     5.5000   150.0000     8.0000
2.0000     5.4200   130.0000     7.0000
2.0000     5.7500   150.0000     9.0000];

[C1,var234] = consolidator(A(:,1),A(:,2:4),@var)
C1 =
     1
     2
var234 =
     0.035033       122.92      0.91667
     0.097225       558.33       1.6667 
```

我们可以测试产生的差异，因为我们知道分组。

```
var(A(1:4,2:4))
ans =
     0.035033       122.92      0.91667

var(A(5:8,2:4))
ans =
     0.097225       558.33       1.6667 
```

它也很有效。

# c++ - 计算字符串中的多字符字符

> ID：13617534
> 
> 赞同：0
> 
> 时间：2012-11-29T01:46:02.303
> 
> 标签：c++, character, counter

例如，您如何计算`"TJ"`in的出现次数`OAEKOTJEOTJ`？

```
if (s[i] == 'TJ') and (s[i] == 'T'+'J')
    x += 1; 
```

第一个给我一个错误，第二个不算。我需要一个初学者的解决方案，我还没有学到很多关于 C++ 命令的知识。谢谢

```
int x = 0
string s;
cin >> s;
for (int i = 0; i < 100; i++)
if (s[i] == T || s[i] == t) && (s[i+1] == J || s[i+1] == j)
x += 1
cout << x << endl; 
```

这是我的代码的摘录，它不计算任何 tj、tJ、Tj 或 TJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:48:08.340

尝试使用：

```
if(s[i] == 'T' && s[i+1] == 'J') // and make sure you do not run out of bounds of string with index i.
x += 1; 
```

编辑：根据您的代码：

```
int x = 0
string s;
cin >> s;
for (int i = 0; i < 100; i++)
if (s[i] == T || s[i] == t) && (s[i+1] == J || s[i+1] == j)
x += 1
cout << x << endl; 
```

你应该这样做：

```
int x = 0
string s;
cin >> s;
for (int i = 0; i < s.length()-1; i++) // use size of string s.length()-1 to iterate the string instead of 100
     if (s[i] == 'T' || s[i] == 't') && (s[i+1] == 'J' || s[i+1] == 'j') // compare the ascii values of characters like - 'T' 'J' etc.
         x += 1
cout << x << endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:58:03.613

`std::string`提供了一个`find`在字符串中搜索子字符串的函数，包括多字符子字符串（下面，我使用的是 C++11 语法）：

```
#include <iostream>
#include <string>

int main()
{
  using namespace std;
  string text { "OAEKOTJEOTJ" };
  unsigned int occ { 0 };
  size_t       pos { 0 };
  for (;;) {
    pos = text.find("TJ",pos);      // Search for the substring, start at pos
    if (pos == string::npos)        // Quit if nothing found
      break;
    ++pos;                          // Continue from next position
    ++occ;                          // Count the occurrence
  }
  std::cout << "Found " << occ << " occurrences." << std::endl;
} 
```

按照上面的方式，我们只在每场比赛后前进一个字符。根据我们是否/如何处理重叠匹配，我们可能希望`pos`按搜索模式的长度前进。（也见克里斯的评论。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T02:15:31.220

尝试这个：

```
#include <locale> // for tolower() function

string tolower(string s) {
  tolower(s[0]);
  tolower(s[1]);
  return s;
}
...
int main() {
  string s;
  cin >> s;
  int n = s.size(),cont = 0;
  for(int i = 0; i < n ; ++i) {
    if(tolower(s.substr(i,2)) == "tj") {
      ++cont;
    }
  }
  cout << cont << endl;
  return 0;
} 
```

# multidimensional-array - 在 Common Lisp 中实现多维关联数组

> ID：13617535
> 
> 赞同：4
> 
> 时间：2012-11-29T01:46:06.830
> 
> 标签：multidimensional-array, lisp, hashtable, common-lisp, associative-array

我正在寻找在 Common Lisp 中实现多维关联数组的最佳方法。我正在使用 SBCL。

例如在 MATLAB 中，我可以创建一个这样的结构数组，例如。带有一些地理数据：

```
my_array.Finland.capital = 'Helsinki';
my_array.Finland.northernmost_municipality = 'Utsjoki';
my_array.Norway.capital = 'Oslo'; 
```

然后使用动态字段名称引用它：

```
country = 'Finland';
city_status = 'capital';

my_array.(country).(city_status) 
```

结果会给出字符串`'Helsinki'`。

**那么，在 Common Lisp 中实现多维（n 维）关联数组的最佳方法是什么？**（如上面 MATLAB 中的示例）

我找到了一个可行的解决方案，该解决方案基于使用哈希表将值/键（以字符串形式给出）转换为数字地址，然后将这些数字地址`aref`作为索引传递给多维数组。但我想知道有没有更好的方法来做到这一点？我需要将字符串转换为其他字符串，将字符串转换为列表，将字符串转换为数字（如下例所示）。

我的解决方案是这样的（使用示例数据将用英语编写的数字转换为它们的数字表示）：

下面的函数`list-to-3d-array`是 Rainer Joswig 对[Common Lisp 的回答的最小修改版本：在列表和数组之间转换](https://stackoverflow.com/questions/9549568/common-lisp-convert-between-lists-and-arrays)。

```
;;; functions.
(defun list-to-3d-array (my-list)
  (make-array (list (length my-list)
                    (length (first my-list))
                    (length (first (first my-list))))
              :initial-contents my-list))

(defun prepare-hash-table (my-hash-table factor-name factor-values-list)
  "This function stores values from 0 to n for the keys created by concatenating the factor-name and the values given in a list."
  (loop for i from 0 to (1- (length factor-values-list))
        do (setf (gethash (concatenate 'string factor-name "-" (nth i factor-values-list)) my-hash-table) i)))

(defun return-value-from-assoc-array (my-array my-hash-table hundreds tens ones)
  (aref my-array
        (gethash (concatenate 'string "hundreds-" hundreds) my-hash-table)
        (gethash (concatenate 'string "tens-" tens) my-hash-table)
        (gethash (concatenate 'string "ones-" ones) my-hash-table)))
;;; functions end here.

;;; some example data.
(defparameter *array-contents*
  (list 
    (list
      (list 111 112 113)
      (list 121 122 123)
      (list 131 132 133))
    (list
      (list 211 212 213)
      (list 221 222 223)
      (list 231 232 233))
    (list
      (list 311 312 313)
      (list 321 322 323)
      (list 331 332 333))))

(defparameter *hundreds-in-english* (list "hundred" "twohundred" "threehundred"))
(defparameter *tens-in-english* (list "ten" "twenty" "thirty"))
(defparameter *ones-in-english* (list "one" "two" "three"))

(defparameter *my-hash-table* (make-hash-table :test 'equal))
;;; example parameters end here.

;;; prepare the array.
(defparameter *my-array* (list-to-3d-array *array-contents*))

;;;; prepare the hash table.
(prepare-hash-table *my-hash-table* "hundreds" *hundreds-in-english*)
(prepare-hash-table *my-hash-table* "tens" *tens-in-english*)
(prepare-hash-table *my-hash-table* "ones" *ones-in-english*) 
```

然后例如。`(return-value-from-assoc-array *my-array* *my-hash-table* "hundred" "ten" "two")` 输出：

```
112 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T20:35:50.140

我不同意`get-nested-hash`上面给出的设计和实现。`(get-nested-hash 1)`不应返回 1，`(get-nested-hash 1 2)`也不应返回 nil。不传递两个参数应该是一个错误。应返回多个值以区分有意的 nil，例如`gethash`. 这`loop`是凌乱和繁琐的。不应发出可纠正的错误，`check-type`因为可能会导致数据丢失。

这是一个改进的解决方案：

```
(defun rec-hash (rec-hash key &rest more-keys)
  (if more-keys
      (apply #'rec-hash (gethash key rec-hash) more-keys)
      (gethash key rec-hash)))

(defun auto-vivify (rec-hash key)
  (multiple-value-bind (child exist) (gethash key rec-hash)
    (if exist
        child
        (setf (gethash key rec-hash)
              (make-hash-table :test (hash-table-test rec-hash))))))

(defun (setf rec-hash) (value rec-hash key &rest more-keys)
  (if more-keys
      (apply #'(setf rec-hash) value (auto-vivify rec-hash key) more-keys)
      (setf (gethash key rec-hash) value))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:25:01.027

你也可以在 Lisp 中使用 Prolog 实现。Prolog 提供了关系和断言事实的可能性，并且可以使用逻辑规则。

这是 LispWorks 中的一个简单关系：

```
==> (defrel capital ((capital finland helsinki)))
YES.
OK.

==> (capital finland ?city)

?CITY = HELSINKI
OK.

==> (and (= ?country finland) (capital ?country ?city))

?COUNTRY = FINLAND
?CITY = HELSINKI
OK. 
```

通常，Lisp 中的这样一个 Prolog 还提供了 Lisp 和嵌入式 Prolog 之间的访问。

# javascript - jQuery旋转功能不起作用

> ID：13617538
> 
> 赞同：2
> 
> 时间：2012-11-29T01:46:30.950
> 
> 标签：javascript, jquery, html, css, rotation

大家好，目前我正在尝试弄清楚如何旋转 div 并使其停在某个位置。我在这方面得到了一些帮助，但是我不确定我做错了什么。对代码的任何帮助都会很棒。

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T02:09:48.373

尝试将您的 javascript 代码更改为如下所示：

```
$(window).load(function(){
var $elie = $("#super");
rotate(1);

function rotate(degree) {
$elie.css({
'-webkit-transform': 'rotate(' + degree + 'deg)',
'-moz-transform': 'rotate(' + degree + 'deg)',
'-o-transform': 'rotate(' + degree + 'deg)',
'-ms-transform': 'rotate(' + degree + 'deg)',
'transform': 'rotate(' + degree + 'deg)'
});
console.log(degree);
if (degree < 100) {
timer = setTimeout(function() {
    rotate(++degree)
}, 1);
}} 
}); 
```

这里的演示：http: [//jsfiddle.net/ongisnade/mq8Ar/](http://jsfiddle.net/ongisnade/mq8Ar/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T02:05:54.593

看这里[http://jsbin.com/uwunaw/4/edit](http://jsbin.com/uwunaw/4/edit)

我添加 `var elie = null;`为全局变量并放入`elie = $("#super");`jQuery 的 onReady 中。

*像这样*

```
$(function () {
    elie = $("#super");
    rotate(1);
}); 
```

它现在正在工作。

# php - Zend 框架，视图

> ID：13617541
> 
> 赞同：0
> 
> 时间：2012-11-29T01:47:05.530
> 
> 标签：php, model-view-controller, zend-framework, view

小谜团：似乎无法在我的索引控制器（chartAction）和我的视图之间传递视图。当我转到我的本地主机时，它没有访问视图 phtml-而是每次都显示控制器（即：如果我`"echo "HELLO WORLD!"";`在控制器中写入，我会得到回显......但如果我这样做，`$this->view->test = "Hello World!"`则访问 index.phtml并输入`echo $this->test;`我什么都没有（它仍然默认为控制器操作）。这里有没有我遗漏的步骤？为什么我的`$this->view`不起作用？我使用命令行创建视图，所以我很确定应该设置正确。我需要注册一些东西吗？感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:27:30.127

**案例 1：仅针对一项操作禁用查看：**

在您的操作中查找以下代码。

```
 $this->_helper->viewRenderer->setNoRender(true); 
```

**案例 2：查看禁用特定控制器中的所有操作：在控制器** 的 init() 或 preDispatch() 函数中查找上述行。

**案例 3：所有控制器中的所有操作都禁用查看：** 检查案例 1 和 2。此外，在 Bootstrap.php 中查找类似以下内容：

```
 $frontController->setParam("noViewRenderer", true); 
```

如果你发现上面的代码，你必须注释掉它才能让视图正常工作。我相信有更多的可能性来禁用视图。这些将在此之后进行检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T07:27:57.420

假设 ZF1.x 的标准 MVC 设置，在 url、控制器和操作之间存在一定的关系。

url [http://mydomain.com/index](http://mydomain.com/index)会调用***索引控制器的******索引***动作，通常索引动作是默认动作并且被自动调用。视图脚本将是*`/application/views/scripts/index/index.phtml`*

 *url [http://mydomain.com/index/chart](http://mydomain.com/index/chart)将调用***索引控制器的******图表***操作，视图脚本将是*`/application/views/scripts/index/chart.phtml`*

 *请记住，此行为可以根据配置和路由选项进行更改。

听起来您在与 ZF 合作方面可能还很陌生。因此，以下内容可能有助于证明这种关系：

```
// application/controllers/IndexController.php
class IndexController extends Zend_Controller_Action
{
    public function init()
    {

    }

    public function indexAction()
    {
        $this->view->test = "Hello World, from the indexAction().";
    }
    public function chartAction()
    {
        $this->view->test = "Hello World, from the chartAction().";
    }

// application/views/scripts/index/index.phtml
<?php echo $this->test ?>

// application/views/scripts/index/chart.phtml
<?php echo $this->test ?> 
```

现在通过调用 url 来测试你的应用程序：

[http://yourDomain.com/index/index](http://yourDomain.com/index/index)
[http://yourDomain.com/index/chart](http://yourDomain.com/index/chart)

如果您的设置正确，您将在页面中看到正确的响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T04:19:39.477

您的视图被禁用..检查您`action`或`init`您的控制器中的这些代码行，甚至您`controller`可能正在扩展的类

`$this->_helper->layout->disableLayout(); $this->_helper->viewRenderer->setNoRender();`

更新

你在你的身上做这件事，在你的身上`chartAction`呼应`index.phtml`你必须在你的身上做`chart.phtml`**

# java - 不断变化的数据

> ID：13617542
> 
> 赞同：2
> 
> 时间：2012-11-29T01:47:06.413
> 
> 标签：java, android, webserver

这是我在 StackOverflow 上的第一个问题。我对这一切都很陌生。我知道你们在这里都很严格，所以在问这个问题之前我做了所有我能做的研究。不幸的是，我空了。

我正在构建一个显示每三个月发生一次的事件的应用程序。这个事件有不同的节目，经常变化。这就是我的应用程序的用武之地，它让人们了解活动中将发生的事情。所以当活动策划者改变他们的日程时，我需要它来更新我的用户。图片也需要换。显然，让他们更新应用程序并不是最简单的方法。

我知道我可以建立一个网页，并让应用程序读取它。但我真的希望有比这更简单的方法。如果网页是唯一的方法，那么最好的方法是什么`api`？

所以我的问题是；什么是最简单的方法来做到这一点，所以我可以做更多的研究？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:03:08.893

[https://www.parse.com/](https://www.parse.com/)

如果您只需要服务器上的一些基本数据，解析可能是您的最佳选择。您无需编写整个 Web 应用程序或从网页中抓取 html。如果您需要其他非技术用户来编写此数据，您可以制作一个“经理”版本的应用程序并包含一些身份验证逻辑（您也可以针对您的 Parse 帐户执行此操作）。当我没有时间为移动应用程序的一些非常基本的服务器交互编写整个 Web 应用程序时，我已经使用 Amazon S3 存储桶完成了这种事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:53:36.683

您将希望拥有一个您的应用程序可以与之通信的服务器。我会分两部分来做这件事，它们或多或少必须以相同的速度发生。首先，我会使用[Google 的 Cloud Messaging API](http://developer.android.com/guide/google/gcm/index.html)来完成“轻量级提升”——它让您的应用程序做一个小检查，看看是否有任何需要更新的东西。然后我会设置服务器。您显然需要学习如何打开连接、下载、存储等。

重要的是要记住，效率。小心传输的数据。保持简单将使您的应用程序（更少的代码，更简单）和您的用户（更小的应用程序，更少的数据使用）受益。

但首先，做研究，尝试一些东西，不要害怕提出问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T01:51:18.373

你不需要建立一个网页，你只需要一个应用程序可以查询的服务器

# struts2 - Maven Open JPA Plugin Enhance：似乎可以工作，但它没有增强我的实体

> ID：13617544
> 
> 赞同：1
> 
> 时间：2012-11-29T01:47:22.197
> 
> 标签：struts2, maven-3, netbeans-7, openjpa, openjpa-maven-plugin

当我编译我的 Maven 项目时，它说我的实体得到了增强。但是，当我通过 EntityManagerFactory 启动数据库连接时，此处的代码发生错误：em = factory.createEntityManager(); 我相信我已经遵循了网络中的所有步骤。但是我遇到了这个错误。请帮忙..关于这个有什么建议吗？非常感谢。

导致错误的代码的错误部分。

```
factory = Persistence.createEntityManagerFactory("LotMovementPU");
        em = factory.createEntityManager(); 
```

Tihs 是编译时的日志。

```
nothing to compile - all classes are up to date

[openjpa:enhance]
52  LotMovementPU  INFO   [main] openjpa.Tool - Enhancer running on type "class lotmovement.business.entity.UserProfile".

[resources:testResources]
[debug] execute contextualize
Using 'UTF-8' encoding to copy filtered resources.
skip non existing resourceDirectory C:\Users\god-gavedmework\Documents\NetBeansProjects\lotmovementMaven\src\test\resources

[compiler:testCompile]
No sources to compile

[surefire:test]
No tests to run.
Surefire report directory: C:\Users\god-gavedmework\Documents\NetBeansProjects\lotmovementMaven\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[war:war]
Packaging webapp

Warning: selected war files include a WEB-INF/web.xml which will be ignored 
(webxml attribute is missing from war task, or ignoreWebxml attribute is specified as 'true')
------------------------------------------------------------------------
BUILD SUCCESS
------------------------------------------------------------------------
Total time: 8.386s
Finished at: Thu Nov 29 14:21:58 NZDT 2012
Final Memory: 22M/437M
------------------------------------------------------------------------
NetBeans: Deploying on Apache Tomcat 7.0.27.0
    profile mode: false
    debug mode: true
    force redeploy: true 
```

进入 em.factory.createEntityManager() 时出错；

```
<openjpa-2.2.0-r422266:1244990 nonfatal user error> org.apache.openjpa.persistence.ArgumentException:  This configuration disallows runtime optimization, but the following listed types were not enhanced at build time or at class load time with a javaagent: "
lotmovement.business.entity.UserProfile". 
```

POM.XML

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.mycompany</groupId>
    <artifactId>LotMovement</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>LotMovement</name>

    <properties>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <netbeans.hint.deploy.server>Tomcat</netbeans.hint.deploy.server>
    </properties>

    <repositories>
        <repository>
            <id>JBoss Repo</id>
            <url>http://repository.jboss.com/maven2</url>
            <name>JBoss Repo</name>
        </repository>
        <repository>
            <id>ibiblio mirror</id>
            <url>http://mirrors.ibiblio.org/pub/mirrors/maven2/</url>
        </repository>
        <repository>
            <id>jboss-public-repository-group</id>
            <name>JBoss Public Maven Repository Group</name>
            <url>https://repository.jboss.org/nexus/content/groups/public/</url>
            <layout>default</layout>
            <releases>
                <enabled>true</enabled>
                <updatePolicy>never</updatePolicy>
            </releases>
            <snapshots>
                <enabled>true</enabled>
                <updatePolicy>never</updatePolicy>
            </snapshots>
        </repository>
        <repository>
            <url>http://ftp.ing.umu.se/mirror/eclipse/rt/eclipselink/maven.repo</url>
            <id>eclipselink</id>
            <layout>default</layout>
            <name>Repository for library Library[eclipselink]</name>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-convention-plugin</artifactId>
            <version>2.3.4</version>
        </dependency>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>org.apache.openjpa</groupId>
            <artifactId>openjpa</artifactId>
            <!-- set the version to be the same as the level in your runtime -->
            <version>2.2.0</version>
        </dependency>

        <dependency>
            <groupId>org.apache.openjpa</groupId>
            <artifactId>openjpa-all</artifactId>
            <version>2.2.0</version>
        </dependency>

        <dependency>
            <groupId>org.apache.openjpa</groupId>
            <artifactId>openjpa-maven-plugin</artifactId>
            <!-- set the version to be the same as the level in your runtime -->
            <version>2.2.0</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>

        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.12.1.GA</version>
        </dependency>

        <!-- Spring framework --> 
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring</artifactId>
            <version>2.5.6.SEC03</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>2.5.6.SEC03</version>
        </dependency>

        <!-- Struts 2 + Spring plugins -->
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-spring-plugin</artifactId>
            <version>2.3.7</version>
        </dependency>

        <dependency>
            <groupId>org.apache.derby</groupId>
            <artifactId>derbyclient</artifactId>
            <version>10.9.1.0</version>
        </dependency>

        <dependency>

            <groupId>org.apache.derby</groupId>

            <artifactId>derby</artifactId>

            <version>10.9.1.0</version>

        </dependency>

        <dependency>

            <groupId>org.apache.derby</groupId>

            <artifactId>derbynet</artifactId>

            <version>10.9.1.0</version>

        </dependency>

        <dependency>

            <groupId>org.apache.derby</groupId>

            <artifactId>derbytools</artifactId>

            <version>10.9.1.0</version>

        </dependency>

    </dependencies>

    <build>

        <resources>
            <resource>
                <directory> src/main/java </directory>
                <includes>
                    <include> **/*.xml </include>
                </includes>
            </resource>

        </resources>

        <plugins>

            <plugin>
                <groupId>org.apache.openjpa</groupId>
                <artifactId>openjpa-maven-plugin</artifactId>
                <version>2.2.0</version>
                <configuration>
                    <includes>lotmovement/business/entity/*.class</includes>
                    <addDefaultConstructor>true</addDefaultConstructor>
                    <enforcePropertyRestrictions>true</enforcePropertyRestrictions>

                    <!-- Pass additional properties to the Plugin here -->
                    <toolProperties>
                        <property>
                            <name>directory</name>
                            <value>otherdirectoryvalue</value>
                        </property>
                    </toolProperties>

                </configuration>
                <executions>
                    <execution>
                        <id>enhancer</id>
                        <phase>process-classes</phase>
                        <goals>
                            <goal>enhance</goal>
                        </goals>
                    </execution>
                </executions>

            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${endorsed.dir}</outputDirectory>
                            <silent>true</silent>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>javax</groupId>
                                    <artifactId>javaee-endorsed-api</artifactId>
                                    <version>6.0</version>
                                    <type>jar</type>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="LotMovementPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
    <jta-data-source>openjpa</jta-data-source>
    <class>lotmovement.business.entity.UserProfile</class>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="javax.persistence.jdbc.url" value="jdbc:derby://localhost:1527/sample"/>
      <property name="javax.persistence.jdbc.password" value="app"/>
      <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver"/>
      <property name="javax.persistence.jdbc.user" value="app"/>
      <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(ForeignKeys=true)"/>
    </properties>
  </persistence-unit>
</persistence> 
```

关于ANT风格的构建是这样的，这是在BUILD.XML中找到的可能我的enhancer没有post compile enhance吧？如果是，您如何在 Maven 中进行后期编译增强？

build.xml 以增强 ant 中的实体。

```
<target name="-post-compile">
        <!-- Empty placeholder for easier customization. -->
        <!-- You can override this target in the ../build.xml file. -->

          <echo message="begin openJPAC"/>
        <path id="openjpa.path.id">        
            <pathelement location="${build.classes.dir}"/>

             <!-- Adding the OpenJPA jars into the classpath -->
            <fileset dir="D:\openjpa\apache-openjpa-2.2.0\" includes="*.jar"/>
             <!--  or if you create a OpenJPA Library you can use that instead  -->
            <!--<pathelement path="${libs.OpenJPA.classpath}"/>-->
        </path>

        <taskdef name="openjpac" classname="org.apache.openjpa.ant.PCEnhancerTask">
            <classpath refid="openjpa.path.id"/>
        </taskdef>

        <openjpac>            
            <classpath refid="openjpa.path.id"/>
        </openjpac>
        <echo message="end openJPAC"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:12:07.543

我找到了解决方案。我删除了插件“openjpa-maven-plugin”并在 POM.XML -- Plugin 元素中用这个（请参阅下面的插件）替换它。编译它时，您将在下面看到此消息。请参阅编译消息。顺便说一句，我正在使用 Netbeans 7.2.1、Maven 和 struts2-spring 插件。

编译消息。[antrun:run] 执行任务 [java] 63 LotMovementPU INFO [main] openjpa.Tool - 在“lotmovement.business.entity.UserProfile”类型上运行的增强器。已执行的任务

POM.xml

```
<plugin>
        <artifactId>maven-antrun-plugin</artifactId>
        <executions>
          <execution>
            <phase>process-classes</phase>
            <configuration>
              <tasks>
                <java classname="org.apache.openjpa.enhance.PCEnhancer"
                      classpathref="maven.runtime.classpath"
                      dir="target/classes" fork="true" />
              </tasks>
            </configuration>
            <goals>
              <goal>run</goal>
            </goals>
          </execution>
        </executions>
      </plugin> 
```

# c - C中的Kruskal算法 - 无法保存到文件

> ID：13617548
> 
> 赞同：1
> 
> 时间：2012-11-29T01:47:45.177
> 
> 标签：c, algorithm, kruskals-algorithm

我在将结果保存到输出文件时遇到问题。该功能可能有问题，但我找不到并修复它。有人知道出了什么问题吗？

程序代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

int **str;
int *tab;

void read(){
    int n = 1;
    char help_sign;
    FILE *fp = fopen("In0303.txt", "r");
    if(fp == NULL){
        printf("Blad odczytu z pliku!");
    }

    while((help_sign = fgetc(fp)) != EOF){
        if (help_sign == '\n'){
            n++;
        }
    }
    fclose(fp);
}

void gen(){
    int i, n;
    int **str;

    str =(int**)malloc(n*sizeof(int*));

    for (i = 0; i < n; i++){
        str[i] = (int*)malloc(4*sizeof(int));
    }
}

void load_date(){
    int i, n;
    int **str;

    FILE *fp = fopen("In0303.txt", "r");

    for (i = 0; i < n; i++){
        fscanf(fp, "%d" , &str[i][0]);
        fscanf(fp, "%d" , &str[i][1]);
        fscanf(fp, "%d" , &str[i][2]);
        str[i][3]=0;
    }
    fclose(fp);
}

void gen_tab(){
    int i, n, k = 0;
    int **str;
    int *tab;

    for (i = 0; i < n; i++){
        if (str[i][0] > k) k = str[i][0];
        if (str[i][1] > k) k = str[i][1];
    }

    tab = (int*)malloc(k*sizeof(int));

    for (i = 0; i < k; i++){
        tab[i] = i + 1;
    }
}

void sort(){
    int i, n, j,tmp;
    int **str;

    for (i = 0; i < n-1; i++)
        for (j = i+1; j < n; j++){
            if (str[i][2] > str[j][2]){
                tmp = str[i][0];
                str[i][0] = str[j][0];
                str[j][0] = tmp;
                tmp = str[i][1];
                str[i][1] = str[j][1];
                str[j][1] = tmp;
                tmp = str[i][2];
                str[i][2] = str[j][2];
                str[j][2] = tmp;
            }
        }
}

int min(int x, int y){
    if (x > y) return y;
    else return x;
}

int max(int x, int y){
    if (x < y) return y;
    else return x;
}

void make(){
    int i, j, min1, max1, p, q, n, k;
    int *tab;
    int **str;
    for (i = 0; i < n; i++){
        if (tab[((str[i][0])-1)] != tab[((str[i][1])-1)]){
            str[i][3] = 1;
            min1 = min(tab[((str[i][0])-1)], tab[((str[i][1])-1)]);
            max1 = max(tab[((str[i][0])-1)], tab[((str[i][1])-1)]);

            for (j = 0; j < k; j++){
                if (tab[j] == max1)
                    tab[j] = min1;
            }
        }
    }
}

void save(){
    int i, n;
    int **str;
    int *tab;

    FILE *g = fopen("Out0303.txt","w");

    for (i = 0; i < n; i++){
        if (str[i][3] == 1){
            fprintf(g, "%d ", str[i][0]);
            fprintf(g, "%d ", str[i][1]);
            fprintf(g, "%d\n", str[i][2]);
        }
    }
    fclose(g);
}

int main(){
    read();
    gen();
    load_date();
    gen_tab();
    sort();
    make();
    save();

    printf("Wyniki zapisane do pliku!\n");
    free(str);
    free(tab);
    return 0;
} 
```

这是输入文件（“In0303.txt”）：

```
9 17
2 3 8 4 9 8
1 3 3 6 4 5 9 6
2 6 4 4 9 1
2 5 3 4 5 3 9 2
4 3 6 1 9 5
5 1 7 5 9 2
6 5 8 4 9 2
1 4 7 4 9 2
1 8 2 6 3 1 4 2 5 5 6 2 7 2 8 2 
```

这就是应该在输出文件中创建的内容：（“Out0303.txt”）：

```
17
3 9 [1]
5 6 [1]
4 9 [2]
6 9 [2]
7 9 [2]
8 9 [2]
1 2 [3]
1 8 [4] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:50:50.290

副手 - 在您的保存功能中，您没有分配给“n”

扩大一点。您似乎想使用“n”作为全局变量，但您声明它的本地实例，因此该值不会在函数中保留。您可以将其设为全局或传递它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T01:53:55.207

添加到 DrC 答案：

这段代码：

`for (i = 0; i < n; i++){`

如果你不设置 n，那么你在 gen()、gen_tab()、load()、save() 和几乎所有其他函数中都会犯这个错误。

# c# - 用递归求解有向图

> ID：13617549
> 
> 赞同：2
> 
> 时间：2012-11-29T01:47:47.107
> 
> 标签：c#, sql-server, recursion, graph, recursive-query

我正在研究一个建立从机场到机场的航线的项目。例如，如果有人想从 LAX 到 JFK，我想返回从 LAX 到 JFK 的所有可能路径（最多 n 个连接）。我一直在努力使用递归 CTE 将此示例转换为 MS SQL（这是文档中的最后一个示例）：http: [//publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp ?topic= %2Fsqlp%2Frbafyrecursivequeries.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=/sqlp/rbafyrecursivequeries.htm)

我已经能够复制结果，起初这很棒。然而，对大约 20 条记录执行基于集合的递归比在几十万条记录（现实世界的直飞航班）上执行相同任务要快很多。

所以这是我的问题：谁能帮我找出一种更快的方法来找到从一个机场到另一个机场的飞行路径？我正在使用 MS SQL 和 .NET 从头开始​​构建这个东西，但我愿意使用几乎任何东西来快速返回结果（基于集合的递归、迭代（任何语言）等）。

理想情况下，我希望结果的返回速度与 Google 航班返回数据的速度一样快（[https://www.google.com/flights/](https://www.google.com/flights/)）。

这是迄今为止我在 MS SQL 中的 rCTE。注意：它只是从纽约创建所有可能的路径。要将范围缩小到从纽约到巴黎的所有航班，我们需要将查询的最后一行更改为 FROM destinations WHEREarrival = 'Paris'。

创建一个测试表，FLIGHTS：

```
CREATE TABLE FLIGHTS (DEPARTURE nvarchar(20),
                      ARRIVAL nvarchar(20), 
                      CARRIER nvarchar(15),
                      FLIGHT_NUMBER nvarchar(5), 
                      PRICE decimal(18, 0)) 
```

将数据插入测试表：

```
INSERT INTO FLIGHTS VALUES('New York', 'Paris', 'Atlantic', '234', 400)
INSERT INTO FLIGHTS VALUES('Chicago', 'Miami', 'NA Air', '2334', 300)
INSERT INTO FLIGHTS VALUES('New York', 'London', 'Atlantic', '5473', 350)
INSERT INTO FLIGHTS VALUES('London', 'Athens'  , 'Mediterranean', '247', 340)
INSERT INTO FLIGHTS VALUES('Athens', 'Nicosia' , 'Mediterranean', '2356', 280) 
INSERT INTO FLIGHTS VALUES('Paris', 'Madrid' , 'Euro Air',  '3256', 380)
INSERT INTO FLIGHTS VALUES('Paris', 'Cairo' , 'Euro Air', '63', 480)
INSERT INTO FLIGHTS VALUES('Chicago', 'Frankfurt', 'Atlantic', '37', 480)
INSERT INTO FLIGHTS VALUES('Frankfurt', 'Moscow', 'Asia Air', '2337', 580)
INSERT INTO FLIGHTS VALUES('Frankfurt', 'Beijing', 'Asia Air',  '77', 480) 
INSERT INTO FLIGHTS VALUES('Moscow', 'Tokyo', 'Asia Air', '437', 680)
INSERT INTO FLIGHTS VALUES('Frankfurt', 'Vienna', 'Euro Air', '59', 200)
INSERT INTO FLIGHTS VALUES('Paris', 'Rome', 'Euro Air', '534', 340)
INSERT INTO FLIGHTS VALUES('Miami', 'Lima', 'SA Air', '5234', 530)
INSERT INTO FLIGHTS VALUES('New York', 'Los Angeles', 'NA Air', '84', 330)
INSERT INTO FLIGHTS VALUES('Los Angeles', 'Tokyo', 'Pacific Air', '824', 530)
INSERT INTO FLIGHTS VALUES('Tokyo', 'Hong Kong', 'Asia Air', '94', 330)
INSERT INTO FLIGHTS VALUES('Washington', 'Toronto', 'NA Air', '104', 250) 
```

这是 rCTE：

```
WITH

destinations (origin, departure, arrival, flight_count, itinerary) AS    
    (
        SELECT a.departure, a.departure, a.arrival, 1, CAST(a.departure + ', ' + a.arrival AS VARCHAR(2000))
                FROM [FLIGHTS] a
                WHERE a.departure = 'New York'
         UNION ALL
         SELECT r.origin, b.departure, b.arrival, r.flight_count + 1, CAST(r.itinerary + ', ' + b.arrival AS VARCHAR(2000))
                FROM destinations r, [FLIGHTS] b
                WHERE r.arrival = b.departure
                -- prevent cycles by making sure the new arrive airport is not already listed in the itinerary
                and CAST(r.itinerary AS VARCHAR(2000)) NOT LIKE '%' + b.arrival + '%'
                -- the itinerary is a csv str so we can limit the number of hops here
                and (LEN(CAST(r.itinerary AS VARCHAR(2000))) - LEN(REPLACE(CAST(r.itinerary AS VARCHAR(2000)), ',', ''))) < 3
    )

SELECT origin, departure, arrival, flight_count, itinerary 
    FROM destinations 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T03:42:22.740

以下是一些琐碎的观察：

1.  如果不使用正确的索引，您将永远无法优化它，即至少需要索引键。
2.  `NOT LIKE '%' + b.arrival + '%'`不会很快工作（很难索引这种表达式）。需要另一种检查已列出机场的方法，可能将项目存储在临时表中。
3.  需要一种不同的方式来限制跳数。由于您只需要三个跃点，因此您最好使用 3 个连接而不是递归，这样会快得多。

清单可以继续下去；构建像谷歌航班一样快的东西**并不容易**。

# java - 双打列表，打印一个字符串

> ID：13617555
> 
> 赞同：0
> 
> 时间：2012-11-29T01:48:11.300
> 
> 标签：java, type-conversion

我有一个值列表（天气数据），编写列表的人在没有要报告的值时使用值“9999”。我导入了文本文件并使用以下代码获取数据并对其进行编辑：

```
import java.io.*;
import java.util.*;

public class weatherData {

public static void main(String[] args)
        throws FileNotFoundException{
    Scanner input = new Scanner(new File("PortlandWeather2011.txt"));
    processData(input);
}

public static void processData (Scanner stats){
    String head = stats.nextLine();
    String head2 = stats.nextLine();
    System.out.println(head);
    System.out.println(head2);
    while(stats.hasNextLine()){
        String dataLine = stats.nextLine();
        Scanner dataScan = new Scanner(dataLine);
        String station = null;
        String date = null;
        double prcp = 0;
        double snow = 0;
        double snwd = 0;
        double tmax = 0;
        double tmin = 0;
        while(dataScan.hasNext()){
            station = dataScan.next();
            date = dataScan.next();
            prcp = dataScan.nextInt();
            snow = dataScan.nextInt();
            snwd = dataScan.nextInt();
            tmax = dataScan.nextInt();
            tmin = dataScan.nextInt();
            System.out.printf("%17s %10s %8.1f %8.1f %8.1f %8.1f %8.1f \n", station, date(date), prcp(prcp), inch(snow), inch(snwd), temp(tmax), temp(tmin));
        }
    }

}
public static String date(String theDate){
    String dateData = theDate;
    String a = dateData.substring(4,6);
    String b = dateData.substring(6,8);
    String c = dateData.substring(0,4);
    String finalDate = a + "/" + b + "/" + c;
    return finalDate;

}

public static double prcp(double thePrcp){
    double a = (thePrcp * 0.1) / 25.4;
    return a;
}

public static double inch(double theInch){
    double a = theInch / 25.4;
    if(theInch == 9999){
        a = 9999;
    }
    return a;
}

public static double temp(double theTemp){
    double a = ((0.10 * theTemp) * 9/5 + 32);
    return a;
}
} 
```

我遇到的问题是取值并检查所有时间“9999”出现，并打印出“----”。我不知道如何接受 double 类型的值，并打印出一个字符串。

此代码获取值并检查值 9999，但不对其执行任何操作。这就是我的问题所在：

```
public static double inch(double theInch){
    double a = theInch / 25.4;
    if(theInch == 9999){
        a = "----";
    }
    return a;
} 
```

如果我在这个问题上提供了很多信息，我很抱歉。如果您需要我澄清，请询问。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T01:52:39.527

您需要修改`inch`函数以返回字符串，而不是双精度。

```
public static String inch(double theInch){
    if(theInch == 9999){
        return "----";
    }
    return Double.toString(theInch/25.4);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T01:55:09.903

我认为第一个问题可能是您正在从`Scanner`as`int`而不是`double`s 中读取所有值。例如，根据您的`System.out.println()`陈述，我认为您实际上应该阅读以下数据类型...

```
 prcp = dataScan.nextDouble();
        snow = dataScan.nextDouble();
        snwd = dataScan.nextDouble();
        tmax = dataScan.nextDouble();
        tmin = dataScan.nextDouble(); 
```

此外，看起来该方法似乎`inch()`只会在该`System.out.println()`行中使用，您需要将其更改为 a`String`作为返回类型......

```
public String inch(double theInch){
    if (theInch == 9999){
        return "----";
    }
    return ""+(theInch/25.4);
} 
```

# java - 与 Ubuntu 的 Unity 的非图书馆员 Java 集成

> ID：13617558
> 
> 赞同：0
> 
> 时间：2012-11-29T01:48:27.327
> 
> 标签：java, integration, menubar, jmenubar, ubuntu-unity

我希望我的 Java 应用程序与 Ubuntu 11+ 中的 Unity UI 集成，但我只想分发一个 JAR，并且希望它只有我的代码（它可能在我的投资组合中）。**有什么办法可以将 a 的内容`JMenuBar`放入 Unity 菜单栏中？**我看到[SO 上已经有一个解决方案](https://stackoverflow.com/questions/6865552/how-to-ubuntu-11-04-java-swing-swt-menu-in-headerlike-in-mac-os)，并且我已经通过`System.setPropety`调用为 OS X 执行此操作，但我也希望能够在 Ubuntu 中使用我自己的代码执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:26:43.670

从技术上讲，这是可能的，可以通过源代码上的“one-jar”库，或者使用proguard obsuscation。但是这两种技术都可能违反您要包含的库的许可条件。
对于 Proguard：使用 -injars 将 jar 集成到您的一个 jar 中。
Proguard 主页链接：http: [//proguard.sourceforge.net/](http://proguard.sourceforge.net/)

更多信息请参见 proguard 的主页。
另一种技术通常被称为“罐中罐”。

# c# - HTTP/1.1 415 无法处理消息，因为内容类型为 'application/json; charset=utf-8' 不是预期的类型 'text/xml; 字符集=utf-8'

> ID：13617561
> 
> 赞同：6
> 
> 时间：2012-11-29T01:48:39.513
> 
> 标签：c#, wcf

尝试将 json 字典发布到 C# WCF，当我调用它时 HTTP 响应 415。有人可以告诉我我的代码有什么问题。

对象类

```
 [DataContract]
public class Class1
{
    [DataMember]
    public string AccNo;
     [DataMember]
    public string CompanyName;
     [DataMember]
    public string DocDate;
} 
```

IService1.cs

```
 [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "json/PostSalesOrderData", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]
        string PostSalesOrderData(string data); 
```

服务1.svc.cs

```
 public string PostSalesOrderData(string data)
    {

        JavaScriptSerializer serializer = new JavaScriptSerializer();

        Dictionary<string, Class1> dict = serializer.Deserialize<Dictionary<string, Class1>>(data);

        return dict["Debtor"].AccNo.ToString();
    } 
```

小提琴细节

HTTP/1.1 415 无法处理消息，因为内容类型为 'application/json; charset=utf-8' 不是预期的类型 'text/xml; 字符集=utf-8'。服务器：Microsoft-IIS/7.5 X-Powered-By：ASP.NET 日期：2012 年 11 月 29 日星期四 01:21:55 GMT 内容长度：0

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T02:54:52.413

您的服务的端点未正确配置为接收 JSON 输入。为了使该`[WebInvoke]`属性受到尊重，您的端点需要具有`webHttpBinding`，并且它还应该具有类型的端点行为`<webHttp/>`

确保正确配置的一种简单方法是使用`Factory`.svc 文件上的属性。类似于下面的示例：

```
<%@ ServiceHost Language="C#" Debug="true"
                Service="YourNamespace.YourServiceClass"
                Factory="System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

# jquery - 显示一个剪裁的 div

> ID：13617562
> 
> 赞同：1
> 
> 时间：2012-11-29T01:48:43.180
> 
> 标签：jquery, css

根据下面的代码，我希望能够将鼠标悬停在 SubBlockA（或 B）上，并根据要显示的大块的大小来隐藏当前隐藏的剪辑信息。更具体地说，当前 subBlockA 被剪裁为 K，当我将鼠标悬停在 subBlockA 上时，我希望能够显示其余的文本而不影响结构的其余部分。我不确定这是否可以通过 CSS 实现，或者我是否需要使用工具提示样式并在 DIV 上显示一些内容。有什么建议么

[http://jsfiddle.net/randallmeeker/6bVmb/](http://jsfiddle.net/randallmeeker/6bVmb/)

```
<style>
div {
    display: block;
    clear: left;
    overflow: hidden;
}
#bigBlock {
    width: 100px; 
}
.nowrap{
    white-space: nowrap;
}
​&lt;/style>
<div id="bigBlock">
    <div id="subBlockA" class="nowrap">ABCDEFGHIJKL MNOPQRSTUVWXYZ</div>
    <div id="subBlockB" class="nowrap">12345678901 234567890</div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:53:24.210

使用 css 和 可以很容易地做到这一点`:hover`：

[http://jsfiddle.net/6bVmb/1/](http://jsfiddle.net/6bVmb/1/)

# php - 移动服务器后 MySQL 数据库出现故障

> ID：13617563
> 
> 赞同：0
> 
> 时间：2012-11-29T01:49:04.430
> 
> 标签：php, mysql, phpmyadmin

我刚刚从一台服务器导出了一个 MySQL 数据库并将其导入另一台服务器。但是，我的应用程序（WordPress）可以从数据库中读取一些信息，但不能读取其他信息。例如，WordPress 仍然可以访问这些帖子，但永久链接被弄乱了。现在，我的博客因此而有很多问题。我记得以前遇到过这个问题，但我忘记了我是如何解决的。旧服务器版本是`5.5.16-log`，新服务器是`5.5.28-0ubuntu0.12.04.2`。

如何使用 phpMyAdmin 解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:34:35.667

[http://interconnectit.com/124/search-and-replace-for-wordpress-databases/](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)帖子的路径是绝对路径，并作为序列化数据存储在数据库中。请阅读此链接以了解如何安全迁移 Wordpress 安装。

# orm - 将每个地址转换为 dbf 形状数据中的纬度/经度的 GIS 数据文件

> ID：13617565
> 
> 赞同：1
> 
> 时间：2012-11-29T01:49:21.240
> 
> 标签：orm, gis, geocoding, shapefile

我需要来自 GIS 数据的纬度/经度

我有来自 [http://www.mngeo.state.mn.us/chouse/land_own_property.html的数据文件](http://www.mngeo.state.mn.us/chouse/land_own_property.html)

以 .dbf、.prj、.sbn、.sbx、.shp 和 .shx 格式给出

在 .dbf 我看到

```
PIN, Shape_area, Shape_len
PARC_CODE   Parcel Polygon to Parcel Point numeric  2  
            and PIN Relationship Code 
```

并在 .prj

```
PROJCS["NAD_1983_UTM_Zone_15N",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-93.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]] 
```

我也知道每个县的多边形点

```
polygons points 
Anoka 129139 129138 
Carver 38134 38133 
Dakota 135925 150294 
Hennepin 422976 446623 
Ramsey 149169 168233 
Scott 55191 55191 
Washington 98915 103915 
```

我知道边界坐标

```
-94.012 
-92.732 
45.415 
44.471 
```

似乎有大量的 GIS 软件应用程序 [http://en.wikipedia.org/wiki/List_of_geographic_information_systems_software](http://en.wikipedia.org/wiki/List_of_geographic_information_systems_software)

但我需要做什么？

我想要每个房子的纬度，经度

有图书馆可以为我做这件事吗？我需要什么数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:57:58.237

我认为您需要安装一个 GIS 软件。您可以尝试开源[Qgis](http://www.qgis.org/)。

因为，首先您的数据不在长/纬度（地理）坐标中。shapefile 的 .prj 部分（是的，所有同名的 .dbf、.prj、.sbn、.sbx、.shp 和 .shx 文件都是 GIS 的一个 shapefile）表示数据位于投影坐标系中NAD 1983 UTM 区 15N。因此，您需要将数据[转换](http://kartoweb.itc.nl/geometrics/coordinate%20transformations/coordtrans.html)为地理系统。这可以在 GIS 中轻松完成，或者通过[proj.4](https://trac.osgeo.org/proj/)库以编程方式完成。（在 Qgis 中将 shapefile 添加到项目中，然后在目录中选择它，鼠标右键并选择“另存为...”。它会要求您提供目标坐标系。）注意，您需要决定您希望使用哪个地理坐标，因为您的数据位于北美基准 (NAD 1983)，但现在全球最常见的是 WGS 1984。

其次，在 GIS 中，您将看到您的数据，它们是真正的点还是多边形。（如果你的房子是多边形，你需要在 Qgis 菜单 Vector - Geometry Tools - Polygon Centroids 中获取它们的质心）。

最后，当您真正将房屋作为地理坐标中的点时，您可以获取它们的坐标，例如使用这些问题的建议[Get list of coordinates for points in a layer](https://gis.stackexchange.com/questions/8844/get-list-of-coordinates-for-points-in-a-layer)和[How do I calculate the latitude and longitude of points using QGIS](https://gis.stackexchange.com/questions/7199/how-do-i-calculate-the-latitude-and-longitude-of-points-using-qgis)。

此外，还有一个很好的库来处理 GIS 矢量数据，[OGR](http://www.gdal.org/ogr/)，它可以被许多编程语言使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:59:23.690

上面的文件扩展名显示，这些文件是 ESRI 形状文件格式。在 Java 中，您可以使用 GeoTools 库来阅读它。

下面的示例显示了第一行，在 Internet 上搜索更完整的示例。

```
// init shapefile
        File shpFile = new File(fileName);
        if (!shpFile.exists()) {
            LOGGER.fatal(fileName + " does not exist");
        }

        Map<String, URL> connect = new HashMap<String, URL>();
        FeatureCollection collection = null;
        FeatureIterator iterator = null;
        try {
            connect.put("url", shpFile.toURI().toURL());

            DataStore dataStore = DataStoreFinder.getDataStore(connect);
            String typeName = dataStore.getTypeNames()[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T20:42:47.740

“I want the lat, lon of every house”表明您想要做的是称为[地理编码](https://en.wikipedia.org/wiki/Geocoding)的过程。您可以使用一些服务，有些是免费的（用于有限用途）有些不是。您可以从查看[地理编码系统列表](https://en.wikipedia.org/wiki/List_of_geocoding_systems)开始，了解从哪里开始。我认为您不想从学习 GIS 或 shapefile 开始，而是要提取您尝试进行地理编码的地址。

您可以通过计算每个地块的质心来估计每个房屋的纬度/经度。您可以通过计算每个地块的边界矩形的质心来更粗略地估计每个房屋的纬度/经度。其中任何一个都需要提取地块坐标。如果您对明尼苏达州的每所房子都这样做，您将处理大量数据。地理编码服务会更便宜。[人口普查地理编码器](https://www.census.gov/geo/maps-data/data/geocoder.html)可能会有所帮助。

# forms - 有没有像 JasperForm 这样的东西

> ID：13617567
> 
> 赞同：0
> 
> 时间：2012-11-29T01:50:35.087
> 
> 标签：forms, jasperserver

我正在使用 Jaspersoft iReport & Jasperserver，

我想从 Jasperserver 中的用户那里获取许多输入并使用这些值，想在服务器的后端生成动态查询 mysql 以显示报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:37:04.040

您可以使用 JasperReports Server 的输入控件来填充您的查询。您可以在 JasperForge 站点[http://community.jaspersoft.com/documentation?version=5218](http://community.jaspersoft.com/documentation?version=5218)查看文档- 查找 JasperReports Server 用户指南，或者如果您购买了专业版，您可以通过支持门户查看它在[http://community.jaspersoft.com/documentation?version=5218](http://community.jaspersoft.com/documentation?version=5218)。

# python - 以最 Pythonic 的方式替换字符串的第一个和最后一个单词

> ID：13617572
> 
> 赞同：7
> 
> 时间：2012-11-29T01:50:53.233
> 
> 标签：python, python-2.7

我正在寻找最pythonic的方法来替换字符串的第一个和最后一个单词（由于各种原因，以字母为基础进行操作是行不通的）。为了演示我正在尝试做的事情，这里有一个例子。

```
a = "this is the demonstration sentence." 
```

我希望我的 python 函数的结果是：

```
b = "This is the demonstration Sentence." 
```

棘手的部分是字符串的前面或结尾可能有空格。我需要保存这些。

这就是我的意思：

```
a = " this is a demonstration sentence. " 
```

结果需要是：

```
b = " This is a demonstration Sentence. " 
```

也会对正则表达式是否比 python 的内置方法更好地完成这项工作的意见感兴趣，反之亦然。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T02:11:12.947

```
import re
a = " this is a demonstration sentence. "
print(re.sub(r'''(?x)      # VERBOSE mode
             (             # 
              ^            # start of string
              \s*          # zero-or-more whitespaces 
              \w           # followed by an alphanumeric character
              )        
             |             # OR
             (
             \w            # an alphanumeric character
             \S*           # zero-or-more non-space characters
             \s*           # zero-or-more whitespaces
             $             # end of string
             )
             ''',
             lambda m: m.group().title(),
             a)) 
```

产量

```
 This is a demonstration Sentence. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:55:34.937

这对你有用吗：

```
In [9]: a = "this is the demonstration sentence."

In [10]: left, _, right = a.strip().partition(' ')

In [11]: mid, _, right = right.rpartition(' ')

In [12]: Left = left.title()

In [13]: Right = right.title()

In [14]: a = a.replace(left, Left, 1).replace(right, Right, 1)

In [15]: a
Out[15]: 'This is the demonstration Sentence.' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T02:09:09.453

这是一个正则表达式解决方案：

```
def cap(m):
    return m.group(0).title()

re.sub(r'(?:^\s*\w+)|(?:[^\s]+\s*$)',cap," this is a demonstration sentence. ")
' This is a demonstration Sentence. ' 
```

对不起，这是我能做的最好的...

正则表达式分解：

```
(?:^\s*\w+)    #match (optional) whitespace and then 1 word at the beginning of the string
|              #regex "or"
(?:[^\s]+\s*$) #match a string of non-whitespace characters followed by (optional) whitespace and the end of the line. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T02:26:47.613

类似于inspectorG4dget，但使用`.rsplit()`给它*maxsplit*参数，而`.capitalize()`不是。

注意：`.split()`还接受一个可选的*maxsplit*参数，从左侧拆分。

```
>>> a = " this is a demonstration sentence. "
>>> part_one, part_two = a.rsplit(" ", 1)
>>> " ".join([part_one.capitalize(), part_two.capitalize()])
'This is the demonstration Sentence.' 
```

`.rsplit()`从右侧拆分文本，其中*maxsplit*参数告诉它要执行多少次拆分。该值`1`将为您从右侧提供一个“*拆分”。*

```
>>> a.rsplit(" ", 1)
['this is the demonstration', 'sentence.'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T02:33:40.393

```
sentence = " this is a demonstration sentence. "
sentence = sentence.split(' ')  # Split the string where a space occurs

for word in sentence:
    if word:  # If the list item is not whitespace
        sentence[sentence.index(word)] = word.title()
        break  # now that the first word's been replaced, we're done

# get the last word by traversing the sentence backwards
for word in sentence[::-1]:
    if word:
        sentence[sentence.index(word)] = word.title()
        break

final_sentence = ' '.join(sentence) 
```

# html - 为什么在这种情况下使用自闭合标签会产生如此突出和奇异的效果？

> ID：13617574
> 
> 赞同：6
> 
> 时间：2012-11-29T01:50:56.193
> 
> 标签：html, xml, xhtml

> **可能重复：**
> [可以使用 <span /> 关闭跨度吗？](https://stackoverflow.com/questions/2816833/can-a-span-be-closed-using-span)

```
<p>This is a test <span id='span1' style='display:inline-block;'></span> to see if I can embed an inline block.</p>

<p>This is a test <span id='span2' style='display:inline-block;'/> to see if I can embed an inline block.</p>​ 
```

[http://jsfiddle.net/T7ByE/](http://jsfiddle.net/T7ByE/)

第一行嵌入了一个带有常规结束标签的跨度，而第二行使用了一个自结束标签。第一行工作正常，而第二行有一个奇怪的结果。

我只是好奇为什么在每种情况下对元素的处理会有如此大的差异。我知道在非严格的 xhtml 下，自闭标签并没有得到很好的支持。似乎自动关闭标签被视为只是一个开放标签。

*现代浏览器仍然不支持自关闭 html 标签是否有充分的理由？我是否希望更改文档类型或其他内容以使其正常工作？*

具有讽刺意味的是，我实际上是从一个显式的结束标记开始的，但是通过浏览器的 xml 解析器运行它并返回到 html，并且解析器感觉就像将空元素折叠成一个自关闭标记，这很快就破坏了一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:46:44.707

> 现代浏览器仍然不支持自关闭 html 标签是否有充分的理由？

向后兼容性。

> 我是否希望更改文档类型或其他内容以使其正常工作？

您想使用 XML，您需要以 XML 格式[发送您的文档](http://www.hixie.ch/advocacy/xhtml)（`application/xhtml+xml`具体来说，是 ）。这主要与 MIME 类型有关，与 doctype 无关。当然，[没有办法让它在 IE <9 中工作](http://caniuse.com/#feat=xhtml)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T02:16:28.753

Web 浏览器有 DOM 检查器，可以向我们展示生成的 DOM 树的结构。例如，在 Firebug 中：

![在此处输入图像描述](../Images/2a1a8e4ea15e8de228a87cfd69367ef6.png)

如您所见，Firefox 无法识别自闭合标签，而是将其视为开始标签。Firefox 将在该 SPAN 元素到达段落末尾时自动关闭它，这意味着 SPAN 将包含该段落的剩余文本。

现在，由于您将 DIV 元素插入到 SPAN 元素中，因此 DIV 将放置在该 SPAN 元素的文本内容下方。这是因为 DIV 元素是块级元素。出现在文本内容之后的块级元素布置在该文本内容下方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T02:35:06.650

当你自我封闭一个像跨度这样的标签时，据我所知***，你实际上并没有自我封闭它——那些标签没有那种能力。你实际上在做的是让它保持打开状态。当你把东西打开时，浏览器会自由地关闭它们，通常是在它们父母的结束标签的末尾。

因此，在您的示例中，在 nº2 的情况下，您会得到一个一直到 p 元素末尾的内联块。现在，在该行内块中，您要附加一个块级元素。好吧，一次又一次……通过将块放入内联（内联块）中，浏览器获得了另一种自由，并且（基本上）将块元素周围的所有内容放入所需的块级元素中到（那是一两个 - 不多了）。

在您的情况下，您会在插入的 div 之前的文本周围获得一个“匿名”块（“看看我是否可以嵌入一个内联块。”）。

由于块垂直堆叠，因此您在第二段中获得的外观也就不足为奇了。

在以下位置查看彩色小提琴：jsfiddle.net/T7ByE/1/（不可点击）以更好地查看它。

**相关链接**
[display:block inside display:inline](https://stackoverflow.com/questions/1371307/displayblock-inside-displayinline)

***它[看起来似乎](https://stackoverflow.com/questions/2816833/can-a-span-be-closed-using-span)取决于您的内容类型，跨度实际上可以是自封闭的*

# c++ - 来自多个来源的 BFS 上的 TLE

> ID：13617579
> 
> 赞同：0
> 
> 时间：2012-11-29T01:51:48.823
> 
> 标签：c++, graph-theory, breadth-first-search

我正在尝试解决这个问题：[http](http://olimpiada-informatica.org/?cmd=downloadE&pbm=velo101&ext=pdf) ://olimpiada-informatica.org/?cmd=downloadE&pbm=velo101&ext=pdf它是西班牙语，但我会尝试在这里翻译：

> 当您发现有人在着陆跑道上释放了一些迅猛龙时，您即将降落在地球上。
> 着陆行程呈矩形。我们用一个点标记`(.)`一个空点，用一个`V`velociraptors 和一个`#`有障碍物的点（你不能降落在它们上面）。
> 迅猛龙需要一秒钟才能到达另一个地点，但它们只能水平和垂直移动。
> 你被要求用`X`那些点来标记，在这些点上，你会最大限度地延长你的剩余寿命。

我已经完成了一个算法，在该算法中，我获取了迅猛龙的每个位置并在每个位置上进行了 BFS，但是我得到了 TLE，这是我的代码：

[http://ideone.com/a6BVv3](http://ideone.com/a6BVv3)

```
#include <algorithm>
#include <cstdio>
#include <cstring>
#include <queue>
#include <utility>
using namespace std;

int cost[501][501],xx,yy,n,m;
char mat[501][501];
bool visit[501][501],first = true;

int a[] = {-1,0,0,1}, b[] = {0,-1,1,0};

void check(int x,int y,int level) {
  cost[x][y] = level;
  for(int i = 0; i < 4; ++i) {
    xx = x + a[i];
    yy = y + b[i];
    if(0 <= xx and xx < n and 0 <= yy and yy < m and mat[xx][yy] == '.') {
      if(!visit[xx][yy] or level + 1 < cost[xx][yy]) {
        visit[xx][yy] = true;
        check(xx,yy,level + 1);
      }
    }
  }
}

int max() {
  int r = -1;
  for(int i = 0; i < n; ++i) for(int j = 0; j < m; ++j) if(mat[i][j] == '.') r = max(r,cost[i][j]);
  return r;
}

void show() {
  if(!first) puts("---");
  int r = max();
  for(int i = 0; i < n; ++i) {
    for(int j = 0; j < m; ++j) {
      if(cost[i][j] == r) printf("X");
      else printf("%c",mat[i][j]);
    }
    puts("");
  }
}

int main() {
  while(scanf("%d %d",&n,&m) == 2) {
    queue<pair<int,int> > cola;
    for(int i = 0; i < n; ++i) {
      scanf("\n");
      for(int j = 0; j < m; ++j) {
        scanf("%c",&mat[i][j]);
        if(mat[i][j] == 'V') cola.push(make_pair(i,j));
      }
    }
    memset(cost,-1,sizeof cost);
    memset(visit,0,sizeof visit);
    while(!cola.empty()) {
      pair<int,int> aux = cola.front();
      visit[aux.first][aux.second] = true;
      check(aux.first, aux.second,0);
      cola.pop();
    }
    show();
    first = false;
  }
  return 0;
} 
```

有谁知道我该如何改进我的算法？

编辑

好的，我能够解决问题，如果有人感兴趣，这里是代码：

```
#include <algorithm>
#include <cstdio>
#include <cstring>
#include <queue>
#include <utility>
using namespace std;

int cost[501][501],n,m;
char mat[501][501];
bool visit[501][501],first = true;
queue<pair<int,int> > cola;

int a[] = {-1,0,0,1}, b[] = {0,-1,1,0};

int max() {
  int r = -1;
  for(int i = 0; i < n; ++i) for(int j = 0; j < m; ++j) if(mat[i][j] == '.') r = max(r,cost[i][j]);
  return r;
}

void show() {
  if(!first) puts("---");
  int r = max();
  for(int i = 0; i < n; ++i) {
    for(int j = 0; j < m; ++j) {
      if(cost[i][j] == r) printf("X");
      else printf("%c",mat[i][j]);
    }
    puts("");
  }
}

int main() {
  int cont = 0,x,y,xx,yy,level;
  while(scanf("%d %d",&n,&m) == 2) {
    for(int i = 0; i < n; ++i) {
      scanf("\n");
      for(int j = 0; j < m; ++j) {
        scanf("%c",&mat[i][j]);
        if(mat[i][j] == 'V') cola.push(make_pair(i,j));
      }
    }
    memset(cost,-1,sizeof cost);
    memset(visit,0,sizeof visit);
    while(!cola.empty()) {
      int s_cola = cola.size();
      for(int i = 0; i < s_cola; ++i) {
        x = cola.front().first, y = cola.front().second;
        cola.pop();
        level = cost[x][y];
        for(int i = 0; i < 4; ++i) {
          xx = x + a[i], yy = y + b[i];
          if(0 <= xx and xx < n and 0 <= yy and yy < m and mat[xx][yy] == '.') {
            if(!visit[xx][yy] or level + 1 < cost[xx][yy]) {
              visit[xx][yy] = true;
              cost[xx][yy] = level + 1;
              cola.push(make_pair(xx,yy));
            }
          }
        }
      }
    }
    show();
    first = false;
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:55:53.107

您正在 check() 中对整个图形进行深度优先搜索。将其与 main() 中的循环集成，而不是尝试深度优先找到最短路径。

# vb.net - 仅当不等于零时才显示堆叠柱形图标签值？

> ID：13617583
> 
> 赞同：2
> 
> 时间：2012-11-29T01:52:11.730
> 
> 标签：vb.net, charts

我有以下代码，原始代码是：[here](http://social.msdn.microsoft.com/Forums/zh/MSWinWebChart/thread/a4fccb7c-442a-4d56-a94c-c79fb7bef8b2)

```
Public Class Form1
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim dtTest As DataTable = New DataTable
        dtTest.Columns.Add("col1", GetType(Integer))
        dtTest.Columns.Add("col2", GetType(Integer))
        dtTest.Columns.Add("col3", GetType(String))

        dtTest.Rows.Add(0, 1, "S")
        dtTest.Rows.Add(0, 1, "H")
        dtTest.Rows.Add(80, 1, "C")
        dtTest.Rows.Add(43, 2, "S")
        dtTest.Rows.Add(11, 2, "H")
        dtTest.Rows.Add(55, 2, "C")
        dtTest.Rows.Add(30, 3, "S")
        dtTest.Rows.Add(85, 3, "H")
        dtTest.Rows.Add(53, 3, "C")
        dtTest.Rows.Add(55, 4, "S")
        dtTest.Rows.Add(55, 4, "H")
        dtTest.Rows.Add(11, 4, "C")

        Dim dv As DataView = New DataView(dtTest)
        dv.Sort = "col2 asc"

        Chart1.Series.RemoveAt(0) 'this is just to remove the default Series in a 
        'VB.NET chart; you may not need this

        Chart1.DataBindCrossTable(dv, "col3", "col2", "col1", "Label=col1")

        For Each cs As Series In Chart1.Series
            cs.ChartType = SeriesChartType.StackedColumn
        Next

    End Sub
End Class 
```

代码在下面生成图表。我想知道是否有办法在列为零时不显示值，如最左侧列所示或列顶部的总值也很好。我找到了如何在 excel 中做到这一点，但没有设法实现这个程序。

非常感谢您的帮助

![结果](../Images/cf92a2d49d7fd1b6b45fc5948db278a1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:21:31.683

您将需要为您的系列设置[过滤，我能够通过使用](http://msdn.microsoft.com/en-us/library/dd456203%28v=vs.100%29.aspx)[Filter(CompareMethod,Double,Series)](http://msdn.microsoft.com/en-us/library/dd467929%28v=vs.100%29.aspx)以及[DataManipulator.FilterSetEmptyPoints](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.datamanipulator.filtersetemptypoints%28v=vs.100%29.aspx)和[DataManipulator.FilterMatchPoints](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.datamanipulator.filtermatchedpoints%28v=vs.100%29.aspx)属性获得您正在寻找的结果。

**修改后的代码**

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim dtTest As DataTable = New DataTable
    dtTest.Columns.Add("col1", GetType(Integer))
    dtTest.Columns.Add("col2", GetType(Integer))
    dtTest.Columns.Add("col3", GetType(String))

    dtTest.Rows.Add(0, 1, "S")
    dtTest.Rows.Add(0, 1, "H")
    dtTest.Rows.Add(80, 1, "C")
    dtTest.Rows.Add(43, 2, "S")
    dtTest.Rows.Add(11, 2, "H")
    dtTest.Rows.Add(55, 2, "C")
    dtTest.Rows.Add(30, 3, "S")
    dtTest.Rows.Add(85, 3, "H")
    dtTest.Rows.Add(53, 3, "C")
    dtTest.Rows.Add(55, 4, "S")
    dtTest.Rows.Add(55, 4, "H")
    dtTest.Rows.Add(11, 4, "C")

    Dim dv As DataView = New DataView(dtTest)
    dv.Sort = "col2 asc"

    Chart1.Series.RemoveAt(0) 'this is just to remove the default Series in a 
    'VB.NET chart; you may not need this
    Chart1.DataManipulator.FilterSetEmptyPoints = True 'Points that match filter will be marked as empty
    Chart1.DataManipulator.FilterMatchedPoints = True  'Filter points that match Filter criteria

    Chart1.DataBindCrossTable(dv, "col3", "col2", "col1", "Label=col1")

    For Each cs As Series In Chart1.Series
        Chart1.DataManipulator.Filter(DataVisualization.Charting.CompareMethod.EqualTo, 0, cs)   'Compare if equal to zero
        cs.ChartType = SeriesChartType.StackedColumn
        Dim dpcp As DataPointCustomProperties = New DataPointCustomProperties

    Next

End Sub 
```

**结果**

![在此处输入图像描述](../Images/fa7ef870af7dc0be4c4a2de2e2e22e9c.png)

# jquery - 如果悬停则等待，否则继续

> ID：13617587
> 
> 赞同：2
> 
> 时间：2012-11-29T01:52:57.680
> 
> 标签：jquery

我使用 jquery 1.3.2。我尝试将简单的 jquery 编写到我网站上实现的 ajax 购物车中。有一些功能`ajaxCartOpenCart()`- 打开购物车块（只需取消隐藏它）和`ajaxCartCloseCart()`.

我添加了简单的代码，在添加到购物车后，取消隐藏购物车块，等待 4 秒并关闭购物车块。

```
ajaxCartOpenCart();
setTimeout(function() {
  ajaxCartCloseCart()
}, 4000); 
```

问题：我需要创建一个条件，说明 - 如果在 4 秒的这段时间内。鼠标进入`#cart-block`，然后不要关闭它，等到鼠标离开。否则计数 4 秒并关闭购物车。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:57:04.597

您可以清除超时，然后在鼠标离开时调用 ajax 函数。就像是：

```
var t = setTimeout(function () {
   // ...
}, 4000);

$('element').hover(function () {
  clearTimeout(t);
}, function () {
  ajaxCartCloseCart();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T02:03:39.923

我创建了类似的东西`setInterval`来显示和隐藏顶栏

在这里演示 jsfiddle：http: [//jsfiddle.net/frictionless/QmLAv/](http://jsfiddle.net/frictionless/QmLAv/)

```
$(function() {

   var showTime = 5000;
   var transition = 'slow';
   var target = $('.headerbar');
   var flag = false;

    target.slideDown(transition);
    var id = setInterval(function(){hide(target);}, showTime);

    var hide = function(item) {
        debugger;
        if(flag){
            return;
        }
        clearInterval(id);
        item.slideUp(transition);
    };

    target.hover(function() {
        flag = true;
        clearInterval(id);
        $(this).show();
    }, function() {
        flag = false;
        id = setInterval(function(){hide(target);}, showTime);
    });

});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T02:54:46.690

您可以使用 css 来控制隐藏/显示购物车，如下所示。我认为这是最简单的方法，因为你不需要关心 setTimeout 和 setInterval，这可能会导致意想不到的结果。

```
<style type="text/css">
    .shopCart .shopCartDetail
    {
        border: 1px solid;
        width: 100px;
        display: none;
    }
    .shopCart:hover .shopCartDetail
    {
        display: block;
    }
</style>
<div class="shopCart">
    Shop Cart
    <div class="shopCartDetail">
        This is Shop Cart Detail</div>
</div>
<script type="text/javascript">
    $('.shopCart').hover(function () {
        //Ajax update content
    });
</script> 
```

# mysql - 如何从一对多关系的“多”表中选择具有两个特定子 ID 的父 ID？

> ID：13617589
> 
> 赞同：1
> 
> 时间：2012-11-29T01:53:17.773
> 
> 标签：mysql, sql, one-to-many

假设我有一张表格，列出了各种玩具及其所用电池的类型：

```
toy_id   battery_id    battery_qty
     1            3              1
     2            2              4
     2            3              1
     3            1              1 
```

我想构建一个查询，告诉我哪些玩具*同时*使用 2 型和 3 型电池（但也可能使用其他玩具）。在上面的示例中，即 toy_id 2。

我该如何编写这样的查询？

这是我到目前为止所拥有的，但看起来很混乱：

```
SELECT t1.toy_id,
    t1.battery_id b1, t2.battery_id b2,
    t1.battery_qty qty1, t2.battery_qty qty2
FROM toys t1
LEFT JOIN toys t2
    ON t1.toy_id = t2.toy_id
WHERE t1.battery_id = 2
    AND t2.battery_id = 3
HAVING q1 > 0
    AND q2 > 0
ORDER BY toy_id ASC; 
```

结果看起来是正确的，但我很好奇我是否遗漏了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:58:53.167

我认为这里真的不需要加入。您只需要计算记录的实例数，它等于您搜索的条件数。

```
SELECT  toy_ID
FROM    toys
WHERE   battery_ID IN (2,3)
GROUP BY toy_ID
HAVING COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/97945/1)

但是如果没有在每个 toy_id 的 battery_id 上定义唯一约束，`DISTINCT`则需要在该`HAVING`子句中。

```
SELECT  toy_ID
FROM    toys
WHERE   battery_ID IN (2,3)
GROUP BY toy_ID
HAVING COUNT(DISTINCT battery_ID) = 2 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/97945/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:58:18.900

我认为您可以`full`不使用 join `qty`（假设您的表中的 battery_qty 始终 > 0）为：

```
 SELECT distinct t1.toy_id
  FROM toys t1
  JOIN toys t2
  ON t1.toy_id = t2.toy_id
  WHERE t1.battery_id = 2
    AND t2.battery_id = 3
  ORDER BY toy_id ASC; 
```

# android - stopService() 会停止前台服务吗？

> ID：13617594
> 
> 赞同：5
> 
> 时间：2012-11-29T01:53:26.410
> 
> 标签：android, android-service

会`stopService()`停止作为[前台服务](http://developer.android.com/guide/components/services.html#Foreground)运行的服务吗？看起来，但也“感觉”它胜过前台服务的重要性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T01:55:42.227

确认：是 -`stopService()`从`Activity`服务外部运行将停止服务 - 即使该服务是前台运行服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:55:55.033

它直接停止服务。它没有任何重要性，如果你的代码正在发送一个意图来停止服务，那么遵守所说的意图是非常有意义的。

# javascript - 如何停止 jcarousel 动画？

> ID：13617599
> 
> 赞同：0
> 
> 时间：2012-11-29T01:53:52.220
> 
> 标签：javascript, jquery, jcarousel

我正在使用 jcarousel 为无序列表设置动画，但是由于我需要动画在项目之间平滑过渡，因此我将`animation`选项设置为一个非常大的整数，这可以正常工作，但是当我将鼠标悬停在某些链接上时，我需要启动幻灯片动画并在鼠标移出时停止，这就是我到目前为止所拥有的：

```
$(function() {
    function customCallback(carousel) {
        $('.prev').hover(function() {
            // Starts the back animation
            carousel.prev();
        }, function() {
            // How to stop animation?
        });

        $('.next').hover(function() {
            // Starts the forward animation
            carousel.next();
        }, function() {
            // How to stop animation?
        });
    }

    $('.list').jcarousel({
        animation    : 14000,
        wrap         : 'circular',
        easing       : 'linear',
        buttons      : false,
        initCallback : customCallback
    }); 
});​ 
```

但我不知道如何在鼠标移出时停止动画，这里有一个演示可以更好地说明这一点：http: [//jsfiddle.net/hfuwM/1/](http://jsfiddle.net/hfuwM/1/)

谁能指出我正确的方向？提前致谢

编辑：我发现`carousel.list.stop()`在 mouseout 回调上使用会停止动画，但是当再次悬停链接时它不会重新启动。

# django - Django Cache - 显示从缓存中检索到的图像的问题

> ID：13617600
> 
> 赞同：0
> 
> 时间：2012-11-29T01:53:53.100
> 
> 标签：django, python-memcached

我正在使用 django 1.4、python 2.7、Memcache、python-memcached 和 easy-thumbnails。

当我尝试使用缓存数据访问项目页面时，出现以下模板错误：

```
Couldn't get the thumbnail uploads/items/item_images/logo.jpeg: 'ImageFieldFile' object has no attribute 'instance' 
```

当我从 shell 中的数据库访问有问题的数据时，我得到：

```
>>> log = item.get_logo()
>>> logo
<ImageFieldFile: uploads/items/item_images/logo.png>
>>> logo.instance
<Media: uploads/items/item_images/logo.png> 
```

当我尝试从缓存中访问相同的数据时，我得到：

```
>>> cache.set('logo',item.get_logo())
>>> logo = cache.get('logo')
>>> logo
<ImageFieldFile: uploads/items/item_images/logo.png>
>>> logo.instance
Traceback (most recent call last):
  File "<console>", line 1, in <module>
AttributeError: 'ImageFieldFile' object has no attribute 'instance' 
```

我的问题是你如何缓存一个`ImageFieldFile`，以便它可以在原始状态下检索？我需要将该对象传递给我的模板，以便与简单缩略图一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:36:26.483

因此，我没有尝试缓存，`ImageFieldFile`而是缓存了驻留在其中的对象 ( `Media`)，`ImageFieldFile`现在一切正常。

**数据库：**

```
>>> logo = item.get_logo()
>>> logo
<Media: uploads/items/item_images/logo.png>
>>> logo.image #this is what I was trying to cache before
<ImageFieldFile: uploads/items/item_images/logo.png>
>>> logo.image.instance
<Media: uploads/items/item_images/logo.png> 
```

**缓存：**

```
>>> cache.set('logo',logo)
>>> cachedLogo = cache.get('logo')
>>> logo
<Media: uploads/items/item_images/logo.png>
>>> logo.image
<ImageFieldFile: uploads/items/item_images/logo.png>
>>> logo.image.instance
<Media: uploads/items/item_images/logo.png> 
```

# java - Java 字符串输入错误

> ID：13617602
> 
> 赞同：3
> 
> 时间：2012-11-29T01:53:59.893
> 
> 标签：java, string, loops, java.util.scanner

所以这个问题有点简单，但我想知道为什么下面的代码在第一次完美运行后直接跳转到“输入页码：”，而不是在第二次循环中询问标题。我在某处读到 Java 有一些东西不允许重用扫描仪。这是我面临的问题吗？我尝试使用 kbReader.next() 并且可以使用，但是该代码仅适用于没有空格的字符串。

```
String title = "";
int page = 0;
int i = 0;
Scanner kbReader = new Scanner(System.in);

for (i=1;i<=3;i++){
        System.out.print("Enter the title: ");
        title = kbReader.nextLine();
        System.out.print("Enter the page number: ");
        page = kbReader.nextInt();

        System.out.print(title);
        System.out.println(page);
    } 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:57:03.643

您应该添加一个`kbReader.nextLine();`after `kbReader.nextInt();`。在第二个循环中，您`kbReader.nextInt();`只是读取流中的行尾，被`kbReader.nextInt();`.

# java - eclipse中的传统黑色控制台窗口

> ID：13617609
> 
> 赞同：0
> 
> 时间：2012-11-29T01:54:37.877
> 
> 标签：java, console, window

在 Eclipse 中测试应用程序时是否可以显示传统的黑色弹出控制台窗口而不是内置控制台窗口（或两者）？**（适用于 Windows）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:58:11.510

我不确定你的问题，但你应该看看这个由谷歌的 Alex Ruiz 开发的插件：[http ://code.google.com/p/elt/](http://code.google.com/p/elt/)

这是相关文章：[http ://alexruiz.developerblogs.com/?p=2428](http://alexruiz.developerblogs.com/?p=2428)

请注意，它仅适用于 Mac 和 Linux。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:00:27.373

也许我有 linux 的解决方案。

[这里](http://ubuntuforums.org/showthread.php?t=743131)写的是您可能正在搜索的内容：

> 打开你的控制台，在命令行上用“who”检查它是哪个文件，然后在“运行”>“打开调试对话框”>“通用”>“检查'文件'”下，为新打开的控制台放置文件那里（例如：/dev/pts/0）并开始调试。您的所有输出现在也将写入该控制台。

# php - 连接表，然后引用自己

> ID：13617611
> 
> 赞同：2
> 
> 时间：2012-11-29T01:54:39.997
> 
> 标签：php, mysql, sql

我有三个表：演员列表（actors.sql），电影列表（movies.sql），以及每部电影中扮演的演员列表（以及他们的角色，roles.sql）。以下是每个表的片段：![sqlsnippet](../Images/585c96de10267f39846ef44b279a6ab4.png)

这些表要长得多，有数千个条目未在此图像中显示。我之前的一个练习题是显示一个演员出演的每部电影的表格（从 HTML 表单和 PHP 在另一个页面上检索演员姓名）。代码如下：

```
 SELECT actor_id, movie_id, name, year
    FROM roles r
    JOIN actors a ON a.id = r.actor_id
    JOIN movies m ON m.id = r.movie_id
    WHERE first_name = '$actor_first' AND last_name = '$actor_last'
    ORDER BY year DESC; 
```

现在我想交叉参考这些表格，找出谁与特定演员合作过，以及他们合作过哪些电影。假设我想看看“凯文史派西”与“威尔史密斯”一起出现在哪些电影中，我想要一张列出它们的表格。问题是，我不确定如何。

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:08:00.797

如果你有两个演员，你可以用这个查询

```
select m.*
  from movies m
 where exists (select 1
                 from roles r1
                      inner join actors a1
                         on a1.actor_id = r1.actor_id
                where r1.movie_id = m.movie_id
                  and a1.first_name = 'Kevin'
                  and a1.last_name = 'Spacey')
   and exists (select 1
                 from roles r2
                      inner join actors a2
                         on a2.actor_id = r2.actor_id
                where r2.movie_id = m.movie_id
                  and a2.first_name = 'Will'
                  and a2.last_name = 'Smith') 
```

它将返回两个演员都扮演角色的所有电影的所有电影数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T02:41:54.230

除了接受的答案之外，您也可以这样做，计算`movie_ID`结果中的记录数，这等于您在条件中提供的演员数。

```
SELECT  m.*
FROM    movies m
        INNER JOIN
        (
            SELECT  a.movie_ID
            FROM    roles a
                    INNER JOIN actors b
                        ON a.actor_ID = b.id
            WHERE   (b.first_name = 'Kevin' AND  b.last_name = 'Spacey') OR
                    (b.first_name = 'Will' AND  b.last_name = 'Smith')
            GROUP BY a.movie_ID
            HAVING COUNT(*) = 2
        ) n ON m.movie_ID = n.movie_ID 
```

*查询发生了什么？*

```
WHERE   (b.first_name = 'Kevin' AND  b.last_name = 'Spacey') OR
        (b.first_name = 'Will' AND  b.last_name = 'Smith') 
```

在这里，您可以通过添加`OR`条件运算符找到尽可能多的演员

```
HAVING COUNT(*) = 2 
```

的值`COUNT`应该等于您要搜索的演员数量。

的如果你需要找到3个演员一起合作过同一部电影，那么你应该只修改`WHERE`条款和条款的价值`HAVING`。

```
WHERE   (b.first_name = 'Kevin' AND  b.last_name = 'Spacey') OR
        (b.first_name = 'Will' AND  b.last_name = 'Smith') OR
        (b.first_name = 'Ben' AND  b.last_name = 'Affleck')
GROUP BY a.movie_ID
HAVING COUNT(*) = 3 
```

# android - 应用内购买可以添加一个指定附加权限吗？

> ID：13617614
> 
> 赞同：3
> 
> 时间：2012-11-29T01:54:50.877
> 
> 标签：android, in-app-purchase, android-permissions

这是我的场景：

目前，我的应用程序不需要 INTERNET 许可，我很乐意保持这种状态。我的应用程序是一个金融应用程序，很多用户不想冒险使用可以发送数据的应用程序。

现在，我想要某种插件来启用一些在线功能，例如 DropBox 同步和其他一些需要 INTERNET 权限的插件。

应用程序的附加组件是否可以请求额外的权限，如果没有，任何人都可以提出一种合理的方法来实现这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:47:26.287

建议的答案是在 AndroidManifest 中使用 sharedUserId，然后使用添加的权限和相同的用户 ID 创建一个新应用。这对于开发人员预见到这种需求的应用程序非常有用，但对于其他应用程序，添加或更改 sharedUserId 会导致其行为异常。

这是相应的 Google 错误，如果您认为应该解决这个问题，请加注星标：

[http://code.google.com/p/android/issues/detail?id=14074](http://code.google.com/p/android/issues/detail?id=14074)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T05:02:53.180

我有一个不同的问题，我试图解决并决定使用附加组件。我使用的解决方案是实现共享用户 ID 范例。我的插件具有相同的签名，没有启动器意图（这意味着用户设备上不会有单独的图标）和基于签名的活动调用安全性。这将允许您实现上述功能。

您可能遇到的问题是我怀疑您是否可以使用应用内购买来安装另一个应用程序。您可能需要将附加组件作为单独的应用程序出售。

希望这可以帮助...

# javascript - 创建对 SEO 友好的 javascript 小部件

> ID：13617618
> 
> 赞同：1
> 
> 时间：2012-11-29T01:55:08.027
> 
> 标签：javascript, seo, widget, web-crawler

我正在尝试创建一个我的客户可以在他们的网站上使用的小部件。`<div>`小部件所做的只是在客户网站上显示新闻提要。

例如，客户将通过远程源将我的脚本包含在他们的网页上：

```
<script type="text/javascript" src="http://www.widget_source.com"></script>
<div id="widget"></div> 
```

然后我的脚本会将一堆新闻提要数据写入`<div>`. 由于新闻提要是通过 javascript 新添加的，因此任何搜索爬虫都不会看到数据，因此页面不会获得 SEO 好处。

我的问题是：

是否可以通过搜索引擎使新闻提要的内容能够索引，以便使用小部件的客户可以从 SEO 中受益？我看过[让搜索引擎可以抓取 ajax 内容](https://stackoverflow.com/questions/3839055/how-to-making-ajax-content-crawlable-by-search-engines)。但这不起作用，因为我无法控制客户的后端。

小部件不一定需要在 javascript 中。有没有其他方法可以实现我的目标（可能通过 iframe 或 RSS）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:26:44.253

谷歌确实索引了类似的系统，如 disqus。我认为这是因为它们足够大，以至于谷歌决定对他们的 javascript 进行逆向工程，以便他们可以抓取它。

我怀疑你最好的选择是使用标准/常见的 javascript 技术和库来增加谷歌解决它的机会。

我还没有直接使用 AJAX 和爬网，但我怀疑使用基于 GET 的 AJAX 调用会增加它们被爬网的机会。GET 表示基于读取的请求，而 POST 表示写入。搜索引擎避免调用写入。

# javascript - Javascript：谷歌地图不显示

> ID：13617622
> 
> 赞同：2
> 
> 时间：2012-11-29T01:55:25.060
> 
> 标签：javascript, google-maps

我对下面的代码有疑问：为什么谷歌地图不显示？

该脚本之前一直有效，直到我插入了告诉地图绘制关于所选点的圆圈的部分。[我在这里](https://developers.google.com/fusiontables/docs/samples/circle_example)使用了示例代码中的代码。我不确定它是否已正确修改。我在这里要做的是使用选定的点并在其周围创建一个圆形缓冲区。距离可以由最终用户指定，并且将显示此距离内的多边形。

数据是私有的，因此不能共享。TableID1 是点图层，TableID2 是多边形图层。

任何帮助是极大的赞赏。

这是代码：

```
<!DOCTYPE html>

<html>

<head>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

<title>Wells</title>

<style>
        #map-canvas { width:800px; height:600px; }
      </style>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script type="text/javascript">

    function initialize() {
        var tableId = '';
        var tableId2 = '';       
        var locationColumn = 'geometry';
        var locationColumn2 = 'geometry';

        var map = new google.maps.Map(document.getElementById('map-canvas'), 
        {
          center: new google.maps.LatLng(43.85012691109855, -79.75539434814452),
          zoom: 10,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var layer = new google.maps.FusionTablesLayer({

        query: {
            select: locationColumn,
            from: tableId,
            where: 'ST_INTERSECTS (description, CIRCLE(wellid), 5000))'
             },

        map: map
        });

        var layer2 = new google.maps.FusionTablesLayer({

        query: {
            select: locationColumn2,
            from: tableId2
          },
          map: map
        });

google.maps.event.addDomListener(document.getElementById('wellid'),

'change', 
function() {
        updateMap(layer, tableId, locationColumn);
        });

      }

// Update the query sent to the Fusion Table Layer based on  
// the user selection in the select menu

function updateMap(layer, tableId, locationColumn) {
        var wellid = document.getElementById('wellid').value;
        if (wellid) {
          layer.setOptions({
            query: {
              select: locationColumn,
              from: tableId,
              where: "description CONTAINS '" + wellid + "'"
            }
          });
        } 

else {
        layer.setOptions({
            query: {
              select: locationColumn,
              from: tableId
            }
          });
        }
      }

// Create a map circle object to visually show the radius.

        var circle = new google.maps.Circle({
          center: new google.maps.LatLng(wellid),
          radius: 5000,
          map: map,
          fillOpacity: 0.2,
          strokeOpacity: 0.5,
          strokeWeight: 1
        });

        // Update the radius when the user makes a selection.
        google.maps.event.addDomListener(document.getElementById('radius'),
            'change', function() {
              var meters = parseInt(this.value, 10);
              layer.setOptions({
                query: {
                  select: 'description',
                  from: tableid,
                  where: 'ST_INTERSECTS(Address, ' +
                      'CIRCLE(wellid), ' + meters + '))'
                }
              });
              circle.setRadius(meters);
            });

google.maps.event.addDomListener(window, 'load', initialize);

    </script>

</head>

<body>

<div id="map-canvas"></div>

<label>Well ID:</label>

<select id="wellid">

<option value="">--Select--</option>

<option value="Well ID: 9">9</option>

<option value="Well ID: 129">129</option>

<option value="Well ID: 130">130</option>

<option value="Well ID: 131">131</option>

<option value="Well ID: 384">384</option>

<option value="Well ID: 469">469</option>

<option value="Well ID: 470">470</option>

<option value="Well ID: 494">494</option>

<option value="Well ID: 495">495</option>

<option value="Well ID: 697">697</option>

<option value="Well ID: 698">698</option>

<option value="Well ID: 735">735</option>

<option value="Well ID: 737">737</option>

</select>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:06:06.560

好的，我修复了您的代码：

```
<!DOCTYPE html>

<html>

  <head>

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

    <title>Wells</title>

    <style>
      #map-canvas {
        width: 800px;
        height: 600px;
      }
    </style>

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <script type="text/javascript">
      var map, wellid;
      function initialize() {
        var tableId = '';
        var tableId2 = '';
        var locationColumn = 'geometry';
        var locationColumn2 = 'geometry';

        map = new google.maps.Map(document.getElementById('map-canvas'), {
          center : new google.maps.LatLng(43.85012691109855, -79.75539434814452),
          zoom : 10,
          mapTypeId : google.maps.MapTypeId.ROADMAP
        });

        var layer = new google.maps.FusionTablesLayer({

          query : {
            select : locationColumn,
            from : tableId,
            where : 'ST_INTERSECTS (description, CIRCLE(wellid), 5000))'
          },

          map : map
        });

        var layer2 = new google.maps.FusionTablesLayer({

          query : {
            select : locationColumn2,
            from : tableId2
          },
          map : map
        });

        google.maps.event.addDomListener(document.getElementById('wellid'), 'change', function() {
          updateMap(layer, tableId, locationColumn);
        });

      }

      // Update the query sent to the Fusion Table Layer based on
      // the user selection in the select menu

      function updateMap(layer, tableId, locationColumn) {
        wellid = document.getElementById('wellid').value;
        if (wellid) {
          layer.setOptions({
            query : {
              select : locationColumn,
              from : tableId,
              where : "description CONTAINS '" + wellid + "'"
            }
          });
        } else {
          layer.setOptions({
            query : {
              select : locationColumn,
              from : tableId
            }
          });
        }
      }

      google.maps.event.addDomListener(window, 'load', function() {
        // Create a map circle object to visually show the radius.
        var circle = new google.maps.Circle({
          center : new google.maps.LatLng(wellid),
          radius : 5000,
          map : map,
          fillOpacity : 0.2,
          strokeOpacity : 0.5,
          strokeWeight : 1
        });

        // Update the radius when the user makes a selection.
        google.maps.event.addDomListener(document.getElementById('radius'), 'change', function() {
          var meters = parseInt(this.value, 10);
          layer.setOptions({
            query : {
              select : 'description',
              from : tableid,
              where : 'ST_INTERSECTS(Address, ' + 'CIRCLE(wellid), ' + meters + '))'
            }
          });
          circle.setRadius(meters);
        });
      });

      google.maps.event.addDomListener(window, 'load', initialize);

    </script>

  </head>

  <body>

    <div id="map-canvas"></div>

    <label>Radius:</label>
    <input type="number" id="radius" value="1">
    <label>Well ID:</label>

    <select id="wellid">
      <option value="">--Select--</option>
      <option value="Well ID: 9">9</option>
      <option value="Well ID: 129">129</option>
      <option value="Well ID: 130">130</option>
      <option value="Well ID: 131">131</option>
      <option value="Well ID: 384">384</option>
      <option value="Well ID: 469">469</option>
      <option value="Well ID: 470">470</option>
      <option value="Well ID: 494">494</option>
      <option value="Well ID: 495">495</option>
      <option value="Well ID: 697">697</option>
      <option value="Well ID: 698">698</option>
      <option value="Well ID: 735">735</option>
      <option value="Well ID: 737">737</option>
    </select>
  </body>
</html> 
```

# regex - 这种正则表达式简化是否正确？

> ID：13617628
> 
> 赞同：3
> 
> 时间：2012-11-29T01:56:47.473
> 
> 标签：regex

我在这里阅读“浏览器的工作原理”文章：[浏览器的工作原理](http://www.html5rocks.com/en/tutorials/internals/howbrowserswork/)（这是一本很棒的书。）

但有一次，他们提到这是定义整数的语法规则：

```
INTEGER :0|[1-9][0-9]* 
```

是否完全一样（并且更简单）编写：

```
INTEGER :[1-9]*[0-9] 
```

我想不出一个不满足两条规则的案例，也想不出为什么首选第一条规则的原因。

是否有理由包含一个简单的基本案例（例如`0`），还是只是迂腐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:00:40.440

这两个表达式是不同的：第一个将采取`101`，但第二个不会。书中的表达式非常擅长匹配整数，同时不允许前导零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T02:01:11.007

它们不一样，因为我的简化只能包括一个零，并且只有它是一个尾随零。例如。这种情况与简化规则不匹配：

```
101 
```

# ruby-on-rails-3 - Rails：将重复变为循环

> ID：13617640
> 
> 赞同：0
> 
> 时间：2012-11-29T01:58:07.177
> 
> 标签：ruby-on-rails-3, loops

我正在尝试减少代码中的重复。我在几个地方有这个代码（或其变体）：

```
@articles1 = Article.all_articles(1).reverse
@articles2 = Article.all_articles(2).reverse
@articles3 = Article.all_articles(3).reverse 
```

是一种将其更改为以下内容的方法：

```
3.times do |i|
  @articles[i+1] = Article.all_articles(i+1).reverse
end 
```

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:09:06.987

怎么样：

```
@articles = (1..3).to_a.map { |i| Article.all_articles(i).reverse } 
```

# c++ - std::multiset::iterator = NULL 不再有效？

> ID：13617646
> 
> 赞同：5
> 
> 时间：2012-11-29T01:58:33.573
> 
> 标签：c++, c++11

我有一些代码正在使用 gcc 4.7（来自 3.1）更新到 C++11

我有一个定义为类的私有成员的多重集：

```
multiset <Object*, objectcomp> objects_; 
```

代码中有一段看起来像这样（p_q 是一对多集迭代器，很抱歉那条讨厌的线，迫不及待地想用 auto 替换它，哈哈）：

```
void Terrain::removeObject(Object* obj){
    pair<multiset<Object*, objectcomp>::iterator, multiset<Object*, objectcomp>::iterator> p_q;
    multiset<Object*, objectcomp>::iterator p,q;
    q = NULL;
    p_q = objects_.equal_range(obj);
    for(p = p_q.first; p != p_q.second; p++){
        if(*p == obj) {q=p; break;}
    }
    if(q!=NULL){
        ... do stuff based on q no longer being null
    }
} 
```

这将不再编译。您不能再将迭代器设置为 null 吗？什么是替代方案？（nullptr 也不起作用）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T02:02:17.937

将迭代器设置为 NULL 是不合法的。您可能很幸运，因为您的特定实现碰巧使用指针作为该类型的迭代器，但这仍然是非法的。

正确答案是：

```
q = objects_.end(); 
```

或者，在某些情况下：

```
q = multiset<Object*, objectcomp>::iterator(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T02:04:47.680

您永远不能将迭代器设置为 NULL。如果上面的代码曾经奏效，那纯属偶然。考虑到多重集的任何合理实现，很难看出它是如何编译的，更不用说运行了。

获得“无处”迭代器的最佳方法是使用容器的末尾。替换`q = NULL`为`q = objects_.end()`。

另外，永远不要将原始指针放在容器中；这是对内存泄漏的公开邀请。您几乎可以肯定想要`multiset<Object,comp>`或`multiset<shared_ptr<Object>,comp>`。

# loops - 需要程序正确循环

> ID：13617648
> 
> 赞同：0
> 
> 时间：2012-11-29T01:58:38.137
> 
> 标签：loops, python-3.x

知道了。

```
while 1:
    line = sub.readline().split()
    if line == []:
        new = main
        break
    else:
        new = main.replace(line[0],line[1])
        main = new 
```

这似乎对我有用。感谢您的帮助=）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:02:55.577

正如 Cameron 所指出的，这种方法每次都会覆盖输出文件，因此只记录您的最后一次更改。

此块中的错误是：

```
while True:
   word = substitute.readline().split()
   print(word)
   if word == []: // ---Indentation ---
       break
   else:
       new = (main_story.read().replace(word[0],word[1]))
       new_story.write(new) 
```

您需要一次读取完整的文件，进行更改并写入文件。或者您可以从第一个文件中读取，然后对新文件进行后续读/写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:06:45.840

尝试另一个循环，并在该循环中索引您需要发生的单词交换：

我假设 sub.txt 的每一行都有你想要的 subs。读取 sub.txt 的所有行，将每一行存储在一个可索引的数组中。围绕您的主代码设置一个循环，并在该循环索引中通过数组引用，按顺序排列您每次想要的 sub.txt 行。

# php - 下拉菜单返回显示“请选择”并且未出现失败/成功消息

> ID：13617652
> 
> 赞同：3
> 
> 时间：2012-11-29T01:58:56.920
> 
> 标签：php, html, mysql

下面的代码有两个问题。

```
 <?php

$validSubmission = isset($_POST['resetpass']) && $_POST['students'] && $_POST['newpass'] && $_POST['confirmpass'];

$sql = "SELECT StudentUsername, StudentForename, StudentSurname FROM Student ORDER BY StudentUsername";

$sqlstmt = $mysqli->prepare($sql);

$sqlstmt->execute();

$sqlstmt->bind_result($dbStudentUsername, $dbStudentForename, $dbStudentSurname);

$students = array(); // easier if you don't use generic names for data 

$studentHTML = "";
$studentHTML .= '<select name="students" id="studentsDrop">' . PHP_EOL;
$studentHTML .= '<option value="">Please Select</option>' . PHP_EOL;

$outputstudent = "";

while ($sqlstmt->fetch())
{
    $student   = $dbStudentUsername;
    $firstname = $dbStudentForename;
    $surname   = $dbStudentSurname;

    if (!$validSubmission && isset($_POST['students']) && $student == $_POST['students'])
    {
        $studentHTML .= "<option value='" . $student . "' selected='selected'>" . $student . " - " . $firstname . " " . $surname . "</option>" . PHP_EOL;
    }
    else
    {
        $studentHTML .= "<option value='" . $student . "'>" . $student . " - " . $firstname . " " . $surname . "</option>" . PHP_EOL;
    }

}

$studentHTML .= '</select>';

$errormsg = (isset($errormsg)) ? $errormsg : '';

if (isset($_POST['resetpass']))
{
    //get the form data
    $studentdrop = (isset($_POST['students'])) ? $_POST['students'] : '';
    $newpass     = (isset($_POST['newpass'])) ? $_POST['newpass'] : '';
    $confirmpass = (isset($_POST['confirmpass'])) ? $_POST['confirmpass'] : '';

    //make sure all data was entered
    if ($studentdrop != "")
    {
        if ($newpass)
        {
            if (strlen($newpass) <= 5)
            {
                $errormsg = "Your Password must be a minimum of 6 characters or more";
            }
            else
            {
                if ($confirmpass)
                {
                    if ($newpass === $confirmpass)
                    {
                        //Make sure password is correct
                        $query = "SELECT StudentUsername FROM Student WHERE StudentUsername = ?";
                        // prepare query
                        $stmt  = $mysqli->prepare($query);
                        // You only need to call bind_param once
                        $stmt->bind_param("s", $username);
                        // execute query
                        $stmt->execute();
                        // get result and assign variables (prefix with db)
                        $stmt->bind_result($dbStudentUsername);
                        //get number of rows
                        $stmt->store_result();
                        $numrows = $stmt->num_rows();

                        if ($numrows == 1)
                        {
                            //encrypt new password
                            $newpassword = md5(md5("93w" . $newpass . "ed0"));

                            //update the db

                            $updatesql = "UPDATE Student SET StudentPassword = ? WHERE StudentUsername = ?";
                            $update    = $mysqli->prepare($updatesql);
                            $update->bind_param("ss", $newpassword, $username);
                            $update->execute();

                            //make sure the password is changed

                            $query = "SELECT StudentUsername, StudentPassword FROM Student WHERE StudentUsername = ? AND StudentPassword = ?";
                            // prepare query
                            $stmt  = $mysqli->prepare($query);
                            // You only need to call bind_param once
                            $stmt->bind_param("ss", $username, $newpassword);
                            // execute query
                            $stmt->execute();
                            // get result and assign variables (prefix with db)
                            $stmt->bind_result($dbStudentUsername, $dbStudentPassword);
                            //get number of rows
                            $stmt->store_result();
                            $numrows = $stmt->num_rows();

                            if ($numrows == 1)
                            {
                                $errormsg = "<span style='color: green'>Student " . $student . " - " . $firstname . " " . $surname . " has been Registered</span>";

                            }
                            else
                            {
                                $errormsg = "An error has occured, the Password was not Reset";
                            }
                        }
                    }
                    else
                    {
                        $errormsg = "Your New Password did not Match";
                    }
                }
                else
                {
                    $errormsg = "You must Confirm your New Password";
                }
            }
        }
        else
        {
            $errormsg = "You must Enter your New Password";
        }

    }
    else if ($studentdrop == "")
    {
        $errormsg = "You must Select a Student";
    }

} 
```

我正在尝试创建一个管理员可以重置学生密码的休息密码页面。

**问题1：**

在我的代码中，我想要做的是，如果出现 php 验证消息（其中一个除了显示成功消息的`$errormsg`出现之外`$errormsg`），那么`students`下拉菜单仍应显示提交后选择的选项形式发生。现在这适用于用户将文本输入留空的所有验证消息，但唯一不起作用的验证消息是用户没有为新密码和确认密码输入匹配的密码。如果`$errormsg = "Your New Password did not Match";` 发生这种情况，则学生下拉菜单将返回该`Please Select`选项。为什么每次出现此验证消息时都会返回`Please Select`选项，如果发生此验证，我如何保持所选学生仍处于选中状态？

**问题2：**

如果我成功输入所有细节并提交，它没有执行插入，但它没有显示失败消息`$errormsg = "An error has occured, the Password was not Reset";` 或成功消息`$errormsg = "<span style='color: green'>Student " . $student . " - " . $firstname . " ". $surname . " has been Registered</span>";`，为什么会出现这种情况？我知道 UPDATE 语句是正确的，因为我在 phpmyadmin 中对此进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:27:57.023

$username（第 72 行及以后）从未设置。我想这应该来自'$studentdrop'？

这意味着您更新 where StudentUsername == ''，这将失败。

为了帮助您调试：

```
1\. Turn on warning and notices in the error handler for writing code ( error_reporting(E_ALL); ) as it will reveal problems like this
2\. As opposed to constantly counting the rows, you can save time in that the bind_result/store_value won't work unless you got a result. So you can check that value you get in bind_result - and if you had checked that `$dbStudentUsername == $username` in line 78, then it would have also thrown a wobbly at that stage.
3\. When you've done the "update", you can check the number of "affected rows"; if this > 0 then the password has been updated; no need for a secondary DB query. 
```

希望有帮助

# cocoa-touch - 使用 CIFilters 时获取 alpha 通道 [如何清除它]

> ID：13617653
> 
> 赞同：1
> 
> 时间：2012-11-29T01:58:56.227
> 
> 标签：cocoa-touch, uiimage, core-graphics, core-image, cifilter

在 UIImage 上应用锐化滤镜时我遇到了一些问题。

该代码完美运行，但生成的 UIImage 具有 Alpha 通道的问题。这反过来会导致一些性能问题。

这就是我初始化上下文和过滤器的方式

```
EAGLContext *myEAGLContext = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];
 NSMutableDictionary *options = [[NSMutableDictionary alloc] init];
[options setObject: [NSNull null] forKey: kCIContextWorkingColorSpace];
context = [CIContext contextWithEAGLContext:myEAGLContext options:options];
sharpenLuminanceFilter = [CIFilter filterWithName:@"CISharpenLuminance"]; 
```

我使用以下函数生成图像

```
- (UIImage *)applySharpingFilter:(UIImage *)originalImage withValue:(float)value{

CIImage *image = [CIImage imageWithCGImage:originalImage.CGImage];
[sharpenLuminanceFilter setValue:image forKey:@"inputImage"];
[sharpenLuminanceFilter setValue:[NSNumber numberWithFloat:value] forKey:@"inputSharpness"];
CIImage * result = sharpenLuminanceFilter.outputImage;
CGImageRef cgimg = [context createCGImage:result fromRect:[result extent]];
 double scaleFactor = [UIScreen mainScreen].scale;
UIImage *finalImage = [UIImage imageWithCGImage:cgimg scale:scaleFactor orientation:UIImageOrientationUp];
CGImageRelease(cgimg);
[sharpenLuminanceFilter setValue:nil forKey:@"inputImage"];
return finalImage; 
```

}

无论如何我可以指定我希望生成的图像是不透明的并且没有 alpha 通道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:02:33.003

您可以使用[`CIColorMatrix`](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html)过滤器。将矩阵设置为恒等，将偏差设置为 [0, 0, 0, 1]，它应该将 1 加到 alpha 上，这将使它成为实心的。

我很想知道 alpha 通道以何种方式影响您的表现。

# ios - iOS：如何在 NSUserDefaults 中只保存一个复选标记（用于 UITableView）？

> ID：13617655
> 
> 赞同：0
> 
> 时间：2012-11-29T01:59:16.300
> 
> 标签：ios, uitableview, nsuserdefaults

我有一个关于 NSUserDefaults 的问题。我正在尝试保存我放置在单元格上的复选标记，然后在应用程序崩溃或用户关闭应用程序等时检索它。我试图使用[这篇文章](https://stackoverflow.com/questions/12120696/how-to-save-tableview-cells-checkmark-after-reload-view-use-nsuserdefaults)作为指南，但没有运气，但这就是我到目前为止所拥有的。帖子中的代码有效，但是，我只需要保存一个复选标记而不是很多。我将如何实现这一目标？

```
@implementation ClientsViewController

@synthesize clientsInt;        // This is just a variable that helps me do the drill down part of the rootviewcontroller
@synthesize checkedIndexPath;

- (NSString *)getKeyForIndex:(int)index
{
return [NSString stringWithFormat:@"KEY%d",index];
}

- (BOOL) getCheckedForIndex:(int)index
{
if([[[NSUserDefaults standardUserDefaults] valueForKey:[self getKeyForIndex:index]] boolValue]==YES)
{
    return YES;
}
else
{
    return NO;
}
}

- (void) checkedCellAtIndex:(int)index
{
BOOL boolChecked = [self getCheckedForIndex:index];

[[NSUserDefaults standardUserDefaults] setValue:[NSNumber numberWithBool:!boolChecked] forKey:[self getKeyForIndex:index]];
[[NSUserDefaults standardUserDefaults] synchronize];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    if([self getCheckedForIndex:indexPath.row]==YES)
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
}

// Configure the cell...
if (clientsInt == 0) {
    cell.textLabel.text = [array1 objectAtIndex:indexPath.row];
}
else if (clientsInt == 1) {
    cell.textLabel.text = [array2 objectAtIndex:indexPath.row];
}
else if (clientsInt == 2) {
    cell.textLabel.text = [array3 objectAtIndex:indexPath.row];
}
else if (clientsInt == 3) {
    cell.textLabel.text = [array4 objectAtIndex:indexPath.row];
}

if([self.checkedIndexPath isEqual:indexPath])
{
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
}
else
{
    cell.accessoryType = UITableViewCellAccessoryNone;
}

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Uncheck the previous checked row
if(self.checkedIndexPath)
{
    UITableViewCell* uncheckCell = [tableView cellForRowAtIndexPath:self.checkedIndexPath];
    uncheckCell.accessoryType = UITableViewCellAccessoryNone;
}
UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];
cell.accessoryType = UITableViewCellAccessoryCheckmark;
self.checkedIndexPath = indexPath;

[self checkedCellAtIndex:indexPath.row];

if([self getCheckedForIndex:indexPath.row]==YES)
{
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
}
else
{
    cell.accessoryType = UITableViewCellAccessoryNone;
}

[tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:14:35.727

也许每次用户检查一行时尝试这样的事情：

```
[[NSUserDefaults standardUserDefaults] setValue:[NSNumber numberWithInt:index] forKey:@"kCheckedBoxKey"]; 
```

由于每次都将索引保存在同一个键 (@"kCheckedBoxKey") 下，因此只会存储一个索引，并且它始终是用户检查的最新索引。下次加载时您需要做的就是询问 userDefaults 是否可以找到键 @"kCheckedBoxKey" 的值，如果可以，您将通过以编程方式检查存储的索引来响应。

（您当然还想通过`#define CHECKED_KEY @"kCheckedBoxKey"`在文件顶部使用来清理它，并使用 CHECKED_KEY 而不是文字字符串来防止拼写错误。无论如何，重点是确保您始终使用保存和恢复同样的钥匙。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T02:43:56.123

最近，当用户选择或取消选择它们以添加或删除复选标记时，我必须在表格视图中保存每个单元格的状态。这是我用来保存到 .plist 文件的代码片段（如果您需要我提出的整个实现，请告诉我：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *contentForThisRow = [[self list] objectAtIndex:[indexPath row]];
    NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d%d", indexPath.section, indexPath.row];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSString *documentDirectory = [(AppDelegate *)[[UIApplication sharedApplication] delegate] applicationDocumentsDirectory];
    NSString *PlistPath = [documentDirectory stringByAppendingPathComponent:@"Settings.plist"];
    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:PlistPath];

    NSString *row = [NSString stringWithFormat:@"%d",indexPath.row];

    if([[dict objectForKey:row]isEqualToString:@"0"])
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }

    [[cell textLabel] setText:contentForThisRow];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *documentDirectory = [(AppDelegate *)[[UIApplication sharedApplication] delegate] applicationDocumentsDirectory];
    NSString *PlistPath = [documentDirectory stringByAppendingPathComponent:@"Settings.plist"];

    NSMutableDictionary *plist = [NSMutableDictionary dictionaryWithContentsOfFile:PlistPath];

    UITableViewCell *cell = [self._tableView cellForRowAtIndexPath:indexPath];

    NSString *row = [NSString stringWithFormat:@"%d",indexPath.row];

    if(cell.accessoryType == UITableViewCellAccessoryNone)
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        NSString *on = @"1";
        [plist setObject:on forKey:row];
        [plist writeToFile:PlistPath atomically:YES];
    }
    else if(cell.accessoryType == UITableViewCellAccessoryCheckmark)
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
        NSString *off = @"0";
        [plist setObject:off forKey:row];
        [plist writeToFile:PlistPath atomically:YES];
    }
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T02:02:00.947

您只需要保存所选行的索引

# twitter-bootstrap - 使用 AngularJS 从 web api 请求结果的下一页

> ID：13617659
> 
> 赞同：0
> 
> 时间：2012-11-29T01:59:39.463
> 
> 标签：twitter-bootstrap, jsonp, angularjs, asp.net-web-api

我正在使用一个 web api，它提供为我构建的分页结果，一旦页面加载，我就可以通过控制器中的 $resource 服务获取结果的第一页。这按预期工作。

如何在响应元中使用 URL 时分页到下一组结果并将其连接到 Twitter Bootstrap 分页控件？

这是我得到的响应 JSON 的一个想法：

```
{
    "results": [
               { "some-data" },
               { "some-data" }
            ],
    "meta": {
              "totalRecords": 33,
              "pageSize":     10,
              "nextSet":      "http://api.domain.com/?action=whatever&pageSize=10&offset=10"
          }
} 
```

我试图在回调中将下一个分页控件设置为元中的 URL，由于某种原因，我的控制器执行第一个请求以获取数据，然后尝试执行下一组的请求，但它没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:25:08.583

像下面这样的东西应该可以工作。

```
var WebApi = $resource('http://api.domain.com/');
$scope.action   = 'initial action for first page goes here';
$scope.pageSize = 10;
$scope.offset   = 0;
$scope.loadPage = function() {
    var serverData = WebApi.get( 
        {action: $scope.action, pageSize: $scope.pageSize, offset: $scope.offset}, 
        // calls http://api.domain.com/?action=<action>&pageSize=<pageSize>&offset=<offset>
        function() {
            // page data is in serverData.results
            $scope.model = serverData.results;
            // update $scope properties for next page: action, pageSize, offset
            $scope.action = ...
            ...
        }
    )
} 
```

# git - Git 返回致命：git-http-push 失败

> ID：13617662
> 
> 赞同：1
> 
> 时间：2012-11-29T02:00:03.347
> 
> 标签：git, nginx, fastcgi

我正在尝试使用 NginX 0.8.52 托管 Git 存储库，并使用 fcgiwrap 包装 git-http-backend。[此设置与此处](http://blog.teepark.net/git-smart-http-support-through-nginx)的设置相似。但是，我经常收到以下错误（注意最后的错误）：

```
HGs-MacBook-Pro:git_dev hg$ GIT_CURL_VERBOSE=1 git push production master
* Couldn't find host git.myserver.org in the .netrc file; using defaults
* About to connect() to git.myserver.org port 443 (#0)
*   Trying 111.222.333.444...
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* SSL connection using DHE-RSA-AES256-SHA
* Server certificate:
*    subject: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    start date: 2012-11-27 09:56:30 GMT
*    expire date: 2012-12-27 09:56:30 GMT
*    issuer: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    SSL certificate verify result: self signed certificate (18), continuing anyway.
> GET /info/refs?service=git-receive-pack HTTP/1.1
User-Agent: git/1.7.11.4
Host: git.myserver.org
Accept: */*
Pragma: no-cache

< HTTP/1.1 401 Unauthorized
< Server: nginx
< Date: Thu, 29 Nov 2012 01:42:21 GMT
< Content-Type: text/html
< Content-Length: 188
< Connection: close
< WWW-Authenticate: Basic realm="Restricted"
< 
* Closing connection #0
* Issue another request to this URL: 'https://admin@git.myserver.org/info/refs?service=git-receive-pack'
* Couldn't find host git.myserver.org in the .netrc file; using defaults
* About to connect() to git.myserver.org port 443 (#0)
*   Trying 111.222.333.444...
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* SSL re-using session ID
* SSL connection using DHE-RSA-AES256-SHA
* old SSL session ID is stale, removing
* Server certificate:
*    subject: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    start date: 2012-11-27 09:56:30 GMT
*    expire date: 2012-12-27 09:56:30 GMT
*    issuer: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    SSL certificate verify result: self signed certificate (18), continuing anyway.
* Server auth using Basic with user 'admin'
> GET /info/refs?service=git-receive-pack HTTP/1.1
Authorization: Basic YWRtaW46
User-Agent: git/1.7.11.4
Host: git.myserver.org
Accept: */*
Pragma: no-cache

< HTTP/1.1 401 Unauthorized
< Server: nginx
< Date: Thu, 29 Nov 2012 01:42:24 GMT
< Content-Type: text/html
< Content-Length: 188
< Connection: close
* Authentication problem. Ignoring this.
< WWW-Authenticate: Basic realm="Restricted"
* The requested URL returned error: 401
* Closing connection #0
Password for 'https://admin@git.myserver.org': 
* Couldn't find host git.myserver.org in the .netrc file; using defaults
* About to connect() to git.myserver.org port 443 (#0)
*   Trying 111.222.333.444...
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* SSL re-using session ID
* SSL connection using DHE-RSA-AES256-SHA
* old SSL session ID is stale, removing
* Server certificate:
*    subject: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    start date: 2012-11-27 09:56:30 GMT
*    expire date: 2012-12-27 09:56:30 GMT
*    issuer: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    SSL certificate verify result: self signed certificate (18), continuing anyway.
* Server auth using Basic with user 'admin'
> GET /info/refs?service=git-receive-pack HTTP/1.1
Authorization: Basic REMOVED
User-Agent: git/1.7.11.4
Host: git.myserver.org
Accept: */*
Pragma: no-cache

* The requested URL returned error: 404
* Closing connection #0
* Couldn't find host git.myserver.org in the .netrc file; using defaults
* About to connect() to git.myserver.org port 443 (#0)
*   Trying 111.222.333.444...
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* SSL re-using session ID
* SSL connection using DHE-RSA-AES256-SHA
* old SSL session ID is stale, removing
* Server certificate:
*    subject: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    start date: 2012-11-27 09:56:30 GMT
*    expire date: 2012-12-27 09:56:30 GMT
*    issuer: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    SSL certificate verify result: self signed certificate (18), continuing anyway.
* Server auth using Basic with user 'admin'
> GET /info/refs HTTP/1.1
Authorization: Basic REMOVED
User-Agent: git/1.7.11.4
Host: git.myserver.org
Accept: */*
Pragma: no-cache

< HTTP/1.1 200 OK
< Server: nginx
< Date: Thu, 29 Nov 2012 01:42:32 GMT
< Content-Type: text/plain
< Connection: close
< Expires: Fri, 01 Jan 1980 00:00:00 GMT
< Pragma: no-cache
< Cache-Control: no-cache, max-age=0, must-revalidate
< Content-Length: 59
< 
* Closing connection #0
* Couldn't find host git.myserver.org in the .netrc file; using defaults
* About to connect() to git.myserver.org port 443 (#0)
*   Trying 111.222.333.444...
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* SSL re-using session ID
* SSL connection using DHE-RSA-AES256-SHA
* old SSL session ID is stale, removing
* Server certificate:
*    subject: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    start date: 2012-11-27 09:56:30 GMT
*    expire date: 2012-12-27 09:56:30 GMT
*    issuer: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    SSL certificate verify result: self signed certificate (18), continuing anyway.
* Server auth using Basic with user 'admin'
> GET /HEAD HTTP/1.1
Authorization: Basic REMOVED
User-Agent: git/1.7.11.4
Host: git.myserver.org
Accept: */*
Pragma: no-cache

< HTTP/1.1 200 OK
< Server: nginx
< Date: Thu, 29 Nov 2012 01:42:36 GMT
< Content-Type: text/plain
< Connection: close
< Expires: Fri, 01 Jan 1980 00:00:00 GMT
< Pragma: no-cache
< Cache-Control: no-cache, max-age=0, must-revalidate
< Content-Length: 23
< Last-Modified: Wed, 28 Nov 2012 12:09:23 +0000
< 
* Closing connection #0
Password for 'https://admin@git.myserver.org': 
* Couldn't find host git.myserver.org in the .netrc file; using defaults
* About to connect() to git.myserver.org port 443 (#0)
*   Trying 111.222.333.444...
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* SSL connection using DHE-RSA-AES256-SHA
* Server certificate:
*    subject: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    start date: 2012-11-27 09:56:30 GMT
*    expire date: 2012-12-27 09:56:30 GMT
*    issuer: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    SSL certificate verify result: self signed certificate (18), continuing anyway.
> PROPFIND / HTTP/1.1
User-Agent: git/1.7.11.4
Host: git.myserver.org
Accept: */*
Depth: 0
Content-Type: text/xml
Content-Length: 161
Expect: 100-continue

< HTTP/1.1 401 Unauthorized
< Server: nginx
< Date: Thu, 29 Nov 2012 01:42:43 GMT
< Content-Type: text/html
< Content-Length: 188
< Connection: close
< WWW-Authenticate: Basic realm="Restricted"
< 
* Excess found in a non pipelined read: excess = 188 url = / (zero-length body)
* Closing connection #0
* Issue another request to this URL: 'https://admin@git.myserver.org/'
* Couldn't find host git.myserver.org in the .netrc file; using defaults
* About to connect() to git.myserver.org port 443 (#0)
*   Trying 111.222.333.444...
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* Connected to git.myserver.org (111.222.333.444) port 443 (#0)
* SSL re-using session ID
* SSL connection using DHE-RSA-AES256-SHA
* old SSL session ID is stale, removing
* Server certificate:
*    subject: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    start date: 2012-11-27 09:56:30 GMT
*    expire date: 2012-12-27 09:56:30 GMT
*    issuer: C=GB; ST=Berkshire; L=Newbury; O=My Company Ltd
*    SSL certificate verify result: self signed certificate (18), continuing anyway.
* Server auth using Basic with user 'admin'
> PROPFIND / HTTP/1.1
Authorization: Basic REMOVED
User-Agent: git/1.7.11.4
Host: git.myserver.org
Accept: */*
Depth: 0
Content-Type: text/xml
Content-Length: 161
Expect: 100-continue

< HTTP/1.1 100 Continue
* We are completely uploaded and fine
* The requested URL returned error: 404
* Closing connection #0
error: Cannot access URL https://admin@git.myserver.org/, return code 22
fatal: git-http-push failed 
```

后端 fcgiwrap 也在日志中报错如下：

```
Request not supported: '/home/admin/repo/info/refs?service=git-receive-pack' 
```

在同一时期，NginX 报告以下错误日志（考虑到 git push 正在发送的请求，这看起来很正常）：

```
2012/11/29 09:52:42 [error] 15091#0: *3257838 no user/password was provided for basic authentication, client: 222.055.121.111, server: git.myserver.org, request: "GET /info/refs?service=git-receive-pack HTTP/1.1", host: "git.myserver.org"
2012/11/29 09:52:45 [error] 15092#0: *3257989 user "admin": password mismatch, client: 222.055.121.111, server: git.myserver.org, request: "GET /info/refs?service=git-receive-pack HTTP/1.1", host: "git.myserver.org"
2012/11/29 09:53:02 [error] 15090#0: *3258816 no user/password was provided for basic authentication, client: 222.055.121.111, server: git.myserver.org, request: "PROPFIND / HTTP/1.1", host: "git.myserver.org" 
```

为了完整起见，这里是 nginx.conf 的相关部分：

```
# Git
server {
    listen 80;
    listen 443 ssl;
    server_name git.myserver.org;

    access_log  /home/admin/repo.deploy.log combined;
    ssl_certificate /etc/nginx/git.myserver.org.self.crt;
    ssl_certificate_key /etc/nginx/git.myserver.org.self.key;

    location / {
        auth_basic  "Restricted";
        auth_basic_user_file /etc/nginx/nginx.htpasswd;

        include fastcgi_params;

        fastcgi_param SCRIPT_FILENAME /usr/libexec/git-core/git-http-backend;
        fastcgi_param GIT_HTTP_EXPORT_ALL "";
        fastcgi_param GIT_PROJECT_ROOT /home/admin/repo/;
        fastcgi_param PATH_INFO $request_uri;

        fastcgi_pass 127.0.0.1:9001;
    }
} 
```

任何想法如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T01:30:02.413

这个问题的答案是 PATH_INFO`$uri`不期望`$remote_uri`

更换：

`fastcgi_param PATH_INFO $request_uri;`

和

`fastcgi_param PATH_INFO $uri;`

修复了问题。我还在`fastcgi_param REMOTE_USER $remote_user;`使用http身份验证时添加了。

所以它应该是这样的：

```
# Git
server {
    listen 80;
    listen 443 ssl;
    server_name git.myserver.org;

    access_log  /home/admin/repo.deploy.log combined;
    ssl_certificate /etc/nginx/git.myserver.org.self.crt;
    ssl_certificate_key /etc/nginx/git.myserver.org.self.key;

    location / {
        auth_basic  "Restricted";
        auth_basic_user_file /etc/nginx/nginx.htpasswd;

        include fastcgi_params;

        fastcgi_param SCRIPT_FILENAME /usr/libexec/git-core/git-http-backend;
        fastcgi_param GIT_HTTP_EXPORT_ALL "";
        fastcgi_param GIT_PROJECT_ROOT /home/admin/repo/;
        fastcgi_param PATH_INFO $uri;
        fastcgi_param REMOTE_USER $remote_user;

        fastcgi_pass 127.0.0.1:9001;
    }
} 
```

# templates - CSS3 样式表模板

> ID：13617663
> 
> 赞同：0
> 
> 时间：2012-11-29T02:00:10.040
> 
> 标签：templates, css, frameworks, stylesheet

我环顾四周，找不到用作基本起始模板的 CSS3 模板。我想知道是否有人知道这样的事情是否存在。基本上，我正在寻找一个包含所有基本选择器的基本样式表，以便我可以在不需要时填充或删除它们。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:04:33.647

[关于 CSS 框架的 Wikipedia 文章](http://en.wikipedia.org/wiki/CSS_frameworks)有一个流行框架列表和一些有用的统计数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:02:14.280

看看 twitter bootstrap ： http: [//twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/) 或基金（因为每个人都使用 bootstrap，所有网站看起来都一样）： http: [//foundation.zurb.com/](http://foundation.zurb.com/)

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T02:03:34.753

介意我向您介绍[Twitter Bootstrap](http://twitter.github.com/bootstrap/)模板吗？

它是一个 CSS3 模板框架。

这只是一个建议，因为它帮助我更多地了解 CSS3，同时深入了解[响应式设计](http://en.wikipedia.org/wiki/Responsive_web_design)。

如果您决定继续使用 twitter bootstrap，请访问此[链接](http://www.queness.com/post/11632/18-useful-twitter-boostrap-goodies-you-should-know)以获取更多资源。

# javascript - 有什么方法可以让 JavaScript 可以使用由单独程序生成的值吗？

> ID：13617665
> 
> 赞同：1
> 
> 时间：2012-11-29T02:00:25.033
> 
> 标签：javascript, html

有什么方法可以让 JavaScript 可以使用由单独程序生成的值吗？

我对网页设计和 JavaScript 还很陌生，所以我不确定是否可以做我想做的事。我知道由于安全问题，故意使其中一些难以做到（被阻止？）。我不需要一个实际的书面解决方案，只需要确认是否可能，也许还需要用于它的适当 API/函数集。

我想要一个网页，它使用第三方 JavaScript API 函数，该函数基于访问网站的设备上的单独程序中生成的值，该设备正在与外部设备通信。不过，我希望这是一个持续的过程；一旦网页打开，它应该继续监控值并酌情更新调用。

某种直接交互会更可取（有没有办法传入回调函数或其他东西？），但到目前为止我还没有看到任何看起来可以做到这一点的东西。是否可以在程序端将值写入 XML 文件，并在网页端重复读取文件？我不知道这对于我想要的来说是否足够快。

我不担心与大量浏览器或任何东西的兼容性，所以即使是使用很少支持的 HTML5 语法的解决方案也可以，只要我能得到一个可以运行的浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:05:59.180

您可以让您的外部应用程序在服务器上公开某种 Web 界面，然后让客户端通过 Javascript 执行 AJAX 请求以从 Web 界面中提取新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:06:19.737

我喜欢伊万的想法。这是我的做法：

在您的外部程序中，启动一个可以接受[WebSocket](http://en.wikipedia.org/wiki/WebSocket)连接的 Web 服务器。选择一个不标准使用的非常高的端口。对于做 WebSockets，我喜欢[node.js](http://nodejs.org/)和[Socket.IO](http://socket.io/)，但是 WebSocket 库存在用于 Java、Python、Ruby 等。

然后让您的网页打开一个 WebSocket 到您本地运行的 Web 服务器，该服务器可以非常快速地将数据流式传输到您的 javascript 应用程序。请参阅[Socket.IO](http://socket.io/)上的示例，了解它是多么容易。每次您的外部程序获得一条新数据时，它都可以将其推送到您的网页，并且将使用新数据触发 javascript 回调。

更新：

由于您的其他程序是用 C++ 编写的，因此这个问题和答案可能很有趣：[https](https://stackoverflow.com/questions/3916217/standalone-c-websocket-server-library) ://stackoverflow.com/questions/3916217/standalone-c-websocket-server-library 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T02:40:28.697

这实际上是一个非常非常好的问题。有些人可能已经略过它，对他们来说，这看起来像是许多其他新手误解网络类型的问题。但这实际上是不同的：

> 我想要一个网页，它使用第三方 javascript API 函数，该函数基于**访问网站的设备上**的单独程序中生成的值，该设备正在与外部设备通信

粗体部分是它与众不同的原因。

是的，这是可能的。这就是 Flash 和 Java 插件可以访问您的网络摄像头和麦克风的方式。但这并不容易。

首先，这不是你通常的基于服务器的交互（如果是的话，它会简单得多，并且许多 Web 开发人员会理所当然地对另一个新手提出这样的问题感到恼火）。您基本上希望您的 Web 应用程序能够访问用户机器上的硬件。

> 我不担心与大量浏览器或任何东西的兼容性

很好，这使它更简单一些。因为 Web API 根本不处理这类事情。您需要对浏览器的低级别访问。

你基本上有2个选择：

1.  如果 Flash 或 Java 支持访问您尝试访问的硬件，那么您可以尝试用 Flash 或 Java 编写小程序。在这两者中，Java 对想要做低级、非标准工作的程序员稍微友好一些。但是 flash 通常对用户更友好（出于某种原因，Java 小程序到今天往往很大并且需要很长时间才能加载）。

2.  如果你不能在 Flash 或 Java 中做你想做的事，那么你真的只有一个选择：编写一个浏览器插件。为此，有两种选择（注意：我以前从未这样做过，所以我只按照我读过的内容进行）。首先是您可以基于旧的 Netscape Plugin API 开发插件。谷歌周围以了解更多信息。对于 Windows 上的 IE，您可以选择开发 ActiveX 插件。你也可以尝试用谷歌搜索。

    一些谷歌搜索让我找到了[Firebreath](http://www.firebreath.org/display/documentation/FireBreath+Home)，这是一个可以编译为 NPAPI 和 ActiveX 的跨浏览器插件框架。

    哦，还有第三种选择。对于 Chrome 和 Firefox，您可以编写基于 javascript 的插件。虽然就像 IE 上的 ActiveX，但插件不会跨浏览器兼容。我什至不确定javascript插件API是否可以访问真正低级的硬件。

您正在尝试做的事情很有趣。没有多少人做过。但这是可行的。祝你好运。

# matlab - 开源和跨平台应用

> ID：13617670
> 
> 赞同：1
> 
> 时间：2012-11-29T02:00:36.967
> 
> 标签：matlab, open-source, cross-platform

我想知道什么是最好的编程语言来开发一个主要可以在 windows 和 mac 上工作的开源。

如果他/她愿意，任何人都应该能够更改源代码，而无需重新编译它。这是为了允许进一步的开发和错误修复。

该应用程序不需要大量的计算资源，它会有一个 GUI。

你会推荐什么？

我唯一想到的是使用 matLab 进行应用程序。还有其他选择吗？

非常感谢您的反馈，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:04:03.313

Python。有许多可用的 IDE，并且代码可读性极强。社区还维护着优秀的文档。我建议不要使用 Matlab 开发开源软件，因为 Matlab 本身不是开源程序。也许因为你在谈论数学的东西，一个开源的替代品可能是 Octave？但是我真的不知道您所说的应用程序是什么意思。希望我的建议有所帮助。

# sharepoint - 从 SharePoint 下载图像

> ID：13617673
> 
> 赞同：0
> 
> 时间：2012-11-29T02:00:57.530
> 
> 标签：sharepoint

我想从 SharePoint 站点下载图像，但我们的 SharePoint 站点托管在 Windows Azure 上，因此可能需要身份验证。如何使用 C# 下载图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:51:52.740

您可以使用 c# 中的 WebClient 下载图像。这个 webclient 有一个“ [DownloadFile](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadfile.aspx) ”函数，它接受一个 url。Web 客户端还有一个“凭据”属性，您可以在其中分配所需的凭据。

# c# - 使用 RADIUS 进行用户身份验证

> ID：13617681
> 
> 赞同：0
> 
> 时间：2012-11-29T02:01:51.713
> 
> 标签：c#, sql, asp.net-mvc-4, radius

我想在我的 MVC4 应用程序中使用 RADIUS 服务器对用户进行身份验证。

我们有一个**SMTP、端口号和共享密钥**。但是，我不知道如何将这些实现到应用程序中。

我将如何实施此类信息？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:14:04.043

Radius 在这种情况下不合适 - 它用于物理网络安全：在公司网络上验证 Wi-Fi 用户，或者当有人将计算机插入以太网交换机时。此外，Radius 与 SMTP 无关。

Radius 本身不提供身份验证 - 总是有某种后端数据库。例如，Microsoft 的“NAP”Radius 服务器为此使用了 Active Directory（LDAP 的一种实现）。

如果您使用的是 ASP.NET，那么您不妨直接查询 Active Directory（请参阅 参考资料`System.DirectoryServices`）。另请注意，ASP.NET 附带`ActiveDirectoryMembershipProvider`为您完成所有工作的类。

否则，我们需要更多关于您想要完成的任务的信息。

# database - 查询表达式插入语句中的 VBA Excel 语法错误缺少运算符

> ID：13617685
> 
> 赞同：2
> 
> 时间：2012-11-29T02:02:23.220
> 
> 标签：database, ms-access, vba

这个程序背后的前提是获取几个不同的excel表并将它们输入到一个access数据库中。一切正常，直到我的执行语句产生以下错误：

```
Run-time error '-2147217900 (80040e14)':
Syntax error (missing operator) in query expression 'Alabama AM University' 
```

问题似乎出现在我处理“ `school`”变量的执行语句部分。下面是代码。

```
Sub updateData()

Dim cn As New ADODB.Connection
Dim row As Integer
Dim col As Integer
Dim srcRow As Integer
Dim srcCol As Integer
Dim filename As String
Dim targetWorkbook As Workbook
Dim targetSheet As Worksheet
Dim reportYear As String
Dim state As String
Dim school As String
Dim campus As String
Dim dataLabel As String
Dim dataValue As Long

On Error Resume Next ' these lines should allow you to connect.  Depending on your version of windows, only one will execute without error.
  cn.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & ThisWorkbook.Path & "\universityCrime.mdb" & ";"
  cn.Open "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & ThisWorkbook.Path & "\universityCrime.mdb" & ";"
On Error GoTo 0

'Starting here!
row = 6
col = 3
srcRow = 1
srcCol = 1

Application.ScreenUpdating = False

filename = Dir(ThisWorkbook.Path & "\data\*.xls")

'Loops through all the file names in the data directory
Do Until filename = ""

    Set sourceWorkbook = Application.Workbooks.Open(ThisWorkbook.Path & "\data\" & filename)
    Set sourceSheet = sourceWorkbook.Sheets(1)

    reportYear = Right(sourceSheet.Range("A4").Value, 4)
    state = Left(sourceSheet.Range("A2").Value, 1) & LCase(Mid(sourceSheet.Range("A2").Value, 2))

    Do Until sourceSheet.Cells(row, 1).Borders(xlEdgeBottom).LineStyle = 1
        school = sourceSheet.Cells(row, 1).Value
        campus = sourceSheet.Cells(row, 2).Value

        Do Until sourceSheet.Cells(row, col) = ""
            dataLabel = sourceSheet.Cells(5, col).Value
            dataValue = sourceSheet.Cells(row, col).Value

            If campus = "" Then
                cn.Execute "insert into crimedata(reportYear, state, school, campus, dataLabel, dataValue)values(" _
                & reportYear & ", " _
                & state & ", " _
                & school & ", " _
                & campus & ", " _
                & dataLabel & ", " _
                & dataValue & ")"
            Else:
                cn.Execute "insert into crimedata(reportYear, state, school, campus, dataLabel, dataValue)values(" _
                & reportYear & ", " _
                & state & ", " _
                & school & ", " _
                & "NULL, " _
                & dataLabel & ", " _
                & dataValue & ")"
            End If

            srcCol = 1
            srcRow = srcRow + 1
            col = col + 1
        Loop

        col = 3
        row = row + 1
    Loop

    row = 6
    sourceWorkbook.Close
    filename = Dir
Loop

cn.Close
Application.ScreenUpdating = True

End Sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:36:52.800

所以@Omnikrys 和@patrick choi 通过帮助我做了一件很棒的事情。事实证明，我需要的只是执行语句周围的单引号。所以不是我的执行语句看起来像这样：

```
cn.Execute "insert into crimedata(reportYear, state, school, campus, dataLabel, dataValue)values(" _
            & reportYear & ", " _
            & state & ", " _
            & school & ", " _
            & campus & ", " _
            & dataLabel & ", " _
            & dataValue & ")" 
```

我不得不在碰巧是这样的文本变量的所有内容之间添加单引号：

```
cn.Execute "insert into crimedata(reportYear, state, school, campus, dataLabel, dataValue) values(" _
                & reportYear & ", '" _
                & state & "', '" _
                & school & "', '" _
                & campus & "', '" _
                & dataLabel & "', " _
                & dataValue & ")" 
```

谢谢提醒伙计！它有帮助。

# jax-ws - 使用 CXF JaxWsServerFactoryBean 异常无法从 Bus 中找到任何已注册的 HttpDestinationFactory

> ID：13617691
> 
> 赞同：49
> 
> 时间：2012-11-29T02:02:54.817
> 
> 标签：jax-ws, cxf

在控制台模式下使用 Apache CXF JaxWsServerFactoryBean 时（尝试通过 java 命令行启动服务器）会出现如下异常：

```
Caused by: java.io.IOException: Cannot find any registered HttpDestinationFactory from the Bus.
        at org.apache.cxf.transport.http.HTTPTransportFactory.getDestination(HTTPTransportFactory.java:295)
        at org.apache.cxf.binding.soap.SoapTransportFactory.getDestination(SoapTransportFactory.java:143)
        at org.apache.cxf.endpoint.ServerImpl.initDestination(ServerImpl.java:93)
        at org.apache.cxf.endpoint.ServerImpl.<init>(ServerImpl.java:72)
        at org.apache.cxf.frontend.ServerFactoryBean.create(ServerFactoryBean.java:160) 
```

当通过 Spring 在 Tomcat 中使用相同的服务 impl 时，它可以工作。

```
<jaxws:endpoint id="abc" implementor="com.AbcServicePortTypeImpl" address="/abc"> 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-08-16T06:43:49.207

在 maven pom.xml 中包含 cxf-rt-transports-http-jetty jar 将解决问题。

```
 <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http-jetty</artifactId>
        <version>2.7.6</version>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-27T02:35:09.027

例如，如果您有以下配置，并且地址定义为附加了 http，这不是配置的 CXFServlet 的相对 url，则会出现上述错误。

```
<jaxrs:server id="helloRestService" address="http://...">
        <jaxrs:serviceBeans>
            <ref bean="helloService" />
        </jaxrs:serviceBeans>
</jaxrs:server> 
```

解决方案是简单地提及不附加 http/https 的相对 url 地址。

[http://grokbase.com/t/camel/users/155f1smn4v/error-cannot-find-any-registered-httpdestinationfactory-from-the-bus](http://grokbase.com/t/camel/users/155f1smn4v/error-cannot-find-any-registered-httpdestinationfactory-from-the-bus)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-07T18:19:23.350

我有同样的问题。谷歌的东西都没有意义。我发现在我的情况下我在 spring 上下文文件中缺少以下内容：

```
 <import resource="classpath:META-INF/cxf/cxf.xml" />
   <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
   <import resource="classpath:META-INF/cxf/cxf-servlet.xml" /> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-15T09:32:06.300

另一个适用于 CSV 2.7.15 的解决方案：当您创建 时`Bus`，注册一个扩展：

```
ServletDestinationFactory destinationFactory = new ServletDestinationFactory();
bus.setExtension(destinationFactory, HttpDestinationFactory.class); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-12T16:51:20.890

*尝试以下，它对我有用 -*

```
<dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-rt-transports-http-jetty</artifactId>
    <version>3.2.5</version>
    <exclusions>
        <exclusion>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-server</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-util</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-io</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-security</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-continuation</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-http</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-20T15:04:54.160

将 CAMEL-CXF 与 REST 服务一起使用时，我遇到了同样的错误。我通过骆驼路由和bean xml文件配置了端点，并且都给出了错误。我使用的是骆驼版本 2.14.1，因此添加以下依赖项对我有用。

```
 <dependency>
      <groupId>org.apache.httpcomponents</groupId>
      <artifactId>httpclient</artifactId>
      <version>4.5.1</version>
      <scope>test</scope>
  </dependency>

  <dependency>
      <groupId>org.apache.cxf</groupId>
      <artifactId>cxf-rt-transports-http-jetty</artifactId>
      <version>3.0.3</version>
      <scope>test</scope>
  </dependency> 
```

# linux - 如何将 linux sys/prctl.h 安装到 lion？

> ID：13617693
> 
> 赞同：3
> 
> 时间：2012-11-29T02:03:26.320
> 
> 标签：linux, macos, osx-lion

我正在尝试 使用 Xcode（4.3.3）在 Max OS linon（10.7.3）中安装一些程序（stone， [http: //www.gcd.org/sengoku/stone/Welcome.en.html）。](http://www.gcd.org/sengoku/stone/Welcome.en.html)但是，当我制作时，会出现以下错误消息。

> stone.c:231:10：致命错误：找不到“sys/prctl.h”文件

我使用“查找”命令进行搜索，但该库不存在。看来我需要安装一些 linux 库才能在 Mac OS 中开发，但我不知道。

如果您能帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T04:20:51.477

你不能。Linux 中描述的功能`prctl.h`在 Mac OS X 上不存在。

使用 XCode 只是让事情变得复杂。`stone`旨在从命令行构建，使用`make`.

# c# - 操作无法完成，因为 DbContext 已被释放错误

> ID：13617698
> 
> 赞同：40
> 
> 时间：2012-11-29T02:03:43.460
> 
> 标签：c#, entity-framework, extension-methods

我是 EF 的新手，我正在尝试使用一种扩展方法，它将我的 Database 类型转换`User`为我的 info 类`UserInfo`。
如果这有什么不同，我会先使用数据库吗？

我下面的代码给出了错误

> 操作无法完成，因为 DbContext 已被释放。

```
try
{
    IQueryable<User> users;
    using (var dataContext = new dataContext())
    {
        users = dataContext.Users
                  .Where(x => x.AccountID == accountId && x.IsAdmin == false);
        if(users.Any() == false)
        {
            return null;
        }
    }
    return users.Select(x => x.ToInfo()).ToList(); // this line is the problem
}
catch (Exception ex)
{
    //...
} 
```

我可以看到它为什么会这样做，但我也不明白为什么 where 语句的结果没有保存到`users`对象中？

所以我想我的主要问题是为什么它不起作用，其次使用扩展方法和 EF 的正确方法是什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-29T02:13:34.423

这个[问题和答案](https://stackoverflow.com/questions/1578778/using-iqueryable-with-linq)让我相信 IQueryable 的操作需要一个活动的上下文。这意味着你应该试试这个：

```
try
{
    IQueryable<User> users;

    using (var dataContext = new dataContext())
    {
        users = dataContext.Users.Where(x => x.AccountID == accountId && x.IsAdmin == false);

        if(users.Any() == false)
        {
            return null;
        }
        else
        {
            return users.Select(x => x.ToInfo()).ToList(); // this line is the problem
        }
    }

}
catch (Exception ex)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-29T02:26:04.260

对象暴露为`IQueryable<T>`并且`IEnumerable<T>`实际上不会“执行”，直到它们被迭代或以其他方式访问，例如被组合成`List<T>`. 当 EF 返回时，`IQueryable<T>`它本质上只是在组合能够检索数据的东西，在您使用它之前它实际上并没有执行检索。

`IQueryable`您可以通过在定义的位置放置断点来感受这一点，而不是在`.ToList()`调用时。（正如 Jofry 正确指出的那样，在数据上下文的范围内。）提取数据的工作是在`ToList()`调​​用期间完成的。

因此，您需要将其保持`IQueryable<T>`在数据上下文的范围内。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-29T02:40:26.440

您需要记住，在枚举 IQueryable 查询之前，它们实际上并不会针对数据存储执行。

```
using (var dataContext = new dataContext())
{ 
```

这行代码实际上除了构建 SQL 语句之外没有做任何事情

```
 users = dataContext.Users.Where(x => x.AccountID == accountId && x.IsAdmin == false); 
```

.Any() 是枚举 IQueryable 的操作，因此将 SQL 发送到数据源（通过 dataContext），然后对其执行 .Any() 操作

```
 if(users.Any() == false)
    {
        return null;
    }
} 
```

您的“问题”行正在重用上面构建的 sql，然后执行附加操作 (.Select())，这只是添加到查询中。如果你把它留在这里，没有例外，除了你的问题行

```
return users.Select(x => x.ToInfo()).ToList(); // this line is the problem 
```

调用 .ToList()，它枚举 IQueryable，这会导致 SQL 通过原始 LINQ 查询中使用的 dataContext 发送到数据源。由于此 dataContext 已被释放，因此不再有效，并且 .ToList() 会引发异常。

这就是“为什么它不起作用”。解决方法是将这行代码移到 dataContext 的范围内。

如何正确使用它是另一个问题，其中有一些可以说是正确的答案，具体取决于您的应用程序（Forms vs. ASP.net vs. MVC 等）。它实现的模式是工作单元模式。创建一个新的上下文对象几乎没有成本，所以一般规则是创建一个，完成你的工作，然后将其丢弃。在 Web 应用程序中，有些人会为每个请求创建一个上下文。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-29T02:23:04.890

抛出错误的原因是对象已被释放，之后我们尝试通过对象访问表值，但对象已被释放。最好将其转换为 ToList() 以便我们可以拥有值

也许在您使用它之前它实际上并没有获取数据（它是延迟加载），因此当您尝试完成工作时 dataContext 不存在。我敢打赌，如果您在范围内执行 ToList() 就可以了。

```
try
{
    IQueryable<User> users;
    var ret = null;

    using (var dataContext = new dataContext())
    {
        users = dataContext.Users.Where(x => x.AccountID == accountId && x.IsAdmin == false);

        if(users.Any())
        {
            ret = users.Select(x => x.ToInfo()).ToList(); 
        }

     }

   Return ret;
}
catch (Exception ex)
{
    ...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-18T16:07:28.643

这可以像在存储库中添加 ToList() 一样简单。例如：

```
public IEnumerable<MyObject> GetMyObjectsForId(string id)
{
    using (var ctxt = new RcContext())
    {
        // causes an error
        return ctxt.MyObjects.Where(x => x.MyObjects.Id == id);
    }
} 
```

将在调用类中产生 Db Context 处理错误，但这可以通过在 LINQ 操作上添加 ToList() 显式执行枚举来解决：

```
public IEnumerable<MyObject> GetMyObjectsForId(string id)
{
    using (var ctxt = new RcContext())
    {
        return ctxt.MyObjects.Where(x => x.MyObjects.Id == id).ToList();
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-25T10:23:11.440

改变这个：

```
using (var dataContext = new dataContext())
{
    users = dataContext.Users.Where(x => x.AccountID == accountId && x.IsAdmin == false);

    if(users.Any())
    {
        ret = users.Select(x => x.ToInfo()).ToList(); 
    }

 } 
```

对此：

```
using (var dataContext = new dataContext())
{
    return = dataContext.Users.Where(x => x.AccountID == accountId && x.IsAdmin == false).Select(x => x.ToInfo()).ToList();
} 
```

要点是您只想强制枚举上下文数据集一次。让调用者按照他们应该的方式处理空集场景。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-09T00:00:14.507

在这里，您尝试在非活动 DBContext 上执行 IQueryable 对象。你的 DBcontext 已经被处理掉了。您只能在处理 DBContext 之前执行 IQueryable 对象。意味着您需要`users.Select(x => x.ToInfo()).ToList()`在使用范围内编写语句

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-31T05:57:04.700

```
using(var database=new DatabaseEntities()){} 
```

不要使用 using 语句。就这样写

```
DatabaseEntities database=new DatabaseEntities ();{} 
```

它会起作用的。

有关该`using`声明的文档，请参见[此处](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/using-statement)。

# java - Java 7 中的函数式编程

> ID：13617705
> 
> 赞同：6
> 
> 时间：2012-11-29T02:04:39.177
> 
> 标签：java, functional-programming

Java 7 是否支持函数式编程，或者我仍需要使用 FunctionalJava 或其他库？我认为它对此有支持，但没有找到太多关于它的信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T02:13:30.643

这取决于您对函数式编程的定义。

无论如何，您的问题的答案是否定的。Lambda 本来应该出现在 Java7 中，但它们只会出现在 Java8 中。*看起来*使用 Java8，在您需要类似 FunctionalJava 之类的东西之前，您可以使用[新的 lambda 表示法与常规 JDK​​8 类库](http://cr.openjdk.java.net/~briangoetz/lambda/collections-overview.html) （特别是集合）一起做很多事情，但这取决于您想要多少做。很多 OO 人都会对 FP 的风格感到非常满意——一个常见的例子是集合`map`，`filter`等等。这本身无疑会使 Java*更接近*FP——并且可能对你来说就足够了 FP。

问题是，即便如此，这是否允许在 Java 中进行真正的（即使是“不纯的”）函数式编程？是的，也不*是*。是的，因为任何具有词法闭包和 lambda 表示法的语言在理论上都足够了。 *不*，因为语言`Haskell`,`F#`和支持`OCAML`的FP`Scala`仍然不切实际。

一些例子：

1.  缺少[代数数据类型](http://en.wikipedia.org/wiki/Algebraic_data_type)——这些被认为是 FP 语言的静态类型家族的关键组成部分，并且与许多 FP 习语配合得特别好。
2.  虽然不完全是 FP 的要求，但几乎所有静态类型的 FP 语言都具有某种形式的*类型推断*。
3.  为了方便，语句需要表现得像很多函数式编程习惯用语的表达式 - `if`,`try`等需要*返回一个值*。
4.  强制执行（如在 Haskell 中），或鼓励（如在 Scala 中） *单一赋值*以及*不变性*，以及为此目的的数据结构和库的有用集合。

其他语言，如 Lisp/Scheme 或 Erlang 也被认为是函数式的；但在不那么严格的意义上；要求 (1) 和 (2) 不适用，因为它们是*动态类型*的。

可以说，Javascript 与 Lisp（非纯动态函数式语言）功能差不多，因为 Javascript 一直都有 lambda 和一流的函数。但是 Java 属于*静态*类型家族，它的表现并不比 Javascript 好（比 Javascript），当然也不如现有的静态类型 FP 语言。

关于（4.（不可变/无副作用）），似乎在 JDK8 中，现有的可变类将使用 lambda 消耗方法进行*改造*，所以这将（至少在一段时间内）限制你能走多远采用 Java8 中的 FP 范式。

我发现这些链接非常有用——不过我已经有一段时间没有跟进了，所以我不确定它们是否是这方面的最佳/最新信息。但值得一读：

[http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-final.html](http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-final.html)

[http://cr.openjdk.java.net/~briangoetz/lambda/collections-overview.html](http://cr.openjdk.java.net/~briangoetz/lambda/collections-overview.html)

# c# - C# + 运算符调用 string.concat 函数？

> ID：13617707
> 
> 赞同：5
> 
> 时间：2012-11-29T02:04:58.390
> 
> 标签：c#, string, operator-overloading, concatenation

> **可能重复：**
> [C# 是否优化了字符串文字的连接？](https://stackoverflow.com/questions/288794/does-c-sharp-optimize-the-concatenation-of-string-literals)

我刚刚发现我们写了这样一行：

```
string s = "string";
s = s + s; // this translates to s = string.concat("string", "string"); 
```

但是我通过反射器打开了字符串类，我没有看到这个 + 运算符在哪里重载？我可以看到 == 和 != 被重载了。

```
[TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    public static bool operator ==(string a, string b)
    {
      return string.Equals(a, b);
    }
[TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries")]
    public static bool operator !=(string a, string b)
    {
      return !string.Equals(a, b);
    } 
```

那么为什么当我们使用 + 组合字符串时会调用 concat 呢？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T04:31:06.580

> 那么为什么当我们使用 + 组合字符串时会调用 concat 呢？

C# 规范的第 7.7.4 节“加法运算符”定义了字符串的二进制加法运算符，其中运算符返回操作数的串联。

CLI 规范中的定义`System.String`包括几个`Concat`重载，但没有`+`运算符。（我没有明确的答案来解释这种遗漏，但我想这是因为某些语言定义`+`了字符串连接以外的运算符。）

`String.Concat`鉴于这两个事实，C# 编译器编写器最合乎逻辑的解决方案是在编译运算符时发出调用`+(string, string)`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T03:39:38.570

编码

```
 public string Foo(string str1, string str2)
    {
        return str1 + str2;
    } 
```

给出以下 IL：

```
IL_0000:  nop
IL_0001:  ldarg.1
IL_0002:  ldarg.2
IL_0003:  call       string [mscorlib]System.String::Concat(string, string)
IL_0008:  stloc.0
IL_0009:  br.s       IL_000b
IL_000b:  ldloc.0
IL_000c:  ret 
```

编译器（至少是 Visual Studio 2010 中的编译器）完成了这项工作，并且没有`+`重载。

# html - 如何增加导航中菜单分隔线的高度？

> ID：13617713
> 
> 赞同：0
> 
> 时间：2012-11-29T02:06:17.333
> 
> 标签：html, css, header

这就是我得到的。我需要增加菜单选项之间的分隔线 (|) 的高度。我该怎么做才能让它只占用整个标题区域？

HTML：

```
 <header>
 <img src="/images/logo.png" height="50px" id="front" />
 <nav>
 <ul>
 <li><a href="#">Home</a></li>
 <li><a href="#">About</a></li>
 <li class="last"><a href="#">Contact</a></li>
 </ul>
 </nav>
 <div id="second_line"></div>
 </header> 
```

CSS：

```
 body {
 margin: 0;
 }
 header {
 background-color: #009000;
 height: auto;
 position: relative;
 }
 #front {
 margin-left: 20px;
 margin-top: 20px;
 }
 nav {
 float: left;
 margin-top: 30px;
 }
 ul {
 margin: 0;
 padding: 0;
 float: left;
 }
 ul li {
 list-style-type: none;
 float: left;
 border-right: 2px solid black;
 padding-right: 5px;
 padding-left: 5px;
 }
 ul li.last {
 border-right: 0px;
 }
 #second_line {
 margin-top:10px;
 height:3px;
 background-color: #FECE2C;
 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:33:25.857

```
ul li {
    list-style-type: none;
    float: left;
    border-right: 2px solid black;
    padding-right: 5px;
    padding-left: 5px;
    **line-height:30px;**
} 
```

# c++ - 选择何时使用好友功能

> ID：13617714
> 
> 赞同：1
> 
> 时间：2012-11-29T02:06:25.560
> 
> 标签：c++, friend

请参阅[C++ FAQ 精简版](http://www.parashift.com/c++-faq-lite/member-vs-friend-fns.html)

它规定了二进制中缀算术运算符：

```
member functions don't allow promotion of the left hand argument, since that 
would change the class of the object that is the recipient of the member 
function invocation 
```

有人可以解释为什么会这样吗？为什么对第一个参数的类型有限制？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T02:14:42.237

考虑一下：

```
struct Number {
    Number(int val) : val(val) {  }    // *Not* explicit
    int val;                           // Everything public to simplify example

    Number operator+(Number const& other) const { return val + other.val; }
};

Number n(42);
Number result = 32 + n;    // Doesn't compile 
```

但是，如果我们删除了成员运算符并使其成为自由函数：

```
Number operator+(Number const& a, Number const& b) { return a.val + b.val; }

Number n(42);
Number result = 32 + n;    // Compiles! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T02:15:28.277

假设您有一个类型，`Foo`使得这`Foo f; int n;`两个表达式都有意义。`f + n``n + f`

通过重载成员`operator+`，您只能实现`f + n`：

```
struct Foo
{
    Bar operator+(int n) const;       // binds to "Foo + int"
    // ...
}; 
```

您永远无法`int + Foo`从成员运营商那里获得其他版本。解决方案是定义*自由*运算符，它可以用于任何涉及至少一种用户定义类型的签名。事实上，我们可以像这样回收成员运算符：

```
Bar operator+(int n, Foo const & f)   // binds to "int + Foo"
{
    return f + n;                     // recycle existing implementation
} 
```

当您*只有*`friend`一个免费的运算符重载时，通常将其设为 a of`Foo`以便它可以访问该类的内部是有意义的。在我们的例子中，我们不需要这个，因为我们只是将调用传递给成员操作员。

# php - 使用从 php 导入的非标准库调用 python 脚本*

> ID：13617715
> 
> 赞同：2
> 
> 时间：2012-11-29T02:06:28.913
> 
> 标签：php, python, error-handling

我已经搜索了所有相关的问题，有很多类似的问题，但我的问题是

如何从 php 调用我导入了一些**非标准库/模块的 python 脚本**

更具体地说，我有一个 .py 文件 test.py，我在其中导入了 pycurl 和 bottlenose，这是一个亚马逊 API 包装器。这两个模块都不在标准库中。所以文件看起来像

```
import pycurl
import bottlenose
...
print "hello!" 
```

然后我做了一个php文件，test.php

```
<?
$output = array();
exec("/home/my_user_name/local/Python-2.7/bin/python test.py", $output, $ret_code);
var_dump( $output);
echo $ret_code;
?> 
```

test.php 和 test.py 都在同一个目录下。更重要的是，如果我跑

```
php test.php 
```

**在我的终端**中，它没有问题。成功输出“hello”，返回码为0，表示程序正常退出

但是，当我在**浏览器**www.someurl.com/test.php 上对其进行测试时，出现了一些错误。我逐行跟踪，发现错误发生在“import pycurl”和“import bottlenose”。

我还尝试打印出 sys.path，它确实包含了瓶颈的路径。

有人可以帮忙吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:23:48.367

如果您在调用 Python 程序之前在 php 脚本中调用 putenv，我会相信 sys.path 是正确的。

从成功运行开始，借此机会打印 sys.path。让我们将此打印的结果称为“x”。然后，尝试以下操作：

```
putenv('PYTHONPATH=x');
exec("/home/my_user_name/local/Python-2.7/bin/python test.py", $output, $ret_code); 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T02:22:45.153

通常，您不会将 Web 服务器作为 运行`my_user_name`，而是作为特殊用户（如`httpd`or`www`或）运行`nobody`。并且该用户可能无权读取您已安装的 Python 模块，这当然会使导入失败。

要对此进行测试，请尝试在导入之前将其打开：

```
try:
    with open('/path/to/bottlenose.py', 'r') as f:
        print('Opened file just fine')
except Exception as e:
    print('Failed to open file: %s' % (e,)) 
```

当然，如果`print`在您的设置中不起作用，无论您为打印出`sys.path`. 所做的一切，都在这里做同样的事情。

如果这不是问题，您可以尝试将导入包装在一个`try`块中以打印出异常并查看它失败的原因，这样我们就不必猜测了。

如果这*是*问题所在，快速而简单的解决方案是让您的 Web 服务器帐户通过`chmod`……访问您用户的 Python 模块目录，但更好的解决方案是将模块安装到系统范围的站点包目录，或者安装到由Web 服务器帐户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T02:37:53.820

对于您的情况来说，它可能太重了，但是您是否考虑过[virtualenv](http://www.virtualenv.org/)？

# assembly - 装配中的分段错误

> ID：13617726
> 
> 赞同：2
> 
> 时间：2012-11-29T02:08:43.530
> 
> 标签：assembly, x86, segmentation-fault

我有这个汇编代码：

```
00000000 <Q2>:
   0:   55                      push   %ebp
   1:   89 e5                   mov    %esp,%ebp
   3:   83 ec 20                sub    $0x20,%esp
   6:   c7 45 fc 1f 00 00 00    movl   $0x1f,-0x4(%ebp)
   d:   c7 45 f8 06 f4 ff ff    movl   $0xfffff406,-0x8(%ebp)
  14:   8b 45 fc                mov    -0x4(%ebp),%eax
  17:   8b 55 08                mov    0x8(%ebp),%edx
  1a:   8d 04 02                lea    (%edx,%eax,1),%eax
  1d:   89 45 f4                mov    %eax,-0xc(%ebp)
  20:   8b 45 08                mov    0x8(%ebp),%eax
  23:   0f af 45 f4             imul   -0xc(%ebp),%eax
  27:   89 45 f0                mov    %eax,-0x10(%ebp)
  2a:   8b 45 f8                mov    -0x8(%ebp),%eax
  2d:   8b 55 f0                mov    -0x10(%ebp),%edx
  30:   8d 04 02                lea    (%edx,%eax,1),%eax
  33:   89 45 ec                mov    %eax,-0x14(%ebp)
  36:   83 7d ec 00             cmpl   $0x0,-0x14(%ebp)
  3a:   74 0a                   je     46 <Q2+0x46>
  3c:   b8 00 00 00 00          mov    $0x0,%eax
  41:   8b 00                   mov    (%eax),%eax
  43:   89 45 f4                mov    %eax,-0xc(%ebp)
  46:   8b 45 f8                mov    -0x8(%ebp),%eax
  49:   89 c2                   mov    %eax,%edx
  4b:   c1 fa 1f                sar    $0x1f,%edx
  4e:   f7 7d 08                idivl  0x8(%ebp)
  51:   c9                      leave  
  52:   c3                      ret 
```

我认为分段错误出现在第 4e 行，它会在十进制`%edx`右移后除以。`0x1f (31)`我认为答案很可能会导致除以，`0`除非该数字大于或等于`2^31`。

我被告知是否发生分段错误取决于函数的 1 参数的值。在进一步检查汇编代码后，我得出结论，故障与参数无关。我似乎找不到我忽略的东西。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:47:38.723

问题在于这些行：

```
3c:   b8 00 00 00 00          mov    $0x0,%eax
41:   8b 00                   mov    (%eax),%eax 
```

您正在将 0 移入`%eax`，然后尝试访问`(%eax)`. 在许多操作系统（例如 linux）上，尝试读取地址`0x0`将导致分段错误。

如果我正确阅读了代码，除非是 -73 或 42 `param * (param + 31) == 3066`，否则会发生这种情况。`param`

# c++ - 更改树视图状态图像

> ID：13617733
> 
> 赞同：1
> 
> 时间：2012-11-29T02:09:28.523
> 
> 标签：c++, winapi, treeview

我（仍在）试图弄清楚如何将树视图的状态图像从默认的 +/- 更改为我选择的图像。我正在取得进展，但我碰壁了。

我只是想在扩展分支时更改图像。当我使用下面的代码时，有时它会改变，有时不会。只有当我来回弹跳几次而不是第一次时，它才会按预期运行。

我假设我错过了一个标志或没有正确设置一些东西？有小费吗？

```
case WM_NOTIFY:
    if (wParam == IDC_TVWFILELIST) {
        LPNMTREEVIEW nmtv = (LPNMTREEVIEW) lParam;

        if (nmtv->hdr.code == TVN_ITEMEXPANDED) {
            TVITEM item = nmtv->itemNew;
            item.state = INDEXTOSTATEIMAGEMASK(4);
            TreeView_SetItem(pnl_tree.GetTreeview(), &item);
        }
    }
    break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:25:14.320

好的，当然，当我在 SO 上发帖时，我很快就会自己弄清楚！该死。猜猜它有助于谈论它。无论如何，对于下一个人。

* * *

我在学习 winapi 的其他地方也遇到过同样的问题，尤其是使用树视图 - 如果我忽略设置结构的某个成员，我会得到奇怪的行为。

在这种情况下，事实证明`item.stateMask = TVIS_STATEIMAGEMASK;`需要重新设置。

显然它不会在[TreeView_SetItem()](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760091%28v=vs.85%29.aspx)中持续存在（它非常简洁地指出“TreeView_SetItem 宏设置了部分或全部树视图项的属性”）。

对我来说，工作代码带有扩展/折叠处理程序的奖励（现在我正在用煤气做饭）：

```
if (wParam == IDC_TVWFILELIST) {
    LPNMTREEVIEW nmtv = (LPNMTREEVIEW) lParam;

    if (nmtv->hdr.code == TVN_ITEMEXPANDED) {
        TVITEM item = nmtv->itemNew;
        item.stateMask = TVIS_STATEIMAGEMASK;

        if (nmtv->action == TVE_COLLAPSE) {
            item.state = INDEXTOSTATEIMAGEMASK(4);
        }
        else if (nmtv->action == TVE_EXPAND) {
            item.state = INDEXTOSTATEIMAGEMASK(5);
        }

        TreeView_SetItem(pnl_tree.GetTreeview(), &item);
    }
} 
```

未来树视图图像状态新手的其他一些链接，不适用于这个问题，但帮助我慢慢弄清楚这件事：

[树状视图项目状态概述](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760017%28v=vs.85%29.aspx)

[TVN_ITEMEXPANDED 消息](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773533%28v=vs.85%29.aspx)

# javascript - 在 jquery 中使用 JSON 传递这个对象

> ID：13617737
> 
> 赞同：1
> 
> 时间：2012-11-29T02:10:02.343
> 
> 标签：javascript, jquery, json

我一直在努力使用上述技术使用 cookie 来保持表格菜单的会话状态。长期以来，这一直是一个开放的错误，老实说，我的 jquery 技能不存在：

它在功能上几乎是完美的，尽管我确信可以进行更好的重写这一行是以下问题

```
**$(activate).parent().addClass('active');** 
```

这是代码：

```
<script type='text/javascript'>
        $(document).ready(function() {
            var cookie = $.cookie('menu_cookie');
            if (cookie === null) {
                //create cookie
                $.cookie('menu_cookie', '#tab-1!88!#tab ul li:first');
            }
            var currentTab = $.cookie('menu_cookie').split('!88!');
            var val1 = currentTab[0];
            var val2 = currentTab[1];
            alert(val1);
            alert(val2);
            //Hide all tabs
            $('#tab div').hide();
            //Show current tab, loaded from cookie
            $(val1).show();
            //Show hidden child div
            if (val1 === '#tab-1') {
                $('.fb-like-box').show();
            }
            var x = val2.substring(0, 1);
            //Chech if init Session        
            if (x === '#') {
                $(currentTab[1]).addClass('active');
            } else {
                var activate = JSON.parse(currentTab[1]);
                //Get json data for active
                alert("xxx");
                //alert(jsonp);
                **$(activate).parent().addClass('active');**
            }
            //On click function
            $('#tab ul li a').click(function() {
                $('#tab ul li').removeClass('active');
                $(this).parent().addClass('active');
                var currentTab = $(this).attr('href');
                //Hide all tabs
                $('#tab div').hide();
                if (currentTab === "#tab-1") {
                    $('.fb-like-box').show();
                }
                $(currentTab).show();
                var sjson = JSON.stringify(this);
                var cooker = currentTab + '!88!' + sjson;
                alert(sjson);
                $.cookie('menu_cookie', cooker);
                return false;
            });
        });
    </script> 
```

所以基本上我想使用cookie传递这个对象，然后分配我想做的事情

```
$(this).parent().addClass('active'); 
```

通过 JSON 传输“this”对象。调试警报让我猜测实际上发送了正确的数据，这让我相信问题出在上面提到的那一行

使用非传输对象时，选定的菜单选项卡会很好地突出显示。cookie 用于存储相同的对象，以确保在单击子菜单中的某个链接后重新加载页面时选择最后选择的选项卡。

故障线路会将适当的类分配给最后选择的菜单选项卡，但无法正常工作。

谢谢！

# javascript - 非空白字符的返回值

> ID：13617739
> 
> 赞同：1
> 
> 时间：2012-11-29T02:10:43.413
> 
> 标签：javascript, regex, replace, textarea

我正在尝试编写一个函数来返回文本区域内的非空白字符的值。我应该使用替换和给我的正则表达式来分隔空格和实际字符，但我只是不明白我应该如何获得计数。有人可以向我解释一下吗？

```
function countText()
{
    var commentText;
    var commentBox = document.getElementById('comment');  //comment is my textArea ID
    var commentregx = "/\s/g";                            // whitespace regex

    commentText = commentBox.value.replace(commentregx, ""); // commentText is supposed to hold the number of non-whitespace values.
} 
```

如果需要，我可以将其与其他功能一起放入 jsfiddle。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:15:19.277

正在返回没有空格的`replace`字符串，所以只需抓住它的长度：

```
commentText = commentBox.value.replace(commentregx, "").length; 
```

# ios5 - CoreData openWithCompletionHandler 在继续之前如何等待它完成

> ID：13617744
> 
> 赞同：1
> 
> 时间：2012-11-29T02:11:39.757
> 
> 标签：ios5, ios6, xcode4.5

我正在尝试让 CoreData 工作，所以我为自己制作了一个小测试应用程序。一切正常，除了一种类型的项目 - 打开（或保存或关闭）WithCompletionHandler。我希望处理程序在其他任何事情发生之前完成。代替将所有代码放在这里，我只是将问题放在哪里。我一直试图让这个 WithCompletionHandler 工作很长一段时间，但我似乎无法理解如何让其余代码等到完成处理程序完成。

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    [self.contactsDatabase openWithCompletionHandler:^(BOOL success)
    {
        if (success)
            [self loadArrayFromFile];
    }
}

-(IBAction)deleteButton:(id)sender
{
    // I need this to NOT work until open is finished (or a previous save is finished)
    // delete an item in the database
    [self saveDatabase];
}

-(IBAction)addButton:(id)sender
{ 
    // I need this to NOT work until open is finished (or a previous save is finished)
    // add an item to the database
    [self saveDatabase];
} 
```

在设备上，如果您连续 10 次点击添加或删除按钮，它就会崩溃。此外，当它第一次加载时，您可以在加载数据库之前添加，这会产生错误。

# apache - 向 Apache Fop 添加注释

> ID：13617745
> 
> 赞同：6
> 
> 时间：2012-11-29T02:11:42.620
> 
> 标签：apache, xslt, pdf, annotations, apache-fop

我正在使用**Apache Fop**呈现 PDF 。我正在制作用于将 xml 转换为 PDF 的 XSLT 模板。我想使用**Apache Fop**在输出 PDF 中添加注释。 **我一直在搜索，它说 iText 支持向 pdf 添加注释。**

*是否可以在 Apache Fop 中添加注释？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:17:12.493

iText 支持向 PDF 文档添加注释。我们在我们的产品中使用它。您可以执行以下操作：

*   使用现有的 PDF，例如使用 Apache FOP 创建的 PDF。您需要编写一个 Java 程序来为这个 PDF 文档添加注释。
*   使用来自 XML 数据的 iText API 以编程方式创建 PDF 和注释（不涉及 Apache FOP）。

我不确定这是否是你想要的。iText 不能替代 GUI 应用程序。

# javascript - Javascript模拟“右键单击图像->将图像另存为”

> ID：13617747
> 
> 赞同：4
> 
> 时间：2012-11-29T02:11:50.120
> 
> 标签：javascript, download, simulate

好的，有一个与这个完全相同的问题，但已经有 2 年了，只有一个答案不是真正的解决方案。

所以，我有一个图像（缩略图），它的正下方有 2 个按钮：`View`和`Download`.

View 将在浏览器中打开图像（缓存）。下载按钮将打开保存图像对话框。

现在我正在使用 PHP 的标题`Content-Disposition: attachment;`作为下载按钮。

通常，访问者会先点击`View`按钮进行预览（缩略图不是解决方案，因为需要验证细节和质量），尤其是对于我自己的应用程序。

现在，我真的不希望通过 PHP 再次读取该文件，因为这需要时间。而为了更好的用户体验，**是否可以模拟“右击图片->图片另存为”弹出下载对话框，访问者只需单击一下即可下载？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:24:32.483

不，这是不可能的。您必须触发一个新请求并使用 http 标头强制下载，就像您目前正在做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T03:14:04.480

根据[文档对象](https://developer.mozilla.org/en-US/docs/Web/API/document)的技术规范，没有**任何方法**可以让您通过 JavaScript 强制下载文档/文件/资源​​。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T02:35:06.587

尝试使用`oncontextmenu`这样的事件的想法：

HTML：

```
<div id="image">
YOUR IMAGE
</div>

<div id="contextmenu" style="display: none">
<ul>
    <li>YOUR LINK TO DOWNLOAD IMAGE</li>
</ul>
</div>​ 
```

使用 jQuery 的脚本：

```
var img = document.getElementById("image");
img.oncontextmenu = function(e){
    e.preventDefault();

    contextmenu = $("#contextmenu");
    contextmenu.css("top",(e.pageY) + "px")
        .css("z-index","9999")
        .css("left",(e.pageX) + "px");

    contextmenu.fadeIn('fast');    
    return false;
};

$("#image").click(function(){
    $("#contextmenu").hide();
}); 
```

​ CSS：

```
#image {
    width: 300px;
    height: 300px;
    background: rgba(0, 0, 0, 0.2);
}
#contextmenu{
    position:fixed;
    background: white;
} 
```

​我还在这里为演示[http://jsfiddle.net/aanred/75xaU/](http://jsfiddle.net/aanred/75xaU/)创建小提琴。希望能帮助到你。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-11T01:58:22.140

尝试这个

```
<a href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA......" download="save-name.jpg">Click me to download the img</a> 
```

# ios - 图像地图链接在 iOS 设备上不起作用

> ID：13617748
> 
> 赞同：3
> 
> 时间：2012-11-29T02:11:59.890
> 
> 标签：ios, css, html

我正在制作一张圣诞电子贺卡，想要一部动画“电影”的力量，最后会有链接。他们希望它适用于所有可以想象的设备。我使用“easyhtml5video”来转换我的 After Effects mp4 并编写 javascript。然后，我使用 z-index 在视频上放置了一个透明图像，其中包含一些带有链接的图像映射。它适用于所有浏览器，但链接不适用于 iOS 设备。当我尝试单击链接区域时，会弹出视频控件。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:04:14.243

您可以尝试[http://tumult.com/hype/](http://tumult.com/hype/)为各种设备创建交互式内容。还要告诉您的客户，几乎所有可以想象的设备都没有可用的 ;-)

# node.js - 了解freelist

> ID：13617752
> 
> 赞同：1
> 
> 时间：2012-11-29T02:12:30.613
> 
> 标签：node.js

[https://github.com/joyent/node/blob/master/lib/freelist.js](https://github.com/joyent/node/blob/master/lib/freelist.js)

> 制作销毁方法是非常危险的。我建议如果您对此感到担忧，那么您可以使用 require('freelist') 并在使用后尝试回收内存 - 这就是我在 net.js 中所做的

例如在[https://github.com/joyent/node/blob/master/lib/http.js](https://github.com/joyent/node/blob/master/lib/http.js)中使用它，但我仍然没有完全理解它。一个如何使用这个模块的例子是很好的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T14:13:05.500

这是管理经常创建和销毁对象的重用的非常简单的方法。freelist 仅在没有当前未使用的对象可用时创建新对象，减少内存占用而无需等待垃圾回收等。使用它涉及三个简单的步骤：

为向量创建一个新的空闲列表（您想要重用的虚构对象类型）：

```
// Some type of object I want to be able to reuse
var Vector = require('./Vector');
// The freelist itself
var FreeList = require('freelist').FreeList;

// Arguments are (freelistName, maxSize, constructorForNewObjects)
var vectorsList = new FreeList('vectors', 1000, function() {
  // quick way to use constructor with arguments object
  return Vector.apply(Object.create(Vector.prototype), arguments);
}); 
```

从 freelist 中获取一个新向量：

```
var vector = vectorsList.alloc(/* optional arguments for the Vector constructor /*); 
```

释放不再需要的向量：

```
vectorsList.free(vector); 
```

就是这样。

需要注意的一件非常重要的事情：尽管我已经在上面编写了将来自 alloc 调用的参数传递给向量构造函数的内容，但这*仅*在列表中没有可用向量的情况下才会发生。否则你只会得到第一个可用的向量，仍然用它在构造时的任何参数构造。

如果您想真正干净地初始化每个对象，您可能不应该将对象的初始化放入构造函数中，而是放入 init 函数中，在从 freelist 中获取对象后始终调用该函数。

当然，这可能通过 freelist 来完成，并通过一些巧妙的技巧再次调用构造函数进行初始化。

# matlab - MATLAB：从一个点向另一个点的方向绘制一个设定大小的箭头

> ID：13617755
> 
> 赞同：0
> 
> 时间：2012-11-29T02:12:45.287
> 
> 标签：matlab

我想用给定的幅度从一个点**向另一个点画一个箭头。**

例如，两个点的坐标分别为 (x,y) = (0,0) 和 (1,1)。

从 (0,0) 开始绘制一个箭头，其大小（长度）`mag_pt1_pt2`朝向 (1,1)。

我想对大约 400 个点重复此操作，然后绘制一个矢量场。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:17:24.770

这是一个有人为此编写的 matlab 库：

[http://www.mathworks.com.au/matlabcentral/fileexchange/278-arrow-m](http://www.mathworks.com.au/matlabcentral/fileexchange/278-arrow-m)

鉴于 OP 对答案的评论，他可以这样做：

```
function [] = arrowLandD(x1, y1, length, x2, y2)
    direction = arctan((y2-y1)/(x2-x1));
    p2 = [x1+length*cos(direction) y1+length*sin(direction)];
    arrow([x1 y1], p2);
end 
```

使箭头从起点而不是 p1-> p2 变成长度和方向的图。

您还可以使用内置的矢量场库 quiver：

[http://www.mathworks.com.au/help/matlab/ref/quiver.html](http://www.mathworks.com.au/help/matlab/ref/quiver.html)

要生产这样的东西：

![在此处输入图像描述](../Images/8e06a508817c767fdaf879cc27b993e7.png)

希望这可以帮助。

# c# - 使用 String.split() 提取数字？

> ID：13617760
> 
> 赞同：1
> 
> 时间：2012-11-29T02:13:39.683
> 
> 标签：c#, .net, string

我正在开发一个应用程序，它在某些时候需要自动读取“X00001”类型的 ID 号。它来自 sql 数据库的字符串，但我的程序只需要“00001”部分。

如何使用 String.split() 方法（或任何其他方法）去除代码中的字母？

请注意，每个代码只有一个注释字母，因此删除代码的第一个字符对我来说就足够了。我曾想过将字符串转换为 char[] 数组，然后仅从中提取其他字符，但我认为学习如何使用 split() 方法是个好主意。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T02:15:52.683

试试这个来删除字符串的第一个字符：

```
string removed = ID.Remove(0, 1); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T02:15:39.650

这真的不是分裂的工作。如果您知道要删除字符串的第一个字符，请使用[Substring](http://msdn.microsoft.com/en-us/library/aa904307%28v=vs.71%29.aspx)。

```
// take the substring from element 1 to the end
string needle = haystack.Substring(1); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T02:18:18.567

你不需要 String.Split()。请改用子字符串。

```
string id = "X00001";
string strippedID = id.Substring(1); 
```

[MSDN：字符串。子字符串（Int32）](http://msdn.microsoft.com/en-us/library/hxthx5h6.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T02:15:49.067

```
var input = "X00001";
var output = input.Substring(1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T07:30:19.403

```
string id = "X00001";
string strippedID = id.Substring(1);
Console.WriteLine(strippedID); 
```

# asp.net - Real AJAX 和 ASP.net AJAX 之间的混淆

> ID：13617767
> 
> 赞同：0
> 
> 时间：2012-11-29T02:14:13.087
> 
> 标签：asp.net, ajax, asp.net-ajax

我使用 ASP.NET 已经超过 1 年了。我使用更新面板，它们异步更新页面而不会导致回发。

我认为这都是关于 Ajax 的。直到我听说 ASP.NET AJAX 不是真正的 AJAX。是吗 ？

而且，Real Ajax 比 ASP.NET AJAX 更快、更高效。

# 这个真正的 ajax 是什么，我从哪里开始学习它？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:23:27.953

我认为这里提到的真正的 ajax 是 Ajax 库，它可以用来执行各种选项。Asp.Net Ajax 只有有限的选项，如更新面板。Ajax 库可以提供大量的扩展器和其他新控件。

# javascript - JS URI 中的 Javascript 变量范围，或者如何编写页面范围对象？

> ID：13617768
> 
> 赞同：1
> 
> 时间：2012-11-29T02:14:15.857
> 
> 标签：javascript, cross-browser, greasemonkey, scope, userscripts

我正在编写一个尝试在 Chrome 和 Firefox 中使用的 Greasemonkey 脚本。我知道你不能`unsafewindow`像在 Firefox 中那样在 Chrome 中使用，所以我一直在尝试使用 jS-uris，比如[Greasemonkey、Chrome 和 unsafeWindow.foo()](https://stackoverflow.com/questions/3400985/greasemonkey-chrome-and-unsafewindow-foo)的答案。

当我尝试以下操作时：

```
location.assign("javascript:var tutu = 'oscar';");
location.assign("alert('1:' + tutu);");
alert('2:' + tutu); 
```

我收到一条错误消息，显示“tutu”未定义。显然我不明白的是这些变量的范围。我需要为我正在做的事情创建全局函数和变量。我做错了什么？

编辑：实际上我认为问题不是我正在尝试的（除非它是，在这种情况下请告诉我）但是我正在为外观编写脚本的页面与 URLS 混淆，以防止它们去任何东西，但一个相对的 URI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:20:24.893

在 Chrome 中，调用后会有延迟`location.assign`（它们可能在单独的线程中运行），因此当触发并且整个代码抛出异常`tutu`时，没有定义 var 。`alert()`（另外，正如 trinity 所说，`alert`需要以 . 开头`javascript:`。）

您可以像这样使用计时器：

```
location.assign("javascript:var tutu = 'oscar';");
setTimeout (
    function () {location.assign("javascript:console.log('1:' + tutu);"); }
    , 666
); 
```

但是，我想你会同意这是一个麻烦的地方。

除了最短/最简单的代码之外，尝试使用页面范围的 javascript`location.assign`会变得很麻烦。

***使用脚本注入***设置、重置和/或运行***大量***页面范围的 javascript ：

 *```
function setPageScopeGlobals () {
    window.tutu     = 'Oscar';
    window.globVar2 = 'Wilde';
    window.globVar3 = 'Boyo';

    alert ('1:' + tutu);

    window.useGlobalVar = function () {
        console.log ("globVar2: ", globVar2);   
    };
}

//-- Set globals
addJS_Node (null, null, setPageScopeGlobals);

//-- Call a global function
addJS_Node ("useGlobalVar();");

//-- Standard-ish utility function:
function addJS_Node (text, s_URL, funcToRun, runOnLoad) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    if (runOnLoad) {
        scriptNode.addEventListener ("load", runOnLoad, false);
    }
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    targ.appendChild (scriptNode);
} 
```*

# php - HTML/CSS IE 不显示标题

> ID：13617769
> 
> 赞同：0
> 
> 时间：2012-11-29T02:14:19.797
> 
> 标签：php, html, css, internet-explorer

我的新网站具有内置导航并与标题图像**重叠。**可悲的是，在 Internet Explorer（所有版本 < 10）中，我的标题和导航都**消失了**。使用经典的逐行 HTML 编程的所有内容似乎都可以正常工作。我已经尝试过文档类型的修复，但无济于事。
我试着弄乱我现在的号码，什么都没有。

这是标题的 CSS：（PHP 选择随机图像）

```
Header 
   {
      height: 128px;
      background: url(<?php echo $selectedBg ?>);
      text-indent: -9999px;
      border-bottom: 0px solid #00;
      padding: 0px;
      margin: 0;
   } 
```

对于导航：（在此类中简单使用）

```
div.navigation
{
   position: absolute;
   top: 81px; left: 425px;
   height: 47px; width:575px;
   background-color: transparent;
   z-index: 10;
   padding: 0px;
   margin: 0;
   margin-left: 15px;
} 
```

公告CSS：

```
div.announcement{
    position: absolute;
    top: 140px; left: 425px;
    height: 47px; width:575px;
    z-index: 20;
} 
```

我需要做的就是在所有浏览器中正确显示。感谢任何可以提供帮助的人。

**请求的代码片段：**

```
!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<?php
  $bg = array('images/header1.png', 'images/header2.png', 'images/header3.png', 'images/header4.png', 'images/header5.png', 'images/header6.png', 'images/header7.png', 'images/header8.png' ); // array of filenames

  $i = rand(0, count($bg)-1); // generate random number size of the array
  $selectedBg = $bg[$i]; // set variable equal to which random filename was chosen
?>

<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>BitFracture.com</title>
    <link rel="icon" href="images/site.ico" type="image/x-icon">
    <link rel="shortcut icon" href="images/site.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="style.css" media="screen,projection">
    <link href="*" rel="stylesheet" type="text/css">
    <style type="text/css">
    Header {
        height: 128px;
        background: url(<?php echo $selectedBg ?>);
        text-indent: -9999px;
        border-bottom: 0px solid #00;
        padding: 0px;
        margin: 0;
        }
    </style>
</head>

<body>
<div id="container" class="clearfix">
<div class="navigation"> 
    <a href="#"><img src="images/home.png" onmouseover="this.src='images/homeh.png'" onmouseout="this.src='images/home.png'"></a> 
    <a href="#"><img src="images/repairs.png" onmouseover="this.src='images/repairsh.png'" onmouseout="this.src='images/repairs.png'"></a> 
    <a href="#"><img src="images/articles.png" onmouseover="this.src='images/articlesh.png'" onmouseout="this.src='images/articles.png'"></a> 
    <a href="#"><img src="images/software.png" onmouseover="this.src='images/softwareh.png'" onmouseout="this.src='images/software.png'"></a> 
</div>
<div class="announcement">
    <p> <b>News:</b> Our new site is up and running!</p>
</div>
<header></header> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:22:16.903

什么是

```
Header 
   {...} 
```

确切地？如果您正在使用`<header>`标签，则将其删除并将 css header {} 替换为 div.header {} 并将其应用于 div 标签，例如`<div class='header'>...</div>`

还有#00；应该是#000；（三种颜色，而不是 2 种颜色，因为这可能会在不同的浏览器中为您提供有趣的结果）。

您可能还想使用具有 position:relative; 的容器元素。设置只是为了帮助浏览器确定从哪里开始定位。

您能否发布与 css 一起使用的 html 的工作片段？

# security - 黑客进入了我的网站

> ID：13617778
> 
> 赞同：0
> 
> 时间：2012-11-29T02:15:23.293
> 
> 标签：security, md5

我最近创建的一个网站遭到黑客攻击和污损。他们进入了一个自制的 CMS 来管理网站。他们能够检索我的用户名和密码的散列版本并将其发布在 Facebook 上。

现在我的问题是，他们是如何使用散列密码进入网站的？他们不需要先解密吗？他们为什么不在他们的 Facebook 帐户上发布密码的解密版本（当我看到许多其他网站张贴在那里并显示他们的人类可读密码时）。

这是我的验证码：

```
SELECT * FROM Admin WHERE Username = '$_POST[Username]' // This finds the username

if ($row[Password] == md5($_POST[Password])) {
    Save Sessions here
} 
```

尽管我现在已将 mysql_real_escape_string 添加到 SQL 查询中，因为这可能是漏洞。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:28:56.110

```
SELECT * FROM Admin WHERE Username = '$_POST[Username]' 
```

如果这个 ^ 真的是你的实际选择语句，那就是 SQL 注入。再简单不过了。尽管您似乎对他们得到您的哈希并不太震惊，但我认为您的问题的根源是他们如何使用哈希进入您的网站。

这里有几个选项：

*   彩虹桌
*   在数据库中为自己创建一个新用户（sql注入，切记）
*   更改哈希（sql 注入）
*   简单的离线暴力破解或字典攻击
*   恶意代码重写（不太可能，因为您事后一直在仔细阅读代码）
*   可能涉及 XSS 或会话劫持的其他可能性（您是否清理输入数据？您是否保护您的会话？）

任你选。一旦黑客有了 SQL 注入这样的良好立足点，就会出现许多新的攻击媒介。

另外，我不得不怀疑——在上帝的绿地上，这个黑客在想把他们的不幸事件发布到 Facebook 上吗？这是朋友还是什么？如果是这样，也许你应该问他们他们是怎么做到的。如果不是……我真的需要这么说吗……你有你的男人/女孩——正义的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T05:58:20.923

这与您的实际密码无关。只有[SQL 注入漏洞](https://www.owasp.org/index.php/SQL_Injection)可以被利用来获得访问权限。我会告诉你怎么做。

假设您的*Admin*表只有两列，您只需要一个 UNION 来注入用户名和适合所提供密码的密码哈希：

```
$_POST['Username'] = "' UNION SELECT 'Admin','5ebe2294ecd0e0f08eab7690d2a6ee69"
$_POST['Password'] = "secret" 
```

此处提供的用户名的制作方式完全符合注入发生的上下文条件。这将是结果查询：

```
SELECT * FROM Admin WHERE Username = '' UNION SELECT 'Admin','5ebe2294ecd0e0f08eab7690d2a6ee69' 
```

结果集将是带有注入的 username`Admin`和 MD5 hash的单个记录`5ebe2294ecd0e0f08eab7690d2a6ee69`。

因此，请确保您受到 SQL 注入的保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T02:23:57.137

问题可能是您使用 md5 对密码进行了哈希处理，这很容易发生冲突和过时。如果他们有您的散列密码，他们可以找到一个产生相同散列的字符串，即使它不是您的实际密码。

使用更强大的哈希算法（如 SHA 和盐）来防止彩虹攻击。

# android - android套接字连接超时

> ID：13617781
> 
> 赞同：1
> 
> 时间：2012-11-29T02:15:30.020
> 
> 标签：android, sockets, client-server, connection-timeout

**背景**我正在尝试为我的 java 服务器创建一个 android 客户端应用程序并让它们使用 TCP 套接字进行通信。

**当我在 android 设备模拟器上运行我的应用程序时，它的工作原理**是什么****

 ****当我在手机上运行应用程序时**什么不起作用我在创建套接字时连接超时。****

 ****异常**java.net.ConnectException：无法连接到/10.0.2.2（端口9111）：连接失败：ETIMEDOUT（连接超时）

服务器和移动设备连接到同一个 wifi 网络，我关闭了笔记本电脑上的防火墙（我运行服务器的地方）

这可能是什么原因？，谢谢任何人的帮助

服务器

```
public class HelpMeServer {
public final static int port=9111;
public static void main(String[] args) throws IOException {

    Database db=new Database();
    ServerSocket serverSocket = null;
    try {
        serverSocket = new ServerSocket(port);
        System.out.println("Listening on port "+port);
    } catch (IOException e) {
        System.err.println("Could not listen on port: "+port);
        System.exit(1);
    }

   while(true)
   {
    Socket clientSocket = null;
    try {
        clientSocket = serverSocket.accept();
        ClientThread t=new ClientThread(clientSocket,db);
        t.start();
    } catch (IOException e) {
        System.err.println("Accept failed.");
        System.exit(1);
    }
   }
}
} 
```

主要活动

```
 public class LoginActivity extends Activity {

private EditText view_email;
private EditText view_password;
TextView result;
ConnectionHandler conhandler;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);
    view_email=(EditText) findViewById(R.id.email);
    view_password=(EditText) findViewById(R.id.password);
    result=(TextView) findViewById(R.id.result);
}
public void login(View view)
{    
    String email=view_email.getText().toString();
    String password=view_password.getText().toString();
    ConnectionHandler c=new ConnectionHandler();
    c.execute(new String[]{"login",email,password});
    try {
        String response=c.get();
        if(response.equals("login successful"))
        {
            Intent i=new Intent(this,MainActivity.class);
            startActivity(i);
        }
        result.setText(response);
    } catch (InterruptedException e) {
        result.setText("err");
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
        result.setText("err");
    }
}
} 
```

启动套接字的异步活动

```
public class ConnectionHandler extends AsyncTask<String, Void, String>{

public static final String serverip = "10.0.2.2";
public static final int serverport = 9111;
Socket s;
PrintWriter out;
BufferedReader in;
@Override
protected String doInBackground(String... lines)
{
Log.i("AsyncTank", "doInBackgoung: Creating Socket");
try {
    s = new Socket(serverip, serverport);
        Log.i("AsyncTank", "doInBackgoung: Created Socket");
    } catch (Exception e) {
    Log.i("AsyncTank", "doInBackgoung: Cannot create Socket "+e.toString());
    }
        if (s.isConnected()) {
        try {
        in = new BufferedReader(new InputStreamReader(s.getInputStream()));
        out = new PrintWriter(s.getOutputStream(), true);
        Log.i("AsyncTank", "doInBackgoung: Socket created, Streams assigned");
        } catch (IOException e) {
        // TODO Auto-generated catch block
     Log.i("AsyncTank", "doInBackgoung: Cannot assign Streams, Socket not connected");
                e.printStackTrace();
            }
        } else {
    Log.i("AsyncTank", "doInBackgoung: Cannot assign Streams, Socket is closed");
        }
        for (String line:lines)
        {
            writeToStream(line);
        }
        String result=readFromStream();
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:55:44.353

Instead of serverip = "10.0.2.2" try entering your PC IP address if the server is running on your PC.****

# file - _wfopen 可以将 UCS2-LE 编码文件读入宽字符字符串缓冲区吗？

> ID：13617786
> 
> 赞同：1
> 
> 时间：2012-11-29T02:15:50.977
> 
> 标签：file, unicode, encoding, byte-order-mark, crt

我想读取从 Windows 注册表导出的 .reg 文件。我发现 .reg 文件被编码为 Windows UNICODE 文件（我认为它是 UCS2-LE 编码的，因为前两个字节是 : `FFFE`）。

所以我读文件是这样的：

```
fp = _wfopen(lpszRegFilePath, _T("r, ccs=UNICODE"));
if ( NULL == fp)
{
    dwErr = ERROR_NOT_FOUND;
    break;
}
szData = new WCHAR[8192];
ZeroMemory(szData, 8192);

fgetws(szData, 8192, fp);
//........ 
```

结果`szData`如下： ![在此处输入图像描述](../Images/8a4168e29750829fe79430352ae552b4.png)

_wfopen 可以识别 BOM 吗？如果是这样，为什么它只是忽略`FFFE`BOM ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:36:11.797

该`"css"`参数允许`_wfopen()`检测 BOM 并进行标记`FILE*`，以便正确解码文件的其余部分（如果存在 BOM，它会覆盖该`"css"`值），但它不会丢弃 BOM，并且[文档](http://msdn.microsoft.com/en-us/library/yeby3zcb.aspx)中没有任何说明做。因此，您只需检查从文件中读取的前 2 个 WCHAR 以查看它们是否为 UTF-16LE BOM（UTF-8 BOM 将被解码为 UTF-16LE BOM）并在需要时忽略它们。

**更新**：我刚刚发生了一些事情。`fgetws()`将 BOM 的各个字节作为缓冲区中的各个 WCHAR 值返回。如果它尊重 BOM，则不应该这样做，这意味着它将文件解析为 Ansi/MBCS 而不是 UTF-16LE。你在使用 Visual C++ 吗？该`"css"`参数是 VC++ 特定的扩展`_wfopen()`。非 Microsoft 编译器供应商不支持它。

# asp.net-mvc - 使用 MVC 路由从 URL 中删除控制器和操作

> ID：13617788
> 
> 赞同：3
> 
> 时间：2012-11-29T02:16:01.767
> 
> 标签：asp.net-mvc

我知道以前有人问过这个问题，但我真的在为 MVC 中的路由配置概念苦苦挣扎——特别是从 URL 中删除控制器名称和/或操作名称。

在我的网页上，我有一个名为“Sidebar”的局部视图，它使用自己的控制器（SidebarController）。

在侧边栏的局部视图中，我有以下 ActionLink：

```
@Html.ActionLink("December-2012", "Archive", new { id = "December-2012" }) 
```

建立链接后，URL 读取为

```
http://localhost/Sidebar/Archive/December-2012 
```

我的问题是 URL 中出现了“侧边栏”部分——这个控制器在技术上不*用于*任何导航；它仅用于构建局部视图。相反，我希望 URL 读取：

```
http://localhost/Archive/December-2012 
```

我尝试在 ActionLink 上指定控制器，但这只会导致

```
http://localhost/Archive/Archive/December-2012 
```

有人可以解释一下（用简单的术语）我如何配置路由，以便当 /Archive 放在 URL 的末尾时，它知道使用（比如说）Index(id) 操作调用 ArchiveController？

在此先感谢您，并为提出之前已涵盖的问题而道歉-正如我所说，我真的在为路线图的整个概念而苦苦挣扎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:29:25.200

不完全确定你在这里做错了什么。也许还包括第二个网址的代码。

您可以使用Html.ActionLink 方法的[这种重载](http://msdn.microsoft.com/en-us/library/dd504972%28v=vs.108%29.aspx)：

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    Object routeValues,
    Object htmlAttributes
) 
```

你会像这样使用它：

```
@Html.ActionLink("December-2012(ThisIsLinkText)", "Index", "Archive", 
                 new { id = "December-2012"}, null); 
```

这将产生以下网址：

```
http://localhost/Archive/Index/December-2012 
```

**更新：**

根据您的评论，您需要在默认路线上方使用此路线：

```
routes.MapRoute(
    "ArchiveRoute", 
    "Archive/{id}", 
    new { controller = "Archive", action = "Index", id = UrlParameter.Optional } 
); 
```

并且相同的操作链接应该映射到这个 url：

```
@Html.ActionLink("December-2012(ThisIsLinkText)", "Index", "Archive", 
                 new { id = "December-2012"}, null); 
```

请记住，路线必须高于默认路线。

然后这个网址应该可以工作：

```
http://localhost/Archive/December-2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:34:04.280

**编辑**，尝试对索引执行空白操作：

```
@Html.ActionLink("December-2012", "", "Archive", new { id = "December-2012" }, null) 
```

> 有人可以解释一下（用简单的术语）我如何配置路由，以便当 /Archive 放在 URL 的末尾时，它知道使用（比如说）Index(id) 操作调用 ArchiveController？

默认路由应该这样做。这是默认路由：

```
routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            ); 
```

这里发生的情况是，当您在其中输入您的 url 时，`http://localhost/`它会运行该路由，并注意到没有指定控制器/操作，因此它会转到默认的“主页”，并运行默认的操作，即“索引”。

您可以在（或者如果您使用的是 mvc3）中的默认路由上方添加一个`Archive`路由（例如）：`RouteConfig``Global.asax`

```
routes.MapRoute(
                name: "ArchiveRoute",
                url: "archive/{id}",
                defaults: new { controller = "Archive", action = "Index", id = UrlParameter.Optional }
            ); 
```

每次您的网址开始时都会触发`http://localhost/archive`

希望这能让它更清楚。

# jquery - 有延迟的动画

> ID：13617792
> 
> 赞同：0
> 
> 时间：2012-11-29T02:16:27.490
> 
> 标签：jquery, animation, delay

我很难同时理解动画、延迟和文本有一个盒子，盒子里面写着“运动”，当点击它说的文本时

测试

不是在盒子里面，而是在盒子外面的某个地方。

单击后，我想要使用动画将框向左移动，完成动画后，将框内的文本从“运动”更改为“篮球”，然后将框向左移动。

我在这里编写了该代码，但使用延迟无法正常工作！

```
<div id="apDiv12"><h1 id="toptitle">sports</h1>​&lt;/div> 
```

* * *

```
$(document).ready(function(){
$("p").click(function() {
 $('#apDiv12').animate({left:"200px"},3000).delay(1000);
 $('#toptitle:contains("Profil")').text("basketball");

});

}); 
```

请帮忙谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:19:27.587

`.delay`仅适用于相同的动画队列。`text`更改不是同一队列的一部分。您可能希望使用该`.animate`方法的回调函数，如下所示：

```
.animate({left: "200px"}, 3000, function () { $("#toptitle" ... 
```

有关更多详细信息，请参阅[文档](http://api.jquery.com/animate/)。

你也可以使用`setTimeout`.

# ruby - 当没有对它们的引用时，对象会发生什么特别的事情吗？

> ID：13617795
> 
> 赞同：3
> 
> 时间：2012-11-29T02:16:40.870
> 
> 标签：ruby, variables, object, reference

当不再有变量指向对象时，对象会发生什么特别的事情吗？除了有资格进行垃圾收集之外，就是这样。

例如，目前，IO 对象[在被垃圾回收时会](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-close)自动关闭，如果它们还没有这样做的话。即使您想更改此行为，也没有任何方法可以更改它，以便在没有更多变量指向对象时发生自动关闭，是吗？

（我的问题是稍微简化一下：[WeakRef](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/weakref/rdoc/WeakRef.html)允许变量指向对象并让它们成为垃圾收集的目标。此外，对于 Ruby 的某些实现，可以通过以下方式访问没有任何变量指向它们的对象使用 ObjectSpace。关于 IO 对象，有这样的事情`IO.open(&block)`会在块执行后自动关闭 IO 对象。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:06:58.417

不，当不再引用对象时，不会执行任何挂钩或特殊方法。

你提到的具体案例是：

*   垃圾收集时自动关闭资源：这是通过*终结器实现的*

*   在块结束时自动关闭资源：这里没有魔法

    ```
    class IO
      def self.open(*args)
        yield file_handle = new(*args)
      ensure
        file_handle.close
      end
    end 
    ```

*   `WeakRef`: 这里有*魔法*:-) 在 YARV 中，`lib/weakref.rb`使用`::ObjectSpace::WeakMap`，它提供了弱引用语义。JRuby`WeakMap`使用 Java 的本机弱引用语义来实现。IOW：这实际上*不能*用 Ruby 表达，它必须由运行时系统提供。

# javascript - 阻止页面刷新以在页面上保留成功消息

> ID：13617797
> 
> 赞同：0
> 
> 时间：2012-11-29T02:16:49.097
> 
> 标签：javascript, asp.net

我有一个表单，在用户通过提交按钮发送消息后，会给出“成功发送”消息。

但是一秒钟后，带有表单的原始页面再次显示，因为提交使页面刷新。

代码是：

```
<label id="success" style="visibility:   hidden">Your request has been sent successfully</label>
<form method="post" id="messege" onsubmit="return checkAnswer()" style="font-size: medium; margin-top: 10%" dir="rtl">
<div class="clear"></div>
        <div class="content_item">

            <br><br>
          <div style="width:170px; float: right;">name</div>
          <div style="width:430px; float:left;"><p><input class="contact" type="text" id="your_name" value="" /></p></div>
            <br><br><br><br><br>
          <div style="width:170px; float:right;">email</div>
          <div style="width:430px; float:left;"><p><input class="contact" type="text" id="your_email" value="" /></p></div>
            <br><br><br>
          <div style="width:170px; float:right;">the messege</div>
          <div style="width:430px; float:left;"><p><textarea class="contact textarea" rows="8" cols="50" id="your_message"></textarea></p></div>
          <br style="clear:both;" />
</div>
</form> 
```

javascript函数是：

```
<script type="text/javascript">

    function checkAnswer() {
        var name = document.getElementById("your_name").value;
        if (name == "") {
            alert("!!! insert name");
            return false;
        }
        var email = document.getElementById("your_email").value;
        if (email == "") {
            alert("!!! insert mail");
            return false;
        }
        var message = document.getElementById("your_message").value;
        if (message == "") {
            alert("!!! insert massege");
            return false;
        }
        var ans = parseInt(document.getElementById("user_answer").value);
        if (ans != 12) {
            alert("!!! wrong answer");
            return false;
        }
        else {
            document.getElementById("success").style.visibility = 'visible';
            document.getElementById("messege").style.visibility = 'hidden';

            return true;
        }

    } 
```

而asp.net代码是：

```
@{
    var db = Database.Open("MyProjectSite");

    var name="";
    var email="";
    var message="";
    var answer="";

     if(IsPost)
    {
        name=Request.Form["your_name"];
        email=Request.Form["your_email"];
        message=Request.Form["your_message"];
       var insertMessege="INSERT INTO messegesFromCustomers(name,email,content,isCustomer)"+"VALUES (@0,@1,@2,@3)";
       db.Execute(insertMessege,name,email,message,"לא");
       db.Close();
    }

} 
```

当我使用javascript将成功消息的可见属性设置为：“可见”时，如何防止刷新页面？

刷新也删除了我的成功信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:52:00.590

如果您想提交这样的表单并且不刷新页面，我认为您需要使用 Ajax。页面提交表单的唯一方法是刷新，除非您以其他方式将数据发送到 ASP.net 代码……一种方法是使用 Ajax。（另一个是使用 iframe，但 Ajax 可能是更好的选择）。

看看这个链接：

[http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

它展示了如何在不使用 ajax（通过 jQuery）刷新页面的情况下提交表单。

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:55:51.983

在您的情况下，使用此功能的最简单方法是添加一个 url 标志以表示成功提交，然后在页面加载时检查它并显示确认消息，而不是在页面提交之前，因为状态是未保存（如您所见）

# jquery - jQuery在下拉选择中验证文本区域

> ID：13617798
> 
> 赞同：-1
> 
> 时间：2012-11-29T02:17:17.530
> 
> 标签：jquery, validation, drop-down-menu, textarea

我有一个包含下拉列表的表单。当在下拉列表中选择“其他”选项时，我会显示一些文本区域字段。在我的下拉列表中选择“其他”选项时，我想验证这些字段。如果我的下拉列表中的任何其他选项被选中，我不想验证那些 textarea 字段是否仍然隐藏。

这是我的jquery（不起作用）：

```
$("#form_182748").validate()({
element_19: "required",
element_99: {
required: function(element) {
return $("select#element_99").val() == 'Autre';
}
}
}); 
```

element_19 是我的文本区域，如果从 element_99 （下拉列表）中选择了选项 Other ，则要对其进行验证。当用户单击提交时，必须进行验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:22:24.703

这就是你所追求的吗？

```
$("#YourDropDownId").change(function()
{
   if($("#YourDropDownId").val() == "Other Option")
   {
       // Validate
   }  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:32:15.383

在您的验证中，您可以测试元素是否可见，如下所示：

```
if ($(element).is(":visible")) {
   //DO VALIDATION
} 
```

# gwt - GWT 历史记录支持 Internet Explorer 6、7、8 中的主机页面 hash-href

> ID：13617800
> 
> 赞同：0
> 
> 时间：2012-11-29T02:17:37.437
> 
> 标签：gwt, internet-explorer-8, internet-explorer-7, browser-history

我的理解是否正确，我不能`<a href="#Contact">Contact</a>`在我的 GWT 应用程序的主机页面中使用类似的东西，并让它与 IE 6 到 8 中的 GWT 历史管理正常工作？我在某处读到我必须让我的 GWT 应用程序遍历整个加载程序 html 页面并将所有 href 替换为 GWT 链接？

我在 IE7 中看到的是，当我单击其中一个 #-links 或 GWT History ValueChangeHandler 没有被调用时，浏览器会刷新整个页面，但 url 会静默更新。

我确实在主机页面中有 iframe，并且在我测试的所有其他浏览器中一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:40:44.160

不幸的是。

看看：[https ://code.google.com/p/google-web-toolkit/issues/detail?id=2152](https://code.google.com/p/google-web-toolkit/issues/detail?id=2152)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:54:35.990

您可以使用 JS Polyfill 来支持历史管理：

Modernizer 使用 Histroy.js： [https ://github.com/browserstate/history.js](https://github.com/browserstate/history.js)

有一个 GWT 的 Modernizer： [https ://github.com/jDramaix/gwtmodernizr](https://github.com/jDramaix/gwtmodernizr)

我不知道 History API 是否适用于 gwtmodernizer。你应该试试看。

# php - 买卖股票算法

> ID：13617801
> 
> 赞同：0
> 
> 时间：2012-11-29T02:17:40.993
> 
> 标签：php, algorithm

尽管我对任何其他编程语言都很好，但尝试用 PHP 给出想法/答案

有一个具有以下模式的数组；

```
$arr = array(
   0 => '12',
   1 => '38',
   2 => '25',
   3 => '4',
   ...
   365 => '45',
); 
```

它基本上是全年 365 天的一系列价值和股票价格。

`As far as I can remember the question;`

*   作为`$arr`您的输入，编写一个函数，这样您就可以在股票价格低的时候买入，在价格高的时候卖出。函数必须返回以下数组

    ```
    $return = array(
        'buy-date'  => '', // day you should've bought, so it price should be low
        'sell-date' => '', // day you should've sold, so its price should be high so you make profit
        'profit'    => ''  // value of profit
    ); 
    ```

*   重要的提示; 购买股票后的 30 天内不能卖出。

因此，诀窍是对于任何给定的时间段/月，您可能想在最低的日期买入，但由于您在 30 天后无法卖出，因此您购买的股票您可能想在最低的第 4 天买入，因此您仍然可以在下一个最畅销的日子。（希望我对此很清楚）

除了给我代码片段，给我想法，算法等，我想了解如何处理这样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T02:22:39.240

蛮力方法很容易编码。对于 0-335 的每一天，计算当日买入并在接下来的 1-30 天内卖出的利润。如果利润大于目前找到的最大利润，请记住它作为最大利润，以及买入和卖出日期。

# django - 使用中间模型防止 O(n) 查询

> ID：13617802
> 
> 赞同：5
> 
> 时间：2012-11-29T02:17:41.353
> 
> 标签：django, django-models

我有以下型号：

```
class Artist(models.Model):
    name = models.CharField()

    def primary_group(self):
        return self.memberships.select_related('group').get(is_primary=True)

class Group(models.Model):
    name = models.CharField()
    members = models.ManyToManyField(Artist, through='Membership')

class Membership(models.Model):
    artist = models.ForeignKey(Artist, related_name='memberships')
    group = models.ForeignKey(Group)
    is_primary = models.BooleanField() 
```

`Artist`并`Group`通过中间模型链接，`Membership`。艺术家只能有一个主要组，通过`is_primary`、已验证等标记。

在我列出艺术家的模板中，除了他们的主要组之外，我还列出了基本的艺术家信息，由上述方法调用。然而，这是一个 O(n) 操作，我有大约 160 位艺术家要这样做。django-debug-toolbar 提供的 SQL 如下：

```
SELECT ••• FROM "people_membership" 
           LEFT OUTER JOIN "people_group" ON ("people_membership"."group_id" = "people_group"."id") 
           WHERE ("people_membership"."artist_id" = xx AND "people_membership"."is_primary" = true ) 
```

让我补充一点，这发生在每个列出的艺术家身上，所以我得到了大约 160 个。

考虑到我调用模型方法，O(n) 是可以做到的最好的吗？或者我还能做些什么来改善这一点（没有去规范化`primary_group`）？这似乎是存储在我想从源或目标调用的中间模型中的任何类型的信息的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T02:21:39.380

您可以通过两个查询轻松地做到这一点，尽管有任何仇恨者会说，但这一点都不重要：

```
artists = list(Artist.objects.all())
primary_memberships = {m.artist_id: m for m in Group.objects.filter(is_primary=True, membership__artist__in=artists).extra(select={'artist_id': '%s.artist_id' % (Membership._meta.db_table,)})}
for artist in artists:
    artist.primary_membership = primary_memberships.get(artist.id) 
```

（额外的条款可能不正确，但你明白了）

除此之外，我会将主要功能更改为：

```
if hasattr(self, '_primary_membership_cache'):
    return self._primary_membership_cache 
```

然后，如果您附加信息，请将其绑定到该变量，然后使用相同的函数调用。

（对于各种连接/奇数查询，我们在 DISQUS 处处都遵循这种模式）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T02:40:04.170

我会像大卫克莱默所说的那样做，但不是额外的：

```
primary_memberships = {m.artist_id: m.group for m in Membership.objects.filter(group__isprimary=True, artist__in=artists).select_related('group')}
for artist in artists:
    artists.primary_membership = primary_memberships.get(artist.id) 
```

对于奖励积分，请将此方法作为会员经理的方法，以便您可以轻松地将其应用于任何艺术家列表！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T02:42:20.523

`membership`在( `artist_id`, )上放置一个两列索引`is_primary`怎么样？ [如果您已经升级到 1.5b1](https://code.djangoproject.com/ticket/5805)，您可以在您的模型中执行此操作，但如果您还没有在后端执行此操作，则没有什么能阻止您这样做。这应该将成员资格查找减少到恒定时间。如果您的数据库支持它，您可以将其[设为 partial index](http://en.wikipedia.org/wiki/Partial_index)，但只有 160 位艺术家，这似乎并不那么必要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T02:24:06.103

您是否尝试过从会员而不是艺术家开始查询？

```
class Artist(models.Model):
    ...
    def primary_group(self):
        return Membership.objects.filter(artist=self).get(is_primary=True).group 
```

# mysql - 我将如何限制表格行数？

> ID：13617804
> 
> 赞同：1
> 
> 时间：2012-11-29T02:17:57.423
> 
> 标签：mysql, sql, database, triggers

我有一个包含列的简单表格：

```
date - DATETIME
name - varchar(50)
text - varchar(200) 
```

如何在添加第 11 行之前获取包含要删除的最早日期值的行，因此行数始终为 10？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:46:58.433

使用触发器

`create TRIGGER trigger_name before insert on table_name FOR EACH ROW BEGIN if count > 10 then delete from table_name insert into table_name values(id, name , quantity); END if; END ;`

你也可以参考这个链接 [http://dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:21:52.513

使用删除查询创建删除后触发器：

```
 //get the row count
     IF rowCount > 10
       DELETE from myTable
       WHERE date = 
        (select date from 
          (select date from myTable
          order by date asc LIMIT 1) as tempTable
        )
      END IF; 
```

我建议这样做是因为删除查询中的相同表条件不起作用。[这](https://stackoverflow.com/questions/13609943/delete-records-from-a-table-where-max-number-for-a-field-and-keep-highest-numb/13610007#13610007)是我的另一个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T05:57:19.087

更新最旧的行而不是执行`insert`+ `delete`? 当然，您需要确保表中有 10 行。

# c# - 在 C# 中复制 T-SQL DecryptByPassPhrase

> ID：13617807
> 
> 赞同：9
> 
> 时间：2012-11-29T02:18:21.637
> 
> 标签：c#, sql, encryption, 3des

我想创建一个 C# 类来解密使用 T-SQL 的 EncryptByPassPhrase 加密的字节数组。（是的，我知道我可以在 SQL Server 中解密，但我需要的是能够在数据库层和中间层等价地加密/解密。）

我了解 SQL Server 的 EncryptByPassPhrase 和 DecryptByPassPhrase 使用 TripleDES 对称密钥算法。但是，我不清楚 IV 应该用什么来模拟 SQL Server 的密码学。[我可以使用TripleDESCryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.tripledes.aspx)类加密/解密，但我找不到密钥和 IV 的正确实现来复制 SQL Server 正在执行的操作。

有没有人做过类似的事情？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-08-02T18:26:37.913

github 上有一个公共 repo，它`EncryptByPassPhrase`在 C# 中重新创建，IV 取决于 SQL Server 的版本，因为实现发生了变化。您可以查看代码库的代码。[https://github.com/krcs/SQLServerCrypto](https://github.com/krcs/SQLServerCrypto)

# facebook - 我可以将我的 Facebook 应用程序与我的 Facebook 页面连接或合并吗？

> ID：13617808
> 
> 赞同：1
> 
> 时间：2012-11-29T02:18:38.700
> 
> 标签：facebook, facebook-apps, facebook-page

我创建了一个 Facebook 应用程序来连接我的网站，它允许用户注册 Facebook。

除此之外，我还创建了一个 Facebook 页面。

我可以将应用程序合并或连接到现有的 Facebook 页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:53:49.490

您可以将您的应用程序添加到您的页面，使其显示为应用程序“框”之一。您的应用需要配置为可以添加到页面。

但是，如果您想将您的应用程序与您的页面合并，您需要联系 Facebook 来执行此操作。不久前，他们将应用程序和页面合并为一个，并制定了一个流程。我记得，有一个按钮，但不再可用。Facebook 将合并所有喜欢、粉丝等。我必须使用 someecards 应用程序/页面来执行此操作。

# c++ - 冒泡排序数字

> ID：13617809
> 
> 赞同：1
> 
> 时间：2012-11-29T02:18:47.097
> 
> 标签：c++

我正在尝试创建一个对数字进行冒泡排序并不断出现分段错误的函数。有什么建议吗？

```
void bubblesort(struct Record *ptr, int records, int (*fcomp)(const void *, const void *))
{
    long c, d, i;    
    struct Record *sa, *sb, sc;

    for (c = 0 ; c < ( records - 1 ); c++)
    {
        for (d = 0 ; d < records - c - 1; d++)
        {
            for(i = 0; i < records - 1; i++)
            {
                if (fcomp(ptr+i, ptr+i+1) <= 0)
                {
                    /* Swapping */

                    sc  = sa[d];
                    sa[d]   = sb[d+1];
                    sb[d+1] = sc;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:23:39.570

访问`sa`, 时未定义的行为`sb`。

```
sc  = sa[d];
sa[d]   = sb[d+1];
sb[d+1] = sc; 
```

都是非法的，因为它们只是悬空指针。

```
struct Record *sa, *sb 
```

没有为`sa`and分配任何内存`sb`，即使你这样做了，我也看不出它是如何相关的。无论如何，它们都会包含虚假值。

# android - Android API CellInfo & CellInfoGsm

> ID：13617810
> 
> 赞同：0
> 
> 时间：2012-11-29T02:18:48.937
> 
> 标签：android

[关联](http://developer.android.com/reference/android/telephony/CellInfoGsm.html)

我想获取 CellInfoGsm 数据，但出现了一些错误。

CellInfoGsm 是 CellInfo 的子类。我不知道如何获取 CellInfoGsm 数据。

有人可以帮我编写正确的代码吗？

```
TelephonyManager TM = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);

(CellInfoGsm) cellinfogsm = (CellInfoGsm)TM.getAllCellInfo(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:31:09.810

您的代码中有几个错误。

*   `(CellInfoGsm) cellinfogsm`需要更改为，`CellInfoGsm cellinfogsm`因为您没有在那里投射任何东西。

*   `getAllCellInfo();`返回一个列表。您必须首先在该列表中选择一个元素并使用它。通过编写`CellInfoGsm cellinfogsm = (CellInfoGsm)TM.getAllCellInfo().get(0);`我使用 0 作为示例来做到这一点，您首先需要检查列表的大小，然后选择一个 CellInfo 对象。

# php - 如何获得前面有0的完整数字

> ID：13617812
> 
> 赞同：0
> 
> 时间：2012-11-29T02:19:00.653
> 
> 标签：php, javascript, jquery, sql, string-formatting

我有这样的号码：

`0065921922572`

我将此值作为参数传递给 JavaScript 中的函数。

当我提醒数据时，它会显示：

`65921922572` （去掉前面的00）

我试图将数字转换为字符串，但它仍然给我相同的值。

我应该怎么做才能得到正确的号码？

javascript中的函数：

```
//function that creates posts
var postHandler = function(postsJSON,ctr) {
    $.each(postsJSON,function(i,post) {
        ctr++;
        var id = 'post-' + post.code;
        //create the HTML
        $('<div></div>')
        .addClass('post')
        .attr('id',id)

        //generate the HTML
        .html(ctr +  ".&nbsp;&nbsp;&nbsp;<input type='checkbox' name='item" + ctr + 
                  "' id='item" + ctr + "' value='" + post.code +"' onClick='countElem("+ ctr +
                  ")'> <input type='hidden' name='tick"+ ctr +"' id='tick"+ ctr +"'>" + post.code + 
                  " -- " + post.description + "&nbsp;&nbsp;&nbsp;&nbsp;<input type='button' name='del_item' id='del_item'" +
                  " class='but' style='margin-right:100px;' value='x' onclick='delProduct("+ post.code +")'>")

        //inject into the container
        .appendTo($('#posts'))
        .hide()
        .slideDown(250,function() {
            if(i == 0) {
                $.scrollTo($('div#' + id));
            }
        });
    }); 
}; 
```

php中的函数：

```
function get_posts($start = 0, $number_of_posts = 300) {
    $posts = array();
    /* get the posts */
    $query = "SELECT distinct(code), description FROM sales_order, outstanding 
                WHERE sales_order.id = outstanding.so_id AND sales_order.outstanding =  'Y'
                AND outstanding.out_status = '' AND sales_order.status 
                NOT IN ('sta_deliver', 'otw_deliver',  'com_deliver', 'cancel') order by description asc LIMIT $start, $number_of_posts";
    $result = mysql_query($query);
    while($row = mysql_fetch_assoc($result)) {
        //preg_match("/(.*)/",$row['description'],$matches);
        //$row['description'] = strip_tags($matches[1]);
        if($row['code'] != '')
        {
            $strnum = (string)($row['code']);
            $row['code'] = $strnum;
        }
        $posts[] = $row;
    }
    /* return the posts in the JSON format */
    return json_encode($posts);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:33:27.350

由于您所讨论的代码不完整，因此很难说到底出了什么问题。很高兴看到从服务器接收请求的代码。女巫响应它实际上得到并且它是否将它传递给 postHandler 或改变它。

好像您强制“代码”将其给出答案，例如 [{"code":" 00122"}]

并在 [{"code":" 00122"}] 上使用 $.parseJSON 将 00122 作为字符串。

但是如果你想要快速批处理，你可以在代码前添加一个空格并用 javascript 修剪它。

在 PHP 中替换：

```
$strnum = (string)($row['code']); 
```

至

```
$strnum = " " . $row['code']; 
```

在javascript中，之后

```
$.each(postsJSON,function(i,post) { 
```

添加一行

```
post.code = $.trim(post.code); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:33:36.290

你检查过这个：[http](http://www.webtoolkit.info/javascript-pad.html) ://www.webtoolkit.info/javascript-pad.html 我认为处理填充字符串的最简单方法是创建一个填充函数，简单、清晰，不使用切片、数组等技巧上。您可能需要一个简单可靠的功能，而不是顶级的艺术。

问候， 拉杜·科索韦努

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T03:19:20.920

确保在您的 JSON 中，您的条形码值是字符串而不是数字。

当 JavaScript 将值作为数字获取时，它将认为 0 是不需要的，随后会自动删除它们。

作为一个字符串：`{ "barcode" : "0065921922572" }`

作为一个数字：`{ "barcode" : 0065921922572 }`

# java-me - J2ME Player 不播放从 ogg 转换的文件

> ID：13617816
> 
> 赞同：0
> 
> 时间：2012-11-29T02:19:47.420
> 
> 标签：java-me, mp3, oggvorbis, soundplayer

到目前为止，我尝试过的所有 mp3 文件都可以正常工作，但是，当我尝试从 Vorbis 格式转换的文件时，它就无法播放。

没有错误或任何东西，只是它没有发出任何声音。

尝试了多个转换应用程序。

有什么办法可以解决这个问题？

```
InputStream iStreamSound = getClass().getResourceAsStream("file.mp3"); 
Player p = Manager.createPlayer(iStreamSound, "audio/mp3");
p.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:09:55.760

Ogg 是一种容器格式。Vorbis 是一种用于存储在 ogg 容器中的数据的压缩机制/方案。但是，ogg 文件可以包含通过 Vorbis 以外的方式压缩的数据。因此，我将首先检查用于原始文件的方案，然后查看如何将其转换为您的 mp3。我发现许多 j2me 声音播放器相当挑剔，所以可能只是不支持底层数据结构。

我能想到的最彻底的转换方法是先将 .ogg 转换为 .wav 文件，然后尽可能将其转换为 .mp3。只需确保 wav->mp3 转换使用您的手机支持的压缩类型。

# javascript - `this` 是否可靠地等于在所有浏览器的内联事件处理程序中触发事件的元素？

> ID：13617817
> 
> 赞同：2
> 
> 时间：2012-11-29T02:19:55.417
> 
> 标签：javascript, events, event-handling, this, dom-events

在每个浏览器中点击后，以下内容会自动记录吗？

```
<a href="#" onclick="console.log(this);">Click me!</a> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T02:50:49.363

是的，对于内联 html 属性事件处理程序`this`是可靠的问题元素。

但是，您的示例 with`console.log(this)`不适用于每个浏览器，因为*并非*所有浏览器都有控制台，并且某些*带有*控制台的浏览器会给出错误，除非在`console.log()`语句执行时控制台实际上是打开的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:50:29.713

是的，是的。

这是 的标准行为`this`。它甚至适用于使用 javascript 分配的事件处理程序。

# json - JSON e 和 JSON E

> ID：13617818
> 
> 赞同：10
> 
> 时间：2012-11-29T02:20:09.667
> 
> 标签：json, scientific-notation

[在这里](http://www.json.org/)的 JSON 网站上，它解释了 JSON“对象”的不同可能性。但是，在数字部分，这些出现：

`e` | `e+` | `e-` | `E`| `E+`| `E-`

1 - 这些代表什么？

在寻找答案时，`<E>`出现了很多。

2 -`<E>`与上述有关`e`| `E`年代？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-29T02:25:36.413

这是 JSON（和大多数编程语言）用于科学记数法的符号。科学记数法用于表示非常大或非常小的浮点数。（`e`或等价`E`的）等价于“×10^”。例如，

`3.7e-5`= `3.7E-5`= 3.7×10 ^(-5) = 0.000037

可以使用正指数或负指数，在正指数的情况下，`+`可以省略符号：

`6.02e+23`= `6.02e23`= 6.02×10 ^(23) = 602 六分之一

[有关科学记数法的 Wikipedia 文章](http://en.wikipedia.org/wiki/Scientific_notation#E_notation)提供了更多详细信息。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2015-02-23T18:07:56.277

字母 e 看起来很像数学常数 e（2.71828 的东西），所以语言通常允许你使用 E 来代替。如 nandhp 所示，它与 e 做同样的事情。

# sql - 禁用 Rails 3.2.1 控制台 SQL 日志记录

> ID：13617824
> 
> 赞同：2
> 
> 时间：2012-11-29T02:20:36.800
> 
> 标签：sql, ruby-on-rails, logging, console, irb

我需要更新我的开发数据库中的一堆记录（200k），但是通过 rails 控制台运行查询导致我的计算机阻塞（部分原因是控制台打印出查询结果）。

例子：

```
1.9.3p194 :083 > Player.first
 => #<Player id: 1, IsActive: false, IsVisible: false, FirstName: "Ovie", LastName: "Soko", HeightFeet: 6, HeightInches: 8, Weight: 210, Birthday: nil, Gender: "M", HometownCity: "London", HometownState: "", HometownZip: "", HometownCountry: "", HighSchoolId: "", HighSchoolIdTemp: 0, HighSchoolGradYear: "2009", CollegeYear: "", Redshirted: false, Transferred: false, CollegeId: "{299F909C-88D9-4D26-8ADC-3EC1A66168BB}", CollegeIdTemp: 844, CollegeGradYear: "2013", OtherAccountId: 0, PreviousCollegeId: 0, CurrentTeamId: 0, LateralRecommendationReason: "", LateralRecommendationLink: "", CreationDate: "2011-02-16 20:53:34.877000000", CreatedBy: "", LastModifiedDate: "2011-02-16 20:53:34.877000000", LastModifiedBy: "", TwitterLink: "", FacebookLink: "", PersonalWebsite: "", PlayerImage: "", FirstNameNickName: "", NeulionID: 0, OtherTeamID: 0, OtherSportTypeID: 0, SourceDataTypeID: 1, PlayerTypeID: 2, LoadID: "", SameNameTeammate: "", SameNameSchoolMate: "", SD_SportID: 0, SD_PlayerID: 0, ZeroNCAAStats: "", ModifiedByPythonGame: "", Missing2011: "", Transfer2011: "", RecruitingClass: "\r", created_at: nil, updated_at: nil, high_school_id: nil, high_school_name: nil, not_valid: nil, city_to_zip_id: nil, user_id: nil> 
```

正如我们所见，打印 200k 条记录绝非易事。

我在这里尝试了解决方案：[Disable Rails SQL logging in console](https://stackoverflow.com/questions/7759321/disable-rails-3-1-sql-logging)，但之后我仍然得到日志输出。

```
1.9.3p194 :087 > old_logger = ActiveRecord::Base.logger
 => #<Logger:0x007feb04b8de58 @progname=nil, @level=1, @default_formatter=#<Logger::Formatter:0x007feb04b8dde0 @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x007feb04b8dc50 @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x007feb04b8dcf0 @shift_size=nil, @shift_age=nil, @filename=nil, @dev=#<IO:<STDERR>>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007feb04b8dcc8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007feb04b8dc78>>>> 
1.9.3p194 :088 > ActiveRecord::Base.logger = nil
 => nil 
1.9.3p194 :089 > Player.first
 => #<Player id: 1, IsActive: false, IsVisible: false, FirstName: "Ovie", LastName: "Soko", HeightFeet: 6, HeightInches: 8, Weight: 210, Birthday: nil, Gender: "M", HometownCity: "London", HometownState: "", HometownZip: "", HometownCountry: "", HighSchoolId: "", HighSchoolIdTemp: 0, HighSchoolGradYear: "2009", CollegeYear: "", Redshirted: false, Transferred: false, CollegeId: "{299F909C-88D9-4D26-8ADC-3EC1A66168BB}", CollegeIdTemp: 844, CollegeGradYear: "2013", OtherAccountId: 0, PreviousCollegeId: 0, CurrentTeamId: 0, LateralRecommendationReason: "", LateralRecommendationLink: "", CreationDate: "2011-02-16 20:53:34.877000000", CreatedBy: "", LastModifiedDate: "2011-02-16 20:53:34.877000000", LastModifiedBy: "", TwitterLink: "", FacebookLink: "", PersonalWebsite: "", PlayerImage: "", FirstNameNickName: "", NeulionID: 0, OtherTeamID: 0, OtherSportTypeID: 0, SourceDataTypeID: 1, PlayerTypeID: 2, LoadID: "", SameNameTeammate: "", SameNameSchoolMate: "", SD_SportID: 0, SD_PlayerID: 0, ZeroNCAAStats: "", ModifiedByPythonGame: "", Missing2011: "", Transfer2011: "", RecruitingClass: "\r", created_at: nil, updated_at: nil, high_school_id: nil, high_school_name: nil, not_valid: nil, city_to_zip_id: nil, user_id: nil> 
```

Rails 3.2.1 有新的 hack 还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:34:11.160

您不必让控制台打印最后一条语句的结果。这是一个人为的例子，但你可以让你的最后一条语句为零：

```
irb(main):156:0> Player.update_all(:IsActive => true); nil

SQL (1.8ms)  UPDATE "players" SET "IsActive" = 't'
=> nil 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:51:17.167

我不认为你做错了什么。是否`Player.all`也返回所有内容？我的猜测是您看到的输出可能是 Rails 主记录器而不是 ActiveRecord 记录器。

您可能可以将其中任何一个设置为 nil in `development.rb`。

**编辑：**

```
config.logger
config.active_record.logger
config.action_controller.logger
config.action_view.logger
config.action_mailer.logger
config.active_resource.logger 
```

# ios - 是否应该明确调用 willMoveToParentViewController:(UIViewController *)parent & didMoveToParentViewController:(UIViewController *)parent？

> ID：13617825
> 
> 赞同：8
> 
> 时间：2012-11-29T02:20:49.360
> 
> 标签：ios, uiview, uiviewcontroller, transition, wwdc

在*WWDC 2012 会议*中，标题为**iOS 上视图控制器的演变，** `- (void)willMoveToParentViewController:(UIViewController *)parent`并被`- (void)didMoveToParentViewController:(UIViewController *)parent`提及用于自定义容器实现中的视图转换。

如果我没记错的话，似乎需要在之前或之后**明确调用这些方法**`- (void)removeFromSuperview``- (void)addSubview:(UIView *)view`

但是，当我将它们记录在子类实现中时，它表明它们已被称为**IMPLICITLY**。他们已自动在正确的位置被调用。

所以，如果这些方法真的需要显式调用，就像 WWDC Session 中的指示一样，或者不遵循它并清除不必要的代码行，我有点困惑。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T02:44:33.557

在我的书中解释：

[http://www.aeth.com/iOSBook/ch19.html#_container_view_controllers](http://www.apeth.com/iOSBook/ch19.html#_container_view_controllers)

基本上，两者中的*一个*确实被隐式调用，但另一个您必须显式调用。真让人抓狂；每次我都要查规则。

# php - 无法将 Facebook Graph API 变量转移到另一个变量

> ID：13617826
> 
> 赞同：0
> 
> 时间：2012-11-29T02:21:06.633
> 
> 标签：php, facebook, facebook-graph-api

```
if ($session)
{
//fb query
    try
    {
        $me = $facebook->api('/me');
    }
    catch (FacebookApiException $e)
    {
        echo $e->getMessasge();
    }
}

if($me){
$logoutUrl = $facebook->getLogoutUrl();
echo "<a href='$logoutUrl'>Logout</a>";
}
else{
$loginUrl = $facebook->getLoginUrl($params);
echo "<a href='$loginUrl'>Login</a>";
}

echo $me['first_name'];

$me['first_name'] = $test;

echo $test; 
```

我正在尝试将 Facebook Graph API 变量设置为其他变量（尤其是会话变量）。我尝试了 Session 变量，但没有成功，所以我退后了一步。在这个例子中，它打印出来`$me['first_name']`但不是`$test`. 我在这里错过了一些简单的东西吗？我似乎无法将价值转移过来。最终，我想获取该值并将其输入到 MySQL 行中，但我无法让它在一个简单的变量上工作。

在这段代码之前，我已经正确设置了所有设置，因为它确实在 $test 上正确显示了变量，`$me['first_name']`但在 $test 上却没有。

感谢您的帮助，如果这是我忽略的超级基本问题，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:28:51.297

你在哪里设置 $test？

还是您的意思是`$test = $me['first_name'];`（即您的任务方向错误？）

# vb.net - 用于访问 MS Access DB 数据的 VB.NET 方法

> ID：13617829
> 
> 赞同：1
> 
> 时间：2012-11-29T02:21:37.643
> 
> 标签：vb.net, ms-access, dataset

作为 VB.NET 的新手，我通过使用向导和拖放表单构建了一个数据解决方案。我的数据在 Access DB 中，我用服务器资源管理器打开了这些表并将它们拖到我的数据集中。我将表连接到 datagridviews。像魅力一样工作。

然后我发现项目需要能够动态创建表。“没问题”我想。我只想了解如何在 VB.NET 中动态创建一个表以放入 Access。再次，像魅力一样工作。

然后我意识到我通过使用项目的数据集查询数据的方法不适用于这些动态创建的表，因为一旦用户关闭程序，这些表就不再是我的数据集的一部分。是的，它们仍然驻留在 Access 数据库中，但我不直接查询 Access，而是使用我的数据集。

我是否在逻辑上正确地解决了这个问题？我应该（或者甚至有办法）废弃固定数据集并在启动时动态加载所有 Access 表吗？或者有没有办法完全废弃数据集并直接与 Access 通信？如果可能，我更喜欢第一个选项，因为这是一个广泛的项目，我不想进行重大重写。

# python - 有什么办法 django 不保存表单上传的文件

> ID：13617833
> 
> 赞同：1
> 
> 时间：2012-11-29T02:22:11.427
> 
> 标签：python, django

我有用户附加文件的 django 表单，但我正在从文件本身中提取 pdf 表单数据，所以我不想保存文件。

但是当我保存表单时，文件会自动保存。有什么办法可以防止文件被保存？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T02:37:28.923

当一个文件被上传到你的服务器时，django 会根据`FILE_UPLOAD_HANDLER`你指定的处理上传的文件。默认情况下，它们是：-

```
("django.core.files.uploadhandler.MemoryFileUploadHandler",
 "django.core.files.uploadhandler.TemporaryFileUploadHandler",) 
```

这意味着文件对象在您的服务器内存中，直到`form.save()`（该`form`对象包含您上传的文件的位置）被调用。一旦被调用，文件对象就会根据您在该文件字段的`upload_to`属性中指定的内容写入文件系统。

为了防止这个上传的文件被写入你的文件系统，我会做的是将此文件对象分配给一个变量而不调用`form.save()`. 像这样：-

```
uploaded_file = request.FILES['file'] 
```

我们可以故意不分配`request.FILES`，像这样：-

```
form = MyModelFormWithFileField(request.POST, None) 
```

由于您`uploaded_file`分配了变量，因此您现在可以做任何您想做的事情，而无需将其写入文件系统。

并且由于您的`form`实例没有`request.FILES`分配，`form.save()`因此不会将您的表单数据写入文件系统。

# php - 区分变量等于 0 和变量等于空数组['column']

> ID：13617839
> 
> 赞同：1
> 
> 时间：2012-11-29T02:22:33.190
> 
> 标签：php, mysql, arrays

我将投票存储在数据库中，其值范围为 0 到 10。我遇到的问题是，当满足查询条件的投票为 0 时，它会触发 else 语句。如果我将 if 语句更改为...

```
if ($vote >= 0) 
```

...那么即使没有任何内容符合查询条件，if 语句也始终为真。我怎样才能区分这两者？谢谢。

```
$data = array($page_id, $user_id, 'yes');
$STH3 = $DBH->prepare("SELECT vote from votes WHERE page_id = ? and user_id = ? and current = ?");
$STH3->execute($data);
$STH3->setFetchMode(PDO::FETCH_ASSOC);
$row = $STH3->fetch();
$vote = $row['vote'];

if ($vote) {
// some code
} 

else {
// some code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:29:36.640

在松散的比较中，`NULL`将等于零。因此，如果没有任何内容符合您的条件`$row['vote']`且未填充，并且您将其不存在的值分配给`$vote`，则变为`NULL`. 您应该在设置`$vote`为空值之前对其进行测试，以避免`undefined index`通知。然后检查条件中的整`$vote`数值`if()`。

```
// $vote is NULL if $row is not populated
$vote = isset($row['vote']) ? $row['vote'] : NULL;

// Check that $vote is an int value as opposed to NULL
if (is_int($vote) && $vote >= 0) {
  // Code executed when $vote is an integer value
} 
else {
  // Other code to execute if $row was empty 
} 
```

您还可以检查是否`$row`是一个数组，这意味着您的`fetch()`调用产生了一行：

```
if (is_array($row)) {
  // Code using $vote
}
else {
  // No row was returned 
} 
```

# bash - 如果条件，Bash 中的“一元运算符预期”错误

> ID：13617843
> 
> 赞同：304
> 
> 时间：2012-11-29T02:22:47.243
> 
> 标签：bash, shell

此脚本出现错误：

```
elif [ $operation = "man" ]; then
    if [ $aug1 = "add" ]; then         # <- Line 75
    echo "Man Page for: add"
    echo ""
    echo "Syntax: add [number 1] [number 2]"
    echo ""
    echo "Description:"
    echo "Add two different numbers together."
    echo ""
    echo "Info:"
    echo "Added in v1.0"
    echo ""
elif [ -z $aug1 ]; then
    echo "Please specify a command to read the man page."
else
    echo "There is no manual page for that command."
fi 
```

我收到此错误：

```
calc_1.2: line 75: [: =: unary operator expected 
```

* * *

## 回答 #1

> 赞同：660
> 
> 时间：2012-11-29T03:31:22.493

如果你知道你总是要使用 Bash，那么总是使用双括号条件复合命令要容易得多`[[ ... ]]`，而不是与 POSIX 兼容的单括号版本`[ ... ]`。在`[[ ... ]]`复合词中，单词拆分和路径名扩展不适用于单词，因此您可以依赖

```
if [[ $aug1 == "and" ]]; 
```

将 的值`$aug1`与字符串进行比较`and`。

如果你使用`[ ... ]`，你总是需要记住像这样对变量加双引号：

```
if [ "$aug1" = "and" ]; 
```

如果不引用变量展开且变量未定义或为空，则从犯罪现场消失，只留下

```
if [ = "and" ]; 
```

这不是有效的语法。`$aug1`（如果包含空格或 shell 元字符，它也会失败并显示不同的错误消息。）

现代`[[`运算符还有许多其他不错的功能，包括正则表达式匹配。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2017-09-21T20:43:40.823

我花了一段时间才找到这个，但请注意，如果你有间距错误，你也会得到同样的错误：

```
[: =: unary operator expected 
```

正确的：

```
if [ "$APP_ENV" = "staging" ] 
```

对比

```
if ["$APP_ENV" = "staging" ] 
```

与往常一样，设置`-x`调试变量有助于找到这些：

```
set -x 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-25T12:27:22.370

在语句`$aug1`中使用之前尝试分配一个值；`if[]`错误消息将在之后消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-14T13:34:11.510

读取可能为**空白的****数字**输入（接受**默认选项**）也可能发生此错误。

 ****解决方案是用多个条件构造`if`语句并首先测试一个空变量。

例如：

```
# sanitise input
var=$(echo $ans | tr -cd "[:digit:]")

if [ -z "$var" ] || [ "$var" -lt 1 ]; then
   do_something
fi 
```

[我必须在Arch Sign Modules](https://github.com/itoffshore/Arch-SKM/blob/4c2de490b3870f11bb2097095fe77a3b1e40bd76/scripts/abk#L229)的帮助脚本中解决这个`unary operator expected`问题。`remove_old_pkgs()``abk`

另见*[6.4 Bash 条件表达式](http://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Bash-Conditional-Expressions)*

* * *

## 回答 #5

> 赞同：-13
> 
> 时间：2014-05-01T08:11:33.913

也可以给变量设置一个默认值，这样就不需要用两个“[”，相当于两个进程（“[”实际上是一个程序）而不是一个。

它采用以下语法：${VARIABLE:-default}。

整个事情必须以这样一种方式来考虑，即这个“默认”值与“有效”值/内容不同。

如果由于某种原因这不可能，您可能需要添加一个步骤，例如检查是否有值，沿着 "if [ -z $VARIABLE ] ; 然后回显 "需要填充变量"" 或 " if [ ! -z $VARIABLE ] ; 那么 #everything 没问题，继续脚本的其余部分”。****

# jquery - jquery 事件函数到使用 .append() 添加的元素

> ID：13617845
> 
> 赞同：3
> 
> 时间：2012-11-29T02:23:15.680
> 
> 标签：jquery, append

我有一个函数可以将一些 html 代码附加到我已经存在的 div 中，如下所示：

```
<div id="my_ok_div">
<span>click me</span>
<div class="okay">ok</div>
</div> 
```

jQuery添加div：

```
$('#my_ok_div').click(function(){
$('#my_ok_div').append('<div class="okay">bla</div><div class="okay">bla bla</div>');  
}); 
```

我也有一个可以与 div 类一起使用的函数

```
$('.okay').click(function(){
  alert('all okay!'); 
}) 
```

这对于已经存在的 div 非常有效，其中包含“ok”字样的 OK 类。但是，这不适用于附加的 div。为什么以及如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T02:24:24.077

您可以在调用时绑定（或重新绑定）事件`.append`，也可以使用事件委托：

```
$("#my_ok_div").on('click', '.okay', function () {
   alert('all okay!');
}); 
```

# javascript - JSON stringify 省略 'String'

> ID：13617847
> 
> 赞同：1
> 
> 时间：2012-11-29T02:23:27.647
> 
> 标签：javascript, json

我有这个 json 对象：

```
values: {
    username: { type: String, unique: true },
    password: { type: String }
} 
```

跑步时`JSON.stringify(values)`我得到：

```
{"username":{"unique":true},"password":{}} 
```

它省略了`type: String`.

任何解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T02:26:32.187

尝试包括引号：

```
values: {
  username: { type: "String", unique: true },
  password: { type: "String" }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T02:33:48.053

[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)忽略不是有效 JSON 的值，包括`undefined`和`Function`。

如果你真的*想要*，你可以使用`replacer`参数（虽然不确定这将如何跨浏览器）并解决这个问题。这个函数基本上会检查值是否是一个函数，它会返回函数名。在您的示例中，它将 return `"String"`，因为 String 是一个全局构造函数。

```
JSON.stringify(your_object, function (key, value) {
    if (typeof value === "function") {
        return value.name; // or value.toString() for the function body/declaration
    }

    return value;
}); 
```

虽然，要清楚，你最好使用字符串作为你的类型，（`"String"`而不是`String`）没有箍跳过去。

# pointers - 托管 C 指针在完成其瞬间时不会释放

> ID：13617855
> 
> 赞同：1
> 
> 时间：2012-11-29T02:24:07.373
> 
> 标签：pointers, c++-cli, managed

我有一个问题，即从托管 C 生成数据并在 C# 中用于 UI。

这是示例：

托管方：

```
public ref class c1
{
public:
    c1(void);
    ~c1(void);
    String ^Name;
    double dtata;
};

public ref class c2
{
public:
    c2(void);
    ~c2(void);
    !c2();
    String ^Name;
    List<c1^> ^arrData;

    void CreateData();
    void Clear();

};

void c2::CreateData()
{
    arrData=gcnew List<c1^>();
    for(int i=0;i<1000000;i++)
    {
        c1^ d=gcnew c1;
        arrData->Add(d);
    }
}
void c2::Clear()
{
    if(arrData)
    {
        delete arrData;
        arrData=nullptr;
    }
    GC::Collect();
} 
```

C# 方面：

```
void Test()
{
using (c2 cx = new c2())
       {
         cx.CreateData();
         cx.Clear();
         cx.Dispose();

        }
} 
```

结果是调用 Test() 函数后内存从 4MB 上升到 13MB

问题是为什么 cx 不从内存中释放？

谢谢看

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:35:42.873

对于 C++/CLI，引用类型中的析构函数对资源执行确定性清理。终结器清理非托管资源，可以由析构函数确定性地调用，也可以由垃圾收集器非确定性地调用。请参考[这个](http://msdn.microsoft.com/en-us/library/ms177197%28v=vs.110%29.aspx)。

所以你需要实现终结器来释放内存。

# css - 如何确保一个网站填满整个视口？（台式机、手机、ipad 等）

> ID：13617858
> 
> 赞同：1
> 
> 时间：2012-11-29T02:24:27.450
> 
> 标签：css, metadata, responsive-design, media-queries, viewport

我们目前有一个不灵活/不灵活的网站（因为它不会根据视口大小改变其布局）。

当它显示在桌面上时，它会填满整个屏幕（并且居中对齐）。但是，当我们在 iPhone 或 iPad 等其他屏幕尺寸上查看它时，就会出现问题。网站布局看起来不错，只是它没有填满整个屏幕或以某种方式在侧面被切断。

我尝试使用`<meta name="viewport" content="width=[value]">`，但它一次仅适用于一台设备（iPhone 或 iPad，但不能同时适用于两者）。

是否有一个代码可以缩放网站以适应正在使用的任何视口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-19T22:21:53.630

嗅探器功能与此元标记结合使用效果很好： `<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T05:21:04.160

当谈到响应式设计时，有许多创造性的方法可以解决手头的问题。

您可以尝试使用百分比来使您的设计更具响应性。使用百分比是最大化用户视口的安全选择。

例如。

```
html, body { 
height: 100%; 
width: 100%; 
margin: 0; 
} 
```

从那里您可以使用您的站点容器并进行更具体的操作。

此外，HTML head 部分中的一些 JavaScript 可以帮助您检测屏幕尺寸并相应地调整不同的 CSS 规则：

```
<!-- hide script from old browsers
//<![CDATA[

var windowWidth=screen.availWidth;
var windowHeight=screen.availHeight

function sniffer() {
var el=document.getElementById("body"); 
if(screen.width<=600) {
               el.style.width='100%';
               el.style.height= windowHeight;
               el.style.margin="auto";               
 } 
}
onload=sniffer;
//]]>
// end hiding script from old browsers --> 
```

上面的 JavaScript 正在检查用户的屏幕是否小于或等于 600px；如果是这样，它会调整 body 元素的宽度、高度、边距规则。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T23:51:28.807

您是否尝试将初始比例设置为 1

# c++ - 迭代两个向量迭代器比 boost_foreach 更快

> ID：13617860
> 
> 赞同：1
> 
> 时间：2012-11-29T02:24:45.987
> 
> 标签：c++, boost, iterator

由于某种原因，迭代器在迭代两个向量时的执行速度比 BOOST FOREACH 快得多……我正在使用启用了优化的 Visual Studio 2012。下面是我比较的两段代码......我错过了什么吗？

```
typedef boost::tuple<int&, int&> int_ref_tuple;
BOOST_FOREACH(int_ref_tuple tup, boost::combine(v1, v2))
tup.get<0>() = tup.get<1>(); 
```

对比

```
vector<int>::iterator iIter = v1.begin();
vector<int>::const_iterator jIter = v2.begin();
for (;iIter != v1.end();++iIter, ++jIter)
{
         //this is faster
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:28:46.537

尝试 ：

```
BOOST_FOREACH(int_ref_tuple &tup, boost::combine(v1, v2)) 
```

# linux - 我可以强制 node.js 要求区分大小写吗？

> ID：13617863
> 
> 赞同：29
> 
> 时间：2012-11-29T02:25:29.727
> 
> 标签：linux, node.js, file-io, osx-lion

由于我的 Mac 具有不区分大小写的文件系统，因此在本地运行测试时不会捕获与大小写相关的拼写错误，但是它们在运行 Linux 的构建服务器上会失败。

例如：在 Lion 上运行时`require('./mymodule')`会找到`./myModule.js`，但在 Linux 上不会。

由于我想让测试在本地也失败，以免破坏服务器上的构建，所以我正在寻找一种方法使 node.js 要求更严格，因为如果文件名是，它会引发错误不准确（即大小写不同）。

有谁知道实现这一目标的方法？

**编辑**：

由于这个问题似乎没有很好的解决方案，我创建了[valiquire](https://github.com/thlorenz/valiquire)。

该工具验证整个 nodejs 项目中的所有要求，同时确保大小写正确。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-10-23T13:11:07.543

如果您使用 webpack，请查看[https://github.com/Urthen/case-sensitive-paths-webpack-plugin](https://github.com/Urthen/case-sensitive-paths-webpack-plugin)

刚刚为我们的开发版本安装了它。本来可以让我们免于多次取消刺激......如果你在这个问题上，这可能已经发生了

## 安装

```
npm install --save-dev case-sensitive-paths-webpack-plugin 
```

## 用法

```
const CaseSensitivePathsPlugin = require('case-sensitive-paths-webpack-plugin');

const webpackConfig = {
    plugins: [
        new CaseSensitivePathsPlugin(),
        // other plugins ...
    ],
    // other webpack config ...
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-09T15:33:28.330

由于您的 hfs 文件系统不区分大小写，“fileName”的查找将在 OS lib 级别匹配“filename”，因此 node.js 的行为将相同。因此，根据定义，没有解决方法。

但是以重新格式化为代价，您可以更改 fs 格式以使用 hfs 区分大小写。

[此线程](https://superuser.com/questions/380330/mac-convert-from-case-sensitive-to-case-insensitive-file-system)中提到了[http://www.coriolis-systems.com/iPartition.php：https://superuser.com/questions/380330/mac-convert-from-case-sensitive-to-case-insensitive-file](http://www.coriolis-systems.com/iPartition.php) [-系统](https://superuser.com/questions/380330/mac-convert-from-case-sensitive-to-case-insensitive-file-system)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-10-30T01:36:16.583

This is an old question but it was the first google result I came across. For anyone else who stumbles across this, the 2021 answer is to use ESLint package [eslint-plugin-import](https://www.npmjs.com/package/eslint-plugin-import) "no-unresolved" rule - [https://github.com/import-js/eslint-plugin-import/blob/main/docs/rules/no-unresolved.md#casesensitive](https://github.com/import-js/eslint-plugin-import/blob/main/docs/rules/no-unresolved.md#casesensitive)

By default, it will show a warning/error if a require path case does not match exactly. When the require path has a difference in case, you will see this:

```
/Users/<your user>/projects/my-app/api/v1/createApplication.js:
    Line 7: import/no-unresolved - Casing of ../../../repositories/Application does not match the underlying filesystem. 
```

To get this working:

```
npm install --save-dev eslint-plugin-import 
```

And add to .eslintrc(.js or .json):

```
 "extends": [
        ...
        "plugin:import/recommended",
        ...
    ],
    ...
    "rules": {
        "import/no-unresolved": [2, {commonjs: true, amd: true}],
        ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-25T00:02:18.093

万无一失的答案是将您的 MacOS 文件系统重新格式化为区分大小写，但这当然非常不方便。相反，看看这个对相关问题的回答，它描述了在 MacOS 上针对这个问题的一个非常优雅的解决方案，即创建一个虚拟区分大小写的分区，并执行所有开发工作： [How do I commit case-sensitive only Git中的文件名更改？](https://stackoverflow.com/questions/17683458/how-do-i-commit-case-sensitive-only-filename-changes-in-git#49133889)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-24T19:29:14.527

在不更改操作系统文件分区的情况下，您可以使用自动检测这些更改的捆绑程序，我个人使用 webpack 2。当文件被解析但大小写不同时，它会发出警告。它不会阻止在 OSX / Windows 上编译，但你会有提示。另外，拥有一个捆绑器是当今 js 开发中的一项重要资产

hacky且不推荐的方法是填充要求并强制某个案例或尝试大多数可能的案例，但这可能会非常难看并且会产生较差的性能，而不会提及如果有案例加载错误文件的潜在危险 -重命名文件并且旧文件未清理

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2012-11-29T03:41:12.517

总是使用小写的文件名，那么你就不必担心文件系统是否支持它。

让我想起人们过去在 url 中使用空格的时候。

# git - 无法推送新的空白 git 分支

> ID：13617867
> 
> 赞同：0
> 
> 时间：2012-11-29T02:25:41.343
> 
> 标签：git, branch

我试图在 git 中创建一个新的空白分支......我尝试了这里的说明：

[http://www.bitflop.com/document/116](http://www.bitflop.com/document/116) 和这里：

[http://schacon.github.com/gitbook/5_creating_new_empty_branches.html](http://schacon.github.com/gitbook/5_creating_new_empty_branches.html)

他们似乎给出了相同的结果，似乎创建了一个新分支，但推动空白分支失败。（它总是打印出类似的东西`!rejected TEST->TEST non fastforward`）。

此外，Windows 会弹出一个对话框，说 Git 崩溃了。我是从 1.7.11 升级的？从 git 站点到最新的 1.8，结果相同。

我也觉得奇怪的是`git branch`没有显示新的分支名称。这是 git 中的一个已知错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:25:29.630

这里有几件事要检查：

首先，Git 服务器会阻塞所有推送的非快进分支。这是为了防止数据丢失。要强制它，您必须`--force`在 command 中添加标志`git push origin TEST --force`。**小心：这将删除包含在 origin/TEST 中的所有唯一提交**，最终它们会丢失（如果我没记错的话，在 6 个月内）。在您的情况下，似乎该分支`TEST`已经存在于服务器上；是这样吗？你知道为什么吗？（因为如果分支包含的内容有价值，您可能不想覆盖它）

此外，由于您一直在通过基本上删除历史记录来创建新分支，因此您应该确保在您的分支中至少有一个初始提交。用于`git log`检查这一点。

# java - 一定时间后开卡

> ID：13617871
> 
> 赞同：0
> 
> 时间：2012-11-29T02:26:29.270
> 
> 标签：java, swing, concurrency, event-dispatch-thread

我正在为一个大学项目编写二十一点（单线程），而庄家是计算机（例如，没有玩家动作）......

有人知道我如何用 Java 编写这样的程序：

```
while (dealerpoints < 17)
    open card and repaint frame
    wait 1 sec (to run again the condition test for while) 
```

问题是，我不希望一次绘制所有的庄家牌...

提前致谢， 加布里埃尔·索特罗

更新：这是我的代码（不起作用）

```
 while (Dealer.getInstance().dealerPoints < 17){

            Dealer.getInstance().openCard();
            try {
                Thread.sleep(100);
            }
            catch (InterruptedException e){ }
        } 
```

开卡声明：

```
 private void openCard(){

        Card temp;

        temp = Deck.getInstance().myPop();
        Dealer.getInstance().cards.add(temp);
        Dealer.getInstance().dealerPoints += temp.getValue(); 
        MainPanel.getInstance().updateDealerLabel(Dealer.getInstance().dealerPoints);
        MainPanel.getInstance().repaint();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:01:38.673

您不能阻止事件调度线程，因为它负责（除其他外）处理重新绘制请求。因此，您一直在等待，UI 并没有开始更新。这包括使用循环和`Thread#sleep`.

一种解决方案是使用[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)，但是，它在何时将更新回调到 UI 方面是不可靠的。

另一种解决方案是使用 a ，它将每*n 个*[`javax.swing.Timer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)周期触发一次回调，并在事件调度线程中执行......

 *就像是...

```
Timer dealerTimer= new Timer(1000, new ActionListener() {
    public void actionListener(ActionEvent evt) {
        if (Dealer.getInstance().dealerPoints < 17) {
            Dealer.getInstance().openCard();
        } else {
            ((Timer)evt.getSource()).stop();
        }
    }
});
dealerTimer.setRepeats(true);
dealerTimer.start(); 
```

我会做的是声明`dealerTimer`为一个类字段。需要时，我会简单地打电话`dealerTimer.restart()`让计时器重新启动。您可能还想检查`dealerTimer.isRunning()`以确保计时器尚未运行；）

您可能想阅读[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:42:31.320

您可以使用：[http](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep(long) ://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep(long )。把它放在一个 try-except 块中。

```
// To wait 1 second:
try {
    Thread.sleep(1000);
} catch (Exception e) {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T02:42:51.897

睡一会儿

```
try {
    Thread.sleep(1000);
}catch (InterruptedException e){
   LOG.warning("unexpected interruption while sleeping");
} 
```*

# javascript - 加载 jquery 后，我无法在 div 内居中图像

> ID：13617873
> 
> 赞同：0
> 
> 时间：2012-11-29T02:26:42.823
> 
> 标签：javascript, jquery, css

我正在使用 jquery 动态加载图像，并且似乎无法将它们放在 div 中。我的 HTML 如下所示：

```
<div style="width:100%;border: solid 1px #ff0000;">
    <img id="current_photo" src="" style="margin-right: auto; margin-left: auto;max-width:97%;"/>
</div> 
```

jQuery 调用如下所示：

```
 $("#current_photo").attr('src', img_url);
    //$('#current_photo').css({'margin-right':'auto','margin-left':'auto'}); 
```

我假设我需要在图像加载后应用 CSS，但这似乎也不起作用。

无论我尝试什么，图像总是合理的。知道会发生什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T02:30:23.320

Add "text-align:center;" to your containing div. Also no need for the auto margins.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:46:53.877

容器中的 text-align 属性将解决问题：

```
<div style="text-align:center; width:100%;border: solid 1px #ff0000;">
    <img id="current_photo" src="" style="margin-right: auto; margin-left: auto;  max-width:97%;"/>
</div> 
```

演示：

[http://jsfiddle.net/Zsq8Q/4/](http://jsfiddle.net/Zsq8Q/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T02:31:30.243

If you want to do it in js, give this function a try after you load your img.

```
setToCenterOfParent($("#current_photo"), $("#current_photo").parent());

function setToCenterOfParent( obj, parentObj ) {
    var height = $( obj ).height();
    var width = $( obj ).width();
    if ( parentObj == window ) {
        $( obj ).css( 'top', ( $( parentObj ).height() / 2 ) - ( height / 2 ) );
        $( obj ).css( 'left', ( $( parentObj ).width() / 2 ) - ( width / 2 ) );
    }
    else {
        $( obj ).css( 'top', ( $( parentObj ).height() / 2 ) - ( height / 2 ) + $( parentObj ).position().top );
        $( obj ).css( 'left', ( $( parentObj ).width() / 2 ) - ( width / 2 ) + $( parentObj ).position().left );
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T02:41:31.467

您可以通过将此样式添加到您的`img`：

```
display: block; 
```

演示：http: [//jsfiddle.net/Zsq8Q/3/](http://jsfiddle.net/Zsq8Q/3/)

您动态设置的事实`src`不是这里的问题，默认情况下元素不是块元素，因此除非您*将*`img`其设置为块，否则边距设置不起作用。

# mysql - sync_binlog=0 影响性能，但 sync_binlog=1 效果很好

> ID：13617877
> 
> 赞同：0
> 
> 时间：2012-11-29T02:26:56.353
> 
> 标签：mysql

现在我在一个 MySQL 实例中发现了一些奇怪的东西。

backgroup 我们使用 SSD 存储 datafile ，但是 binlog 文件存储在 SAS 磁盘中 sync_binlog=0 TPS 4000 insert+update per second max_binlog_size 500M

当 MySQL 创建新的 binlog 文件时，我们发现一些事务提交语句会写入 slow.log

当我设置 sync_binlog 0->2000->1000->200->100 时。最后，当 sync_binlog=0 时，commit 语句在 slow.log 中消失。

希望对你有所帮助。我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T06:47:00.710

解决方案很简单。当您使用 sync_binlog=1 时，发生的事情就像日志也被写入磁盘而不使用文件系统支持。但只有提交的事务进入日志。但是现在您出现了`sync_binlog=0`，这意味着您不想在磁盘上保留已提交事务的记录，这意味着您依赖于操作系统的文件系统。因此，如果您的自动提交关闭，那么您只会在日志中获取已提交的事务，否则所有事务（无论它们是否已提交）都将进入日志。

因此，您可能正在使用带有自动提交“on”的mysql，并且所有事务都进入日志，而您只会进入缓慢且未提交的事务。

希望这会有所帮助

# android - 广播“com.android.vending.INSTALL_REFERRER”什么时候发送？

> ID：13617879
> 
> 赞同：4
> 
> 时间：2012-11-29T02:27:16.123
> 
> 标签：android, google-play

这是我的问题我的目标是跟踪来自 google play 的应用安装。我在我的应用程序中编写了一个 BroadcastReceiver。因此，当应用程序从 goole play 下载时，将根据 google 页面播放“com.android.vending.INSTALL_REFERRER”： [https ://developers.google.com/analytics/devguides/collection/android/v2 /活动](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns)

但我的问题是，如果在安装我的应用程序时发生这种情况，那么我如何启动应用程序附带的广播接收器来接收这个意图。？

换句话说，我的逻辑是我的应用程序必须完成安装才能让我执行任何接收。或者这是否意味着，第一次启动我的应用程序的意图是“com.android.vending.INSTALL_REFERRER”意图，因此该意图被传递给我的 onCreate() 函数。

我在这里有点困惑，并且不想为此找到一些好的文档。有人指出我正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:36:24.690

“请记住，当调用接收器时，您的应用程序的其余部分将不会运行，因此通常您将引用字符串记录在某个地方，例如 SharedPreferences，然后在运行主应用程序时收集它并使用分析库。（您当然不会'不想阻止接收器中的处理等待网络连接等！）

[参考](http://blog.appington.com/2012/08/01/giving-credit-for-android-app-installs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T16:53:29.737

安装应用程序后，此 Intent 将被“触发”。

如果您在 AndroidManifest.xml 中声明了一个带有与触发的 Intent 匹配的意图过滤器的接收器，则该接收器代码将启动并传递该 Intent。它不会被传递到您的应用程序的 onCreate() 中，也不会传递到以后启动的任何 Activity。

```
<receiver
        android:exported="true"
        android:name="com.yourapp.InstallReceiver">
        <intent-filter>
            <action android:name="com.android.vending.INSTALL_REFERRER" />
        </intent-filter>
</receiver> 
```

在这个广播接收器代码中，您可以解析收到的 Intent 并做任何您想做的事情：例如，启动后台线程并在本地或网络上记录该信息。

Intent 甚至可能包含一个“referrer”（即导致此下载和安装的 Playstore 链接在哪里？）最初传入的标识符（通过指向商店中应用程序链接的附加参数）。这对于跟踪实际导致应用安装的推荐来源非常有用。

此外，该链接可能包含用于配置您的应用程序的附加参数，您可以在接收器代码中处理（和存储？）这些参数，然后在以后启动应用程序时读取这些参数。

# php - PHP COM 对象是共享的

> ID：13617880
> 
> 赞同：0
> 
> 时间：2012-11-29T02:27:19.347
> 
> 标签：php, .net, multithreading, com, garbage-collection

客户端使用 PHP 如下：

```
function getBlah($something) {
  $p1 = "foo";
  $p2 = "bar";
  $obj = new COM("namespace.class");
  $result = $obj->method($p1,$p2,$something);
  unset($obj);
  $blah = explode(chr(10),$result); // and do other stuff
  echo $blah;
} 
```

COM 对象是一个 VB.NET 类。此代码有效。PHP 正在从网页执行。

在 .NET 方法中，另一个类被实例化，它与服务器进行通信。该方法完成后，我们“假设”.NET 垃圾收集将处理所有资源。我们进一步“假设”在 PHP 方法完成后，COM 对象将通过 PHP GC 打包，并且这些资源将不可用于其他进程。

但是我们发现，当多个用户同时点击该函数时，在 .NET 方法对象中实例化的线程正在被重用。因此 user1 执行 PHP，实例化 COM 对象并调用方法，创建托管对象，该对象在线程中创建并等待服务器响应几毫秒到几秒。现在 user2 做了同样的事情，但不知何故 user1 的响应回到了 user2 的线程上。因此，一个或两个进程都会返回，其中一个可能会收到另一个线程的响应！

是的，我们都知道“假设”是什么意思，并且我们已经尝试了各种可能的显式资源处理。

这里的另一个问题表达了完全相反的问题：[Is it possible to cache/serialize a COM object in PHP?](https://stackoverflow.com/questions/3164096/is-it-possible-to-cache-serialize-a-com-object-in-php) 对此的回应说不，但这可能证明并非如此。

重现这一点可能非常困难，但它偶尔发生的事实非常令人恼火——想象一下提交一个网络表单并获得其他人的交易确认——这不好啊？

虽然 PHP 变量的范围对于每个进程都是唯一的，并且每个进程在每个函数结束时都有自己的资源 GC，但似乎分配给 COM 对象的内存在某种程度上是共享的，而两个用户正在执行相同的代码。换句话说，包含 COM 对象的 PHP 函数似乎不是可重入的。

谁能指出一些规则来确认这是已定义的行为，或者这是一个可验证的错误？
Windows 上的 PHP 是否被认为不是线程安全的？
是否需要设置一些标志或应用一些补丁以确保线程安全的稳定性？
我们需要使用信号量还是阻塞锁？
Fast-CGI 或 IIS7 是否存在一些问题或已知配置？

我没有方便的 PHP 版本，需要获取有关确切环境的详细信息。请原谅一些遗漏的细节，但如果您知道某些重要的事情，请询问。（嗯，请不要问答案是否不会改变你的回答。）我也更像一个 .NET 人而不是 PHP 人，所以我可能在这里遗漏了一些其他重要的东西，或者对 PHP 大师来说很明显.

是的，几个月来我一直在寻找其中一些问题的答案，但在谷歌或在 SO 上都没有运气。所以我们在这里。

谢谢！

# asp.net - 在两个不同的域中维护 iframe 的会话

> ID：13617884
> 
> 赞同：4
> 
> 时间：2012-11-29T02:27:39.073
> 
> 标签：asp.net, session, iframe

我有两个域名（所有网站都是使用 ASP.NET 开发的）：

*   iframe.com
*   domainA.com
*   域名B.com

domainA.com 和 domainB.com 都有一个指向 iframe.com 的 iframe。

当我浏览 domainA 时，iframe.com 会设置一个会话变量。

当我导航到 domainB（使用相同的浏览器和相同的会话）时，我希望维护我在浏览 domainA 时在 iframe.com 中设置的会话变量。

这可能吗？我似乎失去了我所有的会话变量:(

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T22:29:13.123

我个人会使用自定义版本的 SQL Server 模式进行会话。简而言之，我会创建一个对象（可能是哈希表）并将其内容存储在数据库中，然后为其分配一个 GUID 并将该 GUID 发送到客户端以存储为 cookie。

这样，每次客户端（浏览器）从 cookie 发送 GUID 时，您都会在 DB 中查找该 GUID，并能够在 SQL Server 中获取/存储数据。

# ruby - 如何 cd 到 .pryrc 文件中的类/对象？

> ID：13617888
> 
> 赞同：1
> 
> 时间：2012-11-29T02:28:32.543
> 
> 标签：ruby, pry

我希望特定项目的 .pryrc cd 到一个类上下文，该上下文将成为该项目中 99% 的所有 pry 会话的上下文。

只是在做：

```
cd MyModule 
```

不起作用：

```
Error loading ./.pryrc: undefined method `cd' for main:Object 
```

这令人困惑，因为 .pryrc 中定义的方法位于 pry 会话上下文中。

```
Pry.cd MyModule 
```

也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:22:19.820

我认为我们将来会为此添加更好的支持，但同时将其放入您的`.pryrc`：

`Pry.config.hooks.add_hook(:before_session, :set_context) { |_, _, pry| pry.input = StringIO.new("cd MyModule") }`

如果您希望将来看到对该功能的更好支持，请[提交问题](https://github.com/pry/pry/issues)

# maven - How to add environment variables to maven-jetty-plugin

> ID：13617896
> 
> 赞同：0
> 
> 时间：2012-11-29T02:29:57.417
> 
> 标签：maven, jetty, maven-plugin, maven-jetty-plugin

I am using the maven jetty pluggin as follows:

```
 <plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.5.v20120716</version>
    <configuration>
      <stopKey>1</stopKey>
      <stopPort>9999</stopPort>
    </configuration>
  </plugin> 
```

My web app is running on ec2 where we have a few environment variables setup (like CLOUD_DEV_PHASE). I was wondering if there is a way to put a dummy value for CLOUD_DEV_PHASE in the pom file so you don't have to do it on your system. Is there a way to do this?

I am looking for something similar to

```
CLOUD_DEV_PHASE=dev mvn jetty:run 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T02:37:25.860

你的意思是添加系统属性？像这样：

```
<plugin>
  <groupId>org.mortbay.jetty</groupId>
  <artifactId>jetty-maven-plugin</artifactId>
  <configuration>
    <systemProperties>
      <systemProperty>
         <name>CLOUD_DEV_PHASE</name>
         <value>dummy</value>
       </systemProperty>
    </systemProperties>
    <webApp>
      <contextPath>/test</contextPath>
    </webApp>
   </configuration>
</plugin> 
```

有关更多信息，请查看：[http ://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin#Setting_System_Properties](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin#Setting_System_Properties)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T02:37:52.900

我不确定是否完全理解您的问题，但如果您需要设置环境变量，我通常使用 exec 插件：http: [//mojo.codehaus.org/exec-maven-plugin/](http://mojo.codehaus.org/exec-maven-plugin/)

以下目标：http: [//mojo.codehaus.org/exec-maven-plugin/exec-mojo.html](http://mojo.codehaus.org/exec-maven-plugin/exec-mojo.html)

像这样：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.2.1</version>
    <executions>
      <execution>
        <id>setEnvVar</id>
        <phase>initialize</phase>
        <goals>
          <goal>exec</goal>
        </goals>
      </execution>
    </executions>
    <configuration>
      <executable>export</executable>
      <arguments>
        <argument>CLOUD_DEV_PHASE=Something</argument>
      </arguments>
    </configuration>
  </plugin> 
```

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-19T06:35:37.750

我在一个论坛看到这个。我希望它对你有用。

```
<plugin>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>${jetty.version}</version>
    <configuration>
      ...

      <env>
         <wibble>pencil</wibble>
         <foo>bar</foo>
         <black>white</black>
      </env>

      ...

    </configuration>
</plugin> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:17:39.833

我会尝试`env.CLOUD_DEV_PHASE`在项目部分设置属性：

```
<project>
    ...
    <properties>
        <env.CLOUD_DEV_PHASE>dev</env.CLOUD_DEV_PHASE>
    </properties>
    ...
</project> 
```

或在 Jetty 插件配置中：

```
<plugin>
  <groupId>org.mortbay.jetty</groupId>
  <artifactId>jetty-maven-plugin</artifactId>
  <configuration>
    ...
    <systemProperties>
      <systemProperty>
         <name>env.CLOUD_DEV_PHASE</name>
         <value>dev</value>
       </systemProperty>
    </systemProperties>
   </configuration>
</plugin> 
```

# ios - ChildViewController -> ParentViewController -> SecondChildViewController using ContainerView

> ID：13617898
> 
> 赞同：0
> 
> 时间：2012-11-29T02:30:09.320
> 
> 标签：ios, uistoryboardsegue, container-view

I have a ViewController that houses 2 Containers (one top, one bottom). Top Container houses a ViewController with a button and a textfield (just for illustrating purposes). What I want to do is:

1.  Type text
2.  Press button
3.  Send text to bottomViewController
4.  Display into table

How do I send text to the bottomViewController? Do I somehow have to talk to the parent?

I'm using Storyboards so I have this in the parentViewController

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    NSLog(@"Current Segue: %@", segue.identifier);
    if ([segue.identifier isEqualToString:@"topSegue"]) {
        self.enterCommentViewController = segue.destinationViewController;
    }
    else if ([segue.identifier isEqualToString:@"bottomSegue"]) {
        self.commentsViewController = segue.destinationViewController;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:56:31.997

你不使用这样的嵌入转场。2 个控制器与父控制器同时实例化。您可以从父控制器的 childViewControllers 属性中获取对这 2 个子控制器的引用。您应该记录 childViewControllers 以查看数组的哪个成员是哪个控制器，然后您可以将这些控制器称为 self.childViewControllers[0] 和 self.childViewControllers[1]。

# python - Cross Product in Map Reduce using Hadoop Streaming and Python

> ID：13617901
> 
> 赞同：11
> 
> 时间：2012-11-29T02:30:48.680
> 
> 标签：python, hadoop, mapreduce

I am learning Python and Hadoop. I completed the setup and basic examples provided in official site using pythong+hadoop streaming. I considered implementing join of 2 files. I completed equi-join which checks if same key appears in both input files, then it outputs the key along with values from file 1 and file 2 in that order. The equality join is working as it is supposed.

Now, I wish to do inequality join which involves finding Cross Product before applying the inequality condition. I am using the same mapper (do I need to change it) and I changed the reducer so that it contains a nested loop (since every key-value pair in file1 must be matched with all key-values pairs in file2). This doesn't work since you can only go through the stream once. Now, I thought of an option of storing 'some' values in reducer and comparing them but I have no idea 'how' many. Naive method is to store whole file2 content in a array (or similar structure) but thats stupid and goes against the idea of distributed processing. Finally, my questions are

1.  How can I store values in reducer so that I can have cross product between two files?

2.  In equi-join, Hadoop seems to be sending all key value pairs with same key to same reducer which is perfectly fine and works well for that case. However, how I do change this behaviour (if needed) so that required grouping of key-value pairs go correct reducer?

Sample Files: [http://pastebin.com/ufYydiPu](http://pastebin.com/ufYydiPu)

Python Map/Reduce Scripts: [http://pastebin.com/kEJwd2u1](http://pastebin.com/kEJwd2u1)

Hadoop Command I am using:

```
bin/hadoop jar contrib/streaming/hadoop-*streaming*.jar -file /home/hduser/mapper.py -mapper mapper.py -file /home/hduser/ireducer.py -reducer reducer.py -input /user/hduser/inputfiles/* -output /user/hduser/join-output 
```

Any help/hint is much appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T20:02:38.727

处理多个组合的一种方法可以非常有助于避免嵌套循环，这是使用 itertools 模块。特别是[itertools.product](http://docs.python.org/2/library/itertools.html#itertools.product)函数，它使用生成器处理笛卡尔积。这有利于内存使用、效率，并且如果您必须在一个 map reduce 作业中加入多个数据集，它可以显着简化您的代码。

关于mapper产生的数据和reducer中要合并的数据集的对应关系，如果每个key的数据集不是太大，你可以简单地从mapper中产生如下组合：

```
{key, [origin_1, values]}
{key, [origin_2, values]} 
```

因此，您将能够将 reducer 中具有相同来源的值分组到字典中，这些字典将是使用 itertools.product 应用笛卡尔积的数据集。

# c# - Get html as String with XslCompiledTransform. Result is empty

> ID：13617903
> 
> 赞同：0
> 
> 时间：2012-11-29T02:30:50.507
> 
> 标签：c#, asp.net, html, xslcompiledtransform

I want to create a html list () from an xml using xslt. I was able to do so with an xml **file** and a xslt **file**. **Now** I want to do it with an xml **string** or **XmlDocument** and and xslt **file**.

This is my current code:

```
private String toHTML(XmlDocument xmlDocument)
        {
            System.IO.StringWriter sw = new System.IO.StringWriter();
            XslCompiledTransform xslTrans = new XslCompiledTransform();
            xslTrans.Load(Server.MapPath("Xslt/Permisos.xslt"));
            xslTrans.Transform(xmlDocument.CreateNavigator(), new XsltArgumentList(), sw);
            return sw.ToString(); 
        } 
```

It is on a single web application assembly. No exception is thrown. Just returns "".

My XSLT

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">

      <xsl:output method="html" indent="yes"/>
      <xsl:template match="/">
        <xsl:for-each select="menus">
          <ul>
            <xsl:for-each select="menu">
              <li>
                <a href="{url}">
                  <xsl:value-of select="nombre" />
                </a>
                <ul>
                  <xsl:for-each select="submenu">
                    <li>
                      <a href="{url}">
                        <xsl:value-of select="nombre" />
                      </a>
                    </li>
                  </xsl:for-each>
                </ul>
              </li>
            </xsl:for-each>
          </ul>
        </xsl:for-each>
      </xsl:template>
    </xsl:stylesheet> 
```

MY XML

```
<?xml version="1.0" encoding="UTF-8"?><menus xmlns="http://www.xxxxx.com"><menu><nombre>Main</nombre><url>#</url><submenu><nombre>Sub</nombre><url>#</url></submenu><submenu><nombre>Sub</nombre><url>#</url></submenu><submenu><nombre>Sub</nombre><url>#</url></submenu><submenu><nombre>Sub</nombre><url>#</url></submenu><submenu><nombre>Sub</nombre><url>#</url></submenu><submenu><nombre>Sub</nombre><url>#</url></submenu><submenu><nombre>Sub</nombre><url>#</url></submenu><submenu><nombre>Sub</nombre><url>#</url></submenu><submenu><nombre>Sub</nombre><url>#</url></submenu><submenu><nombre>Sub</nombre><url>#</url></submenu></menu></menus> 
```

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:32:28.513

正如[另一个 SO answer](https://stackoverflow.com/questions/1344158/xslt-with-xml-source-that-has-a-default-namespace-set-to-xmlns)中提到的那样。问题是您在源 XML（“ [http://www.xxxxx.com](http://www.xxxxx.com) ”）中定义了一个名称空间，但您没有在 xslt 中使用该名称空间。

您可以从源 XML 中删除名称空间，也可以在 xslt 中指定它：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:msxsl="urn:schemas-microsoft-com:xslt" 
  exclude-result-prefixes="msxsl" 
  xmlns:my="http://www.xxxxx.com">

  <xsl:output method="html" indent="yes"/>
  <xsl:template match="/">
    <xsl:for-each select="my:menus">
      <ul>
        <xsl:for-each select="my:menu">
          <li>
            <a href="{my:url}">
              <xsl:value-of select="my:nombre" />
            </a>
            <ul>
              <xsl:for-each select="my:submenu">
                <li>
                  <a href="{my:url}">
                    <xsl:value-of select="my:nombre" />
                  </a>
                </li>
              </xsl:for-each>
            </ul>
          </li>
        </xsl:for-each>
      </ul>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

# ios - ios - UIActivityIndicatorView with storyboard not behaving correctly in the controller

> ID：13617906
> 
> 赞同：0
> 
> 时间：2012-11-29T02:30:59.523
> 
> 标签：ios, ios5, uiactivityindicatorview

I put a UIActivityIndicatorView on my storyboard screen and from the storyboard screen I dragged the UIActivityIndicatorView to the .h file of my controller and it created this in my .h file:

```
@property (weak, nonatomic) IBOutlet UIActivityIndicatorView *spinner; 
```

But when I started working in the .m file, it didn't place the property there automatically, and when I tried to put this in there:

```
@property (nonatomic, retain) UIActivityIndicatorView *spinner; 
```

which gave the error

```
Illigal declaration of property in the continuation class xyz, property must be readWrite... 
```

Does anyone know why this is happening? And how do I fix it? :)

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:40:36.147

当您在类延续中重新声明一个属性时，更改与其关联的内存限定符是非法的，只能从只读变为读写（反之亦然，尽管我不明白为什么有人想要这样做）。要么移除弱点，要么移除保留的出口，只留下一个。

此外，属性不会“自动”为您“放置”在类中。如果您需要访问对象的属性，点或消息语法就可以正常工作。

# ado.net - Is is possible to use ADO.net to wrap an existing ODBC connection?

> ID：13617907
> 
> 赞同：0
> 
> 时间：2012-11-29T02:31:01.047
> 
> 标签：ado.net, odbc, wrapper

We have an existing ODBC connection (for example, a legacy product which is already connected with database and also can return a ODBC connection handle), and we want to wrapper this connection handle through ADO.net. Then our secondary development user can use this ADO.net wrapper library to access the database.

How would one go about doing this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:43:39.717

是的。ADO.NET 有一个 ODBC 提供程序，实际上是以数据库中立的方式使用 ADO.NET 的首选方式，因为 OleDb 并没有像 MS 所希望的那样流行起来。

参考：http: [//msdn.microsoft.com/en-us/library/system.data.odbc.aspx](http://msdn.microsoft.com/en-us/library/system.data.odbc.aspx)

# r - not able to write bold characters using textbf

> ID：13617909
> 
> 赞同：2
> 
> 时间：2012-11-29T02:31:13.633
> 
> 标签：r, latex, bold

I'm working in LaTeX and R and I am using UTF-8 encoding, but when I use `\textbf{dataset}`, the resulting text is not bold.

Can someone tell me why this happens?

Below is part of my code. I am not sure what the reason behind it is.

```
\documentclass[11pt,table,a4paper]{article}
\usepackage[T1,T2A]{fontenc}
\usepackage{CJKutf8}
\usepackage[english,russian]{babel}
\begin{document}

<<echo=FALSE,results=tex>>=
   cat("dataset","\n")
   cat("\\textbf{dataset}","\n")   # it should be bold  
@
\end{document}linecolor=goldenpoppy 
```

The error is due to `\usepackage[english,russian]{babel}`. Please help me out in fixing this problem.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:23:42.543

使用该选项手动添加`Sweave`包将解决此问题：`noae`

```
\usepackage[noae]{Sweave} 
```

# php - 调用 Colorbox / Lightbox 通过插件打开外部内容

> ID：13617910
> 
> 赞同：0
> 
> 时间：2012-11-29T02:31:27.830
> 
> 标签：php, javascript, jquery, wordpress

我有一个插件可以成功调用thickbox 来打开外部内容的iframe。它使用以下代码：

```
function user_avatar_admin_print_styles() {
    global $hook_suffix;
    wp_enqueue_script("thickbox");
    wp_enqueue_style("thickbox");
    wp_enqueue_style('user-avatar', plugins_url('/user-avatar/css/user-avatar.css'),
     'css');
    } 
```

和

```
<a id="user-avatar-link" class="button-primary thickbox" href="<?php echo 
admin_url('admin-ajax.php'); ?>?action=user_avatar_add_photo&step=1&uid=<?php echo 
$profile->ID; ?>&TB_iframe=true&width=720&height=450" title="<?php _e('Upload and 
Crop an Image to be Displayed','user-avatar'); ?>" ><?php _e('Update Picture',
'user-avatar'); ?></a> 
```

所以重要的三个代码是 **wp_enqueue_script**、 **wp_enqueue_style**和**一个类**都引用了thickbox。现在，Thickbox 完全搞乱了我的网站，并且不能很好地与我的其他插件交互。所以我决定使用colorbox...我只是将引用“thickbox”的三个代码更改为“colorbox”。听起来很简单，但插件中没有其他代码引用thickbox 接受我列出的三个。将代码更改为“colorbox”不起作用。我还尝试安装灯箱和灯箱加，然后更改代码.. 没有任何效果。

这个类“按钮主要厚盒”是否只适用于厚盒，还有更多吗？我可以更改代码以使用 colorbox、lightbox 或其他以相同方式工作的插件吗？任何帮助将不胜感激。:)

**快速更新：**

我在与类有关的thickbox 中发现了这段代码。我调用thickbox的插件使用代码

这是代码： function add_thickbox_class_to_attachment_link($link) { if (thickbox_get_option(OPTION_THICKBOX_ADD_CLASS) == false) return $link;

```
$use_smoothbox = thickbox_get_option(OPTION_THICKBOX_USE_SMOOTHBOX);
# Since SmoothBox doesn't come with WordPress we don't add the class here
if (use_wordpress_default_script_and_style() and $use_smoothbox == true)
    return $link;

$class = $use_smoothbox == true ? 'smoothbox' : 'thickbox';
return str_replace('<a', '<a class="'.$class.'"', $link);
}
if (function_exists('add_filter'))
add_filter('wp_get_attachment_link', 'add_thickbox_class_to_attachment_link'); 
```

我还发现使用带有颜色框的类，但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:49:56.233

我最终使用了插件“PrettyPhoto”并简单地添加了代码

```
rel="PrettyPhoto" 
```

而不是调用插件的类。

# xcode - mac ios：如何在 Xcode 中找到“SCM”？

> ID：13617913
> 
> 赞同：0
> 
> 时间：2012-11-29T02:31:42.760
> 
> 标签：xcode, macos, version-control

由于版本不同，对 Xcode 非常不满。我使用 Xcode 4.3，并想使用 SCM 来管理项目。单击“Xcode”-> Preferences，但找不到它，下面是快照：

![在此处输入图像描述](../Images/6b948d52f72065295d8c59c1183afc4a.png)

我怎样才能找到“SCM”？谢谢你的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-24T11:09:19.427

SCM：源代码控制管理系统。它在 Xcode for Git 和 Subversion 中可用，尽管 Git 更新且使用更多。当您在 Xcode 中创建项目时，您将看到类似于此[Xcode Git Repository Checkbox](https://i.stack.imgur.com/i9lxi.png)的屏幕，您可以在其中添加 Git 源代码控制。有关 Subversion 的信息，请查看 Xcode 帮助。

从那里您可以转到 Menu Option Source Control 并输入您为 Xcode 项目设置的 Github 存储库的 URL。

# c# - 如何设置最小（最大）处理器状态的值

> ID：13617914
> 
> 赞同：2
> 
> 时间：2012-11-29T02:32:12.130
> 
> 标签：c#, windows-7, power-management

Win7下，打开控制面板->电源选项->高级设置->处理器电源管理。

你可以看到最小处理器状态，最大处理器状态。我已经使用 C# 通过 powercfg 命令获取了值。现在，我想通过 C# 设置处理器状态的值。例如旧值为 5%，执行程序，将值更新为 10%。我已经搜索了 powercfg 帮助文档，没有这样的命令可以做到这一点。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:06:53.657

我只能建议使用 PInvoke调用[WriteProcessorPwrScheme 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373251.aspx)[Windows API Code Pack for .NET](http://archive.msdn.microsoft.com/WindowsAPICodePack)有一些电源管理功能，但可能不是这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T05:38:23.547

采用

```
PowerWriteACValueIndex()/PowerWriteDCValueIndex() 
```

第一个参数为 NULL，第二个参数——所需电源方案的 GUID (GUID_MAX_POWER_SAVINGS/GUID_MIN_POWER_SAVINGS/GUID_TYPICAL_POWER_SAVINGS)，第三个参数——GUID_PROCESSOR_SETTINGS_SUBGROUP，第四个参数——GUID_PROCESSOR_THROTTLE_MAXIMUM 或 GUID_PROCESSOR_THROTTLE_MINIMUM

所有 GUID 描述都可以在 winnt.h 中找到

# linux - 解压缩连接两个 gzip 文件的结果是否总是等于连接原始和解压缩形式的两个文件的结果？

> ID：13617918
> 
> 赞同：1
> 
> 时间：2012-11-29T02:32:43.137
> 
> 标签：linux, bash, shell, unix, gzip

在我的简短测试中，情况确实如此，但我想知道是否可以依赖该属性。

无论and的内容是否`file3`总是相等？`file4``file1``file2`

```
cat file1 file2 > file3
gzip file1
gzip file2
cat file1.gz file2.gz | gunzip - > file4

# Are file3 and file4 necessarily the same? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:36:47.990

根据手册页，**是的。** 这是记录在案的行为。

[http://www.gnu.org/software/gzip/manual/html_node/Advanced-usage.html](http://www.gnu.org/software/gzip/manual/html_node/Advanced-usage.html)

> 高级用法
> 
> 可以连接多个压缩文件。在这种情况下，gunzip 将一次提取所有成员。如果一个成员损坏，其他成员可能在移除损坏的成员后仍然可以恢复。如果所有成员都解压缩然后在一个步骤中重新压缩，通常可以获得更好的压缩。
> 
> 这是连接 gzip 文件的示例：
> 
> ```
>  gzip -c file1  > foo.gz
>  gzip -c file2 >> foo.gz Then
> 
>  gunzip -c foo is equivalent to
> 
>  cat file1 file2 
> ```

# .net - 除了 ClickOnce 之外，是否还有用于部署基于 Windows 的应用程序的工具？

> ID：13617920
> 
> 赞同：0
> 
> 时间：2012-11-29T02:33:06.073
> 
> 标签：.net, deployment

除了 ClickOnce 之外，是否还有用于部署基于 Windows 的应用程序 (.NET) 的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:25:25.340

VS2012 附带[InstallShield LE](http://learn.flexerasoftware.com/content/IS-EVAL-InstallShield-Limited-Edition-Visual-Studio)，我发现它非常简单。

# ios - iOS：多人可以共享一个苹果个人开发账号吗？

> ID：13617927
> 
> 赞同：4
> 
> 时间：2012-11-29T02:34:02.547
> 
> 标签：ios, account

我是iOS开发的爱好者。我还有另外**3 个海外朋友**要和我一起开发一个应用程序。现在我想开一个开发帐户来调试，测试我们的应用程序。之后发布到 App Store。

所以现在我想知道，**我们是否可以只开设一个个人开发帐户并在各自的 iPhone 上共享？**因为我们还没有注册公司，所以没办法申请一个公司。 **共享一个个人开发账号方便吗？**

**如果在我们之间共享一个个人帐户不是一个好主意。那么适合我的情况的正确或最佳方法是什么？**

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T02:41:02.717

这将违反 Apple 的指南（寻找引用），但这是可能的——但是，主要问题是你们都必须共享证书，包括注册帐户的人的私钥。因此，尽管有可能，但它会很困难且过于复杂 - 再加上某人的私钥证书会四处飘荡，这永远不会有趣。

**编辑：** [这个页面](https://developer.apple.com/support/ios/enrollment.html)，在“我应该加入哪个 iOS 开发者计划？”下，说：

> 如果您是独资经营者或以自己的名义开发，请以个人身份加入。

因此，如果您是该帐户的完全所有者（以及由此产生的应用程序），**或者**如果您“以自己的名义开发”（解释一下您的意愿！），那么它将在 Apple 的 ToS 下有效; 仍然困难，但有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T01:30:42.823

您现在可以注册为个人。然后，如果你想加入一家公司，你可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T18:01:15.530

从长远来看，最简单的方法可能是继续组建单一成员 LLC（假设您在美国）。然后，您可以联系 Apple 将您的个人开发者计划转换为公司计划。该计划的费用是相同的。拥有公司计划后，您可以将多个开发人员添加到您的团队中，允许他们在 iOS 设备上构建和调试应用程序。

# cassandra - 使用 Astyanax 更新复合计数器列

> ID：13617929
> 
> 赞同：1
> 
> 时间：2012-11-29T02:34:10.970
> 
> 标签：cassandra, astyanax

我从示例中看到如何使用 Astyanax 更新计数器列并插入到复合列中。但我不知道如何做到这两点。

这是我在 CQL 3 中尝试做的事情

```
UPDATE column_family SET count = count + 1 WHERE col1='foo' AND col2='bar' AND col3='yo'; 
```

使用类似的架构

```
CREATE COLUMNFAMILY column_family (
   col1 varchar,
   col2 varchar,
   col3 varchar,
   count counter,
PRIMARY KEY (col1, col2, col3)); 
```

这是我必须更新复合列的要点

```
public void updateCount(String columnFamilyName , String rowKey , Counter rollup , int count) throws ConnectionException {

  try  {
  AnnotatedCompositeSerializer<Counter> entitySerializer = new AnnotatedCompositeSerializer<Counter>(Counter.class);
  MutationBatch mutation = keyspace.prepareMutationBatch();

   ColumnFamily<String, Counter> columnFamily
      = new ColumnFamily<String, Counter>(columnFamilyName, StringSerializer.get() , entitySerializer);
   mutation.withRow(columnFamily , rowKey).putColumn(rollup, count, null);

   mutation.execute();

  } catch (Throwable e){
    LOG.warn("update fail" , e);
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T00:38:44.023

肯定有一个 incrementCounterColumn 方法。我的代码通常看起来更像这样：

```
batch.withRow( ... ).incrementCounterColumn( ... ); 
```

# mapreduce - map和reduce任务的排序

> ID：13617931
> 
> 赞同：1
> 
> 时间：2012-11-29T02:34:52.937
> 
> 标签：mapreduce, task

作业 j 由“M”个 map 任务和“R”个 reduce 任务组成。

```
M(1) M(2)...... Map(m)
 Reduce(1) Reduce(2) ... Reduce(R) 
```

您如何知道 map 和 reduce 任务之间的顺序？我们知道 Map 任务的输出将是 Reduce 任务的输入。但是如果我想模拟排序我应该怎么做呢？例如

`M1 M2 M3`

`R1 R2`

是否可以将“M1”和“M2”的输出作为“R1”的输入，将“M3”的输出作为“R2”的输入？在实际情况下如何排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:12:39.873

您通过以下方式订购映射器和减速器：

*   使用特定的映射器和减速器配置作业，以及
*   定义工作流

一个作业可以有任意数量的映射器和减速器。您可以使用脚本或 oozie 工作流显式定义作业依赖关系，也可以让工作流管理器（Azkaban、oozie 等）根据哪个作业的映射器使用哪些作业缩减器的输出来计算依赖关系。

# php - 单击选择菜单中的值时显示数据库数据

> ID：13617939
> 
> 赞同：0
> 
> 时间：2012-11-29T02:36:29.257
> 
> 标签：php, jquery, mysql

我正在开发一个表单，用户可以从选择下拉列表中选择一个月。我想要做的是当用户点击一个月然后需要根据点击的月份显示数据库中的用户信息。

我的问题是，这里我不使用提交按钮将数据发送到服务器。我只需要在选择框单击月份时显示用户信息。

我正在寻找 PHP 解决方案。

任何人都可以告诉我我该怎么做？或者让我知道是否有任何好的教程。

非常感谢任何评论。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T03:11:55.357

因为 php 是服务器端，所以你不能只用服务器端解决这个问题。您将需要捕获选择框的更改事件并重新加载页面或通过 ajax 获取用户数据并加载内容。

我推荐 jQuery 用于更改事件绑定，[http://api.jquery.com/change/](http://api.jquery.com/change/)

Jquery 对服务器进行 ajax 调用，[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

和 jQuery.html() 使用 ajax 响应来替换 div 的内容，[http: //api.jquery.com/html/](http://api.jquery.com/html/)

快速搜索返回此示例，[在更改下拉列表显示时调用 php 函数](https://stackoverflow.com/questions/6108495/on-change-of-dropdown-list-showld-call-the-php-function)

# mysql - 如何快速检查数据库中是否存在大量记录？

> ID：13617940
> 
> 赞同：1
> 
> 时间：2012-11-29T02:36:38.487
> 
> 标签：mysql, ruby-on-rails, database, activerecord

在我的 Rails 应用程序的某个时刻，我从缓存中检索了大量 ActiveRecord 对象。但是，这些记录中的一些可能已从数据库本身中删除，因为它们存储在缓存中，因此我循环记录并检查每个记录以查看它是否存在。这需要相当多的时间。有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T04:43:10.977

从数据库中删除记录时，是否有理由不从缓存中删除记录？

如果您要将这些记录存储在缓存中并需要它们与数据库同步，那么当您从数据库中删除它们时，请确保也从缓存中删除它们的存在，从而为您节省昂贵的查询稍后检查冗余数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T02:53:59.687

这也可以被认为是一个数据库设计问题，而不是一个真正的 rails 问题。从这个角度来看，你能在你的表中添加一个具有唯一索引的 AUTO INCREMENT 字段吗？

即使在进行记录存在检查时，活动记录查询接口最终也必须依赖数据库进行查找。因此，无论界面有多好，如果数据库必须做很多工作，它都需要时间，而且不是 rails “故障”。让数据库尽可能快地验证您想要的记录。

如果您熟悉 oracle，这与将 oracle rowid 存储在查询中以便以后能够验证现有记录的想法相同。

正如 Danny 所指出的那样，也许缓存大量记录并在以后使用它们对您的应用程序来说是个坏主意。你能阅读，然后立即处理你的记录吗？

这些建议都不是快速解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T03:10:04.600

如果您要检查的记录数量确实很大，那么您可以通过进行批量传输来分摊运送它们的成本：创建一个临时表，在其中插入大量行从缓存中取出，然后将临时表与原始表连接起来。然后，您的 DBMS 将为您执行循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T03:18:27.073

如果缓存的结果包括您感兴趣的记录的主键，您可以通过从数据库中仅选择这些键并查看返回的内容来轻松过滤结果。然后只需踢出过时的记录，你就可以开始了。

```
results_from_cache = $redis.get("users")

cached_user_ids = results_from_cache.map(&:id)
actual_user_ids = User.where(id: user_ids).pluck(:id)

results_minus_stale = results_from_cache.select do |user|
  actual_user_ids.include?(user.id)
end 
```

# c++ - 恢复

> ID：13617942
> 
> 赞同：-4
> 
> 时间：2012-11-29T02:36:51.657
> 
> 标签：c++, windows

我是个白痴，编辑了 WinBase.h 以尝试覆盖 VC++ 2008 错误。因此，现在每当我编译我的项目时，它都会尝试编译 WinBase。它继续查找超过 400 个错误。愚蠢的问题：我该如何解决这个问题？

编辑：

事实证明，我没有编辑任何东西。我只是试图`#include <WinBase.h>`代替`#include <windows.h>`. 那行不通...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T02:45:26.917

嗯……不要那样做？我不确定您为什么认为这是一个合理的选择，但随机采取行动，尤其是在您不理解的代码区域，永远不是解决方案。

您显然需要重新安装它。您可以再次安装 Windows SDK（或 VC++，我相信它也包括在内），这应该会为您完成。现在停止删除*操作系统创建者编写的随机文件，这是一种错误的修复代码**的*尝试:)

# login - 我希望我的 Wordpress 网站的登录页面仅显示基本信息，请求更多信息表格并为会员登录。

> ID：13617945
> 
> 赞同：1
> 
> 时间：2012-11-29T02:37:05.943
> 
> 标签：login, wordpress-theming, restrict, members

我正在为会员建立一个网站，他们可以在其中查看新帖子、关注更新等。我将为所有会员提供登录信息。我想创建一个仅显示网站描述、请求更多信息表单和登录窗口（可以是 wordpress 登录窗口）的登录页面。网站的其余部分应在登录后可访问的此页面后面。据我所知，自定义 Wordpress 登录页面并不适合我，因为我还需要显示请求信息表单和基本站点描述。我曾尝试使用像 WP-Members 和类似的插件，但它们都只限制对帖子和页面的访问。我需要将整个网站隐藏在登录页面后面。用 Wordpress 可以吗？是否有涵盖该主题的主题？请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:05:29.487

使用 WP-Members 是完全可能的。你可能会有点困惑，因为一个页面就足够了。

首先，确保您启用了仪表板 > 设置 > 固定链接 > 帖子名称。这将确保您的主页地址是 www.example.com/home 而不是 www.example.com/p?=1 或其他。是的，我知道您不想强迫人们访问名为 /home 的页面。忍受我。

*   使用 +New > Page 创建一个页面。出于本示例的目的，将其命名为 Home。

首先，您需要创建一个名为 unblock 的自定义字段。

*   在页面的最底部，您将看到一个自定义字段区域。
*   单击添加自定义字段按钮。
*   点击进入新
*   在名称字段中，输入：unblock
*   在值字段中，输入：true

然后你需要为 WP-Members 添加一个简码。仍在新页面上：

*   单击 HTML 选项卡
*   添加这个：

    [wp-members page="members-area"]

这将显示登录人员、注册人员和检索密码所需的一切。您可以在页面中添加任何您想要的内容。不过，我建议您将其保留在自己的位置上。

*   单击发布。幽默我。我知道我们还没有完成。

我认为您想要的几乎是一个无特色的页面，并且您希望用户默认到达那里。这将使您的名为 Home 的新页面成为登录页面。当人们键入 www.example.com 以访问您的网站时，他们实际上最终会访问您名为 www.example.com/home 的自定义页面。

*   从仪表板，转到设置 > 阅读
*   在首页显示，选择静态页面
*   对于 Front Page 下拉菜单，选择您刚刚添加的页面。在此示例中，我们将其称为 Home。
*   为 Posts 下拉菜单做同样的事情。

摆脱像最近的帖子这样的杂乱无章的东西：

*   如果幸运的话，您的主题有一个空白的模板选项。返回编辑您的页面。在右侧列中，您会看到名为 Page Attributes 的内容，在其下方是 Template。
*   如果有可选模板，请尝试它们。它们完全依赖于主题。

如果这不起作用，您需要删除小部件，这是最近的帖子等出现在侧面的方式。遗憾的是，这会将它们从所有页面中删除，而不仅仅是这一页（同样，取决于主题）。

*   转到仪表板 > 外观 > 小部件

*   您会在右侧看到主要、次要等小部件区域。

*   单击每个上的向下三角形。
*   您会在那里看到名为“搜索”、“档案”等的下拉菜单。
*   只需将它们拖到左侧即可。将它们全部删除。

好的，现在你的页面很空。

但是，您还想要一些模糊的东西，即“请求信息表”。令人惊讶的是，这有点超出了本练习的范围。提示：在 wordpress.org/extend/plugins 上搜索联系表格，它会使用一个很像 WP-Members 的简码。

# c++ - 如何以可读格式打印控制字符？

> ID：13617951
> 
> 赞同：3
> 
> 时间：2012-11-29T02:37:33.503
> 
> 标签：c++, string, formatting, escaping

我有一个程序会不时输出控制字符，我希望它们以插入符号打印并以蓝色（如`vim`）着色。现在，我使用一个函数，在打印字符串之前调用`boost::algorithm::replace_all()`我能想到的每个控制字符（`^A`通过`^Z`、加号和其他一些字符）。`^@`

有一个更好的方法吗？我目前的解决方案似乎变通了并且容易出错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:31:50.227

这是一种解决方案（可能不是最优雅的）：

```
std::string escape_control_characters(const std::string & s)
{
    std::string ret;
    for(std::string::const_iterator iter = s.begin(); iter != s.end(); ++iter)
    {
        const char c = *iter;
        if(c < ' ')
        {
            ret.push_back('^');
            ret.push_back(c + '@');
        }
        else if(c == '\x7F')
            ret.append("^?");
        else
            ret.push_back(c);
    }
    return ret;
} 
```

[[演示](http://ideone.com/Mj7EmP)]

这不处理蓝色部分，但听起来你已经知道该怎么做？

顺便说一句，您可能想要更改`if(c < ' ')`为类似的内容`if(c < ' ' && c != '\t' && c != '\n')`，因为虽然制表符和换行符在技术上是控制字符（`^I`和`^J`，分别），但打印它们可能是可以的。

# c++ - C++ 循环析构函数

> ID：13617952
> 
> 赞同：2
> 
> 时间：2012-11-29T02:37:41.983
> 
> 标签：c++

在文件啊：

```
class B;
class A
{
public:
    B *b;
    A(B *b = nullptr)
    {
        this->b = b;
    }
    ~A()
    {
        delete this->b;
    }
}; 
```

在文件 bh 中：

```
class A;
class B   
{
public:
    A *a;
    B(A *a = nullptr)
    {
        this->a = a;
    }
    ~B()
    {
        delete this->a;
    };
}; 
```

假设我们有一个指向 A *object 的指针，我们想删除它：

```
// ...
A *a = new A();
B *b = new B();
A->b = b;
B->a = a;
// ...

delete a;

// ... 
```

A 的解构器会说删除 B；即调用B的解构器。B 的解构器会说 delete A.death loop lé infinitè。

有没有更好的方法来编写代码来解决这个问题？这不是紧迫的问题，只是好奇。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T02:46:28.557

使用智能指针 (ie [`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)) 和弱指针 (ie [`std::weak_ptr`](http://en.cppreference.com/w/cpp/memory/weak_ptr)) 而不是纯指针。

您必须定义哪个类真正拥有哪个类。如果没有人拥有另一个，那么两者都应该是弱指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T02:45:42.643

此代码具有未定义的行为。第一次`delete a`发生，然后`A::~A`调用`delete b`. 然后`B::~B`调用`delete a`，这导致双重释放。

在这种情况下，您的实现可以做任何它想做的事情，包括无限循环，或者只是“似乎工作”。您必须确保对象只被`delete`编辑一次。

对于这个特定的应用程序，您可能需要考虑拥有`A`“自己的” `B`，反之亦然。这样， eg`A`总是负责调用`delete B`。这在您有一些对象树的情况下很常见，其中孩子可以引用父母，反之亦然。在这种情况下，父母“拥有”孩子并负责删除孩子。

`shared_ptr`如果你不能这样做，你也许可以用and想出一些解决方案`weak_ptr`（这是循环的，所以`shared_ptr`单独对你没有帮助）；但是您应该强烈考虑设计这样的情况不会出现。

在这个具体的例子中，类`A`不拥有指向的指针`B`——`main`拥有指向的指针`B`。因此，析构函数代码`A`可能不应该删除任何东西——应该由`main`（或者更确切地说，希望`std::unique_ptr`是 中的实例`main`）处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T02:46:41.663

这是循环数据依赖的问题，而不是循环析构函数依赖的问题。如果指针链`a->b->a->b->...->a...`最终指向 a `NULL`，则析构函数将终止；如果指针的轨迹回到开头，您将在两次删除同一个对象时得到未定义的行为。

这个问题和删除一个循环链表没有太大区别：一不小心就可以回来一整圈。您可以使用通常称为[龟兔赛跑](https://stackoverflow.com/a/2663147/335858)的常用技术来检测结构中的`A`/`B`循环，并`NULL`在触发析构函数链之前将“反向指针”设置为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-30T16:13:04.973

首先，你这里的设计很糟糕。如果`A`and`B`是相互关联的，并且取出 an`A`会破坏`B`it 链接的，反之亦然，则必须有一种方法可以将该关系重构为父子关系。 `A`如果可能，应该是“父级” `B`，因此破坏 a`B`不会破坏`A`它链接到的，但破坏 an`A`会破坏`B`它包含的。

当然，事情并不总是这样，有时你会有这种不可避免的循环依赖。为了让它工作（直到你有机会重构！）**打破破坏循环**。

```
struct A
{
  B* b;
  ~A(){
    if( b ) {
      b->a = 0 ; // don't "boomerang" and let ~B call my dtor again
      delete b ;
    }
  }
} ;

struct B
{
  A* a;
  ~B(){
    if( a ) {
      a->b = 0 ; // don't "boomerang" and let ~A call my dtor again
      delete a ;
    }
  }
} ; 
```

请注意，这仅适用于`A`和`B`指向彼此的场景

![在此处输入图像描述](../Images/981dcff81a909f0c1c401530811de6f4.png)

*不适*用于这种情况

![在此处输入图像描述](../Images/5d7d7a88f900a031752a273ddd0535d4.png)

上面的情况是一个循环链表，你必须向前看，`this->b->a->b`直到你`this`再次到达，将最终指针设置为 NULL，然后开始销毁过程。`A`除非从一个公共基类`B`继承，否则这将很难做到。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T04:12:35.823

这是一个简单的解决方案：通过在删除对象之前将该字段设置为 null 来打破任何循环。

编辑：这通常不起作用，例如以下仍然会崩溃：

```
A* a1 = new A();
B* b1 = new B();
A* a2 = new A();
B* b2 = new B();

a1->b = b1;
b1->a = a2;
a2->b = b2;
b2->a = a1;

delete a1; 
```

-

```
class A
{
    ...
    ~A()
    {
        // does b points to us?

        if(this->b && this->b->a == this)
        {
            this->b->a = nullptr;

            // b no longer points to us
        }

        // can safely delete b now

        delete this->b;
    }
};

...

class B
{
    ...
    ~B()
    {
        // does a point to us?

        if(this->a && this->a->b == this)
        {
            this->a->b = nullptr;

            // a no longer points to us
        }

        // can safely delete a now

        delete this->a;
    }
}; 
```

# c# - 在代码中配置客户端应用程序服务

> ID：13617953
> 
> 赞同：0
> 
> 时间：2012-11-29T02:37:42.553
> 
> 标签：c#

如何在没有 app.config 文件的情况下配置客户端应用程序服务？

我无法添加会员提供者，或设置默认提供者。有没有办法以编程方式设置这些或使用嵌入式资源而不是 app.config 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:46:11.373

在运行时设置提供程序：

MembershipProvider userProvider = Membership.Providers[UserProviderName];

参考：[在运行时更改成员资格提供程序 ApplicationName。如何？](https://stackoverflow.com/questions/5852635/changing-the-membership-providers-applicationname-during-runtime-how)

# eclipse - 使用 PyDev 和 Virtualenv 设置 Eclipse Juno

> ID：13617956
> 
> 赞同：29
> 
> 时间：2012-11-29T02:37:47.630
> 
> 标签：eclipse, configuration, pydev, virtualenv

我已经设法按照以下步骤将我的 pydev 安装的 python 解释器设置为我的 virtualenv 文件夹中的解释器：

1.  MyProject -> 属性 -> PyDev - 解释器/语法
2.  单击“单击此处配置未列出的解释器”
3.  在“Python解释器”部分->新建->浏览->选择我的virtualenv解释器
4.  选择新解释器作为默认解释器，单击向上按钮并选择解释器。

耶！一切正常！但是...当我使用通过 pip 安装的任何库时，我的 Eclipse 会在编辑器中显示一个错误标记，这非常烦人，因为一切正常！

![在此处输入图像描述](../Images/099c770d3547af763734bfe2e05999bd.png)

我正在考虑不使用 PyDev 只是因为这个小细节......有人知道解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-30T00:52:20.283

有一个小教程解释它在：

[http://pydev.blogspot.com.br/2010/04/pydev-and-virtualenv.html](http://pydev.blogspot.com.br/2010/04/pydev-and-virtualenv.html)

我相信你的问题在那里得到了解释......（即：安装某些东西后，你必须恢复你的解释器信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-12T21:47:34.390

在 Preferences/PyDev/Interpreters/Python Interpreter 中，转到 Libraries 选项卡并为安装包的`site-packages`文件夹添加一个新文件夹。`virtualenv`

# apache - 修复失败的 .htaccess 重定向尝试

> ID：13617961
> 
> 赞同：0
> 
> 时间：2012-11-29T02:38:19.173
> 
> 标签：apache, .htaccess

我尝试了大约 10 个现有 SO 问题的答案，但无济于事。使用 Salman A 在[Rewrite rule that remove query string from URL and redirect 中](https://stackoverflow.com/questions/10474260/rewrite-rule-that-removes-query-string-from-url-and-redirect)的回答，我创建了以下 .htaccess 文件：

```
Options +FollowSymLinks
RewriteBase /
RewriteEngine On
RewriteCond %{QUERY_STRING} !=""
RewriteRule ^(.*) /$1? [R,L] 
```

…目标是采用这样的网址：

```
http://www.example.com/index.php?c=web 
```

……让它看起来像这样：

```
http://www.example.com/web 
```

按照 Salman A 的回答后，网址看起来像：

```
http://www.example.com/?c=web 
```

然后我在尝试剥离“？c =”部分时搞砸了一些东西——不幸的是，我不知道我搞砸了什么——然后我删除了 .htaccess 文件，因为我不想搞砸其他任何东西. 现在，即使没有 .htaccess 文件，一些 url - 特别是我在测试 Salman A 的答案时单击的三个 url - 仍然看起来像：

```
http://www.example.com/?c=web 
```

...即使我删除了 .htaccess 文件。三个问题：1）为什么尽管删除了 .htaccess 文件，更改仍然存在；2）这是我需要担心的事情吗？并且，3）如何修改 .htaccess 文件以使所有 url 看起来像：

```
http://www.example.com/web 
```

更新：这就是我担心的[http://getluky.net/2010/12/14/301-redirects-cannot-be-undon/](http://getluky.net/2010/12/14/301-redirects-cannot-be-undon/)。如果我搞砸了 301 重定向并且新访问者访问了该网站，他们会被这个垃圾所困扰吗？有没有办法取消缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:52:24.343

当您说*“获取这样的 url 并使其看起来像这样”*时，您的意思是让它在服务器上看起来像这样，还是在浏览器看起来像这样（两个完全不同的东西）。请参阅[此答案的顶部](https://stackoverflow.com/a/11711948/851273)以获得一些说明。

您实现的答案使**服务器**看到没有查询字符串的请求。在 URI`/index.php?c=web`通过 URL/文件映射管道后，mod_rewrite 生成: `/index.php`，删除查询字符串`?c=web`，最后 Web 服务器获取`/index.php`并提供它（无查询字符串）。当然，虽然这一切都在发生，但浏览器对所有这些 mod_rewrite 魔法一无所知，仍然显示它被告知要显示的相同 URL `http://www.example.com/index.php?c=web`，并且由于它从未被告知，这就是你仍然看到的 URL .

如果要更改**浏览器**看到的 URL，则需要从*外部将浏览器重定向到新的 URL*。你可以使用这样的东西：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD)\ /(index\.php)?\?c=([^&\ ]+)
RewriteRule ^ /%3? [L,R] 
```

所以当你的浏览器请求时`http://www.example.com/index.php?c=web`，这条规则会匹配查询字符串，并将**浏览器重定向**到结果`/web`，从而改变浏览器URL地址栏中的URL。浏览器现在看到这个新 URL，*向服务器发出一个新的请求以*获取这个新 URL。您可能希望将其改回原来的样子，因为我猜您确实没有目录或文件位于`/web`. 所以你这样做：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?c=$1 [L] 
```

这使得**服务器**`/index.php?c=web`可以在有人请求时看到`/web`。

# gcc - 在内联汇编的多个替代操作数约束之间进行选择时，GCC 可以发出不同的指令助记符吗？

> ID：13617962
> 
> 赞同：8
> 
> 时间：2012-11-29T02:38:36.473
> 
> 标签：gcc, inline-assembly

我正在尝试为 GCC 编写内联 x86-64 程序集以有效地使用 MULQ 指令。MULQ 将 64 位寄存器 RAX 与另一个 64 位值相乘。另一个值可以是任何 64 位寄存器（甚至是 RAX）或内存中的值。MULQ 将乘积的高 64 位放入 RDX，将低 64 位放入 RAX。

现在，很容易将正确的 mulq 表达为内联汇编：

```
#include <stdint.h>
static inline void mulq(uint64_t *high, uint64_t *low, uint64_t x, uint64_t y)
{
    asm ("mulq %[y]" 
          : "=d" (*high), "=a" (*low)
          : "a" (x), [y] "rm" (y)    
        );
} 
```

这段代码是正确的，但不是最优的。MULQ 是可交换的，所以如果`y`碰巧已经在 RAX 中，那么离开`y`它所在的位置并进行乘法是正确的。但是 GCC 不知道这一点，所以它会发出额外的指令来将操作数移动到它们预定义的位置。我想告诉 GCC，它可以将任一输入放在任一位置，只要一个以 RAX 结尾并且 MULQ 引用另一个位置。GCC 对此有一个语法，称为“多重替代约束”。请注意逗号（但整个 asm() 已损坏；见下文）：

```
asm ("mulq %[y]" 
      : "=d,d" (*high), "=a,a" (*low)
      : "a,rm" (x), [y] "rm,a" (y)    
    ); 
```

不幸的是，这是错误的。如果 GCC 选择第二个替代约束，它将发出“mulq %rax”。为了清楚起见，考虑这个函数：

```
uint64_t f()
{
    uint64_t high, low;
    uint64_t rax;
    asm("or %0,%0": "=a" (rax));
    mulq(&high, &low, 7, rax);
    return high;
} 
```

用 编译`gcc -O3 -c -fkeep-inline-functions mulq.c`，GCC 发出这个程序集：

```
0000000000000010 <f>:
  10:   or     %rax,%rax
  13:   mov    $0x7,%edx
  18:   mul    %rax
  1b:   mov    %rdx,%rax
  1e:   retq 
```

“mul %rax”应该是“mul %rdx”。

如何重写这个内联汇编，以便在每种情况下都生成正确的输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-07-03T23:30:08.120

这个 2012 年的问题在 2019 年仍然非常重要。虽然 gcc 发生了变化，并且生成的一些代码在 2012 年并不是最优的，但现在，反过来也成立。

受[Whitlock](https://stackoverflow.com/a/41797229/1137388)分析的启发，我`mulq`在 9 种不同的情况下进行了测试，其中每个`x`和`y`都是常数 ( `5`, `6`) 或内存中的值 ( , `bar`)或 ( , `zar`) 中的值：`rax``f1()``f2()`

```
uint64_t h1() { uint64_t h, l; mulq(&h, &l,    5,    6); return h + l; }
uint64_t h2() { uint64_t h, l; mulq(&h, &l,    5,  bar); return h + l; }
uint64_t h3() { uint64_t h, l; mulq(&h, &l,    5, f1()); return h + l; }
uint64_t h4() { uint64_t h, l; mulq(&h, &l,  bar,    5); return h + l; }
uint64_t h5() { uint64_t h, l; mulq(&h, &l,  bar,  zar); return h + l; }
uint64_t h6() { uint64_t h, l; mulq(&h, &l,  bar, f1()); return h + l; }
uint64_t h7() { uint64_t h, l; mulq(&h, &l, f1(),    5); return h + l; }
uint64_t h8() { uint64_t h, l; mulq(&h, &l, f1(),  bar); return h + l; }
uint64_t h9() { uint64_t h, l; mulq(&h, &l, f1(), f2()); return h + l; } 
```

我已经测试了 5 个实现：[Staufk](https://stackoverflow.com/q/13617962/1137388)、[Whitlock](https://stackoverflow.com/a/41797229/1137388)、[Hale](https://stackoverflow.com/a/15865187/1137388)、[Burdo](https://stackoverflow.com/a/19192527/1137388)和我自己的：

```
inline void mulq(uint64_t *high, uint64_t *low, uint64_t x, uint64_t y) {
    asm("mulq %[y]" : [a]"=a,a"(*low), "=d,d"(*high) : "%a,rm"(x), [y]"rm,a"(y) : "cc");
} 
```

所有实现仍然无法在所有情况下产生最佳代码。虽然其他人无法为`h3,` `h4`and生成最佳代码`h6`，但 Whitlock 和我的仅在以下情况下失败`h3`：

```
h3():
 callq 4004d0 <f1()>
 mov %rax,%r8
 mov $0x5,%eax
 mul %r8
 add %rdx,%rax
 retq 
```

在其他条件相同的情况下，可以看出我的比 Whitlock 的简单。使用额外级别的间接并使用 gcc 的内置函数（在 clang 中也可用，但我尚未测试），可以`h3`通过调用此函数而不是`mulq`：

```
inline void mulq_fixed(uint64_t* high, uint64_t* low, uint64_t x, uint64_t y) {
    if (__builtin_constant_p(x))
        mulq(high, low, y, x);
    else
        mulq(high, low, x, y);
} 
```

产量：

```
h3():
 callq 4004d0 <f1()>
 mov $0x5,%edx
 mul %rdx
 add %rdx,%rax
 retq 
```

使用的想法`__builtin_constant_p`实际上取自[gcc](https://gcc.gnu.org/onlinedocs/gcc/Multi-Alternative.html#Multi-Alternative)的文档：

> 模板中无法确定选择了哪个替代方案。但是，您可以使用内置函数（例如 __builtin_constant_p）来包装您的 asm 语句，以获得所需的结果。

[在Compiler Explorer](https://godbolt.org/z/L22pQ_)中亲自查看。

注意：Whitlock 的实现还有另一个更小的和意想不到的缺点。您需要在[Compiler Explorer中检查选项](https://godbolt.org/z/L22pQ_)*11010* ，否则输出会产生误导，并且 functions , ...,似乎使用了两次指令。这是因为 Compiler Explorer 的解析器没有[正确](https://github.com/mattgodbolt/compiler-explorer/issues/1470)处理汇编器指令//而只是将它们删除，同时显示了两个可能的路径（'s 和's）。或者，您可以取消选中选项*.text*。`h1``h9``mulq``.ifnc``.else``.endif` `.if``.else`

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T17:05:06.237

```
__asm__ ("mulq %3" : "=a,a" (*low), "=d,d" (*high) : "%0,0" (x), "r,m" (y)) 
```

这类似于您可以在`longlong.h`各种 GNU 软件包中找到的内容。`"r,m"`而不是`"rm"`真的为了clang的利益。[如此处所讨论的](https://stackoverflow.com/questions/16850309/clang-llvm-inline-assembly-multiple-constraints-with-useless-spills-reload)，多重约束语法对于 clang 似乎仍然很重要。真可惜，但我仍然发现 clang 在约束匹配方面（尤其是在 x86[-86] 上）比 gcc 做得更差。对于 gcc：

```
__asm__ ("mulq %3" : "=a" (*low), "=d" (*high) : "%0" (x), "rm" (y)) 
```

就足够了，并且有利于保留`(y)`在登记册中，除非登记册压力太大；但在许多情况下，clang似乎*总是溢出。*我的测试表明它将选择`"r"`多约束语法中的第一个选项。

`"%3"`作为*指令*中的被乘数，允许寄存器（首选）或内存位置，如*第三个*操作数的别名，*相对于零*，即`(y)`. `"0"`别名'第零'操作数：`(*low)`，它是明确`"a"`的，即`%rax`对于64位。中的前导`%`字符`"%0"`是交换运算符：也就是说，如果有助于寄存器分配，(x) 可以与 (y) 交换。显然，`mulq`可交换为：`x * y == y * x`。

我们实际上在这里受到了很大的限制。`mulq`将 64 位操作数乘以`%3`in 的值`%rax`以产生 128 位乘积：`%rdx:%rax`. 这`"0" (x)`意味着`(x)`必须加载到`%rax`，并且`(y)`必须加载到 64 位寄存器或内存地址。但是，`%0`意味着`(x)`，并且以下输入`(y)`可能会通勤。

我还会参考我发现的[最实用的内联汇编教程。](http://locklessinc.com/articles/gcc_asm/)虽然[gcc](https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#Extended-Asm)引用是“权威的”，但它们的教程很差。

* * *

感谢[Chris](https://stackoverflow.com/users/4303790/chris)发现我原来的约束排序中的错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-04T00:52:54.300

与关于内联 asm 语法的一般问题不同：

**对于 64x64 => 128-bit multiply ，您实际上并不需要内联汇编**。
GCC/clang/ICC 知道如何优化`a * (unsigned __int128)b`到一条`mul`指令。`__int128`如果您可以让编译器自己发出漂亮的 asm，那么 在两个 GNU C 扩展（内联 asm 与 **[https://gcc.gnu.org/wiki/DontUseInlineAsm](https://gcc.gnu.org/wiki/DontUseInlineAsm)**

```
unsigned __int128 foo(unsigned long a, unsigned long b) {
    return a * (unsigned __int128)b;
} 
```

[在 Godbolt 编译器资源管理器上](https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:'unsigned+__int128+foo(unsigned+long+a,+unsigned+long+b)+%7B%0A++++return+a+*+(unsigned+__int128)b%3B%0A%7D%0A%0A%0Aunsigned+long+umulhi64(unsigned+long+a,+unsigned+long+b)+%7B%0A++++unsigned+__int128+res+%3D+a+*+(unsigned+__int128)b%3B%0A++++return+res+%3E%3E+64%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:33.333333333333336,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:g91,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'1',libraryCode:'1',trim:'1'),lang:c%2B%2B,libs:!(),options:'-O3+-Wall',source:1),l:'5',n:'0',o:'x86-64+gcc+9.1+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),header:(),k:33.333333333333336,l:'4',m:100,n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:clang800,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'1',libraryCode:'1',trim:'1'),lang:c%2B%2B,libs:!(),options:'-O3+-Wall',source:1),l:'5',n:'0',o:'x86-64+clang+8.0.0+(Editor+%231,+Compiler+%232)+C%2B%2B',t:'0')),k:33.33333333333333,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',m:100,n:'0',o:'',t:'0')),version:4)编译 gcc/clang/ICC 到这个

```
# gcc9.1 -O3  x86-64 SysV calling convention
foo(unsigned long, unsigned long):
        movq    %rdi, %rax
        mulq    %rsi
        ret                         # with the return value in RDX:RAX 
```

或者返回高半部分

```
unsigned long umulhi64(unsigned long a, unsigned long b) {
    unsigned __int128 res = a * (unsigned __int128)b;
    return res >> 64;
}

        movq    %rdi, %rax
        mulq    %rsi
        movq    %rdx, %rax
        ret 
```

* * *

GCC 完全理解这里发生的事情，这`*`是可交换的，因此如果它只有一个在寄存器中，而没有另一个，它可以将任一输入用作内存操作数。

不幸的是，根据来自寄存器或内存的某些输入，AFAIK 通常不可能使用不同的 asm 模板。所以完全使用不同的策略（例如直接加载到 SIMD 寄存器而不是做一些整数）是不可能的。

多替代约束的东西非常有限，主要只适用于诸如 之类的指令的内存源版本与内存目标版本`add`，或类似的东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-22T23:14:53.627

Brett Hale 的[回答](https://stackoverflow.com/a/15865187/2709616)在某些情况下会产生次优代码（至少在 GCC 5.4.0 上）。

鉴于：

```
static inline void mulq(uint64_t *high, uint64_t *low, uint64_t x, uint64_t y) {
    __asm__ ("mulq %3" : "=a" (*low), "=d" (*high) : "%0" (x), "rm" (y) : "cc");
}

uint64_t foo(); 
```

然后`mulq(&high, &low, foo(), 42)`编译为：

```
 call    foo
    movl    $42, %edx
    mulq    %rdx 
```

…这是最佳的。

但现在颠倒操作数的顺序：

```
 mulq(&high, &low, 42, foo()); 
```

……看看编译后的代码会发生什么：

```
 call    foo
    movq    %rax, %rdx
    movl    $42, %eax
    mulq    %rdx 
```

哎呀！发生了什么？编译器坚持将 42 放入`rax`，因此它必须将返回值从`foo()`中移出`rax`。显然`%`（交换）操作数约束是有缺陷的。

有没有办法优化这个？事实证明是有的，虽然有点乱。

```
static inline void mulq(uint64_t *high, uint64_t *low, uint64_t x, uint64_t y) {
    __asm__ (
        ".ifnc %2,%%rax\n\t"
        "mulq %2\n\t"
        ".else\n\t"
        "mulq %3\n\t"
        ".endif"
        : "=a,a" (*low), "=d,d" (*high)
        : "a,rm" (x), "rm,a" (y)
        : "cc");
} 
```

现在`mulq(&high, &low, foo(), 42)`编译为：

```
 call    foo
    movl    $42, %edx
    .ifnc   %rax,%rax
    mulq    %rax
    .else
    mulq    %rdx
    .endif 
```

并`mulq(&high, &low, 42, foo())`编译为：

```
 call    foo
    movl    $42, %edx
    .ifnc   %rdx,%rax
    mulq    %rdx
    .else
    mulq    %rax
    .endif 
```

此代码使用汇编程序技巧来解决 GCC 不允许我们根据它选择的约束替代项发出不同的汇编代码的限制。在每种情况下，汇编器将只发出两条可能`mulq`指令中的一条，具体取决于编译器是否选择了 put`x`或`y`in `rax`。

可悲的是，如果我们将返回值乘以`foo()`内存位置的值，这个技巧就不是最理想的了：

```
extern uint64_t bar; 
```

现在`mulq(&high, &low, bar, foo())`编译为：

```
 call    foo
    .ifnc bar(%rip),%rax
    mulq bar(%rip)
    .else
    mulq %rax
    .endif 
```

…这是最佳的，但`mulq(&high, &low, foo(), bar)`编译为：

```
 movq    bar(%rip), %rbx
    call    foo
    .ifnc   %rax,%rax
    mulq    %rax
    .else
    mulq    %rbx
    .endif 
```

…不必要地复制`bar`到`rbx`.

不幸的是，我无法找到一种方法让 GCC 在所有情况下都输出最佳代码。为了调查，强制乘法器成为内存操作数只会导致 GCC 加载`bar(%rip)`到寄存器中，然后将该寄存器存储到临时堆栈位置，然后将其传递到`mulq`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-05T00:05:22.830

使用这样的技巧：

```
void multiply(unsigned& rhi, unsigned& rlo, unsigned a, unsigned b)
{
__asm__(
"    mull  %[b]\n"
:"=d"(rhi),"=a"(rlo)
:"1"(a),[b]"rm"(b));
} 
```

注意`"1"`输入操作数的参数规范`a`。这意味着“将'a'放入参数＃1所在的相同位置”。*

# storyboard - XCode 4 故事板

> ID：13617963
> 
> 赞同：1
> 
> 时间：2012-11-29T02:38:40.920
> 
> 标签：storyboard, save, xcode4, textfield

我在情节提要中创建了一个表格视图。当按下按钮时，我想在“标题栏”的右上角添加一个收藏按钮，它将链接到之前创建的表格视图。我想要的数据需要保存，当应用程序重新启动时，数据仍然存储在 tableview 单元格中。在表格视图中，可以使用“标题栏”左上角的另一个“编辑”按钮来编辑数据。我一直在寻找 pList 保存教程，但有些已经很老了。例如[https://www.youtube.com/watch?v=0DAoMl79b1A](https://www.youtube.com/watch?v=0DAoMl79b1A)

有人有代码/教程吗？

# r - 如何从R中的原始数据生成频率表

> ID：13617964
> 
> 赞同：3
> 
> 时间：2012-11-29T02:38:50.940
> 
> 标签：r, frequency

我是 R 新手。我想从原始数据（小数）生成频率表，例如：

```
x
      V1
1  10.10
2  46.65
3  53.60
4  38.50
5  45.95
6  12.25
7  59.60
8  23.30
9  11.05
10 58.35
11 40.20
12 11.05
13 10.45
14 26.45
15 13.25
16 21.15
17 35.00
18 29.05
19 25.40
20 47.20
21 42.45
22 57.30
23 55.65
24 56.50
25 26.95
26 59.65
27 32.10
28 29.00
29 34.75
30 21.65 
```

变成这样的东西：

```
Class            Frequency
(10.00 - 19.99)         6
(20.00 - 29.99)         8
(30.00 - 39.99)         4
(40.00 - 49.99)         5
(50.00 - 59.99)         7 
```

我使用下面的代码：

```
factorx<-factor(cut(x, breaks=nclass.Sturges(x))) 
```

但我得到这样的东西：

> cut.default(x,breaks = nclass.Sturges(x)) 中的错误：“x”必须是数字

我应该如何使'x'数字化？

按照要求：

> h <- dput(x) 结构(list(V1 = c(10.1, 46.65, 53.6, 38.5, 45.95, 12.25, 59.6, 23.3, 11.05, 58.35, 40.2, 11.05, 10.45, 26.45, 13.25, 21.15, 35, , 25.4, 47.2, 42.45, 57.3, 55.65, 56.5, 26.95, 59.65, 32.1, 29, 34.75, 21.65)), .Names = "V1", class = "data.frame", row.names = c(NA, -30L))

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T02:48:57.357

x 是一个数据框。x$V1 是数字。

```
factor(cut(x$V1, breaks=nclass.Sturges(x$V1))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T02:51:29.150

如果你知道你正在使用什么断点，你可以`hist`使用`plot=FALSE`

`hist`将返回直方图类对象（`h`在下面的示例中）。为您提供由参数`h$counts`定义的给定直方图单元格的频率。`breaks`

```
> x
 [1] 10.10 46.65 53.60 38.50 45.95 12.25 59.60 23.30 11.05 58.35 40.20 11.05 10.45 26.45 13.25 21.15 35.00 29.05 25.40 47.20
[21] 42.45 57.30 55.65 56.50 26.95 59.65 32.10 29.00 34.75 21.65
> h <- hist(x, plot=FALSE, breaks = c(10,20,30,40,50,60))
> h
$breaks
[1] 10 20 30 40 50 60

$counts
[1] 6 8 4 5 7

$intensities
[1] 0.02000000 0.02666667 0.01333333 0.01666667 0.02333333

$density
[1] 0.02000000 0.02666667 0.01333333 0.01666667 0.02333333

$mids
[1] 15 25 35 45 55

$xname
[1] "x"

$equidist
[1] TRUE

attr(,"class")
[1] "histogram"
> h$counts 
[1] 6 8 4 5 7 
```

即使您不知道休息时间，您也可以使用`hist`with`plot=FALSE`并获得不错的结果，因为休息时间的默认设置是“Sturges”

```
> h2 <- hist(x, plot=FALSE)
> h2$breaks
[1] 10 20 30 40 50 60
> h2$counts
[1] 6 8 4 5 7 
```

# c - 诅咒图书馆退格问题

> ID：13617967
> 
> 赞同：1
> 
> 时间：2012-11-29T02:39:10.823
> 
> 标签：c, curses

我试图在一个利用 Curses 库的简单窗口中实现删除字符。

基本上，窗口是使用以下边框代码创建的：

```
box(local_win, 0 , 0); // Set the border of the window to the default border style. 
```

稍后当我继续处理退格键时，我使用以下代码执行此操作：

```
initscr();
cbreak();
keypad(window, TRUE);
int ch; // The character pressed by the user.

while((ch = wgetch(window)) != EOF)
{
   switch(ch)
   {
      case KEY_BACKSPACE: // Handle the backspace.
      {
         wdelch(window); // Delete the character at the position in the window.

         wrefresh(window);
         refresh();
      }
   }
} 
```

虽然它确实删除了字符，但它最终会从边框中拉出右侧的垂直条，从而在边框上创建一个洞。我在这里做错了什么，还是在这种情况下，我必须在每次删除后手动插入一个空格，以便将边框保持在其初始位置。

感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:41:59.453

是的，您需要在竖线之前重新插入一个空格，或者（我不确定这是否可能）设置一个小于终端全宽的滚动区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:08:12.320

您可能想擦除而不是删除一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-19T15:20:49.173

curses 中通常的做法是创建子窗口，而不是尝试修复窗口。例如，可以创建一个在其`box`上绘制 的窗口，并创建一个子窗口（并且小于框），在该子窗口中绘制和更新文本*。*

这是一个示例程序（使用[`derwin`](http://invisible-island.net/ncurses/man/curs_window.3x.html)）：

```
#include <stdlib.h>
#include <curses.h>
#include <locale.h>

int
main(void)
{
    int ch;
    WINDOW *frame;
    WINDOW *display;
    int xf, yf;

    setlocale(LC_ALL, "");
    initscr();
    cbreak();
    noecho();

    frame = newwin(LINES - 5, COLS - 10, 2, 2);
    box(frame, 0, 0);
    wrefresh(frame);

    getmaxyx(frame, yf, xf);
    display = derwin(frame, yf - 2, xf - 2, 1, 1);

    keypad(display, TRUE);

    while ((ch = wgetch(display)) != ERR) {
        switch (ch) {
        case '\b':
        case KEY_BACKSPACE:
            getyx(display, yf, xf);
            if (wmove(display, yf, xf - 1) != ERR) {
                wdelch(display);
            }
            break;
        default:
            waddch(display, (chtype) ch);
            break;
        }
    }
    endwin();
    return EXIT_SUCCESS;
} 
```

# android - 无法在网格视图中显示来自 url 的图像

> ID：13617975
> 
> 赞同：0
> 
> 时间：2012-11-29T02:40:38.037
> 
> 标签：android, image, jsoup

您好我正在尝试在网格视图中显示从 url（使用 jsoup）获得的图像。它设法检索我要加载的图像数量，但不显示实际图像本身。实际图像不是音符

这是屏幕截图：

![在此处输入图像描述](../Images/2185ae5aae4d2873ef61601f8569c868.png)

这是我获取 url 并显示它的代码，我使用了“lazy gallery”：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gallery);

        this.setRequestedOrientation(
                ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        Button refresh = (Button)findViewById(R.id.btn_refresh);
        refresh.setOnClickListener(this);

        ImageButton home = (ImageButton)findViewById(R.id.btn_home);
        home.setOnClickListener(this);

        // Loading products in Background Thread
        new LoadThumbnails().execute();

        //Getting adapter and parse in results      
        list=(GridView)findViewById(R.id.list);
        adapter=new LazyAdapter(this, htmlList);        
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {        

                Intent intent = new Intent();
                intent.setClassName("com.scba", "com.scba.gallery.EnlargedImage");
                intent.putExtra("item", actualImage);
                startActivityForResult(intent, GET_INTENT_CODE);

                }
        }); 
    }

       /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadThumbnails extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
         @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(PhotoGallery.this);
            pDialog.setMessage("Loading" + "\n" + "Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        } 

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            try {

                Document doc = Jsoup.connect("http://www.s-cba.org.sg/events/2011/photo111001_en.shtml").get();
                //Elements trs = doc.select("td.text tr td");
                //remove header row

                /* for (int i = 0; i < 43; i++)
                    {
                    Element link = doc.select("td.text tr td a").get(i);
                    String relHref = link.attr("href");
                    //System.out.println("Blog: " + relHref);
                    } */

                    for (int c = 0; c < 43; c++)
                    {
                    Element link = doc.select("td.text tr td a img").get(c);
                    String url = link.absUrl("src");
                    System.out.println("Blog: " + url);

                    HashMap<String, String> map = new HashMap<String, String>();

                     // adding each child node to HashMap key => value
                    map.put("photo",url); 

                    // adding HashList to ArrayList
                    htmlList.add(map); 

                    //System.out.println(htmlList);
                    }

            } catch (IOException e) {
                e.printStackTrace();
            }
            return null;
        }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        adapter.notifyDataSetChanged();
    }
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if (v.getId() == R.id.btn_refresh)
        {
            photosList.clear();
            // Loading products in Background Thread
            new LoadThumbnails().execute();
        }
        else if(v.getId() == R.id.btn_home)
        {

            Intent intent = new Intent();
            intent.setClassName("com.scba", "com.scba.Menu");
            finish();

        }

    }
} 
```

这是 logcat 输出：

```
11-29 02:39:13.991: D/dalvikvm(167): GC_CONCURRENT freed 384K, 6% free 9533K/10119K, paused 20ms+5ms
11-29 02:39:16.392: I/ActivityManager(91): START {cmp=com.scba/.admin.Settings} from pid 777
11-29 02:39:16.400: W/WindowManager(91): Failure taking screenshot for (180x300) to layer 21010
11-29 02:39:16.500: V/PhoneStatusBar(143): setLightsOn(true)
11-29 02:39:16.631: I/ActivityManager(91): Displayed com.scba/.admin.Settings: +214ms
11-29 02:39:21.730: W/WindowManager(91): Failure taking screenshot for (180x300) to layer 21015
11-29 02:39:21.780: V/PhoneStatusBar(143): setLightsOn(true)
11-29 02:39:24.169: I/ActivityManager(91): START {cmp=com.scba/.gallery.PhotoGallery} from pid 777
11-29 02:39:24.189: W/WindowManager(91): Failure taking screenshot for (180x300) to layer 21010
11-29 02:39:24.319: V/PhoneStatusBar(143): setLightsOn(true)
11-29 02:39:24.719: I/Process(91): Sending signal. PID: 777 SIG: 3
11-29 02:39:24.719: I/dalvikvm(777): threadid=3: reacting to signal 3
11-29 02:39:24.949: I/dalvikvm(777): Wrote stack traces to '/data/anr/traces.txt'
11-29 02:39:25.119: D/dalvikvm(777): GC_FOR_ALLOC freed 1225K, 15% free 11137K/13063K, paused 98ms
11-29 02:39:25.209: I/ActivityManager(91): Displayed com.scba/.gallery.PhotoGallery: +1s9ms
11-29 02:39:26.569: D/dalvikvm(777): GC_CONCURRENT freed 781K, 17% free 10941K/13063K, paused 20ms+22ms
11-29 02:39:27.449: D/dalvikvm(777): GC_CONCURRENT freed 408K, 15% free 11106K/13063K, paused 21ms+9ms
11-29 02:39:27.769: I/dalvikvm(777): Total arena pages for JIT: 12
11-29 02:39:28.519: D/dalvikvm(777): GC_CONCURRENT freed 474K, 15% free 11226K/13063K, paused 21ms+53ms
11-29 02:39:28.639: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7278_s.jpg
11-29 02:39:28.659: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7300_s.jpg
11-29 02:39:28.709: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7302_s.jpg
11-29 02:39:28.729: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7326_s.jpg
11-29 02:39:28.739: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7335_s.jpg
11-29 02:39:28.759: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7363_s.jpg
11-29 02:39:28.809: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7400_s.jpg
11-29 02:39:28.829: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7411_s.jpg
11-29 02:39:28.839: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7418_s.jpg
11-29 02:39:28.859: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7424_s.jpg
11-29 02:39:28.869: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7610_s.jpg
11-29 02:39:28.919: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7647_s.jpg
11-29 02:39:28.941: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7657_s.jpg
11-29 02:39:28.959: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7672_s.jpg
11-29 02:39:28.969: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7734_s.jpg
11-29 02:39:29.039: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7767_s.jpg
11-29 02:39:29.059: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_7816_s.jpg
11-29 02:39:29.069: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8219_s.jpg
11-29 02:39:29.150: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8235_s.jpg
11-29 02:39:29.159: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8243_s.jpg
11-29 02:39:29.209: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8259_s.jpg
11-29 02:39:29.229: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8327_s.jpg
11-29 02:39:29.239: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8356_s.jpg
11-29 02:39:29.259: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8375_s.jpg
11-29 02:39:29.269: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8399_s.jpg
11-29 02:39:29.320: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8401_s.jpg
11-29 02:39:29.349: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8417_s.jpg
11-29 02:39:29.359: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8419_s.jpg
11-29 02:39:29.379: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8448_s.jpg
11-29 02:39:29.429: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8469_s.jpg
11-29 02:39:29.469: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8470_s.jpg
11-29 02:39:29.480: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8527_s.jpg
11-29 02:39:29.529: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8562_s.jpg
11-29 02:39:29.549: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8594_s.jpg
11-29 02:39:29.589: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8664_s.jpg
11-29 02:39:29.639: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8688_s.jpg
11-29 02:39:29.659: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8722_s.jpg
11-29 02:39:29.680: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8752_s.jpg
11-29 02:39:29.689: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8763_s.jpg
11-29 02:39:29.730: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8869_s.jpg
11-29 02:39:29.759: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8896_s.jpg
11-29 02:39:29.789: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/DSC_8939_s.jpg
11-29 02:39:29.799: I/System.out(777): Blog: http://www.s-cba.org.sg/events/2011/111001/IMG_5276_s.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:11:27.443

请在适配器的 getView() 方法中写入以下代码行。

```
imageLoader.DisplayImage(song.get("photo"), thumb_image); 
```

代替

```
imageLoader.DisplayImage(song.get(MainActivity.TAG_THUMBNAIL), thumb_image); 
```

它会解决你的问题。

# apache - 如何将 Rails 应用程序指向不同的目录？

> ID：13617977
> 
> 赞同：1
> 
> 时间：2012-11-29T02:40:46.080
> 
> 标签：apache, mod-rewrite

所以我有一个在 Rails 网站内运行的 WordPress 网站。所以目前，该站点的 wordpress 部分位于 dev.domain.com 中，而主站点位于 domain.com 中。我正在尝试使用 .htaccess 让主 domain.com 指向 /dev/ 文件夹的内容

所以这是我的htaccess代码

```
<IfModule mod_rewrite.c> 
RewriteEngine On 
RewriteRule ^index\.php$ - [L] 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . /dev/index.php [L] 
</IfModule> 
```

上面的代码将所有页面重定向到 /dev/ 站点，除了主页。所以 domain.com/some-page 可以工作，但索引页面不起作用。

关于如何解决这个问题的任何想法？

# actionscript-3 - 如何从库中动态添加对象？

> ID：13617978
> 
> 赞同：3
> 
> 时间：2012-11-29T02:40:49.273
> 
> 标签：actionscript-3, flash, movieclip

我在库中有一些电影剪辑，我想制作将它们加载到舞台的功能。我的问题是，除了为每个 MovieClip 制作单独的函数之外，我找不到不同的解决方案。我正在寻找类似的东西：

```
function addAnyClip(name){
  //create new object 'name'
  stage.addChild(chosenObject);
  rest of code
} 
```

因为它比：

```
function addClip1(){
  var mc1:Clip1 = new Clip1;
  stage.addChild(mc1);
  ///rest of code
}

function addClip2(){
  var mc1:Clip2 = new Clip2;
  stage.addChild(mc2);
  ///rest of code
}

function addClip3(){
  var mc1:Clip3 = new Clip3;
  stage.addChild(mc3);
  ///rest of code
}
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T02:57:58.673

研究使用`getDefinitionByName`

您将执行以下操作：

`var mcClass:Class = getDefinitionByName("NameOfClipInLibrary")`

然后只创建一个类类型的新对象`mcClass`

这里有几个链接可以帮助解释如何使用它... [http://www.jesseknowles.com/blog/dynamically_attaching_movieclips_in_as3/](http://www.jesseknowles.com/blog/dynamically_attaching_movieclips_in_as3/)

[http://www.emanueleferonato.com/2011/03/31/understanding-as3-getdefinitionbyname-for-all-eval-maniacs/](http://www.emanueleferonato.com/2011/03/31/understanding-as3-getdefinitionbyname-for-all-eval-maniacs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T03:00:30.787

这将巩固您在上面显示的内容：

```
function addChildOfType(type:Class):void{
    var mc:type = new type();
    stage.addChild(mc);
} 
```

使用这个只需调用：

```
addChildOfType(Clip1);
addChildOfType(Clip2);
addChildOfType(Clip3); 
```

编辑：

如果您的库是外部加载的 swf，则 @M. Laing 在如何获得它们方面是正确的。如果您的库是同一闪存文件中的闪存库，那么此答案将解决您的问题。

# linux - 用于解析列中数据的 Shell 脚本

> ID：13617981
> 
> 赞同：0
> 
> 时间：2012-11-29T02:40:56.607
> 
> 标签：linux, bash, shell

我需要一些关于家庭作业问题的帮助。我在需要解析的文件中有以下数据：

```
Output-------------------------- Input---------------- Random----
              -Per Char- --Block--- -Rewrite-- -Per Char- --Block--- --Seeks---
Machine    MB K/sec %CPU K/sec %CPU K/sec %CPU K/sec %CPU K/sec  %CPU /sec  %CPU
         50.0 36112 34.1 138026  1.9 179048  7.0 51361 51.1 312242  4.3 15211.4 10.3 
```

我需要的是一种从输出和输入列的 Block 列中提取数据的方法。例如：

```
Output Block:
K/sec: 138026
%CPU:  1.9

Input Block:
K/sec: 312242
%CPU:  4.3 
```

我仅限于使用 sed、awk、cut 和 grep。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:48:51.963

parse_data.txt:- 是数据所在的文件。

更多 parse_data.txt | grep -v "-" | sed 's/\ /\ /g' | awk '{打印 $4""$5""$10""$11}'

检索到关于输出和输入块的 CPU 和 k/sec 数据，如下所示，

**得到的输出是：**

```
 K/sec  %CPU K/sec  %CPU
 138026 1.9  312242 4.3 
```

希望这能解决你的问题！！！！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:39:21.017

由于奇怪的标题只有数据行有 13 个字段，所以你可以只使用 awk 单行：

```
awk '{if (NF==13) printf "Output Block:\nK/sec: %s\n%CPU:  %s\n\nInput Block:\nK/sec: %s\n%CPU:  %s\n",$4, $5, $10, $11 }' inputfilename 
```

如果你想在一个 shell 中解析多行

```
while read LINE || [ "$LINE" ]; do ... done < inputfile 
```

拆分一个字符串，你可以使用 read 再次像

```
read dummyvar dummyvar2 dummy3 outputkb ... <<< $mystring 
```

# ruby-on-rails - 缓存大量 ActiveRecord 对象

> ID：13617983
> 
> 赞同：0
> 
> 时间：2012-11-29T02:41:27.390
> 
> 标签：ruby-on-rails, caching, activerecord

在我的 Rails 应用程序中有一个经常调用的方法，可以从数据库中检索大约 200 个项目。我没有一次又一次地这样做，而是使用`Rails.cache.write`. 但是，当我使用 检索结果时`Rails.cache.read`，它仍然很慢：大约 400 毫秒。有什么办法可以加快这个速度吗？

这发生在控制器操作中，我希望用户不必等待很长时间来加载页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:10:29.433

关于 Rails 缓存的仅供参考，来自 Rails Guides，“......重要的是要注意查询缓存是在操作开始时创建并在操作结束时销毁，因此仅在操作期间持续存在。”

如果你能分享方法，我也许能更快地提供帮助。否则，有几个性能最佳实践：

*   用于`.includes`避免 N+1 查询。在模型中定义它并在控制器中调用它。
*   您的索引是如何设置的（如果有的话）？

# javascript - Chrome 扩展程序未正确更改 DOM

> ID：13617985
> 
> 赞同：1
> 
> 时间：2012-11-29T02:41:47.073
> 
> 标签：javascript, jquery, dom, google-chrome-extension

我刚开始 chrome 扩展编程。我在js和html编程方面有一些经验。作为我的第一个扩展，我想摆脱 facebook 上的广告栏。它是一个带有“ego-column”类的 div。这是我的代码：

```
{
 "name": "DOM",
    "version": "1.0",
    "manifest_version": 2,
    "description": "Change DOM",
    "browser_action": {
    "name": "Manipulate DOM",
    "icons": ["icon.png"],
    "default_icon": "icon.png"
  },
    "content_scripts": [ {
        "js": [ "jquery.min.js", "background.js" ],
        "matches": [ "http://*/*", "https://*/*"]
    }]
}

background.js:
$("body").css("background-color","green");
$(".ego-column").empty(); 
```

背景颜色正确地变为绿色（非常漂亮:) 但“自我列”没有任何变化。知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:44:51.817

你拼错了类名。应该是`ego_column`。所以固定的代码将是：

`$(".ego_column").empty();`

# html - 相当于 Flask 中 Django 的 raw_post_data，用于访问 HTML5 上传

> ID：13617994
> 
> 赞同：0
> 
> 时间：2012-11-29T02:43:00.737
> 
> 标签：html, flask

我正在尝试使用 HTML5`<input type="file"/>`将文件上传到运行 Flask 的服务器。

有[一篇不错的文章](http://blog.new-bamboo.co.uk/2010/07/30/html5-powered-ajax-file-uploads)解释了如何做到这一点。但是，它建议使用以下方法获取已发送到服务器的数据：

```
PHP: $_SERVER['HTTP_X_FILE_NAME']
Rails：request.env['HTTP_X_FILE_NAME']
Django：request.META['HTTP_X_FILE_NAME']

```

不幸的是，我不知道 Flask 中上述内容的等价物。根据我的阅读，我尝试过：

1.  请求数据
2.  request.stream.read()
3.  request.input_stream.read()
4.  [request.input_stream.read(request.headers.get('content-type', type=int) or 0)](https://github.com/mitsuhiko/flask/issues/110)

不幸的是，似乎没有一个按预期工作。

我正在使用 Chrome 上传文件：

```
var xhr = new XMLHttpRequest();
xhr.open('POST', '/upload/uri', true);
xhr.send(file); 
```

在 Chrome 中，在我启动传输后，在开发人员工具中此给定 POST 的网络传输**标题**`Content-Length`下，设置为正在上传的文件的大小 - 这表明文件实际上正在发送。

我想知道如何访问在 Flask 中发送的文件，或者人们可能更喜欢如何将 HTML5 文件发送到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:59:30.113

你看到[你引用的文章的更新了](http://blog.new-bamboo.co.uk/2012/01/10/ridiculously-simple-ajax-uploads-with-formdata)吗？您现在可以使用`FormData`并避免以不同于浏览器上传的方式处理 AJAX 上传：

引用文章：

```
var form = document.getElementById('form-id');
var formData = new FormData(form); 
```

> 这个新的 FormData 实例是您传递`send()`调用所需的全部内容：

```
var xhr = new XMLHttpRequest();
// Add any event handlers here...
xhr.open('POST', '/upload/path', true);
xhr.send(formData); 
```

> 这将发送一个 Ajax 请求，其中包含表单的所有字段，而不仅仅是文件输入。如果还有文本区域、文本字段、复选框或你有什么，它们也会被发送。您可能正在收听的任何事件都将被调用，例如`onprogress`或`onreadystatechange`。

# javascript - 使用 jQuery.extend 合并现有元素

> ID：13617996
> 
> 赞同：1
> 
> 时间：2012-11-29T02:43:10.353
> 
> 标签：javascript, jquery, json

[`jQuery.extend()`](http://api.jquery.com/jQuery.extend/)有助于以如下方式合并对象：

```
var a = {
    'x': 2,
    'y': 3,
    'etc': {
        'm': 3,
        'n': 5
    }
};
var b = {
    'x': 4,
    'z': 1,
    'etc': {
        'm': 2,
        'p': 3
    }
};

$.extend(true, a, b); // true for recursively merge
/* Result:
    a = {
        'x': 4,
        'y': 3,
        'z': 1,
        'etc': {
            'm': 2,
            'n': 5,
            'p': 5
        }
    };
*/ 
```

但我感兴趣的只是已经存在于 中的属性`a`，这意味着，例如，如果`z`不是 的属性`a`，则它不应该出现在结果中。所以预期的结果应该是：

```
a = {
    'x': 4,
    'y': 3,
    'etc': {
         'm': 2,
         'n': 5,
     }
}; 
```

我想知道是否有一种简单的方法可以使用 jQuery 实现这一点，或者只能使用像这样的蛮力来实现（`a`在最多 2 层的条件下）：

```
for (var i in b) {
    if (a.hasOwnProperty(i)) {
        if (typeof a[i] === 'object') {
            for (var j in b[i]) {
                if (a[i].hasOwnProperty(j)) {
                    a[i][j] = b[i][j];
                }
            }
        } else {
            a[i] = b[i];
        }
    }
} 
```

### 演示：http: [//jsfiddle.net/hUkAS/3/](http://jsfiddle.net/hUkAS/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:11:09.403

我不知道这样的函数，但我写了一个通用函数，它将合并两个对象（散列）宽度任意数量的层。

```
//The function
function leftMerge(a, b) {
    for (var i in b) {
        if (a.hasOwnProperty(i)) {
            console.log(typeof a[i]);
            if (typeof a[i] == 'object' && typeof b[i]== 'object')
                leftMerge(a[i], b[i]);
            else
                a[i] = b[i]
        }
    }
}

// a test
var obj_a = {
    'x': 2,
    'y': 3,
    'etc': {
        'm': 3,
        'n': 5,
        'j': {
            'h': 15,
            'i':16
        }
    }
};
var obj_b = {
    'x': 4,
    'z': 1,
    'etc': {
        'm': 2,
        'p': 3,
        'j': {
            'i':2,
            'l':22
        }
    }
};

leftMerge(obj_a, obj_b);
console.log(obj_a); 
```

我希望这会有所帮助。