# StackOverflow 问答 15276000-15276999

# apache - 在 http://www.mywebsite.com 和 http://mywebsite.com 之间切换时出现 Cookie 和图像加载问题

> ID：15276002
> 
> 赞同：0
> 
> 时间：2013-03-07T16:08:24.440
> 
> 标签：apache, .htaccess, cookies

我遇到了一些关于 cookie 和图像的问题。当我在`http://www.mywebsite.com`和之间切换时，问题似乎出现了`http://mywebsite.com`。例如，我设置了一些登录“记住我”cookie——如果我访问`www`并登录，cookie 就可以正常工作。我一`www`拿走，饼干就消失了。Chrome 中的快速检查元素显示 cookie 列在域下`www.mywebsite.com`，一旦我切换，它们就会消失。

我想知道这是否可能是 Apache 配置问题或其他问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:10:43.303

这是设计使然。`www.domain.com`并且`domain.com`是不同的域。在 中设置的 cookie`www.domain.com`将不可见`domain.com`。

虽然可以更改行为以使 cookie 覆盖 的所有子域`domain.com`，但这样做确实没有意义。解决此问题的常用方法是强制执行*其中*之一 - 即。将所有`domain.com`流量重定向到`www`或相反。避免重复内容也很重要

# android - 强制关闭 - LayoutInflater

> ID：15276003
> 
> 赞同：1
> 
> 时间：2013-03-07T16:08:35.603
> 
> 标签：android, layout, dynamic

这是我的文件代码，旨在使用布局动态添加视图

我指的是[http://maxmakedesign.co.uk/how-to/80/android-add-views-in-a-loop](http://maxmakedesign.co.uk/how-to/80/android-add-views-in-a-loop)

```
package com.example.database;
import java.io.File;
import java.util.ArrayList;
import java.util.List;

import android.util.Log;
import android.view.View.OnClickListener;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Environment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class Dynamic extends Activity 
{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_dynamic);

String[] info = new String[2];
info[0] = "info 1";
info[1] = "info 2";

LayoutInflater layoutInflator = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
LinearLayout insertPoint = (LinearLayout) findViewById(R.id.insert_point);
List views = new ArrayList();

for(int i1=0; i1 < info.length; i1++)
{
    View view = layoutInflator.inflate(R.layout.activity_dynamic, null);
    TextView textView = (TextView) view.findViewById(R.id.a_text_view);
    textView.setText(info[0]);  /* if I comment this out , no force close */

    //views.add(view);
}
/*
for(int i = 0; i< views.size(); i++)
{
    insertPoint.addView((View) views.get(i));
}*/

}

} 
```

如果我注释掉“textView.setText(info[0]);” 我没有用力接近。但是，有了它，我做到了。我想知道为什么？

这是我的 Logcat 文本：

```
> 03-07 21:26:04.880: E/Trace(20025): error opening trace file: No such file or directory (2)
03-07 21:26:05.681: D/libEGL(20025): loaded /system/lib/egl/libEGL_adreno200.so
03-07 21:26:05.691: D/libEGL(20025): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
03-07 21:26:05.701: D/libEGL(20025): loaded /system/lib/egl/libGLESv2_adreno200.so
03-07 21:26:05.711: I/Adreno200-EGL(20025): <qeglDrvAPI_eglInitialize:294>: EGL 1.4 QUALCOMM build: AU_LINUX_ANDROID_JB.04.01.01.00.036_msm8960_JB_CL2644550_release_AU (CL2644550)
03-07 21:26:05.711: I/Adreno200-EGL(20025): Build Date: 07/31/12 Tue
03-07 21:26:05.711: I/Adreno200-EGL(20025): Local Branch: 
03-07 21:26:05.711: I/Adreno200-EGL(20025): Remote Branch: quic/master
03-07 21:26:05.711: I/Adreno200-EGL(20025): Local Patches: NONE
03-07 21:26:05.711: I/Adreno200-EGL(20025): Reconstruct Branch: AU_LINUX_ANDROID_JB.04.01.01.00.036 +  NOTHING
03-07 21:26:05.771: D/OpenGLRenderer(20025): Enabling debug mode 0
03-07 21:27:38.542: E/Trace(20165): error opening trace file: No such file or directory (2)
03-07 21:27:38.952: D/AndroidRuntime(20165): Shutting down VM
03-07 21:27:38.952: W/dalvikvm(20165): threadid=1: thread exiting with uncaught exception (group=0x41bf3300)
03-07 21:27:38.952: E/AndroidRuntime(20165): FATAL EXCEPTION: main
03-07 21:27:38.952: E/AndroidRuntime(20165): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.database/com.example.database.Dynamic}: java.lang.NullPointerException
03-07 21:27:38.952: E/AndroidRuntime(20165):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2190)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2215)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at android.app.ActivityThread.access$600(ActivityThread.java:145)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1211)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at android.os.Looper.loop(Looper.java:137)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at android.app.ActivityThread.main(ActivityThread.java:4978)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at java.lang.reflect.Method.invokeNative(Native Method)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at java.lang.reflect.Method.invoke(Method.java:511)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at dalvik.system.NativeStart.main(Native Method)
03-07 21:27:38.952: E/AndroidRuntime(20165): Caused by: java.lang.NullPointerException
03-07 21:27:38.952: E/AndroidRuntime(20165):    at com.example.database.Dynamic.onCreate(Dynamic.java:48)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at android.app.Activity.performCreate(Activity.java:5008)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-07 21:27:38.952: E/AndroidRuntime(20165):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-07 21:27:38.952: E/AndroidRuntime(20165):    ... 11 more
03-07 21:27:40.253: I/Process(20165): Sending signal. PID: 20165 SIG: 9
03-07 21:32:47.353: E/Trace(20649): error opening trace file: No such file or directory (2)
03-07 21:32:47.613: D/AndroidRuntime(20649): Shutting down VM
03-07 21:32:47.613: W/dalvikvm(20649): threadid=1: thread exiting with uncaught exception (group=0x41bf3300)
03-07 21:32:47.613: E/AndroidRuntime(20649): FATAL EXCEPTION: main
03-07 21:32:47.613: E/AndroidRuntime(20649): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.database/com.example.database.Dynamic}: java.lang.NullPointerException
03-07 21:32:47.613: E/AndroidRuntime(20649):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2190)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2215)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at android.app.ActivityThread.access$600(ActivityThread.java:145)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1211)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at android.os.Looper.loop(Looper.java:137)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at android.app.ActivityThread.main(ActivityThread.java:4978)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at java.lang.reflect.Method.invokeNative(Native Method)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at java.lang.reflect.Method.invoke(Method.java:511)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at dalvik.system.NativeStart.main(Native Method)
03-07 21:32:47.613: E/AndroidRuntime(20649): Caused by: java.lang.NullPointerException
03-07 21:32:47.613: E/AndroidRuntime(20649):    at com.example.database.Dynamic.onCreate(Dynamic.java:48)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at android.app.Activity.performCreate(Activity.java:5008)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-07 21:32:47.613: E/AndroidRuntime(20649):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-07 21:32:47.613: E/AndroidRuntime(20649):    ... 11 more
03-07 21:32:49.075: I/Process(20649): Sending signal. PID: 20649 SIG: 9 
```

activity_dynamic.xml 的内容是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/insert_point"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/add"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_marginLeft="22dp"
    android:text="Add View" />

</LinearLayout> 
```

任何帮助表示赞赏！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:13:23.127

因为您需要添加一个带有 id`TextView`的`activity_dynamic`布局`a_text_view`。`activity_dynamic`在布局中添加一个 TextView为：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/insert_point"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/add"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_marginLeft="22dp"
    android:text="Add View" />
<TextView
    android:id="@+id/a_text_view"  <!-- TextView id here -->
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    <!-- other TextView Attributes... -->

   />

</LinearLayout> 
```

# crystal-reports - 历时水晶公式

> ID：15276009
> 
> 赞同：0
> 
> 时间：2013-03-07T16:08:45.337
> 
> 标签：crystal-reports, formula

我希望在报告上花费时间，我正在使用它，但它不起作用——还有其他建议吗？

如果不是 isnull({table1.end_time}) 而不是 isnull({table1.start_time}) 那么 TimeValue({table1.end_time}) - TimeValue({table1.start_time})

我也试过这个

如果不是 isnull({table1.end_time}) 而不是 isnull({table1.start_time}) 则 Minute({table1.end_time}) - Minute({table1.start_time})

我需要先转换时间吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:12:17.997

试试我写的[ElapsedTime](http://cogniza.com/wordpress/2005/11/29/crystal-reports-elapsedtime-function/)函数。

# asp.net - 当 GridView 在 EditItemTemplate 中时，GridView DataKeys 集合为空

> ID：15276014
> 
> 赞同：2
> 
> 时间：2013-03-07T16:09:02.347
> 
> 标签：asp.net, .net, gridview

全部，

仅供参考：我使用的是 VS2005，.net 2.0。

我有一个存在于 FormView EditItemTemplate 中的 GridView 控件。不幸的是，GridView 在该设置中行为不端，当页面回发并且触发 gridview 的选择命令时，其 DataKeys 集合为空。

以下是事件的顺序：

1.  用户浏览页面
2.  用户单击“编辑”（FormView 呈现 GridView 所在的 EditItemTemplate）
3.  用户单击再次回发的搜索并填充位于 EditItemTemplate 中的 GridView（此时 GridView 具有 DataKeys）
4.  用户从引发行选择事件的 GridView 中选择项目
5.  在回发时，GridView RowCommand 触发，-我检查 CommandName = "select" 并运行我的代码，该代码抛出异常，因为此时 DataKeys 集合为空！

另一个细节：GridView 位于 FormView 的 EditItemTemplate 中的用户控件中。

笔记：

当我将 GridView 移出 FormView 的 EditItemTemplate 时，我能够解决此问题，现在 DataKeys 集合不为空。不幸的是，GridView 必须在 EditItemTemplate 中，以便用户选择他搜索的客户端。

任何见解将不胜感激。

事件处理代码：

```
protected void ctlSearchResults_RowCommand(object sender, GridViewCommandEventArgs e)
{
    // user has selected the client from the keyword search result list
    if (e.CommandName == "select")
    {
        GridView searchResultsGrid = (GridView)e.CommandSource;
        int selectedRowIndex = int.Parse((string)e.CommandArgument);
        int clientId = (int)searchResultsGrid.DataKeys[selectedRowIndex][Client.PROP_ENTITYID];
        // raise Selected event
        _OnSelected(new ClientSelectedEventArgs(clientId));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:00:26.933

DataKey 集合为空的原因是您在搜索结果gridview 的数据绑定之前访问该集合。我发现[本](http://msdn.microsoft.com/en-us/library/ms178472.aspx#databindingevents)指南在调试处理问题的顺序时很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:43:08.950

我相信您想将 sender 转换为 GridView，如下所示：

```
GridView searchResultsGrid = sender as GridView; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T18:35:40.137

> 尝试这个：

```
int selectedRowIndex = Convert.ToInt32(e.CommandArgument);
int clientId = Convert.ToInt32(this.yourGridView.DataKeys[selectedRowIndex]["yourDataKey"].Value); 
```

# javascript - 在resharper中禁用javascript分析？

> ID：15276015
> 
> 赞同：27
> 
> 时间：2013-03-07T16:09:03.410
> 
> 标签：javascript, resharper

当我在 VS2012 项目中使用 extjs javascript 库时，resharper 似乎成为了开发的障碍——VS 响应慢、内存使用量大、Ctrl+N、Ctrl+F12 给了我很多无用的选项。我喜欢 c# 开发的 resharper，但不喜欢 js。

如何禁用 javascript 分析并离开 c#？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-06-05T12:13:41.133

我们一直在优化性能，我希望在 9.0 中会更好，但目前在 8.1 中，您可以通过关闭 ReSharper 中的选项“JavaScript”和“TypeScript”来完全禁用 ReSharper 中的 JavaScript 支持 | 选项 -> 环境 | 语言。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-14T15:51:28.187

[TypeScript 1.8 是 VS 2013 支持的最后一个版本](https://github.com/Microsoft/TypeScript/issues/11214#issuecomment-250311555)

[下载最新版本的 TypeScript for Visual Studio 2013 是 1.8.5](https://www.microsoft.com/en-us/download/details.aspx?id=48739)

如果您使用 Resharper 来获得正确的语法突出显示，则需要禁用它对 TypeScript 的支持，以便改用 VS 2013 TypeScript。

在 Resharper 8.2 中导航到 ReSharper |`Options - Environment - Languages`

[![在此处输入图像描述](../Images/837cb05f842bb6afe474f592a63cbda5.png)](https://i.stack.imgur.com/Wm8Gp.png)

在 Resharper 9.2 中导航到 ReSharper |`Options - Environment - Products & Features`

[![在此处输入图像描述](../Images/63242ce23bc77af7dc2b2e6af0dee0b4.png)](https://i.stack.imgur.com/R7Ka7.png)

这是必需的，因为 ReSharper 只能识别 TypeScript 1.6 版本的语法。

[![在此处输入图像描述](../Images/d033aef87b84974ee3953af51ce7cb63.png)](https://i.stack.imgur.com/e7v95.jpg)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-15T14:07:47.617

我对 Typescript 有同样的问题。您可以保留 ReSharper，但删除您不喜欢它处理的文件类型，方法是将其添加为第三方代码，就像我在屏幕截图中为 typescript 所做的那样。

[![在此处输入图像描述](../Images/f31e108fd9ba594e5854c9c891fd9585.png)](https://i.stack.imgur.com/nyJM8.png)

# visual-studio-2012 - AnkhSVN 设置菜单未在 VS2012 中显示

> ID：15276020
> 
> 赞同：19
> 
> 时间：2013-03-07T16:09:23.647
> 
> 标签：visual-studio-2012, ankhsvn

我想更改 AnkhSVN 在 VS2012 中使用的比较工具，但“Subversion Environment”和“Subversion User Tools”菜单没有像在 VS2010 中那样显示。

这是我应该看到的：

![我应该看到的](../Images/38acbe6ead14ad38363be2d3b40d0bac.png)

但这就是我在 VS2012 中看到的：

![实际看到](../Images/6c7f56b4e2fdfbf7657a27b0263be39f.png)

这是 AnkhSVN v 2.4.11610.27 （创建此问题时的最新稳定版本）。

我正在使用 VS2012 Ultimate，但大概任何支持插件的 VS2012 版本也会出现此问题。

我的电脑上也安装了 TortoiseSVN，但我怀疑它与这个问题有关。

我试过重新安装 AnkhSVN 插件，但这并没有改变它。除了这个问题，AnkhSVN 插件似乎工作正常。

我无法在 CollabNet 网站上找到任何提及此问题的内容。

你知道如何让这些菜单项出现吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T17:14:31.957

我确定这是否适用于所有人，但我发现完全卸载/重新安装 AnkhSVN 为我解决了问题，并在安装过程中进入高级并确保选择了 VS2012。

在此之前我尝试过维修，但并没有解决问题。它需要在高级中选择 VS2012 进行卸载/重新安装。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-20T19:24:02.127

这发生在我身上是因为 AnkhSVN 不是我活跃的源代码控制提供者。查看工具->选项->源代码控制并选择 AnkhSVN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T12:22:54.810

我已经按照下面提到的步骤解决了这个问题。

1.选择VS2012卸载/重新安装。

2.转到VS->工具->选项->源代码并选择AnkhSVN作为源代码控制插件。

# cookies - Cookie 是由哪个以及如何创建的？

> ID：15276022
> 
> 赞同：0
> 
> 时间：2013-03-07T16:09:25.177
> 
> 标签：cookies, nginx, php

我正在使用 nginx，php-fpm。

我想知道哪个进程负责创建cookie？

以及 cookie 文件保存在服务器上的什么位置？

像 php 这样的脚本语言可以动态更改它的保存位置吗？

```
root     10696  0.0  0.1  45240  3232 ?        Ss    2012   0:00 nginx: master process /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf
www      14616  0.0  0.1  45240  3164 ?        S    18:00   0:00 nginx: worker process
root     10517  0.0  0.3 228960  7584 ?        Ss   Mar06   0:00 php-fpm: master process (/usr/local/php/etc/php-fpm.conf)       
www      11450  0.0  1.4 247772 28948 ?        S    Mar06   0:51 php-fpm: pool www                                               
www      11471  0.0  1.8 252888 35876 ?        S    Mar06   0:50 php-fpm: pool www                                               
www      14268  0.1  1.7 250200 33140 ?        S    16:52   0:30 php-fpm: pool www                                               
root     15566  0.0  0.0  61296   764 pts/2    S+   23:11   0:00 grep php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:44:20.193

首先，cookie 不会存储在服务器上。Cookie 存储在用户 PC 上。另一方面，会话保存在服务器上。您可以通过检查 php.ini 文件并查找名为 session.save_path 的设置来找到它们的存储位置

至于哪个进程，它将是调用脚本的那个进程。这几乎是无法追踪的。

# android - Android GCM 部分设备未注册

> ID：15276033
> 
> 赞同：7
> 
> 时间：2013-03-07T16:10:02.380
> 
> 标签：android, google-cloud-messaging

我在 Google Play 中有一个应用程序，下载量为 5000。

在这 5000 个中，有 900 个未能在我的服务器上存储 GCM 注册 ID。

我担心有 18% 的失败率，并且正在努力找出为什么会发生这种情况。将 ID 传递到我的服务器并存储绝对不是问题，所以我认为这一定是注册失败。有没有人在他们的项目中遇到过这样的事情？代码如下：

```
// Fired every time the app is booted in Main Activity
private void setupGCM()
{
    String gcmRegId = GCMRegistrar.getRegistrationId(this);
    if (gcmRegId.equals(""))
    {
        GCMRegistrar.register(this, AppProperties.GCM_SENDER_ID);
    } else
    {
        // This is well tested and is not the issue
        ServerUtils.sUpdatePushToken(this, gcmRegId);
    }
}

// GCMIntentService Class onRegistered
@Override
protected void onRegistered(Context context, String registrationId)
{
    mContext = context;
    if (!registrationId.equals(""))
    {
        AppProperties.GCM_REGISTRATION_ID = registrationId;
        new UpdateGCMRegistrationIdAsync().execute();
    } else
    {
        GCMRegistrar.setRegisteredOnServer(context, false);
    }
}

// GCMIntentService Class  My Async class for updating Reg Id
private class UpdateGCMRegistrationIdAsync extends AsyncTask<Integer, Integer, Void>
{
    @Override
    protected Void doInBackground(Integer... params)
    {           
        ServerUtils.sUpdatePushToken(mContext, AppProperties.GCM_REGISTRATION_ID);
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T00:41:28.947

我刚刚处理了一个可能与您的问题相同的问题。Android 低于 4.1 的设备无法在 GCM 中注册。这是我来自 android-gcm 谷歌组的帖子：

```
Ok, got it solved. Thanks to J.Carlos Navea and Mark Murphy in this thread:
https://groups.google.com/forum/?fromgroups=#!searchin/android-gcm/onRegister/android-gcm/CqMRN4gVRpY/AGphcX1AuhgJ

The issue was the <category> tag in the receiver declaration. It is required for anything less than 4.1
Use your package name there. Additionally, check to make sure that the <permission> and <uses-permission>
tags use the same string/name. I was getting away with that one as well on 4.1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:34:11.910

有些事情会使 GCM 不起作用，例如：

未同步的谷歌帐户。

在 Android 3.2+ 中，当用户“强制停止”应用程序时，gcm 也不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-09T15:14:23.613

你在处理GCM注册失败的情况吗？如果您使用 GCMIntentService，请确保您正在实施以下内容：

```
@Override
protected void onError(Context context, String regid) {
   // Handle error condition.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-04T09:04:27.343

我有同样的问题，有些设备没有注册，我检查了我的清单，这是包裹名称的问题，仔细检查

# php - 这个怎么提取？

> ID：15276034
> 
> 赞同：0
> 
> 时间：2013-03-07T16:10:03.427
> 
> 标签：php, regex

我有几个 PHP 文件，我想在不使用 PHP 引擎的情况下手动解析数组的值。

它们看起来像这样：

```
$LANG['help']['attribute_label'] = 'Label'; 
```

而其他的只有一个属性，像这样：

```
$LANG['adm_something'] = 'Label'; 
```

我需要从所有行中提取没有引号的“标签”。我还没有找到匹配的正则表达式模式。我也愿意接受其他选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:26:30.537

```
preg_match_all("/(\\\$[^=]*)[\s\t\r\n]*=[\s\t\r\n]*([^\r\n]*);/s", file_get_contents('-- PUT THE FILE NAME HERE--'), $matches);
$results = array();
foreach ($matches[1] as $key=>$var) {
    $results[trim($var)] = trim(trim($matches[2][$key], '\'"'));
}
var_dump($results); 
```

这将找到文件中的所有变量声明，使用单引号或双引号，以及整数值（它们不一定需要在引号中）甚至数组。请注意，它仅适用于整个值在一行上的情况 - 并且总体上正则表达式非常愚蠢。但它应该适用于这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:28:13.913

```
preg_match_all('/= \'(.+)\';/', '$LANG[\'help\'][\'attribute_label\'] = \'Label\';', $matches );

print_r( $matches );

Array
(
[0] => Array
    (
        [0] => = 'Label';
    )

[1] => Array
    (
        [0] => Label
    )
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:19:14.397

```
preg_match("/\\\$LANG['a-zA-Z\[\]_]*\s=\s\'([A-Za-z0-9]+)/", $line, $matches); 
```

`$matches[1]`在两种提供的情况下都将包含单词 Label

# javascript - 在 iframe 中加载 jQuery 并使用它的 ajax

> ID：15276035
> 
> 赞同：0
> 
> 时间：2013-03-07T16:10:11.937
> 
> 标签：javascript, jquery, ajax, post, iframe

我已经为跨域请求创建了带有 iframe 的 hta 应用程序，因为我无法启动自己的服务器来代理这些请求。

在主页上，我插入了“受害者”网站的 jQuery 脚本和 iframe，例如：google.com

```
<iframe name="iframe" src="http://google.com" application="yes"></iframe> 
```

现在我必须通过该 iframe 执行 AJAX POST 请求，这是代码：

```
var frame = document.frames.iframe;
frame.$ = $
frame.$.ajax({
    type : 'post'
    url : 'http://google.com'
    data : 'blablabla'
}); 
```

但是 iframe 给了我“无传输”错误。但是当我在受害者页面上做脚本元素时，一切都很好，例如：

```
var frame = document.frames.iframe.document;
var el = frame.createEelement('SCRIPT');
el.src = "file://urlToJs.js";
frame.appendChild(el); 
```

这个例子一切正常，但我没有工作互联网（我们与本地站点合作）......并创建另一个js文件来加载我也不想要。

请帮帮我！

我试过的：

*   获取脚本元素文本 (document.scripts[0].innerHTML) 并使用 iframe 中的文本创建脚本 [错误]
*   document.frames.iframes.$ = parent.$ [也不起作用，没有传输错误]

似乎 jQuery ajax 总是使用主页来创建请求，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T17:07:52.293

jquery 收集脚本加载所需的一切。

您可以在 jquery 源文件中看到类似的内容：

```
(function factory( window ){ // a huge closure around the entire file
    var doc = window.document;

    window.$ = function(){
        // do something with the "doc"
    }
})( window );  // <- init with current window 
```

所以无论你在哪里分配变量 $，“文档”都不会改变。

jquery 这样做是为了解决性能问题（也许是其他的？

您需要编辑 jquery 源，提取“工厂”功能...

> ( 函数工厂(){} )() ==提取==> 函数工厂(){}

并用 iframe 的窗口调用它

> 工厂（iframe.contentWindow）；

然后您可以根据需要使用 iframe.contentWindow.$ 。

# perl - 在 Windows 上使用 perl 读取密码

> ID：15276040
> 
> 赞同：0
> 
> 时间：2013-03-07T16:10:23.083
> 
> 标签：perl, stty

我们有一个 perl 脚本，在我们使用 stty 读取密码。由于 stty 在 Windows 上不可用，因此此脚本失败。我们做了一些搜索，发现 ReadKey 是一个替代方案。但是，我们默认情况下不提供此包裹。

有什么方法可以在不使用 stty 和 ReadKey 的情况下在 perl 中读取密码？

如果有人可以在这方面帮助我，那将是非常有帮助的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:21:30.417

要读取*密码*，您还可以使用[Term::ReadLine](http://search.cpan.org/~kjalb/TermReadKey-2.14/ReadKey.pm)。

有关详细信息，请访问[Perl Monk](http://www.perlmonks.org/?node_id=352298)。

# jquery - Magento #page-login

> ID：15276048
> 
> 赞同：0
> 
> 时间：2013-03-07T16:10:46.763
> 
> 标签：jquery, css, magento, admin

我向我的登录页面添加了一个自定义背景，我希望它使用 jQuery 淡入。我的问题是我需要导入主题和编辑**的**管理**头文件在哪里？**![在此处输入图像描述](../Images/a26a1c346e67e1f47d1faec29294d4b1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-31T08:52:58.800

您要个性化的页面是`/app/design/adminhtml/default/default/template/login.phtml`。修改`head.phtml`会影响所有需要它的页面（意见，未验证）。

那么为什么不`login.phtml`自己复制覆盖，这样你也可以避免弄乱核心文件。我个性化了后端登录屏幕的内容。

在上面的路径中，您会看到`default/default/`代表`packagename/themename/`。`Packagename`应该留给“默认”，因为没有“基础”包可以依靠`Magento`。您`mythemename/`在默认包中创建，在其中放置`login.phtml`.

`app/design/adminhtml/default/mythemename/template/mylogin.phtml`. （注意，我将我的文件重命名为，`mylogin.phtml`而不是`login.phtml`；不确定它是否有用，但在文件访问日志或读取 xml 代码时，似乎更易于调试）

然后，您必须指出`Magento`在使用默认主题之前应该查看您的主题（在您的 中`etc/config.xml file`）：

```
<stores>
    <admin>
        <design>
            <package>
                <name>default</name>
            </package>
            <theme>
                <default>mythemename</default>
            </theme>
            <!-- CAN CUSTOMIZE THEME FOR EACH OF THESE SEPARATELY -->
            <!--<layout>-->
                <!--<default>mythemename</default>-->
            <!--</layout>-->
            <!--<template>-->
                <!--<default>mythemename</default>-->
            <!--</template>-->
            <!--<skin>-->
                <!--<default>mythemename</default>-->
            <!--</skin>-->
            <!--<locale>-->
                <!--<default>mythemename</default>-->
            <!--</locale>-->
        </design>
    </admin>
</stores> 
```

在`adminhtml`'s`layout/main.xml`中，您可以看到以下句柄负责后端的登录屏幕`<adminhtml_index_login>`：所以你想覆盖它。为此（我还不确定为什么这是必要的。其他人可以进一步详细说明吗？）您需要在您的文件中指定`etc/config.xml`您更新此句柄的布局：

```
<config>
    ...
    <adminhtml>
        <layout>
            <updates>
                <adminhtml_index_login>
                    <file>mythemename.xml</file>
                </adminhtml_index_login>
            </updates>
        </layout>
    </adminhtml>
    ...
</config> 
```

如您所见，您需要创建自己的文件夹并在 ( ) :中`layout/`放置一个新文件。在里面，你有这个：`mythemename.xml``/app/design/adminhtml/default/mythemename/layout/mythemename.xml`

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <adminhtml_index_login>
        <block type="core/text_list" name="root" output="toHtml">
            <block type="adminhtml/template" name="content" template="mylogin.phtml">
                <block type="core/text_list" name="form.additional.info" />
            </block>
        </block>
    </adminhtml_index_login>
</layout> 
```

这应该这样做。关于javascript或jquery代码，我不知道您是否可以将其注入页面本身？（让代码加载图像，然后让它出现）然后你根本不需要触摸标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:47:12.993

看看`/app/design/adminhtml/default/default/template/page/head.phtml`。

希望能帮助到你。

# sql - SQL Server 存储过程 - 将多行中的列合二为一

> ID：15276054
> 
> 赞同：2
> 
> 时间：2013-03-07T16:11:07.127
> 
> 标签：sql, sql-server, stored-procedures

我正在研究一个 SQL 存储过程，以将患者计费数据提取到数据集（然后将其返回到 VB.net 应用程序）。

我的问题：一位患者可能在一个计费周期/项目的表中有多行，但行中只有 3 个字段会不同。我不想每次都完整地提取每一行。我第一次想要所有字段，然后下一次只需要不同的字段。我想要一行中的所有记录。

我无法提前知道该患者在这一计费周期/项目的表中将有多少行，但最大值为 10。

表中有一个针对每个计费周期/项目的患者特定的 claim_id 字段，因此可以重复（并且是我用来提取记录的内容）。表中还有一个 ID 字段是一个标识列，因此它对于每条记录都是唯一的。

我当前的存储过程：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [BillClm] 
@ClaimId varchar(20),
@AccountCode integer

AS

SET NOCOUNT ON;

declare @PatientGridTable table
(
    Claim_Submitters_Id varchar(20),
    Claim_Status_Code varchar(2),
    Total_Amount_of_Claim decimal(18,2),
    Claim_Payment_Amt decimal(18,2),
    Claim_Patient_Resp decimal(18,2),
    Claim_Filing_Ind_Code varchar(2),
    Payor_Claim_Control_Num varchar(30),
    Bill_Type integer,
    Claim_Adjustment_Group_Reason_Code varchar(10),
    Claim_Adjustment_Amount decimal(18,2),
    Claim_Adjustment_Quantity integer,  
    Patient_Name varchar(60),
    Patient_ID_Num varchar(50),
    Insured_Name varchar(60),
    Insured_ID_Num varchar(50),
    Other_Payor_Name varchar(60),
    Other_Payor_ID varchar(80),
    Other_Subscriber_Name varchar(60),
    Other_Subscriber_ID varchar(80),
    Covered_Quantity integer,
    Covered_Amount decimal(18,2),
    Reimbursement_Rate decimal(6,2),
    Remark_Code varchar(2500),  
    Statement_Period_Start_End varchar(25)
)

insert into @PatientGridTable
(
    Claim_Submitters_Id,
    Claim_Status_Code,
    Total_Amount_of_Claim,
    Claim_Payment_Amt,
    Claim_Patient_Resp,
    Claim_Filing_Ind_Code,
    Payor_Claim_Control_Num,
    Bill_Type,
    Claim_Adjustment_Group_Reason_Code,
    Claim_Adjustment_Amount,
    Claim_Adjustment_Quantity,  
    Patient_Name,
    Patient_ID_Num,
    Insured_Name,
    Insured_ID_Num,
    Other_Payor_Name,
    Other_Payor_ID,
    Other_Subscriber_Name,
    Other_Subscriber_ID,
    Covered_Quantity,
    Covered_Amount,
    Reimbursement_Rate,
    Remark_Code,    
    Statement_Period_Start_End
)
select  
    d.submitter_id, d.claim_status, d.claim_amt, d.payment_amt,
    d.patient_resp, d.claim_ind, d.ref_num, d.bill_type,
    (a.adj_group_code+' '+a.adj_reason_code), a.adj_amount,
    a.adj_qty, d.patient_name, d.patient_id, d.insured_name,
    d.insured_id, d.other_payor, d.other_payor_id, d.other_subscriber,
    d.other_subscriber_id, d.days, d.amount, d.percent,
    (d.adj_ref+'_'+c.code_text),
    (CONVERT(varchar(12), d.claim_start_date, 101)+' '+CONVERT(varchar(12),         d.claim_end_date,101))
    FROM clm_detail_patient d  WITH(NOLOCK)
    INNER JOIN code_list c  WITH(NOLOCK) 
    ON d.adj_ref = c.map_id
    INNER JOIN clm_adj a  WITH(NOLOCK)
    ON d.claim_id = a.claim_id    
    WHERE d.claim_id = @ClaimId     

-- -----------------------------------------------------------------------
select * from @PatientGridTable 
```

clm_adj 是可以返回 0 到 10 行的表 - 通过 claim_id 字段绑定到 clm_detail_patient 表。（clm_detail_patient 总是只有一行。）

clm_adj 表中每行不同的三个字段是：Claim_Adjustment_Group_Reason_Code、Claim_Adjustment_Amount、Claim_Adjustment_Quantity

我想要的是对于 clm_adj 中的每个不同行，这三个字段在一行中彼此相邻出现。我不确定如何做到这一点。

如果有更好的方法可以去这里，我不会做临时表。任何帮助将非常感激！

示例 clm_detail_patient 表数据：

```
id     code      amt        payment    pat_resp   clm_ind    ref_num          bill     pat_name          pat_id      days    amount      pct   adj_ref  start_dt      end_date       claim_id
12345    19    15344.43    14962.12    2456.50    MA        20122580231ABC    213    DOE, JANE           123456789B    0    17418.62    0.00    MA01    2012-10-01    2012-10-31    1234-A00000000000001
12346    19    9157.21     8128.58     289.00     MA        20122580231ABC    212    SMITH, JOHN         987654321B    0    8417.58     0.00    MA01    2012-10-10    2012-10-31    4567-A00000000000001
12347    1     2522.99     1143.66     0.00       MA        20122580231ABC    211    JONES, MARY         987123456B    0    1143.66     0.00    MA01    2012-10-14    2012-10-17    9876-A00000000000001 
```

示例 clm_adj 表数据：

```
adj  reason   amt      qty   claim_id
CO    45    -2074.19    0    1234-A00000000000001
PR    2     2456.50     0    1234-A00000000000001
CO    45    739.63      0    4567-A00000000000001
PR    2     289.00      0    4567-A00000000000001
CO    45    1379.33     0    9876-A00000000000001 
```

每个表中的最后一个字段是 claim_id。

所以前两个病人在 clm_adj 表中有两条记录，第三个病人只有一条。

如果我要为患者 #1 运行我当前的存储过程，我会返回两行。我想为第一个病人看到的：

```
12345    19    15344.43    14962.12    2456.50    MA        20122580231ABC    213    CO 45    -2074.19    0    PR 2    2456.50    0    DOE, JANE           123456789B    0    17418.62    0.00    MA01    2012-10-01  2012-10-31    1234-A00000000000001 
```

因此，两个 adj/reason、amount 和 quantity 字段记录出现在一行中，彼此相邻（从此处第九个字段中的 CO 45 开始）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:54:20.300

按照 Esoteric Sc​​reen Name 提供的链接，我能够解决问题。在声明患者网格表之前，我将以下内容插入到我的存储过程中：

```
DECLARE @combinedClaimString VARCHAR(MAX)
SELECT @combinedClaimString = COALESCE(@combinedClaimString + '; ', '') + adj_group_code + ', ' + adj_reason_code + ', ' + (SELECT CONVERT(varchar(22), adj_amount)) + ', ' + (SELECT CONVERT(varchar(22), adj_qty))
FROM (SELECT  adj_group_code, adj_reason_code, adj_amount, adj_qty, claim_id 
FROM br549.clm_adj
WHERE claim_id = @ClaimId)
AS temp 
```

这会产生一个字符串，声明的每个部分用逗号分隔，每个单独的声明用分号分隔。

然后，我修改了 PatientGridTable 结构，使其仅包含一个用于所有索赔信息的字段：

```
declare @PatientGridTable table
(
    Claim_Submitters_Id varchar(20),
    Claim_Status_Code varchar(2),
    Total_Amount_of_Claim decimal(18,2),
    Claim_Payment_Amt decimal(18,2),
    Claim_Patient_Resp decimal(18,2),
    Claim_Filing_Ind_Code varchar(2),
    Payor_Claim_Control_Num varchar(30),
    Bill_Type integer,
    Claim_Adjustment varchar(MAX),  
    Patient_Name varchar(60),
    Patient_ID_Num varchar(50),
    Insured_Name varchar(60),
    Insured_ID_Num varchar(50),
    Other_Payor_Name varchar(60),
    Other_Payor_ID varchar(80),
    Other_Subscriber_Name varchar(60),
    Other_Subscriber_ID varchar(80),
    Covered_Quantity integer,
    Covered_Amount decimal(18,2),
    Reimbursement_Rate decimal(6,2),
    Remark_Code varchar(2500),  
    Statement_Period_Start_End varchar(25)
) 
```

然后我在 PatientGridTable 中选择了 @combinedClaimString 变量：

```
insert into @PatientGridTable
(
    Claim_Submitters_Id,
    Claim_Status_Code,
    Total_Amount_of_Claim,
    Claim_Payment_Amt,
    Claim_Patient_Resp,
    Claim_Filing_Ind_Code,
    Payor_Claim_Control_Num,
    Bill_Type,
    Claim_Adjustment,  
    Patient_Name,
    Patient_ID_Num,
    Insured_Name,
    Insured_ID_Num,
    Other_Payor_Name,
    Other_Payor_ID,
    Other_Subscriber_Name,
    Other_Subscriber_ID,
    Covered_Quantity,
    Covered_Amount,
    Reimbursement_Rate,
    Remark_Code,    
    Statement_Period_Start_End
)
select  
    d.submitter_id, d.claim_status, d.claim_amt, d.payment_amt,
    d.patient_resp, d.claim_ind, d.ref_num, d.bill_type,
    (SELECT @combinedClaimString as adj_group_code), d.patient_name, d.patient_id, d.insured_name, d.insured_id, d.other_payor, d.other_payor_id, d.other_subscriber,
    d.other_subscriber_id, d.days, d.amount, d.percent,
    (d.adj_ref+'_'+c.code_text),
    (CONVERT(varchar(12), d.claim_start_date, 101)+' '+CONVERT(varchar(12),         d.claim_end_date,101))
    FROM clm_detail_patient d  WITH(NOLOCK)
    INNER JOIN code_list c  WITH(NOLOCK) 
    ON d.adj_ref = c.map_id
    INNER JOIN clm_adj a  WITH(NOLOCK)
    ON d.claim_id = a.claim_id    
    WHERE d.claim_id = @ClaimId 
```

数据集返回到我的应用程序，每位患者只有一行。然后我可以将声明字符串拆分为适当的格式。

非常感谢深奥的网名！

# java - 尝试在 POST 请求中发送 JSON 字符串时出现 409 HTTP 错误

> ID：15276056
> 
> 赞同：1
> 
> 时间：2013-03-07T16:11:11.820
> 
> 标签：java, json, http, post, nimble

我需要以最简单的方式在正文请求中发送一个 JSON 字符串的 HTTP POST。api 是这样的：'api.nimble.com/api/v1/contact'（[https://nimble.readthedocs.org/en/latest/contacts/basic/create/](https://nimble.readthedocs.org/en/latest/contacts/basic/create/)）。

JSON 是一个字符串变量（不需要使用任何额外的库），应该在请求的正文中发送。

我有以下 Java 代码，但总是返回 409 HTTP ERROR。

有人可以告诉我应该在代码中更改/添加什么才能正常工作吗？非常感谢！

更新：解决方案通过以下方式验证：http: [//jsonlint.com/](http://jsonlint.com/)。正确的 JSON 字符串是（转义双引号并删除字段末尾的逗号）：

```
String str_JSON="{\"fields\": {\"first name\": [{\"value\": \"Jack\",\"modifier\": \"\"}],\"last name\": [{\"value\": \"Daniels\",\"modifier\": \"\"}],\"phone\": [{\"modifier\": \"work\",\"value\": \"123123123\"},{\"modifier\": \"work\",\"value\": \"2222\"}]},\"type\": \"person\",\"tags\": \"test\"}"; 
```

代码：

```
String str_response="";
String access_token=request.getParameter("at");
String data="{'fields': {'first name': [{'value': 'Jack','modifier': '',}],'last name': [{'value': 'Daniels','modifier': '',}],'phone': [{'modifier': 'work','value': '123123123',}, {'modifier': 'work','value': '2222',}],},'type': 'person','tags': 'test'}";
try{
    URL url = new URL("https://api.nimble.com/api/v1/contact?access_token="+access_token);
    HttpURLConnection connection = (HttpURLConnection)url.openConnection();
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Content-Type","application/json");
    connection.setUseCaches(false);
    connection.setDoInput(true);
    connection.setDoOutput(true);
    //Send Request
    DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
    wr.writeBytes(data);
    wr.flush();
    wr.close();
    System.out.println("Api:"+url.getHost()+url.getPath());
    System.out.println("Header:"+connection.getHeaderField("Content-Type"));
    System.out.println("content:"+connection.getContent());
    //Get Response
    BufferedReader rd = new BufferedReader(new InputStreamReader(connection.getInputStream()));
    String line;
    while ((line = rd.readLine()) != null) {
        str_response+= line + '\r';
    }
    rd.close();
}catch(Exception e){
    System.out.println("Exception:"+message);
} 
```

我也试过用这个改变第 13-15 行，但结果是一样的：

```
OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
wr.write(data); 
```

输出：

```
Api:api.nimble.com/api/v1/contact
Header:application/json; charset=UTF-8
Exception:Server returned HTTP response code: 409 for URL: https://api.nimble.com/api/v1/contact?access_token=38fb4aa33a101ba1c385840409a8ae7b 
```

# javascript - Chrome 显示网页的来源而不是应用程序布局。

> ID：15276057
> 
> 赞同：3
> 
> 时间：2013-03-07T16:11:17.107
> 
> 标签：javascript, google-chrome

我们有一个内部 Web 应用程序，登录时在 IE 8 中呈现良好。但在 chrome 中，它显示的页面源如下：

```
 <SCRIPT LANGUAGE="javascript">
    {  ..... }</SCRIPT>

    <HTML>
        <HEAD><TITLE>Blah</TITLE>
    <LINK HREF="printDUC.css" REL="stylesheet" TYPE="text/css">

    <!-- calendar stylesheet -->
    <link rel="stylesheet" type="text/css" media="all" href="/MCPS/theme/calendar-win2k-cold-1.css" title="win2k-cold-1" />

    <SCRIPT LANGUAGE="JavaScript 1.5" type="text/JavaScript" SRC="/MCPS/js/print.js"></SCRIPT>
</HEAD>
<BODY>
<!-- VARIOUS HTML Tags like TABLE etc -->
</BODY>
</HTML> 
```

尝试使用开发人员控制台进行调试。响应选项卡包含 Chrome 中显示的文本。HTTP 响应标头具有：

```
HTTP/1.1 200 OK
Date: Thu, 07 Mar 2013 15:49:48 GMT
Server: IBM_HTTP_Server
Keep-Alive: timeout=10, max=99
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: text/plain
Content-Language: en-US 
```

内容类型 text/plain 是否会导致此问题？想知道为什么它会在 IE 8 中很好地呈现组件。Firefox 的行为与 chrome 相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-29T13:49:29.323

是的，“内容类型：文本/纯文本”是问题所在，应该是：

```
Content-Type: text/html 
```

在由 Chrome 呈现的响应标头中。

# asp.net - 如何配置此 DotNetNuke 数据库？

> ID：15276058
> 
> 赞同：0
> 
> 时间：2013-03-07T16:11:18.200
> 
> 标签：asp.net, .net, dotnetnuke

我正在尝试使用安装向导安装 DotNetNuke 4.09.03。（我正在使用旧版本作为我正在做的事情的要求）。

我对 ASP 或如何设置此连接不是很熟悉。下面我附上了表格以及它对我的要求。

![DotNetNuke 数据库连接设置](../Images/a78e180efc361adacefff52284cf1471.png)

我在这些字段中输入什么？我将使用 SQL Server 2005。

有人可以帮助我了解我在这些领域输入的内容吗？我使用 discountasp.com 作为我的主机，以防您需要该信息。

提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:18:17.800

如果您使用的是 SQL Server 2005，请选择第二个单选按钮。

如果 SQL Server 是本地服务器（即在 Web 服务器上），则输入“.”。在服务器：字段中，否则放入 IP 地址

在第二个字段中输入您的数据库名称（您必须创建一个）

您可能会取消选中 Integrated Security 复选框并输入用于连接 SQL Server 的用户名/密码。（您也可能会创建它）

不要担心数据库所有者或对象限定符设置。

在此处查看一些安装视频[http://www.dotnetnuke.com/Resources/Training/Tutorials.aspx](http://www.dotnetnuke.com/Resources/Training/Tutorials.aspx)，即使它们适用于较新版本的 DNN

# java - 如何获取也在内部类内部的内部类的外部类

> ID：15276059
> 
> 赞同：2
> 
> 时间：2013-03-07T16:11:18.887
> 
> 标签：java, nested

我怎样才能得到外部实例？

```
class OuterClass {

    class InnerClass {
        class MoreInnerClass {
            public MoreInnerClass() {
            // i want to get outer class from here
            }
        }
    }

} 
```

我想从 MoreInnerClass 方法中获取 OuterClass 实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:12:45.073

像这样：

```
OuterClass.this.someMethod(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:13:53.407

例如：

```
class OuterClass {
    class InnerClass {
        class MoreInnerClass {
            public MoreInnerClass() {
                OuterClass.this.hashCode();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:18:03.397

由于没有一个类是静态的，因此应该这样做：

```
OuterClass.this 
```

# pharo - Morphic 打破边界

> ID：15276061
> 
> 赞同：2
> 
> 时间：2013-03-07T16:11:25.920
> 
> 标签：pharo, morphic

我怎样才能将变形边界分解成这样的东西？

![在此处输入图像描述](../Images/be99a8e49d5e4a8e97673056f76aa644.png)

我想将这些变形用于迷宫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:58:12.423

也许不是打破边界，您可能希望使用 ProportionalLayout 在边缘上添加子变形（例如，LineMorphs）。

Pharo Collaboractive 书是开始学习 Pharo Smalltalk 的绝佳额外资源。也许布局部分可能会有所帮助：[http ://book.pharo-project.org/book/LanguageAndLibraries/GUI/PolymorphTutorial/Layout/](http://book.pharo-project.org/book/LanguageAndLibraries/GUI/PolymorphTutorial/Layout/)

[另一个有趣的来源是 Squeak Wiki 中关于布局子变形的示例： http](http://wiki.squeak.org/squeak/589) ://wiki.squeak.org/squeak/589

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-02T19:56:53.510

PolygonMorph 类的实例可用于制作这些形状（请参阅浏览器中的示例）

# c# - 存储过程MYSQL中的返回值

> ID：15276064
> 
> 赞同：0
> 
> 时间：2013-03-07T16:11:28.553
> 
> 标签：c#, mysql

我现在要做的是在 C# 中返回一个值，指示存储过程已完成。我正在考虑在最后一个要调用的 MYSQL 存储过程中做这样的事情：

```
 int status =0 
    if (proc.result >0) 
    then { status = proc.result } 
    label.status 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:14:13.657

[ExecuteNonQuery](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html#connector-net-examples-mysqlcommand-executenonquery)将返回一个指示存储过程如何完成的 int。

从存储过程中获取返回值：

```
var returnValue = new SqlParameter("returnVal", SqlDbType.Int);
returnValue.Direction = ParameterDirection.ReturnValue;
command.Parameters.Add(returnValue); 
```

# ruby-on-rails - 如果能？不隐藏 show.html 上的链接

> ID：15276066
> 
> 赞同：1
> 
> 时间：2013-03-07T16:11:30.540
> 
> 标签：ruby-on-rails, cancan

我刚刚安装了 cancan，我遇到了一个快速的小问题。我应该可以使用 if_can 吗？应用操作来隐藏链接。只有用户创建的信息才能查看编辑/删除链接。

我一直无法找到遇到同样问题的其他人。如果有人可以看看并帮助我，将不胜感激。

显示.html：

```
<div id="photos">
    <% for photo in @gallery.photos %>
    <div class="photo">
        <%= image_tag photo.image_url(:thumb).to_s %>
        <div class="name"><%= photo.name %></div>
        <div class="actions">
            <% if can? :update, @photo %>
            <%= link_to "edit", edit_photo_path(photo) %> |
            <% end %>
            <% if can? :remove, @photo %>
            <%= link_to "remove", photo, :confirm => 'Are you sure?', :method => :delete %>
            <% end %>
        </div>
      </div>
    <% end %>
    <div class="clear"></div>
</div>

<p>
  <%= link_to "Add a Photo", new_photo_path(:gallery_id => @gallery) %>
|
  <%= link_to "Remove Gallery", @gallery, :confirm => 'Are you sure?', :method => :delete %> |
  <%= link_to "View Galleries", galleries_path %>
</p> 
```

能力.rb

```
class Ability
  include CanCan::Ability

  def initialize(user)
    can :read, :all 
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:29:16.820

好的，每个控制器都必须经过授权。最简单的方法是从照片开始并确保它不能被删除。您将需要类似的东西：

```
can :delete, Photo do |photo|
  question.try(:user) == user
end 
```

在你的能力.rb。在照片的控制器中，您需要输入`load_and_authorize_resource`或`authorize_resource`。

那么在你看来你`<%if can :remove, photo %>`不想`<%if can :remove, @photo>`。`@photo`对我来说，您尝试使用它似乎很奇怪`<for photo in @gallery.photos %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T11:21:06.303

我也经历过这个问题。解决方案很简单，在 Ability.rb 类中执行如下操作

```
class Ability
  include CanCan::Ability

  def initialize(user)
  user ||= User.new # guest user (not logged in)
  if user.role == "admin"
    can :update, Photo, :user_id => user.id
  end 
end 
```

然后在 index.html.erb 中执行以下操作

```
<% @photos.each do |photo| %>
 <%if can? :update, photo %>
  <!-- hide your links and buttons here-->
 <%end%>
<%end%> 
```

注意：在“<%if can? :update, photo %>”中写“photo”而不是“Photo”或“@photo”。因为这里的照片是一个可验证的，它将遍历整个循环。

# javascript - Javascript隐藏/显示功能

> ID：15276068
> 
> 赞同：0
> 
> 时间：2013-03-07T16:11:32.933
> 
> 标签：javascript, jquery, html, show-hide

我正在尝试为 html5/js 游戏即时编程创建登录/注册系统/菜单。

目前，我已经设置了带有不同 div 的 html 页面，这些 div 将用于菜单。

```
<!DOCTYPE html>
<html>
<head>
<title>TBG basic structure</title>
<script src="JS/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="JS/game.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="CSS/style.css" />
</head>
<body>
<section id="wrapper">
<header>
    <h1><img src="images/title.png" width="467" height="184"/></h1>

</header>
<nav>
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Leagues</a></li>
        <li><a href="#">Contact</a></li>
    </ul>
</nav>
<article id="container">
    <div id="load-new">
        <p>LOAD/NEW</p>
    </div>
    <div id="reg">
        <p>REGISTER</p>
    </div>
    <div id="login">
        <p>LOGIN</p>
    </div>
    <div id="access">
        <p>ACCESS</p>
        <button id="login-but" onclick="login2()">Login</button>
        <button id="reg-but" onclick="register()">Register</button>
    </div>
    <canvas id="TBG" width="640" height="416">
        Please use a more up to date browser
    </canvas>
    <div id="GUI">
        <div id="health">
            <p><img src="images/heart.png"/>: <span class="gameHealth"></span></p>
            </div>
        <div id="energy">
            <p><img src="images/energy.png"/>: <span class="gameEnergy"></span></p>
        </div>
        <div id="table_container"></div>
    </div>
</article>

</section>
</body>
</html> 
```

基本上，由于用户的决定，我想使用 javascript/jquery 隐藏显示菜单的正确部分。

因此，用户将看到的第一个 div 是访问 div，它将为用户提供 2 个选项，“登录”或“注册”，正如您在上面访问 div 中的按钮所看到的那样。

基本上我希望我的 JS 在按下其中一个按钮时隐藏访问 div，然后根据用户按下的按钮显示登录 div 或 reg div。

这是我目前拥有的Js：

```
$(document).ready(function(){

var loadScr = $("#load-new");
var regScr = $("#reg");
var loginScr = $("#login");
var accessScr = $("#access");

    loadScr.hide();
    regScr.hide();
    loginScr.hide();

    function login()
    {
        accessScr.hide();
        loginScr.show();
    }

    function register()
    {
        accessScr.hide();
        regScr.show();
    }

}); 
```

似乎按钮的 onclick 功能没有与 JS 交互。我知道这一点，因为我在登录功能中放置了一个警报，该警报在用户单击登录按钮时调用，但我没有回复。

我在做一些相当愚蠢的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:17:26.277

您应该做的第一件事是添加`type="button"`到您的`<button>`元素中。您的页面可能正在重新加载，因为某些浏览器将`<button>`元素视为`type="submit"`默认值。此外，“-”在您的属性中不是有效字符`id`，因此我将其替换为“_”。

```
<button id="login_but" type="button">Login</button>
<button id="reg_but" type="button">Register</button> 
```

我还`onclick`从您的按钮中删除了属性，因为以编程方式分配点击事件会更好（一种“不引人注目的”JavaScript 技术）。接下来，我会将这两个函数从文档中移出，并忘记保留对元素的引用。在 jQuery 中使用 ID 选择器非常快。您的 JS 现在应该如下所示：

```
function login()
{
    $('#access').hide();
    $('#login').show();
}

function register()
{
    $('#access').hide();
    $('#reg').show();
}

$(function() {

    $('#login_but').click(login);
    $('#reg_but').click(register);

    $('#load-new').hide();
    $('#reg').hide();
    $('#login').hide();

}); 
```

# javascript - 通过 window.location 更改 URL 后如何运行代码？

> ID：15276070
> 
> 赞同：1
> 
> 时间：2013-03-07T16:11:37.560
> 
> 标签：javascript, greasemonkey, onload, window.location

我正在这样做，但它不起作用：

```
window.addEventListener("load", function load(event){
    alert('hola');
},false);

window.location.assign("about:blank"); 
```

这是一个 Greasemonkey 脚本。新位置已加载，但从未显示警报。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T07:51:29.083

更改 后`window.location`，Greasemonkey 脚本的当前实例将被清除。要在位置更改后“运行代码”，您需要将脚本设置为在新页面上触发（`about:blank`在这种情况下），然后使用标志来表示通过此脚本重定向原始页面到达了新页面。

1.  确保脚本`@include`或`@match`指令在新页面上触发。
2.  用于`GM_setValue()`设置标志，让脚本知道它已被故意转世。

这是一个**完整的工作脚本**，说明了该过程：

```
// ==UserScript==
// @name     _Fire after redirect to about:blank
// @include  about:blank
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_setValue
// @grant    GM_getValue
// @grant    GM_deleteValue
// ==/UserScript==

//-- Are we on a blank page after a redirect by this script?
var bAfterRedirect = GM_getValue ("YouHaveBeenRedirected", false);

//-- Always erase the stored flag.
GM_deleteValue ("YouHaveBeenRedirected");

if (bAfterRedirect  &&  location == 'about:blank') {
    //-- DO WHATEVER YOU WANT WITH THE BLANK/NEW PAGE HERE.
    $("body").append (
        '<h1>This content was added after a GM redirect.</h1>'
    );
}
else if (location != 'about:blank') {
    /*-- If we are on the original target page, signal our next incarnation
        that it was triggered by a redirect.  Then redirect to about:blank.
    */
    GM_setValue ("YouHaveBeenRedirected", true);
    location.assign ("about:blank");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:25:27.337

通过仅更改 url 的哈希（或片段）部分，然后做任何你想做的事情，因此：

```
window.location.assign("#hello")
alert("hola") 
```

或因此：

```
window.location.hash = "world"
alert("mondo") 
```

如果文档已经加载，`onload`则不会再次触发，因此您无法从`load`事件中运行它。HTML5 提供了一个`hashchange`您可以使用的事件，因此：

```
window.addEventListener("hashchange", function (event){
    alert('change');
},false); 
```

一些 javascript 库（我知道 dojo 会）实现`hashchange`或等效于非 HTML5 浏览器。为了利用这一点，您需要使用该库的约定来注册事件。

# java - 从 Java 进程运行时找不到 mount.exe

> ID：15276071
> 
> 赞同：3
> 
> 时间：2013-03-07T16:11:41.660
> 
> 标签：java, windows, mount

我正在尝试将挂载命令作为 Java 进程执行。以下是我形成命令的方式：

```
List<String> command = new ArrayList<String>();

command.add("cmd.exe");
command.add("/c");
command.add("mount.exe");
command.add("-u:" + username);
command.add("-p:" + password); 
command.add(IP + ":" + mountPoint);
command.add(driveLetter + ":");

ProcessBuilder processBuilder = new ProcessBuilder(command);

processBuilder.redirectErrorStream(true);
Process process = processBuilder.start(); 
```

当我执行此操作时，我收到错误消息，

```
'mount.exe' is not recognized as an internal or external command,
operable program or batch file. 
```

我已经安装了 mount.exe 并且在环境变量中设置了路径，

```
C:\>where mount.exe
C:\Windows\System32\mount.exe

C:\>path
PATH=C:\Windows\System32;C:\Windows; ... [removed the remaining entries] 
```

当我在命令提示符下手动执行命令时，它工作正常：

```
C:\>cmd.exe /c mount.exe -u:<user> -p:<password> <IP>:<mount point> Z: 
```

如果有人能指出我所缺少的，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:08:43.773

从 TeamCity Build Agent（作为服务工作，作为系统用户运行）在 Windows Server 2008 **x64**上运行*挂载*和*卸载时，我遇到了同样的问题。*当我通过单击 .cmd 文件从用户会话运行脚本时，脚本工作正常，但是当 TeamCity Build Agent 尝试运行它时，我看到了同样的错误：

 **> 'C:\Windows\System32\umount.exe' 未被识别为内部或外部命令

现在我有了解决方案。

*当你使用 C:\Windows\System32\cmd.exe 运行它时， mount* **可以工作**，因为*cmd*在 C:\Windows\System32\ 中搜索*mount*

*使用 c:\Windows\SysWOW64\cmd.exe 运行时挂载* **失败**，因为此*cmd*在 c:\Windows\SysWOW64\ 中搜索*挂载*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:25:52.807

看看当您在 command.add() 调用中编写 mount.exe 的完整路径时会发生什么。我可能对此有误，但我认为当您自己从命令提示符中调用 cmd.exe 时，环境变量会自动传递给被调用的程序。使用 ProcessBuilder 可能无法正确发生这种情况，如果完整路径有效，则可能表明这一点。**

# sql-server - 选择午夜和给定日期之间的所有行

> ID：15276074
> 
> 赞同：-2
> 
> 时间：2013-03-07T16:11:53.487
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2008-r2

在 SQL Server 2008 中，我有一个需要输入日期的存储过程。我想选择从该日期午夜开始到晚上 11:59 的所有行。

```
CREATE PROCEDURE MyProc
@InputDate DATETIME
AS
SELECT * FROM MyTable WHERE DateField >= @InputDate 
```

所以我希望能够像这样调用这个过程：

```
EXEC MyProc @InputDate=CONVERT(DATETIME, '3/5/2013') 
```

**它应该返回日期在'3/5/2013 0:0:0'** AND **'3/5/2013 11:59:59'**之间的所有行。输入日期应该忽略时间组件，只查看日期并附加它自己的时间组件（至少我认为它应该）

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:06:48.947

您可以使用`DATE`精确到一天的数据类型。

```
CREATE PROCEDURE MyProc
@InputDate DATE
AS
SELECT * FROM MyTable WHERE CAST(DateField AS DATE) = @InputDate

EXEC MyProc @InputDate='2013-03-05' 
```

有一个[SQLFiddle](http://sqlfiddle.com/#!3/41faf/1)

# excel - xlrd 将单元格检测为空但它们不是空的

> ID：15276075
> 
> 赞同：1
> 
> 时间：2013-03-07T16:11:54.203
> 
> 标签：excel, xlrd, vba

我的 *.xls 文件中有一些值，但是当我尝试使用 wb_sheet.col_values(...) 导入它们时，我只得到空值。我试过 wb_sheet.col(...) 它还声称这些单元格是空的。但是，它们不是，我可以在 Excel 中看到这些值。

我的 *.xls 文件是由 Labview 脚本生成的，我很确定它包含一些 makros 和东西。但是，xlrd 不会返回错误。

我会上传一个样本表，但它包含机密信息。

版本：python 2.7.3、Windows 7、Excel 2010、xlrd 0.8.0。

小脚本：

```
wb = open_workbook('*.xls')
wbs = wb.sheet_by_index(0)
wbs.col(0) 
```

我得到的结果是*空的：''，*对于所有单元格，即使第一列包含值，当我用 excel 打开时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:07:44.780

预期：xlrd 报告文件中的内容。如果您在打开文件时由 Excel 执行“makros and stuff”时插入了缺失的数据值，那么您需要查看其他地方 -[请参阅上一个问题](https://stackoverflow.com/questions/441758/driving-excel-from-python-in-windows)。

# .htaccess - .htaccess 在 url 中隐藏目录

> ID：15276078
> 
> 赞同：0
> 
> 时间：2013-03-07T16:12:02.770
> 
> 标签：.htaccess, redirect, rewrite

我在这里进行了搜索，但找不到我的具体问题的答案..也许我太菜鸟了，我很抱歉:(

所以我需要的是我有一个域：[http](http://www.mydomain.com) ://www.mydomain.com ，我有一个目录：[http ://www.mydomain.com/directory](http://www.mydomain.com/directory)

在我的主域 www.mydomain.com/index.php 文件中，我有一个脚本可以检测国家并转发到[http://www.mydomain.com/directory](http://www.mydomain.com/directory)

但我想隐藏那个“目录”所以即使我通过脚本重定向我希望 url 留在 [http://www.mydomain.com](http://www.mydomain.com)

这可能吗？

编辑：我正在使用[Maxmind](http://www.maxmind.com/en/lookup?pkit_lang=en) Geolocation 进行重定向，没有查询字符串。所以它会检测并转发到目录，但我希望 url 保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:57:17.977

是的。您可以使用 php 设置一些 cookie，然后将 HTTP_COOKIE 与 mod_rewrite 一起使用，但不能仅与 .htaccess 一起使用。

.htaccess cookie 示例：

```
RewriteCond %{HTTP_COOKIE} lang=([^;]*)
RewriteRule .* $0?lang=%1 [L,QSA,NS] 
```

# java - 如果我自动将“http://”连接到前面，则 Web 连接不起作用

> ID：15276081
> 
> 赞同：0
> 
> 时间：2013-03-07T16:12:08.997
> 
> 标签：java

我制作了一个从指定网站获取 HTML 的 WebConnection Java 脚本。它可以工作，但是当我尝试通过自动连接`http://`到前面来使事情变得更容易时，它不起作用，尽管字符串应该是相同的（它给出了一个`java.lang.IllegalArgumentException`）。这是我的代码：

```
package WebConnection;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.JOptionPane;

public class WebConnect {
    URL netPage;

    public WebConnect() {
        String s = "http://";
        s.concat(JOptionPane.showInputDialog(null, "Enter a URL:"));
        System.out.println(s);
        System.out.println(getNetContent(s));

                //The above does not work, but the below does

        //System.out.println(getNetContent(JOptionPane.showInputDialog(null, "Enter a URL:")));
    }

    private String getNetContent(String u) {

        try {
            netPage = new URL(u);
        } catch(MalformedURLException ex) {
            JOptionPane.showMessageDialog(null, "BAD URL!");
            return "BAD URL";
        }
        StringBuilder content = new StringBuilder();
        try{
            HttpURLConnection connection = (HttpURLConnection) netPage.openConnection();
            connection.connect();
            InputStreamReader input = new InputStreamReader(connection.getInputStream());
            BufferedReader buffer = new BufferedReader(input);
            String line;
            while ((line = buffer.readLine()) != null) {
                content.append(line + "\n");
            }
        } catch(IOException e){
            JOptionPane.showMessageDialog(null, "Something went wrong!");
            return "There was a problem.";
        }
        return content.toString();
    }

    public static void main(String[] args) {
        new WebConnect();

    } 
```

例如，如果我运行 webConnect() 的第一部分并键入`google.com`它不起作用，但如果我运行注释掉的行并键入`http://google.com`，它不会给出错误。为什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:15:07.643

字符串是不可变的。这意味着您无法编辑内容。

改变...

```
String s = "http://";
s.concat(JOptionPane.showInputDialog(null, "Enter a URL:")); 
```

到...

```
String s = "http://";
s = s.concat(JOptionPane.showInputDialog(null, "Enter a URL:")); 
```

# sql - 是否可以从一对多关系中的每一列中获取最新值？

> ID：15276082
> 
> 赞同：2
> 
> 时间：2013-03-07T16:12:09.107
> 
> 标签：sql, sql-server-2008-r2

使用这个数据集：

```
| RECID |  ID  | VALUE1 | VALUE2 | VALUE3 |                          RECDT |
----------------------------------------------------------------------------
|     1 | 1-01 |      1 |      2 |      3 | January, 01 2013 00:00:00+0000 |
|     2 | 1-01 |      3 | (null) | (null) | January, 02 2013 00:00:00+0000 |
|     3 | 1-01 | (null) | (null) |      1 | January, 03 2013 00:00:00+0000 | 
```

是否可以通过简单的查询返回以下结果？

```
|  ID  | VALUE1 | VALUE2 | VALUE3 |
-----------------------------------
| 1-01 |      3 |      2 |      1 | 
```

数据集需要根据日期和 PtID 返回每列的最新值。因此，例如，如果我对 2013 年 1 月 2 日之前对 PTID 的所有更改感兴趣，结果将如下所示：

```
|  ID  | VALUE1 | VALUE2 | VALUE3 |
-----------------------------------
| 1-01 |      3 |      2 |      3 | 
```

对于任何感兴趣的人，该模式已在[sqlfiddle上启动。](http://www.sqlfiddle.com/#!2/9ee9a)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:18:01.507

这是一种适用于许多 SQL 方言的方法：

```
select ptid,
       (select value1 from t t2 where t2.ptid = t.ptid and value1 is not null order by recdt desc limit 1
       ) as Value1,
       (select value2 from t t2 where t2.ptid = t.ptid and value2 is not null order by recdt desc limit 1
       ) as Value2,
       (select value3 from t t2 where t2.ptid = t.ptid and value3 is not null order by recdt desc limit 1
       ) as Value3
from t
where ptid = '1-01'
group by ptid 
```

一些数据库可能更喜欢`top`或`recnum = 1`代替`limit`.

在 MySQL 中，您还可以执行以下操作：

```
select ptid,
       substring_index(group_concat(value1 order by recdt desc), ',', 1) as Value1,
       substring_index(group_concat(value2 order by recdt desc), ',', 1) as Value2,
       substring_index(group_concat(value3 order by recdt desc), ',', 1) as Value3
from t
group by ptid 
```

这将具有将值转换为字符串的副作用。您可以转换回您想要的类型。此外，如果值可能包含逗号，那么您可能需要使用不同的分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:46:17.083

这是一种适用于许多 SQL 方言的方法，无需子查询且仅产生一行输出。

```
SELECT f1.value1,f3.value2,f5.value3 FROM FUNTIMES f1 
LEFT JOIN funtimes f2 ON
f1.recdt<f2.recdt AND f2.value1 IS NOT NULL
JOIN funtimes f3 ON f1.ptid=f3.ptid
LEFT JOIN funtimes f4 ON
f3.recdt<f4.recdt AND f4.value2 IS NOT NULL
JOIN funtimes f5 ON f1.ptid=f5.ptid
LEFT JOIN funtimes f6 ON
f5.recdt<f6.recdt AND f6.value3 IS NOT NULL
WHERE f1.value1 IS NOT NULL AND f2.value1 IS NULL
AND f3.value2 IS NOT NULL AND f4.value2 IS NULL
AND f5.value3 IS NOT NULL AND f6.value3 IS NULL; 
```

与上面的比较：[http ://www.sqlfiddle.com/#!2/9ee9a/34](http://www.sqlfiddle.com/#!2/9ee9a/34)

# c# - 来自 WCF 的 WMI 调用失败

> ID：15276084
> 
> 赞同：1
> 
> 时间：2013-03-07T16:12:13.233
> 
> 标签：c#, wcf, iis, wmi

我有一个连接到 WMI 以查询一些 AD 信息的 WCF 方法。

如果我在本地调试 WCF，它可以工作，即 ManagementObjectSearcher.Get() 返回非空集合。

一旦我将 WCF 发布到 IIS 网络服务器，然后让客户端（winform）调用相同的方法，它就会返回空集合（没有例外）。

知道为什么吗？

谢谢！

# javascript - 为什么使用“原型”进行 javascript 继承？

> ID：15276085
> 
> 赞同：7
> 
> 时间：2013-03-07T16:12:14.363
> 
> 标签：javascript, inheritance

JavaScript 对象具有“原型”成员以促进继承。但似乎，即使没有它，我们也可以过得很好，我想知道，使用它有什么好处。我想知道有什么优点和缺点。

例如，考虑以下（此处[为 jsfiddle](http://jsfiddle.net/5K7Hc/15/)）：

```
function Base (name) {

    this.name = name;
    this.modules = [];
    return this;
}

Base.prototype =
{
    initModule: function() {
        // init on all the modules.
        for (var i = 0; i < this.modules.length; i++)
            this.modules[i].initModule();
        console.log("base initModule");
    }   
};

function Derived(name) {
       Base.call(this,name); // call base constructor with Derived context
}

Derived.prototype = Object.create(Base.prototype);

Derived.prototype.initModule = function () {
      console.log("d init module");
      //  calling base class functionality
      Base.prototype.initModule.call(this);
    }

var derived = new Derived("dname");
console.log(derived.name);
derived.initModule(); 
```

一个问题是，为什么要使用“原型”？我们也可以做类似的事情`Derived = Object.create(Base);`

例如（[jsfiddle](http://jsfiddle.net/5K7Hc/20/)）：

```
Base =
{
    initModule: function() {
        // init on all the modules.
        for (var i = 0; i < this.modules.length; i++)
            this.modules[i].initModule();
        console.log("base initModule",this.name);
    },
    init: function(name) {
        this.name = name; 
        this.modules = [];
    }
};

Derived = Object.create(Base);

Derived.initModule = function () {
      console.log("d init module");
      //  calling base class functionality
      Base.initModule.call(this);
    }
Derived.init("dname");
console.log(Derived.name);
Derived.initModule(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:20:37.720

如果您不使用原型，则每个类都会重新定义方法。也就是说，将在第二个例子中`new Base; new Base; new Base`创建*六个函数。*这需要更多的时间和空间。 `Derived`还将创建自己的功能。

此外，您不能使用原型来动态更改每个实例的方法（或添加新方法），这可能会有所帮助——尤其是跨模块。

但是，这并不是说您应该始终为每种方法使用原型。每种情况都不同。

`prototype`还允许您在不创建实例的情况下在不同的上下文中调用方法（例如在`Array.prototype.forEach.call`类似数组的对象上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:19:10.190

基本上它很简单，Object.create 是 Ecmascript 5 的一部分，它是相当新的。Prototype 从 javascript 开始就已经存在，并且得到所有浏览器的支持。

因此，只要您需要对 Internet Explorer 7 或 8 的支持，就不应依赖 Create。另请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)

（文章还建议使用原型的 polyfill ;-)）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-07T16:20:11.463

您不需要 OO 的原型（恕我直言，这是一个骗局）。

考虑这个继承：

```
function SubClass()
{
    var object = {};
    object.publicVar = 2;
    object.publicMethod = function SubClassPubMeth()
      {
        return this.publicVar + 2;
      };
    object.poly = function SubClassPoly()
      {
        return 'SubClassPoly';
      };
    return object;
}

function Class()
{
    var object = new SubClass();
    object.classPublicVar = 3;
    object.classPublicMethod =
        function ClassMethod()
        {
            return this.publicVar + this.classPublicVar;
        };
    object.poly = function ClassPoly()
      {
        return 'ClassPoly';
      };
    return object;
} 
```

似乎适合继承的法案。

也考虑这个信息隐藏：

函数类() { var object = {}; 对象.x = 3; 变量私有变量 = 3; 函数 privateFunction(object) { return object.x + privateVar; }

```
object.publicFunction = function()
  {
    var priv = privateFunction(this);
    priv += privateVar;
    privateVar = privateVar + 3;
    return priv;
  };
return object; 
```

}

似乎也可以解决信息隐藏（AKA封装）

需要我多说。

# c# - 在 MVC4 中更改页眉/页脚？

> ID：15276087
> 
> 赞同：0
> 
> 时间：2013-03-07T16:12:15.673
> 
> 标签：c#, asp.net, asp.net-mvc-4

我是 MVC4 的新手，我是直接从 ASP.net 2.0 跳出来的？刚开始学习“音乐商店”应用程序（Razor）。我总是感到困惑的一件事是主题页眉/页脚。如何将它们更改为我公司的自定义标题。

我们在 LAMP 服务器中有单独的标头（这是 PHP 页面），我必须通过使用诸如“MyCompany.com}/inc/custom/typical_header_tall/”之类的 url 调用该标头。

请有人向我解释一下。有没有关于 MVC4 主题的好书或文章。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:15:57.810

您可以查看`~/Views/Shared/_Layout.cshtml`定义这些部分的文件。默认情况下，当您使用 Visual Studio 中的一些内置模板创建新的 ASP.NET MVC 应用程序时，所有视图都继承自此布局文件（因为有一个`~/Views/_ViewStart.cshtml`文件指定了通用布局）。

[`this blog post`](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)您可以从 Scott Gu中阅读更多关于布局和 Razor 模板的信息。它们相当于 WebForms 世界中的内容表单和母版页。

# jakarta-ee - Java EE 框架来调节登录用户的权限

> ID：15276090
> 
> 赞同：0
> 
> 时间：2013-03-07T16:12:29.787
> 
> 标签：jakarta-ee, frameworks

我需要用 Java EE 技术开发一个应用程序。其中一项任务是：每个拥有特殊配置文件的用户都应该获得不同的视图。这意味着我有很多功能，但不是每个人都拥有一切。

所以我不知道它是否存在一个可以帮助我根据用户（配置文件）调整视图的框架。

非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T11:19:20.190

就我而言，使用**Spring Security** Framework 是一个很好的解决方案。

配置框架后，您需要为 Spring Security Facelets 标记库定义命名空间：

```
xmlns:sec="http://www.springframework.org/security/tags" 
```

然后你可以使用标签：

```
<sec:authorize></sec:authorize> 
```

如下 ：

```
<sec:authorize ifAnyGranted="ROLE_FOO, ROLE_BAR">
    Lorem ipsum dolor sit amet
</sec:authorize> 
```

这样，拥有这两个角色中的任何一个的用户都可以看到“Lorem ipsum ....”。

还有更多可能的属性。有关更多详细信息，您可以查看 Spring Security[文档](http://static.springsource.org/spring-webflow/docs/2.2.1.RELEASE/spring-webflow-reference/html/ch13s09.html)。

# web-services - Spring Web 服务和肥皂

> ID：15276100
> 
> 赞同：0
> 
> 时间：2013-03-07T16:12:53.393
> 
> 标签：web-services, spring, soap, spring-ws, springsource

用于 Java Soap Web 服务的最佳类/bean 是什么？我是一个 .NET 人，无法从网络上的任何文章中真正分辨出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:23:25.443

如果您喜欢使用 spring-ws，请按照 [Spring Source](http://static.springsource.org/spring-ws/sites/2.0/reference/html/tutorial.html)上的教程进行操作。基本上，你必须

1.  在 web.xml 文件中为 SOAP 请求定义调度程序
2.  在你的 spring-ws 上下文 XML 文件中定义一个给定的 WSDL
3.  使用 @Endpoint 注释任何 Bean，并使用 @PayloadRoot(...) 注释一种方法

这些是使用 Spring WS 创建 Web 服务端点的第一个基本步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T09:47:32.180

对于那些寻找简单教程的人，我推荐：[http](http://www.javacodegeeks.com/2010/11/jaxws-with-spring-and-maven-tutorial.html) ://www.javacodegeeks.com/2010/11/jaxws-with-spring-and-maven-tutorial.html使用 spring-ws 和 spring-web

# php - 将iso-639代码翻译成语言名称的标准功能？

> ID：15276101
> 
> 赞同：7
> 
> 时间：2013-03-07T16:12:58.260
> 
> 标签：php, linux, internationalization, iso

我想应该有一些标准的方法，只是为了避免每个人为他们的应用程序重新输入枯燥的常量。;) 我正在寻找一个函数（可在 linux 上的 php web 应用程序中使用），它可以采用两种 ISO639 语言代码并以*第二种语言返回**第一种*语言的名称，即 应该返回并且应该返回。*`foo("fr","de")``"französisch"``foo("de","fr")``"allemagne"`*

 *有没有？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-08T00:30:18.650

[Locale::getDisplayLanguage](http://www.php.net/manual/en/locale.getdisplaylanguage.php)是您所需要的。它在 PHP 国际扩展中，所以如果它没有打开，你必须打开 php_intl.so（或者 dll，如果是 Windows）。

```
if (version_compare(PHP_VERSION, '5.3.0', '<')) {
    exit ('php_intl extension is available on PHP 5.3.0 or later.');
}    
if (!class_exists('Locale')) {
    exit ('You need to install php_intl extension.');
}

echo Locale::getDisplayLanguage('fr', 'de'); 
```*

# intuit-partner-platform - System.InvalidOperationException：不是预期的

> ID：15276102
> 
> 赞同：0
> 
> 时间：2013-03-07T16:12:58.540
> 
> 标签：intuit-partner-platform

我正在尝试将产品添加到 QuickBooks，但出现此错误：

错误：

{System.InvalidOperationException: XML 文档 (1, 2) 中存在错误。---> System.InvalidOperationException：不是预期的。在 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderFaultInfo.Read3_FaultInfo() --- 内部异常堆栈跟踪结束 --- 在 System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events) 在 System.Xml .Serialization.XmlSerializer.Deserialize(TextReader textReader) at Intuit.Ipp.Utility.XmlObjectSerializer.Deserialize[T](String message)}

这是我的代码：

```
 private Item BuildInventoryItemAddRq(JMAOrderDetail _OrderItem)
    {
        // Make sure we have a SKU value
        if (string.IsNullOrEmpty(_OrderItem.Sku))
        {
            ErrorMessageDataSource.Insert(new ErrorMessage(MessageSeverity.Info, "QBO", "OrderItemId " + _OrderItem.OrderId.ToString() + " has no SKU.  Using default QuickBooks Item Name of 'Unknown Item'"));
            _OrderItem.Sku = "Unknown Item";
        }

        // create the item as an inventoryitem in Quickbooks
        Item QBItem = new Item();
        QBItem.Active = true;
        QBItem.Name = _OrderItem.Sku;
        string _ItemName = IsProductVariantNamed(_OrderItem);
        //if (!string.IsNullOrEmpty(_ItemName))
        //{  // its a variant product
        //    _ItemName += "(" + _ItemName + ")";
        //    if (_OrderItem != null)
        //        QBItem.QtyOnHand = _OrderItem.StockQuantity;
        //    else
        //        QBItem.QtyOnHand = 0;
        //}
        //else
        //{ // regular product
        //    if (_OrderItem != null)
        //        QBItem.QtyOnHand = _OrderItem.StockQuantity;
        //    else
        //        QBItem.QtyOnHand = 0;
        //}

        QBItem.PurchaseDesc = _ItemName;
        //QBItem.SalesDesc = _ItemName;
        QBItem.PurchaseCost = new Money() { Amount = _OrderItem.Product.PurchaseCost };
        //QBItem.SalesPrice = (Double)_OrderItem.UnitPriceExclTax;
        QBItem.IncomeAccountRef = new AccountRef { AccountName = _qboSettings.ItemIncomeAcct };
        QBItem.COGSAccountRef = new AccountRef() { AccountName = _qboSettings.ItemCOGSAcct };
        QBItem.AssetAccountRef = new AccountRef() { AccountName = _qboSettings.ItemAssetAcct };

        try
        {
            Item it = dataServices.Add(QBItem);
            return it;
        }
        catch (Exception ex)
        {
            ErrorMessageDataSource.Insert(new ErrorMessage(MessageSeverity.Error, "QBO", String.Format("Error adding item : {0}", ex.ToString())));
            return new Item();
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:20:14.263

回答问题（来自 Joseph） 指定 QBItem.Type 变量：QBItem.Type = ItemTypeEnum.Inventory; QBItem.TypeSpecified = true;

谢谢贾里德
_

# javascript - 单击 Web 上的另一个声音按钮后 jQuery 声音不会停止

> ID：15276118
> 
> 赞同：2
> 
> 时间：2013-03-07T16:13:41.033
> 
> 标签：javascript, jquery, html

我正在尝试根据我在 Google 搜索中找到的一些代码和示例创建一个音板（我在这里找到了许多示例）。它具有我目前需要的所有基本核心功能，除了一个我无法弄清楚的非常重要的功能：当我单击另一个音频按钮时如何停止播放所有音频。

这是我当前的工作代码：

```
$(function() {
    $("audio").removeAttr("controls").each(function(i, audioElement) {
        var audio = $(this);
        var that = this;
        var isplaying = false;

        $("#profile").append($('<button>' + audio.attr("title") + '</button>').click(
        function() {
            if (isplaying == false) {
                that.play();
                isplaying = true;
            } else {
                that.pause();
                that.currentTime = 0;
                isplaying = false;
            }
        }));
    });
}); 
```

我有将 div "#profile" 包装在另一个 div "#global" 中的想法，然后试图阻止所有声音在 #global 中播放，但它没有用：

```
$(function() {
    $("audio").removeAttr("controls").each(function(i, audioElement) {
        var audio = $(this);
        var that = this;
        var isplaying = false;

        $("#profile").append($('<button>' + audio.attr("title") + '</button>').click(
        function() {
            if (isplaying == false) {
                that.play();
                isplaying = true;
            } else if (isplaying == true) {
                $("#global").click(
                function() {
                    that.pause();
                    that.currentTime = 0;
                    isplaying = false;
                });
            }
        }));
    });
}); 
```

它的功能比在#profile 中尝试以相同的方式停止音频要好得多（我松散地使用它），因为当我这样做时音频根本没有播放。但是，使用上面的代码，在我单击按钮关闭音频后，它不会再次播放，直到我刷新页面。我最大的问题仍然存在：按下多个按钮时声音仍然重叠......

老实说，我不知道自己在想什么了，因为上面的内容听起来并不完全合乎逻辑，而且我几乎要退后一步了……但是我已经在整个项目中待了四天直，我想我疯了。我在采用这种方法时是否走在正确的轨道上，或者我是否接近，或者我只是智障？

请帮忙。

# linq - 使用扩展方法 linq 创建左连接和内连接查询

> ID：15276122
> 
> 赞同：0
> 
> 时间：2013-03-07T16:14:01.040
> 
> 标签：linq, linq-to-sql

```
 select *
From Item i inner join Order o on i.OrderId = o.Id
        left join OrderDealersByDistance d on o.Id = d.OrderId
        left join SubOrder s on i.SubOrderId = s.Id
where d.[Status] = 1 
```

我想用实体框架编写上面的查询。我更喜欢 DataContext 和扩展方法。我怎样才能写上面的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:07:36.783

首先，我会使用查询语法，因为它更具可读性。

它看起来像这样

```
var db = new MyDbContext(conStr);

var query = from i in db.Items
     from o in db.Orders.Where(o => o.Id == i.OrderId)
     from d in db.OrderDealersByDistance.Where(d => d.OrderId == o.Id).DefaultIfEmpty()
     from s in db.SubOrders.Where(s => i.SubOrderId == s.Id).DefaultIfEmpty()
     where d.Status == 1
     select new { Item = i, Order = o, c.ContractName, Distance = d, SubOrder = s };

var result = query.ToList(); 
```

该`DefaultIfEmpty()`方法为您提供左连接。您可能希望更具体地了解选择列表（命名列而不是“*”）。

# java - 用于多个表 Java 的一个preparedstatement

> ID：15276124
> 
> 赞同：-1
> 
> 时间：2013-03-07T16:14:02.580
> 
> 标签：java, sql, prepared-statement

1）我可以使用一个准备好的语句将数据从java传递到多个表吗？我在哪里使用 JDBC 驱动程序。

```
try
        {
            conn = ac.getConnection();
            String insert = "INSERT INTO PPN_WORKFLOW(C2_F_Date,C2_Completed) VALUES(?,?)";
            stmt = conn.prepareStatement(insert);
            stmt.setDate(1, date);//question 2
            stmt.setInt(2, 1);
            stmt.executeUpdate();
            stmt.close();
            String insert2 = "INSERT INTO CREATE_ERF(Purc_Part_New_F_Date,Purc_Part_New_Completed) "
                    + "VALUES(?,?)";
            stmt = conn.prepareStatement(insert2);
            stmt.setDate(1, date);
            stmt.setInt(2,1);
            stmt.executeUpdate();
        }
        catch(SQLException | ClassNotFoundException e) {e.printStackTrace();}
        finally
        {
            if(stmt != null) {
                stmt.close();
            }

            if(conn != null) {
                conn.close();
            }
        } 
```

在这里，我对表 PPN_WORKFLOW 和 CREATE_ERF 使用 stmt(PreparedStatement)？

2) PPN_WORKFLOW 表包含更多参数，例如

```
PPN_WORKFLOW(C1_S_Date,C2_F_Date,C2_Completed) 
```

但我想更新 2 和 3 参数，所以我的代码是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:35:55.070

```
String insert = "INSERT INTO PPN_WORKFLOW(C2_F_Date,C2_Completed) VALUES(?,?)";
stmt = conn.prepareStatement(insert); 
```

看起来`prepareStatement()`像工厂方法。给定输入，它返回一个处于特定状态的对象。此时，您传递给它的输入就是`INSERT`语句。

尝试为不同的目的重用同一个对象是没有意义的，因为该方法返回了一个为您提供的参数量身定制的对象，在`insert`. 您将需要创建另一个对象，为不同的目的量身定制。这就是您在代码中所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:05:10.547

`try`如果第二个依赖于第一个使用... `while`... ，则一次向每个表插入值。

```
try{
        //insert to first table
        ///while true
    try{

     //insert to second table
        }finally{

        }
        }finally{
    //close resources
    } 
```

# c++ - using 声明应该有多窄？

> ID：15276125
> 
> 赞同：7
> 
> 时间：2013-03-07T16:14:04.243
> 
> 标签：c++, namespaces, using

我有`widget`一个使用`std::string`. 它在许多地方使用它，通常与`std::vector`. 所以你可以看到，类型名变得很长而且很烦人。

我想利用`using`关键字，即`using std::string;`

问题是，放置它的最佳位置在哪里？

```
// widget.h file
#ifndef WIDGET
#define WIDGET

// (1)
namespace example {
    // (2)

    namespace nested {
        // (3)

        class widget {  
        public:
            // (4)
            ...
        private:
            // (5)
            std::string name_;
            ...
        };

    }
}

#endif 
```

我的问题是：

1.  如果我把它放进去，`(1)`那么包括在内的每个人`widget.h`的范围都会被污染`string`吗？
2.  在地方`(2)`和`(3)`中，它与 1 中的故事相同。只是命名空间`example`和`example::nested`将在第二个文件中被污染，其中包括`widget.h`？
3.  在 place`(4)`和`(5)`中，声明是相当孤立的，但它会在实现（Cpp）文件和继承类中可见吗？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T16:33:00.817

不要在（1）中这样做。
每个人都会诅咒你的名字一千年。
作为您班级的用户，我不介意您污染自己的命名空间。但是如果你污染了我的任何命名空间（包括全局命名空间），我会感到不安，因为这会影响我的代码的编译方式。[为什么“使用命名空间标准”被认为是不好的做法？](https://stackoverflow.com/q/1452721/14065)

您不能在 (4) 或 (5) 处使用它。

因为我（个人）希望将其绑定到尽可能靠近使用点（以防止污染）。
你能做的最好的是（3）。

但我什至不会那样做。我对标准中的任何事情都很明确。但我会 typedef 我的容器类型。

```
private: //(so at 5) Don't need to expose internal details of your class.
    typedef std::vector<std::string>   MyCont; 
```

这是一种更好的技术，因为您只需要在一个地方进行更改，并且更改将级联。

```
// Sub typedefs now will no longer need to change if you change
// The type of container. Just change the container typedef and
// now the iterators are automatically correct.
public: //(so at 4)  Iterators are public (and not exposing the implementation).
    typedef MyCont::iterator       iterator;
    typedef MyCont::const_iterator const_iterator; 
```

# android - 如何使用 Android 在服务器上创建 .txt 文件？

> ID：15276128
> 
> 赞同：0
> 
> 时间：2013-03-07T16:14:10.657
> 
> 标签：android, eclipse, file-upload

我被分配了一个使用 Android 应用程序的任务，用户在设备的屏幕上看到一个“联系我们”表单，一旦他们填写了他们的姓名、主题和问题，程序应该在我的服务器上的特定文件夹中创建一个文件并将文件称为*查询（日期）（时间）*之类的唯一性。我钻研了一下，发现了一些在 /data/data/your_project_package_structure/files/samplefile.txt 中创建文件的代码（链接到帖子： [如何在 Android 中创建文件？](https://stackoverflow.com/questions/1239026/how-to-create-a-file-in-android)

所以我在想：我是使用此代码在本地创建文件，然后使用类似的东西将文件移动到我的服务器，`file.Rename`还是创建一个自定义解决方案（我不知道如何实现）？

如果有人能够就这个问题给我一些建议，我将不胜感激，我希望其他人也觉得这很有帮助。

代码示例将非常受欢迎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:25:00.933

你可以用这两种方式（实际上可能更多......）

我假设您的服务器在 PHP 上运行。其他服务器语言不会真正改变选项，只是执行。

1.  您可以在本地创建文件（似乎您已经知道如何做到这一点），然后将该文件上传到您的服务器。你可以用谷歌搜索上传到`$_FILES`它基本上是一个简单的字节流。服务器只需将文件保存在某处。

2.  将此工作留给您的服务器。只需在帖子或获取请求中发送信息，使用或获取数据`$_GET`并`$_POST`创建文件并保存在服务器上。这可能是我个人的选择，因为你会想要让服务器可以做的任何工作，脱离你更有限的手机，节省数据和电池使用等资源。

# file-upload - 将文件从 flash、iphone、android 设备传输到 LAMP 服务器

> ID：15276131
> 
> 赞同：0
> 
> 时间：2013-03-07T16:14:13.810
> 
> 标签：file-upload, lamp

我有一个 LAMP 服务器，它需要接受来自在客户端计算机上本地运行的 flash 应用程序的文件（即，他们从 Windows 资源管理器中打开 swf 文件）、iphone 应用程序和 android 应用程序。

我的理解是我需要在我的 LAMP 服务器上设置一个 web 服务来实现这一点。基本上，我创建了一个可通过 访问的 PHP 文件，`http://mysite.com/upload.php`它接受 _POST 数据。POST 数据将包含客户端应用程序发送给我的文件。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:30:58.550

我成功地实现了上面的方法。我在这里发布了一个关于 Android 的 Curl 等效项的问题。

[这个 curl 操作的 android 等价物是什么？](https://stackoverflow.com/questions/15279151/what-is-androids-equivalent-for-this-curl-operation)

所以现在其他客户端设备也可以这样做。

# hibernate - 收到意外令牌的错误：在第 1 行，第 135 列附近打开

> ID：15276136
> 
> 赞同：4
> 
> 时间：2013-03-07T16:14:22.707
> 
> 标签：hibernate, hql

我是休眠新手并尝试在休眠中运行查询，但我遇到了异常

```
unexpected token: ON near line 1, column 135 [SELECT A.comp_id.appRefNo .... 
```

这是代码

```
StringBuffer query = new StringBuffer("SELECT A.comp_id.appRefNo, 
    A.comp_id.custId from ");

query.append(LosaCustContactZ.class.getName());

query.append(" A INNER JOIN " + LosaCust.class.getName() + " B 
    ON ( B.comp_id.appRefNo = A.comp_id.appRefNo AND " + 
    "B.comp_id.custId = A.comp_id.custId) INNER JOIN " + LosaApp.class.getName() + " C 
    ON " + "(B.comp_id.appRefNo = A.comp_id.appRefNo) ");

query.append("WHERE C.comp_id.appRefNo != ?" + " AND C.appDt >= ? AND 
    A.contactT = 'PHONE'" ); 

if (StringUtils.isNotEmpty(phoneNums)) {
    query.append(" AND A.contact IN(" + phoneNums + ")");
}

List<LosaCustContactZ> resultList = null;
try {
    resultList = getHibernateTemplate().find(query.toString(), 
           new Object[] { appRefNo, appDate });
} catch (Exception e) {
    String message = e.getMessage();
System.out.println();
}
return resultList; 
```

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T20:22:26.290

许多来自 SQL 的构造不能一对一地移动到 HQL。在 HQL中，使用特定条件连接时，`WITH`使用关键字代替,。`ON`此构造特定于 Hibernate，并且不希望与其他 JPA 提供程序一起使用。

[Hibernate Core 参考手册中关于 HQL 的章节](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/queryhql.html)，尤其是[16.3 关联和连接](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/queryhql.html#queryhql-joins)值得一读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T16:51:54.080

好像您的地图中遗漏了一个映射关联`hbm.xml.`

请参考这里。

[hbm.xml 文件中没有定义的关联](http://www.jumpingbean.co.za/blogs/mark/hibernate)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-27T08:06:55.757

在更正表/列名称后尝试以下代码：

```
public static List<Object[]> getTopRequests(int start, int end)
        throws Exception {
    List<Object[]> list = null;
    Session session = null;

    try {
        session = HibernateUtil.openSession();

        session.beginTransaction();

        Query q = session.createQuery("SELECT "
                + " tr.id as id, "
                + // Column 0
                " tr.amount as amount,"
                + // Column 1
                " tcp.phoneNum as phoneNum, "
                + // Column 2
                " trs.faTitle as faTitle, "
                + // Column 3
                " tr.createDate as createDate "
                + // Column 4
                " FROM TopRequest as tr " + " , TopCellPhone as tcp "
                + ", TopRequestState as trs  "
                + " WHERE tcp.tcpId = tr.tcpId "
                + " AND tr.trsId = trs.trsId  "
                + " ORDER BY tr.updateDate DESC");

        q.setFirstResult(start);
        q.setMaxResults(end - start);
        list = (List<Object[]>) q.list();

        session.getTransaction().commit();

    } catch (Exception e) {
        _log.error(e.getMessage(), e);
    } finally {
        HibernateUtil.closeSession(session);
        return list;
    }
} 
```

# java - 在比较预期调用和实际调用时忽略模拟对象的特定参数

> ID：15276140
> 
> 赞同：0
> 
> 时间：2013-03-07T16:14:29.673
> 
> 标签：java, easymock

我有一堂课如下：

```
public class MyClass{

  Connector con;

  public MyClass(Connector con){
     this.con= con;
  }

  public void save(Xyz xyz){
     //save 2 instances of xyz one with lastupdatetime as 0 and other with 
    // currenttimestamp
     xyz.setLastUpdateTime(0) ; a
     con.save(xyz) ;
     xyz.setLastUpdateTime(Calender.getInstance().getCurrentTimeInMillis() );

     con.save(xyz);   
  }

} 
```

我如何使用easymock编写它的测试用例。

问题是该方法在运行时找到了时间戳。它与模拟对象中的不同。我可以忽略 Xyz 类的特定参数吗

在模拟时我可以指定什么来忽略特定属性？

```
 Easymock.expect(con.save(xyz)).andReturn(something) ?? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:47:53.897

一些你可以做的事情，如果我有选择的话，我会按照粗略的顺序做。

1.  创建或查找包装日历调用的现有时钟类。然后，您可以提供一个模拟时钟，它返回用户定义的时间，因此是可测试的。这是相当普遍的，如果您不直接依赖静态方法，那么从可测试性的角度来看它会更容易。

2.  从类的 getCurrentTime 方法中获取时间，然后您可以覆盖该方法。

3.  编写一个自定义匹配器。示例：[http](http://toddscodenotes.blogspot.com/2009/09/creating-easy-mock-custom-matcher.html) ://toddscodenotes.blogspot.com/2009/09/creating-easy-mock-custom-matcher.html 。

4.  改为使用 EasyMock.capture() 来捕获呼叫。然后您可以检查捕获对象中的字段。

5.  查看 EasyMock (PowerMock?) 的扩展，它能够模拟静态。由于您不是在嘲笑日历，因此不确定这是否适用于此。

# javascript - 访问多个 css 属性

> ID：15276141
> 
> 赞同：1
> 
> 时间：2013-03-07T16:14:30.427
> 
> 标签：javascript, jquery

这种方法是否适合访问多个 css 方法？

```
<script>
$("div").click(function () {
  var html = ["The clicked div has the following styles:"];

  var styleProps = $(this).css( ["width", "height", "color", "background-color"] ); 
```

这就是jquery API正在做的事情。上述访问多个属性的方法是否合适？或者是这样吗？

```
 $.each( styleProps, function( prop, value ) {
    html.push( prop + ": " + value );
  });

 $( "#result" ).html( html.join( "<br>" ) ); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:17:01.513

您从[文档](http://api.jquery.com/css/)中复制了代码，提到它可能会有所帮助，无论如何他们向您展示了他们使用以下方法提取了所有数据：

```
var styleProps = $(this).css( ["width", "height", "color", "background-color"] ); 
```

现在他们通过以下方式操作数据：

```
 $.each( styleProps, function( prop, value ) {
    html.push( prop + ": " + value );
  }); 
```

最后，他们`<br>`在每个名称-值对之间输出结果：

```
$( "#result" ).html( html.join( "<br>" ) ); 
```

# jquery - jQuery - 褪色的 img 变化

> ID：15276143
> 
> 赞同：0
> 
> 时间：2013-03-07T16:14:31.617
> 
> 标签：jquery, class, image, fade

这里我的代码完美运行，但我希望当鼠标悬停在按钮上时，img 标签和新类的更改将平滑淡入。那可能吗？

**jQuery：**

```
 $('.hover').mouseenter(function() {
            $(this).next().removeClass('hide')
            var src = $(this).attr("src").match(/[^\.]+/) + "_hover.svg";
            $(this).attr("src", src)
        });     

        $('.hover').mouseleave(function() {
            $(this).next().addClass('hide')
            var src = $(this).attr("src").replace("_hover.svg", ".svg")
            $(this).attr("src", src)
        }); 
```

**HTML：**

```
<div class="facebook">
           <a href="#">
            <img class="fb_logo hover" src="img/facebook_logo.svg" alt="Facebook Logo" />
            <img class="fb_text hide" src="img/facebook_text.svg" alt="Facebook Text" />
          </a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:47:28.703

不确定这是否是您正在寻找的，但您似乎想要一个简单的淡入/淡出图像切换器。这是一种方法：

```
<div class="facebook">
<a href="#">
    <!-- Start with one image on the page. We'll change the src attribute with JavaScript -->
    <img src="https://dmcohen01.files.wordpress.com/2012/03/5b2145c4aakermit.jpg"/>
</a>
</div>

// Now for the JavaScript:
$('img').mouseenter(function() {
    var self = $(this);
    self.fadeOut('slow', function(){
        self.attr('src', 'http://images4.wikia.nocookie.net/__cb20100831164753/muppet/images/7/70/Firstmatepiggy.jpg').fadeIn('slow');
    });
});

$('img').mouseleave(function(){
    var self = $(this);
    self.fadeOut('slow', function(){
         self.attr('src', 'https://dmcohen01.files.wordpress.com/2012/03/5b2145c4aakermit.jpg').fadeIn('slow');
    });
}); 
```

这是它的工作原理：http: [//jsfiddle.net/brianeoneill/uTpWp/](http://jsfiddle.net/brianeoneill/uTpWp/)

# xpages - XPages：文档的下拉选择

> ID：15276144
> 
> 赞同：0
> 
> 时间：2013-03-07T16:14:34.870
> 
> 标签：xpages

我有一个非常笼统的问题，并且不能 100% 确定我只是懒惰还是什么，我似乎无法掌握从哪里开始 :o)

我是 XPages 编程的新手，并且创建了一个运行良好的应用程序，问题是我希望 UI 与我所拥有的完全不同。我发现我的实现太“像笔记”而不是“像网络”了。好吧，抱怨够了——我有一份文件，其中包含一个县、一个省、一个城市以及该特定城市的一些文本。目前我显示一个按县/省/市列出所有文件的视图（XPage）。用户然后选择城市文件，然后打开该文件以显示文本。工作得很好。如您所见，非常“像笔记一样”。我想要的是：用户看到 3 个下拉字段（其中两个无法选择），然后她/他从下拉列表中选择国家。省份字段现在变为活动状态，仅显示该国家的省份。她/他选择了省，所有城市现在都是下一个下拉菜单 - 一旦您选择了城市，文本就会显示在城市名称下方。我想很简单——现在不管我做什么我都无法让它工作:o(

任何指针（可能是某个地方的示例应用程序？）。

提前致谢

问候乌苏斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:39:15.537

您应该做的第一件事是获取 Mastering XPages 书的副本并通读它。然后你应该看看渲染和部分刷新将如何帮助你做你想做的事。

您将希望将呈现设置为 false，直到您在上一个字段中输入一些值。然后，在这种情况下，您确定该值是否有效并设置一个标志（可能是一个简单的 viewScope）并对下一个字段进行部分刷新。在该字段的属性中，检查刚刚在前一个字段中设置的 viewScope 标志，如果正确，则将呈现重置为 true 以显示该字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:14:17.233

我们已经使用客户端 onchange 事件在 ilsschools.co.uk 的主页上实现了这种功能：

```
var com2 = XSP.getElementById("#{id:comboBox2}");
XSP.partialRefreshGet("#{id:comboBox2}",
    { onComplete : com2.selectedIndex = 0 }); 
```

我们得到了我们想要刷新的元素（即comboBox2，我们也为comboxBox3、4等执行此操作）。然后我们使用partialRefreshGet 来刷新comboBox2 中的选项，这也可以对3、4 和其他comboBoxes 重复。您可以计算组合框的 disabled 属性来禁用它。您可以使用 SSJS 计算组合框的选择。

希望这可以帮助。

# r - 如何用 R 绘制 3D 矩阵的 3D 表面

> ID：15276149
> 
> 赞同：4
> 
> 时间：2013-03-07T16:14:44.410
> 
> 标签：r, graphics, 3d, geometry-surface

我有浮点数的 3D 矩阵，我想使用 R 生成该矩阵的平滑 3D 表面。欢迎提出任何建议。谢谢

现在我正在使用 scatterplot3d ...但是这个函数没有产生平滑的表面

```
x<-read.table("/Users/me/Desktop/data.txt")
scatterplot3d(x$V1, x$V2, x$V3, highlight.3d = TRUE, angle = 30, col.axis = "blue", col.grid = "lightblue", cex.axis = 1.3, cex.lab = 1.1, pch = 20) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:31:04.017

```
require(misc3d)

a <- 2/5

wsqr <-  1 - a^2
w <- sqrt(wsqr)
denom <- function(a,w,u,v) a*((w*cosh(a*u))^2 + (a*sin(w*v))^2)

fx <- function(u,v) -u + (2*wsqr*cosh(a*u)*sinh(a*u)/denom(a,w,u,v))
fy <- function(u,v) 2*w*cosh(a*u)*(-(w*cos(v)*cos(w*v)) - (sin(v)*sin(w*v)))/denom(a,w,u,v)
fz = function(u,v) 2*w*cosh(a*u)*(-(w*sin(v)*cos(w*v)) + (cos(v)*sin(w*v)))/denom(a,w,u,v)

parametric3d(fx = fx, fy = fy, fz = fz, 
             umin = -17, 
             umax = 17, 
             vmin = -77, 
             vmax = 77, 
             n = 100,
             color = c("grey17","grey21","red4","darkred","red4","grey21","grey17"),
             engine = "rgl") 
```

![在此处输入图像描述](../Images/11af9cdafb22d41735b223a185762bda.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:47:02.513

我认为`mba.surf`从`MBA`包装中提取平滑是一个不错的选择，正如上面的 larrydag 所建议的那样，`persp`对它进行成像会很好。下面的代码来自[mba.surf](http://finzi.psych.upenn.edu/R/library/MBA/html/mba.surf.html)函数的帮助页面（为您的 3 列数据框交换 LIDAR）：

```
data(LIDAR)
mba.int <- mba.surf(LIDAR, 300, 300, extend=TRUE)$xyz.est
# Two ways of imaging....
image(mba.int, xaxs="r", yaxs="r")
persp(mba.int, theta = 135, phi = 30, col = "green3", scale = FALSE,
  ltheta = -120, shade = 0.75, expand = 10, border = NA, box = FALSE) 
```

![在此处输入图像描述](../Images/7c78c1d1ee86f2f21bf04f95cea8b651.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T16:28:46.940

如果您能够创建一个二维矩阵 (x,y)，其值为 z 轴值，您可以使用以下

```
persp 
```

这是来自 R Graph Gallery 的示例。[例子](http://gallery.r-enthusiasts.com/graph/Perspective_plot%3Cbr%3EMaunga_Whau,_One_of_50_Volcanoes_in_the_Auckland_Region_26)

# windows - Windows 上的任务和 -gnatP 开关

> ID：15276152
> 
> 赞同：1
> 
> 时间：2013-03-07T16:14:52.477
> 
> 标签：windows, multitasking, ada, gnat

-gnatP（为异步任务操作启用轮询）开关有什么作用？

我正在使用 GNAT 开发一个相当大的游戏项目，文档声称 Windows NT 需要此开关以允许各种异步任务操作。由于我的项目使用了很多任务，我一直在尝试确定我是否真的需要这个开关。

我无法确定的是，在这种情况下，“Windows NT”是专门指 Windows NT 还是基于 NT 的系统。我在这个主题上的搜索变成了空白。

这对我来说是个令人担忧的问题，因为包含轮询代码会对我的项目的运行时性能产生严重影响。没有它，一切似乎都可以正常工作，但是我没有时间进行广泛的测试，而且我仍然害怕我不知道的东西最终会咬我。

所以总结一下：在 Windows 系统上执行任务仍然需要 -gnatP 吗？如果是这样，有没有一种方法可以手动调用轮询器，以便我至少可以对其进行一些控制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:35:26.563

AdaCore 和 GNAT 公开努力在特定平台上与 Ada 一起“做正确的事”。

我对有关 -gnatP 的[GNAT Pro 用户指南的](http://docs.adacore.com/gnat-unw-docs/html/gnat_ugn_4.html)阅读是，仅当您需要程序中的“异步中止和异步控制转移”能力时才需要它。一个“异步中止”我认为是一个“[中止*任务*](http://www.ada-auth.org/standards/12rm/html/RM-9-8.html)”语句，而“[异步控制转移](http://www.ada-auth.org/standards/12rm/html/RM-9-7-4.html)”就是它的本质。

如果您的程序没有使用这些功能中的任何一个，则不需要 -gnatP。

我个人从未使用过 ATC，并且仅在找到更好的方法来实现我想要做的事情之前才使用任务中止。

如果到目前为止您的代码在没有开关的情况下运行良好，那么我猜您没有使用这些功能中的任何一个。如果你继续避免它们，你应该没问题。

# sql - SSAS 的 Web 界面

> ID：15276153
> 
> 赞同：2
> 
> 时间：2013-03-07T16:14:54.087
> 
> 标签：sql, iis, sql-server-2008-r2, ssas, windows-server-2008-r2

我们有几个 SSAS 多维数据集——我们希望这些多维数据集可以通过本地网络上的 HTTP 访问，以便可以通过 iPad 查看它们。Excel 是我们的首选实用程序，但由于 Excel 不适用于 iPad，因此这里不是一个选项。

还有其他方法可以在 IIS 上显示多维数据集并让 iPad 查看器能够访问它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:45:32.140

我相信您的信息已过时 - SharePoint 2013 (Excel Web) 支持 iPad 上的 Safari（iOS 上的 Safari）：

[http://technet.microsoft.com/en-us/library/fp161353.aspx](http://technet.microsoft.com/en-us/library/fp161353.aspx)

# python - python从列表中返回连续整数列表

> ID：15276156
> 
> 赞同：5
> 
> 时间：2013-03-07T16:15:00.327
> 
> 标签：python, lambda, group-by, itertools, continuous

我有一个整数列表，我想生成一个包含所有连续整数列表的列表。

```
#I have:
full_list = [0,1,2,3,10,11,12,59]
#I want:
continuous_integers = [[0,1,2,3], [10,11,12], [59]] 
```

我有以下可行的方法，但似乎是一种糟糕的方法：

```
sub_list = []
continuous_list = []
for x in full_list:
    if sub_list == []:
        sub_list.append(x)
    elif x-1 in sub_list:
        sub_list.append(x)
    else:
        continuous_list.append(sub_list)
        sub_list = [x]
continuous_list.append(sub_list) 
```

我已经看到其他问题表明 itertools.groupby 是一种有效的方法来做到这一点，但我不熟悉这个函数，而且我似乎在编写一个 lambda 函数来描述连续性时遇到了麻烦。

问题：有没有更好的方法来做到这一点（可能使用 itertools.groupby？）

注意事项：full_list 将有 1 到 59 个整数，将始终排序，整数将在 0 到 59 之间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T16:17:17.087

您可以使用以下配方：

```
from operator import itemgetter
from itertools import groupby
full_list = [0,1,2,3,10,11,12,59]
cont = [map(itemgetter(1), g) for k, g in groupby(enumerate(full_list), lambda (i,x):i-x)]
# [[0, 1, 2, 3], [10, 11, 12], [59]] 
```

# php - 如何使用 PHP 将图像摄取到 Fedora Commons？

> ID：15276157
> 
> 赞同：1
> 
> 时间：2013-03-07T16:15:01.177
> 
> 标签：php, curl, fedora-commons

我正在尝试使用 PHP 将图像摄取到 Fedora Commons 存储库中。这是我正在使用的代码：

```
$queryArgs = array(
  "label" => "label goes here", 
  "format" => "info:fedora/fedora-system:METSFedoraExt-1.1", 
  "namespace" => $prefix, 
  "ownerID" => $fedoraUsername, 
  "logMessage" => "log message goes here"
);

$url = sprintf(
  "%s://%s:%d/%s/objects/%s?%s",
  "http",
  $host,
  $port,
  "fedora",
  $prefix . ":" . $identifier,
  http_build_query($queryArgs)
);
$headers = array("Accept: text/xml", "Content-Type: image/jpg");
$userPassword = $fedoraUsername . ":" . $fedoraPassword;
$verifyPeer = false;
$fileContents = file_get_contents("http://localhost/path/to/image.jpg");

$curlOptions = array(
  CURLOPT_URL => $url,
  CURLOPT_HTTPHEADER => $headers,
  CURLOPT_USERPWD => $userPassword,
  CURLOPT_HTTPAUTH => CURLAUTH_BASIC,
  CURLOPT_SSL_VERIFYPEER => $verifyPeer,
  CURLOPT_FOLLOWLOCATION => true,
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_POST => true,
  CURLOPT_POSTFIELDS => $fileContents
);

$curlHandle = curl_init();
curl_setopt_array($curlHandle, $curlOptions);
curl_exec($curlHandle);
error_log(print_r(curl_getinfo($curlHandle), true)); 
```

最后，我打印出`curl_getinfo`必须说的话，特别是`[http_code] => 415`.

> HTTP 错误 415 不支持的媒体类型

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:34:44.150

我终于弄明白了。我最终提出了两个不同的请求：一个是在 Fedora 中创建一个新的空对象，另一个是为该对象附加一个数据流。这是代码（我将所有这些都放在一个名为 Fedora 的类中，但这不是必需的，可能不适合您的需要）：

```
<?php
    class Fedora {
        // Use cURL with the provided functions and return the result if the HTTP Code recieved matches the expected HTTP Code
        private function curlThis($curlOptions, $expectedHttpCode) {
            $returnValue = false;
            try {
                $curlHandle = curl_init();
                if ($curlHandle === false) {
                    throw new Exception(
                        "`curl_init()` returned `false`"
                    );
                }
                $settingOptionsSucceeded = curl_setopt_array($curlHandle, $curlOptions);
                if ($settingOptionsSucceeded === false) {
                    throw new Exception(
                        sprintf(
                            "`curl_setopt_array(...)` returned false. Error: %s. Info: %s",
                            curl_error($curlHandle),
                            print_r(curl_getinfo($curlHandle), true)
                        ),
                        curl_errno($curlHandle)
                    );
                }
                $curlReturn = curl_exec($curlHandle);
                if ($curlReturn === false) {
                    throw new Exception(
                        sprintf(
                            "`curl_exec(...)` returned false. Error: %s. Info: %s",
                            curl_error($curlHandle),
                            print_r(curl_getinfo($curlHandle), true)
                        ),
                        curl_errno($curlHandle)
                    );
                }
                $httpCode = curl_getinfo($curlHandle, CURLINFO_HTTP_CODE);
                if ($httpCode === false) {
                    throw new Exception(
                        sprintf(
                            "`curl_getinfo(...)` returned false. Error: %s.",
                            curl_error($curlHandle)
                        ),
                        curl_errno($curlHandle)
                    );
                }
                if ($httpCode !== $expectedHttpCode) {
                    throw new Exception(
                        sprintf(
                            "`curl_getinfo(...)` returned an unexpected http code (expected %s, but got %s). Error: %s. Complete info: %s",
                            $expectedHttpCode,
                            $httpCode,
                            curl_error($curlHandle),
                            print_r(curl_getinfo($curlHandle), true)
                        ),
                        curl_errno($curlHandle)
                    );
                }
                $returnValue = $curlReturn;
            } catch (Exception $e) {
                trigger_error(
                    sprintf(
                        "(%d) %s",
                        $e->getCode(),
                        $e->getMessage()
                    ),
                    E_USER_ERROR
                );
            }
            return $returnValue;
        }

        // Create a new empty object in Fedora Commons and return its pid
        private function createNewEmptyObject($prefix, $id) {
            $returnValue = false;

            // Build URL
            $protocol = variable_get("fedora_protocol");    // 'http'
            $host = variable_get("fedora_host");
            $port = variable_get("fedora_port");    // '8082'
            $context = variable_get("fedora_context");  // 'fedora'
            $pid = $prefix . ":" . $id;
            $url = sprintf(
                "%s://%s:%d/%s/objects/%s",
                $protocol,
                $host,
                $port,
                $context,
                $pid
            );

            // Build cURL options
            $userPassword = variable_get("fedora_username") . ":" . variable_get("fedora_password"); // username:password
            $verifyPeer = false; // false for ignoring self signed certificates
            $headers = array("Accept: text/xml", "Content-Type: text/xml");
            $curlOptions = array(
                CURLOPT_URL => $url,
                CURLOPT_HTTPHEADER => $headers,
                CURLOPT_USERPWD => $userPassword,
                CURLOPT_HTTPAUTH => CURLAUTH_BASIC,
                CURLOPT_SSL_VERIFYPEER => $verifyPeer,
                CURLOPT_FOLLOWLOCATION => true,
                CURLOPT_RETURNTRANSFER => true,
                CURLOPT_POST => true
            );

            // Try `cURL`ing
            $result = $this->curlThis($curlOptions, 201);
            if ($result === $pid) {
                $returnValue = $result;
            }
            return $returnValue;
        }

        private function attachDatastream ($pid, $file, $datastreamID) {

            $returnValue = false;

            // Build URL
            $protocol = variable_get("fedora_protocol");    // "http"
            $host = variable_get("fedora_host");
            $port = variable_get("fedora_port");    // 8082
            $context = variable_get("fedora_context");  // fedora
            $url = sprintf(
                "%s://%s:%d/%s/objects/%s/datastreams/%s?controlGroup=M",   // M stands for 'Managed Content'
                $protocol,
                $host,
                $port,
                $context,
                $pid,
                $datastreamID
            );

            // Build cURL options
            $userPassword = variable_get("fedora_username") . ":" . variable_get("fedora_password"); // username:password
            $verifyPeer = false; // false for ignoring self signed certificates
            $headers = array("Accept: text/xml", "Content-Type: " . $file->filemime);
            $fileContents = file_get_contents("sites/default/files/images/" . $file->filename);
            $curlOptions = array(
                CURLOPT_URL => $url,
                CURLOPT_HTTPHEADER => $headers,
                CURLOPT_USERPWD => $userPassword,
                CURLOPT_HTTPAUTH => CURLAUTH_BASIC,
                CURLOPT_SSL_VERIFYPEER => $verifyPeer,
                CURLOPT_FOLLOWLOCATION => true,
                CURLOPT_RETURNTRANSFER => true,
                CURLOPT_POST => true,
                CURLOPT_POSTFIELDS => $fileContents
            );

            // Try `cURL`ing
            $result = $this->curlThis($curlOptions, 201);
            if ($result === $pid) {
                $returnValue = $result;
            }
            return $returnValue;
        }

        public function ingest($namespace, $identifier, $file) {
            $pid = $this->createNewEmptyObject($namespace, $identifier);
            if ($pid) {
                $result = $this->attachDatastream($pid, $file, "IMAGE");
                if ($result) {
                    error_log("Successfully ingested a file!");
                } else {
                    error_log("FAILED ATTACHING DATASTREAM TO NEW OBJECT");
                }
            } else {
                error_log("FAILED CREATING NEW EMPTY OBJECT");
            }

        }
    }
    $fedora = new Fedora();
    /*
     * $file is an object obtained by uploading a file into a drupal file system (at /drupal/sites/default/files/images/singe.jpg). It has the following attributes:
     * $file->filemime === "image/jpeg"
     * $file->filename === "singe.jpg"
     */
    $fedora->ingest('namespace', 'identifier', $file);

?> 
```

# c# - 使用 WebClient 下载多个文件时无限循环

> ID：15276158
> 
> 赞同：3
> 
> 时间：2013-03-07T16:15:02.250
> 
> 标签：c#, multithreading, download, webclient

概念：我正在制作一个从给定 URL 下载文件的 C# 应用程序。文本框，添加的 url，文件下载，每个事件都以正确的方式发生。

我正在尝试重新创建此程序以逐个下载多个文件。我有一个带有一个 url/line 的文本框，解析正确，我将所有链接放在一个字符串数组中，该数组放在文本框中。然后它开始异步下载，我想让它只下载一个，所以我在foreach循环中做了一个while循环，因为我不想在当前一个url完成下载之前转到下一个url。

问题是：我进入了一个无限循环（虽然我之前做了这个工作（idk how），如果我在while循环中放置了一个消息框（注意：我在一分钟前重试，这次没有成功） ）。

我将只显示代码片段：

```
foreach (string url in urllist)
{
    isdonwloaded = false;
    string filename = url.Split('/').Last();
    label3.Text = filename;
    webclient.DownloadFileAsync(new Uri(url), @"C:\Users\Krisz" + @"\" + filename);

    while (!isdonwloaded) // this was the first idea, but with webclient.IsBusy it did the same thing
    {
        // MessageBox.Show(counter);
        Thread.Sleep(1000);
        label8.Text = "Download in progress...";
    }

    counter++;
    label8.Text = "Done!";
}

// Events:
webclient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(webc_DownloadProgressChanged);
webclient.DownloadFileCompleted += new AsyncCompletedEventHandler(webc_DownloadFileCompleted);

// The DownloadFileCompleted event:
void webc_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
{
    label7.Text = String.Format("Files {0} / {1}", counter, arraylength(urllist));
    isdonwloaded = true;
} 
```

我研究了这个线程：[WebClient.DownloadFileAsync - 一次下载一个文件](https://stackoverflow.com/questions/2042258/webclient-downloadfileasync-download-files-one-at-a-time)，但我无法让它以这种方式工作。（也许我误解了什么？）

有人可以给我一些提示，我做错了什么？我从来没有真正使用过事件，所以遇到错误只是时间问题。非常感谢每一点帮助，这个程序对我来说将是一个有用的程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T16:33:33.197

好的，首先，了解为什么您的代码现在不起作用。

想象一下，办公室里有两个人。两者都有“盒子”。他们的工作流程是：他们检查收件箱。如果收件箱中有任务，他们会执行任务直到完成，然后再次检查他们的收件箱，重复。

工人 1 在他们的收件箱中收到一条消息，说明您的下一个任务是：

*   关掉开关
*   将标签更改为“正在下载”
*   告诉工人 2 下载文件
*   检查开关是否打开——如果打开则跳出循环；如果没有，那就睡一秒钟。
*   返回上一步
*   将标签更改为“完成”
*   此任务现已完成

工人 1 关闭开关并将以下任务放入工人 2 的收件箱：

*   下载文件
*   告诉工人 1 打开开关
*   这个任务完成了

工人 1 然后检查开关是否打开。不是，所以工人 1 去睡觉了。

工人 2 下载文件，然后在工人 1 的收件箱中放入一条消息，内容为：

*   打开开关
*   这个任务完成了

现在你明白为什么工人 1 永远睡觉了，对吧？该开关永远不会被翻转，因为工人 1 的工作是翻转该开关，而工人 1*在它被翻转之前一直在*睡觉。工作人员 1 在当前任务完成之前不会查看他们的收件箱，并且当前任务在切换该开关之前不会完成。

这给了我们一个解决方案的想法，但这不是一个好的解决方案。

解决这个问题的廉价、肮脏、危险和不明智的方法是使用“DoEvents”而不是“Sleep”。这将任务更改为：

*   关掉开关
*   将标签更改为“正在下载”
*   告诉工人 2 下载文件
*   检查开关是否打开——如果打开则跳出循环；如果没有，请检查您的收件箱中的消息并执行您在其中找到的任何操作。
*   返回上一步
*   将标签更改为“完成”
*   这个任务完成了

这解决了您的直接问题，但它引入了新问题。我们现在不再有一个干净的工作流程；一个收件箱任务可以产生第二个收件箱任务，而后者又可以产生第三个收件箱任务。任务可以成为“重入”，其中一个任务最终会启动其*自身*的第二个版本。这个解决方案是不优雅的，并且会导致难以调试的情况。理想情况下，您希望收件箱任务具有在*旧任务完成后启动新*任务的属性，而不是*在旧任务仍有工作要做时*启动。

对于您的问题（如果您使用的是 C# 5），一个更好的廉价和肮脏的解决方法是使用

```
await Task.Delay(1000); 
```

而不是`Sleep`or `DoEvents`。这对工作流程进行了微妙的改变。基本上它变成：

*   关掉开关
*   将标签更改为“正在下载”
*   告诉工人 2 下载文件
*   检查开关是否打开
*   如果它打开，则将标签更改为“完成”；这个任务完成了。
*   如果没有，请让工人 3 在一秒钟内向我发送任务；这个任务完成了。

如果工人 3 被告知要向工人 1 发送一个新任务，那么它发送的新任务是：

*   检查开关是否打开
*   如果它打开，则将标签更改为“完成”；这个任务完成了。
*   如果没有，请让工人 3 在一秒钟内向我发送任务；这个任务完成了。

您看到这如何巧妙而正确地改变了工作流程？现在工人 1 将标签更改为下载，向工人 2 发送消息，检查开关，向工人 3 发送消息，然后返回其收件箱。工作人员 2 进行下载并向工作人员 1 发送消息。工作人员 1 拨动开关并返回收件箱。工人 3 向工人 1 发送消息。工人 1 检查开关，将标签更改为完成，然后返回收件箱。

现在*没有任务告诉您在收件箱中查找更多任务*。每个收件箱任务都*按顺序*处理：迟到的任务总是在先到的任务完成后开始。

然而，最好的解决方案是有一个版本`DownloadClientAsync`本身可以返回一个可以等待的任务。不幸的是，它是返回无效的。构建一个返回`Task`可以等待的特殊版本的 DownloadClientAsync 留作练习。一旦有了这样的辅助方法，代码就变得微不足道了；你只是`await`那个任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:42:52.853

您是否尝试将事件订阅代码从当前行转移到以下行：

```
webclient.DownloadFileAsync(new Uri(url), @"C:\Users\Krisz" + @"\" + filename);

  webclient.DownloadFileCompleted -= new AsyncCompletedEventHandler(webc_DownloadFileCompleted); 
//Also it's a good practice to unsubscribe to event once after we are out-of-scope.

 webclient.DownloadFileCompleted += new AsyncCompletedEventHandler(webc_DownloadFileCompleted); 
```

当我这样做时，其余的对我来说都很好，否则就像你说的那样屏幕是空白的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:41:27.817

我认为这与 BackgroundWorker 类非常相似，其中 CompletedEventHandler 在主线程上运行。（我目前找不到任何证实这一点的结果。）

这意味着您的主循环将永远不会被中断 - 您必须退出主 URL 循环并返回 UI，然后才能触发 webc_DownloadFileCompleted。

一种可能的解决方法是在您的第一个 URL 上运行 SINGLE webclient 异步下载，然后返回主 UI。您的 webc_DownloadFileCompleted 函数可以重新发出下一个异步下载调用。

# asp.net - SSRS 报告超链接在 .net 应用程序中失去功能

> ID：15276160
> 
> 赞同：0
> 
> 时间：2013-03-07T16:15:07.267
> 
> 标签：asp.net, reporting-services, ssrs-2008, ssrs-grouping

我有一个使用**RowGroups对数据进行分组的****SSRS 报告**。该组中使用的字段之一是将 URL 存储为文本的字段。我在文本框上设置了 Go To URL 操作，使其能够充当超链接，打开存储为字段中文本的 URL *（即 =Fields!URL.value）*。

 ***文本框在 BIDS 和报告管理器中工作正常，但是当通过我们的自定义 .asp 报告应用程序访问报告时，文本框失去了此链接功能。它只是变成文本。当鼠标悬停在文本框上时，光标不会改变。我在 RowGrouping 之外的报表上创建了另一个文本框，并以相同的方式对其进行了配置，它在报表管理器和报表应用程序中运行良好。

在报告应用程序的 RowGroup 中时，是否有任何特定的配置可以限制 Go to Action 属性？这可能是报告的问题，还是报告应用端的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:39:19.207

如果您使用 ReportExecutionService 检查以确保设备信息参数中的 Javascript 为真？

```
<DeviceInfo>
    <JavaScript>True</JavaScript>
</DeviceInfo> 
```

但你说如果它在报告的另一部分有效？

[链接到 <DeviceInfo> 详细信息](http://msdn.microsoft.com/en-us/library/ms155397.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:47:48.097

从来没有真正找到这个问题的答案，但我使用的一个解决方法是在分组文本框的右侧放置一个文本框，链接似乎可以正常工作。***

# c# - Binary Search - 如何将 +5M 记录从文件加载到 Range [] 大批？

> ID：15276164
> 
> 赞同：-1
> 
> 时间：2013-03-07T16:15:09.137
> 
> 标签：c#, binary-search

[这个问题是我之前关于二分搜索的问题（针对 +5M 记录表的快速内存范围查找](https://stackoverflow.com/questions/15262525/fast-in-memory-range-lookup-against-5m-record-table)）的后续问题。

我有超过 500 万条记录/行的顺序文本文件，格式如下。我需要将它加载到`Range<int>[]`数组中。如何及时做到这一点？

文件格式：

```
start int64,end int64,result int
start int64,end int64,result int
start int64,end int64,result int
start int64,end int64,result int
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:33:59.547

这是一个典型的（？）[生产者-消费者问题](http://en.wikipedia.org/wiki/Producer-consumer_problem)，可以使用多个线程来解决。在您的情况下，生产者正在从磁盘读取数据，而消费者正在解析行并填充数组。我可以看到两种不同的情况：

*   **生产者（生产者）比消费者快得多：**在这种情况下，您应该尝试使用更多消费者线程；
*   **消费者比生产者快得多：**除了影响硬件配置（例如购买更快的硬盘或使用 RAID 0）之外，您无法做太多事情来加快速度。在这种情况下，我什至不会使用多线程解决方案，因为它不值得增加复杂性。

[这个问题](https://stackoverflow.com/questions/733793/implementing-the-producer-consumer-pattern-in-c-sharp)可能会帮助您在 C# 中实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:21:49.400

我会假设你有一个好的磁盘。扫描文件一次并计算条目数。如果你能保证你的文件没有空行，那么你可以只计算其中的换行数——实际上不要解析每一行。

现在，您可以使用恰好那么多条目分配一次数组。这避免了数组的过度重新分配：

```
var numEntries = File.ReadLines(filepath).Count();
var result = new Range<int>[numEntries]; 
```

现在再次读取文件并使用以下代码创建范围对象：

```
var i = 0;
foreach (var line in File.ReadLines(filepath))
{
   var parts = line.Split(',');
   result[i++] = new Range<int>(long.Parse(parts[0]), long.Parse(parts[1]), int.Parse(parts[2]);
}

return result; 
```

根据需要加入一些错误处理。这段代码很容易理解。在您的目标环境中尝试一下。如果它太慢，那么你可以开始优化它。我不会过早地优化，因为这会导致可能不需要的更复杂的代码。

# postgresql - 在不查询数据库的情况下将经纬度转换为 PostGIS 几何

> ID：15276168
> 
> 赞同：8
> 
> 时间：2013-03-07T16:15:29.340
> 
> 标签：postgresql, sqlalchemy, postgis

我在 postgresql 中有一个带有 PostGIS geometry(point, 4326) 列（位置，使用 SRID 4326）的表，我有一个 Python 应用程序，它使用 SQL Alchemy 更新表（其余列）没有任何问题。

现在，我需要更新位置列，并且我知道我可以使用给定位置的正确文本表示来使用 SQL Alchemy 更新列，而无需使用 GEOAlchemy，例如，我可以使用以下值更新列：'0101000020E6100000AEAC7EB61F835DC0241CC418A2F74040 '

对应于 lat:33.9346343 long:-118.0488106

问题是：有没有一种方法可以在 Python 中计算这个 '0101000020E6100000AEAC7EB61F835DC0241CC418A2F74040' 并将这个 (33.9346343 ,-118.0488106) 作为输入而不查询数据库？或使用正确的文本输入更新列的任何方法？

我知道我可以使用 SQLAlchemy 来执行这个查询：

```
select st_setsrid(st_makepoint(-118.0488106, 33.9346343),4326) 
```

并获取更新列的值，但我想避免这种情况。

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T18:40:08.080

这个问题的解决方案比看起来要容易得多。要使用文本和输入 lat-long 更新字段，我需要做的就是在文本分配中定义 SRID：

位置 = 'SRID=4326;POINT(-118.0488106 33.9346343)'

这将正确更新 geometry(point,4326) 列，当您在表中进行选择时，该列的值是预期的值：

“0101000020E6100000AEAC7EB61F835DC0241CC418A2F74040”

多谢你们！

# c# - 确定UDP主机是否可达？

> ID：15276174
> 
> 赞同：1
> 
> 时间：2013-03-07T16:15:48.320
> 
> 标签：c#, windows-store-apps

我有一个地铁应用程序使用 UDP 通过 wifi 与设备通信。但是，当我断开设备与网络的连接或在设备断开连接的情况下启动应用程序时，什么也没有发生。ConnectAsync 不会引发异常，应用程序不会引发异常，应用程序运行起来就像没有任何问题一样。我无法 ping 另一端，但如果我给它一个格式化的字符串，它会响应。该设备当前连接到可以访问 Internet 的路由器，但我最终计划使用没有 Internet 访问权限的路由器。我从来没有用UDP做过任何事情，所以我在这里不知所措。

这是一个 UDP 侦听器/编写器的实现（取自 Pete Bright 在 10rem.net）

```
class Network
    {
        private DatagramSocket _socket;
        public bool IsConnected { get; set; }
        public bool recieved;
        public string ret;

        public Network()
        {
            IsConnected = false;

            _socket = new DatagramSocket();

            _socket.MessageReceived += OnSocketMessageReceived;
        }

        public async void Connect(HostName remoteHostName, string remoteServiceNameOrPort)
        {
            try
            {
              await  _socket.ConnectAsync(remoteHostName, remoteServiceNameOrPort);
            }
            catch (Exception e)
            {
                    var msg = new MessageDialog(e.ToString());
                    msg.ShowAsync();
            }
            IsConnected = true;
        }

        private void OnSocketMessageReceived(DatagramSocket sender, DatagramSocketMessageReceivedEventArgs args)
        {
              var reader = args.GetDataReader();

                var count = reader.UnconsumedBufferLength;

                var data = reader.ReadString(count);

                ret = data.Trim();

                recieved = true;

        }

        DataWriter _writer =null;
        public async void SendMessage(string message)
        {
            if (String.IsNullOrEmpty(message)) return;
            if (_writer == null)
            {
                var stream = _socket.OutputStream;
                _writer = new DataWriter(stream);
            }

            _writer.WriteString(message);

            await _writer.StoreAsync();
        }            

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:22:02.910

UDP 套接字是“无连接”的，因此协议不知道服务器和客户端是否连接。要知道 aa 连接是否仍然“活动”，您必须实施自己的连接检测。

我可能会推荐阅读 beej 的套接字指南。这是一本很好的书，很有趣： [http ://beej.us/guide/bgnet/](http://beej.us/guide/bgnet/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:05:57.247

如前所述，没有像 tcp/ip 中带有 sync/ack 等的概念来来回通信并确保存在某些东西。

客户端既没有连接也没有断开连接，只是真正地监听或发送。因此，话虽如此，您需要从客户端实现接收超时。

UDP 有一些有趣的笑话，因为您发送数据实际上只是将其扔到太空中。接收数据包的顺序也无关紧要，否则您也被困在此处实施自己的方案。

您在这里需要做的实际上是尝试访问设备。如果您关心，那么您可以每 X 秒执行一次。

如此处所述：[如何测试远程 UDP 端口](https://stackoverflow.com/questions/9265669/how-to-test-a-remote-udp-port)

（跟我来，下面有一个更好的方法，但想提供多种方法）

```
您可以使用 UdpClient，在底层套接字上设置接收超时，
连接到该远程服务器/端口，发送一些小消息
 (byte[] !) 并调用 Receive。

如果端口关闭，您会收到一个异常，说明连接
被强行关闭（SocketException with
 错误代码 10054 = WSAECONNRESET)... 这意味着端口未打开。

```

但是-我认为更好的方法是实际上就协议 ID 或客户端每 X 秒发送的某些特定数据达成一致。如果收到，则更新您的“客户端连接”表，否则认为它们已断开连接，直到客户端发送带有协议 id 的数据包。

您可能可以轻松适应 c# 的一个*很棒的*系列在： http: [//gafferongames.com/networking-for-game-programmers/virtual-connection-over-udp/](http://gafferongames.com/networking-for-game-programmers/virtual-connection-over-udp/)

我相信您上面的代码也可以重构为仅将 Send() 发送到地址而不是连接，因为确实没有真正的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:10:47.933

To help out people that stumble upon this:Apparently my google-fu is pretty weak. [This](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj710176.aspx) shows how to set timeouts for TCP and UDP sockets. Default behavior is to never time out(which is consistent with what I saw).

Edit: It doesn't work. Even with a timeout of 500ms I'm still seeing the same behavior of "no exception thrown".

# python - 如何在 Python 中使用 ElementTree 找到具有特定名称属性的元素

> ID：15276176
> 
> 赞同：0
> 
> 时间：2013-03-07T16:15:52.450
> 
> 标签：python, elementtree

我正在使用 ElementTree 并有一个我想在 Python 中找到其元素的名称列表。

我有一个名单名称

```
namelist = ['jenna', 'bob', 'sue'] 
```

对于这些名称中的每一个，我想找到它们的整个元素并将其写入文件。我的文件格式是这样的

```
<fistnames>
<firtname name = 'jenna'>
...
</firstname>
</firstnames> 
```

然后我尝试了以下方法来找到与列表对应的名字元素。

```
for eachfirstname in namelist:
    firstnames = library.find('firstnames')
    **firstname = firstnames.find('firstname', @name=firstname)** 
```

这不起作用...根据属性值查找元素的正确语法是什么——在这种情况下`name`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:23:28.623

您可以为此使用 xpath 表达式：

```
for name in namelist:
    firstname = library.find('.//firstname[@name="{}"]'.format(name)) 
```

# svn - 如何在 Hudson 中使用 SVNAnt 导入或添加和提交 UNVERSIONED COPY 到 Subversion？

> ID：15276177
> 
> 赞同：2
> 
> 时间：2013-03-07T16:15:56.343
> 
> 标签：svn, hudson, svnant

我们正在运行 Hudson 版本。1.395 作为 CI 服务器，StarTeam 作为存储库。我们计划将 Subversion 作为 Repository（安装了 Hudson Server Plugin 2.3.3）。在 Hudson 中使用 SVNAnt (ver 1.3.1) 脚本从 SVN 服务器签出没有问题，但是我们不能 IMPORT 或 ADD 和 COMMIT UNVERSIONED COPY 到 SVN。

```
<project name="***">        
    …   
    <path id="svn.classpath">
        <!--pathelement location="${svn.lib}/svnant.jar"/-->
        <fileset dir="${svn.lib}">
            <include name="svnant.jar"/>
            <include name="ganymed.jar"/>
            <include name="jna.jar"/>
            <include name="svnClientAdapter.jar"/>
            <include name="svnjavahl.jar"/>
            <include name="svnkit.jar"/>
        </fileset>
    </path> 

    <!-- Load the SVN Task -->
    <typedef resource="org/tigris/subversion/svnant/svnantlib.xml" classpathref="svn.classpath" />

    <!-- SVN Checkout -->
    <target name="svn-checkout">
        <svn username="${svn-user}" password="${svn-password}" svnkit="true" javahl="false">
            <checkout url="${svn-url}" revision="HEAD" destPath="${env.WORKSPACE}" />
            <info target="${env.WORKSPACE}"/>
        </svn>
    </target>

    <!-- SVN Add & Commit -->   
    <target name="svn-add">
        <svn username="${svn-user}" password="${svn-password}" svnkit="true" javahl="false">
            <add dir="${env.WORKSPACE}" force="true"/>
            <info target="${env.WORKSPACE}"/>
        </svn>
    </target>

    <target name="svn-commit">  
        <svn username="${svn-user}" password="${svn-password}" svnkit="true" javahl="false">
            <commit dir="${env.WORKSPACE}" message="${svn.message}"/>
            <info target="${env.WORKSPACE}"/>
        </svn>
    </target> 
```

![Commit-Output][1] 但是我们可以使用 TortoiseSVN(1.7.11) 或使用 CollabNer Subverison Client(1.7.8) 的命令行和 ant 脚本来完成检出、添加、提交、导入未版本化或版本不足的副本的所有任务. 我很感激你的时间。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:52:47.717

```
 <svn verbose="true" refid="svn.settings">
        <add dir="${svn_folder}" force="true" recurse="true" />
        <commit dir="${svn_folder}" message="${version}"/>
    </svn> 
```

# ios - 如何在 Amazon S3 Bucket 的文件夹中获取文件列表

> ID：15276180
> 
> 赞同：2
> 
> 时间：2013-03-07T16:15:58.757
> 
> 标签：ios, objective-c, amazon-s3, directory

好的，我看到[这个](https://stackoverflow.com/questions/9329234/amazon-aws-ios-sdk-how-to-list-all-file-names-in-a-folder)和[这个](https://stackoverflow.com/questions/15022707/how-to-use-aws-ios-sdk-to-delete-a-folder-and-all-its-objects-in-side-bucket)[文档](http://docs.aws.amazon.com/AmazonS3/latest/dev/ListingKeysHierarchy.html)告诉亚马逊是平面文件系统，并且要创建/获取/设置文件夹，必须使用 Delimiter='/' 和前缀。

但我没明白，我的意思是我不能写代码。所以我有一个存储桶和一个包含一些文件的文件夹，我想要这些文件的列表

所以我尝试了， `bucket/folder`所有这些都失败了。`/bucket/folder/``bucket/folder/`

如果我只尝试`bucket`，它工作正常

```
S3ListObjectsRequest *getListObjectsRequest= [[S3ListObjectsRequest alloc] initWithName:@"bucket"]; // tried also here bucket/folder , /bucket/folder/ ,  bucket/folder/ 
    S3ListObjectsResponse *getListObjectsResponse = [self.s3 listObjects:getListObjectsRequest];

    //test to see inside of the folder
    NSArray *objectsinamazon = [self.s3 listObjectsInBucket:@"bucket"]; //as I said I tried bucket/folder , /bucket/folder/ ,  bucket/folder/ all od this fails.

    NSLog(@"array is %@",objectsinamazon);

    S3ListObjectsResult *listObjectsResults = getListObjectsResponse.listObjectsResult;

    for (S3ObjectSummary *objectSummary in listObjectsResults.objectSummaries) {

        NSLog(@"Bucket Contents %@:",[objectSummary key]);
       //get last modified date of file by using meta data
    S3GetObjectMetadataRequest *getMetadataRequest = [[S3GetObjectMetadataRequest alloc] initWithKey:[objectSummary key] withBucket:@"bucket"];
    S3GetObjectMetadataResponse *getMetadataResponse = [self.s3 getObjectMetadata:getMetadataRequest];

}
} 
```

我要求确切的语法（代码）向`bucket/folder`亚马逊 s3 发送请求

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:34:10.577

S3 不是平面的，它只有两个层次：桶和对象名称（它在桶内是平面**的**）。桶永远只是桶。您正在尝试添加到您的存储桶名称，这会产生无效的存储桶名称。

prefix 和 delimiter 参数是[S3ListObjectsRequest 上](http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/S3ListObjectsRequest.html#properties)的属性。我的 Objective-C 生锈了，但我认为你可以设置这些属性：

```
getListObjectsRequest.prefix = @"my/prefix/";
getListObjectsRequest.delimiter = @"/"; 
```

在向 S3 提交请求之前。

# html - 为什么我的 HTML 中会出现带有问号的菱形？

> ID：15276191
> 
> 赞同：36
> 
> 时间：2013-03-07T16:16:21.543
> 
> 标签：html

我有一个无序列表，并且经常（但不总是！）出现在字符之间有两个空格的位置。是什么原因造成的，我该如何预防？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-07T16:18:22.200

此特定字符 � 通常是在已声明为 UTF-8 的输出（如页面）中显示的无效（非 UTF-8）字符的符号。它经常发生在

*   数据库连接不是 UTF-8 编码的（即使表是）

*   HTML 或脚本源文件以错误的编码存储（例如 Windows-1252 而不是 UTF-8） - 确保将其保存为 UTF-8 文件。该设置通常位于“另存为...”对话框中。

*   获取不提供 UTF-8 的在线资源（如小部件或 RSS 提要）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-24T17:19:01.890

我遇到过同样的问题 ....

您可以通过在模板中添加以下行来修复它！

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T16:19:44.940

这是字符集问题。获取一个检查服务器响应标头的工具（如果您使用的是 Mozilla Firefox，则如 Firebug 扩展）以查看服务器响应与内容一起发送的字符集。如果服务器的字符集和实际内容的 HTML 字符集不匹配，你会看到一些奇怪的字符，比如那些黑色的小方块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-19T13:43:16.900

从 XSLT 获取 HTML 输出时，我遇到了同样的问题。除了 Pradip 的解决方案，我还能够使用 UTF-32 解决问题。

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-32" /> 
```

# graphics - 如何找到自定义形状特定区域？

> ID：15276192
> 
> 赞同：0
> 
> 时间：2013-03-07T16:16:23.697
> 
> 标签：graphics, graph, geometry, computational-geometry, java-2d

**请看下图，这里你可以看到蓝色矩形是自定义形状边界，自定义形状是鞋子，我想找到写在图像中的部分区域，我想要矩形形式的区域**

有没有路径迭代器的概念？

## 笔记

我从相同大小的图像派生的自定义形状。

![在此处输入图像描述](../Images/6c280d56bb5a97463dc17bf91c0fd8c6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T16:53:58.050

我会这样做：

1.为所有边界框矩形周边线创建表

*   其中的每个值都将代表空白空间长度形成边界线形状
*   像这样的东西：

![形状周边空间](../Images/e410f7517ef3989c71c26014400bb867.png)

*   这些值是通过简单的图像扫描找到的，直到找到第一个非空间颜色

2.现在蛮力找到最大的矩形区域

```
x,y = top left corner
 for  xs = 1 to bounding box width
  now scan the max valid height of rectangle from x to x + xs (x grows to the right)
  // it should be the min y0[x..x+xs]
   remember the biggest valid area/size combination 
```

*   对所有 4 种组合执行此操作（其他角的星号）

我现在蛮力很慢但是

*   您可以不按像素划分周界线，而是通过一些步骤来划分
*   我也相信这可以以某种方式进行优化
*   例如通过周长的推导找到极值并从它们向后检查
*   当尺寸开始缩小然后停止...
*   当然要记住，在复杂的形状上，这种优化不起作用......

# jquery - jQuery：删除元素时清除递归setTimeout

> ID：15276193
> 
> 赞同：0
> 
> 时间：2013-03-07T16:16:24.103
> 
> 标签：jquery, ajax, dom, recursion

我试图通过递归 $.ajax() 调用从服务器检索信息，但希望在它们绑定到的元素被删除时关闭这些调用。

```
function check_for_update($element) {

    // this is where I need your help fellas:
    $does_this_element_currently_reside_in_the_dom = ????? ; 

    if ($does_this_element_currently_reside_in_the_dom) {
        $.ajax({ ... });
        setTimeout(function() { 
            check_for_update($element) 
        }, 1000);
    } 
}
$ele = $('<div id="element1"></div>');

// start recursion
check_for_update($ele); 
```

从 DOM 中移除元素应该会停止递归：

```
$ele.remove(); 
```

由于可以通过多种方式删除元素，因此为每个场景编写回调会很麻烦。（即：可以删除，可以删除其父级，可以删除其父级的父级....）。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:21:58.360

检查元素是否存在于 setTimeout 中并清除计时器。见下文，

```
function check_for_update($element) {

    var timer; //added
    // this is where I need your help fellas:
    $does_this_element_currently_reside_in_the_dom = ????? ; 

    if ($does_this_element_currently_reside_in_the_dom) {
        $.ajax({ ... });
        //v-- Added timer var
        timer = setTimeout(function() { 
            if ($('#element1').length) clearTimeout(timer); //Added
            check_for_update($element) 
        }, 1000);
    } 
}
$ele = $('<div id="element1"></div>');

// start recursion
check_for_update($ele); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:24:35.203

谢谢您的帮助！你们是一群绅士！

这是我在递归函数中的解决方案：

```
function check_for_update($element) {

    // check for the check_for_update_id attribute
    if ($element.attr('check_for_update_id') === undefined) {
        // set the attribute if it's currently undefined
        d = new Date();
        check_for_update_id = String(d.getTime()) + String(d.getMilliseconds());
        $element.attr('check_for_update_id', check_for_update_id);
        }
    // create $element_new using the check_for_update_id attribute
    $element_new = $(  '[check_for_update_id=' + 
                        $element.attr('check_for_update_id') +
                       ']');

    // if $element has been removed from the DOM,
    // $element_new will not have a 'check_for_update_id' attribute
    if ($element_new.attr('check_for_update_id') !== undefined) {
        $.ajax({ ... });
        setTimeout(function() { 
            check_for_update($element_new);
        }, 1000);
    } 
} 
```

第一次将元素传递给函数时，属性“check_for_update_id”将在 $element 中未定义。如果当前未定义，则设置了“check_for_update_id”，并且所有后续 setTimeout() 调用 check_for_update() 函数，$element 现在将与此“check_for_update_id”值相关联。为避免冲突，我在调用此函数时将“check_for_update_id”设置为秒 + 毫秒（这对我来说有点矫枉过正，但总比抱歉更安全）。

然后使用 'check_for_update_id' 属性作为选择器在函数内创建 $element_new：

```
$element_new = $(  '[check_for_update_id=' + 
                    $element.attr('check_for_update_id' + 
                   ']'); 
```

如果在 setTimeout() 迭代之间删除了 $element，则 $element_new 将未定义“check_for_update_id”属性，并且不会再次调用 setTimeout()。

# javascript - IE8 中的 Javascript 错误：“类型”为空或不是对象

> ID：15276196
> 
> 赞同：0
> 
> 时间：2013-03-07T16:16:53.113
> 
> 标签：javascript

我只在 IE8 中收到此错误。完整的错误是

```
 'type' is null or not an object      jQuery, line 226 character 4526 
```

代码被混淆了，但查看周围的代码我可以跟踪 globalize.js 第 581 行 [https://github.com/jquery/globalize/blob/master/lib/globalize.js的失败](https://github.com/jquery/globalize/blob/master/lib/globalize.js)

现在我在这段代码中看不到任何“类型”对象/变量。我也无法理解这个错误的含义。谁能通过如何通过测试代码在 chrome 控制台中重现此错误的步骤来解释此错误是什么？谁能告诉我 IE8 中可能发生的错误？这在 chrome、ff、IE9、safari 中运行良好。谢谢。

# django - 将 VM 用于 Django 项目是一种好习惯吗？

> ID：15276198
> 
> 赞同：1
> 
> 时间：2013-03-07T16:16:54.583
> 
> 标签：django, virtual-machine, virtualenv

所以我在看 Django 入门[http://gettingstartedwithdjango.com/](http://gettingstartedwithdjango.com/)教程，一切都在 vm 中完成。笔者搭建了一个vm，然后在vm中创建了一个virtualenv。这是开始 django 项目或一般软件项目的好习惯吗？为什么需要虚拟机？如果我有多个项目会怎样——我应该使用两个虚拟机吗？或者只是在原始虚拟机中创建额外的虚拟环境？

我仍然是一名学生，我正在从事自己的个人项目，因此获得一些关于现实世界中事情如何真正完成的信息会很有用。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:20:13.463

您**不需要**虚拟机。你可以很好地使用 virtualenv 和每个项目的环境——尤其是刚开始使用 Django。

将来，如果项目有很多独特的基础架构需求，您可能需要一个单独的 VM 环境。设置虚拟机、设置独特的环境要容易得多，并且在您想要处理其他项目时不必更改它。

我看到人们使用虚拟机的另一个常见原因是当他们拥有一台 Windows 机器但想在 Linux 中开发时。启动 Linux VM 并在那里工作很容易，因为 Linux 对程序员更友好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:21:56.780

这是主观的。我在 Linux 上使用 virtualenv 和 virtualenvwrapper 进行开发。在某些情况下，您可能需要利用两个单独的虚拟机……这取决于，尽管我没有遇到过这种情况。

没有不成文的规定说你必须使用虚拟机。Python（和许多其他语言/框架）在 Linux 上运行得更好，所以很多人会利用 VM 在 Windows 或 Mac 上运行 Linux，以便在该环境中进行开发。

# java - 当另一个java程序执行时自动运行一个java程序

> ID：15276201
> 
> 赞同：0
> 
> 时间：2013-03-07T16:17:03.013
> 
> 标签：java, triggers, actionlistener, invoke

我在同一台机器上有两个独立的 Java 程序。我想让一个java程序在其他程序启动时自动执行，即如果程序A运行，程序B也应该自动开始运行。

我不想让程序 B 成为程序 A 的一部分，然后在程序 A 的类中创建程序 B 的实例来调用以进行调用。有没有不同的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:21:42.877

您可以创建一个脚本来启动这两个程序。例如，在 Windows 上，您将创建一个运行程序 A 后跟程序 B 的 .bat 文件。这本身不是 JAVA，它取决于操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:19:09.223

您可以让程序 A 启动程序 B，例如：

```
Runtime.getRuntime().exec("java -jar progB.jar"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:21:36.437

在程序 A 中，将此行添加到 main 方法中。`Runtime.getRuntime().exec("java -jar /path/to/program.jar");`

# restkit - JSON 表示可以包含嵌套对象或对象 ID 的映射关系（在 RestKit 中）

> ID：15276202
> 
> 赞同：1
> 
> 时间：2013-03-07T16:17:05.377
> 
> 标签：restkit

是否可以让 RestKit 正确映射属性可能包含嵌套对象或对象 ID 的关系？

我目前使用的 API 通常会返回深度循环对象图，其中同一对象的多次出现被对象的 ID 替换。

一个简单的例子：

嵌套

```
[
    {
        id: 1,
        title: "Post Title",
        category: {
            id: 1,
            name: "Category Title"
        }
    },
    {
        id: 2,
        title: "Post Title",
        category: 1
    }
] 
```

由于替换可能发生在任何级别，因此在映射之前手动修复 JSON 不是很实用。

# python - python 新手，对 get() 返回 None 感到困惑

> ID：15276203
> 
> 赞同：0
> 
> 时间：2013-03-07T16:17:10.293
> 
> 标签：python

所以我要完成的任务是让两个字符串输入，如“1”+“2”返回“3”，

我希望能够做这样的事情，

```
d = {'1': 1, '2': 2, '3': 3} 
```

所以我有这样的字典^，然后我可以做

```
d.get('1') 
```

希望它会返回 1，但它会返回 None，我将如何解决这个问题？

## 感谢您的帮助

所以多亏了你的帮助，我让它工作了，虽然由于某种原因它只接受加到 4 或更低的数字，这是代码，所以你可能会更好地理解

```
def code_char(char, key):
    d = {'1': 1, '2':2 ,'3': 3 ,'4': 4,'5': 5 ,'6': 6 ,'7': 7 ,'8' :8 ,'9':9}
    f = {1: '1', 2: '2' ,3: '3' ,4: '4' ,'5':5 ,'6':6 ,'7':7 ,'8':8 ,'9':9}
    sum = d.get(char)+d.get(key)
    if sum < 9:
        print(f.get(sum))
    else:
        sum = sum % 10
        value = f.get(sum)
        print(value)
code_char('1','5') 
```

出于某种原因`code+char('1','3')`，将正确返回 3 但更高，它只会打印无。

这是我的加密器的开始，感谢到目前为止的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:21:11.990

不知道为什么它会为您返回 None 。那是你真正尝试过的吗？

```
> d = {'1': 1, '2': 2, '3': 3}
> d.get('1')
1 
```

顺便说一句，您可以通过 int 函数将字符串转换为 int 。

```
> int('1') + int('2')
3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:39:09.917

这是它的工作原理：`D.get(k[,d=None]) -> D[k] if k in D else d`. 请务必使用“1”而不是 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:45:11.490

您可以使用大括号：

```
>>> d = {'1': 1, '2': 2, '3': 3}
>>> d['1']+d['2']
3 
```

或者，如果你想要一个字符串结果：

```
>>> str(d['1']+d['2'])
'3' 
```

但实际上 - 不需要映射来执行此操作：

```
>>> str(int('22')+int('33'))
'55' 
```

# html - css响应式背景图像未显示

> ID：15276205
> 
> 赞同：0
> 
> 时间：2013-03-07T16:17:16.907
> 
> 标签：html, css, background-image

当没有分配固定的高度和宽度时，我无法显示我的图像。我希望我的图像对我的网格具有灵活性和响应性，所以我认为可行的方法是将高度和宽度设置为 100%，但无济于事。

如何让图像显示并能够相应地更改大小？

HTML

```
 <div class="row">
    <div class="large-12 columns">
        <div class="hero">
            <img id="image" src="steve1.png" alt=""/>
        </div>
    </div>
</div> 
```

CSS

```
 .hero {
max-width: 100%;
height: auto;
background-repeat: no-repeat;
margin: 0;

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:20:20.070

试一试：

```
html {
    min-height: 100%;
    background-size: cover;
    background-image: url(steve1.png);
    background-repeat: no-repeat;
    background-position: right bottom;
}
body{
    min-height:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:19:27.777

尝试添加到css：

```
.hero img {width:100%;} 
```

您必须将样式添加到 img 它本身，而不是容器 div。

# xpath - 在 Hive 中使用 Xpath

> ID：15276208
> 
> 赞同：0
> 
> 时间：2013-03-07T16:17:20.737
> 
> 标签：xpath, hadoop, hive

我正在尝试解析存储在 Hive 表中的一些数据。

比方说。

```
Hive> SELECT * FROM fulldatatable LIMIT 1;

SELECT xpath( 'xml data from the previous command') SELECT src LIMIT 1; 
```

我的问题是如何在`xpath`查询中加载第一个？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:58:16.950

您可以从第一个选择创建一个[视图](https://cwiki.apache.org/Hive/viewdev.html)，然后使用 xpath UDF 查询该视图。
例如：

```
Initial tables:
hive> describe table1;  
id  int
f1  string  
f2  string  
f3  string  
f4  string  

hive> select * from table1;
1  <a>  <b>1</b>  <b>1</b>  </a>
2  <a>  <b>1</b>  <b>2</b>  </a>
3  <a>  <b>1</b>  <b>3</b>  </a>

Another table:

hive> describe ranks;
id    int   
text  string    

hive> select * from ranks;
1   good
2   bad
3   worst

Create a view:
hive> create view xmlout(id, line) as select id, concat(f1,f2,f3,f4) from table1;

Then:
hive> select xpath_short(x.line, 'sum(a/b)'), r.text from xmlout x 
        join ranks r on (x.id = r.id);
2   good
3   bad
4   worst 
```

# java - 如何使用 javaGUI（java 应用程序）将文件上传到谷歌应用引擎

> ID：15276210
> 
> 赞同：0
> 
> 时间：2013-03-07T16:17:28.803
> 
> 标签：java, google-app-engine, blobstore

我需要帮助将文件上传到谷歌存储（blobstore 或谷歌云存储），我已经向服务器发送了一条消息，然后服务器将回复该消息。我已经在下面做了一些代码，任何人都可以帮助我如何使用java应用程序将文件上传到云存储。

我不使用jsp或html作为上传界面，我设计了一个简单的javaGUI来在点击上传按钮时上传文件。

我在网上找不到任何参考资料，大多数情况下使用jsp、html或php作为接口上传文件。

我发布的代码有一些问题，所以我把我的代码放在了保管箱中。

服务器端： [在此处输入链接描述](https://dl.dropbox.com/u/14562196/ListenForRestClient555.rar)

客户端： [在此处输入链接描述](https://dl.dropbox.com/u/14562196/RestfulClient555.rar)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:23:20.023

首先，您必须完成[功能齐全的示例](https://developers.google.com/appengine/docs/java/blobstore/overview)，该示例实际上适用于在 Blobstore 或 Google Cloud Storage 上上传文件。无论您要使用什么来上传东西，这是验证后端部分是否正常工作的必须要做的事情，并且在 JSP 中完成的部分将是您的测试环境，以确保在实施其他任何操作之前后端工作正常.

完成此操作后，您在 JavaGUI 应用程序中所要做的就是确保您知道如何使用多部分文件上传 POST 请求上传文件。

# php - PHP / HTML / Mysql - 一些错误

> ID：15276211
> 
> 赞同：-2
> 
> 时间：2013-03-07T16:17:30.893
> 
> 标签：php, mysql

当我打开**form.php**时，**我输入了 ID**，然后在按钮**Enviar**上说：**Recebeste as moedas。**来自 obrigado.php

当我检查我的数据库时，不要添加硬币。

一些错误？在哪里？

**表单.php**

```
 <form method="post" action ="obrigado.php">
    <textarea rows="4" cols="50" id="ebur" name="ebur">

    </textarea>
            <input type="submit" value="Enviar" />
    </form> 
```

**obrigado.php**

```
<font color="green">Recebeste as moedas.<br>
Atualiza a pagina!</font>
  <?php

    if(isset($_POST['ebur']))
    {
        $ebur = mysql_real_escape_string($_POST['ebur']);
    $con=mysqli_connect("address","user","password","account");
    // Check connection
    if (mysqli_connect_errno())
      {
      echo "Falha ao receber moedas, informa o administrador com o codigo 445ebmds. " . mysqli_connect_error();
      }

    mysqli_query($con,"UPDATE account SET coins=coins +80 WHERE login = '$ebur'");

    mysqli_close($con);
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:23:09.777

根据您的说法，您`obrigado.php`将始终看到一条绿色消息“Recebeste as moedas。Atualiza a pagina！”，因为这个片段

```
<font color="green">Recebeste as moedas.<br>
Atualiza a pagina!</font> 
```

没有放在任何条件运算符范围内，例如`if`.

这很难说，您的 SQL 查询是否已成功执行。您需要检查[这里](https://stackoverflow.com/a/15276369/301663)`mysqli_query()`的NoX 回答的结果，如果执行结果正常，则另外显示一条成功消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:24:15.170

您可以通过这种方式检查查询是否有错误

```
if(!mysqli_query(.....))
{
    echo 'ERROR: '.mysqli_error($con);
} 
```

# javascript - ASP.Net MVC 与 Javascript 用户界面

> ID：15276217
> 
> 赞同：0
> 
> 时间：2013-03-07T16:17:51.600
> 
> 标签：javascript, asp.net-mvc, soa, frontend

除了两年前的一个小型 Silverlight 项目外，我在过去 6 年里没有做过任何 Web 开发。所以 6 年前，我正在使用 ASP.net 开发一个 Web 项目项目，我必须承认我从不喜欢 Web 窗体。因为 ASP.Net 是我的要求，而且我开始对 Restfull Web 服务感兴趣，所以我使用了无标记的 ASP.Net 页面，每个页面都是一个控制器，每个页面都有一个很大的 if，它正在寻找方法从前端发送的 xml 消息中的名称。大约在那个时候，我开始看到 Web 应用程序使用后端的 Web 服务和仅使用 Ajax 请求的 javascript 接口。

所以在过去的 6 年里，我主要在服务层工作，使用 SOA，最近使用事件 SOA，所以对我来说，我不理解对 ASP.Net MVC 的需求，我正在学习它，因为它似乎当今无处不在，但在 SOA 时代，如果您只使用 MSFT 堆栈，为什么还需要 ASP.MVC？

假设我想构建一个带有 Web 前端的新系统，并且我在 Layers 中构建它，如下例所示：

DAL -> SOA 服务 -> Web API (WCF) -> 前端（仅限 JavaScript）

如果使用 ASP.NET MVC 构建它会更好吗？我的意思是不要误会我的意思，但我认为它只适合小型非分层项目。

ASP.Net MVC 是对 Web 表单的巨大改进，我希望你们能给我一些见解；我不想在这里玩世不恭，我已经离开 Web Developmental 很长时间了，我只需要知道为什么人们似乎更喜欢 ASP.Net MVC 而不是普通的 JavaScript 前端。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:41:21.143

这将关闭，因为您真的在征求意见。

但原因包括：

1.  纯粹的 javascript 前端仍然很难做好。*非常*。
2.  ASP.net MVC 在你真正做到这一点之前几年就问世了
3.  在服务器端框架中代码重用仍然容易得多
4.  WCF webservice vs ASP.Net MVC 是个人喜好。两者都有其奇怪的黑魔法怪癖，这表明 MS 仍然无法完全获取 HTTP、HTML 或 javascript。他们确实只是为 MVC 带来了一个 Web API，尽管目前还不清楚他们为什么这样做，因为它似乎增加的很少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:53:04.247

我知道主要问题是“在哪里构建视图和 UI 逻辑 - 在服务器端或客户端” 简而言之 - 这取决于优先级。如果您需要快速的结果 - 使用服务器端语言生成视图，并且只将 javascript 插入您的页面。如果您需要在同一页面上的组件之间进行许多依赖的响应式设计 - 可能 javascript 是您唯一的选择。

# css - CSS 媒体查询 min-width 和 min-device-width 冲突？

> ID：15276218
> 
> 赞同：37
> 
> 时间：2013-03-07T16:17:52.007
> 
> 标签：css, media-queries

我对媒体查询的世界非常陌生，很明显，除了它们明显的定位能力之外，我在宽度和设备宽度之间的差异方面缺少一些基本的东西。

我想针对具有相同断点的常规计算机和设备，所以我只是将所有最小和最大宽度查询复制到最小设备和最大设备宽度查询。无论出于何种原因，当我添加 -device 对应项时，普通计算机对我的 CSS 的解释非常不同，我不确定我做错了什么。

[你可以在这里看到效果](http://www.swanflighthaven.com/pagestuff/correct.jpg)（这是应该的样子）

[在这里](http://www.swanflighthaven.com/pagestuff/incorrect.jpg)（在我的查询中添加了 -device-width 之后，我的 CSS 在最小宽度处被搞砸了——即使浏览器宽度小于被调用的宽度，也会看到更大的分辨率）。

这是我的 CSS 链接——我的语法有问题吗？：

```
<link rel="stylesheet" media="only screen and (max-width: 674px), only screen and (max-device-width: 674px)" href="300.css">
<link rel="stylesheet" media="only screen and (min-width: 675px) and (max-width: 914px), only screen and (min-device-width: 675px) and (max-device-width: 914px)" href="650.css">
<link rel="stylesheet" media="only screen and (min-width: 915px) and (max-width: 1019px), only screen and (min-device-width: 915px) and (max-device-width: 1019px)" href="915.css">

<link rel="stylesheet" media="only screen and (min-width: 1020px), only screen and (min-device-width: 1020px)" href="1020.css">
<link rel="stylesheet" media="only screen and (min-width: 1200px) and (max-width: 1299px), only screen and (min-device-width: 1200px) and (max-device-width: 1299px)" href="1200.css">
<link rel="stylesheet" media="only screen and (min-width: 1300px), only screen and (min-device-width: 1300px)" href="1300.css"> 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-03-07T16:34:19.627

设备宽度是指显示器的分辨率（例如，1024 来自 1024x768），而宽度是指浏览器本身的宽度（如果浏览器未最大化，它将与分辨率不同）。如果您的分辨率大到足以让您进入一个断点，但浏览器的宽度小到足以让您进入另一个断点，那么您最终会得到两者的奇怪组合。

除非您有正当理由根据分辨率而不是视口大小来限制样式表，否则只需使用`min-width`/`max-width`并避免`min-device-width`/ `max-device-width`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-11-09T19:09:06.473

`device-width`在媒体查询级别 4 中已弃用。有关更多详细信息，请参阅[此处](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/device-width)的 MDN 文档。

> 已弃用：不再推荐使用此功能。尽管某些浏览器可能仍然支持它，但它可能已经从相关的 Web 标准中删除，可能正在被删除，或者可能仅出于兼容性目的而保留。避免使用它，并尽可能更新现有代码；请注意，此功能可能随时停止工作。

因此，`width`应该`height`使用特征来分别考虑视口的宽度和高度。

PS 这些是范围特征，它们可以加上前缀`min-`或`max-`表示“最小条件”或“最大条件”约束。参考[这里](https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries)。

# c - 我可以计算双打引入的误差吗？

> ID：15276219
> 
> 赞同：2
> 
> 时间：2013-03-07T16:17:52.780
> 
> 标签：c, floating-point, double, ieee-754

假设我有一个无理数，例如`\sqrt{3}`。由于它是非理性的，它没有十进制表示。所以当你试图用 IEEE 754 double 来表达它时，你会引入一个错误。

有很多数字的十进制表示是：

```
1.7320508075688772935274463415058723669428052538103806280558069794519330169088
  00037081146186757248575675... 
```

现在，当我计算时`\sqrt{3}`，我得到`1.732051`：

```
#include <stdio.h> // printf
#include <math.h>   // needed for sqrt

int main() {
    double myVar = sqrt (3);
    printf("as double:\t%f\n", myVar);
} 
```

根据[Wolfram|Alpha](http://www.wolframalpha.com/input/?i=abs%28sqrt%7B3%7D-1.732051%29/sqrt%7B3%7D)，我有一个错误`1.11100... × 10^-7`。

**有什么办法可以自己计算错误吗？**

（我不介意切换到 C++、Python 或 Java。如果没有简单的替代方案，我也可以使用 Mathematica）

澄清一下：我不想要只适用于 sqrt{3} 的解决方案。我想得到一个函数，它给我任何数字的错误。如果那不可能，我至少想知道 Wolfram|Alpha 如何获得更多价值。

# 我的尝试

在写这个问题时，我发现了这个：

```
#include <stdio.h> // printf
#include <math.h>  // needed for sqrt
#include <float.h> // needed for higher precision

int main() {
    long double r = sqrtl(3.0L);
    printf("Precision: %d digits; %.*Lg\n",LDBL_DIG,LDBL_DIG,r);
} 
```

有了这个，我可以`2.0 * 10^-18`根据[Wolfram|Alpha](http://www.wolframalpha.com/input/?i=abs%28sqrt%7B3%7D-1.73205080756887729%29/sqrt%7B3%7D)将错误归结为。所以我认为这可能足够接近来很好地估计错误。我写了这个：

```
#include <stdio.h> // printf
#include <math.h>  // needed for sqrt
#include <float.h>

int main() {
    double myVar = sqrt (3);
    long double r = sqrtl(3.0L);
    long double error = abs(r-myVar) / r;
    printf("Double:\t\t%f\n", myVar);
    printf("Precision:\t%d digits; %.*Lg\n",LDBL_DIG,LDBL_DIG,r);
    printf("Error:\t\t%.*Lg\n", LDBL_DIG, error);
} 
```

但它输出：

```
Double:     1.732051
Precision:  18 digits; 1.73205080756887729
Error:      0 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:35:52.827

每个程序员都应该了解 Goldberg 的浮点运算，这就是您正在寻找的明确指南。

[https://ece.uwaterloo.ca/~dwharder/NumericalAnalysis/02Numerics/Double/paper.pdf](https://ece.uwaterloo.ca/~dwharder/NumericalAnalysis/02Numerics/Double/paper.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:26:56.173

`printf`当您在没有精度的情况下使用时，将双精度数舍入到 6 位`%f`。

例如

```
double x = 1.3;
long double y = 1.3L;
long double err = y - (double) x;
printf("Error %.20Lf\n", err); 
```

我的输出：`-0.00000000000000004445`

如果结果为 0，则您的`long double`和`double`是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:30:36.210

您希望`fabsl`而不是`abs`在计算错误时，至少在使用 C 时。（在 C 中，`abs`是整数。）通过这种替换，我得到：

```
Double:     1.732051
Precision:  18 digits; 1.73205080756887729
Error:      5.79643049346087304e-17 
```

（在 Mac OS X 10.8.3 和 Apple clang 4.0 上计算。）

对于一些简单的计算，使用`long double`来估计误差`double`是一种合理的方法，除了：

*   如果您正在计算更准确的`long double`结果，为什么还要费心`double`呢？
*   计算序列中的错误行为难以描述，并且可能增长到`long double`无法提供准确结果的准确估计的地步。
*   存在`long double`得到的结果不如`double`. （通常在有人构建一个例子来教学生一课时遇到，但它们仍然存在。）

通常，没有简单有效的方法来计算一系列计算中浮点结果中的误差。如果有的话，这将是一种计算更准确结果的有效方法，我们将使用它来代替单独的浮点计算。

在特殊情况下，例如在开发数学库例程时，会仔细研究由特定代码序列引起的错误（并根据需要重新设计代码以具有可接受的错误行为）。更常见的是，通过执行各种“实验”以查看结果随不同输入波动的程度或通过研究系统的一般数学行为来估计误差。

您还问过“我想要一个函数，它可以为我提供任何数字的错误。” 嗯，这很容易，给定任何数字*x*和计算结果*x'*，误差正好是*x'* - *x*。实际问题是您可能没有可用于轻松评估该表达式的*x描述。*在您的示例中，*x*是 sqrt(3)。显然，错误是 sqrt(3) – *x*，而*x*正好是 1.732050807568877193176604123436845839023590087890625。现在您需要做的就是评估 sqrt(3)。换句话说，对误差进行数值评估与对原始数字进行数值评估一样难。

是否有某类数字要执行此分析？

此外，您实际上是想计算误差还是仅仅对误差进行良好的限制？后者稍微容易一些，尽管对于计算序列来说仍然很困难。对于所有基本运算，IEEE 754 要求生成的结果是最接近数学精确结果的结果（在使用的舍入模式的适当方向上）。在四舍五入到最近的模式中，这意味着每个结果与精确结果最多相差 1/2 ULP（最小精度单位）。对于诸如标准数学库中的运算（正弦、对数等），大多数库将在精确结果的几个 ULP 内产生结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:30:38.863

根据 C 标准`printf("%f", d)`会默认为小数点后 6 位。这不是你的双精度。

可能是 double 和 long double 在您的架构上碰巧是相同的。我的架构上有不同的大小，并且在您的示例代码中出现非零错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T16:24:18.397

`Double: 1.732051`你在这里打印有误`printf("Double:\t\t%f\n", myVar);`

double myVar 的实际值为

```
1.732050807568877281 //18 digits 
```

所以 1.732050807568877281-1.732050807568877281 为零

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-10T09:46:35.603

获得保证包含计算实际值的区间的一种方法是使用[区间算术](http://en.wikipedia.org/wiki/Interval_arithmetic)。然后，将`double`结果与区间进行比较可以告诉您`double`计算与实际计算的最差情况。

Frama-C 的价值分析可以通过 option 为您做到这一点`-all-rounding-modes`。

```
double Frama_C_sqrt(double x);

double sqrt(double x)
{
  return Frama_C_sqrt(x);
}

double y;

int main(){
  y = sqrt(3.0);
} 
```

通过以下方式分析程序：

```
frama-c -val t.c -float-normal -all-rounding-modes
[value] Values at end of function main:
      y ∈ [1.7320508075688772 .. 1.7320508075688774] 
```

这意味着 的实际值`sqrt(3)`，因此`y`如果程序使用实数计算，变量中的值在`double`bounds 内`[1.7320508075688772 .. 1.7320508075688774]`。

Frama-C 的值分析不支持该`long double`类型，但如果我理解正确，您只是`long double`作为参考来估计使用`double`. 该方法的缺点是其`long double`本身不精确。通过在 Frama-C 的值分析中实现的区间算术，计算的实际值保证在显示的范围内。

# java - 当多列有重复项时，删除数组列表的一列中的重复项

> ID：15276224
> 
> 赞同：0
> 
> 时间：2013-03-07T16:18:02.787
> 
> 标签：java, arraylist, duplicates, resultset

我有一个文档搜索功能，它从我的数据库中返回一个结果集。我将此结果集存储在数组列表中以显示在前端。此数组列表包含以下字段。文件名（有重复项）、日期（有重复项）、类型（有重复项）需要（布尔值，有重复项）。如果文件名重复，我只想显示一次，并修改该行中的相应列以显示“N/A”。我一直在尝试使用 SET 但没有成功。如果您需要更多详细信息，请告诉我。例如：下面是我如何将我的结果集放入一个数组列表中。现在让我们说这个数组列表有一个

```
 String a= request.getParameter("name");
String cust = request.getParameter("custId");
String Type = request.getParameter("prodType");
ArrayList searchResult = msgDH.getSearchDtls(a,cust,Type); 
```

（上面的函数执行过程并返回一个表 {fileName, date, type, required (y/n})

现在让示例文件名“Sample1”（以及其他）在搜索结果中重复，具有不同的相应“类型”值和相同的“日期”和“必需”值。我如何只显示文件名“Sample1”的一行和文件类型为“n/a”或任何其他字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:20:57.727

我想你正在使用`YourOwnObject`. 覆盖`equals()`您的对象以满足您的需要，然后将所有这些填充的对象放入您的`Set`. `Set`将为您删除重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:21:42.470

在不知道您的数据库的情况下：

```
Select distinct file_name, data, type, required  
from my_database 
```

# php - 我如何用ajax填充文本框字段

> ID：15276227
> 
> 赞同：0
> 
> 时间：2013-03-07T16:18:07.687
> 
> 标签：php, ajax

我有一个组合框，我想填写州和邮政编码字段..它的工作，但它填写每个字段州“NY11715”和邮政编码“NY11715”...我正在寻找填写州“纽约”和邮政编码 11715.. .请帮我解决这个问题

```
<select name="LookupCity" id="LookupCity" onchange="showZip(this.value)">
<option value="" <?php if (!(strcmp("", $_GET['City']))) {echo "selected=\"selected\"";} ?>>Select from menu</option>
<?php do { ?>
<option value="<?php echo $row_fmCity['City']?>"<?php if (!(strcmp($row_fmCity['City'], $_GET['City']))) {echo "selected=\"selected\"";} ?>><?php echo $row_fmCity['City']?></option>
<?php
} while ($row_fmCity = mysql_fetch_assoc($fmCity));
$rows = mysql_num_rows($fmCity);
if($rows > 0) {
mysql_data_seek($fmCity, 0);
$row_fmCity = mysql_fetch_assoc($fmCity); } ?> </select>

<a href="ZipLookup.php">select</a></td> 

</tr><tr valign="baseline">
<td nowrap="nowrap" align="right">State:</td>
<td><input type="text" name="State" id="State" placeholder="NY" value="<?php echo $_GET['State']; ?>" size="5"/>
<input type="text" name="Zip_Code" id="Zip_Code"placeholder="zip code" value="<?php echo $_GET['Zip']; ?>" size="10" /></td>

Ajax code

function showZip(str)
{
if (str=="")
  {
  document.getElementById("State").innerHTML="";
  document.getElementById("Zip_Code").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
   document.getElementById("State").value=xmlhttp.responseText;
   document.getElementById("Zip_Code").value=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","Getzip.php?q="+str,true);
xmlhttp.send();
}

PHP Code

<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'root', 'root');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("Leadbook", $con);

$sql="SELECT * FROM Zip WHERE City = '".$q."'";

$result = mysql_query($sql);

while($row = mysql_fetch_array($result))
  {

  $State = $row['State'];
  $Zip_Code = $row['Zip Code'];

  }
echo $State;
echo $Zip_Code;

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:32:53.420

**1.更改您的php代码，使城市和邮政编码都以逗号分隔。**

更改此代码：

```
echo $State;
echo $Zip_Code; 
```

对此：

```
echo $State;
echo ",";
echo $Zip_Code; 
```

**2.而不是更新你的javascript，以便将返回文本分成两部分并到达其受尊重的字段。**

更改此代码：

```
document.getElementById("State").value=xmlhttp.responseText;
document.getElementById("Zip_Code").value=xmlhttp.responseText; 
```

对此：

```
var string = xmlhttp.responseText;
var array = string.split(',');
document.getElementById("State").value=array[0];
document.getElementById("Zip_Code").value=array[1]; 
```

这应该符合您的要求。

# ruby-on-rails - 在 Rails 3 中升级路线

> ID：15276229
> 
> 赞同：1
> 
> 时间：2013-03-07T16:18:14.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

目前我有这样的事情：

```
 resources :books do
    collection do
      get 'search'
    end
  end 
```

我的控制器名称也是“books”，里面有一个名为“search”的操作方法

我希望“获取搜索”部分也成为一种资源，有点像嵌套资源......但我不想破坏其他人的代码，这些代码正在使用它生成的当前路线，所以需要更新它被动的方式！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:19:59.730

```
resources :books do
  collection do
    get 'search'
  end
  resources :searches
end 
```

...如果我对您的理解正确，那应该就是您想要的。它不会破坏其他路线，只需添加新路线。

* * *

运行`rake routes`以确保您拥有所需/需要的所有路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:43:31.080

使用嵌套的浅层路由，例如：

```
resources :books , :shallow => true do
  resources :searches
end 
```

现在您将获得以下路线：

```
/books/1 => books_path(1)
/books/1/searches => books_searches_index_path(1)
/searches/2 => searches_path(2) 
```

同样，您可以为已定义的路由获取单独的路由，例如：

```
get '(:books)/searches', :to => 'books#index' 
```

# hadoop - CentOS 上的 Hadoop 流式示例与 python - /mapred/local/taskTracker 上的权限被拒绝

> ID：15276231
> 
> 赞同：2
> 
> 时间：2013-03-07T16:18:19.470
> 
> 标签：hadoop, hadoop-streaming

我已经能够使用 python mapper & reducer 设置流示例。mapred 文件夹位置是 /mapred/local/taskTracker 根用户和 mapred 用户都拥有此文件夹和子文件夹的所有权

但是，当我运行流式传输时，它会创建地图但不会减少并给出以下错误无法运行程序 /mapred/local/taskTracker/root/jobcache/job_201303071607_0035/attempt_201303071607_0035_m_000001_3/work/./mapper1.py Permission Denied

我注意到虽然它为 mapred/local/taskTracker 及其所有子目录提供了+rwx 权限，但当 mapreduce 为该作业创建临时文件夹时，这些文件夹没有所有用户的 rwx ...因此我得到权限被拒绝错误

我一直在寻找有关此的论坛主题，虽然有主题提到相同的错误......我找不到任何带有解决方案的回复。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:23:57.853

我假设您以 user 身份运行 Hadoop 守护进程`root`。在这种情况下，新创建文件的权限由`umask`用户确定`root`。但是，您不得更改`umask`for `root`。

如果您想以不同的用户身份运行 MapReduce 作业和集群，最好以 user 身份启动 Hadoop 守护进程，以 user 身份启动`hadoop`MapReduce 作业`mapreduce`。但是，两个用户都应该属于同一个组，即`hadoop`. 此外，应相应地设置`umask`用户。`hadoop`

# php - php将此数组转换为整数系列

> ID：15276234
> 
> 赞同：0
> 
> 时间：2013-03-07T16:18:36.227
> 
> 标签：php, arrays, multidimensional-array, keyvaluepair

这是我的数组的输出

`[["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"]]`

但我希望这个看起来像

`[1,1,1,1,1,1,1]`

这将如何在 php 中实现，似乎我所做的一切都被放入数组中的一个对象中，当我不想要的时候。我尝试使用 array_values 并且它只成功返回了值，因为我最初确实有键，但这仍然不是完全期望的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:28:28.673

```
$yourArray = [["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"],["1"]]; 
```

在中使用以下代码`PHP 5.3+`

```
$newArray = array_map(function($v) {
    return (int)$v[0];
}, $yourArray); 
```

或在其他 PHP 版本中使用以下代码

```
function covertArray($v) {
    return (int)$v[0];
}

$newArray = array_map('covertArray', $yourArray) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:22:57.883

你总是可以做一个简单的循环......

```
$newArray = array();

// Assuming $myArray contains your multidimensional array
foreach($myArray as $value)
{
   $newArray[] = $value[0];
} 
```

您可以通过以下方式加强它并避免不良索引：

```
 if( isset($value[0]) ) {
      $newArray[] = $value[0];
   } 
```

或者只是使用许多数组函数之一来获取值，例如`array_pop()`, `array_slice()`,`end()`等。

# mysql - Grails在域类上高效批量删除，级联删除到子类

> ID：15276236
> 
> 赞同：0
> 
> 时间：2013-03-07T16:18:42.700
> 
> 标签：mysql, grails, grails-orm

人们使用什么技术来有效地对大量类进行级联删除？

假设我有以下域类：

```
class Submission {
   static hasMany = [members: Member]
}

class Member {
   static belongsTo = [submission: Submission]
   static hasMany = [events: Event, hashCodes: HashCode]
}

class Event {
   static belongsTo = [member: Member]
}

class HashCode {
   static belongsTo = [member: Member]
} 
```

现在，给定提交的成员数量可能非常大，比如 100,000+，但这绝不是有限的。事件和哈希码是每个成员 15 个。

我需要删除给定提交的部分或全部成员（我们现在假设所有成员），但保持提交记录不变。所以我目前这样做如下：

```
Set<Member> membersToDelete = Member.findAllBySubmissionId( submission.id )
withSessionCleaner(membersToDelete){ member ->
   submission.payroll.removeFromMembers( member )
   member.delete( failOnError: true )
} 
```

其中一些通用基础服务将会话清理器提供为：

```
SessionFactory sessionFactory
def propertyInstanceMap = org.codehaus.groovy.grails.plugins.DomainClassGrailsPlugin.PROPERTY_INSTANCE_MAP
private static final int DEFAULT_SESSION_CLEANER_CHECKPOINT = 100
def withSessionCleaner(def items, Closure c)
{
    items.eachWithIndex { obj, index ->
       c(obj)
       if (++index % DEFAULT_SESSION_CLEANER_CHECKPOINT == 0) {
           def session = sessionFactory.currentSession
           session.flush()
           session.clear()
           propertyInstanceMap.get().clear()
        }
    }
} 
```

会话清理器方法是必需的，否则 Grails 会将所有对象保留在会话缓存中，最终我会出现内存不足问题和/或处理开始需要很长时间才能接近集合结束。

我对这种方法的主要担忧是：

1.  什么是 Grails 从数据库读取或加载到 Member/Event/HashCode 类的内存中？我听说过延迟加载，但不确定如何在这 3 个类上检查或配置它。
2.  单独处理每个成员似乎对于级联删除工作是必要的，但对于我想要实现的目标来说似乎可能很昂贵。

我可以运行一些 SQL 查询来实现我的目标吗：

1.  从其中 member_id 的 Event 中删除（从 Member where submit_id = 中选择 id）
2.  从 HashCode where member_id in (select id from Member where submit_id = ?) 中删除
3.  从成员中删除 submit_id = ?

但现在我使用的是原始 SQL，并没有真正使用 Grails 类或关系。是否存在等同于这些 SQL 语句的 Grails/GORM 命令？

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:24:17.980

最快的方法是在子对象上使用 ON DELETE CASCADE 创建 FOREIGN KEYS（希望您的数据库允许您这样做）。之后，您可以按 ID 安全地删除成员，数据库将完成剩下的工作。

# javascript - 根据 TextArea 值生成单选按钮结果

> ID：15276237
> 
> 赞同：0
> 
> 时间：2013-03-07T16:18:49.013
> 
> 标签：javascript, forms, function, if-statement, radio-button

几天前我没有设法从我的单选按钮生成结果，我现在设法解决了这个问题。我的另一个问题是如何根据 TextArea 值的变化只生成几组单选按钮；

例如此代码中的示例

```
 <script language="javascript" type="text/javascript">

function generatetest() {

codeOne = document.docContainer.text1.value;
codeTwo = document.docContainer.number2.value;

function firstType(){

var codeFour = 0;

for( i = 0; i < document.docContainer.radio4.length; i++ )
    {
    if( document.docContainer.radio4[i].checked == true )
    codeFour = document.docContainer.radio4[i].value;
    }

var codeTen = 0;

    for( i = 0; i < document.docContainer.radio10.length; i++ )
    {
    if( document.docContainer.radio10[i].checked == true )
    codeTen = document.docContainer.radio10[i].value;
    }

document.docContainer.textarea12.value = codeOne + codeTwo + codeFour + codeTen;
}

function secondType(){

var codeSix = 0;

for( i = 0; i < document.docContainer.radio6.length; i++ )
    {
    if( document.docContainer.radio6[i].checked == true )
    codeFour = document.docContainer.radio6[i].value;
    }

var codeEleven = 0;

    for( i = 0; i < document.docContainer.radio11.length; i++ )
    {
    if( document.docContainer.radio11[i].checked == true )
    codeTen = document.docContainer.radio11[i].value;
    }

document.docContainer.textarea12.value = codeOne + codeTwo + codeSix + codeEleven
}

if (document.docContainer.number2.value="1")
{
firstType();
}
else if (document.docContainer.number2.value="2")
{
secondType();
}

}
</script> 
```

代码正在运行，问题是，即使我将 textarea “number2” 上的值插入为“2”，代码仍然会生成 firstType() 结果

我是否使用了错误的 if 语句或者我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:37:00.473

您的代码阅读起来可能会更有趣，但是在您的数字周围加上引号会导致 javascript 将它们视为文本。这是你想做的吗？

# google-app-engine - CourseBuilder 的 Google App Engine python 导入错误

> ID：15276239
> 
> 赞同：0
> 
> 时间：2013-03-07T16:18:56.740
> 
> 标签：google-app-engine, markup

我正在尝试在 RHEL 服务器上设置 Google CourseBuilder 站点。我按照[此处](https://code.google.com/p/course-builder/wiki/GetCode#5._Start_the_development_server)的说明运行服务器。但是，每个请求都会出错，并显示以下消息。我没有更改提供的包中的任何配置，并且类似的方法适用于 Windows 8。

```
ERROR    2013-03-07 16:05:10,337 dev_appserver_import_hook.py:1251] Third party package markupsafe was enabled in app.yaml but not found on import. You may have to download and install it.
INFO     2013-03-07 16:05:10,412 dev_appserver.py:3104] "GET / HTTP/1.1" 302 - 
```

奇怪的是markupsafe包已经在.../google_appengine/lib/markupsafe-0.15

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:59:28.163

在 app.yaml 文件中添加`markupsafe`库。例如：

```
libraries:
- name: jinja2
  version: latest
- name: markupsafe
  version: latest 
```

# javascript - 当样式=自动或100％时获取元素高度？

> ID：15276240
> 
> 赞同：7
> 
> 时间：2013-03-07T16:18:57.827
> 
> 标签：javascript, styles, element

正如问题询问当元素具有 style="width:100%; height:auto;" 时如何获得元素的确切 px 高度或宽度 例如。

我可能不会将它嵌套在 div 中并通过 so 获取高度/宽度！

我猜javascript可以在这里提供帮助。

编辑：我正在使用这个：

```
var collectNodes = document.getElementById('fade').children;

collectNodes[y].height() // ?? 
```

以下代码为我提供了字符串“auto”：

```
collectNodes[0].style.height; 
```

EDIT2：这是我的代码。

```
<div id="divId">
    <img class="node" src="somePic0.png" style="z-index:10; opacity:0;"/>
    <img class="node" src="somePic1.png" style="z-index:9; opacity:0;"/>
    <img class="node" src="somePic2.png" style="z-index:8; opacity:1;"/> 
    <img class="node" src="somePic3.png" style="z-index:7; opacity:1;"/>
    <img class="node" src="somePic4.png" style="z-index:6; opacity:1;"/>
</div>

<script>
    var collectNodes = document.getElementById('divId').children; 
    var y = 0;
    for ( var x = 0; x < collectNodes.length; x++ ) {
        if ( collectNodes[x].style.opacity !== "" && !y ) {
            y = x;
        }
    }

    alert(collectNodes[y].height); // This alerts the string "auto" and not pixel height
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T17:07:06.290

你可以像这样使用纯 javascript 来做到这一点：

**Javascript**

```
var divHeight;
var obj = document.getElementById('id_element');

if(obj.offsetHeight) {
    divHeight=obj.offsetHeight;

} else if(obj.style.pixelHeight) {
    divHeight=obj.style.pixelHeight;

} 
```

使用 jQuery 库更容易：

**jQuery**

```
var height = $('#element').height(); 
```

**编辑**

现在在一个容器中有许多元素：

**html**

```
<div id="divId">
    <img class="node" src="path/to/pic" style="z-index:10; opacity:0;"/>
    <img class="node" src="path/to/pic" style="z-index:9; opacity:0;"/>
    <img class="node" src="path/to/pic" style="z-index:8; opacity:1;"/> 
    <img class="node" src="path/to/pic" style="z-index:7; opacity:1;"/>
    <img class="node" src="path/to/pic" style="z-index:6; opacity:1;"/>
</div> 
```

出于兼容性目的，我将您的不透明度更改为可见性。不要使用 display:none; 否则高度解析将失败;)。

**jQuery**

```
$("#divId img").each(function(index, picture) {
   var height = $(picture).height();
   //Do everything you want with the height from the image now
}); 
```

请参阅[小提琴](http://jsfiddle.net/soyuka/X7vGR/4/)以查看它的工作原理。

# c# - Hyper-V 机器上的套接字异常

> ID：15276242
> 
> 赞同：6
> 
> 时间：2013-03-07T16:19:05.183
> 
> 标签：c#, udp, winsock, multicast, hyper-v

最近，我们的整个 QA 环境从 VMWare 转移到了 Hyper-V 虚拟机。

我们的一个应用程序以每秒 20K 个数据包的速率将 UDP 数据包发送到多播云。

虽然这在 VMWare 环境中运行良好，但 Hyper-V 使应用程序在工作几分钟后抛出以下异常：

```
System.Net.Sockets.SocketException (0x80004005): An invalid argument was supplied
   at System.Net.Sockets.Socket.Send(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags) 
```

在将套接字的发送缓冲区大小定义为 1,000,000 字节时，我还设法立即模拟了这个问题。

我该如何解决这个问题？

**更新 1**：一旦发生异常，这是来自事件查看器的日志条目：

```
Faulting application name: Agent.exe, version: 1.0.12.7366, time stamp: 0x51389f69
Faulting module name: KERNELBASE.dll, version: 6.1.7601.18015, time stamp: 0x50b83c8a
Exception code: 0xe0434352
Fault offset: 0x0000c41f
Faulting process id: 0xaf0
Faulting application start time: 0x01ce1b4ce509dc7a
Faulting application path: C:\Users\DevUser\Desktop\QA\Agent.exe
Faulting module path: C:\Windows\syswow64\KERNELBASE.dll
Report Id: d2b45dce-8740-11e2-86f9-00155d022804 
```

**更新 2**：UDP 数据包的大小为 100-200 字节。

**更新3**：这是有问题的代码：

```
 m_socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
    m_socket.Ttl = 1;

    if (GetRawParameter("send") != null)
    {
      Log("Starting sender...");

      StartSender();
    }

    ...snip...

private static void StartSender()
{
  m_lastPacketNumber = 0;

  m_socket.Connect(new IPEndPoint(m_ipAddress, m_port));

  if (m_bufferSize > 0)
    m_socket.SetSocketOption(
      SocketOptionLevel.Socket, SocketOptionName.SendBuffer, m_bufferSize);

  byte[] dataPad = null;

  if (m_packetSize > 8)
  {
    dataPad = new byte[m_packetSize - sizeof(long)];

    for (int i = 0; i < dataPad.Length; i++)
    {
      dataPad[i] = 0xFF;
    }
  }

  while (true)
  {
    Log("Sending data...");

    for (int i = 0; i < m_packetsPerSec; i++)
    {
      var data = BitConverter.GetBytes(m_lastPacketNumber.Value);

      if (dataPad != null)
        data = data.Concat(dataPad).ToArray();

      if (m_packetDump != null)
        m_packetDump.Add(m_lastPacketNumber.Value);

      m_socket.Send(data);

      if (m_usePerformanceCounters)
        IncreaseSendCounters(1);

      m_lastPacketNumber++;
    }

    Log(m_lastPacketNumber + " packets sent.");

    Thread.Sleep(1000);
  }
} 
```

**更新 4**：当我尝试每秒发送 100K 个数据包时，失败的 Send() 似乎发生在 #14156 或 #32485 或 #25412 数据包（不是第一个！）上。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T21:49:34.857

Could you "roll up" the packets so that you are sending far less packets of larger size...and then un-roll them on the other side? 20k packets/second is a lot of sendto's.

# windows-8 - Windows 8 中的动态磁贴隐藏小徽标图像

> ID：15276248
> 
> 赞同：2
> 
> 时间：2013-03-07T16:19:31.990
> 
> 标签：windows-8, winrt-xaml

您好，我正在使用以下代码，动态磁贴可以正常工作，但我发现磁贴的左下角总是有小标志，我该如何摆脱它？看到[这个](http://postimage.org/image/nm19nlf8t/)

```
 XmlDocument tileXml = TileUpdateManager.GetTemplateContent(TileTemplateType.TileWideImageAndText01);
        XmlDocument squareTileXml = TileUpdateManager.GetTemplateContent(TileTemplateType.TileSquarePeekImageAndText01);

        XmlNodeList textElements = tileXml.GetElementsByTagName("text");
        textElements[0].AppendChild(tileXml.CreateTextNode(_serviceOrderItems.Count.ToString()));

        XmlNodeList imageElements = tileXml.GetElementsByTagName("image");
        XmlElement imageElement = (XmlElement)imageElements[0];
        imageElement.SetAttribute("src", "ms-appx:///Assets/Image310X150.jpg");
        imageElement.SetAttribute("alt", "Aker Solutions");

        XmlNodeList squareImageElements = squareTileXml.GetElementsByTagName("image");
        XmlElement squareImageElement = (XmlElement)squareImageElements.Item(0);
        squareImageElement.SetAttribute("src", "ms-appx:///Assets/Image150X150.jpg");
        squareImageElement.SetAttribute("alt", "Aker Solutions");

        IXmlNode subnode = tileXml.ImportNode(squareTileXml.GetElementsByTagName("binding")[0], true);
        tileXml.GetElementsByTagName("visual")[0].AppendChild(subnode);

        TileNotification tile = new TileNotification(tileXml);
        TileUpdateManager.CreateTileUpdaterForApplication().Update(tile); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-22T12:59:19.643

设置品牌=“无”

```
<?xml version="1.0" encoding="UTF-8"?>
<tile>
<visual lang="en-US">
    <binding template="TileSquareImage" branding="none">
        <image id="1" src="http://abc..../xx.png"/>
    </binding>
    <binding template="TileWideImageAndText01" branding="none">
        <image id="1" src="http://abc.../yy.png"/>
        <text id="1">Test message</text>
    </binding>
</visual>
</tile> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:40:27.370

**编辑**

刚刚注意到您可以在视觉或绑定节点上设置[品牌属性的评论。](http://msdn.microsoft.com/en-us/library/windows/apps/br212857.aspx)

```
tileXml.getElementsByTagName('visual')[0].setAttribute('branding', 'none'); 
```

* * *

tile 上有一个[小的 logo 属性来控制它。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.startscreen.secondarytile.smalllogo.aspx)但是文档指出：

> 如果未提供此图像，则使用此辅助磁贴的父应用程序的小徽标。

由于您的应用程序还需要一个小徽标，因此无法将其关闭。一种解决方法是将小徽标设置为完全透明的 30 x 30 像素 png。

```
var tile = new Windows.UI.StartScreen.SecondaryTile(newTileID, newTileShortName, newTileDisplayName, TileActivationArguments, newTileOptions, uriLogo);
tile.smallLogo = new Windows.Foundation.Uri("ms-appx:///images/smallLogoBlank.png"); 
```

# delphi - delphi webbrowser：如何防止或隐藏该javascript错误？

> ID：15276255
> 
> 赞同：6
> 
> 时间：2013-03-07T16:19:46.113
> 
> 标签：delphi, browser, webbrowser-control, twebbrowser

我正在运行 TEmbeddedwb 并且在该 TEmbeddedwb 上导航时出现 javascript 超时错误。

（我在 Internet Explorer 中运行时没有出现此错误！）

![在此处输入图像描述](../Images/e86c530f75a3b66e64e6a55e1d6cf6f4.png)

浏览器询问我是否要停止执行脚本。

我把 TEmbeddedwb 属性放到

**沉默=真**

**dialogoBox.disableAll = true**

但是我仍然有这个弹出窗口出来！

1）为什么我有这个错误（在 2 个上测试）而在 Internet Explorer 上导航时没有错误

2）如何禁用/隐藏此弹出窗口？

问候

```
 unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, OleCtrls, SHDocVw_EWB, EwbCore, EmbeddedWB;

type
  TForm1 = class(TForm)
    iemain: TEmbeddedWB;
    procedure iemainScriptError(Sender: TObject; ErrorLine, ErrorCharacter,
      ErrorCode, ErrorMessage, ErrorUrl: String;
      var ScriptErrorAction: TScriptErrorAction);
    procedure FormCreate(Sender: TObject);
  private
    { Déclarations privées }
  public
    { Déclarations publiques }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.iemainScriptError(Sender: TObject; ErrorLine,
  ErrorCharacter, ErrorCode, ErrorMessage, ErrorUrl: String;
  var ScriptErrorAction: TScriptErrorAction);
begin
       MessageDlg('hello', mtWarning, [mbOK], 0);
       if ErrorCode='123' then    ScriptErrorAction := eaContinue;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
    iemain.Navigate('http://www.expedia.fr/Hotels');
end;

end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T17:25:33.883

***如何处理 TEmbeddedWB 中的 JavaScript 错误？***

为事件编写一个处理程序并在输出参数中`OnScriptError`返回一个可用`TScriptErrorAction`值。`ScriptErrorAction`要忽略脚本错误并继续使用，例如：

```
procedure TForm1.EmbeddedWB1ScriptError(Sender: TObject; ErrorLine,
  ErrorCharacter, ErrorCode, ErrorMessage, ErrorUrl: string;
  var ScriptErrorAction: TScriptErrorAction);
begin
  if ErrorCode = 123 then
    ScriptErrorAction := eaContinue;
end; 
```

# jquery - 删除一个元素上的最后 3 个类？

> ID：15276258
> 
> 赞同：0
> 
> 时间：2013-03-07T16:19:54.737
> 
> 标签：jquery

我已经搜索过，但没有太多运气。

我正在尝试使用 jquery 删除此元素的最后 3 个类，但不知道该怎么做。

这些类的名称会根据测验的结果而改变，所以我不能只做一个简单的 .removeClass(x,x,x)

```
<section class="container books-home alphabet prereading result"> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:23:34.197

我建议：

```
var allButLastThree = this.className.split(/\s/).slice(0,-3).join(' '); 
```

[概念证明](http://jsfiddle.net/davidThomas/n538R/)。

或者，如果您想继续使用更多 jQuery 方法：

```
$(this).attr('class',function(index,classes){
    return classes.split(/\s/).slice(0,-3).join(' ');
}); 
```

[概念证明](http://jsfiddle.net/davidThomas/n538R/1/)。

参考：

*   [jQuery`attr()`](http://api.jquery.com/attr/) .
*   [`join()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join).
*   [`slice()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice).
*   [`split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split).

# u2 - Unidata 中的最大虚拟属性大小

> ID：15276259
> 
> 赞同：1
> 
> 时间：2013-03-07T16:19:55.350
> 
> 标签：u2, unidata, multivalue-database

尝试使用较大的虚拟属性检索数据时收到以下错误：

虚拟属性错误：虚拟字段太大。

我无法在 Unidata 手册中找到虚拟属性允许的最大大小。我正在使用 Unidata 7.2，ECLTYPE Pick。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:10:06.310

如果我没记错的话，我相信您需要增加 UDT 环境变量 VFIELDSIZE 的大小以适应相关属性。也许将其设置为 400 并查看问题是否仍然存在。

# sql-server-2008 - 加入并插入同一张表

> ID：15276260
> 
> 赞同：0
> 
> 时间：2013-03-07T16:19:56.003
> 
> 标签：sql-server-2008, tsql

我有一个在 SQL Server 2000 中运行的查询。

```
INSERT INTO #Student
   select a,b,c
   from ID i
   inner join #student t on i.ID = t.ID 
```

但是在 SQL Server 2008 中它没有运行..知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:08:56.577

如果您想要解决方案，您确实需要向我们提供比您提供的更多信息。可能在 SQL 语句中包含一些表的示例数据和/或一些预期的示例输出。

这是一个如何使上述 SQL 语句工作的示例。我可以很容易地想出十几个例子来让它工作，但如果没有关于你的问题的额外信息，我们永远不会知道它是否对你有用。

```
CREATE TABLE ID (ID int, a char(1), b char(2), c char(3))
INSERT ID SELECT 1, 'a', 'b', 'c'
INSERT ID SELECT 2, 'a', 'b', 'c'

CREATE TABLE #Student (ID int IDENTITY(1,1), a1 char(1), b1 char(2), c1 char(3))
INSERT #Student SELECT 'a', 'b', 'c'
INSERT #Student SELECT 'a', 'b', 'c'

INSERT INTO #Student
SELECT a, b, c
  FROM ID i
  JOIN #student t 
    ON i.ID = t.ID

SELECT *
  FROM #Student 
```

# c++ - 在 cpp 中声明的全局变量在目标 c 中使用

> ID：15276261
> 
> 赞同：0
> 
> 时间：2013-03-07T16:19:57.640
> 
> 标签：c++, ios, objective-c, xcode

我在 xcode 项目中使用 cpp 文件。在 cpp 文件中，我执行以下操作

> ReadYML.h

```
typedef struct {
    float Position[3];
    float Color[4];
    float TexCoord[2];
} Vertex_OR;

extern Vertex_OR Vertices_OR [100];

extern GLubyte Indices_OR [30]; 
```

> 在ReadYML.cpp
> 
> 我为此赋值。
> 
> 在视图.m
> 
> 我宣布“sample.h”

并尝试访问 Vertices_OR 和 Indices_OR 但收到以下错误？

```
Undefined symbols for architecture i386:
  "_Indices_OR", referenced from:
      loadyml() in ReadYMLfile.o
  "_Vertices_OR", referenced from:
      loadyml() in ReadYMLfile.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这里有什么问题？我需要使用“Sample.h”中声明的全局变量来访问view.m？可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:24:25.527

```
extern Vertex_OR Vertices_OR [100];

extern GLubyte Indices_OR [30]; 
```

意思是“`extern`嘿，编译器，这个符号存在*于某处*”。如果您在某个编译单元的某处没有类似以下的相应声明，您将收到该链接错误（即，将其放在相应的 .m 文件中某处）：

```
Vertex_OR Vertices_OR [100];

GLubyte Indices_OR [30]; 
```

# c# - 使用 NetSpell 如何将字典数据加载为字符串？（编辑：添加代码）

> ID：15276262
> 
> 赞同：0
> 
> 时间：2013-03-07T16:19:58.853
> 
> 标签：c#, android, unity3d

我目前正在使用 Unity 和 NetSpell 开发一个 Android 应用程序，在我的桌面上运行良好，但由于无法访问字典文本文件，因此无法在平板电脑上运行。我知道我可以在 Unity 中使用 TextAsset 加载文件，但是我在 NetSpell 中看到的唯一方法是按文件夹和文件路径加载。如何加载字典数据并将其作为字符串传递给 NetSpell？有什么方法可以做到这一点吗？

编辑：添加代码......我应该如何修改以下内容，以便它可以接受字典文件作为字符串？

```
// open dictionary file
        FileStream fs = new FileStream(dictionaryPath, FileMode.Open, FileAccess.Read, FileShare.Read);
        StreamReader sr = new StreamReader(fs, Encoding.UTF8);

        // read line by line
        while (sr.Peek() >= 0) 
        {
            string tempLine = sr.ReadLine().Trim();
            if (tempLine.Length > 0)
            {
                // check for section flag
                switch (tempLine)
                {
                    case "[Copyright]" :
                    case "[Try]" : 
                    case "[Replace]" : 
                    case "[Prefix]" :
                    case "[Suffix]" :
                    case "[Phonetic]" :
                    case "[Words]" :
                        // set current section that is being parsed
                        currentSection = tempLine;
                        break;
                    default :       
                        // parse line and place in correct object
                    switch (currentSection)
                    {
                        case "[Copyright]" :
                            this.Copyright += tempLine + "\r\n";
                            break;
                        case "[Try]" : // ISpell try chars
                            this.TryCharacters += tempLine;
                            break;
                        case "[Replace]" : // ISpell replace chars
                            this.ReplaceCharacters.Add(tempLine);
                            break;
                        case "[Prefix]" : // MySpell prefix rules
                        case "[Suffix]" : // MySpell suffix rules

                            // split line by white space
                            partMatches = _spaceRegx.Matches(tempLine);

                            // if 3 parts, then new rule  
                            if (partMatches.Count == 3)
                            {
                                currentRule = new AffixRule();

                                // part 1 = affix key
                                currentRule.Name = partMatches[0].Value;
                                // part 2 = combine flag
                                if (partMatches[1].Value == "Y") currentRule.AllowCombine = true;
                                // part 3 = entry count, not used

                                if (currentSection == "[Prefix]")
                                {
                                    // add to prefix collection
                                    this.PrefixRules.Add(currentRule.Name, currentRule);
                                }
                                else 
                                {
                                    // add to suffix collection
                                    this.SuffixRules.Add(currentRule.Name, currentRule);
                                }
                            }
                                //if 4 parts, then entry for current rule
                            else if (partMatches.Count == 4)
                            {
                                // part 1 = affix key
                                if (currentRule.Name == partMatches[0].Value)
                                {
                                    AffixEntry entry = new AffixEntry();

                                    // part 2 = strip char
                                    if (partMatches[1].Value != "0") entry.StripCharacters = partMatches[1].Value;
                                    // part 3 = add chars
                                    entry.AddCharacters = partMatches[2].Value;
                                    // part 4 = conditions
                                    AffixUtility.EncodeConditions(partMatches[3].Value, entry);

                                    currentRule.AffixEntries.Add(entry);
                                }
                            }   
                            break;
                        case "[Phonetic]" : // ASpell phonetic rules
                            // split line by white space
                            partMatches = _spaceRegx.Matches(tempLine);
                            if (partMatches.Count >= 2)
                            {
                                PhoneticRule rule = new PhoneticRule();
                                PhoneticUtility.EncodeRule(partMatches[0].Value, ref rule);
                                rule.ReplaceString = partMatches[1].Value;
                                _phoneticRules.Add(rule);
                            }
                            break;
                        case "[Words]" : // dictionary word list
                            // splits word into its parts
                            string[] parts = tempLine.Split('/');
                            Word tempWord = new Word();
                            // part 1 = base word
                            tempWord.Text = parts[0];
                            // part 2 = affix keys
                            if (parts.Length >= 2) tempWord.AffixKeys = parts[1];
                            // part 3 = phonetic code
                            if (parts.Length >= 3) tempWord.PhoneticCode = parts[2];

                            this.BaseWords.Add(tempWord.Text, tempWord);
                            break;
                    } // currentSection swith
                        break;
                } //tempLine switch
            } // if templine
        } // read line
        // close files
        sr.Close();
        fs.Close(); 
```

# time-complexity - 每个算法都有Big Omega吗？

> ID：15276265
> 
> 赞同：4
> 
> 时间：2013-03-07T16:20:03.663
> 
> 标签：time-complexity, big-o

每个算法都有Big Omega吗？

算法是否有可能同时具有大 O 和大欧米茄（但不等于彼此 - 不是大 Theta）？

例如 Quicksort 的 Big O - O(n log n) 但它有 Big Omega 吗？如果是，我该如何计算？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T17:01:30.303

首先，最重要的是不要将*绑定*与*案例*混淆。一个*界限*——比如 Big-Oh、Big-Omega、Big-Theta 等——说明了增长率。一个*案例*说明了您当前正在考虑由您的算法处理的输入类型。

让我们考虑一个非常简单的例子来说明上面的区别。考虑规范的“线性搜索”算法：

```
LinearSearch(list[1...n], target)
1\. for i := 1 to n do
2\.    if list[i] = target then return i
3\. return -1 
```

人们可以考虑三种广泛的情况：大小为 的输入的最佳、最差和平均情况`n`。在最好的情况下，您要查找的是列表中的第一个元素（实际上，在列表开头的任何固定数量内）。在这种情况下，查找元素并从函数返回只需要一些恒定的时间。因此，在最好的情况下，Big-Oh 和 Big-Omega 恰好是相同的：`O(1)`并且`Omega(1)`. 当两者都`O`适用`Omega`时，我们也说`Theta`，所以也是如此`Theta(1)`。

在最坏的情况下，元素不在列表中，算法必须遍历所有`n`条目。由于`f(n) = n`碰巧是一个由同一类函数（线性函数）从上方和下方绑定的函数，因此这是`Theta(n)`.

平均案例分析通常有点棘手。我们需要为长度的可行输入定义一个概率空间`n`。有人可能会说所有有效输入（例如，整数可以在无符号模式下使用 32 位表示）都是同样可能的。由此，可以计算出算法的平均性能如下：

1.  `target`找出未在列表中表示的概率。乘以`n`。
2.  鉴于它`target`在列表中至少出现一次，求它出现在`k`每个位置的概率`1 <= k <= n`。将每个`P(k)`乘以`k`。
3.  将以上所有内容相加得到`n`.

请注意，在上面的步骤 1 中，如果概率不为零，我们肯定会得到至少一个线性函数（练习：我们永远不会得到超过线性函数）。但是，如果第 1 步中的概率确实为零，那么第 2 步中的概率分配在确定复杂性方面会产生重大影响：对于某些分配，您可以有最佳情况行为，对于其他分配，可能是最坏情况，并可能最终具有与最佳（恒定）或最差（线性）不同的行为。

有时，我们可能会松散地谈论“一般”或“普遍”案例，它考虑了所有类型的输入（不仅仅是最好的或最差的），但这并没有给输入任何特定的权重，也没有取平均值. 换句话说，您根据最坏情况下的上限和最佳情况下的下限来考虑算法的性能。这似乎是你在做什么。

呸。现在，回到你的问题。

有没有不同`O`和`Omega`界限的功能？确实。考虑以下函数：

```
f(n) = 1 if n is odd, n if n is even. 
```

最好的情况是“`n`是奇数”，在这种情况下`f`是`Theta(1)`; 最坏的情况是“`n`是偶数”，在这种情况下`f`是`Theta(n)`；如果我们假设我们谈论的是 32 位无符号整数的平均情况，那么`f`在`Theta(n)`平均情况下也是如此。但是，如果我们谈论“普遍”情况，那么`f`是`O(n)`and `Omega(1)`，而不是`Theta`任何东西。其运行时行为依据的算法`f`可能如下：

```
Strange(list[1...n], target)
1\. if n is odd then return target
2\. else return LinearSearch(list, target) 
```

现在，一个更有趣的问题可能是是否有算法不能为某些情况（除了“通用”情况）分配一些有效`Theta`的界限。这很有趣，但并不过分。原因是您在分析期间可以选择构成最佳和最坏情况行为的情况。如果您对该案例的第一选择结果没有`Theta`限制，您可以简单地排除出于您的目的“异常”的输入。从这个意义上说，案例和界限并不是完全独立的：您通常可以选择一个案例，使其具有“良好”界限。

*但你能一直做到吗？*

我不知道，但这是一个有趣的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T17:05:18.480

## 每个算法都有一个大欧米茄吗？

是的。Big Omega 是一个**下界**。可以说任何算法都**至少需要**恒定的时间，所以任何算法都是`Ω(1)`.

## 每个算法都有一个大 O 吗？

不，大 O 是一个**上限**。不（可靠）终止的算法没有大 O。

如果我们可以说，在绝对最坏的情况下，算法不会花费比这更长的时间，那么算法就有上限。我很确定`O(∞)`这不是有效的表示法。

## 算法的大 O 和大欧米茄何时会相等？

**实际上有一个特殊的符号表示它们何时*可以*相等：** [Big Theta (Θ)](https://stackoverflow.com/questions/10376740/what-exactly-does-big-%D3%A8-notation-represent)。

如果算法与输入的大小完美地缩放，它们将是相等的（这意味着算法没有突然变得更有效率的输入大小）。

这是假设我们将 Big O 视为可能的最小上限，并将 Big Omega 视为可能的最大下限。定义实际上并不要求这样做，但它们通常被非正式地对待。*如果你放弃这个假设，你会发现对于任何*算法都不相等的大 O 和大欧米茄。

**强力素数检查**（我们只是循环遍历所有较小的数字并尝试将它们划分为目标数字）可能是最小上限和最大下限不相等的一个很好的例子。

假设你有一些数字`n`。让我们暂时忽略一个事实，即更大的数字需要更长的时间来划分（当我们考虑到这一点时，类似的论点也成立，尽管实际的复杂性会有所不同）。而且我还根据数字本身而不是数字的*大小*来计算复杂度（可以是位数，并且可能会在很大程度上改变这里的分析）。

如果`n`能被 2 整除（或其他一些小的素数），我们可以非常快速地检查它是否是 1 除法（或恒定除法数）的素数。所以最大的下界是`Ω(1)`。

现在如果`n`是素数，我们需要尝试除以`n`每个数字`sqrt(n)`（我将把我们不需要比这更高的原因留作练习）。这需要`O(sqrt(n))`，这也将是我们最小的上限。

所以算法是`Ω(1)`和`O(sqrt(n))`。

**对于一些特别复杂的算法，**精确的复杂度也可能难以计算。**在这种情况下，简单地计算一些合理接近的下限和上限并保持不变可能会更容易和可以接受。但是，我手头没有这方面的例子。**

 **## 这与最佳情况和最坏情况有何关系？

不要混淆最佳和最坏情况的上限和下限。这是一个常见的错误，而且有点令人困惑，但[它们并不相同](https://cs.stackexchange.com/questions/23068/how-do-o-and-%CE%A9-relate-to-worst-and-best-case)。这是另一个主题，但作为一个简短的解释：

可以为每个输入大小计算最佳和最差（和平均）情况。然后可以将上限和下限用于这 3 种情况中的每一种（分别）。您可以将每种情况视为图表上的一条线，x 轴为输入大小，y 轴为时间，然后，对于每条线，上限和下限是需要严格遵守的线高于或低于该线，因为输入大小趋于无穷大（这不是 100% 准确，但这是一个很好的基本想法）。

**快速排序**有一个最坏的情况（当我们在每一步都选择最差的支点时）和最好的情况（当我们选择好的支点时）。请注意 Big Theta 的使用，这意味着它们中的每一个都是下限和上限。`Θ(n²)``Θ(n log n)`

让我们将快速排序与上述素数检查算法进行比较：

*   假设你有一个给定的数字`n`，并且`n`是 53。因为它是素数，它会（总是）采取一些`sqrt(53)`步骤来确定它是否是素数。所以最好和最坏的情况都是一样的。
*   假设你想排序一些 size 的数组`n`，并且`n`是 53。现在可以安排这 53 个元素，以便快速排序最终选择非常糟糕的枢轴并围绕步骤运行（最坏的情况）或非常好的枢轴并运行步骤（最好的情况）。所以最好和最坏的情况是不同的。`53²``53 log 53`
*   现在将`n`上述各项设为 54：
    *   对于素数检查，只需大约`1`一步即可确定 54 是素数。最好和最坏的情况再次相同，但它们与 53 的情况不同。
    *   对于快速排序，您将再次遇到最坏的环绕步骤和最佳环绕步骤的情况。`54²``54 log 54`

因此，对于快速排序，最坏的情况总是围绕步骤进行，而最好的情况总是围绕步骤进行。所以最坏情况的下限和上限（或“紧”）是，最好情况的紧限是。`n²``n log n``Θ(n²)``Θ(n log n)`

对于我们的主要检查，有时最坏的情况需要大约`sqrt(n)`步骤，有时需要大约`1`步骤。因此，最坏情况的下限为`Ω(1)`，上限为`O(sqrt(n))`。最好的情况也是如此。

请注意，上面我只是说“算法将是`Ω(1)`和`O(sqrt(n))`”。这有点模棱两可，因为不清楚算法是否总是为某些输入大小花费相同的时间，或者该语句指的是最好、平均或最坏的情况之一。

## 我该如何计算？

很难为此提供一般性建议，因为边界证明很大程度上取决于算法。您需要分析类似于我上面所做的算法以找出最坏和最好的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:23:30.020

Big O 和 Big Omega 可以为每种算法计算，如[Big-oh vs big-theta中所见](https://stackoverflow.com/questions/3230122/big-oh-vs-big-theta)**

# cassandra - 无法获取 Astyanax IndexQuery 执行的所有结果

> ID：15276266
> 
> 赞同：0
> 
> 时间：2013-03-07T16:20:04.393
> 
> 标签：cassandra, astyanax

我正在使用 Astyanax 客户端从 Cassandra 列族中读取数据。我的要求是通过 astyanax 查询列族的二级索引列。我能够从 astyanax 网站上找到一些示例，以使用索引列上的表达式从 Cassandra 读取数据。我使用示例编写了自己的代码：

```
 OperationResult<Rows<String, String>> result = null;
  IndexQuery<String, String> query = keyspace.prepareQuery("ColumnFamilyName").searchWithIndex().setRowLimit(100).autoPaginateRows(true).addExpression().whereColumn("ColumnNameWhichHasSecondaryIndex").equals().value("value");
  result = query.execute();
  for(Row<String, String> row : result.getResult()) {
    ...
  } 
```

这是我在运行此代码时面临的问题，它只返回 100 行，而列族有几千行满足查询条件。

我无法找到正确的 API/模式来解决我的问题。有人可以指导我解决这个问题吗？

Astanax 版本：1.56.24 Apache Cassandra 版本：1.1.8 Jdk 版本：1.7 平台：Rhel 5.4 32bit

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:19:54.017

setRowLimit(100) 表示每次执行查询时，最多返回 100 个项目。因此，如果您有超过 100 个项目，您应该一次又一次地执行查询以获取设置 autoPaginateRows(true) 下的所有结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:05:19.573

增加行数限制：

```
.setRowLimit(100) 
```

# javascript - 外部Javascript中JQuery调用的范围问题？

> ID：15276267
> 
> 赞同：0
> 
> 时间：2013-03-07T16:20:09.547
> 
> 标签：javascript, jquery, forms

我对 Javascript 和 JQuery 很陌生。

MacOSX 10.8，Safari 版本 6.0.3 (8536.28.10)

我有一个非常简单的带有表单的 HTML 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="wufooTheme8/css/theme.css" type="text/css" />
    <title>
        Course Search
    </title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="http://yandex.st/json2/2011-10-19/json2.min.js"></script>
    <script type="text/javascript" src="application2.js"></script>
</head>
<body>
    <form method="post" id="class-find">
        <label>Class Name</label> <input type="text" name="classname" value=""/> 
        <input type="button" value="Go" onclick="classFind(this.form)" />
    </form>     
</body> 
```

在我的 application2.js 文件中，我有 2 个调用/函数：

```
$('form').bind("keydown", function(e) {
  var code = e.keyCode || e.which;
  if (code  == 13) {
    e.preventDefault();
    return false;
  }
});

function classFind(frm) {
  alert('submitted!');
} 
```

第一个应该阻止输入键将表单提交到默认操作，这是我从另一个关于 SO 的答案中得到的，但它不起作用。第二个功能只是在按下提交按钮时显示一个警报，并且它正在工作。我确定有一些 javascript 范围问题或我不熟悉的东西，但我是如此的菜鸟，我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:22:24.763

尝试将代码从`keyup`更改`keydown`为 之前执行。

```
$('form').bind("keydown", function(e) {
  var code = e.keyCode || e.which;
  if (code  == 13) {
    e.preventDefault();
    return false;
  }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T16:25:17.720

尝试将您的代码包装在准备好的文档中。您可能在 DOM 创建元素之前尝试绑定（即`$('form')`返回一个空的 jQuery 对象，因为`form`尚不存在标签）：

```
$(function() {
    $('form').bind("keyup", function(e) {
      var code = e.keyCode || e.which;
      if (code  == 13) {
        e.preventDefault();
        return false;
      }
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T16:38:17.507

我同意上面关于确保您的代码在 $(document).ready 中并更改为 keydown 的答案。因为这些似乎都没有工作。在按 Enter 之前，您是否确保表单具有焦点？如果您只是加载页面并按回车键，您的 keyup/keydown 处理程序将不会触发，因为您将事件处理程序绑定到表单。尝试单击输入字段，然后按 Enter 键并查看键处理程序是否触发。

```
$(document).ready(function(){

$('form').bind("keydown", function(e) {
  var code = e.keyCode || e.which;
  if (code  == 13) {
    e.preventDefault();
      console.log('stop');
    return false;
  }
}); 
```

});

这是一个小提琴：http: [//jsfiddle.net/aCL2v/](http://jsfiddle.net/aCL2v/)

# jquery - 提交后将焦点返回到输入

> ID：15276272
> 
> 赞同：1
> 
> 时间：2013-03-07T16:20:21.510
> 
> 标签：jquery, focus

我正在尝试清除提交时输入的内容（有效），然后重新关注该字段，以便用户可以再次自动开始输入。

```
$("#submitMessage").submit(function() {
    $("#messageText").attr("value", "");
    $("#messageText").focus();
}) 
```

当我这样做时，该字段被清除，但焦点没有返回给元素。有任何想法吗？

- 编辑 -

我在按钮上调用函数而不是表单本身。切换它时总是很好。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T16:30:34.947

如果页面在提交后重新加载，请将焦点代码添加到 document.ready。

# php - json编码查询

> ID：15276274
> 
> 赞同：0
> 
> 时间：2013-03-07T16:20:24.273
> 
> 标签：php, json

我有一个通过 json_encode 传递的数组，它将数组括号包裹在第一个数组周围，但将对象附件 {} 包裹在第二个数组周围并为嵌套数组编号。它没有引起任何错误，只是想知道为什么会这样。

```
{
"data": {
    "first_array": [
        {
            "meta": {
                "slug": "rank",
                "weight": "100",
                "description": "lorem ipsum",
                "importance": {
                    "value": 2,
                    "max": 5
                }
            },
            "scores": {
                "results": {
                    "slug": "rank",
                    "type": "int",
                    "value": "4"
                }
            }
        },
        {
            "meta": {
                "slug": "rank",
                "weight": "100",
                "description": "lorem ipsum",
                "importance": {
                    "value": 2,
                    "max": 5
                }
            },
            "scores": {
                "results": {
                    "slug": "rank",
                    "type": "int",
                    "value": "4"
                }
            }
        }
    ],
    "second_array": {
        "2": {
            "meta": {
                "slug": "this",
                "weight": "75",
                "description": "lorem ipsum",
                "importance": {
                    "value": 1,
                    "max": 5
                }
            },
            "scores": {
                "results": {
                    "slug": "this",
                    "type": "boolean",
                    "value": 1,
                    "code": 200
                }
            }
        },
        "3": {
            "meta": {
                "slug": "that",
                "weight": "200",
                "description": "lorem ipsum",
                "importance": {
                    "value": 3,
                    "max": 5
                }
            },
            "scores": {
                "results": {
                    "slug": "that",
                    "type": "boolean",
                    "value": 1
                }
            }
        }
    }
} 
```

}

这是数组的 print_r

```
 Array
(
    [data] => Array
        (
            [first_array] => Array
                (
                    [0] => Array
                        (
                            [meta] => Array
                                (
                                    [slug] => rank
                                    [weight] => 100
                                    [description] => lorem ipsum
                                    [importance] => Array
                                        (
                                            [value] => 2
                                            [max] => 5
                                        )

                                )

                            [scores] => Array
                                (
                                    [results] => Array
                                        (
                                            [slug] => rank
                                            [type] => int
                                            [value] => 4
                                        )

                                )

                        )
                    [1] => Array
                        (
                            [meta] => Array
                                (
                                    [slug] => rank
                                    [weight] => 100
                                    [description] => lorem ipsum
                                    [importance] => Array
                                        (
                                            [value] => 2
                                            [max] => 5
                                        )

                                )

                            [scores] => Array
                                (
                                    [results] => Array
                                        (
                                            [slug] => rank
                                            [type] => int
                                            [value] => 4
                                        )

                                )

                        )

                )

            [second_array] => Array
                (
                    [2] => Array
                        (
                            [meta] => Array
                                (
                                    [slug] => this
                                    [weight] => 100
                                    [description] => lorem ipsum
                                    [importance] => Array
                                        (
                                            [value] => 2
                                            [max] => 5
                                        )

                                )

                            [scores] => Array
                                (
                                    [results] => Array
                                        (
                                            [slug] => this
                                            [type] => boolean
                                            [value] => 1
                                            [code] => 200
                                        )

                                )

                        )
                    [3] => Array
                        (
                            [meta] => Array
                                (
                                    [slug] => that
                                    [weight] => 100
                                    [description] => lorem ipsum
                                    [importance] => Array
                                        (
                                            [value] => 2
                                            [max] => 5
                                        )

                                )

                            [scores] => Array
                                (
                                    [results] => Array
                                        (
                                            [slug] => that
                                            [type] => boolean
                                            [value] => 1
                                        )

                                )

                        )
                )
        )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:25:58.637

因为第二个是[关联数组](http://php.net/manual/en/language.types.array.php)（以字符串为键）。JS 数组只能有数字索引。

自 PHP 5.3 起，您只能使用[JSON_FORCE_OBJECT](http://www.php.net/manual/en/json.constants.php)`json_encode`强制输出对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:25:43.857

这可能会发生，因为您的 first_array 实际上是一个从 index = 0 开始并且是连续的数组，而 second_array 从 index = 2 开始，所以该函数使用索引（作为字符串）<=> 值关联。

B.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:26:48.000

第一个从键 0 开始，所以它看起来像一个标准的数值数组。即`first[0]`在javascript中会给你第一个元素。

但是第二个从 2 开始，不能放入标准的 javascript 数组中。即 PHP 中的 $second[2] 实际上会`second[0]`在 javascript 中（如果它确实将其转换为数组）。

这两个数字系统不兼容。保存为对象，允许在数据上使用任意字符串键。（更像是一个关联数组 - 即使将数字作为键，而不是数字数组。javascript 数字数组不能跳过键）

你可以打电话

```
$array['data']['second_array'] = array_values($array['data']['second_array']); 
```

丢弃第二个数组的当前键，并获取新的键 - 这将从 0 开始，并在转换时形成一个普通的 javascript 数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:37:09.683

只是重现您的状态的示例（并尝试解释它）

```
$a = Array("a","b","c","d");
echo json_encode($a); // ["a","b","c","d"]
unset($a[2]);
echo json_encode($a); // {"0":"a","1":"b","3":"d"} 
```

在第一种情况下，我们有一个纯数组（数字）。所以 this 的 json 字符串是一个数组 rappresentation `["a","b","c","d"]`。

但是，当我们取消设置第三个元素时，数字数组将是关联数组（因为尚未遵守顺序）。关联数组（具有数字索引但没有顺序索引）像简单对象一样以 json 表示。

# ruby-on-rails - 登录在 Rails 内外都使用的 gem

> ID：15276278
> 
> 赞同：2
> 
> 时间：2013-03-07T16:20:35.550
> 
> 标签：ruby-on-rails, ruby, logging, gem, environment

什么是正确的方法：我有一个可以使用或不使用rails的gem - 如果它在rails中使用，我想重新使用rails-services，例如配置的记录器。如果它在 Rails 之外（例如在 sinatra-app 中），我想从 stdlib 中使用 Logger：什么是 gem 确定的安全方法，如果我们在 rails-app 中？！

我试过这样的方法：

```
@logger = defined?("Rails") ? eval("Rails.logger") : Logger.new(STDOUT) 
```

但这只会给我一个“未初始化的常量”......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:28:36.890

很近！删除引号/评估：

```
@logger = defined?(Rails) ? Rails.logger : Logger.new(STDOUT) 
```

我还鼓励您提供一个配置挂钩，用户可以在其中指定一个`Logger`兼容的日志接收器。默认值很好，但有时您需要配置一些东西。

# python - python中等效的Linux shell源命令

> ID：15276285
> 
> 赞同：1
> 
> 时间：2013-03-07T16:20:55.557
> 
> 标签：python, shell

将 shell 脚本转换为 python 并尝试找到执行以下操作的最佳方法。我需要它，因为它包含我需要阅读的环境变量。

```
if [ -e "/etc/rc.platform" ];
then
    . "/etc/rc.platform"
fi 
```

我已经转换了“if”，但不确定如何处理 . "/etc/rc.platform" 作为源是一个 shell 命令。到目前为止，我有以下

```
if os.path.isfile("/etc/rc.platform"):
    print "exists" <just to verify the if if working>
    <what goes here to replace "source /etc/rc.platform"?> 
```

我查看了 subprocess 和 execfile 没有成功。

python 脚本需要访问 rc.platform 设置的环境变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:05:34.803

一个有点骇人听闻的解决方案是解析`env`输出：

```
newenv = {}
for line in os.popen('. /etc/rc.platform >&/dev/null; env'):
    try:
        k,v = line.strip().split('=',1)
    except:
        continue  # bad line format, skip it
    newenv[k] = v
os.environ.update(newenv) 
```

编辑：固定拆分参数，感谢@l4mpi

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:48:08.890

（这是他评论中描述的解决方案 crayzeewulf 的演示。）

如果`/etc/rc.platform`只包含环境变量，您可以读取它们并将它们设置为 Python 进程的环境变量。

鉴于此文件：

```
$ cat /etc/rc.platform
FOO=bar
BAZ=123 
```

读取和设置环境变量：

```
>>> import os
>>> with open('/etc/rc.platform') as f:
...     for line in f:
...         k, v = line.split('=')
...         os.environ[k] = v.strip()
... 
>>> os.environ['FOO']
'bar'
>>> os.environ['BAZ']
'123' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T23:24:30.323

回报的工作量太大了。打算保留一个小的 shell 脚本来获取我们需要的所有环境变量，而忘记将它们读入 python。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T16:25:52.733

试试这个：

```
if os.path.exists ("/etc/rc.platform"):
    os.system("/etc/rc.platform") 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-07T16:26:38.423

由于`source`是内置的shell，因此您需要`shell=True`在调用时设置`subprocess.call`

```
>>> import os
>>> import subprocess
>>> if os.path.isfile("/etc/rc.platform"):
...     subprocess.call("source /etc/rc.platform", shell=True) 
```

我不确定您要在这里做什么，但我仍然想提一下：`/etc/rc.platform`可能会导出一些 shell 函数以供`rc.d`. 由于这些是 shell 函数，它们将仅导出到由调用的 shell 实例`subprocess.call()`，如果您调用 another `subprocess.call()`，这些函数将不可用，因为您正在生成一个新的 shell 来调用新脚本。

# c# - webbrowser 组件打印带有偏移量的 qplot 图

> ID：15276289
> 
> 赞同：0
> 
> 时间：2013-03-07T16:21:08.250
> 
> 标签：c#, browser, jqplot

有没有人知道总是打印带有奇怪偏移量的 jqplot 图形的 webbrowser 组件？

这个非常简单的示例在 webbrowser 组件中加载 jqplot 示例页面，可以正确显示页面，但是当您尝试打印它时，您只会在图表中得到偏移量。

同一网页在 IE 中正确显示和打印！

我还尝试了在 Delphi2007 和 DelphiXE3 中编写的这个示例，并得到了完全相同的结果。

Form1.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace testwebbrowser
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            wb.Navigate("http://www.jqplot.com/tests/bar-charts.php");
        }

        private void button2_Click(object sender, EventArgs e)
        {
            wb.ShowPrintPreviewDialog();
        }
    }
} 
```

Form1.Designer.cs

```
namespace testwebbrowser
{
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.panel1 = new System.Windows.Forms.Panel();
            this.button1 = new System.Windows.Forms.Button();
            this.button2 = new System.Windows.Forms.Button();
            this.wb = new System.Windows.Forms.WebBrowser();
            this.panel1.SuspendLayout();
            this.SuspendLayout();
            // 
            // panel1
            // 
            this.panel1.Controls.Add(this.button2);
            this.panel1.Controls.Add(this.button1);
            this.panel1.Dock = System.Windows.Forms.DockStyle.Top;
            this.panel1.Location = new System.Drawing.Point(0, 0);
            this.panel1.Name = "panel1";
            this.panel1.Size = new System.Drawing.Size(597, 71);
            this.panel1.TabIndex = 0;
            // 
            // button1
            // 
            this.button1.Location = new System.Drawing.Point(12, 12);
            this.button1.Name = "button1";
            this.button1.Size = new System.Drawing.Size(75, 23);
            this.button1.TabIndex = 0;
            this.button1.Text = "button1";
            this.button1.UseVisualStyleBackColor = true;
            this.button1.Click += new System.EventHandler(this.button1_Click);
            // 
            // button2
            // 
            this.button2.Location = new System.Drawing.Point(93, 12);
            this.button2.Name = "button2";
            this.button2.Size = new System.Drawing.Size(75, 23);
            this.button2.TabIndex = 1;
            this.button2.Text = "button2";
            this.button2.UseVisualStyleBackColor = true;
            this.button2.Click += new System.EventHandler(this.button2_Click);
            // 
            // wb
            // 
            this.wb.Dock = System.Windows.Forms.DockStyle.Fill;
            this.wb.Location = new System.Drawing.Point(0, 71);
            this.wb.MinimumSize = new System.Drawing.Size(20, 20);
            this.wb.Name = "wb";
            this.wb.Size = new System.Drawing.Size(597, 370);
            this.wb.TabIndex = 1;
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(597, 441);
            this.Controls.Add(this.wb);
            this.Controls.Add(this.panel1);
            this.Name = "Form1";
            this.Text = "Form1";
            this.panel1.ResumeLayout(false);
            this.ResumeLayout(false);

        }

        #endregion

        private System.Windows.Forms.Panel panel1;
        private System.Windows.Forms.Button button2;
        private System.Windows.Forms.Button button1;
        private System.Windows.Forms.WebBrowser wb;
    }
} 
```

# c# - 将 xmlwriter 写入文件

> ID：15276297
> 
> 赞同：10
> 
> 时间：2013-03-07T16:21:31.287
> 
> 标签：c#

我有一个方法中使用的 xmlwriter 对象。我想把它转储到一个文件中来阅读它。有没有一种简单的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T16:31:07.897

使用此代码

```
 // Create the XmlDocument.
        XmlDocument doc = new XmlDocument();
        doc.LoadXml("<item><name>wrench</name></item>");

        // Add a price element.
        XmlElement newElem = doc.CreateElement("price");
        newElem.InnerText = "10.95";
        doc.DocumentElement.AppendChild(newElem);

        // Save the document to a file and auto-indent the output.
        XmlTextWriter writer = new XmlTextWriter(@"C:\data.xml", null);
        writer.Formatting = Formatting.Indented;
        doc.Save(writer); 
```

在 MSDN 上找到：http: [//msdn.microsoft.com/en-us/library/z2w98a50.aspx](http://msdn.microsoft.com/en-us/library/z2w98a50.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:31:33.430

一种可能性是将 XmlWriter 设置为输出到文本文件：

```
using (var writer = XmlWriter.Create("dump.xml"))
{
    ...
} 
```

# html - IE7 忽略 colgroup？

> ID：15276304
> 
> 赞同：-1
> 
> 时间：2013-03-07T16:21:45.577
> 
> 标签：html, css

试图将这两列设置为各有 50% 的宽度，但在 IE7 中忽略了 colgroup，任何人都可以提出解决此问题的方法吗？

```
 <table id="briefEquationBuilder" class="fullWidthTable">
        <colgroup>
          <col span="1" align="left" style="width:50%">
          <col span="1" style="background-color:yellow">
        </colgroup> 
```

![在此处输入图像描述](../Images/e7583fa55a864a84c68a6602159babe5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:35:45.800

你可以这样设置：

```
<table id="briefEquationBuilder" class="fullWidthTable">
  <colgroup class="yours">
    <col/><col/>
  </colgroup>
  <tr>
    <td colspan="2">copy</td>
  </tr>
</table> 
```

但是............为什么不使用**td 并添加类**？

colgroup 在此基础上几乎没有支持：

[http://marc.baffl.co.uk/bugs](http://marc.baffl.co.uk/bugs)

# java - 扫描仪无限循环导致浏览器挂起

> ID：15276306
> 
> 赞同：0
> 
> 时间：2013-03-07T16:21:49.840
> 
> 标签：java, http, loops, browser

我一直在尝试解决这个问题大约一个小时，但我根本找不到解决方案。

看下面的代码：

```
public void handleRequest() throws IOException {
    while(in.hasNextLine()) {
        System.out.println(in.nextLine());
    }

    out.print("HTTP/1.0 200 OK\r\n\r\ntest");
    out.flush();
} 
```

如果我将浏览器（Chrome）连接到*localhost*，它将永远挂起。我必须按 Escape（强制它停止请求）才能实际接收从它的请求派生的所有输入行。

这个想法很简单；如果请求有下一行，则直接使用该行直到没有任何内容，然后发送 200 OK 响应。但这根本行不通。

编辑：

@Zutty 询问 in 的位置：

```
public class HttpServer {
public static final int PORT = 80;
public static final int BACKLOG = 1;
public static final String ROOT_CATALOG = "C:/HttpServer/";

private ServerSocket server;
private Socket client;
private Scanner in;
private PrintWriter out;

private FileInputStream fstream;
private final String TWOHUNDRED = "HTTP/1.0 200 OK\r\n"
                                + "Content-Type: text/html\r\n"
                                + "\r\n";

public HttpServer() throws IOException {
    server = new ServerSocket(PORT, BACKLOG);
}

public Socket accept() throws IOException {
    client = server.accept();
    in = new Scanner(client.getInputStream());
    out = new PrintWriter(client.getOutputStream());

    return client;
} 
```

主要是：

```
public class Main {
    public static void main(String[] args) throws IOException {
        HttpServer server = new HttpServer();

        while(true) {
            try(Socket client = server.accept()) {
                server.handleRequest();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:27:34.453

如果您使用 HTTP，则应*始终*发送 Content-Length 标头。然后接收端确切地知道要读取多少字节的内容。这避免了所有混乱的“阅读直到 EOF”或“直到我找到 \r\n\r\n”的问题。

# c# - 为什么 Rect.Intersect 为两个不相交的矩形返回一个非空的 Rect？

> ID：15276310
> 
> 赞同：4
> 
> 时间：2013-03-07T16:21:57.890
> 
> 标签：c#, .net, wpf, visual-studio, geometry

我在 WPF 中有一个小项目，我需要在其中交换 UIElements。类似于 iGoogle 的功能。

由于我无法发布图片（没有足够的声誉），我将在文字中解释。我有一个像这样定义的 3x3 网格：

```
 0   1   2
 0 C   e   C
 1 e   e   e
 2 L   e   C 
```

其中 C = 画布，L = 标签，e = 空单元格（列+行）。

在 MouseMove 事件中，我正在跟踪我当前选择的画布，并查看网格中所有其他可用画布的列表以检查它们是否重叠。问题来了；即使我将画布从 (0,0) 向右移动 1 个像素，它也会检测到它与 (2,2) 的画布相交。

我正在使用 Rect.Intersect(r1, r2) 来确定相交区域，它应该返回一个空的 Rect，因为 r1 不与 r2 重叠，而是它总是返回一个非空的 Rect。

```
 // Create the rectangle with the moving element width and height
        Size draggedElementSize = new Size(this.DraggedElement.ActualWidth, this.DraggedElement.ActualHeight);
        Rect draggedElementRect = new Rect(draggedElementSize);

        foreach (Canvas c in canvases)
        {
            // Create a rectangle for each canvas
            Size s = new Size(c.ActualWidth, c.ActualHeight);
            Rect r = new Rect(s);

            // Get the intersected area
            Rect currentIntersection = Rect.Intersect(r, draggedElementRect);

            if (currentIntersection == Rect.Empty) // this is never true
                return;

        } // end-foreach 
```

我正在循环中做其他各种事情，但它们不会以任何方式与之交互，因为它不能正常工作。

我将不胜感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:31:57.607

我在您的代码中没有看到任何对位置的引用，只有宽度和高度。你真的想从 0/0 开始所有的矩形吗？最有可能的是，它们都会重叠。您需要包括 x/y 坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:32:01.123

在您的代码示例中，您没有按位置偏移矩形。您只是设置矩形大小。

因此，当然，您所有的矩形都从 Point(0,0) 开始，因此都相交。

您需要将矩形从您检查的元素转换为它们的父元素。

最快的方法是[VisualTreeHelper.GetOffset](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.getoffset.aspx)

```
 // Create the rectangle with the moving element width and height
    Size draggedElementSize = new Size(this.DraggedElement.ActualWidth, this.DraggedElement.ActualHeight);
    Rect draggedElementRect = new Rect(draggedElementSize);
    draggedElementRect.offset(VisualTreeHelper.GetOffset(this.DraggedElement));

    foreach (Canvas c in canvases)
    {
        if (this.DraggedElement == c) continue; // skip dragged element.
        // Create a rectangle for each canvas
        Size s = new Size(c.ActualWidth, c.ActualHeight);
        Rect r = new Rect(s);
        r.offset(VisualTreeHelper.GetOffset(c));

        // Get the intersected area
        Rect currentIntersection = Rect.Intersect(r, draggedElementRect);

        if (currentIntersection == Rect.Empty) // this is never true
            return;

    } // end-foreach 
```

您可能希望确保跳过当前拖动的元素，如所示。

# java - 决定谁在 Java 中赢得了一手扑克牌

> ID：15276313
> 
> 赞同：-1
> 
> 时间：2013-03-07T16:22:00.933
> 
> 标签：java, algorithm, math, evaluation, poker

使用 7 张牌中的 5 张牌（德州扑克）的最佳组合来比较 Java 中的两个（并且只有两个）玩家手牌的最佳方法是什么？

如果每张牌都被分配了一个值或枚举，那么是否有一个算法可以用来决定谁拥有最强的牌？

我想您可以进行整数比较以查看谁拥有最高价值的牌，或者使用某种形式的查找表。

环顾四周，有一个名为 SpecialKPokerEval 的手牌评估器：[http ://code.google.com/p/specialkpokereval/](http://code.google.com/p/specialkpokereval/)

这是否适合且轻松地实施到现有项目中，还是我应该从头开始做一些事情？

编辑：

使用整数值的手部评估器如何工作？

查找表是如何工作的——是否每只可能的手都分配了一个值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:25:36.527

我建议从头开始做，因为这是一个很好的练习。事实上，这是“Project Euler”中的第[54 题](http://projecteuler.net/problem=54)，您可以寻找该练习的解决方案。

# sql - 我可以使用 IF...ELSE 语句来设置字段吗？(T-SQL)

> ID：15276315
> 
> 赞同：0
> 
> 时间：2013-03-07T16:22:05.013
> 
> 标签：sql, sql-server-2008, tsql

我目前有一个查询，如果两个值使用 INNER JOIN 从两个不同表中的两个字段匹配，则将字段的值设置为“1”。目前是这样的：

```
UPDATE [ARCSEQP]
SET [isKid] = 1
FROM [ARCSITE]
INNER JOIN [ARCSEQP]
ON [ARCSITE].[CSI_SVID] = [ARCSEQP].[SERVID] 
```

这完美地工作。但是，如果连接中的值不匹配，我也想将 [isKid] 设置为 0。我可以通过编写一个单独的更新语句来做到这一点，但我想知道是否可以使用某种 IF...ELSE 语句来做到这一点。这可能不是最好的方法，但它似乎比两个单独的更新语句更有效。如果我错了，请转过头来纠正我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:23:31.617

使用`LEFT JOIN`和`CASE`声明。

```
UPDATE  [ARCSEQP]
SET     [isKid] = CASE WHEN [ARCSEQP].[SERVID] IS NULL THEN 0 ELSE 1 END
FROM    [ARCSITE]
        LEFT JOIN [ARCSEQP]
            ON [ARCSITE].[CSI_SVID] = [ARCSEQP].[SERVID] 
```

# c# - 正则表达式 C# IsMatch()

> ID：15276316
> 
> 赞同：3
> 
> 时间：2013-03-07T16:22:06.857
> 
> 标签：c#, regex

我尝试使用正则表达式来检查字符串是否仅包含：0-9、AZ、az、\、/ 或 -。我用过`Regex validator = new Regex(@"[0-9a-zA-Z\-/]*");`，无论我介绍什么字符串都是有效的。

检查如下所示：`if(!validator.IsMatch(myString))`

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:25:06.057

如果我明白你想要什么。我相信你的模式应该是

```
new Regex(@"^[0-9a-zA-Z\\\-/]*$"); 
```

`^`和`$`符号是分别匹配字符串开头和结尾的锚点。如果没有这些，该模式将匹配包含该类中任何字符的任何字符串。使用它们，它匹配*仅*包含该类中的字符的字符串。

您还指定要包含反斜杠字符，但`\-`字符类中有原始模式。这只是字符类中连字符的转义序列。要在字符类中还包含反斜杠，您需要单独指定（也转义）。所以生成的字符类有`\\`（反斜杠）后跟`\-`（连字符）。

现在，这仍将匹配空字符串，因为`*`意味着“零或更多”。如果您只想匹配非空字符串，请使用：

```
new Regex(@"^[0-9a-zA-Z\\\-/]+$"); 
```

意思是“`+`一个或多个”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:26:00.783

如果我写一个形式的正则表达式

```
"[some character class]*" 
```

它将匹配每个字符串。每个字符串都包含 0 到多个字符类。

也许你想使用

```
new Regex(@"[0-9a-zA-Z\-/]+") 
```

指定 1 到您的许多字符类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:27:33.977

使用`+`代替`*`

```
new Regex(@"[0-9a-zA-Z\-/]+"); 
```

# java - Maven 配置文件不工作且测试失败

> ID：15276319
> 
> 赞同：0
> 
> 时间：2013-03-07T16:22:11.897
> 
> 标签：java, maven, netbeans

我开始在 Maven 中使用配置文件来构建多环境 jar。

我按照[官方文档](http://maven.apache.org/guides/mini/guide-building-for-different-environments.html)来做到这一点。

**首先，验证问题：**

我读过你应该总是有一个由**Maven**项目生成的包，但我只想生成多环境 jars（即：*只为每个 jar 更改一个属性文件*）。我认为没有必要生成多个项目来执行此操作，对吗？

**现在解释：**

我有一个应用程序，它可以读取文件并应用一组特定的评论，然后再将一些信息插入数据库。我想测试这个验证是否正常，并且无论它稍后在数据库中是否失败，我都会得到正确的结果。**所以在这个应用程序中，我使用了一个动态设置的 DAO**。**这是：我的应用在运行时从config.properties**文件中获取 DAO 类。我创建了一些外观 DAO 来模拟真实的 DAO（例如：DAOApproveAll，它将模拟数据库中的所有事务都正常）。

在单元测试中，我加载**config.properties**以更改（然后恢复更改）参数*daoimplclass*的值，该参数是包含该类的值。例如：

```
 Properties prop = Configurator.getProperties("config");
    final String DAODEFAULT = prop.getProperty("daoimplclass");
    final static String DAOAPPROVEALL = "com.package.dao.DAOAllApproved";
    public void testAllAproved() {
        try {
            Processor processor = Processor.getInstance();
            prop.setProperty("daoimplclass", DAOAPPROVEALL);
            ...
         }
         finally{prop.setProperty("daoimplclass", DAODEFAULT);} 
```

我做了很多测试（使用不同的 DAO 外观），以验证如果数据库中出现不同的结果会发生什么。

现在，我将**config.properties**更改为 2 个文件：**config-dev.properties**和**config-prod.properties**。并将原来的**pom.xml**更改为使用如下配置文件：

```
<profiles>
   <profile>
     <id>dev</id>
     <build>
       <plugins>
         <plugin>
           <artifactId>maven-antrun-plugin</artifactId>
           <executions>
             <execution>
               <phase>test</phase>
               <goals>
                 <goal>run</goal>
               </goals>
               <configuration>
                 <tasks>
                   <delete file="${project.build.outputDirectory}/config.properties"/>
                   <copy file="src/main/resources/config-dev.properties"
                         tofile="${project.build.outputDirectory}/config.properties"/>
                 </tasks>
               </configuration>
             </execution>
           </executions>
         </plugin>
         <plugin>
           <artifactId>maven-surefire-plugin</artifactId>
           <configuration>
             <skip>false</skip>
           </configuration>
         </plugin>
         <plugin>
           <artifactId>maven-jar-plugin</artifactId>
           <executions>
             <execution>
               <phase>package</phase>
               <goals>
                 <goal>jar</goal>
               </goals>
               <configuration>
                 <classifier>dev</classifier>
                 <source>1.6</source>
                 <target>1.6</target>
               </configuration>
             </execution>
           </executions>
         </plugin>
       </plugins>
     </build>
   </profile>
    <profile>
     <id>prod</id>
     <build>
       <plugins>
         <plugin>
           <artifactId>maven-antrun-plugin</artifactId>
           <executions>
             <execution>
               <phase>test</phase>
               <goals>
                 <goal>run</goal>
               </goals>
               <configuration>
                 <tasks>
                   <delete file="${project.build.outputDirectory}/config.properties"/>
                   <copy file="src/main/resources/config-prod.properties"
                         tofile="${project.build.outputDirectory}/config.properties"/>
                 </tasks>
               </configuration>
             </execution>
           </executions>
         </plugin>
         <plugin>
           <artifactId>maven-surefire-plugin</artifactId>
           <configuration>
             <skip>true</skip>
           </configuration>
         </plugin>
         <plugin>
           <artifactId>maven-jar-plugin</artifactId>
           <executions>
             <execution>
               <phase>package</phase>
               <goals>
                 <goal>jar</goal>
               </goals>
               <configuration>
                 <classifier>prod</classifier>
                 <source>1.6</source>
                 <target>1.6</target>
               </configuration>
             </execution>
           </executions>
         </plugin>
       </plugins>
     </build>
   </profile>
  </profiles> 
```

现在，当我在 Netbeans 中执行“清理和构建”时，我在执行测试时遇到错误，因为它找不到**config.properties**。当然，我创建了第三个**config.properties**（另外两个将与 -dev 和 -prod 一起）它编译但不会生成 2 个 jar，而只会生成一个。

* * *

**我的正式问题：**

*   我在配置文件中做错了什么？
*   我怎样才能允许测试运行正常并且仅用于开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:58:11.387

要通过 Netbeans 激活配置文件，您可以尝试以下任务：-

1.  右键单击您的项目并`properties`从上下文菜单中选择。
2.  `Configurations`从`Categories`左侧面板中选择。
3.  在右侧面板中，您将看到 pom.xml 中定义的各种配置文件。您可以`Activate`通过选择它们并单击`Activate`按钮来创建它们，或者您可以通过单击按钮来创建新的`Add`。

我希望这可能会有所帮助。

# jquery - Internet Explorer中的jQuery序列化错误

> ID：15276322
> 
> 赞同：0
> 
> 时间：2013-03-07T16:22:17.697
> 
> 标签：jquery, ajax

我目前在`serialize()`Internet Explorer 中使用 jQuery 方法时遇到问题，它在其他浏览器中运行良好。

首先，我将表单存储在一个变量中。

```
var oForm = document.forms["couponForm"]; 
```

然后我将其序列化并将其作为参数传递给 ajax 调用。

```
new Ajax.Request(sURL, { asynchronous : false, method : 'post',
                parameters : oForm.serialize(true),
                onComplete : function(p_oRequest){

                },
                onException : function(p_oRequest, p_oException) {
                    throw p_oException;
                },
                onLoaded : function() {}
                }); 
```

但是，我在 Internet Explorer 控制台中收到错误消息。

SCRIPT438：对象不支持属性或方法序列化。

IE应该支持序列化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:27:23.557

表格应命名为**couponForm**

```
<form action="" method="post" name="couponForm">
</form> 
```

请检查请求中是否有逗号（，）。最后一项结束后不能有逗号。它对 Internet Explorer 进行了严格检查。

最后一项后不要使用逗号

```
{ 
asynchronous : false, 
method : 'post',
parameters : oForm.serialize(true),//Dont use comma here
} 
```

改用不带逗号

```
{ 
asynchronous : false, 
method : 'post',
parameters : oForm.serialize(true)//The last item must not be ended with a comma.
} 
```

# javascript - 在.trackPageview 之后向谷歌分析添加一个变量？

> ID：15276326
> 
> 赞同：0
> 
> 时间：2013-03-07T16:22:30.450
> 
> 标签：javascript, google-analytics

我的页面中有一个 javascript，由于我不会进入的原因，我无法对其进行编辑。

```
<script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script>  
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-12345-1");
pageTracker._initData();
pageTracker._trackPageview(); 
```

我想要的是在 trackPageview() 上/之前​​添加以下变量；已发送

pageTracker._setDomainName('mydomain.com');

有什么办法可以做到这一点吗？如果我再做一个 ._trackPageview(); 它会算两次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:14:59.910

如果您无法编辑页面代码，那么您打算如何做任何事情？或者你是说你不能触摸那个特定的代码？

不幸的是，你真的无能为力。`_trackPageview`您可以在之后添加另一个，`_setDomainName`但您是对的，它会计算两次页面。或者，您可以使用`_trackEvent`. 这将触发代码而不触发额外的页面视图，但它会向 GA 发送事​​件。如果您的网站上有其他事件跟踪，它可能会“搅浑水”，并使其更难以从报告中过滤出来，尤其是在您已经需要应用其他过滤器的情况下。

此外，在第二次点击中将域设置为其他内容可能会与访问（或）指标混淆。

我同意 Eike Pierstorff 的评论：那个版本的 GA 代码非常过时，应该更新到当前版本。希望这可能会给您足够的权重来更改代码，并且您可以在更新中添加域代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:09:53.663

运行`_setDomainName`后将`_trackPageview`更改Google Analytics 用于跟踪的 cookie的[域哈希部分。](http://blog.vkistudios.com/index.cfm/2010/8/31/GA-Basics-The-Structure-of-Cookie-Values)一旦域哈希发生变化，GA 会将此识别为新访问，访问者的来源/媒体将重置为（直接）/无。

如果不更改您说您无法编辑的 javascript，就无法完成您想做的事情。运行后，配置设置（如域名）是一成不变`_trackPageview`的，除非重置访问，否则无法修改。

# java - 尝试从 JSONObject 中提取 JSONObject 时出现异常“No value for”

> ID：15276333
> 
> 赞同：0
> 
> 时间：2013-03-07T16:22:48.790
> 
> 标签：java, android, json

问题似乎很简单，尽管行为真的很奇怪。

我正在解析的 JSON：

```
[
  {
    "ClassId": 1,
    "Description": "Agile Development 202",
    "Schedule": {
      "$id": "27",
      "DateScheduled": "2013-03-06T00:00:00",
      "ScheduleId": 1
    },
    "Questions": [
      {
        "Choices": [
          {
            "QuestionId": 1,
            "IsCorrect": true,
            "ChoiceId": 1,
            "Points": 12,
            "$id": "3",
            "Choice1": "Peer pressure, Fine-grain coordination, Focusing on the few, Daily commitment and Raising impediments."
          },
          {
            "QuestionId": 1,
            "IsCorrect": false,
            "ChoiceId": 2,
            "Points": 0,
            "$id": "4",
            "Choice1": "Know the work, Get a fresh start, Commit to shared goals and Create focus and abundance."
          },
          {
            "QuestionId": 1,
            "IsCorrect": false,
            "ChoiceId": 3,
            "Points": 0,
            "$id": "5",
            "Choice1": "True-up, Show and tell, Get direct feedback, Offer insights and Ask for help."
          },
          {
            "QuestionId": 1,
            "IsCorrect": false,
            "ChoiceId": 5,
            "Points": 0,
            "$id": "6",
            "Choice1": "Inspect and adapt. Look back at how, not what\r\nDo (even) better next time."
          }
        ],
        "QuestionId": 1,
        "TimeAverage": "00:10:00",
        "ExamId": 1,
        "Question1": "You are a coach facilitating retrospective meeting. What is the main purpose of this meeting that facilitator need to ensure during the meeting?",
        "$id": "2"
      },
      {
        "Choices": [
          {
            "QuestionId": 2,
            "IsCorrect": false,
            "ChoiceId": 6,
            "Points": 0,
            "$id": "8",
            "Choice1": "Automated Acceptance Tests"
          },
          {
            "QuestionId": 2,
            "IsCorrect": true,
            "ChoiceId": 7,
            "Points": 15,
            "$id": "9",
            "Choice1": "Continuous Integration"
          },
          {
            "QuestionId": 2,
            "IsCorrect": false,
            "ChoiceId": 8,
            "Points": 0,
            "$id": "10",
            "Choice1": "Unit Test"
          },
          {
            "QuestionId": 2,
            "IsCorrect": false,
            "ChoiceId": 9,
            "Points": 0,
            "$id": "11",
            "Choice1": "Code coverage metrics"
          }
        ],
        "QuestionId": 2,
        "TimeAverage": "00:10:00",
        "ExamId": 1,
        "Question1": "How does tools like FIT and Fitness compliment Agile?",
        "$id": "7"
      },
      {
        "Choices": [
          {
            "QuestionId": 3,
            "IsCorrect": true,
            "ChoiceId": 10,
            "Points": 13,
            "$id": "13",
            "Choice1": "Fast"
          },
          {
            "QuestionId": 3,
            "IsCorrect": false,
            "ChoiceId": 11,
            "Points": 0,
            "$id": "14",
            "Choice1": "Flexible"
          },
          {
            "QuestionId": 3,
            "IsCorrect": false,
            "ChoiceId": 12,
            "Points": 0,
            "$id": "15",
            "Choice1": "Frequent"
          },
          {
            "QuestionId": 3,
            "IsCorrect": false,
            "ChoiceId": 13,
            "Points": 0,
            "$id": "16",
            "Choice1": "Fixed"
          }
        ],
        "QuestionId": 3,
        "TimeAverage": "00:05:00",
        "ExamId": 1,
        "Question1": "What does \"Timeboxed\" means in Agile terms?",
        "$id": "12"
      },
      {
        "Choices": [
          {
            "QuestionId": 4,
            "IsCorrect": true,
            "ChoiceId": 14,
            "Points": 22,
            "$id": "18",
            "Choice1": "They are used to prioritize projects."
          },
          {
            "QuestionId": 4,
            "IsCorrect": false,
            "ChoiceId": 15,
            "Points": 0,
            "$id": "19",
            "Choice1": "They are used to monitor project performance"
          },
          {
            "QuestionId": 4,
            "IsCorrect": false,
            "ChoiceId": 16,
            "Points": 0,
            "$id": "20",
            "Choice1": "They are used to analyze risk."
          },
          {
            "QuestionId": 4,
            "IsCorrect": false,
            "ChoiceId": 17,
            "Points": 0,
            "$id": "21",
            "Choice1": "They are used to measure coach's performance."
          }
        ],
        "QuestionId": 4,
        "TimeAverage": "00:15:00",
        "ExamId": 1,
        "Question1": "How are EVM metrics used in Agile?",
        "$id": "17"
      },
      {
        "Choices": [
          {
            "QuestionId": 5,
            "IsCorrect": true,
            "ChoiceId": 19,
            "Points": 11,
            "$id": "23",
            "Choice1": "10 Iterations"
          },
          {
            "QuestionId": 5,
            "IsCorrect": false,
            "ChoiceId": 20,
            "Points": 0,
            "$id": "24",
            "Choice1": "10 waves"
          },
          {
            "QuestionId": 5,
            "IsCorrect": false,
            "ChoiceId": 21,
            "Points": 0,
            "$id": "25",
            "Choice1": "20 Iterations"
          },
          {
            "QuestionId": 5,
            "IsCorrect": false,
            "ChoiceId": 23,
            "Points": 0,
            "$id": "26",
            "Choice1": "20 waves"
          }
        ],
        "QuestionId": 5,
        "TimeAverage": "00:12:00",
        "ExamId": 1,
        "Question1": "If a team can complete 10 story points in an iteration then how long will it take for the team to complete 100 story points?",
        "$id": "22"
      }
    ],
    "Details": "What is Agile software Development? I explain agile with one dozen words: Iterative planning, honest plans, project heartbeat, working software, team ...",
    "ExamId": 1,
    "$id": "1",
    "Title": "Agile Part Two",
    "TotalTime": "03:00:00"
  }
] 
```

在我尝试提取`Schedule`JSONObject 之前，一切似乎都很好。

一些代码。

```
public static Exam getExamFromJSONObject(JSONObject jsonObj) throws JSONException {
        int examId = jsonObj.getInt(ExamJSONTags.TAG_ID);
        String title = jsonObj.getString(ExamJSONTags.TAG_TITLE);
        int classId = jsonObj.getInt(ExamJSONTags.TAG_CLASSID);
        String description = jsonObj.getString(ExamJSONTags.TAG_DESCRIPTION);
        String details = jsonObj.getString(ExamJSONTags.TAG_DETAILS);
        Time totalTime = Time.valueOf(jsonObj.getString(ExamJSONTags.TAG_TOTALTIME));

        Exam exam = new Exam();
        exam.setExamId(examId);
        exam.setTitle(title);
        exam.setClassId(classId);
        exam.setDescription(description);
        exam.setDetails(details);
        exam.setTotalTime(totalTime);

        JSONArray questionsJSONArray = jsonObj.getJSONArray(ExamJSONTags.TAG_QUESTIONS);
        ArrayList<Question> questionsArrayList = new ArrayList<Question>();
        if (questionsJSONArray != null) {
            for (int i = 0; i < questionsJSONArray.length(); i++) {
                JSONObject questionJSON = questionsJSONArray.getJSONObject(i);
                Question questionModel = Question.getQuestionFromJSONObject(questionJSON);
                questionModel.setExam(exam);
                questionsArrayList.add(questionModel);
                JSONArray choices = questionJSON.getJSONArray(QuestionJSONTags.TAG_CHOICES);
                if (choices != null) {
                    ArrayList<Choice> choicesArrayList = new ArrayList<Choice>();
                    questionModel.setChoices(choicesArrayList);
                    for (int x = 0; x < choices.length(); x++) {
                        JSONObject choiceJSON = choices.getJSONObject(x);
                        Choice choiceModel = Choice.getChoiceFromJSONObject(choiceJSON);
                        choiceModel.setQuestion(questionModel);
                        choicesArrayList.add(choiceModel);
                    }
                }
            }
        }

        exam.setQuestions(questionsArrayList);

        JSONObject scheduleJSON = jsonObj.getJSONObject(ExamJSONTags.TAG_SCHEDULE); // This is where I get the exception, though you can see the object exists perfectly fine!!!
        if (scheduleJSON != null) {
            Schedule schedule = Schedule.getScheduleFromJSONObject(scheduleJSON);
            exam.setSchedule(schedule);
            schedule.setExam(exam);
        }

        return exam;
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:39:26.433

可能常量值与 json 属性不匹配，请检查区分大小写

# google-chrome - Chrome 开发者工具的一个更好的侧面视图

> ID：15276336
> 
> 赞同：0
> 
> 时间：2013-03-07T16:22:56.947
> 
> 标签：google-chrome, web-inspector

我这辈子都不记得这是哪里了，但是有一个用于 Google Chrome 开发工具的 User Agnet CSS 文件，有人创建该文件是为了在使用侧视图时具有更好的布局。有人知道这个链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:41:04.180

你可以在这里找到它：

Mac：~/Library/Application Support/Google/Chrome/Default/User StyleSheets/Custom.css

PC：C:UsersYourUsernameAppDataLocalGoogleChromeUser DataDefaultUser StyleSheetsCustom.css ~感谢@VSC

Ubuntu (Chromium): ~/.config/chromium/Default/User StyleSheets/Custom.css ~感谢@Carlos

根据[http://darcyclarke.me/design/skin-your-chrome-inspector/](http://darcyclarke.me/design/skin-your-chrome-inspector/)

# acrobat - DMS 集成插入文档

> ID：15276337
> 
> 赞同：1
> 
> 时间：2013-03-07T16:22:57.540
> 
> 标签：acrobat, dms, acrobat-sdk

我是为 acrobat 和 c++ 开发插件的新手，所以请耐心等待。

我已经实现了替换方法的回调`AVAppOpenDialog`并打开了我自己的对话框来插入文档。我传回了路径+文件名，我成功地变成了`ASPathName`。

我的困惑在于如何将这些添加`ASPathName`到 dmsFileSys( `ASFileSysRec`)

```
*outFileSys = (ASFileSys)&dmsFileSys; 
```

我正在关注 adobe acrobat sdk 10 中的 dms 示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:22:13.617

[关联](https://stackoverflow.com/questions/15635344/setting-outaspathnames-for-acrobat-dialogue-return-value/15972414?noredirect=1#15972414)

我的答案也回答了这个问题。

dmsFileSys 我认为是您自己的文件系统的实现。您必须覆盖读/写/删除/等的默认实现。

从你的另一个问题来看，我想你不想这样做。如果你只是想传回一个 ASPathName，你需要将它传回一个数组并从文件路径创建你自己的 ASPathName。

# php - 本地主机重定向到 www.localhost.com

> ID：15276340
> 
> 赞同：0
> 
> 时间：2013-03-07T16:23:01.947
> 
> 标签：php, redirect, wamp

**问题：**我尝试将 magento 安装到我的本地主机中，但是当尝试访问 url 时，`localhost/magento`它会自动重定向到`www.localhost.com/magento`. 这个问题只是与magento有关。

收到此错误后，我尝试安装 wordpress 以确认问题更深，但 wordpress 工作正常，甚至所有其他安装的 CMS 工作正常，而不是 magento。

谁能帮帮我，因为我没有安装任何东西，在我的办公室里，我在 wamp 上安装了 magento，没有任何重定向或错误，但不知道这个系统会发生什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T07:48:39.013

1.  删除文件`app/etc/local.xml`

2.  通过您的 IP 或域重新安装 + `/magento/install.php`。

然后你的 localhost 会跳转到你的 IP 或域，其他人可以成功访问你的网站。

# android - 如何以编程方式截取屏幕截图并将其保存在图库中？

> ID：15276346
> 
> 赞同：5
> 
> 时间：2013-03-07T16:23:16.240
> 
> 标签：android, sdk

我想知道截取当前屏幕的屏幕截图（按下按钮后）并将其保存在图库中的代码是什么，因为我没有带 sd 卡的设备。所以我会保存在默认图库中。谢谢你

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T16:26:10.033

```
 Bitmap bitmap;
  View v1 = findViewById(R.id.rlid);// get ur root view id
  v1.setDrawingCacheEnabled(true); 
  bitmap = Bitmap.createBitmap(v1.getDrawingCache());
  v1.setDrawingCacheEnabled(false); 
```

这应该可以解决问题。

为了节省

```
 ByteArrayOutputStream bytes = new ByteArrayOutputStream();
  bitmap.compress(Bitmap.CompressFormat.JPEG, 40, bytes);
  File f = new File(Environment.getExternalStorageDirectory()
                    + File.separator + "test.jpg")
  f.createNewFile();
  FileOutputStream fo = new FileOutputStream(f);
  fo.write(bytes.toByteArray()); 
  fo.close(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T16:31:28.290

```
 View v1 = L1.getRootView();
    v1.setDrawingCacheEnabled(true);
    Bitmap bm = v1.getDrawingCache();
    BitmapDrawable bitmapDrawable = new BitmapDrawable(bm);
    image = (ImageView) findViewById(R.id.screenshots);
    image.setBackgroundDrawable(bitmapDrawable); 
```

有关完整的源代码，请访问以下博客

[http://amitandroid.blogspot.in/2013/02/android-taking-screen-shots-through-code.html](http://amitandroid.blogspot.in/2013/02/android-taking-screen-shots-through-code.html)

对于存储位图，请参阅以下链接

[Android将创建的位图保存到SD卡上的目录](https://stackoverflow.com/questions/4263375/android-saving-created-bitmap-to-directory-on-sd-card)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-19T22:53:56.673

这将保存到画廊。该代码还设置了一个图像路径.. 这对 Intent.SEND_ACTION 和电子邮件 Intents 很有用。

```
String imagePath = null;
Bitmap imageBitmap = screenShot(mAnyView);
if (imageBitmap != null) {
    imagePath = MediaStore.Images.Media.insertImage(getContentResolver(), imageBitmap, "title", null);
}

public Bitmap screenShot(View view) {
    if (view != null) {
        Bitmap bitmap = Bitmap.createBitmap(view.getWidth(),
                view.getHeight(), Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(bitmap);
        view.draw(canvas);
        return bitmap;
    }
    return null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:25:38.250

正如所`323go`评论的那样，除非您的设备确实已植根，否则这是不可能的。

但是，如果是这样，那么对于[monkeyrunner](http://developer.android.com/tools/help/monkeyrunner_concepts.html)或者如果您使用的是模拟器，这可能是一项不错的工作。

# .net - VS2008 TFSBuild 执行命令

> ID：15276347
> 
> 赞同：0
> 
> 时间：2013-03-07T16:23:17.463
> 
> 标签：.net, tfsbuild

我在我们的 VS2008 TFS TFSBuild.proj 文件中设置了一个项目组，它依次运行多个测试列表。在这两者之间，我需要终止 VSTestHost.exe 进程，否则构建服务器最终会因内存不足异常而中止。

问题是我无法在项目组中嵌入 Exec 任务，例如

```
<ItemGroup>
<MetaDataFile Include="$(BuildProjectFolderPath)/../../Matrix5/Matrix.vsmdi">
<TestList>Build Server</TestList>
</MetaDataFile>
<!--Kill the VSTestHost process, which may be holidng onto unreleased memory: -->
<Exec Command = "Taskkill /IM VsTestHost.exe /T /F"/>
<MetaDataFile Include="$(BuildProjectFolderPath)/../../Matrix5/Matrix.vsmdi">
<TestList>Build Server UI</TestList>
</MetaDataFile>
</ItemGroup> 
```

我还能如何做到这一点？

# windows - Windows 8 中来自 WP8 的 FlipTile、IconicTyle、CycleTile 的平行（等效）磁贴是什么？

> ID：15276350
> 
> 赞同：0
> 
> 时间：2013-03-07T16:23:26.807
> 
> 标签：windows, windows-8, windows-phone-8, live-tile

Windows 8 中来自 WP8 的 FlipTile、IconicTyle、CycleTile 的平行（等效）磁贴是什么？Windows 8 中有很多，它们看起来是静态的。

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T17:14:04.247

与 Windows 8 和 Windows Phone 8 磁贴模板没有直接的相似之处。

Windows Phone 使用“翻转”在单个磁贴上显示多条信息，而 Windows 8 使用“窥视”或滑动动画在多个磁贴面之间移动。您应该使用最适合您希望在磁贴上显示的数据的任何一个查看模板。

没有直接等效的 WP8 IconicTileTemplate。
最接近的类似模板是`TileSquareBlock`或`TileWideBlockAndText0X`因为它们允许显示大量数字，但没有图标。

Windows8 与 CycleTileTemplate 最接近的`TileWideImageCollection`是 Win8 显示多个图像的方式。

参考：[Win8 Tile 模板列表](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx)

# ios - NSLayoutConstraint 用于 UILabel “增长”额外的行

> ID：15276356
> 
> 赞同：7
> 
> 时间：2013-03-07T16:23:30.753
> 
> 标签：ios, objective-c, uilabel, nslayoutconstraint

我有一个`UILabel`，我想设置它，使它有一个固定的宽度和可变的高度，取决于它`text`而不是它的`superView`.

即如果`text`是“Hello World”。那么标签将是......

```
------------------------
|Hello World.          |
------------------------ 
```

如果`text`是“这是一些非常长的文本，跨越了几行”。然后标签将是...

```
------------------------
|This is some very long|
|text that goes over   |
|several lines.        |
------------------------ 
```

我已经使用 an 设置了固定宽度，`NSLayoutConstraint`并且设置`numberOfLines`为 0，但它只保留一个行高并用省略号连接文本。

我知道有一种叫做“contentResistance”的东西，但我不确定它的名称或如何使用它。

这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T16:28:05.963

您需要将`preferredMaxLayoutWidth`标签设置为固定宽度。我不知道为什么它不能自己解决这个问题，因为你已经限制了一个宽度，但是你去了。

如果在 Autolayout 世界中必须设置固定大小感觉不对（它应该这样做！），那么您可以在布局发生后在 viewDidLayoutSubviews*中设置标签宽度的值。*在这种情况下，请注意不要陷入使布局无效的无限循环。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-07T16:28:33.880

试试这个代码它可能对你有帮助>

```
 label.text=@"haiiiiiiiii";

    UIFont *cellFont=[UIFont fontWithName:@"Helvetica" size:12.0];
    CGSize constraintSize=CGSizeMake(250,MAXFLOAT);
    CGSize txtViewSize=[label.text sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap]; 
```

yourlabelname.numberOfLines=0;

CGRect frame=yourlabelname.frame;

```
frame.size.width=250;

frame.size.height=txtViewSize.height;

yourlabelname.frame=frame;

yourlabelname.text=cellText; 
```

# javascript - 在 jqx.dataAdapter 中绑定外部源数据字段时浏览器崩溃

> ID：15276364
> 
> 赞同：1
> 
> 时间：2013-03-07T16:23:54.337
> 
> 标签：javascript, jqxwidgets

我正在尝试使用 jQWidgets (jqxGrid) 构建一个网格，该网格使用 jqx.dataAdapter 显示来自外部数据源的值，但是当我尝试调用 dataBind() 方法时浏览器崩溃。

这是我的（浏览器崩溃！）jsfiddle：http: [//jsfiddle.net/qYyRs/6/](http://jsfiddle.net/qYyRs/6/)

部分代码：

```
 var Area_DataSource = {
                datatype: 'array',
                localdata: Area_Data,
                async: false,
                datafields: [{
                    name: 'Id'
                }, {
                    name: 'Name'
                },{
                    name: 'PlantId'
                },{
                    name: 'PlantName',
                    value: 'PlantId',
                    values: {
                        value: 'Value',   // the problematic field
                        name: 'Name',
                        source: Plant_DataAdapter.records
                    }
                }]
            };
            var Area_DataAdapter = new $.jqx.dataAdapter(Area_DataSource);

            Area_DataAdapter.dataBind();  // booom! 
```

来自 jQWidgets 网站的基本示例： [http ://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/index.htm#demos/jqxgrid/gridkeyvaluescolumnwitharray.htm](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/index.htm#demos/jqxgrid/gridkeyvaluescolumnwitharray.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:01:24.613

这是一个已确认的问题：

[http://www.jqwidgets.com/community/topic/browser-crashes-foreign-datafield-in-jqx-dataadapter/](http://www.jqwidgets.com/community/topic/browser-crashes-foreign-datafield-in-jqx-dataadapter/)

> “我们调试了这个问题并确认了它。它将在 jQWidgets 2.8 中解决。
> 
> 最好的问候，彼得·斯托耶夫
> 
> jQWidgets 团队[http://www.jqwidgets.com](http://www.jqwidgets.com) "

# ios - iOS - 收到内存警告，所有 Malloc 都被释放

> ID：15276366
> 
> 赞同：0
> 
> 时间：2013-03-07T16:24:02.480
> 
> 标签：ios, malloc, memory-warning

我正在编写一个应用程序，该应用程序需要我存储来自设备摄像头的像素数据并将像素与之前的视频帧进行比较。

这是给我带来问题的方法：

```
-(UIImage *)detectMotion:(CGImageRef)imageRef
{
    UIImage *newImage = nil;

    NSUInteger width = CGImageGetWidth(imageRef);
    NSUInteger height = CGImageGetHeight(imageRef);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *rawData = malloc(height * width * 4);
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context = CGBitmapContextCreate(rawData, width, height, bitsPerComponent,     bytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);
    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);

    // this is the problem loop
    for(int i = 0; i < width * height * 4; i += 4) {

        int gray = 0.216 * rawData[i] + 0.715 * rawData[i + 1] + 0.0722 * rawData[i + 2];

        rawData[i] = gray;
        rawData[i + 1] = gray;
        rawData[i + 2] = gray;
        rawData[i + 3] = 255;

        int grayDelta = abs(gray - prevFrameRawData[i / 4]);

        int newColor = 0;
        if (sqrt(grayDelta * grayDelta * 2) >= 60) {
            newColor = 255;
        }

        rawData[i] = newColor;
        rawData[i + 1] = newColor;
        rawData[i + 2] = newColor;
        rawData[i + 3] = 255;

        prevFrameRawData[i / 4] = gray;
   }

   CGImageRef newCGImage = CGBitmapContextCreateImage(context);
   newImage = [UIImage imageWithCGImage:newCGImage];
   CGImageRelease(newCGImage);

   CGContextRelease(context);

   free(rawData);
} 
```

注意：prevFrameRawData 在类的 init 方法中 malloc'd，然后在 dealloc 方法中释放。

在做了一些测试之后，我发现如果我没有为内存块分配任何值，我就不会收到警告。

我认为当你分配一个值时

```
 rawData[i] = value 
```

它只是覆盖了内存中的那个位置。

所有这些低级c的东西对我来说都是新的，希望你们能提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:18:42.610

原来我们在另一种方法中创建了一个额外的 CGImageRef。

# javascript - jQuery form.id 与 form.id.value

> ID：15276367
> 
> 赞同：0
> 
> 时间：2013-03-07T16:24:03.360
> 
> 标签：javascript, jquery, dokuwiki

我正在研究 dokuwiki 插件，我发现关于 js 如何存储元素 id 的想法很有趣。我不确定发生了什么......所以我有一个来自 dokuwiki linkwiz.js 文件的代码，用于确定 ':' char 是否在 id 字符串的一部分中：

```
 dw_linkwiz.textArea = $editor[0];

//some code between

    // prepend colon inside namespaces for non namespace pages
    if(dw_linkwiz.textArea.form.id.value.indexOf(':') != -1 &&
       link.indexOf(':') == -1){
       link = ':' + link;
    } 
```

$editor 是 jQuery 对象。如您所见，他们使用 form.id.value 获取元素的 id，但在某些情况下，当我使用 jQuery .attr 方法动态设置元素的 id 时，form.id.value 未定义，id 字符串仅保留在 form.id 中。你知道为什么会这样吗？哪个更符合标准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:17:45.447

在这种情况下，id 不是元素的 id 属性，而是表单中名为“id”的字段。

简化后看起来像这样：

```
<form>
<input name="id" value="some:page">
<textarea>the editor</textarea>
</form> 
```

`dw_linkwiz.textArea`是 textarea 的 DOM 对象。`dw_linkwiz.textArea.form.id.value`是“一些：页面”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:29:10.710

通常一个 DOM 元素 id 将是一个字符串而不是一个对象，所以`form.id`将是一个带有`id`值的字符串。它不应该是一个有值的对象。这个插件可能已经定义了另一个具有 id 属性的对象，该属性包含一个 value 属性，但这不是标准的 DOM 元素。

# visual-studio-2012 - SQL 工具泄漏到 Visual Studio 2012 工具中，让我感到困惑

> ID：15276368
> 
> 赞同：1
> 
> 时间：2013-03-07T16:24:12.073
> 
> 标签：visual-studio-2012, bids, sql-server-data-tools

我通常在一个屏幕上有 SSMS，在另一个屏幕上有 VS 2012 .. 但是随着 SQL 工具的开发被集成到 VS 2012 中，功能似乎重叠了.. 在我看来，我可以在 VS 中完成所有常见任务2012 年，除了恢复我需要 SSMS 的备份。

还有 Sql Server Data Tools .. 我认为是 IDE + SSIS/Reports/SSAS 吗？然后他们删除了数据比较工具，这是一个谜。

所以我的主要问题是创建 .NET Web 应用程序的最有效方法是什么。使用 SSMS 和 VS 2012 ......或者只使用 VS 2012 sql 数据工具，这样我就可以将 VS2012 用于大多数应该更有效率的东西？

重叠让我感到困惑，我希望以最有效的方式进行设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:27:43.600

如果您需要（并且应该！！！）您的表、存储过程等在版本控制中，Visual Studio 提供了很好的集成。否则你应该使用任何感觉更舒服的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:14:47.540

微软的定位是Visual Studio是针对开发者的，SSMS是针对DBA的。但是，正如您所发现的，这些角色在某种程度上存在重叠的灰色区域。作为开发人员而不是 DBA，我发现我*可以*在 Visual Studio 中做我需要做的一切，但是 SSMS 的某些方面仍然拖着我的后腿。我在这里写了关于我的经验的博客：[SSDT 与 SSMS 中的连接开发](http://sqlblog.com/blogs/jamie_thomson/archive/2013/03/19/connected-development-in-ssdt-versus-ssms.aspx)

要回答您的问题“创建 .NET Web 应用程序的最有效方式是什么”，我建议您在 Visual Studio 中工作。它提供了与您的 .net 代码更好的集成，因为您的数据库 DDL 可以与您的 .net 代码存在于相同的解决方案中 - 当然，这会带来一些连锁反应，例如控制您的数据库 DDL 的源代码。

如果您需要做 DBA 类型的“东西”（例如备份/恢复/HA 配置），那么只需弹出打开 SSMS 和派对，否则坚持使用 Visual Studio。

希望有帮助。

# magento - 是/否 属性确定另一个属性是否可见

> ID：15276374
> 
> 赞同：1
> 
> 时间：2013-03-07T16:24:28.263
> 
> 标签：magento, attributes

我需要一些帮助来弄清楚如何配置属性。

我正在尝试做这样的事情：

您的头发颜色是否为黑色（下拉或单选按钮将显示是或否）如果选择否，现在将提供（金发、棕色、红色、其他）的下拉列表，因此购物者可以选择其中一个选项。如果购物者最初选择是，则（金发、棕色、红色、其他）列表将无法选择。

因此，我将有一个 Yes/No 属性来确定 List 属性是否可见/可选。如果选择“是”，则列表属性将不可见/可选择 如果选择“否”，则列表属性将可见/可选择

这基本上是将属性附加到属性。

感谢您的帮助！

# php - isset 导致 getjson 返回 undefined

> ID：15276376
> 
> 赞同：1
> 
> 时间：2013-03-07T16:24:32.090
> 
> 标签：php, jquery, json, forms, validation

我的代码有问题。我想通过在表单有效时创建一个包含变量的数组来验证我的表单。但要做到这一点，我需要使用 isset 方法来知道信息已经发布。这是一个简单的例子

[http://richbaird.net/clregister](http://richbaird.net/clregister)

```
<?PHP

if(isset($_POST['username'])) {

$helloworld = array ("hello"=>"world","name"=>"bob");

print json_encode($helloworld);

};

if(!isset($_POST['username'])) {

echo json_encode(array('error' => true, 'message' => 'No username specified'));

?> 
```

如果已发布用户名，则非常简单，创建数组 helloworld。

我正在使用以下方法获取json

```
<script>

//document ready

$(document).ready(function(){

var php = "helloworld.php";

//submit form
$("#loginform").ajaxForm
(

//on successful submission

function() {

//getjson

$.getJSON("helloworld.php",function(data) {

    alert(data.message)

}) //close get json

.error(function(error) { alert(error.responsetext); })
.complete(function() { alert("complete"); });

} // close success

) // close submit

});
//end document ready
</script> 
```

我正在使用 jquery forms 插件来提交表单。

我的表格看起来像这样

```
<form id="loginform" name="loginform" method="post" action="helloworld.php">
<label for="username">username</label>
<input type="text" name="username" id="username" />

<br />
<label for="password">password</label>
<input name="password" type="password" />

<br />
<input name="submit"  type="submit" value="Login" id="subtn" />

</form> 
```

网络控制台显示方法 POST 返回 {hello:world name:bob} 但 GET 返回未指定用户名，这是我在警报中得到的。看起来 jquery 在有机会完全处理之前试图获取代码，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:32:58.010

你错过了引号。应该：

```
if(isset($_POST['username'])) 
```

您应该检查您的控制台以查看是否`username`实际发布，就好像不是，您没有返回任何数据。你可以考虑返回一个错误`if(!isset($_POST['username']))`，也许是这样的：

```
echo json_encode(array('error' => true, 'message' => 'No username specified')); 
```

**编辑** 另外，记住它是`$_POST`，不是`$_post`

**第二次编辑**

您的代码将更加直观和可读，如下所示：

```
$return = array();
if(isset($_POST['username'])) {
    $return = array("hello"=>"world","name"=>"bob");
} else {
    $return = array('error' => true, 'message' => 'No username specified');
}
echo json_encode($return); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:01:15.470

经过几个小时的思考和 juco 的大量帮助，我意识到，我在这个函数中进行了 2 个单独的调用。首先我发布有效的数据，然后在一个成功的帖子上我试图进行单独的调用，一个 GET 请求，该请求包含应该提醒我结果的回调，但是因为它是第二个调用它并发送一个 GET 请求，变量 POST 从未设置，因此没有什么可取回的。我修改了我的代码，只使用 post 方法。

```
<script>

//document ready

$(document).ready(function(){

// bind form using ajaxForm 
$('#loginform').ajaxForm({ 
    // dataType identifies the expected content type of the server response 
    dataType:  'json', 

    // success identifies the function to invoke when the server response 
    // has been received 
    success:   processJson 
}

); 

function processJson(data) {

alert(data.hello);

}

});
//end document ready 
```

# php - PHP Traits 覆盖变量

> ID：15276381
> 
> 赞同：3
> 
> 时间：2013-03-07T16:24:47.970
> 
> 标签：php, default-value, traits, class-variables

假设我有这个特征：

```
trait MyTrait{

    protected static $_statVar = 'defaultStaticVal';
    protected $_var = 'defaultVal';

} 
```

还有一个使用它的类

```
class MyClass{

    use MyTrait;

} 
```

我将如何更改默认值，例如

```
use MyTrait{

    MyTrait::$_statVar = 'nonDefaultStaticVal';
    MyTrait->_var = 'nonDefaultVal';

} 
```

我知道显示的语法不正确，而且目前不允许简单地通过更改继承的特征值来更改它们。这给我留下了哪些选择/替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-05-15T16:46:40.337

**PHP 扩展类和特征启动控制**

我创建了一个小助手，可以解决大多数情况，并在类 + 特征引导过程中扩展您的执行优先级。以下示例中使用的数字尊重设置顺序。类似于 Laravel 的启动机制。

一个助手类：

```
class TraitHelper
{
    // The helper will call the boot function on every used trait.
    static public function bootUsedTraits($obj)
    {
        $usedTraits = class_uses($obj);
        foreach ($usedTraits as $traitClass) {
        $path = explode('\\', $traitClass);
        $traitBootMethod = array_pop($path);
        $traitBootMethod = 'boot'.$traitBootMethod;
        if (method_exists($obj, $traitBootMethod)) {
            $obj->$traitBootMethod();
            }
        }
    }
} 
```

你的班：

```
class MyClass{

    use MyTrait;

    // Class default values
    static protected $a = 1;
    protected $b = 2;

    function __construct()
    {
        // Class setting values before trait
        self::$a = 4;
        $this->b = 5;

        $this->traitVar = 6;

        // Trait setting values
        \TraitHelper::bootUsedTraits($this);

        // Class setting values after trait
        self::$a = 10;
        $this->b = 11;

        $this->traitVar = 12;
    }
} 
```

你的特质：

```
trait MyTrait {

    // Trait default values
    protected $traitVar = 3;

    // Called on "bootUsedTraits"
    public function bootMyTrait() {
        self::$a = 7;
        $this->b = 8;

        $this->traitVar = 9;
    }
} 
```

# python - django render_to_response 重定向到另一个视图

> ID：15276382
> 
> 赞同：1
> 
> 时间：2013-03-07T16:24:53.157
> 
> 标签：python, django, django-views

我是 django 的新手，我有一个 render_to_response 将用户重定向到好的 url。但是在浏览器中，url没有改变，所以它被坏视图处理了......

这里是

```
return render_to_response('newworkflow.html/',    
{'form':form,},context_instance=RequestContext(request)) 
```

这是我的网址配置：

```
url(r'newworkflow/$','access_mgmt.views.newworkflowform'),
url(r'newuser/$','access_mgmt.views.newuser'), 
```

一旦在`newworkflow.html`我有一个表单，它不是由好视图处理的，实际上它是由这个 render_to_response 所在的那个处理的。

是否可以同时更改浏览器中的 URL `render_to_response`？

我使用 render_to_response 因为在（源和目标）上我都激活了 csrf_token

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:33:58.157

`HttpResponseRedirect`可用于将客户端重定向到不同的 URL。

`render_to_response`“使用给定的上下文字典渲染给定的模板，并返回带有该渲染文本的 HttpResponse 对象。”

如果客户端将忽略响应的正文并转到不同的 URL，则将模板呈现为响应是没有意义的。

相反，将客户端重定向到适当的 URL，然后从与该 URL 关联的视图中提供呈现的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T08:34:29.723

# 了解“网址”

你写

> 是否可以同时更改浏览器中的 URL `render_to_response`？

我认为您对“URL”实际上是什么的理解过于模糊。如果浏览器请求 URL `X`，它会认为您发送的任何内容都是 URL 的响应`X`，无论它是什么。

因此，如果服务器（您！）发送实际的 HTML 内容，浏览器中的 URL 将永远不会改变。

要在浏览器中更改 URL，您需要向浏览器发送重定向响应（使用 Django 的[`HttpResponseRedirect`](https://docs.djangoproject.com/en/1.10/ref/request-response/#httpresponse-subclasses)）。浏览器将获取`Y`其中包含的 URL，并使用 URL 向服务器发出*另一个*请求`Y`- 然后也会显示在浏览器的地址栏中。

然后，服务器将发送 HTML 内容`Y`。您不能在一个请求中同时拥有这两个步骤：重定向*和*发送内容。

# android - 活动未显示

> ID：15276392
> 
> 赞同：-1
> 
> 时间：2013-03-07T16:25:10.643
> 
> 标签：android, android-activity

Java代码：

```
package com.piyush.bankai;

import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class HomeParse extends Activity {
static final String BLOG_URL = "http://www.google.com/";
Document doc=null;
String linkText=null;
String linkHref=null;
//TextView a;

@Override
public void onCreate(Bundle savedInstanceState) {
    // set layout view
    super.onCreate(savedInstanceState);
    setContentView(R.layout.homeparse);

    try {
        doc = Jsoup.connect("http://en.wikipedia.org/").get();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Elements divs =  doc.select("#mp-itn b a");

    for (Element div : divs) {
           linkHref = div.attr("href");
           linkText = div.text();
        }

    try {
        ((TextView)findViewById(R.id.tv1)).setText(linkHref);
    } catch (Exception ex) {
        ((TextView)findViewById(R.id.tv1)).setText("kalal");
    }

    for (Element div : divs)
        System.out.println(div.text());
    }
} 
```

xml布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello"
    android:id="@+id/tv1"
     />

</LinearLayout> 
```

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.piyush.bankai"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <activity
        android:name=".Flip"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <activity
        android:name=".Queries"
        android:configChanges="orientation"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.QUERIES" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <activity
        android:name=".Test"
        android:configChanges="orientation"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
    </activity>

    <activity
        android:name=".HomeParse"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.HOMEPARSE" />
             <category android:name="android.intent.category.LAUNCHER"         />
        </intent-filter>
    </activity>

</application>

<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.INTERNET" />

</manifest> 
```

运行此项目后，我在控制台中看到的只是安装成功！和完成。就是这样，输出没有显示在android设备中。请帮我调试这个错误。我尝试创建其他项目，它们似乎运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:31:33.593

你的清单是错误的：

如果您希望 home parse 成为启动器活动，则必须在其上放置该意图过滤器。

```
 <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter> 
```

并从 .flip 活动中删除。

这`<action android:name="android.intent.action.HOMEPARSE" />`也不是真的，android 对这条线什么也不做

# php - FFMPEG视频转换时间过长

> ID：15276398
> 
> 赞同：3
> 
> 时间：2013-03-07T16:25:29.857
> 
> 标签：php, video, ffmpeg

我有一个类似于 youtube 的网站。用户可以上传不同格式的视频（mov、flv 等）。我的网站会将这些视频转换为不同的格式，以便其他用户可以下载和评价这些视频。我使用 codeigniter 构建我的网站，我正在使用 ffmpeg 将视频转换为各种格式。我的问题之一是，视频转换需要很长时间。

例如，一个 76MB 的视频需要将近 2 个小时才能转换为各种格式。我的问题有什么解决办法吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:04:29.877

我在使用[transload.it](https://transloadit.com/)方面有很好的经验。它有一个非常好的 API，您可以将文件上传到 S3 存储桶，系统可以将转换后的视频放在同一个存储桶中。

看看文档：[https ://transloadit.com/docs](https://transloadit.com/docs)

# php - For each PHP multi dimension array returns 1 character

> ID：15276401
> 
> 赞同：0
> 
> 时间：2013-03-07T16:25:31.227
> 
> 标签：php, mysql, arrays, pdo

For some reason the both code upon killing the query var returns:

```
SELECT client_fname FROM client WHERE c=:l AND f=:n 
```

Instead of:

```
SELECT client_fname FROM client WHERE client_id=:id AND client_id=:fname 
```

Notice that only the first character of the column name strings is output.

Where am I going wrong? :S

PHP 5.4, will be using PDO SQL.

```
public function getField($_field, $_id, $_type) {
    $_args = array(
        array($_type.'_id', 'id'),
        array($_type.'_fname', 'fname')
    );
    //var_dump($_args);
    echo $this->dbSelect($_type.'_'.$_field, $_type, $_args);
}

protected function dbSelect($_select, $_from, $_args) {
    $i = 0; //var_dump($_args);
    $query = 'SELECT '.$_select.' FROM '.$_from.' WHERE ';
    foreach ($_args as $_where) {
        if($i == 0) {
            $query .= $_where[$i][0] .'=:'. $_where[$i][1];
        } else {
            $query .= ' AND '.$_where[$i][0] .'=:'. $_where[$i][1];
        }
        $i++;
    }
    die($query);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:29:30.490

`$_args` was a 2D array. However, your `foreach` is using `$_where` as its iteration variable. `$_where` is itself a *one-dimensional* array, so you don't need `$i` here at all. Instead just use `$_where[0]`

`$_where[0]` should refer to the column, and `$_where[1]` refers to its bound placeholder. `$i` is unrelated to the contents of `$_where`.

```
foreach ($_args as $_where) {
    if($i == 0) {
        $query .= $_where[0] .'=:'. $_where[1];
    } else {
        $query .= ' AND '.$_where[0] .'=:'. $_where[1];
    }
    $i++;
} 
```

Otherwise, you are getting the result of an array key access of a string. For example:

```
$str = "Hello world";
echo $str[0];
// "H" 
```

# vb6 - Visual Basic 部署脚本

> ID：15276406
> 
> 赞同：1
> 
> 时间：2013-03-07T16:25:42.620
> 
> 标签：vb6

我正在处理一个 VB 6.0 项目。该项目使用打包和部署向导。使用此向导时，部署脚本保存在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T17:35:01.590

部署脚本通常与项目文件一起保存为带有`.pdm`扩展名的文件。

设置本身是在您告诉它的任何文件夹中创建的，以及重建 cab 文件所需的支持文件。

要编辑部署脚本，您可以使用记事本等简单的文本编辑器，或者您可以重新运行向导。我相信它使用现有脚本作为基础（但距离我上次使用它已经有 10 年了）。

# android - android xml错误解析xml：格式不正确

> ID：15276414
> 
> 赞同：0
> 
> 时间：2013-03-07T16:25:56.487
> 
> 标签：android, xml, parsing

我对 XML 很陌生，我只是在为 android 开发的情况下学习它。但是 IDE 构建了一系列 TextViews 和 EditTexts，其中两个给了我一个“解析 xml 的 xml 错误：格式不正确”错误（textView1 和 editText2）我问过我的同行和导师，但没有一个人真的太确定是什么出错了。感谢所有帮助并提前感谢。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:weightSum="100"
    android:orientation="vertical" >
    <ScrollView android:layout_weight="30" android:layout_width="fill_parent" android:layout_height="fill_parent">
    <LinearLayout android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical">

    <TextView android:id="@+id/textView1" android:layout_width="wrap_content"  android:layout_height="wrap_content" android:text="TextView" />

    <EditText android:id="@+id/editText1" android:layout_width="match_parent" android:layout_height="wrap_content" android:ems="10" >
    </EditText>

    <TextView android:id="@+id/textView2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="TextView" />

    <EditText android:id="@+id/editText2"android:layout_width="match_parent"  android:layout_height="wrap_content"  android:ems="10" />

    <TextView android:id="@+id/textView3"android:layout_width="wrap_content"  android:layout_height="wrap_content"android:text="TextView" />

    <EditText android:id="@+id/editText3"android:layout_width="match_parent" android:layout_height="wrap_content"  android:ems="10" />

    <TextView android:id="@+id/textView4"android:layout_width="wrap_content" android:layout_height="wrap_content"  android:text="TextView" />

    <EditText android:id="@+id/editText4" android:layout_width="match_parent"android:layout_height="wrap_content"android:ems="10" />

    <TextView android:id="@+id/textView5"android:layout_width="wrap_content"android:layout_height="wrap_content"android:text="TextView" />

    <EditText android:id="@+id/editText5"android:layout_width="match_parent"android:layout_height="wrap_content"android:ems="10" />

    <TextView android:id="@+id/textView6"android:layout_width="wrap_content"android:layout_height="wrap_content"android:text="TextView" />

    <EditText android:id="@+id/editText6"android:layout_width="match_parent"android:layout_height="wrap_content"android:ems="10" />
    </LinearLayout>
    </ScrollView>
    <LinearLayout android:layout_width="match_parent"
    android:layout_height="fill_parent)"
    android:orientation="vertical"
    android:layout_weight="40">
    <Button android:id="@+id/button1"android:layout_width="wrap_content"android:layout_height="wrap_content"android:text="Button" />
    </LinearLayout>
    <LinearLayout android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:layout_weight="30">
    <AnalogClock android:id="@+id/analogClock1" android:layout_width="wrap_content"android:layout_height="wrap_content" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:29:43.177

你的错误是这一行：

```
 android:layout_height="fill_parent)" 
```

在您的第一个内部线性布局中。你当然应该去掉')'。

出于某种原因，编辑器没有为您提供正确的错误行。在使用 Eclipse 时，您应该使用 Ctrl(/apple)+shift+F。它会自动格式化您的文件。这样做之后，很容易发现错误。

附言。使用 match_parent 而不是 fill_parent，不推荐使用 fill_parent。

# powershell - PowerShell - 如何添加 Microsoft System Center Service Manager 控制台模块

> ID：15276416
> 
> 赞同：0
> 
> 时间：2013-03-07T16:25:59.737
> 
> 标签：powershell, scripting

如何添加 Microsoft System Center Service Manager Console 2010 MODULE。我在网上搜索过，但只看到了 2012 模块的教程，有没有办法为 service manager 2010 编写 powershell 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T09:01:42.743

您可以使用 Microsoft PowerShell 注册模块

# android - Android在EpandableListView中为子项添加字母顺序

> ID：15276435
> 
> 赞同：0
> 
> 时间：2013-03-07T16:26:59.933
> 
> 标签：android, baseadapter, expandablelistadapter

我知道如何在我的 BaseAdaptor 中的 ListView 上按字母顺序，在 getView 方法中，我做了类似的事情。如何为可扩展的列表视图做同样的事情？>>>>

```
public View getView(int position, View convertView, ViewGroup parent) {
    if((position==0)||position>0&&mValues[position].charAt(0)!= mValues[position-1].charAt(0))

    {
        //Instanciation de notre separateur et qui a pour valeur la premiere lettre de l'élément courant

        View v = mInflater.inflate(R.layout.row, null);
        TextView separator = (TextView)v.findViewById(R.id.separator);
        separator.setVisibility(View.VISIBLE);
        separator.setText(mValues[position].substring(0,1));

        // Intanciation de l'élément courant

        TextView name= (TextView) v.findViewById(R.id.name);
        name.setVisibility(View.VISIBLE);
        name.setText(mValues[position]);

        return v;

    }
    else
    {

    View v = mInflater.inflate(R.layout.row, null);
    TextView name= (TextView) v.findViewById(R.id.name);
    name.setVisibility(View.VISIBLE);
    name.setText(mValues[position]);

    return v;

    }

} 
```

# android - 从可绘制或资产文件夹加载图像触发 java.lang.NullPointerException

> ID：15276445
> 
> 赞同：-1
> 
> 时间：2013-03-07T16:27:49.920
> 
> 标签：android, android-drawable, universal-image-loader

编辑：我解决了将 UIL 库更新到 1.8.0 的问题，因为从资产文件夹添加图像的功能在早期版本中不可用。我确实错过了。

我正在使用[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)库在 ListView 中显示图像列表

如果图像不存在，我想从可绘制或资产文件夹加载占位符。

在库文档中，这是接受的 URI：

```
 String imageUri = "assets://image.png"; // from assets
 String imageUri = "drawable://" + R.drawable.image; // from drawables 
```

但使用任一选项都会触发`java.lang.NullPointerException`

这是我加载图像的 onResume 方法：

```
@Override
public void onResume() {
    super.onResume();

    //open connection to db
    db = new DBAdapter(this);
    db.open();

    // get all defects for this unit
    defectList = db.getAllDefectsByUnit(unit_id);
    // create an array adapter and let it to display our row
    defects = new SimpleCursorAdapter(this, R.layout.defect_row, defectList, new String[] { "defect", "image_path" }, new int[] { R.id.defect, R.id.image }, 0);

    //set custom view using ViewBinder
    SimpleCursorAdapter.ViewBinder binder = new SimpleCursorAdapter.ViewBinder() {
        @Override
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

            //int placeholder_id = getResources().getIdentifier("placeholder", "drawable", getPackageName());

            //get column name
            String name = cursor.getColumnName(columnIndex);

            //for the thumbnail column,if we have an image replace the placeholder
            if ("image_path".equals(name)) {

                ImageView image = (ImageView) view.findViewById(R.id.image);
                //Bitmap thumbnail;
                String image_path = cursor.getString(columnIndex);

                Log.i("image_path ->", image_path);

                if (!image_path.equalsIgnoreCase("")) {

                    // Load and display image asynchronously
                    imageLoader.displayImage(file_prefix + image_path, image);

                } else {

                    String imageUri = "drawable://" + R.drawable.placeholder; // drawable
                    //image.setImageResource(placeholder_id);

                    // Load and display image asynchronously
                    imageLoader.displayImage(imageUri, image);

                }

                return true;

            }

            //for the defect column, just add the text to the view
            if ("defect".equals(name)) {

                String defect_text = cursor.getString(columnIndex);

                TextView defect_holder = (TextView) view.findViewById(R.id.defect);
                defect_holder.setText(defect_text);

                return true;
            }

            return false;
        }
    };

    defects.setViewBinder(binder);

    setListAdapter(defects);

}//onResume 
```

从文件加载很好。

如果我尝试使用常见的 Android 方法加载占位符图像：

```
int placeholder_id = getResources().getIdentifier("placeholder", "drawable", getPackageName());
image.setImageResource(placeholder_id); 
```

然后图像加载正常（即使我在[这里](https://stackoverflow.com/questions/13987479/how-to-force-a-cache-clearing-using-universal-image-loader-android)提到了另一个问题）

这是日志：

```
 `03-07 15:58:07.141: E/ImageLoader(22950): null
 03-07 15:58:07.141: E/ImageLoader(22950): java.lang.NullPointerException
 03-07 15:58:07.141: E/ImageLoader(22950):  at com.nostra13.universalimageloader.core.ImageDecoder.computeImageScale(ImageDecoder.java:121)
 03-07 15:58:07.141: E/ImageLoader(22950):  at com.nostra13.universalimageloader.core.ImageDecoder.getBitmapOptionsForImageDecoding(ImageDecoder.java:104)
 03-07 15:58:07.141: E/ImageLoader(22950):  at com.nostra13.universalimageloader.core.ImageDecoder.decode(ImageDecoder.java:82)
 03-07 15:58:07.141: E/ImageLoader(22950):  at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.decodeWithOOMHandling(LoadAndDisplayImageTask.java:252)
 03-07 15:58:07.141: E/ImageLoader(22950):  at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.decodeImage(LoadAndDisplayImageTask.java:235)
 03-07 15:58:07.141: E/ImageLoader(22950):  at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.tryLoadBitmap(LoadAndDisplayImageTask.java:211)
 03-07 15:58:07.141: E/ImageLoader(22950):  at com.nostra13.universalimageloader.core.LoadAndDisplayImageTask.run(LoadAndDisplayImageTask.java:128)
 03-07 15:58:07.141: E/ImageLoader(22950):  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
 03-07 15:58:07.141: E/ImageLoader(22950):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
 03-07 15:58:07.141: E/ImageLoader(22950):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
 03-07 15:58:07.141: E/ImageLoader(22950):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 03-07 15:58:07.141: E/ImageLoader(22950):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
 03-07 15:58:07.141: E/ImageLoader(22950):  at java.lang.Thread.run(Thread.java:856)` 
```

我错过了什么？我是否传递了格式错误的 URI？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T13:51:24.093

UIL仅从**1.8.0**`content://`版本开始支持和开箱即用的`assets://`方案。`drawable://`

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:07:33.493

我猜你确实检查过这里使用的uri

`imageLoader.displayImage(file_prefix + image_path, image);`

形成良好。

我查看`BaseImageDownloader`了库中关于检索资产文件的方法的类，并且所有代码看起来都井井有条。以下是您发生错误的地方。图像的选项为空，这意味着图像路径不正确。

```
 Options options = new Options();
    options.inJustDecodeBounds = true;
    InputStream imageStream = imageDownloader.getStream(imageUri, displayOptions.getExtraForDownloader());
    try {
        BitmapFactory.decodeStream(imageStream, null, options);
    } finally {
        IoUtils.closeSilently(imageStream);
    }

    int scale = 1;
    int imageWidth = options.outWidth; //<-- this is where your error ocurrs
    int imageHeight = options.outHeight; 
```

使用此代码进行测试，看看是否得到相同的结果。这对我有用，所以它也应该对你有用。如果没有仔细检查您的文件名和路径。如果您在错误发生之前无法找到传递给 ImageDownloader 的 Uri 的答案。

```
 AssetManager mngr = getAssets();
    InputStream stream;
    try {
        stream = mngr.open("your_picture.png");

        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = 2;// If you want to scale

        Bitmap bitmap = BitmapFactory.decodeStream(stream, new Rect(), o2);

        ImageView image = (ImageView) view.findViewById(R.id.image);
        image.setImageBitmap(bitmap);

    } catch (IOException e) {
        Log.e(TAG, "ERROR GETTING IMAGE", e);
    } 
```**

# scala - Play 2.0框架中Cookies的实现

> ID：15276446
> 
> 赞同：1
> 
> 时间：2013-03-07T16:27:52.263
> 
> 标签：scala, cookies, playframework-2.0

希望你一切顺利，

我在 play 2.0 框架中实现 cookie 时遇到问题。在我的应用程序中，我提供了搜索功能。现在我想将最近的搜索数据存储在 cookie 中，但直到现在我无法实现。

如果有任何机构在 play 2.0 中实现 cookie，请建议我。

谢谢阿努杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:35:24.230

看看[http://www.playframework.com/documentation/2.0/ScalaSessionFlash](http://www.playframework.com/documentation/2.0/ScalaSessionFlash)

您可以使用会话通过“withSession”指令存储您的数据。

# mysql - Entity Framework 5 + MySQL.Data 6.6.4.0 在数据插入时导致 NullReferenceException

> ID：15276448
> 
> 赞同：2
> 
> 时间：2013-03-07T16:27:56.897
> 
> 标签：mysql, entity-framework-5

我在 MySQL 中使用实体框架，每次尝试插入数据时它都会给我一个 NullReferenceException。

*   我可以通过创建命令直接插入数据，但是当我使用实体框架时它会爆炸。
*   实体框架将从表中选择或更新表，所以这可能与主键有关

SaveChanges() 方法引发以下异常。

```
 failed: System.NullReferenceException : Object reference not set to an instance of an object.
    at MySql.Data.Entity.ListFragment.WriteSql(StringBuilder sql)
    at MySql.Data.Entity.SelectStatement.WriteSql(StringBuilder sql)
    at MySql.Data.Entity.InsertStatement.WriteSql(StringBuilder sql)
    at MySql.Data.Entity.SqlFragment.ToString()
    at MySql.Data.Entity.InsertGenerator.GenerateSQL(DbCommandTree tree)
    at MySql.Data.MySqlClient.MySqlProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
    at System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree)
    at System.Data.Common.DbProviderServices.CreateCommand(DbCommandTree commandTree)
    at System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)
    at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.CreateCommand(UpdateTranslator translator, Dictionary`2 identifierValues)
    at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
    at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
    at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
    at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
    at System.Data.Objects.ObjectContext.SaveChanges() 
```

英孚 5

```
public decimal CreateAlertNotification2(ulong alertServiceId, Alerting.alert_service_notification_type notificationType, string recipientName, string recipientEndpoint)
        {
            using (risk_fleetEntities dbContext = new risk_fleetEntities())
            {
                var newNotification = new alert_service_notification();
                newNotification.sys_alert_service_id = alertServiceId;
                newNotification.name = recipientName;
                newNotification.notification_type = Enum.GetName(typeof(Alerting.alert_service_notification_type), notificationType);
                newNotification.recipient = recipientEndpoint;
                dbContext.alert_service_notification.AddObject(newNotification);
                dbContext.SaveChanges();

                return newNotification.id;
            }
        } 
```

MySQL 5

```
 CREATE TABLE `alert_service_notification` (
  `id` bigint(20) unsigned AUTO_INCREMENT PRIMARY KEY, 
  `sys_alert_service_id` bigint(20) unsigned NOT NULL,
  `notification_type` ENUM("SMS", "Email"),
  `name` CHAR(50),
  `recipient` CHAR(50),
  FOREIGN KEY (`sys_alert_service_id`) REFERENCES `alert_service`(`id`) 
);
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T12:10:55.307

EF 不支持无符号整数，因此在这种情况下，它必须将 bigint 存储为十进制，因为 Int64 不够大（最大值 9,223,372,036,854,775,807 与无符号 bigint 的 18,446,744,073,709,551,615）。出于同样的原因，它还将存储一个 unsigned int as`Int64`而不是。`Int32`

如果您尝试更改 EF 设计器中的类型，它并不能完全正确地完成所有操作，并在运行时引发类似这样的错误。您实际上可以打开 edmx 并对其进行编辑以解决此问题，您可以欺骗 EF 假设该列并非真正无符号。只需找到您的专栏的所有引用并确保它们都没有提及`Int64`/ `decimal`（取决于您是否需要`Int32`/ `Int64`）。但是，如果您这样做，如果您超过最大值，您的数据库可能会返回无效值。

因此，更简单且正确的解决方法是不使用无符号或将现有列从无符号更改。某些 MySQL 设计器工具默认使用无符号 id 列，因此请注意！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T15:40:58.427

我的解决方案非常简单。刚刚将数据库编辑为没有“无符号”变量，并从中构建模型。像魅力一样工作，无需手动编辑。此外，在生成模型后将它们改回无符号似乎没有问题。:)

# sql - MS Access 的 SQL INSERT INTO 语句

> ID：15276449
> 
> 赞同：1
> 
> 时间：2013-03-07T16:27:59.653
> 
> 标签：sql, vb.net, ms-access, sql-insert, oledbexception

我正在尝试学习如何在我的 VB.net 程序中使用 MS Access。我正在练习学习如何使用 INSERT INTO 语句，但我不断收到错误消息。

这是我的代码：

```
Imports System.Data.OleDb

Public Class Form1

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim myConnection As OleDbConnection
    Dim DBpath As String = "C:\Documents and Settings\nordeen1\Desktop\Test.mdb"
    Dim sConnectionString As String = "Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" & DBpath & ";Persist Security Info=True"
    myConnection = New OleDbConnection(sConnectionString)
    myConnection.Open()
    Dim SQLstr As String
    SQLstr = "INSERT INTO Test (Text, [Date], Number) VALUES ('testing', #2/6/1990#, 5)"
    Dim cmd As New OleDbCommand(SQLstr, myConnection)
    cmd.ExecuteNonQuery()
End Sub
End Class 
```

我收到此错误“OleDbException 未处理。INSERT INTO 语句中的语法错误。” 在`cmd.ExecuteNonQuery()`

任何建议都非常感谢！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:30:18.193

`TEXT`并且`NUMBER`也被保留，因此它们应该被分隔，

```
SQLstr = "INSERT INTO Test ([Text], [Date], [Number]) VALUES ('testing', #2/6/1990#, 5)" 
```

*   [MS ACCESS 保留关键字](http://office.microsoft.com/en-001/access-help/access-2007-reserved-words-and-symbols-HA010030643.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:32:29.473

用于`CDATE`您的日期：

```
 "INSERT INTO Test ([Text], [Date], [Number]) 
              VALUES ('testing',  CDATE('1990-06-02 00:00:00'), 5)" 
```

# r - R中函数计算中的多行

> ID：15276453
> 
> 赞同：1
> 
> 时间：2013-03-07T16:28:11.360
> 
> 标签：r, function

我有以下数据：

```
measurement <- c(1:30)
angle <- rnorm(30, 0, 0.4)
data.1 <- data.frame(measurement, angle) 
```

我想创建一个函数，为四种不同的场景返回一个 TRUE 值：

```
 1\. When 'angle' >  0.3 
or 2\. When 'angle' < -0.3 
or 3\. When 'angle' + the previous 'angle' >  0.3 
or 4\. When 'angle' + the previous 'angle' < -0.3 
```

我用for循环尝试了它，我已经尝试过以下方式，但我只是不知道如何包含角度和之前一个时间步测量的角度的总和（所以我是在这里做是错误的，但我该如何改进它？最好以计算最不费力的方式，因为我使用大量数据集）：

```
n<-data.1$angle
function1 <- function(n){
    return(n>0.3 | n<(-0.3) | (n+(n-1))>(0.3) | (n+(n-1))<(-0.3))
} 
```

很抱歉成为 R 新手，但在浏览了 R 文档的迷宫后，我没有别的办法，只能在这里提问。感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T16:32:19.250

您可以以矢量化格式执行此操作，而不是为每个角度一个接一个地执行此操作。

```
abs(data.1$angle) > 0.3 | abs(data.1$angle + c(0, head(data.1$angle,-1))) > 0.3 
```

**abs(data.1$angle) > 0.3** - 第一个和第二个条件。
**abs(data.1$angle + c(0, head(data.1$angle,-1))) > 0.3** - 获取所有角度并使用`c(0, head(., -1))`. 然后再次检查`abs`0.3 和 -0.3

我得到：

```
# [1] FALSE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
# [15]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE
# [29]  TRUE  TRUE 
```

# opengl-es - 是否可以在片段着色器中绘制线条粗细？

> ID：15276454
> 
> 赞同：25
> 
> 时间：2013-03-07T16:28:12.130
> 
> 标签：opengl-es, opengl-es-2.0

考虑到我使用 GL_LINES 绘制线条，我是否可以在片段着色器中添加线条粗细？我看到的大多数示例似乎只访问片段着色器中图元内的纹素，而线条粗细着色器需要写入线条图元之外的纹素以获得粗细。但是，如果可能的话，一个非常小的、基本的例子会很棒。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-06T18:08:58.323

片段着色器可以做很多事情。看看[有些人在做什么](https://www.shadertoy.com/view/ldfGWn)。我自己离那个级别还很远，但是这段代码可以给你一个想法：

```
#define resolution vec2(500.0, 500.0)
#define Thickness 0.003

float drawLine(vec2 p1, vec2 p2) {
  vec2 uv = gl_FragCoord.xy / resolution.xy;

  float a = abs(distance(p1, uv));
  float b = abs(distance(p2, uv));
  float c = abs(distance(p1, p2));

  if ( a >= c || b >=  c ) return 0.0;

  float p = (a + b + c) * 0.5;

  // median to (p1, p2) vector
  float h = 2 / c * sqrt( p * ( p - a) * ( p - b) * ( p - c));

  return mix(1.0, 0.0, smoothstep(0.5 * Thickness, 1.5 * Thickness, h));
}

void main()
{
  gl_FragColor = vec4(
      max(
        max(
          drawLine(vec2(0.1, 0.1), vec2(0.1, 0.9)),
          drawLine(vec2(0.1, 0.9), vec2(0.7, 0.5))),
        drawLine(vec2(0.1, 0.1), vec2(0.7, 0.5))));
} 
```

![在此处输入图像描述](../Images/b57b432cc4eb35de43c7356d114cd905.png)

另一种选择是检查`texture2D`附近像素的颜色 - 这样你可以让你的图像发光或变厚（例如，如果任何调整像素是白色的 - 使当前像素变为白色，如果附近的像素是白色 - 使当前像素灰色的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T16:36:13.777

不，在片段着色器中仅使用`GL_LINES`. 这是因为 GL 限制您只能在提交给光栅器的几何图形上绘制，因此您需要使用包含锯齿状原始线和任何平滑顶点的几何图形。例如，您可以使用几何着色器将您的线扩展为围绕理想线（或实际上是两个三角形）的四边形，该线可以构成粗线。

一般来说，如果你生成更大的几何体（包括一个全屏四边形），你可以使用片段着色器来绘制平滑的线条。

[这是](https://forum.libcinder.org/topic/smooth-thick-lines-using-geometry-shader)关于该主题的一个很好的讨论（带有代码示例）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-13T05:49:19.740

这是我的方法。令 p1 和 p2 为定义线的两个点，令 point 为与要测量的线的距离的点。点很可能是 gl_FragCoord.xy / 分辨率；

这是功能。

```
float distanceToLine(vec2 p1, vec2 p2, vec2 point) {
    float a = p1.y-p2.y;
    float b = p2.x-p1.x;
    return abs(a*point.x+b*point.y+p1.x*p2.y-p2.x*p1.y) / sqrt(a*a+b*b);
} 
```

然后在你的 mix 和 smoothstep 函数中使用它。

另请查看此答案： [https ://stackoverflow.com/a/9246451/911207](https://stackoverflow.com/a/9246451/911207)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-26T03:33:54.980

一个简单的技巧是在顶点着色器中添加一个抖动：gl_Position += vec4(delta, delta, delta, 0.0); 其中 delta 是像素大小，即 1.0/viewsize

使用零进行两次画线传递，然后将增量作为抖动（作为统一传递）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-20T19:56:12.340

要在 Fragment Shader 中绘制一条线，我们应该检查当前像素 (UV) 是否在该线的位置上。（仅使用 Fragment 着色器代码效率不高！这仅用于使用 glslsandbox 进行测试）可接受的 UV 点应具有以下两个条件：

1- (uv, pt1) 之间的最大允许距离应小于 (pt1, pt2) 之间的距离。在这种情况下，我们创建了一个以 pt2 为中心且半径 = distance(pt2, pt1) 的假设圆，并且还防止绘制比距离 (pt2, pt1) 更长的线。

2- 对于每个 UV，我们假设一个假设圆，其连接点位于线的 ptc 位置（pt2，pt1）。如果 UV 和 PTC 之间的距离小于线刻度，我们选择这个 UV 作为线点。

在我们的代码中：r = distance (uv, pt1) / distance (pt1, pt2) 给我们一个介于 0 和 1 之间的值。我们在 pt1 和 pt2 之间插入一个点 (ptc)，其值为 r

代码：

```
#ifdef GL_ES
precision mediump float;
#endif

uniform float time;
uniform vec2 mouse;
uniform vec2 resolution;

float line(vec2 uv, vec2 pt1, vec2 pt2,vec2 resolution)
{

    float clrFactor = 0.0;
    float tickness = 3.0 / max(resolution.x, resolution.y);  //only used for tickness

    float r  = distance(uv, pt1) / distance(pt1, pt2);

    if(r <= 1.0) // if desired Hypothetical circle in range of vector(pt2,pt1)
    {
        vec2 ptc = mix(pt1, pt2, r); // ptc = connection point of Hypothetical circle and line calculated with interpolation
        float dist = distance(ptc, uv);  // distance betwenn current pixel (uv) and ptc
        if(dist < tickness / 2.0)
        {
            clrFactor = 1.0;
        }
    }
    return clrFactor;
}

void main()
{
    vec2 uv = gl_FragCoord.xy / resolution.xy; //current point
    //uv = current pixel
    //      0 < uv.x < 1 , 0 < uv.x < 1
    //      left-down= (0,0)
    //      right-top= (1,1)

    vec2 pt1 = vec2(0.1, 0.1);  //line point1 
    vec2 pt2 = vec2(0.8, 0.7);  //line point2 

    float lineFactor = line(uv, pt1, pt2, resolution.xy);
    vec3 color = vec3(.5, 0.7 , 1.0);

    gl_FragColor = vec4(color * lineFactor , 1.);
} 
```

# jquery - 带有屏蔽输入的jquery验证插件，错误地验证电话号码

> ID：15276456
> 
> 赞同：1
> 
> 时间：2013-03-07T16:28:14.190
> 
> 标签：jquery, jquery-validate, maskedinput

我一直在试图弄清楚为什么电话号码的验证会触发电话号码字段。我同时使用[Validator 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)和掩码输入插件来为一组字段设置一些验证。我不怀疑这个特定问题与屏蔽输入插件的使用有关，但无论如何我都会提到它。

如果填写了任何字段（扩展字段除外），则所有字段（扩展字段除外）都是必需的。该代码正在做它应该做的事情，但验证正在触发我不想要的额外验证。电话号码正在检查长度，即使我没有在需要的地方编码任何东西。

```
 $("#requestform").validate({
        rules: {
            namedepa: {
                skip_or_fill_minimum: [6, ".section"]
            },
            techdepa: {
                skip_or_fill_minimum: [6, ".section"]
            },
            conphodepa: {
                skip_or_fill_minimum: [6, ".section"],
                maskedPhone: true
            },
            techemaildepa: {
                skip_or_fill_minimum: [6, ".section"]
            },
            adddepa: {
                skip_or_fill_minimum: [6, ".section"]
            },
            roomdepa: {
                skip_or_fill_minimum: [6, ".section"]
            }
        },
        onfocusout: function (element) {
            $(element).valid();
        },
        focusCleanup: true,
        errorClass: "error"
    });
    var ErrorMessage = "&nbsp;Required";
    jQuery.extend(jQuery.validator.messages, {
        skip_or_fill_minimum: ErrorMessage,
        required: ErrorMessage
    }); 
```

我创建了一个[JSFiddle](http://jsfiddle.net/XqnhC/3/)来演示我遇到的问题。如果您浏览字段，当您到达并传递电话号码字段时，会出现“您必须输入不超过 10 个字符”的消息。

我不知道从这里去哪里。我创建的 JsFiddle 也有我创建的 maskedPhone 验证器，虽然我不认为这是一个问题，但我已经测试了我在 www.regexpal.com 网站上使用的电话号码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:41:01.450

你不应该需要`onfocusout`回调函数......这是默认行为。也是`errorClass: "error"`默认的。 [有关更多信息，请参阅文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)。

其次，错误消息是由`maxlength="10"`电话字段内的属性触发的，并且被屏蔽的输入本身超过 10 个字符。

```
<input name="phodepa" type="text" maxlength="10" id="phodepa" class="setTelephone section"/> 
```

**您修改后的代码：http: [//jsfiddle.net/vY22J/](http://jsfiddle.net/vY22J/)**

当您选择表单上的所有字段作为规则的一部分时，我不完全确定您为什么要使用该`skip_or_fill_minimum`规则。当您全部制作`required`时，没有填写任何内容时会跳过整个表单，这也是插件的默认行为。我想我不理解这种情况下的重点。

* * *

**编辑**：

用户当心：规则上有一个开放的 Github 问题`skip_or_fill_minimum`。

[https://github.com/jzaefferer/jquery-validation/issues/412](https://github.com/jzaefferer/jquery-validation/issues/412)

# php - 什么可以用来抓取使用 javascript 加载的数据？

> ID：15276457
> 
> 赞同：0
> 
> 时间：2013-03-07T16:28:19.880
> 
> 标签：php, javascript

我知道 javascript 是一种浏览器端脚本语言。我有一个我想抓取的页面。它有一个表；我能够抓取所有表数据，除了一个由 javascript 加载的数据。它是一个赔率比较网站，赔率不断变化。赔率是使用 javascript 加载的。

我可以用什么代替简单的 php dom 来解析 javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:36:13.543

（如果您可以将软件安装到您的服务器）您可以使用“无头”浏览器（没有用户界面的浏览器），如 phantomjs（[http://phantomjs.org/](http://phantomjs.org/)），它返回完整的网站，包括解析的 javascript 和将结果提供给您的 php 脚本。

# makefile - 如何在使用 clearmake makefile 构建时多次创建对象

> ID：15276458
> 
> 赞同：1
> 
> 时间：2013-03-07T16:28:24.880
> 
> 标签：makefile

我正在我的 Makefile 中创建一个主构建目标。我有一个像“all_images”这样的目标

all_images: fast_image slow_image

fast_image: clean_objects dep_1 dep_2 dep_3

slow_image: clean_objects dep_1 dep_2 dep_3

fast_image 在 makefile 中有一些其他条件，导致它在最终图像名称中包含 fast_image，而 slow_image 在其名称中具有相同的内容。

我想在快速和慢速构建之间进行清理（删除所有 .o 文件，显然不是最终图像）但是当我这样做时，clean_objects 不会第二次发生，因为它已经在 fast_image 期间发生了。

在你说“你不应该清理，因为 slow_image 应该重建所有改变的东西”之前，我们的特定环境有一个非常复杂的 makefile 来生成代码，clearmake 来做一些 gnu_make 启动，以及其他事情。我必须清理之间的对象，有没有办法强制已经发生的依赖关系再次发生？我知道我可以到处走动并手动删除所有 .o 文件，但是 clean_objects 目标已经关闭并且有一堆依赖项可以执行各种复杂的对象删除，我不想手动完成所有这些如果我不必。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:42:40.220

我确信有很多方法可以做到这一点，但我首先想到的是创建两个单独的目标`clean_fast_image_objects`，`clean_slow_image_objects`然后让这两个目标都调用一个定义的 makefile 函数，该函数运行`clean_objects`当前执行的命令。

# php - 301 重定向，冗余 index.php

> ID：15276460
> 
> 赞同：0
> 
> 时间：2013-03-07T16:28:26.313
> 
> 标签：php, apache, .htaccess, web, http-status-code-301

我有一个问题。我想通过 htaccess 中的 301 重定向将我的网站地址从 www.lapnet.net.pl 重定向到 lapnet.net.pl。当我尝试使用此代码时总是：

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www.lapnet.net.pl
RewriteRule ^(.*)$ http://lapnet.net.pl$1 [R=permanent,L] 
```

浏览器将我重定向到[http://lapnet.net.pl/index.php?view=](http://lapnet.net.pl/index.php?view=) （视图是负责加载内容的变量）。我怎样才能避免这个“index.php?view=”？感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:34:42.713

最后一行对我来说看起来很可疑：我会`/`在域之后添加一个并添加查询字符串，但我不确定这是否是您的问题的原因：

```
RewriteRule ^(.*)$ http://lapnet.net.pl/$1 [R=301,L,QSA]
                                                    ^^^ add original query string
                                       ^ slash here 
```

# css - 可以将背景图像添加到输入字段的值中吗？

> ID：15276468
> 
> 赞同：0
> 
> 时间：2013-03-07T16:28:37.957
> 
> 标签：css, input, background-image

我有一个如下所示的输入字段：

```
<input type="submit" value="CONTINUE" name="submit" class="submitButton"> 
```

输入上有一个背景图像已经给它一个纹理，所以我想添加另一个背景图像而不覆盖原始图像。

我有一个箭头的 png 需要在“CONTINUE”之后显示，并尝试了一些方法在页面上获取它，包括在 CSS 中添加 after 属性：

```
input.submitButton:after{.....} 
```

以及尝试将 div 放入值中（值得一试），但我无法显示它。

有没有办法在不使用绝对定位的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:30:41.393

那应该做一个技巧：

```
input.submitButton{
    background: url(arrow.png) 50% 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:38:33.673

您可能需要使用箭头 + 继续设置背景

```
input.submitButton{
  /*background-color: transparent;*/
  background-image: url(arrow.png);
  background-position: 50% 100%;
  /*border: none;
  width: ;
  height: ;*/
  display: inline-block;
  padding-right: ;
} 
```

或者您可以使用`position:absolute`带有箭头的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:42:09.147

只需使用`<button>`标签

[在这里摆弄](http://jsfiddle.net/4sWcr/3/)

HTML：

```
<button type="submit" name="submit" class="submitButton">
    Text inside button <span class="spanner">&rarr;</span>
</button> 
```

CSS：

```
.spanner {
    background-color:red;
    border-left:4px solid green;
} 
```

# android - 安卓。阿克拉。putCustomData 线程是否安全

> ID：15276469
> 
> 赞同：0
> 
> 时间：2013-03-07T16:28:41.800
> 
> 标签：android, acra

我似乎无法找到我遇到的这个问题的答案：

是来自 ACRA 库的方法吗...

`ACRA.getErrorReporter().putCustomData(Name, Content);`

...线程安全？

我想从两个不同的线程中调用它，但我不确定我是否应该这样做。

我已经搜索了文档，但不幸的是我找不到与此相关的任何内容，或者我只是一个糟糕的 Googleler :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:34:59.670

如果不确定，请购买一些保险：

```
ErrorReporter er = ACRA.getErrorReporter();
synchronized( er ) {
    er.putCustomData( ..., .... );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:59:26.470

所以我想我已经弄清楚了。

查看代码，我注意到该`putCustomData`方法实际上是对方法的调用`HashMap's`，更准确地说`put`。

经过进一步搜索，我发现该方法`put`不同步。

所以答案是否定的，`putCustomData`从两个不同的线程调用会给你带来问题。

**有关问题的解决方案**：请参阅下面的*323go*的想法。在我的例子中，我已经有一个我使用的单例类，所以我只是在我调用该方法的那个类中放置了一个同步`putCustomData`方法。

***注意：***如果我错了，请有人告诉我，但这是我能够找到的。

# css - 在 Semantic.gs 中使用 FIXED 布局的嵌套列

> ID：15276475
> 
> 赞同：0
> 
> 时间：2013-03-07T16:28:58.367
> 
> 标签：css, less, fixed, fluid, semantic.gs

我已经使用 Semantic.gs 和一些带有 LESS 的嵌套列实现了流畅的布局。但现在我们的客户决定他们想要修复布局。

我想我可以简单地注释掉 grid.less 中的 @total-width:100% 行，但是现在其他 LESS 文件在使用 .row() mixin 的行上给出了错误。

有解决方法吗？

这是 grid.less 的相关部分

```
/////////////////
// Semantic.gs // for LESS: http://lesscss.org/ 
/////////////////  

// Defaults which you can freely override
@column-width: 20;
@gutter-width: 10;
@columns: 47;

// Utility variable - you should never need to modify this
@gridsystem-width: (@column-width*@columns) + (@gutter-width*@columns) * 1px;
// Set @total-width to 100% for a fluid layout
//@total-width: @gridsystem-width;
//@total-width: 100%;
// Uncomment these two lines and the star-hack width/margin lines below to enable sub-pixel fix for IE6 & 7\. See http://tylertate.com/blog/2012/01/05/subpixel-rounding.html
 @min-width: 980;
 @correction: 1 / @min-width * 100 * 1.5%; 
```

这是 LESS 文件有问题的部分。LESS 编译器给出错误'Compiler Errors variable @total-width is undefined (Line: 292)'，这是带有 .row() 属性的行：

```
 #v_main_wrapper{
    position:relative;
    float:none;
    .row(47);
    &:after{
  content: "";
  display: table;
  clear: both;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:09:32.070

我认为你会想要这个：

```
@total-width: @gridsystem-width; //leave this uncommented, to calculate width
//@total-width: 100%; 
```

# xml - 在 Rockwell FTPC 中解析 XML

> ID：15276476
> 
> 赞同：0
> 
> 时间：2013-03-07T16:29:04.757
> 
> 标签：xml, parsing

我正在研究 Rockwell FTPC... 我有一个 xml，我想解析它并从中获取数据。

这是我的xml：

```
<part>
<partlist>part001</partlist>
<partlist>part002</partlist>
<partlist>part003</partlist>
</part> 
```

我正在编写以下代码来获取数据。

```
 filePath = openFileDialog()
doc=readDocument(filePath)
node=selectSingleNode( doc,"/PartList")
nodeList = selectNodeList( node, "Part")
nodePartNo=selectNodeList(doc,".//PARTNO")
// println(nodePartNo.value.toString())
// println(nodeList.item(0).pop())
println("The node list length is: " +nodeList.getLength()) 
```

帮助我检索节点值。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:54:05.487

请使用 getTextContent() 作为 item(i).getTextContent()

这应该可以解决问题

# ios - 隐藏自定义 UITabBar

> ID：15276477
> 
> 赞同：0
> 
> 时间：2013-03-07T16:29:07.070
> 
> 标签：ios, objective-c, cocoa-touch, uitabbarcontroller, uitabbar

我已经按照[本教程](http://www.rumex.it/2011/07/hiding-your-new-custom-tab-bar-uitabbar-in-an-iphone-application/)`UITabBarController`成功创建并实现了一个自定义。它工作正常，直到我不得不隐藏它。`UITabBar`

我没有使用 Storyboards 或 IB，我必须`UITabBarController`在屏幕上获取对我现有的引用以隐藏其中的自定义`UIView`。我正在尝试这样做，但它只是创建一个新实例，`UITabBarController`而不是指向我在屏幕上看到的原始实例：

```
SGTabBarController *tabBarController = [[SGTabBarController alloc] init];
[tabBarController hideCustomTabBar]; 
```

**SGTabBarController.h**

```
@interface SGTabBarController : UITabBarController

@property (nonatomic) int tabBarHeight;

-(void)hideCustomTabBar;
-(void)showCustomTabBar;

@end 
```

**SGTabBarController.m**

```
-(void)hideCustomTabBar{
    customTabBarView.hidden = YES;
    NSLog(@"HIDDEN!!!");
}

-(void)showCustomTabBar{
    customTabBarView.hidden = NO;
} 
```

关于如何实现它的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:22:59.703

我如何能够在应用程序的任何地方访问自定义 UITabBarController。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Set up the Dashboard
//
_window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
[_window makeKeyAndVisible];

UITabBarController *tabBarController = [[UITabBarController alloc] init];
NSMutableArray *tabBarItems = [@[] mutableCopy];

// Repeat this for any amount of ViewControllers
UITableViewController *tableViewController = [UITableViewController alloc] initWithStyle:UITableViewStylePlain];
UINavigationController *navController = [UINavigationController alloc] initWithRootViewController:tableViewController];

[tabBarItems addObject:navController];
tabBarController.viewControllers = tabBarItems;
self.window.rootViewController = tabBarController;

return YES;
} 
```

# schema.org - 我也收到“警告：schema.org 的微数据不完整”。

> ID：15276480
> 
> 赞同：2
> 
> 时间：2013-03-07T16:29:09.937
> 
> 标签：schema.org, microdata

我的数据遍布各处，因此我无法保持这种格式：

```
<div itemscope itemtype="http://schema.org/Product">
    <h1 itemprop="name">
    <p itemprop="description">
    <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
             <span itemprop="price">      
    </div>
</div> 
```

就像您在下面的代码中看到的那样，页面上的第一件事是类别路径，它必须在 Offer 架构内，而不是我拥有属于 Product 的图像和标题，而不是我拥有再次属于 Offer 的合格数量等等。 ...所以我添加了：

```
<div itemscope itemtype="http://schema.org/Product"> 
```

在页面的开头并在最后关闭它，而不是每当我有一个不属于产品模式的元素时，例如“eligibleQuantity”，我会这样做：

```
<div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
      {L_901}: <span itemprop="eligibleQuantity">{QTY}</span><br />
      </div> 
```

问题是我不知道这是否是正确的方法，也想不出另一种方法。我还收到“警告：schema.org 的微数据不完整”。这是该页面的链接：

[https://www.pchounds.com/item.php?id=82627#.UTi7kRz_mSp](https://www.pchounds.com/item.php?id=82627#.UTi7kRz_mSp)

下面是页面中的一些代码，所以你可以知道我做了什么。谢谢你。

```
<div itemscope itemtype="http://schema.org/Product">
<div itemprop="offers" itemscope itemtype="http://schema.org/Offer" class="breadcrumb"> {L_041}:<span itemprop="category"> {TOPCATSPATH}</span> </div>

...........................................................................................
!-- IF B_HASIMAGE -->
<div class="span3" style="text-align:center"> <img class="img-polaroid" itemprop="image"
   src="{SITEURL}getthumb.php?w={THUMBWIDTH}&fromfile={PIC_URL}" border="0" alt="title" align="center"><br>
<h1 itemprop="name" style="line-height:24px;">{TITLE}</h1>...........................................................................................
<!-- IF QTY gt 1 -->
  <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
  {L_901}: <span itemprop="eligibleQuantity">{QTY}</span><br />
  </div>
  <!-- ENDIF -->
  <!-- IF B_HASENDED -->
  {L_904}<br />
  <!-- ENDIF -->  
  <!-- IF ITEM_CONDITION -->
   <b> {L_1036}:</b> <span itemprop="itemCondition">{ITEM_CONDITION}</span><br /> 
    <!-- ENDIF -->  
   <!-- IF ITEM_MANUFACTURER --> 
  <b> {L_1037}:</b> <span itemprop="manufacturer">{ITEM_MANUFACTURER}</span><br />                      
  <!-- ENDIF -->
  <!-- IF ITEM_MODEL -->
  <b> {L_1038}:</b> <span itemprop="mpn">{ITEM_MODEL}</span><br />
  <!-- ENDIF -->
  <!-- IF ITEM_COLOUR -->
  <b> {L_1039}:</b> <span itemprop="color">{ITEM_COLOUR}</span><br />                                                
  <!-- ENDIF -->
  <!-- IF ITEM_YEAR -->
  <b> {L_1040}:</b> {ITEM_YEAR}<br />
  <!-- ENDIF -->  
   </small> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-12T22:45:09.480

**报价**必须有价格，`<span itemprop="price">`后面必须跟价格的价值，但不是，而且应该只有一个报价时有多个报价。查看 Google 结构化数据测试工具的当前测试结果，有 5 个错误，每个错误都表明*价格缺失*。

问题似乎是报价的每个部分在开始时都有一个单独的“ [http://schema.org/Offer](http://schema.org/Offer) ” - 所以它预计有 5 个价格，5 个报价中的每一个都有一个。

您需要做的是声明`http://schema.org/Offer' **once**, for example an extra`` 在添加所有报价值之前保持打开状态。

```
<div itemscope itemtype="http://schema.org/Product">
<div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
 <div class="breadcrumb"> Item category:<span itemprop="category"> <a href="https://www.pchounds.com/browse.php?id=1">All</a> > <a href="https://www.pchounds.com/browse.php?id=313">Electronics</a> > <a href="https://www.pchounds.com/browse.php?id=857">Audio</a> > <a href="https://www.pchounds.com/browse.php?id=879">Audio Components</a> > <a href="https://www.pchounds.com/browse.php?id=899">Speakers</a></span>    
 </div>
 <div class="row">
   <div class="span3" style="text-align:center"> <img class="img-polaroid" itemprop="image" src="https://www.pchounds.com/getthumb.php?w=120&fromfile=uploaded/82627/82627.jpg" border="0" alt="title" align="center"><br>
   </div>
  </div>
 </div>
 <div class="span5">
 <h1 itemprop="name" style="line-height:24px;">Creative Labs Speaker GigaWorks T20 Series II Systems 2.0 EPS complian</h1>
 <div><!-- schema.org/Offer removed -->
  <em>
  <p><small>Buy Now:    
  <span itemprop="price"><b>108.91</b> <a href="https://www.pchounds.com/converter.php?AMOUNT=108.91" alt="converter" class="new-window">USD</a></span></small></p> 
  </em> 
 </div>

<div class="span5">
<h1 itemprop="name" style="line-height:24px;">Creative Labs Speaker GigaWorks T20 Series II Systems 2.0 EPS complian</h1>
 <div> <!-- removed http://schema.org/Offer -->
 <em>
 <p><small>Buy Now:    
 <span itemprop="price"><b>108.91</b> <a href="https://www.pchounds.com/converter.php?AMOUNT=108.91" alt="converter" class="new-window">USD</a></span></small></p> 
 </em> 
 </div>
 Shipping fee: <b>8.00</b> <a href="https://www.pchounds.com/converter.php?AMOUNT=8.00" alt="converter" class="new-window">USD</a><br />
 <small>Ends within:
 <span id="ending_counter"><span class="errfont">closed</span></span><br />
 <p> Seller location: United States<br />
  <div> <!-- removed http://schema.org/Offer -->
  <b>Payment methods:</b><span itemprop="acceptedPaymentMethod"> PayPal</span> </p>
 </div>
  </small>

... 

</div> 
```

# php - PayPal 使用一键简单上传购物车 - 为什么购物车是空的？

> ID：15276485
> 
> 赞同：0
> 
> 时间：2013-03-07T16:29:19.743
> 
> 标签：php, upload, paypal, shopping-cart

我正在尝试使用以下代码上传购物车，但是当用户点击“立即购买”按钮时，我没有显示用户可以登录付款的 PayPal 订单摘要页面，而是收到一条错误消息`Your shopping cart is empty.`

这是我的代码，有什么问题吗？

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<a href='cart.php?type=current' class='buttonlink previous'>Edit Order</a>&nbsp;&nbsp;<a href='checkout4_confirm.php' class='buttonlink next'>Submit Order</a>
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="hosted_button_id" value="JRECLRTYAJDKY">
<input type="hidden" name="upload" value="1">
<input type="hidden" name="business" value="XXX@XXX.XXX">
<input type="hidden" name="item_name_1" value="<?php echo $order_number; ?>"> 
<input type="hidden" name="item_number_1" value="1"> 
<input type="hidden" name="quantity_1" value="1"> 
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynow_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:57:28.807

这很可能是由于您正在从您的帐户创建一个托管按钮，但随后您正在修改代码。如果要执行此操作，则需要创建一个明文、非托管按钮。

在您的帐户中创建按钮时，取消选中第 2 步中的选项以在 PayPal 上保存按钮。然后在生成代码后，单击链接以删除代码保护。这将创建一个明文非托管按钮。然后你应该能够修改按钮。

# amazon-web-services - Amazon S3 :: 在 noSuchKeyError 上重定向

> ID：15276488
> 
> 赞同：-3
> 
> 时间：2013-03-07T16:29:36.950
> 
> 标签：amazon-web-services, amazon-s3

当 noSuchKeyError （找不到对象）时，我需要重新触发 S3 上的另一个对象。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T19:06:29.507

您提供的信息很少，所以我不知道这个建议是否有用。但是，如果您为网站托管配置 S3 存储桶，则可以定义映射到特定 HTTP 错误代码的自定义错误页面，如此[处](http://docs.aws.amazon.com/AmazonS3/latest/dev/CustomErrorDocSupport.html)所述。

# android - 在文本视图中打开对话框并显示数组列表

> ID：15276490
> 
> 赞同：0
> 
> 时间：2013-03-07T16:29:39.700
> 
> 标签：android, arraylist, dialog, android-dialogfragment

好的，一个简单的问题：我在主要活动中有一个数组列表。当用户单击一个按钮时，我让它打开一个对话框，用户可以在其中输入姓名、电话号码和电子邮件地址，当他们单击对话框按钮“添加联系人”时，他们的输入存储在上述数组列表中。如何让它显示在第二个对话框中（即在 textview 等中）？

我的 MainActivity.java 代码：package com.example.java2midterm_lefelhocz；

```
import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.app.DialogFragment;
import android.view.*;
import android.widget.*;

public class MainActivity extends Activity {

@SuppressWarnings("unused")
private Button btnAdd;
@SuppressWarnings("unused")
private Button btnView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
public void btnAddOnClick(View v){
    DialogFragment newFragment = new DialogFragment();
    newFragment.show(getFragmentManager(), "Add A Contact");

}
ArrayList <String>contacts = new ArrayList<String>();
public void btnViewOnClick(View v){
    DialogFragment newFragment = new DialogFragment();
    newFragment.show(getFragmentManager(), "View Contacts");

}
} 
```

AddContactsDialog：包 com.example.java2midterm_lefelhocz；

```
import android.app.DialogFragment;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.widget.*;

public class AddContactDialog extends DialogFragment {
private EditText txtName;
private EditText txtPhone;
    private EditText txtEmail;
private LayoutInflater inflater;

public AlertDialog onCreateDialog(Bundle savedInstanceState){

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    inflater = getActivity().getLayoutInflater();

    builder.setView(inflater.inflate(R.layout.add_contacts, null));
    builder.setTitle("Add A Contact");
    builder.setPositiveButton("AddContact", new      DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            MainActivity ma = (MainActivity)getActivity();
            txtName = (EditText)AddContactDialog.this.getDialog().findViewById(R.id.txtName);
            txtPhone =     (EditText)AddContactDialog.this.getDialog().findViewById(R.id.txtPhone);
            txtEmail =     (EditText)AddContactDialog.this.getDialog().findViewById(R.id.txtEmail);
            ma.contacts.add(txtName.getText().toString());
            ma.contacts.add(txtPhone.getText().toString());
            ma.contacts.add(txtEmail.getText().toString());

        }
    });
    return builder.create();
}

} 
```

最后，ViewContacts.java：

包 com.example.java2midterm_lefelhocz；

```
import android.app.DialogFragment;
import android.app.AlertDialog;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.widget.*;

public class ViewContacts extends DialogFragment {

private TextView txtContacts;
private LayoutInflater inflater;
public AlertDialog onCreateDialog(Bundle savedInstanceState)
{

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());     

    inflater = getActivity().getLayoutInflater();      

    builder.setView(inflater.inflate(R.layout.view_contacts, null));
    builder.setTitle("Contacts");

    return builder.create();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:48:26.360

您可以通过以下方式传入`contacts`Bundle：

```
newFragment.setArguments(bundle); 
```

`getArguments()`然后在您的片段中阅读它们。或者，您可以`contacts`像在 AddContactsDialog 中一样将其作为静态变量进行读取。使用`public`变量很方便，但通常被认为是不安全的，首选方法是使用 getter / setter 和其他间接传递数据的方式（如在 Bundle 中）。

您可以通过多种方式在对话框中显示这些联系人，最基本的是[`setItems()`](https://developer.android.com/reference/android/app/AlertDialog.Builder.html#setItems%28java.lang.CharSequence%5b%5d,%20android.content.DialogInterface.OnClickListener%29)：

```
OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        Log.v("Dialog List", "You clicked item " + which);
    }
};

AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());     
builder.setTitle("Contacts");
builder.setItems(MainActivity.contacts, dialogClickListener);
return builder.create(); 
```

# teechart - 如何在 TeeChart 中隐藏条上的空白标签

> ID：15276496
> 
> 赞同：0
> 
> 时间：2013-03-07T16:29:55.343
> 
> 标签：teechart

我有一个条形图，其中每个条形代表特定日期的值。由于数据的时间间隔不相等，因此我使用递增整数作为 X 值，并将日期作为标签值。一些条形图没有日期（标签为空）。该图将空标签值显示为包含“0”的标签框，而不是完全隐藏这些条的标签框（这是有道理的，因为标签是空的，而不是“0”）。有什么方法可以指示 TeeChart 删除那些不必要的、令人困惑的标签框吗？

# ios - 如何以编程方式清除推送通知-iOS

> ID：15276498
> 
> 赞同：2
> 
> 时间：2013-03-07T16:29:59.097
> 
> 标签：ios, push-notification

用户阅读后，我需要从通知中心清除推送通知。我知道有 cancelAllLocalNotifications 方法，但是如何清除所有远程通知？作为补充，我希望有以下功能，如果用户在通知中心有 5 条消息，我们只有在用户阅读所有通知后才会清除所有通知。任何想法如何实现这些？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-11T06:45:07.083

If you want to clear notifications in swift

```
import UserNotifications

if #available(iOS 10.0, *) {
    let center = UNUserNotificationCenter.current()
    center.removeAllPendingNotificationRequests() // To remove all    pending notifications which are not delivered yet but scheduled.
    center.removeAllDeliveredNotifications() // To remove all delivered notifications
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:32:06.473

您可以使用 清除它们`setApplicationIconBadgeNumber`，例如：

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0]; 
```

# cmd - CMD 用文件夹打开 VLC 播放器

> ID：15276501
> 
> 赞同：0
> 
> 时间：2013-03-07T16:30:19.460
> 
> 标签：cmd

我尝试使用每个 cmd 文件打开一个带有 vlc 播放器的文件夹。这就是我所拥有的：

```
@echo off
cd "C:\Program Files (x86)\VideoLAN\VLC" vlc.exe D:\Micha\Music\platten\platten\dance
Exit 
```

但它不起作用......请帮助一个cmd新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:41:32.920

我有它.. 对不起@echo on "C:\Program Files (x86)\VideoLAN\VLC\vlc.exe" D:\Micha\Music\platten\platten\dance\ Exit

# list - Prolog - 递归列表

> ID：15276505
> 
> 赞同：3
> 
> 时间：2013-03-07T16:30:26.500
> 
> 标签：list, recursion, prolog

这是我的问题：一个小俱乐部决定建立一个电话网络，用于在其成员之间发送紧急信息。同意以下安排：安妮可以给比尔和玛丽打电话。比尔可以给汤姆和苏打电话。汤姆可以给丽兹和弗兰克打电话。如有必要，Liz 也可以给 Frank 打电话。

将此信息表达为形式的七个 Prolog 事实 `can_phone(anne,bill)`。现在为谓词 message_route 编写递归 Prolog 规则，`message_route(A,B,R)`如果可以使用俱乐部的电话安排，通过 list 中的人员`A`将消息传递给`B`routed ，则为 true。`R`例如，`message_route(anne,frank,[anne,bill,tom,liz,frank])` 将是真的（因为`anne`可以打电话`bill`，谁可以打电话`tom`，谁可以打电话`liz`，谁可以打电话`frank`）。

到目前为止我有这个：

```
can_phone(anne,bill).
can_phone(anne,mary).
can_phone(bill,tom).
can_phone(bill,sue).
can_phone(tom,liz).
can_phone(tom,frank).
can_phone(liz,frank). 
```

对于我的`message_route`，我已经进行了实验并进行了这项工作，这使我可以完成问题的第二部分，而无需将列表限制为指定的人员列表 ( `R`)。

```
message_route(A,B) :- can_phone(A,B).
message_route(A,B) :- can_phone(A,X), message_route(X,B). 
```

我不明白如何在我的回答中实现这个列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:36:10.693

累加一个list比较简单：首先，观察if`A`可以`B`直接调用，list就是简单的`[A, B]`。因此，我们可以将您的第一条规则重写为

```
message_route(A,B,[A,B]) :- can_phone(A,B). 
```

第二条规则有点棘手：您需要统一到由 生成的列表`message_route`，并在其头部插入`A`。请注意，您不需要插入`X`or `B`，因为它们将由返回的列表提供：

```
message_route(A,B,[A|Tail]) :- can_phone(A,X), message_route(X,B,Tail). 
```

这是一个[使用您的数据的小演示](http://ideone.com/eHjE7q)。

请注意，如果您提供的数据表示带有循环的图形而不是树，则此代码将追逐自己的尾巴。`X`为避免这种情况，如果它已经是`Tail`列表的一部分，您可以避免选择。

# css - 用rem做手机网站设计可以吗

> ID：15276508
> 
> 赞同：0
> 
> 时间：2013-03-07T16:30:36.970
> 
> 标签：css, typography, mobile-browser

我想知道在我的移动网站中使用 rem 是否是个好主意。这样做会让生活变得更轻松，但我没有任何旧设备可供测试，而且我找不到任何关于支持 ie mobile 的明确信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:44:11.283

CSS3 有一个新的“rem”单元，它获取根 (html) 字体大小....IE7 和 8 不支持它，但这有关系吗？**不**，因为您提到了 Mobile，因此 rem 应该没问题。但是您想检查测试不同的移动操作系统/版本？试试这个：

[http://ahedg.es/w/rem.html](http://ahedg.es/w/rem.html)

从外观上看，它确实是旧的移动操作系统和旧的，即不支持它

# c# - 更改默认访问的架构

> ID：15276518
> 
> 赞同：0
> 
> 时间：2013-03-07T16:30:56.037
> 
> 标签：c#, sql-server, schema

我有一个已从另一台服务器传输并具有架构的数据库`careinflg`。但是，我的 C#.net Web 应用程序会查找具有 schema 的对象`dbo`。`careinflg`如果不手动更改我的应用程序中的每个语句，默认情况下是否有指向？

如果可能的话，我宁愿在 C# 层中执行此操作，因为数据库位于开发服务器上，在该服务器上更改用户属性本身是不明智的 - 但如果没有其他方法，我可以这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:45:57.950

在创建、更改和引用对象时，[您应该*始终*指定架构，无论您是使用`dbo`还是任何其他架构](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)。

您可以通过更改该用户的默认架构来更改您的应用程序当前的行为方式：

```
USE your_db;
GO

ALTER USER app_user_name
  WITH DEFAULT_SCHEMA = careinflg; -- this is a terribly unreadable name, btw 
```

但这不是***解决***方法，可能会产生其他不良后果（例如，当您的应用程序创建对象时）。您需要有意识地始终使用由两部分组成的对象名称。

# asp.net-mvc-4 - 如何在解决方案资源管理器中显示 RouteConfig？

> ID：15276524
> 
> 赞同：0
> 
> 时间：2013-03-07T16:31:17.533
> 
> 标签：asp.net-mvc-4, visual-studio-2012

我希望能够`RouteConfig.cs`在解决方案资源管理器中看到。现在我必须进行文本搜索才能将文件拖出深处。

如何显示似乎隐藏在 Global.asax.cs 中的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:54:38.490

它位于名为“App_Start”的文件夹中，该文件夹与文件在文件夹层次结构中处于同一级别`Global.asax`。这是一篇文章，其中包含一个很好的分步示例，用于在解决方案资源管理器中发现文件： [ASP.NET MVC 4：所有 Global.asax 路由都去哪儿了？](http://www.jondavis.net/techblog/post/2012/06/23/ASPNET-MVC-4-Where-Have-All-The-Globalasax-Routes-Gone.aspx)

# javascript - EaselJS MultiRow Spritesheet

> ID：15276525
> 
> 赞同：0
> 
> 时间：2013-03-07T16:31:18.123
> 
> 标签：javascript, html, sprite, sprite-sheet, easeljs

我有一个小问题，我使用的是多行 Spritesheet ，其中每一行都是一系列图像。

但是我不能让精灵表从不同的高度开始（所以它可以向下移动），它们都从顶角开始

```
 var spriteSheetUp = new createjs.SpriteSheet({
    // image to use
    images: [snakeI],
    // width, height & registration point of each sprite
    frames: {width: 96, height: 90, regX: 0, regY: 290},
    animations: {
        move: [0, 3, "move"]
    }
}); 
```

我希望上面开始使用像素 290 的帧。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:29:05.720

好吧，我有多行的 spritesheet，让我们假设它包含 3 行图像，这些图像如下所示：

```
x, x, x, x, // moving animation images
x, x, x, x, // jumping animation images
x, x, x, x, // dying animation images 
```

所有图像插槽的高度和宽度均为 80 像素，它们在 spritesheet 中彼此紧密堆叠，并且它们的中心将位于图像的中间，我使用的实际字符大小是 40 像素（宽度和高度），所以它是`regX: 40`和`regY: 40`spritesheet img 大小将是 320px 宽度和高度。（因为 80px * 4 = 320px 的四个插槽）。

我会像这样访问它们：

```
var localSpriteSheet = new createjs.SpriteSheet({
        images: [imgPlayer],
        frames: {width:80, height:80, regX:40, regY:40},
        animations: {
            moving: [0,3],
            jumping: [4,7],
            dead: [8,11]
        }
}); 
```

我想你在这里看到了模式，例如，起始数字`jumping`是 4，因为瓷砖编号从 0 开始。

因此，上述 tilesheet 的实际插槽如下：

```
0, 1, 2, 3, // moving animation images
4, 5, 6, 7, // jumping animation images
8, 9, 10, 11, // dying animation images 
```

希望这对您有所帮助 - 您只需要观看动画“移动”的 spritesheet 起始位置并使其从该位置开始。

```
// takes 4 images from first line
move: [0, 3] 

// takes 4 images from second line (If spritesheet has 4 images on each line).
jump: [4, 7] 
```

希望这可以帮助！

# node.js - Express.js 中间件集成测试

> ID：15276528
> 
> 赞同：1
> 
> 时间：2013-03-07T16:31:26.193
> 
> 标签：node.js, testing, express, integration

我正在为 express.js 2.5.8 编写一些中间件。目的是使用基于会话的附加属性来修改请求对象。我已经对中间件功能进行了单元测试。现在，我想执行一些较低级别的集成测试，以确认 express 服务器正在使用中间件。

我对此的典型方法是监视中间件功能。但是，这并不是证明中间件按预期工作的最有效方法。

我想做的（如果可能/可行）是加载应用程序，注入任意会话数据（它不需要是有效的），请求/访问发送中间件结果的测试路由。从那里，我可以对这个结果做出断言。

我一直在使用 supertest（superagent）、zombie 和 request for testing，每一种都取得了不同程度的成功。我目前正在努力将会话数据注入请求中，无论它最终采用哪种形式。

我会很感激一些指导。人们在测试此类行为时使用了哪些方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:40:33.137

通过假设快速中间件处理没有被破坏：为什么不尝试编写一个注入中间件，负责注入所需的会话数据并将注入中间件放在要测试的中间件功能之前？

使用这种方法，您无需直接测试客户端代码，而是在您的注入中间件中隔离注入。

# google-analytics - 如何从两个谷歌分析帐户跟踪一个域？

> ID：15276532
> 
> 赞同：0
> 
> 时间：2013-03-07T16:31:34.667
> 
> 标签：google-analytics, analytics

我们得到了一个域，其中包含不同客户的数据。我们想要做的是在一个帐户下有一个单独的 Google Analytics 配置文件来跟踪每个页面的流量数据。换句话说，在谷歌分析代码中我们可以有两个 Account id 吗？因此，两个帐户都可以查看特定页面的跟踪数据。

我想我还没有说清楚。让我再尝试一次..

有一个域 abc.com 有几个页面。例如 abc.com/xvy 属于 userA，abc.com/kju 属于 userB。我们有一个谷歌分析帐户，用于跟踪 abc.com 上的所有内容。我想要做的是拥有另一个个人资料或新的谷歌分析帐户来分别跟踪属于 userA 和 userB 的所有数据。我确实可以选择在属于不同用户的页面上放置不同的跟踪代码。

例如，属于 userA 的页面可以与属于 userB 的页面有不同的跟踪。但同时我也想跟踪一个帐户下的所有页面......

无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:42:22.350

您应该为要单独跟踪的站点的每个区域[设置单独的配置文件。](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1009714)个人资料都属于同一个帐户，因此您只需一次登录即可查看所有数据。

在网站的所有区域保持相同的跟踪代码，但只需[将过滤器](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1034380)应用于不同的配置文件。

按照您的示例，我将设置配置文件 A 和配置文件 B。如果这对您有用，您也可以保留整个站点配置文件来收集所有数据。对于配置文件 A，为 ^/xvy 应用请求 URI 过滤器，对于配置文件 B，为 ^/kju 应用请求 URI 过滤器。我在这里假设站点的不同区域由第一个子目录定义，因此如果站点的结构不同，您可能必须调整这些过滤器建议。

# php - 当我删除表格行时，Jquery 对话框关闭

> ID：15276534
> 
> 赞同：0
> 
> 时间：2013-03-07T16:31:45.127
> 
> 标签：php, jquery, html-table, row

我目前正在尝试从 jQuery 中的对话框中删除表格行，但是每当我尝试删除该行时，对话框会立即关闭。目前 PHP 页面为对话框生成表和行。现在要注意，此代码在没有 PHP 页面调用的情况下工作得非常好，但是通过添加 PHP 方面，对话框无法保持打开并删除表格行。

我不太确定如何解决这个问题，因为我对 jQuery 的经验非常有限，而且我无法在互联网上找到类似问题的东西。欢迎任何指示和建议。最终目标是能够从对话框表单发布到数据库，任何帮助将不胜感激。

代码已被简化，因此不使用 mysql 查询，但最终我希望能够将无序列表的数据传递到 php 页面以构建动态查询并允许用户在此后提交表单。

下面是分成两个文件的代码......

1.  PHP

```
 <script>
   function showTable(str, elementid, page)
   {
   if (str=="")
     {
     document.getElementById(elementid).innerHTML="";
     return;
     } 
   if (window.XMLHttpRequest)
     {// code for IE7+, Firefox, Chrome, Opera, Safari
     xmlhttp=new XMLHttpRequest();
     }
   else
     {// code for IE6, IE5
     xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
     }
   xmlhttp.onreadystatechange=function()
     {
     if (xmlhttp.readyState==4 && xmlhttp.status==200)
       {
       document.getElementById(elementid).innerHTML=xmlhttp.responseText;
       }
     }
   xmlhttp.open("GET",page+"?q="+str,true);
   xmlhttp.send();

   }
   </script>

   <!doctype html>
   <html lang="en">
    <head>
    <meta charset="utf-8" />
    <title>jQuery UI Dialog - Modal form</title>
      <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

    <script type="text/javascript">
          $(function() {
            $( "#dialog" ).dialog({
              autoOpen: false,
              modal: true,
              width: 'auto',
              show: {
                effect: "blind",
                duration: 1000
              },
              hide: {
                effect: "explode",
                duration: 1000
              }
            });

            $('span.delete').on('click', function() {  
                            $(this).closest('tr').find('td').fadeOut(1000, 
                                function(){ 
                                    // alert($(this).text());
                                    $(this).parents('tr:first').remove();                    
                                });    

                            return false;
                        });

            $( "#opener" ).click(function() {
              $( "#dialog" ).dialog( "open" );
            });
          });
          </script>

</head>
<body>
    <input type=button id="opener" value="PRESS BUTTON!" onclick="showTable('NOTHING', 'dialog', '2pass.php')">

    <div id="dialog">

    </div>

</body> 
```

2.  通过.php

```
 <?php           
echo "<form method = 'post'>";
echo "<table border='1' name='testTable'>
<thead>
    <tr>
        <th>Name</th>
        <th>Notes</th>
        <th>Delete</th>
    </tr>
</thead>
";

echo "<tbody>";

      echo "<tr>";
          echo "<td><input type='text' id='Name' value='Name' disabled></td>";
          echo "<td><input type='text' name='notes'></td>";
          echo '<td><span class="delete"><a href="">Delete</a></span></td>';
      echo "</tr>";

      echo "<tr>";
          echo "<td><input type='text' id='Name' value='Name' disabled></td>";
          echo "<td><input type='text' name='notes'></td>";
          echo '<td><span class="delete"><a href="">Delete</a></span></td>';
      echo "</tr>";

      echo "<tr>";
          echo "<td><input type='text' id='Name' value='Name' disabled></td>";
          echo "<td><input type='text' name='notes'></td>";
          echo '<td><span class="delete"><a href="">Delete</a></span></td>';
      echo "</tr>";

echo "</tbody>";
echo "</table>";
echo "</form>";
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:08:00.753

我想到了。首先，您需要删除第一个函数的显示/隐藏组件，然后创建一个按钮，而不是使用超链接引用。然后，您需要使用 id 设置 tr。

```
<tr id="row"> 
```

然后是 javascript 中的一个函数，用于在您单击按钮时删除该行。

```
 $(document.getElementById(row)).remove(); 
```

在那之后，你应该准备好了。

# triggers - dpkg：如何使用触发器？

> ID：15276535
> 
> 赞同：21
> 
> 时间：2013-03-07T16:31:47.987
> 
> 标签：triggers, debian, dpkg, debhelper

我已经编写了一个小型 CDN 服务器，如果新的东西（pool-content-packages）安装到池中，它将重建他的池注册表。

相反，每个 pool-content-package 都调用 cdn-server 的 init.d，我想使用触发器。在安装完所有软件包后，它只会在安装运行结束时重新启动服务器一次。

我该怎么做才能在我的包中使用触发器并支持 debhelper？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-07T16:31:47.987

您正在寻找的是 dpkg-triggers。

使用 debhelper 构建 debian 软件包的一种解决方案是：

**第1步）**

创建文件`debian/<serverPackageName>.triggers`（替换*`<serverPackageName>`*为您的服务器包的名称）。

**步骤 1a)**

定义一个监视池目录的触发器。文件的内容是：

`interest /path/to/my/pool`

**步骤 1b)**

但是您也可以定义一个命名触发器，它必须被显式触发（参见第 3 步）。

文件内容：

`interest cdn-pool-changed`

触发器*cdn-pool-changed*的​​名称是免费的。你可以拿走任何你想要的。

**第2步）**

将触发器的处理程序添加到文件`debian/<serverPackageName>.postinst`（替换*`<serverPackageName>`*为您的服务器包的名称）。

例子：

```
#!/bin/sh

set -e

case "$1" in
    configure)
    ;;

    triggered)
        #here is the handler 
        /etc/init.d/<serverPackageName> restart
    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

#DEBHELPER#

exit 0 
```

替换*`<serverPackageName>`*为您的服务器包的名称。

**第 3 步）**（仅适用于命名触发器，第 1b 步））

在每个内容包中添加文件`debian/<contentPackageName>.triggers`（替换*`<contentPackageName>`*为内容包的名称）。

文件内容：

`activate cdn-pool-changed`

为您在步骤 1 中定义的触发器使用相同的名称。

### 更详细的信息

我能找到的对 dpkg-triggers 的最佳描述是“[如何使用 dpkg 触发器](https://web.archive.org/web/20111022012105/http://www.seanius.net/blog/2009/09/dpkg-triggers-howto/)”。相应的带有示例的 git 存储库，您可以在此处获取：

`git clone git://anonscm.debian.org/users/seanius/dpkg-triggers-example.git`

# python - 将非 ascii 字符编码为 UTF-16

> ID：15276536
> 
> 赞同：0
> 
> 时间：2013-03-07T16:31:48.937
> 
> 标签：python

如何在 UTF-16 中对字符串的非 ascii（ascii > 127）字符（ö、ä、ü 等）进行编码，使“é”变为“\u00e9”，“Ř”变为“\u0158” . 我所做的是将字符转换为十六进制并将前两个字符替换为 \u00 （用于 UTF-16）。但这不起作用……给我垃圾值。请帮助我正确的算法。

这是我写的，但它没有正确转换：

```
f = open ("input.txt","r")
data = f.read()
x=list(data) 
i=0

for element in x:
    if ord(element)>127:
        y=hex(ord(x[i]))
        y=y[2:]
        y='\u00'+y
        x[i]=y
    i=i+1

data=''.join(x)
t= open("output.txt","w")
t.write(data)

f.close()
t.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:36:22.297

以二进制模式打开文件

```
with open(filename,"rb") as f:
     print f.read() 
```

如果这不起作用，请尝试内置的编解码器

```
import codecs

with codecs.open(filename,"rb",encoding="utf8") as f:
     print f.read() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:46:00.900

[`encode`使用字符串](http://docs.python.org/3/library/stdtypes.html#str.encode)的内置方法：

```
# A string with a single, non-ascii character.
s = '\u00e9'

# UTF-16 encoding beginning with a byte-order-mark to identify its endianness.
s.encode('utf-16')      # b'\xff\xfe\xe9\x00'

# UTF-16 big-endian, no byte-order-mark.
s.encode('utf-16-be')   # b'\x00\xe9'

# UTF-16 little-endian, no byte-order-mark.
s.encode('utf-16-le')   # b'\xe9\x00' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:53:33.683

[@TokenMacGuy](https://stackoverflow.com/users/65696/tokenmacguy)已将此答案发布到[您已删除的旧问题](https://stackoverflow.com/questions/15275196/how-to-encode-characters-whoes-ascii-is-more-then-128-into-utf-16)。由于具有足够声誉的用户*仍然可以看到*已删除的问题，因此我将其复制粘贴在这里：

* * *

因此，您正在尝试将非 ascii 代码点“转义”的 unicode 转换为 ascii 表示？如果是这样，如何：

```
>>> sample = u'some stuff: éŘ'
>>> ''.join(c if 0 < ord(c) <= 127 else '\\u{:04x}'.format(ord(c)) for c in sample)
u'some stuff: \\u00e9\\u0158'
>>> print ''.join(c if 0 < ord(c) <= 127 else '\\u{:04x}'.format(ord(c)) for c in sample)
some stuff: \u00e9\u0158 
```

顺便说一句，这个算法*不是*utf-16；请不要这样称呼它；它是ASCII！UTF-16 看起来像这样：

```
>>> sample.encode('utf-16')
'\xff\xfes\x00o\x00m\x00e\x00 \x00s\x00t\x00u\x00f\x00f\x00:\x00 \x00\xe9\x00X\x01' 
```

[注意：你没有指定，所以这个例子是在 python2.7 中，而不是 python3；如果您需要，请将其添加到您的问题中]

* * *

我不确定这是否会帮助你。或者[@TokenMacGuy](https://stackoverflow.com/users/65696/tokenmacguy)本人可能会编辑此答案以使其更有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T18:55:23.770

从问题中不清楚您是想要将字符作为文字字符串`'\u00xx'`还是想要一个包含正确字符的 Unicode 字符串。

要将字符直接转换为 Unicode，您必须确定它们最初是在哪个代码页中创建的，并将其与`decode`. 我在这里猜测代码页 852，因为它是我能找到的第一个包含`Ř`.

```
>>> data = '\x82\xfc'
>>> x = data.decode('cp852')
>>> x
u'\xe9\u0158'
>>> print x
éŘ 
```

如果您想快速将其转换为仅包含 ASCII 且非 ASCII 字符替换为转义序列的字符串，请使用`unicode-escape`编码。

```
>>> y = x.encode('unicode-escape')
>>> y
'\\xe9\\u0158'
>>> print y
\xe9\u0158 
```

[Windows 1250 代码页](http://msdn.microsoft.com/en-us/goglobal/cc305143.aspx)也包含但具有不同的`Ř`值。同样的技术也适用于那里。

```
>>> data2 = '\xe9\xd8'
>>> data2.decode('windows-1250')
u'\xe9\u0158' 
```

# sass - SASS 的新手，带有 --webkit-scrollbar 的 SCSS 会引发语法错误。逃生顺序？

> ID：15276538
> 
> 赞同：3
> 
> 时间：2013-03-07T16:31:56.607
> 
> 标签：sass

希望了解其中之一在 SCSS 中的样子

```
div.navwrapper {
    position:relative;
    --webkit-scrollbar: 6px;
    background-color: transparent;      
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:34:40.957

只需省略`-`前缀上的那个。

```
div.navwrapper {
    -webkit-scrollbar: 6px;      
} 
```

会像魅力一样工作；）

# wcf - 使用 Mtom 编码和 BasicHttpBinding 的 WCF 配置不起作用 - 进行 base64 编码

> ID：15276561
> 
> 赞同：1
> 
> 时间：2013-03-07T16:33:17.007
> 
> 标签：wcf

如果有人能对此有所了解，我将不胜感激：

我想通过 Mtom 将二进制数据上传到服务。

如果我配置端点绑定：

```
<wsHttpBinding>
    <binding name="WsHttpMtomBinding" messageEncoding="Mtom" /> 
```

Mtom 工作 - 我可以在 Fiddler 中看到二进制内容是使用 Mtom 发送的。

如果我配置它：

```
 <basicHttpBinding>
    <binding name="WsHttpMtomBinding" messageEncoding="Mtom" /> 
```

如果我查看 Fiddler 发送的内容，它会被 base64 编码。

我读到如果消息大小小于某个大小，WCF 会进行 base64 编码。我确保二进制内容足够大。我必须使用 basicHttpBinding 因为该服务不在我的控制之下。

为什么要进行 base64 编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T16:50:54.720

发现问题：问题是提供给我的 WSDL。WSDL 中的类型设置为 HexBinary 而不是 Base64Binary。WCF 将仅识别 base64 以使用 MTOM 进行优化。除此之外，如果二进制数据低于 1024 字节，它将不会使用 MTOM。（虽然消息的标题仍会显示它是 MTOM）

摘自 MSDN：“MTOM 的目的是对 SOAP 消息进行编码以优化 base64 编码数据。以下是约束列表： R4151：可以优化包含 base64 编码数据的任何元素信息项。

B4152：WCF 优化包含 base64 编码数据且长度超过 1024 字节的元素信息项。”

希望这可以帮助某人。我花了几个小时才弄清楚这一点。

# php - PHP下载简历支持问题

> ID：15276563
> 
> 赞同：-5
> 
> 时间：2013-03-07T16:33:23.993
> 
> 标签：php, download

当我从服务器下载文件时，它不提供恢复支持。

这是代码：

```
if ($zc['mm'] && $zc['mm_down'] && preg_match('/\.('.$zc['mm_ext'].')$/i', $path, $exts)) {
    $file = $zc['mp3_dir'].'/'.$path;
    if (file_exists($file)) {
        if ($zc['stream_int']) {
            $ext = strtolower($exts[1]);
            zina_set_header('Content-Type: '.$zc['mm_types'][$ext]['mime']);
            $disposition = (isset($zc['mm_types'][$ext]['disposition'])) ? $zc['mm_types'][$ext]['disposition'] : 'attachment';
            zina_set_header('Content-Disposition: '.$disposition.'; filename="'.basename($path).'"');
            zina_set_header('Content-Length: '.filesize($file));
            zina_set_header('Cache-control: public'); #IE seems to need this.
            zina_set_header("Content-Transfer-Encoding: binary\n"); 
            zina_set_header('Content-Type: $contentType');
            zina_send_file($file);
        }
        else {
            zina_goto($path,NULL,NULL,TRUE,TRUE);
        }
    }
} 
```

任何人都可以帮助我如何使此代码恢复支持。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:38:35.547

自己添加简历支持非常复杂 -`Range`您需要检查的标头不仅支持简单范围，还支持复杂范围。

唯一真正简单且干净的解决方案是使用诸如`X-Sendfile`标头之类的东西（Lighttpd 中的本机支持，可用于 Apache 的[模块](https://tn123.org/mod_xsendfile/)），它告诉您的 Web 服务器将某个文件发送给用户。在这种情况下，恢复、并行下载等将正常工作。

# sybase - 我必须将 varchar 数据转换为 Sybase 中的日期时间，如下所示

> ID：15276568
> 
> 赞同：0
> 
> 时间：2013-03-07T16:33:31.193
> 
> 标签：sybase, type-conversion

我在表中有数据列时间戳、消息等。

例子 ：

```
column 1 - timestamp has '3/7/2013 9:30:40 AM'
column 2 - message has '6Q201303077981 ,MAR 07 2013 09:30:00,167,P,NYSE,CD,0000.0500,PARTIAL EXECUTION             
,20130312,000006.35,000000.11,000005.25,0000127.0000,0000623.0000, ,0037.160000,0000000.0000,0000.000000,0037.160000,PEXE' 
```

现在我需要输出为

```
column1 - timestamp as '3/7/2013 9:30:40 AM'
column2 - message as '3/7/2013 9:30:00 AM'
column3 - diff as 40 
```

请帮忙解决这个问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:48:50.700

实际上，您需要使用转换函数将 varchar 转换为 datetime 数据类型。一旦你有了这个，你可以使用日期函数来查看差异。

有关转换的更多详细信息，请参见此处的 sybase 手册：http: //infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.blocks/html/blocks/ [blocks125.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.blocks/html/blocks/blocks125.htm)

有关日期差异功能的更多详细信息，请参见此处的 sybase 手册：http: [//infocenter.sybase.com/help/index.jsp ?topic=/com.sybase.help.ase_15.0.blocks/html/blocks/块137.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.blocks/html/blocks/blocks137.htm)

找到正确的功能后，您可以执行以下操作：

```
 select timestamp, convert(xxxxx), datediff(xxxx) from table 
```

# javascript - jQuery 插件在 Firefox 和 Opera 中不起作用

> ID：15276578
> 
> 赞同：2
> 
> 时间：2013-03-07T16:34:05.507
> 
> 标签：javascript, jquery, html, jquery-plugins, soundcloud

我正在使用自定义`<audio>`播放器的插件，一切都很好。我在 Mac OSX 10.8.2 上的 Safari 浏览器中工作，一旦我决定在其他浏览器中测试项目，事情就变得很奇怪。简而言之，插件应该`<audio>`在页面中找到标签，然后将它们更改为不同的自定义标记。在 safari 中运行良好，但在 firefox 和 opera 中似乎不起作用

Firefox 和 Opera 有以下问题，插件中有一部分，如果音频源的格式不受支持，则会创建不同的（迷你）播放器，这基本上是旧浏览器的后备，但是我看不到 firefox 和 opera显示这个后备播放器，因为它们都是非常现代的浏览器。

插件最初来自：[http](http://tympanus.net/codrops/2012/12/04/responsive-touch-friendly-audio-player/) ://tympanus.net/codrops/2012/12/04/responsive-touch-friendly-audio-player/但是我做了一些改变，例如

```
canPlayType   = function( type )
        {
        var audioElement = document.createElement( 'audio' );
        return !!( audioElement.canPlayType && 
                   audioElement.canPlayType( 'audio/' + type.toLowerCase() + ';' ).replace( /no/, '' ) );
        }; 
```

**原来是**

```
canPlayType   = function( file )
        {
            var audioElement = document.createElement( 'audio' );
            return !!( audioElement.canPlayType &&
                    audioElement.canPlayType( 'audio/' + file.split( '.' ).pop().toLowerCase() + ';' ).replace( /no/, '' ) );
        }; 
```

**还有一个小变化**

```
else if( canPlayType( 'mp3' ) ) isSupport = true; 
```

**原来的在哪里**

```
else if( canPlayType( audioFile ) ) isSupport = true; 
```

这些修改是为了指定 src 中的文件是 mp3，而不是自动检测它（因为我没有使用本地文件，而是 soundcloud api 生成的 url）。我看不出这些更改如何影响浏览器无法使用插件。由于涉及的代码文件很多，因此我没有将它们全部发布在这里，而是创建了一个**保管箱文件夹供您自己在这里查看，您可以在不同的浏览器中尝试 index.html 文件，这样您就可以看到我在说什么问题：** [https://www.dropbox.com/sh/xutioz3hyrybvz3/f0-528WzH0](https://www.dropbox.com/sh/xutioz3hyrybvz3/f0-528WzH0)

* * *

**编辑：**我还在 jsbin [http://jsbin.com/unupov/1/edit](http://jsbin.com/unupov/1/edit)上创建了一个现场演示，这样你就可以看到播放器在不同浏览器中的行为

**编辑 2：**忽略 chrome 的问题，感谢*user20140268*这些问题已得到修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:22:25.410

我将链接更改为 CSS：

```
<link rel="stylesheet" href="css/reset.css">
<link rel="stylesheet" href="css/player.css"> 
```

以及脚本：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="js/player.js"></script> 
```

现在它在[chrome中运行良好](https://www.dropbox.com/s/3mvue5otbm4vbgd/Capture.PNG)

**更新：**
firefox 和 opera 似乎[都不支持 mp3](https://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats) in `<audio/>`.
在这种情况下， player.js 将`<audio/>`标记回退到`<embed/>`.
没有 API 来控制播放，`<embed/>`您可以使用 flash 或`<embed/>`更改 player.js 在`line 70`

```
var thePlayer = !isSupport 
            ? $('<embed src="' + audioFile + '" width="100%" height="25" volume="100" autostart="' + isAutoPlay.toString() +'" loop="' + isLoop.toString() + '" />')
            : $( '<div class="' + params.classPrefix + '">' + $( '<div>' ).append( $this.eq( 0 ).clone() ).html() + '<div class="' + cssClass.playPause + '" title="' + params.strPlay + '"><a href="#">' + params.strPlay + '</a></div></div>' ), 
```

`thePlayer.addClass( cssClass.mini );`并删除`line 171`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:26:52.273

文件类型`mp3`可能有不同的元类型，您可以正确定义以使其工作

```
audio/x-mpeg-3 
```

或者

```
audio/mpeg3 
```

或者

```
audio/mpeg 
```

尝试其中之一

```
audioElement.canPlayType('audio/' + type.toLowerCase() + ';' ) 
```

我认为这可能有效，因为 Firefox 和 opera 使用严格的 JS 和数据类型，而且它们不支持某些格式！

尝试并回复是否有效:)

# ruby - Homebrew、Jekyll、RVM 和 usr/local

> ID：15276584
> 
> 赞同：2
> 
> 时间：2013-03-07T16:34:13.453
> 
> 标签：ruby, rvm, homebrew, jekyll

我想建立一个 Jekyll 博客，但一直遇到同样的问题。

我已经安装了 Homebrew（用于使用 Git）以及 RVM 需要的依赖项。目前，输出`brew doctor`表明一切都应该准备就绪，例如`Raring to brew`. 当我尝试安装 RVM 本身时，问题就开始了。

我已经按照 RVM 站点上的单用户说明进行操作，但是当我尝试安装 ruby​​ 1.9.3 而不是 2（或 2.0.2，就此而言）时，系统会阻塞。我也安装了 Ruby 依赖项并且可以获取`rvm is a function`，但它仍然无法正常工作。

我应该提到我已经根据安装说明采购了 RVM，但想知道我添加到 .bash_profile 的行是否会出错，因为源代码行不在它应该在的位置，例如，

.bash_profile

`export PATH="/usr/local/bin:/usr/local/sbin:~/bin:$PATH"`

这是文件中唯一的一行，它的存在只是为了确保我得到的是 Homebrew 的 Git 版本，而不是系统的。rvm源是否需要放在最后？我很困惑。

同时，由于上述几行，Jekyll 拒绝生成到其目标文件夹，并且我看到与 jekyll 与自身一起安装的 gem 相关的错误。gem 是否支持 2.0.0 还是我们仍应使用 1.9.3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:15:58.513

仅供参考，带有标签示例的 GitHub 线程在[此处](https://github.com/mojombo/jekyll/issues/844)。

# security - 贝宝购物车上传按钮安全吗？

> ID：15276592
> 
> 赞同：0
> 
> 时间：2013-03-07T16:34:27.823
> 
> 标签：security, upload, paypal, shopping-cart

如果我使用 PayPal 按钮管理器创建按钮，它是否会因为托管而自动安全？即使我用来上传购物车？

这是我在网站上使用它的方式：

```
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="hosted_button_id" value="JRECLRTYAJDKY"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:00:30.053

如果您正在创建托管按钮，它将是安全的，并且可以防止有人修改代码并将金额设置为较低的金额等。您将无法创建购物车上传按钮。您将只能创建以下类型的按钮之一。

BUYNOW - 立即购买按钮

购物车 - 添加到购物车按钮

GIFTCERTIFICATE - 礼券按钮

订阅 - 订阅按钮

捐赠 - 捐赠按钮

取消订阅 - 取消订阅按钮

VIEWCART - 查看购物车按钮

PAYMENTPLAN - 分期付款计划按钮；从 63.0 版开始

AUTOBILLING - 自动计费按钮；从 63.0 版开始

付款 - 立即付款按钮；从 65.1 版开始

# javascript - 我需要获取登录邮件的电子邮件地址吗？

> ID：15276595
> 
> 赞同：0
> 
> 时间：2013-03-07T16:34:32.527
> 
> 标签：javascript, google-chrome, session, google-chrome-extension, gmail

我有 JavaScript 脚本，当我登录 gmail 时将其注入浏览器。如何获取当前用户的电子邮件地址？你怎么看？然后我应该从另一台服务器打开小狗页面，她应该知道那个电子邮件地址。我不能从会话或类似的东西中得到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:22:26.000

你有几个选择：

1.  在新窗口中使用 OpenId 流并让用户授予您访问他们的电子邮件的权限（这是正确的方法）。

2.  使用 JavaScript DOM 操作（尽管有一些奇怪的东西，例如委托帐户访问或多登录）。

寻找一个跨度，如下所示：

```
<span id="gbi4t" style="max-width: 478px; text-align: left;">john@gail.com</span> 
```

# c - PBC 库中的元素 mul

> ID：15276603
> 
> 赞同：1
> 
> 时间：2013-03-07T15:24:27.920
> 
> 标签：c

我有这段代码，它使用 PBC 库：

```
element_t pk, pk_temp;

element_init_G2(pk, pairing);
element_init_G2(pk_temp, pairing);
element_init_Zr(ci, pairing);

element_pow_zn(pk_temp, pk_temp, ci);
element_set1(pk);
element_add(pk, pk, pk);

element_mul_zn(pk, pk, pk_temp); 
```

当我运行这个程序时（ci 具有早期计算的值），这是我得到的输出：

```
pk_temp
[116278406325033872100813200201193617766578695181932793603160637278854742066192092884782310233584512588249536578523628847229234460071209045611450183651531, 2021454548422679707182594138446448992982063147118097540714810473185383559710078393323207940613550542761869670939719707936590719813436809712827363459486303]
ci
557018308384393102708847545615423648196401851115

After pk_temp^ci
pk_temp
[108256843552655255908398113161102639677286937761571877242159361199581616450078081163742350174144405610156719380747507503987165257266343606269839543701390, 315460454942637140235438889718432767280220200962474346118962958364243678526968323118117335000004382683381426774251553048778733132443252812268528626451784]

After pk = pk + pk
pk
0

After pk = pk * pk_temp
pk
O 
```

**更新** 如果 pk 被初始化为 Zr 中的元素，则添加有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:36:31.003

```
element_mul_zn(pk, pk, pk_temp); 
```

但实际上，您的 pk_temp 是 G2 而不是 Zn。

请参阅 include/pbc_field.h 中的定义

```
static inline void element_mul_zn(element_t c, element_t a, element_t z) {
  mpz_t z0; 
  PBC_ASSERT_MATCH2(c, a); 
  //TODO: check z->field is Zn
  mpz_init(z0);
  element_to_mpz(z0, z); 
  element_mul_mpz(c, a, z0);
  mpz_clear(z0);
} 
```

该代码不检查是否`z->field`是`Zn`并且只会转换`G2`为`mpz`. `G2`如果您想转换为没有意义`mpz`，`element_to_mpz`只会给您 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:48:42.770

我不确定您使用哪种配对，所以我想您使用 A 型配对。功能

```
element_set1(pk); 
```

将 pk 设置为*O*，即无穷远点，因为 pk 是 G2 的一个元素。所以结果应该是这样的

```
element_set1(pk);
pk = O

After pk=pk+pk
pk = O

After pk = pk * pk_temp
pk
O 
```

pk*pk_temp 的结果是*O*，因为对于所有标量数 c， *O* = c * *O*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:37:10.427

我们这里一般不接受代码审查问题；也许stackexchange（不是加密）会更好。

另一方面，我确实注意到您这样做：

```
element_set1(pk); 
```

这会将 pk 设置为 1 吗？如果是这样，为什么在将 pk 添加到自身后将 pk 设置为 2 会令人惊讶？

# tfs - TFS 2010 构建服务器：混合增量构建和干净构建

> ID：15276605
> 
> 赞同：0
> 
> 时间：2013-03-07T16:34:53.787
> 
> 标签：tfs, continuous-integration, tfsbuild

到目前为止，我已将“清洁工作区”选项设置为“全部”来设置我的构建。这是一个“滚动构建”，因为 TFS 服务器和构建服务器对于“连续构建”来说不够快（或者我们有太多签入）。

由于获取源代码总是需要几分钟，我现在想更改为“清洁工作区”模式“输出”或“无”。

尽管如此，我还是担心随着时间的推移，我可能会在不删除时与我检查的内容不一致，所以我想每隔一段时间进行一次自动清理构建。就像每 10 次构建，或者每晚.. 但具有相同的构建定义（和/或在构建机器的同一文件夹中）。（我在机器上只使用了 1 个构建代理。）

（无论如何，我计划通过测试等进行扩展的夜间构建，并且可以在那里进行干净的构建并将该反馈再次用于我的其他构建..但我希望该过程尽可能自动化。）

如何在速度和可靠性之间取得良好的结合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:27:00.747

我一直更喜欢干净的构建。它确实可以防止发生某种类型的错误。我可以理解您对速度的需求，在这种情况下，您计划在夜间更复杂的构建上运行完全清洁将是一个很好的安全措施。它可能不会立即捕获错误，但它会在一天结束时捕获它，从而使您必须评估问题的签入次数更加合理。

不过，我真的要问一下，如果您有这么多签入并且需要这么多构建时间，您如何仍然在一台机器上只有一个代理。我对这个问题的首选解决方案是添加构建代理并仍然进行完全干净的构建。

# image - nodejs：图片上传存储在哪里？

> ID：15276607
> 
> 赞同：0
> 
> 时间：2013-03-07T16:34:57.603
> 
> 标签：image, node.js, upload

我为nodejs图像上传做了一个教程。

问题：nodejs把上传的图片存放在哪里？

我在本地工作 mit localhost:8888 （我是 nodejs 和编程的新手）

```
requestHandler.upload = function( response, request ) {
console.log( "Request for 'upload' is called." );

var form    = new formidable.IncomingForm();

console.log( "Preparing upload" );

form.parse( request, function( error, fields, files ){
    console.log( "Completed Parsing" );

    if( error ){
        response.writeHead( 500, { "Content-Type" : "text/plain" } );
        response.end( "CRAP! " + error + "\n" );
        return;
    }
console.log("the path is: " +files.upload.path);

    fs.renameSync( files.upload.path, "/tmp/" + files.upload.name );

    response.writeHead( 200, { "Content-Type" : "text/html" } );
    response.write( "received image <br />" );
    response.end( "<img src='/show?i=" + files.upload.name + "' />" );

   });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:58:54.670

好吧，Node.js（平台）不会将文件存储在任何地方。请求的主体只是作为`Buffer`s接收[`'data'`](http://nodejs.org/api/http.html#http_event_data)。

[`formidable`](https://npmjs.org/package/formidable)确实如此。它扫描并为您`parse`发送请求`'data'`并将任何`multipart`“*文件*”保存在[`form.uploadDir`](https://github.com/felixge/node-formidable#api)：

> ```
> form.uploadDir = process.env.TMP || process.env.TMPDIR || process.env.TEMP || '/tmp' || process.cwd(); 
> ```
> 
> 用于放置文件上传的目录。您可以稍后使用`fs.rename()`. 根据上面列出的第一个现有目录，在模块加载时选择默认目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:01:44.097

它存储在我的 Windows 系统的临时文件中。

# javascript - Bootstrap 手风琴抑制打开

> ID：15276610
> 
> 赞同：0
> 
> 时间：2013-03-07T16:35:05.930
> 
> 标签：javascript, jquery, twitter-bootstrap

我有这个 jQuery，它显然不起作用：

```
$('input.descriptionLC').click(function(){
    $('.collapse').collapse('hide')
}); 
```

我的 html 是由这个 for 循环/附加生成的：

```
for (i=0; i < nodeArr.length; i++){
  $('#accordion2').append('<div class="accordion-group">' +
  '<div class="accordion-heading">' +
    '<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse' + i + '">' +  
        '<hr class="inLC">' +
        '<div class="divLC">' +
            '<p class="titleLC">' + nodeArr[i][0] + '</p>' +
            '<p class="imgWrap"><img class="imgLC" src="img/On_slider.png"></p>' +
            '<input type="text" class="descriptionLC" id="description' + i + '">' +
        '</div>' +    
    '</a>' +
  '</div>' +
  '<div id="collapse' + i + '" class="accordion-body collapse">' +
    '<div class="accordion-inner">' +
      'Anim pariatur cliche...' +
    '</div>' +
  '</div>' +
  '</div>'
  );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:38:41.580

**jQuery**

```
$('body').on('click', 'input.descriptionLC', function(e){
    $('.collapse').collapse('hide');
}); 
```

请参阅[文档上的 jQuery](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:37:00.270

当 DOM 发生变化时，您想使用 .on 而不是 .click。

看到[这个答案](https://stackoverflow.com/questions/14659204/jquery-and-angularjs-bind-events-to-changing-dom)。.on 将（并且应该）用于监视更改区域的父级的更改；一旦执行了更改，它将自动将所有事件重新绑定到选定的子元素（使用过滤器）。在那个答案中，我更详细地描述了如何使用它。

简而言之，虽然这是低效的（您应该将 body 更改为仅包含 DOM 更改部分的某个 div）：

```
$('body').on("click", 'input.descriptionLC', function(e){
      $('.collapse').collapse('hide')
}); 
```

**如果您只想要以下手风琴项目**：

```
$('body').on("click", 'input.descriptionLC', function(e){
      $(this).next('.collapse').collapse('hide')
}); 
```

# multithreading - Java中应用程序数据的可重置线程安全计数器

> ID：15276611
> 
> 赞同：1
> 
> 时间：2013-03-07T16:35:10.927
> 
> 标签：multithreading, spring, web-applications, thread-safety, counter

简单要求： - 每天、每小时或每分钟重置为 0 的命名计数器。下一个超出限制的递增请求将重置而不是递增。无需定时器/闹钟时间重置。- API 应该简单 - 线程安全

示例用法。保留用于记录或检查限制的特定应用程序/业务事件的计数器。检查特定资源的使用是否超过其每日限制并停止访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:35:10.927

**更新**：最新版本发布在 GitHub 上，供有兴趣的人使用 - [https://github.com/mickyr/Awesome-Counter](https://github.com/mickyr/Awesome-Counter)

到目前为止我的最小实现。如果您发现任何问题/改进领域，请提出批评。欢迎反馈，消极或积极。这将是一个学习机会：

**可复位计数器类：**

```
import java.util.concurrent.atomic.AtomicInteger;

public class ResettableCounter {
    private String policyString;
    private AtomicInteger count;

    public ResettableCounter(String name, AtomicInteger counter) {
        this.policyString = name;
        this.count = counter;
    }

    public String getPolicyString() {
        return policyString;
    }

    public void setPolicyString(String policyString) {
        this.policyString = policyString;
    }

    public AtomicInteger getCount() {
        return count;
    }

} 
```

**反策略枚举**

```
public enum CounterPolicy{
    YEARLY("yyyy"),
    MONTHLY("yyyy/MM"),
    DAILY("yyyy/MM/dd"),
    HOURLY("yyyy/MM/dd hh"),
    PERMINUTE("yyyy/MM/dd hh:mm");

    private String format;

    private CounterPolicy(String format) {
        this.format = format;
    }

    public String getFormat(){
        return this.format;
    }
} 
```

**ResettableCounter 注册表类：**

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.TimeZone;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.atomic.AtomicInteger;

import CounterPolicy;
import ResettableCounter;

public class ResetableCounterRegistry {
    private ConcurrentHashMap<String, ResettableCounter> counterRegistry = new ConcurrentHashMap<String, ResettableCounter>();
    private CounterPolicy policy = CounterPolicy.DAILY;

    public int incrementCount(String counterName){
        ResettableCounter counter = counterRegistry.get(counterName);       
        DateFormat dateFormat = new SimpleDateFormat(policy.getFormat());
        Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
        if(counter==null)counterRegistry.putIfAbsent(counterName, new ResettableCounter(dateFormat.format(cal.getTime()), new AtomicInteger()));
        counter=counterRegistry.get(counterName);
        if(!dateFormat.format(cal.getTime()).equals(counter.getPolicyString())){
            int count = counter.getCount().get();
            if(counter.getCount().compareAndSet(count, 0))
                counter.setPolicyString(dateFormat.format(cal.getTime()));
            else counter.getCount().incrementAndGet();
        }
        else counter.getCount().incrementAndGet();
        return counter.getCount().get();
    }

    public void setPolicy(CounterPolicy policy) {
        this.policy = policy;
    }   
} 
```

正如我所说，这是最小的实现，但希望可以唤起良好的对话或帮助有类似用例的人。

# jquery - 可拖动/可放置、可排序或组合？

> ID：15276612
> 
> 赞同：0
> 
> 时间：2013-03-07T16:35:11.753
> 
> 标签：jquery, draggable, jquery-ui-sortable, droppable

几天来，我一直在为这个任务大惊小怪。我无法弄清楚如何让一切都点击。我可以让它完美地工作。要么拖放是完美的，要么是排序。但我无法完成所有工作的拖放和排序。

这是[可拖动/可放置](http://www.tyreeonline.com/dragDropTest/draggables.php)的示例。

这个工作完美。正是我想要的方式，除了我无法对底部的#imgQueue 进行排序。我不希望能够在顶部对 #imgBrowser 进行排序。我可以在浏览器和队列之间来回拖动，图像克隆到队列并在浏览器中淡出。效果很好。

这就是我正在为[sortables](http://www.tyreeonline.com/dragDropTest/sortables.php)所做的工作。

我正在尝试完成第一个和第二个示例的组合。从示例 1 拖放并从示例 2 进行排序（尽管仅在队列中）。有人建议我尝试仅使用可排序的对象来完成所有操作。但是，我开始怀疑这是可能的。

此外，imgQueue 中的可排序对象非常不稳定。很难把它们送到你想要的地方。我在想也许图像的缩小与它有关。好像，也许，可排序的仍然认为图像是 150x150 而不是 40x40？

谁能帮我这个？

谢谢！马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:57:58.103

我查看了您的示例，发现了一个奇怪的行为。在第二个示例中，拖动的项目没有被克隆，即使它应该克隆。

我没有进一步调查，因为我建议您使用[http://johnny.github.com/jquery-sortable/](http://johnny.github.com/jquery-sortable/)

我认为您应该能够通过混合前两个示例来实现您想要的。

# glassfish - 向 glassfish 添加密钥库

> ID：15276613
> 
> 赞同：0
> 
> 时间：2013-03-07T16:35:12.737
> 
> 标签：glassfish, keystore

我正在尝试在 glassfish 中添加另一个密钥库，但是我在选项菜单中找不到添加密钥库的方法。我想用相关密码和别名指定我的 KS，我在 Network config-> Protocols 下找不到（在将 SSL 配置添加到新协议时，它不允许我指定 PW 和别名） .

我应该将我的 KS 与现有的 keystore.jks 合并吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:22:36.023

GlassFish 仅支持使用一个密钥库文件进行系统配置。正如您所说，最好将密钥库条目合并到一个文件中，然后导航到 Network config->Protocols，SSL 部分并将 cert-nickname 设置为您要使用的证书的别名。

# javascript - 如何使用 $filter 过滤 oData 中的多个字段？

> ID：15276617
> 
> 赞同：7
> 
> 时间：2013-03-07T16:35:17.203
> 
> 标签：javascript, dynamics-crm-2011, odata

对来自 JavaScript 的多个字段/值对应用*$filter*命令时，过滤多个字段的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T18:57:05.820

这是非常规范的。

```
http://192.168.75.8:5555/Konrad01/
  xrmservices/2011/OrganizationData.svc/
  LeadSet%28%29?$filter=
    Field1%20eq%20%27Value1%27%20and%20Field2%20eq%20%27Value2%27 
```

编辑：

更易读的版本。

```
http://Server:Port/Organization/XrmServices/2011/OrganizationData.svc/
  LeadSet()?$filter=Field1 eq 'Value1' and Field2 eq 'Value2' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T16:50:47.093

`and`中间放一个

例子：

`http://YourServer.com/YourOrg/xrmservices/2011/OrganizationData.svc/ContactSet()?$filter=FirstName eq 'George' and LastName eq 'Washington'`

# soap - 如何在soap spring-ws中发送多部分消息？

> ID：15276618
> 
> 赞同：3
> 
> 时间：2013-03-07T16:35:18.707
> 
> 标签：soap, spring-ws

我想使用 spring 框架和 spring-ws 来发送/接收 SOAP 消息。但是，我看不到如何发送包含多个部分的消息。

```
<message name="getInput">
    <part name="authenticationKey" type="FPDS:userAuthenticationKeyType"/>
    <part name="awardID" type="FPDS:awardIDType"/>
</message> 
```

[http://www.fpds-ng.com/wiki/index.php/FPDS-NG](http://www.fpds-ng.com/wiki/index.php/FPDS-NG)

但是我在 api 中看不到这样做的方法，除了自己构建整个多部分消息，而对于我想传递的部分，我有 JAXB 对象。谢谢，汉克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-15T19:30:08.087

我能够通过使用 CXF（使用 wsdl2java）而不是 spring-ws 的默认 JAXB 行为来使其工作。CXF 似乎支持多部分消息，并且 CXF 可以与 Spring WS（以及 Boot）一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:36:49.363

我也有同样的问题。我没有找到一种使用 spring-ws 来使用这种 Web 服务的方法，但我确实找到了[WS-I Basic Profile 规范](http://www.ws-i.org/Profiles/BasicProfile-1.1-2006-04-10.html#Bindings_and_Parts)中相关段落的链接，该链接说主体中最多可以有一个部分。因此，我计划使用这些信息来尝试说服创建服务的人将服务更改为仅在主体中包含一个部分，以符合 WS-I Basic Profile 规范，从而提高互操作性。

可能有助于说服服务开发人员进行更改的另一点是，由于 WSDL 中有多个部分，尝试在 SOAPUI 中验证他们的任何示例请求消息实际上会产生错误：“第 -1 行：DocLiteral 消息必须包含 1 个正文零件定义"

请记住，尽管 WS-I Basic Profile 规范比 WSDL 模式更严格，所以虽然此服务可能违反 WS-I Basic Profile 规范，但它可能仍会根据 WSDL 模式进行验证。然而，遵守 WS-I Basic Profile 规范很重要，因为[根据 Wikepedia 的说法](http://en.wikipedia.org/wiki/WS-I_Basic_Profile)，许多常见的 WS 工具和框架将只支持属于 WS-I Basic Profile 规范的服务。

# javascript - 使用 JavaScript 将句子输入网页

> ID：15276619
> 
> 赞同：0
> 
> 时间：2013-03-07T16:35:20.387
> 
> 标签：javascript

我已经制作了一个表格，当你按下 go 时，你在文本框中输入的内容会出现在屏幕上，只是它不起作用，这里是 JavaScript 代码： var sentence1; 变种句子2；var 中间句；

```
function paraFunction(setence1, middlesentence, setence2)
{
sentence1 = "You plan is to ";
sentence2 = " and you must succeed at all costs";
middlesentence = form.strPara.value;
paraShow();
}

function paraShow()
{
document.getElementById('paraAns').innerHTML = (sentence1 + middlesentence + sentence2);
} 
```

这是HTML代码：

```
<div id="innerbody">
</div>
<h1>Testing Parameters</h1>
<p>In this example, I will be testing parameters, below you will see a form, asking you to enter a sentence, little do you know, that when you click on the form button, a sentence will be completed below, with your sentence in the middle... oops!</p>
<form type="paraForm" method="get">
<input type="text" placeholder="Input your sentence here" id="strPara"/>
<input type="button" value="Go!" name="paraFunction" onClick="paraFunction(this.form);"/>
</form>
<p id="paraAns"></p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:37:11.047

您需要将这些句子变量传递给`paraShow`

```
function paraFunction(setence1, middlesentence, setence2) {
    sentence1 = "You plan is to ";
    sentence2 = " and you must succeed at all costs";
    middlesentence = form.strPara.value;
    paraShow(sentence1, middlesentence, sentence2);
}

function paraShow(sentence1, middlesentence, sentence2) {
    document.getElementById('paraAns').innerHTML = (sentence1 + middlesentence + sentence2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:55:48.247

这段代码有很多问题。首先，您的 paraFunction 声明和您的调用具有不同的参数。其次，您将按钮命名为 paraFunction（这可能不是重大更改，只是令人困惑）。第三，您尝试使用 form.strPara 访问 strPara，因为您没有名为 form 的表单，所以这不起作用。一旦清除了这些，代码就可以正常工作：

```
function paraFunction() {
    sentence1 = "You plan is to ";
    sentence2 = " and you must succeed at all costs";
    middlesentence = document.getElementById('strPara').value;
    paraShow();
}

function paraShow() {
    document.getElementById('paraAns').innerHTML = (sentence1 + middlesentence + sentence2);
} 
```

和 HTML：

```
<div id="innerbody">
</div>
<h1>
    Testing Parameters</h1>
<p>
    In this example, I will be testing parameters, below you will see a form, asking
    you to enter a sentence, little do you know, that when you click on the form button,
    a sentence will be completed below, with your sentence in the middle... oops!</p>
<form type="paraForm" method="get">
<input type="text" placeholder="Input your sentence here" id="strPara" />
<input type="button" value="Go!" name="paraFun" onclick="paraFunction();" />
</form>
<p id="paraAns">
</p>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T17:00:26.033

问题在于范围和函数调用的方式。看评论

```
function paraFunction(setence1, middlesentence, setence2)
{
    /* The function is called as 'paraFunction(this.form)' */
    /* At this time the value of the three arguments will be */
    /* setence1 = this.form */
    /* middlesentence = setence2 = undefined */

    /* This will create a variable 'sentence1' in global scope */
    /* name of the local variable is setence1 and not sentence1 */
    sentence1 = "You plan is to ";

    /* This will create a variable 'sentence2' in global scope */ 
    sentence2 = " and you must succeed at all costs"; 

    /* variable middlesentence is in local scope. won't be accessible outside */
     /* form is not defined in this scope, it should have been setence1 */
     middlesentence = form.strPara.value; 
     paraShow();
}

function paraShow()
{
 /*sentence1 and sentence2 will be accessible to this function but not middlesentence */        
 document.getElementById('paraAns').innerHTML = (sentence1 + middlesentence + sentence2);
} 
```

有多种方法可以解决您的问题

更改 paraFunction 中第二个参数的名称。（说中间句）。虽然这是一个糟糕的解决方案，因为应该尽量减少全局变量的使用（在窗口范围内，如果是浏览器）。此外，在您不使用的函数中传递参数也是没有意义的。

```
function paraFunction(setence1, middlesetence, setence2)
{
    sentence1 = "You plan is to ";
    sentence2 = " and you must succeed at all costs";
    middlesentence = setence1.strPara.value;
    paraShow();
 }

 function paraShow()
 {
     document.getElementById('paraAns').innerHTML = (sentence1 + middlesentence + sentence2);
 } 
```

修改这两个函数以接受正确的参数并像这样使用局部变量。

```
function paraFunction(form)
{
    var sentence1 = "You plan is to ";
    var sentence2 = " and you must succeed at all costs";
    var middlesentence = form.strPara.value;
    paraShow(sentence1,middlesentence,sentence2);
 }

 function paraShow(sentence1,middlesentence,sentence2)
 {
     document.getElementById('paraAns').innerHTML = (sentence1 + middlesentence + sentence2);
 } 
```

您还需要更改按钮的名称。

# objective-c - 包含十六进制的 NSString 转换为等效的 ascii

> ID：15276620
> 
> 赞同：4
> 
> 时间：2013-03-07T16:35:20.697
> 
> 标签：objective-c, nsstring, hex, nsdata, nsfilehandle

我有一个具有十六进制信息的 NSString，例如

```
<00000020 66747970 4d344120 00000000 4d344120 6d703432 69736f6d 00000000 00031203 
```

来自 NSData。我需要做的是将十六进制数据的 NSString 转换为 Ascii，即：

```
[0][0][0] ftypM4A [0][0][0][0]M4A mp42isom[0][0][0][0][0][3][18][3] 
```

您可能会说这是一个 M4A 文件。我使用 NSFileHandle 将文件的第一部分加载到 NSData。然后我将它存储到 NSString 中：

```
NSData *data = [filehandle readDataOfLength:1000];
NSString *str = [[NSString alloc]initWithString:[NSString stringWithFormat:@"%@",data]]; 
```

任何人都知道如何直接转换 NSData 或将 NSString 转换为 ascii？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T16:53:12.283

你应该做这样的事情：

```
NSData *_data = // ... whatever
NSMutableString *_string = [NSMutableString stringWithString:@""];
for (int i = 0; i < _data.length; i++) {
    unsigned char _byte;
    [_data getBytes:&_byte range:NSMakeRange(i, 1)];
    if (_byte >= 32 && _byte < 127) {
        [_string appendFormat:@"%c", _byte];
    } else {
        [_string appendFormat:@"[%d]", _byte];
    }
}
NSLog(@"%@", _string); 
```

# java - 在 Java 中将整个 JDialog UI 转换为 PDF 文件

> ID：15276624
> 
> 赞同：0
> 
> 时间：2013-03-07T16:35:33.173
> 
> 标签：java, swing, jframe, itext, jdialog

我想将 Enite Jframe UI 转换为 PDF 文件。我在这里得到了一份代码表格。但它抛出异常说

```
Error in Print Module The document has no pages.
ExceptionConverter: java.io.IOException: The document has no pages.
        at com.itextpdf.text.pdf.PdfPages.writePageTree(PdfPages.java:113)
        at com.itextpdf.text.pdf.PdfWriter.close(PdfWriter.java:1221)
        at com.itextpdf.text.pdf.PdfDocument.close(PdfDocument.java:810)
        at com.itextpdf.text.Document.close(Document.java:416) 
```

我的代码用于打印 JFrame

```
public static void PrintFrameToPDF(JDialog bill)
    {
    try {

            Document d = new Document();
            PdfWriter writer = PdfWriter.getInstance(d, new FileOutputStream ("sample.pdf"));
            d.open ();

            PdfContentByte cb = writer.getDirectContent( );
            PdfTemplate template = cb.createTemplate(bill.getWidth(),bill.getHeight());
            Graphics2D g2d = template.createGraphics(bill.getWidth(),bill.getHeight());
            bill.print(g2d);
            bill.addNotify();
            bill.validate();

            d.close ();
        }
        catch(Exception e)  {
          System.out.println("Error in Print Module " + e.getMessage());
          e.printStackTrace();
        } 
```

调用 PDF 的用法 `PrintModule.PrintFrameToPDF(this);`// 当前 JFrame 表单中存在此行

# android - Scala - 可变 HashMap -> 写入文件/从文件读取 -> HashMap null

> ID：15276626
> 
> 赞同：2
> 
> 时间：2013-03-07T16:35:35.923
> 
> 标签：android, scala, serialization, hashmap, deserialization

我在 Android 设备上运行了这个 Scala 代码：

```
// create Map
val myMap1 = new HashMap[Int, String]()
myMap1.put(1, "a")

// write it to file
val outStream = context.openFileOutput("test.txt", Context.MODE_PRIVATE)
val ostream = new ObjectOutputStream(outStream)
ostream.writeObject(myMap1)
ostream.close

// read from file
val inStream = context.openFileInput("test.txt")
val istream = new ObjectInputStream(inStream)
val myMap2 = (istream.readObject).asInstanceOf[HashMap[Int, String]]
istream.close

// java.lang.NullPointerException accessing myMap2
if (myMap2.contains(1)) { println("yes") } else { println("no") } 
```

我创建一个 mutable.HashMap 并将其写入文件，读取它，然后 HashMap 为空。为什么是`myMap2`null 并且没有任何内容？下面是调试会话的屏幕截图。

![Eclipse IDE 的屏幕截图 - 调试会话](../Images/10056ef0246aaa26af81d823ae6adfdb.png)

完整的堆栈跟踪：

```
java.lang.NullPointerException
  at scala.collection.mutable.HashTable$class.index(HashTable.scala:353)
  at scala.collection.mutable.HashMap.index(HashMap.scala:39)
  at scala.collection.mutable.HashTable$class.findEntry(HashTable.scala:130)
  at scala.collection.mutable.HashMap.findEntry(HashMap.scala:39)
  at scala.collection.mutable.HashMap.contains(HashMap.scala:60)
  at com.test.mytest.bean.MyItem$.read(MyItem.scala:74)
  at com.test.mytest.bean.MyItem$.add(MyItem.scala:93)
  at com.test.mytest.frag.MyFragment.onClick(MyFragment.scala:114)
  at android.view.View.performClick(View.java:4084)
  at android.view.View$PerformClick.run(View.java:16966)
  at android.os.Handler.handleCallback(Handler.java:615)
  at android.os.Handler.dispatchMessage(Handler.java:92)
  at android.os.Looper.loop(Looper.java:137)
  at android.app.ActivityThread.main(ActivityThread.java:4745)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:511)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T17:25:03.847

原因是它`HashTable`包含一个`table`声明为“瞬态”的受保护字段：

```
@transient protected var table: Array[HashEntry[A, Entry]] 
```

所以它永远不会写入文件，并且在反序列化时保持其默认`null`值。

但是，`HashMap`定义`readObject`并明确`writeObject`处理序列化（我没有花时间深入研究整个代码，但最肯定的是这应该处理`table`字段的读/写等），所以它似乎无论如何*都应该工作。*

现在，让我在这里做一个有根据的猜测：你在 Android 上，所以很肯定你正在使用像 proguard 这样的工具来删除所有不需要的代码（并通过重命名来缩小你确实需要的代码）。那么问题是`readObject`and`writeObject`是私有的，因此根据您的 proguard 配置，proguard 可能会假定这些方法永远不会被访问，从而完全删除它们。因此，在运行时，只使用标准序列化，并且应该处理的自定义序列化`table`永远不会发生。

您应该做的是修改您的 proguard 配置以保留`readObject`和`writeObject`方法。标准的 proguard 文档甚至在这里有一个示例（搜索“readObject”）： http: [//proguard.sourceforge.net/index.html#manual/examples.html](http://proguard.sourceforge.net/index.html#manual/examples.html)

# c++ - 将数据从工作线程发送到 Qt 中的 gui 线程

> ID：15276628
> 
> 赞同：4
> 
> 时间：2013-03-07T16:35:44.683
> 
> 标签：c++, multithreading, qt

如何将`unsigned char buf[10]`数组从工作函数发送到 gui 线程（主线程）。

我试图创建一个信号/插槽机制，其中插槽在函数的参数中有 buf 以在 gui 线程中处理它。

更新：

这就是我到目前为止所拥有的：

工人阶级：

```
class Worker : public QObject
{
    Q_OBJECT

public:
    Worker(FILE *datafile, int sockint, int bitsint);
    ~Worker();

    int channels_buf[10];
    FILE *data;
    int sock;
    int bits;

public slots:
    void doWork();

signals:
    void finished();
    void newinfo(unsigned char buf[10]);

private:
}; 
```

工人建造者

```
// Worker thread
Worker::Worker(FILE *datafile, int sockint, int bitsint)
    :data(datafile)
    ,sock(sockint)
    ,bits(bitsint)
{

}

Worker::~Worker()
{

} 
```

线程的功能

```
// Worker functions
void Worker::doWork()
{
    unsigned char buf[10];
    unsigned char crcval;

    memset (buf, 0, 10);

    while(1)
    {
        int i;
        int numb;
        numb  = 0;

        numb = recv (sock, buf, 10, MSG_WAITALL);

        crcval = BP_CRC8 (buf, 9);

        // 8 bits
        if (bits == 0)
        {
            if (crcval == buf[9])
            {
                emit newinfo(buf);
            }
        }
    }

    emit finished();
} 
```

然后我开始线程

```
Worker *worker;
QThread *workerThread;
worker = new Worker(data, sock, bits);
workerThread = new QThread(this);
connect(workerThread, SIGNAL(started()), worker, SLOT(doWork()));
connect(workerThread, SIGNAL(finished()), worker, SLOT(deleteLater()));
connect(worker, SIGNAL(newinfo(unsigned char[])), this, SLOT(process_new_info(unsigned char[])));
worker->moveToThread(workerThread);
workerThread->start(); 
```

这是 gui 线程中的函数，它应该处理`unsigned char buf[10]`来自 worker 的函数。

```
void gui::process_new_info(unsigned char buf[10])
{
    int v = 0;

    printf ("%d ->", buf[0]);
    fprintf (data, "%d,", buf[0]);

    for (int i = 1; i < 9; i++)
    {
        v = buf[i];
        printf ("%d,", v);
        fprintf (data, "%d,", v);
    }

    printf ("\n");
    fprintf (data, "\n");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T17:54:20.187

建立连接的正确方法是：

`connect( worker, SIGNAL(newinfo(unsigned char[10])), this, SLOT(process_new_info(unsigned char[10])) );`

但是，您将遇到一个问题，即您将尝试建立排队连接，而 Qt 不知道如何处理该类型的排队。有很多方法可以解决这个问题，但是您会发现将数据放入容器（例如，`QByteArray`或`QVector`而不是原始数组）要容易得多。

# c++ - 在 C++ CPLEX 中使用变量边界和目标函数的问题

> ID：15276631
> 
> 赞同：0
> 
> 时间：2013-03-07T16:35:46.143
> 
> 标签：c++, cplex

我正在用 C++ 编写一个线性编程模型，不使用 cplex 的音乐会技术。

我像这样声明模型的变量和目标函数：

```
IloModel genInst (env);

IloNumVarArray Sizes(env,N,0.25+EPS,1.0-EPS);

IloObjective Weight = IloAdd(genInst, IloMaximize(env,IloSum(Sizes)); 
```

EPS 是一个小常数，因为我希望变量严格大于 0.25 且严格小于 1.0。

目标函数应该只是最大化所有变量的总和，但是每当我尝试这样做时，解决方案中的变量的值都会超出我的限制（例如小于 0.25 或太大），我看不到任何保留变量的可能性在他们的范围内的值。

有人可以帮帮我吗？我可能犯了一些错误，因为它不应该那么复杂。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:46:13.363

这是一个边界函数：

```
template<class T>
T bound_number(T n, T min, T max) {
    return std::max(std::min(n, max), min);
} 
```

# c# - 搜索列表 对于带有通配符的值

> ID：15276633
> 
> 赞同：0
> 
> 时间：2013-03-07T16:35:46.790
> 
> 标签：c#, asp.net, regex, linq

我目前已将用户有权访问的组织列表设置为列表 ( `List<string> userOrg`)。

列表内容类似于：

```
34598
34599
23% 
```

然后我使用这个列表填充一个gridview，所以gridview会给我所有的信息：

```
34598
34599
everything that starts with: 23 
```

现在我想以某种方式让用户能够搜索该gridview

他们将他们想要查找的组织放入文本框中，它填充得很好，但是我如何确保只显示他们有权访问的组织？

我想我要问的是，如何搜索用户组织列表以确保有问题的组织在其中，但同时考虑通配符。

例如，如果他们搜索“345%，我只想向他们显示 34598 和 34599，而不是 34566，因为这些是用户可以访问的（在我的 userOrg 列表中）

我从这个开始，但不确定如何处理通配符：

```
List<string> org = new List<string>();
    List<string> userOrg = new List<string>();
    userOrg = (List<string>)Session["UserOrgs"] ;

    if (txtOrg.Text == "")
        Session["UserOrgs"] = userOrg;              
    else
    {
        foreach (string item in userOrg)
        {
            if(Regex.IsMatch(item, txtOrg.Text))
               org.Add(txtOrg.Text);
        }
        Session["UserOrgs"] = org;
    }
    ObjectDataSource1.Select(); 
```

现在，如果我在文本框中输入 23% 以搜索我可以访问且以 23 开头的所有组织，它匹配并进入 if，但是如果我在文本框中输入 2%，它不匹配O 在我的 userOrg 列表中有 23% 并且没有返回任何内容。

也许有一种方法可以使用 LINQ 更轻松地做到这一点？我以前没有做太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:02:39.490

一般来说，当标准字符串操作可以正常工作时，我不赞成使用正则表达式，因为我坚信后者更容易理解，因此更易于维护。在这种情况下，我很想做类似的事情：

```
Bool isVisible = userOrgs.Any(delegate(string x)
                              {
                                  String y = txtOrg.Text;
                                  if (y.EndsWith("%"))
                                  {
                                      return x.StartsWith(y.TrimEnd('%'));
                                  }
                                  if (x.EndsWith("%"))
                                  {
                                      return y.StartsWith(x.Trim('%'));
                                  }
                                  return x == y;
                              } 
```

如果您喜欢正则表达式，那么您可以随意添加它们。

# android - 将值从 IntentService 传递给 Service

> ID：15276635
> 
> 赞同：1
> 
> 时间：2013-03-07T16:35:49.550
> 
> 标签：android

我想将一个变量从 IntentService 传递给 Service。

假设我有： MyService.java 和 MyIntentService.java

```
public class MyService extends Service {

public static String myString = "";

} 
```

* * *

```
public class MyIntentService extends IntentService {

protected void onHandleIntent(Intent intent)
{
MyService.myString = "My New String Value";
}

} 
```

它是这样工作的吗？还是我应该使用 Intent.putextra(...) 方法？

# hibernate - 将 XML 映射与 Hibernate 中的注释进行比较

> ID：15276641
> 
> 赞同：0
> 
> 时间：2013-03-07T16:36:01.767
> 
> 标签：hibernate, annotations, mapping

我正在将 Hibernate 项目从使用映射文件迁移到使用注释。是否有任何工具可以让我比较这两种映射，例如从注释生成 XML 映射文件的工具？

使用另一种措辞。有什么方法可以确保新的带注释的项目的行为与使用映射文件的项目完全相同而不运行它？

# javascript - 在 SpineJS 中更新模型 ID

> ID：15276643
> 
> 赞同：0
> 
> 时间：2013-03-07T16:36:04.097
> 
> 标签：javascript, coffeescript, spine.js

如果我按如下方式更新它：

```
model = ModelClass.create(id: 1, foo: 'bar')
model.updateAttribute('id', '123') 
```

我有这个对象的 2 个实例：

```
// in chrome console
>ModelClass.records
Object {1: ModelClass, 123: ModelClass} 
```

如何在不重复模型的情况下更新模型 ID？

PS为了与我使用网络套接字的服务器同步。我需要将临时 ID 更新为真实 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:55:33.563

这`id`是一个不应该以这种方式更新的特殊属性。使用`model.changeID("someNewId")`，保存新的映射。此功能似乎没有记录。

Spine 的文档有点落后于它的开发，但请查看`Model`这里的课程：[https ://github.com/spine/spine/blob/master/src/spine.coffee](https://github.com/spine/spine/blob/master/src/spine.coffee)

# php - PHP DB 连接变量在包含时不可用

> ID：15276649
> 
> 赞同：0
> 
> 时间：2013-03-07T16:36:14.463
> 
> 标签：php

我有一个这样的脚本，它在我的模型中包含一个用于处理图像上传的脚本。然后我使用 addImage() 在该文件中调用一个函数，如下所示：

```
<?php
    include '../model/imageUploadHandler.php';

    $imgTitle = $_POST["image_title"];
    $imgDescr = $_POST["image_description"];
    $target_path = "../images/";
    $filename = basename( $_FILES['file']['name']);
    $target_path = $target_path . $filename;

    addImage($imgTitle, $imgDescr, $filename); 

?> 
```

然后，在 imageUploadHandler.php 中，我编写了函数，该函数被顺利调用：

```
<?php
    include('./db_conn.php');

    function addImage($title, $description, $target_path)
    {
        if(move_uploaded_file($_FILES['file']['tmp_name'], $target_path))
        {
            $sql = "INSERT INTO image_data (filename, title, description) VALUES ('$target_path','$title','$description')";
            echo $sql;

            if (!mysqli_query($con, $sql))
            {
                die('Error: ' . mysqli_error());
            }
            echo "1 record added";

            echo "The file " .  basename( $_FILES['file']['name']) . " has been uploaded";
            echo $title;
            echo $description;
        }
        else
        {
            echo "There was an error uploading the file, please try again!";
        }
    }
?> 
```

我已经包含了一个“db_conn.php”脚本，这样我就可以在需要连接到数据库的任何地方包含 db_conn.php。这是 db_conn.php

```
<?php
    // Create connection
    $con = mysqli_connect("","root","root", "image_info");

    // Check connection
    if (mysqli_connect_errno($con))
    {
        echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }
?> 
```

如果我将连接脚本直接内联而不包含包含，则数据库已连接并且一切正常。但是，当我尝试包含外部文件 (db_conn.php) 时，由于某种原因，$con 变量对我的 imageUploadHandler.php 不可用

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:38:54.437

这是一个范围问题。除非作为参数传入或声明，否则`global`您的连接将在您的函数范围内不可用。

# wordpress - 无法使短代码在小部件中工作

> ID：15276651
> 
> 赞同：1
> 
> 时间：2013-03-07T16:36:16.033
> 
> 标签：wordpress, shortcode

我有一个非常糟糕的问题......我正在使用骨架 wordpress 主题作为框架来制作子主题。我的孩子主题运行良好，除了简码。如果我在页面中插入简码，一切正常，但是，如果我在文本小部件中插入相同的简码，它就不起作用..

我已经尝试在functions.php中插入这段代码：

```
add_filter('widget_text', 'do_shortcode');
add_filter('the_excerpt', 'do_shortcode');
add_filter('get_the_excerpt', 'do_shortcode'); 
```

但没有任何改变......我也尝试将短代码直接插入到我的模板文件中，例如：

```
<?php echo apply_filters('the_content',"[latest excerpt='true' thumbs='true' width='50' height='50' num='5' cat='1']"); ?> 
```

有人能告诉我为什么任何短代码只对我有用吗？非常感谢提前

# javascript - 使用 jQuery 根据内部 div 隐藏 div 块

> ID：15276656
> 
> 赞同：0
> 
> 时间：2013-03-07T16:36:26.913
> 
> 标签：javascript, jquery, e-commerce

我是 jQuery 的新手，我遇到了麻烦。

首先，我将解释我的问题：

我们正在编写一个使用 OXID 电子商务的在线商店网站。在文章列表中，我们要安装一些过滤器。其中之一是价格过滤器。我们读取数据库上的最高最低价格，将其存储在 cookie 中，让用户选择此过滤器工作的时间间隔。所以一开始，所有的文章列表都被加载了。此列表如下所示：

一个包含所有单一产品的 div 容器：

在里面，我们有每个产品：

而且，在产品内部，我们还有另一个带有价格的 div。

对于每种产品，我们都有不同的 id。

```
<div id="productList">
  ...
  <div id="test_cntr_1_0015-0001-2250-0186 " class="product">
    ...
    <div class="form_wrapper">
      ...
      <form>
        ...
        <div class="price">1,99 €&lt;/div>
        ...
      </form>
      ...
    </div>
  ...
  </div>
...
</div> 
```

里面有一个表格，因为您可以在不了解细节的情况下购买产品。

所以，重点：

文档准备好后，用户可以设置“价格范围”，jQuery 应该隐藏所有价格不在范围内的产品。边界值是通过 cookie 读取的。

到目前为止我所拥有的是：

```
$("#productList div.product div.price").each(function (index) {
  // What I should write here ?
} 
```

这实际上是一一选择我需要的 div，但是，我如何比较价格？我的意思是，访问内部 div 价格并检查它是否在界限之间，否则，将值更改为 hidden ？

假设我们已经有了脚本上的值。

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:26:29.917

将 data-* 属性添加到所有 div.price，例如：

```
<div class="price" data-price-value="1.99" data-price-unit="eur">1,99 €&lt;/div> 
```

那么您可以通过以下方式访问：

```
$("#productList div.product div.price").each(function (index) {
    var data = $(this).data(); // return {priceValue: 1.99, priceUnit: 'eur'} for the example div above
    // check the price range here by using data.priceValue
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:27:15.580

扩展 Natthakit Susanthitanon 的答案。我假设您已经验证了价格约束输入 -

```
<input id="upperBound" type="text">
<input id="lowerBound" type="text"> 
```

然后你可以这样做 -

```
$("#productList div.product div.price").each(function (index) {
    var price = $(this).data("price-value");
    var lower = $("#lowerBound").val();
    var upper = $("#upperBound").val();
    if(price >= lower && price <= upper)
        $(this).parents(".product").show();
    else
        $(this).parents(".product").hide();
  }); 
```

编辑：只需重新阅读您的问题。您如何访问您的 cookie？如果您需要在 jQuery 中访问您的 cookie，我会推荐 Klaus Hartl 在 Git Hub 上的插件（[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)）

# navigation - 如何在angularjs中实现分层导航？

> ID：15276661
> 
> 赞同：2
> 
> 时间：2013-03-07T16:36:40.383
> 
> 标签：navigation, angularjs, hierarchical-data

如何在 angularjs 中实现分层导航？例如，给定下面的站点结构，如何使用 angularjs 在侧边栏中实现它？

**食谱
。首发
。主菜
.. 鸡肉
.. 素食
.. 意大利面 ... 意大利
面
... 比萨饼
. 沙漠**

我很高兴将**ng-repeat**用于单个层，或者可能是固定少量层的低效实现（使用嵌套**ng-repeat**的），但不确定如何进行任意深度的导航。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T05:43:21.300

试试这个：如果你想要来自 JSON 的数据，你也可以对“类别”和“食谱”中的食谱使用相同的 NG-REPEAT 逻辑。

```
<ul>

<li>
<a href="#"> Recipes</a>
</li>
     <ul>
        <li>
        <a href="#"> Categories</a>
        </li>

        <ul >
        <li ng-repeat="recipe in recipes>
        <a href="#/recipes/{{recipe.id}}"> <img ng-src="{{recipe.imageUrl}}"></a>
        </li>
        </ul>

     </ul>
</ul>

Here recipes is list of recipes you have. {{recipe.id}} and {{recipe.imageURL}} is getting picked  from JSON file where all this data is available.

for controller.js:

var recipeControllers = angular.module('recipeControllers', []);

recipeControllers.controller('recipeSideListCtrl', ['$scope', '$http', 
     function ($scope, $http) { 

$http.get('app/recipes/recipe.json').success(function(data){

$scope.recipes = data;

}}]); 
```

休息一下，您可以使用 CSS 将其转移到侧边栏。希望这可以帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:58:14.757

我不会担心使用嵌套的 ng-repeat 指令，因为嵌套循环在编程上是必要的。它们在 AngularUI 中的作用几乎相同。[检查http://angular-ui.github.com/](http://angular-ui.github.com/)中的“Sortable”指令

另一种方法是编写一个自定义的 ng-repetable-deeply 指令，这将更加复杂，并且无论如何您最终都会对该指令执行嵌套循环。

# ruby-on-rails - 搜索不重定向

> ID：15276662
> 
> 赞同：1
> 
> 时间：2013-03-07T16:36:42.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, full-text-search

我正在尝试遵循[Simple Search Form](http://railscasts.com/episodes/37-simple-search-form?view=comments)。尽管看起来微不足道，但我无法让它发挥作用。我基本上有以下设置：

**应用程序.html.erb**

```
<%= form_tag products_path, method: :get do %>
            <p>
              <%= text_field_tag :search, params[:search] %>
              <%= submit_tag "Search", title: nil %>
            </p>
        <% end %> 
```

**prodcut_controlle.rb**

```
 def index
    @products = Product.search(params[:search])
    respond_to do |format|
      format.html
      format.json { render json: @products }
    end
  end

  def show
    @product = Product.find(params[:id])
    @cart = current_cart #Get current cart

    respond_to do |format|
      format.html
      format.json { render json: @product }
    end
  end 
```

**产品.rb***

```
 def self.search(search)
    if search
      find(:all, :conditions => ['title LIKE ?', "%#{search}%"])
    else
      find(:all)
    end
  end 
```

我的有效目标是，当用户搜索特定内容时，`product`他们会被重定向到产品。在这种情况下，`products show`这就是为什么我把`@products = Product.search(params[:search])`. 我该如何去实现如此基本的东西-.-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:40:10.843

除非您的路线非常不寻常，否则您的表单标记`products_path`指的是`index`动作而不是`show`动作。

如果您可以确定要“显示”的单个产品，则应改为执行搜索的代码，`index`然后执行重定向到。`show`

至于重定向，假设您有一个搜索结果（或正在为用户选择一个），您可以`show`使用以下命令重定向到该页面：

```
product = @products.first // Somehow you're choosing one of your @products here

respond_to do |format|
  format.html { redirect_to product }
  //...
end 
```

现在，您需要处理另外两种情况： 1\. 如果没有产品怎么办？2\. 如果产品不止一种怎么办？

两者都可以通过您的索引操作作为一般搜索结果页面进行处理。

```
respond_to do |format|
  format.html do
    if @products.blank? || @products.size > 1
      render :action => "index"
    else
      redirect_to @products.first
    end
  end
  // ...
end 
```

在一个真实的系统中，我会将整个“我有一个单一的产品”问题放到它自己的函数中，但希望这能让你朝着正确的方向前进。

== 文档

[重定向](http://api.rubyonrails.org/classes/ActionController/Redirecting.html)

[使成为](http://apidock.com/rails/ActionController/Base/render)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:41:18.313

您应该对索引操作执行搜索，而不是显示操作。因此，将`@products = Product.search(params[:search])`行移动到索引操作。另请注意，您的表单路径`products_path`是在 index 操作中提交请求。希望这可以帮助

# python - 使用斯坦福解析器检查句子是否语法正确

> ID：15276664
> 
> 赞同：0
> 
> 时间：2013-03-07T16:36:45.060
> 
> 标签：python, nlp, grammar, nltk, stanford-nlp

有什么方法可以检查一个句子在语法上是否正确或不使用斯坦福解析器？到目前为止，我能够使用斯坦福解析器获得句子的解析树。我被困在这里，不知道如何进一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:16:10.587

larsmans 是正确的，这些解析器不是为此而设计的，但这里有一个 hack：

您可以尝试使用解析器“信心”。每个概率解析器计算不同标签的概率并分配最可能的序列。我已经用词性标注器（[http://www.ark.cs.cmu.edu/TweetNLP/](http://www.ark.cs.cmu.edu/TweetNLP/)）尝试了这个，每个标签都被赋予了一定的信心（0.93、0.45等），我计算了一个句子中所有标签的平均置信度，并将其与某个置信度阈值（基于语料库中的其他句子）进行比较。

显然，如果标签的置信度不够高，我认为该句子在语法上是不正确的。经过一些启发式方法——比如处理标点符号或一个单词的句子——它对我有用。

斯坦福解析器是概率性的，并且可以肯定地计算概率，但我无法得到盒子的信心。也许您必须深入研究，看看如何才能暴露它。

# javascript - 如何跨多个js文件使用一个函数

> ID：15276672
> 
> 赞同：2
> 
> 时间：2013-03-07T16:37:14.533
> 
> 标签：javascript, jquery, function

我对javascript很陌生，但我正在尽我所能，但我找不到答案或对我有帮助的东西。

我试图在数千之间放置空格，但在不同的 JS 文件中。所以我想在另一个文件中定义那个函数，这样我就可以重用它。这有效：

```
var parts = item['effect-value'].toString().split(".");
parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, " ");
parts.join("."); 
```

我尝试过的是以下内容：

全局文件：

```
 function addSeparator(){
       parts.toString().split(".");
       parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, " ");
       parts.join(".");
   } 
```

或类似的东西……</p>

```
$.fn.addSeparator = function(options) {
    var $this = this;

    var parts = options.replace;

    $this.html({
        parts.toString().split(".");
        parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, " ");
        parts.join(".");
    })

    return $this;
}; 
```

其他文件：

```
var parts = item['effect-value'];
addSeparator(parts); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:39:29.367

您只是在运行该函数，而不是应用于 var。

尝试像这样使用：

```
 function addSeparator(input){
           var parts = input.toString().split(".");
           parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, " ");
           return parts.join(".");
       }
     var parts = addSeparator(item['effect-value']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:21:12.207

只要函数在全局范围内*并且已经加载*，它们就应该可以工作。

您的 JavaScript 文件调用在 HTML 中的顺序是什么？依赖于其他文件的文件应该位于它们所依赖的文件之后。

IE - 全局、分隔符、使用分隔符的 JS

# iphone - 避免更改时间后触发本地推送通知

> ID：15276673
> 
> 赞同：1
> 
> 时间：2013-03-07T16:37:17.263
> 
> 标签：iphone, objective-c, cocoa-touch

在我的应用程序中，我想每 30 分钟发送一次本地推送通知。一种方法是配置`local push notification`并触发它。然而，用户有可能改变他的时间并向前移动 30 分钟。这样就可以作弊了。

我想配置我的应用程序，以便通知仅在 30 分钟后发生。我怎样才能做到这一点。我的应用程序确实与服务器通信并且可以获得它的时间戳，但我想做不使用太多服务器资源的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:50:29.697

我能想到的检测用户更改系统时钟的唯一方法如下：

1.  当应用程序启动时，询问您的服务器时间并注意该时间和`[NSDate date]`. 坚持作为`[NSNumber numberWithFloat:serverOffset];`
2.  实现这样的方法`- (BOOL)deviceClockChanged`再次询问服务器并与持久值进行比较。如果差异大于同步请求的时钟漂移 + 延迟的一些小的容差，那么您可以断定时钟已更改。在 UTC 中执行所有这些操作，这样它就可以独立于用户在时区之间旅行。
3.  考虑一下：如果用户非常想在时间上欺骗你的应用程序以延迟通知，弄乱他手机的其余部分，也许你应该让他编辑通知时间表。

如果您愿意，我可以为第 1 点和第 2 点提供代码示例，如果您愿意，我可以为第 3 点提供一些 @"alert text"，这将使用户对编辑他的通知感到非常内疚。

我的原始答案在这里。如果您选择让用户编辑通知，这些方法将是关键... UIApplication 有一个属性：

```
NSArray *scheduledLocalNotifications; 
```

并实现：

```
- (void)cancelLocalNotification:(UILocalNotification *)notification 
```

所以要改变一个，取消它，然后重新安排它。

# html - 增长 LI 元素以适应固定宽度

> ID：15276678
> 
> 赞同：1
> 
> 时间：2013-03-07T16:37:37.327
> 
> 标签：html, html-lists

如何以`li`这种方式增长元素，所有四个`li`元素都占用完整的 900 像素空间并在元素之间添加一点间隙。为什么现在已经存在差距 - 我没有定义？

```
<html><head><title></title></head>
<style type="text/css">
#box { width: 900px; border: solid 1px black; }

#menu {
    display: block;
    position: relative;
    width: 900px;
    margin: 0;
    padding: 0;
    text-align: center;
}

#menu li {
    display: inline;
    position: relative;
    margin: 0;
    padding: 0;
}

#menu li a, #menu li a:visited {
    display: inline-block;
    position: relative;
    padding: 10px;
    background-color: yellow;
    text-decoration: none;
}

#menu li a:hover, #menu li a:active {
    background-color: green;
    text-decoration: none;
    color: white;
}

</style>
<body>

<div id="box">
    <ul id="menu">
        <li><a href="#">Mozilla Firefox &amp; Thunderbird</a></li>
        <li><a href="#">OpenOffice</a></li>
        <li><a href="#">Microsoft Office Visio</a></li>
        <li><a href="#">Apache OpenOffice 3.0.0</a></li>
    </ul>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:56:12.073

内联块的行为很奇怪，因为它们呈现空白。项目之间显示的间隙是代码中的换行符。您可以删除换行符，如下面的代码所示（或在这个小提琴[http://jsfiddle.net/UyQEK/](http://jsfiddle.net/UyQEK/)）。如果您想保持 HTML 干净，并且不必删除空格，请在元素上使用 float left 而不是 display: inline-block 并在父级上执行 clearfix 以设置高度。

```
<div id="box">
    <ul id="menu">
        <li><a href="#">Mozilla Firefox &amp; Thunderbird</a></li><li><a href="#">OpenOffice</a></li><li><a href="#">Microsoft Office Visio</a></li><li><a href="#">Apache OpenOffice 3.0.0</a></li>
    </ul>
</div> 
```

**编辑** 犯了忘记检查以确保我回答了整个问题的经典错误。我已经更新了小提琴[http://jsfiddle.net/UyQEK/1/](http://jsfiddle.net/UyQEK/1/)以显示利用整个栏的实际答案，而不是仅仅摆脱你的空间。解决方案的基础是浮动元素并给它们每个 25% 的宽度，并对 ul 元素应用 clearfix。

希望这次能解决整个问题。

# javascript - 在下拉答案上切换三角形

> ID：15276679
> 
> 赞同：0
> 
> 时间：2013-03-07T16:37:37.327
> 
> 标签：javascript, drop-down-menu, toggleclass

我是 Javascript 的新手，我在互联网上找到了一个可以正常工作的下拉常见问题解答文件的代码。我无法解决的是如何调整它以显示切换三角形 - 正常指向右侧，当答案下降时指向下方（如此处[http://www.facebook.com/help/182071178590498/](http://www.facebook.com/help/182071178590498/)）。

主要代码是这样的：

```
 <script language="JavaScript" type="text/javascript"    src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
    <script type="text/javascript"> 
$(document).ready(function() {
    $('#faq').find('dd').hide().end().find('dt').click(function() {
        $(this).next().slideToggle('slow');
    });
});
    </script>
    <style type="text/css"> 
#faq {
    width: 100%;
}
#faq dt {
    color: #2763A5;
    cursor: pointer;
    margin: 8px 0;
    padding: 0;
}
#faq dd {
    border: 1px solid #BABAC0;
    padding: 0;
    margin: 0;
    background-color: #FFFFE1;
}
#faq dd p {
    padding: 10px;
    margin: 0;
}
    </style> 
```

FAQs and answers 与一个 dl line + 这个重复元素一起工作：

```
 <dl id="faq">
<dt>
What are the benefits of solar energy?
</dt>
<dd><p>
When you <a href="installations.htm">install Solar water heating</a> in your home, you will reduce your impact on the environment. The system will pay for itself whilst reducing your fuel bills.
</p></dd> 
```

整个页面可以在这里看到

[http://contemporaryenergy.co.uk/faqs.htm](http://contemporaryenergy.co.uk/faqs.htm)

任何建议将不胜感激。帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:44:34.567

我没有看你的代码，但通常你通过设置一个额外的 CSS 类来解决这个问题。您的默认课程可能是：

```
.item {
    background-image: url("triangle.png");
} 
```

然后添加/删除替换或偏移背景图像的类（如果您使用的是精灵）

```
.item.open {
    background-image: url("triangle-open.png");
    // or
    background-position: 0 -50px;
} 
```

# c# - 如何从 Zebra 收据打印机回读状态？

> ID：15276682
> 
> 赞同：4
> 
> 时间：2013-03-07T16:37:46.240
> 
> 标签：c#, .net, zebra-printers, zpl

我正在为一个项目使用 Zebra KR403 收据打印机，我需要以编程方式读取打印机的状态（缺纸、纸张快用完、打印头打开、卡纸等）。在 ZPL 文档中，我发现我需要发送一个`~HQES`命令，并且打印机会以其状态信息进行响应。

在项目中，打印机通过 USB 连接，但我认为通过 COM 端口连接它并从那里工作以使其通过 USB 工作可能更容易。我能够打开与打印机的通信并向其发送命令（我可以打印测试收据），但是每当我尝试读回任何内容时，它就会永远挂起并且永远无法读取任何内容。

这是我正在使用的代码：

```
public Form1()
{
    InitializeComponent();
    SendToPrinter("COM1:", "^XA^FO50,10^A0N50,50^FDKR403 PRINT TEST^FS^XZ", false); // this prints OK
    SendToPrinter("COM1:", "~HQES", true); // read is never completed
}

[DllImport("kernel32.dll", SetLastError = true)]
static extern SafeFileHandle CreateFile(
    string lpFileName, 
    FileAccess dwDesiredAccess,
    uint dwShareMode, 
    IntPtr lpSecurityAttributes, 
    FileMode dwCreationDisposition,
    uint dwFlagsAndAttributes, 
    IntPtr hTemplateFile);

private int SendToPrinter(string port, string command, bool readFromPrinter)
{
    int read = -2;

    // Create a buffer with the command
    Byte[] buffer = new byte[command.Length];
    buffer = System.Text.Encoding.ASCII.GetBytes(command);

    // Use the CreateFile external func to connect to the printer port
    using (SafeFileHandle printer = CreateFile(port, FileAccess.ReadWrite, 0, IntPtr.Zero, FileMode.Open, 0, IntPtr.Zero))
    {
        if (!printer.IsInvalid)
        {
            using (FileStream stream = new FileStream(printer, FileAccess.ReadWrite))
            {
                stream.Write(buffer, 0, buffer.Length);

                // tries to read only one byte (for testing purposes; in reality many bytes will be read with the complete message)
                if (readFromPrinter)
                {
                    read = stream.ReadByte(); // THE PROGRAM ALWAYS HANGS HERE!!!!!!
                }

                stream.Close();
            }
        }
    }

    return read;
} 
```

我发现当我打印测试收据（第一次调用`SendToPrinter()`）时，在我用 关闭句柄之前什么都不会打印`stream.Close()`。我已经进行了这些测试，但无济于事：

*   调用`stream.Flush()`后调用`stream.Write()`，但仍然没有读取任何内容（在我调用之前也没有打印任何内容`stream.Close()`）
*   只发送命令然后关闭流，立即重新打开并尝试读取
*   打开两个句柄，在句柄 1 上写入，关闭句柄 1，读取句柄 2。什么都没有

有没有人有幸从 Zebra 打印机读回状态？或者有人知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T19:59:08.503

正如@l33tmike 在评论中指出的那样，这个问题的答案已经发布在另一个问题上：[我应该为 KR403 Zebra 打印机使用哪个 SDK](https://stackoverflow.com/questions/15363941/which-sdk-should-i-use-for-kr403-zebra-printer)

# mongodb - 在mongodb中，这种情况下如何设计公交车站模式

> ID：15276683
> 
> 赞同：0
> 
> 时间：2013-03-07T16:37:46.693
> 
> 标签：mongodb

我有一个要构建的架构，它是一个公交车站应用程序，它存储两个附近公交车站之间的距离或其他信息，不太可能存储一个车站 ID 作为索引或唯一键，我认为更好的做法是将站 1 和站 2 分组为唯一和索引键，但我有点不确定这样做是否正确，将 2 个公交车站 id 放入一个数组中，将此数组作为索引和唯一键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:42:11.317

这听起来很合理……这是一个“关系表”或具有附加属性的多对多连接表。您可以将距离存储为 M:N 关系的属性。/两个公交车站 ID 将形成复合主键。

查看[本建模指南第 2.1.5 节中的图像](http://docs.oracle.com/cd/E15276_01/doc.20/e13677/tut_data_modeling.htm)

您可能想了解一些有关数据库设计技术的知识。如果是这样，一些关于数据库和建模的有用资源是：

*   [Elmasri 和 Nevathi 的数据库系统基础](http://www.amazon.co.uk/Fundamentals-Database-Systems-International-Version/dp/032141506X/ref=pd_sim_sbs_b_1)- 对数据库的各个方面都非常技术性，并深入介绍了建模
*   [CJ Date 对数据库系统的介绍](http://www.amazon.co.uk/Introduction-Database-Systems-C-J-Date/dp/0321189566/ref=sr_1_1?s=books&ie=UTF8&qid=1362674725&sr=1-1)- 类似于上面
*   [范式教程 (BCNF)](http://www.informit.com/articles/article.aspx?p=27785&seqNum=3) - BCNF 规定了一种方法，通过迭代地将规则应用于您的模型直到它满足范式（是有效的 - 除非预期的冗余）来显示您的数据模型。
*   [Wikipedia 条目看起来非常简洁](http://en.wikipedia.org/wiki/Database_normalization)- 与 BCNF 相同，但看起来简洁明了（可能关注第 3 节和第 4 节）

**编辑：与 Mongo DB 相关的更新**

实际上，以上对于数据库建模来说都是非常通用的。阅读有关[MongoDB 应用程序的数据建模注意事项](http://docs.mongodb.org/manual/core/data-modeling/)的一些优秀资源后，我认为您需要更具体的指导。

因此，我建议您参考这篇内容丰富的 SO 帖子：[how-to-organise-a-many-to-many-relationship-in-mongodb](https://stackoverflow.com/questions/4839881/how-to-organise-a-many-to-many-relationship-in-mongodb)。作者给出了一个很好的解释，听起来就像你所追求的。甚至还有对文档和视频的引用。

# asp.net-mvc - 条件链接查询 mvc3

> ID：15276685
> 
> 赞同：0
> 
> 时间：2013-03-07T16:37:55.167
> 
> 标签：asp.net-mvc, linq

我需要帮助才能使下面的代码可行

```
 public ActionResult _StaffBlogs()
    { 
        string userkey = Membership.GetUser().ProviderUserKey.ToString();
        if (userkey != null || userkey != " ")
        {
            var blogstaff = db.Blogs
                .Where(u => u.IsLive == true)
                .Where(u => u.UserGuId == userkey)
                .OrderByDescending(u => u.Id)
                .Take(10);
            return PartialView(blogstaff);
        }
       return View();
    } 
```

在视图中我有这种情况

```
 @if(Request.IsAuthenticated )
    {
   @{Html.RenderAction("_StaffBlogs", "Blog");}
     } 
```

错误显示编译器错误消息：CS1501：方法“写入”没有重载需要 0 个参数

感谢期待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:08:02.397

问题是在renderpartial删除它之前额外的@消除了错误

# android - Android 中的 AAC 格式

> ID：15276687
> 
> 赞同：5
> 
> 时间：2013-03-07T16:38:05.543
> 
> 标签：android, aac

我在 android 上遇到音频问题。

简短的问题：

我需要在所有 Android 设备上播放和录制 aac 格式的音频。我发现它可以从 API 10 开始，但在我的 BLU 设备（2.3.5）上，它可以通过使用`MediaRecorder`and来工作`MediaPlayer`。但在 HTC Nexus One 上它不起作用。你有什么建议吗？

长问题：

要以 AAC 格式录制和播放音频，我使用以下代码。它非常简单和愚蠢，但它适用于测试。

```
String pathForAppFiles = getFilesDir()
                .getAbsolutePath();
        pathForAppFiles += "/bla.mp4";
        if (audioRecorder == null) {

            File file = new File(pathForAppFiles);
            if (file.exists())
                file.delete();

            audioRecorder = new MediaRecorder();

            audioRecorder
                    .setAudioSource(MediaRecorder.AudioSource.MIC);

            audioRecorder
                    .setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);

            audioRecorder
                    .setAudioEncoder(MediaRecorder.AudioEncoder.AAC);

            audioRecorder.setOutputFile(pathForAppFiles);

            try {
                audioRecorder.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            audioRecorder.start();

        } else {
            audioRecorder.stop();
            audioRecorder.release();
            audioRecorder = null;

            new AudioUtils().playSound(pathForAppFiles);
        } 
```

`new AudioUtils().playSound(pathForAppFiles);`- 创建 MediaPlayer 并从文件中播放声音；

为了使它在 nexus 上工作，我尝试了[aac-decoder](http://code.google.com/p/aacdecoder-android/) - 它不会播放文件到最后（仅播放 10 秒文件中的 6 秒）。而且它不会播放上面代码录制的声音。

我也尝试安装 FFmpeg，但我没有使这个库工作的经验。

那么你能推荐一些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:41:45.970

我通过将音频类型更改为 MP3 来解决此问题，因为某些设备（如 Kindle Fire）不能从任何地方播放 aac。

我的建议是：如果你想制作跨平台的声音 - 使用 MP3。[您可以使用跛脚编码器](http://lame.sourceforge.net/)将任何声音转换为 MP3 。

# javascript - 在 jQuery 中编辑对象

> ID：15276690
> 
> 赞同：0
> 
> 时间：2013-03-07T16:38:08.463
> 
> 标签：javascript, jquery, object

```
$(function(){
    var z = document.body.children[0];
    var x=$("li", z);
    x.name="Johnny";
    alert(x.prop(name));
}); 
```

1.  `x`应该是一个对象，其中包含`ul`. `body`无论对象包含什么，我都想添加一个带有值的属性，然后使用该`prop()`方法来显示它——但这似乎不起作用。这是为什么？

2.  我看到一个包含以下内容的脚本： `var $x = $("div");`- 如果它是一个 jQuery 对象，我是否必须添加`$`到变量名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:41:48.427

如果您想要`li`第一个元素中的所有元素`ul`，那么这应该可以解决问题：

```
var elements = $("ul:eq(0) li"); 
```

[这是一个非常简单的例子。](http://jsfiddle.net/musefan/BVSPh/)

* * *

关于设置属性，您可以这样做`element.name = "test"`，并且可以正常工作。但是您需要了解的是，这是`name`在 jquery 集合对象上设置属性，而不是在任何实际元素上。

但是，您可以像这样设置属性：

```
elements.prop("name", "test"); 
```

并像这样访问它：

```
var name = elements.prop("name");//name will be "test" 
```

[这是一个工作示例](http://jsfiddle.net/musefan/BVSPh/1/)

* * *

正如我在评论中提到的，您不需要在变量前面加上`$`. 但这有助于轻松查看哪些变量是 JQuery 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:49:39.983

要选择页面内的第一个 ul 元素，您可以执行以下操作：

```
$("ul:first li") 
```

这样，您将选择页面中第一个列表中的所有行。

要在元素中存储任意数据，您可以使用 data 方法，如下所示：

```
$("element").data('key', 'value'); 
```

并检索数据：

```
$("element").data('key'); 
```

[有关数据方法的更多信息。](http://api.jquery.com/data/)

如果你真的想添加一个属性，你可以使用 attr 方法，它的工作方式与 data 方法相同，但它会反映在 DOM 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:41:38.990

数字 1.`x`是一个 jQuery 对象，您向该实例添加了一个`name`属性，然后您正在使用`name`它，尽管它没有被定义。

如果要更改使用 jQuery 获得的元素的属性，方法是：

```
$('selector').prop('property', 'value');
$('selector').attr('attribute', 'value');
$('selector').get(index).property = "value"; 
```

2号。不，您不必这样做，`$`前缀只是使代码更具可读性的约定。
[在 jQuery 中使用带有变量的 $ 背后有什么具体原因吗](https://stackoverflow.com/q/10204606/601179)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:50:48.900

使用来自@musefan answer的选择器，您可以获取返回的集合，并使用该`attr()`方法为每个选定的项目添加属性和值。但是，我稍微修改了他的选择器以实际抓取其中的“所有”元素，（以防未来的访问者想知道）

```
var elements = $("ul:eq(0)").children();
elements.attr("attrName", value); 
```

所以如果你想设置标题：

```
var elements = $("ul:eq(0)").children();
elements.attr("title", "Johnny"); 
```

您可能不想提醒这些值，浏览器可能会要求您停止在页面上允许警报...但如果您真的这样做了，那么您可以在`.each()`那之后添加一个。

```
var elements = $("ul:eq(0)").children();
elements.attr("title", "Johnny").each(function(){
     alert($(this).attr("title");
}); 
```

# shell - 将变量值作为参数从一个脚本传递到另一个 shell 脚本，作为参数

> ID：15276693
> 
> 赞同：0
> 
> 时间：2013-03-07T16:38:18.707
> 
> 标签：shell, arguments

我有两个 shell 脚本，一个是我自己的脚本，另一个是第 3 方的东西。我将文件路径作为 script1 中的参数。Script2 是第 3 方脚本，它以文件路径为参数。我不想修改这个脚本。

我正在做这样的事情，在script1中，

```
a=$1
./script2 $a 
```

但是 $a 正在作为字符串传递.. 就像在传递 '$a' 而不是变量 a 的实际值:(

有没有办法可以实现这一目标？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-11T22:48:25.950

```
my_script.sh
=======================================
#!/bin/bash
1st="sam"
2nd="victor"
3rd="cris"
/home/admin/Third_party.sh "$1st" "$2nd" "$3rd"

Third_party.sh
=======================================
#!/bin/bash
echo "1st value is: $1 ....."
echo "2nd value is: $2 ....."
echo "3rd value is: $3 ....." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-04T02:56:07.707

您应该使用单引号来传递变量。就像你的情况下的'$ 1st'。

# php - 无法上传大图

> ID：15276694
> 
> 赞同：1
> 
> 时间：2013-03-07T16:38:21.840
> 
> 标签：php, image, codeigniter, upload, resize

我正在编写基于 php 的图片库。对于我正在使用 CodeIgniter 框架的项目。服务器最多可以上传 5 张图片。

当上传小图像（宽度为 800 像素）时，它可以工作。当用户尝试上传 5 张图片，每张图片的宽度约为 2mb 且 > 3200px 时，就会出现问题。

在这种情况下，图像不会上传并且 $_POST 是空的。

这是我到目前为止所做的，但不幸的是没有帮助

我用这个更改了 php.ini 中的默认值

```
max_execution_time = 180
max_input_time = 160 
emory_limit = 228M 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:39:48.053

看着：

*   `upload_max_filesize = 10M`
*   `post_max_size = 10M`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:46:17.227

您还置换了变量名称中的几个字母：

```
emory_limit = 228M 
```

它应该是 memory_limit。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:40:00.393

在快速谷歌之后，我相信你可以做到这一点，我找到[了这个网站](http://www.sitepoint.com/upload-large-files-in-php/)，里面有你需要的所有细节。

主要指示是添加：

*   php_value upload_max_filesize 10M - 可以上传的最大文件大小。
*   php_value post_max_size 10M - PHP 允许的最大 post 数据量。
*   php_value max_input_time 300 - 脚本在终止之前可以运行的时间量。
*   php_value max_execution_time 300 - 网站上传文件的超时时间。

# php - PHP，MySQL 查询不起作用

> ID：15276699
> 
> 赞同：0
> 
> 时间：2013-03-07T16:38:38.713
> 
> 标签：php, mysql, echo

在一个小型大学项目上工作以开发一个小型 php 站点。似乎有几个问题。在任何类型的编程方面，我都是一个全新的人。我在字面上剪切和粘贴（从提供的脚本）并试图以我需要的方式将事物组合在一起。

我似乎在从数据库查询中收集数据时遇到问题，我已经在脚本上有一个可以完美运行的脚本。我正在尝试添加另一个，但似乎无法使其正常工作。

[http://mkiddr.com/phptests/shopping/category.php?id=2](http://mkiddr.com/phptests/shopping/category.php?id=2)

目前 category.php 正在显示该类别中的所有产品。但是我希望它也显示类别描述，您将在下面的代码中看到我是如何尝试这样做的：

```
 <?php
session_start();
include "conn.php";
include "header.php";

if (isset($_GET['id'])){
    $CategoryID = $_GET['id'];
    $q="SELECT ProductID, ProductName FROM Products WHERE CategoryID=$CategoryID";
    $d="SELECT Desc FROM ProductCategories WHERE CategoryID=$CategoryID";

    $result = mysqli_query($_SESSION['conn'],$q);

    $result2 = mysqli_query($_SESSION['conn'],$d);

    echo "<div>";
    while ($row = mysqli_fetch_row($result)){
        echo "<p><a href='product.php?id=".$row[0]."'>".$row[1]."</a></p>";
    }
    echo "<p>".$result2."</p>";
    echo "</div>";
    mysqli_free_result($result);
}
include "footer.php";
?> 
```

将不胜感激一些帮助！

**更新的代码（仍然无法正常工作）**

```
 <?php
   session_start();
   include "conn.php";
   include "header.php";

 if (isset($_GET['id'])){
$CategoryID = $_GET['id'];
$q="SELECT ProductID, ProductName FROM Products WHERE CategoryID=$CategoryID";
$d="SELECT `Desc` FROM ProductCategories WHERE CategoryID=$CategoryID";

$result = mysqli_query($_SESSION['conn'],$q);
$result2 = mysqli_query($_SESSION['conn'],$d);  

echo "<div>";
while ($row = mysqli_fetch_row($result)){
    echo "<p><a href='product.php?id=".$row[0]."'>".$row[1]."</a></p>";
}
echo "</div>";
mysqli_free_result($result);

//Description
echo "<div>";
while ($result2 = mysqli_fetch_assoc($result2)){
    echo "<p>".$result2[0]."</p>";
   }

   }
  include "footer.php";
  ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:39:47.770

我见过的错误之一是使用保留关键字。

不执行的原因`$d`是因为 column`DESC`是`MYSQL`. 您可以用反引号分隔它或在表格上提供别名以使其工作，例如

```
$d="SELECT `Desc` FROM ProductCategories WHERE CategoryID=$CategoryID"; 
```

或者

```
$d="SELECT a.Desc FROM ProductCategories a WHERE CategoryID=$CategoryID"; 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:44:29.120

首先记住将查询提取到数组中：

```
$result2 = mysqli_fetch_assoc($result2); 
```

由于查询保存到关联数组中，您应该以这种方式调用它 `$result2['Desc']`

```
<?php
   session_start();
   include "conn.php";
   include "header.php";

 if (isset($_GET['id'])){
$CategoryID = $_GET['id'];
$q="SELECT ProductID, ProductName FROM Products WHERE CategoryID=$CategoryID";
$d="SELECT `Desc` FROM ProductCategories WHERE CategoryID=$CategoryID";

$result = mysqli_query($_SESSION['conn'],$q);
$result2 = mysql_fetch_assoc( mysqli_query($_SESSION['conn'],$d) );  

echo "<div>";
while ($row = mysqli_fetch_row($result)){
    echo "<p><a href='product.php?id=".$row[0]."'>".$row[1]."</a></p>";
}
echo "</div>";
mysqli_free_result($result);

//Description
echo "<div>";
          echo "<p>".$result2['Desc']."</p>";
echo "</div>";

   }
  include "footer.php";
  ?> 
```

# php - 为什么这个 PHP 语句会意外删除 7？

> ID：15276705
> 
> 赞同：0
> 
> 时间：2013-03-07T16:38:47.243
> 
> 标签：php, substr, strpos

我希望有一双新鲜的眼睛看着我的问题，这让我发疯。任何帮助，将不胜感激。

如果用户在电话号码的开头输入第一个“44”，则仅从两行 PHP 代码中尝试删除：

```
 $telephone = '44789562356';
    $telephone = str_replace(' ','',$telephone);
    $telephone = str_replace('+44','0',$telephone);
if(strpos($telephone,"44")==0){
        $telephone = substr($telephone,2);
        $telephone = '0'.$telephone;
    } 
```

为什么它会从所有电话号码中去掉“7”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:50:16.150

就像 Colin 评论的那样，您需要对`===`return from使用严格的比较，`strpos()`因为`false`如果找不到子字符串，并且`0`它位于字符串的开头并且`false == 0`为 true，则它返回，并且`false === 0`为 false。

或者，您可以使用正则表达式仅在字符串的开头指定匹配，如下所示：

```
if( preg_match('/^44/', $telephone) ) { ... } 
```

或者用它替换：

```
preg_replace('/^44/', '0', $telephone); 
```

您的代码可以简化为以下内容：

```
$telephone = '+44-789 56-2356 ask for larry';
$telephone = preg_replace('/[^0-9]/','',$telephone); // remove all non-numeric characters
$telephone = preg_replace('/^44/','0',$telephone);
echo $telephone;
// output: 0789562356 
```

# android - Android 2.3.4 上的异常设置 Imagebutton 视图

> ID：15276706
> 
> 赞同：2
> 
> 时间：2013-03-07T16:38:49.987
> 
> 标签：android

我一直在 Android 4.0 上运行我的应用程序，它运行良好。但是，我在运行 Android 2.3.4 的手机上对其进行了测试，应用程序崩溃了。当它尝试设置 Imagebutton 视图时，我抛出了一个异常：

```
03-07 17:21:58.789: E/AndroidRuntime(5741): FATAL EXCEPTION: main
03-07 17:21:58.789: E/AndroidRuntime(5741): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.motesclient/com.example.motesclient.ConnectActivity}: android.view.InflateException: Binary XML file line #22: Error inflating class android.widget.ImageButton
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.os.Looper.loop(Looper.java:130)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.app.ActivityThread.main(ActivityThread.java:3687)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at java.lang.reflect.Method.invokeNative(Native Method)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at java.lang.reflect.Method.invoke(Method.java:507)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at dalvik.system.NativeStart.main(Native Method)
03-07 17:21:58.789: E/AndroidRuntime(5741): Caused by: android.view.InflateException: Binary XML file line #22: Error inflating class android.widget.ImageButton
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.app.Activity.setContentView(Activity.java:1657)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at com.example.motesclient.ConnectActivity.onCreate(ConnectActivity.java:27)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
03-07 17:21:58.789: E/AndroidRuntime(5741):     ... 11 more
03-07 17:21:58.789: E/AndroidRuntime(5741): Caused by: java.lang.reflect.InvocationTargetException
03-07 17:21:58.789: E/AndroidRuntime(5741):     at java.lang.reflect.Constructor.constructNative(Native Method)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
03-07 17:21:58.789: E/AndroidRuntime(5741):     ... 22 more
03-07 17:21:58.789: E/AndroidRuntime(5741): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x2/d=0x101030e a=-1}
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.content.res.Resources.loadDrawable(Resources.java:1681)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.view.View.<init>(View.java:1961)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.widget.ImageView.<init>(ImageView.java:112)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.widget.ImageButton.<init>(ImageButton.java:85)
03-07 17:21:58.789: E/AndroidRuntime(5741):     at android.widget.ImageButton.<init>(ImageButton.java:81)
03-07 17:21:58.789: E/AndroidRuntime(5741):     ... 25 more 
```

这是图像按钮：

```
<ImageButton
     android:id="@+id/connect_button"
     android:background="?android:attr/selectableItemBackground"
     android:contentDescription="@string/connect_picture"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_gravity="center"
     android:src="@drawable/connectxml"/> 
```

这里是connectxml.xml文件，它放在drawable文件夹中

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:state_pressed="true"
            android:drawable="@drawable/connectbuttonpressed" /> <!-- pressed -->
        <item android:state_focused="true"
         android:drawable="@drawable/connectbuttonpressed" /> <!-- focused -->
        <item android:drawable="@drawable/connectbutton" /> <!-- default -->
</selector> 
```

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T17:28:43.850

您使用 api 9 (2.3) 中不存在的东西：

```
android:background="?android:attr/selectableItemBackground" 
```

您可以转到您的 android 平台文件夹并查看给定版本支持的内容。它位于：

`android-sdk\platforms\android-9\data\res\values\attr.xml`.

**重新编辑**

一个可能的解决方案是删除给出问题的行，而是添加：

```
style="@style/Custom.ImageButton" 
```

然后添加一个`styles.xml`看起来`res/values`像这样：

```
<resources>
   <style name="Custom.ImageButton" parent="@android:style/Widget.ImageButton">
       <item name="android:background">@drawable/your_own_graphic</item>
   </style>
</resources> 
```

`styles.xml`看起来像`res/values-14`这样：

```
 <style name="Custom.ImageButton" parent="@android:style/Widget.ImageButton">
       <item name="android:background">?android:attr/selectableItemBackground</item>
   </style> 
```

我很抱歉之前的建议是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:56:40.360

一切对我来说都是正确的。我会尝试只清理项目。

假设您使用的是 Eclipse：项目 -> 清理 -> 全部清理

有时 Eclipse 无法使用最新的 xml 更改更新 R.java。

# java - 从动态 Bean（DynaBean 类）获取数据

> ID：15276712
> 
> 赞同：0
> 
> 时间：2013-03-07T16:39:00.380
> 
> 标签：java, dynamic, javabeans

我有一个从 ResultSet 生成的 DynaBean

```
RowSetDynaClass resultBeans = new RowSetDynaClass(result, false);
List<DynaBean> list = resultBeans.getRows(); 
```

我想从 Java 中的一个 DynaBean 中简单地检索我的结果集的值，而不是在 JSP 页面中。我怎样才能做到这一点？我正在尝试这个：

```
DynaBean b = list.get(0);
String value = b.get("valor"); 
```

但是我遇到了例外...我应该在 b.get(????) 上放什么我的结果集是返回 2 列：“nome”、“valor”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:11:36.073

我已经使用它了： Clob clob = (Clob) dados.get("valor");

我发现我的查询返回了一个 Clob 对象。

# android - HTTP 状态 405 - 方法不允许（jax-rs 服务）

> ID：15276719
> 
> 赞同：4
> 
> 时间：2013-03-07T16:39:12.893
> 
> 标签：android, rest, jersey, tomcat7

Jax-rs 服务返回**HTTP 状态 405 - Method Not Allowed**。

**服务：**

```
@GET
@Consumes(MediaType.TEXT_HTML)
@Produces(MediaType.APPLICATION_JSON)
@Path("login")
public User Login(@QueryParam("u") String username, @QueryParam("p") String password) {
   return UserDAO.getInstance().getLogin(username,password)
} 
```

**安卓：**

```
 public static Boolean Login(User user) {
     String url = "http://myserver.com/AndroidServis/rest/login?u={u}&p={p}";
     RestTemplate restTemplate = new RestTemplate();

     HttpHeaders headers = new HttpHeaders();
     headers.setContentType(MediaType.APPLICATION_JSON);

     HashMap<String, String> params = new HashMap<String, String > ();
     params.put("u", user.getUsername().toString());
     params.put("p", user.getPassword().toString());

     HttpEntity entity = new HttpEntity(headers);

     restTemplate.getMessageConverters().add(new GsonHttpMessageConverter());
     restTemplate.getMessageConverters().add(new StringHttpMessageConverter());
     HttpEntity < Korisnici > response = restTemplate.exchange(url, HttpMethod.GET, entity,User.class, params);

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T23:44:47.100

`@Consumes`服务器在方法上添加注释是没有意义的`@GET`，因为这通常仅用于客户端向服务器发送某些内容`PUT`的`POST`请求。你能去掉这个吗？

然后也从客户端代码中删除它。

```
headers.setContentType(MediaType.APPLICATION_JSON); 
```

并且您可能需要取消注释已注释掉的行：

```
headers.set("Accept", "application/json"); 
```

这告诉服务器响应中预期的内容类型，因此必须与服务的 @Produces 匹配。

# java - Java - 当两个键映射到相同的值时返回什么？

> ID：15276720
> 
> 赞同：1
> 
> 时间：2013-03-07T16:39:16.247
> 
> 标签：java, map

在 Java 中，我理解如果两个键映射到一个值，则会由于冲突而发生线性链接。

例如：

```
￼    Map myMap= new HashMap();   //Lets says both of them get mapped to same bucket-A and
    myMap.put("John", "Sydney");//linear chaining has occured.
    myMap.put("Mary","Mumbai"); //{key1=John}--->[val1=Sydney]--->[val2=Mumbai] 
```

所以当我这样做时：

```
myMap.get("John");   // or myMap.get("Mary") 
```

由于 bucket-A 包含两个值，JVM 会返回什么？它是否将参考返回到“链”？它会返回“悉尼”吗？还是返回“孟买”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:43:52.060

当您的键具有相同的哈希码而不是当两个键映射到一个值时，就会发生线性链接。

> 所以当我这样做时： myMap.get("John"); // 或 myMap.get("Mary")

`map.get("John")`给你悉尼

`map.get("Mary")`给你孟买

> 由于 bucket-A 包含两个值，JVM 会返回什么？

如果同一个桶包含两个值，则`equals`使用键的方法来确定要返回的正确值。

值得一提的是存储 (K,V) 对的最坏情况，它们的 Key 都具有相同的 hashCode。在这种情况下，您的哈希图会降级为链表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T16:43:43.920

您的`hashCode`方法的 确定将放入哪个“桶”（又名列表，又名“线性链”）。该`equals`方法确定在发生碰撞时实际从“桶”中拾取哪个对象。这就是为什么在您打算存储在任何类型的哈希映射中的所有对象上正确实现这两种方法很重要的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:48:05.167

你的钥匙不一样。

首先是一些术语

*   **key** : 中的第一个参数`put`
*   **value** : 中的第二个参数`put`
*   **entry** : 一个`Object`同时包含键和值的

当您`put`进入`HashMap`地图时，将调用`hashCode()`密钥并计算出条目需要进入哪个哈希桶。如果这个桶中已经有东西，那么 a`LinkedList`由桶中的条目组成。

当您`get`从`HashMap`地图中调用`hashCode()`密钥并计算出从哪个哈希桶获取条目时。如果存储桶中有多个条目，则地图将沿着该`LinkedList`条目移动，直到找到具有`equals()`该键提供的键的条目。

映射将始终返回`Object`与该键绑定的条目，即条目中的值。`hashCode()`如果为不同的键返回相同（或相似）的值，则映射性能会迅速下降。

您需要使用 java 泛型，因此您的代码应该真正阅读

```
Map<String, String> myMap = new HashMap<String, String>(); 
```

这将告诉地图您希望它存储`String`键和值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:43:36.183

据我了解，地图首先解析正确的存储桶（由密钥的哈希码标识）。如果同一个bucket中有多个key，则使用equals方法在bucket中找到正确的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T16:57:04.227

查看您的示例，您感到困惑的是，您认为值是针对给定键链接的。实际上[Map.Entry](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html)对象是针对给定的哈希码链接的。键的 hashCode 为您提供了 bucked，然后您查看链接的条目以找到具有相等键的条目。

# java - getter 和 setter 并增加一个变量

> ID：15276725
> 
> 赞同：2
> 
> 时间：2013-03-07T16:39:38.180
> 
> 标签：java, setter, getter

```
public int getA() {
    return a;
}

public void setA(int a) {
    this.a = a;
} 
```

现在，如果我必须增加变量......哪一种是做的方式？

```
variables.setA(variables.getA()+1); 
```

这样 a 总是为 1。

我可以解决问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T16:41:45.447

该代码是正确的（如果冗长）。以下：

```
public class Main {

    private int a = 0;

    public int getA() {
        return a;
    }

    public void setA(int a) {
        this.a = a;
    }

    public static void main(String[] args)
    {
        Main variables = new Main();
        System.out.println(variables.getA());
        variables.setA(variables.getA()+1);
        System.out.println(variables.getA());
        variables.setA(variables.getA()+1);
        System.out.println(variables.getA());
        variables.setA(variables.getA()+1);
        System.out.println(variables.getA());
    }
} 
```

印刷

```
0
1
2
3 
```

鉴于 的冗长`variables.setA(variables.getA()+1)`，您可能希望将其包装到方法中（例如`incrementA()`或`addToA(int)`等）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T16:41:32.927

您增加变量的方式应该可行，但您也可以定义一个新方法：

```
public void incrementA(){
    a++;
} 
```

# javascript - 添加新控制器后Angularjs应用程序无法正常工作

> ID：15276730
> 
> 赞同：2
> 
> 时间：2013-03-07T16:39:56.727
> 
> 标签：javascript, angularjs, angularjs-directive, angular-ui

最初我的 controller.js 看起来像这样

```
 function MyCtrl1() {}
MyCtrl1.$inject = [];

function MyCtrl2() {
}
MyCtrl2.$inject = []; 
```

像这样的html代码

```
 <!doctype html>
<html lang="en" ng-app="myApp">
<head>
  <meta charset="utf-8">
  <title>My AngularJS App</title>
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.js"></script>
  <script src="http://angular-ui.github.com/bootstrap/ui-bootstrap-tpls-0.2.0.js"></script>
  <link rel="stylesheet" href="css/app.css"/>
</head>
<body>
  <ul class="menu">
    <li><a href="#/view1">view1</a></li>
    <li><a href="#/view2">view2</a></li>
  </ul>

  <div ng-view></div>

  <div>Angular seed app: v <span app-version></span></div>
  <div>Author is : <span app-author></span></div>

  <script src="js/app.js"></script>
  <script src="js/services.js"></script>
  <script src="js/controllers.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/directives.js"></script>
</body>
</html> 
```

这是 service.js 代码

```
 angular.module('myApp.services', []).
  value('version', '0.1')
  .value('author','Jay'); 
```

和directive.js 代码

```
 angular.module('myApp.directives', []).
  directive('appVersion', ['version', function(version) {
    return function(scope, elm, attrs) {
      elm.text(version);
    };
  }])
  .directive('appAuthor', ['author', function(author) {
    return function(scope, elm, attrs){
        elm.text(author);
    };
  }]); 
```

上面的代码工作得很好，并在 service.js 中显示`version`和配置`author`

当我修改我的 controller.js 以包含一个新的控制器时，它会停止工作，并且不会显示版本或作者。修改后的控制器代码如下

```
 function MyCtrl1() {}
MyCtrl1.$inject = [];

function MyCtrl2() {
}
MyCtrl2.$inject = [];

angular.module('myApp', ['ui.bootstrap']);
var TabsDemoCtrl = function ($scope) {
  $scope.panes = [
    { title:"Dynamic Title 1", content:"Dynamic content 1" },
    { title:"Dynamic Title 2", content:"Dynamic content 2" }
  ];
};
TabsDemoCtrl.$inject = ['$scope']; 
```

任何指示为什么这件事不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T17:48:55.717

看起来您的问题是 myApp 在这里重新声明：

```
angular.module('myApp', ['ui.bootstrap']); 
```

当我有时，我能够重现您的问题

```
angular.module('myApp', ['myApp.services', 'myApp.directives']);
angular.module('myApp', ['ui.bootstrap']); 
```

切换到

```
angular.module('myApp', ['myApp.services', 'myApp.directives', 'ui.bootstrap']); 
```

让一切再次正常工作。

# java - GWT 示例应用和 GWT 设计器：所见即所得

> ID：15276731
> 
> 赞同：0
> 
> 时间：2013-03-07T16:39:58.533
> 
> 标签：java, gwt, windowbuilder

我是 GWT 的新手。按照[GWT 文档](https://developers.google.com/web-toolkit/usingeclipse)在 Eclipse "Juno" (V4.2) 中设置 Google 插件和 GWT 设计器。使用示例代码创建了一个 Web 应用程序。它在 Firefox 中很好地运行和显示：

![浏览器中的 GWT 示例应用程序输出](../Images/3ea2c3442655b6786ec9f3c791ea1845.png)

然后我使用 WindowBuilder 打开实现 EntryPoint 的 Java 类，画布显示了一些不同的东西。输入字段标签“请输入您的姓名：”不可见，“发送”按钮位于输入字段下方，而不是右侧。截图如下：

![WindowBuilder 中的 GWT 示例](../Images/6770376dd1e5d6f05c62a2c6fbac9f96.png)

由于使用 GWT 设计器的重点是在视觉上获得正确的布局，因此看到它在示例代码中没有以所见即所得的方式工作，这有点令人不安。

问题 A：有没有办法解决这种差异？是否有一些配置文件或 HTML 或 CSS 可能需要编辑，以便设计人员的视图与示例应用程序运行时浏览器显示的内容相匹配？

问题 B：GWT 设计师在您的日常实践中是否“像宣传的那样”工作？我可以相信这个工具吗？如果没有，你会推荐什么替代品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:01:31.377

我发现 GWT 设计器是 Eclipse 平台上的一个**皮塔**工具，即使与 GWT 托管模式相比，它也将内存占用提升到了一个全新的水平！！！！！！

来自 Google 开发指南的[GWT 文章](https://developers.google.com/web-toolkit/doc/latest/DevGuideUi)列表。

**企业工作场所的首选选项**

1.  丰富的外观和感觉的 HTML/CSS/UIBinder
2.  用于复杂 gui 行为/性能的手动编码 GWT 布局和小部件。

**编辑 -** * *GWT Designer 几乎没有更新/维护** - 我一年只看到 10 次奇怪的签入。我希望我错了（谷歌团队没有更新公共 svn !!!） - [https://code.google.com/p/gwt-designer/source/list](https://code.google.com/p/gwt-designer/source/list)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T06:12:57.693

这是因为在示例项目中，Gwt 将小部件注入到现有的 html 中。因此，您在 html 中拥有一部分样式，而在呈现的 gwt 小部件中拥有第二部分。它看起来很丑。如果您只使用 gwt 样式方法（没有任何 html 样式等），设计器将是可预测的并且完全所见即所得。

# git - 在 rebase 期间我是如何丢失数据的？

> ID：15276733
> 
> 赞同：3
> 
> 时间：2013-03-07T16:40:02.263
> 
> 标签：git

以下是对几分钟前发生在我身上的事情的简短复述。一切都是好的。我现在找到了代码。我只是想知道我可能做错了什么来达到这种情况。我想从中吸取教训，以便将来再次避免。

FWIW：我最近一直在做一些变基。我通常不这样操作，我怀疑答案可能在于一些糟糕的变基。我们拭目以待。

* * *

**发现**

所以我只是换了一个分支，我记得在其中执行了一些提交。实际上，头部提交是包含我想要的更改的提交。但是我的更改不存在！

相反，只有一些变化存在。:(

经过仔细检查，我发现剩余的更改只是删除。我想就像你可能的那样，我可能没有在调用提交之前添加所有更改，这是我自己的错。

*更新：原始提交应该包含一些添加、一些删除和一些修改的文件。这个新的“重新定位”提交似乎只是删除了我所期望的内容。*

**调查**

我最近放下了一个我认为我不再需要的藏匿处。也许我的改变在那里？

我发现[了这个 SO question](https://stackoverflow.com/questions/89332/recover-dropped-stash-in-git)，它解释了我如何使用...识别所有无法访问的提交

```
gitk --all $( git fsck --no-reflog | awk '/dangling commit/ {print $3}' ) 
```

我设法找到在同一秒创建（据称）相同提交（即具有相同提交消息）的多个版本

我认为这是可以理解的，因为它们很可能是在一次或多次 rebase 操作期间生成的副本，并且可能已经给出了原始提交日期。

**那么这怎么可能呢？**

这就是有趣的地方：

其中一个提交与其他提交不同。其中一个提交包含了我所有丢失的数据。

所以我的问题是……我是怎么做到的？我是否以一种留下一半可用数据的方式重新设置基准？

任何线索\理论？

**更新：** 我在评论中被问到我采取了哪些步骤到达这里。问题是这就是问题的重点。

*我可以做些什么来创建描述匹配但内容不匹配的提交的 2 个或更多副本？*

我可以对我可能使用过的作品提出一些建议，但仅此而已。我一直在做一些简单的变基。即我访问了一个分支并执行了：

```
git rebase master 
```

我还做了一些进一步的调查，发现正确的提交确实是最早的。我用 gitK 看过，作者旁边的日期总是昨天 11:50:35。还有另一个日期（提交日期）似乎与后来的变基重合，但我发誓我只使用过......

```
git rebase master 
```

...来自给定的源分支

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:52:46.280

除了我和其他人的吹毛求疵之外，你的问题，我认为这真的相当于（我这样说没有恶意）“我在哪里，我是怎么到这里的？” 实际上是相当合理的，并且在学习使用 git 时出现了很多（甚至对于有经验的 git 用户，有时也会出现）。幸运的是，有一个 git 命令旨在回答您的确切问题。这是：

```
git reflog 
```

如果您可以发布该命令的输出（嗯，前 50 行左右），更多信息性答案可能会开始出现在该线程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:59:06.843

最近在 git list 上有一个关于 rebase 的讨论。

1.  它默认忽略合并
2.  它忽略任何已经在“上游”中的东西。删除可能已经在那里完成。

rebase 的文档有许多关于隐藏在文本中的行为的“旁白”，需要仔细阅读。

# spring - 无法在开发模式下运行 GWT。找不到元素“aop:scoped-proxy”的声明？

> ID：15276734
> 
> 赞同：0
> 
> 时间：2013-03-07T16:40:03.093
> 
> 标签：spring, gwt

GWT、Spring、Maven 和 Eclipse 表现不佳。我试图在我的本地机器上以开发模式运行（一个相当大的）项目。我能够成功构建应用程序，但无法在 Eclipse 中运行它。生产模式在使用`mvn gwt:run`.

我已将其缩小到 xsd 架构的问题。它无法`<aop:scoped-proxy />`在我的 context.xml 文件中解析。

我正在使用 GWT 2.5、Spring 3.0.5-RELEASE 和 Maven 3.0.4。我已经明确地将 spring-aop-3.0.5-RELEASE.jar 添加到我的类路径中，但仍然没有运气。

### appContext.xml 顶部

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd "
       default-init-method="init" default-lazy-init="true"> 
```

### 标准输出

```
Nested in org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: 
Line 131 in XML document from class path resource [appContext.xml] is invalid; 
nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: 
The matching wildcard is strict, but no declaration can be found for element 
'aop:scoped-proxy'.:
org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is 
strict, but no declaration can be found for element 'aop:scoped-proxy'. 
```

### 日志文件

```
[main] WARN factory.xml.XmlBeanDefinitionReader - Ignored XML validation warning
org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 
'http://www.springframework.org/schema/aop/spring-aop-2.0.xsd', because 1) could 
not find the document; 2) the document could not be read; 3) the root element of 
the document is not <xsd:schema>. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:22:31.157

我认为问题是（如日志文件中所述）：
[http](http://www.springframework.org/schema/aop/spring-aop-2.0.xsd) ://www.springframework.org/schema/aop/spring-aop-2.0.xsd 请尝试： [http ://www.springframework.org/schema/ aop/spring-aop-3.0.xsd](http://www.springframework.org/schema/aop/spring-aop-3.0.xsd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:02:00.297

我能够使用`mvn gwt:run`. 我第一次遇到问题时很接近。

`?gwt.codesvr=127.0.0.1:9997`我不知道的一件事是URL 末尾的重要性。如果没有此 GWT DevMode 实用程序，将无法跟踪用户交互。

`http://localhost:8888/index.html?gwt.codesvr=127.0.0.1:9997`

为了安全起见，我在 Eclipse 中清理并重建了 maven 项目。不确定这是否对它有影响。

# java - 如何将方法调用到主方法（程序运行但不打印问题）（作业）

> ID：15276735
> 
> 赞同：-1
> 
> 时间：2013-03-07T16:40:03.763
> 
> 标签：java

响应之前的程序，只需放置新的余额（）；public static void main 在哪里，不起作用，没有它，程序运行但神经元打印出用户问题！

```
import java.io.*;

public class cInterest {

    public static void main(String[] args)   throws IOException
    {
       //new balance ; 
    }
    public static  double balance(double principal, double rate, double years) throws IOException{

        double amount = 0;

        String input;
        BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));

        System.out.print("How much would you like to take out? ");
        input = myInput.readLine ();
        principal = Double.parseDouble (input);        

        System.out.print("Enter the interest rate: ");
        input = myInput.readLine ();
        rate = Double.parseDouble (input);

        for (int i = 1; i < years; i++) {
            amount = principal * rate * years;
            amount += principal;
        }
        return amount; //- principal;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:43:44.387

`balance`是方法，不是类，所以不能使用`new`关键字。相反，您想*调用*该方法，如下所示：

```
public static void main(String[] args)   throws IOException
{
    double balance = balance(0.0, 0.0, 1.0); // Awkward hard-coded variables! Ew!
    System.out.println(balance);
} 
```

但是，当用户要覆盖它们时，为什么要将这些变量传递给方法呢？您的`balance`方法应该只负责计算余额，而不是收集用户输入。您可以在`main`方法中做到这一点：

```
public static void main(String[] args)   throws IOException
{
    // Gather user input.
    String input;
    BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));

    System.out.print("How much would you like to take out? ");
    input = myInput.readLine ();
    double principal = Double.parseDouble (input);        

    System.out.print("Enter the interest rate: ");
    input = myInput.readLine ();
    double rate = Double.parseDouble (input);

    System.out.print("Enter the number of years: ");
    input = myInput.readLine ();
    double years = Double.parseDouble (input);

    // Now do the calculations...
    double balance = balance(principal, rate, years); // Much clearer!
    System.out.println(balance);
}

public static double balance(double principal, double rate, double years) {
    // Calculate the end balance based on the parameters, and return it.
} 
```

**更好**的办法是将用户输入的收集放入一个自己的专用方法中，但我离题太远了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:45:22.170

`balance()`您应该在某处显式调用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:46:06.163

使用`System.out.println`代替`System.out.print`，否则，您的 Stream 将不会被刷新。您可以参考[PrintStream javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html)了解更多信息。

# c# - WCF 授权

> ID：15276737
> 
> 赞同：0
> 
> 时间：2013-03-07T16:40:05.477
> 
> 标签：c#, wcf, web-services, soap

我们制作了一个管理电子钱包的网络服务，但我们不知道如何授权我们的用户。

身份验证被委托给返回 SOAP 的身份服务。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <AuthenticateUserByEmailResponse xmlns="http://services.xxxx.xx/">
      <AuthenticateUserByEmailResult>boolean</AuthenticateUserByEmailResult>
    </AuthenticateUserByEmailResponse>
  </soap:Body>
</soap:Envelope> 
```

我们已经阅读了有关 BasicHttpBinding 和 WSHttpBinding 的信息，但我们找不到类似的场景，我们只需要担心授权。

你们对如何开始有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:57:24.240

这听起来像是[Windows Identity Foundation](http://msdn.microsoft.com/en-us/library/ee748475.aspx)的场景。你需要做一些繁重的阅读，这不适合胆小的人。

Microsoft提供了此类服务的完整示例，[可供下载](http://code.msdn.microsoft.com/Claims-Aware-Web-Service-1d55facc)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:31:10.980

WIF 或 Windows Identity Foundation 是一个很好的解决方案，但如果它太重，只需使用 Roles-Based Authorization

关于 WCF 基于角色的身份验证的文章：http: [//msdn.microsoft.com/en-us/magazine/cc948343.aspx](http://msdn.microsoft.com/en-us/magazine/cc948343.aspx)

来自 Microsoft 关于 WCF 安全性的模式和实践的更一般的文章：http: [//msdn.microsoft.com/en-us/library/ff647503.aspx](http://msdn.microsoft.com/en-us/library/ff647503.aspx)

# css - CSS 选择器 SharePoint 2010

> ID：15276739
> 
> 赞同：2
> 
> 时间：2013-03-07T16:40:07.307
> 
> 标签：css, css-selectors

我有以下html结构：

```
<div class="ms-PostFooter">

<span style="">
<span style="" class="s4-clust">
<a href="#" style="">
<img src="" alt="" style="l" title="" class="imglink" longDesc="" />
</a>
</span>
</span>

<span style="">
<span class="s4-clust">
<a href="#" style="">
<img src="" alt="" style="" title="" class="imglink" longDesc="" />
</a>
</span>
</span>

<span style="">
<span class="s4-clust">
<a href="#" style="">
<img src="" alt="" style="" title="Number of Comments" class="imglink" longDesc="" />
</a>
</span>
</span>

</div> 
```

在 css 中，我将如何选择第三个标签以隐藏标题为“评论数”的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:52:28.173

```
.ms-PostFooter span::nth-child(3) img {
    display: none;
} 
```

或者这也有效：

```
img[title="Number of Comments"] {
    display: none;
} 
```

但是这些取决于您的标记/内容。最好的方法是 - 在该图像或其容器上生成一个特定的类，服务器端（如果可以的话）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:54:19.667

如果您的标题是唯一的，则有一种可能性：

```
[title="Number of Comments"]
{
    display:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:54:49.660

您可以使用以下内容：

```
div :last-child span .imglink{
   display:none;
} 
```

jsfiddle：http: [//jsfiddle.net/kGThS/1/](http://jsfiddle.net/kGThS/1/)

这可能更具体：

```
.ms-PostFooter :last-child span .imglink{
   display:none;
} 
```

jsfiddle：http: [//jsfiddle.net/kGThS/3/](http://jsfiddle.net/kGThS/3/)

要根据您在下面的评论隐藏整个最后一个跨度/链接，请使用以下命令：

```
.ms-PostFooter :last-child span{
   display:none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:42:01.153

不知何故，通过 css sharepoint 不允许我通过 css 使用此处提到的任何选择器来摆脱包含要删除的链接和图像的特定标记，所以我决定使用 jquery 来代替它，它的技巧如下：

```
$( document ).ready(function() {
$('DIV.ms-PostFooter span:nth-child(3)').css('display', 'none');
$('DIV.ms-PostFooter span:nth-child(4)').css('display', 'none');

}); 
```

感谢所有的帮助。

# slickgrid - 使用 CheckboxSelectColumn 插件时，Slickgrid 过滤功能失效

> ID：15276742
> 
> 赞同：0
> 
> 时间：2013-03-07T16:40:14.857
> 
> 标签：slickgrid

我有一个 25,000 多行的 slickgrid。我已经设置了列过滤（参见[示例](http://mleibman.github.com/SlickGrid/examples/example-header-row.html)），它工作正常并且非常快。

我现在已经添加了`CheckboxSelectColumn`插件（参见[示例](http://mleibman.github.com/SlickGrid/examples/example-checkbox-row-select.html)），虽然这有效，但它削弱了过滤的速度。一切仍然有效，只是速度慢了很多。

我尝试通过提供`RefreshHints`（参见[示例](http://mleibman.github.com/SlickGrid/examples/example-optimizing-dataview.html)）来优化过滤，但没有任何乐趣。

它只是过滤加上复选框加上大行数的组合，还是我做错了什么？

以下是相关的代码（CoffeeScript）。

**设置列过滤器**

```
setupColumnFilters:()->
    $(grid.getHeaderRow()).delegate(':input', 'change keyup', (e) ->
        columnId = $(this).data('columnId')
        if columnId?
            newVal = $.trim($(this).val())
            columnFilters[columnId] = newVal

            # Trying to optimise using RefreshHints
            newLen = newVal?.length
            oldlen = columnFilters[columnId]?.length ? 0
            isNarrowing = newLen > oldlen
            isExpanding = newLen < oldlen
            renderedRange = grid.getRenderedRange()
            dataView.setRefreshHints({
                ignoreDiffsBefore: renderedRange.top,
                ignoreDiffsAfter: renderedRange.bottom + 1,
                isFilterNarrowing: isNarrowing,
                isFilterExpanding: isExpanding
            })
            dataView.refresh()
    )

    grid.onHeaderRowCellRendered.subscribe((e, args) ->
        node = $(args.node)
        node.empty()
        id = args.column.id
        if id == '_checkbox_selector'
            node.hide()
            return
        placeholder = 'filter by ' + id
        html = '<input type="text" placeholder="' + placeholder + '">'
        $(html)
            .data('columnId', id)
            .val(columnFilters[id])
            .appendTo(node)
            .focus(()->$(this).attr('placeholder', ''))
            .blur(()-> $(this).attr('placeholder', placeholder) if $(this).val()?)
    ) 
```

**设置 CheckboxSelect 插件**

```
setupCheckboxSelect:() ->
    checkboxPlugin = new Slick.CheckboxSelectColumn({ cssClass: "slick-cell-checkboxsel" });
    columns.unshift(checkboxPlugin.getColumnDefinition());
    grid.setColumns(columns);
    grid.registerPlugin(checkboxPlugin); 
```

**过滤器功能**

```
filter: (item) =>
    grid.setSelectedRows([])
    columns = grid.getColumns()
    for columnId, filter of columnFilters
        if filter?  
            column = columns[grid.getColumnIndex(columnId)]
            field = item[column.field]
            return false unless (field? && field.toLowerCase().indexOf(filter.toLowerCase()) > -1) 
    return true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:49:57.883

哇，你为什么`grid.setSelectedRows([])`在你的过滤器中调用？！？
每当您刷新数据时，它都会被调用 25'000 次。

除了完全没有意义之外，当您使用复选框选择列时，它确实会减慢速度，因为它需要同步状态（基于选择）。

# ios - iOS：找出小数位数

> ID：15276746
> 
> 赞同：0
> 
> 时间：2013-03-07T16:40:21.270
> 
> 标签：ios, objective-c, cocoa

我有一些来自服务器的数字，如何知道数字中有多少个小数位？我的意思是如何知道 2.43 在昏迷后有 2 个数字，3.145 - 3 个数字，2.0003 - 4 个数字。提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T17:44:03.047

假设您使用的是数字，请将其更改为字符串。去掉小数点，得到最后一个对象和长度。

例子：

```
NSNumber *number = [NSNumber numberWithFloat:3.902];

[number.stringValue componentsSeparatedByString: @"."].lastObject.length; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:53:00.627

我会这样做：

```
NSNumber *number = [[NSNumber alloc] initWithFloat:3.902];
NSUInteger i = [[number stringValue] rangeOfString:@"."].location;
long numberOfDigits = [[number stringValue] length]-(i+1);
NSLog(@"%ld", numberOfDigits); 
```

> 3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:43:39.413

1.  转换为字符串。
2.  找到小数点范围。
3.  从小数点位置减去字符串长度并加一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T17:19:49.050

您的意思是您正在从流中的服务器检索数据吗？

如果您以流的形式获取数据，则应在其前面加上字符串的长度，这样您就可以知道需要多少个地方。

所以在服务器上，首先转换为字符串，然后确定长度，或者使用其他建议的方法，然后添加字符串的长度，然后先发送该数字。

# javascript - 显示隐藏的数据表后，标题列未与值对齐

> ID：15276753
> 
> 赞同：1
> 
> 时间：2013-03-07T16:40:38.040
> 
> 标签：javascript, jquery, datatables

我使用带有 DataTables 组件的网格。

我想在两个网格之间切换。第二个在启动时隐藏。

当我显示隐藏网格时，列标题与这样的列值不对齐 ![在此处输入图像描述](../Images/87b9624d367cff7ee09369d8439c0e43.png)

你可以在现场[看到](http://live.datatables.net/ilafap/6/edit#javascript,html,live)

您可以使用顶部的收音机更改显示的网格

一个主意 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:02:16.340

一个纠正您的显示错误但并不真正吸引人的想法：这个想法是您的显示在对列进行排序后变得正确，因此您可以`myTable.fnSort([[0, 'asc']]);`在数据表初始化后通过添加（按升序对第一列进行排序）绕过它。

[看这里](http://live.datatables.net/ilafap/4/edit#javascript,html,live)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:13:53.183

更多信息会有所帮助，但您的 jquery 没有格式化您的标题。显示更多代码或手动格式化它们或让 jquery 退出这种方式。可能欺骗jquery的一种方法是让这些标题始终可见，但让你的文本字体等于你的背景并在需要时更改字体颜色

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T13:44:44.103

隐藏表格时，jQuery DataTables 无法正确对齐列和标题。在应用 dataTables 时临时显示表格：

```
$(document).ready(function() {
  Table1 = $('#Table1').dataTable({
    "bSort": false,
    "sScrollY": "400px",
    "bJQueryUI": true,
    "bPaginate": false
  });

  $('#Table1Container').hide();
  $('#Table2Container').show();

  Table2 = $('#Table2').dataTable({
    "bSort": false,
    "sScrollY": "400px",
    "bJQueryUI": true,
    "bPaginate": false
  });

  $('#Table2Container').hide();
  $('#Table1Container').show();

  $("#rdTable1").click(function() {
    $('#Table2Container').hide();
    $('#Table1Container').show();
  });

  $("#rdTable2").click(function() {
    $('#Table1Container').hide();
    $('#Table2Container').show();
  });       

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-04T16:03:30.830

从 DataTables 1.10 开始，可以通过在显示表格时调用该`columns.adjust()` [方法](https://datatables.net/reference/api/columns.adjust())来解决此问题。

# xml - WIX 按组件上的模式和条件过滤组件或基于属性的自定义操作设置

> ID：15276754
> 
> 赞同：0
> 
> 时间：2013-03-07T16:40:39.507
> 
> 标签：xml, wix, windows-installer, heat

嗨，我有以下 Heat.EXE 的示例组件输出。并且能够创建包含所有组件的 MSI 包。基本上我想在安装期间根据安装程序的参数（如 Dev 或 Prod 或 UAT 或 TEST）过滤以下文件。

即 msiexec -i prog.msi ENVPROPERTY="DEV" 或 msiexec -i prog.msi DEVPROPERTY=TRUE。

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="INSTALLFOLDER">
            <Directory Id="dir58BD578D96681B39732F12EBF1B57BD3" Name="copyconfigfile" />
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <ComponentGroup Id="Copyconfig">

 <Component Id="cmpBE90E7A6F30556F23DBCB608C0DB1CB3" Directory="dir572C565E70B3AEE6F0C29D3EE9056E9B" Guid="{912836FE-2289-405F-B65E-E0DF24E9F414}">
                <File Id="fil9FB26501E72D582B49D01D1C17297C67" KeyPath="yes" Source="C:\Workspaces\Chatra\Website\CopyConfigFile\App_Config\ConnectionStrings.DevBuild.config.xml" />
  </Component>

 <Component Id="cmp6B5A7C518B7BE0889FC54F31700D9BFE" Directory="dir572C565E70B3AEE6F0C29D3EE9056E9B" Guid="{9733D8C9-60D3-4B24-B07A-53EB5B53D69B}">
              <File Id="fil2936F4B979A59701F9D3FBAF1AED470D" KeyPath="yes" Source="C:\Workspaces\Chatra\Website\CopyConfigFile\App_Config\ConnectionStrings.ProductionBuild.config.xml" >
                <CopyFile Id="Copy_Conn" DestinationProperty="DestFilesFolder" DestinationName="ConnectionStrings.config" />
              </File>
 </Component>

 <Component Id="cmp0ECCAA5CAC3B3DD35D12C896CB3B2A5C" Directory="dir572C565E70B3AEE6F0C29D3EE9056E9B" Guid="{7A2D7A4A-FFA7-4AFC-8985-C35A19E54370}">
                <File Id="fil4B00AD7679571D03A8678128738DE0A8" KeyPath="yes" Source="C:\Workspaces\Chatra\Website\CopyConfigFile\App_Config\ConnectionStrings.TestBuild.config.xml" />
 </Component>

 <Component Id="cmp044A32CEBC53EDFFB293831A711D14D8" Directory="dir572C565E70B3AEE6F0C29D3EE9056E9B" Guid="{B79DD704-FD08-4769-8A98-FF666DB84F12}">
                <File Id="fil633E499D1A8430527DEE1A888B50CE9A" KeyPath="yes" Source="C:\Workspaces\Chatra\Website\CopyConfigFile\App_Config\ConnectionStrings.UATBuild.config.xml" />
 </Component>

  </ComponentGroup>
    </Fragment>
    <Fragment>
        <DirectoryRef Id="dir58BD578D96681B39732F12EBF1B57BD3">
            <Directory Id="dir572C565E70B3AEE6F0C29D3EE9056E9B" Name="App_Config" />
        </DirectoryRef>
    </Fragment>
</Wix> 
```

# svn - 将文本文件添加到颠覆存储库——它认为是二进制文件

> ID：15276756
> 
> 赞同：5
> 
> 时间：2013-03-07T16:40:40.873
> 
> 标签：svn

我正在尝试向 SVN 添加一个文本文件，它有不同的想法。使用 tortoise SVN 并右键单击“添加..”我收到一条不愉快的消息，告诉我该文件具有二进制 mime 类型属性。它不会将其添加到存储库中。

我想不出为什么会这样，因为它是我一次创建的几个文本文件（本例中为 SQL 存储过程列表）之一。（实际上，三个文件给了我这个消息，而另外两个文件被添加就好了。）

当我尝试通过更改文件的 mime 属性时，`svn propset svn:mime-type text/plain`我收到一个警告，指出该文件不受版本控制，这当然是 100% 正确的。

我该怎么做才能让 SVN 将这些文件识别为文本，并将它们添加到存储库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:50:14.687

您应该执行以下步骤（使用 TortoiseSVN）来检查失败的根源：

*   打开你的`TortoiseSVN > Settings`，然后打开那里`General > Subversion configuration file > Edit`。
*   在该文件中搜索字符串`"prc"`（不带双引号）。
*   如果您发现这样的规则：`*.prc = svn:mime-type=application/octet-stream`，这就是添加该属性的原因。
*   不可能`autoprops`来自其他来源（有关详细信息，请参阅[Subversion wiki](http://wiki.apache.org/subversion/Inheritable-Ignores-AutoProps)）。
*   只是为了确定：您是否安装了客户端挂钩？这是我能想到的唯一对你有用的东西。
*   如果一切都失败了，请询问您的 Subversion 管理员是否有服务器挂钩（如预提交挂钩），即 1\. 设置属性和 2\. 检查属性。但这听起来很荒谬。

尝试执行以下步骤：

1.  将文件`test.prc`（包含一些内容）添加到您的目录（本地副本）。
2.  `TortoiseSVN > Add`在该文件上使用。
3.  然后打开该文件的属性。如果有属性，你的配置中应该有 autoprops，或者是一个改变 props 的钩子。
4.  如果没有属性（应该是正常的），尝试将该文件提交到服务器。
5.  如果现在效果很好，...
6.  再次检查该文件的属性（它们可能已更改）。

顺便说一下，有关您的 Subversion 服务器版本、TortoiseSVN 客户端版本的一些信息会有所帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-07T14:33:44.047

我曾经使用 VS2013 生成的 resource.h 文件。

我在编辑器中打开文件并将编码从“UCS-2 LE BOM”更改为 UTF-8。

有时这很容易

# google-maps-api-3 - openlayers 关闭鸟瞰图

> ID：15276758
> 
> 赞同：0
> 
> 时间：2013-03-07T16:40:57.803
> 
> 标签：google-maps-api-3, openlayers

我正在使用 Openlayers 和 Google Satellite 分层，我正在尝试关闭鸟瞰图。我找到了这个建议：

> 看起来您将不得不直接戳底层 GMap 对象-我认为应该这样做： layer.mapObject.setTilt(0) 奇怪的是，我对 Google 文档的阅读表明您必须明确转向如果你想要它就打开它，而 OpenLayers 并没有这样做，但似乎仍然可以得到它。

问题是我刚刚开始使用 Openlayers 和 javaScript。有人可以直接在代码中给我看吗？我的是：

```
var gsat = new OpenLayers.Layer.Google(
    "Google Satellite",
    {type: google.maps.MapTypeId.SATELLITE, numZoomLevels: 22});
    map.addLayer(gsat); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:00:43.257

好吧，这似乎有效：[小提琴](http://jsfiddle.net/nwwSB/)归结为`ghyb.mapObject.setTilt(0);`

# php - PHP 奇怪的行为：假或真返回假

> ID：15276760
> 
> 赞同：1
> 
> 时间：2013-03-07T16:41:03.620
> 
> 标签：php

我在 PHP 5.4.3 中遇到了一个奇怪的错误

```
var_dump(false OR true); // boolean true // OK

$a = false OR true;
var_dump($a); // boolean false // !!????

$a = true OR false;
var_dump($a); // boolean true // OK

$a = false || true;
var_dump($a); // boolean true // OK 
```

有谁知道第二个结果是怎么来的！？

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T16:43:32.640

`or`然后`and`具有*较低的* [优先](http://php.net/manual/en/language.operators.precedence.php)级`=`。

这实际上是：

```
($a = false) OR true;
($a = true) OR false;
$a = (false || true); 
```

请注意，这就是人们倾向于使用`or die()`构造的原因（实际上，真的，真的应该是`or trigger_error()`'s, `die`'s on errors 在代码中没有位置）：如果左手赋值的结果（`$a`在这种情况下的结果值) 是`false`，执行右手边。

比较：

```
$a = false or print("what is going on?");
// prints 'what is going on?', $a === false
$a = true or print("what is going on?");
// prints nothing, $a === true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:43:52.763

它被称为运算符的优先级。

看[这里](http://php.net/manual/en/language.operators.precedence.php)

所以

```
$a = false OR true; 
```

是相同的

```
($a = false) OR true; 
```

ETC...

# html - 电子邮件背景颜色问题

> ID：15276766
> 
> 赞同：2
> 
> 时间：2013-03-07T16:41:14.750
> 
> 标签：html, css, lotus-notes, html-email, newsletter

我正在创建时事通讯并使用十六进制代码#25292C 设置背景颜色；当我发送时事通讯时，消息显示正常。当我将时事通讯转发给其他人时**，时事通讯背景会覆盖整个电子邮件。**我想阻止电子邮件获得时事通讯背景颜色。我使用 lotus notes 作为我的电子邮件客户端。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T22:25:00.797

这是您所追求的：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title></title></head>
<body style="margin: 0px; padding: 0px background-color: #FFFFFF;" bgcolor="#FFFFFF"><!-- << bg color for forwarding // main bg color >> --><table bgcolor="#323232" width="100%" border="0" align="center" cellpadding="0" cellspacing="0" style="padding:30px;"><tr><td>

<!-- CENTER FLOAT -->
<table width="600" border="0" valign="top" align="center" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF" style="padding:30px;"><tr><td>

main panel                   

</td></tr></table>
<!-- /CENTER FLOAT -->

</td></tr></table></body></html> 
```

当您将电子邮件转发给第二个收件人时，背景为白色（或您设置的任何内容）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-14T14:48:37.733

这对我有用

```
 <body style="background-color:#333333;  min-height:1000px;"  bgcolor="#333333">
      <!--[if gte mso 9]>
      <v:background xmlns:v="urn:schemas-microsoft-com:vml" fill="t">
        <v:fill type="tile" src="bg.jpg" color="#333333"/>
      </v:background>
      <![endif]-->
    ......
    </body> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T17:12:49.463

你在使用***表格***吗？我已经这样做了，并且对 FWD 电子邮件没有任何问题（我的重点是 Outlook/gmail/yahoo/aol）

```
<body bgcolor="#25292C">
<div style="background-color:#25292C;"> 
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#25292C">
  <tr>
    <td>
      your stuff
    </td>
  </tr>
</table>
</div>
</body> 
```

...但话又说回来...很多电子邮件提供商（不确定您关注什么...Outlook iEX）无法在其邮件正文中编写（或转发）复杂的 HTML 邮件。您可以通过从消息菜单/栏中选择“作为附件转发”或“重定向”来解决此问题，这些将完整地发送消息（并在某些收件人的电子邮件程序中显示内联）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T15:41:25.537

Outlook 用户首选项可以直接从您的电子邮件中删除正文样式。将您的内容包装在标签中并将颜色应用于 EACH 以最大限度地与电子邮件客户端兼容通常是最佳实践。

这是一种痛苦，但它有效。还要记住不要使用缩短的颜色，例如：#F00。Outlook 使这些变黑。

简单的电子邮件格式：

```
<table>
<tr>
<td (width) (bgcolor) (style including font, font-size, color and if applicable, line height)> content </td>
</tr>
</table> 
```

# jquery - Jquery getJSON 不起作用，但 ajax 可以

> ID：15276782
> 
> 赞同：2
> 
> 时间：2013-03-07T16:41:48.397
> 
> 标签：jquery, asp.net, ajax, json

我有一个困扰着我的问题，尽管因为我有一个解决方法，它并没有阻止我。我正在尝试对我在 aspx 页面上的页面方法进行 ajax 调用。我需要取回 json，但`GetGender`永远不会调用 WebMethod，除非我使用`$.ajax`调用。

所以，这有效：

```
 $.ajax({
        type: "POST",
        url: "StudentFunctions.aspx/GetGender",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(msg) {
            var data = google.visualization.arrayToDataTable(msg.d);
            var options = {
              title: 'Gender',
              height: '5000px'
            };

            var chart = new google.visualization.PieChart(document.getElementById("chart_div"));
            chart.draw(data, options);
        }
    }); 
```

但是，以下都不起作用：

```
$.get("StudentFunctions.aspx/GetGender", function(msg) { 
        alert(msg)
     }, "json");

$.post("StudentFunctions.aspx/GetGender", function(msg) { 
        alert(msg)
     }, "json");

$.getJSON("StudentFunctions.aspx/GetGender", function(msg) { 
        alert(msg)
     }); 
```

上面的三个函数甚至不会触发 .Net 函数，但是如果我从`$.post`and中删除“json”部分`$.get`，它们至少会调用后端函数，但当然不会返回 json。

另外，另一个我不理解的问题我觉得很愚蠢，但是当我在`$.ajax`函数中得到 json 响应时，那个对象（这里称为`msg`）是什么样的？`msg.d`对我有用，但我不知道为什么。某处有规范吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:28:10.840

好吧，它“只是行不通”，但至少我可以告诉你原因。如果您下载 jquery 的开发（非压缩）版本并深入研究 post 函数，您会发现在内部它只是一个帮助函数来调用有效的 ajax 函数。但是，它*不*包含 contentType，也不允许您设置它！这是代码：

```
 return jQuery.ajax({
        url: url,
        type: method,
        dataType: type,
        data: data,
        success: callback
    }); 
```

如您所见，没有 contentType。您可以通过从 ajax 方法中删除 contentType 来复制相同的失败。所以你有它 - 但至少你知道除了稍微漂亮的代码之外你没有丢失任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:43:08.707

这是假设从 jQuery 调用的函数是一个`WebMethod`.

根据[Scott Gu](http://weblogs.asp.net/scottgu/archive/2007/04/04/json-hijacking-and-how-asp-net-ajax-1-0-mitigates-these-attacks.aspx)的说法，`WebMethod`要求 AJAX 请求是 HTTP POST（除非禁用此保护），并包含内容类型 HTTP header `application/json`。如果该 HTTP 标头丢失，ASP.NET 将拒绝该请求。

由于该要求，`$.get()`和`$.post()`不起作用，因为它们是便利方法，并不总是包含所需的内容类型。所以你需要使用`$.ajax()`, 所以内容类型的 HTTP 头总是可以被发送。

# ruby - Ruby RPG 战斗机制

> ID：15276784
> 
> 赞同：0
> 
> 时间：2013-03-07T16:41:52.637
> 
> 标签：ruby

前几天我发布了一个关于我正在开发的用 Ruby 编写的类似 Zork 的 RPG。但是，我无法让战斗机制和升级系统发挥作用。基本上，我想要的是一个类似 Zork 的世界界面，即一些描述你周围环境的文本。这不是问题。

问题是，我想有一种方法来生成生物，并且无论你是否与它们战斗都让它成为可选的。例如，如果您输入诸如“fight cow”之类的内容，您将开始使用您可用的任何武器打击牛，并在杀死它时获得经验或物品或其他东西。或者你可以看看它，或者试着把它捡起来，或者不管它。关于如何完成这项工作的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:19:47.467

这是一个不可能广泛的问题。

以下是一些潜在资源：

*   [http://www.bitwisemag.com/2/Adventures-In-Ruby](http://www.bitwisemag.com/2/Adventures-In-Ruby)（及其以下部分）。
*   [http://lanyrd.com/2010/scotrug-may/symk/](http://lanyrd.com/2010/scotrug-may/symk/)
*   [http://alltom.com/pages/room](http://alltom.com/pages/room)
*   [http://www.dzone.com/snippets/slightly-better-ruby-text](http://www.dzone.com/snippets/slightly-better-ruby-text)

等等。

好的 SO 问题会有特定的问题。冒险游戏机制可以通过多种方式实现；目前尚不清楚您实际上遇到了什么问题。

# jsf-2 - FacesComponent 的 PostConstruct/构造函数

> ID：15276785
> 
> 赞同：2
> 
> 时间：2013-03-07T16:41:54.107
> 
> 标签：jsf-2, facelets

我已经创建了我想在构造函数/后构造函数中初始化的 FacesComponent。问题是那里`getAttributes()`是空的。下面是示例。

```
@FacesComponent("articleComponent")
public class ArticleFacesComponent extends UINamingContainer {

    private Article article;

    public ArticleFacesComponent() {
        Object idObj = getAttributes().get("articleId"); // I want to get article id to initialize object but getAttributes() is empty
        ...
        article = em.find(Article.class, id);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T01:49:18.673

您需要在`encodeAll()`方法中执行工作。它在渲染响应期间调用，当组件即将被渲染时。

```
@Override
public void encodeAll(FacesContext context) throws IOException {
    // Here.

    super.encodeAll(context);
} 
```

鉴于您从 扩展`UINamingContainer`，您很可能正在为[复合组件创建支持组件](https://stackoverflow.com/tags/composite-component/info)。在这种情况下，本文应该为您提供有用的入门知识：[具有多个输入字段的复合组件](http://balusc.blogspot.com/2013/01/composite-component-with-multiple-input.html)。

* * *

**与具体问题无关**，访问组件中的数据库是一种气味。而是将一个完整的`Article`实例作为组件值而不是它的 ID 传递。组件/渲染器应该只处理基于模型的前端 (HTTP/HTML) 内容，而不是后端 (DB/SQL) 内容。您应该*准确地*为组件提供它需要使用的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-04T08:27:49.237

就像@BalusC 说的那样。但是，如果您使用 PrimeFaces，则必须覆盖该`encodeBegin()`方法。否则你可能会覆盖`encodeAll()`.

# cpuid - 如何调用 CPUID 叶 7 和子叶 0？

> ID：15276788
> 
> 赞同：1
> 
> 时间：2013-03-07T16:42:02.160
> 
> 标签：cpuid

我已经在 Fedora 上下载并安装了 yum install cpuid。你能告诉我如何调用 CPUID 叶 7 和 subleaf 0 吗？我想检查该平台上可用的一些功能。我真的很感谢你的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T02:02:35.477

_cpuid_count 可用于获取带有子叶的函数 7 和 0xD。

定义在 cpuid.h

```
#define __cpuid_count(level, count, a, b, c, d)
    __asm__ ("cpuid\n\t"
             : "=a" (a), "=b" (b), "=c" (c), "=d" (d)
             : "0" (level), "2" (count)) 
```

请注意，_cpuid_count 不检查该功能是否受支持。您可以在 cpuid.h 中进行类似于 __get_cpuid 的检查。这可能应该添加到 stdc 库中。

```
static __inline int
__get_cpuid_count (unsigned int __level, unsigned int __count,
           unsigned int *__eax, unsigned int *__ebx,
           unsigned int *__ecx, unsigned int *__edx)
{
    unsigned int __ext = __level & 0x80000000;
    if (__get_cpuid_max (__ext, 0) < __level)
        return 0;

    __cpuid_count (__level, __count, *__eax, *__ebx, *__ecx, *__edx);
    return 1;
} 
```

# ruby-on-rails-3 - 任意模型的通用路径

> ID：15276791
> 
> 赞同：0
> 
> 时间：2013-03-07T16:42:08.957
> 
> 标签：ruby-on-rails-3, routing

在我的步骤定义中，我想为任意模型创建一个命名路由的路径，如下所示：

```
Given(/^a new "(.*?)" form$/) do |model|
  path = send("new_admin_#{model.downcase}_path".to_sym)
  visit path
end 
```

用作

```
Given a new "Image" form
Given a new "User" form 
```

我记得过去为此使用了一个辅助方法，它允许我传递模型名称和一些附加选项，例如操作和对象或 ID。但我再也找不到那个了。这适用于 Rails 3.2.x。

有这么“神奇”的帮手吗？如果是这样，它是什么？如果没有，是否有创建任意模型路径的通用模式？

# jquery - 如何从另一个加载一个 JavaScript 文件，然后运行一些代码，作为单个原子操作

> ID：15276792
> 
> 赞同：1
> 
> 时间：2013-03-07T16:42:09.073
> 
> 标签：jquery, javascript

简短版：“如何`#include`在 JavaScript 中合成语句？”

长版：

我有一个 JavaScript 代码文件，我希望能够将其添加到一般网页中，而不会对这些页面施加任何特定条件，而不仅仅是它们必须包含 <script> 标记来加载我的文件。

我的文件包含依赖 jQuery 的代码，因此我需要从我的文件中加载 jQuery。我通过在 DOM 中插入一个 <script> 标签来做到这一点。问题是我需要在加载 jQuery 时*立即*运行一些代码，这样我才能确保，如果页面已经加载了旧版本的 jQuery，它不会被我新加载的 jQuery 覆盖（即我我参考`$`然后调用`jQuery.noConflict(true);`）。

为了尝试实现这一点，我向动态插入的 <script> 元素添加了一个 onload/onreadystatechange 处理程序。这基本上是可行的，*但*问题是如果底层页面有任何等待页面准备就绪（即`$.ready(...)`），则此代码会在 <script> 元素本身的处理程序之前运行，因此当该代码与我一起运行时，事情会中断新加载的 jQuery 版本，而不是页面加载和代码预期的原始版本。

```
 var script = document.createElement("script");
  script.src = "//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js";
  script.type = "text/javascript";
  script.onload = script.onreadystatechange = function() {
    if (this.readyState && this.readyState != "loaded" &&
      this.readyState != "complete")
      return;
    var $ = jQuery;
    jQuery.noConflict(true);
    do_my_stuff($);
  }
  document.getElementsByTagName("body")[0].appendChild(script); 
```

请注意，我无法控制从中调用我的代码的网页，因此“使页面加载正确版本的 jQuery”不是解决方案。此外，简单地将 jQuery 内联到我的代码文件中并不是一个很好的解决方案，因为 jQuery 相当大（并且仅使用必要的功能重新构建它仍然会导致文件相当大）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:48:51.893

您正在包含一个覆盖某些全局（即`jQuery`/ `$`）的脚本。这通常被认为非常草率，您正在经历原因。

一个简单的解决方案是修改您的 jQuery 以使用另一个命名空间，例如`$my_version_of_jquery`. IE。避免名称冲突。

一个更复杂的解决方案会通过适当的依赖注入来做一些事情，但这对于您的用例来说可能太复杂了。

* * *

乱：

```
var my_framework = {};
my_function () {
    my_framework.some_function();
} 
```

依赖注入：

```
manager.add_dependency("my_framework", function () {
    return {};
});
manager.run_with_dependencies(
  [ "my_framework", "some_other_dependency" ], // list of dependencies
  function my_function(my_framework, some_other_dependency) { // instances of dependencies
      my_framework.some_function();
  }
}); 
```

如果这是您想要的，这将允许您加载同一框架的两个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:31:18.913

在研究了如何`jQuery.getScript()`工作之后，看起来最好的解决方案是`XMLHTTPRequest`将所需的脚本加载到一个字符串中，然后简单地加载`eval()`它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:40:24.307

如果我正确理解了您的问题，您需要满足以下条件：

*   确保在执行您自己的 JavaScript 代码之前加载 jQuery
*   由于您只需要一个脚本依赖项，因此必须异步加载 jQuery
*   如果已经加载了某个版本的 jQuery，请不要覆盖全局引用

最简单的解决方案是运行初始测试以查看全局 jQuery 对象是否存在于全局范围内：

```
if ( !window.jQuery ) {
    // jQuery isn't there, so load your jQuery version asynchronously
} else {
    // jQuery is already there, so use the existing version
} 
```

要使您现有的解决方案正常工作，您需要使用不同的全局参考。因此，`var $ = jQuery`您将使用`var $myJq = jQuery.noConflict()`. 注意：传递 `true`将从全局范围中删除任何现有的 jQuery 引用。

加载两个单独的版本并不是非常有效，所以如果可以的话，我建议使用上面的条件来决定要做什么。但是，如果版本对您自己的代码很重要，那么第二个解决方案应该可以正常工作。

# c++ - 使用 RapidXML 和 c++ 从 XML 文件构建树

> ID：15276796
> 
> 赞同：1
> 
> 时间：2013-03-07T16:42:17.243
> 
> 标签：c++, recursion, xml-parsing, binary-tree, rapidxml

对于我的 c++ 类的项目，我应该解析和 xml 文件并从中构建二叉树。该文件比这更密集，但布局如下：

```
<?xml version="1.0" encoding="utf-8"?>
<MyJournal>
    <species>
        <name>Sea Creature</name>
        <species>
            <name>Fish</name>
            <species>
                <name>swordfish</name>
            </species>
            <species>
                <name>grouper</name>
            </species>
        </species>
        <species>
            <name>Mammal</name>
            <species>
                <name>dolphin</name>
            </species>
            <species>
                <name>whale</name>
            </species>
        </species>
    </species>
    <species>
        <name>Land animal</name>
        <species>
            <name>Mammal</name>
            <species>
                <name>dog</name>
            </species>
            <species>
                <name>cat</name>
            </species>
        </species>
        <species>
            <name>Bird</name>
            <species>
                <name>blue jay</name>
            </species>
            <species>
                <name>robin</name>
            </species>
        </species>
    </species>
</MyJournal> 
```

我很难弄清楚如何解析这些数据以便我可以构建一棵树。我在想我可以对每个分支使用递归，但我只能得到一个孩子。有人暗示使用队列将数据放入树结构中，但我不太确定如何使用队列遍历树的所有级别。我觉得递归是解析每个分支数据的最简单方法，但我就是不知道如何正确实现递归方法。这是我尝试使用的方法。我先传入根节点：

```
void loop(xml_node<> *species)
{
    Node t1 = *new Node();
    xml_node<> * name_node = species->first_node("name");
    if(name_node != 0)
    {
        t1.setName(name_node->value());
        cout << name_node->value() << endl;
    }

    xml_node<> * child = species->first_node("species");
    if(child != 0)
    {
        cout << child->first_node("name")->value() << endl;
        if(child->first_node()->next_sibling() != 0)
        {
            loop(child->first_node()->next_sibling());
            xml_node<> * child2 = child->next_sibling();
            cout << child2->first_node()->value() << endl;
            loop(child2->first_node()->next_sibling());
        }
    }

} 
```

它只通过每个节点的第一个子节点返回 海洋生物 鱼 箭鱼 陆地动物 哺乳动物 狗

我真的很感激任何正确方向的指示。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:09:52.603

要覆盖此文件中的所有节点，您需要查看每个节点的*子*节点及其*兄弟*节点。你似乎明白这一点。

您的递归方法是获取孩子的可行选择。它似乎正在工作。每个递归调用`loop`都会深入到子级。（谁告诉你使用“队列”可能意味着“堆栈”......并且递归隐式使用堆栈。调用堆栈。）

想念的是兄弟姐妹。并且由于递归被用于深入到 XML 树中，这可能不会通过更多的递归来解决。

查看代码的此代码部分：

```
xml_node<> * child = species->first_node("species");
if(child != 0)
{
    cout << child->first_node("name")->value() << endl; 
```

这是您找到第一个兄弟姐妹的地方，例如`"swordfish"`.

尝试将该`if`语句更改为循环，以便在所有兄弟节点上执行包含的逻辑，而不仅仅是第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:10:45.393

我知道这个问题已经得到解答，但我只想提供一个有用的提示。

您可以使用堆栈/队列来解析此 XML 文件来构建您的“树”结构，而不是使用递归。

如果要坚持递归，请确保所有子级都指向同一个父级，否则树结构将是错误的。

# javascript - 如何使用 requirejs 加载 koLite？

> ID：15276797
> 
> 赞同：0
> 
> 时间：2013-03-07T16:42:18.613
> 
> 标签：javascript, knockout.js, requirejs, kolite

这是来自 knockout.dirtyFlag.js

```
;(function (ko) {
        ko.DirtyFlag = function (objectToTrack, isInitiallyDirty, hashFunction) {

            hashFunction = hashFunction || ko.toJSON;

            var
                _objectToTrack = objectToTrack,
                _lastCleanState = ko.observable(hashFunction(_objectToTrack)),
                _isInitiallyDirty = ko.observable(isInitiallyDirty),

                result = function () {
                    var self = this;

                    self.isDirty = ko.computed(function () {
                        return _isInitiallyDirty() || hashFunction(_objectToTrack) !== _lastCleanState();
                    });

                    self.reset = function () {
                        _lastCleanState(hashFunction(_objectToTrack));
                        _isInitiallyDirty(false);
                    };

                    return self;
                };

            return result;
        };
    })(ko); 
```

在我的模型中，我有一个这样的定义设置：

```
define([
    "lib/knockout",
    "lib/knockout.dirtyFlag"
],
function(ko) {
...
  self.dirtyFlag = new ko.DirtyFlag([
} 
```

基本上我收到一个错误，说 DirtyFlag 未定义。

我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:17:02.217

好吧，看起来我已经成功了，所以我将发布我的发现：

在我的 requirejs 配置中，我添加了这个：

```
shim: {
"lib/knockout/knockout.dirtyFlag": {
    deps: [
        "lib/knockout/knockout"
    ],
    init: function (ko) {
        var self = this;
        ko.DirtyFlag = self.ko.DirtyFlag;
        return ko;
    }
} 
```

我对javascript或requirejs不是很熟悉，但init似乎将dep放在“ko”中，然后我可以在ko上创建一个DirtyFlag。self.ko.DirtyFlag 是实际的 knockout.dirtyFlag javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:46:44.727

您需要 lib/knockout 和 lib/knockout.dirtyFlag。你两个都需要吗？

如果两者都需要，请尝试：

```
define([
    "lib/knockout",
    "lib/knockout.dirtyFlag"
],
function(ko, kodf) {
...
  self.dirtyFlag = new kodf.DirtyFlag([
} 
```

你也可以试试：

```
define([
    "lib/knockout",
    "lib/knockout.dirtyFlag"
],
function(k) {
...
  self.dirtyFlag = new ko.DirtyFlag([
} 
```

正如我认为您在 require 和 knockout.dirtyFlag 中定义 ko 一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T04:27:13.013

我已经用定义方法包装了 kolite 类。下面的示例带有命令，但对其他人来说也是一样的。

```
requirejs.config({
paths: {
    knockout: 'Scripts/libs/knockout/knockout-2.2.1.debug',
    command: 'Scripts/libs/knockout/knockout.command'
},

shim: {
    knockout: {
        exports: 'ko'
    },
    command: {
        deps: ['knockout'],
        exports: 'ko'
    }
}); 
```

并包装命令

```
define(['knockout'], function(ko) {
  ... // command original code
  return ko;
) 
```

在我的模块中

```
define(['command'], function (ko) {
    var doYourStaff = 0;
    return doYourStaff;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-28T11:09:03.557

我们现在为所有三个库添加了对 RequireJS 的支持，您可以使用[master](https://github.com/CodeSeven/KoLite)的最新版本。

# android - 有没有办法加密从 Android 或 iOS 发送的电子邮件信息？

> ID：15276800
> 
> 赞同：-4
> 
> 时间：2013-03-07T16:42:24.857
> 
> 标签：android, ios, email, encryption

我的一个朋友想要一个应用程序，用户可以在其中填写他们的 Android 或 iPhone 上的信息（只是姓名、联系信息等基本信息），然后将这些信息发送到电子邮件地址。

他还希望加密电子邮件，以便重要信息在到达目标电子邮件之前不会以某种方式被滥用。iOS 编程中的 Android 中是否有特定命令会在发送前加密详细信息，还是自动加密？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:26:10.777

在电子邮件世界中，您可能需要研究 S/MIME。现在，在你尖叫着逃跑之后，你需要想出一个不同的计划。接受客户的要求，忽略他们的技术建议。然后解决问题。

[在 iOS 上使用 S/MIME 发送加密邮件](http://support.apple.com/kb/HT4979?viewlocale=en_US&locale=en_US)。

所有电子邮件都没有加密是有充分理由的。这是一袋伤害。

# html - 在 Video.js 中动态更改源不会在 Flash 中播放

> ID：15276803
> 
> 赞同：3
> 
> 时间：2013-03-07T16:42:30.773
> 
> 标签：html, flash, video.js

我正在制作一个带有 mp4 文件的播放列表。播放列表是动态加载的，并使用 Video.js 连续播放。只要闪光灯后备不启动，它就可以正常工作。如果使用闪光灯，它将播放第一个剪辑，然后更改源，最后冻结，一帧或两帧进入第二个剪辑。我没有使用任何特殊的 Flash 播放器，而是集成在 Video.js 中的那个。我在网上看到有人遇到同样的问题但没有答案。这是一个真正的问题还是我做错了什么？

这是我更改来源的地方：

```
thePlayer.addEvent("ended", function () {
    var vp = this;
    vp.src({ type: "video/mp4", src: getSource() });
    vp.load();
    vp.ready(function () {
        vp.play();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:14:03.670

我相信这是一个错误。我发现的解决方法是在收到事件“loadeddata”时再次调用 play()，即

```
thePlayer.addEvent("loadeddata", function () {
    thePlayer.play();
}); 
```

# objective-c - 在 Obj-C 中除以定义的常量不起作用

> ID：15276806
> 
> 赞同：0
> 
> 时间：2013-03-07T16:42:36.923
> 
> 标签：objective-c, c-preprocessor, modulo, nsrange

如果我写

```
#define ANOTHER_CONSTANT 200
#define MYDIVISOR 1000/ANOTHER_CONSTANT 
```

然后是一个方法

```
- (void)result {
    NSRange range = [@"--BB-------A----" rangeOfString:@"A" options:NSBackwardsSearch];
    int rest = range.location % MYDIVISOR;
    NSLog(@"Rest is %i", rest);
} 
```

无论 A 出现在哪里，输出始终是 rest 为 0。我已经通过将 MYDIVISOR 存储到中间整数变量中来解决它，但我想知道为什么它不适用于预定义的常量。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:44:58.717

这是因为您没有在`MYDIVISOR`定义周围加上括号：

```
#define MYDIVISOR (1000/ANOTHER_CONSTANT) 
```

没有括号，预处理器替换后的代码将如下所示：

```
int rest = range.location % 1000 / ANOTHER_CONSTANT; 
```

因为`%`和`/`具有相同的优先级并且从左到右应用，编译器将生成获得除以余数的代码，`1000`然后快速将结果除以`200`，这肯定不是您所期望的。

一般来说，总是在整个宏周围加上括号是个好主意。对于带有参数的类函数宏，最好也为每个参数加上括号。

# actionscript-3 - 我可以在 AS3 中为 htmltext img 标签着色吗？

> ID：15276810
> 
> 赞同：1
> 
> 时间：2013-03-07T16:42:55.887
> 
> 标签：actionscript-3, actionscript, htmltext, tint

我可以为 AS3 中包含在 htmlText 中的库中的图像着色（使用 flash cs5）吗？

在舞台上我会使用：

```
var cTint:Color = new Color();
cTint.setTint(0xff00ff, .25);
image.transform.colorTransform = cTint; 
```

htmlText 代码（cobj.img 是带有库 AS 链接名称的字符串）：

```
op.htmlText = "<img src='"+cobj.img+"' width='40' height='40' vspace='0' />"; 
```

如果没有，有没有办法使用舞台上的图像来代替？所以我可以创建一个图像，把它放到舞台上，然后放到 htmlText 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:02:30.307

从图像创建一个实例，对其进行着色并将其添加到您的文本中！假设您的图像是库中的 MovieClip。

```
var libraryImage:MovieClip = new LibraryImage();
var cTint:Color = new Color();
cTint.setTint(0xff00ff, .25);
libraryImage.transform.colorTransform = cTint;

op.htmlText = "<p> </p><img src='libraryImage' width='40' height='40' vspace='0' />";
//add empty string at the start and you dont need to concatenate the string. 
```

# bus - 可寻址性 vs 地址空间 vs 地址总线

> ID：15276814
> 
> 赞同：1
> 
> 时间：2013-03-07T16:43:06.660
> 
> 标签：bus, address-space

您如何根据地址空间确定可寻址性？如何根据可寻址性确定地址总线的大小？前任。一台机器的寻址能力是32位，地址总线的大小是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:33:34.703

地址总线将 CPU 与主存储器连接起来。因此，如果地址总线有 32 位，则主存的最大大小为 2^32 字节，即 4 GB。
地址总线传输一个物理地址，因此本例中的物理地址空间为 4 GB。但是CPU会生成虚拟地址，而虚拟地址就是虚拟地址空间。虚拟地址必须由内存管理单元映射到物理地址。原则上，可以将一个小的虚拟地址空间映射到一个大的物理地址空间（就像之前在 PDP11 计算机中所做的那样），但现在大多数情况下，一个较大的虚拟地址空间映射到一个较小的物理地址空间，例如从 64 位 CPU将 2^64 字节的虚拟地址空间连接到具有 32 位地址总线的物理内存，因此大小为 4 GB。
因此，如果您有一个没有内存管理的原始系统，并且您希望 GPU 可以生成的所有地址都是现有的主内存地址，那么您的地址总线必须具有与 CPU 用于寻址的位数相同的位数，例如 32 位。
但在实际系统中，虚拟 CPU 地址基本上独立于物理内存地址。

# javascript - GoogleMaps api InfoWindow 插入 Html 标签

> ID：15276815
> 
> 赞同：0
> 
> 时间：2013-03-07T16:43:09.813
> 
> 标签：javascript, html, google-maps

如何`HTML`在信息窗口中引入标签？我知道如何显示文本，但我想设置样式并使用段落`<p>`和 div对其进行排列`<div>`。

这是我显示信息窗口的函数：

```
function getInfoWindowEvent(marker) {
    infowindow.close()
    infowindow.setContent("This is where my HTML content goes. But how?");
    infowindow.open(map, marker);
    } 
```

应该有类似的东西，`infowindow.setContent('<div>'+"some text"+'</div>')`但我不确切知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:56:27.490

您可以向 中添加标签，`infowindow.setContent()`以便您自己回答问题。

```
function getInfoWindowEvent(marker) {
  infowindow.close()
  infowindow.setContent("<div>Some text</div>");
  infowindow.open(map, marker);
} 
```

# c# - 从 ASP.NET 动态数据中的另一个字段模板访问动态字段

> ID：15276816
> 
> 赞同：1
> 
> 时间：2013-03-07T16:43:12.820
> 
> 标签：c#, asp.net, dynamic-data, asp.net-dynamic-data

有没有办法从另一个动态字段模板访问动态字段的值？

例如，假设在我的模型中我有这样的东西：

```
//auto generated by my data context
partial class Foo
{
    public string Name { get; set; }
    public bool ShouldGenerateNameDynamically { get; set ; }
}

[MetadataType(typeof(FooMetadata))]
partial class Foo{}

class FooMetadata
{
    [UIHint("DynamicName")]
    public object Name { get; set; }
} 
```

因此，根据`ShouldGenerateNameDynamically`我想*启用或禁用*的值，并将计算值分配给`Name`我的自定义**`DynamicName`**模板中的字段`PreRender`或`OnDataBinding`事件

那么有没有办法通过动态数据模板发送事件或从字段模板访问另一个字段？

# aptana - Aptana 3.2.2 预览不打开内部浏览器（ubuntu 12.10 64 位）

> ID：15276817
> 
> 赞同：1
> 
> 时间：2013-03-07T16:43:15.430
> 
> 标签：aptana, ubuntu-12.04, aptana3, xulrunner

在我的 Ubuntu 12.10 中安装 Aptana Studio3（版本 3.3.2）后，我发现预览按钮无法正常工作。意思是，我无法在打开的选项卡中看到预览。好像内部浏览器不工作。 ![在此处输入图像描述](../Images/7312f6e582b9c7ab9f15b00a8364a637.png)

取而代之的是，我获得了我的 index.html 的副本，这是我要预览的文档。 ![在此处输入图像描述](../Images/3ae3d76c0ec25720072f96fe5e4c71fa.png)

我发现 Xulrunner 没有安装在我的系统中，因此我怀疑这可能是问题所在。

已下载 Aptana 所需的 XULrunner 版本，带有

wget -O xulrunner.deb [http://launchpadlibrarian.net/70321329/xulrunner-1.9.2_1.9.2.17%2Bbuild3%2Bnobinonly-0ubuntu1_amd64.deb](http://launchpadlibrarian.net/70321329/xulrunner-1.9.2_1.9.2.17%2Bbuild3%2Bnobinonly-0ubuntu1_amd64.deb)

但是当我尝试安装这个包时，我收到了一个依赖错误，要求输入 ibhunspell-1.2-0

```
xulrunner-1.9.2 depends on libhunspell-1.2-0 
```

我将感谢您帮助解决这个问题。我在这里错过了什么吗？

最后，建议从哪里获取丢失的软件包（libhunspell-1.2-0 ppa 或任何可靠的来源）以及任何具体的安装说明（如有必要）。

提前谢谢了

**更新**

已安装软件包，但问题仍然存在。[我从debian.org](http://packages.debian.org/squeeze/amd64/libhunspell-1.2-0/download)获得了 libhunspell-1.2-0_1.2.11-1_amd64.deb 成功安装后，我继续安装 xulrunner.deb 一切都好！现在他们都在那里......但是......内部浏览器仍然无法正常工作

如果附近有任何来自 Aptana 或对此事有任何经验的人，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:53:22.160

**这是 Aptana 3.2.2 的报告问题**（实际版本 2013 年 3 月）

**解决方案**：恢复到 3.2.x 版本或等到 3.4.x 可用（这里已经修复）

**详细信息**

经过多次检查和研究，我发现实际版本 3.3.2 存在报告问题

**问题标记为：**

> Aptana Studio APSTUD-7636 **无法显示预览（嵌入式 WebKit 浏览器）**

这可以在 [appcelerator 问题跟踪器](https://jira.appcelerator.org/browse/APSTUD-7636)中看到，其中说明了以下内容

> **预期结果：**
> 
> 预览应该像以前版本的 Aptana 一样打开。在更新到 3.3.1 之前，预览版在 Aptana 3.2.X 中正常工作。

这已针对目前（2013 年 3 月）我无法获得的版本 3.3.4 进行了更正。所以我恢复到从[appacelerator wiki下载的 3.2.2](https://wiki.appcelerator.org/display/tis/Reverting+to+a+Previous+Version#RevertingtoaPreviousVersion-AptanaStudio3.2.2)

完整包名：**Aptana_Studio_3_Setup_Linux_x86_64_3.2.2.zip**

**我安装并且预览正常工作**

所以：在版本 3.4.x 不可用之前，请保留这个旧版本 3.2.2 我希望我的研究对其他人有用。

# mysql - 查找并列出脚本中访问的所有 MySQL 表

> ID：15276818
> 
> 赞同：4
> 
> 时间：2013-03-07T16:43:16.040
> 
> 标签：mysql, sql, parsing, search, find

我们正在重组我们的数据库，我们需要找到在我们的 PHP 脚本中引用的所有表。我正在考虑使用 SQL 解析器，但我需要知道表所在的特定文件。它需要`contacts`在以下两种情况下都找到表，然后列出脚本位置。

```
SELECT * FROM contacts WHERE...
SELECT * FROM `contacts` WHERE... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:47:07.700

试试 PHPStorm。它有一个称为“数据库工具”的功能。配置完成后，您可以使用“查找用法”功能来跟踪项目中的所有表引用

更多信息[在这里](http://blog.jetbrains.com/webide/2012/11/sql-support-and-database-tools/)

# c++ - QtCreator std::cout 和输出窗格

> ID：15276819
> 
> 赞同：2
> 
> 时间：2013-03-07T16:43:16.117
> 
> 标签：c++, qt-creator

当我在 QtCreator 中运行控制台应用程序时，输出（和输入 - std::cout、std::cin）是通过 xterm 完成的（我的操作系统是 debian）。如何使输出显示在 QtCreator 的输出窗格中而不是在 xterm 窗口中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:36:20.057

来自 Qt Creator 网站：

> 应用程序输出
> 
> 应用程序输出窗格显示程序执行时的状态以及调试输出。

[http://doc.qt.digia.com/qtcreator/creator-quick-tour.html](http://doc.qt.digia.com/qtcreator/creator-quick-tour.html)

“应用程序输出”窗口看起来不像您想象的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-08T05:12:32.020

您应该为此使用 QDebug() 函数。它的用法与 std::cout 几乎相同。看下面的例子：

```
float coordinate = 3.41;
qDebug() << "Custom coordinate type:" << coordinate; 
```

这将在 QtCreator 的输出窗格中输出：

> 自定义坐标类型：3.41

不要忘记在您的包含块中包含此语句：

`#include <QDebug>`

有关更多信息，请查看此链接：[http ://doc.qt.io/qt-5/qdebug.html](http://doc.qt.io/qt-5/qdebug.html)

# php - 为什么我不能用 jquery 将 json 字符串发送到 php？

> ID：15276823
> 
> 赞同：0
> 
> 时间：2013-03-07T16:43:33.573
> 
> 标签：php, jquery, ajax, json, jplayer

我正在尝试存储以下数据，取自 html

```
 title:"Tempered Song",
  artist:"Miaow",
  mp3:"http://www.jplayer.org/audio/mp3/Miaow-01-Tempered-song.mp3",
  oga:"http://www.jplayer.org/audio/ogg/Miaow-01-Tempered-song.ogg",
  poster: "http://www.jplayer.org/audio/poster/Miaow_640x360.png" 
```

我的html代码是：

```
<a class="add-music" data-title="Las Voces" data-artist="" href="audios/song-little.mp3">Add to List</a>
<a class="download-music" href="audios/song-little.mp3">Download</a>

<a class="add-music" data-title="Las Voces del Bosque" data-artist="" href="audios/song-little.mp3">Add to List</a>
<a class="download-music" href="audios/song-middle.mp3">Download</a>

<a class="add-music" data-title="Las Bosque" data-artist="" href="audios/song-little.mp3">Add to List</a>
<a class="download-music" href="audios/song-big.mp3">Download</a> 
```

我的代码 jquery 是：

```
 $( document ).ready(function() {
 $('.add-music').click(function() {
    $.ajax({
        'type':'POST',
        'data':fuction() {
          var songNew = JSON.stringify({
            title: $(this).attr('data-title'),
            artist: $(this).attr('data-artist'),
            mp3: $(this).attr('href'),
          });
        });
        datatype: 'json',
        url: 'session.php',
        async: true,
        cache:false
        });
    });
 }); 
```

但它不起作用，有什么办法可以让这个更好更清洁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:51:02.893

您的数据的构建方式存在问题。使用类似下面的东西：

```
'data': JSON.stringify({
      title: $(this).attr('data-title'),
      artist: $(this).attr('data-artist'),
      mp3: $(this).attr('href'),
 }), 
```

这会将一个 json 编码的字符串传递给帖子正文中的服务器。如果您希望将 vars 视为标准 post vars，请跳过 json 编码步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:48:46.583

修复多个语法错误：

```
$(document).ready(function () {
     $('.add-music').click(function () {
         $.ajax({
             type: 'POST',
                 data: function () {
                 var songNew = JSON.stringify({
                     title: $(this).attr('data-title'),
                     artist: $(this).attr('data-artist'),
                     mp3: $(this).attr('href')
                 });
                return songNew;
             },
             datatype: 'json',
             url: 'session.php',
             async: true,
             cache: false
         });
     });
 }); 
```

也许更好：

```
 $(document).ready(function () {
     $('.add-music').click(function () {
         var songNew = JSON.stringify({
             title: $(this).attr('data-title'),
             artist: $(this).attr('data-artist'),
             mp3: $(this).attr('href')
         });
         $.ajax({
             type: 'POST',
             data: songNew,
             datatype: 'json',
             url: 'session.php',
             async: true,
             cache: false
         });
     });
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T03:31:48.207

最后效果很好

```
$(document).ready(function () {
     $('.add-music').click(function () {
         var songNew = JSON.stringify({
             title: $(this).attr('data-title'),
             artist: $(this).attr('data-artist'),
             mp3: $(this).attr('href')
         });
         var songIE = {json:songNew};
         $.ajax({
             type: 'POST',
             data: songIE,
             datatype: 'json',
             url: 'session.php',
             async: true,
             cache: false
         });
     });
 }); 
```

谢谢4所有

# python - Django：如何禁用模型中的排序

> ID：15276825
> 
> 赞同：8
> 
> 时间：2013-03-07T16:43:36.600
> 
> 标签：python, django

假设在 Meta 类中描述了一个具有默认排序的模型

```
class People(models.Model):
    first_name  = models.CharField(max_length=100)
    last_name   = models.CharField(max_length=100)
    middle_name = models.CharField(max_length=100)

    class Meta:
        ordering = (last_name, first_name) 
```

有没有办法获得无序查询集

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-07T16:47:32.043

您只需添加 .order_by() 即可覆盖

例如：

```
People.objects.all().order_by() 
```

这将确保 Meta 排序被覆盖。

# javascript - 未捕获的类型错误：无法读取属性 - 虽然属性存在

> ID：15276826
> 
> 赞同：1
> 
> 时间：2013-03-07T16:43:36.783
> 
> 标签：javascript

```
var sorted = DocumentListData.Documents.sort(function (a, b) {
    var nameA = a.Document.toLowerCase(),
        nameB = b.Document.toLowerCase();

    return nameA.localeCompare(nameB);
});

for (var i = 0, len = sorted.length; i < len; i++) {

    if (sorted[i].Document=== 'abc') {
        sorted.splice(i, 1);
    }

    if (sorted[i].Document=== 'xyz') {
        sorted.splice(i, 1);
    }
} 
```

关于这里的错误是什么，我只是想了一个小时。尽管 Document 属性存在，但它抛出我 Document 是未定义的。

`Uncaught TypeError: Cannot read property 'Document' of undefined`. 当我删除它时`sorted.splice(i,1)`，它可以工作并且没有错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:46:43.853

您正在修改一个正在迭代的数组。 `splice(i,1)`删除第 i 个元素。当您拼接排序后的数组时，您正在删除元素，因此您最终会超过数组的长度，因为循环会到达数组的原始长度。 `sorted[i]`然后是未定义的，你会得到你描述的错误。

通常，以这种方式修改您当前正在迭代的数组绝不是一个好主意。如果您必须这样做，请确保包括 if 检查以查看它`i`不是`>=`数组的当前长度。但是在这里使用 while 循环可能更合适。

```
var counter =0;
while(counter < sorted.length) {
var doc = sorted[counter].Document;
  if (doc === 'abc' ||doc === 'xyz') {
    sorted.splice(counter, 1);
  }
  else{
   counter++;
  }
} 
```

### 还有一些想法

1.  `document`是 javascript 浏览器环境中预定义的变量，一般 JS 有一个约定，大写的变量只用于构造函数。所以`Document`可能不是一个很好的属性名称选择。

2.  如果您不需要支持旧版本的 IE，您还可以查看[Array.Prototype.filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)作为一种更清洁的方式来做您想做的事情

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:45:37.227

如果`Document`最后一个元素的 是`abc`，它将在第一个`if`条件下被删除。

`sorted[i]`将成为`undefined`（因为你已经删除了最后一个元素），当第二次`if`运行时，你会得到你描述的错误。

您可以使用以下方法解决此问题`else if`：

```
if (sorted[i].Document=== 'abc') {
    sorted.splice(i, 1);
} else if (sorted[i].Document=== 'xyz') {
    sorted.splice(i, 1);
} 
```

# java - Vaadin 7 中应用程序类的替换

> ID：15276832
> 
> 赞同：4
> 
> 时间：2013-03-07T16:43:47.003
> 
> 标签：java, vaadin, vaadin7

我猜 Application 类已从[Vaadin](https://www.vaadin.com/) 7中删除，`setMainWindow()`不再起作用。

```
public class MyApplication extends Application {   //ERROR coz there's no Application class
    public void init() {
        Window mainWindow = new Window("My Application");
        setMainWindow(mainWindow);          //Error setMainWindow not defined
        mainWindow.getContent().setSizeFull();

        MyComposite myComposite = new MyComposite();
        mainWindow.addComponent(myComposite);
    }
} 
```

虽然上面的代码在 Vaadin 6 中有效，但在 Vaadin 7 中无效。有谁知道如何解决这个问题？用什么类代替应用程序？请帮忙

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T17:12:05.123

# 新`UI`班级

[`com.vaadin.ui.UI`](https://www.vaadin.com/api/com/vaadin/ui/UI.html)您应该在[Vaadin 7](https://vaadin.com/vaadin7)中进行扩展。此类表示显示 Vaadin 应用程序的 Web 浏览器窗口/选项卡（或[门户视口）的整个内容区域。](https://vaadin.com/book/-/page/portal.html)每个 Vaadin 应用程序都有一个 UI 实例；每个打开的其他窗口也都有一个 UI 实例。

有关更多信息，请查看 wiki 页面，[从 Vaadin 6 迁移到 Vaadin 7](https://vaadin.com/wiki/-/wiki/Main/Migrating+from+Vaadin+6+to+Vaadin+7)。

该指南中的第一个示例显示了 Vaadin 6 和 7 中的最小应用程序，如下所示。

# 瓦丁 7

版本 7 应用程序扩展[`UI`](https://vaadin.com/api/7.3.1/com/vaadin/ui/UI.html)类。

```
import com.vaadin.server.VaadinRequest;
import com.vaadin.ui.*;

@Theme("mytheme")
public class MyApplicationUI extends UI {

    @Override
    protected void init(VaadinRequest request) {
        VerticalLayout view = new VerticalLayout();
        view.addComponent(new Label("Hello Vaadin!"));
        setContent(view);
    }
} 
```

# 瓦丁 6

版本 6 应用程序扩展[`Application`](https://vaadin.com/api/6.8.9/com/vaadin/Application.html)类。

```
import com.vaadin.Application;
import com.vaadin.ui.*;

public class V6tm1Application extends Application {
    @Override
    public void init() {
        Window mainWindow = new Window("V6tm1 Application");
        Label label = new Label("Hello Vaadin!");
        mainWindow.addComponent(label);
        setMainWindow(mainWindow);
        setTheme(“mytheme”);
    }

} 
```

# jquery - div z-index 恢复为“自动”

> ID：15276833
> 
> 赞同：-1
> 
> 时间：2013-03-07T16:43:48.960
> 
> 标签：jquery, css, z-index

我正在使用 jQuery 将两个重叠的 div 附加到容器 div (class='content')。我想对两个子 div 进行深度排序：
javascript：

```
$('.content').append('<div id="activePage"></div>');
    var pageContainer = $('#activePage');
    pageContainer.addClass("activePage").css('top', 136);
    pageContainer.append('<div id="pageBacking"></div>');
    $('#pageBacking').addClass("pageBacking");

    pageContainer.append('<div id="introLogo"></div>');
    $('#introLogo').append('<img src="file://<path to image here>/image.png" />');
    $('#introLogo').addClass("activePageContent");          
    console.log("backing z-index = "+$('#pageBacking').css("z-index"));
    console.log("intro logo z-index = "+$('#introLogo').css("z-index"));
    console.log("intro logo class = "+$('#introLogo').attr("class")); 
```

的CSS：

```
.pageBacking {
    width: 736px;
    height: 562px;
    position: absolute;
    border-radius: 30px;
    opacity: 0.9;
    background: #01AEF0;
    z-index: 1;
}

.activePageContent {
    z-index: 2;
} 
```

console.logs 说后备 z-index 是“1”，介绍徽标 z-index 是“auto”。intro logo 类返回为“activePageContent”，那么为什么 introLogo div z-index 不是 2？任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:49:08.447

您可以包含容器`.content`div 的 css 吗？

此外，您似乎从未指定`position: absolute;`for ，`#introLogo`因此它将忽略`z-index`。

为了跟进，我建议更改：

```
.activePageContent {
    z-index: 2;
} 
```

到：

```
.activePageContent {
    position: absolute;
    z-index: 2;
} 
```

# delegates - Xcode - 如何使用委托方法来隐藏 - 取消隐藏按钮

> ID：15276838
> 
> 赞同：0
> 
> 时间：2013-03-07T16:43:56.383
> 
> 标签：delegates, uibutton, hidden, xcode4.6

我想知道如何使用委托方法将按钮从隐藏更改为未隐藏。我以前没有使用过应用程序代表，它们看起来真的很混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:19:17.400

好的，你有**VC1 -> VC2**

您必须使 VC1 中的按钮对 VC2 中`buttonTohide`的操作隐藏`(someAction)`

1.在header中添加委托协议定义

```
 @protocol CustomDelegate <NSObject>
    -(void)hideUnhidebutton:(BOOL)value;
    @end 
```

2.**在 VC1.h 中将**VC1 设为委托接收者

```
@interface VC1<CustomDelegate> 
```

3.**在VC1.m中** 实现执行buttonhide的方法

```
-(void)hideUnhidebutton:(BOOL)value
{
[self.buttonTohide setHidden:value];

} 
```

4.**在VC2中** 添加委托变量作为属性

```
@property (nonatomic, strong) id<CustomDelegate> delegatePpty; 
```

**在 VC2.m**中，您必须在 VC1 中隐藏按钮，因此调用委托方法

```
-(void)someAction
{
    [self.delegatePpty hideUnhidebutton:YES];//Call the delegate method to execute
} 
```

它会为你隐藏按钮。快乐的编码:)

# php - 通过 Web 平台管理器安装了 azure PHP sdk 但无法使用 api

> ID：15276844
> 
> 赞同：0
> 
> 时间：2013-03-07T16:44:14.637
> 
> 标签：php, azure, sdk

我已经通过 IIS Web 平台管理器安装了 azure PHP SDK。但我无法使用 API。

像这样调用 API 后：

```
<?php

require_once "vendor/autoload.php"; 

echo 'Azure test';

?> 
```

我收到以下错误：

HP 警告：require_once(vendor/autoload.php) [function.require-once]：无法打开流：第 3 行的 C:\inetpub\wwwroot\azure.php 中没有这样的文件或目录 PHP 致命错误：require_once() [function.require]：在第 3 行的 C:\inetpub\wwwroot\azure.php 中打开所需的 'vendor/autoload.php' (include_path='.;C:\php\pear') 失败

我不确定它为什么要寻找梨包。

知道为什么它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T06:32:04.893

正如 hfcorriez 所说的那样。我认为您只需将梨包添加到“include_path”中，您的 auto_load 类就会调用它们。

# sql - Google 电子表格：用于添加更多行的 SQL 查询

> ID：15276849
> 
> 赞同：1
> 
> 时间：2013-03-07T16:44:22.607
> 
> 标签：sql, google-sheets

如果我想使用 sql 查询将大约 2000 行从原始 google 电子表格导入另一个。在尝试导入 2000 行之前，我首先必须手动继续在工作表中添加/增加行数。

示例 sql 查询，

=QUERY('Experts'!A:Z,"选择 A,C,M 其中 M <=date """&text(H3,"yyyy-mm-dd")&""" and L='Yes' ")

无论如何，我是否能够直接使用此查询，而无需首先手动增加行数以容纳导入的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:10:14.310

您不需要手动添加行，查询功能会为您完成。

# java - Cassandra.AsyncClient 上的顺序执行

> ID：15276851
> 
> 赞同：1
> 
> 时间：2013-03-07T16:44:29.060
> 
> 标签：java, asynchronous, cassandra, thrift

我正在尝试为我的应用程序使用 Cassandra.AsyncClient，我有两个调用 .set_keyspace 和 .system_add_column_family。一个片段是这样的，

```
Callback<Cassandra.AsyncClient.set_keyspace_call> c0 = new Callback<Cassandra.AsyncClient.set_keyspace_call>();
client.set_keyspace(this.keyspace, c0);
Callback<Cassandra.AsyncClient.system_add_column_family_call> c1 = new Callback<Cassandra.AsyncClient.system_add_column_family_call>();
client.system_add_column_family(cfDef, c1); 
```

我得到了：

```
java.lang.IllegalStateException: Client is currently executing another method: org.apache.cassandra.thrift.Cassandra$AsyncClient$set_keyspace_call 
```

Callback 是 AsyncMethodCallback 的一个实现，它除了打印结果之外什么都不做。我碰巧通过让线程在调用之间等待来解决它

```
long _t = System.currentTimeMillis();
while (System.currentTimeMillis() - _t < 500) {}; 
```

但是有没有一种更干净、更优雅的方式来做这件事，或者我可以用 AsyncMethodCallback 做一些改变？我在一些博客上读到：

```
while (cb.getResult() == null) {  } 
```

getResult 是将结果保存在回调中，但这似乎也不优雅。

# ruby-on-rails - 在 sum 函数中将 nil 视为零

> ID：15276853
> 
> 赞同：24
> 
> 时间：2013-03-07T16:44:31.400
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个有很多项目的卖家模型。

我想获得卖家所有商品的总售价。

在seller.rb 我有

```
def total_item_cost 
  items.to_a.sum(&:sale_price)
end 
```

*如果所有物品都有*销售价格，这很好用。
但是，如果它们尚未售出，`sale_price`则为零并且`total_item_cost`休息。

在我的应用程序中，`sale_price`可以是零或零。

在我的`total_item_cost`方法中，如何将`nil`值视为零？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-07T17:09:50.363

```
items.map(&:sale_price).compact.sum 
```

或者

```
items.map(&:sale_price).sum(&:to_i) 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-03-07T16:50:26.203

一种方法是：

```
items.to_a.sum { |e| e.sale_price.to_i } # or to_f, whatever you are using 
```

`#to_f`和之类的方法`#to_i`会`nil`变成`0`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T16:46:51.787

拒绝零值。`items.to_a.reject{|x| x.sales_price.nil?}.sum(&:sale_price)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-24T22:10:28.900

假设 sales_price 是数据库中的一列：

```
items.sum(:sales_price) 
```

# ios - 标签在 iOS5 中出现尺寸过大

> ID：15276855
> 
> 赞同：0
> 
> 时间：2013-03-07T16:44:34.463
> 
> 标签：ios, xcode, ios5, ios6, uilabel

我正在为 ios5 和 ios6 创建一个应用程序。我有一个标签，它在 iOS6 中正确显示，如下所示：

![在此处输入图像描述](../Images/a31928a909a500796ef83638ce606f17.png)

iOS5 中的相同标签，如下所示：

![在此处输入图像描述](../Images/30a8fc70b91cc910ffc8aa8f640dd62d.png)

可能是什么原因？

在 xib 文件中设置的属性是 1) 换行：自动换行 2) autoshrink：最小字体大小 5 并缩小字母间距 3) 启用的行数：4

我究竟做错了什么？需要一些指导。谢谢

# python - Python：我可以记录我的结果对应的时间吗？

> ID：15276868
> 
> 赞同：0
> 
> 时间：2013-03-07T16:45:21.033
> 
> 标签：python, time, position

我已经设置了一个扭摆，这样电脑鼠标在旋转时会记录它的位置。我的程序会打开一个窗口，当鼠标在其中移动时，会记录 x 和 y 坐标。

唯一的问题是，这给了我一个位置与位置的关系图，但我想要位置与时间的关系，以便我粗略地得到一个阻尼简单谐振子类型的图形，我可以在其中测量振荡之间的时间段。

有没有办法做到这一点？

我的代码很简单

```
from Tkinter import *

def printMotionEvents(event):
    #print "mouse coords: %i x %i" % (event.x, event.y)
    print  event.x, event.y

t = Tk()
t.bind('<Motion>', printMotionEvents)
t.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:48:00.390

您可以使用诸如[`time.time()`](http://docs.python.org/2/library/time.html#time.time)获取当前时间之类的功能，并将样本与坐标一起记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:43:21.633

有许多方法可以获取当前时间。出现的一些问题是：

1.  对时区差异的适应能力。解决方案可能是使用 UTC 时间。在切换到夏令时或从夏令时切换期间，有时可能会担心不使用 UTC。
2.  如果粗略的 NTP 调整可能会妨碍应用程序，则对 NTP 调整的弹性。另一方面，缺乏精细的 NTP 调整也可能会妨碍应用程序。
3.  对数值溢出的弹性。这些可能必须被检测到，特别是如果范围不足以用于应用。
4.  与您的 Python 版本、操作系统类型和内核版本的兼容性。

您可能希望检查`time`和`datetime`模块以找到最适合您的方法。

这个答案在*社区 wiki*中，允许用户自由地改进它。

# c++ - gdb 调试远程核心转储

> ID：15276869
> 
> 赞同：5
> 
> 时间：2013-03-07T16:45:21.850
> 
> 标签：c++, debugging, gdb, remote-debugging

我有一个服务器在`C++`我无法直接访问的生产环境中崩溃。崩溃生成了一个巨大的核心转储 ~34G，我无法在本地复制。我需要分析核心转储，但不知道如何在不复制它的情况下完成。我尝试`gdbserver`在目标上运行，但它不将核心文件作为参数，并且似乎只适用于从主机调试正在运行的远程应用程序。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:14:43.523

> 我需要分析核心转储，但不知道如何在不复制它的情况下完成。

你不能。您需要将核心转储放到可以运行 GDB 的位置。

> 我无法通过 ssh 连接到远程机器，但可以要求系统管理员为我运行 gdbserver 之类的东西，但他无法分析和调试核心文件。

您不需要系统管理员来分析任何内容。您只需要让他运行一系列 GDB 命令，并将输出发送给您。例如

```
where
thread apply all where
info registers
disas 
```

... 将使您了解问题的方式*很长*，并且您的系统管理员将花费不到 5 分钟的时间。

> 我仍然需要解压缩它才能在 gdb 上运行它，我不想在我的本地机器上这样做。

另外，和你的经理谈谈。您的开发设置*不合理*。您必须能够在本地分析生产崩溃，这意味着您必须能够使用足够强大的机器。

# php - CakePHP 错误验证

> ID：15276871
> 
> 赞同：0
> 
> 时间：2013-03-07T16:45:24.730
> 
> 标签：php, html, cakephp

我有一个有验证的 cakephp 表单。验证本身有效，但是当单击提交后出现错误时，它只会产生一些文本。

为什么我没有颜色。例如，它的意思是用红色显示错误。

控制器

```
 <div class="users form">
            <?php echo $this->Form->create('Ticket'); ?>
                <fieldset>
                    <legend><?php echo __('Purchase'); ?></legend>

                        <?php
                            echo $this->Form->input('first_name');
                            echo $this->Form->input('last_name');
                            echo $this->Form->input('email');
                            echo $this->Form->input('phone');
                            echo $this->Form->input('date', array('options'=> $dates));
                            echo $this->Form->input('quantity', array('options' => $maxAmount, 'default' => '1'));
                        ?>
                </fieldset>
                    <?php   
                        echo $this->Form->end(__('Purchase')); 
                    ?>
            </div> 
```

模型

```
 public $validate = array(
    'first_name' => array(
        'rule'     => '/^[a-zA-Z]{1,}$/i',
        'message'  => 'Alphabets only',
        'required' => true
    ),
    'last_name' => array(
        'rule'     => '/^[a-zA-Z]{1,}$/i',
        'message'  => 'Alphabet only',
        'required' => true
    ),
    'phone' => array(
        'rule'     => 'numeric',
        'message'  => 'numbers only please',
        'required' => true
    ),
    'email' => array(           
        'rule'    => 'email',
        'message' => 'Your email is not valid',
        'required' => true

    ),
    'quantity' => array(
        'rule'     => 'numeric',
        'message'  => 'numbers only please',
        'required' => true
    )
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:20:15.957

您是否在 default.ctp 中包含样式表？如果您从 default.ctp 布局中删除了默认的 CakePHP 样式表，则默认颜色将不再存在。

您需要在布局中再次包含 CakePHP 样式表（在这里您可以看到它在原始 default.ctp 中的情况：[https ://github.com/cakephp/cakephp/blob/master/app/View/Layouts/default .ctp#L33](https://github.com/cakephp/cakephp/blob/master/app/View/Layouts/default.ctp#L33) )

或者在样式表中创建自己的 CSS 样式。您可以使用默认 CakePHP 样式表中的样式作为示例；

[https://github.com/cakephp/cakephp/blob/master/app/webroot/css/cake.generic.css#L371](https://github.com/cakephp/cakephp/blob/master/app/webroot/css/cake.generic.css#L371)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:49:32.297

您的代码没有任何问题。这就是 CakePHP 处理错误报告的方式。红色的东西是为缺少视图、缺少功能或无法连接到数据库等重大错误保留的。基本上会生成 400 范围内的状态代码的东西。

我做了一些搜索以更好地回答你的问题，但我偶然发现了这个页面。 [CakePHP 2.0 - 如何制作自定义错误页面？](https://stackoverflow.com/q/9620363/2072727)

当你做错事时，CakePHP 会生成什么状态码。我认为验证错误甚至会抛出 OK (200) 但不会向数据库写入任何内容。在我身上发生了几次。

# javascript - JavaScript test() 是否在正则表达式中保存状态？

> ID：15276873
> 
> 赞同：13
> 
> 时间：2013-03-07T16:45:36.570
> 
> 标签：javascript, regex

打开浏览器控制台并执行以下代码：

```
var foo = /foo/g; 
```

然后，

```
foo.test("foo") // true 
```

然后，

```
foo.test("foo") // false 
```

如果您继续执行 foo.test("foo")，您将看到交替的真/假响应，就好像 var foo 实际上正在被修改一样。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T16:46:51.390

是的，当正则表达式是全局的时，这就是它的`.test()`工作`.exec()`方式`g`。他们在最后一场比赛结束时开始。

`.lastIndex`您可以使用该属性观察正则表达式对象上的当前最后一个索引。

这是一个可写属性，因此您可以将其重置为何`0`时/如果需要。当运行正则表达式但未找到匹配项时，它会自动重置为`0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:48:28.670

正则表达式保留最后一个测试的位置。这允许搜索长字符串。您可以通过设置 lastIndex = 0 来重置它；

# c - 以科学记数法将小（1.0E-12）数字存储为双精度数

> ID：15276875
> 
> 赞同：5
> 
> 时间：2013-03-07T16:45:46.310
> 
> 标签：c, double, scientific-notation

这是设置：

对于我的学士论文，我想测试 LHC 使用的喷射算法。基本上第一步是以下步骤：给定一些 4-momentum

```
p[0] = nullvector(45.0000000000106,33.03951484238976,14.97124733712793,26.6317895033428) 
```

我想通过以 10^(-12) 的顺序向最后三个分量添加一些（如 50 个）随机生成的 4 向量来模拟实验数据，这样它们就很小（这就是有趣的物理学发生的地方），但是显着高于 15 位小数的双浮点精度。因此，快速而肮脏的解决方案如下：

```
seed=time(NULL);
srand(seed);
random=(rand()%9001)*1.0E-15;
random=random+1E-12;
printf("%.15E\n",random); 
```

这给了我 1E-12 和 10E-12 (=1E-11) 之间的随机数，最多三位小数，所以在“真实”双打中，这给了我 15 位小数。

现在重点是：**我可以在不超过双浮点精度的情况下以超过三位小数的顺序存储数字吗？**

PS：有没有更好的方法来生成小的随机数？（这听起来像是另一个话题；））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:49:45.460

创建浮点随机数的传统方法是通过取 - 使其成为范围 [0-1)，`double x = (double)rand()/RAND_MAX;`然后乘以将`9001E-1`范围缩放`1E-12`到`1E-15`值 [包括零]。

# php - 隐藏主下载地址

> ID：15276881
> 
> 赞同：-1
> 
> 时间：2013-03-07T16:46:01.143
> 
> 标签：php, download

我有一个问题，我不知道是否有解决方案。

我的问题是我有一个这样的下载链接：

```
http://remotewebsite.com/file.zip 
```

该文件托管在另一个不是我的网站上。我希望用户在不知道原始网址的情况下下载文件，例如当用户访问我的链接时

```
http://mywebsite.com/file.zip 
```

它开始下载文件。

把它想象成我是托管文件的网站和用户之间的隧道。例如，用户从远程网站请求的每个数据包都会通过我，然后发送给用户。

我不知道是否有另一种简单的方法可以做到这一点。

如果这听起来很愚蠢，我很抱歉，但我真的希望它可以工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T16:48:46.200

只需使用`CURL`or获取文件的内容`file_get_contents`并将其与相应的标题 deatils 一起输出到浏览器。

```
header('Content-Description: File Transfer');
header('Content-Type: application/zip');
header('Content-Disposition: attachment; filename=file.zip');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
ob_clean();
flush();
echo file_get_contents("http://remotewebsite.com/file.zip"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:52:10.827

您可以使用 URL 重写机制将所有请求路由`file.zip`到 PHP 脚本，该脚本将从远程服务器下载真实文件并将其提供给您的客户端。

如果您指定您使用的平台（Apache / IIS），我可以提供如何实现的详细示例。

对于 IIS 7 或更高版本，请在您的`web.config`文件中使用：

```
<configuration>
<system.webServer>
    <rewrite>
        <rules>
            <rule name="file.zip" patternSyntax="ExactMatch" stopProcessing="true">
                <match url="file.zip" />
                <action type="Rewrite" url="download_zip.php" />
            </rule>
        </rules>
    </rewrite>
</system.webServer>
</configuration> 
```

在`"download_zip.php"`这里使用 PHP 代码“nauphal”。

# xslt - XSL 选择整个表格行的条件超链接

> ID：15276888
> 
> 赞同：0
> 
> 时间：2013-03-07T16:46:20.783
> 
> 标签：xslt, hyperlink

我想添加一个超链接到一个表行，该行导航到两个网页之一，具体取决于是否为 XML 结果之一返回值。我不确定我是否有语法问题，或者这个逻辑是否可行。

```
<xsl:for-each select="Rowset/Row">
  <tr>
    <xsl:attribute name="href">  
      <xsl:choose>   
        <xsl:when test="ID_PRODU_ORDER!=''">
          <xsl:value-of select="/XMII/CM/Molex/ProductionExecution/OrderPostConfirmationBox.irpt">
        </xsl:when>  
        <xsl:otherwise>
          <xsl:value-of select="/XMII/CM/Molex/ProductionExecution/MachineAssignNewOrderMobile.irpt">
        </xsl:otherwise>   
      </xsl:choose> 
    </xsl:attribute> 

    <td align="left">  
      <xsl:attribute name="id">  
      </xsl:attribute> 
      <xsl:value-of select="DS_MACHI" />
    </td> 

    <td align="left">
      <xsl:attribute name="id">
      </xsl:attribute>
      <xsl:value-of select="ID_PRODU_ORDER" />
    </td>

    <td align="left" >
      <xsl:attribute name="id">
      </xsl:attribute>
      <xsl:value-of select="NR_DAY_REMAI" />
    </td>
  </tr>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T07:06:57.180

使用布尔检查来确定字符串是否存在：

```
<xsl:variable name="order" select="boolean(ID_PRODU_ORDER)"/> 
```

在单独的文件中使用一对处理指令，例如`test.xml`存储真假 URL：

```
<?xml version='1.0' encoding="iso-8859-1"?>
<root>
  <?_true /XMII/CM/Molex/ProductionExecution/OrderPostConfirmationBox.irpt?>
  <?_false /XMII/CM/Molex/ProductionExecution/MachineAssignNewOrderMobile.irpt?>
</root> 
```

使用文档功能引用文件：

```
<xsl:variable name="href" select="document('test.xml')//processing-instruction(concat('_', $order) )"/>

<tr>
  <a href="{$href}">
    <td id="{DS_MACHI}"></td>
    <td id="{ID_PRODU_ORDER}"></td>
    <td id="{NR_DAY_REMAI}"></td>
  </a>
</tr> 
```

# cordova - 无法将 Weinre 目标连接到 Weinre 客户端 (ios)

> ID：15276890
> 
> 赞同：1
> 
> 时间：2013-03-07T16:46:23.463
> 
> 标签：cordova, remote-debugging, weinre

我整个下午都在使用phonegap并为我的javascript寻找调试器，但仍然找不到解决方案。我在我的 Mac 上安装了 Weinre，我通过在终端上执行“weinre”成功地运行了服务器。我在我的 iphone 4（运行 iOS 5.1）上安装了一个应用程序，然后我将脚本包含在我的 index.html 中，如下所示：

```
<script type=”text/javascript” src="http://localhost:8080/target/target-script-min.js#anonymous"></script> 
```

但是在 Weinre 客户端上，我看不到任何连接的目标。`debug.phonegap.com`今天下午调试的时候，有一次成功看到了我网页的内容。关于如何解决它的任何想法？也许是网络问题？我尝试通过 USB 将我的 iphone 连接到 Mac，并将 iphone 和 Mac 连接到同一个 WIFI 接入点。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:57:03.260

如果您可以在 Mac 上将您的 iPhone 更新到 iOS 6 和 Safari 6，您可以在 Mac 上使用 safari 来调试您的移动网站或 PhoneGap 应用程序：[http ://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-使用-web-inspector-to-debug-mobile-safari/](http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-inspector-to-debug-mobile-safari/)

与使用 Weinre 相比，它非常简单且轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T18:42:10.237

你也可以试试 PhoneGap Build。[https://build.phonegap.com/people/sign_up](https://build.phonegap.com/people/sign_up)

一个项目免费，您只需压缩并上传您预先存在的 www 目录，前提是它不使用任何插件。它有一个“调试”按钮，可以在远程服务器上为您运行 weinre。

对我来说非常有用，因为我的网络检查器在识别设备方面往往不一致。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T22:32:26.660

[使用Adob​​e Edge Inspect](http://html.adobe.com/edge/inspect/)可能更容易。

# java - 为什么不同的android版本显示不同的GUI？

> ID：15276892
> 
> 赞同：1
> 
> 时间：2013-03-07T16:46:34.307
> 
> 标签：java, android, eclipse, user-interface, android-3.0-honeycomb

请看下面的代码

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/tableLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFF"
    android:gravity="right"
    android:padding="5dp"
    android:paddingBottom="5dp"
    android:stretchColumns="1,2,3"
    tools:context=".MainActivity" >

    <TableRow
        android:id="@+id/tableRow0"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/billTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:padding="5dp"
            android:text="@string/billTextView"
            android:textColor="#000" />

        <EditText
            android:id="@+id/billEditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="3"
            android:layout_weight="1"
            android:inputType="numberDecimal"
            android:longClickable="false" >

            <requestFocus />
        </EditText>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/tenTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_column="1"
            android:layout_weight="1"
            android:gravity="center"
            android:text="10%"
            android:textColor="#000" />

        <TextView
            android:id="@+id/fifteenTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center"
            android:text="15%"
            android:textColor="#000" />

        <TextView
            android:id="@+id/twentyTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center"
            android:text="20%"
            android:textColor="#000" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/tipTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:padding="5dp"
            android:text="@string/tipTxtView"
            android:textColor="#000" />

        <EditText
            android:id="@+id/tip10EditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:cursorVisible="false"
            android:focusable="false"
            android:gravity="center"
            android:longClickable="false"
            android:textSize="14sp" />

        <EditText
            android:id="@+id/tip15EditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:cursorVisible="false"
            android:focusable="false"
            android:gravity="center"
            android:longClickable="false"
            android:textSize="14sp" />

        <EditText
            android:id="@+id/tip20EditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:cursorVisible="false"
            android:focusable="false"
            android:gravity="center"
            android:longClickable="false"
            android:textSize="14sp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/totalTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:padding="5dp"
            android:text="@string/totalTextView"
            android:textColor="#000" />

        <EditText
            android:id="@+id/total10EditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:cursorVisible="false"
            android:focusable="false"
            android:gravity="center"
            android:longClickable="false"
            android:textSize="14sp" />

        <EditText
            android:id="@+id/total15EditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:cursorVisible="false"
            android:focusable="false"
            android:gravity="center"
            android:longClickable="false"
            android:textSize="14sp" />

        <EditText
            android:id="@+id/total20EditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:cursorVisible="false"
            android:focusable="false"
            android:gravity="center"
            android:longClickable="false"
            android:textSize="14sp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/customTextView"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:gravity="right|center_vertical"
            android:padding="5dp"
            android:text="@string/customTextView"
            android:textColor="#000" />

        <SeekBar
            android:id="@+id/customSeekBar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="2"
            android:layout_weight="1"
            android:focusable="false"
            android:paddingLeft="8dp"
            android:paddingRight="8dp"
            android:progress="18" />

        <TextView
            android:id="@+id/customTipTextView"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:gravity="center_vertical"
            android:paddingLeft="5dp"
            android:text="a"
            android:textColor="#000" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/tipCustomTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:padding="5dp"
            android:text="@string/tipCustomTextView"
            android:textColor="#000" />

        <EditText
            android:id="@+id/tipCustomEditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:cursorVisible="false"
            android:focusable="false"
            android:gravity="center"
            android:longClickable="false"
            android:textSize="14sp" />

        <TextView
            android:id="@+id/totalCustomTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center|right"
            android:padding="5dp"
            android:text="@string/totalCustomTextView"
            android:textColor="#000" />

        <EditText
            android:id="@+id/totalCustomEditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:cursorVisible="false"
            android:focusable="false"
            android:gravity="center"
            android:longClickable="false"
            android:textSize="14sp" />
    </TableRow>

</TableLayout> 
```

该项目是使用 Android 版本 3.2 创建的。

这就是它在设置为 Android 版本 2.3.3 的 Galaxy Nexus 中的显示方式

![在此处输入图像描述](../Images/9ffed26d10d00753fee5f0e7321db477.png)

这就是它在 Galaxy Nexus 中的显示方式，它设置为 Android 版本 3.2

![在此处输入图像描述](../Images/1372ce75bddefdbbdfa2c0ff5fcbb163.png)

如您所见，在那个新版本中，GUI 有点不安。似乎组件是重叠的。这就是为什么它不显示组件的边界。请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:47:55.053

是的，**这很正常**。*Android 4.0*对 Android 的视觉外观进行了极大的打磨。它与您的代码直接无关。Android 会自动执行此操作。

如果您希望所有用户都看到旧样式，可以在清单文件的标记中设置*targetVersion 。*`<uses-sdk>`但是，我不鼓励您这样做。

# java - 如何使用 g.drawline 和循环绘制简单的曲线草图？

> ID：15276896
> 
> 赞同：0
> 
> 时间：2013-03-07T16:46:47.973
> 
> 标签：java, awt, java-2d

我想知道如何使用该方法制作一个简单的图表`g.drawLine`并使用循环来更新坐标，我真的很陌生，不知道我需要做什么或从哪里开始，我确实有这个简单的程序使用 * 代替线来创建图形，但我需要做的是将图形从 * 更改为线。任何帮助将不胜感激

这是我所拥有的：

```
import java.awt.*;

public class program5 {

    public static void main(String[] args) {
        graph1();
    }

    public static void graph1() {
        DrawingPanel panel =new DrawingPanel(300,500);
        Graphics g = panel.getGraphics();

        double  t=10;

        for (int i=1; i<20; i++) {
            t= t*(.8); 
            double z = t * 50;
            int y= -(int)z + 430;
            int x = 10 * i;
            g.drawString("*",x,y);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:58:34.343

为什么不使用 JavaFX 制作图表？ [Java FX 文档 - 折线图](http://docs.oracle.com/javafx/2/charts/line-chart.htm)

# python - 在python中将数字转换为公制单位

> ID：15276900
> 
> 赞同：1
> 
> 时间：2013-03-07T16:46:52.153
> 
> 标签：python, math, scientific-computing

在 python 中执行此操作时，`100*0.000001`我得到了`9.999999999999999e-05` 我需要做什么`1e-05`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:47:55.423

浮点数不准确。您可以将其表示为`1e-4`打印时，或用于`Decimal`获取精确值。例如

```
>>> print '{:4.0e}'.format(100*0.000001)
1e-04 
```

或者

```
>>> Decimal(100)*Decimal('0.000001')
Decimal('0.000100') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:01:18.167

不要做乘法：

```
>>> 100e-7
1e-05 
```

尽管[0.1 是二进制中无限重复的数字，](http://www.exploringbinary.com/why-0-point-1-does-not-exist-in-floating-point/)但您很快就会发现其他工件的近似值：

```
>>> 100e-7*.1
1.0000000000000002e-06 
```

然后只需处理格式化输出的问题：

```
>>> '{:e}'.format(100*0.000001)
'1.000000e-04'
>>> '{:e}'.format(100*0.0000001)
'1.000000e-05'
>>> '{:e}'.format(100*0.00000001)
'1.000000e-06' 
```

# objective-c - 如何释放在运行时添加到类别中的属性？

> ID：15276901
> 
> 赞同：4
> 
> 时间：2013-03-07T16:46:57.347
> 
> 标签：objective-c, cocoa

给定以下类别定义，我如何在有和没有 ARC 的情况下处理 -dealloc？我目前正在使用 ARC，据我所知并在 Instruments 中四处寻找，正在清理这些属性，但我对此不是 100% 有信心。

```
@interface NSObject (SuperUsefulThingIWishAllNSObjectsHad)
@property (nonatomic, copy) NSString *foo;
@end

#import <objc/runtime.h>
@implementation NSObject (SuperUsefulThingIWishAllNSObjectsHad)
static const void *MyPropertyKey = &MyPropertyKey;
@dynamic foo;
- (NSString *)foo
{
    return objc_getAssociatedObject(self,
                                    MyPropertyKey);
}

- (void)setFoo:(NSString *)foo
{
    objc_setAssociatedObject(self,
                             MyPropertyKey,
                             foo,
                             OBJC_ASSOCIATION_COPY);
} 
```

这更多是为了我自己的启迪，但如果解决方案不是*太*老套，我可能有一些地方我真的想使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:52:07.113

你不需要做任何特别的事情`dealloc`来“清理”一个关联的对象。运行时会为您处理它。这与 ARC 无关。

如果您*不*使用 ARC，则需要确保调用`[super dealloc]`自己的`dealloc`覆盖。但是无论您使用关联对象，您都需要这样做，如果您忘记了，编译器会警告您。

### 更新

回应您的评论：您是对的，Objective-C 运行时参考没有明确说明在释放主对象时释放关联的对象（如果适当的话，基于关联策略）。但这是唯一合理的动作，因为关联对象的目的是在*不更改主对象源代码的情况下*将附属对象附加到主对象。

无论如何，Objective-C 运行时的源代码是开源的，所以我们可以检查它以验证这确实是实现的。

看看，[`NSObject.mm`](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/NSObject.mm)你会看到`-[NSObject dealloc]`调用`_objc_rootDealloc`，调用`object_dispose`。

`object_dispose`函数在，[`objc-runtime-new.mm`](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-runtime-new.mm)它调用`objc_destructInstance`，它调用`_object_remove_assocations`。

该`_object_remove_assocations`函数（是的，它在源代码中有错字）位于[`objc-references.mm`](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-references.mm). 它删除与被释放对象关联的所有对象，并在适当时释放它们。如果您查看`objc_removeAssociatedReferences`它是公共 API 的一部分并在 中定义[`objc-runtime.m`](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-runtime.mm)，您会发现它也调用了`_object_remove_assocations`.

# python - 是否可以更新打开的 CSV 文件？

> ID：15276903
> 
> 赞同：0
> 
> 时间：2013-03-07T16:47:03.383
> 
> 标签：python, excel, csv

我有一个朋友，作为他工作的一部分，他必须过滤一些原始数据文本文件（实际上是从服务器发送的日志）。现在我建议使用 python 帮助他，到目前为止它并不太复杂。*然而，当他告诉我必须*手动添加一些数据时，我碰了壁。

所以我的第一个想法是我可能会创建一个 csv 文件，它既容易在 python 中处理，又看起来像我朋友的普通 excel。每次新日志到达时，脚本都会将其名称更新为 csv 文件，我的朋友可以轻松添加更多信息。每行看起来像这样：

日志名称, , , ,

留给我的朋友填补空白，然后他有第二个脚本来收集所有数据。但问题是——当你用 excel 打开一个 csv 文件时，你不能用 python 更新它。所以每次他想更新时，他都需要打开保存并关闭，打开保存并关闭。真是头疼。

现在我知道这是 excel 而不是 csv 本身的问题，因为如果我使用 sublime 读取文件，它会在脚本运行后实时更新。Excel 有一个共享选项，但它保留用于 xls 文件而不是 csv。

我尝试在互联网上查找，发现了一些非常复杂的东西，并且说看起来不可能。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:58:23.663

根据您所说的，如果我要这样做，我将创建一个 Access 数据库并让您的 Python 脚本在其中插入和更新数据，然后让您的朋友通过 Access 本身进行手动操作。

查看[PyODBC](http://code.google.com/p/pyodbc/)以了解如何执行此操作 - 这里有很多问题以及连接到 Access 数据库的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:09:54.813

或者，如果您确实想使用 Excel，您可以尝试以下操作将日志数据插入到打开的 Excel 文档中。

```
import win32com.client
import time

xl = win32com.client.gencache.EnsureDispatch("Excel.Application")                             
xl.Visible = True
Workbook = xl.Workbooks.Add()
Sheets = Workbook.Sheets

for i in xrange(1, 1000):
    Sheets(1).Cells(i, 1).Value = 'LogFile' + str(i)
    #Simulate a delay in the next log being written
    time.sleep(5) 
```

# java - Android：我应该向 ViewPager 中使用的片段添加一个空的构造函数吗

> ID：15276904
> 
> 赞同：8
> 
> 时间：2013-03-07T16:47:07.233
> 
> 标签：java, android, constructor, android-fragments, android-viewpager

我正在做一个布局，类似于 Google play 的。我正在使用需要片段的 ViewPager。我现在有点困惑，因为有些网站说片段需要一个空的构造函数，但 developer.android.com 上的示例不包含构造函数。那里的代码是这样的：

```
public static class DemoObjectFragment extends Fragment {
    public static final String ARG_OBJECT = "object";

    @Override
    public View onCreateView(LayoutInflater inflater,
            ViewGroup container, Bundle savedInstanceState) {
        // The last two arguments ensure LayoutParams are inflated
        // properly.
        View rootView = inflater.inflate(
                R.layout.fragment_collection_object, container, false);
        Bundle args = getArguments();
        ((TextView) rootView.findViewById(android.R.id.text1)).setText(
                Integer.toString(args.getInt(ARG_OBJECT)));
        return rootView;
    }
} 
```

那么是否需要在片段中包含构造函数或者我可以省略构造函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T16:52:01.270

Java 编译器会自动将默认的无参数构造函数（即您在问题中提到的“空构造函数”）添加到任何不具有构造函数的类。

以下空类：

```
public class A {
} 
```

等效于以下具有空主体的无参数构造函数的类：

```
public class A {

    public A() {
    }

} 
```

仅当包含具有一个或多个参数的另一个构造函数时，才需要显式添加无参数构造函数，因为在这种情况下，编译器不会为您添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:50:46.170

如果您不添加任何构造函数，则调用构造函数将引用超级构造函数（与创建空构造函数相同）。但是，如果您要创建任何其他构造函数（不希望使用 Fragments，在 onCreate 中执行您想做的任何事情，您的片段将不会总是用它实例化，有时系统会实例化片段并且将调用空构造函数）而不是你还需要提供一个空的。

# google-maps - Google MarkerClusterer：在某个缩放级别以下去簇标记？

> ID：15276908
> 
> 赞同：25
> 
> 时间：2013-03-07T16:47:12.310
> 
> 标签：google-maps, google-maps-api-3, markerclusterer

我正在使用 Google MarkerClusterer。每当地图超过缩放级别 15 时，我想对所有标记进行去簇处理。

配置选项中有一个`maxZoom`设置，但是[文档并没有明确说明它应该做什么](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclusterer/1.0/docs/examples.html)。

我尝试将其设置如下，但无论我将地图设置为何种缩放级别，地图都会保持聚集：

```
 new_mc = new MarkerClusterer(map, newco_markers, {
      maxZoom: 9
    }); 
```

我做错了什么，我误解了该选项应该做什么，还是有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-07T17:05:01.600

[在此示例](https://googlemaps.github.io/v3-utility-library/packages/markerclustererplus/examples/advanced_example.html)中设置 maxZoom 级别，将所有缩放级别 8 及以上的标记分簇。

（[具有有效密钥的示例的工作版本，](http://www.geocodezip.com/v3_GoogleEx_markerclustererplus_examples_advanced_example.html) github中的原始示例来自需要密钥之前）

重现：

1.  将最大缩放级别设置为 7
2.  点击刷新地图
3.  将缩放级别更改为 0（最远）
4.  单击缩放滑块上的“+”8 次。

[MarkerClustererPlus](https://googlemaps.github.io/v3-utility-library/interfaces/_google_markerclustererplus.markerclustereroptions.html#maxzoom)的文档更清晰一些：

> 最大缩放 | 号码 | 启用集群的最大缩放级别，如果要在所有缩放级别启用集群，则为 null。默认值为空。

**代码片段：**

```
var styles = [
  [{
    url: 'https://cdn.jsdelivr.net/npm/marker-clusterer-plus@2.1.4/images/people35.png',
    height: 35,
    width: 35,
    anchor: [16, 0],
    textColor: '#ff00ff',
    textSize: 10
  }, {
    url: 'https://cdn.jsdelivr.net/npm/marker-clusterer-plus@2.1.4/images/people45.png',
    height: 45,
    width: 45,
    anchor: [24, 0],
    textColor: '#ff0000',
    textSize: 11
  }, {
    url: 'https://cdn.jsdelivr.net/npm/marker-clusterer-plus@2.1.4/images/people55.png',
    height: 55,
    width: 55,
    anchor: [32, 0],
    textColor: '#ffffff',
    textSize: 12
  }],
  [{
    url: 'https://cdn.jsdelivr.net/npm/marker-clusterer-plus@2.1.4/images/conv30.png',
    height: 27,
    width: 30,
    anchor: [3, 0],
    textColor: '#ff00ff',
    textSize: 10
  }, {
    url: 'https://cdn.jsdelivr.net/npm/marker-clusterer-plus@2.1.4/images/conv40.png',
    height: 36,
    width: 40,
    anchor: [6, 0],
    textColor: '#ff0000',
    textSize: 11
  }, {
    url: 'https://cdn.jsdelivr.net/npm/marker-clusterer-plus@2.1.4/images/conv50.png',
    width: 50,
    height: 45,
    anchor: [8, 0],
    textSize: 12
  }],
  [{
    url: 'https://cdn.jsdelivr.net/npm/marker-clusterer-plus@2.1.4/images/heart30.png',
    height: 26,
    width: 30,
    anchor: [4, 0],
    textColor: '#ff00ff',
    textSize: 10
  }, {
    url: 'https://cdn.jsdelivr.net/npm/marker-clusterer-plus@2.1.4/images/heart40.png',
    height: 35,
    width: 40,
    anchor: [8, 0],
    textColor: '#ff0000',
    textSize: 11
  }, {
    url: 'https://cdn.jsdelivr.net/npm/marker-clusterer-plus@2.1.4/images/heart50.png',
    width: 50,
    height: 44,
    anchor: [12, 0],
    textSize: 12
  }],
  [{
    url: 'https://cdn.jsdelivr.net/npm/marker-clusterer-plus@2.1.4/images/pin.png',
    height: 48,
    width: 30,
    anchor: [-18, 0],
    textColor: '#ffffff',
    textSize: 10,
    iconAnchor: [15, 48]
  }]
];

var markerClusterer = null;
var map = null;
var imageUrl = 'http://chart.apis.google.com/chart?cht=mm&chs=24x32&' +
  'chco=FFFFFF,008CFF,000000&ext=.png';

function refreshMap(data) {
  if (markerClusterer) {
    markerClusterer.clearMarkers();
  }

  var markers = [];

  var markerImage = new google.maps.MarkerImage(imageUrl,
    new google.maps.Size(24, 32));

  for (var i = 0; i < data.photos.length; ++i) {
    var latLng = new google.maps.LatLng(data.photos[i].latitude,
      data.photos[i].longitude)
    var marker = new google.maps.Marker({
      position: latLng,
      draggable: true,
      icon: markerImage
    });
    markers.push(marker);
  }

  var zoom = parseInt(document.getElementById('zoom').value, 10);
  var size = parseInt(document.getElementById('size').value, 10);
  var style = parseInt(document.getElementById('style').value, 10);
  zoom = zoom === -1 ? null : zoom;
  size = size === -1 ? null : size;
  style = style === -1 ? null : style;

  markerClusterer = new MarkerClusterer(map, markers, {
    maxZoom: zoom,
    gridSize: size,
    styles: styles[style],
    imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'
  });
}

function initialize() {
  map = new google.maps.Map(document.getElementById('map'), {
    zoom: 2,
    center: new google.maps.LatLng(39.91, 116.38),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  var refresh = document.getElementById('refresh');
  google.maps.event.addDomListener(refresh, 'click', refreshMap);

  var clear = document.getElementById('clear');
  google.maps.event.addDomListener(clear, 'click', clearClusters);

  $.getJSON("https://api.myjson.com/bins/6ad78", function(data, textStatus, jqXHR) {
    console.log(textStatus);
    refreshMap(data);
  });
}

function clearClusters(e) {
  e.preventDefault();
  e.stopPropagation();
  markerClusterer.clearMarkers();
}

google.maps.event.addDomListener(window, 'load', initialize);
```

```
body {
  margin: 0;
  padding: 10px 20px 20px;
  font-family: Arial;
  font-size: 16px;
}

#map-container {
  padding: 6px;
  border-width: 1px;
  border-style: solid;
  border-color: #ccc #ccc #999 #ccc;
  -webkit-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
  -moz-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
  box-shadow: rgba(64, 64, 64, 0.1) 0 2px 5px;
  width: 800px;
}

#map {
  width: 800px;
  height: 400px;
}

#actions {
  list-style: none;
  padding: 0;
}

#inline-actions {
  padding-top: 10px;
}

.item {
  margin-left: 20px;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<!-- scr -- ipt src="https://googlemaps.github.io/js-marker-clusterer/examples/data.json"></scr -- ipt -->
<script src="https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js"></script>
<h3>An example of MarkerClusterer v3</h3>
<div id="map-container">
  <div id="map"></div>
</div>
<div id="inline-actions">
  <span>Max zoom level:
        <select id="zoom">
          <option value="-1">Default</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
        </select>

      </span>
  <span class="item">Cluster size:
        <select id="size">
          <option value="-1">Default</option>
          <option value="40">40</option>
          <option value="50">50</option>
          <option value="70">70</option>
          <option value="80">80</option>
        </select>
      </span>
  <span class="item">Cluster style:
        <select id="style">
          <option value="-1">Default</option>
          <option value="0">People</option>
          <option value="1">Conversation</option>
          <option value="2">Heart</option>
          <option value="3">Pin</option>
       </select>
       <input id="refresh" type="button" value="Refresh Map" class="item"/>
       <a href="#" id="clear">Clear</a>
    </div>
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-08-09T12:44:27.720

```
 var markerClusterer = new MarkerClusterer(map, myMarkers, {
     maxZoom: 15,
     zoomOnClick: false
   });
//zoom 0 corresponds to a map of the Earth fully zoomed out, 20 is closeup
//markerCluster goes away after zoom 
//turn off zoom on click or spiderfy won't work 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T23:42:51.293

您总是可以编写不同的代码，例如结合

*   map.getZoom(),
*   marker[i].setVisible(true) (或 false) 和
*   google.maps.event.addListener(map, 'zoom_changed', ...

像这样的东西：

```
function show_hide_markers(zoom) {
    var markerVisible;
    for (var i = 0; i < markers.length; i++) {
        if (zoom <= zoomRanges[i][1] && zoom >= zoomRanges[i][0] ) { 
             markerVisible = true
        } else markerVisible = false;

        if (markers[i].getVisible() != markersVisible) {
        markers[i].setVisible(markersVisible);}
    }
}

// ...

google.maps.event.addListener(map, 'zoom_changed', function () {
    show_hide_markers(map.getZoom());
}); 
```

首先创建标记数组。缩放级别范围可以保存在一个单独的数组中，以某种方式对应于标记数组中的索引（此处为 zoomRanges）。缩放级别也可以从用于创建标记数组的原始数组（列表）中获取。

在此示例中，缩放范围被单独分配给每个标记，但可以使用二维数组并为整个集群获得 markerVisible。

如果标记数不是很高，则应该足够了。可能会应用添加/删除 culd 而不是设置可见性。

与标记管理器不同（至少最近在某些情况下），即使在 API3 + API 密钥应用下也可以使用。我昨天/今天被迫这样做。

# c# - 在某个符号上将一个字符串分解为多个字符串

> ID：15276911
> 
> 赞同：-2
> 
> 时间：2013-03-07T16:47:21.603
> 
> 标签：c#, .net, string

如果我有一个我知道的字符串格式如下：

```
string teststring = "test1;#test2;#test3;#"; 
```

我想自动把它变成：

```
string string1 = "test1";
string string2 = "test2";
string string3 = "test3"; 
```

设置它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T16:49:12.697

使用[`String.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx).

```
string[] parts = teststring.Split(
    new string[] { ";#" }, 
    StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T16:48:36.237

使用字符串拆分：

```
sting[] myStrings = teststring.Split(new string[] {";#"}, , StringSplitOptions.RemoveEmptyEntries);
foreach(string piece in myStrings)
{
    //Do whatever you want.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T16:51:05.197

根据 ';#' 字符将字符串拆分为一个数组。

```
string[] parts = teststring.Split(";#")
parts[0]; // string1\.  
parts[1]; // string2\.  
parts[2]; // string3\. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:49:47.887

将字符串拆分为数组：

```
string[] = teststring.Split("#"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T16:51:07.770

```
var strings = teststring.Split(new String[]){";#"}, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T17:05:23.843

更改来自 MSDN 的代码，位于：http: [//msdn.microsoft.com/en-us/library/b873y76a.aspx](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)

```
using System;

public class SplitTest {
public static void Main() {

    string teststring = "test1;#test2;#test3;#";

    string [] split = teststring.Split(new Char []{';','#'},StringSplitOptions.RemoveEmptyEntries);

    var SplitStringList = new Dictionary<String, String>();

    for (int i=0;i<split.Length;i++)
    {

        if (split[i].Trim() != "")
        {
            SplitStringList.Add("string"+1, split[i]);
        }

    }
  }
} 
```

现在您可以通过这种方式获取给定字符串键的字符串值：

```
String Anything = SplitStringList["string1"]; 
```

该示例将以下字符串添加到 Dictionary SplitStringList： Key:string1 Value: test1 Key:string2 Value: test2
Key:string3 Value: test3

使用匹配的键，以便您可以在其余代码中更深入地使用这些字符串。只需参考密钥。

# php - SQL 查询 END AS 值无法正常工作

> ID：15276917
> 
> 赞同：0
> 
> 时间：2013-03-07T16:47:37.957
> 
> 标签：php, html, sql, sql-server, sql-server-2008

我正在尝试在我的网站上创建一个表格，显示“价值”最低的前 10 名学生。我的数据库中没有实际的“值”列，而是有两列标题为“grade1”和“grade2”。我的目标是让查询将最低 10 个结果显示为“值”，无论是在 Grade1 还是 Grade2 列中。

这是查询：

```
SELECT TOP 10 p.class, e.teacher, k.notes, s.grade1, s.grade2
            , s.gradedmethod, k.studentid
            , CASE WHEN s.gradedmethod= 'A' OR s. gradedmethod= 'B' THEN s.grade1
                   ELSE s.grade2 END AS value
FROM Table1 k 
INNER JOIN Table2 p ON p.class = k.class 
INNER JOIN Table3 d ON d.tier = p.tier 
INNER JOIN Table4 e ON e.teacher = p.teacher 
INNER JOIN Table5 s ON k.studentid = s.studentid 
WHERE s.examdate IN 
      (SELECT MAX(st.examdate) 
       FROM Table5 st 
       WHERE st.studentid = s.studentid 
       GROUP BY st.studentid) 
   AND k.reportcard IS NULL AND (k.cardtype = 'X' OR k.cardtype = 'Y') 
ORDER BY value ASC 
```

这是输出示例（编辑：结果压缩为仅包括 GRADE1/GRADE2/VALUE）：

```
 Class/Teacher/Notes/Grade1/Grade2/MeasureMethod/Studentid/Value
   NULL/35/NULL
   NULL/82/NULL
   NULL/88/NULL
   NULL/87/NULL
   0/100//0
   19/21/19
   24/13/24
   27/40/27
   NULL/28/28
   33/23/33 
```

正如您所看到的，出现了问题，因为值列中的前四个结果在应该是 Grade2 时显示为 NULL，但是在第 9 行它运行正常......

最后，另一个问题是，如果学生被评分 3 次或更多，我只希望查询包含结果。*注意：grade1 和grade2 实际上是同一考试的两个部分。每个学生的评分考试都是表 5 中的一行，其中包括一列 Grade1 和 Grade2。因此，如果有 3 行或更多行具有相同的学生 ID，则应包括他或她。

我是一名初学者程序员，此时我正在阻止，因为我不知道如何实现这一点，而且我的研究在这一点上只会让我更加困惑。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:07:27.950

您的案例陈述说，如果学生的评分方法是“A”或“B”，则返回 Grade1 ...即使它为空。所以要么你需要：

*   将学生的评分方法修改为不是“A”或“B”，或
*   更改您的案例语句，将“AND Grade 1 is not null”添加到第一个 WHEN 条件，如果 Grade1 为 null，则回退到 Grade2

不确定要求是什么（不显示非 NULL 成绩？gradedmethod 到底是做什么的？）所以我不能肯定地告诉你如何避免你所看到的。

要获得 3 个成绩的学生，请将此 JOIN 添加到您的查询中：

```
INNER JOIN (select studentid from Table5 group by studentid having count(studentid) > 3) threeGrades on threeGrades.studentid = s.studentid 
```

# mongodb - mongodb haskell驱动安装

> ID：15276919
> 
> 赞同：0
> 
> 时间：2013-03-07T16:47:46.413
> 
> 标签：mongodb, haskell

我一直在试验 mongodb 和 haskell。[我根据https://github.com/srp/mongoDB/blob/master/tutorial.md](https://github.com/srp/mongoDB/blob/master/tutorial.md)为 mongodb 安装了 haskell 驱动程序。我选择了“使用 cabal 从 Hackage”路线，一切似乎都成功构建了。我启动了haskell repl，ghci，然后……

导入数据.MongoDB

并得到...

找不到模块“Data.MongoDB”

有没有人见过这个问题？我错过了一步吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T17:22:52.400

你想要这条线

```
import Database.MongoDB 
```

代替

```
import Data.MongoDB 
```

# java - 在 JAVA 中正确设置 CLASSPATH

> ID：15276920
> 
> 赞同：-1
> 
> 时间：2013-03-07T16:47:53.137
> 
> 标签：java

对于家庭作业，我开始使用 Netbeans IDE 来制作企业应用程序。[我按照这里](http://docs.oracle.com/javaee/5/tutorial/doc/bnblr.html)的 Oracle 网站上给出的示例进行操作。然而，当我尝试运行我的应用程序时，我遇到了以下异常：

```
 Caused by: java.lang.NoClassDefFoundError: cart/util/BookException
        at java.lang.Class.forName0(Native Method)
    ... 
Caused by: java.lang.ClassNotFoundException: cart.util.BookException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355) 
```

我阅读了[这个](http://javarevisited.blogspot.sg/2011/06/noclassdeffounderror-exception-in.html)有用的链接并意识到这是我的 CLASSPATH 环境变量的问题。它最初没有设置，我担心我没有正确设置它。

我将 CLASSPATH 设置为以下但不起作用

```
C:\Windows\System32>set CLASSPATH
CLASSPATH=C:\Program Files\Java\jdk1.7.0_13\lib;C:\Program Files\Java\jdk1.7.0_1
3\jre\bin;. 
```

加了一个“.” 包括当前目录，但我猜它不起作用。如何确保在运行时找到我的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:49:47.070

classpath 应该设置为类的位置，而不是您设置的 JDK 的位置。您将其与 PATH 变量混淆。如果您的类与 JDK 位于同一目录中，您可能应该将它们移出。

假设您尝试引用的 java 程序位于

C:\myproject\cart\util\BookException.java 并且您将其编译到相同的位置，那么类路径将为 C:\myproject\ 如果您将其编译到不同的位置，例如：C:\myproject\build\cart \util\BookException.class，则类路径为 C:\myproject\build\

# entity-framework - Entity Framework Fluent API 的 lambda 中 => 左侧的字母有什么意义？

> ID：15276927
> 
> 赞同：0
> 
> 时间：2013-03-07T16:48:08.863
> 
> 标签：entity-framework

我得到了以下示例：

```
 public TestAccountConfiguration()
    {

        HasRequired(a => a.Application)
            .WithMany(t => t.TestAccounts)
            .HasForeignKey(d => d.ApplicationId)
            .WillCascadeOnDelete(false);
    } 
```

所有字母 a, t, d 是否有意义？当我查看示例时，似乎人们有时会选择任何角色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:49:48.840

它们是[lamdba 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。它们是局部变量，可以是你想要的任何东西。

```
HasRequired(app => app.Application)
            .WithMany(test => test.TestAccounts)
            .HasForeignKey(testAccount => testAccount.ApplicationId)
            .WillCascadeOnDelete(false); 
```

就个人而言，我尝试将它们命名为相关的名称，但这完全取决于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:51:41.613

这些字母是匿名函数的参数名称。他们的名字无关紧要，你可以使用任何你喜欢的名字，除了它不能与另一个同名的变量冲突。特别是，事件处理程序通常有一个`e`已命名的参数，这意味着该事件处理程序内的 lambda 表达式不能`e`再次用作参数名称。除此之外，使用任何你喜欢的东西。

就像

```
int addOne1(int x)
{
   return x + 1;
}

int addOne2(int y)
{
   return y + 1;
}

Func<int, int> addOne3 = z => z + 1; 
```

这些函数都做同样的事情，它们之间（实际上）在函数之外没有区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:50:20.430

来自[MSDN](http://msdn.microsoft.com/en-us/library/bb397687.aspx)：

> 要创建 lambda 表达式，请在 lambda 运算符 => 的左侧指定输入参数（如果有），并将表达式或语句块放在另一侧。例如，lambda 表达式 x => x * x 指定一个名为 x 的参数并返回 x 的平方值。您可以将此表达式分配给委托类型，如以下示例所示：

换句话说，函数的参数列表在左边，函数本身在`=>`符号的右边。

# html - 将视频放置在 iframe 中时如何使视频全屏显示？

> ID：15276929
> 
> 赞同：21
> 
> 时间：2013-03-07T16:48:09.983
> 
> 标签：html, iframe, mediaelement.js

我正在使用我的 mediaelement.js 播放器的默认设置，我的初始化非常基本： `$('video').mediaelementplayer();`

我的问题是：当视频嵌入 iframe 时，是否可以全屏播放播放器？当我按全屏时，视频会最大化到 iframe，但不会最大化到整个屏幕。这是 html 的限制还是有办法绕过它？

一般结构如下所示：

```
<!DOCTYPE html>
<html>
  <head />
  <body>
    <iframe>
      <!DOCTYPE html>
      <html>
        <head />
        <body>
          *My Video Here <video> ...*
        <body>
      </html>
    </iframe>
  </body>
</html> 
```

谢谢！

编辑：这似乎是特定于玩家的。默认的 html5`<video>`实现最大化到全屏就好了，即使在 iframe 内也是如此。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-08T14:44:52.253

在 video.js 上偶然发现了这个：

[模态窗口内的video.js：全屏不起作用](https://stackoverflow.com/questions/14319531/video-js-inside-a-modal-window-full-screen-not-working)

答案是将这些属性添加到 iframe：（ `<iframe … allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true">` 虽然不支持 IE）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T21:58:34.647

我使用这段代码来跟踪视频是否进入/退出全屏模式：

```
MediaElementPlayer.prototype.enterFullScreen_org = MediaElementPlayer.prototype.enterFullScreen;
MediaElementPlayer.prototype.enterFullScreen = function() {
    // Your code here
    this.enterFullScreen_org();
}
MediaElementPlayer.prototype.exitFullScreen_org = MediaElementPlayer.prototype.exitFullScreen;
MediaElementPlayer.prototype.exitFullScreen = function() {
    // Your code here
    this.exitFullScreen_org();
} 
```

我假设你可以在父页面上调用一个函数来放大 iframe？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:53:05.247

这是一个“hack”解决方案，它甚至可以让您的页面加载得更快。

1) 创建一个图像（通常是视频的屏幕截图）来代替 iFrame。

2) 将单击事件处理程序绑定到图像，以便它为您需要的尺寸创建 iFrame。（您可以将这些尺寸基于客户端的窗口大小）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-27T12:54:16.213

我的客户已经对有限的视频“全屏”宽度感到满意——我必须去掉上面和下面的黑条。（在我的例子中，iFrame 的尺寸是 945×1500）。

这个，我可以纯粹用一点 CSS 来解决。

```
.mejs-container-fullscreen {
    background-color: #fff !important;
}

.mejs-container-fullscreen .mejs-mediaelement,
.mejs-container-fullscreen video {
    height: 530px !important;
    top: 500px !important;
}

.mejs-container.mejs-container-fullscreen .mejs-controls {
    bottom: auto !important;
    top: 1000px !important; /* video top + video height - controls height (30px) */
} 
```

诚然，这是一个相当有限的解决方案，它在很大程度上取决于视频大小（以及多个视频的大小一致性）以及背景颜色。但它也可能对你有用。

# xslt - 禁用输出转义后如何遍历

> ID：15276930
> 
> 赞同：0
> 
> 时间：2013-03-07T16:48:18.040
> 
> 标签：xslt, xpath, traversal

我有一个这样的 XML -

```
<DOCUMENT>
<SERVICE>
<ID>1338</ID>
<NAME>
&lt;EN&gt;this is an english name&lt;/EN&gt;
&lt;DE&gt;this is a german name&lt;/DE&gt;
</NAME>
</SERVICE>
</DOCUMENT> 
```

如您所见，名称标签内的元素类似于 XML，但并未真正格式化为元素。输出 XML 需要看起来像

```
<SERVICES>
<SERVICE ID="1338" EN="this is an english name" DE="this is a german name"/>
</SERVICES> 
```

我正在尝试通过 XPATH 获取 EN 和 DE 的值。我曾尝试使用禁用输出转义来解决问题，但我认为这不会奏效。

```
<xsl:template match="/">
<SERVICES>
<SERVICE>
<xsl:attribute name="ID"><xsl:value-of select="DOCUMENT/SERVICE/ID"/></xsl:attribute>
<xsl:attribute name="EN"><xsl:value-of select="DOCUMENT/SERVICE/NAME/EN" disable-output-escaping="yes"/></xsl:attribute>
<xsl:attribute name="DE"><xsl:value-of select="DOCUMENT/SERVICE/NAME/DE" disable-output-escaping="yes"/></xsl:attribute>
</SERVICE>
</SERVICES>
</xsl:template> 
```

这里有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:45:28.460

如果您能够使用 XSLT 2.0，请利用它们的一些解析功能。你可以`analyze-string`用来提取你需要的数据。

下面应该是一个完整的工作转换。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:template match="/">
        <DOCUMENT>
            <SERVICES>
                <xsl:for-each select="DOCUMENT/SERVICE">
                    <SERVICE>
                        <xsl:attribute name="ID"><xsl:value-of select="ID"/></xsl:attribute>
                        <xsl:analyze-string select="NAME" regex="&lt;(.*?)&gt;(.*?)&lt;/\1&gt;">
                            <xsl:matching-substring>
                                <xsl:attribute name="{regex-group(1)}" select="regex-group(2)"/>
                            </xsl:matching-substring>
                        </xsl:analyze-string>
                    </SERVICE>
                </xsl:for-each>
            </SERVICES>
        </DOCUMENT>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:47:42.650

首选方法是获取 NAME 元素的字符串内容并通过 XML 解析器将其转换为节点树。如果您的处理器支持诸如 saxon:parse()（或 XPath 3.0 parse-xml()）之类的扩展，或者通过调用扩展函数来完成此操作。

如果内部 XML 是非常定型和可预测的，那么您也许可以通过直接字符串操作来解析它。

# sql - sql语句根据另一个故事中的记录删除表1中的行

> ID：15276935
> 
> 赞同：1
> 
> 时间：2013-03-07T16:48:30.077
> 
> 标签：sql

我必须表 t1 和 t2。我想要

*删除 t1 中的记录，其中*

*t1.c1 = t2.c1 AND t1.c2 = t2.c2 AND t1.c3 = t2.c3 AND t2.c4 = "某事"*

我以为我可以做类似的事情：

```
delete
FROM table1 t1
INNER JOIN table2 t2
 on 
 (t1.c1 = t2.c1 
  AND t1.c2 = t2.c2 
  AND t1.c3 = t2.c3)
 where t2.c4 = 'something' 
```

但是，在这样做之前，我正在尝试做

```
select *
FROM table1 t1
INNER JOIN table2 t2
 on 
 (t1.c1 = t2.c1 
  AND t1.c2 = t2.c2 
  AND t1.c3 = t2.c3)
 where t2.c4 = 'something' 
```

它没有返回我要删除的记录。

有关如何修复此查询的任何提示？（在甲骨文中工作）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:49:29.213

`DELETE`你很接近了！，只需在关键字后添加要删除的表名

```
DELETE  t1   -- <<==== HERE
FROM    table1 t1
        INNER JOIN table2 t2
            ON  t1.c1 = t2.c1 AND 
                t1.c2 = t2.c2 AND 
                t1.c3 = t2.c3
 WHERE  t2.c4 = 'something' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:45:00.613

我得到了它！！

```
 DELETE  
    FROM    table1 t1
    WHERE EXISTS
      SELECT * 
      from table2 t2
      where  t1.c1 = t2.c1 AND 
            t1.c2 = t2.c2 AND 
            t1.c3 = t2.c3 AND
            t2.c4 = 'something' 
```

# ruby - 浮点除以零

> ID：15276938
> 
> 赞同：1
> 
> 时间：2013-03-07T16:48:38.640
> 
> 标签：ruby

我期望以下代码会引发错误，但它会返回`NaN`. 这种行为在任何地方都有描述吗？为什么它与整数除以零不同？

```
0.0 / 0.0 # => NaN 
```

编辑：在这种情况下我需要返回零，所以我打算

```
(x / y rescue 0) 
```

但这没有用。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:51:46.067

你可以做类似的事情

```
x == 0 and y == 0 ? 0 : x/y 
```

或者

```
x.nonzero? || y.nonzero? ? x/y : 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:08:01.077

```
res = x/y
res = 0 unless res.finite? 
```

`finite?`如果 float 是有效的浮点数（不是无限的，并且 nan? 为 false），则返回 true。

# javascript - NodeList的原型扩展

> ID：15276942
> 
> 赞同：0
> 
> 时间：2013-03-07T16:48:47.580
> 
> 标签：javascript, node.js

我正在使用“html5”node.js 库，基于“jsdom”库（[https://github.com/aredridel/html5](https://github.com/aredridel/html5)）

我的代码是：

```
var  HTML5 = require('/usr/lib/node_modules/html5/lib/html5'),
     Script = process.binding('evals').Script,
     util = require('util'),
     fs = require('fs');
var p = new HTML5.Parser();
p.parse_fragment(fs.readFileSync('test.xml')); 
```

现在我有对象`p`（ 尝试 p.tree.body_pointer._childNodes.constructor 看看）。`p.tree.body_pointer._childNodes``NodeList`

我想通过我的方法扩展它以便能够调用`p.tree.body_pointer._childNodes.foo()`.

我试过 NodeList.prototype.foo = function(){ return "OK"} 但我得到**NodeList is not defined**错误消息。

我猜 NodeList 是在我找不到的东西里面声明的。查看源代码，我在`core`或下找到了它，`dom`但我的代码中没有两者。

我也扫描了 HTML5 对象 - 但没有成功。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:38:09.293

我能想到的三个解决方案：

```
// either ...
var NodeList = p.tree.body_pointer._childNodes.constructor;
// ...or...
var core = require('html5/node_modules/jsdom/lib/jsdom/level3/core');
var NodeList = core.dom.level3.core.NodeList;
// ...or...
var jsdom = require('html5/node_modules/jsdom');
var NodeList = jsdom.dom.level3.core.NodeList;
// ...and then...
NodeList.prototype.foo = function() { ... }; 
```

不过，这三个都不是真的漂亮。

# mysql - INNER JOIN 限制为 1

> ID：15276946
> 
> 赞同：1
> 
> 时间：2013-03-07T16:48:55.563
> 
> 标签：mysql, sql, inner-join

我有一个查询：

```
SELECT count(authors.id), country.name from authors
INNER JOIN articles ON authors.article_id =  articles.id
INNER JOIN author_affi_rel ON authors.id =  author_affi_rel.id_author
INNER JOIN affiliations ON author_affi_rel.id_affiliation = affiliations.id
INNER JOIN country ON affiliations.country = country.unique_id
WHERE articles.journal_id = 20 AND authors.correspondence =1
GROUP BY country.name
ORDER BY count(authors.id) DESC 
```

我在这里选择每个国家的作者人数。

一切正常，除了在 author_affi_rel 表中，每个作者我可以有多个从属关系，所以在我的结果中，作者将加倍。

我的目标是限制为一个

```
INNER JOIN author_affi_rel ON authors.id =  author_affi_rel.id_author 
```

我试着做：

```
INNER JOIN author_affi_rel ON authors.id =  (SELECT id_author FROM  author_affi_rel WHERE id_author =  authors.id LIMIT 1) 
```

但是我的查询在那里存货，没有回应。

您是否知道如何进行内部连接并将结果限制为一个。

非常感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:50:58.520

`COUNT(DISTINCT author_id)`如果性能不是问题，请在查询中使用。

# python - 姜戈。Q 分类查询

> ID：15276950
> 
> 赞同：0
> 
> 时间：2013-03-07T16:49:06.487
> 
> 标签：python, django, django-q

我有一个类别模型定义为：

```
class Category(models.Model):
    number = models.PositiveIntegerField()
    name = models.CharField(max_length=200)

    parent = models.ForeignKey('self', blank=True, null=True)

    def __unicode__(self):
        name = unicode(self.name)
        if self.parent:
            name =  unicode(self.parent) + u'-->' + name
        return name 
```

类别最多可以有 3 级父级（类别 1 -> 类别 2 -> 类别 3 -> 类别 4）

我需要查看数据库中的所有项目，但当且仅当位置 == Ebay 时才排除基本类别 14。

我正在使用：

```
 query = Q(category__number=14) & ~Q(location__name="EBAY")
    queryset.exclude(query) 
```

如果一个item的category是14->15->42->16，返回的category编号是16。我需要第一个category level，但是不知道有多少个parent。可以没有，或最多 3 个父母。

我将如何编辑查询以回顾我的类别树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:53:04.260

Django 不进行独立于 SQL 的树爬取，但模型树库在这里。

*   [https://github.com/django-mptt/django-mptt](https://github.com/django-mptt/django-mptt)
*   [https://tabo.pe/projects/django-treebeard/docs/tip/](https://tabo.pe/projects/django-treebeard/docs/tip/)

对于递归查找，您可能希望使用原始 sql 或库作为 django-mptt 或 django-treebeard。

mptt 似乎是最新的。

# ios6 - 完全删除连接/故事板

> ID：15276953
> 
> 赞同：1
> 
> 时间：2013-03-07T16:49:26.417
> 
> 标签：ios6, xcode4.5, xcode-storyboard

我做了一个 TableViewController 并将 TableView 连接到它的类接口。然后我想更改 TableView 名称，再次连接以确定但在启动应用程序时我有 NSUnknownKeyException：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<ClassementGroupe2 0x7597f60> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key ClassementGroupe2TableView.' 
```

它正在寻找旧名称！我的问题是如何从任何预连接的插座中删除连接？`'ClassementGroupe2TableView'`是旧名称，它不再出现在我的代码的任何部分。但它肯定存在于某些代码中，因为我有那个错误。谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:57:22.707

打开故事板，选择视图，打开连接检查器（右侧边栏中最右边的图标），然后按连接旁边的小 x。

# sql - 如何获取触发触发器的操作名称？

> ID：15276954
> 
> 赞同：0
> 
> 时间：2013-03-07T16:49:28.543
> 
> 标签：sql, sql-server, tsql, triggers

假设我有一个 TSQL 触发器

```
CREATE TRIGGER dbo.Trigger1 ON dbo.Table1
  AFTER INSERT, UPDATE, DELETE 
```

我如何知道上述哪一项操作（插入、更新或删除）导致触发器触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:52:28.680

您可以检查`inserted`和`deleted`表的存在。

如果只`inserted`存在值 in ，则它是一个插入。如果仅`deleted`存在值，则为删除。如果两者兼而有之，那就是更新。

# awk - awk 多个变量用于多个文件处理

> ID：15276967
> 
> 赞同：2
> 
> 时间：2013-03-07T16:49:53.477
> 
> 标签：awk

我想使用 awk 来处理多个文件，例如
文件 1：

> 1 1.045
> 2 1.033
> 3 1.029

文件 2：

> 1 1.078
> 2 1.080
> 3 1.090

但我有兴趣从每个文件中存储一个特定字段，然后将它们全部打印在一行上。例如，我想要两个文件中第二行的第二个字段，以便输出为：

> 1.033 1.080

我可以让 awk 将每个文件中的相关字段存储在单独的变量或数组的单独字段中吗？我试过：

```
awk '
BEGIN{}
FNR==2{var1=$2;nextfile}
FNR==2{var2=$2}
END{printf "%6.3f    %6.3f\n", var1,var2}' file1 file2 
```

但这会用第二个文件中的字段覆盖 var1，并且永远不会处理 var2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:27:45.613

在您的示例中，从不评估第三行，您可以像这样解决它：

```
awk '
BEGIN{}
FNR==2 && !var1 {var1=$2;nextfile}
FNR==2{var2=$2}
END{printf "%6.3f    %6.3f\n", var1,var2}' file1 file2 
```

但是，这种方法很难概括，我宁愿这样做：

```
awk 'FNR==row { printf "%6.3f    ", $col } END { printf "\n" }' row=2 col=2 file1 file2 
```

输出：

```
1.033     1.080 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T17:56:07.420

另一种方法：

```
$ paste file1 file2 | awk 'NR==2{print $2,$4}'
1.033 1.080 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:55:49.580

你想要这个吗？

```
awk 'NR==FNR{a[$1]=$2;next}$1 in a{print a[$1],$2}' file1 file2 
```

输出：

```
1.045 1.078
1.033 1.080
1.029 1.090 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T20:43:42.370

另一种尝试的方法：

```
awk '{p=$2; getline<f} NR==2{print p,$2; exit}' f=file2 file1 
```

# c# - 清单资源 (Assembly.GetManifestResourceStream) 的资源名称是什么？

> ID：15276969
> 
> 赞同：7
> 
> 时间：2013-03-07T16:50:00.240
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我在我的 ASP.NET MVC 应用程序中嵌入了一个资源（一个 XSD 文件）。现在，我想从代码中检索这个文件。

查看 的文档[`Assembly.GetManifestResourceStream()`](http://msdn.microsoft.com/en-us/library/xc4235zt.aspx)，它需要一个字符串参数，即“被请求的清单资源的区分大小写的名称”。

好吧，我觉得这不是很有帮助，当然，在 MSDN 上也找不到示例。清单资源的名称是什么？是文件名吗？它是文件的完整路径和名称吗？还是为资源本身提供了一个单独的名称，如果是，我该如何设置该名称？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-07T17:23:30.817

如果我没记错的话，它是程序集的名称加上文件的全名（包括扩展名），它们之间有一个点。

一种快速确定的方法：使用[Assembly.GetManifestResourceNames](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcenames.aspx)方法：

```
string[] result = myAssembly.GetManifestResourceNames(); 
```

...并检查`result`调试器中的内容。

ETA：哎呀，如果您只有一个资源，您可以使用以下代码来获取名称：

```
string name = myAssembly.GetManifestResourceNames()[0]; 
```

不过我不建议这样做：我发现有时 VS 会创建空资源文件并将它们编译到程序集中，因此您可能拥有比您想象的更多的程序集资源。

ETA 2018-06-26：这是我很惊讶我在 2013 年没有想到的另一种方式。这将为您提供基于原始资源名称的资源名称：

```
string resourceFileName = "myResource.xsd";
string resourceName = myAssembly.GetManifestResourceNames()
                                .Where(name => name.Contains(resourceFileName))
                                .FirstOrDefault(); 
```

# c# - 从客户端到服务器的 POST 值，然后将其分配给标签，立即丢失 - 为什么？

> ID：15276970
> 
> 赞同：0
> 
> 时间：2013-03-07T16:50:06.800
> 
> 标签：c#, jquery, post, .net-4.0, asp.net-4.0

我想使用 JQuery 或 javascript 从我的客户端 .aspx 网页向我的服务器端代码隐藏 (C#) 发送一个简单的值。从这些数据中，我想填充一些 asp.net 标签。

问题是，虽然我可以在服务器上获取数据，但一旦线程离开代码隐藏方法，为任何内容分配任何值都会立即丢失。为什么？我怎样才能防止它？？？进阶谢谢。

这是我目前所拥有的......

ContentPlaceHolderID="head" 标记内的客户端（MyWebPage.aspx 在母版页内）：

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
  <script>
    $.post("MyWebPage.aspx",
      {
         myKey:"Hello World"
      },
     function () {});
   </script>
</asp:Content> 
```

服务器端.cs

```
Page_Load(
      if (Request.Params["myKey"] != null)
      {
          if (Request.Params["myKey"] == "Hello World")
             {
                 Label1.Text = "Hello World";
                 Label2.Text = Request.Params["myKey"].ToString();
                 HiddenField.Value = "Hello World";
                 // All values are assigned here, but...
             } 
      }    
); 
```

页面显示；所有上述分配的值都丢失了:-(为什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:53:11.883

您的 AJAX 调用向服务器提交一个异步请求，服务器处理该请求并发回响应。然后，您应该对该响应执行某些操作，但您不是，因为您已将一个空的回调函数传递给`$.post()`.

服务器返回的内容不会神奇地放置到您的页面上，这不是 AJAX 的工作方式，您必须自己做（或使用做这件事的 jQuery*函数*`.load()`）。

 *```
$.post("MyWebPage.aspx", {
     myKey:"Hello World"
}, function (responseText) {
    // do something with responseText here
}); 
```*

# java - 使用 jtds 将 android 应用程序连接到 sql server

> ID：15276971
> 
> 赞同：1
> 
> 时间：2013-03-07T16:50:14.237
> 
> 标签：java, android, jtds

我厌倦了没有结果的搜索，我不知道问题出在哪里，我正在尝试将我的 android 应用程序与本地 SQl 服务器 2008 连接，现在我无法从 sql 服务器获取信息。请帮助这是我的代码：

```
String url = "jdbc:jtds:sqlserver://10.0.2.2:1433/lear_db;instance=SQLEXPRESS;";
TextView coucou = new TextView(this);

    try {
        Class.forName("net.sourceforge.jtds.jdbc.Driver");
        java.sql.Connection connexion =               
        DriverManager.getConnection(url,"kamal","kamal1234"); 

        coucou.setText("Connection successful");

    } catch ( SQLException e) {
        // TODO Auto-generated catch block
        coucou.setText("error1" + e.getMessage());
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        coucou.setText("error2" + e.getMessage());
        e.printStackTrace();

    } catch (Exception e) {
        // TODO Auto-generated catch block
        coucou.setText("error0" + e.getMessage());
        e.printStackTrace();
    }   
    setContentView(coucou); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:18:43.303

这是对我有用的连接字符串：

"jdbc:jtds:sqlserver://"+ adresseip +":1433/lear_db;user=youruser;password=yourpass"

比我得到的另一个错误是： `android.os.NetworkOnMainThreadException`

解决方案是使用 AsyncTask 这是一个教程： [http ://droidapp.co.uk/2011/05/12/android-dev-pre-loading-with-asynctask/](http://droidapp.co.uk/2011/05/12/android-dev-pre-loading-with-asynctask/)

现在我遇到了一个新错误（这个错误永远不会结束）：

```
Unknow server host name 'unable to resolve host 
```

比它有效，在带有主机 IP 地址的 wifi 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:03:13.123

通常，我在这个 fasion 中使用 jdbc:sqlserver

```
String url = "jdbc:sqlserver://10.0.2.2:1433/lear_db;instance=SQLEXPRESS;"; 
```

或者，如果使用 jtds，请尝试：

```
String url = "jdbc:jtds://10.0.2.2:1433/lear_db;instance=SQLEXPRESS;"; 
```

# java - Maven 生成源无法解析依赖项

> ID：15276976
> 
> 赞同：9
> 
> 时间：2013-03-07T16:50:25.833
> 
> 标签：java, maven, jaxb2

我在 maven 中有一个使用 JAXB 生成的源的多模块项目：

```
 parent
        module A
        module B (depends on module A) 
```

如果没有 JAXB，一切都可以正常编译。当我将 JAXB 插件添加到模块 B 时，maven 抱怨：

```
 Failed to execute goal on project moduleB: Could not resolve dependencies for 
   project groupId:A:jar:1.7.0: Could not find artifact groupId:A:jar:1.7.0: 
   in thirdparty (http://10.0.0.2:8081/nexus/content/repositories/thirdparty) 
```

据我所知，这是因为 jaxb maven 插件要求在编译模块 A 之前的 generate-sources 阶段解决所有依赖项。我们没有在本地存储库中安装模块 A 的机制——我们从来不需要它，因为两个模块都在同一个 git 存储库中。

我发现的丑陋解决方案是这样的：

```
 parent
        module A
        module B (depends on module A & C)
        module C (contains only JAXB generate-sources) 
```

JAXB 不需要模块 A，因此一切都可以编译。这个解决方案确实有效，但它很难看。通常模块包含有用的代码，但为了将有用的代码放在模块 C 中，我必须使其依赖于导致相同错误的模块 A。（切换到不同的 JAXB 插件不起作用，因为它还在生成源阶段解决了依赖关系。）

问题：有没有办法在不创建另一个模块的情况下避免这种依赖？

（可能的解决方案可能涉及为模块 B 添加阶段或范围，更改模块 B 需要模块 A 的依赖项的范围，因此在生成源之后才需要它，或者创建排除项以便 JAXB 不查找此特别依赖。）

接下来是 pom.xml 文件的极简版本。它来自工作 pom，但我不能 100% 确定它会以现在的形式编译。

## 父/pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
   http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <artifactId>artFacts</artifactId>
    <groupId>com.group</groupId>
    <version>1.7.0</verison>

    <repositories>
        <repository>
            <id>thirdparty</id>
            <url>http://10.0.0.2:8081/nexus/content/repositories/thirdparty</url>
        </repository>
    </repositories>

    <modules>
        <module>modA</module>
        <module>modB</module>
    </modules>
</project> 
```

## 父/a/pom.xml：

```
<project>
    <parent>
        <artifactId>artFacts</artifactId>
        <groupId>com.group</groupId>
        <version>1.7.0</version>
    </parent>

    <modelVersion>4.0.0</modelVersion>

    <artifactId>modA</artifactId>
    <packaging>jar</packaging>
</project> 
```

## 父/b/pom.xml：

```
<project>
    <parent>
        <artifactId>artFacts</artifactId>
        <groupId>com.group</groupId>
        <version>1.7.0</version>
    </parent>

    <modelVersion>4.0.0</modelVersion>

    <artifactId>modB</artifactId>
    <packaging>jar</packaging>

    <build>
      <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jaxb2-maven-plugin</artifactId>
            <version>1.3</version>
            <executions>
                <execution>
                    <id>xjc_raw</id>
                    <goals>
                        <goal>xjc</goal>
                    </goals>
                    <configuration>
                        <packageName>com.group.jaxb</packageName>
                        <schemaDirectory>${basedir}/xsd/</schemaDirectory>
                        <outputDirectory>${project.build.directory}/generated-sources/jaxb</outputDirectory>
                        <staleFile>${project.build.directory}/generated-sources/jaxb/.staleFlag</staleFile>
                        <target>2.1</target>
                    </configuration>
                    <phase>generate-sources</phase>
                </execution>
            </executions>
        </plugin>
        <!-- Tell Eclipse where to find the generated sources. -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <version>1.1</version>
            <executions>
                <execution>
                    <id>add-source</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>add-source</goal>
                    </goals>
                    <configuration>
                        <sources>
                            <source>${project.build.directory}/generated-sources/jaxb</source>
                        </sources>
                    </configuration>
                </execution>
            </executions>
        </plugin>
      </plugins>
    </build>
    <dependencies>
        <!-- This is the dependency which fails because it can't be resolved
             during the generate-sources phase. -->
        <dependency>
            <groupId>com.group</groupId>
            <artifactId>modA</artifactId>
            <version>${project.version}</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.1</version>
            <type>jar</type>
            <optional>false</optional>
        </dependency>
    <dependencies>
</project> 
```

在这种形式下，项目应该会失败并显示上面的错误消息。将其更改为丑陋的解决方案可以通过创建 modC 并将有关 JAXB 的所有内容放在那里来完成。在此之后，只需让 modB 依赖于 modA 和 modC，再加上将 modC 添加到父级即可。

# c# - 将网站发布到 IIS，服务器锁定 dll 文件

> ID：15276978
> 
> 赞同：5
> 
> 时间：2013-03-07T16:50:27.783
> 
> 标签：c#, asp.net-mvc, iis, dll, publish

我已经为这个问题苦苦挣扎了大约一个星期。我正在尝试使用 FTP 将我的 MVC 网站发布到我的 IIS 服务器。唯一的问题是，当我传输文件时，MVC 总是锁定一些 DLL 文件（System.Web.MVC 等）并在 10 分钟后释放它们。

这个问题会阻止我的网站持续运行并给出一个非常难看的错误消息。

尝试删除 bin 文件夹时，我拒绝访问，尝试重命名 bin 文件夹时，我拒绝访问，尝试删除特定文件时，我也拒绝访问。

此外，我无法运行任何关闭进程的程序，因为它不是我的服务器，而且我无权访问实际机器。

如何在没有这些问题的情况下顺利发布我的网站？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-20T08:00:01.443

我也有同样的问题。现在我在发布之前回收应用程序池，这将释放 dll 文件上的所有锁。

我希望尽快找到更好的解决方案。

# javascript - 带锚的位置 href 不起作用

> ID：15276983
> 
> 赞同：1
> 
> 时间：2013-03-07T16:50:40.020
> 
> 标签：javascript, jquery, href

我在一个页面上，比如说page.php，我想重新加载它。这是我的第一个代码：

```
$(location).attr("href", "/page.php"); 
```

它完美地工作：页面重新加载良好。

现在，我想使用锚点进入我的页面的特定位置：

```
$(location).attr("href", "/page.php#anchor"); 
```

当我这样做时，浏览器确实直接进入锚点，而不重新加载页面，这不是我想要的。

我怎样才能重新加载页面**然后**转到我的锚点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T16:52:41.643

你可以试试 window.location.reload()

# c# - 使用 PrintDocument 在 winform c# 中打印所有控件

> ID：15276984
> 
> 赞同：0
> 
> 时间：2013-03-07T16:50:40.380
> 
> 标签：c#, printing, printdocument

我有一个 Windows 窗体，它有一个以上的页面，主要是标签和文本框，我试图保留我已经在 winform 中的字体，到目前为止我可以打印第一页，但是当我尝试添加其余的控件它会做各种奇怪的事情这是我的代码的一部分，我将所有内容都打印出来，但面板中的所有控件都不会显示在打印预览中。所以我发现面板中的控件没有按顺序排列，我需要做的是先创建打印页数，然后将控件放在这些打印页中。尝试首先创建打印页面以向其添加控件的任何帮助。它将始终是 4 个打印页。

```
 int mainCount = 0;
    public void printStuff(System.Drawing.Printing.PrintPageEventArgs e)
    {            
        Font printFont = new Font("Arial", 9);
        int dgX = dataGridView1.Left;
        int dgY = dataGridView1.Top += 22;
        double linesPerPage = 0;
        float yPos = 0;
        int count = 0;

        float leftMargin = e.MarginBounds.Left;
        float topMargin = e.MarginBounds.Top;
        float bottomMargin = e.MarginBounds.Bottom;
        StringFormat str = new StringFormat();

        linesPerPage = e.MarginBounds.Height / printFont.GetHeight(e.Graphics);
        Control ctrl;

        while ((count < linesPerPage) && (panel1.Controls.Count != mainCount))           
        {
            ctrl = panel1.Controls[mainCount];
            yPos = topMargin + (count * printFont.GetHeight(e.Graphics));
            mainCount++;
            count++;
            if (ctrl is Label)
            {
                e.Graphics.DrawString(ctrl.Text, printFont, Brushes.Black, ctrl.Left + 5, ctrl.Top + 40);
            }
            else if (ctrl is TextBox)
            {
                e.Graphics.DrawString(ctrl.Text, printFont, Brushes.Black, ctrl.Left + 5, ctrl.Top + 40);
                e.Graphics.DrawRectangle(Pens.Black, ctrl.Left, ctrl.Top + 40, ctrl.Width, ctrl.Height);
            }
        }
        if (count > linesPerPage)
        {
            e.HasMorePages = true;
        }
        else
        {
            e.HasMorePages = false;
        }            
    }

    //Print
    private void exportFileToolStripMenuItem_Click(object sender, EventArgs e)
    {            
        printPreviewDialog1.Document = printDocument1;
        printPreviewDialog1.ShowDialog();
    }

    private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {
        printStuff(e);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:57:49.017

在我看来，问题在于在后续页面上，您没有在打印时从控件顶部位置减去“页面偏移”。当您将控件放置在打印页面上时，您实际上是在尝试使用它们的屏幕坐标，这显然只适用于第一页。在随后的页面上，您需要通过减去一个数量来映射屏幕坐标，该数量相当于“迄今为止的总印刷表面”。

例如，您将要修改此行：

```
e.Graphics.DrawString(ctrl.Text, printFont, Brushes.Black, ctrl.Left + 5, ctrl.Top + 40); 
```

像这样：

```
e.Graphics.DrawString(ctrl.Text, printFont, Brushes.Black, ctrl.Left + 5, ctrl.Top + 40 - pageOffset); 
```

其中`pageOffset`是一个变量，应根据可打印区域的高度为每页计算： `pageOffset = currentPageNumber * heightOfPrintableArea`因此您还需要为打印的页数维护一个变量，类似于`mainCount`

当然，这同样适用于 if 语句的另一个分支：

```
e.Graphics.DrawString(ctrl.Text, printFont, Brushes.Black, ctrl.Left + 5, ctrl.Top + 40 - pageOffset);
e.Graphics.DrawRectangle(Pens.Black, ctrl.Left, ctrl.Top + 40 - pageOffset, ctrl.Width, ctrl.Height); 
```

# c++ - 可变参数模板参数解包

> ID：15276991
> 
> 赞同：3
> 
> 时间：2013-03-07T16:51:01.933
> 
> 标签：c++, templates, variadic-templates

对于每个参数，我需要应用两个嵌套函数：

```
obj.apply(someFilter(arg)); // arg is one argument, but here
                            // should be an unpacking of args 
```

我不知道如何为这种情况编写拆包。

我看到了这个：

```
 pass{([&]{ std::cout << args << std::endl; }(), 1)...}; 
```

[在 wiki 上](http://en.wikipedia.org/wiki/Variadic_template)，但又不知道如何将其应用于我的案例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:53:53.890

这实际上很简单：您可以将任意表达式放入可变参数模板参数包的解包中：

```
obj.apply(someFilter(arg))... 
```

这将为您`obj.apply`提供逗号分隔列表的结果。然后，您可以将其传递给虚拟函数：

```
template<typename... Args> swallow (Args&&...) {}
swallow(obj.apply(someFilter(arg))...); 
```

吞下逗号分隔的列表。

当然，这假设`obj.apply`返回某种对象。如果没有，您可以使用

```
swallow((obj.apply(someFilter(arg)), 0)...); 
```

提出实际（非`void`）论点

如果您不知道 obj.apply` 返回什么（结果可能使逗号运算符重载），您可以通过使用禁用自定义逗号运算符

```
swallow((obj.apply(someFilter(arg)), void(),  0)...); 
```

如果您实际上需要按顺序评估项目（从问题中似乎不太可能），您可以滥用数组初始化语法而不是使用函数调用：

```
using Alias=char[];
Alias{ (apply(someFilter(args)), void(), '\0')... }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:08:36.633

这是对参数包执行任意一组操作的可靠方法。它遵循最小意外原则，并按顺序执行操作：

```
template<typename Lambda, typename Lambdas>
void do_in_order( Lambda&& lambda, Lambdas&& lambdas )
{
  std::forward<Lambda>(lambda)();
  do_in_order( std::forward<Lambdas>(lambdas)... );
}

void do_in_order() {}

template<typename Args>
void test( Args&& args ) {
  do_in_order( [&](){obj.apply(someFilter(std::forward<Args>(args)));}... );
} 
```

基本上，您在 处发送一堆 lambda `do_in_order`，它从前到后评估它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:53:36.930

我假设代码有多个`arg`s 作为参数包？尝试：

```
obj.apply( someFilter( arg )... ); 
```

由于参数解包适用于表达式，因此参数包的每个元素都扩展为`someFilter( arg )`.

# c# - 异步调用方法或在不等待结果的情况下发布和调用方法

> ID：15276997
> 
> 赞同：-1
> 
> 时间：2013-03-07T16:51:13.190
> 
> 标签：c#, asp.net, c#-4.0

我需要调用两个需要时间来执行的方法，但我不需要等待结果。

所以，有人建议我异步调用这些方法，或者发布并执行这些方法。

我做了研究，发现异步调用方法，有时可能会消耗大量内存。

请建议我一个更好的方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:43:39.377

我有类似的问题。
我使用`jQuery ajax`reuring`generic http handler`我`json`
创建了处理程序并将我的业务逻辑放在那里。
它以`json`
我迭代`json`使用 jquery 的形式返回结果。
并创建了我的 html 表单。

## 编辑 1

这里有一些有用的链接
[http://www.codeproject.com/Articles/203621/Call-HTTPhandler-from-jQuery-Pass-data-and-retriev](http://www.codeproject.com/Articles/203621/Call-HTTPhandler-from-jQuery-Pass-data-and-retriev)
[http://www.sharepointnutsandbolts.com/2010/11/sp2010- ajax-part-4-returning-json-from.html](http://www.sharepointnutsandbolts.com/2010/11/sp2010-ajax-part-4-returning-json-from.html)

## 编辑 2

您还可以利用 jtemplate
[http://www.joe-stevens.com/2010/01/05/using-the-jtemplate-jquery-plugin-with-ajax-and-asp-net/](http://www.joe-stevens.com/2010/01/05/using-the-jtemplate-jquery-plugin-with-ajax-and-asp-net/)
[http://encosia .com/use-jquery-and-aspnet-ajax-to-build-a-client-side-repeater/](http://encosia.com/use-jquery-and-aspnet-ajax-to-build-a-client-side-repeater/)