# StackOverflow 问答 13813000-13813999

# javascript - 使用 Grunt.js 迭代完全独特但重叠的主题文件

> ID：13813004
> 
> 赞同：3
> 
> 时间：2012-12-11T03:04:19.517
> 
> 标签：javascript, build, automation, build-process, gruntjs

我正在使用[http://gruntjs.com/](http://gruntjs.com/)创建一个迭代`themes.json`文件的构建脚本，JSON 包含如下所示：

```
{
    "vintage" : {
        "_name"        : "vintage",
        "_long_name"   : "Vintage",
        "_js_includes" : [
            "assets/js/plugins/bootstrap/bootstrap-transition.js",
            [...]
            "assets/js/plugins/*.js",
            "assets/js/_*.js"
        ]
    },
    "pure" : {
        "_name"        : "pure",
        "_long_name"   : "Pure",
        "_js_includes" : [
            "assets/js/plugins/bootstrap/bootstrap-transition.js",
            [...]
            "assets/js/plugins/bootstrap/bootstrap-popover.js",
            "assets/js/plugins/*.js",
            "assets/js/_*.js"
        ]
    }, "mystique" : {
        "_name"        : "mystique",
        "_long_name"   : "Mystique",
        "_js_includes" : [
            [...]
            "assets/js/plugins/*.js",
            "assets/js/_*.js"
        ]
    }
} 
```

我正在`grunt.initConfig`通过

```
grunt.initConfig({
    themes: '<json:themes.json>',
    [...] 
```

方法，问题是`mystique`我上面示例中数组中的最终主题以某种方式覆盖了我正在尝试编写的特定于主题的任务。我希望能够做到`grunt themes:pure`并让它抓住我在此处链接的代码`for`行中的循环内动态注册的动作：`for ( var new_key in themesObject ) {`

[http://jsfiddle.net/6XKrp/3/](http://jsfiddle.net/6XKrp/3/)

无论如何都无法正常工作的相关位如下：

```
for ( var key in themesObject ) {
    initCommand =  'themes:'+themesObject[thisThemeName]._name; // --> themes:pure
    taskString = themesObject[thisThemeName].taskString // --> lint pure:recess pure:concat pure:min pure:mincss pure:enqueue_ver
    grunt.task.registerMultiTask( initCommand, taskString, function() {
            grunt.log.writeln('Now executing task ['+this.target+'] for '+this.name+' theme...');
            grunt.log.writeln( grunt.log.writeflags( this.data, this.target ) );
            grunt.log.writeln( 'this.file = '+this.file);
     }) 
```

上面的代码以`initConfig`看起来正确并且`themes:[my-theme]`应该正在执行的方式记录模板，但是，没有实际的命令执行发生，只有记录方面。

我是否需要将 taskString 传递给`registerMultiTask`函数并在函数本身内重复任务字符串，例如：

`registerMultiTask( initCommand, taskString, function( taskString ) { taskString })`函数然后`grunt.task.run(taskString)`在每个注册函数里面做？我知道这种传递变量的方法旨在接收命令行输入，但是有没有办法将字符串传递给注册函数？

似乎它正在执行所有“平面”的东西，因为它正在执行 JSON 配置对象的顶级，但没有递归到更深层次的嵌套 JSON 执行应该发生的地方......我在这里吗？

对于任何好奇的人，这是 Twitter Bootstrap 的一些修改，基本上，这里的目标是动态创建子主题`themes.json`并将它们导出到同级目录到 grunt 任务和所有内容所在的源......应该是这样的：

```
|source-directory
|--assets
|--|--css
|--|--|--bootstrap
|--|--|--|--less
|--|--scripts
|--|--|--plugins
|pure
|--assets
|--|--css
|--|--|--main.js
|--|--|--main.min.js
|--|--js
|--|--|--scripts.js
|--|--|--scripts.min.js
| vintage
|--assets
|--|--css
|--|--|--main.js
|--|--|--main.min.js
|--|--js
|--|--|--scripts.js
|--|--|--scripts.min.js
... etc. 
```

我有一个偷偷摸摸的怀疑，不知何故咕噜不会让我动态地定义`initConfig`以我打算的方式用循环填充空白`for`......任何对此的解释将不胜感激！

**更新**`themes`：自从最初发布问题以来，我已经达到了内部动态分配按预期工作的地步`initConfig`，但截至目前，模板正在呼应我想要的，但任务本身没有运行。我在每个中记录结果`multiTask`（请参见此处的代码 - [http://jsfiddle.net/6XKrp/2/](http://jsfiddle.net/6XKrp/2/)）并获得预期的结果`this.data`（我想要特定于主题的命令->模板），但定义的操作没有执行。

**更新 2**：事情正在按预期记录，现在正在注册任务，问题是它们要么没有执行，要么只是没有递归执行到 JSON 对象的更深层次，不知道为什么......不`grunt.js`执行以这种方式调用时递归？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T13:31:05.100

本质上，我做错了，没有意识到 JSON 结构在顶层是不可协商的。您可以在顶级函数下嵌套可选和/或多个文件、输出等，但这些顶级 JSON 数据项保留用于本机函数和扩展。

以下是我如何能够完成上述内容的要点： [https ://gist.github.com/4294776](https://gist.github.com/4294776)

# c++ - TMP：如何推广向量的笛卡尔积？

> ID：13813007
> 
> 赞同：23
> 
> 时间：2012-12-11T03:04:28.323
> 
> 标签：c++, algorithm, data-structures, c++11, template-meta-programming

[**对于整数向量向量的笛卡尔积，**](https://stackoverflow.com/a/5279601/975129)有一个出色的 C++ 解决方案（实际上是 2 个解决方案：递归和非递归）。为了说明/简单起见，让我们只关注**非递归版本**。

*我的问题是，如何使用模板概括此代码以获取`std::tuple`如下所示的同质向量：*

`{{2,5,9},{"foo","bar"}}`

*并生成一个齐次向量`tuple`*

`{{2,"foo"},{2,"bar"},{5,"foo"},{5,"bar"},{9,"foo"},{9,"bar"}}`

如果它让生活更轻松，让我们假设输入中的内部向量都是齐次的。所以这样的输入是**不允许**的： `{{5,"baz"}{'c',-2}}`

**编辑**将输入从锯齿状向量更改为元组

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-12T14:13:15.313

更简单的递归解决方案。它将向量作为函数参数，而不是元组。此版本不构建临时元组，而是使用 lambdas。现在它不再进行不必要的复制/移动，并且似乎已成功优化。

```
#include<tuple>
#include<vector>

// cross_imp(f, v...) means "do `f` for each element of cartesian product of v..."
template<typename F>
inline void cross_imp(F f) {
    f();
}
template<typename F, typename H, typename... Ts>
inline void cross_imp(F f, std::vector<H> const& h,
                           std::vector<Ts> const&... t) {
    for(H const& he: h)
        cross_imp([&](Ts const&... ts){
                      f(he, ts...);
                  }, t...);
}

template<typename... Ts>
std::vector<std::tuple<Ts...>> cross(std::vector<Ts> const&... in) {
    std::vector<std::tuple<Ts...>> res;
    cross_imp([&](Ts const&... ts){
                  res.emplace_back(ts...);
              }, in...);
    return res;
}

#include<iostream>

int main() {
    std::vector<int> is = {2,5,9};
    std::vector<char const*> cps = {"foo","bar"};
    std::vector<double> ds = {1.5, 3.14, 2.71};
    auto res = cross(is, cps, ds);
    for(auto& a: res) {
        std::cout << '{' << std::get<0>(a) << ',' <<
                            std::get<1>(a) << ',' <<
                            std::get<2>(a) << "}\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T02:31:08.957

自从我这样做以来已经有一段时间了，但这是第一次尝试。毫无疑问，它可以改进。

```
template<unsigned fixedIndex, class T>
class DynamicTupleGetter
{
    typedef typename std::tuple_element<fixedIndex, T>::type RetType;
public:
    static RetType get(unsigned dynIndex, const T& tupleInstance)
    {
        const RetType& ret = std::get<fixedIndex>(tupleInstance);

        if (fixedIndex == dynIndex)
            return ret;
        return DynamicTupleGetter<fixedIndex - 1, T>::get(dynIndex, tupleInstance);
    }

};

template<class T>
class DynamicTupleGetter<0, T>
{
    typedef typename std::tuple_element<0, T>::type RetType;
public:
    static RetType get(unsigned dynIndex, const T& tupleInstance)
    {
        assert(dynIndex == 0);
        return std::get<0>(tupleInstance);
    }
};
template<class Source>
struct Converter
{
    typedef typename std::tuple_element<0, Source>::type Zeroth;
    typedef typename std::tuple_element<1, Source>::type First;

    static const size_t size0 = std::tuple_size<Zeroth>::value;
    static const size_t size1 = std::tuple_size<First>::value;

    static const size_t  outerProductSize = size0 * size1;

    typedef typename std::tuple_element<0, Zeroth>::type BaseType0;
    typedef typename std::tuple_element<0, First>::type BaseType1;
    typedef typename std::tuple<BaseType0, BaseType1> EntryType;

    typedef std::array<EntryType, outerProductSize> DestinationType;

    DestinationType create(const Source& source)
    {
        Zeroth zeroth = std::get<0>(source);
        First first = std::get<1>(source);
        typedef typename DynamicTupleGetter<size0 -1, Zeroth> ZerothGetter;
        typedef typename DynamicTupleGetter<size1 -1, First> FirstGetter;
        DestinationType result;
        size_t resultIndex = 0;
        for(size_t i = 0; i < size0; ++i)
            for(size_t j = 0; j < size1; ++j)
            {
                std::get<0>(result[resultIndex]) = ZerothGetter::get(i, zeroth) ;        
                std::get<1>(result[resultIndex]) = FirstGetter::get(j, first); 
                ++resultIndex;
            }
            return result;
    }

};

template<class T>
void create(const T& source)
{
    Converter<T> converter;

    Converter<T>::DestinationType result = converter.create(source);

    std::cout << std::get<0>(std::get<3>(result)) << "," << std::get<1>(std::get<3>(result)) << std::endl;
}

auto intPart = std::make_tuple(2,5,9);
auto stringPart = std::make_tuple("foo","bar");
auto source = std::make_tuple(intPart, stringPart);

void f()
{
    create(source);
} 
```

# linq - 使用 IsNullOrWhitespace 检查从 IQueryable 中选择值

> ID：13813008
> 
> 赞同：3
> 
> 时间：2012-12-11T03:04:31.633
> 
> 标签：linq, linq-to-entities, iqueryable

我正在尝试使用`IQueryable`表达式执行以下操作：

```
(from Person p in s
   select new
   {
           label = p.FirstName + " "
       + (string.IsNullOrWhiteSpace(p.MiddleName) ? p.MiddleName + " " : "")
                   + p.LastName,
       value = p.Id
       }).ToList(); 
```

我收到以下错误：

```
LINQ to Entities does not recognize the method 'Boolean 
IsNullOrWhiteSpace(System.String)' method, and this method cannot be 
translated into a store expression. 
```

解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T03:25:54.577

String.IsNullOrWhitespace 是字符串对象的静态函数，不能用于实体框架查询，而是`p.FirstName.StartsWith("S")`实体属性的方法，可以使用。

要回答您的问题，您将不得不滚动自己的内联。尝试这个：

```
(from Person p in s
   select new
   {
       label = p.FirstName + " "
       + ((p.MiddleName != null && p.MiddleName != string.Empty) ? p.MiddleName + " " : "")
                   + p.LastName,
       value = p.Id
   }).ToList(); 
```

# python - 将所有对象中的一个 QuerySet 元素从 int 转换为 Decimal

> ID：13813011
> 
> 赞同：1
> 
> 时间：2012-12-11T03:04:57.650
> 
> 标签：python, django

我正在使用 Django。我正在开发一个视图功能，以尝试显示我的数据库中的预算交易列表以及日期、类别和描述等其他信息。（交易是我的模型，所以它们是交易对象。）交易金额以整数格式存储在数据库中（遵循我在这里看到的一些建议），因为货币据说更容易处理转换为整数并返回十进制。（现在我不太确定。）在将对象集发送到模板进行显示之前，我正在尝试转换回十进制。我不知道如何从每个 Transaction 对象中提取金额，将其转换为十进制，然后将其返回到对象中。我正在尝试做这样的事情：

```
object_list = Transaction.objects.all()

for obj in range(0,object_list.count()):
    object_list[obj].dec_amount = Decimal(object_list[obj].amount/100).quantize(Decimal('0.01')) 
```

和模板，现在非常简单：

```
{% for item in object_list %}

<tr>
<td>{{ item.dec_amount }}</td>
<td>{{ item.category }}</td>
<td>{{ item.date }}</td>

</tr>

{% endfor %} 
```

我基本上是在尝试在每个对象中创建一个新的 dec_amount 属性，但我不知道这是否有效。dec_amount 在我的模板中不可用。我也只是认为必须有一种更优雅的方法来迭代对象以更新它们的数量或创建一个具有十进制值的新属性。或者，也许有一种更有效的方式来拉取 QuerySet，但我不知道如何以这种方式轻松地将两个查询之间的行保持在一起。如何使用循环来修改 QuerySet 的每个对象中的一个属性？

谢谢你的帮助。我得说，我很沮丧——来自 PHP，整个 Decimal 的东西似乎更复杂。

编辑：试图改进我的术语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:04:05.240

如果您只需要访问模板中的十进制值，您可以考虑这样的属性：

```
class Transaction(models.Model):
    @property
    def dec_amount(self):
        return Decimal(self.amount / 100).quantize(Decimal('0.01')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:32:48.970

Jesse the Game 的答案是正确的。您还可以将循环重写为：

```
for obj in object_list:
    obj.dec_amount = Decimal(object_list[obj].amount/100).quantize(Decimal('0.01')) 
```

# python - 如何在python中将字符串数组拆分为二维字符数组

> ID：13813015
> 
> 赞同：4
> 
> 时间：2012-12-11T03:05:16.177
> 
> 标签：python, arrays

我有一个字符串数组，例如：

```
a = ['123', '456', '789'] 
```

我想把它拆分成一个二维字符数组：

```
b = [['1', '2', '3'], ['4', '5', '6'], ['7', '8', '9']] 
```

我在用着

```
[[element for element in line] for line in array] 
```

实现我的目标但发现它不容易阅读，是否有任何内置函数或任何可读的方式来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T03:08:17.233

Looks like a job for `map`:

```
>>> a = ['123', '456', '789']
>>> map(list, a)
[['1', '2', '3'], ['4', '5', '6'], ['7', '8', '9']] 
```

* * *

**Relevant documentation:**

*   [`map`](http://docs.python.org/2/library/functions.html#map)
*   [`list`](http://docs.python.org/2/library/functions.html#list)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T03:07:24.730

you could do something like:

```
first_list = ['123', '456', '789']
other_weirder_list = [list(line) for line in first_list] 
```

Your solution isn't that bad, but you might do something like this or the `map` suggestion by arashajii.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T03:08:29.017

`map(list, array)` should do it.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T03:08:18.817

You can use `map`:

```
>>> a
['123', '456', '789']
>>> map(list, a)
[['1', '2', '3'], ['4', '5', '6'], ['7', '8', '9']] 
```

Although I really don't see why you'd need to do this (unless you plan on editing one specific character in the string?). Strings behave similarly to lists.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-10T16:35:17.617

首先我尝试了`e.split('')`，但我得到了`ValueError: empty separator`。

尝试这个：

```
a = ['123', '456', '789']
b = [list(e) for e in a]
b
[['1', '2', '3'], ['4', '5', '6'], ['7', '8', '9']] 
```

# cursor - sublime text 2 光标突出显示下一个字符...为什么？

> ID：13813017
> 
> 赞同：3
> 
> 时间：2012-12-11T03:05:23.393
> 
> 标签：cursor, settings, keyboard-shortcuts, sublimetext2

我在我的编辑器中粗暴地指了一些东西，我不知道为什么会这样！有人请帮助我。

![我的光标情况的屏幕截图。](../Images/378a0341d9f6f48b6ea23daccb6a6867.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:19:38.603

我今天遇到了同样的问题。

问题肯定是 BlockCursor 插件。不知何故安装了我没有意识到它。我不敢相信我用了足够多的按键来安装它。我永远不会故意安装一个这样做的插件；）以某种方式安装，寿。

禁用它可以解决问题。

# android - Android -.net WCF Generated Service消费

> ID：13813020
> 
> 赞同：1
> 
> 时间：2012-12-11T03:05:56.707
> 
> 标签：android, soap, android-ksoap2

我有一个测试 wcf 服务，我试图从一个测试 android 应用程序中使用它。Android 新手，经过多次试验和错误，Android 1 me nil。

我已经尝试过 KSoap2。

来自各种教程和改编良好网站生成的代码`http://www.wsdl2code.com/`

我已经尝试从教程中滚动我自己的 SOAP 请求，并使用 xmlspy 生成的工作肥皂请求。

有人可以尝试使用“TestResponse”合同并发布他们是如何做到的。它不接受任何参数并返回一个字符串“连接成功”

wsdl 是：

```
http://www.adriley.co.nz:7500/testsvc/Service1.svc?wsdl 
```

XMLSpy 请求是：

```
 <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <SOAP-ENV:Body>
        <m:TestResponse xmlns:m="http://tempuri.org/"/>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T07:06:55.153

我能够使用具有以下值的 TestResponse 服务：

*   网址：[http](http://www.adriley.co.nz:7500/testsvc/Service1.svc) ://www.adriley.co.nz: 7500/testsvc/Service1.svc（不使用 ?wsdl）
*   命名空间： http: [//tempuri.org/](http://tempuri.org/)
*   SoapAction：[http ://tempuri.org/IService1/TestResponse](http://tempuri.org/IService1/TestResponse)
*   方法：测试响应

SoapAction 从这里提取：

```
<wsdl:operation name="TestResponse">
 <soap:operation soapAction="http://tempuri.org/IService1/TestResponse" style="document"/>
... 
```

我希望这有帮助

# java - 如何从服务器中的 HttpRequest 检索 XML

> ID：13813022
> 
> 赞同：1
> 
> 时间：2012-12-11T03:06:20.707
> 
> 标签：java, apache-httpcomponents

我正在尝试修改[此](http://hc.apache.org/httpcomponents-core-ga/httpcore-nio/examples/org/apache/http/examples/nio/NHttpServer.java)代码，这是一个使用 apache httpcomponents 用 java 编写的异步服务器

我的客户端代码是这样的......

```
HttpPost httpPost= new HttpPost("http://localhost:9090");
HttpEntity se= new StringEntity(XMLSTRING);
httpPost.setEntity(se); 
```

我的服务器句柄是这样的

```
 public void handle(
            final HttpRequest request,
            final HttpAsyncExchange httpexchange,
            final HttpContext context) throws HttpException, IOException {
        HttpResponse response = httpexchange.getResponse();
        handleInternal(request, response, context);
        httpexchange.submitResponse(new BasicAsyncResponseProducer(response));
    }

private void handleInternal(
            final HttpRequest request,
            final HttpResponse response,
            final HttpContext context) throws HttpException, IOException { need to get xml from response} 
```

欢迎任何有关如何解决此问题的建议、指针或提示。

- 编辑 -

经过大量搜索找到了一种解决方案

```
HttpEntity entity1 = ((HttpEntityEnclosingRequest)request).getEntity();
        String str = EntityUtils.toString(entity1); 
```

我不确定这是否是最有效的方法。

# java - Jdbc-odbc query issue

> ID：13813023
> 
> 赞同：0
> 
> 时间：2012-12-11T03:06:33.677
> 
> 标签：java, jdbc-odbc

I'm getting syntax error in insert into statement.

```
java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Syntax error in INSERT INTO statement.
at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6957)
at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7114)
at sun.jdbc.odbc.JdbcOdbc.SQLExecute(JdbcOdbc.java:3149)
at sun.jdbc.odbc.JdbcOdbcPreparedStatement.execute(JdbcOdbcPreparedStatement.java:216)
at sun.jdbc.odbc.JdbcOdbcPreparedStatement.executeUpdate(JdbcOdbcPreparedStatement.java:138)
at com.cron.LockboxReports.execute(Reports.java:174)
at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:534) 
```

Here query

```
String sql2 = "INSERT INTO Report (Age,GoLive,Number,CustomerName,Address,Status,SubStatus,Sqrt,Type,Code,Deposit,filesend,approved,sendtoClient,byClient,fileapproved,TestSetups,Images,ImApproved,ProdSetupsAt,TSApprov,ToClient,ReceivedbyClient,ReceivedApproved,ItemsSent,ItemsApproved,ODsend,Approved,TotalEmail,Verified,fyCut,CodeToProd,CodeToComplete,Request,Complete) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";

preparedstatement = con3.prepareStatement(sql2);
            //Statement stmt = con3.createStatement();

            preparedstatement.setString(1, Age);
....
preparedstatement.executeUpdate(); 
```

I have tried with select query , its wokring file.So odbc connection is good.Only problem is query...could you please help me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:10:59.310

一个**？**准备好的语句中缺少。检查它的查询。表中有 35 个字段和 34 个？.

```
String sql2 = "INSERT INTO Report(Age,GoLive,Number,CustomerName,Address,Status,SubStatus,Sqrt,Type,Code,Deposit,filesend,**approved**,sendtoClient,byClient,fileapproved,TestSetups,Images,ImApproved,ProdSetupsAt,TSApprov,ToClient,ReceivedbyClient,ReceivedApproved,ItemsSent,ItemsApproved,ODsend,**Approved**, TotalEmail,Verified,fyCut,CodeToProd,CodeToComplete,Request,Complete) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)"; 
```

在您的表中有两个同名的列被**批准**，这是问题纠正它。

用这个

```
preparedstatement  stmt= con3.prepareStatement(sql2);
        //Statement stmt = con3.createStatement();

        stmt.setString(1, Age);

stmt.executeUpdate(); 
```

# c++ - Recursion: subset sum algorithm setting value in parameters

> ID：13813028
> 
> 赞同：0
> 
> 时间：2012-12-11T03:07:10.230
> 
> 标签：c++, recursion, subset-sum

How do I reset the value of `blockIndex` to its inital state when I call the method?

Say if I call it and pass in the value 4\. I check if that value is greater than 9, if not I add the element at `pos(0)`. But in tracing my function I see that it adds all the values of the vector. I just want it to add 1 element, then when it check if it is greater than 9, and it is not, revert it back to the initial value. How do I do this?

```
int NumCriticalVotes :: CountCriticalVotes(Vector<int> & blocks, int blockIndex)
{
    if (blockIndex >= 9 && blocks.isEmpty())
    {
        return 1;
    }
    if (blocks.isEmpty()) //Fail case
    {
        return 0;
    } else {

        int element = blocks.get(0);
        Vector<int> rest = blocks;
        rest.remove(0);
        return CountCriticalVotes(rest, blockIndex) || CountCriticalVotes(rest, blockIndex + element);
    }
} 
```

# html - CSS3 button pushes whole div downwards

> ID：13813031
> 
> 赞同：0
> 
> 时间：2012-12-11T03:07:26.130
> 
> 标签：html, css, button

I'm trying to embed some CSS3 for my website buttons using custom CSS3 button generator (http://www.cssportal.com/css3-button-generator/). However, it creates some annoying issues. The whole div is pushed downwards! The CSS of the div that includes it is:

```
.login {
    position: absolute;
    right: 10px;
    top: 10px;
    color: #DDD;
    font-size: 14px;
} 
```

And the CSS of the button:

```
.button {
font-family: Arial;
  color: #ffffff;
  font-size: inherit;
  padding: 7px;
  text-decoration: none;
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  -webkit-box-shadow: 0px 1px 3px #666666;
  -moz-box-shadow: 0px 1px 3px #666666;
  text-shadow: 1px 1px 3px #666666;
  border: solid #003366 2px;
  background: -webkit-gradient(linear, 0 0, 0 100%, from(#42aaff), to(#001a33));
  background: -moz-linear-gradient(top, #42aaff, #001a33);
} 
```

If you want to check the html of the website itself, it's the #navbar of [http://www.nosfistis.com/](http://www.nosfistis.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:11:04.470

CSS 规则 padding: 7px 导致它被下推。目前，您已使用绝对定位将所有这些元素向下推 10 像素。您要么需要以负边距向上拉一个按钮（通常是坏主意），要么将所有其他按钮向下推。在这种情况下，通常尽量保持元素的高度相同（即：向较小的元素添加填充）。

# java - Invisible GUI? (Java) (Swing)

> ID：13813032
> 
> 赞同：3
> 
> 时间：2012-12-11T03:07:47.887
> 
> 标签：java, swing, user-interface

I am working on this program, using swing. Every time I export the program, and run it, the GUI I atempt to set up doesn't appear. The JFrame does, but not the inner components. Thanks in advance ~Airis

Code:

```
import java.awt.Graphics2D;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;

public class Login {
    public static void login_Interface(){

        //Start GUI style//
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch (ClassNotFoundException e1) {
            e1.printStackTrace();
        } catch (InstantiationException e1) {
            e1.printStackTrace();
        } catch (IllegalAccessException e1) {
            e1.printStackTrace();
        } catch (UnsupportedLookAndFeelException e1) {
            e1.printStackTrace();
        }
        //      End     //

        JFrame login_Frame = new JFrame("Login - LetsMeet");
        login_Frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        login_Frame.setSize(750, 650);
        login_Frame.setResizable(true);

        JPanel panel_Title = new JPanel();                            //PANEL Title
        panel_Title.setBounds(0, 0, 750, 150);
        panel_Title.setLayout(null);
        Image logo = null;
        try {
            logo = ImageIO.read(new File("Data/images/logo_letsmeet.png"));
        } catch (IOException e) {
            e.printStackTrace();
        }
        Graphics2D logo_out = ((BufferedImage) logo).createGraphics();
        panel_Title.paint(logo_out);

        JPanel login_Panel = new JPanel();                            //LOGIN Panel
        login_Panel.setBounds(0, 150, 350, 150);
        login_Panel.setLayout(null);
        JTextField username_login = new JTextField("Username");
        username_login.setBounds(100, 50, 100, 25);
        JPasswordField password_login = new JPasswordField();
        password_login.setBounds(200, 50, 100, 25);
        JButton login_go = new JButton("Login");
        login_go.setBounds(200, 50, 100, 25);
        login_Panel.add(password_login);
        login_Panel.add(username_login);

        JPanel panel_Divider = new JPanel();                          //PANEL Divider
        login_Panel.setBounds(350, 150, 50, 150);
        panel_Divider.setSize(50, 100);
        panel_Divider.setLayout(null);
        Image sep = null;
        try {
            sep = ImageIO.read(new File("Data/images/sep.png"));
        } catch (IOException e) {
            e.printStackTrace();
        }
        Graphics2D div = ((BufferedImage) sep).createGraphics();
        panel_Title.paint(div);

        JPanel register_Panel = new JPanel();                         //REGISTER Panel
        register_Panel.setBounds(400, 150, 350, 150);
        register_Panel.setLayout(null);

        login_Frame.add(panel_Title);
        login_Frame.add(login_Panel);
        login_Frame.add(panel_Divider);
        login_Frame.add(register_Panel);
        login_Frame.setVisible(true);
    }
} 
```

Errors: None

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T03:13:42.713

**首先...**

`panel_Title.paint(logo_out);`这不是图形在 Swing 中的工作方式……也不是图像在 Swing 中的绘制方式

**第二...**

您应该使用布局管理器，它们将大大减少潜在问题并降低代码的复杂性。

**第三**

您的应用程序应该在事件调度线程的上下文中启动...

```
public static void main(String args[]) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            // Construct your UI here...
        }
    });
} 
```

**第四**

正如安德鲁还指出的那样（+1）......您的图像“似乎”是内部资源，无法通过`File`参考访问。您需要以不同的方式加载这些（嵌入式）资源......

```
logo = ImageIO.read(Login.class.getResource("/Data/images/logo_letsmeet.png")); 
```

您还忽略了这些资源的潜力，`null`这是一种非常危险的做法。

我建议你通读

*   [如何使用图标](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)
*   [使用 JFC/Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T03:17:23.297

除了@MadProgammer 提出的所有建议外，您还需要将控件添加到`JFrame`内容窗格，如下所示：

```
login_Frame.getContentPane().add(panel_Title);
login_Frame.getContentPane().add(login_Panel);
... 
```

然后你的控件应该出现

**更新：**

运行您的实际代码，并向容器 ( `JPanels`) 添加彩色边框，我得到以下信息：

```
panel_Title.setBorder(BorderFactory.createLineBorder(Color.BLUE));
login_Panel.setBorder(BorderFactory.createLineBorder(Color.RED));
panel_Divider.setBorder(BorderFactory.createLineBorder(Color.GREEN));
register_Panel.setBorder(BorderFactory.createLineBorder(Color.YELLOW)); 
```

![在此处输入图像描述](../Images/090a8bfc6716a12fc507a4aaec73bdea.png)

基本上你的代码有布局配置问题。再次，遵循@MadProgammer 的建议。您将来可以使用此边框技巧来调试您的布局

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:35:40.573

```
import java.awt.Graphics2D;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;

public class Login {
    public static void login_Interface(){

        //Start GUI style//
        try {
                 UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch (ClassNotFoundException e1) {
             e1.printStackTrace();
        } catch (InstantiationException e1) {
             e1.printStackTrace();
        } catch (IllegalAccessException e1) {
             e1.printStackTrace();
         } catch (UnsupportedLookAndFeelException e1) {
              e1.printStackTrace();
         }
          //      End     //

          JFrame login_Frame = new JFrame("Login - LetsMeet");
          login_Frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         login_Frame.setSize(750, 650);
          login_Frame.setResizable(true);

         JPanel panel_Title = new JPanel();                            //PANEL Title
         panel_Title.setBounds(0, 0, 750, 150);
         panel_Title.setLayout(null);
         Image logo = null;
         try {
              logo = ImageIO.read(new File("Data/images/logo_letsmeet.png"));
          } catch (IOException e) {
              e.printStackTrace();
         }
         Graphics2D logo_out = ((BufferedImage) logo).createGraphics();
         panel_Title.paint(logo_out);

           JPanel login_Panel = new JPanel();                            //LOGIN Panel
          login_Panel.setBounds(0, 150, 350, 150);
          login_Panel.setLayout(null);
          JTextField username_login = new JTextField("Username");
    username_login.setBounds(100, 50, 100, 25);
    JPasswordField password_login = new JPasswordField();
    password_login.setBounds(200, 50, 100, 25);
    JButton login_go = new JButton("Login");
    login_go.setBounds(200, 50, 100, 25);
    login_Panel.add(password_login);
    login_Panel.add(username_login);

    JPanel panel_Divider = new JPanel();                          //PANEL Divider
    login_Panel.setBounds(350, 150, 50, 150);
    panel_Divider.setSize(50, 100);
    panel_Divider.setLayout(null);
    Image sep = null;
    try {
        sep = ImageIO.read(new File("Data/images/sep.png"));
    } catch (IOException e) {
        e.printStackTrace();
    }
    Graphics2D div = ((BufferedImage) sep).createGraphics();
    panel_Title.paint(div);

    JPanel register_Panel = new JPanel();                         //REGISTER Panel
    register_Panel.setBounds(400, 150, 350, 150);
    register_Panel.setLayout(null);

    login_Frame.add(panel_Title);
    login_Frame.add(login_Panel);
    login_Frame.add(panel_Divider);
    login_Frame.add(register_Panel);
    login_Frame.setVisible(true);
} 
```

}

您没有在此程序中设置任何布局管理器。这就是为什么你不能显示任何东西

# azure - Proper setup for high-availability Azure VMs

> ID：13813033
> 
> 赞同：2
> 
> 时间：2012-12-11T03:08:15.347
> 
> 标签：azure, azure-virtual-machine

I would like to achieve a high-availability scenario on two VMs in Azure. I understand and can follow the directions here: [https://www.windowsazure.com/en-us/manage/windows/common-tasks/manage-vm-availability/](https://www.windowsazure.com/en-us/manage/windows/common-tasks/manage-vm-availability/)

However, my question is this: are the two VMs supposed to be exact replicas of each other, so that when one goes down, the other takes over? Or does the Availability Set look after this, so that the two VMs can have totally different content and still utilise each others' free resources?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:27:26.077

If you're working with Virtual Machines (currently in Preview), then each VM lives in its own VHD. You can make additional instances by creating a VM from an image you build, but at that point, the new VM lives in its own VHD and the actual disk image will then deviate from any other instance as time goes forward. Of course, if each VM is created from the same image, with the same initialization tasks, etc., then they'd have the same software as well. You'd be responsible for upgrading software versions on all the VMs. If you then put these multiple Virtual Machines in an Availability Set, you'd be assured that the Host OS (underlying OS at machine-level) for the VMs you have would *not* be updated at the same time. You'd also know that different VMs in the Availability Set would be situated in different racks, network segments, etc.

More on Availability Sets: Within an Availability Set, you may have any variety of Virtual Machines - Linux, Windows, different functionality. And... you may define more than one Availability Set.

In the PaaS world, where you set up a Cloud Service with Web and/or Worker roles, those VMs are spawned the exact same way. So adding instances means adding more of the equivalent VMs. If the disk crashed, a new VM would be created just like the others. There are no persistent changes to those OS disks. In the case of Cloud Services, there's fault domains and upgrade domains, which are very similar to availability sets.

# android - Identify missed calls in android and send a message to that number

> ID：13813036
> 
> 赞同：2
> 
> 时间：2012-12-11T03:08:21.163
> 
> 标签：android

I count the number of missed calls in the log when state is in the Rigging state. Then Count the number of miss call of the Ideal state. Then compare them. But in the ideal state call log is give the same number of miss call. Can some one help me to validate a to recieved call is a miss call or a not.

```
public class CustomPhoneStateListener extends PhoneStateListener {

Context context;
String callState;
private static boolean wasRiging;
private static int previousNoOfMissCall;
private static int UDF;

public CustomPhoneStateListener(Context context) {
    super();
    this.context = context;
}

@Override
public void onCallStateChanged(int state, String incomingNumber) {
    super.onCallStateChanged(state, incomingNumber);

    switch (state) {
    case TelephonyManager.CALL_STATE_IDLE:
        callState = "IDEAL";
        if (UDF != TelephonyManager.CALL_STATE_IDLE) {
            sendSMSToMissNo(incomingNumber, "Test");
        }
        break;
    case TelephonyManager.CALL_STATE_OFFHOOK:
        callState = "OFFHOOK";
        break;
    case TelephonyManager.CALL_STATE_RINGING:
        callState = "RIGING";
        previousNoOfMissCall = this.getMisscallCount();
        wasRiging = true;
        break;
    default:
        break;
    }
    UDF = state;
    Log.i(">>>Broadcast", "onCallStateChanged " + callState);
}

public int getMisscallCount() {
    String[] projection = { CallLog.Calls.CACHED_NAME,
            CallLog.Calls.CACHED_NUMBER_LABEL, CallLog.Calls.TYPE };
    String where = CallLog.Calls.TYPE + "=" + CallLog.Calls.MISSED_TYPE;

    Cursor c = context.getContentResolver().query(
            CallLog.Calls.CONTENT_URI, projection, where, null, null);
    c.moveToFirst();
    Log.d("CALL", "" + c.getCount()); // do some other operation
    return c.getCount();
}

private void sendSMSToMissNo(String phoneNumber, String message) {
    if (this.validateMissCall(previousNoOfMissCall)) {
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, null, null);
    }
}

private boolean validateMissCall(int preNoOfMissCall) {
    int crtNoOfMissCall = this.getMisscallCount();
    Log.d("CALL", "" + "In validate"+crtNoOfMissCall);
    if (preNoOfMissCall == crtNoOfMissCall) {
        return false;
    }
    return true;
}
}

public class PhoneStateBroadcastReceiver extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {

    TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    telephonyManager.listen(new CustomPhoneStateListener(context), PhoneStateListener.LISTEN_CALL_STATE);
}

} 
```

# iphone - 在 UIViewController - presentViewController 之间切换

> ID：13813040
> 
> 赞同：0
> 
> 时间：2012-12-11T03:08:48.880
> 
> 标签：iphone, uiviewcontroller, ios6

以下代码不适合我。每当调用该方法时，应用程序就会崩溃我做错了什么？

此代码确实使用情节提要格式

在 .h 文件中

```
@class SendVideoViewController;

...

@property (nonatomic) SendVideoViewController *sendVideoViewController; 
```

在 .m 文件中

```
#import "SendVideoViewController.h"
...
@synthesize sendVideoViewController;
...
- (IBAction)signMeUpButtonPressed:(id)sender {
termsAndConditionsViewController = [[TermsAndConditionsViewController alloc] init];
[self presentViewController:termsAndConditionsViewController animated:YES completion:nil];
//[self.view insertSubview:termsAndConditionsViewController.view atIndex:0];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:12:23.583

您的代码应为：

```
sendVideoViewController = [[SendVideoViewController alloc] init];
[self presentViewController:sendVideoViewController animated:YES completion:nil]; 
```

现在您正在实例化一个泛型`UIViewController`类。为了创建您在`SendVideoViewController`类中定义的类型的对象，您需要调用`+alloc`该类，而不是`UIViewController`. 您可能想复习一下[文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:01:13.870

试试这个：

```
sendVideoViewController = [[SendVideoViewController alloc] init];
[self presentViewController:sendVideoViewController animated:YES completion:nil]; 
```

# jsp - In Apache Tiles 2, what's the difference between importAttribute and useAttribute?

> ID：13813044
> 
> 赞同：2
> 
> 时间：2012-12-11T03:09:09.763
> 
> 标签：jsp, apache-tiles

As far as I know both tags import variables from tiles context to JSP so variables are made visible in the JSP. Please elaborate the difference between importAttribute and useAttribute.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T03:52:27.057

显然，两者之间没有区别，除了 in`useAttribute`允许您指定预期变量的类名。

这是标签的`importAttribute`代码：

```
@Override
public void doTag() throws JspException {
    JspContext jspContext = getJspContext();
    Map<String, Object> attributes = model.getImportedAttributes(JspUtil
            .getCurrentContainer(jspContext), name, toName, ignore,
            jspContext);
    int scopeId = JspUtil.getScope(scopeName);
    for (Map.Entry<String, Object> entry : attributes.entrySet()) {
        jspContext.setAttribute(entry.getKey(), entry.getValue(), scopeId);
    }
} 
```

和`useAttribute`标签代码：

```
@Override
public void doTag() throws JspException {
    JspContext pageContext = getJspContext();
    Map<String, Object> attributes = model.getImportedAttributes(JspUtil
            .getCurrentContainer(pageContext), name, id, ignore,
            pageContext);
    if (!attributes.isEmpty()) {
        int scopeId = JspUtil.getScope(scopeName);
        pageContext.setAttribute(getScriptingVariable(), attributes
                .values().iterator().next(), scopeId);
    }
} 
```

# php - How to convert komodo project to netbeans project?

> ID：13813045
> 
> 赞同：-1
> 
> 时间：2012-12-11T03:09:31.883
> 
> 标签：php, netbeans, project, komodo

when i found our php project builded by komodo ide. it was hard adjust to control by the komodo set. so i want convert komodo project to netbeans. is there have any soluction?

How to convert komodo project to netbeans project?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:01:56.297

没有自动化的方法可以做到这一点。

您可以在文本编辑器（甚至 Komodo 本身）中安全地打开 KPF 文件以查看内容。它只是 XML。您为项目分配的任何非默认设置都将在此处列出。除非您已经过火并更改了*所有内容*，否则只需根据需要在 Netbeans 中手动进行更改应该是一件非常简单的事情。

# php - How is MVC supposed to work in CodeIgniter

> ID：13813046
> 
> 赞同：10
> 
> 时间：2012-12-11T03:09:42.523
> 
> 标签：php, codeigniter, model-view-controller, web

As a mostly self-taught programmer I'm late to the game when it comes to design patterns and such. I'm writing a labor management webapp using CodeIgniter.

I did a bit of MVC ASP.NET/C# and Java at school, and the convention was that your model mainly consisted of classes that represented actual objects, but also abstracted all the database connection and such...which is pretty standard MVC stuff from what I've gathered.

I imagine I'm right in saying that CI abstracts the database connection completely out of sight (unless you go looking), which is par for the course, and the models you can create can abstract the 'generic' CRUD methods a bit more to create some methods that are more useful for the specific model.

The thing I have a problem with, because it's different to what I'm used to with MVC, is that whenever you say...return a row from a database, the convention is to just put it in an associative array or standard object with the properties representing the data from the row.

In ASP you'd have actual classes that you could construct to store this information. For example you'd have a `House` class and the data would be stored as properties (e.g. `bedrooms`, `bathrooms`, `address`) and the methods would represent useful things you could do with the data (e.g. `printInfo()` may `print("$address has $bedrooms bedrooms and $bathrooms bathrooms!')`).

I'm getting the impression — just from code I've seen around the Internet — that this isn't the standard way of doing things. Are you supposed to just use arrays or generic objects, and say...do `$this->house_model->print_info($houseobject)` instead of `$houseobject->print_info();`?

Thanks.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-11T14:20:37.150

尽管它声称相反，Codeigniter 根本不使用 MVC（事实上，很少有 Web 框架这样做！）它实际上使用了 PAC（Presentation-abstraction-control）架构。本质上，在 PAC 中，表示层由表示器（CodeIgniter 称为控制器）提供数据，而在 MVC 中，视图从模型中获取自己的数据。由于 MVC 的这种错误标记而存在混淆。

因此，CodeIgniter（以及大多数其他流行的 Web 框架）不鼓励使用适当的模型，而只是使用非常基本的数据访问它的位置。由于“胖控制器”，这会导致大量问题。与域相关的代码都不能重用。

进一步阅读：

*   [MVC 与 PAC](http://www.garfieldtech.com/blog/mvc-vs-pac "MVC 与 PAC")

*   [MVC 中的 M：为什么模型会被误解和不被欣赏](http://blog.astrumfutura.com/2008/12/the-m-in-mvc-why-models-are-misunderstood-and-unappreciated/ "MVC 中的 M：为什么模型会被误解和不被欣赏")

*   [Model-View-Confusion 第 1 部分：View 从 Model 中获取自己的数据](http://r.je/views-are-not-templates.html "Model-View-Confusion：View从Model中获取自己的数据")

*   [胖控制器](http://codebetter.com/iancooper/2008/12/03/the-fat-controller/ "胖控制器")

这是 PHP 社区中普遍存在的混淆点（MVC 与 PAC 文章将问题确定为源自 PHP 社区。该问题写于 2006 年，没有任何改变，如果有的话，情况会变得更糟，因为有更多的框架和教程教一个错误的 MVC 定义。）以及为什么那些来自 Web 开发之外的背景的人在看“MVC”PHP 代码时会感到困惑，这是可以理解的。PHP 中的大多数“MVC”实现都不是 MVC。您认为模型应该结构正确是正确的，将自己标记为 MVC 是错误的 CodeIgniter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:13:54.430

CodeIgniter 在遵循 MVC 模式方面非常灵活，这取决于你想强制执行多少。您将在网上找到的大多数 CodeIgniter 代码与您描述的完全一样，模型实际上只是方法的集合，并不力求严格表示一个对象。

但是，如果您喜欢在 CI 中编写代码（这是我经常做的事情），您也可以使用这种方式进行编码。它使代码更具可维护性和可读性，并且看起来更好。

*PS - 如果你刚接触 PHP 中的 MVC，你可能想看看周围。像 CodeIgniter 和 CakePHP 这样的框架（在某种程度上）是上一代的。CI 最初是为 PHP4 编写的，其中 OOP 支持在 PHP 中有点参差不齐。一个名为[Fuel](http://fuelphp.com/)的 CI 分支是专门为解决这个问题而创建的（尽管我相信在某些时候，他们只是决定从头开始重写它会更好地为他们服务）。CI 确实具有拥有大量文档和在线帮助的优势，因为它比 Fuel 使用更广泛。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T05:53:03.503

控制器

```
 // get the houses result from the model 
 // return it as an object 
 if( ! $houses = $this->house_model->findHouses($search) )
 { // if no results - call a no results view 
 $this->load->view( 'no_results', $data );
 }
 else
 { 
 // pass the houses object to data so it automatically goes to view
 data['houses'] = $houses ; 

 // Call your view
 $this->load->view( 'house_results', $data );
 } 
```

看法

```
// we already know we have at least one house,
// thats what the controller is for, so we dont need to do an isset() etc for $houses

foreach $houses as $house :

echo 'This fine house at ' . $house->address . 'has '. $house->bedrooms . ' bedrooms and ' $house->bathrooms . ' bathrooms' ; 

endforeach ; 
```

显然有不同的方法可以在视图中创建最后一个句子，但我们的想法是，当我们到达视图时 - 它尽可能简单。

所以对于复杂的查询，比如向我展示好学校旁边的所有房子，有 2 间卧室和我的宠物 Ocelot 的房间。这就是模型中发生的事情。所有混乱的条件和业务规则。视图应该是具体的——如果你没有结果——那么就只显示一个没有结果的视图。Versus - 在视图中检查结果，然后根据没有结果更改显示。您制作的视图越具体，构建起来就越容易，它会鼓励您在控制器和模型中做出选择。

# html - 试图使页面居中，其中的图像从页面两侧溢出

> ID：13813051
> 
> 赞同：2
> 
> 时间：2012-12-11T03:10:01.963
> 
> 标签：html, css

我是 HTML/CSS 新手，正在尝试为明年的婚礼建立一个网站。[在这里](http://www.sarahandmike.ca)的主页上，我的主 div 的两侧都有相同的功能区图像。我想要发生的是，无论屏幕分辨率如何，网站都保持居中（根据分辨率在两侧显示或多或少的色带）。它似乎适用于左侧功能区，但右侧不想合作。这个问题在 iPad 上尤其严重，整个站点显示为左对齐并且整个右侧功能区都可见。

欢迎任何帮助，

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:17:56.323

将以下 css 应用于 html：

```
overflow:hidden; 
```

应用于`overflow:hidden`img 将不起作用，img 相对于其自身的宽度不会溢出。（与您认为溢出属性的工作方式相反）

# asp.net - 在 ASP.NET GridView 问题中显示 SSAS 数据

> ID：13813056
> 
> 赞同：0
> 
> 时间：2012-12-11T03:10:47.050
> 
> 标签：asp.net

我使用 adomd 开发了一个 ASP.Net Web 应用程序来显示 ssas 多维数据集数据。

我能够将数据绑定到gridview，但问题是我无法在gridview中显示标题名称。我也通读了下面的文章，但没有运气。不知道如何解决它。

```
http://www.codeproject.com/Articles/28290/Microsoft-Analysis-Services-2005-Displaying-a-grid 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:54:55.600

使用`RowDataBound`gridview的事件。然后在事件处理程序中检查标题行并在适当的单元格中设置适当的标题。例如，假设我们有这个 gridview 标记：

```
<asp:GridView runat="server" AutoGenerateColumns="True" ID="gv" OnRowDataBound="RowDataBound"></asp:GridView> 
```

并且，在页面加载时，我们正在绑定数据，例如：

```
var myData = Enumerable.Range(1, 5).Select(i => new { Value = i.ToString() });
gv.DataSource = myData;
gv.DataBind(); 
```

在 rowdatabound 事件处理程序中，我们可以这样做来更改标题：

```
protected void RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Header)
    {
        e.Row.Cells[0].Text = "My Custom Header";
    }
} 
```

# c# - WinRT - MessageDialog.ShowAsync 将在我的自定义类中抛出 UnauthorizedAccessException

> ID：13813065
> 
> 赞同：11
> 
> 时间：2012-12-11T03:12:24.973
> 
> 标签：c#, .net, windows-runtime, unauthorizedaccessexcepti, messagedialog

我想编写自己的控件，当调用 ctor 时，会显示一个 MessageBox。

```
public class Class1
{
    public Class1()
    {
        ShowDialog();
    }
    void ShowDialog()
    {
        SynchronizationContext context = SynchronizationContext.Current;
        if (context != null)
        {
            context.Post((f) =>
            {
                MessageDialog dialog = new MessageDialog("Hello!");
                dialog.ShowAsync();
            }, null);
        }
    }
} 
```

如果我的课程被某人使用，并编写如下代码，则始终会抛出 UnauthorizedAccessException`dialog.ShowAsync();`

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
        {

            ClassLibrary1.Class1 c1 = new ClassLibrary1.Class1();
            MessageDialog dialog1 = new MessageDialog("");
            dialog1.ShowAsync();
        } 
```

有没有办法毫无例外地显示消息对话框？

* * *

**我找到了一个方法，享受它！**

```
Task ShowDialog()
        {
            CoreDispatcher dispatcher = Windows.ApplicationModel.Core.CoreApplication.MainView.CoreWindow.Dispatcher;
            Func<object, Task<bool>> action = null;
            action = async (o) =>
            {
                try
                {
                    if (dispatcher.HasThreadAccess)
                        await new MessageDialog("Hello!").ShowAsync();
                    else
                    {
                        dispatcher.RunAsync(CoreDispatcherPriority.Normal,
                        () => action(o));
                    }
                    return true;
                }
                catch (UnauthorizedAccessException)
                {
                    if (action != null)
                    {
                        Task.Delay(500).ContinueWith(async t => await action(o));
                    }
                }
                return false;
            };
            return action(null);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T03:20:47.607

由于 MessageDialogue 需要在 UI 线程上运行，您可以尝试将其切换为：

```
var dispatcher = Windows.UI.Core.CoreWindow.GetForCurrentThread().Dispatcher;
dispatcher.RunAsync(DispatcherPriority.Normal, <lambda for your code which should run on the UI thread>); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T13:00:37.443

更清洁的解决方案可能如下所示。有趣的部分隐藏在 showDialogAsync() 中。为方便起见，您可以使用 Close() 方法以编程方式再次关闭当前对话框。IUIDispatcher 是另一个帮助界面，您可以轻松地重新构建自己：

```
 private readonly IUIDispatcher _dispatcher;
    readonly Object _queueMonitor = new object();
    readonly Object _showMonitor = new object();
    private IAsyncOperation<IUICommand> _currentDialogOperation;
    readonly Queue<MessageDialog> _dialogQueue = new Queue<MessageDialog>();

    public async Task ShowAsync(string content)
    {
        var md = new MessageDialog(content);
        await showDialogAsync(md);
    }

    public async Task ShowAsync(string content, string caption)
    {
        var md = new MessageDialog(content, caption);
        await showDialogAsync(md);
    }

    public async Task<MessageDialogResult> ShowAsync(string content, MessageDialogType dialogType)
    {
        var messageDialogResult = await ShowAsync(content, null, dialogType);
        return messageDialogResult;
    }

    public async Task<MessageDialogResult> ShowAsync(string content, string caption, MessageDialogType dialogType)
    {
        var result = MessageDialogResult.Ok;

            var md = string.IsNullOrEmpty(caption) ?  new MessageDialog(content) : new MessageDialog(content, caption);

        switch (dialogType)
        {
            case MessageDialogType.Ok:
                md.Commands.Add(new UICommand(ResWrapper.Strings["MessageDialogButtonOk"], command => result = MessageDialogResult.Ok));
                md.CancelCommandIndex = 0;
                md.DefaultCommandIndex = 0;
                break;
            case MessageDialogType.OkCancel:
                md.Commands.Add(new UICommand(ResWrapper.Strings["MessageDialogButtonOk"], command => result = MessageDialogResult.Ok));
                md.Commands.Add(new UICommand(ResWrapper.Strings["MessageDialogButtonCancel"], command => result = MessageDialogResult.Cancel));
                md.DefaultCommandIndex = 0;
                md.CancelCommandIndex = 1;
                break;
            case MessageDialogType.YesNo:
                md.Commands.Add(new UICommand(ResWrapper.Strings["MessageDialogButtonYes"], command => result = MessageDialogResult.Yes));
                md.Commands.Add(new UICommand(ResWrapper.Strings["MessageDialogButtonNo"], command => result = MessageDialogResult.No));
                  md.DefaultCommandIndex = 0;
                md.CancelCommandIndex = 1;
                break;
            case MessageDialogType.YesNoCancel:
                md.Commands.Add(new UICommand(ResWrapper.Strings["MessageDialogButtonYes"], command => result = MessageDialogResult.Yes));
                md.Commands.Add(new UICommand(ResWrapper.Strings["MessageDialogButtonNo"], command => result = MessageDialogResult.No));
                md.Commands.Add(new UICommand(ResWrapper.Strings["MessageDialogButtonCancel"], command => result = MessageDialogResult.Cancel));
                md.DefaultCommandIndex = 0;
                md.CancelCommandIndex = 1;
                break;
            default:
                throw new ArgumentOutOfRangeException("dialogType");
        }

        await showDialogAsync(md);

        return result;
    }

    /// <summary>
    /// Shows the dialogs, queued and one after the other.
    /// We need this as a workaround for the the UnauthorizedAcsess exception. 
    /// </summary>
    /// <param name="messageDialog">The message dialog.</param>
    /// <returns></returns>
    async Task showDialogAsync(MessageDialog messageDialog)
    {
        //Calls this function in a separated task to avoid ui thread deadlocks.
        await Task.Run(async () => 
        { 
            lock (_queueMonitor)
            {
                _dialogQueue.Enqueue(messageDialog);
            }
            try
            {
                while (true)
                {
                    MessageDialog nextMessageDialog;
                    lock (_queueMonitor)
                    {
                        if (_dialogQueue.Count > 1)
                        {
                            Debug.WriteLine("MessageDialogService.cs | showDialogAsync | Next dialog is waiting for MessageDialog to be accessable!!");
                            Monitor.Wait(_queueMonitor); //unlock and wait - regains lock after waiting
                        }

                        nextMessageDialog = _dialogQueue.Peek();
                    }

                    var showing = false;
                    _dispatcher.Execute(async () =>  
                    {
                        try
                        {
                            lock (_showMonitor)
                            {
                                showing = true;
                                _currentDialogOperation = nextMessageDialog.ShowAsync();
                            }

                            await _currentDialogOperation;

                            lock (_showMonitor)
                                _currentDialogOperation = null;
                        }
                        catch (Exception e)
                        {
                            Debug.WriteLine("MessageDialogService.cs | showDialogAsync | " + e);
                        }
                        lock (_showMonitor)
                        {
                            showing = false;
                            Monitor.Pulse(_showMonitor); //unlock and wait - regains lock after waiting
                        }
                    });

                    lock (_showMonitor)
                    {
                        if (showing)
                        {
                            Debug.WriteLine("MessageDialogService.cs | showDialogAsync | Waiting for MessageDialog to be closed!!");
                            //we must wait here manually for the closing of the dialog, because the dispatcher does not return a waitable task.
                            Monitor.Wait(_showMonitor); //unlock and wait - regains lock after waiting
                        }
                    }
                    Debug.WriteLine("MessageDialogService.cs | showDialogAsync | MessageDialog  was closed.");
                    return true;
                }
            }
            finally
            {
                //make sure we leave this in a clean state
                lock (_queueMonitor)
                {
                    _dialogQueue.Dequeue();
                    Monitor.Pulse(_queueMonitor);
                }
            }
        });
    }

    public void Close(string keyContent="")
    {
        try
        {
            if (keyContent.IsNullOrEmpty())
            {
                lock (_showMonitor)
                {
                    if (_currentDialogOperation == null) return;
                    _currentDialogOperation.Cancel();
                    _currentDialogOperation = null;
                }
            }
            else
            {
                var cancel = false;
                lock (_queueMonitor)
                {
                    if (_dialogQueue.Count == 0)
                        return;

                    var currentDialog = _dialogQueue.Peek();

                    Debug.WriteLine("MessageDialogService.cs | Close | {0}", currentDialog.Content);
                    if (currentDialog.Content == keyContent)
                    {
                        cancel = true;
                    }
                }
                if (!cancel) return;
                lock (_showMonitor)
                {
                    if (_currentDialogOperation == null) return;
                    _currentDialogOperation.Cancel();
                    _currentDialogOperation = null;
                }
            }
        }
        catch (Exception e)
        {
            Debug.WriteLine("MessageDialogService.cs | Close | " + e);
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:11:30.883

您可以随时使用

```
Execute.OnUIThread( async () => {
...
var dialog = new MessageDialog(yourMessage);
await dialog.ShowAsync();
...
}); 
```

如果您尝试从后台线程启动多个对话框，这并不能解决 UI 中的竞争条件。但是你可以使用 try/catch 来确保你涵盖了这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T07:23:52.000

我想我已经找到了。在除主线程之外的任何其他线程中创建消息框时，我遇到了同样的问题。这是 C++ 解决方案，但我认为您可以轻松转换它；）

```
 IAsyncOperation<IUICommand^> ^Op = msgbox->ShowAsync();
    task<IUICommand^>( Op ).then([=](IUICommand^ C)
    {

    }).then([](task<void> t) 
        {
            try 
            {
                t.get();
            }
            catch (Platform::Exception ^e)
            {   
                //ERROR!                            
            }           
        }); 
```

附带说明，这是处理任何 WinRT/Windows 8 Store C++ 异常的正确方法。

# jquery - JQuery覆盖函数中的掩码也使主div元素变暗

> ID：13813068
> 
> 赞同：1
> 
> 时间：2012-12-11T03:13:04.273
> 
> 标签：jquery, overlay

使用此演示执行 JQuery 覆盖调用：http: [//jquerytools.org/demos/overlay/custom-effect.html](http://jquerytools.org/demos/overlay/custom-effect.html)

覆盖显示给我，但覆盖中的掩码影响整个页面并且不暴露主 div 元素。IE弹出框变暗并且不透明。

我正在使用以下内容提取 JQuery 库和工具：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://cdn.jquerytools.org/1.2.7/all/jquery.tools.min.js"></script> 
```

这是我的代码：

HTML：

```
<div class="contact_overlay" id="overlay_1">
<div class="close">X</div>
</div> 
```

CSS：

```
.contact_overlay {
display:none;
z-index: 1000;
background-color:#d1e8db;
width:700px;
min-height:350px;
border:1px solid #666; 
-moz-box-shadow:    0 0 90px 5px #000;
-webkit-box-shadow: 0 0 90px #000;
box-shadow:         0 0 90px 5px #000;
margin-left: 100px;
margin-right: 100px;
}
.contact_overlay .close {
position:absolute;
right:3px;
top:3px;
cursor:pointer;
width: 22px;
height: 17px;
-webkit-border-radius: 11px;
-moz-border-radius: 11px;
border-radius: 11px;
border: 0px;
background-color: #959595;
color: #FFFFFF;
font-weight: bold;
font-size: 10px;
text-align: center;
padding-top: 6px;
} 
```

JavaScript：

```
$.easing.drop = function (x, t, b, c, d) {
return -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;
};
$.tools.overlay.addEffect("drop", function(css, done) {
var conf = this.getConf(),
overlay = this.getOverlay();
if (conf.fixed)  {
    css.position = 'fixed';
} else {
    css.top += $(window).scrollTop();
    css.left += $(window).scrollLeft();
    css.position = 'absolute';
}
overlay.css(css).show();
overlay.animate(
    { top: '+=55',  opacity: 1,  width: '+=20'}, 400, 'drop', done
);
}, function(done) {
this.getOverlay().animate(
    {top:'-=55', opacity:0, width:'-=20'}, 300, 'drop',
    function() {
        $(this).hide();
        done.call();
    });
});
$(document).ready(function() {
  $("a[rel]").overlay({
    effect: 'drop',
    mask: '#789',
    })
}); 
```

问题的示例图像： ![面具问题](../Images/9f75de82309518b57a778df7e1bb77a8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:55:09.700

看起来您需要为弹出窗口提供比叠加层更高的 z-index 值。

# c++ - MSVC 的可变参数函数模板专业化中的错误？

> ID：13813069
> 
> 赞同：3
> 
> 时间：2012-12-11T03:13:22.027
> 
> 标签：c++, visual-studio, c++11, variadic-templates

使用 Visual Studio Nov 2012 CTP，它支持可变参数模板（除其他外）。以下代码：

```
template<int, typename... Args>
void myfunc(Args... args)
{
}

template<>
void myfunc<1, float>(float)
{
} 
```

产生以下错误：

```
错误 C2785：“void myfunc(Args...)”和“void myfunc(float)”具有不同的返回类型
```

```
错误 C2912：显式特化“void myfunc(float)”不是函数模板的特化
```

（是的，第一个很有趣）

所以我的问题是：

1）我在这里写合法的 C++11 吗？

2）如果是，有没有办法在提交之前找出这是否是 MSVC 中的一个已知错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:31:30.323

1.  这是完全合法的代码；gcc-4.7.2 和 clang 3.0 都接受它。

2.  尝试搜索[Microsoft Connect](http://connect.microsoft.com/visualstudio)。

# ssh - 在多台机器上运行相同的脚本

> ID：13813076
> 
> 赞同：0
> 
> 时间：2012-12-11T03:14:47.633
> 
> 标签：ssh, amazon-ec2, cluster-computing

我已经设置了几个 EC2 实例，它们都在主目录中有一个脚本。我想在每个 EC2 实例上同时运行脚本，即不经过循环。

我已经看到用于 OSX 的 csshX 用于终端交互式使用......但想知道命令行代码是什么来执行命令

```
ssh user@ip.address . test.sh 
```

在所有实例中运行 test.sh 脚本，因为...

```
csshX user@ip.address.1 user@ip.address.2 user@ip.address.3 . test.sh 
```

不工作...

我想通过命令行执行此操作，因为我想通过将其添加到 shell 脚本中来自动化此过程。

和奖励积分......如果有一种方法可以将消息发送回发送命令的机器，它已完成运行脚本，那将是非常棒的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:33:53.487

拥有一个在后台运行所有这些东西的主 shell 脚本是否足够好？例如，

```
#!/bin/sh
pidlist="ignorethis"
for ip in ip1 ip2
do
    ssh user@$ip . test.sh &
    pidlist="$pidlist $!" # get the process number of the last forked process
done

# Now all processes are running on the remote machines, and we want to know
# when they are done.

# (EDIT) It's probably better to use the 'wait' shell built-in; that's
# precisely what it seems to be for.
while true
do
    sleep 1
    alldead=true
    for pid in $pidlist
    do
        if kill -0 $pid > /dev/null 2>&1
        then
            alldead=false
            echo some processes alive
            break
        fi
    done
    if $alldead
    then
        break
    fi
done 
```

回声全部完成。

它不会完全同时发生，但它应该并行启动远程脚本。

# heroku - 将 Play 2.1 RC1 Java 应用程序部署到 Heroku 得到“NoSuchMethodError scala.Predef$.augmentString”

> ID：13813078
> 
> 赞同：0
> 
> 时间：2012-12-11T03:14:50.793
> 
> 标签：heroku, playframework-2.1

此应用程序是从 Play 2.0.4 迁移而来的。到 2.1-RC1。当推送到 heroku 时，我从 heroku 日志中得到了这个错误。我应该为 Play 2.1 使用不同的构建包吗？

```
2012-12-11T03:04:36+00:00 heroku[web.1]: Starting process with command `target/start -Dhttp.port=${PORT} -Dconfig.resource=prod.conf ${JAVA_OPTS}`
2012-12-11T03:04:38+00:00 app[web.1]: Exception in thread "main" java.lang.NoSuchMethodError: scala.Predef$.augmentString(Ljava/lang/String;)Lscala/collection/immutable/StringOps;
2012-12-11T03:04:38+00:00 app[web.1]:   at play.core.server.NettyServer$.createServer(NettyServer.scala:111)
2012-12-11T03:04:38+00:00 app[web.1]:   at play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:153)
2012-12-11T03:04:38+00:00 app[web.1]:   at play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:152)
2012-12-11T03:04:38+00:00 app[web.1]:   at scala.Option.map(Option.scala:145)
2012-12-11T03:04:38+00:00 app[web.1]:   at play.core.server.NettyServer$.main(NettyServer.scala:152)
2012-12-11T03:04:38+00:00 app[web.1]:   at play.core.server.NettyServer.main(NettyServer.scala) 
```

这是我的 Build.scala。

```
val appDependencies = Seq(
      javaCore, javaJdbc, javaEbean,
      "org.webjars" % "bootstrap" % "2.1.1",
      "postgresql" % "postgresql" % "9.1-901-1.jdbc4",
      "rome" % "rome" % "1.0",
      "com.typesafe" %% "play-plugins-mailer" % "2.1-SNAPSHOT",

      "commons-codec" % "commons-codec" % "1.6",
      "commons-io" % "commons-io" % "2.3",
      "com.typesafe" % "play-plugins-inject" % "2.0.2",
      "com.typesafe" %% "play-plugins-mailer" % "2.1-SNAPSHOT",
      "com.typesafe.akka" % "akka-testkit" % "2.0.2",
      "org.imgscalr" % "imgscalr-lib" % "4.2",
      "org.codehaus.jackson" % "jackson-jaxrs" % "1.9.5",
      "org.codehaus.jackson" % "jackson-xc" % "1.9.5",
      "org.codehaus.jackson" % "jackson-mapper-asl" % "1.9.5",
      "org.codehaus.jackson" % "jackson-core-asl" % "1.9.5",
      "org.mindrot" % "jbcrypt" % "0.3m"

    )

val main = play.Project(appName, appVersion, appDependencies).settings(
      resolvers += "webjars" at "http://webjars.github.com/m2",
      resolvers += "Mave2" at "http://repo1.maven.org/maven2",
      resolvers += "jets3t" at "http://www.jets3t.org/maven2",
      resolvers += "Typesafe Releases Repository" at "http://repo.typesafe.com/typesafe/releases/",
      resolvers += "Typesafe Snapshots Repository" at "http://repo.typesafe.com/typesafe/snapshots/",
      resolvers += Resolver.url("Typesafe Ivy Snapshots", url("http://repo.typesafe.com/typesafe/ivy-snapshots/"))(Resolver.ivyStylePatterns),
      resolvers += "Daniel's Repository" at "http://danieldietrich.net/repository/snapshots/"
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:26:13.767

就我而言，我必须从 build.scala 中删除此依赖项

```
"com.typesafe" % "play-plugins-inject" % "2.0.2" 
```

并从 play.plugins 中删除插件。

```
1500:com.typesafe.plugin.inject.ManualInjectionPlugin 
```

这个插件引入了 play_2.9，它依赖于 ehcache 并导致 play 第二次初始化 play 的缓存，而来自 Play 2.1 的 play_2.10 已经初始化了它。

# javascript - 在 Chrome 中处理 Silverlight AppExit

> ID：13813080
> 
> 赞同：1
> 
> 时间：2012-12-11T03:14:54.103
> 
> 标签：javascript, wcf, silverlight, google-chrome, pagemethods

我目前正在 onBeforeUnload 上触发一个事件来处理应用程序的不必要退出。它在 IE 和 Firefox 中运行良好，我可以从我的服务实例中注销 WCF 双工客户端。但它在 Chrome 中不起作用。

有什么解决方法吗？因此，我的 Chrome 回调总是抛出超时异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:29:02.453

Chrome 非常粗略地终止了 Silverlight 插件。Application.Exit 事件中的代码可能无法按预期工作。但是您可以询问用户，他或她是否真的想离开该页面。请注意，下面的事件处理程序不返回 null。

```
<script type="text/javascript">
    // should work in chrome.
    window.onbeforeunload = function () { return ""; };
</script> 
```

# jquery - 转到 HTML 页面中的特定选择

> ID：13813081
> 
> 赞同：-2
> 
> 时间：2012-12-11T03:15:00.920
> 
> 标签：jquery, html

我有一个带有 jquery、javascript 的 html 页面。我使用 apache 网络服务器，如果我将直接 URL 放在浏览器中可以正常工作，例如：localhost/mysite/index.html 但如果我使用页面的一部分，让我们说我有一个 div（可点击按钮或面板）点击它应该重定向到另一个页面。但是，如果我尝试使用“localhost/mysite/index.html#clicable”在浏览器中访问该页面，那么它会重定向到索引页面，但不会重定向到它应该第一次重定向到的页面，但是一旦点击了可点击，从那时起带有 # 的浏览器 URL 就可以正常工作了。我所需要的只是当我通过带有 # 的地址栏访问时，它应该重定向到它应该重定向到的页面。TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:22:00.747

除了`<a name="clicable"></a>`已经提到的锚点之外，您还可以给任何元素一个`id`“clicable”以从 URL 中的哈希直接滚动到它，例如：`<h2 id="clicable">Text</h2>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:17:45.563

添加这个

```
<a name="clicable"></a> 
```

到页面的任何部分

# iphone - 使用 iOSOpenDev 构建时图标大一点

> ID：13813089
> 
> 赞同：1
> 
> 时间：2012-12-11T03:16:07.960
> 
> 标签：iphone, icons, jailbreak

我使用大小为 57*57 的 icon.png 文件和大小为 114*114 的 icon@2x.png 文件作为应用程序图标。当构建为安装在 /var/mobile/Applications 的普通应用程序时，一切看起来都很正常。

![没有 iOSOpenDev](../Images/49dbfd1c806e7fa564fe8e3d0b35f524.png)

但是当我使用安装在 /Applications 的 iOSOpenDev 构建它时，图标变得比其他图标大一点（右侧图标）。

![与 iOSOpenDev](../Images/46125397c44e2a6fb4acbd702b26472f.png)

有任何想法吗？如何将图标的大小设置为正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:21:32.887

我以前也注意到了这一点。这不仅仅是一个 iOSOpenDev 问题。我看到越狱应用程序安装到`/Applications`，**也不**是用 iOSOpenDev 构建的。 *我不确定*，但我猜是这样的：

对于 iOS 应用程序，您可以通过在应用程序的 Info.plist 文件中设置标志来选择操作系统是否应将光泽效果应用于您的应用程序图标：

```
<key>UIPrerenderedIcon</key>
<true/> 
```

因此，很明显，操作系统不仅仅以您最初绘制它们的方式显示应用程序图标。我猜操作系统也会对应用程序图标应用标准阴影效果，至少对于普通的应用程序商店应用程序（安装在 中`/var/mobile/Applications`）。不同之处在于，对于那些 App Store 应用程序来说，这种效果不是*可选的。*

查看我越狱的 Retina iPhone 的屏幕截图，iOS 似乎为应用程序图标保留了 120 像素（用于 Retina 设备），如果您只是提供 114x114 的图标图像，它将按比例放大。这就是你所看到的。

因此，请尝试将您的应用图标设置为**120x120**像素。您不需要更改实际的圆角矩形正方形。只需在照片编辑器中打开它，然后将*画布*增加到 120x120。额外的空间应该是透明的。看来您不希望圆角矩形**居中**，而是在其上方可能有 1 个像素的透明空间，在其下方有大约 5 个像素的透明度。

`Icon@2x.png`用这个更大的**120x120**尺寸重建您的应用程序，看看它的外观。

如果你真的想让它变得完美，我认为你还需要自己绘制阴影效果。光源来自顶部，因此阴影应位于图标下方。

请注意，对于安装在 中的越狱应用程序`/Applications`，您的应用程序图标绝对可以具有透明度（并且 PNG 支持它）。Apple 不希望使用透明图标图像的只是 App Store 应用程序。

这是来自 Cydia 的应用程序图标，位于您的文件系统中`/Applications/Cydia.app/icon\@2x.png`。如您所见，它带有光泽效果和嵌入图像的底部阴影：

![在此处输入图像描述](../Images/f361b34ee3b63862e7d78baf1b6c08e4.png)

# android - 如何通过php同时从android发送数据和图像

> ID：13813092
> 
> 赞同：0
> 
> 时间：2012-12-11T03:16:46.087
> 
> 标签：android

在我成功发送数据和图像之前，但它是通过两个不同的程序完成的

这是我发送数据的代码

公共类 HTTPPostData 扩展 AsyncTask {

```
 @Override
    protected String doInBackground(String... urls) {
        String Result = "";
        byte[] Bresult = null;
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost(URL_TO_LOAD);
        try {
            List<NameValuePair> nameValuePairs = LPD;
            post.setEntity(new UrlEncodedFormEntity(nameValuePairs, "UTF-8"));
            HttpResponse response = client.execute(post);
            StatusLine statusLine = response.getStatusLine();
            if (statusLine.getStatusCode() == HttpURLConnection.HTTP_OK) {
                Bresult = EntityUtils.toByteArray(response.getEntity());
                Result = new String(Bresult, "UTF-8");
            }
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (Exception e) {
        }
        return Result;
    }

    protected void onPostExecute(String result) {
        // dismiss the dialog after the file was downloaded
        if (!result.toString().trim().equals("")) {
            RunProcedure.StrParam = result;
            RunProcedure.run();
        }
    }
} 
```

这是我传输图片的代码

```
public boolean TransferFileToHttp(String address_to_handle, String file_name) {
    boolean result = false;
    HttpURLConnection connection = null;
    DataOutputStream outputStream = null;
    // DataInputStream inputStream = null;

    String pathToOurFile = file_name;
    String urlServer = address_to_handle;
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";

    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1 * 1024 * 1024;

    try {
        FileInputStream fileInputStream = new FileInputStream(new File(
                pathToOurFile));

        URL url = new URL(urlServer);
        connection = (HttpURLConnection) url.openConnection();

        // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        // Enable POST method
        connection.setRequestMethod("POST");

        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type",
                "multipart/form-data;boundary=" + boundary);

        outputStream = new DataOutputStream(connection.getOutputStream());
        outputStream.writeBytes(twoHyphens + boundary + lineEnd);
        outputStream
                .writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                        + pathToOurFile + "\"" + lineEnd);
        outputStream.writeBytes(lineEnd);

        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

        // Read file
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);

        while (bytesRead > 0) {
            outputStream.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }

        outputStream.writeBytes(lineEnd);
        outputStream.writeBytes(twoHyphens + boundary + twoHyphens
                + lineEnd);

        // Responses from the server (code and message)
        int serverResponseCode = connection.getResponseCode();
        String serverResponseMessage = connection.getResponseMessage();

        fileInputStream.close();
        outputStream.flush();
        outputStream.close();
        result = true;
    } catch (Exception ex) {
        // Exception handling
        result = false;
    }
    return result;
} 
```

如何加入传输文件程序以发布数据程序并检索字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:23:49.807

这样做是绝对有可能的。但是，您将不得不执行一些额外的步骤。

您首先必须将图像转换为 base 64 字符串。参考这个文档 [http://developer.android.com/reference/android/util/Base64.html](http://developer.android.com/reference/android/util/Base64.html)

现在可以将字符串作为常规 json 数据发送。

在服务器端，您需要一种机制将 base64 字符串转换回图像。这是一项微不足道的任务。

这种方法有一些缺点，例如巨大的 json 请求和额外的编码/解码开销。

# javascript - jQuery方法在字符串中查找字符？

> ID：13813098
> 
> 赞同：-3
> 
> 时间：2012-12-11T03:17:44.613
> 
> 标签：javascript, jquery, methods

它在我的舌头上，但我不记得我用来扫描字符串变量以查找特定字符之类的方法。例如，我想检查 IF var emailaddress CONTAINS the '@' symbol。谁能给我一些帮助？

* * *

从头开始， indexOf 是我的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T03:19:32.177

你的意思是indexOf吗？

```
var email = 'abc@gmail.com';

if(email.indexOf('@')!=-1){
//doLogic
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T03:24:14.237

在 jQuery 中

```
jQuery(function($){
//if the input type email contains the @
if( $('input[type="email"]:contains("@")') )
{

alert( $(this).val() ); 

}
else ...

}); 
```

# objective-c - Objective-C 异步方法和 ARC

> ID：13813106
> 
> 赞同：0
> 
> 时间：2012-12-11T03:18:39.757
> 
> 标签：objective-c, memory-management, asynchronous

我是 Objective-c 的新手。我编写了几行代码来异步访问 Web 服务，然后处理结果。您能否解释一下当异步方法将委托（协议）作为参数时 ARC 是如何工作的？

例如，我通过`NSURLConnection`在方法中使用本地来调用 Web 服务：

```
-(void) invokeSomeWebServiceMethod {
   MyDelegate *const theDelegate = ...;
   NSURL *const url = ...;
   NSURLRequest *const request = ...;
   [NSURLConnection connectionWithReuqest: request delegate:theDelegate]; 
} 
```

我不确定这种方法是否有效，因为`NSURLConnection`作为消息返回的隐式`connectionWithRequest`应该被标记为清理，因为调用方法和委托都没有对它的引用。但它有效！

所以：

1.  运行时如何知道不会过早地清除 `NSURLConnection`正在工作的东西？
2.  列表项 收到消息后，我是否应该释放/关闭委托中的连接 `connectionDidFinishLoading`？
3.  委托声明并作为消息的一部分`invokeSomeWebServiceMethod`传递是否更有意义？然后将创建的对象封装在委托中。`self``connectionWithRequest``NSURLConnection`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:50:20.987

1.  在下载连接时，它会保留自己。

2.  如果您对连接有任何强引用，则应在完成连接对象后将它们设置为 nil。

3.  要回答这个问题，我需要更多关于什么是`MyDelegate`真正的东西以及当前托管什么对象的信息`invokeSomeWebServiceMethod`。

您可以通过在启用“记录引用计数”和禁用“仅跟踪活动分配”的分配工具下运行您的应用程序来查看保留和释放：

![分配工具选项](../Images/e287ecb7150d332ef0fb86dc177dbdef.png)

然后，在 Instruments 下运行程序后，您可以在搜索栏中输入“NSURLConnection”，然后通过单击灰色圆圈中的白色小箭头来查看单个对象的跟踪：

![一个 NSURLConnection 的仪器历史记录](../Images/4bdab859e58a283f7bc541a1892cd225.png)

`-[NSURLConnectionInternal initWithInfo:]`您可以在保留连接（第 1 行）的屏幕截图中看到（右键单击并在新选项卡中打开完整尺寸）。在连接完成发送其所有委托消息后，该保留由稍后的释放来平衡。

# codeigniter - pyrocms 专业版：添加新的第一个 uri 段？

> ID：13813107
> 
> 赞同：1
> 
> 时间：2012-12-11T03:18:49.693
> 
> 标签：codeigniter, uri, pyrocms

我想使用`thisdomain.com`一个评论网站，每个网站`company`都有一组子页面......关于，信息和相关评论......以及我们使用博客模块来管理评论/帖子的地方。

基本上，我希望 url 结构是这样的，

`thisdomain.com/[company]/[blog|pages|etc]`

并维护 thisdomain.com 的核心网站页面，

`thisdomain.com/[blog|pages|etc]`

我的第一个想法是在系统`config/routes.php`文件中添加一个 if 语句，并将所有请求`thisdomain.com`首先发送到一个模块到 db 检查我们是否有适合的公司，否则将其发送回默认`pages`控制器。但我在兔子洞里走得还不够远，不知道这是否是一个蹩脚的概念。

有人做过吗？想法？这是迟钝吗？菲尔?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:01:18.310

我不会想到这是可能的。这里的问题是，即使您将其路由通过，CodeIgniter 也不会继续通过剩余的路由向下渗透，这意味着您的一个全球公司路由会破坏系统中的所有其他路由。

您可以只做这个子页面并使用博客插件来获取基于某个标签或类别的页面列表。/foo/blog 只是一个页面，你调用“foo”标签。然后链接到您自己的 /foo/blog/article/slug ，其中 slug 用于再次调用博客插件。

模块输出通常为您提供默认界面，但如果您愿意，可以忽略它们。

# web-config - 在 web.config 中指定多个 system.web

> ID：13813109
> 
> 赞同：1
> 
> 时间：2012-12-11T03:19:28.727
> 
> 标签：web-config, httpruntime, executiontimeout

我需要更改`executiontimeout`web.config 中特定于我的页面的设置。

我正在下载大文件。为此，我需要`executiontimeout`单独更改下载页面。但是，如果我指定`executiontimeout`某个值，它将适用于所有页面，而不仅仅是下载。但它不应该。

我需要`executiontimeout`特定于我的下载的设置。如果可能的话，有什么建议吗？

我找到了一个解决方案

它是这样的：

```
<configuration>                
 <location path="Download.aspx">
    <system.web>
      <httpRuntime requestValidationMode="2.0" maxRequestLength="2048000" executionTimeout="10240" />
      <compilation debug="false" targetFramework="4.0"/>
      <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>
    </system.web>
  </location>
  <system.web>
    <!--httpRuntime maxRequestLength="512" useFullyQualifiedRedirectUrl="true" executionTimeout="45"/-->
    <httpRuntime requestValidationMode="2.0" maxRequestLength="2048000"/>
    <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->
    <compilation debug="true" targetFramework="4.0"/>
    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
    <authentication mode="Windows"/>
    <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>

        -->
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>
  </system.web>
</configuration> 
```

# java - STS 无法在我的机器上启动

> ID：13813112
> 
> 赞同：5
> 
> 时间：2012-12-11T03:19:43.250
> 
> 标签：java, jvm, sts-springsourcetoolsuite

我试图在 Eclipse 上设置 Spring mvc 项目。基本项目运行良好。但是使用 restful 服务，jersey 等开始给出很多与依赖相关的错误。所以我打算转到 STS。

我正在使用 STS 2.9.2。它给了我“无法创建java虚拟机”。所以我加了

```
-vm C:\Program Files\Java\jdk1.7.0\bin\javaw.exe 
```

到 STS.ini。但现在它给了我以下致命错误

![在此处输入图像描述](../Images/c2cff8a44c4c1368a2321ad254a74fde.png)

下面是 STS.ini

```
-vm
C:\Program Files\Java\jdk1.7.0\bin\javaw.exe
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-product
com.springsource.sts.ide
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
884M
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xmn128m
-Xms256m
-Xmx768m
-Xss1m
-XX:PermSize=384m
-XX:MaxPermSize=768m 
```

*   Eclipse 在我的机器上运行良好。
*   由于互联网速度有限，我不想使用 Maven 或其他构建工具来解决依赖关系相关的问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T01:02:03.960

最初我使用的是 STS zip 版本。现在我从可执行文件安装了 STS。它对我来说很好。我需要设置 HOME 变量，仅此而已。

从已安装的 STS 附加 STS.ini（供参考）。

```
-vm
C:\Program Files\Java\jdk1.7.0\bin\javaw.exe
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813
-product
org.springsource.sts.ide
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx768m
-XX:MaxPermSize=256m 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-10T04:21:22.880

删除 STS.ini 文件。然后它会正确运行并自动创建一个新的 STS.ini 文件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-23T06:30:40.413

我昨天早上遇到了同样的问题。谷歌搜索后，我发现 STS.ini 文件中缺少以下行（橙色标记）：[STS.ini](http://i.stack.imgur.com/BXpzt.png)

添加后：

-vm

[javaw.exe 的完整路径]

一切都再次正常工作。

高温高压

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-31T14:11:37.130

在 sts.ini 的顶部添加了行 -vm C:\Program Files\Java\jdk1.8.0_45\bin\javaw.exe 它对我有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-25T10:35:33.683

尝试以管理员身份运行它。右键单击-> 以管理员身份运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-11T09:42:12.417

我也有同样的问题，在查看 STS.ini 文件时看到 -vm 参数有双重输入。这个错误发生在我更新 STS 时。此外，如果它仍然不起作用，请尝试运行 eclipsec.exe，如果可以，则 ini 文件中的某些内容设置不正确。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-28T05:44:47.240

确保您在初始化 STS 时提供的 STS 和 JDK 兼容。我的意思是，如果您的 JDK 是 64 位，那么您应该安装 64 位版本的 Spring 套件（`spring-web-4.0.a.RELEASE-installer-x86_64.exe`）而不是 32 位版本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-10T15:10:34.580

如果您使用的是 32 位操作系统，请在 64 位机器上安装 32 位版本的 Java 1.8 和类似的 64 位版本的 Java。

此外，将以下 vm 配置添加到您的 STS.ini 文件中

* * *

```
-vm 
C:\Users\bmeharn\Documents\Softwares\Java8\jdk1.8.0_131\bin\javaw.exe
-startup
plugins/org.eclipse.equinox.launcher_1.4.0.v20161219-1356.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.500.v20170531-1133
-product
org.springsource.sts.ide
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.8
-Xms40m
-Dosgi.module.lock.timeout=10
-Xverify:none
-Dorg.eclipse.swt.browser.IEVersion=10001
-Xmx1200m 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-05T11:39:35.520

STS IDE 有两种不同的下载器。可能您下载的是 32 位版本而不是 64 位版本。在任何一种情况下，下载的 zip 都以某种方式具有 win32。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-30T04:54:43.060

试试下面的东西，这肯定会解决你的问题：

1.  检查您的**操作系统（32 位或 64 位）**，然后检查 STS 是否与 32 位或 64 位或两者兼容。现在检查您的**jdk（32 位或 64 位）**
2.  如果步骤 1 得到验证，则更新**STS.ini**顶部的**javaw.exe**路径，如下所示。确保 STS.ini 中此路径没有重复条目，并且路径也正确

 ****-vm C:\Program Files\Java\jdk1.8.0_191\bin\javaw.exe**

完成你的 STS 肯定会运行，祝你好运！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-22T16:51:29.347

更新了 -vm 属性，但仍然无法正常工作。以管理员身份运行 sts 对我有用。**

# c# - 有没有办法让 LABEL CONTROL 自动向左移动，这样 LABEL 的文本就不会被截断？

> ID：13813114
> 
> 赞同：1
> 
> 时间：2012-12-11T03:20:00.370
> 
> 标签：c#, winforms, layout

这是示例代码

```
private void Form1_Load(object sender, EventArgs e)
    {
        //text values will be coming from database
        label1.Text = "Sample 1";//db value
        label2.Text = "Sample 2";//db value
        label3.Text = "Sample 3";//db value
    } 
```

这是输出：

![在此处输入图像描述](../Images/2876cc2dcaed4ff70198d3d93bec4b67.png)

文本被截断。我怎样才能解决这个问题？有没有办法让标签自动向左调整，文本有不同的长度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T03:28:32.070

开启自动大小属性，**文字右对齐**

这样，标签将在左侧自动增长。

编辑：

为了使事情保持在适当的位置，您可能还必须使用表格布局面板或流程布局面板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T03:35:48.057

您应该必须使用`TableLayoutPanel`和创建`Columns`with `SizeType=AutoSize`。

![在此处输入图像描述](../Images/0db99d168fb33396754edfecd37a0540.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T03:45:46.563

在标签中设置以下属性

```
 AutoSize = false;
    Anchor = Top, Right
    TextAlign = MiddleLeft 
```

# java - android无法接收从pc发送的所有数据

> ID：13813115
> 
> 赞同：1
> 
> 时间：2012-12-11T03:20:00.633
> 
> 标签：java, android, sockets, tcp

在我的程序中，电脑不断向我的安卓手机发送数据。每次 pc 发送 62 个字节（24 个用于头部，38 个用于内容）。我的程序运行良好。但有时我的手机可以读取 24 个字节的头部，而只能读取 10 个字节的内容。

我通过非阻塞套接字通道接收数据。

```
private SocketChannel client = null;

    public int read(byte[] data,int offset, int len){
    try {
        ByteBuffer buffer = ByteBuffer.allocate(len);
        int read_len = client.read(buffer);
        if(read_len == 0){
        }else if(read_len == -1){
        }else{
            buffer.flip();
            buffer.get(data, offset, read_len);
        }
        return read_len;

    } catch (IOException e) {
        e.printStackTrace();
    }
    return -2;
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:49:06.743

> 但有时我的手机可以读取 24 个字节的头部，而只能读取 10 个字节的内容。

可能存在网络问题，但我认为更有可能是因为 TCP 是面向流的协议，它不保留消息边界，因此您偶尔会收到与 pc 发送的字节不对应的有效负载。这是好的和预期的。这只是意味着你必须做更多的工作。

我假设`read`您希望通过您的消息继续读取数据，直到您有足够的数据来填充提供的字节数组。试试这个：

```
 public int read(byte[] data, int offset, int len)
   {
      try
      {
         ByteBuffer buffer = ByteBuffer.allocate(len - offset);
         while (buffer.hasRemaining())
         {
            int read_len = client.read(buffer);
            if (read_len == -1)
               return -1;
         }
         buffer.flip();
         int result = buffer.remaining();
         buffer.get(data, offset, buffer.remaining());
         return result;
      }
      catch (IOException e)
      {
         e.printStackTrace();
      }
      return -2;
   } 
```

读入字节缓冲区的好处是它负责在多次读取时正确连接字节，因此只需循环直到满。

顺便说一句 - 不要忘记从缓冲区的长度中减去偏移量（如果它不为零）。

# c - 提取 Gstreamer alsa 麦克风数据并使用我自己的网络解决方案通过 UDP 发送数据包进行传输

> ID：13813117
> 
> 赞同：1
> 
> 时间：2012-12-11T03:20:10.883
> 
> 标签：c, linux, networking, gstreamer, microphone

我试图弄清楚如何通过我自己的 UDP 打包系统发送流式音频数据，我意识到 Gstreamer 内置了一个非常方便的功能，但我真的相信我必须手动执行此操作才能使我的项目正常工作。

因此，即使我已经成功编写了自己的 TCP 流和 UDP 流，我基本上只需要知道如何使用 Gstreamer 管道并将其转换为微小的帧，以便我手动处理并通过 UDP 数据包发送（或流如何你曾经看过这种意识形态）。我怀疑它不是每次都将 Gstreamer 管道放入 UDP 数据包发送请求那么简单吗？

源是音频输入（或者我认为）

下面的代码没有显示 UDP 网络流，但它确实为有人向我展示了如何利用当前设置转换为某种可用的 UDP 数据包的字节流/二进制流提供了基础。

```
#include "gst/gst.h"

int main(int argc, char *argv[]) {
  GstElement *pipeline;
  GstBus *bus;
  GstMessage *msg;

  /* Initialize GStreamer */
  gst_init (&argc, &argv);

  /* Build the pipeline */
  pipeline = gst_parse_launch ("alsasrc device=hw 0", NULL);

  /* Start playing */
  gst_element_set_state (pipeline, GST_STATE_PLAYING);

  /* Wait until error or EOS */
  bus = gst_element_get_bus (pipeline);
  msg = gst_bus_timed_pop_filtered (bus, GST_CLOCK_TIME_NONE, GST_MESSAGE_ERROR | GST_MESSAGE_EOS);

  /* Free resources */
  if (msg != NULL)
    gst_message_unref (msg);
  gst_object_unref (bus);
  gst_element_set_state (pipeline, GST_STATE_NULL);
  gst_object_unref (pipeline);
  return 0;
} 
```

编辑：我主要想使用我自己的加密方法（熵的 RSA 3096 位）或使用更强的加密方法，我不喜欢当前系统内置的内置加密方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:19:23.080

我的研究告诉我，Gstreamer 主要用于需要即时编码/解码的应用程序，虽然支持录制，但听起来我需要处理原始数据，所以我需要像 PortAudio 这样的直接库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:52:19.747

看看这些[例子](http://cgit.freedesktop.org/gstreamer/gst-plugins-good/tree/tests/examples/rtp)。您可以在 gstreamer 中完全实现这一点，而您的应用程序甚至不需要做网络方面的事情。

# c++ - C++音乐专辑打印出曲目标题

> ID：13813118
> 
> 赞同：0
> 
> 时间：2012-12-11T03:20:13.083
> 
> 标签：c++

我有点卡在这个问题上..

***头文件****** *****

 **```
#include "Duration.h"

class Track
{
private:

    Duration trackTime;
    std::string trackTitle;

public:

    inline Duration getTrackTime() const;

    inline std::string getTrackTitle() const;

    Track(Duration d  = Duration(0,0,0),std::string trackTitle = "");

};

inline std::string Track::getTrackTitle() const
{
    return trackTitle;
} 
```

****** ** *cpp*文件***..******* *** *******

 ****```
using namespace std;

Track::Track(Duration trackTime , string trackTitle)
{
    this->trackTitle = trackTitle;
    this->trackTime  = trackTime;

}

istream& operator>>(istream& is, Track & t)
{
    Duration trackTime;
    string trackTitle;

    char c1;

    if (is >> trackTime >> c1 >>trackTitle)
    {
        if(c1 == '-')
        {
            t = Track(trackTime,trackTitle);
        }
        else
        {
            is.clear(ios_base::failbit);
        }
    }

    return is;
} 
```

****** *** *****主要****** *******

 **```
int main(int argc, const char * argv[])
{
    Track track;
    cin >> track;
    cout << track <<endl;

} 
```

我只是测试 ostream 是我所期望的。

但是当我输入这样的字符串时。“0:03:30 - 嘿乔（比利罗伯茨）”

它只打印出“0:03:30 - 嘿”

谁能解释为什么这样的打印结果。？以及如何打印出整个曲目标题。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:24:53.127

操作员输入标记，`>>`由空格分隔（空格/制表符/换行符）。您只输入标题的第一个标记，这就是您输出的内容。

退房`getline`： [http ://www.cplusplus.com/reference/string/getline/](http://www.cplusplus.com/reference/string/getline/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:24:56.170

您需要告诉 cin 在阅读曲目标题时不要跳过空格 - 请参阅[How to cin Space in c++?](https://stackoverflow.com/questions/2765462/how-to-cin-space-in-c)

试试下面

```
if (is >> trackTime >> c1 >>noskipws >>trackTitle)
{
    ... 
```********

# sql - 查找姓名相同但工资不同的员工姓名

> ID：13813121
> 
> 赞同：3
> 
> 时间：2012-12-11T03:20:25.923
> 
> 标签：sql

我有一个“员工”表

```
create table employee
(
  e_number int,
  e_name varchar(20),
  salary money,
  hire_date date
) 
```

现在我只想显示同名但工资不同的员工的姓名。

我试过`select e_name,count(*) from employee group by e_name having count(*)>1;` 但不能将它与“相同的薪水”部分结合起来。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T03:26:36.100

这假设您想要列出的两个人的姓名：

```
SELECT e1.e_name
FROM employee e1, employee e2
WHERE e1.e_name = e2.e_name
AND e1.salary <> e2.salary; 
```

如果您只想将每个名称列出一次，您将使用 SELECT DISTINCT 而不是 SELECT。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T03:33:47.577

如果您的目标是在 having 子句中表达这一点：

```
Select name 
 from employee
 group by name
 having 
   count(*) > 1
   and min(salary) != max(salary)
 order by name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T03:30:23.770

```
SELECT employee1.e_name, employee1.Salary, Employee2.Salary
FROM Employee employee1
JOIN Employee employee2
  on employee1.name = employee2.name
 AND Employee1.Salary <> Employee2.Salary
 AND Employee1.E_Number <> employee2.E_Number 
```

基本上让每个员工，通过名称将其加入每个其他员工，其中员工编号不同（所以不要加入自己）并且薪水不同。

您可能不需要检查员工编号是否不同，因为在您的表格设计中 1 名员工只能有 1 份薪水

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T03:38:06.803

使用连接，但重要的是使用大于比较，而不是不等于，以避免重复：

```
SELECT e1.e_name as name1, e2.e_name as name2
FROM employee e1
JOIN employee e2 ON e1.e_name = e2.e_name
    AND e1.salary > e2.salary; 
```

另请注意，ON 条件包含工资比较。一个常见的误解是 join on 条件可能只包含与键相关的比较。这样做可以带来显着的性能优势，尤其是在进行进一步连接时，因为 ON 条件在行连接时执行 - 这会立即丢弃不匹配项，而 WHERE 条件作为连接的整个结果集的过滤器执行.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T03:44:05.370

您只想要不同工资的计数，而不是所有记录的计数。

```
select e_name,count(distinct salary)
from employee
group by e_name
having count(distinct salary)>1 
```

（如果不需要，请在选择中删除计数 - 包括在您的示例中）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T03:53:17.027

首先过滤工资不加倍（不加倍），然后按`e_name`计数 > 1进行分组

```
SELECT A.e_name
FROM employee A 
WHERE A.salary NOT IN (SELECT salary FROM employee  WHERE id != A.id)
GROUP BY A.e_name
HAVING COUNT(A.e_name) > 1 
```

# ruby - 我如何根据 sort_by rails 中的某些属性找到 uniq 记录

> ID：13813124
> 
> 赞同：1
> 
> 时间：2012-12-11T03:20:37.123
> 
> 标签：ruby, arrays

嗨，我有这些记录，我如何在 sort_by 方法块中找到唯一记录

```
 my array is like this

     [#<Post id: 1, name: "ali", team_elo: 0, team_name: "solo", created_at: 
     "2012-12-09  16:11:17", updated_at: "2012-12-11 03:39:43">,
     #<Post id: 2, name: "ramiz", team_elo: nil, team_name: "roko", created_at: 
     "2012-12-11 03:40:31", updated_at: "2012-12-11 03:40:31">,
     #<Post id: 3, name: "ramizrt", team_elo: nil, team_name: "joko", created_at: 
      "2012-12-11 03:40:47", updated_at: "2012-12-11 03:40:47">,
     #<Post id: 4, name: "lee", team_elo: nil, team_name: "roko", created_at: 
       "2012-12-11 03:41:15", updated_at: "2012-12-11 03:41:15">] 
```

我如何根据唯一的 team_name 对这个数组进行排序。结果应该是这样的

```
 [#<Post id: 1, name: "ali", team_elo: 0, team_name: "solo", created_at: 
     "2012-12-09  16:11:17", updated_at: "2012-12-11 03:39:43">,
     #<Post id: 2, name: "ramiz", team_elo: nil, team_name: "roko", created_at: 
     "2012-12-11 03:40:31", updated_at: "2012-12-11 03:40:31">,
     #<Post id: 3, name: "ramizrt", team_elo: nil, team_name: "joko", created_at: 
      "2012-12-11 03:40:47", updated_at: "2012-12-11 03:40:47">] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:37:54.487

您可以执行以下操作：

```
arr = arr.uniq { |x| x.team_name } 
```

或其兄弟

```
arr.uniq! { |x| x.team_name } 
```

它将`arr`仅设置为您想要的元素。

# visualization - 如何在 SPSS 语法的循环中创建多个带有新变量的图形？

> ID：13813128
> 
> 赞同：0
> 
> 时间：2012-12-11T03:20:51.730
> 
> 标签：visualization, spss

我正在使用 SPSS (v.20) 并希望使用语法为几个感兴趣的变量中的每一个创建一个图表。我有两种类型的图表示例：

示例 #1：

```
GGRAPH 
  /GRAPHDATASET NAME="graphdataset" 
    VARIABLES=change_WIraw[LEVEL=ratio] 
    MISSING=LISTWISE REPORTMISSING=NO 
  /GRAPHSPEC SOURCE=VIZTEMPLATE(NAME="Histogram with Normal Distribution"[LOCATION=LOCAL] 
    MAPPING( "x"="change_WIraw"[DATASET="graphdataset"])) 
    VIZSTYLESHEET="Traditional"[LOCATION=LOCAL] 
    LABEL='HISTOGRAM WITH NORMAL DISTRIBUTION: change_WIraw' 
    DEFAULTTEMPLATE=NO. 
```

示例 #2：

```
GGRAPH 
  /GRAPHDATASET NAME="graphdataset" VARIABLES=GROUP change_WIraw MISSING=LISTWISE 
REPORTMISSING=NO 
      /GRAPHSPEC SOURCE=INLINE. 
BEGIN GPL 
  SOURCE: s=userSource(id("graphdataset")) 
  DATA: GROUP=col(source(s), name("GROUP"), unit.category()) 
  DATA: change_CTBWss=col(source(s), name("change_WIraw")) 
  DATA: id=col(source(s), name("$CASENUM"), unit.category()) 
  GUIDE: axis(dim(1), label("GROUP")) 
  GUIDE: axis(dim(2), label("change_WIraw")) 
  SCALE: cat(dim(1), include("1", "2", "3", "4")) 
  SCALE: linear(dim(2), include(0)) 
  ELEMENT: schema(position(bin.quantile.letter(GROUP*change_WIraw)), label(id)) 
END GPL. 
```

我想运行一个循环，以便我可以对许多其他变量进行编程（交换“change_WIraw”）。希望得到一些指导，谢谢！我希望这是正确的论坛问。（我发现了类似的问题，但它们是针对更简单的功能，比如频率。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:45:15.073

到目前为止，您最好的选择是为此使用 Python。如果您还没有使用 Python for SPSS，请参阅 www.pythonforspss.org 了解一些非常基本的基础知识。

然后试试这个：用`change_WIraw to v10`实际的变量名替换（仅在第二行）。假定它们在您的活动数据集中是相邻的。然后运行：

```
begin program.
variables='change_WIraw to v10'
import spss,spssaux
vList=spssaux.VariableDict().expand(variables)
for vrbl in vList:
    spss.Submit("""
GGRAPH 
  /GRAPHDATASET NAME="graphdataset" VARIABLES=GROUP %(vrbl)s MISSING=LISTWISE 
REPORTMISSING=NO 
      /GRAPHSPEC SOURCE=INLINE. 
BEGIN GPL 
  SOURCE: s=userSource(id("graphdataset")) 
  DATA: GROUP=col(source(s), name("GROUP"), unit.category()) 
  DATA: change_CTBWss=col(source(s), name("%(vrbl)s")) 
  DATA: id=col(source(s), name("$CASENUM"), unit.category()) 
  GUIDE: axis(dim(1), label("GROUP")) 
  GUIDE: axis(dim(2), label("%(vrbl)s")) 
  SCALE: cat(dim(1), include("1", "2", "3", "4")) 
  SCALE: linear(dim(2), include(0)) 
  ELEMENT: schema(position(bin.quantile.letter(GROUP*%(vrbl)s)), label(id)) 
END GPL."""%locals())
end program. 
```

该语法将为您指定的每个变量运行一次，并替换`%(vrbl)s`为变量名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:02:13.533

为多个变量生成单独图表的一种简单方法是将数据集从宽变为长（即，将所有变量放在一个列中），然后`split file`在您的图表命令之前使用。下面的例子。

```
set seed = 10.
input program.
loop #i = 1 to 1000.
compute V1 = RV.NORM(0,1).
compute V2 = RV.NORM(20,5).
compute V3 = RV.NORM(100,15).
end case.
end loop.
end file.
end input program.
dataset name sim.
execute.

varstocases
/make V from V1 to V3
/index groups.

sort cases by groups.
split file by groups.

* Chart Builder.
GGRAPH
  /GRAPHDATASET NAME="graphdataset" VARIABLES=V MISSING=LISTWISE
  REPORTMISSING=NO
  /GRAPHSPEC SOURCE=INLINE.
BEGIN GPL
 SOURCE: s=userSource(id("graphdataset"))
 DATA: V=col(source(s), name("V"))
 GUIDE: axis(dim(1), label("V"))
 GUIDE: axis(dim(2), label("Frequency"))
 ELEMENT: interval(position(summary.count(bin.rect(V))), shape.interior(
  shape.square))
END GPL.

split file off. 
```

我现在使用的是没有 viztemplates 的旧版本（所以如果这对他们不起作用，请告诉我）。尽管您可以在内联 GPL 语句中生成任何图形，但您可以使用 Viztemplates（地图除外）。

如果您想通过循环更好地控制特定标签或图表的美感，您将需要使用宏工具或 python，但这是完成您想要的快速方法。

# javascript - 为什么这个页面会导致 iOS 崩溃？

> ID：13813132
> 
> 赞同：0
> 
> 时间：2012-12-11T03:21:16.823
> 
> 标签：javascript, ios, debugging, crash, raphael

[http://bit.ly/Z7YPj7](http://bit.ly/Z7YPj7)

它可以在任何地方的桌面上正常运行，也可以在 Android 上运行。但在 iPhone Simulator 上，罪魁祸首似乎在文件中：（`js/the-anim36.js`将一大堆 Raphael SVG 动画排队）。

我在玩 Safari 6 的“开发”菜单，它现在可以记录来自 XCodes 的 iOS 模拟器的信息，我下载并启动了它。但是我在javascript控制台中什么也没有得到，每次打开html文件时模拟器都会发生严重崩溃。每次尝试打开文件时，我都必须“重置内容和设置”。坦率地说，我在这里迷失了，诚然是调试的新手（也可能被 Chrome 宠坏了。）任何关于这里可能发生的事情的指针都将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:24:13.517

你可以在 iOS 上很快耗尽内存。通过 Chrome 分析器运行它，看看你的内存使用情况如何。我打赌它使用 > 10mb 的内存。在这种情况下，你可能是敬酒！

查看这篇内容丰富的文章，声称在大约 6mb 的内存后，您将崩溃移动 safari： [http ://cubiq.org/testing-memory-usage-on-mobile-safari](http://cubiq.org/testing-memory-usage-on-mobile-safari)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:29:05.533

我观察到，当我打开该页面时，我的笔记本电脑风扇运转得很高。这件事消耗了大量的 CPU（可能还有大量的 RAM），并且可能只是超出了 iOS 上允许的资源限制。如果没有用完 RAM，它可能会导致前台进程运行时间过长，从而触发取消“循环”应用程序的逻辑。

# python - 有向图的 Boruvka 算法最小生成树

> ID：13813138
> 
> 赞同：2
> 
> 时间：2012-12-11T03:22:24.380
> 
> 标签：python, algorithm, graph, cuda, breadth-first-search

Boruvka 算法（http://en.wikipedia.org/wiki/Bor%C5%AFvka's_algorithm）是否仅适用于无向图？

例如，如果我们有一个如下图结构：

```
node 1 -> node 2 (weight 1), node 3 (weight 1), node 4 (weight 1)

node 2 -> node 3 (weight 2)

node 3 -> node 4 (weight 2)

node 4 -> node 2 (weight 2) 
```

那么最小生成树应该包括边：

```
1 -> 2

1 -> 3

1 -> 4 
```

但是，Boruvka 的算法会吐槽

```
1 -> 2

2 -> 3

3 -> 4 
```

因为，Boruvka 首先查看每个单独的节点，并将从该节点传出的最短边添加到 MST。

我知道在维基百科文章中它说边缘权重必须是不同的，但只要来自节点 1 的所有边缘权重都小于“外部”边缘权重（来自节点 2-4），那么它看起来像 Boruvka 的算法失败。这是因为它是有向图而不是无向图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:35:01.833

> 这是因为它是有向图而不是无向图吗？

是的。对于有向图，您必须考虑传入和传出边，然后算法将以相同的方式工作。最简单的方法是考虑底层的无向图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T08:25:25.967

您应该问自己的问题是“最小生成树”对于有向图意味着什么？您应该使用的算法取决于这个问题的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:11:04.227

最小生成树仅在无向图上定义，因此考虑到这一点您的问题没有意义。可能您正在寻找其他东西，例如，具有相同顶点集和最小边权总和的原始图的强连通诱导子图。在这种情况下，您不必获取树，实际上树也被定义为无向图。恕我直言，解决这个问题的算法将是计算上更难的问题。

# django - Django - FormView 出错

> ID：13813141
> 
> 赞同：0
> 
> 时间：2012-12-11T03:22:47.987
> 
> 标签：django, django-views

我对 Django 很陌生。我有一个需要显示的表单，所以我使用了 FormView 类。但是，由于我更改为使用此类（我之前只是将其作为普通函数使用），因此出现错误：

`__init__() takes exactly 1 argument (2 given)`

在地点：

`/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/django/core/handlers/base.py in get_response, line 111`

回溯很简单：

`response = callback(request, *callback_args, **callback_kwargs)`

相关观点是：

```
class HMFInput(FormView):
    """
    The form for input. 
    """
    template_name = 'hmfform.html'
    form_class = forms.HMFInput
    success_url = '/hmf_finder/hmf_image_page/'

    def form_valid(self,form):
        canvas, file_object = utils.hmf_output(form)
        self.request.session["canvas"] = canvas
        self.request.session["text"] = file_object
        return super(HMFInput,self).form_valid(form) 
```

我试图几乎完全按照文档中的示例进行操作。知道出了什么问题吗？

编辑：我`urls.py`用以下方式调用视图：

```
url(r'^hmf_finder/$',
    'hmf_finder.views.HMFInput',
    name = 'HMF-input'), 
```

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:04:15.883

在 urls.py 中试试这个：

```
from finder.views import HMFInput

url(r'^hmf_finder/$', HMFInput.as_view(), name = 'HMF-input'), 
```

# android - vold.fstab 的内容是什么，或者 dev_mount 行的语法是什么？

> ID：13813143
> 
> 赞同：8
> 
> 时间：2012-12-11T03:22:58.090
> 
> 标签：android, filesystems

我正在尝试了解一些有关如何在 Android 上完成各种 sd 卡魔术的帖子。这些帖子引用 /etc/vold.fstab 并建议使用附加或更改的 dev_mount 行来修改其内容。

好吧，我觉得很有趣。我尝试谷歌搜索vold.fstab 和dev_mount 以了解更多关于它们的信息。奇怪的是，这些术语似乎只存在于各种论坛帖子中，关于如何使用 Android 的 sd 卡做神奇的事情。

也就是说，我找不到任何关于vold.fstab 文件应该包含的内容的“官方”手册页或文档，例如它是脚本还是配置文件，无论dev_mount 是命令还是规范，等等

所以作为一个非常n00b的Android开发者，

1.  vold.fstab 上的官方文档或手册页在哪里？
2.  除了 developer.android.com，我应该在哪里寻找关于 Android 的综合文档

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T05:41:42.020

我发现这是有用的：

[https://android.googlesource.com/platform/docs/source.android.com/+/android-4.2.1_r1.1/src/tech/storage/index.md](https://android.googlesource.com/platform/docs/source.android.com/+/android-4.2.1_r1.1/src/tech/storage/index.md)

具体来说：

```
dev_mount <label> <mount_point> <partition> <sysfs_path> [flags] 
```

*   `label`：卷的标签。
*   `mount_point`：应该安装卷的文件系统路径。
*   `partition`: 分区号（基于 1），或第一个可用分区的“自动”。
*   `sysfs_path`: 一个或多个可以提供此挂载点的设备的 sysfs 路径。用空格分隔，每个必须以 . 开头`/`。
*   `flags`: 可选的逗号分隔的标志列表，不能包含`/`. 可能的值包括`nonremovable`和`encryptable`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T23:22:20.320

我从来没有遇到过任何关于vold.fstab 和dev_mount 的文档。据我所知以及我可以从代码中收集到的信息，`vold.fstab`是一个文件，它在代码中逐字解析，`volume manager daemon`以检测特定系统的安装点设置。

每个供应商都有自己特定的vold.fstab 文件，卷管理器守护程序使用该文件。大多数情况下，Android 中间件使用它来获取挂载点路径。以外部存储卡为例。

# c# - 我可以将 vb 中的 asp.net 母版页用于用 c# 编写的应用程序吗？

> ID：13813146
> 
> 赞同：0
> 
> 时间：2012-12-11T03:23:02.410
> 
> 标签：c#, asp.net, vb.net

我有一个 49 页的网站 (asp.net 4)。该网站位于**vb**中。

但是我添加了一个论坛（并将其称为“knowledgbase”），所以它就像... company.com/knowledgebase/ ...我将论坛配置为 IIS7 中的一个单独的应用程序，它是用**c#**编写的。

是否可以在 c# 论坛中使用我的 vb 母版页之一？还是我必须创建一个完全独立的 c# 母版页？

**编辑：**

基本上，在知识库/default.aspx 文件中，有这样的：

```
<%@ Page Language="C#" AutoEventWireup="true" ValidateRequest="false"   
Inherits="YAF.ForumPageBase" culture="auto" uiculture="auto"  %>
<%@ Register TagPrefix="YAF" Assembly="YAF" Namespace="YAF" %>
<script runat="server"> 
```

我试过这样做：

```
<%@ Page Language="C#" AutoEventWireup="true" ValidateRequest="false" 
Inherits="YAF.ForumPageBase" culture="auto" uiculture="auto" 
MasterPageFile="~/homepage.Master"  %>
<%@ Register TagPrefix="YAF" Assembly="YAF" Namespace="YAF" %>
<script runat="server"> 
```

但是当然……页面语言是“c#”，母版页是用 vb 编写的。所以结果是这样的（如预期的那样）：

```
Server Error in '/knowledgebase' Application.
Parser Error 
Description: An error occurred during the parsing of a resource required to service 
this request. Please review the following specific parse error details and modify your 
source file appropriately.

Parser Error Message: The 'masterpagefile' attribute is not supported by the 
'register' directive. 
```

# python - Python“导入随机”错误

> ID：13813164
> 
> 赞同：4
> 
> 时间：2012-12-11T03:25:29.877
> 
> 标签：python, random

您可能从我之前的帖子中知道，我正在学习 Python。而这一次我有一个小错误，我认为这是 Python 本身的构建。使用以下内容时：

```
import random
number = random.randint(1,10000) 
```

Python给了我这个错误：

```
File "C\Users\name\Documents\Python\random.py", line 5, in (module)
  print random.random()
TypeError: 'module' object is not callable 
```

每次我尝试运行它。我不明白。任何帮助将非常感激！

编辑：我试图运行的两行代码：

```
import random
print random.randint(1,100) 
```

就是这样。它给了我同样的错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T03:59:27.923

通过命名您的脚本`random.py`，您与`random`标准库模块产生了命名冲突。

当您尝试运行脚本时，包含脚本的目录将添加到模块导入路径的开头。因此，当您的脚本`import random`运行时，您实际上是在将脚本的第二个副本作为`random`模块运行。

当`random`模块运行`import random`时，这意味着它`random.random`也将是对您的模块的引用。因此，当您尝试调用`random.random()`标准库函数时，实际上是在尝试调用模块对象，从而导致出现错误。

如果您将脚本重命名为其他名称，问题应该会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-15T15:28:17.243

我正在使用 pycharm，我不得不采取额外的步骤来导入方法`from random`。就我而言：

```
import random
 from random import choice 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-15T12:26:32.323

甚至我也面临同样的问题。我已将我的 python 文件从 random.py 重命名为 shuffle.py。这没有成功。然后我更改了版本然后它工作了。这可能会有所帮助。Python 版本：3.6.7 替换导入随机；导入随机数2；

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-04-24T09:12:03.627

简单的答案：将您的文件名从“random.py”更改为其他名称，因为它与随机库冲突。

# c# - 读取双重类型的用户输入

> ID：13813166
> 
> 赞同：8
> 
> 时间：2012-12-11T03:25:37.887
> 
> 标签：c#, parsing, loops, console

我发现在其他地方使用循环回答了这个问题，但我不确定是否真的有一个我没有发现的函数可以让这更容易，或者这是否可能（在我看来）对 C# 不利。

我正在尝试从这样的用户输入中读取双精度：

```
Console.WriteLine("Please input your total salary: ") // i input 100
double totalSalary = Console.Read(); //reads in the 1, changes to 49. 
```

我在这方面找到了其他几个帖子，他们都有不同的答案，而且提出的问题也不完全相同。如果我只想读取用户输入，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-22T23:10:26.203

试试这个：

```
double Salary = Convert.ToDouble(Console.ReadLine()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-11T03:29:13.850

你必须检查整个事情的方式......`Console.Read()`返回一个整数。

```
double totalSalary;
if (!double.TryParse(Console.ReadLine(), out totalSalary)) {
    // .. error with input
}
// .. totalSalary is okay here. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-04T03:03:05.520

最简单的回答你的问题：

```
double d = Double.Parse(Console.Readline()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T03:27:36.460

```
string input = Console.ReadLine();
double d;
if (!Double.TryParse(input, out d))
    Console.WriteLine("Wrong input");
double r = d * Math.Pi;
Console.WriteLine(r); 
```

# android - 我的项目没有找到由 android-annotations 生成的类

> ID：13813167
> 
> 赞同：1
> 
> 时间：2012-12-11T03:25:40.737
> 
> 标签：android, eclipse, annotations

[我已经按照项目 wiki 页面](https://github.com/excilys/androidannotations/wiki/Eclipse-Project-Configuration)的描述配置了我的项目，但是当我添加`@EActivity`我的活动和更新时`AndroidManifest.xml`。

Eclipse 仍然没有在 AndroidManifest.xml 中看到最后一次更新，并建议我使用下划线后缀更改活动名称。但我只是这样做！

好吧，当我在我的项目中执行 CLEAN 并尝试在模拟器上运行时，我的项目崩溃（它看不到由 AndroidAnnotations 生成的类文件）

```
@EActivity(R.layout.activity_info)
public class InfoActivity extends Activity { ... }

<activity android:name="com.mypackage.xxx.InfoActivity_"/> 
```

有了这个，我可以看到由 android-annotations 正确生成的类。但我的项目没有看到。

我尝试将默认 conf 更改`Project Preferences > Java Compiler > Annotation Processing > Generated source directory`为 gen 文件夹并且可以正常工作！

但我相信这个文件夹不符合Android标准..我不知道..

有人可以帮助我吗？

# sharepoint - 我可以在 SharePoint 2010 中以编程方式检索托管元数据列吗？

> ID：13813170
> 
> 赞同：1
> 
> 时间：2012-12-11T03:26:20.010
> 
> 标签：sharepoint, sharepoint-2010

我有一个包含 4 个托管元数据字段的列表，我想读取该字段的值，而不必进行字符串连接，也不必解析 ;#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:13:34.803

您必须使用此处解释的分类隐藏列表：http: [//blogs.msdn.com/b/sharepointdev/archive/2011/11/18/how-to-work-with-managed-metadata-columns-by -using-the-sharepoint-client-object-model-kaushalendra-kumar.aspx](http://blogs.msdn.com/b/sharepointdev/archive/2011/11/18/how-to-work-with-managed-metadata-columns-by-using-the-sharepoint-client-object-model-kaushalendra-kumar.aspx)并且可以使用类似的东西[`TaxonomyField.GetWssIdsOfKeywordTerm`](http://msdn.microsoft.com/en-us/library/ff625182%28v=office.14%29.aspx)

# mono - 使用 Monotouch 为 IOS UI Picker 设置主题

> ID：13813171
> 
> 赞同：3
> 
> 时间：2012-12-11T03:26:21.380
> 
> 标签：mono, xamarin.ios

我有一个单点触控项目，我正在尝试为 uipicker 设置主题，但没有任何运气。我尝试将背景颜色设置为清除，但似乎没有多大作用。

首先，我不想做任何困难的事情，我真的只想能够清除黑色背景，然后删除选择器内部的 2 色调渐变条。

任何单点触控大师愿意伸出援手吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:30:31.453

这不是一件容易的事（Apple 没有明确的方法来做到这一点）。[在此处](https://stackoverflow.com/questions/965375/change-uipickerview-background)阅读一些选项。

所以你可以：

*   创建一个具有透明中心的图像以添加一个`UIImageView`作为子视图，
*   `Subview`尝试设置属性`UIPickerView`
*   尝试将他们的[IXPickerOverlayView](https://github.com/Inexika/Inexika-Custom-Controls/tree/master/IXPickerOverlayView)移植到 MonoTouch

# ios - 如何解压zlib NSData

> ID：13813173
> 
> 赞同：0
> 
> 时间：2012-12-11T03:26:57.833
> 
> 标签：ios, zlib

我有一些压缩的 Zlib NSData，我想解压缩或“膨胀”等，但在以下代码中出现错误

```
NSData* originalData = [compressedData zlibInflate]; 
```

这段代码给了我这个错误

```
No visible @interface for 'NSData' declares the selector 'zlibInflate' 
```

我不知道如何解决它，我环顾四周，但找不到任何东西......任何帮助将不胜感激。

**文件：**

[http://blakeseely.com/svn/public/SniperKit/trunk/Additions/NSData+CocoaDevUsersAdditions.h](http://blakeseely.com/svn/public/SniperKit/trunk/Additions/NSData+CocoaDevUsersAdditions.h)

[http://blakeseely.com/svn/public/SniperKit/trunk/Additions/NSData+CocoaDevUsersAdditions.m](http://blakeseely.com/svn/public/SniperKit/trunk/Additions/NSData+CocoaDevUsersAdditions.m)

这些是您需要添加到项目中的两个文件，并在您需要使用它们的地方进行参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:28:26.827

导入声明函数的标头`zLibInflate`...可能类似于`NSData+zlib.h`

# hadoop - 使用 Avro 和 MRUnit mapDriver 时出现 ClassCastException

> ID：13813174
> 
> 赞同：4
> 
> 时间：2012-12-11T03:27:00.740
> 
> 标签：hadoop, avro

我正在使用 MRUnit 0.9.0、Avro 1.7.0 和 Hadoop 0.20.205.0。

我已经配置`mapDriver`如下：

```
@Before
public void setup()
{
    AvroWordCount.Map mapper = new AvroWordCount.Map();
    AvroWordCount.Reduce reducer = new AvroWordCount.Reduce();
    Configuration conf = new Configuration();
    conf.setStrings( "io.serializations", new String[] { AvroSerialization.class.getName(), WritableSerialization.class.getName() } );
    AvroSerialization.setValueWriterSchema( conf, AvroWordCount.SCHEMA_COUNT );
    AvroSerialization.setValueReaderSchema( conf, AvroWordCount.SCHEMA_COUNT  );
    AvroSerialization.addToConfiguration(conf);
    mapDriver = new MapDriver<AvroKey<Line>, NullWritable, Text, AvroValue<Count>>( mapper ).withConfiguration( conf );

} 
```

调用 mapDriver.run() 会出现以下异常：

```
java.lang.ClassCastException: amazon.fclm.labormetrics.mapreduce.sample.AvroWordCount$Count cannot be cast to org.apache.avro.generic.IndexedRecord
    at org.apache.avro.generic.GenericData.getField(GenericData.java:518)
    at org.apache.avro.generic.GenericData.getField(GenericData.java:533)
    at org.apache.avro.generic.GenericDatumWriter.writeRecord(GenericDatumWriter.java:103)
    at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:65)
    at org.apache.avro.generic.GenericDatumWriter.write(GenericDatumWriter.java:57)
    at org.apache.avro.hadoop.io.AvroSerializer.serialize(AvroSerializer.java:103)
    at org.apache.avro.hadoop.io.AvroSerializer.serialize(AvroSerializer.java:45)
    at org.apache.hadoop.mrunit.Serialization.copy(Serialization.java:62)
    at org.apache.hadoop.mrunit.Serialization.copy(Serialization.java:81)
    at org.apache.hadoop.mrunit.mapreduce.mock.MockContextWrapper$4.answer(MockContextWrapper.java:78)
    at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:34)
    at org.mockito.internal.MockHandler.handle(MockHandler.java:99)
    at org.mockito.internal.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:36)
    at org.mockito.internal.creation.MethodInterceptorFilter.intercept(MethodInterceptorFilter.java:48)
    at org.apache.hadoop.mapreduce.Mapper$Context$$EnhancerByMockitoWithCGLIB$$4ae1b65a.write(<generated>)
    at amazon.fclm.labormetrics.mapreduce.sample.AvroWordCount$Map.map(AvroWordCount.java:76)
    at amazon.fclm.labormetrics.mapreduce.sample.AvroWordCount$Map.map(AvroWordCount.java:1)
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
    at org.apache.hadoop.mrunit.mapreduce.MapDriver.run(MapDriver.java:221)
    at amazon.fclm.labormetrics.mapreduce.sample.AvroWordCountTest.TestMrUnitMapper(AvroWordCountTest.java:61)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我也无法在线找到 Avro + MRUnit + Hadoop 的任何示例。如果有人有任何指示，那就太好了。

# grails - 在 Grails 中，是否可以更改持久实体的子类型？

> ID：13813181
> 
> 赞同：2
> 
> 时间：2012-12-11T03:28:26.947
> 
> 标签：grails, discriminator, grails-2.0.4

假设我有以下课程：

```
class Fruit { ... }
class Apple extends Fruit { ... }
class Orange extends Fruit { ... } 
```

假设用户想要创建一个新的`Apple`. 他们从下拉列表中选择一种类型，然后我使用一项服务将类型字符串转换为具体类型：

```
def fruit = FruitService.createFruit(params.type)
fruit.properties = params
fruit.save() 
```

这将成功保存一个新`Apple`实例。

现在假设用户意识到他们犯了一个错误并且他们想创建一个`Orange`代替。在编辑视图中，我为用户提供了将类型更改为 an 的功能`Orange`，但是如何**更新**现有`Apple`实例以使其现在为 an `Orange`？由于其他关系，我不能简单地删除`Orange`并创建一个新实例。`Apple`这甚至可能吗？

# silverlight - 在另一个 DataTemplate 中使用 DataTemplate？

> ID：13813184
> 
> 赞同：0
> 
> 时间：2012-12-11T03:28:48.857
> 
> 标签：silverlight, xaml, silverlight-5.0

我在一个视图上有 2 个列表，我希望它们共享相同的 DataTemplate。

第一个列表可以直接使用这个 DataTemplate，第二个列表需要在特定条件下使用它，所以在第一种情况下，我有这样的 XAML 并且它可以工作：

```
<ListBox ItemTemplate="{StaticResource TrackedAssetTemplate}"> 
```

在第二种情况下，我有类似的东西，但不能让它工作..

```
<m:MapItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Canvas
                            m:MapLayer.Position="{Binding Location}">
                            <Button
                                Visibility="{Binding IsSelected, Converter={StaticResource BoolToReverseVisibilityConverter}}"
                                Width="{Binding PushpinWidth}" Height="{Binding PushpinWidth}"
                                Style="{StaticResource LooklessButtonStyle}"
                                Command="{Binding DataContext.SelectedPushpinChangedCommand, ElementName=LayoutRoot}"
                                CommandParameter="{Binding}"
                                Cursor="Hand">
                                <Ellipse
                                Width="{Binding PushpinWidth}" Height="{Binding PushpinWidth}" Stroke="Black" Fill="{Binding IsGPSDataRecent, Converter={StaticResource BoolToGreenRedBrushConverter}}" StrokeThickness="1">
                                    <ToolTipService.ToolTip>
                                        <TextBlock Text="{Binding DeviceId}" />
                                    </ToolTipService.ToolTip>
                                </Ellipse>
                            </Button>
                          <ContentControl
Visibility="{Binding IsSelected, Converter={StaticResource BoolToVisibilityConverter}}"                                 
DataTemplate="{StaticResource TrackedAssetTemplate}" /> 
```

所以，我的想法是第一个 lisbox 有直接的模板。当在地图上选择项目时，我可以使用相同的数据模板，否则我会显示按钮。我试图将模板包装在里面的地图上，`ContentControl`但它没有用。

那么，问题是如何将数据模板包装在数据模板中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:55:51.587

我认为您不需要在其他数据模板中使用一个数据模板。您可以设置项目的样式以使用触发器来更改项目的数据模板。就像是

```
 <Style x:Key="ContentPresenterStyle"
           TargetType="{x:Type ContentPresenter}" >
        <Setter Property="ContentTemplate"
                        Value="{StaticResource DefaultStyleTemplate}" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=IsSelected, ,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type MapListBoxItem}}}"  Value="False">
                <Setter Property="ContentTemplate"
                        Value="{StaticResource TrackedAssetTemplate}" />
            </DataTrigger>
        </Style.Triggers>
</Style> 
```

希望能帮助到你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:36:26.207

您可能错过了将内部 ContentControl 的内容绑定到数据上下文。

```
<ContentControl Content={Binding .}
    Visibility="{Binding IsSelected, Converter={StaticResource BoolToVisibilityConverter}}" 
    DataTemplate="{StaticResource TrackedAssetTemplate}" /> 
```

# android - android在扩展文件中播放电影

> ID：13813185
> 
> 赞同：9
> 
> 时间：2012-12-11T03:28:48.963
> 
> 标签：android, android-videoview, expansion

我的应用程序试图向用户提供大量内容，因此应用程序的大小远大于 50mb。我们无法减少或删除某些内容，因此我们决定采用扩展方法。

我正在尝试遵循本教程：[Android APK 扩展文件](https://developer.android.com/google/play/expansion-files.html)，并且已成功将扩展文件放入我的设备进行测试。我可以在扩展中获取任何视频文件的输入流。但是当我尝试为 videoView 设置VideoUri 时，它开始崩溃。下面是一些代码：

```
ZipFileContentProvider contentProvider = new ZipFileContentProvider();
String contentPath = "content://";
File root = Environment.getExternalStorageDirectory();
String EXP_PATH = File.separator + "Android" + File.separator + "obb" + File.separator;
String path = root.toString() + EXP_PATH + context.getPackageName() + File.separator + "main.1.com.c4e1.in2cricket.obb";
String zipFileName =  contentPath + path + "/" + fileName;
Uri uri = Uri.parse(zipFileName);
videoView.setVideoUri(uri);

public class ZipFileContentProvider extends APEZProvider {

    @Override
    public String getAuthority() {
        return "com.c4e1.in2cricket.provider.ZipFileContentProvider";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:36:59.480

在使用 zip 和 obb 文件时，记录您正在处理的 zipEntries 始终是一个好习惯。

检查此日志以确保您的假设是正确的。

使用 APEZProvider 为 mediaplayer 提供 uri。

[在标准 android 文档](http://developer.android.com/google/play/expansion-files.html#ReadingTheFile)中检查这一点。

希望这会帮助你。

# matlab - matlab中NaN的确切值是多少？

> ID：13813195
> 
> 赞同：4
> 
> 时间：2012-12-11T03:29:52.027
> 
> 标签：matlab, double, nan

需要在matlab和一些DLL函数之间来回传递一些数据，有一点很突出，就是我们不知道matlab中NaN的确切数值，所以会有一些不必要的数据处理来考虑这些值。

有谁知道matlab中NaN的确切值或至少值的范围？

我最感兴趣的是了解以下两种原始类型：

(1) 浮点数 (32) 的 NaN；

(2) 双 (64) 的 NaN。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T04:19:32.073

根据[Mathwork 的文档](http://www.mathworks.com.au/help/matlab/ref/nan.html)，`NaN`返回非数字的 IEEE 算术表示。NaN 始终采用浮点表示（浮点或双精度） - 我不相信有整数 NaN。

在 IEEE 754 中，NaN 表示为浮点数，所有指数位设置为 1，小数部分为任何非零值（因此实际上有多种表示一般 NaN 的方法）。[请参阅此处](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)的“特殊值” 。

手动测试 NaN 的最可靠方法不是查找特定值，而是测试所有指数位都已设置且小数部分非零。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T07:57:16.537

`NaN`您可以使用 . 检查特定MATLAB 使用的位模式`format hex`。

```
>> format hex
>> NaN
ans =
   fff8000000000000
>> single(NaN)
ans =
   ffc00000 
```

如果您真的想要，您可以使用 构建其他 NaN `typecast`，如下所示：

```
>> format long
>> otherNan = typecast( 1 + typecast( single(NaN), 'int32' ), 'single' )
otherNan =
   NaN
>> isnan(otherNan)
ans =
     1
>> format hex
>> otherNan
otherNan =
   ffc00001 
```

# java - 使用 java 使用 WCF 服务 POST VIA REST 调用

> ID：13813196
> 
> 赞同：0
> 
> 时间：2012-12-11T03:30:20.230
> 
> 标签：java, wcf, service

我有一个 WCF 服务启动并运行，可以很好地使用获取请求。但我不确定如何处理发布这是 wcf 服务信息

```
 [OperationContract]
    [WebInvoke(UriTemplate = "/DeleteUser",
        Method = "POST",
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare)]
    boolean DeleteMember(int customerID); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:45:29.390

它应该像 GET 请求一样简单，但消息正文具有客户 ID。如果查看您的获取请求 java 代码，我可以为您提供更多详细信息。

# objective-c - 将字符串转换为 NSDate 始终为零

> ID：13813200
> 
> 赞同：0
> 
> 时间：2012-12-11T03:30:38.703
> 
> 标签：objective-c, ios, nsdate

我想从 NSString 转换为 NSDate 对象。我的字符串是 : `@"01/01/2013`。

以下是将字符串转换为 NSDate 的代码：

```
- (NSDate*) formatDateTimeFromString: (NSString* ) string{
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd-MM-yyyy"];
    NSDate* date=  [dateFormatter dateFromString:string    ];
    return date;
} 
```

我调试该函数，发现日期对象始终为零。我有什么错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T03:32:42.307

您的日期格式化程序错误（一开始可能很难看到）

改变

```
[dateFormatter setDateFormat:@"dd-MM-yyyy"]; 
```

到

```
[dateFormatter setDateFormat:@"dd/MM/yyyy"]; 
```

# safari - NPAPI插件调用javascript函数？

> ID：13813206
> 
> 赞同：0
> 
> 时间：2012-12-11T03:32:01.420
> 
> 标签：safari, npapi, browser-plugin

NPAPI插件有没有办法调用JS中的函数？如果是，请举个例子。顺便说一下，我的插件是在 safari 上运行的。
非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:42:58.147

[`NPN_Invoke()`](https://developer.mozilla.org/en-US/docs/NPN_Invoke)您使用或调用 JS 函数[`NPN_InvokeDefault()`](https://developer.mozilla.org/en-US/docs/NPN_InvokeDefault)。
我建议通读一些关于编写 NPAPI 插件的[介绍性材料。](https://stackoverflow.com/questions/2649056/how-to-write-a-browser-plugin)

# html - HTML ul 元素没有正确居中

> ID：13813212
> 
> 赞同：2
> 
> 时间：2012-12-11T03:33:02.697
> 
> 标签：html, html-lists, center

对 HTML 来说仍然很新，如果这是一个非常简单的问题，我们深表歉意......

我的格式有问题，我尝试将文档的导航元素居中，但它们似乎并没有正确地做到这一点。

这是浏览器中问题的图片 - [http://i.imgur.com/A6630.png](http://i.imgur.com/A6630.png)

这是我的 HTML。（有一些蛋糕ipsum在那里启动）

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>About Me Example Page:</title>
    <link href="../css/aboutcss.css" type="text/css" rel="stylesheet" />        
</head>

    <body>

        <div id="wrapper">  

            <h1><img src="../images/about/aboutlogo.png" alt="About Me" style="height:100px;"></h1>

            <nav>   

                <ul>
                <hr align="center"/>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../portfolio/index.html">Portfolio</a></li>
                    <li><a href="../contact/index.html">Contact</a></li>
                    <li><a href="../blog/index.html">Blog</a></li>
                <hr />
                </ul>

            </nav>  

            <img src="../images/about/aboutmephoto.jpg" id="me">

            <p>Hello there!</p>

            <p>Liquorice powder liquorice dragée macaroon. Dessert oat cake pastry cheesecake wypas brownie icing. Marzipan sweet dragée icing candy wafer tart macaroon pie. Halvah liquorice pie carrot cake pie. </p>

            <p>Liquorice powder liquorice dragée macaroon. Dessert oat cake pastry cheesecake wypas brownie icing. Marzipan sweet dragée icing candy wafer tart macaroon pie. Halvah liquorice pie carrot cake pie. </p>

                <hr align="center" width="50%" />

            <p>Liquorice powder liquorice dragée macaroon. Dessert oat cake pastry cheesecake wypas brownie icing. Marzipan sweet dragée icing candy wafer tart macaroon pie. Halvah liquorice pie carrot cake pie. </p>

            <p>Liquorice powder liquorice dragée macaroon. Dessert oat cake pastry cheesecake wypas brownie icing. Marzipan sweet dragée icing candy wafer tart macaroon pie. Halvah liquorice pie carrot cake pie. </p>        

            <footer>
            &copy; Me 2012 
            </footer>

        </div>

        </body>
</html> 
```

以及同一页面的 CSS：

```
 body {
background-color: #3D3D3D;
    }

    p, a, footer {
font-family: 'Open Sans', Sans Serif;
    }

    h1 * {
height: 125px;
display: block;
margin: 0 auto; 
}

    p {
color:#E2E2E2;  
font-size: 13px;
margin-left: auto;
margin-right: auto;
padding-left: 10px;
padding-right: 10px;
}

    footer {
font-size: 9px;
padding-bottom: 8px;
text-align: center; 
color:#E2E2E2;  
}

    nav {
text-align:center;  
}

    nav li {
display: inline;
    }

    nav a {
display: inline-block;  
text-decoration: none;
color: #E2E2E2;
font-size: 17px;
font-variant: small-caps;
font-weight: bold;
padding:0;
margin-left: 3em;
margin-right: 3em;
}   

    a:visited {
color:#E2E2E2;  
}

    #wrapper {
max-width: 1200px;
width: 90%;
background-color: #1A1A1A;  
margin-left: auto;
margin-right: auto; 
border-style: solid;
border-width: 2px;
border-color: black;
    }

    #me {
margin: 25px;
border-style: solid;
border-width: 5px;
border-color: #656565;
height:300px;   
float:right;
} 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:41:48.780

**删除：** `hr`的`ul`。

**并提出：**

```
nav ul {
    border-width: 2px 0px 2px 0px ;
    border-style: solid ;
    border-color: #FFFFFF;
    padding: 5px 0px 5px 0px;
} 
```

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:40:30.967

添加margin-right: 40px; 到你的 ul css

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T03:46:12.067

从 UL 标签中取出 HR 标签 - 如果您仍然倾向于使用它 -。是的，一个边框（顶部和底部，实心，灰色，1px 就可以了）

```
 <hr>
                <ul>

                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../portfolio/index.html">Portfolio</a></li>
                    <li><a href="../contact/index.html">Contact</a></li>
                    <li><a href="../blog/index.html">Blog</a></li>

                </ul><hr /> 
```

在 CSS 中

```
 nav {
text-align:center; 
padding-left:50px;
padding-right:50px; 
} 
```

# c++ - 为什么片段着色器比渲染纹理更快？

> ID：13813213
> 
> 赞同：0
> 
> 时间：2012-12-11T03:33:08.137
> 
> 标签：c++, opengl, glsl

我检查了一些东西，我得到了关于 C++ & OpenGL & GLSL 性能的奇怪结果。

在第一个程序中，我使用片段着色器将像素绘制到纹理上，然后渲染纹理。纹理的 mag\min 为`GL_NEAREST`.

在第二个程序中，我使用片段着色器并直接渲染到屏幕上。

为什么第二个程序更快？渲染纹理不是更快而不是重复相同的动作吗？

这就像拍摄 AAA 游戏的视频，然后在同一台计算机上显示它并获得较低的 FPS 视频。

片段着色器是：

```
uniform int mx,my;

void main(void) {
    vec2 p=gl_FragCoord.xy;
    p-=vec2(mx,my);
    if (p.x<0.0)
        p.x=-p.x;
    if (p.y<0.0)
        p.y=-p.y;
    float dis=sqrt(p.x*p.x+p.y*p.y);
    dis+=(abs(p.x)+abs(p.y))-(abs(p.x)-abs(p.y));
    p.x/=dis;
    p.y/=dis;
    gl_FragColor=vec4(p.x,p.y,0.0,1.0);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T03:59:56.593

与性能问题一样，真正确定的唯一方法是使用分析器。

也就是说，我的猜测是，这主要是处理带宽与内存带宽的问题。要渲染纹理，处理器必须从内存的一部分读取数据，并将相同的数据写回内存的另一部分。

要直接从着色器渲染，处理器只需将输出写入内存，而不必从内存中读取数据。

因此，这是一个更快的问题：从内存中读取特定数据，还是使用处理单元生成它？着色器中的数学非常简单（基本上唯一复杂的部分`sqrt`是其他内存访问同时进行，等等）

请注意，两者（着色器与纹理）具有完全不同的特征。无论创建纹理涉及的计算多么简单或复杂，读取纹理的速度几乎都是恒定的。不是说显而易见的，但是如果计算很简单，着色器会运行得很快，但如果计算变得复杂，就会减慢（可能很多）。在您提到的 AAA 游戏中，可以公平地猜测，至少有一些着色器使用了足够复杂的计算，它们几乎肯定会比纹理读取慢。在相反的极端情况下，一个非常简单的着色器（例如，只是将片段颜色从输入传递到输出的着色器）可能比从纹理中读取要快得多。

# php - 中止上传请求

> ID：13813214
> 
> 赞同：2
> 
> 时间：2012-12-11T03:33:16.063
> 
> 标签：php, jquery, ajax, html

我在尝试支持取消文件上传时遇到问题。我想知道确定上传是否可取消的最佳做法。那么如何确定文件何时完成上传，而不是服务器生成/返回响应？我知道这可以通过跟踪 HTML5 中的文件进度来实现，但是由于我必须支持 IE9，所以我的想法已经不多了。

最终结果是，如果您尝试取消即将完全上传的文件上传，并发出中止请求，您最终会中止响应并且文件愉快地位于服务器上。

我正在使用 jquery 提交请求，并通过 abort() 方法取消。我在浏览器控制台中看到请求已成功中止。

我错过了一些微不足道的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T20:15:11.387

PHP 现在可以跟踪上传进度。请参阅[“会话上传进度”](http://php.net/manual/en/session.upload-progress.php)。

使用此功能编写一个简短的脚本：`checkUpload.php`，并使用 AJAX 将状态返回到您的 IE9 页面。

```
<?php
$_SESSION["upload_progress_123"] = array(
 "start_time" => 1234567890,   // The request time
 "content_length" => 57343257, // POST content length
 "bytes_processed" => 453489,  // Amount of bytes received and processed
 "done" => false,              // true when the POST handler has finished, successfully or not
 "files" => array(
  0 => array(
   "field_name" => "file1",       // Name of the <input/> field
   // The following 3 elements equals those in $_FILES
   "name" => "foo.avi",
   "tmp_name" => "/tmp/phpxxxxxx",
   "error" => 0,
   "done" => true,                // True when the POST handler has finished handling this file
   "start_time" => 1234567890,    // When this file has started to be processed
   "bytes_processed" => 57343250, // Number of bytes received and processed for this file
  ),
  // An other file, not finished uploading, in the same request
  1 => array(
   "field_name" => "file2",
   "name" => "bar.avi",
   "tmp_name" => NULL,
   "error" => 0,
   "done" => false,
   "start_time" => 1234567899,
   "bytes_processed" => 54554,
  ),
 )
); 
```

使用 PHP，现在也可以**取消**上传过程。从上面引用的同一手册页中，出现以下文本：

> 也可以通过将 $_SESSION[$key]["cancel_upload"] 键设置为 TRUE 来取消当前正在进行的文件上传。当在同一个请求中上传多个文件时，这只会取消当前正在进行的文件上传和待处理的文件上传，但不会删除成功完成的上传。当像这样取消上传时，$_FILES 数组中的错误键将设置为 UPLOAD_ERR_EXTENSION。

PHP 文档中唯一没有涉及的是如何获取总文件大小。这里有一个很好的回顾这个过程：[“PHP Master | Tracking Upload Progress”](http://phpmaster.com/tracking-upload-progress-with-php-and-javascript/)

# java - Google API Java 客户端 - 获取用户信息

> ID：13813219
> 
> 赞同：5
> 
> 时间：2012-12-11T03:33:58.530
> 
> 标签：java, google-api, google-drive-api, google-api-java-client

我无法在 Google API Java 客户端库版本 1.12.0-beta 中找出一个看似简单的任务。我可以使用 OAuth2 进行身份验证，并且可以检索和操作我的应用程序所需的部分 Google Drive。但是，我想遵循 Google 的[最佳做法](https://developers.google.com/drive/practices)，并在我的应用顶部显示基本的用户信息。

我搜索了谷歌提供的文件迷宫，也搜索了许多其他网站，但似乎找不到我需要的东西。我查看了最佳实践页面上建议的 Userinfo API。据我所知，它应该是我正在使用的 java 客户端的一部分，但事实并非如此。我什至找到了一个[完整的方法示例](https://developers.google.com/drive/credentials)，它准确地概述了我如何获取用户信息。它引用的类 - Userinfo - 似乎不是我正在使用的客户端库中包含的任何库的一部分。我进一步搜索以查看是否缺少包含 OAuth 服务 Java 客户端的单独下载。

我认为我遇到的主要问题是查找当前版本的 Java 客户端库的相关信息。有没有其他人遇到过这个问题？我将非常感谢有关如何获取基本用户信息的任何指示。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T14:00:08.097

我认为您正在混淆 Drip API 和 OAuth API。

用户信息可以通过以下方式从 Drive API 获取：

（其中 service 是您的 com.google.api.services.drive.Drive 实例）

```
About about = service.about().get().execute();
System.out.println("Current user name: " + about.getName());
System.out.println("Root folder ID: " + about.getRootFolderId());
System.out.println("Total quota (bytes): " + about.getQuotaBytesTotal());
System.out.println("Used quota (bytes): " + about.getQuotaBytesUsed()); 
```

来自[https://developers.google.com/drive/v2/reference/about/get](https://developers.google.com/drive/v2/reference/about/get)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-22T02:06:11.627

这是在 java 中使用 OAuth 2 获取用户信息的示例如果您将 Google Drive 添加到 SCOPE（例如[https://www.googleapis.com/auth/drive.file](https://www.googleapis.com/auth/drive.file)），您甚至可以访问 Google Drive API

完整示例
[https://github.com/riversun/google-login-servlet-example-simple](https://github.com/riversun/google-login-servlet-example-simple)

在小服务程序中

```
 GoogleCredential credential = OAuthSession.getInstance().createCredential(req);

        Oauth2 oauth2 = new Oauth2.Builder(
                new com.google.api.client.http.javanet.NetHttpTransport(),
                new com.google.api.client.json.jackson2.JacksonFactory(),
                credential).build();

        // Get userInfo using credential
        Userinfoplus userInfo = oauth2.userinfo().get().execute(); 
```

在 OAuthFilter

```
 // Return OAuth2 scope you want to be granted to by users
    @Override
    protected List<String> getScopes() {

        final String OAUTH2_SCOPE_MAIL = "email";
        final String OAUTH2_SCOPE_USERINFO_PROFILE = "https://www.googleapis.com/auth/userinfo.profile";

        return Arrays.asList(OAUTH2_SCOPE_MAIL, OAUTH2_SCOPE_USERINFO_PROFILE);} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T04:08:50.010

对于像我一样寻找的任何人，您需要：

```
 <dependency>
        <groupId>com.google.apis</groupId>
        <artifactId>google-api-services-oauth2</artifactId>
</dependency> 
```

专业提示：当您有 Java 类名时，请转到 Maven Central、高级搜索并搜索类名。它将列出包含该类的所有库。您可以使用完全限定名或仅使用类名。即使你不使用 maven，你也可以从那里下载 jar 文件。

# c# - MVC - 在 jquery 对话框中打开 PartialView

> ID：13813220
> 
> 赞同：0
> 
> 时间：2012-12-11T03:34:15.667
> 
> 标签：c#, jquery, asp.net-mvc, razor, asp.net-mvc-partialview

我有一个问题让我发疯了好几天。所以我有一个包含项目的 html 表。要点基本上是单击一个按钮并打开一个带有消息的 jquery 对话框，询问我是否要删除所选项目。现在删除部分可能是下一个原因，因为我什至无法显示带有确认消息的对话框。我所做的是单击表上的删除图标之一来删除我选择的项目，但是随着带有对话框的部分视图完成加载，jquery 会引发未定义的函数错误。以下模式已经在另一个类似的功能（带有可点击图标的表格，显示对话框）上实现，但我无法找出这里有什么问题。

这是“主”视图中表格的代码。

```
<table width="100%" cellspacing="0" border="0" align="center" cellpadding="3"  
 style='table-layout: fixed'>
    <tr class="tr-header">
        <th width="20px">
            &nbsp;
        </th>
        <th width="200px">
            File Name
        </th>
        <th width="120px">
            Type
        </th>
        <th width="130px">
            Date
        </th>
        <th width="480px">
            Comments
        </th>
    </tr>
    @foreach (var item in Model.Uploads)
    {
        <tr>
        <td align="center">
            @using (Ajax.BeginForm("DeleteUpload", "Candidate", 
                                   new { id = item.UploadID }, 
                                   new AjaxOptions { UpdateTargetId = 
                                                    "DeleteUploadForm", 
                                                     HttpMethod = "Get" }))
            {
                @*<a href='@Url.Action("DeleteUpload", new { id = item.UploadID })'>
                <img src="@Url.Content("~/icons/delete.png")" alt="Click to delete upload" border="0" /></a>*@
                <input type="image" name="DeleteUpload" id="DeleteUpload" src="@Url.Icon("delete.png")"/>
            }
            </td>
            <td align="center">
                @(item.FileName);
            </td>
            <td align="center" nowrap="nowrap">
                 @item.UploadType
            </td>
            <td align="center" nowrap="nowrap">
                 @item.UploadDate
            </td>
            <td align="justify" style="overflow:auto">
                        @Html.Raw(Html.Encode(item.Comments).Replace("\n", "<br />"))
                    </td>
                </tr>
            }
        </table>

<div id="DeleteUploadForm">
</div> 
```

正如您在第一列中注意到的那样，我有两种方法可以调用已注释的控制器，带有输入图像的方法在我单击它时不会提交，并且锚链接可以调用控制器和我有对话框的部分视图，但是 jQuery 库在完成后会“崩溃”。

这是控制器。

```
public ActionResult DeleteUpload(int id)
{
    Upload UploadToDelete = CandidateProxy.GetUploadByID(this.CurrentUser.DbInfo, id);

    return PartialView(UploadToDelete);
 } 
```

那里没有什么太壮观的。然后它调用下面的局部视图。

```
@model Project.Entities.Uploads

<script src="@Url.Script("jquery.validate.min.js")" type="text/javascript"></script>           
<script src="@Url.Script("jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Script("jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
<script src="@Url.Script("ui/jquery.ui.core.js")" type="text/javascript"></script>
<script src="@Url.Script("ui/jquery.ui.widget.js")" type="text/javascript"></script>

<script src="@Url.Script("ui/jquery-ui-1.8.23.custom.js")" type="text/javascript"></script>
<script src="@Url.Script("ui/jquery.ui.mouse.js")" type="text/javascript"></script>
<script src="@Url.Script("ui/jquery.ui.button.js")" type="text/javascript"></script>
<script src="@Url.Script("ui/jquery.ui.draggable.js")" type="text/javascript"></script>
<script src="@Url.Script("ui/jquery.ui.position.js")" type="text/javascript"></script>
<script src="@Url.Script("ui/jquery.ui.resizable.js")" type="text/javascript"></script>
<script src="@Url.Script("ui/jquery.ui.dialog.js")" type="text/javascript"></script>
<script src="@Url.Script("ui/jquery.effects.core.js")" type="text/javascript"></script>
<script src="@Url.Script("dialog/DeleteUploadDialog.js")" type="text/javascript"></script>

<div="DeleteUploadDialog">
@using (Html.BeginForm("DeleteUpload", "Home", FormMethod.Post))
{
    <fieldset>
    <div>
    <br />
    Do you want to delete the following file? @Model.UploadName
    </div>
    <input type="submit" name="submit" value="Delete" class="toolbar-button" />
    <input type="button" name="submit" value="Cancel" class="toolbar-button" />
    </fieldset>
}

</div> 
```

这是包含我的对话框设计的部分视图。它最终会向控制器发送删除上传的请求，这很容易，因为我更熟悉服务器端编码，但整个前端对我来说是非常新的。最后是 DeleteUploadDialog.js 文件，我在其中编写了对话框的属性。

```
$(function () {
    $("#DeleteUploadDialog").dialog({
        autoOpen: true,
        modal: true,
        width: 950,
        height: 350,
        close: function (event, ui) {
            $("#DeleteUploadDialog").remove();
        }
    });
}); 
```

这就是我的代码。任何其他你想知道的让我知道。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:26:44.707

我认为您在这里尝试做的是开销。您正在打开一个对话框并在关闭时将其删除.. 这样做不会更简单：

```
 $(buttonDelete).click(function () {
        var confirmDelete = confirm("Are you sure you want to delete this item?");
        if (confirmDelete === true) {
           $.ajax({
                url: '/Home/DeleteAttachment',
                dataType: "json",
                type: "POST",
                data: { "id": id },
                success: function () {
                    $(rowToDelete).remove();
                }
            });
        }
    }); 
```

和

```
 [HttpPost]
    public JsonResult DeleteAttachment(int id)
    {
        DeleteAttachment(id);
        return Json("ok");
    } 
```

如果你真的想返回 partial 你可以这样做：

```
$(buttonDelete).click(function () {
        var confirmDelete = confirm("Are you sure you want to delete this item?");
        if (confirmDelete === true) {
           $.ajax({
                url: '/Home/DeleteAttachment',
                dataType: "html",
                type: "POST",
                data: { "id": id },
                success: function (response) {
                    $(divId).replace(response);
                }
            });
        }
    }); 
```

和

```
 [HttpPost]
    public PartialViewResult DeleteAttachment(int id)
    {
        Upload UploadToDelete = CandidateProxy.GetUploadByID(this.CurrentUser.DbInfo, id);
        return PartialView(UploadToDelete);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:29:11.443

仅仅为了确认而进行服务器往返并不是一个好主意。您可以使用下面的自定义确认对话框在客户端进行确认。这也不会阻止您的脚本执行。

我已经创建了自定义确认框，你可以试试这个：

```
function ConfirmationBox(pTitle, pText, pButtonType, pParam, pCallBack, pCancelCallback) {
    if (pButtonType == null) pButtonType = "okcancel";

    $('<div></div>').appendTo('body').html(pText)
    .dialog({
        resizable: false,
        modal: true,
        title: pTitle,
        buttons: GetButtons(pButtonType),
        autoOpen: true,
        width: 'auto'
        , Close: function (event, ui) {
            $(this).remove();
        }
    });

    $("input[type=submit], input[type=button]").button();
    $("#confirmDialog button").button();
    return this;
    function GetButtons(pButtonType) {
        var cBtn;
        switch (pButtonType) {
            case "yesno":
                cBtn = {
                    "Yes": function () {
                        if (pCallBack && pCallBack.length > 0) {
                            window[pCallBack](pParam);
                        }
                        $(this).dialog("close");
                        return true;
                    },
                    "No": function () {
                        if (pCancelCallback && pCancelCallback.length > 0) {
                            window[pCancelCallback](pParam);
                        }
                        $(this).dialog("close");
                        return false;
                    }
                }
                break;
            case "okcancel":
                cBtn = {
                    "Ok": function () {
                        if (pCallBack && pCallBack.length > 0) {
                            window[pCallBack](pParam);
                            $(this).dialog("close");
                        }
                        return true;
                    },
                    Cancel: function () {
                        if (pCancelCallback && pCancelCallback.length > 0) {
                            window[pCancelCallback](pParam);
                            $(this).dialog("close");
                        }
                        return false;
                    }
                }
                break;
        }
        return cBtn;
    }
} 
```

参数详情：

pTitle：对话框的标题

pText：对话框的文本

pButtonType：这里我们有 2 个选项 yesno | 确定取消

pParam：回调函数的参数

pCallBack：成功回调（在“是”单击时调用的函数）

pCancelCallback：取消回调（在“否”点击时调用的函数）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T04:59:31.700

难道不应该

```
autoOpen: false 
```

代替

```
autoOpen: true 
```

然后在你的点击事件中

```
$("#DeleteUpload").click(function()
{
    $("#DeleteUploadDialog").dialog("open");
}); 
```

# ruby-on-rails - Rails：如何在特定字符后拆分字符串

> ID：13813221
> 
> 赞同：1
> 
> 时间：2012-12-11T03:34:29.147
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我`name`在数据库中有一个列，其中包含字符串，就像`CVM&#8482;`我想要做的是将它拆分，以便＆符号之后的所有内容都进入不同的列，而字符串之前的所有内容都保持在原来的位置。最终结果应放入`&#8482;`名为`abbr`并保存`CVM`到`name`列中的列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:42:12.220

创建 rake 任务文件

```
lib/tasks/split_name.rake 
```

然后粘贴以下内容，并将“TableName”更改为您的实际表名。

```
task :split_name => :environment do
    TableName.all.each do |r|
        a = r.name.split("&") #assuming exact same string format, and not null
        r.update_attribute(:name, a[0])
        r.update_attribute(:abbr, '&' + a[1])
    end
end 
```

然后像这样运行它

```
rake split_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:52:46.270

这必须在 Rails 级别完成吗？您也可以仅使用具有`split_part`功能的 Postgres 来执行此操作。我假设您正在使用`users`表格：

```
ALTER TABLE users ADD COLUMN abbr VARCHAR;

UPDATE users 
  SET name = SPLIT_PART(name, '&#8482;', 1),
      abbr = '&#8482;' || SPLIT_PART(name, '&#8482;', 2); 
```

如果需要，您还可以将这些查询烘焙到 Rake 任务中。

更新：Opps 我假设您使用的是 Postgres。但是其他语言应该有类似的方法可以使用。

# java - 使用 poi 转换 ms word 2007

> ID：13813222
> 
> 赞同：1
> 
> 时间：2012-12-11T03:34:31.323
> 
> 标签：java, servlets, ms-word, apache-poi

什么版本的 apache poi 暂存器可以用于 2007 和 2003 格式。现在我使用 poi-scratchpad-3.8 但它只有将 doc 文件转换为 html、pdf 等的方法。但我还需要使用 docx 哪个版本的 poi暂存器有这个功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-20T20:43:07.310

```
 <dependencies>
    <!-- https://mvnrepository.com/artifact/org.apache.xmlbeans/xmlbeans -->
    <dependency>
        <groupId>org.apache.xmlbeans</groupId>
        <artifactId>xmlbeans</artifactId>
        <version>2.6.0</version>
    </dependency>

    <!-- https://mvnrepository.com/artifact/dom4j/dom4j -->
    <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency>

    <!-- https://mvnrepository.com/artifact/org.dom4j/dom4j -->
    <dependency>
        <groupId>org.dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>2.0.0</version>
    </dependency>

    <!-- https://mvnrepository.com/artifact/com.lowagie/itext -->
    <dependency>
        <groupId>com.lowagie</groupId>
        <artifactId>itext</artifactId>
        <version>2.0.7</version>
    </dependency>

    <!-- https://mvnrepository.com/artifact/org.apache.poi/poi -->
    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi</artifactId>
        <version>3.16</version>
    </dependency>
    <!-- https://mvnrepository.com/artifact/org.apache.poi/poi-ooxml -->
    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi-ooxml</artifactId>
        <version>3.16</version>
    </dependency>
    <!-- https://mvnrepository.com/artifact/org.apache.poi/poi-scratchpad -->
    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi-scratchpad</artifactId>
        <version>3.16</version>
    </dependency>
    <!-- https://mvnrepository.com/artifact/org.apache.poi/poi-examples -->
    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi-examples</artifactId>
        <version>3.16</version>
    </dependency>

</dependencies> 
```

# r - 连接长度

> ID：13813224
> 
> 赞同：1
> 
> 时间：2012-12-11T03:34:41.153
> 
> 标签：r, igraph

igraph中是否有计算编号的函数。基于属性的每个连接组件的大小和大小。IE。顶点的子集通过它们的属性“连接”。

```
library(igraph)
## create example graph
g1 <- graph.full(5)
V(g1)$name <- 1:5    
g2 <- graph.full(5)
V(g2)$name <- 6:10
g3 <- graph.ring(5)
V(g3)$name <- 11:15
g <- g1 + g2 + g3 + edge('1', '6') + edge('1', '11')

##defining attribute to subset of vertices
hh<-1:vcount(g) %in% c(7,6,1,13,14)
g<-set.vertex.attribute(g, name="selected" ,value=0)
g<-set.vertex.attribute(g, name="selected",hh, value=1)

#plotted out
vc="[<-"(rep('black',vcount(g)),c(7,6,1,13,14),'red')
plot(g,vertex.color=vc, vertex.label.color="white") 
```

我现在能想到的是仅使用选定的顶点重新绘制并运行该`clusters`函数。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:41:00.300

您可以使用`induced.subgraph`或`subgraph`依赖于您的 igraph 版本

```
 clusters(induced.subgraph(g,V(g)[V(g)$selected == 1]))

 $membership
[1] 1 1 1 2 2

$csize
[1] 3 2

$no
[1] 2 
```

# java - 如何关闭有关空侦听器的 Android MediaPlayer 投诉

> ID：13813225
> 
> 赞同：0
> 
> 时间：2012-12-11T03:34:45.230
> 
> 标签：java, android, media-player

在我的 android 应用程序中，我使用 MediaPlayer 播放声音。但是，MediaPlayer 期望注册一堆不同的侦听器：`onPreparedListener`、`onCompletionListener`、`onSeekCompleteListener`等。没有它们，MediaPlayer 会向 logcat 发出错误消息：

`12-10 19:28:03.605: E/MediaPlayer(1820): mOnCompletionListener is null. Failed to send MEDIA_PLAYBACK_COMPLETE message.`

我的应用程序不需要对这些事件执行任何操作，因此不需要监听器。处理这个问题的标准方法是什么？我应该注册空白听众吗？我不应该注册任何听众吗？如果是这样，我该如何关闭错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:09:20.753

我不确定您使用的是什么 API 级别，但这些错误消息似乎不在 API 14+ 的 Android 源代码中。错误消息可能出现在 Android 的 MediaPlayer 类的早期版本中。如果您安装了最新的 SDK 并下载了源代码，则该类位于：/sdk/sources/android-/android/media/MediaPlayer.java。请注意，“TAG”变量定义为：

```
private final static String TAG = "MediaPlayer"; 
```

并且 OnCompletionCallback 设置使用：

```
public void setOnCompletionListener(OnCompletionListener listener)
{
    mOnCompletionListener = listener;
} 
```

这再次证实了我的怀疑，即您可能使用的是较旧的 SDK。无论如何，看起来简单的解决方法就是添加带有空回调方法的侦听器。我希望这有帮助。

# css - 底部边框在子菜单中的 chrome 中消失

> ID：13813229
> 
> 赞同：0
> 
> 时间：2012-12-11T03:35:15.947
> 
> 标签：css, google-chrome, border

在网站 (lainegabriel.net) 的子菜单上，我的底部边框在“购买”下的子菜单中的某些链接上消失。这仅出现在 Chrome 中；Firefox 和 Safari 可以正确呈现它。我相信锚标记以某种方式与无序列表中的元素重叠。但我根本无法弄清楚发生了什么。

如果您导航到子菜单内的页面，问题就会消失。否则，一些边界会消失。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:57:17.427

```
ul.sub-menu li{
               float:none} 
```

将其替换为`ul.sub-menu li{ display:block; width:100%;}`

# javascript - 使用 javascript 或 jQuery 隐藏特定元素之后的所有列表元素

> ID：13813236
> 
> 赞同：0
> 
> 时间：2012-12-11T03:36:27.263
> 
> 标签：javascript, jquery, dom

遍历一个无序列表中的所有列表项并删除指定列表项之后的所有项的最快方法是什么？

示例：假设列表将始终包含带有文本“爱好”的项目。javascript 位必须找到该项目并删除它之后的所有 li 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:45:54.780

使用[`:contains`](http://api.jquery.com/contains-selector/)和[`.nextAll`](http://api.jquery.com/nextAll/)：

```
$('li:contains("Hobbies.")').nextAll().hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:46:01.693

这将隐藏特定元素之后的所有 li 元素

```
$('li').filter(function(index) { return $(this).text() === "Hobbies"; }).nextAll().hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T03:44:09.707

使用选择器抓取您的项目`:contains`以查找“爱好”。然后，您可以使用它们来抓取所有`li`物品。`nextAll()``remove()`

# javascript - 初学者 Javascript：'function xyz(){}' 和 'var xyz = function(){}' 有什么区别？

> ID：13813237
> 
> 赞同：3
> 
> 时间：2012-12-11T03:36:34.190
> 
> 标签：javascript

> **可能重复：**
> [JavaScript：var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

我一直在学习 CodeAcademy 的 Javascript 课程，但有些事情已经超出了我的想象。我了解函数是如何工作的，并且我正试图围绕 OOP 和对象/方法展开思考。

我的问题是，创建这样的函数有什么区别：

```
function countTo(number){
    for (var i=1; i<=number; i++){
        console.log(i);
    }
}

countTo(15); 
```

并创建一个这样的函数：

```
var countToTwo = function(number){
    for (var i=1; i<=number; i++){
        console.log(i);
    }
};

countToTwo(27); 
```

两者都做同样的事情并具有相同的输出。它们是否完全相同/可互换？创建函数时使用哪一个有关系吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T03:40:38.467

第一个是函数声明，并且是“提升的”，这意味着它可以立即在上下文中的任何位置使用。

第二个是函数表达式，其处理方式与任何其他变量声明/赋值一样。的*声明*被`countToTwo`提升并在声明它的范围内的任何地方立即可用，但*分配*保持在完全相同的位置。

简而言之，在解析表达式之前，您无法调用声明为表达式的函数。

这段代码应该更清楚地说明。

```
foo();

//blah();

function foo(){
    alert('hoisted and works');
}

var blah = function(){
    // not hoisted, would fail if called
}
​ 
```

[现场演示](http://jsfiddle.net/nrjfs/1/)

# javascript - Visual Studio 2010 的最佳 java 脚本和 jQuery Intellisense 如何（以及哪个）被合并？

> ID：13813241
> 
> 赞同：2
> 
> 时间：2012-12-11T03:37:06.530
> 
> 标签：javascript, jquery, visual-studio, intellisense

我正在开发一个在 Visual Studio 2010 中广泛使用 jQuery 和 Javascript 的 Web 应用程序。目前的问题是，每当我在 jQuery / java 脚本中编写代码时，都没有提供任何出色的智能感知……我一直在为此思考互联网，谁能告诉如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:50:07.893

我使用 JSEnhancements：

[http://visualstudiogallery.msdn.microsoft.com/0696ad60-1c68-4b2a-9646-4b5f4f8f2e06](http://visualstudiogallery.msdn.microsoft.com/0696ad60-1c68-4b2a-9646-4b5f4f8f2e06)

它并不完美，但总比没有好，而且价格也不错（免费）。

# css - 如何让标题中的横幅在徽标后面流动？需要有响应

> ID：13813242
> 
> 赞同：0
> 
> 时间：2012-12-11T03:37:31.477
> 
> 标签：css, responsive-design

我在让我的标题图像正确流动时遇到了一些问题。这是一个响应式 WP 主题。

这是我想要实现的设计。（我现在不担心社交图标）： [http ://screencast.com/t/0xJuqKuteU](http://screencast.com/t/0xJuqKuteU)

首先，我需要带有红色背景的消息栏在徽标下方和横幅之外流动，如下所示：[http ://screencast.com/t/CZ4DkbRA50R](http://screencast.com/t/CZ4DkbRA50R)

然后对于横幅和消息栏，当屏幕缩小到手机大小时，我需要它们更好地工作。这就是我需要它在手机上看的方式：http: [//screencast.com/t/z5BQ7zB4](http://screencast.com/t/z5BQ7zB4)

请注意，横幅出现在导航的正下方，消息栏消失了。

这是我正在开发的网站：http: [//dev.frugalreality.com](http://dev.frugalreality.com)

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:28:48.240

To make the message bar "float" underneath the logo, you need to set the containing div css (#header-callout) to have `position:relative;` and set the z-index to something negative (`z-index: -1` should do). This creates a layering in the divs and puts the message bar below all other divs (unless you set something else to a lower z-index).

For displaying things differently on the iPhone screen size I would suggest using a media-query. If you don't know how to use those, I suggest browsing through this article to get a better idea of what I mean: [http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

In order to NOT display the message bar, you will have to put `display:none` for the #header-callout in the css of the appropriate media-query.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:41:16.933

拥有一个屏幕 CSS 和媒体/电话 CSS 页面应该有助于管理这两个不同的屏幕。

# ruby - 注入与红宝石中的减少相同吗？

> ID：13813243
> 
> 赞同：116
> 
> 时间：2012-12-11T03:37:32.620
> 
> 标签：ruby, alias, reduce, inject

我看到他们在[这里](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-reduce)一起记录。它们是一样的吗？为什么 Ruby 有这么多别名（比如数组的 map/collect）？非常感谢。

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-12-11T03:44:43.647

是的，它`fold`在许多其他编程语言和数学中也被调用。Ruby 使用了很多别名，以便对不同背景的程序员更直观。如果你想`#length`在一个 上使用`Array`，你可以。如果你想使用`#size`，那也没关系！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-24T08:28:36.803

[`Enumerable#reduce`](http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-reduce)明确指定它的文档的更新版本：

> 和方法是别名`inject`。`reduce`两者都没有性能优势。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-15T19:33:59.943

> 它们是一样的吗？

是的，别名最终运行完全相同的代码。

> 为什么 Ruby 有这么多别名（比如数组的 map/collect）？

它归结为语言的方法

不同的语言有不同的方法，我在这里尝试将其[可视化](https://richstone.io/why-are-there-multiple-names-for-one-method-in-ruby/)：

[![在此处输入图像描述](../Images/790a30eca30a55e2c11e09ce131b7636.png)](https://i.stack.imgur.com/ZCc5A.png)

Ruby 这样做是为了提高开发人员的生产力。基本上，通过使用别名，您可以让来自不同编程语言**和**人类语言背景的程序员更直观地编写代码。

但是，它们也可以帮助您的代码清晰，因为某些事物可能具有不同的语义可能性，例如方法`midnight()`也可以表示为`start_of_day`或`end_of_day`。根据上下文，这些可能会更清楚。

顺便说一句，一些程序员也使用`inject`and`reduce`来区分不同的语义情况。

# c - 在 C 中查找数组的长度时遇到问题？

> ID：13813246
> 
> 赞同：0
> 
> 时间：2012-12-11T03:38:09.627
> 
> 标签：c, arrays

> **可能重复：**
> [c 动态内存分配和 sizeof()](https://stackoverflow.com/questions/5491777/c-dynamic-memory-allocation-and-sizeof)

我试图通过保留一个 16 MiB 的大块并尝试每次访问不同的元素来查找时间来找到缓存块。我只是不能写数组的长度。如何编写一个 for 循环来遍历数组。我需要数组的长度；我怎么能找到那个？我试过`sizeof(a)/sizeof(a[0])`了，但这不起作用，或者我做错了什么，因为我的作业表告诉我它可以容纳 400 万个`int`..

```
register *a;
a = malloc(16777216);
int i;
for (i = 0; i < sizeof(a)/sizeof(a[0]); i = i + 1) {

    printf("\ni = %d", i);
} 
```

这只会打印 i = 0 i = 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:40:26.117

代码`sizeof(a)`只返回指针的大小，与指向`register *a`的数组的大小完全无关`a`。

C 数组不跟踪它们包含多少项。只有在编译时知道数组的大小时，才能使用此语法。但是你不能用这种方式分配的数组来做到这一点。

对于此任务，您需要自己跟踪此信息。您可以将该值存储在一个变量中，或者您可以附加一个带有特殊值的数组元素，该值表明它是数组的末尾（就像我们对 C 字符串所做的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:41:30.667

a 是寄存器指针，而不是数组。因此 sizeof(a) 不会像您期望的那样返回 16MB。请直接使用 16777216 而不是 sizeof()

# java - Java 生成文本文件格式的格式化报告

> ID：13813247
> 
> 赞同：6
> 
> 时间：2012-12-11T03:38:19.307
> 
> 标签：java, text, format, report

光环，

我一直在寻找一种使用 java 在文本文件中生成格式良好的报告的方法。

例如，我可能需要打印以下格式的报告

```
月度报告
A 报告名称 页码：1
A 日期：YYYY-MM-DD              
一种
A 类别 数量 价格
一种  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  -  - -  -  -  -  -  -  -  - - -----
B 笔 100 $100
B 纸 200 $400
一种
一个=====================================
B 总计 500 美元
一个=====================================

```

我曾尝试编写自己的程序，但我只是觉得它一团糟！！！所以我想知道是否有任何现有的库可以使用，或者有没有好的方法来实现它？

顺便说一句，我环顾四周，发现了一个类似于我想要的库 [https://github.com/iNamik/Java-Text-Table-Formatter](https://github.com/iNamik/Java-Text-Table-Formatter)

只是想知道是否还有其他选择。谢谢帮忙！！

==================================================== ===================

所以我制作了一个示例代码，我可能会用它来清理我的代码

 `````
 StringBuilder sb = new StringBuilder();

    sb.append(String.format("%s %50s%n", "A", "Monthly Report"));
    sb.append(String.format("%s %48s%n", "A", "Report Name"));
    sb.append(String.format("%s %n", "A"));
    sb.append(String.format("%s %-20s %-20s %-20s%n", "A", "Category", "Quantity", "Price"));
    sb.append(String.format("%s %-20s %-20s %-20s%n", "A", "--------------", "--------------", "--------------"));
    sb.append(String.format("%s %-20s %-20s %-20s%n", "B", "Paper", 100, "$200"));

    System.out.println(sb.toString()); 
```` 

`输出：`

 ````
月度报告
报告名称
一种
A 类别 数量 价格               
一种  -  -  -  -  -  -  -   -  -  -  -  -  -  -   -  -  -  -  -  -  -      
B 纸 100 $200                

```

我在想如何在不硬编码格式化程序的 int 参数的情况下在中心制作“报告名称”和在右侧制作“页码：”（即 %50s，没有 50，是否可能）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T05:49:41.327

作为替代方案，这里是基于 JDK 的解决方案

```
public static void main(String[] args) throws Exception {
    printRow("A", "Category", "Quantity", "Price");
    printRow("A", "--------------", "--------------", "--------------");
    printRow("B", "Paper", 100, 200);
}

private static void printRow(String c0, String c1, Object c2, Object c3 ) {
    System.out.printf("%s %-20s %-20s %-20s%n", c0, c1, String.valueOf(c2), c3 instanceof Integer ? "$" + c3 : c3);
} 
```

输出

```
A Category             Quantity             Price               
A --------------       --------------       --------------      
B Paper                100                  $200 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T07:15:39.627

[Apache Velocity](http://velocity.apache.org/engine/index.html)是一个很好的文本格式化或模板工具。它适用于纯文本、HTML、JSP、XML、SQL 脚本等。这是一个很好的 helloWorld[教程](http://www.javaworld.com/javaworld/jw-12-2001/jw-1228-velocity.html)。

基本步骤是：

1.  编写您的文本模板。
2.  初始化速度引擎。
3.  插入您需要的上下文。
4.  并渲染它。

像[Latex](http://www.latex-project.org/)这样的其他产品更复杂，但功能更强大。如果您只需要报告格式，请查看[JasperReports 。](http://community.jaspersoft.com/project/jasperreports-library)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T03:45:33.113

试试 iText java 库，我用它来为我的应用程序生成账单。``

# asp.net - Linq to Entity Only Select with Records

> ID：13813249
> 
> 赞同：0
> 
> 时间：2012-12-11T03:38:55.767
> 
> 标签：asp.net, vb.net, entity-framework

我试图在以下 Linq To 实体中仅选择具有适用的donorsToActions 项目的捐助者：

```
donors.SelectMany(Function(t) t.donorstoactions).GroupBy(Function(s) s.donor.id).[Select](function(p) New With { _
Key .donorname = p.key, _
Key .donoractions = p.Where(Function(j) j.action.event.id = "1").[Select](Function(k) New With { _
    Key .actionname = k.action.name, _
    Key .pledge = k.pledgeAmount, _
    Key .part = k.participant.name }) _
}) 
```

目前，这会拉动：Donor1()、Donor2（捐助者行动组）、Donor3()、Donor4()、Donor5（捐助者行动组）......

我希望它不要拉出没有附加捐赠者行动的捐赠者：Donor2（捐赠者行动组），Donor5（捐赠者行动组）

有人可以指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:21:24.883

```
donorstoactions.Where(Function(a) a.action.event.id ="9").GroupBy(Function(b) b.donor).[Select](Function(c) New With { _
Key .DonorName = c.Key.firstname, _
Key .Actions = c.[Select](Function(d) New With { _
    Key .Name = d.action.name }) _
    }) 
```

这给了我这样的东西：

Group(Row1(Donor,Actions),Row2(Donor,Actions),Row3(​​Donor,Actions) ... 这会起作用，但我更愿意

组(Donor1(Actions),Donor2(Actions))

# ruby-on-rails - 批准帐户的 Actionmailer - 电子邮件未发送

> ID：13813252
> 
> 赞同：1
> 
> 时间：2012-12-11T03:39:44.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, actionmailer

我正在尝试创建一封电子邮件，当管理员单击用户的活动帐户时发送该电子邮件

用户 has_one :account 和 account belongs_to :user

在用户.rb

```
devise :database_authenticatable, :registerable, :Trackable, :rememberable, :recoverable
attr_accessible :account, :email, :password, :password_confirmation, :account_attributes, :approved

has_one :account

end 
```

在帐户.rb

```
class Account < ActiveRecord::Base

  attr_accessible :address, :approved, :name
  belongs_to :user

end 
```

在accounts_controller.rb

```
def activate
  @accounts = Account.find(params[:id])
  @users = User.where(:id => @accounts.id)
  if (@accounts.update_attributes(approved: true)) && (@users.update_all(approved: true))
   AccountMailer.activate_account(@users).deliver   
   redirect_to accounts_path
  else
   redirect_to accounts_path
  end 
end 
```

在 account_mailer.rb 中

```
class AccountMailer < ActionMailer::Base
  default :from => "kapanjadi@gmail.com"

  def activate_account(user)
    @users = user   
        @account = account.find_by_user_id(user)
    mail(:to => user.email, :subject => "Activation Account", :from => "kapanjadi@gmail.com")
  end
end 
```

在 account_mailer/activate_account.text.erb

```
congratulation, your account is active now 
```

setup_mailer.rb

```
ActionMailer::Base.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => "localhost:3000",
  :user_name            => "kapanjadi@gmail.com",
  :password             => "password",
  :authentication       => "plain",
  :enable_starttls_auto => true
} 
```

但是一封电子邮件没有发送给电子邮件用户，并且没有错误..这些没有发生在任何其他操作中。

关于我做错了什么的任何建议？

**更新 1**

在accounts_controller.rb

```
def activate
  @account = Account.find(params[:id])
  @user = User.where(:id => @account.id)
  if (@account.update_attributes(approved: true)) && (@user.update_all(approved: true))
   AccountMailer.activate_account(@user,@account).deliver   
   redirect_to accounts_path
  else
   redirect_to accounts_path
  end 
end 
```

在 account_mailer.rb 中

```
class AccountMailer < ActionMailer::Base
default :from => "fauzieuy@gmail.com"

  def activate_account(user,account)
    @account = account
    @accounts = Account.find_by_user_id(user)
    mail(:to => user.email, :subject => "Activation", :from => "kapanjadi@gmail.com")
  end

end 
```

错误

```
undefined method `email' for #<ActiveRecord::Relation:0x3e7c720> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:12:08.343

在accounts_controller.rb

```
def activate
  @account = Account.find(params[:id])
  @user = User.where(:id => @account.id)
  if (@account.update_attributes(approved: true)) && (@user.update_all(approved: true))

    user_account = account.find_by_user_id(@user)
    AccountMailer.activate_account(@user,user_account,@account.user.mail).deliver 
    redirect_to accounts_path
  else
    redirect_to accounts_path
  end 
end 
```

在 account_mailer.rb 中

```
class AccountMailer < ActionMailer::Base
  default :from => "kapanjadi@gmail.com"

  def activate_account(user,account,to)
    @users = user   
    @account = account
    mail(:to => to, :subject => "Activation Account",  :from=>"kapanjadi@gmail.com")
  end
end 
```

以上肯定会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:20:46.833

为什么一切都是复数*（`@accounts`和`@users`）*？

```
def activate
  @account = Account.find(params[:id])

  redirect_to accounts_path and return if @account.nil? # handles bad `params[:id]`

  if @account.update_attributes(approved: true) && @account.user.update_attributes(approved: true)
   AccountMailer.activate_account(@account.user).deliver   
   redirect_to accounts_path and return
  end 

  redirect_to accounts_path
end 
```

# actionscript-3 - 如何使用 AS3 中的相同按钮循环和停止声音？

> ID：13813253
> 
> 赞同：1
> 
> 时间：2012-12-11T03:39:48.597
> 
> 标签：actionscript-3

我在舞台上有 4 个按钮，我需要一个代码，使我能够单击其中一个，“无限”循环特定声音，当再次单击时，声音停止。声音最初没有播放。此外，当其中一个声音循环播放时，如果我按下另一个按钮，我希望之前的声音停止并播放新的声音。

为了帮助更多地可视化这一点，我将解释我的项目。我必须创建一个类似于在线吉他调音器的“应用程序”。这个功能是我想重新创建的：

[http://www.gieson.com/Library/projects/utilities/tuner/](http://www.gieson.com/Library/projects/utilities/tuner/)

我什至不知道从哪里开始编码......非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:43:39.327

实际代码很大程度上取决于您如何加载声音，因此我将为代码编写“骨架”。

```
var currentSound:Sound = null;
var currentSoundChannel:SoundChannel;

var sound1:Sound = /* Load me */
var sound2:Sound = /* Load me */

button1.addEventListener(MouseEvent.CLICK, playSound1);
function playSound1(event:MouseEvent)
{
    playSound(sound1);
}

button2.addEventListener(MouseEvent.CLICK, playSound2);
function playSound2(event:MouseEvent)
{
    playSound(sound2);
}

function playSound(sound:Sound):void
{
    if (currentSound != null)
    {
        // Stop the current music
        currentSoundChannel.stop();
    }

    if (currentSound == sound)
    {
        // Stop playing ANY sound
        currentSound = null;
        currentSoundChannel = null;
    }
    else
    {
        // Play a different sound
        currentSound = sound;
        currentSoundChannel = sound.play();
    }
} 
```

# css - 如何有条件地在 AngularJS 中应用 CSS 样式？

> ID：13813254
> 
> 赞同：316
> 
> 时间：2012-12-11T03:39:53.573
> 
> 标签：css, angularjs

Q1。假设我想在按下主“删除”按钮之前更改用户标记为删除的每个“项目”的外观。（这种即时的视觉反馈应该消除对众所周知的“你确定吗？”对话框的需要。）用户将选中复选框以指示应该删除哪些项目。如果未选中复选框，则该项目应恢复为其正常外观。

应用或删除 CSS 样式的最佳方法是什么？

Q2。假设我想让每个用户个性化我的网站的呈现方式。例如，从一组固定的字体大小中选择，允许用户定义前景色和背景色等。

应用用户选择/输入的 CSS 样式的最佳方式是什么？

* * *

## 回答 #1

> 赞同：488
> 
> 时间：2012-12-11T03:39:53.573

Angular 提供了许多用于有条件/动态地操作 CSS 样式的内置指令：

*   **[ng-class](https://docs.angularjs.org/api/ng/directive/ngClass)** - 当 CSS 样式集是静态的/提前知道时使用
*   **[ng-style](https://docs.angularjs.org/api/ng/directive/ngStyle)** - 当您无法定义 CSS 类时使用，因为样式值可能会动态变化。想想样式值的可编程控制。
*   **[ng-show](https://docs.angularjs.org/api/ng/directive/ngShow)**和**[ng-hide](https://docs.angularjs.org/api/ng/directive/ngHide)** - 如果您只需要显示或隐藏某些内容（修改 CSS），请使用
*   **[ng-if](http://code.angularjs.org/1.1.5/docs/api/ng.directive:ngIf)** - 1.1.5 版中的新增功能，如果您只需要检查单个条件（修改 DOM），请使用而不是更详细的 ng-switch
*   **[ng-switch](https://docs.angularjs.org/api/ng/directive/ngSwitch)** - 使用而不是使用几个互斥的 ng-shows（修改 DOM）
*   **[ng-disabled](https://docs.angularjs.org/api/ng/directive/ngDisabled)**和**[ng-readonly](https://docs.angularjs.org/api/ng/directive/ngReadonly)** - 用于限制表单元素的行为
*   **[ng-animate](http://code.angularjs.org/1.1.4/docs/api/ng.directive:ngAnimate)** - 1.1.4 版中的新功能，用于添加 CSS3 过渡/动画

正常的“Angular 方式”包括将模型/范围属性绑定到将接受用户输入/操作的 UI 元素（即使用 ng-model），然后将该模型属性与上述内置指令之一相关联。

当用户更改 UI 时，Angular 会自动更新页面上的相关元素。

* * *

Q1 听起来像是 ng-class 的一个很好的案例——CSS 样式可以在一个类中捕获。

**ng-class**接受一个“表达式”，它必须计算为以下之一：

1.  一串以空格分隔的类名
2.  类名数组
3.  类名到布尔值的映射/对象

假设使用某些阵列模型使用NG-Repeat显示您的项目，并且当检查项目的复选框时，要应用此类`pending-delete`：

```
<div ng-repeat="item in items" ng-class="{'pending-delete': item.checked}">
   ... HTML to display the item ...
   <input type="checkbox" ng-model="item.checked">
</div> 
```

上面，我们使用了 ng-class 表达式类型 #3 - 类名到布尔值的映射/对象。

* * *

Q2 听起来像是 ng-style 的一个很好的案例——CSS 样式是动态的，所以我们不能为此定义一个类。

**ng-style**接受一个“表达式”，它必须计算为：

1.  CSS 样式名称到 CSS 值的映射/对象

对于一个人为的例子，假设用户可以在背景颜色的 texbox 中输入颜色名称（jQuery 颜色选择器会更好）：

```
<div class="main-body" ng-style="{color: myColor}">
   ...
   <input type="text" ng-model="myColor" placeholder="enter a color name"> 
```

* * *

为上述两个[小提琴。](http://jsfiddle.net/mrajcok/eTTZj/)

小提琴还包含**ng-show**和**ng-hide**的示例。如果选中复选框，除了背景颜色变为粉红色外，还会显示一些文本。如果在文本框中输入“红色”，则隐藏 div。

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2013-09-20T06:57:08.760

当我已经将一个类应用于整个表时（例如，应用于奇数行的颜色），我在**表**元素内应用类时发现了问题`<myClass tbody tr:nth-child(even) td>`。似乎当您使用**Developer Tools**检查元素时，`element.style`没有指定样式。因此`ng-class`，我没有使用 using ，而是尝试使用 using `ng-style`，在这种情况下，新的 CSS 属性确实出现在`element.style`. 这段代码对我很有用：

```
<tr ng-repeat="element in collection">

    [...amazing code...]

    <td ng-style="myvar === 0 && {'background-color': 'red'} ||
                  myvar === 1 && {'background-color': 'green'} ||
                  myvar === 2 && {'background-color': 'yellow'}">{{ myvar }}</td>

    [...more amazing code...]

</tr> 
```

**Myvar**是我正在评估的内容，在每种情况下，我都会`<td>`根据**myvar**值对每个样式应用一个样式，这会覆盖 CSS 类为整个表应用的当前样式。

**更新**

如果你想将一个类应用到表中，例如在访问页面时或其他情况下，你可以使用这个结构：

```
<li ng-class="{ active: isActive('/route_a') || isActive('/route_b')}"> 
```

基本上，我们需要激活一个**ng-class**是要应用的类和一个真假陈述。**True**应用类，而**false**不应用。所以这里我们对页面的路由和它们之间的一个**OR**进行了两次检查，所以如果我们在`/route_a` **OR**我们在`route_b`，将应用**活动**类。

这只是在右侧有一个返回真或假的逻辑函数。

所以在第一个例子中，**ng-style**受三个语句的限制。如果它们都为假，则不应用样式，但按照我们的逻辑，至少要应用一个，因此，逻辑表达式将检查哪个变量比较为真，因为非空数组始终为真，这将留下一个数组作为返回，只有一个为真，考虑到我们对整个响应使用**OR ，剩下的样式将被应用。**

顺便说一句，我忘了给你函数isActive()：

```
$rootScope.isActive = function(viewLocation) {
    return viewLocation === $location.path();
}; 
```

**新更新**

这里有一些我觉得非常有用的东西。当你需要根据一个变量的值来应用一个类时，例如一个依赖于内容的图标`div`，你可以使用下面的代码（在 中非常有用`ng-repeat`）：

```
<i class="fa" ng-class="{ 'fa-github'   : type === 0,
                          'fa-linkedin' : type === 1,
                          'fa-skype'    : type === 2,
                          'fa-google'   : type === 3 }"></i> 
```

> [来自Font Awesome](http://fortawesome.github.io/Font-Awesome/)的图标

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-05-21T12:09:15.687

当不能使用 ng-class 时（例如在设置 SVG 样式时），这很有效：

```
ng-attr-class="{{someBoolean && 'class-when-true' || 'class-when-false' }}" 
```

（我认为您需要使用最新的不稳定 Angular 才能使用 ng-attr-，我目前使用的是 1.1.4）

我发表了一篇关于使用 AngularJS+SVG 的文章。它谈到了这个问题和许多其他问题。[http://www.codeproject.com/Articles/709340/Implementing-a-Flowchart-with-SVG-and-AngularJS](http://www.codeproject.com/Articles/709340/Implementing-a-Flowchart-with-SVG-and-AngularJS)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-09-09T19:05:07.577

```
span class="circle circle-{{selectcss(document.Extension)}}"> 
```

和代码

```
$scope.selectcss = function (data) {
    if (data == '.pdf')
        return 'circle circle-pdf';
    else
        return 'circle circle-small';
}; 
```

css

```
.circle-pdf {
    width: 24px;
    height: 24px;
    font-size: 16px;
    font-weight: 700;
    padding-top: 3px;
    -webkit-border-radius: 12px;
    -moz-border-radius: 12px;
    border-radius: 12px;
    background-image: url(images/pdf_icon32.png);
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-08-23T19:25:32.280

这个解决方案对我有用

```
<a ng-style="{true: {paddingLeft: '25px'}, false: {}}[deleteTriggered]">...</a> 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-01-31T11:48:41.407

您可以使用三元表达式。有两种方法可以做到这一点：

```
<div ng-style="myVariable > 100 ? {'color': 'red'} : {'color': 'blue'}"></div> 
```

或者...

```
<div ng-style="{'color': (myVariable > 100) ? 'red' : 'blue' }"></div> 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-03-06T16:08:16.163

当您需要一个或两个属性的简单 css 样式时，另一种选择：

看法：

```
<tr ng-repeat="element in collection">
    [...amazing code...] 
    <td ng-style="{'background-color': getTrColor(element.myvar)}">
        {{ element.myvar }}
    </td>
    [...more amazing code...]
</tr> 
```

控制器：

```
$scope.getTrColor = function (colorIndex) {
    switch(colorIndex){
        case 0: return 'red';
        case 1: return 'green';
        default: return 'yellow';
    }
}; 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-11-13T06:58:16.607

请参阅以下示例

```
<!DOCTYPE html>
    <html ng-app>
    <head>
    <title>Demo Changing CSS Classes Conditionally with Angular</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
    <script src="res/js/controllers.js"></script>

    <style>

    .checkboxList {
        border:1px solid #000;
        background-color:#fff;
        color:#000;
        width:300px;
        height: 100px;
        overflow-y: scroll;
    }

    .uncheckedClass {
       background-color:#eeeeee;
       color:black;
    }
    .checkedClass {
        background-color:#3ab44a;
        color:white;
    }
    </style>

    </head>
    <body ng-controller="TeamListCtrl">
    <b>Teams</b>
    <div id="teamCheckboxList" class="checkboxList">

    <div class="uncheckedClass" ng-repeat="team in teams" ng-class="{'checkedClass': team.isChecked, 'uncheckedClass': !team.isChecked}">

    <label>
    <input type="checkbox" ng-model="team.isChecked" />
    <span>{{team.name}}</span>
    </label>
    </div>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-09-15T12:48:33.463

从 AngularJS v1.2.0rc 开始，`ng-class`甚至`ng-attr-class`在 SVG 元素上都失败了（它们确实更早地工作，即使在 class 属性中使用普通绑定）

具体来说，这些现在都不起作用：

```
ng-class="current==this_element?'active':' ' "
ng-attr-class="{{current==this_element?'active':' '}}"
class="class1 class2 .... {{current==this_element?'active':''}}" 
```

作为一种解决方法，我必须使用

```
ng-attr-otherAttr="{{current==this_element?'active':''}}" 
```

然后使用样式

```
[otherAttr='active'] {
   ... styles ...
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-08-19T13:39:29.920

有条件地应用样式的另一种（将来）方法是有条件地创建范围样式

```
<style scoped type="text/css" ng-if="...">

</style> 
```

但现在只有 FireFox 支持范围样式。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-06-06T11:13:59.313

好吧，我建议您使用返回**true**或**false**的函数检查控制器中的条件。

```
<div class="week-wrap" ng-class="{today: getTodayForHighLight(todayDate, day.date)}">{{day.date}}</div> 
```

并在您的控制器中检查条件

```
$scope.getTodayForHighLight = function(today, date){
    return (today == date);
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-11-07T14:28:05.347

我最近发现还有一个选项可能对某些人有用，因为它允许您更改样式元素中的 CSS 规则 - 从而避免重复使用 ng-style、ng-class 等角度指令的需要， ng-show、ng-hide、ng-animate 等。

此选项使用具有服务变量的服务，这些服务变量由控制器设置并由我称为“自定义样式”的属性指令监视。这个策略可以以多种不同的方式使用，我试图用这个[fiddle](http://jsfiddle.net/gavinpalmer1984/ks0o2rte/1/)提供一些一般性的指导。

```
var app = angular.module('myApp', ['ui.bootstrap']);
app.service('MainService', function(){
    var vm = this;
});
app.controller('MainCtrl', function(MainService){
    var vm = this;
    vm.ms = MainService;
});
app.directive('customStyle', function(MainService){
    return {
        restrict : 'A',
        link : function(scope, element, attr){
            var style = angular.element('<style></style>');
            element.append(style);
            scope.$watch(function(){ return MainService.theme; },
                function(){
                    var css = '';
                    angular.forEach(MainService.theme, function(selector, key){
                        angular.forEach(MainService.theme[key], function(val, k){
                            css += key + ' { '+k+' : '+val+'} ';
                        });                        
                    });
                    style.html(css);
                }, true);
        }
    };
}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-03-05T10:45:08.020

需要注意的一件事是 - 如果 CSS 样式有破折号 - 您必须删除它们。所以如果要设置`background-color`，正确的方法是：

```
ng-style="{backgroundColor:myColor}" 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-01-03T01:55:46.327

这是我有条件地在禁用按钮上应用灰色文本样式的方法

```
import { Component } from '@angular/core';

@Component({
  selector: 'my-app',
  styleUrls: [ './app.component.css' ],
  template: `
  <button 
    (click)='buttonClick1()' 
    [disabled] = "btnDisabled"
    [ngStyle]="{'color': (btnDisabled)? 'gray': 'black'}">
    {{btnText}}
  </button>`
})
export class AppComponent  {
  name = 'Angular';
  btnText = 'Click me';
  btnDisabled = false;
  buttonClick1() {
    this.btnDisabled = true;
    this.btnText = 'you clicked me';
    setTimeout(() => {
      this.btnText = 'click me again';
      this.btnDisabled = false
      }, 5000);
  }
} 
```

这是一个工作示例：
[https ://stackblitz.com/edit/example-conditional-disable-button?file=src%2Fapp%2Fapp.component.html](https://stackblitz.com/edit/example-conditional-disable-button?file=src%2Fapp%2Fapp.component.html)

# function - 从函数返回字符串时开头的神秘空间

> ID：13813256
> 
> 赞同：5
> 
> 时间：2012-12-11T03:39:57.177
> 
> 标签：function, coldfusion

为什么函数返回的字符串开头有空格？
解决方案似乎很简单，但我找不到原因。

**代码**

```
<cffunction name="getString" returntype="string">
    <cfreturn "hello">
</cffunction>
<cfoutput>  
[#getString()#] = getString()
</cfoutput> 
```

**输出**

```
[ hello] = getString() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T03:52:05.867

默认情况下，CFML 函数将产生输出，包括空格。这可能会导致不需要的空白。将 output="false" 添加到您的函数中。

```
<cffunction name="encodeMyPath" returntype="string" output="false"> 
```

# javascript - 使用 setInterval/clearInterval 自动滚动

> ID：13813257
> 
> 赞同：3
> 
> 时间：2012-12-11T03:40:06.087
> 
> 标签：javascript, setinterval, autoscroll, clearinterval

我对 JS 编码比较陌生，不能让这个小数字工作。谁能告诉我我做错了什么？

我的 JavaScript 是：

```
 incrementScroll = function() {
        window.scrollBy(0, 3) ;
    }

    startScrollLoop = function() {
        scrollLoopId = setInterval( "incrementScroll", 5) ; 
    }

    stopScrollLoop = function() {
        clearInterval( scrollLoopId ) ;
    } 
```

我的 HTML 是：

```
<button onclick="startScrollLoop()">AUTO SCROLL</button>
<button onclick="stopScrollLoop ()">STOP SCROLL</button> 
```

再次，非常感谢您的帮助。所有这一切都是新手，需要在早上完成一个项目。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:45:13.087

的第一个参数`setInterval()`应该是一个函数引用，或者非理想情况下，一个要 eval()'d 的字符串，这将是一个完整的函数调用`()`。所以删除引号：

```
// Pass the reference to incrementScroll, 
// not a quoted string containing its name.
scrollLoopId = setInterval(incrementScroll, 5); 
```

并且要清除滚动，您需要`scrollLoopId`在更高的范围内定义`var`.

```
// Define outside the function so it is available
// in scope of the stopScrollLoop() function when needed...
var scrollLoopId;
var startScrollLoop = function() {
    scrollLoopId = setInterval( incrementScroll, 5) ; 
} 
```

### [Jsfiddle 演示](http://jsfiddle.net/Uf3Nb/1/)

（使用较慢的滚动速度让您有机会单击文本中间的停止按钮）

请注意，最好将`var`关键字与每个关键字一起使用。即使它们最终会在`window`范围内（假设它们没有在另一个函数中定义）。

```
// Define with var
var incrementScroll = function() {
  window.scrollBy(0, 3);
} 
```

# jquery - jQuery 根据 csv 信息将类添加到生成的 div

> ID：13813258
> 
> 赞同：0
> 
> 时间：2012-12-11T03:40:07.413
> 
> 标签：jquery, get, addclass

我有以下代码

```
$.get('feed.txt', function(data) {
var arr = data.split('|');
var values = '';
for(var i=0; i<arr.length; i++){
  values += '<div>'+arr[i]+'</div>';
}
$('div').html(values);
}); 
```

我想根据文本文件（下面的示例）提供的信息向生成的 div 添加一个类，即如果 type="small" 那么我想添加 class="small"

```
TYPE: Small, ID: 0001, RESPONSE DATE AND TIME: 2012-12-12 12:00, UNITNAME: Name, MEMO: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.|
TYPE: Medium, ID: 0002, RESPONSE DATE AND TIME: 2012-12-12 01:00, UNITNAME: Name, MEMO: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.|
TYPE: Large, ID: 0003, RESPONSE DATE AND TIME: 2012-12-12 02:00, UNITNAME: Name, MEMO : Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:47:39.673

```
$.get('feed.txt', function(data) {
    var arr = data.split('|');
    var values = '';
    var type, className;
    for(var i=0; i<arr.length; i++){
        type = arr[i].split(',')[0];
        switch(type){
            case "TYPE: Small":
                className = 'small';
            break;
            case "TYPE: Medium":
                className = 'medium';
            break;
            case "TYPE: Large":
                className = 'large';
            break;
        }
        values += '<div class="'+className+'">'+arr[i]+'</div>';
    }
    $('div').html(values);
}); 
```

# android - 如何刷新Android手机GPS状态

> ID：13813259
> 
> 赞同：1
> 
> 时间：2012-12-11T03:40:11.293
> 
> 标签：android, gps

我用安卓手机在室外定位，回到室内，没有GPS信号。这里调用`getLastKnownLocation()`返回位置结果是最后一次的。事实是（室内）没有 GPS 信号。如何刷新 GPS 状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:52:37.510

如果您在室内进行测试，请尝试同时使用网络和 gps 卫星（注意：来自网络的位置信息有时不是 100% 准确）

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
  locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```

并等待一段时间从 gps-reciver 获取 gps 修复。如果信号强度较低，通常需要 2 到 3 分钟，可能需要很长时间。

如果您遇到任何问题，请输入您的代码，我们将检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:05:32.557

正如 Abhijit 所说，当您在窗外或附近时，您可以使用这些代码行来获取 GPS 坐标。

但是，当您在房间或地下室中并且仍想查找 GPS 坐标时，您可以尝试这种替代方式，

当您在地下室或房间时，您仍然可以获得网络覆盖（网络信号）。所以在这里你可以使用 TelePhony API 来获取 GPS Co-Ordinates。

```
String mcc;  //Mobile Country Code
String mnc;  //mobile network code
String cellid; //Cell ID
String lac;  //Location Area Code

//retrieve a reference to an instance of TelephonyManager
TelephonyManager telephonyManager = (TelephonyManager) myContext.getSystemService(Context.TELEPHONY_SERVICE);
GsmCellLocation cellLocation = (GsmCellLocation)telephonyManager.getCellLocation();
String networkOperator = telephonyManager.getNetworkOperator();

cellid = String.valueOf( cellLocation.getCid() );
lac = String.valueOf( cellLocation.getLac() );
mcc = networkOperator.substring( 0, 3 );
mnc = networkOperator.substring( 3 ); 
```

现在将这个 cellid、lac、mcc 和 mnc 值传递给[opencellid.org](http://www.opencellid.org/)，您将获得纬度和经度值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T04:48:58.347

您可以根据需要每 5 分钟启动一次服务您可以使用`pending Intent`

```
long UPDATE_INTERVAL=300000;
        Intent myIntent=new Intent(Main.this,YourGPSLOcationClass.class);
        PendingIntent pendingIntent=PendingIntent.getService(Main.this,0,myIntent,0);
        AlarmManager alarmManager=(AlarmManager)getSystemService(ALARM_SERVICE);

        Calendar cal=Calendar.getInstance();
        cal.add(Calendar.MINUTE,0);
        alarmManager.setInexactRepeating(AlarmManager.RTC_WAKEUP,cal.getTimeInMillis(),UPDATE_INTERVAL,pendingIntent); 
```

# javascript - 父窗口在刷新时关闭

> ID：13813265
> 
> 赞同：0
> 
> 时间：2012-12-11T03:40:48.427
> 
> 标签：javascript

我的要求是关闭父窗口时，子窗口也应该关闭。但现在的问题是，即使我刷新父窗口，窗口也会关闭。我不希望刷新关闭窗口。我的代码是

```
 function closeEditorWarning(){

     for (var i=0;i<childWindow.length;i++) {
           if (childWindow[i] && !childWindow[i].closed)    childWindow[i].close();
     }
    self.close();
     }

          window.onbeforeunload = closeEditorWarning; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:09:50.790

On browser refresh page gets unloaded and then it loads again. As you are using "onbeforeunload" it gets called before unload, hence "closeEditorWarning" method is getting called. To resolve this issue you can disable browser refresh.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:59:54.397

我删除`self.close();`了，现在可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T04:16:52.430

如果子窗口是您自己的网页，您可以尝试将代码放入子网页中，通过cookie定期检查父窗口是否仍然存在，看看它是否保持“活动”

# ruby-on-rails - 通知视图工作已在 Rails 中完成的最佳方式

> ID：13813273
> 
> 赞同：0
> 
> 时间：2012-12-11T03:41:37.550
> 
> 标签：ruby-on-rails

Rails 问题：用户将图像上传到 Rails 服务器。我在 Rails 的背景中做一些缩略图处理（异步，使用 DelayedJob gem）。完成后，我想通知视图它已完成，以便可以显示缩略图。

做这个的最好方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:08:35.353

您可以使用某种发布/订阅服务来执行此操作。两个示例服务

*   [http://faye.jcoglan.com/](http://faye.jcoglan.com/) *（开源）*
*   [http://pubnub.com](http://pubnub.com) *（免费计划的付费服务）*

您的视图将包括发布/订阅模型（Javascript API）的“订阅”部分。您的工作会将通知“发布”到频道，说明它已经完成了它的工作。您视图中的 Javascript 订阅者将触发您定义的回调以执行您想要的任何操作（即显示缩略图）。

# ios - 相同的 CCMenu 添加到多个场景

> ID：13813276
> 
> 赞同：0
> 
> 时间：2012-12-11T03:42:00.103
> 
> 标签：ios, cocos2d-iphone, ccmenuitem, ccmenu

iOS 和 Cocos2d ( 2.x ) 的新手

好的，我想创建一个菜单对象并从每个新场景中调用它。

例子：

*   场景1，添加菜单
*   场景 2，添加与场景 1 相同的菜单

我只看到了在初始化图层本身时如何初始化 CCMenu。您构建项目，然后将它们添加到 CCMenu 等等。

*   [http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:lesson_3._menus_and_scenes](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:lesson_3._menus_and_scenes)

如何初始化 CCMenu 一次，然后将其添加到我碰巧正在查看的场景中？因此，如果我正在查看 Scene1 或 Scene2，它仍然是相同的菜单。

这有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:46:37.793

您需要为每个场景使用不同的菜单实例，因此从技术上讲，您需要在每个场景中初始化一次。

但我认为您是在问“我怎样才能编写一次代码，然后在每个场景中重用该代码”。您需要创建某种可以重复使用的 CC 对象。这可以是 CCMenu、CCLayer 或任何最适合目的的子类。因此，您可以尝试以下方法：

```
@interface MyMenuLayer : CCLayer {
  CCMenu *myMenu;
}
@end 
```

然后在 .m 文件中，随意设置菜单。当您想将其包含在 Scene1 中时：

```
MyMenuLayer *menu = [MyMenuLayer node];
[self addChild:menu]; 
```

您可以在 Scene2 中使用完全相同的代码。

（您可以只扩展 CCMenu 而不是 CCLayer，但我个人更喜欢使用图层而不是菜单。这是个人选择的问题。）

很难用你问题中的信息给出一个非常明确的答案，但我希望这能让你走上正确的道路。

# jquery-datatables - 如何调整 jquery 数据表的列过滤器插件控件的大小

> ID：13813277
> 
> 赞同：1
> 
> 时间：2012-12-11T03:42:04.597
> 
> 标签：jquery-datatables

如何调整 jquery 数据表的列过滤器插件控件的大小。

我将下面的代码用于列过滤器插件，但它没有改变......

```
 $("table#tblOscarNominees").dataTable().columnFilter(
            {
                //sPlaceHolder: "foot:before",
                "aoColumns": [
                                null, //{ "type": "number-range" },
                                {"type": "text", width: "50px" },
                                { "type": "select" },
                                { "type": "text", width: "50px" },
                                {"type": "number-range", width: "50px" },
                                { "type": "select" },
                                { "type": "select" },
                                { "type": "date-range", width: "50px" },
                                ]
            }); 
```

![在此处输入图像描述](../Images/f991685e909c7a55d64f36c186d7aa08.png)

有关更多详细信息，请参阅此链接

[http://www.reddyinfosoft.blogspot.in/2012/12/jquery-datatable-plugin-in-aspnet-using.html](http://www.reddyinfosoft.blogspot.in/2012/12/jquery-datatable-plugin-in-aspnet-using.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T14:56:06.633

这对我有用：

```
$('#my-table th').bind('mouseup', function(event){
  var index = $(this).parent().children().index($(this));
  var colWidth = $(this).css('width');
  var input = $('#my-table tfoot tr input:eq(' + index +')');
  input.css("width", colWidth);
}); 
```

您仍然需要在表格构建后立即设置输入宽度：

```
$('#change-table tfoot tr').find(':input').each(function(index){
  var colWidth = $('#my-table thead tr th:eq(' + index + ')').css('width');
  $(this).css("width", colWidth );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T18:56:19.683

您还可以做两件事：将其包含在 css 或样式部分中：

`.date_range_filter { width:3em; }`

此外，您可以在 columnFilter 中设置 sRangeFormat

`.columnFilter({ sRangeFormat: "From {from}<br> to {to}" })`

（或您想要的任何代码。and 被输入字段替换。`{from}`另`{to}`请注意，尝试在 sRangeFormat 中使用表格代码对我不起作用 - 这似乎是 columnFilter 中的代码错误。）

祝你好运！

# android - Android - 同时显示按钮和文本

> ID：13813278
> 
> 赞同：1
> 
> 时间：2012-12-11T03:42:06.240
> 
> 标签：android, eclipse, button, text

我在这方面花了几个小时，但我几乎没有取得任何进展。我问了一个类似的问题，但超过2小时，仍然没有成功。所以我会问这个并尽可能具体。我已经花了大约三个小时，所以请不要把我写下来。

我想同时显示文本和一个 ToggleButton。我可以显示一个或另一个，但不能同时显示。请帮忙！这是我的代码：

```
public class Counter extends Activity {

    private int count = 5000;
    private int hiCount = 0;
    private boolean capCount = false;

    @Override
    protected void onCreate(Bundle instCounter) {

        super.onCreate(instCounter);

        setContentView(R.layout.activity_counter);

        TextView tv = new TextView(this);

        tv.setTextSize(250);
        if (count < 10000 && capCount == false) {

            tv.setText(Integer.toString(count));
        } else {
            capCount = true;
            if (count >= 10000) {
                hiCount += 10;
                count -= 10000;
            }
            if (hiCount < 100) {

                tv.setText(hiCount + "k+" + count);
            } else {
                tv.setText("Over\n100k");
            }
        }
        tv.setGravity(Gravity.CENTER);

        setContentView(tv);

//      ToggleButton btnPause = new ToggleButton(this);

//       if (btnPause == buttonOn) {
//       Intent pause = new Intent(this, Pause.class);
//       startActivity(pause);
//       }

    }

    public void pauseCounter(View view) {
        Intent pause = new Intent(this, Pause.class);
        startActivity(pause);
    }

    // // Show the Up button in the action bar.
    // getActionBar().setDisplayHomeAsUpEnabled(true);
} 
```

* * *

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Counter" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

    <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="ToggleButton" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:45:53.583

您将 Activity 设置为使用 TextView 作为**整个**视图。您的按钮永远不会像这样显示（实际上也不会，您的布局中还有其他任何东西）！在你`R.layout.activity_counter`制作一个 TextView 和 Button，并使用

```
TextView tv = (TextView) findViewById (R.id.textView1); 
```

这将允许您在从布局中找到 TextView 时同时拥有**两个**UI 元素，然后使用它，同时不理会其他所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:47:10.807

只是`onCreate`改变

```
@Override
protected void onCreate(Bundle instCounter) {

    super.onCreate(instCounter);

    setContentView(R.layout.activity_counter);

    TextView tv = (TextView)(findViewById(R.id.textView1));

    tv.setTextSize(250);
    if (count < 10000 && capCount == false) {

        tv.setText(Integer.toString(count));
    } else {
        capCount = true;
        if (count >= 10000) {
            hiCount += 10;
            count -= 10000;
        }
        if (hiCount < 100) {

            tv.setText(hiCount + "k+" + count);
        } else {
            tv.setText("Over\n100k");
        }
    }
    //tv.setGravity(Gravity.CENTER);

    //setContentView(tv);

     ToggleButton btnPause = (ToggleButton)(findViewById(R.id.toggleButton1));

     if (btnPause == buttonOn) { //Do not know what you want here
     Intent pause = new Intent(this, Pause.class);
     startActivity(pause);
     }

} 
```

# asp.net-mvc - .net mvc 3/4 应用程序池线程使用异步操作

> ID：13813280
> 
> 赞同：2
> 
> 时间：2012-12-11T03:42:23.903
> 
> 标签：asp.net-mvc, multithreading, asynchronous, application-pool

假设您的应用程序池中有一定数量的最大线程来处理您的 mvc 应用程序的 Web 请求。当从您的 SYNCRONIOUS 控制器操作中调用异步方法时，它是使用设置的应用程序池线程中的线程还是产生一个新线程（不是来自您的应用程序池）来处理该异步操作？

我知道应用程序只允许使用应用程序池中允许的线程数量运行，但我不确定是否会从同步控制器操作中为异步方法生成线程。

# html - CSS 按钮不会在电子邮件模板中呈现

> ID：13813282
> 
> 赞同：1
> 
> 时间：2012-12-11T03:42:39.483
> 
> 标签：html, css, email, email-templates

我在[这里](http://rainleader.com/basic.html)有一个使用 CSS 作为按钮的电子邮件模板。在大多数邮件客户端中，该按钮显示得很好（绿色渐变）。但是，在 Gmail 中，该按钮不会出现。

查看屏幕截图（在 Gmail 中呈现）：

![在此处输入图像描述](../Images/864737efb27b154a388383be246a24fb.png)

这是按钮代码：

```
.button {
       background-image: -webkit-linear-gradient(top, rgba(168,224,0,1) 0%,rgba(126,163,3,1) 50%);
       background-image:    -moz-linear-gradient(top, rgba(168,224,0,1) 0%,rgba(126,163,3,1) 50%);
       background-image:     -ms-linear-gradient(top, rgba(168,224,0,1) 0%,rgba(126,163,3,1) 50%);
       background-image:      -o-linear-gradient(top, rgba(168,224,0,1) 0%,rgba(126,163,3,1) 50%);
       background-image:         linear-gradient(top, rgba(168,224,0,1) 0%,rgba(126,163,3,1) 50%);
       -webkit-box-shadow: 0px 0px 0px 1px rgba(250,250,250,1)inset;
          -moz-box-shadow: 0px 0px 0px 1px rgba(250,250,250,1)inset;
               box-shadow: 0px 0px 0px 1px rgba(250,250,250,1)inset;
       border: solid 1px rgba(112,112,112,1);
       -webkit-border-radius: 3px;
          -moz-border-radius: 3px;
               border-radius: 3px;
       width: 180px;
       height: 44px;
       padding: 0px 24px 0px 24px;
       display: block;
       font-size: 18px;
       font-family: Arial, Sans-serif;
       line-height: 40px;
       text-align: center;
       color: rgba(247,247,247,1) !important;
       font-weight: bold;
       margin: 0 auto;
    }

    a.button {
        text-decoration: none !important;
    }

    .button:hover {
       background-image: -webkit-linear-gradient(top, rgba(168,224,0,1) 0%,rgba(137,179,0,1) 50%);
       background-image:    -moz-linear-gradient(top, rgba(168,224,0,1) 0%,rgba(137,179,0,1) 50%);
       background-image:     -ms-linear-gradient(top, rgba(168,224,0,1) 0%,rgba(137,179,0,1) 50%);
       background-image:      -o-linear-gradient(top, rgba(168,224,0,1) 0%,rgba(137,179,0,1) 50%);
       background-image:         linear-gradient(top, rgba(168,224,0,1) 0%,rgba(137,179,0,1) 50%);
       -webkit-box-shadow: 0px 0px 0px 1px rgba(239,249,254,1)inset;
          -moz-box-shadow: 0px 0px 0px 1px rgba(239,249,254,1)inset;
               box-shadow: 0px 0px 0px 1px rgba(239,249,254,1)inset;
       border: solid 1px rgba(179,179,179,1);
    }
    .button:active {
       -webkit-box-shadow: 0px 0px 0px 1px rgba(154,186,203,1)inset;
          -moz-box-shadow: 0px 0px 0px 1px rgba(154,186,203,1)inset;
               box-shadow: 0px 0px 0px 1px rgba(154,186,203,1)inset; 
```

知道出了什么问题或如何解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T05:24:14.640

大多数电子邮件客户端呈现 HTML 就好像它是 2001 标准一样。

*   您不能使用 :hover 或任何其他交互式伪选择器
*   您应该使按钮成为图像，以便它在所有电子邮件客户端中呈现相同。

您需要记住，人们可能会在桌面和网络客户端中收到您的电子邮件。Outlook 可能在呈现 html/css 方面存在最大的问题。

如果您使用的是 Mailchimp，我相信他们有一个测试工具，您可以使用它来复制您的代码在不同客户端中的呈现方式。

祝你好运。

# php - 我试图根据搜索用我的数据库中的数据填充我的表单

> ID：13813285
> 
> 赞同：0
> 
> 时间：2012-12-11T03:43:05.880
> 
> 标签：php, forms

我想通过搜索用我的数据库中的数据填充我的表单。

基本上是这样的，

******搜索页面* *******

 **- 这将是一个搜索表单，我将在其中输入主键。假设我使用姓氏-

******结束搜索页面* *******

 ********表格编辑页面* *******

 **在这里，我希望使用与我的主键位于同一行的数据填充表单。

******结束表单编辑页面********

 **我可以处理 HTML，但对于逻辑和 PHP 部分，我很迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:28:26.247

对于表单编辑页面：在html开始之前使用php和my sql进行查询，并将查询结果存储到php变量中。然后使用`value=<?php echo $queryresult?>`您可以显示值。

PS 将用户 ID 发布到此页面。根据 post 变量进行查询。********

# c++ - g++ 自定义异常处理程序

> ID：13813286
> 
> 赞同：0
> 
> 时间：2012-12-11T03:43:29.110
> 
> 标签：c++, exception, exception-handling, g++, custom-exceptions

是否可以为 GCC 安装自定义处理程序？

我试图将一个包装类抛出一个指针（如 shared_ptr），然后协变地捕获它。这实际上是针对我的托管 C++ for GCC 项目（在 sourceforge 上），但为了以更传统的 C++ 友好的方式说明问题，我将在这个特定实例中使用 boost::shared_ptr。这就是我想要达到的目标。

```
void raise()
{
    throw shared_ptr<DerivedException>(new DerivedException);
}

int main()
{
    try
    { 
        raise();
    }
    catch (shared_ptr<Exception> ex)
    {
        // Needs to catch DerivedException too!
    }
} 
```

关于这是否可以实现的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:15:43.590

如果我理解正确，您可以在没有自定义异常处理程序的情况下在 C++ 中执行您想要的操作，但不能使用您使用的语法。我可以看到的一种解决方案是将虚函数与异常机制结合起来。首先，您创建一个基类以使捕获变得容易，并为其提供一个接口以允许轻松地重新抛出对象本身及其引用的对象。

```
struct shared_exception_base_t {
    virtual void raise_ref() = 0;
    virtual void raise_self() = 0;
};

template <class value_t>
class shared_ptr_t : public shared_exception_base_t {
    value_t* ptr_;
public:
    shared_ptr_t(value_t* const p) : ptr_ (p) { }

    void raise_ref()
    {
        throw *ptr_;
    }

    void raise_self()
    {
        throw *this;
    }
};

template <class value_t>
shared_ptr_t<value_t> mk_with_new()
{
    return shared_ptr_t<value_t>(new value_t());
} 
```

然后就可以使用异常机制来做判别了。请注意，try/catch 块必须嵌套。

```
#include <iostream>

struct file_exception_t { };
struct network_exception_t { };
struct nfs_exception_t : file_exception_t, network_exception_t { };
struct runtime_exception_t { };

void f()
{
    throw mk_with_new<runtime_exception_t>();
}

int
main()
{
    try {
        try {
            f();
        } catch (shared_exception_base_t& x) {
            try {
                x.raise_ref();
            } catch (network_exception_t& fx) {
                std::cerr << "handling network exception\n"; 
            } catch (file_exception_t& fx) {
                std::cerr << "handling file exception\n"; 
            } catch (...) {
                x.raise_self();
            }
        }
    } catch (...) { 
        std::cerr << "no idea\n";
    }

    return 0;
} 
```

# wpf - RadWindow 的错误？

> ID：13813287
> 
> 赞同：0
> 
> 时间：2012-12-11T03:43:49.320
> 
> 标签：wpf, windows-7, rad-controls, radwindow

我在我的应用程序中将 RadWindow 用于 WPF。

我调用了 RadWindow.ShowDialog() 来显示 RadWindow。

但是当我最小化这个 RadWindow 时，它会消失，然后我无法恢复它，因为它不包含在 Windows 7 的任务栏中。

我通过隐藏 RadWindow 上的最小化按钮解决了这个问题，但后来我遇到了这个错误的其他情况。当我按“Window + D”键最小化所有 Windows 时，这个 Radwindow 也会消失。

请帮我修复它，

非常感谢，

大通集团

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:44:13.557

如果我理解正确，您需要将对话窗口的 Owner 属性设置为应用程序的主窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T13:30:20.397

RadWindow 不像 Window 那样包含属性“ShowOnTaskBar”。您可以执行以下代码来解决此问题：

```
 Window _window;

        public MainView()
        {
            InitializeComponent();

            Loaded += MainView_Loaded;

        }

        void MainView_Loaded(object sender, RoutedEventArgs e)
        {
            _window = this.ParentOfType<Window>();

            if (_window != null)
            {
                _window.ShowInTaskbar = true;
                _window.Title = this.Header.ToString();
            }
        } 
```

# jquery - Firefox中的jQuery iframe父级不起作用

> ID：13813288
> 
> 赞同：0
> 
> 时间：2012-12-11T03:44:04.297
> 
> 标签：jquery, iframe, jquery-selectors

看来，在 Firefox 中，这行代码不起作用：

```
iframeWin.refreshImgList(); 
```

但是，上面的相同代码适用于所有其他浏览器（甚至 IE ... GASP！）。

iframeWin 是 iframe 的 ID。我在 iframe 之外，试图调用 iframe 内的函数**refreshImgList**。

我需要在上面的代码中添加/编辑什么才能使其在 FF 中的工作方式与在所有其他浏览器中的工作方式相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:17:24.060

啊! 找到了解决方案：

```
$("#iframeWin")[0].contentWindow.refreshImgList(); 
```

# ios - 如何通过 AsyncSocket（在 IOS 中）在后台发送消息（按“Home”键）

> ID：13813291
> 
> 赞同：0
> 
> 时间：2012-12-11T03:44:16.423
> 
> 标签：ios, background, asyncsocket

我想在 iPad 后台运行程序时发送 GPS 信息。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:01:06.020

通过“背景”，我假设您的意思是在**后台线程**上？如果是这样，请继续阅读...否则，请告诉我，我会尝试更好地解决...

这是我解决这个问题的方法：

1）创建一个实现`CLLocationManagerDelegate`并具有`CLLocationManager`属性的单例“CoreLocationManager”类。告诉你的**locationManager**通过调用类似的东西开始更新

```
[self.locationManager startUpdatingLocation]; 
```

注意：您可能不希望这个 locationManager 不断更新其 GPS 位置（因为这会很快耗尽电池电量）。在我找到一个好的位置后我关闭了它，只在需要时更新。

2）创建一个 NSTimer 设置为在您想要更新 GPS 位置时触发。这也是向服务器发送所需信息的好地方。

3）使用诸如**AFNetworking之**类的库（参见[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)）在后台创建异步HTTP请求（在我看来更容易），或者在后台推出自己的异步调度队列（更难，但可能更健壮，视情况而定）

如果您不确定`singleton`, `NSTimer`, 大中央调度 (GCD) 或者`CLLocationManager`是什么，那么您需要学习一些东西。这里有一些关于这些的资源：

**单身人士：**

[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

[http://www.galloway.me.uk/tutorials/singleton-classes/](http://www.galloway.me.uk/tutorials/singleton-classes/)

**NSTimer：http:** [//developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html](http://developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

**大中央调度：** [https ://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

[http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

**CLLocationManager：**

[https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)

[https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html)

祝你好运！

# java - Firefox 重写 GET 请求

> ID：13813296
> 
> 赞同：2
> 
> 时间：2012-12-11T03:44:44.700
> 
> 标签：java, html, google-chrome, firefox, nanohttpd

背景：我有一个 Java 网络服务器类 (NanoHTTPD)，我的应用程序通过添加会话、页面模板、身份验证和动态内容来扩展它。我想让应用程序自包含，而不依赖于 SQLite 之外的任何东西。它旨在仅在安装 Java 和 SQLite 的情况下运行。

现在解决我的问题。我正在测试一个只有注销链接的简单索引页面。如果用户在没有登录的情况下访问索引，他们会被 HTTP 重定向到登录页面。当他们发布凭据并经过验证时，它将它们返回到索引页面。如果您在 Firefox 中单击注销链接，我的应用程序只会收到指向索引（'/'）的 URI。按照 Chrome 中的相同过程，它会按预期将用户注销。我不会在任何时候修改 GET URL；我只运行 uri.equals("/logout/")。Firefox 有什么理由会以不同的方式解释这个链接？

登录 HTML：

```
 <!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">
    <html>
      <head>
        <title>Login</title>
      </head>
      <body>
        <h1>Login</h1>
        <div>
          <p></p>
          <form method="post" action="/login/">
            <table>
              <tr>
                <td>
                  <label for="username">Username</label>
                  <input type="text" name="username" id="username" maxlength="100" />
                </td>
                <td>
                  <label for="password">Password</label>
                  <input type="password" name="password" id="password" />
                </td>
                <td></td>
                <td>
                  <input type="submit" value="Sign In" />
                </td>
              </tr>
            </table>
          </form>
        </div>
      </body>
    </html> 
```

索引 HTML：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
      <head>
        <title>Index</title>
      </head>
      <body>
        <h1>Index</h1>
        <a href="/logout/">Logout</a>
      </body>
    </html> 
```

匹配 URL 的代码只是 .equals() 并且在此之前运行的唯一代码是 NanoHTTPD，它位于此处：[https ://github.com/elonen/nanohttpd/blob/master/NanoHTTPD.java](https://github.com/elonen/nanohttpd/blob/master/NanoHTTPD.java)

还有一件事，我制作了一个页面“test.html”，我从上面复制了源代码。Firefox 也不能正确处理它并停留在页面上而不给出 File Not Found 错误。此外，如果我将页面更改为使用“/logout1/”，一切正常。

# c# - linq查询具有不同属性的多个表

> ID：13813300
> 
> 赞同：1
> 
> 时间：2012-12-11T03:45:11.773
> 
> 标签：c#, asp.net, linq, entity-framework, code-first

我有一个寻找两件事的搜索。项目和联系人。他们每个人都有自己的桌子，拥有自己独特的属性。我能够成功地相互独立地搜索每个并将结果返回到两个列表视图。但它是否丑陋并且分页已成为一个问题，所以我必须将这两个表转换为可以显示为搜索结果的类似结果。这些结果彼此之间没有直接关系。

正在让`group t3 by new`我失望。我是否必须将它们分组才能使其成为类似的结果？例如，结果当前显示在 ListView 中`<%#Eval("ItemName") %>`

```
ItemContext db = new ItemContext(); //DB connection (Item,Contact)
            var q = (from t1 in db.Item
                     join t2 in db.Categories on t1.CategoryID equals t2.CategoryID
                     join t7 in db.Divisions on t1.DivisionID equals t7.DivisionID
                     from t3 in db.Contacts
                     join t4 in db.Categories on t3.CategoryID equals t4.CategoryID
                     join t5 in db.Divisions on t3.DivisionID equals t5.DivisionID
                     join t6 in db.ContactTitle on t3.ContactTitlesID equals t6.ContactTitlesID

                     where

                    (DDLInt == 1 || t3.DivisionID == DDLInt) &&

                         //Contains

                    (
                     t3.ContactName.Contains(keyword) ||
                     t3.ContactEmail.Contains(keyword) ||
                     t3.ContactOPhone.Contains(keyword) ||
                     t3.ContactID.Equals(searchID)

                     )
                     group t3 by new
                     {
                         t3.ContactID,
                         t3.ContactName,
                         t3.ContactOPhone,
                         t3.ContactCell,
                         t3.ContactEmail,
                         t3.DivisionID,
                         t3.CategoryID,
                         t4.CategoryName,
                         t5.DivisionName,
                         t6.ContactTitlesName

                     }

                        into i

                     select new
                     {
                         i.Key.ContactID,
                         i.Key.ContactName,
                         i.Key.ContactOPhone,
                         i.Key.ContactEmail,
                         i.Key.ContactCell,
                         i.Key.CategoryName,
                         i.Key.DivisionName,
                         i.Key.CategoryID,
                         i.Key.DivisionID,
                         i.Key.ContactTitlesName
                     });

            return q.ToList<dynamic>();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:40:42.987

使用`Union()`：

```
var contacts = from c in db.Contacts
              select new {
                           Id = c.ContactID,
                           Name = c.ContactName,
                           Phone = c.ContactOPhone,
                           ...
                           CategoryName = c.Category.CategoryName,
                           DivisionName = c.Division.DivisionName,
                           ContactTitlesName = c.ContactTitle.ContactTitlesName
                         }
var items = from t1 in db.Item
            select new {
                         Id = t1.ItemID,
                         Name = t1.ItemName,
                         Phone = t1.??, // string.Empty?
                         ... // more properties corresponding
                             // with the ones above
                         CategoryName = t1.Category.CategoryName,
                         DivisionName = t1.Division.DivisionName,
                         ContactTitlesName = string.Empty
                       }
var all = contacts.Union(items); 
```

# qt - Qt 应用程序未设置 Unity Launcher 图标

> ID：13813302
> 
> 赞同：5
> 
> 时间：2012-12-11T03:45:24.143
> 
> 标签：qt, icons, launcher, ubuntu-unity

我试图让我的 Qt 应用程序在 Unity Launcher 中显示一个图标，但它不工作。在代码中，我只是使用：

```
qApp->setWindowIcon(QIcon("path/to/icon.png")); 
```

但它什么也没做。我也尝试直接在主窗口上设置图标，但它也无济于事。

知道可能是什么问题吗？

PS：我检查了图标路径，它是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:47:24.970

为了在 Windows（不是 Ubuntu）中启用图片编码，我将 QT\4.8.3\plugins\imageformats 文件夹放在我的应用程序附近。我想你也应该试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:49:44.377

在不知道统一的细节的情况下，我很确定您必须创建并安装一个带有图标的 .desktop 文件。例如，请参见[此处](https://askubuntu.com/questions/127290/setting-program-logo-in-unity-launcher-missing-icons-folder)。*无论您在运行时设置什么，启动器在启动应用程序之前*都无法知道，因此它需要来自外部配置的信息。

# jquery - 我可以使用 jQuery 来排除字符串中的文本吗？

> ID：13813305
> 
> 赞同：0
> 
> 时间：2012-12-11T03:45:31.200
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:48:30.440

`html`需要一个参数`''`来删除文本。喜欢`a.html('');`
你也可以使用`empty`。`a.empty();`

`a`如果您只想删除之前`small`使用的内容，上面的代码将删除里面的所有内容`find`。
`a.find('small').empty();`

# php - php 响应显示在浏览器中，而不是触发 ajax 回调

> ID：13813311
> 
> 赞同：0
> 
> 时间：2012-12-11T03:45:59.530
> 
> 标签：php, jquery, ajax, callback

我花了一些时间寻找这个问题的答案并发现了一些相关的问题，但没有什么像我的......像往常一样......

我有一个相当简单的 php/jquery ajax 注册页面，该页面一直工作到 ajax 回调。我的意思是表单数据正在传递给 php 并插入到数据库中，但是当 php 响应应该返回时，所发生的只是响应显示在浏览器中。我跟踪了日志，检查了提琴手，使用/不使用 json 重新编写了代码，并且似乎没有任何变化。奇怪的是，我在不同的页面上有另一个表单，它的设置方式完全相同，并且一切正常。我可以在两个页面之间找到​​的唯一区别是 php 文件的请求标头。一个有效的接受 json 而另一个不接受，但我不知道这是否意味着什么。. . 在这一点上，我有点想抓住任何东西。

因此，事不宜迟，这是我的代码。非常感谢任何想法/意见。谢谢！

```
<!DOCTYPE html> 
```

```
<head>

    <link rel="stylesheet" type="text/css" href="mobile.css" media="screen and (max-device-width: 480px)" /> 
    <!--[if IE]>
        <link rel="stylesheet" type="text/css" media="screen and (min-width: 481px)" href="IEjoin.css" />
    <![endif]-->
    <script src="jquery-1.8.2.min.js" type="text/javascript"></script>
    <script src="register.js" type="text/javascript"></script>
    <script src="jquery.placeholder.js" type="text/javascript"></script>

</head>

<body>

    <div id="wrapper">
        <div id="logo">
        </div>
        <div id="headline">
            <h1>Create your account</h1>
        </div>
        <div id="container">
            <form id="register" action="form.php" method="post">
                <ul>
                    <li id="first_name">
                        <input name="fname" type="text" value="" id="fname" placeholder="First Name" maxlength="30">
                        <div class="error"></div>
                    </li>
                    <li id="last_name">
                        <input name="lname" type="text" value="" id="lname" placeholder="Last Name" maxlength="30">
                        <div class="error"></div>
                    </li>
                    <li id="email_address">
                        <input name="email" type="text" value="" id="email" placeholder="Email Address" maxlength="60">
                        <div class="error"></div>
                    </li>
                    <li id="uname">
                        <input name="username" type="text" value="" id="username" placeholder="Username" maxlength="15">
                        <div class="error"></div>   
                    </li>
                    <li id="pword">
                        <input name="password" type="password" value="" id="password" placeholder="Password">
                        <div class="error"></div>
                    </li>
                    <li id="gender_select">
                        <select id="gender" name="gender">
                            <option value="" selected="selected">Select your gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="unspecified">Unspecified</option>
                        </select>
                    </li>
                    <li id="submit_button">
                        <button id="register_button" class="register_button_disabled">Create Account</button>
                    </li>
                </ul>
            </form>
            <script> $('input[placeholder]').placeholder();</script>
        </div>
    </div>
</body> 
```

```
$(document).ready(function() {

function validateEmail(email) {
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    return emailReg.test(email);
}
function submitButton() {
    if (($("#first_name").hasClass("good")) && ($("#email_address").hasClass("good")) && ($("#uname").hasClass("good")) && ($("#pword").hasClass("good")) ){
        $("#register_button").removeAttr("disabled");
        $("#register_button").removeClass("register_button_disabled").addClass("register_button");
    } else {
        $("#register_button").attr("disabled", "disabled");
        $("#register_button").removeClass("register_button").addClass("register_button_disabled");
    }
}
$("body").mousedown(submitButton);
$("body").keyup(submitButton);
$("body").hover(submitButton);
$("body").mouseover(submitButton);
$("#fname").keydown(function(){
    $("#first_name").removeClass("required");
    $("#first_name div").html("");
});
$("#fname").bind ("keyup mousedown",function(){
    if(this.value===""){
        $("#first_name").removeClass("good").addClass("wait");
    } else {
        $("#first_name").removeClass("wait").addClass("good");
    }       
});
$("#fname").blur(function(){
    if(this.value===""){
        $("#first_name").removeClass("good").addClass("required");
        $("#first_name div").html("Please enter your first name");
    } else {
        $("#first_name").removeClass("wait").addClass("good");
    }       
});
$("#email").keydown(function(){
    $("#email_address").removeClass("required");
    $("#email_address div").html("");
});
$("#email").bind ("keyup mousedown",function(){
    var email = this.value;
    var emailLength = email.length;
    if (emailLength<=4){
        $("#email_address").removeClass("good").addClass("wait");
    } else {
        $("#email_address").removeClass("wait").addClass("good");
    }       
});
$("#email").blur(function(){
    var email = this.value;
    var emailLength = email.length;
    if ((emailLength<=4) || (!validateEmail(this.value))) {
            $("#email_address").removeClass("good").addClass("required");
        $("#email_address div").html("Please use a valid email address");
    } else if (emailLength>=3){
        $.ajax({
            type: "POST",
            cache: false,
            url: "Check.php",
            data: "email="+email,
            dataType: "json",
            success: function(data) { 

                if (data.status === "success") {
                    $("#email_address").removeClass("good").addClass("required");
                    $("#email_address div").html("Sorry, that email is already used");}
                else {
                    $("#email_address").removeClass("wait").addClass("good");  
                }
            }
        });
    } else {
         $("#email_address").removeClass("wait").addClass("good");
    }
});
$("#username").keydown(function(){
    var un = this.value;
    var unLength = un.length;
    if(unLength<3){
        $("#uname").removeClass("good").addClass("wait");
    } else {
        $("#uname").removeClass("wait").addClass("good");
    }       
});
$("#username").bind ("keyup mousedown",function(){
    $("#uname").removeClass("required");
    $("#uname div").html("");
});
$("#username").blur(function(){
    var un = this.value;
    var unLength = un.length;
    if(unLength<3){
        $("#uname").removeClass("good").addClass("required");
        $("#uname div").html("Please use at least 3 characters");
    } else if (unLength>=3){
        $.ajax({
            type: "POST",
            cache: false,
            url: "check.php",
            data: "username="+un,
            dataType: "json",
            success: function(data) { 

                if (data.status === "success") {
                    $("#uname").removeClass("good").addClass("required");
                    $("#uname div").html("Sorry, that username is taken");
                } else {
                    $("#uname").removeClass("wait").addClass("good");  
                }
            }
        });
    } else {
        $("#uname").removeClass("wait").addClass("good");
    }
});
$("#password").keydown(function(){
    var pw = this.value;
    var pwLength = pw.length;
    if(pwLength<=5){
        $("#pword").removeClass("good").addClass("wait");
    } else {
        $("#pword").removeClass("wait").addClass("good");
    }       
});
$("#password").bind ("keyup mousedown",function(){
    $("#pword").removeClass("required");
    $("#pword div").html("");
});
$("#password").blur(function(){
    var pw = this.value;
    var pwLength = pw.length;
    if(pw===""){
        $("#pword").removeClass("good").addClass("required");
        $("#pword div").html("Please enter a password");
    }
    if(pwLength<=5){
        $("#pword").removeClass("good").addClass("required");
        $("#pword div").html("Please use at least 6 characters");
    } else {
        $("#pword").removeClass("wait").addClass("good");
    }
});

$("#button").click(function(e) {

    e.preventDefault();     

    $.ajax({
        type: "POST",
        cache: false,
        url: "form.php",
        data: $('#register').serialize(),
        success: function(data) { 
            if (data === "fname") {
                $("#first_name").removeClass("good").addClass("required");
                $("#first_name div").html("Please enter your first name"); 

            } else if (data === "email") {
                $("#email_address").removeClass("good").addClass("required");
                $("#email_address div").html("Please use a valid email address");

            } else if (data === "email2") {
                $("#email_address").removeClass("good").addClass("required");
                $("#email_address div").html("Sorry, that email is already used");

            } else if (data === "username") {
                $("#uname").removeClass("good").addClass("required");
                $("#uname div").html("Please use at least 3 characters");

            } else if (data === "username2") {
                $("#uname").removeClass("good").addClass("required");
                $("#uname div").html("Sorry, that username is taken");

            } else {
                window.location.href = "http://site.com";

        },
        error: function(httpRequest, textStatus, errorThrown) { 
            alert("status=" + textStatus + ",error=" + errorThrown);
        } 
    });             
    return false;

}); 
```

});

```
<?php

$host=""; // Host name 
$username=""; // Mysql username 
$password=""; // Mysql password 
$db_name=""; // Database name 
$tbl_name=""; // Table name  

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// Get values from form 
$fname = mysql_real_escape_string($_POST['fname']);
$lname = mysql_real_escape_string($_POST['lname']);
$email = mysql_real_escape_string($_POST['email']);
$username = mysql_real_escape_string($_POST['username']);
$password = mysql_real_escape_string($_POST['password']);
$gender = mysql_real_escape_string($_POST['gender']);

//validate inputs
$emailpull = "SELECT email FROM $tbl_name WHERE email='$email'";
$emailresult=mysql_query($emailpull);
$emailnum=mysql_num_rows($emailresult);

$emailReg = "/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/";

$unpull = "SELECT username FROM $tbl_name WHERE username='$username'";
$unresult=mysql_query($unpull);
$unnum=mysql_num_rows($unresult);

if ($fname == "") {  
$response = "fname";

} elseif ($email == "") {
$response = 'email';

} elseif (!preg_match($emailReg, $email)) {
$response = 'email';

} elseif ($emailnum > 0) {
$response = 'email2';

} elseif (strlen($username)<3) {
$response = 'username'; 

} elseif ($unnum > 0) {
$response = 'username2';

} elseif (strlen($password)<6) {
$response = 'password';

} else {

// Insert data into mysql 
$sql="INSERT INTO $tbl_name(fname,lname,email,username,password,gender)VALUES ('$fname','$lname','$email','$username','$password','$gender')";
}

$result=mysql_query($sql);
if($result)
$response = "success";

// send message back 
echo $response;

?> 

<?php 
// close connection 
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:23:49.207

#button 的点击处理程序有这一行，这可能是罪魁祸首：

```
window.location.href = "http://crushonit.com"; 
```

当表单没有验证错误时，这将重定向到该页面。

# php - 使用 apache 和 htaccess 从查询字符串中删除问号

> ID：13813316
> 
> 赞同：2
> 
> 时间：2012-12-11T03:47:03.430
> 
> 标签：php, apache, .htaccess

我有一个带有查询字符串的 PHP 页面：

```
http://project.dev/?a=b&c=d 
```

如您所知，我可以使用`$_GET`超全局数组访问查询字符串：

```
print_r($_GET);
/*
Array
(
    [a] => b
    [c] => d
)
*/ 
```

我想用 Apache 和 删除查询字符串中的问号`htaccess`，所以当用户看到我的网站时：

```
http://project.dev/a=b&c=d 
```

它将与此地址相同：

```
http://project.dev/?a=b&c=d 
```

我可以像以前一样访问查询字符串：使用`$_GET`超全局数组。

**一些重要说明：**

1.  我不想将用户从不带问号的 URL 重定向到**带**问号的**URL**。

2.  我有这两个页面`GET`的`POST`请求。

3.  查询字符串本身可以**有**问号`?`，例如：
    `http://project.dev/?a=b&c=d?x=y`.

4.  我想要带有问号的地址，自动**重定向**到没有问号的地址。例如，当用户使用此地址访问我的站点时：
    `http://project.dev/?a=b&c=d`
    我想将用户重定向到此地址：
    `http://project.dev/a=b&c=d`。

5.  我的网站只有一页：`index.php`. 没有任何子文件夹。

我怎样才能做到这一点`htaccess`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:12:44.693

> 我对这个页面有 GET 和 POST 请求。

这可能是一个问题，因为请求正文在重定向后不会被包含在内。因此，如果您发布的请求在查询字符串中具有 GET 样式参数，则重定向将丢失 POST 参数。

您想要的规则可能如下所示：

```
# Redirects query string to non-query string

RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /\?([^\ ]+)
RewriteRule ^ /%2? [L,R,NE]

# And back

RewriteCond %{REQUEST_URI} .=.
RewriteRule ^/?(.*)$ /?$1 [L] 
```

如果您想要 301 重定向，请将`R`第一条规则中的标志替换为`R=301`. 需要该`NE`标志，以便`?`查询字符串中的任何编码都显示为`%3F`而不是`%`编码本身。您也可以尝试替换`RewriteCond %{REQUEST_URI} .=.`为`-f`并`-d`检查：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

# css - 多浏览器的 CSS3 渐变

> ID：13813317
> 
> 赞同：0
> 
> 时间：2012-12-11T03:47:04.353
> 
> 标签：css, linear-gradients

我有这个 CSS 线性渐变在 Firefox 中工作，似乎无法在 Safari 和其他浏览器中获得相同的结果。它是一个像纸一样的联系领域的背景。我已经尝试了整个身体和一个特定的元素，这种风格似乎只适用于 Firefox。尝试使用 -webkit- 和 -moz- 但没有运气。有任何想法吗？

```
textarea {
    background-color: #fff; 
    background-image: 
        linear-gradient(90deg, transparent 79px, #abced4 79px, #abced4 81px, transparent 81px),
        linear-gradient(#eee .1em, transparent .1em);
    background-size: 100% 1.2em;
    display: block;
    resize: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:51:32.047

给你，一个完整的跨浏览器 CSS 用于 CSS 渐变

```
background: #1e5799; /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzFlNTc5OSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM3ZGI5ZTgiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  #1e5799 0%, #7db9e8 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #1e5799 0%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #1e5799 0%,#7db9e8 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #1e5799 0%,#7db9e8 100%); /* IE10+ */
background: linear-gradient(to bottom,  #1e5799 0%,#7db9e8 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 ); /* IE6-8 */ 
```

[**资源**](http://www.colorzilla.com/gradient-editor/)

就您的回答而言，这是无效的语法

```
linear-gradient(90deg, transparent 79px, #abced4 79px, #abced4 81px, transparent 81px),
linear-gradient(#eee .1em, transparent .1em); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:54:47.450

微软提供了这个简单的工具来生成支持跨浏览器的渐变：http: [//ie.microsoft.com/testdrive/graphics/cssgradientbackgroundmaker/default.html](http://ie.microsoft.com/testdrive/graphics/cssgradientbackgroundmaker/default.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T04:51:35.597

**CSS**

```
textarea {
    background-color: #ffffff;
    background-image: 
        -moz-linear-gradient(left, rgba(0, 0, 0, 0) 79px, #abced4 79px, #abced4 81px, rgba(0, 0, 0, 0) 81px), 
        -moz-linear-gradient(top, #eeeeee .1em, rgba(0, 0, 0, 0) .1em);
    background-image: 
        -webkit-gradient(linear, left top, right top, color-stop(79px, rgba(0, 0, 0, 0)), color-stop(79px, #abced4), color-stop(81px, #abced4), color-stop(81px, rgba(0, 0, 0, 0))), 
        -webkit-gradient(linear, left top, left bottom, color-stop(.1em, #eeeeee), color-stop(.1em, rgba(0, 0, 0, 0)));
    background-image: 
        -webkit-linear-gradient(left, rgba(0, 0, 0, 0) 79px, #abced4 79px, #abced4 81px, rgba(0, 0, 0, 0) 81px), 
        -webkit-linear-gradient(top, #eeeeee .1em, rgba(0, 0, 0, 0) .1em);
    background-image: 
        -o-linear-gradient(left, rgba(0, 0, 0, 0) 79px, #abced4 79px, #abced4 81px, rgba(0, 0, 0, 0) 81px), 
        -o-linear-gradient(top, #eeeeee .1em, rgba(0, 0, 0, 0) .1em);
    background-image: 
        -ms-linear-gradient(left, rgba(0, 0, 0, 0) 79px, #abced4 79px, #abced4 81px, rgba(0, 0, 0, 0) 81px), 
        -ms-linear-gradient(top, #eeeeee .1em, rgba(0, 0, 0, 0) .1em);
    background-image: 
        linear-gradient(to right, rgba(0, 0, 0, 0) 79px, #abced4 79px, #abced4 81px, rgba(0, 0, 0, 0) 81px), 
        linear-gradient(to bottom, #eeeeee .1em, rgba(0, 0, 0, 0) .1em);
    background-size: 100% 1.2em;
} 
```

**[演示](http://jsfiddle.net/MfmDW/4/)**

**资源**

*   [http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)
*   [http://caniuse.com/css-gradients](http://caniuse.com/css-gradients)

# python - 如何让 Python 程序接受来自 UNIX 终端标准输入的参数作为输入？

> ID：13813319
> 
> 赞同：0
> 
> 时间：2012-12-11T03:47:22.970
> 
> 标签：python

例如 - 我想做类似...

```
python DoublePendulum.py INPUT1 INPUT2 
```

（其中`INPUT1`和`INPUT2`被视为 DoublePendulum 程序中的变量输入）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T03:51:56.600

```
$ python test.py arg1 arg2 arg3 
```

在 test.py 中

```
import sys

print 'Number of arguments:', len(sys.argv), 'arguments.'
print 'Argument List:', str(sys.argv) 
```

输出

```
Number of arguments: 4 arguments.
Argument List: ['test.py', 'arg1', 'arg2', 'arg3'] 
```

Python 还提供了帮助您解析命令行选项和参数的模块。标准库中有以下模块：

*   [getopt](http://docs.python.org/2/library/getopt.html)模块类似于 GNU getopt 。
*   [optparse](http://docs.python.org/2/library/optparse.html#module-optparse)模块提供面向对象的命令行选项解析，optparse 在 Python 2.7 版本中被弃用，argparse[是](http://docs.python.org/2/library/argparse.html#module-argparse)替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-23T19:53:40.733

`$ python test.py one two five something`

在 test.py 里面

```
import sys
print(sys.argv[0:1], sys.argv[1:2], sys.argv[2:3], sys.argv[3:4], sys.argv[4:5]) 
```

**将输出为列表：**

> ```
> ['test.py'] ['one'] ['two'] ['five'] ['something'] 
> ```

```
for my_var in sys.argv:
    print(my_var) 
```

**将输出：作为字符串**

> ```
> test.py  
> one  
> two  
> five  
> something 
> ```

**我做了这个函数来返回你想要的参数**

```
def give_me_arg(n):
    num = len(sys.argv)
    if n >= num:
        print("Only enter:>",num,'<-and are this from 0 to ',num-1,':', sys.argv)
        return ''
    else:
        for my_var in sys.argv[n:n+1]:
            return my_var

my_var=give_me_arg(3) 
```

# tortoisesvn - 如果 Tortoise SVN 统一差异查看器无法启动怎么办？

> ID：13813321
> 
> 赞同：1
> 
> 时间：2012-12-11T03:47:43.507
> 
> 标签：tortoisesvn

很多时候，当有许多其他应用程序正在运行时，Tortoise SVN 的统一差异查看器可能无法显示 -**快速启动然后立即消失**。但是在关闭其他一些应用程序后，这个差异查看器**可能**会再次正常运行。根据我的观察，我怀疑这与系统中剩余的可用 GDI 资源有关，尽管实际上任何其他应用程序（即使是像 MSWord/Excel 这样的大量资源消耗...）都可以毫无问题地启动。

有没有人知道解决这个问题？

操作系统：Windows XP SP3 TortoiseSVN 1.6.16

![在此处输入图像描述](../Images/914db5f0fd536a92ddab845e12f8b80f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:58:03.163

尝试使用 TortoiseSVN 1.7.10 中的 TortoiseUDiff.exe 并解决了问题。似乎应该是 1.6.16 中的错误。

# actionscript-3 - 将旋转闪光补间设置为最短距离as3？

> ID：13813322
> 
> 赞同：0
> 
> 时间：2012-12-11T03:47:47.117
> 
> 标签：actionscript-3, flash, air, tween

我正在开发一个 adobe air 交互式表格项目，我正在尝试对一些旋转进行补间。在大多数情况下，它工作正常，但偶尔它会在版本周围一直旋转，只是向另一个方向旋转一点。有没有人能在补间中防止这种情况的好方法？

我的代码片段：

```
var rotatePos:Number;
        if (event.rotation > 180) { rotatePos = event.rotation - 360; } else { rotatePos = event.rotation; }
        var rotateDifference:Number = Math.abs(Math.abs(rotatePos) - Math.abs(Number(rotationCurrent[tempCircleNumber])));
        if ( rotateDifference > 4 && rotateDifference < 60) {
            rotateTheFiducial();
        } else if ( rotateDifference > 100 ) {
            trace("too far, ignore : " + rotateDifference);
        }
        function rotateTheFiducial():void
        {
            try
            {
                var cardTweenRotation:Tween = new Tween(MovieClip(fiducialArray[tempCircleNumber]), "rotation", Regular.easeOut, Number(rotationCurrent[tempCircleNumber]), rotatePos, .2, true);

                rotationCurrent[tempCircleNumber] = rotatePos;

            }
            catch (e:Error)
            {
                trace(fiducialId + " : Rotate Error : " + e);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:57:01.117

[Regular.easeOut](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/easing/None.html#easeOut%28%29)应该执行上述行为。

有时，虽然有多个缓动补间，但 flash 甚至会错过最后一点。

因此，如果您必须使用easeout，请添加一个补间完成事件，您可以在其中手动设置最终点。

否则使用[None.easeNone](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/easing/None.html#easeNone%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:41:23.773

你真的应该避免使用 Flash 内置的 Tween 引擎。它**缓慢，臃肿，并且缺少很多真正有用的东西**。

尝试使用[TweenLite/TweenMax](http://www.greensock.com/tweenlite/)[或](http://code.google.com/p/eaze-tween/)更好的工具，这**两者都具有内置功能，可以**像您面对的那样进行短时间旋转。它们比使用默认的 Tween 引擎快得多！（你可以[在这里](http://www.greensock.com/tweening-speed-test/)看到）

您不仅可以对这种短轮换问题进行排序，而且您的应用程序将通过其中一个变得更快:-)

# java - 从文本框中获取用逗号分隔的值并存储为数组 JAVA

> ID：13813325
> 
> 赞同：1
> 
> 时间：2012-12-11T03:47:52.997
> 
> 标签：java, arrays, input

我不太确定如何表达，但基本上我想以 rgb 颜色`xxx, xxx, xxx`格式读取并将每个颜色存储`xxx`在一个数组中。我正在制作一个将 rgb 转换为十六进制的程序。直到我创建了我的 gui（这可能需要我一些时间），我才会在终端中执行和输入。

目前这就是我正在做的事情：

```
System.out.println("Enter the first set:");
rgb[0] = new Scanner(System.in).nextInt();`
System.out.println("Enter the second set:");
rgb[1] = new Scanner(System.in).nextInt();
System.out.println("Enter the third set:");
rgb[2] = new Scanner(System.in).nextInt(); 
```

*   我见过人们使用`.split(",")`，这是做我想做的最好的方法吗？
*   正则表达式会更好吗？
*   有人知道我可以使用的任何教程吗？我发现的大多数问题都让我比现在更加困惑。

只是为了让你知道我不是为一个项目做这个（在有人指责我之前）。我已经有了算法，除此之外其他一切都有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T03:52:14.483

以下是我的建议：

*   不要在`Scanner`每次要读取输入时创建新实例。只需在程序开始时创建一个并在整个过程中重复使用它。

*   该`split`方法将正则表达式作为其参数，并返回一个`String[]`（在其参数的每个匹配项上拆分字符串）。因此，如果您打算解析表单字符串，`"xxx, xxx, xxx"`那么`.split(",\\s*")`可能是您最好的选择。`\s`匹配任何空白字符并`\s*`匹配`\s`零次或多次。

*   我假设`rgb`是一个`int[]`，所以你可以遍历`String[]`从`split`（如上所述）获得的你，调用`Integer.parseInt`每个元素，并将解析的 int 添加到`rgb`.

* * *

**相关文件**

*   [`String#split`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29)
*   [`Integer#parseInt`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T03:52:45.330

我建议使用 split() 方法，它会返回一个数组。

您的代码也看起来多余。我建议使用某种循环

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T03:55:55.297

是的，拆分是一种选择...

```
String[] strArray = inputString.split(",");
int[] rgb = new int[strArray.length]
for (int i=0; i<strArray.length; ++i) {
    rgb[i] = Integer.parseInt(strArray[i].trim());
} 
```

扫描仪也可以...

```
Scanner sc = new Scanner(inputString);
String match;
while ((match = sc.findInLine("(\\d+)"))!=null) {
    // here i print it, but you need to put it into an array (like above),
    // i'll leave it to you as an exercise
    System.out.println(Integer.parseInt(match));
}    
sc.close(); 
```

# python - Django以不正确的格式将数据保存在mysql中

> ID：13813327
> 
> 赞同：1
> 
> 时间：2012-12-11T03:47:56.440
> 
> 标签：python, django

我正在抓取网站并将数据保存在 djnago 模型中。

我有这条线

`item.title = site.select('dl/dd/h2/a').select("string()").extract()`

但数据以这种格式保存

`[u'Master Developer']`

我该如何解决这个问题，以便只有主开发人员才能被保存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:01:40.247

你打算这样做吗...

```
In [35]: l = [u'Master Developer']

In [36]: str(l[0])
Out[36]: 'Master Developer' 
```

或者

```
In [37]: l[0].encode('utf-8')
Out[37]: 'Master Developer' 
```

# c# - 更新页面中的文本框（实时）

> ID：13813329
> 
> 赞同：0
> 
> 时间：2012-12-11T03:48:02.510
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我编辑了我的问题，我在 Default.aspx 页面中有一个提交按钮和文本框。我打开了两个窗口Default.aspx。我想在文本框中输入文本并在此窗口中按提交，其他窗口将实时更新文本框。

请帮我 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T03:51:32.627

您正在寻找的是类似于聊天应用程序。从一个客户端（浏览器窗口）接收值时，您希望将其发送给另一个客户端。

看看[SignalR](http://signalr.net/)是一个不错的选择，可以将数据推送到连接的客户端。

但是，如果您出于某种原因确实想自己做，在 asp.net 中构建它的最有效方法是使用[IHttpAsyncHandler](http://msdn.microsoft.com/en-us/library/system.web.ihttpasynchandler.aspx)和 ajax 请求。

这是一个[完整的工作项目，它](http://www.codeproject.com/Articles/42734/Using-IHttpAsyncHandler-and-XMLHttpRequest-to-push)与 ajax 一起实现了这个。

# box-api - 文件操作弹出 url 在弹出窗口中的 iframe 内导航

> ID：13813331
> 
> 赞同：1
> 
> 时间：2012-12-11T03:48:07.303
> 
> 标签：box-api

我们已经实现了一个类似于“使用 Gmail 发送”的文件操作应用程序，但在我们的案例中，其行为似乎与“使用 Gmail 发送”的工作方式不同。

在我们的例子中，客户端回调 URL 在弹出窗口中名为“service_iframe”的 iframe 中打开。结果，应用程序无法使用 window.close 关闭弹出窗口。

在“使用 Gmail 发送”的情况下，他们的 URL 会显示在弹出窗口的地址栏中，这意味着不涉及 iframe，因此 window.close 将为他们工作。

关于在工作流程结束时我们可以做些什么来从我们的应用程序中关闭此弹出窗口的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:25:47.133

`redirect_to_box`您可以从 Box 发送一个可选参数，使用该参数时，将在 iframe 上调用一些 JS 以关闭窗口：

[http://developers.box.net/w/page/12923961/BoxPlatformBoxParameters](http://developers.box.net/w/page/12923961/BoxPlatformBoxParameters)

# jquery - jquery .val() 的函数参数以字符串形式返回函数

> ID：13813335
> 
> 赞同：0
> 
> 时间：2012-12-11T03:48:43.733
> 
> 标签：jquery

作为 onClick 事件的一部分，被单击行的每个后续兄弟的隐藏“序列”输入的值减一。

```
$('#variants_' + product + ' .sequence')
    .filter(function(){
        return parseInt(this.value, 10) > sequence;
    })
    .val(function(index, value){
        return value - 1;
    }); 
```

我试图改变的输入最终看起来像这样：

```
<input type="hidden" name="v_sequence_6" id="v_sequence_6" value="function (index, value){
                    return value - 1;
                    }" class="sequence"> 
```

如何使用 .val() 的函数参数而不将其转换为字符串？

**编辑** 这里是相关功能的其余部分

```
function deleteVariant(row, product) {
var x = /x/
var sequence = $('#variantRow_' + row + ' .sequence').val();
if (! x.test(row) ){
    $('#variants_' + product).closest('#variants').append("<div class='grayover'><div class='ajaxLoaderContainer'><div class='ajaxLoader'><img src='images/ajax-loader.gif' /></div></div></div>");

    $.post('includes/_e-learning_ajax.php', { 'mode': 'deleteVar', 'variant': row }, function(data){
        if (data == 'success'){
            $('#variants_' + product + ' .sequence')
                .filter(function(){
                    return parseInt(this.value, 10) > sequence;
                    })
                .val(function(index, value){
                    return value - 1;
                    });
            $('#variantRow_' + row).remove();
            coursesReady();
        } else {
            alert(data);
        }
        $('.grayover').remove();
    });

} else {
    $('#variantRow_' + row).remove();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:27:18.460

问题似乎是您的jQuery版本小于1.4，这是在`val`引入该方法的函数传递版本时（我们从您评论中的对话中确定）。这确实有意义，因为该`val`方法将调用`toString`正在传递的函数并将其完全打印为输入值。

这可以在这里显示：http: [//jsfiddle.net/Hhk7T/](http://jsfiddle.net/Hhk7T/)

# ruby - 如何使用 ruby 和 mechanize 生成的文件名下载文件？

> ID：13813337
> 
> 赞同：2
> 
> 时间：2012-12-11T03:48:58.490
> 
> 标签：ruby, mechanize-ruby

我正在尝试从使用 CDN 进行分发的网站下载文件。下载页面上的 URL 都以 file.pdf 结尾，但在浏览器中单击链接会导致下载具有描述性文件名的文件（例如“invoice1234.pdf”）。显然，解析 URL 以获取文件名会导致每个文件都被命名为 file.pdf - 我想使用通过浏览器下载时使用的相同文件名。我的代码看起来像这样：

```
 filename = File.basename(download.href)
  agent.pluggable_parser.default = Mechanize::Download
  agent.get(mov_download_link.href).save("#{path}/#{filename}")
  agent.pluggable_parser.default = Mechanize::File 
```

任何想法，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:52:12.157

该文件名可能位于如下所示的标头中：

```
{'content-disposition' => 'filename="invoice1234.pdf"'} 
```

如果是这样：

```
f = agent.get(mov_download_link.href)
filename = f.header['content-disposition'][/"(.*)"/, 1]
f.save("#{path}/#{filename}") 
```

# java - 比较给定方法头的名称？v2

> ID：13813338
> 
> 赞同：-3
> 
> 时间：2012-12-11T03:49:02.373
> 
> 标签：java

好吧，另一个问题已经很老了，我认为不太可能会有更多的人偶然发现它并阅读/回答它，所以这里是：鉴于标题：

```
public boolean equals(Name otherName) 
```

我应该比较两个名称对象是否相等。我现在拥有的是：

```
public boolean equals(Name otherName){
        return (otherName.equalsIgnoreCase(this));
    } 
```

正如上一个帖子中有人建议的那样。

但是，我收到一个找不到符号错误。

这是我要挑剔的其余代码。请原谅我的草率之类的，今晚我的代码写得不好。

名称.java：

```
public class Name{
    private String firstName;
    private String middleName;
    private String lastName;

    public Name (String first, String middle, String last){
        firstName = first;
        middleName = middle;
        lastName = last;
    }

    public String getFirst(){
    return firstName;
    }

    public String getMiddle(){
        return middleName;
    }

    public String getLast(){
        return lastName;
    }

    public String firstMiddleLast(){
        return (firstName + middleName + lastName);
    }

    public String lastFirstMiddle(){
        return (lastName + ", " + middleName + firstName);      
    }

    public boolean equals(Name otherName){
        return (otherName.equalsIgnoreCase(this));
    }

    public String initials(){
        String initials = firstName.substring(0,1) + middleName.substring(0,1) + lastName.substring(0,1);
        initials.toUpperCase();
        return initials; 
    }

    public int length(){
        int sum = firstName.length() + middleName.length() + lastName.length();
        return sum;
    }
} 
```

测试名称.java：

```
import java.util.Scanner;

public class TestNames{
    public static void main(String[] args){
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter the first name, middle name, and last name in that order for the first name object.");
    Name name = new Name(scan.next(), scan.next(), scan.next());
    System.out.println("Enter the second name, middle name, and last name in that order for the first name object.");
    Name name2 = new Name(scan.next(), scan.next(), scan.next());   

    System.out.println("Printing name in the order first name, middle name, last name");
    System.out.println(name.firstMiddleLast());
    System.out.println(name2.firstMiddleLast());

    System.out.println("Printing name in the order last name, first name, middle name");
    System.out.println(name.lastFirstMiddle());
    System.out.println(name2.lastFirstMiddle());

    System.out.println("Printing initials");
    System.out.println(name.initials());
    System.out.println(name2.initials());

    System.out.println("Printing name length");
    System.out.println(name.length());
    System.out.println(name2.length());

    System.out.println("Are these names equal?");
    System.out.println(name.equals(name2));

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:56:15.717

您在使用时没有`equalsIgnoreCase`在类中实现方法`Name`：

```
public boolean equals(Name otherName){
    return (otherName.equalsIgnoreCase(this));
} 
```

所以必然会出现错误。你可以试试：

```
 public boolean equals(Name otherName){
    if(firstName.equalsIgnoreCase(otherName.firstName) && middleName.equalsIgnoreCase(otherName.middleName) && lastName.equalsIgnoreCase(otherName.lastName))
        return true;
    else 
        return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:47:00.550

```
public boolean equals(Name otherName){
            return (otherName.getFirst().equalsIgnoreCase(firstName));
        } 
```

> 您正在比较对象而不是字符串...

# c# - Rendertarget.SavetoXXX 杀死图形设备

> ID：13813340
> 
> 赞同：0
> 
> 时间：2012-12-11T03:49:10.003
> 
> 标签：c#, ios, image, xamarin.ios, monogame

因此，当我运行这些方法时，我试图保存到 png/或 jpeg 中，但没有任何东西可以绘制。它卡在调用之前绘制的任何帧上。

顺便说一句，这是在IOS上。

所以我将图形设备设置为 rendertarget draw 将其恢复为 null 然后执行 savetopng 方法

如果我注释掉 savetopng 它的工作原理

我正在使用最新的稳定单游戏版本（我认为是 2.5.1？）请帮助让用户保存图像对我的游戏至关重要！

```
renderTarget = new RenderTarget2D( graphics.GraphicsDevice, graphics.GraphicsDevice.PresentationParameters.BackBufferHeight, graphics.GraphicsDevice.PresentationParameters.BackBufferWidth);
graphics.GraphicsDevice.SetRenderTarget(renderTarget); 
Draw(new GameTime()); 
graphics.GraphicsDevice.SetRenderTarget(null);
renderTarget.SaveAsPng(File.Create(Environment.GetFolderPath (Environment.SpecialFolder.Personal) + "/test.png"),renderTarget.Width,renderTarget.Height); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:57:02.073

现在在 iOS 上没有很好的 RenderTarget 支持。有几张票可以修复它，但在 iOS 方面工作的人一直忙于其他事情。

我不确定设置不同的渲染目标，但我很确定 SaveToPng 尚未在 iOS 上完全实现。

# django - 将一个普通的 django 网站变成一个 RESTful api

> ID：13813342
> 
> 赞同：1
> 
> 时间：2012-12-11T03:49:18.647
> 
> 标签：django, backbone.js, tastypie

我一直在努力。一个几个月的网络项目。它是一个简单的网站，带有通常的 django 模型视图 url 和模板，使用 jquery 作为模板的简单 Ajax。

现在正在考虑是否有可能尽快提出申请。我正在考虑使用 Tastypie 为我的网站制作一个 RESTful api。所以这个想法是

1.  使用 Tastypie 制作一个 RESTful api。
2.  使用backbone.js 使我的网站成为一个单页应用程序
3.  在我的 android 和 ios 应用程序中使用 plist 和 json。

我的担忧从这里开始，随着这个新的行动方针，会。我必须再次充分利用我的网站吗？如果是这种情况，我是否应该停止处理我已经完成的工作，然后按照上述指南从头开始？再一次，在tastepie 和backbone.js 的上下文中，我已经编写好的视图和模板逻辑会发生什么？

我一直在研究这个话题，但找不到明确的答案。所以想问问你们所有已经经历过或经历过同样转变的人。

我几乎没有接触过 RESTful API。但我倾向于使用 RESTful 方法，因为它会使应用程序开发更容易。

PS。如果我没有得到反对票，我会非常感激，而是建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:03:34.260

**您可以在同一个站点/项目中**并排试用。保留现有的 django 视图。在不同的 URL 下添加新的美味派，例如“/api/”。

同样，单页应用程序？这只是*现有模板旁边的*一个新模板。暂时将其保留在“/single/”。并保留现有页面。

实际功能可能会保持不变。从您现有的视图中提取有用的代码作为单独的函数，并从美味派和您的原始视图中调用它们。这甚至可能使您现有的代码更清晰:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:20:19.993

我会说这是一个哲学问题。

如果该站点在截止日期或生产中，**我可能会将其放入 git 并为其提供两个分支**：

*   生产分公司
*   重构分支

这样做的好处是您可以保持旧站点正常运行并添加新功能并将其合并到您的重构分支中。

再说一次，这在很大程度上取决于复杂性以及该站点今天的行为方式。

执行两个分支系统将为您提供在不丢失旧版本的情况下停止重构的选项。

# iphone - 在核心数据中找到任何两个相同的日期？

> ID：13813343
> 
> 赞同：0
> 
> 时间：2012-12-11T03:49:22.840
> 
> 标签：iphone, objective-c, ios, core-data, filter

由于困难的情况，我的用户可能会得到重复的数据。每个特定类型的实体中都包含一个日期。我是否能够找出核心数据中是否有任何重复项，而无需遍历每条数据以查找其重复项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T03:56:54.080

好吧，我不确定是否有核心数据例程可以做到这一点。但是您可以获得按日期排序的所有记录，然后通过将数组中的第 n 项与数组中的 n+1 项进行比较，您可以在一次通过中找到重复项。如果它们的日期匹配，则它们是重复的。

作为一项额外的优化，请记录您检查数据的上一个日期。如果用户无法添加过去的记录，那么您只需检查此记录日期之后的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:03:03.987

不。如果不比较数据，就无法知道您是否有重复项。

# c# - 通过多播组客户端接收时获取 UDP 数据包的来源

> ID：13813344
> 
> 赞同：1
> 
> 时间：2012-12-11T03:49:33.620
> 
> 标签：c#, udp

> **可能重复：**
> [如何在 C# 中确定多播数据包的源 IP？](https://stackoverflow.com/questions/2292063/how-do-i-determine-the-source-ip-of-a-multicast-packet-in-c)

在 C# 客户端中，我正在接收发送到多播组的数据包，如何获取发送该数据包到多播组的源的 IP 地址？

字节数据很好，所以代码有效，但我需要找到源IP地址..

```
 Byte[] data = client.Receive(ref localEp); 
```

完整的代码片段如下所示

```
 UdpClient client = new UdpClient();
        client.ExclusiveAddressUse = false;
        IPEndPoint localEp = new IPEndPoint(IPAddress.Any, 4446);
        client.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);            
        client.ExclusiveAddressUse = false;
        client.Client.Bind(localEp);    
        IPAddress multicastaddress = IPAddress.Parse("230.0.0.1");            
        client.JoinMulticastGroup(multicastaddress);
        Console.WriteLine("Listening this will never quit so you will need to ctrl-c it");

        while (true)
        {
            Byte[] data = client.Receive(ref localEp);
            string strData = Encoding.ASCII.GetString(data);
            Console.WriteLine(strData);
        }
    } 
```

# c# - 我只能用“as”投射一个逆变委托

> ID：13813347
> 
> 赞同：28
> 
> 时间：2012-12-11T03:50:10.113
> 
> 标签：c#, generics, .net-4.0, casting, contravariance

我正在尝试转换一个逆变委托，但由于某种原因，我只能使用“as”运算符来实现。

```
interface MyInterface { }
delegate void MyFuncType<in InType>(InType input);

class MyClass<T> where T : MyInterface
{
    public void callDelegate(MyFuncType<MyInterface> func)
    {
        MyFuncType<T> castFunc1 = (MyFuncType <T>) func; //Error
        MyFuncType<T> castFunc2 = func as MyFuncType<T>; 
        MyFuncType<T> castFunc3 = func is MyFuncType<T> ? (MyFuncType<T>)func : (MyFuncType<T>)null; //Error
    }
} 
```

castFunc2 工作正常，但 castFunc1 和 castFunc3 导致错误：

```
Cannot convert type 'delegateCovariance.MyFuncType<myNamespace.MyInterface>' to myNamespace.MyFuncType<T>' 
```

关于 as 运算符的[MSDN 文章](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.71%29.aspx)指出 castFunc2 和 castFunc3 是“等效的”，所以我不明白它们中的一个如何会导致错误。另一个让我困惑的部分是，将 MyInterface 从接口更改为类可以消除错误。

谁能帮我理解这里发生了什么？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T05:54:05.273

**添加一个约束，使得 T 必须是一个类。**

```
class MyClass<T> where T: class, MyInterface 
```

这为编译器提供了足够的信息来知道 T 是可转换的。您也不需要显式转换。

**差异仅适用于引用类型。允许 T 是一个值类型，没有约束，这会破坏编译器证明 T 与逆变兼容的能力。**

第二条语句起作用的原因是因为`as`实际上可以执行空转换。例如：

```
class SomeClass { }
interface SomeInterface { }
static void Main(string[] args)
{
   SomeClass foo = null;
   SomeInterface bar = foo as SomeInterface;
} 
```

`Foo`显然不能直接转换为`SomeInterface`，但它仍然成功，因为仍然可以进行空转换。您的 MSDN 参考对于大多数情况可能是正确的，但是生成的 IL 代码非常不同，这意味着从技术角度来看它们是根本不同的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T06:54:21.417

Eric Lippert 在他最近的帖子中对这个问题给出了很好的解释：[“is”运算符之谜，第一部分](http://blogs.msdn.com/b/ericlippert/archive/2012/08/23/an-quot-is-quot-operator-puzzle-part-one.aspx)，[“is”运算符之谜，第二部分](http://blogs.msdn.com/b/ericlippert/archive/2012/08/27/an-quot-is-quot-operator-puzzle-part-two.aspx)。

这种行为背后的主要理由如下：“is”（或“as”）运算符与强制转换不同。如果相应的强制转换是非法的，“as”运算符可能会导致非空结果事件，当我们处理类型参数时尤其如此。

基本上，`cast`在您的情况下，运算符意味着（如 Eric 所说）**“我知道这个值是给定类型的**，即使编译器不知道，编译器应该允许它”或**“我知道这个值不是给定类型**；生成专用的、特定于类型的代码，以将一种类型的值转换为不同类型的值。”

后面的案例处理像双整数转换这样的值转换，我们可以在当前上下文中忽略这个含义。

泛型类型参数在第一个上下文中也不合逻辑。如果您正在处理泛型类型参数，那么为什么不使用泛型类型参数清楚地说明这个“合同”？

我不是 100% 确定你想要实现什么，但你可以从你的方法中省略特殊类型并自由使用泛型参数：

```
class MyClass<T> where T : MyInterface
{
    public void callDelegate(Action<T> func)
    {
    }
}

class MyClass2
{
    public void callDelegate<T>(Action<T> func)
        where T : MyInterface
    {
    }
} 
```

否则，您应该使用`as`检查 null 而不是类型检查的运算符。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T04:14:19.750

Your class says that `T` implements `MyInterface` because `MyInterface` is not a instance type. Therefore, `MyFuncType<T>` is not guaranteed to be `MyFuncType<MyInterface>`. It could be `MyFuncType<SomeType>` and `SomeType : MyInterface`, but that wouldn't be the same as `SomeOtherType : MyInterface`. Make sense?

# android - 可以 MediaStore.Images.Media.getBitmap(); 在普通的java类中使用吗？

> ID：13813350
> 
> 赞同：0
> 
> 时间：2012-12-11T03:51:21.300
> 
> 标签：android

我正在创建一个应用程序来获取图像的 Uri 并对 Java 类上的图像进行一些处理。一旦我得到了 URi，我会将它传递给一个 java 类以将图像转换为位图并进行处理。我的问题是，

可以 MediaStore.Images.Media.getBitmap(); 在普通的java类中使用吗？

如果不能，还有其他方法可以将我的 Uri 转换为位图吗？

因为我知道传递位图会导致内存不足错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:56:22.587

是的，您可以在处理 Android 应用程序时使用它。

# jquery - 从 js 文件访问 rails 控制器变量

> ID：13813356
> 
> 赞同：0
> 
> 时间：2012-12-11T03:52:13.823
> 
> 标签：jquery, ruby-on-rails-3, will-paginate

我有一个 index.htm.erb 文件，其中包含一个渲染模板文件。

```
<div id="product"> <%= render :template => "shop/products" %> </div> 
```

在它的控制器中我有

```
 def index
    @products = Product.paginate :page => params[:page], :per_page => 6 
  end 
```

我的 index.html 文件底部有一个 js 文件，其中有一个用于获取 will_paginate url 的脚本。

```
$(window).scroll(function(){
        if( $(this).scrollTop() > ( ( $(document).height() - $(this).height() ) - 50 ) ){
            var link = $('.pagination .next_page').attr('href');
            $.getScript( link );
        }

        }); 
```

此 getScript 调用与 index.html.erb 同名的 js 文件。所以它的 index.js.erb。在 js.erb 文件中，我有一个

```
console.log("products = ", @products); 
```

尝试检索实例变量时出现错误。500 内部服务器错误 我无权访问@products 变量。我需要做什么才能访问此变量。

更新：

我正在使用来自[http://railscasts.com/episodes/114-endless-page-revised?autoplay=true](http://railscasts.com/episodes/114-endless-page-revised?autoplay=true)
的相同教程， 唯一的区别是我在 index.html.erb 中使用模板所以我仍然不'不明白在教程中他们如何访问实例变量，但我不明白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:00:12.910

**忽略答案**

我不是一个大 RoR 人，所以我可能会误解这种情况，但我仍然想尝试帮助你。这是我的猜测：

这并不是真正的 RoR 相关，而是一般来说更多的是后端到前端的问题。JavaScript 完全在浏览器中运行，而 Rails 仅在服务器上运行。因此，JS 不知道您在 Ruby 环境中定义的所有变量。如果您希望在 JS 中可以访问变量，则必须以某种方式将其写入页面。

简单地举个例子，你需要做一些事情：

```
<script>
    var productName = "<%= @product.name %>";
</script> 
```

所以 Rails 将解析 html 并用`<%= @product.name %>`实际名称替换部分。所以浏览器检索到一个看起来像这样的 html

```
<script>
    var productName = "Ice Cream";
</script> 
```

这是一种非常简单的方式，您可以将变量从后端传递到前端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T14:06:49.163

尝试将`@products`变量显式传递给您的模板：

`<%= render :template => "shop/products", :locals => {:my_products => @products} %>`

`my_products`然后，您`shop/products`可以在当前使用的任何地方使用模板中的变量`@products`。

# .net - Does windows Azure ACS WIF .net 4.5 support a relying party with WIF 3.5?

> ID：13813366
> 
> 赞同：1
> 
> 时间：2012-12-11T03:53:17.730
> 
> 标签：.net, azure, single-sign-on, wif

I am thinking of implementing SSO using Azure access control. But some of the web applications are in .net 3.5\. Does Azure ACS based STS support WIF 3.5 Relying Party?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:26:13.633

是的。这不是 ACS 支持 .NET 3.5 的问题，而是 WIF 支持 .NET 3.5（确实如此）的问题，因为 WIF 是您的 Web 应用程序将用来与 ACS 通信的东西。您可以从下面的链接中找到 WIF 3.5 SDK，其中包括联合实用程序和代码示例。

[http://www.microsoft.com/en-us/download/details.aspx?id=4451](http://www.microsoft.com/en-us/download/details.aspx?id=4451)

# data-binding - 如何将查询到的数据绑定到视图中的 Django 表单并在模板中呈现？

> ID：13813368
> 
> 赞同：0
> 
> 时间：2012-12-11T03:53:46.280
> 
> 标签：data-binding, django-forms, django-views

这一直让我发疯，我无法让它工作。这是一个简单的场景：我想向用户展示我从数据库中提取的动态生成的用户列表，以便用户可以从 ChoiceField 中选择一个用户（呈现为 HTML 选择）并单击“获取数据”按钮。

我不想在表单中创建用户列表，因为新用户会一直出现。我想在我的视图中查询用户并将该用户列表绑定到表单，以便我始终可以呈现最新的用户列表。所以这是我的表格：

```
class ViewUsersForm(forms.Form):
  user_choice = forms.ChoiceField() 
```

这是我的观点：

```
from django.contrib.auth.models import User
from mystuff.forms import ViewUsersForm

def site_admin_view_user_groups_page(request):
  if request.method == 'POST':
    <...handling POST for this question is unimportant...>
  else:
    users = User.objects.all()
    data = {'user_choice': users}
    form = ViewUsersForm(data) # binding the list of users here

  variables = RequestContext(request, {'form': form,})
  return render_to_response('school/admin/view_user_groups_page.html', variables) 
```

最后，这是我要渲染的模板：

```
<form action="/site/viewusers/" method="post">{% csrf_token %}
  {{ form.user_choice }}
  <button type="submit" name="getDataButton">Get Data</button>
</form> 
```

因此，当模板呈现绑定表单 (form = ViewUsersForm(data)) 时，ChoiceField 出现空。如何获取 ChoiceField 中的数据以在我的 HTML 中呈现？？？我在这里错过了什么真正简单的事情？还是我以完全错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:17:24.940

ChoiceField 采用“2 元组的可迭代（例如，列表或元组）作为该字段的选择。” 所以你需要将你的选择设置为 ((value1, 'name1'),(value2, 'name2'),()) [https://docs.djangoproject.com/en/dev/ref/forms/fields/# django.forms.ChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ChoiceField)

您还可以使用 ModelChoiceField 按原样使用您的查询集 [https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ModelChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ModelChoiceField)

# ios - Unable to increase the scroll view width of horizontal UITableView

> ID：13813369
> 
> 赞同：0
> 
> 时间：2012-12-11T03:53:54.020
> 
> 标签：ios, uitableview, uiscrollview

In my application, I rotated the table view for 90 degrees i.e., the table view is now horizontal table view. After rotation I tried to increase its scroll size as I was unable to view the last row but I couldn't increase it. As table view is sub class of UIScroll view, I tried to change it in Interface Builder but nothing solved my problem. Please tell me how to increase this table view scroll view width to view all the contents.

```
rotateTable = CGAffineTransformMakeRotation(-M_PI_2);
tableView.transform = rotateTable;
[tableView setFrame:CGRectMake(40, 333, self.view.frame.size.width , 37)]; 
```

In IB,Size Inspector: Scroll View Size: Scroller Insets : Right : 500 (I changed the Right attribute to increase the width)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:11:38.043

You don't need to manage it. Tableview does it itself. Your problem is frame of tableview. Your tableview is crossing bounds of it's superview(view in which tableview is added). Check tableview's frame. Make sure it will not exceed bounds of superview.

# c++ - PDB 对应一个二进制文件

> ID：13813370
> 
> 赞同：2
> 
> 时间：2012-12-11T03:54:31.257
> 
> 标签：c++, .net

我们在 SVN 中保存了不同版本的二进制文件。我们还保留与二进制文件相对应的 pdb 文件。有时开发人员会签入错误的 pdb 文件。当客户稍后报告问题时，这会产生问题。

是否有任何工具可以检查 pdb 文件是否对应于二进制文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T03:59:00.740

使用这个工具 - [ChkMatch](http://www.debuginfo.com/tools/chkmatch.html)。这既检查匹配，也允许您强制匹配（即允许您使用错误的 pdb，只要它们与实际的 pdb 差别不大）。通读此[页](http://www.debuginfo.com/articles/debuginfomatch.html)。

# eclipse - Eclipse plugin to create debug configurations

> ID：13813372
> 
> 赞同：0
> 
> 时间：2012-12-11T03:54:46.873
> 
> 标签：eclipse, debugging, plugins

> **Possible Duplicate:**
> [Eclipse: How can I execute a launch configuration programmatically?](https://stackoverflow.com/questions/10104238/eclipse-how-can-i-execute-a-launch-configuration-programmatically)

I want to write an Eclipse Plugin that can programmatically create Debug Launch configurations for 'Remote Java Application' and also Launch the configuration programmatically.

Is this possible? Can someone give me pointers to get me started?

I don't have a great deal of experience authoring Eclipse plugins but I am quite experienced using it for my daily dev work.

I am keen on writing this plugin to simply my debugging process which currently involves manually launching a debug configuration for every JVM (at least 3) that I want to debug, which slows me down tremendously.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:23:35.233

要创建实际的插件，如果您安装了 Eclipse PDE，Eclipse 中有几个示例可用。查看[本教程](http://www.vogella.com/articles/EclipsePlugIn/article.html)以获取入门帮助。

该指南将为您提供带有工具栏按钮和许多替代方案的示例应用程序。更改代码以使其看起来像您想要的那样，然后使用其他注释的帮助来启动程序。

# ruby-on-rails - 嵌套字段创建新的 belongs_to 记录

> ID：13813375
> 
> 赞同：0
> 
> 时间：2012-12-11T03:54:56.267
> 
> 标签：ruby-on-rails, nested-forms

我想创建一组字段来在我的`activties/_form.html.erb`

一旦我让表单工作，我计划在单击**添加另一个位置**按钮或选择位置选择框中的额外选项时显示表单。

到目前为止的故事：

**_form.html.erb**

```
<%= f.fields_for :location do |builder| %>
<%= render 'location_fields', :f => builder %>
<%= builder.hidden_field :provider_id, :value => @provider.id %>
<% end %> 
```

**活动.rb**

```
attr_accessible :name, :price, :location, :location_attributes
accepts_nested_attributes_for :location 
```

问题是，这一切都运作得太好了。当您编辑活动记录时，位置字段会预先填充相关的位置记录。

我应该如何创建一个空白表单，以便始终创建一个新位置并与该活动相关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:20:07.073

您需要创建一个没有现有数据的“新”位置。然后，此表单将使用它。

例如：在您的控制器中

```
@new_location = Location.new 
```

然后，您可以使用此位置对象调用部分。

您在现场看到的位置可能是已经与活动相关的位置。这取决于你的控制器中有什么。

您还可以尝试嵌套属性：

```
@activity.location.build 
```

然后在您看来：

```
<%= f.fields_for :location do |builder| %>
  <%= builder.label :name %><br/>
  <%= builder.text_field :name %>
<% end %> 
```

# php - 将属性变量添加到对象数组php

> ID：13813383
> 
> 赞同：0
> 
> 时间：2012-12-11T03:55:29.917
> 
> 标签：php, arrays

如何将属性添加到数组对象变量？假设我有这样的变量对象：

```
 Array
(
    [0] => stdClass Object
        (
            [category] => Nuklir
            [id] => 715
            [title] => Testing Article Nuklir
            [alias] => testing-article-nuklir
            [title_alias] => 
            [introtext] => <p><span style="color: #666666; font-family: 'Lucida Grande', Arial, sans-serif; font-size: 13px; line-height: 19px;" mce_style="color: #666666; font-family: 'Lucida Grande', Arial, sans-serif; font-size: 13px; line-height: 19px;">Vivamus libero eros, dictum id aliquam in, tristique id sapien. Maecenas rhoncus malesuada aliquet. Morbi vulputate vulputate mauris quis condimentum. Ut ut ligula et mauris accumsan tristique ut nec lacus.</span></p><p><span style="color: #666666; font-family: 'Lucida Grande', Arial, sans-serif; font-size: 13px; line-height: 19px;" mce_style="color: #666666; font-family: 'Lucida Grande', Arial, sans-serif; font-size: 13px; line-height: 19px;">Vivamus libero eros, dictum id aliquam in, tristique id sapien. Maecenas rhoncus malesuada aliquet. Morbi vulputate vulputate mauris quis condimentum. Ut ut ligula et mauris accumsan tristique ut nec lacus.</span></p><p><span style="color: #666666; font-family: 'Lucida Grande', Arial, sans-serif; font-size: 13px; line-height: 19px;" mce_style="color: #666666; font-family: 'Lucida Grande', Arial, sans-serif; font-size: 13px; line-height: 19px;">Vivamus libero eros, dictum id aliquam in, tristique id sapien. Maecenas rhoncus malesuada aliquet. Morbi vulputate vulputate mauris quis condimentum. Ut ut ligula et mauris accumsan tristique ut nec lacus.</span><br /></p>
            [fulltext] => 
            [sectionid] => 7
            [state] => 1
            [catid] => 25
            [created] => 2012-12-10 07:51:03
            [created_by] => 110
            [created_by_alias] => 
            [modified] => 0000-00-00 00:00:00
            [modified_by] => 0
            [checked_out] => 0
            [checked_out_time] => 0000-00-00 00:00:00
            [publish_up] => 2012-12-10 07:51:03
            [publish_down] => 0000-00-00 00:00:00
            [hits] => 0
            [images] => 
            [urls] => 
            [ordering] => 1
            [metakey] => 
            [metadesc] => 
            [access] => 0
            [slug] => 715:testing-article-nuklir
            [catslug] => 25:nuklir
            [readmore] => 0
            [author] => migrasi
            [usertype] => Super Administrator
            [groups] => Public
            [author_email] => test@yahoo.com
        )

) 
```

我在这里想要的是添加新属性，例如。[site_id] => [author_email] 下面的 1。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:01:38.223

这就是你基本上拥有的（一个在 0 索引处有一个对象的数组）......

```
$array = array(new stdclass);
print_r($array); 
```

这给你

```
 Array (
    [0] => stdClass Object
        (
        )

) 
```

现在您想为该对象添加一些属性...

```
$array[0]->site_id = 1;
print_r($array); 
```

这会给你

```
Array
(
    [0] => stdClass Object
        (
            [site_id] => 1
        )

) 
```

# xslt - 如何提高 XSLT1.0 中分组/排序的性能

> ID：13813391
> 
> 赞同：0
> 
> 时间：2012-12-11T03:56:49.450
> 
> 标签：xslt, muenchian-grouping

我有一个看起来像的 XML -

```
<autnresponse>
    <responsedata>
        <autn:hit>
            <autn:content>
                <DOCUMENT>
                    <DRETITLE>Request Audio Visual Services</DRETITLE>
                    <HIERARCHY>LEVEL1:8+My Workplace#4~LEVEL2:33+Meetings~LEVEL3:151+Book meeting room~</HIERARCHY>
                    <HIERARCHY>LEVEL1:8+My Workplace#4~LEVEL2:33+Meetings~LEVEL3:154+Support for Meeting Room Equipment~</HIERARCHY>
                </DOCUMENT>
            </autn:content>
        </autn:hit>
        <autn:hit>
            <autn:content>
                <DOCUMENT>
                    <DRETITLE>View outage calendar for SAP ICERPS system</DRETITLE>
                    <HIERARCHY>LEVEL1:4+IT Services & Access#1~LEVEL2:8+IT for IT~LEVEL3:45+SAP Services~</HIERARCHY>
                    <HIERARCHY>LEVEL1:4+IT Services & Access#1~LEVEL2:21+Corp and Consumer Systems~LEVEL3:85+Market and Sell systems~</HIERARCHY>
                    <HIERARCHY>LEVEL1:4+IT Services & Access#1~LEVEL2:23+Support Function Systems~LEVEL3:128+SAP Systems~</HIERARCHY>
                    <HIERARCHY>LEVEL1:4+IT Services & Access#1~LEVEL2:23+Support Function Systems~LEVEL3:129+Supply Chain Planning Services Systems ~</HIERARCHY>
                </DOCUMENT>
            </autn:content>
        </autn:hit>
    </responsedata>
</autnresponse> 
```

请注意，有多个层次结构元素，它们是 level1~level2~level3 的串联字符串。每个级别的形式为 LEVEL:LevelID+LevelName。LEVEL1 有一个附加值，如 # 可用于排序。基本上我需要按这个＃号和其他级别按字母顺序对所有级别进行排序。

我想把它变成这样的东西 -

```
<TREE>
    <LEVEL1 name="IT Services & Access" id="4">
        <LEVEL2 name="Corp and Consumer Systems" id="21">
            <LEVEL3 name="Market and Sell systems" id="85">
                <ITEM id="1000" name="View outage calendar for SAP ICERPS system">
                </ITEM>
            </LEVEL3>
        </LEVEL2>
        <LEVEL2 name="IT for IT" id="8">
            <LEVEL3 name="SAP Services" id="45">
                <ITEM id="1000" name="View outage calendar for SAP ICERPS system"></ITEM>
            </LEVEL3>
        </LEVEL2>
        <LEVEL2 name="Support Function Systems" id="23">
            <LEVEL3 name="SAP Systems" id="128">
                <ITEM id="1000" name="View outage calendar for SAP ICERPS system">
                </ITEM>
            </LEVEL3>
            <LEVEL3 name="Supply Chain Planning Services Systems " id="129">
                <ITEM id="1000" name="View outage calendar for SAP ICERPS system">
                </ITEM>
            </LEVEL3>
        </LEVEL2>
    </LEVEL1>
    <LEVEL1 name="My Workplace" id="8">
        <LEVEL2 name="Meetings" id="33">
            <LEVEL3 name="Book meeting room" id="151">
                <ITEM id="100" name="Request Audio Visual Services"></ITEM>
            </LEVEL3>
            <LEVEL3 name="Support for Meeting Room Equipment" id="154">
                <ITEM id="100" name="Request Audio Visual Services"></ITEM>
            </LEVEL3>
        </LEVEL2>
    </LEVEL1>
</TREE> 
```

基本上每个文档都有多个与之关联的层次结构。我需要将它们组合在一起，并且每个级别也需要组合在一起。

我的 XSL 看起来像这样 -

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:autn="http://schemas.autonomy.com/aci/">
<xsl:output method="xml" omit-xml-declaration="yes"/>

<xsl:strip-space elements="*"/>

<xsl:key name="TOPLEVEL" match="autnresponse/responsedata/autn:hit/autn:content/DOCUMENT/HIERARCHY" use="substring-before(substring-after(.,'LEVEL1:'),'#')"/>
<xsl:key name="MIDLEVEL" match="autnresponse/responsedata/autn:hit/autn:content/DOCUMENT/HIERARCHY" use="substring-before(substring-after(.,'LEVEL2:'),'~')"/>
<xsl:key name="BOTTOMLEVEL" match="autnresponse/responsedata/autn:hit/autn:content/DOCUMENT/HIERARCHY" use="substring-before(substring-after(.,'LEVEL3:'),'~')"/>

 <xsl:template match="/">
 <TREE>
    <xsl:for-each select="autnresponse/responsedata/autn:hit/autn:content/DOCUMENT/HIERARCHY[generate-id() = generate-id(key('TOPLEVEL',substring-before(substring-before(substring-after(.,'LEVEL1:'),'~'),'#') )[1])]">

    <xsl:sort select="substring-after(substring-before(substring-after(.,'LEVEL1:'),'~'),'#')"/>

    <xsl:variable name="TOP" select="substring-before(substring-after(.,'LEVEL1:'),'#')"/>
     <LEVEL1>
        <xsl:attribute name="name"><xsl:value-of select="substring-after($TOP,'+')"/></xsl:attribute>
        <xsl:attribute name="id"><xsl:value-of select="substring-before($TOP,'+')"/></xsl:attribute>
            <xsl:for-each select="//autnresponse/responsedata/autn:hit/autn:content/DOCUMENT/HIERARCHY[substring-before(substring-after(.,'LEVEL1:'),'#')=$TOP and generate-id() = generate-id(key('MIDLEVEL',substring-before(substring-after(.,'LEVEL2:'),'~') )[1])]">
            <xsl:sort select="substring-after(substring-before(substring-after(.,'LEVEL2:'),'~'),'+')"/>

            <xsl:variable name="MID" select="substring-before(substring-after(.,'LEVEL2:'),'~')"/>
                <LEVEL2>
                    <xsl:attribute name="name"><xsl:value-of select="substring-after($MID,'+')"/></xsl:attribute>
                    <xsl:attribute name="id"><xsl:value-of select="substring-before($MID,'+')"/></xsl:attribute>
                    <xsl:for-each select="//autnresponse/responsedata/autn:hit/autn:content/DOCUMENT/HIERARCHY[substring-before(substring-after(.,'LEVEL1:'),'#')=$TOP  and substring-before(substring-after(.,'LEVEL2:'),'~')=$MID and generate-id() = generate-id(key('BOTTOMLEVEL',substring-before(substring-after(.,'LEVEL3:'),'~') )[1])]">
                    <xsl:sort select="substring-after(substring-before(substring-after(.,'LEVEL3:'),'~'),'+')"/>

                    <xsl:variable name="BOTTOM" select="substring-before(substring-after(.,'LEVEL3:'),'~')"/>
                    <LEVEL3>
                        <xsl:attribute name="name"><xsl:value-of select="substring-after($BOTTOM,'+')"/></xsl:attribute>
                        <xsl:attribute name="id"><xsl:value-of select="substring-before($BOTTOM,'+')"/></xsl:attribute>
                        <xsl:apply-templates select="//HIERARCHY[substring-before(substring-after(.,'LEVEL1:'),'#')=$TOP  and substring-before(substring-after(.,'LEVEL2:'),'~')=$MID and substring-before(substring-after(.,'LEVEL3:'),'~')=$BOTTOM]">
                            <xsl:sort select="../DREDRETITLE"/>
                        </xsl:apply-templates>
                    </LEVEL3>
                    </xsl:for-each>
                </LEVEL2>
            </xsl:for-each>
    </LEVEL1>
    </xsl:for-each>
 </TREE>
 </xsl:template>
  <xsl:template match="HIERARCHY">
    <ITEM>
        <xsl:attribute name="id"><xsl:value-of select="../ID"/></xsl:attribute>
        <xsl:attribute name="name"><xsl:value-of select="../DREDRETITLE"/></xsl:attribute>
    </ITEM>
  </xsl:template>

</xsl:stylesheet> 
```

这方面的表现不是很好，我觉得它不是最好的解决方案。我想知道是否有更好的替代解决方案可以更快地工作。基本上我有超过 1200 个文档元素，XSL 转换大约需要 15 秒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:58:31.657

此样式表在不进行任何分组的情况下将文档预处理为输出格式，然后进行第二次传递以执行分组任务，这应该会减少您正在执行的字符串处理量，并且可能会提高性能。如果没有完整的示例并了解实施的所有细节，就很难测试性能提升。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common"
  xmlns:autn="http://schemas.autonomy.com/aci/"
  exclude-result-prefixes="exsl">

  <xsl:output method="xml" omit-xml-declaration="yes"/>

  <xsl:strip-space elements="*"/>

  <xsl:key name="TOPLEVEL" match="LEVEL1" use="@name"/>
  <xsl:key name="MIDLEVEL" match="LEVEL2" use="concat(@name,parent::LEVEL1/@name)"/>
  <xsl:key name="BOTLEVEL" match="LEVEL3" use="concat(@name,parent::LEVEL2/@name,ancestor::LEVEL1/@name)"/>

  <xsl:template match="/">
    <xsl:variable name="preprocess">
      <xsl:apply-templates mode="preprocess"/>
    </xsl:variable>

    <TREE>
      <xsl:for-each
        select="exsl:node-set($preprocess)/LEVEL1[generate-id() = generate-id(key('TOPLEVEL', @name)[1])]">
        <xsl:variable name="top" select="@name"/>
        <xsl:copy>
          <xsl:copy-of select="@*"/>

          <xsl:for-each
            select="exsl:node-set($preprocess)//LEVEL2[generate-id() = generate-id(key('MIDLEVEL', concat(@name,$top))[1])]">
            <xsl:variable name="mid" select="@name"/>
            <xsl:copy>
              <xsl:copy-of select="@*"/>

              <xsl:for-each
                select="exsl:node-set($preprocess)//LEVEL3[generate-id() = generate-id(key('BOTLEVEL', concat(@name,$mid,$top))[1])]">

                <xsl:copy>
                  <xsl:copy-of select="(@*|ITEM)"/>
                </xsl:copy>
              </xsl:for-each>
            </xsl:copy>
          </xsl:for-each>
        </xsl:copy>
      </xsl:for-each>
    </TREE>
  </xsl:template>

  <xsl:template mode="preprocess" match="@*|node()">
    <xsl:apply-templates mode="preprocess" select="@*|node()"/>
  </xsl:template>

  <xsl:template mode="preprocess" match="HIERARCHY">
    <xsl:variable name="TOP" select="substring-before(substring-after(.,'LEVEL1:'),'#')"/>
    <LEVEL1
      name="{substring-after($TOP,'+')}"
      id="{substring-before($TOP,'+')}">

      <xsl:variable name="MID" select="substring-before(substring-after(.,'LEVEL2:'),'~')"/>
      <LEVEL2 
        name="{substring-after($MID,'+')}"
        id="{substring-before($MID,'+')}">

        <xsl:variable name="BOT" select="substring-before(substring-after(.,'LEVEL3:'),'~')"/>
        <LEVEL3
          name="{substring-after($BOT,'+')}"
          id="{substring-before($BOT,'+')}">

          <ITEM
            id="{../ID}"
            name="{../DRETITLE}"/>
        </LEVEL3>
      </LEVEL2>
    </LEVEL1>
  </xsl:template>

</xsl:stylesheet> 
```

一些不科学的测试，在 Saxon 6.5.5 中使用您的样本数据，我实际上看到了性能下降，但在 Saxon 9.4.0.3 中增加了大约 25%。

# javascript - Fusion 表中的鼠标悬停

> ID：13813394
> 
> 赞同：0
> 
> 时间：2012-12-11T03:57:07.573
> 
> 标签：javascript, mouseover, google-fusion-tables

我有一个网站 (www.auscem.com)，表格下方有一个指向 Fusion 表格地图的链接。目前，可以点击地图上的标记来获取信息窗口，但我想让它们改为鼠标悬停。目前的脚本是（稍微缩写）：

```
var map;
var layer;
var tableid = xxxxxxx;

function load()
{
map = new google.maps.Map(document.getElementById('mapDiv'),
{
  center: new google.maps.LatLng(-25.274, 133.775),
  zoom: 4, //zoom
  mapTypeId: google.maps.MapTypeId.ROADMAP //the map style
});

layer = new google.maps.FusionTablesLayer(tableid, {suppressInfoWindows: false});
layer.setQuery("SELECT 'Latitude' FROM " + tableid);
layer.setMap(map);

google.maps.event.addListener(layer, "click", function(event)
{
  document.getElementById('siteInfo').innerHTML = event.infoWindowHtml;
});

}
 // execute this
window.onload = load; 
```

我已经尝试了各种各样的东西，但没有得到它的工作。

想法将是最受欢迎的......

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:50:19.553

您看过[FusionTips](http://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/)实用程序库吗？它基于 FusionTables 数据提供工具提示。您应该能够将其转换为执行 InfoWindows，我不确定它的效率如何。

# c - 输入太大时算法返回垃圾？

> ID：13813395
> 
> 赞同：2
> 
> 时间：2012-12-11T03:57:13.987
> 
> 标签：c, algorithm, primes

我今天开始研究 Project Euler 问题，让自己忙于休息。其中一个问题要求所有质数的总和低于 200 万，所以我拼凑了一个埃拉托色尼筛来找出所有这些数字。

```
unsigned long i, j, sum = 0, limit = 2000000;

// Allocate an array to store the state of numbers (1 is prime, 0 is not).
int* primes = malloc(limit * sizeof(int));

// Initialize every number as prime.
for (i = 0; i < limit; i++)
    primes[i] = 1;

// Use the sieve to check off values that are not prime.
for (i = 2; i*i < limit; i++)
    if (primes[i] != 0)
        for (j = 2; i*j < limit; j++)
            primes[i*j] = 0;

// Get the sum of all numbers still marked prime.
for (i = 2; i < limit; i++)
    if (primes[i] != 0)
        sum += i;

printf("%d", sum); 
```

这完美地工作了`limit`大约一百万。此后，它返回随机值（例如，1000000 返回 -1104303641）。我尝试将所有`unsigned long`变量声明为`unsigned long long`无济于事。错误似乎发生在最后 4 行，因为`primes[]`此时只包含 1 和 0。我认为这与正在使用的值的大小有关，任何人都可以提供任何指导吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T04:00:41.637

Wolfram Alpha 告诉我，小于 500000 的素数之和是[9914236195](http://www.wolframalpha.com/input/?i=sum+of+primes+less+than+500000)。

该数字不适合 32 位整数，因此您在求和循环期间溢出了一个 int。您可以尝试使用 a `uint64_t`，但该问题最终会在足够高的限制下再次发生（尽管我怀疑 2000000 的限制会适合）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T04:04:25.287

将 %d 更改为 %ld ，您应该得到：

142913828922

这似乎应该是（接近或）正确答案。

..假设您的 long 不是 32 位的。

如果您在 32 位平台上，您将需要某种第三方大型 int 库。

[C语言中的大整数？](https://stackoverflow.com/questions/565150/bigint-in-c)

推荐： http: [//gmplib.org/](http://gmplib.org/)

# recursion - 在 Always 块内的 Verilog 中的递归

> ID：13813397
> 
> 赞同：2
> 
> 时间：2012-12-11T03:57:25.280
> 
> 标签：recursion, verilog

我有一个希望使用递归的verilog代码。但是，每当我在一个总是块中尝试这个时，它都会给出一个错误，说不是任务。

有什么方法可以在 always 块中实现模块？还有无论如何我可以在 always 块中使用递归吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T04:17:24.703

您可以使用生成块编写递归模块：

```
module unary_and
#(parameter WIDTH = 32)
(input [WIDTH-1:0] in_and,
output            out_and)

generate
 if(WIDTH == 1) begin
   assign out_and = in_and;
 end
 else if(WIDTH == 2) begin
   assign out_and = in_and[0] & in_and[1];
 end
 else begin
   unary_and #(.WIDTH (WIDTH/2))
     unary_and_low
       (.in_and  (in_and[WIDTH/2-1:0]),
        .out_and (out_and_low));

   unary_and #(.WIDTH (WIDTH - WIDTH/2))
     unary_and_high
       (.in_and  (in_and[WIDTH-1:WIDTH/2]),
        .out_and (out_and_high));

   assign out_and = out_and_low & out_and_high;
 end
endgenerate
endmodule 
```

这是来自[Verilog](http://jad-reads.blogspot.hu/2009/03/recursive-and-iterative-designs-in.html)中的递归和迭代设计，您也可以在其中找到其他解决方案。您也可以查看[递归模块](http://www.beyond-circuits.com/wordpress/2009/01/recursive-modules/)。

也许你也应该看看这些问题和答案：
[我们可以在一个 always 块中生成吗？](https://stackoverflow.com/questions/8553097/could-we-have-generate-inside-an-always-block)
[始终块中的 Verilog 生成/genvar](https://stackoverflow.com/questions/12504837/verilog-generate-genvar-in-an-always-block)

# web-services - Flex webservice 巨大的性能问题

> ID：13813398
> 
> 赞同：2
> 
> 时间：2012-12-11T03:57:25.627
> 
> 标签：web-services, actionscript-3, apache-flex, weblogic, axis2

我正在使用 web 服务从 java 应用程序中提取大量数据。数据的结构有点复杂，有很多使用数组集合的分层模式。我遇到了大约 15 秒的巨大性能问题（在 jboss 和 WebSphere 中）来加载数据。消耗的时间主要是在将服务数据转换为弹性对象结构时。迁移到 Weblogic 应用程序服务器时问题变得更糟。我正在使用axis2框架。

有没有办法优化这个？我可以使用哪些替代技术来代替网络服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:24:50.600

恐怕你可能不喜欢我的回答，因为这会涉及到大量的重构。我想不出任何简单的解决方法。

> 我可以使用哪些替代技术来代替网络服务？

[通过使用AMF](http://en.wikipedia.org/wiki/Action_Message_Format)远程处理而不是 Web 服务，您将获得最佳性能。这是一篇解释它是什么的文章并包含一个基准，它将向您展示这可以轻松地将您的响应时间缩短一半：[http ://www.themidnightcoders.com/products/weborb-for-net/developer-den/技术文章/amf-vs-webservices.html](http://www.themidnightcoders.com/products/weborb-for-net/developer-den/technical-articles/amf-vs-webservices.html)。该基准在服务器端使用 .Net。它会在 Java 服务器上工作得更好。

> 有没有办法优化这个？

您应该考虑将传递给客户端的对象重构为“[数据传输对象](http://en.wikipedia.org/wiki/Data_transfer_object)”（DTO）。这些是简单的值对象，仅包含客户端显示所需的数据。这意味着：将数据从服务器传输到客户端所花费的时间更少，将对象转换为 ActionScript 类所花费的时间更少。

**您如何限制所涉及的工作？**

您可以在服务器端添加一个层，该层将调用您现有的 Web 服务，将复杂的数据转换为简单的 DTO，并通过 AMF 服务将它们交付给客户端。这样一来，您就可以保持现有代码不变，并且仍然可以获得显着的性能提升。

# joomla - Joomla 用户配置文件插件，如何更改帖子网址？

> ID：13813400
> 
> 赞同：0
> 
> 时间：2012-12-11T03:57:27.860
> 
> 标签：joomla

我正在为用户注册表单使用用户配置文件插件，但我需要更改表单在提交时发布到的 URL。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:06:59.097

用户配置文件插件是扩展com_user的核心插件...它不控制用户注册表单的提交。

如果您想修改用户配置文件流程，那么最安全的方法是制作用户配置文件插件的副本，重命名相关部分以使其成为您自己的插件 - 您可能希望从本[节介绍插件](http://docs.joomla.org/Plugin)。

通过修改您自己的副本，您将能够与 Joomla 的安全补丁保持同步，因为您不会修改核心文件。

如果您想修改注册过程，您需要`com_user`在这样做之前覆盖，但我建议您检查 Joomla！首先是扩展目录 (JED)。有大量的扩展可以修改注册过程、提供与其他系统的集成以及扩展已经存在的用户配置文件。

另一种策略可能是使用其中一个也处理用户注册的[表单扩展](http://extensions.joomla.org/extensions/contacts-and-feedback/forms)——通常它们允许您创建各种自定义表单，包括替换标准用户注册表单。我们对其中一些非常满意，目前使用的[是 RSForm Pro！](http://extensions.joomla.org/extensions/contacts-and-feedback/forms/4964)— 它是一种商业产品，但非常灵活，并且对所涉及的少量成本提供了良好的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:29:33.703

作为记录，解决方案是执行模板覆盖 /html/com_users/registration/default.php 并将操作更改为模板配置中指定的某个 url：

```
action="<?php echo JFactory::getApplication()->getTemplate(true)->params->get('myFormAction'); 
```

# javascript - 按换行符拆分文本时出错

> ID：13813405
> 
> 赞同：-2
> 
> 时间：2012-12-11T03:58:02.287
> 
> 标签：javascript, html, graphics, opengl-es, webgl

这是我的代码的相关部分：

```
ajax({
    url: "TeaPot.obj",
    success: function(data) {
        var Script = data.split("\n");
        for (var I in Script) {
        var Line = Script[I];
        console.log(Line);
        //If Vertice Line
        if (Line.substring(0, 2) == "v ") {
        //console.log("CORRECT");
            var Row = Line.substring(2).split(" ");
            console.log(Row[0]);
            verts[verts.length] = new Vector3(parseFloat(Row[0]),parseFloat(Row[1]), parseFloat(Row[2]));
        }
      } 
```

现在这应该遍历每一行并寻找“v”，但我的 verts 数组仍然没有，有什么理由吗？

哦，obj文件也看起来像这样

```
 v  -0.3393 0.0000 -12.3639
 v  1.8409 3.7515 -8.3253 
```

我现在有了它，它会将 verts 的长度增加到 96，这是正确的，但是数组没有存储任何内容？？？

```
 newX = parseFloat(row[1]);
            newY = parseFloat(row[2]);
            newZ = parseFloat(row[3])
            verts.push = new Vector3(newX, newY, newZ);
            console.log(verts[verts.length-1]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T04:01:19.740

*   `data`是一个字符串，响应的内容。
*   `data.responseText`是`undefined`。
*   `data.responseText.split`是一个例外，您不能访问`undefined`.

你要这个：

```
// save capital letter variables for constructors
var script = data.split("\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:05:34.943

它认为**data的****responseText**属性是未定义的。我会在“var Script = ...”行使用firebug设置一个断点，并检查该点的**数据**值。如果不能设置断点，做一个简单的**alert(data);** 在该行之前查看**数据**的值是什么。我怀疑**数据**是原始文本。

# .net - 如何通过 .net 代码向 RS232 电缆发送 5 伏电源？

> ID：13813406
> 
> 赞同：1
> 
> 时间：2012-12-11T03:58:15.793
> 
> 标签：.net, serial-port

我想使用 c# 代码向 RS232 电缆发送 5 伏电源。如何执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:01:06.990

你不能……不是真的。您无法选择从 RS-232 端口输出的电压。RS-232 数据引脚可以一直摆动到 +/- 15V，并且只提供非常低的电流。

请注意，有状态线，但它们的电流也非常低。通常如果你只是打开端口，DTR 状态行就会变高。

```
SomePort.Open() 
```

[http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)

# java - 从 ar2[][][] 中删除 ar1[][]

> ID：13813408
> 
> 赞同：0
> 
> 时间：2012-12-11T03:58:43.607
> 
> 标签：java, arraylist

我正在尝试从另一个 3d arraylist 中删除 2d arraylist。我的意思是，从 ar2[][][] 中删除所有 ar1[][] 我不明白为什么我的代码没有删除所有这些：

```
 public void removeSame(ArrayList<ArrayList<String>> ar1,ArrayList<ArrayList<ArrayList<String>>> ar3)
    {
        for(int k=0;k<ar3.size();k++)
            for(int j=0;j<ar3.size();j++)
                if(isSame(ar1,ar3.get(k)))
                {
                    ar3.remove(k);
                }
    }
    public boolean isSame(ArrayList<ArrayList<String>> ar1,ArrayList<ArrayList<String>> ar2)
    {
        for(int k=0;k<ar2.size();k++)
            for(int j=0;j<ar2.size();j++)
                if(!ar1.get(k).get(j).equals(ar2.get(k).get(j)))
                    return false;
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:06:29.657

当您删除一个数组时，您的 3d 数组会缩小。下一次迭代跳过一个元素。例如，如果您的数组有 10 个元素并且您删除了 #5，那么下一次迭代将转到过去的 #7 但现在是 #6。#6 现在在 #5 中，你跳过它。删除元素时减少 k。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T04:07:06.007

`ar1`当in出现不止一次时，我可以看到一个问题`ar3`。`ar1`在第一次从`ar3`using中删除后`ar3.remove(k);`，ArrayList 的索引和大小`ar3`会发生变化，即。大小和索引都减一。现在，当您继续循环时，它将在您继续使用原始索引时跳过其间的一个元素。此外，您的内部`for`循环似乎是不必要的。

有两种方法可以解决该问题。

选项1：用户列表#iterator 即

```
Iterator<ArrayList<ArrayList<String>>> iter = ar3.iterator();
while(iter.hasNext()){
    if(isSame(ar1, iter.next())){
        iter.remove();
    }
} 
```

选项2：删除后，将索引ie`k`值减一，然后再继续，例如

```
 for(int k=0;k<ar3.size();k++){
       if(isSame(ar1,ar3.get(k))){
                ar3.remove(k--);
       }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T04:28:49.023

你只需要这个

```
while(ar3.remove(ar1)){}; 
```

# objective-c - 如何在视图中保存 UIImages

> ID：13813410
> 
> 赞同：0
> 
> 时间：2012-12-11T03:59:20.553
> 
> 标签：objective-c, ios, uiimage, mapkit

在我的应用程序中，我有两个视图：一个 mapView 和一个详细视图。mapView 有注解，注解视图有右标注按钮，当按下标注按钮时，这些按钮将详细视图推送到堆栈上。在详细视图中，用户可以拍摄显示在详细视图控制器上的 UIImage 上的图片。我想要的是在每个注释的详细视图控制器上显示不同的图像。我读过我可以使用单例，并且我已经制作了一个单例类，但我不知道如何使用它。有人可以帮我吗？这是一些代码：

我的 MKAnnotation 类：

```
#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>

@interface MapPoint : NSObject <MKAnnotation>
{
    NSString *_address;
    CLLocationCoordinate2D _coordinate;
    NSNumber *_identifier;
    UIImage *_image;
}

- (id)initWithAddress:(NSString*)address
    coordinate:(CLLocationCoordinate2D)coordinate
         title:(NSString *)t
    identifier:(NSNumber *)ident;

//This is a required property from MKAnnotation
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

//This is an optional property from MKAnnotataion
@property (nonatomic, copy) NSString *title;
@property (nonatomic, readonly, copy) NSString *subtitle;
@property (nonatomic) BOOL animatesDrop;
@property (nonatomic) BOOL canShowCallout;

@property (copy) NSString *address;
@property (copy) NSNumber *identifier;
@property (copy,nonatomic) UIImage *image;

@end

@implementation MapPoint

@synthesize title, subtitle, animatesDrop, canShowCallout;
@synthesize address = _address, coordinate = _coordinate, identifier = _identifier, image = _image;

-(id)initWithAddress:(NSString *)address
   coordinate:(CLLocationCoordinate2D)coordinate
        title:(NSString *)t
   identifier:(NSNumber *)ident
{
    self = [super init];

    if (self) {
        _address = [address copy];
        _coordinate = coordinate;
        _identifier = ident;

        [self setTitle:t];

        NSDate *theDate = [NSDate date];

        subtitle = [NSDateFormatter localizedStringFromDate:theDate
                                              dateStyle:NSDateFormatterMediumStyle
                                              timeStyle:NSDateFormatterMediumStyle];
    }
    return self;
}

@end 
```

这是详细视图控制器：

```
#import <UIKit/UIKit.h>
@class P2OViewController;

@interface PinViewController : UIViewController <UINavigationControllerDelegate, UIImagePickerControllerDelegate,UITextFieldDelegate>

{
    __weak IBOutlet UILabel *label;
    __weak IBOutlet UIButton *removeButton;
    NSString *addressForLabel;
    __weak P2OViewController *_vc;
    __weak NSNumber *_identifier;
}

@property (weak, nonatomic) IBOutlet UIImageView *imageView;
@property (weak, nonatomic) IBOutlet UILabel *label;
@property (weak, nonatomic) IBOutlet UIButton *removeButton;
@property (weak, nonatomic) P2OViewController *vc;
@property (weak, nonatomic) NSNumber *identifier;

-(void)takePicture:(id)sender;

-(void)buttonPressed:(id)sender;

@end

#import "PinViewController.h"
#import "MapPoint.h"
#import "P2OViewController.h"

@implementation PinViewController

@synthesize imageView, label, removeButton;
@synthesize vc = _vc, identifier = _identifier;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        UIBarButtonItem *pic = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemCamera
                                                                        target:self
                                                                        action:@selector(takePicture:)];
    [[self navigationItem]setRightBarButtonItem:pic];

}
return self;
}

-(void)takePicture:(id)sender
    {
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc]init];

    //If our device has a camera, we ant to take a picture, otherwise, we just pick from photo library
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
    } else {
        [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    }
    [imagePicker setDelegate:self];

    //Place the image picker on the screen
    [self presentViewController:imagePicker
                   animated:YES
                 completion:nil];
}

-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    //Get picked image from info dictionary
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    //Put the image onto the screen in out image view
    [imageView setImage:image];

    //Take image picker off the screen - you must call this dismiss method
    [self dismissViewControllerAnimated:YES
                         completion:nil];

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:28:18.120

你肯定有一个实现`MKAnnotation`协议的类。

在此类中，只需添加一个`UIImage`属性并将其自定义图像分配给每个注释。

然后在显示详细视图时，您只需传递注释并访问您定义的图像属性。

**编辑** 在您`PinViewController`简单地声明这样的属性

```
@property(nonatomic, strong) MapPoint * annotation; 
```

在您`PinViewController`向其分配相应的注释之前，请执行以下操作

```
detailedController.annotation = theAnnotation; 
```

做任何你需要做的事情来获取图像，然后以这种方式将它存储在注释中

```
self.annotation.image = theImage; 
```

现在注释正在存储图像，因此只要您将其保存在内存中，它就可供您使用。

下次推送详细视图时，您可以执行检查以查看该注释是否已经有图像

```
if(nil != self.annotation.image) {
     // do something
} else {
     // do something else
} 
```

# html - 使用 knitr 在 HTML5 幻灯片中绘图

> ID：13813414
> 
> 赞同：0
> 
> 时间：2012-12-11T04:00:11.127
> 
> 标签：html, r, knitr, ggplot2

这是我有问题的幻灯片：

![在此处输入图像描述](../Images/2c939a34e9cb024c3ffbc3fb3d39474e.png)

这张幻灯片的纯文本是

```
# Title
```{r plot, echo=FALSE}
library("ggplot2")
x <- seq(-1,1,0.05)
y <- x^3/3-x^2 + rnorm(41,sd=0.1)
qplot(x,y)+geom_smooth()
```
- item 1
- item 2 
```

我想：</p>

1.  隐藏评论文本 (## blahblah)
2.  隐藏文字“区块情节的情节”
3.  使绘图更小，以便可以显示项目

你能给我一些提示吗？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T04:47:10.870

您应该花时间阅读为[`knitr`](http://yihui.name/knitr/options).

在不知道您创建幻灯片的工作流程的情况下，从 html5 端很难回答。

您正在寻找`fig.width`, `fig.height`, `fig.cap`,`warning`和`message`from`knitr`块选项。

```
```{r plot, echo=FALSE,fig.width = 3, fig.height = 3,  fig.cap = '', warning = FALSE, message = FALSE, cache = FALSE}
library("ggplot2")
x <- seq(-1,1,0.05)
y <- x^3/3-x^2 + rnorm(41,sd=0.1)
qplot(x,y)+geom_smooth()
```
- item 1
- item 2 
```

您必须调整高度和宽度以获得适合幻灯片的尺寸

# jquery - 我的 JQuery CSS 菜单无法隐藏

> ID：13813417
> 
> 赞同：0
> 
> 时间：2012-12-11T04:00:35.817
> 
> 标签：jquery, html, css

我创建了一个简单的 jQuery 菜单，它会在悬停时展开，但是除非用户将鼠标悬停在另一个菜单项上或单击页面中的其他位置，否则菜单项不会被隐藏。当您使用菜单上的链接加载另一个页面时，该页面将打开并使菜单处于展开状态。我怎样才能解决这个问题？可以在[这里](http://jsfiddle.net/njueukavi/GJkP5/)找到所有 html 和 css 的小提琴。我的 jQuery 代码在这里

```
 $(document).ready(function(){

                    $("#header_nav > li ").addClass("level1");
                    $("#header_nav  > li > ul > li ").addClass("level2");
                    $("#header_nav  > li > ul > li > ul > li ").addClass("level3");

                    $(".level1").live("hover",function(){

                        $(".level1").removeClass("main_menu_hover");
                        $(this).addClass("main_menu_hover");

                        var numberofChildren = $(this).find("> ul").children().length;

                        if(numberofChildren != 0){
                            // Section 1
                            $(".level1").removeClass("active_main_menu");
                            $(this).addClass("active_main_menu");

                            // Section 2
                            $(".level1").find("ul").css("display","none");
                            $(this).find(" > ul").css("display","block");

                            // Section 3
                            $(".level2").removeClass("active_first_element");
                            $(".level2").removeClass("active_last_element");
                            $(".level2").removeClass("active_only_element");

                            // Section 4
                            if(numberofChildren == 1){
                                $(this).find("ul li:first").addClass("active_only_element");
                            }else{
                                $(this).find("ul li:first").addClass("active_first_element");
                                $(this).find("ul li:last-child").addClass("active_last_element");
                            }

                            // Section 5
                            $(".level2 a").removeClass("sub_active");
                            $(".level2").removeClass("menu_hover");

                        }else{
                            // Section 6
                            $(".level1").find("ul").css("display","none");
                            $(".level1").removeClass("active_main_menu");

                        }

                    });

                    $(".level2").find(".arrow-right").attr("href","javascript:void(0);");

                    $(".level2 > a").live("hover",function(e){
                        $("li").removeClass("menu_hover");
                        $(this).parent().addClass("menu_hover");
                        e.preventDefault();
                    });

                    $(".level2 a").live("click",function(){
                        $("li").removeClass("menu_hover");

                        if($(this).hasClass("sub_active")){
                            $(this).removeClass("sub_active");
                            $(".level2 > ul").slideUp();
                        }else{
                            $(".level2 ul").slideUp();
                            $(".level2 a").removeClass("sub_active");
                            $(this).addClass("sub_active");
                            $(this).parent().find("ul").slideDown();
                        }
                    });

                    $(".level3 a").live("hover",function(){
                        if(!($(this).parent().hasClass("accordian_element_hover"))){
                            $(this).parent().removeClass("level3").addClass("accordian_element_hover");
                        }
                    });
                    $(".accordian_element_hover a").live("hover",function(){
                        $(this).parent().addClass("level3").removeClass("accordian_element_hover");
                    });

                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:16:18.013

你可以尝试这样的事情：

```
$(".level1").live("mouseover mouseout", function(event) {
    if (event.type == 'mouseover') {
            //Your old menu code
    } else {
        $(this).attr("class","level1");
        $(this).find("ul").hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:16:55.457

单击链接时，以下内容应隐藏所有菜单：

```
$('#mainmenucontainer a').click(function(){
    $(".level1").find("ul").css("display", "none");
    $(".level1").removeClass("active_main_menu");
}); 
```

# spring - 春安记得我

> ID：13813420
> 
> 赞同：1
> 
> 时间：2012-12-11T04:01:04.840
> 
> 标签：spring, spring-security, remember-me

根据[此](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#remember-me)链接，我正在尝试为“记住我”功能实现持久令牌方法。令牌存储在我的数据库（postgres）中。但是，当我尝试执行以下操作时，我已经正确设置了数据源：

```
<remember-me data-source-ref="dataSource" /> 
```

我的数据库不会自动填充令牌数据。否则，“记住我”功能运行良好（只有数据库不会自动填充）。任何想法为什么？

表 ddl：

```
create table users(
    uid serial primary key,
    username varchar(255) not null,
    password varchar(255) not null,
    firstname varchar(255) not null,
    lastname varchar(255) not null,
    enabled boolean not null,
    constraint cs_username_unq unique(username),
    constraint cs_uid_username_unq unique(uid, username)
);

create table authorities (
    username varchar(255) not null,
    authority varchar(255) not null,
    constraint fk_authorities_users foreign key(username) references users(username)
);

create unique index ix_auth_username on authorities (username,authority);

create table persistent_logins (
    username varchar(255) not null,
    series varchar(255) primary key,
    token varchar(255) not null,
    last_used timestamp not null
); 
```

# c# - 通过 Web 会话维护用户对象

> ID：13813427
> 
> 赞同：0
> 
> 时间：2012-12-11T04:01:22.060
> 
> 标签：c#, asp.net, .net, session

我已按照[教程](http://msdn.microsoft.com/en-us/library/ff649227.aspx)对 ASP.NET/C# 4.0 Web 应用程序实施 LDAP (Active Directory) 身份验证。我的身份验证工作正常，并且能够以我们域的用户身份登录。但是，本教程不涉及下一步，我需要在其中保留一个特定于会话的对象和一些可变数据。

现在我的 LDAP 身份验证工作了，我正在创建一个类来包装会话。但是，我不确定如何创建此会话，使其在所有该用户的请求中保持活动状态。在`Globals.asax`，我已经`Application_AuthenticateRequest`按照教程中的要求使用了。我假设我需要在这里做一些事情，但由于我是 C# 新手（更熟悉 Delphi），我不知道我需要在哪里实际声明/创建这个用户类实例。

这个类包含一些我想在这个用户的会话中保持访问的东西，当然假设服务器将在这段时间内保持运行。例如，包含产品数据的数据集，用户可以在不同的请求中请求同一数据集的各个部分。因此，它必须在整个用户会话期间保持可访问性，而不仅仅是单个 HTTP 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:07:29.893

您几乎可以在 asp.net 中的任何位置读取或写入 Session。

例子：

```
using System.Web;
...

Session["UserAge"] = 28;

var userAge = (int)Session["UserAge"]; 
```

会话确实有一个超时时间，可以在 web.config 中配置。只要向浏览器发出请求，会话信息就应该持续存在。

有关详细信息，请参阅 MSDN：http: [//msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:08:40.830

有一个名为 Session 的内置对象，允许您从 Session 中添加和检索内容。它们通过由 ASP.NET 维护的会话 cookie 自动查找。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T07:36:42.047

我认为您应该看看 asp.net 的表单身份验证。

网络配置：

```
<authentication mode="Forms">
    <forms name=".ASPXFORMSAUTH" loginUrl="/Login.aspx" timeout="120" />
</authentication>
<authorization>
    <deny users="?" />
</authorization> 
```

在您设法使用 ldap 登录访问者后，您可以使用非常少的代码在您的 Web 应用程序中登录该访问者：

```
PrincipalInfo.CurrentPrincipal = PrincipalInfo.CreatePrincipal(userName);
FormsAuthentication.SetAuthCookie(userName, true); 
```

我也会给你一个关于使用 Session 的建议。Jeffery 为您提供了一个如何使用 Session 对象的简单示例。但是不要在 Session 中存储多个单个值；而是创建一个像“VisitorInformation”这样的类，其中包含您需要的所有属性。然后制作一个静态管理器来设置和获取访问者信息。

```
Visitor visitor = VisitorManager.CurrentVisitor;
string name = visitor.Name;
int age = visitor.Age;

private const visitorSessionKey = "visitorSessionkey";
public static Visitor CurrentVisitor
{
    { 
         get { return (Visitor)Session[visitorSessionKey] ?? new Visitor(); }
    }
} 
```

This way you won't sprinkle your code with calls to session all over the place, with the increasing risk of spelling a key wrong or getting values out of sync.

# ruby - 使用 oAuth 令牌进行 API 调用

> ID：13813432
> 
> 赞同：8
> 
> 时间：2012-12-11T04:01:44.503
> 
> 标签：ruby, oauth

我想在 Ruby 中发出 oAuth 请求。我浏览了一些示例，但没有一个用于`oauth_token_secret and oauth_token`发出请求，它们仅用于获取`consumer_key`and 。但我已经有了和。`consumer_secret``oauth_token_secret``oauth_token``oauth_token_secret``oauth_token`

例如，我尝试使用的这个

```
require 'rubygems'
require 'oauth'
consumer = OAuth::Consumer.new(consumer_key, consumer_secret,
                               {
                                 :site=> "https://www.google.com",
                                 :scheme=> :header,
                                 :http_method=> :post,
                                 :request_token_path => "/accounts/OAuthGetRequestToken",
                                 :access_token_path => "/accounts/OAuthGetAccessToken",
                                 :authorize_path=> "/accounts/OAuthAuthorizeToken",
                                 :signature_method=>"RSA-SHA1"},
                               # :private_key_file=>PATH_TO_PRIVATE_KEY
                               )

request_token = consumer.get_request_token()

puts "Visit the following URL, log in if you need to, and authorize the app"
puts request_token.authorize_url
puts "When you've authorized that token, enter the verifier code you are assigned:"

verifier = gets.strip

puts "Converting request token into access token..."

access_token=request_token.get_access_token(:oauth_verifier => verifier)

puts "access_token.token --> #{access_token.token}" # But I initially have it
puts "access_token.secret --> #{access_token.secret}" # But I initially have it 
```

就我而言，有 4 个密钥：

```
consumer_key = "anonymous"
consumer_secret = "anonymous"
oauth_token_secret = "fdsfdsfdfdsfds"
oauth_token = "fdsfdsfdfdsfdsdsdsdsdsdsds" 
```

所以我需要做的是，使用一些额外的 get 参数和 oAuth 令牌向某个 url 发出 API 请求并得到答案。

我如何在 Ruby 中做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T04:17:22.257

```
#!/usr/bin/env ruby
require 'rubygems'
require 'oauth'
require 'json' 
```

您需要获取您的 access_token ( `OAuth::AccessToken`)。

```
# Initialisation based on string values:
consumer_key = 'AVff2raXvhMUxFnif06g'
consumer_secret = 'u0zg77R1bQqbzutAusJYmTxqeUpWVt7U2TjWlzbVZkA'
access_token = 'R1bQqbzYm0zg77tAusJzbVZkAVt7U2T'
access_token_secret = 'sVbVZkAt7U2TjWlJYmTxqR1bQqbzutAuWzeUpu0zg77'

@consumer = OAuth::Consumer.new(consumer_key, consumer_secret, {:site=>'http://my.site'})
accesstoken = OAuth::AccessToken.new(@consumer, access_token, access_token_secret) 
```

一旦你有了你的`OAuth::AccessToken`对象，你就可以：

```
json_response = accesstoken.get('/photos.xml')
# or
json_response = accesstoken.post(url, params_hash) 
```

等等

响应是一个 json 对象。要阅读它，您可以执行以下操作：

```
response = JSON.parse(json_response.body)
# which is a hash
# you just access content like
id = response["id"] 
```

# batch-file - 命令行帮助清理和代码生成

> ID：13813434
> 
> 赞同：2
> 
> 时间：2012-12-11T04:01:56.837
> 
> 标签：batch-file, command-line, sed

需要帮助找到一些用于 bat 文件的命令/工具以自动转换内容：

```
%PCI\VEN_1B21&DEV_0601.DeviceDesc%= asahci_Inst, PCI\VEN_1B21&DEV_0601
%PCI\VEN_1B21&DEV_0602.DeviceDesc%= asahci_Inst, PCI\VEN_1B21&DEV_0602
%PCI\VEN_1B21&DEV_0611.DeviceDesc%= asahci_Inst, PCI\VEN_1B21&DEV_0611
%PCI\VEN_1B21&DEV_0612.DeviceDesc%= asahci_Inst, PCI\VEN_1B21&DEV_0612 
```

为此（清理）：

```
VEN_1B21&DEV_0601
VEN_1B21&DEV_0602
VEN_1B21&DEV_0611
VEN_1B21&DEV_0612 
```

为此（插入代码和下一行）：

```
devcon find * | find /i "VEN_1B21&DEV_0601" >NUL 
if /i %ERRORLEVEL% equ 0 set DEVICE=DETECTED
devcon find * | find /i "VEN_1B21&DEV_0602" >NUL
if /i %ERRORLEVEL% equ 0 set DEVICE=DETECTED
devcon find * | find /i "VEN_1B21&DEV_0611" >NUL
if /i %ERRORLEVEL% equ 0 set DEVICE=DETECTED
devcon find * | find /i "VEN_1B21&DEV_0612" >NUL
if /i %ERRORLEVEL% equ 0 set DEVICE=DETECTED 
```

我已经尝试过各种工具，如 rxfind（零文档）和 sed，但我认为我用错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:06:42.050

使用 sed：

```
pre='devcon find * | find \/i "'
post='" >NUL\nif \/i %ERRORLEVEL% equ 0 set DEVICE=DETECTED'
sed -n "s/.*\\\\\(.*\)/$pre\\1$post/p" input 
```

或者：

```
sed 's/.*\\\(.*\)/devcon find * | find \/i "\1" >NUL\nif \/i %ERRORLEVEL% equ 0 set DEVICE=DETECTED/' input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:28:49.570

You could also use `awk`:

```
awk -F '\' -v a="devcon find * | find /i" -v b=">NUL\nif /i %ERRORLEVEL% equ 0 set DEVICE=DETECTED" '{ print a, "\""$NF"\"", b }' file 
```

or:

```
awk -F '\' '{ printf "devcon find * | find /i \"%s\" >NUL\nif /i %%ERRORLEVEL%% equ 0 set DEVICE=DETECTED\n", $NF }' file 
```

Results:

```
devcon find * | find /i "VEN_1B21&DEV_0601" >NUL
if /i %ERRORLEVEL% equ 0 set DEVICE=DETECTED
devcon find * | find /i "VEN_1B21&DEV_0602" >NUL
if /i %ERRORLEVEL% equ 0 set DEVICE=DETECTED
devcon find * | find /i "VEN_1B21&DEV_0611" >NUL
if /i %ERRORLEVEL% equ 0 set DEVICE=DETECTED
devcon find * | find /i "VEN_1B21&DEV_0612" >NUL
if /i %ERRORLEVEL% equ 0 set DEVICE=DETECTED 
```

# python - 如何在django中设置两个模型之间的动态映射

> ID：13813435
> 
> 赞同：1
> 
> 时间：2012-12-11T04:02:10.537
> 
> 标签：python, django

我有两个模型“里程碑”和“项目”，代码如下：

```
class Project(models.Model):
    ID = models.CharField(max_length=15, primary_key=True)
    Name = models.CharField('Project Name', max_length=100)
    ShortName = models.CharField('Project Short Name', max_length=100)
    def __unicode__(self):
        return self.Name

class Milestone(models.Model):
Project = models.ForeignKey(Project)
def __unicode__(self):
    return self.Name 
```

当我创建里程碑时，我可以选择一个项目，然后里程碑属于该项目，例如，`project1---> m1; project2 --->m2` 然后在另一个模型“任务”中，我想创建一个属于特殊项目和里程碑的任务。代码如下：

```
class Task(models.Model):
    Name = models.CharField('Title', max_length=200)  
    Project = models.ForeignKey(Project,null=True, blank=True)
    Milestone = models.ForeignKey(Milestone,null=True, blank=True)
    def __unicode__(self):
        return self.Name 
```

问题是当我创建一个任务并选择一个项目时，里程碑字段的项目列表总是包含两个“m1”和“m2”，我希望当我选择 project1 时列表只显示 m1，当我选择project2 列表仅显示 m2。

我该如何实施？谢谢

**更新了** 我的文件夹结构

```
 mysite_new/

      manage.py
      mysite/
      ------ __init__.py
             urls.py
             setting.py
             wsgi.py
             templates/
                      default.html

      ticket/
      ------__init__.py
            models.py
            view.py
            urls.py
            admin.py
            js/
              ---- project_change.js 
```

在 admin.py

```
class TaskAdmin(admin.ModelAdmin):
    class Media:
          js = ['js/project_change.js',]
admin.site.register(Task,TaskAdmin) 
```

在 urls.py

```
 urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
    url(r'^admin/login', MyView().login),

    url(r'^hello/', hello),
    (r'^product_change/','project_choices'),

) 
```

并在我的 db ![在此处输入图像描述](../Images/f5ac5addab7cb33973cc17c214aef4a5.png) 中添加任务网站：`http://127.0.0.1:8000/admin/ticket/task/add/` ![在此处输入图像描述](../Images/a6c6c19c3baf3a463275541f1764a0ba.png)

我没有更改您的任何代码，请您帮忙检查一下我的代码有什么问题吗？

**更新** 非常感谢。Arulmurugan，一个善良的人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:04:16.403

您可以使用 jQuery 和 Ajax 实现此目的。尝试使用以下内容：

### project_change.js

```
(function($){   
    $(function(){
        $(document).ready(function() {
            $('#id_Project').bind('change', project_change);            
            $('#id_Milestone > option').show();
            if ($('#id_Project').val() != '') {
                var project_id = $('#id_Project').val();
                $.ajax({
                "type"      : "GET",
              "url"         : "/product_change/?project_id="+project_id,
                "dataType"  : "json",
              "cache"       : false,
                "success"   : function(json) {
                    $('#id_Milestone >option').remove();
                    for(var j = 0; j < json.length; j++){
                        $('#id_Milestone').append($('<option></option>').val(json[j][0]).html(json[j][1]));
                    }
                }           
            });
            }
        });
    });  
})(django.jQuery);

// based on the project, milestone will be loaded

var $ = django.jQuery.noConflict();

function project_change()
{
    var project_id = $('#id_Project').val();
    $.ajax({
    "type"      : "GET",
  "url"         : "/product_change/?project_id="+project_id,
    "dataType"  : "json",
  "cache"       : false,
    "success"   : function(json) {
        $('#id_Milestone > option').remove();
        for(var j = 0; j < json.length; j++){
            $('#id_Milestone').append($('<option></option>').val(json[j][0]).html(json[j][1]));
        }
    }           
})(jQuery);
} 
```

**在views.py**中包含以下内容：

```
from django.shortcuts import HttpResponse
from django.utils import simplejson

from ticket.models import Milestone

def project_choices(request): 
    milestone_list = []
    project_id = request.GET.get('project_id')
    milestones = Milestone.objects.filter(project = project_id)    
    [milestone_list.append((each_milestone.pk,each_milestone.name)) for each_milestone in milestones]
    json = simplejson.dumps(milestone_list)
    return HttpResponse(json, mimetype='application/javascript') 
```

在**urls.py**中：

```
from ticket.views import project_choices

urlpatterns = patterns(
    (r'^product_change/', project_choices),
) 
```

在要根据项目加载里程碑的**admin.py中：**

```
class Media:
    js = ['/path/to/project_change.js',] 
```

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:00:15.997

您也可以为此使用[django 动态选择](https://github.com/charettes/django-dynamic-choices)

它实现了类似于 arulmr 的答案的东西，但是以一种通用的方式，您可以在 django 代码中设置映射。没有任何文档，但该项目具有良好的单元测试，并且由 django 核心开发人员编写。

# php - 在 id != 0 的 MySQL 数据库中选择记录

> ID：13813436
> 
> 赞同：0
> 
> 时间：2012-12-11T04:02:21.213
> 
> 标签：php, mysql

我的网站有问题。

我有一张带有 id 的照片表。当用户将文件上传到服务器时会填充此表，这很好。我也有一个可以发布图片的论坛，图片会发送到同一张照片桌。在主页上有一个部分，其中显示了该表中的一张照片，其下方带有分页链接。

现在，当有人在论坛上发帖并且他们不包含图像时，它会中断。该线程不会显示，因为它正在寻找不存在的 0 的 photo_id。所以我上传了一个虚拟图像，将 id 值更改为零并尝试了

```
$sql = "SELECT * FROM photographs HAVING id != 0 ";
$sql .= "LIMIT {$per_page} ";
$sql .= "OFFSET {$pagination->offset()}"; 
```

哪个有效，图像不再显示，但分页仍然认为那里有记录。它显示了该图像的链接，当用户单击它时，它会中断并删除一堆其他链接，这很混乱。

是否可以从数据库中选择所有内容，但不能选择 0 记录，或者从分页链接中删除链接？这是代码：

```
//1\. the current page number ($current_page)
$page = !empty($_GET['page']) ? (int)$_GET['page'] : 1;

//2\. records per page ($per_page)
$per_page = 1;

//3\. total record count ($total_count)
$total_count = Photograph::count_all();

//Find all photos
//use Pagination instead
//$photos= Photograph::find_all();

$pagination = new Pagination($page, $per_page, $total_count);

//Instead of finding all records, just find the records
//for this page
$sql = "SELECT * FROM photographs HAVING id != 0 ";
$sql .= "LIMIT {$per_page} ";
$sql .= "OFFSET {$pagination->offset()}";
$photos = Photograph::find_by_sql($sql);

//Need to add ?page=$page to all links we want to
//maintain the current page(or store $page in $session)
?>

    <div id="right">
    <?php
    foreach($photos as $photo): 
    ?>
<h3 style="margin: 0;"></h3>
<div style="padding: 5px;">
    <a href="photo.php?id=<?php echo $photo->id; ?>"><img src="<?php echo $photo->image_path(); ?>" width="200" alt="Photo Share Photo" /></a>
   <p align="center"><?php echo $photo->caption; ?></p>
   </div>
   <?php }
endforeach; 
?>

   <div id="pagination" style="clear: both;" align="center">
   <?php
if($pagination->total_pages() > 1) {

    if($pagination->has_previous_page()) {
        echo "<a href=\"index.php?page=";
        echo $pagination->previous_page();
        echo "\">&laquo; Previous</a> ";
    }

    for($i=1; $i <= $pagination->total_pages(); $i++) {
        if($i == $page) {
            echo " <span class=\"selected\">{$i}</span> ";
        } else {
        echo " <a href=\"index.php?page={$i}\">{$i}</a> ";
    }
    }

    if($pagination->has_next_page()) {
        echo " <a href=\"index.php?page=";
        echo $pagination->next_page();
        echo "\">Next &raquo;</a> ";
    }
}
?><br />
<div align="center">
<a href="photo_upload.php">Upload a new photograph</a>
</div> 
```

[编辑]

分页代码。

```
class Pagination {

    public $current_page;
    public $per_page;
    public $total_count;

    public function __construct($page=1, $per_page=20, $total_count=0){
        $this->current_page = (int)$page;
        $this->per_page = (int)$per_page;
        $this->total_count = (int)$total_count;
    }

    public function offset() {
        //Assuming 20 items per page:
        //page 1 has an offset of 0                           (1-1) * 20
        // page 2 has an offset of 20       (2-1) * 20
        //in other words, page 2 starts with item 21
        return ($this->current_page - 1) * $this->per_page;
    }

    public function total_pages() {
        return ceil($this->total_count/$this->per_page);
    }

    public function previous_page() {
        return $this->current_page - 1;
    }

    public function next_page() {
        return $this->current_page +1;
    }

    public function has_previous_page() {
        return $this->previous_page() >= 1 ? true : false;
    }

    public function has_next_page() {
        return $this->next_page() <= $this->total_pages() ? true : false;
    }
} 
```

我会查看 total_pages 并在可行时回复您。我想我可以将 WHERE id != 0 添加到 count_all 方法的末尾。我认为除了照片共享之外没有其他任何东西使用它。我将不得不查看代码。

感谢您对此的帮助。

直流

我只是补充说：

```
public static function count_all() {
    global $database;
    $sql = "SELECT COUNT(*) FROM ".self::$table_name." WHERE `id` **!= 0 AND `show` != 0";**
    $result_set = $database->query($sql);
    $row = $database->fetch_array($result_set);
    return array_shift($row);
} 
```

我将此添加到照片对象中。现在用户可以选择是否希望他们的图片显示在照片共享部分，如果他们不随帖子上传图片，则会自动为其分配 ID 0。如果不清楚并且有人需要帮忙，让我知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:11:16.200

As G-Nugget mentioned. NULL is better suited for this. Your query also looks odd. The usual syntax is:

```
SELECT * FROM photographs WHERE id != 0 
```

Having is used to apply filtering on `GROUP BY` queries.

Edit: It also looks like you are using $total_count from pagination here:

```
$total_count = Photograph::count_all();

<snip>

for($i=1; $i <= $pagination->total_pages(); $i++) {
        if($i == $page) {
            echo " <span class=\"selected\">{$i}</span> ";
        } else {
        echo " <a href=\"index.php?page={$i}\">{$i}</a> ";
} 
```

This will show a link for more pages than exist since $total_count includes the 0 record.

# php - 如何显示忘记密码的sql查询

> ID：13813437
> 
> 赞同：0
> 
> 时间：2012-12-11T04:02:26.393
> 
> 标签：php, mysql, forgot-password

我是 php/mysql 的新手，我想知道如何完成一个*“忘记密码”*页面，该页面显示用户在注册期间填写的问题。

我有一个查询，但我似乎无法让它工作

```
$emailcheck = $_POST['email'];
$checkit = mysql_query("SELECT * Security_Question FROM users WHERE email ='$emailcheck'") 
```

所以我的问题是我将如何显示“安全问题”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:10:12.147

使用 mysql_fetch_array() 方法从查询资源中提取数据：

```
$emailcheck = $_POST['email'];
$checkit = mysql_query("SELECT Security_Question FROM users WHERE email ='$emailcheck'"); //fixed query syntax*
if (!$checkit) exit(); //don't forget to catch query errors!
$result = mysql_fetch_array($checkit);
$question = $result['Security_Question']; 
```

`$question`将举行安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:08:06.913

您的 SQL 不正确。

```
$checkit = mysql_query("SELECT Security_Question FROM users WHERE email ='$emailcheck'"); 
```

或者

```
$checkit = mysql_query("SELECT * FROM users WHERE email ='$emailcheck'"); 
```

您也不应该直接在 SQL 中使用 POSTed 变量。至少先清理它，或者 mysql 转义它。最好尝试使用准备好的语句，

```
http://php.net/manual/en/pdo.prepared-statements.php 
```

# sharepoint - Visual Studio 2012 中缺少用于 sharepoint 2013 开发的先决条件

> ID：13813445
> 
> 赞同：5
> 
> 时间：2012-12-11T04:03:39.870
> 
> 标签：sharepoint, visual-studio-2012, installation, sharepoint-2013

我正在按照 Microsoft 教程创建我的第一个 sharepoint 2013 应用程序。(http://msdn.microsoft.com/en-us/library/fp142379.aspx)

我已经在 Windows 2008 R2 Server Sharepoint 2013 RTM 上安装，完成了所有农场配置 RTM，并安装了所有 Visual Studio 2012 Ultimate 和更新 1 并重新启动服务器。

我还按照[http://msdn.microsoft.com/en-us/library/fp179923.aspx](http://msdn.microsoft.com/en-us/library/fp179923.aspx)上的“如何：为 SharePoint 应用程序设置本地开发环境”的说明进行操作（我必须这样做是因为我们的开发环境无法访问互联网）

我已经到了以管理员身份运行 Visual Studio 的地步，我将其命名并选择了“sharepoint-hosted”并验证了服务器并单击了完成（步骤 5）。

我没有进入下一步打开 AppManifest.xml 文件，而是收到一条消息，提示“**尝试加载一些必需的组件时发生错误，请确保安装了以下必备组件。Microsoft Web 开发人员工具和 Microsoft Exchange Web 服务**”

我已经检查了 VS 设置，并且 Web 开发人员工具已明确安装（我唯一的选择是删除它）

任何帮助将不胜感激。我知道我在这里是菜鸟（这是我的第一篇文章），但我已经用谷歌搜索了这个并搜索了堆栈交换，但没有发现任何对我有帮助的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T01:35:49.640

经过几次试验和错误后得到它

对于脱机安装，您必须下载 Exchange Web 服务组件。我已经下载了“EwsManageApi”并安装了它。

由于错误消息专门针对 Exchange Web 服务，因此我查看了其他版本并尝试了较旧的 1.1 和 32 位版本，但它们也不起作用，** 直到 ** 我急于使用默认设置（适用于当前用户）而不适用于机器的所有用户。

因此，为 64 位服务器上的所有用户安装 EwsManagedApi32 就可以解决问题（对我而言）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:27:23.073

我尝试为所有用户重新安装 EWS 托管 API，但这并没有为我解决问题。最后解决方案很简单：

只需卸载**EWS**托管 API 和 Visual Studio 2012 的 Microsoft Office 开发人员工具。之后**仅**重新安装Office 开发人员工具。这次 Web 平台安装程序将确保也安装了正确的 EWS 托管 API。

我还写了一篇关于这个问题的小博客： [https ://leonzandman.com/2013/02/07/prerequisite-components-error-when-creating-a-visual-studio-2012-sharepoint-2013-app-project/](https://leonzandman.com/2013/02/07/prerequisite-components-error-when-creating-a-visual-studio-2012-sharepoint-2013-app-project/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T04:38:37.823

2014年答案：

安装 Microsoft Exchange Web Services Managed API 2.1（我目前能找到的最新版本）。

# c# - c#中uint的位移位

> ID：13813450
> 
> 赞同：1
> 
> 时间：2012-12-11T04:04:49.587
> 
> 标签：c#, bit-manipulation

如果我想将 4 个字节转换为 int，我可以这样做：

```
 byte[] b = BitConverter.GetBytes(i1);
        int i2 = BitConverter.ToInt32(b,0);
        int i3 = b[0] | (b[1]<<8) | (b[2]<<16) | (b[3]<<24); 
```

然后 i1,i2,i3 将全部相等。

但是我该如何为 uint 做同样的事情呢？这个：

```
 uint u1 = uint.MaxValue-1000;
        byte[] b = BitConverter.GetBytes(u1);
        uint u2 = BitConverter.ToUInt32(b,0);
        uint u3 = (uint)(b[0] | (b[1]<<8) | (b[2]<<16) | (b[3]<<24)); 
```

导致大单位溢出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T04:22:43.933

如果在检查的上下文中，它只会抛出该异常。请参阅：http: [//msdn.microsoft.com/en-us/library/y3d0kef1](http://msdn.microsoft.com/en-us/library/y3d0kef1(v=vs.80).aspx) (v=vs.80).aspx 。

没有例外：

```
uint u1 = uint.MaxValue - 1000;
byte[] b = BitConverter.GetBytes(u1);
uint u2 = BitConverter.ToUInt32(b, 0);
uint u3 = (uint) (b[0] | (b[1] << 8) | (b[2] << 16) | (b[3] << 24)); 
```

例外：

```
checked
{
    uint u1 = uint.MaxValue - 1000;
    byte[] b = BitConverter.GetBytes(u1);
    uint u2 = BitConverter.ToUInt32(b, 0);
    uint u3 = (uint) (b[0] | (b[1] << 8) | (b[2] << 16) | (b[3] << 24));
} 
```

没有例外

```
checked
{
    unchecked
    {
        uint u1 = uint.MaxValue - 1000;

        byte[] b = BitConverter.GetBytes(u1);
        uint u2 = BitConverter.ToUInt32(b, 0);
        uint u3 = (uint) (b[0] | (b[1] << 8) | (b[2] << 16) | (b[3] << 24));

        Console.WriteLine(u1 + " " + u2 + " " + u3);
    }
} 
```

确保您没有使用 /checked 选项进行编译。

通过从 int 转换为 uint 会引发异常。对字节使用移位运算符（带有 uint u3 = ... 的行）将它们隐式转换为 int。MSB 为 ("1") 的 uint 是负 int，超出 uint 的范围。使用 int 不会导致此类异常，因为没有可能引发溢出异常的显式强制转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:21:26.657

我使用最高 4,294,967,295 的 uint 值运行您的代码，这是最大值，并且在所有情况下都可以正常工作。

# php - 在 JQuery 中单击另一个链接时更改另一个标记的类

> ID：13813457
> 
> 赞同：0
> 
> 时间：2012-12-11T04:05:32.330
> 
> 标签：php, jquery, codeigniter

目前正在修改我的菜单栏的代码，只是想询问如何更改我的 hr 标签的类，其中每当我单击链接时，链接下方的行都会更改。好吧，我正在为我的水平菜单做这件事。我已经编写了一些代码，但我承认我不太确定自己在做什么。到目前为止，这是我的代码：

HTML

```
 <div class="menu">
    <table class="menu_item">
        <tr>
            <td>
                <a href="#">Events</a>
                <hr class="active" />
            </td>
            <td>
                <a href="#">Reports</a>
                <hr />
            </td>
            <td>
                <a href="#">Settings</a>
                <hr />
            </td>
            <td>
                <a href="#">Logout</a>
                <hr />
            </td>
        </tr>
    </table>
</div>

<script type="text/javascript" src="<?php echo $base; ?>javascripts/anim.js"></script> 
```

CSS

```
 .menu{
    margin-top:20px;
    margin-bottom:10px;
}

.menu_item td{
    text-align:center;
    width:25%;
}

.menu_list{
    width:1000px;
    margin-left:auto;
    margin-right:auto;
}

.active{
    background-color:#330000;
}

a {
    color:#ffffff;
    text-decoration:none;
    outline:0;
    border:0;
}

hr.active{
    color:#ffff00;
} 
```

和jQuery

```
$("a").click(function() {
  $("hr").click(function (){
      $("hr").removeClass("active");
      $(this).addClass("active");
  });
}); 
```

好吧，我基本上只是希望它看起来像 android ICS 上的选项卡。虽然只是一点点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:08:06.913

```
$("a").click(function() {
 $(this).next().toggle();
}); 
```

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:14:36.173

看看给出的例子：

```
$('.menu_item a').each(function(i, e){
    $(this).click(function(){
        $('.menu_item hr').removeClass('active');
        $(this).next().addClass('active');
    });
}); 
```

这是现场工作代码：http: [//jsfiddle.net/jogesh_pi/EFmvJ/](http://jsfiddle.net/jogesh_pi/EFmvJ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T04:16:23.893

我不确定 Google ICS 是什么样子，但我认为这可以满足您的要求。

```
$("a").click(function() {
      $("hr").removeClass("active");
      $(this).next().addClass("active");
});​ 
```

[演示在这里。](http://jsfiddle.net/zrys5/)我稍微改变了CSS。

在您的代码中，这`$("hr").click`是不必要的。用户不点击 hr 标签，只点击 a 标签。此外，您正在将`active`类添加到 a 标签，而不是 hr。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T04:22:46.653

尝试以下

```
$('.menu a').click(function(){
    //Selects hr tag below a tag and toggle active
    $(this).next().toggleClass('active');
});​ 
```

但是您还需要将您的 CSS .active 类更改为以下内容以更改 HR 标记颜色

```
hr.active{
display: block; height: 1px;
border: 0; border-top: 1px solid #ffff00;
margin: 1em 0; padding: 0;
}​ 
```

# debugging - 如何避免从闭包中访问可变变量

> ID：13813463
> 
> 赞同：32
> 
> 时间：2012-12-11T04:06:07.273
> 
> 标签：debugging, node.js, closures

我有一些这样的代码：

```
for(var id=0; id < message.receiver.length; id++){
   var tmp_id = id;
   zlib.gzip(JSON.stringify(message.json), function(err, buffer){
                        ...
   pushStatusPool[message.receiver[tmp_id]] = null; // fix memory leak
   delete pushStatusPool[message.receiver[tmp_id]];
   ...
   });
} 
```

我得到一个警告，`tmp_id`在闭包中使用可能会导致问题，因为它是一个可变变量。

我怎么能避免呢？我的意思是我怎么能将一个不可变的变量发送到回调，因为这是一个 for 循环，我不能更改代码`zlib.gzip`？或者换句话说，我如何将参数传递给闭包？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-11T07:15:25.057

您需要创建一个范围以`tmp_id`使用自执行功能正确捕获。那是因为整个 for 循环是一个作用域，这意味着每次通过时，您都在捕获相同的变量。所以回调会以错误的 id 结束，因为`temp_id`' 的值会在回调被调用之前被改变。

不过，我会忽略（或关闭）警告，这似乎是在抱怨，因为`temp_id`它是可变的，你可能会重新分配它。这有点傻。如果您真的想修复它，请尝试使用`const`关键字而不是`var`.

```
for(var id=0; id < message.receiver.length; id++){
   (function(){
       const tmp_id = id;
       zlib.gzip(JSON.stringify(message.json), function(err, buffer){
                        ...
           pushStatusPool[message.receiver[tmp_id]] = null; // fix memory leak
           delete pushStatusPool[message.receiver[tmp_id]];
           ...
       });
   })();
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-21T14:05:19.513

我遇到了同样的问题，并通过将 id 传递给闭包来稍微修改 user24359 的答案来解决它：

```
for(var id=0; id < message.receiver.length; id++){
   (function(tmp_id){
       zlib.gzip(JSON.stringify(message.json), function(err, buffer){
                        ...
           pushStatusPool[message.receiver[tmp_id]] = null; // fix memory leak
           delete pushStatusPool[message.receiver[tmp_id]];
           ...
       });
   })(id);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-06T21:40:20.910

这里简化了 user24359 的好答案。这是解决方案：

```
var object = {a:1,b:2};

for (var y in object){
    (function(){const yyy = y;
        setTimeout(function(){console.log(yyy)},3000);})();
} 
```

上面的代码记录 ab 并且是解决方案。以下代码记录 bb ：

```
var object = {a:1,b:2};
for (var y in object){

    setTimeout(function(){console.log(y)},3000);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T10:00:38.893

我在量角器中遇到了同样的问题。使用以下代码解决了它 -

```
(function(no_of_agents){
              ptor.element.all(by.repeater('agent in agents').column('displayName')).then(function(firstColumn){
                    console.log(i, '>>>>>Verifying the agent Name');
                    var agentsSorted = sortAgentsByName();
                    //verify the agent name
                    expect(firstColumn[no_of_agents].getText()).toEqual(agentsSorted[no_of_agents].name);
                    //now click on the agent name link
                    firstColumn[no_of_agents].click();
                    ptor.sleep(5000);
              });
            })(no_of_agents); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-25T13:47:48.700

@user24359 答案是一个很好的解决方案，但您可以简单地用关键字替换`var`关键字`let`。

```
for(var id=0; 
```

变成

```
for(let id=0; 
```

[在此处](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Cleaner_code_in_inner_functions)查看详细信息。

**编辑**：正如 Heriberto Juárez 建议的那样，它只适用于支持 EcmaScript6 的浏览器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-27T10:36:23.570

`var`在循环中使用( `tmp_id`) 位于回调函数的上层范围内创建闭包是一个[**常见错误**](https://developer.mozilla.org/en/docs/Web/JavaScript/Closures#Creating_closures_in_loops_A_common_mistake)`var`，由于不是块作用域，应该避免这种错误。正因为如此，并且因为在循环中创建的每个闭包都共享相同的[词法环境](https://stackoverflow.com/q/12599965/5846045)，所以当调用回调函数时，该变量将始终是最后一个迭代值（即`message.receiver.length - 1`as ）。`tmp_id`您的 IDE 检测到这种行为并正确地抱怨。

为避免警告，有几种解决方案：

*   替换`var`为确保每个创建的闭包在每次迭代中定义**[`let`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/let)**自己的范围：`tmp_id`

    ```
    for (var id = 0; id < message.receiver.length; id++) {
      let tmp_id = id;
      zlib.gzip(JSON.stringify(message.json), function(err, buffer) {
        // Do something with tmp_id ...
      });
    } 
    ```

*   通过像[gennadi.w 那样](https://stackoverflow.com/a/18359631/5846045)利用[IIFE](https://en.wikipedia.org/wiki/Immediately-invoked_function_expression)在每次迭代中创建一个词法环境。

*   使用工厂函数 ( ) 在每次迭代中创建回调函数`createCallback`：

    ```
    const createCallback = tmp_id => function(err, buffer) {
      // Do something with tmp_id ...
    };
    for (var id = 0; id < message.receiver.length; id++) {
      zlib.gzip(JSON.stringify(message.json), createCallback(id));
    } 
    ```

*   [`bind`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_objects/Function/bind)回调函数上的变量，它们被*添加*到其参数中：

    ```
    for (var id = 0; id < message.receiver.length; id++) {
      zlib.gzip(JSON.stringify(message.json), function(tmp_id, err, buffer) {
        // Do something with tmp_id (passed as id) ...
      }.bind(this, id));
    } 
    ```

如果可能的话，`var`从 ECMAScript 2015 开始应该避免，因为这种容易出错的行为。

# jquery - CSS3 动画仅在 CHROME 和 FIREFOX 中表现正确（在 OPERA 中没有响应？）

> ID：13813465
> 
> 赞同：0
> 
> 时间：2012-12-11T04:06:32.713
> 
> 标签：jquery, css, cross-browser, opera, css-transitions

语言：**CSS3** / **jQuery** / **HTML5** / **PHP**

我这里有一堆**圆形 HREF，其样式类似于**HTML5 页面上的 DIV。

![在此处输入图像描述](../Images/08e41c88221225faf12c53074d661cfc.png)

在页面加载时，它们应该从实际大小的**0%放大到****0.80%**，
...在悬停时，它们应该放大到**100%**（这都是使用 CSS3 完成的）。

**现场演示：（** `http://174.127.117.20/~interact/`
如果您在 CHROME 上查看此内容，您会看到它的行为正确无误。）

**困境：**

*   但是，如果您使用**OPERA**浏览器查看它，它根本不会在页面加载时设置动画（按比例放大）。

我总共有 10 个气泡。这些气泡按此顺序分类`class="expand update1"`（`update1`到`update10`）。
最初，在页面加载时，我使用带有延迟的 jQuery 向它们展示：

```
// LOAD BUBBLES

    $('.update1').delay(300).show(0);
    $('.update2').delay(1000).show(0);
    $('.update3').delay(500).show(0);
    $('.update4').delay(100).show(0);
    $('.update5').delay(250).show(0);
    $('.update6').delay(800).show(0);
    $('.update7').delay(500).show(0);
    $('.update8').delay(200).show(0);
    $('.update9').delay(600).show(0);
    $('.update10').delay(150).show(0); 
```

**然后使用 CSS3 动画，我让它们从 0% 放大到 0.80% 的大小：（**
我这样做是为了确保我拥有所有内容。也许我做错了，或者只是懒惰。 ..但我认为问题不在于这里？）

```
@keyframes anim
{
0% {
        transform: scale(0,0);
        -ms-transform: scale(0,0);
        -moz-transform: scale(0,0);
        -webkit-transform: scale(0,0); }
100% {
        transform: scale(0.80);
        -ms-transform: scale(0.80);
        -moz-transform: scale(0.80);
        -webkit-transform: scale(0.80);}
}

@-moz-keyframes anim /* FIREFOX */
{
0% {
        transform: scale(0,0);
        -ms-transform: scale(0,0);
        -moz-transform: scale(0,0);
        -webkit-transform: scale(0,0); }
100% {
        transform: scale(0.80);
        -ms-transform: scale(0.80);
        -moz-transform: scale(0.80);
        -webkit-transform: scale(0.80);}
}

@-webkit-keyframes anim /* SAFARI and CHROME */
{
0% {
        transform: scale(0,0);
        -ms-transform: scale(0,0);
        -moz-transform: scale(0,0);
        -webkit-transform: scale(0,0); }
100% {
        transform: scale(0.80);
        -ms-transform: scale(0.80);
        -moz-transform: scale(0.80);
        -webkit-transform: scale(0.80);}
}

@-o-keyframes anim /* OPERA */
{
0% {
        transform: scale(0,0);
        -ms-transform: scale(0,0);
        -moz-transform: scale(0,0);
        -webkit-transform: scale(0,0); }
100% {
        transform: scale(0.80);
        -ms-transform: scale(0.80);
        -moz-transform: scale(0.80);
        -webkit-transform: scale(0.80);}
} 
```

以下是这些气泡的完整 CSS：

```
a.expand{
    display: none;
    margin: auto;

    transition:all .8s; 

    /* FIREFOX */
    -moz-transition:all .8s;

    /* SAFARI and CHROME */
    -webkit-transition:all .8s;

    /* OPERA */
    -o-transition:all .8s;

    z-index: 2;
    color: #fff;
    border: 2px solid #fff;
    text-decoration: none;
    text-align: center;
    font-family: 'BebasNeueRegular', Arial, sans-serif;
    font-size: 2em;
    letter-spacing: 0;
    padding: 0px;

    animation-iteration-count: 1;
    animation-delay: 0, 10s;

    transform: scale(0.80);
    -webkit-transform: scale(0.80);
    -moz-transform: scale(0.80);
    -o-transform: scale(0.80);
    -ms-transform: scale(0.80);
}

a.expand:hover{
    transform: scale(1);
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -o-transform: scale(1);
    -ms-transform: scale(1);
}

.update1 {
    animation: anim 0.9s 1 ease-in-out;
    -webkit-animation: anim 0.9s 1 ease-in-out;
    -moz-animation: anim 0.9s 1 ease-in-out;
    -o-animation: anim 0.9s 1 ease-in-out;
    -ms-animation: anim 0.9s 1 ease-in-out;
}
.update2 {
    animation: anim 1s 1 ease-in-out;
    -webkit-animation: anim 1s 1 ease-in-out;
    -moz-animation: anim 1s 1 ease-in-out;
    -o-animation: anim 1s 1 ease-in-out;
    -ms-animation: anim 1s 1 ease-in-out;
}
.update3 {
    animation: anim 1.2s 1 ease-in-out;
    -webkit-animation: anim 1.2s 1 ease-in-out;
    -moz-animation: anim 1.2s 1 ease-in-out;
    -o-animation: anim 1.2s 1 ease-in-out;
    -ms-animation: anim 1.2s 1 ease-in-out;
}
.update4 {
    animation: anim 1.1s 1 ease-in-out;
    -webkit-animation: anim 1.1s 1 ease-in-out;
    -moz-animation: anim 1.1s 1 ease-in-out;
    -o-animation: anim 1.1s 1 ease-in-out;
    -ms-animation: anim 1.1s 1 ease-in-out;
}
.update5 {
    animation: anim 0.9s 1 ease-in-out;
    -webkit-animation: anim 0.9s 1 ease-in-out;
    -moz-animation: anim 0.9s 1 ease-in-out;
    -o-animation: anim 0.9s 1 ease-in-out;
    -ms-animation: anim 0.9s 1 ease-in-out;
}
.update6 {
    animation: anim 0.8s 1 ease-in-out;
    -webkit-animation: anim 0.8s 1 ease-in-out;
    -moz-animation: anim 0.8s 1 ease-in-out;
    -o-animation: anim 0.8s 1 ease-in-out;
    -ms-animation: anim 0.8s 1 ease-in-out;
}
.update7 {
    animation: anim 1.4s 1 ease-in-out;
    -webkit-animation: anim 1.4s 1 ease-in-out;
    -moz-animation: anim 1.4s 1 ease-in-out;
    -o-animation: anim 1.4s 1 ease-in-out;
    -ms-animation: anim 1.4s 1 ease-in-out;
}
.update8 {
    animation: anim 0.9s 1 ease-in-out;
    -webkit-animation: anim 0.9s 1 ease-in-out;
    -moz-animation: anim 0.9s 1 ease-in-out;
    -o-animation: anim 0.9s 1 ease-in-out;
    -ms-animation: anim 0.9s 1 ease-in-out;
}
.update9 {
    animation: anim 1.9s 1 ease-in-out;
    -webkit-animation: anim 1.9s 1 ease-in-out;
    -moz-animation: anim 1.9s 1 ease-in-out;
    -o-animation: anim 1.9s 1 ease-in-out;
    -ms-animation: anim 1.9s 1 ease-in-out;
}
.update10 {
    animation: anim 1.4s 1 ease-in-out;
    -webkit-animation: anim 1.4s 1 ease-in-out;
    -moz-animation: anim 1.4s 1 ease-in-out;
    -o-animation: anim 1.4s 1 ease-in-out;
    -ms-animation: anim 1.4s 1 ease-in-out;
}

.update1, .update5, .update9 {
    background-color: #174EF2;
}

.update2, .update6, .update10 {
    background-color: #F13137;
}

.update3, .update7 {
    background-color: #FEB514;
}

.update4, .update8 {
    background-color: #04AA17;
} 
```

我真的不知道为什么我无法定位**Opera 浏览器**？我不能再告诉我我错过了什么，任何指导和帮助将不胜感激！感谢您的时间！

* * *

我正在使用 Opera 的最新版本：**版本 12.11** , **build 1661**

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-11T04:37:03.540

您正在使用

```
 -webkit-animation: for chrome
 -moz-animation: for mozilla
 -o-animation: for opera 
```

我认为在歌剧中 css3 没有正确渲染。尝试通过 w3school 并检查 css3 在不同浏览器中的兼容性。

# java - 编译和测试一个 Android 库项目

> ID：13813469
> 
> 赞同：2
> 
> 时间：2012-12-11T04:06:49.703
> 
> 标签：java, android, android-library

是否可以独立于标准 Android 项目编译和测试 Android 库项目？

我有一个已经在 Google Play 上免费发布的应用程序。现在我想创建一个具有附加功能的付费应用程序。我发现最好的方法是使用共享代码和资源创建一个库项目，然后在两个单独的 Android 项目中覆盖它们。

我想独立于“lite”和“premium”项目编译和测试库中的通用代码，以减少编写测试代码的时间，也许更重要的是，运行它。

我遇到的问题是，当我编译测试项目时，当我使用来自的值`R.id`作为`case`for`switch`语句时，我得到了几个“需要常量表达式”的错误。查看生成的`R.java`文件，我看到这些值被声明为`static int`s。当我在标准 Android 项目中拥有完全相同的代码时，其中的相同变量`R.id`被声明为`static final int`s。

有没有办法在不求助于`if...else if...else`连锁店的情况下解决这个问题？

# html - 如何在 knitr 制作的 HTML5 幻灯片中使用“R 生成”图作为半透明背景？

> ID：13813471
> 
> 赞同：4
> 
> 时间：2012-12-11T04:07:15.780
> 
> 标签：html, r, knitr, pandoc

我想在（HTML5）幻灯片的第一页添加一个情节。我可以以动态的方式实现这一点吗？比如说，背景图像将由 R 代码生成，而不是插入半透明的 PNG 图像。谢谢你。

**更新**：我想要的是

![在此处输入图像描述](../Images/5e83ed7facddeaf1177791a3d752f11f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T18:22:36.107

您可以使用 chunk 选项`dev.args`来实现这一点。您需要正确调整图像大小以适合您的幻灯片。

```
```{r dev.args = list(bg = 'transparent')}
 plot(1:10, 1:10)
``` 
```

这个块将生成一个透明的 png。请阅读文档`? png`以获取您可以传递的参数列表。这是来自文档的有用信息。

> png 支持透明背景：使用 bg = "transparent"。（并非所有 PNG 查看器都能正确呈现具有透明度的文件。）

更新。对于使用 的绘图`ggplot2`，该`alpha`参数可用于控制透明度。

```
```{r dev.args = list(bg = 'transparent'), echo = F, comment = NA, message = F}
library(ggplot2)
ggplot(mtcars, aes(wt, mpg)) +
  geom_point(alpha = 0.1) + 
  geom_smooth(alpha = 0.1)
``` 
```

更新2。要将动态图像用作背景，您需要动态设置幻灯片的背景。这可以在[slidify](http://www.slidify.org)中轻松实现[披露：我是作者]

这是一个带有 Rmd 文件的[要点，当滑动时会给出一个透明的背景。](https://gist.github.com/4262686)

# ruby-on-rails - `where` 取 `true` 或 `false`

> ID：13813474
> 
> 赞同：2
> 
> 时间：2012-12-11T04:07:41.470
> 
> 标签：ruby-on-rails, ruby

我正在为当地的狗收养创建一个“match.com”风格的应用程序，用户或狗可以在其中创建个人资料。在每个配置文件中，都有布尔字段。我想在狗配置文件中显示具有相同`true`值的正确狗，并在用户配置文件中显示相应的布尔字段。在示例中，如果`Dog.kids_under_10`和`User.profile.kids_under_10`匹配，则显示狗。我可以使用`String`or `Integer`( `1`or `0`) 来完成此操作，但我正在尝试学习编写代码的最佳方法。

我最终将传递额外的参数，但我认为一旦我了解如何使下面的示例正常运行，我应该能够使用相同的逻辑根据需要简单地添加参数。

控制器：

```
@user = current_user.profile
@dogs = Dog.by_profile(params[@user.kids_under_10]) 
```

模型：

```
def self.by_profile(user_profile)
  Dog.where('kids_under_10 = ?', user_profile )
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:10:58.273

您的`@dogs`作业可能如下所示

```
@dogs = Dog.where(kids_under_10: @user.kids_under_10) 
```

不需要您的`by_profile`类方法。

* * *

如果您想保留类方法，您的控制器将如下所示

```
@user = current_user.profile
@dogs = Dog.by_profile(@user) 
```

和你的模型的类方法，像这样

```
def self.by_profile(user_profile)
  return [] if user_profile.nil?
  Dog.where(kids_under_10: user_profile.kids_under_10)
end 
```

# java - PMML 文档解析

> ID：13813479
> 
> 赞同：4
> 
> 时间：2012-12-11T04:08:15.730
> 
> 标签：java, xsd

我正在使用***jpmml***库来解析 PMML 文档（带有根元素 PMML 的 xml 文档）。我能够解析一些元素，但不是全部。在这里，我无法解析**RegressionTable**元素内的**CategoricalPredictor**属性。解析**CategoricalPredictor**的代码是：

 ****```
 RegressionTable regressionTable = new RegressionTable(intercept);
    List<CategoricalPredictor> categoricalPredictor=regressionTable.getCategoricalPredictors();

    /*Categorical predictors*/

    System.out.println("Categorical Predictors:");
    for(CategoricalPredictor c : categoricalPredictor){

        System.out.println("Name :"+c.getName()+",\tValue :"+c.getValue()+
                ",\tCoefficient :"+c.getCoefficient());
        System.out.println();
    } 
```

使用此代码，我得到的只是*分类预测器：*作为输出。

我应该怎么做才能得到它？你的努力将是可观的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:59:29.487

您正在调用`RegressionTable#getCategoricalPredictors()`一个新构造的`RegressionTable`实例。getter 返回一个 empty `List`，这是预期的行为。

如果要使用现有`RegressionTable`实例，则需要从 PMML 文件中加载它，如下所示：

```
PMML pmml = ...
RegressionModelManager regressionManager = new RegressionModelManager(pmml);
RegressionModel model = regressionManager.getModel();
List<RegressionTable> modelTables = model.getRegressionTables();
for(RegressionTable regressionTable : regressionTables){
  ...
} 
```****

# java - 获取java项目中的包列表

> ID：13813490
> 
> 赞同：1
> 
> 时间：2012-12-11T04:09:35.370
> 
> 标签：java, eclipse, namespaces, package

我正在使用下面的代码来获取给 java 项目中的包列表。但它也包括列表中的文件夹。请提出一种忽略文件夹的方法。

```
final IPackageFragmentRoot[] packageFragmentRootArray = workingJavaProject.getJavaProject().getAllPackageFragmentRoots();

for (final IPackageFragmentRoot packageFragmentRoot : pkgFrgmRoots) {
        if (!packageFragmentRoot.isArchive()) {
            for (final IJavaElement pkg : packageFragmentRoot.getChildren()) {
                if (pkg != null && !isEmpty(pkg.getElementName()) && pkg instanceof IPackageFragment) {
                    allPackages.add((IPackageFragment) pkg);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:16:26.250

IPackageFragment 可以是 IFiles、IFolders 或 IStorages 的实例化。一种可能的解决方案：

```
if (pkg != null && !isEmpty(pkg.getElementName()) && pkg instanceof IPackageFragment) {
    if (!(pkg instanceof IFolder)) {
        allPackages.add((IPackageFragment) pkg);
    }
} 
```

# php - customize sort up/down Yii CGridView button

> ID：13813494
> 
> 赞同：1
> 
> 时间：2012-12-11T04:10:03.563
> 
> 标签：php, sql, sorting, button, yii

so, I want to make a new button in my CGridView. This is up & down arrow buttons which is will be used for sorting my articles. I've read a lot of how to make this kind of buttons. I already read the wiki of how to use this CGridView button also in [this link](http://www.yiiframework.com/wiki/106/using-cbuttoncolumn-to-customize-buttons-in-cgridview/).

And now I have this in my view :

```
array(
                'header' => 'Action',
                'class' => 'CButtonColumn',
                'template' => '{moveup}{movedown}{view}{delete}',
                'htmlOptions' => array('style' => 'width: 68px'),
                'buttons' => array
                    (
                    'moveup' => array
                        (
                        'label' => 'Move Up',
                        'imageUrl' => Yii::app()->request->baseUrl . '/images/move_up.png',
                        'url' => 'Yii::app()->createUrl("KB/moveup", array("id"=>$data->KBID))',
                        'visible' => '$data->KBORDER == KB::model()->getMax()',
                    ),
                    'movedown' => array
                        (
                        'label' => 'Move Down',
                        'imageUrl' => Yii::app()->request->baseUrl . '/images/move_down.png',
                        'url' => 'Yii::app()->createUrl("KB/movedown", array("id"=>$data->KBID))',
                        'visible' => '$data->KBORDER == KB::model()->getMin()',
                    ),
                ),
            ), 
```

and this one in my model :

```
 public function getMax(){
            $sql = 'SELECT MAX(KBORDER) FROM KB';
            $max = Yii::app()->db->createCommand($sql);
            $max->queryAll();
            return $max;
        }

        public function getMin(){
            $sql = 'SELECT MIN(KBORDER) FROM KB';
            $min = Yii::app()->db->createCommand($sql);
            $min->queryAll();
            return $min;

} 
```

All that codes running just fine. except for the visibility. I want to make the up button become invisible when it has the highest value of KBORDER or when it position is in the 1st place. And for the down button, it supposed to be invisible too when it has the lowest value of KBORDER or when it position is in the last place. but, when I put that code in my 'visible', all the buttons are invicible. so my question is, **how to make my request happen?**

thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:31:06.387

首先，`queryAll`返回一个数组。[文档](http://www.yiiframework.com/doc/api/1.1/CDbCommand/#queryAll-detail)。因此，您可能应该使用[`queryScalar`](http://www.yiiframework.com/doc/api/1.1/CDbCommand#queryScalar-detail)，并且应该从函数返回结果，而不是命令对象。

```
 return $max->queryScalar(); 
```

你也可以在 Yii 中使用[统计查询。](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#statistical-query)

其次，你想在按钮分别不在顶部或底部时显示按钮，所以你应该否定`=`

> '可见' => '$data->KBORDER != KB::model()->getMax()',

和

> '可见' => '$data->KBORDER != KB::model()->getMin()',

# python - SQLAlchemy 只选择一列

> ID：13813496
> 
> 赞同：1
> 
> 时间：2012-12-11T04:10:15.173
> 
> 标签：python, sqlalchemy

尝试通过以下方式从 pg_shadow 表中选择一列：

```
role_tbl = Table('pg_shadow', MetaData(engine), autoload=True)
db.query(role_tbl.c.passwd).filter_by(usename='name') 
```

并得到一个错误：

> *** AttributeError: 'NoneType' 对象没有属性 'class_'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:11:42.187

试试这个：

```
role_tbl.select([role_tbl.c.passwd]).where(username=='name').execute().fetchall() 
```

或者此表中可能没有这样的列。

您可以通过打印所有列来检查它

```
print role_tbl.columns 
```

PS而且您还应该使用元数据的一个实例： MetaData(engine) （它应该存储有关所有表的信息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-17T20:31:10.147

该错误是[查询中没有实体](http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.filter_by)的结果：

> 关键字表达式是从查询的主要实体或作为调用目标的最后一个实体中提取的`Query.join()`。

其中实体是映射类或`Table`对象，但您查询的是单个列。过滤的正确方法是：

```
db.query(role_tbl.c.passwd).filter(role_tbl.c.usename == 'name') 
```

在更新版本的 SQLAlchemy 中，错误是：

```
NoInspectionAvailable: No inspection system is available for object of type <class 'NoneType'> 
```

# jquery - Ajax: div wouldn't get updated

> ID：13813504
> 
> 赞同：0
> 
> 时间：2012-12-11T04:11:09.433
> 
> 标签：jquery, ajax

Can somebody tell me what's wrong with the following code? It always updates to a new page, instead of the "content" div. Thanks.

```
This is a test:<br />
   <a href="/form" onclick="return updateContent()">Click me</a>
     <div id="content">
       Update here.
   </div>

<script>
function updateContent() {
  $.ajax({
    type: 'GET',
    url: $(this).attr('href'),
    success: function(data) {
      $('#content').html(data);
    };
 });
};
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:18:50.653

由于您使用的是 jQuery，因此您不妨正确使用它。您的链接正在执行链接应该执行的操作，因为您没有任何东西可以取消链接的默认行为。

改变：

```
<a href="/form" onclick="return updateContent()">Click me</a> 
```

至

```
<a href="/form">Click me</a> 
```

并将您的 jQuery 更改为：

```
$('a').click(function(e) {
    e.preventDefault();
    $.ajax({
        type: 'GET',
        url: $(this).attr('href'),
        success: function(data) {
            $('#content').html(data);
        };
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:23:49.143

梁棠。您的 javascript 代码中有语法错误：

```
success: function(data) {
  $('#content').html(data);
}; 
```

之后就不需要`;`了`}`。无论如何，这是正确的答案。也不要在 HTML 标记中使用像 onclick 这样的内部事件。让 javascript/jquery 为您处理它们。

```
This is a test:<br />
<a href="form.html" id="link">Click me</a>
<div id="content">
Update here.
</div>

<script>
$(function () {
    $('#link').bind('click', function (e) {
        e.preventDefault();

        $.ajax({
            type: 'GET',
            url: $(this).attr('href'),
            success: function(data) {
              $('#content').html(data);
            }
         });
    });
});
</script> 
```

**解释**
1\. 我给你的链接一个特定的 ID。所以我可以在 jquery 代码中访问它。
2.在`click`链接的情况下，我取消链接行为（带`e.preventDefault()`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T04:14:45.053

Instead writing `<a href="/form" onclick="return updateContent()">Click me</a>`, write the following.
`<span style="cursor:pointer;" onclick="return updateContent()">Click me</span>`
The above will work.

# javascript - Unsafe JavaScript attempt to access frame with URL when using Twitter/Facebook

> ID：13813518
> 
> 赞同：0
> 
> 时间：2012-12-11T04:13:32.227
> 
> 标签：javascript, twitter, cross-domain, facebook-javascript-sdk

I am building a website using the Twitter and Facebook JavaScript SDKs. I am attempting to perform tweets and facebook shares from the site. But I am getting the following error when I try to send a tweet OR facebook share from my website:

Chrome:

```
Unsafe JavaScript attempt to access frame with URL http://edro.no-ip.org:3000/#_=_ from frame with URL http://platform.twitter.com/widgets/tweet_button.1354761327.html#_=1355186876357&count=none&id=twitter-widget-0&lang=en&original_referer=http%3A%2F%2Fedro.no-ip.org%3A3000%2F%23_%3D_&related=xbox%3AGhostfire%20Games&size=m&text=Check%20out%20this%20fun%20story!%20%23atalltale&url=http%3A%2F%2Fedro.no-ip.org%3A3000%2Fstories%2FiqU9xW1FJI. The frame requesting access set 'document.domain' to 'twitter.com', but the frame being accessed did not. Both must set 'document.domain' to the same value to allow access. 
```

Safari:

```
Unsafe JavaScript attempt to access frame with URL http://edro.no-ip.org:3000/ from frame with URL http://platform.twitter.com/widgets/tweet_button.1354761327.html#_=1355197702032&count=none&id=twitter-widget-0&lang=en&original_referer=http%3A%2F%2Fedro.no-ip.org%3A3000%2F&related=xbox%3AGhostfire%20Games&size=m&text=Check%20out%20this%20fun%20story!%20%23atalltale&url=http%3A%2F%2Fedro.no-ip.org%3A3000%2Fstories%2FiqU9xW1FJI. Domains, protocols and ports must match. 
```

Here's the code (I only included the relevant parts):

```
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="https://www.facebook.com/2008/fbml">

<head>
    <title>Title</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body>
</body>

<center>
    <h1><a href="/">Page Header</a></h1>
    &nbsp
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>

    <div id="fb-root"></div>

    <script type="text/javascript">

    // Once the Facebook SDK is fully loaded, this callback will be invoked
    window.fbAsyncInit = function()
    {
     FB.init({
      appId: "250634021702621",
      status: true,
      cookie: true,
      channelUrl: '//edro.no-ip.org:3000/channel.html',
     });
     FB.Event.subscribe('auth.statusChange', handleStatusChange);
    };

    // Callback for once we are logged in and authorized
    function handleStatusChange(response) {
     document.body.className = response.authResponse ? 'connected' : 'not_connected';
     if (response.authResponse)
     {
     }
    };

    // Declare a generic SDK loading function
    var loadSDK = function(doc, script, id, src)
    {
     var js, fjs = doc.getElementsByTagName(script)[0];
     if (!doc.getElementById(id))
     { 
      js = doc.createElement(script);
      js.id = id;
      js.src = src;
      js.async = true;                      // Makes SDK load asynchronously
      fjs.parentNode.insertBefore(js,fjs);
     }
    };

    // Twitter SDK loading
    loadSDK(document, 'script', 'twitter-wjs', 'https://platform.twitter.com/widgets.js');

    // Facebook SDK loading
    loadSDK(document, 'script', 'facebook-jssdk', '//connect.facebook.net/en_US/all.js');

    // Facebook callback - useful for doing stuff after Facebook returns.  Passed as parameter to API calls later.
    var myResponse;
    function callback(response)
    {
     if (response)
     {
      // For debugging - can query myResponse via JavaScript console
      myResponse = response;
      if (response.post_id)
      {
      }
      else
      {
       // Else we are expecting a Response Body Object in JSON, so decode this
       var responseBody = JSON.parse(response.body);
       // If the Response Body includes an Error Object, handle the Error
       if(responseBody.error)
       {
       }
       // Else handle the data Object
       else
       {
       }
      }
     }
    }
    // All API calls go here
    $(document).ready(function ()
    {               

     // Post to your wall
     $('#post_wall').click(function ()
     {
      FB.ui(
       {
        method: 'feed',
        // useful if we want the callback to go to our site, rather than the JavaScript, so we can log an event
        redirect_uri: 'http://edro.no-ip.org:3000',
        link: 'http://edro.no-ip.org:3000/stories/{game.id}',
        picture: 'http://fbrell.com/f8.jpg',
        name: 'name',
        caption: 'caption',
        description: 'description'
        // display: 'popup'
       },
       callback
      );
      return false;
     });
    });</script>

    <!-- Tweet code-->
    <a href="https://twitter.com/share" data-lang="en" data-count="none" data-related="xbox:Ghostfire Games" data-text="test" data-url="http://edro.no-ip.org:3000/stories/iqU9xW1FJI" class="twitter-share-button">Tweet</a>

    <!-- Facebook share code-->
    <p id="msg"><a href="#" id="post_wall">Share on Facebook</a></p>
</center>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T09:23:28.480

“域、协议和端口必须匹配。” （旧版本？）Safari 中的典型不匹配是[http://www.example.com](http://www.example.com)和[http://example.com](http://example.com)。

# javascript - 如何使用jQuery计算开始缩放的原点？

> ID：13813519
> 
> 赞同：0
> 
> 时间：2012-12-11T04:13:43.537
> 
> 标签：javascript, jquery, zooming

![缩放插图](../Images/75269d7fb41bcfd3ebcaccc6a2766282.png)

目前，缩放动作如上图所示。我想在底部图中实现缩放动作。该点是缩放原点。目前的代码是：

```
 $("#popup").css("width",ui.value+"%");
    $("#largeText").css("width",ui.value+"%");
        $("#largeImg").css("width",ui.value+"%"); 
```

其中 UI 值是以百分比为单位的宽度（例如，宽度：100%，宽度：200%） 高度设置为自动。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:46:18.013

我不知道这是否会给你答案，但这里有一个动画的例子

这是一个例子：http: [//jsfiddle.net/pRccr/6/](http://jsfiddle.net/pRccr/6/)

```
<div class="global">
<div class="item"></div> 
```

​</p>

CSS :::::::

```
.global {
      width:600px;
      height:600px;    
      background-color:#ff00ff;
      position:relative;
    }

    .item{
      position:absolute;
      width:3px;
      height:3px;
      background-color:#000;   
    } 
```

JAVASCRIPT :::::

```
var start_size = 20;

var timer=setInterval(function(){

     start_size ++;

        $('.item').css('height',start_size+'px');
        $('.item').css('width',start_size+'px');

        $('.item').css('top', ($('.global').height()/2 - $('.item').height()/2) +'px');
        $('.item').css('left', ($('.global').width()/2 - $('.item').width()/2)+'px');

}, 50);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:18:31.823

这将取决于您的元素在页面上的位置。我希望，要在图像中获得您想要的结果，您必须将元素在页面上垂直和水平居中。

```
margin:auto auto;
width:?px;
height:?px; 
```

# image - Image/Picture on a messagebox C#

> ID：13813521
> 
> 赞同：2
> 
> 时间：2012-12-11T04:14:07.013
> 
> 标签：image, messagebox

Is it possible to add a picture to a messagebox in C# besides the customized buttons?

or

How do I put the picture I want as a custom Icon?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:29:24.817

这不可能。

相反，您可以使用 a`Form`来显示图像。您的消息框将与您的应用程序中的任何其他表单一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T08:55:56.717

在使用 C# 编码时拥有这种类型的工具很有用，但现实情况是它并不像我们想象的那么重要。

一个好的做法是使用表单而不是把东西放在 MessageBox 中。

试试看，希望有帮助！！

# android - Android 中的 SD 卡内容

> ID：13813522
> 
> 赞同：2
> 
> 时间：2012-12-11T04:14:13.720
> 
> 标签：android, file, sd-card

我的应用程序将文本文件写入手机的外部存储。我知道它工作正常，因为我可以通过文件管理器找到该文件。令我难过的是：我可以通过手机上的文件管理器看到文件已在 SD 卡上创建。当我启用 USB 存储并将其连接到我的计算机时，我看不到文本文件。

路径是：“mnt/sdcard/test.txt”

我可以在我的手机上看到它。当我将 sd 卡安装到我的计算机时，我看不到它。

为什么是这样？

用户权限已正确设置。否则即使在手机上也看不到文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:39:50.750

如果您同意连接 USB 存储，则 SD 卡将被卸载，并且它对 Android 不可见，并且仅作为 USB 存储设备连接到连接的 USB 端口。

如果您是开发人员并且想要调查设备上的文件，您应该连接您的设备并`adb`像这样使用

```
adb shell ls /mnt/sdcard 
```

没有错，您只是错过了 Android 的真正功能以及您应该如何将终端连接到设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T15:39:49.127

插入以下代码行将文件输出到 SD 卡：

```
FileOutputStream f = new FileOutputStream(file);
Finally step 7: 
```

在 SD 卡中保存 txt 文件的位置或方法中

保存文件，然后编译它并使用 Android 模拟器软件或设备测试应用程序。

这可以工作！！！;-)

# wpf - Prism 区域可以拖动吗？

> ID：13813527
> 
> 赞同：1
> 
> 时间：2012-12-11T04:15:06.360
> 
> 标签：wpf, c#-4.0, prism

如何使 Prism 区域的边界可拖动？

到目前为止，边界是在 xaml 中分配的。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:26:33.097

在 Avalon 停靠文档面板中托管了一个区域。

# javascript - jQuery - Set style of object with '::' in name

> ID：13813529
> 
> 赞同：1
> 
> 时间：2012-12-11T04:15:22.587
> 
> 标签：javascript, jquery, css

I am customising the look of an *input-range* and the slider object which I have done successfully with this CSS:

```
input[type="range"] {
    -webkit-appearance: none !important;
    background: rgba(1,1,1,0.3);
    height:6px;
    border: solid 1px #000;
    border-bottom: solid 1px #1d1d1d;
    border-radius: 6px;
    width: 48px;
    margin: 0;
    margin-bottom: 4px;
    display: block;

}

input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none !important;
    background: -webkit-linear-gradient(top, #a2a2a2 0%,#8b8b8b 50%,#7b7b7b 100%);
    height:10px;
    width:10px;
    box-shadow: inset 0 1px 0 #C4C4C4;
    border-radius: 10px;
} 
```

This code works 100%, however what I want to do I be able to change the background color of the slider (*input[type="range"]::-webkit-slider-thumb*) with jQuery.

I've been able to change the border of the main box with:

```
$('input#volume').css('background', '#FFFFFF'); 
```

But I can't figure out how to get the slider with jQuery. Thanks

(FYI I am only targeting Safari (WebKit) on a Mac hence the lack of other browser support, its for an application)

# php - How to automatically resubmit form

> ID：13813530
> 
> 赞同：0
> 
> 时间：2012-12-11T04:15:44.660
> 
> 标签：php, html

My site uses a combo of sessions and get/post.

When user hits back button, it says "confirm you want to resubmit form" or a similar message, depending on the browser. Then the user has to also refresh the page.

How can I make it automatically resubmit form. I don't want users seeing this message and getting stuck when they hit back.

I have PHP + HTML

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:19:05.663

您可以在发布方法重新提交消息中使用 get 方法，如果您想使用发布方法，则在服务器页面上使用标题，例如`header('location:index.php')`并更改您想要的索引页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:20:33.167

不回答您的问题，但请重新考虑。

POST 动作应该改变服务器的状态。GET 操作应该是透明的。如果您使用 POST 提交数据以提交到数据库或发射核导弹或其他任何内容，则存在重新提交警告是有原因的：想象一下当您发射两枚核导弹但只尝试发射一枚时您的尴尬。

另一方面，根据其规范，GET 操作永远不会对世界产生有意义的影响，因此重新提交是安全的。如果允许用户返回某些内容，则它是一个 GET 页面。POST 页面不应该可以使用后退按钮返回（或者更确切地说，应该让用户知道它）。

如果您必须取消此警告，则说明您做错了。

# python - (Python) 直到 a == b

> ID：13813537
> 
> 赞同：1
> 
> 时间：2012-12-11T04:17:04.613
> 
> 标签：python, equals, repeat

当然有办法，但我不知道。谁能告诉我如何一遍又一遍地运行某行代码，直到一个变量等于另一个变量。基本上我正在编写一个简单的程序，它随机生成两个数字，并且在两个数字彼此相等之前不会停止。我知道，这只是一个简单的、毫无意义的程序，但知道这将有助于我进一步编程。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T04:20:17.097

这是一种方法

```
n1 = 0
n2 = 1
while n1 != n2:
    n1 = my_random_function()
    n2 = my_random_function() 
```

或者

```
while True:
    a = random_function()
    b = random_function()
    if a == b:
        break 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T04:19:19.507

做

```
while a != b:
    # do stuff 
```

# c++ - 复制 C++ 代码中的构造函数、指针、真假问题

> ID：13813543
> 
> 赞同：-2
> 
> 时间：2012-12-11T04:17:35.800
> 
> 标签：c++, pointers, copy

我知道 C++，所以如果有人能帮助我解决这些 TorF 问题，那就太好了。

**对或错：**使用 C++，类的复制构造函数仅在将值传递给函数输入时使用。

**对或错：**以下 C++ 函数`madeA()`是有效的函数实现。

```
ClassA{
public:
    int x;
    char *y;
};
void madeA(const A &t_a){
    t_a.x = 1;
    t_a.y = 0;
} 
```

**对或错**：以下 C++ 代码段是等效的。

```
void cmax(int a, int b, int *max){
    if(a>b) *ax = a;
    *max = b;
}

using namespace std;

void main(){
    int *max = new int;
    cmax(20, 5, max);
    cout<< *ax << endl;
} 
```

下一个代码：

```
void cmax(int a, int b, int &max){
    if(a>b) max = a;
    max = b;
}

void(){
    int max;
    cmax(20, 5, ax);
    std::cout <<max<<std::endl;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:20:22.757

**第一：假**。
拷贝构造函数可以在需要拷贝的任何时候被调用。
简单示例：按值返回

**第二：假**。
您正在修改对`const`参数的引用的内容。它不应该编译，即使你使用一些指针黑客，它也会导致**Undefined Behavior**。

**第三：假**。
首先有内存泄漏，其次没有。
第二个代码片段甚至无法编译。

# jquery - 我可以从我的 JQuery 结果中完全删除一个元素吗？

> ID：13813546
> 
> 赞同：0
> 
> 时间：2012-12-11T04:17:54.507
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:19:54.727

`a.find('small').remove();`将删除`small`标签及其内容。
[**演示**](http://jsfiddle.net/pCpzT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:18:42.043

尝试：

```
a = li.parent().parent().children("a, span:not('.toggle')");
var text2 = a.text(); 
```

[http://api.jquery.com/text/](http://api.jquery.com/text/)

# html - 在保持透视的同时以像素分辨率使用 WebGL 画布

> ID：13813549
> 
> 赞同：0
> 
> 时间：2012-12-11T04:18:12.503
> 
> 标签：html, canvas, html5-canvas, webgl, pixel

我以前在这里看到过这种类型的问题，但没有一个给我完整的答案，所以我将发布我的代码，看看是否有人能给我任何见解。基本上，这段代码有效，但我有一个神奇的 z 偏移 (height * 1.205) [与宽度无关]，我不知道为什么。

设置大小并创建对齐向量：

```
gl.viewportWidth = gl.canvas.width;
gl.viewportHeight = gl.canvas.height;
gl.viewportHalfWidth = gl.viewportWidth / 2;
gl.viewportHalfHeight = gl.viewportHeight / 2;
gl.viewportAspect = gl.viewportWidth / gl.viewportHeight;
gl.viewportZoom = -gl.viewportHeight * 1.205;
if (gl.alignmentTest) {
    gl.alignmentVertices = (new Buffer(    // TL, TM, BM, BR, TR, BL, TL
       [    1.0,                        -1.0,                    0.0,
        gl.viewportHalfWidth - 0.5,     -1.0,                    0.0,
        gl.viewportHalfWidth - 0.5, -(gl.viewportHeight - 1.0),  0.0,
        gl.viewportWidth - 1.0,     -(gl.viewportHeight - 1.0),  0.0,
        gl.viewportWidth - 1.0,         -1.0,                    0.0,
            1.0,                    -(gl.viewportHeight - 1.0),  0.0,
            1.0,                        -1.0,                    0.0], 3)).post();
} 
```

绘制对齐向量：

```
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT); 
gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
mat4.perspective(45, gl.viewportAspect, 0.1, 1000.0, gl.perspective.current);
gl.perspective.post();    // ^ writes directly to current perspective buffer

gl.modelView.resetToIdentity();

gl.enable(gl.BLEND);
gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);

// Translate to pixel resolution
gl.modelView.push();
gl.modelView.translate([-gl.viewportHalfWidth, gl.viewportHalfHeight, gl.viewportZoom]);
gl.modelView.post();

// Alignment test?
if (gl.alignmentTest && gl.alignmentVertices) {
    gl.red.useAsAttribute(gl.shaderProg.vertexColour);
    gl.zero.vec2.useAsAttribute(gl.shaderProg.vertexTextureCoord);
    gl.alignmentVertices.drawAsPrimitives(gl.shaderProg.vertexPosition, gl.LINE_STRIP);
}

gl.disable(gl.BLEND); 
```

有问题的行是：

```
gl.viewportZoom = -gl.viewportHeight * 1.205; 
```

和：

```
gl.modelView.translate([-gl.viewportHalfWidth, gl.viewportHalfHeight, gl.viewportZoom]); 
```

此代码适用于*任何*尺寸。

这是 700x300 的屏幕截图：http: [//oi49.tinypic.com/2my9ir7.jpg](http://oi49.tinypic.com/2my9ir7.jpg)

[另一个是 400x600： http](http://oi46.tinypic.com/i2irh3.jpg) ://oi46.tinypic.com/i2irh3.jpg

所以问题是：为什么会存在 1.205 这个神奇的比例因子？或者我可能做错了什么以使其成为必要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T05:34:09.177

我还没有计算出数学，但我猜这个因素来自你的*透视*投影矩阵的 FOV 和近平面。大多数试图获得 1:1 像素的应用程序也不使用透视投影。

如果你有理由使用透视，那么我建议不要使用基于 FOV 的透视计算，而是使用基于平截头体的（`glFrustum`-alike）——实际上更容易得出投影平截头体的效果，并且你可以计算出该校正从第一原则考虑因素，而不是手动调整它。

* * *

这本质上是一个三角问题。想象一下视锥体，或者更确切地说是视图金字塔（即不被近平面和远平面切断）；它的尖端位于“相机位置”和四个倾斜面。传统定义的 FOV 等于顶面和底面之间的角度（这就是为什么，正如您所提到的，宽度没有影响）。但是，出于您的目的，您关心的参数不是角度，而是*斜率*（Z 与 X 或 Y 运动的比率）——这是您的任意数字的来源。

如果我们查看[好的 ol' 文档`gluPerspective`](http://www.opengl.org/sdk/docs/man2/xhtml/gluPerspective.xml)（我将假设它使用与您的透视操作相同的数学），它会说： `f = cotangent(fovy/2)`. 这正是我们关心的计算。（如果试图重现这一点，请注意数学库中的大多数三角函数都以弧度表示角度，而不是度数。）

之所以会出现 2 的因素，是因为 FOV 通常是作为全视角测量的，但感兴趣的值是全视角的一半——“正前方”和“就在视图边缘”之间的角度。

您可能知道，余切（或正切）函数的值可以解释为斜率。上面的斜率*f*准确地告诉您 Z 运动和 X 或 Y 运动之间的比率；例如，如果您将对象缩放某个值`d`，并沿 Z 轴移动`f*d`，那么它似乎不会改变大小。这可能正是您`viewportZoom`已经在做的事情：

```
f / 2 = cot(45° / 2) / 2 ≈ 1.207106 
```

这非常接近您的 1.205。如果情况确实如此，我还没有弄清楚因子 2 的来源。

您需要做的就是计算`f`一次（或者可能是它的倒数`tan(fovy/2)`，具体取决于最终哪个更方便）并使用它来计算“缩放”距离和投影矩阵。

* * *

（顺便说一句，您的代码包含很多不是 WebGL 的东西，例如`Buffer`、`post`、`drawAsPrimitives`等。如果您提到您正在使用的库，这可能会有所帮助。）

# python - django - 用于匹配 url 安全 base64 字符串的 url 模式

> ID：13813551
> 
> 赞同：2
> 
> 时间：2012-12-11T04:18:20.340
> 
> 标签：python, regex, django

我在用

```
import base64
string_for_url = base64.urlsafe_b64encode(string_to_format) 
```

但我不确定如何在 url 模式中匹配生成的字符串。我找到了这个正则表达式：`(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$`但我不明白如何将其转换为命名组。如您所知，我的正则表达式知识非常有限。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T05:01:04.663

命名一个组，以便将其传递给您的视图方法，并在其前面加上`(?P<name_of_variable>(group to name))`. 顺便说一句，这不是 django 特有的，它是标准 Python[正则表达式语法](http://docs.python.org/2/library/re.html#regular-expression-syntax)的一部分。

对于您的示例，它将是：

```
base64_pattern = r'(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$'
urlpatterns = patterns('',
    (r'^foo/bar/(?P<base64string>{})'.format(base64_pattern), 'mymethod'),
    # your other patterns
)

# in the view

def mymethod(request, base64string):
   # do stuff with base64string 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T05:01:53.233

该正则表达式似乎不必要地复杂。

我的 Django 生锈了，但你应该能够做到：

```
urlpatterns = patterns('',
    (r'things/(?P<b64_string>.+)', views.b64_view, name='b64_view')
) 
```

这将匹配看起来像 www.example.com/things/abc123= 的任何内容，并将 'abc123=' 传递到 views.b64_string 视图的 b64_string 参数中。

然后，您可以通过尝试对其进行解码来测试它是否被 b64 编码。这比尝试找到与 b64 编码字符串匹配的正则表达式要简单得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-24T08:33:06.697

从 2.0 开始，djano在 url 路径中使用[捕获的值。](https://docs.djangoproject.com/en/2.1/topics/http/urls/#example)

```
urlpatterns = [
  path('articles/2003/', views.special_case_2003),
  path('articles/<int:year>/', views.year_archive),
] 
```

当然，如果内置路径转换器 ( `str`, `int`, `slug`, `uuid`, `path`) 不够具体，您仍然可以使用正则表达式。在 url-safe base 64 编码的情况下，slug 可能匹配，但如果你需要`.`，`=`然后`~`你可以定义你自己的：

转换器.py

```
class b64Converter:
    # decide on complexity of your b64 regex by
    # referring to https://stackoverflow.com/a/475217
    regex = 'define_your_regex here'

    def to_python(self, value):
        return base64.urlsafe_b64decode(value)

    def to_url(self, value):
        return base64.urlsafe_b64encode(value) 
```

然后是 urls.py：

```
from django.urls import path, register_converter
from . import converters, views

register_converter(converters.b64Convertor, 'b64')

urlpatterns = [
    path('widgets/<b64:my_url_param>/', views.widgetview),
    ...
] 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-11T04:49:10.790

这个怎么样：`(?P<string_to_format>[0-9A-Za-z]+)`

# sql - 在 sql server 中使用 empty(NULL) int 数据类型

> ID：13813554
> 
> 赞同：2
> 
> 时间：2012-12-11T04:18:36.203
> 
> 标签：sql

如何选择插入为 NULL 的 int 数据类型字段（奖励）？

尝试了以下但没有打印任何内容，尽管有一个有效的条目。

```
select e_name from employee, payroll where datepart(year,hire_date)=2005 and employee.e#=payroll.e# and bonus=null 
```

另外，如果我想再添加一年，比如说 2007 年与 2005 年一起使用 or 进行检查，那么查询是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T04:21:58.337

测试 null 时，您必须使用以下语法：

```
... 
and bonus is null 
```

*仅供参考，如果不*为空，则测试的语法是`bonus is not null`.

所有其他比较（例如 =、<、like 等）将返回 false 和 null 值。

# php - 单选按钮验证 u

> ID：13813558
> 
> 赞同：0
> 
> 时间：2012-12-11T04:18:52.317
> 
> 标签：php, javascript, jquery, ajax

我正在尝试使用 Javascript 验证单选按钮。但我无法得到它。任何人都可以帮我解决这个问题。我在下面附上了我的代码。谢谢。

```
<form action="submitAd.php" method="POST" enctype="multipart/form-data" name="packages" onsubmit="return checkForm()">
    <div id="plans_pay">
            <input  type="radio" name="group1" id="r1" value="Office"  onchange="click_Pay_Office()"  style="float:left;margin-top:20px;font-size:72px;">
            <label style="float:left; margin-top:20px;" for="pay_office">At Our Office</label>
            <img style="float:left;margin-bottom:10px;"  src="images/Pay-at-office.png" />
          </div>
      <div id="plans_pay">
                    <input style="float:left;margin-top:20px;font-size:72px;" type="radio" name="group1" id="r2" value="HNB"  onchange="click_Pay_Hnb()">
                <label style="float:left; margin-top:20px;" for="pay_hnb">At Any HNB Branch</label>
               <img style="float:left;margin-bottom:10px;"  src="images/HNB.png" />
        </div>
</form> 
```

**Javascript**

```
function checkForm(){

    if( document.packages.pso.checked == false && document.packages.pso1.checked == false && document.packages.ph.checked == false && document.packages.ph2.checked == false && document.packages.ph3.checked == false  && document.packages.pl.checked == false && document.packages.p3.checked == false && document.packages.p4.checked == false && document.packages.p5.checked == false && document.packages.p6.checked == false ){

        alert('Please Select At Least One Package');
        return false;

    }
    if(  document.packages.pso.checked == false && document.packages.pso1.checked == false && document.packages.ph.checked == false && document.packages.ph.checked == false && document.packages.ph2.checked == false && document.packages.ph3.checked == false  && document.packages.pl.checked == false && document.packages.p3.checked == false  && document.packages.p4.checked == false  && document.packages.p5.checked == false && document.packages.p6.checked == false){

        alert('Please Select At Least One with the Advertise online option in premium package');
        return false;

    }
    if(document.getElementById('words').value==''){
        alert("Please Enter the Texts");
        return false;

    }

    if(document.getElementById('r1').checked==false && document.getElementById('r2').checked==false){
        alert("Please Select a Payment Method");
        return false;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:45:00.957

与其在事件**onsubmit**的**表单标签**中调用函数**checkForm()**，不如在提交按钮中使用它

 ****```
<input type="submit" name="submit" value="submit" onClick="return checkForm()" /> 
```

它将更好地工作并根据需要输出。****

# scala - 在 Scala 中使用磁铁 uri 下载文件

> ID：13813567
> 
> 赞同：2
> 
> 时间：2012-12-11T04:19:48.313
> 
> 标签：scala, bittorrent, magnet-uri

我想在我的 Scala 应用程序中包含一些 bittorrent 功能。如果可以的话，我想专门使用磁力链接，因为它们易于使用。问题是我想使用像[ttorrent](https://github.com/turn/ttorrent)这样的预建库。但是，我发现这些库不使用磁力链接，它们使用元信息或种子文件本身。

所以我认为我的第一步是获取磁力链接并自己构建一个元信息对象。我非常了解磁力链接的构成，并且可以将其解析为参数。**我只是不太确定如何使用磁铁参数。我不知道该怎么处理他们。**

这只是我在 PB 上找到的一个测试磁铁链接：

```
magnet:?xt=urn:btih:ad11eb1a0aeed57116225fb341dc61883c22aeba&dn=Rise.of.the.Guardians.2012.TS.NEW.SOURCE.x264.AAC-UNiQUE&tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&tr=udp%3A%2F%2Ftracker.publicbt.com%3A80&tr=udp%3A%2F%2Ftracker.istole.it%3A6969&tr=udp%3A%2F%2Ftracker.ccc.de%3A80 
```

解析后我得到：

```
xt=urn:btih:ad11eb1a0aeed57116225fb341dc61883c22aeba
dn=Rise.of.the.Guardians.2012.TS.NEW.SOURCE.x264.AAC-UNiQUE
tr=udp://tracker.openbittorrent.com:80
tr=udp://tracker.publicbt.com:80
tr=udp://tracker.istole.it:6969
tr=udp://tracker.ccc.de:80 
```

很简单。现在我没有过多地使用哈希，但我很确定我不能直接从中获取任何信息。我唯一的猜测是我可能必须联系其中一个跟踪器来获取元信息。不过我不确定。

[fyi] 洪流将仅用于合法共享，在应用程序用户之间共享应用程序数据和应用程序文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-23T05:52:39.200

根据客户需要的信息哈希检索元数据

1.  能够找到对等点，在这种情况下[通过 UDP 跟踪器 (BEP 15)](http://bittorrent.org/beps/bep_0015.html) *
2.  支持[扩展协议 (BEP 10)](http://bittorrent.org/beps/bep_0010.html)
3.  通过扩展协议支持[元数据交换 (BEP 9)](http://bittorrent.org/beps/bep_0009.html)

因为根据它的自述文件，ttorrent 没有实现 BEP 9 和 10，它不能使用磁力链接。

[*] HTTP 跟踪器和 DHT 是其他来源，需要它们自己的协议，但与本示例无关

# jquery - 如何拦截 jQuery 实时点击事件？

> ID：13813570
> 
> 赞同：2
> 
> 时间：2012-12-11T04:19:53.463
> 
> 标签：jquery, wordpress

我正在使用 WordPress 并使用一个库，该库在页脚加载其 Javascript 文件，使用`<script src>`.
这是我需要阻止的代码：

```
var $ =jQuery.noConflict();
jQuery(document).ready(function($) 
{
    jQuery('.at-delete_image_button').live('click', function(e)
    {
        data = { /* ... */ };
        $.getJSON(ajaxurl, data, function(response) { /* ... */ });
        return false;
    });
}); 
```

之后`<script src>`，我正在打印以下内容，但它不起作用：

```
<script type="text/javascript">
jQuery(document).ready( function($) 
{
    $('.at-delete_image_button').live('click', function (e){
        e.preventDefault();
        e.stopPropagation();
    });
});
</script> 
```

从我找到之前的代码的[同一个问答](https://stackoverflow.com/q/7752114/1287812)`.die('click');`中，我也尝试了该方法但没有成功。

**[更新]**

我忘了添加 DOM 屏幕截图。
[![dom 截图](../Images/f292771a9c223b99a5534cecf5120af2.png)](https://i.stack.imgur.com/tlhq2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T04:32:41.460

您不能`preventDefault()`来自`.live()`处理程序，因为事件在到达处理程序时已经传播`.live()`。您需要直接在实际对象本身或父对象上（不使用`.live()`）有一个处理程序。

如果有一个不是动态创建的父对象，您可以在该父对象处停止传播，然后它不会到达对象`.live()`上的处理程序`document`。

你可以这样做：

```
jQuery(static parent selector).on('click', '.at-delete_image_button', function(e) {
    // stop propagation up the parent chain so the click event never gets 
    // to the `document` object where .live() would process it
    e.stopPropagation();
}); 
```

`static parent selector`是一个匹配所有`'.at-delete_image_button'`对象的静态父对象的选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T04:45:25.017

我会从另一个方向来处理它，然后加入 AJAX 操作并取消它。

```
add_action('wp_ajax_their_action', 'my_cancel_their_action', 1);
add_action('wp_ajax_nopriv_their_action', 'my_cancel_their_action', 1);

function my_cancel_their_action() {
    exit;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T04:35:19.647

您必须使用`e.stopImmediatePropagation()`来阻止相同元素的其他处理程序执行。请记住，您自己的处理程序必须在另一个处理程序**之前编写。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-16T11:13:48.960

死是最好的解决办法。但在你调用它之前，你必须确保它被称为 AFTER plugin bind click it with live。

为此，您可以使用插件提供的一些回调。您还可以在下载脚本时添加侦听器，并在使用 die() 之前添加少量超时，但这在超时和插件绑定单击事件之间存在竞争问题。使用 preventImmediateDefault() 你跑到同一场比赛 - 你会比插件更快吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T04:35:22.497

您可以通过使用 css 在此按钮上放置一个隐藏层来尝试一些技巧，或者如果它与您的 css 不冲突，则重命名该类。它认为这是一种可能且安全的方式

# php - 显示隐藏动态生成的文本框与动态创建的选择字段的 onchange

> ID：13813572
> 
> 赞同：2
> 
> 时间：2012-12-11T04:19:58.133
> 
> 标签：php, javascript, html

我想使用 MySQL、PHP、JS 和 HTML 动态生成如下表：

```
___________________________________________
[] |   Please Select Service  |  Text Box |
-------------------------------------------
    Add Row         Delete Row 
```

所以第一列是一个用于行删除的复选框。第二列是一个从数据库动态填充的选择框，默认情况下，第三列是隐藏的，当未选择“其他”时选择“其他”并隐藏时显示。因此，当按下“添加行”时，它将如下所示：

```
___________________________________________
[] |   Please Select Service  |  Text Box |
-------------------------------------------
___________________________________________
[] |   Please Select Service  |  Text Box |
-------------------------------------------
    Add Row         Delete Row 
```

我的问题是我只能隐藏/显示第一个文本框，除非在按下“添加行”时第一个文本框已经显示，如果发生这种情况，新文本框将显示但无法隐藏，“添加行" 和 "删除行" 按钮的功能与其名称状态相同。我猜它与选择字段中最后一个选项元素关联的值有关。

下面可以看到 addRow、deleteRow 和 hide/show 函数的代码片段，以及我用来显示它的 HTML。

**JS**

```
var boxCount = 1;
    function addRow(tableID) {

        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var colCount = table.rows[0].cells.length;

        for(var i=0; i<colCount; i++) {

            var newcell = row.insertCell(i);

            var theSelect = document.getElementById('services');
            var lastValue = theSelect.options[theSelect.options.length - 1].value;

            newcell.innerHTML = table.rows[0].cells[i].innerHTML;
            switch(newcell.childNodes[0].type) {
                case "text":
                        newcell.childNodes[0].value = "";
                        newcell.childNodes[0].id = "otherService" + boxCount;
                        break;
                case "checkbox":
                        newcell.childNodes[0].checked = false;
                        break;
                case "select-one":
                        newcell.childNodes[0].selectedIndex = 0;
                        newcell.childNodes[0].options[lastValue].value = boxCount;
                        break;
            }
        }
    }
    function deleteRow(tableID) {
        try {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;

        for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
                if(rowCount <= 1) {
                    alert("Cannot delete all the rows.");
                    break;
                }
                table.deleteRow(i);
                rowCount--;
                i--;
            }

        }
        }catch(e) {
            alert(e);
        }
    }

    function hideShowOtherBox(e) {
        var theSelect = document.getElementById('services');
        var lastValue = theSelect.options[theSelect.options.length - 1].value;
        var ele = 'otherService' + lastValue;

        if (e.options[e.selectedIndex].text == "Other") {
            if (document.getElementById(ele).style.display == "none") {
                document.getElementById(ele).style.display = "block";
            }
        } else {
            document.getElementById(ele).style.display = "none";
        }
    } 
```

**HTML**

```
<table id="dataTable" width="350px" border="1">
    <tr>
        <td><input type="checkbox" name="chk[]"/></td>
        <td>
            <select id='services' name="services[]" onChange='hideShowOtherBox(this);'>
                <option value="Select">Please Select</option>
                <?php
                    $servicesList = getAllServices();
                    foreach($servicesList as $x) {
                        echo "<option value='$x'>$x</option>\n";
                    }
                ?>
                <option value='0'>Other</option>
            </select>
        </td>
        <td><input id='otherService0' style='display:none;' type="text" name="otherService[]"/></td>
    </tr>
</table>
<input type="button" value="Add Row" onclick="addRow('dataTable')" />

<input type="button" value="Delete Row" onclick="deleteRow('dataTable')" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T16:20:30.297

尝试这个：

```
var boxCount = 1;

function addRow(tableID) {
    var table = document.getElementById(tableID);

    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);
} 
```

# java - 如何在 OOP 语言中正确使用接口

> ID：13813576
> 
> 赞同：2
> 
> 时间：2012-12-11T04:20:17.097
> 
> 标签：java, interface, polymorphism

我有这个问题很长时间了，但是所有回答我的人都没有给我正确的答案。我认为这些接口在 OOP 语言中用于多态性，并且在如下情况下我不明白如何处理它，[在 java 中]

让我们采用以下接口和两个类，

```
public interface Vehicle{
    public int noOfWheels();
    public String movingMethod();
}

public class Car implements Vehicle{
    public int noOfWheels(){
            return 4;
    }

    public String movingMethod(){
        return "Drive";
    }
}

public class Flight implements Vehicle{

    public int noOfWheels(){
        return 5;
    }

    public String movingMethod(){
        return "Fly";
    }

    //a behaviour only applicable to a flight
    public int noOfWings(){
        return 5;
    }
}

=======================================
simulation

    Vehicle v1 = new Car();
    System.out.println(v1.noOfWheels());
    System.out.println(v1.movingMethod);

    Vehicle v2 = new Flight();
    System.out.println(v2.noOfWheels());
    System.out.println(v2.movingMethod);
    System.out.println(v2.noOfWings());//this is not working as Vehicle interface doesn't have this method. 
```

那么，我们如何才能实现此类问题的解决方案。我知道我们可以为航班类型创建另一个界面，但我举了这个例子来表达我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:28:26.307

我不是 100% 知道你的问题是什么，但似乎你在问如何向基本接口表达额外的行为。值得知道一个接口可以扩展另一个接口：

```
public interface Aircraft extends Vehicle {

    public int noOfWings();
} 
```

实现的类`Aircraft`将需要实现`Vehicle`以及声明的方法`noOfWings`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:34:33.247

我认为在您的`Vehicle`类`noOfWings`方法中也可以定义为车辆也可以有翅膀（例如飞行）（或者您可以扩展`Vehicle`以创建另一个接口）

接口用于多态性，但在您的示例中，逻辑上也没有翅膀的多态性。`Flight`通过仅在类中定义它，您使它更专门用于翅膀

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T04:49:48.807

在您的示例中，`v2`是 a`Vehicle`并且编译器仅允许从此接口调用方法。看来你明白这一点。如果要从实现类调用方法，则需要执行强制转换。

With that said, I'm interested to know if you have encountered this problem in a real program? If so, can you describe what you encountered and why using an interface in this way is an issue?

# magento - Magento：允许 URL 作为参数

> ID：13813580
> 
> 赞同：0
> 
> 时间：2012-12-11T04:20:30.540
> 
> 标签：magento

我正在将 Bazaarvoice 集成到 Magento 中以进行评分和评论。我的问题是 Bazaarvoice 使用 URL 中的一些附加参数重定向到我的网站，它变成了 404 错误。我已经联系了 Bazaaevoice，他们告诉我 Magento 可能不允许 url 作为参数。

```
www.mysite.com/bazaarvoice?pid=4801-05E&bvdisplaycode=7529-en_us&bvappcode=rr&bvproductid=4801-05E&bvpage=http://abcd.ugc.bazaarvoice.com%2Fbvstaging%2F7529-en_us%2F4801-05E%2Fsubmitreview.htm%3Fformat%3Dembedded%26campaignid%3DBV_RATING_SUMMARY_ZERO_REVIEWS%26sessionparams%3D__BVSESSIONPARAMS__%26&bvcontenttype=REVIEW_SUBMISSION&bvauthenticateuser=false 
```

是否有任何解决方案可以让 Magento 允许 URL 作为参数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:17:30.253

我不认为问题是参数，因为这项工作

```
http://demo.magentocommerce.com/?pid=4801-05E&bvdisplaycode=7529-en_us&bvappcode=rr&bvproductid=4801-05E&bvpage=http://abcd.ugc.bazaarvoice.com%2Fbvstaging%2F7529-en_us%2F4801-05E%2Fsubmitreview.htm%3Fformat%3Dembedded%26campaignid%3DBV_RATING_SUMMARY_ZERO_REVIEWS%26sessionparams%3D__BVSESSIONPARAMS__%26&bvcontenttype=REVIEW_SUBMISSION&bvauthenticateuser=false 
```

我认为问题可能是因为您的 magento 站点中没有此控制器

> 集市之声

这个网址有效还是你得到404？

> www.mysite.com/bazaarvoice

# c++ - 深拷贝int数组C++

> ID：13813582
> 
> 赞同：1
> 
> 时间：2012-12-11T04:20:37.777
> 
> 标签：c++, arrays, memory-leaks, deep-copy

我想深拷贝一个int数组。当它通过析构函数时，我得到一个断言错误：_BLOCK_TYPE_IS_VALID(pHead->nBlockUse)。我被告知是因为它试图删除不存在的东西。请让我知道我是否走在正确的轨道上并且只需要更改一些小东西，或者我是否完全迷失了并且不知道。如果需要，我可以添加更多代码。

感谢您的回答。

。H

```
private:
    int* _myArray;
    int _size;
    int _capacity; 
```

.cpp

```
MyVector::MyVector()
{
_myArray = new int[2];
_size = 0;
_capacity = 2;
}

MyVector::MyVector(int aSize)
{
_myArray = new int[aSize];
_size = 0;
_capacity = aSize;
}

 MyVector::~MyVector()
 {
if(_myArray != NULL)
{
    delete[] _myArray;
    _myArray = NULL;
}
 }
MyVector::MyVector(const MyVector& mVector)
{
_capacity = mVector._capacity;
_size = mVector._size;

//  if(mVector._myArray)
//  {
//  _myArray = new int[_capacity];

//  copy(mVector._myArray, mVector._myArray+_capacity, _myArray);
//  }
}

  MyVector& MyVector::operator=(MyVector& setterVect)
{
delete [] _myArray;

if(setterVect._myArray)
{
    _myArray = new int[_capacity];

    copy(setterVect._myArray, setterVect._myArray+_capacity, _myArray);
}

return *this;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T04:27:24.063

You need to make sure you are following the **[*"Rule of Three"*](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**.

Apart from copy constructor & destructor You should also provide a copy assignment operator which should do a deep copy of dynamically allocated pointer member.

On a side note, the best solution is to simply drop the dynamically allocated member and use a `std::vector` it saves you all the hassles of manual memory management.

# sockets - 客户端获取服务器响应超时后，如何使服务器忽略客户端发送的数据？

> ID：13813583
> 
> 赞同：0
> 
> 时间：2012-12-11T04:20:38.373
> 
> 标签：sockets, client-server

我正在使用带有 O_NONBLOCK 的套接字、选择、保持连接以及 HTTP 之类的东西。

每个服务器连接和客户端使用缓冲区来获取所有发送的数据，直到收到完整的消息

如何工作：

客户端发送数据“A”
客户端尝试从服务器接收响应
服务器接收但不立即回复
客户端获取超时
服务器发送响应“A”（但客户端现在不接收）

另一个要求：

客户端发送数据“B”
服务器发送响应“B”
客户端接收“AB”响应而不是“B”

问题是客户端收到以前的缓冲区消息

源代码如下：

Server.cpp 基类：

```
bool Server::start()
{
    struct sockaddr_in client_addr;
    SOCKET client_socket, max_sock;
    Connection* conn;
    int addrlen = sizeof(struct sockaddr_in);
    std::list<Connection*>::iterator it, itr;
    int response;
    fd_set fdset, read_fds;

    max_sock = m_socket;
    FD_ZERO(&fdset);
    FD_SET(m_socket, &fdset);
    onStart();

    while(true)
    {
        // make a copy of set
        read_fds = fdset;
        // wait for read event
        response = select(max_sock + 1, &read_fds, NULL, NULL, NULL);
        if(response == -1)
            break;
        // check for new connections
        if(FD_ISSET(m_socket, &read_fds))
        {
            response--;
            // accept connections
            client_socket = accept(m_socket, (struct sockaddr*)&client_addr, &addrlen);
            if(client_socket != INVALID_SOCKET)
            {
                conn = new Connection(*this, client_socket, &client_addr);
                m_connections.push_front(conn);
                // add connection to set for wait for read event
                FD_SET(client_socket, &fdset);
                // allow select new sock from select funcion
                if(max_sock < client_socket)
                    max_sock = client_socket;
            }
        }
        // check for received data from clients
        it = m_connections.begin();
        while(it != m_connections.end() && response > 0)
        {
            conn = *it;
            // verify if connection can be readed
            if(FD_ISSET(conn->getSocket(), &read_fds))
            {
                response--;
                conn->receive();
                if(!conn->isConnected())
                {
                    FD_CLR(conn->getSocket(), &fdset);
                    // remove connection from list
                    itr = it;
                    it++;
                    m_connections.erase(itr);
                    delete conn;
                    continue;
                }
            }
            it++;
        }
    }
    onFinish(response >= 0);
    return response >= 0;
} 
```

main.cpp 服务器实现：

```
void ClientConnection::onReceive(const void * data, size_t size)
{
    const char *str, *pos = NULL;
    HttpParser* p;

    buffer->write(data, size);
    do
    {
        str = (const char*)buffer->data();
        if(contentOffset == 0)
        {
            pos = strnstr(str, buffer->size(), "\r\n\r\n");
            if(pos != NULL)
            {
                contentOffset = pos - str + 4;
                p = new HttpParser((const char*)buffer->data(), contentOffset);
                contentLength = p->getContentLength(); 
                delete p;
            }
        }
        if(buffer->size() - contentOffset < contentLength || contentOffset == 0)
            return;
        proccessRequest();
        keepDataStartingOf(contentOffset + contentLength);
    }
    while(buffer->size() > 0);
} 
```

客户端代码是一个简单的接收超时发送

知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:43:03.160

首先想到的是让客户端的超时时间足够大，以使客户端不会超时，除非服务器实际上已经死了……但我相信你已经想到了。:)

所以假设这还不够好，接下来要尝试的是让客户端在它发送的每个请求中发送一个 ID 号。ID 号可以用一个简单的计数器生成（例如，对于客户端的第一个请求，它用 0 标记请求，第二个它用 1 标记它，等等）。服务器在发送回复时，将在回复中包含相同的 ID 号。

当客户端收到回复时，它会将回复数据中的 ID 号与其计数器的当前值进行比较。如果两个数字相同，则处理数据。如果不是，它会忽略数据。瞧！

# android - 隐式意图和显式意图之间的区别

> ID：13813586
> 
> 赞同：18
> 
> 时间：2012-12-11T04:20:52.230
> 
> 标签：android, android-intent

我对**隐式**和**显式**意图之间的区别感到困惑。隐式和显式意图的目的是什么，为什么要使用这些概念？

我是 Android 应用程序的新手，所以请提供一些示例。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-11T04:26:17.760

# 隐式活动调用

使用意图过滤器，您可以为您的活动创建操作，以便其他应用程序可以通过操作调用您的活动：

```
<activity android:name=".BrowserActivitiy" android:label="@string/app_name">
  <intent-filter>
     <action android:name="android.intent.action.VIEW" />
     <category android:name="android.intent.category.DEFAULT" />
     <data android:scheme="http"/> 
  </intent-filter>
</activity> 
```

.

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.example.com"));
startActivity(intent); 
```

# 显式活动调用

您进行调用以准确指示要使用的活动类：

```
Intent intent = new Intent(this, ActivityABC.class);
startActivity(intent); 
```

[这是一个额外的参考](http://marakana.com/forums/android/examples/471.html)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-11T04:35:41.540

1.  显式意图：显式意图命名组件。

2.  隐式意图：隐式意图未指定组件。

例如：应该称为隐式意图的java 类要求系统执行服务，而没有告诉系统应该由哪个java 类执行该服务。

# jquery - Jquery .stop 无法正常工作，我理解它应该

> ID：13813587
> 
> 赞同：0
> 
> 时间：2012-12-11T04:20:51.343
> 
> 标签：jquery, css

```
 $("#LeftArrow_Wrapper, #RightArrow_Wrapper").hover(
      function () {
          $("#LeftArrow_Button, #RightArrow_Button").stop(true,true).show();
      }
   ); 
```

当我将鼠标悬停在它上面时，我只想让它显示箭头，但是如果我在它上面多次滑动鼠标，它会排队显示功能，我的理解是停止只会切断动画，任何帮助都将不胜感激。

我已经将我的代码更改为这个

```
 $("#LeftArrow_Button, #RightArrow_Button").hover(function () {
                $(this).stop(true,true).show();
            }); 
```

我仍然遇到排队问题

嗯，我已经解决了这个问题，谢谢你的回复。Stop 确实按照我的想法工作，我只是个笨蛋，正在更新错误的 .js 文件。*掌心*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:36:36.483

根据我如何最好地了解您的情况，需要澄清一些事情：

**(1)** `.hover()`实际上是双重的：您通常提供一个函数回调以在您指定的元素时执行**，**另一个在`mouseover`您指定的元素时调用。当您只提供一个时，它对两者执行相同的操作。**`mouseout`**

 **```
$(element).hover(
    function () {
        // to execute on mouseover
    },
    function () {
        // to execute on mouseout
    }
); 
```

**(2)**在事件处理程序中，假定发生事件的元素由 引用`this`。大多数时候几乎不需要再次选择元素。

```
$('#LeftArrow_Wrapper, #RightArrow_Wrapper').hover(function () {
    $(this).stop(true, true).show();
}); 
```

**(3)** `.stop()`停止*动画*。单独调用**不会**`.show()`触发元素上的 jQuery 动画（因为它是瞬时的），但调用会触发，例如，因为 jQuery 在持续时间内执行淡入淡出 + 大小。**`.show(duration)`**

 **## 所以呢？

总而言之，在您的原始代码中发生的事情是，当您将鼠标悬停在一个元素上时，它会**同时** `#LeftArrow_Wrapper`显示and `#RightArrow_Wrapper`（因为您原来的**(2)**），但是当您将鼠标移出时它也会做同样的事情，因为您只提供了一个回调`.hover()`（参见**(1)**）。

你的调用`.stop()`是无用的，因为没有动画让它停止（除非在这段代码之外发生了其他事情——它肯定不会停止你对 的调用`.show()`）。

你的问题不是最详细的，所以我*认为*你想要做的是这样的：

```
 $('#LeftArrow_Wrapper, #RightArrow_Wrapper').hover(
    function () {
        $(this).show();
    },
    function () {
        $(this).hide();
    },
 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:25:37.150

该`.stop`方法停止所选元素上的动画，您正在停止错误元素上的动画：

```
$("#LeftArrow_Wrapper, #RightArrow_Wrapper").hover(function () {
    $(this).stop(true,true).show();
}); 
```****

# java - HTTP 状态 500 - Struts1 中的路径没有操作实例

> ID：13813589
> 
> 赞同：1
> 
> 时间：2012-12-11T04:21:08.077
> 
> 标签：java, web, struts, struts-1, struts-config

这是我第一次使用 Struts，我构建了一个非常简单的程序
但我总是收到这个错误:(
我已经用谷歌搜索了 2 天，但我的类型肯定是正确的。这是我的代码：

web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>

    <!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"        "http://java.sun.com/dtd/web-app_2_3.dtd">

    <web-app>
<filter>
    <filter-name>SetCharacterEncoding</filter-name>
    <filter-class>tw.com.whichone.filter.SetCharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>SetCharacterEncoding</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter>
    <filter-name>whichone</filter-name>
    <filter-class>tw.com.whichone.filter.CheckParameter</filter-class>
</filter>
<filter-mapping>
    <filter-name>whichone</filter-name>
    <url-pattern>*.whichone</url-pattern>
</filter-mapping>

<!-- Standard Action Servlet Configuration (with debugging) -->
<servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    <init-param>
        <param-name>config</param-name>

        <param-value>/WEB-INF/conf/struts-config.xml</param-value>
    </init-param>
    <init-param>
        <param-name>debug</param-name>
        <param-value>2</param-value>
    </init-param>
    <init-param>
        <param-name>detail</param-name>
        <param-value>2</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<!-- servlet-mapping -->

<servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>

<taglib>
    <taglib-uri>http://jakarta.apache.org/struts/tags-bean</taglib-uri>
    <taglib-location>/WEB-INF/tlds/struts-bean.tld</taglib-location>
</taglib>

<taglib>
    <taglib-uri>http://jakarta.apache.org/struts/tags-logic</taglib-uri>
    <taglib-location>/WEB-INF/tlds/struts-logic.tld</taglib-location>
</taglib>

<taglib>
    <taglib-uri>http://jakarta.apache.org/struts/tags-html</taglib-uri>
    <taglib-location>/WEB-INF/tlds/struts-html.tld</taglib-location>
</taglib>

<taglib>
    <taglib-uri>http://jakarta.apache.org/struts/tags-nested</taglib-uri>
    <taglib-location>/WEB-INF/tlds/struts-nested.tld</taglib-location>
</taglib>

<taglib>
    <taglib-uri>http://jakarta.apache.org/struts/tags-tiles</taglib-uri>
    <taglib-location>/WEB-INF/tlds/struts-tiles.tld</taglib-location>
</taglib> 
```

struts-配置

```
 <?xml version="1.0" encoding="UTF-8"?>

    <!DOCTYPE struts-config PUBLIC
      "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
      "http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd">

    <struts-config>
<form-beans>
    <form-bean type="org.apache.struts.action.DynaActionForm"
        name="Store_Data">
        <form-property type="java.lang.String" name="one" />
        <form-property type="java.lang.String" name="StoreSeqNo" />
        <form-property type="java.lang.String" name="StoreName" />
        <form-property type="java.lang.String" name="StoreOwner" />
        <form-property type="java.lang.String" name="StoreAddress" />
        <form-property type="java.lang.String" name="StorePhone" />
        <form-property type="java.lang.String" name="StoreOpenDate" />

        <!-- "回首頁"連結清session專用變數 -->
        <form-property type="java.lang.String" name="CleanSession" />
    </form-bean>
</form-beans>

<global-forwards>
    <forward path="/success.html" name="Success" />
    <forward path="/error.html" name="Error" />
</global-forwards>

<action-mappings>
    <action path="/Store_Data_Parised" type="action.Store_Data_Parised"
        name="Store_Data" scope="request" validate="false" parameter="one">
    </action>
</action-mappings>

<controller processorClass="org.apache.struts.tiles.TilesRequestProcessor" />
<message-resources parameter="MessageResources" />
<plug-in className="org.apache.struts.tiles.TilesPlugin">
    <set-property property="definitions-config" value="/WEB-INF/tiles-defs.xml"      
    />
    <set-property property="moduleAware" value="true" />
</plug-in>
<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
    <set-property property="pathnames"
        value="/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml" />
</plug-in>
    </struts-config> 
```

索引.html

```
 <html>
    <head>
    <title>Test Page</title>
    </head>

    <body>
<form action="Store_Data_Parised.do?one=insert">
    <hr></hr>
    <h3>Add new store</h3>
    <table border="1" bordercolor="black">
        <tr>
            <td align="right">Store Name：&lt;/td>
            <td colspan="3"><input type="text" name="StoreName"
                maxlength="20" /></td>
        </tr>
        <tr>
    </table>

    <table border="1" bordercolor="black">
        <tr>
            <td align="right">Store Owner：&lt;/td>
            <td colspan="3"><input type="text" name="StoreOwner"
                maxlength="20" /></td>
        </tr>
        <tr>
    </table>

    <table border="1" bordercolor="black">
        <tr>
            <td align="right">Store Address：&lt;/td>
            <td colspan="3"><input type="text" name="StoreAddress"
                maxlength="20" /></td>
        </tr>
        <tr>
    </table>

    <table border="1" bordercolor="black">
        <tr>
            <td align="right">Store Phone：&lt;/td>
            <td colspan="3"><input type="text" name="StorePhone"
                maxlength="20" /></td>
        </tr>
        <tr>
    </table>

    <table border="1" bordercolor="black">
        <tr>
            <td align="right">OpenDate：&lt;/td>
            <td colspan="3"><input type="text" name="StoreOpenDate"
                maxlength="20" /></td>
        </tr>
        <tr>
    </table>
    <hr></hr>
    <input type="submit" value="Add" />

</form>
</body>
</html> 
```

Store_Data_Parised.java

 `````
 public class Store_Data_Parised {

    public ActionForward insert(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    DynaActionForm Form = (DynaActionForm) form;
    String one = (String) Form.get("one");
    String StoreName = (String) Form.get("StoreName");
    String StoreOwner = (String) Form.get("StoreOwner");
    String StoreAddress = (String) Form.get("StoreAddress");
    String StorePhone = (String) Form.get("StorePhone");
    String StoreOpenDate = (String) Form.get("StoreOpenDate");

    try {

        Map criteria = new HashMap();
        criteria.put("StoreName", StoreName);
        criteria.put("StoreOwner", StoreOwner);
        criteria.put("StoreAddress", StoreAddress);
        criteria.put("StorePhone", StorePhone);
        criteria.put("StoreOpenDate", StoreOpenDate);

        Store_Data_handler.insert(criteria);

    } catch (Exception e) {

        return mapping.findForward("Error");
    }
    return mapping.findForward("Success");
    }

        } 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:25:29.200

该类需要使用“Action”进行扩展，例如：**public class Store_Data_Parised extends Action**``

# javascript - 如何将 JQuery 函数与 Knockout Extender 一起使用

> ID：13813596
> 
> 赞同：0
> 
> 时间：2012-12-11T04:22:15.403
> 
> 标签：javascript, jquery, knockout.js

如何在自定义剔除扩展器中使用 jQuery 函数。下面是从自定义扩展程序向淘汰目标添加类的示例。

```
ko.extenders.addClass = function(target, option) {
    if (option == true)
    {
        target.subscribe(function(newValue) {
            $(this.target).addClass('new_class');
        });
    }
    return target;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:53:37.830

将普通的[脏标志](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html)与 css 绑定结合起来。

```
ko.dirtyFlag = function(root) {
    var result = function() {}, // A function will not get serialized to JSON
        _initialState = ko.observable(ko.toJSON(root));

    result.isDirty = ko.dependentObservable(function() {
        return _initialState() !== ko.toJSON(root);
    });

    result.reset = function() {
        _initialState(ko.toJSON(root));
    };

    return result;
};

function ViewModel() {
    // Normal properties
    this.someProperty = ko.observable("initial value");

    // Dirty-flag for this object.
    this.dirtyFlag = ko.dirtyFlag(this);
} 
```

```
<div data-bind="css: { 'new_class': dirtyFlag.isDirty }"></div> 
```

如果您只想跟踪属性的子集，也可以传递一个可观察对象或可观察对象数组。

```
this.dirtyFlag = ko.dirtyFlag(this.someProperty); 
```

[http://jsfiddle.net/MizardX/7esdy/](http://jsfiddle.net/MizardX/7esdy/)

# android - 如果在 ContentProvider 的 OnCreate 中返回 false 会发生什么？

> ID：13813598
> 
> 赞同：11
> 
> 时间：2012-12-11T04:22:22.823
> 
> 标签：android, android-contentprovider

该文档指出，如果成功加载提供程序，我们应该返回 true，否则返回 false。在我的实现中，如果 DatabaseHelper == null，我将返回 false。

假设现在在 onCreate`DatabaseHelper == null`中返回**false**，稍后在代码中的某处查询提供程序，提供程序仍在被查询，因为它会崩溃。

我的问题是在 ContentProvider 的 OnCreate 中返回 false 有什么用？在 onCreate 失败后我应该如何处理查询？只是再次运行查询中的onCreate？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-12T00:50:18.093

> 在 ContentProvider 的 OnCreate 中返回 false 有什么用？

通过快速浏览 Android 源代码，我发现，*就目前*而言，返回什么实际上并不重要，*它只是被忽略*了，同样*是现在*。

在测试和`ActivityThread`,`attachInfo`之后立即调用，`newInstance`因此如果您查看[第 1058 行](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/content/ContentProvider.java#L1058)`ContentProvider`的源代码，则调用它的位置如下所示：`onCreate`

```
/**
 * After being instantiated, this is called to tell the content provider
 * about itself.
 *
 * @param context The context this provider is running in
 * @param info Registered information about this content provider
 */
public void attachInfo(Context context, ProviderInfo info) {
    /*
     * We may be using AsyncTask from binder threads.  Make it init here
     * so its static handler is on the main thread.
     */
    AsyncTask.init();

    /*
     * Only allow it to be set once, so after the content service gives
     * this to us clients can't change it.
     */
    if (mContext == null) {
        mContext = context;
        mMyUid = Process.myUid();
        if (info != null) {
            setReadPermission(info.readPermission);
            setWritePermission(info.writePermission);
            setPathPermissions(info.pathPermissions);
            mExported = info.exported;
        }
        ContentProvider.this.onCreate();
    }
} 
```

请记住，如果文档这么说谁知道，也许这将在未来的版本中使用/修复。

* * *

> onCreate失败后我应该如何处理查询？只是再次运行查询中的onCreate？

我会说是的，不一定是`onCreate`您自己的方法，该方法初始化一次并确保您的`DatabaseHelper`左右，这将是您的最大努力，我的意思是根据文档`onCreate`

> 您应该推迟重要的初始化（例如打开、升级和扫描数据库），直到使用内容提供程序

所以从技术上讲，你会按预期做，但那里很疯狂，所以要安全。

# ruby-on-rails - Rails 搜索和类别下拉列表（无方法错误）

> ID：13813605
> 
> 赞同：0
> 
> 时间：2012-12-11T04:23:01.200
> 
> 标签：ruby-on-rails, ruby

我的`events`控制器中有以下内容：

```
def index
  @event = Event.search(params[:search]).events_by_category(params[:cat]).order(...).paginate(...)
end 
```

在我的`events`模型中，我有以下类方法：

```
def self.events_by_category(cat)
  if cat == 0
    all
  elsif cat && cat != 0
    where('category = ?', cat)
  else
    scoped
  end
end 
```

在我看来，我有一个用于搜索的标准搜索框和用于类别选择的下拉列表。该类别`options_for_select`有一个包含`["All Categories", 0]`在其中的数组。

我的问题是：当在下拉列表中选择所有类别时，为什么这不返回任何结果而不是所有结果。而且，当我将数组更改为`["All Categories", "ALL"]`并且 if 语句`if cat == "ALL"`返回它时`Undefined method 'order'`？

我认为这与在控制器中将搜索和 events_by_category 串在一起有关，但是当没有选择所有类别时，搜索和类别可以很好地结合使用...

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:41:59.630

首先回答您的第二个问题：问题是您的`cat == "ALL"`条件返回`Event.all`Ruby `Array`，而不是[`ActiveRecord::Relation`](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html). [`order`](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-order)是一个 activerecord 方法而不是一个数组方法，这就是你得到错误的原因`Undefined method 'order'`。

如果要返回 category 的所有结果，请`ALL`更改`all`为`scoped`（这将返回一个没有条件的范围）。这将是可链接的，因此您可以使用`order`and调用它`paginate`。

至于你的第一个问题，`params[:cat]`是一个字符串，所以你应该检查是否`cat == "0"`不是`cat == 0`. 我认为这应该可以解决问题。

顺便说一句，您的条件有点令人费解：您正在测试 if 是否`cat`为 0，然后在 else 语句中检查它是否不是 0，但您已经知道它不是 0。我建议简化您的方法代码对此：

```
def self.events_by_category(cat)
  (cat && cat != "0") ? where('category = ?', cat) : scoped
end 
```

这表示：如果类别存在但不存在`"0"`（即不是类别“所有结果”），则返回该类别的结果，如果不返回所有结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:57:18.143

```
def self.events_by_category(cat)
 if cat == "0"
   all
 elsif cat && cat != "0"
   where('category = ?', cat)
 else
   scoped
 end
end 
```

以上将起作用。

# c - 正确调用带有指针和数组的函数

> ID：13813607
> 
> 赞同：0
> 
> 时间：2012-12-11T04:23:18.160
> 
> 标签：c, arrays, pointers, user-defined-functions

我真的很困惑如何调用该函数。更新代码以响应一个或多个答案。下面列出了当前代码和构建错误。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

//function prototypes
void signs(int x[], int size, int *negPtr, int *zeroPtr, int *posPtr);
double average(int x[], int size, int *greaterPtr);

int main()
{
//variable declarations
int zeroCounter, posCounter, negCounter, greaterThanAveCounter;
double ave;
int i;
int arr[63];
int size = 63;
int x[63], int size, int* negPtr, int* zeroPtr, int* posPtr, int* greaterPtr;

//seeding the random number generator function with the time
srand(time(NULL));

//filling the array with random numbers from the interval [-15, 40]
for(i=0; i<63; i++)
{
    arr[i] = rand()%(40-(-15)+1)+(-15);
}

//printing the array to the screen 9 elements per line
for(i=0; i<63; i++)
{
    if(i%9==0)
    {
        printf("\n");
    }
    printf("%5d",arr[i]);
}

//call function signs
signs (x, size, negPtr, zeroPtr, posPtr);

printf("\n\nThe number of elements that are negative is: %d\n",negCounter);
printf("The number of elements that are equal to zero is: %d\n",zeroCounter);
printf("The number of elements that are positive is: %d\n",posCounter);

//call function average
average(x, size, greaterPtr);

printf("The average of all the elements is: %.2f\n",ave);
printf("The number of elements that are greater than the average is: %d\n",greaterThanAveCounter);

return 0;
}

/***************************************************************************
signs:
This function finds the number of elements that are negative, positive and
equal to zero in an integer array. The number of elements that are negative,
positive and equal to zero are returned by 3 pointers that the function
receives.

Inputs
1\. The integer array
2\. The size of the aray
3\. An integer pointer to the negative counter
4\. An integer pointer to the zero counter
5\. An integer pointer to the positive counter
***************************************************************************/
void signs(int x[], int size, int *negPtr, int *zeroPtr, int *posPtr)
{
int i;
for (i=0; i<size; i++)
{
    if(x[i]<0)
    {
        (*negPtr)++;
    }
    else if (x[i]==0)
    {
        (*zeroPtr)++;
    }
    else
    {
        (*posPtr)++;
    }
}
}

/***************************************************************************
average:
This function finds the average and the number of elements that are greater
than the average in an integer array. The function returns the value of the
average and returns the number of elements that are greater than the average
using a pointer that the function should receive.

Inputs
1\. The integer array
2\. The size of the aray
3\. An integer pointer to the greater than average counter
***************************************************************************/
double average(int x[], int size, int *greaterPtr)
{
int i;
double ave;
int sum=0;

for (i=0; i<size; i++)
{
    sum+=x[i];
}

ave = (double)sum/size;

*greaterPtr = 0;
for (i=0; i<size; i++)
{
    if(x[i]>ave)
    {
        (*greaterPtr)++;
    }
}
return ave;
} 
```

新错误

*   (32): 错误 C2059: 语法错误: 'type'
*   (35): 警告 C4244: 'function' : 从 'time_t' 转换为 'unsigned int'，可能丢失数据
*   (54): 错误 C2065: 'negPtr' : 未声明的标识符

*   (54): 警告 C4047: 'function' : 'int *' 在
    间接级别上与 'int'不同

*   (54): 警告 C4024: 'signs' : 形参和实参 3 的不同类型
*   (54): 错误 C2065: 'zeroPtr' : 未声明的标识符
*   (54): 警告 C4047: 'function' : 'int *' 在间接级别上与 'int' 不同

*   (54): 警告 C4024: 'signs' : 形式参数和实际参数 4 的不同类型

*   (54): 错误 C2065: 'posPtr' : 未声明的标识符
*   (54): 警告 C4047: 'function' : 'int *' 在间接级别上与 'int' 不同

*   (54): 警告 C4024: 'signs' : 形式参数和实际参数 5 的不同类型

*   (62): 错误 C2065: 'greaterPtr' : 未声明的标识符

*   (62): 警告 C4047: 'function' : 'int *' 在
    间接级别上与 'int'不同

*   (62): 警告 C4024: 'average' : 形参和实参 3 的不同类型
*   1> 1>构建失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:26:34.483

```
double average(int x[], int size, int *greaterPtr); 
```

is how you *declare* a function. To *call* it, you need something like:

```
int a[10], b, *c;             // should also set these to sensible values.
double d = average (a, b, c); 
```

* * *

In terms of your newly added error messages, I'll help out with a few:

```
int x[63], int size, int* negPtr, int* zeroPtr, int* posPtr, int* greaterPtr; 
```

This is not how you define multiple variables, it should be:

```
int x[63], size, *negPtr, *zeroPtr, *posPtr, *greaterPtr; 
```

That's probably the single cause of *most* of your current problems (I haven't confirmed this, it's more from a quick analysis).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:28:37.497

`signs (x, size, negPtr, zeroPtr, posPtr);` is the correct way to call the function. The reason you get undefined errors is because you never declare those variables in the main function, so you need something like

```
int x[];
int size;
int* negPtr; 
```

etc.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:43:48.287

*   (32): 错误 C2059: 语法错误: 'type'

您声明变量错误。此行应为：

```
int x[63], size, *negPtr, *zeroPtr, *posPtr, *greaterPtr; 
```

但是，我建议将一个变量声明保留在一行中，因为这样可以避免此类错误并使代码更具可读性。

*   (35): 警告 C4244: 'function' : 从 'time_t' 转换为 'unsigned int', 可能丢失数据

`time()`返回 a`time_t`并`srand()`接受一个`unsigned int`. 您需要显式地转换返回值`time()`来告诉编译器您期望这种情况发生：

```
srand((unsigned int)time(NULL)); 
```

其余的警告似乎是第一个错误的连锁反应。

# java - 旋转图像的按住按钮

> ID：13813611
> 
> 赞同：0
> 
> 时间：2012-12-11T04:23:30.077
> 
> 标签：java, image

我正在尝试在 Java 上为我的强盗机器创建一个保持按钮，按下时它将保持该图像，而其他 2 个图像将继续旋转。任何人都知道允许这种情况发生的代码吗？

```
if (e.getSource()== btnaddcash){
                txtbalance.setForeground(Color.red);
                cash = cash + 100;
                txtbalance.setText(cash + "");

if (e.getSource() == btnpic1){ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:51:31.743

基本概念是，您想在按钮“武装”时旋转图像（或采取一些行动）。

实现此目的的一种方法是将 a 添加`ChangeListener`到按钮并监视`ButtonModel#isArmed`状态。

![在此处输入图像描述](../Images/5ed26b0d1c55c3a1b2cf2889087c9604.png)

```
public class ChangeButton {

    public static void main(String[] args) {
        new ChangeButton();
    }

    public ChangeButton() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new SlotPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class SlotPaneextends JPanel {

        private SpinPane spinPane;
        private JButton button;

        public SlotPane() {
            spinPane = new SpinPane();
            button = new JButton("Press");
            // I've attached directly to the model, I don't
            // think this is required, simply attaching a change
            // listener to the button achieve the same result.
            button.getModel().addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent e) {
                    spinPane.setSpinning(button.getModel().isArmed());
                }
            });

            setLayout(new BorderLayout());
            add(spinPane);
            add(button, BorderLayout.SOUTH);
        }
    }

    public class SpinPane extends JPanel {

        private BufferedImage mole;
        private Timer timer;
        private float angel = 0;

        public SpinPane() {
            try {
                mole = ImageIO.read(new File("mole.png"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
            timer = new Timer(15, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    angel += 15;
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
        }

        @Override
        public Dimension getPreferredSize() {
            return mole == null ? super.getPreferredSize() : new Dimension(mole.getWidth(), mole.getHeight());
        }

        public void setSpinning(boolean spinning) {
            if (spinning) {
                if (!timer.isRunning()) {
                    timer.restart();
                }
            } else {
                timer.stop();
            }
            repaint();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (mole != null) {

                int x = (getWidth() - mole.getWidth()) / 2;
                int y = (getHeight() - mole.getHeight()) / 2;
                Graphics2D g2d = (Graphics2D) g.create();
                g2d.setTransform(AffineTransform.getRotateInstance(Math.toRadians(angel), getWidth() / 2, getHeight() / 2));
                g2d.drawImage(mole, x, y, this);
                g2d.dispose();

            }
        }
    }
} 
```

# node.js - 如何将 node.js 与 monogodb 连接起来

> ID：13813617
> 
> 赞同：-1
> 
> 时间：2012-12-11T04:23:51.297
> 
> 标签：node.js, mongodb

我是 node.js，mongodb 的新手。请建议我一个很好的教程来学习这些东西。如果有任何 IDE 用于 node.js 开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:28:25.013

Node.js 并没有真正做 IDE。只需使用文本编辑器。我个人喜欢 Sublime Text 2。

查看[mongoosejs.com](http://mongoosejs.com)获取 mongo 库。

# java - 纯 JSP 不混合 HTML，将 html 编写为类似 Java 的代码

> ID：13813622
> 
> 赞同：5
> 
> 时间：2012-12-11T04:24:42.187
> 
> 标签：java, html, jsp

**请在回答之前阅读。**这是我梦寐以求的一种**奇幻编程技术。**我想知道现实生活中是否有什么接近的东西。

以下 JSP 页面：

```
<%
html {
    head {
        title {"Pure fantasy";}
    }
    body {
        h1 {"A heading with double quote (\") character";}
        p {"a paragraph";}
        String s = "a paragraph in string. the date is ";
        p {
            s;
            new Date().toString();
        }
        table (Border.ZERO, new Padding(27)) {
            tr {
                for (int i = 0; i < 10; i++) {
                    td {i;}
                }
            }
        }
    }
}
%> 
```

可以生成以下 HTML 页面：

```
<html>
    <head>
        <title>Pure fantasy</title>
    </head>
    <body>
        <h1>A heading with double quote (") character</h1>
        <p>a paragraph</p>
        <p>a paragraph in string. the date is 11 December 2012</p>
        <table border="0" padding="27">
            <tr>
                <td>0</td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
                <td>6</td>
                <td>7</td>
                <td>8</td>
                <td>9</td>
            </tr>
        </table>
    </body>
</html> 
```

关于这个幻想的事情是它重用了相同的旧 Java 编程语言技术，允许以类似于 , 等的方式使用自定义关键字以`if-else-then`非`while`html`try-catch`方式表示 html 标记，可以轻松检查语法正确性，**最重要的是**可以很容易地与常规 Java 代码混淆，而不会迷失在`<%`, `%>`, `<%=`,`out.write()`等的海洋中。

一个附加功能是可以将字符串直接放置为命令以打印到生成的 HTML 中，这是 Java 不支持的（在使用前必须将纯字符串分配给变量）。

*   现实生活中有什么可以接近的吗？
*   如果没有，是否可以在 Java 或 JSP 中定义自定义关键字？
*   还是我必须为此创建一种全新的编程语言？
*   您认为这种设置有什么问题？

**PS：**我知道您可以使用 HTML 库来使用 Java 代码构建 HTML，但是此类库的问题是，源代码本身没有像上面的代码那样具有可读的 HTML 表示 - 如果您明白我的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:59:57.160

它来自 Ruby 世界，而不是 Java，但看看[Haml](http://haml.info)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:00:26.260

听起来您基本上是在要求替代 HTML 模板引擎。如果你用谷歌搜索的话，有很多选择。似乎经常出现的一个（对于 Java）是[Apache Velocity](http://velocity.apache.org/)。[用户指南](http://velocity.apache.org/engine/releases/velocity-1.7/user-guide.html)中的一个示例如下所示：

```
<HTML>
<BODY>
Hello $customer.Name!
<table>
#foreach( $mud in $mudsOnSpecial )
   #if ( $customer.hasPurchased($mud) )
      <tr>
        <td>
          $flogger.getPromo( $mud )
        </td>
      </tr>
   #end
#end
</table> 
```

# android - 将drawable添加到CirclePageIndicator

> ID：13813623
> 
> 赞同：3
> 
> 时间：2012-12-11T04:24:44.817
> 
> 标签：android, android-layout, android-intent, android-emulator, android-viewpager

如何将图像添加到圆形页面指示符而不是添加颜色.. 我尝试添加图标页面指示符，但点击方法不起作用但我可以添加图像.. 在 circlepageIndicator 中，onclick 方法有效但如何添加可绘制的图像到圆形页面指示符. 以下是我的代码。

![在此处输入图像描述](../Images/a5ad50c5a6b4990979b7b0ba1b04150f.png)

已使用 CirclePageIndicator

```
 indicator  = (CirclePageIndicator)findViewById(R.id.indicatorMenu);
    indicator.setViewPager(pagerMenu);

    final float density1 = getResources().getDisplayMetrics().density;
    indicator.setRadius(5 * density1);
    indicator.setPageColor(0xFF000000);
    indicator.setFillColor(0xFF888888);
  indicator.setStrokeColor(0x880000FF);
    indicator.setStrokeWidth(2 * density1);

    //We set this on the indicator, NOT the pager
    indicator.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {             
        @Override
        public void onPageSelected(int position) {
         //   Toast.makeText(HomeSpizzaView.this, "Changed to page " + position, Toast.LENGTH_SHORT).show();
        //  pagerMenu.setCurrentItem(position, false);            
        }
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        }
        @Override
        public void onPageScrollStateChanged(int state) {               
        }
    });

    indicator.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            int currentItem = pagerMenu.getCurrentItem();
               int totalItems = pagerMenu.getAdapter().getCount();
               int nextItem = (currentItem + 1) % totalItems;
               pagerMenu.setCurrentItem(nextItem);
         Log.i("kkkkk", "getCurrentItem"+  nextItem);
         Toast.makeText(HomeSpizzaView.this, "getCurrentItem"+  nextItem, Toast.LENGTH_SHORT).show();
        }
    }); 
```

使用的图标页面指示器

```
 mIndicator  = (IconPageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
    mIndicator.setLongClickable(true);

    //We set this on the indicator, NOT the pager
    mIndicator.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {             
        @Override
        public void onPageSelected(int position) {
            Toast.makeText(HomeSpizzaView.this, "Changed to page " + position, Toast.LENGTH_SHORT).show();
            mPager.setCurrentItem(position, false);    
        }
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        }
        @Override
        public void onPageScrollStateChanged(int state) {               
        }
    });

    mIndicator.setOnClickListener(new View.OnClickListener(){
        @Override
        public void onClick(View v) {
            int currentItem = pagerMenu.getCurrentItem();
               int totalItems = pagerMenu.getAdapter().getCount();
               int nextItem = (currentItem + 1) % totalItems;
               pagerMenu.setCurrentItem(nextItem);
         Log.i("mmmmmmmmmmmm", "getCurrentItem"+  nextItem);
         Toast.makeText(HomeSpizzaView.this, "getCurrentItem"+  nextItem, Toast.LENGTH_SHORT).show();

        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T11:56:10.770

您可以使用**CirclePageIndicator**对象来自定义页面指示器。您可以设置图像或自定义颜色。您还可以使用 XML 自定义这些指标，您可以从给定的链接[Android-ViewPagerIndicator 的 GitHub](https://github.com/JakeWharton/ViewPagerIndicator)中找到示例。如果要使用图标或图像，则可以使用以下类[SampleIconsDefault.java](https://github.com/JakeWharton/ViewPagerIndicator/blob/master/sample/src/com/viewpagerindicator/sample/SampleIconsDefault.java)。从给定的样本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-01T02:36:29.433

我遇到了同样的问题，唯一的解决方案是创建自己的库来做到这一点。

[https://github.com/augustopicciani/DrawablePageIndicator](https://github.com/augustopicciani/DrawablePageIndicator)

# windows-8 - 如何在winjs中将图像大小调整为固定的高度和宽度而不会丢失纵横比？

> ID：13813624
> 
> 赞同：2
> 
> 时间：2012-12-11T04:25:02.673
> 
> 标签：windows-8, winjs

我的应用程序中有一个宽度：530px 和高度：510px 的图像区域。我想在该区域放置图像，但图像的大小不同。如何在不丢失纵横比的情况下裁剪或缩放图像以填充该区域。winjs 中是否有可用的本机方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:36:35.760

你有几个选择。

一种是使用 WinJS 为您提供的[ViewBox 控件](http://msdn.microsoft.com/en-us/library/windows/apps/br229771.aspx)。ViewBox 只能有一个子项（因此您可能会将您的标签作为其唯一的子项或包含您的 img 的 div），并且它将缩放该子项（使用 CSS 转换）以适应其容器（不改变方面比率）。它很光滑。

另一种选择是将图像设置为容器（例如 div）的 CSS background-image 属性并将 background-size 属性设置为`contain`. 这会将图像拉伸到容器的大小。

如果您的情况有点特殊，您必须诉诸的最后一个选择毕竟不是一个糟糕的选择。在`updateLayout`页面的方法中，您可以引用元素并显式设置其 CSS 属性以适应。到那时，您将了解所有有关布局的信息，并且可以轻松地进行数学运算来确定图像应该是什么尺寸。这是我执行此操作的一个项目中的一些代码。请注意，我正在比较屏幕和图像的纵横比，以确定我应该将尺寸调整为宽度还是高度。与您的情况不同（我猜），我的代码确保图像填满屏幕并剪裁多余的图像。我猜你希望你的 img 被包含。

```
function setImagePosition() {
    var img = q(".viewCamera #viewport img");
    if (outerWidth/outerHeight > img.naturalWidth/img.naturalHeight) {
        img.style.width = format("{0}px", outerWidth);
        img.style.height = "";
        img.style.top = format("{0}px", (outerHeight - img.clientHeight) / 2);
        img.style.left = "0px";
    } else {
        img.style.width = "";
        img.style.height = format("{0}px", outerHeight);
        img.style.top = "0px";
        img.style.left = format("{0}px", (outerWidth - img.clientWidth) / 2);
    }
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:36:40.887

您是指缩放 HTML 图像吗？如果是这样，您可以设置宽度或高度之一。无论您设置哪个，另一个都会缩放并保持图像纵横比。

# android - Android：重置按钮永久禁用另一个按钮

> ID：13813626
> 
> 赞同：2
> 
> 时间：2012-12-11T04:25:32.967
> 
> 标签：android, android-activity

我目前有四个按钮。第四个按钮是我添加的重置按钮，用于将活动重置为最初启动时的状态。但是，当我添加重置按钮时，它会永久禁用其中一个按钮，即使以前，这些按钮是按照他们应该的方式启用/禁用的。以下是相关代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_name);

    // non relevant code

    okButton = (Button) findViewById(R.id.ok);
    okButton.setOnClickListener(this);

    changeButton = (Button) findViewById(R.id.change_button);
    changeButton.setOnClickListener(this);

    nextButton = (Button) findViewById(R.id.next_button);
    nextButton.setEnabled(false);
    nextButton.setOnClickListener(this);

    reset = (Button) findViewById(R.id.reset);
    reset.setEnabled(false);
    reset.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.ok:
        changeButton.setEnabled(false);
        okButton.setEnabled(false);
        nextButton.setEnabled(true);
        break;

    case R.id.change_button:
        changeButton.setEnabled(false);
        okButton.setEnabled(false);
        nextButton.setEnabled(true);
        break;

    case R.id.next_button:
        nextButton.setEnabled(false);
        okButton.setEnabled(true);
        changeButton.setEnabled(true);
        break;

    case R.id.reset:
        Intent intent = getIntent();
        finish();
        startActivity(intent);
        break;

    default:
        break;
    }
} 
```

在添加所有涉及重置按钮的部分之前，一切都按应有的方式工作。本质上，我想要的行为是：

*   最初：next 和 reset 被禁用，当单击 change 或 ok 时它们变为启用

*   单击 change 或 ok 时，它们都被禁用（以防止单击多次）并且 reset 和 next 都启用

*   单击下一步或重置时，它们将被禁用并更改并启用。

在添加重置代码之前，更改、确定和下一步按钮的行为一直有效。然后下一个按钮被永久禁用。怎么了？我如何解决它？

编辑*：

这是按钮的xml代码：

```
<Button
    android:id="@+id/ok"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/change_button"
    android:layout_alignBottom="@+id/change_button"
    android:layout_toLeftOf="@+id/reset"
    android:text="@string/Ok" />

<Button
    android:id="@+id/next_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/change_button"
    android:layout_alignBottom="@+id/change_button"
    android:layout_alignParentLeft="true"
    android:text="@string/next_button" />

<Button
    android:id="@+id/reset"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:text="@string/reset" />

<Button
    android:id="@+id/change_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="14dp"
    android:layout_toRightOf="@+id/next_button"
    android:text="@string/change" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:41:34.897

您可以按照这种方式进行操作，这有助于您获得良好的编程实践。

```
@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.ok:
        setButtonStates(false,false,true,true);
        break;

    case R.id.change_button:
        setButtonStates(false,false,true,true);
        break;

    case R.id.next_button:
        setButtonStates(true,true,false,false);
        break;

    case R.id.reset:
        Intent intent = getIntent();
        finish();
        startActivity(intent);
        break;

    default:
        break;
    }
}

public void setButtonStates(boolean flag1, boolean flag2, boolean flag3, boolean flag4){
    changeButton.setEnabled(flag1);
    okButton.setEnabled(flag2);
    nextButton.setEnabled(flag3);
    reset.setEnabled(flag4);
} 
```

这样，您的代码看起来清晰且易于根据需要进行修改。

希望它可以帮助你。

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T06:11:18.643

> 最初：next 和 reset 被禁用，当单击 change 或 ok 时它们变为启用

```
@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.ok:
        changeButton.setEnabled(false);
        okButton.setEnabled(false);
        nextButton.setEnabled(true);
        reset.setEnabled(true); // add this
        break;

    case R.id.change_button:
        changeButton.setEnabled(false);
        okButton.setEnabled(false);
        nextButton.setEnabled(true);
        reset.setEnabled(true); // add this
        break;

    case R.id.next_button:
        nextButton.setEnabled(false);
        okButton.setEnabled(true);
        changeButton.setEnabled(true);
       reset.setEnabled(false); // add this
        break;

    case R.id.reset:
        Intent intent = getIntent();
        finish();
        startActivity(intent);
        break;

    default:
        break;
    }
} 
```

这对我有用/添加这些行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T05:31:17.550

这是你想要的，如果你想要任何改变，请评论

```
//Buttons
    Button okButton,changeButton,resetButton,nextButton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // non relevant code

        okButton = (Button) findViewById(R.id.okButton);
        okButton.setOnClickListener(this);

        changeButton = (Button) findViewById(R.id.changeButton);
        changeButton.setOnClickListener(this);

        nextButton = (Button) findViewById(R.id.nextButton);
        nextButton.setEnabled(false);
        nextButton.setOnClickListener(this);

        resetButton = (Button) findViewById(R.id.resetButton);
        resetButton.setEnabled(false);
        resetButton.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.okButton:
            changeButton.setEnabled(false);
            okButton.setEnabled(false);
            nextButton.setEnabled(true);
            resetButton.setEnabled(true);
            break;

        case R.id.changeButton:
            changeButton.setEnabled(false);
            okButton.setEnabled(false);
            nextButton.setEnabled(true);
            resetButton.setEnabled(true);
            break;

        case R.id.nextButton:
            nextButton.setEnabled(false);
            resetButton.setEnabled(false);
            okButton.setEnabled(true);
            changeButton.setEnabled(true);
            break;

        case R.id.resetButton:
            resetButton.setEnabled(false);
            nextButton.setEnabled(false);
            okButton.setEnabled(true);
            changeButton.setEnabled(true);
            Intent intent = getIntent();
            finish();
            startActivity(intent);
            break;

        default:
            break;
        }
    } 
```

# c++ - FirstChance Exception StackOverFlow Merge Sort Shell Sort Bubble Sort

> ID：13813630
> 
> 赞同：0
> 
> 时间：2012-12-11T04:25:45.497
> 
> 标签：c++, shell, mergesort, bubble-sort, stack-overflow

Hey guys I'm working on some sorts and am trying to implement a bubble sort, a merge sort, and a shell sort. I use an outdated technique but I was wondering if you guys could let me know why I keep getting the following error:

First-chance exception at 0x01135EF7 in sortApplication2.exe: 0xC00000FD: Stack overflow (parameters: 0x00000000, 0x00542000). Unhandled exception at 0x01135EF7 in sortApplication2.exe: 0xC00000FD: Stack overflow (parameters: 0x00000000, 0x00542000).

I am using Visual Studio 2012 if that plays any part. My code is in three different files so I'll post each separately.

My header file:

```
#pragma once
class sort
{
public:
    sort(); 
    void random1(int array[]); 
    void random2(int array[]); 
    void random3(int array[]); 
    void bubbleSort(int array[], int length); 
    /*void merge(int *input, int p, int r);                                           
    void merge_sort(int *input, int p, int r);*/ 
    void shellSort(int array[], int length); 
}; 
```

My class implementation file:

```
#include "sort.h"
#include <time.h>
#include <iostream>

using namespace std;

sort::sort()
{}

void sort::random1(int array[])
{
        // Seed the random-number generator with current time so that
        // the numbers will be different every time the program runs.
    for(int i = 0; i < 25; i++)
    {

        srand ((unsigned) time(NULL));
        int n = rand();     //generates a random number
        array[i] = n;       //places it into the array
    }

}
void sort::random2(int array[])
{
    // Seed the random-number generator with current time so that
    // the numbers will be different every time the program runs.
    for(int i = 0; i < 10000; i++)
    {
        srand ((unsigned) time(NULL));
        int n = rand();     //generates a random number
        array[i] = n;       //places it into the array
    }

}
void sort::random3(int array[])
{
    // Seed the random-number generator with current time so that
    // the numbers will be different every time the program runs.
    for(int i = 0; i < 100000; i++)
    {
        srand ((unsigned) time(NULL));
        int n = rand();     //generates a random number
        array[i] = n;       //places it into the array
    }
}
void sort::bubbleSort(int array[], int length)
{
    //Bubble sort function 

    int i,j;

    for(i = 0; i < 10; i++)
    {
        for(j = 0; j < i; j++)
        {
            if(array[i] > array[j])
            {
                int temp = array[i]; //swap 
                array[i] = array[j];
                array[j] = temp;
            }
        }
    }
}

    /*void sort::merge(int* input, int p, int r) //the merge algorithm of the merge sort
    {
        int mid = (p + r) / 2;
        int i1 = 0;
        int i2 = p;
        int i3 = mid + 1;

    // Temp array
    int x = r -p + 1;
    int *temp;
    temp = new int [x];

    // Merge in sorted form the 2 arrays
    while ( i2 <= mid && i3 <= r )
        if ( input[i2] < input[i3] )
            temp[i1++] = input[i2++];
        else
            temp[i1++] = input[i3++];
         // Merge the remaining elements in left array
    while ( i2 <= mid )
        temp[i1++] = input[i2++];

    // Merge the remaining elements in right array
    while ( i3 <= r )
        temp[i1++] = input[i3++];

    // Move from temp array to master array
    for ( int i = p; i <= r; i++ )
        input[i] = temp[i-p];
}
void sort::merge_sort(int *input, int p, int r) //the merge sort algorithm
{
    if ( p < r ) //When p and r are equal the recursion stops and the arrays are then     passed to the merge function.
    {
        int mid = (p + r) / 2;
        merge_sort(input, p, mid); //recursively calling the sort function in order to     break the arrays down as far as possible
        merge_sort(input, mid + 1, r);//recursively calling the sort function in order to     break the arrays down as far as possible
        merge(input, p, r); //merge function realigns the smaller arrays into bigger arrays     until they are all one array again
    }
}*/

void sort::shellSort(int array[], int  length) //Shell sort algorithm
{
    int gap, i, j, temp;
    for( gap = length / 2; gap > 0; gap /= 2) //gap is the number of variables to skip when doing the comparisons
    {  
        for( i = gap; i < length; i++) //This for loop sets the variable to use as the gap for the comparisons
        {   
            for (j = i - gap; j >= 0 && array[j] > array[j + gap]; j -= gap)
            {
                temp = array[j]; //the array variables are swapped
                array[j] = array[j + gap];
                array[j + gap] = temp;
             }
         }
     }
} 
```

And my driver file:

```
#include "sort.h"
#include <iostream>

using namespace std;

int main()
{
    int bubbleArray1[25]; //these are the arrays to be sorted. three for each sort.     each has a length of 25, 10000, or 100000.
    int bubbleArray2[10000];
    int bubbleArray3[100000];
    int mergeArray1[25];
    int mergeArray2[10000];
    int mergeArray3[100000];
    int shellArray1[25];
    int shellArray2[10000];
    int shellArray3[100000];
    sort Sorts;

    Sorts.random1(bubbleArray1);
    Sorts.random1(mergeArray1);
    Sorts.random1(shellArray1);
    Sorts.random2(bubbleArray2);
    Sorts.random2(mergeArray2);
    Sorts.random2(shellArray2);
    Sorts.random3(bubbleArray3);
    Sorts.random3(mergeArray3);
    Sorts.random3(shellArray3);

    cout << "BubbleSort1 is now being sorted.\n";
    Sorts.bubbleSort(bubbleArray1, 25);
    cout << "BubbleSort2 is now being sorted.\n";
    Sorts.bubbleSort(bubbleArray2, 10000);
    cout << "BubbleSort3 is now being sorted.\n";
    Sorts.bubbleSort(bubbleArray3, 100000);
    cout << "End bubble sorts.\n";

    /*cout << "MergeSort1 is now being sorted.\n";
    Sorts.merge_sort(mergeArray1, 0, 25);
    cout << "MergeSort2 is now being sorted.\n";
    Sorts.merge_sort(mergeArray2, 0, 10000);
    cout << "MergeSort3 is now being sorted.\n";
    Sorts.merge_sort(mergeArray3, 0, 100000);
    cout << "End merge sorts.\n";*/

    cout << "ShellSort1 is now being sorted.\n";
    Sorts.shellSort(shellArray1, 25);
    cout << "ShellSort1 is now being sorted.\n";
    Sorts.shellSort(shellArray2, 10000);
    cout << "ShellSort1 is now being sorted.\n";
    Sorts.shellSort(shellArray3, 100000);
    cout << "End shell sorts.\n";

    cout << "Array\tElements\n";
    cout << "BubbleSort1\t";
    for(int i = 0; i < 25; i++)
    {
        cout << bubbleArray1[i] << " ";
    }
    cout << "\nMergeArray1\t";
    for(int i = 0; i < 25; i++)
    {
        cout << mergeArray1[i] << " ";
    }
    cout << "\nShellArray1\t";
    for(int i = 0; i < 25; i++)
    {
        cout << shellArray1[i] << " ";
    }

    return 0;
} 
```

I know it's a lot of code. And there are probably many ways I could make the code better. I would just like to know what's causing the error up above since I can't find it using my compiler.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:34:03.487

您在堆栈上分配了太多内存。具有“自动”存储类的变量进入堆栈。而是分配堆。

所以，而不是：

```
int shellArray3[100000]; 
```

做：

```
int* shellArray3 = new int[100000]; 
```

或者更好的是，使用 std::vector。

如果你不想使用堆内存，你也可以使用静态存储类来做类似的事情。要做到这一点：

```
static int shellArray3[100000]; 
```

这将为整个程序分配一个变量实例，而不是为堆栈上的每个函数条目分配一个副本。

# javascript - Parse a javascript window.close() function from a web page in xcode

> ID：13813631
> 
> 赞同：1
> 
> 时间：2012-12-11T04:26:04.483
> 
> 标签：javascript, html, objective-c, xcode

I am writing an application for my parent's photo booth business.

They upload all the event pictures to different Flickr photosets on their account, and on the website they have an albums page with a collection of all their events so that people from the events can go and see all their photo strips, as well as each individual picture and then download them for themselves.

Most of their traffic is from mobile devices (my brother wrote the website specifically to fit mobile device screens as well as normal computer screens just as well); however, downloading and sharing the images is easier through an app (thanks to Apple's iOS 6 UIActivityViewController and UICollectionView).

So I'm writing the app that makes it easier to view and share the pictures. I have most of it done and working great! However, it currently only supports iOS 6 and I'm trying to include iOS 5\. It only supports iOS 6 because I am using a UICollectionView to display the pictures from events. However, since iOS 5 does not include collection views I use a web view of our albums web page which displays all images.

When you select an image, you can choose a size of the image to view. When you pick a size, it opens a new tab, that includes the image and two links. One to download the image, and one to close the tab. The two links are within an unordered list and each link is its own list item.

This is the link to download the image:

```
<a href="/downloadImage.php?link=IMG_LINK&amp;title=TITLE">Download Image</a> 
```

And the closing tab link has a tag of:

```
<a href="javascript:window.close();"> 
```

I've seen that you can use the webView's delegate method `shouldStartLoadWithRequest:` and then:

```
if ([[[request URL] absoluteString] hasPrefix:@"/downloadImage.php"]) {
    UIImageWriteToSavedPhotosAlbum(imageToBeSaved, nil, nil, nil);
    return NO;
} else if ([[[request URL] absoluteString] hasPrefix:@"javascript"]) {
    [webView goBack];
    return NO;
} else { return YES; } 
```

Which would make it do those functions when the links are clicked...right? These do not work though. And I'm not sure how to make them work.
I am searching for the correct way to use this method, or some alternative method, if possible, to use Objective-C to do the equivalent of what the html normally does.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:54:21.023

我想出了一种方法来做我想做的事情。当您选择图像大小时，而不是让 webView 打开一个新页面。我将大小链接设置为使用以下代码直接下载图像：

```
 // for links thats contain the displayImage.php do not allow user interaction
if ([[[request URL] absoluteString] hasPrefix:@"http://www.remembermephotobooths.com/displayImage.php?link="]) {
        //scan through the link url get the image link so that I can download it
        NSMutableArray *substring = [NSMutableArray new];
        NSScanner *scanner = [NSScanner scannerWithString:[[request URL] absoluteString]];
        [scanner scanUpToString:@"http://farm9" intoString:nil]; // Scan all characters after and including http://farm9 because all download links begin with http://farm9
        while(![scanner isAtEnd]) {
            NSString *string = nil;
            [scanner scanString:@"&title=" intoString:nil]; // Scan up to &title
            if([scanner scanUpToString:@"&" intoString:&string]) {
                [substring addObject:string];
            }
            [scanner scanUpToString:@".jpg" intoString:nil]; // Scan all characters up to and including .jpg because all images are jpegs
        }
        // save image to photo library
        UIImageWriteToSavedPhotosAlbum([UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:substring[0]]]], nil, nil, nil);
        // let the user know the image was saved
        MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
        [hud setMode:MBProgressHUDModeText];
        hud.labelText = @"Saved Image!";
        [hud setMinShowTime:1.5];
        [MBProgressHUD hideHUDForView:self.view animated:YES];
        [substring release];
        return NO; //this is what disables the links usual code and has it run my code instead
    }
    else { //all other links are enabled
        return YES;
    } 
```

# iphone - Changing button label not working properly with if-else method

> ID：13813632
> 
> 赞同：0
> 
> 时间：2012-12-11T04:26:05.510
> 
> 标签：iphone, xcode, button, if-statement, label

it is probably a very simple problem but I spent already a lot of time on it and just have given up... I have a button and a textfield for speed calculations. I want the button label change once the button is pressed (km/h >> mph >> m/s >> km/h and so on) and speed recalculated. It sometimes works fine but very often it jumps to "else" statement even if the CurrentSpeedValue is @"km/h". Could anyone help? Maybe it would be better to use switch-case method but how should it be stated?

```
- (IBAction)speedChange:(id)sender {
//CurrentSpeedUnit is saved to NSUserDefault in another action
    if (CurrentSpeedUnit == @"km/h") {
        [sender setTitle:@"mph" forState:UIControlStateNormal];
        CurrentSpeedUnit = @"mph";
        float speedToPrint = ([textSpeed.text floatValue]) / 1.609344;
        textSpeed.text = [[NSString alloc] initWithFormat:@"%.3f", speedToPrint];
    } else if (CurrentSpeedUnit == @"mph") {
        [sender setTitle:@"m/s" forState:UIControlStateNormal];
        CurrentSpeedUnit = @"m/s";
        float speedToPrint = ([textSpeed.text floatValue]) * 1.609344 / 3.6;
        textSpeed.text = [[NSString alloc] initWithFormat:@"%.3f", speedToPrint];
    } else {
        [sender setTitle:@"km/h" forState:UIControlStateNormal];
        CurrentSpeedUnit = @"km/h";
        float speedToPrint = ([textSpeed.text floatValue]) * 3.6;
        textSpeed.text = [[NSString alloc] initWithFormat:@"%.3f", speedToPrint];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:42:30.473

对于字符串比较，您需要使用

> isEqualToString

例如：

```
if ([CurrentSpeedUnit isEqualToString:@"km/h"]) 
{
     // Perfrom Action
}... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:34:24.603

你不应该比较这样的字符串（你比较指针而不是内容）。使用 isEqualToString。

IE

```
if ([CurrentSpeedUnit isEqualToString:@"km/h"]) {
... 
```

但不是你的

```
if (CurrentSpeedUnit == @"km/h") { 
```

它有时可能会起作用，但请记住避免将字符串与 == 进行比较

# asp.net - The entity type is not part of the model for the current context

> ID：13813634
> 
> 赞同：0
> 
> 时间：2012-12-11T04:26:14.170
> 
> 标签：asp.net, entity-framework, ado.net

My ASP.NET application is working locally, but when I deploy it, I get the following error: "The entity type Usuario is not part of the model for the current context". I've tried every solution I found, but I couldn't get it work.

I think it can be something wrong in connection string because they are different ones to local database and remote database. This is the connection string in Web.Release.config file:

```
<add name="ModelContainer" connectionString="metadata=res://*/;provider=System.Data.SqlClient;provider connection string=&quot;Data Source = tcp:ebmzszqsw8.database.windows.net,1433; Initial Catalog = {database_name}; User ID = {my_id}; Password={my_password};Trusted_Connection=False;Encrypt=True;Connection Timeout=30&quot;" providerName="System.Data.EntityClient" xdt:Transform="SetAttributes" xdt:Locator="Match(name)" /> 
```

# linux - fork() 中的写时复制如何处理多个分叉？

> ID：13813636
> 
> 赞同：9
> 
> 时间：2012-12-11T04:26:27.463
> 
> 标签：linux, memory, fork, copy-on-write

根据维基百科（可能是错误的）

> 当发出 fork() 系统调用时，将创建与父进程对应的所有页面的副本，并由操作系统为子进程加载到单独的内存位置。但在某些情况下不需要这样做。考虑当孩子执行“exec”系统调用（用于从 C 程序中执行任何可执行文件）或在 fork() 之后很快退出的情况。当只需要子进程为父进程执行命令时，不需要复制父进程的页面，因为 exec 将调用它的进程的地址空间替换为要执行的命令。
> 
> 在这种情况下，将使用一种称为写时复制 (COW) 的技术。使用这种技术，当发生分叉时，不会为子进程复制父进程的页面。相反，页面在子进程和父进程之间共享。每当进程（父进程或子进程）修改页面时，都会为执行修改的进程（父进程或子进程）单独制作该特定页面的单独副本。然后，此过程将使用新复制的页面，而不是在所有未来引用中共享的页面。另一个进程（没有修改共享页面的进程）继续使用页面的原始副本（现在不再共享）。这种技术被称为写时复制，因为当某些进程写入时页面被复制。

似乎当任何一个进程尝试写入页面时。页面的新副本被分配并分配给产生页面错误的进程。原始页面随后被标记为可写。

我的问题是：如果在任何进程尝试写入共享页面之前多次调用分叉会发生什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T04:47:49.977

如果`fork`从原始父进程多次调用，则每个子进程和父进程都将其页面标记为只读。当子进程尝试写入数据时，父进程的页面将被复制到其地址空间，并且复制的页面在子进程中被标记为可写，但在父进程中不可写。

如果`fork`从子进程调用并且孙子进程尝试写入，则原始父进程的页面被复制到第一个子进程，然后再到孙子进程，并且所有内容都标记为可写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T04:42:07.583

如果原始页面属于单个进程，则仅将其标记为可写，如果有多个分叉，则可能不是这种情况。新页面总是被标记为可写，因为它只属于试图写它的进程。

# hadoop - 在 Random Partitioner 中按行键过滤数据

> ID：13813653
> 
> 赞同：0
> 
> 时间：2012-12-11T04:28:26.277
> 
> 标签：hadoop, mapreduce, cassandra

我正在研究 Cassandra Hadoop 集成 (MapReduce)。我们习惯于`RandomPartitioner`插入数据以获得更快的写入速度。现在我们必须在 MapReduce 中从 Cassandra 读取该数据并对其执行一些计算。

从我们在 cassandra 中拥有的大量数据中，我们只想为特定的行键获取数据，但由于`RandomPartitioner`- 代码中有一个断言，我们无法做到这一点。

谁能指导我如何根据 Cassandra 级别本身的行键过滤数据（我知道数据使用行键的哈希分布在各个区域）？

使用二级索引（仍然试图了解它们是如何工作的）会解决我的问题还是有其他解决方法？

我想使用 cassandra MR 来计算一些 KPI 的数据，这些数据连续存储在 cassandra 中。所以这里每次都从 cassandra 获取整个数据对我来说似乎是一种开销？我使用的 rowkey 就像 "(timestamp/60000)_otherid"; 此 CF 包含对存储在其他 CF 中的实际数据的行键的引用。因此，为了计算 KPI，我将工作一分钟并从其他 CF 获取数据并进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:51:46.330

使用 RandomPartitioner 时，键*未排序*，因此您无法对键进行范围查询以限制数据。二级索引适用于列而不是键，因此它们也不会帮助您。您有两种过滤数据的选项：

选择一个允许您指定 thrift 的数据模型`SlicePredicate`，这将为您提供一系列列，而不管键如何，如下所示：

```
SlicePredicate predicate = new SlicePredicate().setSlice_range(new SliceRange(ByteBufferUtil.bytes(start), ByteBufferUtil.bytes(end), false, Integer.MAX_VALUE));
ConfigHelper.setInputSlicePredicate(conf, predicate); 
```

或者使用您的地图阶段通过简单地忽略超出您所需范围的输入键来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:48:42.017

我不熟悉 Cassandra Hadoop 集成，但尝试了解如何使用哈希系统自己查询数据可能是错误的方法。

我会查看您正在使用的 Cassandra 客户端（Hector、Astynax 等）并询问如何通过行键查询。

按行键查询是 Cassandra 中非常常见的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:32:20.123

本质上，如果您仍想使用 RandomPartitioner 并希望能够进行范围切片，则需要创建反向索引（也称为反向索引）。我在[这里](https://stackoverflow.com/questions/13700288/timestamp-date-as-key-for-cassandra-column-family-hector/13727713#13727713)回答了一个涉及时间戳的类似问题。

具有以编程方式生成行键的能力允许您在行键上模拟范围切片。为此，您必须编写自己的 InputFormat 类并手动生成拆分。

# c# - C# 编译器编译 .txt .obj .java 文件

> ID：13813654
> 
> 赞同：17
> 
> 时间：2012-12-11T04:28:27.700
> 
> 标签：c#, compiler-construction

```
using System;
class Program {
    public static void Main() {
        Console.WriteLine("Hello World!");
        Console.ReadLine();
    }
} 
```

我将文件另存为`1.java`,`2.obj`和`3.txt`. 然后我使用 Visual Studio 命令提示符编译该文件：`csc 1.java csc 2.obj csc 3.txt`

令人惊讶的是，它将所有 3 个文件编译为可执行文件并成功执行。

谁能给我解释一下这种行为？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-11T04:33:21.640

文件扩展名对 C# 编译器无关紧要：只要它正确获取程序的文本，编译器就不会查看文件的名称或扩展名。C# 编译器的[文档](http://msdn.microsoft.com/en-us/library/78f4aasd%28v=vs.80%29.aspx)没有提到命名要求^*。

与 Java 相比，文件名和位置很重要。Java 编译器只需要`*.java`源文件，[文件名与其中的公共类的名称匹配](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html)：

> 源代码文件名必须有 .java 后缀，类文件名必须有 .class 后缀，源文件和类文件都必须有标识类的根名称。

* * *

^*即使编译器不需要它，它`*.cs`仍然是 C# 源文件普遍接受的命名约定。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-11T05:00:00.837

[开始 C# 对象：从概念到代码 - Jacquie Barker、Grant Palmer](http://books.google.com.pk/books?id=id86cAxxffcC&pg=PA425&lpg=PA425&dq=The%20recommended%20convention%20is%20to%20end%20source%20code%20file%20names%20with%20the%20extension%20.cs,%20but%20there%20is%20no%20requirement%20to%20do%20so&source=bl&ots=YAw-OMko6J&sig=Xu2inSY76cnSwaZugZK_Xmg46E4&hl=en&sa=X&ei=Rr3GUJ_EE4HU0QWun4DgDA&ved=0CC0Q6AEwAA#v=onepage&q=The%20recommended%20convention%20is%20to%20end%20source%20code%20file%20names%20with%20the%20extension%20.cs,%20but%20there%20is%20no%20requirement%20to%20do%20so&f=false)

> 推荐的约定是以扩展名 .cs 结尾的源代码文件名，但没有要求这样做；例如，一个源文件可以被命名为 Person.boo

也出自[同一本书](http://www.amazon.com/gp/search?index=books&linkCode=qs&keywords=159059360X)。

> 同样，C# 源文件的名称不必与该文件中定义的类或接口的名称匹配。例如，定义教授类的代码可以放在一个名为 Blah.cs 的文件中，但源文件名与文件中声明的类或接口的名称相匹配被认为是一种很好的做法。

# android - BroadcastReceiver as it's own class or instantiate it internally in an activity or service class? which is better?

> ID：13813656
> 
> 赞同：1
> 
> 时间：2012-12-11T04:28:38.200
> 
> 标签：android, service, broadcastreceiver

Which is better? To instantiate a Broadcast receiver inside an Activity or in Service class, or make a class that extends BroadcastReceiver?

Below is an example where I instantiate BroadcastReceiver inside a Service class.

```
 public BroadcastReceiver receiver = new BroadcastReceiver() {
    private String filename;

    @Override
    public void onReceive(Context context, Intent intent){
        String action = intent.getAction();
        Bundle extras = intent.getExtras();
        filename = extras.getString("AudioPath");
    Toast.makeText(AudioService.this, "the audio file name sent: " + filename , Toast.LENGTH_LONG).show();
    if(action.equals("com.porno.xxx.AudioPlay")){
            selectedAudioPath = audiopath;
            String state = intent.getExtras().getString("stringdata");
            playSong();
            Toast.makeText(AudioService.this, "play audio from service string data "+ state, Toast.LENGTH_LONG).show();

        }
        else if(action.equals("com.porno.xxx.AudioPause")){
            pauseSong();

            selectedAudioPath = audiopath;
            Toast.makeText(AudioService.this, "pause audio from service", Toast.LENGTH_LONG).show();
        }
        else if(action.equals("com.porno.xxx.AudioSelector")){
            Toast.makeText(AudioService.this, "music selector from service", Toast.LENGTH_LONG).show();
            Intent i = new Intent();
            audiopath = intent.getStringExtra("filename");
            Toast.makeText(AudioService.this, "selelcted audio path: " + audiopath, Toast.LENGTH_LONG).show();
        }
        else if(action.equals("com.porno.xxx.AudioRelease")){
            Toast.makeText(AudioService.this, "My Service Stopped and destoryed", Toast.LENGTH_LONG).show();
            player.stop();
            if (player != null) player.release();

                }   

        }

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:06:13.230

*我在打字时提交并接受了一个答案，所以这就是我所在的位置，很高兴您已经找到了答案！:)*

根据您（明显）作为媒体播放器的用途，我建议将播放器实现为服务（如果用户离开，则可以继续在后台运行）或活动（如果不需要此功能或适合您的应用程序..)

a 的典型实现`BroadcastReceiver`是作为应用程序的独立组件，在 Manifest 中声明，即使应用程序已被终止，它也允许它接收广播；它将开始接收广播，然后在处理后停止。

`BroadcastReceiver`相反，正如您所做的那样，将其创建为内部类可能是有利的。当您只处理自己的操作时，这非常棒，因为它很容易启动和停止接收器。

在您`Service`的`onCreate()`方法中，您可以创建操作过滤器，然后可以根据应用程序的状态轻松启用或禁用它：

```
/* service */

public static final ACTION_PAUSE = "com.example.action_pause";

@Override
public void onCreate() {
    IntentFilter filter = new IntentFilter();
    filter.addAction(Intent.ACTION_SCREEN_ON); /* Android action example */
    filter.addAction(MyClass.ACTION_PAUSE); /* Custom action example*/
    registerReceiver(mIntentReceiver, filter);
}

private BroadcastReceiver mIntentReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.v(TAG, "mIntentReceiver.onReceive() action:"+ intent.getAction() );
        handleCommand(intent);
    } // end onReceive
}; /* end BroadcastReceiver */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:09:45.057

首先，您计划要使用广播接收器做什么。然后你分析最佳可行的解决方案。如果您想在活动中注册和取消注册广播接收器，那么您的源代码就可以了。

例如，如果您想在应用程序未执行时调用广播接收器。（这意味着退出应用程序而不是强制关闭）。那么你不应该在编码中注册和注销广播接收器。为此，您创建/实现了一个从 BroadcastReceiver 扩展的单独类。在清单文件中，您要添加广播接收器。

# python - 在 python 中嵌入猪。AttributeError：SimplePigStats 对象没有属性“isSuccessfull”

> ID：13813665
> 
> 赞同：0
> 
> 时间：2012-12-11T04:29:11.723
> 
> 标签：python, hadoop, embed, apache-pig

运行嵌入 Python 脚本的 pig 时遇到 python 错误。解决了问题，但想知道是否有其他人遇到此错误。

场景：a) 带有 pig 的 Python 脚本是这样的。

```
pigRun = Pig.compileFromFile(self.settingsReader.getScriptsDir() + "/" + script.name)
params = { 'datefrom': '2012-08-04 00:00:00', 'dateto': '2012-12-05 00:00:00', 
       'parallelism':self.settingsReader.getParallelism(), 
       'input' : script.input, 'output':script.output}
        bound = pigRun.bind(params)
        stats=bound.runSingle()
        if not stats.isSuccessfull():
          raise 'failed' 
```

b) Pig 版本为 0.10。Python 2.7、Jython 2.5 出现错误

```
if not stats.isSuccessfull():
          raise 'failed' 
```

c) 错误如下 AttributeError: 'org.apache.pig.tools.pigstats.SimplePigStats' object has no attribute 'isSuccessfull'

查看 Apache PIG 0.10 的源代码后，SimplePigStats 似乎实现了 isSuccessfull() 。但是运行时错误说不是。

临时解决方案：更改失败检查代码如下

```
bound = pigRun.bind(params)
stats= bound.runSingle()
     if stats.getReturnCode() != 0:
        raise 'failed' 
```

这似乎工作正常。

# php - PHP CURL 超时但 CLI CURL 有效

> ID：13813667
> 
> 赞同：2
> 
> 时间：2012-12-11T04:29:16.980
> 
> 标签：php, curl, nginx, timeout

我看到我正在构建的 PHP 应用程序存在一个非常奇怪的问题。

我的开发服务器（Windows 7 64 位）`sometestsite.com`和`endpoint.sometestsite.com`.

在我的`hosts`文件中，我配置`sometestsite.com`并`endpoint.sometestsite.com`指向`127.0.0.1`.

当服务器运行 Apache 2.4.2 和 PHP 5.4.9 作为 fcgi 模块时，一切正常。

然后我删除了 Apache 并安装了 nginx-1.2.5 (windows build)。我让 php-cgi.exe 作为服务运行，一切似乎都运行良好。

问题是`sometestsite.com`对`endpoint.sometestsite.com`以前工作的 CURL 调用会超时。

然后我将这段代码单独移动到一个小的 PHP 文件中进行测试：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://endpoint.sometestsite.com/test');
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, array('provider' => urlencode('provider'),
'key' => urlencode('asdf')));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

//Execute and get the data back
$result = curl_exec($ch);

var_dump($result); 
```

这是我在 PHP 日志中收到的内容：

```
PHP Fatal error:  Maximum execution time of 30 seconds exceeded in D:\www\test5.php on line 22
PHP Stack trace:
PHP   1\. {main}() D:\www\test5.php:0 
```

但是，如果我使用 CLI CURL（通过 Git Bash）运行相同的请求，它可以正常工作：

```
$ curl -X POST 'http://endpoint.sometestsite.com/test' -d'provider=provider&key=asdf'
{"test": "OK"} 
```

这很奇怪，因为 PHP 的版本和使用 Apache 时的配置完全相同。

我不确定这是 Web 服务器配置问题还是 PHP 的 CURL 问题。

任何人都可以提供一些关于为什么会发生这种情况的见解/过去的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:09:24.410

Nginx 不会为您生成 php-cgi.exe 进程。如果你像我一样来自 Apache 并使用 mod_fcgid，你会发现系统中有很多 php-cgi.exe 进程。

由于 Nginx 不会为您生成 PHP 进程，因此您需要自己启动该进程。就我而言，我已`php-cgi.exe -b 127.0.0.1:9000`自动作为服务运行。Nginx 然后将所有 PHP 请求推送到 PHP 处理程序并接收响应。

问题：[PHP-FPM 在 Windows 上不起作用](https://stackoverflow.com/questions/4539670/php-fpm-for-windows)（从 5.4.9 开始）。FPM 是一个简洁的小进程管理器，它位于后台，在处理请求时管理 PHP 进程的生成和终止。

因为这是不可能的，在 Windows 上，我们一次只能服务 1 个请求，类似于[这里遇到的问题](https://stackoverflow.com/questions/2793996/php-running-as-a-fastcgi-application-php-cgi-how-to-issue-concurrent-request)。

在我的情况下，会发生以下情况：在我的应用程序中调用一个页面，在该页面上`sometestsite.com`调用`php-cgi.exe`on `127.0.0.1:9000`。在内部，一个 CURL 请求调用`endpoint.sometestsite.com`. 但是，我们无法生成任何新的 PHP 进程来处理第二个请求。原来的 php-cgi.exe 被服务正在运行 CURL 请求的请求所阻止。所以，我们陷入了僵局，然后一切都超时了。

我使用的解决方案（它几乎是一个 hack）是使用这个[python 脚本](https://bitbucket.org/cybergene/spawn-php/wiki/Home)来生成 10 个 PHP 进程。

然后，您在 nginx 中使用上游块（根据脚本的文档）告诉 nginx 有 10 个进程可用。

然后事情就完美了。

话虽如此，请不要在生产中使用它（无论如何你最好在 Linux 上运行 nginx 和 php-fpm）。如果您有一个繁忙的站点，那么 10 个进程可能还不够。但是，可能很难知道您需要多少进程。

但是，如果您坚持在 Windows 上使用 php 运行 nginx，请考虑按照[本教程](http://pcszeng.wordpress.com/2010/07/27/nginx-php-fpm-mysql-under-cygwin/)在 Cygwin 中运行 PHP-FPM 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-29T07:52:35.177

确保从用于运行 cgi 进程的同一用户在控制台上运行脚本。如果它们不相同 - 它们可能具有不同的权限。对我来说，问题在于防火墙规则不允许为 cgi 进程的所有者打开外部连接。

# google-app-engine - 未找到 API 包“通道”或调用“CreateChannel()”

> ID：13813668
> 
> 赞同：2
> 
> 时间：2012-12-11T04:29:21.787
> 
> 标签：google-app-engine, tomcat7

我有一个简单的 Web 应用程序托管在带有单个 servlet 的 tomcat-7 上。servlet 的目的是创建 google 频道，然后在为用户打开的频道上请求令牌。我有以下配置...

```
WEB-INF
  -- lib
    -- appengine-api-1.0-sdk-1.4.3.jar
  -- classes
    -- Gc.class 
```

Gc.java的来源是...

```
import com.google.appengine.api.channel.*;
public class Gc extends HttpServlet {
  protected void doGetPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    response.getWriter().write("Creating channel...<br>");
    ChannelService channelService = ChannelServiceFactory.getChannelService();
    response.getWriter().write("Channel created!<br>");
    response.getWriter().write("Getting token for user 'user1'...<br>");
    String token = channelService.createChannel("user1");
    response.getWriter().write("toekn => "+token);
  }
} 
```

但它给了我一个以下错误......

```
type Exception report

*message* **The API package 'channel' or call 'CreateChannel()' was not found.**

*description* **The server encountered an internal error (The API package 'channel' or call 'CreateChannel()' was not found.) that prevented it from fulfilling this request.**

exception

com.google.apphosting.api.ApiProxy$CallNotFoundException: The API package 'channel' or call 'CreateChannel()' was not found.
    com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:98)
    com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:50)
    com.google.appengine.api.channel.ChannelServiceImpl.createChannel(ChannelServiceImpl.java:40)
    webRtc.Gc.doGetOrPost(Gc.java:46)
    webRtc.Gc.doGet(Gc.java:31)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

** 我错过了一些图书馆吗？如果是，那么我可以在哪里找到这些。** 非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:43:41.713

我知道了！！！我的应用程序的目标是创建谷歌频道并在这些频道上发送消息。

我的印象是，google channel API 是一个独立的库，并试图将相关的 .jar 放在我的 tomcat 应用程序的 lib 中。

但是我错了。Google 频道 API 库仅适用于 Google AppEngine 服务器。因此，任何需要利用这些 Google API 的应用程序都必须托管在 Google AppEngine 服务器上。

如果我错了，我愿意听取专家的意见。

# json - 角度资源将一维字符串数组解析为 2d

> ID：13813673
> 
> 赞同：62
> 
> 时间：2012-12-11T04:30:17.343
> 
> 标签：json, angularjs

来自服务器的以下 JSON 响应

```
[
    "hello",
    "world"
] 
```

此 ngResource 服务正在将其解析为二维数组

```
myService.factory('Name', function($resource){
    return $resource(site_url+'api/accounts/:accountId/names/', {}, {
        list: {method:'GET', params:{}, isArray:true}
    });
}); 
```

像这样称呼

```
$scope.names = Name.list({accountId:$scope.account.id}, function(e){
    console.log(e);
}); 
```

追溯到

```
[{"0":"h","1":"e","2":"l","3":"l","4":"o"},{"0":"w","1":"o","2":"r","3":"l","4":"d"}] 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-12-11T08:04:11.870

TLDR；**ngResource**在您的响应中需要一个对象或***对象***数组。

* * *

当在操作列表中`isArray`设置为时， **ngResource**模块会遍历响应中收到的每个项目，并创建一个新的资源实例。为此，Angular 在接收到的项目和类之间执行深度复制，这为我们提供了一个具有特殊方法的对象（等等）`true`**`Resource``$save``$delete`**

 **在此处查看[来源](https://github.com/angular/angular.js/blob/master/src/ngResource/resource.js#L385-L394)。

内部 angular 使用**[angular.copy](http://docs.angularjs.org/api/angular.copy)**来执行深拷贝，这个函数只对**对象**和**数组**进行操作，当我们传递一个字符串时，它将把它当作一个对象。

通过提供对每个字符的顺序访问，JS 中的字符串可以表现为数组。`angular.copy`传递字符串时将产生以下内容

```
angular.copy('hi',{})   => {0:'h', 1:'i'} 
```

每个字符都成为对象中的一个值，其索引设置为键。**ngResource**将提供具有属性`0`和`1`.

* * *

您的选择是：

### 使用较低级别的**$http**服务

```
$http.get('/res').success(function(data){
  $scope.test = data;
}); 
```

### 在您的 json 响应中返回一个对象数组

```
[{'data': "hello"}, {'data': "world"}] 
```

### 拦截响应并更改您的数据

如果您无法修改服务器发回的数据并想使用**ngResource**，则需要转换响应。[在此处](http://docs.angularjs.org/api/ng.$http)阅读如何操作

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-16T12:55:45.180

我也一直在为此苦苦挣扎。这是我通过使用查询稍微调整服务的解决方案

```
var app = angular.module('testApp', ['ngResource']);

app.factory('Name', function($resource, $sce) {
  var path = "test.json";

  return $resource(path, {}, {
    query: {
      method: 'GET',
      isArray: false
    }
  })
});

app.controller('testController', function($scope, Name) {
  $scope.result;

  $scope.getResult = function() {
    Name.query(function(data) {
      $scope.result = data;
    });
  };

  $scope.getResult();
}); 
```

HTML：

```
<!DOCTYPE html>
<html ng-app="testApp">

<head>

  <link href="style.css" rel="stylesheet" />
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular-resource.min.js"></script>

  <script src="script.js"></script>
</head>

<body ng-controller="testController">
  <h1>{{result.surname}}</h1>

</body>

</html> 
```

和 JSON 文件：

```
{
    "name": "Homer",
    "surname":  "Simpson",
    "Town": "Springfield"
} 
```

如果有兴趣，也可以使用 Plunker：http: [//plnkr.co/edit/SwqlZyqZ4zfcpaLxaf39](http://plnkr.co/edit/SwqlZyqZ4zfcpaLxaf39)

希望这可以帮助某人...**

# mysql - MySQL时间戳差异

> ID：13813675
> 
> 赞同：22
> 
> 时间：2012-12-11T04:30:39.337
> 
> 标签：mysql, timestamp

我有一个带有列时间戳的表，它存储具有以下格式的时间戳：“2012-12-10 21:24:30”

我正在寻找一个 SQL 查询，它采用当前时间戳并将其与列中的时间戳相减，并以这种格式给出差异：

“还剩 3 小时 2 分钟”

寻找执行此操作的 MySQL 查询。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-11T04:35:21.823

利用[`TIMESTAMPDIFF`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

```
TIMESTAMPDIFF(unit,datetime_expr1,datetime_expr2) 
```

> 其中 unit 参数，应该是以下值之一：MICROSECOND（微秒）、SECOND、MINUTE、HOUR、DAY、WEEK、MONTH、QUARTER 或 YEAR。

**我的方法：**将单位设置为**SECOND** ，然后使用**[SEC_TO_TIME](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_sec-to-time)**

```
SELECT SEC_TO_TIME(TIMESTAMPDIFF(SECOND,`table`.`time_column`,CURRENT_TIMESTAMP()))

// will return in hh:mm:ii format 
```

### 更新

如果少于 48 小时返回**是？**`HourDifference`否则**没有**

```
SELECT IF(TIMESTAMPDIFF(HOUR,`time_column`,CURRENT_TIMESTAMP())< 48  ,'yes','no') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T04:54:50.530

假设您的表名是“testtable”

表创建查询如下

```
CREATE TABLE `testtable` (
    `id` INT(2) NOT NULL AUTO_INCREMENT,
    `period` TIMESTAMP NULL DEFAULT NULL,
    PRIMARY KEY (`id`)
) 
```

插入一些数据来测试我的查询。下面给出了插入一些数据的查询

```
INSERT INTO `testtable` (`id`, `period`) VALUES
    (1, '2012-12-10 17:21:09'),
    (2, '2012-11-06 18:21:12'),
    (3, '2012-12-06 18:21:18'),
    (4, '2012-12-06 19:21:24'),
    (5, '2012-12-06 18:21:27'); 
```

现在执行以下查询以获得您的答案

```
SELECT *, 
       CONCAT(HOUR(difftime), ' hours ', MINUTE(difftime), ' Minutes ', 
       SECOND(difftime), ' seconds remaining') AS timetaken 
FROM   (SELECT *, 
               SEC_TO_TIME(UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP( 
               ttable.period)) AS 
                      diffTime 
        FROM   testtable ttable) AS temptable1 
```

输出如下

![在此处输入图像描述](../Images/8b132b93d340d0461adb2e63930a1509.png)

'timetaken' 列将显示答案。

# android - 使用Phonegap HTML5在android上调用本机函数

> ID：13813677
> 
> 赞同：1
> 
> 时间：2012-12-11T04:30:41.643
> 
> 标签：android, cordova, native

> **可能重复：**
> [Android Java 和 Phonegap Javascript 之间的通信？](https://stackoverflow.com/questions/2727763/communication-between-android-java-and-phonegap-javascript)

我刚刚开始使用 Phonegap 和 Android 进行开发。我想知道，如果我在 HTML 页面上有一个按钮，该按钮是否能够调用本机函数？例如，假设我希望按钮打开日历并从 html 表单传递变量

在 Android 原生和 HTML5 方面，我完全是新手

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:40:39.830

您基本上需要在单击按钮时调用 javascript 代码并编写自己的 phonegap 插件来调用本机功能。

[Phonegap Android 插件开发](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:34:19.840

是的，您可以从 phonegap 中的 java 脚本调用 java 代码。请参阅[此处](http://www.speakingcode.com/2012/05/29/call-native-android-java-code-from-html5javascript-using-phonegap-plugins-and-implement-async-callbacks/)

# c# - Ninject 是否允许将 IKernel 注入位置？

> ID：13813681
> 
> 赞同：3
> 
> 时间：2012-12-11T04:31:57.813
> 
> 标签：c#, dependency-injection, ninject

我目前正在学习 Ninject 和依赖注入，在我当前的设置中，我将 IKernel 传递到一些地方，以便其他类可以实例化某些类或获取工厂实例。

目前我已经将我的工厂绑定为单例，并且将 IKernel 传递给一个对象然后这样做`_kernel.Get<ISomethingFactory>().CreateSomething()`似乎有点代码味道，只是将 Ninject 变成了一个美化的服务定位器。

此外，我的工厂正在传递 IKernel，因此他们可以解决他们创建的相应接口的绑定实现。

我的问题是：

1.  是否允许工厂以这种方式运行，或者工厂是否应该简单地实例化具体类型本身？

2.  我应该赞成通过构造函数传递工厂/其他服务，而不是到处传递 IKernel 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T04:42:23.607

我不想……但这只是我。

另外，我不创建自己的工厂。我使用 Ninjects 工厂扩展。你可以在这里找到它：

[https://github.com/ninject/ninject.extensions.factory](https://github.com/ninject/ninject.extensions.factory)

基本上，您可以像平常一样创建绑定，然后为工厂创建接口（假设此处为 WinForms）：

```
public interface IMainFormFactory {
    frmLogin CreateLoginForm();
    frmSettings CreateSettingsForm();
    IRepository<MainFormModel> CreateMainFormRepository();
} 
```

..并将其与`ToFactory`扩展名绑定：

```
using Ninject.Factories; // can't quite remember namespace at the moment

public class FactoryModule : NinjectModule {
    protected override void Load() {
        Bind<IMainFormFactory>().ToFactory();
    }
} 
```

工厂扩展不需要你定义这个接口的具体实现。它已经知道如何根据你提供的绑定来处理这些对象（并且仍然会实例化你没有定义绑定的任何东西......例如表单。在幕后，它会为您创建一个实现此接口的管理器）。

那么，您可以执行以下操作：

```
private readonly IMainFormFactory _factory;

public frmMainForm(IMainFormFactory factory) {
    _factory = factory;
}

public void btnSettings_Click(object sender, EventArgs e) {
    // show the settings form..
    var settingsForm = _factory.CreateSettingsForm();
    settingsForm.ShowDialog();
} 
```

..然后在 frmSettings 它也会注入：

```
public frmSettings(ISettingsFormFactory factory) {
    // as above except for ISettingsFactory
} 
```

..这就是我选择做事的方式。也许其他人有更好的想法（我也有兴趣听到它们！）。

# java - 无法设置 ant 任务来缩小 javascript 文件

> ID：13813682
> 
> 赞同：1
> 
> 时间：2012-12-11T04:32:24.050
> 
> 标签：java, javascript, ant, yui

我在 Netbeans 7.1.2 和 Ant 1.8.2 中使用 YUI Compressor 作为 Ant 任务时遇到问题。

运行“缩小”蚂蚁目标时，出现以下错误：

```
taskdef class net.noha.tools.ant.yuicompressor.tasks.YuiCompressorTask cannot be found using the classloader AntClassLoader[] 
```

缩小蚂蚁目标看起来像：

```
<target name="minify">
   <!--${libs} is path to the downloaded jars -->
   <property
       name="yui-compressor.jar"
       location="${file.reference.yuicompressor-2.4.2.jar}" />
   <property
       name="yui-compressor-ant-task.jar"
       location="${file.reference.yui-compressor-ant-task-0.5.jar}" />

   <property
       name="YUIAnt.jar"
       location="${file.reference.YUIAnt.jar}" />

   <path id="task.classpath">
       <pathelement location="${yui-compressor.jar}" />
       <pathelement location="${yui-compressor-ant-task.jar}" />
       <pathelement location="${YUIAnt.jar}" />
   </path>

   <!-- yui-compressor task definition -->
   <taskdef
       name="yui-compressor"
       classname="net.noha.tools.ant.yuicompressor.tasks.YuiCompressorTask">

       <classpath refid="task.classpath" />
   </taskdef>

   <!-- invoke compressor -->
   <yui-compressor warn="false" charset="UTF-8" fromdir="${build.dir}" todir="${build.dir}">
       <include name="/Projects/netbeans/testproj/src/resources/insert-image-dialog.js" />
       <include name="/Projects/netbeans/testproj/src/resources/anotherjs.js" />
   </yui-compressor>

  </target> 
```

我的 Netbeans “project.properties”文件看起来像

```
dist.dir=dist
dist.jar=${dist.dir}/Dec102012.jar
dist.javadoc.dir=${dist.dir}/javadoc
endorsed.classpath=
excludes=
file.reference.yui-compressor-ant-task-0.5.jar=/Users/someuser/Downloads/yui-compressor-ant-task-0.5/bin/yui-compressor-ant-task-0.5.jar
file.reference.YUIAnt.jar=/Users/someuser/Downloads/YUIAnt.jar
  file.reference.yuicompressor2.4.2.jar=/Users/someuser/Downloads/builder/componentbuild/lib/yuicompressor/yuicompressor-2.4.2.jar
includes=**
jar.compress=false
javac.classpath=\
    ${file.reference.yuicompressor-2.4.2.jar}:\
    ${file.reference.yui-compressor-ant-task-0.5.jar}:\
    ${file.reference.YUIAnt.jar} 
```

另外，我尝试了以下方法：

```
jar -tvf yui-compressor-ant-task-0.5.jar 
 0 Thu Feb 25 02:15:32 EST 2010 META-INF/
102 Thu Feb 25 02:15:30 EST 2010 META-INF/MANIFEST.MF
 0 Thu Feb 25 02:15:30 EST 2010 net/
 0 Thu Feb 25 02:15:30 EST 2010 net/noha/
 0 Thu Feb 25 02:15:30 EST 2010 net/noha/tools/
 0 Thu Feb 25 02:15:30 EST 2010 net/noha/tools/ant/
 0 Thu Feb 25 02:15:30 EST 2010 net/noha/tools/ant/yuicompressor/
 0 Thu Feb 25 02:15:30 EST 2010 net/noha/tools/ant/yuicompressor/tasks/
 2993 Thu Feb 25 02:15:30 EST 2010      net/noha/tools/ant/yuicompressor/tasks/CompressionStatistics.class
  1611 Thu Feb 25 02:15:30 EST 2010 net/noha/tools/ant/yuicompressor/tasks/FileType.class
  2141 Thu Feb 25 02:15:30 EST 2010 net/noha/tools/ant/yuicompressor/tasks/YuiCompressorTask$1.class
  7265 Thu Feb 25 02:15:30 EST 2010 net/noha/tools/ant/yuicompressor/tasks/YuiCompressorTask.class
   175 Thu Feb 25 02:15:30 EST 2010 META-INF/INDEX.LIST 
```

这显然证明了“YuiCompressorTask.class”的存在，这就是为什么我上面的错误没有意义。

我需要将 jar 文件添加到某种 Ant 库主页吗？目前我只是像大多数项目一样将它们添加到普通的 Netbeans 类路径中。我猜 Ant Runtime 完全使用了不同的库路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:45:35.593

从[运行 Apache Ant](https://ant.apache.org/manual/running.html)：

> 可以使用 -lib 选项添加要搜索的其他目录。-lib 选项指定搜索路径。路径目录中的任何 jar 或类都将添加到 Ant 的类加载器中。将 jars 添加到类路径的顺序如下：
> 
> *   -lib jars 按命令行上 -lib 元素指定的顺序
> *   来自 ${user.home}/.ant/lib 的 jars（除非设置了 -nouserlib）
> *   来自 ANT_HOME/lib 的罐子

# facebook-graph-api - 根据关键词post获取FB用户列表

> ID：13813683
> 
> 赞同：0
> 
> 时间：2012-12-11T04:32:30.417
> 
> 标签：facebook-graph-api

我迫切需要从 Facebook 中提取一些数据。感谢是否有人可以提供帮助。

我需要根据用户帖子中找到的关键字提取过去 30 天内发布的 facebook 用户 (ID) 列表、他的帖子、他的朋友列表和他的朋友。发帖的用户来自特定国家。

例如，我正在查找发布过“Woodstock 2013”​​一词的美国/美国用户的列表、这些帖子以及过去 30 天内回复该帖子的他的朋友。

我不是很擅长编程，所以非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T21:59:00.593

仅仅基于 Facebook API 中支持的隐私和开发者政策的性质，这是不可能的。您需要这些用户的明确权限。

# entity-framework-5 - 如何使用EntityFramework System.Data.Objects.ObjectView 集合类？

> ID：13813691
> 
> 赞同：1
> 
> 时间：2012-12-11T04:33:22.437
> 
> 标签：entity-framework-5, msdn

处理`Selected`a 的事件时`EntityDataSource`，该`Results`属性`EntityDataSourceSelectedEventArgs`返回`ObjectView`我的实体的集合。我不确定这门课是什么。[这个指向 Namepace 的链接](http://msdn.microsoft.com/en-us/library/system.data.objects.aspx)没有提到这个类。

有关于这个`System.Data.Objects.ObjectView`集合类的任何文档吗？我如何将 a 转换`ObjectView<T>`为 a `List<T>`？也许它就像枚举集合并将项目添加到新的一样简单`List<T>`，但是有关该类的一些信息会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:12:31.413

ObjectView 类是内部的，因此您在 MSDN 上找不到它。重要的信息是它实现了[IBindingListInterface](http://msdn.microsoft.com/en-us/library/system.componentmodel.ibindinglist%28v=vs.110%29.aspx)

# iphone - 应用商店启动后更改 iOS 应用

> ID：13813695
> 
> 赞同：0
> 
> 时间：2012-12-11T04:33:57.240
> 
> 标签：iphone, ios, app-store

iOS 是否有任何库或服务可以更改实时（在应用商店中）iPhone 应用 UI？

我现在可以看到它工作的唯一方法是使用 Web 视图，但我更愿意使用本机解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:46:20.760

显然，您可以使用 CSS 属性（如网页样式）来控制 UI 样式。如果您使用这种方法设计您的应用程序，那么您可以将该 CSS 文件存储在服务器上。当应用程序启动时，您可以告诉它从服务器读取 CSS 文件并相应地设置其界面样式。因此，如果您在 CSS 文件中进行了任何更改，这些更改将在应用程序再次启动时反映在 UI 中。

这是一个链接，解释了样式按钮、表格等的 CSS 方法。

参见网页：[NUI for iOS - Cocoa Controls](http://www.cocoacontrols.com/platforms/ios/controls/nui)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:37:57.053

如果您可以更具体地了解“更改”，如果您从服务器或网站提取数据，您可以做任何您想做的事情。您只需要更新网站，让应用程序请求数据或更新，应用程序就会收到新数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T16:03:58.457

我同意 Gavin 的观点，您可以使用[NUI](http://www.cocoacontrols.com/platforms/ios/controls/nui)之类的 CSS 样式工具，或者更精致的[nativeCSS](http://nativecss.com)来在本地应用程序发布后更改其外观。

我已经通过应用商店获得了 nativeCSS 应用程序并以这种方式运行。这并没有真正为应用程序提供功能更改，但允许在准备好时解锁区域。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T04:48:54.673

我为我的一些公共和非公共应用程序所做的是在 amazon s3 服务器上托管一个 plist 文件，非常划算，如果你有自己的 web 服务器就更好了。然后我将解析该 plist 并在我的应用程序中建立一个体系结构，该体系结构将根据 plist 的指令构建接口。举个简单的例子，假设你想通过 web pull 来决定你的应用程序背景颜色。您可以在 plist 文件中有一个字典，它将使用键 backgroundR、backgroundB、backgroundG、backgroundA（RGB 值和 alpha）存储 4 个值。然后，您可以解析 plist 文件并使用 rgb 和 alpha 值填充 UIColor 并将其设置为背景颜色。不要忘记内置默认值，以防无法访问文件。

# php - 使用 PHP 更改远程地址

> ID：13813706
> 
> 赞同：-2
> 
> 时间：2012-12-11T04:35:01.683
> 
> 标签：php, header, fopen

```
<?php

$host = 'www.yourtargeturl.com';
$service_uri = '/detect_referal.php';
$vars ='additional_option1=yes&additional_option2=un';

$header = "Host: $host\r\n";
$header .= "User-Agent: PHP Script\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Referer: http://www.google.com/search?hl=en&q=jigh&btnG=Google+Search \r\n";
$header .= "Content-Length: ".strlen($vars)."\r\n";
$header .= "Connection: close\r\n\r\n";

$fp = fsockopen("".$host,80, $errno, $errstr);

if (!$fp) {
  echo "$errstr ($errno)<br/>\n";
  echo $fp;
} else {
fputs($fp, "POST $service_uri  HTTP/1.1\r\n");
fputs($fp, $header.$vars);
fwrite($fp, $out);

while (!feof($fp)) {
echo fgets($fp, 128);
}
fclose($fp);
}
?> 
```

这正在改变`$_SERVER['HTTP_REFERER']`. 我该如何改变`$_SERVER['REMOTE_ADDR']`。我应该附加什么代码`$header`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:37:16.223

你不能那样做。IP 地址是在 TCP 连接开始时确定的，而不是在 HTTP 标头中确定的。（有可能进行欺骗 [虽然不是远程那样]，但你不会得到回复。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:37:24.570

你不能。您连接的 IP 地址不是某个标头...它来自从您的服务器到另一台服务器的底层 TCP 连接。

# mysql - SQL 中 Group by 的替代方案

> ID：13813716
> 
> 赞同：1
> 
> 时间：2012-12-11T04:35:59.237
> 
> 标签：mysql, sql

```
Colummn1             Column2
----------------------------                             
5                    24            
5                    20
5                    13
----------------------------
2                     3
----------------------------
3                    25
----------------------------
1                     4
----------------------------
2                     6
2                    42
----------------------------
5                    23
5                    10
---------------------------- 
```

输出应该是

```
5 57
2 3
3 25
1 4
2 48
5 33

```

我有两列。当第 1 列的值相同且连续时，我想对第二列的元素求和。即我不希望分组总和包含两个段的总和 5。

我知道如何使用 Group by 子句位来聚合这两个段。请帮我为此编写 SQL 查询。

# google-chrome - 利用文档/文件创建功能

> ID：13813718
> 
> 赞同：1
> 
> 时间：2012-12-11T04:36:10.183
> 
> 标签：google-chrome, google-drive-api

寻找一些帮助来利用我想到的 chrome 应用程序的文档/文件创建功能。我尝试查看 SDK 页面，但在那里找不到太多内容，或者我找错了地方。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:20:59.437

查看此示例 Chrome 扩展程序以访问 Drive API。它为您处理一些问题，例如 OAuth 2.0，这可能有点棘手。

[https://github.com/GoogleChrome/chrome-app-samples/tree/master/gdocs](https://github.com/GoogleChrome/chrome-app-samples/tree/master/gdocs)

# facebook - 朋友状态 FQL

> ID：13813719
> 
> 赞同：0
> 
> 时间：2012-12-11T04:36:12.567
> 
> 标签：facebook, api, facebook-fql

我正在尝试使用 FQL 从 Facebook 中提取朋友的最新 50 条状态更新，但状态表和提要表似乎都按预期工作。我正在使用以下查询，但它的结果只是自上周五 @ 东部标准时间午夜以来的更新（即在 2012 年 7 月 12 日发布这篇文章时 @ 东部标准时间上午 12 点），这不足以满足我的需要。

`SELECT post_id,actor_id,target_id,message,created_time FROM stream WHERE source_id IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND filter_key = "nf" AND created_time > 1 AND type = 46 ORDER BY created_time DESC LIMIT 50`

还有其他方法可以从朋友那里获取最新的 50 条状态更新吗？我已经尝试过状态表，但其中的结果更少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T14:40:32.020

你可以试试这个

```
SELECT message, status_id, uid FROM status WHERE uid IN
        (SELECT uid2 FROM friend WHERE uid1 = me()) 
ORDER BY time DESC LIMIT 50 
```

但一定要让朋友许可信息正确；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:27:56.123

来自[http://developers.facebook.com/docs/reference/fql/stream](http://developers.facebook.com/docs/reference/fql/stream)：

> 流表的每个查询仅限于前 30 天或 50 个帖子，以较大者为准，但是您可以使用特定于时间的字段，例如 created_time 以及 FQL 运算符（例如 < 或 >）来检索更大范围的帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T21:56:38.190

试试状态表

`SELECT message, status_id, uid FROM status WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) ORDER BY time DESC LIMIT 50`

# iphone - -[CFString retain]：消息发送到已释放实例 0x215076c0

> ID：13813722
> 
> 赞同：0
> 
> 时间：2012-12-11T04:36:22.900
> 
> 标签：iphone, cocos2d-iphone, memory-management

我知道这个主题已经讨论过好几次了，但我无法弄清楚是什么导致了这个错误消息。我已经被困在这里几个星期了，这让我发疯。该方法的第一部分为 2-4 名玩家设置了一场比赛。找到匹配后，它会尝试在一定限制内添加 3 和 4 名玩家。目前，该限制仅设置为 3 秒，但我设想一旦它准备好发布，它会更大。

我知道这是 matchmakerViewController 代码中某处的内存错误。当我注释掉改变场景的代码时，我仍然得到错误。你能告诉我我做错了什么以及如何解决它吗？

```
-(void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)match
{
    NSLog(@"IN matchmakerViewController!");

    NSLog(@"Found a match!");
    //startDate = [[NSDate date] retain];

    //NSArray * playerIds1 = match.playerIDs;
    //[marray_players addObject:playerIds1];

    // Setup match
    TXGameCenterManager *gameCenterManager = [TXGameCenterManager sharedTXGameCenterManager];
    gameCenterManager.multiplayerMatch = match;
    // The delegate of the match is HelloWorldLayer
    gameCenterManager.multiplayerMatch.delegate = self;
    AppDelegate * delegate = (AppDelegate *) [UIApplication sharedApplication].delegate;
    [delegate.viewController dismissModalViewControllerAnimated:NO];

    GKMatchRequest * matchRequest = [[[GKMatchRequest alloc] init] autorelease];

    NSLog(@"playerIDs count is %d",[match.playerIDs count] );

    if( match.expectedPlayerCount==0 )
    {
        // Launching the game without waiting for connection change messages
        NSLog(@"Begin game without waiting for match connection change messages");
        // Determine the host, local or remote
        NSArray * playerIds = match.playerIDs;
        NSLog(@"Number of players: %d", [playerIds count]);
        NSLog(@"ID of player: %@", [playerIds lastObject]);
        NSLog(@"I got the player ids");

        [GKPlayer loadPlayersForIdentifiers:playerIds withCompletionHandler:^(NSArray *players, NSError * error)
         {

             NSLog(@"Player 1 %@", [[players objectAtIndex:0] alias] );
            // NSLog(@"Player 2 %@", [[players objectAtIndex:1] alias] );

            if( !error) 
                {
                NSLog(@"Local player: %@", [[GKLocalPlayer localPlayer] alias]);
                NSLog(@"Remote player: %@", [[players lastObject] alias]);
                NSLog(@"Remote player: %@", [[players lastObject] alias]);

                //NSArray *nsarray_player2 = [marray_players objectAtIndex:1];

               // remote1name= [[nsarray_player1 lastObject] alias];

                int_totalremoteplayers=[match.playerIDs count];
                boo_playersfound=true;

                localName = [[GKLocalPlayer localPlayer] alias];
                remoteName = [[players objectAtIndex:0] alias];

                NSLog(@"Player 1 %@", [[players objectAtIndex:0] alias] );
              //  NSLog(@"Player 2 %@", [[players objectAtIndex:1] alias] );

                //remote1name= [[nsarray_player1 lastObject] alias];

                if ([match.playerIDs count]==1)
                {
                    NSLog(@"IN [match.playerIDs count]==1");

                    remoteplayer1name= [[players objectAtIndex:0] alias];
                    [playernames addObject:remoteplayer1name];
                    [playernames addObject:localName];

                    NSArray *sortedArray;
                    sortedArray = [playernames sortedArrayUsingSelector:
                                   @selector(localizedCaseInsensitiveCompare:)];

                    NSLog(@"Host: %@", [sortedArray objectAtIndex:0]);
                    NSLog(@"Player1: %@", [sortedArray objectAtIndex:1]);

                    hostName=[sortedArray objectAtIndex:0];
                    remoteplayer1name=[sortedArray objectAtIndex:1];

                    if ([hostName isEqualToString:localName])
                    {
                        [[TXGameCenterManager sharedTXGameCenterManager] setHost:YES];
                    }

                }

                if ([match.playerIDs count]==2)
                {
                    NSLog(@"IN [match.playerIDs count]==2");
                    NSLog(@" [match.playerIDs count]==2 Player 1 %@", [[players objectAtIndex:0] alias] );
                    NSLog(@"[match.playerIDs count]==2 Player 2 %@", [[players objectAtIndex:1] alias] );
                    NSLog(@"[match.playerIDs count]==2 localName %@", localName );

                    remoteplayer1name= [[players objectAtIndex:0] alias];
                    remoteplayer2name= [[players objectAtIndex:1] alias];
                    [playernames addObject:remoteplayer1name];
                    [playernames addObject:remoteplayer2name];
                    [playernames addObject:localName];

                     NSLog(@"Players in playernames %d", [playernames count]);

                    NSArray *sortedArray;
                    sortedArray = [playernames sortedArrayUsingSelector:
                                   @selector(localizedCaseInsensitiveCompare:)];

                    NSLog(@"Host: %@", [sortedArray objectAtIndex:0]);
                    NSLog(@"Player1: %@", [sortedArray objectAtIndex:1]);
                    NSLog(@"Player2: %@", [sortedArray objectAtIndex:2]);

                    hostName=[sortedArray objectAtIndex:0];
                    remoteplayer1name=[sortedArray objectAtIndex:1];
                    remoteplayer2name=[sortedArray objectAtIndex:2];

                    if ([hostName isEqualToString:localName])
                    {
                        [[TXGameCenterManager sharedTXGameCenterManager] setHost:YES];
                    }

                     NSLog(@"match.expectedPlayerCount = %d",match.expectedPlayerCount);

                }

                else if ([match.playerIDs count]==3)
                {
                    remoteplayer1name= [[players objectAtIndex:0] alias];
                    remoteplayer2name= [[players objectAtIndex:1] alias];
                    remoteplayer3name= [[players objectAtIndex:2] alias];
                    [playernames addObject:remoteplayer1name];
                    [playernames addObject:remoteplayer2name];
                    [playernames addObject:remoteplayer3name];
                    [playernames addObject:localName];

                    NSArray *sortedArray;
                    sortedArray = [playernames sortedArrayUsingSelector:
                                   @selector(localizedCaseInsensitiveCompare:)];

                    NSLog(@"Host: %@", [sortedArray objectAtIndex:0]);
                    NSLog(@"Player 1: %@", [sortedArray objectAtIndex:1]);
                    NSLog(@"Player 2: %@", [sortedArray objectAtIndex:2]);
                    NSLog(@"Player 3: %@", [sortedArray objectAtIndex:3]);

                    hostName=[sortedArray objectAtIndex:0];
                    remoteplayer1name=[sortedArray objectAtIndex:1];
                    remoteplayer2name=[sortedArray objectAtIndex:2];
                    remoteplayer3name=[sortedArray objectAtIndex:3];

                    if ([hostName isEqualToString:localName])
                    {
                        [[TXGameCenterManager sharedTXGameCenterManager] setHost:YES];
                    }
                }

                NSLog(@"Player names");
                // TODO: Set the correct player names in the globals
                player1 = localName;
                player2 = [[NSUserDefaults standardUserDefaults]  objectForKey:@"player2name"];
                player3 = [[NSUserDefaults standardUserDefaults]  objectForKey:@"player3name"];
                player4 = [[NSUserDefaults standardUserDefaults]  objectForKey:@"player4name"];

                NSLog(@"Launch the game");
                // Launch the game
                int_team2tally=0;
                NSLog(@"boo_startgame");
                boo_startgame=true;
                NSLog(@"go to the required scene");
                //go to the required scene

            }

            else
            {
                NSLog(@"Error");
            }

             NSLog(@"StartMultiplayerGameTablehost");
             //gameCenterManager.matchController.matchmakerDelegate = nil;
             [self performSelector:@selector(StartMultiplayerGameTablehost) withObject:nil afterDelay:1.];

        }

         ];

     NSLog(@"No Error");

    }

// Believe the error is somewhere in the following code.
    if (boo_gamestarted!=true)
    {

        if (match.expectedPlayerCount==0)
        {
           //if([localName isEqualToString:hostName])
           // {
                boo_startgame=true;

                if ([match.playerIDs count]==1)
                {

                matchRequest.minPlayers = 3;
                matchRequest.maxPlayers = 4;
                matchRequest.playersToInvite = nil;

                [[GKMatchmaker sharedMatchmaker] addPlayersToMatch:match matchRequest:matchRequest completionHandler:^(NSError *error)
                 {
                     if (error)
                     {
                         NSLog(@"An error occurred during adding a player to match: %@", [error localizedDescription]);}
                     else if (match != nil)
                     {NSLog(@"A player has been added to the match");}
                 }];
                }

                else if ([match.playerIDs count]==2)
                {
                    matchRequest.minPlayers = 4;
                    matchRequest.maxPlayers = 4;
                    matchRequest.playersToInvite = nil;

                    [[GKMatchmaker sharedMatchmaker] addPlayersToMatch:match matchRequest:matchRequest completionHandler:^(NSError *error)
                     {
                         if (error)
                         {
                             NSLog(@"An error occurred during adding a player to match: %@", [error localizedDescription]);}
                         else if (match != nil)
                         {NSLog(@"A player has been added to the match");}
                     }];
                }

            if ([match.playerIDs count]==3)
            {
                 NSLog(@"Starting Game-589");
                // [CCTimer timerWithTarget:self selector:@selector(StartMultiplayerGameTablehost) interval:10];
                //[self performSelector:@selector(StartMultiplayerGameTablehost) withObject:nil afterDelay: 1.];

            }  // end if (match.expectedPlayerCount==0)

            else if (boo_gamestarted==false)
            {
                NSLog(@"player count = %d",[match.playerIDs count]);
                NSLog(@"Starting Game-597");
               // [self performSelector:@selector(StartMultiplayerGameTablehost) withObject:nil afterDelay:1.];

            }

                //[CCTimer timerWithTarget:self selector:@selector(StartMultiplayerGameTablehost) interval:10];
               // [self performSelector:@selector(StartMultiplayerGameTablehost) withObject:nil afterDelay:3.];
           // }

            //
            else
            {

                boo_startgame=true;

                matchRequest.minPlayers = 3;
                matchRequest.maxPlayers = 4;
                matchRequest.playersToInvite = nil;

                [[GKMatchmaker sharedMatchmaker] addPlayersToMatch:match matchRequest:matchRequest completionHandler:^(NSError *error)
                 {
                     if (error)
                     {
                         NSLog(@"An error occurrred during adding a player to match: %@", [error localizedDescription]);}
                     else if (match != nil)
                     {NSLog(@"A player has been added to the match");}
                 }];
             [self performSelector:@selector(StartMultiplayerGameTablehost) withObject:nil afterDelay:3.];

            }      
        }
    }    
}

-(void)StartMultiplayerGameTablehost
{
    boo_gamestarted=true;

  [[CCDirector sharedDirector] replaceScene:[HelloWorldLayer node]];
}

-(void)dealloc
{
    [super dealloc];
} 
```

最终结果是一条消息，如下所示：

```
#0  0x32499468 in ___forwarding___ ()
#1  0x323f0f68 in __forwarding_prep_0___ ()
#2  0x31ffac5e in _Block_object_assign ()
#3  0x39614614 in __copy_helper_block_333 ()
#4  0x31ffa928 in _Block_copy_internal ()
#5  0x34a86694 in _dispatch_Block_copy ()
#6  0x34a8894e in dispatch_group_async$VARIANT$up ()
#7  0x39613c4e in -[GKConnectionInternal connectParticipantsWithConnectionData:withSessionInfo:] ()
#8  0x32c5e21c in -[GKMatch connectToPeersWithDictionaries:version:sessionToken:cdxTicket:] ()
#9  0x32c694b2 in __block_global_17 ()
#10 0x34a8711e in _dispatch_call_block_and_release ()
#11 0x34a864b6 in _dispatch_client_callout ()
#12 0x34a87dca in _dispatch_main_queue_callback_4CF$VARIANT$up ()
#13 0x3246af3a in __CFRunLoopRun ()
#14 0x323ddebc in CFRunLoopRunSpecific ()
#15 0x323ddd48 in CFRunLoopRunInMode ()
#16 0x3a1db2ea in GSEventRunModal ()
#17 0x39c992f8 in UIApplicationMain ()
#18 0x0009f370 in main () 
```

这些都不是来自我现在的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:12:51.707

答案最终是我需要释放

```
 matchRequest.minPlayers = 3;
        matchRequest.maxPlayers = 4; 
```

在重新定义他们的价值观之前。

# c# - 我该如何解决？非静态字段需要对象引用 - C#

> ID：13813723
> 
> 赞同：0
> 
> 时间：2012-12-11T04:36:26.330
> 
> 标签：c#, winforms

我很抱歉又问了一个愚蠢的问题。我几乎完成了保存 winform 的设置，当然要感谢 StackOverflow 的人们，但我被困在最后一件事上。请不要仅仅因为我是初学者而将其标记下来。

我收到以下错误：

> 非静态字段、方法或属性“ShovelShovel.WindowSize.Width.get”需要对象引用
> 
> 非静态字段、方法或属性“ShovelShovel.WindowSize.Height.get”需要对象引用

这里：

设置.cs

```
public partial class Settings : Form
{
    public Settings()
    {
        InitializeComponent();
    }

    public void button1_Click(object sender, EventArgs e)
    {
        var windowSize = new WindowSize { Width = WindowSize.Width, Height = WindowSize.Height };

        WindowSizeStorage.WriteSettings(windowSize);

        Application.Exit();
    }
} 
```

去：

窗口大小.cs

```
public class WindowSize
{
    public int Width { get; set; }
    public int Height { get; set; }
}

public static class WindowSizeStorage
{
    public static string savePath = "WindowSize.dat";

    public static WindowSize ReadSettings()
    {
        var result = new WindowSize();
        using (FileStream fileStream = new FileStream(savePath, FileMode.Open))
        {
            using (BinaryReader binaryReader = new BinaryReader(fileStream))
            {
                result.Width = binaryReader.ReadInt32();
                result.Height = binaryReader.ReadInt32();
            }
        }

        return result;
    }

    public static void WriteSettings(WindowSize toSave)
    {
        using (BinaryWriter binaryWriter = new BinaryWriter(File.Open(savePath, FileMode.Create)))
        {
            binaryWriter.Write(toSave.Width);
            binaryWriter.Write(toSave.Height);
        }
    }
} 
```

[http://forums.codeguru.com/showthread.php?530631-Im-having-trouble-with-my-code](http://forums.codeguru.com/showthread.php?530631-I-m-having-trouble-with-my-code)

在那里你可以在附件中找到我的项目的完整文件，以防上述内容不足。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T04:38:43.590

也许你的意思是：

`var windowSize = new WindowSize { Width = this.Width, Height = this.Height };`

代替：

`var windowSize = new WindowSize { Width = WindowSize.Width, Height = WindowSize.Height };`

如所写，它需要 Width 和 Height 作为`WindowSize`类的静态属性，但我认为这不是您想要的。相反，使用表单实例`Width`和`Height`属性更有意义。

# printing - 用于 Web 打印的 Activex 控件

> ID：13813727
> 
> 赞同：0
> 
> 时间：2012-12-11T04:36:41.463
> 
> 标签：printing, activex

我想找到一个 Internet Explorer ActiveX 控件，它允许我在没有对话框的情况下将网页或网页的一部分打印到特定的打印机。

是否有任何activex插件来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:33:38.843

我使用[了 ScriptX](http://scriptx.meadroid.com)。免费版可让您设置一些基本参数，请参见下面的示例。

例子：

```
<!-- MeadCo ScriptX -->
<object id=factory style="display:none"
  classid="clsid:1663ed61-23eb-11d2-b92f-008048fdd814"
  codebase="http://[your path here]/smsx.cab#Version=7.0.0.8 ">
</object>

<script>
  function printWindow() {
    factory.printing.header = "This is MeadCo";
    factory.printing.footer = "Printing by ScriptX";
    factory.printing.portrait = false;
    factory.printing.leftMargin = 1.0;
    factory.printing.topMargin = 1.0;
    factory.printing.rightMargin = 1.0;
    factory.printing.bottomMargin = 1.0;
    factory.printing.Print(false);
  }
</script> 
```

# c - Linux 模块编程失败并陷入循环

> ID：13813736
> 
> 赞同：1
> 
> 时间：2012-12-11T04:37:52.933
> 
> 标签：c, linux-kernel, kernel-module, kernel

好的，所以我正在为硬件任务编程，但可以使用一些帮助或洞察力。我知道我到处都读过你不应该在模块中打开文件，但这是我们的任务......

无论如何我的模块代码在这里： http: [//pastebin.com/LU8hWraL](http://pastebin.com/LU8hWraL)

我的用户级代码在这里： http: [//pastebin.com/RC0Zk1kQ](http://pastebin.com/RC0Zk1kQ)

好的，我的问题是有时它可以工作，有时它不会......大多数时候它不起作用，它会在内核上陷入循环，我不明白是什么导致了问题以及如何解决它。对于这种情况的任何帮助将不胜感激，我只是对不断关闭并重新启动我的虚拟机感到沮丧。

即使有人告诉我当我的虚拟机这样循环时如何找到错误......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:00:28.877

首先，您可能想自己使用[`kernel_read()`](https://elixir.bootlin.com/linux/v3.7/source/fs/exec.c#L787)而不是自己做这些事情。

这里可能有两个问题

*   您将and`&filpRead->f_pos`作为参数提供给内核内部使用。`read``write`
*   当您加密或解密数据时，您可能无法获得与您读取的相同数量的字节。因此，写入与读取相同数量的数据也可能是一个问题。

对两者都持保留态度，因为这是很久以前的事了，因为我已经看过内核编程了。

# c++ - 如何在引导期间在 gcc 二进制文件上设置 rpath？

> ID：13813737
> 
> 赞同：9
> 
> 时间：2012-12-11T04:37:54.227
> 
> 标签：c++, linux, gcc

我正在尝试使用自定义前缀构建 gcc 4.7.2`$PREFIX`

我已将所有先决条件构建并安装到我的前缀位置，然后成功配置、构建和安装 gcc。

我现在遇到的问题`$PREFIX`是不在库搜索路径中，因此无法找到共享库。

```
$PREFIX/bin $ ./g++ ~/main.cpp 
$PREFIX/libexec/gcc/x86_64-suse-linux/4.7.2/cc1plus: \
    error while loading shared libraries: \
        libcloog-isl.so.1: \
           cannot open shared object file: No such file or directory 
```

**什么有效，但不理想**

如果我`export LD_LIBRARY_PATH=$PREFIX/lib`那么它可以工作，但我正在寻找无需设置环境变量即可工作的东西。

如果我`patchelf`用来设置`RPATH`所有`gcc`二进制文件，那么它也可以工作；但是，这涉及搜索所有精灵二进制文件并遍历它们调用`patchelf`，我宁愿拥有更永久的东西。

**我认为最适合我的目的**

所以我希望有一种方法可以`-Wl,-rpath,$PREFIX/lib`在构建过程中通过。

因为我知道不需要更改路径，所以这似乎是最强大的解决方案，也可以用于我们构建下一个 gcc 版本时。

是否可以将构建过程配置为硬编码`RPATH`？

**我已经尝试过，但没有用**

`LDFLAGS_FOR_TARGET`调用前设置`configure`：

所有这些都失败了：

```
export LDFLAGS_FOR_TARGET="-L$PREFIX/lib -R$PREFIX/lib" 
export LDFLAGS_FOR_TARGET="-L$PREFIX/lib" 
export LDFLAGS_FOR_TARGET="-L$PREFIX/lib -Wl,-rpath,$PREFIX/lib" 
```

`LDFLAGS`调用前设置`configure`：

```
export LDFLAGS="-L$PREFIX/lib -Wl,-rpath,$PREFIX/lib" 
```

无论如何，我担心这些会覆盖 gcc 的任何内容*，*`LDFLAGS`所以我不确定这些是否是可行的选择，即使它们可以工作？

 ***我的配置行**

为了完整起见，这是我传递给配置的行：

```
./configure \
    --prefix=$PREFIX \
    --build=x86_64-suse-linux \
    --with-pkgversion='SIG build 12/10/2012' \
    --disable-multilib \
    --enable-cloog-backend=isl \
    --with-mpc=$PREFIX \
    --with-mpfr=$PREFIX \
    --with-gmp=$PREFIX \
    --with-cloog=$PREFIX \
    --with-ppl=$PREFIX \
    --with-gxx-include-dir=$PREFIX/include/c++/4.7.2 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T17:47:31.277

我发现将 gmp、mpfr、mpc、isl、cloog 等的源目录复制到顶级 gcc 源目录（或使用同名的符号链接）在任何地方都有效。这实际上是首选方式。

您需要复制（或链接）到那些**没有**版本号的源目录名称才能工作。

编译器不需要 LD_LIBRARY_PATH （尽管运行使用编译器构建的应用程序将需要 LD_LIBRARY_PATH 到 $PREFIX/lib64 或类似的东西 - 但这是不同的）

从一个源目录开始，您将在其中保留所有源。在此源目录中，您可以通过解压缩 tarball 或 svn 来获得 gcc 目录...我使用颠覆。

同样在这个顶级目录中，您还有以下源 tarball：

```
gmp-5.1.0.tar.bz2
mpfr-3.1.1.tar.bz2
mpc-1.0.1.tar.gz
isl-0.11.1.tar.bz2
cloog-0.18.0.tar.gz 
```

我只是下载这些并定期更新到最新的 tarball。

以脚本形式：

```
# Either:
svn checkout svn://gcc.gnu.org/svn/gcc/trunk gcc_work
# Or:
bunzip -c gcc-4.8.0.tar.bz2 | tar -xvf -
mv gcc-4.8.0 gcc_work

#  Uncompress sources..  (This will produce version numbered directories).
bunzip -c gmp-5.1.0.tar.bz2 | tar -xvf -
bunzip -c mpfr-3.1.1.tar.bz2 | tar -xvf -
gunzip -c mpc-1.0.1.tar.gz | tar -xvf -
bunzip -c isl-0.11.1.tar.bz2 | tar -xvf -
gunzip -c cloog-0.18.0.tar.gz | tar -xvf -

# Link outside source directories into the top level gcc directory.
cd gcc_work
ln -s ../gmp-5.1.0 gmp
ln -s ../mpfr-3.1.1 mpfr
ln -s ../mpc-1.0.1 mpc
ln -s ../isl-0.11.1 isl
ln -s ../cloog-0.18.0 cloog

# Get out of the gcc working directory and create a build directory.  I call mine obj_work.
# I configure the gcc binary and other outputs to be bin_work in the top level directory.  Your choice.  But I have this:
# home/ed/projects
# home/ed/projects/gcc_work
# home/ed/projects/obj_work
# home/ed/projects/bin_work
# home/ed/projects/gmp-5.1.0
# home/ed/projects/mpfr-3.1.1
# home/ed/projects/mpc-1.0.1
# home/ed/projects/isl-0.11.1
# home/ed/projects/cloog-0.18.0

mkdir obj_work
cd obj_work
../gcc_work/configure --prefix=../bin_work <other options>

# Your <other options> shouldn't need to involve anything about gmp, mpfr, mpc, isl, cloog.
# The gcc build system will find the directories you linked,
# then configure and compile the needed libraries with the necessary flags and such.
# Good luck. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T17:00:38.607

`configure`在构建和安装 gmp、isl 和 cloog 之后，我一直在 FreeBSD 上将此选项与 gcc-4.8.0 一起使用：

```
LD_LIBRARY_PATH=/path/to/isl/lib ./configure (lots of other options) \
  --with-stage1-ldflags="-rpath /path/to/isl/lib -rpath /path/to/cloog/lib -rpath /path/to/gmp/lib" 
```

并且生成的 gcc 二进制文件不需要任何`LD_LIBRARY_PATH`. 需要 for configure 是因为它编译了`LD_LIBRARY_PATH`一个测试程序来检查 ISL 版本，如果它没有找到 ISL 共享库，它将失败。

我在 Linux (Ubuntu) 上尝试过，在配置过程中失败，因为`-rpath`args 被传递给 gcc 而不是 ld。我可以通过使用来解决这个问题

```
--with-stage1-ldflags="-Wl,-rpath,/path/to/isl/lib,-rpath,/path/to/cloog/lib,-rpath,/path/to/gmp/lib" 
```

反而。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-20T14:53:12.367

仅使用`configure --with-stage1-ldflags="-Wl,-rpath,/path/to/lib"`不足以让我构建 gcc 4.9.2，引导在第 2 阶段失败。有效的是直接传递他的标志以通过

```
make BOOT_LDFLAGS="-Wl,-rpath,/path/to/lib" 
```

我从[https://gcc.gnu.org/ml/gcc/2008-09/msg00214.html得到这个](https://gcc.gnu.org/ml/gcc/2008-09/msg00214.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:50:11.577

虽然它仍然涉及设置环境变量，但我所做的是定义 LD_RUN_PATH，它设置了 rpath。这样，系统的其余部分可以继续使用系统提供的库，而不是使用 gcc 构建生成的库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T22:41:12.810

我将提出一个我认为可以解决您的问题的建议，尽管它绝对不能回答您的问题。让我们看看我得到了多少反对票。

编写一个通用的包装脚本来设置`LD_LIBRARY_PATH`然后运行可执行文件很容易；请参阅[https://stackoverflow.com/a/7101577/768469](https://stackoverflow.com/a/7101577/768469)。

这个想法是传递类似`--prefix=$PREFIX/install`to的东西`configure`，构建一个如下所示的安装树：

```
$PREFIX/
    install/
        lib/
            libcloogXX.so
            libgmpYY.so
            ...
        bin/
            gcc
            emacs
            ...
    bin/
        .wrapper
        gcc -> .wrapper
        emacs -> .wrapper 
```

`.wrapper`是一个简单的 shell 脚本：

```
#!/bin/sh

here="${0%/*}"  # or use $(dirname "$0")
base="${0##*/}" # or use $(basename "$0")

libdir="$here"/../install/lib
if [ "$LD_LIBRARY_PATH"x = x ] ; then
    LD_LIBRARY_PATH="$libdir"
else
    LD_LIBRARY_PATH="$libdir":"$LD_LIBRARY_PATH"
fi
export LD_LIBRARY_PATH
exec "$here"/../install/bin/"$base" "$@" 
```

这将正确转发所有参数，处理参数或目录名称中的空格，等等。`rpath`出于实际目的，它与设置您想要的喜欢没有区别。

此外，您不仅可以将这种方法用于 gcc，还可以用于整个 my-personal- `$PREFIX`tree。我一直在需要最新的 GNU 工具套件但我没有（或不想承认有）root 访问权限的环境中这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T22:23:46.913

尝试将您的添加`$PREFIX`到`/etc/ld.so.conf`然后运行 ​​ldconfig：

```
# echo $PREFIX >> /etc/ld.so.conf
# ldconfig 
```

这将重新创建运行时链接器使用的缓存，并将获取您的库。

**警告：**此操作将导致所有应用程序使用您新编译的库`$PREFIX`而不是默认位置*

# webdriver - 无法单击弹出窗口（不是主窗口）中的重叠元素，如何滚动查看？

> ID：13813742
> 
> 赞同：0
> 
> 时间：2012-12-11T04:38:18.097
> 
> 标签：webdriver

![在此处输入图像描述](../Images/80b0a5b2f83af8e4c8581ace1acf55a5.png)

如您所见，我可以单击第一个复选框（PRODUCT-323），但无法单击第二个。经过长时间的
尝试，我发现这是因为第二个没有滚动查看（它的意图是工具设计还是错误？）。那么如何滚动此弹出 div 以确保显示第二个？

其实，我试过这个，但失败了

```
 ((JavascriptExecutor)driver).executeScript("document.getElementById("pupop").scrollTo(0,30)"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:49:20.077

您能分享一下您使用的是哪个版本的 WebDriver 吗？如果我没记错的话，2.16 版左右存在一个已知问题，即定位器无法滚动到视图中。原因是，他们使用元素中心的位置坐标来获得焦点，在这种情况下，中心是隐藏的。这在以后的版本中得到了解决。

有几种方法。1）尝试对完全隐藏在视图中的元素执行一些操作。这将使元素完全进入视图，您将能够访问它。在这种情况下，请尝试访问第 3 行或第 4 行的复选框，您将能够将焦点带到那里。然后进入第二行。2) 执行 Driver.Manage().Window.Maximize() [这是在 c# 中]。这也将使元素进入视野。

避免使用两个滚动条的窗口是一个好习惯。通过最大化它，您将减少此类错误的窗口。

希望这是有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T13:12:07.293

1）单击第二个复选框：您可以使用 xpath 来查找该元素。在 xpath 中，您可以轻松获取每个复选框的表行 ID，该复选框将在其 ID 中递增。2）要滚动，您可以使用以下代码：

```
JavascriptExecutor js = (JavascriptExecutor) webdriver;
js.executeScript("scroll(0,0);"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:22:12.210

你试过键盘选项吗？ctrl+向下箭头通过脚本？？？或者在最坏的情况下使用选项卡来关注该复选框。我以这种方式在 OpenScript 和 RFT 中工作。

# r - 并行处理的负载平衡

> ID：13813743
> 
> 赞同：2
> 
> 时间：2012-12-11T04:38:23.427
> 
> 标签：r, parallel-processing, load-balancing

我正在运行一个类似于查找标准偏差的函数......但运行时间要长得多。

我打算使用该函数来计算标准偏差的累积值，即第 1 天到第 n 天的标准偏差类型函数。

但是由于计算需要很长时间，我想在集群上运行它。

因此，我想将数据拆分，以便集群的每个节点大致在同一时间完成。例如，如果我的功能如下，单机方法将按以下方式工作：

```
vec <- xts(rnorm(1000),Sys.Date()-(1:1000)
lapply(1:length(vec), function(x){
    Sys.sleep(30)
    sd(as.numeric(vec[1:x]))
} 
```

（注意 sys.sleep 被添加在那里以表示处理我的自定义函数所花费的额外时间）

但是，假设我想将其拆分为两台机器，而不是 1，我将如何拆分向量`1:length(vec)`，以便我可以为每台机器提供 `c(1:y)`机器 1 和`c((y+1):length(vec))`机器 2 的列表，以便两台机器按时完成。即 y 的值是多少，这样两个过程将大致同时完成......如果我们要在 10 台机器上完成它会怎样......如何找到原始向量`c(1:length(vec))`中的中断去工作...

即我会

```
y <- 750 # This is just a guess as to potentially where it might be.
vec <- xts(rnorm(1000),Sys.Date()-(1:1000)
# on machine 1 I would have
lapply(1:y, function(x){
    Sys.sleep(30)
    sd(as.numeric(vec[1:x]))
}

# and on machine 2 I would have

lapply(y+1:length(vec), function(x){
    Sys.sleep(30)
    sd(as.numeric(vec[1:x]))
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T05:14:05.010

[并行包](http://stat.ethz.ch/R-manual/R-devel/library/parallel/html/00Index.html)现在是基本 R 的一部分，可以帮助在中等规模的集群上运行 R，包括在 Amazon EC2 上。parLapplyLB 函数将来自输入向量的工作分配到集群的工作节点上。

要知道的一件事是[makePSOCKcluster](http://stat.ethz.ch/R-manual/R-devel/library/parallel/html/makeCluster.html)（目前从 R 2.15.2 开始）受[connections.c 中的 NCONNECTIONS 常数](http://svn.r-project.org/R/trunk/src/main/connections.c)限制为 128 个工作人员。

这是一个使用并行包的会话的快速示例，您可以在自己的机器上尝试：

```
library(parallel)
help(package=parallel)

## create the cluster passing an IP address for
## the head node
## hostname -i works on Linux, but not on BSD
## descendants (like OS X)
# cl <- makePSOCKcluster(hosts, master=system("hostname -i", intern=TRUE))

## for testing, start a cluster on your local machine
cl <- makePSOCKcluster(rep("localhost", 3))

## do something once on each worker
ans <- clusterEvalQ(cl, { mean(rnorm(1000)) })

## push data to the workers
myBigData <- rnorm(10000)
moreData <- c("foo", "bar", "blabber")
clusterExport(cl, c('myBigData', 'moreData'))

## test a time consuming job
## (~30 seconds on a 4 core machine)
system.time(ans <- parLapplyLB(cl, 1:100, function(i) {
  ## summarize a bunch of random sample means
  summary(
    sapply(1:runif(1, 100, 2000),
           function(j) { mean(rnorm(10000)) }))
}))

## shut down worker processes
stopCluster(cl) 
```

Bioconductor 小组建立了一种非常简单的入门方法：[在云中使用并行集群](http://bioconductor.org/help/bioconductor-cloud-ami/#parallel)

有关在 EC2 上使用并行包的更多信息，请参阅：[云](http://digitheadslabnotebook.blogspot.com/2012/12/r-in-cloud.html)中的 R 和一般集群上的 R，请参阅：[CRAN 任务视图：使用 R 进行高性能和并行计算](http://cran.r-project.org/web/views/HighPerformanceComputing.html)。

最后，R 之外的另一个完善的选项是[Starcluster](http://star.mit.edu/cluster/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T04:43:11.283

查看[雪](http://www.sfu.ca/~sblay/R/snow.html)包——特别是`clusterApplyLB`处理负载平衡应用函数的函数。

这实际上将更智能地处理节点/核心的工作分配，而不仅仅是一个均匀的分区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T04:44:15.000

考虑通过[RHIPE](http://deltarho.org/)使用 Hadoop（又名 MapReduce） 。

# php - 当用户输入文本输入然后自动转换为大写时我怎么做，它也会在db mysql中改变

> ID：13813746
> 
> 赞同：-5
> 
> 时间：2012-12-11T04:38:53.433
> 
> 标签：php, mysql

什么 php 代码和 mysql 代码使用户输入文本输入然后自动更改为大写并在 db mysql 中更改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:40:57.023

PHP：

```
strtoupper($string); 
```

javascript:

```
string.toUpperCase(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:45:03.547

首先将输入字段的 CSS 类设置为...

```
text-transform: uppercase 
```

这会给人一种错觉，即文本是这样输入的。

然后使用 PHP 的 strtoupper 函数进行转换...

```
$myString = strtoupper($myString); 
```

或者您可以使用 JavaScript 进行转换...

```
myString.toUpperCase(); 
```

或者你甚至可以让 MySQL 来完成这项工作......

```
INSERT INTO myTable (myField) VALUES(UPPER(myString)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T04:41:55.840

[http://php.net/manual/en/function.strtoupper.php](http://php.net/manual/en/function.strtoupper.php)

[http://www.marathon-studios.com/blog/mysql-ucase-and-lcas/](http://www.marathon-studios.com/blog/mysql-ucase-and-lcas/) 请看一下大写，例如：-

```
<?php
$str = "Mary Had A Little Lamb and She LOVED It So";
$str = strtoupper($str);
echo $str; // Prints MARY HAD A LITTLE LAMB AND SHE LOVED IT SO
?> 
```

# grails - 使用 Spring Security 列出 Grails App 中的用户实例角色

> ID：13813747
> 
> 赞同：-1
> 
> 时间：2012-12-11T04:39:05.027
> 
> 标签：grails, spring-security

我的 Grails 应用程序中有一个所有用户的列表，我想在这个列表中查看用户角色。我怎样才能得到这个？我的应用程序使用 Spring Security 插件。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:51:33.940

如果您使用默认域用户和角色，您应该能够通过例如`UserRole.list()`.

但是，如果您的用户域不称为 User 并且您的角色也是如此，那么域类的名称可能会有所不同。

# jquery - jQuery数据表数字排序问题

> ID：13813750
> 
> 赞同：3
> 
> 时间：2012-12-11T04:40:09.123
> 
> 标签：jquery, html, datatable

我已经为我的表集成了数据表脚本。我有排名列。数据就像

![在此处输入图像描述](../Images/7c81f356f4c73d05e8d13b625d603eb4.png)

我需要这里的数字排序。为此，我使用了以下代码

```
{ "sType": "numeric", "aTargets": [ 0 ] } 
```

在 html 代码中，我使用了以下内容

```
<span style="display:none;">3</span> #3 in
<span style="display:none;">45</span> #45 in
<span style="display:none;">25</span> #25 in
<span style="display:none;">25</span> #15 in etc... 
```

所以在跨度标签中，我以隐藏格式显示了数字。

但排序不适用于该单元格。请帮我。谢谢

**12 月 15 日更新 ======================**

```
{ "bVisible": false, "aTargets": [8] }, //set column visibility            
                {"sType": "numeric", "aTargets": [8] }, //define data type for specified columns
                {"iDataSort": 8, "aTargets": [3] } //sort based on a hidden column when another column is clicked 
                { "bVisible": false, "aTargets": [9] }, //set column visibility            
                {"sType": "numeric", "aTargets": [9] }, //define data type for specified columns
                {"iDataSort": 9, "aTargets": [5] } //sort based on a hidden column when another column is clicked 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T04:50:24.673

这是解决您的问题的另一种方法。将数值放在隐藏列中，而不是隐藏跨度。在数据表绑定中，单击可见列标题时指向隐藏列，如下所示：

```
myTable.dataTable({        
    "aoColumnDefs": [
        { "bVisible": false, "aTargets": [hiddenColumnIndex] }, //set column visibility            
        {"sType": "numeric", "aTargets": [hiddenColumnIndex] }, //define data type for specified columns
        {"iDataSort": hiddenColumnIndex, "aTargets": [visibleColumnIndex] } //sort based on a hidden column when another column is clicked            
    ]
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T04:50:13.333

看起来您正在使用 datatables.net jquery 插件。如果您的基础数据是数字，则使用[mRender 选项](http://www.datatables.net/usage/columns)覆盖在表格单元格中呈现的 html（即，格式化数字以显示 #[actual number] in）。启用排序后，它应该对基础数据进行排序（请参阅 mData 选项）。注意：这是针对当前版本的插件...如果您有旧版本，请参考 fnRender 选项。

例如：

```
"aoColumns": [
  { "mData": "StringColumn1" },
  { "mData": "StringColumn2" },
  {
    "mData": "Your Numeric Column",
    "mRender": function ( data, type, full ) {
                 return '#' + data + ' in';
               }
  } 
```

# iphone - ABPeoplePickerNavigationController 问题。如何仅显示带有电子邮件的联系人？

> ID：13813752
> 
> 赞同：0
> 
> 时间：2012-12-11T04:40:14.697
> 
> 标签：iphone, ios, abpeoplepickerview

有没有办法提供屏幕，用户只能看到联系人而不是包含电子邮件？（因为默认情况下我会在此屏幕上看到所有联系人）

```
 ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    // place the delegate of the picker to the controll
    picker.peoplePickerDelegate = self;

    // showing the picker
    [self presentModalViewController:picker animated:YES];
    // releasing
    [picker release]; 
```

然后我想拿起选定的电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:44:36.233

我不相信有办法让 iOS 进行这种过滤。请注意，您需要查找所有类型的电子邮件地址 - 您必须遍历可以获得的字典。使用它肯定是一个 PITA，你必须小心不要有内存泄漏。

# wpf - WPF 中的 Windows 窗体绘制等效事件

> ID：13813753
> 
> 赞同：3
> 
> 时间：2012-12-11T04:40:30.130
> 
> 标签：wpf, vb.net, waveform, paintevent

我使用 PAINT 事件在 Winows 表单应用程序的面板上绘制了一个波浪。但是当使用它 WPF 时，我没有找到任何与具有 Paint Event 的 Panel 等效的元素。谷歌搜索了很多，但没有很大的用处。

好吧，我需要在 WPF 中绘制波形，因此建议适当的解决方案 wrt PaintArgsEvent 或完全新的解决方案。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:44:32.143

您正在寻找[课程](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx)[`DrawingVisual`](http://msdn.microsoft.com/en-us/library/ms742254.aspx)

从第一个链接：

> DrawingVisual 是一个轻量级的绘图类，用于呈现形状、图像或文本。这个类被认为是轻量级的，因为它不提供布局或事件处理，从而提高了它的性能。出于这个原因，绘图是背景和剪贴画的理想选择。

* * *

您还可以访问可以添加点集合的[折线类。](http://msdn.microsoft.com/en-us/library/ms615644%28v=vs.100%29.aspx)此示例是修改后的[MSDN 论坛示例](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/00f370b3-75b2-4e84-90c2-cafb2af7c5f9/)

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        float x0 = 100f;
        float y0 = 100f;
        Polyline myPoly = new Polyline();
        PointCollection polyPoints = myPoly.Points;
        Point[] points = new Point[200];

        for (int j = 0; j < 200; j++)
        {
            points[j] = new Point();
            points[j].X = x0 + j;
            points[j].Y = y0 -
            (float)(Math.Sin((2 * Math.PI * j) / 200) * (200 / (2 * Math.PI)));
        }

        for (int i = 0; i < points.Length ; i++)
        {
            polyPoints.Add(points[i]);
        }

        myPoly.Stroke = Brushes.Green;
        myPoly.StrokeThickness = 5;
        StackPanel mainPanel = new StackPanel();
        mainPanel.Children.Add(myPoly);
        this.Content = mainPanel;

    }
} 
```

* * *

还有一个修改后的 MSDN 示例：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        float x0 = 100f;
        float y0 = 100f;
        Point[] points = new Point[200];

        for (int j = 0; j < 200; j++)
        {
            points[j] = new Point();
            points[j].X = x0 + j;
            points[j].Y = y0 -
            (float)(Math.Sin((2 * Math.PI * j) / 200) * (200 / (2 * Math.PI)));
        }

        DrawingBrush db = new DrawingBrush(CreateDrawingVisualRectangle(points).Drawing);
        StackPanel mainPanel = new StackPanel();
        mainPanel.Background = db;
        this.Content = mainPanel;

    }

    private DrawingVisual CreateDrawingVisualRectangle( Point[] pointarray)
    {
        DrawingVisual drawingVisual = new DrawingVisual();

        // Retrieve the DrawingContext in order to create new drawing content.
        DrawingContext drawingContext = drawingVisual.RenderOpen();

       // Create a rectangle and draw it in the DrawingContext.
       for (int i = 0; i < pointarray.Length-1; i++)
       {
           drawingContext.DrawLine(new Pen(new SolidColorBrush(Colors.Blue), 2), pointarray[i], pointarray[i + 1]);
       }

       // Persist the drawing content.
       drawingContext.Close();

       return drawingVisual;
     }

} 
```

# javascript - JavaScript 测试的 Jenkins 测试覆盖率报告

> ID：13813762
> 
> 赞同：1
> 
> 时间：2012-12-11T04:41:46.317
> 
> 标签：javascript, testing, user-interface, jenkins, jenkins-plugins

我们使用 Jenkins 运行 CI 环境，项目在 ExtJS 3.2 中。我无法找到关于如何在 Jenkins 中为 JS 代码设置测试覆盖率的明确路线。我们使用 selenium 和 Cucumber 编写 UI 测试。构建文件有一个 UI 测试目标，每次 CI 机器运行构建时都会运行该目标。我找不到一个插件可以给我或发布这些测试的覆盖率报告，这些测试已经在 J​​enkins 中作为结果 atrifact 运行。或者，如果有其他方法可以实现相同的目标，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:26:07.660

我认为您可以在使用 Selenium 时使用[JSCover](http://tntim96.github.com/JSCover/)生成代码覆盖率：

*   启动 JSCover java web 服务
*   让 Selenium 访问 JSCover web-app 并启动​​收集器，也可以查看[JSCover](http://tntim96.github.com/JSCover/manual/manual.xml#automating)关于自动化测试的手册。
*   在新窗口或 iFrame 中运行 Selenium 测试
*   收集覆盖数据并将其存储在某处
*   将数据处理成漂亮的报告（可以使用[genhtml](http://ltp.sourceforge.net/coverage/lcov.php)）

如果您为每个 Cucumber 场景/功能启动一个新的浏览器，那么您需要保存每个场景/功能之间的覆盖数据，在所有功能完成后将它们组合起来，然后将它们处理成一个漂亮的报告。JSCover 支持合并多个数据源和创建 LCOV 报告。

# asp.net - 将资源移动到新站点并使用旧网址

> ID：13813768
> 
> 赞同：0
> 
> 时间：2012-12-11T04:42:08.187
> 
> 标签：asp.net, web-services, web-applications, hosting

我有图像托管我想将图像移动到新位置并使用旧 URL，这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:45:44.233

是的，通过更改应用程序的虚拟路径。
针对 IIS 7 或 7.5 执行以下步骤

1.  使用您喜欢的任何名称创建一个文件夹
2.  把你的图像放在那里。
3.  转到 IIS 或运行`inetmgr`
4.  从 ISS 下的站点列表中选择您的站点
5.  选择基本设置
6.  改变物理路径

**编辑**

在您的图像服务器上创建一个网站，假设它是[http://www.imgServer.com](http://www.imgServer.com)
将您的图像放在该网站
中并在您的应用程序中使用图像 URL，例如[http://www.imgServer.com/pathofthe](http://www.imgServer.com/pathofthe) image

# facebook - C# SDK：Facebook 墙贴没有出现在我的窗口窗体上

> ID：13813769
> 
> 赞同：1
> 
> 时间：2012-12-11T04:42:11.613
> 
> 标签：facebook, facebook-c#-sdk

我开发了一个窗口应用程序，它可以获取我所有的 Facebook 个人资料墙帖子并将其显示在列表框中。[我从http://www.youtube.com/watch?v=5lC7Q2Z2yik](http://www.youtube.com/watch?v=5lC7Q2Z2yik)下载了代码，但我的 Facebook 墙贴仍未显示。我可以通过我的应用程序在我的墙上发帖，我的头像和朋友都成功显示。有什么我忘记更改/添加的吗？任何帮助将不胜感激！

```
private void getMyWallData()
    {
        apiService.AccessToken = myToken.Default.token;

        JSONObject myWallFeed = apiService.Get("/me/feed");
        var wallData = myWallFeed.Dictionary["data"];

        List<JSONObject> myFeeds = wallData.Array.ToList<JSONObject>();

        foreach (var p in myFeeds)
        {

            try
            {
                if (p.Dictionary.ContainsKey("message"))
                {
                    Console.WriteLine(p.Dictionary["message"].String + " " + p.Dictionary["created_time"].String);
                    listBoxMyWall.Items.Add(p.Dictionary["message"].String);
                    listBoxMyWall.Items.Add("");
                }

                if (p.Dictionary.ContainsKey("comments"))
                {
                    listBoxMyWall.Items.Add("   " + p.Dictionary["comments"].Dictionary["data"].Array[0].Dictionary["from"].Dictionary["name"].String + " " + p.Dictionary["comments"].Dictionary["data"].Array[0].Dictionary["message"].String);
                    listBoxMyWall.Items.Add("");
                }

            }
            catch (KeyNotFoundException ex)
            {
                MessageBox.Show(ex.Message);

            }

        }

    } 
```

# java - 位旋转：使用按位运算符（<<、|、& 等）将 word 中的字节与零字节交错

> ID：13813771
> 
> 赞同：1
> 
> 时间：2012-12-11T04:42:28.540
> 
> 标签：java, performance, assembly, bit-manipulation

给定一个`long`字节`WXYZ`（每个字母都是一个字节），我想要一些快速的位旋转代码，它将创建两个`longs`与原始字节相同的字节，但与 0 字节交错。

例如，给定`long`with 值`ABCDEFGH`（每个字母为一个字节），产生两个 long：

```
0A0B0C0D
0E0F0G0H 
```

相当于，但比：

```
long result1 = expand((int)(input >>> 32));
long result2 = expand((int)input);

long expand(int inputInt) {
  long input = intputInt;
  return
    (input & 0x000000FF)       | 
    (input & 0x0000FF00) <<  8 | 
    (input & 0x00FF0000) << 16 | 
    (input & 0xFF000000) << 24;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T06:36:37.887

以下对我来说大约快 25%（Java 7，使用 Google Caliper 进行基准测试），YMMV 当然可能会根据您的编译器而有所不同：

```
long a = (input | (input << 16));
long result = (a & 0xFF000000FFL) + ((a & 0xFF000000FF00L) <<8); 
```

这个想法是使用一些额外的并行性与原始方法相比。

第一行是一个巧妙的技巧，它会在 17-32 位产生垃圾，但你不在乎，因为无论如何你都会把它屏蔽掉。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:51:26.057

```
long expand(int inputInt) {
  long input = intputInt;
  return
    (input & 0x000000FF) <<  8 | 
    (input & 0x0000FF00) << 16 | 
    (input & 0x00FF0000) << 24 | 
    (input & 0xFF000000) << 32;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:22:19.280

在 C++ 中，您可以尝试使用联合：

```
typedef union
{
    char bytes[8];
    long value;
} PlatformSpecificSolution;

long expand(int valueInt)
{
    PlatformSpecificSolution pss;
    pss.value = valueInt;
    pss.bytes[6] = pss.bytes[3]; pss.bytes[3] = 0;
    pss.bytes[4] = pss.bytes[2]; pss.bytes[2] = 0;
    pss.bytes[2] = pss.bytes[1]; pss.bytes[1] = 0;
    // pss.bytes[0] = pss.bytes[0];
    return pss.value;
 } 
```

我不知道这是否更快（您必须在要支持的平台上运行基准测试）。这个解决方案肯定更容易出错。您应该始终问自己，性能优势是否超过了可维护性较差的代码的劣势。

# ruby-on-rails - 注册 Devise 时如何将值设置为嵌套列？

> ID：13813776
> 
> 赞同：0
> 
> 时间：2012-12-11T04:42:52.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

用户模型有一个 user_profile。
我刚刚安装了设计并且工作正常。

我制作了registrations_controller.rb，它有“create”、“after_update_path_for(resource)”和“edit”操作。

如果我想让它在 user_profile 的嵌套列中输入“45”作为默认值，我该如何在注册控制器中编码？？？

我应该进行另一个名为“保存/或新建”的操作吗？，然后写这个？

> @user.user_profile.language_id = '45'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:58:49.193

我正在做一些测试，我建议你使用回调，但你也可以覆盖 Devise 的 RegistrationsController 的操作。我关注了这个线程：[覆盖设计注册控制器](https://stackoverflow.com/questions/3546289/override-devise-registrations-controller)和控制器的代码[https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb)（请参阅我使用**sign_in**而不是**sign_up** -我正在使用 Rails 3.2.8）

 **这是对该案例进行编辑的代码：

```
class RegistrationsController < Devise::RegistrationsController
  def new
    super
  end

  def create
    build_resource

    resource.build_user_profile
    resource.user_profile.language_id = 45

    if resource.save
      if resource.active_for_authentication?
        set_flash_message :notice, :signed_up if is_navigational_format?
        sign_in(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with resource
    end
  end

  def update
    super
  end
end 
```

正如帖子的答案所说，我留下的路线如下：

```
devise_for :users, :controllers => {:registrations => "registrations"} 
```

我使用了**has_one**关系。**

# javascript - JavaScript 和 XML：无法在 html 中打开 javascript？

> ID：13813779
> 
> 赞同：0
> 
> 时间：2012-12-11T04:43:18.180
> 
> 标签：javascript, html, xml

我试图在 chrome 中编译，但没有显示只提供的主题。我真的不知道是什么问题。我三次又三次地检查了我的代码..但确实出了点问题。我正在使用记事本++。

主题.html

```
<html>
<body>
<h1 align="center">Subjects Offered</h1>
<br><br><br>
<script type="text/javascript">

    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","subject.xml",false);
    xmlhttp.send();

    xmlDoc=xmlhttp.responseXML;
    var x = xmlDoc.getElementsByTagName("subject");
    document.write("<table border='5' width=500 height=400 align='center' bordercolor='red'>");

        for(i=0;i<x.length;i++)
        {
            document.write("<tr>");
            document.write("<td align='center'>">;

            document.write(x[i].getElementsByTagName("code")[0].childNodes[0].nodeValue);
                document.write("</td>");
                document.write("<td>");

            document.write(x[i].getElementsByTagName("description")[0].childNodes[0].nodeValue);
                document.write("</td>");
                document.write("<td>");

            document.write(x[i].getElementsByTagName("units")[0].childNodes[0].nodeValue);
                document.write("</td>");
            document.write("</tr>");
        }

    document.write("</table>");
    </script>
</body>
</html> 
```

主题.xml

```
<open_subjects>
    <subject>
        <code>CSSDO2</code>
        <description>Computer Programming 5</description>
        <units>3</units>
    </subject>

    <subject>
        <code>CSCI10B</code>
        <description>Principles of Operating System</description>
        <units>4</units>
    </subject>

    <subject>
        <code>ITNA04</code>
        <description>Linux Administration/</description>
        <units>3</units>
    </subject>

    <subject>
        <code>MATH09</code>
        <description>Numerical Methods</description>
        <units>3</units>
    </subject>

</open_subjects> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:53:57.747

第 26 行有一个语法错误：

```
document.write("<td align='center'>">; 
```

应该

```
document.write("<td align='center'>"); 
```

# android - 在某些活动中隐藏 ActionBarSherlock 中的一些操作项

> ID：13813780
> 
> 赞同：0
> 
> 时间：2012-12-11T04:43:20.630
> 
> 标签：android, android-actionbar, actionbarsherlock

我不知道如何在某些活动中仅显示选定的操作项。下面是我的代码：

```
 public abstract class BaseActivity extends SherlockActivity { 

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {

            menu.add("Login")
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            menu.add("Save")
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            return true;
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {

            switch(item.getItemId())
            {

            case 0:
                Intent loginIntent = new Intent(BaseActivity.this,LoginForm.class);
                startActivity(loginIntent);
                return true;

                case 1:
                Intent saveIntent = new Intent(BaseActivity.this,SaveForm.class);
                startActivity(saveIntent);
                return true;
            }
            return false;
        }

    } 
```

在上面的代码中，我正在设置操作项，以便我可以在某些活动中重用此操作项，而无需重复代码。每当我希望在特定活动上显示这些操作项时，我都会在当前活动上扩展此 BaseActivity，如下所示。

```
public class FirstActivity extends BaseActivity {   

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    } 
....
....
} 
```

因此，每当我需要针对特定​​活动的这些操作项时，我都会将基本活动扩展到我需要的活动。现在我的问题是如何仅在特定活动上设置选定的操作项。假设我不想在一项活动中显示“登录”操作项。我怎样才能完成这项工作？代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:06:27.010

现在这是一种合理的方法，但我只会在基本活动中为所有人重用项目。也就是说，我认为处理此问题的正确方法是在这些其他活动中使用您想要的实现来覆盖这些方法。

您可以在 onCreate() 中设置一些变量，如果它们是 true/false，则在 onCreateOptionsMenu() 中相应地处理它

**编辑**

要覆盖您自己的活动，您只需执行与基本活动相同的操作，但无需调用初始化那些您不需要的按钮。

如果您想要切换按钮是否应该存在，只需将变量添加到您的基本活动中：

```
protected boolean mIsLoginButton = true; 
```

将 baseactivity 中的 onCreateOptionsMenu() 方法更改为如下内容：

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        if(mIsLoginButton) {
            menu.add("Login")
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
        }
        menu.add("Save")
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

        return true;
    } 
```

然后在您的 firstActivity 中，您只需执行以下操作：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mIsLoginButton = false;
} 
```

# ruby-on-rails - 在运行时将自定义字段添加到类中，在 Ruby 中使用 mongoid

> ID：13813781
> 
> 赞同：2
> 
> 时间：2012-12-11T04:43:47.260
> 
> 标签：ruby-on-rails, validation, mongoid, custom-fields

在一个项目中遇到了一个要求，其中应该根据他的公司询问登录用户的特定数据。该特定数据将是公司特定的，并且可能是强制性的或唯一的。这是我采取的方法。1\. 用三个字段定义模型：Label（字符串）、Mandatory（布尔值）、Unique（布尔值）。2\. 公司管理员可以输入必填字段。例如：`Label => "Employee number", Mandatory => true, Unique => false using a simple form.` 3\. 此数据应在为登录用户创建另一条模型兑换优惠券记录时询问。4\. 所以在Redeemed Coupon 模型的初始化过程中，重新开课，并检查登录用户的公司。

```
 class RedeemedCoupon
  def initialize(attrs = nil, options = nil)
    super
    if Merchant.current #this is set in the application controller as thread specific variable

  coupon_custom_field = CouponCustomField.where(:merchant_id => Merchant.current).first
  if coupon_custom_field and coupon_custom_field.custom_fields.size > 0
    coupon_custom_field.custom_fields.each do |custom_field|
      class_eval do
        field custom_field.label.to_sym, :type => String
        attr_accessible custom_field.label.to_sym
      end
      if custom_field.unique
        class_eval do
          index custom_field.label.to_sym
          #validates_uniqueness_of custom_field.label.to_sym, :case_sensitive => false
        end
      end
      if custom_field.mandatory
        class_eval do
          #validates_presence_of custom_field.label.to_sym
        end
      end
    end
  end
end 
```

结尾

但是，验证验证存在和唯一性不起作用，并给出失败消息：未定义回调。这是在保存之前抛出的，什么时候is_valid？称为对象。解决这个问题 进行自定义验证

```
 validate :custom_mandatory_unique

 def custom_mandatory_unique
   if Merchant.current
     coupon_custom_field = CouponCustomField.where(:ira_merchant_id => Merchant.current).first
   if coupon_custom_field and coupon_custom_field.custom_fields.size > 0
     coupon_custom_field.custom_fields.each do |custom_field|
       field_value = self.send(custom_field.label.to_sym)
       self.errors.add(custom_field.label.to_sym, "cannot be blank") if !field_value.present? and  custom_field.mandatory

      if field_value.present? and custom_field.unique
        if RedeemedCoupon.where(custom_field.label.to_sym => field_value, :merchant_id => Merchant.current).size > 0
          self.errors.add(custom_field.label.to_sym, "already taken")
        end
      end
    end
  end 
end 
```

结尾

我的问题： 1\. 这是最好的方法吗？2\. 是否有任何宝石已经存在（已搜索，但无法获得）？3\. 我怎样才能在这里使用验证助手而不是定义一个单独的验证块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T15:14:08.867

我将定义一个模型来存储与公司对应的一组属性映射，以及一个保存其值并与您的优惠券模型相关联的属性模型。然后在优惠券中创建一个自定义验证方法，确保所有需要的属性都基于公司 ID 存在，以及根据公司关联构建它们的方法。

# php - 如何在 HTML 表单中使用 PHP 函数检索和显示数据

> ID：13813782
> 
> 赞同：0
> 
> 时间：2012-12-11T04:43:57.090
> 
> 标签：php, html

我已经为此工作了大约 20 个小时的研究和试验/错误，没有看到任何解决方案我想我会在这里尝试，看看是否有人最终能指出我正确的方向并给我一些可靠的建议。

这是设置。我有一个包含 HTML 表单的页面 (customer_search.php)，我希望用户能够通过 $last_name 搜索数据库，并将结果显示在同一页面的表格上。

第一：这可能吗？在过去的几天里我读了这么多，我怀疑自己，但后来我认为它可以在不使用 Java 和使用纯 PHP/HTML 的情况下完成。

我也使用 MVC 模型。

这是主页 (customer_search.php)

```
<?php include '../view/header.php';

?>

<div id="main">
        <h1>Customer Search</h1>

            <div id="content">
  <form action="" method="post" id="aligned"

        <label>&nbsp Last Name</label>
        <input type="text" name="last_name"/>
        <br />
        <label>&nbsp;<label>
        <input type="submit" value="Search" />

            </div>
        <div id="content">
      <h2>Results</h2>

        <table>
        <tr>
            <th>Name</th>
            <th>Email Address</th>
            <th>City</th>
            <th>&nbsp;</th>
        </tr>
        <tr>
            <td><?php echo $_POST['firstName'] .' '. $_POST['last_name']; ?></td>
            <td><?php echo $_POST['email']; ?></td>
            <td><?php echo $_POST['city']; ?></td>
            <td><form action="customer_display.php" method="post">
                <input type="hidden" name="action" value="get_customer" />
                <input type="hidden" name="customer_id"
                       value="<?php echo $_POST['customer_ID']; ?>" />
                <input type="submit" value="Select" />

            </form>
            </td>

        </tr>
        </table>
      <br />
 </div>

</div>    
<?php include '../view/footer.php'; ?> 
```

这是 MODEL 文件夹中的 customer_db.php，其中包含我想使用的函数 get_customers_by_last_name($last_name)

```
<?php
function get_customers() {
global $db;
$query = 'SELECT * FROM customers
            ORDER BY lastName';
$customers = $db->query($query);
    return $customers;
}

function get_customers_by_last_name($last_name) {
global $db;
$query = "SELECT * FROM customers
        WHERE lastName = '$last_name'
        ORDER BY lastName";
$customers = $db->query($query);
return $customers;
 } 
```

我为代码过载道歉，但这是我在这里的第一篇文章，我已经尝试了我能想到的一切。我只想在 html 表单上按姓氏搜索数据库，然后将结果显示在表格上（在同一页面上），我不在乎页面是否必须刷新。我知道 PHP 是服务器端而不是客户端，所以它需要刷新。我似乎无法将结果实际显示在表格中，如果我可以在那里获得结果，下一步是选择将其传递到下一页 customer_display.php 的客户，但我会跨越那个那里的桥。感谢您的帮助，我真的在乞求一些帮助/教训。我很绝望！！！！:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:52:06.627

我过去曾使用 JQuery 和 jTable 成功地做同样的事情。

这使用 AJAX 调用，允许您在不重新加载页面的情况下调用 PHP 脚本。

你可以在这里找到你需要知道的一切：[http ://www.jtable.org/](http://www.jtable.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T05:22:19.077

嗨，你做了功课，页面必须刷新是正确的。除非您打算使用带有 javascrcipt 的 Ajax 调用（例如[jQuery](http://api.jquery.com/jQuery.ajax/)）

要按照您的要求进行操作，您必须将 PHP 放在开头。

您将其放在一份`If()`声明中，该声明仅在表格已发布时才有效。

这是我将使用您的代码执行的操作：

```
<?php
if(isset($_POST['last_name'])){
include_once 'customer_db.php';
$customers = get_customers_by_last_name($_POST['last_name']);
 }
 include '../view/header.php';

?>

<div id="main">
        <h1>Customer Search</h1>

 <div id="Search">
  <form action="" method="post" id="aligned"

        <label>&nbsp Last Name</label>
        <input type="text" name="last_name"/>
        <br />
        <label>&nbsp;<label>
        <input type="submit" value="Search" />
  </form>

</div>
<?php if(isset($customers)){ ?>
 <div id="Results">
      <h2>Results</h2>

        <table>
        <tr>
            <th>Name</th>
            <th>Email Address</th>
            <th>City</th>
            <th>&nbsp;</th>
        </tr>
        <tr>
            <?php while ($a_customer = mysql_fetch_assoc($customer)) { ?>

            <td><?php echo $a_customer['firstName'] .' '. $a_customer['last_name']; ?></td>
            <td><?php echo $a_customer['email']; ?></td>
            <td><?php echo $a_customer['city']; ?></td>
            <td><form action="customer_display.php" method="post">
                <input type="hidden" name="action" value="get_customer" />
                <input type="hidden" name="customer_id"
                       value="<?php $a_customer['customer_ID']; ?>" />
                <input type="submit" value="Select" />

            <?php } ?>
            </td>

        </tr>
        </table>
      <br />
 </div>
<?php }?>

</div>    
<?php include '../view/footer.php'; ?> 
```

一些重要的建议：

1.  使用**[Mysqli](http://php.net/manual/en/book.mysqli.php)**（或[PDO](http://php.net/manual/en/ref.pdo-mysql.php)）库而不是 Msql 用于 php
2.  您不应该信任搜索表单上的用户输入数据，您可以使用[janitor.class](http://www.phpclasses.org/package/5907-PHP-Validate-and-sanitize-different-types-of-values.html)来清理帖子。
3.  当您有更多时间时，请查看有关 PHP 安全性的这些链接：[邪恶用户](https://www.owasp.org/index.php/Agile_Software_Development%3a_Don%27t_Forget_EVIL_User_Stories)、[PHP 安全性](https://www.owasp.org/index.php/PHP_Security_Cheat_Sheet)、[PHP 安全编码](https://www.owasp.org/index.php/Secure_Coding_Cheat_Sheet)
4.  哦！并且不要给同一页面中的两个元素赋予相同的**id 值**，id的目的是给每个元素一个唯一的标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T04:50:55.187

这就是 AJAX 的用途……与服务器进行异步通信（即不在页面加载时）。您最好的选择可能是使用 JQuery 或其他 JS 框架，这将使 AJAX 调用变得轻而易举[`$.ajax();`](http://api.jquery.com/jQuery.ajax/)：：

就像是：

```
$.ajax({
  type: "POST",
  url: '/directory/to/php_script_that_outputs_the_table_html.php',
  data: { name: "Smith"},
  success: function(data) {
    $('.class_of_div_to_recieve_code').html(data);
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T04:55:59.873

使用 AJAX 调用 PHP 对象，该对象实例化您的模型并以 JSON 字符串的形式返回结果。收到结果后，使用 JavaScript 循环遍历 JSON 并输出您的表。

我推荐 jQuery，它有自己的 .ajax() 函数，并且很容易用你的结果集来操作 DOM。去阅读[jQuery 文档](http://api.jquery.com/jQuery.ajax/)。

# node.js - 服务客户端 Jade 模板

> ID：13813789
> 
> 赞同：4
> 
> 时间：2012-12-11T04:44:45.430
> 
> 标签：node.js, backbone.js, express, pug, marionette

我想在客户端使用 Jade 模板和 Backbone。我怎样才能做到这一点？

目前，我已成功配置 Backbone (Marionette) 来编译 Jade 模板以在其视图中使用：

```
Marionette.TemplateCache.prototype.compileTemplate = (tmplStr) ->
    console.log "jade stuff: ", jade.compile(tmplStr)
    return jade.compile(tmplStr) 
```

“问题”是：我目前正在编写如下模板：

```
script(type="text/template", id="tmplMainView")
    | h1= title
    | p= content 
```

注意管道 ( `|`) 是为了防止 Jade 试图在服务器端解释/解析它们。我怎样才能消除那些？

**更新**

也许我可以使用`jade --client`标志......但它提供了一个编译函数：例如

```
h1= title 
```

变成

```
function anonymous(locals, attrs, escape, rethrow, merge) {
attrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;
var buf = [];
with (locals || {}) {
var interp;
buf.push('<h1>');
var __val__ = title
buf.push(escape(null == __val__ ? "" : __val__));
buf.push('</h1>');
}
return buf.join("");
} 
```

这意味着我必须为每个模板有 1 个 Jade/编译的 JS？我该如何使用它？另外我认为许多 JS 文件是一种缓慢的工作方式？但是由于模板函数都被命名为匿名，那么我怎样才能连接或以某种方式有效地使用它们呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T13:23:12.767

检查[ClientJade](http://projects.jga.me/clientjade/)项目。

从他们的网站：

> clientjade 是一个命令行工具，用于将您的 Jade 模板编译成客户端模板，以便在浏览器中使用。它会自动包含渲染模板所需的一切，无需包含jade.js 或runtime.js。

```
$ clientjade test1.jade test2.jade > templates.js 
```

> 然后在你的 html 中包含 template.js 文件。要渲染模板，只需像这样调用：

```
//jade.render(domNode, templateName, data);    
jade.render(document.getElementById('test1'), 'test1', { name: 'Bob' }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T09:32:33.390

在查看了 Jadify 和 ClientJade 并在此过程中遇到了一些问题......（也许只是我错过了一些东西）之后，我决定探索简单地在服务器端编译模板。

我定义了一个 Node 模块（由 ExpressJS 使用），它进行编译并返回编译后的 JS 源代码（我使用它`/js/templates.js`）。

```
fs = require "fs"
jade = require "jade"
async = require "async"

# done callback will be passed (source, err)
exports.compile = (done, templatesDir) ->
    js = "var Templates = {}; \n\n"

    # get all files in templates directory
    fs.readdir templatesDir, (err, files) ->
        # keep only ".jade" files
        jadeFiles = files.filter (file) -> 
            file.substr(-5) == ".jade"

        # function to compile jade templates (appending to js source)
        compileTmpl = (file, doneCompile) ->
            # "test.jade" becomes "test"
            key = file.substr(0, file.indexOf("."))
            filePath = templatesDir + file
            fs.readFile filePath, (err, src) ->
                # store js function source into Templates.{key}
                js += "Templates." + key + " = " + jade.compile(src, { debug: false, client: true }).toString() + "; \n\n"
                doneCompile(err)

        # foreach jadeFile, compile template, then write templates.js file
        async.forEach jadeFiles, compileTmpl, (err) ->
            done(js, err) 
```

我在客户端使用预编译的模板，包括`templates.js`并使用以下模板：

*   `Templates.tmpl1()`
*   `Templates.tmpl2({ something: "Hello world", ... })`

更多关于**https://coderwall.com/p/hlojkw**

# c# - 我是否需要取消订阅 ac#metro 应用程序中的事件？

> ID：13813793
> 
> 赞同：5
> 
> 时间：2012-12-11T04:45:14.167
> 
> 标签：c#, windows-8, microsoft-metro

`OnNavigatedTo`我已经订阅了各种活动

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    Loaded += Screen_Loaded;
} 
```

我没有取消订阅此活动。不需要此页面时是否会导致任何内存问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T08:16:14.280

**没有**。在这种情况下，您无需取消订阅以避免内存泄漏。原因是您订阅了`this`. 垃圾收集器必须识别这一点并释放该对象。

**但是**，由于其他原因，我仍然会退订。例如，拥有平衡的资源使代码更易于阅读。如果 OnNavigatedTo 被调用两次怎么办？（实际上不知道这是否会发生）然后您将有两个订阅相同的方法。有些人会争辩说，在这种情况下取​​消订阅是多余的代码并将其删除。虽然这样是正确的，但我会反对这样的论点。

你可以试试这个简短的片段来自己尝试一下。注意：永远不要使用终结器，或者`GC.Collect()`除非像本例中那样了解 GC。

```
public class Program
{
    private class Foo
    {
        public event EventHandler FooChanged;

        ~Foo()
        {
            Console.WriteLine("Foo was collected");
        }

        public void Bar()
        {
            FooChanged += UpdateUI;
        }

        private void UpdateUI(object sender, EventArgs e)
        {
        }
    }

    public static void Main(string[] args)
    {
        var foo = new Foo();
        foo.Bar();
        foo = null;
        GC.Collect();
        GC.WaitForPendingFinalizers();
        Console.WriteLine("End of program");
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:05:18.367

是的，您必须取消订阅某些可能在 Metro 应用程序中自动触发的事件

例如 ：

事件如

```
Window.Current.SizeChanged += Current_SizeChanged;

void Current_SizeChanged(object sender, Windows.UI.Core.WindowSizeChangedEventArgs e)
{
    //your code block contining various objects and logic
} 
```

这些事件不受您控制，因为它们在后台触发。任何可能与特定页面无关的事件（假设上述事件在 OnNavigatedTo 事件中初始化）然后您必须在 OnNavigatedFrom 等事件中取消订阅

为进一步澄清初始化此事件

```
Window.Current.SizeChanged += Current_SizeChanged; 
```

并且只需保留一个断点并将窗口的大小从横向更改为捕捉模式，除非您没有取消订阅该事件，否则该事件将触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T05:43:33.173

请记住：

1.  您可能会不小心多次订阅事件（使用 -= 来避免这种情况）。
2.  如果事件处理程序是来自某个其他对象的方法，那么该对象将不会被垃圾收集，直到该方法订阅了一个事件。

# iphone - 在按钮按下时更改导航按钮项目

> ID：13813797
> 
> 赞同：2
> 
> 时间：2012-12-11T04:45:33.970
> 
> 标签：iphone, button, navigation, switch-statement

我希望能够将右侧导航栏按钮更改为具有名称和操作的不同按钮。

举个例子：

btnOpenImage 被按下并且 rightNavButton1 变为 rightNavButton2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:11:59.397

```
 -(IBAction) btnOpenImage_Clicked:(id)sender{

//1\. IF buttons are UIBarButtonItem then use bellow code
                  // This bellow line for Change the action(Target)
                 [rightNavButton1 setAction:@selector(rightNavButton2_Clicked)]; 

                 //This bellow line For Change  the Title
                 [rightNavButton1 setTitle:@"rightNavButton2_Clicked"]; 

//OR 2\. IF buttons are UIButton then use bellow code

                // This bellow line for Change the action(Target)
                [rightNavButton1 addTarget:self action:@selector(rightNavButton2_Clicked) forControlEvents:UIControlEventTouchUpInside];

                //This bellow line For Change  the Title
                [rightNavButton1 setTitle: @"rightNavButton2" forState: UIControlStateNormal];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:55:25.830

试试这个：

```
[btnOpenImage addTarget:self 
               action:@selector(aMethod)
     forControlEvents:UIControlEventTouchDown];

- (void)aMethod
{
   [rightNavButton1 setTitle: @"rightNavButton2" forState: UIControlStateNormal];

} 
```

# c# - 如何使用 selenium web 驱动程序 c# 测试具有多个用户名（存在于 excel 中）的登录页面？

> ID：13813798
> 
> 赞同：1
> 
> 时间：2012-12-11T04:45:33.210
> 
> 标签：c#, c#-4.0, selenium, webdriver

通过使用 selenium web 驱动程序 c#。如何使用不同的用户名和密码测试登录页面（存在于excel表中），如何将excel中存在的数据自动连接并导入登录页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:50:04.160

使用数据驱动测试：使用多组数据测试相同的场景。[使用 C# 在 selenium 中进行数据驱动测试](http://www.c-sharpcorner.com/UploadFile/jawedmd/data-driven-testing-using-selenium-webdriver-in-C-Sharp/)

# ios - 在管理器中分发应用程序时代码签名失败

> ID：13813802
> 
> 赞同：3
> 
> 时间：2012-12-11T04:45:51.287
> 
> 标签：ios, xcode, signing, organizer

我的 xcode 突然出现分发任何应用程序的问题。当我单击“分发...”按钮并选择代码签名身份时。这是错误消息：

> **代码签名操作失败**
> 
> 无效的参数被传递给 codesign。参数为：--sign fd2f30b26c9b384c635a044aefa90683239a434a --force --preserve元数据=标识符，权利资源的规则的/ var /文件夹/ C6 / yjp3wvhx2bv34_wpcg4j779c0000gn / T / AD6840D0-4776-4EEF-BFC6-9EBA2A1188D6-212-0000012034964EA7 / TestSigning。应用程序/测试签名

每个项目都会出现这个问题，所以我认为这是 xcode 问题。在此问题发生之前我唯一做的就是单击“Provisioning Profiles”视图中的“Refresh”按钮。所有配置文件都有效，我可以在我的设备中运行所有应用程序。唯一的问题是我无法分发它们。

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T06:32:31.513

这可能是因为您可能安装了一些第三方签名应用程序（例如 InstaSign）。从以下 URL 下载我的文件备份： [https ://www.dropbox.com/s/xawvd81zzedz0jo/codesign.zip](https://www.dropbox.com/s/xawvd81zzedz0jo/codesign.zip)

将文件提取并粘贴到 /usr/bin （使用 Command+Shift+G 直接输入路径。）

这应该解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:57:14.817

分发过程很麻烦。这是我刚刚为解决问题所做的，与您的不完全相同。

1.  删除xcode中的所有规定
2.  删除钥匙串中的所有证书
3.  “配置文件”中的“刷新”
4.  特定应用程序的下载分发条款
5.  生成ipa文件

生成 ipa 文件时，我使用第二个选项![保存为企业](../Images/11dabfb9e6f9ca45065e6d54bf100f81.png)，

其他选项对我不起作用

# database - 如何将 NGINX 连接到 PostgreSQL 以获得有效的虚拟主机域？

> ID：13813803
> 
> 赞同：4
> 
> 时间：2012-12-11T04:45:50.477
> 
> 标签：database, nginx

我让 nginx 在端口 80 上侦听，并将请求传递到端口 3000 上的流星（包装 node.js）。

这很容易做到，而且我得到了它的工作。

但是，我希望 nginx 只处理对有效虚拟主机域的请求。会有很多，所以我认为将 NGINX 连接到 PostgreSQL 并将它们存储在那里是有意义的。

我用这个模块编译了 NGINX：http://labs.frickle.com/nginx_ngx_postgres/[来](http://labs.frickle.com/nginx_ngx_postgres/)实现这一点。

这是 nginx.conf 节：

```
http {
    upstream database {
        postgres_server  127.0.0.1 dbname=some_name user=some_user password=some_password;
    }

    server {
        location / {
            postgres_pass     database;
            postgres_query   "SELECT * FROM sites WHERE domain='$http_host'";
            proxy_pass        http://localhost:3000;
            proxy_set_header  X-Real-IP  $remote_addr;
        }
    }
} 
```

起初我认为它工作正常，因为我得到了我添加到数据库中的 3 个测试域的正确结果。但是，后来我删除了一个，它仍然有效！

所以，很明显，我配置错了。这是一个足够独特的案例，谷歌没有帮助。:(

有人做过吗？

提前致谢！

# wordpress - 如何在 Wordpress 中向自定义帖子类型添加按钮？

> ID：13813805
> 
> 赞同：8
> 
> 时间：2012-12-11T04:46:19.610
> 
> 标签：wordpress

我有一个“产品”自定义帖子类型。通常，此自定义帖子类型有一个“添加新”按钮。我想添加另一个按钮调用“从提供商更新”。

目前，我已经修改了 Wordpress 代码（在“wordpress\wp-admin\includes\class-wp-list-table.php”中）以添加该按钮。在这种情况下，当我更新 Wordpress 时，我修改的代码将被删除。因此，我需要将该按钮移动到我的插件代码中。

在这种情况下，请帮助我如何将该按钮移动到我的插件代码中。

![在此处输入图像描述](../Images/5a6a44a509f3f789575651525b021582.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T19:05:56.020

好吧，如果您打开核心文件，您会看到其中没有我们可以挂钩的操作。

只有几个过滤器。我们可以使用以下内容：

```
add_filter( 'views_edit-movies', 'so_13813805_add_button_to_views' );
function so_13813805_add_button_to_views( $views )
{
    $views['my-button'] = '<button id="update-from-provider" type="button"  title="Update from Provider" style="margin:5px">Update from Provider</button>';
    return $views;
} 
```

它产生这个：

> ![cpt中的自定义按钮](../Images/63d8d3133e62d32c945ddb8f8befdf03.png)

要将其放置在您想要的大致位置，请使用以下命令：

```
add_action( 'admin_head-edit.php', 'so_13813805_move_custom_button' );

function so_13813805_move_custom_button(  )
{
    global $current_screen;
    // Not our post type, exit earlier
    if( 'movies' != $current_screen->post_type )
        return;
    ?>
    <script type="text/javascript">
        jQuery(document).ready( function($) 
        {
            $('#update-from-provider').prependTo('span.displaying-num');    
        });     
    </script>
    <?php 
} 
```

结果是：
![jquery dom 操作](../Images/68ca766a2cd131b2a731fab508faf36a.png)

# c++ - 一个事件系统 - 像 Qt 中的信号/插槽，没有分叉 - C++

> ID：13813808
> 
> 赞同：0
> 
> 时间：2012-12-11T04:46:39.540
> 
> 标签：c++, qt, fork, design-principles

我想知道如何设计一个系统，它可以提供一个可靠的框架来处理信号以及信号/s 和方法/s 之间的连接，而无需编写一个非常不愉快的循环，该循环通过一些用于分叉流的语句反复迭代的应用程序。

换句话说，我想知道 Qt 或类似的信号槽机制背后的理论。

我命名 Qt 没有特别的原因，它可能是最常用和经过良好测试的库之一，因此它是 C++ 世界的参考，但任何关于这种机制设计的想法都会很好。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:29:30.117

在高层次上，Qt 的信号/槽和 boost 的信号库就像[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)一样工作（它们只是避免需要观察者基类）。

每个“信号”都会跟踪观察它的“槽”，然后在发出信号时遍历所有“槽”。

至于具体如何实现，C++ 与 Wikipedia 文章中的 Java 代码非常相似。如果你想避免为所有观察者使用一个接口，boost 使用模板，Qt 使用宏和一个特殊的预编译器（称为 moc）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T19:38:05.140

听起来您要求一切，但没有任何损失。

我知道一些用于处理异步输入和更改的一般概念，例如“按键被按下”和“触摸事件”以及“改变自身状态的对象”。

这些概念和机制中的大多数对各种程序流都很有用，并且可以跨越许多边界：进程、线程等。这不是最详尽的列表，但它们涵盖了我遇到的许多内容。

*   状态机
*   线程
*   留言
*   事件循环
*   信号和插槽
*   轮询
*   计时器
*   回调函数
*   挂钩输入
*   管道
*   插座

我建议在 Wikipedia 或 Qt 文档或 C++ 书籍中研究这些内容，并查看您希望在您的框架中使用的工作或机制。

另一个非常好的主意是看看编程架构师过去是如何做到的，例如在 Linux 的源代码中，或者 Windows API 如何让您在他们的框架中访问此类信息。

希望有帮助。

编辑：对问题的评论/补充的回应

我会管理传入坐标的缓冲区/队列，并有一个获取最新坐标的访问器。然后我会跟踪事件，例如触摸/点击/拖动的开始和结束，并有某种计时器用于执行长触摸时，以及执行拖动触摸时的最小变化测量.

如果我只在一个程序中使用它，我会尝试制作一个与我在使用中可以找到的界面相似的界面。我听说 OpenSoundControl 用于这种输入。我已经设置了一个线程来收集坐标并跟踪事件。然后我在需要使用它的程序/类中轮询该信息。

# java - 当我尝试添加更多代码时，为什么编译器会“按预期”抱怨？

> ID：13813813
> 
> 赞同：0
> 
> 时间：2012-12-11T04:47:10.637
> 
> 标签：java

编写一个包含@字符的单词作为输入的程序。如果单词不包含@，它应该提示用户输入带有@ 的单词。一旦读取了带有@ 的单词，它应该输出该单词然后终止。

这是我到目前为止所做的：

```
public class find {
    public static void main(String[] args) {

        System.out.println(" Please enter a word with @ ");
        Scanner scan = new Scanner(System.in);

        String bad = "@";

        String word = scan.next();
        do
            if (!word.contains(bad))
                System.out.println(" Please try again ");
            else
                System.out.println(" " + word);
        while (!word.contains(bad));
    }
} 
```

在输入包含“@”的单词后，我可以让它终止，但是如果我尝试在“请重试”之后将扫描仪添加到该行，它会说`while expected`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T04:54:54.550

我认为问题是您缺少 do/while 周围的大括号：

```
 do
          if (!word.contains( bad ))
            System.out.println( " Please try again " );

            else 
            System.out.println( " " + word);

        while ( !word.contains( bad )); 
```

应该：

```
do
{
            if (!word.contains( bad ))
            System.out.println( " Please try again " );

            else 
            System.out.println( " " + word);
}while ( !word.contains( bad )); 
```

有些人可能不喜欢这样，但我的建议是始终使用开/关大括号。在这种情况下，对于代码 if/else 也是如此。它避免了很多混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:54:27.250

这就是您的问题所在：

```
 do
            if (!word.contains(bad))
                System.out.println(" Please try again ");
            else
                System.out.println(" " + word);
        while (!word.contains(bad)); 
```

您需要从循环开始的地方放置大括号，直到结束。|所以这个东西应该是这样的：

```
do {
    if (!word.contains(bad))
        System.out.println(" Please try again ");
    else
        System.out.println(" " + word);
} while(!word.contains(bad)); 
```

为了更好的实践，您应该[在此处](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)`do...while`检查循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T04:56:31.900

有两个问题。

1.  您的代码没有正确使用大括号
2.  如果没有输入正确的单词，您就不会尝试阅读新单词。

另外，我更喜欢`while`在这种情况下更好地`do-while`循环，而不是如下所示的循环。

```
 Scanner scan = new Scanner ( System.in );
    String required= "@";
    System.out.println( " Please enter a word with @ " );
    String word = scan.next() ;

    //check if the right word(containing @) is entered, 
    //if not then loop until it is enteres
    while((!word.contains(required)){
        System.out.println( " Please try again " );
        //read the new word as input from the user
        word = scan.next() ;
    }
    //right word is entered, display it
    System.out.println(word); 
```

另请注意，当您使用 时`scan.next()`，如果在同一行中输入，它会分别读取每个单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T05:04:20.887

您的代码的问题在于它没有重新阅读循环中的单词。像这样修改循环（对代码的最小更改）。

```
do {
        word = scan.next();
        if (!word.contains(bad))
            System.out.println(" Please try again ");

        else
            System.out.println(" " + word);
    }
    while (!word.contains(bad)); 
```

是的，正如其他人指出的那样，尝试使用大括号，尤其是嵌套结构。

# lotus-notes - 用于选择性粘贴的 Lotus @command 脚本 -> 文本

> ID：13813815
> 
> 赞同：1
> 
> 时间：2012-12-11T04:47:17.890
> 
> 标签：lotus-notes, lotus-formula

我正在寻找一种方法来创建一个按钮来粘贴纯文本。即编辑-> 选择性粘贴-> 文本。

我找到了这个功能`@Command([EditPasteSpecial])`，但它只弹出选择性粘贴对话框。

有没有办法从这个列表中自动选择文本？也许有某种方法可以自动化“T”和“Enter”的击键？

我尝试为`@Char(84)`和`@Char(13)`模拟这些击键添加一行，但这没有用。还有其他选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:09:40.853

您必须使用 Lotusscript。查看 NotesRichTextItem 类的 GetUnformattedText 方法。

# coldfusion - Open BlueDragon 中参数的解决方法

> ID：13813817
> 
> 赞同：0
> 
> 时间：2012-12-11T04:47:33.087
> 
> 标签：coldfusion, openbd

打开BlueDragon 2.0.2，不支持：

`param rc.nodeid = "";`

特别是参数部分不起作用

什么是好的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:17:43.217

虽然我不熟悉 BD，但这些选项中的每一个都应该有效：

三元运算符：

```
rc.nodeid = structKeyExists( rc, "nodeid" ) ? rc.nodeid : ""; 
```

正常的 if/else 语句：

```
if( !structKeyExists( rc, "nodeid" ) ) {
    rc.nodeid = "";
} 
```

就个人而言，我更喜欢三元运算符，因为它几乎和 一样简洁`param`，但是对于不熟悉它的人来说，你会牺牲一些可读性。

**编辑**：我去看了 BD 的[文档](http://openbd.org/manual/?/cfscript#param)。看起来 BD 需要“名称”属性，所以你应该能够做到这一点：

```
param name="rc.nodeid" default=""; 
```

# c# - 将更改的列表合并到主列表的最简单方法

> ID：13813821
> 
> 赞同：1
> 
> 时间：2012-12-11T04:48:43.410
> 
> 标签：c#, winforms, list

我有两个类对象列表：

```
private List<IntVector> UserData = new List<IntVector>();
private List<IntVector> EditData = new List<IntVector>(); 
```

`UserData`是主列表，`EditData`是另一个用于添加、删除或修改列表的列表。班级成员之一是`CaseNo`不会改变 IntVector 的。

我已在 中进行了更改，`EditData`并希望将更改合并到`UserData`.

知道怎么做吗？

编辑：这是`IntVector`

```
class IntVector
    {
        //private DateTime date_kept;
        private string date1;
        private string next_date;
        private string presence;
        private string next_hearing_time;

        //private Hashtable case_type;
        private string court_name;
        private string case_no;
        private string status;
.
.
.
        public string Date1
        {
            set { this.date1 = value; }
            get { return this.date1; }
        }

        public string NextDate
        {
            get { return this.next_date; }
            set { this.next_date = value; }
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:03:31.150

假设`IntVector`是一个结构，该`IList.Union`方法通过合并列表和删除重复项来满足您的需求：

```
UserData  = UserData.Union(EditData).ToList(); 
```

如果它不是 struct.. 那么您仍然可以执行上述操作，但是您必须重载相等运算符，`Equals`并可能`GetHashCode`为此重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:01:35.547

我认为你正在寻找的是这样的：

```
UserData = (from u in UserData
                      join e in EditData
                      on u.CaseNo equals e.CaseNo
                      into joined
                      from x in joined.DefaultIfEmpty()
                      select new IntVector
                      {
                          CaseNo = u.CaseNo,
                          Data = x == null ? u.Data : x.Data
                      }).ToList(); 
```

# html - 显示跨 Web 浏览器的 HTML 解析差异的简单示例？

> ID：13813822
> 
> 赞同：1
> 
> 时间：2012-12-11T04:48:49.860
> 
> 标签：html, browser, cross-browser, html-parsing

在 HTML5 之前，浏览器之间在“HTML 理解”方面存在一些差异。

例如[`<foo<bar>`，既可以解析为两个标签，也可以解析为一个标签。](https://developer.mozilla.org/en-US/docs/HTML/HTML5/HTML5_Parser)

目前，我刚刚尝试过

```
<ol<li>hello 
```

但我没有看到 IE、Chrome、Firefox 和 Safari 之间有任何区别。

不同浏览器之间是否还有解析差异？如果是这样，你能举一些简单但常见的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:43:25.587

HTML5 定义了格式错误的 HTML [0] 的错误处理和错误恢复。主流浏览器的所有最新版本现在都有一个符合此规范的 HTML5 解析器。这些 HTML5 解析器是在检查测试套件以确保它们做正确的事情时开发的。如果现代浏览器之间存在任何差异，则应将其视为错误并报告给相关浏览器供应商。我不知道这方面的任何当前错误。

[0] [http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html](http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html)

# python - 堆中的替换和删除操作

> ID：13813826
> 
> 赞同：0
> 
> 时间：2012-12-11T04:49:13.480
> 
> 标签：python, data-structures

我正在解决一个需要使用堆数据结构解决的问题。尽管操作将由 insert 和 extract-min 主导，但在某些情况下，我需要替换项​​目的键（增加或减少）或完全删除项目，键。由于该`heapq`模块不提供这些操作并且在堆中搜索一个项目`O(n)`，因此使用 dict 进行簿记然后仅使用它来查找项目的位置、删除或替换它并调用`heapify`恢复会更聪明堆属性——所有这些操作都将在`O(logn)`. 不过，问题是我无法实现这样的字典。

```
h, bkp = [], {}
heappush(h, (5, 'a'))
bkp['a'] = # index of 'a' in heap
heappush(h, (7, 'b'))
bkp['b'] = # index of 'b' in heap
heappush(h, (1, 'c'))
bkp['c'] = # index of 'c' in heap

# deleting 'a'
h[bkp['a']], h[-1] = h[-1], h[bkp['a']]
h.pop()
heapify(h) 

#update indices in bkp 
```

问题 - 如何找到堆中新插入的索引，以及在删除或推送操作之后，如何重新计算堆中现有项的索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:20:40.353

有几种方法可以做到这一点。

一种选择是通过将每个对象的位置存储在对象本身中来使您的堆具有侵入性。这样，每当您想查找对象的位置时，只需查找对象内的位置字段即可在 O(1) 中执行此操作。

您还可以将辅助哈希表或 BST 与将堆中的每个值映射到其在堆中的位置的堆一起存储。这类似于第一种方法，但有一个额外的间接层。

希望这可以帮助！

# php - CodeIgniter-YouTube-API-Library 使用注册帐户进行身份验证

> ID：13813835
> 
> 赞同：5
> 
> 时间：2012-12-11T04:50:21.273
> 
> 标签：php, codeigniter, youtube, google-api

我已经添加了 CodeIgniter-YouTube-API-Library 用于将视频文件上传到已注册的 youtube 帐户。我手上有 apikey、oauth 密钥、oauth 密钥。我成功上传了。**但是当前的问题是当另一个用户尝试上传视频时，而不是上传到注册的 youtube 帐户，而是转到当前用户的 youtube 帐户**。如何通过提示用户登录到注册帐户来避免这种情况。请建议一个解决方案。我正在使用以下代码。

```
public function request_youtube()
{
    $params['key'] = 'ENTER YOUR GOOGLE CONSUMER KEY';
    $params['secret'] = 'ENTER YOUR GOOGLE CONSUMER SECRET';
    $params['algorithm'] = 'HMAC-SHA1';

    $this->load->library('google_oauth', $params);
    $data = $this->google_oauth->get_request_token(site_url('example/access_youtube'));
    $this->session->set_userdata('token_secret', $data['token_secret']);
    redirect($data['redirect']); 
}

//This method will be redirected to automatically
//once the user approves access of your application
public function access_youtube()
{
    $params['key'] = 'ENTER YOUR GOOGLE CONSUMER KEY';
    $params['secret'] = 'ENTER YOUR GOOGLE CONSUMER SECRET';
    $params['algorithm'] = 'HMAC-SHA1';

    $this->load->library('google_oauth', $params);

    $oauth = $this->google_oauth->get_access_token(false, $this->session->userdata('token_secret'));

    $this->session->set_userdata('oauth_token', $oauth['oauth_token']);
    $this->session->set_userdata('oauth_token_secret', $oauth['oauth_token_secret']);
}

//This method can be called without having
//done the oauth steps
public function youtube_no_auth()
{
    $params['apikey'] = 'ENTER YOUR GOOGLE YOUTUBE API KEY';

    $this->load->library('youtube', $params);
    echo $this->youtube->getKeywordVideoFeed('pac man');
}

public function direct_upload()
{
    $videoPath = 'THE RELATIVE PATH ON YOUR SERVER TO THE VIDEO';
    $videoType = 'THE CONTENT TYPE OF THE VIDEO'; //This is the mime type of the video ex: 'video/3gpp'

    $params['apikey'] = 'ENTER YOUR GOOGLE YOUTUBE API KEY';
    $params['oauth']['key'] = 'ENTER YOUR GOOGLE CONSUMER KEY';
    $params['oauth']['secret'] = 'ENTER YOUR GOOGLE CONSUMER SECRET';
    $params['oauth']['algorithm'] = 'HMAC-SHA1';
    $params['oauth']['access_token'] = array('oauth_token'=>urlencode($this->session->userdata('oauth_token')),
                                             'oauth_token_secret'=>urlencode($this->session->userdata('oauth_token_secret')));
    $this->load->library('youtube', $params);

    $metadata = '<entry xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:yt="http://gdata.youtube.com/schemas/2007"><media:group><media:title type="plain">Test Direct Upload</media:title><media:description type="plain">Test Direct Uploading.</media:description><media:category scheme="http://gdata.youtube.com/schemas/2007/categories.cat">People</media:category><media:keywords>test</media:keywords></media:group></entry>';
    echo $this->youtube->directUpload($videoPath, $videoType, $metadata);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:09:50.457

在这里[https://developers.google.com/youtube/articles/codeigniter_library](https://developers.google.com/youtube/articles/codeigniter_library)我可以看到 directUpload 函数也有一个用户参数。尝试将其设置为登录用户的 id 并查看是否有效。

# javascript - 如何判断哪个敌人被击中并单独消灭

> ID：13813837
> 
> 赞同：0
> 
> 时间：2012-12-11T04:50:29.633
> 
> 标签：javascript, jquery

[http://jsfiddle.net/5DB6K/](http://jsfiddle.net/5DB6K/)

我正在制作这个游戏，您可以从屏幕两侧射击敌人。我让子弹移动并在它们到达屏幕末端时被移除（如果它们没有击中任何敌人）并在与敌人碰撞时移除敌人。

```
//------------collision----------------//
        if(shot === true){

            bulletY = $('.bullet').position().top + 2;
            bulletX = $('.bullet').position().left + 2;

            $('.enemy').each(function(){

                if($('.enemy').hasClass('smallEnemy')){
                enemyY = $(this).position().top + 7;
                enemyX = $(this).position().left + 7;

                if(Math.abs(bulletY - enemyY) <= 9 && Math.abs(bulletX - enemyX) <=9){

                    $(this).remove();
                    score = score + 40;
                    bulletDestroy();

                }
              }

           });
        } 
```

但是，如果碰撞检查正确，子弹会摧毁所有敌人，这不是我想要的。我想检查敌人是否具有 smallEnemy、medEnemy 或 lrgEnemy 类，然后进行碰撞检查，这是我认为的，但它似乎不起作用。

此外，随着时间的推移，游戏开始滞后。有人知道原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:00:37.913

`.each`根据您的条件，只要有小敌人出现，这将移除所有敌人。尝试这个：

```
if($(this).hasClass('smallEnemy')){
            enemyY = $(this).position().top + 7;
            enemyX = $(this).position().left + 7;

            if(Math.abs(bulletY - enemyY) <= 9 && Math.abs(bulletX - enemyX) <=9){

                $(this).remove();
                score = score + 40;
                bulletDestroy();

            } 
```

至于延迟，这是由于内存可用性和开销。我不会循环遍历您的“敌人”，而是将观察者附加到您的子弹上，并且每当它们与`.enemy`您相交时，都应触发自定义事件以删除`this`敌人。代码也少了很多。

# c++ - 完美转发到异步 lambda

> ID：13813838
> 
> 赞同：12
> 
> 时间：2012-12-11T04:50:35.297
> 
> 标签：c++, c++11, lambda, perfect-forwarding, stdasync

我有一个函数模板，我想在其中完美地转发到我在另一个线程上运行的 lambda。这是一个可以直接编译的最小测试用例：

```
#include <thread>
#include <future>
#include <utility>
#include <iostream>
#include <vector>

/**
 * Function template that does perfect forwarding to a lambda inside an
 * async call (or at least tries to). I want both instantiations of the
 * function to work (one for lvalue references T&, and rvalue reference T&&).
 * However, I cannot get the code to compile when calling it with an lvalue.
 * See main() below.
 */
template <typename T>
std::string accessValueAsync(T&& obj)
{

    std::future<std::string> fut =
        std::async(std::launch::async,
            [](T&& vec) mutable
            {
                return vec[0];
            },
            std::forward<T>(obj));

    return fut.get();
}

int main(int argc, char const *argv[])
{
    std::vector<std::string> lvalue{"Testing"};

    // calling with what I assume is an lvalue reference does NOT compile
    std::cout << accessValueAsync(lvalue) << std::endl;

    // calling with rvalue reference compiles
    std::cout << accessValueAsync(std::move(lvalue)) << std::endl;

    // I want both to compile.

    return 0;
} 
```

对于非编译情况，这是错误消息的最后一行，这是可以理解的：

```
main.cpp|13 col 29| note:   no known conversion for argument 1 from ‘std::vector<std::basic_string<char> >’ to ‘std::vector<std::basic_string<char> >&’ 
```

我有一种感觉，它可能与如何`T&&`推断有关，但我无法确定确切的故障点并修复它。有什么建议么？

谢谢！

编辑：我正在使用 gcc 4.7.0 以防万一这可能是编译器问题（可能不是）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T05:48:07.467

我理解它的方式你不能使用一个`async`期望非常量左值引用作为参数的函数，因为`async`总是会在内部复制它们（或将它们移动到内部）以确保它们存在并且在线程的整个运行时间内有效创建的。

具体来说，该标准说`async(launch policy, F&& f, Args&&... args)`：

> （§30.6.8）
> 
> (2) 要求：`F`并且每一项都应满足 MoveConstructible 的要求`Ti`。(20.8.2, 30.3.1.2) 应该是一个有效的表达式。`Args``INVOKE(DECAY_COPY (std::forward<F>(f)), DECAY_COPY (std::forward<Args>(args))...)`
> 
> (3) 效果：[...] 如果 policy & launch::async 不为零 - 调用`INVOKE(DECAY_COPY (std::forward<F>(f)),DECAY_COPY (std::forward<Args>(args))...)`(20.8.2, 30.3.1.2) 就好像在一个由线程对象表示的新执行线程中，`DECAY_COPY()`调用在调用异步的线程中评估。任何返回值都作为结果存储在共享状态中。从执行 INVOKE (DECAY_COPY (std::forward(f)), DECAY_COPY (std::forward(args))...) 传播的任何异常都作为异常结果存储在共享状态中。
> 线程对象存储在共享状态中，并影响引用该状态的任何异步返回对象的行为。

不幸的是，这意味着您甚至不能用 a 替换引用`std::reference_wrapper`，因为后者不是可移动构造的。我想使用 a`std::unique_ptr`而不是引用会起作用（但是，这意味着您的函数参数将始终存在于堆上）。

**（编辑/更正）**
当我意识到`std::reference_wrapper`实际上启用了一种解决方法时，我正在解决一个相关问题，尽管我在上面声称相反。

如果您定义了一个将左值引用包装在 a`std::reference_wrapper`中但保持右值引用不变的函数，则可以在将参数传递`T&&`给 之前通过此函数传递参数`std::async`。我在`wrap_lval`下面调用了这个特殊的包装函数：

```
#include <thread>
#include <future>
#include <utility>
#include <iostream>
#include <vector>
#include <type_traits>

/* First the two definitions of wrap_lval (one for rvalue references,
   the other for lvalue references). */

template <typename T>
constexpr T&&
wrap_lval(typename std::remove_reference<T>::type &&obj) noexcept
{ return static_cast<T&&>(obj); }

template <typename T>
constexpr std::reference_wrapper<typename std::remove_reference<T>::type>
wrap_lval(typename std::remove_reference<T>::type &obj) noexcept
{ return std::ref(obj); }

/* The following is your code, except for one change. */
template <typename T>
std::string accessValueAsync(T&& obj)
{

  std::future<std::string> fut =
    std::async(std::launch::async,
           [](T&& vec) mutable
           {
             return vec[0];
           },
           wrap_lval<T>(std::forward<T>(obj)));   // <== Passing obj through wrap_lval

  return fut.get();
}

int main(int argc, char const *argv[])
{
  std::vector<std::string> lvalue{"Testing"};

  std::cout << accessValueAsync(lvalue) << std::endl;

  std::cout << accessValueAsync(std::move(lvalue)) << std::endl;

  return 0;
} 
```

`accessValueAsync`有了这个改变，编译和工作的调用。第一个使用左值引用，自动将其包装在`std::reference_wrapper`. `std::async`后者在调用 lambda 函数时会自动转换回左值引用。

# ios - iOS MKMapView 开始缩小默认地图，但仅在刷新时放大

> ID：13813846
> 
> 赞同：0
> 
> 时间：2012-12-11T04:51:37.797
> 
> 标签：ios, xcode, ios6, mkmapview, xcode4.5

每次我启动应用程序时，第一次看到地图都会生成一个默认地图，该地图总是缩小而没有注释。当我返回导航控制器并返回地图时，它现在会显示带有相应引脚的正确区域。我用来添加的代码

```
- (void) zoomIn {
    mapView.showsUserLocation = YES;

    CLLocationCoordinate2D annotation;
    annotation.latitude = 47.640071;
    annotation.longitude = -122.129598;

    MKPointAnnotation *annoPoint = [[MKPointAnnotation alloc] init];
    annoPoint.coordinate = annotation;
    annoPoint.title = @"name";
    [mapView addAnnotation:annoPoint];

    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(annotation, 500, 500);

    [mapView setRegion:region animated:YES];
} 
```

我从 viewDidLoad 中调用了这段代码，但它只有在我从导航控制器返回主页并`UIViewController`再次输入后才能工作。

有谁知道问题是什么或以前见过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:00:51.860

```
- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
    // this delegate fonction is called when the userlocation is updated
    // try to move your code here
} 
```

你也有

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:29:27.473

向我们展示您的`viewDidLoad`函数，您可能调用`zoomIn`得太早了，可能在您的 MKMapView 初始化之前。

# java - 泛型类型转换？

> ID：13813847
> 
> 赞同：2
> 
> 时间：2012-12-11T04:51:46.493
> 
> 标签：java, generics, abstract-factory

在抽象工厂模式中，我使用的是泛型。我有扩展 Serializable 的 BaseEntity 接口，Employee 类实现了 BaseEntity。在抽象类中，我有这个 getJavaObj 方法

`getJavaObj()`是一个接受 a`Long empId`并返回 a的方法`Map<String, ? extends BaseEntity>`

```
public abstract Map<String, ? extends BaseEntity> getJavaObj(Long id); 
```

使用泛型我试图在它提供的主类中做到这一点；

```
Map<String, Employee> emp = getJavaObj(empId); 
```

它给出了这个错误类型安全：**Unchecked cast from `Map<String,capture#1-of ? extends BaseEntity>`to Map**

当我像这样进行类型转换时

```
Map<String, Employee> emp = (Map<String, Employee>)getJavaObj(empId); 
```

它给出了这个警告

> 类型安全：未经检查的`Map<String,capture#1-of ? extends Serializable>`转换为 Map 类型安全：未经检查的`Map<String,capture#1-of ? extends BaseEntity>`转换为 Map

**即使在类型转换之后，有没有办法避免类型转换或解决警告？**由于我返回的对象确实通过 BaseEntity 接口扩展到 Serializable 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:59:16.700

重新定义您的工厂方法：

```
public abstract <T extends BaseEntity> Map<String, T> getJavaObj(Long id); 
```

然后你可以在没有强制转换的情况下获得正确的类型：

```
Map<String, Employee> emp = getJavaObj(empId); 
```

# flash-builder - 如何在 flashbuilder 中启用设计模式

> ID：13813848
> 
> 赞同：6
> 
> 时间：2012-12-11T04:51:54.513
> 
> 标签：flash-builder, designmode

我正在尝试在我的试用版 flashbuilder 上启用设计模式，但找不到这样做的任何选项，

我已经检查了 Windows 菜单，但没有启用设计模式，而 Preferences 但首选项对话框中没有 Flex 来启用其设计模式。

![在此处输入图像描述](../Images/eece8e21a1847390da9acf77235e5c9b.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T09:56:48.157

高于 4.6 的 Flash builder 版本不再支持设计模式。

这就是原因：

“Flash Builder 设计视图是作为 SWF 构建的，它是使用过去 Flash Builder 发布时最新的 Flex SDK 编译的。由于 Flex 框架现在捐赠给 Apache 基金会，因此发布周期（和Apache Flex SDK 的配置）与 Flash Builder 的计划不一致。此外，Apache Flex SDK 的用户可以自由地更改框架（就像在任何真正的开源产品中一样）。

因此，我们没有可靠的方法将设计视图保留在产品中，以便它可以与新的 Apache Flex SDK 一起使用（它可能会起作用，但我们不能保证）。

结果，就像 Ajay 上面提到的那样，我们不得不做出艰难的决定，将 DV 从运输产品中删除。”

在 adobe 社区论坛上查看此链接： [http ://forums.adobe.com/thread/1056583](http://forums.adobe.com/thread/1056583)

干杯

# javascript - Gmail/链接式联系人输入

> ID：13813850
> 
> 赞同：1
> 
> 时间：2012-12-11T04:52:04.653
> 
> 标签：javascript, jquery, jsfiddle

我们如何在 IE 上处理 content-editable="true" 元素内的 content-editable="false" 元素？

我想要做的是在内容可编辑的 div 中插入一个跨度。它在 Chrome 上运行良好，如果您在 content-editable="false" 的跨度上退格，则整个跨度都会被删除。

在 IE 上，这显示出非常奇怪的行为！

有什么输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:42:51.317

我为这类事情找到了一个非常好的库。

它是基于 jQuery 的，所以它非常完美！！

[http://tagedit.webwork-albrecht.de/](http://tagedit.webwork-albrecht.de/)

另外，在这里链接到更多研究： [jQuery autocomplete tagging plugin like StackOverflow's input tags?](https://stackoverflow.com/questions/519107/jquery-autocomplete-tagging-plug-in-like-stackoverflows-input-tags)

# c# - 将值作为参数绑定到 javascript 方法

> ID：13813855
> 
> 赞同：3
> 
> 时间：2012-12-11T04:52:37.367
> 
> 标签：c#, javascript, asp.net, repeater

我在使用 Eval() 绑定 javascript 方法调用时遇到错误。以下是转发器控件中的代码行：

```
<asp:Button ID="View" runat="server" Text="View" CommandName="View" OnClientClick="OpenInNewWindow(<%# Eval("JobID")%>)">
                        </asp:Button> 
```

我需要获取该 javascript 方法的值 jobId。谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:13:42.603

我猜你在 JobID 周围缺少引号。

尝试：

```
<asp:Button ID="View" runat="server" Text="View" CommandName="View" OnClientClick="OpenInNewWindow('<%# Eval("JobID")%>')">
</asp:Button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:59:40.047

试试这个：

```
<asp:Button ID="AddCartButton" runat="server" Text="Add To Cart" onClick="AddCartButton_Click" 
     OnClientClick='<%# Eval("JobID", "OpenInNewWindow(\"{0}\").ToString()") %>'/> 
```

每个单引号都会使标记解析器迷失方向。除了这个之外，表达式的计算方式与常规 C# 表达式几乎相同

更正了语法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T05:02:15.577

在代码后面设置`OnClientClick`属性或在代码后面添加行`page.DataBind()`。当页面被绑定时，它将评估`JobID`并将值添加到发送给客户端的页面中。

如果您需要更多信息，您可以查看[ASP.NET 数据绑定概述](http://support.microsoft.com/kb/307860)或其他论坛上的[此](http://bytes.com/topic/asp-net/answers/299439-what-page-databind-doing-what-useful)帖子。我通常避免页面绑定，而是在后面的代码中设置属性。虽然页面绑定非常有用，但我发现它的可预测性较差（他们是否在页面加载时调用了绑定？在按钮事件中？）而且有时很复杂（一个变量需要在页面加载时绑定，而另一个变量需要在页面加载之后绑定）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T05:14:34.587

```
<asp:Button ID="View" runat="server" Text="View" CommandName="View" OnClientClick="window.open('yourpage.aspx?JobID=<# Eval("JobID")','','width=200,height=100')">
</asp:Button> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T05:52:16.407

不要以声明方式绑定 javascript 函数。通过捕获相应网格的 itemdatabound 事件在代码中执行此操作。在此事件中，首先获取对按钮的引用，然后将绑定 javascript 函数定义为：

```
 int JobID = DataBinder.Eval(e.Row.DataItem, "JobID").ToString();
    Btn.Attributes.Add("OnClientClick","javascript:OpenInNewWindow(" + JobID + ")"); 
```

希望有帮助...

# apache2 - 在 Centos 6.2 (64bit) 上编译 Apache 2.4.3

> ID：13813856
> 
> 赞同：0
> 
> 时间：2012-12-11T04:52:50.053
> 
> 标签：apache2, centos

我尝试在 Centos 6.2（64 位）上使用 apr-1.4.6 和 apr-util-1.5.1 编译 Apache 2.4.3。

> ./configure --build=x86_64-unknown-linux-gnu --host=x86_64-unknown-linux-gnu --target=x86_64-redhat-linux-gnu --program-prefix= --prefix=/usr -- exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --sysconfdir=/etc --datadir=/usr/share --includedir=/usr/include --libdir=/usr /lib64 --libexecdir=/usr/libexec --localstatedir=/var --sharedstatedir=/var/lib --mandir=/usr/share/man --infodir=/usr/share/info --cache-file= ../config.cache --with-libdir=lib64 --with-config-file-path=/etc --with-config-file-scan-dir=/etc/php.d --disable-debug --with-pic --disable-rpath --without-pear --with-bz2 --with-exec-dir=/usr/bin --with-freetype-dir=/usr -- with-png-dir=/usr --with-xpm-dir=/usr --enable-gd-native-ttf --with-t1lib=/usr --without-gdbm --with-gettext --with-gmp --with-iconv --with-jpeg-dir=/usr --with-openssl --with-zlib --with-layout=GNU --enable-exif --enable-ftp --enable-magic-quotes - -enable-sockets --with-kerberos --enable-ucd-snmp-hack --enable-shmop --enable-calendar --with-libxml-dir=/usr --enable-xml --with-system-tzdata --with-mhash --with-apxs2=/usr/sbin/apxs --libdir=/usr/lib64/php --enable-pdo=shared --with-mysql=shared,/usr --with-mysqli=共享，/usr/lib64/mysql/mysql_config --with-pdo-mysql=shared,/usr/lib64/mysql/mysql_config --without-pdo-sqlite --without-gd --disable-dom --disable-dba --without-unixODBC --disable-xmlreader --disable-xmlwriter --without-sqlite3 --disable-phar --disable-fileinfo --disable-json --without-pspell --disable-wddx --without-curl --disable-posix --disable-sysvmsg --disable-sysvshm --disable-sysvsem ./configure --with-included-apr --with-included-apr-util

当我发出这种情况时：

/root/httpd-2.4.3/srclib/apr/libtool：第 5989 行：cd：yes/lib：没有这样的文件或目录 libtool：链接：无法确定`yes/lib' make[3]: *** [libaprutil-1.la] Error 1 make[3]: Leaving directory`/root/httpd-2.4.3/srclib/的绝对目录名称apr-util' make[2]: *** [all-recursive] 错误 1 ​​make[2]: 离开目录`/root/httpd-2.4.3/srclib/apr-util' make[1]: *** [all-recursive] Error 1 make[1]: Leaving directory`/root/httpd-2.4.3/srclib' make: *** [all-recursive] 错误 1

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:02:14.063

请执行以下操作：

```
# Build and install apr 1.2
 cd srclib/apr
 ./configure --prefix=/usr/local/apr-httpd/
 make
 make install

 # Build and install apr-util 1.2
 cd ../apr-util
 ./configure --prefix=/usr/local/apr-util-httpd/ --with-apr=/usr/local/apr-httpd/
 make
 make install

 # Configure httpd
 cd ../../
 ./configure --with-apr=/usr/local/apr-httpd/ --with-apr-util=/usr/local/apr-util-httpd/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T02:15:04.407

以上使我能够安装 apache 2.4.3。对我来说不幸的是，也许你也是，我在执行 apachectl -k start 时看到了这一点：

httpd：/home/netman1/sp/usr/local/apache/conf/httpd.conf 第 141 行的语法错误：无法将模块/mod_dir.so 加载到服务器：home/netman1/sp/usr/local/apache/modules /mod_dir.so：未定义符号：apr_array_clear

我这样做了，发现一个指向旧版本 libapr-1.so 的旧链接。

ldd httpd | grep apr libaprutil-1.so.0 => /home/netman1/usr/local/apache/apr/lib/libaprutil-1.so.0 (0x00002aba9dccb000) libapr-1.so.0 => /usr/lib64/ libapr-1.so.0 (0x00002aba9defd000)

为了解决这个问题，我保存了旧链接，然后创建了一个指向正确版本的新链接：

```
fixed: libapr-1.so.0 -> /opt/app/p3smk1c1/usr/local/apache/apr/lib/libapr-1.so.0.4.6
broken: libapr-1.so.0 -> libapr-1.so.0.2.7 
```

现在，我可以启动 apache，至少它不会抱怨“未定义的符号：apr_array_clear”...希望这对您有所帮助。

# python - 从用户那里获取输入，然后根据他们所说的命名一个 .txt 和一个 .csv 文件

> ID：13813858
> 
> 赞同：4
> 
> 时间：2012-12-11T04:53:00.027
> 
> 标签：python, file, csv

所以我正在尝试制作一些提示用户输入关键字的东西，然后我的程序将接受该输入并返回推文，包括使用 twitter api 的推文。我还希望它能够根据他们输入的内容命名文件。假设他们输入“iphone”，我希望它制作一个 iphone.txt 和 iphone.csv 文件。这是我到目前为止所拥有的，但它似乎不起作用。

顺便说一句，'newFile' 行应该是一个 .txt 文件，而 'with open(query, 'rb') as input_file' 也应该是一个 .txt。另一个是.csv

```
try:
    query = sys.argv[1]
except IndexError:
    query = raw_input("Choose a keyword to find the last 100 tweets about: ")

newFile = open(query, 'w').write(txt.encode('utf8'))

with open(query, 'rb') as input_file:
    reader = csv.reader(input_file, delimiter='\n', quoting = csv.QUOTE_NONE)

    with open(query, 'wb') as output_file:
        writer = csv.writer(output_file)

        for row in reader:
            writer.writerow(row) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T04:59:27.950

快到了，但你的陈述应该是

`with open("%s.csv" %query, 'rb') as input_file`

和

`with open("%s.txt" %query, 'wb') as output_file`

`query`只保存值，即文件名，您需要在打开文件之前添加它的扩展名

# perl - 如何在 perl 中将文本文件转换为 JSON 数据？

> ID：13813863
> 
> 赞同：0
> 
> 时间：2012-12-11T04:53:37.420
> 
> 标签：perl

我在 perl 中有一个文件名。我想将此文件转换为 JSON 数据。在perl中可以吗？

```
sub conversion {
  my($p)=@_;
  my $f = $p->{file};
  open(FIN,"</pathtofile/$f");
  # now i want to convert this opened file into json 
  # something like encode_json(<FIN>);
  # is that possible?
} 
```

文件内容示例：

```
Header   Name Type  Altitude     Depth       
Waypoint 001  User  N12 58.441   E77 32.647                                 
Waypoint 002  User N13 00.503    E77 41.714 
Waypoint 003  User N13 00.856    E77 42.054 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T05:50:59.083

这就是我将如何去做。

```
#!/usr/bin/perl -Tw

use strict;
use warnings;
use JSON qw( to_json );

my $regex = qr{
    \A
        ( \w+ ) \s+          # Header
        ( \d+ ) \s+          # Name
        ( \w+ ) \s+          # Type
        ( \w+ \s+ \S+ ) \s+  # Altitude
        ( \w+ \s+ \S+ )      # Depth
    \z
}xms;

my @rows;
my @columns = split /\s+/, <DATA>;

while ( my $line = <DATA> ) {

    $line =~ s{(?: \A \s* | \s* \z)}{}xmsg;

    if ( $line =~ $regex ) {

        my %record;

        @record{@columns} = ( $1, $2, $3, $4, $5 );

        push @rows, \%record;
    }
    else {

        warn "malformed input: $line";
    }
}

print to_json( \@rows, { pretty => 1 } );

__DATA__
Header   Name Type  Altitude     Depth
Waypoint 001  User  N12 58.441   E77 32.647
Waypoint 002  User N13 00.503    E77 41.714
Waypoint 003  User N13 00.856    E77 42.054 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:32:42.013

您需要找到将文件转换为 perl 哈希的逻辑，然后使用 cpan 中的“JSON”模块将其转换为 json 文本。

检查以下代码：

```
#!/usr/bin/perl -w
use strict;
use JSON;

my $hash = { 
            Waypoint    => {
                            Name    => "001",
                            Type    => "User",
                            Altitude    => "58.441",
                            Depth   => "E77 32.647",
                        },
                };

my $json_text = encode_json $hash;
print $json_text."\n"; 
```

它的输出是：

```
{"Waypoint":{"Altitude":"58.441","Type":"User","Depth":"E77 32.647","Name":"001"}} 
```

由于这个问题是关于我们是否可以将 txt 文件（考虑到提供的示例）转换为 json，所以我留给您将示例文件转换为哈希。但是，从上面的代码中，将散列转换为 json 文本非常简单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T05:12:18.983

您可以使用 CPAN 中的 JSON 模块从散列创建 JSON。您可以定义要 JSONify 的结构。

# php - 在 Magento 中列出产品类别的制造商？

> ID：13813870
> 
> 赞同：0
> 
> 时间：2012-12-11T04:54:04.323
> 
> 标签：php, sql, magento, attributes, categories

我正在尝试列出（带有链接）具有特定类别产品的所有制造商。这有效：

```
 $category           = 56;
            $layer = Mage::getModel("catalog/layer");
            $layer->setCurrentCategory($category);
            $attributes = $layer->getFilterableAttributes();
            $manufacturers = array();
            foreach ($attributes as $attribute) {
                if ($attribute->getAttributeCode() == 'manufacturer') {
                    $filterBlockName = 'catalog/layer_filter_attribute';
                    $result = Mage::app()->getLayout()->createBlock($filterBlockName)->setLayer($layer)->setAttributeModel($attribute)->init();
                    foreach($result->getItems() as $option) {
                        echo '<li><a href="'.$this->getUrl('').'bats.html?manufacturer=' .$option->getValue().'">'.$option->getLabel().'</a></li>';
                    }
                }
            } 
```

但是当我在制造商类别页面之一时，属性链接消失了。我假设是因为它使用了分层导航模型。

无论如何，是否可以在不使用分层导航模型的情况下获得特定类别的制造商列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:38:59.220

您好，我认为您创建了新的自定义模块并将 xml 标记从 catalog.xml 覆盖到您的布局 xml

> /app/design/frontend/base/default/layout/catalog.xml

使用左/右/内容等参考名称调用制造块

# ruby - 创建一个排除“小词”的 titleize 方法。

> ID：13813874
> 
> 赞同：2
> 
> 时间：2012-12-11T04:54:51.697
> 
> 标签：ruby

我正在制作一种将我的输入大写的方法，除了 a、an 和...等任何单词。

```
def titleize(string_to_titleize)
    string_to_titleize.split(' ').map { |words| words.capitalize }.join(' ')
end 
```

我知道有宝石可以做到这一点。我无法掌握如何手动完成。我假设创建一个不大写的单词列表。然后，将他们排除在外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T05:04:24.870

```
arr = ['a', 'an', 'the']
str ="This is a salil gaikwad working as an engineer"
str.gsub(/\w+/) {|match| arr.include?(match) ? match : match.capitalize} 
#Gives o/p :- This Is a Salil Gaikwad Working As an Engineer 
```

# c# - 选择当前元素 HtmlAgilityPack 旁边的元素

> ID：13813877
> 
> 赞同：1
> 
> 时间：2012-12-11T04:55:05.013
> 
> 标签：c#, html-agility-pack

我正在使用 HtmlAgilityPack 来解析 html 页面。我想选择一组标签 h3 然后循环遍历它，对于每个 h3 元素，我想选择它旁边的一个元素。这是我的示例 HTML：

```
<h3>Somthing here</h3>
<ul>list of something</ul>

<h3>Somthing here</h3>
<ul>list of something</ul>

<h3>Somthing here</h3>
<ul>list of something</ul>

<h3>Somthing here</h3>
<ul>list of something</ul>

<h3>Somthing here</h3>
<ul>list of something</ul> 
```

我知道如何选择 h3 的集合，但我不知道如何选择每个旁边的 ul

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:09:24.750

如果当前节点是`h3`，使用这个 XPath：

```
following-sibling::ul[1] 
```

它选择第一个^(兄弟) `ul`姐妹。

# java - 使用 Apache Cayenne 批量插入数据库表

> ID：13813878
> 
> 赞同：2
> 
> 时间：2012-12-11T04:55:11.820
> 
> 标签：java, mysql, database, orm, apache-cayenne

有没有办法使用 Apache Cayenne 对数据库表执行批量插入。在某些情况下，我需要执行批量插入。我不确定我们如何在 Cayenne 中做到这一点。

非常感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:14:34.863

有两种方法 - [EJBQLQuery](http://cayenne.apache.org/docs/3.0/ejbqlquery.html)和[SQLTemplate](http://cayenne.apache.org/docs/3.0/sqltemplate-basics.html)。如果您可以在对象模型中表达您的查询，则可以使用 EJBQLQuery。例如：

```
UPDATE Publisher pub SET pub.status = 'outstanding' WHERE pub.revenue < 1000000 
```

否则使用 SQLTemplate。它甚至允许批量处理多个参数集（参见“setParameters”）。

# c# - 以编程方式定义 XAML 架构

> ID：13813884
> 
> 赞同：0
> 
> 时间：2012-12-11T04:55:57.377
> 
> 标签：c#, xaml

上下文：Visual Studio 2012，C# 4.0

我想允许开发人员在 XAML 文件中编写一些代码。但是，我应该能够限制他们使用的模式（不确定这是否是正确的词），以便对于每个属性，值会自动在 Intellisense 中弹出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:39:04.820

这可以解决如下：

有一个类如下：

```
using MyNamespace
{
public class MyClass
{...}
} 
```

然后，在 xaml 文件中：

```
<MyClass xmlns="clr-namespace:MyNamespace;assembly={assembly name in which this namespace exists"></MyClass> 
```

# mysql - Sequelize 验证错误被忽略

> ID：13813885
> 
> 赞同：1
> 
> 时间：2012-12-11T04:55:58.983
> 
> 标签：mysql, node.js, sequelize.js

我有一个定义如下的模型：

```
 var userTableConfig = {
    username: {
      type: Sequelize.STRING,
      allowNull: false,
      unique: true,
      validate: {
        len: [5, 30],
        is: ['[a-z0-9_]', 'i']
      }
    },
    email: {
      type: Sequelize.STRING,
      allowNull: false,
      unique: true,
      validate: {
        isEmail: true,
        len: [5, 30]
      }
    },
    ............. // Other fields
}

var userConfig =  userConfig = {
    underscored: true,
    instanceMethods: {
        ..............
    }
}

var User = seq.define('User', userTableConfig, userConfig); 
```

现在当我使用这个模型如下：

```
 u = User.build();
    u.username = this.param('username');    // Contains empty string
    u.setPassword(this.param('password'));  // Contains empty string
    u.email = this.param('email');
    u.activation_state = 'pending';

    if (u.validate()) {
      console.log("Validation succeeded");
    } else {
      console.log("Validation failed");
      console.log(u.errors);
      .............
    } 
```

尽管没有满足长度限制，但验证器很高兴地成功了，我`Validation succeeded`在控制台中看到了。

更进一步，我还可以推送不应该由正则表达式约束验证的任意随机字符，并且验证器也很乐意接受它们。

因此，我决定检查验证器是否正在运行，并尝试使用自定义验证器进行检查：

```
 userTableConfig = {
    username: {
      type: Sequelize.STRING,
      allowNull: false,
      unique: true,
      validate: {
        randomValidator: function() {
          console.log("===========> validator executed");
          throw new Error('Hell with validation');
          return false;
        },
        len: [5, 30],
        is: ['[a-z0-9_]', 'i']
      }
    },
    ......
  } 
```

具有讽刺意味的是，方法 randomValidator 确实被执行了，而 validate 方法却成功了，没有抛出任何错误或返回 false。

我做错了什么，应该如何纠正上述问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T05:08:29.810

我弄清楚了问题所在：

validate 方法不返回指示验证是否成功的布尔值。相反，它返回一个匹配字段的哈希数组到抛出的错误数组。

因此，不要将真值检查为：

```
 if (u.validate()) {
      console.log("Validation succeeded");
    } else {
      console.log("Validation failed");
      console.log(u.errors);
      .............
    } 
```

我应该检查 u.validate() 返回的数组的长度。

除此之外，与 Sequelize （尤其是如果您来自 Rails）相当违反直觉的是 save 不执行隐式验证。

# iphone - 当我进入 iphone 邮件表时，Iphone 应用程序崩溃

> ID：13813890
> 
> 赞同：0
> 
> 时间：2012-12-11T04:56:31.353
> 
> 标签：iphone, objective-c, ios, xcode, mfmailcomposer

在我的 iPhone 应用程序中。我正在使用`MFMailComposeViewController`. 现在，当我第二次进入邮件表时，我的应用程序崩溃了。我在谷歌搜索。但我找不到解决方案。任何人都可以帮助我解决我的问题。请查看下面的代码并帮助我我在哪里做错了。

```
if ([MFMailComposeViewController canSendMail])
        {
            controller = [[MFMailComposeViewController alloc] init];
            controller.mailComposeDelegate = self;
            [controller setSubject:@""];
            [controller setToRecipients:array1];
            [controller setMessageBody:@"" isHTML:NO];
            [controller setMailComposeDelegate: self];
            [controller setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
            [self.navigationController presentModalViewController:controller animated:NO];
            [controller release];
        }

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{
    if(result == MFMailComposeResultSent)
    {
        [[self parentViewController] dismissModalViewControllerAnimated:YES];
    }
    else if (result == MFMailComposeResultCancelled)
    {
        [[self parentViewController] dismissModalViewControllerAnimated:YES];
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:27:21.783

在您打开邮件视图的方法中，用下面的代码替换您的代码。告诉我它是否有效！！！！！！编码快乐！！！！

```
 MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];

if ([MFMailComposeViewController canSendMail] == NO) {
        return;
}
else
{
    picker.mailComposeDelegate = self;
    NSString *stringtitle=[NSString stringWithFormat:@"Apple"];
    [picker setSubject:stringtitle];

    NSData *imgDataLoop = UIImagePNGRepresentation(shaereImage.image);

    [picker addAttachmentData:imgDataLoop mimeType:@"image/png" fileName:@"rainy"];

    [self presentViewController:picker animated:YES completion:nil];
    [picker release];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:56:09.910

```
-(void)mail
{ 
  if ([MFMailComposeViewController canSendMail])
    {

    MFMailComposeViewController *mailController = [[MFMailComposeViewController alloc] init];
    mailController.mailComposeDelegate = self;

    [mailController setSubject:@"your Subject"];
    [mailController setMessageBody:@"your message" isHTML:NO];

    UIImage *tmp = [UIImage imageNamed:@"Icon.png"];
    NSData *myData = UIImageJPEGRepresentation(tmp, 1.0);

    [mailController addAttachmentData:myData mimeType:@"image/png" fileName:@"MyPhoto.png"];
    if (arrTo)
        [mailController setToRecipients:arrTo];

    [self presentModalViewController:mailController animated:YES];
    return YES;
}
else {
    return NO;
}
}
}
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{   

    [controller dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:19:31.560

Change your methods to,

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    switch (result)
    {
        case MFMailComposeResultCancelled:
            NSLog(@"canceled");
            break;
        case MFMailComposeResultSaved:
            NSLog(@"saved");
            break;
        case MFMailComposeResultSent:
            NSLog(@"sent");
            [self showErrorMessage: @"Email sent successfully"];
            break;
        case MFMailComposeResultFailed:
            NSLog(@"failed");
            [self showErrorMessage: @"Failed to send email"];
            break;
        default:
            NSLog(@"not sent");
            break;
    }
    [self dismissViewControllerAnimated:YES completion:nil];

}

-(void)showErrorMessage:(NSString *)iMessage
{
        NSLog(@"%@", iMessage);
} 
```

As I mentioned earlier, your method signature was different while calling and in the definition part. It should be the same at both places as shown above.

While calling the method was `[self showErrorMessage: @"Failed to send email"];` but in definition you were not accepting the string part. You need to have an input param for the same. You can also do the same by calling it as `[self showErrorMessage];` and then keep the `showErrorMessage` method as it is.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T04:58:46.257

我认为这段代码会导致问题：

```
[[self parentViewController] dismissModalViewControllerAnimated:YES]; 
```

而不是上述使用：

```
[self dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T05:07:35.517

尝试编写此委托方法，而不是编写相同的方法

让我知道它是否有效！！！！

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
switch (result)
{
    case MFMailComposeResultCancelled:
        NSLog(@"canceled");
        break;
    case MFMailComposeResultSaved:
        NSLog(@"saved");
        break;
    case MFMailComposeResultSent:
        NSLog(@"sent");
        [self showErrorMessage: @"Email sent successfully"];
        break;
    case MFMailComposeResultFailed:
        NSLog(@"failed");
        [self showErrorMessage: @"Failed to send email"];
        break;
    default:
        NSLog(@"not sent");
        break;
}
[self dismissViewControllerAnimated:YES completion:nil];

} 
```

编码快乐！！！！！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T05:11:02.973

替换此代码：

```
[self.navigationController presentModalViewController:controller animated:NO]; 
```

和：

```
[self presentViewController:controller animated:YES completion:nil]; 
```

# c++ - 错误使用 Ubuntu上的头文件

> ID：13813894
> 
> 赞同：0
> 
> 时间：2012-12-11T04:57:10.357
> 
> 标签：c++, ubuntu, stl

我正在尝试在我的项目中使用[boolinq](http://code.google.com/p/boolinq/)代码并且它失败了，因为它使用了我的系统上不存在的分配器头文件。我正在使用 Ubuntu，所有其他 STL 类型都在工作。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:48:32.980

C++ 标准中没有这样的头文件。老实说，我不知道他们从哪里得到它，因为我的 Visual Studio（诚然他们使用的是较新版本）也没有它。

包含 out 的注释，您应该会看到它错过了什么符号。`std::allocator`在`<memory>`. 如果它需要其他任何东西，您必须找到（可能替换）它或禁用它。

# java - 如何使用maven避免类冲突

> ID：13813902
> 
> 赞同：4
> 
> 时间：2012-12-11T04:58:15.833
> 
> 标签：java, dependencies, maven-3, conflict, maven-shade-plugin

我用maven-shade-plugin建了一个项目，但是遇到了一个我处理不了的问题。有两个jar几乎有相同的类并且路径相同，aspectjweaver.jar和aspectjrt.jar，当打包jar，我得到警告“重复的类已经存在于......”。我尝试使用“重定位”属性来重定位类，但问题是，如何重新识别两个 jar 中的类？接下来是我的 Pom.xml 的一部分。org.apache.maven.plugins maven-shade-plugin 1.3.1

```
 <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                    <configuration>

                        <filters>
                            <filter>
                                <artifact>org.aspectj:aspectjrt</artifact>
                                <includes>
                                    <include>*</include>
                                </includes>
                            </filter>
                        </filters>
                        <relocations>
                            <relocation>
                                <pattern>org.aspectj</pattern>
                                <shadedPattern>hide.org.aspectj</shadedPattern>
                            </relocation>
                        </relocations>
                        <transformers>
                            <transformer
                                implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                <mainClass>cm.data.DatBoostrap</mainClass>
                            </transformer>
                            <transformer
                                implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                                <resource>META-INF/spring.handlers</resource>
                            </transformer>
                            <transformer
                                implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                                <resource>META-INF/spring.schemas</resource>
                            </transformer>
                        </transformers>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T20:05:34.287

您应该使用以下方法从其中一个工件中排除类：

```
<configuration>
 <filters>
  <filter>
   <artifact>junit:junit</artifact>
   <includes>
    <include>junit/framework/**</include>
    <include>org/junit/**</include>
   </includes>
   <excludes>
    <exclude>org/junit/experimental/**</exclude>
    <exclude>org/junit/runners/**</exclude>
   </excludes>
  </filter>
  <filter>
   <artifact>*:*</artifact>
   <excludes>
    <exclude>META-INF/*.SF</exclude>
    <exclude>META-INF/*.DSA</exclude>
    <exclude>META-INF/*.RSA</exclude>
   </excludes>
  </filter>
 </filters>
</configuration> 
```

# javascript - 显示特定的 div，直到内容加载到 Phonegap Web 服务中的另一个 div

> ID：13813916
> 
> 赞同：0
> 
> 时间：2012-12-11T05:00:03.353
> 
> 标签：javascript, jquery, cordova

我在 Phonegap 做一个网络服务。当用户搜索特定关键字时，应用程序从远程服务器上的 XML 文件中获取值，并将内容加载到我的应用程序中的 div 中。我的问题是我想显示一个 toast 消息，如“正在加载...”或“正在进行...”，直到内容加载到 div 中。我创建了一个 toast 消息。但是我不知道如何在内容加载后隐藏 toast 消息，因为从 XML 文件中获取值的时间对于不同的关键字是不同的。

加载内容的 div 是`<ul class="searchresults"></ul>`，这是我的 toast 函数：

```
function toast(sMessage){
  var container = $(document.createElement("div"));
  container.addClass("loading");
  var message = $(document.createElement("div"));
  message.addClass("message");
  message.text(sMessage);
  message.appendTo(container);
  container.appendTo(document.body);
  container.delay(150).fadeIn("slow", function() {
    if ($(".searchresults").html().length > 0) {
      $(this).delay(500).fadeOut("slow", function() {
        $(this).remove();
      });
    }
  });
} 
```

谁能给我一些想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:09:51.380

创建一个 JavaScript 计时器来测试您的 div 的内容，并在发现其中的内容时隐藏消息...

```
var myVar=setInterval(function(){myTimer()},1000);

function myTimer()
{
// test for content, hide message
} 
```

# vb.net - VB.NET LINQ 连接不同的 2 个表

> ID：13813917
> 
> 赞同：0
> 
> 时间：2012-12-11T05:00:05.183
> 
> 标签：vb.net, linq, join, distinct, union

我有 2 个数据表，它们具有相同的列但具有不同的数据，有时有些行共享相同的 ID

我想将那些加入到 table2 中某些行的 ID 在 table1 中不存在的表中

```
so if i the following tables
ID Name
1  A
2  B
3  C

ID Name
5  D
1  A
2  B
3  C

the from joining would be

ID Name
1  A
2  B
3  C
5  D 
```

这是我尝试过的

```
 Dim q = From e In tbl1.AsEnumerable Join r In tbl2.AsEnumerable On e.Field(Of Integer)("id") Equals r.Field(Of Integer)("id") 
```

但不知道如何将其保存到数据表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:04:28.820

LINQ 在使用方面并不是那么好，`DataTable`但您可以执行以下操作：

```
Dim diff = tbl2.AsEnumerable().Except(tbl1.AsEnumerable(), New DataRowComparer())

Dim tbl = tbl1.Copy()
For Each dataRow As DataRow In diff
    tbl.ImportRow(dataRow)
Next 
```

您需要创建一个`IEqualityComparer`来定义如何比较`DataRow`s。我决定只比较它们的`Id`值，但您可以以类似的方式比较每一列：

```
Public Class DataRowComparer
    Implements IEqualityComparer(Of DataRow)

    Public Function Equals(ByVal x As DataRow, ByVal y As DataRow) As Boolean Implements IEqualityComparer(Of DataRow).Equals
        Return CInt(x("Id")) = CInt(y("Id"))
    End Function

    Public Function GetHashCode(ByVal obj As DataRow) As Integer Implements IEqualityComparer(Of DataRow).GetHashCode
        Return CInt(obj("Id")).GetHashCode()
    End Function
End Class 
```

# jquery-ui - jQuery - 卡住动画

> ID：13813918
> 
> 赞同：0
> 
> 时间：2012-12-11T05:00:05.547
> 
> 标签：jquery-ui, animation

我有点厌倦了用于动画的 Javascript 长脚本并决定尝试 jQuery，但似乎我什至被最简单的代码困住了。

* * *

CSS：

```
#menu {float: right; font: italic 16px/16px Verdana, Geneva, sans-serif;}
  ul#nav {list-style: none;}
  ul#nav li {float: left; padding-right: 10px;}
  ul#nav li a {color: white;}
  ul#subnav {float: right; list-style: none; padding: 0; display: none;}
  ul#subnav li {float: left; padding: 10px 5px; white-space: nowrap;}
  ul#subnav li a {color: white;} 
```

脚本：

```
$(document).ready(function() { 
  $('.nav').hover(function() {
    $(this).find('#subnav').stop().animate({width:'toggle'},350);
  });
}); 
```

HTML：

```
<div id="menu">
  <ul id="nav">
    <li class="nav">
      <a href="#"><img src="images/icon-home.png" width="36" height="36"/></a>
      <ul id="subnav">
        <li><a href="#">Home</a></li>
      </ul>
    </li>
    <li class="nav">
      <a href="#"><img src="images/icon-signin.png" width="36" height="36"/></a>
      <ul id="subnav">
        <li><a href="#">Sign In</a></li>
      </ul>
    </li>
    <li class="nav">
      <a href="#"><img src="images/icon-register.png" width="36" height="36"/></a>
      <ul id="subnav">
        <li><a href="#">Create Account</a></li>
      </ul>
    </li>
    <li class="nav" style="padding-right: 0;">
      <a href="#"><img src="images/icon-mail.png" width="36" height="36"/></a>
      <ul id="subnav">
        <li style="padding-right: 0;"><a href="#">Contact Us</a></li>
      </ul>
    </li>
  </ul>
</div> 
```

* * *

这是示例页面：http: [//v1n-vampire.com/dev/jq-animation-stuck](http://v1n-vampire.com/dev/jq-animation-stuck)

如果您继续从左到右然后再从左到左悬停在导航上，最终动画将卡住。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:33:48.117

`toggle`似乎失去了目标宽度；当您停止滑出动画时，临时`width`停留并由滑入动画保留。

这似乎是旧版本 jQuery 的行为，并且似乎已从 1.7.1（您的版本）更改为 1.7.2（jsfiddle 上可用的下一个版本）

如果您无法升级，删除`stop()`应该可以解决此问题。更好的解决方案是在运行切换之前手动清除`width`样式：

```
$(this).find('#subnav').stop().css({width:""}).animate({width:'toggle'},350); 
```

演示（1.6.4，没有变化，休息）：http: [//jsfiddle.net/rYnTQ/](http://jsfiddle.net/rYnTQ/)

演示（1.7.2，没有变化，有效）：http: [//jsfiddle.net/rYnTQ/1/](http://jsfiddle.net/rYnTQ/1/)

演示（1.6.4，重置修复）：http: [//jsfiddle.net/rYnTQ/2/](http://jsfiddle.net/rYnTQ/2/)

* * *

另外，请不要使用重复的 ID（相应地更改`id="subnav"`并`class="subnav"`更改选择器）。它打破了许多框架的规范和期望。在 jQuery 中，如果它看到一个 ID 选择器，`$(selector)`将使用`getElementById`=> 总是最多返回一个元素。

# php - 使用循环将对象持久化到数据库

> ID：13813923
> 
> 赞同：0
> 
> 时间：2012-12-11T05:00:51.967
> 
> 标签：php, symfony

我有一个返回多个值的表单，每个值我想存储在数据库中，

我为此目的创建了一个测试表

```
<form method="post" action="{{ path('submit_exercise', {'page': 1}) }}">
    <input type="hidden" name="answers[]" value="Answer 1" "/>
    <input type="hidden" name="answers[]" value="Answer 2" "/>
    <input type="hidden" name="answers[]" value="Answer 3" "/>
    <input type="hidden" name="answers[]" value="Answer 4" "/>
    <input type="hidden" name="answers[]" value="Answer 5" "/>
    <input type="hidden" name="answers[]" value="Answer 6" "/>
    <input type="hidden" name="answers[]" value="Answer 7" "/>
    <input type="submit" name="submit" />
</form>
</body>
</html> 
```

我的提交答案 Action 目前是这样写的。

```
public function submitAnswersAction($page)
{
    //get submitted data
    $data = $this->get('request')->request->all();
    $answers = $data['answers'];

    //get student ID
    $user = $this->get('security.context')->getToken()->getUser();
    $studentID = $user->getId();

    //Get Current time
    $currentTime = new \DateTime(date("Y-m-d H:m:s"));

    //var_dump($answers);
    //var_dump($studentID);
    //var_dump($currentTime);

    for($index = 0; $index < count($answers); $index++)
    {
        /*echo "Question ". ($index + 1) ."<br />";
        echo "Student ID: ". $studentID."<br />";
        echo "Page Number: $page <br />";
        echo "Answer: $answers[$index]"."<br />";
        echo "<br />";*/

        $studentAnswer = new StudentAnswer();
        $studentAnswer->setStudentID($studentID);
        $studentAnswer->setPageID($page);
        $studentAnswer->setQuestionID($index+1);
        $studentAnswer->setAnswer($answers[$index]);
        $studentAnswer->setDateCreated($currentTime);
        $studentAnswer->setReadStatus(0);

        $database = $this->getDoctrine()->getManager();
        $database->persist($studentAnswer);
        $database->flush();

    }

    return new Response('Answers saved for Student: '.$user->getFullName().' for page: '.$page); 
```

当我执行 var_dump 时，一切似乎都正确关联，这意味着 answers 数组填充了正确的数据，其他所有变量也是如此，我的问题实际上是将它保存到数据库中。运行时它返回此错误，在我看来它不知道要放入行中的变量。

```
An exception occurred while executing 'INSERT INTO Student_Answer (student_id, page_id, question_id, answer, read, date_created) VALUES (?, ?, ?, ?, ?, ?)' with params {"1":2,"2":"1","3":1,"4":"Answer 1","5":0,"6":"2012-12-11 12:12:20"}:

SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'read, date_created) VALUES (2, 1, 1, 'Answer 1', 0, '2012-12-11 15:12:51')' at line 1 
```

任何帮助都将不胜感激，因为这是一个个人项目，可帮助我尝试和了解更多 Web 开发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T05:27:31.147

不确定是什么问题。一些东西：

这在循环之前：

```
$database = $this->getDoctrine()->getManager(); 
```

它应该是 $em 或 $entityManager （因为这就是它的名称......）

应该在循环之后调用：

```
$database->flush(); 
```

您不需要使用 Doctrine2 处理保存在数据库中的 ID。所以不要这样做：

```
$studentAnswer->setStudentID($studentID); 
```

改为这样做：

```
$studentAnswer->setStudent($student); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:40:19.587

哇，好吧，所以这个问题根本与 Symfony 或 Doctrine 无关，

问题基本上是该`read`字段，我相信它是 SQL 中的一个关键字，因此它将它读作关键字而不是列字段名称。我不得不将其重命名为`is_read`

# r - install.packages 错误：解决本地 repo 使用问题

> ID：13813924
> 
> 赞同：7
> 
> 时间：2012-12-11T05:00:59.253
> 
> 标签：r

我刚刚创建了一个包 ( `RTIO`) 和一个包存储库 ( `Q:/Integrated Planning/R`)，这是一个公司网络驱动器。

我已将包裹放入文件夹：

`Q:/Integrated Planning/R/bin/windows/contrib/2.15/RTIO_0.1-2.zip`

根据 Dirk 在[此](https://stackoverflow.com/questions/2905650/creating-a-local-cran-repository)SO 中的说明，我运行了以下命令：

```
> setwd("Q:/Integrated Planning/R/bin/windows/contrib/2.15")
> tools::write_PACKAGES(".", type="win.binary")
> list.files()
[1] "PACKAGES"       "PACKAGES.gz"    "RTIO_0.1-2.zip"
> 
```

使用下面的代码，我已将本地存储库添加到我的存储库列表中（我会让其他用户也这样做）：

```
options(repos = c(getOption("repos"), RioTintoIronOre = "Q:/Integrated Planning/R")) 
```

现在尝试安装我的包我得到一个错误：

```
> install.packages("RTIO")
Installing package(s) into ‘C:/Program Files/R/R-2.15.1/library’
(as ‘lib’ is unspecified)
Warning in install.packages :
  unable to access index for repository Q:/Integrated Planning/R/bin/windows/contrib/2.15
Warning in install.packages :
  unable to access index for repository Q:/Integrated Planning/R/bin/windows/contrib/2.15
Warning in install.packages :
  unable to access index for repository Q:/Integrated Planning/R/bin/windows/contrib/2.15
Warning in install.packages :
  package ‘RTIO’ is not available (for R version 2.15.1) 
```

`unable to access index for repository`告诉我什么？我该如何解决？

我真正想做的是，在 Windows 下并使用 RStudio 作为 IDE，让其他内部 R 用户添加这个包 repo，以便他们能够运行类似的命令`install.packages("RTIO")`或`update.packages()` 获取包的新版本（并且可能还有能够使用 IDE 通过 GUI 管理包）。

* * *

## 更新：

感谢agstudy的回答，我更近了一步。这是我得到的输出。

```
> getOption("repos")
                                CRAN                            CRANextra 
    "http://cran.ms.unimelb.edu.au/" "http://www.stats.ox.ac.uk/pub/RWin" 
> setRepositories(addURLs=c(RioTintoIronOre = "file://Q:/Integrated Planning/R"))
--- Please select repositories for use in this session ---

1: + CRAN
2: + CRAN (extras)
3:   BioC software
4:   BioC annotation
5:   BioC experiment
6:   BioC extra
7:   Omegahat
8:   R-Forge
9:   rforge.net

Enter one or more numbers separated by spaces, or an empty line to cancel
1: 
> getOption("repos")
                  RioTintoIronOre 
"file://Q:/Integrated Planning/R" 
> install.packages("RTIO")
Installing package(s) into ‘C:/Program Files/R/R-2.15.1/library’
(as ‘lib’ is unspecified)
Warning in install.packages :
  cannot open compressed file '//Q:/Integrated Planning/R/bin/windows/contrib/2.15/PACKAGES', probable reason 'No such file or directory'
Error in install.packages : cannot open the connection 
```

## 跟进问题：

1.  为什么在使用时提示我选择存储库`setRepositories()`？

2.  当我在不输入数字的情况下点击“输入”并检查`getOption("repos")`它只显示`File://Q:/Integrated Planning/R`存储库。这是为什么？

3.  当我这样做`install.packges("RTIO")`时，它似乎找到了文件，但给出了警告`cannot open compressed file`和错误`cannot open the connection`。注意`list.files()`上面的输出。知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-18T07:25:42.587

为了避免此消息：

```
Warning in install.packages : cannot open compressed file '//Q:/Integrated Planning/R/bin/windows/contrib/2.15/PACKAGES', probable reason 'No such file or directory' 
```

`//`在指定 url 时 尝试删除`setRepositories`

```
> setwd("Q:/Integrated Planning/R/bin/windows/contrib/2.15")
> tools::write_PACKAGES(".", type="win.binary")
> setRepositories(addURLs=c(RioTintoIronOre = "file:Q:/Integrated Planning/R"))
> install.packages("RTIO") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T06:55:03.170

您收到警告`unable to access index for repository` 是因为`install.packages`尝试在远程存储库（非本地）中访问您的自定义包。

要解决此问题，您需要将本地存储库添加到您的 R-options `repos`。您需要将其添加为 url 路径而不是文件路径。类似文件：//

做这样的事情：

```
 setRepositories(addURLs=c(lRioTintoIronOre = "file://Q:/Integrated Planning/R")) 
```

要检查一切是否正确，以下必须返回 TRUE：

```
 repos <- contrib.url(getOption('repos'))
    length(grep("^file:", repos)) > 0L 
```

# java - 如何使用另一个类的组合来设置名称？

> ID：13813927
> 
> 赞同：0
> 
> 时间：2012-12-11T05:01:32.327
> 
> 标签：java, composition, superclass

我这里有一些代码。我正在尝试使用一个类来引用另一个类，这样我就可以获得该人的名字。我希望主类中的 firstName 能够工作，但 IDE 提到找不到该变量。将 'first' 替换为 'firstName' 有效吗？

主类：

```
public BasePlusCommissionEmployee( String first, String last, 
            String ssn, double sales, double rate, double salary) {

        cE = new CommissionEmployee( first, last, ssn, sales, rate );
        setBaseSalary( salary );
    }

public void setFirstName(String firstName) {
        // Trying to get this to work...
        cE.setFirstName(first);
    } 
```

子类：

```
private String firstName;
public void setFirstName( String first )
    {
        firstName = first;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:09:21.930

> 将 'first' 替换为 'firstName' 有效吗？

是的。

```
public void setFirstName(String firstName) {
    // Trying to get this to work...
    cE.setFirstName(first);
} 
```

`firstName`是此方法的局部变量，并且`first`未在其中定义具有名称的变量。

所以，如果你使用`first`，这将是编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:34:41.343

基本上，您希望根据声明的变量名的名称使用 setter 和 getter 方法。因此，在您的情况下，如果主类将“名字”称为“第一”，那么最好声明 setFirst(String first) 方法。如果您想将其声明为“firstName”，那么您希望将其设置为 setFirstName (String firstName)。此外，根据您在此处展示的代码，看起来主类会将 CommissionEmployee 的实例保存为“cE”，并且它是使用一些参数创建的，您需要在主类中使用 setter 方法。可能避免声明那些在子类。

# c++ - 递归：使用传入参数的值

> ID：13813930
> 
> 赞同：0
> 
> 时间：2012-12-11T05:02:07.040
> 
> 标签：c++, recursion

我得到了这行代码，它弹出数组的一个 int 将它保存到`int element`然后从数组中删除它。然后在 return 语句中将 `CountCriticalVotes(rest, blockIndex + element);`其添加到`blockIndex`变量中，如果它在数组为空之前达到 10，则返回 1。但我的问题是，我不希望它在参数中将数组中的所有值相加，但只添加一个，然后将参数值恢复为原始状态，然后添加一个新的，恢复等......我该怎么做？

```
int NumCriticalVotes :: CountCriticalVotes(Vector<int> & blocks, int blockIndex)
{
    if (blockIndex >= 10)
    {
        return 1;
    }
    if (blocks.isEmpty())
    {
        return 0;

    } else {

        int element = blocks.get(0);
        Vector<int> rest = blocks;
        rest.remove(0);
        return  CountCriticalVotes(rest, blockIndex + element); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:09:19.397

您可以修改代码以便计算关键投票，然后将元素推回到列表的前面。它看起来像这样：

```
blocks.remove(0);
int votes = CountCriticalVotes(blocks, blockIndex + element);
blocks.push_front(element);
return votes; 
```

这并不完全符合您的要求，因为它仅在初始函数调用完成后才恢复，但最终结果是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:23:28.160

当您进行递归调用时，您可以传递一个临时向量，该向量由索引 1 到结尾的所有元素组成。您的原始向量将保持不变。这确实会创建许多临时向量，但您的原始代码也是如此。这是基于您的示例的快速代码示例。

```
#include <iostream>
#include <vector>
using namespace std;

bool CountCriticalVotes(vector<int>& blocks, int sum = 0) {
    if (sum >= 10) {
        return true;
    } else if(blocks.empty()) {
        return false;
    } else {
        vector<int> temp(blocks.begin() + 1, blocks.end());
        return CountCriticalVotes(temp, sum + blocks.at(0));
    }
}

int main() {
    vector<int> foo = { 2, 3, 4, 5, 6};
    vector<int> bar = { 2, 3 };
    cout << boolalpha << CountCriticalVotes(foo) << endl;
    cout << boolalpha << CountCriticalVotes(bar) << endl;    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T05:26:46.833

递归执行（顺便说一句效率很低。没有理由这样做）：

```
bool NumCriticalVotes :: CountCriticalVotes(Vector<int> const& blocks,
                                            int blockIndex,
                                            size_t current = 0)
{
    // check if we reach the end of the vector
    if (current == block.size())
    {
        return true;
    }

    int sum = blockIndex+block.get(current);

    if (sum >= 10)
    {
        return true;
    }

    return  CountCriticalVotes(blocks, blockIndex, current+1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T05:06:23.120

也许我理解错了，但为什么不给这个函数添加另一个参数：当前位置的索引`blocks`。这样您就不必从向量中删除元素，也不需要临时向量等。

# tsql - 过去一个月内每天每家商店未售出的产品数量

> ID：13813931
> 
> 赞同：2
> 
> 时间：2012-12-11T05:02:08.027
> 
> 标签：tsql, data-warehouse

我最近遇到了一个面试问题。3 个维度表（产品、商店和日期）和 1 个事实表（销售）。该问题要求提供一个 T-SQL 解决方案，该解决方案将返回过去一个月内每家商店每天**未售出的产品数量。**

那艘船已经航行了……机会已经过去了，但从那以后我花了很多时间试图回到解决方案中，但无济于事，并且想关闭循环。非常感谢任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:46:28.100

通常使用覆盖表来回答“没有发生的事情”。这可能是一个“技巧”问题，看看您是否知道使用 Factless Fact 表进行负面分析。

该表将是一行/天/产品/商店，标识特定日期在特定商店中可用的所有产品。然后，您将使用该表并从销售事实中减去已售出的产品，以获得未售出的产品。

加入 product dim 不一定有意义，因为并非所有产品都可以在所有商店出售。这可能只是一个问题，看看您是否可以构建必要的 SQL，但我认为总的来说这是一个糟糕的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:28:00.537

试试这个：

1.  交叉连接产品、商店和日期，然后过滤过去一个月
2.  反连接 (1) 到事实表，预测剩余内容，并按存储和日期聚合。

任何更多的帮助，这可能对其他人不公平。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T00:50:08.590

查询中包含的日期

--表格

```
CREATE TABLE dimProduct(ProductID INT,ProductName VARCHAR(50))

CREATE TABLE dimStore(StoreID INT,StoreName VARCHAR(50))

CREATE TABLE dimDate(DateID INT,dimDate VARCHAR(50))

CREATE TABLE factSales(ProductID INT,StoreID INT,DateID INT) 
```

--=最终查询

```
SELECT StoreID,DateID,count(ProductID) AS CountOfProductsNotSold
FROM
(
SELECT StoreID,DateID,ProductID FROM dimProduct CROSS JOIN dimStore CROSS JOIN dimDate WHERE dimDate >= '01/01/2013'
EXCEPT
SELECT StoreID,d.DateID,ProductID FROM factSales s JOIN dimDate d ON s.DateID = d.DateID WHERE dimDate >= '01/01/2013'
)T
GROUP BY StoreID,DateID 
```

# api - 访问 Xbox 音乐 api

> ID：13813945
> 
> 赞同：2
> 
> 时间：2012-12-11T05:04:11.410
> 
> 标签：api, windows-phone-8, xbox

是否有任何 API 访问新的 XBOX 音乐商店？我听说 zune 商店有一个小而简单的商店，我想访问一个歌曲数据库：标题、艺术家、流派和用于处理音乐和购买的 windows 8 手机开发的预览。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T05:17:20.113

许多 Xbox 数据基于 JSON 或 OData 源。没有官方的 SDK/API 来获取此类信息，但是您可以通过使用 Fiddler 并拦截来自您设备上的 Xbox 音乐的请求并订阅相同的数据，轻松找到您需要的提要。这里有在 Windows Phone 上使用 Fiddler 的指南：www.fiddler2.com/phone/

很明显，Feed 发生变化并影响您的应用程序的风险很大 - 因此，如果您要执行此类操作，我建议您通过您自己的服务代理数据，以便在出现问题时快速进行和部署更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-19T19:52:48.677

有一个。它是 RESTful 并提供以下功能：

*   如果您知道其 ID，则获取专辑、艺术家或曲目的详细信息。
*   根据一串关键字搜索任何专辑、艺术家或曲目详细信息，例如“Madonna hang up”。
*   获取艺术家的热门曲目和最新专辑。
*   获取可以很好地重定向到任何平台上的 Xbox 音乐应用程序的深层链接。
*   获取专辑封面。
*   获取艺术家图像。

所有细节都[在这里](http://music.xbox.com/developer)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-05T03:08:39.233

虽然这可能无法直接回答您的问题，但有一个内置 API 可让您在 Xbox 音乐商店中*搜索内容。*

```
MarketplaceSearchTask task = new MarketplaceSearchTask();
task.ContentType = MarketplaceContentType.Music;
task.SearchTerms = term;
task.Show(); 
```

# php - 通过PHP测试值是否在MYSQL列中

> ID：13813952
> 
> 赞同：0
> 
> 时间：2012-12-11T05:04:52.313
> 
> 标签：php, mysql

所以我正在制作一个秘密的圣诞老人程序，当你点击按钮绘制它时

1.  检查画的人是否与画的人不匹配
2.  检查被抽中的人是否还没有被抽中
3.  检查绘制的人是否之前没有绘制过

我有 1 & 2 下来，但我不知道如何接近＃3。

基本思想是测试一个列（称为giftfirst），看是否有与绘制名称匹配的值，该表称为列表。

您需要的任何其他信息都可以继续询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:07:46.647

将 a`$_COOKIE`放在客户的机器上并检查它是否存在然后他有`already drawn before`.

# git - 将修正后的版本上传到 github

> ID：13813959
> 
> 赞同：0
> 
> 时间：2012-12-11T05:06:01.890
> 
> 标签：git, github

我花了相当多的时间下载以下代码。

[https://github.com/contextio/Python-ContextIO](https://github.com/contextio/Python-ContextIO)

我想在自述文件中添加以下行，以明确这不是最新版本。

```
This is compatible with older api 1.1 for the latest one use ContextIO2 repository. 
```

新手问题：

我如何做出改变并推动它？

楼主会接受这个改动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:19:51.787

您应该分叉存储库，对分叉的存储库进行更改，然后提交拉取请求。[这](https://help.github.com/articles/using-pull-requests)应该可以帮助你。

# php - 需要在 MySQL 查询中添加 PHP 对象

> ID：13813962
> 
> 赞同：1
> 
> 时间：2012-12-11T05:06:08.413
> 
> 标签：php, mysql

我需要一些帮助，将 PHP 代码添加到我的 MySQL 中。这是代码：

```
$query_qPosts = "SELECT * FROM front_news WHERE draft = 1 AND department_id = 1 OR     department_id = 0 ORDER BY id DESC"; 
```

在上面写着“department_id = 1”的地方，我需要将 1 替换为`<?php echo $id ?>`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T05:08:58.643

```
$query_qPosts = "SELECT * FROM front_news WHERE draft = 1 AND department_id = $id OR     department_id = $id ORDER BY id DESC"; 
```

在 php 中，您可以将变量封装在双引号内，它们将构成字符串的一部分。例如

```
$foo = 'foo';
$echo = "I am $foo";
----> I am foo 
```

至于单引号，您需要将它们连接起来。例如

```
$foo = 'foo';
$echo = 'I am ' . $foo;
----> I am foo 
```

至于你会使用哪一个，这取决于你使用它们的环境，通常这取决于个人喜好。单引号比双引号执行得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T05:15:21.467

如果你使用[`mysqli`](http://php.net/manual/en/book.mysqli.php)，它会使这个过程变得非常简单：

```
$db = new mysqli("localhost", "user", "password", "mydatabase");
$query_qPosts = $db->prepare("SELECT * FROM front_news WHERE draft = 1 AND department_id = ? OR department_id = 0 ORDER BY id DESC")
$id = 1;
$query_qPosts->bind_param("i",$id)
if (!$query_qPosts->execute()) {
    echo "There was an error (" . $query_qPosts->errno . ") " . $query_qPosts->error;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T05:11:36.780

在 SQL 查询中同时使用“AND”和“OR”时，必须用括号分组。否则结果不可预测或查询失败。

如果部门可以为 0 或 1，而草稿必须为 1，请执行以下操作：

```
"SELECT * FROM front_news WHERE draft = 1 AND (department_id = 1 OR department_id = 0) ORDER BY id DESC" 
```

或者如果草稿必须为 1 且部门必须为 1 或部门为 0，请尝试以下操作：

```
"SELECT * FROM front_news WHERE (draft = 1 AND department_id = 1) OR department_id = 0 ORDER BY id DESC" 
```

我不确定你想做什么。

您正在使用双引号，因此代码中的每个“$”都作为变量执行。为了确保发生这种情况，如果你想要“{$id}”，你可以用花括号括起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T05:14:10.687

```
$query_qPosts = "SELECT * FROM front_news WHERE draft = 1 AND department_id = 1 OR   department_id = ".$id." ORDER BY id DESC"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T05:15:56.600

尝试

```
"SELECT * 
 FROM front_news 
 WHERE draft = 1 
    AND department_id = ".<?php echo (int)$id?>." 
    OR  department_id = 0 
 ORDER BY id DESC"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T06:18:14.053

试试这个代码：

$query_qPosts = "SELECT * FROM front_news WHERE draft = 1 AND department_id = $id OR department_id = 0 ORDER BY id DESC";

请确保 $id 是数字而不是 null

# c# - 如何在控制台应用程序中读取 XML 文件

> ID：13813967
> 
> 赞同：-1
> 
> 时间：2012-12-11T05:06:24.947
> 
> 标签：c#, xml, visual-studio, console-application

我将给出一组我在 w3schools XML 示例中找到的简单 xml 行。

我想知道如何从我的控制台应用程序访问这些数据（我通过控制台应用程序项目插入了一个 app.config）

```
<?xml version="1.0" encoding="ISO-8859-1"?>
 <bookstore>
   <book category="cooking">
     <title lang="en">Everyday Italian</title>
     <author>Giada De Laurentiis</author>
     <year>2005</year>
     <price>30.00</price>
   </book>
   <book category="children">
     <title lang="en">Harry Potter</title>
     <author>J K. Rowling</author>
     <year>2005</year>
     <price>29.99</price>
   </book>
 </bookstore> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T05:24:42.750

我假设您只想读取 XML 数据。它看起来不像配置，所以我想你最好把它放在一个常规的 XML 文件中。

您可以像这样解析 XML：

```
var doc = new XmlDocument();
doc.Load(@"XmlFile.xml");

var root = doc.DocumentElement;
if (root == null)
    return;

var books = root.SelectNodes("book");
if(books == null)
    return;

foreach (XmlNode book in books)
{
    var title = book.SelectSingleNode("title");
    var auth = book.SelectSingleNode("author");
    //And so on
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T05:21:04.380

如果你想访问 App.Config 你可以`ConfigurationManager`这样使用：

```
string filetype = ConfigurationSettings.AppSettings [ "filetype" ] ; 
```

如果你想在 c# 中使用 XML 文件，你可以使用这个[链接](http://www.c-sharpcorner.com/UploadFile/mahesh/ReadWriteXMLTutMellli2111282005041517AM/ReadWriteXMLTutMellli21.aspx) 或者你可以使用[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

# ios - 不太了解 touchesBegan 和 touchesEnded

> ID：13813969
> 
> 赞同：0
> 
> 时间：2012-12-11T05:06:29.723
> 
> 标签：ios, touch

我查看了 Apple 的示例触摸应用程序，但它并没有解决我的问题。在他们的示例应用程序中，当触摸事件发生时，它会尝试将视图保持在发生触摸事件的位置。这使得逻辑很简单。他们只是寻找其框架包含触摸位置的视图。

这在我的场景中不起作用。这是我的场景。

有一个包含一堆子视图的视图。这个想法是允许用户在他们手势的方向上投掷其中一个子视图。我希望`touchesBegan`事件找到其中心最接近触摸的视图。

然后，我希望`touchesEnded`事件以由开始和结束事件确定的速度移动同一视图。速度不一定与手指速度相同，因此我不能像 Apple 在示例应用程序中所做的那样简单地将视图“附加”到触摸位置。

我想过用触摸对象标记标识的视图`touchesBegan`，并使用它与事件中的触摸对象进行比较`touchesEnded`，但这不起作用。`touchesBegan`和`touchesEnded`事件的触摸对象不同。

那么我错过了什么？如何保存要移动的视图和触摸之间的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:26:53.300

TouchObject 将不相似。对象会随着触摸的视图、位置等发生变化。请查看[UITouch 类](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITouch_Class/Reference/Reference.html)以获取详细信息。

**建议一：**

**我通过子类化 UIView**并在子类中添加触摸代理在我的项目中实现了同样的事情。我创建了这个子类的实例而不是普通的 UIView。

```
@interface myView : UIView
@end

@implementation myView

//over ride the following methods
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
}

 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
}

- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event
{
}

@end 
```

**建议二**

使用[UIPanGesture](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html)做同样的事情。这将是一种更简单的方法。

```
UIPanGestureRecognizer *panGesture = [[[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panGestureMoveAround:)] autorelease];
[panGesture setMaximumNumberOfTouches:2];
[panGesture setDelegate:self];
[yourSubView addGestureRecognizer:panGesture];

-(void)panGestureMoveAround:(UIPanGestureRecognizer *)gesture;
{
    UIView *piece = [gesture view];
    [self adjustAnchorPointForGestureRecognizer:gesture];

    if ([gesture state] == UIGestureRecognizerStateBegan || [gesture state] == UIGestureRecognizerStateChanged) {

        CGPoint translation = [gesture translationInView:[piece superview]];
        [piece setCenter:CGPointMake([piece center].x + translation.x, [piece center].y+translation.y*0.1)];
        [gesture setTranslation:CGPointZero inView:[piece superview]];
    }
} 
```

一个例子是[here](http://blog.shoguniphicus.com/2011/06/15/working-with-uigesturerecognizers-uipangesturerecognizer-uipinchgesturerecognizer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:46:32.657

这是我的解决方案。在此解决方案中，`scaledView`是箭头视图移动的视图。它们属于类`spriteView`，它是 的子类`UIView`。

```
-(spriteView *)findArrowContainingTouch:(UITouch *)touch inView:(UIView *)scaledView atPoint:(CGPoint) touchPoint
//There could be multiple subviews whose rectangles include the point. Find the one whose center is closest.
{
   spriteView * touchedView = nil;
   float bestDistance2 = 9999999999.9;
   float testDistance2 = 0;
   for (spriteView *arrow in scaledView.subviews) {
      if (arrow.tag == ARROWTAG) {
         if (CGRectContainsPoint(arrow.frame, touchPoint)) {
            testDistance2 = [self distance2Between:touchPoint and:arrow.center];
            if (testDistance2<bestDistance2) {
               bestDistance2 = testDistance2;
               touchedView = arrow;
            }
         }
      }
   }
   return touchedView;
} 
```

该方法`distance2Between`计算两点之间距离的平方。

```
-(spriteView *)findArrowTouchedAtLocation:(CGPoint)p inView:(UIView *)scaledView
{
   spriteView * arrow = nil;
   for (spriteView *testArrow in scaledView.subviews) {
      if (testArrow.tag == ARROWTAG) {
         if ((p.x == testArrow.touch.x) && (p.y == testArrow.touch.y)) {
            arrow = testArrow;
         }
      }
   }
   return arrow;
} 
```

中有不是箭头的子视图`scaledView`，所以我使用常量 ARROWTAG 来标识箭头。

```
#pragma mark - Touches
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
   UIView *scaledView = [self getScaledView];
   for (UITouch *touch in touches) {
      CGPoint touchLocation = [touch locationInView:scaledView];
      spriteView * arrow = [self findArrowContainingTouch:touch inView:scaledView atPoint:touchLocation];
      if (!(arrow==nil)) {
      //Record the original location of the touch event in a property, originalTouchLocation, of the arrow instance. Additionally, store the same point on the property touch.
      //Both properties are necessary. The originalTouchLocation will be used in `touchesEnded` and is not available in the `touch` object. So the information is stored separately.
      //The `touch` property, a CGPoint, is stored in order to identify the view. This property is updated by every touch event. The new value will be used by the upcoming event to find the appropriate view.
         arrow.touch = CGPointMake(touchLocation.x, touchLocation.y);
         arrow.originalTouchLocation = CGPointMake(touchLocation.x, touchLocation.y);
         arrow.debugFlag = YES;
         arrow.timeTouchBegan = touch.timestamp;
      }
    }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
   UIView *scaledView = [self getScaledView];
   for (UITouch *touch in touches) {
      CGPoint touchLocation = [touch locationInView:scaledView];
      CGPoint previousLocation = [touch previousLocationInView:scaledView];
      //previousLocation is used to find the right view. This must be in the coordinate system of the same view used in `touchesBegan`.
      spriteView * arrow = [self findArrowTouchedAtLocation:previousLocation inView:scaledView];
      if (!(arrow==nil)) {
         arrow.touch = CGPointMake(touchLocation.x, touchLocation.y);
      }
   }
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
   UIView *scaledView = [self getScaledView];
   for (UITouch *touch in touches) {
      CGPoint touchLocation = [touch locationInView:scaledView];
      CGPoint previousLocation = [touch previousLocationInView:scaledView];
      spriteView * arrow = [self findArrowTouchedAtLocation:previousLocation inView:scaledView];
      if (!(arrow==nil)) {
         arrow.touch = CGPointMake(touchLocation.x, touchLocation.y);
         float strokeAngle = [self findAngleFrom:arrow.originalTouchLocation to:touchLocation];
         float strokeDistance2 = sqrt([self distance2Between:arrow.originalTouchLocation and:touchLocation]);
         NSTimeInterval timeElapsed = touch.timestamp - arrow.timeTouchBegan;
         float newArrowSpeed = strokeDistance2 / timeElapsed / 100; //might want to use a different conversion factor, but this one works quite well
         arrow.transform = CGAffineTransformMakeRotation(strokeAngle);
         arrow.currentSpeed = newArrowSpeed;
      }
   }
}

-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
   UIView *scaledView = [self getScaledView];
   for (UITouch *touch in touches) {
      CGPoint previousLocation = [touch previousLocationInView:scaledView];
      spriteView * arrow = [self findArrowTouchedAtLocation:previousLocation inView:scaledView];
      if (!(arrow==nil)) {
         arrow.originalTouchLocation = CGPointMake(99999.0, 99999.0);
         NSLog(@"Arrow original location erased");
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:03:35.633

实际上，触摸对象在`touchesBegan`和中是相同的`touchesEnded`。事实证明，这是跟踪触摸的方式。

# c# - 如何读取xml节点属性？

> ID：13813975
> 
> 赞同：0
> 
> 时间：2012-12-11T05:07:37.107
> 
> 标签：c#, xml

我想在 xml 中获取属性值：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
        <rss version="2.0" xmlns:yweather="http://xml.weather.yahoo.com/ns/rss/1.0" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#">
            <channel>

<title>Yahoo! Weather - Chennai, IN</title>
<link>http://us.rd.yahoo.com/dailynews/rss/weather/Chennai__IN/*http://weather.yahoo.com/forecast/INXX0075_f.html</link>
<description>Yahoo! Weather for Chennai, IN</description>
<language>en-us</language>
<lastBuildDate>Tue, 11 Dec 2012 10:10 am IST</lastBuildDate>
<ttl>60</ttl>
<yweather:location city="Chennai" region="TN"   country="India"/>
<yweather:units temperature="F" distance="mi" pressure="in" speed="mph"/>
<yweather:wind chill="82"   direction="90"   speed="5" />
<yweather:atmosphere humidity="74"  visibility="2.8"  pressure="29.94"  rising="0" />
<yweather:astronomy sunrise="6:22 am"   sunset="5:45 pm"/>
<image>
<title>Yahoo! Weather</title>
<width>142</width>
<height>18</height>
<link>http://weather.yahoo.com</link>
<url>http://l.yimg.com/a/i/brand/purplelogo//uh/us/news-wea.gif</url>
</image>
<item>
<title>Conditions for Chennai, IN at 10:10 am IST</title>
<geo:lat>13.1</geo:lat>
<geo:long>80.29</geo:long>
<link>http://us.rd.yahoo.com/dailynews/rss/weather/Chennai__IN/*http://weather.yahoo.com/forecast/INXX0075_f.html</link>
<pubDate>Tue, 11 Dec 2012 10:10 am IST</pubDate>
<yweather:condition  text="Haze"  code="21"  temp="82"  date="Tue, 11 Dec 2012 10:10 am IST" />
<description><![CDATA[
<img src="http://l.yimg.com/a/i/us/we/52/21.gif"/><br />
<b>Current Conditions:</b><br />
Haze, 82 F<BR />
<BR /><b>Forecast:</b><BR />
Tue - Mostly Sunny. High: 86 Low: 70<br />
Wed - Mostly Sunny. High: 86 Low: 70<br />
<br />
<a href="http://us.rd.yahoo.com/dailynews/rss/weather/Chennai__IN/*http://weather.yahoo.com/forecast/INXX0075_f.html">Full Forecast at Yahoo! Weather</a><BR/><BR/>
(provided by <a href="http://www.weather.com" >The Weather Channel</a>)<br/>
]]></description>
<yweather:forecast day="Tue" date="11 Dec 2012" low="70" high="86" text="Mostly Sunny" code="34" />
<yweather:forecast day="Wed" date="12 Dec 2012" low="70" high="86" text="Mostly Sunny" code="34" />
<guid isPermaLink="false">INXX0075_2012_12_12_7_00_IST</guid>
</item>
</channel>
</rss>

<!-- api9.weather.ch1.yahoo.com Tue Dec 11 05:27:35 PST 2012 --> 
```

我使用了以下代码：

```
XmlDocument RSSXml = new XmlDocument();
        RSSXml.Load("http://weather.yahooapis.com/forecastrss?w=29223178&u=f");
        XmlNodeList RSSNodeList = RSSXml.SelectNodes("rss/channel");           
        foreach (XmlNode RSSNode in RSSNodeList)
        {
            XmlNode RSSSubNode;
            RSSSubNode = RSSNode.SelectSingleNode("title");
            string title = RSSSubNode != null ? RSSSubNode.InnerText : "";
            RSSSubNode = RSSNode.SelectSingleNode("link");
            string link = RSSSubNode != null ? RSSSubNode.InnerText : "";
            RSSSubNode = RSSNode.SelectSingleNode("description");
            string desc = RSSSubNode != null ? RSSSubNode.InnerText : "";

            lbl_title.Text = title;
            lbl_link.Text = link;
            lbl_desc.Text = desc;

        } 
```

它运行良好，但我想获取 yweather:location 节点属性值。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:02:17.430

只需获取该节点并使用[HasAttribute/GetAttribute 方法](http://msdn.microsoft.com/en-us/library/acwfyhc7%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T06:01:20.387

您应该提供一个命名空间来检索“yweather:location”节点，然后使用索引器获取属性：

```
RSSSubNode = RSSNode["location", "http://xml.weather.yahoo.com/ns/rss/1.0"];

Console.WriteLine(RSSSubNode.Attributes["city"].Value);
Console.WriteLine(RSSSubNode.Attributes["region"].Value);
Console.WriteLine(RSSSubNode.Attributes["country"].Value); 
```

如果您仍想使用`SelectSingleNode`XPath 查询，您应该提供命名空间管理器来执行带有命名空间前缀的查询：

```
var namespaceManager = new XmlNamespaceManager(new NameTable());
namespaceManager.AddNamespace("yweather", "http://xml.weather.yahoo.com/ns/rss/1.0");

RSSSubNode = RSSNode.SelectSingleNode("yweather:location", namespaceManager); 
```

# iphone - UI 在 iOS 6 中挂断了几秒钟

> ID：13813984
> 
> 赞同：0
> 
> 时间：2012-12-11T05:08:41.123
> 
> 标签：iphone

我的应用程序大部分时间都运行良好。当我转到 iOS6 设备设置 > 开发人员 > 网络链接调节器状态 > 启用打开 > 选择配置文件为 100 % 丢失时，会出现问题。选择此配置文件后，UI 会挂起并在几秒钟内无响应，然后开始正常运行。我无法找到这背后的任何原因。有没有人遇到同样的情况？如果是，那么您采取了哪些措施？

我认为以下代码在尝试使用 iOS 5 Accounts 框架在不使用 TweetSheet 的情况下发布到 Twitter 时会造成麻烦。这里的请求是 TWRequest。根据 Apple 文档，不保证在任何固定的特定线程上调用 performRequest 方法。如何在主线程上调用此方法？会有帮助吗？

```
 [request performRequestWithHandler:

     ^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

         if(responseData)
         {
             //Do twitter stuff
         }
 }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:40:47.820

由于 UI 是在主线程上执行的，因此您绝对需要**避免**在此类线程上调用任何耗时的方法。网络操作应在单独的后台线程上执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:13:45.583

也许您正在同步执行网络请求，而不是异步执行。在快速连接上进行测试时，您的 UI 似乎并不慢，但在网络条件较差的情况下，如果在主线程上完成同步网络，它可能会削弱应用程序。[读这个](http://blog.gruby.com/2011/01/29/synchronous-vs-asynchronous-networking-programming/)。

# php - 用于在移动设备中显示视频的 Html 页面

> ID：13813985
> 
> 赞同：0
> 
> 时间：2012-12-11T05:08:45.770
> 
> 标签：php, html, ffmpeg, html5-video

我正在为移动设备开发 php 页面，在一个页面中我必须显示视频，现在我正在测试 google chrome 中的 php 页面，但在 Google chrome 中不播放 mp4、avi 等。chrome 只播放 ogg 和 ogv 格式。

我听说过 ffmpeg，我安装在我的 Ubuntu 12.4 环境中，但它也没有将视频转换为 ogg 和 ogv fromat。它转换其他格式，如 mp4、avi 等。

**使用显示视频**

```
 <video width="320" height="240" controls="controls" autoplay="true">
  <source src="/SeeSayDo/<?php echo $model->av;?>" />
</video> 
```

用户可以上传任何视频格式，如 avi、mp4、flv 等，所以我必须显示他们上传的任何格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:39:57.457

您不应该尝试在网络浏览器中播放 AVI。您应该在 HTML5 视频标签中使用的格式是 H.264 和 Ogg/Theora（可能还有 WebM），这将使您获得支持的浏览器的最大覆盖范围（请参阅[http://caniuse.com/#search=video](http://caniuse.com/#search=video)对于支持的浏览器/格式）。

您必须[检测](http://api.jquery.com/jQuery.browser/)浏览器和/或[设备](http://code.google.com/p/php-mobile-detect/)并选择正确的视频格式。

[阅读本文](http://deepbluesky.com/blog/-/quick-tip-converting-video-to-ogg-webm-and-other-html5-formats_138/)以获取转换视频的帮助。

# ios - 谷歌 API 问题：谷歌图片搜索

> ID：13813986
> 
> 赞同：0
> 
> 时间：2012-12-11T05:08:46.057
> 
> 标签：ios, iphone, google-image-search

我想输入关键字并根据这些关键字从谷歌获取正确的图像。例如，我输入“铅笔”并想从谷歌图像中获取前 100 张铅笔图像。

我发现最好的方法是发出[https://www.google.com/search?q=pencil&tbm=isch](https://www.google.com/search?q=pencil&tbm=isch)的 GET 请求，解析 html 页面，获取图像的 url，并通过这些 url 加载图像。

1.  有没有更好的根据关键字加载图片的方法？

2.  如果我的应用程序以这种方式加载图像，我会被谷歌禁止吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:55:14.577

1) 是的，请使用 json。阅读此处了解详细信息和示例[https://developers.google.com/image-search/v1/jsondevguide](https://developers.google.com/image-search/v1/jsondevguide)

2) 谷歌似乎不允许这种方式（我不记得在 TOS 中的位置），但我不知道他们是否会禁止你的应用程序。

# android - Web 服务无法从 android 客户端接收字符串 base64？

> ID：13813987
> 
> 赞同：3
> 
> 时间：2012-12-11T05:08:48.373
> 
> 标签：android, web-services

我无法从 android 客户端接收字符串 base64。当字符串的长度超过大约 80k 时。我正在使用 fidder 来测试 web 服务。

这是我的网络配置：

```
<?xml version="1.0"?>

<configuration>
  <configSections>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="Everywhere" />
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication" />
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>

  <system.web.extensions>
    <scripting>
      <webServices>
        <jsonSerialization maxJsonLength="500000">
        </jsonSerialization>
      </webServices>
    </scripting>
  </system.web.extensions>
  <system.net>
    <mailSettings>
      <smtp>
        <network host="mail.test.com" port="25" userName="smtp@test.com" password="*"/>
      </smtp>
    </mailSettings>
  </system.net>
  <connectionStrings>
    <add name="VLDBConnectionString1" connectionString="Data Source=THOINX00861-PC;Initial Catalog=VLDB;Integrated Security=True"
      providerName="System.Data.SqlClient" />
    <add name="VLDBConnectionString" connectionString="Data Source=KHANH-PC;Initial Catalog=VLDB;Integrated Security=True"
      providerName="System.Data.SqlClient" />
    <add name="VLDBConnectionString3" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=VLDB;Integrated Security=True"
      providerName="System.Data.SqlClient" />

  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </modules>
  </system.webServer>
  <system.serviceModel>

    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
      multipleSiteBindingsEnabled="true" />
    <standardEndpoints>
      <webHttpEndpoint>
        <!-- 
            Configure the WCF REST service base address via the global.asax.cs file and the default endpoint 
            via the attributes on the <standardEndpoint> element below
        -->
        <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
      </webHttpEndpoint>
    </standardEndpoints>
    <services>
      <service name="MyService.MyService" behaviorConfiguration="MyService.MyServiceBehaviour" >
        <endpoint address="" 
                  binding="webHttpBinding" 
                  contract="MyService.IMyService"
                  behaviorConfiguration="maxRequest">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="maxRequest">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors  >
          <behavior name="MyService.MyServiceBehaviour">
            <dataContractSerializer maxItemsInObjectGraph="4194304"/>
            <serviceMetadata httpGetEnabled="true" />
            <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

和我的方法（只是为了测试是否收到了网络服务）

```
[WebInvoke(Method = "POST", UriTemplate = "/File", 
        RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml)]
        public bool UploadFile(Stream fileContents)
        {

            string email, itemtId, codeimg, format;
            using (StreamReader reader = new StreamReader(fileContents))
            {
                string[] separators = { "{\"", "\":\"", "\",\"", "\"}", "email", "format", "stringcodeimg", "itemid" };
                string contents = reader.ReadToEnd();
                string[] words = contents.Split(separators, StringSplitOptions.RemoveEmptyEntries);
                email = words[0];
                format = words[1];
                codeimg = words[2];
                itemtId = words[3];
            }

            return true;
        } 
```

# php - Codeigniter 应用程序出现问题“您提交的 URI 包含不允许的字符。”

> ID：13813989
> 
> 赞同：0
> 
> 时间：2012-12-11T05:09:05.970
> 
> 标签：php, codeigniter

我尝试了几乎所有在线程中发布的方法。

我的网址是这样的：www.example.com/twilio_sms/update_status‏ 许多帖子解释为编辑

```
if ( ! preg_match("|^[".str_replace(array('\\-', '\-'), '-', preg_quote($this->config->item('permitted_uri_chars'), '-'))."]+$|i", $str)) 
```

至

```
 if ( ! preg_match("|^[".($this->config->item('permitted_uri_chars'))."]+$|i", rawurlencode($str))) 
```

但它会导致该页面上的 404 错误。

/system/core/URI.php ：

```
 <?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/**
* CodeIgniter
*
* An open source application development framework for PHP 5.1.6 or newer
*
* @package      CodeIgniter
* @author       ExpressionEngine Dev Team
* @copyright    Copyright (c) 2008 - 2011, EllisLab, Inc.
* @license      http://codeigniter.com/user_guide/license.html
* @link     http://codeigniter.com
* @since        Version 1.0
* @filesource
*/

// ------------------------------------------------------------------------

/**
* URI Class
*
* Parses URIs and determines routing
*
* @package      CodeIgniter
* @subpackage   Libraries
* @category URI
* @author       ExpressionEngine Dev Team
* @link     http://codeigniter.com/user_guide/libraries/uri.html
*/
class CI_URI {

var $keyval         = array();
var $uri_string;
var $segments       = array();
var $rsegments      = array();

/**
 * Constructor
 *
 * Simply globalizes the $RTR object.  The front
 * loads the Router class early on so it's not available
 * normally as other classes are.
 *
 * @access  public
 */
function __construct()
{
    $this->config =& load_class('Config', 'core');
    log_message('debug', "URI Class Initialized");
}

// --------------------------------------------------------------------

/**
 * Get the URI String
 *
 * @access  private
 * @return  string
 */
function _fetch_uri_string()
{
    if (strtoupper($this->config->item('uri_protocol')) == 'AUTO')
    {
        // If the URL has a question mark then it's simplest to just
        // build the URI string from the zero index of the $_GET array.
        // This avoids having to deal with $_SERVER variables, which
        // can be unreliable in some environments
        if (is_array($_GET) && count($_GET) == 1 && trim(key($_GET), '/') != '')
        {
            $this->uri_string = key($_GET);
            return;
        }

        // Is there a PATH_INFO variable?
        // Note: some servers seem to have trouble with getenv() so we'll test it two ways
        $path = (isset($_SERVER['PATH_INFO'])) ? $_SERVER['PATH_INFO'] : @getenv('PATH_INFO');
        if (trim($path, '/') != '' && $path != "/".SELF)
        {
            $this->uri_string = $path;
            return;
        }

        // No PATH_INFO?... What about QUERY_STRING?
        $path =  (isset($_SERVER['QUERY_STRING'])) ? $_SERVER['QUERY_STRING'] : @getenv('QUERY_STRING');
        if (trim($path, '/') != '')
        {
            $this->uri_string = $path;
            return;
        }

        // No QUERY_STRING?... Maybe the ORIG_PATH_INFO variable exists?
        $path = str_replace($_SERVER['SCRIPT_NAME'], '', (isset($_SERVER['ORIG_PATH_INFO'])) ? $_SERVER['ORIG_PATH_INFO'] : @getenv('ORIG_PATH_INFO'));
        if (trim($path, '/') != '' && $path != "/".SELF)
        {
            // remove path and script information so we have good URI data
            $this->uri_string = $path;
            return;
        }

        // We've exhausted all our options...
        $this->uri_string = '';
    }
    else
    {
        $uri = strtoupper($this->config->item('uri_protocol'));

        if ($uri == 'REQUEST_URI')
        {
            $this->uri_string = $this->_parse_request_uri();
            return;
        }

        $this->uri_string = (isset($_SERVER[$uri])) ? $_SERVER[$uri] : @getenv($uri);
    }

    // If the URI contains only a slash we'll kill it
    if ($this->uri_string == '/')
    {
        $this->uri_string = '';
    }
}

// --------------------------------------------------------------------

/**
 * Parse the REQUEST_URI
 *
 * Due to the way REQUEST_URI works it usually contains path info
 * that makes it unusable as URI data.  We'll trim off the unnecessary
 * data, hopefully arriving at a valid URI that we can use.
 *
 * @access  private
 * @return  string
 */
function _parse_request_uri()
{
    if ( ! isset($_SERVER['REQUEST_URI']) OR $_SERVER['REQUEST_URI'] == '')
    {
        return '';
    }

    $request_uri = preg_replace("|/(.*)|", "\\1", str_replace("\\", "/", $_SERVER['REQUEST_URI']));

    if ($request_uri == '' OR $request_uri == SELF)
    {
        return '';
    }

    $fc_path = FCPATH.SELF;
    if (strpos($request_uri, '?') !== FALSE)
    {
        $fc_path .= '?';
    }

    $parsed_uri = explode("/", $request_uri);

    $i = 0;
    foreach(explode("/", $fc_path) as $segment)
    {
        if (isset($parsed_uri[$i]) && $segment == $parsed_uri[$i])
        {
            $i++;
        }
    }

    $parsed_uri = implode("/", array_slice($parsed_uri, $i));

    if ($parsed_uri != '')
    {
        $parsed_uri = '/'.$parsed_uri;
    }

    return $parsed_uri;
}

// --------------------------------------------------------------------

/**
 * Filter segments for malicious characters
 *
 * @access  private
 * @param   string
 * @return  string
 */
function _filter_uri($str)
{
    if ($str != '' && $this->config->item('permitted_uri_chars') != '' && $this->config->item('enable_query_strings') == FALSE)
    {
        // preg_quote() in PHP 5.3 escapes -, so the str_replace() and addition of - to preg_quote() is to maintain backwards
        // compatibility as many are unaware of how characters in the permitted_uri_chars will be parsed as a regex pattern
        if ( ! preg_match("|^[".str_replace(array('\\-', '\-'), '-', preg_quote($this->config->item('permitted_uri_chars'), '-'))."]+$|i", $str))
        {
            show_error('The URI you submitted has disallowed characters.', 400);
        }
    }

    // Convert programatic characters to entities
    $bad    = array('$',        '(',        ')',        '%28',      '%29');
    $good   = array('&#36;',    '&#40;',    '&#41;',    '&#40;',    '&#41;');

    return str_replace($bad, $good, $str);
}

// --------------------------------------------------------------------

/**
 * Remove the suffix from the URL if needed
 *
 * @access  private
 * @return  void
 */
function _remove_url_suffix()
{
    if  ($this->config->item('url_suffix') != "")
    {
        $this->uri_string = preg_replace("|".preg_quote($this->config->item('url_suffix'))."$|", "", $this->uri_string);
    }
}

// --------------------------------------------------------------------

/**
 * Explode the URI Segments. The individual segments will
 * be stored in the $this->segments array.
 *
 * @access  private
 * @return  void
 */
function _explode_segments()
{
    foreach(explode("/", preg_replace("|/*(.+?)/*$|", "\\1", $this->uri_string)) as $val)
    {
        // Filter segments for security
        $val = trim($this->_filter_uri($val));

        if ($val != '')
        {
            $this->segments[] = $val;
        }
    }
}

// --------------------------------------------------------------------
/**
 * Re-index Segments
 *
 * This function re-indexes the $this->segment array so that it
 * starts at 1 rather than 0\.  Doing so makes it simpler to
 * use functions like $this->uri->segment(n) since there is
 * a 1:1 relationship between the segment array and the actual segments.
 *
 * @access  private
 * @return  void
 */
function _reindex_segments()
{
    array_unshift($this->segments, NULL);
    array_unshift($this->rsegments, NULL);
    unset($this->segments[0]);
    unset($this->rsegments[0]);
}

// --------------------------------------------------------------------

/**
 * Fetch a URI Segment
 *
 * This function returns the URI segment based on the number provided.
 *
 * @access  public
 * @param   integer
 * @param   bool
 * @return  string
 */
function segment($n, $no_result = FALSE)
{
    return ( ! isset($this->segments[$n])) ? $no_result : $this->segments[$n];
}

// --------------------------------------------------------------------

/**
 * Fetch a URI "routed" Segment
 *
 * This function returns the re-routed URI segment (assuming routing rules are used)
 * based on the number provided.  If there is no routing this function returns the
 * same result as $this->segment()
 *
 * @access  public
 * @param   integer
 * @param   bool
 * @return  string
 */
function rsegment($n, $no_result = FALSE)
{
    return ( ! isset($this->rsegments[$n])) ? $no_result : $this->rsegments[$n];
}

// --------------------------------------------------------------------

/**
 * Generate a key value pair from the URI string
 *
 * This function generates and associative array of URI data starting
 * at the supplied segment. For example, if this is your URI:
 *
 *  example.com/user/search/name/joe/location/UK/gender/male
 *
 * You can use this function to generate an array with this prototype:
 *
 * array (
 *          name => joe
 *          location => UK
 *          gender => male
 *       )
 *
 * @access  public
 * @param   integer the starting segment number
 * @param   array   an array of default values
 * @return  array
 */
function uri_to_assoc($n = 3, $default = array())
{
    return $this->_uri_to_assoc($n, $default, 'segment');
}
/**
 * Identical to above only it uses the re-routed segment array
 *
 */
function ruri_to_assoc($n = 3, $default = array())
{
    return $this->_uri_to_assoc($n, $default, 'rsegment');
}

// --------------------------------------------------------------------

/**
 * Generate a key value pair from the URI string or Re-routed URI string
 *
 * @access  private
 * @param   integer the starting segment number
 * @param   array   an array of default values
 * @param   string  which array we should use
 * @return  array
 */
function _uri_to_assoc($n = 3, $default = array(), $which = 'segment')
{
    if ($which == 'segment')
    {
        $total_segments = 'total_segments';
        $segment_array = 'segment_array';
    }
    else
    {
        $total_segments = 'total_rsegments';
        $segment_array = 'rsegment_array';
    }

    if ( ! is_numeric($n))
    {
        return $default;
    }

    if (isset($this->keyval[$n]))
    {
        return $this->keyval[$n];
    }

    if ($this->$total_segments() < $n)
    {
        if (count($default) == 0)
        {
            return array();
        }

        $retval = array();
        foreach ($default as $val)
        {
            $retval[$val] = FALSE;
        }
        return $retval;
    }

    $segments = array_slice($this->$segment_array(), ($n - 1));

    $i = 0;
    $lastval = '';
    $retval  = array();
    foreach ($segments as $seg)
    {
        if ($i % 2)
        {
            $retval[$lastval] = $seg;
        }
        else
        {
            $retval[$seg] = FALSE;
            $lastval = $seg;
        }

        $i++;
    }

    if (count($default) > 0)
    {
        foreach ($default as $val)
        {
            if ( ! array_key_exists($val, $retval))
            {
                $retval[$val] = FALSE;
            }
        }
    }

    // Cache the array for reuse
    $this->keyval[$n] = $retval;
    return $retval;
}

// --------------------------------------------------------------------

/**
 * Generate a URI string from an associative array
 *
 *
 * @access  public
 * @param   array   an associative array of key/values
 * @return  array
 */
function assoc_to_uri($array)
{
    $temp = array();
    foreach ((array)$array as $key => $val)
    {
        $temp[] = $key;
        $temp[] = $val;
    }

    return implode('/', $temp);
}

// --------------------------------------------------------------------

/**
 * Fetch a URI Segment and add a trailing slash
 *
 * @access  public
 * @param   integer
 * @param   string
 * @return  string
 */
function slash_segment($n, $where = 'trailing')
{
    return $this->_slash_segment($n, $where, 'segment');
}

// --------------------------------------------------------------------

/**
 * Fetch a URI Segment and add a trailing slash
 *
 * @access  public
 * @param   integer
 * @param   string
 * @return  string
 */
function slash_rsegment($n, $where = 'trailing')
{
    return $this->_slash_segment($n, $where, 'rsegment');
}

// --------------------------------------------------------------------

/**
 * Fetch a URI Segment and add a trailing slash - helper function
 *
 * @access  private
 * @param   integer
 * @param   string
 * @param   string
 * @return  string
 */
function _slash_segment($n, $where = 'trailing', $which = 'segment')
{
    $leading    = '/';
    $trailing   = '/';

    if ($where == 'trailing')
    {
        $leading    = '';
    }
    elseif ($where == 'leading')
    {
        $trailing   = '';
    }

    return $leading.$this->$which($n).$trailing;
}

// --------------------------------------------------------------------

/**
 * Segment Array
 *
 * @access  public
 * @return  array
 */
function segment_array()
{
    return $this->segments;
}

// --------------------------------------------------------------------

/**
 * Routed Segment Array
 *
 * @access  public
 * @return  array
 */
function rsegment_array()
{
    return $this->rsegments;
}

// --------------------------------------------------------------------

/**
 * Total number of segments
 *
 * @access  public
 * @return  integer
 */
function total_segments()
{
    return count($this->segments);
}

// --------------------------------------------------------------------

/**
 * Total number of routed segments
 *
 * @access  public
 * @return  integer
 */
function total_rsegments()
{
    return count($this->rsegments);
}

// --------------------------------------------------------------------

/**
 * Fetch the entire URI string
 *
 * @access  public
 * @return  string
 */
function uri_string()
{
    return $this->uri_string;
}

// --------------------------------------------------------------------

/**
 * Fetch the entire Re-routed URI string
 *
 * @access  public
 * @return  string
 */
function ruri_string()
{
    return '/'.implode('/', $this->rsegment_array()).'/';
}

    }
   // END URI Class

   /* End of file URI.php */
   /* Location: ./system/core/URI.php */ 
```

/application/config/config.php

```
 $config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-?';
   $config['allow_get_array'] = TRUE;
   $config['enable_query_strings'] = FALSE;
   $config['controller_trigger'] = 'c';
   $config['function_trigger'] = 'm';
   $config['directory_trigger'] = 'd'; // experimental not currently in use 
```

当我从浏览器复制网址时，它就像：

```
https://example.com/twilio_sms/update_status%E2%80%8F 
```

它应该是这样的：

```
https://example.com/twilio_sms/update_status 
```

为什么要添加额外的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:54:14.487

不要弄乱核心文件。你可以编写自己的函数来清理 URL 阅读这篇文章 [http://www.florian-hacquebart.eu/?p=161](http://www.florian-hacquebart.eu/?p=161)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:44:32.027

不确定这是否对您有帮助...但我做了一些修改以检查核心文件中显示错误的实际不允许的字符..

```
 path >  system>core>Input.php   // arounrd line 561

 function _clean_input_keys($str)
 {
    if ( ! preg_match("/^[a-z0-9:_\/-]+$/i", $str))
    {
    exit('Disallowed Key Characters.'.$str); //added str to print the $str that was causing the problem
     }
 ..... 
```

您可以这样做来检查是否是下划线（_）..或其他导致错误的字符...同样您可以在配置文件中进行更改..

希望这可以帮助

# php - 在PHP中的一行中将关联数组转换为“id = value，id = value”的字符串

> ID：13813991
> 
> 赞同：9
> 
> 时间：2012-12-11T05:09:16.167
> 
> 标签：php, associative-array

在 Python 中，我会做这样的事情来提升以下字典（相当于 php 的 assoc 数组）。

```
arr = {'id': '1', 'name': 'marcin', 'born': '1981-10-23'}
print ', '.join([('`%s` = "%s"') % (k,v) for k,v in arr.items()]) 
```

要得到：

```
`born` = "1981-10-23", `id` = "1", `name` = "marcin" 
```

假设 PHP 数组是：

```
array("id"=>"1","name"=>"marcin","born"=>"1981-10-23"); 
```

有没有办法在不使用 foreach 循环的情况下在 PHP 5.3 中获得相同的结果？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T05:41:04.993

查看相对较新的`http_build_query`功能：

*   [http://php.net/manual/en/function.http-build-query.php](http://php.net/manual/en/function.http-build-query.php)

例如

```
echo http_build_query(array('foo'=>'bar', 'zig'=>'zag', 'tic'=>'tac'), '', ', '); 
```

输出：

```
foo=bar, zig=zag, tic=tac 
```

它用于制作查询字符串，但第三个参数`arg_separator`可以是任何字符串（默认为“&”）。

（这并不能解决您的引用问题，但它可能仍然有帮助）

# c++ - C++ 奇怪的分段错误

> ID：13813992
> 
> 赞同：0
> 
> 时间：2012-12-11T05:09:17.543
> 
> 标签：c++, linked-list, segmentation-fault

我的程序出现了一个奇怪的分段错误。Dlist 是一个创建链接列表的类，该链接列表具有从动态列表中插入和删除项目的操作。我很肯定我的这个类的实现是正确的，但是这段代码正在产生一个段错误。奇怪的是，当我让我的 atleastTwo 和 atleastOne 函数通过引用传递时，段错误消失了，一切都编译了。任何人都可以阐明这个问题吗？

```
bool atleastTwo(Dlist<double> stack){
try{
    stack.removeFront();
    stack.removeFront();
} catch(emptyList e){
    cout << "Not enough operands\n";
    return false;
}
return true;
}

bool atleastOne(Dlist<double> stack){
try{
    stack.removeFront();
} catch(emptyList e){
    cout << "Not enough operands\n";
    return false;
}
return true;
}

void processInput(inputs usrInput, Dlist<double> &stack){
switch(usrInput){
    case i_add:
        if(atleastTwo(stack)){doOperation(stack, add);}
        break;
    case i_subtract:
        if(atleastTwo(stack)){doOperation(stack, subtract);}
        break;
    case i_multiply:
        if(atleastTwo(stack)){doOperation(stack, multiply);}
        break;
    case i_divide:
        if(atleastTwo(stack)){doOperation(stack, divide);}
        break;
    case i_negation:
        if(atleastOne(stack))negation(stack);
        break;
    case i_duplicate:
        if(atleastOne(stack)){duplicate(stack);}
        break;
    case i_reverse:
        if(atleastTwo(stack)){reverse(stack);}
        break;
    case i_print:
        if(atleastOne(stack)){print(stack);}
        break;
    case i_clear:
        clear(stack);
        break;
    case i_printAll:
        printAll(stack);
        break;
    default:
        break;
}
}

T *removeFront();
// MODIFIES this
// EFFECTS removes and returns first object from non-empty list
//         throws an instance of emptyList if empty 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:46:31.807

关于问题本身，我看不到您的代码如何发生段错误。我怀疑问题出在 Dlist 的代码中，也许是一个糟糕的析构函数？

要解决您的问题，您可以在 Dlist 中实现元素计数并检查它。但也许你不允许修改 Dlist。避免跳跃代码和过多测试的首选解决方案是遵循建议。无需测试操作数的数量，只需尝试一下，并将异常处理程序放入您的处理方法中。第二种解决方案的问题是堆栈可能保持不一致的状态：这意味着您无法继续进行计算，应该从头开始。

```
void processInput(inputs usrInput, Dlist<double> &stack)
{
  try{
    // .... your old code WITHOUT ifs
  } catch(emptyList e){
    cout << "Not enough operands\n";
  }
} 
```

我想后者是一种可行的方法，您可以保留堆栈的副本并在一个副本上进行计算。这种方式的性能会好得多，而且代码更容易阅读和理解。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:15:21.607

如果您按值传递（不使用引用），那么您每次都有效地制作副本。究竟这如何令人困惑尚不清楚，您需要准确研究各种复制构造函数在做什么。但肯定是通过引用传递是你的意思吗？为什么要复制整个集合？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T06:10:41.833

盯着你的 Dlist 实现代码看了半天（乍一看并没有错），我认为问题出在这里：

```
template <typename T>
Dlist<T>::Dlist(const Dlist &l){
    removeAll();
    copyAll(l);
} 
```

考虑到在那里执行的操作，在将(and )`removeAll()`初始化为 NULL 之前调用会导致不好的事情。`first``last`

Dlist 设计的另一个问题是您持有原始指针（这很棘手，但不一定是坏事，假设每个人都清楚用户负责删除它们），但您已经实现了深度复制机制。临时 Dlist 对象会泄漏，您传递给您的`atLeastOne`和`atLeastTwo`函数的副本也会泄漏，除非您手动删除它们的内容。