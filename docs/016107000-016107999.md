# StackOverflow 问答 16107000-16107999

# cordova - PhoneGap 应用程序可以在 Windows 8 和 Windows RT 中运行吗？

> ID：16107000
> 
> 赞同：1
> 
> 时间：2013-04-19T14:28:24.423
> 
> 标签：cordova, windows-8

该[文档](http://docs.phonegap.com/en/2.6.0/guide_getting-started_windows-8_index.md.html#Getting%20Started%20with%20Windows%208)没有明确说明一种或另一种方式，但听起来 PhoneGap 应用程序只能在 RT 而不是 Window 8 中运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-30T21:09:10.503

我错过了一点吗？问题不在于 .NET 或本机 Windows 应用程序是否运行这两个平台，而是基于框架的应用程序包装器中的 PhoneGap 应用程序（HTML5/Javascript）是否在 RT 上运行。上面的评论没有回答，不是吗？

我在 PhoneGap 官方文档中找到了以下内容：

**开始使用 Windows 8**

> ... 在 Windows 8 和 Windows RT 的开发过程中，Microsoft 弃用了“Metro 风格的应用程序”这个名称。在 MSDN 上，这种类型的应用程序现在称为“Windows 应用商店”应用程序。这就是我们将在本指南中使用的名称。同样在本指南中，每当我们提到 Windows 8 时，您都应该将其理解为**Windows 8 和 Windows RT**。

来源：[http ://docs.phonegap.com/en/2.2.0/guide_getting-started_windows-8_index.md.html](http://docs.phonegap.com/en/2.2.0/guide_getting-started_windows-8_index.md.html)

所以答案应该是：是的，PhoneGap 应用程序可以在 Windows 8 和 RT 中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:58:35.793

Windows RT 是 Windows 8，仅在 ARM 设备上。所有 Windows 8 应用程序（如 Metro）都可以在 RT 上运行，因为它们基于 .NET（跨平台）。他们还在[这篇博](http://phonegap.com/blog/2012/11/01/phonegap-220/)文中明确提到了这一点：

> 并到达新发布的 Windows 8 和 Windows RT 设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-29T17:39:25.273

我不敢苟同。PhoneGap 生产 Android、iOS 和 Windows Phone 应用程序。Windows Phone 应用程序不能在 Windows 8 上运行，因此答案是否定的。（我想错了，但不幸的是我认为我是对的）。

MS 宣布了一些通用应用程序，今年将在所有设备上运行，但 PhoneGap 今天不支持。

# vb.net - 通过字符串的arrayLists嵌套每个循环的效率

> ID：16107004
> 
> 赞同：1
> 
> 时间：2013-04-19T14:28:29.550
> 
> 标签：vb.net, string, arraylist, performance

有问题。效率。我对编码效率知之甚少，但我正在学习。在这些字符串数组列表中搜索 item1，并在找到时将 item2 添加到新的 arrayList。逻辑很棒。工作正常。但需要大约 30-40 秒，因为 arrLoList 中有 700 个元素 * arrCoList 中有 10 000 个元素。

现在包含一旦找到 item1 就会退出，所以我无法真正改进。从 arrCoList 的字符串末尾删除一些字符会有所帮助吗？

我还能如何改进这一点？我想从 arrayLists 改变？

```
For Each item1 In arrLoList             
        For Each item2 In arrCoList

            If arrCoList.contains(item1) Then

                arrNewList.Add(item2)

            Else
                intCouldntfind += 1     'not finding 7 million 

            End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:36:29.050

首先，我不会使用旧的`ArrayList`，它总是需要将对象装箱/拆箱到它们的实际类型（`string`这里）。相反，我会使用强类型的`List(Of String)`.

其次，您可以使用[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)来获取设置差异，这非常有效，因为它在`HashSet`内部使用 a。

```
Dim sw = New System.Diagnostics.Stopwatch ' measure time 
Dim rnd As New Random ' create random strings
Dim loList = New List(Of String)(700)
Dim coList = New List(Of String)(10000)

' initialize with sample data
For i = 1 To 700
    loList.Add(String.Format("Item: {0} Random-Value: {1}", i, rnd.Next(1, 1000)))
Next
For i = 1 To 10000
    coList.Add(String.Format("Item: {0} Random-Value: {1}", i, rnd.Next(1, 1000)))
Next

sw.Start()

' *** Here is all you need: '
Dim newList = loList.Except(coList).ToList()

sw.Stop() 
```

结果：最多**3 毫秒**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:32:08.617

你正在做一个不必要的嵌套：

这应该会快一些：

```
For Each item1 In arrLoList   
    If arrCoList.contains(item1) Then          
        For Each item2 In arrCoList               
            arrNewList.Add(item2)
        Next  
     End If
Next 
```

# php - 没有创建/忽略具有 2 个关系/外键的表

> ID：16107008
> 
> 赞同：0
> 
> 时间：2013-04-19T14:28:52.303
> 
> 标签：php, mysql

在我执行此代码后，不会创建或忽略具有 2 个关系的两个表。

表 trips 和 stop_times 是被忽略的一次。这是 phpmyadmin 中显示的内容： ![在此处输入图像描述](https://i.stack.imgur.com/g6q8Z.png)

任何想法的人？

这是我的PHP代码。

```
 $dbName = $dbname;

 // SQL Queries to create all needed tables to fill with data!
 // Don't change any of this unless you know what you're doing.

 $createDB = "
 CREATE SCHEMA `$dbName` ;
 ";

 $sqlagency="CREATE  TABLE agency (
   agency_id INT(11) NOT NULL DEFAULT '0' ,
   agency_name VARCHAR(255) NULL DEFAULT NULL ,
   agency_url VARCHAR(255) NULL DEFAULT NULL ,
   agency_timezone VARCHAR(255) NULL DEFAULT NULL ,
   agency_lang VARCHAR(255) NULL DEFAULT NULL ,
   agency_phone VARCHAR(255) NULL DEFAULT NULL ,
   PRIMARY KEY (`agency_id`) )
 ENGINE = InnoDB
 DEFAULT CHARACTER SET = latin1;";

 $sqlcalendar="CREATE  TABLE calendar (
   service_id VARCHAR(25) NULL DEFAULT NULL ,
   monday TINYINT(1) NULL DEFAULT NULL ,
   tuesday TINYINT(1) NULL DEFAULT NULL ,
   `wednesday` TINYINT(1) NULL DEFAULT NULL ,
   `thursday` TINYINT(1) NULL DEFAULT NULL ,
   `friday` TINYINT(1) NULL DEFAULT NULL ,
   `saturday` TINYINT(1) NULL DEFAULT NULL ,
   `sunday` TINYINT(1) NULL DEFAULT NULL ,
   `start_date` VARCHAR(255) NULL DEFAULT NULL ,
   `end_date` VARCHAR(255) NULL DEFAULT NULL ,
   `start_date_timestamp` INT(11) NULL DEFAULT NULL ,
   `end_date_timestamp` INT(11) NULL DEFAULT NULL )
 ENGINE = InnoDB
 DEFAULT CHARACTER SET = latin1;";

 $sqlcalendar_dates="CREATE  TABLE calendar_dates (
   `service_id` VARCHAR(25) NULL DEFAULT NULL ,
   `date` VARCHAR(255) NULL DEFAULT NULL ,
   `date_timestamp` INT(11) NULL DEFAULT NULL ,
   `exception_type` INT(2) NULL DEFAULT NULL )
 ENGINE = InnoDB
 DEFAULT CHARACTER SET = latin1;";

 $sqlroutes="CREATE  TABLE routes (
   `route_id` INT(11) NOT NULL DEFAULT '0' ,
   `agency_id` INT(11) NULL DEFAULT NULL ,
   `route_short_name` VARCHAR(255) NULL DEFAULT NULL ,
   `route_long_name` VARCHAR(255) NULL DEFAULT NULL ,
   `route_type` INT(2) NULL DEFAULT NULL ,
   `route_text_color` VARCHAR(255) NULL DEFAULT NULL ,
   `route_color` VARCHAR(255) NULL DEFAULT NULL ,
   `route_url` VARCHAR(255) NULL DEFAULT NULL ,
   `route_desc` VARCHAR(255) NULL DEFAULT NULL ,
   PRIMARY KEY (`route_id`) ,
   INDEX `fk_routes_agency1` (`agency_id` ASC) ,
   CONSTRAINT `fk_routes_agency1`
     FOREIGN KEY (`agency_id` )
     REFERENCES `agency` (`agency_id` )
     ON DELETE NO ACTION
     ON UPDATE NO ACTION)
 ENGINE = InnoDB
 DEFAULT CHARACTER SET = latin1;";

 $sqlshapes="CREATE  TABLE shapes (
   `shape_id` INT(15) NOT NULL DEFAULT '0' ,
   `shape_pt_lat` DECIMAL(8,6) NULL DEFAULT NULL ,
   `shape_pt_lon` DECIMAL(8,6) NULL DEFAULT NULL ,
   `shape_pt_sequence` INT(11) NULL DEFAULT NULL ,
   PRIMARY KEY (`shape_id`) )
 ENGINE = InnoDB
 DEFAULT CHARACTER SET = latin1;";

 $sqltrips="CREATE  TABLE trips (
   `route_id` INT(11) NULL DEFAULT NULL ,
   `service_id` VARCHAR(25) NULL DEFAULT NULL ,
   `trip_id` INT(11) NOT NULL DEFAULT '0' ,
   `trip_headsign` VARCHAR(255) NULL DEFAULT NULL ,
   `trip_short_name` VARCHAR(255) NULL DEFAULT NULL ,
   `direction_id` TINYINT(1) NULL DEFAULT NULL ,
   `block_id` INT(11) NULL DEFAULT NULL ,
   `shape_id` INT(11) NULL DEFAULT NULL ,
   PRIMARY KEY (trip_id) ,
   INDEX fk_trips_routes1 (route_id ASC) ,
   INDEX fk_trips_calendar_dates1 (service_id ASC) ,
   CONSTRAINT fk_trips_routes1
     FOREIGN KEY (route_id)
     REFERENCES routes (route_id)
     ON DELETE NO ACTION
     ON UPDATE NO ACTION,
   CONSTRAINT fk_trips_calendar_dates1
     FOREIGN KEY (service_id)
     REFERENCES calendar_dates(service_id)
     ON DELETE NO ACTION
     ON UPDATE NO ACTION)
 ENGINE = InnoDB
 DEFAULT CHARACTER SET = latin1;";

 $sqlstops="CREATE  TABLE stops (
   `stop_id` INT(11) NOT NULL DEFAULT '0' ,
   `stop_code` VARCHAR(255) NULL DEFAULT NULL ,
   `stop_name` VARCHAR(255) NULL DEFAULT NULL ,
   `stop_desc` VARCHAR(255) NULL DEFAULT NULL ,
   `stop_lat` DECIMAL(8,6) NULL DEFAULT NULL ,
   `stop_lon` DECIMAL(8,6) NULL DEFAULT NULL ,
   `zone_id` INT(11) NULL DEFAULT NULL ,
   `stop_url` VARCHAR(255) NULL DEFAULT NULL ,
   `location_type` INT(2) NULL DEFAULT NULL ,
   `parent_station` INT(11) NULL DEFAULT NULL ,
   PRIMARY KEY (`stop_id`) )
 ENGINE = InnoDB
 DEFAULT CHARACTER SET = latin1;";

 $sqlstop_times="CREATE  TABLE stop_times (
   `trip_id` INT(11) NULL DEFAULT NULL ,
   `arrival_time` TIME NULL DEFAULT NULL ,
   `arrival_time_seconds` INT(11) NULL DEFAULT NULL ,
   `departure_time` TIME NULL DEFAULT NULL ,
   `departure_time_seconds` INT(11) NULL DEFAULT NULL ,
   `stop_id` INT(11) NULL DEFAULT NULL ,
   `stop_sequence` INT(11) NULL DEFAULT NULL ,
   `stop_headsign` VARCHAR(255) NULL DEFAULT NULL ,
   `pickup_type` INT(2) NULL DEFAULT NULL ,
   `drop_off_type` INT(2) NULL DEFAULT NULL ,
   `shape_dist_traveled` VARCHAR(255) NULL DEFAULT NULL ,
   INDEX `fk_stop_times_trips` (`trip_id` ASC) ,
   INDEX `fk_stop_times_stops1` (`stop_id` ASC) ,
   CONSTRAINT `fk_stop_times_trips`
     FOREIGN KEY (`trip_id` )
     REFERENCES trips (`trip_id` )
     ON DELETE NO ACTION
     ON UPDATE NO ACTION,
   CONSTRAINT `fk_stop_times_stops1`
     FOREIGN KEY (`stop_id` )
     REFERENCES stops (`stop_id` )
     ON DELETE NO ACTION
     ON UPDATE NO ACTION)
 ENGINE = InnoDB
 DEFAULT CHARACTER SET = latin1;";

     // Creates and selects DB
     mysql_query($createDB);
     mysql_select_db($dbName);

     // Create the tables for GTFS data

     mysql_query($sqlagency);
     mysql_query($sqlcalendar);
     mysql_query($sqlcalendar_dates);
     mysql_query($sqlroutes);
     mysql_query($sqlshapes);
     mysql_query($sqltrips);
     mysql_query($sqlstops);
     mysql_query($sqlstop_times); 
```

# matlab - 重叠数据点和间距

> ID：16107010
> 
> 赞同：0
> 
> 时间：2013-04-19T14:29:08.240
> 
> 标签：matlab, space, points

我有一组要绘制的数据，但是图表上的点彼此如此接近，以至于您无法很好地看到它们，也看不到它们的值，因为即使放大我也无法全部看到它们。现在我想做的是在不改变它们在图表上的实际值的情况下将它们隔开。是一个函数还是任何其他方法来做到这一点？我试过改变轴和比例，但没有帮助。这些点大多在 Y 方向。请帮助我真正的意思是虽然这些点彼此接近，但我想在它们之间创建和间隔，这样它们就不会相互堆积

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:35:59.063

您可以使您尝试绘制的向量在一些定义的时间间隔后变得更加稀疏：

```
plot(x(1:10:end),y(1:10:end)) 
```

在这个例子中，我绘制了每十个点。它有帮助吗？

# xml - 在哪里可以找到 iText xml 参考？

> ID：16107011
> 
> 赞同：5
> 
> 时间：2013-04-19T14:29:12.820
> 
> 标签：xml, itextsharp, razorpdf

我正在评估使用[RazorPDF](http://www.nyveldt.com/blog/post/Introducing-RazorPDF)作为我们的报告解决方案。[出于某种原因，除了一些](http://stderr.org/doc/libitext-java-doc/www/examples/Chap0701.xml) [示例](https://gist.github.com/RazorAnt/3998480)之外，我找不到任何 iText XML 参考。Java 或 C# API 有很多示例，但没有关于 XML 本身的示例。

是否存在这样的参考，还是我必须从示例中找出它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T16:17:46.257

请阅读[在哪里可以找到 itext.dtd？](https://stackoverflow.com/questions/14975648/where-can-i-find-itext-dtd)

我是 iText 的原始开发人员，我也是很久以前为 iText XML 文件编写 DTD 的人。那是在 XSD 出现之前，所以那是很久以前的事了！

已从 iText 中删除了对这个 DTD 的支持（我相信那是关于我的第一本书于 2006 年出版的时候），转而支持将 XML 转换为 PDF 的其他方法。看到过时的 XML 出现在名为 RazorPDF 的东西中，真是令人惊讶。

无论如何：我是 iText 集团的 CEO，负责 iText 和 iTextSharp，我对 RazorPDF 一无所知。我很确定 RazorPDF 使用了强大的 iText 旧版本，我对这个问题的回答解释了为什么它不应该：[https ://stackoverflow.com/questions/25696851/can-itext-2-1-7-or-早期可用于商业用途](https://stackoverflow.com/questions/25696851/can-itext-2-1-7-or-earlier-can-be-used-commercially)

# c# - 绑定未显示正确的值

> ID：16107013
> 
> 赞同：0
> 
> 时间：2013-04-19T14:29:17.777
> 
> 标签：c#, wpf, data-binding

基本上，我正在从 xml 文件中读取一个值并在文本框中显示该值。此文本框是可编辑的，因此用户可以对其进行更改，并且当会话结束时，该值将存储回 xml 文件中。

我知道这些值正确存储并加载到文本框中。但是我很困惑为什么我看不到应该在文本框中显示的绑定值..

这是文本框：

```
<UserControl x:Class="test.myView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:ui="clr-namespace:test.myView"  
         xmlns:local="test.myControls;assembly=test.mycontrols">

<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Style.xaml"/>
    </ResourceDictionary>
</UserControl.Resources>

<StackPanel Margin="8">
        <TextBlock Text="Starting URL"/>
        <TextBox Margin="0,5" FontSize="12" Height="30" Width="360" Text="{Binding myValue, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
                 Style="{StaticResource WaterMarkTextBox}" local:WaterMarkTextHelper.WatermarkText="ENTER Value" />
    </StackPanel> 
```

这是 INotifyPropertyChanged：

```
public abstract class ViewModelBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void RaiseChangeNotification(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

} 
```

这是我绑定到的属性：

```
public string myValue
    {
        get { return _settings.myValue; }
        set { _settings.myValue= value;   }
    } 
```

我认为这可能是因为文本框的值在代码到达使用数据绑定设置起始 url 的部分之前为空。wpf 中是否存在强制它查看最新值的验证命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:42:27.357

没有足够的信息来了解确切的问题，但是当这类事情发生时有一些事情需要检查。

1.  在 Visual Studio 中检查您的`Output`窗口。这会给你任何绑定错误。这将有助于解决以下一些问题：

    *   没有将您的属性设置为`public`

    *   用您的物业名称打错字

    *   没有`DataContext`设置

2.  确保您`DataContext`实现了[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口。这是`WPF`更新绑定的实现所必需的。你可以这样做：

    ```
    public class YourDataContext : INotifyPropertyChanged
    {
        private object _myvalue;

        public object myvalue
        {
            get
            {
                return _myvalue;
            }
            set
            {
                if (_myvalue == value)
                    return;

                _myvalue = value;
                OnPropertyChanged("myvalue");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, 
                                new PropertyChangedEventArgs(propertyName));
            }
        }
    } 
    ```

    您还可以查找几种策略来简化此操作，例如 INotifyPropertyChanged 编织或`BaseViewModel`类。

## 编辑

如果`myvalue`在你`ViewModel`的继承自你的，`ViewModelBase`那么你需要做的就是将你的属性的实现更改为：

```
public string myValue
{
    get 
    {
        return _settings.myValue;
    }
    set 
    {
        if (_settings.myValue == value)
            return;

        _settings.myValue = value;
        RaiseChangeNotification("myValue");            
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:01:37.233

尝试添加一个虚拟转换器并查看当您从 UI 文本框更改值时是否触发绑定（需要执行转换回方法）。否则请借助 snoop ( [http://snoopwpf.codeplex.com/](http://snoopwpf.codeplex.com/) ) 这将帮助您检查绑定状态。

如果要将数据从源更新到目标，请在 setter 中添加 RaiseNotification。

```
public string myValue
    {
        get { return _settings.myValue; }
        set { _settings.myValue= value;  RaiseChangeNotification("myValue") }
    } 
```

# video - 视频上传转换器站点中的 Ffmpeg 导致 CPU 使用率超载

> ID：16107014
> 
> 赞同：0
> 
> 时间：2013-04-19T14:29:20.753
> 
> 标签：video, ffmpeg, overloading, cpu, converter

我正在开发一个视频转换器网站，您可以在其中上传视频，然后将其转换为您想要的格式。

一切正常，唯一的问题是 ffmpeg 的 CPU 使用率过载，当我上传 4 个实例 4 个高清视频时，CPU 使用率达到 70-80%

为了控制这一点，我想找到一种降低 cpu 使用率或优先级的方法，我尝试了几个教程，例如：[http ://www.nixtutor.com/linux/changeing-priority-on-linux-processes/](http://www.nixtutor.com/linux/changing-priority-on-linux-processes/)

但似乎无法控制，我尝试了这个，然后 ffmpeg 没有工作必须更新它。

因此，一旦我控制 CPU 使用率，我还想使用 php 队列系统来控制视频转换。

谁能给我任何提示，如何让这个工作的方向？

先感谢您

顺便说一句，我的服务器是 Centos Linux 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:21:05.797

您可以减少 FFmpeg[的线程数](http://ffmpeg.org/ffmpeg-all.html)

```
ffmpeg in.mp4 -threads 1 out.mp4 
```

# android - 使用 OnPageChangeListener 同步两个 ViewPager

> ID：16107016
> 
> 赞同：14
> 
> 时间：2013-04-19T14:29:29.370
> 
> 标签：android, android-viewpager

我正在尝试同步两个`ViewPager`s，显然在我之前有很多人，而且我已经做到了：

```
private ViewPager mNavPager;

private ViewPager mMainPager;

private final OnPageChangeListener mNavPagerListener = new OnPageChangeListener() {

    private boolean mNavDragging;
    private int mScrollPosition;

    @Override
    public void onPageSelected(int position) {
        mScrollPosition = position;
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        if(mNavDragging)
            mMainPager.scrollTo(positionOffsetPixels, 0);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
        switch(state) {
        case ViewPager.SCROLL_STATE_DRAGGING:
        case ViewPager.SCROLL_STATE_SETTLING:
            mNavDragging = true;
            break;
        case ViewPager.SCROLL_STATE_IDLE:
            mNavDragging = false;
            break;
        }
    }
};

private OnPageChangeListener mMainPagerListener = new OnPageChangeListener() {

    private boolean mMainDragging;
    private int mScrollPosition;

    @Override
    public void onPageSelected(int position) {
        mScrollPosition = position;
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        if(mMainDragging)
            mNavPager.scrollTo(positionOffsetPixels, 0);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
        switch(state) {
        case ViewPager.SCROLL_STATE_DRAGGING:
        case ViewPager.SCROLL_STATE_SETTLING:
            mMainDragging = true;
            break;
        case ViewPager.SCROLL_STATE_IDLE:
            mMainDragging = false;
            break;
        }
    }
}; 
```

如果其中一个是手动滚动的，则另一个使用滚动状态属性从属于它。它可以很好地工作，直到物品到达最终位置；此时，从属寻呼机立即弹回先前选择的项目，就好像没有发生滚动一样。

我尝试过`ViewPager#setCurrentItem(mScrolledPosition)`使用各种不同的逻辑约束进行调用，但这也不起作用，尽管它偶尔会使情况变得更糟。我觉得好像必须有什么可以做的，但我不确定是什么。

我怎样才能让从属寻呼机保持在正确的位置？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-10-22T17:15:28.113

我使用 OnPageChangeListener 以更简单（和更简洁）的方式解决了这个问题：

```
mViewPager1.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {

      private int mScrollState = ViewPager.SCROLL_STATE_IDLE;

      @Override
      public void onPageScrolled(final int position, final float positionOffset, final int positionOffsetPixels) {
        if (mScrollState == ViewPager.SCROLL_STATE_IDLE) {
          return;
        }
        mViewPager2.scrollTo(mViewPager1.getScrollX(), mViewPager2.getScrollY());
      }

      @Override
      public void onPageSelected(final int position) {

      }

      @Override
      public void onPageScrollStateChanged(final int state) {
        mScrollState = state;
        if (state == ViewPager.SCROLL_STATE_IDLE) {
          mViewPager2.setCurrentItem(mViewPager1.getCurrentItem(), false);
        }
      }
});

mViewPager2.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {

      private int mScrollState = ViewPager.SCROLL_STATE_IDLE;

      @Override
      public void onPageScrolled(final int position, final float positionOffset, final int positionOffsetPixels) {
        if (mScrollState == ViewPager.SCROLL_STATE_IDLE) {
          return;
        }
        mViewPager1.scrollTo(mViewPager2.getScrollX(), mViewPager1.getScrollY());
      }

      @Override
      public void onPageSelected(final int position) {

      }

      @Override
      public void onPageScrollStateChanged(final int state) {
        mScrollState = state;
        if (state == ViewPager.SCROLL_STATE_IDLE) {
          mViewPager1.setCurrentItem(mViewPager2.getCurrentItem(), false);
        }
      }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-08T09:25:38.477

我在不使用监听器的情况下解决了这个问题。因此，您可以将侦听器用于其他一些东西，并使代码看起来更干净。

我知道这是很久以前提出的问题。我正在寻找解决方案并自己解决了。

这就是我的自定义 ViewPager 代码的方式

```
public class CustomPager extends ViewPager {
CustomPager mCustomPager;
private boolean forSuper;

public CustomPager(Context context) {
    super(context);
}

public CustomPager(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public boolean onInterceptTouchEvent(MotionEvent arg0) {
    if (!forSuper) {

        mCustomPager.forSuper(true);
        mCustomPager.onInterceptTouchEvent(arg0);
        mCustomPager.forSuper(false);
    }
    return super.onInterceptTouchEvent(arg0);
}

@Override
public boolean onTouchEvent(MotionEvent arg0) {
    if (!forSuper) {
        mCustomPager.forSuper(true);
        mCustomPager.onTouchEvent(arg0);
        mCustomPager.forSuper(false);
    }
    return super.onTouchEvent(arg0);
}

public void setViewPager(CustomPager customPager) {
    mCustomPager = customPager;
}

public void forSuper(boolean forSuper) {
    this.forSuper = forSuper;
}

@Override
public void setCurrentItem(int item, boolean smoothScroll) {
    if (!forSuper) {
        mCustomPager.forSuper(true);
        mCustomPager.setCurrentItem(item, smoothScroll);
        mCustomPager.forSuper(false);
    }
    super.setCurrentItem(item, smoothScroll);
}

@Override
public void setCurrentItem(int item) {
    if (!forSuper) {
        mCustomPager.forSuper(true);
        mCustomPager.setCurrentItem(item);
        mCustomPager.forSuper(false);
    }
    super.setCurrentItem(item);

}

} 
```

并且您必须在设置适配器之前以及在使用 ID 获取参考之后设置这样的寻呼机。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    backPager=(CustomPager) findViewById(R.id.BackPager);
    frontPager = (CustomPager) findViewById(R.id.frontPager);
    frontPager.setViewPager(backPager);
    backPager.setViewPager(frontPager);
    backPager.setAdapter(your Adapter);
    frontPager.setAdapter(your Adapter);
} 
```

必须在分配适配器之前设置 ViewPagers。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-04T11:07:51.207

我有一个类似的问题，还需要将我的同步与`PageTransformer`.

最初在这里发布了这个答案：[https ://stackoverflow.com/a/43638796/2867886](https://stackoverflow.com/a/43638796/2867886)

但为方便起见，我将其粘贴在这里。

最适合我的解决方案是`MotionEvent`在实例`OnTouchListener`之间传递。`ViewPager`尝试过假拖动，但它总是很慢而且有问题——我需要一个平滑的、类似视差的效果。

所以，我的建议是实施一个`View.OnTouchListener`. `MotionEvent`必须缩放以补偿宽度的差异。

```
public class SyncScrollOnTouchListener implements View.OnTouchListener {

private final View syncedView;

public SyncScrollOnTouchListener(@NonNull View syncedView) {
    this.syncedView = syncedView;
}

@Override
public boolean onTouch(View view, MotionEvent motionEvent) {
    MotionEvent syncEvent = MotionEvent.obtain(motionEvent);
    float width1 = view.getWidth();
    float width2 = syncedView.getWidth();

    //sync motion of two view pagers by simulating a touch event
    //offset by its X position, and scaled by width ratio
    syncEvent.setLocation(syncedView.getX() + motionEvent.getX() * width2 / width1,
            motionEvent.getY());
    syncedView.onTouchEvent(syncEvent);
    return false;
}
} 
```

然后将其设置为您的`ViewPager`

```
 sourcePager.setOnTouchListener(new SyncScrollOnTouchListener(targetPager)); 
```

请注意，此解决方案仅在两个寻呼机具有相同方向时才有效。如果您需要它适用于不同的方向 - 调整`syncEvent`Y 坐标而不是 X。

我们还需要考虑一个问题——最小的投掷速度和距离，这可能会导致只有一个寻呼机改变页面。

它可以通过添加`OnPageChangeListener`到我们的寻呼机轻松修复

```
sourcePager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset,
                                   int positionOffsetPixels) {
            //no-op
        }

        @Override
        public void onPageSelected(int position) {
            targetPager.setCurrentItem(position, true);
        }

        @Override
        public void onPageScrollStateChanged(int state) {
            //no-op
        }
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T14:42:55.317

这一切都正确，*除了*它有时会错过从属视图上的非常快速的轻弹。但是，出于某种原因，包括在稳定阶段的虚假阻力事件会导致真正的问题。

```
private ViewPager mNavPager;

private ViewPager mMainPager;

private final OnPageChangeListener mNavPagerListener = new OnPageChangeListener() {

    private int mLastScrollPosition;
    private int mLastPagePosition;

    @Override
    public void onPageSelected(int position) {
        mLastPagePosition = position;
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        if(mMainPager.isFakeDragging()) {
            int absoluteOffsetPixels = positionOffsetPixels;
            if(mLastPagePosition!=position) {
                absoluteOffsetPixels += (position - mLastPagePosition) * mMainPager.getWidth();
                mLastPagePosition = position;
            }
            Log.d(TAG, "fake nav drag by " + (mLastScrollPosition - absoluteOffsetPixels));
            mMainPager.fakeDragBy(mLastScrollPosition - absoluteOffsetPixels);
            mLastScrollPosition = positionOffsetPixels;
        }
    }

    @Override
    public void onPageScrollStateChanged(int state) {
        if(!mNavPager.isFakeDragging()) {
            switch(state) {
            case ViewPager.SCROLL_STATE_DRAGGING:
                if(!mMainPager.isFakeDragging())
                    mMainPager.beginFakeDrag();
                break;
            case ViewPager.SCROLL_STATE_SETTLING:
            case ViewPager.SCROLL_STATE_IDLE:
                if(mMainPager.isFakeDragging()) {
                    mMainPager.endFakeDrag();
                    mLastScrollPosition = 0;
                }
                break;
            }
        }
    }
};

private OnPageChangeListener mMainPagerListener = new OnPageChangeListener() {

    private int mLastScrollPosition;
    private int mLastPagePosition;

    @Override
    public void onPageSelected(int position) {
        mLastPagePosition = position;
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        if(mNavPager.isFakeDragging()) {
            int absoluteOffsetPixels = positionOffsetPixels;
            if(mLastPagePosition!=position) {
                absoluteOffsetPixels += (position - mLastPagePosition) * mMainPager.getWidth();
                mLastPagePosition = position;
            }
            Log.d(TAG, "fake nav drag by " + (mLastScrollPosition - absoluteOffsetPixels));
            mNavPager.fakeDragBy(mLastScrollPosition - absoluteOffsetPixels);
            mLastScrollPosition = positionOffsetPixels;
        }
    }

    @Override
    public void onPageScrollStateChanged(int state) {
        if(!mMainPager.isFakeDragging()) {
            switch(state) {
            case ViewPager.SCROLL_STATE_DRAGGING:
                if(!mNavPager.isFakeDragging())
                    mNavPager.beginFakeDrag();
                break;
            case ViewPager.SCROLL_STATE_SETTLING:
            case ViewPager.SCROLL_STATE_IDLE:
                if(mNavPager.isFakeDragging()) {
                    mNavPager.endFakeDrag();
                    mLastScrollPosition = 0;
                }
                break;
            }
        }
    }
}; 
```

**编辑**

我现在相信如果没有一些相当大量的自定义代码，这是不可能的。原因本质上是两个`ViewPager`s都有一个`VelocityTracker`内部，它控制滚动。由于`MotionEvent`传入的 s 可能不会在`VelocityTracker`每个寻呼机的相同相对时间传递给 s，因此跟踪器偶尔会就如何反应得出不同的结论。

但是，*可以*使用 modified`PagerTitleStrip`来精确跟踪 a `ViewPager`，并将条带捕获的触摸事件直接传输到`ViewPager`.

[的来源在`PagerTitleStrip`这里。](https://github.com/android/platform_frameworks_support/blob/master/v4/java/android/support/v4/view/PagerTitleStrip.java)

概括地说，要完成这项工作需要做如下：替换`mPrevText`，`mCurrText`并`mNextText`使用您要使用的类型的视图；删除`onAttachedToWindow()`and`onDetachedFromWindow()`函数；`PagerAdapter`删除对处理数据集观察者的调用，并`OnTouchListener`在修改后的条带中添加一个假拖动主寻呼机。您还需要将修改后的标题条添加为 an `OnPageChangeListener`，`ViewPager`因为内部侦听器在包外不可见。

这是巨大的痛苦吗？是的。但它有效。我会尽快把它写得更详细。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-04T09:09:32.403

在所有其他答案的帮助下，我创建了一个类，因此可以轻松实现它。

```
 public class OnPageChangeListernerSync implements ViewPager.OnPageChangeListener {

    private ViewPager master;
    private ViewPager slave;
    private int mScrollState = ViewPager.SCROLL_STATE_IDLE;

    public OnPageChangeListernerSync(ViewPager master, ViewPager slave){
        this.master = master;
        this.slave = slave;
    }

    @Override
    public void onPageScrolled(final int position, final float positionOffset, final int positionOffsetPixels) {
        if (mScrollState == ViewPager.SCROLL_STATE_IDLE) {
            return;
        }
        this.slave.scrollTo(this.master.getScrollX()*
                this.slave.getWidth()/
                this.master.getWidth(), 0);
    }

    @Override
    public void onPageSelected(final int position) {

    }

    @Override
    public void onPageScrollStateChanged(final int state) {
        mScrollState = state;
        if (state == ViewPager.SCROLL_STATE_IDLE) {
            this.slave.setCurrentItem(this.master
                    .getCurrentItem(), false);
        }
    }
} 
```

...

```
// In your activity
this.upperPager.addOnPageChangeListener(new OnPageChangeListernerSync(this.upperPager, this.lowerPager));

this.lowerPager.addOnPageChangeListener(new OnPageChangeListernerSync(this.lowerPager, this.upperPager)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-11T10:52:17.847

在某些情况下，所有答案都大致正确。在这里，我再给出一个答案，用于**同时滑动两个 ViewPagers，无论大小是否相同**：

```
viewPagerBanner.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
    private int scrollState = ViewPager.SCROLL_STATE_IDLE;
    // Indicates that the pager is in an idle, settled state. 
    // The current page is fully in view and no animation is in progress.

    @Override
    public void onPageScrolled(int position, float positionOffset, 
                               int positionOffsetPixels) {
        if (scrollState == ViewPager.SCROLL_STATE_IDLE) {
            return;
        }
        viewPagerTitle.scrollTo(viewPagerBanner.getScrollX()*
                                viewPagerTitle.getWidth()/
                                viewPagerBanner.getWidth(), 0);
        // We are not interested in Y axis position
    }

    @Override
    public void onPageSelected(int position) {}

    @Override
    public void onPageScrollStateChanged(int state) {
        scrollState = state;
        if (state == ViewPager.SCROLL_STATE_IDLE) {
            viewPagerTitle.setCurrentItem(viewPagerBanner.getCurrentItem(), false);
        }
    }
}); 
```

# java - 如何将 SWIGTYPE_p... 重命名为更友好的名称？

> ID：16107018
> 
> 赞同：0
> 
> 时间：2013-04-19T14:29:32.930
> 
> 标签：java, c++, swig

我有一个 c++ 函数返回一个 uint8_t* 数组，如：

```
uint8_t* getData(); 
```

Swig 将其映射到 SWIGTYPE_p_unsigned_char。我想要一个更友好的名字。在我的 .i 文件中，我只是简单地包含了包含上述代码的 h 文件。我试过 %rename 但它不起作用：

```
%rename (SWIGTYPE_p_unsigned_char) u8_t;
%include "myhfile.h" 
```

如何强制 Swig 重命名我的类型（或以其他方式解决）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T13:24:47.173

在一般情况下，您可以[使用空定义](https://stackoverflow.com/questions/8189929/remove-swigtype-from-generated-class-name)[重命名`SWIGTYPE_p_...`](https://stackoverflow.com/questions/8189929/remove-swigtype-from-generated-class-name)以将其包装为不透明的“句柄”。

这个特定的实例看起来像你有一个标准的 typedef。您仍然可以按照链接的答案进行操作，例如：

```
%module test

%{
#include <stdint.h>
%}

typedef struct {
} uint8_t;

%inline %{
  uint8_t *getData() {
    static uint8_t d[5];
    return d;
  }
%} 
```

它丢失了 SWIGTYPE_ 前缀，可以用作：

```
public class run {
  public static void main(String[] argv) {
    System.loadLibrary("test");
    test.getData();
  }
} 
```

然而这并不理想：

1.  无法访问返回的数组（您可能希望在 Java 中访问该数据，而不仅仅是传递它）
2.  更严重的是，它会干扰您在同一界面中拥有的任何其他数组，甚至可能干扰字符串处理

更好的解决方案可能是使用 SWIG carrays.i 接口来包装它并使用无界数组类来精确复制您在 C++ 中的行为：

```
%module test

%{
#include <stdint.h>
%}

%include <stdint.i>
%include <carrays.i>

%array_class(uint8_t, U8_Array);

%typemap(jstype) uint8_t *getData "U8_Array"
%typemap(javaout) uint8_t *getData {
  return new $typemap(jstype,uint8_t *getData)($jnicall,$owner);
}

%inline %{
  uint8_t *getData() {
    static uint8_t d[5];
    return d;
  }
%} 
```

你的返回类型现在将来自[carrays.i](http://www.swig.org/Doc2.0/Library.html#Library_carrays)并且有一个`getitem`and`setitem`方法。

实际上，您可以使用`jstype`and`javaout`类型映射将结果（转换为 a 的指针`long`）映射到*任何*Java 类型，它不必来自 carrays.i ，这恰好是一个非常有用的案例。或者，如果您愿意，也可以编写 JNI 代码，直接将其作为 Java 数组返回。

如果您*先验*地知道数组的大小，则可以采取措施将其包装为 Java 中的有界而不是无界数组，例如[通过实现`AbstractList`](https://stackoverflow.com/a/8190135/168175).

# php - Symfony 生成一个白页

> ID：16107020
> 
> 赞同：7
> 
> 时间：2013-04-19T14:29:38.553
> 
> 标签：php, symfony-1.4

我试图在我的服务器上集成一个 symfony 项目，但它会产生一个空白页面，即使我在 php 中显示错误，它也不会产生任何错误。在我在 index.php 中包含配置文件后，没有任何效果，当我尝试此操作时，即使项目配置文件第一行中的 die 也不会打印。

我的 index.php 文件是

```
error_reporting(E_ALL);

    ini_set('display_errors', "1");

    require_once(dirname(__FILE__).'/../config/ProjectConfiguration.class.php');

    $configuration = ProjectConfiguration::getApplicationConfiguration('frontend', 'prod', false);
    sfContext::createInstance($configuration)->dispatch(); 
```

我在这里也包括项目配置文件，请检查一下

```
require_once dirname(__FILE__).'/../lib/symfony/autoload/sfCoreAutoload.class.php';
sfCoreAutoload::register();

class ProjectConfiguration extends sfProjectConfiguration
{
public function setup()
      {
        // ...

        $this->dispatcher->connect('request.filter_parameters', array($this, 'filterRequestParameters'));
      }

      public function filterRequestParameters(sfEvent $event, $parameters)
      {
        $request = $event->getSubject();
        if (preg_match('|Safari/([0-9\.]+)|', $request->getHttpHeader('User-Agent')))
        {
          $request->setRequestFormat('html');
        }

        return $parameters;
      }
} 
```

我在项目的 lib 文件夹中包含了 symfony 文件夹。

即使我在开发模式下尝试过它也不会产生任何错误，也请不要说我已经为所有文件提供了完全权限，包括缓存和日志文件夹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-19T05:32:41.723

Set permission to cache and log folder

```
chmod 777 cache/ log/ -R
php symfony cc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T20:27:05.697

这也发生在我身上一次，我创建了一条路线`/media`，这条路线给出了一个白页。

很长一段时间后，我意识到这`/media`也是一个现有的资产目录。资产目录具有优先权。

# ruby - 使用 mixin 覆盖类方法

> ID：16107022
> 
> 赞同：0
> 
> 时间：2013-04-19T14:29:46.180
> 
> 标签：ruby, sorting

我有一个 4-dimensional `NArray`，并且我正在覆盖`#each`，以便它只迭代一个维度，然后使用,等`include Enumerable`功能。但是，仍然迭代每个单独的元素，而不是我选择的维度。`#reject``#inject``#sort`

有没有办法明确使用`Enumerable`'s`#sort`方法，还是我必须自己写？我只需要调用一次（到目前为止），所以它可能有点奇怪或不方便。

**注意**：我意识到[这个问题](https://stackoverflow.com/questions/12057940/overriding-instance-methods-of-a-class-by-mixing-in-a-module)似乎是重复的。但是，我不想总是覆盖`#sort`，而只是显式地调用`Enumerable`'s`#sort`方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:44:50.070

如果您`sort`在第一级调用，其元素是数组，那么`sort`将比较数组。为了比较数组，评估必须进入这些数组内部，这意味着它将遍历数组的每一级。在避免迭代到子级别的同时比较数组元素是没有意义的。因此，如果这是您要尝试做的事情，那就没有办法了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:05:59.740

NArray 已经有`#sort`方法，并且现有方法不会通过`include`. 在 Ruby 2.0 中，您可以`prepend`使用`include`.

# hibernate - 使用带有休眠和普通 Java DSL 的 Apache Camel JPA 生产者

> ID：16107024
> 
> 赞同：1
> 
> 时间：2013-04-19T14:30:02.120
> 
> 标签：hibernate, jpa, apache-camel

我是 Camel 的新手，并且一直在尝试使用 Hibernate 轮询 XML 文件的目录并写入数据库。为了了解所有内容如何链接在一起，我想在将其移动到 Spring xml 配置之前使用直接的 Java DSL 将所有内容连接起来。我使用 bean 和我自己的方法让它完全按预期工作：

```
class MyRouteBuilder extends RouteBuilder {
    @Override
    public void configure() throws Exception {
        from("file://test")
        .bean(parser, "parseXml")
        .bean(parser, "store");
    }
} 
```

现在我想试试内置的 JPA 生产者，所以我把它改成了：

```
 class MyRouteBuilder extends RouteBuilder {
    @Override
    public void configure() throws Exception {
        from("file://test")
        .bean(parser, "parseXml")
        .to("jpa:soccerfeed?persistenceUnit=sportsstats");
    }
} 
```

但我得到了错误：

> 引起：org.hibernate.HibernateException：当没有可用的连接时必须设置“hibernate.dialect”

我试图将我的 CamelContext 与我的 persistence.properties 文件链接起来，该文件指定了我的 hibernate.dialect （适用于我的 bean）：

```
 public void setUp() throws Exception {

    final Properties persistenceProperties = new Properties();
    InputStream is = null;
    try {
        is = getClass().getClassLoader().getResourceAsStream("persistence.properties");
        persistenceProperties.load(is);
    } finally {
        if (is != null) {
            try {
                is.close();
            } catch (IOException ignored) {

            }
        }
    }

    entityManagerFactory = Persistence.createEntityManagerFactory("sportsstats", persistenceProperties);
    context = JAXBContext.newInstance("sportsstats");
}

    private void run() throws Exception {

            camelContext = new DefaultCamelContext();

            JpaComponent jpa = new JpaComponent();
    jpa.setEntityManagerFactory(entityManagerFactory);
    jpa.setCamelContext(camelContext);
    Endpoint jpaEndpoint = jpa.createEndpoint("jpa:soccerfeed");

    camelContext.addEndpoint("jpa:soccerfeed", jpaEndpoint);

            // Add some configuration by hand ...
            camelContext.addRoutes(new MyRouteBuilder());

            // Now everything is set up - lets start the context
            camelContext.start();

            // keep alive
            while(true) {
                Thread.sleep(10000);
            }
} 
```

如何让我在 Camel 中的 JPA 端点获取我在 persistence.properties 中的设置？

编辑：似乎替代方法是将属性从我的属性文件移动到我的 persistence.xml 文件中作为元素。但是，如果可能的话，我想避免这样做，因为它会使开发/产品版本的维护变得更加困难。有没有办法将 persistence.xml 链接到属性文件？（例如 <properties file="persistence.properties" /> 什么的？）

# ms-access - 将链接表数据写入 Word（从 Access）

> ID：16107025
> 
> 赞同：2
> 
> 时间：2013-04-19T14:30:16.077
> 
> 标签：ms-access, ms-word, vba

我修改了一些我看到的代码，它打开一个单词模板并通过用当前记录替换书签来填充它。一切正常，直到我尝试从链接（查找）表中写入内容，例如

表 A：

```
ID
Name
Description
JobType (lookup drop down list by JobTypeID in Table B) 
```

表 B：

```
JobTypeID
JobType 
```

表格 C：

```
ID
Name
Description
JobType 
```

这一切都按表格中的计划工作，并且在我单击一个按钮时最有效：

```
'code for connecting to word and opening templates works fine *snip*

With WordApp.Selection
    .Goto what:=wdGoToBookmark, Name:="bmName"
    .TypeText [Name] 
```

但是当我使用：

```
With WordApp.Selection
    .Goto what:=wdGoToBookmark, Name:="bmJobType"
    .TypeText [JobType] 
```

它不会写入存储在表格中或显示在表单下拉框中的作业类型.... 它写入链接中使用的 JobTypeID (1,2,3,4....)。

我也尝试过使用表单中的 me.JobTypeComboBox.value ，但这也会显示 ID。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:06:40.187

查阅字段存储一个值但显示不同的值。在您的情况下，您似乎想要显示的值而不是存储的值。两种方法来处理...

1.  使用`INNER JOIN` *Table B*到*Table A*的查询。然后包括`[Table B].JobType`在查询`SELECT`列表中应该会给你你想要的。
2.  使用`DLookup`表达式检索`[Table B].JobType`当前值`[Table A].JobType`

这种情况令人困惑，因为`[Table A].JobType`实际上是一个对应于 的数字`[Table B].JobTypeID`。在 中`[Table B]`，名为的字段`JobType`是别的东西......也许是一个文本字段。

希望这些细节对你来说比对我来说更容易混淆。如果这是我的应用程序，我会将其重命名`[Table A].JobType`为`[Table A].JobTypeID`简单的数字字段，而不是查找字段。并且可能还基于`JobTypeID`.

# python - Python：对象构造函数调用自身

> ID：16107026
> 
> 赞同：3
> 
> 时间：2013-04-19T14:30:16.230
> 
> 标签：python, multiple-inheritance, mixins

我遇到了以下代码。对象构造函数调用自身：

```
 class StatusMixin(object):
    def __init__(self):
        super(StatusMixin, self).__init__()

        self.does_something() 
```

这样做有什么实际原因吗？我认为人们`super`只在多重继承的上下文中使用该方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:36:45.067

你提到多重继承。这个类被描述为一个mixin：也就是说，它专门*用于*多重继承的情况。它将是类层次结构中的元素之一，但不是顶部或底部。这就是它调用的原因`super`——方法解析顺序中的下一项实际上不是`object`，而是其他一些类。

考虑这个层次结构：

```
class Super(object):
    pass

class Sub(StatusMixin, Super)
    pass 
```

并检查`Sub.mro()`：

```
[__main__.Sub, __main__.StatusMixin, __main__.Super, object] 
```

所以你看到这里 super 调用的结果`StatusMixin`根本不是`object`，而是`Super`.

# variables - 在 selenium IDE 中捕获变量 xpath

> ID：16107030
> 
> 赞同：-1
> 
> 时间：2013-04-19T14:30:31.140
> 
> 标签：variables, xpath, selenium, ide

我正在尝试捕获具有可变 xpath的元素（ **gmail中的删除按钮）。**

xpath 是这样的——

```
//*[@id=':rr']/div/div[4]/div[1]/div[1]/div[1]/div/div/div[2]/div[3] 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:36:19.173

不，这是 IDE 落后的地方，这是有充分理由的。它与其他“XPath-ified”（例如，使用 Firebug 中的“XPath”右键单击选项）工具只会*猜测*某物在 DOM 中的位置。

在那，我的意思是它会沿着树走，看看它在哪里，相对于其他元素，即它会沿着一组`tr`元素走，并且知道其中有 7 个，因此它会知道可以使用 访问第一个`[1]`，然后可以使用`[2]`etc 访问下一个...

它不知道，或者真的不知道什么是*独特*的，足以让你使用。这就是为什么要由你来弄清楚。

至于Gmail，我建议你要么退回到Gmail的基本模式——这样标记会更容易处理，或者完全停止，并使用你用来*直接*处理邮箱的任何语言的一组特定API帐户。

但是，如果您这样做，您将需要完全转储 IDE - 本质上这超出了 IDE 并且是您需要自己决定的合乎逻辑的事情。IDE 不是为此而设计的。

不过，提示将查看删除按钮*附近的内容。*附近是否有一个始终具有相同属性的静态元素？您可以获取*该*元素，然后通过 DOM 找到您的“删除按钮”。

# javascript - HTML 表单操作 URL - 将 JS 变量添加到 URL

> ID：16107032
> 
> 赞同：0
> 
> 时间：2013-04-19T14:30:43.187
> 
> 标签：javascript, html, forms, submit, concatenation

我有一个 JS 变量，它保存 PHP 变量的值。

```
<script>
var xxxx = "<?= $v2 ?>";
</script> 
```

我还有一个指向 superman.php 的表格

```
<form action="superman.php" method="get" target="_blank"> 
```

我需要修改 superman.php 使其保持：

1.  表单中元素的值

2.  **还有 javascript 变量**

我如何实现这一目标？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:33:23.230

您可以附加隐藏的输入：

```
addDataToForm('xxxx', xxxx);

function addDataToForm(name, value){
  var form = document.getElementsByTagName('form')[0];
  var hidden = document.createElement('input');
  hidden.type = 'hidden';
  hidden.name = name;
  hidden.value = value;
  form.appendChild(hidden);
} 
```

# css - CSS code priority

> ID：16107033
> 
> 赞同：1
> 
> 时间：2013-04-19T14:30:43.543
> 
> 标签：css

I want to load a css code from a specific stylesheet first, Like:

```
ul, ol {
    margin: 0 0 10px 25px;
    padding: 0;
} 
```

the above code is in two files: `core.css` and `bootstrap.css`

`core.css` load first in head tag.

But browser always use code first from `bootstrap.css`.

I tried to rename `bootstrap.css` to `z-bootstrap.css`. But no luck still browser apply styles from `z-bootstrap.css` It work when I edit `ul, ol` to `body ul, body ol` in `core.css`

But I dont want to do this, How to apply styles from `core.css` without adding any class or attribute.???

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:33:05.247

In your declaration, have `core.css` below/after `bootstrap.css`

example:

```
<link rel="stylesheet" type="text/css" href="bootstrap.css">
<link rel="stylesheet" type="text/css" href="core.css"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:35:59.257

The order of css application does not always depend on the include order, but on the level of specificity:

[http://www.w3.org/TR/CSS21/cascade.html#specificity](http://www.w3.org/TR/CSS21/cascade.html#specificity)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T14:33:13.713

You need to load `core.css` after `bootstrap.css` in order for the rules in `core` to override `bootstrap`.

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-19T14:34:37.473

Try to put `!important` at the end

```
ul, ol {
margin: 0 0 10px 25px !important;
padding: 0 !important; 
```

}

That will give priority

# python-2.7 - Python pip 不工作并给出异常 urlopen 错误 [错误 10051]

> ID：16107035
> 
> 赞同：0
> 
> 时间：2013-04-19T14:30:45.060
> 
> 标签：python-2.7, pip

我正在 Windows XP 32 位计算机上使用 Python 2.7（32 位）设置环境。

Python 2.7 安装顺利（我使用了 Windows 安装程序）。在此之后，我安装了 setuptools（也使用 Windows 安装程序）并随后安装了 pip（我将 pip tar 文件解压缩到一个目录中，然后运行`python setup.py install`）。

我还安装了 Apache 和 mod_wsgi，对它们进行了配置，并用 Python 编写了一个简单的页面，该页面由 Web 服务器正确显示。

到目前为止，一切都很好。现在我想`virtualenvwrapper-win`使用 pip 安装。由于我在代理后面，所以我使用了`--proxy`. 我的命令行如下所示：

```
pip install --verbose --proxy myproxy --use-mirrors --timeout 240 --download D:\cache virtualenvwrapper-win 
```

在这里，我多次收到相同的错误消息：

```
Could not fetch URL http://c.pypi.python.org/simple/virtualenvwrapper-win/: <urlopen error [Errno 10051] A socket operation was attempted to an unreachable network.> 
```

最后：

```
 DistributionNotFound: No distributions at all found for virtualenvwrapper-win 
```

在花了 4 个小时试图解决这个问题后，我不知道如何继续。

请注意，使用 Python 2.7 64 位的相同步骤完全没有问题（我让 virtualenv 在几分钟内运行）。我使用 Python 32 位的原因可以[在](http://code.google.com/p/modwsgi/wiki/DownloadTheSoftware?tm=2)**Windows Binary Downloads**部分找到。

任何提示出了什么问题`pip install`都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:52:27.263

尝试将`-r`选项与`https://crate.io`. Crate 是一个很棒的网站，它也反映了 PyPI，并且非常可靠。它每 2 分钟与 PyPI 同步一次，所以它应该是最新的，除非你刚刚发布了一个包。

# jquery - 微小的滚动条问题：如何在滚动条上使用边框

> ID：16107045
> 
> 赞同：0
> 
> 时间：2013-04-19T14:31:17.503
> 
> 标签：jquery, html, css, scrollbar, tinyscrollbar

我需要为我的滚动条定义一个边框，但是使用 Tiny Scrollbar，当我这样做时，我得到一个不正确的滚动高度值。如果我使用填充，我会得到同样的错误。我该如何解决？

```
.scrollable .track {
    background-color: #D8EEFD;
    height: 100%;
    width:13px;
    position: relative;
    border-radius:6px;
    border:1px solid #fff;
} 
```

[http://jsfiddle.net/qYMrN/](http://jsfiddle.net/qYMrN/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:42:30.527

好吧，我认为“错误”是添加边框时滚动条不适合 200px 窗口。我想出了以下解决方案。

首先 CSS 将高度设置为 198 像素以考虑边框。

```
.scrollable .track { background-color: #D8EEFD; width:13px; position:relative; height:198px; border-radius:6px; border:1px solid #fff;} 
```

JQuery 告诉插件高度是198px

```
$(".scrollable").tinyscrollbar({ size: 198 }); 
```

这占了 1px 边框（必须计算 x2 作为顶部和底部）结果如下。

[小提琴](http://jsfiddle.net/qYMrN/3/)

# regex - Urllib html 未显示

> ID：16107053
> 
> 赞同：0
> 
> 时间：2013-04-19T14:31:52.703
> 
> 标签：regex, python-3.x, request, urllib

当我使用 Urllib 模块时，我可以第一次调用/打印/搜索网站的 html，但是当我再次尝试时，它就消失了。如何在整个程序中保留 html。

例如，当我尝试：

* * *

```
html = urllib.request.urlopen('http://www.bing.com/search?q=Mike&go=&qs=n&form=QBLH&filt=all&pq=mike&sc=8-2&sp=-1&sk=')
search = re.findall(r'Mike',str(html.read()))

search 
```

* * *

我得到：

['迈克'，'迈克'，'迈克'，'迈克']

* * *

但是当我第二次尝试这样做时：

```
results = re.findall(r'Mike',str(html.read())) 
```

* * *

我得到：

```
[] 
```

当调用“结果”时。

为什么会这样，我怎样才能阻止它发生/修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:02:01.843

在不精通python的情况下，我猜`html.read()`会读取http流，因此当您第二次调用它时，没有什么可读取的。

尝试：

```
html = urllib.request.urlopen('http://www.bing.com/search?q=Mike&go=&qs=n&form=QBLH&filt=all&pq=mike&sc=8-2&sp=-1&sk=')
data = str(html.read())
search = re.findall(r'Mike',data)
search 
```

然后使用

```
results = re.findall(r'Mike',data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:51:19.367

除了您只能读取一次流的@rvalik 的正确猜测之外，这`data = str(html.read())`是不正确的。 `urlopen`返回一个`bytes`对象并`str`返回该对象的显示表示。一个例子：

```
>>> data = b'Mike'
>>> str(data)
"b'Mike'" 
```

您应该做的是`bytes`使用 HTML 页面的编码（在本例中为 UTF-8）解码对象：

```
from urllib.request import urlopen
import re

with urlopen('http://www.bing.com/search?q=Mike&go=&qs=n&form=QBLH&filt=all&pq=mike&sc=8-2&sp=-1&sk=') as html:
    data = html.read().decode('utf8')

print(re.findall(r'Mike',data)) 
```

或使用字节对象搜索：

```
from urllib.request import urlopen
import re

with urlopen('http://www.bing.com/search?q=Mike&go=&qs=n&form=QBLH&filt=all&pq=mike&sc=8-2&sp=-1&sk=') as html:
    data = html.read()

print(re.findall(rb'Mike',data)) 
```

# android - 在按钮单击上显示/隐藏列表视图

> ID：16107068
> 
> 赞同：0
> 
> 时间：2013-04-19T14:32:11.883
> 
> 标签：android, listview, buttonclick

```
final ImageView patientAllergyImage = (ImageView) findViewById(R.id.image);
patientAllergyImage.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        patientAllergyImage.setImageDrawable(getResources().
                getDrawable(R.drawable.nav_down_green));
        List.setVisibility(View.GONE);
    }
}); 
```

我正在制作要隐藏的列表，但是当我单击同一个按钮时如何显示它。我不能保持一个布尔值来检查它是否被点击，就像它说的那样......`The final local variable clicked cannot be assigned, since it is defined in an enclosing type`既不是一个`non` `final`变量

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T14:41:47.757

试试这个，

```
 public void onClick(View V){
        patientAllergyImage.setImageDrawable(getResources().
                getDrawable(R.drawable.nav_down_green));
        List.setVisibility(List.isShown() ? View.GONE : View.VISIBLE); 
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T14:37:07.927

您可以使用工具按钮代替典型按钮[来](http://developer.android.com/guide/topics/ui/controls/togglebutton.html)实现此目的

```
ToggleButton toggle = (ToggleButton) findViewById(R.id.togglebutton);
toggle.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if (isChecked) {
            // hide the listview
        } else {
            // show the listview
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T14:41:03.853

尝试这样的事情：

```
 public void onClick(View v) {
       // TODO Auto-generated method stub
       patientAllergyImage.setImageDrawable(getResources().
          getDrawable(R.drawable.nav_down_green));

       if(List.getVisibility()==View.VISIBLE){
          List.setVisibility(View.INVISIBLE)
       }else{
          List.setVisibility(View.VISIBLE)
       }
    } 
```

如果需要，将 INVISIBLE 替换为 GONE。希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T14:37:55.607

删除`final`布尔变量或试试这个

试试这个

```
 if(List.getVisibility()==View.GONE)
        {
             List.setVisibility(View.VISIBLE);
        }
        if(List.getVisibility()==View.VISIBLE)
        {
             List.setVisibility(View.GONE);
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T15:05:45.167

似乎这里有几个问题。

首先，您不应该将您的列表视图称为“列表”，这会掩盖名为列表的真实类。

1.  如果你被困在一个不错的变量名上，最好使用带有小写“l”的“listView”。

2.  你不需要在任何地方都使用 final 。

3.  请改用 setImageResource 来保持代码的整洁和可读性。

4.  可读时使用 ?true:false 语法

    ```
    ImageView patientAllergyImage = (ImageView) findViewById(R.id.image);
    patientAllergyImage.setOnClickListener(new OnClickListener() {

      @Override
      public void onClick(View v) {

      //see if the list view is visible
      bool bVisible = listView.getVisibility();

      //select the image resource
      int iImageRes = bVisible?R.drawable.nav_down_green:R.drawable.nav_up_green;

      //Toggle Image
      (ImageView)v.setImageResource(iImageRes);

      //Toggle List Visibility
      listView.setVisibility(bVisible?View.GONE:View.VISIBLE);

      }

    }); 
    ```

# android - 裁剪图像并调整其大小以在列表中使用

> ID：16107072
> 
> 赞同：1
> 
> 时间：2013-04-19T14:32:36.557
> 
> 标签：android, image, resize, crop, image-size

我需要裁剪和居中图像以制作列表的缩略图，但我希望缩略图的大小与屏幕大小成正比，以便当列表显示在平板电脑或手机上时，图像可以是可察觉的。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:37:52.043

您可以使用 an`ImageView`来显示缩略图。在布局 XML 中设置大小`ImageView`，您可以按照以下指南为每个屏幕大小设置不同的大小：http: [//developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

`ImageView`通过将正确的属性`android:scaleType`设置为`ImageView`. 可以在这里找到可用的比例类型：http: [//developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

这应该够了吧。

# apache - Apache 移植 xampp 更改 - 这正常吗？

> ID：16107073
> 
> 赞同：2
> 
> 时间：2013-04-19T14:32:49.493
> 
> 标签：apache, xampp, ports

它显然不会引起任何问题，但我想知道，为什么我的 apache 会像我改变主意一样改变他的端口。^^

当我启动控制面板并启动 apache 时，它​​从标准端口 80,443 开始，但是当我在 localhost 上进行一些调用时，端口会发生变化。目前是 64,49616,49855。

这是一种批判性行为还是正常行为？;o)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:44:56.743

Apache 在运行时不应更改端口。当它启动时，它会尝试绑定到其配置的端口（在本例中为 80 和 443）。通常这可能是一个问题，尤其是在端口 < 1024 受限的 Linux/Mac 环境中（只有 root/admin 进程可以绑定到这些端口），这就是默认 XAMPP Apache 端口通常是 8080 和 8443 的原因。

请注意，每当浏览器连接到给定的远程主机：端口（即使该主机是 127.0.0.1 aka localhost）时，它都必须为 TCP 连接创建一个本地端口，该端口（通常）是从用户中随机选择的 -空间集（范围 1024-65535）。如果您只是“netstat -n”您的连接，您会发现本地 127.0.0.1:45678 连接到远程 127.0.0.1:80（如果 45678 是随机分配的本地端口）。请注意，本地端口在每个连接上都会发生变化（每次页面刷新，除非 KeepAlive 处于打开状态），这无关紧要。另请注意，连接的目的地称为“远程”，即使它是 localhost/127.0.0.1 环回地址。

# javascript - JavaScript 错误，之后缺少名称。操作员

> ID：16107074
> 
> 赞同：8
> 
> 时间：2013-04-19T14:32:52.660
> 
> 标签：javascript

我正在尝试获取隐藏跨度的 innerHTML。JavaScript 来自 iframe HTML 页面，隐藏的 span 位于父页面中。从父级访问列表的内容时，一个不同的功能起作用，但我似乎无法达到我的跨度......

作品

```
document.getElementById(parent.genL[i]); 
```

不工作

```
document.getElementById(parent."span"+i).innerHTML;
- SyntaxError: missing name after . operator 
```

上面的代码行位于一个 for 循环中，当它遍历 i 时，它将从每个单独的 span 中获取数据。隐藏跨度从 ID“span1”开始，通过超过 10-40k 个不同的隐藏跨度。

无论如何，我有一种感觉，它必须尝试连接字符串 int i。我假设我是一个 int 反正。有什么想法吗？非常感谢大家！

编辑 - 单词，并将 innerHTML 部分添加到不起作用的代码行中。不确定这是否会有所作为...

Edit2 - 每个人的答案都很好，学到了一些很好的语法技巧:) 我只是移动了父母。mplungjan 的评论和 Jacob T. Nielson 的回答所推荐的代码前面的部分。出于某种原因，我仍然按照建议使用括号出现错误，但我肯定会将括号塞进我的记忆中，以备将来类似情况！

```
parent.document.getElementById("span"+i).innerHTML; 
```

:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:34:29.200

尝试将其更改为索引器。

```
document.getElementById(parent["span"+i]); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T14:34:44.233

如果`parent`括号中的 是一个对象，并且您试图访问类似的东西，`parent.span1`那么您需要使用括号表示法而不是点。

`document.getElementById(parent["span"+i]);`应该可以正常工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-19T14:49:25.187

我认为您要做的是在父页面上获取第 i 个 span 元素。正确的？

你可以这样做

```
var s = parent.document.getElementsByTagName('span')[i];
s.innerHTML // <-- access innerHTML 
```

# java - 将 .jks 信任库和密钥库转换为 ios

> ID：16107076
> 
> 赞同：3
> 
> 时间：2013-04-19T14:32:54.367
> 
> 标签：java, ios, xcode, ssl, https

我创建了一个 java web 服务，它将使用服务器端的 restlet 与 iPad 通信，该服务器端通过 HTTPS 进行通信并进行相互身份验证。我使用本指南生成了两个 .jks 密钥库

[http://www.herongyang.com/JDK/ssl_client_auth.html](http://www.herongyang.com/JDK/ssl_client_auth.html)

我已经在java中实现了一个用于测试目的的客户端，一切都很好。

我假设不可能在 ios 中使用 .jks 格式，所以我应该将 client.jks 转换为 pkcs12 文件以使其与 ios 兼容吗？

我很难找到有关这方面的信息。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:47:12.703

将 .jks 转换为 pkcs12 听起来不错。iOS 配置门户生成的证书可以（通过 KeyChain Access）导出为 pkcs12 格式，因此可以安全地假设此格式与 iOS 兼容。

您可以使用[keytool](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html)将您的 jks 转换为 pkcs12。我以相反的方向使用它（将从Apple获得的pkcs12文件转换为jks），它也应该在您的情况下没有问题。

这个命令应该可以解决问题：

```
keytool -importkeystore -srckeystore input.jks -destkeystore output.p12 -srcstoretype JKS -storetype PKCS12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:47:28.553

如果我正确理解你的情况，我可能不会，你根本不需要更改 .jks。应用程序的 KeyStore 只是系统使用的证书容器。要在 IOS 上实现证书集成，您可能必须将客户端和 ca 证书添加到本地系统密钥链（查看：[iOS：在密钥链中预安装 SSL 证书 - 以编程](https://stackoverflow.com/questions/5323686/ios-pre-install-ssl-certificate-in-keychain-programmatically)方式），但 JKS 本身应无需修改即可转移到其他平台必需的。

此外，这里是一个在 IOS 上使用密钥库来执行苹果推送通知的示例。[iOS 推送通知 - JavaPNS - keystore.p12 文件安全性](https://stackoverflow.com/questions/11944347/ios-push-notification-javapns-keystore-p12-file-security) 如果您想以与此人完全相同的方式进行操作（使用本地 p12 而不是加载的存储），只需按照此处的说明进行操作：[将 .jks 转换为 p12](https://stackoverflow.com/questions/2846828/converting-jks-to-p12)

有关这些文件之间差异的更多信息，请查看：[Difference between .keystore file and .jks file](https://stackoverflow.com/questions/8985685/difference-between-keystore-file-and-jks-file)

祝你的项目好运。

# php - PHP 中的正则表达式行为异常

> ID：16107089
> 
> 赞同：0
> 
> 时间：2013-04-19T14:33:24.057
> 
> 标签：php, regex, preg-replace

所以，我有某种数据库，我使用正则表达式来处理所有这些行。但问题是电子邮件部分可能没有或没有单个“@”符号。我决定将@放在域之前（它们并不多），然后删除所有我不需要的@。我使用了一些在线正则表达式构造函数——比如这个[http://www.phpliveregex.com/](http://www.phpliveregex.com/)。我得到以下正则表达式将@放在域之前：

```
preg_replace("/(dodgit|trashymail|pookmail|spambob|mailinator)/", "@$1", $myline); 
```

但它只是行不通。例如：

```
CynthiaELopezdodgit.com 
```

在这个脚本之后不会改变。

有什么问题？我是 PHP 新手，如果问题真的很愚蠢，我很抱歉:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T14:37:36.373

您需要获取返回值

```
$newLine = preg_replace("/(dodgit|trashymail|pookmail|spambob|mailinator)/", "@$1", $myline); 
```

$newLine 将包含带有@ 的电子邮件，$myline 将继续保留没有@ 的电子邮件。preg_replace 不会改变原始变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:39:51.110

您的正则表达式工作正常。我会检查以确保您正在查看正确的变量。`preg_replace`不会覆盖变量，而是返回它。

对于一个工作示例：[http ://codepad.org/PSxK7Jtv](http://codepad.org/PSxK7Jtv)

# git - 如何检查某人上次在我的 git 存储库中提交代码的时间

> ID：16107091
> 
> 赞同：0
> 
> 时间：2013-04-19T14:33:30.483
> 
> 标签：git, github

如何检查有人上次在我的 git 存储库中提交代码的时间。

我需要一种快速简便的方法来查看我的开发人员最后一次提交到我的 git repo 的时间，我知道我可以使用以下内容查看提交的数量，但我需要每个开发人员最后一次提交的日期/时间

```
git pull  -v; git shortlog -s -n -e 
```

请帮助我.. 我需要一种东方的方式来找出我的每个开发人员最后一次提交的时间。

shortlog 很棒，但我还需要每个开发人员提交的最后时间/日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:35:18.623

这会让你开始。它显示提交时间，然后在下一行显示摘要。

```
git shortlog -sne |awk '{print $1,$2,$3,system("git log -n1 --format=%cd --author=" $2)}' 
```

它看起来很糟糕，最后包含一个额外的 0，但它确实为您提供了您所要求的。

# php - 使用 php 和 cURL 转发多部分表单数据

> ID：16107093
> 
> 赞同：2
> 
> 时间：2013-04-19T14:33:32.147
> 
> 标签：php, post, curl, proxy, multipartform-data

我正在使用 cURL 在 PHP 中开发一个小型代理。它必须接收来自客户端的 http 请求，对这些请求进行一些统计，将请求转发到 Web 服务器并将响应转发给客户端。GET 请求和带有 text/html 数据的 POST 请求一切正常。

我在使用 multipart/form-data 数据转发请求时遇到问题，特别是我在 $_POST 和 $_FILES 全局变量中都有数据。

我应该如何使用这两个变量将请求转发到服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:38:18.720

您需要先将文件存储在服务器中，然后使用如下代码：

```
<?php
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_VERBOSE, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, true);
    $post = array(
        "file_box"=>"@/path/to/myfile.jpg",
    );
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
    $response = curl_exec($ch);
?> 
```

# powershell - 我可以从远程会话启动远程 powershell 会话吗？

> ID：16107100
> 
> 赞同：3
> 
> 时间：2013-04-19T14:33:44.107
> 
> 标签：powershell

我可以使用以下命令成功远程访问我们企业中 的一台机器（ **ComputerA** ） 现在我可以在此会话中`Enter-PSSession` 启动新的**ComputerB**吗？我做不到。我收到以下错误：`Enter-PSSession`

 **```
Remote host method PushRunspace is not implemented.
    + CategoryInfo          :
    + FullyQualifiedErrorId : System.Management.Automation.Remoting.PSRemotingDataStructureException,Microsoft.PowerSh
   ell.Commands.EnterPSSessionCommand 
```

我能够从 ComputerA 上的 powershell 提示符启动**会话**到**ComputerB**。

这甚至可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T15:22:29.957

`Enter-PSSession`不支持在另一个交互式会话中。相反，尝试`Invoke-Command`在交互式会话中在远程计算机上运行命令。

```
PS C:\> Enter-PSSession -ComputerName Server-02
[Server-02]: PS C:\> Invoke-Command -ComputerName Server-03 -ScriptBlock { GCI C:\ } -Credential (Get-Credential) 
```**

# c# - 在c#中查找段落中重复频率最高的单词

> ID：16107102
> 
> 赞同：-8
> 
> 时间：2013-04-19T14:33:51.890
> 
> 标签：c#, string, parsing

我想在段落中创建一个单词映射。例如; 我的字符串是“去面包约翰昨天去是音乐音乐......”。该字符串中的单词映射：music=2，go=2，bread=1，John=1，昨天=1。单词后缀将被视为公共词根。（例如 musics=music）。我在 C# 中进行编码的这个主题怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:43:28.627

关于后缀，这只是寻找一个`s`，您可以修改以寻找其他后缀。

```
string words = "go bread John yesterday going is music musics";
List<string> wordroots = words.Split(new [] {" "}, StringSplitOptions.RemoveEmptyEntries).ToList();
var rootcount = wordroots
    .Select(wr =>
    {
        if (wr.EndsWith("s"))
            wr = wr.Substring(0, wr.Length - 1);
        return wr;
    })
    .GroupBy(g => g);

foreach (var group in rootcount)
    Console.WriteLine(string.Format("Found word: {0} {1} times.", group.Key, group.Count())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:45:39.947

您可以首先将所有复数形式转换为单（或复数）形式，您自己决定，但要保持一致，例如 music=musics。这并不难，因为有 C# 代码来获取复数形式，例如看这篇[文章](http://xinyustudio.wordpress.com/2009/02/06/using-c-to-get-the-plural-noun/)。

然后，您可以创建字典：

```
Dictionary<string, int> data=new Dictionary<string, int>();
foreach(string item in YourInputs)
{
    if(data.ContainsKey(item)
         data[item]++;
    else
         data.Add(item, 1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:46:32.810

您首先需要一个词干库。[在这个](https://stackoverflow.com/questions/7778836/programmatic-way-to-determine-related-words)SO 主题中建议的[Snowball](https://svn.apache.org/repos/asf/incubator/lucene.net/branches/Lucene.Net_2_9_4g/src/contrib/Snowball/)似乎是一个不错的起点。

即使使用词干分析器，毫无疑问，您也会从一篇小文章中获得相当多的单词列表，因此跟踪所有这些单词的最佳选择可能是 SQL 数据库。但是，如果您只是暂时需要跟踪这些值，那么一个简单的字符串表可能就可以解决问题。

# wpf - WPF 中带有状态的标记扩展

> ID：16107103
> 
> 赞同：1
> 
> 时间：2013-04-19T14:34:10.157
> 
> 标签：wpf, markup-extensions

我刚刚发现 WPF 标记扩展实例在控件模板中被重用。因此，控制模板的每个副本都会获得相同的标记扩展集。

如果您希望扩展程序为其附加的每个控件保持某种状态，这将不起作用。任何想法如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:49:13.263

不要在标记扩展中存储状态。以另一种方式存储。例如。

```
public abstract class DynamicMarkupExtension : MarkupExtension
{
    public class State
    {

        public object TargetObject { get; set; }

        public object TargetProperty { get; set; }

        public void UpdateValue(object value)
        {
            if (TargetObject != null)
            {
                if (TargetProperty is DependencyProperty)
                {
                    DependencyObject obj = TargetObject as DependencyObject;
                    DependencyProperty prop = TargetProperty as DependencyProperty;

                    Action updateAction = () => obj.SetValue(prop, value);

                    // Check whether the target object can be accessed from the
                    // current thread, and use Dispatcher.Invoke if it can't

                    if (obj.CheckAccess())
                        updateAction();
                    else
                        obj.Dispatcher.Invoke(updateAction);
                }
                else // TargetProperty is PropertyInfo
                {
                    PropertyInfo prop = TargetProperty as PropertyInfo;
                    prop.SetValue(TargetObject, value, null);
                }
            }
        }
    }

    public sealed override object ProvideValue(IServiceProvider serviceProvider)
    {
        IProvideValueTarget target = serviceProvider.GetService(typeof(IProvideValueTarget)) as IProvideValueTarget;
        State state = new State();
        if (target != null)
        {
            state.TargetObject = target.TargetObject;
            state.TargetProperty = target.TargetProperty;
            return ProvideValueInternal(serviceProvider, state);
        }
        else
        {
            return null;
        }

    }

    protected abstract object ProvideValueInternal(IServiceProvider serviceProvider, State state);
} 
```

是一个基类，用于处理需要在运行时更新标记扩展附加到的属性的问题类型。例如，用于绑定到 ISubject 的标记扩展为

```
<TextBox Text="{Markup:Subscription Path=Excenter, ErrorsPath=Errors}"/> 
```

使用 SubscriptionExtension 如下。我在模板中使用代码时遇到了问题，但我修复了它，因此 MarkupExtension 本身没有存储状态

```
using ReactiveUI.Ext;
using ReactiveUI.Subjects;
using ReactiveUI.Utils;
using System;
using System.ComponentModel;
using System.Linq;
using System.Reactive.Disposables;
using System.Reactive.Linq;
using System.Reactive.Subjects;
using System.Windows;
using System.Windows.Data;
using System.Windows.Markup;

namespace ReactiveUI.Markup
{
    [MarkupExtensionReturnType(typeof(BindingExpression))]
    public class SubscriptionExtension : DynamicMarkupExtension
    {
        [ConstructorArgument("path")]
        public PropertyPath Path { get; set; }

        [ConstructorArgument("errorsPath")]
        public PropertyPath ErrorsPath { get; set; }

        public SubscriptionExtension() { }

        Maybe<Exception> currentErrorState = Maybe.None<Exception>();

        public SubscriptionExtension(PropertyPath path, PropertyPath errorsPath)
        {
            Path = path;
            ErrorsPath = errorsPath;
        }

        class Proxy : ReactiveObject, IDataErrorInfo, IDisposable
        {
            string _Value;
            public string Value
            {
                get { return _Value; }
                set { this.RaiseAndSetIfChanged(value); }
            }

            public string Error
            {
                get { return currentError.Select(e => e.Message).Else(""); }
            }

            public string this[string columnName]
            {
                get { return currentError.Select(e => e.Message).Else(""); }
            }

            public IObservable<Maybe<Exception>> Errors { get; set; }

            public Maybe<Exception> currentError = Maybe.None<Exception>();

            private CompositeDisposable Subscriptions = new CompositeDisposable();
            public Proxy(IObservable<Maybe<Exception>> errors)
            {
                Errors = errors;
                var subscription = errors.Subscribe(e => currentError = e);
                Subscriptions.Add(subscription);
            }

            public void Dispose()
            {
                Subscriptions.Dispose();
            }
        }

        protected override object ProvideValueInternal(IServiceProvider serviceProvider, DynamicMarkupExtension.State state )
        {
            var pvt = serviceProvider as IProvideValueTarget;
            if (pvt == null)
            {
                return null;
            }

            var frameworkElement = pvt.TargetObject as FrameworkElement;
            if (frameworkElement == null)
            {
                return this;
            }

            DependencyPropertyChangedEventHandler myd = delegate(object sender, DependencyPropertyChangedEventArgs e){
                state.UpdateValue(MakeBinding(serviceProvider, frameworkElement));
            };

            frameworkElement.DataContextChanged += myd;

            return MakeBinding(serviceProvider, frameworkElement);
        }

        private object MakeBinding(IServiceProvider serviceProvider, FrameworkElement frameworkElement)
        {
            var dataContext = frameworkElement.DataContext;

            if (dataContext is String)
            {
                return dataContext;
            }

            ISubject<string> subject = Lens.Empty<string>().Subject;
            IObservable<Maybe<Exception>> errors = Observable.Empty<Maybe<Exception>>();
            Binding binding;
            Proxy proxy = new Proxy(errors);

            bool madeit = false;
            if (dataContext != null)
            {

                subject = GetProperty<ISubject<string>>(dataContext, Path);

                if (subject != null)
                {

                    errors = GetProperty<IObservable<Maybe<Exception>>>
                        (dataContext
                        , ErrorsPath) ?? Observable.Empty<Maybe<Exception>>();

                    proxy = new Proxy(errors);
                }
                madeit = true;
            }
            if(!madeit)
            {
                subject = new BehaviorSubject<string>("Binding Error");
            }

            // Bind the subject to the property via a helper ( in private library )
            var subscription = subject.TwoWayBindTo(proxy, x => x.Value);

            // Make sure we don't leak subscriptions
            frameworkElement.Unloaded += (e, v) => subscription.Dispose();

            binding = new Binding()
            {
                Source = proxy,
                Path = new System.Windows.PropertyPath("Value"),
                ValidatesOnDataErrors = true
            };

            return binding.ProvideValue(serviceProvider);
        }

        private static T GetProperty<T>(object context, PropertyPath propPath)
        where T : class
        {
            if (propPath==null)
            {
                return null;
            }
            try
            {
                object propValue = propPath.Path
                    .Split('.')
                    .Aggregate(context, (value, name)
                        => value.GetType()
                            .GetProperty(name)
                            .GetValue(value, null));
                return propValue as T;
            }
            catch (NullReferenceException e)
            {
                throw new MemberAccessException(propPath.Path + " is not available on " + context.GetType(),e);
            }

        }

    }
} 
```

# xpath - Castable 在 ORBEON 4.1 的 XPATH 中不起作用

> ID：16107106
> 
> 赞同：-1
> 
> 时间：2013-04-19T14:34:11.767
> 
> 标签：xpath, orbeon

`. castable as xs:date`自从我们从 ORBEON 3.9 更新到 ORBEON 4.1 后不起作用。在`xforms:output`标签中（在 ref 和 value 属性中）。

关联字段使用 xsd 文件定义为 xs:date，字段本身具有值 ''（空字符串）。

例外是：

```
org.orbeon.oxf.common.ValidationException: line 1136 of file:///D:/oracle/wls10.3.3/domains/gacr/ (evaluating XPath expression: expression='datumUkonceni castable as xs:date'): null file:///D:/oracle/wls10.3.3/domains/gacr/, line 1136, column -1: null
at org.orbeon.oxf.common.ValidationException.wrapException(ValidationException.java:126)
at org.orbeon.oxf.util.XPath$.handleXPathException(XPath.scala:170)
at org.orbeon.oxf.util.XPathCache$.withEvaluation(XPathCache.scala:516)
at org.orbeon.oxf.util.XPathCache$.evaluateAsString(XPathCache.scala:312)
at org.orbeon.oxf.xforms.control.ControlXPathSupport$class.evaluateAsString(ControlXPathSupport.scala:86)
at org.orbeon.oxf.xforms.control.XFormsControl.evaluateAsString(XFormsControl.scala:47)
at org.orbeon.oxf.xforms.control.controls.XFormsOutputControl.evaluateValue(XFormsOutputControl.scala:75)
at org.orbeon.oxf.xforms.control.XFormsValueControl$class.evaluateImpl(XFormsValueControl.scala:80)
at org.orbeon.oxf.xforms.control.controls.XFormsOutputControl.evaluateImpl(XFormsOutputControl.scala:58)
at org.orbeon.oxf.xforms.control.XFormsControl.evaluate(XFormsControl.scala:204)
at org.orbeon.oxf.xforms.control.ControlBindingSupport$class.setBindingContext(ControlBindingSupport.scala:102)
at org.orbeon.oxf.xforms.control.XFormsControl.setBindingContext(XFormsControl.scala:47)
at org.orbeon.oxf.xforms.control.ControlBindingSupport$class.evaluateBindingAndValues(ControlBindingSupport.scala:59)
at org.orbeon.oxf.xforms.control.XFormsControl.evaluateBindingAndValues(XFormsControl.scala:47)
.... stack continued 
```

当我在 properties-local.xml 中使用此构造时`<property as="xs:string" name="oxf.xforms.format.output.date" value="if (. castable as xs:date) then format-date(xs:date(.), '[D01].[M01].[Y0001]', xxforms:lang(), (), ()) else ."/>`，会按预期处理 castable ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:36:54.373

使用 4.0，在您的中使用`xxf`前缀而不是,这应该可以解决您的问题。`xxforms``properties-local.xml`

通常，4.0 中的 XML 文件已更改为使用较短的前缀，例如`xxf`代替`xxforms`、`xf`代替`xforms`和`xh`代替`xhtml`. 在大多数情况下，此更改是向后兼容的，因为您在自己的文件中执行名称空间映射的前缀，因此可以自由使用您喜欢的任何前缀，但也有例外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T09:45:07.247

ORBEON 3.9 中 xforms:output 标签的 ref 和 value 属性几乎相同，并且执行 ref 属性中的 xpath 表达式。在 ORBEON 4.1 ref 属性中，必须引用 element-xpath 表达式作为 throws 异常。

# jquery - jquery添加一个基于检查的新类不起作用

> ID：16107111
> 
> 赞同：1
> 
> 时间：2013-04-19T14:34:23.840
> 
> 标签：jquery

我有一个用于 ckeck 条件的 jquery 并根据检查添加一个新类。在这里我检查下拉选择的文本是“选择”还是其他。这是我的代码

```
 $(".viewmore").live('click',function(event){
   var str=$(this).parents('.box01').find(".color").children("option").filter(":selected").text()
   if(str=='select'){

   $(this).addClass('valg');
   } 
```

但它没有进入检查任何anwser的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:35:44.787

使用“更改”而不是“单击”来获取更改后的值。

对于当前版本的 jquery，还使用“.on”而不是“.live” - [http://api.jquery.com/on](http://api.jquery.com/on)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:36:19.100

尝试这个：

```
$(".viewmore").on('click', function (event) {
    var str = $(this).parents('.box01').find(".color option:selected").text();
    if (str == 'select') {
        $(this).addClass('valg');
    }
}); 
```

# android - BroadcastReceiver 不对外部意图做出反应

> ID：16107112
> 
> 赞同：2
> 
> 时间：2013-04-19T14:34:27.297
> 
> 标签：android, android-intent, broadcastreceiver

我正在尝试在我的应用程序中实现 Tasker 支持。我已经在 Manifest 文件中声明了意图过滤器并编写了接收器，但它不起作用（没有记录任何内容，我的应用程序不会对这些意图作出反应）。

我已经测试过它从 tasker 发送意图，如下所示：

`ACTION: START_SERVICE`

`package: com.example.appname`

清单声明：

```
<receiver android:name="ExIntentReceiver">  
  <intent-filter>
    <action android:name="com.example.appname.START_SERVICE" />
    <action android:name="com.example.appname.STOP_SERVICE" />
  </intent-filter>
</receiver> 
```

接收者：

```
Public class ExtIntentReceiver extends BroadcastReceiver {

 @Override
   public void onReceive(Context context, Intent intent) {
      String action = intent.getAction();
  if(action.equals("com.example.appname.START_SERVICE"))    {
        Log.v("service", "is started");
      } else if(action.equals("com.example.appname.STOP_SERVICE"))  {
          Log.v("service", "is stopped");
      }

   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:37:13.480

实际上，我看到一个地方可能是一个原因。当您发送意图时，您指定包名称`com.example.appname`，但 AndroidManifest.xml 中指定了什么？如果您在意图中使用包名称，则此名称必须与接收应用程序的 AndroidManifest.xml 中的包名称匹配。

# pentaho - 无法打开转换：null - 从 Java 运行作业

> ID：16107119
> 
> 赞同：2
> 
> 时间：2013-04-19T14:34:51.527
> 
> 标签：pentaho, kettle

我有一个简单的工作（名为 A），它开始一个简单的转换（名为 A）。转换仅包含一个虚拟组件。它们都存储在数据库存储库中。

如果我从厨房开始工作，一切都运行良好：

```
./kitchen.sh -rep=spoon -user=<user> -pass=<pwd> -job A 
```

然后我写了一个简单的java代码：

```
JobMeta jobMeta = repository.loadJob(jobName, directory, null, null);
org.pentaho.di.job.Job job = new org.pentaho.di.job.Job(null, jobMeta);
job.getJobMeta().setInternalKettleVariables(job);
job.setLogLevel(LogLevel.ERROR);
job.setName(Thread.currentThread().getName());

job.start();
job.waitUntilFinished();

if (job.getResult() != null && job.getResult().getNrErrors() != 0) {
   ...
}
else {
   ...
} 
```

问题是运行java程序我总是得到以下错误：

```
A - Unable to open transformation: null
A - java.lang.NullPointerException
at org.pentaho.di.job.entries.trans.JobEntryTrans.execute(JobEntryTrans.java:698)
at org.pentaho.di.job.Job.execute(Job.java:589)
at org.pentaho.di.job.Job.execute(Job.java:728)
at org.pentaho.di.job.Job.execute(Job.java:443)
at org.pentaho.di.job.Job.run(Job.java:363) 
```

我已经用谷歌搜索了这个错误但没有成功，我被困在那里。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:16:55.317

解决方案似乎正在更换线路

```
org.pentaho.di.job.Job job = new org.pentaho.di.job.Job(null, jobMeta); 
```

和

```
org.pentaho.di.job.Job job = new org.pentaho.di.job.Job(repository, jobMeta); 
```

希望这对其他人有帮助。

# winforms - Visual Studio 设计器更改了我的获胜表单

> ID：16107120
> 
> 赞同：0
> 
> 时间：2013-04-19T14:34:56.123
> 
> 标签：winforms, visual-studio, designer, windows-forms-designer

我正在从事一个巨大的项目，该项目`VS 2008`从`VS 2012`. 以前一切正常，但现在我在`VS 2012`. 在 VS Designer 中打开表单会导致对该表单进行更改。如果我保存该自动更改，我将无法再打开它，因为其中有错误。我可以以某种方式强迫设计师不要进行自动更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:38:38.590

我相信您可以将 [filename].Designer.[extension] 文件设置为只读，虽然设计器仍会进行更改（由选项卡中出现的星号显示），但它们不会自动保存。当被要求保存更改时，您必须回答“否”。这不是在开发类行为时保留布局代码的完美方式，但它是可行的。

# jquery - 使用 _TOTAL_ 的数据表中的条件格式

> ID：16107123
> 
> 赞同：0
> 
> 时间：2013-04-19T14:35:14.460
> 
> 标签：jquery, jquery-ui, jquery-plugins, datatables

我最近对 ​​Datatables 有点烦恼，我将 , 的`sInfo`属性更改`oLanguage`为`"There are _TOTAL_ people in this Role."`

如果我有 2 个或更多条目，这很好，但是在这个表中经常出现一个条目时，我最终会得到“这个角色有 1 个人”——这看起来很糟糕。

所以我的问题是，**有没有办法获取`_TOTAL_`属性的值并将替代字符串与 JQuery 数据表一起使用？**

这是完整的代码示例：

```
$("#sqepMatrix").dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "oLanguage": {
            "sInfo": "There are _TOTAL_ people in this Role."
        },
        "sPaginationType": "full_numbers"
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:07:25.380

我设法弄清楚了！

使用*[fnInfoCallback](https://datatables.net/ref#fnInfoCallback)*属性，我可以评估该`iTotal`属性，并根据下面显示的 if 语句，我可以决定要吐出什么字符串！

用法：

```
$("#sqepMatrix").dataTable({
    "bJQueryUI": true,
    "bPaginate": false,

    "sPaginationType": "full_numbers",
    "fnInfoCallback": function (oSettings, iTotal) {
        if (iTotal == 1) {
            return "There is one person in this Role.";
        }
        else {
            return "There are " + iTotal + " people in the Role.";
        }
    }
}); 
```

# javascript - 如何让 VS2012 自动格式化 Javascript 注释块，如 C# 注释

> ID：16107126
> 
> 赞同：4
> 
> 时间：2013-04-19T14:35:19.397
> 
> 标签：javascript, visual-studio, visual-studio-2012

我正在尝试让 Visual Studio 2012 自动格式化我的评论块，就像它对我的 C# 块所做的那样。我希望我的评论看起来像这样：

```
/*
 * Here is my C# comment block
 * As I type, more [space]*[space] chars are prefixed to every new line
 */ 
```

但相反，我得到了这个：

```
/*
Here is my javascript comment block
Where are my asterisks?  :(
*/ 
```

更糟糕的是，我无法在工具 > 选项 > 文本编辑器 > Javascript 菜单中定义这种行为。我有 Web Essentials 扩展，但它不会自动帮助格式化我的评论块。我也尝试过在 HTML 页面 < script > 节点内进行编辑，但在那里也不起作用。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T02:44:32.117

写一个新的片段文件怎么样？这是一个网站，但它是中文的。 [如何在 Visual Studio 中编写新的片段文件](http://jingyan.baidu.com/article/ea24bc39b86ededa62b3311f.html)

# .net - TextBox 用于对其默认 DateTime 值格式进行不必要的修改

> ID：16107132
> 
> 赞同：2
> 
> 时间：2013-04-19T14:35:44.500
> 
> 标签：.net, asp.net-mvc

我目前正在使用 ASP.NET MVC 4 开发一个 Web 应用程序。这是我面临的问题的描述：

我创建了一个强类型视图来编辑表格的某些字段，尤其是一个`DateTime`字段。我想要做的是使用以下代码显示一个带有从数据库中检索的默认值的文本框：

```
@Html.TextBoxFor(m => m.Date, new { @Value = ViewBag.DefaultValue }) 
```

`ViewBag.DefaultValue`使用简单查询在控制器中设置位置。因为我在谈论日期，所以我也在我的 web.config 中添加了这个：

```
<globalization uiCulture="fr-Fr" culture="fr-FR" /> 
```

现在有趣的是，当显示日期时，日期的格式为 MM/DD/YYYY，而不是 DD/MM/YYYY 格式，后者是保存在数据库中的格式。此外，当我只想`ViewBag.DefaultValue`在 div 中显示时，它会显示正确的格式，即 DD/MM/YYYY。

有没有人遇到过类似的问题？我可以理解我的描述可能相当模糊，但我真的不明白那里发生了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:46:47.037

我试过了，但没有任何成功。

经过一段时间的检查，我终于在那里找到了解决方案：http: [//geekswithblogs.net/80n/archive/2012/04/27/apply-a-datetime-format-in-an-asp.net-mvc-textboxfor .aspx](http://geekswithblogs.net/80n/archive/2012/04/27/apply-a-datetime-format-in-an-asp.net-mvc-textboxfor.aspx)

无法使用 EditorFor 和数据注释，因为我需要将此标签链接到 datepicker 事件。所以我使用了第二种解决方案。

诀窍在于在传递值时强制格式： `@Html.TextBoxFor( m => m.Date, new {@Value = Model.Date.ToString("dd/MM/yyyy")}`

希望这能有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:40:39.633

我在 global.aspx.cs 中使用了类似的东西：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo("en-us");
    Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo("en-us");
} 
```

以防止功能不使用正确的设置。

# c# - Orchard CMS 在创建/更新时计算派生字段

> ID：16107140
> 
> 赞同：0
> 
> 时间：2013-04-19T14:36:04.330
> 
> 标签：c#, orchardcms, orchardcms-1.6

我正在为包含纬度和经度字段的位置数据构建一个果园内容部分。每当保存（创建或更新）内容时，我想计算各种最大距离（20 英里、50 英里等）的边界纬度/经度，并保存以供以后参考以在特定位置的给定半径内进行搜索。

我已经有了所有必要的地理定位计算。手头的问题实际上是在保存（创建/更新）时计算派生值，并将派生值设置为内容部分的新字段，然后再保存到其存储库。

我感觉`OnCreated`在关联的 ContentHandler 中添加过滤器可能是朝着正确方向迈出的一步，但无法快速找到与类似用例相关的任何讨论。所以，在我继续之前，我只是想与社区联系，听听您对这个特定问题的看法。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:03:22.350

添加过滤器后，您走在了正确的轨道上`OnCreated`！

如果您`OnUpdateEditorShape`只想检测何时通过仪表板更新内容项（或更一般地说，何时使用 更新内容项`IContentManager.UpdateEditor(...)`），则可以使用。

`OnVersioning`/`OnVersioned`将允许您在更新内容项时访问它的“之前”和“之后”版本，如果您的记录类继承自`ContentPartVersionRecord`（这将与 一起使用`ContentPartRecord`，但“之前”和“之后”参数将是相同的）。

您可能想看看这个[类似的问题](https://stackoverflow.com/questions/15978144/orchard-cms-contentpart-update/15994235#15994235)。

*   编辑：“之前”和“之后”`Existing`版本`Building`在`VersionContentContext`.

# plugins - Skillbuilders在退出前保存

> ID：16107145
> 
> 赞同：0
> 
> 时间：2013-04-19T14:36:18.663
> 
> 标签：plugins, oracle-apex

我在我的一个页面中使用 Skillsbuilders Save Before Exit Oracle ApEx 插件，但由于某种原因，我不希望它在用户按下页面上的“保存”按钮时触发，该页面基本上分支回自身，当他们改变时页面上的东西。

现在“保存”按钮作为动态操作的一部分被触发，它基本上首先调用 JavaScript 函数，然后是 PL/SQL，然后执行 apex.submit("SUBMIT") JavaScript 调用。

使用此插件，当用户按下“保存”按钮时，如何防止它触发，因为当用户更改屏幕上的字段然后继续按下“保存”按钮时，此插件会触发并将对话框显示到已进行更改的用户，这不是我想要的。我只是希望它保存更改并留在页面上。

有关插件详细信息，请参见此处：

[http://apex.oracle.com/pls/apex/f?p=46685:SAVE_BEFORE_EXIT:0](http://apex.oracle.com/pls/apex/f?p=46685:SAVE_BEFORE_EXIT:0) :::::

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:03:54.277

我已阅读文档[http://skillbuilders.com/download/download-resource.cfm/instructions.pdf?file=Oracle-Apex/plugins/save_before_exit//instructions.pdf](http://skillbuilders.com/download/download-resource.cfm/instructions.pdf?file=Oracle-Apex/plugins/save_before_exit//instructions.pdf) 您必须更改名为“禁用警告选择器”的插件的属性”。指定 jquery 选择器，应用于要触发对话框的所有按钮。

# active-directory - 活动目录、LDAP 用户主体

> ID：16107148
> 
> 赞同：1
> 
> 时间：2013-04-19T14:36:25.730
> 
> 标签：active-directory, ldap

当我在 UserPrincipal 类上写出 DistinguishedName 属性时得到了这些信息。

```
CN=Test Testie, OU=123,OU=Company,OU=Accounts,DC=myServer,DC=local 
```

如果有从 OU 获得 nr 123 的属性，我会很伤心。是否有任何其他属性可以获得该信息，或者这是过滤掉我的信息的最佳方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:18:41.053

\不。没有“父”属性。

根目录下的每个对象都有一个父对象，或者是容器 (CN=) 上的组织单位 (OU=)。因此，只需解析前两个逗号之间的内容并删除 OU= 和 CN=。这样你就有了 Name 属性。

请注意，名称中可能包含逗号的对象。然后它看起来像这样：

> 伟大的OU，
> 
> CN=Test Testie,OU=Great OU\,The,OU=Company,OU=Accounts,DC=myServer,DC=local
> 
> 测试，测试
> 
> CN=Testie\,Test ,OU=123,The,OU=Company,OU=Accounts,DC=myServer,DC=local

所以你需要在解析之前检查一个反斜杠！如果找到，则需要在第一个和第三个逗号之间进行解析。

[这](http://www.ietf.org/rfc/rfc2253.txt)是有关专有名称中“特殊”字符的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T07:33:36.510

好的，它正在工作，但感觉不是这样做的最佳实践：

```
 var ctx = new PrincipalContext(ContextType.Domain, "myDomain.local");
        var user = UserPrincipal.FindByIdentity(ctx, "myUser");
        var auth = user.GetAuthorizationGroups().Any(x => x.Name.Contains("myGroup")); 
```

因为事情是我需要使用 contains 因为该组可能如下所示：

```
myGroup.xxxx.111 
```

有没有更好的方法来解决这个问题？

# c# - 运算符“==”不能应用于“int”和“System.Linq.iQueryable”类型的操作数 '

> ID：16107150
> 
> 赞同：5
> 
> 时间：2013-04-19T14:36:31.300
> 
> 标签：c#, sql, linq

所以我有点卡住了！为大学做编程作业，我碰壁了。

我们在其中一个部分中提出的问题如下：

“2\. 允许用户查找在特定年份下订单的客户。提供一个组合框，列出订单表中所有唯一（不同）年份，用户可以从中进行选择。”

我在转换“年份”时遇到问题，因此我可以将其与 OrderID 进行比较，并在列表框中显示数据库中的所有订单。

如果有人可以帮我一把，将不胜感激！谢谢！

这是我的代码：

```
private void dateDDL_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    string selection;
    selection = dateDDL.SelectedItem.ToString();

    var year = from y in northwind.Orders
               where Convert.ToString(y.OrderDate).Contains(selection)
               select y.OrderID;

    var order = from o in northwind.Order_Details
                where o.OrderID == year
                select new { o.OrderID, 
                             o.ProductID, 
                             o.UnitPrice, 
                             o.Quantity, 
                             o.Discount };

    lbxOrderdate.ItemsSource = order;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:38:34.417

```
var year = (from y in northwind.Orders
                   where Convert.ToString(y.OrderDate).Contains(selection)
                   select y.OrderID).Single();

var order = from o in northwind.Order_Details
                    where o.OrderID == year
                    select new { 
                                  o.OrderID, 
                                  o.ProductID, 
                                  o.UnitPrice, 
                                  o.Quantity, 
                                  o.Discount 
                                }; 
```

LINQ 查询也返回`System.Linq.IQueryable<T>`，如果你想取单个值，你应该`Single()`/`First()`扩展。

如果您不确定该查询结果是否包含对象，您应该`FirstOrDefault()`或`SingleOrDefault()`（`SingleOrDefault()`当集合仅包含一个元素时抛出异常），`default(T)`如果结果中没有元素，则返回。请注意这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T14:41:35.507

您的`year`查询将返回与您的子句`OrderID`匹配的所有值的列表。`where`您无法将该列表与查询中的单个列表进行`o.OrderID`比较`order`；如果您想查找`years`查询返回的某一年中的所有订单，请使用类似

```
where year.Contains(o.OrderID) 
```

（未经测试，但应该引导您走上正确的道路）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T05:19:49.227

类型非常重要，（除了）字符串的世界是不安全的。

```
string selection = dateDDL.SelectedItem.ToString();
int year = Int32.Parse(selection);

var orders =
  from order in northwind.Orders
  where order.OrderDate.Year == year
  select order; 
```

* * *

> “2\. 允许用户查找在特定年份下订单的客户。提供一个组合框，列出订单表中所有唯一（不同）年份，用户可以从中进行选择。”

嗯，查询不应该是关于客户的吗？

# performance - 在列表中查找不重复项并将其保存在另一个列表中的最佳和有效方法

> ID：16107152
> 
> 赞同：1
> 
> 时间：2013-04-19T14:36:37.790
> 
> 标签：performance, list, duplicates

```
Class encargo
Property idEncargo as int
Property listEncargoCollege As IList(Of encargoCollege)

Class encargoCollege
Property idEncargo as int
Property rate as Decimal
Property college as College

Class college
Property idCollege as int
Property name as String
Property serial as int 
```

所以我有一个包含**1000 Encargos**的列表（Of Encargo） 。每个 Encargo**至少有 50 个 EncargoCollege。**

每所大学**都有他的idCollege 是独一无二的。**

**在 Encargo 上，所有 encargoColleges 必须是不同的**（不同的 idCollege）

我需要的是迭代列表（Encargo）以及在列表中找到的每个不同的 idCollege；显示税收总和和税率总和。前任：

货运 (idEncargo=1)

EncargoCollege (idCollege=55, rate=100); EncargoCollege(idCollege=56, rate=200)

货运 2 (idEncargo=2)

EncargoCollege (idCollege=56, rate=500); EncargoCollege(idCollege=57, rate=800); EncargoCollege(idCollege=58, rate=1200)

我必须证明：

EncargoCollege 1（idCollege 为 55；college.name 为 Paul；比率为 100）

EncargoCollege 2（idCollege 是 56；college.name 是 Peter；率是 700）

EncargoCollege 3（idCollege 是 57；college.name 是 Mike；率是 800）

EncargoCollege 4（idCollege 是 58；college.name 是 Jack；率是 1200）

**在速度和效率方面实现这一目标的最佳方法是什么？**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T18:00:18.047

由于您不是在数据集合中寻找特定值或信息子集，也没有办法缩短迭代，所以当您说：

> 我需要的是迭代列表（Encargo）以及在列表中找到的每个不同的 idCollege；显示税收总和和税率总和。

有类似的伪代码：

```
 foreach (var e in Encargo)
  {
    decimal taxSum = 0, rateSum = 0;
    foreach (var eC in e.listEncargoCollege)
    {
      rateSum += eC.rate;
      taxSum += eC.Tax; //though I didn't see where the tax field was declared/defined.
    }
    Console.WriteLine(string.Format("EncargoCollege {0}: rate Sum = {1} , tax Sum = {2} ", e.idEncargo, rateSum, taxSum));
  } 
```

对于第二部分，不要总结，只需打印第二个 foreach 语句中的值。

我不明白哪里可能存在重复，特别是在 encargoCollege（id 使它们独一无二，不是吗？），如果这不可能，也许这会有所帮助！

# mysql - 从单独的表中的键/值对中选择不同的值

> ID：16107153
> 
> 赞同：0
> 
> 时间：2013-04-19T14:36:43.723
> 
> 标签：mysql, perl, dbi, dbix-class

我有 2 个数据库表

```
JOBS(JOB_ID, JOB_TIME, JOB_NAME,...), JOB_PARAMETERS(JOB_ID,NAME,VALUE) 
```

其中 JOB_PARAMETERS 本质上是一个包含作业参数键值对的映射。每个作业都可能有一个唯一的参数键/值对。

我希望务实地构建一个查询，该查询将返回包含键/值组合的不同作业 ID。这些值实际上是一个值列表，比较运算符。例如：

```
JOB_PARAMETERS: NAME = 'OUTPUT_FILENAME', VALUE LIKE "ALEX%", "JAX%"
                NAME = 'PRIORITY' , VALUE > 7 
```

上面的示例将自动过滤掉所有没有 OUTPUT_FILENAME 和 PRIORITY 键的作业。返回满足这两个条件的所有工作。

我还需要能够支持分页和排序。

我计划将 Perl 与 DBIx::Class 一起使用，但我也可以在纯 Perl/SQL 中完成。

我愿意更改数据库架构，但每个作业都可以有不同的键/值对，所以我不能只在作业表中将它们设为列。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:43:29.687

可以在 SQL 中通过相应地分组`JOB_PARAMETERS`和`JOB_ID`过滤组来完成。例如，如果存在唯一性约束`(JOB_ID, NAME)`，可以查询如下：

```
SELECT   JOB_ID
FROM     JOB_PARAMETERS
WHERE    (NAME='OUTPUT_FILENAME' AND (VALUE LIKE 'ALEX%' OR VALUE LIKE 'JAX%'))
      OR (NAME='PRIORITY' AND VALUE > 7)
GROUP BY JOB_ID
HAVING   COUNT(*) = 2 
```

如果没有这样的唯一性约束，`COUNT(*)`则必须替换为`COUNT(DISTINCT NAME)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:48:52.230

使用 DBIx::Class 时，您可以使用 Schema::Loader 生成 DBIC 模式。

连接到数据库后，您会得到一个 $schema 对象，您可以使用它来获取过滤后的 ResultSet 以返回您想要的 Result 对象：

```
my $rs_job_parameters = $schema->resultset('Job_Parameters')->search({
    -or => [
        {
            'name' => 'OUTPUT_FILENAME',
            'value' => [{ like => 'ALEX%'}, { like => 'JAX%' }].
        },
        {
            'name' => 'PRIORITY',
            'value' => [{ '>' => 7}].
        }
    ]},
    {
        columns  => [qw( job_id )],
        group_by => [qw( job_id )], # alternative you can use distinct => 1 to group_by all selected columns
        having   => \[ 'COUNT(*) = ?', [ 2 ] ],
    }
);

my @job_ids = $rs_job_parameters->get_column('job_id')->all; 
```

# java - IDTECH信用卡读卡器数据解密

> ID：16107155
> 
> 赞同：8
> 
> 时间：2013-04-19T14:36:55.600
> 
> 标签：java, security, encryption, credit-card, credit-card-track-data

我正在尝试解密 IDTECH 信用卡读卡器的加密数据。

此详细信息已使用三重 DES 和使用 DUKPT 的 CBC 密码进行加密。

加密刷卡（来自 IDTECH 信用卡读卡器）：

```
028801001F372300%*5150********7903^PAYPASS/MASTERCARD^************
***?*;5150********7903=***************?*8871B640F379F3BD8D057A13F81454
39B28D80BE8A43F3440D85928F576065EEE1BA54CAADFF67D552C2B0CBF1A9F
34B63402B967998FC7C80487C8A6DBFD46975985D3D7E865FEEF6A48930751DC9
71FDFCBC1989294B7EF6F0D0007AA731C31F574608EB85E57751DA48970F96B0E
8BECDB94D672D746C2CC75176FA6E0C9E6FEFE0B154A0959B6299490125000000
00197F6903 
```

可用的解密详细信息::

```
Key Value: F5 BF 6B E8 55 AB 92 3A DE 7E 77 40 D8 46 F9 DE
KSN: 62 99 49 01 25 00 00 00 00 1A 
```

解密数据（结果）：ASCII 格式的数据

```
%B5150710200107903^PAYPASS/MASTERCARD^090910140000631??;5150710200
107903=090910140000631?0 
```

任何安全算法或 JAVA 专家都可以指导我如何继续解密这些数据。

> 我正在寻找java中的解决方案。

以上信息是否足以解密数据或需要更多信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:51:35.920

您不太可能解密它，因为您还需要知道制造商嵌入到设备中的基本派生密钥 (BDK) 和/或初始 PIN 加密密钥 (IPEK)。您还需要知道他们如何从 BDK 生成 KSN。他们不太可能与您共享所有这些信息，因为这会使加密变得无用。

来源：[http ://en.wikipedia.org/wiki/Derived_unique_key_per_transaction](http://en.wikipedia.org/wiki/Derived_unique_key_per_transaction)

这导致了下一个问题。为什么*要*解密这些信息？返回数据的纯文本部分包含卡号的（PCI 兼容）段（前四位，后四位）。如果您*能够*解密完整的卡号，那么 PCI 合规性的全部重担将落在您的肩上，从而使使用 3rd 方设备变得毫无用处。

# android - 带有广告横幅的相对布局

> ID：16107157
> 
> 赞同：1
> 
> 时间：2013-04-19T14:36:57.617
> 
> 标签：android, android-layout

我遇到的问题是我无法正确显示带有两个广告横幅的 GLSurfaceView。我想将它们放置在移动屏幕的顶部和底部以及 GLSurfaceView（主游戏窗口）上方。如何实现？以下是我拥有的当前布局 xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/adRelativeLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/darker_gray" >

<ad banner 1
    android:id="@+id/admobView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    />

<ad banner 2
    android:id="@+id/mmediaView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    />

<android.opengl.GLSurfaceView
    android:id="@+id/gameWindow"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:52:10.390

我以前也出现过这个问题。您可以做的一件事是在Activity 的方法中`RelativeLayout`动态创建一个。`onCreate`在此布局中，您将像往常一样实例化 GLSurfaceView，但不是使用 将其设置为视图`setContentView`，而是将其作为视图添加到布局中。您还将根据需要将横幅添加到视图中，然后将布局设置为视图，而不仅仅是 GLSurfaceView。下面是我用来在游戏视图底部添加横幅的方法。看看你能不能适应你的需要。

```
 RelativeLayout layout = new RelativeLayout(this);

    int adId = 0x12346;
    AdView adView = new AdView(this, AdSize.BANNER, "YOUR_AD_ID_NUMBER");
    adView.setId(adId);

    GLSurfaceView glView = new GLSurfaceView(this);

    RelativeLayout.LayoutParams adParams = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.MATCH_PARENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    adParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    adParams.addRule(RelativeLayout.CENTER_HORIZONTAL);

    RelativeLayout.LayoutParams glParams = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT);
    glParams.addRule(RelativeLayout.ABOVE, adId);
    glParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);

    layout.addView(adView, adParams);
    layout.addView(glView, glParams);

    setContentView(layout);

    adView.loadAd(new AdRequest()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:49:06.590

我想我终于明白了。对于那些会在上面的代码中遇到类似问题的人，我已将 android.opengl.GLSurfaceView xml 节点更改为 RelativeLayout 并将其定位在广告横幅节点之前。然后在 java 代码中我创建了 GLSurfaceView 并通过 addView 方法将其添加到 RelativeLayout 节点。它终于奏效了

# wpf - WPF MVVM - 在组合框中绑定突出显示的项目

> ID：16107158
> 
> 赞同：1
> 
> 时间：2013-04-19T14:36:58.867
> 
> 标签：wpf, mvvm

有没有办法在 WPF/MVVM 中绑定突出显示的 ComboBox 项？

我想要这种行为的原因是我希望能够右键单击 ComboBox 项目并在 CommandParameter 中传递参数（与此相关的项目 ID）。

由于在我左键单击该项目之前实际上没有选择任何项目，因此我没有要传递的参数......

请问有什么想法吗？

```
<ComboBox.ContextMenu>
<ContextMenu>
<MenuItem Header="Delete Expense Category" Command="{Binding DeleteMenuItemCommand}"
CommandTarget="{Binding HighlightedExpenseCategory}" CommandParameter="{Binding Id}"></MenuItem>
</ContextMenu>
</ComboBox.ContextMenu> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:07:45.013

首先是一个问题：您的最终目标是什么？您可以在不让用户右键单击上下文菜单项的情况下实现它吗？也许您可能想要的是一个分层组合框，如这里的图像中的[任何想法如何实现 ComboBox 来表示分层数据？](https://stackoverflow.com/questions/11797336/any-ideas-how-to-implement-combobox-to-represent-hierarchical-data). 尽管如果您确实只想对组合框中的项目执行操作，这可能不适合您。

除此之外，HighCore 让你走上了正确的轨道（对不起，HighCore，我将在这里偷走你的一点风头，但作为安慰，我给你几票）。关键是 ContextMenu 是 ComboBoxItem 的属性，而不是 ComboBox 本身。

此代码片段可能会帮助您更进一步，尽管我没有在 XamlPad 之外进行测试。您可能需要一个额外的步骤来确保您的绑定可以使用命令以及菜单项的 Id 属性到达您的视图模型，无论您在哪里定义。尝试 Binding 的 RelativeSource，但如果您需要帮助，请回来。祝你好运！

```
<ComboBox>
   <ComboBox.Resources>
          <ContextMenu x:Key="contextMenu">
             <MenuItem Header="Delete Expense Category" Command="{Binding DeleteMenuItemCommand}"
              CommandTarget="{Binding HighlightedExpenseCategory}" CommandParameter="{Binding Id}" />
          </ContextMenu>
   </ComboBox.Resources>

   <ComboBox.ItemContainerStyle>
      <Style TargetType="{x:Type ComboBoxItem}">
         <Style.Setters>
            <Setter Property="ContextMenu" Value="{StaticResource contextMenu}" />
         </Style.Setters>
      </Style>
   </ComboBox.ItemContainerStyle>
   <ComboBoxItem Content="1" />
   <ComboBoxItem Content="2" />
</ComboBox> 
```

# virtualization - 通过浏览器交付应用程序的 GUI

> ID：16107163
> 
> 赞同：2
> 
> 时间：2013-04-19T14:37:13.660
> 
> 标签：virtualization, remote-server, rdp, citrix

我需要使用浏览器向用户显示在服务器上运行的某些应用程序的界面。它应该类似于服务器上单个应用程序的 RDP 客户端。

有没有可以实现以下功能的解决方案或服务？也许是思杰？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:52:17.723

这看起来像您要查找的内容：

[http://freerdp.net/](http://freerdp.net/)

> 关于 FreeRDP-WebConnect
> 
> FreeRDP-WebConnect 是一个开源网关，用于使用任何兼容 HTML5 的浏览器访问 RDP 会话。特别是它依赖于 Canvas 和 WebSockets 功能。FreeRDP-WebConnect 是 FreeRDP 项目的子项目。
> 
> 在服务器端，使用 C++ 编写的独立守护程序通过 HTTPS（或 HTTP，如果已配置）提供网页，并使用 FreeRDP 库作为客户端连接到任何 RDP 会话。服务器端 WebSockets 实现仅处理当前的 RFC6455，因此实现旧草案的浏览器无法工作。随着 RFC6455 被提升到“提议的标准”级别，这应该很快就会改变。

我会在服务器上为用户创建一个帐户，并且只允许它访问它需要访问的一个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T05:12:18.620

您可以使用 Cameyo。首先，为[自己创建一个免费帐户](http://online.cameyo.com)，然后单击“添加应用程序”。如果您的安装程序支持无人值守安装，您只需提交即可。否则，您可以在本地构建一个 Cameyo 包并将其发送进来。然后它将可以作为 HTML5 播放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-11T15:56:10.183

您没有指出您正在运行的服务器。

作为上面提到的[FreeRDP-Webconnect](https://github.com/FreeRDP/FreeRDP-WebConnect)的替代方案，它也是开源的，并且还通过 HTTP 网关使用 FreeRDP 作为 rdp 客户端，有[Myrtille](https://github.com/cedrozor/myrtille)。

FreeRDP-WebConnect 嵌入了一个用 C++ 编写的独立守护程序，以通过 HTTP(S) 提供网页，因此也可以在 Linux 服务器上运行，而 Myrtille 具有 IIS/.NET (C#) 实现和 MSI 安装程序，因此更多适用于 Windows 服务器。

# c# - 从 yuv 420 转换为图像

> ID：16107165
> 
> 赞同：5
> 
> 时间：2013-04-19T14:37:13.890
> 
> 标签：c#, emgucv

我有 yuv420 数据的字节数组。

```
byte[] yuv420;//yuv data 
```

如何将其转换为`Image<Bgr, byte>`?

我找到了一个数学公式来转换为 RGB，然后再转换为，`Image<Bgr, byte>`但它非常慢。有没有办法更快地转换它？

Emgu中有一个类用于转换

```
COLOR_CONVERSION(enum CV_YUV2RGB    Convert YUV color to RGB) 
```

但我不明白如何使用这个类。任何人都可以帮忙吗？

```
static Bitmap ConvertYUV2RGB(byte[] yuvFrame, byte[] rgbFrame, int width, int height)
{
    int uIndex = width * height;
    int vIndex = uIndex + ((width * height) >> 2);
    int gIndex = width * height;
    int bIndex = gIndex * 2;

    int temp = 0;

    //图片为pic1,RGB颜色的二进制数据转换得的int r,g,b;
    Bitmap bm = new Bitmap(width, height);

    int r = 0;
    int g = 0;
    int b = 0;

    for (int y = 0; y < height; y++)
    {
        for (int x = 0; x < width; x++)
        {
            // R分量
            temp = (int)(yuvFrame[y * width + x] + (yuvFrame[vIndex + (y / 2) * (width / 2) + x / 2] - 128) * YUV2RGB_CONVERT_MATRIX[0, 2]);
            rgbFrame[y * width + x] = (byte)(temp < 0 ? 0 : (temp > 255 ? 255 : temp));
            // G分量
            temp = (int)(yuvFrame[y * width + x] + (yuvFrame[uIndex + (y / 2) * (width / 2) + x / 2] - 128) * YUV2RGB_CONVERT_MATRIX[1, 1] + (yuvFrame[vIndex + (y / 2) * (width / 2) + x / 2] - 128) * YUV2RGB_CONVERT_MATRIX[1, 2]);
            rgbFrame[gIndex + y * width + x] = (byte)(temp < 0 ? 0 : (temp > 255 ? 255 : temp));
            // B分量
            temp = (int)(yuvFrame[y * width + x] + (yuvFrame[uIndex + (y / 2) * (width / 2) + x / 2] - 128) * YUV2RGB_CONVERT_MATRIX[2, 1]);
            rgbFrame[bIndex + y * width + x] = (byte)(temp < 0 ? 0 : (temp > 255 ? 255 : temp));
            Color c = Color.FromArgb(rgbFrame[y * width + x], rgbFrame[gIndex + y * width + x], rgbFrame[bIndex + y * width + x]);
            bm.SetPixel(x, y, c);
        }
    }
    return bm;

}

static double[,] YUV2RGB_CONVERT_MATRIX = new double[3, 3] { { 1, 0, 1.4022 }, { 1, -0.3456, -0.7145 }, { 1, 1.771, 0 } };
static byte clamp(float input)
{
    if (input < 0) input = 0;
    if (input > 255) input = 255;
    return (byte)Math.Abs(input);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T15:35:31.483

你很幸运，因为我之前就解决了这个问题。代码中有一些链接可获取更多信息。

一般来说，在进行图像处理时总是尽量使用指针，并避免在嵌套循环中调用函数。在我的代码中，大小比较是迄今为止最慢的部分，但不幸的是它是必需的（尝试使用预处理器开关将其关闭）。

我不得不说，虽然最后我从来没有使用过这个函数，因为它太慢了，我选择在 c++ 中实现它并使用 p 调用从 c# 调用它。

```
private static unsafe void YUV2RGBManaged(byte[] YUVData, byte[] RGBData, int width, int height)
    {

        //returned pixel format is 2yuv - i.e. luminance, y, is represented for every pixel and the u and v are alternated
        //like this (where Cb = u , Cr = y)
        //Y0 Cb Y1 Cr Y2 Cb Y3 

        /*http://msdn.microsoft.com/en-us/library/ms893078.aspx
         * 
         * C = Y - 16
         D = U - 128
         E = V - 128
         R = clip(( 298 * C           + 409 * E + 128) >> 8)
         G = clip(( 298 * C - 100 * D - 208 * E + 128) >> 8)
         B = clip(( 298 * C + 516 * D           + 128) >> 8)

         * here are a whole bunch more formats for doing this...
         * http://stackoverflow.com/questions/3943779/converting-to-yuv-ycbcr-colour-space-many-versions
         */

        fixed(byte* pRGBs = RGBData, pYUVs = YUVData)
        {
            for (int r = 0; r < height; r++)
            {
                byte* pRGB = pRGBs + r * width * 3;
                byte* pYUV = pYUVs + r * width * 2;

                //process two pixels at a time
                for (int c = 0; c < width; c += 2)
                {
                    int C1 = pYUV[1] - 16;
                    int C2 = pYUV[3] - 16;
                    int D = pYUV[2] - 128;
                    int E = pYUV[0] - 128;

                    int R1 = (298 * C1 + 409 * E + 128) >> 8;
                    int G1 = (298 * C1 - 100 * D - 208 * E + 128) >> 8;
                    int B1 = (298 * C1 + 516 * D + 128) >> 8;

                    int R2 = (298 * C2 + 409 * E + 128) >> 8;
                    int G2 = (298 * C2 - 100 * D - 208 * E + 128) >> 8;
                    int B2 = (298 * C2 + 516 * D + 128) >> 8;
#if true
                    //check for overflow
                    //unsurprisingly this takes the bulk of the time.
                    pRGB[0] = (byte)(R1 < 0 ? 0 : R1 > 255 ? 255 : R1);
                    pRGB[1] = (byte)(G1 < 0 ? 0 : G1 > 255 ? 255 : G1);
                    pRGB[2] = (byte)(B1 < 0 ? 0 : B1 > 255 ? 255 : B1);

                    pRGB[3] = (byte)(R2 < 0 ? 0 : R2 > 255 ? 255 : R2);
                    pRGB[4] = (byte)(G2 < 0 ? 0 : G2 > 255 ? 255 : G2);
                    pRGB[5] = (byte)(B2 < 0 ? 0 : B2 > 255 ? 255 : B2);
#else
                    pRGB[0] = (byte)(R1);
                    pRGB[1] = (byte)(G1);
                    pRGB[2] = (byte)(B1);

                    pRGB[3] = (byte)(R2);
                    pRGB[4] = (byte)(G2);
                    pRGB[5] = (byte)(B2);
#endif

                    pRGB += 6;
                    pYUV += 4;
                }
            }
        }
    } 
```

如果你决定在 C++ 中实现它

```
void YUV2RGB(void *yuvDataIn,void *rgbDataOut, int w, int h, int outNCh)
{

    const int ch2 = 2 * outNCh;

    unsigned char* pRGBs = (unsigned char*)rgbDataOut;
    unsigned char* pYUVs = (unsigned char*)yuvDataIn;

    for (int r = 0; r < h; r++)
    {
        unsigned char* pRGB = pRGBs + r * w * outNCh;
        unsigned char* pYUV = pYUVs + r * w * 2;

        //process two pixels at a time
        for (int c = 0; c < w; c += 2)
        {
            int C1 = pYUV[1] - 16;
            int C2 = pYUV[3] - 16;
            int D = pYUV[2] - 128;
            int E = pYUV[0] - 128;

            int R1 = (298 * C1 + 409 * E + 128) >> 8;
            int G1 = (298 * C1 - 100 * D - 208 * E + 128) >> 8;
            int B1 = (298 * C1 + 516 * D + 128) >> 8;

            int R2 = (298 * C2 + 409 * E + 128) >> 8;
            int G2 = (298 * C2 - 100 * D - 208 * E + 128) >> 8;
            int B2 = (298 * C2 + 516 * D + 128) >> 8;

            //unsurprisingly this takes the bulk of the time.
            pRGB[0] = (unsigned char)(R1 < 0 ? 0 : R1 > 255 ? 255 : R1);
            pRGB[1] = (unsigned char)(G1 < 0 ? 0 : G1 > 255 ? 255 : G1);
            pRGB[2] = (unsigned char)(B1 < 0 ? 0 : B1 > 255 ? 255 : B1);

            pRGB[3] = (unsigned char)(R2 < 0 ? 0 : R2 > 255 ? 255 : R2);
            pRGB[4] = (unsigned char)(G2 < 0 ? 0 : G2 > 255 ? 255 : G2);
            pRGB[5] = (unsigned char)(B2 < 0 ? 0 : B2 > 255 ? 255 : B2);

            pRGB += ch2;
            pYUV += 4;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:31:00.993

我刚刚找到了一段可能对您有所帮助的旧代码。使用 OpenCVSharp 进行 YUV 转换（免责声明：我删除了一些不必要的代码并且没有对此进行测试！）

```
IplImage yuvImage = new IplImage(w, h, BitDepth.U8, 3);
IplImage rgbImage = new IplImage(w, h, BitDepth.U8, 3);

Cv.CvtColor(yuvImage, rgbImage, ColorConversion.CrCbToBgr); 
```

回答您的其他问题 - 将 byte[] 转换为 Bitmap 使用此

```
int w= 100;
int h = 200;
int ch = 3;

byte[] imageData    = new byte[w*h*ch]; //you image data here
Bitmap bitmap       = new Bitmap(w,h,PixelFormat.Format24bppRgb);
BitmapData bmData   = bitmap.LockBits(new System.Drawing.Rectangle(0, 0, bitmap.Width, bitmap.Height), ImageLockMode.ReadWrite, bitmap.PixelFormat);
IntPtr pNative      = bmData.Scan0;
Marshal.Copy(imageData,0,pNative,w*h*ch);
bitmap.UnlockBits(bmData); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:48:51.773

该代码中最大的违规者是使用`Bitmap.SetPixel`; 在每个内部循环迭代中执行此操作非常慢。[相反，使用一个字节数组来存储您的 RGB 值，一旦它被填充，作为一个步骤](http://msdn.microsoft.com/en-us/library/zy1a2d14.aspx)将它复制到位图中。

其次，要了解 y、u 和 v 是字节，因此只能有 256 个可能的值。因此，为 r、g 和 b 构建查找表是完全可行的，因此您不必在内部循环中执行任何计算。

最后，如果你真的想要性能，你必须使用指针算法在 C++ 中编写它，并在所有优化的情况下进行编译。由于每次迭代都对独立数据进行操作，因此该循环也是[并行 for的一个非常好的候选者。](http://msdn.microsoft.com/en-us/library/gg675934.aspx)也可以使用[SSE 内在函数](http://msdn.microsoft.com/en-us/library/y0dh78ez%28v=vs.71%29.aspx)进一步优化这一点，每条指令转换几个像素。

希望这可以帮助您入门。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-27T18:30:17.520

一种更快的模式。两个乘法和两个相加每像素少：

```
private static unsafe void YUV2RGBManaged(byte[] YUVData, byte[] RGBData, int width, int height)
{
    //returned pixel format is 2yuv - i.e. luminance, y, is represented for every pixel and the u and v are alternated
    //like this (where Cb = u , Cr = y)
    //Y0 Cb Y1 Cr Y2 Cb Y3 

    /*http://msdn.microsoft.com/en-us/library/ms893078.aspx
     * 
     C = 298 * (Y - 16) + 128
     D = U - 128
     E = V - 128
     R = clip(( C           + 409 * E) >> 8)
     G = clip(( C - 100 * D - 208 * E) >> 8)
     B = clip(( C + 516 * D          ) >> 8)

     * here are a whole bunch more formats for doing this...
     * http://stackoverflow.com/questions/3943779/converting-to-yuv-ycbcr-colour-space-many-versions
     */

    fixed(byte* pRGBs = RGBData, pYUVs = YUVData)
    {
        for (int r = 0; r < height; r++)
        {
            byte* pRGB = pRGBs + r * width * 3;
            byte* pYUV = pYUVs + r * width * 2;

            //process two pixels at a time
            for (int c = 0; c < width; c += 2)
            {
                int C1 = 298 * (pYUV[1] - 16) + 128;
                int C2 = 298 * (pYUV[3] - 16) + 128;
                int D = pYUV[2] - 128;
                int E = pYUV[0] - 128;

                int R1 = (C1 + 409 * E) >> 8;
                int G1 = (C1 - 100 * D - 208 * E) >> 8;
                int B1 = (C1 + 516 * D) >> 8;

                int R2 = (C2 + 409 * E) >> 8;
                int G2 = (C2 - 100 * D - 208 * E) >> 8;
                int B2 = (298 * C2 + 516 * D) >> 8;

                //check for overflow
                //unsurprisingly this takes the bulk of the time.
                pRGB[0] = (byte)(R1 < 0 ? 0 : R1 > 255 ? 255 : R1);
                pRGB[1] = (byte)(G1 < 0 ? 0 : G1 > 255 ? 255 : G1);
                pRGB[2] = (byte)(B1 < 0 ? 0 : B1 > 255 ? 255 : B1);

                pRGB[3] = (byte)(R2 < 0 ? 0 : R2 > 255 ? 255 : R2);
                pRGB[4] = (byte)(G2 < 0 ? 0 : G2 > 255 ? 255 : G2);
                pRGB[5] = (byte)(B2 < 0 ? 0 : B2 > 255 ? 255 : B2);

                pRGB += 6;
                pYUV += 4;
            }
        }
    }
} 
```

# vim - 为什么 vim 不选择内部括号，而是选择引号？

> ID：16107166
> 
> 赞同：0
> 
> 时间：2013-04-19T14:37:14.937
> 
> 标签：vim

在第 1 行，我将依靠命令`ci"`来更改引号内的内容，并且效果很好。然而，用括号尝试同样的方法是行不通的。我的手指一直在打字`ci(`，但什么也没有发生。我错过了什么？文本对象文档告诉我这应该可行。我错过了什么？

```
 works("")
  fails() 
```

**在评论中找到答案**

这是我在我的 .vimrc 中添加的片段，以使事情按我预期的方式工作。谢谢您的帮助！

```
function New_cib()
    if search("(","bn") == line(".")
        sil exe "normal! f)ci("
        sil exe "normal! l"
        startinsert
    else
        sil exe "normal! f(ci("
        sil exe "normal! l"
        startinsert
    endif
endfunction

nnoremap ci( :call New_cib()<CR>
nnoremap cib :call New_cib()<CR> 
```

# python - 打开多个文件并对其执行操作

> ID：16107167
> 
> 赞同：0
> 
> 时间：2013-04-19T14:37:14.777
> 
> 标签：python, file

我有 3 个文件，其中包含目录中其他文件的列表。我正在尝试获取列表中的文件并将它们复制到新目录。当我收到 IOError: [Errno 2] No such file or directory 时，我想我正在寻找打开文件的最佳方式。我尝试使用 with 打开文件，但无法让我的操作正常工作。这是我的代码和我正在尝试阅读的文件之一。

```
import shutil
import os

f=open('polymorphI_hits.txt' 'polymorphII_hits.txt' 'polymorphIII_hits.txt')
res_files=[line.split()[1] for line in f]
f=close()

os.mkdir(os.path.expanduser('~/Clustered/polymorph_matches'))

for file in res_files:
    shutil.copy(file, (os.path.expanduser('~/Clustered/polymorph_matches')) + "/" + file)

PENCEN.res      2.res   number molecules matched:       15      rms deviation   0.906016
PENCEN.res      3.res   number molecules matched:       15      rms deviation   1.44163
PENCEN.res      5.res   number molecules matched:       15      rms deviation   0.867366 
```

编辑：我使用下面的 Ayas 代码来解决这个问题，但现在得到 IOError: [Errno 2] No such file or directory: 'p'。我猜它读取文件名的第一个字符并在那里失败，但我不知道为什么。

```
res_files = []
for filename in 'polymorphI_hits.txt' 'polymorphII_hits.txt' 'polymorphIII_hits.txt':
    res_files += [line.split()[1] for line in open(filename)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:53:51.943

Python 将连续的字符串常量视为单个字符串，因此该行...

```
f=open('polymorphI_hits.txt' 'polymorphII_hits.txt' 'polymorphIII_hits.txt') 
```

...实际上被解释为...

```
f=open('polymorphI_hits.txtpolymorphII_hits.txtpolymorphIII_hits.txt') 
```

...大概是指一个不存在的文件。

我不相信有一种方法可以`open()`在一次通话中打开多个文件，所以你需要改变......

```
f=open('polymorphI_hits.txt' 'polymorphII_hits.txt' 'polymorphIII_hits.txt')
res_files=[line.split()[1] for line in f]
f=close() 
```

......更像......

```
res_files = []
for filename in 'polymorphI_hits.txt', 'polymorphII_hits.txt', 'polymorphIII_hits.txt':
    res_files += [line.split()[1] for line in open(filename)] 
```

不过，其余代码看起来还不错。

# ruby-on-rails - 在注册 Rails 应用程序的用户行中保持“位置”

> ID：16107173
> 
> 赞同：0
> 
> 时间：2013-04-19T14:37:28.287
> 
> 标签：ruby-on-rails, devise

我正在使用 Rails 和 Devise，我想做以下事情：

当用户进入登陆页面时，告诉他有多少人“领先”他（即已经注册测试版的人）。这就像知道有多少人已经在系统上一样容易，所以这很容易。

但是，我希望能够跟踪特定用户在注册行中的位置，并且该位置可以更改。如何？好吧，如果一个用户（注册后）在 Facebook 上分享他的注册信息（将提供一个 Facebook 分享按钮），我想让他在网上获得 2 个位置。

我想知道什么是跟踪这些位置以及如何存储它们的好方法，考虑到它们可以根据它们是否在 Facebook（或 Twitter）上共享而改变。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:01:11.660

用户模型将需要一个位置整数属性和方法来移动更高或更低。值得庆幸的是，存在一个伟大的宝石来提供该功能。看看[https://github.com/swanandp/acts_as_list](https://github.com/swanandp/acts_as_list)。

您需要采取的步骤是：

1.  添加`gem 'acts_as_list'`到您的 Gemfile
2.  将整数`position`属性添加到用户模型（如果它已经存在，则通过迁移）
3.  `move_higher`在您通过社交媒体分享时调用的操作中添加调用（意味着将位置设置为较低的数字）

# c# - 我可以将对象分配给实体对象吗？

> ID：16107179
> 
> 赞同：4
> 
> 时间：2013-04-19T14:37:48.660
> 
> 标签：c#, entity-framework-4

我正在使用 ASP.NET MVC4 Web API 和我的 PUT 操作，我想做这样的事情：

```
public void Put(string id, [FromBody]Foo value)
{
    var context = new FooBarEntities();
    Foo existingFoo = context.Foos.Where(x => x.Id == id).First();
    existingFoo = value;
    context.SaveChanges();
} 
```

`Foo value`但不会保存对象中的更改。如果我要执行每个属性，它会起作用，如下所示：

```
public void Put(string id, [FromBody]Foo value)
{
    var context = new FooBarEntities();
    Foo existingFoo = context.Foos.Where(x => x.Id == id).First();
    existingFoo.Prop1 = value.Prop1;
    existingFoo.Prop2 = value.Prop2;
    context.SaveChanges();
} 
```

有没有一种方法可以通过分配对象来更新每个属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:42:48.107

这绝对行不通：

```
Foo existingFoo = context.Foos.Where(x => x.Id == id).First();
existingFoo = value; 
```

您正在查找它，然后立即用完全不同的东西覆盖引用。

我想你想要`attach`你`value`的上下文然后做一个保存。[更像这样](https://stackoverflow.com/a/4212581/29)的东西可能会为你做：

```
context.Foos.AddObject(value);
context.ObjectStateManager.ChangeObjectState(value, System.Data.EntityState.Modified);
context.SaveChanges(); 
```

这不需要您首先加载要更新的对象，这很好。如果那不这样做，那么知道这被称为`disconnected`更新可能会帮助您未来的谷歌搜索。

如果您已经拥有要更新的对象以及新副本，我不知道有什么干净的东西可以为您合并它们。

* * *

[我以前做过的](https://github.com/mharen/service-tracker/blob/master/service-tracker-mvc/Controllers/SiteController.cs#L63)另一种方式看起来更像这样，这可能感觉不那么老套：

```
var entity = context.Entry(value);
entity.State = EntityState.Modified;
context.SaveChanges(); 
```

或更简洁地说：

```
context.Entry(value).State = EntityState.Modified;
context.SaveChanges(); 
```

不过，我不记得这是不是内置的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:43:49.483

简短的回答：没有。

但是有很多方法可以获得相同的结果，我曾经编写过这段代码，它使用反射来复制对象的所有属性：

```
 public void CopyLinqObject(object obj_source, object obj_dest)
    {
        Type t_source = obj_source.GetType();
        PropertyInfo[] p_source = t_source.GetProperties();

        Type t_dest = obj_dest.GetType();
        PropertyInfo[] p_dest = t_dest.GetProperties();

        foreach (PropertyInfo ps in p_source)
        {
            foreach (PropertyInfo pd in p_dest)
            {
                if (ps.Name == pd.Name)
                {
                    if (ps.PropertyType == pd.PropertyType)
                    {
                        if (ps.PropertyType.IsSerializable)
                        {
                            pd.SetValue(obj_dest, ps.GetValue(obj_source, null), null);
                        }
                    }
                    else
                    {
                        if (ps.PropertyType.BaseType == pd.PropertyType.BaseType)
                        {
                            if (ps.PropertyType.IsSerializable)
                            {
                                if (ps.GetValue(obj_source, null) != null)
                                {
                                    try
                                    {
                                        pd.SetValue(obj_dest, ps.GetValue(obj_source, null), null);
                                    }
                                    catch
                                    {
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:43:52.313

> 有没有一种方法可以通过分配对象来更新每个属性？

**不**，EF 跟踪属性的变化，它们的类实现了`inotifypropertychanged`，当您只是更改变量引用时，您没有更改属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T14:42:42.357

您不能以这种方式将一个对象的属性“分配”给另一个对象。您的代码只是更改变量existingFoo 的值。

您可以实现自己的属性复制代码，也可以查看将类附加到现有数据上下文。

# ios - 发送到已释放实例的消息 - 视为属性

> ID：16107183
> 
> 赞同：1
> 
> 时间：2013-04-19T14:37:59.300
> 
> 标签：ios, objective-c, cocoa-touch, memory-management, automatic-ref-counting

在我的应用程序中，您单击一个显示另一个页面的按钮。每当您单击视图上的按钮时，它都会崩溃并显示：

![图像](https://i.stack.imgur.com/XARL9.png)

`IBAction`在按钮上：

```
- (IBAction)searchOptions:(id)sender {
    FilterViewController *ctrl = [[FilterViewController alloc] init];
    [UIView transitionFromView:self.view toView:ctrl.view duration:1 options:UIViewAnimationOptionTransitionCurlUp completion:nil];

    [self.navigationController pushViewController:ctrl animated:NO];
} 
```

在 .h 文件中，我有一个前向类声明并设置属性：

```
#import "FilterViewController.h"
@class FilterViewController;
@property (strong) FilterViewController *filterViewController; 
```

我不确定这里发生了什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:44:24.573

假设您使用的是 ARC，您的`ctrl`实例永远不会被保留，因此它会被释放和释放。您需要保持对该对象的强引用。

也许分配`ctrl`给该`filterViewController`属性是您的本意。

```
- (IBAction)searchOptions:(id)sender {
    FilterViewController *ctrl = [[FilterViewController alloc] init];
    [UIView transitionFromView:self.view toView:ctrl.view duration:1 options:UIViewAnimationOptionTransitionCurlUp completion:nil];

    self.filterViewController = ctrl;

    [self.navigationController pushViewController:ctrl animated:NO];
} 
```

**更新**：

没关系。我完全错过了你推`ctrl`到 nab 控制器的最后一行。鉴于此，我最初的答案根本不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:45:41.593

在你`- (IBAction)searchOptions:(id)sender`这样做

```
- (IBAction)searchOptions:(id)sender {
    self.filterViewController = [[FilterViewController alloc] init];
    [UIView transitionFromView:self.view self.filterViewController.view duration:1 options:UIViewAnimationOptionTransitionCurlUp completion:nil];

    [self.navigationController pushViewController:self.filterViewController animated:NO];
} 
```

# matlab - Matlab递归曲线拟合与自定义方程

> ID：16107187
> 
> 赞同：0
> 
> 时间：2013-04-19T14:38:27.083
> 
> 标签：matlab, recursion, curve-fitting

我有一条曲线`IxV`。我也有一个方程，我想拟合这`IxV`条曲线，所以我可以调整它的常数。它由以下给出：

`I = I01(exp((V-R*I)/(n1*vth))-1)+I02(exp((V-R*I)/(n2*vth))-1)`

`vth`并且`R`是已知的常数，所以我只想实现`I01`, `I02`, `n1`, `n2`. 问题是：如你所见，我依赖于自己。我试图使用曲线拟合工具箱，但它似乎不适用于递归方程。

有没有办法让曲线拟合工具箱对此起作用？如果没有，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:18:23.477

假设`I01`and`I02`是变量而不是函数，那么您应该像这样设置问题：

```
a0 = [I01 I02 n1 n2];
MinFun = @(a) abs(a(1)*(exp(V-R*I)/(a(3)*vth))-1) + a(2)*(exp((V-R*I)/a(4)*vth))-1) - I);

aout = fminsearch(a0,MinFun); 
```

通过减去 I 并取绝对值，两边相等的点将`MinFun`是零（最小化）的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:47:59.083

不，CFTB 不能适应这种递归定义的函数。而 I 中的错误，由于 I 的真实值对于任何点都是未知的，因此会产生一种变量错误问题。你所拥有的只是 I 的“测量”值。

I 中的错误问题可能很严重，因为 I 中的任何错误，或缺乏拟合、噪声、模型问题等，都将用于表达式本身。然后你对这些不准确的值取幂，可能会造成混乱。

您也许可以使用迭代方法。因此像

```
% 0\. Initialize I_pred
I_pred = I;

% 1\. Estimate the values of your coefficients, for this model:
% (The curve fitting toolbox CAN solve this problem, given I_pred)
I = I01(exp((V-R*I_pred)/(n1*vth))-1)+I02(exp((V-R*I_pred)/(n2*vth))-1)

% 2\. Generate new predictions for I_pred
I_pred = I01(exp((V-R*I_pred)/(n1*vth))-1)+I02(exp((V-R*I_pred)/(n2*vth))-1)

% Repeat steps 1 and 2 until the parameters from the CFTB stabilize. 
```

仅当您的起始值良好且模型/数据中没有大的错误/噪音时，上述伪代码才会起作用。即使在美好的一天，上述方法也可能不会很好地收敛。但除此之外，我看不到希望。

# android - 如何处理 Android 片段？您使用单个项目还是 2 个不同的项目

> ID：16107189
> 
> 赞同：0
> 
> 时间：2013-04-19T14:38:35.140
> 
> 标签：android, android-fragments, project

我正在开发一个android项目，这个项目使用片段。如您所知，android SDK 中的片段因版本而异。

对于 API LEVEL >= 11 和 API_LEVEL < 11，片段使用和基础库非常不同。对于 API_LEVEL>= 11，活动类支持片段，但是对于 API_LEVEL <11，您需要使用从支持库派生的片段活动类。那么我应该复制所有活动吗？或者我应该创建重复的包？还是不同的项目？

你怎么能解决这个问题聪明的家伙？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:40:26.783

> 那么我应该复制所有活动吗？

不。

> 或者我应该创建重复的包装吗？

不。

> 还是不同的项目？

不。

> 你怎么能解决这个问题聪明的家伙？

使用`FragmentActivity`和 Android 支持包。片段的实现从 API 级别 4 到 API 级别 17（并且可能超过）。

将来某个时候，当您放弃对 API 级别 10 及以下的支持时，您可以从`FragmentActivity`to切换`Activity`并更新其余的导入（例如，从`android.support.v4.app.Fragment`to `android.app.Fragment`）。

# outlook - Outlook 2003 通讯簿

> ID：16107195
> 
> 赞同：0
> 
> 时间：2013-04-19T14:38:58.470
> 
> 标签：outlook

我刚刚将一位用户从 Outlook 2003 转换为 Outlook 2013。在 Outlook 2003 通讯簿中，他有 35 个电子邮件地址。因为添加到通讯录选项没有打开。他回复的其他电子邮件都没有添加到他的地址簿中（大约 500 封）。

当我在键入前 3 个字母 (mar) 后尝试向 maryjane@xyz.com 发送电子邮件时，将显示电子邮件地址 (maryjane@xyz.com)。我的问题是。如何提取未添加到通讯簿的 500 封电子邮件以创建文件以上传到 Outlook 2013？

谢谢你，

道格拉斯·L·麦克杜菲 doug.mcduffie@savacable.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:48:47.830

您将需要导出昵称缓存。Outlook 2003 将昵称存储在 NK2 文件中，但 Outlook 2013 将昵称存储在收件箱文件夹中的隐藏邮件中。

你升级到位了吗？Outlook 2013 应该选择旧的 NK2 文件。

否则可以以编程方式导入 NK2 文件。您可以为此使用[Redemption](http://www.dimastr.com/redemption)：创建 RDOSession 对象的实例，使用 RDOSession.GetNicknames("{full path to NK2​​ file}") 打开 NK2 文件文件，从目标存储打开昵称集合（例如 RDOSession.Stores。 DefaultStore.GetNickNames，然后一次复制一个昵称。

# function - 解决python中读取文件行数时的内存错误？

> ID：16107200
> 
> 赞同：-1
> 
> 时间：2013-04-19T14:39:08.123
> 
> 标签：function, python-2.7, readline

我正在尝试在 python 中读取一些文本文件，计算它们的行号，最后将这些计数相加。当代码为每个文件运行时，它会一直工作，直到它到达一个更大的文件，并且我收到此错误 'Memory error' 。请帮助我如何解决它并继续。

这是我的代码：

```
def Count_Lines():    
  infile = open(File_Name,'r').read()
  nLine = infile.count('\n')
  print nLine 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:09:04.957

调用`read()`将读取整个文件的内容，这可能太大而无法放入内存。

这会逐行读取文件，避免将整个内容存储在内存中（除非整个内容是一大行......）

```
count = 0
for file in files:
  with open(file) as F:
    file_count = sum( 1 for line in F )
  count += file_count 
```

# c# - 使用 x86/x64 C API 的 C# AnyCPU 库 - 打包结构、调用和回调

> ID：16107201
> 
> 赞同：2
> 
> 时间：2013-04-19T14:39:08.033
> 
> 标签：c#, c++, c, marshalling, memory-alignment

我现在正在搜索和尝试各种解决方案大约两周，以使以下成为可能：将 32 位库和 C++/.NET 包装器移植到 64 位（用于 C++）和 AnyCpu（用于 .NET）。

有：

*   一个 C++ 库，它公开了一个 C 风格的接口，进一步称为“大脑”（我们都这么称呼它）
*   使用 The Base 的第二个 C++ 库 (DDC) 更像是它的包装器，因为它包含了一个非常好的接口
*   一个 .NET 库 (DDN)，它使用 The Base 并充当 C# 和 VB 的包装器
*   一个 JAVA 库（DDJ）[不重要，我们有单独的开发来处理这个]
*   PYTHON 库 (DDP) [也不重要]

这些库非常庞大，有数千种结构和功能（与数据库和一些不同的以太网设备接口）。有很多我什至不知道为什么要保留在代码中的功能，但是要求就是要求，必须遵守...

整个驱动程序和数据库连接器只有 32 位配置。内部没有任何相关文档，并且必须修改大量代码（不是重写或重构，而是修改）。

所有结构都在 4 个字节上对齐，.net 和 C API 之间的编组在 32 位上工作正常。

**新要求是创建 AnyCPU .NET 配置，根据运行 VB/C# 应用程序的系统分别使用 64 位和 32 位 Base。**

到目前为止一切顺利 - DDC 与 The Base 配合得很好。但是当涉及到 DDN - 有很多 s### 发生：**要与 Base 编组和解组的结构有一个 4 字节的包......**因此，Base 结构的对齐方式已切换到32 位和 64 位均为 4 个字节（分别为 4 个和 8 个字节）。

**我最初的计划**是针对 32 位和 64 位配置分别对齐 4 和 8 字节，但是在与 Base C 包装器接口的 .NET API 中还有很多工作要做……调用和回调是分开的在不同的命名空间中，每个都包括各自的库，但结构很痛苦......

**第二个计划**是将所有内容与 4 或 8 对齐，但是有很多关于结构和一元运算符打包的警告......除了这些警告之外，没有什么好用的了。堆损坏，关机崩溃等。

**第三种解决方案**是切换回解决方案 1，并在两个命名空间（与 32 位 Base 库交互的命名空间和与 64 位 Base 库交互的命名空间）上创建具有适当包的结构

我将不胜感激任何反馈。如果有任何不清楚的地方，请随时询问更多信息。

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T21:14:05.953

根据我的经验，将指针从/到非托管代码传递到托管代码是一个非常糟糕的主意。如果您使用回调，最终结果可能比预期的要差。您必须记住，.NET 对内存进行碎片整理，因此指针的物理地址可能会有所不同（因此您可以想象可能发生的事情）。

* * *

**解决方案 A：**让它变得简单，如果您想将非托管与托管混合使用，请使用非托管 C 托管的 C++（因此，没有任何 CPU 解决方案）。Oracle 数据访问是该解决方案的一个示例。

* * *

**解决方案 B：**将解决方案拆分为两个项目，一个是托管的，一个是非托管的。层之间共享的对象必须在非托管端。您必须忘记非托管项目和托管项目之间的回调。此解决方案用于 .NET 的 SQLite 驱动程序。

# c++ - 将 CString 写入 .bin 文件

> ID：16107203
> 
> 赞同：0
> 
> 时间：2013-04-19T14:39:17.230
> 
> 标签：c++, binaryfiles, fwrite

我有一个带有“HEX”值的 CString，它看起来像这样：“0030303100314a”

现在我想把它存储到一个 bin 文件中，这样如果我用十六进制编辑器打开它，我们显示的数据就会像字符串一样显示：00 30 30 30 31 00 31 4a

我未能正确准备数据。即使我使用“wb”模式，它也总是以标准 ASCII 格式保存。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:14:17.483

好的，您的误解是“wb”意味着所有输出都以“二进制”形式发生。这根本不是它的作用。有二进制输出操作，你应该以二进制模式打开文件才能使用它们，但你仍然必须使用二进制输出操作。这也意味着您必须将十六进制字符转换为整数值。

这就是我可能会如何完成你的任务

```
for (int i = 0; i + 1 < str.GetLength(); i += 2)
{
    int hex_value = 16*to_hex(str[i]) + to_hex(str[i+1]); // convert hex value
    fputc(hex_value, file);
}

static int to_hex(TCHAR ch)
{
    return ch >= '0' && ch <= '9' ? ch - '0' : ch - ('A' - 10);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:42:23.933

该程序`od`将获取一个文件并将其转换为各种表示形式。例如，如果您说`od -x myfile.bin`， myfile.bin 的内容将打印为十六进制字节，就像您要查找的内容一样。你也可以让 C++ 做到这一点，但也许只是对数据进行后处理以使其看起来像你想要的那样更容易。

# node.js - 显示消息所有者

> ID：16107209
> 
> 赞同：1
> 
> 时间：2013-04-19T14:39:53.720
> 
> 标签：node.js, mongodb, node-mongodb-native

请帮助我理解 mongodb。有三个集合：线程、消息和用户。

线

```
{ "title" : "1212", "message" : "12121", "user_id" : "50ffdfa42437e00223000001", "date" : ISODate("2013-04-11T19:48:36.878Z"), "_id" : ObjectId("51671394e5b854b042000003") } 
```

信息

```
{ "message" : "text", "image" : null, "thread_id" : "51671394e5b854b042000003", "user_id" : "516d08a7772d141766000001", "date" : ISODate("2013-04-17T15:58:07.021Z"), "_id" : ObjectId("516ec68fb91b762476000001") } 
```

用户

```
{ "user" : "admin", "date" : ISODate("2013-04-16T08:15:35.497Z"), "status" : 1, "_id" : ObjectId("516d08a7772d141766000001") } 
```

如何显示当前线程的所有消息并从用户集合中获取用户名（用于评论）？

此代码仅获取没有用户名的消息

```
exports.getMessages = function(id, skip, callback) {
var skip = parseInt(skip);

messages.find({thread_id: id}).sort({date: 1}).skip(skip).limit(20).toArray(
    function(e, res) {
    if (e) {
        callback(e)}
    else callback(null, res)
});
}; 
```

Node.js 和 mongo 本机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:24:46.377

通常，Mongo 使用**嵌入式文档**或**引用**来维护关系。[这是来自 mongo 文档的链接，值得一读](http://docs.mongodb.org/manual/core/data-modeling/)。

您当前正在做的是在您的消息集合中存储对用户集合的**手动引用。**Mongo 手动引用需要额外的查询才能获取引用的数据。在这种情况下，使用基于引用的关系会起作用，**但会导致 N+1 查询问题**。这意味着您必须对要显示的每条消息以及消息的原始查询进行附加查询。[参考文献在这里更详细地解释。](http://docs.mongodb.org/manual/reference/database-references/)一种解决方案是合并**[DBRefs](http://docs.mongodb.org/manual/reference/database-references/#dbref)**，这需要语言特定的驱动程序支持。

另一种选择是使用**嵌入式文档。**在这种情况下，您将存储嵌入在消息对象中的相关用户对象。[这是另一个链接到 mongo 文档的一个很好的例子。](http://docs.mongodb.org/manual/tutorial/model-embedded-one-to-one-relationships-between-documents/#data-modeling-example-one-to-one)在这种情况下，您将进行一个查询，该查询将返回所有消息，其中嵌入了每个相关的用户对象。尽管嵌入式文档鼓励重复数据，但在许多情况下它们提供了性能优势。所有这些信息都在 mongo 文档中进行了解释，可以详细阅读以进一步了解 mongo 的数据建模。

此外，[mongoose](http://mongoosejs.com/)库非常棒，并且有一个有助于参考的[填充功能。](http://mongoosejs.com/docs/populate.html)

# c++ - 二进制到格雷码，反之亦然

> ID：16107215
> 
> 赞同：1
> 
> 时间：2013-04-19T14:40:02.793
> 
> 标签：c++, binary, gray-code

所以我想编写一个程序，将二进制值作为输入并将其转换为格雷码，反之亦然。

这是我最初写的：

```
#include <iostream>

using namespace std;

int main()
{

    int Choice;
    bool g0,g1,g2,g3,b0,b1,b2,b3;

    cout<<"For Binary To Gray Code Enter 1." << endl <<"For Gray Code to Binary Enter 2." << endl;;
    cin>>Choice;

    if(Choice==1)
    {

        cout<<"Enter the Binary Bits." << endl;

        cin>>b0>>b1>>b2>>b3;

        cout<<"Orginal Binary Form: "<<b3 <<b2 <<b1 <<b0 << endl;

        g3=b3;
        g2=b3^b2;
        g1=b2^b1;
        g0=b1^b0;

        cout<<"Converted Gray Code Form: "<<g3 <<g2 <<g1 <<g0 << endl;
    }
    else if(Choice==2)
    {

        cout<<"Enter The Gray Code Bits." << endl;

        cin>>g0>>>g1>>g2>>g3;

        cout<<"Original Gray Code Form: "<<g3 <<g2 <<g1 <<g0 << endl;

        b3=g3;
        b2=b3^g2;
        b1=b2^g1;
        b0=b1^g0;

        cout<<"Converted Binary Form: "<<b3 <<b2 <<b1 <<b0 << endl;
    }

    return 0;
} 
```

现在这适用于 4 位，但是

1.  我想要一些东西来确定用户在运行时输入的二进制/灰色代码的大小。

    我做了一些研究，发现在这种情况下使用向量，但是因为在大学里我们刚刚开始使用 C++，所以我对向量甚至数组都不熟悉。还有什么我可以用来实现它的吗？如果没有，谁能告诉我如何使用向量？

2.  其次，我想在一行中输入没有空格。

    例子：

    `1011`而不是`1 0 1 1`或在单独的行中为每个位获取输入。

3.  现在我也意识到我将无法知道否。位提前，所以我用来实现异或运算的位公式也会改变。是否可以声明一个二进制和格雷码`bool`变量，并以某种方式对这些变量执行 XOR 操作，而不是使用更简单的语句而不是复杂的单个位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:57:09.833

您可以一次读取一个字符串并评估一个字符，让您开始这样的事情：

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    std::string input
    int Choice;

    cout<<"For Binary To Gray Code Enter 1." << endl <<"For Gray Code to Binary Enter 2." << endl;;
    cin>>Choice;
    cout << "Enter input string: ";
    cin >> input;

    if(Choice==1)
        Gray2Binary(input.c_str(), input.length());
    else
        Binary2Gray(input.c_str(), input.length());

    return 0;
}

void Gray2Binary(char s[], int n)
{
    int state = s[0]=='1' ? 1 : 0;
    int i=0;

    do {
        if (i > 0)
            state ^= s[i++]=='1' ? 1 : 0;

        cout << state;
    }while (i<n);

    cout << endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:25:23.493

我花了 30 分钟来编写、测试和调试。

```
#include <iostream>
#include <cstdlib>
#include <string>

using namespace std;

void printReverse(bool* arr, int size){
    for(int i = size - 1; i >= 0 ; i--)
        cout << arr[i];
    cout << endl;
}
int main(){
    int choice;
    string str;

    cout << "For Binary To Gray Code Enter 1." << endl
        << "For Gray Code to Binary Enter 2." << endl;
    cin >> choice;

    if( choice != 1 && choice != 2)
        return 1;

    if(choice == 1) cout << "Enter the Binary Bits." << endl;
    else cout << "Enter the Gray Code Bits." << endl;

    cin >> str;

    int size = str.size();
    bool arr[size];

    for(int i = 0; i < size; i++)
        if(str[i] == '0')
            arr[i] = false;
        else
            arr[i] = true;

    if(choice == 1) cout << "Orginal Binary Form: ";
    else cout << "Orignal Gray Code Form: ";

    printReverse(arr, size);

    if(choice == 1){
        for(int i = 0; i < size - 1 ; i++) // explain 1
            arr[i] = arr[i] ^ arr[i + 1];
        cout << "Converted Gray Code Form: ";
        printReverse(arr, size);
    } else {
        for(int i = str.size() - 2; i >= 0 ; i--) // explain 2
             arr[i] = arr[i] ^ arr[i + 1];
        cout << "Converted Binary Form: ";
        printReverse(arr, size);
    }
    system("pause");
    return 0;
} 
```

printReverse：（以4位为例）

```
cout << arr[3]; // cout << b3; or cout << g3;
cout << arr[2]; // cout << b2; or cout << g2;
cout << arr[1]; // cout << b1; or cout << g1;
cout << arr[0]; // cout << b0; or cout << g0; 
```

解释1：（以4位为例）

```
// at the beggining, arr[0], arr[1], arr[2], arr[3] are b0, b1, b2, b3
arr[0] = arr[0] ^ arr[1]; // g0 = b0 ^ b1; // arr[0] becomes g0 after assignment
arr[1] = arr[1] ^ arr[2]; // g1 = b1 ^ b2; // arr[1] becomes g1 after assignment
arr[2] = arr[2] ^ arr[3]; // g2 = b2 ^ b3; // arr[2] becomes g2 after assignment
arr[3] = arr[3];          // g3 = b3;      // arr[3] becomes g3 after assignment 
```

解释2：（以4位为例）

```
// at the beggining, arr[0], arr[1], arr[2], arr[3] are g0, g1, g2, g3
arr[3] = arr[3];          // b3 = g3;      // arr[3] becomes b3 after assignment
arr[2] = arr[2] ^ arr[3]; // b2 = g2 ^ b3; // arr[2] becomes b2 after assignment
arr[1] = arr[1] ^ arr[2]; // b1 = g1 ^ b2; // arr[1] becomes b1 after assignment
arr[0] = arr[0] ^ arr[1]; // b0 = g0 ^ b1; // arr[0] becomes b0 after assignment 
```

# c# - 如何从 UI 中删除/释放任务的资源？

> ID：16107218
> 
> 赞同：0
> 
> 时间：2013-04-19T14:40:24.100
> 
> 标签：c#, multithreading, winforms, task

从 UI，我创建了一些`Task`，例如：

```
Task taskCancellaCartellaDestinazione = Task.Factory.StartNew(() => CancellaCartellaDestinazione(), CancellationToken.None, TaskCreationOptions.None, TaskScheduler.Default);
taskCancellaCartellaDestinazione.ContinueWith(t => TaskGestioneCartelle(), CancellationToken.None, TaskContinuationOptions.None, TaskScheduler.FromCurrentSynchronizationContext()); 
```

每个`Task`都有自己的变量名，所以我可以直接访问它。如何停止和释放它们的资源？

例如，如果我单击 stop `Button`，则必须停止线程。

在`taskCancellaCartellaDestinazione`我没有看到任何`Abort()`或`Cancel()`功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:48:53.327

1.  `CancellationTokenSource`在开始任务之前创建一个。

2.  将`CancellationToken`来自令牌源的 传递给`CancellaCartellaDestinazione`。

3.  在正文中`CancellaCartellaDestinazione`定期检查取消令牌是否已请求取消，在大多数情况下调用`ThrowIfCancellationRequested()`是合适的。

4.  将该取消令牌传递给`StartNew`而不是`CancellationToken.None`.

5.  当您想取消任务时，请调用`Cancel`.`CancellationTokenSource`

# javascript - 如何从回调中返回值

> ID：16107221
> 
> 赞同：1
> 
> 时间：2013-04-19T14:40:28.773
> 
> 标签：javascript, node.js

我正在使用 node.js 执行 DNS 查找以返回 IP 地址（[http://nodejs.org/api/dns.html](http://nodejs.org/api/dns.html)）。在这个例子中，我可以让我的结果正确记录，尽管我宁愿能够访问回调范围之外的变量。这怎么可能？

我当前的代码：

```
var domain = 'google.co.uk';

dns.lookup(domain, function (err, aRecord) {
    if (err) throw err;
    console.log(aRecord);
}); 
```

理想情况下，我希望能够执行以下操作：

```
var domain = 'google.co.uk';

var myfunction = dns.lookup(domain, function (err, aRecord) {
    if (err) throw err;
    return aRecord;
});

var result = myfuction(domain); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:48:38.137

事实上，这是不可能的，因为它是异步的。您可以将所有代码放在回调中，但这可能不是最好的。

开发人员处理异步操作返回数据的一种方法是使用 Promises。我读过的关于承诺概念的最好的文章是这篇：[http ://blog.jcoglan.com/2013/03/30/callbacks-are-imperative-promises-are-functional-nodes-biggest-missed-opportunity /](http://blog.jcoglan.com/2013/03/30/callbacks-are-imperative-promises-are-functional-nodes-biggest-missed-opportunity/)读一读！

在 node 中，一个众所周知的 promise 库是 Q：[https ://github.com/kriskowal/q](https://github.com/kriskowal/q)

如果你想对 Javascript 中的异步行为/管理有更多的概念性方法，Trevor Burnham 有一本非常好的书，叫做“Async Javascript” [http://pragprog.com/book/tbajs/async-javascript](http://pragprog.com/book/tbajs/async-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:55:02.383

您可以（并且应该）使用 Promise，就像 Simon 建议的那样。除非拼写错误，否则以下内容应该有效。

```
var Q = require('q');

var domain = 'google.co.uk';

function myFunction(domain){

    var deferred = Q.defer();

    dns.lookup(domain, function (err, aRecord) {
        if (err) {
            return deferred.reject(err);
        }
        deferred.resolve(aRecord);
    });

    return deferred.promise;
}    

var lookupPromise = myFunction(domain);

lookupPromise.then(function(response){
    console.log(response);
}) 
```

这种方法的一个好处是您可以将 Promise 作为参数传递给其他函数。然后你可以编写一个函数来使用你的 dns 查找函数返回的数据，方法是让它接受（并返回）一个承诺。

```
function useLookup(lookupPromise){
    var deferred = Q.defer();

    lookupPromise.then(function(lookupResponse){
        deferred.resolve(lookupResponse);
    }).fail(function(err){
        deferred.reject(err);
    })

    return deferred.promise;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:41:37.760

你不能。Javascript是异步的。您必须将所有带有逻辑的代码放入回调中。

Javascript 将在之后继续执行您的代码，`var result = myfuction(domain);`并且不会等待回调执行。结果，您的函数将不返回任何内容（未定义）

# asp.net - 如何在 .aspx 表单中禁用 SharePoint:FormField 验证？

> ID：16107222
> 
> 赞同：1
> 
> 时间：2013-04-19T14:40:29.833
> 
> 标签：asp.net, visual-studio-2010, sharepoint-2010

我有自定义 SharePoint 2010 列表和自定义 aspx 表单来创建、显示和编辑此列表中的项目。列表定义为：

```
<Field Type="User" Name="Analyst1" Required="TRUE" . . ./>
<Field Type="User" Name="Analyst2" Required="TRUE" . . ./>
<Field Type="User" Name="Analyst3" Required="TRUE" . . ./> 
```

在 schema.xml 中。

根据 DevEdit.aspx 中的字段定义为：

```
<SharePoint:FormField runat="server" ID="FormFieldAnalyst1" FieldName="Analyst1" ControlMode="New"/>
<SharePoint:FormField runat="server" ID="FormFieldAnalyst2" FieldName="Analyst2" ControlMode="New"/>
<SharePoint:FormField runat="server" ID="FormFieldAnalyst3" FieldName="Analyst3" ControlMode="New"/> 
```

列表逻辑不需要在创建新列表项时填写所有字段，并且某些“分析员”字段可以稍后指定或由其他用户指定。我的问题是，当我在“新项目”表单中单击“保存”时，我得到“您必须为此必填字段指定一个值”。此类字段的错误消息留空。

我知道，我可以在列表模式中操作属性“必需”，而不是为每个分析师字段设置为“真”，但我必须这样做。我需要的是在实际保存列表项之前在代码隐藏中临时禁用 FormField 元素验证。我尝试过以下 C# 代码：

```
List.ParentWeb.AllowUnsafeUpdates = true;
List.Fields["Analyst2"].Required = false;
List.Fields["Analyst3"].Required = false;
List.Update();
List.ParentWeb.AllowUnsafeUpdates = false; 
```

在 Page_Load() 方法中，但没有成功。单击“保存”并显示“您必须指定...”消息时，仍会验证空白字段。我可以做什么？如何在特定字段的代码隐藏中禁用验证？

提前致谢。

# python - 使用 ListProperty Google App Engine Python 的多对多关系

> ID：16107224
> 
> 赞同：0
> 
> 时间：2013-04-19T14:40:36.893
> 
> 标签：python, google-app-engine, python-2.7, listproperty

我正在构建一个需要访问用户的 facebook 页面的 facebook 应用程序。场景是这样的：-

一个用户（管理员）可以有多个页面，一个页面有多个管理员。每个页面上都可以有多个帖子。我看过谷歌应用引擎文档（建模实体关系）。他们使用 ListProperty 处理多对多关系，使用引用属性处理一对多关系。

我认为的班级结构就像

```
class User(db.Model):
    id = db.StringProperty(required=True)
    name = db.StringProperty(required=True)
    profile_url = db.StringProperty(required=True)
    access_token = db.StringProperty(required=True)
    pages = db.ListProperty(db.Key)

class Page(db.Model):
    id = db.StringProperty()
    name = db.StringProperty()
    page_access_token = db.TextProperty()
    users = db.ListProperty(db.Key)

class Post(db.Model):
    page = db.ReferenceProperty(User,collection_name='posts')
    post_content = db.TextProperty()
    published = db.BooleanProperty() 
```

这是正确的还是我确实需要改变它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:37:19.090

建立多对多关系有不同的方式。使用 ListProperties 是一种方法。如果使用 ListProperties，要记住的限制是每个实体的索引数量有限制，并且总实体大小有限制。这意味着列表中的实体数量有限制（取决于您是先达到索引计数还是实体大小）。请参阅本页底部：[https ://developers.google.com/appengine/docs/python/datastore/overview](https://developers.google.com/appengine/docs/python/datastore/overview)

如果您认为引用的数量将在此限制内起作用，那么这是一个不错的方法。考虑到您不会有成千上万的主页管理员，这可能是正确的方法。

另一种方法是拥有一个中间实体，该实体具有对多对多双方的引用属性。这种方法可以让你扩展得更高，但是由于所有额外的实体写入和读取，这要昂贵得多。

# c# - 在调用方法之前等待后台工作人员完成

> ID：16107226
> 
> 赞同：2
> 
> 时间：2013-04-19T14:40:45.190
> 
> 标签：c#, winforms, backgroundworker

我有一个复制一些文件的后台工作人员。完成文件复制后，我想启动一个应用程序。我遇到的问题是，在复制文件时，它会调用代码来启动应用程序，因此会遇到文件正在使用错误。是否可以进行检查以确保仅在后台工作人员完成时才调用某个方法？

```
private void LaunchApplication(string targetPath, string targetExecutable)
    {
            CopyFiles();

            Process.Start(Path.Combine(targetPath, targetExecutable));
    } 
```

CopyFiles 在 BackGroundWorker 的 DoWork 方法中调用。我希望这在 Process.Start... 被调用之前完全完成。现在我有几个可执行文件绑定到几个按钮，所以我不能把 Process.Start... 放在 RunWorkerCompleted 事件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:37:26.477

如果您放入`CopyFiles()`后台线程，则将执行下一行代码，因此在您的情况下，我**不会**使用后台工作人员。相反，我会阻止直到复制文件完成，然后启动应用程序。设置某种窗口，告诉您的用户稍等片刻。

如果您需要等待并且仍然使用后台工作人员，那么`CopyFiles()`应该在`DoWork`处理程序中并且`Process.Start`应该是`BackgroundWorker.RunWorkerCompleted`事件。

MSDN on RunWorkerCompleted

[RunWorker 已完成](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)

已完成的堆栈溢出示例：

[运行 Worker 完成的示例代码](https://stackoverflow.com/questions/1333058/how-to-wait-correctly-until-backgroundworker-completes)

此外，您可以创建一个全局互斥锁以确保一次只发生一次启动，因此如果您获得多次启动，则只会处理一次。

[Stack Overflow 全局互斥量问题](https://stackoverflow.com/questions/229565/what-is-a-good-pattern-for-using-a-global-mutex-in-c/229567)

# php - 仅当文件存在时才创建目录 (ftp_mkdir)

> ID：16107227
> 
> 赞同：0
> 
> 时间：2013-04-19T14:40:56.973
> 
> 标签：php, ftp, directory

我目前有一个连接到 ftp 目录的程序，如果它找到 csv 文件，运行脚本，然后在脚本对文件运行后，它会创建一个带有日期的备份文件夹并将 csv 文件移动到这个新创建的在 ftp 目录中备份文件夹。

但是，如果根目录中没有 csv 文件，我不想创建备份文件夹，因为没有要移动的文件。我知道解决方案可能非常简单，但我似乎无法弄清楚！

```
 logMessage("Creating backups");
    $ftp_connection = @ftp_connect($ftp_url, $ftp_port, 6000);
    if(!@ftp_login($ftp_connection, $ftp_username, $ftp_password )) {
       logMessage("Could not connect to FTP: [$ftp_url], with Username: [$ftp_username], and Password: [$ftp_password]");
        die();
    }

$date = date('Y_m_d_(His)');

$newBackup = $ftp_root."/".$ftp_backup."backup_$date";

if (ftp_mkdir($ftp_connection, $newBackup)) {
    logMessage ("Successfully created [$newBackup\n]");

    foreach($filesToProcess as $file){
        $pathData = pathinfo($file);      
        if(isset($pathData['extension']) && $pathData['extension'] == 'csv'){

            if(!@ftp_rename($ftp_connection,
                    $ftp_root.'/'.$file,
                    $newBackup."/".$file)
            ){
                logMessage("Unable to move file: $file")
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:45:27.760

您已经使用了 foreach($filesToProcess as $file) ，因此在 $filesToProcess 中它是文件数组。您可以使用 count($filesToProcess) 首先计算文件数，然后如果 count>0 执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:47:43.253

```
// $csv = your checks for string ending to .csv
$ftp_files = ftp_nlist($ftp_connection, ".");
foreach ($ftp_files = $files) {
   if ($files = $csv) {
     // makedir 
```

也许在非常基本的语法中是这样的。ftp_nlist 返回特定目录中所有文件的数组。

# php - 以良好的性能将 image-url 作为调整大小的图像 blob 数据插入数据库

> ID：16107237
> 
> 赞同：-1
> 
> 时间：2013-04-19T14:41:38.850
> 
> 标签：php, mysql

我有一个如下所示的 csv 文件：

```
"image-url","text1","text2","text3","text4" 
```

这应该作为

```
content-of-image-as-blob,"text1","text2","text3","text4" 
```

我以前是通过php来做的，即

1.  读取图片网址
2.  在保持纵横比的同时将大小调整到 150 x 150 像素以内
3.  转换为 blob 数据，即 0x225332525....
4.  插入mysql数据库

当 csv 文件有超过 1000 行并且脚本过早停止时，我发现这需要很长时间（即使 max-execution-time 设置为 2 小时，它在大约 10 分钟后中止）。每个图像大约 10 到 60KB。所以使用服务器的传输速度，比如 1000 行，这相当于 1000 * 60KB，最大只有 60 兆字节。以 1MB/s 的速度应该是一分钟，而以服务器的速度则要少得多。

我如何转换

```
"image-url","text1","text2","text3","text4" 
```

进入

```
content-of-image-as-blob,"text1","text2","text3","text4" 
```

性能比我如何做而且没有中止？

**编辑**：这是我目前的方法

*上传.php：*

```
<?php
    function BildInBLOB($linkadresse)
    {
        $maxsize = 65536;   

      $data = file_get_contents('kleiner.php?link='.urlencode($linkadresse)); //kleiner.php further down
      $serialized_data = serialize($data);

      $size = strlen($serialized_data);

        if ($size < $maxsize) {
            $imgData  = mysql_escape_string($data);
            return $imgData;        
        }
      else
      {
        return false;
      }
    }

   //$felder[0] = image-url

    $kopfzeilenfelder = get_headers($felder[0]);

    if (isset($kopfzeilenfelder[7]))
    {
      if ($kopfzeilenfelder[7] == "Content-Type: image/jpeg" || $kopfzeilenfelder[7] == "Content-Type: image/gif" || $kopfzeilenfelder[7] == "Content-Type: image/png")
      {

        $imageurl = BildInBLOB($felder[0]);
        if ($imageurl == false)
                      mail('test@test.de','Error',$felder[0]);
        $imageurl_typ = returnMIMEType($felder[0]);

          //Einfügen in Datenbank
            $abfragetext = 'INSERT INTO `table` (`content-of-image-as-blob`, `text1`,`text2`,`text3`,`text4`) VALUES (\''.$imageurl.'\', \''.$text1.'\', \''.$text2.'\', \''.$text3.'\', \''.$text4.'\');';

          $abfrage_ergebnis = mysql_query($abfragetext);
      }
      else
      {
        $fehler = true;
      }
    }
    else
    {
        $fehler = true;
        break;
    }
  }
}
?> 
```

*kleiner.php：*

```
<?php
   header('Content-Type: image/jpeg');
   require('SimpleImage.php');
   $image = new SimpleImage();
   $image->load($_GET['link']);
   if ($image->getWidth() > $image->getHeight())
   {    
      $ratio = $width / $image->getWidth();
      $height = $image->getheight() * $ratio;
   }
   else
   {
      $ratio = $height / $image->getHeight();
      $width = $image->getWidth() * $ratio;
   }      
   $image->resize($width,$height);
   $image->output();
?> 
```

编辑：测量 imageurl

```
$time_start = microtime(true);   

$imageurl = BildInBLOB($felder[0]);

$time_end = microtime(true);
$time = $time_end - $time_start;
$datei_handle=fopen('loeschen.txt',"a");
fwrite($datei_handle,$time."\n");
fclose($datei_handle); 
```

结果是

```
4.0833919048309
0.49023699760437
1.4829730987549
0.46650505065918
1.6500248908997
1.6888198852539
1.7747900485992
1.7654030323029
1.7827639579773
1.6984438896179
1.7959661483765
0.5819149017334
1.5812880992889
0.477952003479
0.48433899879456
0.49926495552063
2.6636629104614
1.6903870105743
0.47167086601257
0.59404015541077
0.4657621383667
0.48750114440918
1.5725650787354
0.67707896232605
0.57791996002197
0.69522404670715
3.727931022644
0.59935402870178
0.47536182403564
0.5656099319458
0.74236917495728
0.57420802116394
0.58336305618286
2.6896998882294
2.6945810317993
0.55907297134399
1.1201891899109
0.60288882255554
0.55426001548767
5.7161459922791
4.6411039829254
0.61310982704163
0.63013315200806
2.6628720760345
0.59778094291687
0.58457708358765
0.45639109611511
0.6767098903656
0.67303490638733
0.61607003211975
0.69722104072571
1.5636711120605
0.66522693634033
3.5140080451965
0.58035182952881
0.575355052948
0.60047006607056
0.59423995018005
2.5612559318542
3.721363067627
3.5471968650818
3.5297789573669
0.56819891929626
1.667160987854
0.70830678939819
0.55341696739197
0.76275014877319
0.88022589683533
1.9490652084351
0.96493005752563
1.0359950065613
2.3565669059753
1.7734251022339
1.8485751152039
0.51054096221924
0.77539587020874
2.6769950389862
1.6807489395142
0.47317314147949
0.45396709442139
0.5827260017395
0.67431807518005
0.45959377288818
0.58339309692383
1.4438741207123
0.58361291885376
1.5400068759918
1.639084815979
1.6939740180969
0.56597709655762
0.70935010910034
0.5993390083313
0.47545599937439
0.61747407913208
0.60248994827271
0.61786508560181
0.58388590812683
0.47097396850586
0.60158681869507
0.58294200897217
0.60332798957825
1.7215020656586
0.67375087738037
0.60588788986206
0.68769884109497
0.7059919834137
0.45914888381958
0.56948590278625
0.57627296447754
0.46779298782349
0.46954989433289
0.57487106323242 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:51:13.903

用于`file_get_contents('image')`获取图像的二进制数据。执行 a`mysqli_real_escape_string()`以获得转义权并在查询中使用此数据。

```
$data = file_get_contents($image);
$data_sql = mysqli_real_escape_string($data); 
```

确保使用正确的命令进行转义，具体取决于 mysql/mysqli/pdo/etc。

**编辑**

由于我忘记对调整大小部分做出反应：使用[imagecopyresampled](http://php.net/manual/function.imagecopyresampled.php)，手册页上有很多示例。要获取原始数据，您必须使用[输出缓冲](http://php.net/manual/ref.outcontrol.php)：

```
ob_start();
imagejpeg($resource, null, 90);
$raw_image_data = ob_get_contents();
ob_end_clean(); 
```

请记住，从数据库中输出图像时，您必须发送与图像类型相对应的正确标题。

```
header('image/jpeg');
echo $blob_data; 
```

# visual-studio-2012 - 在 web 部署时创建自动备份

> ID：16107243
> 
> 赞同：3
> 
> 时间：2013-04-19T14:42:10.650
> 
> 标签：visual-studio-2012, iis-7.5, windows-server-2008, webdeploy

所以我想要的是，每当我从我的开发机器部署到服务器机器时，该站点的当前文件的自动备份就会得到备份。

我按照本指南进行配置

[http://www.iis.net/learn/publish/using-web-deploy/web-deploy-automatic-backups](http://www.iis.net/learn/publish/using-web-deploy/web-deploy-automatic-backups)

在服务器的 IIS 的根级别，这是配置的

![配置 IIS](https://i.stack.imgur.com/HD9VV.png)

在服务器上使用 PowerShell 并调用

.\msdeploy.exe -verb:sync -source:backupManager -dest:backupManager=SiteName

确实会创建站点的备份到位置 D:\Websites\backups\SiteName_snapshots 但是当我从我的开发机器到服务器进行网络部署时不会生成备份。

我正在使用 Visual Studio 2012 使用位于目标服务器上的管理员帐户的配置文件进行发布。

根据此链接：

[在 Web Deploy 工具中设置自动备份](https://stackoverflow.com/questions/12429371/setting-up-automatic-backups-in-web-deploy-tool)

这个功能似乎在 VS2010 中被破坏了，这仍然是 VS2012 的情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-16T10:17:13.480

确保`EnableMSDeployBackup`在 *.pubxml 文件中设置为 True

```
 <Project>
    <PropertyGroup>
     ...
       <EnableMSDeployBackup>True</EnableMSDeployBackup>
     ...
    </PropertyGroup>
   </Project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T19:50:11.963

我通过传递这个参数解决了我的问题：

```
msbuild ... /p:EnableMSDeployBackup=true 
```

希望这可以帮助

# batch-file - 如何在批处理脚本中为字符串添加引号

> ID：16107246
> 
> 赞同：3
> 
> 时间：2013-04-19T14:42:17.747
> 
> 标签：batch-file

基本上我有一个变量，其中有一个字符串，它是卸载程序的路径。有时当变量被返回时，它会返回类似

```
"C:/path to uninstall file/uninstall.exe" 
```

而其他时候它可能会返回

```
MsiExec.exe /I{regkeyhere} 
```

这两个都很好，就是当这样的东西返回时

```
C:/path to uninstall file/uninstall.exe 
```

在导致调用函数失败的文件路径中没有引号的地方。无论如何要检查变量是否以 C: 开头，以及是否确实在字符串的开头和结尾添加了引号？如果它以除 C: 以外的任何东西开头，那么没关系，只有当它有一个带有空格的文件路径时，它才会崩溃。我尝试了几个不同的字符串替换，但由于某种原因，它总是崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:57:16.490

使用插入符号来转义引号：

```
if "%variable:~0,2%"=="C:" set variable=^"%variable%^" 
```

**编辑：**我意识到如果引号已经存在会出现错误，所以这段代码将创建一个测试变量（去掉引号）来首先测试变量。如果没有空格，此代码也不会添加引号。

如果它以`C:`, 开头（如果有空格不要加引号，否则加引号）。

```
set test=%uninstallStr:"=%
if "%test:~0,2%"=="C:" (
    if "%test: =%"=="%test%" (
      set uninstallStr=%test%
    ) else (
      set uninstallStr=^"%test%^"
    )
) 
```

**编辑2：**`<`我意识到像and这样的毒字符会有更多问题`>`，所以这段代码会在处理之前先转义这些毒字符。

```
set ^"uninstallStr=^"C:\Program Files ^<x86^>\Price Check by AOL\uninstall.exe^"^"
echo %uninstallStr%

set "test=%uninstallStr:"=%"
set "test=%test:<=^<%"
set "test=%test:>=^>%"
if "%test:~0,2%"=="C:" (
    if "%test: =%"=="%test%" (
      set uninstallStr=%test%
    ) else (
      set uninstallStr=^"%test%^"
    )
)

echo %uninstallStr%
pause 
```

# javascript - Components.classes 给出“错误：访问属性‘类’的权限被拒绝”

> ID：16107249
> 
> 赞同：3
> 
> 时间：2013-04-19T14:42:24.783
> 
> 标签：javascript, dom, xml-serialization

我正在尝试使用[此处](https://developer.mozilla.org/en-US/docs/Parsing_and_serializing_XML)概述的方法将我的 DOM 序列化为 XML 文件。

然而，线

```
var oFOStream = Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream); 
```

导致错误

```
Error: Permission denied to access property 'classes' 
```

在 Mozilla Firefox 20.0 上使用 Firebug。我可能是那个

```
mozilla.org/network/file-output-stream 
```

是一个坏链接。但是，当我尝试

```
Components.utils.import("resource://gre/modules/FileUtils.jsm");     
var oFOStream = new FileUtils.File("."); 
```

我收到了消息

```
Error: Permission denied to access property 'utils' 
```

和

```
resource://gre/modules/FileUtils.jsm 
```

是合法链接。

有没有更好的方法将 DOM 或者最好是其中的子树序列化为 XML 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T08:35:00.610

您使用的方法仅在“从 JS XPCOM 组件（或 JS 模块）内部，新的 XMLSerializer() 不可用”时才需要。

您可以尝试使用：

```
var oSerializer = new XMLSerializer();
var sXML = oSerializer.serializeToString(doc); 
```

首先将其序列化为字符串。

[您可以在](https://developer.mozilla.org/nl/docs/Parsing_and_serializing_XML)第 2 章找到更多信息。

# wpf - 如何通过 ViewModel 将 XamDataGrid 绑定到模型属性

> ID：16107252
> 
> 赞同：1
> 
> 时间：2013-04-19T14:42:29.110
> 
> 标签：wpf, xaml, binding, mvvm-light, xamdatagrid

在我的 C#/WPF 应用程序中，我正在尝试将 Infragistics WPF XamDataGrid 绑定到 ObservableCollection。MyViewModel 公开 Model 属性。当我将要显示其值的属性添加到 MyViewModel 时，一切正常。下面显示了一个示例，其中我绑定到由 UnitsOfMeasure ObservableCollection 中包含的 MyViewModel 实例公开的 UnitID 属性。

如果我将“名称”更改为“模型名称”，则在运行时数据网格中会出现正确的行数，但所有字段都是空白的。不会引发运行时错误。

我的解决方法是将每个属性添加到 MyViewModel 并在每个 getter 和 setter 中引用模型中的属性。造成冗余代码，不同意 Laurent 的演示。

这个 xaml 有效：

```
<igEditors:XamDataGrid Theme="Royale" Grid.Column="2" Grid.Row="1" HorizontalAlignment="Stretch" Margin="2" Name="xamDataGridUnitsOfMeasure" DataSource="{Binding Path=UnitsOfMeasure}"  VerticalAlignment="Stretch">
    <igEditors:XamDataGrid.FieldLayoutSettings>
        <igEditors:FieldLayoutSettings AutoGenerateFields="False"/>
            </igEditors:XamDataGrid.FieldLayoutSettings>
                <igEditors:XamDataGrid.FieldLayouts>
                    <igEditors:FieldLayout IsDefault="True">
                        <igEditors:FieldLayout.Fields>
                           <igEditors:Field Name="UnitID" Label="UOM ID">
                              <igEditors:Field.Settings>
                                 <igEditors:FieldSettings AllowEdit="False"/>
                              </igEditors:Field.Settings>
                           </igEditors:Field>
  .
  .
  . 
```

将 UnitID 更改为 Model.UnitID 不起作用：

```
<igEditors:XamDataGrid Theme="Royale" Grid.Column="2" Grid.Row="1" HorizontalAlignment="Stretch" Margin="2" Name="xamDataGridUnitsOfMeasure" DataSource="{Binding Path=UnitsOfMeasure}"  VerticalAlignment="Stretch">
    <igEditors:XamDataGrid.FieldLayoutSettings>
        <igEditors:FieldLayoutSettings AutoGenerateFields="False"/>
            </igEditors:XamDataGrid.FieldLayoutSettings>
                <igEditors:XamDataGrid.FieldLayouts>
                    <igEditors:FieldLayout IsDefault="True">
                        <igEditors:FieldLayout.Fields>
                           <igEditors:Field Name="Model.UnitID" Label="UOM ID">
                              <igEditors:Field.Settings>
                                 <igEditors:FieldSettings AllowEdit="False"/>
                              </igEditors:Field.Settings>
                           </igEditors:Field>
  .
  .
  . 
```

这是功能性 ViewModel 的一部分：

```
public class UnitOfMeasureViewModel : ViewModelBase
{
    /// <summary>
    /// Initializes a new instance of the UnitOfMeasureViewModel class.
    /// </summary>
    public UnitOfMeasureViewModel(UnitOfMeasure model)
    {
        Model = model;
        //Model.PropertyChanged += (s, e) =>
        //    {
        //        RaisePropertyChanged(e.PropertyName);
        //    };
    }

    public UnitOfMeasure Model
    {
        get;
        private set;
    }

    public string UnitID
    {
        get
        {
            return Model.UnitID;
        }

        set
        {
            Model.UnitID = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:10:44.103

XamGrid 控件支持嵌套绑定 - [http://help.infragistics.com/Help/NetAdvantage/WPF/2012.1/CLR4.0/html/xamGrid.html](http://help.infragistics.com/Help/NetAdvantage/WPF/2012.1/CLR4.0/html/xamGrid.html)

或者

请参阅 Infragistics 帮助的此链接 - [http://www.infragistics.com/community/forums/t/67603.aspx](http://www.infragistics.com/community/forums/t/67603.aspx)

这将帮助您进行嵌套绑定

Else => 你想从 Model 对象类中提取接口并尝试在持有 Model 作为属性的类中实现它吗？

```
 public interface IModel
    {
        public string UnitId { get; set; }
    }

    public class Model : IModel
    {
        private string unitId;
        public string UnitId
        {
            get { return unitId; }
            set { unitId = value; }
        }
    }

    public class ModelParent : IModel
    {
        private Model model;
        public string UnitId
        {
            get { return model.UnitId; }
            set { model.UnitId = value; }
        }
    } 
```

# java - 使用 JDBC 连接到 Derby

> ID：16107260
> 
> 赞同：2
> 
> 时间：2013-04-19T14:42:51.310
> 
> 标签：java, jdbc, derby

我正在尝试使用 JDBC 连接到我的本地主机上的 Derby 数据库。

我已经使用命令启动了数据库：`java -jar lib;derbyrun.jar server start`，它在端口 1527 上成功启动。

在另一个命令终端上，我使用命令：`java -classpath .;lib;derbyclient.jar testsqldatabase.TestSQLDatabase`但我收到以下错误：

```
java.sql.SQLException: No suitable driver found for jdbc:postgresql:COREJAVA
        at java.sql.DriverManager.getConnection(Unknown Source)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at testsqldatabase.TestSQLDatabase.getConnection(TestSQLDatabase.jav
)
        at testsqldatabase.TestSQLDatabase.runTest(TestSQLDatabase.java:39)
        at testsqldatabase.TestSQLDatabase.main(TestSQLDatabase.java:26) 
```

我的*datatbase.properties*文件包含以下几行：

```
jdbc.drivers=org.postgresql.Driver
jdbc.url=jdbc:postgresql:COREJAVA
jdbc.username=dbuser
jdbc.password=secret 
```

下面列出了java程序：

```
public class TestSQLDatabase 
{
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws IOException
    {
        try
        {
            runTest();
        }
        catch(SQLException ex)
        {
            for(Throwable t: ex)
                t.printStackTrace();
        }
    }
    /*Runs a test by creating a table, adding a value, 
    showing the table contents, removing the table*/

    public static void runTest() throws SQLException, IOException
    {
        try(Connection conn = getConnection())
        {
            Statement stat = conn.createStatement();

            stat.executeUpdate("CTEATE TABLE Greetings (Message CHAR(20))");
            stat.executeUpdate("INSERT INTO Greetings VALUES ('Hello, World!')");

            try(ResultSet result = stat.executeQuery("SELECT * FROM Greetings"))
            {
                if(result.next())
                    System.out.println(result.getString(1));
            }
            stat.executeUpdate("DROP TABLE Greetings");
        }
    }

    /*
     * Gets a connection from the properties specified in the 
     * file database.properties. @return the database connection
     */
    public static Connection getConnection() throws SQLException, IOException
    {
        Properties props = new Properties();
        try(InputStream in = Files.newInputStream(Paths.get("database.properties")))
        {
            props.load(in);
        }
        String drivers = props.getProperty("jdbc.drivers");
        if(drivers != null) System.setProperty("jdbc.drivers", drivers);
        String url = props.getProperty("jdbc.url");
        String username = props.getProperty("jdbc.username");
        String password = props.getProperty("jdbc.password");

        return DriverManager.getConnection(url, username, password);
    }
} 
```

谁能弄清楚为什么我从第二个命令终端收到该错误？

谢谢，非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:45:32.617

Derby 是一个数据库。PostgreSQL 是一个*不同*的数据库。您正在运行一个 Derby 数据库，并且需要相应的 Derby JDBC 驱动程序来与它通信——而不是 PostgreSQL 驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:47:40.157

您想使用 PostgreSQL 驱动程序（在属性文件中）连接到 Derby；数据库的URL也写得不好；它应该是：`jdbc:${dataBaseVendor}:${server}:${port}/${databaseName}`在你的情况下，databaseVendor=derby。

还要确保您的类路径中有 Derby JDBC 驱动程序 jar。

# mysql - 无法通过命令行找到正确的 MySQL

> ID：16107264
> 
> 赞同：0
> 
> 时间：2013-04-19T14:43:06.377
> 
> 标签：mysql, xampp, localhost

大约 3 个月前，我安装了 xampp，并将其用作本地 PHP/MySQL 环境。

我现在需要通过命令行导入一个大型数据库。几个月前我做过一次，成功了，不记得我是怎么做到的。

我正在像这样打开 MySQL Applications/xampp/xamppfiles/bin/mysql

它表明我有两个数据库（这是不正确的）

```
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| test               |
+--------------------+
2 rows in set (0.01 sec) 
```

当我打开 phpmyadmin 时，这里是我已经使用了几个月的数据库：

截图 - [http://cl.ly/image/2v2B0L0I1v3S](http://cl.ly/image/2v2B0L0I1v3S)

这是我需要上传大型数据库的地方。这台机器才几个月大，我相当肯定我没有安装任何其他 MySQL 实例。谁能给我一些关于在哪里看的见解，或者我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:51:10.917

使用phpmysql的导入功能。无论如何，它接受您需要在命令行界面上使用的相同文件，并将其放入正确的 MySQL 服务器（如果您碰巧有 2 个）。我不熟悉 Mac 以及它们如何列出进程，但是您在命令行上登录的用户没有足够的权限，或者您的机器上有第二个 MySQL 实例。您还可以查看 phpmyadmin 的进程选项卡以查看进程从何处运行。

# javascript - 访问刚刚附加到 DOM 的 jquery 元素

> ID：16107267
> 
> 赞同：53
> 
> 时间：2013-04-19T14:43:17.843
> 
> 标签：javascript, jquery, append

我只是在 DOM 上附加一个元素，例如：

```
$("#div_element").append('<a href="#">test</a>'); 
```

在我附加它之后，我需要访问我刚刚制作的元素以便将点击功能绑定到它，我尝试了：

```
$("#div_element").append('<a href="#">test</a>').click(function(){alert("test")}); 
```

但以上没有奏效。我可以唯一地标识元素，但是当我可能有一种方法可以在添加元素后立即获取元素时，这似乎有点工作。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-04-19T14:45:09.130

你可以这样做：

```
var el = $('<a href="#">test</a>');

$("#div_element").append(el);

el.click(function(){alert("test")});

// or preferrably:
el.on('click', function(){alert("test")}); 
```

append 函数接受两种类型的参数：字符串或 jQuery 元素。如果传入一个字符串，它将在内部创建一个 jQuery 元素并将其附加到父元素。

在这种情况下，您希望自己访问 jQuery 元素，因此您可以附加事件处理程序。因此，您必须先创建元素，然后将其传递给附加函数，而不是传入字符串并让 jQuery 创建一个元素。

完成之后，您仍然可以访问 jQuery 元素以附加处理程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T14:48:16.957

```
var $a = $('<a />', {href:"#"})
  .text("test")
  .on('click', function(e) { 
     alert('Hello') 
  })
  .appendTo('#div_element'); 
```

[http://jsfiddle.net/33jX4/](http://jsfiddle.net/33jX4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T14:46:11.750

为什么不在添加新元素之前保存对它的引用：

```
var newElement = $('<a href="#">test</a>');
$("#div_element").append(newElement);
newElement.click(function(){alert("test")}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T14:46:47.797

最后一个元素将是新元素

```
$('a:last','#div_element').on('click',function(){
    // do something
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T14:44:43.587

向其中添加身份，`element`然后按如下方式使用它

```
$("#div_element").append('<a id="tester" href="#">test</a>');

$('#tester').on('click', function(event) {
console.log('tester clicked');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T14:47:17.857

您可以在创建元素时将事件附加到元素 -

```
var ele =$("<a href='#'>Link</a>");

ele.on("click",function(){
    alert("clicked");
});

$("#div_element").append(ele); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T14:47:52.083

只需在附加之前将点击处理程序附加到锚点。

```
$("#div_element").append($('<a href="#">test</a>').click(function(){alert("test")})); 
```

# mongodb - 从查询中排除元素

> ID：16107271
> 
> 赞同：0
> 
> 时间：2013-04-19T14:43:33.983
> 
> 标签：mongodb

在 MongoDB 中，是否可以执行以下操作？

假设我有一个这样的集合，在 name 字段上有一个索引：

```
{
 name: A
 rand: 123
 array: [a1,a2..]
},
.
.
{
 name: Z
 rand: 567
 array: [z1,z2..]
} 
```

在我的查询中，我想随机提取一些文档（基于该 rand 字段），但要排除其他文档，因此不应选择它们。

例如：随机抽取一个文档，但排除名称为A或B的文档

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:00:01.973

```
db.yourcollection.find({rand: 123, name: { $not: { $in: [ 'A', 'B' ] }}}) 
```

# sql - 合并 - 仅在值更改时更新

> ID：16107273
> 
> 赞同：26
> 
> 时间：2013-04-19T14:43:36.563
> 
> 标签：sql, sql-server, merge

我正在 SQL Server 中运行合并。在我的更新中，我只想在值发生变化时更新该行。每次更新都会增加一个版本行。下面是一个例子：

```
MERGE Employee as tgt USING 
(SELECT Employee_History.Emp_ID
, Employee_History.First_Name
, Employee_History.Last_Name
FROM Employee_History)
as src (Emp_ID,First_Name,Last_Name)
ON tgt.Emp_ID = src.Emp_ID
WHEN MATCHED THEN 
    UPDATE SET
    Emp_ID = src.Emp_ID,
    ,[VERSION] = tgt.VERSION + 1 
    ,First_Name = src.First_Name
    ,Last_Name = src.Last_Name
WHEN NOT MATCHED BY target THEN 
    INSERT (Emp_ID,0,First_Name,Last_Name)
VALUES 
    (src.Emp_ID,[VERSION],src.First_Name,src.Last_Name); 
```

现在，如果我只想更新行，从而增加版本，只有在名称发生变化的情况下。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-19T14:48:57.513

`WHEN MATCHED`可以有`AND`。此外，无需更新`EMP_ID`.

```
...
 WHEN MATCHED AND (trg.First_Name <> src.First_Name 
   OR trg.Last_Name <> src.Last_Name) THEN UPDATE
   SET 
   [VERSION] = tgt.VERSION + 1 
    ,First_Name = src.First_Name
    ,Last_Name = src.Last_Name
 ... 
```

如果 Last_Name 或 First_Name 可以为空，则在比较 trg.Last_Name <> src.Last_Name 时需要注意`NULL`值，例如`ISNULL(trg.Last_Name,'') <> ISNULL(src.Last_Name,'')`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-24T19:28:48.597

a1ex07 提供的答案是正确的答案，但我只是想扩展比较大量列、观察空值等的难度。

我发现我可以在一些带有哈希字节的 CTE 中生成校验和，在合并中定位这些 CTE，然后使用上面指定的“更新和....”条件来比较哈希：

```
with SourcePermissions as (
    SELECT 1 as Code, 1013 as ObjectTypeCode, 'Create Market' as ActionName, null as ModuleCode, 1 as AssignableTargetFlags
    union all SELECT 2, 1013, 'View Market', null, 1
    union all SELECT 3, 1013, 'Edit Market', null, 1
    --...shortened....
)
,SourcePermissions2 as (
    select sp.*, HASHBYTES('sha2_256', xmlcol)  as [Checksum] 
    from SourcePermissions sp
    cross apply (select sp.* for xml raw) x(xmlcol)
)
,TargetPermissions as (
    select p.*, HASHBYTES('sha2_256', xmlcol)  as [Checksum] 
    from Permission p
    cross apply (select p.* for xml raw) x(xmlcol)
) --select * from SourcePermissions2 sp join TargetPermissions tp on sp.code=tp.code where sp.Checksum = tp.Checksum

    MERGE TargetPermissions AS target  
    USING (select * from SourcePermissions2) AS source ([Code] , [ObjectTypeCode] , [ActionName] , [ModuleCode] , [AssignableTargetFlags], [Checksum])  
        ON (target.Code = source.Code)  
    WHEN MATCHED and source.[Checksum] != target.[Checksum] then
        UPDATE SET [ObjectTypeCode] = source.[ObjectTypeCode], [ActionName]=source.[ActionName], [ModuleCode]=source.[ModuleCode], [AssignableTargetFlags] = source.[AssignableTargetFlags]
    WHEN NOT MATCHED THEN  
        INSERT ([Code] , [ObjectTypeCode] , [ActionName] , [ModuleCode] , [AssignableTargetFlags])  
        VALUES (source.[Code] , source.[ObjectTypeCode] , source.[ActionName] , source.[ModuleCode] , source.[AssignableTargetFlags])
    OUTPUT deleted.*, $action, inserted.[Code] 
        --only minor issue is that you can no longer do a inserted.* here since it gives error 404 (sql, not web), complaining about returning checksum which is included in the target cte but not the underlying table
        ,inserted.[ObjectTypeCode] , inserted.[ActionName] , inserted.[ModuleCode] , inserted.[AssignableTargetFlags]
    ; 
```

几点注意事项：我本可以使用校验和或 binary_checksum 大大简化，但我总是与这些发生冲突。

至于“为什么”，这是自动部署的一部分，以使查找表保持最新。合并的问题在于有一个复杂且大量使用的索引视图，因此对相关表的更新非常昂贵。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T14:48:22.987

您可以更改`[VERSION] + 1`代码以在名称匹配时添加零，而不是完全避免更新：

```
[VERSION] = tgt.VERSION + (CASE
    WHEN tgt.First_Name <> src.First_Name OR tgt.Last_Name <> src.Last_Name
    THEN 1
    ELSE 0 END) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-24T02:44:24.800

@a1ex07 感谢您的回答.. 稍微更正.. 我没有关注 SQL 版本，所以这可能是 SQL 规范的更改

当匹配**和条件**然后更新

以上不是有效的语法

以下有效

匹配时更新设置...**条件**不匹配时插入...

所以会把它改成

```
WHEN MATCHED THEN UPDATE
   SET 
   [VERSION] = tgt.VERSION + 1 
   ,First_Name = src.First_Name
   ,Last_Name = src.Last_Name 
```

**WHERE trg.First_Name <> src.First_Name 或 trg.Last_Name <> src.Last_Name**

[https://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm#SQLRF01606](https://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm#SQLRF01606)

# css - 当 css Left 不在视野范围内时，格式会中断吗？

> ID：16107275
> 
> 赞同：0
> 
> 时间：2013-04-19T14:43:44.627
> 
> 标签：css, html, css-position

运行这个 JS Fiddle 显示我`<div>`的格式正确：http: [//jsfiddle.net/MRpj2/1/](http://jsfiddle.net/MRpj2/1/)

它是一个充当`absolute`定位标签的容器。问题是当您`left`将 CSS 类的属性更改为`label`足够高（例如 1000 像素）以将其`<div>`移出视图时。执行此操作时，您必须向右滚动才能看到`<div>`，但文本现在位于 div 下方？

有没有解决的办法？我试过的一切都没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:46:20.683

只需使用

```
white-space: nowrap; 
```

上`.label`。

**演示**

[先试后买](http://jsfiddle.net/aqAvr/)

* * *

**编辑**

如评论中所述。这仅在 Firefox 中不起作用。所以解决这个问题的解决方案是使用

```
display: inline-block; 
```

而不是浮动元素，但仍与`white-space: nowrap;`. 检查新的演示：

[购买前第二次尝试](http://jsfiddle.net/AJUCC/)

# c# - 通过代码设置默认调试命令行参数？

> ID：16107276
> 
> 赞同：1
> 
> 时间：2013-04-19T14:43:46.673
> 
> 标签：c#, .net, vb.net, arguments, command-line-arguments

有一种方法可以设置默认调试命令行参数或默认应用程序参数，而无需在项目设置的“调试”选项卡中设置参数？

我的意思是如果我能做这样的事情：

```
Module Main

#If DEBUG Then
  ' Debug Commandline arguments for my application:
  My.Application.CommandLineArgs = "-Sleep 5 -Interval 50 -Key CTRL+C"
#End If

...Sub main()
   GetArguments() ' A function wich gets the arguemnts that I've set.
...etc...

End module 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:46:20.140

您可以创建一个类，该类将从命令行抽象您的其他代码。对于调试编译，它将返回固定字符串，否则将返回真正的 Enviroment.CommandLine。

```
public static class CommandLineHelper
{
  public static string GetCommandLine()
  {
   #if DEBUG
     return "my command line string";
   #else
     return Enviroment.CommandLine;
   #endif
  }
} 
```

# python - 在表单字段中显示默认值 Django

> ID：16107281
> 
> 赞同：5
> 
> 时间：2013-04-19T14:43:59.350
> 
> 标签：python, django, django-forms

django 如何在要表单的文本字段中显示默认值。

```
<input type="text" name="{{ form.username}}" value="{{ costumer.username}}"><p> 
```

它在浏览器中显示了一个文本字段，后跟 couser.username，我想将用户名作为文本字段中的默认值，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:54:14.290

对表单使用初始参数：

```
form = Form(initial={'username': costumer.username}) 
```

并在模板中显示输入，您只需要这样：

```
{{ form.username }}<br/> 
```

[https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:56:28.457

在您看来：

```
myForm = MyForm(initial={'username': costumer.username }) 
```

并在模板中：

```
{{myForm.username|safe}} 
```

应该做的伎俩。

# java - Netbeans 数据库日期时间问题

> ID：16107282
> 
> 赞同：0
> 
> 时间：2013-04-19T14:44:02.833
> 
> 标签：java, database, datetime, arraylist, format

编译时收到的错误消息是“日期时间值的字符串表示形式的语法不正确”

从 History ArrayList 传入日期对象时，其格式为 '19-Apr-2013'

我知道数据库的格式是“年-月-日”。有什么方法可以将我的日期对象转换为数据库的正确格式？

```
for ( Patient p: pList )
{
    patientInsertSQL = "Insert Into SHAUN.PATIENT VALUES (" + p.getPatientNum() +
        + ", '" + p.getPatientName() + "', '" + p.getPatientAddress() + "', '"
        + p.getPatientPhone() + "')";
    res = stmt.executeUpdate(patientInsertSQL);
    System.out.println(res);
    ArrayList<History> tempHistList = p.getHistory();
    String histSelect = "select * from SHAUN.HISTORY";
    result = stmt.executeQuery(histSelect);
    for ( History h: tempHistList )
    {
        historyInsertSQL = "Insert Into SHAUN.HISTORY VALUES (" + h.getHistID()
          + ", '" + h.getConditionName() + "', '" + h.getMedication() + "', '"
          + h.getDateOccured() + "', " + p.getPatientNum() + ")";
        res = stmt.executeUpdate(historyInsertSQL);
        System.out.println(res);
        //Loop Checker
        int i = 1;
        System.out.println("In the History Loop " + i);
        i++;
    }
    System.out.println("In the loop!"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:59:23.217

阅读这篇文章[SimpleDateFormat](https://stackoverflow.com/questions/10444091/date-format-java)

它应该可以帮助您获得想要实现的目标。

例如：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy");
try {
     date = formatter.parse(yourdate.toString());
     formatter.applyPattern("yyyy-MM-dd");
     dateformat = formatter.format(yourdate);
     System.err.println(dateformat);

    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)的 Javadoc

# c++ - 嘿。我在编译中有错误你能帮忙吗？Linux

> ID：16107295
> 
> 赞同：-4
> 
> 时间：2013-04-19T14:45:03.840
> 
> 标签：c++, unix, ubuntu, operating-system

我尝试在终端中编译c中的代码，编译器向我抛出我无法理解的消息..

按摩师是：

```
user@user-virtual-machine:~/Desktop$ gcc -o run execute.cpp
execute.cpp: In function ‘void KillCommand(char*)’:
execute.cpp:389:57: warning: converting to non-pointer type ‘char’ from NULL [-Wconversion-null]
execute.cpp: In function ‘void GetCommand(char*, char**, char*, char*, char*)’:
execute.cpp:477:129: warning: NULL used in arithmetic [-Wpointer-arith]
/tmp/ccg3lDy1.o:(.eh_frame+0x10b): undefined reference to `__gxx_personality_v0'
collect2: error: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:47:17.813

如果您正在编译 C++ 代码，请`g++`使用`gcc`.

它设置了一些不同的标志，最重要的是它自动链接到 C++ 运行时库。

# java - 我应该在我的 Tomcat 上启用 allowLinking 吗？

> ID：16107296
> 
> 赞同：0
> 
> 时间：2013-04-19T14:45:05.653
> 
> 标签：java, tomcat

首先，它不是一个窗口服务器，它是 Linux。

我收到以下代码引发的错误：

```
javax.naming.NameNotFoundException: Name comp is not bound in this Context 
```

该错误导致回到我的课程。该类的调用如下：

```
ScheduledThreadPoolExecutor stpe = new ScheduledThreadPoolExecutor(1);      
stpe.scheduleAtFixedRate(new UpdateHistory(), 0, 30, TimeUnit.MINUTES); 
```

这是课程：

```
class Update implements Runnable {
    UpdateHistory upH = new UpdateHistory ();

    public void run() {

        try {

            upH.update();
        } catch (SQLException | NamingException | InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

这个类的代码在我的主类 myServlet.class 中。但它会在我的服务器目录中生成第二个 .class 文件：

```
myServlet.class
myServlet$Update.class 
```

我认为这是由于上下文没有转移或其他原因，我不是 100% 确定。我应该在我的设置中允许链接以确保安排的课程可以获取上下文吗？

编辑完整的堆栈跟踪：

```
javax.naming.NameNotFoundException: Name comp is not bound in this Context
    at org.apache.naming.NamingContext.lookup(NamingContext.java:770)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:153)
    at org.apache.naming.SelectorContext.lookup(SelectorContext.java:152)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at my.package.database.DatabaseManager.connect(DatabaseManager.java:66)
    at my.package.database.DatabaseManager.returnHistory(DatabaseManager.java:209)
    at my.package.UpdateHistory.upH(update.java:89)
    at my.package.myServlet$UpdateHistory.run(myServlet.java:76)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:351)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

# svn - 如何将 SVN 存储库从一台服务器移动到另一台服务器

> ID：16107302
> 
> 赞同：18
> 
> 时间：2013-04-19T14:45:18.417
> 
> 标签：svn, svnadmin, svnserve, svn-repository

我需要将现有的 SVN 存储库从一台开发服务器复制到另一台。根据我的理解，我已经提出了步骤。如果有人可以验证并让我知道我是否遗漏了任何一点，那就太好了。

```
Current server: dev10.dev.location.somename.com
Current repo location: dev10$/export/svnrepo/reponame
URL: svn:// dev10.dev.location.somename.com/export/svnrepo/newrepo/trunk

New server: dev11.dev.location.somename.com
New repo location: dev11$/export/svnrepo/newrepo 
```

我想要一个像 svn://dev11.dev.location.somename.com/export/svnrepo/newrepo/trunk 这样的 URL。我需要导入新的存储库吗？

```
SVN server --- **svnserve** 
```

脚步：

1.  在 dev11 中安装 svnserve 服务器

2.  检查工作目录是否在 dev10 完全签入到 Subversion，并备份它。

3.  转储 Subversion 存储库。这是通过`svnadmin`命令完成的：在 dev10

    ```
    svnadmin dump /export/svnrepo/reponame | gzip -9 - > reponame.dump.gz 
    ```

4.  在 dev11 创建新的 subversion 存储库。要创建存储库“newrepo”，请`svnadmin create`从 $SVNHOME/bin 运行命令。在 dev11 上提供存储库的完整路径。

    ```
    svnadmin create /export/svnrepo/newrepo 
    ```

5.  将 reponame.dump.gz 文件复制到 dev11 服务器。

6.  将转储文件加载到新存储库中：在 dev11

    ```
    zcat reponame.dump.gz | svnadmin load /export/svnrepo/newrepo 
    ```

7.  将新存储库签出到 dev11 的目录

    ```
    svn co svn:// dev11.dev.location.somename.com/export/svnrepo/newrepo/trunk 
    ```

8.  将我的工作目录切换到新的存储库。

# objective-c - 为自动合成属性创建 getter 方法时出现编译器错误

> ID：16107308
> 
> 赞同：1
> 
> 时间：2013-04-19T14:45:35.180
> 
> 标签：objective-c, cocoa, properties

在类的接口中定义一个属性后，我使用自动生成的方法创建了一个 setter`_property`方法。一切都很顺利。然后我为同一个属性创建了一个 getter 方法。一旦我这样做，编译器就会抛出一个`_property`我使用它的地方都没有定义的错误。

如果我只定义了 getter 或 setter，一切正常，但一旦我定义了两者，`_property`就不复存在了。

如果我添加`@synthesize property = _property;`到我的实现的顶部，问题就解决了，但这让我很难过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:50:41.990

这很正常。如果您声明一个属性，编译器通常会自动合成一个 ivar 以及 getter 和 setter 方法。

但是，如果您明确定义自己的 getter 和 setter 方法，编译器将不再自动生成 ivar。您的解决方案是显式声明您自己的 ivar。您不需要该`@synthesize`行，只需声明 ivar。

这种行为的原因是很可能有一个实际上不使用 ivar 的属性的实现。因此，如果您同时定义了 setter 和 getter，编译器将由您决定是否需要 ivar。

顺便说一句 - 这不是 Xcode 4.6.2 中的新行为。自从编译器支持自动合成 ivars 以来，情况就一直如此。

# jakarta-ee - Java 指定默认值

> ID：16107312
> 
> 赞同：0
> 
> 时间：2013-04-19T14:45:41.117
> 
> 标签：jakarta-ee, cdi

我正在尝试创建一个工厂类来在运行时决定需要注入什么。

我创建了一个生产者工厂：

```
public class AuthorizationServiceFactory {

    @Inject
    private AuthorizationServiceImpl authorizationService;

    @Produces
    public AuthorizationService getService() {
        //decide here
    }
} 
```

授权服务是一个接口：

```
public interface AuthorizationService {
    //methods here
} 
```

而且我只有一个接口实现（我计划有更多，但我正在简化以使其工作）：

```
public class AuthorizationServiceImpl implements AuthorizationService {
    //implementation here
} 
```

在我的另一堂课中，我尝试注入，如下所示：

```
@Inject
protected AuthorizationService authorizationService; 
```

它给了我一个`Ambiguous dependencies for type [AuthorizationService] with qualifiers [@Any] at injection point blablabla...`

我意识到它有两种可能性，生产者工厂和实施本身。我尝试用@Default 注释工厂方法，用@Alternative 注释另一个类，但是我需要在工厂中注入一个 AuthorizationServiceImpl 并且它说它对注入无效。

```
Unsatisfied dependencies for type [AuthorizationServiceImpl] with qualifiers [@Default] at injection point blablabla... 
```

有没有办法指定工厂方法是它如何产生接口并且仍然能够注入一个实例以便工厂返回它而不创建一些注释接口？

更多信息，我实际上正在这样做，因为我希望工厂方法基于数​​据库值生成正确的 AuthorizationService。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:09:12.003

您应该阅读 CDI Alternatives，它可以完全满足您的需求，而无需工厂。您实际上引入了一个“替代”限定符，它描述了非默认实现并允许某人在 beans.xml 中激活它。

# python - IMAP 消息中的未知编码

> ID：16107315
> 
> 赞同：0
> 
> 时间：2013-04-19T14:45:53.197
> 
> 标签：python, unicode, encoding, utf-8, imaplib

我正在`BODY`使用 IMAP 协议获取电子邮件的文本/HTML 部分。

为此，我所做的是使用`BODYSTRUCTURE`调用获取`BODY`部分的索引和字符集，然后使用`BODY[INDEX]`调用获取原始文本，并尝试使用 Python 解码函数对其进行解码。

现在我的问题是，即使在使用给定的字符集（从`BODYSTRUCTURE`调用中获得的字符集与该部分一起）解码一些文本部分之后，它们仍然使用一些未知的编码进行编码。

只有葡萄牙语/西班牙语/其他拉丁文本会出现此问题，因此我认为这是某种葡萄牙语/西班牙语编码。

现在我的问题是，如何检测到这种情况并正确解码？首先，我假设用给定的字符集解码文本应该不会留下任何编码字符，但是如果确实发生了这种情况，就像现在发生的那样，我如何找到一种通用的方法来解码这些字符？

我想我可以尝试一个常见字符集的列表，然后`try:` `except:`为所有这些字符集做一个循环来尝试解码给定的文本，但老实说，我更喜欢更好的解决方案。

伪代码是这样的：

```
# Obtain BODYSTRUCTURE call
data, result = imap_instance.uid('fetch', email_uid, '(BODYSTRUCTURE)')
part_body_index, part_charset = parse_BODY_index_and_charset_from_response(data)

text_part, result = imap_instance.uid('fetch', email_uid, '(BODY['+str(part_body_index)+'])')

if len(part_charset) > 0:
    try:
        text_part = text_part.decode(part_charset, 'ignore')
    except:
        pass

# Content of "text_part" variable after this should be text with no encoded characters...
# But that's not the case 
```

编码文本示例：

```
A 05/04/2013, =E0s 11:09, XYZ escreveu:> 
```

这个文本是用 iso-8859-1 编码的，解码它仍然是这样。字符串中的符号=E0 是字符“À”。

```
In=EDcio da mensagem reenviada: 
```

这段文字是用 windows-1252 编码的，解码后还是这样。字符串中的符号 =ED 是字符“í”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:02:59.063

您需要查看`Content-Transfer-Encoding`信息（实际上是在`BODYSTRUCTURE`响应中返回的）。您需要同时支持`base64`和`quoted-printable`解码——这会将二进制数据（如给定文本的 UTF-8 甚至 ISO-8859-1 编码）转换为对电子邮件传输安全的 7 位格式。只有在您撤消内容传输编码之后，您才能继续将文本从字符编码（如 UTF-8、或 windows-1250、或 ISO-8859-x 或...）解码为其 Unicode 表示你一起工作。

您的两个示例都使用quoted-printable 进行编码。

# ios - 尝试通过崩溃报告调试 ios 应用程序

> ID：16107318
> 
> 赞同：0
> 
> 时间：2013-04-19T14:46:08.587
> 
> 标签：ios, debugging, crash

应用程序在 xcode 调试阶段在模拟器和设备上运行良好，但将应用程序作为临时分发版本运行它会立即崩溃。部分崩溃报告如下......

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV) 
Exception Codes: KERN_INVALID_ADDRESS at 0x50000010 Crashed Thread:  0 
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x37859f2a objc_release + 10
1   Simple Science Tab              0x000d3036 -[ssFirstViewController didYouReg]      (ssFirstViewController.m:224)
2   Simple Science Tab              0x000d2450 -[ssFirstViewController viewDidLoad] (ssFirstViewController.m:45) 
```

报告中引用的方法是这样的......

```
-(void) didYouReg {
NSString *dbtn = @"stage";

BWDB *db2;

NSDictionary * row = nil;
if ((db2 = [[BWDB alloc] initWithDBFilename:home_dbfn andTableName: dbtn])) {

    for (row in [db2 getQuery:@"SELECT reg_yes FROM reg"]) {

        ans= row[@"reg_yes"];

    }

} else {
  //  message(@"db failed to init");
}
[db2 closeDB];

} 
```

我一直在阅读很多帖子并尝试在 xcode 中启用僵尸功能，但这似乎没有显示任何内容。我正在使用 xcode 4.6.1 我会很感激任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:35:00.573

从提供的代码来看，在我看来，该变量在被调用`home_dbfn`时被释放`didYouReg`。如果这仅发生在 ad-hoc 发行版中，那么这当然很难调试。原因可能是例如不同设备的不同时序行为。您可以插入一条`assert`语句或其他代码以确保它`home_dbfn`未被释放，然后让您的 beta 测试人员再次运行该应用程序。

# android - 为什么在我的设置中为具有多个项目的 android 开发速度很慢？

> ID：16107321
> 
> 赞同：4
> 
> 时间：2013-04-19T14:46:19.313
> 
> 标签：android, performance, eclipse-adt

当我们第一次开始为 android 开发时，我们有 2 个项目：一个用于“核心”功能，另一个用于“业务”功能。到目前为止一切顺利，我们经历了糟糕的时光，等待了这么多时间来编译 XML 更改，但生活仍然可以忍受。一段时间后，我们发展（或不发展）有 9 个项目。对于某些项目，我们有一个“测试”项目。我们也有一些库项目，例如，我们有两个用于不同版本的 android 的不同项目，我们有一个用于共享配置或控制器的“共享”项目。原因是我们的应用程序很大。当我们对核心项目进行一些更改时，我们通常必须重新编译，并使用 eclipse 来“清理”工作区。此外，我们通常必须使用“构建项目” 选择几次让项目更新它们的引用，第一次构建几乎没有编译所有东西，我们在我们的团队中称之为“COMBO”，它是“F5”和“CTRL+B”的组合来编译项目。所有这些设置都在浪费大量时间并使开发人员感到难过，就像一个由 6 名开发人员组成的团队:(

我知道到这个时候我们应该几乎知道所有问题和最佳选择，但我不敢相信它是这样的。经过这么多时间的搜索和尝试改进，我们似乎无法找到其他解决方案来缩短 android 的开发时间。

我们的工具集是：

*   日食 4.2.1
*   ADT 21.1.0
*   Eclipse 颜色主题（用于可爱的代码）
*   SDK 始终更新

硬件：

*   Windows 7 专业版 64 位
*   8 GB 内存
*   英特尔酷睿 i5-3470 3.20GHz

我很想回答：

*   编译时间改进：你有没有找到比 Eclipse 更快的 IDE？为什么？设置如何？使用 ADT 的缺点是什么？如何在使用多个项目时提高性能？
*   项目参考管理，对如何加快构建有什么建议吗？我应该把整个源代码放在一个项目中吗？
*   当您拥有设备并需要在测试应用程序时部署它时，有什么方法可以加快开发速度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T16:51:34.510

Try [Intellij](http://www.jetbrains.com/idea/).

In the latest version, 12, they made project build improvements that make it much faster than 11 and Eclipse.

> **Parallelization**
> 
> Note also the third column, called Parallelized. This is a new compiler option which allows you to use more than one core for building a project. In this case the compiler runs for multiple independent project modules in parallel. Since each compiler thread uses file system, the benefit of parallelizing highly depends on how fast you hard drive is. Still the average gain in performance is spread between 10 and 20 percent for large projects.
> 
> **Automatic Make**
> 
> One more exciting compiler option added in IntelliJ IDEA 12 is automatic make. This is another time-saver, which triggers project make automatically on every change. Since the compiler runs in a separate process, it is able to compile modified files in the background, while you are doing something else. This means your project is in compiled state all the time, so you don’t need to wait any time you want to run it.

[http://blogs.jetbrains.com/idea/tag/brand-new-compiler/](http://blogs.jetbrains.com/idea/tag/brand-new-compiler/)

Also if you are using `git` for version control I have noticed Intellij is much better at updating after I switch branches. It integrates well with `git` and notices that you switched branches and refreshes and cleans out the project in the background automatically, while on Eclipse you might have to refresh and clean manually.

# javascript - 在 Visual Studio 2012 中使用 jQuery 读取 JSON 文件失败

> ID：16107328
> 
> 赞同：-1
> 
> 时间：2013-04-19T14:46:34.577
> 
> 标签：javascript, json, html

我是使用 html5 和 JavaScript 为 Win8 RT 开发应用程序的新手。我想从 JSON 文件中读取数据，这就是问题所在：

```
function test() {
var _url = 'js\test.json';
$.getJSON(_url, function (data) {
    for (var i = 0; i < data.length; i++) {
        var tweet = data[i].info.Name;
        document.writeln(tweet);
        //$(".test").append(tweet + 'hgjhjh');                
    }
})
};
test(); 
```

这是我的 JSON 文件：

```
{
"info": ["Name": "Max", Adress": "Fakestreet", "City": "New York"]
} 
```

我的代码停在这一行，系统没有异常：

```
$.getJSON(_url, function (data) { 
```

我将 jQuery 函数包含在 .js 文件中，并通过以下方式调用它

```
<script src="/js/jquery.js"></script> 
```

在我的 default.html 中。

我进行了很多搜索，但没有找到针对此特定问题的解决方案。甚至 jQuery.com 的文档也没有帮助我。

将 jQuery 包含到我的项目中是否犯了任何错误？或者你有什么进一步的想法可能是什么问题？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:57:27.480

您的 JSON 无效。您正在尝试在数组中使用键，这在 JS 中是不可能的，因为没有关联数组（但对象）。改用对象文字表示法：

```
{
"info": {"Name": "Max", "Adress": "Fakestreet", "City": "New York"}
} 
```

另请注意，您缺少分隔`Adress`键的双引号。

现在您可以在 AJAX 成功回调中查找数据，例如：

```
$.each(data, function(){
   console.log(this.Name);
   console.log(this.Adress);
   console.log(this.City);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:49:23.503

你错过了一个报价。

```
{
"info": ["Name": "Max", Adress": "Fakestreet", "City": "New York"]
} 
```

应该

```
{
"info": ["Name": "Max", "Adress": "Fakestreet", "City": "New York"]
} 
```

Firebug 会捕捉到类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:58:52.917

您缺少引号，而不是括号“[”应该是大括号“{”。您可以在此处检查 json 的有效性 [http://jsonlint.com/](http://jsonlint.com/)

```
 {
    "info": {
              "Name": "Max",
              "Adress": "Fakestreet",
              "City": "New York"
            }
} 
```

# c#-4.0 - 替换和删除 PDF 文件

> ID：16107329
> 
> 赞同：0
> 
> 时间：2013-04-19T14:46:39.917
> 
> 标签：c#-4.0, asp.net-mvc-4, itextsharp

我正在使用以下代码删除旧 PDF 并用新 PDF 替换旧 PDF，但没有结果。是否可以对 PDF 文件执行此操作？因为，在整个网络中，我看到这些函数用于 .txt、.xls.doc...等文件类型。我的代码有什么问题吗？请帮忙...

```
private void ListFieldNames(string s)
    {
        try
        {
            string pdfTemplate = @"z:\TEMP\PDF\PassportApplicationForm_Main_English_V1.0.pdf";
            //var newFile = pdfTemplate;
            string newFile = @"z:\TEMP\PDF\_PassportApplicationForm_Main_English_V1.0.pdf";
            PdfReader pdfReader = new PdfReader(pdfTemplate);
            for (int page = 1; page <= pdfReader.NumberOfPages; page++)
            {
                //ITextExtractionStrategy its = new iTextSharp.text.pdf.parser.SimpleTextExtractionStrategy();
                PdfReader reader = new PdfReader((string)pdfTemplate);
                //PdfStamper stamper = new PdfStamper(reader, new FileStream(newFile, FileMode.Create));
                using (PdfStamper stamper = new PdfStamper(reader, new FileStream(newFile, FileMode.Create)))
                {
                    AcroFields form = stamper.AcroFields;
                    var fieldKeys = form.Fields.Keys;
                    foreach (string fieldKey in fieldKeys)
                    {
                        //Replace Address Form field with my custom data
                        if (fieldKey.Contains("Surname"))
                        {
                            form.SetField(fieldKey, s);
                        }    
                    }
                    // set form fields

                    //form.SetField("Address", s);
                    stamper.FormFlattening = true;
                    stamper.Close();

                }

            }
            File.Copy(newFile, pdfTemplate);
            File.Delete(pdfTemplate);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:58:30.353

一切对我来说都很好，只需更改：

```
File.Copy(newFile, pdfTemplate);
File.Delete(pdfTemplate); 
```

改成：

```
File.Delete(pdfTemplate);
File.Copy(newFile, pdfTemplate); 
```

如果文件所在位置已存在同名文件，则无法复制该文件。先删除现有文件。

# php - JSON 引用在 POST 中未转义

> ID：16107332
> 
> 赞同：1
> 
> 时间：2013-04-19T14:46:48.957
> 
> 标签：php, json, codeigniter, escaping, decode

我有一段代码接受 JSON 字符串作为 POST 参数。我面临的挑战是如何解码字符串。考虑一个`mygateway.php`具有以下领域`meta`的帖子：

```
{"test" : "One \"quote\" is as good as an escaped \"quote\"..."} 
```

如果我运行：

```
$meta_json_string = $this->CI->post('meta', true); 
```

$meta_json_string 的值为：

```
{
    "test": "One "quote" is as good as an escaped "quote"..."
} 
```

运行时无法解码`json_decode()`。关于如何防止 CodeIgniter 取消转义引号以便我可以对其进行解码的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:07:57.057

将其更改为：

```
$meta_json_string = $this->CI->post('meta'); 
```

这样 CI 就不会在字符串上运行 XSS 清理，因为该字符串太复杂而无法可靠地清理为 JSON 字符串。完成上述操作后`json_decode()`，然后`$this->security->xss_clean()`在要回显的元素上单独运行。

# c++ - 在没有 20 秒超时的情况下确定网络驱动器上是否存在文件

> ID：16107335
> 
> 赞同：0
> 
> 时间：2013-04-19T14:46:51.357
> 
> 标签：c++, windows, networking, boost

有没有一种简单的方法来确定远程系统上的文件是否存在而没有 20-25 秒的挂起（如果不存在）？

函数如...

```
PathFileExists();
GetFileAttributes(); 
```

...不允许您设置超时持续时间，因此当文件不存在时，您最终会等待很长时间。我认为可以将这些调用之一放入线程并将线程设置为在 1 秒（或其他任何时间）后过期，但我更喜欢使用轻量级的本机 Windows 函数或 boost 函数，而不是不优雅的线程解决方案.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-30T15:47:39.367

证明是否定的有点困难，但我会争辩说不存在这样的方法。

正常的 Windows 异步 I/O 方法使用该`OVERLAPPED`结构，并且在其文档中它引用了`ReadFile`和`WriteFile`方法。另一方面，没有`GetFileAttributes`提及`OVERLAPPED`或异步 I/O 的变体。因此，假设它始终是同步的似乎是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-30T16:58:56.207

AFAIK 不，通常没有简单的方法。

如果您的服务器配置为响应 ping，您可以使用`IcmpSendEcho`API 在访问它的共享文件之前 ping 服务器，API 非常简单并且它接受超时。

如果您的服务器不响应 ping（默认情况下现代版本的 Windows 不响应），您可以编写一个函数尝试连接到 TCP 端口 135 或 445，如果已连接则关闭连接并返回成功，如果失败则返回错误. 这将允许您实现比默认值更短的超时。

在这两种方法中，您都需要将网络驱动器路径解析为服务器的名称，参见例如`GetVolumePathName`API。

# ajax - ColdFusion 不处理 CFC 的 HTTP OPTIONS 请求

> ID：16107340
> 
> 赞同：3
> 
> 时间：2013-04-19T14:47:06.530
> 
> 标签：ajax, extjs, coldfusion

设想：

*   托管基于 ExtJS 的前端应用程序的网络服务器。
*   托管后端服务的 ColdFusion 10 服务器（带有 Apache）。
*   前端应用程序使用表单向 ColdFusion 组件 (CFC) 发出 AJAX 请求`http://<CF_server>/<app_path>/<CFC>?method=someMethod&...`
*   CFC 以 JSON 响应。

由于前端和后端位于不同的服务器上，我们处于 CORS（跨域资源共享）环境中，并且 AJAX 请求向后端发出两个 http 请求：第一个是用于握手的 OPTIONS 方法，第二个是 POST 请求。我需要在 CF 服务器上的 Apache 中启用标头并使用“Header set Access-Control-Allow-Origin: *”指令来启用 CORS，但我想以编程方式从 CF 而不是 Apache 处理标头。我已经运行了一些测试，我注意到 http 请求中的 OPTIONS 方法仅适用于 CFM 而不适用于 CFC，因此第一个 AJAX 请求（使用 OPTIONS 方法）失败。我可以在 AJAX 调用设置 useDefaultXhrHeader 属性中绕过 OPTIONS 请求，但我会理解 CF 行为。

使用 cfhttp 标签运行测试后，我发现：

*   使用 OPTIONS 方法对 CFM 的 HTTP 请求类似于 GET 方法：在 Application.cfc（或RequestStart，...）上触发事件方法，返回文件内容和标头。
*   对 CFC 使用 OPTIONS 方法的 HTTP 请求不会触发事件，不会返回文件内容或标头。
*   对不存在的 CFC 的调用（使用 OPTSIONS 方法）返回相同的结果。

为什么CF在调用CFC时不处理OPTIONS方法？

在我的测试中，我在端口 8500 上使用集成的 CF 网络服务器绕过了 Apache。我也在 CF9 上进行了尝试，结果相同。相反，Railo 有不同的行为：也为 CFC 处理 OPTIONS 方法。

这与没有响应的线程类似：http: [//www.houseoffusion.com/groups/cf-talk/thread.cfm/threadid :59715](http://www.houseoffusion.com/groups/cf-talk/thread.cfm/threadid:59715)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:03:59.640

我最近在 CF 和 Apache CXF 上都遇到了同样的问题。

似乎 CF 对 GET 和 POST 以外的动词没有定义的行为。就我而言，我在这里安装了 CORS 过滤器：http: [//software.dzhuvinov.com/cors-filter-installation.html](http://software.dzhuvinov.com/cors-filter-installation.html)

这会拦截请求并在它们到达您的应用程序之前对其进行处理。它适用于 CXF 并且应该适用于 CF，但缺点是它需要更改您的 web.xml，这在某些托管设置中可能是不允许的。

另一个选项是配置 apache 以添加必要的标头：[http ://enable-cors.org/server_apache.html](http://enable-cors.org/server_apache.html)

我还发现浏览器供应商在使用 OPTIONS 调用时存在许多差异。我不记得具体细节，但如果这是最终要求，请测试早期的跨浏览器。

# c# - 如何使用 RestSharp 将对 Web API 的请求作为 Xml 发布？

> ID：16107341
> 
> 赞同：2
> 
> 时间：2013-04-19T14:47:10.333
> 
> 标签：c#, asp.net, post, action, asp.net-web-api

如何将请求发布到 Web API 作为 Xml？

我正在使用以下测试：

```
[TestMethod]
        public void Should_post_successfully_with_valid_userDetailsList_usingRestSharp()
        {
            // arrange
            string url = string.Format("{0}/User/BulkLoad", this._baseUrlForLuis);

            var client = new RestClient(url);

            var request = new RestRequest(Method.POST)
                {
                    RequestFormat = DataFormat.Xml
                };

            request.AddBody("<user></user>");

             request.AddHeader("Accept", "application/xml");

            // act
            IRestResponse response = client.Execute<HttpResponseMessage>(request);

            Assert.AreEqual(HttpStatusCode.OK, response.StatusCode);
        } 
```

我的动作如下所示；它接受一个字符串：

```
 [HttpPost]
        public HttpResponseMessage BulkLoad([FromBody] string userDetailsListXml)
        {
} 
```

但 userDetailsListXml 始终为 null，因此不会传递该值。

如何解决？

我尝试使用 Ajax Post 并且以下代码通过并且工作正常：

```
$.post("http://www.domain.com/User/BulkLoad", {"" : "<user></user>"}); 
```

但是如何让它与 RestSharp 一起工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-15T02:12:30.870

```
var personString = "<Person><Name>Person Name</Name></Person>"; // Your XML string

var restClient = new RestClient("http://localhost:56453/api/people");

var restRequest = new RestRequest("Post", Method.POST);

restRequest.RequestFormat = DataFormat.Xml;
restRequest.AddParameter("application/xml", personString, ParameterType.RequestBody);
var response = restClient.Execute(restRequest); 
```

不要忘记在 WebApiConfig.cs 中添加以下代码

```
config.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

# ruby-on-rails - 使用 collection_select 在 HABTM 关系中创建多条记录 - Rails

> ID：16107343
> 
> 赞同：1
> 
> 时间：2013-04-19T14:47:16.270
> 
> 标签：ruby-on-rails, has-and-belongs-to-many

我有`has_and_belongs_to_many`锻炼和团体之间的关系。

我有一个`collection_select`用于将锻炼添加到组的组中。

问题是我只能更改 HABTM 表中的一条记录，所以我只能添加一条记录，然后编辑该记录。如何添加其他记录？

有任何想法吗？

这是一些代码：

```
show.html.erb:

<%= form_for(@group) do |f| %>
  <%= f.collection_select 'workout_ids', Workout.all, :id, :name, { :include_blank => ""} %>

  <%= f.submit %>
<% end %> 
```

.

```
class Workout < ActiveRecord::Base
  attr_accessible :name, :exercises_attributes, :workout_exercises_attributes, :group_ids

  has_and_belongs_to_many :groups 
```

.

```
class Group < ActiveRecord::Base
  attr_accessible :cycle_id, :name, :next_group_id, :previous_group_id, :workout_ids

  has_and_belongs_to_many :workouts 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:53:37.240

所以这个问题的答案是在控制器中编辑更新操作：

```
workout_id = params[:group].delete(:workout_ids)

    # Adding a workout
    if workout_id
      workout = Workout.find(workout_id)
      @group.workouts << workout
    end 
```

上面的代码创建了一个局部变量，该变量`workout_id`接受参数`:group`，并`:workout_id`从方法中删除第二个参数，以在您更改组名称时更新实际组，例如。`:group``.delete`

然后我们只需将一个新的锻炼推送到@group.workouts，每次我们从集合选择中向组中添加一个新的锻炼时，都会在连接表中创建一个新记录。

# c# - 在 C# 中使用 HTML AGILITY PACK 获取数据时，有时应用程序会获取数据？

> ID：16107344
> 
> 赞同：0
> 
> 时间：2013-04-19T14:47:17.577
> 
> 标签：c#, html-agility-pack

我一直在使用 HTML AGILITY PACK 获取一些数据，通过选择一些标签从网页获取数据，但我有一个错误或其他问题。有时网页超时，应用程序无法获取数据。我应该如何摆脱这个，因为我需要一次又一次地刷新页面？

这是我的代码：

```
string Url = "http://gmail.com";
HtmlWeb web = new HtmlWeb();
HtmlAgilityPack.HtmlDocument doc = web.Load(Url);
var SpanNodes = doc.DocumentNode.SelectNodes("//div[@class='form-field wide-80 
normal']"); 
```

如何使用 C# 在浏览器中刷新网页，或者如何通过在 Web 浏览器中打开网页来使用 HTML AGILITY PACK 获取数据？....请指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:55:15.263

HTML AGILITY PACK 擅长从网页解析数据，如果您想自动化/控制（例如导航、刷新等）网页，请考虑使用[Selenium](http://docs.seleniumhq.org/)。

```
IWebDriver driver = new OpenQA.Selenium.Firefox.FirefoxDriver();
driver.Navigate().GoToUrl(url);   
driver.Navigate().Refresh();      // <--- here it gets refreshed 
```

BTW：你经常从一个url刷新/爬取数据，在大多数情况下是不可行的，而且随着你的流量增长，大多数网站都会提示你输入验证码，你很难进一步抓取其中的数据。这虽然可能是题外话，:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:57:18.420

构建所谓的爬虫并非常频繁地刷新网页可能会导致暂时禁止，以避免给服务器造成过多负担。

# javascript - $http 在异步方法中不起作用 - AngularJS 和 PhoneGap

> ID：16107348
> 
> 赞同：3
> 
> 时间：2013-04-19T14:47:25.407
> 
> 标签：javascript, android, cordova, angularjs

我尝试使用 PhoneGap 和 AngularJS 制作一个可以在线和离线使用的应用程序（适用于 Android 设备）。
如果设备离线，我想从本地数据库获取人员列表，如果设备在线，我想使用 $http 从 Web 服务获取人员列表。但是当设备在线时，它不起作用，不调用网络服务。

我认为问题在于PhoneGap 异步方法。事实上，在离线模式下，它可以工作，但我需要使用 $scope.$apply 来更新我的视图。但这不适用于 $http...

有人知道如何在异步方法中使用 $http 吗？

```
function ListCtrl ($scope, $http){
    $scope.list = [];
    $scope.Id = 2;

    $scope.init = function(){
        document.addEventListener("deviceready", getList, false);
    }

    $scope.getAll = function(){ 

        $http({
            url: 'http://10.0.0.2:63414/myWebMethod/' + $scope.Id,
            method: 'GET',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
           }
        }).success(function(data) {
            $scope.list = data; 
        });
    }

    function getList(){
        var db = window.openDatabase("Database", "1.0", "list", 200000);
        var network = navigator.connection.type;
        if (network == "none"){
            // local database transaction works fine
        } else {
            $scope.getAll();
        }
        $scope.$apply();
    }

    $scope.init();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:21:46.293

在成功回调中，您还必须使用 $scope.$apply(); 触发摘要。

```
$http({
        url: 'http://10.0.0.2:63414/myWebMethod/' + $scope.Id,
        method: 'GET',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
       }
    }).success(function(data) {
        $scope.list = data; 
        $scope.$apply();
    }); 
```

$http 请求是异步的，因此在您从请求中获得任何响应之前，程序将继续执行，并且您在 if (network == "none") 语句之后放置的 $scope.$apply() 将一无所获（您可以去掉它）。

PhoneGap 查询正在工作，因为您在其回调中使用了 $scope.$apply()，并且您必须在 $http 成功回调中执行相同的操作。

# c++ - How do I make a smooth scrolling animation?

> ID：16107358
> 
> 赞同：0
> 
> 时间：2013-04-19T14:47:51.610
> 
> 标签：c++, animation, mfc, scroll, clistctrl

I have a `CListCtrl` which has about 100,000+ entries. The user is presented with a search box to search among these entries. On finding a match, I set that as a selection and scroll to it using [`EnsureVisible`](http://msdn.microsoft.com/en-us/library/tbtcxzsf%28v=vs.80%29.aspx).

This scroll happens instantaneously. I wanted to try and code an animation that looks similar to the [ones demoed here](http://labs.mitgux.com/smooth-scroll-to-top-using-css3-animations/) (especially the 'Go Top - Easing 2' animation).

I'm thinking, for a basic animation,

1.  Get current selection.
2.  Get target selection.
3.  Compute difference.
4.  Get the pixel height of one item.
5.  Mutiply results of step 3 and 4.
6.  [`Scroll`](http://msdn.microsoft.com/en-us/library/4hex6b35%28v=vs.80%29.aspx) by an increment of 1 (or some other more optimal value) with a delay until increment = result of step 5.

I tried this and I got incredibly confused. Firstly, is my algorithm okay? Secondly, is there another, better way to achieve this (preferably similar to animation 2 in the [link above](http://labs.mitgux.com/smooth-scroll-to-top-using-css3-animations/))?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:21:04.227

Your algorithm seems ok for a simple linear scroll. However your link points to scrolls using various easing functions.

Easing functions do not scroll by the same amount each time, but increase or decrease is order to look like they're speeding up, or slowing down.

A common way to work out easing values is to use the result of a sine. If you picture a sine wave and imagine that you can only see one pixel of it at a time, as the wave progresses, the pixel will "ease" at the extremes and accelerate through the middle values.

Your Easing 2 animation is just adding a bit of bounce at the start and end, this is easily achievable by using the a bit of the sine wave past the extremes at each end. eg.

```
 _
    / \
   /
\_/ 
```

If you want some code, I answered a similar question [here](https://stackoverflow.com/questions/9463401/motion-easing-effect-in-c-sharp/9463730#9463730) in C#.

# javascript - 如何在javascript中生成随机图像？

> ID：16107364
> 
> 赞同：-3
> 
> 时间：2013-04-19T14:48:14.053
> 
> 标签：javascript, random, image

我一直在使用以下代码生成随机图像，但没有显示任何图片。

```
<html>

<head>
<SCRIPT LANGUAGE="JavaScript">

var theImages = new Array() 

theImages[0] = '<img class="atvi-image-image" alt=""src="/content/dam/atvi/callofduty/blackops2/cod-bo2/dlc/mdlc-calling-card-flags.png" title="" height="467" width="675">'
theImages[1] = '<img class="atvi-image-image" alt="" src="/content/dam/atvi/callofduty/blackops2/cod-bo2/dlc/mdlc-nuketown-zombies.png" title="" height="732" width="1084">'
theImages[2] = '<img class="atvi-image-image" alt="" src="/content/dam/atvi/callofduty/blackops2/cod-bo2/dlc/mdlc-extra-slots.png" title="" height="480" width="752">'
theImages[3] = '<img class="atvi-image-image" alt="" src="/content/dam/atvi/callofduty/blackops2/cod-bo2/dlc/mdlc-nuketown-2025.png" title="" height="412" width="683">'

var j = 0
var p = theImages.length;
var preBuffer = new Array()
for (i = 0; i < p; i++){
preBuffer[i] = new Image()
preBuffer[i].src = theImages[i]
}
var whichImage = Math.round(Math.random()*(p-1));
function showImage(){
document.write(theImages[whichImage]);
}
</script>
</head>
<body>
<SCRIPT LANGUAGE="JavaScript">
showImage();
</script>
</body>
</html> 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:50:16.423

您已经在数组中拥有**完整** `<img>`的标签。所以只需使用：

```
document.write(theImages[whichImage]); 
```

虽然我建议不要使用`document.write`. 当然，在您的情况下，它在 HTML 中间执行，我认为问题不大。`document.write`如果在页面呈现后执行，那就不好了。通常，首选方法类似于`appendChild`method 甚至 setting `innerHTML`，尽管需要进行一些重构才能让您的代码使用它们。

这是我如何设置它的示例：

```
(function () {
    var theImages = [{
        src: "http://www.techinasia.com/techinasia/wp-content/uploads/2009/12/smile.png",
        width: "675",
        height: "467"
    }, {
        src: "https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcQdcHlJqgIKNOS0DaEjO31xK1zYtmJlza8z70ljiKFbo2ZgLdh9eA",
        width: "1084",
        height: "732"
    }, {
        src: "http://cdn2-b.examiner.com/sites/default/files/styles/large_lightbox/hash/68/d1/68d11ab242d40c8d5abbe8edb58fd4ed_0.jpg?itok=M3qtK47_",
        width: "200",
        height: "200"
    }];

    var preBuffer = [];
    for (var i = 0, j = theImages.length; i < j; i++) {
        preBuffer[i] = new Image();
        preBuffer[i].src = theImages[i].src;
        preBuffer[i].width = theImages[i].width;
        preBuffer[i].height = theImages[i].height;
    }

    function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    window.getRandomImage = function () {
        var whichImage = getRandomInt(0, preBuffer.length - 1);
        return preBuffer[whichImage];
    }
})();

window.onload = function () {
    var newImage = getRandomImage();
    console.log(newImage);
    document.body.appendChild(newImage);
}; 
```

**演示：http:** [//jsfiddle.net/wFjGv/](http://jsfiddle.net/wFjGv/)

此代码使用一个新对象来保存每个图像的详细信息。这样，您可以轻松设置和获取所需的每个图像的属性，而无需对 HTML 进行硬编码。

它预加载`preBuffer`数组中的图像，并在需要时从数组中检索图像，并将其放入`<body>`. `onload`您可以在事件中更改其目标。该`getRandomImage`函数从该数组中返回一个随机图像。我也更新了获取随机整数的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:53:17.290

你正在设置一个`<img src=`不是你想要的东西。您的数组 ( `theImages`) 正在存储完整`<img>`的标签，而不仅仅是指向该图像的链接。

要么改变你`theImages`的数组来存储像这样的值：

```
theImages[0] = "/content/dam/atvi/callofduty/blackops2/cod-bo2/dlc/mdlc-calling-card-flags.png" 
```

或使用当前设置作为图像标签。

```
document.write(theImages[whichImage]); 
```

还：

*   对于随机数，您可能应该坚持使用，`Math.floor()`以免超过最大长度。

*   `var j = 0`缺少一个`;`

*   `theImages`img 标签未关闭 (`<img ... />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:01:31.030

尝试这个-

```
var srcs = [
    "/content/dam/atvi/callofduty/blackops2/cod-bo2/dlc/mdlc-calling-card-flags.png",
    "/content/dam/atvi/callofduty/blackops2/cod-bo2/dlc/mdlc-nuketown-zombies.png",
    "foo/bar.jpg"
    ], imgs = [];
function init() {
    "use strict";
    var i, x, div;
    div = document.createElement('div');
    div.id = 'imageContainer';
    document.querySelector('body').appendChild(div);
    for (i = 0; i < srcs.length; i += 1) {
        x = new Image();
        x.src = srcs[i];
        imgs.push(x);
    }
}
function showRandom() {
    "use strict";
    document.querySelector('#imageContainer').innerHTML = imgs[Math.random * imgs.length];
}
init(); 
```

添加随机图像-

```
showRandom(); 
```

* * *

**PS** - 你不应该使用`document.write`，但如果你这样做，你应该关闭流`document.close`，告诉浏览器完成加载页面。[阅读更多 - MDN JS 文档](https://developer.mozilla.org/en-US/docs/DOM/document.write)

# vb.net - 基本认证网页登录VB.NET

> ID：16107368
> 
> 赞同：0
> 
> 时间：2013-04-19T14:48:20.877
> 
> 标签：vb.net, automation, basic-authentication

*   大家好，我在尝试自动化我们的 UPS 安装时遇到问题。该网页使用基本身份验证并在加载页面时提示登录。我们无权访问注册表以在 IE 中启用此功能，因为它已被禁用。我曾尝试使用 httpwebrequest 和 response 来拉取 cookie，但它似乎从来没有发回一个。我的逻辑是将该 cookie 用于 Web 浏览器控件，这样它就不会要求登录。这是我的代码：

    ```
    Dim request As HttpWebRequest = DirectCast(WebRequest.Create("http://10.106.206.249"), HttpWebRequest)
    Dim mycache = New CredentialCache()
    mycache.Add(New Uri("http://10.106.206.249"), "Basic", New NetworkCredential("User", "Pass"))
    request.Credentials = mycache
    request.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.14) Gecko/20080404 Firefox/2.0.0.14"
    request.CookieContainer = New CookieContainer()
    Dim response As HttpWebResponse = CType(request.GetResponse(), HttpWebResponse)
    Dim cook As Cookie
    For Each cook In response.Cookies
        Console.WriteLine("Cookie:")
        Console.WriteLine("{0} = {1}", cook.Name, cook.Value)
        Console.WriteLine("Domain: {0}", cook.Domain)
        Console.WriteLine("Path: {0}", cook.Path)
        Console.WriteLine("Port: {0}", cook.Port)
        Console.WriteLine("Secure: {0}", cook.Secure)

        Console.WriteLine("When issued: {0}", cook.TimeStamp)
        Console.WriteLine("Expires: {0} (expired? {1})", cook.Expires, cook.Expired)
        Console.WriteLine("Don't save: {0}", cook.Discard)
        Console.WriteLine("Comment: {0}", cook.Comment)
        Console.WriteLine("Uri for comments: {0}", cook.CommentUri)
        Console.WriteLine("Version: RFC {0}", IIf(cook.Version = 1, "2109", "2965"))

        ' Show the string representation of the cookie.
        Console.WriteLine("String: {0}", cook.ToString())
    Next cook 
    ```

我知道这在某种程度上有效，因为如果我使用不正确的信用，我会抛出一个未经授权的错误。所以看起来要么我没有收到 cookie，要么没有发送一个。

我尝试过的另一种方法是发送带有常规 Web.Navigate 的标头，但这就像它正在加载页面并提示登录：

```
 Dim authData
    Dim authHeader As String
    authData = System.Text.UnicodeEncoding.UTF8.GetBytes("User:Pass")
    authHeader = "Authorization: Basic: " & System.Convert.ToBase64String(System.Text.Encoding.ASCII.GetBytes("User:Pass")) & Chr(13) & Chr(10)
    Web.Navigate("http://10.106.206.249", False, Nothing, authHeader) 
```

任何人都知道我是否在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:59:19.493

一个更简单的解决方案是：

```
Web.Navigate("http://Administrator:retail@10.106.206.249") 
```

请注意，如果您的密码中有@-sign，则必须对其进行 UrlEncode。（我不是 100% 确定密码是否仍然有效）

# google-analytics - 谷歌通用分析增强链接归属

> ID：16107377
> 
> 赞同：8
> 
> 时间：2013-04-19T14:48:43.600
> 
> 标签：google-analytics

我在我们公司的内部软件上使用 UA 来帮助了解我们的用户如何使用它，其中一部分是了解他们点击时点击的内容等等。

增强的链接归因似乎是最好的选择，但根据开发者文档：

> **标记您的页面以增强链接归属**
> 
> 为了实现此附加标记以增强链接归因，您必须使用 Analytics 跟踪代码的[异步版本](https://developers.google.com/analytics/devguides/collection/gajs/)。

我看到的问题是，目前，我正在使用 Universal Analytics，`analytics.js`而 GA 的异步版本使用`ga.js`. 所以现在我很困惑，因为该选项在我们 GA 帐户管理部分的属性设置中可用。

**通用分析**

```
 <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-CODE-HERE', 'SITE_URL');
    ga('send', 'pageview');

  </script> 
```

**异步代码**

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-X']);
  _gaq.push(['_trackPageview']);

  (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

由于 GA 的两个版本不兼容，我还能使用 Enhanced Link Attribution 吗？如果是这样，我会采取什么步骤？我似乎无法在与 UA 的 ELA 相关的 Google Analytics 文档中找到答案。

**编辑** 是否有可能或建议在同一页面/站点/属性上使用两个版本的 Google Analytics？假设我为标准版本设置了另一个 GA 属性并在网站上使用了两个 JS 片段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-20T17:04:14.303

回答最初的问题：不，Universal Analytics 尚不支持增强链接归因。尽管此功能和许多其他功能将很快推出。Universal Analytics 仍处于测试阶段，但已经确定这是谷歌分析的未来。

是的，新代码和旧代码一样是异步的，我真的无法想象你会想要关闭它的情况。在这种情况下，异步加载意味着当分析 javascript 触发时，无论 javascript 是否完成加载，您的网页都会继续加载。在异步代码片段更新之前，最好将分析代码加载到页脚中，以防止由于脚本本质上不是异步的而导致整个页面挂起。虽然这发生了改变，因为在长/慢页面上，用户通常会在页脚/javascript 有机会加载之前与网站交互，从而导致数据出现重大差异。

维基百科：

> 在计算机编程中，异步事件是独立于主程序流发生的事件。异步动作是在非阻塞方案中执行的动作，允许主程序流继续处理。

**我也不建议**像 Concept Rat 所建议的那样更改对象名称，因为我相信这仅适用于您对同一片段中的不同 Web 属性实施多个“通用分析”跟踪器的情况。

[https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced#snippet](https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced#snippet)：

> 重命名全局对象
> 
> 在某些情况下，页面上的现有对象可能已经使用了 ga 变量名称。为避免覆盖现有对象，您可以重命名 ga 函数，例如重命名为 __gaTracker。为此，只需替换上面代码片段中的 ga 参数：
> 
> (函数(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q= i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[ 0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(窗口,文档,'脚本','//www.google-analytics.com/analytics.js ','__gaTracker');
> 
> 然后在调用命令时可以使用 __gaTracker 代替 ga ：
> 
> __gaTracker('create', 'UA-XXXX-Y'); __gaTracker('send', 'pageview');

如果重命名变量是加载两个片段所必需的，我不相信谷歌会这样说：

[https://developers.google.com/analytics/devguides/collection/analyticsjs/](https://developers.google.com/analytics/devguides/collection/analyticsjs/)：

> analytics.js 片段是 Universal Analytics 的一部分，目前处于公开测试阶段。新用户应该使用 analytics.js。现有的 ga.js 用户应该为 analytics.js 创建一个新的网络媒体资源，并对他们的网站进行双重标记。**在同一页面上同时包含 ga.js 和 analytics.js 片段是完全安全的。**

另请注意，如果您想尝试通用分析，您应该与现有实施同时运行它，因为他们最终*应该*发布迁移工具以保持向后兼容，从而允许您保留现有数据。明确地说：只有在创建一个没有现有数据的全新帐户时，才应该完全实施通用分析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T22:37:55.340

我一直在研究同样的问题。截至 2012 年 11 月，谷歌在回答支持问题时表示：“尚未实现对 analytics.js 的页内分析支持。这是我们将在测试版稍后开发和引入的功能之一。目前不支持的其他功能包括再营销和 AdSense 报告。” 如您所知，增强的链接归因是页内分析的一项功能。

自从那篇帖子以来，我没有找到任何关于这个问题的新参考，所以我只能假设他们的 Universal Analytics 还没有准备好迎接黄金时段。如果可以的话，我会尝试使用异步代码，直到 Universal Analytics 正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-08T00:43:10.933

仅供参考：Universal Analytics 已完成 Beta 测试，现在支持增强型链接归因：

[https://support.google.com/analytics/answer/2558867?hl=en](https://support.google.com/analytics/answer/2558867?hl=en)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T01:38:30.477

供您参考，Universal Analytics 是或确实支持异步模式。您可以在“脚本”标签“a.async=1;”下的 Universal JS 代码第三行中看到它。

您还可以同时运行标准 GA 代码和通用代码。只需为通用代码设置一个单独的属性，并确保将您在第四行“//www.google-analytics.com/analytics.js','ga')”中看到的对象名称“ga”更改为说“gau”（只需要在脚本页面上是唯一的）。然后使用 "gau(" 而不是 "ga(" 进行设置等。请记住，这仅适用于通用代码而不是标准 GA。

完成此操作后，您可以继续使用标准 GA 跟踪事物，并在新属性下使用通用 GA 记录。一旦你对事情感到满意，你就可以切换到只使用通用的。

# cmd - 如何在一行中完成 RUNAS 命令

> ID：16107381
> 
> 赞同：33
> 
> 时间：2013-04-19T14:48:55.123
> 
> 标签：cmd, command-prompt, runas

这个 Stack Overflow 问题提出了一个看起来应该可以工作的命令，但实际上并没有（不过，该答案现在已被删除）：

*[在包含密码的 Window 7 上以不同用户身份运行的单行命令](https://stackoverflow.com/a/12456756/1333582)*

命令将是：

```
echo PaSsWoRd | runas /user:Administrator cmd 
```

然而它说：

> 未知的用户名或错误的密码。

虽然细节绝对正确。例如，如果我要运行：

```
runas /user:Administrator 
```

...在下一行，如果我输入`PaSsWoRd`，它不会有问题。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-20T03:44:08.633

[runas 命令不允许在其命令行上输入](https://devblogs.microsoft.com/oldnewthing/20041129-00/?p=37183)密码。这是设计使然（也是您无法通过管道将密码作为输入的原因）。Raymond Chen 说得很好：

> RunAs 程序要求您手动键入密码。为什么它不接受命令行上的密码？
> 
> 这是一个有意识的决定。如果可以在命令行上传递密码，人们就会开始将密码嵌入到批处理文件和登录脚本中，这是可笑的不安全。
> 
> 换句话说，缺少该功能以消除不安全地使用该功能的诱惑。

# cookies - Prestashop 1.5 Cookie 内容

> ID：16107385
> 
> 赞同：0
> 
> 时间：2013-04-19T14:48:59.113
> 
> 标签：cookies, prestashop

我需要在外部 PHP 页面中显示 prestashop 客户 ID。

在官方文档[http://doc.prestashop.com/display/PS15/Diving+into+PrestaShop+Core+development](http://doc.prestashop.com/display/PS15/Diving+into+PrestaShop+Core+development) )

我找到了php代码：

*如果您需要从非 PrestaShop 代码访问 PrestaShop cookie，您可以使用此代码：*

```
 include_once('path_to_prestashop/config/config.inc.php');
    include_once('path_to_prestashop/config/settings.inc.php');
    include_once('path_to_prestashop/classes/Cookie.php');
    $cookie = new Cookie('ps'); // Use "psAdmin" to read an employee's cookie. 
```

所以我尝试了：

```
include_once('config/config.inc.php');
include_once('config/settings.inc.php');
include_once('classes/Cookie.php');
$cookie = new Cookie('ps'); 
$id_client = $cookie->id_customer;
echo $id_client; 
```

但什么都没有显示，我尝试了其他令牌，只有“date_add”有效

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:42:17.017

以下作品：

```
global $smarty;
global $cookie;
include(dirname(__FILE__).'/config/config.inc.php');
include(dirname(__FILE__).'/header.php');

$cookie = new Cookie('ps'); 
$id_client = $cookie->id_customer;
echo $id_client;

include(dirname(__FILE__).'/footer.php'); 
```

我自己测试过。包括 id 和 firstname 在内的所有内容都有效。看来您不应该包含 classes/Cookie.php 文件。相反，将其替换为`global $cookie`确保更改包含文件的目录。

# mysql - 如何创建以递归方式显示项目子项的查询

> ID：16107393
> 
> 赞同：0
> 
> 时间：2013-04-19T14:49:31.147
> 
> 标签：mysql, sql, recursion

我有一个具有以下格式的 MySQL 表：

```
CREATE  TABLE IF NOT EXISTS `Company` (
  `CompanyId` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `Name` VARCHAR(45) NULL ,
  `Address` VARCHAR(45) NULL ,
  `ParentCompanyId` INT UNSIGNED NULL ,
  PRIMARY KEY (`CompanyId`) ,
  INDEX `fk_Company_Company_idx` (`ParentCompanyId` ASC) ,
  CONSTRAINT `fk_Company_Company`
    FOREIGN KEY (`ParentCompanyId` )
    REFERENCES `Company` (`CompanyId` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

所以澄清一下，我有一些可以拥有母公司的公司。这可能会导致以下示例表内容：

```
CompanyId    Name    Address        ParentCompanyId
1            Foo     Somestreet 3   NULL
2            Bar     Somelane 4     1
3            McD     Someway 1337   1
4            KFC     Somewhere 12   2
5            Pub     Someplace 2    4 
```

现在是我的问题。我想检索 CompanyId 2 递归的所有子项。所以应该出现以下结果集：

```
CompanyId    Name    Address        ParentCompanyId
4            KFC     Somewhere 12   2
5            Pub     Someplace 2    4 
```

我想过使用该`With ... AS ...`语句，但MySQL不支持它。我想到的另一个解决方案是使用返回结果集并将其与该函数的递归调用联合的过程或函数。但是 MySQL 只支持列类型作为返回值。

我想到的最后一个可能的解决方案是创建一个包含两个字段的表：CompanyId 和 HasChildId。然后我可以编写一个递归循环遍历公司的程序，并用 companyid 的所有递归子项填充表。在这种情况下，我可以编写一个连接该表的查询：

```
SELECT CompanyId, Name, Address
FROM   Company C -- The child
INNER JOIN CompanyChildMappingTable M
        ON M.CompanyId = C.HasChildId
INNER JOIN Company P -- The parent
        ON P.CompanyId = M.CompanyId
WHERE P.CompanyId = 2; 
```

如果我每 24 小时调用一次该过程并在将新记录插入`Company`. 但这可能非常棘手，我应该通过在 Company 表上编写触发器来做到这一点。

我想听听你的建议。

**解决方案**：我已经构建了以下过程来填充我的表（现在它只返回 SELECT 结果）。

```
DELIMITER $$
DROP PROCEDURE IF EXISTS CompanyFillWithSubCompaniesByCompanyId$$

CREATE PROCEDURE CompanyFillWithSubCompaniesByCompanyId(IN V_CompanyId BIGINT UNSIGNED, IN V_TableName VARCHAR(100))
BEGIN

    DECLARE V_CONCAT_IDS VARCHAR(9999) DEFAULT '';
    DECLARE V_CURRENT_CONCAT VARCHAR(9999) DEFAULT '';

    SET V_CONCAT_IDS = (SELECT GROUP_CONCAT(CompanyId) FROM Company WHERE V_CompanyId IS NULL OR ParentCompanyId = V_CompanyId);
    SET V_CURRENT_CONCAT = V_CONCAT_IDS;

    IF V_CompanyId IS NOT NULL THEN

        companyLoop: LOOP

            IF V_CURRENT_CONCAT IS NULL THEN
                LEAVE companyLoop;
            END IF;

            SET V_CURRENT_CONCAT = (SELECT GROUP_CONCAT(CompanyId) FROM Company WHERE FIND_IN_SET(ParentCompanyId, V_CURRENT_CONCAT));
            SET V_CONCAT_IDS = CONCAT_WS(',', V_CONCAT_IDS, V_CURRENT_CONCAT);

        END LOOP;

    END IF;

    SELECT * FROM Company WHERE FIND_IN_SET(CompanyId, V_CONCAT_IDS);

END$$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:53:09.157

参考：

**[具有关系 innoDB 的递归 MySQL 查询](https://stackoverflow.com/questions/16019105/recursive-mysql-query-with-relational-innodb/16023509#16023509)**

和

**[如何在 MySQL 中查找所有子行？](https://stackoverflow.com/questions/16042897/how-to-find-all-child-rows-in-mysql/16042957#16042957)**

它将给出如何处理这种数据结构的想法`MYSQL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:03:34.757

一种最快的搜索方法是，使用 2 次方的公司 id 值。 companyId = parentId * 2 然后查询数据库，例如 select * from company where ((CompanyId % $parentId) == 0 ) 我试过这段代码，它很快但是问题是它将孩子的 id 创建为 parentId * 2，如果孩子的深度变深，int，float 可能会超出范围。所以，我重新创建了我的整个程序。

# android - 如何识别视图是否包含android中的对话框？

> ID：16107396
> 
> 赞同：0
> 
> 时间：2013-04-19T14:49:44.087
> 
> 标签：android

我在android中显示对话框。此外，这些对话框对象不是全局的，但它们的范围在使用它的方法内。当我从后台到前台时，我需要确定对话框是否显示，如果是则关闭它。我想要知道如何识别视图是否正在显示对话框，如果是，则关闭对话框。以下是我的代码：

```
public void reentersecuredpin()
    {
         final Dialog dialog = new Dialog(MainActivity.this,android.R.style.Theme_Translucent_NoTitleBar);
         dialog.setContentView(R.layout.successful_securepin_creation);
         dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);
          dialog.setCancelable(true);

      Button btn_Ok;

      btn_Ok=(Button)dialog.findViewById(R.id.btn_Ok_successful_created_pin);
     TextView text1_success,text2_success;
     text1_success=(TextView)dialog.findViewById(R.id.text1_success);
     text2_success=(TextView)dialog.findViewById(R.id.text2_success);

     text1_success.setText("You have entered wrong Pin");
     text2_success.setText("Please re-enter your password again");

      btn_Ok.setOnClickListener(new View.OnClickListener() 
     {

                @Override
                public void onClick(View v) 
                {
                    dialog.cancel();

                }
            });

         dialog.show();

    } 
```

所以当我从背景到前景时：

```
 @Override
    protected void onResume() 
    {

        super.onResume();
        background_to_foreground_dialog();

    } 
```

background_to_foreground_dialog() 显示另一个对话框。我在这里面临的问题是 background_to_foreground_dialog() 在另一个对话框上绘制对话框（当用户进入后台时）。如何在绘制 background_to_foreground_dialog() 之前关闭前一个对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:55:03.167

您可以检查`.isVisible()`对话框中的方法`onPause()`，如果返回 true，则关闭您的对话框。这样，在需要为下一个对话框关闭它之前，它就会被关闭，当涉及到你的时候，`onResume()`你可以安全地创建你的新对话框，而不必担心关闭你的另一个对话框。

```
@Override
public void onPause() {
    super.onPause();
    if(myDialog.isVisible()) {
          myDialog.dismiss();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:15:34.390

当您的应用程序进入后台模式时，活动调用 onStop 方法（请参阅活动生命周期文档：[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)），在这里您可以关闭对话框。在Activity中创建全局Dialog变量，并使用它。例如：

```
@Override
protected void onStop() {
    dialog.dismiss();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:18:29.887

要检查对话框是否显示，您必须将对话框声明为类中的属性，以便稍后访问它并检查它是否可见。

# android - 应用程序包“AndroidManifest.xml”必须至少有 2 个段

> ID：16107401
> 
> 赞同：11
> 
> 时间：2013-04-19T14:50:08.497
> 
> 标签：android, android-manifest

我读到这个：
[AndroidManifest.xml 中的错误“必须至少有 2 个段”](https://stackoverflow.com/questions/13417302/error-in-androidmanifest-xml-must-have-a-minimum-of-2-segments) ，但没有解决方案。

它发生在我通过 refactor->rename 更改项目名称（而不是将 com.example.my app 仅更改为 myapp ）之后，我也在清单中更改名称。

这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="save_money"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="save_money.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="save_money.Article"
            android:label="@string/title_activity_article" >
        </activity>
        <activity
            android:name="save_money.HashmalActivity"
            android:label="@string/title_activity_hashmal" >
        </activity>
        <activity
            android:name="save_money.ImageAdapter"
            android:label="a" >
        </activity>
        <activity
            android:name="save_money.SavedItems"
            android:label="פריטים שמורים" >
        </activity>
        <activity
            android:name="save_money.Screen2HashmalActivity"
            android:label="עלות צריכה" >
        </activity>
        <activity
            android:name="save_money.SelectArticle"
            android:label="בחר מאמר" >
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-19T14:54:49.837

这意味着清单中的包声明必须至少有两个部分，由句点 (.) 分隔。不要只是说`package="save_money"`，把它改成`package="com.save_money"`. 那应该消除您的错误。同样，在您指定活动名称的任何地方，您也需要在那里更新它。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:55:32.690

我的猜测是您的包名称至少需要 2 个段。所以不要`package="save_money`尝试`package="me.save_money"`或任何你想要的。

# angularjs - 如何使用 AngularJS 仅在索引页面上显示 HTML 块

> ID：16107408
> 
> 赞同：1
> 
> 时间：2013-04-19T14:50:25.723
> 
> 标签：angularjs

我有一个 HTML 块，我只想出现在主页上。我如何告诉视图这是主页？

这是我的一些路线

```
myapp.config(['$routeProvider', function($routeProvider) {
  $routeProvider
    .when('/', {
        templateUrl: 'partials/index.html', 
        controller: App.Controllers.Index
    }); 
```

如何`ng-show`判断我是否在主页上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:59:40.703

假设“HTML 块”有自己的视图（和自己的控制器），您可以监听[$routeChangeSuccess](http://docs.angularjs.org/api/ng.$route#$routeChangeSuccess)事件，并更新 ng-show 绑定到的 $scope 属性：

```
var BlockCtrl = function($scope) {
    $scope.showBlock = false;
    $scope.$on('$routeChangeSuccess', function(evt, cur, prev) {
       if(...determine when you want to show the block...) {
           $scope.showBlock = true;
       } else {
           $scope.showBlock = false;
       }
    }
} 
```

另请参阅[https://stackoverflow.com/a/11910904/215945](https://stackoverflow.com/a/11910904/215945)

# c# - 异步文件下载进度未显示在控制台窗口中

> ID：16107411
> 
> 赞同：0
> 
> 时间：2013-04-19T14:50:34.833
> 
> 标签：c#, .net, c#-4.0

```
using System.Windows.Forms;
using System.Net;
using System;
using System.ComponentModel;

namespace FileDownloadUIClient
{
    public partial class Form1 : Form
    {
        string[] arguments;
        public Form1(string[] args)
        {
            InitializeComponent();
            arguments = args;                
            download();
        }
        public void download()
        {
            if (arguments.Length < 0) { this.Close(); }
            else
            {
                WebClient client = new WebClient();
                client.DownloadProgressChanged += new DownloadProgressChangedEventHandler(client_DownloadProgressChanged);
                client.DownloadFileCompleted += new AsyncCompletedEventHandler(client_DownloadFileCompleted);                    
                client.DownloadFileAsync(new Uri(arguments[0]), DateTime.Now.Ticks.ToString() +".bin");
            }
        }        
        void client_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
        {
            double bytesIn = double.Parse(e.BytesReceived.ToString());
            double totalBytes = double.Parse(e.TotalBytesToReceive.ToString());
            double percentage = bytesIn / totalBytes * 100;
            Console.WriteLine( int.Parse(Math.Truncate(percentage).ToString()));
        }
        void client_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
        {
            Console.WriteLine("Download Completed");
            this.Close();
        } 
```

主要方法：

```
using System.Windows.Forms;

namespace FileDownloadUIClient
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main(string[] args)
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1(args));
        }
    }
} 
```

此（Windows 窗体应用程序）C# 程序在将**文件下载 url**作为参数传递时启动。

```
Ex:
C:\FileDownloadUIClient\bin\Debug>FileDownloadUIClient.exe "http://localhost/myfile.mp4" 
```

但是命令提示符窗口中不显示下载进度或下载完成消息。我错在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:55:59.240

Windows 窗体应用程序没有控制台。

如果要查看控制台输出，请将项目类型更改为控制台应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:02:28.217

如果您需要在 Windows 窗体上显示进度，请考虑使用该[`ProgressBar`](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.aspx)控件。`Console`正如其他人已经指出的那样，您不能使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:02:38.613

Winform 默认不为您提供控制台，如果您只想使用“控制台”进行测试/监控，请尝试：

```
Debug.WriteLine(...); 
```

您将在 VisualStudio 输出窗口中看到结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T14:59:09.503

如果您的项目是 Targeted as，`Windows Application Form`则将其更改`Console Application`为您需要控制台以显示进度。

* * *

![在此处输入图像描述](https://i.stack.imgur.com/qahDX.png)

确保您有输出类型`Console Application`，之后它必须正确显示进度！

# java - Java Micro Edition 3.2 SDK 替代 BufferedOutputStream

> ID：16107416
> 
> 赞同：0
> 
> 时间：2013-04-19T14:50:43.563
> 
> 标签：java, sdk, bufferedoutputstream

Java Micro Edition SDK 不包含 java.io.BufferedOutputStream。有谁知道 SDK 中存在合适的替代品？

[http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedOutputStream.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedOutputStream.html)

谢谢，

亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:34:26.373

我不知道有什么替代品，但 BufferedOutputStream 不包含太多代码。只需将其从完整的 JDK 源代码复制到您自己的替换类即可。无论如何，课堂上没有火箭科学。

# osgi - 我可以拥有引用不同目标服务的组件工厂实例吗？

> ID：16107417
> 
> 赞同：0
> 
> 时间：2013-04-19T14:50:44.813
> 
> 标签：osgi, declarative-services

我创建了 3 个不同的组件：客户端、执行器和方法。

我可以有多个引用其自己的 Executor 实例的 Client 实例。所以我把 Executor 作为一个 DS 工厂组件。

Executor 可以按照一种或多种方法执行 Client 请求。所以它动态地引用（1..n）方法服务。

到目前为止，一切都很好。我的问题是我需要根据客户的意愿缩小 Executor 组件使用的方法。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:07:03.447

由于您创建了组件工厂实例，因此您可以为每个实例提供不同的目标属性。目标属性可用于选择引用的服务。

# telerik - Telerik RadGrid.MasterTableView.ExportToExcel() 错误：查询结果枚举不止一次

> ID：16107418
> 
> 赞同：1
> 
> 时间：2013-04-19T14:50:46.927
> 
> 标签：telerik, radgrid

我有一个填充了一些数据的 RadGrid。我有一个按钮，它将通过服务器端回调导出到 Excel。服务器端代码如下。以及下面的错误。有什么建议么？

```
RadGrid1.Rebind();
   RadGrid1.ExportSettings.IgnorePaging = true;
   RadGrid1.MasterTableView.ExportToExcel(); 
```

错误是：

> 查询结果不能多​​次枚举。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：查询结果不能多​​次枚举。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [InvalidOperationException: 查询结果不能枚举多次。] System.Data.Linq.SqlClient.OneTimeEnumerable `1.GetEnumerator() +884205 System.Data.Linq.SqlClient.SingleResult`1.GetEnumerator() +76 System.Linq.Buffer`1..ctor(IEnumerable`1 来源）+302 System.Linq.d__0.MoveNext() +164 System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +163 Telerik.Web.UI.GridResolveEnumerable.GetCollectionItemType(Boolean noItemsInEnumerator, Type&collectionItemType, Object&collectionFirstObject) +330 Telerik.Web.UI.GridResolveEnumerable.ParseProperties() +120 Telerik.Web.UI.GridResolveEnumerable.Initialize() +16 Telerik.Web.UI.GridResolveEnumerable.EnsureInitialized() +28 Telerik.Web.UI.GridEnumerableFromDataView..ctor( GridTableView 所有者，IEnumerable 可枚举，Boolean CaseSensitive，Boolean autoGenerateColumns，GridColumnCollection presentColumns，String[] additionalField，Boolean retrieveAllFields）+242 Telerik.Web.UI.GridDataSourceHelper.CreateGridEnumerable（GridTableView 所有者，IEnumerable 可枚举，布尔 caseSensitive，Boolean autoGenerateColumns, GridColumnCollection presentColumns, String[] additionalField, Boolean retrieveAllFields) +223 Telerik.Web.UI.GridDataSourceHelper.GetResolvedDataSource(GridTableView owner, Object dataSource, String dataMember, Boolean caseSensitive, Boolean autoGenerateColumns, GridColumnCollection presentColumns, String[] additionalField, Boolean retrieveAllFields) +595 Telerik.Web.UI.GridTableView.get_ResolvedDataSource() +243 Telerik.Web.UI.GridTableView.CreateChildControls(IEnumerable dataSource, Boolean useDataSource) +42 System.Web.UI.WebControls.CompositeDataBoundControl.PerformDataBinding(IEnumerable data) +72 System.Web.UI.WebControls.DataBoundControl.OnDataSourceViewSelectCallback(IEnumerable 数据) +147 System.Web.UI.WebControls.DataBoundControl.PerformSelect() +261 Telerik.Web.UI。GridTableView.PerformSelect() +9 Telerik.Web.UI.GridTableView.DataBind() +363 Telerik.Web.UI.RadGrid.DataBind() +73 Telerik.Web.UI.RadGrid.AutoDataBind(GridRebindReason rebindReason) +2488 Telerik. Web.UI.RadGrid.RebindForExport() +119 Telerik.Web.UI.Grid.Export.TableViewExporter.PrepareForExport() +315 System.EventHandler.Invoke(Object sender, EventArgs e) +0 System.Web.UI.Control。 OnPreRender（EventArgs e）+11056782 System.Web.UI.Control.PreRenderRecursiveInternal（）+108 System.Web.UI.Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+3394RadGrid.RebindForExport() +119 Telerik.Web.UI.Grid.Export.TableViewExporter.PrepareForExport() +315 System.EventHandler.Invoke(Object sender, EventArgs e) +0 System.Web.UI.Control.OnPreRender(EventArgs e ) +11056782 System.Web.UI.Control.PreRenderRecursiveInternal() +108 System.Web.UI.Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+3394RadGrid.RebindForExport() +119 Telerik.Web.UI.Grid.Export.TableViewExporter.PrepareForExport() +315 System.EventHandler.Invoke(Object sender, EventArgs e) +0 System.Web.UI.Control.OnPreRender(EventArgs e ) +11056782 System.Web.UI.Control.PreRenderRecursiveInternal() +108 System.Web.UI.Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+3394

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:01:18.613

您不想`Rebind()`在导出之前打电话。这有什么原因吗？您是否在导出前更改/操作数据？

如果没有，则无需调用`Rebind()`，因为这实际上只是为了刷新数据源。

# android - 子片段替换父片段根布局

> ID：16107424
> 
> 赞同：6
> 
> 时间：2013-04-19T14:51:09.750
> 
> 标签：android, android-fragments, android-viewpager

我有 5 个片段的 viewpager，在其中一个片段中，我想通过单击按钮完全替换它。我还希望能够通过后退按钮隐藏子片段。这是这个片段布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:id="@+id/contacts_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@null">
<LinearLayout
    android:id="@+id/import_contacts"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

<include layout="@layout/listview_filter"/>

<Button
    android:id="@+id/btn_my_clusters"
    android:background="@drawable/btn_wide_arrow_bg"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/TEXT"
    android:text="@string/btn_my_clusters_text"
    android:layout_marginBottom="10dp"/>

<ProgressBar
    android:id="@+id/progress_bar"
    android:layout_height="fill_parent"
    android:layout_width="wrap_content"
    android:layout_gravity="center"/>

<ListView
    android:id="@+id/contacts_list"
    android:divider="@null"
    android:listSelector="@android:color/transparent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:visibility="gone"/>
</LinearLayout> 
```

当我尝试像这样替换时`contacts_layout`：

```
ImportContactsFragment importContactsFragment = new  ImportContactsFragment();
FragmentTransaction transaction = getChildFragmentManager().beginTransaction();
transaction.addToBackStack(null);
transaction.replace(R.id.contacts_layout, importContactsFragment).commit(); 
```

它不起作用（我的意思是没有错误，但我的 ImportContactsFragment 根本没有显示）。但是当我尝试像这样替换`import_contacts`视图时：

```
ImportContactsFragment importContactsFragment = new  ImportContactsFragment();
FragmentTransaction transaction = getChildFragmentManager().beginTransaction();
transaction.addToBackStack(null);
transaction.replace(R.id.import_contacts, importContactsFragment).commit(); 
```

一切正常，显示 ImportContactsFragment。

所以我想知道是否可以用子片段替换所有片段内容？也许我可以用其他方式做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T07:51:46.620

该`replace`事务不会从目标布局容器中删除当前视图，因此当您使用第一段代码时，新视图会`Fragment`添加到 contacts_layout`LinearLayout`但不会被视为先前的视图覆盖整个屏幕（高度）。

使用第二段代码`LinearLayout`，您添加新的代码`Fragment`是父级的第一个子级，`LinearLayout`它有空间，所以它是可见的。

对于你正在做的事情，我建议你将初始布局包装在一个`Fragment`放置在包装器布局中的类中，然后你可以很容易地替换它。

# mysql - 具有 JOIN 和 GROUP BY 优化的 MySQL 查询。可能吗？

> ID：16107428
> 
> 赞同：5
> 
> 时间：2013-04-19T14:51:15.343
> 
> 标签：mysql, sql, query-optimization

我有两个表： gpnxuser 和 key_value

```
mysql> describe gpnxuser;
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| id           | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| version      | bigint(20)   | NO   |     | NULL    |                |
| email        | varchar(255) | YES  |     | NULL    |                |
| uuid         | varchar(255) | NO   | MUL | NULL    |                |
| partner_id   | bigint(20)   | NO   | MUL | NULL    |                |
| password     | varchar(255) | YES  |     | NULL    |                |
| date_created | datetime     | YES  |     | NULL    |                |
| last_updated | datetime     | YES  |     | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+ 
```

和

```
mysql> describe key_value;
+----------------+--------------+------+-----+---------+----------------+
| Field          | Type         | Null | Key | Default | Extra          |
+----------------+--------------+------+-----+---------+----------------+
| id             | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| version        | bigint(20)   | NO   |     | NULL    |                |
| date_created   | datetime     | YES  |     | NULL    |                |
| last_updated   | datetime     | YES  |     | NULL    |                |
| upkey          | varchar(255) | NO   | MUL | NULL    |                |
| user_id        | bigint(20)   | YES  | MUL | NULL    |                |
| security_level | int(11)      | NO   |     | NULL    |                |
+----------------+--------------+------+-----+---------+----------------+ 
```

key_value.user_id 是引用 gpnxuser.id 的 FK。我在 gpnxuser.partner_id 中还有一个索引，它是一个 FK，它引用了一个名为“partner”的表（我认为这与这个问题无关紧要）。

对于 partner_id = 64，我在 gpnxuser 中有 500K 行，它们与 key_value 中的大约 6M 行有关系。

我想要一个查询，它返回所有不同的“key_value.upkey”用户属于给定合作伙伴。我做了这样的事情：

```
select upkey from gpnxuser join key_value on gpnxuser.id=key_value.user_id where partner_id=64 group by upkey; 
```

这需要永远运行。查询的解释如下所示：

```
mysql> explain select upkey from gpnxuser join key_value on gpnxuser.id=key_value.user_id where partner_id=64 group by upkey;

    +----+-------------+-----------+------+----------------------------+--------------------+---------+-----------------------------+--------+----------------------------------------------+
    | id | select_type | table     | type | possible_keys              | key                | key_len | ref                         | rows   | Extra                                        |
    +----+-------------+-----------+------+----------------------------+--------------------+---------+-----------------------------+--------+----------------------------------------------+
    |  1 | SIMPLE      | gpnxuser  | ref  | PRIMARY,FKB2D9FEBE725C505E | FKB2D9FEBE725C505E | 8       | const                       | 259640 | Using index; Using temporary; Using filesort |
    |  1 | SIMPLE      | key_value | ref  | FK9E0C0F912D11F5A9         | FK9E0C0F912D11F5A9 | 9       | gpnx_finance_db.gpnxuser.id |     14 | Using where                                  |
    +----+-------------+-----------+------+----------------------------+--------------------+---------+-----------------------------+--------+----------------------------------------------+ 
```

我的问题是：有没有可以快速运行并获得我想要的结果的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:11:30.060

您需要做的是利用**EXISTS**语句：这只会导致部分表扫描，直到找到匹配项，而不是更多。

```
select upkey from (select distinct upkey from key_value) upk 
where EXISTS 
    (select 1 from gpnxuser u, key_value kv 
     where u.id=kv.user_id and partner_id=1 and kv.upkey = upk.upkey) 
```

注意。在原始查询中，**group by**被滥用：**distinct**看起来更好。

```
select DISTINCT upkey from gpnxuser join key_value on 
gpnxuser.id=key_value.user_id where partner_id=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:06:17.930

如果您通常基于此列运行查询，我会考虑在`key_value`上对您的表进行分区。`user_id`

[http://dev.mysql.com/doc/refman/5.1/en/partitioning.html](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)

# c# - 使用 C# 读取 Excel 文件会导致抛出 OleDbException

> ID：16107429
> 
> 赞同：1
> 
> 时间：2013-04-19T14:51:18.267
> 
> 标签：c#, excel

消息说

> Microsoft Access 数据库引擎找不到对象“Sheet1$”。确保对象存在并且正确拼写其名称和路径名。如果“Sheet1$”不是本地对象，请检查您的网络连接或联系服务器管理员。

工作表中工作表的名称是“Sheet1”

```
 string connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=""Excel 12.0 Xml;HDR=YES"";", fileName);
        string query = String.Format("SELECT [columnName1],[columnName2],[columnName3] from [{0}]", "Sheet1$");
        OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, connectionString);
        DataSet dataSet = new DataSet();
        dataAdapter.Fill(dataSet);
        DataTable YourTable = dataSet.Tables[0];
        listBox1.DataSource = YourTable.Columns["ColumnName1"]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T16:21:36.507

这对我有用：

```
string filename = @"C:\Book1.xlsm";

        string connectionString = String.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 8.0;HDR=YES\";", filename);
        string query = String.Format("SELECT * from [{0}$]", "Sheet1");
        OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, connectionString);
        DataSet dataSet = new DataSet();
        dataAdapter.Fill(dataSet);
        DataTable YourTable = dataSet.Tables[0]; 
```

***注意：***如果您的数据没有要制作的标题`HDR=NO`

还注意到在你的问题中你使用了

```
[columnName1],[columnName2],[columnName3] 
```

供您选择的列。请记住，这些应该是您要抓取的列中第一个单元格的值。

要获得 E 列，请使用：

```
 string connectionString = String.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 8.0;HDR=NO\";", filename);
        string query = String.Format("SELECT [F5] from [{0}$]", "Sheet1"); 
```

将 5 替换为您需要的任何其他列号

```
F1 = A
F2 = B
F3 = C 
```

等等。

您收到的错误可能是因为您打开并激活了文件。

或者您指向错误的文件（请记住，您必须在`filename`字符串中包含完整的文件路径。并确保工作表正确。Alos 请注意我`$`在字符串中包含的事实而不是在我的参数中，所以请记住仅只输入您要获取的工作表的名称。如果您仍然遇到问题，请向我提供您正在使用的工作表的完整文件名，即`C:\Book1.xlsm`您尝试从中获取数据的工作表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-12T17:31:17.903

请在 Sheet1 周围加上方括号。所以您的查询是： select * from [Sheet1$]

# r - 如何运行 Rcpp Hello World？

> ID：16107431
> 
> 赞同：1
> 
> 时间：2013-04-19T14:51:24.323
> 
> 标签：r, rcpp

好的，所以我创建了一个带有 function的 R 包*foo*`Rcpp.package.skeleton`。我还编译了 Hello World C++ 文件

```
R CMD SHLIB foo/src/rcpp_hello_world.cpp 
```

但是，当我打电话时，`rcpp_hello_world`我得到一个错误：

```
> source("foo/R/rcpp_hello_world.R")
> rcpp_hello_world()
Error in .Call("rcpp_hello_world", PACKAGE = "foo") : 
  "rcpp_hello_world" not available for .Call() for package "foo" 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T16:59:35.977

“包骨架”意味着您应该遵循*创建*（简单，骨架）包（可选）*构建*包（到 tar.gz）以及*安装*它。

*安装*后，您可以*加载它*，然后您实际上可以执行新功能。

或者，您可以通过 Rcpp Attributes 和/或内联包即时工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-21T07:39:19.267

要运行“hello world”示例，请执行以下操作：

1.  启动 R 并通过以下方式安装 Rcpp 包：

    > install.packages('Rcpp')

2.  在 R 中生成 Rcpp 模板：

    > rcpp.package.skeleton("mypackage")

3.  接下来，为包创建一个存档：

    > R CMD 构建 mypackage

4.  退出 R。您应该会看到生成的文件夹“mypackage”。键入以下内容以检查包：

    > R CMD 检查 mypackage

5.  现在，您将看到一个存档`mypackage_1.0.tar.gz`。安装它：

    > R CMD 安装 mypackage_1.0.tar.gz

6.  让我们在 R 中运行包。启动 R 并执行以下操作：

    > 库（'我的包'）
    > 
    > rcpp_hello_world() # 试试模板中生成的C++函数
    > 
    > [[1]] [1] “富” “酒吧”
    > 
    > [[2]] [1] 0 1

# java - CXF JAX-RS 客户端代理不维护 cookie

> ID：16107433
> 
> 赞同：5
> 
> 时间：2013-04-19T14:51:31.920
> 
> 标签：java, rest, cxf, jax-rs

我正在使用 CXF 为 JAX-RS REST 服务构建客户端代码。不幸的是，这个 REST 服务依赖于 cookie 来验证每个请求并维护其他关键会话状态。访问用户的帐户信息涉及两个请求：一个是登录，另一个是获取帐户信息。在第一个请求中检索到的会话 cookie 必须与第二个请求一起发送。

这是我的代码。

```
// Login (POST /sessions)
Response response = proxy.login(userCredentials);
assertEquals(200, response.getStatus());

// Get user's account info (GET /user)
response = proxy.getUser();
User user = response.readEntity(User.class); 
```

第二个请求未通过身份验证，因为它不包含先前登录操作返回的所需会话 cookie。

我相信有一种方法可以配置 WebClient 以跨请求维护 cookie。我搜索了高低，但我似乎无法找出如何。我希望有人能给我举个例子。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T15:36:37.877

我终于找到了解决方案。在使用代理之前，我必须执行以下操作。

```
WebClient.getConfig(proxy).getRequestContext().put(
        org.apache.cxf.message.Message.MAINTAIN_SESSION, Boolean.TRUE); 
```

# git - 如何获取每个开发人员在所有分支上的提交次数？

> ID：16107438
> 
> 赞同：0
> 
> 时间：2013-04-19T14:51:43.213
> 
> 标签：git, github

下面的代码做得很好，但只在当前分支上，我怎样才能得到所有分支的数字？

```
git pull  -v; git shortlog -s -n -e 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:46:30.707

我相信这会成功：

```
git shortlog -s -n -e --all 
```

这`--all`使它看起来好像所有的 refs 都放在了命令行上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:11:31.347

[按照这里](https://stackoverflow.com/questions/3846380/how-to-iterate-through-all-git-branches-using-bash-script)的建议，使用 for-each-ref 怎么样

您的情况下的命令如下所示：

```
git for-each-ref --shell \
 --format='git shortlog -s -n -e ^origin/master %(refname)' \
 refs/heads/ 
```

然后，您可以在终端中复制并粘贴打印的命令，该命令为每个分支打印短日志（我相信只有从 master 拆分后的部分）。连同上面的命令（我假设您在 master 分支中），您将获得完整的摘要（并知道谁在不同的分支上工作..）。

# ios - 如何在共享菜单中列出？

> ID：16107446
> 
> 赞同：8
> 
> 时间：2013-04-19T14:52:12.577
> 
> 标签：ios, share, uiactivityviewcontroller

我正在创建一个消息传递应用程序，我想让其他应用程序通过**共享菜单**选项将文本共享到我的应用程序。

如何在其中列出我的应用程序？

这是我想列出的菜单：
![图片](https://i.stack.imgur.com/znWsA.jpg)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-08-05T18:23:41.437

在 iOS 8 中，Apple 现在允许您将应用程序添加到用户的共享表中，作为可扩展性的众多功能之一，该功能旨在使您的应用程序即使在关闭时也可供用户使用。

![在此处输入图像描述](https://i.stack.imgur.com/N4kxA.jpg)

[您可以在此处](http://www.imore.com/sharing-ios-8-explained)阅读有关共享扩展的更多信息，或直接访问[Apple 的预发布文档](https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/ExtensibilityPG/ShareSheet.html#//apple_ref/doc/uid/TP40014214-CH12-SW1)以深入了解代码。

* * *

**更新：** Apple 文档的上述链接无效，请查看此处[App Extension Programming Guide: Share](https://developer.apple.com/library/prerelease/content/documentation/General/Conceptual/ExtensibilityPG/Share.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T23:54:24.950

您可以通过在您的应用程序 info.plist 中添加一些条目来做到这一点。

这是一个应该为您回答这个问题的帖子。 [斜线点帖子](https://stackoverflow.com/questions/11552978/how-do-i-add-a-menu-item-to-the-share-menu-in-ios)

这里[还有另一个链接](https://stackoverflow.com/questions/15991990/my-app-inside-imessage-uiactivityviewcontroller)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T15:05:20.380

您无法自动添加到`UIActivityViewController`其他应用程序中。该“共享菜单”上显示的唯一内容是 Apple 添加了支持的一些预定义应用程序，以及应用程序决定添加的任何其他应用程序特定活动。

您可以将您的应用程序设置为出现在用于打开文件的应用程序列表中，但这与您在此处要求的不同。

# python - Django 管理消息显示在我的视图中

> ID：16107447
> 
> 赞同：0
> 
> 时间：2013-04-19T14:52:16.170
> 
> 标签：python, django, admin

我正在使用 django 消息框架来显示用户错误和帮助消息，但是如果我不将消息添加到“消息”对象，它们仍然包含来自 django 管理员“我的最后操作”的消息。我找到的唯一答案是添加空消息，但这是不好的解决方案。那么，如何使用消息框架但不显示管理消息？

# selenium - 如何选择 selenium 中 id 中有句点的元素？

> ID：16107448
> 
> 赞同：3
> 
> 时间：2013-04-19T14:52:17.273
> 
> 标签：selenium, webdriver, css-selectors, selenium-webdriver

我正在尝试编写代码来选择 HTML 下拉菜单的所有选项。我编写了以下代码，我认为它应该可以工作。

```
public void testSelectMultipleOptions () {
    // code to get to report page
    selectAllOptions("param.Status");
    // code to run report and switch to the result page
}

public void selectAllOptions(String htmlID) {
    List<WebElement> options = selenium.findElements(By.cssSelector("select#"+htmlID+" > option"));
    for(WebElement option: options) {
        option.click();
    }
} 
```

当我运行此代码时，下拉菜单中未选择任何选项。我相信我遇到的问题是由于我有一个在 id 中有句点的 HTML 元素，但我没有能力更改页面的底层 HTML 代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:07:14.293

有*非常*糟糕的开发实践。我知道你没有能力改变它，但如果可以的话，指出它非常非常糟糕。为什么？两个原因。

在 CSS 中，基于类的规则通常以句点开头。

在 CSS 选择器框架中，包括 jQuery/Sizzle 和 Selenium 在这个例子中所做的事情，句号有一个特殊的含义——主要是根据*许多*规则来选择元素。这就是它在这里跳闸的原因——如果你将 CSS 选择器直接运行到 Chrome 或 Firebug 中，你会看到同样的事情——它也会摔倒。

在 ID 中为元素使用句点与这一切背道而驰。令人讨厌的是，HTML 规范允许这样做。

无论如何，一切都不会丢失，有很多方法可以解决它。

首先，你可以逃避它：

```
select#param\\.Status 
```

其次，您可以使用*稍微*复杂的选择器：

```
select[id='param.Status'] 
```

最后，您可以使用 XPath：

```
//select[@id='param.Status'] 
```

# android - 无法在 CirclePageIndicator 上设置CurrentItem(0)

> ID：16107449
> 
> 赞同：3
> 
> 时间：2013-04-19T14:52:17.043
> 
> 标签：android, android-viewpager, viewpagerindicator

如果您在 Activity 中有此代码`onCreate()`：

```
mViewPager = new ViewPager(this, null);
mPagerAdapter = new PagerAdapter(this);
mViewPager.setAdapter(mPagerAdapter);
mCirclePageIndicator.setViewPager(mViewPager);
mCirclePageIndicator.setOnPageChangeListener(onPageChangeListener); 
```

然后启动一个 AsyncTask 并希望将当前页面更改为`onPostExecute()`第 0 页，那么它将无法正常工作。它适用于任何其他页面！= 0，但使用 0 它只保留当前位置。

```
mCirclePageIndicator.setCurrentItem(0); 
```

如果有人提出想法，请随时分享。谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:52:17.043

**解决方法：**

首先将另一个页面设置为当前页面，然后设置为第 0 页。是的，我知道，它是延迟的，但我仍然没有找到关于它为什么不工作的解释。我已经尝试将它发布在 中`Handler`，即使有延迟，但什么也没有。纳达。

```
mCirclePageIndicator.setCurrentItem(1);
mCirclePageIndicator.setCurrentItem(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T12:38:12.747

**我发现 CirclePageIndicator.java 有一个错误，当我第一次启动我的Fragment**时它不想填充选定的页面圆圈，但是当我触摸我的**ViewPager**时，一切都很好......错误就在那里：

```
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    mCurrentPage = position;
    mPageOffset = positionOffset; // error here
    invalidate();

    if (mListener != null) {
        mListener.onPageScrolled(position, positionOffset, positionOffsetPixels);
    }
} 
```

**当我在onCreate**初始化我的视图时positionOffset**返回**Nan **，**这导致**onDraw()**不绘制我选择的圆圈的填充

 ****解决方案是在分配之前检查**positionOffset值，例如：**

```
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    mCurrentPage = position;
    mPageOffset = (positionOffset > 0) ? positionOffset : 0;
    invalidate();

    if (mListener != null) {
        mListener.onPageScrolled(position, positionOffset, positionOffsetPixels);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T14:51:41.880

对我有用的是`indicator.onPageSelected(0)`调用后设置`setCurrentItem(0)`。看一下代码，它所做的是将 设置`mSnapPage`为位置，否则不会这样做。

```
@Override
public void onPageSelected(int position) {
    if (mSnap || mScrollState == ViewPager.SCROLL_STATE_IDLE) {
        mCurrentPage = position;
        mSnapPage = position;
        invalidate();
    }

    if (mListener != null) {
        mListener.onPageSelected(position);
    } 
```

不过，这非常hacky。我希望他们修复它：/****

# tomcat - 使用 JAX-WS 参考实现的方法重载

> ID：16107454
> 
> 赞同：3
> 
> 时间：2013-04-19T14:52:30.100
> 
> 标签：tomcat, jax-ws, classcastexception, reference-implementation

WS-I 概要文件中不允许方法重载。通常的技巧似乎是添加`@WebMethod(operationName="...")`注释。如果我这样做，我会得到一个 ClassCastException。

最小的例子如下。

**界面：**

```
package org.example.test;

import javax.jws.WebMethod;
import javax.jws.WebService;

@WebService(name = "service", targetNamespace = "http://www.example.org/test")
public interface IThing {

    @WebMethod(operationName = "f1")
    public String f(String s);

    @WebMethod(operationName = "f2")
    public String f(Integer i);
} 
```

**执行：**

```
package org.example.test;

import javax.jws.WebMethod;
import javax.jws.WebService;

@WebService(endpointInterface = "org.example.test.IThing", targetNamespace = "http://www.example.org/test", portName = "ThingPort", serviceName = "service")
public class Thing implements IThing {

    @Override
    @WebMethod(operationName = "f1")
    public String f(String s) {
        return "f1";
    }

    @Override
    @WebMethod(operationName = "f2")
    public String f(Integer i) {
        return "f2";
    }

} 
```

**JUnit 测试用例：**

```
package org.example.test;

import java.net.URL;

import javax.xml.namespace.QName;
import javax.xml.ws.Service;

import org.junit.Test;

public class TestThing {

    @Test
    public void testThing() throws Exception {
        URL urlURL = new URL("http://localhost:8080/wstest/SOAP");
        QName qname = new QName("http://www.example.org/test", "service");
        Service service = Service.create(urlURL, qname);
        IThing thing = service.getPort(IThing.class);
        thing.f("s");
        thing.f(1);
    }
} 
```

**使用的 JAX-WS 实现：**

```
 compile group:'com.sun.xml.ws', name:'jaxws-rt', version:'2.2.7', transitive:true 
```

轨迹轨迹：

```
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String
    at org.example.test.jaxws.F$JaxbAccessorF_arg0.set(FieldAccessor_Ref.java:60)
    at com.sun.xml.bind.v2.runtime.reflect.Accessor.setUnadapted(Accessor.java:166)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$6.set(JAXBContextImpl.java:980)
    at com.sun.xml.ws.db.glassfish.RawAccessorWrapper.set(RawAccessorWrapper.java:73)
    at com.sun.xml.ws.client.sei.BodyBuilder$DocLit.build(BodyBuilder.java:264)
    at com.sun.xml.ws.client.sei.BodyBuilder$JAXB.createMessage(BodyBuilder.java:103)
    at com.sun.xml.ws.client.sei.StubHandler.createRequestPacket(StubHandler.java:231)
    at com.sun.xml.ws.db.DatabindingImpl.serializeRequest(DatabindingImpl.java:195)
    at com.sun.xml.ws.db.DatabindingImpl.serializeRequest(DatabindingImpl.java:257)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:117)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:102)
    at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:154)
    at com.sun.proxy.$Proxy31.f(Unknown Source)
    at org.example.test.TestThing.testThing(TestThing.java:19) 
```

运行环境是Tomcat7。

我假设我也没有被迫重命名 Java 方法。我是吗？

包含 Eclipse 项目的 zip 可在[http://ge.tt/1JrLxFh/v/0获得](http://ge.tt/1JrLxFh/v/0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-19T17:43:38.590

您还需要确保区分参数。否则，模式会将相同的类型与两种方法的参数相关联，从而有效地破坏您的重载意图。

```
@Override  
@WebMethod(operationName = "f2")  
@ResponseWrapper(className = "f2Response")  
@RequestWrapper(className = "f2")   
public String f(Integer i) {  
        return "f2";  
} 
```

# ios - Phonegap InAppBrowser 控制 iOS

> ID：16107463
> 
> 赞同：0
> 
> 时间：2013-04-19T14:53:16.110
> 
> 标签：ios, cordova, inappbrowser

我在 iOS 上使用 Phonegap 2.6，当链接打开时，它使用全屏，无法返回应用程序。有没有办法触发某种控件返回应用程序？我的代码如下：

```
 function shareonfb()
    {
        photoid = sessionStorage.PhotoId;
        filename = sessionStorage.PhotoFilename;

        postUrl  = "http://site.com/sharedimage.php?photoid="+photoid;

        imageUrl = "http://site.com/images/"+filename;

        var sSiteUrl="http://www.facebook.com/sharer.php?s=100&u="+postUrl; 

        var ref = window.open(sSiteUrl, '_self', 'location=yes', 'presntationstyle=pagesheet');

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:03:59.853

`_self`通过更改为解决了该问题`_blank`

所以：

```
var ref = window.open(sSiteUrl, '_blank', 'location=yes'); 
```

# vba - 邮件合并循环和传递查询参数

> ID：16107466
> 
> 赞同：1
> 
> 时间：2013-04-19T14:53:27.053
> 
> 标签：vba, ms-access

我正在寻找优化和重写一些代码来循环一堆在命令单击时运行的邮件合并。现在，存在 8 个相互独立的合并。我的问题是我运行了 8 个查询，这些查询都需要一个开始/结束日期来从表中提取信息并将其提供给邮件合并文档。我想通过输入框指定参数日期，然后将其传递给循环中的所有合并。

```
For i = 1 To 1 'will change to 8 :)

Select Case i
 Case 1
wordDoc = pathToDocToMerge
sqlStr = "SELECT * FROM [QUERY - FIRST LETTERS]"
sqlConex = "QUERY - FIRST LETTERS"
strExport = "Normal"
fileout = desktopPath & "\ " & strmonth & " - FIRSTLETTERS.pdf"
Case 2
Case 3
Case 4
Case 5
Case 6
Case 7
Case 8
End Select

    Set objword = GetObject(wordDoc)

    objword.Application.Visible = False

    objword.MailMerge.OpenDataSource _
    Name:=pathToMDB, _
    LinkToSource:=True, _
    Connection:=sqlConex, _
    sqlstatement:=sqlStr

    objword.MailMerge.Destination = wdSendToNewDocument
    objword.MailMerge.Execute

    If printtopdf = vbYes Then

    objword.Application.ActiveDocument.ExportAsFixedFormat OutputFileName:= _
    fileout _
    , ExportFormat:=wdExportFormatPDF, OpenAfterExport:=True, OptimizeFor:= _
    wdExportOptimizeForPrint, Range:=wdExportAllDocument
     objword.Application.ActiveDocument.close SaveChanges:=wdDoNotSaveChanges

    Else

    objword.Application.Options.PrintBackground = False
    'Print one copy of the letter
    objword.Application.ActiveDocument.PrintOut
    'Close Word and do not save the changes

    End If

    objword.Application.Quit SaveChanges:=wdDoNotSaveChanges
    Set objword = Nothing

Next i 
```

我知道参数可以像这样传递：

```
Dim dbs As DAO.Database
Dim qdf As DAO.QueryDef
Dim prm As DAO.Parameter
Dim rst As DAO.Recordset

Set dbs = CurrentDb
Set qdf = dbs.QueryDefs("qry_AMIS")

For Each prm In qdf.Parameters
    prm = Eval(prm.Name)
Next prm

Set rst = qdf.OpenRecordset 
```

但是我不确定如何将其与邮件合并联系起来，因为查询变成了 RST。任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:10:00.903

快速查看`MailMerge.OpenDataSource` [此处](http://msdn.microsoft.com/en-us/library/office/ff841005.aspx)的文档后，我不明白为什么您不能只更改现有代码...

```
sqlStr = "SELECT * FROM [QUERY - FIRST LETTERS]" 
```

......像......

```
sqlStr = "SELECT * FROM [QUERY - FIRST LETTERS] WHERE SomeDate=#" & Format(CDate(Me.txtSpecifyDate.Value), "yyyy-mm-dd") & "#" 
```

...`Me.txtSpecifyDate`表单上用于提示用户提供日期的文本框在哪里。

# python - wpython 目录列出并显示特定格式

> ID：16107468
> 
> 赞同：0
> 
> 时间：2013-04-19T14:53:29.647
> 
> 标签：python, python-2.7

1）以下语句工作正常

```
test_suite_name = [name for name in os.listdir(".") if (os.path.isdir(name))] 
```

但我需要查看“./squish”中的目录。

```
test_suite_name = [name for name in os.listdir("./Squish") if (os.path.isdir(name))] 
```

但是这个语句不起作用......请告诉我如何更正它，我认为 if 语句需要一些更正。

2）还有我应该使用什么脚本格式来显示以“test_”开头的文件夹说，

我有很多文件夹，有些以“test_”为前缀，这些文件夹可以位于放置脚本的上方或下方的文件夹结构中。

“test_”文件夹可以是 /xyz/abc 文件夹下的任何位置，该文​​件夹可以是 python 脚本所在位置上方或下方的任何位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:01:55.993

1）问题是，该名称只是子目录的名称，即`test`而不是`./Squish/test`。

改为使用`os.path.isdir(os.path.join('.', 'Squish', name))`。

如果您在 中查找文件夹`.`，则没有问题，因为 isdir 在给定相对路径的情况下查找当前目录。

2）您可以将列表理解扩展到

```
[name for name in (...) if os.path.isdir(...) and name.startswith('test_')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:56:56.707

你看，`name`迭代器中的变量只包含一个特定的文件或目录名，**而不是**整个路径。所以，

```
path = './Squish'
dirs = [name for d in os.listdir(path) 
        if os.path.isdir(os.path.join(path, name))] 
```

应该做。

请注意，`sorted(dirs)`由于`os.listdir()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:58:32.030

对于第一个问题：

```
 test_suite_name = [name for name in os.listdir("./Squish") if os.path.isdir(os.path.join("./Squish", name))] 
```

至于你的第二个问题，你可以做两件事：

1）使用完整路径；例如：`r'C:\Windows\System32\calc.exe'`

2）假设您的脚本位于`C:\Documents and Settings\User\Desktop`，并且您要指定`log.txt`位于`C:\Documents and Settings`文件夹中的文件。

您可以使用`'..'`来指定当前位置的父目录。因此，如果您在`C:\Documents and Settings\User\Desktop`，那么`r'..\..\log.txt'`将参考`C:\Documents and Settings\log.txt`

# bdd - ScalaTest 和 Spock 的比较

> ID：16107470
> 
> 赞同：15
> 
> 时间：2013-04-19T14:53:35.797
> 
> 标签：bdd, spock, scalatest

scalatest 和 spock 有何不同？每个的附加值是多少？对于行为驱动开发 (BDD)，哪个更敏捷？请问你能分享一些关于这个问题的想法吗？

我想开始 BDD，我想在两者之间选择一个，因此我想做出一个有根据的决定。因此，我首先获得了最大的信息，特别是考虑到我是一名 java 程序员并且 scala 似乎有一个很重要的学习曲线。

欢迎任何建议或想法或经验回报。

非常感谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-20T03:34:03.200

简而言之，我建议使用 ScalaTest 测试 Scala 代码，使用 Spock 测试 Java 或 Groovy 代码。（当然，用 ScalaTest 测试 Java 代码也是完全可能的。）为什么不试试这两种工具并坚持使用你更熟悉的那个呢？

免责声明：我是 Spock 的创造者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-24T02:19:16.177

虽然我同意彼得的回答，但我想就此发表我的看法。

ScalaTest 和 Spock 都提供流畅的 BDD 测试。但是我发现 Spock 的最佳功能是您可以创建具有多组数据和预期结果的单个场景。这很像 Cucumber 的 Scenario Outline，只在单元测试级别运行。

我找不到其他可以做到这一点的单元测试框架/库。

总之，如果您需要为单个测试场景测试多个输入/输出，请使用 Spock，否则，请随意选择您觉得合适的任何内容。

# ssms - SQL Server Management Studio 皮肤/外观/布局

> ID：16107471
> 
> 赞同：42
> 
> 时间：2013-04-19T14:53:36.527
> 
> 标签：ssms

您可以将自定义皮肤/外观应用到 SSMS 吗？我在想你会在大多数 IDE 中找到的深色主题（黑色背景，黄色字体）

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2015-04-04T01:52:31.023

I decided to try something simple on **SSMS 2012**:

1.  Go to [http://studiostyl.es/](http://studiostyl.es/)
2.  Pick a theme and download it
3.  Follow these [screenshot instructions](https://www.flickr.com/photos/mycargus/sets/72157651330521998/)

Note that doing this will only affect the theme of the text editor, not the toolbar, menu, object explorer window, etc.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-10-17T00:14:59.660

SSMS 2012 基于 VS 2010 外壳构建。因此，它可以使用兼容的“.vssettings”文件来应用自定义配色方案。

另请参阅[http://studiostyl.es/](http://studiostyl.es/)了解画廊。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-09T20:17:19.757

如果您使用的是 SSMS 2016（或更高版本），您可以在启用后使用 Microsoft 自己的 Dark 主题。

[您可以在 Kyle Parrish 的题为在 SQL Server Management Studio 2016 中启用“深色”主题](https://community.spiceworks.com/how_to/136505-enable-dark-theme-in-sql-server-management-studio-2016 "Enable 'Dark' Theme in SQL Server Management Studio 2016")的博文中找到说明

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-22T06:52:54.840

这是我的深色主题，您可以下载：

[https://stingrae.com.au/dark-theme-for-microsoft-sql-management-studio.aspx](https://stingrae.com.au/dark-theme-for-microsoft-sql-management-studio.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-20T07:16:16.160

对于 SSMS 18：

已经有一个默认的深色主题，可以按键删除。您需要转到以下文件，转到“删除深色主题”部分并将密钥注释掉。您将在设置中找到深色主题。（菜单>选项>环境/常规 - 颜色主题）

C:\Program Files (x86)\Microsoft SQL Server Management Studio 18\Common7\IDE\ssms.pkgundef

```
// Remove Dark theme
//[$RootKey$\Themes\{1ded0138-47ce-435e-84ef-9ec1f439b749}] 
```

我还在一个网站上找到了一个很好的解决方案，该网站有一个准备好的 powershell 语句来改变这一点：

```
powershell -Command "(gc 'C:\Program Files (x86)\Microsoft SQL Server Management Studio 18\Common7\IDE\ssms.pkgundef') -replace '\[\`$RootKey\`$\\Themes\\{1ded0138-47ce-435e-84ef-9ec1f439b749}\]', '//[`$RootKey`$\Themes\{1ded0138-47ce-435e-84ef-9ec1f439b749}]' | Out-File 'C:\Program Files (x86)\Microsoft SQL Server Management Studio 18\Common7\IDE\ssms.pkgundef'" 
```

（来源：[https](https://www.sqlshack.com/setting-up-the-dark-theme-in-sql-server-management-studio/) ://www.sqlshack.com/setting-up-the-dark-theme-in-sql-server-management-studio/ ）

# flash - 使用 Flash 播放视频作为 Video.js 的后备

> ID：16107476
> 
> 赞同：0
> 
> 时间：2013-04-19T14:53:54.570
> 
> 标签：flash, video

带有 FF、Chrome 的视频运行良好。所以，对于 Ie7 和 Ie8 我有问题。使用闪存回退，

您的浏览器不支持视频...</p> </object> ]]>

我无法播放视频。如果我用已经托管的东西替换 url 参数，视频就可以了。为什么不播放我本地的视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:11:24.533

听起来像是一个 activeX 问题，特别是如果你在 IE 上，还要确保你的链接是正确的，我相信有多个地方你需要改变它

```
<param name="movie" value="your.swf" /> and

<object type="application/x-shockwave-flash" data="your.swf" width="533" height="337"> 
```

# build - Gradle：如何在打包中排除编译范围文件依赖项？

> ID：16107477
> 
> 赞同：4
> 
> 时间：2013-04-19T14:54:01.670
> 
> 标签：build, dependencies, gradle

我有一个具有以下基本结构的多模块 gradle 项目：

```
root
  core
  c-interface
  m-interface 
```

c-interface 和 m-interface 都依赖于核心项目：

```
compile project(':root:core') 
```

c-interface 和 m-interface 使用 WAR 插件，但 core 没有，只​​是一个 jar。

在核心项目中，我使用以下内容引入了一些文件系统依赖项。我无法将这些依赖项之一打包在 c-interface 和 m-interface 生成的 WAR 中。以前我在一个nexus maven存储库中有这个依赖关系，所以我可以在c-interface和m-interface的providedRuntime配置中按组、名称、版本排除它。

我无法弄清楚如何对文件依赖项做同样的事情。gradle 依赖项任务没有列出文件依赖项，所以我不知道我会在提供的运行时中放入什么。

我阅读了[http://issues.gradle.org/browse/GRADLE-471](http://issues.gradle.org/browse/GRADLE-471)但尝试使用那里的想法似乎并没有从我的包中删除存档。这是我目前正在定义的内容（在核心的 build.gradle 中）：

```
compile fileTree(dir: 'dependencies/compile/archive', include: '*.jar', exclude: 'management.jar')
compile(files('dependencies/compile/archive/management.jar')){ notPackaged = true  } // Excludes it from all publications 
```

**更新**

[没有war插件的providedCompile](https://stackoverflow.com/questions/13925724/providedcompile-without-war-plugin)看起来是一种可能性。我在核心 build.gradle 中进行了设置，它编译得很好，但是 c-interface 和 m-interface 在编译时也需要依赖。在 c-interface 和 m-interface 中将文件作为providedCompile（甚至使用compile 进行完整性检查）包含在内，并不能修复与缺少 management.jar 依赖项相关的编译时错误。我的猜测是因为它已经在 core 中定义为 providedCompile ，所以新声明在 c-interface 和 m-interface 中被忽略了。

核心/build.gradle：

```
configurations { providedCompile }

dependencies {
    providedCompile files('dependencies/compile/archive/management.jar')
}

sourceSets.main.compileClasspath += configurations.providedCompile
sourceSets.test.compileClasspath += configurations.providedCompile
sourceSets.test.runtimeClasspath += configurations.providedCompile 
```

c接口/build.gradle：

```
providedCompile files('dependencies/compile/archive/management.jar') 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T19:08:19.807

可能有一个更清洁和更简单的解决方案，但您可以指定自定义配置：

```
configurations {
    compileOnly
} 
```

然后指定所有依赖项：

```
dependencies {
    compile fileTree(dir: 'dependencies/compile/archive', include: '*.jar', exclude: 'management.jar')
    compileOnly files('dependencies/compile/archive/management.jar')
} 
```

最后将`compileOnly`配置添加到所有源集的类路径中

```
sourceSets.all {
    compileClasspath += configurations.compileOnly
} 
```

这种方式`management.jar`应该在类路径上进行编译，但不会被打包。

编辑直到现在我才完全理解你的问题。以下为我在一个测试项目中工作。

在核心项目 gradle 文件中：

```
repositories {
    flatDir {
        dirs 'dependencies/compile/archive'
    }
}

dependencies {
    compile fileTree(dir: 'dependencies/compile/archive', include: '*.jar', exclude: 'management.jar')
    compile ':management:'
} 
```

在依赖核心的项目中：

```
repositories {
    flatDir {
        dirs new File(project(':core').projectDir, 'dependencies/compile/archive')
    }
}

dependencies {
    compile(project(':core')) {
        exclude module: 'management'
    }
    compileOnly ':management':
}

sourceSets.all {
    compileClasspath += configurations.compileOnly
} 
```

# c++ - 从 cuda 3D 内存复制到线性内存：复制的数据不是我预期的

> ID：16107480
> 
> 赞同：1
> 
> 时间：2013-04-19T14:54:12.093
> 
> 标签：c++, cuda

这是我的问题：

我的设备上有一个 3D 数组`float3`：

```
int size[3] = {416,464,512};
cudaExtent extent = make_cudaExtent(size[0]*sizeof(float3),size[1],size[2]);
cudaPitchedPtr renderedVolume;
int ret = cudaMalloc3D(&renderedVolume, extent);
size_t pitch = renderedVolume.pitch; //pitch = 5,120
size_t slicePitch = pitch * size[1]; //slicePitch = 2,375,680 
```

然后我使用它，让它充满优秀的数据。

之后，我希望将其复制到主机上的一维线性内存中：

```
float *host_memory = (float*)malloc(size[0]*size[1]*size[2]*sizeof(float3));
cudaMemcpy3DParms p = {0};
p.srcPtr = renderedVolume;
p.dstPtr = make_cudaPitchedPtr(host_memory,size[0]*sizeof(float3),size[0],size[1]); 
p.extent = make_cudaExtent(size[0]*sizeof(float3),size[1],size[2]);
p.srcPos = make_cudaPos(0,0,0);
p.dstPos = make_cudaPos(0,0,0);
p.kind=cudaMemcpyDeviceToHost;
cudaMemcpy3D(&p); 
```

我将 host_memory 中的结果与我最初写入 tu `renderedVolume`( `my_data`) 的数据以及我在 my 中读取的数据`3Dmemory`逐个切片进行比较：

```
float* test1 = (float*)malloc(size[0]*size[1]*sizeof(float3));
cudaMemcpy(test1, myData, size[0]*size[1]*sizeof(float3) , cudaMemcpyDeviceToHost);
float* test2 = (float*)malloc(size[0]*size[1]*sizeof(float3));
cudaMemcpy(test2,(char*)renderedVolume.ptr + slicePitch * i,size[0]*size[1]*sizeof(float3), cudaMemcpyDeviceToHost); 
```

**问题：**

*   第一个切片 ( `i=0`) 没问题，我在 host_memory 中有相同的数据，`test1`并且`test2`.
*   在第二个切片中，我在`test1`和中有相同的数据`test2`。但是，我应该在`host_memory+579072`（=`float`每个切片的数量，也是`heigth*pitch`目标倾斜指针的数量）中找到这些数据，并且我在`host_memory+577504`. 它是按`1568`字节关闭的，这与我所知道的没有任何关系，这就是为什么如果你们中的任何人知道我的代码中可能存在什么问题，我将非常感激？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-14T05:44:33.603

这是一个较晚的答案，用于从未回答的列表中删除此问题。

下面，我提供了一个完整的代码，展示了如何分配`3D`内存`cudaMalloc3D`，将主机分配的`1D`内存移动到`3D`设备内存，通过函数对设备数据`cudaMemcpy3D`执行一些操作，并将结果数据移动回主机内存，再次通过。`3D``test_kernel_3D` `__global__``3D``1D``cudaMemcpy3D`

该`__global__`函数对设备内存`test_kernel_3D`的每个元素进行平方。`3D`特别是，网格的每个线程都负责沿着“深度”维度`2D`执行循环。`for`

```
#include<stdio.h>
#include<cuda.h>
#include<cuda_runtime.h>
#include<device_launch_parameters.h>
#include<conio.h>

#define BLOCKSIZE_x 16
#define BLOCKSIZE_y 16

#define N 128
#define M 64
#define W 16

/*****************/
/* CUDA MEMCHECK */
/*****************/
#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
    if (code != cudaSuccess) 
    {
        fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
        if (abort) { getch(); exit(code); }
    }
}

/*******************/
/* iDivUp FUNCTION */
/*******************/
int iDivUp(int a, int b){ return ((a % b) != 0) ? (a / b + 1) : (a / b); }

/******************/
/* TEST KERNEL 3D */
/******************/
__global__ void test_kernel_3D(cudaPitchedPtr devPitchedPtr)
{
    int tidx =  blockIdx.x*blockDim.x+threadIdx.x;
    int tidy =  blockIdx.y*blockDim.y+threadIdx.y;

    char* devPtr = (char*) devPitchedPtr.ptr;
    size_t pitch = devPitchedPtr.pitch;
    size_t slicePitch = pitch * N;

    for (int w = 0; w < W; w++) {
        char* slice = devPtr + w * slicePitch;
        float* row = (float*)(slice + tidy * pitch);
        row[tidx] = row[tidx] * row[tidx];
    }
}

/********/
/* MAIN */
/********/
int main()
{
    float a[N][M][W];

    for (int i=0; i<N; i++)
        for (int j=0; j<M; j++) 
            for (int w=0; w<W; w++) {
                a[i][j][w] = 3.f;
                //printf("row %i column %i depth %i value %f \n",i,j,w,a[i][j][w]);
            }

    // --- 3D pitched allocation and host->device memcopy
    cudaExtent extent = make_cudaExtent(M * sizeof(float), N, W);

    cudaPitchedPtr devPitchedPtr;
    gpuErrchk(cudaMalloc3D(&devPitchedPtr, extent));

    cudaMemcpy3DParms p = { 0 };
    p.srcPtr.ptr = a;
    p.srcPtr.pitch = M * sizeof(float);
    p.srcPtr.xsize = M;
    p.srcPtr.ysize = N;
    p.dstPtr.ptr = devPitchedPtr.ptr;
    p.dstPtr.pitch = devPitchedPtr.pitch;
    p.dstPtr.xsize = M;
    p.dstPtr.ysize = N;
    p.extent.width = M * sizeof(float);
    p.extent.height = N;
    p.extent.depth = W;
    p.kind = cudaMemcpyHostToDevice;
    gpuErrchk(cudaMemcpy3D(&p));

    dim3 GridSize(iDivUp(M,BLOCKSIZE_x),iDivUp(N,BLOCKSIZE_y));
    dim3 BlockSize(BLOCKSIZE_y,BLOCKSIZE_x);
    test_kernel_3D<<<GridSize,BlockSize>>>(devPitchedPtr);
    gpuErrchk(cudaPeekAtLastError());
    gpuErrchk(cudaDeviceSynchronize());

    p.srcPtr.ptr = devPitchedPtr.ptr;
    p.srcPtr.pitch = devPitchedPtr.pitch;
    p.dstPtr.ptr = a;
    p.dstPtr.pitch = M * sizeof(float); 
    p.kind = cudaMemcpyDeviceToHost;
    gpuErrchk(cudaMemcpy3D(&p));

    for (int i=0; i<N; i++) 
        for (int j=0; j<M; j++) 
            for (int w=0; w<W; w++)
                printf("row %i column %i depth %i value %f\n",i,j,w,a[i][j][w]);

    getch();
    return 0;
} 
```

# c# - 使用 BinaryWriter 写入 Nullable 值

> ID：16107482
> 
> 赞同：1
> 
> 时间：2013-04-19T14:54:20.897
> 
> 标签：c#, nullable, binarywriter, non-nullable

我想使用以下代码将一个可为空的字符串写入文件`BinaryWriter`：

```
 BinaryWriter writer = new BinaryWriter(st);
  String? s;
  if(s!=null){
        writer.Write(s);
    } 
```

但发生此错误：

> 类型“字符串”必须是不可为空的值类型，才能将其用作泛型类型或方法“System.Nullable”中的参数“T”

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:56:30.653

字符串始终可以为空，您无需尝试使其可为空，因为它们不是值类型。只需删除 ? 这使得修复它可以为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:57:12.277

字符串在 C#.NET 中已经可以为空，它们是一种引用类型，周围有语法糖，使它们更易于使用。你不能让一个可以为空的 double 可以为空，宇宙会崩溃。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T14:58:00.790

根据[MSDN](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)文档，我们可以看到 Nullable 类型只能与结构一起使用：

```
[SerializableAttribute]
public struct Nullable<T>
where T : struct 
```

ps 另请参阅[类型参数的约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T14:56:06.860

字符串是引用类型。它不能为空。
`public struct Nullable<T> where T : struct, new()`

# php - CakePHP 1.3 - 蛋糕库中的无限循环、Apache 崩溃、会话助手和 __start()？

> ID：16107483
> 
> 赞同：5
> 
> 时间：2013-04-19T14:54:22.947
> 
> 标签：php, apache, session, cakephp, infinite-loop

将会话助手添加到应用程序控制器后，Apache 开始崩溃。我已经通过日志记录的方式跟踪了问题，发现在 /CORE/cake/libs/controller/component/session 中，该函数`check()`开始运行一次并且没有完成。但是，它调用的函数 , 会`__start()`无限运行（至少在 Apache 崩溃之前）。通过无限运行，我的意思是整个`__start()`函数一直运行多次。同样，一旦我在应用程序控制器中添加会话助手，就会发生这种情况。没有它，Cake 似乎运行良好，直到我达到在视图中使用会话助手的地步。这个系统是从 Cake 1.1 升级而来的，在 Cake 1.1 中，会话助手自动包含在内并且运行良好。我在 Cake 1.3.7 和 Cake 1.3.15 上都尝试过，结果相同。我猜会话设置与 Cake 1.3 做事的方式有冲突。下面是我的配置/核心文件、来自 Apache 的崩溃信息以及崩溃前的 Apache 日志。如果任何其他信息会有所帮助，请在评论中告诉我。任何建议如何解决这个问题？谢谢！

编辑：我忘了在这里包含相关[讨论](https://cakephp.lighthouseapp.com/projects/42648/tickets/1173-cakesession-circular-dependancy-race-condition-or-infinite-loop)。不幸的是，他们在这里没有明确的解决方案，但他们似乎想修复 cake 中的错误，我很乐意修改我的代码以避免错误。

编辑2：我最近发现这个项目的经理计划将来停止使用数据库会话，这样就完全解决了我的情况。当然，我会将这个问题留给未来的访客。

应用程序/配置/core.php：

```
<?php
/**
 * This is core configuration file.
 *
 * Use it to configure core behavior of Cake.
 *
 * PHP versions 4 and 5
 *
 * CakePHP(tm) : Rapid Development Framework (http://cakephp.org)
 * Copyright 2005-2010, Cake Software Foundation, Inc. (http://cakefoundation.org)
 *
 * Licensed under The MIT License
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright 2005-2010, Cake Software Foundation, Inc. (http://cakefoundation.org)
 * @link          http://cakephp.org CakePHP(tm) Project
 * @package       cake
 * @subpackage    cake.app.config
 * @since         CakePHP(tm) v 0.2.9
 * @license       MIT License (http://www.opensource.org/licenses/mit-license.php)
 */

/**
 * CakePHP Debug Level:
 *
 * Production Mode:
 *  0: No error messages, errors, or warnings shown. Flash messages redirect.
 *
 * Development Mode:
 *  1: Errors and warnings shown, model caches refreshed, flash messages halted.
 *  2: As in 1, but also with full debug messages and SQL output.
 *
 * In production mode, flash messages redirect after a time interval.
 * In development mode, you need to click the flash message to continue.
 */
    //Configure::write('debug', 2);

/**
 * CakePHP Log Level:
 *
 * In case of Production Mode CakePHP gives you the possibility to continue logging errors.
 *
 * The following parameters can be used:
 *  Boolean: Set true/false to activate/deactivate logging
 *    Configure::write('log', true);
 *
 *  Integer: Use built-in PHP constants to set the error level (see error_reporting)
 *    Configure::write('log', E_ERROR | E_WARNING);
 *    Configure::write('log', E_ALL ^ E_NOTICE);
 */
    //Configure::write('log', true);

/**
 * Application wide charset encoding
 */
    //Configure::write('App.encoding', 'UTF-8');

/**
 * To configure CakePHP *not* to use mod_rewrite and to
 * use CakePHP pretty URLs, remove these .htaccess
 * files:
 *
 * /.htaccess
 * /app/.htaccess
 * /app/webroot/.htaccess
 *
 * And uncomment the App.baseUrl below:
 */
    //Configure::write('App.baseUrl', env('SCRIPT_NAME'));

/**
 * Uncomment the define below to use CakePHP prefix routes.
 *
 * The value of the define determines the names of the routes
 * and their associated controller actions:
 *
 * Set to an array of prefixes you want to use in your application. Use for
 * admin or other prefixed routes.
 *
 *  Routing.prefixes = array('admin', 'manager');
 *
 * Enables:
 *  `admin_index()` and `/admin/controller/index`
 *  `manager_index()` and `/manager/controller/index`
 *
 * [Note Routing.admin is deprecated in 1.3\.  Use Routing.prefixes instead]
 */
    //Configure::write('Routing.prefixes', array('admin'));

/**
 * Turn off all caching application-wide.
 *
 */
    //Configure::write('Cache.disable', true);

    define('DEBUG', 2);
    define('DEBUG_AJAX', true);
/**
 * Enable cache checking.
 *
 * If set to true, for view caching you must still use the controller
 * var $cacheAction inside your controllers to define caching settings.
 * You can either set it controller-wide by setting var $cacheAction = true,
 * or in each action using $this->cacheAction = true.
 *
 */
    Configure::write('Cache.check', false);

/**
 * Defines the default error type when using the log() function. Used for
 * differentiating error logging and debugging. Currently PHP supports LOG_DEBUG.
 */
    define('LOG_ERROR', 2);

/**
 * The preferred session handling method. Valid values:
 *
 * 'php'            Uses settings defined in your php.ini.
 * 'cake'       Saves session files in CakePHP's /tmp directory.
 * 'database'   Uses CakePHP's database sessions.
 *
 * To define a custom session handler, save it at /app/config/<name>.php.
 * Set the value of 'Session.save' to <name> to utilize it in CakePHP.
 *
 * To use database sessions, run the app/config/schema/sessions.php schema using
 * the cake shell command: cake schema create Sessions
 *
 */
    Configure::write('Session.save', 'database');

/**
 * The model name to be used for the session model.
 *
 * 'Session.save' must be set to 'database' in order to utilize this constant.
 *
 * The model name set here should *not* be used elsewhere in your application.
 */
    Configure::write('Session.model', 'Session');

/**
 * The name of the table used to store CakePHP database sessions.
 *
 * 'Session.save' must be set to 'database' in order to utilize this constant.
 *
 * The table name set here should *not* include any table prefix defined elsewhere.
 *
 * Please note that if you set a value for Session.model (above), any value set for
 * Session.table will be ignored.
 *
 * [Note: Session.table is deprecated as of CakePHP 1.3]
 */
    Configure::write('Session.table', 'cake_sessions');

/**
 * The DATABASE_CONFIG::$var to use for database session handling.
 *
 * 'Session.save' must be set to 'database' in order to utilize this constant.
 */
    Configure::write('Session.database', 'default');

/**
 * The name of CakePHP's session cookie.
 *
 * Note the guidelines for Session names states: "The session name references
 * the session id in cookies and URLs. It should contain only alphanumeric
 * characters."
 * @link http://php.net/session_name
 */
    Configure::write('Session.cookie', 'CAKEPHP');

/**
 * Session time out time (in seconds).
 * Actual value depends on 'Security.level' setting.
 */
    Configure::write('Session.timeout', '120');

/**
 * If set to false, sessions are not automatically started.
 */
    Configure::write('Session.start', true);

/**
 * When set to false, HTTP_USER_AGENT will not be checked
 * in the session. You might want to set the value to false, when dealing with
 * older versions of IE, Chrome Frame or certain web-browsing devices and AJAX
 */
    Configure::write('Session.checkAgent', true);

/**
 * The level of CakePHP security. The session timeout time defined
 * in 'Session.timeout' is multiplied according to the settings here.
 * Valid values:
 *
 * 'high'   Session timeout in 'Session.timeout' x 10
 * 'medium' Session timeout in 'Session.timeout' x 100
 * 'low'    Session timeout in 'Session.timeout' x 300
 *
 * CakePHP session IDs are also regenerated between requests if
 * 'Security.level' is set to 'high'.
 */
    Configure::write('Security.level', 'low');

/**
 * A random string used in security hashing methods.
 */
    Configure::write('Security.salt', 'DYhG93b0qyJfIxfs2guVoUubWwvniR2G0FgaC9mi');

/**
 * A random numeric string (digits only) used to encrypt/decrypt strings.
 */
    Configure::write('Security.cipherSeed', '76859309657453542496749683645');

/**
 * Apply timestamps with the last modified time to static assets (js, css, images).
 * Will append a querystring parameter containing the time the file was modified. This is
 * useful for invalidating browser caches.
 *
 * Set to `true` to apply timestamps, when debug = 0, or set to 'force' to always enable
 * timestamping.
 */
    //Configure::write('Asset.timestamp', true);
/**
 * Compress CSS output by removing comments, whitespace, repeating tags, etc.
 * This requires a/var/cache directory to be writable by the web server for caching.
 * and /vendors/csspp/csspp.php
 *
 * To use, prefix the CSS link URL with '/ccss/' instead of '/css/' or use HtmlHelper::css().
 */
    //Configure::write('Asset.filter.css', 'css.php');

/**
 * Plug in your own custom JavaScript compressor by dropping a script in your webroot to handle the
 * output, and setting the config below to the name of the script.
 *
 * To use, prefix your JavaScript link URLs with '/cjs/' instead of '/js/' or use JavaScriptHelper::link().
 */
    //Configure::write('Asset.filter.js', 'custom_javascript_output_filter.php');

/**
 * The classname and database used in CakePHP's
 * access control lists.
 */
    Configure::write('Acl.classname', 'DbAcl');
    Configure::write('Acl.database', 'default');

/**
 * If you are on PHP 5.3 uncomment this line and correct your server timezone
 * to fix the date & time related errors.
 */
    //date_default_timezone_set('UTC');

/**
 *
 * Cache Engine Configuration
 * Default settings provided below
 *
 * File storage engine.
 *
 *   Cache::config('default', array(
 *      'engine' => 'File', //[required]
 *      'duration'=> 3600, //[optional]
 *      'probability'=> 100, //[optional]
 *      'path' => CACHE, //[optional] use system tmp directory - remember to use absolute path
 *      'prefix' => 'cake_', //[optional]  prefix every cache file with this string
 *      'lock' => false, //[optional]  use file locking
 *      'serialize' => true, [optional]
 *  ));
 *
 *
 * APC (http://pecl.php.net/package/APC)
 *
 *   Cache::config('default', array(
 *      'engine' => 'Apc', //[required]
 *      'duration'=> 3600, //[optional]
 *      'probability'=> 100, //[optional]
 *      'prefix' => Inflector::slug(APP_DIR) . '_', //[optional]  prefix every cache file with this string
 *  ));
 *
 * Xcache (http://xcache.lighttpd.net/)
 *
 *   Cache::config('default', array(
 *      'engine' => 'Xcache', //[required]
 *      'duration'=> 3600, //[optional]
 *      'probability'=> 100, //[optional]
 *      'prefix' => Inflector::slug(APP_DIR) . '_', //[optional] prefix every cache file with this string
 *      'user' => 'user', //user from xcache.admin.user settings
 *      'password' => 'password', //plaintext password (xcache.admin.pass)
 *  ));
 *
 *
 * Memcache (http://www.danga.com/memcached/)
 *
 *   Cache::config('default', array(
 *      'engine' => 'Memcache', //[required]
 *      'duration'=> 3600, //[optional]
 *      'probability'=> 100, //[optional]
 *      'prefix' => Inflector::slug(APP_DIR) . '_', //[optional]  prefix every cache file with this string
 *      'servers' => array(
 *          '127.0.0.1:11211' // localhost, default port 11211
 *      ), //[optional]
 *      'compress' => false, // [optional] compress data in Memcache (slower, but uses less memory)
 *  ));
 *
 */
    Cache::config('default', array('engine' => 'File'));

/**
 * This is the URL at which your working copy
 * is accessed -- no trailing forward slash
 */
        define('BIRT_REPORT_BASE_URL', '');

/**
 * This is the directory to which BIRT has
 * permission to write files during graphing
 */
        define('BIRT_REPORT_WRITABLE_IMAGE_DIR', ''); 
```

阿帕奇崩溃：

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: httpd.exe
  Application Version:  2.2.11.0
  Application Timestamp:    493f5d44
  Fault Module Name:    php5ts.dll
  Fault Module Version: 5.2.9.9
  Fault Module Timestamp:   49a56925
  Exception Code:   c00000fd
  Exception Offset: 001a049d
  OS Version:   6.1.7601.2.1.0.768.3
  Locale ID:    1033
  Additional Information 1: 8278
  Additional Information 2: 82782538381a8681201b9137311ac754
  Additional Information 3: 9f8d
  Additional Information 4: 9f8d09670f894d997bbbca5236befa87 
```

Apache 错误日志：

```
[Fri Apr 19 10:52:01 2013] [notice] Apache/2.2.11 (Win32) DAV/2 mod_ssl/2.2.11 OpenSSL/0.9.8i PHP/5.2.9 configured -- resuming normal operations
[Fri Apr 19 10:52:01 2013] [notice] Server built: Dec 10 2008 00:10:06
[Fri Apr 19 10:52:01 2013] [notice] Parent: Created child process 7024
[Fri Apr 19 10:52:02 2013] [notice] Digest: generating secret for digest authentication ...
[Fri Apr 19 10:52:02 2013] [notice] Digest: done
[Fri Apr 19 10:52:03 2013] [notice] Child 7024: Child process is running
[Fri Apr 19 10:52:03 2013] [notice] Child 7024: Acquired the start mutex.
[Fri Apr 19 10:52:03 2013] [notice] Child 7024: Starting 250 worker threads.
[Fri Apr 19 10:52:03 2013] [notice] Child 7024: Starting thread to listen on port 443.
[Fri Apr 19 10:52:03 2013] [notice] Child 7024: Starting thread to listen on port 80. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:59:08.483

我找到了一种允许数据库版本的会话工作的解决方法。这不是一个修复，但它可能适用于我的情况，尽管真正的修复仍然是首选。

解决方法是关闭代理检查：

```
Configure::write('Session.checkAgent', false); 
```

# c# - 如何让 ASP.Net 处理一些 XML 请求，但仍返回物理 XML 文件？

> ID：16107488
> 
> 赞同：0
> 
> 时间：2013-04-19T14:54:50.083
> 
> 标签：c#, asp.net, url-rewriting, iis-7.5, generic-handler

语言：C# 5.0
平台：IIS 7.5 上的 ASP.Net 4.5
操作系统：Windows Server 2008 R2 Standard 64 位

我正在开发一个旧的 Web 窗体应用程序来添加从我们的数据库动态生成的 XML 站点地图。我创建了一个通用处理程序 (.ashx) 并正在使用 XmlWriter 构建 XML。我打电话给 site.com/SitemapIndex.ashx，瞧！到目前为止，一切都很好。

我有一个业务要求，即站点地图以 .xml 扩展名结尾。我在 web.config 中添加了一个简单的 URL 重写规则，我的本地钻机通过 SitemapIndex.ashx 文件处理 SitemapIndex.xml。

当我将解决方案部署到我们的登台服务器时，我在 SitemapIndex.xml 文件上收到 404 not found 错误。但是 .ashx 仍然有效，所以我在该服务器上添加了一个处理程序映射。我为使用 System.Web.UI.SimpleHandlerFactory 的路径 *.xml 使用了托管处理程序。当我再次请求 SitemapIndex.xml 时，输出正确呈现。

然后我尝试在服务器上请求一个物理 XML 文件并收到以下错误消息：“没有为扩展 '.xml' 注册构建提供程序。您可以在 machine.config 或 web.config 的部分中注册一个。确保它有一个 BuildProviderAppliesToAttribute 属性，其中包含值“Web”或“All”。”

现在我可以通过我的 .ashx 处理程序动态处理 .xml 文件，但将不再提供真正的 xml 文件。我需要两者都做。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:39:29.147

我使用的解决方案是删除我为 *.xml 创建的处理程序映射，并为我希望 ASP.Net 处理的特定文件添加一个。在我的开发平台上一切都已经正常工作了，所以我在我的暂存和发布配置上使用了配置转换来添加我在部署时想要的处理程序。我的 web.staging.config 文件的相关部分如下所示：

```
<system.webServer>
  <!-- Handler mappings for our xml sitemaps-->
  <handlers>
    <add name="SimpleHandlerFactory-SitemapIndex" path="SitemapIndex.xml" verb="GET,HEAD,POST,DEBUG" type="System.Web.UI.SimpleHandlerFactory" resourceType="Unspecified" preCondition="integratedMode" xdt:Transform="Insert"  />
  </handlers>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:56:45.417

我认为问题是“返回物理 XML 文件”

所以你应该正确设置你的标题信息。

在你的 ashx 中，

内容类型应该是

内容类型：**应用程序/八位字节流**

```
 context.Response.ContentType = "application/octet-stream"; 
                 context.Response.AddHeader("Content-Transfer-Encoding", "binary");

                FileInfo fileInfo = new FileInfo(xmlFileName);
                long length = fileInfo.Length;

                context.Response.WriteFile(xmlFileName, 0, length); 
```

我希望我能很好地理解这个问题，与 URLRewrite 无关，它与中继无关。

# javascript - Bower 和 NPM 如何结合在一起？

> ID：16107489
> 
> 赞同：16
> 
> 时间：2013-04-19T14:54:53.753
> 
> 标签：javascript, build, npm, bower, dependency-management

因此，作为我的问题的序言，我来自 Java 后端开发人员的角度，我们使用 Maven 进行构建。我曾在我们最近开发的一个服务器端 Node 项目上进行测试，但现在我将继续在我们的前端 JavaScript 客户端上设置测试。我对前端开发不是很精通，这确实是我第一次涉足该领域。

说了这么多，我想我将使用以下技术栈进行前端测试：Eclipse IDE、Maven 构建过程、Mocha 测试框架、Chai 断言框架、Nock HTTP 模拟框架、Sinon 模拟/间谍/stubbing 框架，Rewire 依赖注入框架。一切都应该没问题，因为这是我们用于 Node 项目的堆栈，所以我希望前端设置尽可能相似。

所以，这就是我的知识崩溃的地方。我似乎无法理解我们的 Node 项目和我们的前端 JavaScript 项目在依赖管理方面的区别。我不明白为什么我不会继续使用集成到我们的 Maven 构建中的 NPM 来处理依赖项管理和安装。

我看到很多人提倡 Bower，但是在查看了它的页面和文档之后，我仍然没有看到它填补了 NPM 所没有的利基市场。就浏览器依赖管理而言，我看到很多对 NPM 的坚决拒绝；主要原因是 NPM 是为服务器端 Node 项目设计的，而不是为前端空间设计的。但谁在乎？不管它最初的设计意图如何，如果它完成了我需要它做的事情，那么缺点在哪里？

请像我是一个完整的新手一样处理这个“问题”。在经历了这个过程和研究后，我意识到我对前端方面的知识非常缺乏。话虽如此，请在您的答案中尽可能具体和彻底。我很乐意根据需要分享项目配置等，以帮助描绘我所在的空间。感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T12:36:41.570

Bower 和 NPM*的工作*方式不同。

**NPM**非常强大，并且非常擅长它的工作。但是，您不会在其中找到很多客户端软件包。它们中的大多数都在那里，因为它们也在 Node 中工作。（例如，Underscore.JS 和 JADE 模板引擎。）

这就是您拥有**Bower**的原因，它拥有大多数客户端软件包。它有很多 jQuery 插件、模板引擎、CSS 框架等。不要指望在 NPM 中找到这样的包。

两者都可以正常工作。我这样做。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-30T07:53:24.220

传统上，许多 Web 开发项目结合了 npm 和 Bower。npm 用于管理后端依赖，而 Bower 用于管理前端依赖。事实上，您首先需要使用 npm 来安装 Bower。尽管 Bower 的优势非常引人注目，但它们现在由其他工具提供，即 npm、Yarn 和 webpack。虽然开源项目仍在维护，但它的创建者决定弃用它，并建议如何迁移到其他解决方案——即 Yarn 和 webpack。 [更多解释](https://snyk.io/blog/bower-is-dead/#:%7E:text=Traditionally%2C%20many%20web%20development%20projects,had%20a%20flat%20dependency%20graph.)

# c# - 为什么 Uri 对于不同的方案表现不同？

> ID：16107490
> 
> 赞同：4
> 
> 时间：2013-04-19T14:54:53.583
> 
> 标签：c#, uri, url-encoding, percent-encoding

在用 Uri 类回答另一个问题时，我发现了一些对我来说似乎很奇怪的东西：

考虑这两个 Uris：

```
var u1 = new Uri("http://a.b:33/abc%2fdef/c?d=f");
var u2 = new Uri("foobar://a.b:33/abc%2fdef/c?d=f"); 
```

它们的不同之处仅在于它们的方案。提供的标识符的所有其他元素都是相同的。

那么，为什么当我转储`Segments`这些 Uri 实例的属性时，我会看到以下输出`u1`：

```
/
ABC/
定义/
C

```

...但是输出不同`u2`？

```
/
abc%2fdef/
C

```

为什么不同方案的解析行为不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:59:39.923

[Uri 类](http://msdn.microsoft.com/en-us/library/system.uri.aspx)对不同的 URI 方案使用不同的解析器。例如，对于*http*和*https* URI，它使用[HttpStyleUriParser](http://msdn.microsoft.com/en-us/library/system.httpstyleuriparser.aspx)，而对于*ftp* URI，它使用[FtpStyleUriParser](http://msdn.microsoft.com/en-us/library/system.ftpstyleuriparser.aspx)，等等。具有未知方案的 URI 由[GenericUriParser](http://msdn.microsoft.com/en-us/library/system.genericuriparser.aspx)解析。[您可以使用UriParser.Register 方法](http://msdn.microsoft.com/en-us/library/system.uriparser.register.aspx)注册新方案。

```
UriParser.Register(new HttpStyleParser(), "foobar", 33); 
```

# javascript - 无法调用未定义的方法...

> ID：16107500
> 
> 赞同：0
> 
> 时间：2013-04-19T14:55:43.053
> 
> 标签：javascript

所以我制作了这段代码，它几乎可以完美运行。一件事是 setupListener 方法最后返回错误，可能它找到了我不想找到的属性。我已经为此苦苦挣扎了一段时间，但显然我没有太多的 js 经验来解决它。我已经设置了一些用于调试的 console.log 方法。你像这样使用这个函数`setupListener(Id or Class or a Tag name as string, event to watch on as string, and an action)`：

例如。`setupListener('.pun', 'click', function (e){ console.log(e); });`

```
 var getElement = function (onStr) {
    if (onStr.indexOf('.') === 0) {
        onStr = onStr.slice(1);
        return document.getElementsByClassName(onStr);
    } 

    if (onStr.indexOf('#') === 0) {
        onStr = onStr.slice(1);
        return document.getElementById(onStr);
    } 

    if (onStr.indexOf('#') !== 0 && onStr.indexOf('.') !== 0) {
        return document.onStr = document.getElementsByTagName(onStr);
    }
};

var setupListener = function (elementStr, eventStr, action) {
    var tempElement = getElement(elementStr);

        // element a collection and has addEventListener method
        if (tempElement.length > 1 && tempElement[1].addEventListener) {
            for (var i = 1; tempElement.length >= i; i++) {
                if (typeof(tempElement[i].addEventListener) !== "undefined")
                    console.log('1'); //debugging
                    tempElement[i].addEventListener(eventStr, action);
            }   
        }

        // IE < 9 Support
        // element a collection and has NOT addEventListener method
        else if (tempElement.length  > 1 && !tempElement[1].addEventListener) {
            for (var i = 1; tempElement.length >= i; i++) {
                if (typeof(tempElement[i].addEventListener) !== "undefined")
                    console.log('2'); // debugging
                    tempElement[i].attachEvent(eventStr, action);
            }
        }

        // element not a collection and HAS addEventListener method
        else if (!tempElement.length > 1 && tempElement.addEventListener) {
            console.log('3'); // debugging
            tempElement.addEventListener(eventStr, action);
        }

        // element not a collection and has NOT addEventListener method
        // IE < 9 support
        else if (!tempElement.length > 1 && !tempElement.addEventListener) {
            console.log('4'); // debugging
            tempElement.attachEvent(eventStr, action);
        }

    else { 
     console.log('5'); // debugging
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:25:01.927

您的问题出在元素集合的一部分。请注意，您获得数组的第一个元素，`array[0]`因此您获得最后一个元素`array[array.length-1]`。但是当你迭代数组时你正在做的是，从 1 开始迭代到`array.length`. 当您尝试访问不可用的数组元素（as `array[array.length]`）时，您将得到`undefined`，这就是您的错误所说的。所以你必须改变循环中的`for`界限。IE

```
for (var i = 0; i < tempElement.length; i++) 
```

# c++ - 使用 IDispatch 的 C++ 和 COM 的类似动态的替代方案

> ID：16107501
> 
> 赞同：1
> 
> 时间：2013-04-19T14:55:44.420
> 
> 标签：c++, com, atl

[我向一位同事展示了使用Microsoft ATL 库](http://msdn.microsoft.com/en-us/library/t9adwcde%28v=vs.110%29.aspx)在 C++ 中创建和使用 COM 对象是多么容易。特别是，我想使用演示`IDispatch`来展示如何使用它来动态调用方法。但是，我没有足够频繁地使用 C++/ATL，以免迷失在 ATL 的模板和便捷方法和类中。

我们创建了一个小型 COM 类，`MyCOMLibrary.SimpleClass`它有一个名为的方法`AppendMessage`，需要 2`BSTR`秒且没有返回值。

从一个简单的 Win32 控制台应用程序，创建和使用 COM 对象很容易：

```
CComPtr<IDispatch> simpleClass;
debugPrint.CoCreateInstance(L"MyCOMLibrary.SimpleClass");
if (simpleClass) {
    CComVariant vModule(L"Demo");
    CComVariant vMessage(L"Welcome to COM");
    simpleClass.Invoke2(L"AppendMessage", &vModule, &vMessage);
} 
```

虽然这使得创建和管理 COM 对象几乎没有痛苦（尤其是与 using 相比`DISPPARAMS`），但我一直在寻找一种更简洁的方法来调用`AppendMessage`反映现代 C++/ATL/COM 用法的方法（在 VS 2012 中）。

最好的情况是 C# 的`dynamic`关键字（[动态文档](http://msdn.microsoft.com/en-us/library/dd264736.aspx)）（或任何其他“后期绑定”语言，如 JavaScript/VB6/等）：

```
simpleClass.AppendMessage(L"Demo", L"Welcome to COM"); 
```

或者，没有它，这将更具可读性：

```
simpleClass.Invoke2(L"AppendMessage", L"Demo", L"Welcome to COM"); 
```

但是，我知道第一个不会编译，因为该方法不存在，`CComPtr<IDispatch>`第二个不会编译为`Invoke2`requires `VARIANT`s。

我确实尝试过直接使用界面作为比较：

```
// workaround VS2012 intellisense issue with #import
#ifndef __INTELLISENSE__
    #import "progid:MyCOMLibrary.ISimpleClass" version("1.0")
#else
    #include "Debug\MyCOMLibrary.tlh"
#endif

CComPtr<MyCOMLibrary::ISimpleClass> simpleClass;
simpleClass.CoCreateInstance(L"MyCOMLibrary.ISimpleClass");
if (simpleClass) {
    CComBSTR module(L"Interfacing");
    CComBSTR message(L"And, then, there was COM.");
    simpleClass->AppendMessage((BSTR)module, (BSTR)message);
} 
```

但是，它几乎与原版相同（此外，我想做后期绑定）。

**问题**

是否有一种不同/更短/更好/很棒的调用`AppendMethod`using`IDispatch`和 ATL 的方式可以进一步给我的同事留下深刻印象，即 C++ 并不总是很困难？（或者，没有 ATL 的更好方法也可以）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T21:45:11.947

看看马修威尔逊的 VOLE。

它位于[http://vole.sourceforge.net/](http://vole.sourceforge.net/)

它认为它做你想做的事。我以前用过它，它使 IDispatch 客户端编程变得轻而易举。

查看[http://www.codeproject.com/Articles/19962/Driving-Microsoft-Word-using-VOLE](http://www.codeproject.com/Articles/19962/Driving-Microsoft-Word-using-VOLE)以了解使用 Microsoft World 的示例

# c# - LINQ 不会导致插入触发器

> ID：16107508
> 
> 赞同：1
> 
> 时间：2013-04-19T14:56:11.110
> 
> 标签：c#, asp.net, sql, database, linq

我再次提出另一个 LINQ 问题。

我们的数据库设置为在发生 SQL 插入时触发事件。

现在，当我使用 LINQ 时，不会调用此触发器。我需要做些什么来使数据库将 LINQ 命令视为插入？（下面的代码）。我应该说数据已正确输入数据库，但触发器没有发生。

提前致谢。

LINQ代码：

```
private void SaveToWebsure()
{
    using (MagTestDataContext context = new MagTestDataContext())
    {
        //create new instance of tblPolicy object
        tblPolicy policy = new tblPolicy();
        //generate PolicyID number
        policyNo = context.ExecuteQuery<int>("DECLARE @ret INT; EXEC spNextPolicyID @ret OUTPUT; SELECT @ret").Single();
        //add values to field
        policy.PolicyID = policyNo;
        policy.RecordType = "New Business";
        policy.SchemeID = 17;
        policy.Status = "Quote";
        policy.Title = ddTitle.Text + ' ' + tbSurname.Text;
        policy.PolicyHolder = ddTitle.Text + ' ' + tbFirstName.Text + ' ' + tbSurname.Text;
        policy.SearchKey = tbSurname.Text;
        policy.EMail = tbEmail.Text;
        policy.Telephone = tbTelephone.Text;
        policy.Address1 = tbAddressLine1.Text;
        policy.Address2 = tbAddressLine2.Text;
        policy.Address3 = tbAddressLine3.Text;
        policy.Address4 = tbAddressLine4.Text;
        policy.PostCode = tbPostcode.Text;
        policy.rowguid = System.Guid.NewGuid();
        policy.Comments = "Current/Previous Insurer: " + tbInsurer.Text + "; " + "Reason for refused insurance: " + ddReason.SelectedItem.Text + "; " + "Further reasons specified: " + tbOther.Text;
        //insert new contact_detail object
        context.tblPolicies.InsertOnSubmit(policy);
        //submit changes to database
        context.SubmitChanges();
    } 
```

存储过程：

```
 ALTER PROCEDURE spNextPolicyID @PolicyID int output AS
    begin tran

      /* update tblIdNumbers set ApplicantId = ApplicantId
      set @Policyid = (select ApplicantID from tblIdNumbers)
      update tblIdNumbers set ApplicantId = ApplicantId + 1 */
    set Rowcount 0
    SET NOCOUNT ON
    exec dbo.spNextIdNumber @PolicyID Output,'PolicyId'

    commit tran 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T17:20:22.843

LINQ 在后台没有做任何特别的事情。您应该检查的几件事

*   使用 SQL Profiler 查看正在生成的查询以及针对 DB 运行的查询
*   检查并查看触发器是否在查询运行之前启用
*   提示：如果您要移动大量数据，请尽可能避免触发器（每种情况都不同，只是说）我们通常在处理大数据时禁用/启用代码中的触发器

# javascript - 即使刷新也保留所选选项的值

> ID：16107509
> 
> 赞同：2
> 
> 时间：2013-04-19T14:56:12.993
> 
> 标签：javascript, html

我正在尝试选择下拉列表的值并将变量传递给javascript，这是有效的，但即使刷新页面，我也试图保存所选选项的值

我想我可以在选定的值上创建一个 cookie 并检查它是否存在。

任何帮助，将不胜感激

形式

```
<form name="dummyForm">
    <select name="selectBox" onchange="getSelectedvalue()">
        <option value="option 1">option 1</option>
        <option value="option 2">option 2</option>
        <option value="option 3">option 3</option>
        <option value="option 4">option 4</option>
        <option value="option 5">option 5</option>
        <option value="option 6">option 6</option>
        <option value="option 7">option 7</option>
        <option value="option 8">option 8</option>
    </select>
</form>
<a href="javascript:setSelectBoxvalue()">Click me</a> 
```

javascript

```
<script type="text/javascript">
function getSelectedvalue()
{
    var getSelectedIndex = document.dummyForm.selectBox.selectedIndex;
    var getSelectedOptionText = document.dummyForm.selectBox[getSelectedIndex].text;
    alert(getSelectedOptionText);
}

function setSelectBoxvalue()
{
    var len = document.dummyForm.selectBox.length;
    //alert(len);
    var optionText= 'option 1';
    for(var i=0; i<=len; i++){
        if( (document.dummyForm.selectBox[i].value) == optionText){
            alert(document.dummyForm.selectBox[i].text);
            document.dummyForm.selectBox.selectedIndex = i;
        }
    }

}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:10:09.697

您可以使用非常有用的博客 QuirksMode 提供的功能轻松操作 cookie：

[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

以下是如何实现您的特定案例（示例假设您为“selectBox”的选择分配一个 ID）：

```
window.onload = function()
{
    var cookieVal = readCookie('selectBoxValue');
    if(cookieVal!=null)
    {
        document.getElementById('selectBox').selectedIndex = cookieVal;
    }
}

function changeSelectedvalue()
{
    var mySelectedIndex = document.getElementById('selectBox').selectedIndex;
    createCookie("selectBoxValue",mySelectedIndex,1000);
}

function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

在这里看小提琴：

[http://jsfiddle.net/SpAm/9VmQD/](http://jsfiddle.net/SpAm/9VmQD/)

以及这里的全屏版本：

[http://jsfiddle.net/SpAm/9VmQD/embedded/result/](http://jsfiddle.net/SpAm/9VmQD/embedded/result/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T15:04:28.713

如果有 HTML5 支持使用`localStorage`

```
if(typeof(Storage)!=="undefined")
{
  // Yes! localStorage and sessionStorage support!
  localStorage.paramName="value";
}
else
{
  // Sorry! No web storage support..
} 
```

然后得到它：

```
var myParam = localStorage.paramName; 
```

如果没有 HTML5 支持，请使用 cookie：

设置 jQuery：

```
$.cookie("paramName", "value"); 
```

用 jQuery 来获取

```
$.cookie("paramName"); 
```

没有 jQuery（虽然我不知道为什么不使用 jQuery :P）[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)：

```
function setCookie(c_name, value, exdays)
{
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
    document.cookie = c_name + "=" + c_value;
}

function getCookie(c_name)
{
    var c_value = document.cookie;
    var c_start = c_value.indexOf(" " + c_name + "=");
    if (c_start == -1)
    {
        c_start = c_value.indexOf(c_name + "=");
    }
    if (c_start == -1)
    {
        c_value = null;
    }
    else
    {
        c_start = c_value.indexOf("=", c_start) + 1;
        var c_end = c_value.indexOf(";", c_start);
        if (c_end == -1)
        {
            c_end = c_value.length;
        }
        c_value = unescape(c_value.substring(c_start, c_end));
    }
    return c_value;
} 
```

# android - Gstreamer 通过 udp 流式传输

> ID：16107510
> 
> 赞同：1
> 
> 时间：2013-04-19T14:56:16.490
> 
> 标签：android, eclipse, gstreamer, decoder

我已将 gstreamer 移植到 android，并且正在使用 eclipse (juno)。现在，我可以通过 udp 接收音频流，但是当我尝试将任何视频剪辑作为输入时，我收到错误，**amcaudiodec-omxgoogleacdecoder - Gstreamer 遇到内部库错误。**我不知道如何解决这个解码器问题。关于错误可能是什么的任何想法？

另外，我想知道插件 playbin 和 playbin2 之间有什么区别。谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T17:48:12.427

您必须根据 plugins.mk 文件将“androidmedia”插件添加到 Android.mk 文件中。

我怀疑，由于你没有在你的 Android.mk 中包含这个，playbin 试图在内部调用这个元素，因此 lob

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:21:52.170

我不确定这一点，但您的问题可能是您不能使用用于播放音频文件的管道来播放视频文件。

视频文件通常采用容器格式，例如 .avi、.mkv，需要将其**解复用**为单独的音频和视频流。一旦你有了这个音频流，你就可以应用你的音频管道来播放音频。

这是一个在忽略视频的同时播放音频的示例管道：（在命令行上尝试）

```
gst-launch filesrc location=test.mp4 ! qtdemux  ! faad ! audioconvert ! audioresample ! autoaudiosink 
```

# unix - 将文件从服务器 FTP 到大型机的 Unix 脚本

> ID：16107511
> 
> 赞同：0
> 
> 时间：2013-04-19T14:56:16.953
> 
> 标签：unix, ftp, mainframe

我编写了如下脚本以将文件发送到大型机。但它不起作用请帮助 $1 是服务器中的文件名 $2 是大型机数据集名称。文件名是正确的..我可以在处理后发送的电子邮件中看到。这有什么问题？

```
function ftp_mainframe
    {     mainFrame=mvs.xxx.com    
      ftp -i -v $mainFrame <<END    
  quote SITE lrecl=400 recfm=fb blksize=27600    
      echoToEmailFile "COMMENT" "$1 $2"    
      put $1 $2   
      quit   
    END
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:49:27.763

如果要将成员上传到数据集，则需要用 '. 所以 put 命令类似于

```
put test.txt 'QUAL1.QUAL2(MEMNAME)' 
```

# sharepoint - ResolvePrincipal 与 SearchPrincipal

> ID：16107512
> 
> 赞同：1
> 
> 时间：2013-04-19T14:56:20.697
> 
> 标签：sharepoint, sharepoint-2013

所以我试图写一些东西来模仿sharepoint的人员选择器。我最初使用`Utility.ResolvePrincipal`时取得了一些成功，但它只返回了一个用户（显然）。所以，我尝试使用`Utility.SearchPrincipal`. 只是那并没有给我任何回报。这是我所拥有的：

```
var user = Utility.ResolvePrincipal(_clientContext, _clientContext.Web, nameStart, PrincipalType.user, PrincipalSource.All, null, false);
var users = Utility.SearchPrincipals(_clientContext, _clientContext.Web, nameStart, PrincipalType.user, PrincipalSource.All, null, 10);
_clientContext.ExecuteQuery(); 
```

此时，user.Value 有一个用户，而 users 是一个空列表。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T19:06:08.203

我最终通过将`PrincipalSource.All`调用更改`Utility.SearchPrincipals`为 just解决了这个问题`PrincipalSource.UserInfoList`。显然，它在其中一组用户中遇到了一些安全问题，而不是抛出错误，它只是返回一个空列表。

# android - eclipse IDE超出java堆空间-windows XP

> ID：16107514
> 
> 赞同：1
> 
> 时间：2013-04-19T14:56:27.347
> 
> 标签：android, eclipse

我正在使用在 windows XP 上运行的 eclipse 开发 android 应用程序。最近eclipse一直在抱怨自己的堆空间不足。它会弹出一个像这样的窗口：

![在此处输入图像描述](https://i.stack.imgur.com/APoTh.jpg)

它甚至没有运行我的应用程序就出现了。即我刚开始eclipse，等一下，这个窗口就会弹出来。在另一个论坛上，我看到了使用 启动 eclipse 的建议`eclipse.exe -vmargs -Xmx512M`，但问题仍然出现。

我的 eclipse.ini 看起来像这样：

```
-startup
plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.2.R36x_v20101222
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx384m 
```

编辑：我刚刚更改了这部分：

```
--launcher.XXMaxPermSize
256M 
```

说：

```
--launcher.XXMaxPermSize
512M 
```

但是坠机还是发生了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:19:38.650

您要增加的选项不是永久大小，而是堆大小 - 将 -Xmx384m 选项设置为 fe -Xmx712m 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:29:37.350

如果系统中没有足够的可用内存，有时设置 -Xms 和 -Xmx 值可能不起作用。我通常使用 -xms 128m -（启动 eclipse 时分配的初始内存）和 -xmx 512m -（eclipse 允许的最大内存）随着堆大小的增加而逐渐增加。这对于正常使用来说已经足够了，但是您可以将最大值增加到几乎 1380m（在 4gb 机器上超过这个值有时可能无法正常工作）。要监控 Eclipse 中堆的增长情况，可以使用**Window->Preferences-General->Show Heap Status。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:17:01.507

您好尝试在 eclipse config --launcher.XXMaxPermSize 1024m --launcher.defaultAction openFile -vmargs -Xms512m -Xmx1024m 上设置这些值

# scala - 使用 scala 时将外部文件保存在播放框架中的位置

> ID：16107520
> 
> 赞同：2
> 
> 时间：2013-04-19T14:56:47.143
> 
> 标签：scala, playframework

我应该在哪里保存外部文件在播放框架中？我尝试将它添加到`conf`文件夹，它没有工作。然后我将它添加到项目文件夹中，它也不起作用。我在 中定义了依赖项`build.scala`，但效果不佳。该文件应该在文件输入流中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:37:22.170

的内容`conf`，包括子目录，将在类路径中可用。然后您可以在您的应用程序中访问它。

例如，如果您在其中创建一个`resources`目录`conf`并将文件放入其中：

```
 -- app
 -- bin
 -- conf
   - resources
       - myfile
 ... 
```

然后你可以得到如下内容：

```
val stream = getClass.getResourceAsStream("/resources/myfile")
val content = io.Source.fromInputStream(stream).mkString 
```

您可以检查被复制的内容，并通过转到`<play root>/target/scala-xx/classes/`.

# r - 如何使用 ggplot2 制作预先制表数据的堆积条形图，每列是每个条形的一个因素？

> ID：16107521
> 
> 赞同：-1
> 
> 时间：2013-04-19T14:56:49.520
> 
> 标签：r, graphics, ggplot2

我有以下格式的数据：

```
revision    added    removed    changed    confirmed
1           20       0          0          0
2           18       3          8          10
3           12       8          14         10
4           6        5          11         8
5           0        1          7          11 
```

每行代表一个文档的修订。第一列是修订号，其余列表示在相应修订中添加、删除、更改和确认（就绪）的元素。（实际上，有更多的行和列，这只是一个示例。）每个数字代表每个相应修订中记录的添加、删除、更改和确认的数量。

我需要的是一个看起来像这样的堆叠条形图：

![示例堆叠条形图](https://i.stack.imgur.com/q3Y8k.png)

我想在 ggplot2 中执行此操作。只要我以后可以调整它，确切的视觉外观（字体、颜色和图例的位置）并不重要。目前，这是我正在寻找的总体思路。

我查看了几个问题和答案，例如 [，我如何对已列出的数据进行条形图？](https://stackoverflow.com/questions/7984633/how-do-i-do-a-barplot-of-already-tabled-data), [为多个变量制作堆积条形图 - R](https://stackoverflow.com/questions/6693257/making-a-stacked-bar-plot-for-multiple-variables-ggplot2-in-r)中的 [ggplot2 ，带有 3 个变量（连续 X 和 Y 以及第三个堆积变量）](https://stackoverflow.com/questions/14215263/barplot-with-3-variables-continous-x-and-y-and-third-stacked-variable)的条形图，以及 [堆积条形图](https://stackoverflow.com/questions/11940122/stacked-barplot)，但它们似乎都做出了与我的数据不匹配的假设。我也尝试过这样的事情：

```
ggplot(data) + geom_bar(aes(x=revision, y=added), stat="identity", fill="white", colour="black") + geom_bar(aes(x=revision, y=removed), stat="identity", fill="red", colour="black") 
```

但显然这不会创建堆叠条形图，因为它只是将第二个绘制在第`geom_bar`一个之上。

如何使用 ggplot2 制作数据的堆积条形图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:03:43.773

尝试：

```
library(reshape2)
dat <- melt(data, id="revision")

ggplot(dat, aes(x=revision, y=value, fill=variable)) +
  geom_bar(stat="identity") 
```

![在此处输入图像描述](https://i.stack.imgur.com/B6m08.png)

# python - 如何灵活更改 PYTHONPATH

> ID：16107526
> 
> 赞同：7
> 
> 时间：2013-04-19T14:56:57.457
> 
> 标签：python, organization, pythonpath

为了在 Java 中指定类路径，我使用`-cp`or`-classpath`选项来`java`. Python中的等效选项是什么？

我知道我可以设置 OS 变量`PYTHONPATH`，但不应该有一个`PYTHONPATH`来统治它们。

我有时在 Eclipse 中使用 PyDev。它可以处理多个源目录。如何？

我经常有多个源目录。有时我将生产和测试代码分开。有时我有一个带有一些 Python 包的 Git 子模块。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T15:12:55.773

> 为了在 Java 中指定类路径，我使用 java 的 -cp 或 -classpath 选项。Python中的等效选项是什么？

好吧，据我所知，Python 中没有“等效选项”，但是如果您要像这样运行 Python，任何类似 Unix 的 shell 都可以让您在每个进程的基础上设置/覆盖它......

```
$ PYTHONPATH=/put/path/here python myscript.py 
```

...您也可以将其用于 Java 的语法...

```
$ CLASSPATH=/put/path/here java MyMainClass 
```

与此等效的最接近的 Windows 将是...

```
> cmd /c "set PYTHONPATH=\put\path\here && python myscript.py" 
```

...如果您不希望在调用中设置环境变量`cmd.exe`。

> 我有时在 Eclipse 中使用 PyDev。它可以处理多个源目录。如何？

[`execve(2)`](http://linux.die.net/man/2/execve)运行代码时，它可能通过在调用中设置变量来做类似的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:11:57.173

要以编程方式执行此操作，请使用以下代码：

```
import sys
sys.path.append('directory') 
```

如有必要，您可以从命令行参数指定要附加的目录。

根据您的具体目标，这可能不是最好的解决方案，但对于小的一次性问题，它可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:01:30.570

这就是[virtualenv](http://www.virtualenv.org/en/latest/)的用途。

# javascript - 字符串连接不起作用，抛出错误

> ID：16107529
> 
> 赞同：1
> 
> 时间：2013-04-19T14:57:05.910
> 
> 标签：javascript, jquery, string, concatenation

我在一个变量中记录一个动态字符串，然后稍后在代码中恢复该字符串。它抛出一个错误，“Uncaught SyntaxError: Unexpected token +”

```
var template_url = "<?php bloginfo('template_url'); ?>";

$(document).ready(function() {

    var urlCameraDic = 
          {
            template_url + '/sliders/walking.html' : 'camera_1',
            template_url + '/sliders/lobby.html' : 'camera_2',
            template_url + '/sliders/cafe.html' : 'camera_3',
            template_url + '/sliders/womens.html' : 'camera_4'
          };
}); 
```

我不确定为什么会抛出这个错误。我是否错误地连接了这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:01:59.157

通过对象字面量声明对象的键时，不能执行 javascript。

你可以这样做

```
var urlCameraDic = {};
urlCameraDic[template_url + '/sliders/walking.html'] = 'camera_1';
urlCameraDic[template_url + '/sliders/lobby.html'] = 'camera_2';
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:59:24.573

您需要在创建后定义自定义键，如下所示：

```
var urlCameraDic = {};
urlCameraDic[template_url + '/sliders/walking.html'] = 'camera_1';
// add the other items like above 
```

有关更多详细信息，请参阅[此类似的 SO 答案](https://stackoverflow.com/a/9708229/485048)。

# android - Android - 如何实现带有消息的分享按钮？

> ID：16107535
> 
> 赞同：1
> 
> 时间：2013-04-19T14:57:17.173
> 
> 标签：android

我正在尝试实现一个简单的共享操作，该操作将向用户显示 Facebook、Twitter 和电子邮件的菜单，他们可以在其中共享我预设的一组消息，例如“我在[http://www.xyz上使用了一个很棒的应用程序.com](http://www.xyz.com)

到目前为止，我所拥有的是样式：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_share"
          android:title="@string/share"
          android:showAsAction="ifRoom"
          android:actionProviderClass="android.widget.ShareActionProvider" />
</menu> 
```

我在网上看到很多这样的例子：

```
Intent intent=new Intent(android.content.Intent.ACTION_SEND);
intent.setType("text/plain");
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);

// Add data to the intent, the receiving app will decide what to do with it.
intent.putExtra(Intent.EXTRA_SUBJECT, “Some Subject Line”);
intent.putExtra(Intent.EXTRA_TEXT, “Body of the message, woot!”); 
```

但这只是打开电子邮件。但是，我将如何打开该菜单，其中包含可以共享文本和链接的所有可能位置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:06:31.683

> 但这只是打开电子邮件

那么要么您使用它的时间`Intent`不正确，要么设备上唯一广告支持的应用程序`ACTION_SEND`是`text/plain`“电子邮件”。

> 但是，我将如何打开该菜单，其中包含可以共享文本和链接的所有可能位置？

以下活动来自[这个示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/ActionBar/Share)，在我的 Galaxy Nexus 上运行，显示了 8 个可能的共享目的地，一些是内置的（蓝牙、消息）和一些第三方（记住牛奶、印象笔记）：

```
public class MainActivity extends SherlockFragmentActivity implements
    ShareActionProvider.OnShareTargetSelectedListener, TextWatcher {
  private ShareActionProvider share=null;
  private Intent shareIntent=new Intent(Intent.ACTION_SEND);
  private EditText editor=null;

  @Override
  public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.activity_main);

    shareIntent.setType("text/plain");
    editor=(EditText)findViewById(R.id.editor);
    editor.addTextChangedListener(this);
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    new MenuInflater(this).inflate(R.menu.actions, menu);

    share=
        (ShareActionProvider)menu.findItem(R.id.share)
                                 .getActionProvider();
    share.setOnShareTargetSelectedListener(this);

    return(super.onCreateOptionsMenu(menu));
  }

  @Override
  public boolean onShareTargetSelected(ShareActionProvider source,
                                       Intent intent) {
    Toast.makeText(this, intent.getComponent().toString(),
                   Toast.LENGTH_LONG).show();

    return(false);
  }

  @Override
  public void afterTextChanged(Editable s) {
    shareIntent.putExtra(Intent.EXTRA_TEXT, editor.getText());
    share.setShareIntent(shareIntent);
  }

  @Override
  public void beforeTextChanged(CharSequence s, int start, int count,
                                int after) {
    // ignored
  }

  @Override
  public void onTextChanged(CharSequence s, int start, int before,
                            int count) {
    // ignored
  }
} 
```

请注意，您需要`setShareIntent()`在`ShareActionProvider`要共享的文本准备好时调用。就我而言，它来自一个`EditText`小部件，因此每当文本更改时都需要更新，这就是我`setShareIntent()`在`onTextChanged()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:01:52.660

```
String message = "I am using a great app on http://www.xyz.com"
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("text/plain");
i.putExtra(Intent.EXTRA_TEXT, message);

startActivity(Intent.createChooser(i, "Share with friends")); 
```

# actionscript-3 - Flash SoundChannel 限制和内存管理

> ID：16107539
> 
> 赞同：0
> 
> 时间：2013-04-19T14:57:29.477
> 
> 标签：actionscript-3

我有一个程序用作录音平台，每播放一个声音，我都会制作一个新声音。

```
 public function playAudioFile():void {
            trace("audio file:", currentAudioFile);
            sound = new Sound();
            sound.addEventListener(IOErrorEvent.IO_ERROR, errorHandler); 
            sound.addEventListener(Event.COMPLETE, soundLoaded);
            sound.load(new URLRequest(soundLocation + currentAudioFile));
        }

        public function soundLoaded(event:Event):void {
            sound.removeEventListener(IOErrorEvent.IO_ERROR, errorHandler); 
            sound.removeEventListener(Event.COMPLETE, soundLoaded);
            var soundChannel:SoundChannel = new SoundChannel();
            soundChannel = sound.play();
            soundChannel.addEventListener(Event.SOUND_COMPLETE, handleSoundComplete);
            trace('soundChannel?', soundChannel);
        }

        public function handleSoundComplete(event:Event):void {
            var soundChannel:SoundChannel = event.target as SoundChannel;
            soundChannel.stop();
            soundChannel.removeEventListener(Event.SOUND_COMPLETE,handleSoundComplete);
            soundChannel = null;
        } 
```

32 次后，当我调用 sound.play()（在 soundLoaded 中）时，我停止获取 SoundChannel 对象。但是，我不需要 32 个 SoundChannel 对象，因为我只是连续播放这些声音，而不是同时播放。在“使用”它播放文件后如何摆脱 SoundChannel？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:42:52.900

您可以明确说明您使用的 soundChannel：

```
var soundChannel:SoundChannel = new SoundChannel();
soundChannel = sound.play();
soundChannel.addEventListener(Event.SOUND_COMPLETE,handleSoundComplete); 
```

然后，当您播放完声音后，您可以将通道设置为 null，以便将其标记为垃圾收集：

```
function handleSoundComplete(e:Event):void
{
   var soundChannel:SoundChannel = e.target as SoundChannel;
   soundChannel.removeEventListener(Event.SOUND_COMPLETE,handleSoundComplete);
   soundChannel = null;
} 
```

请记住，当声音加载完成时，您需要删除上面代码中显示的那些事件侦听器。

另请记住，当您将某些内容设置为 null 时，这只是将其设置为垃圾收集的公平游戏，它不会强制进行垃圾收集。

另一个注意事项是，我发布的这段代码只是一个示例，您可能想考虑拥有几个保持活动状态的声道实例，并根据需要重复使用。在这种情况下需要管理，但是您不会不断地创建/杀死声道。

# java - Glassfish 在重新部署时崩溃

> ID：16107541
> 
> 赞同：0
> 
> 时间：2013-04-19T14:57:40.673
> 
> 标签：java, jakarta-ee, maven, glassfish

我`start-domain domain1 --debug=true`从 glassfish（顶级 glassfish 文件夹）/bin 文件夹中的 asadmin 脚本启动 glassfish。然后我使用重新部署目标，它工作了大约 1-2 次，然后出现以下错误是否可以解决这个问题？就像服务器正在关闭一样。我也使用 JRebel。

```
[INFO] --- maven-glassfish-plugin:2.1:redeploy (default-cli) @ MyApp ---
Downloading: http://maven.ocean.net.au/release/org/apache/maven/maven-plugin-api/maven-metadata.xml
Downloading: http://download.java.net/maven/2/org/apache/maven/maven-plugin-api/maven-metadata.xml
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-api/maven-metadata.xml
Downloading: http://maven.ocean.net.au/external/org/apache/maven/maven-plugin-api/maven-metadata.xml
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/maven-plugin-api/maven-metadata.xml (2 KB at 5.6 KB/sec)
Downloading: http://maven.ocean.net.au/snapshot/org/apache/maven/maven-plugin-api/maven-metadata.xml
Downloading: http://download.java.net/maven/2/org/apache/maven/maven-plugin-api/maven-metadata.xml
[WARNING] Could not transfer metadata org.apache.maven:maven-plugin-api/maven-metadata.xml from/to release.ocean.net.au (http://maven.ocean.net.au/release): maven.ocean.net.au
[WARNING] Could not transfer metadata org.apache.maven:maven-plugin-api/maven-metadata.xml from/to external.ocean.net.au (http://maven.ocean.net.au/external): maven.ocean.net.au
[WARNING] Could not transfer metadata org.apache.maven:maven-plugin-api/maven-metadata.xml from/to snapshot.ocean.net.au (http://maven.ocean.net.au/snapshot): maven.ocean.net.au
[INFO] No such local command, undeploy. To run remote commands, start the application server (e.g. 'asadmin start-domain').
[ERROR] 'JAVA_OPTS' is not recognized as an internal or external command,
[ERROR] operable program or batch file.
[ERROR] Remote server does not listen for requests on [localhost:4848]. Is the server up?
[ERROR] Undeployment of MyApp failed.
[ERROR] For more detail on what might be causing the problem try running maven with the --debug option 
[ERROR] or setting the maven-glassfish-plugin "echo" property to "true". 
```

在 POM 中有这个配置：

```
<properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <glassfish.home>${env.GLASSFISH_HOME}</glassfish.home>
        <glassfish.directory>${glassfish.home}/glassfish</glassfish.directory>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.glassfish.maven.plugin</groupId>
                <artifactId>maven-glassfish-plugin</artifactId>
                <version>2.1</version>
                <configuration>
                    <components>
                        <component>
                            <name>${project.artifactId}</name>
                            <artifact>${project.build.directory}/${project.build.finalName}.war</artifact>
                        </component>
                    </components>
                    <domain>
                        <name>domain1</name>
                        <adminPort>4848</adminPort>
                        <httpPort>8080</httpPort>
                        <httpsPort>8443</httpsPort>
                    </domain>
                    <glassfishDirectory>${glassfish.home}</glassfishDirectory>
                    <passwordFile>${glassfish.directory}/domains/domain1/config/domain-passwords</passwordFile>
                    <user>admin</user>
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

# android - 虽然我安装了驱动程序，但 adb 无法检测到 Sony Xperia s

> ID：16107545
> 
> 赞同：11
> 
> 时间：2013-04-19T14:58:03.020
> 
> 标签：android, debugging, adb

我想使用我的 Xperia S 进行调试，所以我一步一步按照[OEM USB 驱动程序](http://developer.android.com/tools/extras/oem-usb.html)说明进行操作，但仍然无法正常工作，我没有找到“Android Composite ADB Interface”来更新驱动程序，正如它所解释的那样。当我调用 adb devices 我的设备没有出现在列表中。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-05-21T23:03:46.223

我发现您必须将手机置于大容量存储模式，默认为 MTP 模式。就如此容易 @＃！我花了几个小时尝试阅读帖子的各种事情。

Settings / Xperia / USB Connectivity / USB Connection Mode 并选择 MASS Storage，而不是 MTP。我确实取消了安装 PC Companion。它立即起作用。无需更新驱动程序，无需更改 android_winusb.inf。在再次尝试 adb devices 之前，您可能需要终止 adb.exe。

对我来说就是这样:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T15:13:09.520

有几件事要检查：

USB调试是否打开（设置->开发者选项->USB调试）？

它是否被识别为 ADB 设备？检查设备管理器，我的作为 Sony sa0103 ADB 接口驱动程序已关闭。如果没有，请右键单击它并重新安装驱动程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-04T18:22:22.163

安装 PC 伴侣也为我修复了它，它改变了我的驱动程序（在 Windows 7 x64 上）。我之前尝试了很多东西，包括切换到大容量存储（这可能也有帮助）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-09T22:08:34.920

你曾经能够用 adb 连接到你的 Xperia S 吗？如果没有，您应该尝试安装 Sony PC Companion：

[http://www.sonymobile.com/us/tools/pc-companion/](http://www.sonymobile.com/us/tools/pc-companion/)

它应该会自动检测您的设备并安装适当的驱动程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-29T09:08:31.057

我有 Inew v3 手机并刷了 Sony Xperia E2115 Rom。

我正在使用 Android Studio 来学习 Android。

我用我的手机来运行我做的应用程序。但是有一天，我尝试过的任何一台电脑都没有检测到我的手机。使用 Windows 7、Ubuntu、...

寻找答案，我终于找到了答案：

**设置 > 应用程序 > 全部 > MTP 扩展服务 > 清除数据/缓存 > 强制停止 > 重启手机**

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-12T15:32:12.807

解决方案是使用[PC Companion](http://androidxda.com/download-sony-xperia-usb-driver)更新驱动程序。在此之前，我测试了以下内容： 1）我的系统在 Windows 8 上运行，问题与海量存储或 MTP 模式无关。

*   在控制面板>设备管理器>其他设备中，发现没有找到android驱动。
*   我尝试手动安装驱动程序，但不起作用。我
    检查了命令行工具[git bash](https://msysgit.github.io/)以检查 android
    设备是否使用命令 adb devices 连接。它没有显示任何设备。

2) 更新设备软件后，PC 伴侣显示设备是最新的。我没有完全更新 PC Companion 要求升级的设备，并且必须备份电话联系人。

3）现在当我再次检查设备管理器时，它显示驱动程序已正确安装。

4) git bash 中的 adb devices 显示设备编号和名称

然后 adb 调试工作

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-15T07:38:03.940

我有一台索尼 Xperia Tipo。司机不知何故不适合我。看一下

[http://preetprasannan.wordpress.com/2013/07/13/install-adb-drivers-for-android-if-oem-drivers-not-working-not-present/](http://preetprasannan.wordpress.com/2013/07/13/install-adb-drivers-for-android-if-oem-drivers-not-working-not-present/)

当然，您需要在设置菜单的开发人员选项中启用 USB 调试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-19T15:23:57.377

打开USB调试，可能是你的usb驱动不正确，你可以用wandoujia在你的windows上安装驱动，这里是下载页面：[http](http://www.wandoujia.com/) ://www.wandoujia.com/可以帮你找到驱动。试试

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-29T11:44:29.683

转到设置 -> Xperia 连接 -> Usb 连接 -> Usb 连接模式 -> 检查 MTP 模式。

点击开发者选项中的撤销USB调试授权。

并尝试 sudo adb devices。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-26T20:17:43.773

我遇到了同样的问题，无论我做了什么以及在网上搜索了多少解决方案，都没有任何帮助！（所有这些当然都在 Windows 8 上）

但问题是..

我在 Windows 7 上尝试了这个程序，连接了设备（索尼 Xperia S 和三星 Galaxy Tab 10.1），然后在设备管理器中我更新了驱动程序，然后出现了安卓 ADB 界面。

希望这可以帮助！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-17T17:09:44.340

我的 Xperia U 出现了严重的问题，并且我的 PC（甚至是 PC 配套软件）无法看到它。我尝试了许多在网上发布的解决方案，但没有任何效果。

最后，我只是将 microUSB 电缆切换到我拥有的另一根电缆上，然后它就可以正常工作了。我什至卸载了 PC 伴侣和其他索尼过时软件，它仍在工作！

所以不确定原来的 microUSB 数据线是做什么用的（我买了 Xperia U 作为二手货，所以不确定原包装中是否有更多的 micro USB 数据线），但对我来说它只是用于手机充电，不文件传输。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-12-01T18:03:01.310

设置 USB 模式还不够好。必须启用 USB 调试才能允许 adb 连接到手机。这可能说明了显而易见的问题，但对我来说，阅读这些评论并想知道为什么 adb 没有连接需要一段时间。确保您的开发者模式在手机上处于活动状态，并且“开发者选项”->“USB 调试”已启用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-04-03T15:13:44.850

因为没有什么对我有用...

*   启用设置>开发人员选项> USB调试-> True
*   启用设置 > 设备连接 > USB 连接 -> 真
*   连接手机，对话框“USB传输出现”
*   opt: [选择“大容量存储模式 (MSC)”]
*   opt：[点击“Xperia Companion Setup”]
*   选择：[软件更新] 重启设备和 PC
*   也许还安装了错误的驱动程序。

以下是如何安装正确的驱动程序。好吧，不得不承认，我是索尼世界的新手，我认为其他人可能会更了解存在多少重复的设备类型。

Windows：现在至少我在“其他设备”下列出的设备管理器中找到了它——对于我的 Xperia Tablet Z，它当然是*SGP311*。如果您不确定它是哪个设备，只需拔下并重新插入即可。回到索尼驱动页面： [https ://developer.sonymobile.com/downloads/drivers/](https://developer.sonymobile.com/downloads/drivers/)

或谷歌搜索 *Sony 驱动程序 #MyDeviceId#" 下载并解压缩驱动程序。

现在右键单击设备管理器中的设备并选择“更新驱动程序”。从本地存储中选择驱动程序（自动更新对我不起作用！）现在提供文件夹，您刚刚提取/解压缩。

现在它对我有用，并且该设备不再列在“其他设备”下。确保授权您的计算机在索尼设备上进行调试。只需解锁 Sony Xperia，您将不得不接受与计算机配对的提示。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-07-08T23:10:51.600

我尝试了很多没有快乐的事情。然后我通过PC进行了软件更新并重新安装了驱动程序。现在它又可以工作了，所以如果一切都失败了，试试这个。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-11-19T20:04:19.877

**对于魅族 MX5：**

连接到 PC > 下拉通知菜单 > 单击`Touch for other USB options`> 选择内置 CD-ROM > 设备在 Windows 上打开 > 转到`F:\USB Reference Manual\EN\ADB_Reference_Manual.txt` 并按照说明进行操作。

对于 Windows，这是文件中的内容：

创建或修改文件`C:\User\<Your username>\.android\adb_usb.ini`。在此文件中添加一行（内容为“0x2a45”）。

它对我有用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-09-11T15:23:20.770

就我而言，我只需要更改 USB 端口。出于某种原因，这只适用于 USB 3.0 端口。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-05-19T11:44:12.137

索尼 Xperia Z3：

*   启用设置>开发人员选项> USB调试-> True
*   启用设置 > 设备连接 > USB 连接 -> 真
*   连接手机，对话框“USB传输出现”
*   opt: [选择“大容量存储模式 (MSC)”]
*   opt：[点击“Xperia Companion Setup”]
*   选择：[软件更新]
*   重启设备和电脑
*   下载并解压[http://developer.sonymobile.com/downloads/drivers/xperia-z3-driver/](http://developer.sonymobile.com/downloads/drivers/xperia-z3-driver/)
*   选择“大容量存储模式 (MTP)”
*   Windows > 设备管理器 > 右键单击​​无法识别的设备 D6603 > 安装新驱动程序：选择解压后的 xperia-z3-driver 的位置

# javascript - 从下拉列表中为 HTML5 表单分配数值

> ID：16107547
> 
> 赞同：0
> 
> 时间：2013-04-19T14:58:10.970
> 
> 标签：javascript, html, html-select

尝试将我的“房间类型”下拉并转换要在表单输入公式中使用的值。但是，我没有找到任何详细说明选择框结构的地方。

```
<form oninput="total.value = (nights.valueAsNumber * rmtp.valueAsNumber) + 
     ((guests.valueAsNumber) * 10)">
        <TABLE class="Internal Info" align="center">
    <TR>
    <TD><label>Full name:</label></TD>
    <TD><input type="text" id="full_name" name="full_name" placeholder="Jane Doe" required></TD>
    </TR>
    <TR><TD>
      <label>Email address:</label></TD>
    <TD>  <input type="email" id="email_addr" name="email_addr" required></TD></TR>
    <TR>
      <TD><label>Repeat email address:</label></TD>
      <TD><input type="email" id="email_addr_repeat" name="email_addr_repeat" required 
       oninput="check(this)"></TD>
    </TR>
      <TR><TD><label>Arrival date:</label></TD>
    <TD>  <input type="date" id="arrival_dt" name="arrival_dt" required></TD></TR>
    <TR>
      <TD><label>Number of nights :</label></TD>
      <TD><input type="number" id="nights" name="nights" value="1" min="1" max="30" required></TD>
    </TR>
    <TR>
      <TD><label>Room Type</label></TD>
      <TD><select name="rmtp" required>
      <option value="80">Standard($80/N)</option>
      <option value="90">Superior($90/N)</option>
      <option value="110">Deluxe($110/N)</option>
      <option value="130">Family($130/N)</option>
      <option value="120">Riviera Suite($120/N)</option>
      <option value="199">Honeymoon Package($199/N)</option>
      </select>

      </TD>
    </TR>
      <TR><TD><label>Number of additional guests (two guests included at the base price; each additional guest adds $10.00 per night):</label></TD>
      <TD><input type="number" id="guests" name="guests" value="0" min="0" max="4" required></TD></TR>
    <TR>
      <TD><label>Estimated total:</label></TD>
    <TD>  $<output id="total" name="total">80</output>.00</TD>
      </TR>
      <TR>
      <TD><label>Promo code:</label></TD>
      <TD><input type="text" id="promo" name="promo" pattern="[A-Za-z0-9]{6}" 
       title="Promo codes consist of 6 alphanumeric characters."></TD></TR></TABLE>
    <br />
    </form>

    <script>
    function check(input) {
      if (input.value != document.getElementById('email_addr').value) {
        input.setCustomValidity('The two email addresses must match.');
      } else {
        // input is valid -- reset the error message
        input.setCustomValidity('');
      }
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:07:38.327

将您更改`oninput`为`total.value = (parseInt(nights.value) * parseInt(rmtp.value)) + ((parseInt(guests.value)) * 10)`.

并非所有浏览器都支持`.valueAsNumber`. 在页面的中间查看浏览器支持表：http: [//html5doctor.com/the-output-element/](http://html5doctor.com/the-output-element/)。该页面通常提供了一些很好的例子`oninput`和`output`元素。

# android - 如何将数据传递到 Google Maps API v2 中的自定义窗口信息？

> ID：16107548
> 
> 赞同：3
> 
> 时间：2013-04-19T14:58:11.477
> 
> 标签：android, google-maps-markers, google-maps-android-api-2

我的地图窗口信息有一个自定义布局，但我看不到任何关于如何从标记传递数据的示例。

有人可以帮忙吗？

```
mMap.setInfoWindowAdapter(new InfoWindowAdapter() {

    // Use default InfoWindow frame
    @Override
    public View getInfoWindow(Marker arg0) {
        return null;
    }

    @Override
    public View getInfoContents(Marker arg0) {

        View v = getActivity().getLayoutInflater().inflate(R.layout.info_window_layout, null); 

        ImageView pic = (ImageView) v.findViewById(R.id.pic); 
        String url = <????>;
        // set pic image from url

        TextView name = (TextView) v.findViewById(R.id.name); 
        name.setText(<????>);

        TextView address = (TextView) v.findViewById(R.id.address); 
        address.setText(<????>);

        return v;

    }
});

mCenterList = MyApplication.dbHelper.getAllCenter();

for(Center center : mCenterList){

    Marker marker = mMap.addMarker(
            new MarkerOptions().position(new LatLng(center.lat, center.lng))
            .icon(BitmapDescriptorFactory.fromResource(R.drawable.elipin)));                

    // How can I pass custom data, here pic, name and address, to the marker, to
    // make it available in getInfoContents?

} 
```

**info_window_layout.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="300dp"
    android:layout_height="50dp"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/pic"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_marginRight="5dp"
        android:scaleType="centerCrop" />

    <ImageView
        android:id="@+id/arrow"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignParentRight="true"
        android:layout_marginLeft="5dp"
        android:scaleType="centerCrop"
        android:src="@drawable/arrowri" />

    <TextView
        android:id="@+id/name"
        android:layout_width="match_parent"
        android:layout_height="25dp"
        android:layout_toRightOf="@id/pic"
        android:layout_toLeftOf="@id/arrow"
        android:gravity="center_vertical"
        android:singleLine="true"
        android:textColor="#ffffff"
        android:textSize="18sp" />

    <TextView
        android:id="@+id/address"
        android:layout_width="match_parent"
        android:layout_height="15dp"
        android:layout_toRightOf="@id/pic"
        android:layout_toLeftOf="@id/arrow"
        android:layout_below="@id/name"
        android:gravity="center_vertical"
        android:singleLine="true"
        android:textColor="#ffffff"
        android:textSize="16sp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:31:26.187

由于`Marker`is `final`，您不能从中创建子类。

因此，我发现的最佳解决方案是使用其中的某些内容`Marker`（例如代码片段）来保存允许您查找其他数据的密钥。例如，它可能是`HashMap`您的数据模型的键，或者它可能是您的数据库的主键，或其他东西。

然后，您`<????>`不是`Marker`直接来自，而是来自您的真实数据模型，其中`Marker`只有识别信息将两者联系在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T04:14:25.720

我找到了这个库[Android Maps Extensions](http://code.google.com/p/android-maps-extensions/)并在我的项目中使用了它。它很有用，它可以帮助您轻松地将数据传递到窗口中。

谢谢，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-08T14:34:40.227

我通过将我的数据存储在一个数组中来解决这个问题，为信息窗口创建一个自定义布局，然后在标题之后传递数组的索引器：“标题/索引器”。在信息窗口中，我拆分字符串并使用索引器来使用数组，并获取数据。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-19T15:06:12.273

看一下这个代码示例，代码中有注释用于解释：

```
 map.setInfoWindowAdapter(new InfoWindowAdapter() {

                // Use default InfoWindow frame
                @Override
                public View getInfoWindow(Marker args) {
                    return null;
                }

                // Defines the contents of the InfoWindow
                @Override
                public View getInfoContents(Marker args) {

                    // Getting view from the layout file info_window_layout
                    View v = getLayoutInflater().inflate(R.layout.info_window_layout, null);

                    // Getting the position from the marker
                    clickMarkerLatLng = args.getPosition();

                    //Setting title text
                    TextView title = (TextView) v.findViewById(R.id.tvTitle);
                    title.setText(args.getTitle());

                    map.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {          
                        public void onInfoWindowClick(Marker marker) 
                        {
                            if (SGTasksListAppObj.getInstance().currentUserLocation!=null)
                            {   
                                if (String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLatitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) &&
                                        String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLongitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                                {
                                    Toast.makeText(getApplicationContext(), "This your current location, navigation is not needed.",  Toast.LENGTH_SHORT).show();
                                }
                                else
                                {
                                    FlurryAgent.onEvent("Start navigation window was clicked from daily map");
                                    tasksRepository = SGTasksListAppObj.getInstance().tasksRepository.getTasksRepository();
                                    for (Task tmptask : tasksRepository)
                                    {
                                        String tempTaskLat = String.valueOf(tmptask.getLatitude());
                                        String tempTaskLng = String.valueOf(tmptask.getLongtitude());

                                        Log.d(TAG, String.valueOf(tmptask.getLatitude())+","+String.valueOf(clickMarkerLatLng.latitude).substring(0, 8));

                                        if (tempTaskLat.contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) && tempTaskLng.contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                                        {  
                                            task = tmptask;
                                            break;
                                        }
                                    }
                                    Intent intent = new Intent(getApplicationContext() ,RoadDirectionsActivity.class);
                                    intent.putExtra(TasksListActivity.KEY_ID, task.getId());
                                    startActivity(intent);

                                }
                            }
                            else
                            {
                                Toast.makeText(getApplicationContext(), "Your current location could not be found,\nNavigation is not possible.",  Toast.LENGTH_SHORT).show();
                            }
                        }
                    });

                    // Returning the view containing InfoWindow contents
                    return v;

                }
            }); 
```

**更新：**

然后你应该将一个`HashMap`对象与你的标记相关联，在这里看看这个答案：

[如何将 Google Maps Android API v2 Marker 链接到对象](https://stackoverflow.com/questions/14310280/how-to-link-google-maps-android-api-v2-marker-to-an-object/14324081#14324081)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-19T18:30:02.940

下面的方法

mMap.setOnMarkerClickListener(new OnMarkerClickListener() {

```
 @Override
        public boolean onMarkerClick(**Marker arg0**) { } 
```

有助于传递价值。

即**Marker 参数**返回标记计数，如 1,2 ,3 等。

像arraylist.get(1).details一样传这个数字，就可以检索到对应的详细信息

来自列表

# sql-server - 将服务器状态数据转换为运行 24 小时表格格式

> ID：16107555
> 
> 赞同：0
> 
> 时间：2013-04-19T14:58:23.550
> 
> 标签：sql-server, xml, linq, c#-4.0

我需要使用 c# 在 asp.net 网格视图中以 5 分钟的增量显示过去 24 小时的运行服务器状态。数据位于以下形式的 SQL Server 记录中：HostName、RecordDate、RecordTime、Status。我需要将数据转换为表格格式以加载网格视图控件。转换为类似：主机名、日期、00:00 状态、00:05 状态、...、23:55 状态。当然，问题之一是用户可以随时访问网页。列名必须是 5 分钟增量时间，如 15.30、15.35 等。它们将始终相同，因为将显示 24 小时，但顺序不同，并且可能交叉日期，具体取决于何时用户登录网站。我希望我已经解释得足够好。所有选项都在桌面上：linq、linq to sql、linq to xml 等。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:29:57.553

我将提供一个 T-SQL 解决方案。您需要一个日期表，其中包含相关日期的 5 分钟间隔。将其与访问时间在每个时间范围内的 AccessLog（或其他任何名称）表连接起来，并执行您想要的任何聚合。这将为您提供垂直列表。然后您需要 PIVOT 以使您的 TimeRanges 成为列（搜索 SQL 服务器 PIVOT 运算符）。

下面是粗略的 SQL。之后，您只需要将结果包装到数据透视表中。

```
declare @myDate SMALLDATETIME = '20130415';

;with TimeRanges as (
    SELECT  TOP 288 DateAdd(minute, (Row_Number() over (order by sc1.Name) -1) * 5 , @myDate) TimeRangeMin
            , DateAdd(minute, Row_Number() over (order by sc1.Name) * 5 , @myDate) TimeRangeMax
    FROM    Master.dbo.SysColumns sc1, Master.dbo.SysColumns sc2
)
select  convert(varchar(5), TimeRangeMin, 114) AS TimeRange, COUNT(*)
from    TimeRanges t
        LEFT JOIN AccessLog a on a.AccessTime >= t.TimeRangeMin and a.AccessTime < t.TimeRangeMax
GROUP BY convert(varchar(5), TimeRangeMin, 114); 
```

# c# - 使用 WCF REST 服务添加 gzip 压缩

> ID：16107557
> 
> 赞同：1
> 
> 时间：2013-04-19T14:58:24.610
> 
> 标签：c#, asp.net, .net, wcf, web-services

我正在从我的 REST Web 服务发送大数据（大约 600kb）作为响应。由于获得响应需要太多时间，我正在尝试压缩它。

在我的网站中，我有一个通用处理程序。对于这个处理程序，我从我的页面发出请求：

```
$.getJSON('Handler.ashx', data, function (fileBytesArray) {
   // Process the data
})
.done(function () { console.log("second success"); })
.fail(function () { console.log("error"); })
.always(function () { console.log("complete"); }); 
```

处理程序接受请求并转发到 REST 服务。处理程序代码：

```
public void ProcessRequest(HttpContext context)
{
   HttpWebRequest req = (HttpWebRequest)WebRequest.Create(new Uri("http://localhost/MyRestWebService/MyRestWebService.svc/DownloadFile"));
    req.ContentType = "application/json; charset=utf-8";
    req.Timeout = 60000;

    using (WebResponse resp = req.GetResponse()) 
    { 
        StreamReader reader = new StreamReader(resp.GetResponseStream());
        string responceFromService = reader.ReadToEnd();
        context.Response.ContentType = "application/json; charset=utf-8";
        context.Response.Write(responceFromService);
    } 
```

在我的服务中（在`DownloadFile()`方法中），我阅读了整个文件。然后使用`NewtonSoft.Json`dll，我将其序列化，然后将其返回给处理程序。

网站和 REST 服务都在同一台服务器上。我修改`applicationHost.config`了该服务器上的文件并进行了更改：

```
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
<scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll"/>
<dynamicTypes>
  <add mimeType="text/*" enabled="true"/>
  <add mimeType="message/*" enabled="true"/>
  <add mimeType="application/javascript" enabled="true"/>
  <add mimeType="*/*" enabled="false"/>
  <add mimeType="application/x-javascript" enabled="true"/>
  <add mimeType="application/json; charset=utf-8" enabled="true"/>
</dynamicTypes>
<staticTypes>
  <add mimeType="text/*" enabled="true"/>
  <add mimeType="message/*" enabled="true"/>
  <add mimeType="application/javascript" enabled="true"/>
  <add mimeType="*/*" enabled="false"/>
  <add mimeType="application/x-javascript" enabled="true"/>
  <add mimeType="application/json; charset=utf-8" enabled="true"/>
</staticTypes>
</httpCompression> 
```

我注意到`firebug`我没有`Content Encoding`进入`Response header`。有什么我错过的吗？

# php - 正则表达式捕获记录 PHP

> ID：16107564
> 
> 赞同：0
> 
> 时间：2013-04-19T14:58:36.813
> 
> 标签：php, regex, arrays, string

我需要捕获我的字符串的 ZAMM 记录。当您有空间时，我无法捕获属于它的数据。

我的字符串：

```
$string ='ZAMM Et a est hac pid pid sit amet, lacus nisi
ZPPP scelerisque sagittis montes, porttitor ut arcu
ZAMM tincidunt cursus eu amet nunc
ZAMM c ac nunc, et pid pellentesque amet, 
ZSSS m urna scelerisque in vut'; 
```

预期收益：

```
ZAMM Et a est hac pid pid sit amet, lacus nisi
ZAMM tincidunt cursus eu amet nunc
ZAMM c ac nunc, et pid pellentesque amet, 
```

我正在使用：

```
$arrayst    = explode(" ", $string);

foreach($arrayst as $stringit) { 

    if(preg_match("/ZAMM.*/", $stringit, $matches)) {
       echo $stringit;
       echo "<br />";
    }

}

// Return:
ZAMM
arcu ZAMM
nunc ZAMM 
```

我使用了错误的正则表达式？

**编辑**：最后一个问题。如果我的字符串是这样的：

```
$string ='ZAMM Et a est hac pid pid sit amet, lacus nisi ZPPP scelerisque sagittis montes, porttitor ut arcu            ZAMM tincidunt cursus eu amet nunc           ZAMM c ac nunc, et pid pellentesque amet, ZSSS m urna scelerisque in vut'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:04:38.123

为此，您将希望在多行模式下使用正则表达式，因此您将使用`m` [修饰符](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)，并查看整行数据。

首先，我们查找行首和行首所需的数据：

```
^ZAMM 
```

...然后我们寻找任何不是新行的数据：

```
.+ 
```

我们可以在`.`这里使用它，因为它不匹配新行，除非您还指定`s`修饰符，我们不会这样做。接下来我们断言一行的结尾：

```
$ 
```

把这些放在一起，你会得到：

```
/^ZAMM.+$/m 
```

在 PHP 中使用它：

```
$string ='ZAMM Et a est hac pid pid sit amet, lacus nisi
ZPPP scelerisque sagittis montes, porttitor ut arcu
ZAMM tincidunt cursus eu amet nunc
ZAMM c ac nunc, et pid pellentesque amet, 
ZSSS m urna scelerisque in vut';

preg_match_all('/^ZAMM.+$/m', $string, $matches);

print_r($matches[0]); 
```

[看到它工作](http://codepad.viper-7.com/WbgBqW)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:07:41.290

问题不在于您的正则表达式，而在于您的`explode(" ", $string)`. 当你这样做时，你将字符串拆分为一个单词数组。你不想要那个！您希望正则表达式对*整个*字符串进行操作，而不是对每个单词进行操作。

实际上，您想要的是对字符串中的每一行进行操作的正则表达式。

```
$string ='ZAMM Et a est hac pid pid sit amet, lacus nisi
ZPPP scelerisque sagittis montes, porttitor ut arcu
ZAMM tincidunt cursus eu amet nunc
ZAMM c ac nunc, et pid pellentesque amet, 
ZSSS m urna scelerisque in vut';

if(preg_match_all("/ZAMM.*/", $string, $matches)) {
    foreach($matches[0] as $match){
        echo $match;
        echo "<br />";
    }
} 
```

演示：http: [//ideone.com/BQIfkY](http://ideone.com/BQIfkY)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:05:03.657

我把这个 -> 改成`$arrayst = explode(" ", $string);`了这个 ->`$arrayst = explode("\n", $string);`因为在你的字符串中也有`\n`（换行符），这只是我的意见，但你应该在每一行之后加上`\n`（换行符）

# ruby-on-rails - 如何解决 ruby on rails 版本差异（向后/向前兼容性）

> ID：16107566
> 
> 赞同：1
> 
> 时间：2013-04-19T14:58:37.593
> 
> 标签：ruby-on-rails, ruby, database-schema, dbvisualizer

我是 Ruby/Ruby on Rails 的新手，我正在使用在 Rails [2.3.5上运行的](http://www.projectfedena.org/install)[项目 fedena](http://www.projectfedena.org/)。我四处寻找一个 rails 架构可视化工具.. 但我发现只有[一些 gem](http://railroad.rubyforge.org/)支持 rails 1.x 和[其他](https://github.com/preston/railroady)支持 rails 3.x的 gem。

是否有可能获得一个基于某个 RoR 版本构建的 RoR 应用程序，然后为另一个版本的 RoR 再次编译它？我一直在研究 Ruby 中的向后/向前兼容性，但得到[的结果并不令人鼓舞](https://stackoverflow.com/a/1626182/766570)。似乎各种 RoR 版本之间存在显着差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T06:24:33.270

我看到你的问题我也有，但我用这个：

```
 GO TO /project/config/environment
  and add this code

  Rails::Initializer.run do |config|
    config.time_zone = 'UTC'
    config.gem 'GEM_NAME', :version => '~> 2.3.5'
  end 
```

这将帮助您进行测试

# c - 递归查找子目录和文件

> ID：16107567
> 
> 赞同：1
> 
> 时间：2013-04-19T14:58:41.873
> 
> 标签：c, linux, filesystems

我想以递归方式检索给定路径中包含的所有文件、目录和子目录。但是当我的代码到达第二级（目录中的一个目录）时，我遇到了一个问题：它不是打开内部目录来搜索其内容，而是抛出一个错误。这是我所做的：

```
void getFile(char *path)
{

    DIR *dir;
    struct dirent *ent;
    if ((dir = opendir(path)) != NULL) {
    /* print all the files and directories within directory */
    while ((ent = readdir(dir)) != NULL) {
      if((strcmp(ent->d_name,"..") != 0) && (strcmp(ent->d_name,".") != 0)){

      printf ("%s", ent->d_name);

      if(ent->d_type == DT_DIR){

      printf("/\n");
      getFile(ent->d_name);
      }
      else{

      printf("\n");
      }
      }   // end of if condition
    }     // end of while loop
    closedir (dir);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:13:33.243

使用[ftw(3)](http://linux.die.net/man/3/ftw)库函数递归遍历文件树。这是相当标准的。

您还可以查看它`nftw`的[MUSL libc](http://musl-libc.org/)源[代码](http://git.musl-libc.org/cgit/musl/tree/src/misc/nftw.c)。它的可读性很强。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T15:01:33.780

当您递归调用时`getFile`，您只需使用刚刚读取的目录的名称来调用它。这*不是*您需要的完整路径。你必须自己管理。

* * *

像这样的东西：

```
if(ent->d_type == DT_DIR)
{
    if ((strlen(path) + strlen(ent->d_name) + 1) > PATH_MAX)
    {
        printf("Path to long\n");
        return;
    }

    char fullpath[PATH_MAX + 1];

    strcpy(fullpath, path);
    strcat(fullpath, "/");
    strcat(fullpath, ent->d_name); // corrected

    getFile(fullpath);
} 
```

# batch-file - 带引号的批处理路径

> ID：16107568
> 
> 赞同：5
> 
> 时间：2013-04-19T14:58:44.220
> 
> 标签：batch-file

如何检查路径是否有引号，如果没有则添加？我知道我可以做类似的事情：

```
set /p path="My path "
"%path%" 
```

但我有引号问题

```
C:\My folder --> "%path%" --> "C:\My folder" --> Good 
```

如果用户放置带引号的路径

```
"C:\My folder" --> "%path%" --> ""C:\My folder"" --> Wrong 
```

我不能使用双引号，因为我调用的外部命令行不起作用并给我错误。那么只有在路径中找不到时，我如何才能添加“”？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:03:55.170

您可以在使用前删除报价，尝试：

```
set path=%path:"=% 
```

`path`已经没有报价了。

例子：

```
@echo off

set path="a b c"

set path=%path:"=%

echo %path% 
```

输出

```
a b c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:07:58.837

无法测试这一点，因为我正在用手机写信，但你不能假设有双引号并进行查找和替换：

```
set path=%path:""="% 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:29:19.490

```
 for /f "delims=" %%i in ("%var%") do set "var=%%~i"
  echo %var% 
```

%var% 在 for 循环之后没有双引号。

顺便说一句：您不应该将 cmd 命令用作批处理变量（PATH）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T02:15:23.107

删除所有引号，然后在其周围添加引号：

```
set path=^"%path:"=%^" 
```

插入符号( `^`) 用于转义引号的特殊含义，因此`set`会将它们包含在变量中。

# java - For循环不会将点添加到数组

> ID：16107574
> 
> 赞同：0
> 
> 时间：2013-04-19T14:59:04.203
> 
> 标签：java, android, string, arraylist

我有以下 for 循环，它查看结果的字符串 ArrayList，字符串中的每个项目都由“::”分隔：

```
ArrayList<String> resultsArray = MyClass.results;
        Integer numPoints = resultsArray.size();

        for (int i =0;i<numPoints;i++){
            String[] pointDetails = resultsArray.get(i).split("::");
            String pointName = pointDetails[0];
            String pointDescription = pointDetails[1];
            String coordinates = pointDetails[2];

        //Turn coordinates into geopoints
            String coord[] = coords.split(",");
            Integer  lng= (int) (Double.valueOf(coord[0]) * 1000000);
            Integer lat = (int)(Double.valueOf(coord[1])*1000000);
            GeoPoint gPoint = new GeoPoint(lng,lat);

         arrayPointName = new ArrayList <String>();
         arrayPointDescription = new ArrayList <String>();
         arrayPointCoords=new ArrayList<GeoPoint>();
         arrayPointName.add(pointName);
         arrayPointDescription.add(pointDescription);
     arrayPointCoords.add(gPoint);
          } 
```

我知道我在初始字符串 ArrayList 中有 20 个点，并且已经打印出它的大小来检查这一点。但是，当我打印出新的数组列表（例如 arrayPointName）时，它们只包含一个点。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T15:01:24.093

看看这段代码：

```
arrayPointName = new ArrayList <String>();
arrayPointDescription = new ArrayList <String>();
arrayPointCoords=new ArrayList<GeoPoint>(); 
```

这三个语句——为你的变量分配新的、空的引用——在你的循环的*每次迭代*`ArrayList`中都被执行。

 *它们应该出现*在*您的循环之前：您只想初始化一次变量（创建三个列表），然后在每次迭代中添加一个新项目。

作为旁注，像这样填充多个集合通常是一个坏主意。通常最好创建一个封装相关数据（在这种情况下为名称、描述、坐标）的单一类型，然后创建该类型项目的*单一*集合。这通常更容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:12:06.567

您将坐标用作 ArrayList 而没有启动它。您还为每次迭代 arrayPointName、arrayPointDescription 和 arrayPointCoords 启动，这就是为什么它们丢失了在上一次迭代中创建的值。他们应该在开始循环之前启动一次

如果您给我们一个 resultsArray 字符串的样本，它将很容易帮助您。*

# java - 使用通配符属性注册的查找 OSGI 服务

> ID：16107575
> 
> 赞同：1
> 
> 时间：2013-04-19T14:59:04.610
> 
> 标签：java, osgi, equinox

我知道可以使用属性通配符从 OSGI 服务注册表中查找服务。这个问题是关于反过来做的。

基本上你注册一个这样的服务：

```
Map<String, String. prop = new HashMap<String, String>();
prop.put("name", "europe-*"); // this is the point - the service is registered with property containing wildcard 
context.registerService(IService.class.getName(), new ContinentServiceEuropeImpl(), prop); 
```

然后你想用这个属性的具体值来查找这个服务，像这样：

```
ServiceTracker primaryTracker = new ServiceTracker(bundleContext, "(&(objectClass=<IService class name here>)(name=europe-spain))", null); 
```

这不会找到服务，因为服务注册属性不被视为通配符，即只有在您特别要求时才能找到服务`(name=europe-*)`- （不确定在查找 * 文字时是否必须转义 *）

为了对比这一点——通常是相反的——你注册一个具有具体属性值的服务，即`(name=europe-spain)`，然后你通过使用来查找它`(name=europe-*)`——这可行，但不幸的是这不是我所需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:11:40.950

它不是那样工作的。服务注册中的属性是可以使用过滤表达式搜索的值。

您可以这样做：

```
ServiceTracker primaryTracker = new ServiceTracker(bundleContext, "(&(objectClass=<IService class name here>)(|(name=europe-spain)(name=europe-\\*))", null); 
```

它将寻找 europe-spain 或 europe-*。或者您可以使用它支持的名称值注册服务：

```
prop.put("name", new String[]{"europe-spain","europe-france",...}); 
```

# vba - 我无法让这段代码工作，这是一个“类型不匹配错误”

> ID：16107579
> 
> 赞同：1
> 
> 时间：2013-04-19T14:59:10.830
> 
> 标签：vba, excel

这段代码有什么问题吗。我需要查看一列，如果该值小于参考值（它是一个计时器），则复制相邻的单元格并放入“A8”。

谢谢。

```
Sub GetData()

Dim i As Integer

For i = 4 To 31

If Cells(i, 38) < Cells(32, 5) Then
Cells(1, 8) = Cells(i, 39)
End If

Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T15:21:13.487

或者，`If statement`在您现有的所有选项中添加此附加项`if`：

```
 If IsError(Cells(i, 39)) = False And IsError(Cells(32, 5))= False Then 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:12:44.907

您可以在测试小于之前尝试测试单元格中的数值：

```
Sub GetData()

Dim i As Integer

For i = 4 To 31

  if isnumeric(cells(i,38)) then
    If Cells(i, 38) < Cells(32, 5) Then
        Cells(1, 8) = Cells(i, 39)
        ' Exit For ' UN-COMMENT to exit loop
    End If
  else
    msgbox "Cell '" & cells(i,38).address & "' may have an error",vbexclamation+vbokonly
  end if

Next

End Sub 
```

顺便说一句，David 和 Kazjaw 的上述评论非常正确，循环的每次迭代你都可能会覆盖单元格 A8！

您可以在测试返回 true 后立即退出循环，如下所示：

`Exit for`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:13:26.337

为避免不匹配，请尝试与单元格的文本进行比较：

`If Cells(i,38).Text < Cells(32,5)...`

# javascript - 如何访问存储在变量中的数组中的键？

> ID：16107580
> 
> 赞同：1
> 
> 时间：2013-04-19T14:59:17.990
> 
> 标签：javascript, arrays, variables

我正在尝试访问`drawnCard`此代码中变量的名称键，但我无法弄清楚它为什么不起作用。

你介意看看我的 Javascript 代码的结尾吗？

[http://jsbin.com/ohinif/10/edit](http://jsbin.com/ohinif/10/edit)

请不要介意极有可能是初学者的编码......

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:13:14.113

从数组中拼接出一个元素时，它仍将其作为数组返回。

因此，要获得您需要使用的名称：

```
var drawnCard = deck.splice(randomCard, 1);
console.log(drawnCard[0].name) // note the index here 
```

或者，您可以在将接头拉出时从接头中提取第一项，如下所示：

```
var drawnCard = deck.splice(randomCard, 1)[0]; // and the first index here
console.log(drawnCard.name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:08:59.950

对您的代码执行此操作

```
var randomCard = Math.floor(Math.random() * deck.length);
console.log(randomCard)
var drawnCard = deck.splice(randomCard, 1)[0];
console.log(drawnCard.name); 
```

**演示在这里**

[http://jsbin.com/ohinif/17/edit](http://jsbin.com/ohinif/17/edit)

# documentation - 我在哪里可以找到 spring 安全标签库的文档？

> ID：16107592
> 
> 赞同：0
> 
> 时间：2013-04-19T14:59:48.297
> 
> 标签：documentation, spring-security, taglib

我在哪里可以找到 spring 安全标签库的文档？试图谷歌但失败了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:05:05.683

这就是我所需要的。 [http://static.springsource.org/spring-security/site/docs/3.1.x/reference/taglibs.html](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/taglibs.html)

参考文档中有很多示例。

# com - 用于 MFC GUI 的 E_NOINTERFACE 不适用于 Win32 控制台应用程序

> ID：16107595
> 
> 赞同：0
> 
> 时间：2013-04-19T14:59:52.507
> 
> 标签：com

在带有 VS2010 和 Microsoft SDK v7.0a 的 Win7 SP1 下运行。如果我为 Win32 控制台应用程序创建 VS2010 项目，则在 regsvr32.exe 注册的 COM DLL 上的 CreateInstance 成功。如果我为 MFC GUI 创建 VS2010 项目，相同的 CreateInstance 将失败并显示 E_NOINTERFACE。已经尝试过 Unicode 和多字节，Win32 控制台应用程序的两种方式都适用，MFC GUI 的两种方式都失败。这怎么可能？

如果我通过 Win32 控制台应用程序 F11，我最终会看到 CreateInstance 到达 IUnknown 上的 QueryInterface [成功]。如果我通过 MFC GUI F11，它永远不会到达 QueryInterface。

我已经看到一些关于 ADO 版本/升级相关的讨论，但这里有一个系统成功用于 Win32 控制台应用程序而失败用于 MFC GUI。如何？

更新：我错误地允许使用 WinDDK comip.h 而不是 VS2010 comip.h。但即使在纠正之后，问题仍然存在。

还发现在 64 位机器上编译的相同 MFC GUI 项目和源代码不会失败。只有我的 32 位机器可以。两者都在 CreateInstance 调用堆栈中到达 QueryInterface，但 32 位机器返回失败，而 64 位机器返回成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T20:41:51.973

感谢 MSDN 技术支持，我了解到 MFC GUI 不支持 COM 所需的“自由线程”。

# symfony - 如何在 symfony2 上做方面：FOSElasticaBundle？

> ID：16107605
> 
> 赞同：2
> 
> 时间：2013-04-19T15:00:21.920
> 
> 标签：symfony, elasticsearch

如何在 symfony2 上使用 elasticsearch 进行方面查询？

我可以查询，并得到结果，它有效！

现在在这个查询上，我想对结果进行分面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-26T13:09:29.050

```
 public function facetAction()
  {           
        // index
        $search = $this->get('fos_elastica.index.appellations.appellation');

        $query = new \Elastica\Query\MatchAll();

        $elasticaQuery = new \Elastica\Query();
        $elasticaQuery->setQuery($query);
        $elasticaQuery->setSize(550);

        $elasticaFacet = new \Elastica\Facet\Terms('regions');
        $elasticaFacet->setField('regions');
        $elasticaFacet->setSize(550);

        $elasticaFacet->setOrder('reverse_count');

        $elasticaQuery->addFacet($elasticaFacet);

        // ResultSet
        $elasticaResultSet = $search->search($elasticaQuery);

        // Get Facets
        $elasticaFacets = $elasticaResultSet->getFacets();

        foreach ($elasticaFacets['regions']['terms'] as $elasticaFacet) {

            $results[] = $elasticaFacet;
        }       

        return $this->container->get('templating')->renderResponse
        ('ApplicationGhvAppellationsBundle:Default:indexFacets.html.twig', array(
        'appellations' => $results
        ));
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-13T16:43:56.927

由于 Facets 将在此处被弃用，因此更新了带有聚合的代码

```
public function aggregationAction()
{           
    // index
    $search = $this->get('fos_elastica.index.appellations.appellation');

    $query = new \Elastica\Query\MatchAll();

    $elasticaQuery = new \Elastica\Query();
    $elasticaQuery->setQuery($query);
    $elasticaQuery->setSize(550);

    $elasticaAggreg= new \Elastica\Aggregation\Terms('regions');
    $elasticaAggreg->setField('regions');
    $elasticaAggreg->setSize(550);

    $elasticaAggreg->setOrder('_count', 'desc');

    $elasticaQuery->addAggregation($elasticaAggreg);

    // ResultSet
    $elasticaResultSet = $search->search($elasticaQuery);

    // Get Aggregations
    $elasticaAggregs = $elasticaResultSet->getAggregations();

    foreach ($elasticaAggregs['regions']['buckets'] as $elasticaAggreg) {

        $results[] = $elasticaAggreg;
    }       

    return $this->container->get('templating')->renderResponse
    ('ApplicationGhvAppellationsBundle:Default:indexFacets.html.twig', array(
    'appellations' => $results
    ));
} 
```

# java - 尝试编译 jomp hello world 时出错

> ID：16107610
> 
> 赞同：0
> 
> 时间：2013-04-19T15:00:47.180
> 
> 标签：java, ubuntu, openmp

我有一个要使用 OpenMp 完成的家庭作业，但我不是一个好的 c/c++ 程序员，所以我决定使用 JOMP API 在 java 中完成它。

无论如何，我在运行 hello world 程序时遇到了问题。我完成了[此链接](http://nishantgandhi99.blogspot.com/2013/02/jomp-sample-program-setting-classpath.html?showComment=1366371952530#c4389845337105032522)中显示的所有步骤，但在尝试编译时仍然出现此错误：

```
java jomp.compiler.Jomp Hello 
```

我收到此错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: jomp/compiler/Jomp
Caused by: java.lang.ClassNotFoundException: jomp.compiler.Jomp
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: jomp.compiler.Jomp. Program will exit. 
```

我使用 ubuntu 11.10 jdk 6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:04:40.947

```
Exception in thread "main" java.lang.NoClassDefFoundError: jomp/compiler/Jomp 
```

通常，如果 jar 文件不在运行时类路径中，则会发生此异常。确保您添加了 jomp.jar（不知道确切的 jar 名称，使用有效的 jar），它具有`jomp/comipler/Jomp`类到类路径。

# html - 具有底部边距和嵌套 div 100% 高度问题的流体布局

> ID：16107611
> 
> 赞同：0
> 
> 时间：2013-04-19T15:00:48.040
> 
> 标签：html, height, fluid-layout, css

我正在将现有的固定布局转换为“流动”。

我有两个问题：

1.  当`#content`包含大量数据时，这使得它在视口上扩展，我找不到在底部留出边距的方法。

2.  `#content`添加时似乎“松散”了它的高度，`position:relative;`这是放置`#content`到 of 上所必需的`#topgradient`。我需要`#test`（蓝色边框）来填充`#content`并且`#content`需要填充`#contentwrapper`。

我有一个现有的固定布局，效果很好，问题是在我添加/更改`height: auto; min-height: 100%;`div 之后开始的。

看到这种乱七八糟/原型设计的jsfiddle：http: [//jsfiddle.net/bQeu3/2/](http://jsfiddle.net/bQeu3/2/)（点击白色区域（`#content`）更改内容）

问题 1 的最佳解决方案如下所示： ![问题1的最佳解决方案](https://i.stack.imgur.com/wuStM.png)

问题 2 的最佳解决方案如下所示： ![问题2的最佳解决方案](https://i.stack.imgur.com/KaCR1.png)

希望你能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:31:34.153

第一个问题：http: [//jsfiddle.net/bQeu3/7/](http://jsfiddle.net/bQeu3/7/)

`height:100%`从#page中删除

添加`padding:1px`到#page

添加`margin-bottom:100px`到#contentwrapper

单击某些内容时保持#contentwrapper 的大小：

```
#test{
  min-height: 300px;
  border: 5px solid blue;
  margin: 5px;
} 
```

考虑到边框等，您可能需要更正 300px...

# c - 将人类可读的大小（k、M、G、T）解析为 C 中的字节

> ID：16107613
> 
> 赞同：-3
> 
> 时间：2013-04-19T15:00:56.823
> 
> 标签：c, parsing, scanf, atoi

我正在寻找一种将人类可读的字节大小（例如：100、1k、2M、4G）解析为字节值的快速方法。输入是 a `char *`，输出必须是 a `size_t`（例如，无符号，可能是 64 位或 32 位整数，具体取决于架构）。代码应该检测到无效输入并返回一个值，表明它是无效输入。

例子：

```
Input  => size_t result
-----------------------
"100"  => 100
"10k"  => 10240
"2M"   => 2097152
"4G"   => 4294967296 on 64-bit machine, error (overflow) on 32-bit machine
"ten"  => error 
```

这是一个示例代码片段，可以扩展以处理单元前缀：

```
int parse_human_readable_byte_size(char *input, size_t *result) {
    /* TODO: needs to support k, M, G, etc... */
    return sscanf("%zu", result) == 1;
} 
```

以下是一些额外的要求：

*   必须在 C 中完成（非 C++）
*   仅使用标准库（或至少常用的）库（例如`sscanf`, `atoi`）

该代码预计每次程序执行仅运行几次，因此更小的可读代码优于更长的高性能代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:22:19.590

这是一个潜在的实现。包括检测所有错误的代码；`goto`如果您愿意，请填写您自己的处理来代替s。

```
char *endp = s;
int sh;
errno = 0;
uintmax_t x = strtoumax(s, &endp, 10);
if (errno || endp == s) goto error;
switch(*endp) {
case 'k': sh=10; break;
case 'M': sh=20; break;
case 'G': sh=30; break;
case 0: sh=0; break;
default: goto error;
}
if (x > SIZE_MAX>>sh) goto error;
x <<= sh; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:21:58.133

我将尝试使用一个按字符分析输入字符的子函数。

进一步进行明显的错误检查，我将使其转换数字常量中的符号，乘以对应于常量的基数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-07T14:34:35.090

根据接受的答案，我更新了截图。它支持浮点输入（如`1.5k`），支持十六进制输入（如`0x55k`），删除`gotos`并使用字符串作为单元列表以避免切换并使更新变得容易。

```
static char *human_readable_suffix = "kMGT";

size_t *parse_human_readable(char *input, size_t *target) {
    char *endp = input;
    char *match = NULL;
    size_t shift = 0;
    errno = 0;

    long double value = strtold(input, &endp);
    if(errno || endp == input || value < 0)
        return NULL;

    if(!(match = strchr(human_readable_suffix, *endp)))
        return NULL;

    if(*match)
        shift = (match - human_readable_suffix + 1) * 10;

    *target = value * (1LU << shift);

    return target;
} 
```

以下是测试结果：

```
1337   =>           1337 [ok, expected: 1337]
857.54 =>            857 [ok, expected: 857]
128k   =>         131072 [ok, expected: 131072]
1.5k   =>           1536 [ok, expected: 1536]
8M     =>        8388608 [ok, expected: 8388608]
0x55   =>             85 [ok, expected: 85]
0x55k  =>          87040 [ok, expected: 87040]
1T     =>  1099511627776 [ok, expected: 1099511627776]
32\.    =>             32 [ok, expected: 32]
-87    => error (expected)
abcd   => error (expected)
32x    => error (expected) 
```

完整代码见：[https ://gist.github.com/maxux/786a9b8bf55fb0696f7e31b8fa3f6b9d](https://gist.github.com/maxux/786a9b8bf55fb0696f7e31b8fa3f6b9d)

# drupal - 根据角色隐藏 cck 字段

> ID：16107623
> 
> 赞同：0
> 
> 时间：2013-04-19T15:01:24.150
> 
> 标签：drupal, drupal-6, cck

我正在寻找一种方法来为每个人隐藏一个 cck 字段，除了一个特定的角色。

我知道有一个模块，内容权限模块，可以很好地处理这个问题。但是我接管了一个非常大的站点，其中包含许多内容类型，并且定义了许多相关的 cck 字段。所以安装内容权限模块不是一个好主意，因为它需要大量的设置。

这是一个drupal 6安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:26:09.723

您可以在自定义模块中使用 hook_nodeapi：

```
/**
 * Implements hook_nodeapi().
 */
function yourmodule_nodeapi(&$node, $op, $a3 = NULL, $a4 = NULL) {
  switch ($op) {
    case 'view':
      if (! user_access('show restricted content')) {
        unset ($node->content['field_restrictedcontent']);
      }
      break;
  }
}

/**
 * Implements hook_perm().
 */
function yourmodule_perm () {
  return array(
    'show restricted content',
  );
} 
```

不过，请注意，这在某种程度上是一种 hack：我认为您应该重新考虑为您的站点使用 Content Permission 模块，并努力为您的节点类型配置它。这是一次性的工作，它可以保护您免受与站点中其他模块的兼容性问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:37:37.967

您需要使用任何权限模块并重新配置有问题的每个字段。使用代码，您必须检查每个字段的用户角色！

# android - Android 图像共享意图 - 如何从列表中排除特定处理程序？

> ID：16107634
> 
> 赞同：1
> 
> 时间：2013-04-19T15:01:51.157
> 
> 标签：android, android-intent, intentfilter

在我的 Android 应用程序中，我从 Instragram API 加载了一个图像，并通过通用共享意图共享它，如下所示：

```
Intent share = new Intent(Intent.ACTION_SEND);
share.setType("image/jpeg");
Uri uri = Uri.fromFile(file);
share.putExtra(Intent.EXTRA_STREAM,uri);

startActivity(Intent.createChooser(share, "Share Image")); 
```

默认情况下，它会提供处理此意图的所有已安装应用程序的列表，包括 Instagram，它是图像的原始来源。如何过滤此列表以仅排除 Instagram 应用程序处理意图，同时保留所有其他内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:08:59.943

> 如何过滤此列表以仅排除 Instagram 应用程序处理意图，同时保留所有其他内容？

你不能，除非通过创建自己的选择器活动，使用`queryIntentActivities()`并`PackageManager`以某种方式过滤掉 Instagram。这样做是不可靠的，仅仅是因为有多个可能的 Instagram 客户，他们的包名称不能提前确定。

我只是将 Instagram 留在那里作为一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-23T05:55:43.667

我使用此代码过滤了 instagram 的共享意图。

```
List<Intent> targets = new ArrayList<Intent>();
Intent template = new Intent(Intent.ACTION_SEND);
template.setType("text/plain");
List<ResolveInfo> candidates = this.getPackageManager().
queryIntentActivities(template, 0);

// remove all intent except instagram in share intent
for (ResolveInfo candidate : candidates) {
    String packageName = candidate.activityInfo.packageName;
    if (packageName.contains("instagram")) {
       Intent target = new Intent(android.content.Intent.ACTION_SEND);
       target.setType("text/plain");
       target.putExtra(Intent.EXTRA_TEXT, "Text to share"));
       target.setPackage(packageName);
       targets.add(target);
    }
}
Intent chooser = Intent.createChooser(targets.remove(0), translate("Share Via"));
chooser.putExtra(Intent.EXTRA_INITIAL_INTENTS, targets.toArray(new Parcelable[]{}));
startActivity(chooser); 
```

# validation - Bean Validation 1.1 (JSR-349)，实现替代方案？

> ID：16107646
> 
> 赞同：6
> 
> 时间：2013-04-19T15:02:24.013
> 
> 标签：validation, javabeans, bean-validation

除了参考实现[Hibernate Validator](http://hibernate.org/validator/) 5.x，还有[JSR 349](http://www.jcp.org/en/jsr/detail?id=349)（JSR 303 的继承者）的替代实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T20:51:39.603

Bean Validation 1.1 尚未 100% 完成（但即将完成），因此其他供应商正在等待最终版本。

你可能会看

*   [https://code.google.com/p/gwt-validation/](https://code.google.com/p/gwt-validation/)和
*   [http://bval.apache.org/](http://bval.apache.org/)

这些是 Bean Validation 1.0 的实现，但迟早他们想赶上最终的 1.1

# c# - 图像处理程序：添加高度方面？

> ID：16107649
> 
> 赞同：0
> 
> 时间：2013-04-19T15:02:29.673
> 
> 标签：c#, asp.net, image, image-processing

我有一个数据列表控件，通过它我通过图像处理程序从数据库中检索图像。

```
<asp:DataList ID="dlImages" runat="server" RepeatColumns="2"RepeatDirection="Horizontal" BorderColor="#336699" BorderStyle="Solid" BorderWidth="2px"  CssClass="DataList-Centre" DataSourceID="CustomerDS" Width="61%" style="text-align: center">
    <ItemTemplate>
        <div style="width:300px; height:300px;">
            <asp:Label ID="Label1" runat="server" Text='<%# Eval("ATT_name") %>' Font-Bold="True" Font-Size="10pt" ForeColor="#336699" Width="100%" />
            <br />
            <asp:Image ID="Image1" runat="server" ImageUrl='<%# "~/ImageHandler.ashx?MaxWidth=490&AttachmentId=" +   Eval("CustomerID") %>'/>
        </div>
    </ItemTemplate>
    <ItemStyle HorizontalAlign="Center" VerticalAlign="Top" Width ="100px"  />
</asp:DataList> 
```

我的`imagehandler.ashx`代码如下所示。一切正常，但我无法调整图像的高度而不弄乱像素比。如何为下面的代码向我的处理程序添加高度方面？

```
public class ImageHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        int attachmentId = -1;
        int maxWidth = 2000;
        int rotate = 0;
        if(HttpContext.Current.Request.QueryString["AttachmentId"] != null)
            attachmentId = Convert.ToInt32(HttpContext.Current.Request.QueryString["AttachmentId"]);
        if(HttpContext.Current.Request.QueryString["MaxWidth"] != null)
            maxWidth = Convert.ToInt32(HttpContext.Current.Request.QueryString["MaxWidth"]);
        if(HttpContext.Current.Request.QueryString["Rotate"] != null)
         rotate =              Convert.ToInt32(HttpContext.Current.Request.QueryString["Rotate"]);

        HttpResponse r = context.Response;

        if (attachmentId != -1)
        {
            using (SqlConnection cn = new SqlConnection(
                ConfigurationManager.ConnectionStrings["Test"].ConnectionString))
            {
                SqlCommand cmd = new SqlCommand(
                    string.Format("SELECT Rel_ObjectId, Content_Type, Att_Name, Data_Size, Data"
                        + " FROM Customer"
                        + " WHERE AttachmentId = '{0}'"
                        , attachmentId )
                    , cn);

                cn.Open();
                using (SqlDataReader reader = cmd.ExecuteReader())
                {
                    if (reader.Read())
                    {                            
                        r.ContentType = reader["Content_Type"].ToString();

                        using(MemoryStream ms_in = new MemoryStream((byte[])reader["Data"]))
                        {
                            Image img_in = Image.FromStream(ms_in);
                            const int orientationId = 0x112;
                            int orientationIndex = Array.IndexOf(img_in.PropertyIdList, orientationId);
                            if(orientationIndex > -1)
                            {
                                int orientation = img_in.GetPropertyItem(orientationId).Value[0];
                                switch (orientation)
                                {
                                    case 3: rotate += 180;
                                            break;
                                    case 6: rotate += 90;
                                            break;
                                    case 8: rotate += 270;
                                            break;
                                }
                            }
                            if(rotate < 0)
                                rotate += 360;
                            rotate = rotate % 360;
                            //If need to rotate
                            switch(rotate)
                            {
                                case 90:    img_in.RotateFlip(RotateFlipType.Rotate90FlipNone);
                                            break;
                                case 180:   img_in.RotateFlip(RotateFlipType.Rotate180FlipNone);
                                            break;
                                case 270:   img_in.RotateFlip(RotateFlipType.Rotate270FlipNone);
                                            break;
                            }

                            // If need to shrink image, then do so
                            double reductionRatio = (double)maxWidth / img_in.Width;
                            Image img_out;
                            if(maxWidth<img_in.Width)
                                img_out = img_in.GetThumbnailImage(maxWidth, (int)(img_in.Height*reductionRatio), new System.Drawing.Image.GetThumbnailImageAbort(ThumbnailCallback), IntPtr.Zero);
                            else
                                img_out = img_in;

                            // Write img_out
                            MemoryStream ms_out = new MemoryStream();
                            img_out.Save(ms_out, System.Drawing.Imaging.ImageFormat.Jpeg);
                            byte[] data_out = new byte[ms_out.Length];
                            ms_out.Position = 0;
                            ms_out.Read(data_out, 0, (int)ms_out.Length);
                            r.BinaryWrite(data_out);

                            // Clean up
                            img_in.Dispose();
                            img_out.Dispose();
                            ms_out.Dispose();
                        }
                    }
                }
            }
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }

    public bool ThumbnailCallback()
    {
        return true;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:23:09.577

我认为你的缩小比例应该是img_in.Width/maxWidth而不是maxWidth/img_in.Width。因为您将新高度定义为 Height*reductionRatio。

# git - 您将如何测量插入/更改/删除的代码行 (LoC)？

> ID：16107657
> 
> 赞同：0
> 
> 时间：2013-04-19T15:02:46.737
> 
> 标签：git, svn, perforce, clearcase, lines-of-code

我的问题涉及 LoC 指标。我必须提供插入、更改和删除行的统计信息。我的用户使用 ClearCase 和下面基于它的示例，但是我相信我的问题是一般性的。

请查看以下示例（取自 ClearCase 文档）。它比较两个文件版本，`/main/1`（左侧）和`/main/3`（右侧）。

> ```
>  ******************************** (file summary) 
>     <<< file 1: util.c@@/main/1
>     >>> file 2: util.c@@/main/3
>     ********************************
>     ----------[after 15]------|-------[inserted 16]------ (header) 
>                               | char *s;        (difference) 
>                               |-
>     ---------[changed 18]-----|----[changed to 19-21]---- (header) 
>     return ctime(&clock);     | s = ctime(&clock); (difference) 
>                            -  | s[ strlen(s)-1 ] = '\0';
>                               | return s;
>                               |- 
> ```

毫无疑问，插入了 1 行（第 16 行）。

我的问题是关于第 18 行的更改：你在这里数了多少行？

*   3 换行？
*   1 更改线路？
*   1 条 CHANGED 线和 2 条 INSERTED 线？
*   你觉得还有什么……？

请让我知道您的想法（以及为什么...）。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T19:15:12.590

大多数 SCM 系统都允许您在文件作为提交前或提交后挂钩的一部分提交时对其进行扫描。您可以运行任何您喜欢的扫描工具并在某处记录统计信息，也许作为文件的一个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:30:59.347

此示例来自[cleartool diff 手册页](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_diff.htm)，该 diff 不是您常用的[diff 格式](http://en.wikipedia.org/wiki/Diff)。

对于 ClearCase：

```
---------[changed X]----------|----------[changed to Y]--------- 
```

> 一条或多条线就地改变了。
> 
> *   X 表示第一个文件中的哪些行被更改。
> *   Y 表示替换行在第二个文件中出现的位置。

所以在这里：

*   1 行已更改
*   替换为 3 行

与其他工具（如 git）使用的 diff 统一格式没有直接等效，这意味着使用默认 cleartool 格式的这个问题是特定于 ClearCase 的。

如果 cleartool diff 使用该**`-diff_format`**选项，这将导致以 UNIX 和 Linux diff 实用程序的样式报告标头和差异，这将使该差异的解释更常见。

* * *

当谈到 LOC 和 diff 时，一个很好的参考是**[CLOC](http://cloc.sourceforge.net/)**，它将给出一个**[diff loc](http://cloc.sourceforge.net/#diff)**专注于以下行：

*   相同的
*   修改的
*   添加
*   移除

在你的情况下：

*   修改了 1 行
*   添加了 2 行

# python - 无法在 Windows Powershell 中打开 python.exe

> ID：16107658
> 
> 赞同：1
> 
> 时间：2013-04-19T15:02:51.363
> 
> 标签：python, windows, powershell, path, exe

前段时间我从 Windows 中删除了我的 python 程序，最近从主站点下载了 python2.7.4，但是当我从 C: 的 Windows PowerShell(x86) 提示符中键入“python”时，我收到消息“' python' 不被识别为内部或外部命令、可运行程序或批处理文件。”，我想知道如何解决这个问题。

当我在实际的 python27 文件夹中时（`python.exe`确实存在），我收到了相同的消息。但是，当我输入 时`.\python`，它会按预期运行，并且我的计算机可以运行 other`.exe`就好了。我在 Sony VAIO 笔记本电脑上使用 Windows 7 Home Premium Service Pack 1。我对我的电脑的内部运作不是很熟悉，所以我不知道从哪里看。

我当前的路径如下所示，最后是 python 文件夹：

`%SystemRoot%\system32\WindowsPowerShell\v1.0\;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files (x86)\Common Files\Roxio Shared\10.0\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;C:\Program Files (x86)\Common Files\Adobe\AGL;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files\Java\jdk1.6.0_23\bin;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\MySQL\MySQL Workbench CE 5.2.42;C:\Program Files\MySQL\MySQL Server 5.5\bin;C:\Program Files (x86)\apache-ant-1.8.4\bin;C:\Program Files\TortoiseSVN\bin;C:\Windows\system32\WindowsPowerShell\v1.0\;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files (x86)\Common Files\Roxio Shared\10.0\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;C:\Program Files (x86)\Common Files\Adobe\AGL;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files\Java\jdk1.6.0_23\bin;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\MySQL\MySQL Workbench CE 5.2.42;C:\Program Files\MySQL\MySQL Server 5.5\bin;C:\Program Files (x86)\apache-ant-1.8.4\bin;C:\Program Files\TortoiseSVN\bin;C:\Program Files\Java\jdk1.6.0_23\bin;C:\Python27`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:30:43.223

将评论作为未来参考的答案：

`;`在 PATH 末尾有一个并注销并重新登录。

# javascript - 如何从子网格设置默认表单

> ID：16107663
> 
> 赞同：1
> 
> 时间：2013-04-19T15:03:22.663
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm

我在联系人实体中创建了一个子网格来显示联系人的相关潜在客户记录。由于客户要求，我们还具有通过此子网格从联系人实体创建新潜在客户的功能。到这里为止一切都很好。我们有两个由每个产品线创建的潜在客户表单。说家用家具铅表格和办公家具铅表格。我正在寻找一种将家居家具潜在客户表单设置为默认表单以从联系人实体中的子网格打开的功能。

当用户从联系人表单的子网格中单击添加新潜在客户时，默认情况下应该打开 Home Furniture 表单。如果有人可以提出一种方法或代码来实现这一点，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:46:58.733

如果您查看[此页面](http://msdn.microsoft.com/en-us/library/gg328483)上的 extraqs 描述，您可以指定表单 ID 来打开表单。所以你有两个选择：

1.  使用 javascript 编辑子网格中的 url。不确定这是否可行，但应该可以。
2.  在确定正确的产品线后，在潜在客户表单的 onload 中调用[OpenEntityForm](http://msdn.microsoft.com/en-us/library/72a66f93-92df-42b9-a8fd-b6125c7fe83b#BKMK_OpenEntityForm) javascript，并传入正确的表单 ID。

如果您让选项 1 起作用，请告诉我们！

# c# - 为什么我们不能导入/导出树视图和 xml

> ID：16107664
> 
> 赞同：0
> 
> 时间：2013-04-19T15:03:28.077
> 
> 标签：c#, recursion, treeview

我不确定这个问题是否可以在这里提出，但它一直困扰着我很长时间，我必须尝试得到一个好的答案。

控件的最常见用法有方法、属性和事件。如果它不作为类方法存在，通常会有很好的共鸣，并且可以通过变通来解决（大多数情况下）。

有人可以解释为什么无法通过简单地调用一个方法来简单地获取 a`XmlDocument`并从中构建 a吗？`Treeview`反之亦然。为什么我们不能通过简单的方法调用来简单地导出/保存`TreeView`一个`XmlDocument`？

就像是 ：

```
//Load
treeView.BuildFromXml(xmlDocument, xmlRootNode);

//Save
treeView.ExportToXml(xmlDocument); 
```

`TreeView`和`Xml`使用完全相同的结构，所以我们一直一起使用它们。但是每次我们必须重新执行那些在子节点和父节点之间滚动的递归方法。

对此有合乎逻辑的解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:07:38.997

如果您必须“重新执行那些递归方法”，那么您需要创建一个自己的实用程序类或扩展来“编写一次，经常使用”。如果您实际上每次都必须为不同的功能重写，那么您已经回答了自己的问题 - 没有一个好的通用方法可以满足所有人的需求。

# php - 逐步存储textarea mysql php

> ID：16107668
> 
> 赞同：3
> 
> 时间：2013-04-19T15:03:40.370
> 
> 标签：php, mysql, textarea, nl2br

所以我对所有关于使用正确的换行符存储和显示文本区域以及不允许任何 HTML 标记的主题感到困惑。

现在我正在转义输入，然后将其存储为文本，然后尝试使用 echo nl2br($text); 显示它 但它仍然行不通。

那么应该如何处理它以便输入是安全的，它不会允许显示任何 HTML，如何正确显示它等等？

这就是我运行当前代码时发生的情况。
第 1 步：
Textarea 输入：
ROW 1

第 3
行 第 4 行

第 6 行

转义变量：
$text = $mysqli->real_escape_string($_POST['textarea']);

第 2 步：
要插入到数据库的 SQL 查询。在数据库中存储为：
ROW 1\r\n\r\nROW 3\r\nROW 4\r\n\r\nROW 6

第 3 步：
用 SQL 获取它，用 echo nl2br($text); 显示 结果为
ROW 1\r\n\r\nROW 3\r\nROW 4\r\n\r\nROW 6

我猜它的存储方式禁止使用 nl2br 因为实际上并没有存储任何换行符，而只有 \r 等，我有点迷失了这一点，而且已经很晚了，所以......

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:15:09.237

在你的情况下 - 因为你想从输入中删除任何标记......

```
$text = strip_tags($_POST['textarea']);
$text = $mysqli->real_escape_string($text);
mysqli->query("INSERT INTO yourtable (content) VALUES ('$text')"); 
```

...但是当您想再次将其输出到浏览器时-您仍然需要适当地对其进行转义....

```
if ($result = $mysqli->use_result()) {
        while ($row = $result->fetch_assoc()) {
            print "<div>" . nl2br(htmlentities($row['content'])) . "</div>";
        }
} 
```

您对 PHP 中的数据进行任何清理的唯一时间是在它离开 PHP 时（进入数据库、进入浏览器、进入日志文件......），并且您用于转换数据的*方法*是取决于*数据的去向*

# maven - 有没有办法调试 findbugs 过滤器？

> ID：16107670
> 
> 赞同：3
> 
> 时间：2013-04-19T15:03:47.060
> 
> 标签：maven, findbugs

我正在使用 FindBugs 和 FindBugs Contrib 对我的 Java 代码进行一些静态分析。我想在我的 Findbugs 报告中过滤一些“错误”。所以我创建了一个 findbugs-exclude.xml 文件并写了以下内容：

```
<?xml version="1.0" encoding="UTF-8" ?>
<FindBugsFilter>
    <Match>
        <Class name="com.masked.out.for.stack.Overflow" />
        <Method name="myMethod" />
        <Bug pattern="DRE_DECLARED_RUNTIME_EXCEPTION" />
    </Match>
    <Match>
        <Class name="com.some.other.class.Name" />
        <Method name="getSomeProperty" />
        <Bug pattern="EI_EXPOSE_REP" />
    </Match>
</FindBugsFilter> 
```

我的报告现在排除了 EI_EXPOSE_REP 错误，但不包括 DRE_DECLARED_RUNTIME_EXCEPTION 错误。关于如何调试它的任何提示？类名和方法名是正确的。我将它们直接从报告中复制并粘贴到此文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T20:59:13.823

我没有出现错误的原因是没有正确配置 maven 插件。如果其他人正在努力过滤错误，请验证 excludeFilterFile 标记是否在插件配置中，并且它指向一个有效的文件。

# python - python中使用gdal和运行窗口方法的方差图像

> ID：16107671
> 
> 赞同：2
> 
> 时间：2013-04-19T15:03:47.880
> 
> 标签：python, window, gdal, variance

gdal中的方差图像

我想要一个使用 python 的具有 3x3 地理空间光栅图像的局部方差图像。到目前为止，我的方法是将光栅带作为数组读取，然后使用矩阵表示法运行移动窗口并将数组写入新的光栅图像。这种方法适用于本教程中描述的高通滤波器：http: [//www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_slides6.pdf](http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_slides6.pdf)

然后我尝试用几种方法计算方差，最后一种方法使用 numpy（作为 np），但我只是得到一个到处都有相同值的灰色图像。我对任何类型的解决方案持开放态度。如果它最终给了我平均局部方差，那就更好了。

```
 rows = srcDS.RasterYSize
 #read in as array
 data = srcBand.ReadAsArray(0,0, cols, rows).astype(np.int)

 #calculate the variance for a 3x3 window
 outVariance = np.zeros((rows, cols), np.float)
 outVariance[1:rows-1,1:cols-1] = np.var([(data[0:rows-2,0:cols-2]),
   (data[0:rows-2,1:cols-1]),
   (data[0:rows-2,2:cols]  ),
   (data[1:rows-1,0:cols-2]),
   (data[1:rows-1,1:cols-1]),
   (data[1:rows-1,2:cols]  ),
   (data[2:rows,0:cols-2]  ),
   (data[2:rows,1:cols-1]  ),
   (data[2:rows,2:cols]    )])
 #output 
 outDS = driver.Create(outFN, cols, rows, 1, GDT_Float32)
 outDS.SetGeoTransform(srcDS.GetGeoTransform())
 outDS.SetProjection(srcDS.GetProjection())
 outBand = outDS.GetRasterBand(1)
 outBand.WriteArray(outVariance,0,0)
 ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T07:11:13.587

您可以尝试 Scipy，它具有在阵列上运行本地过滤器的功能。

```
from scipy import ndimage

outVariance = ndimage.generic_filter(data, np.var, size=3) 
```

它有一个'mode='关键字来说明应该如何处理边缘。

编辑：

你可以自己测试一下，声明一个 3x3 数组：

```
a = np.random.rand(3,3)
a

[[ 0.01869967  0.14037373  0.32960675]
 [ 0.17213158  0.35287243  0.13498175]
 [ 0.29511881  0.46387688  0.89359801]] 
```

对于 3x3 窗口，数组中心单元的方差将简单地为：

```
print np.var(a)
0.058884734425985602 
```

该值应该等于 Scipy 返回数组的中心单元格：

```
print ndimage.generic_filter(a, np.var, size=3)
print ndimage.generic_filter(a, np.var, size=(3,3))
print ndimage.generic_filter(a, np.var, footprint=np.ones((3,3)))

[[ 0.01127325  0.01465338  0.00959321]
 [ 0.02001052  0.05888473  0.07897385]
 [ 0.00978547  0.06966683  0.09633447]] 
```

请注意，数组中的所有其他值都是“边缘值”，因此结果取决于 Scipy 如何处理边缘。它默认为`mode='reflect'`.

有关更多详细信息，请参阅文档：http: [//docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.filters.generic_filter.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.filters.generic_filter.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-03T15:02:19.070

更简单的解决方案也更快：使用统一和此处解释的“方差技巧”：http: [//imagej.net/Integral_Image_Filters](http://imagej.net/Integral_Image_Filters)（方差是“平方和”和“平方和”之间的差异）

```
import numpy as np
from scipy import ndimage 
rows, cols = 500, 500
win_rows, win_cols = 5, 5

img = np.random.rand(rows, cols)
win_mean = ndimage.uniform_filter(img,(win_rows,win_cols))
win_sqr_mean = ndimage.uniform_filter(img**2,(win_rows,win_cols))
win_var = win_sqr_mean - win_mean**2 
```

generic_filter 比 strides 慢 40 倍......

# c# - 表单身份验证 - 子文件夹 Web.Config 不起作用

> ID：16107672
> 
> 赞同：0
> 
> 时间：2013-04-19T15:03:48.470
> 
> 标签：c#, asp.net, forms-authentication

我需要在我的网站中设置一个只有特定用户可以查看的区域。

我所做的是创建一个视频文件夹。在该文件夹下，我有一个名为 Login 的文件夹和另一个名为 WatchVid 的文件夹。在登录文件夹中，我有一个名为 Login.aspx 的页面。用户登录后，他们将转到 /WatchVid/Watch.aspx 下面是一个表示：

```
 Video Folder
      |
      | 
      ----> Login Folder
      |        |
      |        |  
      |        ---> Login.aspx 
      |
      ----> WatchVid Folder
                 |
                 |
                 --->Watch.aspx 
```

我的 WatchVid 中有以下 Web 配置文件，仅允许具有 VidUser 的角色查看页面：

```
 <?xml version="1.0"?>
    <configuration>
    <system.web>
     <authorization>
        <allow roles="VidUser" />
        <deny users="?" />
     </authorization>
    </system.web>
    </configuration> 
```

我发现即使我改变：

```
 <allow roles="VidUser" /> 

     To: 

      <allow roles="VidUser1" /> 
```

***即使***我没有 VidUser1 的角色，我仍然可以访问 Watch.aspx 页面。

难道我做错了什么？

正如下面的参考是我在用户使用他们的用户 ID 登录后使用的代码，pwd：

```
 protected void btnLogin_Click(object sender, EventArgs e)
    {
        if (Roles.IsUserInRole(txtUserName.Text, "StreamingUser"))
         {
             const string url = "~/Video/WatchVid/Watch.aspx";
             Response.Redirect(url);
         } 
```

斯蒂芬，我的根 web.config 页面中有以下内容，但仍然让我进入 Watch.aspx 页面：

```
 <location path="Video/WatchVid">
        <system.web>
          <authorization>
             <allow roles="StreamingUser1dfdfdfd" />
             <deny users="?" />
         </authorization>
       </system.web>
       </location> 
```

请注意我是如何创建一个 StreamingUser1dfdfdfd 的虚拟角色来检查它的。我仍然能够访问 Watch.aspx 页面。

**麦克风：**

我的 WatchVid 文件夹下有以下内容，但是当我使用 * 执行此操作时出现访问错误 - 知道吗？：

```
 <?xml version="1.0"?>
     <configuration>
     <system.web>
     <authorization>
        <allow roles="StreamingUser" />
        <deny users="*" />
      </authorization>
     </system.web>
     </configuration> 
```

我收到以下消息： *未经授权：由于服务器配置，登录失败。根据您提供的凭据和 Web 服务器上启用的身份验证方法，验证您是否有权查看此目录或页面。请与 Web 服务器的管理员联系以获得更多帮助。*

请记住，这仍然有效：

```
 protected void btnLogin_Click(object sender, EventArgs e)
     {
       if (Roles.IsUserInRole(txtUserName.Text, "StreamingUser"))
       {
         const string url = "~/Video/WatchVid/Watch.aspx";
         Response.Redirect(url);
       } 
```

但是现在它不会让我进入 Watch.aspx 页面，因为我得到一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:07:59.770

在最外层（根）web.config 文件中使用位置标记。

编辑以显示来自我们的一个应用程序的（改编的）工作示例：

```
<authorization>
   <allow users="?" />
</authorization>

<location path="Login.aspx">
  <system.web>
   <authorization>
      <allow users="*" />
   </authorization>
  </system.web>
</location>

<location path="Videos/WatchVid">
  <system.web>
   <authorization>
      <allow roles="VidUser" />
      <deny users="?" />
   </authorization>
  </system.web>
</location> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:46:47.333

你会想要改变

```
<deny users="?"/> 
```

至

```
<deny users="*"/> 
```

`*`意味着它被拒绝给每个人。然后，您`allow roles`可以担任正确的角色。

`?`表示拒绝未经身份验证的用户。由于您已通过身份验证，因此您不会被拒绝。

# java - 什么 Java 库可以将 PostgreSQL 数组字面量映射到 Java 数组或列表？

> ID：16107674
> 
> 赞同：3
> 
> 时间：2013-04-19T15:03:55.963
> 
> 标签：java, arrays, postgresql

哪些第三方 Java 类库可用于将[PostgreSQL 数组文字](http://www.postgresql.org/docs/9.2/static/arrays.html)字符串映射到 Java 数组或字符串列表？

例如，假设我希望转换一个 PostgreSQL 数组文字字符串，例如

```
{ A, B, C } 
```

进入等效的 Java`List<String>`或`Array<String>`包含`{ "A", "B", "C" }`. [PostgreSQL JDBC 驱动程序](http://jdbc.postgresql.org/)是否有一个类方法来执行这种转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T10:26:29.430

`java.sql.Array`当您可以从 PgJDBC中获取 a 并调用它以直接获取本机 Java 数组时，为什么要在 Java 中解析数组字符串文字`getArray()`？

在 Java 中解析数组文字似乎是一种不必要的复杂方法。

由于您从 获取值作为数组文字`hstore`，我想说您有一点数据模型设计问题，因为 hstore 实际上只存储字符串值，因此存储数组文字有点难看。我可以理解，在某些情况下它可能是可取的，至少在 Pg 获得改进的`json`支持之前。

在这种情况下，我会让 PostgreSQL 为您解析数组文字。给定设置：

```
regress=# CREATE EXTENSION hstore;
CREATE EXTENSION
regress=# CREATE TABLE hstoretest ( test hstore );
CREATE TABLE
regress=# INSERT INTO hstoretest(test) VALUES ( hstore( ARRAY['a', 'b'], ARRAY[ ARRAY[1,2,3]::text, ARRAY[9,8,7]::text ] ) );
INSERT 0 1
regress=# INSERT INTO hstoretest(test) VALUES ( hstore( ARRAY['a', 'b'], ARRAY[ ARRAY[11,12,13]::text, ARRAY[99,88,77]::text ] ) );
INSERT 0 1
regress=# SELECT * FROM hstoretest ;
                 test                 
--------------------------------------
 "a"=>"{1,2,3}", "b"=>"{9,8,7}"
 "a"=>"{11,12,13}", "b"=>"{99,88,77}"
(2 rows) 
```

您可以让 Pg 为您扩展和解析数组文字，例如：

```
regress=# SELECT k, fetchval(test,k)::integer[] FROM (SELECT test, skeys(test) AS k FROM hstoretest) withkeys;
 k |  fetchval  
---+------------
 a | {11,12,13}
 b | {99,88,77}
 a | {1,2,3}
 b | {9,8,7}
(4 rows) 
```

您可能需要或多或少复杂的变体，具体取决于您是仅获取一个 hstore 字段还是多个字段，您的所有值是否都是相同类型的数组等。在某些情况下，您需要执行单独的 SQL 调用解包值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:29:32.233

是的，它有。看看：[http](http://www.postgresql.org/message-id/49107A7D.3050206@gmail.com) ://www.postgresql.org/message-id/49107A7D.3050206@gmail.com 。[这里](http://tech.valgog.com/2009/02/passing-arrays-to-postgresql-database.html)还有一篇有趣的文章。那篇文章有一个评论链接到 GitHub (sproc-spring-mapper) 上一个有趣的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-12T01:25:55.580

对于谁需要从逻辑复制（pgoutput）中解析数组值：在这种情况下，在Craig Ringer的回答中使用sql方式非常好/熟悉/高性能，所以我写了一个[类](https://gist.github.com/alex-lx/d67743fa1b676f5df8c19525b20fe1fd)来解析它。

# tfs - TFS2012：CommonConfiguration 能否支持基于 Web 访问的团队设置？

> ID：16107675
> 
> 赞同：0
> 
> 时间：2013-04-19T15:03:56.753
> 
> 标签：tfs

板：**工作/待办事项/产品待办事项/板**（*故事/待办事项*）和**工作/板**（*任务*）我们可以为每个团队设置不同的列映射吗？目前类型 - 值对存储在 CommonConfiguration 中，所以它是基于项目的，我们可以将其更改为团队相关的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:17:01.607

这完全取决于您正在进行的更新（如果您使用的是本地 TFS）。如果您的 TFS 部署是 Update 2 或更高版本 - 或者您正在使用 TFService - 您可以自定义“看板”（显示积压工作项的板），链接在这里：http: [//blogs.msdn.com/b /bharry/archive/2013/02/01/customizable-kanban-swim-lanes.aspx](http://blogs.msdn.com/b/bharry/archive/2013/02/01/customizable-kanban-swim-lanes.aspx)。这允许您更改每个团队的列，而无需更改工作项本身的工作流程。

至于任务板，您可以自定义它，但仅限于整个团队项目。这也必须通过 CommonConfiguration 文件完成。

# javascript - Javascript 相当于 Python 的 dict.setdefault？

> ID：16107680
> 
> 赞同：31
> 
> 时间：2013-04-19T15:04:09.200
> 
> 标签：javascript, dictionary

在 Python 中，对于字典`d`，

```
d.setdefault('key', value) 
```

设置`d['key'] = value`if `'key'`was not in `d`，否则保持原样。

是否有一种干净、惯用的方式在 Javascript 对象上执行此操作，或者是否需要`if`声明？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-19T15:58:42.890

```
if (!('key' in d)) d.key = value; 
```

或者

```
'key' in d || (d.key = value); 
```

（最后一个使用[条件表达式的短路行为](https://stackoverflow.com/questions/1930499/does-a-javascript-if-statement-with-multiple-conditions-test-all-of-them)。）

* * *

`d.key || (d.key = value)`另一个答案中建议的“ ”是错误的：如果一个元素存在但计算结果为`false`( [`false`, `null`, `0`, `-0`, `""`, `undefined`,`NaN`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean#Description) )，它将被静默覆盖。

*   虽然这可能是有意的，但很可能并非针对*所有*上述情况。因此，在这种情况下，请分别检查这些值：

    ```
    if (!('key' in d) || d.key === null) d.key = value; 
    ```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-19T15:06:40.070

它基本上就像使用一个`if`语句，但更短：

```
d.key || (d.key = value); 
```

或者

```
d.key = d.key || value; 
```

更新：正如@bobtato 所指出的，如果属性已经设置为`false`它将覆盖它的值，那么更好的方法是：

```
!d.key && d.key !== false && (d.key = value); 
```

或者，按照他的建议去做（只是简写版本）：

```
'key' in d || (d.key = value);

// including overwriting null values:

('key' in d && d.key !== null) || (d.key = value); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-05T20:29:21.827

没有内置任何东西，但是这个函数可以做到：

```
function setDefault(obj, prop, deflt) {
  return obj.hasOwnProperty(prop) ? obj[prop] : (obj[prop] = deflt);
} 
```

If`obj`将只包含非虚假值，`obj[prop] || (obj[prop] = deflt)`是一个很好的简单替代方案（但`deflt`会覆盖任何虚假值）。这有一个额外的优势，即`deflt`只有在需要它的值时才会被评估，所以它是一个昂贵的表达式是可以的。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-10-30T13:05:39.497

现在你也可以做`d.key ??= value`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-02-22T19:58:22.360

不推荐，也不是增加内置类的好主意。相反，最好创建自己的内置类实现，就像 YUI 库所做的（YArray 等）一样。但是，我要反驳这一点，因为我经常发现像这样实现有用的捷径对于编写干净的可维护代码是有好处的：

```
if (undefined === Object.prototype.setdefault) {
    Object.prototype.setdefault = function(key, def) {
        if (! this.hasOwnProperty(key)) {
            this[key] = def;
        }
        return this[key];
    };
} 
```

所以让我们看看它的实际效果......

```
var a = {};

a.setdefault('mylist', []).push(1);
a.setdefault('mylist', []).push(2);

console.log(a.mylist.toString());
    1,2 
```

正如已经指出的那样，使用它从来都不是一个好主意，`thing = thing || defaultThing`因为它只测试`true`, or的非类型相等性`thing == true`。与类型相等相反：`thing === true`或`thing !== undefined`. 因此，以内联方式正确编码的唯一方法是`setdefault`在任何地方使用此代码段：

```
/* null == thing is equivalent to... */
if (undefined !== thing && null !== thing) {
    thing = defaultThing;
}
/* ...but it's not explicit and linters don't like it! */ 
```

但正如我已经说过的，这只会给你的代码增加臃肿，并且容易出现从“复制粘贴”综合症中获得的错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-19T15:13:34.790

```
a={}
key='3'
value = 2
a[key] = a[key] == undefined ? value : a[key]

## a = {'3': 2 } 
```

# java - Java Object Reference 发布不当

> ID：16107683
> 
> 赞同：26
> 
> 时间：2013-04-19T15:04:23.597
> 
> 标签：java, concurrency

下面的示例来自 Brian Goetz 的《Java Concurrency in Practice》一书，第 3 章，第 3.5.1 节。这是对象发布不当的示例：

```
class SomeClass {
    public Holder holder;

    public void initialize() {
        holder = new Holder(42);
    }
}

public class Holder {
  private int n;
  public Holder(int n) { this.n = n; }

  public void assertSanity() {
    if (n != n)
      throw new AssertionError("This statement is false");
  }
} 
```

它表示 Holder 可能会以不一致的状态出现在另一个线程中，并且另一个线程可以观察到部分构造的对象。这怎么可能发生？你能用上面的例子给出一个场景吗？

它还继续说，在某些情况下，线程第一次读取字段时可能会看到一个陈旧的值，然后下次读取一个更新的值，这就是`assertSanity`can throw的原因`AssertionError`。怎么能`AssertionError`扔？

通过进一步阅读，解决此问题的一种方法是`Holder`通过将变量设为`n`final 来使其不可变。现在，让我们假设它`Holder`不是不可变的，但实际上是不可变的。

为了安全地发布这个对象，我们是否必须使持有者初始化为静态并将其声明为 volatile（静态初始化和 volatile 或只是 volatile）？

像这样的东西：

```
public class SomeClass {
    public static volatile Holder holder = new Holder(42);
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-19T15:48:46.790

你可以想象一个对象的创建有许多非原子函数。首先你要初始化并发布 Holder。但是您还需要初始化所有私有成员字段并发布它们。

好吧，JMM 没有规定`holder`' 的成员字段的写入和发布在字段写入之前`holder`发生在`initialize()`. 这意味着即使`holder`不为空，成员字段对其他线程不可见也是合法的。

你最终可能会看到类似的东西

```
public class Holder {
    String someString = "foo";
    int someInt = 10;
} 
```

`holder`可能不为空，但`someString`可以为空，`someInt`也可以为 0。

据我所知，在 x86 架构下，这是不可能发生的，但在其他架构中可能并非如此。

所以下一个问题可能是“*为什么 volatile 解决了这个问题？* ” JMM 说在 volatile 存储之前发生的所有写入对 volatile 字段的所有后续线程都是可见的。

因此，如果`holder`是 volatile 并且您看到`holder`的不是 null，则根据 volatile 规则，所有字段都将被初始化。

> 为了安全地发布这个对象，我们是否必须使持有者初始化为静态并将其声明为 volatile

是的，因为正如我提到的，如果`holder`变量不为空，那么所有写入都是可见的。

> 怎么能`AssertionError`扔？

如果一个线程注意到`holder`不为空，并且`AssertionError`在进入方法时调用并且`n`第一次读取可能是`0`（默认值），那么第二次读取`n`现在可能会看到来自第一个线程的写入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T16:11:40.790

```
public class Holder {
  private int n;
  public Holder(int n) { this.n = n; }

  public void assertSanity() {
    if (n!=n)
      throw new AssertionError("This statement is false");
  }
} 
```

假设一个线程创建 的实例`Holder`，并将引用传递给另一个调用`assertSanity`.

构造函数中的赋值`this.n`发生在一个线程中。并且两次读取`n`发生在另一个线程中。这里唯一的发生前关系是两个读取之间的关系。没有涉及分配和任何读取的发生之前的关系。

没有任何happens-before关系，语句可以以各种方式重新排序，因此从一个线程的角度来看，`this.n = n`可以在构造函数返回之后发生。

这意味着赋值可能出现在第一次读取之后和第二次读取之前的第二个线程中，从而导致值不一致。可以通过设置`n`final 来防止这种情况，这保证了在构造函数完成之前分配了值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-13T13:59:22.737

您问的问题是由 JVM 优化和简单对象创建的事实引起的：

```
MyClass obj = new MyClass() 
```

并不总是按步骤完成：

1.  在堆上为 MyClass 的新实例保留内存
2.  执行构造函数以设置内部属性值
3.  将“obj”引用设置为堆上的地址

出于某些优化目的，JVM 可以通过以下步骤进行：

1.  在堆上为 MyClass 的新实例保留内存
2.  将“obj”引用设置为堆上的地址
3.  执行构造函数以设置内部属性值

所以，想象一下如果两个线程想要访问 MyClass 对象。第一个创建它，但由于 JVM，它执行“优化”的一组步骤。如果它只执行第 1 步和第 2 步（但不会执行第 3 步），那么我们可能会遇到严重的问题。如果第二个线程使用这个对象（它不会为空，因为它已经指向堆上保留的内存部分），那么它的属性将不正确，这可能会导致令人讨厌的事情。

如果引用不稳定，则不会发生这种优化。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-19T16:00:54.560

该类`Holder`没问题，但该类`someClass`可能出现在不一致的状态 - 在创建和对`initialize()`实例`holder`变量的调用之间是`null`.

# javascript - 使用原型删除确切的文本

> ID：16107684
> 
> 赞同：0
> 
> 时间：2013-04-19T15:04:23.657
> 
> 标签：javascript, prototypejs

我有这种情况：

```
name.update(name.innerHTML + "<br /><div id='clearselection' style='color:red;padding-left:5px;font-size:11px;'>[ Clear Selection ]</div>"); 
```

我需要删除 break 和它之后的 div 。我尝试使用：

```
selector.down(div).remove(); 
```

但它没有用。不，我不能使用 jQuery :( 它必须是原型。有什么想法吗？

我基本上得到以下结果：

```
<span>test<br /><div id='clearselection' style='color:red;padding-left:5px;font-size:11px;'>[ Clear Selection ]</div></span> 
```

但后来我需要回到：

```
<span>test</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T22:36:13.730

你的问题不清楚，但是：

1.  您不能真正使用 Prototype.js 对 .innerHTML 注入的字符串进行操作，因为它们不会被注册为 DOM 元素。而不是`name.update(name.innerHTML +...)`，例如，包括 scriptaculous Builder 并使用一些东西`name.insert({ bottom: Builder.node('div', { id: clearselection, style: 'color:red;padding-left:5px;font-size:11px;' }, [ '[Clear Selection]']) });`

2.  如果要删除字符串中的某些内容，可以使用`string = string.gsub(/regex_pattern/, '');`（在较低的 MSIE 中使用`null`而不是可能会失败）`''`

3.  如果您只想清除空格，可以使用 Prototype 方法`Element.cleanWhitespace()`，[http://api.prototypejs.org/dom/Element/prototype/cleanWhitespace/](http://api.prototypejs.org/dom/Element/prototype/cleanWhitespace/)

顺便说一句... **prototype.js > jQuery**当你只想要**实用程序框架**时。总是。

# wso2 - WSO2 MessageBroker：创建持久订阅者时抛出 org.wso2.andes.AMQTimeoutException 错误

> ID：16107685
> 
> 赞同：0
> 
> 时间：2013-04-19T15:04:23.437
> 
> 标签：wso2, wso2esb, messagebroker, jms-topic

我有一个充当订阅者的代码。我创建了持久订阅者。所以由于这个原因，我得到了例外

```
Exception in thread "main" javax.jms.JMSException: Error registering consumer: org.wso2.andes.AMQTimeoutException: Server did not respond in a timely fashion [error code 408: Request Timeout]
    at org.wso2.andes.client.AMQSession$4.execute(AMQSession.java:2054)
    at org.wso2.andes.client.AMQSession$4.execute(AMQSession.java:1997)
    at org.wso2.andes.client.AMQConnectionDelegate_8_0.executeRetrySupport(AMQConnectionDelegate_8_0.java:305)
    at org.wso2.andes.client.AMQConnection.executeRetrySupport(AMQConnection.java:621)
    at org.wso2.andes.client.failover.FailoverRetrySupport.execute(FailoverRetrySupport.java:102)
    at org.wso2.andes.client.AMQSession.createConsumerImpl(AMQSession.java:1995)
    at org.wso2.andes.client.AMQSession.createConsumer(AMQSession.java:993)
    at org.wso2.andes.client.AMQSession.createDurableSubscriber(AMQSession.java:1142)
    at org.wso2.andes.client.AMQSession.createDurableSubscriber(AMQSession.java:1042)
    at org.wso2.andes.client.AMQTopicSessionAdaptor.createDurableSubscriber(AMQTopicSessionAdaptor.java:73)
    at xml.parser.Parser.subscribe(Parser.java:62)
    at xml.parser.Parser.main(Parser.java:34) 
```

但是当我创建普通订阅者时，我的代码运行良好并且没有错误。为什么我收到此错误？还有一个问题-我如何退订该主题？

我的订阅者代码是：

```
package xml.parser;

import org.w3c.dom.*;
import javax.xml.xpath.*;
import javax.xml.namespace.NamespaceContext;
import javax.xml.parsers.*;

import java.io.IOException;
import org.xml.sax.SAXException;
import javax.jms.*;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import java.util.Properties;

public class Parser {

    public static final String QPID_ICF = "org.wso2.andes.jndi.PropertiesFileInitialContextFactory";
    private static final String CF_NAME_PREFIX = "connectionfactory.";
    private static final String CF_NAME = "qpidConnectionfactory";
    String userName = "admin";
    String password = "admin";
    private static String CARBON_CLIENT_ID = "carbon";
    private static String CARBON_VIRTUAL_HOST_NAME = "carbon";
    private static String CARBON_DEFAULT_HOSTNAME = "localhost";
    private static String CARBON_BROKER_PORT = "5673";
    String topicName = "myTopic";

    public static void main(String[] args) throws NamingException,
            JMSException, XPathExpressionException,
            ParserConfigurationException, SAXException, IOException {

        Parser queueReceiver = new Parser();
        String message = queueReceiver.subscribe();

        System.out.println("Got message from Queue ==> " + message);
    }

    public String subscribe() throws NamingException, JMSException {

        String messageContent = "";
        Properties properties = new Properties();
        properties.put(Context.INITIAL_CONTEXT_FACTORY, QPID_ICF);
        properties.put(CF_NAME_PREFIX + CF_NAME,
                getTCPConnectionURL(userName, password));
        properties.put("topic." + topicName, topicName);
        System.out.println("getTCPConnectionURL(userName,password) = "
                + getTCPConnectionURL(userName, password));
        InitialContext ctx = new InitialContext(properties);
        // Lookup connection factory
        TopicConnectionFactory connFactory = (TopicConnectionFactory) ctx
                .lookup(CF_NAME);
        TopicConnection topicConnection = connFactory.createTopicConnection();
        topicConnection.start();
        TopicSession topicSession = topicConnection.createTopicSession(false,
                QueueSession.AUTO_ACKNOWLEDGE);
        // Send message
        // Topic topic = topicSession.createTopic(topicName);
        Topic topic = (Topic) ctx.lookup(topicName);

        javax.jms.TopicSubscriber topicSubscriber = topicSession
                .createDurableSubscriber(topic,"topicQueue");
        Message message = topicSubscriber.receive();
        if (message instanceof TextMessage) {
            TextMessage textMessage = (TextMessage) message;
            System.out.println("textMessage.getText() = "
                    + textMessage.getText());
            messageContent = textMessage.getText();
        }
        topicSubscriber.close();
        topicSession.close();
        topicConnection.stop();
        topicConnection.close();

        return messageContent;
    }

    public String getTCPConnectionURL(String username, String password) {
        return new StringBuffer().append("amqp://").append(username)
                .append(":").append(password).append("@")
                .append(CARBON_CLIENT_ID).append("/")
                .append(CARBON_VIRTUAL_HOST_NAME).append("?brokerlist='tcp://")
                .append(CARBON_DEFAULT_HOSTNAME).append(":")
                .append(CARBON_BROKER_PORT).append("'").toString();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:28:35.967

这是具有持久订阅者的 MB 2.0.1 发行版中的一个问题。原因是当 Parser 类第一次运行时，收到一条消息，订阅者停止，然后当你第二次启动 Parser 时，它无法重新启动订阅，因为之前的“订阅者”条目仍然存在，您将在终端中看到以下内容。客户端将在几次尝试后超时，这就是您收到错误日志的原因。

```
[2013-04-22 12:12:52,617]  INFO {org.wso2.andes.server.protocol.AMQProtocolEngine} -  Closing channel due to: Cannot subscribe to queue carbon:topicQueue as it already has an existing exclusive consumer
[2013-04-22 12:12:52,621]  INFO {org.wso2.andes.server.protocol.AMQProtocolEngine} -  Channel[1] awaiting closure - processing close-ok
[2013-04-22 12:12:52,621]  INFO {org.wso2.andes.server.handler.ChannelCloseOkHandler} -  Received channel-close-ok for channel-id 1 
```

此问题已在 MB 2.1.0 版本中修复，预计将在未来几周内发布。如果您需要，请从[此处](http://dist.wso2.org/downloads/message-broker/2.1.0/alpha/wso2mb-2.1.0.zip)尝试使用 MB 2.1.0-Alpha 版本的示例订阅者。这应该适用于该包。

关于退订一个主题，将以下行添加到您的 Parser 代码中，并在您需要退订时运行回来。

```
topicSubscriber.close();
**topicSession.unsubscribe("topicQueue"); // add the name used to   identify the subscription in the place of "topicQueue"**
topicSession.close();
topicConnection.stop();
topicConnection.close(); 
```

# facebook - Facebook登录按钮坏了？

> ID：16107688
> 
> 赞同：2
> 
> 时间：2013-04-19T15:04:29.340
> 
> 标签：facebook, button, facebook-javascript-sdk, facebook-login, facebook-social-plugins

我有几个 facebook 按钮，它们显示为纯文本。我不知道为什么。它突然发生了，我没有更改代码。所有浏览器都将其显示为纯文本。我的代码是：

```
 <div id="fb-root"></div>
  <script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : '<?php echo AppInfo::appID(); ?>',                        // App ID from the app dashboard
      channelUrl : '//<?php echo $_SERVER["HTTP_HOST"]; ?>/channel.html', // Channel file for x-domain comms
      status     : true,                                 // Check Facebook Login status
      xfbml      : true                                  // Look for social plugins on the page
    });

    // Additional initialization code such as adding Event Listeners goes here
  };

  // Load the SDK asynchronously
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=MY_APP_ID";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

 </script>
    <ul>
      <li><fb:login-button scope="user_map" id="get_map" onclick="self.location=http://localhost:8080/savefunctions.php?runFunction=getLikes">Get Map</fb:login-button></li>
      <li><fb:login-button scope="user_groups" id="get_acc" onclick="self.location=http://localhost:8080/savefunctions.php?runFunction=getLikes">Get your account info</fb:login-button>
        <div class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1">Gica</div></li>
      <li><fb:login-button scope="user_apps" id="like_acc" onclick="self.location=http://localhost:8080/savefunctions.php?runFunction=getLikes">Get apps</fb:login-button></li>
      <li><fb:login-button scope="user_groups" id="get_all"  onclick="http://localhost:8080/savefunctions.php?runFunction=getLikes">Get All</fb:login-button></li>
    </ul> 
```

请忽略`onClick`.
请注意，我同时尝试了`<fb:login-button>`和`<div class="fb-login-button">`。它们都显示为纯文本。

# django - Django：如何在查看请求之外获取已登录的用户？

> ID：16107695
> 
> 赞同：2
> 
> 时间：2013-04-19T15:04:52.170
> 
> 标签：django, request, django-users, userinfo, django-login

我有一个需要登录用户信息的类方法（在视图之外）。如何在不将*请求*传递给方法的情况下检索登录用户？不幸的是，我找不到一个好的解决方案，而且不存在这样的方法是不合逻辑的，因为 Django 应该将登录用户存储在某个地方。否则（我相信）不可能使用`@login_required`来自`django.contrib.auth.decorators`. 正确的？

所以如果不可能，为什么不呢？如果我唯一想要的是登录用户而不是里面的所有信息，为什么 Django 会这样工作`request`？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:20:15.627

关于装饰器，这是错误的。实际上使用请求参数调用的装饰器。

我相信更好的方法是将用户或请求对象传递给类的方法。但是还有其他方法可以访问请求。

这是我们使用的代码。您需要将此中间件添加到 MIDDLEWARES。并导入和调用 get_request 函数。

**2017 年 7 月更新：**使用 Python 3.6.1 和 Django 1.10.7 进行测试，基于此答案的原始代码和[*编写您自己的中间件*](https://docs.djangoproject.com/en/1.10/topics/http/middleware/#writing-your-own-middleware)文档。

*   首先创建一个新的应用程序，即。`startapp request_middleware`.
*   然后添加`"request_middleware"`到您`INSTALLED_APPS`的`settings.py`.
*   之后粘贴下面的代码，即。`request_middleware.middleware.py`.
*   最后添加`"request_middleware.middleware.RequestMiddleware"`到您的`MIDDLEWARE`in `settings.py`（在我的情况下，我已将它放在列表之间`'debug_toolbar.middleware.DebugToolbarMiddleware'`，并且`'django.middleware.security.SecurityMiddleware'`尽可能位于列表上方）。

* * *

```
# request_middleware.middleware.py

from threading import current_thread

_REQUESTS = {}

class RequestNotFound(Exception):
    def __init__(self, message):
        self.message = message

def get_request():
    thread = current_thread()
    if thread not in _REQUESTS:
        raise RequestNotFound('global request error')
    else:
        return _REQUESTS[thread]

class RequestMiddleware(object):
    def __init__(self, get_response):
        self.get_response = get_response

    def process_request(self, request):
        _REQUESTS[current_thread()] = request

    def __call__(self, request):
        self.process_request(request)
        response = self.get_response(request)

        return response 
```

之后，只需在您的代码`from request_middleware.middleware import get_request`中使用即可。`get_request`

# ant - javac的Ant属性重复

> ID：16107696
> 
> 赞同：2
> 
> 时间：2013-04-19T15:04:55.247
> 
> 标签：ant, javac, code-duplication

我有一个包含很多 javac 任务的 Ant 构建。我希望所有这些都使用以下属性执行：

```
debug = "true" debuglevel = "lines,vars,source" 
```

（默认情况下调试信息是关闭的，这使得调查控制台变得更加困难）。

是否可以在某个集中的地方提供这样的属性，这些属性会对当前 Ant 构建中的所有 javac 任务产生影响？（我不想在所有 javac 任务中复制它们......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:26:43.997

你需要ant的[presetdef](http://ant.apache.org/manual/Tasks/presetdef.html)

从例子

```
<presetdef name="my.javac">
   <javac debug="${debug}" deprecation="${deprecation}"
          srcdir="${src.dir}" destdir="${classes.dir}">
      <src path="${gen.dir}"/>
   </javac>
</presetdef> 
```

而不是`my.javac`，你可以把`javac`.

您可以在一个构建文件中定义它并在其他任何地方导入。

# c# - 多行字符串变量

> ID：16107697
> 
> 赞同：35
> 
> 时间：2013-04-19T15:05:00.753
> 
> 标签：c#, .net, vb.net, string

在 .Net（C# 和 VB.NET）中，如果我有这样的多行文本：

```
__   __                 _                       
\ \ / /                | |                      
 \ V /___  _   _ _ __  | |     ___   __ _  ___  
  \ // _ \| | | | '__| | |    / _ \ / _` |/ _ \ 
  | | (_) | |_| | |    | |___| (_) | (_| | (_) |
  \_/\___/ \__,_|_|    \_____/\___/ \__, |\___/ 
                                     __/ |      
                                    |___/ 
```

我可以这样设置变量吗？

```
Dim Logo As String = ("
__   __                 _                       
\ \ / /                | |                      
 \ V /___  _   _ _ __  | |     ___   __ _  ___  
  \ // _ \| | | | '__| | |    / _ \ / _` |/ _ \ 
  | | (_) | |_| | |    | |___| (_) | (_| | (_) |
  \_/\___/ \__,_|_|    \_____/\___/ \__, |\___/ 
                                     __/ |      
                                    |___/       ")

Console.WriteLine(Logo) 
```

...而不是这个：

```
 Console.WriteLine("__   __                                         ")
    Console.WriteLine("\ \ / /                | |                      ")
    Console.WriteLine(" \ V /___  _   _ _ __  | |     ___   __ _  ___  ")
    Console.WriteLine("  \ // _ \| | | | '__| | |    / _ \ / _` |/ _ \ ")
    Console.WriteLine("  | | (_) | |_| | |    | |___| (_) | (_| | (_) |")
    Console.WriteLine("  \_/\___/ \__,_|_|    \_____/\___/ \__, |\___/ ")
    Console.WriteLine("                                     __/ |      ")
    Console.WriteLine("                                    |___/       ") 
```

...或者这个：

```
 Dim Logo As String = ( _
"__   __                 _                       " & vbNewLine & _
"\ \ / /                | |                      " & vbNewLine & _
" \ V /___  _   _ _ __  | |     ___   __ _  ___  " & vbNewLine & _
"  \ // _ \| | | | '__| | |    / _ \ / _` |/ _ \ " & vbNewLine & _
"  | | (_) | |_| | |    | |___| (_) | (_| | (_) |" & vbNewLine & _
"  \_/\___/ \__,_|_|    \_____/\___/ \__, |\___/ " & vbNewLine & _
"                                     __/ |      " & vbNewLine & _
"                                    |___/       ") 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-19T15:08:30.767

您（最初）将此标记为 c#，但显示 VB 代码。对于 c#：使用说明`@`符：

```
string myText =
@"line 1
line 2
line 3" 
```

请注意，如果您不希望在字符串的开头有一个空行，请确保将 与`@"`文本的第一行放在同一行，就像我在上面所做的那样。

对于 VB.NET，没有对此的直接支持，但您可以使用[这个答案](https://stackoverflow.com/a/1674434/55487)中的好技巧来解决它：

```
Dim s As String = <a>line 1
line 2
line 3</a>.Value 
```

还要考虑创建一个字符串资源；您可以在其中添加换行符（确保您使用 shift-enter，根据[此答案](https://stackoverflow.com/a/931499/55487)中的注释），然后使用类似于

```
Dim myString As String = My.Resources.MyString 
```

* * *

Visual Studio 2015 更新：显然 vb.net 是这里的难题，但从 VS2015 开始，它以类似于 c# 逐字字符串的方式支持多行字符串，但没有前面的`@`.

请注意，嵌入在字符串中的行终止符是您选择的编辑器提供的实际行终止符。对于 VS，这是`\r\n`.

例子：

![在此处输入图像描述](https://i.stack.imgur.com/95Jkpm.png)

来源[在这里](http://blogs.msdn.com/b/vbteam/archive/2014/12/09/new-language-features-in-visual-basic-14.aspx)。

对于VS2015 / C# 6 中引入的新[插值字符串](https://msdn.microsoft.com/en-us/library/dn961160%28v=vs.140%29.aspx?f=255&MSPPError=-2147217396)`$@`，在 C# 中为字符串添加前缀：

```
string multiline = $@"
[configuration]
name=Fred
age={age}"; 
```

在 VB.NET 中，只需省略`@`：

```
Dim multiline As String = $"
[configuration]
name=Fred
age={age}" 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-19T15:08:34.580

在 C# 中，您可以使用原始字符串 (@)，如下所示：

```
 private string Logo = @"
__   __                 _                       
\ \ / /                | |                      
 \ V /___  _   _ _ __  | |     ___   __ _  ___  
  \ // _ \| | | | '__| | |    / _ \ / _` |/ _ \ 
  | | (_) | |_| | |    | |___| (_) | (_| | (_) |
  \_/\___/ \__,_|_|    \_____/\___/ \__, |\___/ 
                                     __/ |      
                                    |___/       "; 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-19T15:10:08.933

使用逐字字符串。

该`@`符号告诉字符串构造函数忽略换行符。

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)。字符串文字与逐字字符串

例如

```
string verbatim = @"v
                    e
                    r
                    batim" 
```

你的例子

```
Dim Logo As String = (@"
__   __                 _                       
\ \ / /                | |                      
 \ V /___  _   _ _ __  | |     ___   __ _  ___  
  \ // _ \| | | | '__| | |    / _ \ / _` |/ _ \ 
  | | (_) | |_| | |    | |___| (_) | (_| | (_) |
  \_/\___/ \__,_|_|    \_____/\___/ \__, |\___/ 
                                     __/ |      
                                    |___/       ")

Console.WriteLine(Logo) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-19T15:08:08.237

是的，您应该使用`@`符号：

```
string t = @"t
e
s
t" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-19T15:09:37.030

有点儿...

它是这样完成的：

```
Dim logo = " " & vbCrLf & _
"__   __                                         " & vbCrLf & _
"\ \ / /                | |                      " & vbCrLf & _ 
```

等等

# php - 2 个 foreach 语句中的逻辑

> ID：16107701
> 
> 赞同：0
> 
> 时间：2013-04-19T15:05:13.110
> 
> 标签：php

以下代码循环遍历两个数组，`$this->userKeyword`并且`$this->userAllergens`.

```
foreach($this->userKeyword as $keyword){
    foreach($this->userAllergens as $allergens){
        if($keyword['keywordid'] != $allergens['keywordid']){
            ?>
            <label><?php echo $keyword['name'];?></label>
            <input type="checkbox" name="<?php echo $keyword['name'];?>" value="<?php echo $keyword['keywordid'];?>" /><br />
            <?php
        }
    }
} 
```

如果第一个数组包含“1”、“2”、“3”、“4”，第二个数组包含“3”和“4”，则在第二个循环内部和包含“3”的迭代中'，它将显示'1'，'2'和'4'，然后在包含'4'的迭代中将显示'1'，'2'和'3'。

我的问题是我需要更改代码，以便它仅在两个数组中都不存在值时显示。

所以在这里，我希望显示“1”和“2”，而不是“3”和“4”。

有什么建议吗？干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:10:48.293

如果我理解正确，您想要：

```
foreach($this->userKeyword as $keyword){
    if(!(in_array($keyword, $this->userAllergens, true)) {
        echo "$keyword";
    }
} 
```

您将使用该`in_array`功能。请小心，因为布尔标志会设置您是否进行严格比较，并可能导致误导性结果。

[http://php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:09:37.813

使用 array_diff，请参阅[http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)。您也可以使用 in_array() ，但 array_diff 更好

# .net - 有没有办法使用 DotNetZip 创建一个空文件夹？

> ID：16107706
> 
> 赞同：1
> 
> 时间：2013-04-19T15:05:24.300
> 
> 标签：.net, zip, dotnetzip

我正在尝试使用 DotNetZip 在 C#.NET 中创建一个 zip 文件。但是，我确实需要不时包含空文件夹。这可能吗？有什么技巧可以实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:24:06.440

有一个 AddDirectory 函数：

```
zipFile.AddDirectory("\\Your\Directory\Path\"); 
```

我相信空目录必须已经存在于您要从中压缩的位置，因此您可能需要首先在服务器上创建空目录。 [这里](http://dotnetzip.herobo.com/DNZHelp/Index.html)有一些例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T14:32:21.143

McCee 的解决方案不太适合我。然而，这确实：

首先，我们获取压缩文件路径中的所有空目录。然后我们使用 AddDirectoryByName 将其附加到 zip 对象中，即

```
foreach (var folder in Directory.GetDirectories(pathOfFilesToZip).Where(x => !Directory.EnumerateFileSystemEntries(x).Any()))
{
    zip.AddDirectoryByName(Path.GetFileName(folder));
} 
```

# azman - AZ Man On Winforms 项目的安全问题

> ID：16107707
> 
> 赞同：0
> 
> 时间：2013-04-19T15:05:26.987
> 
> 标签：azman

我正在使用企业库和 AZ Man 将用户身份验证到我的 winforms 应用程序中。我已经使用 XML 文件使代码工作正常。我不明白如何安全地部署应用程序。

在 app.config 中有一个 XML 文件的路径。似乎没有任何东西可以阻止用户在 azman.msc 中打开此 XML 文件并授予自己不应有的访问权限。

如果我们将 XML 文件放在服务器上并使其对用户只读，则没有什么可以阻止用户在本地复制所有内容并将 app.config 指针更改为他们可以写入的本地文件。

我似乎在这里缺少一些重要的东西，但我一直在阅读并且无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:13:21.123

我认为您可能想要做的是在 Active Directory 而不是 xml 文件中创建您的授权存储。[您可以在此处](http://support.microsoft.com/kb/324470)找到有关如何执行此操作的说明。这是有趣的一点：

> 使用授权存储
> 
> 创建授权存储
> 
> 1.  打开授权管理器，右键单击授权管理器，单击选项，选择开发人员模式，然后单击确定。
> 2.  在授权管理器控制台中，右键单击授权管理器，单击新建，然后单击授权存储。
> 3.  选择 Active Directory 或 XML 文件作为存储类型。
> 4.  在“商店名称”框中键入完整的商店名称，或使用“位置”按钮通过“新建授权商店”对话框选择位置。
> 5.  如果它是 Active Directory 授权存储，请使用 LDAP 名称——例如 CN=myStore,CN=Program Data,OU=Authorization,DN=myCompany,DN=com。如果它是 XML 授权存储，请使用在运行时有效的路径和文件名——例如 C:\AuthStores\MyStore.xml。
> 6.  在“说明”框中键入新授权存储的说明，然后单击“确定”。
> 
> 注意：授权商店只能在开发者模式下创建。有关设置开发人员模式的说明，请参阅本文的“设置授权管理器选项”部分。

在 Active Directory 中创建存储后，您可以限制对 AD 和 AzMan 存储具有写入权限的人员。如果您愿意，也可以在 SQL 中创建存储。

另一个选项是在 app.config 中加密与 AzMan 的连接字符串。由于您使用的是企业库，我*认为*您可以选择加密整个 AzMan xml 文件。这些都不是完全防弹的，但是您的用户将不得不经历**很多**麻烦来破解您的应用程序。但是，如果您的用户愿意付出那么多努力来闯入您的程序，那么您就没有编程问题——您有一个需要解决的人事问题（无论如何，我认为）。

[这](http://msdn.microsoft.com/en-us/library/2w117ede%28v=vs.100%29.aspx)看起来像是加密 app.config 部分的一个很好的演练。本质上，我认为这个想法是您在工作站上创建一个新的 RSA 密钥并使用该密钥来加密 app.config 部分。然后将该密钥导入服务器并授予您的用户对该密钥的读取权限。如果您使用 Google 搜索（或在 stackoverflow 上搜索），我相信还有很多其他的加密解决方案。

# html - TD 悬停不工作

> ID：16107713
> 
> 赞同：3
> 
> 时间：2013-04-19T15:06:06.477
> 
> 标签：html, css, hover, html-table

我有以下CSS：

```
 td: hover {
        background-color:red;
        }

        td {
        cursor: pointer;
        background-color: rgb(150,150,150);
        } 
```

我的 HTML 只是：

```
<table>
<tr><td> </td></tr>
</table> 
```

我无法`hover`工作。这是为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T15:29:15.860

`:hover`是一个伪选择器，所有以这样开头的`:`都是这样的（例如`:active`，`:before`等等）。

这可能与指定值混淆：

```
something: value; 
```

因此，您需要将伪选择器视为单独的对象，而不是值。

这就是为什么你需要修复你的`td: hover`，所以它看起来像`td:hover`.

请注意，如果您在之后放置一个空格，`td`如下所示：

```
td :hover { ... 
```

这等于：

```
td: *:hover { ... 
```

因此将选择所有下降的项目`td`并在悬停时对其应用样式（[请参阅此示例](http://jsfiddle.net/w46Ac/)）。

请记住，空格在 CSS 中是有意义的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T15:06:44.907

您需要删除之前的空格`:hover`：

```
td:hover {
    background-color: red;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T15:06:48.167

您只需要删除之间的空格，`td :hover`因为`<td>`没有[后代](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)..

`td:hover`将工作

[http://jsfiddle.net/xwYTa/](http://jsfiddle.net/xwYTa/)

# regex - awk - 正则表达式匹配子字符串

> ID：16107714
> 
> 赞同：2
> 
> 时间：2013-04-19T15:06:07.053
> 
> 标签：regex, string, awk

如何检查第一个字符`substr($x, 0, 1)`是否是从 A 到 L 的字母？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:13:19.150

先入

```
substr($x, 0, 1) 
```

你最好用

```
substr($x, 1, 1) 
```

因为 awk 数组、字符串 idx 等都是从 1 开始的。gawk`0`和`1`（甚至`-100)`，其他 awk 实现可能不适用于`0`案例（给你意想不到的价值）。

您可以使用正则表达式检查该字母范围，或者将它们与 进行比较`> or <`，例如：

```
awk 'BEGIN{s=substr($x,1,1);print (s>="A"&&s<="L")?"YES":"NO"}' 
```

如果你想用正则表达式检查它，你不需要这个`substr()`函数：

```
awk 'BEGIN{print ($x~/^[A-L]/)?"YES":"NO"}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:07:05.080

`~`像这样使用正则表达式匹配运算符`substr($x,0,1)~/[A-L]/`。

```
$ cat file
ABC
DEF
XYZ
123

$ awk 'substr($0,0,1)~/[A-L]/' file
ABC
DEF 
```

# validation - 没有绑定属性的条件验证

> ID：16107719
> 
> 赞同：0
> 
> 时间：2013-04-19T15:06:18.317
> 
> 标签：validation, jsf, binding, jsf-1.2, myfaces

我正在处理遗留代码库并遇到一种情况，如果其他字段“otherField”具有某些值（否则字段未验证），则需要验证字段“fieldToValidate”。但是，“otherField”字段没有绑定属性。我可以添加一个绑定，然后像这样更新代码：

```
<h:inputTextarea id="fieldToValidate" value="#{MyBean.fieldToValidate}" 
required="#{MyBean.otherField != 'special_value'}" /> 
```

但是有很多地方应该添加验证，我不想修改支持 bean。有没有办法在不添加“绑定”的情况下实现验证？

使用某些 JS 库进行验证不是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:07:17.230

您**不一定**需要将其绑定到 bean 属性。只需省略`MyBean.`直接将其绑定到视图范围的部分。

```
<h:selectOneMenu binding="#{otherField}" ... />
...
<h:inputTextarea ... required="#{otherField != 'special_value'}" /> 
```

### 也可以看看：

*   [没有 bean 属性的 JSF 组件绑定](https://stackoverflow.com/questions/8168302/jsf-component-binding-without-bean-property/)
*   [JSF 中的组件绑定是什么？何时首选使用？](https://stackoverflow.com/questions/12506679/what-is-component-binding-in-jsf-when-it-is-preferred-to-be-used/)

# java - 如果双精度为负，我如何切换？

> ID：16107723
> 
> 赞同：2
> 
> 时间：2013-04-19T15:06:35.743
> 
> 标签：java, double, toggle

我是java新手，我正在尝试创建一个android应用程序，如果你可以倾斜你的设备来旋转一个imageview。我什么都有，除了 imageview 旋转错误的方向。所以如果我的双精度数> 0，我想在它前面放一个-。但是如果它 < 0，我想删除它前面的 - 。我试过这样做：

这是变量：

```
double xaxis;
String xaxis3; 
```

这是我的代码：

```
if (xaxis < 0) {
        xaxis3 = Double.toString(xaxis);
        xaxis3 = xaxis3.replaceAll("-", "");
        double xaxis = Double.parseDouble(xaxis3);
    }

    else {
        xaxis3 = Double.toString(xaxis);
        xaxis3 = ("-" + xaxis3);
        double xaxis = Double.parseDouble(xaxis3);
    } 
```

请对我好一点，想想我是编程新手。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T15:07:38.273

嗯，我想你想要：

```
xaxis = -xaxis; 
```

但目前尚不清楚您为什么要使用字符串表示...避免字符串转换，除非您确实*需要*它们。

此外，声明一个隐藏*实例变量的新**局部*变量，并在块的末尾这样做，不会有用：

 *```
... {
    xaxis3 = Double.toString(xaxis);
    xaxis3 = ("-" + xaxis3);
    double xaxis = Double.parseDouble(xaxis3);
} 
```

你需要小心这样的事情——尽管我希望一个好的 IDE 在这种情况下警告你一个未使用的局部变量，并且希望也是重复的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:07:57.140

你有没有尝试过

```
xaxis3 = Double.toString(-xaxis); 
```

或者

```
String your_string = "" + (-xaxis); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:15:55.330

目前尚不清楚您想要实现什么，但如果您不想跨越 X 轴边界，这就是您需要的：

```
if(xaxis < 0 || xaxis > MAX_AXIS_X) {
    xaxis = -xaxis;
} 
```*

# sql - Datediff，如何不包括未来的开始日期

> ID：16107724
> 
> 赞同：0
> 
> 时间：2013-04-19T15:06:36.270
> 
> 标签：sql, tsql

我目前的查询是

```
case when datediff(day, isnull(installment_duedate, due_date), getdate()) < 30 
then amount_due else 0 end as [unpaid under 30 days] 
```

我还有另外 3 个案例，在 30-60 天之间，在 60-90 天之间，甚至超过 90 天。

我目前的问题是，我的 installment_duedate 里面有未来的日期。如果有人有分期付款到期日，则类似于**12-02-2012, 03-02-2013, 06-02-2013, 09-02-2013**。如果是在未来，我希望它现在返回为 0，但目前该金额显示在我不到 30 天的时间内。

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:09:30.930

您需要将案例更改为：

```
CASE WHEN DATEDIFF(DAY, ISNULL(installment_duedate, due_date), GETDATE()) BETWEEN 0 AND 30
     THEN amount_due ELSE 0 END AS [unpaid under 30 days] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:12:45.710

在这一行中，当 installment_duedate 是过去的日期时，[DATEDIFF](http://msdn.microsoft.com/en-us/library/ms189794.aspx)返回小于 30 的负值，因此`< 30`条件得到满足

```
datediff(day, isnull(installment_duedate, due_date), getdate()) < 30 
```

**格式**

```
DATEDIFF(datepart,startdate,enddate) 
```

有关解决方案，请参阅下面**的 Lamak**回答

# vb.net - 如何在 VB.NET 中进行 RAM 清除？

> ID：16107727
> 
> 赞同：1
> 
> 时间：2013-04-19T15:06:40.803
> 
> 标签：vb.net, memory-management, ram, purge

除了使用 Memory Streams 之外，我之前从未弄乱过内存。但我最近下载了一个“清除”内存的 RAM Cleaner。我很好奇它的工作原理和作用。我尝试在谷歌上搜索一些关于内存清理和清除的内容，但这对我来说并没有太大意义。内存清理是如何工作的？我在哪里可以了解更多信息？它是否对进程执行某种垃圾收集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:40:59.340

也许这个 API 函数可以帮助你的朋友……这个函数对我来说非常有用，因为调用 EmptyWorkingSet/SetProcessWorkingSetSize 只是在操作系统执行它之前进行清理的一种方法。

我认为这是 C# 语法...转换并在 VB.net 中尝试：

```
using System;
using System.Runtime.InteropServices;
using System.Diagnostics;

[DllImport("psapi.dll")]
public static extern bool EmptyWorkingSet(IntPtr hProcess);

    public void Clean()
    {
        // get handle to a process
        Process ThisProcess = Process.GetCurrentProcess();

        // empty as much as possible of its working set
        bool Result = EmptyWorkingSet(ThisProcess.Handle);

    } 
```

ThisProcess.Handle 是您的程序的进程句柄。

也看看这个：[MSDN Link](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682606(v=vs.85).aspx "MSDN 链接")

# php - 在 codeigniter 中转换复杂的 JOIN 查询

> ID：16107730
> 
> 赞同：3
> 
> 时间：2013-04-19T15:06:58.087
> 
> 标签：php, mysql, sql, codeigniter-2

我正在将我现有的网站转换为 CI，并且我已经尝试了几天将此查询转换为 CI 友好的代码：

```
$result = mysql_query("
    SELECT t1.mnumber, t1.mcontent, t1.mcontact
    FROM sms t1
    JOIN (
        SELECT mContent,mcontact, mnumber, MAX(mID) mID
        FROM sms
        GROUP BY mContact
    ) t2 ON t1.mcontact = t2.mcontact AND t1.mid = t2.mid
    GROUP BY t1.mContact
    ORDER BY t1.mid DESC
"); 
```

但是无论我尝试什么，我都无法在 CI 上得到正确的结果。

我希望你们能在这里帮助我！

* * *

最接近我得到的结果是当我使用子查询破解时。但是，出于沮丧，我删除了代码块并继续尝试。

我决定使用平面查询，就像上面发布的那样。这几乎给了我结果。

```
$query = $this->db->query("SELECT t1.mnumber, t1.mcontent, t1.mcontact FROM sms t1
JOIN (SELECT mContent,mcontact, mnumber, MAX(mID) mID FROM sms GROUP BY mContact) t2
ON t1.mcontact = t2.mcontact AND t1.mid = t2.mid GROUP BY t1.mContact ORDER BY t1.mid DESC");

$联系人 = 数组（）；

//向我们的数组添加数据
foreach($query->result() as $row){
     回声 $row->mNumber;
}

返回$联系人；

```

但是，在我看来，我收到通知“消息：未定义的属性：stdClass::$mNumber”

所以仍然没有结果，而且我更喜欢 CI 查询方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T18:48:14.610

你可以像这样在codeigniter中使用它

```
$query = "  SELECT t1.mnumber, t1.mcontent, t1.mcontact
            FROM sms t1
            JOIN (
                SELECT mContent,mcontact, mnumber, MAX(mID) mID
                FROM sms
                GROUP BY mContact
            ) t2 ON t1.mcontact = t2.mcontact AND t1.mid = t2.mid
            GROUP BY t1.mContact
            ORDER BY t1.mid DESC"; 
$result =   $this->db->query($query);           
return $result->result(); 
```

第二种方法

为此，您可以使用 codeigniter 的子查询方式来执行此操作，您将不得不破解 codeigniter。像这样。转到 system/database/DB_active_rec.php 从这些函数中删除 public 或 protected 关键字

```
public function _compile_select($select_override = FALSE)
public function _reset_select() 
```

现在子查询写入可用现在这是您的带有活动记录的查询

```
$select =   array(
                'mContent',
                'mcontact',
                'mnumber',
                'MAX(mID) mID'
            );
$this->db->select($select);
$this->db->from('sms');
$this->db->group_by('mContact');
$subquery = $this->db->_compile_select(); // get the query string

$this->db->_reset_select(); // reset so it can newly form the query

unset($select);
$select =   array(
                't1.mnumber',
                't1.mcontent',
                't1.mcontact'
            );
$this->db->select($select);
$this->db->join('',"($subquery)");
$this->db->from('sms t1');
$this->db->group_by('t1.mContact');
$this->db->order_by('t1.mid','DESC');
$result =   $this->db->get();
return $result->result(); 
```

事情就完成了。干杯！！！注意：在使用子查询时，您必须使用

```
$this->db->from('myTable') 
```

代替

```
$this->db->get('myTable') 
```

运行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T14:14:08.137

这可能无法完全回答您的问题，但对于那些在谷歌上搜索 a 的人`"JOIN AND"`（这样您就可以在,子句开始*之前*`AND`添加一些额外的东西），这是一种 hacky 方法：`Join`*`WHERE`*

 *```
$this->db->join('table_to_join', 'first_table.connect_id = table_to_join.id AND table_to_join.some_filter != 0'); 
```

绝对不漂亮，但这显然会迫使, 在您进入其余查询的内容之前`AND`立即发生`JOIN``WHERE``first_table`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:13:17.603

呃，那不应该是（猜测）......

```
 SELECT t1.mnumber
      , t1.mcontent
      , t1.mcontact
      , t1.mid
   FROM sms t1
   JOIN 
      ( SELECT mcontact
             , MAX(mID) mID 
          FROM sms 
         GROUP BY mContact
      ) t2
     ON t1.mcontact = t2.mcontact 
    AND t1.mid = t2.mid 
  ORDER 
     BY t1.mid DESC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-10T13:40:28.767

好吧，它很容易在 CI 版本 3+ 中实现

```
$subQuery = $this->db->select( 'table2.*' )
  ->join( 'table3', 'table3.orderId = table2.fkOrderId', 'INNER' )
  ->where()->get_compiled_select( 'table2' );

$this->db->select( 'table1.*' )
  ->join( '(' . $subQuery . ') AS b', 'b.`fkCouponId` = table1.couponId', 'LEFT', FALSE )
  ->get( 'table1' ) 
```

**提示：**确保您没有在子查询部分上方使用任何查询构建器方法。*

# objective-c - 用 enumerateObjectsUsingBlock:? 更优雅地实现 NSArray 合并

> ID：16107734
> 
> 赞同：0
> 
> 时间：2013-04-19T15:07:07.793
> 
> 标签：objective-c, nsarray, objective-c-blocks

本周我面临的挑战是与 Objective-c 中的块达成协议。有一些关于语法的东西让我印象深刻。到达那里。

我有以下代码以特定方式实现两个数组的合并（请参阅下面代码中的注释）。

```
NSArray *keys = @[@"name", @"age"];
NSArray *data = @[
                  @[@"mark", @"36 years"],
                  @[@"matt", @"35 years"],
                  @[@"zoe", @"7 years"]
                  ];

// desired outcome is
// @ {  @"name" : @[@"mark", @"matt", @"zoe"],
//      @"age"  : @[@"36 years", @"35 years", @"7 years"]
//   }

NSMutableArray *mergedData = [[NSMutableArray alloc] initWithCapacity:keys.count];

for (NSString *key in keys) {
    NSLog(@"key: %@", key);
    NSInteger keyIndex = [keys indexOfObject:key];
    NSMutableArray *dataItemsForKey = [[NSMutableArray alloc] initWithCapacity:data.count];
    for (NSArray *row in data) {
        // double check the array count for row equals the expected count for keys - otherwise we have a 'match up' issue
        if (row.count == keys.count) {
            [dataItemsForKey addObject:[row objectAtIndex:keyIndex]];
        }
    }
    [mergedData addObject:[NSDictionary dictionaryWithObject:dataItemsForKey forKey:key]];
}
NSLog (@"mergedData: %@", mergedData); 
```

虽然这段代码运行良好，但为了我的挑战和学习，我想知道是否有更“优雅”（也就是更少的代码，更容易阅读）的方式来使用`enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop)`??

我不太明白如何让它发挥作用，但为了自学，想知道那些在块和数组方面学得更多的人是否有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:28:21.967

首先要说的是您的代码没有产生所需的输出。你得到一个包含两个字典的数组，每个字典都有一个键。

解决问题的一种方法是这样的：

```
NSMutableDictionary* mergedData = [[NSMutableDictionary alloc] init];

[keys enumerateObjectsUsingBlock: ^(id key, NSUInteger keyIndex, BOOL *stop)
{
    NSMutableArray* keyValues = [[NSMutableArray alloc] init];
    for (NSArray* row in data)
    {
        [keyValues addObject: [row objectAtIndex: keyIndex]];
    }
    [mergedData setObject: keyValues forKey: key];
}]; 
```

如果一行中没有足够的对象，上面将引发异常。您可以事先检查它或让程序崩溃，这取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:28:43.837

我注意到的第一个问题是您在枚举数组时询问当前对象的索引。这是对操作的浪费，因为在每次循环迭代中，您都必须查看所有数组元素（可能为 O(N)）才能找到对象的位置。

你可以这样做：

```
for(NSUInteger i=0; i<keys.count; i++)
{
    NSString* key= keys[i];
    <Rest of the code>
} 
```

或者只是跟踪索引手动递增它：

```
NSUInteger i=0;
for (NSString *key in keys)
{
    <Your code>
    i++;
} 
```

或者像你想要的那样，使用*enumerateObjectsUsingBlock:*，这是 IMO 在这种情况下最优雅的方式。这是一个例子：

```
NSMutableDictionary* dict=[NSMutableDictionary new];
[keys enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop)
{
    NSMutableArray* fields=[NSMutableArray new];
    for(NSArray* array in data)
    {
        [fields addObject: array[idx]];
    }
    [dict setObject: fields forKey: obj];
}]; 
```

如果您还没有理解它是如何工作的，这里有一个进一步的解释：

这样，在每次执行块时，您都可以知道哪个是当前对象（*obj*）和它的索引（*idx*）。*stop*只是用来停止枚举数组，但在这种情况下你不需要它（假设你想停止枚举，你设置 *stop=YES）。在我的代码中，我只是获取了*data索引**idx*处的每个元素，并构建了一个数组，该数组是我放入字典中的值，它以*obj*（您在代码中称为*键*）作为键。如有任何进一步的疑问，请随时通过评论询问任何澄清。

# c++ - 无法处理错误（析构函数会破坏一切）

> ID：16107735
> 
> 赞同：-4
> 
> 时间：2013-04-19T15:07:08.757
> 
> 标签：c++

我面临这个问题：

```
No source available.
Call stack location: lab5.exe! Counter:: 'scalar deleting destructor'() + 0x2b bytes. 
```

我构造了一个单链表。

**计数器.h**

```
class Counter{
    private:
        char* m_pStr; 
        unsigned int m_nOwners; 
        Counter* pNext;         
        static unsigned int m_curCounters;
        static Counter* Head;   
... 
```

**计数器.cpp**

```
Counter* Counter:: Head = new Counter();
unsigned int Counter:: m_curCounters = 0;

Counter:: ~Counter(){
    if  (this == Head){
        Head = Head->pNext;
    }
    else{
        Counter* current = Head->pNext;
        for (int i = 0; i < m_curCounters; i++){
            if (current->pNext == this){
                            // Searching for counter, with next one equal this.
                current->pNext = this->pNext;
                break;
            }
            current = current ->pNext;
        }
    }
    m_curCounters--;
    delete[] this->m_pStr;
} 
```

右大括号会导致错误。在图片中：一步将我与错误屏幕和错误本身分开。

![截图 1](https://i.stack.imgur.com/uVDwn.jpg) ![截图 2](https://i.stack.imgur.com/h1iIU.jpg) ![截图 3](https://i.stack.imgur.com/ccOBd.jpg)

禁止使用 PS 矢量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:09:48.217

你的班级需要遵循**[三原则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**。
您需要提供一个复制构造函数和复制赋值运算符，它们执行动态分配的数据成员的深层副本。

或者，您可以使用智能指针而不是原始指针。这将为您节省所有显式的手动内存管理。

另外，你最好`char *`用`std::string`.

# c++ - `bool operator<(Contact&)' 必须正好有两个参数

> ID：16107736
> 
> 赞同：3
> 
> 时间：2013-04-19T15:07:12.793
> 
> 标签：c++, comparison, operator-overloading, overloading, operator-keyword

我有

```
class Conatact{
.....
bool operator<(Contact &c);
};

bool operator<(Contact &c)
{
     return this.getName<c.getName();

} 
```

它说 `bool operator<(Contact&)' 当我尝试将其更改为具有两个参数时，它必须恰好采用两个参数

```
bool operator<(Contact &c)
{
     return this.getName<c.getName();

} 
```

它说它必须只接受一个论点

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T15:09:34.760

我认为您需要通过提供完全限定名称向编译器表明它是成员实现：

```
bool Conatact::operator<(Contact &c)
{
     return this->getName() < c.getName();
} 
```

制作您的 operator`const`和制作 the是一个好主意`Contact &c` `const`。

如果没有范围解析限定符，编译器会认为您正在定义一个“独立”运算符来比较联系人，在这种情况下，该运算符确实需要采用两个参数：

```
bool operator<(const Contact &lhs, const Contact &rhs) {
    ...
} 
```

# java - 2类之间的通信

> ID：16107740
> 
> 赞同：1
> 
> 时间：2013-04-19T15:07:27.163
> 
> 标签：java

我是一个新手java程序员，我正在尝试制作我的第一个项目。

我需要在 2 个类之间传递一个变量，这很好。问题是变量有一个变化的值，我不能传递实际值。这是一个例子：

```
public class A{
    private int counter = 0;

    public int getCounter(){
        return counter;
    }

    //here some code which will increase or decrease the value of the counter variable 
    //lets say for the sake of the example that at this point the value of the variable is 1.
    //counter = 1;
}

public class B{
    public static void main(String[] args) {
        A a = new A();
        System.out.println(a.getCounter());// here I need the actual counter variable value which is currently: 1
    }
} 
```

我的问题是我总是收到 0。如何传递变量的实际值。

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:09:00.243

```
A a = new A(); 
```

在实例化（上面的语句）之后，您需要调用将在此处增加计数器的方法。

例子：

```
 a.incrementCounter(); 
```

然后下面的语句将获得计数器值。

```
 System.out.println(a.getCounter()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:13:45.023

> 为了这个例子，假设此时变量的值为 1。

不，在读取代码时，值没有改变。您在`class`-block 中所做的只是定义一个类，即对象的“模板”。那时，没有设置任何值。

您使用的`a.getCounter()`已经完成了正确的工作：它返回计数器变量的*当前*值。`a`如果它没有返回 1，那么显然这个值还没有改变。

```
public class A {
    private int counter = 0;
    public int getCounter() {
        return counter;
    }
    public void increaseCounter() {
        counter++;
    }
}

public class B {
    public static void main() {
        A a = new A();
        System.out.println(a.getCounter());
        a.increaseCounter();
        System.out.println(a.getCounter());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:11:54.560

您可以从构造函数和/或创建更改值的方法中执行此操作。

```
public class A
{
    private int counter = 0;

    public A()
    {
        // value is set first time you create an instance of A. (e.g when you do A a = new A();
        counter = 1;
    }

    public int getCounter()
    {
        return counter;
    }

    public void incrementCounter()
    {
        counter++;
    }

}

public class B
{
    public static void main(String[] args) 
    {
        A a = new A();
        System.out.println(a.getCounter());// Output : 1
        a.incrementCounter();
        System.out.println(a.getCounter());// Output : 2

        a.incrementCounter();
        a.incrementCounter();
        a.incrementCounter();
        System.out.println(a.getCounter());// Output : 5
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T15:11:39.267

```
 public static void main(String[] args) {
        A a = new A();
        a.setCounter(5);
        System.out.println(a.getCounter()); 
    }

public class A{
    private int counter = 0;

    public int getCounter(){
        return counter;
    }

      public void setCounter(int count ){
            this.counter=count;
        }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T15:12:02.640

使用构造函数/设置器...

```
public class A{
    private int counter = 0;

    public A(int c){
        counter = c
    }

    public int getCounter(){
        return counter;
    }

    public void setCounter(int c){
        counter = c;
    }

    public void incCounter(){
        counter++;
    }
}

public class B{
    public static void main(String[] args) {
        A a = new A(123);
        System.out.println(a.getCounter());

        a.setCounter(456);
        System.out.println(a.getCounter());

        a.incCounter();
        System.out.println(a.getCounter());
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T15:12:07.823

```
class A {

    private int counter = 0;

    public int getCounter() {
        return counter;
    }

    public int increment() {//////////create increment Method which will increase the counter , or do any function you want
        return counter++;
    }

    public void  setCounter(int c) {///////////this method will allow you to set the counter
        counter=c;
     }
  }

class B {

    public static void main(String[] args) {
        A a = new A();
        a.increment();///////if you call this function will change your counter , if not , you will get it = 0
        System.out.println(a.getCounter());
    }
} 
```

* * *

```
A a = new A();
System.out.println(a.getCounter()); 
```

**输出**= 0

```
A a = new A();
a.increment();
System.out.println(a.getCounter()); 
```

**输出**=1

```
 a = new A();
 a.setCounter(10);//////////here you set the `counter`  by 10
 System.out.println(a.getCounter()); 
```

**输出**=10；

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T15:31:01.213

您有一个类 (Counter) 来管理 counter int 变量。

您希望一个或多个其他类能够增加和/或获取计数器值。

在这种情况下，这些类的每个实例都应该引用**相同**的 Counter 实例（存储为成员变量，传递给它们的构造函数或 setter 方法）。

```
class Counter {
    private int counter = 0;
    public int getValue() { return counter; }
    public void increment() { counter++; }
    public String toString() { return Integer.toString(counter); }
}

class CounterUser {
    private final Counter counter;
    public CounterUser(Counter counter) { this.counter = counter; }
    public String toString() { return Integer.toString(counter.getValue()); }
}

class Test {
    public static void main(String[] args) throws Exception {
        Counter counter = new Counter();
        CounterUser a = new CounterUser(counter);
        CounterUser b = new CounterUser(counter);
        System.out.printf("%s %s %s\n", counter, a, b);
        counter.increment();
        System.out.printf("%s %s %s\n", counter, a, b);
        b.increment();
        System.out.printf("%s %s %s\n", counter, a, b);     }
} 
```

输出：

```
0 0 0
1 1 1
2 2 2 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-19T15:08:28.413

将变量设为静态，以便将其与类关联。

```
public class A{
   private static int counter = 0;

   public int getCounter(){
      counter++;
      return counter;
   } 
```

# iphone - iOS 5 中的 Facebook SDK 3.5 需要 Social.framework

> ID：16107741
> 
> 赞同：1
> 
> 时间：2013-04-19T15:07:30.523
> 
> 标签：iphone, ios, objective-c, facebook

快速提问。我正在掌握 FB SDK 3.5，我在 Facebook 网站上关注本教程：[https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)

问题是，它说 SDK 需要 Social.framework。据我所知，这在 iOS 5 上不可用。显然我可以设置一些框架，`optional`但我不知道这是否会阻止我在 iOS 5 上发布状态更新。有什么想法吗？

问候，
迈克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:07:28.040

可以使用 Facebook SDK，它需要您`Social.framework`将.

但是您确实需要包含它......所以您应该`Social.framework`在目标的构建阶段将其标记为“可选”。这意味着编译时它不会强制它。这会使您遇到没有`Social.framework`可用的 iOS 5 的问题。

![在此处输入图像描述](https://i.stack.imgur.com/0paDR.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T15:56:44.480

在iOS5使用SDK就可以了，social.framework用于iOS6的内置Facebook账号功能，在iOS5，SDK会跳过。

# sql-server-2008 - 如何在 SQL Server 2008 的存储过程中捕获错误并回滚一次事务？

> ID：16107756
> 
> 赞同：0
> 
> 时间：2013-04-19T15:07:57.097
> 
> 标签：sql-server-2008, tsql

假设我有多个 SQL 来更改 SP 中数据库中的数据。我在开始时创建一个事务，然后在最后提交或回滚事务。我所做的是这样的：

```
declare @HasError bit
BEGIN TRANSACTION
set @HasError = 0;

Insert into Table1....
if(@@ERROR>0)
   set @HasError = 1;

Insert into Table2....
if(@@ERROR>0)
   set @HasError = 1;

Insert into Table3....
if(@@ERROR>0)
   set @HasError = 1;

...

if @HasError = 1
 Rollback;
else
  Commit; 
```

它工作正常。但是需要为每个 U/I/D sql 捕获错误。无论如何我可以知道最后是否只有一段代码有任何错误，例如

```
if(@@ERROR>0)
   set @HasError = 1;
if @HasError = 1
 Rollback;
else
  Commit; 
```

不需要对每个 U/I/D sql 做这么多的错误检测吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:19:29.137

不确定我是否遵循这个问题，但这样的事情可能对你有用

```
BEGIN TRAN
   BEGIN TRY
        Insert into Table1....
        Insert into Table2....
        Insert into Table3....
    END TRY
    BEGIN CATCH
        ROLLBACK TRAN
        RETURN
    END CATCH
COMMIT TRAN 
```

# java - 是否可以在 JTabbedPane(JPanel) 中放置选项卡？

> ID：16107760
> 
> 赞同：0
> 
> 时间：2013-04-19T15:08:03.313
> 
> 标签：java, swing, transparency, jtabbedpane, translucency

像这样！

![在此处输入图像描述](https://i.imgur.com/oXuB5o9.jpg)

并且`setOpaque(false);`in`JTabbedPane`没有工作。

有人会帮我吗？

我的代码的一部分：

```
 for (int x=1; x<6; x++){
        newsPanel[x]=new JPanel();
        newsPanel[x].add(newspicLabel[x]);

        NewsTab.addTab("", Controlbtn, newsPanel[x]);
        }

      NewsTab.setTabPlacement(JTabbedPane.RIGHT);
      NewsTab.setOpaque(false); 
```

非常感谢您！！！

* * *

我已经完成了 JTabbedPane，但我想像这样将标签按钮放在 JTabbedPane(Panel) 中 ---[在此处输入链接描述](https://i.imgur.com/oXuB5o9.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:08:09.693

这是一个示例代码。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.ButtonGroup;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JToggleButton;

public class SidePane extends JPanel {

    Color c[] = {Color.RED, Color.CYAN, Color.BLACK, Color.BLUE, Color.YELLOW};

    public SidePane() {

        setLayout(new BorderLayout(10, 10));
        ButtonGroup group = new ButtonGroup();
        JToggleButton[] buttons = new JToggleButton[5];
        JPanel leftTop = new JPanel(new GridLayout(buttons.length, 1, 10, 10));
        leftTop.setOpaque(false);
        JPanel left = new JPanel();
        left.setOpaque(false);
        for (int i = 0; i < buttons.length; i++) {
            buttons[i] = new JToggleButton(i + "");
            group.add(buttons[i]);
            leftTop.add(buttons[i]);
            buttons[i].addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    JOptionPane.showMessageDialog(SidePane.this, ((JToggleButton)e.getSource()).getText()); // Write whatever you like.
                }
            });
        }
        buttons[0].setSelected(true);
        left.add(leftTop);
        add(left, "East");
        setBackground(Color.red);
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame("My Side Pane");
        frame.add(new SidePane());
        frame.setSize(600, 600);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

# ios - 从 4 个带有图像的自定义按钮中选择一个按钮

> ID：16107761
> 
> 赞同：2
> 
> 时间：2013-04-19T15:08:06.853
> 
> 标签：ios, objective-c, uiimageview, uibutton, arc4random

我在 4 个按钮中有 4 个图像：`imag01.jpg`、`imag02.jpg`、`imag03.jpg`和`imag04.jpg`4 个声音：`sound01.aifc`、`sound02.aifc`、`sound03.aifc`、`sound04.aifc`。

我正在生成 4 个这样的按钮：

```
UIButton *oneButton = [UIButton buttonWithType:UIButtonTypeCustom];
[oneButton setTitle:@"1" forState:UIControlStateNormal];
[oneButton setTitle:@"1" forState:UIControlStateHighlighted];

[oneButton setImage:[UIImage imageNamed:@"imag01.jpg"] forState:UIControlStateNormal];
[oneButton setImage:[UIImage imageNamed:@"imag01.jpg"] forState:UIControlStateHighlighted];
oneButton.frame = CGRectMake(20, 100, 140, 100);

[scrMain addSubview:oneButton]; 
```

我想生成一个从 1 到 4 的随机数（例如 3），播放与其相关的声音（`sound03.aifc`）并要求用户为该声音按下正确的按钮（`imag03.jpg`）。

如何在按钮和声音之间建立联系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:15:30.593

请参阅此问题的答案以生成 0 到 3 之间的随机数：[在 Objective-C 中生成随机数](https://stackoverflow.com/questions/160890/generating-random-numbers-in-objective-c)。

如果你不打算从零开始索引你的按钮，你可以简单地在结果中加一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:16:02.260

做这个：

*   `tag`为每个按钮的属性分配从 0 到 3 的不同值。

*   将声音放入数组中。

*   生成一个介于 0 和 3 之间的随机整数，包括 0 和 3。使用它作为索引从数组中检索声音。播放那个声音。

*   启用 4 个按钮并要求用户点击相应的按钮。

*   如果`tag`按钮的属性与您选择的数字匹配，万岁！干得好，用户！

*   否则，太糟糕了！再试一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:22:53.513

这实际上用 NSArray 很容易做到。为了便于理解，让我们创建两个数组。

一种用于图像，一种用于声音。

```
NSArray* buttonImages = [NSArray arrayWithObjects:[UIImage imageNamed:@"imag01.jpg"],
                      [UIImage imageNamed:@"imag02.jpg"],[UIImage imageNamed:@"imag03.jpg"][UIImage imageNamed:@"imag04.jpg"],  nil];

NSArray* buttonSounds = [NSArray arrayWithObjects:[same idea as the uiimage, i don\'t know what you are using to load sound],  nil]; 
```

然后使用 arc4random 生成随机数：

```
int randomNumber = arc4random()%4; 
```

然后使用你刚刚生成的数字调出图像和声音并将其应用到 uibutton

```
UIImage* image = [buttonImages objectAtIndex:randomNumber];
[oneButton setImage:image forState:UIControlStateNormal]; 
```

再次对声音做同样的事情，并根据`randomNumber`我们刚刚生成的相同附加声音的属性。只需确保图像阵列和声音阵列根据哪个图像是正确的声音排列。

我无法为您编写生成随机声音的代码，因为我不明白您是如何加载声音的。所以我以 UIImages 为例。因此，为了指出正确的方向，将 UIImage 代码替换为声音代码，以应用相同的想法。

要检查声音是否匹配，我会检查是否`[buttonSound objectAtIndex:randomNumber];`等于附加到用户按下的按钮的那个。

# c# - 从另一个类更新类，封装问题

> ID：16107764
> 
> 赞同：0
> 
> 时间：2013-04-19T15:08:13.267
> 
> 标签：c#, design-patterns, encapsulation

我必须如何更新一个只能从另一个特定类更新的类？

在以下示例中，封装被破坏，因为`Sensor`可以从任何其他类更新，而不仅仅是从`Device`. 我对吗？

```
class Device
{
    public IEnumerable<Sensor> Sensors { get; private set; }

    void SomeInternalCall(int sensorId, int signal)
    {
        Sensors.First(s => s.Id == sensorId).Update(signal);
    }

}

class Sensor
{
    public int Id { get; private set; }

    public event Action<int> OnSignal;

    public void Update(int signal)
    {
        if (OnSignal != null) OnSignal(signal);
    }
}

class SensorUser
{
    public SensorUser(Sensor s)
    {
        s.OnSignal += SignalHandler;
    }

    void SignalHandler(int signal)
    {
        // ...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:11:10.517

您可以创建一个提供只读访问权限的接口并将其提供给`SensorUser`，同时`Sensor`在`Device`.

```
interface ISensor
{
    int Id { get;  }    
    event Action<int> OnSignal;
}

class Sensor : ISensor
{
    public int Id { get; private set; }    
    public event Action<int> OnSignal;

    public void Update(int signal)
    {
        if (OnSignal != null) OnSignal(signal);
    }
}

class SensorUser
{
    public SensorUser(ISensor s)
    {
        s.OnSignal += SignalHandler;
    }    
} 
```

# .net - 无法在数据网格视图中编辑单元格

> ID：16107768
> 
> 赞同：1
> 
> 时间：2013-04-19T15:08:31.520
> 
> 标签：.net, winforms, datagridview

在 win 表单上，我使用编辑器将数据网格视图绑定到 MS Access 数据库。数据源创建了以下对象：绑定源、表适配器、表适配器管理器和绑定导航器。我的目标只是阅读信息，允许进行一些编辑，并将信息传递给另一个应用程序；因此，我不需要从原始数据库中插入/更新/删除。此外，我在视图中添加了几个未绑定的列。因此，有多个“绑定”列和几个未绑定列。当我运行应用程序时，数据就在那里。但是，我无法编辑任何单元格（已绑定或未绑定）。网格视图只读属性设置为 false。该列的只读属性设置为 false。我检查了表适配器上的每个字段，它们没有设置为只读。我' 我不知道还有什么要检查的。我提前感谢您的帮助。

额外细节：

在设计器生成的代码中，列被设置为只读。但是，在实际的设计器属性中，我看不到与这些字段相关的任何地方。我正在考虑手动将它们更改为 false （我确实做到了并且确实解决了问题）并恢复了。我手动执行此操作有问题吗？

```
// 
        // dataGridViewTextBoxColumn2
        // 
        this.dataGridViewTextBoxColumn2.DataPropertyName = "FirstName";
        this.dataGridViewTextBoxColumn2.HeaderText = "FirstName";
        this.dataGridViewTextBoxColumn2.Name = "dataGridViewTextBoxColumn2";
        this.dataGridViewTextBoxColumn2.ReadOnly = true;
        // 
        // dataGridViewTextBoxColumn1
        // 
        this.dataGridViewTextBoxColumn1.DataPropertyName = "LastName";
        this.dataGridViewTextBoxColumn1.HeaderText = "LastName";
        this.dataGridViewTextBoxColumn1.Name = "dataGridViewTextBoxColumn1";
        this.dataGridViewTextBoxColumn1.ReadOnly = true;
        // 
        // dataGridViewTextBoxColumn3
        // 
        this.dataGridViewTextBoxColumn3.DataPropertyName = "Address";
        this.dataGridViewTextBoxColumn3.HeaderText = "Address";
        this.dataGridViewTextBoxColumn3.Name = "dataGridViewTextBoxColumn3";
        this.dataGridViewTextBoxColumn3.ReadOnly = true;
        // 
        // dataGridViewTextBoxColumn4
        // 
        this.dataGridViewTextBoxColumn4.DataPropertyName = "City";
        this.dataGridViewTextBoxColumn4.HeaderText = "City";
        this.dataGridViewTextBoxColumn4.Name = "dataGridViewTextBoxColumn4";
        this.dataGridViewTextBoxColumn4.ReadOnly = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:55:24.623

You need to enable editing in your gridview by setting EditCellOnEnter property to True

Check this out (look for cell editing): [http://msdn.microsoft.com/en-us/library/ms993231.aspx](http://msdn.microsoft.com/en-us/library/ms993231.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:25:24.453

当我编辑我的 DataGridView 的 Columns 属性时，我可以看到：[1] Add Column 对话框中的只读复选框（在 OK 和 Cancel 按钮附近的 Visible 和 Frozen 复选框之间），以及 [2] 每个只读属性添加了列（在行为区域中，如果您使用的是分类视图）。

# java - java 正则表达式，仅当不在引号或括号中时才以逗号分隔

> ID：16107771
> 
> 赞同：3
> 
> 时间：2013-04-19T15:08:32.643
> 
> 标签：java, regex

我想通过正则表达式进行 java 拆分。当字符串不在单引号或方括号中时，我想在每个逗号上拆分字符串。例子：

```
Hello, 'my,',friend,(how ,are, you),(,)

 should give:
    hello
    my,
    friend
    how, are, you
    , 
```

我试过这个：

```
(?i),(?=([^\'|\(]*\'|\([^\'|\(]*\'|\()*[^\'|\)]*$) 
```

但我无法让它工作（我通过[http://java-regex-tester.appspot.com/](http://java-regex-tester.appspot.com/)进行了测试）

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T15:38:30.497

嵌套的括号不能被正则表达式分割。手动拆分它们更容易。

```
public static List<String> split(String orig) {
    List<String> splitted = new ArrayList<String>();
    int nextingLevel = 0;
    StringBuilder result = new StringBuilder();
    for (char c : orig.toCharArray()) {
        if (c == ',' && nextingLevel == 0) {
            splitted.add(result.toString());
            result.setLength(0);// clean buffer
        } else {
            if (c == '(')
                nextingLevel++;
            if (c == ')')
                nextingLevel--;
            result.append(c);
        }
    }
    // Thanks PoeHah for pointing it out. This adds the last element to it.
    splitted.add(result.toString());
    return splitted;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T15:30:31.687

java CSV 解析器库比正则表达式更适合此任务：http: [//sourceforge.net/projects/javacsv/](http://sourceforge.net/projects/javacsv/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:52:43.330

假设没有嵌套`()`，您可以拆分

```
",(?=(?:[^']*'[^']*')*[^']*$)(?=(?:[^()]*\\([^()]*\\))*[^()]*$)" 
```

`'`只有当字符串中的前面是偶数个和括号对 时，它才会以逗号分隔。

这是一个脆弱的解决方案，但它可能已经足够好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T16:56:31.797

正如@Balthus 的一些评论和回答一样，这最好在**[CSV Parser](http://sourceforge.net/projects/javacsv/)**中完成。您确实需要做一些`smart RexEx replacement`准备输入字符串以进行解析。考虑这样的代码：

```
String str = "Hello, 'my,',friend,(how ,are, you),(,)"; // input string

// prepare String for CSV parser: replace left/right brackets OR ' by a "
CsvReader reader = CsvReader.parse(str.replaceAll("[(')]", "\""));
reader.readRecord(); // read the CSV input
for (int i=0; i<reader.getColumnCount(); i++)
   System.out.printf("col[%d]: [%s]%n", i, reader.get(i)); 
```

**输出**

```
col[0]: [Hello]
col[1]: [my,]
col[2]: [friend]
col[3]: [how ,are, you]
col[4]: [,] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-25T11:03:37.130

我还需要在引号和括号之外用逗号分隔。

在搜索了关于 SO 的所有相关答案后，我意识到在这种情况下需要一个词法分析器，我为自己编写了一个通用实现。它支持分隔符、多个引号和多个括号作为正则表达式。

```
public static List<String> split(String string, String regex, String[] quotesRegex, String[] leftBracketsRegex,
                                 String[] rightBracketsRegex) {

    if (leftBracketsRegex.length != rightBracketsRegex.length) {
        throw new IllegalArgumentException("Bracket count mismatch, left: " + leftBracketsRegex.length + ", right: "
                + rightBracketsRegex.length);
    }

    // Prepare all delimiters.
    String[] delimiters = new String[1 + quotesRegex.length + leftBracketsRegex.length + rightBracketsRegex.length];
    delimiters[0] = regex;
    System.arraycopy(quotesRegex, 0, delimiters, 1, quotesRegex.length);
    System.arraycopy(leftBracketsRegex, 0, delimiters, 1 + quotesRegex.length, leftBracketsRegex.length);
    System.arraycopy(rightBracketsRegex, 0, delimiters, 1 + quotesRegex.length + leftBracketsRegex.length,
            rightBracketsRegex.length);

    // Build delimiter regex.
    StringBuilder delimitersRegexBuilder = new StringBuilder("(?:");
    boolean first = true;
    for (String delimiter : delimiters) {
        if (delimiter.endsWith("\\") && !delimiter.endsWith("\\\\")) {
            throw new IllegalArgumentException("Delimiter contains trailing single \\: " + delimiter);
        }
        if (first) {
            first = false;
        } else {
            delimitersRegexBuilder.append("|");
        }
        delimitersRegexBuilder
                .append("(")
                .append(delimiter)
                .append(")");
    }
    delimitersRegexBuilder.append(")");
    String delimitersRegex = delimitersRegexBuilder.toString();

    // Scan.
    int pendingQuoteIndex = -1;
    Deque<Integer> bracketStack = new LinkedList<>();
    StringBuilder pendingSegmentBuilder = new StringBuilder();
    List<String> segmentList = new ArrayList<>();
    Matcher matcher = Pattern.compile(delimitersRegex).matcher(string);
    int matcherIndex = 0;
    while (matcher.find()) {
        pendingSegmentBuilder.append(string.substring(matcherIndex, matcher.start()));
        int delimiterIndex = -1;
        for (int i = 1; i <= matcher.groupCount(); ++i) {
            if (matcher.group(i) != null) {
                delimiterIndex = i - 1;
                break;
            }
        }
        if (delimiterIndex < 1) {
            // Regex.
            if (pendingQuoteIndex == -1 && bracketStack.isEmpty()) {
                segmentList.add(pendingSegmentBuilder.toString());
                pendingSegmentBuilder.setLength(0);
            } else {
                pendingSegmentBuilder.append(matcher.group());
            }
        } else {
            delimiterIndex -= 1;
            pendingSegmentBuilder.append(matcher.group());
            if (delimiterIndex < quotesRegex.length) {
                // Quote.
                if (pendingQuoteIndex == -1) {
                    pendingQuoteIndex = delimiterIndex;
                } else if (pendingQuoteIndex == delimiterIndex) {
                    pendingQuoteIndex = -1;
                }
                // Ignore unpaired quotes.
            } else if (pendingQuoteIndex == -1) {
                delimiterIndex -= quotesRegex.length;
                if (delimiterIndex < leftBracketsRegex.length) {
                    // Left bracket
                    bracketStack.push(delimiterIndex);
                } else {
                    delimiterIndex -= leftBracketsRegex.length;
                    // Right bracket
                    int topBracket = bracketStack.peek();
                    // Ignore unbalanced brackets.
                    if (delimiterIndex == topBracket) {
                        bracketStack.pop();
                    }
                }
            }
        }
        matcherIndex = matcher.end();
    }
    pendingSegmentBuilder.append(string.substring(matcherIndex, string.length()));
    segmentList.add(pendingSegmentBuilder.toString());

    while (segmentList.size() > 0 && segmentList.get(segmentList.size() - 1).isEmpty()) {
        segmentList.remove(segmentList.size() - 1);
    }

    return segmentList;
} 
```

# c# - 硒验证日期

> ID：16107773
> 
> 赞同：0
> 
> 时间：2013-04-19T15:08:35.657
> 
> 标签：c#, xpath, selenium

我想知道如何在 Selenium 中执行此操作，我有一个日历，现在我想要的是当我点击一个链接时它应该显示周范围，例如当我点击 3 月 25 日它应该显示 3 月 25 日 - 3 月 31 日， 2013\. 我不知道如何使用 Selenium 我正在寻找它的 Xpath 但我不知道如何在 Selenium 中处理它

这是单击单元格的示例 xPath：

```
//*[@id='weeker']/div/div/table/tbody/tr[4]/td 
```

顺便说一句，我正在用 C# 测试这个

谢谢

# .net - 可以在不使用 Windows Media Player 的情况下获取 WMA 文件的长度吗？

> ID：16107774
> 
> 赞同：1
> 
> 时间：2013-04-19T15:08:42.067
> 
> 标签：.net, audio, naudio, wma

我需要找到一种方法来获取 WMA 文件的长度，而不使用任何 Windows Media Player(WMP) dll。我找到了使用 WMP dll 的方法，您可以[在此处](https://stackoverflow.com/questions/16048877/error-when-reading-audio-file)看到，但由于另一个问题，我宁愿找到一种不必使用 WMP 的方法。

一种使用[NAudio](http://naudio.codeplex.com/)并适用于 MP3 的有前途的方法如下所示：

```
double GetMediaDuration(string MediaFilename)
{
    double duration = 0.0;
    using (FileStream fs = File.OpenRead(MediaFilename))
    {
        Mp3Frame frame = Mp3Frame.LoadFromStream(fs);
        if (frame != null)
        {
            _sampleFrequency = (uint)frame.SampleRate;
        }
        while (frame != null)
        {
            if (frame.ChannelMode == ChannelMode.Mono)
            {
                duration += (double)frame.SampleCount * 2.0 / (double)frame.SampleRate;
            }
            else
            {
                duration += (double)frame.SampleCount * 4.0 / (double)frame.SampleRate;
            }
            frame = Mp3Frame.LoadFromStream(fs);
        }
    }
    return duration;
} 
```

有谁知道将其移植到 WMA 文件的方法？

我查看了 WindowsMediaFormat 项目的源代码，但我找不到 WMAFrame 类或任何显然可以让我换掉一个类以使其适用于 WMA 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:39:15.390

您不需要 NAudio，但 Windows Media.NET ( [http://windowsmedianet.sourceforge.net/](http://windowsmedianet.sourceforge.net/) )

您将打开 MediaReader，并检索所谓的“样本”，即压缩音频包。他们每个人都应该有它的持续时间。遍历整个文件，总计每个包的持续时间，这就是你的解决方案。

如果我有时间，我会得到一些代码。

更多信息：

读者： http: [//msdn.microsoft.com/en-us/library/dd757425 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/dd757425(v=vs.85).aspx)

未压缩样本的回调：http: [//msdn.microsoft.com/en-us/library/dd743503 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/dd743503(v=vs.85).aspx)

我希望你能把它们放在一起！

但是有一个问题，那就是让我的朋友发疯的问题——不管在 WMA 文件中压缩了多少实际 PCM，你得到的最后一个压缩样本总是会被“填充”到全帧长度，所以如果你想要实际长度在压缩之前给出，你可以忘记它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T07:45:12.430

您可以使用`MediaFoundationReader`并索取它的`TotalDuration`财产。`MediaFoundationReader`是 NAudio 1.7 的新功能，可在 NuGet 的预览版中使用。长度是使用 MF_PD_DURATION Media Foundation 表示属性计算的。

# algorithm - 二叉搜索树中节点的公平删除

> ID：16107775
> 
> 赞同：4
> 
> 时间：2013-04-19T15:08:42.940
> 
> 标签：algorithm, data-structures, binary-search-tree

BST中删除节点的思路是：

1.  如果该节点没有子节点，则将其删除并将父节点指向该节点的指针更新为空

2.  如果节点有一个子节点，则通过更新节点的父节点指向其子节点的指针来用其子节点替换该节点

3.  如果节点有两个子节点，则找到该节点的前驱并将其替换为其前驱，同时更新前驱的父节点指针，将其指向其唯一的子节点（只能是左子节点）

最后一种情况也可以使用后继者而不是前任者来完成！

据说如果我们在某些情况下使用前任，在其他情况下使用后继（给予他们同等的优先级），我们可以获得更好的经验表现，

现在的问题是，它是如何完成的？基于什么策略？以及它如何影响性能？（我猜他们的性能意味着时间复杂度）

我认为我们必须选择前任或继任者才能拥有更平衡的树！但我不知道如何选择使用哪一个！

一种解决方案是随机选择其中一个（公平随机性），但基于树结构的策略不是更好吗？但问题是何时选择哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:41:58.623

The thing is that is fundamental problem - to find correct removal algorithm for BST. For 50 years people were trying to solve it (just like in-place merge) and they didn't find anything better then just usual algorithm (with predecessor/successor removing). So, what is wrong with classic algorithm? Actually, this removing unbalances the tree. After several random operations `add/remove` you'll get unbalanced tree with height `sqrt(n)`. And it is no matter what you choosed - remove successor or predecessor (or random chose beetwen these ways) - the result is the same.

So, what to choose? I'm guessing random based (succ or pred) deletion will postpone unbalancing of your tree. But, if you want to have perfectly balanced tree - you have to use red-black ones or something like that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:50:33.780

正如你所说，这是一个平衡的问题，所以一般来说，扰乱平衡最小的方法是可取的。您可以持有一些指标来衡量平衡水平（例如，最大和最小叶高的差异、平均高度等），但我不确定开销是否值得。此外，还有自平衡数据结构（红黑、AVL 树等）通过在每次删除后重新平衡来缓解此问题。如果你想使用基本的 BST，我想没有先验知识的树结构和删除顺序的最佳策略是在每次删除的 2 种方法之间切换。

# html - 如何使用 html/css 使表格只有一行高？

> ID：16107776
> 
> 赞同：0
> 
> 时间：2013-04-19T15:08:43.673
> 
> 标签：html, css

我正在尝试找到一种使用 css 创建 1 行 3 列表的简单方法。我希望表格宽度为容器 div 的宽度，高度仅为 1 行。第一列和第三列应扩展为包含文本的宽度。中间列应填充任何剩余宽度（直到容器宽度），并隐藏溢出。

我在中间列有问题。当我使用 white-space:nowrap 和 overflow:hidden 时，它会将表格扩展到容器 div 的宽度之外。

```
<div style="width:500px;">
<table style="width:100%;">
    <tr>
        <td style="white-space:nowrap;">
            Title is Here
        </td>
        <td style="">
            When this is too long to display on one line the overflow is hidden
        </td>
        <td style="white-space:nowrap;">
            Last updated 12:05pm
        </td>
    </tr>
</table>
</div> 
```

或者是否有更简单的方法使用 div？但我无法弄清楚如何使中心 div 只填充可用空间而不是移动到下一行。

```
<div style="width:500px;">
    <div style="float:left;">
        Title is Here
    </div>
    <div style="float:left;">
        When this is too long to display on one line the overflow is hidden
    </div>
    <div style="float:right;">
        Last updated 12:05pm
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:27:26.890

[你也可以使用基于 div 的布局](http://jsfiddle.net/vvmH3/)

## css

```
 .table{width: 100%; }
     .table, .table .item{ height: 20px; overflow: hidden;}
     .table .item{float: left; box-sizing: border-box; -moz-box-sizing: border-box; background: #fcc; text-align: center;}
     .table .item.right{float: right;}
     .table .center{float: none; background: #ccf; } 
```

## 标记

```
 <div class="table">
     <div class="item left">left content</div>
     <div class="item right">right content</div>
     <div class="center item">some center content</div>
  </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:22:43.013

您的中间 td 没有任何`width`或`height`指定。因此，它具有默认值`width:auto`和`height:auto`. 这就是为什么，它总是扩大自己的规模。如果您尝试给您的 td 一个 fixed `width`，它将垂直缩放。你可以通过给它一个固定的`height`和`width`连同`display:inline-block;`

div 也是如此。但如果是 div，则不需要指定 display:inline-block;

你需要给你的 td（第一个样本）或 div（第二个样本）一个固定的宽度和高度，以隐藏溢出，即进行`overflow:hidden;`工作。

**基于表格的布局：**

在你中间试试这个 css `td`：看看这个[小提琴](http://jsfiddle.net/CVmqN/1/)

```
.middle
{
    height:20px;
    width:70%;
    overflow:hidden; 
    display:inline-block; /*add this property also for the td */
} 
```

**基于 div 的布局**

给你的 div 这个 css：看这个[小提琴](http://jsfiddle.net/3zq37/)

```
.middle
{
    float:left;
    width:40%; 
    height:20px; 
    overflow:hidden;
} 
```

# google-chrome - 不可能通过 chrome 上的 selenium RC 运行测试

> ID：16107777
> 
> 赞同：2
> 
> 时间：2013-04-19T15:08:45.557
> 
> 标签：google-chrome, selenium, selenium-rc

我通过 selenium RC 运行测试，它工作正常。我使用这个命令行：

java -jar selenium-server-standalone-2.32.0.jar -firefoxProfileTemplate "SeleniumProfile" -htmlsuite "*firefox" " [https://www.google.com](https://www.google.com) " "testSuite1.html" "result.html"

我尝试通过将“*firefox”替换为“*googlechrome”来在 chrome 上运行相同的命令，但它失败了：

Chrome 已打开，但显示以下消息：“您正在使用不受支持的命令行标志：--disable-web-security。稳定性和安全性将受到影响”

通过在命令行中删除 -firefoxProfileTemplate "SeleniumProfile" 我得到了相同的结果。

你知道我必须修改什么才能让它工作吗？提前感谢，托马斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:16:21.353

我认为您必须指向 Chrome 驱动程序，因此添加以下内容：

```
-Dwebdriver.chrome.driver=C:\grid2\chromedriver.exe 
```

在此处下载驱动程序：[https](https://code.google.com/p/chromedriver/downloads/list) ://code.google.com/p/chromedriver/downloads/list 并根据需要修改路径。

当然，您必须删除 Firefox 配置文件引用。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T05:17:45.417

您可以添加以下两行来修复此错误：-

System.setProperty("webdriver.chrome.driver", "C:\Users\Administrator\Documents\selenium\chromedriver_win32\chromedriver.exe");
WebDriver driver = new ChromeDriver();

# session - 用树枝显示会话参数

> ID：16107785
> 
> 赞同：2
> 
> 时间：2013-04-19T15:09:03.723
> 
> 标签：session, twig

我想用树枝显示所有会话变量，但我不知道具体如何：

```
{% for variable in app.session %}
    session[ {{variable clef}}] = {{variable value}}
{% endfor %} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T18:36:41.893

您还可以使用 twig 的调试功能，`dump`. 即使`value`a`key`是对象或数组，这也将起作用。

```
{{ dump(app.session.all) }} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T16:32:22.767

您可以使用它，它也适用于其他关联数组：

```
{% for key, value in app.session %}
    session['{{ key }}'] = {{ value }}
{% endfor %} 
```

文档中也对此进行了解释：[迭代键和值](http://twig.sensiolabs.org/doc/tags/for.html#iterating-over-keys-and-values)。

# jquery-ui - 使用 jQuery UI Datepicker 确保一个日期至少比另一个日期晚 1 天

> ID：16107787
> 
> 赞同：0
> 
> 时间：2013-04-19T15:09:09.003
> 
> 标签：jquery-ui, jquery-ui-datepicker

使用 jQuery DatePicker，我想确保出发日期至少比到达日期晚 1 天。我设法做到这一点的最接近的方法是确保出发日期与到达日期在同一天（我只是不知道如何在 JS 中添加“selectedDate + 1 天”）。我将不胜感激任何帮助，谢谢。

这是我的 JS：

```
$(".datepicker_arrival").datepicker({
  dateFormat: 'dd/mm/yy',
  minDate: new Date(),
  onSelect: function(dateText, inst) {
    if($('.datepicker_departure').val() == '') {
      var current_date = $.datepicker.parseDate('dd/mm/yy', dateText);
      current_date.setDate(current_date.getDate()+1);
      $('.datepicker_departure').datepicker('setDate', current_date);
    }
  },
  onClose: function( selectedDate ) {
    $( ".datepicker_departure" ).datepicker( "option", "minDate", selectedDate );
  }
});

$(".datepicker_departure").datepicker({
  dateFormat: 'dd/mm/yy',
  minDate: new Date(),
  onClose: function( selectedDate ) {
    $( ".datepicker_arrival" ).datepicker( "option", "maxDate", selectedDate );
  }
}); 
```

这是我的 HTML：

```
<input type="text" name="arrival" class="datepicker datepicker_arrival textfield" placeholder="Arrival Date" />

<input type="text" name="departure" class="datepicker datepicker_departure textfield" placeholder="Departure Date" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:45:31.093

您可以在 onClose 方法中传递 datepicker 对象：

**[http://api.jqueryui.com/datepicker/#option-onClose](http://api.jqueryui.com/datepicker/#option-onClose)**

因此，这应该可以正常工作：

```
$(".datepicker_arrival").datepicker({
  dateFormat: 'dd/mm/yy',
  minDate: new Date(),
  onSelect: function(dateText, inst) {
    if($('.datepicker_departure').val() == '') {
      var current_date = $.datepicker.parseDate('dd/mm/yy', dateText);
      current_date.setDate(current_date.getDate()+1);
      $('.datepicker_departure').datepicker('setDate', current_date);
    }
  },
  onClose: function( selectedDate, test) {
     var  MyDateString = ('0' + (parseInt(test.selectedDay)+1)).slice(-2) + '/'
             + ('0' + (test.selectedMonth+1)).slice(-2) + '/'
             + test.selectedYear;
      $( ".datepicker_departure" ).datepicker( "option", "minDate", MyDateString);
  }
}); 
```

小提琴：

[http://jsfiddle.net/SpAm/9mSxk/1/](http://jsfiddle.net/SpAm/9mSxk/1/)

填充想法的功劳来自 user113716 在此线程中接受的答案：

**[Javascript 添加前导零至今](https://stackoverflow.com/questions/3605214/javascript-add-leading-zeroes-to-date)**

# spring-mvc - 从 Spring-mvc 的 RequestDataValueProcessor 中检索表单方法

> ID：16107788
> 
> 赞同：1
> 
> 时间：2013-04-19T15:09:14.037
> 
> 标签：spring-mvc

我想`<form:form>`从 a 内部检索 spring 标记的 http 方法，`RequestDataValueProcessor`以便根据它生成不同的隐藏字段。我可以访问表单操作，但似乎无法检索表单的 http 方法。

我正在使用 Spring 3.2。

**编辑：**我添加了一个例子。

想象一下使用 GET 检索下面的表单。我想要的是读取标签的`method`参数，`<form:form>`以便根据方法添加隐藏字段。显然，我不能使用`request.getMethod()`，因为这将返回原始请求的方法，而不是正在处理的表单的方法`RequestDataValueProcessor`。

```
<form:form action="/foo/bar" method="post" modelAttribute="${modelAttribute}" >
      <form:input path="myField" />
      <input id="proceed" type="submit" value="Save" />           
</form:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:28:52.453

绝对是 Spring 上的一个未解决问题，但看起来不会很快得到解决。

这就是你可以做的......虽然它不是直截了当的，所以在你开始之前权衡成本与收益:)

1.  `RequestDataValueProcessor`不会为你工作，你已经知道了。编程方式`FormTag`是，它在执行表单标签期间在特定时间从值处理器调用特定方法（挂钩）。

2.  您可以创建自己的自定义表单标签，它将通过组合或继承完成 Spring 的表单标签所做的一切。但除此之外，当标签检测到表单方法时，您可以调用自己的 Value Processor 类。然后这个类可以决定你想要采取哪些额外的步骤，然后你可以使用常规的 ValueProcessor 添加你认为合适的隐藏字段。

这些问题讨论了如何通过创建自己的标签来扩展 spring 的标签：[SpringMVC 自定义表单标签](https://stackoverflow.com/questions/14415484/springmvc-custom-form-tags)和[创建扩展 Spring 标签库的自定义标签库](https://stackoverflow.com/questions/13097778/create-custom-tag-library-which-extends-spring-tag-library)。

另请查看`FormTag` [https://github.com/SpringSource/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/tags/form/FormTag 的源代码。爪哇](https://github.com/SpringSource/spring-framework/blob/master/spring-webmvc/src/main/java/org/springframework/web/servlet/tags/form/FormTag.java)_ 看看受保护的 processAction 方法是如何调用值处理器钩子的，你必须做一些类似的事情，但是在`getMethod`方法中。

希望这个答案有意义，如果您希望我重新措辞或详细说明任何观点，请告诉我。快乐编程！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:38:56.390

似乎有一个悬而未决的问题允许访问`RequestDataValueProcessor`.

这就是问题所在：[https ://jira.springsource.org/browse/SPR-10041](https://jira.springsource.org/browse/SPR-10041)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T18:09:44.313

更多信息会有所帮助，例如您使用的 Spring 版本。

[从RequestDataValueProcessor](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/support/RequestDataValueProcessor.html)的 Spring 3.2 API 文档中，我看到有四 (4) 种方法可供您使用。在每一个中，您都可以访问[HttpServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html?is-external=true)。

[因此，您可以通过调用 ( link](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getMethod%28%29) )访问入站请求所使用的任何 HTTP 方法：

```
request.getMethod() 
```

这应该给你你正在寻找的东西。

# maven - 未能部署工件：找不到工件

> ID：16107789
> 
> 赞同：37
> 
> 时间：2013-04-19T15:09:23.523
> 
> 标签：maven, artifactnotfoundexception

我想将一个库部署到我公司的远程存储库。

这是我第一次想将库项目部署到远程存储库。

我收到以下错误消息：

> [org.sonatype.aether.transfer.ArtifactNotFoundException：在 internal.repo ( http://jenkins.internal.com/](http://jenkins.internal.com/) )中找不到工件 com.http:httpkit:jar:0.0.1

也许我理解一些完全错误的东西，但是错误消息说，在远程存储库中不存在我第一次尝试部署的工件。所以当然没有这样的神器。当我尝试上传工件时，为什么 maven 会尝试获取工件？

我的pom文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>com.http</groupId>
<artifactId>httpkit</artifactId>
<version>0.0.1</version>
<packaging>jar</packaging>
<name>httpkit</name>

<properties>
    <platform.version> 4.1.1.4</platform.version>
</properties>

<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>${platform.version}</version>
        <scope>provided</scope>
    </dependency>
</dependencies>

<!-- Deploy to internal maven repository -->
<distributionManagement>
    <repository>
      <id>internal.repo</id>
      <name>Internal Repository</name>
      <url>http://jenkins.internal.com/</url>
    </repository>
</distributionManagement>

<build>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.5.3</version>
            <configuration>
                <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                <resourceDirectory>${project.basedir}/res</resourceDirectory>
                <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                <sdk>
                    <platform>16</platform>
                </sdk>
               <undeployBeforeDeploy>true</undeployBeforeDeploy>
            </configuration>
            <extensions>true</extensions>
        </plugin>

        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
            </configuration>
        </plugin>

    </plugins>
</build>
</project> 
```

我打电话

> mvn 部署

从命令行

任何建议如何解决这个问题？

编辑：失败日志（运行`mvn deploy -X`）

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project httpkit: Failed to deploy artifacts: Could not find artifact com.http:httpkit:jar:0.0.1 in internal.repo (http://jenkins.internal.com) -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project httpkit: Failed to deploy artifacts: Could not find artifact com.http:httpkit:jar:0.0.1 in internal.repo (http://jenkins.internal.com)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: Failed to deploy artifacts: Could not find artifact com.http:httpkit:jar:0.0.1 in internal.repo (http://jenkins.internal.com)
    at org.apache.maven.plugin.deploy.DeployMojo.execute(DeployMojo.java:193)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: org.apache.maven.artifact.deployer.ArtifactDeploymentException: Failed to deploy artifacts: Could not find artifact com.http:httpkit:jar:0.0.1 in internal.repo (http://jenkins.internal.com)
    at org.apache.maven.artifact.deployer.DefaultArtifactDeployer.deploy(DefaultArtifactDeployer.java:141)
    at org.apache.maven.plugin.deploy.AbstractDeployMojo.deploy(AbstractDeployMojo.java:167)
    at org.apache.maven.plugin.deploy.DeployMojo.execute(DeployMojo.java:157)
    ... 21 more
Caused by: org.sonatype.aether.deployment.DeploymentException: Failed to deploy artifacts: Could not find artifact com.http:httpkit:jar:0.0.1 in internal.repo (http://jenkins.internal.com)
    at org.sonatype.aether.impl.internal.DefaultDeployer.deploy(DefaultDeployer.java:280)
    at org.sonatype.aether.impl.internal.DefaultDeployer.deploy(DefaultDeployer.java:211)
    at org.sonatype.aether.impl.internal.DefaultRepositorySystem.deploy(DefaultRepositorySystem.java:443)
    at org.apache.maven.artifact.deployer.DefaultArtifactDeployer.deploy(DefaultArtifactDeployer.java:137)
    ... 23 more
Caused by: org.sonatype.aether.transfer.ArtifactNotFoundException: Could not find artifact com.http:httpkit:jar:0.0.1 in internal.repo (http://jenkins.internal.com/)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:947)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:941)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$PutTask.run(WagonRepositoryConnector.java:837)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector.put(WagonRepositoryConnector.java:467)
    at org.sonatype.aether.impl.internal.DefaultDeployer.deploy(DefaultDeployer.java:274)
    ... 26 more
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-22T08:40:19.983

您是否尝试在 settings.xml 文件中添加服务器？默认设置 xml 位于您的 ~/.m2/ 目录中。应该包含类似的内容：

```
<servers>
        <server>
            <id>my-internal-nexus-repo</id>
            <username>yourUserName</username>
            <password>yourPassword</password>
        </server>
</servers> 
```

这是用于添加服务器的[http://maven.apache.org/settings.html](http://maven.apache.org/settings.html) maven 文档的链接。

另一件事可能是在黑暗中开枪。我注意到您正在尝试连接到 url 建议的可能是 Jenkins 实例的内容。Jenkins 是一个持续集成服务器，对我来说似乎很奇怪你在那里找到了你的存储库。我希望有一个 Nexus 网址或其他东西。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-06-15T13:31:29.920

*（添加一个较晚的答案，希望它可以帮助那些在谷歌上寻求帮助的人......）*

我也有这个问题。在拉了很多（很多）头发之后，我意识到我只是拼错了存储库名称！

所以使用OP的例子：

```
Failed to deploy artifacts: Could not find artifact com.http:httpkit:jar:0.0.1 in internal.
repo (http://jenkins.intrnal.com) 
```

*实际上*可能意味着

```
Failed to deploy artifacts: Could not find internal.repo (http://jenkins.intrnal.com) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-29T19:06:03.590

我遇到了类似的问题并解决了

1.  在 settings.xml 中将我的 nexus 服务器添加为 nonProxyHost
2.  将第 3 方的存储库策略设置为发布而不是快照。

[在我的stackoverflow 答案](https://stackoverflow.com/questions/16219052/mvn-deploydeploy-file-failed-to-deploy-artifacts-could-not-find-artifact)中查看更多详细信息。

请注意，我正在执行“mvn deploy:deploy-file”（将第 3 方工件上传到共享存储库），而您正在执行“mvn deploy”（将您的工件从构建项目上传到共享存储库），但根本原因可能相同。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-08-01T20:38:25.723

我们遇到了这个问题。几个小时后，我们认为这是内部存储库中的磁盘空间问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-30T11:17:57.880

关于错误：

```
Failed to deploy artifacts: Could not transfer artifact 
```

解决方案：

解决此问题的一种非常简单的方法是更改​​/更新`pom.xml`文件中的版本。假设 01.16.03 已被使用，然后尝试改用 01.16.04。它应该工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-27T04:45:35.380

在我的情况下，我在 pom.xml 的 snapshotRepository 部分中的服务器 url 指向 http，而我的内部存储库托管在 https 中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-22T17:23:23.143

好的...几天前我遇到了同样的问题。在摆弄了各种排列组合之后，我终于得出了结论。那些说反应堆会自动排序并自行解决所有依赖关系的人是不正确的。似乎下面的链接描述了这一切。请看“反应堆排序”部分下的最后一点：

[https://maven.apache.org/guides/mini/guide-multiple-modules.html#Reactor_Sorting](https://maven.apache.org/guides/mini/guide-multiple-modules.html#Reactor_Sorting)

它建议在没有其他规则适用的情况下考虑定义模块的顺序。

我希望这对其他人有所帮助。:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-26T13:55:33.493

这是因为您的 Maven 无法找到设置文件。如果删除 .m2 不起作用，请尝试以下解决方案

转到您的 JOB 配置

比构建部分

添加构建步骤：- 调用顶级 Maven 目标并填写 Maven 版本和目标

比单击高级按钮并提及图像中提及的**设置**文件路径 [![在此处输入图像描述](https://i.stack.imgur.com/0yVdw.png)](https://i.stack.imgur.com/0yVdw.png)

# java - 我有一个 TCP IP 客户端服务器，只允许一个客户端连接到服务器。我需要信号量吗？

> ID：16107791
> 
> 赞同：0
> 
> 时间：2013-04-19T15:09:32.083
> 
> 标签：java, sockets, semaphore

我有一个 Java TCPIP cient/服务器，其中只允许一个客户端。我正在考虑是否需要添加任何信号量保护。

我不认为，但我有一个循环等待套接字连接，一旦连接，我将从套接字读取。同时我也可以随时写出到socket。

### 服务器实现

```
Server{
  run(){
     while(true){
        openSocketConnection();  // wait unit client connected
        readSocecketMsg();
     }
  } 

  private void writeMsgToClient(message){
     write to socket(message)
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T00:39:26.937

你已经做到了。您一次处理一个客户。由于 TCP 积压队列，您无法在处理当前客户端时阻止其他客户端连接，但您可以为下一个客户端提供零服务，直到您完成此客户端，这正是您所做的已经在做。不需要信号量。

# debugging - GDB 自动初始化变量

> ID：16107795
> 
> 赞同：0
> 
> 时间：2013-04-19T15:09:47.727
> 
> 标签：debugging, memory, gdb

我正在尝试做一个关于 C++ 中内存管理的示例。我想向人们展示，记忆中总有一些东西（即使你没有在里面写任何东西）

我的问题是，`gdb`出于调试目的，似乎完全删除了这些值......

```
Breakpoint 1, main (argc=1, argv=0x7fffffffe8f8) at dangling.cpp:6
6       int *test=new int;
(gdb) n
8       *test=10;
(gdb) p *test
$1 = 0
(gdb) n
10      delete test;
(gdb) p *test
$2 = 10
(gdb) n
12      std::cout<<*test<<std::endl;
(gdb) p *test
$3 = 0
(gdb) 
```

有没有办法告诉`gdb`不要那样做。我想看到内存中的真正价值，而不是`0`of`$1`和`$3`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:49:36.210

> gdb 似乎完全删除了这些值以进行调试。

GDB 没有做*任何*此类事情。

> 我想看到内存中的真正价值，而不是 $1 和 $3 的 0

您*正在*看到内存中的实际值（恰好为 0）。

您的问题是默认堆分配会返回“干净”内存。只有在随后的重新分配中，您可能会看到“脏”内存。

# java - Java 动态 CRM 实施

> ID：16107797
> 
> 赞同：0
> 
> 时间：2013-04-19T15:09:49.647
> 
> 标签：java, dynamics-crm

我尝试从以下参考链接[http://code.msdn.microsoft.com/Consuming-CRM-REST-Service-ae24a15e](http://code.msdn.microsoft.com/Consuming-CRM-REST-Service-ae24a15e)实现基于 Java 的 CRM 实现，我执行了这些博客提供的步骤。我将生成的代理文件添加到我的项目中。我在向 CRM 服务器添加新实体时遇到了麻烦，我尝试了下面的代码片段以及我的身份验证详细信息

```
public class client { 

    /** 
     * @param args 
     */ 
    public static void main(String[] args) { 
    Authenticator a = new Authenticator() { 
            public PasswordAuthentication getPasswordAuthentication() { 
                return (new PasswordAuthentication("username", "password".toCharArray())); 
            } 
        }; 
        // Sets the default Authenticator 
        Authenticator.setDefault(a); 
        System.setProperty("java.protocol.handler.pkgs", "jcifs"); 
        Config.setProperty("jcifs.smb.client.domain", "domainname"); 
        Config.setProperty("jcifs.smb.client.username", "username"); 
        Config.setProperty("jcifs.smb.client.password", "password"); 
        Config.setProperty("jcifs.netbios.hostname","hostname"); 

        String[] arguments = { "http://crmserver/organization/xrmservices/2011/organizationdata.svc/", "c:\\crm" }; 
        Generator.main(arguments); 
    } 
    MicrosoftCrmSdkDataServicesService service = new MicrosoftCrmSdkDataServicesService(); 
    Account act = new Account(); 
    String x = UUID.randomUUID().toString(); 
    act.setAccountId(x); 
    act.setName("Account from oData"); 
    try { 
       service.addEntity(act); 
    }  
    catch (Exception e)  
    { 
        e.printStackTrace(); 
    } 

} 
```

在执行上面的代码段时，我遇到了错误，例如 **Bad Request (400) - Can't add entity to this entity set**让我有任何解决这些问题的建议。

提前致谢！

# wordpress - WordPress 分页在过滤过去的事件后显示额外的空白页

> ID：16107800
> 
> 赞同：0
> 
> 时间：2013-04-19T15:09:59.953
> 
> 标签：wordpress, pagination, paging, custom-post-type

我有一个按日期顺序显示的事件列表，过去的事件被隐藏。

问题是总共有 3 页的事件，但是一旦过去的事件被隐藏，只有足够的事件来填满 2 页。但是，第三个空白页面仍然存在，可以通过分页链接访问。

这是我的事件列表页面上的代码：

```
<?php $today = date("Ymd");?>

<?php $paged = 1;
if ( get_query_var('paged') ) $paged = get_query_var('paged');
if ( get_query_var('page') ) $paged = get_query_var('page');
query_posts( '&post_type=upcomingevents&paged=' . $paged );?> 

<?php $loop = new WP_Query( array( 'post_type' => 'upcomingevents', 'paged'=> $paged, 'meta_key' => 'start_date', 'meta_compare' => '>=', 'meta_value' => $today, 'orderby' => 'meta_value_num', 'order' => 'ASC' )); ?>
<?php while ( $loop->have_posts('post_type=upcomingevents') ) : $loop->the_post(); ?> 
```

这是我的函数文件中的分页代码：

```
function paginate() {
global $wp_query, $wp_rewrite;
$wp_query->query_vars['paged'] > 1 ? $current = $wp_query->query_vars['paged'] : $current = 1;
$pagination = array(
    'base' => @add_query_arg('page','%#%'),
    'format' => '',
    'total' => $wp_query->max_num_pages,
    'current' => $current,
    'show_all' => true,
    'type' => 'plain'
);
if ( $wp_rewrite->using_permalinks() ) $pagination['base'] = user_trailingslashit( trailingslashit( remove_query_arg( 's', get_pagenum_link( 1 ) ) ) . 'page/%#%/', 'paged' );
if ( !empty($wp_query->query_vars['s']) ) $pagination['add_args'] = array( 's' => get_query_var( 's' ) );
echo paginate_links( $pagination ); 
```

}

我还发现了第二个问题，当移动到结果的第 2 页或第 3 页时，当前的 CSS 类仍然在分页中的数字 1 上，因此无法判断您在哪个页面上。

任何建议将不胜感激，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:35:08.337

`$paged`值`0`在第一页，所以编辑你的第一个片段：

`$paged = 0;`

此外，当您使用 WP_Query 时，您可以安全地删除以下行，这可能弊大于利：

`query_posts( '&post_type=upcomingevents&paged=' . $paged );`

# python - 使用 Python 进行 SOAP MTOM 调用

> ID：16107811
> 
> 赞同：20
> 
> 时间：2013-04-19T15:10:25.697
> 
> 标签：python, soap, suds, mtom

我目前正在使用`web toolkit`python，我必须进行很多 SOAP 调用。对我来说不幸的是，其中一些调用使用`MTOM`. 我目前正在使用`SUDS`，我想知道是否可以使用它进行 MTOM 调用（我在文档中找不到任何内容，所以我认为答案是否定的）。

如果 SUDS 不是解决方案，还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-04T01:08:32.027

根据此屏幕截图，它似乎不受支持。 [![fedorahosted.org/suds/ticket/248](https://i.stack.imgur.com/a1AmQ.png)](https://i.stack.imgur.com/a1AmQ.png)

# asp.net-mvc - HTMLHelper，生成“表达式”类型的参数 > 表达式“超出属性

> ID：16107812
> 
> 赞同：6
> 
> 时间：2013-04-19T15:10:29.190
> 
> 标签：asp.net-mvc, reflection, html-helper

我正在为编辑器编写 HTML Helper。这个想法是从具有 AutoGenerateField 属性的模型中获取属性并构建一个表，其中每一行包含一个字段的名称（也来自属性）和一个包含字段实际值的 TextBox 或 CheckBox。

我对 HTMLHelper 有疑问。由于我将整个模型发送给助手而不是一个值，因此我不能使用诸如 TextBoxFor 之类的方法，因为它们需要参数，例如

```
"Expression<Func<TModel, TValue>> expression". 
```

我正在使用反射并尝试发送属性，但 VisualStudio 仍然认为这是不正确的用法。

下面是我的 HtmlHelper 的简化方法：

```
public static MvcHtmlString GenerateEditor<TModel>(this HtmlHelper<TModel> htmlHelper)
{
    var model = htmlHelper.ViewData.Model;
    var result = String.Empty;

    //generating container, etc ...

    foreach (var property in model.GetType().GetProperties())
    {
        var attr = property.GetCustomAttributes(typeof (DisplayAttribute), true).FirstOrDefault(); 
        if (attr == null) continue;
        var autoGenerate = ((DisplayAttribute)attr).AutoGenerateField;
        if(autoGenerate)
        {
           //here I'm building the html string 
           //My problem is in the line below:
           var r = htmlHelper.TextBoxFor(property); 
        }
    }
    return MvcHtmlString.Create(result);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:05:21.257

只使用非 lambda 重载怎么样。：`InputExtensions.TextBox()`

```
if(autoGenerate)
{
   //here I'm building the html string 
   //My problem is in the line below:
   var r = htmlHelper.TextBox(property.Name); 
}
//not sure what you do with r from here... 
```

如果我没记错的`name`话，即使您使用函数的 lambda 版本，表单元素的属性也会设置为属性名称，所以这应该做同样的事情。

我将尝试验证 lambda 函数的作用，你也许可以做同样的事情，因为你有`TModel`你。

* * *

**更新**

从[InputExtensions.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/8e5a8db920443ba7d6b491764f5298e0f5e46332#src/System.Web.Mvc/Html/InputExtensions.cs)的源代码中**快速查看**内容， TextBoxFor调用最终调用，最终调用[ExpressionHelper.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/8e5a8db920443ba7d6b491764f5298e0f5e46332#src/System.Web.Mvc/ExpressionHelper.cs)从粗略的外观中获取输入元素上的 name html 属性。`InputHelper()``ExpressionHelper.GetExpressionText(LambdaExpression expression)``member.Name`

我现在无法完全验证它，因为我不在 Windows 上，但我认为非 lambda 函数应该适合您的需要。告诉我进展如何？

# javascript - html 将文本数据转换为文件并上传

> ID：16107816
> 
> 赞同：0
> 
> 时间：2013-04-19T15:10:52.360
> 
> 标签：javascript, html

是否可以使用 javascript 将文本从文本输入转换并将其作为文件上传到服务器？我需要在页面中添加文本编辑器之类的内容来打开文本文件，然后对其进行更改并作为文件上传到服务器，而不是作为发布请求中的参数值。

那么有可能做到吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:30:36.930

如果浏览器支持`XMLHttpRequest 2`（参见[http://caniuse.com/xhr2](http://caniuse.com/xhr2)），您可以选择。

HTML5 Rocks 教程（XMLHttpRequest2 中的新技巧）的[上传文件或 blob：xhr.send(Blob)](http://www.html5rocks.com/en/tutorials/file/xhr2/#toc-send-blob)部分有一些示例代码可以帮助您入门：

```
function upload(blobOrFile) {
  var xhr = new XMLHttpRequest();
  xhr.open('POST', '/server', true);
  xhr.onload = function(e) { ... };

  // Listen to the upload progress.
  var progressBar = document.querySelector('progress');
  xhr.upload.onprogress = function(e) {
    if (e.lengthComputable) {
      progressBar.value = (e.loaded / e.total) * 100;
      progressBar.textContent = progressBar.value; // Fallback for unsupported browsers.
    }
  };

  xhr.send(blobOrFile);
}

upload(new Blob(['hello world'], {type: 'text/plain'})); 
```

# driver - 了解本例中 memset 的使用

> ID：16107817
> 
> 赞同：0
> 
> 时间：2013-04-19T15:10:55.560
> 
> 标签：driver, device, memset, kmalloc

我正在研究Linux设备驱动程序书中的一个例子（[http://lwn.net/Kernel/LDD3/](http://lwn.net/Kernel/LDD3/)），我不明白**memset**函数在这种情况下的用途和有用性，我希望有人能给我解释。我知道我们使用**kmalloc**为我们的设备结构分配内存，而使用 memset 我们将 0 放在内存地址前面？这是一个例子：

```
int scull_p_init(dev_t firstdev)
{
int i, result;

result = register_chrdev_region(firstdev, scull_p_nr_devs, "scullp");
if (result < 0) {
    printk(KERN_NOTICE "Unable to get scullp region, error %d\n", result);
    return 0;
}
scull_p_devno = firstdev;
scull_p_devices = kmalloc(scull_p_nr_devs * sizeof(struct scull_pipe), GFP_KERNEL);
if (scull_p_devices == NULL) {
    unregister_chrdev_region(firstdev, scull_p_nr_devs);
    return 0;
}
memset(scull_p_devices, 0, scull_p_nr_devs * sizeof(struct scull_pipe));
for (i = 0; i < scull_p_nr_devs; i++) {
    init_waitqueue_head(&(scull_p_devices[i].inq));
    init_waitqueue_head(&(scull_p_devices[i].outq));
    init_MUTEX(&scull_p_devices[i].sem);
    scull_p_setup_cdev(scull_p_devices + i, i);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:26:37.617

memset 没有将 0 放在`scull_p_devices`. 它`scull_p_devices`用零覆盖从地址到分配区域大小的内存。

# bash - 如何使 Emacs 的 shell 模式源我的配置文件？

> ID：16107820
> 
> 赞同：9
> 
> 时间：2013-04-19T15:11:05.777
> 
> 标签：bash, shell, emacs, alias, zsh

我在我的一些配置文件中定义了一些别名和函数片段，比如`~/.zprofile`. 但是 Emacs 从不读取它们。已经有[一个关于它的话题](https://stackoverflow.com/questions/9663396/how-do-i-make-emacs-recognize-bash-environment-variables-for-compilation)。然而，这还不够：

1.  它不能`source`完全`.zshrc`并且会发出错误 `compinit`等。
2.  似乎这种方法仅适用于环境变量。

因此，`shell-mode`在 Emacs( `Alt`- `!`) 中运行或运行命令时，效果与终端（模拟器）中的效果仍然不同。

那么有什么办法可以解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-19T16:45:50.523

您可以创建一个文件 ~/.emacs_zsh（或 .emacs_bash，emacs_sh，...），shell 模式将在启动时使用。我的 .emacs_bash 很简单：

```
. ~/.profile 
```

只需确保在采购行的末尾添加一个换行符，否则它不会被执行。

# xml - Maven：使用 Assembly 插件在站点生命周期中生成的包文件

> ID：16107821
> 
> 赞同：2
> 
> 时间：2013-04-19T15:11:07.170
> 
> 标签：xml, maven, maven-2, maven-assembly-plugin

我正在尝试打包一些在`site life-cycle`maven 项目期间生成的文件，以便我可以自动与使用它们的其他项目共享这些资源。

我已经成功地使用 maven 程序集插件来打包项目中已经存在的文件（在 下`/src/main/...`），但是当我尝试将`/target/site/`路径中的文件打包到 zip 中时，它总是最终为空。

`POM.xml`看起来像这样

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
                <execution>
                    <id>make shared resources</id>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <phase>package</phase>
                    <configuration>
                        <descriptors>
                            <descriptor>src/main/assembly/resources.xml</descriptor>
                        </descriptors>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

程序集描述符

```
<assembly>
  <id>resources</id>
  <formats>
    <format>zip</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  <fileSets>
    <fileSet>
      <directory>${project.build.directory}/site/</directory>
      <outputDirectory></outputDirectory>
    </fileSet>
  </fileSets>
</assembly> 
```

我尝试将阶段更改为，`<phase>post-site</phase>`但我觉得插件仅在默认生命周期中执行。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:01:49.093

我想到的重要一点是：如果您有需要作为其他项目依赖项的文件，则必须在通常的生命周期而不是在**站点**生命周期期间生成它们。

# eclipse - 如果工作区中存在工作灯项目，则 com.worklight.studio.plugin 线程在 Eclipse 启动时挂起

> ID：16107830
> 
> 赞同：1
> 
> 时间：2013-04-19T15:11:31.873
> 
> 标签：eclipse, ibm-mobilefirst

我安装了 eclipse Juno 和 IBM Worklight studio 插件 v5.0.5。支持 Eclipse Juno 的工作灯文档，但是如果我创建一个工作灯项目然后关闭 Eclipse，然后尝试再次启动它，一个线程会在启动时挂起，从 com.worklight.studio.plugin 加载内容，我最终得到了杀死 Eclipse，因为它只是挂在加载屏幕上。每次挂起时加载的包都不相同，它似乎是随机的。这是一次发生时的堆栈跟踪：

```
!MESSAGE While loading class "com.worklight.studio.plugin.classpaths.ServerAPIContainer", thread "Thread[org.eclipse.wst.sse.ui.internal.reconcile.StructuredRegionProcessor,1,main]" timed out waiting (5000ms) for thread "Thread[Worker-0,5,main]" to finish starting bundle "com.worklight.studio.plugin_5.0.5.20121129-1027 [882]". To avoid deadlock, thread "Thread[org.eclipse.wst.sse.ui.internal.reconcile.StructuredRegionProcessor,1,main]" is proceeding but "com.worklight.studio.plugin.classpaths.ServerAPIContainer" may not be fully initialized.
!STACK 0
org.osgi.framework.BundleException: State change in progress for bundle "reference:file:plugins/com.worklight.studio.plugin_5.0.5.20121129-1027/" by thread "Worker-0".
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.beginStateChange(AbstractBundle.java:1088)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:298)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
...
Caused by: org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException
    ... 45 more
Root exception:
org.eclipse.osgi.framework.internal.core.AbstractBundle$BundleStatusException
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.beginStateChange(AbstractBundle.java:1088)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:298)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
...
eclipse.buildId=M20130204-1200
java.version=1.7.0_15
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.jee.product 
```

这是一个很长的堆栈跟踪，所以我只包含了我认为与上面相关的部分。我可以通过从我的工作区中删除工作灯项目来再次启动 Eclipse，但这意味着我只能在一个项目中工作一个会话。我看过其他关于这个问题的帖子，但他们都给出了相同的解决方案，只是删除项目。这个问题有没有更永久的解决方案？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:07:15.530

Uninstall it and try the latest version, 5.0.6.1, however also make sure to delete from the Eclipse-workspace the WorklightServerHome folder (due to schema changes between 5.0.5 and 5.0.6.x).

# python - 在 set_bbox 中使用 dict() 或大括号指定字典参数很重要

> ID：16107832
> 
> 赞同：7
> 
> 时间：2013-04-19T15:11:33.997
> 
> 标签：python, matplotlib

在 matplotlib 主页中，有一个指向 Nicolas Rougier 的教程的链接。在题为“Devil is in the details”的教程部分中，脚本：

[http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_10.py](http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_10.py)

生成显示在网页上的图形。脚本的第 48 行是：

```
label.set_bbox(dict(facecolor='white', edgecolor='None', alpha=0.65 )) 
```

如果我们将这一行替换为：

```
label.set_bbox({"facecolor": "white", "edgecolor": "None","alpha":0.65}) 
```

然后不考虑 edgecolor 请求。我会认为上面的两个陈述是等价的。我曾就此向本教程的作者 Nicolas Rougier 询问过，他也对此感到惊讶。这是 Matplotlib 的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:33:31.340

您可以轻松确定两者`dicts`是否等效：

```
dict(facecolor='white', edgecolor='None', alpha=0.65 ) == \
    {"facecolor": "white", "edgecolor": "None", "alpha":0.65} 
```

这是`True`.

*但是，*如果您将这些文字输入到 Python 解释器中，则生成的字典`repr`s 将具有不同顺序的值。

```
{'alpha': 0.65000000000000002, 'facecolor': 'white', 'edgecolor': 'None'}
{'edgecolor': 'None', 'facecolor': 'white', 'alpha': 0.65000000000000002} 
```

这可能因您使用的 Python 版本而异，我相信在较新版本的 Python 中，它会因解释器的运行而异；哈希播种是随机的，以防止构造恶意性能不佳的字典。以上输出来自 Python 2.6.6 (Win32)。

Python`dict`是无序的，我们的意思是你不能依赖顺序。但是，在遍历字典时，元素必须以*某种*顺序出现。此顺序受插入项目的顺序影响，虽然不明显，但它们在这两个字典中以两种不同的顺序插入：`dict()`构造函数获取关键字字典，然后将其插入到构造的`dict`,所以实际上第一个元素`dict`被插入了两次！首先按照您指定它们的顺序，然后按照它们最终在该步骤中构建的字典中的任何顺序。

假设：（`matplotlib`或您正在使用的 Python 版本）中有一些东西关心字典项的顺序。事实上，由于第二个有它的`edgecolor`键，所以它可能跳过第一个值，或者可能是其中一个后面的值有一个副作用，导致它被覆盖`edgecolor`（例如，可能`facecolor`还设置`edgecolor`以确保面之间没有间隙）。这可能被合理地称为错误，因为行为可能会根据关键字从字典中出现的顺序而有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:59:17.277

如果将该行替换为：

```
label.set_bbox({"facecolor": "white", "alpha":0.65, "edgecolor": "None",}) 
```

它工作正常。

我认为这是渲染器中的错误，`set_alpha`或者可能是渲染器中的错误。

作为一种解决方法，您可以将线宽设置为 0：

```
label.set_bbox({"facecolor": "white", "edgecolor": "None","alpha":0.65, 'lw':0}) 
```

这将确保不会绘制线条，而与颜色/alpha 无关。

代码的工作方式是传递`set_bbox`a`dict`然后存储在`_bbox`. 在绘制时， if `_bbox`is not `None`（并且没有`_bbox_patch`）`_bbox`传递给`patches.bbox_artist`which 是一个函数（在文档字符串中标记为调试函数！），它使用 动态`dict`生成`Rectangle`对象（不返回！）。`set_*`矩形中的某个`draw`地方是错误所在。

# php - 如何在多个用户同时在 PHP 中查看页面内容时更新页面内容？

> ID：16107842
> 
> 赞同：1
> 
> 时间：2013-04-19T15:11:59.287
> 
> 标签：php, ajax, live-update

多个用户同时访问我的页面。

**用户1：**访问页面并更改标题名称

**用户 2：**用户 2 已经在该页面上，但看到旧标题，标题必须自动更新为新标题。

我知道我可以简单地使用`AJAX`来调用`every 5 minutes`，但我试图看看是否有任何其他方式可能触发一个事件到由不同用户打开的页面的所有实例，如果其中一个被更新，所有其他页面都会自动更新为最新的无需等待**5 分钟 ajax 调用**的数据。Ajax 似乎**效率低下**，因为它会做很多`ajax calls`事情，而且如果**用户 1**更新标题而**用户 2**更新标题以及在用户 2 的页面更新之前会发生什么`5 minute ajax call`。

不要求代码，只需要建议我是否应该每 5 分钟继续使用 AJAX 调用并对此感到满意，或者有更好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:17:24.743

尝试实时调查网络套接字，服务器和浏览器之间的双向通信。

[http://socketo.me/](http://socketo.me/)

我自己正处于使用它的早期阶段，但它似乎是一个符合您要求的解决方案。

另外，也许看看推送通知

例如[http://www.pubnub.com/blog/php-push-api-walkthrough](http://www.pubnub.com/blog/php-push-api-walkthrough)

# ocaml - Ocaml 和算法交易

> ID：16107844
> 
> 赞同：0
> 
> 时间：2013-04-19T15:12:03.683
> 
> 标签：ocaml, algorithmic-trading, quantitative-finance

我对算法交易领域完全陌生。我刚刚完成了一门基于 Ocaml 的课程，并阅读了有关 Jane Street 的信息。显然他们是一家拥有大量资源的大公司，但使用 Ocaml 进行小时间算法交易是否可行？

我知道这似乎是一个愚蠢的问题，但是（根据我的发现）Ocaml 没有任何交易 API。这意味着必须从头开始编写对吗？

任何见解都将不胜感激，就像我说我是这个领域的完全菜鸟一样。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:30:17.940

我最近注意到 Opam 中的这个包可以为交易 API 提供起点：“ [IBX](https://bitbucket.org/ogu/ibx)是建立在 Jane Street 的核心和异步库之上的 Interactive Brokers Trader Workstation API (TWS API) 的纯 OCaml 实现。”

至于一般的开源交易算法，这个项目最近开始了： http: [//scarcecapital.com/hft/](http://scarcecapital.com/hft/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:22:10.430

我认为这个问题可能对 Stack Overflow 环境来说太开放了，对你没有用处。Stack Overflow 适用于当您遇到要解决的特定问题时。

但固执己见，我不得不说 OCaml 可能非常适合算法交易。强大的类型系统和不可变数据往往有助于避免错误，同时允许您快速编码。至少，这是我发现的。但是您需要将 OCaml 插入您的数据源和交易执行通道，这将是额外的工作。对这方面一无所知，不知道有没有其他语言的库。

真正这样做的人很可能有动力保守自己的秘密。但无论语言如何，这都是正确的。

# php - 生成超过 50000 条记录的 pdf

> ID：16107846
> 
> 赞同：1
> 
> 时间：2013-04-19T15:12:07.190
> 
> 标签：php, mysql, tcpdf, fpdf, mpdf

您好我正在尝试生成超过 500000 条记录的交易报告，我尝试了 mPDF、FPDF、TCPDF。

以上所有都会产生错误

```
<i>Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 6180881 bytes) in J:\shaonline\tcpdf\tcpdf.php on line 20476</i> 
```

我尝试将内存大小设置为 1024M，超时设置为 30M，但仍然出现同样的错误。在小于 1000 的记录上，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:16:09.963

我不会这样做，因为所有这些库 AFAIK 将完整的 PDF 流保存在内存中，直到它们将其写入磁盘。将您的数据导出为，例如 XML，并使用另一种技术将其转换为 PDF，例如 XSL-FO。

# c# - 具有多个 DbContext 和数据库的 WCF 数据服务

> ID：16107852
> 
> 赞同：2
> 
> 时间：2013-04-19T15:12:26.170
> 
> 标签：c#, wcf, wcf-data-services, dbcontext

这是我第一次使用 WCF DataServices，但是当我实现我的服务类时，我只需引用我的 DBContext 就能够启动并运行一个简单的实体支持服务，例如：

```
public class MyDataService : DataService<MyDBContext> 
```

然后我可以简单地选择我想要公开的实体，它就可以工作，这很酷。但事情从来没有像开发人员那么简单吗？我的情况更复杂，所以我有两个问题：

1.  在上面的 MyDBContext 的简单情况下，我不必担心连接字符串，因为该上下文反映了在整个应用程序中共享的单个数据库，因此连接字符串仅存储在配置中并使用默认构造函数进行实例化。但是，我还需要公开对特定于部门的第二个 DBContext 的访问（我们称之为 DepartmentDBContext）。换句话说，取决于谁发出请求，我需要将它们路由到他们的特定数据库（所以相同的上下文，但根据请求用不同的连接字符串实例化）。应该如何处理最好？
2.  除了我的消费者或多或少可以完全访问的 DepartmentDBContext 之外，我还需要公开存在于不同数据库（以及不同的 dbcontexts）中的有限数据片段，因此我需要建立一种机制来做到这一点而不暴露我的整个数据模型。实际上，我需要公开的只是一些 Ids 和 Name 属性（想象一下 DepartmentId、CustomerId、CustomerName、AccountID、AccountName 等）。我的想法只是将这些属性包装到一个 POCO 中并将其公开给消费者，因为这就是他们最终需要的，但我不确定我应该如何通过 WCF DataServices 编写它，因为它不会被绑定到单一的上下文。

提前感谢您提供的任何提示或建议

# java - 半通用检查是否为空，用 Java 中的默认函数替换

> ID：16107859
> 
> 赞同：1
> 
> 时间：2013-04-19T15:12:52.333
> 
> 标签：java, generics

我正在寻找一种方法来制作此操作的通用功能：

```
SomeObject object = (object != null) ? object : SomeObject.default(); 
```

假设`SomeObject.default()`返回 SomeObject 的默认实例。

我想我需要一个像这样的界面：

```
public interface Defaultable {
     public /* static */ Defaultable default(); //corrected
} 
```

还有一个像这样的功能：

```
public Defaultable defaultIfNull(Defaultable someOb){
    return (someOb != null) ? someOb : Defaultable.default();
} 
```

除了最后一个函数调用会失败，因为我们想要具体类的静态方法，而不是接口。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:18:01.563

不，不是真的 -`null`作为参数传递的没有任何类型信息。您不能使用通用工厂来做到这一点，因为为此您需要手头有类型才能获得正确的工厂对象。

第三，*为什么*需要这种模式？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T11:26:18.557

```
public static <T> T replaceIfNull(T objectToCheck, T defaultValue) {
    return objectToCheck == null ? defaultValue : objectToCheck;
}

replaceIfNull(getXdata(),BigDecimal.ZERO).add(getYdate)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:20:10.293

只需从界面中删除静态。这不是必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T15:48:57.033

怎么样：

```
public <T> T firstNonNull(T ... vals) {
   // omitted
} 
```

这不完全是您想要的，但更通用（并且有效）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T15:49:36.880

分步实施：

第1步

```
public abstract class Defaultable {

public abstract  Defaultable defaultMethod();

public Defaultable defaultIfNull(Defaultable someOb){
    return (someOb != null) ? someOb : defaultMethod();
} 
```

}

第2步

```
public class DefImpl extends Defaultable{       
@Override
public  DefImpl defaultMethod() {       
            return new DefImpl();
} 
```

}

第 3 步

```
Defaultable def = new DefImpl();
def.defaultIfNull(null); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T16:05:01.613

像这样使它成为非静态的：

```
public interface Defaultable {
     public Defaultable default(Defaultable someOb); 
} 
```

和一个像这样的实现：

```
public Defaultable defaultIfNull(Defaultable someOb){
    return (someOb != null) ? someOb :this; // Return myself if the provided is null
} 
```

你会这样称呼它：

```
return new DefaultableImpl().defaultIfNull(someObject); 
```

# c++ - 侵犯隐私 - C++ 标准如何处理它？

> ID：16107861
> 
> 赞同：3
> 
> 时间：2013-04-19T15:12:59.217
> 
> 标签：c++, c++11, polymorphism, standards, access-specifier

考虑下面的代码片段。

Sayhi() 方法在类 Base 中具有公共访问权限。

Sayhi() 已被 Derived 类重写为私有方法。

通过这种方式，我们可以**侵入某人的隐私**，而 C++ 无法检测到它，因为事情发生在运行时。

我知道这是“纯粹的”编译时检查。但是当使用一些厚继承层次时，程序员可能会错误地更改访问说明符。标准不应该至少有发言权吗？某种警告信息。

为什么当覆盖或虚函数的访问说明符不同时，编译器至少不会发出警告消息？

**Q1。C++ 标准对这种运行时异常有什么看法吗？**

**Q2。我想从 C++ 标准的角度理解，为什么标准不强制编译器实现者进行警告诊断？**

```
#include <iostream>

class Base {
    public:
        virtual void Sayhi() { std::cout<<"hi from Base"<<std::endl; }
};

class Derived : public Base
{
    private:
        virtual void Sayhi() { std::cout<<"hi from Derived"<<std::endl; }
};

int main() {
    Base *pb = new Derived;
    // private method Derived::Sayhi() invoked.
    // May affect the object state!
    pb->Sayhi(); 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T15:18:54.833

> C++ 标准对这种运行时异常有什么看法吗？

不。访问控制纯粹是编译时的，影响可以使用哪些名称，而不影响可以调用哪些函数。

因此，在您的示例中，您可以访问 name `Base::Sayhi`，但不能访问`Derived::Sayhi`; 和访问`Base::Sayhi`允许您虚拟调用任何覆盖它的函数。

> 为什么标准不强制编译器实现者进行警告诊断？

该标准根本没有关于警告的内容。它只是定义了格式良好的代码的行为。由编译器编写者决定哪些警告可能有用；并警告所有私人覆盖，以防万一你不是要覆盖它们听起来会产生很多误报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:16:51.990

访问规范不能放松，只能收紧。
`Sayhi()`在`public`基类中，所以基本上所有从它派生和覆盖的类都应该期望方法是`public`，没有入侵。重写函数的访问规范已经很好地指定了，因为该方法被声明`public`为开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:51:31.893

即使您的问题已经得到解答，我还是想补充一点。

虽然您将此视为“异常”并希望进行诊断，**但这实际上很有用：您可以确保您的实现只能以多态方式使用。**派生类应该只有一个公共 ctor 而没有其他公共函数，所有重新实现的成员函数都应该是私有的。

# c# - 托管服务提供商阻止 Web 服务响应 -（1and1 托管）

> ID：16107865
> 
> 赞同：2
> 
> 时间：2013-04-19T15:13:16.500
> 
> 标签：c#, asp.net, asp.net-mvc-4, webservice-client

我有一个用 ASP.NET MVC 4 编写的应用程序。我可以访问远程 Web 服务。我将它作为 WebReference 添加到我的解决方案中。当我在本地主机上调用它的方法时，一切都很好，问题出在已部署的版本上。服务器提供商将其作为“中等信任”运行。当我从托管应用程序调用 WebService 方法时，出现错误：

![在此处输入图像描述](https://i.stack.imgur.com/S3YEo.png)

我认为问题出在托管服务器上的防火墙规则中，我的服务绑定类型是默认设置的“basicHttpBinding”。在这种情况下，我的监听端口是随机的，那么我该如何通过呢？如何为 WebService 响应设置静态侦听端口，以便我可以要求 hosing 提供商为我的应用程序设置防火墙端口？

我的绑定配置：

```
 <client>
      <endpoint address="http://WebServiceURL:8585/Api" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IETRService" contract="ETRService.IETRService" name="BasicHttpBinding_IETRService"  />
    </client> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:35:56.130

部署时，您应该在标准端口上侦听，我会假设（从本地测试中删除端口：8585）以连接到您的服务器。

```
<client>
    <endpoint address="http://WebServiceURL/Api" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IETRService" contract="ETRService.IETRService" name="BasicHttpBinding_IETRService"  />
</client> 
```

# c# - WPF 中的快速 2D 图形

> ID：16107877
> 
> 赞同：40
> 
> 时间：2013-04-19T15:13:38.620
> 
> 标签：c#, wpf, performance, drawing, drawingvisual

我需要在 WPF 中绘制大量的 2D 元素，例如线条和多边形。他们的立场也需要不断更新。

我在这里查看了许多答案，这些答案大多建议使用 DrawingVisual 或覆盖 OnRender 函数。为了测试这些方法，我实现了一个简单的粒子系统渲染 10000 个椭圆，我发现使用这两种方法的绘图性能仍然非常糟糕。在我的 PC 上，每秒的帧数不能超过 5-10 帧。当您考虑到我使用其他技术轻松绘制 1/2 百万个粒子时，这是完全不能接受的。

所以我的问题是，我是在违反 WPF 的技术限制还是我错过了什么？还有什么我可以使用的吗？欢迎任何建议。

**这是我尝试过的代码**

MainWindow.xaml 的内容：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="500" Width="500" Loaded="Window_Loaded">
    <Grid Name="xamlGrid">

    </Grid>
</Window> 
```

MainWindow.xaml.cs 的内容：

```
using System.Windows.Threading;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        EllipseBounce[]     _particles;
        DispatcherTimer     _timer = new DispatcherTimer();

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {

            //particles with Ellipse Geometry
            _particles = new EllipseBounce[10000];

            //define area particles can bounce around in
            Rect stage = new Rect(0, 0, 500, 500);

            //seed particles with random velocity and position
            Random rand = new Random();

            //populate
            for (int i = 0; i < _particles.Length; i++)
            {
               Point pos = new Point((float)(rand.NextDouble() * stage.Width + stage.X), (float)(rand.NextDouble() * stage.Height + stage.Y));
               Point vel = new Point((float)(rand.NextDouble() * 5 - 2.5), (float)(rand.NextDouble() * 5 - 2.5));
                _particles[i] = new EllipseBounce(stage, pos, vel, 2);
            }

            //add to particle system - this will draw particles via onrender method
            ParticleSystem ps = new ParticleSystem(_particles);

            //at this element to the grid (assumes we have a Grid in xaml named 'xmalGrid'
            xamlGrid.Children.Add(ps);

            //set up and update function for the particle position
            _timer.Tick += _timer_Tick;
            _timer.Interval = new TimeSpan(0, 0, 0, 0, 1000 / 60); //update at 60 fps
            _timer.Start();

        }

        void _timer_Tick(object sender, EventArgs e)
        {
            for (int i = 0; i < _particles.Length; i++)
            {
                _particles[i].Update();
            }
        }
    }

    /// <summary>
    /// Framework elements that draws particles
    /// </summary>
    public class ParticleSystem : FrameworkElement
    {
        private DrawingGroup _drawingGroup;

        public ParticleSystem(EllipseBounce[] particles)
        {
            _drawingGroup = new DrawingGroup();

            for (int i = 0; i < particles.Length; i++)
            {
                EllipseGeometry eg = particles[i].EllipseGeometry;

                Brush col = Brushes.Black;
                col.Freeze();

                GeometryDrawing gd = new GeometryDrawing(col, null, eg);

                _drawingGroup.Children.Add(gd);
            }

        }

        protected override void OnRender(DrawingContext drawingContext)
        {
            base.OnRender(drawingContext);

            drawingContext.DrawDrawing(_drawingGroup);
        }
    }

    /// <summary>
    /// simple class that implements 2d particle movements that bounce from walls
    /// </summary>
    public class SimpleBounce2D
    {
        protected Point     _position;
        protected Point     _velocity;
        protected Rect     _stage;

        public SimpleBounce2D(Rect stage, Point pos,Point vel)
        {
            _stage = stage;

            _position = pos;
            _velocity = vel;
        }

        public double X
        {
            get
            {
                return _position.X;
            }
        }

        public double Y
        {
            get
            {
                return _position.Y;
            }
        }

        public virtual void Update()
        {
            UpdatePosition();
            BoundaryCheck();
        }

        private void UpdatePosition()
        {
            _position.X += _velocity.X;
            _position.Y += _velocity.Y;
        }

        private void BoundaryCheck()
        {
            if (_position.X > _stage.Width + _stage.X)
            {
                _velocity.X = -_velocity.X;
                _position.X = _stage.Width + _stage.X;
            }

            if (_position.X < _stage.X)
            {
                _velocity.X = -_velocity.X;
                _position.X = _stage.X;
            }

            if (_position.Y > _stage.Height + _stage.Y)
            {
                _velocity.Y = -_velocity.Y;
                _position.Y = _stage.Height + _stage.Y;
            }

            if (_position.Y < _stage.Y)
            {
                _velocity.Y = -_velocity.Y;
                _position.Y = _stage.Y;
            }
        }
    }

    /// <summary>
    /// extend simplebounce2d to add ellipse geometry and update position in the WPF construct
    /// </summary>
    public class EllipseBounce : SimpleBounce2D
    {
        protected EllipseGeometry _ellipse;

        public EllipseBounce(Rect stage,Point pos, Point vel, float radius)
            : base(stage, pos, vel)
        {
            _ellipse = new EllipseGeometry(pos, radius, radius);
        }

        public EllipseGeometry EllipseGeometry
        {
            get
            {
                return _ellipse;
            }
        }

        public override void Update()
        {
            base.Update();
            _ellipse.Center = _position;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-27T00:13:53.550

我相信提供的示例代码和它得到的一样好，并且展示了框架的局限性。在我的测量中，我分析了 15-25 毫秒的平均成本归因于渲染开销。本质上，我们在这里只讨论中心（依赖）属性的修改，这是相当昂贵的。我认为它很昂贵，因为它将更改直接传播到 mil-core。

一个重要的注意事项是，开销成本与在模拟中位置发生变化的对象的数量成正比。当大多数对象是时间连贯的（即不改变位置）时，在其自身上渲染大量对象不是问题。

这种情况的最佳替代方法是使用[D3DImage](https://docs.microsoft.com/en-us/dotnet/api/system.windows.interop.d3dimage)，它是 Windows Presentation Foundation 的一个元素，用于呈现使用 DirectX 呈现的信息。一般来说，这种方法应该是有效的，性能明智的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-29T06:43:12.917

您可以尝试使用 WriteableBitmap，并在后台线程上使用更快的代码生成图像。然而，你唯一能做的就是复制位图数据，所以你要么必须编写自己的原始绘图例程，要么（甚至可能在你的情况下工作）创建一个“印章”图像，你可以将它复制到你的粒子的任何地方去...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-07T21:58:30.133

我发现最快的 WPF 绘图方法是：

1.  创建一个绘图组“backingStore”。
2.  在 OnRender() 期间，将我的绘图组绘制到绘图上下文
3.  任何时候我想要，backingStore.Open() 并在其中绘制新的图形对象

对我来说，来自 Windows.Forms 的令人惊讶的事情是，在 OnRender() 期间将其添加到 DrawingContext*之后，我可以更新我的 DrawingGroup。*这将更新 WPF 绘图树中现有的保留绘图命令并触发有效的重绘。

在我用 Windows.Forms 和 WPF ( [SoundLevelMonitor](https://github.com/jeske/SoundLevelMonitor) ) 编写的一个简单应用程序中，这种方法在性能上与即时 OnPaint() GDI 绘图非常相似。

我认为 WPF 通过调用 OnRender() 方法造成了损害，它可能被更好地称为`AccumulateDrawingObjects()`

这基本上看起来像：

```
DrawingGroup backingStore = new DrawingGroup();

protected override void OnRender(DrawingContext drawingContext) {      
    base.OnRender(drawingContext);            

    Render(); // put content into our backingStore
    drawingContext.DrawDrawing(backingStore);
}

// I can call this anytime, and it'll update my visual drawing
// without ever triggering layout or OnRender()
private void Render() {            
    var drawingContext = backingStore.Open();
    Render(drawingContext);
    drawingContext.Close();            
} 
```

* * *

我也尝试过将 RenderTargetBitmap 和 WriteableBitmap 都用于 Image.Source，并直接写入到 DrawingContext。上述方法速度更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T10:10:24.993

在 Windows 窗体中，这些东西让我退回到；

*   为最高级别的容器设置 Visible=False（例如表单本身的画布）
*   画了很多
*   设置可见=真

不确定 WPF 是否支持这一点。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-24T20:43:32.877

以下是您可以尝试的一些事情：（我用您的示例进行了尝试，它似乎看起来更快（至少在我的系统上））。

*   使用 Canvas 而不是 Grid（除非您有其他原因）。播放 BitmapScalingMode 和 CachingHint：

    ```
    <Canvas Name="xamlGrid" RenderOptions.BitmapScalingMode="LowQuality" RenderOptions.CachingHint="Cache" IsHitTestVisible = "False">

    </Canvas> 
    ```

*   为 GeometryDrawing 中使用的 Brush 添加一个 StaticResource：

    ```
    <SolidColorBrush x:Key="MyBrush" Color="DarkBlue"/> 
    ```

在代码中用作：

```
 GeometryDrawing gd = new GeometryDrawing((SolidColorBrush)this.FindResource("MyBrush"), null, eg); 
```

我希望这有帮助。

# java - 在 jsvc 类路径中使用多个 jar

> ID：16107878
> 
> 赞同：5
> 
> 时间：2013-04-19T15:13:40.880
> 
> 标签：java, daemon, jsvc, apache-commons-daemon

我正在尝试使用 jsvc 让 Java 应用程序作为 Linux 服务运行。我发现[如何使用 jsvc 将 java 程序转换为守护进程？](https://stackoverflow.com/questions/7687159/how-to-convert-a-java-program-to-daemon-with-jsvc)这能够让我大部分时间，但我仍在努力弄清楚类路径。

我收到以下错误到 st​​derr：

> 19/04/2013 10:43:18 12233 jsvc.exec 错误：找不到守护程序加载程序 org/apache/commons/daemon/support/DaemonLoader
> 
> 19/04/2013 10:43:18 12231 jsvc.exec 错误：服务退出，返回值为 1

运行时似乎无法找到 commons-daemon.jar。

我的应用程序的结构使得应用程序本身位于一个 jar 文件中，具有依赖项，包括 lib 目录中的 commons-daemon。

*   守护进程脚本.sh
*   myapp.jar
*   lib/commons-daemon.jar
*   库/其他罐子

这是我的 daemon-script.sh 的相关部分：

> LIB_DIR=$(pwd)/lib/*
> 
> CLASS_PATH=$(pwd)/myapp.jar
> 
> $EXEC -home $JAVA_EXEC -cp $CLASS_PATH:$LIB_DIR -outfile $LOG_OUT -errfile $LOG_ERR -pidfile $PID $1 $CLASS

我尝试了很多变体：相对路径，特别是引用 lib/commons-daemon.jar，没有通配符等。有人知道如何使它正常工作吗？

此外，myapp.jar 是一个自执行 jar *（主要用于测试目的，是的，我仍然需要它作为服务运行）*，因此 manifest.mf 包含 Class-Path 和 Main-Class 属性。有没有办法让 jsvc 识别清单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T13:57:30.900

您可以在 JSVC 中使用多个 jar，在它们之间使用**:**。

对于您的特定问题，解决方案是将 CLASS_PATH 变量更改为：

```
CLASS_PATH=$(pwd)/myapp.jar:$(pwd)/lib/commons-daemon.jar:$(pwd)/lib/other-jars 
```

或者，您可以使用如下通配符将所有 jar 包含在目录中：

```
CLASS_PATH=$(pwd)/myapp.jar:$(pwd)/lib/*.jar 
```

希望这可以帮助

# java - JSTL 设置变量值

> ID：16107882
> 
> 赞同：0
> 
> 时间：2013-04-19T15:13:57.413
> 
> 标签：java, performance, jstl

我对 JSTL 很陌生，但我真的很困惑为什么这会返回一个值：

```
<c:set var="childPage" value="<%= resourceResolver.resolve(properties.get(\"childPage\", "")).adaptTo(Users.class)%>" /></c:set> 
```

这会返回null吗？

```
<c:set var="childPage"><%= resourceResolver.resolve(properties.get("childPage", "")).adaptTo(Users.class) %></c:set> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:21:02.690

为什么不这样做：

```
pageContext.setAttribute("childPage", 
    resourceResolver.resolve(properties.get("childPage", "")).adaptTo(Users.class)
); 
```

然后您将可以`${childPage}`在页面内访问。

# python - 使用曲线拟合的具有常数因子的幂律

> ID：16107884
> 
> 赞同：3
> 
> 时间：2013-04-19T15:14:02.600
> 
> 标签：python, scipy, curve-fitting

我想使用具有常数因子的幂律来拟合我的 x 和 y 数据。我的幂律模型是 y(r) = F0 + F*(r)**alpha 其中 F0 是一个常数。我的代码是，

```
x = [0.015000000000000001, 0.024999999999999998, 0.034999999999999996, 0.044999999999999998, 0.055, 0.065000000000000002, 0.075000000000000011, 0.085000000000000006, 0.094999999999999987, 0.125, 0.17500000000000002, 0.22500000000000003, 0.27500000000000002]

y= [5.6283727993522774, 4.6240796612752799, 3.7366642904247769, 3.0668203445969828, 2.5751865553847577, 2.0815063796430979, 1.7152655187581032, 1.4686235817532258, 1.2501921057958358, 0.80178306738561222, 0.43372429238424598, 0.26012305284446235, 0.19396186239328625]

def func(x,m,c,c0):
      return c0 + x**m * c

coeff,var=curve_fit(func,x,y)

print coeff

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.6/dist-packages/scipy/optimize/minpack.py", line 511, in curve_fit
    raise RuntimeError(msg)
RuntimeError: Optimal parameters not found: Number of calls to function has reached maxfev = 800. 
```

然后我改变了 maxfev=2000 然后它给了我错误的 coeff 值。如果我改变，我在 func 中的斜率 m 到 (-m) 那么它给了我正确的答案，但我的斜率将是负数。有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T15:26:22.087

问题是`curve_fit`从对参数太差的默认猜测开始（即，它从 1 开始）。

相反，请使用您对数据的了解进行非常粗略的猜测：至少，您知道`m`必须是负数（因为它是幂律）。因此，尝试`m`从`-1`. （您可以开始截距项`0`和斜率项，`1`因为它们是合理的默认值）。

```
def func(x,m,c,c0):
    return c0 + x**m * c

coeff,var=curve_fit(func,x,y, p0=[-1, 1, 0]) 
```

这将为您提供正确的输出：

```
[-0.34815029  2.16546037 -3.4650323 ] 
```

（请注意，您可以从和`m`之间的任何数字开始，它仍然会收敛到这个结果）。`0``-9`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:07:12.277

查看您的数据，考虑到 X 和 Y 之间差异的数量级，一个想法是重新调整您的问题。

[第一篇文章](https://stackoverflow.com/questions/10181151/trying-to-get-reasonable-values-from-scipy-powerlaw-fit)中详细给出了一个例子。

# java - 延迟后如何获取新图像？

> ID：16107886
> 
> 赞同：0
> 
> 时间：2013-04-19T15:14:05.477
> 
> 标签：java, image, swing

我试图在每 10 秒延迟间隔后将同一图像的新图像绘制到屏幕上。我一直试图自己弄清楚，我也查了一些东西，但找不到任何有帮助的东西。

我的具体问题是我不知道如何使用原始图像绘制新图像。我想让它每 10 秒出现一次新图像并开始跟随它的 ID 数组，然后跟随它自己的 xy 坐标 (IDx[0]=x; IDx[0]=y;)

排除了每个新图像的 Graphics 中的普通 g.drawImage ，因为我需要它来绘制新图像/机器人，直到满足它们停止的条件。但是目标是相同的，只是以一种自动的方式。

我的窗口：

```
package pack;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class Window extends JPanel implements Runnable {

    public static final int GAME_WIDTH = 512;
    public static final int GAME_HEIGHT = GAME_WIDTH * 3 / 4;
    public static final int SCALE = 2;

    public static Image Player = Controls.Player;
    public static Image BB = ImageLoader.BB;
    public static Image Grass = ImageLoader.Grass;

    public static boolean painting = true;

    public static boolean Start = true;
    public static boolean Menu;

    public static boolean ONhs;
    public static boolean OFFhs;

    public void paint(Graphics g) {
        super.paintComponent(g);

        g.setColor(Color.GREEN);
        g.drawString("UPS: " + Integer.toString(UPS.ups), 100, 120);
        g.drawString("FPS: " + Integer.toString(UPS.fps), 100, 130);

        // // MENU ////
        if (Menu) {
            Image Grass = ImageLoader.Grass;
            Image onHoverStart = ImageLoader.onHoverStart;
            Image offHoverStart = ImageLoader.offHoverStart;

            g.drawImage(Grass, GAME_WIDTH * SCALE / 4, GAME_HEIGHT * SCALE / 6, null);

            if (ONhs) {
                g.drawImage(onHoverStart, 400, 250, null);
            } else {
                g.drawImage(offHoverStart, 400, 250, null);
            }
        }

        // // STARTED // //
        if (Start) {
            Image Player = Controls.Player;
            Image BB = ImageLoader.BB;

            g.drawImage(BB, PlayerData.BBDirectionx, PlayerData.BBDirectiony, null);

            g.drawImage(ImageLoader.Bot[0], Mob.BotxSELF - 32, Mob.BotySELF - 25, null);
            g.drawImage(ImageLoader.Bot[1], Mob.BotxSELF - 32, Mob.BotySELF - 25, null);

            g.drawImage(Player, Controls.Playerx - 45, Controls.Playery + 5, null);
        }
    }

    @Override
    public void run() {
        while (painting) {
            UPS.fpstick = UPS.fpstick + 1;
            repaint();
            try {
                Thread.sleep(12);
            } catch (InterruptedException e) {
            }
        }
    }

    public static void draw(Graphics g) {
        g.drawImage(ImageLoader.Bot[0], 32, 25, null);

    }

    public Window() {

        JFrame jf = new JFrame();
        JPanel panel = new JPanel(new BorderLayout());

        Controls c = new Controls("Window using Controls for Listener");

        panel.add(this);

        this.setPreferredSize(new Dimension(GAME_WIDTH * SCALE, GAME_HEIGHT * SCALE));
        this.setMinimumSize(new Dimension(GAME_WIDTH * SCALE, GAME_HEIGHT * SCALE));
        this.setMaximumSize(new Dimension(GAME_WIDTH * SCALE, GAME_HEIGHT * SCALE));
        this.setBackground(Color.DARK_GRAY);

        jf.setContentPane(panel);
        jf.pack();

            jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jf.setSize(GAME_WIDTH * SCALE, GAME_HEIGHT * SCALE);
        jf.setVisible(true);
        jf.setResizable(false);

        jf.addKeyListener(c);
        jf.addMouseListener(c);
        jf.addMouseMotionListener(c);

    }

} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:22:55.213

始终调用您覆盖的方法的 super.XXX()。你应该压倒一切`paintComponent()`：

```
//public void paint(Graphics g) {
public void paintComponent(Graphics g) {
        super.paintComponent(g); 
```

不要将 Thread.sleep() 用于动画。相反，您应该使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。

> 排除了每个新图像的 Graphics 中的普通 g.drawImage，因为我需要它来绘制新图像/机器人

您可以使用相同的 BufferedImage。当 Timer 触发时，您会更新图像。然后paintComponent() 方法只是绘制更新的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:22:47.540

您已经拥有绘制单独线程所需的结构，为什么不使用它们？这对我来说太像家庭作业了......

# java - Cookie 管理器导致致命信号 11

> ID：16107892
> 
> 赞同：12
> 
> 时间：2013-04-19T15:14:40.667
> 
> 标签：java, android, cookiemanager

当我尝试在 cookiemanager 上设置 cookie 时，我的应用程序静默崩溃（没有强制关闭弹出窗口）。

```
mHttpClient.getParams().setBooleanParameter(ClientPNames.HANDLE_REDIRECTS, false);
HttpGet http_get = new HttpGet(url); 
HttpResponse response = mHttpClient.execute(http_get);

for(Cookie cookie : mHttpClient.getCookieStore().getCookies()) {

    Log.d(AppPreferences.TESTTAG,"cookie =  " + cookie.getName());
    if(cookie.getName().equals("SACSID") || cookie.getName().equals("ACSID"))
    {
        response.getEntity().consumeContent();
        String cookieString = cookie.getName() + "=" + cookie.getValue() + "; domain=" + cookie.getDomain();  
        CookieManager.getInstance().setCookie(cookie.getDomain(), cookieString); //**crashes here**
        return true;
    }                   
} 
```

这是我从 logcat 得到的所有信息

```
04-19 22:51:35.277: W/dalvikvm(16704): Invalid indirect reference 0x414bb040 in decodeIndirectRef
04-19 22:51:35.277: E/dalvikvm(16704): VM aborting
04-19 22:51:35.281: A/libc(16704): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1), thread 16754 (AsyncTask #1) 
```

这是生成的墓碑日志：[http ://textuploader.com/?p=6&id=gPpJ](http://textuploader.com/?p=6&id=gPpJ)

它在 CookieManager setCookie() 行上失败（即我在该行之前和之后记录一条消息，它打印之前的消息但不是之后的消息）

有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-06-09T14:39:18.783

`CookieSyncManager.createInstance(context);`在调用 CookieManager 之前添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T10:06:32.837

尝试在 onCreate() 方法中创建 WebView 并销毁它。WebView 在 ContentManager 和 WebKit 之间创建了一些“桥梁”。像这样的一些事情：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_layout);
    WebView web = new WebView(this);
    web.destroy();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:23:02.183

如果您完全确定此崩溃是由上述代码触发的，则表示固件错误。Android SDK 应用程序不可能触发 SIGSEGV。

如果这发生在 Nexus 设备、模拟器或多个设备上，则可能是 Android 错误。[在http://b.android.com](http://b.android.com)上提交问题（如果似乎还没有问题），指出这个问题并可能附加该墓碑日志。

如果这只发生在某些特定设置（例如，一个设备，一个 ROM 模块）而不是其他设置中，则可能是该环境所特有的，在这种情况下，您应该尝试从设备或 ROM 模块制造商处获得帮助。

除此之外，请确保它`cookie.getDomain()`返回一个有效值，因为这似乎是最有可能的罪魁祸首。

# javascript - 如何更改标题/视图的颜色

> ID：16107893
> 
> 赞同：1
> 
> 时间：2013-04-19T15:14:40.777
> 
> 标签：javascript, jquery, html, youtube-api

有没有办法在这个 youtube-api 提要中将标题和视图的颜色从蓝色和黑色更改为白色？工作地点可以在[这里](http://netx.clanteam.com/vs/video.html)找到。

```
 link rel="stylesheet" type="text/css" href="files/style6.css">
<script type="text/javascript" src="files/jquery-1.js"></script>
<script type="text/javascript" src="files/jquery.js"></script>
<script>
$(document).ready(function(){

        $("#main_block").append("<div id = 'data'><ul>.</ul></div>");
        var dataContainer = $("#data ul");
        $.ajax({
            url:'http://gdata.youtube.com/feeds/api/users/googledevelopers/uploads?max-results=50&time=today&alt=jsonc&v=2&callback=?',
            dataType: "jsonp",
            timeout: 5000,
            success: function(data){

                     $.each(data.data.items, 
                               function(i, val) {

                                 if (typeof(val.player) !== 'undefined' && typeof(val.title) !== 'undefined') {

                                    dataContainer.append('<div class="d e"><a href='+val.player["default"]+' target="_blank" title="'+val.title+'">'+val.title+'</a><br /><img src="'+val.thumbnail.sqDefault+'" width="120" height="90" alt="'+val.title+'"/><br />Views '+val.viewCount+'</div>');
                                 }
                         });
                    }
                });
            });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:26:10.853

如果我没有误解您的问题，请将其放入您的样式表文件中

```
#data div.d a{
    color: white;
    text-decoration: none;
}

#data div.d {
    color: white;
} 
```

# cordova - 混合移动应用程序中的增强现实

> ID：16107895
> 
> 赞同：4
> 
> 时间：2013-04-19T15:14:44.967
> 
> 标签：cordova, augmented-reality, wikitude, hybrid-mobile-app

我正在使用 jQueryMobile 和 phonegap 创建一个混合移动应用程序。现在我需要在应用程序的相机视图中实现增强现实。为此，我得到了维基百科。我可以使用混合移动应用程序执行以下链接中提到的功能吗？

[http://www.wikitude.com/showcases/active-website-augments-real-estate/](http://www.wikitude.com/showcases/active-website-augments-real-estate/)

我在这里得到了一些示例应用程序 [https://github.com/Wikitude/wikitude-phonegap/tree/master/Android](https://github.com/Wikitude/wikitude-phonegap/tree/master/Android)

但是我很困惑我是否可以将它用于混合移动应用程序（仅 html、js 和 css 文件），因为这些示例包括 WikitudePlugin.java 文件。

请帮助我，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T07:11:47.430

请查看[维基论坛](http://forum.wikitude.com/home/-/message_boards/view_message/259451)。

您的问题已经在那里得到解答（来自用户“Caroline”的引述）

“Wikitude 插件是一个 Phonegap 插件。Phonegap 插件将本机（对于 Android：Java，对于 iOS：Obj-C）代码文件添加到您的项目中。此本机代码支持您可以从混合代码中调用的功能。因此，您的混合代码仍然是混合的，但在部署到不同平台之前，您还应该为该平台提供 Phonegap 插件（例如 Wikitude 插件）。”

# simpledateformat - SimpleDateFormat 在解析期间返回错误的时区

> ID：16107898
> 
> 赞同：4
> 
> 时间：2013-04-19T15:15:00.243
> 
> 标签：simpledateformat

在创建 Date 对象期间我遇到了一个奇怪的问题。我有以下代码将日期的时区设置为 UTC。在解析语句之前，我看到 sdfDate 的时区为 UTC，但在解析语句之后，我看到 punchDate 具有值：Sat Mar 30 01:00:00 **CET** 2013，我相信这来自我的系统。但是我如何确保即使在解析之后时区也保持不变。

```
Date punchDate = null;
Date punchTime = null;

SimpleDateFormat sdfDate = new SimpleDateFormat("dd.MM.yyyy");
SimpleDateFormat sdfTime = new SimpleDateFormat("HH:mm:ss");

    try
    {
        sdfDate.setTimeZone(TimeZone.getTimeZone("UTC"));
        sdfTime.setTimeZone(TimeZone.getTimeZone("UTC"));
        punchDate = sdfDate.parse(arg1);
        punchTime = sdfTime.parse(arg2);
    }
    catch (ParseException pe)
    {
        System.out.println("Parse exception " +pe.getMessage());
    } 
```

我的要求基本上是我需要从字符串输入创建一个日期对象，但时区应保持 UTC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-04T00:43:23.863

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T09:46:59.440

您的日期对象将与您的本地系统时间相同。您已经创建了具有本地时区的本地日期对象，并将转换后的（UTC）时区分配给本地。

```
Date punchDate = null;
Date punchTime = null; 
```

所以你的日期值保持不变，但它显示在不同的时区值。

# ruby-on-rails - 正确拆分轨道上的红宝石视图

> ID：16107899
> 
> 赞同：1
> 
> 时间：2013-04-19T15:15:03.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, views

玩滑轨，布局有点问题。

我有一个简单的家庭 mvc。主视图的内容只是

```
<h3>Home</h3>
<p>content</p> 
```

我有我的整体设计应用程序视图，其中包含一些部分等。

```
 <section>
                <header>
                  <div class="pull-right">
                      <a class="btn btn-small">Edit</a>
                      <a class="btn btn-small">Blurm</a>
                  </div>
                  <h3>Head goes here</h3>
                </header>
                <%= yield %>
              </section> 
```

现在我来到我的主要部分来显示不同的页面`yield`。我应该如何拆分模板？我应该将完整的应用程序部分放在主视图中以在正确的位置显示标题吗？或者是否有可能使标题与 不同`yield`？

有什么建议么？

PS：如果有人有一个很好的教程或网站来解释如何构建和规划视图。下面的评论会很好。

最好的问候丹尼姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:31:11.620

我认为您是在询问有关使用[命名收益的问题。](http://guides.rubyonrails.org/layouts_and_rendering.html#using-the-content_for-method)

从您的结构中，我们添加了一个名为`header`

```
 <section>
            <header>
              <div class="pull-right">
                  <a class="btn btn-small">Edit</a>
                  <a class="btn btn-small">Blurm</a>
              </div>
              <h3><%= yield :header %></h3>
            </header>
            <%= yield %>
          </section> 
```

然后我们为那个命名的 yield 设置内容：

```
<% content_for :header do %>
    My header
<% end %>

<p> Rest of page ...</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:11:55.103

如果您只是想定期更改标题，我建议您使用具有不同标题的不同布局，您可以通过布局：layout_name 在控制器中指定这些布局，或者使用 js 动态更改标题内容。

# ios - 在 App Store 上升级具有更高部署目标的应用程序

> ID：16107911
> 
> 赞同：1
> 
> 时间：2013-04-19T15:15:55.243
> 
> 标签：ios, deployment, app-store, upgrade

我在 Appstore 上有一个应用程序（不是免费的），它是我的第一个应用程序之一。我想用很多新的东西、图形等来更新它。这些新功能（如集合视图）中的大多数仅适用于 iOS 6，该应用程序针对 iOSes >=3.1。
我宁愿不要乱用运行时​​检查。
由于是付费应用程序，我希望至少所有使用 iOS6 的人都可以免费升级它，而且我不想搞砸旧版本。
如果我提交仅针对 iOS=>6 的升级会发生什么情况，是否会通知较旧的 iOS 升级？他们可以升级吗？将显示诸如“升级仅适用于 iOS>=6”之类的内容？还是只会通过匹配的设备通知？我'[在这里](https://stackoverflow.com/questions/5434459/raising-minimum-ios-deployment-target-version-for-app-update)
谢谢，安德里亚

# netbeans - 使用 JUnit 在 netbeans 中进行单元测试

> ID：16107913
> 
> 赞同：0
> 
> 时间：2013-04-19T15:15:56.127
> 
> 标签：netbeans, junit

我在 NetBeans 中使用 JUnit 运行了一个测试，我得到了这个测试结果：

![在此处输入图像描述](https://i.stack.imgur.com/LRUJy.png)

这是输出消息：

> 测试运行：0，失败：0，错误：2，经过时间：0,336 秒
> 
> ------------- 标准输出 --------------- avant tout après tout ------------- --- ------------- ---------------- 测试用例：calculette.calculMethodeTest：在方法 calculette.Calculette.main 中导致错误 Illegal local variable table length 24 ([Ljava/lang/String;)V java.lang.ClassFormatError: Illegal local variable table length 24 in method calculette.Calculette.main([Ljava/lang/String;)V at calculette.calculMethodeTest.setUpClass(calculMethodeTest.java: 24)
> 
> 测试用例：calculette.calculMethodeTest：在 calculette.calculMethodeTest.tearDownClass(calculMethodeTest.java:30) 处导致 ERROR null java.lang.NullPointerException
> 
> 测试 calculette.calculMethodeTest FAILED 测试报告：C:\Users\Aimad\Documents\NetBeansProjects\Calculette\nbproject\build-impl.xml:933：一些测试失败；请参阅上面的详细信息。构建失败（总时间：12 秒）

这些错误是什么意思？

这是测试方法：

```
**
     * Test of main method, of class Calculette.
     */
    @Test
    public void testMain() {
        System.out.println("main");
        String[] args = null;
        Calculette.main(args);
    }

    /**
     * Test of multiplication method, of class Calculette.
     */
    @Test
    public void testMultiplication() {
        System.out.println("multiplication");
        double a = 2.0;
        double b = -5.0;
        Calculette instance = new Calculette();
        double expResult = -10.0;
        double result = instance.multiplication(a, b);
        assertEquals(expResult, result, 0.0);
    }

    /**
     * Test of division method, of class Calculette.
     */
    @Test (expected = DivisionSurZeroException.class)
    public void testDivision()  {
        System.out.println("division");
        double a = 0.0;
        double b = 0.0;
        Calculette instance = new Calculette();
        double expResult = a/b;
        double result = instance.division(a, b);
        assertEquals(expResult, result, 0.0);

        a = 10;
        b = 10;
        expResult = a/b;
        assertEquals(expResult, result, 0.0);

        a = 10;
        b = 0;
        expResult = a/b;
        assertEquals(expResult, result, 0.0);

        a = 10;
        b = -10;
        expResult = a/b;
        assertEquals(expResult, result, 0.0);

        a = 0;
        b = 10;
        expResult = a/b;
        assertEquals(expResult, result, 0.0);

        a = 0;
        b = -10;
        expResult = a/b;
        assertEquals(expResult, result, 0.0);

        a = -10;
        b = 10;
        expResult = a/b;
        assertEquals(expResult, result, 0.0);

        a = -10;
        b = 0;
        expResult = a/b;
        assertEquals(expResult, result, 0.0);

        a = -10;
        b = -10;
        expResult = a/b;
        assertEquals(expResult, result, 0.0);
    }

    /**
     * Test of addition method, of class Calculette.
     */
    @Test
    public void testAddition() {
        System.out.println("addition");
        double a = -10.1;
        double b = -70.0;
        Calculette instance = new Calculette();
        double expResult = a + b;
        double result = instance.addition(a, b);
        assertEquals(expResult, result, 0.0);
    }

    /**
     * Test of soustraction method, of class Calculette.
     */
    @Test
    public void testSoustraction() {
        System.out.println("soustraction");
        double a = -60.5;
        double b = 5.0;
        Calculette instance = new Calculette();
        double expResult = a - b;
        double result = instance.soustraction(a, b);
        assertEquals(expResult, result, 0.0);
    } 
```

这是原始方法：

```
public static void main(String args[]) {
java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Calculette().setVisible(true);
            }
        });
    }

 @Override
    public double multiplication(double a, double b) {
        return a*b;
    }

    @Override
    public double division(double a, double b)  {
        if(b == 0) throw new DivisionSurZeroException();
        else return a/b;
    }

    @Override
    public double addition(double a, double b) {
        return a + b;
    }

    @Override
    public double soustraction(double a, double b) {
        return a-b;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:20:23.990

虽然这是一个很好的调用，`0.0`但对于测试双重数学并不是一个非常有意义的增量（小、正、非零数是您通常想要的，请查看此处以[了解有关增量是什么的一些讨论](http://www.coderanch.com/t/94967/Testing/jUnit-assert-delta)），但我不相信这是错误的罪魁祸首。这只会导致测试意外失败。

此问题似乎与 Java 7 中字节码验证器的相关更改有关。我似乎可以通过传递参数来解决此问题

```
-XX:-UseSplitVerifier 
```

（如果您需要有关如何设置这些参数的帮助，可以参考此[NetBeans 资源）](http://wiki.netbeans.org/DevFaqPlatformRuntimeProperties)

# asp.net - 从 .Net 2.0 到 .Net 4.0/4.5 的经典 ASP 切换

> ID：16107917
> 
> 赞同：1
> 
> 时间：2013-04-19T15:16:04.793
> 
> 标签：asp.net, iis-7.5, application-pool

拥有一个在 .Net 2.0 框架上运行的经典 ASP 站点。IIS 重写规则在 web.config 中定义，以允许所有友好的 URL。我刚刚在我们的开发环境中切换到 .Net 4.0，现在所有请求都会导致 GenericErrorPage.htm?aspxerrorpath=/404.asp。唯一改变的是应用程序池的框架，从 2.0 到 4.0。从 4.0 切换回 2.0，页面再次加载正常。

知道为什么会这样吗？

# json - facebook 图表评论过滤器和摘要

> ID：16107920
> 
> 赞同：1
> 
> 时间：2013-04-19T15:16:12.267
> 
> 标签：json, facebook, facebook-graph-api

我试图从 Facebook 图表中检索给定帖子的计数或所有评论（包括回复）的顶级评论。

有没有人让 Facebook 图表评论过滤器或评论图表调用的摘要字段起作用？它在文档[https://developers.facebook.com/docs/graphapi/guides/comments/](https://developers.facebook.com/docs/graphapi/guides/comments/)中说，您可以将 ?filter=stream 和或 ?summary=true 添加到图形 url 以包含评论回复和/或摘要信息（计数）在返回的评论集合中。

一个假设的例子是：对于一个公共提要，Facebook 会告诉你一个帖子有 100 条评论，这个数字包括回复，当你实际检索评论时，你可能只会得到 80 条评论，因为图表只返回顶级评论而不是评论及其回复。

真实例子

```
graph.facebook.com/10151579052696276/comments/ 
```

从帖子中获取所有前 25 条评论（使用 object_id），但不包括回复。它只返回顶级评论。这是一个问题，因为 Facebook 返回的帖子评论数与其返回的评论数不匹配。如果您尝试将评论分页设置为您搞砸了，因为它不一致。

为了解决这个问题，我尝试添加过滤器流和摘要

```
graph.facebook.com/10151579052696276/comments/?filter=stream&summary=true 
```

返回完全相同的 JSON。

我尝试包含用户访问令牌（具有所有权限）和应用令牌

在图形资源管理器中自己尝试一下[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-27T02:38:39.910

你的请求Url错误 删除“comments”后的“/”

网址应该是这样的；graph.facebook.com/10151579052696276/comments?filter=stream&summary=true

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-29T23:02:06.480

这是你的答案：

**>> 对于他们的回复评论计数：** [https ://graph.facebook.com/80329313253_10153617216088254/comments?filter=stream&summary=true&access_token=yourtoken](https://graph.facebook.com/80329313253_10153617216088254/comments?filter=stream&summary=true&access_token=yourtoken)

**>> 对于没有回复的评论计数：** [https ://graph.facebook.com/80329313253_10153617216088254/comments?filter=toplevel&summary=true&access_token=yourtoken](https://graph.facebook.com/80329313253_10153617216088254/comments?filter=toplevel&summary=true&access_token=yourtoken)

**注意**：上面的 urls 返回一个 json 对象，它有两个成员（**数据数组**：它将显示评论数据，**摘要对象**：这将包括一个显示 total_counts 的字段）

我花了很长时间才弄清楚摘要显示在所有评论数组之后。希望这能回答你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T23:31:08.583

我不确定我是否完全理解了这个问题，但您是否正在寻找给定帖子的 Facebook 评论总数？如果是这样，这有效：

[https://graph.facebook.com/POST_ID/comments?summary=true&access_token=XXX](https://graph.facebook.com/POST_ID/comments?summary=true&access_token=XXX)

在所有评论 id、评论喜欢等之后，应该有这个摘要：

摘要：{ order：“按时间顺序”，total_count：NUMBER }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-15T16:15:10.973

它返回相同的 json，因为您请求评论列表。如果您只想要摘要，则必须避免使用限制参数进行任何分页。试试这个：graph.facebook.com/10151579052696276/comments/?filter =stream&summary=true& **limit=0**

在 php 中我使用了这个语法： $url="http://graph.facebook.com/?fields=og_object{comments.limit(0).summary(total_count)&10151579052696276"; $FB_Request = file_get_contents($url);

# php - 图片未正确保存

> ID：16107925
> 
> 赞同：2
> 
> 时间：2013-04-19T15:16:15.330
> 
> 标签：php, image, text

这是我正在制作的项目的链接：http: [//1-to-n.com/ik/](http://1-to-n.com/ik/)

输入任何内容并按提交很简单，然后它会转到下一页并在图片上显示文本。一切都很好，但是当我右键单击图片并尝试保存它时，扩展名就像“picture.php.jpe”一样奇怪。

图片生成页面代码如下

```
<?php
//Set the Content Type
header('Content-type: image/jpeg');

// Create Image From Existing File
$jpg_image = imagecreatefromjpeg('vote.jpg');

// Allocate A Color For The Text
$white = imagecolorallocate($jpg_image, 47, 45, 46);

// Set Path to Font File
$font_path = 'MISTRAL.TTF';

// Set Text to Be Printed On Image
$text = $_POST['name'];

// Print Text On Image
imagettftext($jpg_image, 75, 0, 500, 130, $white, $font_path, $text);

// Send Image to Browser
imagejpeg($jpg_image);

// Clear Memory
imagedestroy($jpg_image);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:30:04.547

此处的解决方案是`Content-Disposition`，但您想要什么取决于您希望 UI 如何工作。

您要设置：

```
header('Content-Disposition: %token%; filename="%name_of_file%"'); 
```

在哪里：

*   `%name_of_file%`是您希望用户看到的文件的名称

*   `%token%`是`attachment`或之一`inline`。如果您将其设置为`attachment`，将立即提示用户下载文件，浏览器将不会像当前那样显示图像。如果设置`inline`，用户将在浏览器窗格中显示当前的图像，他们需要右键单击 -> 另存为才能保存图像。

在确定要使用的标头之前，您需要决定 UI 的工作方式。

为了清楚起见，这里有几个具体的例子：

```
// Prompt the user to save the file immediately
header('Content-Disposition: attachment; filename="file.jpg"');

// OR

// Display the image to the user and ask them to manually save it
header('Content-Disposition: inline; filename="file.jpg"'); 
```

值得注意的是，IIRC，旧版本的 IE 存在问题，`inline`因为他们没有注意到建议的文件名。但是，这可以通过`name=""`向`Content-Type:`. 这是违反标准的，但也相当无害。

# c - 分配和获取联合值，类型双关语

> ID：16107926
> 
> 赞同：2
> 
> 时间：2013-04-19T15:16:26.703
> 
> 标签：c, gcc, unions, type-punning

我有工会，好吧。
这个联合在一个结构内，并且那个联合是未命名的（类似的东西）。

```
typedef enum TYPES {INT, FLOAT, CHAR, POINTER TO FUNCTION /* Please pay attention on this */};

typedef struct {
    TYPES type;
    union {
        int integer;
        float real;
        char letter;
        char *string;
        /* here we have a pointer to function syntax but I don't remember how to write it right now*/
    }
} MY_STRUCT; 
```

我将像这样初始化我的结构。

```
MY_STRUCT test = {INT, 22};
```

好的，我知道这项工作是因为，根据定义，当我使用这种初始化时，将使用联合的第一个字段。
所以问题是：
如果我这样写初始化会发生什么？

```
MY_STRUCT test = {INT, 22.2};
```

当我尝试检索浮点值后，我会得到正确的值吗？

```
float var = (float)test.real;
```

这会显示正确的东西吗？
这适用于每种类型吗？甚至指向功能一的指针？

我问这个是因为根据定义，初始化将值放在我的联合的第一个字段中，所以，如果 float 大于 int 会有问题吗？我不知道这一点，所以，我知道指向函数的指针有时可能比 int 大，所以我需要用指向函数的指针作为第一个成员编写我的联合？

我读到 GCC 支持类型双关，甚至 linux 内核也使用类型双关。所以我只担心我是否可以在该结构上使用这种初始化，然后获得正确的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T17:34:19.860

联合的元素共享内存空间，整个联合使用“最大”元素所需的空间。当你用 22.2 初始化时。这表示 01000001101100011001100110011010 使用 fpoint IEEE 754。这取决于精度。和你的

```
float var=(float) test.real 
```

仅当您不更改初始化和此行之间的任何联合元素时才有效。

# msdeploy - Webdeploy 跳过规则包括 .css 文件以及 .cs

> ID：16107927
> 
> 赞同：0
> 
> 时间：2013-04-19T15:16:27.500
> 
> 标签：msdeploy, webdeploy, skip

我正在尝试在我的构建系统中使用 webdeploy。我希望它能够从我的源代码文件中提取内容文件但跳过代码文件。我正在使用跳过规则：

"-skip:objectName=filePath,absolutePath=.*.cs$"

但它会跳过 .css 文件和 .cs 文件。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:47:58.060

您确定您的 CSS 文件一开始就在您的包中吗？请记住，默认情况下，Visual Studio 仅打包/部署以下文件：

1.  包含在`*proj`文件中
2.  标记`Build Action`为`Content`

您可以在`Project Properties -> Package/Publish Web -> Items to deploy`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T16:24:36.720

正则表达式不正确。这对我有用。

```
.*\.cs$ 
```

# encoding - 为什么ARMv7中的一条指令有多个编码

> ID：16107929
> 
> 赞同：4
> 
> 时间：2013-04-19T15:16:29.713
> 
> 标签：encoding, binary, arm, thumb, instruction-set

我目前正在尝试为实现 ARMv7 指令集的 ARM cortex A9 实现反汇编程序。

为此，我正在使用可以在此处下载的手册“DDI0406C_b_arm_architecture_reference_manual.pdf”（在 arm 网站上注册后）：

[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.set.architecture/index.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.set.architecture/index.html)

在本手册的 A8.8 部分的说明详细信息中，我无​​法理解为什么一条指令有多种编码（如 A1、A2、...），这些似乎都是用 ARMv7 实现的。

此外，由于 ARM 皮质 A9 使用了 thumb-2，它是否也实现了 A1/A2/... 编码，还是仅实现 T1/T2... ？

我真的阅读了本手册的所有部分都与编码有关，但我仍然不明白我们如何知道程序使用哪种编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:57:36.043

指令的不同编码在功能上做不同的事情。

使用不同编码的一个例子是`A8.9.12 ADR`

> > 该指令将立即数加到 PC 值以形成 PC 相对地址，并将结果写入目标寄存器。

如果指令被编码为`A1`则偏移量必须被解释为零或正，如果它被编码为`A2`则偏移量为负。

另一个例子是`A8.8.132 POP`

> > 如果列表包含一个以上的寄存器，则将指令汇编为编码​​ A1。如果列表只包含一个寄存器，则汇编指令以编码 A2。

我可以想象`POP`出于性能原因创建不同的编码可能是为了创建不同的微码。

对于您问题的第二部分，Cortex-A9 是一个 ARMv7-A 架构 CPU，它支持您指出的手册中指定的所有指令。也许您还应该阅读[Cortex™-A9 技术参考手册](http://infocenter.arm.com/help/topic/com.arm.doc.subset.cortexa.a9/index.html#cortexa9)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:13:09.560

没有办法在指令流中真正区分 ARM 和 Thumb。您只能根据调用函数的方式来决定（如果最低位设置为 1，则为拇指，否则为手臂）。

ARM-Encoding 相当“稳定”，你只会发现一些 A1 编码，BLX 是一个给出 A2 编码的例子，但这主要是因为新的 ARM-ARM 的结构与旧的不同。BL 和 BLX 是两条不同的指令，BLX 是在额外的指令空间中添加的（通常用于条件的高 4 位设置为 1111，在 v5 之前的 ARM 中意味着“从不执行”。

对于 Thumb-Encodings 它是不同的，有很多，因为它们必须被放置在一个更压缩的指令空间中，A6-220 页有关于如何决定一个 Thumb 指令由两个或一个半字组成的信息.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T17:59:10.200

当处理器处于 arm 模式时，Ax 编码是 arm 的，它将使用这些编码对找到的位进行解码。如果有不止一个 A1、A2，那么显然存在不同的特征或原因。这两条指令可以被认为是分开的（例如，看看 x86 中 mov 指令的过度使用，它有很多编码）。将每个编码视为单独的“指令”。

然后是 Tx 变体，即 thumb 和 thumb2 扩展。thumb 都是 16 位的（bl 可以被解码为两个单独的 16 位指令），它们下面的描述表示“所有 thumb 变体”或“armv4t 到现在”或一些这样的语言。thumb2 扩展都是 32 位的，前 16 位是拇指世界中未定义的指令。这些对支持它们的架构有更多限制。

您将无法为其中一个处理器完全创建反汇编程序，原因与您不能为 x86 或许多其他处理器（全部？）做一个相同的原因。如果您假设所有指令都是一种模式（手臂或拇指或拇指+拇指2）但没有模式混合（手臂+拇指），那么您可以，因为一切都是固定的指令长度，您可以简单地反汇编所有数据和代码，您不会运行任何问题。为了反汇编混合模式，您必须基本上模拟/执行指令并遵循指令流（就像可变字长指令集反汇编器一样）来尝试找到转换，这里的问题当然是在最小负载下的多指令一个寄存器然后bx那个寄存器，有时指令计算涉及数学，并且不能保证地址计算或加载发生在 bx 之前的指令。所以你可以做一些，并通过反汇编程序获得很长的路要走。

如果您使用的处理器支持/允许 thumb2，那么您在检测到拇指代码的入口点时会遇到可变指令长度问题。除非你已经这样做了，否则你必须遵循代码的执行来确定指令从哪里开始（基本可变指令长度反汇编的东西）。

技术参考手册和架构参考手册的组合将告诉您该架构 (trm) 的架构和实现是否允许手臂和拇指模式。我假设 A9 支持手臂拇指和拇指 2，所有三个。

cortex-m 家族是迄今为止唯一仅限于不支持 arm 的家族，它们的 thumb2 变化很大，因为 cortex-m0（和 m1）是 armv6m，m3 和 m4 是 armv7m（几十个（armv6m）指令到 armv7m 中的许多 thumb2 扩展）。有专门针对 -m 变体的单独架构参考手册，例如 armv7-m 与 armv7-ar 手册。

# java - 在 EDT 中使用 OSGi EventAdmin 是否安全？

> ID：16107935
> 
> 赞同：1
> 
> 时间：2013-04-19T15:16:54.520
> 
> 标签：java, swing, event-handling, osgi

EventAdmin 在 Swing 环境中使用是否安全？我问是因为我有以下序列：

*   从 JButton 接收 ActionListener 通知
*   创建一个 JPanel 并将其放在我的 Event 的属性中
*   使用 EventAdmin#sendEvent(Event) 同步发送我的事件
*   在我的订阅者中接收事件
*   从属性中检索 JPanel，如果不在 EDT 中，则使用 SwingUtilities#InvokeAndWait，将一些 JComponents 放入其中
*   在 EventAdmin#sendEvent() 的调用者中，方法返回，JPanel 已被填充，然后我可以将它添加到我的对话框并显示它。

这样做的目的是让任何订阅者将所需的内容安装到 JPanel，一旦每个订阅者被调用，该 JPanel 就会显示。

我第一次单击按钮时，一切正常，因为一切都在 EDT 中执行。第二次，我的订阅者在不是 EDT 的线程中被调用。因此，我在由 invokeAndWait 启动的可运行文件中执行 JComponent 安装。此调用阻塞 5022 毫秒（5000 毫秒是默认的 EventAdmin 超时持续时间）。一旦解锁，我的对话框就会显示出来。接下来的时间，我的订阅者不再被调用。它必须已被 EventAdmin 列入黑名单。

为什么第二次没有在 EDT 中调用我的订阅者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T07:04:12.530

不会。Event Admin 不保证将在哪个线程上传递事件，并且几乎可以肯定不是原始发送线程。

由于您的处理程序不知道它在哪个线程上，因此它不能直接操作 GUI。相反，它必须使用`SwingUtilities.invokeLater()`将 Runnable 推送到事件队列中，并且在该 Runnable 中您可以进行 GUI 更改。例如：

```
class MyEventHandler implements EventHandler {
    public void handleEvent(final Event event) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                // here you can make the UI changes in response to the event data
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:16:24.377

EventAdmin 规范不要求在发布事件的同一线程上传递事件。您需要使用添加此保证的 EventAdmin 实现，因为您必须在发布事件的同一线程上接收事件。

# android - 从另一个类重新创建 PendingIntent？

> ID：16107937
> 
> 赞同：2
> 
> 时间：2013-04-19T15:16:56.240
> 
> 标签：android

这可能是一个愚蠢的问题。我已经创建了一个 PendingIntent 并发出警报。在单独的课程中，我想取消它。我有我用来创建它的所有参数 - 除了上下文。警报是在 myClassAlarm.class 中创建的，我将在 myService.class 中取消它。

这有关系吗，我认为它确实 - 但用我的应用程序测试它很棘手。

# jquery - 是否有 ruby gem 可以防止页面在控制器调用时重新加载？如果不是，我应该把 javascript/jquery 放在哪里？

> ID：16107939
> 
> 赞同：0
> 
> 时间：2013-04-19T15:17:01.640
> 
> 标签：jquery, ruby-on-rails, rubygems

我有一个表，其中每一行都有一个 select_tag 和一个 submit_tag。我想在不重新加载页面的情况下调用它。我有完整的功能，但页面必须重新加载。

如果没有 gem，假设我尝试这样的事情： [防止页面重新加载并在单击提交按钮时调用 jquery 函数](https://stackoverflow.com/questions/12214624/prevent-page-reload-and-call-a-jquery-function-when-submit-button-is-clicked)。我在哪里放置 jquery 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:29:55.710

我认为您正在寻找通话中的`:remote`选项。`form_for`查看[form_for 下的 Unobtrusive JavaScript 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for-label-Unobtrusive+JavaScript)。这将为`data-remote="true"`您的表单添加一个属性，Rails 的[用于 jQuery 的 Unobtrusive 脚本适配器](https://github.com/rails/jquery-ujs)使用该属性自动将表单转换为 Ajax 调用。

然后，您可以提供要在成功创建或更新时执行的 jQuery 代码`app/views/posts/create.js.erb`或`app/views/posts/update.js.erb`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:32:56.080

没有简单的方法可以添加一些 gem 或脚本以使您的请求在表中不重新加载页面。使用 AJAX 或 PJAX，您可以向服务器发出请求、检索数据并重新呈现（单元格、列、表等）。

有用的链接：
PJAX—— [http](http://railscasts.com/episodes/294-playing-with-pjax) ://railscasts.com/episodes/294-playing-with-pjax ；
AJAX—— [http://bernatfarrero.com/jquery-and-rails-3-mini-tutorial/](http://bernatfarrero.com/jquery-and-rails-3-mini-tutorial/)

# sql - 如何查询行中是否存在值将值添加到另一个字段？

> ID：16107941
> 
> 赞同：0
> 
> 时间：2013-04-19T15:17:07.770
> 
> 标签：sql, database, ms-access

我有一个访问数据库，我想根据他们所在的医院在每行末尾的列中添加一个值。这是一个单独的值。例如 - 名为“St. James Hospital”的医院在单独的字段中具有“3”的 ID。我如何使用查询而不是手动浏览整个数据库来做到这一点？ [这里的例子](http://www.gogofile.com/Default.aspx?p=sc&ID=635019709885263750_5509)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:29:55.897

你可以这样做：

```
 update yourTable
         set yourFinalColumnWhateverItsNameIs = {your desired value}
         where someColumn = 3 
```

表格中在 someColumn 列中有 3 的每一行都会将最后一列设置为您想要的值。

如果这不是您想要的，请让您的问题更清楚。你想把医院的名字放到这张表里吗？如果是这样，那不是一个好主意，有更好的方法来实现这一点。

此外，如果具有特定值 (3) 的每一行都获得该值，您可以简单地将其添加到另一个（即医院）表中。无需在指向 Hospitals 表的表中各处重复。

PS这是我的意思的一个例子：

假设你有两张桌子

```
HOSPITALS
id
name
city
state

BIRTHS
id
hospitalid
babysname
gender
mothersname
fathername 
```

您可以获取婴儿的出生城市，而无需在 Births 表中包含 City 列，只需加入 hospital.id =births.hospitalid 上的表即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:35:29.230

不是最好的解决方案，但你可以这样做：

```
create table new_table as
select id, case when hospital="St. James Hospital" then 3 else null
from old_table 
```

或者，更好的选择是创建一个包含hospital_name 和hospital_id 列的表。然后，您可以创建一个外键关系，该关系将为您创建映射，并强制执行数据完整性。跨两个表的连接将产生您想要的结果。

在这里阅读：

[http://net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-relationships/](http://net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-relationships/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:36:38.377

您的问题的答案是 JOIN+UPDATE。我相当确定如果您查找，您会找到以下链接。

[Access DB 用另一个表的值更新一个表](https://stackoverflow.com/questions/787186/access-db-update-one-table-with-value-from-another)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T16:55:21.630

在检查您的 ACCDB 文件后，我建议您考虑以不同的方式设置表。

表*Health_Professionals*：

```
ID First Name Second Name Position hospital_id
1  John       Doe         PI                 2
2  Joe        Smith       Co-PI              1
3  Sarah      Johnson     Nurse              3 
```

餐桌*医院*：

```
hospital_id Hospital
          1 Beaumont
          2 St James
          3 Letterkenny Hosptial 
```

一个关键点是避免在*Health_Professionals*表中存储医院 ID 和名称。仅存储 ID。当您需要查看名称时，使用医院 ID 加入*Hospitals*表并从那里获取名称。

这种设计的一个有用的副作用是，如果有人拼错了医院名称，例如*“医院”*，您只需在一个地方更正该错误。每当有意重命名医院时，情况也是如此。

基于这些表，下面的查询返回这个结果集。

```
ID Second Name First Name Position hospital_id Hospital
1  Doe         John       PI                 2 St James
3  Johnson     Sarah      Nurse              3 Letterkenny Hosptial
2  Smith       Joe        Co-PI              1 Beaumont

SELECT
    hp.ID,
    hp.[Second Name],
    hp.[First Name],
    hp.Position,
    hp.hospital_id,
    h.Hospital
FROM
    Health_Professionals AS hp
    INNER JOIN Hospitals AS h
    ON hp.hospital_id = h.hospital_id
ORDER BY
    hp.[Second Name],
    hp.[First Name]; 
```

# php - CakePHP外键在条件下获取列

> ID：16107954
> 
> 赞同：0
> 
> 时间：2013-04-19T15:17:53.940
> 
> 标签：php, cakephp

如何在 find SQL 命令中使用来自其他列的外部表值？

例如，

我现在使用这样的结构：

```
$products = $this->Product->find('all');

$suits = array();

foreach ($products as $product) {
  if($product['ProductCategory']['name'] == "Suits"){
    array_push($suits,$product);
  }
}

$this->set('products',$suits); 
```

是否可以将其转换为：

```
$suits = $this->Product->find('list',array('conditions' => array('Products.ProductCategory.name' => "Suits"))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:18:24.317

```
$products = $this->Product->find('all', array('recursive' => -1,
                                              'contain'=>array('ProductCategory'=>
                                                  array('conditions'=>array('name'=>"Suits"))
                                 ))); 
```

那应该按类别名称过滤所有产品并返回

```
[0] => Array
    (
        [Product] => Array
            (
                [id] => 1
                /*etc*/
            )
        [ProductCategory] => Array
            (
                [0] => Array
                    (
                        [id] => 1
                        /*etc*/
                    )
            )
    ) 
```

# jquery - xml解析的jquery问题

> ID：16107957
> 
> 赞同：1
> 
> 时间：2013-04-19T15:18:04.713
> 
> 标签：jquery, xml, function, parsing

我在用 jquery 解析 xml 时遇到了一些问题。我自己做了一些研究，但我没有找到我的问题的答案。问题是 parseXml 函数在具有 id 结果的 div 中没有显示任何结果，并且 div 信息没有显示“成功”。当我将 qanda.xml 更改为不存在的文件名（如 qandaa.xml）时，信息 div 显示“找不到 XML 文件”所以我认为文件已加载但 parseXml 函数有问题。

XML (qanda.xml)

```
<?xml version="1.0" encoding="UTF-8"?>
<QandA>
    <question>how much?</question>
    <answer>100</answer>
</QandA>    
<QandA>
    <question>how much?</question>
    <answer>110</answer>
</QandA>    
<QandA>
    <question>how much?</question>
    <answer>120</answer>
</QandA>    
<QandA>
    <question>how much?</question>
    <answer>130</answer>
</QandA>    
<QandA>
    <question>how much?</question>
    <answer>140</answer>
</QandA> 
```

html页面

```
<!DOCTYPE HTML>
<html>
<head>
<LINK REL=StyleSheet HREF="layout.css" TYPE="text/css" MEDIA=screen>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready( function() {

    var information = $("#info");
    var result = $("#result");  

$.ajax({
    type: "GET",
    url: "qanda.xml",
    datatype: "xml",
    success:  parseXml,
    error: function(xhr, status, error) {
        if(xhr.status==404) {
            information.text("XML file not found");
        }
    }
});

function parseXml(xml) {
    $(xml).find('QandA').each(function(){
        result.append($(this).find('question').text());
        result.append($(this).find('answer').text());
    });
    information.text("Success");
}
});
</script>
</head>
<body>

<div id="info"></div>
<div id="result"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:25:46.287

认为您的 XML 需要一个根元素。

```
>>> str = '<?xml version="1.0" encoding="UTF-8"?><root><a></a></root>'
"<?xml version="1.0" encoding="UTF-8"?><root><a></a></root>"
>>> $(str).find("a")
Object[a] 
```

和

```
>>> str = '<?xml version="1.0" encoding="UTF-8"?><a></a>'
"<?xml version="1.0" encoding="UTF-8"?><a></a>"
>>> $(str).find("a")
Object[] 
```

# c - C 结构：初始化的字符串变得无效

> ID：16107958
> 
> 赞同：1
> 
> 时间：2013-04-19T15:18:06.487
> 
> 标签：c, struct

我有以下代码示例，它以两种不同的方式获取指向结构的指针。虽然第一个（“Test1”）成功，但第二个在尝试输出字符串（*title*）时因分段错误而失败，而数字（*type*）打印正确：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct{
    unsigned char type;
    char* title;
} MenuItem;

typedef struct{
    unsigned short itemCount;
    MenuItem *items;    
} Menu;

Menu* createMenu(unsigned short itemCount, MenuItem items[]){
    Menu *menu = malloc(sizeof(Menu));
    menu->itemCount = itemCount;
    menu->items = items;
    return menu;
}

Menu* getSampleMenu(void){
    return createMenu(2,(MenuItem[]){
        {3,"Foo2"},
        {4,"Bar2"}
    });
}

void showMenu(const Menu *menu){
    for(unsigned short i = 0; i < menu->itemCount; i++)
        printf("Item %d: %d/%s\n",i,menu->items[i].type,menu->items[i].title);
}

int main(void){
    //Test 1
    Menu *menu = createMenu(2,(MenuItem[]){
        {1,"Foo"},
        {2,"Bar"}
    });
    showMenu(menu);
    //Result: 1/Foo\n 2/Bar

    //Test 2
    showMenu(getSampleMenu());
    //Result: 3/ [segmentation fault]
} 
```

你知道问题可能是什么吗？该示例是在 C99 模式下使用 gcc 4.6.3 在 Debian 上编译和测试的。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T15:21:16.617

您传递给的数组`createMenu`具有“自动存储持续时间”。`getSampleMenu`一旦结束，它就会死去，任何指向它的指针都会变得无效。

（编辑：它实际上可能比这更严重。数组作为一个临时对象，一旦*导致其创建的语句*结束，很可能已经死了。在这种情况下，两者大致相等，因为该语句是最后一个在函数中......但是否有后续语句`createSampleMenu`试图使用该菜单，即使它们可能遵循无效指针。）

您需要动态分配 ( `malloc`) 一些内存并将数组复制到其中。（当然，`destroyMenu`一旦不再需要菜单，您还应该有一个或类似的功能来正确释放内存。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:25:21.363

在本地声明的变量，也称为“[自动](http://en.wikipedia.org/wiki/Automatic_variable)”，通常存储在当前函数的堆栈框架中 - 这样当您从声明它们的函数返回时，它们会从堆栈中弹出，然后调用一个函数可以写在他们身上。`malloc`在堆上分配一定范围的内存，在您调用之前一直分配给您使用`free`，无论您的代码在哪个范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:32:32.220

一旦函数返回，指针`menu->items`就不再有效，`getSampleMenu()`因为“MenuItem[]”是在该函数中本地定义的。

因此，在测试 2 中，您的程序在`menu->items`访问`showMenu()`.

# c# - 如何将 2 个 zip 文件合并为 1 个 zip

> ID：16107959
> 
> 赞同：0
> 
> 时间：2013-04-19T15:18:11.143
> 
> 标签：c#, jar, minecraft, minecraft-forge

我正在尝试用 C# 为 Minecraft 制作一个自定义启动器，但我遇到了一个问题。

我想在其中添加一些东西，Minecraft Forge，但我能想到的唯一方法是将扩展名更改为`minecraft.jar`，将和`minecraft.zip`的内容提取到同一个文件夹中，然后将整个文件夹压缩到.`Minecraft Forge.zip``minecraft.zip``minecraft.jar`

但是`minecraft.jar`有一个文件`aux.class`，所以每当我的提取脚本（Java 制作）尝试提取它时，它只是说：

> 找不到文件 G:\Programming\C#\Console\Forge Installer\Forge Installer\bin\Debug\Merge\aux.class。

我能想到的唯一另一种方法是合并`minecraft_forge.zip`到`minecraft.zip`中，我在 Google 上花了大约 2 个小时查看（观看有人在几分钟内看到它），但它总是向我显示“如何压缩多个文件”的结果，“如何在 C# 中制作 zip 文件”等。

所以我来这里寻找我的答案，对不起，如果这需要阅读很多内容，但我总是在这里看到评论说“你没有提供足够的信息让我们帮助你”。

编辑：如果不清楚，问题是：我怎样才能将内容`minecraft_forge.zip`放入`minecraft.zip`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:38:22.200

在您的情况下，如果由于操作系统限制而无法解压缩文件，则需要“跳过”解压缩临时文件以对其进行压缩。相反，只处理输入和输出流，正如在此处找到的答案中所建议的那样：[如何将条目添加到 Java 中的现有 zip 文件？](https://stackoverflow.com/questions/3048669/how-can-i-add-entries-to-an-existing-zip-file-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T19:30:46.953

正如您所指出的，“aux”是 Windows 中的受保护关键字，文件后缀是什么并不重要；windows不会让你使用它。这里有几个讨论这个问题的线程。

[参考 1：Windows 保留字。](https://superuser.com/questions/86999/unable-to-rename-a-folder-or-a-file-as-con)

[参考 2：Windows 保留字。](https://stackoverflow.com/questions/448438/windows-and-renaming-folders-the-con-issue)

如果您正在输入命令来执行复制或解压缩，则有可能通过使用以下路径前缀`\\.\`或`\\?\`. 当我对此进行测试时，它可以在句号或问号之后使用单反斜杠或双反斜杠。这样以下工作：

```
\\.\c:\paths\etc
\\.\\c:\paths\etc
\\?\c:\path\etc
\\?\\c:\path\etc 
```

我使用以下命令对此进行了测试。尝试通过 Windows 资源管理器重命名时，它给出了“指定的设备名称无效”。错误信息。从命令行它工作得很好。我应该指出，一旦您创建了这些文件，您将不得不使用相同的技术手动删除它们。Windows 资源管理器报告这些大小为 0 字节的文本文件“对于目标文件系统来说太大了”，即......回收站。重命名 "\.\c:\temp\New Text Document.txt" aux.txt del "\.\c:\temp\aux.txt"

至于直接从 zip 或 jar 文件复制，我自己尝试过，它似乎可以工作。我使用[7-zip](http://www.7-zip.org/)并使用“打开存档...”Windows 资源管理器上下文菜单直接打开罐子。然后我将内容从 forge.jar 拖放到 minecraft jar 文件中。由于它是具有违规文件名的 minecraft jar 文件，因此减少了需要在文件系统上创建临时文件的机会。我确实看到有人提到在 jar 和 zip 之间复制时，7-zip 可能会提取到临时文件中。 [关于在档案之间复制的 7-zip 参考](http://sourceforge.net/p/sevenzip/discussion/45798/thread/ec73f124/)

我应该指出，我的 minecraft jar (minecraft_server.1.8.7.jar) 副本不包含名为 aux.class 的文件。复制/合并后，我也没有尝试使用 jar。我也没有花太多时间试图弄清楚它合并两个内容的效果如何，因为看起来可能存在冲突，`com\google\common\base\`因为类名相似但`$`变量后缀不同。

我希望这两个可能的建议可以为您提供一些空间来找到满足您需求的解决方案......如果您仍在寻找。

# ios - UITextView textViewDidChangeSelection 调用了两次

> ID：16107962
> 
> 赞同：0
> 
> 时间：2013-04-19T15:18:39.350
> 
> 标签：ios, nsarray, uitextview, avaudioplayer

**我有什么** ：

文本视图

NSArray（字符串）

AVAudioplayer（尚未实现）

**当我在 TextView 中选择一个单词时**：

• 检查单词是否存在于数组中

• 启动带有相关声音的 Audioplayer

不幸的是，当我点击两次以在 TextView 中选择一个单词时，textViewDidChangeSelection 被调用了两次。我不知道为什么我会看到两次“Youpie”。

我只是将 inputView 更改为隐藏键盘，因为我只需要在选择模式下使用 TextView。

```
- (void)textViewDidChangeSelection:(UITextView *)tve;
{
    NSString *selectedText = [tve textInRange:tve.selectedTextRange];
    if(selectedText.length > 0)
    {
        for (NSString *text in textArray)
        {
            if ([selectedText isEqualToString:text])
            NSLog(@"Youpie");
            tve.selectedTextRange = nil;
            if (ps1.playing == YES)
            {
                [self stopEveryPlayer];
                [self updateViewForPlayerState:ps1];
            }
            else if ([ps1 play])
                {
                    [self updateViewForPlayerState:ps1];
                    fileName.text = [NSString stringWithFormat: @"%@ (%d ch.)", [[ps1.url relativePath] lastPathComponent], ps1.numberOfChannels, nil];
                }
                else
                    NSLog(@"Could not play %@\n", ps1.url);
            break;
            }
        }
    }
}

- (void)awakeFromNib
{  
    textArray = [[NSArray alloc] initWithObjects:@"dog",@"cat",@"person",@"bird",@"mouse",  nil];
    textView.inputView = [[[UIView alloc] initWithFrame:CGRectZero]  autorelease];
    textView.delegate = self;
// ...
} 
```

当我双击文本中的每个好词时，我注意到了一些东西。

**textViewDidChangeSelection**

如果已经选择了一个单词并且没有选择任何操作，我有 1 个“Youpie”。

如果没有，我有 2 个“Youpie”。

我找到了一个简单的解决方案。获得价值后，我删除了 selectedRange。textViewDidChangeSelection 调用一次。

**我改变了什么**

```
tve.selectedTextRange = nil; 
```

我使用一个子类`UITextView`来禁用菜单。

```
-(BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    return NO;
    return [super canPerformAction:action withSender:sender];
} 
```

`AVAudioPlayer`我也为(ps1)添加了一个实现。

如果选择了已知单词，我的“自动播放”正在工作:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:06:21.330

对于该方法为何被调用两次或如何防止这种情况，我没有答案，但另一种解决方案可能是在编辑菜单中显示一个附加项目，当双击一个单词时该项目会在文本视图中弹出。然后，您可以从该附加菜单项中定义的操作选择器触发基于单词启动声音的操作。在此设计中，您将删除 textViewDidChangeSelection，因此不会被调用两次。有关修改标准菜单的更多信息，请参阅[http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/AddingCustomEditMenuItems/AddingCustomEditMenuItems.html 。](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/AddingCustomEditMenuItems/AddingCustomEditMenuItems.html)

# jquery - jQuery选择值组合

> ID：16107964
> 
> 赞同：0
> 
> 时间：2013-04-19T15:18:40.333
> 
> 标签：jquery, select, filter, option

我目前正在做一个学校项目，需要一些关于我的 jQuery 脚本的帮助。我想用 <select> 框过滤整个排名系统。

我有以下内容并且有效

```
<select>
    <option value="all">All</option>
    <option value="cars">Cars</option
</select>

<div id="all" class="ranking-item">All rankings</div>
<div id="cars" class="ranking-item">Cars rankings</div> 
```

使用 jQuery

```
$(document).ready(function() {

    $(".ranking-item").not(":first").hide(); //prevent seeing nothing

    $("select").change(function() {

    $('.ranking-item').hide();
    var targetId = $(this).val();
    $('#'+targetId).show();
    })

}); 
```

但我想要 1 个过滤器，像这样

```
<select>
    <option value="all">All</option>
    <option value="cars">Cars</option
</select>

<select>
    <option value="lap1">Lap 1</option>
    <option value="lap2">Lap 2</option
</select> 
```

预期输出为

```
<div id="all lap1" class="ranking-item">All rankings</div>
<div id="all lap2" class="ranking-item">All rankings</div>
<div id="cars lap1" class="ranking-item">Cars rankings</div>
<div id="cars lap2" class="ranking-item">Cars rankings</div> 
```

但这不起作用...

任何猜测我怎样才能让它工作？谢谢转发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:38:46.933

你不能有多个ID。ID 是唯一的。改用类。

```
 <select>
        <option value="all">All</option>
        <option value="cars">Cars</option>
    </select>

    <select>
        <option value="lap1">Lap 1</option>
        <option value="lap2">Lap 2</option>
    </select>

    <div class="ranking-item all lap1">All rankings lap1</div>
    <div class="ranking-item all lap2">All rankings lap2</div>
    <div class="ranking-item cars lap1">Cars rankings lap1</div>
    <div class="ranking-item cars lap2">Cars rankings lap2</div>

    <script src="http://code.jquery.com/jquery-2.0.0.min.js"></script>
    <script>

        $(document).ready(function() {

            $(".ranking-item").not(":first").hide(); //prevent seeing nothing

            $("select").change(function() {

                $('.ranking-item').hide();
                var targetClass = $(this).val();
                $('.'+targetClass).show();

            })

        });

    </script> 
```

还要想想它背后的逻辑。如果选择用作过滤器，您应该使用所有过滤器过滤所有数据列表（或者可能重置其他过滤器）：

例如：

如果选择了所有，我们得到所有的两个元素如果选择了圈，我们得到了圈的两个元素（即使仍然选择了所有）

组合过滤器，以便如果选择了 all 和 lap1，它会输出正确的列表。

# java - 为大十进制处理 Null

> ID：16107965
> 
> 赞同：1
> 
> 时间：2013-04-19T15:18:43.460
> 
> 标签：java, nullpointerexception, bigdecimal

我的代码如下所示，

```
caseX caseXObj = caseXBo.getCaseXDao().findCaseXBySID(selectedID);

if(caseXObj != null && caseXObj.getCaseInGrossAmt() != null){

} else {
    caseXObj.setCaseAmt(BigDecimal.ZERO);
} 
```

我已经为 caseX 和 getter 处理了 NULL 指针，当为 null 时，将 bigdeciaml 设置为默认的零值。我仍然在设置器行中得到空指针异常。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:20:47.983

很有可能`caseXObj`是`null`，所以它会导致`NullPointerException`. 您应该像这样测试这三种情况：

```
caseX caseXObj = caseXBo.getCaseXDao().findCaseXBySID(selectedID);
if (caseXObj != null && caseXObj.getCaseInGrossAmt() != null) {
    // do something with caseXObj 
} else if (caseXObj == null) {
    // initialize caseXObj, you were misssing this case!
} else {
    caseXObj.setCaseAmt(BigDecimal.ZERO);
} 
```

本质上，错误在于您只测试了两种情况——其中有三种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:22:41.433

假设 getCaseXDao() 返回 null 是可以的，您需要分配给 caseXObj 而不是将其用作 else 子句中的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:23:41.873

那是因为您没有在 else 部分检查 null 。

它应该是：

```
caseX caseXObj = caseXBo.getCaseXDao().findCaseXBySID(selectedID);

if(caseXObj != null && caseXObj.getCaseInGrossAmt() != null)
{
//...
}
else
{
  if (caseXObj != null)
  {
    caseXObj.setCaseAmt(BigDecimal.ZERO);
  }
} 
```

# biztalk - BizTalk 发送具有消息级别安全性的自定义 WCF 标头

> ID：16107967
> 
> 赞同：0
> 
> 时间：2013-04-19T15:18:46.053
> 
> 标签：biztalk, biztalk-2010, biztalk-wcf

我试图让 BizTalk 代理与 WCF 服务的通信，该服务将其一些数据映射到响应消息的标头而不是正文部分。经过研究，解决方案是将标头数据写入 OutboundCustomHeaders 消息上下文属性，然后 BizTalk WCF 适配器将其注入到传出消息中。在我使用证书启用消息级安全性之前，这非常有效。在这种情况下，标头仍然包含在响应消息中，但在消息被加密之后。这会导致接收客户端抛出 MessageSecurityException 消息“所需消息部分未加密”。

有没有办法将 BizTalk 配置为在加密发生之前写入 OutboundCustomHeaders 或以另一种方式在响应中注入我的标头？

我不确定它有多大帮助或使答案复杂化，但 BizTalk 中的接收位置使用 ws2007HttpRelayBinding 为客户端连接创建 Azure 端点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:23:56.497

此问题的解决方案是通过创建自定义行为，将所需的标头添加到通道保护要求并将其附加到 ws2007HttpRelayBinding。

我使用以下链接作为对我的解决方案的参考：[WCF 自定义消息安全](http://social.msdn.microsoft.com/forums/en-us/wcf/thread/468FC4F0-2F6D-4C90-AABB-046BBCACF3F4)

# matlab - MATLAB使用两个不同的索引找到矩阵中列的平均值

> ID：16107971
> 
> 赞同：1
> 
> 时间：2013-04-19T15:19:00.930
> 
> 标签：matlab, loops, mean

我有一个`22007x3`矩阵，其中第 3 列中有数据，第 1 列和第 2 列中有两个单独的索引。

例如。

```
x = 

    1   3   4
    1   3   5
    1   3   5
    1   16  4
    1   16  3
    1   16  4
    2   4   1
    2   4   3
    2   11  2
    2   11  3
    2   11  2 
```

当第 1 列中的值相同并且第 2 列中的值相同时，我需要找到第 3 列中的值的平均值，最终得到如下结果：

```
ans = 

    1   3   4.6667
    1   16  3.6667
    2   4   2
    2   11  2.3333 
```

请记住，在我的数据中，第 1 列和第 2 列中的值出现的次数可能不同。

我已经尝试过的两个选项是`meshgrid`/`accumarray`选项，使用两个不同的`unique`函数和一个 3D 数组：

```
[U, ix, iu] = unique(x(:, 1));
[U2,ix2,iu2] = unique(x(:,2));
[c, r, j] = meshgrid((1:size(x(:, 1), 2)), iu, iu2);
totals = accumarray([r(:), c(:), j(:)], x(:), [], @nanmean); 
```

这给了我这个：

```
??? Maximum variable size allowed by the program is exceeded.

Error in ==> meshgrid at 60
    xx = xx(ones(ny,1),:,ones(nz,1)); 
```

和循环选项，

```
for i=1:size(x,1)
    if x(i,2)== x(i+1,2);
        totals(i,:)=accumarray(x(:,1),x(:,3),[],@nanmean);
    end
end 
```

这显然是非常非常错误的，尤其是因为`x(i+1,2)`位。

我还在考虑根据第 1 列中的值出现的次数创建单独的矩阵，但这会很长而且效率低下，所以我不愿意走这条路。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:26:56.180

用 a 对前两列进行分组`unique(...,'rows')`，然后**仅累积第三列**（始终是仅在真正发生累积的地方累积的最佳方法，从而避免索引，即前两列，您可以使用 重新附加`unX`）：

```
[unX,~,subs] = unique(x(:,1:2),'rows');
out          = [unX accumarray(subs,x(:,3),[],@nanmean)];

out =
            1            3       4.6667
            1           16       3.6667
            2            4            2
            2           11       2.33 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:37:53.237

这是使用稀疏矩阵数学的理想机会。

```
x = [ 1 2 5;
      1 2 7;
      2 4 6;
      3 4 6;
      1 4 8;
      2 4 8;
      1 1 10]; % for example

SM = sparse(x(:,1),x(:,2), x(:,3); 
disp(SM) 
```

结果：

```
(1,1)   10
(1,2)   12
(1,4)    8
(2,4)   14
(3,6)    7 
```

如您所见，我们一口气完成了“将相同的索引累积到同一个容器中”。现在你需要知道你有多少元素：

```
NE = sparse(x(:,1), x(:,2), ones(size(x(:,1))));
disp(NE); 
```

结果：

```
(1,1)   1
(1,2)   2
(1,4)   1
(2,4)   2
(3,6)   1 
```

最后，您将一个除以另一个以获得平均值（仅使用具有值的元素）：

```
matrixMean = SM;
nz = find(NE>0);
matrixMean(nz) = SM(nz) ./ NE(nz); 
```

如果你那么`disp(matrixMean)`，你得到

```
(1,1)    10
(1,2)     6
(1,4)     8
(2,4)     7
(3,6)     7 
```

如果您想以不同方式访问各个元素，那么在计算 SM 和 NE 之后，您可以执行

```
[i j n] = find(NE);
matrixMean = SM(i,j)./NE(i,j);
disp([i(:) j(:) nonzeros(matrixMean)]); 
```

# sql - 如何在sql中过滤以显示某些文本

> ID：16107974
> 
> 赞同：0
> 
> 时间：2013-04-19T15:19:18.710
> 
> 标签：sql, oracle, oracle10g

在 where 子句中我有

```
Select B.ID,
       B.TIME_1,
       B.TIME_2,
       a.event_type,
       a.jew,
       c.dist
from B, table1 a left outer join table3 c on a.jew = c.mew
Where B.ID = A.ID
AND a.event_type in ('APPLE','ORANGE','GRAPE') 
```

我的问题是我的查询没有显示，例如，如果某些 ID 记录不是全部 3（苹果、橙子、葡萄）。我仍然想提取所有 ID，即使它没有全部 3 个或没有苹果橙、葡萄。

示例：假设我的数据库共有 5 条记录

ID=`1`的事件类型为`Apple`, `Orange`,`Grape`也没有，但它还有其他我不关心它
ID= `2` `Apple`
ID= `3` `Orange`
ID= `4` `Apple`, `Orange` `Grape`
ID= `5`none of 3 但其他我不关心

所以目前我的查询只是在 ID=1 的地方拉，我想修改它在哪里拉所有 5 个条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:22:13.790

您还需要对 table1 进行左连接，并添加一个条件以防 B 和 table1 之间不匹配：

```
SELECT B.ID,
       B.TIME_1,
       B.TIME_2,
       A.event_type,
       A.jew,
       C.dist
FROM B
    LEFT OUTER JOIN table1 A 
        ON B.ID = A.ID
            LEFT OUTER JOIN table3 C 
                ON A.jew = C.mew
WHERE A.event_type IS NULL
OR A.event_type in ('APPLE','ORANGE','GRAPE') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:42:32.650

您需要三种事件类型中的任何一种或没有。为此，请使用左外连接，但将所有条件放在`on`子句中：

```
SELECT B.ID, B.TIME_1, B.TIME_2, A.event_type, A.jew, C.dist
FROM B left outer join
     table1 A 
     ON B.ID = A.ID and
        A.event_type in ('APPLE','ORANGE','GRAPE') LEFT OUTER JOIN
     table3 C 
     ON A.jew = C.mew 
```

# c - 在 C 中读取文件时跳过一行

> ID：16107976
> 
> 赞同：5
> 
> 时间：2013-04-19T15:19:26.653
> 
> 标签：c, file-io, scanf

我有一个问题，我还没有找到有效的解决方案。这真的很容易，但我不明白该怎么做。

我有一个包含一些行的文件，例如：

```
#comment

#comment

icecream 5

pizza 10

pie 7

#comment

tortillas 5
fajitas 5 
```

我希望我的程序只读取不以`#`.

```
FILE *pf;
char first [20], second [20];
pf = fopen("config.conf", "r");
if (pf)
{
    while (! feof(pf))
    {
        fscanf(pf, "%s \t ", first);
        while(!strcmp(first,"#")){ `HERE I NEED JUMP TO NEXT LINE`
            fscanf(pf, "%s \t ", first);
        }
        fscanf (pf, "%s \t ", second);
        printf("Food: %s \t Cost: %s \n", first, second);
    }
    fclose(pf);
}
else
    printf( "Errore nell'aprire config.conf\n"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:23:30.343

如果您需要读取配置文件，请[使用正确的工具，而不是重新发明轮子。](http://www.hyperrealm.com/libconfig/)

* * *

```
while(!strcmp(first,"#") 
```

是错的。您想过滤掉以井号**开头的行，而****不是**那些**只是井号的行。**还有，`while(!feof(f))`错了。此外，如果您是逐行阅读，为什么要`fscanf()`在可以利用的时候麻烦使用`fgets()`呢？

总而言之，整个巨大的`while`循环可以简化成这样的：

```
char buf[0x1000];
while (fgets(buf, sizeof(buf), pf) != NULL) {
    if (buf[0] == '#') continue;

    // do stuff
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-17T11:17:52.760

`%*[^\n]`您可以通过应用格式说明符跳到行尾而不使用缓冲区：

```
fscanf(pf, "%*[^\n]"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T15:23:03.670

如果不阅读以`#`. 您所能做的就是读取该数据，但忽略它。

```
char ignore[1024];

fgets(ignore, sizeof(ignore), pf); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T15:26:48.210

您可能想使用 strstr 来查找“#”。

见描述： [http ://en.cppreference.com/w/c/string/byte/strstr](http://en.cppreference.com/w/c/string/byte/strstr)

# c# - asp GridView 使用Boundfield 将数据添加到某个列（在TemplateField 之后）？

> ID：16107978
> 
> 赞同：1
> 
> 时间：2013-04-19T15:19:34.557
> 
> 标签：c#, asp.net, gridview

我有一个asp：GridView，后面的代码被分配给一个带有对象的列表。

```
gwMyGridview.DataSource = test; // test is a list with some objects (two fields)
gwTract.DataBind(); 
```

我可以在列中添加按钮和内容，但我的数据（两列）始终是最后两列。我知道 BoundField 可以使用，但最后我还是得到了两列。我该怎么做：column1 = data1，column2 = button，column3 = data。现在看起来像这样：按钮、数据、数据

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:28:32.517

不要让 GridView 自动生成列。为此，请按照下列步骤操作：

1- 单击 GridView 的任务（单击它时 GridView 顶部的小箭头）并单击编辑列，然后取消选中“自动生成字段”字段，或从标记中将`AutoGenerateColumns`属性设置为`false`

2 - 手动将列​​添加到 GridView，方法是在上一个对话框（字段）或标记中添加它们，按照您希望它们出现在 GridView 中的确切顺序：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
    <Columns>
        <asp:BoundField DataField="data1" HeaderText="Data1" />
        <asp:TemplateField HeaderText="CustomColumn"></asp:TemplateField>
        <asp:BoundField DataField="data2" HeaderText="Data2" />
    </Columns>
</asp:GridView> 
```

之后就可以正常绑定了。

# php - CakePHP：我可以使用 Router::promote 或其他方式提升活动路由器吗？

> ID：16107979
> 
> 赞同：0
> 
> 时间：2013-04-19T15:19:34.853
> 
> 标签：php, cakephp, url-rewriting, cakephp-2.0, url-routing

我有两条或更多条路线将前往相同的控制器和操作。这很好，直到我想在页面上使用表单助手或分页等助手。发生的情况是当前 url 更改为我`routes.php`文件中首先声明的任何内容。

我看到有一种方法可以[使用 Router::promote 来提升路由器，](http://book.cakephp.org/2.0/en/development/routing.html#Router%3a%3apromote)但我不确定是否可以根据当前使用的 url 或路由器来实现它，或者是否有更好的方法来做到这一点。

这是我的`router.php`样子的一个例子：

```
Router::connect('/cars-for-sale/results/*', array('controller' => 'listings', 'action' => 'results'));
Router::connect('/new-cars/results/*', array('controller' => 'listings', 'action' => 'results'));
Router::connect('/used-cars/results/*', array('controller' => 'listings', 'action' => 'results')); 
```

例如，假设我在 url 处，`domain.com/used-cars/results/`并且正在使用表单助手或分页助手，放在 action 或 href 中的 url 是`domain.com/cars-for-sale/results/`.

任何帮助或信息将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:51:45.817

# 路线应该是唯一且可识别的！

这些路由的问题在于，基本上，您创建了**重复的 URL**，这不仅会导致 CakePHP 选择正确的路由出现问题，而且 Google 也不喜欢这样；重复的内容会对您的 SEO 排名产生负面影响！

为了选择正确的 URL（路由），CakePHP 应该能够根据其参数这样做；您当前的路线不提供任何区分它们的方法。

你的应用程序也没有！

所有这些 URL 都将呈现相同的数据；

```
/cars-for-sale/results/
/new-cars/results/
/used-cars/results/ 
```

## 解决方案 1 - 单独的操作

如果您的应用程序仅限于这三个类别，最简单的解决方案是创建三个操作，每个类别一个；

控制器：

```
class ListingsController extends AppController
{
    const CATEGORY_NEW       = 1;
    const CATEGORY_USED      = 2;
    const CATEGORY_FOR_SALE  = 3;

    public $uses = array('Car');

    public function forSaleCars()
    {
        $this->set('cars', $this->Paginator->paginate('Car', array('Car.category_id' => self::CATEGORY_FOR_SALE)));
    }

    public function newCars()
    {
        $this->set('cars', $this->Paginator->paginate('Car', array('Car.category_id' => self::CATEGORY_NEW)));
    }

    public function usedCars()
    {
        $this->set('cars', $this->Paginator->paginate('Car', array('Car.category_id' => self::CATEGORY_USED)));
    }
} 
```

路由.php

```
Router::connect(
    '/cars-for-sale/results/*', 
    array('controller' => 'listings', 'action' => 'forSaleCars')
);
Router::connect(
    '/new-cars/results/*', 
    array('controller' => 'listings', 'action' => 'newCars')
);
Router::connect(
    '/used-cars/results/*', 
    array('controller' => 'listings', 'action' => 'usedCars')
); 
```

## 解决方案 2 - 将“类别”作为参数传递

如果用于“列表”的 URL 列表不会固定并会扩展，最好将“过滤器”作为参数传递并将其包含在您的路由中；

路由.php

```
Router::connect(
    '/:category/results/*',
    array(
         'controller' => 'listings',
         'action'     => 'results',
    ),
    array(

         // category: lowercase alphanumeric and dashes, but NO leading/trailing dash
         'category'  => '[a-z0-9]{1}([a-z0-9\-]{2,}[a-z0-9]{1})?',

         // Mark category as 'persistent' so that the Html/PaginatorHelper
         // will automatically use the current category to generate links
         'persist'   => array('category'),

         // pass the category as parameter for the 'results' action
         'pass'      => array('category'),
    )
); 
```

阅读[路由器 API](http://book.cakephp.org/2.0/en/development/routing.html#router-api)

在您的控制器中：

```
class ListingsController extends AppController
{
    public $uses = array('Car');

    /**
     * Shows results for the specified category
     *
     * @param string $category
     *
     * @throws NotFoundException
     */
    public function results($category = null)
    {
        $categoryId = $this->Car->Category->field('id', array('name' => $category));

        if (!$categoryId) {
            throw new NotFoundException(__('Unknown category'));
        }

        $this->set('cars', $this->Paginator->paginate('Car', array('Car.category_id' => $categoryId)));
    }
} 
```

并且，创建指向某个类别的链接；

```
$this->Html->link('New Cars', 
    array(
         'controller' => 'listings', 
         'action'     => 'results', 
         'category'   => 'new-cars'
    )
); 
```

# javascript - 无法切换元素显示以实现类似“标签”的效果

> ID：16107982
> 
> 赞同：0
> 
> 时间：2013-04-19T15:19:51.063
> 
> 标签：javascript, html, toggle

我目前正在我的网站上创建一个评论系统，当用户单击按钮以显示评论框时，我试图切换元素上的显示，但是该按钮似乎没有切换/执行任何操作。

谁能帮帮我吗？我正在使用的代码[可以在这里找到](http://pastebin.com/dW9RY8WX)。

它很长，所以我使用了 pastebin 来链接它。

发生的事情是我试图隐藏我自己的包含评论系统（disqus）的盒子，但这似乎什么也没做！:(

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:22:09.617

声明“切换”功能时缺少结束括号。请参阅下面的代码注释。

```
<script>
function toggle() {
    var ele = document.getElementById("cbox");
    var text = document.getElementById("displaytext");
    if(ele.style.display == "block") {
            ele.style.display = "none";
            text.innerHTML = "View Comments";
    }
    else {
            ele.style.display = "block";
            text.innerHTML = "Hide Comments";
    }
} // <-- This one is missing!
</script> 
```

此外，“cbox”的初始显示状态应该像这样从“隐藏”更改为“无”

```
<div style="display: none;" id="cbox" class="comments"> 
```

如果已经用这 2 个更改测试了您的代码并且它可以工作！

# javascript - 如何在依赖函数的同时将变量从弹出窗口传输到窗口

> ID：16107983
> 
> 赞同：2
> 
> 时间：2013-04-19T15:19:54.840
> 
> 标签：javascript, jquery, decorator

考虑以下：

1.  窗口打开一个弹出窗口

2.  弹出窗口包含一个可以由按钮触发的 javascript 函数

3.  函数接受两个预定义的参数并关闭弹出窗口

这就是 JS 的样子

```
<script>
    function dismissPopup(win, myId) {
        // does some stuff I don't want for THIS routine
        win.close();
    }
</script> 
```

这是弹出窗口的 HTML 的样子

```
<a id="#bar_1" onclick="opener.dismissPopup(window, '1'); return false;">
    now I want this text to be available to window without breaking
    dismissPopup for other implementations
</a>
<a id="#bar_2" onclick="opener.dismissPopup(window, '2'); return false;">
    etcetera
</a> 
```

我尝试过的（窗口）

```
var win = window.open(url);
win.focus();

var original_dismissPopup = window.dismissPopup;
window.dismissPopup = function (win, myId) {
    var FOO = $(win.document.body).find('#bar_' + myId).val();
    alert(FOO);
    original_dismissPopup.apply(this, arguments);
};

var X = "I need FOO here" 
```

结果`alert(FOO)`确实给了我正确的价值。但是我不太明白如何在函数范围之外获取变量。

另外，如果我注释掉弹出窗口根本没有解除的警报，我对装饰现有功能的理解似乎是错误的。

感谢您的任何指导。

**更新：**

这似乎可以解决问题，但我认为我仍然做错了什么：

```
setTimeout(function() {
    alert(FOO);
}, 1500); 
```

# android - grouprow xml 中带有 2 个 TextView 的可扩展列表视图

> ID：16107985
> 
> 赞同：2
> 
> 时间：2013-04-19T15:20:07.610
> 
> 标签：android, listview, expandablelistview

我有一个奇怪的问题，这是我拖网 StackOverflow 和 Google 的第三天，寻找答案。到目前为止，我感到头疼:) 我还是个新手，所以请原谅这个问题。

我正在创建一个按年、月和类别（即杂货、租金等）汇总支出的应用程序。我想以下列方式使用 ExpandableListview 显示这些数据

```
Year:2013 ------Total Spent 1,234.56 Total Income: 7,890.11 (this is the group header)
    Apr: Spent 4,000.00 ------Recv: 6,0000 (child rows opened on clicking header)
    Mar: Spent 3,500.00 ------Recv: 5,0000
    Feb: Spent 2,000.00 ------Recv: 4,0000
    Jan: Spent 1,500.00 ------Recv: 3,0000 
```

最后，点击这些子项中的任何一个，用户将被传送到一个页面，该页面显示金额是如何按类别计算的。

问题：有没有一种显示方式

```
Year:2013 ------Total Spent 1,234.56 Total Income: 7,890.11 
```

在标题组行中？如果是这样，组 xml 会是什么样子。

我试过以下作为 grouprow 标题，但应用程序只是在启动时崩溃。我认为您在 grouprow 标题中只能有一个文本项。事实上，即使在 xml 文件中只描述了一个文本项，即使尝试放置相对等布局也会崩溃。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:gravity="top"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content" >
    <CheckedTextView
        android:drawableLeft="@drawable/green_check"
        android:gravity="left|top"
        android:height="25dp"
        android:id="@+id/txtYear"
        android:layout_height="wrap_content"
        android:layout_weight="3"
        android:layout_width="wrap_content"
        android:text="Year"
        android:textStyle="bold"
        android:typeface="sans" />
    <TextView
        android:gravity="center|center_vertical|top"
        android:height="@dimen/activity_horizontal_margin"
        android:id="@+id/txtSentAmountYr"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_height="fill_parent"
        android:layout_weight="3"
        android:layout_width="wrap_content"
        android:numeric="decimal"
        android:padding="3dp"
        android:text="Total Sent"
        android:textColor="#442a8d" />
    <TextView
        android:gravity="center|center_vertical|top"
        android:height="25dp"
        android:id="@+id/txtRecvdAmountYr"
        android:layout_alignBaseline="@+id/txtYear"
        android:layout_alignBottom="@+id/txtYear"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/txtSentAmountYr"
        android:layout_weight="3"
        android:layout_width="wrap_content"
        android:numeric="decimal"
        android:text="Total Received"
        android:textColor="#28a928"
        android:textStyle="normal"
        android:typeface="normal" />
</RelativeLayout> 
```

如果不可能，我正在考虑使用带有文本等的 TableLayout 来做同样的事情。然而，可扩展列表视图非常适合视觉和房地产用途。感谢开发者

* * *

## 新问题

我设法采用了 Krishna 和 JFrankie 提供的答案。然而，我最终遇到了一系列新问题:(

我有一个扩展 BaseExpandableListAdapter 的类，以便我可以修改我的标题视图。

因此，我在显示数据库中的数据时遇到了一个大问题，因为为了根据我看到的所有示例从数据库中检索，您需要扩展 SimpleCursorTreeAdapter。（我不知道你是否可以通过 2 个不同的类来扩展你的类？）

我尝试了一个笨拙的解决方案（如下所示），它奇迹般地工作，但只返回标题组而没有孩子。实际上它一遍又一遍地重复组中的第一条记录。（我很高兴至少到目前为止取得了进展）

问题：

一个。如何在同一个适配器中使用 BaseExpandableListAdapter 和 SimpleCursorTreeAdapter？这样我就可以获得我的自定义布局以及从数据库中读取我的数据？

湾。我已经通过谷歌浏览了示例，即 ExpandableListView 1 和 2，但对于新手来说，没有足够的点来连接如何进行不同的实现。感谢 JFrankie，我研究了他的代码来创建适配器。

这是自定义适配器

```
public class ExpandableListViewAdapterCustom extends BaseExpandableListAdapter {
    protected Activity currentActivity;
    public ExpandableListViewAdapterCustom(Activity callingActivity){
    this.currentActivity = callingActivity;
    }

    private Cursor mGroupsCursorLocal ;
    private Cursor mChildCursor;
    private Context ctx;
    private int groupItem;
    private int childItem;
    private String[] fieldsToUseFromGroupCursor;
    private int[] screenTextsToMapGroupDataTo;
    private String[] fieldsToUseFromChildCursor;
    private int[] screenTextsToMapChildDataTo;

    public ArrayList<String> tempChild;
    public LayoutInflater minflater;
    public Activity activity;
    public int intGroupTotal;

    public void setCurrentActivity(Activity activity) {
       this.activity = activity;
    }

    public void setCtx(Context ctx) {
       this.ctx = ctx;
    }

     public void setGroupItem(int groupItem) {
         this.groupItem = groupItem;
      }

    public void setChildItem(int childItem) {
        this.childItem = childItem;
    }

    public Activity getCurrentActivity() {
        return currentActivity;
    }

     public Cursor getmGroupsCursorLocal() {
        return mGroupsCursorLocal;
      }

    public Context getCtx() {
        return currentActivity.getBaseContext();
    }

    public void setmGroupsCursorLocal(Cursor mGroupsCursor) {
        this.mGroupsCursorLocal = mGroupsCursor;
    }

    public ExpandableListViewAdapterCustom(Cursor mGroupsCursor,
                                       Activity activity,
                                       int groupItem,
                                       int childItem,
                                       String[] fieldsToUseFromGroupCursor,
                                       int[] screenTextsToMapGroupDataTo,
                                       String[] fieldsToUseFromChildCursor,
                                       int[] screenTextsToMapChildDataTo) {

        DatabaseRoutines db = new DatabaseRoutines(activity);

        setmGroupsCursorLocal(mGroupsCursor);
        mGroupsCursorLocal = db.fetchGroup();
        activity.startManagingCursor (mGroupsCursor);
        mGroupsCursorLocal.moveToFirst();

        mChildCursor=db.fetchChildren(mGroupsCursorLocal.getColumnIndex("Year"));
        mChildCursor.moveToFirst();
        activity.startManagingCursor(mChildCursor);

        setCtx(activity);
        setCurrentActivity(activity);

        }

        public void setInflater(LayoutInflater mInflater, Activity act) {
        this.minflater = mInflater;
        activity = act;
        }

        @Override
        public Object getChild(int groupPosition, int childPosition) {
           return null;
        }

        @Override
        public long getChildId(int groupPosition, int childPosition) {
          return 0;
        }

        @Override
        public View getChildView(int groupPosition, 
            int childPosition,boolean         
            isLastChild, 
            View convertView, 
            ViewGroup parent) {
           View v = convertView;
           if (v == null) 
        {
        LayoutInflater inflater = 
       (LayoutInflater)     ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);            
       v = inflater.inflate(R.layout.exp_listview_childrow, parent, false);
        }

        TextView txtMonth = (TextView) v.findViewById(R.id.txtMonth);
        TextView txtMonthAmountSent = (TextView)
        v.findViewById(R.id.txtMonthAmountSentValue);
        TextView txtMonthReceived = (TextView)
        v.findViewById(R.id.txtMonthAmountReceivedValue);
        txtMonth.setText(mChildCursor.getString(mChildCursor.getColumnIndex("Month")));

    txtMonthAmountSent.setText
   (mChildCursor.getString(mChildCursor.getColumnIndex("TotalSent")));
    txtMonthReceived.setText

    (mChildCursor.getString(mChildCursor.getColumnIndex("TotalReceived")));
    return v;
     }

    @Override
    public int getChildrenCount(int groupPosition) {
        return (mChildCursor.getCount());
       }

    @Override
     public Object getGroup(int groupPosition) {
     return null;
    }

    @Override
    public int getGroupCount() {
    return mGroupsCursorLocal.getCount();
    }

    @Override
    public void onGroupCollapsed(int groupPosition) {
    super.onGroupCollapsed(groupPosition);
    }

    @Override
     public void onGroupExpanded(int groupPosition) {
    super.onGroupExpanded(groupPosition);
    }

    @Override
    public long getGroupId(int groupPosition) {
    return 0;
    }

    @Override
    public View getGroupView(
       int groupPosition, 
       boolean isExpanded,
       View convertView,     
       ViewGroup parent) 
     {
         View v = convertView;
         if (v == null) {
        LayoutInflater inflater =  
        (LayoutInflater)  ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.exp_listview_groupheader, parent, false);
       }

       TextView txtYear = (TextView) v.findViewById(R.id.txtYearValue);
       TextView txtAmountSent = (TextView) v.findViewById(R.id.txtAmountSentValue);
       TextView txtAmountRecieved = (TextView) 
       v.findViewById(R.id.txtAmountReceivedValue);

       txtYear.setText(mGroupsCursorLocal.getString(
       mGroupsCursorLocal.getColumnIndex("Year")));

       txtAmountSent.setText(
       mGroupsCursorLocal.getString(mGroupsCursorLocal.getColumnIndex("TotalSent")));

       txtAmountRecieved.setText(
      GroupsCursorLocal.getString(mGroupsCursorLocal.getColumnIndex("TotalReceived")));
      return v;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
      return false;
    }

} 
```

数据库代码是这样的

```
public Cursor fetchGroup() {
    SQLiteDatabase db = this.getReadableDatabase();  //if memory leaks check here
        String query = "SELECT DISTINCT MIN(ID) AS id, 
    Year, SUM(SentAmount) AS    TotalSent, SUM(ReceivedAmount) AS TotalReceived 
     FROM  MyTbl GROUP BY Year ORDER BY Year DESC ";
      return db.rawQuery(query, null);}

public Cursor fetchChildren(int Yr) {
    SQLiteDatabase db = this.getReadableDatabase(); //if memory leaks check here
    String query = "SELECT  MIN(ID) AS id, 
    Year, Month, SUM(SentAmount) AS TotalSent, 
     SUM(ReceivedAmount) AS TotalReceived        
     FROM  MyTbl Where Year= "+ Yr +"   GROUP BY Year, 
     Month ORDER BY Year DESC, Month DESC";
    return db.rawQuery(query, null);
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:21:43.030

如果你想创建这样的标题视图

```
Year:2013 ------Total Spent 1,234.56 Total Income: 7,890.11 
```

在 getGroupview 中创建扩展 BaseExpandableListAdapter 的示例类

覆盖方法，对标题使用用户布局，在 getChildview 方法中，将布局用于

孩子们。

```
Note :     @Override
public int getGroupCount() {
    return Size of Group item;
} 
```

为了更好的答案，提供 logcat 错误..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:01:39.023

您是否尝试过实现自定义适配器并覆盖方法 getGroupView 并膨胀您的布局？您应该发送日志，以便我们尝试了解错误。例如

```
android:layout_toLeftOf="@+id/txtSentAmountYr" 
```

不正确..删除 '+'，alignBottom 中的alson 等等。如果您想了解有关创建自定义可扩展适配器的一些信息，请查看我的博客，请[点击此处](http://www.survivingwithandroid.com/2013/01/android-expandablelistview-baseexpandablelistadapter.html)。

# c# - 使用 Include 方法在 EF 中急切加载实体时，无法将 lambda 表达式转换为类型“字符串”

> ID：16107988
> 
> 赞同：0
> 
> 时间：2013-04-19T15:20:13.223
> 
> 标签：c#, asp.net-mvc-3, entity-framework, lambda

在将控制器移动到自己的类之前，我在控制器中有以下方法，并且它抱怨`s => s.LocationAssignment`说它不能将它从 lambda 更改为字符串，因为它是一个德尔门。

任何人都知道我必须改变什么？

```
public static IEnumerable<Service> getAllService()
{
    using (var db = new LocAppContext())
    {
        var service = db.Locations.Include(s => s.LocationAssignment);

        var serv = (from s in db.Services
                    where s.active == true
                    select s).ToList();
        return serv;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:25:36.507

如果您使用的是 EF 版本 4，则该`Include`方法不接受 lambda 表达式，而是接受字符串。该错误对于您的特定情况非常有意义。这是`Include`EF 4 中方法的实际定义：

> 公共 DbQuery 包含（字符串路径）

所以你可以做的是：

```
db.Locations.Include("LocationAssignment"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-31T18:22:34.273

只想补充一点，我收到了这个错误。我错过了下面的参考，花了我一段时间才弄清楚，因为我认为错误会提到缺少命名空间指令或其他东西，而不是委托不能转换为字符串。

```
using System.Data.Entity; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-19T15:22:55.310

`service`未使用。

`service`是类型`IQueryable<Locations>`。方法返回`IEnumerable<Service>`

```
public static IEnumerable<Service> getAllService()
{
    using (var db = new LocAppContext())
    {
        // var service = db.Locations.Include(s => s.LocationAssignment);

        var serv = (from s in db.Services
                    where s.active == true
                    select s).ToList();
        return serv;
    }
} 
```

# python - NumPy：如何使用 argmin/max 输出沿单个维度折叠 N 维数组？

> ID：16107992
> 
> 赞同：2
> 
> 时间：2013-04-19T15:20:31.693
> 
> 标签：python, multidimensional-array, matrix, numpy, slice

有没有一种直接的方法可以使用调用 NumPy 的输出`argmax`或`argmin`在 ND 数组的单个维度上定义该数组的索引？

这可能最好用一个例子来解释。考虑以下随时间变化的 2D 温度读数网格示例：

```
>>> import numpy as np
>>> times = np.array([0, 20])
>>> temperature_map_t0 = np.array([[10, 12, 14], [23, 40, 50]])
>>> temperature_map_t1 = np.array([[20, 12, 15], [23, 10, 12]])
>>> temperature_map = np.dstack([temperature_map_t0, temperature_map_t1]) 
```

和包含相应*压力*读数的相同形状的 ND 阵列：

```
>>> pressure_map = np.random.rand(*temperature_map.shape) 
```

我们可以找到每个位置的最高温度：

```
>>> top_temperatures = temperature_map.max(axis=2)
>>> top_temperatures
array([[20, 12, 15],
       [23, 40, 50]]) 
```

以及它们发生的时间：

```
>>> times = times[temperature_map.argmax(axis=2)]
>>> times
array([[20,  0, 20],
       [ 0,  0,  0]]) 
```

但是我们怎样才能`temperature_map.argmax(axis=2)`找到相应的压力呢？

```
>>> pressures_at_top_temperatures = pressures[ ???? ] 
```

换句话说 - 使用该维度的`argmin`or`argmax`索引折叠 ND 数组的单个维度的索引语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:36:57.783

感谢[Jaime](https://stackoverflow.com/users/110026/jaime)在我遇到[类似问题时回答](https://stackoverflow.com/a/15661214/553404)

```
import numpy as np
times = np.array([0, 20])
temperature_map_t0 = np.array([[10, 12, 14], [23, 40, 50]])
temperature_map_t1 = np.array([[20, 12, 15], [23, 10, 12]])
temperature_map = np.dstack([temperature_map_t0, temperature_map_t1])
top_temperatures = temperature_map.max(axis=2)

# shape is a tuple - no need to convert
# http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.shape.html
pressure_map = np.random.rand(*temperature_map.shape)

idx = temperature_map.argmax(axis=2)

s = temperature_map.shape
result pressure_map[np.arange(s[0])[:, None], np.arange(s[1]), idx] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:20:31.693

我能想到的最直接的解决方案是使用逻辑索引将未由所需索引选择的条目归零，然后对感兴趣的维度求和，例如如下：

```
def collapse_dimension(ndarr, index, axis):
    r = np.rollaxis(ndarr, axis, 0)
    return np.sum((r[i] * (index == i) for i in range(r.shape[0])), axis=0) 
```

所以给定上面的例子，我们可以使用`argmax`或`argmin`折叠任何给定维度上的数组，例如

```
>>> pressures_at_top_temperatures = collapse_dimension(
...     pressure_map, temperature_map.argmax(axis=2), 2) 
```

并且，简单地，`max`使用相应的跨任何给定维度`argmax`：

```
>>> temperature_map.max(axis=2) == collapse_dimension(
...     temperature_map, temperature_map.argmax(axis=2), 2)
array([[ True,  True,  True],
       [ True,  True,  True]], dtype=bool) 
```

但是，我强烈怀疑有一种更好的方法可以做到这一点，它不涉及编写这个额外的函数——有什么想法吗？

# android - Android 中的透明度问题

> ID：16107995
> 
> 赞同：3
> 
> 时间：2013-04-19T15:20:37.797
> 
> 标签：android, performance, drawing, transparency

我在一些 Android 平板电脑上偶然发现了一个问题，特别是三星 Galaxy Note、Galaxy Tab 10 和 Nexus 10。问题是在我让应用程序运行一段时间并从最近或通过通知恢复它之后，应用程序 UI 混乱提高图标和控件小部件的透明度。

例如，有一个线性布局，它具有灰色渐变背景和在其顶部绘制的两个图像按钮。这些 imageButtons 具有透明背景和一个图标集作为源。当问题出现时，可以观察到 UI 是这样绘制的： ![在此处输入图像描述](https://i.stack.imgur.com/cwTZK.png)

灰色背景渐变也失去了它的 alpha 并且在这种情况下被绘制成平坦的。

以前有没有人观察过类似的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:06:06.097

您可能希望在包含这些视图的 Activity 上禁用硬件加速，或者在 LinearLayout 容器上禁用它。

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
private void disableHardwareAcceleration(View v) {
      if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            v.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
      }
} 
```

如果您有一个引用 LinearLayout 的私有变量，请将其传递给此方法以禁用硬件加速。

# sql - 查找数据库逻辑详细信息的脚本

> ID：16107997
> 
> 赞同：1
> 
> 时间：2013-04-19T15:20:46.897
> 
> 标签：sql, oracle, oracle11g

我正在编写此 SQL 脚本以列出数据库逻辑记录详细信息，但无法成功连接表。

试图列出所有下面的列，但在显示`file_id`（数据文件 ID）时绊倒了。

非常感谢所有帮助和建议。

所需列：

```
 owner, segment_name, partition_name, file_id, segment_type, 
 extent count, size_k (space occupied by object) 
```

我想我需要加入`dba_segment`, `dba_extents`&`dba_tablespaces`意见，但它不工作...

```
SELECT 
    dbs.owner, dbs.segment_name, dbs.partition_name, dbe.file_id, 
    dbs.segment_type, dbs.extents "Extent count" , dbs.bytes/1024 "size_k" 
FROM dba_segments dbs, dba_extents dbe, dba_tablespaces tbs 
WHERE 
    dbs.tablespace_name = dbe.tablespace_name 
    and dbe.tablespace_name = tbs.tablespace_name 
    and tbs.contents = 'PERMANENT' 
```

上面没有给出正确的结果......看起来像表连接或有什么问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T14:45:28.073

试试这个查询。选择您需要的列。请注意，partition_name 可以为空。有一个segment.header_file 和一个extent file_id 可以不同。对于段分区，段 extent_count = max(extent_id)+1，因为每个段分区的 extent_ids 从零开始。段字节 = sum(extent.bytes)。

```
SELECT seg.owner, seg.segment_name, seg.partition_name, 
      seg.header_file, seg.bytes / 1024 AS segment_kb, seg.EXTENTS AS extent_count, 
      seg.tablespace_name, ext.extent_id, ext.file_id, ext.bytes / 1024 as extent_kb
FROM dba_segments seg
JOIN dba_extents ext
  ON seg.owner = ext.owner
 AND seg.segment_name = ext.segment_name
 AND (seg.partition_name = ext.partition_name OR seg.partition_name IS NULL)
ORDER BY seg.owner, seg.segment_name, seg.partition_name, ext.extent_id
 ; 
```

# sql - SQL Server：使用 CTE 行结果作为列

> ID：16107999
> 
> 赞同：1
> 
> 时间：2013-04-19T15:20:48.130
> 
> 标签：sql, sql-server-2008

使用 SQL Server。我有以下问题：我正在创建一个基于开始/结束日期的 CTE，它为两个日期之间的每周生成一组行，如下所示：

```
StartDate       EndDate
2013-02-25 00:00:00.000 2013-03-03 00:00:00.000
2013-04-01 00:00:00.000 2013-04-07 00:00:00.000 
```

现在我想在另一个 SQL 语句中使用星期行作为列，所以 COLUMN1 | 第 1 周 | 第 2 周 | 第 3 周...

我不确定如何做到这一点。我的 CTE 声明如下。

有任何想法吗？

谢谢！

```
declare @sDate datetime,
        @eDate datetime

select  @sDate = '2013-02-25',
        @eDate = '2013-04-25';

WITH Weeks_CTE (StartDate, EndDate)
AS
(
  select @sDate StartDate, DATEADD(wk,DATEDIFF(wk, 0, @sDate), 6) EndDate
  union all
  select dateadd(ww, 1, StartDate),
    dateadd(ww, 1, EndDate)
  from Weeks_CTE
  where dateadd(ww, 1, StartDate)<=  @eDate
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:45:14.850

为了将行结果转换为列，您需要进行数据透视。

如果列是动态的，则根据第一个查询的结果，您需要进行动态透视。

请查看[这个问题](https://stackoverflow.com/questions/10404348/sql-server-dynamic-pivot-query)并进行一些深入的谷歌搜索以了解动态枢轴。