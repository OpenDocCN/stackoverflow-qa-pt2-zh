# StackOverflow 问答 14073000-14073999

# php - PHP 代码正在返回特殊德语字符的 HTML 实体

> ID：14073009
> 
> 赞同：1
> 
> 时间：2012-12-28T17:02:02.987
> 
> 标签：php, mysql, character-encoding, jquery-ui-autocomplete

我无法让我的 PHP 5.3 代码准确地返回我在 MySQL (5.5) 数据库中的内容。

我正在使用 jquery-ui-autocomplete（1.9.2，但它也使用 1.8.x）来检索城市名称。例如，一个城市是“Heßheim”，但 PHP 正在返回“He `&szlig;`heim”。数据库/表排序规则是 Latin1_general_ci，但将其更改为 utf8_general_ci 并没有帮助。我的PHP代码：

```
$term = trim(strip_tags($_GET['term']));
//retrieve the search term that autocomplete sends

if (!is_numeric($term)) {
    $qstring = "SELECT DISTINCT city FROM table WHERE city LIKE '" . $term . "%' ORDER BY city ASC";
    $result = mysql_query($qstring);
    //query the database for entries containing the term

    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) { //loop through the retrieved values
        //$row['id'] = (int)$row['id'];
        $row['city'] = htmlentities(strip_tags($row['city']));
        $row_set[] = htmlspecialchars_decode($row['city']);
        //build an array
    }
}

header('Content-Type: text/html; charset=utf-8');
echo json_encode($row_set); 
```

我已经尝试了我能想到的一切来解码 HTML 实体，但即使是上面的也没有做到。也`$row['city'] = htmlentities(strip_tags($row['city']));`必须在那里，否则它不会为 Heßheim 返回任何东西。

测试脚本返回此网页 - ["Heddesheim","Heidelberg","Heßheim"] - 页面源如下所示 - ["Heddesheim","Heidelberg","He `&szlig;`heim"]。当然 jquery-ui-autocomplete 将其列为 He `&szlig;`heim。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:05:32.800

您应该使用`html_entity_decode()`而不是`htmlspecialchars_decode`. [PHPMAN](http://php.net/manual/en/function.html-entity-decode.php "html_entity_decode")

另外，如果您只是对其进行编码，为什么还要对其进行解码？浏览器将在呈现页面时解码实体，所以我认为您需要的只是

```
$row['city'] = htmlentities(strip_tags($row['city']));  
$row_set[] = $row['city']; 
```

# java - 无法从 Netbeans 调试 Java Web 应用程序

> ID：14073011
> 
> 赞同：0
> 
> 时间：2012-12-28T17:02:22.193
> 
> 标签：java, debugging, jakarta-ee, netbeans, jboss

我有一个由三个 Web 项目组成的 Java EE 5 应用程序。我正在使用 JBoss 5.1 Web 服务器和 NetBeans 7.2 IDE。

我有以下问题：

1.  我无法在调试模式下启动应用程序。据我所知，NetBeans 和 Java 中有两种（最好的）方法：远程调试和通过共享内存进行调试。我读了这篇文章[如何在 netbeans 中调试 JBOSS 应用程序？](https://stackoverflow.com/questions/5337787/how-to-debug-jboss-application-in-netbeans)我在 Jboss 配置中设置了调试参数（我也知道共享内存和远程调试有不同的参数集），但是当我去附加调试器时，我得到了以下错误：

    *   如果我使用远程调试，我会收到错误“连接被拒绝”；

    *   如果我使用共享内存，我会收到类似于此文本“dt_shmem：找不到文件路径”的错误。

当我通过运行 run.bat 文件启动 JBoss 时会发生这些错误。如果我从 Netbeans IDE 启动 JBoss，我可以附加到远程进程（共享内存方法仍然存在问题），但是我还有其他问题，关于页面生命周期中的变量原语和模型绑定（我现在不会写） .

如何解决这些问题以便调试应用程序？至少，当它失败时，我怎样才能找到更好的错误消息。通过仅查找“连接被拒绝”错误，我无法在网上找到太多信息。

2.  为什么我不能只按运行主项目（或 Web 项目）并让 netbeans 启动应用程序，在新的浏览器选项卡（作为 localhost）中打开它并启动调试模式？我来自 .net 背景，VS 将其作为开箱即用的工具（称为 ASP .NET 开发服务器）提供。为什么我必须使用外部 Web 服务器并且每次更改都部署新应用程序然后附加到它？为什么 Netbeans 默认不能使用 JVM 来运行应用程序，而以后我部署应用程序时我会选择使用哪个 Web 服务器！？

我希望有人能对我说清楚:)

谢谢

在 2013 年 1 月 3 日添加了注释。

好吧，当我在 web 项目的 project.properties 文件中更改 VM 选项时（添加了 run.args.extra=-J-Xms256m -J-Xmx756m），我在执行代码时成功调试了应用程序和热断点。但是，托管 Bean 属性仍然存在奇怪的问题。我在页面上有选择列表，它连接到布尔属性。当没有选择任何内容时，它应该默认设置为 null 值（当我通过运行 run.bat 文件启动 JBoss 服务器时），但它的值默认设置为 false！我在firebug中检查了参数发布值，将参数发布到bean没有问题。在我看来，问题在于 JSF 框架试图将 post 值映射到托管 Beans 属性，但我不知道为什么会发生这种情况。我还检查了 faces-config.xml，但没有找到映射到这个特定属性的任何特定规则。有小费吗？

# php - 插入数据库的字符串不完整

> ID：14073012
> 
> 赞同：0
> 
> 时间：2012-12-28T17:02:29.823
> 
> 标签：php, mysql, pdo

我有一个非常有趣的问题。只有部分值被输入到我的数据库中。

我有一个包含表单的页面。用户将填写表格并提交。所有 POST 值都是正确的，并且正在提交到数据库。一个特定的值 ($criteria) 仅提交字符串的最后一部分。如果我回显 $criteria 的值，它就在那里，但是当我在 mysqlAdmin 中查看它时，它只有一部分在那里。

它应该提交：

> `Communication | 1 | dsafadf | Customer Service | 2 | asdfadf | Dependability | 3 | asdfadsf | Initiative | 4 | dsafadsfa | Job Knowledge | 5 | dsadafsadsf | Judy | 1 | asdfasdf | Punctuality | 2 | asdfdasdfadsf |`

但在数据库中我只得到 - | 准时 | 2 | asdfdasdfadsf |

我尝试使用 mysqlAdmin 手动添加值，它工作正常。

如果有其他信息需要帮助我会补充。

感谢大家！！

* * *

这是我的插入脚本：

* * *

```
 public function insertReview() {
      $fk_employee = $_POST['fk_employee'];

      // Current Date returned from JQuery and formatted to add to DB.
      $cdate = $_POST['current_date'];
      $current_date = explode("/", $cdate);
        $cmonth = $current_date[0];
        $cday = $current_date[1];
        $cyear = $current_date[2];
        $current_dateA = array($cyear, $cmonth, $cday);
      $review_date = implode("-", $current_dateA);

      // Review Begin Date returned from JQuery Datepicker and formatted to add to DB.            
      $bdate = $_POST['r_period_begin'];
      $begin_date = explode("/", $bdate);
        $bmonth = $begin_date[0];
        $bday = $begin_date[1];
        $byear = $begin_date[2];
        $begin_dateA = array($byear, $bmonth, $bday);
      $r_period_begin = implode("-", $begin_dateA);

      // Review End Date returned from JQuery Datepicker and formatted to add to DB.
      $edate = $_POST['r_period_end'];
      $end_date = explode("/", $edate);
        $emonth = $end_date[0];
        $eday = $end_date[1];
        $eyear = $end_date[2];
        $end_dateA = array($eyear, $emonth, $eday);
      $r_period_end = implode("-", $end_dateA);

    // Criteria 
      $criterias = $_POST['criteria'];
      //var_dump($criterias);
      $criteriaValue = $_POST['criteriaValue'];
      //var_dump($criteriaValue);
      $comments = $_POST['Comments'];

      foreach ($criteriaValue as $key => $value ){
          foreach( $criterias as $criteria ){
              if( $criteria == $key ){
                  $string1 = $key;
                  foreach( $comments as $comment => $comm ){
                      if( $string1 == $comment ){
                          $string3 = $comm;
                      }
                  }
              }
          }
          //echo $key . '<br>';
          foreach ( $value as $result ){
              $string2 = $result;
          }

      $criteria = mysql_real_escape_string( $string1 . ' | ' . $string2 . ' | ' . $string3 . ' | ' );
      echo $criteria;
      }
      // End of Criteria

      $job_knowledge = $_POST['job_knowledge'];
      $jk_comments = $_POST['jk_comments'];
      $work_quality = $_POST['work_quality'];
      $wq_comments = $_POST['wq_comments'];
      $attendance = $_POST['attendance'];
      $attend_comments = $_POST['attend_comments'];
      $initiative = $_POST['initiative'];
      $init_comments = $_POST['init_comments'];
      $communication = $_POST['communication'];
      $comm_comments = $_POST['comm_comments'];
      $dependability = $_POST['dependability'];
      $depend_comments = $_POST['depend_comments'];
      $customer_service = $_POST['customer_service'];
      $cs_comments = $_POST['cs_comments'];
      $overall_rating = $_POST['overall_rating'];
      $additional_comments = $_POST['additional_comments'];
      $goals = $_POST['goals'];

    $conn = parent::connect();
    $sql = "INSERT INTO " . TBL_EMPLOYEE_REVIEW . " (
              fk_employee,
              review_date,
              r_period_begin,
              r_period_end,
              job_knowledge,
              jk_comments,
              work_quality,
              wq_comments,
              attendance,
              attend_comments,
              initiative,
              init_comments,
              communication,
              comm_comments,
              dependability,
              depend_comments,
              customer_service,
              cs_comments,
              overall_rating,
              additional_comments,
              goals,
              criteria
            ) VALUES (
              :fk_employee,
              :review_date,
              :r_period_begin,
              :r_period_end,
              :job_knowledge,
              :jk_comments,
              :work_quality,
              :wq_comments,
              :attendance,
              :attend_comments,
              :initiative,
              :init_comments,
              :communication,
              :comm_comments,
              :dependability,
              :depend_comments,
              :customer_service,
              :cs_comments,
              :overall_rating,
              :additional_comments,
              :goals,
              :criteria
            )";

    try {
      $st = $conn->prepare( $sql );
      $st->bindValue( ":fk_employee", $fk_employee, PDO::PARAM_STR );
      $st->bindValue( ":review_date", $review_date, PDO::PARAM_STR );
      $st->bindValue( ":r_period_begin", $r_period_begin, PDO::PARAM_STR );
      $st->bindValue( ":r_period_end", $r_period_end, PDO::PARAM_STR );
      $st->bindValue( ":job_knowledge", $job_knowledge, PDO::PARAM_STR );
      $st->bindValue( ":jk_comments", $jk_comments, PDO::PARAM_STR );
      $st->bindValue( ":work_quality", $work_quality, PDO::PARAM_STR );
      $st->bindValue( ":wq_comments", $wq_comments, PDO::PARAM_STR );
      $st->bindValue( ":attendance", $attendance, PDO::PARAM_STR );
      $st->bindValue( ":attend_comments", $attend_comments, PDO::PARAM_STR );
      $st->bindValue( ":initiative", $initiative, PDO::PARAM_STR );
      $st->bindValue( ":init_comments", $init_comments, PDO::PARAM_STR );
      $st->bindValue( ":communication", $communication, PDO::PARAM_STR );
      $st->bindValue( ":comm_comments", $comm_comments, PDO::PARAM_STR );
      $st->bindValue( ":dependability", $dependability, PDO::PARAM_STR );
      $st->bindValue( ":depend_comments", $depend_comments, PDO::PARAM_STR );
      $st->bindValue( ":customer_service", $customer_service, PDO::PARAM_STR );
      $st->bindValue( ":cs_comments", $cs_comments, PDO::PARAM_STR );
      $st->bindValue( ":overall_rating", $overall_rating, PDO::PARAM_STR );
      $st->bindValue( ":additional_comments", $additional_comments, PDO::PARAM_STR );
      $st->bindValue( ":goals", $goals, PDO::PARAM_STR );
      $st->bindValue( ":criteria", $criteria, PDO::PARAM_STR );

      $st->execute();
      parent::disconnect( $conn );
    } catch ( PDOException $e ) {
      parent::disconnect( $conn );
      die( "Query failed: " . $e->getMessage() );
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:17:24.063

这看起来可能是罪魁祸首：

```
$criteria = mysql_real_escape_string( $string1 . ' | ' . $string2 . ' | ' . $string3 . ' | ' ); 
```

它在 foreach() 循环的末尾：

```
foreach ($criteriaValue as $key => $value ){
    ...

    $criteria = mysql_real_escape_string( $string1 . ' | ' . $string2 . ' | ' . $string3 . ' | ' );
} 
```

您在此处将该值直接插入到数据库中：

```
$st->bindValue( ":criteria", $criteria, PDO::PARAM_STR ); 
```

但是你的循环总是从循环的最后一次迭代中创建一个字符串。它似乎没有连接以前的值。你概率。需要这样的东西：

```
$criteria .= mysql_real_escape_string( $string1 . ' | ' . $string2 . ' | ' . $string3 . ' | ' ); 
```

（注意“。=”）

但是，您也在`$critera`嵌套的 foreach 循环中使用，因此您也必须调整该位。这样的事情应该很容易：

```
foreach( $criterias as $crit){
          if( $crit == $key ){
.... 
```

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:22:28.310

您的循环中有多个逻辑错误，这些错误设置了以下值`$criteria`：您尝试在`$value`不需要的情况下循环；如果可以的话，它总是会`$string2`设置为 final `$value`。您还拥有`$criteria`第二个内部 foreach 循环的持有者和您想要使用的内容。最后，您正在设置`$critera`每个循环，而不是附加到它，并且您的输出具有误导性，因为您在循环时回显，而不是`$criteria`从循环外部回显最终结果：

```
 foreach ($criteriaValue as $key => $value ){
          foreach( $criterias as $criteria ){
              if( $criteria == $key ){
                  $string1 = $key;
                  foreach( $comments as $comment => $comm ){
                      if( $string1 == $comment ){
                          $string3 = $comm;
                      }
                  }
              }
          }
          //echo $key . '
';
          foreach ( $value as $result ){
              $string2 = $result;
          }

      $criteria = mysql_real_escape_string( $string1 . ' | ' . $string2 . ' | ' . $string3 . ' | ' );
      echo $criteria;
      } 
```

应该：

```
 foreach ($criteriaValue as $key => $value ){
  foreach( $criterias as $criteriasValue ){
    if( $criteriasValue == $key ){
      $string1 = $key;
      foreach( $comments as $comment => $comm ){
        if( $string1 == $comment ){
          $string3 = $comm;
        }
      }
    }
  }

  $string2 = $result;

  $criteria .= mysql_real_escape_string( $string1 . ' | ' . $string2 . ' | ' . $string3 . ' | ' );

}

echo $criteria; 
```

# c# - MVC、子实体、EditorFor 和不显眼的验证

> ID：14073018
> 
> 赞同：0
> 
> 时间：2012-12-28T17:03:12.457
> 
> 标签：c#, .net, asp.net-mvc-4, unobtrusive-validation, razor-2

这大概会是个大坑……

好的，所以我正在构建一个 MVC4 网站，该网站有一个中频主题，能够编辑父记录以及在同一页面上添加/删除/编辑子记录。使用 MVC 的魔力，我可以为子记录定义部分视图，如下所示：

```
@model NFBC.Models.SubMap

<tr id="@String.Concat("SubMap", ViewBag.Index)">
    <td class="mapname">
        <input type="hidden" name="submaps[@ViewBag.Index].Id" value="@Model.Id" />
        <input type="text" name="submaps[@ViewBag.Index].MapName" value="@Model.MapName" />
    </td>
    <td class="miles"><input type="text" name="submaps[@ViewBag.Index].Miles" value="@Model.Miles" /></td>
    <td class="difficulty">@Html.DropDownList("submaps[" + (string)ViewBag.Index.ToString() + "].DifficultyId", (SelectList)ViewBag.Difficulty(Model.DifficultyId))</td>
    <td class="elevation"><input type="text" name="submaps[@ViewBag.Index].Elevation" value="@Model.Elevation" /></td>
    <td class="mapfile"><input type="text" name="submaps[@ViewBag.Index].MapFile" value="@Model.MapFile" /></td>
    <td class="delete"><img src="~/Images/Error_red_16x16.png" /></td>
</tr> 
```

然后在父视图中，我只需调用局部视图来渲染其所有子视图：

```
<table id="ChoicesTable">
    <thead>
        <tr>
            <th>Map Name</th>
            <th>Miles</th>
            <th>Difficulty</th>
            <th>Elevation</th>
            <th>Map File</th>
            <th></th>
        </tr>
    </thead>
    for (int i = 0; i < Model.SubMaps.Count; i++)
    {
        var map = Model.SubMaps.ElementAt(i);
        ViewBag.Index = i;
        Html.RenderPartial("_MapChoiceEditRow", map);
    }
</table> 
```

我找不到有关“子实体”名称语法的任何文档（即：name="subMaps[@ViewBag.Index].Id"），但它在绑定到模型时有效；只要索引值从 0 开始并且没有丢失任何值（即：0、1、2、4、5 将导致仅绑定 0、1 和 2），所有子项都会被填充。使用 jQuery 的 Ajax 调用的魔力，我能够在客户端动态插入和删除行。

问题是我根本无法找到一种可靠地将@Html.EditorFor() 与子实体控件一起使用的方法。这将是一个非常好的功能，因为 EditorFor 将所有不显眼的 jquery 验证属性注入到 html 中。现在我基本上被迫通过在所有地方添加我自己的“data-val ='true'”标签（示例中没有显示，我还没有这样做）来模拟这种行为，这对我来说似乎非常混乱.

所以我有了一个绝妙的主意，即采用内置模板并创建自己的模板来注入这些东西（以及我自己的一些其他东西，例如“帮助”文本的引导程序“占位符”属性，也许还有工具提示， ETC）。我下载了 MVC 源代码并打开了默认的编辑器模板，但是我没有看到呈现不显眼的值的标记，而是得到了一大堆帮助函数，它们在某些时候“神奇地”呈现了不显眼的属性。我无法弄清楚它是如何完成的，因为验证内容都被打包到我无法访问的内部类中。

我是否在这里遗漏了什么，或者这只是 MVC 的一个弱点，我将不得不解决这个问题。我真的很想不需要自己模拟不显眼的验证属性生成代码，但如果这是我想我可以做到的唯一解决方案......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T22:11:07.130

我花了一下午的时间研究源代码，并发现了几个关键的帮助方法，这些方法让我可以做我需要做的事情。

这不是世界上最漂亮的东西，但它对自动化我以前所做的事情大有帮助。我的解决方案是创建一个名为 TextBoxForChild 的新 TextBoxFor 辅助方法：

```
 public static MvcHtmlString TextBoxForChild<TModel, TProperty>(
            this HtmlHelper<TModel> htmlHelper,
            Expression<Func<TModel, TProperty>> expression,
            string parentName,
            int index,
            IDictionary<string, object> htmlAttributes)
    {
        var metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
        var rules = ModelValidatorProviders.Providers.GetValidators(metadata, htmlHelper.ViewContext).SelectMany(v => v.GetClientValidationRules());

        if (htmlAttributes == null)
            htmlAttributes = new Dictionary<String, object>();
        if (!String.IsNullOrWhiteSpace(metadata.Watermark))
            htmlAttributes["placeholder"] = metadata.Watermark;
        UnobtrusiveValidationAttributesGenerator.GetValidationAttributes(rules, htmlAttributes);

        return htmlHelper.TextBox(String.Format("{0}[{1}].{2}", parentName, index, metadata.PropertyName), metadata.Model, htmlAttributes);
    } 
```

我得到“ModelMetadata”对象，然后为模型生成“模型验证器规则”。然后我用水印元数据值填充我的自定义“占位符”html 属性，最后调用“UnobtrusiveValidationAttributesGenerator.GetValidationAttributes”，它用所有验证属性填充我的 html 属性字典。

然后我做了一些自定义字符串格式化，以确保输入名称遵循 MVC 子实体格式，瞧，它有效！

仅供参考，以防有人想知道“水印”值来自哪里，它是来自“DisplayAttribute”的值，称为“提示”：

```
public class FamilyMember
{
    public int ClubNumber { get; set; }

    [Display(Name="Name", Prompt="Name")]
    [Required]
    public string Name { get; set; }
    public string Cell { get; set; }
    public string Email1 { get; set; }
    public string Email2 { get; set; }
    public DateTime? BirthDate { get; set; }
} 
```

迷人的！

# twitter-bootstrap - 显示/隐藏 twitter 引导选项卡

> ID：14073019
> 
> 赞同：7
> 
> 时间：2012-12-28T17:03:14.620
> 
> 标签：twitter-bootstrap, tabs

我正在使用引导程序在选项卡下方显示内容，但是我想在再次单击选项卡时折叠选项卡。这是我试图开始工作的代码，但无济于事：

```
 <ul id="myTab" class="nav nav-tabs">
        <li class="square"><a class="story" href="#article1" data-toggle="tab"><img src="#"/></a></li>
        <li class="square"><a class="story" href="#article2" data-toggle="tab"><img src="#g"/></a></li>
        <li class="square"><a class="story" href="#article3" data-toggle="tab"><img src="#"/></a></li>
               <div id="article1" class="tab-pane fade"><p>Lorem ipsum...</p></div>
               <div id="article2" class="tab-pane fade"><p>Lorem ipsum dolor sit amet....</p</div>
               <div id="article3" class="tab-pane fade"><p>Lorem ipsum dolor sit amet...</p></div>
    </ul>

<script>
$('#myTab a').click(function (e) {
            if($(this).tab.hasClass('active')){
                    $(this).tab('hide');
                } else {
                        e.preventDefault();
                        $(this).tab('show');
                    }
                })
</script> 
```

我不确定标签是否应该以这种方式工作......我应该尝试折叠功能吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-08-21T20:52:48.057

这是杰罗米解决方案的一个调整，我相信它可以满足您的需求：

```
$('#myTab a').click(function (e) {
    var tab = $(this);
    if(tab.parent('li').hasClass('active')){
        window.setTimeout(function(){
            $(".tab-pane").removeClass('active');
            tab.parent('li').removeClass('active');
        },1);
    }
}); 
```

[http://jsfiddle.net/NQ97h/39/](http://jsfiddle.net/NQ97h/39/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T13:38:32.563

我有一个可以工作的版本（在我的情况下，仅用于主选项卡，您必须对其进行修改以处理下拉选项卡。）我只是将它扔到上面 Jeromy 的 jsfiddle 的一个分支中：[http://jsfiddle .net/HsqQQ/3/](http://jsfiddle.net/HsqQQ/3/)

这是代码：

```
 $(document).off('click.tab.data-api');
    $(document).on('click.tab.data-api', '[data-toggle="tab"]', function (e) {
        e.preventDefault();
        var tab = $($(this).attr('href'));
        var activate = !tab.hasClass('active');
        $('div.tab-content>div.tab-pane.active').removeClass('active');
        $('ul.nav.nav-tabs>li.active').removeClass('active');
        if (activate) {
            $(this).tab('show')
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-20T14:12:45.837

遇到同样的问题，通过修改 bootstrap.js 解决了。

在函数上找到选项卡类定义（通常是第 1783 行）`Tab.prototype.show`并修改：

`if ($this.parent('li').hasClass('active')) return`

到

```
if ($this.parent('li').hasClass('active')) {
            $this.parent('li').removeClass('active')
            $(selector).removeClass('active')
            return
        } 
```

然后它将按预期工作，而无需在您的项目中创建更多“自定义脚本”。

编辑：

此修改会影响项目中的每个选项卡面板，但是，如果您只想对所需的对象产生此效果，则需要添加一些`data-hide`或类似的内容，例如：

```
if ($this.parent('li').hasClass('active')) {
            if ($this.parent('li').attr('data-hide') == "on") {
                $this.parent('li').removeClass('active')
                $(selector).removeClass('active')
            }
            return
        } 
```

然后，每个父母都会在点击`<li>`时`data-hide`隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-10T19:49:31.393

我得到了一个有效的引导药丸导航，它支持使用以下代码打开/关闭工具：

```
jQuery(function() {
// Closing active pill when clicking on toggle:
jQuery(document).off('click.bs.tab.data-api');
jQuery(document).on('click.bs.tab.data-api', '[data-toggle="pill"]', function(e) {
    e.preventDefault();
    var activeClass = 'active';
    var tab = jQuery(this).attr('href');
    var tab = tab && tab.replace(/.*(?=#[^\s]*$)/, ''); // strip for ie7
    var tab = jQuery(tab);
    if (!tab.hasClass(activeClass)) {
        jQuery(this).tab('show');
    } else {
        jQuery(this).parent().removeClass(activeClass);
        tab.parent().children().removeClass(activeClass);
    }
}); 
```

});

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-21T08:07:42.980

做这样的事情怎么办？`show.bs.tab`总是会在之前触发`click`，它会给出`click`正确的状态

```
$(document).on('show.bs.tab', '#myTab a', function(e) {
   if (!$(e.target).hasClass('active')) {
      $(e.target).addClass('monkeyPatch');
   }
});

$(document).on('click', '#myTab a', function(e) {
   var tab = $(this);
   if (tab.hasClass('monkeyPatch')) {
      tab.removeClass('monkeyPatch');
   } else {
      $('.tab-pane').removeClass('active');
      tab.parent('li').removeClass('active');
   }
}); 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-01-02T21:43:40.343

是的，听起来你想要[Bootstrap 的折叠小部件](http://getbootstrap.com/2.3.2/javascript.html#collapse)。也就是说，这个 jQuery 将隐藏一个已经处于活动状态的选项卡：

```
$('#myTab a').click(function (e) {
    if($(this).parent('li').hasClass('active')){
        $( $(this).attr('href') ).hide();
    }
});​ 
```

问题是这会阻止隐藏的选项卡再次显示，所以我认为您不会想要使用它。见[http://jsfiddle.net/jhfrench/NQ97h/](http://jsfiddle.net/jhfrench/NQ97h/)

如果您希望能够恢复标签，请尝试：

```
$('#myTab a').click(function (e) {
    if($(this).parent('li').hasClass('active')){
        var target_pane=$(this).attr('href');
        $( target_pane ).toggle( !$( target_pane ).is(":visible") );
    }
}); 
```

有关此解决方案，请参阅[http://jsfiddle.net/epT3L/](http://jsfiddle.net/epT3L/)。

# grammar - Bison 语法 (1 reduce/reduce 1 shift/reduce )

> ID：14073024
> 
> 赞同：0
> 
> 时间：2012-12-28T17:03:50.923
> 
> 标签：grammar, bison, yacc

更新了......我知道，我的语法不明确，但我怎样才能重写这个语法来消除这种歧义？.....................

我有一个这样的语法：

野牛文件

```
%left equal nEqual
%left gre less greOrEqual lessOrEqual
%left plus sub
%left DIV mult exp mod
%left not
%left leftB rightB
%%

S :
var "=" A ";"  
;

A:
 Aexp   
|Rexp   
;

Aexp :
Num                                     
| leftB Aexp  rightB               
| Aexp  plus    Aexp            
| Aexp  sub     Aexp            
| Aexp  DIV     Aexp            
| Aexp  mult    Aexp            
;

Rexp :
Aexp                            
| Rexp  gre Rexp                
| Rexp  less Rexp               
| Rexp  greOrEqual  Rexp                
| Rexp  lessOrEqual Rexp            
| Rexp  equal Rexp              
| Rexp  nEqual Rexp             
; 
```

这样做我得到 1 个 shift/reduce 和 1 个 reduce/reduce 冲突，如何更改语法以消除冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:16:30.583

你的语法模棱两可。**A**可以是**Aexp**或**Rexp**。但是**Rexp**也可以是**Aexp**。这会导致减少/减少冲突。

假设你给你的解析器这个标记序列作为输入：

**var = 数字;**

开始符号 S 展开为**var = A ；**

非终结符**A**必须匹配令牌**Num**。但这应该是一个**A**扩展到和**Aexp**然后扩展到**Num**，还是应该是一个**A**扩展到和**Rexp**，然后扩展到**Aexp**，然后扩展到**Num**？

# sql - 日期时间的 SQL Server 转换问题

> ID：14073026
> 
> 赞同：11
> 
> 时间：2012-12-28T17:03:56.513
> 
> 标签：sql, sql-server, datetime, casting, sql-server-2008-r2

我总是使用此代码在日期时间进行转换：

```
 DECLARE @a datetime
 SET @a= CONVERT(datetime,'2012-12-28 14:04:43') 
 print @a 
```

但这不再起作用了！我什至尝试重新启动 SQL Server，但问题仍然存在：

![转换错误](../Images/186f75bfc83b805b1c8da921e7f43fbd.png)

图像中的错误是意大利语。英文应该是：

> *将 char 数据类型转换为 datetime 会导致 datetime 值超出允许值的范围​​​。*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-28T17:08:01.843

SQL Server 支持多种格式 - 请参阅[有关 CAST 和 CONVERT 的 MSDN 联机丛书](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。这些格式中的大多数**取决于**您拥有的设置 - 因此，这些设置有时可能有效 - 有时无效。

解决此问题的方法是使用 SQL Server 支持的（稍作调整的）**ISO-8601 日期格式**- 这种格式**始终**有效- 无论您的 SQL Server 语言和日期格式设置如何。

SQL Server 支持的[ISO-8601 格式](http://msdn.microsoft.com/en-us/library/ms180878.aspx)有两种形式：

*   `YYYYMMDD`仅适用于日期（无时间部分）；注意这里：**没有破折号！**，这很重要！`YYYY-MM-DD`不独立于 SQL Server 中的日期格式设置，并且**不会****在**所有情况下工作！

 **或者：

*   `YYYY-MM-DDTHH:MM:SS`对于日期和时间 - 请注意：这种格式*有*破折号（但*可以*省略），并且`T`在您的`DATETIME`.

这对 SQL Server 2000 和更新版本有效。

如果您使用 SQL Server 2008 或更新版本以及`DATE`数据类型（仅`DATE`-**不是** `DATETIME`！），那么您确实也可以使用该`YYYY-MM-DD`格式，并且该格式也适用于您的 SQL Server 中的任何设置。

不要问我为什么整个话题如此棘手和令人困惑——事情就是这样。但是使用该`YYYYMMDD`格式，您应该适用于任何版本的 SQL Server 以及 SQL Server 中的任何语言和日期格式设置。

所以在你的具体情况下 - 使用这个：

```
DECLARE @a datetime
SET @a= CONVERT(datetime, '2012-12-28T14:04:43') 
print @a 
```

这应该适用于**任何**SQL Server 安装，具有**任何**语言和日期格式设置。

如果您运行美国英语的原始代码 - 它会正常工作：

```
SET LANGUAGE English

DECLARE @a datetime
SET @a= CONVERT(datetime, '2012-12-28 14:04:43') 
print @a

Dec 28 2012  2:04PM 
```

但是如果您使用意大利语（或德语、英国或法语）作为您的语言，它将失败**，因为**日期/时间字符串中间**没有**的格式**不是**语言独立的，也不“安全”：`T`

 **```
SET LANGUAGE Italian

DECLARE @a datetime
SET @a= CONVERT(datetime, '2012-12-28 14:04:43') 
print @a 
```

> *消息 242，第 16 级，状态 3，第 4 行
> La converte di un tipo di dati varchar in datetime ha Generato un valore non compreso nell'intervallo dei valori consentiment。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T17:06:43.463

您正在尝试将字符串转换为日期时间。问题在于日期部分。最好的方法是将日期字符串输入`ISO format (yyyymmdd)`然后转换。试试这个;

```
DECLARE @a datetime
SET @a= CONVERT(datetime,replace('2012-12-28 14:04:43', '-','')) 
print @a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:07:28.660

我的猜测是您计算机上的默认日期时间格式已更改。将转换规范添加回：

```
SET @a= CONVERT(datetime,'2012-12-28 14:04:43', 121) 
```****

# c# - 通过 LuaInterface 从 C# 访问 Lua 函数

> ID：14073028
> 
> 赞同：2
> 
> 时间：2012-12-28T17:04:04.050
> 
> 标签：c#, lua, luainterface

LuaInterface 从 C# 访问 Lua 函数时遇到问题。

如果我有这样定义的 LuaFunction

```
function object:OnEvent()
  -- Do something
end 
```

这可以通过正常调用从 C# 访问，例如

```
(object["OnEvent"] as LuaFunction).Call(); 
```

没有参数。但是如果你看一下 Lua 中函数的定义，我用了一个“:”来定义函数。我可以这样重写它，这是一样的：

```
function object.OnEvent(self)
  -- Do something
end 
```

到目前为止，一切正常。但是现在，我将 OnEvent 替换为另一个函数。

```
function Replacement(self)
  -- Do something other
end

object.OnEvent = Replacement 
```

现在我遇到了一个问题。在这种情况下，我必须使用参数（对于 self）调用该函数。如果我不这样做，我会得到一个错误。

我可以通过两件事来解决这个问题：

1.  说 LuaInterface，它应该每次调用带有“：”的方法，并带有 self 的参数。
2.  我可以从 LuaInterface 中检索该函数需要多少参数。

但是，如何做这件事之一？

谢谢你。

# google-maps - 谷歌地图可拖动标记缩放以适合所有标记

> ID：14073029
> 
> 赞同：0
> 
> 时间：2012-12-28T17:04:14.857
> 
> 标签：google-maps, google-maps-api-3, zooming, fitbounds

我有一个带有可拖动标记的地图工作版本。放大以包括所有标记作品

```
bounds.extend(results[0].geometry.location);
map.fitBounds(bounds); 
```

`results[0].geometry.location`新的可拖动位置在哪里。

如果新位置正在形成更大的区域，则此方法有效。但是，当我将标记拖到离其余标记更近的位置时，我认为这不会*扩展*边界，因此不会放大。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:39:52.583

放置标记时，将标记位置添加到包含原始边界的临时 LatLngBounds 对象，并将地图边界与每个拖放的边界相匹配。

```
var mapOptions = {
  center: new google.maps.LatLng(38.68551, -96.341308),
  zoom: 8,
  mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"),
    mapOptions);

var bounds = new google.maps.LatLngBounds(),
    markers = [];

markers.push(new google.maps.Marker({position: new google.maps.LatLng(38.69, -96.14),map: map}));
markers.push(new google.maps.Marker({position: new google.maps.LatLng(38.65, -96.44),map: map}));
markers.push(new google.maps.Marker({position: new google.maps.LatLng(38.56, -96.56),map: map}));
markers.push(new google.maps.Marker({position: new google.maps.LatLng(38.42, -96.98),map: map}));
markers.push(new google.maps.Marker({position: new google.maps.LatLng(38.31, -96.45),map: map}));

for (var m in markers) {
    bounds.extend(markers[m].getPosition());
}

map.fitBounds(bounds);

var dropMarker = function(latlng) {
    var marker = new google.maps.Marker({position: latlng, map: map}),
        tempBounds = new google.maps.LatLngBounds();

     // notice we use the union method here to add the original bounds object
    tempBounds.union(bounds).extend(marker.getPosition());
    map.fitBounds(tempBounds);
}

// imitate dropping marker far away from others
setTimeout(function() {
    dropMarker(new google.maps.LatLng(31, -96));
}, 2000);

// imitate dropping marker close to others
setTimeout(function() {
    dropMarker(new google.maps.LatLng(38.5, -96.5));
}, 5000); 
```

您可以尝试使用 map panToBounds 方法来获得良好的平滑过渡，而不仅仅是拟合临时边界。

# python - 使基于 SQL 的活动提要更快的好方法

> ID：14073030
> 
> 赞同：4
> 
> 时间：2012-12-28T17:04:19.840
> 
> 标签：python, sql, django, redis, feed

需要一种方法来提高我网站的基于 SQL 的 Activity Feed 的性能。我们在 Heroku 上使用 Django。

现在我们正在使用 actstream，它是一个 Django 应用程序，它使用 Django ORM 中的通用外键实现活动提要。基本上，每个动作对于它的actor和它可能作用的任何对象都有通用的外键，像这样：

动作：（**粘土**-*演员*）在（**安德鲁对星巴克的评论**-*目标*）上写了一个（**评论**-*动作对象*）

 ***随着我们的扩展，它变得太慢了，这是可以理解的，因为它依赖于大而昂贵的 SQL 连接。

我看到至少两个选项：

1.  在 SQL 数据库之上放置一个 Redis 层并从那里获取活动源。
2.  尝试绕过 Django ORM 并在原始 SQL 中执行所有查询，我知道这可以提高性能。

任何人对这两个或其他想法有任何想法，我很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:19:23.823

您可能想查看物化视图。由于您在 Heroku 上，并且通常使用 PostgreSQL，因此您可以查看[Materialized View Support for PostgreSQL](https://stackoverflow.com/questions/14073030/good-way-to-make-a-sql-based-activity-feed-faster)。它不像其他数据库服务器那样成熟，但据我了解，它可以工作。要使用 Django ORM，您可能必须为提要创建一个新的“实体”（此处不熟悉 Django，因此请根据需要进行修改），然后对它进行查询，就好像它是一个表一样。视图的手动管理是一个考虑因素，因此在您提交之前仔细研究它。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:40:32.543

你说redis？使用 redis 一切都会变得更好。

缓存是软件开发中最好的想法之一，如果您使用物化视图，您也应该考虑尝试缓存它们，相信我您的用户会注意到其中的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T18:16:22.960

采用一种结合了这两个建议的方法。

我们为数据库中的每个操作创建了一个主列表，其中包括我们需要的有关操作的所有信息，并将其保存在 Redis 中。给定一个动作 ID，我们现在可以对它进行 Redis 查找并获取一个准备好返回到前端的字典对象。

我们还创建了对应于用户可用的所有不同类型的活动流的操作 ID 列表。所以给定一个用户 id，我们有他朋友的活动，他自己的活动，最喜欢的地方活动等，可供查找。（我猜这些在某种程度上对应于物化视图，尽管它们在 Redis 中，而不是在 PSQL 中。）

因此，我们将用户的提要作为操作 ID 列表。然后我们通过查找主操作列表中的 id 来获取这些操作的详细信息。然后我们将提要返回到前端。

谢谢你们的建议，伙计们。***

# c - 设计一个像 C 一样的编译器

> ID：14073031
> 
> 赞同：0
> 
> 时间：2012-12-28T17:04:24.630
> 
> 标签：c, compiler-construction, syntax, abstract-syntax-tree

我正在开发一个类似 C 的编译器，我想知道编译器如何与系统包含一起工作。

编译器读取整个代码，并将找到的所有包含存储在一个列表中并解析包含，在完成读取当前代码之后？

```
// file main.c
#include <stdio.h> // store in one list

// continue the parse ...
int main()
{
    return 0;
}
// now, read the includes
// after finish the includes parse, gen code of sources

// just a sample
// file stdio.h
#include <types.h> // store in list
#include <bios.h>  // store in list

void printf(...)
{
}

void scanf(...)
{
} 
```

顺便说一句，我开发了一个系统（仅测试）来读取包含并停止解析，读取包含......（这是一个令人作呕的代码，但是，工作......）（示例链接）-> [https： //gist.github.com/4399601](https://gist.github.com/4399601)

顺便说一句，阅读包含...并使用包含文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T17:11:13.480

`#include`,`#define`等由称为[预处理器](http://en.wikipedia.org/wiki/C_preprocessor)`#ifdef`的单独通道处理。它用包含的文件替换行。然后将生成的临时源文本馈送到后面的通道，如分[词](http://en.wikipedia.org/wiki/Lexical_analysis)器和[解析器](http://en.wikipedia.org/wiki/Parsing)。`#include`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:09:06.603

C 中以 # 开头的任何行都由预处理器处理，而不是编译器。预处理器生成一个文件，然后编译器编译该文件。该文件的内容取决于开发人员和 SDK 定义的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:32:50.603

如果我从头开始编写编译器，我首先会考虑处理包含是否是该语言的必要部分 - 如果是，您是否必须编写它，或者您是否可以使用已经存在的编译器（例如 cpp gcc 的一部分）。毕竟，编译器的“有趣”部分是代码的真正编译，而不是读取文件并通过宏扩展将字符串替换为其他字符串 [虽然这当然也很有趣 - 但你可以编写一次你有一个可以工作的编译器！]。

包含文件的棘手部分不是包含本身（相当简单、递归、函数），而是#define/#ifdef/#if/#undef 的解析，更重要的是，用它替换东西。

玩得开心！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T17:17:45.840

任何以**#**开头的都是预处理器指令。在编译时会替换相应的代码。编译的第一阶段是预处理器编译。

然后稍后将预处理器（.i 文件）的输出提供给编译的后期阶段。

编译的后期阶段包括 LEXICAL ANALYZER、PARSER、OPTIMIZER 和 CODE GENERATOR..

# java - Java - 实例化

> ID：14073034
> 
> 赞同：0
> 
> 时间：2012-12-28T17:04:36.953
> 
> 标签：java, instantiation, instantiationexception

我正在尝试创建一个我不完全确定类类型的新类。这可以用我的代码更好地解释：

```
private static Class[] Packets = new Class[]
            {
                KeepAlivePacket.class, // 0x00
                LoginRequestPacket.class, // 0x01
                HandshakePacket.class, // 0x02
                    }
.......

class HandshakePacket extends TCPPacket
{
    public HandshakePacket()
    {

    }
    byte protocolVersion;
    String username;
    String host;
    int port;
    @Override
    public void writePacketData(DataOutputStream os) throws IOException {
        os.write(id);
        os.writeByte(protocolVersion);
        writeString(os, username);
        writeString(os, host);
        os.writeInt(port);
    }
    @Override
    public void readPacketData(DataInputStream is) throws IOException {
        protocolVersion = is.readByte();
        username = readString(is,16);
        host = readString(is,16);
        port = is.readInt();
    }
    @Override
    public void setId(byte id)
    {
        this.id = id;
    }
}

.......
    public static TCPPacket getNewPacket(int i)
    {
    try
    {
        Class var1 = (Class)Packets[i];
        return var1 == null ? null : (TCPPacket)var1.newInstance(); <-- error on this line
    }
    catch (Exception var2)
    {
        var2.printStackTrace();
        System.out.println("Skipping packet with id " + i);
        return null;
    }
} 
```

对于任何想知道 TCPPacket 是什么的人：

```
package vc.voidwhisperer.proxy.packet;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;

public class TCPPacket {
    public TCPPacket()
    {

    }
    public byte id = 0;
    public void writePacketData(DataOutputStream os) throws IOException
    {

    }
    public void readPacketData(DataInputStream is) throws IOException
    {

    }
    public void setId(byte id)
    {

    }
} 
```

正如你所看到的，我试图实例化一个我不能完全确定类类型是什么的新对象。但是，它吐出了这个异常：

```
java.lang.InstantiationException: vc.voidwhisperer.proxy.packet.Packet$HandshakePacket
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
at vc.voidwhisperer.proxy.packet.Packet.getNewPacket(Packet.java:2509)
at vc.voidwhisperer.proxy.UserConnection.run(UserConnection.java:52) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:46:11.030

您正在尝试从静态方法中实例化非静态内部类。创建一个新`HandshakePacket`对象需要一个周围的 Packet 对象作为它的父对象，而您没有提供一个。

因此，要么创建`HandshakePacket`一个*静态*内部类，要么`getNewPacket`创建一个非静态方法，或者创建一个新的 Packet 对象以用作新对象的父`HandshakePacket`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:14:40.227

对此，反思是多余的。

做就是了

```
switch (i) {
  case 0: return new KeepAlivePacket();
  case 1: return new LoginRequestPacket();
  case 2: return new HandshakePacket();
  default: throw new IllegalArgumentException();
} 
```

理想情况下`i`用枚举替换。

这将为您带来静态类型和签名检查的优势，使您的代码更易于维护，并避免所有掩盖异常的反射性胡言乱语。

# php - 如何将动态复选框值插入数据库？

> ID：14073036
> 
> 赞同：-1
> 
> 时间：2012-12-28T17:04:53.717
> 
> 标签：php, mysql

我有一个包含超过 2 个复选框的表单，这些复选框具有 DynamicValues，具体取决于以前的用户选择。

```
<?php if (isset($_POST['submit'])) { 
if(sizeof($_POST['price']) == 2){ 
mysql_query("INSERT INTO price (value1, value2)
VALUES ('???????????????????????')");
 } 
 else{ 
 echo "NOT OK";  } 
 } 
?>
<form id="send" action="send.php" method="post">
    Price 1<input name="price[]" type="checkbox" value="DynamicValue"> 
    Price 2<input name="price[]" type="checkbox" value="DynamicValue2"> 
    Price 3<input name="price[]" type="checkbox" value="DynamicValue3">
    <input name="submit" type="submit" value="Send" />
</form> 
```

VALUES 应该包含什么才能为每个选定的复选框获取正确的值。用户必须能够从列表中的任何位置选中 2 个复选框？

复选框可能恰好超过 3 个，复选框的数量也取决于之前的用户选择。

复选框值将是数值。

希望我的问题足够清楚，可以得到回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:27:26.533

使用`foreach`循环设置值，[转义以防止 SQL 注入](http://php.net/manual/en/function.mysql-real-escape-string.php)-

```
if(sizeof($_POST['price']) == 2){ 
$i=0;
foreach($_POST['price'] as $prices){
   $price[$i] = mysql_real_escape_string($prices);
   $i++;
}
mysql_query("INSERT INTO price (value1, value2) VALUES ({$price[0]},{$price[1]})"); 
```

该`mysql_*`扩展自 PHP 5.5.0 起已弃用，将来将被删除。相反，应该使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API](http://php.net/manual/en/mysqlinfo.api.choosing.php)指南和[相关的常见问题解答](http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:26:25.033

你可以这样插入它们

```
$price = $_POST['price'] ;

    mysql_query("INSERT INTO price (value1, value2,value3)
     VALUES ('".$price[0]."' ,'".$price[1]."' ,'".$price[2]."'  )") ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:29:53.803

我不知道您是否对代码或算法有问题，但如果是代码并且您是 php 的初学者，可以帮助您：

```
<?php
    if (isset($_POST['submit'])) {

        if(!isset($_POST['price']))
            echo "No prices selected!";

        elseif(count($_POST['price'])==2) { //exactely 2 prices selected

            $product = $_POST['product'];
            foreach ($_POST['price'] as $value) {
                $sql =  "INSERT INTO price (product, value) VALUES (\"{$product}\", \"{$value}\")";
                mysql_query($sql);
            }

         } else
             echo "You need select 2 prices!";
     }
    ?>
    <form id="send" method="post">
        <input name="product" type="hidden" value="ID3">
        Price 1<input name="price[]" type="checkbox" value="DynamicValue"<?php if (isset($_POST['price']) && in_array('DynamicValue', $_POST['price'])) echo ' checked'; ?>>
        Price 2<input name="price[]" type="checkbox" value="DynamicValue2"<?php if (isset($_POST['price']) && in_array('DynamicValue2', $_POST['price'])) echo ' checked'; ?>>
        Price 3<input name="price[]" type="checkbox" value="DynamicValue3"<?php if (isset($_POST['price']) && in_array('DynamicValue3', $_POST['price'])) echo ' checked'; ?>>
        <input name="submit" type="submit" value="Send" />
    </form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T17:24:28.517

这是基本的 PHP 数组访问：

```
$query = "INSERT INTO price (value1, value2) VALUES (". $_POST['price'][0]) .", " . $_POST['price'][0]) . ")";
mysql_query($query); 
```

请注意一些事情。您目前没有采取任何措施来保护您的数据库免受 MySQL 注入。攻击者可以非常简单地执行诸如删除整个表或完全删除数据库之类的操作。

您也不应该使用这些`mysql_*`功能。这些已弃用，不应使用。使用`mysqli_*`功能、PDO 或其他更当前和更安全的东西。

# android - 移动应用中的用户身份验证

> ID：14073037
> 
> 赞同：2
> 
> 时间：2012-12-28T17:04:54.747
> 
> 标签：android, ios, api, rest, appcelerator

所有这些移动应用程序如何登录用户？我做了很多研究并阅读了教程，但我找不到明确的答案......

[我使用 Phil Sturgeon 的REST 服务器](https://github.com/philsturgeon/codeigniter-restserver)为我的 Codeigniter Web 应用程序创建了一个 API 。现在我需要创建一个移动应用程序（适用于 Android 和 ios），它可以处理来自我的 Web 服务器的远程数据。（我决定使用[Appcelerator](http://www.appcelerator.com/)构建我的应用程序。）

我的目标是允许用户从我的移动应用程序登录并通过 REST 服务器 API 进行 CRUD 操作。API 使用[HTTP 摘要访问身份验证](https://github.com/philsturgeon/codeigniter-restserver#authentication)，但我担心安全性，因为它通过 HTTP 发送用户名和密码。是否有更安全的方式来验证用户？

用户登录后如何在不重新登录的情况下执行 CRUD 操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:39:43.023

安全是一个权衡问题。你需要回答几个问题。

1.  为了保护内容，我可以让用户承受多大的痛苦？
2.  受保护内容的价值如何？
3.  违反安全的后果是什么？

除非您存储银行信息、机密/个人信息，或者内容可以不可撤销地更改/删除，否则带有摘要身份验证的 HTTPS 就可以了。

注意：摘要不传输密码。

# javascript - 在 Jquery 中使用图像不起作用 - 转义引号

> ID：14073038
> 
> 赞同：-1
> 
> 时间：2012-12-28T17:04:58.997
> 
> 标签：javascript, jquery, wordpress

你好，我是 jquery 的新手。

我在 wordpress 中有一个投票系统

这是一段代码

工作正常

```
$.post('<?php echo admin_url('admin-ajax.php'); ?>', data,
    function(response){
        if(response!="-1") {
            el.html("VOTED").unbind("click");
            if(response=="null") {
                alert("A vote has already been registered to this IP address.");
            } else {
                $("#votecounter").html(response);
                alert("Thanks for your vote.");
            } 
```

在使用文本时

```
el.html("VOTED") 
```

但是当我使用它时，我正在使用它它不起作用

```
el.html("<img width="584" height="455" src="/wp-content/uploads/2012/12/Hydrangeas.jpg" class="attachment-large wp-post-image" alt="Hydrangeas">") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:06:03.320

你需要逃避你的报价。Stack Overflow 上的语法高亮显示甚至显示帖子的格式不正确。

例子：

```
el.html("<img width=\"584\" height=\"455\" src=\"/wp-content/uploads/2012/12/Hydrangeas.jpg\" class=\"attachment-large wp-post-image\" alt=\"Hydrangeas\">") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:07:12.630

尝试 ：

```
el.html('<img width="584" height="455" src="/wp-content/uploads/2012/12/Hydrangeas.jpg" class="attachment-large wp-post-image" alt="Hydrangeas">') 
```

# neo4j - 从 neo4j 获取 Traverser 的多种方式

> ID：14073042
> 
> 赞同：1
> 
> 时间：2012-12-28T17:05:06.190
> 
> 标签：neo4j

有没有区别

**方法一：**

```
 TraversalDescription one = new TraversalDescriptionImpl();
        one = one.breadthFirst()
             .relationships(RelType.KNOWS, Direction.OUTGOING)
             .evaluator(Evaluators.excludeStartPosition());
    Traverser t1 = one.traverse(node); 
```

**方法二：**

```
 TraversalDescription two = Traversal.description()
            .breadthFirst()
            .relationships(RelType.KNOWS, Direction.OUTGOING)
            .evaluator(Evaluators.excludeStartPosition());

    Traverser t2 = one.traverse(node); 
```

两个遍历器似乎都提供了相同的结果。是否有一种方法优于另一种方法？什么时候，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T18:19:45.150

类的对象`TraversalDescriptionImpl`是工厂类`Traversal`调用时返回的对象`Traversal.description()`。从`Traversal`类源中截取：

```
public static TraversalDescription description() {
    return new TraversalDescriptionImpl();
} 
```

因此，

```
TraversalDescription one = new TraversalDescriptionImpl(); 
```

是相同的

```
TraversalDescription two = Traversal.description() 
```

# php - 速记 IF 不起作用。为什么？

> ID：14073048
> 
> 赞同：0
> 
> 时间：2012-12-28T17:05:34.233
> 
> 标签：php

我想缩短以下 if 语句：

```
 function is_string_length_correct( $string, $min, $max = 0 ) {
    if (is_string($string)) {
        $l = mb_strlen($string);
        if ($max != 0) {
            return ($l >= $min && $l <= $max);
        } else {
            return ($l >= $min);
        }
    }
  } 
```

有人可以解释一下为什么如果以下速记不起作用吗？

```
function is_string_length_correct( $string, $min, $max = 0 ) {
    if (is_string($string)) {
        $l = mb_strlen($string);
        return ($max != 0) ? ($l >= $min && $l <= $max) : ($l >= $min);
    }
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:07:40.633

语法很好。问题可能在于`$max`运行时的值。`0`是假的，所以你将它与整数零进行比较，它应该是`($max !== 0)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:13:12.240

您也可以仅使用布尔运算符编写它：

```
return $l >= $min && ($l <= $max || $max == 0); 
```

# php - XAMPP 发送邮件无法正常工作

> ID：14073051
> 
> 赞同：0
> 
> 时间：2012-12-28T17:05:40.777
> 
> 标签：php, xampp, sendmail.exe

我正在尝试将我的 sendmail 配置为通过 XAMPP 发送电子邮件。我的本地服务器位于 Windows 7 中，并且我使用的是最新更新的 sendmail。

我正在使用我的 gmail 帐户进行配置

这是我的**php.ini 邮件功能**。我的 XAMPP 位于**E:**目录中：

```
[mail function]
; For Win32 only.
; http://php.net/smtp
;SMTP = localhost
; http://php.net/smtp-port
;smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
;sendmail_from = postmaster@localhost

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; http://php.net/sendmail-path
;sendmail_path = "\"E:\xampp\sendmail\sendmail.exe\" -t"
sendmail_path = "E:\xampp\sendmail\sendmail.exe\ -t -i"

; Force the addition of the specified parameters to be passed as extra parameters
; to the sendmail binary. These parameters will always replace the value of
; the 5th parameter to mail(), even in safe mode.
;mail.force_extra_parameters =

; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
mail.add_x_header = Off

; Log all mail() calls including the full path of the script, line #, to address and headers
;mail.log = "E:\xampp\php\logs\php_mail.log" 
```

相反，这是我的整个**sendmail.ini**：

```
; configuration for fake sendmail

; if this file doesn't exist, sendmail.exe will look for the settings in
; the registry, under HKLM\Software\Sendmail

[sendmail]

; you must change mail.mydomain.com to your smtp server,
; or to IIS's "pickup" directory.  (generally C:\Inetpub\mailroot\Pickup)
; emails delivered via IIS's pickup directory cause sendmail to
; run quicker, but you won't get error messages back to the calling
; application.

smtp_server=smtp.gmail.com

; smtp port (normally 25)

smtp_port=25

; SMTPS (SSL) support
;   auto = use SSL for port 465, otherwise try to use TLS
;   ssl  = alway use SSL
;   tls  = always use TLS
;   none = never try to use SSL

smtp_ssl=auto

; the default domain for this server will be read from the registry
; this will be appended to email addresses when one isn't provided
; if you want to override the value in the registry, uncomment and modify

;default_domain=mydomain.com

; log smtp errors to error.log (defaults to same directory as sendmail.exe)
; uncomment to enable logging

error_logfile=error.log

; create debug log as debug.log (defaults to same directory as sendmail.exe)
; uncomment to enable debugging

;debug_logfile=debug.log

; if your smtp server requires authentication, modify the following two lines

auth_username=MYGMAILEMAIL
auth_password=MYPASSWORD

; if your smtp server uses pop3 before smtp authentication, modify the 
; following three lines.  do not enable unless it is required.

;pop3_server=
;pop3_username=
;pop3_password=

; force the sender to always be the following email address
; this will only affect the "MAIL FROM" command, it won't modify 
; the "From: " header of the message content

force_sender=MYGMAILEMAIL

; force the sender to always be the following email address
; this will only affect the "RCTP TO" command, it won't modify 
; the "To: " header of the message content

;force_recipient=

; sendmail will use your hostname and your default_domain in the ehlo/helo
; smtp greeting.  you can manually set the ehlo/helo name if required

hostname=smtp.gmail.com 
```

这是我试图执行以发送电子邮件的 php 代码。但什么也没发生：

```
<?php mail("myemail","Works!!","Mail sent from XAMPP"); ?> 
```

有人能给我一些帮助吗？提前致谢，节日快乐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:18:40.693

发送邮件时，邮件必须包含 From 标头。这可以使用 additional_headers 参数设置，或者可以在 php.ini 中设置默认值。

不这样做将导致类似于警告的错误消息：mail(): "sendmail_from" not set in php.ini or custom "From:" header missing。From 标头还设置了 Windows 下的 Return-Path。

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

# git - 在 shell 上找到 git hooks 目录的路径

> ID：14073053
> 
> 赞同：17
> 
> 时间：2012-12-28T17:05:52.663
> 
> 标签：git

如何找到`.git/hooks`当前 Git 存储库目录的完整路径？

* * *

我看到以下问题：

## 深入目录结构

我可能在 git 存储库目录结构的任何深处，例如

```
/home/user/project/.git/hooks 
```

我在文件夹中

```
/home/user/project/foo/bar/baz/ 
```

## 子模块

较新的 git 版本将子模块元数据放在主存储库中，而不是放在`.git/`主存储库中，并且`.git`只是一个文件，例如

```
$ cat /home/user/project/vendor/foo/.git
gitdir: ../../.git/modules/vendor/foo 
```

所以在这种情况下，钩子目录在

```
/home/user/project/.git/modules/vendor/foo/hooks 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-28T17:39:01.323

您可以使用`git rev-parse --git-dir`获取用于当前目录的存储库的路径。这将处理 gitlinks（使用文件代替`.git`目录）以及使用`$GIT_DIR`环境变量。hooks 目录将始终在其中，因此您可以使用：

```
`git rev-parse --git-dir`/hooks 
```

获取 hooks 目录的路径。

这记录在[git rev-parse 联机帮助页中](http://www.kernel.org/pub/software/scm/git/docs/git-rev-parse.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-05-18T07:37:28.737

从 git 2.9（2016 年 6 月）开始，您将需要查看新配置`core.hooksPath`以真正确定 hooks 文件夹。

`git rev-parse --git-dir`/hooks 已经不够用了。

请参阅[Ævar Arnfjörð Bjarmason ( ) 的](https://github.com/avar)[提交 867ad08](https://github.com/git/git/commit/867ad08a2610526edb5723804723d371136fc643)、[提交 de0824e](https://github.com/git/git/commit/de0824ed8fa3319cfdc0c79c06c06d7c72c6adc6)、[提交 bf7d977](https://github.com/git/git/commit/bf7d977f8c9a01b4decab2ecbd1ba02203e5a8bc)、[提交 49fa52f](https://github.com/git/git/commit/49fa52fd003ece5ea997607167bc5aaec3ff61af)（2016 年 5 月 4 日[）](https://github.com/avar)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 6675f50](https://github.com/git/git/commit/6675f501f6b987dbdb0dbeb1d2efeb5a27fc41a7))^(中，2016 年 5 月 17 日）)[`avar`](https://github.com/avar)
^([`gitster`](https://github.com/gitster))

因此，请确保检查是否`git config core.hooksPath`已定义，因为它将覆盖默认的钩子文件夹位置。

该[`git config`文档](https://github.com/git/git/blob/867ad08a2610526edb5723804723d371136fc643/Documentation/config.txt)现在包括：

```
core.hooksPath 
```

> 默认情况下，Git 会在 ' `$GIT_DIR/hooks`' 目录中寻找你的钩子。
> 将此设置为不同的路径，例如“ `/etc/git/hooks`”，Git 将尝试在该目录中查找您的钩子，例如“ `/etc/git/hooks/pre-receive`”而不是“ `$GIT_DIR/hooks/pre-receive`”。
> 
> **路径可以是绝对的或相对的。相对路径被视为相对于运行挂钩的目录**。

* * *

Git 2.10（2016 年第三季度）使用该新`core.hooksPath`设置。

因此，要获得**有效** `hooks`路径，您需要运行：

```
git rev-parse --git-path hooks 
```

从`git rev-parse` [手册页](https://git-scm.com/docs/git-rev-parse#git-rev-parse---git-pathltpathgt)：

```
--git-path <path>
    Resolve "$GIT_DIR/<path>" and takes other path relocation variables such
    as $GIT_OBJECT_DIRECTORY, $GIT_INDEX_FILE... into account. For example,
    if $GIT_OBJECT_DIRECTORY is set to /foo/bar then "git rev-parse
    --git-path objects/abc" returns /foo/bar/abc. 
```

请参阅[Johannes Schindelin (](https://github.com/dscho) [)的](https://github.com/dscho)[提交 9445b49](https://github.com/git/git/commit/9445b4921e3e996b2d38d58c594f95d63a72dcea)（2016 年 8 月 16 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([d05d0e9 提交中](https://github.com/git/git/commit/d05d0e99665ecb67c3e8b9b3be40b12e9052a8b8))^(，2016 年 8 月 19 日）)[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-28T17:40:18.653

除此之外，`--git-dir`您还可以使用以下内容来查找 git 存储库的根目录，因为这更通用，我只是在此处添加以完成：

```
echo $(git rev-parse --show-toplevel) 
```

然后附加`/.git/hooks`到它？不过，我还没有尝试过使用子模块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-28T08:22:09.707

如果您在项目目录中，您可以通过键入终端来了解当前的钩子路径

```
git config core.hooksPath 
```

如果该值为空，那么您可以设置 .githooks 文件夹的路径，您可以通过键入此命令来执行此操作

```
git config core.hooksPath .githooks/ 
```

您现在会发现 hooks 路径已更改，您可以再次通过第一个命令进行确认。

# objective-c - 关闭“使用自动布局”会导致应用程序仅在纵向模式下运行

> ID：14073057
> 
> 赞同：1
> 
> 时间：2012-12-28T17:06:27.747
> 
> 标签：objective-c, ios, ipad, xib, autolayout

我希望我的应用与 iOS 5 兼容，因此我不得不在 XIB 文件中禁用“使用自动布局”。整个应用程序旨在以横向模式运行。在禁用自动布局后启动应用程序（无论是在 iOS 5 还是 iOS 6 中），应用程序始终以纵向模式启动并且拒绝旋转到横向。

在 Info.plist 中，`Supported Interface Orientations (iPad)`仅设置为横向。我究竟做错了什么？这仅在禁用自动布局后发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:09:27.527

通过使用 Ismael 的答案，我能够解决 iOS 6 中的问题。

```
- (NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskLandscape;

} 
```

我可以使用下面的代码在 iOS 5 中修复它。

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {

    return UIInterfaceOrientationIsLandscape(toInterfaceOrientation);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:08:45.493

将此添加到您的控制器：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
} 
```

编辑：如果你不想支持肖像，你应该`NO`返回`shouldAutorotate`

# asp.net - ASP.NET PDF 查看器

> ID：14073060
> 
> 赞同：3
> 
> 时间：2012-12-28T17:06:42.270
> 
> 标签：asp.net, pdf, pdf-viewer

我正在寻找一个 ASP.NET 控件来在浏览器中加载 PDF。它应该允许控制向用户显示的页面数，并且它应该能够做一些书签的事情，比如当用户点击一个按钮时，我可以获取查看器的页码并保存它，然后下次重新加载该页码中的 PDF。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-27T09:52:13.303

作为 IFRAME 的替代品，使用 PDFJS 库 ( [https://mozilla.github.io/pdf.js/](https://mozilla.github.io/pdf.js/) )

它允许您仅使用 Javascript/HTML5 Canvas 显示 PDF 文档。

HTML5 Canvas 浏览器兼容性：[http ://caniuse.com/#feat=canvas](http://caniuse.com/#feat=canvas)

**显示特定页面的示例 - 未测试**

```
// pdf document file
var pdfDocument = 'yourfile.pdf';
// page Number you want to display
var pageNo = 1;
// name of the HTML5 Canvas
var canvasName = 'pdfCanvas';

PDFJS.getDocument( pdfDocument ).then(function (pdf) {
    pdf.getPage( pageNo ).then(function (page) {
        var scale = 1.5;
        var viewport = page.getViewport(scale);

        var canvas = document.getElementById(canvasName);
        var context = canvas.getContext('2d');
        canvas.height = viewport.height;
        canvas.width = viewport.width;

        var renderContext = {
            canvasContext: context,
            viewport: viewport
        };

        page.render(renderContext).promise.then(function () {
            // do something when rendering is completed
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T17:53:30.017

您可以使用 iframe 在浏览器中查看您的 pdf，如下所示

```
<iframe src="mypdf.pdf"></iframe> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-22T14:02:02.333

您可以尝试使用 ASP.NET 中的“对象”标签嵌入 PDF 文件。

这是一个小例子：

```
//Markup
<asp:LinkButton ID="view" runat="server" Text="Click me!" onClick="ViewPDF"></asp:LinkButton>
<asp:Literal ID="embedPdf" runat="server"/>

//C#
private void ViewPDF(object sender, EventArgs e)
{
   string embed = "<object data=\"{0}\" type=\"application/pdf\" width=\"1200px\" height=\"1000px\"></object>";
   embedPdf.Text = string.Format(embed, ResolveUrl("/your/pdf/file/path.pdf"));
} 
```

单击 ASP-LinkBut​​ton 后，应出现 PDF 阅读器。

# php - if else 语句出错

> ID：14073066
> 
> 赞同：0
> 
> 时间：2012-12-28T17:07:12.967
> 
> 标签：php, if-statement

我收到以下错误 -

> 解析错误：语法错误，意外 $end。

这让我发疯！我想做的就是：

如果数据库中有指向其网站的 URL，请超链接其名称。

如果不只是呼应他们的名字。简单的东西，我错过了什么？

```
 <?php 
  if ($row_clientsP['website']){ 
  ?>
  <a href="<? echo $row_clientsP['website']; ?>"><h2><? echo   $row_clientsP['customerName']; ?></h2></a>
  <? 
  } 
  else
  { 
  ?>
  <h2><? echo $row_clientsP['customerName']; 
  }
  ?></h2> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:09:37.323

如果您没有启用[短标签`<?`](http://php.net/manual/en/language.basic-syntax.phptags.php)，这些行将导致该错误 -

```
<? 
} 
```

和

```
<h2><? 
```

最好使用`<?php`标签，因为大多数 php 安装默认关闭短标签。

另见 - [http://php.net/manual/en/ini.core.php#ini.short-open-tag](http://php.net/manual/en/ini.core.php#ini.short-open-tag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:10:02.433

您可能有一个未关闭的`{`.

`<?`正如**Mark Ba​​ker**所指出的，这可能来自代码中的其他地方或使用短标签。您可以检查*php.ini*中的值 (short_open_tag)[http://www.php.net/manual/en/ini.core.php#ini.short-open-tag] 。但作为一项规则，[我不鼓励他们](http://jason.pureconcepts.net/2012/08/better-php-developer/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:20:03.730

几乎可以肯定，短开放标签是个问题。它们在我的服务器上“开启”，并且脚本可以正确解析。这也可以正确解析并使用完整的 php 标签。

```
<?php // RAY_temp_smitty.php
error_reporting(E_ALL);

if ($row_clientsP['website']){
?>
<a href="<?php echo $row_clientsP['website']; ?>"><h2><?php echo   $row_clientsP['customerName']; ?></h2></a>
<?php
}
else
{
?>
<h2><?php echo $row_clientsP['customerName'];
}
?></h2> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T17:29:01.413

尝试使用（完整的 php 标签）

```
 <?php 
  if ($row_clientsP['website']){ 
  ?>
  <a href="<?php echo $row_clientsP['website']; ?>"><h2><?php echo   $row_clientsP['customerName']; ?></h2></a>
  <?php 
  } 
  else
  { 
  ?>
  <h2><?php echo $row_clientsP['customerName']; 
  }
  ?></h2> 
```

# debugging - Xcode卡在“附加到 " 仅当在方案中选择了调试器时

> ID：14073067
> 
> 赞同：0
> 
> 时间：2012-12-28T17:07:13.557
> 
> 标签：debugging, versioning, simulator, ipa, archiving

总体目标：构建一个用于测试飞行的 ipa

问题：当我去存档和构建 ipa 时，xcode 挂在它说“存档”的部分，我去尝试在模拟器上运行，你瞧，它也不会在那里工作。所以我遵循了一些故障排除步骤，现在它将在模拟器中运行，但前提是调试器设置为“无”。是什么原因造成的，我该如何解决？

注意：最初一切正常，直到我尝试将版本从 1.0 更改为 1.1 或 1.2。尝试回溯无济于事。

我试过了：

*   重启模拟器
*   重置模拟器内容和设置
*   重新启动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:20:33.757

得到什么有效，如果我关闭我的网络连接，它将建立和运行没有问题。一定是把钥匙链绑起来了。

# python - 在没有pygame的PYTHON中同时播放两个声音

> ID：14073072
> 
> 赞同：4
> 
> 时间：2012-12-28T17:07:35.767
> 
> 标签：python, embedded, audio

我正在做一个带有嵌入式计算机模块 EXM32 Starter Kit 的项目，我想用 8 个音符模拟一架钢琴。操作系统是 linux，我正在用 Python 编程。我的问题是 Python 的版本是 2.4，没有“pygame”库来同时播放两种声音。现在我在 python "os.system('aplay ./Do.wav')" 中使用从 linux 控制台播放声音。

简化的问题是：我可以使用另一个库来做同样的事情：

```
 snd1 =  pygame.mixer.Sound('./Do.wav')
    snd2 =  pygame.mixer.Sound('./Re.wav')

    snd1.play()
    snd2.play() 
```

同时播放“Do”和“Re”？我可以使用“auidoop”和“wave”库。

我尝试使用线程，但问题是程序等到控制台命令完成。我可以使用的另一个库？或与'wave'或'audioop'有关的方法？（我相信这最后一个库仅用于操纵的声音文件）完整的代码是：

```
import termios, sys, os, time
TERMIOS = termios
#I wrote this method to simulate keyevent. I haven't got better libraries to do this
def getkey():
    fd = sys.stdin.fileno()
    old = termios.tcgetattr(fd)
    new = termios.tcgetattr(fd)
    new[3] = new[3] & ~TERMIOS.ICANON & ~TERMIOS.ECHO
    new[6][TERMIOS.VMIN] = 1
    new[6][TERMIOS.VTIME] = 0
    termios.tcsetattr(fd, TERMIOS.TCSANOW, new)
    key_pressed = None
    try:
            key_pressed = os.read(fd, 1)
    finally:
            termios.tcsetattr(fd, TERMIOS.TCSAFLUSH, old)
    return key_pressed

def keyspress(note):

    if note == DO:
            os.system('aplay  ./notas_musicales/Do.wav')
    elif note == RE:
            os.system('aplay ./notas_musicales/Re.wav')
    elif note == MI:
            os.system('aplay ./notas_musicales/Mi.wav')
    elif note == FA:
            os.system('aplay ./notas_musicales/Fa.wav')
    elif note == SOL:
            os.system('aplay ./notas_musicales/Sol.wav')
    elif note == LA:
            os.system('aplay ./notas_musicales/La.wav')
    elif note == SI:
            os.system('aplay ./notas_musicales/Si.wav')

DO = 'a'
RE = 's'
MI = 'd'
FA = 'f'
SOL = 'g'
LA = 'h'
SI = 'j'
key_pressed = ""
i = 1

#in each iteration the program enter into the other 'if' to doesn't interrupt
#the last sound.
while(key_pressed != 'n'):
    key_pressed = getkey()
    if i == 1:
        keyspress(key_pressed)
        i = 0
    elif i == 0:
        keyspress(key_pressed)
        i = 1
    print ord(key_pressed) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:26:13.320

您的基本问题是您想生成一个进程而*不是*等待它的返回值。你不能这样做`os.system()`（你可以只产生几十个线程）。

您可以使用从 2.4 开始附带的[子流程模块来执行此操作。](http://docs.python.org/2/library/subprocess.html)有关示例，请参见[此处。](https://stackoverflow.com/questions/3516007/run-process-and-dont-wait)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T17:30:46.217

由于默认 python 实现中的全局解释器锁（“GIL”），一次只能运行一个线程。所以在这种情况下，这对你没有多大帮助。

此外，`os.system`等待命令完成，并生成一个额外的 shell 来运行命令。您应该使用[`suprocess.Popen`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)它，它会在启动程序后立即返回，默认情况下不会生成额外的 shell。下面的代码应该尽可能让两个玩家一起开始：

```
import subprocess

do = subprocess.Popen(['aplay', './notas_musicales/Do.wav'])
re = subprocess.Popen(['aplay', './notas_musicales/Re.wav']) 
```

# javascript - 取消 ajax() 成功

> ID：14073077
> 
> 赞同：2
> 
> 时间：2012-12-28T17:07:48.083
> 
> 标签：javascript, jquery, ajax

我正在使用动态分页。

在开始另一个之前，我需要`success`在 jQuery 中取消该事件。`ajax`

我设置了一个等于 的变量`$.ajax()`，在这样做之前，我`abort`无论如何都会调用。

问题是它`success`仍然会着火。

Ajax的答案[：如何防止jQuery在执行xmlHttpRequest.abort()后调用成功事件；](https://stackoverflow.com/questions/2357147/ajax-how-to-prevent-jquery-from-calling-the-success-event-after-executing-xmlht)是错误的，或者至少它对我不起作用，因为如果我`abort`在什么都没有发生后立即开火`ajax`。

如果另一个变量即将开始，我只想不触发`success`变量。`ajax`

**代码片段：**

```
if(updatePageAJAX){
    updatePageAJAX.abort();
}

updatePageAJAX = $.ajax({
}); 
```

如果您愿意，我可以提供更多详细信息，但`updatePageAJAX`可以。我不能告诉你是否`abort`有效。我在里面放了一个`alert`看`if`它是否着火；确实如此。

如果我`abort`在设置后立即放置`updatePageAJAX = $.ajax`，则不会发生任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:36:11.610

您是否尝试过将您的 xhr 对象保存在一个变量中，以便您可以检查成功回调是否是正确的 xhr 对象？例如：

```
$(function() {
    var xhr = null;

    $('.link').click(function() {
        var page = $(this).text();
        if(xhr != null) {
            xhr.abort();
        }
        xhr = $.ajax({
            type: 'GET',
            url: 'index.php',
            data: 'js=true&page=' + page,
            success: function(data, responseCode, jqxhr) {
                if(xhr == jqxhr) {
                    $('#page').text(data);
                    xhr = null;
                }
            }
        });
    });
}); 
```

这样，如果这不是正确的请求，成功回调将不会执行。

# objective-c - 如何将滚动视图添加到 ios 应用程序

> ID：14073080
> 
> 赞同：0
> 
> 时间：2012-12-28T17:08:03.283
> 
> 标签：objective-c, uiscrollview

我有一个选项卡式应用程序，我想在它上面有一个滚动视图。我在该选项卡上已经有一些文本字段和标签。问题是，键盘隐藏了一些文本字段。我将如何添加垂直滚动来防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:22:11.063

您可以在没有滚动视图的情况下完成您正在寻找的内容。

在您的文本字段的委托方法中，您可以更改 viewController 视图的框架。

就像是

```
- (void)textFieldDidBeginEditing:(UITextField *)textField;           
{
CGRect newFrame = self.view.frame;
newFrame.origin.y = - 40;  // move the view up to the point your textfield is visible
self.view.frame = newFrame;
} 
```

然后在 Set it back

```
- (void)textFieldDidEndEditing:(UITextField *)textField;  
{
 CGRect newFrame = self.view.frame;
 newFrame.origin.y = 0;
 self.view.frame = newFrame;   
} 
```

通常我用 0.33 秒的持续时间制作这个动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:16:34.213

该解决方案需要相当多的代码，但这里是您需要的一般概念：

您需要将文本字段（以及其他所有内容以保持一致性）添加到滚动视图。

您需要将滚动视图设置为仅具有垂直滚动空间，但将其设置`scrollEnabled`为 false 以便用户无法手动滚动它。

然后，您需要收听`UIKeyboardWillShowNotification`并`UIKeyboardWillHideNotification`根据需要手动向上/向下滚动。

# autohotkey - ahk 协助设置计时器

> ID：14073081
> 
> 赞同：0
> 
> 时间：2012-12-28T17:08:13.020
> 
> 标签：autohotkey

大家好，所以我在 ahk 方面有点菜鸟，我需要你的帮助才能在这个小脚本中添加延迟

```
$F3:: ; 
{
Send % step ? "{²}{y}**ADD 50 MS DELAY THERE**{s}{a}" : "{²}{s}{a}"
SetTimer, timeout, -10500, step := 1
}
return

timeout:
   step := ""
return 
```

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:13:05.797

使用[睡眠功能](http://www.autohotkey.com/docs/commands/Sleep.htm)：

```
Sleep,50 
```

# javascript - 如何将变量转换为选项？

> ID：14073084
> 
> 赞同：0
> 
> 时间：2012-12-28T17:08:33.807
> 
> 标签：javascript, jquery

> **可能重复：**
> [您将如何更改这种代码？](https://stackoverflow.com/questions/14048723/how-would-you-change-this-kind-of-code)

我如何通过 jQuery 将这些变量传递给选项，这样当用户使用插件时，他们必须从 HTML 初始化插件，如下所示：

```
 <script>
    $('.elem').pluginName({
       theme: 'blue',
       animSpeed: 200
    });
 </script> 
```

这是我的 jQuery 代码。很乱，但看看。如何将变量更改为选项？

```
$(function () {

    var theme = "sunburst";
    var btnColor = "yellow";
    var icon = "power";
    var message = "Hello World";
    var animSpeed = 300;
    var animType = 'fadeIn';
    var btnText = "Purchase";
    var btnLink = 'http://www.google.com';
    var closeStyle = "dark";

    var content =
        '<div id="mn_close" class="' + closeStyle + '"></div>' +
        '<div id="mn_border"></div>' +
        '<i class="icon-' + icon + '"></i>' +
        '<span class="mn_message">' + message + '</span>';
        //  '<a href="' + btnLink + '" class="button ' + btnColor + '">' + btnText + '</a>';

    $("#mn_close").live("click", function () {
        $('.mn_bar').animate({
            height: '0'
        }, animSpeed, function () {});
    });
    var mn_bar = $(".mn_bar");
    mn_bar.append(content);
    $(function () {
        mn_bar.addClass("animated");
        mn_bar.addClass(animType);
        mn_bar.addClass(theme)
    });
}); 
```

或者这里是jsfiddle。[http://jsfiddle.net/LwGRV/6/](http://jsfiddle.net/LwGRV/6/)

我也在尝试将代码实现到这种标准类型的 jQuery 代码中，但未能合并：

```
;(function ( $, window, document, undefined ) {
    var pluginName = "defaultPluginName",
        defaults = {
            propertyName: "value"
        };

    function Plugin( element, options ) {
        this.element = element;

        this.options = $.extend( {}, defaults, options );

        this._defaults = defaults;
        this._name = pluginName;

        this.init();
    }

    Plugin.prototype = {

        init: function() {
        },

        yourOtherFunction: function(el, options) {
            // some logic
        }
    };

    $.fn[pluginName] = function ( options ) {
        return this.each(function () {
            if (!$.data(this, "plugin_" + pluginName)) {
                $.data(this, "plugin_" + pluginName, new Plugin( this, options ));
            }
        });
    };

})( jQuery, window, document ); 
```

如果有人能对此有所了解，请提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T17:10:54.580

你应该看看这个：[http](http://api.jquery.com/jQuery.extend/) ://api.jquery.com/jQuery.extend/ 你的变量应该存储在一个对象中。

# c# - 定时器事件的委托是否作为线程安全进程调用？

> ID：14073097
> 
> 赞同：3
> 
> 时间：2012-12-28T17:09:57.493
> 
> 标签：c#, multithreading, timer, thread-safety

我有 2 个**计时器**（[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer%28v=vs.100%29.aspx)）正在运行，两个计时器 Elapsed-Events 都订阅了委托。两种方法（在订阅的委托中）都在处理相同的对象（例如列表和列表中的对象）。

**假设同时**调用了计时器 Elapsed-Events 。

代表会在不同的线程中运行吗？还是会一个接一个的叫？我应该使代码线程安全并使用锁吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:14:07.683

我假设您指的是[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer%28v=vs.110%29.aspx)而不是[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)。正如文档所说：

*基于服务器的 Timer 设计用于多线程环境中的工作线程。服务器计时器可以在线程之间移动以处理引发的 Elapsed 事件，从而在按时引发事件方面比 Windows 计时器更准确。*

没有什么可以保证两个不同的线程不会`Elapsed`为两个不同的计时器引发事件。最好让你的代码线程安全。

我正在添加一个简短的代码片段，以显示`Elapsed`可以同时调用多个回调（在这种情况下，导致死锁 -`Debug.WriteLine`永远不会调用）。

```
var _lock = new object();
GC.KeepAlive(_lock);
var timer1 = new Timer(100);
var timer2 = new Timer(200);
timer1.Elapsed += delegate
{
    lock (_lock)
        Thread.Sleep(-1);
};
timer2.Elapsed += delegate
{
    lock (_lock)
        Debug.WriteLine("Hello world.");
};
timer1.Start();
timer2.Start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:14:07.703

它们将作为工作项在 ThreadPool 中排队，因此，是的，它们存在并发执行的风险。确保不会发生这种情况的一种方法是仅安排单个计时器回调和无限循环时间[（](http://msdn.microsoft.com/en-us/library/system.threading.timeout.infinite.aspx)支持`System.Threading.Timer`这一点），并在工作完成时重新安排。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T17:16:10.070

计时器回调（您没有指定特定的类/命名空间）总是在单独的线程中调用。所以你应该让你的代码线程安全。它们是否会被“同时”调用或随后被调用取决于它们的间隔设置。
使用相同的间隔集，首先调用哪个回调几乎是不确定的。

# php - twitter api 更新状态更新，但没有来自 twitter 的响应

> ID：14073099
> 
> 赞同：0
> 
> 时间：2012-12-28T17:10:20.243
> 
> 标签：php, codeigniter, twitter

twitter API 有点问题。当我向[https://api.twitter.com/1/statuses/update.json](https://api.twitter.com/1/statuses/update.json)发送内容时，确实会发送推文（状态更新），但是，我没有收到来自推特的回复。当我向任何其他 api url 发送请求时，它们会按预期工作并返回响应。请看下面的代码...

```
function postStatus($oauthToken,$status) {

    //Create sig base string
    $tokenddata = array('oauth_token'=>$oauthToken['oauth_token'],'oauth_token_secret'=>$oauthToken['oauth_token_secret']);
    $status = rawurlencode($status);
    $baseurl = $this->baseurl . "statuses/update.json";
    $url = "{$baseurl}?status={$status}";
    $authHeader = get_auth_header($url, $this->_consumer['key'], $this->_consumer['secret'],
                            $tokenddata, 'POST', $this->_consumer['algorithm']);
    $postfields = "status={$status}";
    $response = $this->_connect($url,$authHeader,$postfields,'POST');
    return json_decode($response);
}

private function _connect($url, $auth, $postfields=null, $method='GET') {
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC ) ;
    curl_setopt($ch, CURLOPT_SSLVERSION,3);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array($auth));
    if ($method == 'POST') {
        curl_setopt($ch, CURLOPT_POST, TRUE);
        if (!empty($postfields)) {
            curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields);
        }
    }

    $curl_info = curl_getinfo($ch);
    $response = curl_exec($ch);
    curl_close($ch);
    return $response;
} 
```

正如我之前所说，我使用的其他请求是“GET”请求并使用下面的代码......

```
function getFromTwitter($url, $oauthToken, $params=null) {
    $tokenddata = array('oauth_token'=>$oauthToken['oauth_token'],'oauth_token_secret'=>$oauthToken['oauth_token_secret']);
    $baseurl = $this->baseurl . $url;
    if(!empty($params)) {
        $fullurl = $baseurl . "?" . build_http_query($params);
        $postfields = build_http_query($params);
        $authHeader = get_auth_header($fullurl, $this->_consumer['key'], $this->_consumer['secret'],
                            $tokenddata, 'GET', $this->_consumer['algorithm']);
    } else {
        $authHeader = get_auth_header($baseurl, $this->_consumer['key'], $this->_consumer['secret'],
                            $tokenddata, 'GET', $this->_consumer['algorithm']);
    }
    if(!empty($postfields)) {
        $response = $this->_connect($fullurl,$authHeader);
    } else {
        $response = $this->_connect($baseurl,$authHeader);
    }
    return json_decode($response);
} 
```

感谢所有的帮助！-SM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T15:49:04.183

自己为社交网络实现代码可能会很痛苦（在我看来）

你会更容易使用 twitter-async (https://github.com/jmathai/twitter-async)

我之前已将它作为辅助函数添加到我的 CI 中，然后按原样使用它。

它易于使用且有据可查。

# xpages - 如何在 xpages 中按其类型获取控件集合

> ID：14073100
> 
> 赞同：1
> 
> 时间：2012-12-28T17:10:22.573
> 
> 标签：xpages, xpages-ssjs, xpages-extlib

是否可以按其类型获取控件集合，例如。标签、dojo 控件喜欢编辑框、组合框等。总的来说，我想从 extlib 对话框中获取 10 个标签控件的集合。

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T02:20:50.320

XPages 是建立在 JSF 之上的，所以是的。你从封闭元素（如果你想要所有的 xp:view）开始，然后遍历子元素。类名就是你要找的。检查 OpenNTF 上的 XPages 调试工具栏项目以获取示例代码。

需要明确的是：JSF 在树中组织控件，因此您需要递归调用 getChildren() 直到没有更多的东西来获取所有控件。调试工具栏完成了所有这些，所以去获取源代码。

您正在查找的代码位于 xpDebugToolbar 脚本库中的 getComponentIds() 函数中。它最初是由 Tommy Valand 为他的 API Inspector 编写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:41:22.630

这是我的代码。

```
var myUtil = {
    myArray : new Array(),

    getComponentIDsByType : function(parentComp, parent, className) {
        /*
        parentComp: getComponent("controlId") or view for all
        parent: null or parent of parentComp
        className: class name of component
        Example of usage:
        wnUtil.getComponentIDsByType(getComponent("tableId"), null, "com.ibm.xsp.OutputLabel");
        wnUtil.getComponentIDsByType(getComponent("tableId"), null, "com.ibm.xsp.extlib.dojo.form.FilteringSelect");
        wnUtil.getComponentIDsByType(view, null, "com.ibm.xsp.extlib.dojo.form.FilteringSelect");       
        */
        var itr = parentComp.getChildren().iterator();
        while(itr.hasNext()) {
            var c:com.ibm.xsp.component.xp.XspScriptCollector = itr.next();
            if(!parent) parent = parentComp;
            var p = parentComp;
            if(p && p.getId() && !p.getId().match(/^_id/i) && !p.getId().match(/^event/i) && !p.getId().match(/^selectItem/i) && !p.getId().match(/^dateTimeHelper/i) && !p.getId().match(/^br/i)) {
                parent = parentComp;
            }
            if(c.getId() && !c.getId().match(/^_id/i) && !c.getId().match(/^event/i) && !c.getId().match(/^selectItem/i) && !c.getId().match(/^dateTimeHelper/i) && !c.getId().match(/^br/i) && !c.getId().match(/^typeAhead/i) && !c.getRendererType().equalsIgnoreCase('com.ibm.xsp.PassThroughTagRenderer')) {
                //d.replaceItemValue("control", c.getId());
                //if(parent) d.replaceItemValue("parent", parent.getId());
                //d.replaceItemValue("type", this.getType(c.getRendererType()));
                if (c.getRendererType() == className) {
                    //print (c.getId() + "<<<>>" + c.getRendererType());
                    // store component id to an array
                    this.myArray.push(c.getId());
                }           
            }
            this.getComponentIDsByType(c, parent, className);
        }
    }   
} 
```

然后你只需遍历 myUtil.myArray

# ruby-on-rails - 捆绑安装和更新找不到和安装 jQuery-rails 2.0.0

> ID：14073102
> 
> 赞同：4
> 
> 时间：2012-12-28T17:10:29.903
> 
> 标签：ruby-on-rails, ruby, bundler

我正在尝试从[这个网站](http://ruby.railstutorial.org/chapters/beginning)学习 Rails 。我在 Windows 上，所以我使用了推荐的[Rails-Installer](http://railsinstaller.org)。我需要`jquery-rails`本教程的 gem 版本 2.0.0 所以在我的 gem 文件中我有这些：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development do
  gem 'sqlite3', '1.3.5'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.4'
  gem 'coffee-rails', '~> 3.2.2'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.2.3'
end

gem 'jquery-rails', '2.0.0'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

可以看出，我`gem 'jquery-rails', '2.0.0'`在`Gemfile`. 但是，当我运行`bundle update`或`bundle install`收到此错误时：

```
bbundle install could not find gem ' jquery-rails (= 2.0.0) x96-mingw32' in any of the gem sources listed in your gemfile. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T17:24:38.463

gem jquery-rails 版本 '2.0.0' 从 ruby​​gems
[http://rubygems.org/gems/jquery-rails/versions/2.0.0](http://rubygems.org/gems/jquery-rails/versions/2.0.0)

用。。。来代替

```
gem "jquery-rails", "~> 2.0.1" 
```

而且要快乐

# android - 在默认选项卡崩溃应用程序中创建片段

> ID：14073111
> 
> 赞同：0
> 
> 时间：2012-12-28T17:11:26.823
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我有一个典型的操作栏设置（ActionbarSherlock），其中我的默认选项卡是“主页”。

当应用程序启动时，选项卡被选中。当片段被创建/提交时，它会使应用程序崩溃。

其余选项卡正确创建/替换片段，因此它可能不是代码的那部分。我怀疑它与生命周期过程有关？

这是相当令人费解的，希望得到一些指导。

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragmentActivity;

public class BaseActivity extends SherlockFragmentActivity  implements ActionBar.TabListener {    

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    containerId = android.R.id.content;

    getSupportActionBar().addTab(homeTab);
    getSupportActionBar().addTab(questionsTab);
    getSupportActionBar().addTab(newsTab);

    Tab [] tabs = new Tab []{homeTab, questionsTab, newsTab};
    stackManager = new StackManager(this, tabs)    }

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {        
    // this crashes the application
    if (tab.getText()== HOME) {
        this.loadFragment(new AppTabBFirstFragment("home"));
    }

   if (tab.getText()== QUESTIONS) {
        this.loadFragment(new AppTabBFirstFragment("qns"));
   }

   if (tab.getText()== NEWS) {
        this.loadFragment(new AppTabBFirstFragment("news"));
    }       
   }

public void loadFragment(Fragment frag){
    getSupportFragmentManager().beginTransaction().replace(containerId , frag).commit(); 
```

// 记录猫

![在此处输入图像描述](../Images/a68364b4b72798ec661008b353da3455.png)

# asp.net - 用 Frontpage 编写的 ASP 中的 SQL SELECT STATEMENT

> ID：14073115
> 
> 赞同：1
> 
> 时间：2012-12-28T17:12:10.060
> 
> 标签：asp.net, sql, frontpage

当前选择语句：

```
SELECT * 
FROM vw_svc200_open 
WHERE (CUSTNMBR = '::CUSTNMBR::') 
ORDER BY ::sortcolumn:: 
```

这行得通，一切都很好。但是现在我需要修改这个选择字符串来应用一个额外的过滤器。

```
SELECT * 
FROM vw_svc200_open 
WHERE 
  CASE 
     WHEN ::CUSTNMBR:: = 'ABC123' 
     THEN (CUSTNMBR =  '::CUSTNMBR::' AND CNTCPRSN = '::CNTCPRSN::') 
     ELSE (CUSTNMBR =  '::CUSTNMBR::') 
  END 
ORDER BY ::sortcolumn:: 
```

所以基本上我需要对客户编号进行选择过滤，如果客户编号是 ABC123，那么我还需要它对联系人进行过滤......第二个 SELECT（使用 CASE 语句）的问题是它会引发“错误THEN 行上的 =" 附近。

`::CUSTNMBR::`and`::CNTCPRSN::`是 url 字符串变量（又叫什么？） 。

前任。

```
www.mywebsite.com/mypage.asp?Custnmbr=ABC123 
```

我是否必须在 asp 页面中添加一些逻辑（即 IF/Then）来设置变量，然后将该变量传递给 *fp_sQry=* 行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:36:09.367

我最终使用嵌套的 if 语句来设置 select 语句。

# php - Symfony2 和 Assetic - cssrewrite 非常适合开发，而不是产品

> ID：14073117
> 
> 赞同：8
> 
> 时间：2012-12-28T17:12:26.717
> 
> 标签：php, symfony, assetic

我将我的 CSS 包含在以下代码中：

```
{% stylesheets 'bundles/majorproductionssewingdivasite/css/*.css' filter='cssrewrite' %}
    <link rel="stylesheet" type="text/css" href="{{ asset_url }}" />
{% endstylesheets %} 
```

在开发中，这使我可以毫无问题地使用图像精灵。我的精灵的结果 URL 是：

`http://localhost/diva/web/bundles/majorproductionssewingdivasite/images/diva-sprites.jpg`

但是，在产品中，它被映射到：

`http://localhost/diva/bundles/majorproductionssewingdivasite/images/diva-sprites.jpg`

注意缺少 web 目录。

CSS 文件中生成的代码应该是这样，我所有的 CSS（开发“块”和最终的产品资产转储）都位于`web/css/`. 关于为什么 prod 环境跳过 web 目录的任何想法？

编辑：奇怪的是 dev 和 prod 在 CSS 本身中生成相同的 URL：

`url('../../bundles/majorproductionssewingdivasite/images/diva-sprites.jpg')`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-28T17:50:15.110

解决方案是将资产转储到 prod 环境中：

```
$ app/console assetic:dump --env=prod 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-13T15:28:16.360

记得**清除缓存**

```
php app/console cache:clear --env=prod --no-debug 
```

贝罗雷

```
php app/console assetic:dump --env=prod --no-debug 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-02T08:54:03.690

还要记住在您的 config_prod.yml 设置中适当地配置资产，如下所示：

```
assetic:
    use_controller: false 
```

* * *

编辑：正如[Symfony 文档](http://symfony.com/doc/current/assetic/asset_management.html#dumping-asset-files-in-the-dev-environment)中所说（实际上在章节中指的是开发环境）：*告诉 Symfony 停止尝试动态处理这些文件*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T05:28:07.283

在调试模式下，Assetic 1.1 似乎也重写了 CSS，即使它不在 {% stylesheets %} 标记中。因此，当您在生产中关闭调试时，值得检查一下。

# c# - 重新发布（有点）- 再次无效转换（数据表行总和）

> ID：14073120
> 
> 赞同：0
> 
> 时间：2012-12-28T17:12:37.730
> 
> 标签：c#, system.data.datatable

我有能力总计每一列并添加行 - 使用这段代码：

```
 DataRow totalRow = t.NewRow();

        int colCount = 1;
        for (int j = 1; j < t.Columns.Count; j++)
        {
            if (t.Columns[j].ColumnName == "Client")
            {
                t.Columns.Cast<DataColumn>().Skip(1);
            }
            else
            {
                int colTotal = 0;
                for (int i = 1; i < t.Rows.Count; i++)
                {

                    colTotal += Convert.ToInt32(t.Rows[i][j]);
                    totalRow[t.Columns[j].ColumnName] = colTotal;

                }
            }
            ++colCount;
        }

        t.Rows.Add(totalRow); <br> 
```

*** *为什么为什么我不能改变这个或者使用这个块（下面）来总计行并插入一个包含每行总计的新列？？？我不知道为什么我对此有这样的障碍-我确定它相对简单我只是没有看到它！这让我发疯——我已经在这呆了 3 天——这很难过。

```
 int sum = 0;
    foreach (DataRow rows in dt.Rows)
    {
        for (int i = 0; i < dt.Columns.Count; i++)
        {
            for (int j = 0; j < dt.Rows.Count; j++)
            {

                int number = Convert.ToInt32(dt.Rows[j].Field<int>(i));
                sum += number;
            }
        }

              rows["testrow"] = sum;
        }
            dataGridView1.DataSource = dt;
    } 
```

错误仍然是“指定的强制转换无效”——数据表来自 Excel 工作表。我可以在自制的DataTable上使用它就好了。我不明白。

* * *

这段代码工作得很好，给了我一个新列中的行总和

* * *

```
 System.Data.DataTable dt = new System.Data.DataTable();
        dt.Columns.Add("amount1", typeof(int));
        dt.Columns.Add("amount2", typeof(int));
        dt.Columns.Add("amount3", typeof(int));
        dt.Columns.Add("amount4", typeof(int));
        dt.Columns.Add("Row Totals", typeof(int));

        DataRow dr = dt.NewRow();
        dr[0] = 100;
        dr[1] = 200;
        dr[2] = 300;
        dr[3] = 400;
        dr[4] = 0;
        dt.Rows.Add(dr);
        int sum = 0;
        for (int i = 0; i < dt.Columns.Count; i++)
        {
            for (int j = 0; j < dt.Rows.Count; j++)
            {
                //  int sum = 0;

                int number = dt.Rows[j].Field<int>(i);
                sum += number;
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:53:11.667

它似乎不是一个 int 而是一个 long （或字节），您可以将 long 转换为 int 但您不能将 long 拆箱为相关代码尝试执行的 int 。

如果是这样的话，你可以做类似的事情

```
var sum = (from column in dt.Columns.AsEnumerable<DataColum>().Skip(1)
           from row in dt.Rows.AsEnumerable<DataRow>().Skip(1)
           where column.ColumnName != "Client"
           select (long)row[column]).Sum(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T16:36:47.153

请打鼓——

## 感谢你们提出的意见和建议，他们确实帮助我了解了幕后究竟发生了什么。

```
 System.Data.DataTable dt = ds.Tables[0];
        dt.Columns.Add("testrow", typeof(int));
        DataRow dr = dt.NewRow();
        int sum = 0;
        for (int i = 1; i < dt.Columns.Count; i++)
        {
            for (int j = 1; j < dt.Rows.Count; j++)
            {

                if (j == dt.Rows.Count - 1)
                {
                    dt.Rows[i][j] = Convert.ToInt32(sum);
                    sum = 0;
            }
                else
                {
                    object number = dt.Rows[i][j];
                   sum += Convert.ToInt32(number);
                }

              }
            dataGridView1.DataSource = dt;
        } 
```

# wordpress - Wordpress 页面不会分页

> ID：14073126
> 
> 赞同：4
> 
> 时间：2012-12-28T17:12:56.373
> 
> 标签：wordpress, pagination

好的，我正在为此扯掉我的头发，我知道它非常简单，并且正盯着我的脸，但我就是看不到它。本质上，正在发生的事情是我的分页不起作用。我使用插件 wp_pagenavi （这不是已经检查过的问题）它为我提供了分页中每个页面的链接列表。这一切都很好，事实上所有的代码都做了它应该做的事情。问题是当我单击分页链接（例如“2”或“3”）时，它会尝试转到相应的分页，即 www.yousitehere.com/somepage/page/2 但该站点只是重新加载当前页面而没有/第2页。

我认为页面的某个地方要么没有意识到它需要分页，因此忽略了 /page 的所有实例，或者在页面加载之前正在重置分页。（它不是reset_query）。

这是一个 Wordpress 网站。不幸的是，我无法显示网站链接，这让你更难，希望有人有建议。

这是我的代码

```
<div id="content" class="clearfix">
<div id="main" class="col960 left first clearfix" role="cont_detail">
<?php if (have_posts()) : while (have_posts()) : the_post(); 
    $id = get_the_ID();
    $array = metadata($id);
?>
    <article id="post-<?php the_ID(); ?>" <?php post_class('clearfix'); ?> role="cont_detail" >
        <header>
            <div id="header_bg_top"></div>
            <div id="header_bg">
                <?php if($array['custom_facebook'] !="" && $array['custom_twitter'] !="" && $array['custom_linkedin'] != ""&& $array['custom_website'] != "" && $array['custom_blog'] != "" && $array['custom_email'] != ""){?>
                <div class="social_link_container">
                    <div class="width">
                        <?php if(isset($array['custom_facebook']) && $array['custom_facebook'] !=""){?>
                        <a href="http://www.facebook.com/<?php echo $array['custom_facebook'];?>" target="_new"><img src="<?php echo get_template_directory_uri(); ?>/images/author-facebook.png"></a>
                        <?php  }
                        if(isset($array['custom_twitter']) && $array['custom_twitter'] !=""){?>
                        <a href="http://www.twitter.com/<?php echo $array['custom_twitter'];?>" target="_new"><img src="<?php echo get_template_directory_uri(); ?>/images/author-twitter.png"></a>
                        <?php  }
                        if(isset($array['custom_linkedin']) && $array['custom_linkedin'] !=""){?>
                        <a href="http://www.linkedin.com/<?php echo $array['custom_linkedin'];?>" target="_new"><img src="<?php echo get_template_directory_uri(); ?>/images/author-in.png"></a>
                        <?php  }
                        if(isset($array['custom_website']) && $array['custom_website'] !=""){?>
                        <a href="http://<?php echo $array['custom_website'];?>" target="_new"><img src="<?php echo get_template_directory_uri(); ?>/images/author-web.png"></a>
                        <?php  }
                        if(isset($array['custom_blog']) && $array['custom_blog'] !=""){?>
                        <a href="http://<?php echo $array['custom_blog'];?>" target="_new"><img src="<?php echo get_template_directory_uri(); ?>/images/author-blog.png"></a>
                        <?php  }
                        if(isset($array['custom_email']) && $array['custom_email'] !=""){?>
                        <a href="mailto:<?php echo $array['custom_email'];?>"><img src="<?php echo get_template_directory_uri(); ?>/images/author-email.png"></a><?php  }?>
                    </div>
                </div>
                <?php } ?>
                <h1 class="cont_detail_title" itemprop="headline"><?php the_title(); ?></h1>
                <?php if(isset($array['custom_description']) && $array['custom_description'] !="")
                {
                    ?>
                    <span class="title_description"><?php echo $array['custom_description']; ?></span>
                <?php
                }
                ?>
            </div><!-- header-bg -->
        </header> <!-- end article header -->
        <section>
            <div class="content-left">
                <?php if(isset($array['featured_thumb']) && $array['featured_thumb'] !="")
                    {
                    ?>
                    <div class="cont_detail_image">
                        <?php print_thumbnail($array['featured_thumb'], "medium");?>
                    </div>
                <?php  
                }
                ?>
            </div>
            <div class="content-right">
                <?php the_content(); ?>
            </div>
        </section> <!-- end article section -->

    </article> <!-- end article -->
    <?php endwhile; ?>          
    <?php else : ?>
        <article id="post-not-found">
            <header>
                <h1>Not Found</h1>
            </header>
            <section class="post_content">
                <p>Sorry, but the requested resource was not found on this site.</p>
            </section>
            <footer>    
            </footer>
        </article>
    <?php endif;        
    wp_reset_query();
//Sort queries, most viewed, alphabetical, date         

    echo '<section><div id="content_bg" class="group">';
    $row_num = 1;            
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;                     
    if( $_GET['sort'] == 'date' ) {
        $sortOrder = getSortOrder( $_GET['dsort_order'] );
        $meta_queries[] = array(                
            'key' => 'custom_authorid',
            'value' => $post->ID,
            'compare' => 'LIKE',
            );
            query_posts(array(
            'post__not_in' => array($post->ID),
            'post_type' => 'post',
            'meta_query' => $meta_queries,
            'order'=>$sortOrder,
            'orderby'=> 'date',
            'posts_per_page' => 9,
            'paged' => $paged
            ));
    }
    elseif( $_GET['sort'] == 'alpha' ) {
        $sortOrder = getSortOrder( $_GET['asort_order'] );
        $meta_queries[] = array(                
            'key' => 'custom_authorid',
            'value' => $post->ID,
            'compare' => 'LIKE',
            );
            query_posts(array(
            'post__not_in' => array($post->ID),
            'post_type' => 'post',
            'meta_query' => $meta_queries,
            'order'=>$sortOrder,
            'orderby'=> 'title',
            // adding posts_per_page, set to 9 might be different then global preference
            'posts_per_page' => 9,
            'paged' => $paged
            ));
        }
    elseif( $_GET['sort'] == 'mviewed' ) {

        }
    else{   
        $meta_queries[] = array(                                                
            'key' => 'custom_authorid',
            'value' => $post->ID,
            'compare' => 'LIKE',
            );
            query_posts(array(
            'post__not_in' => array($post->ID),
            'post_type' => 'post',
            'posts_per_page' => 9,
            'meta_query' => $meta_queries,
            'paged' => $paged
            ));
        }

        ?>
    <div class="paginate_nav">
        <?php wp_pagenavi(); // use the page navi function ?>
        <div class="sort_nav">
            <?php contrPaginationLinks( $sortOrder ) ?>
        </div><!--sort_nav-->
    </div><!--paginate_nav-->       
    <?php 
        if( $_GET['sort'] == 'mviewed' ) {

        }
        else{ 
            if (have_posts()) : while (have_posts()) : the_post();                                          
                $item = metadata($post->ID);
                $containsVideos = false;
                foreach ($item['cat'] as $value) {
                    if (strpos($value->cat_name,'Videos') !== false) {
                        $containsVideos = true;
                    }
                }
             ?>
                <div class="story-container" >
                    <div class="story_left">
                        <div class="story_image">
                            <input type="hidden" name="vidID" value="<?php echo $item['media_link']; ?>" />
                            <div class="about_latest_image <?php echo $item['media_link']; ?>">
                                <a href="<?php echo $item['link']; ?>">
                                        <?php
                                        print_thumbnail($item['featured_thumb'],"thumbnail", $item['youtube_link'], $item['vimeo_link'], $item['media_link']);      
                                        ?>
                                    <?php if($containsVideos == true){echo '<span class="videoIndicator"></span>';} ?>
                                </a>        
                            </div>
                        </div>      
                        <?php if($_GET['sort'] == 'date'){ ?>
                            <div class="story_view">
                                <?php echo $item['date']; ?>
                            </div>
                            <?php } ?>
                    </div>
                <div class="story_title">
                    <a href="<?php echo $item['link']; ?>" title="<?php echo $item['title']; ?>"> 
                        <span class="story_title"><?php echo $item['title']; ?></span>
                    </a>
                </div>
                <?php if(isset($item['custom_description']) && $item['custom_description'] !="") {
                ?>
                    <div class="story_description"><?php echo $item['custom_description']; ?></div>
                <?php  
                }
                ?>
            <div class="story_content"></div>                         
        </div>
        <?php endwhile; ?>  
        <?php else : ?>
            <h1><?php _e("No Posts Yet", "hooplahatheme"); ?></h1>
            <p><?php _e("Sorry, What you were looking for is not here.", "hooplahatheme"); ?></p>
        <?php endif; 
        } // end display else default
        echo '</div></section>';
        //
        // reset query after display is done            
        //
        wp_reset_query();
        ?>
        <footer>
        </footer> <!-- end article footer -->
</div> <!-- end #main --> 
```

* * *

更新

事实证明，发生了一个 302 重定向，这是我试图找出的下一步。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-25T04:02:19.673

克里斯托弗的回答可能适用于大多数人。

**但..**

如果您想阻止重定向也影响`/pagename/page/1`，这将有所帮助：

```
add_filter('redirect_canonical', 'my_redirect_canonical', 10, 2); 
function my_redirect_canonical($redirect_url, $requested_url) { 
  $do_redirect = true; 
  if(preg_match('/page/',$requested_url)){
    $do_redirect = false; 
  }
  return $do_redirect; 
} 
```

[在这里](http://wordpress-hackers.1065353.n5.nabble.com/Removing-the-canonical-URL-redirection-for-page-1-in-WP-3-0-td523.html)找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T04:47:31.750

因此，对于任何有类似问题的人来说，答案很简单。默认情况下，您不能在 wordpress 中对单个帖子页面进行分页。它只会重定向回页面的根 URL。您需要做的就是将其添加到您的主题 functions.php

```
add_filter('redirect_canonical','pif_disable_redirect_canonical');

function pif_disable_redirect_canonical($redirect_url) {

if( is_singular() && in_category('PLACE CAT ID HERE') ) {
    $redirect_url = false;
}
return $redirect_url;
} 
```

有关这方面的更多信息，您可以在这里查看[http://wordpress.org/support/topic/home-pagination-page2-redirect-to-a-post](http://wordpress.org/support/topic/home-pagination-page2-redirect-to-a-post)

# java - 如何打印存储在 EclipseLink 中隔离缓存中的对象？

> ID：14073131
> 
> 赞同：0
> 
> 时间：2012-12-28T17:13:07.123
> 
> 标签：java, jpa, eclipselink

我想看看 EclipseLink 的隔离缓存（L1 缓存）中存储了哪些对象。有没有让我这样做的 API？我尝试了谷歌，但找不到任何东西。

如果您对它的原因感兴趣，因为我发现在持久性上下文中加载一些对象后，查询会变慢，例如，在事务开始时需要 100 毫秒的查询现在如果在在其他一些操作已经发生之后的事务中间。如果我`entityManager.clear()`在查询执行之前这样做，查询再次需要 100 毫秒。我相信这是因为持久性上下文中加载了许多影响 EclipseLink 性能的对象。这就是为什么我想验证持久性上下文中的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T00:16:00.370

在浏览了 EclipseLink 源代码后，我发现存储在持久性上下文（隔离缓存）中的对象位于一个名为 identityMaps 的映射中，对于每个实体类，都有一个映射存储该类型的所有对象。

您可以使用以下方法打印地图的内容：

```
public interface IdentityMapAccessor {
    /**
     * PUBLIC:
     * Used to print all the Objects in the identity map of the given Class type.
     * The output of this method will be logged to this session's SessionLog at SEVERE level.
     */
    public void printIdentityMap(Class theClass);

    /**
     * PUBLIC:
     * Used to print all the Objects in every identity map in this session.
     * The output of this method will be logged to this session's SessionLog at SEVERE level.
     */
    public void printIdentityMaps();
} 
```

例子：

```
((JpaEntityManager) entityManager.getDelegate())
            .getActiveSession()
            .getIdentityMapAccessor()
            .printIdentityMaps();
((JpaEntityManager) entityManager.getDelegate())
            .getActiveSession()
            .getIdentityMapAccessor()
            .printIdentityMap(MyClass.class); 
```

# sql-server-2008 - 如何在 SQL Reporting Services 2008 (SSRS) 折线图上的数据集（系列）旁边放置图例？

> ID：14073132
> 
> 赞同：3
> 
> 时间：2012-12-28T17:13:08.700
> 
> 标签：sql-server-2008, ssrs-2008, reporting-services

我相信将图例放在行尾是用户友好的，而不是将图例放在表中。我不认为SSRS能够做到这一点......

我可以手动输入系列名称；但是，我希望它们是动态的。

请告知您是否知道如何将图例放在系列行旁边，如下例所示： ![在此处输入图像描述](../Images/d37abb4e700ab5036cdc7ba2d05f4e6d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T17:50:29.100

1.  单击图表数据的值
2.  在属性工具栏中，转到标签 - 标签 - 标签
3.  把你想要的文字放在标签上
4.  单击可见的下拉菜单（它是标签下方的几个字段）
5.  点击表达式
6.  输入逻辑以仅在 x 轴上最右边的部分显示它。例如，如果 X 轴是日期字段，则使其仅显示最大日期。

    =IIF(Fields!CreatedOn.Value = MAX(Fields!CreatedOn.Value, "DataSet1"), TRUE, FALSE)

这是我最终的结果：

![在此处输入图像描述](../Images/f71460e89240c6f704277219935e2888.png)

# c# - try...catch 中的隐式类型变量

> ID：14073134
> 
> 赞同：6
> 
> 时间：2012-12-28T17:13:12.023
> 
> 标签：c#, .net, try-catch, implicit-typing

我喜欢对几乎所有东西都使用隐式类型，因为它简洁明了。但是，当我需要在单个语句周围包装 try...catch 块时，我必须打破隐式类型以确保变量具有定义的值。这是一个人为的假设示例：

```
var s = "abc";

// I want to avoid explicit typing here
IQueryable<ABC> result = null;
try {
    result = GetData();
} catch (Exception ex) { }

if (result != null)
    return result.Single().MyProperty;
else
    return 0; 
```

有没有一种方法可以调用`GetData()`异常处理，但不必显式定义结果变量的类型？像`GetData().NullOnException()`什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T17:38:22.713

这是一个常见的问题。我建议您坚持使用现有的解决方案。

如果你真的想要一个替代品，这里是：

```
static T NullOnException<T>(Func<T> producer) where T : class {
  try { return producer(); } catch { return null; } //please modify the catch!
}

//now call it
var result = NullOnException(() => GetData()); 
```

请修改它以记录异常或将捕获限制为具体类型。我不赞成吞下所有例外。

由于这个答案被大量阅读，我想指出这个实现只是演示质量。在生产代码中，您可能应该**合并评论中给出的建议**。为自己编写一个健壮的、设计良好的辅助函数，它将为您提供多年的良好服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:19:14.627

只需将您的代码放入尝试中：

```
var s = "abc";

// I want to avoid explicit typing here
try {
    var result = GetData();
    if (result != null)
        return result.Single().MyProperty;
    else
        return 0;
} catch (Exception ex) { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:34:36.023

我找到了与@usr 类似的解决方案，但语义略有不同：

```
T LiftScope<T>(Func<T> ScopedFunction)
{
    T result = ScopedFunction();
    return result;
} 
```

的目的`LiftScope`是在不影响隐式类型的情况下将内部变量传递给调用者。这可以用来解决原始问题，除了`try...catch`实际嵌入在调用中。

## `try...catch`

```
var result = 
    LiftScope(() => {
        try { return producer(); } catch { return null; }
    }); 
```

现在调用者能够负责异常处理。此外，这可以在少数类似的用例中普遍使用，在这些用例中，您的作用域非常短暂。

## `if`

```
var result =
    LiftScope(() => {
        if (a == b)
            return GetData(true);
        else if (b == c)
            return GetData(false);
        else
            return GetData(true, 2);
    }); 
```

这也可以通过三元式`if`语句来解决。

## `using`

```
var result = 
    LiftScope(() => {
        using (var myContext = new MyDataContext())
        {
            return myContext.MyTable.Where(w => w.A == B).ToList();
        }
    }); 
```

# c - 如何让 BMP085 每 30 分钟记录一次海拔高度？

> ID：14073139
> 
> 赞同：2
> 
> 时间：2012-12-28T17:13:40.660
> 
> 标签：c, raspberry-pi

我正在为一个科学项目发送一个气象气球，其中一个[Raspberry Pi](http://www.raspberrypi.org/)连接到[Adafriut BMP085](http://learn.adafruit.com/bmp085)，并使用一些 C 代码使其记录和存储高度读数。唯一的问题是它目前只记录一次，我想要它在执行时，它会每半小时记录一次海拔高度并将其存储在一个文本文件中，持续大约 24 小时左右。代码就在下面。

随意复制代码并使用我的参数重新上传。预先感谢您的任何帮助。

```
#include <stdio.h>
#include <stdint.h>
#include <fcntl.h>
#include <stdlib.h>

#include <unistd.h>
#include <linux/i2c-dev.h>
#include <linux/i2c.h>
#include <sys/ioctl.h>
#include "smbus.h" 

#define BMP085_I2C_ADDRESS 0x77

const unsigned char BMP085_OVERSAMPLING_SETTING = 3;

// Calibration values - These are stored in the BMP085
short int ac1;
short int ac2; 
short int ac3; 
unsigned short int ac4;
unsigned short int ac5;
unsigned short int ac6;
short int b1; 
short int b2;
short int mb;
short int mc;
short int md;

int b5; 

unsigned int temperature, pressure, altitude;

// Open a connection to the bmp085
// Returns a file id
int bmp085_i2c_Begin()
{
   int fd;
   char *fileName = "/dev/i2c-0";

   // Open port for reading and writing
   if ((fd = open(fileName, O_RDWR)) < 0)
      exit(1);

   // Set the port options and set the address of the device
   if (ioctl(fd, I2C_SLAVE, BMP085_I2C_ADDRESS) < 0) {               
      close(fd);
      exit(1);
   }

   return fd;
}

// Read two words from the BMP085 and supply it as a 16 bit integer
__s32 bmp085_i2c_Read_Int(int fd, __u8 address)
{
   __s32 res = i2c_smbus_read_word_data(fd, address);
   if (res < 0) {
      close(fd);
      exit(1);
   }

   // Convert result to 16 bits and swap bytes
   res = ((res<<8) & 0xFF00) | ((res>>8) & 0xFF);

   return res;
}

//Write a byte to the BMP085
void bmp085_i2c_Write_Byte(int fd, __u8 address, __u8 value)
{
   if (i2c_smbus_write_byte_data(fd, address, value) < 0) {
      close(fd);
      exit(1);
   }
}

// Read a block of data BMP085
void bmp085_i2c_Read_Block(int fd, __u8 address, __u8 length, __u8 *values)
{
   if(i2c_smbus_read_i2c_block_data(fd, address,length,values)<0) {
      close(fd);
      exit(1);
   }
}

void bmp085_Calibration()
{
   int fd = bmp085_i2c_Begin();
   ac1 = bmp085_i2c_Read_Int(fd,0xAA);
   ac2 = bmp085_i2c_Read_Int(fd,0xAC);
   ac3 = bmp085_i2c_Read_Int(fd,0xAE);
   ac4 = bmp085_i2c_Read_Int(fd,0xB0);
   ac5 = bmp085_i2c_Read_Int(fd,0xB2);
   ac6 = bmp085_i2c_Read_Int(fd,0xB4);
   b1 = bmp085_i2c_Read_Int(fd,0xB6);
   b2 = bmp085_i2c_Read_Int(fd,0xB8);
   mb = bmp085_i2c_Read_Int(fd,0xBA);
   mc = bmp085_i2c_Read_Int(fd,0xBC);
   md = bmp085_i2c_Read_Int(fd,0xBE);
   close(fd);
}

// Read the uncompensated temperature value
unsigned int bmp085_ReadUT()
{
   unsigned int ut = 0;
   int fd = bmp085_i2c_Begin();

   // Write 0x2E into Register 0xF4
   // This requests a temperature reading
   bmp085_i2c_Write_Byte(fd,0xF4,0x2E);

   // Wait at least 4.5ms
   usleep(5000);

   // Read the two byte result from address 0xF6
   ut = bmp085_i2c_Read_Int(fd,0xF6);

   // Close the i2c file
   close (fd);

   return ut;
}

// Read the uncompensated pressure value
unsigned int bmp085_ReadUP()
{
   unsigned int up = 0;
   int fd = bmp085_i2c_Begin();

   // Write 0x34+(BMP085_OVERSAMPLING_SETTING<<6) into register 0xF4
   // Request a pressure reading w/ oversampling setting
   bmp085_i2c_Write_Byte(fd,0xF4,0x34 + (BMP085_OVERSAMPLING_SETTING<<6));

   // Wait for conversion, delay time dependent on oversampling setting
   usleep((2 + (3<<BMP085_OVERSAMPLING_SETTING)) * 1000);

   // Read the three byte result from 0xF6
   // 0xF6 = MSB, 0xF7 = LSB and 0xF8 = XLSB
   __u8 values[3];
   bmp085_i2c_Read_Block(fd, 0xF6, 3, values);

   up = (((unsigned int) values[0] << 16) | ((unsigned int) values[1] << 8) | (unsigned int) values[2]) >> (8-BMP085_OVERSAMPLING_SETTING);

   return up;
}

// Calculate pressure given uncalibrated pressure
// Value returned will be in units of XXXXX
unsigned int bmp085_GetPressure(unsigned int up)
{
   int x1, x2, x3, b3, b6, p;
   unsigned int b4, b7;

   b6 = b5 - 4000;
   // Calculate B3
   x1 = (b2 * (b6 * b6)>>12)>>11;
   x2 = (ac2 * b6)>>11;
   x3 = x1 + x2;
   b3 = (((((int)ac1)*4 + x3)<<BMP085_OVERSAMPLING_SETTING) + 2)>>2;

   // Calculate B4
   x1 = (ac3 * b6)>>13;
   x2 = (b1 * ((b6 * b6)>>12))>>16;
   x3 = ((x1 + x2) + 2)>>2;
   b4 = (ac4 * (unsigned int)(x3 + 32768))>>15;

   b7 = ((unsigned int)(up - b3) * (50000>>BMP085_OVERSAMPLING_SETTING));
   if (b7 < 0x80000000)
      p = (b7<<1)/b4;
   else
      p = (b7/b4)<<1;

   x1 = (p>>8) * (p>>8);
   x1 = (x1 * 3038)>>16;
   x2 = (-7357 * p)>>16;
   p += (x1 + x2 + 3791)>>4;

   return p;
}

// Calculate temperature given uncalibrated temperature
// Value returned will be in units of 0.1 deg C
unsigned int bmp085_GetTemperature(unsigned int ut)
{
   int x1, x2;

   x1 = (((int)ut - (int)ac6)*(int)ac5) >> 15;
   x2 = ((int)mc << 11)/(x1 + md);
   b5 = x1 + x2;

   unsigned int result = ((b5 + 8)>>4);  

   return result;
}

// This Altitude part is stolen from some some unknown
// Arduino library.  The number divided into pressure for
// float A is derived from the local pressure as explained
// at http://learn.adafruit.com/bmp085/using-the-bmp085.
unsigned int bmp085_Altitude(float pressure)
{
   float A = pressure/101794.58;
   float B = 1/5.25588;
   float C = pow(A,B);
   C = 1 - C;
   C = C / 0.0000225577;

   return C;
}

int main(int argc, char **argv)

{

   bmp085_Calibration();

   temperature = bmp085_GetTemperature(bmp085_ReadUT());
   pressure = bmp085_GetPressure(bmp085_ReadUP());
        altitude = bmp085_Altitude(pressure);

   printf("Temperature\t%0.1f *F\n", ((double)temperature)/10 * 1.8 + 32);
   printf("Pressure\t%0.2f hPa\n", ((double)pressure)/100);
        printf("Altitude\t%0.1f Feet\n", ((double)altitude)*3.280839895);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:27:26.957

如果您在测量间隔中不需要亚秒级精度，我看到了两种可能的解决方案：

1.  `main()`将除了校准之外的内容包装在一个循环中，并包含[`sleep()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/sleep.html)一个参数为 1800 秒的调用：

    ```
    int main(int argc, char **argv) {
        bmp085_Calibration();

       int count;

       for (count = 0; count < 49; ++count) {
           temperature = bmp085_GetTemperature(bmp085_ReadUT());
           pressure = bmp085_GetPressure(bmp085_ReadUP());
           altitude = bmp085_Altitude(pressure);

           printf("Temperature\t%0.1f *F\n", ((double)temperature)/10 * 1.8 + 32);
           printf("Pressure\t%0.2f hPa\n", ((double)pressure)/100);
           printf("Altitude\t%0.1f Feet\n", ((double)altitude)*3.280839895);

           sleep(1800);
       }

       return 0;
    } 
    ```

    您可能需要重置一些东西才能在同一程序中进行第二次测量。您可能还想检查 的返回值`sleep()`以捕获该函数调用的潜在过早结束...

2.  由于您在设备中使用 Linux 作为操作系统，因此您可以在程序周围使用包装脚本：

    ```
    #!/bin/bash

    while true; do
        /path/to/your/program >> measurements.log

        sleep 1800 
    done 
    ```

    我将在 48 小时后将终止作为练习留给读者...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T18:31:29.587

`MAIN()`看起来您的例程中没有任何循环。由于您希望它每 30 分钟记录一次数据，因此您希望 MAIN 连续循环，imo。

我对 Raspberry PI 了解不多/一无所知，但是我确实了解 Arduino，并且主入口点例程是自动调用的，我认为这里是一样的，称为`MAIN()`.

您可以简单地将内脏包裹`MAIN()`在一个循环中并使用睡眠 30 分钟。如果您发现您想在循环 MAIN 时执行其他活动，但仍只想每 30 分钟记录一次，那么您可以存储一个变量`lastTimeDataStored`并每次通过循环进行比较；一旦其等于/大于 30 分钟，则存储数据并将变量重置为当前时间。

```
int main(int argc, char **argv)

{

   bmp085_Calibration();

   while (true) //loop indefinitely
   {
     temperature = bmp085_GetTemperature(bmp085_ReadUT());
     pressure = bmp085_GetPressure(bmp085_ReadUP());
     altitude = bmp085_Altitude(pressure);

     printf("Temperature\t%0.1f *F\n", ((double)temperature)/10 * 1.8 + 32);
     printf("Pressure\t%0.2f hPa\n", ((double)pressure)/100);
     printf("Altitude\t%0.1f Feet\n", ((double)altitude)*3.280839895);

     //either sleep for 30 minutes or check variable to see if 30 minutes has passed
     usleep((1000*60)*30); //sleep 30 minutes
   }

   return 0;
} 
```

# android - 在 ListView 的上下文中展开 - Android

> ID：14073141
> 
> 赞同：0
> 
> 时间：2012-12-28T17:13:49.900
> 
> 标签：android, android-listview, textview, android-context

我有一个 listView，该行的一个组件是 TextView。默认情况下，我希望在 TextView 中只显示 2 行文本。但是，如果用户点击 TextView，我希望 textView 在上下文中展开。

我实际上有这部分工作，但我想要一个更多的内容指标：

![在此处输入图像描述](../Images/e03d00cd8d234e94df0dc2209f44fd03.png)

我当前的实现（如下）有它自己的问题，如果列表视图滚动，它不会崩溃，但我将通过将每个游标记录的值存储在某个集合中来处理这个问题。

我尝试使用 chatBubble.getLineCount() 但最初返回零 b/c 它没有通过 onLayout （据我的理解）。

我只希望在内容超过 2 行时显示它。

我认为我的解决方案将创建我自己的 TextView 实现，它可以处理我的一些要求，但不确定是否有人有任何我可以查看的示例..（或其他建议）。

```
 <RelativeLayout
        android:id="@+id/linear_layout_row_three"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/linear_layout_row_two"
        android:layout_toRightOf="@+id/munzeeQuickContact"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/chat_bubble"
            android:clickable="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:maxLines="2"
            android:background="@drawable/chat_bubble"
            android:text="I went looking for this particular token on a rainy day, and I was unable to locate it due to the bad weather, next time please leave an um I went looking for this particular munzee on a rainy day, and I was unable to locate it due to the bad weather, next time please leave an um" />
        <ImageView 
            android:id="@+id/minimize_maximize"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@id/chat_bubble"
            android:layout_alignRight="@id/chat_bubble"
            android:visibility="gone"
            android:src="@android:drawable/ic_menu_more"/>
    </RelativeLayout> 
```

这是我目前拥有的一些来源：

```
final TextView chatBubble = (TextView) view.getTag(R.id.chat_bubble);
        final ViewGroup expandableContainer = (ViewGroup) view.getTag(R.id.linear_layout_row_three);
        final ImageView minimizeMaximize = (ImageView) view.getTag(R.id.minimize_maximize);
        chatBubble.setOnClickListener(

                new View.OnClickListener() {
                    boolean isExpanded = false;
                    int lastHeight = 0;
                    // This is for the auto expanding text view
                    @Override
                    public void onClick(View v) {
                        if (isExpanded) {
                            ViewGroup.LayoutParams params = (ViewGroup.LayoutParams) expandableContainer
                                    .getLayoutParams();

                            params.height = lastHeight;
                            chatBubble.setMaxLines(2);

                            expandableContainer.setLayoutParams(params);
                            expandableContainer.invalidate();
                            minimizeMaximize.setVisibility(View.VISIBLE);
                        } else {
                            lastHeight = expandableContainer.getHeight();

                            ViewGroup.LayoutParams params = (ViewGroup.LayoutParams) expandableContainer
                                    .getLayoutParams();

                            params.height = ViewGroup.LayoutParams.WRAP_CONTENT;
                            chatBubble.setMaxLines(99);

                            expandableContainer.setLayoutParams(params);
                            expandableContainer.invalidate();
                            minimizeMaximize.setVisibility(View.VISIBLE);
                        }

                        isExpanded = !isExpanded;

                    }
                }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T15:07:46.457

> 我认为我的解决方案将创建我自己的 TextView 实现，它可以处理我的一些要求，但不确定是否有人有任何我可以查看的示例。

看看下面的课程：

```
public class LimitedTextView extends TextView {

    private boolean mStatus;

    public LimitedTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        Paint p = getPaint();
        String s = getText().toString();
        if (s != null && !s.equals("")) {
            int m = (int) p.measureText(s);
            if (m < getMeasuredWidth() * 2) {
                modifyParent(true);
            } else {
                modifyParent(false);
            }
        }
    }

    private void modifyParent(boolean how) {
        RelativeLayout rl = (RelativeLayout) getParent();
        rl.findViewById(R.id.minimize_maximize).setVisibility(
                how ? View.GONE : View.VISIBLE);
        if (mStatus) {
            setMaxLines(40); // arbitrary number, set it as high as possible
        } else {
            setMaxLines(2);
        }
    }

    public void storeCurrentStatus(boolean status) {
        mStatus = status;
    }

} 
```

将`LimitedTextView`使用自己的`Paint`对象测量其文本，并根据测量的宽度对其进行测试。如果它适合两个允许的行，它将隐藏`ImageView`，否则将显示它。它还存储行的当前状态（扩展/未扩展）并增加或减少最大行数以获得正确的外观。在`getView`适配器的方法中，您将：

*   设置文本
*   根据位置设置布尔数组的状态（这也是在滚动列表时保持行顺序所必需的）：

    `textView.storeCurrentStatus(mStatus[position])`

*   `OnClickListener`在自身上设置`LimitedTextView`并从那里更新状态：

    ```
    mStatus[(Integer) v.getTag()] = !mStatus[(Integer) v.getTag()];
    notifyDataSetChanged(); 
    ```

*   基于相同的`mStatus`布尔数组，您可能会更改 , 的可绘制对象`ImageView`，以根据是否`TextView`扩展显示不同的

我是手动写的，所以我现在可能会遗漏一些错误，把它当作一个想法。可以提高性能，`LimitedTextView`我也不知道如果你想动画扩展文本它会表现如何。

# java - 常规错误 MissingPropertyException：没有这样的属性

> ID：14073143
> 
> 赞同：1
> 
> 时间：2012-12-28T17:14:02.780
> 
> 标签：java, groovy

我正在做一个 groovy 教程，我使用了《Programming Groovy》一书中的代码。我在书中使用以下代码来了解 Groovy 中的事件处理程序：

++++++++++++++++++++++++++++++++++++++++++++++++++++++ +++++++++++++++++++++++++++++

```
import javax.swing.*
import java.awt.*
import java.awt.event.*
import java.awt.Container.*
import java.lang.*

frame = new JFrame(size: [300, 300],
    layout: new FlowLayout(),
    defaultCloseOperation: java.swing.WindowConstants.EXIT_ON_CLOSE)
button = new JButton("click")
positionLabel = new JLabel("")
msgLabel = new JLabel("")
frame.contentPane.add button
frame.contentPane.add positionLabel
frame.contentPane.add msgLabel

button.addActionListener({ JoptionPane.showMessageDialog(frame, "You clicked!")} as ActionListener)

displayMouseLocation = {positionLabel.setText("$it.x, $it.y")}
frame.addMouseListener(displayMouseLocation as MouseListener)
frame.addMouseMotionListener(displayMouseLocation as MouseMotionListener)

handle = [
    focusGained : {msg.Label.setText("Good to see you!") },
    focusLost : {msg.Label.setText("Come back soon!") }
]
button.addFocusListener(handleFocus as FocusListener)

events = ['WindowListener', 'ComponentListener']

handler = {msg.Label.setText("$it") }

for (event in events)
{
    handleImpl = handler.asType(Class.forName("java.awt.event.${event}"))
    frame."add${event}"(handlerImpl)
}

frame.show() 
```

++++++++++++++++++++++++++++++++++++++++++++++++++++++ +++++++++++++++++++++++++++++++++

我在第 8 行收到一条错误消息：

groovy.lang.MissingPropertyException：没有这样的属性：类的java：org.codehaus.groovy.groovy.runtime.ScriptBytecodeAdapter.unwrap（ScriptBytecodeAdapter.java:50）的execise2 org.codehaus.groovy.runtime.callsite.PogoGetPropertySite.getProperty（PogoGetPropertySite .java:49) 在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGroovyObjectGetProperty(AbstractCallSite.java:231) 在 execise2.run(execise2.groovy:8)

我错过了什么？我觉得这很简单，但我找不到。

谢谢！！

铁螳螂7x

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T17:20:14.910

上面的包`java.swing.WindowConstants.EXIT_ON_CLOSE`是错误的。应该是`javax.swing.WindowConstants.EXIT_ON_CLOSE`。该错误消息令人困惑，因为 groovy 试图将其解释`java.swing...`为`swing`名为`java`.

另外，由于您已经在导入`javax.swing`，只需使用`WindowConstants.EXIT_ON_CLOSE`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:17:49.993

对于`WindowConstants`，您可以替换：

```
java.swing.WindowConstants.EXIT_ON_CLOSE 
```

和

```
javax.swing.WindowConstants.EXIT_ON_CLOSE 
```

或者干脆

```
WindowConstants.EXIT_ON_CLOSE 
```

# c# - 防止两个线程进入具有相同值的代码块

> ID：14073147
> 
> 赞同：11
> 
> 时间：2012-12-28T17:14:07.417
> 
> 标签：c#, multithreading, locking

假设我有这个功能（假设我以线程安全的方式访问缓存）：

```
object GetCachedValue(string id)
{
    if (!Cache.ContainsKey(id))
    {
         //long running operation to fetch the value for id
         object value = GetTheValueForId(id);
         Cache.Add(id, value);
    }     
    return Cache[id];
} 
```

我想防止两个线程同时**为相同的值运行“***长时间运行的操作*” 。显然我可以将整个东西包装在一个 lock() 中，但是无论值如何，整个函数都会阻塞，我希望两个线程能够执行长时间运行的操作，只要它们正在寻找不同的 id。

 **是否有内置的锁定机制基于一个值进行锁定，这样一个线程可以阻塞，而另一个线程完成*长时间运行的操作*，所以我不需要执行两次（或 N 次）？理想情况下，只要在一个线程中执行*长时间运行的操作*，就没有其他线程能够为相同的 id 值执行此操作。

我可以通过将 id 放在 HashSet 中然后在操作完成后将其删除来滚动我自己，但这似乎是一个 hack。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T17:31:28.263

我会[`Lazy<T>`](http://msdn.microsoft.com/en-us/library/dd783092.aspx)在这里使用。下面的代码将锁定缓存，放入`Lazy`缓存并立即返回。*长时间运行的操作*将以线程安全的方式执行一次。

```
new Thread(() => Console.WriteLine("1-" + GetCachedValue("1").Value)).Start();
new Thread(() => Console.WriteLine("2-" + GetCachedValue("1").Value)).Start(); 
```

* * *

```
Lazy<object> GetCachedValue(string id)
{
    lock (Cache)
    {
        if (!Cache.ContainsKey(id))
        {
            Lazy<object> lazy = new Lazy<object>(() =>
                {
                    Console.WriteLine("**Long Running Job**");
                    Thread.Sleep(3000);
                    return int.Parse(id);
                }, 
                true);

            Cache.Add(id, lazy);
            Console.WriteLine("added to cache");
        }
        return Cache[id];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T12:05:09.530

在这种情况下，我希望有这样的界面

```
using (SyncDispatcher.Enter(id))
{
    //any code here...
} 
```

所以我可以执行任何代码，如果 id 相同，它将是线程安全的。如果我需要从缓存中获取价值，我会直接得到它，因为没有并发调用。

我对 SyncDispatcher 的实现是这样的：

```
public class SyncDispatcher : IDisposable
{
    private static object _lock = new object();
    private static Dictionary<object, SyncDispatcher> _container = new Dictionary<object, SyncDispatcher>();

    private AutoResetEvent _syncEvent = new AutoResetEvent(true);

    private SyncDispatcher() { }

    private void Lock()
    {
        _syncEvent.WaitOne();
    }

    public void Dispose()
    {
        _syncEvent.Set();
    }

    public static SyncDispatcher Enter(object obj)
    {
        var objDispatcher = GetSyncDispatcher(obj);
        objDispatcher.Lock();

        return objDispatcher;
    }

    private static SyncDispatcher GetSyncDispatcher(object obj)
    {
        lock (_lock)
        {
            if (!_container.ContainsKey(obj))
            {
                _container.Add(obj, new SyncDispatcher());
            }

            return _container[obj];
        }
    }
} 
```

简单测试：

```
static void Main(string[] args)
{
    new Thread(() => Execute("1", 1000, "Resource 1")).Start();
    new Thread(() => Execute("2", 200, "Resource 2")).Start();
    new Thread(() => Execute("1", 0, "Resource 1 again")).Start();  
}

static void Execute(object id, int timeout, string message)
{
    using (SyncDispatcher.Enter(id))
    {
        Thread.Sleep(timeout);

        Console.WriteLine(message);              
    }
} 
```

![在此处输入图像描述](../Images/7ce09e4c3dc98aef20f2fccb89911f1c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T23:41:59.360

在这种情况下，我使用[互斥锁](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)作为：

```
object GetCachedValue(string Key)
{
    // note here that I use the key as the name of the mutex
    // also here you need to check that the key have no invalid charater
    //   to used as mutex name.
    var mut = new Mutex(true, key);

    try
    {   
        // Wait until it is safe to enter.
        mut.WaitOne();

        // here you create your cache
        if (!Cache.ContainsKey(Key))
        {
             //long running operation to fetch the value for id
             object value = GetTheValueForId(Key);
             Cache.Add(Key, value);
        }     

        return Cache[Key];        
    }
    finally
    {
        // Release the Mutex.
        mut.ReleaseMutex();
    }   
} 
```

笔记：

*   某些字符对互斥锁名称无效（如斜杠）
*   如果您使用的每个应用程序（或 Web 池）的缓存都不同，如果我们说的是 asp.net 的缓存，那么互斥锁就是锁定计算机中的所有线程和池，在这种情况下我也使用一个静态随机整数，我将它添加到密钥中，而不是使每个密钥的锁不同，而且每个池也不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T17:17:39.023

将您的锁定移动到您的评论所在的位置。我认为您需要维护当前正在执行的*长时间运行操作*的列表，并锁定对该列表的访问，并且仅`GetValueForId`在`id`您要查找的操作不在该列表中时才执行。我会试着做点什么。

```
private List<string> m_runningCacheIds = new List<string>();

object GetCachedValue(string id)
{
    if (!Cache.ContainsKey(id))
    {
         lock (m_runningCacheIds) {
             if (m_runningCacheIds.Contains(id)) {
                 // Do something to wait until the other Get is done....
             }
             else {
                 m_runningCacheIds.Add(id);
             }
         }

         //long running operation to fetch the value for id

         object value = GetTheValueForId(id);
         Cache.Add(id, value);

         lock (m_runningCacheIds)
             m_runningCacheIds.Remove(id);
    }     
    return Cache[id];
} 
```

仍然存在线程在等待另一个线程获取值时将要做什么的问题。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-28T17:17:53.857

这不是世界上最优雅的解决方案，但我通过仔细检查和锁定解决了这个问题：

```
object GetCachedValue(string id)
{
    if (!Cache.ContainsKey(id))
    {
         lock (_staticObj)
         {
            if (!Cache.ContainsKey(id))
            {
               //long running operation to fetch the value for id
               object value = GetTheValueForId(id);
               Cache.Add(id, value);
            }
         }
    }     
    return Cache[id];
} 
```**

# asp.net-mvc - 使用 OpenId 登录时 Membership.GetUser() 返回 null

> ID：14073148
> 
> 赞同：1
> 
> 时间：2012-12-28T17:14:08.263
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-membership

我正在一个小型 ASP.net MVC4 Web 应用程序中工作，并使用外部登录选项，以允许我的用户使用他们的 Google 帐户登录。

为了将他们的个人资料与他们的数据联系起来，我需要一个唯一的标识符，并且使用用户名看起来不是一个安全的选择。

我一直在寻找几个地方，获取用户 ID 的最佳方法是 Membership.GetUser()。这适用于本地创建的用户，但不适用于外部用户，返回 null。

我该如何存档？有没有人找到解决这个问题的方法？

关于 OpenId 和 Oauth 的信息在这里：http: [//blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T05:14:50.687

如果您使用的是 SimpleMembership，则可以使用 WebSecurity 类的 .CurrentUserId 属性。这应该适用于本地帐户和 OAuth 帐户。

# salesforce - Salesforce 最小化数据存储大小的最佳实践

> ID：14073151
> 
> 赞同：2
> 
> 时间：2012-12-28T17:14:15.783
> 
> 标签：salesforce, storage, apex-code, soql

我需要向我的一个自定义对象添加一个字符串数组（大约 1-5 个字符串，长度为 10-30 个字符）。

根据[我的阅读](http://help.salesforce.com/apex/HTViewSolution?id=000003631&language=en_US)，Salesforce 将您组织中的对象总数乘以 2Kb（无论实际大小）来计算您的总数据存储量。

这让我觉得我应该只在父对象上创建额外的自定义字段，而不是创建一个新的自定义对象并将其与主从关系配对。

示例：仅出售家庭会员资格的俱乐部。父母支付固定的会员费，他们所有的孩子都可以参观俱乐部。俱乐部不在乎你有多少孩子。一个家庭有六个以上的孩子是非常罕见的。俱乐部想要跟踪孩子们的名字，但绝对没有其他任何信息。

我应该做选项1：

```
Family__c paired via master-detail to many Child__c objects 
```

这将为一个有 5 个孩子的家庭生成 6 条记录，总计 12Kb。

或选项 2：

```
Family__c has 6 custom fields called 
    Child01__c, Child02__c, Child03__c, Child04__c, Child05__c, and Child06__c 
```

这将为一个有 5 个孩子的家庭产生 1 条记录，总计 2Kb。

Salesforce 是否仅根据记录数计算数据存储？

在设计自定义对象时，我是否应该专注于旨在最小化总记录数的设计，而不是传统的关系数据库设计？（因为 1Gb 的数据限制）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T01:30:56.067

出于您指定的原因，选项 2 是更好的选择。您是正确的，Salesforce.com 将消耗您的自定义对象的每行 2kb，无论它实际包含多少字段。另外，一般来说，如果您要拥有一个像这样的一对一对象，那么您最好还是把它放在主对象的字段中；它为您节省了查找时间，并使报告和列表视图之类的事情变得更容易。

# asp.net - OnSelectedIndexChanged 方法停止运行

> ID：14073152
> 
> 赞同：1
> 
> 时间：2012-12-28T17:14:24.253
> 
> 标签：asp.net, html, post

在应用程序运行六个月后`OnSelectedIndexChanged`没有进行任何更改，该方法将不再运行。

```
<asp:RadioButtonList ID="RBL_Comentario" runat="server" Visible="False" 
    OnSelectedIndexChanged="RBL_Comentario_OSIC"
    AutoPostBack="true" CssClass="naoimprime"
>
    <asp:ListItem Value="homologar">Obfuscated</asp:ListItem>
    <asp:ListItem Value="retornar">Obfuscated</asp:ListItem>
</asp:RadioButtonList> 
```

可见性稍后会打开并按预期工作。

当我检查其中一个按钮时，页面已发布但该方法未运行。我可以在提交之前在 Firebug 中看到`__doPostBack`正确运行的 javascript 函数：`eventTarget`

![在此处输入图像描述](../Images/91f6cd5a162e8d461a99b3aa55536ef3.png)

但是 RadioButton HTML 元素`ct100$MainContent$RBL_Comentario$0`不在发布的内容中：

![在此处输入图像描述](../Images/b6b20b4eea34feb6491ab5eb75b08e88.png)

我试过 IE8、IE9 和 Firefox 10。有什么提示吗？什么可以阻止 html 元素被发布？我正在考虑对防病毒软件进行一些更改，但不知道如何调试，因为我无法禁用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:37:09.837

问题是允许用户输入一些 HTML，在这种情况下，它被输入到 HTML 文本编辑器中，并包含一些尚未发现（非常脏）的损坏的 HTML，这些 HTML 与页面的 HTML 相混淆。

一旦文本被 HTML 转义，`HttpUtility.HtmlEncode()`该方法就会被执行。这不是解决方案，因为原始 HTML 会显示给用户。

# java - TextView 可编辑 onLongClick -- 但是按下 BACK 按钮时会出现一个小问题

> ID：14073154
> 
> 赞同：0
> 
> 时间：2012-12-28T17:14:36.430
> 
> 标签：java, android

我已经搜索了几天，终于编译了足够的答案来完成我想要的。首先，这似乎是一个经常被问到但没有真正回答的问题（至少不是我正在寻找的方式）。我想我会分享我的发现，但我还有一个小问题想寻求帮助。开始：

我有一个显示分数的 TextView。它从 0 开始，在 onClick 事件中分数增加并更新 TextView（分数被跟踪为一个字节 - valScore）。

onLongClick：这就是挑战。我希望用户能够执行 LongClick 来更正/更改分数。我首先找到了一个解决方案，它使用了另一个 layout.xml 文件，其中只有一个 EditText 元素以及 OK 和 CANCEL 按钮。更改乐谱非常麻烦，因为它涉及 LongClick，然后对话框打开，然后您必须单击 EditText 元素以打开键盘，然后输入值，单击 DONE，然后单击 OK。我通过弄清楚如何在对话框打开时自动打开软件键盘来缩短它。但是，您仍然必须单击完成，然后单击确定。我不喜欢这个动作，所以我继续搜索。

几天后，我想出了一些代码，然后又想出了更多代码，并且通过大量的游戏/黑客攻击，我想出了以下解决方案：

```
 // set the onLongClickListener for tvScoreHome
    tvScoreHome.setOnLongClickListener(new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {
            tvScoreHome.setInputType( InputType.TYPE_CLASS_NUMBER );
            tvScoreHome.setFocusable(true);
            tvScoreHome.setFocusableInTouchMode( true );
            tvScoreHome.requestFocus();

            InputMethodManager imm = (InputMethodManager) context.getSystemService(Service.INPUT_METHOD_SERVICE);
            imm.showSoftInput(tvScoreHome, InputMethodManager.SHOW_FORCED);

            tvScoreHome.setText("");

            tvScoreHome.setOnEditorActionListener( new TextView.OnEditorActionListener() {

                @Override
                public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                    if (actionId == EditorInfo.IME_ACTION_DONE) {
                        valScoreHome = Byte.valueOf( tvScoreHome.getText().toString() );

                        // This part will hide the keyboard after input
                        InputMethodManager imm = (InputMethodManager) context.getSystemService(Service.INPUT_METHOD_SERVICE);
                        imm.hideSoftInputFromWindow(v.getWindowToken(), 0);

                        tvScoreHome.setFocusable( false );
                        tvScoreHome.setFocusableInTouchMode( false );
                        tvScoreHome.setText( Byte.toString(valScoreHome) );

                        return true;
                    }

                    return false;
                }

            });

            return true;
        }
    }); 
```

这完全符合我的要求。用户执行 LongClick 键盘打开，用户输入新值并单击 DONE。TextView 已更新，效果很好！

如果用户改变主意并点击设备上的“返回”按钮，就会出现问题。键盘关闭（好），但焦点仍保留在 TextView 上，而不是像按下 DONE 按钮时那样移除焦点。因此，如果您在每次单击后取消更改，导致键盘再次打开而不是仅仅增加分数 - 直到您实际在键盘中键入一个值并单击完成（然后常规行为再次接管。我需要如果按下 BACK 按钮，则 setFocusableInTouchMode 为 FALSE。

另一个问题是 setText() 方法会被执行，即使在输入了不同的值时按下了 BACK 按钮。即使 valScoreHome 没有更新，TextView 也会发生变化。在下一次增量时，它会再次变为正确的数字，但如果按下 BACK 按钮，则 setText() 不应执行。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:21:06.690

这两个问题都可以通过子类化来处理`TextView`。

关闭键盘的后退按钮按下由覆盖处理`onKeyPreIme`。

为了避免在用户关闭键盘时更新文本，分数值保存在变量`mScore`中，但`TextView`前提是当前不可聚焦。这意味着，`TextView`“记住”*不是*由用户输入的分数的当前值。当用户关闭键盘时，文本被设置回保存的值。

```
public class ScoreTextView extends TextView {
    private CharSequence mScore;

    public ScoreTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void setText(CharSequence text, BufferType type) {
        if (!isFocusable()) {
            mScore = text;
        }
        super.setText(text, type);
    }

    @Override
    public boolean onKeyPreIme(int keyCode, KeyEvent event) {
        if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {
            setFocusable(false);
            setFocusableInTouchMode(false);
            setText(mScore);
        }
        return super.onKeyPreIme(keyCode, event);
    }
} 
```

# php - Codeigniter 会话和分片

> ID：14073161
> 
> 赞同：1
> 
> 时间：2012-12-28T17:15:10.743
> 
> 标签：php, codeigniter, session, sharding

我们在正在分片的应用程序中使用 Codeigniter。这涉及跨用户 ID 拆分数据库。分片数据库中有两种表 - 一种是按用户 ID 分片的，因此数据在多个分片中均匀分布，另一种是全局的，其中数据在所有分片之间复制。我们当然也是负载平衡的，所以使用默认的 php 会话是行不通的。

我们喜欢 CI 会话数据库的安全性，但我们不能对它进行分片，我们将严重打击该表，并且它将在所有分片中来回疯狂地复制。这不是一个好情况。我们的负载测试表明 ci_sessions 表已经是一个痛点。

我们有几个策略来处理它。第一，因为我们将 propel 用于 ORM，我们可以轻松地将使用 CI 数据库访问层的 ci_sessions 拆分为它自己的数据库。如有必要，我们甚至可以对那个进行分片。

我想知道人们是否会提出其他替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:47:47.093

不使用 db 会话或 html5 会话/本地存储怎么办？:)

或使用 cookie 设置自定义变量或 ID 或域路径？

无论如何，这取决于您需要为每个用户提供多少会话/cookie 大小，确保 db 将保证更多空间和更好的安全性。

无论如何我都喜欢 mongodb：D [https://github.com/sepehr/ci-mongodb-session](https://github.com/sepehr/ci-mongodb-session)

# c - Ubuntu 上的“__thread”

> ID：14073168
> 
> 赞同：0
> 
> 时间：2012-12-28T17:15:43.017
> 
> 标签：c, multithreading

*   嗨，我正在使用 C 库对机器人进行编程。在阅读代码时，我遇到了“_*线程”这个术语，我不知道它是什么意思。我试图搜索项目以查看“_thread”上是否有任何定义*，但这对我来说没有意义。我猜下面的代码可能与我的问题有关。

我的问题是从“static __thread Thread* threadData;”这一行开始。和“__thread AssertFramework::Thread* AssertFramework::threadData = 0;”，你能猜到“__thread”是什么意思吗？它是一种类型吗？特殊函数的名称？指向线程的指针？？？

```
#include <sys/mman.h>
#include <fcntl.h>
#include <unistd.h>
#include <pthread.h>
#include <cstring>
...
class AssertFramework
{
public:
  struct Line
  {
    char file[128];
    int line;
    char message[128];
  };

  struct Track
  {
    Line line[16];
    int currentLine;
    bool active;
  };

  struct Thread
  {
    char name[32];
    Track track[2];
  };

  struct Data
  {
    Thread thread[2];
    int currentThread;
  };

  static pthread_mutex_t mutex;
  static __thread Thread* threadData;

  int fd;
  Data* data;

  AssertFramework() : fd(-1), data((Data*)MAP_FAILED) {}

  ~AssertFramework()
  {
    if(data != MAP_FAILED)
      munmap(data, sizeof(Data));
    if(fd != -1)
      close(fd);
  }

  bool init(bool reset)
  {
    if(data != MAP_FAILED)
      return true;

    fd = shm_open("/bhuman_assert", O_CREAT | O_RDWR, S_IRUSR | S_IWUSR);
    if(fd == -1)
      return false;

    if(ftruncate(fd, sizeof(Data)) == -1 ||
       (data = (Data*)mmap(NULL, sizeof(Data), PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0)) == MAP_FAILED)
    {
      close(fd);
      fd = -1;
      return false;
    }

    if(reset)
      memset(data, 0, sizeof(Data));

    return true;
  }

} assertFramework;

pthread_mutex_t AssertFramework::mutex = PTHREAD_MUTEX_INITIALIZER;
__thread AssertFramework::Thread* AssertFramework::threadData = 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:45:43.963

那是 gcc 特定的[Thread-Local Storage](http://gcc.gnu.org/onlinedocs/gcc-3.3.1/gcc/Thread-Local.html)。请注意，C11 添加`_Thread_local`和 C++11 添加`thread_local`作为支持线程本地数据的标准方式。

# c++ - 为什么旧的小部件没有被删除？

> ID：14073169
> 
> 赞同：1
> 
> 时间：2012-12-28T17:15:45.000
> 
> 标签：c++, qt, user-interface

由于 mouseEvent，我希望红色和蓝色小部件在每次点击时切换位置。相反，红色切换到蓝色，然后它永远不会切换回来，为什么？

```
Frame *red = NULL;
Frame *blue = NULL;
bool isRed = true;

Frame::Frame(QWidget *parent) :
    QFrame(parent)
{
}

Frame::~Frame(){
    printf("deleted.\n");
    fflush(0);
}
void QLayout_clear(QLayout* layout, bool deleteWidgets){
    QLayoutItem* item;
    QLayout* childLayout;
    while ((item = layout->takeAt(0)) != NULL){
        QWidget* widget = item->widget();
        if (widget != NULL){
            layout->removeWidget(widget);
            if (deleteWidgets){
                delete widget;
            }
        } else if (childLayout = item->layout()){
            QLayout_clear(childLayout, deleteWidgets);
        }

        //delete item;
    }
}

Widget::Widget(QWidget *parent)
    : QWidget(parent)
{
    QVBoxLayout *layout = new QVBoxLayout;
    this->setLayout(layout);

    red = new Frame;
    red->setFixedSize(100,100);
    red->setStyleSheet("background-color:red");

    blue = new Frame;
    blue->setFixedSize(100,100);
    blue->setStyleSheet("background-color:blue");

    layout->addWidget(red);
}

void Widget::mouseReleaseEvent(QMouseEvent *){
    printf("clicked.\n");
    fflush(0);
    QVBoxLayout *layout = (QVBoxLayout *)this->layout();
    if (1){ //it doesnt matter if this is 1 or 0
        delete layout;
        layout = new QVBoxLayout;
        this->setLayout(layout);
    } else {
        QLayout_clear(layout, false);
    }
    if (isRed){
        layout->addWidget(blue);
        isRed = false;
    } else {
        layout->addWidget(red);
        isRed = true;
    }
}
```

注意：这里我使用一个简单的 QFrame 来切换小部件，在我的应用程序中，小部件要复杂得多，每次我想交换时我都无法重新创建它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:37:51.700

我认为从性能的角度来看，每次要切换帧时删除和重新创建图层并不是一个好习惯，将两个帧都添加到图层然后设置可见的唯一帧会更容易出现。此外，布尔 isRed 不是必需的，因为有关可见性的信息包含在每个帧本身中......

试试这个：

```
QFrame *red = NULL;
QFrame *blue = NULL;

Widget::Widget(QWidget *parent)
    : QWidget(parent)
{
    QVBoxLayout *layout = new QVBoxLayout(this);

    red = new QFrame(this);
    red->setFixedSize(100,100);
    red->setStyleSheet("background-color:red");
    red->setHidden(false);

    blue = new QFrame(this);
    blue->setFixedSize(100,100);
    blue->setStyleSheet("background-color:blue");
    blue->setHidden(true);

    layout->addWidget(red);
    layout->addWidget(blue);
    this->setLayout(layout);
}

void Widget::mouseReleaseEvent(QMouseEvent *){
    printf("clicked.\n");
    fflush(0);
    red->setHidden(!red->isHidden());
    blue->setHidden(!blue->isHidden());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:38:08.227

布局破坏了它的孩子。因为`addWidget`拥有所有权，所以`delete layout`也会删除红色和蓝色小部件。

# twitter - 这个 Twitter API 脚本需要一分钟才能加载

> ID：14073171
> 
> 赞同：0
> 
> 时间：2012-12-28T17:15:46.560
> 
> 标签：twitter, simplexml

我正在使用一个非常简单的 Twitter PHP 脚本来获取最近的 2 条推文，但有时加载需要一分钟以上。这段代码没有优化吗？

```
 <?php
        function getTwitterStatus($userid){
        $url = "https://api.twitter.com/1/statuses/user_timeline/$userid.xml?count=2&include_rts=1callback=?";

        $xml = simplexml_load_file($url) or die("could not connect");

               foreach($xml->status as $status){
               $text = $status->text;
               }
               echo $text;
         }
     getTwitterStatus("BillGates",1);?> 
```

# asp.net-web-api - ASP.Net Web API 自定义路由不起作用

> ID：14073172
> 
> 赞同：0
> 
> 时间：2012-12-28T17:15:46.483
> 
> 标签：asp.net-web-api

我在 PersonController 类中有以下功能

```
 [HttpGet]
    [ActionName("GetBloggersNotFollowed")]
    public IQueryable<object> GetBloggersNotFollowed(int companyId)
    {
        return Uow.People.GetPeople().Select(p => new { p.Email, p.FirstName, p.LastName, p.PhoneNumber, p.Type, p.UserName, p.Country, p.Id });
    } 
```

它用于检索人员列表。

我这样称呼这个函数

```
$.ajax({ 
   url: "/api/person/GetBloggersNotFollowed/1" 
}).success(function (people) { 
     PersonModule.GetPeople(people); 
}); 
```

我已经在我的`WebApiConfig.cs`

```
config.Routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

当我尝试在浏览器中调用路由时出现错误

```
<Error>
 <Message>
  No HTTP resource was found that matches the request URI 'http://localhost:1045/api/person/GetBloggersNotFollowed/1'.
  </Message>
  <MessageDetail>
       No action was found on the controller 'Person' that matches the request.
  </MessageDetail>
</Error> 
```

我不知道我错了。任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:19:58.417

参数名称对路由匹配很重要。

`id`您已在路由中命名参数，但方法将其命名为`companyId`.

`{id}`将路由更改为或`{companyId}`将`companyId`参数更改为`id`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:25:01.917

将您的路线替换为此路线：

```
config.Routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{companyId}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

这个答案补充了马克琼斯的答案。

# android - 如何在 SQLite 中迭代文本字符串？

> ID：14073173
> 
> 赞同：2
> 
> 时间：2012-12-28T17:15:49.153
> 
> 标签：android, sqlite

我不是数据库专家，但我必须在我刚刚创建的 Android 新应用程序中处理一个，其中包括 SQLite。我有 2 张桌子，我们称它们为*Words*和*Chars*。*单词*主要记录用户输入的单词，如字典。*Chars*旨在记录添加到*Words*表中的单词中包含的任何新单个字符，并计算任何字符包含在*Words*表中的次数。

在这种情况下，我决定创建一个触发器来更新*Chars*表，每次在*Words*中添加/删除/修改一个新单词并且它似乎按预期工作，我现在的问题是，我应该如何迭代新输入的任何字符单词？我发现 SQL 中有一个 FOR .. IN .. LOOP 语句，但据我所知，它不适用于 SQLite。有什么建议吗？

这是我为从头开始生成数据库而创建的脚本，但它并不完整，因为它没有记录任何字符出现的时间，而只是记录了它们。此外，它还抱怨触发器定义中的“FOR”关键字。

```
CREATE TABLE Words (id_word INTEGER PRIMARY KEY AUTOINCREMENT, meaning TEXT NOT NULL);
CREATE TABLE Chars (id_char INTEGER PRIMARY KEY AUTOINCREMENT, char TEXT UNIQUE);

CREATE TRIGGER NewWord BEFORE INSERT ON Words BEGIN
  FOR i IN 1..length(NEW.meaning) LOOP
    INSERT INTO Chars (char) VALUES (SUBSTR(NEW.meaning,i,1));
  END LOOP;
END; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T14:20:20.157

作为嵌入式数据库，SQLite 没有 FOR 那样的控制流语句，但期望包含的应用程序实现所有控制逻辑。

不幸的是，Android 的内置 SQLite API 不允许注册用户定义的函数，因此您将无法在触发器中进行字符更新。

`Chars`每当插入单词时，从您的应用程序手动更新表格。

# ios - iOS - 在应用程序处于挂起状态时运行后台进程

> ID：14073175
> 
> 赞同：1
> 
> 时间：2012-12-28T17:16:06.653
> 
> 标签：ios, background-process, uilocalnotification, multitasking

我有一个应用程序，它从网页中获取字符并将它们与`UILabel`应用程序中的 a 进行比较。我想要做的是使应用程序能够继续执行此操作，即使用户已将应用程序置于暂停状态。我在网上和文档中找到的只是安排一段`UILocalNotification`时间仍处于活动状态的方法。在文档中，它声明您可以在`info.plist`. 我查看了这些类别，但我的应用程序不能真正适合其中任何一个。有没有办法让我在后台继续比较两个字符串并安排通知？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:29:43.557

iOS 并不真正以您需要的方式支持多任务处理。（即：您不能简单地在后台继续处理数据，除非您是一种非常特定类型的应用程序，例如 VOIP 服务等）否则您可能最终会被终止。

但是，一种可能的解决方案是在单独的系统（例如：与您的应用程序交互的 Web 服务器）上而不是在应用程序本身内进行这种监控。因此，您会：

1.  将所需的字符串/网页传达给您的网络服务

2.  在 Web 服务器上执行处理。

3.  如果在相关页面上找到该字符串，则向您的应用发送推送通知。

# asp.net - 自安装 VS 2012 以来，我遇到了间歇性 PlatformNotSupportedException

> ID：14073181
> 
> 赞同：4
> 
> 时间：2012-12-28T17:16:19.463
> 
> 标签：asp.net, iis, pipeline, integrated-pipeline-mode

我最近安装了 VS 2012 和 .net Framework 4.5，一切正常，只是偶尔会报错：此操作需要 IIS 集成管道模式。

我当然有托管管道模式：集成在 IIS 中。

```
protected override void OnLoad(EventArgs e)
{
    var st = new StackTrace(true);
    string message = String.Format("Redirect to url: {0}, Stack Trace:\r\n{1}", url, st);
    Trace.TraceInformation(message);
}

protected void Application_Start(Object sender, EventArgs e)
{
    Trace.Listeners.Add(new OurAspTraceListener(Context));
} 
```

自定义跟踪侦听器非常简单。

```
private class OurAspTraceListener : TraceListener
{
    private readonly HttpContext _context;
        public OurAspTraceListener(HttpContext context)
        {
            _context = context;
            _context.Trace.IsEnabled = true;
        }

        public override void Write(string message)
        {
            _context.Trace.Write(message); // it's throwing here.
        }

        public override void WriteLine(string message)
        {
            _context.Trace.Write(message);
        }
    } 
```

这真的很奇怪，因为如果我只是点击刷新它会继续没有任何问题。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T08:15:19.447

你有哪个版本的 IIS？如果您使用 IIS 7，请确保将应用程序池类型设置为集成而不是经典。集成管道模式是 IIS 7 特定的。

# jquery - 用于菜单 wp li ul 的 jquery 选择器

> ID：14073184
> 
> 赞同：0
> 
> 时间：2012-12-28T17:16:31.737
> 
> 标签：jquery, menu, html-lists

我试着用wordpress 生成的li ul 结构在菜单中制作一些jquery。我想选择 li 的第一行而不是嵌套的行（id 喜欢对它们做一些不同的事情），但我也一直在触发嵌套的 .. 奇怪的是它确实只为 li 提供了一个边框一个 ul。（并且最后一个嵌套的 li 没有 ul 在那里..）我尝试使用 .has 选择器，父>子但没有工作。

```
 $('#hmenu li ul').parent().mouseenter( function() {
        $('#hmenu li ul').hide();
                    $(this.children).slideDown('fast').css({ color: 'red'});
                    alert('bingo!');
            stopPropagation();
  });

  <div id="hmenu">
      <?php wp_list_pages('title_li=&sort_order=desc'); ?>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:01:15.820

我不确定我是否正确理解了您的问题 - 但这是一种仅选择`<li>`包含 -Element 的 -items 的方法`<ul>`。

```
 $("#hmenu ul li").find("ul").parent().doWhateverYouWantWithThisElement(); 
```

说明：

选择 -container 中的所有`<li>`内容，`<ul>`然后在这些's 中`#hmenu`寻找-element找到后返回父级，现在做你需要做的事情。`<ul>``<li>`

我在这里做了一个 jsfiddle [http://jsfiddle.net/fma94/](http://jsfiddle.net/fma94/)来解释这种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:20:26.843

你的解释有点混乱。你试过[jsfiddle.net](http://jsfiddle.net)吗？

您应该在此处编写示例代码并在此处发布指向它的链接，以便每个人都可以理解您的意思。请尝试明确您要选择哪些元素以及您希望对它们执行哪些操作。

# ruby - 如何在 Ruby 1.8.7 中将 Microsoft Office“智能”或“卷曲”引号/撇号转换为 ASCII 或 UTF-8“直”引号/撇号？

> ID：14073186
> 
> 赞同：2
> 
> 时间：2012-12-28T17:16:55.790
> 
> 标签：ruby, character-encoding, iconv, apostrophe, ruby-1.8.7

我正在使用（并坚持使用）以下版本的 Ruby：

```
ruby 1.8.7 (2012-06-29 patchlevel 370) [x86_64-linux] 
```

我尝试了很多谷歌搜索，但我找不到我的问题的有效答案。我正在导入一个 CSV 文件，该文件通常来自用户的 Microsoft Excel 电子表格。我对 CSV 部分没有任何问题，但我不知道如何处理 MS“智能”引号。我的测试输入文件是 DOS 格式并包含以下行：

珍妮奥尼尔

O'Neill 的 O 和 N 之间有一个 MS 撇号，在我的文本编辑器中显示为“问号菱形”。当我尝试以下代码时，撇号会被删除：

```
# replace Microsoft Office 'smart' quotes

# gem to detect character encoding
require 'rchardet'
if name != nil
  cd = CharDet.detect(name)
  encoding = cd['encoding']
  name = Iconv.conv('UTF-8//TRANSLIT', encoding, name)
end 
```

这会产生不希望的输出：

珍妮奥尼尔

有没有办法在 Ruby 1.8.7 中编写一个正则表达式来检测卷曲的 MS 字符并用直的字符替换它们？我试过在我的正则表达式中使用十六进制代码，但我不能让它们工作。我知道 Ruby 1.8.7 在处理 1.9 的字符编码方面受到更多限制，但我坚持使用它。目前无法在此项目中升级 Ruby。

任何帮助，将不胜感激。谢谢你。

在阅读了 TinMan 建议的帖子后，我尝试使用 gsub 替换生成的 'ï¿½' 子字符串：

```
if name != nil
  name = Iconv.conv("UTF-8", "cp1252//TRANSLIT", name)
  name.gsub(/\u00ef\u00bf\u00bd/u, "'")
end 
```

唉，没有爱。它仍然产生相同的结果:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-22T15:05:08.783

我在 PHP 中做到了这一点，并且效果很好。也许您可以尝试 Ruby 等价物（如果存在）？

```
$text = str_replace('�', '"', $text); 
```

为了考虑 MySQL 的撇号和转义，我不得不将我的代码更新为此......

```
$bad_symbols = array('�t', '�s', '�ll', '�ve', '�d', '�re', '� ', ' �');
$replacements_for_bad_symbols = array("\'t", "\'s", "\'ll", "\'ve", "\'d", "\'re", '" ', ' "');
$text = str_replace($bad_symbols, $replacements_for_bad_symbols, $text); 
```

# html - 居中对齐 HTML 表格

> ID：14073188
> 
> 赞同：55
> 
> 时间：2012-12-28T17:17:04.067
> 
> 标签：html, html-table, alignment

在我目前正在处理的页面上，我似乎无法将第一行中的图像和下方两列文本的表格居中（这两列不应超过图像的宽度）这是页面：[http](http://www.puzzles-et-jeux.com/fr/page/minipuzzles.html) ://www.puzzles-et-jeux.com/fr/page/minipuzzles.html 我花了很多时间试图解决这个问题。我想将它保留在 HTML 中，因为我必须赶时间，还因为我必须为每个图像创建 20 个具有不同宽度 /+ 布局的页面。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-12-28T17:52:44.153

对于您的设计，通常使用 div 而不是表格。这样，您的布局将通过适当的样式更易于维护和更改。确实需要一些时间来适应，但从长远来看，它会帮助你很多，你会学到很多关于造型如何工作的知识。但是，我将为您提供手头问题的解决方案。

在您的样式表中，您将边距和填充设置为 0 像素。这会覆盖您的`align="center"`属性。我建议您将这些设置从您的 CSS 中取出，因为您通常不希望所有元素都以这种方式受到影响。如果您已经知道 CSS 中发生了什么，并且希望保持这种状态，那么您必须对表格应用样式以覆盖之前的设置。您可以给表格 a`class`或者您可以将样式与 HTML 内联。以下是两个选项：

1.  有一个类：

    `<table class="centerTable"></table>`

在您的 style.css 文件中，您将拥有如下内容：

```
.centerTable { margin: 0px auto; } 
```

2.  与您的 HTML 内联：

    `<table style="margin: 0px auto;"></table>`

如果您决定消除设置为 0px 的边距和填充，那么您可以保留`align="center"`您`<td>`希望对齐的任何列的标签。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-10-30T20:00:10.493

```
table
{ 
margin-left: auto;
margin-right: auto;
} 
```

这肯定会奏效。干杯

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-28T17:24:33.260

试试这个 -

```
<table align="center" style="margin: 0px auto;"></table> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-27T09:32:03.400

给它一个**中心类**

然后在 CSS

```
.center {
  margin-left: auto;
  margin-right: auto;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-12-03T09:45:12.343

```
<table align="center"></table> 
```

这对我有用。

# sql - 这可以简化并因此优化吗

> ID：14073190
> 
> 赞同：1
> 
> 时间：2012-12-28T17:17:27.033
> 
> 标签：sql, sql-server-2005

我们有这个数据集：

```
CREATE TABLE #Changes 
    (
    [GUID] varchar(250), 
    Value numeric(36,6), 
    DocumentNumber varchar(250), 
    Approved bit, 
    ApprovedDate varchar(250), 
    IssuedDate varchar(250), 
    Category varchar(250)
    );
INSERT INTO #Changes 
    (
    [GUID], 
    DocumentNumber, 
    Approved, 
    Value, 
    ApprovedDate, 
    IssuedDate, 
    Category
    ) 
 values
 ('4F7253A4E1B3D841B84D4A82B4F0E7A2', 11, 0, 18526.7, '', '2009-03-31T05:00:00Z', 'UNKNOWN'),
 ('D97537852E927B499C21C14F3D13CF06', 1, 0, 0, '', '2008-11-10T05:00:00Z', 'UNKNOWN'),
 ('857DADB463807345918729B33399B36F', 2, 0, 0, '', '2008-11-10T05:00:00Z', 'UNKNOWN'),
 ('7989D242E05AFF4FB5EE99114822BF80', 21, 0, 50112, '', '2009-07-22T05:00:00Z', 'UNKNOWN'),
 ('16A0AB27FD3A784D9E0A14406C7683E0', 3, 0, 0, '', '2009-01-15T05:00:00Z', 'UNKNOWN'),
 ('D3D7B1C306D38C438FC3DEDFCB57D411', 131, 0, 17204, '', '2010-12-14T05:00:00Z', 'UNKNOWN'),
 ('2C89D974DDF86743A0D7D62B385FBDEF', 147, 0, 0, '', '2010-12-01T05:00:00Z', 'UNKNOWN'),
 ('F371D4237C837D448824697EB0162905', 198, 0, 0, '', '2011-01-10T05:00:00Z', 'UNKNOWN'),
  ('433D64C871AE4E46A0E1BFCE2BB69BA7', 364, 0, 0, '', '2011-11-14T05:00:00Z', 'UNKNOWN'),
  ('808496DBDE76CB4F911396BB817724F3', 352, 0, 0, '', '2011-10-17T05:00:00Z', 'UNKNOWN'),
  ('9545DEF1666B5F4D8626F19F8E9E9333', 418, 0, 10948, '', '2012-03-07T22:19:18Z', 'UNKNOWN'),
  ('244D7D89B79E0F4E91100E4ADB300656', 439, 0, 50945, '', '2012-04-27T20:33:26Z', 'UNKNOWN'),
  ('115A427BBB1D2C43BA11D9E5875FAA2C', 465, 0, 480049, '', '2012-07-20T16:17:54Z', 'UNKNOWN'),
  ('3A2271EFCC767E4CA40017E68802F10C', 478, 0, 54298, '', '2012-08-01T17:26:38Z', 'UNKNOWN'),
  ('99D0EFC5A9F1AA498DB1A4CDF294129B', 490, 0, 11500, '', '2012-09-18T14:23:13Z', 'ALTER'),
  ('38B2E3A379C5084998E6A84D496AC555', 491, 0, 26088, '', '2012-09-25T06:00:00Z', 'ALTER'),
  ('8902831C8FAD4941841EE2847656BDAF', 494, 0, -825, '', '2012-10-16T14:20:06Z', 'ALTER'),
  ('7AFDB08A002AE54A8DE7699855AEBE30', 495, 0, 221, '', '2012-10-16T14:21:27Z', 'ALTER'),
  ('38A2CCEF5F0B294AA8B8752F461D121D', 496, 0, 0, '', '2012-12-24T01:11:15Z', 'ALTER'),
  ('24CCD5CE409E674593108CBD816DBCCE', 486, 1, -825, '2012-10-01T21:42:52Z', '2012-09-17T20:42:12Z', 'ALTER'),
  ('C7458704E36C8F448C1F3A485EB08304', 485, 1, 10000, '2012-10-01T21:25:56Z', '2012-09-11T21:29:44Z', 'ALTER'),
  ('B511953AE6FB6446A63AA83C159057BE', 487, 1, 82170, '2012-10-01T21:42:51Z', '2012-09-17T20:46:41Z', 'ALTER'),
  ('EC977BC304A971439D04BB9DF4D8188A',488, 1, 15500, '2012-10-01T20:58:15Z', '2012-09-18T06:00:00Z', 'ALTER'),
  ('D9B1F0C0A8E490448697B783639E09E0', 489, 1, 11503, '2012-10-01T21:42:50Z', '2012-09-18T13:56:18Z', 'ALTER'),
  ('698BB6D65832D146A49727C717A591A1', 492, 1, 2787, '2012-10-01T21:10:06Z', '2012-09-25T15:55:02Z', 'ALTER'),
  ('155D4F2B1854B34FABCDE8CF20F1E44C', 493, 1, 12162, '2012-10-01T21:10:06Z', '2012-09-25T16:04:40Z', 'ALTER'),
  ('137C9BF2B1EFD34B8831ADA70C5F9431', 1, 1, 369543, '2011-12-08T13:41:04Z', '1899-12-30T05:00:00Z', 'DRAW'),
  ('7F29FC7114BD10468AE92A047345B5DB', 2, 1, 7258, '2011-12-08T13:41:04Z', '2011-10-20T05:00:00Z', 'DRAW'),
  ('6B66D8EAD88E6E4FA29401CD524B978A', 3, 1, 979321, '2011-12-08T13:41:04Z', '2011-11-08T05:00:00Z', 'DRAW'),
  ('7F393B712B213041A6DD211E04F6DCA6', 4, 1, 14998, '2012-04-20T15:16:21Z', '2012-04-18T21:07:07Z', 'DRAW'),
  ('2255F84E7C7DA04389765724872D6413', 5, 1, 58926, '2012-04-20T15:16:23Z', '2012-04-18T21:13:15Z', 'DRAW'),
  ('DB4A5588DEB9F34C868F7AD1CB13ACC3', 6, 1, 13232, '2012-04-20T15:16:05Z', '2012-04-18T21:17:00Z', 'DRAW'),
  ('B5231AE40F8E7D41BA0A4D09614CBDF9', 7, 1, 10176, '2012-04-20T15:16:25Z', '2012-04-18T21:19:41Z', 'DRAW'),
  ('2362D54FCC53E447AC7D8289EA89FD05', 8, 1, 17556, '2012-04-20T15:16:04Z', '2012-04-18T21:21:20Z', 'DRAW'),
  ('6ED4565CA041704B8D006EDA4A1E4CF9', 9, 1, 399639, '2012-05-30T16:32:43Z', '2012-05-17T06:00:00Z', 'DRAW'),
  ('B21BE07E3E42C2418C70AD17862D3AE1', 10, 1, 6231, '2012-08-16T16:55:00Z', '2012-08-02T16:02:03Z', 'DRAW'),
  ('8FD252A50137754A98698F93AC9B01A7', 11, 1, 629, '2012-08-16T16:54:58Z', '2012-08-02T16:07:57Z', 'DRAW'),
  ('1B9AFD2C20362F48A486E8A535B29AF5', 20, 1, -113810, '2011-12-13T17:15:53Z', '2010-02-10T05:00:00Z', 'UNKNOWN'); 
```

这是查询：

```
SELECT 
    a.[GUID], 
    [positive_previous_total] = SUM(CASE WHEN b.Value>0 THEN b.Value ELSE 0 END), 
    [negative_previous_total] = SUM(CASE WHEN b.Value<0 THEN b.Value ELSE 0 END) 
FROM 
    #Changes a 
    LEFT OUTER JOIN #Changes b 
        ON 
        b.[GUID]    <> a.[GUID] AND
        b.Approved  = a.Approved AND
        b.Category  = a.Category 
        AND 
        (
        ISNULL(SUBSTRING(CASE WHEN b.Approved=1 THEN b.ApprovedDate ELSE b.IssuedDate END, 1, 10), '0000-00-00') 
          < ISNULL(SUBSTRING(CASE WHEN a.Approved=1 THEN a.ApprovedDate ELSE a.IssuedDate END, 1, 10), '0000-00-00')
        OR 
            (
            ISNULL(SUBSTRING(CASE WHEN b.Approved=1 THEN b.ApprovedDate ELSE b.IssuedDate END, 1, 10), '0000-00-00')
              =ISNULL(SUBSTRING(CASE WHEN a.Approved=1 THEN a.ApprovedDate ELSE a.IssuedDate END, 1, 10), '0000-00-00') 
            AND 
            b.DocumentNumber<a.DocumentNumber
            )
        ) 
GROUP BY a.[GUID] 
```

这个记录数量很快，但是当扩展到 700 条记录时，它需要几秒钟，我们希望将其降低到 0.5 秒。

**[这是一个关于 SQL FIDDLE 的架构和脚本的实例](http://sqlfiddle.com/#!3/4fe40/2)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T17:49:13.047

就个人而言，我会使用[计算列](http://msdn.microsoft.com/en-gb/library/ms191250(v=sql.105).aspx)来消除查询中的复杂性。

例如：你的表定义可能变成（注意我在这里也更正了数据类型）：

```
CREATE TABLE #Changes 
(
    [GUID] varchar(250), 
    Value numeric(36,6), 
    DocumentNumber varchar(250), 
    Approved numeric(36,6), -- Is there any reason this is not a BIT field?
    ApprovedDate datetime,
    ApprovedDate_NoTime AS (CASE WHEN ApprovedDate IS NULL THEN CONVERT(DATETIME, '0000-00-00') ELSE DATEADD(DAY, DATEDIFF(DAY, 0, ApprovedDate), 0) END) PERSISTED
    IssuedDate datetime, 
    IssuedDate_NoTime AS (CASE WHEN IssuedDate IS NULL THEN CONVERT(DATETIME, '0000-00-00') ELSE DATEADD(DAY, DATEDIFF(DAY, 0, IssuedDate), 0) END) PERSISTED
    ApprovedOrIssuedDate AS (CASE WHEN Approved = 1 THEN ApprovedDate_NoTime ELSE IssuedDate_NoTime) PERSISTED,
    Category varchar(250)
); 
```

然后，您可以将查询重写为：

```
SELECT 
    a.[GUID], 
    [positive_previous_total] = SUM(CASE WHEN b.Value>0 THEN b.Value ELSE 0 END), 
    [negative_previous_total] = SUM(CASE WHEN b.Value<0 THEN b.Value ELSE 0 END) 
FROM 
    #Changes a 
    LEFT OUTER JOIN #Changes b 
        ON 
        b.[GUID]    <> a.[GUID] AND
        b.Approved  = a.Approved AND
        b.Category  = a.Category 
        AND 
        (
            b.ApprovedOrIssuedDate < a.ApprovedOrIssuedDate
            OR 
            (
                b.ApprovedOrIssuedDate = a.ApprovedOrIssuedDate
                AND 
                b.DocumentNumber < a.DocumentNumber
            )
        ) 
GROUP BY a.[GUID] 
```

有什么理由为什么`Approved`不是位字段？我已将数据类型更改为`datetime`并为您提供了一列以将日期的时间部分归零。此外，未经测试，但你明白了。

我也会读[这个](http://sblackler.net/2012/12/13/Notes_on_Sargability/)和[这个](https://stackoverflow.com/questions/133081/most-efficient-way-in-sql-server-to-get-date-from-datetime)（假设你想在比较中忽略日期时间的时间部分）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T17:40:33.463

好的，有几件事：

**1\. 永远不要*将*日期存储为字符串。**

除非这确实是您数据库中的#temporary 表（在这种情况下还有其他一些问题/问题），否则您绝对不应该将真实日期存储为字符串。这只会导致未来的问题。

在 30 多年的咨询中，我已经看到了数百个将日期存储为字符串的数据库，其中每一个数据库中都有无效的日期字符串。

**2\. 始终为您的表添加适当的键和索引。**

这甚至适用于#Temp 表，除非它们很小或者您确定它们不会有帮助。

在您的情况下，您可能应该在 GUID 上有一个唯一/主键。为了提高性能，您应该在 {GUID, Approved, Category}（可能是集群）上有一个索引。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T17:43:44.670

我尝试了一些东西 - 这是独家新闻：

*   我在临时表的新主键列上添加了一个**聚集索引**`INT IDENTITY`- 是的，这似乎适得其反，但在许多情况下，实际上并非如此；它确实加快了很多事情 - 甚至插入和删除！请参阅Kimberly Tripp 的[The Clustered Index Debate Continues...](http://www.sqlskills.com/blogs/kimberly/post/the-clustered-index-debate-continues.aspx)了解为什么会这样

*   我还将`ApprovedDate`and`IssuedDate`设为实际`DATETIME`数据类型 - 而不是 varchars。如果它感觉像一个日期，看起来像一个日期，嘎嘎声像一个日期 - 那么它就是**一个日期**，应该这样存储！

    请参阅[要改掉的坏习惯：选择错误的数据类型](https://sqlblog.org/2009/10/12/bad-habits-to-kick-choosing-the-wrong-data-type)——您应该始终使用最合适的数据类型——毕竟这就是它们的目的！

*   我在用作外键的列上添加了一个索引`JOIN`以加快查询速度

*   我添加了一个**计算列，***如果它被批准，则`ApprovedDate``IssuedDate`*封装整个，使用*，否则将*逻辑放在一个地方 - 使查询**更**易于阅读！由于这是一个伪`DATE`（时间部分归零），这基本上会处理您在查询中（重复）拥有的所有丑陋`CONVERT`/`ISNULL`和`SUBSTRING`语句。

所以这是我创建临时表的更改脚本

```
CREATE TABLE #Changes 
    (
    ID INT IDENTITY(1,1) NOT NULL PRIMARY KEY CLUSTERED,
    [GUID] varchar(250), 
    Value numeric(36,6), 
    DocumentNumber varchar(250), 
    Approved numeric(36,6), 
    ApprovedDate DATETIME,
    IssuedDate DATETIME, 
    Category varchar(250),

    ApprovedOrIssuedDate AS CASE 
                               WHEN Approved = 1 
                               THEN DATEADD(DAY, 0, DATEDIFF(DAY, 0, ApprovedDate))
                               ELSE DATEADD(DAY, 0, DATEDIFF(DAY, 0, IssuedDate))
                            END PERSISTED
    );

CREATE NONCLUSTERED INDEX IX_Index01 ON #Changes([GUID], Approved, Category) 
                                     INCLUDE(DocumentNumber, ApprovedDate, IssuedDate) 
```

然后您的查询变得更加容易：

```
SELECT 
    a.[GUID], 
    [positive_previous_total] = SUM(CASE WHEN b.Value > 0 THEN b.Value ELSE 0 END), 
    [negative_previous_total] = SUM(CASE WHEN b.Value < 0 THEN b.Value ELSE 0 END) 
FROM 
    #Changes a 
LEFT OUTER JOIN 
    #Changes b ON b.[GUID] <> a.[GUID] 
               AND b.Approved  = a.Approved 
               AND b.Category  = a.Category 
               AND 
                  (b.ApprovedOrIssuedDate < a.ApprovedOrISsuedDate
                   OR 
                   (b.ApprovedOrIssuedDate = a.ApprovedOrIssuedDate
                    AND b.DocumentNumber < a.DocumentNumber)
                  ) 
GROUP BY 
     a.[GUID] 
```

在我的测量中，我的查询成本有了很好的显着改善（从 0.022 下降到大约 0.0146）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-28T17:34:41.170

从根本上说，您正在尝试进行累计。在 2012 之前的 SQL Server 版本中，您必须按照您的操作方式使用连接（或相关的 subuqery，它应该具有类似的执行计划）。我将您的查询简化为：

```
SELECT a.[GUID], 
       [positive_previous_total] = SUM(CASE WHEN b.Value>0 THEN b.Value ELSE 0 END), 
       [negative_previous_total] = SUM(CASE WHEN b.Value<0 THEN b.Value ELSE 0 END) 
FROM #Changes a LEFT OUTER JOIN
     #Changes b 
     ON b.[GUID]    <> a.[GUID] AND
         b.Approved  = a.Approved AND
         b.Category  = a.Category and
         ((b.ApprovedDate < a.ApprovedDate and a.Approved = 1) or
          (b.IssuedDate < a.IssuedDate and a.Approved <> 1)
         ) or
         ((b.ApprovedDate = a.ApprovedDate and a.Approved = 1 and b.DocumentNumber<a.DocumentNumber) or
          (b.IssuedDate = a.IssuedDate and a.Approved <> 1 and b.DocumentNumber<a.DocumentNumber)
         ) 
        ) 
GROUP BY a.[GUID] 
```

`isNULL`是不必要的。在#Change 的定义中，您应该简单地将值替换为您想要的值。另外，因为 a.Approved = b.Approved 由连接条件决定，所以不需要 case 语句。

由于您正在创建#Changes 表，因此您应该向它添加一个 DateDoc 键。这将具有日期 - 定义为 ApprovedDate 或 IssueDate 或适当的 NULL 日期 - 并在其上连接文档编号。文档编号应在左侧填充 0。日期格式应为 YYYYMMDD。

现在，您可以将 from 子句编写为：

```
FROM #Changes a LEFT OUTER JOIN
     #Changes b 
     ON b.[GUID]    <> a.[GUID] AND
         b.Approved  = a.Approved AND
         b.Category  = a.Category and
         b.datedoc < a.datedoc 
```

使用这种结构，我认为 GUID、Approved、Category 和 Datedoc 上的索引将有助于查询。我不确定最后增加价值是否会有所帮助。但是，您的数据应该适合内存，因为您没有很多行。

# javascript - 尝试使用 underscore.js 从这个 json 中提取名称

> ID：14073191
> 
> 赞同：1
> 
> 时间：2012-12-28T17:17:28.940
> 
> 标签：javascript, json, underscore.js

由于某种原因，尝试使用 underscore.js 将名称从该 json 中提取出来，但在通过结果时遇到了麻烦。我在 underscore.js 模板方面取得了一些成功，但不是像这样的 json。

```
<script type="text/html" id='usageList'>
    <table cellspacing='0' cellpadding='0' border='1'>
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
            </tr>
        </thead>
        <tbody>

            <% _.each(deals,function(item,key,list){ %>
                <% var f = item.Name; %><!-- create more variables -->
                <tr>
                    <!-- use variables -->
                    <td><%= key %></td>
                    <td class="<%= f %>"><%= item.name %> </td>
                </tr>
            <% }); %>
        </tbody>
    </table>
</script>

<div id="target"></div>

<script>

    var deals = { 
        "results" : [ 
            {
                "geometry" : {
                    "location" : {
                        "lat" : 35.2521950,
                        "lng" : -120.6917010
                    }
                },
                "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png",
                "id" : "a60236447e99ae2b2fd0cde9b912f7abd91f4e1d",
                "name" : "Costco",
                "opening_hours" : {
                    "open_now" : true
                },
                "price_level" : 2,
                "reference" : "CqQBlgAAAJukesLD8HeY7_xb-   V51usJ1nVXJjiWVT3DRYVbParEaKTO8881ULz4f2RM8nGKVOHdIdM67oujeVWFA0YW63_ySzH8O9zTPPwT7h8MijD0BsKnue1BUb_eYHvIp4bCREitCI-b7LIJP_a4UzCrxzT8UsW28KYIParQKJJNfnDMXVvM2ymsvWiRGA42qre6Rhkn7DWkuGyG3zvgZ3xKLz1wSEGl0gCL7B5GNwBSRBytKgmwaFIh1TU7nJCMMsBj04tlA87HHh3Y3",
                "types" : [
                    "department_store",
                    "health",
                    "gas_station",
                    "grocery_or_supermarket",
                    "food",
                    "store",
                    "establishment"
                ],
            "vicinity" : "1540 Froom Ranch Way, San Luis Obispo"
            }
        ]
    };

    var template = $("#usageList").html();
    $("#target").html(_.template(template,{deals:results}));

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:20:56.717

我*认为*您的模板调用不正确：

```
$("#target").html(_.template(template,{deals: deals.results})); 
```

“结果”值是“交易”全局引用的对象的属性，因此您需要以这种方式引用它。

# c# - 我可以在异常中包含带有附加信息的对象吗？

> ID：14073192
> 
> 赞同：5
> 
> 时间：2012-12-28T17:17:32.837
> 
> 标签：c#, exception

我想定义一个自定义异常，我想知道是否可以包含一个类而不是字符串作为消息。原因是我想以更灵活的结构发送额外的信息。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-28T17:20:46.577

是的。只需创建一个继承自 Exception 的类。

```
class YourException : Exception 
{
    public YourException(SpecialObject thethingYouWantIncluded) 
    {
        ExtraObject = thethingYouWantIncluded;
    }

    public SpecialObject ExtraObject { get; private set; }
} 
```

然后

```
throw new YourException(new SpecialObject()); 
```

和

```
catch (YourException ex) { /* do something with ex.ExtraObject here */ } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T17:26:17.793

是的，你可以，有点。

在 C# 中，所有异常都是类，它们是`System.Exception`从该类派生的类的实例或某个类。如果要自定义异常，只需定义一个继承自`Exception`.

在这个自定义类中，您可以添加您想要的任何其他属性、字段等：

```
public class CustomException : Exception
{
    public Object CustomThing { get; set; }
} 
```

当您将此类异常捕获到类型变量中时，`CustomException`您将可以访问您定义的所有自定义属性，就像任何其他类一样。

但是，你*不能*`Exception.Message`做的是改变它是一个字符串的事实。您的自定义消息类将具有一个`Message`属性，它将是 a `string`，您无法更改它。您将需要定义一个包含所有相关信息的自定义字符串。您可以覆盖该`Message`属性以从您的自定义属性返回信息，但它仍然需要是一个字符串：

```
public class CustomException : Exception
{
    public override string Message 
    { 
        get 
        {
            if (this.CustomThing == null) 
            {
                return base.Message;
            }
            else
            {
                return string.Format("Custom thing: {0}", this.CustomThing);
            }
        }
    }
} 
```

# jquery - 使用 jquery 加载函数填充选择选项，但查询字符串中缺少参数

> ID：14073193
> 
> 赞同：1
> 
> 时间：2012-12-28T17:17:34.667
> 
> 标签：jquery, html, select, submit, options

```
<form action="getDepartmentID" method="post">
  <div id=main>
   <select id="depList"name="depList"style="width:190px;"class="selListBox">
    <option value="0">[Please Select]</option>
    <option value="43">Information Technology</option>
    <option value="44">Costing and Budgeting</option>
    <option value="45">Supply Chain</option>
    <option value="61">Marketing</option>
    <option value="62">Financial</option>
    <option value="63">HR</option>
   </select>
  </div>
</form> 
```

在提交时，查询字符串包含带有值的参数，即**?depList=43**

* * *

当我使用**jquery .load(); 填充此列表时；**功能即

```
$('#main').load('ajax/Options.jsp'); 
```

**选项.jsp**

* * *

```
 <select id="depList"name="depList"style="width:190px;"class="selListBox">
    <option value="0">[Please Select]</option>
    <option value="43">Information Technology</option>
    <option value="44">Costing and Budgeting</option>
    <option value="45">Supply Chain</option>
    <option value="61">Marketing</option>
    <option value="62">Financial</option>
    <option value="63">HR</option>
   </select> 
```

* * *

它成功填充但是当我在选择一个选项后按下提交时，它不发送任何参数，即使我使用以下

* * *

```
$("#depList").change(function() {
$('#depList option:selected').attr('checked', 'checked');
 }); 
```

* * *

如何解决这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:35:35.243

如果您希望在提交时查询字符串中的表单信息，您需要使用 GET 而不是 POST

```
<form action="getDepartmentID" method="get"> 
```

# android - Android - 2 Timer 还是别的什么？

> ID：14073203
> 
> 赞同：1
> 
> 时间：2012-12-28T17:18:35.007
> 
> 标签：android, timer, timertask

我想编写一个小电子鸡来练习。我只是在想我应该如何处理价值观、饥饿和睡眠。我应该运行两个每 10 分钟更改一次值的计时器，然后保存它还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:32:33.740

如果您只希望 Tamagotchi 在应用程序运行时处于饥饿或困倦状态，请使用[Handler](http://developer.android.com/reference/android/os/Handler.html)和[Runnable](http://developer.android.com/reference/java/lang/Runnable.html)。这些是 Android 特定的计时器。

如果您希望 Tamagotchi 在应用程序未运行时更改状态，则需要使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)创建重复警报以启动应用程序。

# php - ajax 请求在重定向后完成

> ID：14073204
> 
> 赞同：0
> 
> 时间：2012-12-28T17:18:36.933
> 
> 标签：php, javascript, codeigniter

我的ajax请愿有问题，我的功能如下

```
function do_ajax (params, url, callback) {
    $.ajax({
        url: url,
        type: 'post',
        data: params,
        success: function (response){
            try{
                var obj = $.parseJSON(response);
                callback(obj);
            }catch(e){
                alert('Cannot connect');
            }
        },
        error: function (jqXHR, textStatus, errorThrown){
            alert('err');
            console.log(jqXHR)
            console.log(textStatus)
            console.log(errorThrown)
        }
    });
} 
```

我称之为

```
function verificar_atenciones_paciente (p) {
    progress();
    do_ajax('', '<?php echo base_url(); ?>index.php/some/where/'+p.id, callback);
}

function callback (obj) {
    var table = $('#table tbody')
    var t = false;
    table.empty();
    if (0 == obj.length){ return; }
    $(obj).each(function (key, value){
        if (value.f){
            tiene = true;
        }else{
            alert('Redirect');
            window.location.href = '<?php echo base_url(); ?>index.php/some/where_else/'+value.id;
            return;
        }
        var tr = to_row(value);
        table.append(tr)
    })
    if (tiene_fac){
        alert("Found!");
    }else{
        alert("Not Found!")
    }
    $('#list').fadeIn();
    done();
} 
```

我的问题是在`window.location.href = '<?php echo base_url(); ?>index.php/some/where_else/'+value.id;`调用重定向 () 时出现它在后台执行一些 ajax 并显示 ajax 请求 ( `alert('Cannot connect');`) 的错误。

我使用 PHP、Code Igniter、JQuery。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:38:21.750

ajax 请求绑定到行表中的单击事件。没有发布表单（`onsubmit="return false;"`）。我使用 setTimeOut 处理它，并在两秒钟后调用重定向以让 ajax 后链完成。我想问题是ajax请求被突然中断了，所以它抛出了一个异常。由于它延迟了请求，它让ajax请求正常完成，然后再进行重定向。我很想有一些其他的建议。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T17:09:38.777

您可以尝试设置

```
async: false 
```

在您的 ajax 请求中，这将导致它一直保持到请求完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:17:55.610

此页面是否返回 JSON？

```
<?php echo base_url(); ?>index.php/some/where/'+p.id 
```

如果不是，`parseJSON`可能会抛出异常。尝试返回一些 JSON

```
echo '{"f":{"test":1},"test2":1}'; 
```

应该做的伎俩。

我还会将`alert()`'s更改为 's，`console.log()`因为这样可以更轻松地使用开发人员工具查看进度。

# javascript - 如何使用 javascript 访问克隆的 svg 元素

> ID：14073209
> 
> 赞同：1
> 
> 时间：2012-12-28T17:19:05.053
> 
> 标签：javascript, svg

我在我的主 svg 文件中使用`<use xlink:href="path/to/file.svg">`了元素，以便多次克隆可重复的 svg 块。

索引.svg：

```
 <g id="menu_items" transform="translate(0,110)">
       <use xlink:href="path/to/file.svg">
       <use xlink:href="path/to/file.svg">
       <!-- 10 times -->
    </g> 
```

和 file.svg 包含：

```
<g>
   <text x="10" y="5" dx="5" dy="15" fill="navy" font-size="15">
    <!-- here I want to add something with javascript-->                     
   </text>
<g> 
```

我试图在里面找到元素，但没有结果：

```
document.getElementsByTagName("text"); // gives [] 
```

如何使用 JavaScript 访问由指令克隆的 svg 元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:44:19.280

首先，使用元素不会创建实际的克隆，它们会创建*概念上*的克隆（就好像元素是在视觉上克隆的一样）。如果您需要真正的克隆，那么您应该使用例如`elm.cloneNode(true)`.

如果要检查由 use 元素构造的层次结构，请参阅[规范](http://www.w3.org/TR/SVG11/struct.html#InterfaceSVGUseElement)。起点是`yourUseElm.instanceRoot`。

无论如何，您似乎可以将您需要的元素从外部文件移动到主文件中——这样您自然就可以访问 DOM 中的元素。另一种方法是使用 XMLHttpRequest 加载外部文档，并在需要的地方插入实际的克隆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:09:59.007

`<use>`如果 DOM 元素包含在指令中，则无法使用 JavaScript 访问它们。

# dart - 在 Dart 中没有换行符的 print()？

> ID：14073217
> 
> 赞同：49
> 
> 时间：2012-12-28T17:19:40.220
> 
> 标签：dart

在 Dart 中，我使用`print()`将内容写入控制台。

是否可以在`print()`不自动向输出添加换行符的情况下使用？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-12-28T17:23:02.810

您可以使用`stdout`：

```
import "dart:io";
stdout.write("foo"); 
```

将打印`foo`到控制台，但不会在`\n`其后放置 a 。

您也可以使用`stderr`. 看：

[如何以同步方式在 Dart 中打印到 stderr？](https://stackoverflow.com/questions/12181658/how-can-i-print-to-stderr-in-dart-in-a-synchronous-way)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-23T16:44:50.293

您不能自定义 print() 以防止在 Dart 中打印换行符（如在 Python 中使用 'end' 参数）。要在 Dart 中实现这一点，请使用 stdout.write() 函数，例如

```
stdout.write("<your_message>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-26T12:39:04.007

看看可以使用 echo 功能的 dcli 包。

# apache-camel - 想要构建一个路由来检查 Soap 请求的内容并将请求传递给适当的 URI

> ID：14073234
> 
> 赞同：0
> 
> 时间：2012-12-28T17:21:28.107
> 
> 标签：apache-camel, apache-servicemix, fuseesb

我是来自孟买的 Ashish，对 Apache Camel 非常陌生。

目前我正在用 XML 构建一个路由，它将扫描 SOAP 请求并将请求重定向到适当的 URI。

我的肥皂请求如下：

```
 <service xmlns="http://ws.madcomum.comprova.com">
     <request>
        <keysValues>
           <item>
              <bytesValue
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
              <dateValue
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
              <doubleValue
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
              <key>validatesOriginIntegrity</key>
              <longValue
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
              <stringValue>z4x/FOOR+EPQ0vD9+itPSCBeNR4=</stringValue>
           </item>
        </keysValues>
        <actionId>1</actionId>
        <clientId>ARGO</clientId>
     </request>
  </service> 
```

从这个 SOAP 信封中，我想使用 Camel Route 解析出 actionId 标记的值。如果 actionId 的值为 1，则必须将路由重定向到 callService，否则重定向到另一个服务。

我开发的路线逻辑如下：

```
<route>
        <from uri="cxf:bean:comprovaWS?dataFormat=MESSAGE" />   

            <when>
                <xpath>//actionId=1</xpath>
                <to uri="log:input" />

                <to ref="callService" />
                <to uri="log:output" />
            </when>

            <otherwise>
                <to uri="log:input" />
                <to ref="otherService"/>
                <to uri="log:output" />
            </otherwise>

        </choice>
    </route> 
```

但是这个逻辑是行不通的。我的路线有错误吗？

虽然我是 Java 人，但我不想在这里使用 Java。我想依靠骆驼本身。

请尽快帮助我。

问候，

阿什什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:57:43.217

当您使用 xpath 时，有 95% 的人遇到麻烦时通常是由于命名空间。您的 SOAP 消息是使用命名空间定义的 - “http://ws.madcomum.comprova.com”。xpath 表达式必须使用此命名空间才能使其工作。

查看更多详细信息：[http ://camel.apache.org/xpath，在](http://camel.apache.org/xpath)*使用 XML 配置*部分有一个示例

 *此外，当您在 MESSAGE 模式下使用 CXF 时，请阅读有关流缓存的信息，因为消息是基于流的：[http ://camel.apache.org/stream-caching.html](http://camel.apache.org/stream-caching.html)*

# javascript - 使用 Javascript 扩展侧边栏高度以等同于内容高度

> ID：14073236
> 
> 赞同：2
> 
> 时间：2012-12-28T17:21:35.297
> 
> 标签：javascript, html, height, dynamically-generated

我有一个简单的 javascript 函数，旨在增加我的侧边栏 div 的高度，使其等于内容 div 的高度。这就是我这样做的方式......

Javascript：

```
<script type="text/javascript">
function absar(){
document.getElementById("sidebar").style.height = document.getElementById("content").clientHeight;
    }</script> 
```

HTML：

```
<body onLoad="absar()">
<div id="sidebar" style="border:1px solid red">Few content</div>
<div id="content" style="border:1px solid red">
some content <br>
some content <br>
some content <br>
some content <br>
some content <br>
</div>
</body> 
```

此代码将使侧边栏的高度等于内容 div 的高度。** 好的**

但是，当我将相同的代码粘贴到 wordpress 中（其中我有相同的 id 值`content`& `sidebar`）就在 body 标记之后并提供`onload="absar()"`给 body 时，它什么也不做，完全什么也不做。

在这一点上，当我设计了几乎整个布局时，我无法使用新的解决方案，如 Faux Columns 或 table 等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T14:23:35.710

最后，一个愚蠢的 CSS 技巧奏效了，而且效果很好，......

对于我设置的侧边栏 div

```
padding-bottom: 5000px;
margin-bottom: -5000px; 
```

对于包含侧边栏和内容 div 的容器。我设置

```
overflow: hidden; 
```

它工作得很好 - 就像我想要的那样，请告诉如果你知道这个技巧的任何缺点，......如果我发现了一些，我会在这里发布，

下面是**示例代码**，

**HTML**

```
<div class="main">
<div class="sidebar">Few Sidebar Widgets</div>
<div id="content"> 
Bang Bang Content <br>
Bang Bang Content <br>
Bang Bang Content <br>
</div> <!-- End of Content -->
</div> <!-- End of Main --> 
```

**CSS**

```
#main{
overflow:hidden;
}

#sidebar{
padding-bottom: 5000px;
margin-bottom: -5000px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-01T18:33:06.840

除了@Absar 的回答，我可以添加我的改编吗？

我这样做了：

```
.container { 
  overflow: hidden; 
  .... 
} 

#sidebar { 
  margin-bottom: -101%;
  padding-bottom: 101%; 
  .... 
} 
```

我做了“101%”的事情是为了迎合（极其罕见的）可能有人在一个高度超过 5000 像素的大屏幕上查看该网站的可能性！

不过，Absar 的回答很好。它对我来说非常有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:49:02.040

出于几个原因，这应该通过使用适当的 CSS 和 HTML 标记来解决，而不是通过 Javascript。主要原因是您的站点逻辑和表示层之间的分离。CSS只是用于视觉布局，简单的呈现问题应该在CSS域中解决。这似乎是你的问题的情况。

我建议你看看[这篇 CSS-tricks 文章](http://css-tricks.com/fluid-width-equal-height-columns/)。它既具有启发性又透彻。

希望能帮助到你。

# scala - 有没有办法在 for 理解中声明一个隐式 val？

> ID：14073239
> 
> 赞同：35
> 
> 时间：2012-12-28T17:21:48.773
> 
> 标签：scala, implicit, scala-2.10, scala-2.9, for-comprehension

我有一些嵌套调用 flatMap 的代码，如下所示：

```
foo.flatMap(implicit f => bar(123).flatMap(b =>
  /* and so on... implicit f is still in scope here.*/
)) 
```

通常，人们会将其写为 for 理解，这使代码更具可读性：

```
for {
  f <- foo
  b <- bar(123)
  /* yet more method calls that need f as an implicit parameter*/
} 
```

但我需要`f`隐含，我看不出用理解来做到这一点。有没有？当然我可以明确地传递 f，但这意味着再见漂亮的 DSL。我会对 Scala 2.9 和 2.10 的答案感兴趣。

为了清楚起见，我想做这样的事情，但它不会编译：

```
for {
  implicit f <- foo
  b <- bar(123) //bar takes implicit argument
  /* yet more method calls that need f as an implicit parameter*/
} 
```

**编辑：**也许功能请求是个好主意？

**EDIT2：**这应该适用于可用于理解的所有类型，因此不仅适用于通常的集合类型，如`List`or `Seq`，而且适用于`Future`.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-05T04:56:29.780

不，没有。不过有一张票：[https ://issues.scala-lang.org/browse/SI-2823](https://issues.scala-lang.org/browse/SI-2823)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-04-15T09:53:08.113

从 0.3.0-M1 版本开始，一个[better-monadic-for](https://github.com/oleg-py/better-monadic-for#define-implicits-in-for-comprehensions-or-matches)编译器插件提供了这样的功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-13T13:04:46.623

Scala 3 (Dotty)在 for-comprehensions 中启用给定（隐含）[，](https://dotty.epfl.ch/docs/reference/contextual/givens.html)[例如](https://scastie.scala-lang.org/ZutNoWQ2QDW0dAG1QaoWwg)

```
Starting dotty REPL...
scala> for {
     |   given _: Int <- Some(41)
     |   y <- Some(1)
     | } yield summon[Int] + y
val res0: Option[Int] = Some(42) 
```

根据[理解/模式匹配中的隐含 SIP 跟踪 #6](https://github.com/scala/slip/issues/6#issuecomment-158483965)

> Martin 指出，只要类型被注释，它 Dotty 已经支持更雄心勃勃的版本。所以例如在 Dotty 中编译：`implicit val (a: Int, b: String) = (3, "foo")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T23:41:19.007

这段代码怎么样？

```
// prerequisites
val (a,b) = (List(1,2,3), List(3,4,5,7,9))
def tree(n: Int)(implicit s: Int) = " "*s + "0"*n + (if (s+3 < n) "*" else "")

// actual for
@volatile implicit var s = 0
for (i <- a if ({s = i; true}); j <- b) 
  println(tree(j))

// 000
// 0000
// 00000*
// 0000000*
// 000000000*
//  000
//  0000
//  00000
//  0000000*
//  000000000*
//   000
//   0000
//   00000
//   0000000*
//   000000000* 
```

# css - css align ul li 水平不起作用（现在它是对角线）

> ID：14073240
> 
> 赞同：-1
> 
> 时间：2012-12-28T17:21:56.500
> 
> 标签：css, html-lists, vertical-alignment, alignment

在 Wordpress 上，我使用的是 youtube 频道列表插件。

它运作良好，但视频的对齐方式看起来不太好。实际在大视频下方显示对角线列表！

有人可以建议我如何用css解决这个问题吗？

这是页面

[http://www.snowypeach.com/home/?page_id=1106](http://www.snowypeach.com/home/?page_id=1106)

我需要视频下的列表水平对齐，而不是对角线！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:30:56.163

`<div />`您已将 a作为 的子级嵌套`<ul />`。这是无效的标记。将`<li/>`元素移动为的子元素`<ul />`，删除`<div />`它，它将起作用

**编辑**

好的，我看到了问题。您将所有这些内容包装在一个`<pre/>`标签中。此处不应使用此标签，但如果您无法摆脱它，请添加 style `white-space: normal;`。

我通过在 chrome 开发工具中移动元素来测试前面的答案，这些元素删除了空格，因此也出现了问题。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:25:36.183

下面有一个类**ytc-columns4**`<ul>`控制小视频`<li>`标签的对齐

```
<ul class="ytchagallery ytccf ytc-table ytc-td-bottom ytc-columns4"> 
```

根据该类，下面的 css 是由第 66 行 css 文件中的插件生成的

```
http://www.snowypeach.com/home/wp-content/plugins/youtube-channel-gallery/styles.css?ver=3.4.1

.ytc-columns4 li {
    width: calc(100% / 4 + 10px / 3);
} 
```

我已经更改了**ytc-columns3**和**ytc-columns2 类**，结果每次都不同。我并没有完全了解插件的计算部分在哪里。否则我可以修改代码。

# php - 在 android 2.3 上强制下载图像原始数据已损坏

> ID：14073242
> 
> 赞同：2
> 
> 时间：2012-12-28T17:22:02.177
> 
> 标签：php, javascript, mobile-website

我正在尝试开发一种机制，通过强制通过 php 下载画布作为图像下载。以下代码适用于 chrome 桌面，但不适用于 Android 2.3 股票浏览器。

### HTML 和 JavaScript：

```
<script> function downloadImage()
{

    document.getElementById('action').value = 'downloadfile';
    document.getElementById('source').value = document.getElementById('finalimage').src;
    document.getElementById('user').value = userId;
    document.getElementById('imageForm').submit();
}
</script>
<html>
    <form id="imageForm" action="" method="post" enctype="application/x-www-form-urlencoded">
    <input type="hidden" name="source" id="source" value=""/>
    <input type="hidden" name="action" id="action" value="savefile"/>
     <input type="hidden" name="user" id="user" value=""/>
    </form>
</html> 
```

### PHP代码：

```
<?php

header("Content-Type: application/octet-stream");
    header("Content-Disposition: attachment; filename=\"colouringbook-page.jpg\"");
    header("Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0");
    header("Pragma: no-cache");
    header("Content-transfer-encoding: binary");

        $source = $_REQUEST['source'];
        $source = base64_decode(substr($source, strpos($source, ",")+1));
        header("Content-Length: " . strlen($source));
        print $source;
        exit;
?> 
```

我遇到的问题首先是“下载失败”。然后，当我设法成功下载时，图像已损坏。

## [更新]

## 我只是通过输出到浏览器然后尝试从那里保存图像来进行测试。我正在显示图像，但在保存图像时，文件命名方案是 *.html

看起来它可能是一个 android 股票浏览器错误。我能够将图像保存到服务器，但仍然无法从那里输出缓冲区来下载图像。我必须输出一个常规的 html 标签，然后在 android 上执行“另存为”来下载图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:24:58.197

我最近在管理 HTTP 标头时遇到了一些麻烦：确保您没有在发送前压缩数据的模块（例如：用于 apache2 的 mod_deflate）。当您发送 HTTP 答案时，您使用 header("Content-Length: " .strlen($source)); 如果使用压缩，此长度为 False。也许Android浏览器仍在等待数据并最终关闭图像，考虑到它已损坏。

如果这是您的问题，您可以尝试关闭此脚本的压缩（例如 apache2：apache_setenv('no-gzip', '1');）或者您可以尝试不发送 Content-Length 信息。

编辑：您应该使用真正的 mimetype 来更好地帮助 Android 管理您的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T14:50:56.677

似乎正在发生的事情是 Android 设备正在尝试“重新请求”作为 POSTED 逻辑进程的进程。显然设备下载管理器没有发布任何内容。

我想出的解决方案是使用会话来存储信息

# google-drive-api - 选择器 api 和 OAuth JS-example 的主要区别是什么

> ID：14073245
> 
> 赞同：1
> 
> 时间：2012-12-28T17:22:12.557
> 
> 标签：google-drive-api, google-picker

google picker api 不会强制用户进入 OAuth 对话框，也不会要求他们授权应用程序上传或请求活动用户数据。在快速入门指南“ [https://developers.google.com/drive/quickstart-js](https://developers.google.com/drive/quickstart-js) ”中有一个为活动用户上传文件的简单示例。用户必须接受该应用程序。选择器 api 和 OAuth JS-example 的主要区别是什么。我可以为活动用户编写类似选择器 api 的代码吗？我想在不使用选择器 api 的情况下上传和列出活动用户驱动器数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:09:35.630

选择器做了两件你不能在第三方应用程序中手动完成的事情：

1.  对当前登录的 Google 用户使用 cookie 身份验证
2.  将文件添加到 drive.file 范围的用文件打开，因此具有文件范围的应用程序可以访问它。

# objective-c - GHUnit 目标：无法附加到进程

> ID：14073252
> 
> 赞同：2
> 
> 时间：2012-12-28T17:22:42.830
> 
> 标签：objective-c, ios, xcode, ios-simulator, gh-unit

我有一个 GHUnit 测试目标 TestGH，我想用它来测试我的应用程序 TestApp 中的类。我正在使用 Xcode 4.5 并尝试在 iPad 6.0 模拟器上运行 TestGH。

我相信我已经在构建设置和构建阶段中正确配置了 TestGH 构建。我已将 Target Dependencies 设置为“TestApp” 我已将要测试的类的***.m**文件以及将测试它们的测试用例类添加到 Compile Sources 部分 TestGH。

其他值得注意的配置：

在应用程序目标中，TestApp：

```
Symbols Hidden By Default: No
Product Name: TestApp 
```

在测试目标中，TestGH：

```
Bundle Loader: $(BUILT_PRODUCTS_DIR)/TestApp.app/TestApp
Mach-O Type: Bundle
Other linker flags: -ObjC, -all_load
Product name: TestGH
Test Host: $(BUNDLE_LOADER) 
```

我想我基本上是对的，因为我通过编译/链接错误、阅读 stackoverflow 和博客发现了这些设置。

但是，当我启动 TestGH 时，日志导航器显示：错误：未能附加到进程 ID 2305（根据活动监视器，2305 对应于“sh”，仅供参考）

模拟器屏幕保持黑色，Xcode 状态显示“Attaching to TestGH”。

有任何想法吗？

我已经完成了许多建议的修复/解决方法，我在这里讨论过与“未能附加到进程”相关的内容。

**删除了Library/Developer/Xcode**中的 DerivedData 文件夹，删除了**Library/Application Support/iPhone Simulator**下的所有内容。尝试了 TestGH 目标的 Product- **>Edit Scheme**下的所有选项--tried `Debugger = GDB, LLDB, None, Launch = Automatically, wait`。结果总是一样的。

# c# - 设计视图 ListView ASP.NET 逻辑

> ID：14073254
> 
> 赞同：0
> 
> 时间：2012-12-28T17:22:51.723
> 
> 标签：c#, asp.net, visual-studio-2010

我正在尝试在 Asp.Net ListView 的源视图中输入逻辑。问题是程序在执行“If (isItTrue(test))”时在屏幕上写入 false 或 true。有谁知道如何解决这个问题？

```
 <%# test= Eval("testId")%>
          <%
              If (isItTrue(test)) Then

              %>
           <asp:Button ID="btnTest"  runat="server" Text="Like" />
           <%
           Else
               %>
               <asp:Label runat="server" Text="hello" </asp:Label>

           <%
           End If
               %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:33:51.917

您可以使用[`ItemDataBound`](http://msdn.microsoft.com/library/system.web.ui.webcontrols.listview.itemdatabound.aspx)检查这样的信息并使用您的条件显示或隐藏控件。在你的代码中尝试这样的事情：

```
protected void ListViewTest_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    // if it is data item
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        // call your function
        if (isItTrue("test"))
        {
            // show the button
            e.Item.FindControl("btnTest").Visible = true;
        }
        else 
        {
            // show the label
            e.Item.FindControl("lblTest").Visible = true;
        }
    }
} 
```

在您的 Listview 中，您可以执行类似的操作，设置事件并在占位符上添加控件

```
<asp:ListView ID="ListViewTest" DataSourceID="..." OnItemDataBound="ListViewTest_ItemDataBound" runat="server">
    <LayoutTemplate>
      <table>
        <tr>
            <th>Column Name</th>
        </tr>
        <tr runat="server" id="itemPlaceholder" />
      </table>          
    </LayoutTemplate>
    <ItemTemplate>
      <tr style="background-color: #CAEEFF" runat="server">
        <td>
           <%-- both controls are here --%>     
          <asp:Button ID="btnTest" runat="server" Visible="false" Text="Like"></asp:Button>
          <asp:Label ID="lblTest"  runat="server" Visible="false" Text="hello"></asp:Label>
        </td>
      </tr>
    </ItemTemplate>
  </asp:ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:42:42.840

您确定不是这一行： `<%# test= Eval("testId")%>`那是在输出中写入 true 或 false 吗？

# maven - 如何通过 maven 配置 Flex Mojos 单元测试

> ID：14073256
> 
> 赞同：1
> 
> 时间：2012-12-28T17:23:04.527
> 
> 标签：maven, maven-2, flex4.5, maven-plugin, pom.xml

像 java 我想在 maven flex mojo 中执行单元测试。但无法执行单元测试。这是供您观察的 pom 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

  <modelVersion>4.0.0</modelVersion>

  <groupId>com.formativesoft.flex</groupId>
  <artifactId>rdpair</artifactId>
  <version>1.0.1</version>
  <packaging>swf</packaging>

  <name>rdpair Flex</name>  
  <dependencies>
    <dependency>
      <groupId>com.adobe.flex.framework</groupId>
      <artifactId>flex-framework</artifactId>
      <version>4.5.1.21328</version>
      <type>pom</type>
    </dependency>

    <dependency>
      <groupId>com.adobe.flexunit</groupId>
      <artifactId>flexunit</artifactId>
      <version>0.85</version>
      <type>swc</type>
      <scope>test</scope>
    </dependency>
  </dependencies>

  <build>
    <sourceDirectory>src/main/flex</sourceDirectory>
    <testSourceDirectory>src/test/flex</testSourceDirectory>
    <plugins>
      <plugin>
        <groupId>org.sonatype.flexmojos</groupId>
        <artifactId>flexmojos-maven-plugin</artifactId>
        <version>4.0-RC2</version>
        <extensions>true</extensions>
      </plugin>
    </plugins>
  </build>
</project> 
```

执行 Maven 单元测试缺少哪些属性/插件/依赖项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:51:06.230

您应该声明哪些文件包含测试：

```
<includeTestFiles>
    <includeTestFile>*Test.as</includeTestFile>
</includeTestFiles> 
```

并指定 Flash 播放器的路径（在您的 settings.xml 中移动）

```
<properties>
    <flex.flashplayer.url>C:\Program Files (x86)\Adobe\Adobe Flash Builder 4.6\player\win\11.1\FlashPlayerDebugger.exe</flex.flashplayer.url>
</properties> 
```

# java - 在 Play Framework URL 中传递 MongoDB ObjectId

> ID：14073258
> 
> 赞同：4
> 
> 时间：2012-12-28T17:23:14.797
> 
> 标签：java, mongodb, playframework, playframework-2.0, objectid

嗨，我正在使用 Java 学习 Play Framework 2，但遇到了问题。我使用 MongoDB，并且有一个简单的类 User，其中 ObjectId 作为唯一 ID。

```
public class User {

    @JsonProperty
    public ObjectId id;

.. 
```

在我看来，我想添加一个按钮来删除当前用户，如下所示：

```
 @form(routes.Application.deleteUser(user.id)) {
       <input type="submit" value="Delete">
 } 
```

在我的路线文件中：

```
POST    /users/:id/delete               controllers.Application.deleteUser(id: org.bson.types.ObjectId) 
```

但现在我得到一个错误：

“没有找到类型 org.bson.types.ObjectId 的 URL 路径绑定器。尝试为此类型实现隐式 PathBindable”

我尝试了很多东西，例如我尝试仅将 ObjectId 值作为字符串传递，但对我没有任何效果。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T07:38:17.050

您可以使用具有必要绑定器[的 play-salat](https://github.com/leon/play-salat)，只需将其添加为您的依赖项并将其`project/Build.scala`导入您的路线和模板：

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

  val appDependencies = Seq(
    "se.radley" %% "play-plugins-salat" % "1.2-SNAPSHOT"
  )

  val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
    resolvers       += "OSS Snapshots" at "https://oss.sonatype.org/content/repositories/snapshots/",
    routesImport    += "se.radley.plugin.salat.Binders._",
    templatesImport += "org.bson.types.ObjectId"
  )
} 
```

另请查看此[示例应用程序](https://github.com/czihong/playMongoDemo)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T04:26:09.693

毕竟，您可能正在寻找[Morphia](http://code.google.com/p/morphia/)、 MongoDB ORM for Java 吗？对于[Morphia来说，Slideshare 中的](http://code.google.com/p/morphia/)[本教程](http://www.slideshare.net/jeffyemin/boston-java-user-group-simplifying-persistence-for-java-and-mongo-db)可能是一个很好的起点。

顺便说一句，我发现`_id`用户名 String 比 Mongo 的 ObjectId 更好。

小例子：

```
//Routes
GET     /add/:username     controllers.Application.createTestPerson(username)
GET    /delete/:username   controllers.Application.delete(username)

//Controller
public class Application extends Controller {
  ...
  public static Result createTestPerson(String username){
      //DB connection and Morphia Datastore
      DBConn conn = new DBConn("test");
      Datastore ds = conn.getDatastore();
      //Person document for saving
      Person person = new Person(username);
      person.setName("John", "Doe");
      //save person to Mongo
      ds.save(person);  
      return ok("user \""+username+"\" saved");
  }

  public static Result delete(String username){
      //DB connection and Morphia Datastore
      DBConn conn = new DBConn("test");
      Datastore ds = conn.getDatastore();
      ds.delete(Person.class,username);
      return ok("user \""+username+"\" deleted");
  }
}

//models Person.java
import com.google.code.morphia.annotations.*;
import org.bson.types.ObjectId;

@Entity("persons")
public class Person {

    @Id
    String userName;
    Name name;

    public Person(String u){ userName = u; }

    public void setName(String first, String last){
        name = new Name(first, last);
    }
}
@Embedded
class Name {
    String first, last;

    public Name(){ }
    public Name(String first, String last) {
        this.first = first;
        this.last = last;
    }
}

//models DBConn.java
import com.google.code.morphia.Datastore;
import com.google.code.morphia.Morphia;
import com.mongodb.Mongo;
import java.net.UnknownHostException;

public class DBConn implements AutoCloseable{
    Morphia morphia;
    Mongo mongo;
    Datastore ds;

    public DBConn(){
        new DBConn("test");
    }
    public DBConn(String collection){
        morphia = new Morphia();
        try {
            mongo = new Mongo();
        } catch (UnknownHostException ex) {
            System.out.println("[Error] MongoDB Error");
        }
        ds = morphia.createDatastore(mongo, collection);
        System.out.println("DB conn success ["+ ds.getDB().getName() + "]");
    }
    public Datastore getDatastore(){
        return ds;
    }
    public void close() throws Exception {
        mongo.close();
    }
} 
```

所以随着

```
localhost:9000/delete/what-ever-here

localhost:9000/createTestPerson/what-ever-here 
```

您应该能够管理 Mongo Collection 并在 Mongo 控制台中查看结果：

```
> db.persons.find()
{ "_id" : "johndoe", "className" : "models.Person", "name" : { "first" : "John",
 "last" : "Doe" } }
> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-08T13:51:23.187

对于使用 Java 的 Play 2.3.x，在您的 build.sbt 上

```
import play.PlayImport.PlayKeys._

name := "test"

version := "1.0-SNAPSHOT"

lazy val root = (project in file(".")).enablePlugins(PlayJava)

scalaVersion := "2.11.6"

libraryDependencies ++= Seq(
  javaJdbc,
  cache,
  javaWs,
  filters,
  "org.mongodb" % "mongo-java-driver" % "3.0.1",
  "se.radley" %% "play-plugins-salat" % "1.5.0"
)

val main = Project("test", file(".")).enablePlugins(play.PlayJava).settings(
    routesImport += "se.radley.plugin.salat.Binders._"
) 
```

在您的路线上，您可以通过以下方式使用它

```
controllers.Application.index(id: ObjectId) 
```

# php - PHP 母版页架构链接未正确显示

> ID：14073259
> 
> 赞同：0
> 
> 时间：2012-12-28T17:23:25.670
> 
> 标签：php, master-pages, href

嗨，我会尽力解释这一点。我正在使用 php 母版页结构通过包含函数链接内容，如

```
<?php 
   $page=$_GET['page'];
   include($page);
 ?> 
```

我正在使用数据库来显示博客，并为每个帖子添加了一个 ID，以允许用户导航到实际的博客帖子，而不是在列表中查看它。我遇到的问题是链接有效，但是当我将母版页结构添加到链接中时，它找不到 ID。例如，

**作品**

```
<a href="blog2.php?id=<?php echo $post['post_id']; ?>"> 
```

但

**不工作**

```
<a href="../anonymous/anonymous.master.php?page=blog2.php?id=<?php echo $post['post_id']; ?>"> 
```

显然，第一个链接只显示 blog2.php 数据而不是母版页数据。我猜这是我构建链接的方式，任何帮助将不胜感激。如果还有更多问题或我没有解释自己，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:43:40.920

有几件事。首先，要解决您的问题，在第二种情况下，您需要一个`&`而不是`?`在`page`and参数之间。`id`所以它应该是这样的：

```
<a href="../anonymous/anonymous.master.php?page=blog2.php&id=<?php echo $post['post_id']; ?>"> 
```

其次，你真的需要清理你的输入。

在这种情况下：

```
<?php 
   $page=$_GET['page'];
   include($page);
 ?> 
```

如果您的服务器配置不正确，我可以轻松地传递一个 URL`page`并让您的服务器执行来自另一个网站的任意代码，从而危及您的整个系统。

在 URL 的情况下，您将帖子变量直接回显到页面，从而使自己容易受到跨站点脚本 (XSS) 攻击。

# jquery - 设置 cookie 以记住手风琴状态

> ID：14073260
> 
> 赞同：1
> 
> 时间：2012-12-28T17:23:25.680
> 
> 标签：jquery, cookies, accordion

在过去的几天里，我一直在尝试创建一个 cookie（使用[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)）来记住我的手风琴菜单的打开状态。我在这里梳理了谷歌和以前的答案但到目前为止，我还没有让它发挥作用。

[这](http://pastebin.com/yps3PNFd)是生成手风琴菜单的代码..

如果有人可以帮助阐明这一点，我将不胜感激..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:51:00.013

我前段时间写了一个版本，并把它放在网上：http: [//jaaulde.com/test_bed/stickyaccordion/](http://jaaulde.com/test_bed/stickyaccordion/)

我使用了以下代码：

```
$(function () {
    var cookieName = 'stickyAccordion';

    $('#accordion').accordion({
        active: ($.cookies.get(cookieName) || 0),
        change: function (e, ui) {
            $.cookies.set(cookieName, $(this).find('h3').index(ui.newHeader[0]));
        }
    });
}); 
```

因为这是前一段时间，它使用[jQuery](http://jquery.com) 1.4.1 和[jQuery UI](http://jqueryui.com) 1.7.2。

它还使用了我自己的个人[JavaScript/jQuery cookie 库](http://code.google.com/p/cookies/)。如果你想使用 carhartl's 这是一个完全有效的选择。你只需要用他的等价物`$.cookies.set`替换我的电话。`$.cookies.get`

**编辑：**我很抱歉，当我看到你的问题提到 jQuery 和手风琴时，我以为你的意思是[jQuery UI 的手风琴](http://jqueryui.com/accordion/)。如您所见，它使事情变得非常简单。由于您没有使用 UI，因此此答案可能对您无效。如果是这种情况，我可能会抽出一些时间为您现有的解决方案添加 cookie 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T04:38:46.910

就我而言，安装了 cms contao 3.x 和 jquery cookie 插件。用 jquery 1.9 (chrome/ff) 试了一下，它适用于这段代码：

```
var cookieName = 'myHotCookie';
    $(document).accordion({
        // Put custom options here
        heightStyle: 'content',
        header: 'div.toggler',
        collapsible: true,
        animated: 'slide',
        active : (parseInt($.cookie(cookieName)) || 0),
        activate: function (event, ui) {
            $.cookie(cookieName,parseInt($(this).accordion('option','active')));
        }
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T15:48:24.660

我使用[Klaus Hartl](https://github.com/carhartl/jquery-cookie)的 cookie 插件编写了这个片段：

```
cookieName = 'myHotCookie';

$(".accordion").accordion({
    'active' : (parseInt($.cookie(cookieName)) || false),
    'header' : 'h3',
    activate: function (event, ui) {
        $.cookie(cookieName,parseInt($(this).accordion('option','active')));
    }
}); 
```

parseInt 似乎是必要的，因为获取 id 是作为字符串呈现的。

# jquery - 使用 jquery waypoints 创建一个粘性导航标题适用于移动设备

> ID：14073262
> 
> 赞同：0
> 
> 时间：2012-12-28T17:23:34.183
> 
> 标签：jquery, mobile, navigation, sticky, jquery-waypoints

我正在使用这个 jquery 粘性导航

[http://webdesign.tutsplus.com/tutorials/javascript-tutorials/create-a-sticky-navigation-header-using-jquery-waypoints/](http://webdesign.tutsplus.com/tutorials/javascript-tutorials/create-a-sticky-navigation-header-using-jquery-waypoints/)

但它不适用于移动设备，主要是 ipad。第一次之后，导航不会回到导航位置，粘性类也不会消失。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:30:55.047

如果您实际上在 ipad 中查看他们的示例页面，它会显示相同的内容。[http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/](http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/)

这是由于（较旧的）ipad 不支持位置：正确固定。这是我用来在旧 ipad 等上实现的方法：http: [//kangax.github.com/cft/#IS_POSITION_FIXED_SUPPORTED](http://kangax.github.com/cft/#IS_POSITION_FIXED_SUPPORTED)

更新：开发人员实际上在 github 上对此进行了解释 - [https://github.com/imakewebthings/jquery-waypoints/issues/51](https://github.com/imakewebthings/jquery-waypoints/issues/51)

# android - 未找到 Android NDK 构建路径

> ID：14073267
> 
> 赞同：6
> 
> 时间：2012-12-28T17:23:47.360
> 
> 标签：android, path, android-ndk, cygwin

当我尝试构建 NDK OpenCV Android 程序时，我看到了屏幕截图中显示的错误。我添加了以下几行：

NDK_HOME=C:\android-ndk-rd8 导出 NDK_HOME

到我在 cygwin 中的 .bashrc 文件。我正在使用 Windows 7，我的 NDK 位于 C:\android-ndk-rd8

我认为添加上述行会解决它，但它没有用。如何让程序编译？我必须更改 PATH 变量吗？如果是这样，我该怎么做？![在此处输入图像描述](../Images/c3a2bfaeb77ad2af532b2b3b179223c8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:13:02.487

从您的错误日志中，我想您应该指定 SA 环境变量，您可以在项目的 Eclipse 属性中执行此操作：

> 项目属性 -> C/C++ Build -> Enviroment -> Here press button Add.. -> 并输入 Name: SA with Value: path to your NDK folder

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:52:54.087

我认为，来自 Eclipse 的环境变量被称为`{env:NDK_HOME}`. 在 Properties|C++|Build 或类似的东西

# intuit-partner-platform - 不断收到来自 Intuit AggCat API 的 403 响应

> ID：14073280
> 
> 赞同：1
> 
> 时间：2012-12-28T17:25:04.603
> 
> 标签：intuit-partner-platform, intuit, customer-account-data-api

我不断`403`从 Intuit AggCat API 获取响应所有请求，除了`getInstitutions`和`getInstitutionDetails`（它们返回正确的数据）。有其他人经历过吗？

Ruby代码摘录：

```
IntuitIdsAggcat.config(:issuer_id => "...")
IntuitIdsAggcat.config(:oauth_consumer_key => "...")
IntuitIdsAggcat.config(:oauth_consumer_secret => "...")
IntuitIdsAggcat.config(:certificate_path => "...")
IntuitIdsAggcat::Client::Services.delete_customer '1'
IntuitIdsAggcat::Client::Services.discover_and_add_accounts_with_credentials 14007, 1,  { "onlineID" => "...", "passcode" => "..." }
IntuitIdsAggcat::Client::Services.get_customer_accounts 1 
```

回复：

```
{:challenge_session_id=>nil, :challenge_node_id=>nil, :response_code=>"403", :response_xml=><UNDEFINED> ... </>}` 
```

我正在使用[https://github.com/rewardsummit/intuit_ids_aggcat](https://github.com/rewardsummit/intuit_ids_aggcat)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:20:54.840

该响应代码的文档位于 [此处]：[https ://ipp.developer.intuit.com/index.php?title=0010_Intuit_Partner_Platform/0020_Aggregation_%26_Categorization_Apps/AggCat_API/0700_Error_Codes](https://ipp.developer.intuit.com/index.php?title=0010_Intuit_Partner_Platform/0020_Aggregation_%26_Categorization_Apps/AggCat_API/0700_Error_Codes)

看起来用户凭据要么已更改，要么已被锁定。

问候，
杰瑞德

# tfs - TFS 如何在 TFS 中自定义模板

> ID：14073284
> 
> 赞同：0
> 
> 时间：2012-12-28T17:25:43.107
> 
> 标签：tfs, tfs-workitem

我想自定义 TFS 上的工作项，我使用的是 microsoft scrum 2.0 模板。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:57:38.997

下载 TFS 2010 Power Tools 以安装进程编辑器。链接：http: [//visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)

# c# - VS2010 Framework 3.5 中的 Web 服务中的方法在本地运行时未显示

> ID：14073286
> 
> 赞同：5
> 
> 时间：2012-12-28T17:25:57.387
> 
> 标签：c#, asp.net, visual-studio-2010, web-services

我正在尝试在 VS2010 中创建一个 Web 服务并将其作为 3.5 Framework Web Service 项目进行。

我有默认的 Hello World 方法和一些我已经添加的方法。我添加的那些调用了一个数据提供者类，该类又连接到数据集。但是，当我在本地运行时，我只看到 Hello World 方法而不是我的新方法。然后我删除 hello world 方法并重新运行，我仍然可以看到它。

我需要做什么才能在本地运行它，它与在我的登台和生产服务器上运行的过程相同吗？

我习惯于在 1.1 中创建服务，这是我在 3.5 中创建的第一个服务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T17:32:36.527

我假设“它没有显示”是指当您运行 Web 服务网站并导航到 .asmx 页面时，该方法没有显示在可用服务调用列表中，如下图所示：

![在此处输入图像描述](../Images/2e487e3fd1f7fe721d8f9fc0a7fa55ad.png)

***如果*这就是你的意思....**

很可能您要么错过了`[WebMethod()]`函数定义之前的声明，要么方法未声明为公共的。

例子：

```
[WebMethod()]
public string GetName(int EmployeeNumber)
{
   // some code to get name from emplyee #
   return ReturnValue;
} 
```

当您在本地运行 Web 服务项目时应该会显示。

这些都不会：

```
public string GetName(int EmployeeNumber)
{
   // some code to get name from employee #
   return ReturnValue;
} 
```

或者

```
[WebMethod()]
private string GetName(int EmployeeNumber)
{
   // some code to get name from employee #
   return ReturnValue;
} 
```

* * *

此外，我猜测您在删除 HelloWorld 方法时看到您的方法的原因是您只删除了该方法并留下了`[WebMethod()]`声明。然后这将更改代码，以便将`[WebMethod()]`声明应用于您的函数，因为它可能是声明之后的第一个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T10:23:26.203

检查您的函数是否声明为静态的？所以即使是 [WebMethod()] 在以下情况下也不起作用：

```
[WebMethod()]
public static string GetName(int EmployeeNumber)
{
 // some code to get name from employee #
return ReturnValue;
} 
```

删除静电，它会工作！

# unicode - PyQt 和 Unicode 错误

> ID：14073287
> 
> 赞同：0
> 
> 时间：2012-12-28T17:26:05.670
> 
> 标签：unicode, pyqt

我在这一行有一个与 Unicode 相关的问题：

```
strToCompare =  str(self.modelProxy.data(cellIndex, Qt.DisplayRole).toString()).lower() 
```

错误是：

> UnicodeEncodeError：'ascii' 编解码器无法在位置 5 编码字符 u'\xe9'：序数不在范围内（128）

这是因为数据是从数据库中可能包含 unicode 字符的字段中检索的。即使我添加了`unicode()`转换为 Unicode 的功能，错误仍然存​​在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:36:48.477

我有我的解决方案，我只是在模型中获取字符串，而不是使用函数 data()。这样我就不必将 QVariant 转换为 String

# android - Android 中大型水平滚动视图的替代方案

> ID：14073292
> 
> 赞同：1
> 
> 时间：2012-12-28T17:26:52.947
> 
> 标签：android, canvas, scroll

我正在编写一个 DAW 风格的应用程序，需要实现此类程序中常见的横向滚动时间线。换句话说，它应该让用户看起来好像他们正在滚动一个非常大的位图，其中几个实际上是针对不同的轨道，无缝的。显然，如果我使用一个非常大的水平滚动视图来执行此操作，我会遇到内存问题，但这需要是用户看到的效果。现在，我为每个轨道都有一个自定义视图，并将波浪绘制到它的画布中。

我考虑过构建三个视图，左视图、活动视图和右视图，并在左侧或右侧及时滚动到准备好下一个全屏时简单地换出新数据。我认为这些方面的东西将成为最终的解决方案，但我不确定实现它的最佳方式是什么。我是否应该在后台运行一项服务来监视和更新屏幕外视图，这是实现此目的的最佳方式吗？我以前没有使用过服务。还是有更直接的方法，将一些代码附加到视图以自动执行？

任何建议，将不胜感激。

# bash - BASH 脚本期待然后，当我需要其他的时候

> ID：14073294
> 
> 赞同：4
> 
> 时间：2012-12-28T17:26:58.057
> 
> 标签：bash, if-statement, syntax-error

我的 bash 脚本需要一点帮助：

```
#!/bin/bash

zenity --list --title="Select Server" --text="Select the server to start" --radiolist \
--column= --column=Server --column=Port \
FALSE "Creative+Survival" 25565 \
FALSE "Tekkit Cheat Survival" 25566 \
FALSE "Flat Tekkit" 25567 \
FALSE "SunnyDale City" 25568 \
FALSE "Doom Dungeon" 25569 \
FALSE "Survival Tekkit" 25570 \
| cat > ~/temp

server=$(cat ~/temp)

if $server="Creative+Survival" then
gnome-terminal -x sh "/home/kulboy121/Servers/Creative and Survival/launch.sh"
end

else
echo wrong answer...
end

rm ~/temp 
```

这是一个启动我拥有的一些 Minecraft 服务器的脚本。我最终也会为所有其他服务器添加 if 条目。这是我不选择 Creative+Survival 时的输出：

```
Server Startup - INCOMPLETE.sh: 20: Server Startup - INCOMPLETE.sh: Syntax error: "else" unexpected (expecting "then") 
```

当我选择创意+生存时，同样的事情也会发生。抱歉，如果这是一个愚蠢的问题，这是我的第一个 bash 脚本之一。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:32:38.360

在 bash 中，您必须记住`then`必须在新行中。不幸的是，你的整个`if`陈述是不正确的。正确的字符串比较看起来像这样：

```
 if [[ "$server" = "pattern" ]]; then
       # do something
 else
       # do something else
 fi 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T17:32:49.313

`[`缺少括号（测试）运算符。它应该是这样的：

```
if [ "$server" = "Creative+Survival" ]
then
    echo "true"
else
    echo "false"
fi 
```

注意：这些括号周围的空格很重要。条件测试周围的方括号实际上是`test`运算符的同义词。所以上面等价于：

```
if test "$server" = "Creative+Survival"
then
   echo "true"
else
   echo "false"
fi 
```

但是每个人都使用括号；我很少看到使用`test`关键字的脚本。

在 bash shell 中也允许使用双括号（尽管这不是可移植的，因为它不是 POSIX 标准）：

```
if [[ "$server" = "Creative+Survival" ]]
then 
```

`[`这是描述、`[[`和之间差异的页面链接：http `test`: [//mywiki.wooledge.org/BashFAQ/031](http://mywiki.wooledge.org/BashFAQ/031)

* * *

**更新**

**问：**这似乎有效，但如果我选择“Creative+Survival”以外的任何内容，它会吐出错误代码。这应该发生吗？

**A：**目前还不清楚是哪个组件吐出了什么错误代码。我希望您要检查每个可能的选择。您可以使用`elif`或 使用`case`.

```
if [ "$server" = "Creative+Survival" ]
then
    echo "Creative and Survival"
elif [ "$server" = "Tekkit Cheat Survival" ]
then
    echo "Tekkit Cheat Survival"
elif [ "$server" = "Flat Tekkit" ]
then
    echo "Flat Tekkit"
else
    echo "no action for specified server"
fi

case "$server" in
    'Creative+Survival')
        echo "Creative and Survival"
        ;;
    'Tekkit Cheat Survival')
        echo "Tekkit Cheat Survival"
        ;;
    *)
        echo "no action found for server $server"
        ;;
esac 
```

（注意：缩进只是为了提高可读性；bash 关心换行符，而不是前导空格。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T17:33:16.783

您的 if 语句不正确。

*   条件放在括号内：`[[...]]`
*   `then`换行
*   语句以`fi`not结尾`end`

还有一个我已经修复的[无用用法。`cat`](http://partmaps.org/era/unix/award.html)

试试这个：

```
server=$(zenity --list --title="Select Server" --text="Select the server to start" --radiolist \
--column= --column=Server --column=Port \
FALSE "Creative+Survival" 25565 \
FALSE "Tekkit Cheat Survival" 25566 \
FALSE "Flat Tekkit" 25567 \
FALSE "SunnyDale City" 25568 \
FALSE "Doom Dungeon" 25569 \
FALSE "Survival Tekkit" 25570)
if [[ $server == "Creative+Survival" ]]
then
    gnome-terminal -x sh "/home/kulboy121/Servers/Creative and Survival/launch.sh"
else
    echo wrong answer...
fi 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T18:16:58.477

其他人已经回答了语法问题。

展望未来，该`case`声明将为您服务：

```
server=$(...)
case $server in 
  "Creative+Survival")
    gnome-terminal -x sh "/home/kulboy121/Servers/Creative and Survival/launch.sh"
    ;;
  "Tekkit Cheat Survival")
    # do something
    ;;
  "Flat Tekkit")
    # do something
    ;;
  "SunnyDale City")
    # do something
    ;;
  "Doom Dungeon")
    # do something
    ;;
  "Survival Tekkit")
    # do something
    ;;
  *)
    echo wrong answer
    ;;
esac 
```

此外，不要使用 zenity，而是使用 bash 的`select`语句。假设你有 bash v4

```
declare -A port
port["Creative+Survival"]=25565
port["Tekkit Cheat Survival"]=25566
port["Flat Tekkit"]=25567
port["SunnyDale City"]=25568
port["Doom Dungeon"]=25569
port["Survival Tekkit"]=25570

PS3="Select server: "
select server in "${!port[@]}"; do
    if [[ -n $server ]]; then
        # user has given a valid selection
        echo do something with "$server" and "${port[$server]}"
        break
    fi
done 
```

# android - Android 读取大型 csv 文件并将数据发送到服务器的最有效方法（不上传文件）

> ID：14073302
> 
> 赞同：1
> 
> 时间：2012-12-28T17:27:27.330
> 
> 标签：android, json, performance, httprequest, out-of-memory

我在 sdcard 中有一个大的 csv 文件，我想知道通过我的 android 应用程序将数据从我的 csv 文件发送到我的托管服务器的最佳方式。我的应用程序写入 csv 文件一个小时，然后在每个小时结束时运行一个服务，该服务读取这个 csv 文件并将其发送到服务器。

我最初没有向 csv 文件写入任何内容并将每个数据作为 http post 请求发送。但事实证明，我的应用显示了太多用于上传的数据使用情况。

所以我切换到将数据写入文件一个小时，并在小时结束时读取每一行并将每个元组转换为 json 对象，将其放入 json 数组中，然后将该数组作为 json 对象通过名称值对发送.

问题1：

我的 CSV 文件太大，所以当我尝试将超过 2000 个 json 对象添加到数组并像这样发送时出现**内存不足异常（问题出现在标有 ** 的行上）**

```
nameValuePairs.add(new BasicNameValuePair("myjson", json_array_obj.toString()));

Thread server = new Thread(){
    String line = null;
    public void run()
    {
        try{

            HttpClient httpclient1 = new DefaultHttpClient();
            HttpPost httppost1 = new HttpPost("http://www.example.com/filename.php");

            **httppost1.setEntity(new UrlEncodedFormEntity(nameValuePairs));**
            HttpResponse httpResponse = httpclient1.execute(httppost1);

            HttpEntity httpEntity = httpResponse.getEntity();
            line = EntityUtils.toString(httpEntity);

            Log.e("line" , line);
          }
          catch(Exception e)
          {
            Log.v("catch", "executed");
          } 

    }
};
server.start(); 
```

Logcat 显示：

```
`12-28 13:01:18.828: E/AndroidRuntime(2690FATAL EXCEPTION: Thread-16132
 12-28 13:01:18.828: E/AndroidRuntime(26908): java.lang.OutOfMemoryError
 12-28 13:01:18.828: E/AndroidRuntime(26908):   at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:94)
 12-28 13:01:18.828: E/AndroidRuntime(26908):   at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:145)
 12-28 13:01:18.828: E/AndroidRuntime(26908):   at java.lang.StringBuilder.append(StringBuilder.java:216)
 12-28 13:01:18.828: E/AndroidRuntime(26908):   at libcore.net.UriCodec.appendHex(UriCodec.java:212)
 12-28 13:01:18.828: E/AndroidRuntime(26908):   at libcore.net.UriCodec.appendHex(UriCodec.java:206)
 12-28 13:01:18.828: E/AndroidRuntime(26908):   at libcore.net.UriCodec.appendEncoded(UriCodec.java:109)
 12-28 13:01:18.828: E/AndroidRuntime(26908):   at libcore.net.UriCodec.encode(UriCodec.java:133)
 12-28 13:01:18.828: E/AndroidRuntime(26908):   at java.net.URLEncoder.encode(URLEncoder.java:57)
 12-28 13:01:18.828: E/AndroidRuntime(26908):   at org.apache.http.client.utils.URLEncodedUtils.encode(URLEncodedUtils.java:184)
 12-28 13:01:18.828: E/AndroidRuntime(26908):   at org.apache.http.client.utils.URLEncodedUtils.format(URLEncodedUtils.java:163)
 12-28 13:01:18.828: E/AndroidRuntime(26908):   at org.apache.http.client.entity.UrlEncodedFormEntity.<init>(UrlEncodedFormEntity.java:71)
 12-28 13:01:18.828: E/AndroidRuntime(26908):   at com.example.acgylo.CSVtoServer$1.run(CSVtoServer.java:168)8): ` 
```

然后我发现包含大量对象的json数组不能作为namevaluepair发送，因为它会导致内存溢出。

所以我想知道最好的方法是什么：

选项1：分批发送500个数据（即500行csv一起）。

有没有其他有效的方法可以通过 android 中的 HTTP 从 CSV 发送 2k 元组（或更多）？

问题2：

a) 我想知道如何减少 android 应用程序的数据使用量？

b) 什么使用较少的数据：

```
One http request with large json object sent as string OR Multiple http requests with smaller json objects? 
```

请帮我找到解决上述问题的有效方法。任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:09:18.673

流媒体是这里的神奇词汇。您可以逐条记录，而不是将所有数据读入内存然后将其发送出去。

1.  打开 HTTP post 连接
2.  写开头“[”
3.  从 CSV 文件中读取记录并将其转换为 JSON
4.  通过线路发送 JSON 字符串
5.  发送 "," 分隔 JSON 数组中的对象
6.  重复步骤 3-5，直到发送完所有数据（在最后一条记录后省略“，”）。
7.  发送结束数组的“]”
8.  完成 HTTP 请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:42:16.803

正如您所提到的，如果您要从移动设备向服务器发送大量数据，您可以

a）将数据分解成片段，如果片段之间没有可以工作的依赖关系

或者

b) 只需将数据压缩成 zip 文件并将其发送到服务器。在大多数情况下，修改服务器以接受 zip 文件然后进行常规处理可能更容易。

# javascript - 删除选项更改上的标记 Google Maps JavaScript API v3

> ID：14073303
> 
> 赞同：0
> 
> 时间：2012-12-28T17:27:38.297
> 
> 标签：javascript, google-maps-api-3

我需要在选项更改时清除/删除所有先前的标记。我尝试在 Maps API 文档和 Stackoverflow 中搜索答案，不幸的是我不是 JavaScript 专家。它们似乎都以不同的方式实施，而我并没有成功地让它发挥作用。我最接近的，是删除一个标记。

我感谢提供的任何帮助，谢谢！

```
map = new google.maps.Map(document.getElementById('map_canvas'), {
  zoom: 14,
  center: new google.maps.LatLng(40.680099,-73.945693),
  mapTypeId: google.maps.MapTypeId.ROADMAP
});

infowindow = new google.maps.InfoWindow();

var marker, i;

var markerShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
    new google.maps.Size(40, 37),
    new google.maps.Point(0, 0),
    new google.maps.Point(12, 35));

var restaurantColor = "0080FF";

var restaurantMarker = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + restaurantColor,
    new google.maps.Size(21, 34),
    new google.maps.Point(0,0),
    new google.maps.Point(10, 34));

var takeoutColor = "79CEFF";

var takeoutMarker = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + takeoutColor,
    new google.maps.Size(21, 34),
    new google.maps.Point(0,0),
    new google.maps.Point(10, 34));

$('#category').change(function() {

    if ($(this).val() == 'restaurant') {

        for (i = 0; i < restaurant.length; i++) {
            marker = []
            marker = new google.maps.Marker({
            position: new google.maps.LatLng(restaurant[i][1], restaurant[i][2]),
            map: map,
            icon: restaurantMarker,
            shadow: markerShadow,
            animation: google.maps.Animation.DROP
        });

        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
              infowindow.setContent(restaurant[i][0]);
              infowindow.open(map, marker);
            };
          })(marker, i));
        }
    }

    if ($(this).val() == 'takeout') {

        for (i = 0; i < takeout.length; i++) {
            marker = new google.maps.Marker({
            position: new google.maps.LatLng(takeout[i][1], takeout[i][2]),
            map: map,
            icon: takeoutMarker,
            shadow: markerShadow,
            animation: google.maps.Animation.DROP
        });

        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
              infowindow.setContent(takeout[i][0]);
              infowindow.open(map, marker);
            };
          })(marker, i));
        }

    }

});

var restaurant = [
    ['<div class="restaurant"><strong>SoCo Southern Comfort</strong><br />509 Myrtle Ave. Brooklyn, NY 11205<br /> <a href="tel://718-783-1936">(718) 783-1936</a></div>', 40.693846,-73.964513, 1],

    ['<div class="restaurant"><strong>Black Swan</strong><br />1048 Bedford Ave. Brooklyn, NY 11205<br /><a href="tel://718-783-4744">(718) 783-4744</a></div>', 40.689128,-73.955187, 2]
];

var takeout = [
    ['<div class="take_out"><strong>Chan&#39;s Garden</strong><br />679 Myrtle Ave. Brooklyn, NY 11205<br /><a href="tel://718-875-6637">(718) 875-6637</a></div>', 40.694729,-73.956357, 1],

    ['<div class="take_out"><strong>New Hardee Chinese Restaurant</strong><br />835 DeKalb Ave. Brooklyn, NY 11221<br /><a href="tel://718-384-0338">(718) 384-0338</a></div>', 40.692559,-73.943021, 2]
]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:39:58.403

我查看了文档，似乎标记方法 .setMap(null) （注意 null 参数）将删除标记。你已经试过了吗？

你说你已经删除了一个标记。你是怎么做的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:51:50.153

我有一个类似的问题，我目前无法访问代码以查看我是如何修复它的，但是我记得我有一个临时解决方案是重新绘制地图，不理想但可能会有所帮助，将尝试获取完整的解决方案

# c++ - 定义未定义的行为

> ID：14073305
> 
> 赞同：17
> 
> 时间：2012-12-28T17:27:43.347
> 
> 标签：c++, c, undefined-behavior

是否存在任何C++（和/或 C）的**实现**来保证任何时候调用未定义的行为，它都会发出错误信号？显然，这样的实现不如标准 C++ 实现高效，但它可能是一个有用的调试/测试工具。

如果不存在这样的实现，那么是否有任何实际原因导致无法实现？还是只是没有人完成实施它的工作？

***编辑：***为了更精确一点：我希望有一个编译器允许我做出断言，对于*运行到完成*的 C++ 程序*的给定运行*，该运行的任何部分都不涉及未定义的行为。

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T18:00:47.743

是的，没有。

我相当肯定，出于实际目的，实现可以使 C++ 成为一种安全的语言，这意味着每个操作都有明确定义的行为。当然，这会带来*巨大*的开销，并且可能在某些情况下根本不可行，例如多线程代码中的竞争条件。

现在，问题是这不能保证您的代码在其他实现中定义！也就是说，它仍然可以调用 UB。例如，观察以下代码：

```
int a;
int* b;

int foo() {
  a = 5;
  b = &a;
  return 0;
}

int bar() {
  *b = a;
  return 0;
}

int main() {
  std::cout << foo() << bar() << std::endl;
} 
```

根据标准，调用的顺序`foo`由`bar`实现决定。现在，在一个安全的实现中，必须定义这个顺序，可能是从左到右的评估。问题是评估从右到左调用 UB，直到您在不安全的实现上运行它才会被捕获。安全的实现可以简单地编译评估顺序的每个排列或进行一些静态分析，但这很快就会变得不可行并且可能无法确定。

所以总而言之，如果存在这样的实现，它会给你一种错误的安全感。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T18:01:17.137

新的 C 标准在新的附录 L 中有一个有趣的列表，粗略的标题为“可分析性”。它谈到了所谓的*关键 UB UB*。其中包括：

*   对象在其生命周期之外被引用（6.2.4）。
*   指针用于调用类型与引用类型不兼容的函数
*   程序尝试修改字符串文字

所有这些都是不可能或很难捕获的 UB，因为它们通常无法在编译时完全测试。这是因为一个有效的 C（或 C++）程序是由几个相互不了解的编译单元组成的。例如，如果一个程序将一个指向字符串文字的指针传递给一个带有`char*`参数的函数，或者更糟糕的是，一个程序会`const`从静态变量中丢弃 -ness。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T18:42:36.450

[KCC](http://code.google.com/p/c-semantics/) 和[Frama-C 的 value analysis](http://blog.frama-c.com/public/csmith.pdf)是两个 C 解释器，它们可以检测大量顺序 C 子集的一大类未定义行为。它们都用于确保自动生成、自动减少的随机 C 程序适合[报告](http://www.cs.utah.edu/~regehr/papers/pldi12-preprint.pdf)C 编译器中的错误。

从 KCC 的网页：

> 这项工作的主要目标之一是能够检测未定义的程序（例如，读取无效内存的程序）。

C 方言的第三种解释器是 CompCert 的解释器模式（a [writeup](http://blog.frama-c.com/index.php?post/2011/08/29/CompCert-gets-a-safe-interpreter-mode)）。这个检测所有在经过认证的 C 编译器 CompCert 的输入语言中未定义的行为。CompCert 的输入语言本质上是 C，但它呈现定义的一些在标准中未定义的行为（例如，有符号算术溢出被定义为计算 2 的补码结果）。

事实上，这个答案中提到的三位口译员都以实用主义的名义做出了艰难的选择。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-28T17:37:00.843

将某些东西定义为“未定义行为”的全部意义在于避免在编译器中检测到这种情况。它是这样定义的，因此可以为各种平台和架构构建编译器，并且硬件和软件不必具有“只是为了检测未定义的行为”的特定功能。想象一下，您有一个内存子系统，无法检测您是否正在写入真实内存 - 编译器或运行时系统将如何检测您刚刚完成`somepointer = rand(); *somepointer = 42;`

您可以检测到一些情况。但是要求检测到 ALL 会让生活变得非常困难。

鉴于原始问题中的编辑：我仍然认为这在 C 中不太可能实现。几乎可以自由地做任何事情（制作指向几乎任何东西的指针，这些指针可以转换、索引、重新计算等等其他事物的方式），并且将能够导致各种未定义的行为。[这里](http://busybox.net/~landley/c99-draft.html#J.2)有一个 C 语言中所有未定义行为的列表- 它列出了 186 种不同的未定义行为情况，从作为文件最后一个字符的反斜杠（可能导致编译器错误，但未定义为一个）到“比较函数bsearch 或 qsort 函数调用时返回的排序值不一致”。

您到底如何编写编译器来检查传递给 bsearch 或 qsort 的函数是否一致地对值进行排序？当然，如果传入比较函数的数据是简单类型的，比如整数，那也没那么难，但是如果数据类型是复杂的类型，比如

```
struct {
    char name[20];
    char street[20];
    int age;
    char post_code[10];
}; 
```

程序员决定按姓名升序、街道升序、年龄降序和邮政编码升序对数据进行排序？如果这就是你想要的，但不知何故代码搞砸了，并且后代码比较返回了一些不一致的结果，事情就会出错，但很难正式检查这种情况。还有很多其他的同样晦涩难懂和复杂。当然，您的代码可能不会对名称和地址等进行排序，但有人可能会在某个时候写出类似的东西。*

# angularjs - Angularjs 和 Meteor“会话”反应，有没有办法？

> ID：14073306
> 
> 赞同：5
> 
> 时间：2012-12-28T17:27:44.707
> 
> 标签：angularjs, meteor, angular-meteor

我正在尝试使用 Meteor 和 Angularjs。我正在使用[Meteor_angularjs](https://github.com/lvbreda/Meteor_angularjs)包，它适用于`Collections`.

现在我正在尝试使用`Session`我的反应式数据存储：

```
TestCtrl = [
    "$scope",
    function($scope){
        $scope.value = Session.get('someValue');
    }
] 
```

这不起作用。

**问题：**关于如何绑定 Meteor`Session`和 Angular 的任何建议？

据我了解，我可以编写将`Session`每隔一段时间轮询一次的指令，但我认为这不是一个好的选择。
谢谢

**更新：**

我尝试了以下方法：

```
TestCtrl = [
    "$scope",
    function($scope){
        Meteor.autorun(function(){
            $scope.config = Session.get('testsConfig');
            if (!$scope.$$phase){
                $scope.$digest();
            }
        });
    }
] 
```

它有点工作，但是我收到以下错误：

```
Error: INVALID_STATE_ERR: DOM Exception 11
Error: An attempt was made to use an object that is not, or is no longer, usable.
    at derez (http://localhost:3000/test:95:41)
    at derez (http://localhost:3000/test:95:30)
    at derez (http://localhost:3000/test:95:30)
    at derez (http://localhost:3000/test:95:30)
    at derez (http://localhost:3000/test:95:30)
    at derez (http://localhost:3000/test:95:30)
    at derez (http://localhost:3000/test:95:30)
    at derez (http://localhost:3000/test:95:30)
    at derez (http://localhost:3000/test:95:30)
    at derez (http://localhost:3000/test:95:30) angular.js:5526
$get angular.js:5526
$get angular.js:4660
$get.Scope.$digest angular.js:7674
(anonymous function) controllers.js:46
Meteor.autorun.rerun deps-utils.js:78
_.extend.run deps.js:19
Meteor.autorun.rerun deps-utils.js:78
_.extend.flush deps.js:63
_.each._.forEach underscore.js:79
_.extend.flush deps.js:61
_.each._.forEach underscore.js:79
_.extend.flush deps.js:60 
```

**更新 2：**

我已经尝试过这样的服务（可能是错误的用法），仍然没有。现在它根本不会更新 Session 值的变化。

```
Meteor.autorun(function(){
    app.factory('ssn', function(){ return{
        get: function(val){
            return Session.get(val);
        }
    }});
});
TestCtrl = [
    "$scope","ssn",
    function($scope, ssn){
        $scope.config = ssn.get('testsConfig');
    }
] 
```

**更新 3**：Angular[`$apply()`](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)有

> 从角度框架之外执行角度表达式。（例如来自浏览器 DOM 事件、setTimeout、XHR 或第三方库）

同时 Meteor[`Meteor.render()`](http://docs.meteor.com/#meteor_render)具有

> 不过，大多数时候，您不会直接调用这些函数——您只会使用您最喜欢的模板包，例如 Handlebars 或 Jade。render 和 renderList 函数适用于实现新模板系统的人。

但是，似乎我不能将 2 和 2 放在一起。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-12T03:43:50.500

这是一个带有旧答案的老问题，但我看到人们提到它，所以这里是更新的答案。

首先 - 有一个[新](http://www.angular-meteor.com)的 angular-meteor 库可以为您处理这些情况。

这个库为您提供了两种可能的解决方案：

1.  如果要将 Session 变量绑定到范围变量，请使用[$meteorSession](http://www.angular-meteor.com/api/1.3.0/session)服务。它的作用是每次范围变量发生变化时，它都会更改为 Session 变量（如果它被放置在一个变量中，则会触发自动运行）。每次 Session 变量发生变化时，作用域变量也会发生变化（并改变它所在的视图）。

2.  如果您使用 Session 变量只是为了获取变量响应（意味着触发自动运行），您应该使用[getReactively](http://angularjs.meteor.com/api/getReactively)。这只是返回已经存在的范围变量，但每次更改时都会触发自动运行。一个很好的例子可以在我们的[教程](http://www.angular-meteor.com/tutorials/socially/angular1/search-sort-pagination-and-reactive-vars)中找到。

    *   注意：无论如何，当你在 Angular 中使用 Tracker.autorun 时，你需要将它连接到一个作用域。[如果您将 Tracker.autorun 替换为$meteorUtils 自动运行功能](http://www.angular-meteor.com/api/1.3.0/utils)，这可以轻松完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:23:31.597

嗨，这是一个选项（可能不是最好的，但我认为它有效）

```
app.service('Session',function($rootScope){
    var self = this;
    self.objects = {};
    self.get = function(name){
            self.objects[name] = {"value" : Session.get(name)};
            Meteor.autorun(function() {
                    var i = Session.get(name);
                    if(self.objects[name].value != i){
                            if (!$rootScope.$$phase){
                                    $rootScope.$apply(function(){
                                            self.objects[name].value = i;
                                    });
                            }
                    }
            });
            return self.objects[name];
        }
        self.set = function(name,value){
            self.objects[name].value  = value;
            Session.set(name,value);
        }
        return self;
}); 
```

像这样在 $scope 中调用它 $scope.test = Session.get("test");

在视图中为 {{test.value}}。抱歉回复晚了 。

新年快乐！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T14:33:02.647

尝试

```
angular.module('yourmod', [])
.controller('TestCtrl', ['$scope', function($scope) {
  var c = Deps.autorun(function (comp) {
     //... put reactive stuf on scope.....
     if(!comp.firstRun) {
       // only do not do aply at first run becaulse then apply is already running.
       $scope.$apply()
     }
  });

  // and to realy make it nice...
  $scope.on('$destroy', function () {c.stop()});
}]) 
```

# http - 如何唯一标识同一页面的各种 URL？

> ID：14073313
> 
> 赞同：0
> 
> 时间：2012-12-28T17:28:39.937
> 
> 标签：http, url

许多 URL，特别是博客、文章要么由短 URL 表示，要么有一个重定向最终将您从当前 URL 带到相同的 URL。有时根据浏览器和其他信息，查询字符串参数会发生变化。服务器端从 URL 的不同变体中唯一标识文章的逻辑应该是什么？

# apache - Apache 的自定义错误页面

> ID：14073315
> 
> 赞同：0
> 
> 时间：2012-12-28T17:28:48.940
> 
> 标签：apache, http-status-code-404, custom-error-pages

我的 .htaccess 文件：

```
AuthType Basic
AuthName "FORBIDDEN AREA"
AuthUserfile "../htdocs/forbidden/.htpasswd"
Require valid-user

<Directory /server>
  Order allow,deny
  Allow from all
</Directory>

ErrorDocument 500 /server/error500.html
ErrorDocument 404 /server/error404.html
ErrorDocument 404 /server/error404.html
ErrorDocument 402 /subscription_info.html 
```

* * *

我所有的错误页面都在 htdocs/server/error***.html

但是 Apache 显示了它的通用错误页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:38:26.793

ErrorDocument 404 [http://site.com/error.php](http://site.com/error.php)作为您的恢复。

# php - jQuery文件上传

> ID：14073316
> 
> 赞同：0
> 
> 时间：2012-12-28T17:28:58.347
> 
> 标签：php, jquery, ajax, json

我正在使用 Jquery 文件上传小部件，[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

我设法以我想要的方式将所有图像获取到我的数据库中，但我无法仅查看我想要的图像。在索引页面中，它查看“文件”文件夹中的所有图像。

我正在制作一个包含多个相册的图片库。

![照片表](../Images/c1efdcc7574673969ca6dccaea999c05.png)

上图显示了我的照片表。我有图像的名称和一个数字 (in_album)，告诉我它在哪个专辑中。例如，当我访问 www.example.com/gallery.php/album?12 时，我只希望查看那些 in_album = 12 的照片，而不是文件夹中的所有照片。我想我需要使用 JSON 或其他东西来实现这一点，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-01T14:27:23.743

没用，但它有效：

```
 <!-- The template to display files available for download -->
    <script id="template-download" type="text/x-tmpl">
    {% for (var i=0, file; file=o.files[i]; i++) { %}

        {% if (file.in_album == '12') { %}

        <tr class="template-download fade">
            <td>
                <span class="preview">
                    {% if (file.thumbnailUrl) { %}
                        <a href="{%=file.url%}" title="{%=file.name%}" download="{%=file.name%}" data-gallery><img src="{%=file.thumbnailUrl%}"></a>
                    {% } %}
                </span>
            </td>
            <td>
                <p class="name">
                    {% if (file.url) { %}
                        <a href="{%=file.url%}" title="{%=file.name%}" download="{%=file.name%}" {%=file.thumbnailUrl?'data-gallery':''%}>{%=file.name%}</a>
                    {% } else { %}
                        <span>{%=file.name%}</span>
                    {% } %}
                </p>
                {% if (file.error) { %}
                    <div><span class="label label-danger">Error</span> {%=file.error%}</div>
                {% } %}
            </td>
            <td>
                <span class="size">{%=o.formatFileSize(file.size)%}</span>
            </td>
            <td>
                {% if (file.deleteUrl) { %}
                    <button class="btn btn-danger delete" data-type="{%=file.deleteType%}" data-url="{%=file.deleteUrl%}"{% if (file.deleteWithCredentials) { %} data-xhr-fields='{"withCredentials":true}'{% } %}>
                        <i class="glyphicon glyphicon-trash"></i>
                        <span>Delete</span>
                    </button>
                    <input type="checkbox" name="delete" value="1" class="toggle">
                {% } else { %}
                    <button class="btn btn-warning cancel">
                        <i class="glyphicon glyphicon-ban-circle"></i>
                        <span>Cancel</span>
                    </button>
                {% } %}
            </td>
        </tr>
                    {% } %}

    {% } %}
    </script> 
```

# windows-phone-7 - 重命名页面在windows phone上出现错误

> ID：14073318
> 
> 赞同：0
> 
> 时间：2012-12-28T17:29:04.807
> 
> 标签：windows-phone-7

我想重命名 xaml 和 cs 文件，所以我选择了这个文件（在解决方案资源管理器中）然后按 F2 并输入新名称。当我运行它时，它在这条线上出现错误 system.Diagnostics.Debugger.Break(); 为什么我会出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:32:07.373

那不是错误。

正如其名称清楚地表明，该方法在调用时会暂停调试器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:33:26.443

您还需要打开 cs 文件并更改 cs 文件上的公共类名称。另外，请自行更改设计视图上的 x:Class= namespace.yourpagename。

# java - 获取 Java 内部类的外部类实例的类名

> ID：14073320
> 
> 赞同：3
> 
> 时间：2012-12-28T17:29:28.067
> 
> 标签：java, inner-classes

```
abstract class Base {
...
  public class Inner {
    private final String ownerClassName;
    public Inner() {
    ...
    }
  }
  public static class Super1 extends Base{
  ...
  }
  public static class Super2 extends Base{
  ...
  }
} 
```

我想`Inner.Inner()`设置`ownerClassName`为封闭类实例的类型，例如“Super1”或“Super2”。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T17:31:12.863

```
Base.this.getClass().getName() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T18:03:56.367

首先从 ownerClassName 中删除 final，将其设为私有，并在需要时仅提供 get 方法。

然后按照代码：

```
Inner() {
   ownerClassName = Base.this.getClass().getSimpleName();
} 
```

# android - 是否可以取消/停止使用 DownloadManager 开始的下载？

> ID：14073323
> 
> 赞同：22
> 
> 时间：2012-12-28T17:29:33.447
> 
> 标签：android, android-download-manager

我正在使用 DownloadManager 在我的应用程序中下载一堆文件。我无法弄清楚如何取消已由 downloadManager 排队的下载。

有两种可能：a. 用户可以通过在通知栏中单击它来手动取消它。湾。通过代码取消并删除下载。

我定义了以下接收器。

```
<receiver 
        android:name=".DownloadStatusReceiver"
        android:exported="true">
        <intent-filter>
            <action android:name="android.intent.action.DOWNLOAD_COMPLETE" />
            <action android:name="android.intent.action.DOWNLOAD_NOTIFICATION_CLICKED" />
     </intent-filter>
 </receiver> 
```

在接收器中

```
if (DownloadManager.ACTION_NOTIFICATION_CLICKED.equals(action)) {

    Constants.showLog(TAG, "Notification clicked");
    long downloadId = intent.getLongExtra(DownloadManager.EXTRA_DOWNLOAD_ID, 0);
    DownloadManager dm =(DownloadManager)context.getSystemService(Context.DOWNLOAD_SERVICE);             
    dm.remove(downloadId);

} 
```

有什么见解吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-30T03:57:41.883

`DownloadManager`您可以通过调用其`remove(long...)`方法取消下载。为此，您需要下载的 ID。根据我的经验，基本上有两种可靠的方法来获得它：

1.  记住方法的返回值`enqueue(DownloadManager.Request)`。
2.  通过方法查询`DownloadManager`下载。`query(DownloadManager.Query)`然后从返回的 中检索 ID `Cursor`，它们存储在名为 的列中`DownloadManager.COLUMN_ID`。

**广播接收器**

根据我的经验，通过`BroadcastReceiver`操作检索下载 ID 是不可靠的`android.intent.action.DOWNLOAD_NOTIFICATION_CLICKED`（尽管总是发送广播）。

1.  从 extra 获取下载 ID`DownloadManager. EXTRA_NOTIFICATION_CLICK_DOWNLOAD_IDS`无法正常工作。在某些设备上，它总是返回 null。如果它在某些设备上返回某些内容，则它是首先开始下载的 ID。如果第一次下载完成/取消，则返回 null 以通知剩余下载。
2.  从 extra 中获取值`DownloadManager.EXTRA_DOWNLOAD_ID`不适用于此操作。

在广播中获取 ID 以采取行动`android.intent.action.DOWNLOAD_COMPLETE`似乎是可靠的。你必须从 extra 中得到它`DownloadManager.EXTRA_DOWNLOAD_ID`。请注意，广播不仅会在下载完成时发送，还会在您取消下载调用时发送`remove()`。

**注意：** 下载有时会在一个通知中分组，有时会创建多个通知。我无法弄清楚通知何时分组和不分组的条件。它似乎取决于许多因素，如操作系统版本、设备、下载标题……而且总的来说似乎相当不可预测。

**注意：** 我测试了你是否可以取消其他应用程序的下载，但似乎不能。即使 ID 是在所有应用程序中唯一的数据库 ID。呼叫`remove()`不会取消另一个应用程序的下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-29T16:50:32.577

如果您正在寻找如何停止下载，那么我相信您知道如何通过 URL 下载数据。
我希望您熟悉第 1 点、第 2 点和第 3 点，您的解决方案是第 4 点。

1.  `private var mgr: DownloadManager? = null`
2.  `private var enqueue: Long? = null`
3.  `enqueue = mgr?.enqueue(request)`
4.  `mgr?.remove(enqueue!!)`

# api - Firebase 通过 REST API PHP CURL 获取数据

> ID：14073328
> 
> 赞同：2
> 
> 时间：2012-12-28T17:29:42.560
> 
> 标签：api, rest, firebase

尝试通过 PHP cURL 进行简单的读取。如果我的安全规则允许所有人进入，我可以成功读取我的数据，例如

```
{
  "rules": {
    ".read": true,
    ".write": true
  }
} 
```

但是，如果我将读/写限制为特定的用户名，例如

```
{
  "rules": {
    ".read": "auth.username == 'admin'",
    ".write": "auth.username == 'admin'"
  }
} 
```

我得到许可被拒绝。

代码如下...

```
require('JWT.php');
$secret = 'MY_FIREBASE_SECRET';
$data = array('username' => 'admin');
$token = JWT::encode($data, $secret);

$url = "https://MY_FIREBASE.firebaseio.com/messages.json?auth=$token";
$curl = curl_init();
curl_setopt_array($curl, array(
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_URL => $url
));
$response = curl_exec($curl); 
```

* * *

值得注意的是，如果我只使用我的 FB 密码而不是 URL 中的令牌，我就能够成功读取数据（auth=$secret）。我还使用“自定义身份验证”成功测试了在 Forge 模拟器中读取数据，例如 {'username': 'admin'}

我正在使用 PHP JWT 库：[https ://github.com/luciferous/jwt/blob/master/JWT.php](https://github.com/luciferous/jwt/blob/master/JWT.php)

不确定我是否因为我的 cURL 调用不正确或者我没有正确构建令牌而被拒绝许可。我曾尝试通过 cURL 使用 POST 和 GET，但我得到了相同的结果。

我们欢迎所有的建议...

* * *

感谢安德鲁的超快速反应。我试过你的建议。不幸的是，我仍然收到“权限被拒绝”。这是我更新的代码...

```
require('JWT.php');
$secret = 'my-secret';
$user = array( 'v' => 0, 'iat' => time(), 'd' => array('username' => 'admin', 'type' => 'admin', 'fullname' => 'Administrator'));
$token = JWT::encode($user, $secret);
$curl = curl_init();
$url = "https://myfirebase.firebaseio.com/messages.json?auth=$token";
curl_setopt_array($curl, array(
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_URL => $url
));
$response = curl_exec($curl);
curl_close($curl); 
```

*   我确实通过将我们数据的 .read 规则更改为“auth！= null”来实现这一点 - 但这似乎并不那么安全......

    * * *

作为参考，我们的数据结构很简单

```
+ myfirebase
            + messages
                       - 000001 = "this is the 1st test message"
                       - 000002 = "this is the 2nd test message" 
```

顺便说一句：我们的应用程序将只有 1 个用户读取/写入数据。如果我无法让令牌工作......有没有更好的方法来通过 REST API 对调用进行身份验证，而无需在 URL 中传递我们的密钥？例如 &auth='我的秘密'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:56:22.523

Firebase JWT 有一些这里缺少的结构。此处详细说明了这些身份验证令牌中应包含的内容： [https ://www.firebase.com/docs/security/jwt-auth-token-format.html](https://www.firebase.com/docs/security/jwt-auth-token-format.html)

这是具有适当结构的片段。

```
require_once('JWT.php');

$fbSecret = 'your-secret';
$user = array( 'v' => 0, 'iat' => <timestamp>, 
  'd' => array('username' => 'jimbob', 'type' => 'admin',\
    'fullname' => 'Jim Bob')
  );
$token = JWT::encode($user, $fbSecret); 
```

请注意，“d”字段包含实际的有效负载。“v”和“iat”也是必需的。“iat”应该是自纪元以来的秒数（它是 (new Date()).getTime() 在 Javascript 中返回的数字）。

# php - PHP NET_SSH 读写无法按预期工作

> ID：14073333
> 
> 赞同：0
> 
> 时间：2012-12-28T17:30:02.200
> 
> 标签：php, ssh, phpseclib

我正在尝试使用 NET_SSH 通过 SSH 连接连接到 mysql 数据库。我正在使用具有读写功能的交互式外壳。

我的代码如下所示：

```
echo '<pre>';
        $ssh -> setTimeout(10);
        echo $ssh -> read('');

        $ssh -> write('ls');
        echo $ssh -> read('');
        echo '<br />';

        $string = 'mysql -u '. $database -> database_user . ' -h ' . $database -> datbase_host . ' --password=' . $database -> database_password . ' ' . $database -> database_name. '; show databases;';
        $ssh -> write($string);
        echo $ssh -> read('mysql>');
        echo '<br />';

        $this -> write('show databases;');

        echo $ssh -> read('');
        echo '<br />'; 
```

但我的输出如下所示：

```
 lsubuntu@ip-xxxxxx:~$ ls
    Last login: Fri Dec 28 16:08:39 2012 from ool3.dyn.optonline.net

    mysql -u db_user -h xxx.us-east-1.rds.amazonaws.com --password=abc123 my_database; show databases;ubuntu@ip-xxxxxx:~$ mysql -u db_user -h xxx.rds.amazonaws.com --password=abc123 my_database; show databases;
    Last login: Fri Dec 28 16:08:49 2012 from ool3.dyn.optonline.net

show databases;ubuntu@ip-10-151-4-222:~$ show databases; 
```

我的问题是，为什么不像我想象的那样互动？我应该说预期的结果是一个 mysql 连接或至少一个 mysql 提示符。但我只是明白这一点。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T06:44:30.513

老实说，我会完全重写。例如。

```
echo '<pre>';
        echo $ssh -> read('[prompt]');

        $ssh -> write("ls\n");
        echo $ssh -> read('[prompt]');
        echo '<br />';

        $string = 'mysql -u '. $database -> database_user . ' -h ' . $database -> datbase_host . ' --password=' . $database -> database_password . ' ' . $database -> database_name. '; show databases;';
        $ssh -> write("$string\n");
        echo $ssh -> read('mysql>');
        echo '<br />';

        $this -> write("show databases;\n");

        echo $ssh -> read('mysql>');
        echo '<br />'; 
```

我唯一一次使用 read('') 是为了弄清楚提示是什么。

另外，请注意我如何用 \n 结束每个写入请求。Linux 不是某种 AJAXified 服务器。您不只是键入命令并期望它运行。你必须点击进入。

我的意思是，有时您可以按一下键，他们会在不按 Enter 的情况下执行操作。就像在 vi 中的某些情况下一样。您处于正常模式（与插入模式相反）并且您在某个打开的文本文件上按 dd 并且您所在的整行被删除，即使您没有按 Enter。

# spss - MDP 的 PCA 的 SPSS 等价物是什么？

> ID：14073334
> 
> 赞同：0
> 
> 时间：2012-12-28T14:45:57.773
> 
> 标签：spss, pca, python

我需要使用 Python 的主成分分析。MDP 库提供 PCA 功能，但文档对我来说不是很清楚。我以前使用过来自 SPSS 的 PCA，它为 PCA 提供了各种选项（例如不同的旋转）。

如果有人熟悉 MDP 和 SPSS，请突出显示 SPSS 中 PCA 的等效设置，以便从 MDP 获得与 PCA 相似的结果（mdp.nodes.PCANode() - 为简单起见，让我们考虑默认值）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:14:29.967

试试 scikit-learn。这是一个很棒的工具包，并且有华丽的文档。

PCA：[http ://scikit-learn.org/dev/modules/generated/sklearn.decomposition.PCA.html](http://scikit-learn.org/dev/modules/generated/sklearn.decomposition.PCA.html)

# oop - MVC - 从一个模型到另一个模型的数据转换？

> ID：14073336
> 
> 赞同：2
> 
> 时间：2012-12-28T17:30:09.137
> 
> 标签：oop, model-view-controller, transformation, ooad, object-oriented-analysis

在模型视图控制器模式中，数据转换应该发生在哪里？

我有一个存储非常具体的数学数据的模型。我需要将这些数据转换为物理模拟器（只接受某种格式的数据），我想知道它的代码应该放在哪里？一般来说，将一个模型转换为另一种模型的代码放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:42:17.460

就个人而言，我喜欢将这段代码放在模型派生类型的构造函数中。这样，进行转换的代码就在需要使用它的类中。我发现这种组织代码的方式更容易理解、测试和维护。

使用你的例子，假设你有一个如下的类（你没有提到你使用的是什么语言，所以我将在 C# 中给出下面的代码，但它在 java 中非常相似）：

```
public class MathematicalData
{
     //members of class
} 
```

假设您需要获取 MathematicalData 实例的成员并将它们转换为另一个名为 PhysicsSimulator 的类。我会要求 PhysicsSimulator 的构造函数将 MathematicalData 实例作为输入参数，然后在此构造函数中填充 PhysicsSimulator 的成员：

```
public class PhysicsSimulator
{
    //constructor
    public PhysicsSimulator(MathematicalData input)
    {
        //put code here to use the members of input to populate members of this instance of PhysicsSimulator
    }
} 
```

如果您想要创建 PhysicsSimulator 实例的唯一方法是使用 MathematicalData 实例，那么我不会为 PhysicsSimulator 创建默认构造函数。这样，创建 PhysicsSimulator 的唯一方法是传入一个 MathematicalData 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:00:01.543

在我看来，您需要设计一个适配器接口来实现这一点。让 target( `PhysicsSimulator`) 的构造函数接受 source( `MathData`) 对象会将它们联系起来，这样当源因任何原因发生更改时，目标***必须***更改。

适配器将限制对适配器的更改，并且不会强制目标因源中的每次更改而更改。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:48:43.590

这是我为 MVC Web 应用程序遵循的典型模式。来自网络的输入进入模型，然后**控制器**负责在调用业务层操作之前将网络模型转换为业务层模型。

为了防止控制器因转换代码而臃肿，我将在合适的时候将转换卸载到[AutoMapper 。](http://automapper.codeplex.com)

# ruby - ruby中yield方法的主要用途是什么？

> ID：14073337
> 
> 赞同：0
> 
> 时间：2012-12-28T17:30:20.263
> 
> 标签：ruby, block

> **可能重复：**
> [在一个块内让步是什么意思？](https://stackoverflow.com/questions/1419780/what-does-it-mean-to-yield-within-a-block)

我必须对 ruby​​ Blocks、Proc 和 lambda 使用 yield 方法，但任何其他方法都可以做出明确的答案，任何人都可以解释。提前致谢

# javascript - Javascript - 获取 div 的内容，解码 base64，用解码的内容替换相同的 div

> ID：14073339
> 
> 赞同：1
> 
> 时间：2012-12-28T17:01:10.603
> 
> 标签：javascript

假设我有一个带有 div 的页面，它可能有也可能没有（无法控制内容）有 base64 编码的内容。我有一个按钮，单击该按钮将获取 div 的内容，解码 base64，然后用解码的内容替换相同的 div。

我知道 innerHTML 可以获取任何元素的内容。
我知道`btoa()`并且`atob()`可以解码base64，并且网上有足够的功能可以为IE做。

但是我不知道如何将两者结合起来，然后用解码结果替换同一个 div 的内容。做上述事情的最佳方法是什么？Jquery 可用，其他框架不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:40:02.150

你可以像这样使用jquery[`.html()`方法](http://api.jquery.com/html/#html2)

```
<div class="encoded">SGVsbG8gV29ybGQ=</div> 
```

和

```
$('.encoded').html(function(i,current){
    return atob(current); //return the decoded string
}); 
```

假设您要定位的 div`encoded`应用了一个类..（*该类只是定位元素的示例*）

**演示在** [http://jsfiddle.net/gaby/k5SSH/1//](http://jsfiddle.net/gaby/k5SSH/1//)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:36:15.087

### 你可以使用这样的函数：

```
 function encode64(input) {
     input = escape(input);
     var output = "";
     var chr1, chr2, chr3 = "";
     var enc1, enc2, enc3, enc4 = "";
     var i = 0;

     do {
        chr1 = input.charCodeAt(i++);
        chr2 = input.charCodeAt(i++);
        chr3 = input.charCodeAt(i++);

        enc1 = chr1 >> 2;
        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
        enc4 = chr3 & 63;

        if (isNaN(chr2)) {
           enc3 = enc4 = 64;
        } else if (isNaN(chr3)) {
           enc4 = 64;
        }

        output = output +
           keyStr.charAt(enc1) +
           keyStr.charAt(enc2) +
           keyStr.charAt(enc3) +
           keyStr.charAt(enc4);
        chr1 = chr2 = chr3 = "";
        enc1 = enc2 = enc3 = enc4 = "";
     } while (i < input.length);

     return output;
  }

  function decode64(input) {
     var output = "";
     var chr1, chr2, chr3 = "";
     var enc1, enc2, enc3, enc4 = "";
     var i = 0;

     // remove all characters that are not A-Z, a-z, 0-9, +, /, or =
     var base64test = /[^A-Za-z0-9\+\/\=]/g;
     if (base64test.exec(input)) {
        alert("There were invalid base64 characters in the input text.\n" +
              "Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\n" +
              "Expect errors in decoding.");
     }
     input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

     do {
        enc1 = keyStr.indexOf(input.charAt(i++));
        enc2 = keyStr.indexOf(input.charAt(i++));
        enc3 = keyStr.indexOf(input.charAt(i++));
        enc4 = keyStr.indexOf(input.charAt(i++));

        chr1 = (enc1 << 2) | (enc2 >> 4);
        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
        chr3 = ((enc3 & 3) << 6) | enc4;

        output = output + String.fromCharCode(chr1);

        if (enc3 != 64) {
           output = output + String.fromCharCode(chr2);
        }
        if (enc4 != 64) {
           output = output + String.fromCharCode(chr3);
        }

        chr1 = chr2 = chr3 = "";
        enc1 = enc2 = enc3 = enc4 = "";

     } while (i < input.length);

     return unescape(output);
  } 
```

### 更多信息： http: [//ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.html](http://ntt.cc/2008/01/19/base64-encoder-decoder-with-javascript.html)

# php - $_get 下一页的数组项

> ID：14073342
> 
> 赞同：0
> 
> 时间：2012-12-28T17:30:36.490
> 
> 标签：php, arrays, get

我需要以下网站/网上商店的帮助。

[http://alisgfx.com/lomo/](http://alisgfx.com/lomo/)

轮播中的项目是从带有 phpforeach 的数组中加载的。我想要做的是当您单击一个项目时，您将转到名为 index.php?product=productname 的下一页

我认为获取变量是一种选择，但我不知道如何将它与我的数组结合起来。我怎样才能简单地实现这一目标？

**索引.php**

```
<?php
# include de benodigde bestanden (require geeft een fatale fout als het niet lukt)
require('inc/config.inc.php');
require('inc/functions.inc.php');
require('inc/template.inc.php');

# geef de HTML code voor het openen van de pagina weer
htmlOpenen('Introtekst');

toonHeader();

include 'menu.php';

?>

<!-- producten carousel -->
<section class="carousel">
    <div class="banner"><img src="img/nieuw.jpg"></div>
    <div id="slider1">
        <a class="buttons prev" href="#">left</a>
        <div class="viewport">
            <ul class="overview">
                <?php 
                foreach($nieuwBinnen as $new) {
                    echo '
                        <li>
                            <h2>'.$new['naam'].'</h2>
                            <p>'.$new['product'].'</p>
                        </li>
                    ';
                }
                ?>
            </ul>
        </div>
        <a class="buttons next" href="#">right</a>
    </div>
</section>

<section class="carousel">
    <div class="banner"><img src="img/best.jpg"></div>
    <div id="slider2">
        <a class="buttons prev" href="#">left</a>
        <div class="viewport">
            <ul class="overview">
                <?php 
                foreach($bestSellers as $bestseller) {
                    echo '
                        <li>
                            <h2>'.$bestseller['naam'].'</h2>
                            <p>'.$bestseller['product'].'</p>
                        </li>
                    ';
                }
                ?>
            </ul>
        </div>
        <a class="buttons next" href="#">right</a>
    </div>
</section>

<?php

include 'footer.php';

 ?> 
```

**函数.php**

```
<?php 
#functies

$nieuwBinnen = array(

    array('naam'    => 'Product 1',
          'product' => 'img',
          'info'    => 'Everybody loves microcontrollers, including the Arduino, allowing you to create whatever you imagine. That is unless you want to hack together something wireless. Originally you had to rely on the expensive XBee protocol or other wireless options, but no longer. Hobby Robotics found an extremely cheap transmitter and receiver and wrote a quick guide for wiring them up to an Arduino. Now your wireless projects can come to life, as long as you are within 500 feet and don’t mind 2400bps; minor trade offs compared to the gains of wireless freedom. Final note: You aren’t limited to Arduino, we would love to see someone modify this to work with a PIC or other microcontroller.',
          'prijs'   => 'img',
          'beschik' => 'op voorraad',
          'fotos'   => 'imgs',
          'upload'  => 'imgs'),

    array('naam'    => 'Product 2',
          'product' => 'img',
          'info'    => '[Joey] sent us a link to his Gameboy foot controller. In the video above, you can see him using it to control the loops in the background while he plays his guitar through an 8-bit filter. He tells us that several gameboys were used in the construction. At one point, he had to replace the guts because the music was so loud it knocked his equipment over and destroyed it. We can’t help but feel just a tiny bit of excitement as memories of renting a NES cartridge for the weekend fill our heads when we hear these riffs. His music isn’t too bad either. There is a growing crowd of people that support “chip music”. You can see what looks like a decent sized gathering enjoying a show with a little bit of a history lesson after the break.'),

    array('naam'    => 'Product 3',
          'product' => 'img',
          'info'    => 'The Linux4nano project has been working to port the Linux kernel onto the iPod Nano along with other iPods in general. Although the iPodLinux project has had luck with some older iPods, newer models protect firmware updates with encryption. One of the ways they plan on running code on the device is through a vulnerability in the notes program; it causes the processor to jump to a specific instruction and execute arbitrary code. To take advantage of this, they first need to figure out where their injected code ends up in the memory. Currently, they are testing every memory location by painstakingly loading in a bogus note and recording its effect. Each note takes about a minute to test and they have tens of thousands of addresses to check over several devices.'),

    array('naam'    => 'Product 4',
          'product' => 'img', 
          'info'    => 'The MIT Camera Culture Group utilized Bokeh, an effect where the lens is purposely placed out of focus, in order to vastly improve current 2D barcode technology. Dubbed Bokode, the team claims that an off the shelf camera can read data 2.5 microns from a distance of over 4 meters, compared to today’s average barcode reader’s maximum distance of only a foot or so. What looks most interesting is the ability to produce a smoother and more accurate distance and angle calculations (relative to the camera): allowing for a better augmented reality. It also seems to be more secure than traditional 2D barcodes, that is of course until the hacker community gets a hold of it.'),

    array('naam'    => 'Product 5',
          'product' => 'img',
          'info'    => '[Peter Kirn] over at Create Digital Music takes an in depth look at the process of adding your own music to Rock Band 2\. This involves using REAPER audio production software, uploading your work via the XNA Creators’ Club, and then playing the fresh track on an Xbox 360\. Both REAPER and the XNA Club cost money, and the total price comes out somewhere between $100-$160\. The process is now in closed beta but a wider beta is expected in September followed by a full release in October.')
);

$bestSellers = array(

    array('naam'    => 'Product 1',
          'product' => 'img',
          'info'    => 'Everybody loves microcontrollers, including the Arduino, allowing you to create whatever you imagine. That is unless you want to hack together something wireless. Originally you had to rely on the expensive XBee protocol or other wireless options, but no longer. Hobby Robotics found an extremely cheap transmitter and receiver and wrote a quick guide for wiring them up to an Arduino. Now your wireless projects can come to life, as long as you are within 500 feet and don’t mind 2400bps; minor trade offs compared to the gains of wireless freedom. Final note: You aren’t limited to Arduino, we would love to see someone modify this to work with a PIC or other microcontroller.'),

    array('naam'    => 'Product 2',
          'product' => 'img',
          'info'    => '[Joey] sent us a link to his Gameboy foot controller. In the video above, you can see him using it to control the loops in the background while he plays his guitar through an 8-bit filter. He tells us that several gameboys were used in the construction. At one point, he had to replace the guts because the music was so loud it knocked his equipment over and destroyed it. We can’t help but feel just a tiny bit of excitement as memories of renting a NES cartridge for the weekend fill our heads when we hear these riffs. His music isn’t too bad either. There is a growing crowd of people that support “chip music”. You can see what looks like a decent sized gathering enjoying a show with a little bit of a history lesson after the break.'),

    array('naam'    => 'Product 3',
          'product' => 'img',
          'info'    => 'The Linux4nano project has been working to port the Linux kernel onto the iPod Nano along with other iPods in general. Although the iPodLinux project has had luck with some older iPods, newer models protect firmware updates with encryption. One of the ways they plan on running code on the device is through a vulnerability in the notes program; it causes the processor to jump to a specific instruction and execute arbitrary code. To take advantage of this, they first need to figure out where their injected code ends up in the memory. Currently, they are testing every memory location by painstakingly loading in a bogus note and recording its effect. Each note takes about a minute to test and they have tens of thousands of addresses to check over several devices.'),

    array('naam'    => 'Product 4',
          'product' => 'img', 
          'info'    => 'The MIT Camera Culture Group utilized Bokeh, an effect where the lens is purposely placed out of focus, in order to vastly improve current 2D barcode technology. Dubbed Bokode, the team claims that an off the shelf camera can read data 2.5 microns from a distance of over 4 meters, compared to today’s average barcode reader’s maximum distance of only a foot or so. What looks most interesting is the ability to produce a smoother and more accurate distance and angle calculations (relative to the camera): allowing for a better augmented reality. It also seems to be more secure than traditional 2D barcodes, that is of course until the hacker community gets a hold of it.'),

    array('naam'    => 'Product 5',
          'product' => 'img',
          'info'    => '[Peter Kirn] over at Create Digital Music takes an in depth look at the process of adding your own music to Rock Band 2\. This involves using REAPER audio production software, uploading your work via the XNA Creators’ Club, and then playing the fresh track on an Xbox 360\. Both REAPER and the XNA Club cost money, and the total price comes out somewhere between $100-$160\. The process is now in closed beta but a wider beta is expected in September followed by a full release in October.')
);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:38:46.270

```
 foreach($bestSellers as $bestseller) {
                echo '
                    <li>
                        <a href="index.php?product='.$bestseller['naam'].'">
                            <h2>'.$bestseller['naam'].'</h2>
                            <p>'.$bestseller['product'].'</p>
                        </a>
                    </li>
                ';
            } 
```

除了关于您的产品名称中有空格的问题（您应该通过使用 URL 友好的标识符来解决这个问题，例如“Product-1”）；像上面这样的东西可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:41:11.570

在您的元素周围添加一个`<a href>`链接-`<li>`

```
foreach($nieuwBinnen as $new) {
    echo '
        <li>
            <a href="index.php?category=new&product='.urlencode($new['naam']).'">
            <h2>'.$new['naam'].'</h2>
            <p>'.$new['product'].'</p>
            </a>
        </li>
    ';
}

foreach($bestSellers as $bestseller) {
    echo '
        <li>
            <a href="index.php?category=bestseller&product='.urlencode($bestseller['naam']).'">
            <h2>'.$bestseller['naam'].'</h2>
            <p>'.$bestseller['product'].'</p>
            </a>
        </li>
    ';
} 
```

* * *

编辑

您想检查是否选择了产品并显示信息，如果没有，则显示您的产品列表。我注意到`$nieuwBinnen`&`$bestSellers`有相同的产品。我认为情况并非总是如此，因此您需要添加`category=`到您的链接以选择您从哪个数组中选择产品 ( `index.php?category=#&product=#`)。以下内容未经测试，但应该让您朝着正确的方向前进。

```
if (isset($_GET['category']) && isset($_GET['product']) && isset($$_GET['category'])){  //display product if provided
    $category = $$_GET['category'];
    $product = $_GET['product'];
    $error_msg = 1;  //sets a basic error catcher in case product does not exist
    foreach ($category as $item) {
       if ($item['naam'] == $product) {
        echo $item['naam']."<br/>";
        echo $item['product']."<br/>";
        echo $item['info']."<br/>";
        $error = 0;
       }       
    }
 if ($error_msg){ //basic error message in case product does not exist
     echo 'The selected product no longer exists';
 } 
}          
else{  //displays all product if specific product not given
?>  
<!-- producten carousel -->
<section class="carousel">
    <div class="banner"><img src="img/nieuw.jpg"></div>
    <div id="slider1">
        <a class="buttons prev" href="#">left</a>
        <div class="viewport">
            <ul class="overview">
                <?php 
                foreach($nieuwBinnen as $new) {
                    echo '
                        <li>
                            <a href="index.php?category=nieuwBinnen&product='.urlencode($new['naam']).'">
                            <h2>'.$new['naam'].'</h2>
                            <p>'.$new['product'].'</p>
                            </a>
                        </li>
                    ';
                }
                ?>
            </ul>
        </div>
        <a class="buttons next" href="#">right</a>
    </div>
</section>

<section class="carousel">
    <div class="banner"><img src="img/best.jpg"></div>
    <div id="slider2">
        <a class="buttons prev" href="#">left</a>
        <div class="viewport">
            <ul class="overview">
                <?php 
                foreach($bestSellers as $bestseller) {
                    echo '
                        <li>
                            <a href="index.php?category=bestSellers&product='.urlencode($new['naam']).'">
                            <h2>'.$bestseller['naam'].'</h2>
                            <p>'.$bestseller['product'].'</p>
                            </a>
                        </li>
                    ';
                }
                ?>
            </ul>
        </div>
        <a class="buttons next" href="#">right</a>
    </div>
</section>
<?php
}

include 'footer.php';
?> 
```

# c# - 对 Try / Catch 进行具体说明

> ID：14073345
> 
> 赞同：10
> 
> 时间：2012-12-28T17:30:38.527
> 
> 标签：c#, exception-handling, try-catch

作为编程新手，我刚刚发现您可以专门捕获某些类型的错误并将代码仅与该类型的错误联系起来。

我一直在研究这个主题，但我不太了解语法，例如

```
catch (InvalidCastException e) 
 {
 } 
```

我知道这`InvalidCastException`是正在处理的错误类型，但是我不确定是什么`e`。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-28T17:33:19.157

假设没有`e`. 您将如何获得异常消息？

名称`e`（或任何其他名称）可用于获取异常对象的句柄，以便从中提取信息。

不给出任何名称是合法的语法：

```
catch (InvalidCastException) //legal C# 
```

这行得通，但是除了它的类型之外，您对错误一无所知。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-28T17:32:05.247

`e`是保存特定于异常的数据的对象。如果您查看不同类型的异常，您会发现它们都有不同类型的数据。许多人不这样做，但许多人这样做，当他们这样做时，它们可以帮助您准确识别发生的事情，而不是仅仅得到一个通用错误。

例如，定义了一个在普通对象中不存在的`NotFiniteNumberException`名为的附加属性......然后这提供了您可能需要弄清楚到底发生了什么的附加数据。`OffendingNumber``Exception`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-28T17:32:23.330

`"e"`就是您决定调用异常的任何内容。就像你会做的那样

```
string name = "..."; 
```

或者

```
int total = 8; 
```

where `string`and `int`in this example是数据类型，（在您的情况下，数据类型是`InvalidCastException`），而“ `name`”和“ `total`”是变量名称，在您的情况下只是“ `e`”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-28T17:32:15.670

这`'e'`只是变量名称，您可以调用它，`'ex'`或者`'exception'`如果您发现它更易于阅读。但这`'e'`只是一个约定，就像`for i = 0...`构造中的“i”

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-28T17:33:50.487

`e``InvalidCastException`是放置实例的变量。然后，您可以查看该对象的属性，以帮助您准确了解导致`try`块中代码抛出错误的原因。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-28T17:35:00.560

“InvalidCastException”是类型，e是这个类型的对象。使用该对象，您可以在其上调用成员函数。例如

```
catch (InvalidCastException e) {
    ...
    e.printErrorMessage();
    ... 
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-12-28T17:32:45.240

`e`是对存储捕获的异常详细信息的异常对象的引用。详细信息可能包括异常`Message`、`InnerException`对象等。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-12-28T17:32:01.710

`e`是一个变量名。它可以是您想要命名的任何名称，例如`exception`.

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-28T17:32:46.813

`e`是保存异常的变量，所以现在你可以做类似的`e.message`事情

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-12-28T17:34:17.083

e 是 InvalidCastException 类型的实例。例如，在 catch 块中，您可以说 Debug.Write(e.ToString())。

# android - 无法使用 getLaunchIntentForPackage() 启动相机

> ID：14073351
> 
> 赞同：1
> 
> 时间：2012-12-28T17:31:10.010
> 
> 标签：android, android-intent

我现在正在编写自己的 android-launcher，到目前为止它似乎工作正常。我可以启动除相机之外的所有应用程序。

我正在创建一个新意图：

```
Intent intent = context.getPackageManager().getLaunchIntentForPackage("com.android.camera"); 
```

而本意不是`null`。但是当我开始意图时

```
context.startActivity(intent) 
```

我的应用程序崩溃。日志猫：

```
12-28 17:18:43.711: I/Launch(4166): Intent { act=android.intent.action.MAIN flg=0x10000000 cmp=com.android.camera/com.android.internal.app.ResolverActivity }
12-28 17:18:43.711: D/AndroidRuntime(4166): Shutting down VM
12-28 17:18:43.711: W/dalvikvm(4166): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
12-28 17:18:43.731: E/AndroidRuntime(4166): FATAL EXCEPTION: main
12-28 17:18:43.731: E/AndroidRuntime(4166): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.android.camera/com.android.internal.app.ResolverActivity}; have you declared this activity in your AndroidManifest.xml? 
```

我知道我可以使用

```
Intent intent = new Intent();
intent.setCompomponent(new ComponentName(args)); 
```

但我不知道我可以使用哪些参数来启动不同的应用程序。

该解决方案应该适用于每个包名称，而不是使用特殊的 cameraIntent。

希望任何人都可以提供帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:02:32.380

尝试使用`getInstalledPackages`：

```
PackageManager pm = getPackageManager();  
 // PackageManager
List<PackageInfo> packs = pm  
           .getInstalledPackages(PackageManager.GET_UNINSTALLED_PACKAGES);  
 ArrayList<String> arrpackname=new ArrayList<String>();
 for (PackageInfo pi : packs) {  

   if(pi.packageName.toLowerCase().contains("camera") &&
              pi.packageName.toLowerCase().contains("android") ){

     Intent intent = pm.getLaunchIntentForPackage(pi.packageName); 

     if (intent != null)  
       startActivity(intent);  

    }
 } 
```

或者您可以尝试：

```
Intent mIntent = new Intent();

ComponentName comp = new ComponentName("com.android.camera",
                                           "com.android.camera.Camera");

mIntent.setComponent(comp);
mIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
mIntent.setFlags(Intent.FLAG_FROM_BACKGROUND);

mIntent.setAction("android.intent.action.VIEW");

startActivity(mIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:44:06.383

为什么不尝试使用捕获图像的代码呢？

```
capturePhoto.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
            }
        }); 
```

我可以以相同的方式工作还是想默认调用相机应用程序？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:39:21.703

我自己弄好了。我所做的是在点击 GO Launcher EX 中的相机图标的同时观看 LogCat。在日志中我发现了这一行：

```
12-30 17:38:19.098: I/ActivityManager(1375): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.android.camera/.CameraEntry bnds=[300,710][372,800] } from pid 11644 
```

我把它放在一个意图中，周围有一个 if-block 和一些尝试和捕获：

```
String packageName = "com.android.camera"; //Or whatever package should be launched

if(packageName.equals("com.android.camera")){ //Camera
    try{
        Intent intent = getPackageManager().getLaunchIntentForPackage("com.android.camera");
        startActivity(intent);

    }
    catch(ActivityNotFoundException e){
        Intent intent = new Intent();
        ComponentName comp = new ComponentName("com.android.camera", "com.android.camera.CameraEntry");
        intent.setComponent(comp);
        startActivity(intent);
    }
}
else{ //Any other
    Intent intent = getPackageManager().getLaunchIntentForPackage(packageName);
    startActivity(intent);
} 
```

# .net - 在代码中将 DYMO .lwl 文件转换为 .label 文件

> ID：14073362
> 
> 赞同：2
> 
> 时间：2012-12-28T17:32:14.453
> 
> 标签：.net, label, file-type

我目前正在开展一个使用 DYMO 标签编写器打印徽章的现有项目。徽章根据用户工作流程使用不同的徽章模板。要设置徽章的字段，我会加载它，然后将字段设置为正确的文本。问题是所有徽章模板都保存为 .lwl 文件。这些 .lwl 文件在整个软件中使用，我希望不必更改所有内容即可使用新的 .label 格式。

我想知道在 C# 和 .NET DYMO 标签框架中有一种方法可以打开 .lwl 文件，或者以某种方式将 .lwl 转换为代码中的 .label 文件。我目前正在做：

`DYMO.Label.Framework.ILabel DymoLabel = DYMO.Label.Framework.Label.Open(Badge);`

这在打开 .label 文件时工作正常，但在我尝试打开 .lwl 文件时抛出异常。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-22T14:58:33.810

很晚了，但是有一个简单的方法：

启动 DYMO 软件，而不是在文件资源管理器中双击 *.LWL 文件。它将在 DYMO 软件中打开。把它保存在那里。它将自动转换为 *.LABEL 文件...

# facebook - 使用 Facebook 身份验证登录 - 已安装 FBApp

> ID：14073375
> 
> 赞同：0
> 
> 时间：2012-12-28T17:33:04.900
> 
> 标签：facebook, authentication

我正在关注 FB Developers 网站上的 Scrumptious 示例（[https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/)）我成功实现了所有步骤，直到第 2 步结束，没有任何错误。但我注意到，如果我的设备上安装了 Android FB 应用程序，那么它就不会登录。

它要求访问我的公共个人资料和朋友列表的权限（我回复OK）。之后它执行 onSessionStateChange() 但 state = CLOSED_LOGIN_FAILED。

我确实验证了：

1.  我的应用列在[https://developers.facebook.com/apps](https://developers.facebook.com/apps)
2.  我检查并勾选了我的 Native Android App 选项
3.  我也输入了我的包名，哈希键。
4.  Facebook 登录选项也已启用。

请有人可以帮我完成这项工作:-(我已经为此苦苦挣扎了 2 天，但没有运气。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T03:26:13.430

问题已解决。在我使用 KeyTool.exe 生成 HashKey 并将密码输入为 android 后，它给了我一个不同的密钥。我将它复制到 Facebook 上的仪表板并且它有效。抱歉浪费您的时间

# ios - Phonegap景观应用程序；然而高度是纵向高度

> ID：14073376
> 
> 赞同：2
> 
> 时间：2012-12-28T17:33:06.083
> 
> 标签：ios, cordova, height

快速提问，因为我认为对于那些知道它是如何工作的人来说这应该非常简单（HTML5 应用程序构建对我来说是新的）。

我正在使用 Phonegap 构建一个应用程序，但是问题是从 phonegap 构建的默认设置是面向纵向的。至少，看起来是这样。当我在我的 ipad 上测试应用程序时，宽度调整得很好，但由于某种原因，高度大于身体的实际内容。我把它缩小到这一行：

当我删除 height=device-height 它工作正常。换句话说，我在那里得到了错误的设备高度。在横向时，我是否需要切换到 height=device-width 之类的？因为这看起来有点奇怪，所以我希望我的身高会根据方向而改变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:02:50.860

我认为下面的代码可以解决您的问题。你需要使用

```
<meta name="viewport" content="width=device-width, initial-scale=1">. 
```

和这个结构

```
<!DOCTYPE html> 
<html> 
<head> 
<title>Page Title</title> 

<meta name="viewport" content="width=device-width, initial-scale=1"> 

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js">
</script>
</head> 

<body> 
...content goes here...
</body>
</html> 
```

查看更多关于[JQM 页面剖析的信息](http://jquerymobile.com/branches/slide-panel/docs/pages/page-anatomy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:38:32.847

要使用 iOS 屏幕，必须制作两个视图，一个用于横向，一个用于纵向，测量 ipad 屏幕为 1024 × 768 像素，然后我认为您应该直接用数字处理它们，或者继续尝试使用 PhoneGap 提供的选项

# database - 复杂的数据转换

> ID：14073380
> 
> 赞同：2
> 
> 时间：2012-12-28T17:33:17.407
> 
> 标签：database, r, reshape

我需要转换以下（简化）数据集，由以下代码创建：

```
structure(list(W1.1 = structure(c(1L, NA, NA), .Names = c("case1", 
"case2", "case3"), .Label = "1", class = "factor"), R1.1 = structure(c(1L, 
NA, NA), .Names = c("case1", "case2", "case3"), .Label = "2", class = "factor"), 
    W1.2 = structure(c(NA, 1L, NA), .Names = c("case1", "case2", 
    "case3"), .Label = "1", class = "factor"), R1.2 = structure(c(NA, 
    1L, NA), .Names = c("case1", "case2", "case3"), .Label = "1", class = "factor"), 
    W2.1 = structure(c(NA, 1L, NA), .Names = c("case1", "case2", 
    "case3"), .Label = "1", class = "factor"), R2.1 = structure(c(NA, 
    1L, NA), .Names = c("case1", "case2", "case3"), .Label = "1", class = "factor"), 
    W2.2 = structure(c(1L, NA, NA), .Names = c("case1", "case2", 
    "case3"), .Label = "2", class = "factor"), R2.2 = structure(c(1L, 
    NA, NA), .Names = c("case1", "case2", "case3"), .Label = "1", class = "factor"), 
    W3.1 = structure(c(1L, NA, NA), .Names = c("case1", "case2", 
    "case3"), .Label = "1", class = "factor"), R3.1 = structure(c(1L, 
    NA, NA), .Names = c("case1", "case2", "case3"), .Label = "1", class = "factor"), 
    W3.2 = structure(c(1L, 1L, NA), .Names = c("case1", "case2", 
    "case3"), .Label = "1", class = "factor"), R3.2 = structure(c(1L, 
    1L, NA), .Names = c("case1", "case2", "case3"), .Label = "1", class = "factor"), 
    age = structure(c(3L, 1L, 2L), .Names = c("case1", "case2", 
    "case3"), .Label = c("20", "48", "56"), class = "factor"), 
    gender = structure(c(2L, 1L, 2L), .Names = c("case1", "case2", 
    "case3"), .Label = c("female", "male"), class = "factor")), .Names = c("W1.1", 
"R1.1", "W1.2", "R1.2", "W2.1", "R2.1", "W2.2", "R2.2", "W3.1", 
"R3.1", "W3.2", "R3.2", "age", "gender"), row.names = c(NA, 3L
), class = "data.frame") 
```

对于我想要的新数据： - 专门针对每个 xx 的行，包含有关 Rx.x 值、年龄和性别的信息。- 只有当 Wx.x 为 1 时才返回一行。当 2 或 NA 时，我不需要它。

对于我的示例，此数据集应如下所示：

```
 incident type Where Reported age gender
1        1  1.1     1        2  56   male
2        2  3.1     1        1  56   male
3        3  3.2     1        1  56   male
4        4  1.2     1        1  20 female
5        5  2.1     1        1  20 female
6        6  3.2     1        1  20 female 
```

注意：“Where”列甚至可以省略，因为它应该是 1 的常量向量，我不需要它来进行分析。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T17:56:28.003

这是（大部分）需要解决的问题`reshape()`。假设您的原始数据集称为“temp”：

首先，将其从宽格式重塑为长格式。

```
temp.long <- reshape(temp, direction = "long",
                     idvar=c("age", "gender"), 
                     varying = which(!names(temp) %in% c("age", "gender")), 
                     sep = "")
temp.long
#               age gender time    W    R
# 56.male.1.1    56   male  1.1    1    2
# 20.female.1.1  20 female  1.1 <NA> <NA>
# 48.male.1.1    48   male  1.1 <NA> <NA>
# 56.male.1.2    56   male  1.2 <NA> <NA>
# 20.female.1.2  20 female  1.2    1    1
# 48.male.1.2    48   male  1.2 <NA> <NA>
# 56.male.2.1    56   male  2.1 <NA> <NA>
# 20.female.2.1  20 female  2.1    1    1
# 48.male.2.1    48   male  2.1 <NA> <NA>
# 56.male.2.2    56   male  2.2    2    1
# 20.female.2.2  20 female  2.2 <NA> <NA>
# 48.male.2.2    48   male  2.2 <NA> <NA>
# 56.male.3.1    56   male  3.1    1    1
# 20.female.3.1  20 female  3.1 <NA> <NA>
# 48.male.3.1    48   male  3.1 <NA> <NA>
# 56.male.3.2    56   male  3.2    1    1
# 20.female.3.2  20 female  3.2    1    1
# 48.male.3.2    48   male  3.2 <NA> <NA> 
```

其次，做一些清理工作。

```
temp.long <- na.omit(temp.long)
temp.long <- temp.long[-which(temp.long$W == 2), ]
temp.long <- temp.long[order(rev(temp.long$gender), temp.long$time), ]
rownames(temp.long) <- NULL
temp.long$incident <- seq(nrow(temp.long))
temp.long
#   age gender time W R incident
# 1  56   male  1.1 1 2        1
# 2  56   male  3.1 1 1        2
# 3  56   male  3.2 1 1        3
# 4  20 female  1.2 1 1        4
# 5  20 female  2.1 1 1        5
# 6  20 female  3.2 1 1        6 
```

如果很重要，您可以进行进一步清理以更改列名和列顺序。

# c# - 虚拟化项目面板上的选项卡导航

> ID：14073382
> 
> 赞同：0
> 
> 时间：2012-12-28T17:33:24.053
> 
> 标签：c#, xaml, user-interface, silverlight

如何在虚拟化项目上设置选项卡导航？例如；

```
 <ListBox x:Name="Items">        
            <ListBox.Template>
                <ControlTemplate>
                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                        <ItemsPresenter/>           
                    </ScrollViewer>         
                </ControlTemplate>      
            </ListBox.Template>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel VirtualizingStackPanel.VirtualizationMode="Recycling"/>         
                </ItemsPanelTemplate>       
            </ListBox.ItemsPanel>
            <ListBox.ItemTemplate>
                <DataTemplate>
             <Button />
                </DataTemplate>         
            </ListBox.ItemTemplate>           
        </ListBox> 
```

如果我在 Scrollviewer 本身或 Listbox 父级等上设置 TabNavigation=Once 或 Cycle，它只会在视口中可用的项目中进行选项卡，因为尚未生成其他项目。在通过项目对象切换时，是否有人可能会分享一个技巧，它将允许 Tab 继续到下一个尚未虚拟化的项目，同时将其带到视口中查看并通过控件提供直观的选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:08:51.630

所以基本上出现的事情（感谢另一个优秀开发人员的额外眼睛和帮助）是继续渲染其他项目，但同时通过自定义行为从 onload 保持虚拟化，同时暴露对连续滚动的依赖关系并在视口中显示当前项目；

```
namespace The.Namespace
{
    using System;
    using System.Linq;
    using System.Windows;   
    using System.Windows.Controls;
    using System.Windows.Input;
    /// <summary>
    /// Scroll selected item into view.
    /// </summary>
    public class ListBoxFocusBehavior : FocusBehavior<ListBox>
    {
        public static readonly DependencyProperty IsContinuousProperty = DependencyProperty.Register("IsContinuous",
                                                                         typeof(bool),
                                                                         typeof(ListBoxFocusBehavior),
                                                                         new PropertyMetadata(
                                                                             false,
                                                                             (d, e) => ((ListBoxFocusBehavior)d).IsContinuousScroll = (bool)e.NewValue));
        /// <summary>
        /// Gets or sets a value indicating whether this instance is continuous.
        /// </summary>
        /// <value>
        ///      <c>true</c> if this instance is continuous; otherwise, <c>false</c>.
        /// </value>
        public bool IsContinuous
        {
            get { return (bool)GetValue(IsContinuousProperty); }
            set { SetValue(IsContinuousProperty, value); }
        }
        /// <summary>
        /// Called after the behavior is attached to an AssociatedObject.
        /// </summary>
        protected override void OnAttached()
        {
            base.OnAttached();
            AssociatedObject.SelectionChanged += SelectionChanged;
            AssociatedObject.KeyDown += KeyDown;
        }

        /// <summary>
        /// Keys down.
        /// </summary>
        /// <param name="sender">The sender.</param>
        /// <param name="e">The <see cref="System.Windows.Input.KeyEventArgs"/> instance containing the event data.</param>
        private void KeyDown(object sender, KeyEventArgs e)
        {
            e.Handled = false;
            if (e.Key == Key.Tab && Keyboard.Modifiers == ModifierKeys.None)
            {
               //forward tab ...
                var idx = AssociatedObject.Items.IndexOf(AssociatedObject.SelectedItem);
                if (idx < AssociatedObject.Items.Count-1)
                {
                    AssociatedObject.SelectedItem = AssociatedObject.Items[idx + 1];
                    e.Handled = true;
                }
            }
            if (e.Key == Key.Tab && (Keyboard.Modifiers & ModifierKeys.Shift) == ModifierKeys.Shift)
            {
                //back tab.
                var idx = AssociatedObject.Items.IndexOf(AssociatedObject.SelectedItem);
                if (idx > 0)
                {
                    AssociatedObject.SelectedItem = AssociatedObject.Items[idx - 1];
                    e.Handled = true;
                }

            }
        }

        /// <summary>
        /// Called when the behavior is being detached from its AssociatedObject, but before it has actually occurred.
        /// </summary>
        protected override void OnDetaching()
        {
            base.OnDetaching();
            AssociatedObject.SelectionChanged -= SelectionChanged;
            AssociatedObject.KeyDown -= KeyDown;
        }

        /// <summary>
        /// Gots the focus.
        /// </summary>
        /// <param name="sender">The sender.</param>
        /// <param name="e">The <see cref="System.Windows.RoutedEventArgs"/> instance containing the event data.</param>
        private void GotFocus(object sender, RoutedEventArgs e)
        {
            if (AssociatedObject.SelectedItem == null && AssociatedObject.Items.Any())
            {
                AssociatedObject.SelectedItem = AssociatedObject.Items.First();
            }
        }

        /// <summary>
        /// Selections the changed.
        /// </summary>
        /// <param name="sender">The sender.</param>
        /// <param name="e">The <see cref="System.Windows.Controls.SelectionChangedEventArgs"/> instance containing the event data.</param>
        private void SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            if (AssociatedObject.SelectedItem == null) return;
            AssociatedObject.UpdateLayout();

            //have to, otherwise the listbox will probably not focus.
            Action setFocus = () =>
                                  {
                                      AssociatedObject.UpdateLayout();                                     
                                      AssociatedObject.ScrollIntoView(AssociatedObject.SelectedItem);
                                      //ensure that if the container did not exist yet (virtualized), it gets created.
                                      AssociatedObject.UpdateLayout();   
                                      var container =
                                         AssociatedObject.ItemContainerGenerator.ContainerFromItem(
                                             AssociatedObject.SelectedItem) as Control;
                                      if (container != null)
                                      {
                                          container.Focus();
                                      }

                                  };
            AssociatedObject.Dispatcher.BeginInvoke(setFocus);
        }
    }
} 
```

# ios - Simperium 多用户访问数据

> ID：14073384
> 
> 赞同：0
> 
> 时间：2012-12-28T17:33:36.330
> 
> 标签：ios, simperium

在 Simperium 文档/帮助部分有以下文本：

> 创建的所有数据似乎都必须与用户相关联——对吗？是否有可能拥有与用户无关的数据 - 例如位置或啤酒数据库？
> 
> 是的，虽然这还不是很清楚。您可以使用与应用程序的其他用户共享的访问令牌创建公共用户（即公共命名空间），以便任何人都可以读取/写入该命名空间。
> 
> 如果您需要从后端服务权威地发布数据，也可以将其限制为只读访问。

有这方面的实际例子吗？

我的场景如下

1.  我的应用程序将有一个日历
2.  主要用户可以在日历中添加和删除数据
3.  他们会想邀请其他用户添加和删除数据，我的想法是他们可以给他们一个令牌，用户可以使用他们的电子邮件地址和这个令牌登录

我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:28:37.843

你绝对是在正确的轨道上，但在那个轨道上有点太远了。您描述的场景非常适合 Simperium，但尚未发布共享和协作功能。

您引用的帮助文本用于权威地推送内容，例如从自定义后端向您的应用程序的所有用户推送。这方面的一个例子是一个新闻流，随着新内容的添加，它会在所有客户端上更新。

这与在具有不同访问权限的一组用户之间共享日历数据有很大不同，这实际上是对 Simperium 优势的更好利用。我们有一个我们已经在内部测试过的解决方案，但我们正在使用我们学到的知识来构建一个更好的版本，该版本将更具可扩展性以供生产使用。

目前还没有具体的时间表，但您会在 simperium.com 的仪表板上看到它公布的信息。

# cron - rsync 代码将运行，但不在 cron 中

> ID：14073389
> 
> 赞同：9
> 
> 时间：2012-12-28T17:34:06.303
> 
> 标签：cron, backup, rsync

我有一个 Web 服务器 (odin) 和一个备份服务器 (jofur)。在 jofur 上，我可以运行以下代码将我的 Web 目录（通过密钥身份验证）从 odin 同步到 jofur：

```
rsync -avz -e ssh backups@odin.mydomain.net:/home/backups /home/myuser/odin 
```

如果我在命令行中输入这个，一切 rsyncs 完美：

```
myuser@jofur:~$ rsync -avz -e ssh backups@odin.mydomain.net:/home/backups /home/myuser/odin

receiving incremental file list

sent 23 bytes  received 1921 bytes  1296.00 bytes/sec
total size is 349557271  speedup is 179813.41 
```

我希望它每天早上运行，所以我编辑了我的 crontab 来阅读这个：

```
0 4 * * * rsync -avz -e ssh backups@odin.mydomain.net:/home/backups /home/myuser/odin 
```

这行不通。以下消息存放在 /var/mail/myuser 中：

> 无法创建目录“/home/myuser/.ssh”。主机密钥验证失败。rsync：连接意外关闭（到目前为止已收到 0 个字节）[Receiver] rsync 错误：io.c(605) [Receiver=3.0.9] 处出现无法解释的错误（代码 255）

我不确定这个错误是什么意思。我对盲目使用权限持谨慎态度，因为我不想让任何后门敞开。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:09:05.427

我有一个类似的问题。我的是 HOME 目录已加密。

如果您的用户已登录，它将在 known_hosts 中运行。

但是当它是一个 cron 时，该 cron 使用正确的用户但它无权访问您的 $HOME/~/.ssh 目录，因为它是加密的:-(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T22:33:35.370

很难判断 cron 是否使用了错误的 rsync 二进制文件，或者 rsync 是否需要某些未在 cron 中设置的变量。请按如下所示设置 stdout/stderr 并传递日志文件的输出

另外，尝试从命令行执行“which rsync”；这将告诉您从命令行使用哪个 rsync。

```
0 4 * * * rsync -avz -e ssh backups@odin.mydomain.net:/home/backups /home/myuser/odin > /tmp/cron_output.log 2>&1

```

编辑 ：

您能否创建一个名为 SOME_DIR/cron_job_rsync.sh 的 shell 脚本，其中包含以下内容。确保设置了执行位。

```
#!/bin/sh
/usr/sbin/rsync -avz -e ssh backups@odin.mydomain.net:/home/backups /home/myuser/odin

```

并修改cronjob如下图

```
0 4 * * * SOME_DIR/cron_job_rsync.sh >/tmp/cron_output.log 2>&1

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-20T05:42:25.483

我和你一样遇到同样的错误。

我终于发现用户主目录是一个“挂载点”，登录后它发生了变化。

您可以使用 shell 命令“mount”来检查您是否有相同的方式使用主目录。

所以，我登录并“cd /”，然后执行

```

```
cp -ar ${HOME}/.ssh /tmp/
sudo umount ${HOME}
mv /tmp/.ssh ${HOME} 
```

```

有可能会失败，因为你需要检查${HOME}是否有写权限，如果没有，试试sudo或者添加writable到${HOME}。

在那之后，一切都很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T20:54:56.167

我通过与我的服务器管理员沟通解决了这个问题。这是他们告诉我的：

> 对于高级安全性和性能，我们使用 1H (Hive)，它为用户使用 chrooted 环境。应将库和二进制文件复制到 chrooted 环境以使其可访问。

他们给我发了一封后续电子邮件，告诉我“相关”软件包已安装。到那时，问题就解决了。不幸的是，我没有从他们那里得到任何额外的信息。主机是 Arvixe，但我猜任何使用 1H (Hive) 的人都会遇到类似的问题。希望这个答案会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-27T18:01:01.600

请按照以下步骤避免错误 [http://umasarath52.blogspot.in/2013/09/solved-rsync-not-executing-via-cron.html](http://umasarath52.blogspot.in/2013/09/solved-rsync-not-executing-via-cron.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-12T15:35:43.170

将`rrsync`脚本与专用 ssh 密钥一起使用，如下所示：

远程服务器

```
mkdir ~/bin
gunzip /usr/share/doc/rsync/scripts/rrsync.gz -c > ~/bin/rrsync
chmod +x ~/bin/rrsync 
```

本地计算机

```
ssh-keygen -f ~/.ssh/id_remote_backup -C "Automated remote backup"      #NO passphrase
scp ~/.ssh/id_remote_backup.pub devel@10.10.10.83:/home/devel/.ssh 
```

远程电脑

```
cat id_remote_backup.pub >> authorized_keys 
```

在新添加的行前添加以下内容

```
command="$HOME/bin/rrsync -ro ~/backups/",no-agent-forwarding,no-port-forwarding,no-pty,no-user-rc,no-X11-forwarding 
```

所以结果看起来像

```
command="$HOME/bin/rrsync -ro ~/backups/",no-agent-forwarding,no-port-forwarding,no-pty,no-user-rc,no-X11-forwarding ssh-rsa AAA...vp Automated remote backup 
```

当地的

在获得许可的情况下放入`crontab`以下脚本：`x`

```
#!/bin/sh
echo ""
echo ""
echo "CRON:" `date`
set -xv
rsync -e "ssh -i $HOME/.ssh/id_remote_backup" -avzP devel@10.10.10.83:/ /home/user/servidor 
```

资料来源：[http ://www.guyrutenberg.com/2014/01/14/restricting-ssh-access-to-rsync/](http://www.guyrutenberg.com/2014/01/14/restricting-ssh-access-to-rsync/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-22T08:25:58.347

我做了几个步骤让它工作。

1.  检查你的路径。对于每个命令，您将使用检查`which [command]`并使用该 crontab 的完整路径

2.  以您要运行它的用户身份打开 crontab，以便它可以访问该用户的 ssh-key

3.  添加（记住哪个用户）`ssh-agent && [your ssh-command]`，以便它可以通过 ssh 连接。

4.  此时身份验证仍然失败。尝试生成无密码的 ssh 密钥。这样您就可以跳过密码提示。

对于调试，将 -vvv 添加到 rsync 中的 ssh 命令很有用。它清楚地表明出了什么问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-25T09:39:13.740

使用正确的*密钥*环为我解决了这个问题。将以下行添加到您的 crontab：

```
SSH_AUTH_SOCK=/run/user/1000/keyring/ssh 
```

总的来说，您的 crontab（通过`crontab -e`从终端调用进行编辑）现在应该如下所示：

```
SSH_AUTH_SOCK=/run/user/1000/keyring/ssh
0 4 * * * rsync -avz backups@odin.mydomain.net:/home/backups /home/myuser/odin 
```

**背景：**事实证明，一些 Linux 发行版使用密钥环来保护您的公私密钥对 - 因此密钥对受到密码保护，而您不会注意到。因此，`rsync`无法打开您的 ssh 密钥进行身份验证。

请注意，我也省略了`-e ssh`; 我认为这里没有必要。

**进一步的故障排除：** `rsync`不提供大量的调试输出。帮助我确定问题的是`scp`在我的 crontab 中放置了一个更详细的虚拟命令。用于故障排除的 crontab 条目可能类似于：

```
* * * * * scp -v backups@odin.mydomain.net:/home/backups/dummy.txt /home/myuser/odin/dummy.txt >> /home/myuser/odin/dummy.txt.log 2>&1 
```

上面的命令将每分钟运行一次（非常适合开发），它会将文件复制`/home/backups/dummy.txt`到您的本地计算机。所有日志（stdout 和 stderr）都写入到`/home/myuser/odin/dummy.txt.log`. 检查这些日志以查看错误的确切来源。

**参考：**上面解释的故障排除引导我找到解决方案：[https ://unix.stackexchange.com/a/332353/395749](https://unix.stackexchange.com/a/332353/395749)

# browser - 如何覆盖 xhr-src？

> ID：14073390
> 
> 赞同：0
> 
> 时间：2012-12-28T17:34:08.000
> 
> 标签：browser, xmlhttprequest, xss

我为自己创建了一个用户脚本，它在我访问的所有网页上都处于活动状态。它通过 jquery 的 post ($.post) 将数据发送到我的调试器/应用程序。

我注意到一个站点不允许我发送数据，即使它在快速查看之前和之后都可以正常工作，但通过`xhr-src`. 似乎响应标头有一个“X-Content-Security-Policy”，其中列出了一堆网站（谷歌就是一个）。因此，当我尝试向 localhost:myport/ 发帖时，它违反了规则，因此不会发帖。

我该怎么做才能让它再次工作？我不能完全编辑标题（除非我编写自己的 http 代理？）我可以使用 localhost:1234/workaround 创建一个 iframe 并通过它发布吗？但问题是我仍然不知道这是否违规或如何提供数据。

# http - 为 Go 提供 gzip 压缩的内容

> ID：14073393
> 
> 赞同：43
> 
> 时间：2012-12-28T17:34:27.863
> 
> 标签：http, webserver, go

我开始用 Go 编写服务器端应用程序。我想使用`Accept-Encoding`请求标头来确定是否使用`GZIP`. 我曾希望找到一种直接使用`http.Serve`or方法的`http.ServeFile`方法。

这是一个相当普遍的要求；我错过了什么还是我需要推出自己的解决方案？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-12-19T16:45:55.973

纽约时报已经发布了他们[的 Go 的 gzip 中间件包](https://github.com/NYTimes/gziphandler)。

你只需`http.HandlerFunc`通过他们`GzipHandler`，你就完成了。它看起来像这样：

```
package main

import (
    "io"
    "net/http"
    "github.com/nytimes/gziphandler"
)

func main() {
    withoutGz := http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set("Content-Type", "text/plain")
        io.WriteString(w, "Hello, World")
    })

    withGz := gziphandler.GzipHandler(withoutGz)

    http.Handle("/", withGz)
    http.ListenAndServe("0.0.0.0:8000", nil)
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-28T23:17:43.033

目前还没有对 gzip 压缩的 HTTP 响应的“开箱即用”支持。但是添加它是非常微不足道的。看一下

[https://gist.github.com/the42/1956518](https://gist.github.com/the42/1956518)

还

[https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/cgUp8_ATNtc](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/cgUp8_ATNtc)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-16T12:48:21.023

为了完整起见，我最终用一个简单且专门解决此问题的处理程序回答了我自己的问题。

*   [https://pkg.go.dev/github.com/rickb777/servefiles?tab=doc](https://pkg.go.dev/github.com/rickb777/servefiles?tab=doc)
*   [https://github.com/rickb777/servefiles](https://github.com/rickb777/servefiles)

这提供来自 Go http 服务器的静态文件，包括要求的性能增强功能。它基于标准的 net/http ServeFiles，具有 gzip/brotli 和缓存性能增强。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-11T08:40:35.413

现在还有另一个“开箱即用”的中间件，支持`net/http`和 Gin：

[https://github.com/nanmu42/gzip](https://github.com/nanmu42/gzip)

`net/http`例子：

```
import github.com/nanmu42/gzip

func main() {
    mux := http.NewServeMux()
    mux.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        writeString(w, fmt.Sprintf("This content is compressed: l%sng!", strings.Repeat("o", 1000)))
    })

    // wrap http.Handler using default settings
    log.Println(http.ListenAndServe(fmt.Sprintf(":%d", 3001), gzip.DefaultHandler().WrapHandler(mux)))
}

func writeString(w http.ResponseWriter, payload string) {
    w.Header().Set("Content-Type", "text/plain; charset=utf8")
    _, _ = io.WriteString(w, payload+"\n")
} 
```

杜松子酒示例：

```
import github.com/nanmu42/gzip

func main() {
    g := gin.Default()

    // use default settings
    g.Use(gzip.DefaultHandler().Gin)

    g.GET("/", func(c *gin.Context) {
        c.JSON(http.StatusOK, map[string]interface{}{
            "code": 0,
            "msg":  "hello",
            "data": fmt.Sprintf("l%sng!", strings.Repeat("o", 1000)),
        })
    })

    log.Println(g.Run(fmt.Sprintf(":%d", 3000)))
} 
```

# ruby - 将 args 传递给 Class.new 是什么意思

> ID：14073396
> 
> 赞同：0
> 
> 时间：2012-12-28T17:34:33.197
> 
> 标签：ruby, class, instance

我遇到了一个用法，例如：

```
InvalidRequest = Class.new(StandardError) 
```

我很困惑：

*   传递参数是什么意思`Class.new`？
*   现在 InvalidRequest、StandError 和 Class 是什么关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:38:03.823

它设置了一个以参数为超类的类。

> 将参数传递给 Class.new 是什么意思？

该参数用作返回的新匿名类的超类。

> 现在 InvalidRequest、StandError 和 Class 是什么关系？

`InvalidRequest` *是*一个*继承*`Class`自. *`StandardError`*

 ** * *

它在功能上等同于：

```
class InvalidRequest < StandardError
end 
```

只是在一个更函数化的编程风格。*

# linq-to-sql - Linq to SQL 将记录添加到具有外键的表中

> ID：14073397
> 
> 赞同：0
> 
> 时间：2012-12-28T17:34:37.363
> 
> 标签：linq-to-sql

我的目标是将记录添加到也有几个外键列的表中。

例如，假设我有一个 Company 表，它的 Country ID 引用 Country 表。当我使用 linq to sql 时，我创建了一个新的 Company 对象并开始用数据填充它的属性。

然后我说

```
 context.ParentCompanies.InsertOnSubmit(pc); 
```

但它给了我空引用异常。对于 Country，Company 对象有两个属性。一个是 CountryID，另一个是 Country 对象。我设置了 CountryID，但将 Country 对象保留为 NULL。我应该怎么做才能惰性化我的新记录？

# wcf - 在 IClientMessageInspector 和 IParameterInspector 之间同步相关状态

> ID：14073402
> 
> 赞同：17
> 
> 时间：2012-12-28T17:34:58.703
> 
> 标签：wcf

我有一个 wcf 客户端。根据要求，我需要记录请求中的一些元数据（以及请求中未包含的用户数据）。然后，如果请求成功，我可能必须记录响应元数据，并根据标志，完整的肥皂请求。

我正在尝试以正确的方式执行此操作（使用 IParameterInspector 检查元数据并使用 IClientMessageInspector 获取 Soap），但我无法关联两个接口请求。我不确定这里的线程安全。这是我所在位置的精简版...

```
 public class SoapRequestInfo
{
    public string UserId { get; set; }
    public Guid Key { get; set; }
    //would contain a lot more info
}

public class OperationProfilerParameterInspector : IParameterInspector, IClientMessageInspector
{
    //before serialization
    public object BeforeCall(string operationName, object[] inputs) //IParameterInspector
    {
        //Add the operation, record some specific inputs to db
        return new SoapRequestInfo
                            {
                                UserId = "1234",
                                Key = new Guid()
                            };
    }

    public void AfterCall(string operationName, object[] outputs, object returnValue, object correlationState) //IParameterInspector
    {
       var info = correlationState as SoapRequestInfo;
        //Do some additional logging - easy enough
    }

    public object BeforeSendRequest(ref Message request, IClientChannel channel) //IClientMessageInspector
    {
        //want to correlate this with IParameterInspector
        return null;
    }

    public void AfterReceiveReply(ref Message reply, object correlationState) //IClientMessageInspector
    {
        //May want to log full soap message depending on after call criteria
    }
} 
```

我知道我不能使用私有变量来保存 Guid。我不能使用会话，因为可能有多个请求连续出现并且不能保证响应是正确的。那么如何才能唯一标识两个接口之间的correlationState呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-30T10:17:18.503

如果您的服务在 ASPNET 兼容模式下运行，您可能可以使用 HttpContext.Items 来保留您的对象，否则您可以使用 TLS（线程本地存储），将数据放入插槽并稍后获取/清除。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-21T08:28:52.793

愿eb你可以做这点不同的事情：

从这篇文章[将相关令牌传递给 WCF 服务？](https://stackoverflow.com/questions/7552878/passing-correlation-token-to-wcf-service)：

> 如果您使用带有 WS-Addressing 的消息版本，您应该自动拥有它，因为每条消息都将包含其自动生成的 ID (guid)，并且每个响应也将包含请求的 ID。您可以通过 OperationContext 访问这些标头

如果使用消息不符合您的要求，可能您可以尝试在发送请求时将自己的 id 放在标头中，并可能使用相同的 id 更新响应。

# css - 提交表单时从进程中排除组件（在 h:panelGrid 中有效，但在 p:panelGrid 中无效）

> ID：14073406
> 
> 赞同：1
> 
> 时间：2012-12-28T17:35:06.707
> 
> 标签：css, jsf-2, primefaces

问：使用 primefaces 提交表单时，我应该使用什么语法来排除组件？

使用 process 属性我知道如何包含组件。

```
<h:inputText id="included"/>
<p:commandButton value="button" process="included" actionListener="#{myBean.doStuff}/> 
```

我一直在尝试使用与此处答案中使用的语法类似的语法：[如何在父组件的 ajax 更新中排除子组件？](https://stackoverflow.com/questions/12614882/how-to-exclude-child-component-in-ajax-update-of-a-parent-component)但不能让它工作

```
<h:inputText id="notIncluded" styleClass="notIncluded"/>
<p:commandButton ... process="@(form :not(.notIncluded))"/> 
```

编辑（做作业并添加一个实际的工作示例）：在 glassfish 3.1.2.2 和 primefaces 3.4.2 上

当我进一步观察时，排除在 h:panelGrid 内工作正常

```
<h:form id="aForm">
    <h:panelGrid columns="2">
        <p:inputText id="inc" styleClass="included" required="true" />
        <p:message for="inc" />
        <p:inputText id="notInc" styleClass="notIncluded" required="true" />
        <p:message for="notInc" />

        <p:commandButton value="submit" process="@(form :not(.notIncluded))"
            update=":aForm" />
    </h:panelGrid>
</h:form> 
```

但不再排除在类似的 p:panelGrid 中

```
<h:form id="aForm">
    <p:panelGrid columns="2">
        <p:inputText id="inc" styleClass="included" required="true" />
        <p:message for="inc" />
        <p:inputText id="notInc" styleClass="notIncluded" required="true" />
        <p:message for="notInc" />

        <p:commandButton value="submit" process="@(form :not(.notIncluded))"
            update=":aForm" />
    </p:panelGrid>
</h:form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T04:26:02.630

我已经检查了您的示例，如果您查看页面源代码，您会注意到`p:panelGrid`创建带有 id 的表。有点奇怪，但是当表格有 id 时， *jQuery 选择器不会访问子项。*如果我删除表 ID，则按钮可以正常工作。所以我的解决方案是给一个 id`panelGrid`并在选择器中使用这个 id。`p:panelGrid`将为表提供相同的 id，但您需要确保将`prependId="false"`属性添加到 h:form 中：

```
<h:form id="aForm" prependId="false">
    <p:panelGrid columns="2" id="myGrid">
        <p:inputText id="inc" styleClass="included" required="true" />
        <p:message for="inc" />
        <p:inputText id="notInc" styleClass="notIncluded" required="true" />
        <p:message for="notInc" />

        <p:commandButton value="submit" process="@(#myGrid :not(.notIncluded))"
            update=":aForm" />
    </p:panelGrid>
</h:form> 
```

# php - 我可以在循环中更改 ID、名称和值吗

> ID：14073412
> 
> 赞同：0
> 
> 时间：2012-12-28T17:35:37.693
> 
> 标签：php, wordpress

我在 wordpress 工作，有点困惑。

在循环的帮助下，我创建了 9 个列表，但我不明白如何更改每个输入字段的值、ID 和名称。

```
<?php echo $this->get_field_id( 'tab1_thumb' ); ?> 
```

我如何更改每个 li 的**tab1_thumb**

```
<ul>
    <?php
        $i = 1;
        while ($i <= 9) {
    ?>
    <li style="border: 1px solid #ddd; padding: 15px;">
        <p><strong><?php echo 'Tab 0'.$i; ?></strong></p>           
        <p><strong><?php _e('Thumbnail: '); ?></strong><input type="text" id="<?php echo $this->get_field_id( 'tab1_thumb' ); ?>" name="<?php echo $this->get_field_name( 'tab1_thumb' ); ?>" value="<?php echo $instance['tab1_thumb']; ?>" class="widefat" /></p>
        <p><strong><?php _e('Featured Image: '); ?></strong><input type="text" id="<?php echo $this->get_field_id( 'tab1_featured' ); ?>" name="<?php echo $this->get_field_name( 'tab1_featured' ); ?>" value="<?php echo $instance['tab1_featured']; ?>" class="widefat" /></p>
        <p><strong><?php _e('Category: '); ?></strong> <?php wp_dropdown_categories(array('name' => $this->get_field_name('tab1_cat_name'), 'selected' => $instance['tab1_cat_name'], 'orderby' => 'Name' , 'hierarchical' => 1, 'show_option_all' => '', 'hide_empty' => '0', 'taxonomy' => 'product_cat')); ?></label></p>
        <p><strong><?php _e('Description: '); ?></strong><br>
        <textarea class="widefat" id="<?php echo $this->get_field_id('tab1_description'); ?>" name="<?php echo $this->get_field_name('tab1_description'); ?>" type="text"></textarea></p>
    </li>
    <?php
        $i += 1;
        }
    ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:39:47.553

您可以简单地将值`'tab'`与`$i`和连接`'_thumb'`：

```
get_field_id( 'tab'.$i.'_thumb' ); 
```

# visual-studio-2010 - 如何递归地将文件夹和文件添加到空的 Visual Studio 2010/2012 解决方案？

> ID：14073414
> 
> 赞同：2
> 
> 时间：2012-12-28T17:35:43.387
> 
> 标签：visual-studio-2010, visual-studio, tfs, visual-studio-2012

我在 SO 上看到了用于向项目添加递归的答案，但没有针对空解决方案的正确答案。

我正在尝试将整个目录递归地添加到 TFS 存储库，这似乎是最简单的方法，但是 Visual Studio 说我无法将文件夹添加到空解决方案中。这一定是不正确的，对吧？

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-12-28T17:55:28.533

那么它应该很简单。在 VS 中创建项目后，在解决方案资源管理器面板中，右键单击项目名称。将有“添加”、“现有项目”选项 - 然后选择您的父文件夹。

它应该可以工作，TFS 应该认识到这一点并同步 - 假设您已经将项目绑定到源代码控制。

# c++ - 循环依赖 c 意外错误或只是一个糟糕的设计

> ID：14073417
> 
> 赞同：1
> 
> 时间：2012-12-28T17:36:12.170
> 
> 标签：c++, circular-dependency

我想要做的是当一个对象进入一个新的类 K 时，它必须退出（从列表中删除）它所在的所有 K（子 B 和 D），但我得到这个错误只是无法弄清楚。实际上有一个更大的列表列出了类 K s，但我无法通过引用到达它（我可以，但很多工作不是重点）并且项目必须循环依赖

```
//class A.h
#include some_other_header_circularly_dependent_on_class_B
class B
class A{
public:
    string getname(){return name;};

    void setWhere(K *a){whereami=a;};

    void exit(){
        if(whereami!=NULL)
            (whereami)->exit(name);//error C2227: left of '->exit' must point to class/struct/union/generic type
    };

private:
    K* whereami;
    string name;
}; 
```

* * *

```
//class B.h
#include "A.h"
class K{
//abstract functions
}
class B:public class K{
public:
    void enter(A* a){
        a->exit();
        alist.push_front(a);
        a->setWhere(this);
    };
    void exit(string a){
        for(auto it=alist.begin();it!=alist.end();)
            if ((*it)->getname()==a)
                alist.erase(it);
            else it++;
    };
private:
list<A*> alist;
}; 
```

随时提出解决方案或新设计，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:45:15.567

为什么不将所有方法实现移动到单独的 .cpp 文件中并仅在标头中保留声明？那么 Bh 和 Ah 都可以包含在 A.cpp 和 B.cpp 中

# java - AbstractLine 不支持的控件类型：Master Gain Java

> ID：14073421
> 
> 赞同：3
> 
> 时间：2012-12-28T17:36:30.987
> 
> 标签：java, clip

按以下方式使用时出现错误`Clip.getControl()`：-

```
import java.io.File;
import java.io.IOException;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.sound.sampled.FloatControl;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.UnsupportedAudioFileException;

public class HitPlayer {
    private AudioInputStream ais;
    private Clip clip;
    private FloatControl gain;

    public HitPlayer(String fname){
        try {
            ais = AudioSystem.getAudioInputStream(new File(fname));
            clip = AudioSystem.getClip();
            gain = (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN);
        } catch(UnsupportedAudioFileException e){
            System.err.println("File format not accepted");
        } catch(IOException e){
            System.err.println("IO error");
        } catch(LineUnavailableException e){
            System.err.println("Line unavailable");
        }
    }

    public void setGain(float db){
        gain.setValue(db);
    }

    public void reset(){
        try {
            ais.reset();
        } catch (IOException e) {
            System.err.println("IO error when resetting");
        }
    }

    public void play(){
        clip.start();
    }
} 
```

堆栈跟踪如下：-

```
Exception in thread "main" java.lang.IllegalArgumentException: Unsupported control type: Master Gain
at com.sun.media.sound.AbstractLine.getControl(AbstractLine.java:164)
at beat.HitPlayer.<init>(HitPlayer.java:21)
at beat.DrumMachine.<init>(DrumMachine.java:18)
at beat.Main.main(Main.java:14) 
```

我一直在尝试通过检查 grepcode 上的 OpenJDK 代码来跟踪错误；[AbstractLine grepcode.com](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/com/sun/media/sound/AbstractLine.java#AbstractLine "AbstractLine grepcode")和相关类。

我想知道是否有人遇到过这个问题，我正在使用 `java version "1.7.0_07" OpenJDK Runtime Environment (IcedTea7 2.3.2) (Slackware) OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode)`它是否有所作为。

我基本上是在尝试通过`gain = (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN);`. 无论我是使用`MASTER_GAIN`还是`VOLUME`

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T01:58:27.187

我忘了打开线路。添加了以下内容：-

```
clip.open(ais); 
```

# asp.net - 如何在asp中使用融合图显示饼图的总和

> ID：14073422
> 
> 赞同：1
> 
> 时间：2012-12-28T17:36:36.367
> 
> 标签：asp.net, fusioncharts

有没有办法使用融合图显示饼图的总和？我已经在 ASP 中创建了融合图表，我要做的就是显示饼图所有切片的总和值。例如，如果我的饼图上有 3 个切片：每个切片都有以下值：20、30、25；所以我想在子标题区域或图表顶部显示总共 75 个。有没有办法做到这一点？请帮忙。

```
 public string CreateChart()
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
        string sqlStatement = "SELECT Category, AvgNumbers FROM MyTable";
        SqlCommand cmd = new SqlCommand(sqlStatement, con);
        con.Open();
        SqlDataReader reader = cmd.ExecuteReader();
        string strXML;
        strXML = "<graph caption='Average Days To Close' subcaption='I want to show here the Total Sum' labelDisplay='auto' useEllipsesWhenOverflow='1'  decimalPrecision='0' showValues='1' enablesmartlabels='0' showlabels='0'  legendAllowDrag='1' numberSuffix=' Days' showLegend='1' pieSliceDepth='45' formatNumberScale='0'>";
        while (reader.Read())
        {
            strXML += "<set name='" + reader["Category"].ToString() + "' value='" + reader["AvgNumbers"].ToString() + "' />";
        }
        strXML += "</graph>";
        return FusionCharts.RenderChart("/FusionCharts/Pie3D.swf", "ChartID", strXML, "FactorySum", "450", "450", false, false);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:25:32.607

```
 SqlDataReader reader = cmd.ExecuteReader();
    string strXML;
    int sumAvgNumbers;
    string strXMLTemp;
while (reader.Read())
    {
        strXMLTemp += "<set name='" + reader["Category"].ToString() + "' value='" + reader["AvgNumbers"].ToString() + "' />";
        sumAvgNumbers = sumAvgNumbers + Convert.toInt32(reader["AvgNumbers"].ToString());
    }
    strXML = "<graph caption='Average Days To Close' subcaption='"+ sumAvgNumbers +"' labelDisplay='auto' useEllipsesWhenOverflow='1'  decimalPrecision='0' showValues='1' enablesmartlabels='0' showlabels='0'  legendAllowDrag='1' numberSuffix=' Days' showLegend='1' pieSliceDepth='45' formatNumberScale='0'>";
    strXML += strXMLTemp; 
```

# ruby - 如何将 post 参数传递给 rest-open-uri？

> ID：14073430
> 
> 赞同：3
> 
> 时间：2012-12-28T17:37:19.363
> 
> 标签：ruby, http, post

如何将 post 参数传递给`rest-open-uri::open`Ruby 中的函数？

我的代码是：

```
HEADER = {
  "User-Agent"     => "Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1",
  "Accept-Charset" => "utf-8",
  "Accept"         => "text/html"
}

open("http://example.com/", HEADER).each {|s| my_html << s} 
```

# spotify - 在 spotify 预览 api 中显示身份验证弹出窗口

> ID：14073435
> 
> 赞同：1
> 
> 时间：2012-12-28T17:37:58.610
> 
> 标签：spotify

我正在尝试将 Spotify 应用程序迁移到新的预览 API。使用旧框架，我可以访问 auth 模块并使用 showAuthenticationDialog 方法显示 oauth 弹出窗口。

但是，我在预览 API 中找不到等价物。

将不胜感激任何帮助

谢谢，阿达夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:12:57.640

目前在[Preview API](https://developer.spotify.com/technologies/apps/preview/)中没有与 auth 模块等效的模块。此 API 仍在开发中，因此将在最终发布之前进行更改。

# perl - 使用 Mojo::DOM 时无法准确定位子元素

> ID：14073437
> 
> 赞同：4
> 
> 时间：2012-12-28T17:38:03.057
> 
> 标签：perl, mojolicious

我正在尝试使用[`WWW::Mechanize`](https://metacpan.org/module/WWW%3a%3aMechanize)和从旧的 vBulletin 论坛中提取文本[`Mojo::DOM`](https://metacpan.org/module/Mojo%3a%3aDOM)。

vBulletin 不使用 HTML 和 CSS 进行语义标记，我无法使用它`Mojo::DOM->children`来获取某些元素。

这些 vBulletin 帖子的结构因内容而异。

单条消息：

```
<div id="postid_12345">The quick brown fox jumps over the lazy dog.<div> 
```

引用另一个用户的单条消息：

```
<div id="postid_12345">
    <div>
    <table>
        <tr>
            <td>
            <div>Quote originally posted by Bob</div>
            <div>Everyone knows the sky is blue.</div>
            </td>
        </tr>
    </table>
    </div>

 I disagree with you, Bob. It's obviously green.
</div> 
```

带有剧透的单条消息：

```
<div id="postid_12345">
    <div class="spoiler">Yoda is Luke's father!</div>
</div> 
```

引用另一位用户的单条消息，带有剧透：

```
<div id="postid_12345">
    <div>
    <table>
        <tr>
            <td>
            <div>Quote originally posted by Fred</div>
            <div class="spoiler">Yoda is Luke's father!</div>
            </td>
        </tr>
    </table>
    </div>
    <div class="spoiler">No waaaaay!</div>
</div> 
```

假设上面的 HTML 和一个包含必要帖子 ID 的数组：

```
for (@post_ids) {
    $mech->get($full_url_of_specific_forum_post);
    my $dom = Mojo::DOM->new($mech->content);
    my $div_id = 'postid_' . $_;

    say $dom->at($div_id)->children('div')->first;
    say $dom->at($div_id)->text;
} 
```

Using`$dom->at($div_id)->all_text`给了我一条完整的线，这使得我很难分辨引用的内容和帖子中的原创内容。

使用`$dom->at($div_id)->text`会跳过所有子元素，因此不会拾取引用的文本和剧透。

我尝试了 的变体`$dom->at($div_id)->children('div')->first`，但这给了我一切，包括 HTML。

理想情况下，我希望能够提取每个帖子中的所有文本，每个子元素都在自己的行中，例如

```
 POSTID12345:
 + Quote originally posted by Bob
 + Everyone knows the sky is blue. 
 I disagree with you, Bob. It's obviously green. 
```

我是 Mojo 的新手，对 Perl 很生疏。我想自己解决这个问题，但是在查看了文档并摆弄了几个小时之后，我的大脑一片混乱，我不知所措。我只是不知道如何`Mojo::DOM`工作`Mojo::Collections`。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T22:14:51.450

查看 Mojo::DOM 的源代码，基本上该[`all_text`方法](https://metacpan.org/source/SRI/Mojolicious-3.70/lib/Mojo/DOM.pm#L369)递归遍历 DOM 并提取所有文本。使用该源代码编写您自己的遍历 DOM 函数。它的递归函数取决于返回单个字符串，在您的字符串中，您可能会让它返回一个包含您需要的任何上下文的数组。

**编辑：**

在对 IRC 进行了一些讨论之后，网络抓取示例已经更新，它可能会帮助您指导您。[http://mojolicio.us/perldoc/Mojolicious/Guides/Cookbook#Web_scraping](http://mojolicio.us/perldoc/Mojolicious/Guides/Cookbook#Web_scraping)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T17:26:08.477

有一个扁平化 HTML 树的模块[HTML::Linear](https://metacpan.org/module/HTML::Linear)。*扁平化 HTML 树*的目的解释有点冗长乏味，所以这是一张显示[xpathify](https://metacpan.org/module/xpathify)工具输出的图片，与该模块绑定：

![截屏](../Images/ef3deef176bb8ff19b87221b6b1025ce.png)

如您所见，HTML 树节点变为单个键/值列表，其中键是该节点的 XPath，值是节点的文本属性。只需几次击键，这就是您使用 HTML::Linear 的方式：

```
#!/usr/bin/env perl
use strict;
use utf8;
use warnings;

use Data::Printer;
use HTML::Linear;

my $hl = HTML::Linear->new;
$hl->parse_file(q(vboard.html));

for my $el ($hl->as_list) {
    my $hash = $el->as_hash;
    next unless keys %{$hash};
    p $hash;
} 
```

# ruby-on-rails-3 - Rails 3：生产环境更改语言环境但不翻译文本 [w/custom fallbacks]

> ID：14073441
> 
> 赞同：3
> 
> 时间：2012-12-28T17:38:16.223
> 
> 标签：ruby-on-rails-3, production-environment, rails-i18n

我有这个应用程序，我在其中使用了一堆语言环境（经过调整以更适合应用程序的域，例如：我没有使用 es-MX，而是使用 mx 作为语言环境）

我已经在 application.rb 中配置了后备

```
config.i18n.default_locale = :en
config.i18n.fallbacks = {
  # sites
  'cl' => 'es',
  'mx' => 'es',
  'lat' => 'es',
  'br' => 'en',
  'us' => 'en',

  # lang
  'es' => 'en',
  'pt' => 'br',
} 
```

我通过 url ex 设置语言环境：localhost:3001/cl（用于智利语言环境）

这是我在 app_controller 中的代码

```
 before_filter :set_locale

  private

  def set_locale
    if supported_locale?(params[:locale])
      I18n.locale = params[:locale]
    end
  end 
```

还有我的路线

```
 # public urls for sites
  scope '/:locale' do

    # index
    match '/' => 'main#index', via: :get, as: :site
  end 
```

所以，问题是当我在生产中时，我有 localhost:3001/cl 并且它调用 _logo.cl.html.erb 部分并且在控制台中打印的语言环境是*cl*。但是文字还是英文的。在开发中一切正常。有人对此有任何想法吗？

我会留下几张图片

生产/ ![生产/我们](../Images/0da87179fee0a03fd7c6d36a0e4e3e41.png) 美国生产/cl ![生产/分类](../Images/ee5aeebfced0c91205b9e64079faaa73.png) 开发/cl ![开发/分类](../Images/1de12bd19939904211c995658532910b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:54:01.703

问题是`production.rb`文件定义

```
# Enable locale fallbacks for I18n (makes lookups for any locale fall back to       
# the I18n.default_locale when a translation can not be found)
config.i18n.fallbacks = true 
```

覆盖我定义的自定义后备规则，`application.rb`我只需删除这些行，问题就解决了

# python - Scrapy：存储数据

> ID：14073442
> 
> 赞同：14
> 
> 时间：2012-12-28T17:38:19.617
> 
> 标签：python, scrapy

我是python和scrapy的新手。我正在尝试遵循 Scrapy 教程，但我不了解[存储步骤](http://doc.scrapy.org/en/latest/topics/feed-exports.html#topics-feed-storage-backends)的逻辑。

```
scrapy crawl spidername -o items.json -t json

scrapy crawl spidername --set FEED_URI=output.csv --set FEED_FORMAT=csv 
```

我不明白的含义：

*   -o
*   -t
*   - 放

感谢您的帮助

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-28T19:08:32.853

`scrapy crawl -h`您可以通过在项目目录中键入来查看可用命令的列表。

```
scrapy crawl spidername -o items.json -t json 
```

*   `-o`指定转储项目的输出文件名 (items.json)
*   `-t`指定转储项目的格式 (json)

`scrapy crawl spidername --set FEED_URI=output.csv --set FEED_FORMAT=csv`

*   `--set`用于设置/覆盖设置
*   `FEED_URI`用于设置项目转储的存储后端。在这种情况下，它设置为“output.csv”，它使用本地文件系统，即一个简单的输出文件。（对于当前示例 - output.csv）
*   `FEED_FORMAT`用于设置（输出）提要的序列化格式，即（对于当前示例 csv）

**参考资料（Scrapy 文档）：**

1.  [可用的工具命令（用于命令行）](https://scrapy.readthedocs.org/en/latest/topics/commands.html?highlight=command%20line#available-tool-commands)
2.  [饲料出口](https://scrapy.readthedocs.org/en/latest/topics/feed-exports.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-22T13:14:04.203

**- 放**

命令行提供的参数优先，覆盖任何其他选项。

您可以使用 -s（或 --set）命令行选项显式覆盖一个（或多个）设置。

```
Example:

    scrapy crawl myspider -s LOG_FILE=scrapy.log

    sets the LOG_FILE settings value to `scrapy.log` 
```

**-o**

指定输出文件名和扩展名，*您*将在其中写入抓取的数据

```
Examples: 
    scrapy crawl quotes -o items.csv
    scrapy crawl quotes -o items.json
    scrapy crawl quotes -o items.xml 
```

**-t**

指定序列化格式或*项目*的写入方式

[https://www.tutorialspoint.com/scrapy/scrapy_settings.htm](https://www.tutorialspoint.com/scrapy/scrapy_settings.htm)

# reporting-services - 在这种情况下如何避免子报告

> ID：14073452
> 
> 赞同：2
> 
> 时间：2012-12-28T17:38:46.483
> 
> 标签：reporting-services, ssrs-2008, subreport

我必须从 3 个表中获取数据。如果我创建一个 JOIN 查询，数据如下所示：

[http://sqlfiddle.com/#!3/7bc5e/1](http://sqlfiddle.com/#!3/7bc5e/1)

我想创建 SSRS 报告，但我不想创建子报告。这就是我需要我的 SSRS 报告的样子：

```
OrderId Title Notes
                  DetailId ItemId Quantity UnitPrice
                                                    ItemName Color Size 
```

我可以在不使用 2 个子报告的情况下在 SSRS 报告中创建上述布局吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:45:47.943

只需使用组：[http ://sql-bi-dev.blogspot.com/2010/09/groups-in-ssrs-2008.html](http://sql-bi-dev.blogspot.com/2010/09/groups-in-ssrs-2008.html)

让我知道是否有我遗漏的东西。

# c++ - 重载运算符+编译错误''没有匹配的函数调用...''

> ID：14073453
> 
> 赞同：1
> 
> 时间：2012-12-28T17:38:54.307
> 
> 标签：c++, compilation, compiler-errors, operator-overloading, codeblocks

我正在尝试创建一个用于重载运算符 + 的函数，所以我试试这个：

```
 // Joins eClasses.
        eClass operator+(const eClass& cls)const{
            eClass temp;
            temp.teacher=teacher;
            for(int i=0; i<=student_count;++i){
            temp.students[i]=students[i];
            }
            for(int i=0; i<=student_count;++i){
                if(temp.students[i]!=cls.students[i]){
                    temp.students[i]=cls.students[i];
                }
            }
            return temp; 
```

此代码在我的名为 eClass 的类中 这是我的 eClass 的原型版本，没有实现函数

```
class eClass {
    private:
    Teacher* teacher;
    string eclass_name;
    Student* students[MAX_CLASS_SIZE];
    unsigned int student_count;
    public:
    eClass(Teacher&, string);
    ~eClass(); // Should free all dynamically-allocated
    // memory.
    bool exists(Student); // Returns TRUE if a student exists
    // in students[];
    // otherwise returns FALSE.
    void add(Student&); // Add a student in students[].

eClass operator+(eClass&); // Joins eClasses.

    Teacher getTeacher(void) { return *teacher; }
    string getEclassName(void) { return eclass_name; }
    unsigned int getStudentCount(void) { return student_count; }
    Student getStudent(int i) { return *students[i-1]; }
    }; 
```

所以编译器给了我这个错误：

```
In member function 'eClass eClass::operator+(eClass)
line 127 error: no matching function for call to 'eClass::eClass()
line 95  note:candidates are: eClass::eClass(Teacher*, std::string)
line 87  note:eClass::eClass(const eClass&) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:40:31.443

您没有默认 ctor。正确定义或构造：

```
eClass temp(cls); // or eClass temp(*this); 
```

# css - 您可以自定义 Facebook 时间轴上的帖子吗？

> ID：14073457
> 
> 赞同：1
> 
> 时间：2012-12-28T17:39:34.817
> 
> 标签：css, facebook, facebook-apps, facebook-timeline

据我了解，应用程序可以发布到用户的时间线。

我的问题是，你能在多大程度上自定义/样式化这篇文章？我相信您至少可以添加自定义图像和链接。您还可以添加 HTML 元素和 CSS 吗？

* * *

例如，nikeplus 和 RunKeeper 似乎添加了一些基本样式：

[http://static.ak.fbcdn.net/rsrc.php/v1/yu/r/60YqMBkteVy.jpg](http://static.ak.fbcdn.net/rsrc.php/v1/yu/r/60YqMBkteVy.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:01:24.123

**简短的回答**
不，你不能。

**更多详细信息的更长答案**
您正在寻找的是所谓的*Open Graph Action*，它不是通常的 Facebook 状态更新。您在链接的屏幕截图中看到的是特定类型的所有 Open Graph Actions 的聚合。

您不能自定义此聚合的布局。您可以只选择 6 种基本布局中的一种，并配置应如何聚合、排序和/或过滤操作。

[您可以通过转到Facebook 开发人员中心](https://developers.facebook.com/apps)来设置自己的操作，选择您的一个 FB 应用程序，在基本设置中设置命名空间（如果尚未完成），然后进入“打开图表”。一旦您设置了自己的操作，您就可以创建您的聚合。

**以下是一些帮助您入门的链接：**

*   [操作方法：定义聚合](https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-aggregation/#layout)
*   [开放图技术指南](https://developers.facebook.com/docs/technical-guides/opengraph/)
*   [开放图概念](https://developers.facebook.com/docs/concepts/opengraph/)

![开放图动作聚合](../Images/9f9f02ed12594c48682e35e12ba68edf.png)

# python - mtTkinter 不会终止线程

> ID：14073463
> 
> 赞同：5
> 
> 时间：2012-12-28T17:39:46.970
> 
> 标签：python, multithreading, tkinter

我需要使用 Tkinter GUI 在多线程中运行一些简单的功能，所以我尝试[了 mtTkinter。](http://tkinter.unpythonic.net/wiki/mtTkinter)

一切正常，除了一个特殊的：即使我只是启动 GUI，然后我关闭它而不触及任何东西，一些线程继续运行。

换句话说; 我有这个代码：

```
from Tkinter import *
root = Tk()

#simple GUI code with buttons, labels, text and scrollbars widget
...
...    
root.mainloop() 
```

如果我运行此代码，则会出现 GUI，当我关闭它时，此 python 脚本会成功结束。

现在如果我用 mtTkinter 替换 Tkinter

```
from mtTkinter import *
root = Tk()

#simple GUI code with buttons, labels, text and scrollbars widget
...
...    
root.mainloop() 
```

GUI 再次出现，但如果我关闭它，仍然有一些来自 mtTkinter 的线程继续运行！

任何帮助将不胜感激，提前谢谢你，对不起我的英语不好！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-17T20:29:24.787

我的应用程序（[https://github.com/joecole889/spam-filter](https://github.com/joecole889/spam-filter)）遇到了类似的问题。经过一番调查，我意识到当我关闭我的应用程序时，Tkinter（或者可能是 Matplotlib）使用 threading._DummyThread 实例来删除其中一个小部件。我的应用程序的 Tkinter 画布小部件中有一个 Matplotlib 图。无论如何，看起来“图像删除”事件被添加到事件队列中，并且 mtTkinter 阻塞等待 responseQueue 上永远不会出现的响应。

我能够通过允许来自 threading._DummyThread 实例的事件在不经过 mtTkinter 的队列基础结构的情况下运行来解决这个问题。也就是说，我改变了：

```
if threading.currentThread() == self._tk._creationThread: 
```

到

```
if (threading.currentThread() == self._tk._creationThread) or \
   isinstance(threading.currentThread(), threading._DummyThread) : 
```

现在事情似乎对我有用......希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T23:54:02.157

我已经“解决”了不使用它。mTkinter 似乎有点问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-09T19:22:44.203

这是一个老话题，但我看不出它在哪里被关闭了。我有一个使用 'theading' 模块和 MtTkinter 的 4 个线程的 python 应用程序。

我在使用 MtTkinter 时遇到了类似的问题。该应用程序工作但不会关闭。我已经搜索并尝试了很多解决方案，但都没有奏效。对于我的应用程序，使用队列将是一件苦差事。

这就是我所做的。它并不优雅，但它确实有效。它相当无情。

```
cleanup():`
    pidx = os.getpid()
    cmd1 = "kill" + " " + str(pidx)
    if __name__ == "__main__":
        os.system(cmd1) 
```

# .htaccess - REQUEST_URI 否定对重定向不起作用

> ID：14073469
> 
> 赞同：0
> 
> 时间：2012-12-28T17:40:01.850
> 
> 标签：.htaccess, redirect, web

我正在尝试将我的网站设置为使用 .htaccess 重定向到移动版本。我的主要目的是重定向来自移动设备的所有请求，但直接搜索图像文件的请求除外。图像文件位于根文件夹下的三个文件夹中： /img/ /files/ /userfiles/

我正在使用以下内容：

```
RewriteCond %{HTTP_USER_AGENT} "(android|blackberry|googlebot-mobile|iemobile|iphone|ipad|ipod|opera mobile|palmos|webos)" [NC]
RewriteCond %{REQUEST_URI} !^/files/(.*) [NC]
RewriteCond %{REQUEST_URI} !^/img/(.*) [NC]
RewriteCond %{REQUEST_URI} !^/userfiles/(.*) [NC]
RewriteRule ^(.*)$ http://mobilesite.com/$1 [L,R=302] 
```

对来自移动设备的所有请求进行重定向，而不检查文件夹条件。

如果我尝试访问 www.normalsite.com/img/somefile.jpg，它仍然会将我重定向到 mobilesite.com，即使上述条件应该阻止它这样做。

有人可以帮忙吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:15:42.193

应该是这样的：

```
# Assume this condition works.
RewriteCond %{HTTP_USER_AGENT} "(android|blackberry|googlebot-mobile|iemobile|iphone|ipad|ipod|opera mobile|palmos|webos)" [NC]

# Modified conditions
RewriteCond %{REQUEST_URI} !/files.* [NC]
RewriteCond %{REQUEST_URI} ![\.(jpg|png|jpeg|gif)].* [NC]
RewriteCond %{REQUEST_URI} !/userfiles.* [NC]
RewriteRule ^(.*)$ http://mobilesite.com/$1 [L,R=302] 
```

如有必要，请在此处添加其他图像扩展：

`RewriteCond %{REQUEST_URI} ![\.(jpg|png|jpeg|gif)].* [NC]`

# excel - 如果同一列中的另一个单元格包含 X，则替换/更新/修改单元格值

> ID：14073470
> 
> 赞同：1
> 
> 时间：2012-12-28T17:40:07.060
> 
> 标签：excel, vba, replace, updatepanel, clearcase

**Excel 背景**
我有 2 个 excel 列和长的行记录。（仅作为示例，因为我有超过 10 列）

A 列 - 是“是或否” B 列 - 是备注。可以输入我需要的任何内容

**它是如何工作**
的这是一个订购系统，如果日期延迟，A列将显示“是”如果没有延迟，它将显示“否”

**我需要**
我需要 VBA 代码来执行以下操作：

如果 B2 列包含文本“无延迟”，则 A2 列将从“是”变为“否”

**我测试过的**

```
 Private Sub UpdateColumnA()
    Dim x As Long
    For x = 4 To 65536
    Dim InStr As String

    If InStr(1, Sheet1.Range("$M$" & x), "No Delay") Then
        Sheet1.Range("$K$" & x) = Sheet1.Range("$K$" & x) & "No"
        End If

    Next
    End Sub 
```

我在上面遇到的问题是，A2 列“是”将变为“是**”**。我需要将 Yes 替换为 No 而不是添加到现有文本中。

如果 B2 文本“ **No Delay** ”不完全匹配，它根本不起作用，因此我希望它**不区分大小写**，例如“nO Delay”“No DeLAy”也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:57:33.450

选项 vbTextCompare 可以使比较不区分大小写：

```
InStr(1, Sheet1.Range("$M$" & x), "No Delay", vbTextCompare) 
```

一个简单的分配将避免`YesNo`单元格中值（“”）的串联：

```
Sheet1.Range("$K$" & x).Value = "No" 
```

# c++ - 对向量进行排序时出现段错误

> ID：14073478
> 
> 赞同：1
> 
> 时间：2012-12-28T17:40:42.607
> 
> 标签：c++, segmentation-fault

作为一个练习，我在模板中实现了快速排序算法，它对于元素数量较少（最多约 760 个）的向量“工作正常”，但为元素数量较多的向量提供了 seqfault。有人可以告诉我我做错了什么：

```
template< typename Vector, typename VecElem > void qsort(Vector *pv)
{
    if (pv->size()<=1) return;

    VecElem p;
    Vector *pvl=new Vector,*pvr=new Vector;

    p = pv->back();
    pv->pop_back();
    pvr->push_back(p);
    for (auto it=pv->begin();it!=pv->end();it++)
    {
        if (*it < p) pvl->push_back(*it);
        else pvr->push_back(*it);
    }
    qsort<Vector,VecElem>(pvl);
    qsort<Vector,VecElem>(pvr);
    if (pvl->size()) *pv = *pvl;
    if (pvr->size()) std::copy(pvr->begin(), pvr->end(), std::back_inserter(*pv));
    delete pvl;
    delete pvr;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:51:28.957

正如其他人指出的那样，您的实现在例如对升序数据进行排序时效率不高。但是，这不是您的段错误的原因。您的代码中的问题是您在分区阶段没有排除枢轴元素。

只需尝试对仅包含两个相同元素的向量进行排序（例如，{0,0}）。它会无限循环。

要解决此问题，请在对两个向量进行排序后插入枢轴元素。

也许这有效（至少它修复了堆栈溢出）：

```
pvr->push_back(p); // remove this line

// and insert it later...
qsort<Vector,VecElem>(pvl);
qsort<Vector,VecElem>(pvr);
pvl->push_back(p); // this line is new 
```

# r - 如何根据条件为变量赋值

> ID：14073482
> 
> 赞同：0
> 
> 时间：2012-12-28T17:41:13.693
> 
> 标签：r, function, unique, records

我希望有人可以帮助我，或者至少给我一个好的建议。我有一个大型数据框来存储科学论文（按作者/年份/期刊分类）。大多数科学论文给了我更多的记录，所以我正在尝试编写一个函数（直到现在还没有成功），它返回一个唯一值（命名为 n），用于标识记录所属的论文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:57:07.597

要计算唯一值，您可以使用包中的`digest`函数`digest`。例如，

```
library(digest)
digest(c("Granger", "1987", "Econometrica")) 
```

返回发布的唯一 MD5 字符串。`digest`不能向量化，即您必须使用`sapply`或类似方法来计算数据框每一行的 id。

# c++ - 如何在 C++ 中制作 Qt GUI 应用程序而不会发生内存泄漏

> ID：14073483
> 
> 赞同：15
> 
> 时间：2012-12-28T17:41:19.650
> 
> 标签：c++, qt, memory-leaks, valgrind, suppress-warnings

我无法创建一个在 valgrind 中没有超过 1K 的“肯定丢失”字节的 Qt GUI 应用程序。我已经对此进行了实验，制作了仅显示一个 QWidget 的最小应用程序，扩展了 QMainWindow；只是创建一个 QApplication 对象而不显示它或不执行它或两者兼而有之，但它们总是泄漏。

试图弄清楚这一点，我读到这是因为 X11 或 glibc 有错误，或者因为 valgrind 给出了误报。在一个论坛帖子中，似乎暗示在主函数中创建一个 QApplication 对象并返回对象的 exec() 函数，就像在教程中所做的那样，是制作 GUI 的一种“简化”方式（不一定很好， 也许？）。

valgrind 的输出确实提到了 libX11 和 libglibc，还有 libfontconfig。其余的内存丢失，5 条丢失记录，发生在`??? in libQtCore.so`期间`QLibrary::setFileNameAndVersion`。

如果有一种更合适的方法来创建 GUI 应用程序，甚至可以防止其中的一部分发生，它是什么？如果任何 valgrind 输出只是噪音，我如何创建一个抑制文件来抑制正确的东西？

编辑：感谢您的评论和回答！
我并不担心自己丢失的几个 kB，但是如果我不必过滤多个错误屏幕但通常可以从 valgrind 获得“OK”，那么找到我自己的内存泄漏会更容易。如果我要抑制警告，我最好知道它们是什么，对吧？
有趣的是，看看泄漏是如何被接受的！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-28T18:22:08.780

大型多线程库（如 QT、wxWidgets、X11 等）设置单例类型对象的情况并不少见，这些对象在进程启动时初始化一次，然后不尝试清理进程关闭时分配。

我可以向你保证，任何从函数中“泄漏”的东西`QLibrary::setFileNameAndVersion()`都是故意留下的。X11/glibc/fontConfig 留下的内存位可能也不是错误。

它可以被视为不好的编码习惯或礼仪，但它也可以大大简化某些类型的任务。如今的操作系统为清理进程在终止（正常或强制）时留下的任何内存或资源提供了非常强大的保证，并且如果在应用程序的持续时间内很可能需要相关分配，包括关闭过程——以及 QT 的各种核心组件都符合条件——然后它可以在加载/初始化后立即让库设置一些内存分配，并允许这些内存分配无限期地持续存在。除其他外，这允许内存存在以供可能引用该内存的任何其他 C++ 析构函数使用。

由于这些分配只设置一次，并且从代码中的某一点开始，就不存在*有意义的* 内存泄漏的风险。它只是属于进程的内存，因此在操作系统关闭进程时会被清理。

结论：如果内存泄漏不在您的代码中，并且随着时间的推移它似乎没有变得明显更大（并且这些天很重要，想想兆字节），和/或显然源自首次初始化设置代码在您的应用程序中只调用一次，然后不用担心。这可能是故意的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-16T10:16:35.337

测试这一点的一种方法是在循环中运行代码，并改变迭代次数。如果 allocs 和 frees 之间的差异与迭代次数无关，那么您很可能是安全的。

# ruby - RVM Ruby 安装问题

> ID：14073489
> 
> 赞同：0
> 
> 时间：2012-12-28T17:42:14.093
> 
> 标签：ruby, rvm

我正在尝试通过 RVM 安装 Ruby 1.9.3。但是，我不断收到附图中的错误。![错误信息](../Images/e0ed0ea85938ab4d599277d1f7b317eb.png)

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T18:54:23.273

您看到的不是错误，而是您应该阅读的内容，以了解您现在需要做什么来配置您的环境以安装 rubies。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T18:06:56.687

不是错误；只是指示。基本上，RVM 告诉您 Ruby 1.9.3 具有在继续之前需要安装的依赖项。这些依赖项可以使用包管理器安装，例如 aptitude (Linux Ubuntu) 或 Homebrew (Mac)。

在您的情况下，您将需要 Homebrew，因为您在 Mac 上。

如果你还没有自制软件，请到[这里](http://mxcl.github.com/homebrew/ "这里")安装。安装后，请安装缺少的依赖项。在你的情况下：

```
$ brew install libksba 
```

现在，继续安装 Ruby 1.9.3：

```
$ rvm install 1.9.3 # install 1.9.3 
$ rvm use 1.9.3 --default # makes ruby 1.9.3 the default 
```

如果您需要更多帮助，请随时在评论中发布。

# javascript - 计时器倒计时到期时提交表单

> ID：14073493
> 
> 赞同：2
> 
> 时间：2012-12-28T17:42:24.713
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, countdowntimer

我使用[jQuery Countdown](http://keith-wood.name/countdown.html)为我的页面设置计时器倒计时。这是我的代码：

```
<script type="text/javascript">

  function timeup() {
    $("examination_form").submit();
  }

  $(document).ready(function() {
    var duration = <%= @remaining_minutes %>
    $('#countDownTimer').countdown({until: '+' + duration  + 'm', 
                    format: 'MS', 
                    description: "Time Remaining",
                    onExpiry: timeup
                      });

  $("#countDownTimer").jScroll({top: 100});

  $("#examination_form").submit(function() {
    var errors = []
    $(".content_question").each(function() {
      var answerCont = $(this).next();
      var inputs = $(answerCont).find('input[type=radio], input[type=checkbox]');

      if(inputs.length > 0)
      {
        var groupChecked = false;

        $(inputs).each(function(){
          if($(this).is(':checked'))
          {
            groupChecked = true;
          }
        });

        if(!groupChecked)
        {
          errors.push($(this).text().trim());
        }
      }
    });

    if(errors.length > 0)
    {
      var errorMessage = "You missed " + errors.length + " questions: \n\n";

      for(var i=0; i<errors.length; i++)
      {
        errorMessage += errors[i] + "\n";
      }
      alert(errorMessage);
      return false;
    }
  });
});
</script> 
```

从头到尾的代码`$("#examination_form").submit(function() {`用于检查用户是否错过了某些问题的检查答案，当他们按下提交时会收到提醒。

我在超时时使用回调事件`onExpiry`提交表单，但它没有做任何事情。我认为它有问题，但我不知道在哪里。在我尝试之前：

```
onExpiry: function(){
  $("examination_form").trigger('click');
} 
```

但这就像我按下按钮提交一样，而我希望提交表单。我尝试了[这个问题](https://stackoverflow.com/questions/10079306/jquery-countdown-autosubmit-form-upon-expiration)的答案，但也没有用。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:45:36.853

要跳过表单验证并强制提交，`unbind`处理`submit`程序：

```
function timeup() {
    $("#examination_form").unbind().submit();
} 
```

# android - 捕获通过应用程序或网页从移动设备传输的数据

> ID：14073495
> 
> 赞同：0
> 
> 时间：2012-12-28T17:42:32.980
> 
> 标签：android, mobile, packet-capture, packet-sniffers

我正在编写一个 Android 应用程序，我想从一些购物网站/应用程序中捕获收据数据。

这是我要实现的功能-

1.  用户访问 GenericShopping 网站
2.  用户购物并完成付款流程
3.  GenericShoppingWebsite 确认付款并显示收据，其中显示花费金额和交易日期等...
4.  我想捕获此收据数据以进行处理。

在普通台式机/Chrome 笔记本电脑上，可以使用 Chrome 扩展程序捕获这些数据，并对从收据中刮取数据的页面运行 Javascript。也可以使用原始数据包捕获和分析来完成（尽管这要困难得多且效率低下）。

但 Chrome 扩展程序目前无法在移动设备上运行。而且我认为在移动设备上无法捕获原始数据包。然后一些购物将通过应用程序而不是网站完成。我还需要从这些应用程序中获取收据数据。但是我没有应用程序开发的经验，所以我不知道这意味着什么。

因此，我希望在用户通过网站在移动设备上进行购买时捕获收据数据，并在可能的情况下捕获通过专用应用程序进行的购买。我想要做的实际上是不可能的，或者有人知道实现这一目标的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:47:27.343

您可以通过 Fiddler (http://www.fiddler2.com/) 等软件捕获请求并做出响应。它就像一个代理服务器，所以您所要做的就是更新移动设备中的代理/网络设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T05:29:42.377

BurpSuite 是移动应用程序测试的最佳选择之一。试一试，它实际上比 Fiddler 更强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T15:23:20.913

您可以在计算机上设置 Android 虚拟设备。并在该设备中安装您想要监控和分析的应用程序`adb`。

开始在虚拟设备上使用该应用程序，现在您可以开始使用wireshark 捕获数据包。当您完成使用应用程序时。停止wireshark以进一步捕获。

现在应用过滤器并仔细分析数据包。您将看到 url、请求、响应、cookie 等的所有详细信息等等。

我已经列出了回答这个问题的步骤[Sniffing an Android app to find API URL](https://stackoverflow.com/questions/20778072/sniffing-an-android-app-to-find-api-url/23568041#23568041)

# jmeter - JMeter 中的错误“连接重置”（SOAP XML Web 服务）

> ID：14073497
> 
> 赞同：3
> 
> 时间：2012-12-28T17:42:34.993
> 
> 标签：jmeter

我在 JMeter 中有下一个测试计划：

在屏幕截图中，您可以看到第一个线程组的设置，它在测试计划中有 50% 的常见请求量（在每个线程组中放置了 10 个不同的子请求）。因此，使用这些设置平均每秒增加 1 个请求。

![在此处输入图像描述](../Images/53cdd9a0dd824242bb20b547c2e958fa.png)

然后我运行了这个测试并看到了这张图片（**错误 %**列）： ![在此处输入图像描述](../Images/369398ec098a96e404ccb88dffbf0170.png)

我将错误保存在文件中，所有这些错误都具有相同的文本：

```
<sample t="30129" lt="0" ts="1356710138314" s="false" lb="WebService(SOAP) Request 1" rc="000" rm="**Connection reset**" tn="jp@gc - Stepping Thread Group1 3-247" dt="text" by="0"/> 
```

服务器的cpu截图： ![在此处输入图像描述](../Images/dc6b7214ef0c669cac9a0ea2ff5ebb94.png)

对于数据库： ![在此处输入图像描述](../Images/26b5f3c41dc23a4a86075c351f0b7d81.png)

出现错误后，我的 comp 开始缓慢而缓慢地工作（尽管错误停止进一步出现）......同时服务器的 cpu 逐渐下降到 0。

你能告诉我吗，拜托，

**这个错误的原因是什么？**

我是否已达到服务器超时？（因为 Max 在表中超过 30s）。

* * *

UPD。我已经使用下一个设置重新运行测试：每 02:46:40 1000 个用户（每 10 秒 +1 个线程组和循环中每个新线程内的 10 个请求）。即我将测试时间和总线程组减少了 2 倍，但节省了 Thead 添加的强度。

结果是一样的（包括服务器上的 cpu 使用率）。在 990 线程启动后，我收到了错误«连接重置»。有截图： ![在此处输入图像描述](../Images/6913fba270dd0017c9ffa3c1b3790435.png) ![在此处输入图像描述](../Images/321a004b9c2e9a7f4c33dcfe558e6f4e.png) ![在此处输入图像描述](../Images/960419abefb50fac0482275ebd389805.png)

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:08:59.420

首先，WebService(SOAP) Request 并不是在 JMeter 中测试 Webservices 的最佳方式，它将在即将到来的 2.9 版本中被弃用。HTTP Sampler 是一种选择，因为它的性能要好得多。

其次，连接重置意味着您的服务器已断开连接。它可能来自看起来很高但不确定的 CPU。

如果您所说的“我的计算机”是托管 JMeter 的计算机开始缓慢工作，那么您的 JMeter 实例会被您配置的线程数（2003 年或更多？）淹没。它可能来自很多因素，请阅读：

*   [http://www.dzone.com/links/see_how_to_make_jmeter_run_thousands_of_threads_w.html](http://www.dzone.com/links/see_how_to_make_jmeter_run_thousands_of_threads_w.html)

# html - 如何在不重新对齐其他文本的情况下在悬停时更改字体大小？

> ID：14073498
> 
> 赞同：9
> 
> 时间：2012-12-28T17:42:39.883
> 
> 标签：html, css

我想在 css 中使用悬停伪类来增加表中各个链接的大小，但是每次将它们悬停时，大小的增加都会影响行/列的大小，并且表中的所有其他链接都会按照移动.

有什么办法可以只使用css和html来防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-28T17:47:33.490

您可以使用 CSS3 转换来缩放链接，而不会导致周围元素的重新定位，例如：

```
table a:hover{ -webkit-transform: scale(1.2); } 
```

`-webkit-`可以为其他供应商（例如`-moz-`和`-ms-`）更改，但在某些浏览器中不可用，包括 IE8。

使用`line-height`不会阻止水平移动，因此会扩展列。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T17:44:29.790

### 你可以这样做：

将初始设置`height`为`line-height`.

```
td {line-height: 20px; font-size: 14px;}
td:hover {font-size: 20px;} 
```

### 小提琴：http: [//jsfiddle.net/mMZjf/](http://jsfiddle.net/mMZjf/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T17:44:30.957

强制`line-height`高度相同并更改`font-size`悬停。

[这里的例子](http://jsfiddle.net/YrbnK/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-28T18:00:54.670

您可以使用相对和绝对定位：

```
a:link {
    display: block;
    font-size: 1em;
    outline: thin solid;
}
a:hover {
    position: absolute;
    top: 0;
    left: 0;
    font-size: 3em;
} 
```

[有关示例，](http://jsfiddle.net/f6qgd/)请参阅此 jsFiddle 。

# c - 将结构存储到文件并再次检索它

> ID：14073501
> 
> 赞同：2
> 
> 时间：2012-12-28T17:42:47.990
> 
> 标签：c

我有一个结构

```
typedef struct esl_sqfile_s {
  FILE *fp;           /* Open file ptr                            */
  char *filename;         /* Name of file (for diagnostics)           */
  int   do_gzip;          /* TRUE if we're reading from gzip -dc pipe */
  int   do_stdin;         /* TRUE if we're reading from stdin         */
  char  errbuf[eslERRBUFSIZE];/* parse error mesg. Size must match msa.h  */

  /* all input first gets buffered in memory; this gives us enough
   * recall to use Guess*() functions even in nonrewindable streams
   */
  char    *mem;           /* buffered input                           */
  int      allocm;        /* <mem> size, multiples of eslREADBUFSIZE  */
  int      mn;            /* number of chars in <mem> (up to allocm)  */
  int      mpos;          /* pos of next <buf> to load from <mem>     */
  off_t    moff;          /* disk offset to start of <mem>            */
  int      is_recording;      /* TRUE if we need to keep buffering more   */

  /* input is either character-based [fread()] or line-based (esl_fgets())*/
  char    *buf;           /* buffer for fread() or fgets() input      */
  off_t    boff;          /* disk offset to start of buffer           */
  int      balloc;        /* allocated size of buf                    */
  int      nc;            /* #chars in buf (usually full, less at EOF)*/ 
  int      bpos;          /* current position in the buffer (0..nc-1) */
  int64_t  L;             /* #residues seen so far in current seq     */
  int64_t  linenumber;        /* What line of the file  (1..N; -1=unknown)*/
  off_t    bookmark_offset;   /* bookmark fwd position before reversing...*/
  int64_t  bookmark_linenum;  /* in both linenumber and disk offset       */

  /* In digital mode, we have an alphabet ptr                             */
  int   do_digital;       /* TRUE if we're reading in digital mode    */
#if defined(eslAUGMENT_ALPHABET)  
  const ESL_ALPHABET *abc;
#else
  void               *abc;
#endif

  /* Format-specific configuration                                           */
  int   format;           /* Format code of this file                    */
  int   is_linebased;         /* TRUE for fgets() parsers; FALSE for fread() */
  int   eof_is_ok;        /* TRUE if record can end on EOF               */
  int  (*parse_header)(struct esl_sqfile_s *, ESL_SQ *sq);
  int  (*parse_end)   (struct esl_sqfile_s *, ESL_SQ *sq); 
  ESL_DSQ inmap[128];         /* an input map, 0..127                        */

  /* MSA augmentation confers reading MSA files as sequential seq files. */
#if defined(eslAUGMENT_MSA)
  ESL_MSAFILE *afp;       /* open ESL_MSAFILE for reading           */
  ESL_MSA     *msa;       /* preloaded alignment to draw seqs from  */
  int          idx;       /* index of next seq to return, 0..nseq-1 */
#else
  void        *afp;           /* NULL */
  void        *msa;           /* NULL */
  int          idx;           /* 0    */
#endif /*eslAUGMENT_MSA*/

  /* SSI augmentation confers random access of records in a seq file        */
  char    *ssifile;       /* path to expected SSI index file            */
  int      rpl;           /* residues per line in file; -1=unset 0=inval*/
  int      bpl;           /* bytes per line in file; -1=unset, 0=inval  */
  int      currpl;        /* residues on current line (-1=unknown)      */
  int      curbpl;        /* bytes on current line    (-1=unknown)      */
  int      prvrpl;        /* residues on previous line                  */
  int      prvbpl;        /* bytes on previous line                     */
#if defined(eslAUGMENT_SSI)
  ESL_SSI *ssi;     /* open ESL_SSI index, or NULL if none     */
#else
  void    *ssi;     /* NULL */
#endif /*eslAUGMENT_SSI*/
} ESL_SQFILE; 
```

我想将结构值存储到文件中并在需要时读取它。如果我编写整个结构，一些值将包含地址而不是值的问题。这个问题有什么解决办法吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:44:05.353

> 如果我编写整个结构，一些值将包含地址而不是值的问题。这个问题有什么解决办法吗

唯一真正的解决方案是将结构的每个成员手动写入文件。即定义你自己的`pack`函数，为每个成员做正确的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:48:25.440

正如您所发现的，您无法有效地存储指向磁盘的指针。当您尝试加载数据时，指针值将毫无意义，您需要正确*序列化*数据。

很典型的是，针对存储和/或通信进行优化的外部表示与针对程序实际使用而优化的最佳内部表示不同。

在 C 中期望将整个结构作为单元保存/加载也是一个坏主意，因为在字段之间可能存在编译器添加的“不可见”填充字节。如果您同时切换了编译器、编译器标志或计算机，这可能会导致结构无法在程序的未来版本中加载。

最好编写一个函数来保存结构，并编写一个函数来加载它，然后让它们逐个字段地遍历结构，并进行必要的转换，以将每个字段与它的首选外部表示进行转换。

如果您需要做很多事情，有“中间件”解决方案可以让您以特定领域的语言定义结构，然后生成代码来执行保存/加载和运行时管理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T17:44:44.447

您还必须存储指针指向的数据。没有其他解决方案可以满足您的需求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T17:52:20.117

如果你能发挥你的想象力来找到一种序列化机制。想象一下如何将它存储在 XML 类型的结构化文件中，以及如何使用字典来保存与原始数据类型的对应关系，将会很有趣。

# ruby - 如何确定木偶班的运行顺序？

> ID：14073502
> 
> 赞同：4
> 
> 时间：2012-12-28T17:42:51.263
> 
> 标签：ruby, deployment, puppet

我是傀儡部署的新手。我定义了两个类

```
class taskname{
      exec{ "deploy_script":
         command = "cp ${old_path} ${new path}",
         user = root,
      }

      cron{"cron_script2":
         command = "pyrhton ${new_path}",
         user = root,
         require = Exec["deploy_script"]
       }

 }

class taksname2{

      exec{ "deploy_script2":
         command = "cp ${old_path} ${new path}",
         user = root,
      }

      cron{"cron_script":
         command = "pyrhton ${new_path}",
         user = root,
         require = Exec["deploy_script2"]
       }

} 
```

我如何确定这两个类的运行顺序。我已经尝试过一个新的清单文件

init.pp 包含这两个类

```
include taskname
include taskname2 
```

似乎第二个任务在第一个任务之前运行。如何执行运行命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T17:48:36.697

[使用这些元参数之一](http://docs.puppetlabs.com/learning/ordering.html)。

> 所以总结一下：每当一个资源依赖于另一个资源时，使用 `before`or元`require`参数或用`->`. 每当一个资源在另一个资源更改时需要刷新时，请使用`notify`or元`subscribe`参数或将资源链接到 `~>`. 如果某些资源看到它们，它们会自动需要其他资源，这可以为您节省一些精力。

[也适用于使用类资源语法声明的类](http://docs.puppetlabs.com/puppet/2.7/reference/lang_classes.html#metaparameters)。

> 当使用类资源语法声明时，类可以使用任何元参数。在这种情况下，类中包含的每个资源也将具有该元参数。因此，如果您使用 声明一个类`noop => true`，则该类中的每个资源也将具有`noop => true`，除非它们专门覆盖它。可以采用多个值的元参数（如关系元参数）将合并来自容器的值和来自单个资源的任何特定值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T00:02:37.420

尝试使用元参数`->`来指定类之间的依赖关系。在声明/实例化这些类的 init.pp 中，将包含语句替换为参数化类语法：

```
class {"taskname":} ->
class {"taskname2":} 
```

这将确保`taskname`在之前被调用`taskname2`。有关详细信息，请参阅[http://docs.puppetlabs.com/guides/parameterized_classes.html#declaring-a-parameterized-class](http://docs.puppetlabs.com/guides/parameterized_classes.html#declaring-a-parameterized-class)

# android - 使用 OnGestureListener 或 OnGesturePerformedListener 在 XML 布局之间切换

> ID：14073508
> 
> 赞同：1
> 
> 时间：2012-12-28T17:43:48.547
> 
> 标签：android, android-layout, swipe, gesture-recognition

我正在尝试在我的应用程序的页面之间实现滑动。我目前有 5 个 XML 布局文件，我可以从一个 Activity 访问所有这些文件。底部有五个按钮，代表每个布局，按下时切换到相应的 XML 布局。

我曾尝试使用 来实现刷卡`OnGestureListener`，但它并没有像我希望的那样工作。我需要滑动`Title`视图才能使滑动工作。当我在布局中显示的任何视图上滑动时，它不起作用。

我开始寻找并找到了`GestureOverlayView`，这似乎是我想要的。但是，我发现的所有实现都给我带来了问题。[教程](http://www.vogella.com/articles/AndroidGestures/article.html)，[类似的 SO 问题](https://stackoverflow.com/questions/5434258/using-a-gesture-overlay-view-in-android)。

这是我到目前为止的代码：

```
public class Monitor extends Activity implements android.view.GestureDetector.OnGestureListener, OnGesturePerformedListener {
    private GestureDetector gestureScanner;
    private GestureOverlayView gestures;
    private static final int SWIPE_MIN_DISTANCE = 50;
    private static final int SWIPE_THRESHOLD_VELOCITY = 50;
    private GestureLibrary gestureLib;

    public void onCreate( Bundle savedInstanceState ) {
        super.onCreate( savedInstanceState );
        gestures = new GestureOverlayView(this);
        View inflate = getLayoutInflater().inflate(R.layout.main, null);
        gestures.addView(inflate);
        gestures.addOnGesturePerformedListener(this);
        gestureLib = GestureLibraries.fromRawResource(this, R.raw.gestures); // Error here
        if (!gestureLib.load()) {
           finish();
         }
        setContentView(gestures);
} 
```

我在线上遇到错误`gestureLib = GestureLibraries.fromRawResource();`。错误是`raw cannot be resolved or is not a field.`。`raw`我的目录中没有文件夹`/project-name/res/`。有任何想法吗？还有另一种方法可以做到这一点吗？

这就是我第一次实现滑动功能的方式，它只在标题栏上起作用。

```
public class Monitor extends Activity implements android.view.GestureDetector.OnGestureListener {
    private GestureDetector gestureScanner;
    private static final int SWIPE_MIN_DISTANCE = 50;
    private static final int SWIPE_THRESHOLD_VELOCITY = 50;
    public void onCreate( Bundle savedInstanceState ) {
        super.onCreate( savedInstanceState );
        gestureScanner = new GestureDetector(this);
        setContentView( R.layout.monitor );
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        Log.i( "TouchEvent", "Here" );
        return gestureScanner.onTouchEvent(event);
    }

    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
        if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
            && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY
            ) {
            Log.i( "OnFling", "Right" );
            //ur code goes here.            
            if( getTitle().equals( getString( R.string.main_analogs ) ) ) {
                setContentView( R.layout.monitor );
                setTitle( R.string.main_monitor );
                buildButtons();
                if( hasRead ) {
                    updateMonitorForm();
                }
            }
        }
        /* on scroll to the previous page  */
        else if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
            && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY
            ) {
            Log.i( "OnFling", "Left" );
            //Ur code goes here
            if( getTitle().equals( getString( R.string.main_monitor ) ) ) {
                setContentView( R.layout.analogs );
                setTitle( R.string.main_analogs );
            buildButtons();
                if( hasRead ) {
                    updateMonitorForm();
                }
            }
        }
        return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:59:12.270

> 我正在尝试在我的应用程序的页面之间实现滑动。我目前有 5 个 XML 布局文件，我可以从一个 Activity 访问所有这些文件。底部有五个按钮，代表每个布局，按下时切换到相应的 XML 布局。

这将是小部件的理想方案`ViewPager`（除非您忘记添加其他重要细节）。您可以手动滑动`ViewPager`（因此您不需要自己处理触摸事件），也可以`ViewPager`使用`setCurrentItem`方法（`Buttons`部件）设置当前页面。

我已经根据你的场景做了我的小例子。该示例非常不言自明，您可以在[此处](https://gist.github.com/4476966)找到它。

# php - php 中的 3des - 无法获得好的键/字符串

> ID：14073512
> 
> 赞同：0
> 
> 时间：2012-12-28T17:44:13.533
> 
> 标签：php, cryptography, encryption, 3des, tripledes

我需要在 php 中解码一个 3des 字符串，到目前为止我还没有解码经验......

第一步是：获取要解码的密钥和字符串集——我已经有了。

我有关于算法的信息：

类型：CBC，填充 - PKCS5，初始化向量（iv？） - 八个零的数组

我尝试这种方式：

```
// very simple ASCII key and IV
$key = "passwordDR0wSS@P6660juht";
$iv = "password";
//$iv = array('0','0','0','0','0','0','0','0');
//$iv = "00000000";

$cipher = mcrypt_module_open(MCRYPT_3DES, '', 'cbc', '');

//$iv = mcrypt_enc_get_iv_size($cipher);

// DECRYPTING
echo "<b>String to decrypt:</b><br />51196a80db5c51b8523220383de600fd116a947e00500d6b9101ed820d29f198c705000791c07ecc1e090213c688a4c7a421eae9c534b5eff91794ee079b15ecb862a22581c246e15333179302a7664d4be2e2384dc49dace30eba36546793be<br /><br />";

echo "<b>Decrypted 3des string:</b><br /> ".SimpleTripleDesDecrypt('51196a80db5c51b8523220383de600fd116a947e00500d6b9101ed820d29f198c705000791c07ecc1e090213c688a4c7a421eae9c534b5eff91794ee079b15ecb862a22581c246e15333179302a7664d4be2e2384dc49dace30eba36546793be')."<br />";

function SimpleTripleDesDecrypt($buffer) {
  global $key, $iv, $cipher;

  mcrypt_generic_init($cipher, $key, $iv);
  $result = rtrim(mdecrypt_generic($cipher, hex2bin($buffer)), "\0");
  mcrypt_generic_deinit($cipher);
  return $result;
}

function hex2bin($data)
{
  $len = strlen($data);
  return pack("H" . $len, $data);
} 
```

在开始时，您会看到示例数据，并且在此数据上代码工作正常。当我尝试使用通过 SOAP Web 服务从数据库获取的自己的数据时，问题就开始了。我看到这个错误：

警告：pack() [function.pack]：H 型：非法十六进制数字在....

![在此处输入图像描述](../Images/cdc4b43075ec2e08a690f162b86ec5f1.png)

尽管尝试在脚本中使用不同类型的编码，但我还是得到了这个。脚本文件本身在 ANCI 中。

另外：正如您在评论中看到的那样，我也对 IV 进行了一些实验，但如果不处理我猜的第一个问题，它就没有意义。

另一件事是填充== PKCS5。我是否需要使用它，我应该如何使用它？

我真的很感激这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:46:14.077

好的，我找到了一个主要基于这篇文章的解决方案：[PHP Equivalent for Java Triple DES encryption/decryption](https://stackoverflow.com/questions/8530312/php-equivalent-for-java-triple-des-encryption-decryption) - thanx guy and +1。

```
$iv = array('0','0','0','0','0','0','0','0');
echo @decryptText($temp->patient->firstName, $deszyfrator->return->rawDESKey, $iv);
echo @decryptText($temp->patient->surname, $deszyfrator->return->rawDESKey, $iv);

function decryptText($encryptText, $key, $iv) {

    $cipherText = base64_decode($encryptText);
    $res = mcrypt_decrypt("tripledes", $key, $cipherText, "cbc", $iv);

    $resUnpadded = pkcs5_unpad($res);    
    return $resUnpadded;
}

function pkcs5_unpad($text)
{
    $pad = ord($text{strlen($text)-1});
    if ($pad > strlen($text)) return false;
    if (strspn($text, chr($pad), strlen($text) - $pad) != $pad) return false;
    return substr($text, 0, -1 * $pad);
} 
```

但是我收到一个警告（现在用 @ 隐藏）。“IV 应该与块大小具有相同的长度” - 我尝试了所有我能想到的组合，但我无法摆脱它。有什么想法的人吗？

编辑：次要问题已修复。这个kode将修复iv：

```
$iv_size=mcrypt_get_iv_size("tripledes","cbc");
$iv = str_repeat("\0", $iv_size);   //iv size for 3des is 8 
```

# java - 在 notifyAll() 之前没有被线程锁定的同步对象

> ID：14073516
> 
> 赞同：5
> 
> 时间：2012-12-28T17:44:34.213
> 
> 标签：java, multithreading, synchronization, synchronized, java-threads

我想要一个布尔值来通知系统的某些部分特定服务已启动。

出于某种奇怪的原因，我收到了错误消息`java.lang.IllegalMonitorStateException: object not locked by thread before notifyAll()`。

奇怪的是 notifyAll() 位于一个同步块内，该块控制我调用 notifyAll() 的对象。

我的课是这样开始的：

```
public class MyService {

    public static Boolean notifier = Boolean.valueOf(false);

    @Override
    public void start() {
        synchronized (MyService.notifier) {
            MyService.notifier = Boolean.valueOf(true);
            MyService.notifier.notifyAll();
        }
    }

    @Override
    public void stop() {
        synchronized (MyService.notifier) {
            MyService.notifier = Boolean.valueOf(false);
            MyService.notifier.notifyAll();
        }
    }
    ...
} 
```

我正在开发一个安卓应用程序。我认为它不会影响任何事情，但我会用该评论来补充这个问题，以防影响 java 的工作方式。

如果对象被锁定在同步块中，为什么会出现异常？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-28T17:49:07.210

线

```
MyService.notifier = Boolean.valueOf(true); 
```

换出你锁定的对象，它用对新对象的引用覆盖变量。因此，您在进入块时获得锁定的对象与您正在调用`notifyAll`的对象不同。众所周知，它还没有获得被调用对象的锁，这`notifyAll`是进入同步块后创建的新对象。

所有线程都需要使用相同的锁。就像 Ian Roberts 所说，锁属于对象。如果您覆盖该对象，您将获得一个新锁。

# c++ - 事件 wxWidgets

> ID：14073518
> 
> 赞同：1
> 
> 时间：2012-12-28T17:44:44.337
> 
> 标签：c++, user-interface, wxwidgets

我想了解如何执行特定任务。我试图在 wxWidgets 中设置事件表，但遇到了它们的行为问题。

我在一个类中设置了一些代码：

```
void TopRightPanel::OnSelChanged(wxTreeEvent& event)
{
    wxTreeItemId item = event.GetItem();
    TreeItemData* data = (TreeItemData *) GetItemData(item);

    if(data != NULL)
    {

        particleSystemManager->SetSelectedParticleSystem(data->particleSystem); 
    }

 } 
```

这工作正常，并且具有预期的正确值。不过我的问题是它是自包含的，我希望层次结构中它上面的类读取treeCtrl的操作并对UI的所有方面进行更改所以我尝试了这个：

```
void Window::OnSelChanged(wxTreeEvent& event)
{
    wxTreeItemId item = event.GetItem();
    TreeItemData* data = (TreeItemData *) topRightPanel->GetItemData(item);//item.m_pItem.//m_MyTreeCtrl->GetItemData(itemId);*/

    if(data != NULL)
    {
        particleSystemManager.SetSelectedParticleSystem(data->particleSystem); 

    }
} 
```

现在，当调用 topRightPanel->GetItemData(data) 时，我得到一个未处理的异常。它使用的 topRightPanel 似乎没有更新，并且似乎在它在类的构造函数中实例化之前指向数据。无论如何我可以解决这个问题吗？

编辑：

我像这样声明事件表：

```
#if USE_GENERIC_TREECTRL
BEGIN_EVENT_TABLE(TopRightPanel, wxGenericTreeCtrl)
#else
BEGIN_EVENT_TABLE(TopRightPanel, wxTreeCtrl)
#endif
EVT_TREE_SEL_CHANGED(TopRightPanel_Ctrl, Window::OnSelChanged)
END_EVENT_TABLE() 
```

然后我使用 DECLARE_EVENT_TABLE 在标题中声明表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:21:38.607

您**必须**在事件表宏中使用与在`BEGIN_EVENT_TABLE`. IOW，您的处理程序必须在事件表中定义，`Window`而不是在`TopRightPanel`事件表中。由于树事件是`wxCommandEvents`，它们向上传播到父级，因此如果`Window`包含树控件，这将起作用。否则，例如，如果他们是兄弟姐妹，则必须`Connect()`按照另一个答案中的说明使用。

强烈建议（重新）阅读[事件处理概述。](http://docs.wxwidgets.org/trunk/overview_events.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:32:33.787

您没有显示如何连接此事件处理程序，但问题几乎肯定存在，而不是在您显示的代码中。如果您正在使用`Connect()`，请确保将指向`Window`object 的指针作为其最后一个参数传递，否则您最终会`Window`在`TopRightPanel`object 上调用类的方法，这无疑会带来灾难性的后果。

如果您确定确实在正确的对象上调用了该方法，那么我看到的唯一其他解释是您没有`topRightPanel`在生成此类型的第一个事件之前进行初始化。如果是这种情况，最简单的解决方案是初始化指针`NULL`并在初始化代码的末尾正确设置它。当然，还要检查事件处理程序中的指针是否为非 NULL。

# magento - magento 创造了一个非常特别的可配置产品——足球队

> ID：14073520
> 
> 赞同：2
> 
> 时间：2012-12-28T17:44:47.170
> 
> 标签：magento, attributes, configurable-product

我需要在 Magento 1.7 上让用户为可配置产品中的每个数量选择属性。

**这个例子：**

我想为我的足球队订购 11 件足球衫。我需要选择尺寸并在产品页面中为每件衬衫写下球员的名字，如上图所示

![在此处输入图像描述](../Images/4310c25672a0b68b7e9498ab1d5ede42.png)

如果解决方案需要设置“11”为默认数量，没有问题

我需要的是让属性重复 11 次作为数量。

可能吗？

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:55:38.800

这可以在您的主题中轻松完成；使用文件

app/design/frontend/base/default/template/catalog/product/view/type/options/configurable.phtml

钩在

```
foreach($_attributes as $_attribute): 
```

并更改项目的显示方式（例如，多次显示）。之后，您需要修改下面的javascript-function，将所有产品添加到购物车。您可以在此处找到如何批量添加产品的示例：

[http://www.magentocommerce.com/boards/viewthread/9797/](http://www.magentocommerce.com/boards/viewthread/9797/)

询问您是否需要更多建议:)

欢呼西蒙

# php - Symfony2 数组集合不返回任何内容

> ID：14073521
> 
> 赞同：1
> 
> 时间：2012-12-28T17:44:50.050
> 
> 标签：php, arrays, symfony

每次我尝试使用其 ID 让所有用户进入特定教室时，它都没有返回任何内容。我有一个 user_id 和 class_id 的可连接

```
Classroom.orm.yml
  id:
    classID:
      column: class_id
      type: integer
      generator: { strategy: AUTO }
  fields:
  manyToMany:  // <---- this is the map
    classUsers:
      targetEntity: acme\UserBundle\Entity\User
      mappedBy: userClassrooms
  oneToMany:
    classAnnouncement:
      targetEntity: acme\ClassroomBundle\Entity\Announcements
      mappedBy: announcementClass
  manyToMany:
    classLesson:
      targetEntity: acme\ClassroomBundle\Entity\Lessons
      inversedBy: lessonClass
      joinTable:
        name: classroom_lessons
        joinColumns:
          fk_class_id:
            referencedColumnName: class_id
        inverseJoinColumns:
          fk_lesson_id:
            referencedColumnName: lesson_id

User.orm.yml

acme\UserBundle\Entity\User:
  type:  entity
  table: reg_user
  id:
    userID:
      column: user_id
      type: integer
      generator: { strategy: AUTO }
  fields:
...
  manyToMany: //this is the map
    userClassrooms:
      targetEntity: acme\ClassroomBundle\Entity\Classroom
      inversedBy: classUsers
      joinTable:
        name: classroom_users
        joinColumns:
          fk_user_id:
            referencedColumnName: user_id
        inverseJoinColumns:
          fk_class_id:
            referencedColumnName: class_id

Classroom.php
...   
public function __construct()
    {
        $this->classUsers = new ArrayCollection();  
//other array collections
        $this->classAnnouncement = new ArrayCollection(); 
        $this->classLesson = new ArrayCollection();
    }
    public function addClassUser(\acme\UserBundle\Entity\User $classUsers)
    {
        $this->classUsers[] = $classUsers;
           return $this;
    }

    public function removeClassUser(\acme\UserBundle\Entity\User $classUsers)
    {
        $this->classUsers->removeElement($classUsers);
    }
    public function getClassUsers()
    {
        return $this->classUsers;
    }

Controller
public function StudentClassroomAction($classID)
    {

        $class_repository = $this->getDoctrine()->getRepository('acmeClassroomBundle:Classroom');
        $classroom = $class_repository->find($classID); //im sure this stores an object of classroom
        $userinfo = $classroom->getClassUsers(); //THIS IS THE THING!!!

 //first i tried rendering it in twig. still gives me nothing
  /*return $this->render('acmeClassroomBundle:Classrooms:Student.html.twig',array(
            'classroom' => $classroom, 
            'classuser' => $userinfo));
            */
//I change it to response to know if something is stored in $userinfo it returns an empty page rather than an error.Then $userinfo still has no object stored.
        return new response($userinfo);

    }

tbl: classroom_users
 ______________________________
|  fk_user_id   |  fk_class_id|
-------------------------------
|        1      |     1       |
|        2      |     1       |
------------------------------- 
```

谁能告诉我，怎么了？我真的无法确定哪个特别是现在，因为它不会向我返回任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:39:24.870

这听起来很傻，但是 yaml 映射格式不正确，这就是无法读取映射的原因。

将教室.orm.yml 修复为

```
Classroom.orm.yml
manyToOne:
classCreatedBy:
  targetEntity: acme\UserBundle\Entity\User
  joinColumn:
    name: fk_created_by
    nullable: false
    referencedColumnName: user_id
oneToMany:
classAnnouncement:
  targetEntity: acme\ClassroomBundle\Entity\Announcements
  mappedBy: announcementClass

manyToMany: //changed this one
classUsers:
  targetEntity: acme\UserBundle\Entity\User
  mappedBy: userClassrooms

classLesson:
  targetEntity: acme\ClassroomBundle\Entity\Lessons
  inversedBy: lessonClass
  joinTable:
    name: classroom_lessons
    joinColumns:
      fk_class_id:
        referencedColumnName: class_id
    inverseJoinColumns:
      fk_lesson_id:
        referencedColumnName: lesson_id 
```

# jquery - 使用 jQuery 设置 DropDownList 服务器控件不会更改 SelectedValue

> ID：14073523
> 
> 赞同：-2
> 
> 时间：2012-12-28T17:45:05.063
> 
> 标签：jquery, asp.net

我遇到了一个问题，我使用 jQuery 设置下拉列表（asp.net 服务器控件）的值，但它不会在回发时更改 selectedvalue。该控件不是数据绑定的，因此我认为该问题与被覆盖的更改无关。该控件位于 WizardControl 内部，我也认为这与该问题无关。在客户端，一切都按预期工作。

这是我的代码：

```
<asp:DropDownList runat="server" ID="MilitaryBackgroundSelect" ClientIDMode="Static">
    <asp:ListItem Text="" Value="" Selected="True" />                        
    <asp:ListItem Text="No" Value="0" />
    <asp:ListItem Text="YES, IN THE ARMED FORCES" Value="1" />
    <asp:ListItem Text="YES, IN THE RESERVES" Value="2" />
    <asp:ListItem Text="YES, IN THE NATIONAL GUARD" Value="3" />
    <asp:ListItem Text="REFUSED" Value="-7" />
    <asp:ListItem Text="DON'T KNOW" Value="-8" />
    <asp:ListItem Text="MISSING DATA" Value="-9" />
</asp:DropDownList> 
```

我正在使用以下代码在客户端设置下拉列表：

```
 $(document).ready(function(){ 
      $('#MilitaryBackgroundSelect').val("1");
 }); 
```

注意：我在下拉列表中将 clientidmode 设置为静态，因此使用 jQuery 与它交互没有问题。下面是渲染的 HTML，注意 id 字段：

```
<select name="ctl00$ctl00$MainContent$MainContentNested$AHHQ_DataEntryWizard$MilitaryBackgroundSelect" 
id="MilitaryBackgroundSelect">
    <option value=""></option>
    <option selected="selected" value="0">No</option>
    <option value="1">YES, IN THE ARMED FORCES</option>
    <option value="2">YES, IN THE RESERVES</option>
    <option value="3">YES, IN THE NATIONAL GUARD</option>
    <option value="-7">REFUSED</option>
    <option value="-8">DON&#39;T KNOW</option>
    <option value="-9">MISSING DATA</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:48:07.827

因为您在服务器上运行它，所以您必须使用

```
<%= someObject.ClientID %> 
```

而不是常规的 id

还要确保设置下拉列表的 jquery 代码在

```
 $(document).ready(function(){ 
      $('#militaryBackgroundSelect').val(-1);
 }); 
```

也许在更高版本的 jquery 上你可以使用

```
 $("#militaryBackgroundSelect option[value='-1']").attr("selected", "selected"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T14:23:03.387

显然，使用 javascript 更改下拉列表不会触发更新的控件被发布回服务器（使用 fiddler2 验证）。我不确定为什么会这样，但有一些解决方法。

1.  您可以使用隐藏字段，当您更改下拉列表值时，您也将更新隐藏值。这是我以前使用 jQuery 做的一个片段：

    ```
     $(document).ready(function(){ 
          $('#dropdownelelement').change(function() {

           var elementID = $(this).attr("id");

           $("#" + elementID + "hidden").val($(this).val());

           }); 
    ```

    });

2.  我查看了[ASP.Net AJAX Toolkit](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/)组合框控件。它的工作方式与上面的方法类似，因为当它呈现给客户端浏览器时，它使用隐藏字段来存储其值。

最后我不得不拒绝这两种方法，因为根据用户输入启用或禁用哪个字段的某些逻辑有多复杂。我将代码放入更新面板，在驱动启用逻辑的控件上启用自动回发，并使用验证器控件来执行我的逻辑。它会导致令人讨厌的屏幕闪烁，但代码要简单得多。

感谢所有试图提供帮助的人。

# c - IF 循环中的算术运算

> ID：14073527
> 
> 赞同：0
> 
> 时间：2012-12-28T17:45:21.857
> 
> 标签：c

下面的代码有什么作用？我对它的工作感到很困惑。因为我认为 if 循环一直运行到 int 的范围。但是当我尝试打印`i`. 这个你能帮我吗。

```
#include<stdio.h>

void main()
{
    static int i;
    for (;;)
        if (i+++”Apple”)
            printf(“Banana”);
        else
            break;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:47:14.340

它被解释为`i++ + "Apple"`。因为`i`是静态的并且没有初始化器，所以 i++ 产生 0。所以整个表达式是`0 + some address`或等价于`if ("Apple")`.

### 编辑

正如 Jonathan Leffler 在评论中正确指出的那样，我上面所说的仅适用于第一次迭代。之后它将继续增加`i`并继续打印“香蕉”。

我*认为*在某些时候，由于溢出（如果它没有崩溃）`"Apple" + i`会产生 0 并且循环会中断。再说一次，我真的不知道一个好意的编译器在添加一个指针和一个大数字时应该做什么。

正如 Eric Postpischil 评论的那样，您只能将指针前进，直到它指向已分配空间的一倍。在您的示例中，添加 7 将使指针超过分配的空间（“Apples\0”）。添加更多是未定义的行为，并且可能会发生技术上奇怪的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T18:05:26.830

使用`int main(void)`而不是`void main()`.

表达式`i+++"Apple"`被解析为`(i++) + "Apple"`; 字符串字面`"Apple"`量从“6-element array of `char`”类型的表达式转换为“pointer to `char`”，其值是数组第一个元素的地址。该表达式`i++`计算为 的当前值`i`，并且作为*副作用*， in 的值`i`增加 1。

因此，我们将整数表达式的结果添加到由表达式`i++`产生的指针值`"Apple"`；这给了我们一个新的指针值，它等于或大于`"Apple"`. 所以假设字符串文字的地址`"Apple"`是 0x80123450，那么基本上我们正在评估这些值

```
0x80123450 + 0
0x80123450 + 1
0x80123450 + 2
... 
```

所有这些都应该评估为非零，这会导致`printf`语句被执行。问题是当`i++`导致整数溢出（其行为未明确定义）或`i+++"Apple"`导致指针值溢出时会发生什么。目前尚不清楚这`i+++"Apple"`是否会导致 0 值表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T21:17:51.077

这段代码应该是这样写的：

```
char *apple = "Apple";
for(i = 0; apple[i++];)
    printf("Banana"); 
```

它不仅比原文中发布的代码更清晰，而且更清楚地看到它的作用。但我想这来自“看看我们用 C 写东西有多奇怪”。在 C 语言中有很多可能的东西不是一个好主意。

也可以学习在头上平衡一盘热食，以便为自己准备晚餐。这并不是一个特别好的主意——除非你没有手和脚，我想……；）

编辑：除非这是错误的......等效的是：

```
char *apple = "Apple";
for(i = 0; apple+i++ != NULL;)
    printf("Banana"); 
```

在 64 位机器上，这需要一段时间。如果它在合理的时间内完成（将输出发送到 /dev/null），我会更新。在我的机器（AMD 3.4GHz Phenom II）上大约需要三分钟。

# php - 在加载页面时使用 javascript/jquery 提交表单

> ID：14073533
> 
> 赞同：0
> 
> 时间：2012-12-28T17:45:55.260
> 
> 标签：php, javascript, jquery

我编写了一个数组来将 GET 中的变量传递给搜索页面。搜索页面只有 4 个字段，但我只传递了最重要的变量，名字和姓氏。这是数组：

```
<?php echo "<td><a href='" . matry::base_to('test/trace', array('first'=>$patient->first , 'last' =>$patient->last)) . "'><ul class='controls'>
                    <li id='check_orders'><`span class='symbols'>L</span><span class='label'>Skip Trace</span></li>

                </ul></a></td>";?> 
```

当页面加载时，我只是回显 _GET 以预填充该页面上的第一个和最后一个输入字段..

我正在寻找的是一个脚本，它将执行搜索，并在该页面自动加载时填充名字和姓氏字段。此外，执行搜索时，它会填充到 iframe 中。（忘记那部分了）~！

我尝试使用：

```
<script>document.getElementById('stack').submit();</script>

 <form action='http://xxxx.yyyyyyy.com/stuffhere' name='es' target="my_iframe" id="stack"> 
```

无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:51:16.427

你`<script>`在存在之前运行`<form>`。

移动`<script>`下面的`<form>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T17:49:42.660

您甚至在表单加载到页面上之前调用了提交函数。

将脚本标签放在关闭表单标签之后，或者在文档准备好或窗口加载时调用提交。

```
<form id-"stack">
  ... form fields...
</form>
<script>document.getElementById('stack').submit();</script> 
```

或者

```
<script>$(function(){$('#stack').submit();})</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:50:19.723

试试这个，在重定向页面上使用了一段时间。这当然需要在 from 之下，以便在浏览器处理表单后运行。

```
<script type="text/javascript">
    function send(o)
    {
        var f = document.getElementById("theForm");
        f.submit();
    }
    send();
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T17:51:21.910

如果您想在页面加载时提交表单，您应该将代码更改为：

```
<script>window.onload = function(){ document.getElementById('stack').submit(); }</script> 
```

但是，这将重定向用户（就像他们单击了表单提交按钮一样）。为避免这种情况，您需要使用 AJAX（我建议使用 jQuery 来执行此操作）。请参见下面的示例：

```
 $(document).ready(function(e) {

    var form_data = $("#form_id").serialize();
    var form_url = $("#form_id").attr("action");
    var form_method = $("#form_id").attr("method").toUpperCase();

    $.ajax({
        url: form_url, 
        type: form_method,      
        data: form_data,     
        cache: false       
    });    

 }); 
```

有关使用 AJAX 的更多信息，请参阅[此页面](http://me.cloudcell.co.uk/jquery-ajax-form-submit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T17:52:36.147

请想象这个简单的例子：

```
<html>
  <head>
    <script type="text/javascript">
        function body_onload() {
            var form = document.getElementById('theform');
            form.submit();
        }
    </script>
  </head>
  <body onload="body_onload()">
    <form id="theform" action="action.php">
        <input type="hidden" name="query" id="query" value="foo" />
    </form>
  </body>
</html> 
```

它将在页面加载后提交表单。

但是您真的在寻找非 AJAX 解决方案吗？

# tridion - Tridion GUI 性能优化

> ID：14073534
> 
> 赞同：2
> 
> 时间：2012-12-28T17:46:06.177
> 
> 标签：tridion, tridion-2011

最近我们从 Tridion 5.3 升级到了 Tridion 2011 SP1。Tridion GUI 最初的性能非常好。但是当我们将所有 VBScript 模板转换为复合模板时，我们必须发布整个站点（大约 1600 个页面和 5000 个组件）。发布站点后，我们发现 Tridion GUI 变得非常慢，而且发布队列也需要大量时间才能加载，任何人都可以建议一些关于 CMS 服务器和 SQL 数据库的性能优化技巧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T17:56:26.107

显然，您的性能影响是由于您的发布商而不是 CME/IIS，因为您声明

> 发布网站后，我们发现 Tridion GUI 变得很慢

所有页面发布后发生了什么？

CME（内容管理器资源管理器）和发布者是独立的进程，我们倾向于将它们精确地安装在不同的机器上，以避免这种类型的资源瓶颈。

您是否考虑过，从性能的角度来看，转换为模块化模板的过程可能不是很成功或经过充分测试？

无论如何，没有快速的解决方案。如果 CME 响应比发布吞吐量更重要，则通过限制渲染线程数来降低发布者吞吐量。如果发布性能对您来说足够重要，请添加一台机器来处理发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:45:49.097

对于 Publish Queue 性能，请使用服务器上的 Purge 工具删除成功的发布事务。当在新旧版本的 Tridion 中批量发布时，这一点很重要。

# sql - 将 .CSV 批量导入 SQL 表

> ID：14073537
> 
> 赞同：0
> 
> 时间：2012-12-28T17:46:45.640
> 
> 标签：sql, csv, sql-server-2008-r2, bulk-import

我在将 .csv 文件导入 sql 表时遇到了一个奇怪的问题。从 .csv 批量导入不会出现任何错误并且可以正常完成，但不会将数据导入 SQL 表中。.csv 中有数据

但是，当我在 excel 中打开 .csv 并再次将其另存为 .csv 时，尝试批量导入，检查表格并且数据在那里。

关于它可能是什么的任何想法？如果是编码问题，我如何在导入或强制 sql 导入之前检查 .csv 文件的编码，无论如何。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:50:33.383

为了识别拒绝和问题，我们在从文件加载时只有日志和坏文件，

1.  您的日志文件将有拒绝的原因

2.  您的错误文件将有一个样本被拒绝记录

对于您的问题，当您在 excel 中打开它并且它正在工作时：这只不过是某些字段（可能是日期列）的格式会在您在 excel 中打开它时发生变化，这可能适合您的表结构。

尝试给出 MAX ERROR 0 并运行，

```
BULK INSERT OrdersBulk 
    FROM 'c:\file.csv' 
    WITH 
    ( 
        FIRSTROW = 2, 
        MAXERRORS = 0, 
        FIELDTERMINATOR = ',', 
        ROWTERMINATOR = '\n' 
    ) 
```

希望这可以帮助

# android - 如何访问使用 Android 时钟应用程序创建的闹钟？

> ID：14073541
> 
> 赞同：1
> 
> 时间：2012-12-28T17:46:58.560
> 
> 标签：android

刚刚购买了 Nexus 7 平板电脑（并且是 Android 用户体验的新手），我*喜欢*该软件附带的各种小部件，但我很惊讶没有小部件可以列出您通过时钟应用设置的任何闹钟。我很好地利用 Google 语音命令的“提醒我”命令来设置提醒，所以很高兴看到通过时钟应用设置的闹钟列表。

为此，我打算创建一个 Android 小部件，用于在时钟应用程序中显示闹钟列表，并附上标题和日期/时间。我读过使用 ContentProvider 来实现这一点在许多设备上不兼容并且不受支持，所以如果可能的话，我想找到一个更好的解决方案。

谁能帮我发现如何在时钟应用程序中检索闹钟列表？自然，一旦完成，我很乐意在 Google Play 上分享。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:57:33.930

> 我读过使用 ContentProvider 来实现这一点在许多设备上不兼容并且不受支持，所以如果可能的话，我想找到一个更好的解决方案。

“更好的解决方案”是找到一个现有的第三方闹钟，其中包含您想要的应用程序小部件，或者编写您自己的闹钟应用程序，其中包括您想要的应用程序小部件。

与闹钟相关的唯一记录和半支持的 Android API 是让您定义一个新的闹钟。没有记录和支持的方法可供您访问或操作闹钟应用程序中的警报，并且在 Android 4.2（大概是您的 Nexus 7 运行的）上，未记录和不受支持的`ContentProvider`应该不可用，因为它不是出口。

您可以为现有的 AOSP 闹钟应用程序提供补丁，以添加应用程序小部件或将其添加`ContentProvider`到 SDK（并实际将其标记为已导出）。但是，假设这些补丁被接受，这些补丁将需要很长时间才能在生产 Android 版本中可用。

# php - 在 PHP 2 项目中的问题排序每行

> ID：14073542
> 
> 赞同：0
> 
> 时间：2012-12-28T17:47:11.227
> 
> 标签：php, sorting, rows, break

我构建了一个代码，其中一些项目从 db 加载并显示在 2 行 2 行中。基本上，当计数器是偶数时，它会添加一个换行符并转到下一行。

我的问题是，现在只有前 2 行没问题。第三行只有 1 个项目并放在右侧，然后有一个换行符。然后第 4 行也可以显示 2 个项目。

这是图表：

```
ITEM1  ITEM2  
ITEM3  ITEM4  
       ITEM5
ITEM6  ITEM7 
```

这是我的代码：

```
while($info = $items->fetch(PDO::FETCH_ASSOC)) 
{
echo "<div name='item' id='".$info['color_base1']."' class='itemBox'><div class='showItem'><a href='items_descr.php?itemId=".$info[id_item]."'><img class='itemImage' alt='' src='images/$info[imageMid].jpg'></img></div><br />";
echo "<div class='indexItemText'><font class='similarItemsText'><a href='items_descr.php?itemId=".$info[id_item]."'>".$info[name]."</a><font class='price'> - $".$info[price]."</div></div>";
$row_count++;
if ($row_count % 2 == 0) 
    {
echo "<br />"; // close the row if we're on an even record
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:52:48.283

首先尝试这样，以确保您获得预期的数据。

```
while($info = $items->fetch(PDO::FETCH_ASSOC)) 
{
    var_dump($info);
} 
```

如果看起来正确，请添加逻辑以计算 2x2 行。如果看起来正确，则开始添加包装数据的 HTML。通过逐步并按此顺序进行操作，将更容易使其正确。

# android - Android 上的旁遮普语/泰卢固语/泰米尔语使用 unicode UTF-8

> ID：14073545
> 
> 赞同：1
> 
> 时间：2012-12-28T17:47:25.553
> 
> 标签：android, utf-8, localization, android-emulator

我正在尝试在 Android 应用程序上以印度地区语言显示文本。尽管我已经设置了所有本地化文件夹，但我只想为我的应用程序设置一种语言（比如旁遮普语）。

在我的 strings.xml 中，我尝试将印地语字符和中文字符放在模拟器上正确显示。但是当我输入旁遮普字符时，模拟器上什么也没有显示。这有什么原因吗？我能克服这个问题吗？

我可以选择在资产文件夹中为旁遮普字体使用 .ttf 文件。但这不是我想要做的，因为它不能让我完全控制正在显示的内容。每个 .ttf 的行为都不同。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:50:24.370

Android 上尚不支持本地印度语言。因此，超出 Android 可接受范围的 UTF-8 字符将被忽略。因此，我们看到正在显示一个空白。

# android - 练习器工具 - 如何减慢输入事件的速度？

> ID：14073547
> 
> 赞同：0
> 
> 时间：2012-12-28T17:47:26.873
> 
> 标签：android

我正在尝试运行锻炼者猴子工具，但我不断在随机位置获得 ANR，甚至是谷歌应用程序。我认为这部分是由于点击的交付率。我尝试使用油门参数，但似乎没有得到尊重。像这样运行：

```
adb shell monkey -p com.my.package -v 50 --throttle 4000 
```

所以我预计事件之间会有 4 秒的延迟 - 我是否误解了该参数的含义？似乎仍然尽可能快地发送事件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:41:18.847

这曾经有效，所以这感觉就像当前猴子的一个错误。我已经[就此提出了一个问题](http://code.google.com/p/android/issues/detail?id=42037)。

# php - php更新功能

> ID：14073549
> 
> 赞同：0
> 
> 时间：2012-12-28T17:47:47.833
> 
> 标签：php, mysql, sql

我写了这段代码

```
if(isset($_POST['update'])) {
            $webname = $_POST['webname'];
            $webmeta = $_POST['webmeta'];
            $webdesc = $_POST['webdesc'];

            $sql=("UPDATE settings (name, meta, description) VALUES ('$webname', '$webmeta', '$webdesc')");
            } 
```

但问题是它没有更新我的数据库，我在代码中找不到任何错误......我在提交按钮上有名称“更新”，我的所有字段都与代码中的相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:49:29.137

### 那是插入！不更新！

```
$sql=("UPDATE `settings` SET `name` = '$webname',
                             `meta` = '$webmeta',
                              `description` = '$webdesc')
               WHERE [some condition]"); 
```

并将 替换`[some condition]`为有效条件。

### 您的代码很容易受到 SQL 注入的攻击。

考虑通过替换这些来转义输入：

```
$webname = $_POST['webname'];
$webmeta = $_POST['webmeta'];
$webdesc = $_POST['webdesc']; 
```

和：

```
$webname = mysql_real_escape_string($_POST['webname']);
$webmeta = mysql_real_escape_string($_POST['webmeta']);
$webdesc = mysql_real_escape_string($_POST['webdesc']); 
```

或者类似 PDO 或 MySQLi 的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:51:39.493

```
 mysql_select_db("my_db", $con);

 mysql_query("UPDATE Persons SET Age=36
    WHERE FirstName='Peter' AND LastName='Griffin'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:56:36.440

你需要先制定查询然后运行/执行

```
$query = "UPDATE table_name
 SET column1=value, column2=value2,...
 WHERE some_column=some_value";

// Perform Query
$result = mysql_query($query); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T18:18:56.973

你需要跑

```
$connection = mysql_connect($server, $serv_Username, $serv_Password);
mysql_select_db($dbase_name, $connection);
mysql_query($update_query, $connection)); 
```

我不知道这是否是您的问题（不知道您对 PHP 了解多少，就这么说吧）。

你的语法也是错误的。应该：

```
UPDATE tablename SET column_name='some_value' WHERE column_name ='some_value' 
```

请注意，这与上面提到的不同，没有 `涵盖 column_name 参数的东西。`

 `更好的是使用上面提到的 PDO，mysql_ 可以在 < PHP 5.5 上“安全地”使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-20T06:33:50.100

```
 Try The code shown below
 Just replace the field names and values with your information on your database

    $editid=$_POST['editid'];
    $username=callback($_POST['username']);
    $password=callback($_POST['password']);
    $name=callback($_POST['name']);
   $age=callback($_POST['age']);
   $phone=callback($_POST['phone']);
   $emailaddress=callback($_POST['emailaddress']);
  $gender=callback($_POST['gender']);
  $description=callback($_POST['description']);

    $update=update("users","username='".$username."',password='".$password."',name='".$name."',age='".$age."',phone='".$phone."',emailaddress='".$emailaddress."',gender='".$gender."',description='".$description."' ","ID='".$editid."' " ); 
````

# java - Windows 上 nio.2 AsynchronousServerSocketChannel.accept() 的正确行为？

> ID：14073554
> 
> 赞同：0
> 
> 时间：2012-12-28T17:48:11.010
> 
> 标签：java, nio2

以下测试程序执行简单的绑定/接受，然后关闭通道组。

我希望程序打印出生成的 ShutdownChannelGroupException，但它从不调用完成处理程序并在线程池中引发异常。

有人可以阐明发生了什么吗？当他们说 shutdownNow() 具有以下行为时，我是否误解了文档：“当所有主动执行的完成处理程序都运行完成并且所有资源都已释放时，该组终止”。

回调是不是“活动”还没有因此被丢弃？

```
public static void main(String[] args) throws java.io.IOException, InterruptedException {

    ExecutorService service = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors());
    AsynchronousChannelGroup group = AsynchronousChannelGroup.withThreadPool(service);
    AsynchronousServerSocketChannel acceptor = AsynchronousServerSocketChannel.open(group);
    acceptor.bind(new InetSocketAddress(50000));
    acceptor.accept(null, new CompletionHandler<AsynchronousSocketChannel, Object>() {
        @Override
        public void completed(AsynchronousSocketChannel result, Object attachment) {

        }

        @Override
        public void failed(Throwable exc, Object attachment) {
            System.out.println("failed: " + exc.getMessage());
        }
    });
    System.out.println("Shutting down");
    group.shutdownNow();
    System.out.println("Awaiting termination");
    group.awaitTermination(60, TimeUnit.SECONDS);
    System.out.println("Sleeping");
    Thread.sleep(1000);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T16:33:29.503

“主动执行完成处理程序”意味着正在执行“完成”或“失败”方法的处理程序。

然后， AsynchronousServerSocketChannel.accept() 的文档内容如下：

“组关闭并接受连接，然后关闭连接，操作以 IOException 完成”。

因此，当不接受连接时，不会有任何反应。就像你一样，我希望当组关闭时，尚未接受的连接处理程序应该调用“failed()”，但我们不知道当前实现背后的所有注意事项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:00:42.963

我也看到过这种行为，但仅在 Windows 上，根据我的经验，相同的代码在 Centos/Ubuntu 上没有问题。我认为您的假设是正确的，IOCP 处理中的某些内容在 shutdownNow() 期间没有退出干净。我发现如果一个或多个连接处于活动状态，则 shutdownNow() 将干净地完成。当然，这可能因 JVM 而异。

像这样的东西对我有用（打开一个连接，不要关闭它）：

```
idle = AsynchronousSocketChannel.open(group);
Future<Void> fut = idle.connect(new InetSocketAddress("localhost",50000));
fut.get(); 
```

这肯定是一个 hack，但可以帮助您忽略令人讨厌的异常，以便您可以专注于真正的异常。

# node.js - Fabricjs+Node.js：织物的画布 toDataURL 调用 toBuffer() 不是方法

> ID：14073557
> 
> 赞同：0
> 
> 时间：2012-12-28T17:48:33.270
> 
> 标签：node.js, fabricjs

我正在使用以下代码尝试查看是否可以从 json 字符串加载画布，然后为其生成 dataURL png：

```
var fabric=require('fabric');
var canvas = new fabric.fabric.Canvas();
var jsonStr='{"objects":[],"background":"rgba(0, 0, 0,0)","backgroundImage":"http://entropy.tmok.com/~gauze/canvas/any.gif","backgroundImageOpacity":1,"backgroundImageStretch":true,"overlayImage":"http://entropy.tmok.com/~gauze/canvas/frame.png","overlayImageLeft":0,"overlayImageTop":0}';

canvas.loadFromJSON(jsonStr);
img=canvas.toDataURL('png'); 
```

它在 toDataURL() 行上出错：

/root/node-v0.8.16-linux-x86/node_modules/canvas/lib/canvas.js:190 返回前缀 + this.toBuffer().toString('base64'); ^

它告诉我“this”（根据 console.log 是 Canvas）没有 .toBuffer() 方法。我做错了什么还是这是fabric节点模块中的错误？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T15:26:30.783

没关系我错过了：.createCanvasForNode() 等不及这个文档了：P

# javascript - 在 Sencha-Touch 2 应用程序中加载外部 Web 应用程序

> ID：14073559
> 
> 赞同：1
> 
> 时间：2012-12-28T17:48:36.563
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2

我是 Sencha-Touch 2 的新手，正在做一个项目，我必须在我的应用程序中访问一个网站，但该网站与应用程序位于不同的域中。

我想将它加载到 iframe 中，但 iframe 中的内容不显示 iframe 容器中外部 url 的任何内容。

一个例子如下。

```
new Ext.TabPanel({
            fullscreen: true,
            type: 'dark',
            sortable: true,
            items: [{
                title: 'Tab 1',
                html: '1',
                cls: 'card1'
            }, {
                title: 'Tab 2',
                html: '2',
                cls: 'card2'
            }, {
                title: 'The Latest',
        html: '<iframe src =\"http://www.google.com\"></iframe>',
        id: 'feedTab',
        iconCls: 'team',
        scroll : false
            }]
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:00:57.997

您可以做的最好的事情是下载PhoneGap，将您的HTML5/Sencha 应用程序粘贴到一个新PhoneGap 应用程序的www 目录中，使用XCode 编译它，这样您就有一个为您的Sencha 应用程序提供服务的本机PhoneGap 应用程序。然后，一旦你做到了这一点，你就可以创建一个事件来加载你的外部应用程序（例如，点击按钮等）。

PhoneGap 提供了一个 JavaScript 入口点，您可以在 Sencha 开发中使用它。您可以运行本机 PhoneGap 功能，包括 PhoneGap 的 ChildBrowser 插件 (https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/ChildBrowser)。使用 Sencha 调用 PhoneGap 的 childbrowser 插件的 JS 入口点，并使用 ChildBrowser 加载您的外部应用程序。

你不能只做一个 iframe 的原因至少有三个：

1.  有些人抱怨在 sencha 应用程序中加载 iframe 会导致应用程序在 Native 中崩溃。（我想如果 iframe 包含复杂的网页，这可能会导致内存问题，从而导致应用程序崩溃。）
2.  没有简单的方法来支持 iframe 内的滚动。Sencha 实现的基于 JS 的触摸滚动并没有带入 iframe。（有可能让它与某种黑客一起工作，但你仍然会遇到上面的问题＃1。）
3.  您可能在调整 iframe 内内容的大小以使其看起来不错时遇到问题。

我应该注意，为了完整起见，有些人在这个网站上表示他们已经能够通过 JSONP / AJAX 加载网页，然后将页面的 HTML 注入他们的 Sencha 应用程序。我怀疑这可能会像在PhoneGap上简单一点并使用ChildBrowser插件一样复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:01:07.470

iframe 标签没有正确关闭，不要忘记设置它的宽度和高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T12:05:16.763

根据您的要求为 iFrame 提供宽度和高度。

要滚动使用 CSS：

```
overflow : scroll; 
```

还可以查看 iFrame 的沙盒和无缝属性

[http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

# php - js getTimezoneOffset() 在 php

> ID：14073560
> 
> 赞同：1
> 
> 时间：2012-12-28T17:48:42.703
> 
> 标签：php, javascript, timezone

```
new Date().getTimezoneOffset()*(-1); 
```

此 JS 函数以分钟为单位返回机器的 UTC 时区。有没有任何 PHP 函数做同样的事情？
谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:14:24.480

```
<?php // RAY_easy_client_time.php
error_reporting(E_ALL);

// USE JAVASCRIPT TO GET THE CLIENT TIME AND COMPUTE THE OFFSET FROM THE SERVER TIME

// LOCATION OF THE SERVER - COULD BE ANYWHERE
date_default_timezone_set('America/Denver');

// DIFFERENCE OF SERVER TIME FROM UTC
$server_offset_seconds = date('Z');

// WHEN THE FORM IS SUBMITTED
if (!empty($_POST))
{
    // JAVASCRIPT TELLS US THE CLIENT TIME OFFSET FROM GMT / UTC
    $client_offset_minutes = $_POST["date_O"];
    $client_offset_seconds = $client_offset_minutes * 60;

    // THE TIME WE WANT AT THE CLIENT LOCATION
    $client_timestring = 'TODAY 7:00AM';

    // MAKE THE COMPUTATIONS, INCORPORATING THE OFFSET FROM GMT
    $client_timestamp  = strtotime($client_timestring) + $client_offset_seconds;
    $server_timestamp  = $client_timestamp + $server_offset_seconds;
    $server_timestring = date('l, F j, Y \a\t g:i a', $server_timestamp);

    echo "<br/>ACCORDING TO THE VALUE FROM PHP date Z";
    echo "<br/>SERVER IS LOCATED $server_offset_seconds SECONDS FROM UTC";
    echo "<br/>";

    echo "<br/>ACCORDING TO THE VALUE FROM JS dateObject.getTimezoneOffset()";
    echo "<br/>CLIENT IS LOCATED $client_offset_minutes MINUTES FROM UTC";
    echo "<br/>";

    echo "<br/>WHEN IT IS '$client_timestring' AT THE CLIENT, IT IS '$server_timestring' IN " . date_default_timezone_get();
}

// END OF PHP - USE HTML AND JS TO CREATE THE FORM
echo PHP_EOL; ?>

<form method="post">
<input name="date_O" id="dateTime_O" type="hidden" />
<input type="submit" value="CHECK CLIENT DATETIME" />
</form>

<!-- NOTE THIS WILL GIVE YOU THE VALUES AT PAGE-LOAD TIME, NOT AT SUBMIT TIME -->
<!-- MAN PAGE REF: http://www.w3schools.com/jsref/jsref_obj_date.asp -->
<script type="text/javascript">
var dateObject = new Date();
document.getElementById("dateTime_O").value = dateObject.getTimezoneOffset();
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:17:49.297

PHP 作为服务器端，只能读取客户端发送的内容。如果没有用户（或浏览器等用户代理）明确告知，它无法告知用户时区。

有几种猜测方法。您可以通过调用位置服务来查找 IP 并根据 IP 位置猜测时区（时间昂贵并且可能返回不正确的结果，我不推荐它）。

您还可以让您的 javascript 进行 ajax 调用以告诉服务器该值`Date().getTimezoneOffset()`是什么。我个人会走这条路。

# visual-studio-2010 - 如果之前安装了 SQL Server 2012，VS2010 不会显示

> ID：14073563
> 
> 赞同：3
> 
> 时间：2012-12-28T17:49:02.287
> 
> 标签：visual-studio-2010, sql-server-2012

我按以下顺序安装它们：

1.  安装 SQL Server 2012 SP1 x64
2.  视觉工作室 2010

这是其他开发人员推荐的正确顺序，就像我一样。问题是，如果系统上安装了 SQL Server 2012，VS2010 的快捷方式不会显示出来。

我怎样才能解决这个问题？

**注：**操作系统为 Windows 8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T17:49:02.287

这是一个错误。

> 一种解决方法是导航到 C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Microsoft Visual Studio 2010，右键单击名为 Microsoft Visual Studio 2010 的快捷方式，然后选择 Pin to Start。之后，将有两个针对 devenv 的快捷方式（一个名为 Microsoft SQL Server Data Tools，一个名为 Microsoft Visual Studio 2010）

参考：[http ://connect.microsoft.com/VisualStudio/feedback/details/730276/after-installing-sql-server-2012-on-my-windows-8-pc-visual-studio-2010-shortcuts-disappeared](http://connect.microsoft.com/VisualStudio/feedback/details/730276/after-installing-sql-server-2012-on-my-windows-8-pc-visual-studio-2010-shortcuts-disappeared)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-07T21:59:33.550

正如OP所说。我在VS之前也安装了SQL。我经常做。所以当我找不到我的 VS2010 快捷方式时，我感到很困惑。

事实证明，该图标命名错误。如果您打开（或检查属性）Visual Studio 2010 开始菜单文件夹中名为“Sql Server Data Tools”的图标。您可能会发现它实际上是 VS 2010 IDE。

![在此处输入图像描述](../Images/41fa9b336ced5d62a278530dcadb0527.png)

[http://connect.microsoft.com/VisualStudio/feedback/details/730276/after-installing-sql-server-2012-on-my-windows-8-pc-visual-studio-2010-shortcuts-disappeared](http://connect.microsoft.com/VisualStudio/feedback/details/730276/after-installing-sql-server-2012-on-my-windows-8-pc-visual-studio-2010-shortcuts-disappeared)提供的解决方法

编辑快捷方式启动目标。例如。我让我的不显示启动页面。

```
"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe" /nosplash 
```

然后将其重新固定到开始菜单（右键单击）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-01T12:25:19.497

安装 Visual Studio 2010 SP1 似乎也可以解决这个问题，它可以从这里下载[http://www.microsoft.com/en-us/download/details.aspx?id=23691](http://www.microsoft.com/en-us/download/details.aspx?id=23691)如果你运行 devenv.exe 它应该提示你也这样做。

# git - Git状态显示远程和本地更改

> ID：14073568
> 
> 赞同：2
> 
> 时间：2012-12-28T17:49:14.217
> 
> 标签：git, version-control

我在 git 中使用 2 个本地分支，我们称它们为 alerts_v2 和 . 我对 A 进行了一些更改，提交它们，然后切换到 B。我在 B 中做了一些工作，现在切换回分支 A 后，我将远程分支的文件更改与本地更改混合在一起。因此，当我执行 git status 时，我列出了一堆我没有更改的文件。我的目标是让我的分支在提交的更改方面与远程主机匹配，然后只有在我执行“git status”时才显示我的本地更改。

更新：我已经粘贴了 reflog 的副本。分支 alerts_v2 对应于上例中的分支 A。在切换回 alerts_v2 之前，我实际上使用了几个分支，因此分支 B 实际上代表了几个分支（但我认为这并不重要）。

条目 23a03b7 是我离开 alerts_v2 的地方，而条目 f6c143e 是我搬回来的地方。

```
31b259f HEAD@{1}: origin/master: updating HEAD
74aab0b HEAD@{2}: commit: Blap
31b259f HEAD@{3}: origin/master: updating HEAD
f6c143e HEAD@{4}: checkout: moving from version to alerts_v2
31b259f HEAD@{5}: commit: Added version information popup
b2c9ce3 HEAD@{6}: origin/master: updating HEAD
f0c9b0c HEAD@{7}: commit: Blap
b2c9ce3 HEAD@{8}: origin/master: updating HEAD
abba6bc HEAD@{9}: commit: Blap
b2c9ce3 HEAD@{10}: origin/master: updating HEAD
34ecadc HEAD@{11}: commit: Blap
f3cb5f9 HEAD@{12}: commit: Blap
b2c9ce3 HEAD@{13}: origin/master: updating HEAD
3a8c25d HEAD@{14}: commit: Blap
b2c9ce3 HEAD@{15}: origin/master: updating HEAD
6820bd3 HEAD@{16}: pull : Merge made by recursive.
ad215b1 HEAD@{17}: commit: Blap
27bd651 HEAD@{18}: commit: Blap
e74af44 HEAD@{19}: checkout: moving from e74af44ae40484d837e0295c1622731de1dcb84e to version
e74af44 HEAD@{20}: pull : Fast-forward
76bb1fa HEAD@{21}: checkout: moving from ncli to master2
e74af44 HEAD@{22}: commit: Added download NCLI button
ed2d3c4 HEAD@{23}: origin/master: updating HEAD
9ad842a HEAD@{24}: pull : Merge made by recursive.
b99d663 HEAD@{25}: commit: Added download ncli button
e83d923 HEAD@{26}: origin/master: updating HEAD
719791a HEAD@{27}: commit: Added download NCLI button
9e613d1 HEAD@{28}: commit: Added download ncli button
e83d923 HEAD@{29}: origin/master: updating HEAD
a4d6d42 HEAD@{30}: pull : Merge made by recursive.
39f5fed HEAD@{31}: commit: Add NCLI download capability
76bb1fa HEAD@{32}: checkout: moving from 76bb1fa890089ca732322eba7ad9e74486e2bda1 to ncli
76bb1fa HEAD@{33}: checkout: moving from master to master2
9248d50 HEAD@{34}: commit: Blap
76bb1fa HEAD@{35}: origin/master: updating HEAD
23a03b7 HEAD@{36}: checkout: moving from alerts_v2 to master
f6c143e HEAD@{37}: commit: Blap
8a4b166 HEAD@{38}: commit: Blap
76bb1fa HEAD@{39}: pull : Fast-forward
d245574 HEAD@{40}: pull : Fast-forward
c1e5e92 HEAD@{41}: pull : Fast-forward
b8602a5 HEAD@{42}: commit: Changed Alert event handling
db06232 HEAD@{43}: origin/master: updating HEAD
e807ef7 HEAD@{44}: rebase: Commit
db06232 HEAD@{45}: checkout: moving from alerts_v2 to db06232a413d79fd5607c5618dce8a316efbe84
8cc089f HEAD@{46}: pull : Merge made by recursive.
c74acd9 HEAD@{47}: commit: Commit
4a0c135 HEAD@{48}: commit: Changed the name attribute in the AlertModel to map to Alert Type
ed087cd HEAD@{49}: origin/master: updating HEAD
3db4639 HEAD@{50}: commit: Changed the name attribute in the AlertModel to map to Alert Type
ed087cd HEAD@{51}: origin/master: updating HEAD
ecaea02 HEAD@{52}: commit: Changed the name attribute in the AlertModel to map to Alert Type
ed087cd HEAD@{53}: origin/master: updating HEAD
36323fa HEAD@{54}: pull : Merge made by recursive.
18034e5 HEAD@{55}: commit: Changed AlertMode name attribute to map to Alert Type
a46de98 HEAD@{56}: origin/master: updating HEAD
6fae22b HEAD@{57}: checkout: moving from alerts_patch1 to alerts_v2
8efde4b HEAD@{58}: checkout: moving from alerts_v2 to alerts_patch1
6fae22b HEAD@{59}: commit: Made some changes
a46de98 HEAD@{60}: checkout: moving from a46de98c050cfc8b61b5efccb20d0a271b3959d2 to alerts_v
a46de98 HEAD@{61}: checkout: moving from a46de98c050cfc8b61b5efccb20d0a271b3959d2 to events1
a46de98 HEAD@{62}: commit: Initial implementation of Alert Manager, Namespace Manager and Pol
5cfb8a2 HEAD@{63}: origin/master: updating HEAD
f978dae HEAD@{64}: commit: Initial implementation of Alert Manager, Namespace Manager and Pol
5cfb8a2 HEAD@{65}: origin/master: updating HEAD 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T02:40:50.527

当您有本地更改时签出（或切换）到不同的分支将成功，只要这些更改不会在新分支上产生冲突。这些可能是您看到的已更改文件，您在分支 B 上的待处理工作。

您可以通过硬重置删除对跟踪文件的所有更改：

```
git reset --hard HEAD 
```

但这会删除你的更改，如果你想保存它们，你可以隐藏它们：

```
git stash 
```

Stashing 将创建您的更改记录，并将任何跟踪的文件恢复到`HEAD`. 您可以看到您拥有的 stash 列表`git stash list`。

当您移回正确的分支时，您可以检索您保存的存储：

```
git stash pop 
```

还有一些[存储文档以防万一](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html)。

# javascript - 只为 HTML 元素的一部分着色

> ID：14073571
> 
> 赞同：7
> 
> 时间：2012-12-28T17:49:29.920
> 
> 标签：javascript, css

我将如何只使用类似的东西为 HTML 元素的一部分着色`background-clip`- 仅使用 CSS。

**我看起来像：**

```
div {
   background-image: url('mi_image');
   ***: 50% 30em; /* Background only covering 50% height and 30em width */
} 
```

如有必要，我也对 JavaScript 解决方案持开放态度——但纯 CSS 会更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:00:36.747

我会创建一个背景 div。考虑这个 HTML：

```
<div id="outer-container">
    <div id="container-background"></div>
    <div id="container">
        <p>
            Here's some of my interesting text        
        </p>    
    </div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

使用这个 CSS：

```
<style type="text/css">
    #outer-container {
        height: 300px;
        width: 300px;
        border: 1px solid black;
        position: relative;
        overflow: hidden;
    }
    #container-background {
        position: absolute;
        top: 0px;
        left: 0px;
        background-color: #FF0000; /* Use background-image or whatever suits you here */
        width: 50%; /* Your width */
        height: 200px; /* Your height */
        z-index: -1;
    }​
</style> 
```

要创建这样的结果：

![演示](../Images/3672e88c24ce0350d3c93a178a5c805c.png)

[**JSFiddle 演示**](http://jsfiddle.net/3xP8H/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:58:23.950

您可以使用伪元素*为元素背景的一部分*着色`:before`。

**演示**：http: [//jsfiddle.net/yw3wF/](http://jsfiddle.net/yw3wF/)

**代码：**

```
<div class="foo">This is the element. This is the element. This is the element. This is the element. This is the element. This is the element. This is the element. This is the element. This is the element. This is the element. </div>

.foo {
    width: 200px;
    height: 200px;
    position: relative;
    border: 1px solid green;
    margin: 10px;
    float: left;
}
.foo:before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 50%;
    background-color: yellow;
    z-index: -1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T18:09:04.343

我不确定我是否完全理解你的问题，但看看这个小提琴：http: [//jsfiddle.net/TJSdq/](http://jsfiddle.net/TJSdq/)看看这是否是你想要的。

**HTML**

```
<div>
    This is my div and I love my divs. I take good care of my divs; they are my babies.
</div>​ 
```

**CSS**

```
div{
    width:200px;
    height:200px;
    padding:20px;
    background-color:yellow;
    background-clip:content-box;
    -webkit-background-clip:content-box;
    border:2px solid black;
} ​ 
```

但是，如果您只想对 div 的一部分进行非对称着色，那么最好的办法是使用子 div 并为该 div 着色。首选此方法，因为它比我不知道的较新的 CSS3 技术具有更好的浏览器支持。对于后一个示例，请查看此小提琴：http: [//jsfiddle.net/aD9mF/](http://jsfiddle.net/aD9mF/)。

**HTML**

```
<div>
    This is my first div.
    <div>
        This is my sub-div.        
    </div>
<div>​ 
```

**CSS**

```
div{
    width: 300px;
    height: 300px;
    border: 3px solid black;
}
div div{
    background-color:yellow;
    width: 30px;
    height: 100%;
    float:left;
    border:none
} 
```

# java - 当我希望它是 mdb 时，数据库扩展名是 accdb

> ID：14073581
> 
> 赞同：0
> 
> 时间：2012-12-28T17:50:35.520
> 
> 标签：java, sql, jdbc, ms-access-2010

我正在使用 MS Office 2010。我想创建一个`.mdb`数据库。我环顾四周，但我不知道如何更改默认扩展名。
该数据库将用于练习 Java JDBC-ODBC 连接，为此我需要一个`.mdb`数据库。
请告诉我如何更改默认扩展名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T19:31:56.787

在 MS Access 2010 中，

*   单击`File`选项卡，然后单击`Save & Publish`左侧菜单上的选项。*   你会看到你有下面的选项`File Types`来选择`Save Database As`*   然后在 下`Save Database As`，您可以选择不同的数据库文件类型，包括：Access 2000 数据库 ( *.mdb) 和 Access 2002-2003 数据库 (* .mdb)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T17:54:47.953

![在此处输入图像描述](../Images/6241937f61200c66ef774c3ebc963f83.png)创建新数据库时，转到
`File`-> `Options`-> `General`，然后将其设置`Default File Format`为`Access 2002-2003`.

# regex - 使用 RegEx 从 AssemblyInfo 文件中读取 AssemblyInformationalVersion 值

> ID：14073582
> 
> 赞同：1
> 
> 时间：2012-12-28T17:50:40.723
> 
> 标签：regex, visual-studio, msbuild

我正在尝试使用 msbuild 从 AssemblyInfo 文件中读取 AssemblyInformationalVersion，但到目前为止我失败了。下面是我的数字，但我需要在引号内输入整个内容：

```
<PropertyGroup>
  <Pattern>\[assembly: AssemblyInformationalVersion\(.(\d+)\.(\d+)\.(\d+)</Pattern>
  <In>@(ItemsFromFile)</In>
  <Out>$([System.Text.RegularExpressions.Regex]::Match($(In), $(Pattern)))</Out>
</PropertyGroup>

<Message Text="Output : $(Out.Remove(0, 41))"/> 
```

例如，这是目标行：

```
[assembly: AssemblyInformationalVersion("0.3.0-pre01")] 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:59:00.240

如果您只需要引号的内容，您应该可以使用如下表达式来获取它：

`(?<=\[assembly: AssemblyInformationalVersion\(").*(?="\)\])`

我认为您可以在 msbuild 正则表达式中使用积极的前瞻/后视。

分别为正前瞻和后视：

`Match this(?=Where this is present ) (?<=Where this is present )Match this`

# java - 我应该在我的 android 应用程序中使用哪种简单的数据存储？

> ID：14073583
> 
> 赞同：0
> 
> 时间：2012-12-28T17:50:44.397
> 
> 标签：java, android, xml

我正在尝试一些 android 编程，并且正在考虑做一个简单的任务列表应用程序。用什么比较好？纯文本文件还是 xml？如果我选择 xml 作为数据存储，那么在 java 中使用 xml 的 API 是什么？什么是首选？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:55:12.703

对于基本信息，您还可以将项目存储在共享首选项中的键值对中

[http://developer.android.com/training/basics/data-storage/shared-preferences.html](http://developer.android.com/training/basics/data-storage/shared-preferences.html)

# scheme - 我将如何使这个尾递归？

> ID：14073584
> 
> 赞同：9
> 
> 时间：2012-12-28T17:50:45.940
> 
> 标签：scheme

我有这个代码：

```
(define (prog1 x y)
    (let ([rel (related x y)])
      (cond
        [(null? rel) (list x)]
        [else (cons x (map (lambda (d) (prog1 (neighbour d) y)) rel))]))) 
```

我想要做的是尝试让它尾递归。我知道我需要做类似的事情：

```
(define (prog1 x y)
  (prog1-iter x y `()))

(define (prog1-iter x y acc)
  (...
   )) 
```

但我不确定如何从我的代码转到这段代码......我认为这是因为原件中有一个地图，我不确定如何将它合并到一个`prog1-iter`. 有人可以指出我正确的方向！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T00:07:51.137

对于本质上是迭代的东西，尾递归很容易编写。您的函数可能会多次调用自身，因此它不会很简单。尽管如此，任何程序都可以进行迭代（例如，您的计算机是一个巨大的迭代机器），所以它可以完成。

首先，您的函数不是*直接*递归的（即`prog1`不直接调用自身）。而是`prog1`调用`map`，然后调用你给它的 lambda（可能多次），然后调用`prog1`; 所以它是间接的。调用`map`不是尾调用；对 lambda的调用`map`肯定不是尾调用（它可能需要多次调用它）；来自 lambda 的调用`prog1`是尾调用。

因此，当您要求它是“尾递归”时，我不确定您到底需要什么。您是否希望从自身到自身的调用链中的每个调用`prog1`都是尾调用？或者你想让程序中的每个调用都成为尾调用？存在 的“尾递归”版本`map`，但它们仅对来自`map`to的调用是“尾递归” `map`，而不是对映射函数的调用，因此它们对您的情况没有用处。

使程序中的每个调用都成为尾调用的一般方法称为[continuation-passing style](http://en.wikipedia.org/wiki/Continuation-passing_style)。基本上，每个函数都有一个额外的函数参数，即“延续”。不是对函数进行非尾调用，而是对它进行尾调用，并传递给它一个延续，指定如何处理函数调用的结果。基本上，延续将包含非尾调用之后的原始函数的“其余部分”，并将原始非尾调用的“返回结果”作为参数。我将把它作为练习如何将您的程序转换为 CPS。

# php - 将 html 文件导入到 formatted as HTML with indent and color?

My goal is to import / open anything from an HTML file to a `<textarea></code> that is visible to the user on the web page and</h1> <blockquote> <p>ID：14073588</p> <p>赞同：1</p> <p>时间：2012-12-28T17:51:09.217</p> <p>标签：php, javascript, html, import</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：2</p> <p>时间：2012-12-29T16:13:38.050</p> </blockquote> <p>我认为</p> <p><a href="http://codemirror.net/" rel="nofollow">http://codemirror.net/</a></p> <p><a href="http://ace.ajax.org/#nav=about" rel="nofollow">http://ace.ajax.org/#nav=about</a></p> <p>和</p> <p><a href="http://www.cdolivet.com/editarea/editarea/exemples/exemple_full.html" rel="nofollow">http://www.cdolivet.com/editarea/editarea/exemples/exemple_full.html</a></p> <p>对OP更有用。</p> <hr/> <h2>回答 #2</h2> <blockquote> <p>赞同：0</p> <p>时间：2012-12-28T18:02:09.337</p> </blockquote> <p>要将文件导入文本区域，您可以：</p> <ul> <li>使用 PHP（或其他）脚本将上传文件的内容回显到文本区域。</li> <li>使用 HTML5 FileApi（<a href="http://www.html5rocks.com/en/tutorials/file/dndfiles/" rel="nofollow">见这里</a>）</li> </ul> <p>您还必须在文本区域内“编码 html 实体”，否则它们将显示为 HTML 元素，而不是源代码。</p> <p>要启用代码的语法突出显示，请参阅<a href="http://codemirror.net/" rel="nofollow">CodeMirror</a>或在网上搜索“HTML Syntax Highlighter”</p> <hr/> <h2>回答 #3</h2> <blockquote> <p>赞同：0</p> <p>时间：2012-12-28T18:02:52.800</p> </blockquote> <p>正如卢卡斯所说，我很确定您不能<code><b>hello</b</code>在 textarea 元素中将 HTML 显示为 HTML（例如，显示粗体）。您将需要某种 3rd 方编辑器（请参阅<a href="http://markitup.jaysalvat.com/home/" rel="nofollow">此</a>）。要在 PHP 中包含文件，请使用<code>$content = file_get_contents("path_to_the_file");</code>然后执行<code>echo($content);</code>您希望文件内容出现的任何位置。如果您有一个动态系统，人们可以在其中上传他们自己的文件，或者如果您想在不制作无效 HTML的情况下显示和标志，您可能还需要考虑<a href="http://php.net/manual/en/function.htmlspecialchars.php" rel="nofollow">XSS攻击。</a><code><</code><code>></code></p> <hr/> <h2>回答 #4</h2> <blockquote> <p>赞同：0</p> <p>时间：2012-12-28T17:54:12.600</p> </blockquote> <p>你知道所见即所得的编辑器吗？</p> <p>我使用<a href="http://www.tinymce.com/" rel="nofollow">http://www.tinymce.com/</a></p> <p>在 google 上，您可以找到更多信息，也可以使用 jQuery 和其他方式创建您自己的内容。</p> <hr/> <h2>回答 #5</h2> <blockquote> <p>赞同：0</p> <p>时间：2012-12-28T18:12:23.357</p> </blockquote> <p>您不能突出显示 TEXTAREA 中的代码。TextArea 元素目前只接受纯文本。</p> <p>诀窍是创建一个 DIV 并突出显示 DIV 中的文本并将 DIV 放在 TEXTAREA 标记上方。这可以通过使用 TinyMCE 或 FCKEditor 或任何类似的所见即所得编辑器来完成。</p> <p>至于将代码导入页面，您将需要一种编程语言（如 PHP）来打开文件并获取其内容。但是，请确保仅导入正文标记之间的内容。</p> </body> </html></textarea>`

# ios - 自定义 UINavigationBar 绘制空

> ID：14073589
> 
> 赞同：1
> 
> 时间：2012-12-28T17:51:10.893
> 
> 标签：ios, uiview, uikit, uinavigationbar

这对我来说可能是一件非常容易和愚蠢的事情，但我有一个自定义方法`UINavigationBar`，它使用方法中的核心图形对其进行了定制`drawrect`。我在整个应用程序中多次使用它，除了两个实例之外，所有实例都可以正常工作。加载到视图中的两个实例在它们应该是灰色渐变时呈现黑色。`drawrect`正在调用该方法，但由于某种原因，它们在视图中显示为黑色。

## 这些是我为 UINavigationBar 设置的 IB 设置

![在此处输入图像描述](../Images/43b56162b6b4e19865c8b8ea68b054c7.png)

## 以及我对父 UIVIew 的设置

![在此处输入图像描述](../Images/f6c5c31d4f4ce88334af935bff676e21.png)

如果我可以提供任何其他信息以使这更容易，请告诉我。非常感谢任何可以提供帮助的人。

# java - 使用自定义 imageView 缩小 dispositiong 图像

> ID：14073594
> 
> 赞同：3
> 
> 时间：2012-12-28T17:51:26.510
> 
> 标签：java, android, eclipse, swing

我正在使用以下代码在 ViewPager 中添加自定义 ImagView 以设置缩放系统。双击时，您放大，然后再次双击时，您缩小。现在假设你滑动并放大一点，现在我想要一个功能，如果你现在双击它应该缩小你。

如果我调用函数 minZoomed() 它会缩小但它现在不居中位置。但是，如果我先完全放大然后双击缩小，它确实会使图像居中。但是当我使用滑动放大一点然后尝试缩小时，它会将图像移动到一些随机的地方。我希望缩小后图像在屏幕中居中

所以

首先总缩小（居中）>双击>完全放大（居中）>双击>完全缩小（居中）

但

首先完全缩小（居中）> 滑动到缩放> 小缩放（居中）> 双击 > 完全缩小（移位） 我该如何解决这个问题？

```
public class ZoomImageView extends ImageView
{
    Matrix matrix = new Matrix();

    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    boolean isMaxed = false;
    boolean zoomOut = false;

    PointF last = new PointF();
    PointF start = new PointF();
    float minScale = 1f;
    float maxScale = 3f;
    float[] m;

    float redundantXSpace, redundantYSpace;

    float width, height;
    static final int CLICK = 3;
    float saveScale = 1f;
    float right, bottom, origWidth, origHeight, bmWidth, bmHeight;

    ScaleGestureDetector mScaleDetector;
    GestureDetector mDoubleDetector;
    Context context;

    private CustomViewPager pager;

    public ZoomImageView(Context context) 
    {
        super(context);
        super.setClickable(true);
        this.context = context;
        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
        mDoubleDetector = new GestureDetector(context, new DoubleTapGestureDetector());
        matrix.setTranslate(1f, 1f);
        m = new float[9];
        setImageMatrix(matrix);
        setScaleType(ScaleType.MATRIX);

        setOnTouchListener(new OnTouchListener() 
        {
            public boolean onTouch(View v, MotionEvent event) 
            {
                mScaleDetector.onTouchEvent(event);
                mDoubleDetector.onTouchEvent(event);

                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                PointF curr = new PointF(event.getX(), event.getY());

                switch (event.getAction()) 
                {
                    case MotionEvent.ACTION_DOWN:
                        last.set(event.getX(), event.getY());
                        start.set(last);
                        mode = DRAG;
                        break;
                    case MotionEvent.ACTION_MOVE:
                        if (mode == DRAG)
                        {
                            float deltaX = curr.x - last.x;
                            float deltaY = curr.y - last.y;
                            float scaleWidth = Math.round(origWidth * saveScale);
                            float scaleHeight = Math.round(origHeight * saveScale);
                            if (scaleWidth < width) 
                            {
                                deltaX = 0;
                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom); 
                            } 
                            else if (scaleHeight < height) 
                            {
                                deltaY = 0;
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);
                            }
                            else 
                            {
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);

                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom);
                            }
                            matrix.postTranslate(deltaX, deltaY);
                            last.set(curr.x, curr.y);
                        }
                        break;

                    case MotionEvent.ACTION_UP:
                        mode = NONE;
                        int xDiff = (int) Math.abs(curr.x - start.x);
                        int yDiff = (int) Math.abs(curr.y - start.y);
                        if (xDiff < CLICK && yDiff < CLICK)
                            performClick();
                        break;

                    case MotionEvent.ACTION_POINTER_UP:
                        mode = NONE;

                        break;
                }
                setImageMatrix(matrix);
                if (saveScale == minScale)
                {
                    pager.setPagingEnabled(true);
                }
                else 
                {
                    pager.setPagingEnabled(false);
                }
                return true; 
            }

        });
    }

    public void setPager(CustomViewPager pager)
    {
        this.pager = pager;
    }

    @Override
    public void setImageBitmap(Bitmap bm) 
    { 
        super.setImageBitmap(bm);
        bmWidth = bm.getWidth();
        bmHeight = bm.getHeight();
    }

    public void minZoomed()
    {
        matrix.setScale(minScale,minScale);
        setImageMatrix(matrix);
        invalidate();
        redundantYSpace = (float)height - (minScale * (float)bmHeight) ;
        redundantXSpace = (float)width - (minScale * (float)bmWidth);
        redundantYSpace /= (float)2;
        redundantXSpace /= (float)2;
        saveScale = minScale;
        matrix.postTranslate(redundantXSpace, redundantYSpace);
        origWidth = width - 2 * redundantXSpace;
        origHeight = height - 2 * redundantYSpace;
        right = width * saveScale - width - (2 * redundantXSpace * saveScale);
        bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
        setImageMatrix(matrix);
        invalidate();
    }

    public void maxZoomed()
    {
        matrix.setScale(maxScale,maxScale);
        setImageMatrix(matrix);
        redundantYSpace = (float)height - (maxScale * (float)bmHeight) ;
        redundantXSpace = (float)width - (maxScale * (float)bmWidth);
        redundantYSpace /= (float)2;
        redundantXSpace /= (float)2;

        matrix.postTranslate(redundantXSpace, redundantYSpace);
        origWidth = width - 2 * redundantXSpace;
        origHeight = height - 2 * redundantYSpace;
        right = width * saveScale - width - (2 * redundantXSpace * saveScale);
        bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
        setImageMatrix(matrix);
        invalidate();
        saveScale = maxScale;

    }   
    public void setMaxZoom(float x)
    {
        maxScale = x;
    }

    public void setMinZoom(float x)
    {
        minScale = x;
    }   

    private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener 
    {
        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector) 
        {
            mode = ZOOM;
            return true;
        }

        @Override
        public boolean onScale(ScaleGestureDetector detector)
        {
            float mScaleFactor = (float)Math.min(Math.max(.95f, detector.getScaleFactor()), 1.05);
            float origScale = saveScale;
            saveScale *= mScaleFactor;
            if (saveScale > maxScale) 
            {
                saveScale = maxScale;
                mScaleFactor = maxScale / origScale;
            } 
            else if (saveScale < minScale)
            {
                saveScale = minScale;
                mScaleFactor = minScale / origScale;
            }
            right = width * saveScale - width - (2 * redundantXSpace * saveScale);
            bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
            if (origWidth * saveScale <= width || origHeight * saveScale <= height) 
            {
                matrix.postScale(mScaleFactor, mScaleFactor, width / 2, height / 2);
                if (mScaleFactor < 1) 
                {
                    matrix.getValues(m);
                    float x = m[Matrix.MTRANS_X];
                    float y = m[Matrix.MTRANS_Y];
                    if (mScaleFactor < 1) 
                    {
                        if (Math.round(origWidth * saveScale) < width) 
                        {
                            if (y < -bottom)
                                matrix.postTranslate(0, -(y + bottom));
                            else if (y > 0)
                                matrix.postTranslate(0, -y);
                        } 
                        else 
                        {
                            if (x < -right) 
                                matrix.postTranslate(-(x + right), 0);
                            else if (x > 0) 
                                matrix.postTranslate(-x, 0);
                        }
                    }
                }
            } 
            else 
            {
                matrix.postScale(mScaleFactor, mScaleFactor, detector.getFocusX(), detector.getFocusY());
                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                if (mScaleFactor < 1) 
                {
                    if (x < -right) 
                        matrix.postTranslate(-(x + right), 0);
                    else if (x > 0) 
                        matrix.postTranslate(-x, 0);
                    if (y < -bottom)
                        matrix.postTranslate(0, -(y + bottom));
                    else if (y > 0)
                        matrix.postTranslate(0, -y);
                }
            }
            return true;
        }
    }

    @Override
    protected void onMeasure (int widthMeasureSpec, int heightMeasureSpec)
    {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        width = MeasureSpec.getSize(widthMeasureSpec);
        height = MeasureSpec.getSize(heightMeasureSpec);
        //Fit to screen.
        float scale;
        float scaleX =  (float)width / (float)bmWidth;
        float scaleY = (float)height / (float)bmHeight;
        scale = Math.min(scaleX, scaleY);
        matrix.setScale(scale, scale);
        setImageMatrix(matrix);
        saveScale = 1f;

        // Center the image
        redundantYSpace = (float)height - (scale * (float)bmHeight) ;
        redundantXSpace = (float)width - (scale * (float)bmWidth);
        redundantYSpace /= (float)2;
        redundantXSpace /= (float)2;

        matrix.postTranslate(redundantXSpace, redundantYSpace);

        origWidth = width - 2 * redundantXSpace;
        origHeight = height - 2 * redundantYSpace;
        right = width * saveScale - width - (2 * redundantXSpace * saveScale);
        bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
        setImageMatrix(matrix);   
    }

    private class DoubleTapGestureDetector extends GestureDetector.SimpleOnGestureListener 
    {
        @Override
        public boolean onDown(MotionEvent e) 
        {
            return true;
        }

        @Override
        public boolean onDoubleTap(MotionEvent e) 
        {

            if( isMaxed == false)
            {
                isMaxed = true;
                maxZoomed();
                pager.setPagingEnabled(false);
            }
            else
            {
                isMaxed = false;
                minZoomed();
                pager.setPagingEnabled(true);
            }

            return true;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:23:44.427

你可以看看这个项目：[https ://github.com/sephiroth74/ImageViewZoom](https://github.com/sephiroth74/ImageViewZoom)

它具有捏缩放和双击支持，并且非常容易实现（我自己使用过）

所有学分都**归于 sephiroth74**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T08:14:51.080

按照这个链接： http: [//math.hws.edu/javanotes/c13/s5.html](http://math.hws.edu/javanotes/c13/s5.html) （但不是自定义图像视图）

该程序（MandelbrotViewer.java）具有放大/缩小功能。

（不需要外部库）

放大 ：

![在此处输入图像描述](../Images/d6d670d9aed25cdda6e386ecf90bb8b5.png)

更多缩放：

![在此处输入图像描述](../Images/c366e0c7388bfe856f7b81cee7a865d7.png)

![在此处输入图像描述](../Images/687e3d7611024b746c06306f9bea5122.png)

缩小：

![在此处输入图像描述](../Images/4b925db08ba65c3cf59a47eef3b341e0.png)

# c# - 为什么RSAParameters Modulus不等于P和Q的乘积？

> ID：14073595
> 
> 赞同：10
> 
> 时间：2012-12-28T17:51:29.550
> 
> 标签：c#, .net, cryptography, rsa

P 和 Q 的值与 .Net RSAParameters 的模量值不匹配。根据 RSA 算法和 MSDN 文档，它应该是：P * Q = Modulus

我生成了一个 512 位 RSA 密钥对并通过调用将其导出到 XML：

```
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(512);
rsa.ToXmlString(true); 
```

这给了我以下 XML：

```
<RSAKeyValue>
  <Modulus>rcLI1XTfmXtX05zq67d1wujnUvevBu8dZ5Q5uBUi2mKndH1FZLYCKrjFaDTB/mXW1l5C74YycVLS6msY2NNJYw==</Modulus>
  <Exponent>AQAB</Exponent>
  <P>1dwGkK5POlcGCjQ96Se5NSPu/hCm8F5EYwyqRpLVzgk=</P>
  <Q>0AAEMHBj7CP2XHfCG/RzGldw1GdsW13rTo3uEE9Dtws=</Q>
  <DP>PO4jMLV4/TYuElowCW235twGC3zTE0jIUzAYk2LiZ4E=</DP>
  <DQ>ELJ/o5fSHanBZCjk9zOHbezpDNQEmc0PT64LF1oVmIM=</DQ>
  <InverseQ>NyCDwTra3LiUin05ZCGkdKLwReFC9L8Zf01ZfYabSfQ=</InverseQ>
  <D>EWwFTPmx7aajULFcEJRNd2R4xSXWY8CX1ynSe7WK0BCH42wf/REOS9l8Oiyjf587BhGa3y8jGKhUD7fXANDxcQ==</D>
</RSAKeyValue> 
```

现在我成功地编写了一个小测试程序来加密、解密、签名和验证数据。

最后我添加了一点测试代码：

```
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(512);
rsa.FromXmlString(key); // key = string with XML above

RSAParameters param = rsa.ExportParameters(true);
BigInteger p = new BigInteger(param.P);
BigInteger q = new BigInteger(param.Q);
BigInteger n = new BigInteger(param.Modulus);
BigInteger myN = BigInteger.Multiply(p, q);
Console.WriteLine("n   = " + n.ToString());
Console.WriteLine("myN = " + myN.ToString()); 
```

这给了我们以下输出：

```
n   = 5200154866521200075264779234483365112866265806746380532891861717388028374942014660490111623133775661411009378522295439774347383363048751390839618325234349

myN = 23508802329434377088477386089844302414021121047189424894399694701810500376591071843028984420422297770783276119852460021668188142735325512873796040092944 
```

为什么乘以 P 和 Q 不等于模数？

我已经检查了很多东西，比如字节序、编码、BigInteger 类，成功加密、解密、签名、使用上述 XML 密钥验证，但找不到任何解释为什么 P 和 Q 相乘不等于模数......

谁能帮我解释为什么 P*Q 不是 Modulus ？

可读格式的所有值：

```
Modulus  = 5200154866521200075264779234483365112866265806746380532891861717388028374942014660490111623133775661411009378522295439774347383363048751390839618325234349
Exponent = 65537
P  = 4436260148159638728185416185189716006279182659244174640493183003717504785621
Q  = 5299238895894527538601438806093945941831432623367272568173893997325464109264
DP = -57260184070162652127728137041376572684067529466727954512100856352006444159428
DQ = -56270397953566513533764063103154348713259844205844432469862161942601135050224
InverseQ = -5297700950752995201824767053303055736360972826004414985336436365496709603273
D = 5967761894604968266284398550464653556930604493620355473531132912985865955601309375321441883258487907574824598936524238049397825498463180877735939967118353 
```

**更新**：

根据答案，我为 .Net BigInteger 类编写了一个小扩展方法，以便与 RSAParameters 一起正常工作：

```
public static class BigIntegerExtension
{
    public static BigInteger FromBase64(this BigInteger i, string base64)
    {
        byte[] p = Convert.FromBase64String(base64).Reverse().ToArray();
        if (p[p.Length - 1] > 127)
        {
            Array.Resize(ref p, p.Length + 1);
            p[p.Length - 1] = 0;
        }
       return new BigInteger(p);
    }

    public static BigInteger FromBigEndian(this BigInteger i, byte[] p)
    {
        p = p.Reverse().ToArray();
        if (p[p.Length - 1] > 127)
        {
            Array.Resize(ref p, p.Length + 1);
            p[p.Length - 1] = 0;
        }
        return new BigInteger(p);
    }
} 
```

使用示例：

```
BigInteger modulus1 = new BigInteger().FromBase64("rcLI1XTfmXtX05zq67d1wujnUvevBu8dZ5Q5uBUi2mKndH1FZLYCKrjFaDTB/mXW1l5C74YycVLS6msY2NNJYw==");

BigInteger modulus2 = new BigInteger().FromBigEndian(param.Modulus); 
```

希望这可以帮助其他有同样问题的人:-)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T18:07:02.293

这是我对您提供的 XML 参数的解析：

```
N = 9100595563660672087698322262735024483609782000266155222822537546670463733453350686171384417480667378838400923087358115007100900745853538273602044437940579

P = 96731388413554317303099785843734797692955743043844132225634400270674214374921

Q = 94081101418218318334927154927633016498744568046568114230258529096538660255499 
```

如您所见，N 确实等于 P * Q。

您不能像现在这样使用 BigInteger(byte []) 构造函数，因为它希望字节数组采用 little-endian，并且因为 Microsoft 已经完成了一些基本的操作。相反，颠倒字节的顺序。最后，因为字节数组应该是二进制补码并且您的数字保证为正数，*如果*高位字节大于或等于 128，则必须在数组的高位字节中添加一个零字节.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T18:12:01.423

`BigInteger`将数组解析为带符号的小端值。`RSAParameters`使用无符号大端。

所以`i = new BigInteger(bytes.Reverse().Concat(new byte[]{0}).ToArray()))`应该工作。

# c# - 单元测试 Windows 商店应用程序 - MSBuild、M STest 和 TeamCity

> ID：14073599
> 
> 赞同：2
> 
> 时间：2012-12-28T17:51:40.293
> 
> 标签：c#, windows, msbuild, visual-studio-2012, mstest

我正在尝试设置 CI 服务器（TeamCity 7）并在其上运行 Windows 商店应用程序的每日构建和冒烟测试。冒烟测试应该只是启动应用程序，等待 5 秒然后退出。

我创建了编译代码的 MSBuild 脚本（在观看 Pluralsight 持续集成课程之后）。在我的解决方案中，第一个项目是空白 Windows 商店应用程序，第二个项目是测试（单元测试库（Windows 商店应用程序） - 如[http://msdn.microsoft.com/en-us/library/vstudio/hh440545.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh440545.aspx)所述） .

但我找不到：A）如何从测试方法启动空白应用程序？B) 如何在本地从 msbuild 脚本和 TeamCity 服务器上运行测试。

在 Windows 8 桌面上使用 VS 2012 Premium。

这是当前脚本：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" 
  DefaultTargets="Compile" >

<UsingTask TaskName="MSBuild.ExtensionPack.Framework.AsyncExec" 
  AssemblyFile=".\Thirdparty\Tools\MSBuildAsyncExec\MSBuild.ExtensionPack.dll"/>
<UsingTask TaskName="RunAllTestsInSolution" 
  AssemblyFile=".\Thirdparty\Tools\MSBuildCustomTasks\RunAllTestsInSolution.dll"/>  

<PropertyGroup>
  <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
</PropertyGroup>

<ItemGroup>
  <BuildArtifacts Include=".\buildartifacts\"/>
  <SolutionFile Include=".\Decide Now.sln"/>
</ItemGroup>

<ItemGroup>
<!--  <MSTest Include=".\Thirdparty\Tools\MSTestFramework\Microsoft.VisualStudio.TestPlatform.UnitTestFramework.dll"/>-->
  <TestAssembly Include=".\buildartifacts\Tests\Tests.dll"/>
  <TestResults Include=".\buildartifacts\TestResults.trx"/>
</ItemGroup>

<PropertyGroup >
  <VisualStudioDir>C:\Program Files (x86)\Microsoft Visual Studio 11.0\</VisualStudioDir>
  <MSTest>$(VisualStudioDir)Common7\IDE\MSTest.exe</MSTest>
</PropertyGroup>

<Target Name="Clean">
  <RemoveDir Directories="@(BuildArtifacts)"/>
  <!-- TODO: Clean bin, obj and AppPackage folders in Sources and Test-->
</Target>

<Target Name="Init" DependsOnTargets="Clean">
  <MakeDir Directories="@(BuildArtifacts)"/>
</Target>

<Target Name="Compile" DependsOnTargets="Init">
  <MSBuild Projects="@(SolutionFile)" Targets="Rebuild" 
    Properties="OutDir=%(BuildArtifacts.FullPath);Configuration=$(Configuration)"/>
</Target>

<Target Name="Test" DependsOnTargets="Compile">

  <!-- IgnoreExitCode=”true” -->
  <Exec Command='"$(MSTest)" /testcontainer:@(TestAssembly) /resultsfile:@(TestResults)'/>
  <Message Text='##teamcity[importData type="mstest" path="@(TestResults)"]'/>

</Target>

</Project> 
```

这是样本测试

```
using Microsoft.VisualStudio.TestPlatform.UnitTestFramework;

namespace Decide_Now{

  [TestClass]
  public class SmokeTest{

    [TestMethod]
    public void RunOnce(){

      int x = 1;
      int y = 2;
      Assert.AreEqual( 3, x + y );

      /*App.Start( null );
      //var mainPage = new MainPage();

      Task.Delay( 3000 ).Wait();

      App.Current.Exit();*/

    }

  }

} 
```

正如您在评论中看到的，我尝试了几种方法，但如果说如下：

```
Test:
  "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\MSTest.exe"
  /testcontainer:.\buildartifacts\Tests\Tests.dll /resultsfile:.\buildartifacts
  \TestResults.trx
  Microsoft (R) Test Execution Command Line Tool Version 11.0.50727.1
  Copyright (c) Microsoft Corporation. All rights reserved.

  Loading .\buildartifacts\Tests\Tests.dll...
  Starting execution...
  No tests to execute.
  ##teamcity[importData type="mstest" path=".\buildartifacts\TestResults.trx"] 
```

求救。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:31:29.113

要启动您的 appx，请查看代码 @ [http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/a4d2fca1-4034-4cc7-a86a-6242ce1a8b16](http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/a4d2fca1-4034-4cc7-a86a-6242ce1a8b16) 您必须注意事实上，您的应用程序将在打开后几秒钟内变为非活动状态，因为您没有与之交互。

要运行 Windows8 应用商店单元测试，请使用 vstest.console.exe 而不是 mstest.exe。vstest.console.exe 是 VS2012 中新的单元测试执行器。

# debian - Debian wheezy 和 Ogre 教程

> ID：14073600
> 
> 赞同：6
> 
> 时间：2012-12-28T17:51:42.377
> 
> 标签：debian, ogre, ogre3d

我正在尝试构建[第一个食人魔教程](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Basic%20Tutorial%201&structure=Tutorials)

我在**Debian Wheezy - beta 4**上，我已经安装了这些软件包：

*   libois-dev
*   libogre-dev

我已经用这条线构建了教程：

```
g++ -I/usr/include/OGRE -I/usr/include/OIS -lOgreMain -lOIS -o main *.cpp 
```

我明白了：***SdkTrays.h 没有这样的文件或目录***

我检查过，标头既不在 /usr/include 也不在 /usr/local/include （递归）。

是否有可能在 debian 挤压下获得 sdktray？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T04:00:13.017

样本中的所有代码都已从 Debian 中删除，因为它包含许多未知的、非 DFSG 自由的内容，如[Debian 错误 #684218](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=684218)中所述。在[与 OGRE 维护人员讨论](http://ogre3d.org/mantis/view.php?id=546)后，Debian 维护人员决定删除所有 Samples 目录，这破坏了教程，因为他们非常依赖于一些早期简单的 GUI 内容和模型的示例。

1.7.4+dfsg1-6 之前的所有版本都包含示例。以下是从源存储库构建它的方法：

1.  克隆 debian 源代码库`http://anonscm.debian.org/git/pkg-games/ogre.git`
2.  查看包含示例的最新版本的 debian 打包 -`git co debian/1.7.4-5`
3.  构建包（未签名） -`git-buildpackage -us -uc -rfakeroot --git-ignore-branch`
4.  在上面的目录中安装你的包`dpkg -i`。您可能希望使用库的正常或 -dbg 版本，而不是全部。
5.  您现在可以编译教程应用程序。

最终，您将远离示例中使用的示例框架，您可以将这个旧版本替换为官方的 Debian 框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:35:24.343

我刚刚查看了可用的软件包，甚至 1.8 版本出于某种原因不包括 OgreBites（SdkTrays 所属的）。

因此，您唯一的选择是[从源代码构建 Ogre](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Building+Ogre)并自己从[Ogre BitBucket 官方存储库](https://bitbucket.org/sinbad/ogre/)中获取代码。

# c# - 进度条在 100% 之前不会更新

> ID：14073603
> 
> 赞同：1
> 
> 时间：2012-12-28T17:51:53.333
> 
> 标签：c#, progress-bar

我的 winform 上有一个进度条，该进度条正在从调用 from 的回调方法更新`CopyFileEx`。

问题是进度条在达到 100% 之前不会更新。

进度条百分比是从后台工作人员更新的，并且基于复制的字节数与所有文件的总字节数之比。

我计算字节数的代码是（我认为这里没有任何问题）

```
CopyFileCallbackAction myCallback(FileInfo source, FileInfo destination, object state, long totalFileSize, long totalBytesTransferred)
{
    double dProgress = (totalBytesTransferred / byteCount) * 100.0;
    backupWorker.ReportProgress((int)dProgress);
    return CopyFileCallbackAction.Continue;
} 
```

`totalBytesTransferred`如果我显示一个带有and值的消息框`byteCount`，并自己进行计算，它工作正常（截断小数点后的任何数字 - 因为它被转换为 an `int`）并且我得到百分比。

出于某种原因，尽管当它传递到我的进度条时它不起作用，直到它达到 100%，然后它会合而为一。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T17:55:04.590

你正在做整数（实际上`long`）除法，它返回`0`.

您需要将一个操作数转换为`double`.

# asp.net - 中继器控制中的 if 语句

> ID：14073606
> 
> 赞同：1
> 
> 时间：2012-12-28T17:52:09.220
> 
> 标签：asp.net, repeater

因此，取决于转发器项目是否有链接，我想在图像周围使用链接，否则我只想输出链接。

现在我有

```
<asp:Repeater ID="BannerImageRepeater" runat="server">
    <ItemTemplate>
        <a href="<%# ((BannerImage)Container.DataItem).CallToActionUrl %>"><img src="<%# ((BannerImage)Container.DataItem).ImageUrl %>?w=980&h=600" alt="<%# ((BannerImage)Container.DataItem).AltText %>"/></a>
    </ItemTemplate>
</asp:Repeater> 
```

所以想添加类似的东西

```
String.IsNullOrEmpty(((BannerImage)Container.DataItem).CallToActionUrl)

<img src="">
else
<a href=''><img src=""></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:04:01.497

创建两个控件，一个作为链接，另一个作为图像控件。然后使用后面的代码来切换它们的可见性。根本不呈现不可见的 asp.net 控件，因此您应该没问题。改变这个：

```
<asp:Repeater ID="BannerImageRepeater" runat="server">
        <ItemTemplate>
            <a href="<%# ((BannerImage)Container.DataItem).CallToActionUrl %>"><img src="<%# ((BannerImage)Container.DataItem).ImageUrl %>?w=980&h=600" alt="<%# ((BannerImage)Container.DataItem).AltText %>"/></a>
        </ItemTemplate>
    </asp:Repeater> 
```

对此：

```
<asp:Repeater ID="BannerImageRepeater" runat="server">
        <ItemTemplate>
            <asp:hyperlink id="yes_link" runat="server" NavigateUrl="<%# ((BannerImage)Container.DataItem).CallToActionUrl %>"><img src="<%# ((BannerImage)Container.DataItem).ImageUrl %>?w=980&h=600" alt="<%# ((BannerImage)Container.DataItem).AltText %>"/></asp:hyperlink>
            <asp:image id="no_link" runat="server" ImageUrl="<%# ((BannerImage)Container.DataItem).ImageUrl %>?w=980&h=600" alt="<%# ((BannerImage)Container.DataItem).AltText %>" />
        </ItemTemplate>
    </asp:Repeater> 
```

如果您需要合并客户端 javascript，请为每个控件分配一个 CssClass 并在您的脚本中引用它。让我们知道进展如何，祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:23:17.557

```
<asp:Repeater ID="BannerImageRepeater" runat="server">
    <ItemTemplate>
    <% if(String.IsNullOrEmpty(((BannerImage)Container.DataItem).CallToActionUrl)) { %>
<img src="<%# ((BannerImage)Container.DataItem).ImageUrl %>?w=980&h=600" alt="<%# ((BannerImage)Container.DataItem).AltText %>"/>
<% } else { %>
        <a href="<%# ((BannerImage)Container.DataItem).CallToActionUrl %>"><img src="<%# ((BannerImage)Container.DataItem).ImageUrl %>?w=980&h=600" alt="<%# ((BannerImage)Container.DataItem).AltText %>"/></a>
<% } %>
    </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T18:43:32.693

我会采取不同的方法。此外，您可能会`Eval()`在您的标记和代码中都使用而不是依赖于`Container.DataItem`，但我没有遵循特定的属性名称。

```
<asp:Repeater ID="BannerImageRepeater" runat="server">
    <ItemTemplate>
        <asp:PlaceHolder runat="server" Visible="<%# GetVisibleImage() %>">
        <a href="<%# ((BannerImage)Container.DataItem).CallToActionUrl %>">
            <img src="<%# ((BannerImage)Container.DataItem).ImageUrl %>
                ?w=980&h=600" alt="<%# ((BannerImage)Container.DataItem).AltText %>"/>
        </a>
        </asp:PlaceHolder>
        <asp:PlaceHolder runat="server" Visible="<%# GetVisibleNoImage() %>">
        <img src="<%# ((BannerImage)Container.DataItem).ImageUrl %>
                ?w=980&h=600" alt="<%# ((BannerImage)Container.DataItem).AltText %>"/>
        </asp:PlaceHolder>
    </ItemTemplate>
</asp:Repeater> 
```

在您的代码隐藏中：

```
protected bool GetVisibleImage()
{
    return string.IsNullOrEmpty((string)Eval("CallToActionUrl"));
}

protected bool GetVisibleNoImage()
{
    return !string.IsNullOrEmpty((string)Eval("CallToActionUrl"));
} 
```

# java - java socket接收器在linux上工作，但在windows上不工作

> ID：14073609
> 
> 赞同：0
> 
> 时间：2012-12-28T17:52:41.230
> 
> 标签：java, network-programming

我正在尝试编写一个简单的客户端服务器程序。客户端和服务器都用 java 编程并通过接入点作为局域网连接，服务器是我的笔记本电脑（计算机），客户端是我的 android 设备。这是客户端（android）的代码：

```
package com.caisar.andronet;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class Main extends Activity {

    private Button mSendButton;
    private EditText ipInput;
    private EditText portInput;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mSendButton = (Button) findViewById(R.id.button1);
        ipInput = (EditText) findViewById(R.id.editText1);
        portInput = (EditText) findViewById(R.id.editText2);

        mSendButton.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                try {
                    sendPacket();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        });
    }

    public void sendPacket() throws IOException
    {
        int port = Integer.parseInt(portInput.getText().toString());
        InetAddress address = InetAddress.getByName(ipInput.getText().toString());
        String message = "Ini adalah caisar oentoro";
        byte[] messages = message.getBytes();
        DatagramSocket socket = new DatagramSocket();
        DatagramPacket packet = new DatagramPacket(messages, messages.length, address, port);
        socket.send(packet);
        socket.close();
    }

} 
```

这是服务器程序：

```
import java.net.*;
import java.io.*;

class DatagramReceiver{
public static void main(String[] args){
    try
    {
        int MAX_LEN = 40;
        int localPort = Integer.parseInt(args[0]);
        DatagramSocket socket = new DatagramSocket(localPort);
        byte[] buffer = new byte[MAX_LEN];
        DatagramPacket packet = new DatagramPacket(buffer, MAX_LEN);
        socket.receive(packet);
        String message = new String(buffer);
        System.out.println(message);
        socket.close();
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
   }
 } 
```

问题是，在 Ubuntu 上尝试服务器程序时，它运行良好，没有任何问题，但是当我在 Windows 上尝试时，服务器程序没有显示任何响应。那么“阻止”服务器侦听或接受客户端发送的数据的麻烦是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T10:08:40.420

> 嘿，谢谢，效果很好。但是有没有比关闭windows防火墙更好的方法呢？我正在使用Windows 7。

您可以打开用于 UDP 的特定端口（或者 TCP 就是您正在使用的），而不是关闭整个防火墙，这会仅为您需要的端口关闭防火墙。

# variables - Loading template variables from another document

> ID：14073615
> 
> 赞同：0
> 
> 时间：2012-12-28T17:53:07.990
> 
> 标签：variables, modx, modx-evolution, modx-templates, modx-chunks

I have a document with `ID = 1`, which relies on a series of template variables in the format `[+template-variable-NUMBER+]`. I have filled fields using these values, and it's good for document `ID = 1`. What I want to do, however, is paste the values of the template variables for `ID = 1` into a document with `ID = 2`.

I want to use: `[+template-variable? id='1'+]` or something similar in `ID = 2`

In short, I need to have 3 groups of variables which are the same for both pages and I don't want to have to fill them in twice.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T12:29:27.947

You can use the `getField` snippet to achieve this: [http://modx.com/extras/package/getfield](http://modx.com/extras/package/getfield)

```
[!getField? &docid=`1` &field=`template-variable-name`!] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:41:13.483

An alternative is the `fastField` extra [http://modx.com/extras/package/fastfield](http://modx.com/extras/package/fastfield)

You can then access the template variables from another resource with the following notation.

> [[#1.tv.template-variable-NUMBER]]

Where the #1 is pointing to the resource ID=1, you can get most resource properties directly this way,it just the template variables which require the extra `.tv.` notation

# jquery - 确定点击的元素是否在特定的 div 内

> ID：14073620
> 
> 赞同：2
> 
> 时间：2012-12-28T17:53:34.103
> 
> 标签：jquery, event-delegation

我有一系列带有“addelement”类的div，它们是动态添加的。在所有这些层中都有更多嵌套的 div，其中一个包含一些带有附加事件的图像。当我点击其中一张图片时，我想知道它是否在这些 div 的最后一个：

```
if($(this).is('div.addedelement:last div.contextmenu img.up'))
{
    alert('Ok');
} 
```

我不知道为什么，但是这个条件表达式的触发与触发器是否在最后一个'elementadded' div 内的情况无关。但是，如果我尝试将 css 应用于这样的元素：

```
$('div.addedelement:last div.contextmenu img.up').css('display','none'); 
```

它就像一个魅力。我错过了什么？有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:00:12.407

一种选择是使用 jQuery方法，如果缓存的 jQuery 对象（-1）的长度等于 jQuery 集合中父元素的索引，则`index`可以选择具有 class of 的图像最近的父`.addedelement`元素并将元素传递给该方法`index`那么元素是最后一个。

```
// define these variables outside of the event handler 
var $a = $('div.addedelement'), len = $a.length - 1; 

// within your event handler
var cur = $(this).closest('div.addedelement').get(0);
if ( $a.index(cur) === len ) {
   // last
} 
```

[http://jsfiddle.net/Ga5s9/](http://jsfiddle.net/Ga5s9/)

然而。如果您只想为带有类的最后一个 div 元素中的图像注册处理程序，则`addedelement`可以编写代码：

```
$('div.addedelement').last().find('img.up').click(function(){
   // last
}) 
```

# couchdb - 无法压缩本地 NPM couchdb 注册表

> ID：14073621
> 
> 赞同：0
> 
> 时间：2012-12-28T17:53:34.103
> 
> 标签：couchdb, npm

我一直在尝试压缩已在本地服务器上复制的相当大的 NPM 注册表。现在 db 是 198gb（问题的前半部分，这种方式是否很大？或适合 npm 注册表？）

我一直在尝试使用我在这里找到的 couchdb 紧凑方向：[http](http://wiki.apache.org/couchdb/Compaction)`{"error":"not_found","reason":"missing"}` ://wiki.apache.org/couchdb/Compaction 它们看起来很简单，但是当我尝试压缩时 我不断收到错误消息。

有什么建议么？只是设置错了吗？注册表和数据库工作正常，我又一次用完了磁盘空间。

这是我正在尝试的内容以及对紧凑命令的响应所获得的内容：

```
curl -H GET http://registry.mysite.com:5984/
{"db_name":"registry","doc_count":19634,"doc_del_count":1735,"update_seq":62801,"purge_seq":0,"compact_running":false,"disk_size":211813023744,"instance_start_time":"1356715631498583","disk_format_version":5,"committed_update_seq":62801}

curl -H "Content-Type: application/json" -X POST http://registry.mysite.com:5984/registry/_compact
{"error":"not_found","reason":"missing"} 
```

这是第二篇文章，带有 _compact 的文章应该返回 202。

如果我在“注册表”上执行 GET，我会得到一个有效的响应。

```
curl -H GET http://registry.mysite.com:5984/registry
{"_id":"registry","_rev":"33-55c69be715a3b60e4968c809487493ec","name":"registry","description":"Experimental namespace... 
```

在服务器上，我在 _compact 调用时收到以下错误：

```
[Fri, 28 Dec 2012 18:13:32 GMT] [info] [<0.29288.0>] 192.168.13.54 - - 'POST' /registry/_design/app/_rewrite/registry/_compact 404 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:39:34.160

看起来我有一个重写规则把一切都搞砸了。

```
registry.mysite.com = /registry/_design/app/_rewrite 
```

现在日志反映了正确的 URL，看起来紧凑应该可以工作

# php - 如何将文本从一页移动到另一页的形式

> ID：14073624
> 
> 赞同：0
> 
> 时间：2012-12-28T17:53:54.323
> 
> 标签：php, javascript, html

我有一个页面，上面有信息，比方说

```
<p>username=test</p>
<p>password=test2</p> 
```

我需要搜索此页面，找到用户名的值和密码的值，将它们存储在变量中。并将它们带到另一页的表格上。像这样：

```
Username: <input type="text" name="Username"><br />
Password: <input type="text" name="Password"> 
```

这第二页我非常希望不在同一台服务器上。所以使用 php POST 是不可能的，我认为你不能用 javascript 在页面之间携带变量。有人有想法么？

注意：另外，我无法访问另一台服务器上的代码，（表单）但是我知道 js 可以从 url 栏跑出来，所以也许我可以用它来填写文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:52:55.130

给你，你我：

您可以使用带有 GET 方法请求的 CURL 从外部网站读取 HTML。然后，您可以使用 PHP 解析 HTML 以隔离表单输入控件并创建原始 POST 字符串。之后，您可以使用 CURL POST 将数据发送到“动作”脚本。您的 PHP 脚本将需要像一个行为良好的 Web 浏览器一样工作，接受和返回 cookie，跟踪重定向等。当我过去这样做时，我发现它需要很长的调试时间，所以将其构建到你的计划。更好的方法是联系该网站的所有者并获取 API。

2013年新年万事如意~Ray

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T04:08:09.777

您可以在 page1.php 中使用它。

```
<form action="Page2.php" method="post">

<input type="text" name="Username" id="Username" /><br />
<input type="text" name="Password" id="Password" />

<input type="submit" name="submit" id="submit" value="Transfer Information" />

</form> 
```

Page2.php 包含：

```
<?php 
$Username = $_POST[Username];
$Password = $_POST[Password];
?>
<p>Username="<?php echo $Username; ?>"</p>
<p>Password="<?php echo $Password; ?>"</p> 
```

# ms-access - 我的 MS Access 查询未返回字段中具有空值的行

> ID：14073625
> 
> 赞同：3
> 
> 时间：2012-12-28T17:53:59.057
> 
> 标签：ms-access, null

我有一个名为 qry_sub_Loop 的查询，它使用左连接，并且作为左连接的结果，在名为 Next_Home_Stop 的派生字段中有一个空值。

我在基于 qry_sub_Loop 的其他查询中遇到问题。

## 作为隔离问题的测试，我尝试过：

1.  从 qry_sub_Loop 中选择 *，其中 Next_Home_Stop 为空
2.  select * from qry_sub_Loop where Asset='C-5M-000001'

C-5M-000001 是一个资产，在某些行中的 Next_Home_Stop 中有一些值，而在其他行中为 null

查询 1) 不返回任何记录。查询 2) 仅返回 Asset='C-5M-000001' 且 Next_Home_Stop 不为空的行。

* * *

```
表：到达
- MissionID（文本）
- 到达时间（双）
- 出发时间（双）
- 出发地点（文字）
- 到达地点（文字）
- 资产（文本）

表：飞机
- 资产（文本），
- 主页（文字）

```

* * *

询问：

```
select
    aircraft.Home, aircraft.Asset, arrival.DepartureTime,
    min(arrival_1.ArrivalTime) as Next_Home_Stop,
    max(arrival_2.ArrivalTime) as LastStop
From
    arrival as arrival_1
    right join ((aircraft
                 inner join arrival 
                    on arrival.DepartureLocation = aircraft.Home and
                       arrival.Asset = aircraft.Asset)
          inner join arrival as arrival_2
             on arrival_2.Asset = arrival.Asset and
                arrival_2.ArrivalTime > arrival.DepartureTime) 
        on arrival_1.Asset = arrival.Asset and
           arrival_1.ArrivalTime > arrival.DepartureTime and
           arrival_1.ArrivalLocation = arrival.DepartureLocation
group by ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:15:29.400

检查`Next_Home_Stop`返回的值`qry_sub_Loop`。

```
SELECT DISTINCT Next_Home_Stop FROM qry_sub_Loop; 
```

该查询是否返回 Null？我的猜测是否定的，因为您说查询 #2 返回的值不是 Null。因为`Next_Home_Stop`is 实际上`min(arrival_1.ArrivalTime)`，它不能同时包含 Null 和非 Null 值。

`Min(ArrivalTime)`只能在 2 种情况下返回 Null：

1.  所有`ArrivalTime`值均为 Null。
2.  现在有用于`Min()`评估的行。

如果`ArrivalTime`包含任何非 Null 值，`Min()`将忽略 Null 值并为您提供最小的非 Null 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:25:42.620

因为连接行中的**NULL 值是****在查询处理的后期****放入**结果集中的，所以您不能在查询本身中将它们作为 NULL 值进行测试。所以为了检索空值，你可以这样做

 **```
 SELECT * FROM qry_sub_Loop 
     where 
     Next_Home_Stop 
     NOT IN               //you have to explicitly look for null
     (select Next_Home_Stop from qry_sub_Loop ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T22:36:01.383

我不知道这是否适用于您的查询，但是当您在外部表上有条件时，会出现外部联接的常见问题

```
SELECT *
FROM
   A
   LEFT JOIN B
       ON A.X = B.X
WHERE
   B.Y = 'something' 
```

这个查询永远不会为表 B 产生空行，因为条件不会满足它们。在连接条件中包含条件就可以了：

```
SELECT *
FROM
   A
   LEFT JOIN B
       ON (A.X = B.X AND B.Y = 'something') 
```

现在即使表 B 中不存在匹配的行，也会返回表 A 的行。

* * *

**更新**

加盟条件

```
arrival.DepartureLocation = aircraft.Asset 
```

是错的。您应该将 the`DepartureLocation`与 another进行比较`Location`，而不是与 an`Asset`**

# excel - VBA中的for循环行为不端，并且没有按照我想要的方式运行

> ID：14073634
> 
> 赞同：0
> 
> 时间：2012-12-28T17:54:35.900
> 
> 标签：excel, vba

我在这里所做的是将存储为文本的字符串转换为整数。不幸的是，只是将格式从一般更改为数字并不能解决问题，而我之前的人所做的是手动查找/替换每个单独的数字（即使用 excel 查找替换 0、1、2、3 等）

我在下面的代码中遇到的问题是它只会替换一些数字，而不是全部。我什至无法弄清楚它执行此操作的固定模式。据我所知，for 语句应该为从 0 到 9 的每个“数字”值运行它，对吗？那么为什么它不替换所有的字符串呢？

```
Dim Digit As Integer
Dim ReplacementRange As Range

Set ReplacementRange = Range("Table1[AR]")`

Digit = 0

For Digit = 0 To Digit = 9

    ReplacementRange.Replace What:=Digit, Replacement:=Digit, LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False         
    Digit = Digit + 1

Next 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T18:01:13.927

要将存储为文本的数字快速转换为范围内的数值，您可以简单地将值放入范围中，如下所示：

`ReplacementRange.value = ReplacementRange.value`

* * *

编辑：我有时间，所以我想我会补充一下你所做的事情有什么问题，除了它是一个简单解决方案的复杂替代方案：

for 循环结构错误。正确的最小语法`[variable] = [startValue] to [endValue]`例如是：`For x = 0 to 1`.

`For Digit = 0 To Digit = 9`最终被评估为等效于`For Digit = 0 to 0`(因为您之前将 Digit 设置为 0。这意味着循环仅针对`Digit = 0`. ，你想点击每个数字，所以你不应该增加值。

要修复循环，您需要执行以下操作：

```
For Digit = 0 To 9
    ReplacementRange.Replace What:=Digit, Replacement:=Digit, LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False         
Next 
```

但是......这仍然不能解决数字存储为文本的问题。

# c++ - GLSL 链接错误

> ID：14073635
> 
> 赞同：1
> 
> 时间：2012-12-28T17:54:37.160
> 
> 标签：c++, opengl, glsl

我目前正在对尝试编译 GLSL 着色器时遇到的错误感到沮丧，我已经成功地编译了两个着色器，但是在链接它们时我得到了一个错误。没有输出，但链接失败。

这是编译+链接代码：

```
GLuint program = NULL;
GLint compile_ok = GL_FALSE, link_ok = GL_FALSE;

GLuint vs = glCreateShader(GL_VERTEX_SHADER);
glShaderSource(vs, 1, &vertCont, NULL);
glCompileShader(vs);
glGetShaderiv(vs, GL_COMPILE_STATUS, &compile_ok);
char logBuf[1024];
int len;
if (0 == compile_ok)
{
    glGetShaderInfoLog(vs, sizeof(logBuf), &len, logBuf);
    LogMgr::logMessage(LogMgr::CRITICAL, "Error in vertex shader\n", logBuf);
    return false;
}

GLuint fs = glCreateShader(GL_FRAGMENT_SHADER);
glShaderSource(fs, 1, &fragCont, NULL);
glCompileShader(fs);
glGetShaderiv(fs, GL_COMPILE_STATUS, &compile_ok);
if (!compile_ok) 
{
    glGetShaderInfoLog(vs, sizeof(logBuf), &len, logBuf);
    LogMgr::logMessage(LogMgr::CRITICAL, "Error in fragment shader", logBuf);
    return false;
}

glAttachShader(program, vs);
glAttachShader(program, fs);
glLinkProgram(program);
glGetProgramiv(program, GL_LINK_STATUS, &link_ok);
if (!link_ok) 
{
    glGetShaderInfoLog(vs, sizeof(logBuf), &len, logBuf);
    LogMgr::logMessage(LogMgr::CRITICAL, "Could not link basic shaders!", logBuf);
    return false;
}
return program; 
```

这是顶点着色器：

```
#version 330

layout(location = 0) in vec4 position;
void main()
{
    gl_Position = position;
} 
```

片段着色器：

```
#version 330

out vec4 outputColor;
void main()
{
   outputColor = vec4(1.0f, 0.0f, 1.0f, 1.0f);
} 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T18:02:48.500

您对 getShaderInfoLog 的调用是错误的。您总是在检查顶点着色器的编译日志。这解释了为什么您没有看到任何错误消息。这就是复制和粘贴代码所得到的；）

对于片段着色器，它应该是：

```
glGetShaderInfoLog(fs, sizeof(logBuf), &len, logBuf); 
```

对于链接状态：

```
glGetProgramInfoLog(program, sizeof(logBuf), &len, logBuf); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T00:27:54.487

问题是我没有创建程序对象。我在链接之前添加了这行代码，它起作用了：

```
program = glCreateProgram(); 
```

# php - 调用成员函数 - 尝试将部分加载到电子邮件正文中

> ID：14073638
> 
> 赞同：1
> 
> 时间：2012-12-28T17:55:01.993
> 
> 标签：php, zend-framework

> 我的错误：致命错误：在第 14 行的 /var/www/vhosts/MYURLHERE/application/models/MailUs.php 中的非对象上调用成员函数 partial()

第 14 行 -

```
$body = $this->view->partial('partials/postcardEmail/eform1postcard.htm'); 
```

在 Zend 中，我试图加载部分文本作为我要发送的电子邮件的正文。有人可以向我解释为什么 Zend 不能看到 $this->view->partial 吗？是否有另一种方法可以调用部分并将其放入电子邮件正文中？

TLDR：

> 如何将部分放入变量中，以便我可以通过电子邮件将其发送给 Zend 中的某个人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:05:55.313

试试这个：

```
$view = new Zend_View();
$body = $view->partial('partials/postcardEmail/eform1postcard.htm'); 
```

就像 Mike B. 所说，现在可以从模型访问视图，这仅在视图脚本中有效。

# javascript - 使用 javascript 将元素插入页面并相应地向下移动页面。

> ID：14073642
> 
> 赞同：0
> 
> 时间：2012-12-28T17:55:37.673
> 
> 标签：javascript, css, position

我正在开发一个 chrome 扩展，该扩展需要将位置固定的 iframe 插入某些网页的顶部。我无法控制将要修改的页面。目前我可以插入 iframe 但它覆盖了一些页面，但我希望能够为它保留空间。问题是当我向页面主体添加边距或填充时，页面上的其他固定元素与它们的预期位置不一致。

如何使用 javascript 注入一个元素，我可以 100% 确定它会显示在页面顶部，并且不会在其下隐藏任何内容，或者在其他任何地方弄乱位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:31:39.400

循环遍历固定元素并将“top”属性增加等于插入元素高度的量。

```
var myTop;

$('body div').each(function(){
   if($(this).css('position')=='fixed'){
      myTop = $(this).css('top');
      $(this).css('top',mytop + 100);
   };
}); 
```

我很确定你必须做一些研究和调整才能让它 100% 正常工作。例如，“body div”选择器只会将固定 div 向下移动 100 像素。您可以在这里查看更多信息：

*   [jQuery .each() 函数](http://api.jquery.com/each/)
*   [选择具有特定 CSS 类的元素](https://stackoverflow.com/questions/1220834/jquery-how-to-select-all-elements-that-have-a-specific-css-property-applied)

尽管只是为了警告您，这在某些页面上可能是一个缓慢的过程。其他人可能有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T10:29:39.233

如何应用于 body `-webkit-transform: translateY(*your_block_height*px)`，然后将您的 iframe 作为第一个孩子添加到 body 并应用`-webkit-transform: translate(-*your_block_height*px)`

# c# - 实体框架第一个代码中与 JUNCTION TABLE 的多对多关系

> ID：14073643
> 
> 赞同：3
> 
> 时间：2012-12-28T17:55:36.883
> 
> 标签：c#, asp.net, entity-framework, asp.net-mvc-4, entity-framework-4.3

这是我第一次使用 ASP.NET MVC4 和 ENTITY FRAMEWORK FIRST CODE。

我有三张桌子。其中只有一个用作名为 TestObjectivesLink 的 JUCTION TABLE。问题是当我使用该命令时`Update-Database -Verbose`，它会在 Objectives 中创建列引用。

我有一些疑问，我无法创建JUCTION TABLE，因为该表没有PK，我该如何检索数据。例如，如何从测试中检索目标？

```
[Table("Objective")]
public class Objective
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ObjectiveId { get; set; }
}

[Table("Test")]
public class Test
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int TestId { get; set; }
}

[Table("TestObjectiveLink")]
public class TestObjectiveLink
{
    public Test Test { get; set; }
    public Objective Objective { get; set; }
    //public ICollection<Objective> Objectives { get; set; }
}

public class ContosoDb : DbContext
{
    public ContosoDb() : base("name=DefaultConnection") {}

    public DbSet<Test> Tests { get; set; }
    public DbSet<Objective> Objectives { get; set; }
    public DbSet<TestObjectiveLink> TestObjectiveLink { get; set; }
} 
```

这是输入命令后我的表格的结果`Update-Database -Verbose`

![在此处输入图像描述](../Images/56d727a778c1b5fad4798c1d3181dff2.png)

我如何向实体表明我正在尝试做的事情？

# javascript - 如何将“div”内容拆分为数组，显示数组的第一个索引，然后允许用户单击箭头显示下一个索引？

> ID：14073647
> 
> 赞同：-2
> 
> 时间：2012-12-28T17:56:08.857
> 
> 标签：javascript, jquery, jquery-ui

可以说我有`<div class="list">Cheese/Beans/Chili Powder</div>`。

我想将其显示给用户：`<div class="list">Cheese</div>`然后允许用户单击一个箭头将其更改为`<div class="list">Beans</div>`和另一个箭头将其更改回。

有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:06:56.330

这应该让你开始。

假设您的清单是`.list`：

```
var l = $('.list')
l.data('items', l.text().split('/'));
l.data('current', 0);

function display() {
    l.text(l.data('items')[l.data('current')]);
}

function cycle() {
    l.data('current', l.data('current')+1);
    if(l.data('current') >= l.data('items').length) {
        l.data('current', 0);
    }
    display();
} 
```

**演示**： http: [//jsfiddle.net/rAYxb/](http://jsfiddle.net/rAYxb/) - 单击元素以循环浏览项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:17:40.883

以下是您正确执行此操作的方法（带有列表）：http: [//jsfiddle.net/TjFLY/1/](http://jsfiddle.net/TjFLY/1/)

```
var data = "Cheese/Beans/Chili Power".split("/"),
    list = $("<ul>").addClass("list");

for (var i = 0; i < data.length; i++) {
    list.append($("<li>").text(data[i]))
}
list.children().eq(0).addClass("active");
$("<a>").attr("href", "#").addClass("prev").text("<").appendTo("body").click(function() {
    var prev = $(".list .active").prev();
    if (prev.length)
        $(".list .active").removeClass("active").prev().addClass("active");
});
$("body").append(list);
$("<a>").attr("href", "#").addClass("next").text(">").appendTo("body").click(function() {
    var next = $(".list .active").next();
    if (next.length)
        $(".list .active").removeClass("active").next().addClass("active");
});​ 
```

使用此 CSS 显示/隐藏列表项：

```
.list li{
    display:none;
}
.list li.active{
    display:block;
} 
```

# transient - 为什么我的 OpenXava 瞬态视图中的这个计算属性不起作用

> ID：14073659
> 
> 赞同：0
> 
> 时间：2012-12-28T17:56:57.133
> 
> 标签：transient, calculated-field, openxava

首先，这个新线程与这个有关： [从 JMS 侦听器类以编程方式更新某些视图](https://stackoverflow.com/questions/13940334/updating-certain-view-programmatically-from-a-jms-listener-class) 现在，除了缺少服务器推送功能之外，我在同一个瞬态模块中拥有的简单计算属性还有其他问题看法。这是我的瞬态视图的一个版本（我尝试了几种方法）：

```
@View(members="Counter [counter], readItems")
public class TrackIt {

    @OneToMany
    @ReadOnly
    @OnSelectElementAction("TrackIt.checkSelectedReadItems")
    private Collection<ReadItem> readItems;

    public int getCounter() {
        return readItems!=null?readItems.size():0;
    }

    public Collection<ReadItem> getReadItems() {
        return readItems;
    }

    public void setReadItems(Collection<ReadItem> readItems) {
        this.readItems = readItems;
    }

} 
```

因此，ReamItem 是我保存 JMS 侦听器接收到的对象的实体。因此，当我使用简单的手动刷新视图时，我希望首先以及每次手动刷新后都能看到计算出的计数器属性的结果，但我没有得到这个属性的任何值，只是一个空白和Counter 标签后的空白区域（顺便说一句，集合显示得很好）。我尝试使用持久管理器进入数据库，并将 ReadItem 实体中的计数器直接获取到计算属性中，但没有奏效，我也尝试使用默认值计算器，但它没有用。但这里最有趣的是，我将 getCounter() 更改为只返回一个简单的 int，如 100，但它也不起作用。

所以，任何关于这个计算属性到瞬态视图的提示都可能很好。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:42:34.027

可能与您填充视图的方式有关。请输入您用来填充视图的代码。

# cocos2d-iphone - cocos2d：如何检测哪个 CCLabelTTF 被窃听了？显示警报视图

> ID：14073660
> 
> 赞同：0
> 
> 时间：2012-12-28T17:56:58.847
> 
> 标签：cocos2d-iphone, touch

我有一个测验类型的游戏。一个问题和 4 个可能的答案。答案是从 Web 服务的 JSON 文件中动态提取的。我有 1 个问题显示为 CCLabelTTF，4 个答案（a、b、c 和 d）也显示为 CCLabelTTF。现在，我需要显示一个警报以确认用户选择/点击的答案。- 第一个问题：如何检测答案 a、b、c 和 d？我的意思是用户触摸了哪个答案？- 第二，我怎样才能为每个答案分配一个独特的属性？我的意思是我想这样做：

```
CCLabelTTF *answerA = [CCLabelTTF labelWithString:@"This will be dynamically set" fontName:@"verdana" fontSize:25];

answerA.tag = @"Here goes the unique Identifier for answerA"; /* Is it okay with tag or is there some more good process? I am thinking to do answerA.tag = 0; 0 for incorrect and 1 for correct answers. */ 
```

此标签标识符将用于比较正确答案和所选答案，如下所示：

当用户在 Alert 中点击“YES”时，将发生以下比较：

```
 if(answerA.tag == @["movies"][i]@["answer"][i]@["status"]) // @["movies"][i]@["answer"][i]@["status"] will either have 0 or 1. 
```

这个游戏还有其他很棒的解决方案吗？如果使用按钮而不是文本标签会怎样？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:12:24.040

使用CCMenu会更好，

```
bool ControlsLayer::init() 
{
    CCTTFLabel *ttflabel = [CCLabelTTF labelWithString:@"This will be dynamically set" fontName:@"verdana" fontSize:25]
    CCMenuItemLabel *label = [CCMenuItemLabel initWithLabel: ttflabel];

    CCMenu *menu = CCMenu::menuWithItems(label, NULL);
    menu->setPosition(ccp(windowSize.width/2, controlsLabel->getPosition().y - controlsLabel->getContentSize().height));

    this->addChild(menu, 2);

    return true;
}

void ControlsLayer::backButtonAction(CCObject* pSender)
{
} 
```

[https://github.com/clawoo/AsteroidsCocos2D-x/blob/master/Classes/ControlsLayer.cpp](https://github.com/clawoo/AsteroidsCocos2D-x/blob/master/Classes/ControlsLayer.cpp)

# c++ - 获取在 operator new 中分配的对象类型

> ID：14073661
> 
> 赞同：3
> 
> 时间：2012-12-28T17:57:00.933
> 
> 标签：c++, object, memory-management

有没有办法获得在 operator new 中分配的对象类型？

我的意思是：

```
void* BaseClass::operator new(size_t size)
{
    void* result = ::operator new(size);

    //Get type of object that's being allocated

    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:23:08.540

没有获取这些数据的机制。`operator new`只是分配给定大小的原始内存，并且只有`new`操作员调用知道将对象构造到分配的内存中的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:12:24.320

不，你不能这样做。运算符 new 隐含地是一个静态函数，即使您没有这样定义它。因为它是一个静态函数，所以你不能做一些事情，比如在`this`指针上使用 typeid 来获取对象的类型。

# objective-c - 将 UIImageViews 随机放置在 UIView 上且不重叠

> ID：14073668
> 
> 赞同：2
> 
> 时间：2012-12-28T17:57:31.603
> 
> 标签：objective-c, ios, uiview, uiimageview

我正在做的是`UIImageViews`随机放置在视图上，我让这部分工作我正在做的是：

```
return (int)0 + arc4random() % (self.view.bounds.frame.size.height-0+1); 
```

还有宽度。

我遇到的是一些`UIImageViews`相互重叠的地方。我知道我可以使用`CGRectIntersectsRect`，但我怎么能循环它直到所有`UIImageViews`都没有相互重叠？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T18:52:54.293

这是一个如何修改当前方法以放置图像视图的示例，如我之前的评论中所述：

```
// make sure this array is a member object, else pass it to the makeFrame method below.
NSArray *imageviews = [[NSArray alloc] initWithObjects: view1, view2, view3, nil]; // make sure they have tags! set the .tag property of each imageview in the array.
UIView *mainView = nil; // this won't really be nil - this is the view you are adding your imageviews to.

for (int i = 0; i < [imageviews count]; i++)
{
    UIImageView *imageview = [imageviews objectAtIndex: i];
    CGRect newFrame = [self makeFrameForView: imageview];

    while (newFrame.origin.x == 0 && newFrame.origin.y == 0)
    {
        // then the method returned CGRectZero. create it again until we get a good frame.
        newFrame = [self makeFrameForView: imageview];
    }

    [imageview setFrame: newFrame];
}

-(CGRect)makeFrameForView: (UIImageView*)theImageView
{
    CGRect newFrame = nil; // create your new frame here using arc4random etc and the parameters you prefer.

    for (int i = 0; i < [imageviews count]; i++)
    {
        UIImageView *imageview = [imageviews objectAtIndex: i];

        // first, ensure you aren't checking the same view against itself!
        if (theImageView.tag != imageview.tag)
        {
            BOOL intersectsRect = CGRectIntersectsRect(imageview.frame, newFrame);

            if (intersectsRect)
                return CGRectZero; // throw an "error" rect we can act upon.

        }
    }

    return newFrame;
} 
```

# javascript - 在单选按钮更改

> ID：14073673
> 
> 赞同：1
> 
> 时间：2012-12-28T17:57:51.057
> 
> 标签：javascript, jquery, html, jquery-mobile

我有一组 2 个单选按钮，可以在更改时更改设备方向。

我遇到的问题是，当我选择横向单选按钮时，它可以工作，但是当我重新选择纵向单选按钮时，我会收到警报横向并且它保持不变。

这是我的尝试：

HTML：

```
<fieldset data-role="controlgroup">
<input type="radio" name="orientation" id="portrait" value="1" checked />
<label for="portrait">Portrait</label>

<input type="radio" name="orientation" id="landscape" value="2" />
<label for="landscape">Landscape Mode</label> 
</fieldset> 
```

JS：

```
$("input[name='orientation']").change(function() {
        if ($("input[name='orienation']:checked").val() == '1') {
            navigator.screenOrientation.set('portrait');
            alert('portrait');
        }                
        else if ($("input[name='orienation']:checked").val() == '2') {
            navigator.screenOrientation.set('landscape');
            alert('landscape');
        }
    }) 
```

我正在使用 jQuery 和 jQuery Mobile

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:01:15.763

你的`if`陈述应该更像：

```
if ($(this).val() == '1') {
  ...
}                
else if ($(this).val() == '2') {
  ...
} 
```

# php - 如何提高使用 masonry js 插件的网页上图像的加载速度

> ID：14073674
> 
> 赞同：0
> 
> 时间：2012-12-28T17:57:55.973
> 
> 标签：php, javascript, css, ajax, jquery-masonry

我正在使用[Masonry](http://masonry.desandro.com/)插件，并试图显示类似网页的画廊。最初我正在加载 10 张图片，当使用 ajax 到达页面末尾时，我正在请求接下来的 10 张图片，然后加载它们。

**无论图像高度如何，**页面似乎都很好地对齐。但问题是它加载非常慢。

如何优化速度以使其快速加载。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:16:33.653

您应该使用[jQuery 延迟加载](http://www.appelsiini.net/projects/lazyload)。

> Lazy Load 是一个用 JavaScript 编写的 jQuery 插件。它延迟了长网页中图像的加载。在用户滚动到它们之前，不会加载视口之外的图像（网页的可见部分）。这与图像预加载相反。
> 
> 在包含许多大图像的长网页上使用延迟加载可以加快页面加载速度。加载可见图像后，浏览器将处于就绪状态。在某些情况下，它还可以帮助减少服务器负载。

# wcf - 找不到与 wcf 中绑定 NetTcpBinding 的端点的方案 net.tcp 匹配的基地址

> ID：14073678
> 
> 赞同：1
> 
> 时间：2012-12-28T17:58:32.800
> 
> 标签：wcf

我开发了简单的双工服务。我的服务项目有一个名为**ChatHandler.svc的 svc 文件**

当我右键单击 svc 文件并在浏览器中选择视图时，我收到错误消息，称为 **找不到与具有绑定 NetTcpBinding 的端点的方案 net.tcp 匹配的基地址**

我无法修复它。在这里，我提供了我的 web.config 端点详细信息

```
<services>
  <service name="ChatService.ChatHandler" behaviorConfiguration="behaviorConfig">
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:1648/ChatService/ChatHandler.svc" />
        <add baseAddress="http://localhost:1647/ChatService/ChatHandler.svc" />
      </baseAddresses>
    </host>
    <endpoint address="tcp"
                      binding="netTcpBinding"
                      bindingConfiguration="tcpBinding"
                      contract="ChatService.IChat"/>

    <endpoint address="net.tcp://localhost:1645/ChatService/mex"
                      binding="mexTcpBinding"
                      contract="IMetadataExchange"/>
  </service>
</services> 
```

告诉我端点出了什么问题。我需要更改的结果是我可以在浏览器中浏览我的 svc 文件。谢谢

# matlab - 如何将帧保存在另一个matlab文件中而不使它们可见

> ID：14073681
> 
> 赞同：0
> 
> 时间：2012-12-28T17:58:39.740
> 
> 标签：matlab, video

我有一个视频，我正在对 matlab（mfile）中的视频帧进行一些处理。之后，这些帧被编译并通过使用这些处理过的帧制作视频。视频中有大约 300 帧。由于处理非常繁重，所以我的电脑死机了。我只是不想显示那些处理过的帧，而是希望这些帧应该存储在另一个 mfile 中。我知道类似`saveas`or的命令，`set(gcf,'visible','off')`但它们在我的情况下不起作用。到目前为止我所拥有的：

```
aviobj =avifile('trail.avi','Compression','None','fps',1); %video to be made from frames
obj = aviread('highwayvideo.avi');
for 1:300
    .......... % processing
imi = getframe(gcf);
aviobj = addframe(aviobj,imi);
end
aviobj = close(aviobj); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:20:21.423

目前尚不清楚，但听起来您正遭受某种 RAM 限制。MATLAB 的视频转换程序不必要地昂贵，有更好的方法来做这些事情。我建议处理输入视频并将 300 帧保存为图像文件，然后使用 ffmpeg 将它们编译成视频。您甚至可能想使用 ffmpeg 将输入视频转换为输入静止图像，然后一次将静止图像加载到 matlab 中。

# python - python中list.count()的替代方法

> ID：14073682
> 
> 赞同：1
> 
> 时间：2012-12-28T17:58:42.620
> 
> 标签：python

我希望能够为 python 中的内置计数编写替代代码：此代码有效

```
def count(element,seq):
    """Counts how often an element occurs
    ...in a sequence"""
    mycount = seq.count(element)
    return mycount 
```

但我想把它写在一个 for 循环中（或其他方式？），我已经做到了这一点：

```
def count(element,seq):
    """Counts how often an element occurs
    ...in a sequence"""
    for i in seq:
        if  element == seq:
            print i 
```

我不确定如何将重新出现的元素作为整数返回。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T18:00:59.093

使用`sum()`和生成器表达式：

```
def count(element,seq):
    """Counts how often an element occurs
    ...in a sequence"""
    return sum(1 for i in seq if i == element) 
```

这是做什么的：它循环遍历 中的每个项目`seq`，如果该项目等于`element`，它生成一个`1`，它`sum()`加起来得到总计数。

使用像这样的生成器表达式意味着一次只能`seq`引用一个项目，从而使您可以有效地扫描*巨大的*序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T18:02:52.390

这个怎么样：

```
def count(element,seq):
    """Counts how often an element occurs
    ...in a sequence"""
    count = 0
    for i in seq:
        if  element == i:
            count += 1
    return count 
```

这是做什么的：它循环遍历 中的每个项目`seq`，如果该项目等于`element`，它添加`1`到`count`（最初是`0`），然后`count`在循环结束后返回。

使用这样的 for 循环意味着一次只能`seq`引用一个项目，从而使您可以有效地扫描*庞大的*序列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T18:07:32.913

只是另一种方式

```
from collections import Counter
def count(elem, seq):
    return Counter(seq)[elem] 
```

只是另一种方式

```
>>> from itertools import compress
>>> len(list(compress(seq, [e == 1 for e in seq])))
3 
```

有一点变化

```
>>> sum(1 for _ in compress(seq, [e == 1 for e in seq]))
3 
```

使用过滤器的另一种实现

```
>>> len(filter(None, [e == 1 for e in seq]))
3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T18:03:01.170

如果你想把它写成一个`for`循环，按照你的例子：

```
def count(element, sequence):
    c = 0
    for e in sequence:
        if e == element:
            c += 1
    return c 
```

# c# - 从另一个 c# 类在 HTML 中嵌入变量

> ID：14073685
> 
> 赞同：2
> 
> 时间：2012-12-28T17:58:57.327
> 
> 标签：c#, javascript, asp.net, html

我正在使用 ASP.NET 框架。在我的欢迎页面中（用户登录后），我想自定义段落文本以包含他们的登录信息。例如：

```
<p>
   Welcome to the website!
</p> 
```

是目前的代码，但我想要的是：

```
<p>
       Welcome <var=Username> to the website!
</p> 
```

现在显然这是不正确的，我没想到会这样。我只是想展示我正在尝试做的事情。我曾想过使用 JavaScript 以某种方式完成此任务，但这似乎有点过于复杂。我的变量“用户名”来自其他地方的 .cs 文件中的另一个类。如何将该变量嵌入到我的`<p></p>`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:03:49.727

在标记中添加标签：

```
<p>
       Welcome <asp:Label ID="lblUsername" runat="server" /> to the website!
</p> 
```

然后在后面的代码中：

```
protected void Page_Load(object sender, EventArgs e)
{
    lblUsername.Text = "username";  // set to the username variable here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T18:04:04.253

您可以使用一个`<asp:Literal`代替您的标记，然后在 Page_Load 根据需要设置值`ltUsername.Text = UserName;`

```
<p>Welcome <asp:Literal ID="ltUsername" runat="server" /> to the website</p> 
```

在你的代码后面

```
protected void Page_Load(object sender, EventArgs e)
{
    ltUsername.Text = Username; // whatever that may be
} 
```

文字只输出您提供的内容 - 而 asp:Label 会将您的文本包装在`<span>`标签中并添加额外的标记，这可能会造成混淆。出于这个原因，我只`asp:Label`用于实际`<label>`元素（与 相关联的元素`input`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T18:05:23.873

如果该变量来自另一个类，您将需要一种以某种方式存储它的方法。一种方法是将其放入会话中。

所以在你的“其他”课上

```
Session["myVariable"] = variable; 
```

然后在要设置“欢迎“变量”到网站”的页面中，执行以下操作：

首先，创建一个属性：

```
public string name {get;set;} 
```

然后，在您的 page_load 中：

```
 protected void Page_Load(object sender, EventArgs e)
   {
          name = Session["myVariable"]
   } 
```

然后只需将以下代码放入您的 .aspx 页面中：

```
 Hello <%= name %> , welcome to the website! 
```

或者你也可以这样做：

页面加载：

```
Label1.Text = Session["myVariable"].ToString(); 
```

.aspx：

```
Hello, <asp:Label ID="Label1" runat="server" /> welcome to the website. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T18:04:22.677

在 HTML 中

```
<p>
       Welcome <asp:Label ID="lblUserName" runat="server"></asp:Label> to the website!
</p> 
```

然后在 Page_Load 中的 .cs 文件中

```
lblUserName.Text = {The User's First Name} 
```

如果您发布更多关于如何进行身份验证的代码，那么我可以`{The Users First Name}` 用实际代码替换。现在只需自己使用它来输入名字代码

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-28T18:04:30.970

您将不得不使用服务器端控件，即标签、文本框并执行以下操作：

```
<asp:Label id="username" runat="server" /> 
```

上述派对进入您的标记部分。

然后在您的`Page_Load`活动或用户名属性位于填充的 .cs 文件中的位置上，您可以执行以下操作：

```
 username.Text = User; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T18:07:45.660

我建议您浏览一个教程网站并熟悉语法和结构。一个好的起点是这里，[http://www.w3schools.com/aspnet/default.asp](http://www.w3schools.com/aspnet/default.asp)（天哪，我已经可以想象对此的反馈了；））

你想要完成的事情非常简单，你也可以安装一些随 Visual Studio 一起提供的模板（如果你有的话）......有些完全符合你想要实现的目标。

祝你好运！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-11T12:57:48.293

我会说最好的方法是使用：

```
var page=HttpContext.Current.Handler as Page; 
```

比：

```
page.Header.Controls.Add(literalcontrol); 
```

那么你可以从一个类中使用它，并且不需要在后面的每个代码上写它。

# sql - 限制三重连接的结果

> ID：14073688
> 
> 赞同：0
> 
> 时间：2012-12-28T17:59:03.277
> 
> 标签：sql, sqlite

我有一个包含三个表的数据库，与外键相关：

行程：

```
| 身份证| 号码| 日期|
------------------

```

天：

```
| 身份证| 行程ID| 日期| 开始| 结束|
------------------------------

```

腿：

```
| 身份证| 日期ID| 产地| 目的地|
--------------------------------

```

我使用以下联接从该数据库中获取数据：

```
SELECT * FOM Trips t JOIN Days d
    ON t.Id = d.TripId
JOIN Legs l 
    ON d.Id = l.DayId
WHERE t.Id = tripId 
```

它返回一个结果，其中包含与查询的行程相关的每条腿的一行，如下所示：

```
| 旅行.ID| 行程数| 行程.日期| 天数.ID| 天数.TripID| 天.日期| 天.开始| 天。结束| 腿.ID| Legs.DayID| 腿.产地| 腿.目的地|
-------------------------------------------------- -------------------------------------------------- ---------------------------------------------

```

这适用于特定的行程 ID，但假设我运行一个返回多个行程的查询，例如

```
    SELECT * FROM Trips t JOIN Days d
       ON t.ID = d.TripID
    加入腿 l
       ON d.Id = l.DayId
    WHERE d.Date > 日期

```

如何将上述查询的结果限制为单次行程，但仍获得与该行程关联的所有行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:21:32.977

我不是 100% 确定 sqlite 语法（我更熟悉 oracle），但我认为这就是你想要的：

```
SELECT * FROM Trips t JOIN Days d
ON t.ID = d.TripID
JOIN Legs l
ON d.Id = l.DayId
WHERE d.ID IN (  
    SELECT ID FROM Days d WHERE d.date > date ORDER BY d.date LIMIT 1
) 
```

# apache - .htaccess 重定向直接访问

> ID：14073690
> 
> 赞同：0
> 
> 时间：2012-12-28T17:59:07.283
> 
> 标签：apache, .htaccess, redirect

我试图阻止用户直接访问我网站上的文件。基本上我有一个位于 /images/header.jpg 的图像

我正在尝试使用 .htaccess 将直接访问该文件“http://www.domain.com/images/header.jpg”的所有尝试转发到我的 404 页面，但我希望图像在从我的调用时仍然加载源代码。使情况复杂化的是我实际上将 header.jpg 重定向到另一个图像文件夹。

所以最终想要的效果是：

用户加载页面 -> 调用 header.jpg 并重定向到 new_header.jpg 用户尝试从他们的站点链接 header.jpg -> 他们被重定向到我的 404 页面。

我尝试了一些条件，但未能达到预期的效果......

```
RewriteCond %{REQUEST_URI} ^/images
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?domain.com [NC]
RewriteRule ^(.*\header.jpg(/.*)?)$ new_header.jpg [L,QSA] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:25:39.053

我认为这样的事情应该适合你：

```
RewriteEngine On
#Redirect all request for things in /images that don't come from website to 404 page (assumed to be /404 in this case) - Prevents hotlinking
RewriteCond %{REQUEST_URI} ^/images
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?domain\.com [NC]
RewriteRule ^.*$ /404 [L,R=404]

#Redirect requests for /images/header.jpg to new_header.jpg image
RewriteRule ^/?images/header.jpg /path/to/other/images/new_header.jpg [L] 
```

# bash - 为什么脚本在 Centos 6.3 中不起作用

> ID：14073693
> 
> 赞同：2
> 
> 时间：2012-12-28T17:59:30.467
> 
> 标签：bash, console, centos

尝试使用脚本自动为用户创建方向和权限。

起初我正在添加用户

```
# adduser mysite.com
# adduser mysite1.com
# adduser mysite2.com
# adduser mysite3.com 
```

之后，为了不手动创建方向，我编写了以下脚本

```
cd /home
for dir in `ls -1 `; do
mkdir /home/$dir/log
mkdir /home/$dir/html
chown -R $dir:apache $dir
chmod ug+rX $dir
done; 
```

但得到以下错误

“mkdir：无法创建目录`/home/\033[0m\033[01;34mlog\033[0m/log'：没有这样的文件或目录......”等

我做错了什么？在旧 VPS 中一切正常，但在新 VPS 中出现该错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:02:42.547

如果必须在`ls`那里使用，请将其更改为：

```
for dir in `ls --color=never -1 `; do 
```

使用`*`会简化这一点：

```
for dir in *; do 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:06:05.393

我会确保您以这种方式仅使用目录：

```
 for dir in `find . -maxdepth 1 -type d`; do 
```

正如 Sean 所写：`ls`为目录名称添加颜色，您必须使用他的解决方案或`find`.

# ruby - Faraday - 对 Freebase API 的多个 GET 参数请求

> ID：14073704
> 
> 赞同：0
> 
> 时间：2012-12-28T18:00:27.687
> 
> 标签：ruby, freebase, faraday

我一直试图从 Freebase API 获取主题信息。无论如何，这主要是一个 Ruby Faraday 问题。

所以我在以下路径请求： [https ://www.googleapis.com/freebase/v1/topic/m/02676m4?limit=20&filter=/film/film_series/films_in_series&filter=/common/topic/article](https://www.googleapis.com/freebase/v1/topic/m/02676m4?limit=20&filter=/film/film_series/films_in_series&filter=/common/topic/article)

注意有两个 &filter。使用我的网络浏览器可以正常工作。但是，在 Ruby 上执行以下任一操作时：

```
response = Faraday.get 'https://www.googleapis.com/freebase/v1/topic/m/02676m4', {
        'limit' => 20,
        'filter' => ['/film/film_series/films_in_series', '/common/topic/article'],
        'key' => 'my_key_here'
    }, { 'Accept' => self.Headers_Accept } 
```

或者...

```
response = Faraday.get 'https://www.googleapis.com/freebase/v1/topic/m/02676m4', {
        'limit' => 20,
        'filter' => '/film/film_series/films_in_series&filter=/common/topic/article',
        'key' => 'my_key_here'
    }, { 'Accept' => self.Headers_Accept } 
```

或者...

```
response = Faraday.get 'https://www.googleapis.com/freebase/v1/topic/m/02676m4?limit=20&filter=/film/film_series/films_in_series&filter=/common/topic/article&key=my_key_here', {}, { 'Accept' => self.Headers_Accept } 
```

**然后过滤器被 API 忽略。**关于我的主题的每一条信息，我都会得到巨大的回应。

您可以通过执行*不带过滤器*的查询来复制结果： [https ://www.googleapis.com/freebase/v1/topic/m/02676m4?limit=20](https://www.googleapis.com/freebase/v1/topic/m/02676m4?limit=20)

**问题：** 任何人都可以想出为什么我通过法拉第遇到这个问题的原因，但直接通过我的浏览器访问时却没有？

**额外提示：** 如果我只对法拉第请求使用*一个*过滤器，它就可以正常工作。但我真的需要使用多个过滤器。

**Freebase 主题 API：** [http ://wiki.freebase.com/wiki/Topic_API](http://wiki.freebase.com/wiki/Topic_API)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:53:38.453

这听起来很像这个拉请求修复的法拉第错误：[https ://github.com/technoweenie/faraday/pull/199](https://github.com/technoweenie/faraday/pull/199)

# c++ - 解压缩密码保护文件的库

> ID：14073706
> 
> 赞同：3
> 
> 时间：2012-12-28T18:00:37.137
> 
> 标签：c++, windows, zip, static-libraries

我需要解压缩受密码保护的文件。

我要求将库包含到我的 Windows 项目中，而不是实用程序。

**要求：**

*   支持密码
*   C 或 C++
*   不依赖于 MFC
*   希望它不是 DLL（因为它们通常以某种不兼容的模式编译）

已经搜索过 SO 和 Google，不幸的是还没有找到库。

*   最推荐的“zlib”不支持密码；
*   Lucian Wischick 的“Zip Utils”（[这里](http://www.wischik.com/lu/programmer/zip_utils.html)）很好，但有一个错误 - 提取的文件最后被裁剪；
*   我发现的另一个库依赖于 MFC。

我不敢相信 2012 年这个简单的任务没有解决方案。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T13:12:29.543

最终使用[了 Lucian Wischick 的“Zip Utils”](http://www.wischik.com/lu/programmer/zip_utils.html)。

有一个错误 - 提取的文件最后被裁剪了 12 个字节。我发现了如何解决它。

要修复此错误，请删除文件“unzip.cpp”中的第 3657 行：

```
pfile_in_zip_read_info->rest_read_uncompressed-=uDoEncHead; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T20:07:25.693

## 更新：使用 7-zip 作为*库*

测试您的`password protected`文件是否可以使用[7-zip](http://www.7-zip.org/)解压缩。
如果是这种情况，那么您应该能够使用代码库（作为 dll）。

该工具支持 zip 解压缩 (ZlibDecoder) 和 2 种可能的不同加密技术 (ZipCrypto & ZipStrong)。

* * *

至于如何使用它，7-zip 文件管理器工具使用 7-zip dll 来完成所有工作。您需要查看命令行工具的源代码`7z`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:12:50.700

你可以试试 Info ZIP。它是开源的，并且支持存档加密：http: [//sourceforge.net/projects/infozip/](http://sourceforge.net/projects/infozip/)

# c# - 有没有办法检查与串行端口（RS-232）连接的设备的电源开/关？

> ID：14073708
> 
> 赞同：1
> 
> 时间：2012-12-28T18:00:50.740
> 
> 标签：c#, c++, serial-port

我有两台设备连接到串行端口（RS-232）。当它们打开时，我对控制设备没有任何问题，但是当它们关闭时，我的软件在写入设备时根本没有响应。

是否有任何通用方法可以以编程方式检查设备是否开启？或者我需要联系每个制造商吗？简单地检查端口连接不起作用，因为可以毫无问题地打开电源关闭设备的端口。

谢谢大家，新年快乐。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T18:08:19.243

不，串行端口不提供任何机制来了解其他设备是否已连接或通电。在您的应用程序中，您可以发送请求，然后超时等待响应以确定对方已关闭。

# php - 在 PHP 中用换行符显示字符串

> ID：14073713
> 
> 赞同：-1
> 
> 时间：2012-12-28T18:01:07.570
> 
> 标签：php, newline

我正在尝试显示从 MySQL 数据库中检索到的包含空格、换行符等的文本块。数据用换行符保存在数据库中。但是当它显示在 php 页面中时，不会显示新行。所有文本都在一行中。请帮忙。提前致谢。

显示来自 db 的文本块的代码：

```
 <?php if (isset($row['Description'])) {?>
 <p>Description :</p> <?=$row['Description'] ?>
 <?php } ?> 
```

如果描述在数据库中保存为：

```
"First line text

Second line text

Third line text." 
```

它在网页中显示为：

```
"First line text Second line text Third line text." 
```

我希望结果为：

```
"First line text 

Second line text

Third line text." 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T18:01:50.427

PHP[`nl2br()`](http://php.net/manual/en/function.nl2br.php)函数是你的朋友！

```
<?php 
if (isset($row['Description'])) 
{
    echo '<p>Description :</p>';
    echo nl2br($row['Description']);
} 
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T18:03:03.313

### 使用[`nl2br()`](http://php.net/manual/en/function.nl2br.php)：

```
<?php if (isset($row['Description'])) {?>
<p>Description :</p> <?=nl2br($row['Description']); ?>
<?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:04:31.997

您的问题是 HTML 会自动折叠空白字符。您需要`<br>`在 HTML 中实际输出一个标签以强制换行。

为此，您拥有`nl2br()`可以运行数据库以将换行符转换为`<br>`标签的功能。

所以像这样使用它：

```
echo nl2br($your_database_content); 
```

# python - Python - 这是 eval 或 exec 的可接受用途吗？还有其他方法吗？

> ID：14073719
> 
> 赞同：0
> 
> 时间：2012-12-28T18:01:31.847
> 
> 标签：python, python-3.x, exec, eval

我对 Python 很陌生，并且一直在寻找一种方法来调用一个函数，该函数的名称由一个字符串和一个在用户选择其中一个选项时动态填充的变量组成。

例子：

我使用一个菜单启动程序，该菜单为用户提供某些选项（选择 1、2、3 或 4）

如果用户选择 1，变量 xyz 将填充一个元组或列表内部的字符串。

将此字符串分配给变量后，我调用另一个函数，它给了我另一个选项。

如果我得到选项 1，我的代码会将 xyz 变量附加到一个预定义的字符串，该字符串将形成一个函数名（接下来将调用的那个。）。

```
if int(option) == 1:
#prefixfunc will be that predefined string that will be the prefix for every function  #to be called
    exec('prefixfunc'+xyz'()')
    #or
    #eval('prefixfunc_'+xyz'()')
    #for example, we have xyz as abc, then it calls function prefixfunc_abc() 
```

它在代码中运行良好。而且我不认为这可能是用户添加不同输入的情况的责任。由于变量是通过使用列表或元组中已定义的字符串来分配的。

我希望我已经说清楚了。

只是为了更清楚：

```
def maint_car():
print('It Works!!! But did you come until here in a safe way?' )

def veh_func():
func=( "Maintenance", "Prices", "Back", "Quit" )
ord = 0

for i in func:
    ord += 1
    print(ord,'\b)', i)

picked = input('\nOption: ')

if int(picked) == 1:
    exec('maint_'+xyz+'()')

def startprog():

abcd =( "car", "bike", "airplane", "Quit" )
global xyz
ord = 0
for i in abcd:
    ord += 1
    print(ord,'\b)', i)

picked = input('\nVehicle:')

if int(picked) == 1:
    xyz = abcd[0]
    veh_func()

elif int(picked) == 2:
    xyz = abcd[1]
    veh_func()

elif int(picked) == 3:
    xyz = abcd[3]
    veh_func()

elif int(picked) == 4:
    print('\nBye.\n')

startprog() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T18:03:47.540

为此，我将使用`dict`将字符串名称映射到函数的 a。

```
def test():
 print "yay"

funcs = { "test": test }
funcs["test"]() 
```

这提供了一种更好的方法来执行此操作，您可以测试是否要使用`in`运算符非常轻松地执行该功能。

回答：您的示例是否有用，`eval`否则`exec`我会拒绝。如果您认为这`exec`是正确的答案，请查看您的解决方案，看看是否有更可维护、更简单或更明确的方法来实现您的目标。在这种情况下，将用户输入映射到要根据某些用户输入调用的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T18:06:43.513

好吧，你可以那样做，但是当有很多更好的方法时，为什么要那样做呢？如：

```
funcs = {1: func1, 2: func2, 3: func3, 4: func4}
option = int(raw_input("Enter selection: "))
option in funcs and funcs[option]() 
```

这里的优点是您不必为函数遵循任何特定的命名约定。如果选项 1 是“添加名称”，那么您可以调用该函数`addname()`而不是`func1()`. 这将使您的代码更容易遵循。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T18:17:15.183

如果您直接知道方法的名称，请按照@kindall 的建议进行操作。如果不这样做，您可以使用 getattr() 获取调用方法，而不必使用 eval() 进行编译/评估。

```
class ZZ(object):
  def fooBar(self):
    print(42)
  def barFoo(self):
    print(-42)

#now make a z
anInstance = ZZ()

#build up a dynamic string
string = 'foo' + 'Bar'

#fetch the attribute bound to string for the instance
method = getattr(anInstance, string)

#now execute the bound method/function (that's what the empty parens do)
method()

# out comes the following! Tada!
>>> 42

# we can inline a lot of this and just do things like
getattr(anInstance, 'bar' + 'Foo')()

# out comes the following! Again with the Tada...
>>> -42 
```

# apache - 尝试编写一个 .htaccess 来重写 URL 而无需重定向

> ID：14073721
> 
> 赞同：0
> 
> 时间：2012-12-28T18:01:49.383
> 
> 标签：apache, .htaccess

好的，所以我为这个客户准备了 6 个域——所有这些域都需要指向一个主域，为了论证的目的，www.abc.com

但是，主机和帐户是在 www.xyz.com 下设置的。

所以基本上我想将所有域重定向到 xyz.com （我已经完成了），然后将 xyz.com 的 URL 重写为 abc.com （位于完全不同的主机上）

如何在 .htaccess 中执行此操作？

我试着把它放到一个空白文件中，它只是给了我一个 500 内部服务器错误：

```
RewriteCond Host: www\.abc\.com
RewriteProxy (.+) http\://www.xyz.com$1 [I,U] 
```

我这样做对吗？为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:13:39.477

您的第一步应该是在 DNS 级别进行攻击。利用 DNS 使所有域都指向您要处理请求的单个服务器。这可以防止您需要维护除了重定向到其他服务器之外什么都不做的服务器。

然后，您可以使用 Apache 重定向来重写域名。

像这样做：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.xyz\.com$
RewriteRule ^(.*)$ http://www.xyz.com$1 [L,R=301] 
```

这会将所有未使用您指定域名的到达服务器的请求重定向到正确的域名。请注意`R=301`标志的使用，这将表明这是一个永久的重定向，这应该有助于搜索域的索引。

# android - 如何在android中获得屏幕开关？

> ID：14073723
> 
> 赞同：0
> 
> 时间：2012-12-28T18:02:05.103
> 
> 标签：android, touch, homescreen, onfling

我正在创建一个 Android 应用程序，并希望提供几种可以通过投掷来切换的布局（如 Android 主屏幕）。我使用以下代码获得了要切换的布局：

```
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE) {
            //vFlipper is a ViewFlipper, but it is not important for me to have it. As long as I can display several layouts and switch them by thumb touch, in a way that the layout will follow the thumb, that's fine.
            if (vFlipper.getDisplayedChild() == 0)
                return false;
            vFlipper.setInAnimation(AnimationUtils.loadAnimation(this, R.anim.left_in));
            vFlipper.setOutAnimation(AnimationUtils.loadAnimation(this, R.anim.left_out));
            vFlipper.showPrevious();
        } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE) {
            if (vFlipper.getDisplayedChild() == vFlipper.getChildCount() - 1)
                return false;
            vFlipper.setInAnimation(AnimationUtils.loadAnimation(this, R.anim.right_in));
            vFlipper.setOutAnimation(AnimationUtils.loadAnimation(this, R.anim.right_out));
            vFlipper.showNext();
        }
        return true;
    } 
```

但这并不像主屏幕那样工作。在主屏幕上，您可以将屏幕拉到一边并看到它在移动，而不必完成投掷和切换屏幕。屏幕随着您的拇指移动。我的代码检查一个完整的投掷手势，然后触发切换和动画。现在我意识到一个完整的解决方案可能会放弃 GestureDetector 和 onFling 方法并使用 onMove 事件，但我不知道如何实现它以及在 onMove 方法中放入什么。如果您知道一个很好的清晰演示，视频或书面，将不胜感激。如果您不关心编写这样的演示，那也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:12:33.483

查看[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)类，看看它是否能满足您的需求。它允许您为内容的每个“页面”设置片段，并在它们之间滑动以切换，并支持您似乎正在描述的相同类型的过渡行为。

[这是一篇](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)包含更多信息的博客文章。

# google-maps - 谷歌地图的 draggableCursor 和 draggingCursor 选项不再起作用了吗？

> ID：14073725
> 
> 赞同：2
> 
> 时间：2012-12-28T18:02:17.860
> 
> 标签：google-maps, google-maps-api-3, cursor

我正在尝试以下操作，但光标不会从默认值（箭头光标）更改：

```
var opts = {
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: new google.maps.LatLng(0, 0),
    zoom: 1,
    draggable: true,
    draggingCursor: 'move',
    draggableCursor: 'pointer'
}
var map = new google.maps.Map(document.getElementById('map_canvas'), opts); 
```

**更新**

@Dr.Molle，关于浏览器的要点。在 IE8 中，draggableCursor 有效，但 draggingCursor 无效。在 FF 12.0 和 Chrome 23.0.1271.97 m 中，两者都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T13:00:04.670

过去的爆炸。我知道这是从哪里来的，但忘了回到这里回答问题。

`cursor: default;`事实证明这是因为我们有一个应用于所有 div 的reset.css 文件。修复是在呈现地图的页面上应用这样的覆盖：

```
#google_map_canvas * {
    cursor: inherit;
} 
```

# c# - 返回 linq 查询的数据类型

> ID：14073726
> 
> 赞同：5
> 
> 时间：2012-12-28T18:02:22.120
> 
> 标签：c#, .net, linq, dynamic, anonymous

我有一个函数，它返回一个对象，该对象代表我的数据库中的一条记录以及其他列。我没有为这个对象创建一个单独的类，而是想知道是否还有另一种方法，例如：

```
public object GetRecord(string key)
{
    var item = select new {column1, column2};

    return item;
}

public void main() 
{
    var item = GetRecord(1);

    //  I want to be able to reference column1 on item.  
    var x = item.column1;  
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T18:06:18.867

是的，还有其他方法（实际上很多），但我强烈建议您不要使用其中任何一种。处理这种情况的最佳选择是创建一个新的自定义类型来保存您拥有的数据。到目前为止，它将是最可维护的选项。

匿名类型专门设计用于在单个方法的范围内使用。您正在与功能设计作斗争，因此很难做到，您很可能会失去 Intellisense，性能很可能会受到影响，并且需要返回并维护代码的可怜的 sap 将不知道发生了什么或如何调整查询。

大多数替代解决方案的主要问题是您丢失了编译时间检查。如果查询删除参数、添加参数、更改类型等。使用它的代码无法知道。编写代码以使用查询时，您无法知道所有数据是什么，它们的类型是什么，变量的名称是什么等。您需要担心编译器可以处理的变量名称中的拼写错误't catch，并且您将始终需要查看生成查询的方法的内部工作原理。您失去了将其视为黑匣子或抽象的能力，这很重要。

如果您担心创建这些自定义类型所花费的时间和精力，可以使用许多自动化工具来根据数据库表或其他来源生成此类类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T18:04:25.327

如果是 .net 4.0 使用[动态](http://msdn.microsoft.com/en-us/library/dd264736.aspx)关键字。

```
public dynamic GetRecord(string key)
{
   var item = select new {column1, column2};

   return item;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T18:10:28.543

此外，如果它是 .net 4.0，您可以使用 a `Tuple<object,object>`then 引用它`item.Item1`。您可以使用对象的类型而不是简单的`object`.

```
public Tuple<Column1Type,Column2Type> GetRecord(string key)
{
   var item = select new Tuple<Column1Type,Column2Type>(column1, column2);

   return item;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-28T18:07:28.370

仅补充其他答案，您也可以使用泛型来做到这一点。像这样的东西：

```
public T GetRecord<T>(string key)
   where T : IAnyInterfaceWithProperties, new
{
   var item = select new T { PropertyOfInterface = value, Property2 = value2 };

   return item;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-28T18:24:00.693

您可能会考虑为此使用 POCO 库 - 将完全按照您的意愿行事。

您可以自己滚动或使用已经可用的滚动：

[http://code.google.com/p/dapper-dot-net/](http://code.google.com/p/dapper-dot-net/)

您的代码将如下所示：

```
 var result = connection.Query("select col1, col2 from table1");

 var x = result[0].col1; 
```

Drapper 还可以让你拥有一个强类型，例如：

```
 var result = connection.Query<myType>("select col1, col2 from table1");

 ' Now result is a list of myType 
```

# jsf - 从另一个表单的按钮触发表单验证

> ID：14073734
> 
> 赞同：2
> 
> 时间：2012-12-28T18:02:59.307
> 
> 标签：jsf, jsf-2, primefaces

我在 Glassfish 上使用 Primefaces 和 JSF-2，试图交叉验证表单。这是场景：

```
<h:form id="form1">
    <p:messages id="msgs" showDetail="false" autoUpdate="true" closable="true" />
    some input fields with validation
</h:form>

<h:form id="form_upload">
    some upload fields that dont trigger validations
</h:form>

<h:form id="buts">
    <p:commandButton id="save" value="Save" action="#{bean.save}"
        update=":form1 :form1:msgs" process=":form1">
</h:form> 
```

我想要按钮保存以触发 form1 上的验证，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:18:13.217

使用该属性`process`并指定要在服务器上处理的每个组件：

```
<p:commandButton id="save" value="Save" action="#{bean.save}"
     process=":form1 :form_upload" update=":form1" /> 
```

不要忘记在`p:messages`某个地方放一个`:form1`，否则你也想更新它。

在此处阅读有关[JSF 上的 AJAX 的](http://balusc.blogspot.com.br/2011/09/communication-in-jsf-20.html#AjaxPOSTForm)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T10:58:32.710

您可以使用 PrimeFaces'`<p:remoteCommand>`

```
<h:form id="form1">        
    some input fields with validation
    <p:remoteCommand name="rc" update="@form" action="#{bean.save}" />
</h:form> 
```

远程调用示例：

```
<h:form id="buts">
   <p:commandButton value="Save" type="button" onclick="rc()" />
</h> 
```

# ruby-on-rails - Rails：将样式表放在“资产”与“公共”下的区别

> ID：14073739
> 
> 赞同：3
> 
> 时间：2012-12-28T18:03:37.317
> 
> 标签：ruby-on-rails

我注意到样式表可能*位于*：

*   `app/assets/stylesheets`
*   `public/stylesheets`

有什么区别，为什么？

编辑：我也意识到这个位置是完全可定制的，但这些是我发现的最普遍的位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:21:33.817

我建议您阅读有关“rails 资产管道”的信息。那应该回答你的问题...

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

[http://railscasts.com/episodes/279-understanding-the-asset-pipeline](http://railscasts.com/episodes/279-understanding-the-asset-pipeline)

简短的回答是“app/assets”使用资产管道，而“public/stylesheets”只是一个静态文件。

# ruby - 在Ruby中第一个=符号之后获取子字符串

> ID：14073743
> 
> 赞同：50
> 
> 时间：2012-12-28T18:04:00.417
> 
> 标签：ruby, string

纯粹出于好奇，有没有更优雅的方法来简单地获取字符串中第一个`=`符号之后的子字符串？以下工作回馈`name=bob`：

```
string = "option=name=bob"
string[string.index('=')+1..-1] 
```

只是感觉不是很Ruby。这也有效：

```
string.split('=', 2)[1] 
```

同样，不是很优雅，尤其是因为`split`正在做额外的不必要的工作。正则表达式是答案吗？对于在字符串中查找单个字符位置的简单性，我觉得这有点矫枉过正：

```
string.match('=(.*)')[1] 
```

我不得不想象这是一个非常普遍的情况，不是有`string.after('=')`类型方法吗？考虑到这种操作在 Web 上的使用频率，Ruby on Rails 是否提供了类似的功能？

***更新***：忘记提及未找到符号时的情况，`nil`或者应该返回空字符串。但是正则表达式机制和`.index`方法需要额外检查（所以不太优雅）。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-12-28T18:11:33.533

不完全是`.after`，但非常接近：

```
string.partition('=').last 
```

[http://www.ruby-doc.org/core-1.9.3/String.html#method-i-partition](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-partition)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-28T18:11:08.050

还有这种方式：

```
string.partition('=')[2] 
```

和这个：

```
string.sub(/.*?=/, '') 
```

不过，我想我更喜欢你提到的正则表达式方式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-28T18:10:19.520

可能不是 Ruby 方式（它有点神秘），但你可以这样做：

```
string[/=/]
$'
=> "name=bob" 
```

或者

```
/=/ =~ string
$'
=> "name=bob" 
```

`$'`**是匹配成功后**保存字符串的全局变量。如果`nil`没有任何匹配，也是！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T18:05:57.707

### 使用字符串#match

您可以使用正则表达式和正则表达式来查找匹配项。例如：

```
string = "option=name=bob"
string.match /(?<==).*/
# => #<MatchData "name=bob"> 
```

### 使用匹配变量访问结果

即使您没有将匹配数据分配给变量，Ruby 也会为您将其存储在特殊的[匹配变量](http://www.ruby-doc.org/core-1.9.3/MatchData.html)中。

```
$&
# => "name=bob" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-20T06:26:18.130

`split(char)`是另一个可以使用的功能。例如，我们想从 "answer:computer" 中获取 char ':' 之前的子字符串，那么我们可以使用`"answer:computer".split(':')[0]`. 所以，我们会得到结果为 "answer"。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-26T18:40:33.703

而不是使用`string.split('=', 2)[1]`你可以使用[数组分解](https://docs.ruby-lang.org/en/3.0.0/doc/syntax/assignment_rdoc.html#label-Array+Decomposition)。

```
# assuming your string represents a key=value pair
key, value = string.split('=', 2) 
```

虽然这个解决方案不适合单行，但我确实觉得它很干净。

# javascript - 来自 Ext.data.Store 的可用时间段？

> ID：14073746
> 
> 赞同：0
> 
> 时间：2012-12-28T18:04:03.697
> 
> 标签：javascript, extjs

我是 JavaScript 和 Sencha 的新手，但熟悉 as3/flex。我在 as3 中构建了类似的东西，但我很难将它转移到 Sencha JS。
我有一个 Ext.data.Store。此 Ext.data.Store 将根据所选日期的预定时间段而更改。我需要能够根据这些参数提取可用的 2 小时时间块。

开始时间和结束时间以 15 分钟为增量，长度应始终为 2 小时。尽管 Ext.data.Store 中的某些计划时间可能大于 2 小时或更少，但我仍然需要能够将 2 小时的时间段显示为空闲时间。在 Ext.data.Store 中可能会看到重复的时间段已填满，因为日程表中有多个人。我正在考虑按员工设置某种循环，因此如果员工人数为 3，它将通过代码循环 3 次以找到可用的 2 小时时间段。

我能够看到对象对象员工：“詹姆斯”结束时间：“10:00”时间：“8:00” **原型**：对象

但我不知道如何实现按员工对所有时间段进行排序，然后找到每个员工时间段之间的所有两小时间隔。

```
Ext.onReady(function()
{
console.log('ready!');

var constants = {
'WORKDAY_START': '08:00',
'WORKDAY_END': '18:00',
'INTERVAL_HOUR_COUNT': 2
};
Ext.define('Times', {
    extend: 'Ext.data.Model',
    fields:[
            {name: 'stime', type: 'string'},
            {name: 'endtime', type: 'string'},
            {name: 'employee', type: 'string'}
            ]
 })

 Ext.create('Ext.data.Store', {
 storeId: 'ac',
 model: 'Times',
 data : [
     {stime:"8:00", endtime:"10:00", employee:"james"},              
     {stime:"13:00", endtime:"15:00", employee:"james"},
     {stime:"15:00", endtime:"17:30", employee:"james"},
     {stime:"12:00", endtime:"14:00", employee:"carl"},               
     {stime:"14:00", endtime:"16:00", employee:"carl"},
     {stime:"14:00", endtime:"16:00", employee:"jimmy"}
 ]
 });

 function addZero(num) {
            // Create an array, if string is in "xx:xx" format, the array       will be ["xx", "xx"], otherwise it will be ["xx"]
            var i = new Number();
            var arr = String(num).indexOf(":") == -1 ? [num] :   String(num).split(":");
            for (i = 0; i < arr.length; i++) // Add an "0" if the string   is only one character
            if (arr.length == 1){
             arr[i] = "0" + arr[i];
                }
            return arr.join(":");
        }

 var ac = Ext.data.StoreManager.lookup('ac').data;

 var employeeTimeSlots = new Array();
 ac.each(function(item, index, allItems) {

//console.log("a[" +arrayItem+ "] = " + index);
console.info(item.data);

//console.log('@ready');    
            var timeSlot = new Array();

            for (timeSlot in item.data) {

                  var employeeSlots = new Array();
                var employee = timeSlot.employee;
                if (!employeeSlots['employee'])   employeeSlots['employee'] = [];
                employeeSlots.push(['employee'],{
                    stime: timeSlot.stime,
                    endtime: timeSlot.endtime

                });
                //console.log(employeeSlots)
                //console.log(timeSlot);
            }

// Second step, find all two hour intervals between each employee's time slot

            /*for (var employee in employeeSlots) {
                var   employeeTimeSlots=Array(employeeSlots['employee']);
                // Add in the first and last time stamps
                employeeTimeSlots.unshift({endtime:   constants.WORKDAY_START});
                employeeTimeSlots.push({starttime: constants.WORKDAY_END});
                // Find all the time differences
                for (var i = 0; i < employeeTimeSlots.length-1; i++) {
                    // The end hours of the current time slot

                    var endDate = new Date(0, 0, 0,   employeeTimeSlots[i].endtime.substring(0, 2),
                        employeeTimeSlots[i].endtime.substring(3, 2), 0, 0);
                    // The beginning hours of the next time slot
                    var nextStartDate = new Date(0, 0, 0, employeeTimeSlots[i+1].starttime.substring(0, 2),
                        employeeTimeSlots[i+1].starttime.substring(3, 2), 0, 0);
                    // The hours in between the time slots
                    var availableHours = Number((nextStartDate.getTime() - endDate.getTime())) / (1000 * 60 * 60);
                    // For every two hours that are available between these time slots
                    for (var hourInterval = 0; availableHours -   hourInterval >= constants.INTERVAL_HOUR_COUNT; hourInterval += constants.INTERVAL_HOUR_COUNT)   {
                        // Trace the available time slot
                        trace(employeeName, "=", addZero((endDate.hours + hourInterval) + ":" + endDate.minutes), 
                            "to", addZero((endDate.hours + hourInterval + constants.INTERVAL_HOUR_COUNT) + ":" + endDate.minutes));
                    }

            }
                    }*/

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T10:12:14.883

您可以按字段或多个字段对商店进行排序。

如果您的商店名为 mystore，您将拥有

```
mystore.sort('employee','ASC') 
```

从文档中我们有：

```
//sort by a single field
myStore.sort('myField', 'DESC');

//sorting by multiple fields
myStore.sort([
{
    property : 'age',
    direction: 'ASC'
    },
    {
        property : 'name',
        direction: 'DESC'
    }
]); 
```

# jquery - 悬停在链接列表上的效果

> ID：14073748
> 
> 赞同：0
> 
> 时间：2012-12-28T18:04:24.107
> 
> 标签：jquery, html, css

我有一个项目列表，每当我将箭头悬停时，这些项目都会使用 jcarousel 向上或向下滚动。项目列表具有需要链接的链接。

![我的物品清单](../Images/6eb487cc05579faefb7ece54847ba1e5.png)

这就是我想要实现的目标：我需要扩展箭头的悬停区域，以便一旦光标位于彩色区域中，列表就会滚动。我只需更改箭头的大小（它们是绝对定位的）并将它们放在列表的顶部就可以轻松实现这一点，但我的问题是我无法让我的链接工作，因为箭头容器就在它们的顶部。

![悬停区域](../Images/82bc66e2bbf762cb3a3f4d52df8c8253.png)

编辑：我打算做一个小提琴，但它似乎不适用于 jcarousel。这是我到目前为止所拥有的：

[链接到网站](http://gestyre.com/new)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:10:50.870

正如您所注意到的，问题在于重叠元素正在*吞噬*鼠标事件，因此实际列表项无法悬停/单击等。

您可以`mouseover`在列表元素的容器上使用并检查鼠标是在它的上半部分还是下半部分。

我的工作测试是

```
var state = '';
$('div.listaterm').mousemove(function(e){
    var self = $(this),
        position = self.offset(),
        height = self.outerHeight(),
        mouse = e.pageY-position.top,
        inTopHalf = mouse <= (height/2),
        sign = inTopHalf ? '-' : '+';

    if (sign != state){
        state = sign;
        jQuery('.jcarouselcall').jcarouselAutoscroll('stop');
        jQuery('.jcarouselcall').jcarouselAutoscroll({'target': sign+'=1'});
        jQuery('.jcarouselcall').jcarouselAutoscroll('start');
    }
}).mouseout(function(e){
    if (!$(this).find(e.relatedTarget).length && !(e.relatedTarget == this)){
        state='';
        jQuery('.jcarouselcall').jcarouselAutoscroll('stop');
    }
}); 
```

但是您需要使箭头元素不与元素重叠`div.listaterm`。当然，也可以从箭头中删除悬停处理程序..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:34:08.597

您的插件 html 代码应如下所示

```
<a href="#" class="startscroll"><img style="margin-top:60px" src="http://gestyre.com/new/wp-content/themes/gestyre/images/down.png" alt="arriba"></a>

<a href="#" class="stopscroll"><img alt="arriba" src="http://gestyre.com/new/wp-content/themes/gestyre/images/up.png"></a> 
```

CSS：

你应该在你的样式表中添加css

```
.startscroll img
{
   margin-top:60px; // it shifting the down arrow image to the border side
} 
```

第 213 行：http: [//gestyre.com/new/wp-content/themes/gestyre/css/app.css](http://gestyre.com/new/wp-content/themes/gestyre/css/app.css)

```
.startscroll, .stopscroll {
    border: 1px solid red;
    height: 157px;
    position: absolute;
} 
```

请参见下图，其中我在应用上述 css 后使用 fire bug 为演示创建了红色边框。

![在此处输入图像描述](../Images/08e9dc67dbd3ec81a6e39606b35aa0c6.png)

# java - While 循环未完成

> ID：14073750
> 
> 赞同：1
> 
> 时间：2012-12-28T18:04:28.620
> 
> 标签：java, eclipse, while-loop

我对 Java 完全陌生，我从一些简单的控制台应用程序开始。

这是我当前应用程序的代码：

```
Scanner sc = new Scanner(System.in);
boolean ExitLoop = false;
ArrayList<Integer> IDs = new ArrayList<Integer>();
ArrayList<Double> averages = new ArrayList<Double>();
while(!ExitLoop)
{
    System.out.println("StudentID: ");
    IDs.add(sc.nextInt());
    System.out.println("Average: ");
    averages.add(sc.nextDouble());
    System.out.println("Do you want to register another student? [y/n] ");
    ExitLoop = (sc.next() == "n");
} 
```

很抱歉问了这样一个愚蠢的问题，但我真的被困在这个问题上，我点击了“n”，但 while 循环并没有停止，而是继续工作。我做错什么了吗？当用户输入“n”表示否时，我应该怎么做才能完成循环？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T18:05:13.737

一个问题是：

```
sc.next() == "n" 
```

应该

```
sc.next().equals("n") 
```

`String`比较应该使用而不是 == （字符串文字比较除外），并且遵循[java 代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)`equals()`总是更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T18:05:19.603

将其更改为

```
sc.next().equals("n") 
```

除了检查 java 编码约定之外，变量名遵循驼峰式大小写

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T18:09:50.223

试试这个

```
 Scanner sc = new Scanner(System.in);
            boolean ExitLoop = false;
            ArrayList<Integer> IDs = new ArrayList<Integer>();
            ArrayList<Double> averages = new ArrayList<Double>();
            while(!ExitLoop)
            {
                System.out.println("StudentID: ");
                IDs.add(sc.nextInt());
                System.out.println("Average: ");
                averages.add(sc.nextDouble());
                System.out.println("Do you want to register another student? [y/n] ");
                 if(sc.next().equals("n")){
                         ExitLoop = true;
                 }
            } 
```

还要注意，在java中，如果你想通过它们的值来比较字符串，`.equals("somevaluhere")`如果你想比较它们的引用使用`==`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T19:00:33.547

我会谨慎使用 .equals("n") 主要是因为它比较整个字符串。如果用户输入了整个单词“no”怎么办？这也将导致循环的继续。使用您之前使用的 == 运算符没有任何问题，您只需要确定它所比较的​​内容。它适用于 char，而不适用于 char vs String 或 String vs String。对我来说，更好的实现是：

```
exitLoop = sc.next().charAt(0) == 'n'; 
```

甚至更好：

```
exitLoop = (sc.next().charAt(0) == 'n' || sc.next().charAt(0) == 'N'); 
```

此外，现在是开始搞清楚输入验证的好时机。

并且不要忘记关闭扫描仪。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T18:16:08.557

如果用户回答“n”，你想跳出循环，所以你应该写

```
 ExitLoop=sc.next().equals("n"); 
```

请记住，用户可能会回答“N”。上面的方法返回一个布尔变量的布尔值，所以你没问题，你的代码尽可能简单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T19:07:31.217

这将检查输入字符串是否以 n ExitLoop = sc.next().toLowerCase().startsWith("n"); 开头 // 或者您可能想尝试通过执行 ExitLoop = sc.next().toLowerCase().equals("n"); 来忽略大小写

# math - 圆上一点的平移

> ID：14073756
> 
> 赞同：1
> 
> 时间：2012-12-28T18:04:58.797
> 
> 标签：math, geometry

我得到一个半径为 R 的圆，它的中心在点 (0,0) 和一个点 P(x,y)，位于圆上 (x*x+y*y=R*R)。我必须在圆上以 Z 角顺时针方向移动点 P，并找到新点的坐标。有没有任何数学公式可以做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:18:01.630

使用极坐标，您可以得出以下结论。

最初假设笛卡尔坐标中的 (x, y) 是极坐标中的 (r, t)，方法如下

```
x = r * cos(t)
y = r * sin(t) 
```

现在让 (x', y') 成为旋转角度 a 后的新点（逆时针）

```
x' = r * cos(t + a)
y' = r * sin(t + a) 
```

展开它们，你可以得到以下

```
x' = r * cos (t) * cos (a) - r * sin (t) * sin (a) 
y' = r * sin (t) * cos (a) + r * cos (t) * sin (a)

x' = x * cos (a) - y * sin (a)
y' = x * sin (a) + y * cos (a) 
```

现在替换 a = -theta（因为您提到了顺时针方向的 theta），您将获得新点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:08:16.153

使用此类的极坐标或推断三角函数：

感兴趣的方法：

```
 /// <summary>
    /// Returns polar coordinate converted to 2-d cartesian coordinates.
    /// Coordinates are relative to 0,0 of the angle base vertex
    /// </summary>
    public Point Point
    {
      get
      {
        int x = (int)(m_R * Math.Cos(m_Theta));
        int y = (int)(m_R * Math.Sin(m_Theta));
        return new Point(x, y);
      }
    } 
```

全班：

```
 /* NFX by ITAdapter
   * Originated: 2006.01
   * Revision: NFX 0.2  2009.02.10
   */
  using System;
  using System.Collections.Generic;
  using System.Drawing;
  using System.Text;

  namespace NFX.Geometry
  {

    /// <summary>
    /// Represents a point with polar coordinates
    /// </summary>
    public struct PolarPoint
    {

      #region .ctor

        /// <summary>
        /// Initializes polar coordinates
        /// </summary>
        public PolarPoint(double r, double theta)
        {
          m_R = r;
          m_Theta = 0;
          Theta = theta;
        }

        /// <summary>
        /// Initializes polar coordinates from 2-d cartesian coordinates
        /// </summary>
        public PolarPoint(Point center, Point point)
        {
          this = CartesianUtils.PointToPolarPoint(center, point);
        }
      #endregion

      #region Private Fields 
        private double m_R;
        private double m_Theta;

      #endregion

      #region Properties
        /// <summary>
        /// R coordinate component which is coordinate distance from point of coordinates origin
        /// </summary>
        public double R
        {
          get { return m_R; }
          set { m_R = value; }
        }

        /// <summary>
        /// Angular azimuth coordinate component. An angle must be between 0 and 2Pi.
        /// Note: Due to screen Y coordinate going from top to bottom (in usual orientation)
        ///  Theta angle may be reversed, that is - be positive in the lower half coordinate plane.
        /// Please refer to:
        ///  http://en.wikipedia.org/wiki/Polar_coordinates
        /// </summary>
        public double Theta
        {
          get { return m_Theta; }
          set
          {
            if ((value < 0) || (value > Math.PI * 2))
              throw new NFXException("Invalid polar coordinates angle");
            m_Theta = value;
          }
        }

        /// <summary>
        /// Returns polar coordinate converted to 2-d cartesian coordinates.
        /// Coordinates are relative to 0,0 of the angle base vertex
        /// </summary>
        public Point Point
        {
          get
          {
            int x = (int)(m_R * Math.Cos(m_Theta));
            int y = (int)(m_R * Math.Sin(m_Theta));
            return new Point(x, y);
          }
        }
      #endregion

      #region Operators  
        public static bool operator ==(PolarPoint left, PolarPoint right)
        {
          return (left.m_R == right.m_R) && (left.m_Theta == right.m_Theta);
        }

        public static bool operator !=(PolarPoint left, PolarPoint right)
        {
          return (left.m_R != right.m_R) || (left.m_Theta != right.m_Theta);
        }
      #endregion

      #region Object overrides
        public override bool Equals(object obj)
        {
          if (obj is PolarPoint)
           return this==((PolarPoint)obj);
          else
           return false; 
        }

        public override int GetHashCode()
        {
          return m_R.GetHashCode() + m_Theta.GetHashCode();
        }

        public override string ToString()
        {
          return string.Format("Distance: {0}; Angle: {1} rad.", m_R, m_Theta);
        }

      #endregion

    }

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:18:23.973

使用笛卡尔到极坐标公式：

> x = r*cos(θ)
> 
> y = r*sin(θ)

使用弧度并求解起始点和目的地点（您缺少起始点的 theta，而您有目的地点的 delta theta）。

然后转换回笛卡尔：

> r^2 = x^2 + y^2
> 
> r = sqrt(x^2 + y^2)
> 
> theta = arctan(y/x)

可以在[http://tutorial.math.lamar.edu/Classes/CalcII/PolarCoordinates.aspx找到一个很好的参考](http://tutorial.math.lamar.edu/Classes/CalcII/PolarCoordinates.aspx)

# emacs - emacs query-replace 跳转到缓冲区的开头

> ID：14073757
> 
> 赞同：2
> 
> 时间：2012-12-28T18:04:59.400
> 
> 标签：emacs, emacs23

我正在使用 emacs 23.4.1。在大多数情况下，查询替换工作正常，正如预期的那样。但是，有时当我尝试替换缓冲区中间的某些内容并`y`在点后第一次出现时，该点会立即跳转到整个缓冲区的第一次出现。例如：

foo ------- // 开始

bar ------- //在此处使用`foo`替换`bar`

foo ------- //`y`在这里输入，然后跳到开头

这很烦人，我无法使用一些精确的输入来重现这个问题。但是每次出现，关闭emacs再重新打开就可以解决。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T20:45:59.310

另一个观察：我注意到同样的问题，这个点甚至来回跳了好几次。我可以通过使用 (setq semantic-change-hooks nil) 关闭语义更改挂钩来使其消失。语义更改挂钩设置为运行语义编辑更改功能句柄更改。所有这些都发生在语义编辑.el 中，它将语义更改功能添加到更改后功能。简而言之，我不能指出真正的罪魁祸首，但它与语义有关，这也是我最初的怀疑（我猜 jhh 提到了 CEDET）。

注意：除非您愿意放弃一些语义功能，否则关闭语义更改挂钩不是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T10:07:20.710

query-replace 再次显示了在通过按“y”替换文本中间某处的单词后从头开始搜索要替换的单词的烦人行为。

我现在发现：

按 CTRL-space 一次不会改变任何东西，但按 CTRL-space CTRL-space （因此调用此命令两次 -> 激活标记并停用它）使查询替换再次工作。

更新：当问题再次出现时，按两次 C-space 没有帮助。因此，这不是解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T06:49:17.460

只是我今天做了一个观察：我使用的是 Emacs 23.2.1，并且遇到了与上述相同的问题。所以我在使用选项 -q 启动 emacs 时测试了 query-replace。然后它起作用了，所以认为问题的原因是我的“.emacs”。后来我发现以相同的“.emacs”开头的第二个 emacs 实例没有问题，而第一个实例仍然有问题。不幸的是，在使用 CEDET 进行编码、编译和编译一段时间后，问题又出现了。毕竟，我目前也无法重现该问题，也不知道是什么原因造成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T08:13:36.843

query-replace 猜测从哪里开始：

...（如果（和瞬态标记模式标记激活）（区域开始））

为确保mark不在上面，`\C-<SPACE>`在开始时键入，即在当前位置设置mark。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-14T09:09:44.660

如果我设置一个标记（直接在区域之前使用 C 空间，要替换的单词在里面），然后调用 query-replace 命令，它会立即停止而无需替换任何内容。

# javascript - 一个好的 Azure Blob 存储 javascript API？

> ID：14073758
> 
> 赞同：1
> 
> 时间：2012-12-28T18:05:03.893
> 
> 标签：javascript, azure, windows-8, winjs, azure-blob-storage

目前正在用 HTML5/JS 构建一个 Windows 8 应用程序。我需要一个围绕 Windows azure API 的漂亮小包装器来上传二进制数据。

可以自己做，但需要对每个请求进行签名等，所以只需检查是否有我可以使用的良好的自包含 JS 库。

也请不要 jQuery 依赖项！

干杯。

# c - 等效的紧凑型“Switch Case”语句

> ID：14073771
> 
> 赞同：3
> 
> 时间：2012-12-28T18:06:07.107
> 
> 标签：c, function, pointers, switch-statement, function-pointers

我有一个包含数千个或更多独特案例的 switch case 语句。用户很难通过案例编号记住每个案例。所以，我为每种情况使用一个唯一的字符串并对其进行散列以获得给定字符串的选择“sel”：

```
 % Example c code
   sel =hashfunction(string)
   switch (sel) {
     case 0:
          func0(); 

     case 1:
          func1();
     ......
     ......
    case 10000:
         func10000();
   } 
```

但是，此代码变得非常大，因为它必须位于单个文件中，并且还违反了 100 行的编码准则。由于案例到函数调用的唯一映射，我认为我可以在 for 循环中使用指向函数的指针来调用它们。这将比开关盒非常紧凑。非常感谢任何帮助实现这一目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:58:10.637

如果您的每个函数都具有相同的类型和命名约定，并且您使用的是 POSIX，则可以使用动态链接加载器来计算函数的名称以动态调用和执行它。

每个例子：

```
#include <stdio.h>
#include <dlfcn.h>

typedef void (*funcptr)(void);

void func1(void) {
    printf("in func1");
}

void func2(void) {
    printf("in func2");
}

void call_some_func(int sel) { /* where sel is the return val of hashfunction */
    void* dl = dlopen(NULL, RTLD_LAZY);
    if (dl == NULL) { /* handle error */ }

    char sym_name[64];
    snprintf(sym_name, sizeof sym_name, "func%d", sel);

    void* sym = dlsym(dl, sym_name);
    if (sym == NULL) { /* handle error */ }

    ((funcptr)sym)();
} 
```

在这里，调用`call_some_func(1)`会执行`func1()`，等等。

为此，您需要链接`dl`库并导出可执行文件的符号。在海湾合作委员会中：

```
gcc source.c -Wall -ldl -rdynamic 
```

请记住，编译`-rdynamic`会增加可执行文件的大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T19:58:06.880

如果所有情况都是简单的函数调用[希望不调用 func1、func2、func3 等]，那么我相信一个长的 switch 语句是解决这个问题的最干净、最简单的方法。该死的编码标准——在我的书中，它还不够复杂以至于值得做其他事情。

另一种选择是构建一个函数指针数组（PaulR 的建议）：

我假设您的示例对于不带参数的函数是正确的，因此：

```
typedef void (*funcptr)(void);

funcptr funcarr[10000] = { func1, func2, .... func9999, func10000 };
// If coding standard allows 10 initializations on a row, you can even do it 
// in 102 lines. 

sel = hashfunction(string);
funcarr[sel]();   // Calls the function. 
```

# c++ - OpenGL多纹理加载错误

> ID：14073775
> 
> 赞同：1
> 
> 时间：2012-12-28T18:06:31.143
> 
> 标签：c++, opengl, textures

我有一个 Model2D 类，其中包含以下内容：

```
class Model2D
{
    public: //it's private, but I'm shortening it here
    unsigned char* bitmapImage;
    unsigned int textureID;
    int imageWidth, imageHeight;

    void Load(char* bitmapFilename);
}
void Model2D::Load(char* bitmapFilename)
{
    ifstream readerBMP;
    readerBMP.open(bitmapFilename, ios::binary);
    //I get the BMP header and fill the width, height

    bitmapImage = new GLubyte[imageWidth * imageHeight * 4];
    //Loop to read all the info in the BMP and fill the image array, close reader

    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

    glGenTextures(1, &textureID);
    glBindTexture(GL_TEXTURE_2D, textureID);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, imageWidth, imageHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, bitmapImage);
}
void Model2D::Draw()
{
    glBegin(GL_QUADS);          
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);
    glBindTexture(GL_TEXTURE_2D, textureID);

    float texScale = 500.0; //this is just so I don't have to resize images

    glTexCoord2f(0.0, 0.0); glVertex3f(-(imageWidth / texScale), -(imageHeight / texScale), 0.0);
    glTexCoord2f(0.0, 1.0); glVertex3f(-(imageWidth / texScale), (imageHeight / texScale), 0.0);
    glTexCoord2f(1.0, 1.0); glVertex3f((imageWidth / texScale), (imageHeight / texScale), 0.0);
    glTexCoord2f(1.0, 0.0); glVertex3f((imageWidth / texScale), -(imageHeight / texScale), 0.0);    
} 
```

在我的主循环中，我有：

```
Model2D spritest;
spritest.LoadFromScript("FirstBMP.bmp");
spritest.Z(-5); spritest.X(-2);

Model2D spritest2;
spritest2.LoadFromScript("SecondBMP.bmp");
spritest2.X(+2); spritest2.Z(-6);

//...
//main loop
spritest.Draw();
spritest2.Draw(); 
```

调试时似乎工作正常，位图的地址不同，OpenGL生成的纹理ID也不同，它们也被正确调用，调试时X，Y和Z位置也正确，但由于某些未知原因，**spritest**图像数据被**sprites2**覆盖。即使我不从**sprites2**调用 Draw() ，也会显示图像而不是**spritest**。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:35:02.923

`glBegin`必须在您的纹理绑定功能之后`Draw`：

```
glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);
glBindTexture(GL_TEXTURE_2D, textureID);
glBegin(GL_QUADS); 
```

在[glBindTexture](http://www.opengl.org/sdk/docs/man/xhtml/glBindTexture.xml)的文档中它指出：

> 当纹理绑定到目标时，该目标的先前绑定会自动中断。

您还会发现在[glBegin](http://www.opengl.org/sdk/docs/man2/xhtml/glBegin.xml)的文档中指出：

> `glBegin`在和之间只能使用 GL 命令的子集`glEnd`。命令是`glVertex`, `glColor`, `glSecondaryColor`, `glIndex`, `glNormal`, `glFogCoord`, `glTexCoord`, `glMultiTexCoord`, `glVertexAttrib`, `glEvalCoord`, `glEvalPoint`, `glArrayElement`, `glMaterial`, 和`glEdgeFlag`. 此外，使用`glCallList`或`glCallLists`执行仅包含上述命令的显示列表也是可以接受的。`glBegin`如果在和之间执行任何其他 GL 命令`glEnd`，则设置错误标志并忽略该命令。

因此，在您的`Draw`功能中，您将需要放置`glBindTexture(GL_TEXTURE_2D, textureID);`and `glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);`before `glBegin(GL_QUADS)`。否则，`glBindTexture`什么都不做，因为它在 a 内`glBegin`，因此`SecondBMP.bmp`仍然绑定到目标`GL_TEXTURE_2D`

# ruby-on-rails - 重构资源规范，想要对不同的角色进行分组（rspec-rails）

> ID：14073778
> 
> 赞同：0
> 
> 时间：2012-12-28T18:06:46.550
> 
> 标签：ruby-on-rails, rspec

我真的希望你能帮我重构这个：

```
context "a deactivated resource" do
    before(:each)
        @resource = FactoryGirl.create(:deactivatedresource)
    end
    it "does not show in the search (as registred User)" do
        as_user # does the log in 
        visit path_to_search_page
        page.should_not have_content @resource.name
    end
    it "is visible to the resource owner" do
        as_resource_owner(@resource) 
        visit path_to_search_page
        page.should_have content @resource.name         
    end
    it "as unregistred user" do
        as_unregistred_user  # checks for log out and logs out if necessary
        visit path_to_search_page
        page.should_not have_content @resource.name         
    end 
```

我真的很想将`visit`and`should(not) have`部分放在 en extra`after(:each)`块中，但这会产生令人讨厌的输出。你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:19:11.773

我认为重构没有多大意义。不过，您可以将路径和内容提取到过滤器（或让）之前的实例变量中，以便从一个地方进行控制。另外，我不喜欢您对规格的描述-使其更具可读性并以一种样式编写。

# mysql - 如何编写 MySQL 查询

> ID：14073779
> 
> 赞同：1
> 
> 时间：2012-12-28T18:06:46.693
> 
> 标签：mysql, join, distinct

我在 MySQL 数据库中有这个表。

```
-----------------tests---------------
----athleteId----eventId----score----
----129907-------1----------900------
----129907-------2----------940------
----129907-------3----------927------
----129907-------4----------856------
----328992-------1----------780------
----328992-------2----------890------
----328992-------3----------936------
----328992-------4----------864------
----492561-------1----------899------
----492561-------2----------960------
----492561-------3----------840------
----492561-------4----------920------
----487422-------5----------900------
----487422-------6----------940------
----487422-------7----------927------
----629876-------5----------780------
----629876-------6----------890------
----629876-------7----------940------
----138688-------5----------899------
----138688-------6----------950------
----138688-------7----------840------
------------------------------------- 
```

我想要这个输出。

```
---------------output----------------
----eventId----athleteId----score----
----1----------129907-------900------
----2----------492561-------960------
----3----------328992-------936------
----4----------//////-------///------
----5----------487422-------900------
----6----------138688-------950------
----7----------629876-------940------ 
```

我们通过此查询部分解决了问题，但我希望每个 eventId 只有 1 个不同的运动员 ID。目前，如果 2 个项目的最佳表现由同一运动员完成，则该运动员将出现在输出中两次。如果发生这种情况，我需要出现表现第二好的运动员而不是第一名。

缩短：一名运动员不能在结果中出现两次。

```
SELECT athleteId, a.eventId, a.score
FROM tests AS a
JOIN (
-- This select finds the top score for each event
SELECT eventId, MAX(score) AS score
FROM tests 
GROUP BY eventId
) AS b
-- Join on the top scores
ON a.eventId = b.eventId
AND a.score = b.score 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:50:10.890

以下是如何在调用者代码中执行此操作（本例中为 PHP）。

使用查询：

```
SELECT athleteId, eventId, score
FROM tests
ORDER BY score DESC; 
```

然后使用下面的代码来处理查询的结果（我跳过所有的样板来执行查询）：

```
$events = array(); // Remember events reported
$athletes = array(); // Remember athletes listed

while ($row = mysqli_fetch_assoc($results)) {
  if (isset($events[$row['eventId']]) || isset($athletes[$row['athleteId']])) {
     continue;
  }
  $events[$row['eventId']] = true;
  $athletes[$row['athleteId']] = true;
  print_row($row);
} 
```

# cocos2d-iphone - Cocos2d 中的旋转裁剪节点

> ID：14073785
> 
> 赞同：4
> 
> 时间：2012-12-28T18:06:59.293
> 
> 标签：cocos2d-iphone, clipping, ccnode

我在这里使用剪辑节点：http: [//www.learn-cocos2d.com/2011/01/cocos2d-gem-clippingnode](http://www.learn-cocos2d.com/2011/01/cocos2d-gem-clippingnode)

ClippingNode.h

```
#import "cocos2d.h"
@interface ClippingNode : CCNode {
    CGRect clippingRegionInNodeCoordinates;
    CGRect clippingRegion;
}
@property (nonatomic) CGRect clippingRegion;
@end 
```

ClippingNode.m

```
#import "ClippingNode.h"

@interface ClippingNode (PrivateMethods)
-(void) deviceOrientationChanged:(NSNotification*)notification;
@end

@implementation ClippingNode
-(CGRect) clippingRegion {
    return clippingRegionInNodeCoordinates;
}

-(void) setClippingRegion:(CGRect)region {

    // keep the original region coordinates in case the user wants them back unchanged
    clippingRegionInNodeCoordinates = region;
    self.position = clippingRegionInNodeCoordinates.origin;
    self.contentSize = clippingRegionInNodeCoordinates.size;

    // convert to retina coordinates if needed
    region = CC_RECT_POINTS_TO_PIXELS(region);

    // respect scaling
    clippingRegion = CGRectMake(region.origin.x * scaleX_, region.origin.y * scaleY_,
                            region.size.width * scaleX_, region.size.height * scaleY_);
}

-(void) setScale:(float)newScale {
    [super setScale:newScale];
    // re-adjust the clipping region according to the current scale factor
    [self setClippingRegion:clippingRegionInNodeCoordinates];
}

-(void) deviceOrientationChanged:(NSNotification*)notification {
    // re-adjust the clipping region according to the current orientation
    [self setClippingRegion:clippingRegionInNodeCoordinates];
}

-(void) visit {

    glEnable(GL_SCISSOR_TEST);
    CGPoint worldPosition = [self convertToWorldSpace:CGPointZero];
    const CGFloat s = [[CCDirector sharedDirector] contentScaleFactor];
    glScissor((clippingRegion.origin.x) + (worldPosition.x*s), (clippingRegion.origin.y) + (worldPosition.y*s),
          (clippingRegion.size.width), (clippingRegion.size.height));

    [super visit];

    glDisable(GL_SCISSOR_TEST);

}
@end 
```

但是，我需要剪辑一个旋转的 CCNode。关于如何完成这样的任务的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T23:28:06.807

用这个替换ClippingNode类中的访问方法

```
-(void) visit
{

    float rotationAngle = 15;

    glPushMatrix();

    CCRenderTexture* renderTexture = [[CCRenderTexture renderTextureWithWidth:512 height:512] retain];

    glEnable(GL_SCISSOR_TEST);
    glScissor(0, 0, clippingRegion.size.width, clippingRegion.size.height);

    [renderTexture begin];

    glPushMatrix();
    glRotatef(rotationAngle, 0, 0, 1);
    glTranslatef(-clippingRegion.origin.x, -clippingRegion.origin.y, 0);

    [super visit];

    glPopMatrix();

    [renderTexture end];

    glDisable(GL_SCISSOR_TEST);

    renderTexture.sprite.position = CGPointMake(clippingRegion.origin.x , clippingRegion.origin.y);
    renderTexture.sprite.anchorPoint = CGPointMake(0, 1);
    renderTexture.sprite.rotation = rotationAngle;
    [renderTexture.sprite visit];

    [renderTexture release];

    glPopMatrix();
} 
```

基本上它创建了一个纹理来渲染 ClippingNode 内容

然后平移场景，使剪辑区域的原点现在位于 (0,0)

通过rotationAngle 旋转整个场景

启用剪刀

渲染场景

平移、旋转和渲染包含纹理的精灵

![在此处输入图像描述](../Images/a4f4d42dfaaba937742931e8c58d9c6d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:58:48.433

它只需要 CCRenderTexture 即可完成工作。任何建议将不胜感激。

ClippingNode.h

```
#import "cocos2d.h"
@interface ClippingNode : CCNode
@property (nonatomic, assign) CGSize clippingSize;
@end 
```

ClippingNode.m

```
#import "ClippingNode.h"
@interface ClippingNode()
@property (nonatomic, strong) CCRenderTexture * renderTexture;
@property (nonatomic, strong) CCSprite * clippedSprite;
@end

@implementation ClippingNode
@synthesize renderTexture;
@synthesize clippedSprite;
@synthesize clippingSize;

- (void) setClippingSize:(CGSize)newClippingSize {

    //assignment
    clippingSize = newClippingSize;

    //set contentSize
    self.contentSize = clippingSize;

    //configure renderTexture
    self.renderTexture = [CCRenderTexture renderTextureWithWidth:clippingSize.width height:clippingSize.height];
    renderTexture.contentSize = CGSizeMake(clippingSize.width, clippingSize.height);

    //configure the renderTexture sprite
    self.clippedSprite = [CCSprite spriteWithTexture:renderTexture.sprite.texture];
    clippedSprite.position = self.position;
    clippedSprite.rotation = rotation_;
    clippedSprite.scaleY = -1;
}

- (void)visit {
    [renderTexture beginWithClear:0 g:0 b:0 a:1];
    [super visit];
    [renderTexture end];

    [clippedSprite visit];
}

@end 
```

用法：

```
CCSprite * spriteImage = ...;
spriteImage.position = ccp(0,0);
spriteImage.anchorPoint = ccp(0.5,0.5);

//configure clipping Node
self.clippingNode = [ClippingNode node];
clippingNode.position = ccp(size.width * 0.5f, size.height * 0.5f);
clippingNode.anchorPoint = ccp(0.5f, 0.5f);
clippingNode.rotation = -10.0f;

//configure clipping region
[clippingNode setClippingSize:CGSizeMult(spriteImage.boundingBox.size, 1.5f)];

//add content to the clipping node
[clippingNode addChild:spriteImage] 
```

# css - 带有第三个子菜单的 CSS 水平菜单垂直显示

> ID：14073786
> 
> 赞同：1
> 
> 时间：2012-12-28T18:07:00.783
> 
> 标签：css

该菜单是一个多级水平菜单。我正在尝试使第 3 级子菜单变为垂直（第 1 和第 2 级将保持水平）

因此，如果我将鼠标悬停在产品上，它会水平列出硬盘、显示器和扬声器……。但是，当我将扬声器悬停时，它现在应该像下拉列表一样垂直列出 10 Walt、20 Walt...。

这可以做到吗？请帮忙。

```
<style>
    /**
     * horizontal navigation (SO)
     */
    body {
        background: url('.jpg') 50% 50%;
    }

    /* Targeting both first and second level menus */

    #nav {position: relative;}
    #nav li {
        list-style:none;
        float: left;
    }
    #nav li a {
        display: block;
        padding: 8px 12px;
        text-decoration: none;
    }
    #nav li a:hover {
        background-color:red;
        color:#FFF;
        opacity:1;
    }

    /* Targeting the first level menu */
    #nav {  
        top:150px;
        min-width:850px;
        background:#fff;
        opacity:0.5;
        display: block;
        height: 34px;
        z-index: 100;
        position: absolute;
    }
    #nav > li > a {
    }

    /* Targeting the second level menu */
    #nav li ul {
        color: #333;
        display: none;
        position: absolute; 
        width:850px;
    }
    #nav li ul li {
        display: inline;
    }
    #nav li ul li a {
        background: #fff;
        border: none;
        line-height: 34px;
        margin: 0;
        padding: 0 8px 0 10px;
    }
    #nav li ul li a:hover {
        background-color:red;
        color:#FFF;
        opacity:1;
    }

    /* Third level menu */
    #nav li ul li ul{
        top: 0;
    }
    ul.child {
    background-color:#FFF;  
    }
    /* A class of current will be added via jQuery */
    #nav li.current > a {
        background: #f7f7f7;
        float:left;
    }
    /* CSS fallback */
    #nav li:hover > ul.child {
        left:0;
        top:34px;
        display:inline;
        position:absolute;
        text-align:left;
    }
    #nav li:hover > ul.grandchild  {
        display:block;
    }

</style>

<!-- content to be placed inside <body>…&lt;/body> -->
<ul id="nav">
    <li><a href="#">Home</a></li>
    <li>
        <a href="#">Products</a>
        <ul class="child">
            <li><a href="#">Hard Drives</a></li>
            <li><a href="#">Monitors</a></li>
            <li><a href="#">Speakers</a>
                <ul class="child">
                    <li><a href="#">10 watt</a></li>
                    <li><a href="#">20 watt</a></li>
                    <li><a href="#">30 watt</a></li>
                </ul>
            </li>
            <li><a href="#">Random Equipment</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Services</a>
        <ul class="child">
            <li><a href="#">Repairs</a></li>
            <li><a href="#">Installations</a></li>
            <li><a href="#">Setups</a></li>
        </ul>
    </li>
    <li><a href="#">About</a></li>
    <li><a href="#">Contact</a></li>
</ul> 
```

**jsFiddle 演示：http:** [//jsfiddle.net/fJQ59/](http://jsfiddle.net/fJQ59/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:23:02.370

添加到您的风格以下代码

```
#nav li ul li ul li { display: block; float: none; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:23:55.693

这是您的起点：

## HTML

```
​&lt;ul>
  <li>
    Option One
    <ul>
      <li>
        Second Row One
        <ul>
          <li>
            Third Row One
          </li>
          <li>
            Third Row Two
          </li>
          <li>
            Third Row Three
          </li>
        </ul>
      </li>
      <li>
        Second Row Two
      </li>
      </ul>   
  </li>
  <li>
    Option Two
  </li>
  <li>
    Option Three
  </li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

## CSS

```
ul {
  width: 600px;
  list-style-type: none;
}
ul > li,
ul > li > ul > li {
  position: relative;
  float: left;
  padding: 3px 5px;
  margin: 10px 5px;
  cursor: pointer;
}

/*****************************
This next line is the key to
making the third row vertical:
******************************/
ul ul ul li {
  float: none;
}

li > ul {
  display: none;
}
li:hover > ul {
  position: absolute;
  display: block;
  width: 600px;
} 
```

[**​在 JSFiddle 上**](http://jsfiddle.net/YyWUj/)查看[](http://jsfiddle.net/YyWUj/)

# c++ - 在套接字之间发送消息

> ID：14073792
> 
> 赞同：2
> 
> 时间：2012-12-28T18:07:40.787
> 
> 标签：c++, qt, sockets

我有 1 台在 Unix 中使用 C++ 和 c 套接字构建的服务器。客户端正在使用 QT 和它附带的套接字 api。

服务器向客户端发送 345 字节的数据。

从服务器发送消息：

```
void Moderator::testSynch(){
  int type = (int) SYNCRHONIZE_M;
  //Update all connected clients with info about other clients
  for(int i = 0; i<nrOfClients_; i++){
    const TcpSocket &clientSocket = clients_[i].getSocket();
    int clientID = clients_[i].getID();

    int tempType = htonl(type);
    int tempClientID = htonl(clientID);
    int tempNrOfClients = htonl(funNrOfClients);

    clientSocket.writeData((const char*) &tempType, sizeof(tempType));
    clientSocket.writeData((const char*) &tempClientID, sizeof(tempClientID));
    clientSocket.writeData((const char*) &tempNrOfClients, sizeof(tempNrOfClients));

    for(int j = 0; j<nrOfClients; j++){ //Send info about connectecd clients

        int tempLength = (int) clients_[j].getName().length();
        int tempID = clients_[j].getID();
        string tempName = clients_[j].getName();

        tempID = htonl(tempID);
        tempLength = htonl(tempLength);
        clientSocket.writeData((const char*) &tempID, sizeof(tempID));
        clientSocket.writeData((const char*) &tempLength, sizeof(tempLength));
        clientSocket.writeData(tempName.c_str(), (int)tempName.length());

    }
  }
}

bool TcpSocket::writeData(const char* buffer, int length)const{
  size_t bytesLeft = length;
  ssize_t bytesWritten = 0;

  while((bytesWritten = write(socketFD_, buffer, bytesLeft)) > 0){
    bytesLeft -= bytesWritten;
    buffer += bytesWritten;
  }
  return bytesLeft == 0;
} 
```

在客户端读取消息：

```
 void ChatClient::readMessage(Message &message){

 if(socket_->readData((char*) &type, sizeof(type))){
   if(type == SYNCRHONIZE_M){
        int nrOfUsers = 0;

        socket_->readData((char*) &ID_, sizeof(ID_)); //Set the client ID that server gave us
        socket_->readData((char*) &nrOfUsers, sizeof(nrOfUsers));

        ID_ = ntohl(ID_);
        nrOfUsers = ntohl(nrOfUsers);
        qDebug("%s=%d", "nrOfUsers", nrOfUsers);
        message.setMessageType(SYNCRHONIZE_M);
        messageOK = true;
        for(int i = 0; i<nrOfUsers; i++){ //Update client with all connected users to server
            int userID = 0;
            int nameLength = 0;

            socket_->readData((char*) &userID, sizeof(userID));
            socket_->readData((char*) &nameLength, sizeof(nameLength));

            userID = ntohl(userID);
            nameLength = ntohl(nameLength);

            if(nameLength > 0){
                qDebug("%s=%d", "nameLength", nameLength);
                buffer = new char[nameLength];
                socket_->readData(buffer, nameLength);

                message.addUser(ConnectedUser(buffer, nameLength, userID));
                delete [] buffer;
            }
        }
    }
}
}

bool TcpSocket::readData(char* buffer, int length){
    int bytesLeft = length;
    int bytesRead = 0;

    while((bytesRead = qSocket_->read(buffer, bytesLeft)) > 0){
       bytesLeft -= bytesRead;
       buffer += bytesRead;

    }
    return bytesLeft == 0;
} 
```

我遇到的问题是有时无法立即获得来自服务器的整个消息。

例如，前 45 个字节在客户端中可用。然后客户端尝试读取整个消息（345 字节），这会导致奇怪的行为。客户端读取完下一个 300 字节后立即可用。

在套接字之间发送消息的最佳方式是什么？另外，如何确定是否已收到整个消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T01:04:32.130

你有一些只存在于你脑海中的“信息”的概念。您的代码中没有任何内容反映了这一点。如果您有一个涉及发送“消息”的应用程序协议，那么您需要编写代码以发送*消息*和代码以根据您的协议对消息的定义来接收消息*。*TCP 仅提供字节流，并且不会将它们粘合在一起以供应用程序使用大于一个字节的内容。

# c++ - printf hacking的格式字符串

> ID：14073793
> 
> 赞同：0
> 
> 时间：2012-12-28T18:07:41.770
> 
> 标签：c++, string-formatting

这是出于有用（非恶意）目的而进行的黑客攻击，我不确定我想要做什么，但我想尝试一下。我正在运行封闭源代码的软件，因此我无法修改原始函数调用。电话是：

```
sprintf(string, this->LabelFormat, value) 
```

并且`this->LabelFormat`是`%-#6.3g`默认的。目的是为双打图例格式化标签，`value`数字也是如此。

我可以设置`this->LabelFormat`任何我想要的。我想执行从数字到字符串的映射，例如：

```
value | string
--------------
  0.0 | None
  1.0 | I
  2.0 | J
  3.0 | K 
```

等等。**由于我无法修改原始代码，是否可以操纵格式字符串为我执行指定的映射？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T18:25:45.807

[API Hooking 可以满足](http://www.codeproject.com/Articles/30140/API-Hooking-with-MS-Detours)您的需求

> **API 挂钩**包括拦截程序中的函数调用并将其重定向到另一个函数。通过这样做，可以修改参数，如果您选择在真正应该成功的情况下返回错误代码，则可以欺骗原始程序，等等。所有这些都是在调用真正的函数之前完成的，最后在修改/存储/扩展原始函数/参数之后，将控制权交还给原始函数，直到再次调用它。

在将控制权交给函数之前，您必须使用 sprintf拦截对函数的*原始调用并用所需的值覆盖 。*`this->LabelFormat`

更多信息，请访问[Detours - Microsoft Research](http://research.microsoft.com/en-us/projects/detours/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:45:24.057

`value`如果您在设置之前可以访问，`LabelFormat`那么您所要做的就是设置`LabelFormat`您想要显示的字符串（根本没有任何`%`代码）。然后该函数将忽略额外的参数，但它会打印您想要的内容。如果您也没有访问权限，`value`那么我看不到任何仅使用格式代码进行映射的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:12:42.527

我认为仅使用格式字符串是不可能的。您应该在某处添加额外的机器指令。例如，您可以`sprintf`用自己的函数替换函数。

# c# - 获取 WebBrowser .Url 属性时出现访问冲突运行时错误

> ID：14073797
> 
> 赞同：0
> 
> 时间：2012-12-28T18:07:54.327
> 
> 标签：c#, outlook, add-in

尝试在我正在编写的 Outlook 加载项中获取 WebBrowser 的 .Url 属性时出现“访问冲突”运行时错误。需要一些帮助来解决这个问题。研究表明我可能需要设置“FullTrust”权限集，但没有成功。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Security;
using System.Security.Permissions;

namespace MyAddin1
{

public partial class authForm : Form
{

    public string currentUrl;

    public authForm()
    {
        InitializeComponent();
    }

    private void formLoaded(object sender, EventArgs e)
    {
        WebBrowser browser = new WebBrowser();
        browser.Location = new System.Drawing.Point(0, 0);
        browser.Width = 870;
        browser.Height = 510;
        browser.Navigate("https://www.yammer.com/dialog/oauth?client_id=<redacted>&response_type=token");
        browser.Show();

        //runtime error occurs on following line
        currentUrl = browser.Url.ToString();

        browser.Url = new Uri("http://www.yahoo.com");

        browser.Navigated += new WebBrowserNavigatedEventHandler(checkForToken);

        this.Controls.Add(browser);
    }

    private void checkForToken(object sender, EventArgs e)
    {
        MessageBox.Show(currentUrl);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:19:59.543

`browser.Url`最初为空，更改您的代码如下。

```
if (browser.Url != null)
{
    currentUrl = browser.Url.ToString();
} 
```

# delphi - IdUDPServer 发送标头校验和为 0x00

> ID：14073799
> 
> 赞同：1
> 
> 时间：2012-12-28T18:08:00.997
> 
> 标签：delphi, indy, delphi-xe3

我正在用一个众所周知的服务器制作一个简单的 UDP P2P 聊天程序。客户端通过单个 IdUDPServer 从服务器和客户端发送和接收数据。

客户端现在可以登录和注销，即他们可以向服务器发送数据。每当服务器发送任何数据时，它都会被丢弃在节点的 NIC 端，因为正如wireshark 通知的那样，嵌入式 ip 标头校验和为 0x00。

### IdUDPServer 设置（客户端/服务器）

主动：真

绑定：

广播：假

缓冲区大小：8192

默认端口：10000

IPVersion：Id_IPv4

线程事件：假

### 使用的命令

仅使用一个命令

UDPServer.SendBuffer（ED_Host.Text，StrToInt（ED_Port.Text），缓冲区）；

类似的配置在我的另一个程序中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:19:10.730

Most NICs will perform checksum validation and generation these days instead of the os network stack. This is to improve performance and is known as checksum offloading. As such wiresshark will report the fact the checksum is missing as an error but it can usually be ignored or the error turned off in the wire shark settings.

Some NIC drivers allow you to turn off checksum offloading. Try this and retest the code

# jquery - 循环自动旋转图像

> ID：14073800
> 
> 赞同：0
> 
> 时间：2012-12-28T18:08:03.133
> 
> 标签：jquery, css

我想像加载器动画 GIF 一样旋转图像。

我`<img>`在 html 中有标签，我的 Jquery 代码是这样的：

```
setInterval(
    function () {
        $('#at_ex1').animate({rotate: '+=10deg'}, 0);
    },
    200
); 
```

但不能正常工作。如何在循环中在 Jquery 和 CSS3 中使用此方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:10:52.543

看看这个小提琴，我怀疑它完全符合你的要求。

[http://code.google.com/p/jqueryrotate/wiki/Examples](http://code.google.com/p/jqueryrotate/wiki/Examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T11:32:57.193

var $elie = $("img"), degree = 0, timer;

```
function rotate() {

    $elie.css({ WebkitTransform: 'rotate(' + degree + 'deg)'});
    $elie.css({ '-moz-transform': 'rotate(' + degree + 'deg)'});
    timer = setTimeout(function() {
        ++degree; rotate();
    },100);
} 
```

# ruby-on-rails - Devise + Backbone.js，无法创建新用户

> ID：14073801
> 
> 赞同：1
> 
> 时间：2012-12-28T18:08:11.150
> 
> 标签：ruby-on-rails, backbone.js, devise

寄存器视图由主干呈现。当我提交表单以注册新用户时，我收到了这样的错误。

![在此处输入图像描述](../Images/b199df2d93afd71aeb11426e0970d410.png)

我知道它会检查电子邮件是否存在。但我不知道为什么我发布了所有属性，但后端似乎没有得到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:24:19.080

我猜你的控制器正在寻找`params[:user]`用户的信息，但你`:user`的`params`. [该手册](http://backbonejs.org/#FAQ-rails)谈到了这一点：

> **使用 Rails**
> [...]
> 同样，Backbone PUT 和 POST 直接使用 JSON 表示模型，默认情况下 Rails 需要命名空间属性。您可以让您的控制器直接从 中过滤属性`params`，或者您可以在 Backbone 中覆盖 toJSON 以添加 Rails 期望的额外包装。

因此，调整您的控制器以查看`params`而不是内部的某些东西，`params`或者调整您的 Backbone 模型`toJSON`看起来像这样：

```
toJSON: function() {
    return { user: _.clone(this.attributes) };
} 
```

如果您进行更改`toJSON`，您需要调整向模板提供数据的方式，以补偿`toJSON`返回值的变化。

# ruby - 该规范将如何通过

> ID：14073805
> 
> 赞同：0
> 
> 时间：2012-12-28T18:08:42.577
> 
> 标签：ruby, rspec

我遇到了一个失败的 github 规范，当我正在学习如何编写规范时，我修复了其中两个在最后一个中失败的问题，并附上评论#这个仍然失败。如何让它通过？

```
class Team
  attr_reader :players
  def initialize
    @players = Players.new
  end
end

class Players
  def initialize
    @players = ["","Some Player",""]
  end
  def size
    @players.size
  end
  def include? player
    raise "player must be a string" unless player.is_a?(String)
    @players.include? player
  end
end

describe "A new team" do

  before(:each) do
    @team = Team.new
  end

  it "should have 3 players (failing example)" do
    @team.should have(3).players
  end

  it "should include some player (failing example)" do
    @team.players.should include("Some Player")
  end

  #THIS ONE IS STILL FAILING
  it "should include 5 (failing example)" do
    @team.players.should include(5)
  end

  it "should have no players"

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:21:55.787

我假设目的是修改规范，而不是修改代码以通过规范。

在这种情况下，我们实际上并不期望`@team.players`包含 5；相反，我们希望它在被问及它是否包含非字符串时引发异常。这可以写成如下：

```
 it "should raise an exception when asked whether it includes an integer" do
    expect {
      @team.players.should include(5)
    }.to raise_exception
  end 
```

要检查异常类型和消息，请使用`raise_exception(RuntimeError, "player must be a string")`.

您可能应该类似地修改其他两个规范的描述，因为它们不再失败。

# python - 如何在微调器中允许无限整数值？

> ID：14073807
> 
> 赞同：3
> 
> 时间：2012-12-28T18:08:57.493
> 
> 标签：python, kivy

我需要一个[`Spinner`](http://en.wikipedia.org/wiki/Spinner_%28computing%29)小部件，用户可以在其中选择具有特定步骤且没有下限或上限的**整**数值（我的意思是，它们应该至少在十亿范围内，因此没有机会记住整个序列）。

我看到了 kivy 的[`Spinner`](http://kivy.org/docs/api-kivy.uix.spinner.html)小部件，但我不认为做类似的事情`Spinner(values=itertool.count())`会奏效。它也仅限于字符串值。

有什么简单的方法可以获取类似于[`QSpinBox`](http://doc.qt.digia.com/qt/qspinbox.html)of 的东西`Qt`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:41:39.970

目前似乎 kivy 没有提供任何类似于 a`Spinner`或`SpinBox`您想要调用它的东西。可能会使用的小部件是，[`Slider`](http://kivy.org/docs/api-kivy.uix.slider.html)但它看起来很糟糕，如果你想允许一个非常大的范围但只有一小步，它就不是那么有用。

因此，我编写了自己的 a 实现`SpinBox`：

```
class SpinBox(BoxLayout):
    """A widget to show and take numeric inputs from the user.

    :param min_value: Minimum of the range of values.
    :type min_value: int, float
    :param max_value: Maximum of the range of values.
    :type max_value: int, float
    :param step: Step of the selection
    :type step: int, float
    :param value: Initial value selected
    :type value: int, float
    :param editable: Determine if the SpinBox is editable or not
    :type editable: bool
    """

    min_value = NumericProperty(float('-inf'))
    max_value = NumericProperty(float('+inf'))
    step = NumericProperty(1)
    value = NumericProperty(0)
    range = ReferenceListProperty(min_value, max_value, step)

    def __init__(self, btn_size_hint_x=0.2, **kwargs):
        super(SpinBox, self).__init__(orientation='horizontal', **kwargs)

        self.value_label = Label(text=str(self.value))
        self.inc_button = TimedButton(text='+')
        self.dec_button = TimedButton(text='-')

        self.inc_button.bind(on_press=self.on_increment_value)
        self.inc_button.bind(on_time_slice=self.on_increment_value)
        self.dec_button.bind(on_press=self.on_decrement_value)
        self.dec_button.bind(on_time_slice=self.on_decrement_value)

        self.buttons_vbox = BoxLayout(orientation='vertical',
                                      size_hint_x=btn_size_hint_x)
        self.buttons_vbox.add_widget(self.inc_button)
        self.buttons_vbox.add_widget(self.dec_button)

        self.add_widget(self.value_label)
        self.add_widget(self.buttons_vbox)

    def on_increment_value(self, btn_instance):
        if float(self.value) + float(self.step) <= self.max_value:
            self.value += self.step

    def on_decrement_value(self, btn_instance):
        if float(self.value) - float(self.step) >= self.min_value:
            self.value -= self.step

    def on_value(self, instance, value):
        instance.value_label.text = str(value) 
```

实际上我使用的代码略有不同，因为我认为子类化布局来实现小部件是丑陋的，因此我子类化`Widget`并添加了一个水平`BoxLayout`作为唯一的子级`Widget`，然后我`bind`编辑每个大小和位置更改以更新大小和位置这个孩子的（见[这个](https://stackoverflow.com/questions/14029010/why-does-the-root-widget-not-have-the-same-size-of-the-window)问题为什么我必须这样做）。

它是允许长按`TimedButton`的子类，当长按时，每隔一定的毫秒发出一个事件（因此用户将能够按住按钮进行连续递增）。如果需要，您可以简单地使用法线，删除s 到事件。`Button``on_time_slice``Button``bind``on_time_slice`

`TimedButton`源代码是这样的：

```
class TimedButton(Button):
    """A simple ``Button`` subclass that produces an event at regular intervals
    when pressed.

    This class, when long-pressed, emits an ``on_time_slice`` event every
    ``time_slice`` milliseconds.

    :param long_press_interval: Defines the minimum time required to consider
                                the press a long-press.
    :type long_press_interval: int
    :param time_slice: The number of milliseconds of each slice.
    :type time_slice: int
    """

    def __init__(self, long_press_interval=550, time_slice=225, **kwargs):
        super(TimedButton, self).__init__(**kwargs)

        self.long_press_interval = long_press_interval
        self.time_slice = time_slice

        self._touch_start = None
        self._long_press_callback = None
        self._slice_callback = None

        self.register_event_type('on_time_slice')
        self.register_event_type('on_long_press')

    def on_state(self, instance, value):
        if value == 'down':
            start_time = time.time()
            self._touch_start = start_time

            def callback(dt):
                self._check_long_press(dt)

            Clock.schedule_once(callback, self.long_press_interval / 1000.0)
            self._long_press_callback = callback
        else:
            end_time = time.time()
            delta = (end_time - (self._touch_start or 0)) * 1000
            Clock.unschedule(self._slice_callback)
            # Fixes the bug of multiple presses causing fast increase
            Clock.unschedule(self._long_press_callback)
            if (self._long_press_callback is not None and
                delta > self.long_press_interval):
                self.dispatch('on_long_press')
            self._touch_start = None
            self._long_press_callback = self._slice_callback = None

    def _check_long_press(self, dt):
        delta = dt * 1000
        if delta > self.long_press_interval and self.state == 'down':
            self.dispatch('on_long_press')
            self._long_press_callback = None

            def slice_callback(dt):
                self.dispatch('on_time_slice')
                return self.state == 'down'

            Clock.schedule_interval(slice_callback, self.time_slice / 1000.0)

            self._slice_callback = slice_callback

    def on_long_press(self):
        pass

    def on_time_slice(self):
        pass 
```

请注意，我必须绑定`state`属性而不是使用`on_touch_down`，`on_touch_up`因为它们会产生一些[奇怪的行为](https://stackoverflow.com/questions/14074979/bind-working-at-random-times)，即使在“工作”时也会无缘无故地发生一些奇怪的事情（例如，`on_increment`即使`bind`在正确的地方单击导致调用的减量按钮）。

* * *

**编辑：**更新了`TimedButton`修复一个小错误的类（以前的实现在快速单击多次然后按住按钮会产生太多`on_time_slice`事件：我忘了“取消计划”`_long_press_callback`状态何时发生`'normal'`

# iphone - 如何使 NSExpression 的 expressionForFunction:withArguments: 尊重获取请求的谓词

> ID：14073812
> 
> 赞同：0
> 
> 时间：2012-12-28T18:09:28.117
> 
> 标签：iphone, ios, core-data, nspredicate

我正在使用 Core Data 来存储由值和时间戳组成的简单实体。我正在寻找一个获取请求，它返回最新添加的值，以及所有值的运行平均值。这一切似乎都很简单，直到我尝试使用 NSPredicate 将结果过滤到特定时间段内。

我正在使用 NSExpression 的`expressionForFunction:withArguments:`方法来确定平均值。通过设置启动标志`-com.apple.CoreData.SQLDebug 1`，我可以清楚地看到只有最新的值符合我的日期谓词。相反，平均计算是作为子查询执行的，但没有考虑我的日期谓词：

```
SELECT (SELECT avg(t1.ZVALUE) FROM ZEVENT t1 WHERE t1.Z_ENT = ?),  t0.ZVALUE FROM ZEVENT t0 WHERE ( t0.ZTIMESTAMP >= ? AND  t0.Z_ENT = ?) ORDER BY t0.ZTIMESTAMP DESC 
```

在仍然尊重我的 NSFetchRequest 谓词的同时确定平均值的最有效（和可扩展）的方法是什么？

作为参考，这是我的完整代码：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timestamp" ascending:NO];

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Reading" inManagedObjectContext:moc];
[request setEntity:entity];
[request setSortDescriptors:@[sortDescriptor]];
[request setResultType:NSDictionaryResultType];

// Filter by date where necessary
NSPredicate *datePredicate = [NSPredicate predicateWithFormat:@"(timestamp >= %@)", toDate];
[request setPredicate:datePredicate];

NSExpression *valueExpression = [NSExpression expressionForKeyPath:valueKey];
NSExpressionDescription *valueDescription = [[NSExpressionDescription alloc] init];
[valueDescription setName:@"value"];
[valueDescription setExpression:valueExpression];
[valueDescription setExpressionResultType:NSDoubleAttributeType];

NSExpression *avgExpression = [NSExpression expressionForFunction:@"average:" arguments:[NSArray arrayWithObject:valueExpression]];
NSExpressionDescription *avgDescription = [[NSExpressionDescription alloc] init];
[avgDescription setName:@"averageReading"];
[avgDescription setExpression:avgExpression];
[avgDescription setExpressionResultType:NSDoubleAttributeType];

[request setPropertiesToFetch:@[avgDescription, valueDescription]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T00:08:30.430

我看到两个错误。没有显示初始化`toDate`。我还注意到您正在传递`setPropertiesToFetch:`一个 NSExpressions 数组，但文档需要一个 NSPropertyDescriptions 数组。我希望当您执行 fetch 请求时，这种差异会导致 null 结果并填充 NSError。

你从中看到了什么结果`executeFetchRequest:error:`？请务必检查 NSError 结果。成语是这样的：

```
 NSError *error;
    NSArray *results = [context executeFetchRequest:fetchRequest error:&error];
    if (!results) {
        NSLog(@"%@ fetch error for request %@: %@ %@", fetchRequest,
              error.localizedDescription, error.localizedFailureReason);
    } 
```

我会采取不同的方法。一个 fetch 请求的限制为 1，`timestamp`降序排序，并返回最新的`timestamp`. 如果您愿意，可以添加谓词以限制时间。然后使用第二个获取请求来计算时间戳的平均值。您甚至可以将这些调用封装到它们自己的方法中：

```
-(NSDate *)latestTimestamp:(NSManagedObjectContext *)moc;

-(NSNumber *)averageValueSinceTime:(NSDate *)intervalStart
                           context:(NSManagedObjectContext *)moc; 
```

# android - 使用 SimpleCursorAdapter 的 Android SQLite 数据不会在列表视图中填充多于一行？

> ID：14073813
> 
> 赞同：0
> 
> 时间：2012-12-28T18:09:38.053
> 
> 标签：android, sqlite, listview, simplecursoradapter, android-listfragment

基本上我有在 DatabaseHelper 扩展类中初始化数据库的代码（见下文），我目前只得到一个结果来显示？

```
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE IF NOT EXISTS host ("
            + BaseColumns._ID
            + " INTEGER PRIMARY KEY AUTOINCREMENT, name VARCHAR, mac_address VARCHAR)");

    ContentValues host_values = new ContentValues();
    host_values.put("name", "test host");
    host_values.put("mac_address", "ffffffffffff");

    db.insert("host", null, host_values);

    ContentValues host_values2 = new ContentValues();
    host_values.put("name", "test me host");
    host_values.put("mac_address", "eeeeeeeeeeee");

    db.insert("host", null, host_values2);

} 
```

这是代码，我在 ListActivity 上使用 ListFragment 有什么区别吗？

```
public class TargetListFragment extends ListFragment {

private SQLiteDatabase database;

private CursorAdapter dataSource;

private static final String fields[] = { "name", "mac_address", 
    BaseColumns._ID };

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
            setHasOptionsMenu(true);
    DatabaseHelper helper = new DatabaseHelper(this.getActivity().getApplicationContext());
    database = helper.getWritableDatabase();
    Cursor data = database.query("host", fields, 
        null, null, null, null, null);

    dataSource = new SimpleCursorAdapter(this.getActivity().getApplicationContext(), 
        R.layout.target_row, data, fields,  
        new int[] { R.id.target_name, R.id.mac_address });

    setListAdapter(dataSource);
} 
```

这真的让我很困扰，因为光标似乎只处理第一行然后被关闭，但我想不出有什么会导致这种情况？

再次以防万一，这里是行视图的 XML。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_height="wrap_content" android:id="@+id/target_row_layout"
            android:orientation="vertical" android:layout_width="wrap_content">

            <TextView android:layout_width="fill_parent"
                    android:layout_height="wrap_content" android:id="@+id/target_name"
                    style="@style/target_list.item_name" /> <!--style="@style/target_list.item_name"-->
            <TextView android:layout_width="fill_parent"
                    android:layout_height="wrap_content" android:id="@+id/mac_address"
                    style="@style/target_list.mac_address" /> <!--style="@style/target_list.mac_address"-->
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:12:13.513

您正在使用`host_values`您打算使用的地方`host_values2`......`insert()`不会添加第二行，因为里面的所有值`host_values2`都是空的：

```
ContentValues host_values2 = new ContentValues();
host_values2.put("name", "test me host");  // Change variable
host_values2.put("mac_address", "eeeeeeeeeeee");  // Change variable

db.insert("host", null, host_values2); 
```

（或者，您可以简单地删除`host_values2`并覆盖以前的数据`host_values`。）

# objective-c - 保存 UITableView 单元格附件的状态？

> ID：14073819
> 
> 赞同：0
> 
> 时间：2012-12-28T18:09:53.637
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我在表格视图上设置了手势识别器。

*   向右滑动，配件会变为刻度的图像
*   向左滑动并更改为 V 形图像

如果点击一个单元格，它会加载一个本地 HTML 文件。

如果您向右滑动，勾号会按原样显示。但是，如果您随后点击单元格以查看 HTML 文件并返回表格视图，则图像将恢复为 V 形。

确保蜱虫保持原样的最佳方法是什么？

* * *

## 编辑

进一步的代码：

从'viewDidLoad'：

```
UISwipeGestureRecognizer *recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self
                                                                                 action:@selector(handleSwipeRight:)];
[recognizer setDirection:(UISwipeGestureRecognizerDirectionRight)];
[self.tableView addGestureRecognizer:recognizer];

recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self
                                                       action:@selector(handleSwipeLeft:)];
//recognizer.delegate = self;
[recognizer setDirection:(UISwipeGestureRecognizerDirectionLeft)];
[self.tableView addGestureRecognizer:recognizer];

- (void)handleSwipeLeft:(UISwipeGestureRecognizer *)gestureRecognizer
{
//Get location of the swipe
CGPoint location = [gestureRecognizer locationInView:self.tableView];

//Get the corresponding index path within the table view
NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:location];

//Check if index path is valid
if(indexPath)
{
    //Get the cell out of the table view
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

    //Update the cell or model

    cell.accessoryView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"disclosure.png"]];
}
}

- (void)handleSwipeRight:(UISwipeGestureRecognizer *)gestureRecognizer
{
CGPoint location = [gestureRecognizer locationInView:self.tableView];

NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:location];

if(indexPath)
{
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

    // cell.accessoryType = UITableViewCellAccessoryCheckmark;
    cell.accessoryView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tick.png"]];
}

}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *simpleTableIdentifier = @"MFGCell";

MFGCell *cell = (MFGCell *) [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

if (cell == nil) {
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MFGCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
}

cell.itemTitle.text = [item objectAtIndex:indexPath.row];
cell.itemDescription.text = [description objectAtIndex:indexPath.row];
cell.itemImageView.image = [UIImage imageNamed:[icons objectAtIndex:indexPath.row]];

return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:17:13.383

作为对用户滑动的反应，您应该存储用户的选择（例如，在类型的私有实例变量中`NSMutableArray`）。当用户返回表格视图时，您可以重用您的信息`tableView:cellForRowAtIndexPath:`来设置具有正确附件样式的单元格。

财产声明：

```
@property(nonatomic, retain) NSMutableArray* _accessoryStyle; 
```

综合属性。然后将此代码段添加到底部`handleSwipeLeft:`以存储用户的选择：

```
- (void)handleSwipeLeft:(UISwipeGestureRecognizer *)gestureRecognizer
{
  [...]
  NSNumber* number = [numberWithInt:0];
  [_accessoryStyle replaceObjectAtIndex:indexPath.row withObject:number];
} 
```

在底部添加一个类似的片段`handleSwipeRight:`：

```
- (void)handleSwipeRight:(UISwipeGestureRecognizer *)gestureRecognizer
{
  [...]
  NSNumber* number = [numberWithInt:1];
  [_accessoryStyle replaceObjectAtIndex:indexPath.row withObject:number];
} 
```

在`tableView:cellForRowAtIndexPath:`：

```
NSString* accessoryImageName;
NSNumber* number = [_accessoryStyle objectAtIndex:indexPath.row];
switch ([number intValue])
{
  case 0:
    accessoryImageName = @"disclosure.png";
    break;
  case 1:
    accessoryImageName = @"tick.png";
    break;
  default:
    // replace with your error handling code
    return nil;
}
cell.accessoryView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:accessoryImageName]]; 
```

为了使所有这些工作，您需要`_accessoryStyle`使用与您希望表格视图具有单元格的相同数量的元素来初始化数组。例如，在您的视图控制器中`viewDidLoad`：

```
- (void) viewDidLoad
{
  [super viewDidLoad];

  self._accessoryStyle = [NSMutableArray arrayWithCapacity:0];
  NSNumber* defaultAccessoryStyle = [numberWithInt:0];
  int numberOfRows = 17;  // get the real number from somewhere
  for (int index = 0; index < numberOfCells; ++index)
    [_accessoryStyle addObject:defaultAccessoryStyle];
} 
```

为了平衡这一点，您需要添加

```
- (void) viewDidUnload
{
  [super viewDidUnload];
  self._accessoryStyle = nil;
} 
```

还有很大的改进空间：

*   找到更好的变量名
*   对不同样式使用枚举，而不仅仅是硬编码数字 0 和 1
*   不要`UIImageView`为每个表格视图单元分配一个新的，只需分配其中两个并根据附件样式使用正确的一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:22:33.347

对于您的问题，存在一个潜在的逻辑问题，因为当它不应该触发向左滑动事件时，或者视图只是被卸载并重置为默认值。看看你是否可以在事件触发时记录；否则应保留视图的状态。另外，我要做的是添加一个额外的状态变量，就像`int currentCellState`您在输入不同状态时更改以跟踪您的状态一样。然后在您`viewDIdLoad`确保您的所有数据和您的视图是同步的，即值`currentCellState`匹配您的视图的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T19:20:52.573

最好的方法是将您拥有的图像/按钮放在一个数组中，每次加载视图时都会显示选择了索引的项目。为了做到这一点，应该将 swipeMethode 修改为类似这样

```
-(void)swipeMethod: (UISwipeGestureRecognizer *) sender
{
    if(sender.direction == 
        UISwipeGestureRecognizerDirectionLeft && index < [myArray count]){   
        [self setSelectedIndex:index+1  animated:YES];  
        index++;
    }else if (sender.direction == UISwipeGestureRecognizerDirectionRight && index > 0) {
        [self setSelectedIndex:index-1 animated:YES]; 
        index--;
    }else {
        return;
    }
} 
```

在 viewDidLoad 添加以下代码：

```
 leftRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeMethod:)];
    [leftRecognizer setDirection: UISwipeGestureRecognizerDirectionLeft];
    [self.tableView addGestureRecognizer:leftRecognizer];

    rightRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeMethod:)];
    [rightRecognizer setDirection: UISwipeGestureRecognizerDirectionRight];
    [self.tableView addGestureRecognizer:rightRecognizer]; 
```

# c# - 创建长随机数

> ID：14073820
> 
> 赞同：-4
> 
> 时间：2012-12-28T18:09:53.797
> 
> 标签：c#, random, long-integer

所以我有这个

```
Random random1 = new Random();
int intrandom1 = random1.Next(); 
```

我想在.Next 之后放一个很长的时间。我怎么做？它只接受整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T18:13:22.883

第一个想法：一个long as 64位整数，是2个32位整数的组合，所以你可以使用：

```
((long)random1.Next() << 32)  | random1.Next() 
```

也许

```
((long)random1.Next() <<< 32)  | random1.Next() 
```

如果您使用 java (?) 并且需要无符号移位

编辑：看起来不像Java。Java 有 random1.nextLong() 。也许是 C#？我不知道那个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:19:00.260

可以使用简单的链表生成任意长的数字。试想一下，列表中的每个节点都可以存储一个随机生成的数字，并且可以像读取单一数字一样读取该列表的函数。使用这样的算法，您可以获得任意长的随机数。

# function - 动态检索 Clojure 函数元数据

> ID：14073822
> 
> 赞同：8
> 
> 时间：2012-12-28T18:10:09.177
> 
> 标签：function, clojure, metadata, defn

环境：Clojure 1.4

我正在尝试从函数向量中动态提取函数元数据。

```
(defn #^{:tau-or-pi: :pi} funca "doc for func a" {:ans 42} [x] (* x x))
(defn #^{:tau-or-pi: :tau} funcb "doc for func b" {:ans 43} [x] (* x x x))

(def funcs [funca funcb]) 
```

现在，在 REPL 中检索元数据（在某种程度上）很简单：

```
user=>(:tau-or-pi (meta #'funca))
:pi

user=>(:ans (meta #'funca))
42

user=>(:tau-or-pi (meta #'funcb))
:tau

user=>(:ans (meta #'funcb))
43 
```

但是，当我尝试制作地图以从元数据中获取`:ans`、`:tau-or-pi`或 basic`:name`时，出现异常：

```
user=>(map #(meta #'%) funcs)
CompilerException java.lang.RuntimeException: Unable to resolve var: p1__1637# in this context, compiling:(NO_SOURCE_PATH:1) 
```

在进行了更多搜索之后，我从 2009 年的一篇帖子中得到了以下想法（[https://groups.google.com/forum/?fromgroups=#!topic/clojure/VyDM0YAzF4o](https://groups.google.com/forum/?fromgroups=#!topic/clojure/VyDM0YAzF4o)）：

```
user=>(map #(meta (resolve %)) funcs)
ClassCastException user$funca cannot be cast to clojure.lang.Symbol  clojure.core/ns-resolve (core.clj:3883) 
```

我知道`defn`宏（在 Clojure 1.4 中）将元数据放在宏`Var`的`def`部分中，`defn`所以这就是简单`(meta #'funca)`工作的原因，但有没有办法动态获取函数元数据（如`map`上面的示例）？

也许我在语法上遗漏了一些东西，但如果有人能指出我正确的方向或正确的方法，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:49:00.657

该表达式`#(meta #'%)`是一个宏，它扩展为对`defn`（实际上`def`）的调用，该调用具有一个名为 p1__1637# 的参数，该参数是用生成的，`gensym`并且对 meta 的调用试图将此本地参数用作 var，因为不存在具有该名称的 var你得到这个错误。

如果您**从`var`s 的向量而不是函数向量**开始，那么您可以将元映射到它们上。您可以在任何使用函数的地方使用 var（非常接近），每次调用它时查找 var 的内容的运行时间成本非常小。

```
user> (def vector-of-functions [+ - *])
#'user/vector-of-functions
user> (def vector-of-symbols [#'+ #'- #'*])
#'user/vector-of-symbols
user> (map #(% 1 2) vector-of-functions)
(3 -1 2)
user> (map #(% 1 2) vector-of-symbols)
(3 -1 2)                                                           
user> (map #(:name (meta %)) vector-of-symbols)
(+ - *)
user> 
```

因此，在您的原始代码中添加几个`#'`s 并删除额外的尾随 : 应该可以解决问题：

```
user> (defn #^{:tau-or-pi :pi} funca "doc for func a" {:ans 42} [x] (* x x))
#'user/funca
user> (defn #^{:tau-or-pi :tau} funcb "doc for func b" {:ans 43} [x] (* x x x))
#'user/funcb
user> (def funcs [#'funca #'funcb])
#'user/funcs
user> (map #(meta %) funcs)
({:arglists ([x]), :ns #<Namespace user>, :name funca, :ans 42, :tau-or-pi :pi, :doc "doc for func a", :line 1, :file "NO_SOURCE_PATH"} {:arglists ([x]), :ns #<Namespace user>, :name funcb, :ans 43, :tau-or-pi :tau, :doc "doc for func b", :line 1, :file "NO_SOURCE_PATH"})
user> (map #(:tau-or-pi (meta %)) funcs)
(:pi :tau)
user> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T20:37:19.957

最近，我发现将元数据附加到函数本身而不是像 vars 那样有用`defn`。

你可以用好的 ol' 做到这一点`def`：

```
(def funca ^{:tau-or-pi :pi} (fn [x] (* x x)))
(def funcb ^{:tau-or-pi :tau} (fn [x] (* x x x))) 
```

在这里，元数据已附加到函数，然后将那些包含元数据的函数绑定到 var。

这样做的好处是您在考虑元数据时不再需要担心 vars。由于这些函数包含元数据，因此您可以直接从它们中提取它。

```
(def funcs [funca funcb])

(map (comp :tau-or-pi meta) funcs) ; [:pi :tau] 
```

显然，of 的语法`def`并不像`defn`函数那样精炼，因此根据您的使用情况，您可能有兴趣重新实现`defn`以将元数据附加到函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T18:29:07.933

我想详细说明[Beyamor 的回答](https://stackoverflow.com/users/1308287/beyamor)。对于我正在编写的一些代码，我正在使用这个：

```
(def ^{:doc "put the-func docstring here" :arglists '([x])}
  the-func
  ^{:some-key :some-value}
  (fn [x] (* x x))) 
```

是的，有两个元数据映射有点笨拙。这就是我这样做的原因：

1.  第一个元数据附加到`the-func`var。所以你可以使用`(doc the-func)`which 返回：

    ```
    my-ns.core/the-func
    ([x])
      put the-func docstring here 
    ```

2.  第二个元数据附加到函数本身。这使您可以使用`(meta the-func)`返回：

    ```
    {:some-key :some-value} 
    ```

总之，当您想要 REPL 中的文档字符串以及对函数元数据的动态访问时，这种方法会派上用场。

# jdbc - 通过 JDBC 进行 DB2 备份？

> ID：14073825
> 
> 赞同：2
> 
> 时间：2012-12-28T18:10:19.367
> 
> 标签：jdbc, db2, ibm-data-studio

我正在尝试做的事情：找到一种通过 JDBC 命令/查询备份 DB2 数据库的方法。这是我用 DB2 命令行程序测试过的命令：

将数据库 dbName 备份到 C:\backup\db2

它在命令行上运行得很好，但是当尝试在 Data Studio 中或通过独立的 JDBC 程序运行它时，它会失败。这是 JDBC 异常消息：

SQLCODE: -104, SQLSTATE: 42601, SQLERRMC: 备份数据库 dbName 到 C:/;BEGIN-OF-STATEMENT;<values>

Data Studio 抱怨需要“JOIN”而不是“dbName”，以及其他一些事情。我还没有找到任何关于 DB2 的有用文档，这就是我来这里的原因。

有没有人遇到过这个问题并想出如何解决这个问题？还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:50:50.807

尝试使用 admin_cmd 过程：

```
CALL SYSPROC.ADMIN_CMD('backup db mydatabase to c:\backup\db2\') 
```

这也将通过 JDBC 驱动程序起作用。

# javascript - 使用正则表达式解析字符串并附加递增的数字

> ID：14073831
> 
> 赞同：0
> 
> 时间：2012-12-28T18:10:55.047
> 
> 标签：javascript, regex, string, parsing

我有以下代码解析这个字符串并将其转换为一个对象。因为里面有重复的键，所以我需要为每个键附加一个递增的数字。

```
 var str = 'View\n{\n    Name: View1;\n    Image\n    {\n        BackgroundImage: Image.gif;\n        Position: 0, 0;\n        Width: 320;\n        Height: 480;\n    }\n\n    Button\n    {\n        BackgroundImage: Button.gif;\n        Transition: View2;\n        Position: 49, 80;\n        Width: 216;\n        Height: 71;\n    }\n\n    Button\n    {\n        BackgroundImage: Button2.gif;\n        Position: 65, 217;\n        Width: 188;\n        Height: 134;\n    }\n\n    Label\n    {\n        Position: 106, 91;\n        Width: 96;\n        Height: 34;\n        Text: "Button";\n        FontSize: 32;\n        Color: 0.12549, 0.298039, 0.364706, 1;\n    }\n    Scroll\n    {\n        Position: 106, 91;\n        Width: 96;\n        Height: 34;\n        Button{\n            BackgroundImage: Button2.gif;\n            Position: 65, 217;\n            Width: 188;\n            Height: 134;\n        }\n        Button{\n            BackgroundImage: Button2.gif;\n            Position: 65, 217;\n            Width: 188;\n     \n      Height: 134;\n        }\n\n    }\n\n}';

str = str.replace(/(\w+)\s*\{/g, "$1:{"); // add in colon after each named object
str = str.replace(/\}(\s*\w)/g, "},$1"); // add comma before each new named object
str = str.replace(/;/g, ","); // swap out semicolons with commas
str = str.replace(/,(\s+\})/g, "$1"); // get rid of trailing commas
str = str.replace(/([\d\.]+(, [\d\.]+)+)/g, "[$1]"); // create number arrays
str = str.replace(/"/g, ""); // get rid of all double quotes
str = str.replace(/:\s+([^\[\d\{][^,]+)/g, ':"$1"');  // create strings

$("pre").html(str); 
```

在这个工作演示中：http: [//jsfiddle.net/T59fL/2/](http://jsfiddle.net/T59fL/2/) 我需要将一个递增的数字附加到任何结尾有“：{”的东西上。即 View、Button、Button、Image 等会变成 View1、Button1、Button2、Image1 等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:01:58.380

解决了 jsfiddle.net/GaX6E/2

```
var i = 0;
str = str.replace(/([^:]+):{/g, function(m, p1) { return p1 + "_" + (++i).toString() + ":{"; }); 
```

# php - 更改我所有的网站链接：最好的方法是什么？

> ID：14073832
> 
> 赞同：2
> 
> 时间：2012-12-28T18:10:56.103
> 
> 标签：php, .htaccess, hyperlink

> **可能重复：**
> [.htaccess 重写以将根 URL 重定向到子目录](https://stackoverflow.com/questions/990392/htaccess-rewrite-to-redirect-root-url-to-subdirectory)

我需要更改我网站中的所有链接（2455）。

当访问者来自谷歌（使用旧链接）时会出现问题，因为页面将`404 page not found`

我想将旧链接重定向到新版本的页面。例如：

旧链接：

```
http://example.com/hotel/13234
http://example.com/hotel/132
http://example.com/hotel/323
http://example.com/page/about_us
http://example.com/page/contact 
```

新链接：（添加“博客”）在域之后

```
http://example.com/blog/hotel/13234
http://example.com/blog/hotel/132
http://example.com/blog/page/about_us
http://example.com/blog/hotel/323

...
...
... 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:24:52.750

使用[`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)：

```
RewriteEngine On
RewriteRule $ /blog [L,R=301] 
```

这将为所有链接添加前缀`blog`并永久重定向它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T18:16:24.360

您可以将它们重定向到新`Location`的

```
header('Location: /blog' . $_SERVER['PHP_SELF']); 
```

如果您使用 PHP 版本 >= 5.4.0，您还可以发送正确的 HTTP 状态代码 301（永久移动）

```
http_response_code(301); 
```

当您想使用时，您可以使用和`.htaccess`重定向。[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/blog/
RewriteRule .* /blog$0 [L,R=301] 
```

该`RewriteCond`指令防止重写已经以`/blog`. 否则你会得到一个无休止的递归。该`RewriteRule`指令为所有 URL 加上前缀`/blog`，不应用进一步的规则[`L`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_l)并发送 HTTP 状态代码 301 [`R=301`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)。

为此，必须允许这些指令在`.htaccess`. 您可以在主 conf 文件或虚拟主机上下文中使用相同的指令。

# mysql - 如何将远程 mysql 数据库克隆到本地开发机器？

> ID：14073833
> 
> 赞同：0
> 
> 时间：2012-12-28T18:10:57.117
> 
> 标签：mysql, ssh, ssh-tunnel

我一直在使用一些远程服务器，并且厌倦了通过 ssh 隧道（-l 3306:localhost:3306）转发 MySQL 调用的延迟，所以我想找到一种方法来快速轻松地克隆远程服务器（实时) 数据库我的本地开发机器，但大多数在线资源来自一台支持 ssh 的服务器，到另一台，不是我想要的，将远程数据库克隆到我连接的机器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:10:57.117

使用远程端口从您的开发机器连接到本地 MySQL 端口，默认为 3306

```
ssh server.address.com -R 3307:localhost:3306 
```

然后在服务器上，从那里，您可以使用默认值登录到远程服务器的数据库

```
mysql 
```

命令。或者从那里登录到*您的*本地开发数据库，

```
mysql --host=127.0.0.1 --port=3307 
```

然后，这会将 3307 端口从远程服务器通过上述 ssh 隧道隧道传输到本地 3306 端口。

因此，您可以直接将 mysqldump 命令运行到本地 mysql 数据库。

```
mysqldump --all-databases | mysql --host=127.0.0.1 --port=3307 
```

第一部分将所有可以使用的数据库转储到 stout 中，但您使用命令的后半部分直接将其传送到本地数据库。

**仅供参考，我省略了所有登录信息，以使所有命令尽可能简单明了，同时尽我所能解释每一位，但对于实际操作，我使用直接

```
ssh server.address.com -R 3307:localhost:3306 'mysqldump --all-databases -uroot | mysql --host=127.0.0.1 --port=3307 -uroot' 
```

命令。

对我来说，这绝对是在本地克隆实时数据库以进行开发的最简单、最快和最好的方法。

# java - 打开枚举集

> ID：14073836
> 
> 赞同：8
> 
> 时间：2012-12-28T18:11:22.047
> 
> 标签：java, enums, switch-statement, bit-fields, enumset

旧的方式，如果我们想要`switch`一些复杂的位掩码，我们可以很容易地这样做（我头脑中的一个随机示例只是为了演示这个问题）：

```
private static final int   MAN = 0x00000001;
private static final int WOMAN = 0x00000002;
// ...alive, hungry, blind, etc.
private static final int  DEAD = 0xFF000000;

public void doStuff(int human) {
    switch (human) {
    case MAN | DEAD:
        // do something
        break;
    // more common cases
    }
} 
```

如今，由于我们使用`enums`and `EnumSets`，我有时想做类似的事情：

```
enum Human {
    MAN, WOMAN, DEAD; // etc.
}

public void doStuff(EnumSet human) {
    switch (human) {
    case Human.MAN | Human.DEAD:
        // do something
        break;
    // more common cases
    }
} 
```

这是行不通的，因为我们只能`switch`使用`int`,`enum`或`String`值。在这一点上，我意识到这是不可能的，即使这些`enum`值基本上只是隐藏的整数。但我喜欢四处挖掘，该功能看起来非常有用，所以：

```
private static final EnumSet<Human> DEAD_MAN = EnumSet.of(Human.MAN, Human.DEAD);

public void doStuff(EnumSet human) {
    switch (human) {
    case DEAD_MAN:
        // do something
        break;
    // more common cases
    }
} 
```

仍然没有运气。[知道打开字符串的技巧](https://blogs.oracle.com/darcy/entry/project_coin_string_switch_break)并且 EnumSets 实际上是 64 位字段（或它们的数组），我也会尝试：

```
 switch (human.hashCode()) {
    case (Human.MAN.hashCode() | Human.DEAD.hashCode()):
        // do something
        break;
    // more common cases
    } 
```

认为当`Human` `hashCode()`正确实施以产生一致的结果时，它可能会起作用。没有：

> **java.lang.Error：**未解决的编译问题：case 表达式必须是常量表达式

* * *

现在，我想知道为什么没有可能做到这一点。我一直认为，`enums`在`EnumSets`Java 中，它是那些老式位域的适当替代品，但在这里，新方法似乎无法处理更复杂的情况。

与任何可能性相比，正确的*解决方案很糟糕：*`switch`

```
public void doStuff(EnumSet human) {
    if (human.contains(Human.MAN) && human.contains(Human.DEAD)) {
        // do something
    } else {
        // more common cases
    }
} 
```

特别是，自从引入了`switch`on ，我相信on`Strings`至少有两种可能的实现：`switch``EnumSets`

1.  在`case (Human.MAN | Human.DEAD)`表达式中，简单地使用编译时类型检查而`ordinal()`不是枚举本身。
2.  使用[与 Strings 相同的技巧](https://blogs.oracle.com/darcy/entry/project_coin_string_switch_break)。
    *   在编译时，计算枚举值的 （可能还有一些额外的东西 - 枚举中的值的数量`hashCode()` **等`name`**`ordinal()`- 从编译时开始，一切都是静态和恒定的）。是的，这将意味着更改班级或`hashCode()`班级。`EnumSet``Enum`
    *   使用而不是枚举本身

现在，是否有任何我没有考虑到的严重障碍（我可以想出一些，都可以很容易地克服）会使这不可能轻松实现？或者我认为这确实是可能的，但对于 Oracle 来说还不足以实现它，因为它不经常使用，这是对的吗？

* * *

[另外，让我声明这是一个纯粹的学术问题，*可能*没有好的答案（不知道，否则我不会问）。如果它被证明是无法回答的，我可能会将其设为社区 wiki。但是，我在任何地方都找不到答案（甚至任何人都在讨论它），所以就这样吧。]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T18:16:29.680

在 Java 和面向对象的世界中，您将在 Object 上使用带有 setter 和 getter 的类，您将使用这些

```
public void doStuff(Human human) {
    if(human.isDead()) {
       if(human.isMale()) {
           // something
       } else if (human.isFemale()) {
           // something else
       } else {
           // neither
       }
    }
} 
```

注意： switch 不是一个好主意，因为它只需要完全匹配。eg`case MAN | DEAD:`不会匹配`MAN | HUNGRY | DEAD`，除非你只想匹配那些在他们死前不饿的人。;)

* * *

我会看到你的“绝对足够”的基准，并为你提出另一个有缺陷的基准，它“显示”它需要一个时钟周期的一小部分（因为你想知道，这很难相信）

```
public static void main(String... args) {
    Human human = new Human();
    human.setMale(true);
    human.setDead(true);
    for(int i=0;i<5;i++) {
        long start = System.nanoTime();
        int runs = 100000000;
        for(int j=0;j< runs;j++)
            doStuff(human);
        long time = System.nanoTime() - start;
        System.out.printf("The average time to doStuff was %.3f ns%n", (double) time / runs);
    }
}

public static void doStuff(Human human) {
    if (human.isDead()) {
        if (human.isMale()) {
            // something
        } else if (human.isFemale()) {
            // something else
        } else {
            // neither
        }
    }
}

static class Human {
    private boolean dead;
    private boolean male;
    private boolean female;

    public boolean isDead() {
        return dead;
    }

    public boolean isMale() {
        return male;
    }

    public boolean isFemale() {
        return female;
    }

    public void setDead(boolean dead) {
        this.dead = dead;
    }

    public void setMale(boolean male) {
        this.male = male;
    }

    public void setFemale(boolean female) {
        this.female = female;
    }
} 
```

印刷

```
The average time to doStuff was 0.031 ns
The average time to doStuff was 0.026 ns
The average time to doStuff was 0.000 ns
The average time to doStuff was 0.000 ns
The average time to doStuff was 0.000 ns 
```

那是我机器上的 0.1 个时钟周期，在它被完全优化之前。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T18:20:00.167

如何`Set`使用`EnumSet`.

```
private static final EnumSet<Human> DEAD_MAN = 
  EnumSet.of(Human.MAN, Human.DEAD);

public void doStuff(EnumSet human) {
    if ( human.containsAll( DEAD_MAN ) )
    {
            // do something
            break;
    }
    else
    {
        // more common cases
    }
} 
```

Acutally EnumSet 的`Set`接口方法实现非常高效，下面是您正在寻找的位域比较。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-12-28T18:20:22.853

执行以下操作（根据您的示例）：

```
enum Human {
    MAN, WOMAN, DEAD; // etc.
}

public void doStuff(Human human) {
    switch (human) {
        case MAN:
        case DEAD:
            // do something
            break;
        // more common cases
    }
} 
```

如果你想要`EnumSet`'s 那么你不能使用`switch`并且应该将它重构为`if`

```
public void doStuff(EnumSet<Human> human) {
    if( human.containsAll(EnumSet.<Human>of(Human.MAN, Human.DEAD) {
            // do something
    }
} 
```

后一种变体将在内部进行按位比较。

# sql-server - TSQL - 尝试将变量与 IF EXISTS() 函数一起用于简单 SP

> ID：14073842
> 
> 赞同：3
> 
> 时间：2012-12-28T18:12:08.737
> 
> 标签：sql-server, tsql, ms-access

我们公司运行一个 MS Access 前端和 SQL 后端，我正在尝试为前端提供一个存储过程，使其能够访问 T-SQL 的 IF EXIST，而不是使用 DCount 来提高性能。为此，我需要能够将 SELECT 语句传递给存储过程，到目前为止，我有以下代码：

```
CREATE PROCEDURE [dbo].IfExists 
@selectStatement varchar(MAX)
AS
BEGIN
SET NOCOUNT ON;
IF EXISTS (@selectStatement)
    RETURN 1
ELSE
    RETURN 0
END
GO 
```

这不起作用，因为它不喜欢 @selectStatement 而不是硬编码语句。不知道我怎么能做到这一点，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:15:36.670

您需要使用动态 sql 来实现这一点

[http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/](http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/)

例如：

```
DECLARE @DynamicSQl NVARCHAR(MAX), @retVal INT

SET @DynamicSQl = 'select @retVal = 1 from (' + @selectCommand + ') t'

EXEC sp_executesql @DynamicSQl, N'@retVal INT OUTPUT', @retVal output

IF (@retVal = 1)
  RETURN 1
ELSE
  RETURN 0 
```

# php - 黑钻石问号 - Youtube API - J�r�my

> ID：14073845
> 
> 赞同：8
> 
> 时间：2012-12-28T18:12:18.457
> 
> 标签：php, api, zend-framework, youtube, youtube-api

当我尝试通过 API 将以下内容发送到 Youtube 描述时 - 例如：`Jérémy`- 我进入`J�r�my`了 youtube 描述。奇怪的是，`"–"`还显示为`"�"`。

`PHP Zend`我用API发帖：

```
$myVideoEntry->setVideoDescription('Jérémy'); 
```

我不确定我是否可以设置编码？当我手动更改描述时，它工作正常。

**解答 - 将 Dreamweaver 中的页面属性更改为 UTF8 并解决了问题。谢谢大家**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:08:34.513

编写代码时使用什么编辑器？我曾经遇到过这个问题，发现在 Notepad++ 中，页面编码设置为 ANSI，而不是我需要的 UTF8。

这也可能与以下内容重复：[  未正确显示](https://stackoverflow.com/questions/1609491/nbsp-not-being-displayed-properly)。查看[GmonC 对该帖子](https://stackoverflow.com/a/1609990/498596)的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:38:42.080

不是 100% 确定，但是当您发送一个字符串时，这可能意味着您需要对“特殊”字符使用 ascii 代码，因为它们将在浏览器呈现时按原样进行评估。

例如对于é，您可以使用：

```
$myVideoEntry->setVideoDescription('J&#233;r&#233;my'); 
```

对于破折号，您可以/将使用： '-';

# sql-server - 跨多个 SQL Server 数据库计算行数

> ID：14073848
> 
> 赞同：1
> 
> 时间：2012-12-28T18:12:23.540
> 
> 标签：sql-server

我正在尝试计算`tblDoc`从我的 SQL Server 实例中的每个数据库调用的所有表的行数。

我试过这个，但显然你不能访问或声明游标中的变量：

```
DECLARE @dbname nvarchar(1000);
DECLARE @sqlCommand NVARCHAR(1000) 
DECLARE @results TABLE(numberOfDocuments bigint);
DECLARE c1 CURSOR READ_ONLY
FOR 
SELECT '[' + name + ']'  FROM sys.databases WHERE name <> 'tempdb' 
OPEN c1 
FETCH NEXT FROM c1 
INTO @dbname 
WHILE @@FETCH_STATUS = 0 
BEGIN 
    SET @sqlCommand = 'INSERT INTO results SELECT COUNT(ID) FROM ' + @dbname + '.dbo.tblDoc;';
    print @sqlCommand;
    EXECUTE sp_executesql @sqlCommand 
FETCH NEXT FROM c1 
INTO @dbname 
END
CLOSE c1 
DEALLOCATE c1 

SELECT COUNT(numberOfDocuments) from @results; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:20:41.387

改用临时表

```
DECLARE @dbname nvarchar(1000);
DECLARE @sqlCommand NVARCHAR(1000) 
CREATE TABLE #results (numberOfDocuments bigint);
DECLARE c1 CURSOR READ_ONLY
FOR 
SELECT '[' + name + ']'  FROM sys.databases WHERE name <> 'tempdb' 
OPEN c1 
FETCH NEXT FROM c1 
INTO @dbname 
WHILE @@FETCH_STATUS = 0 
BEGIN 
    SET @sqlCommand = 'INSERT INTO #results SELECT COUNT(ID) FROM ' + @dbname + '.dbo.tblDoc;';
    print @sqlCommand;
    EXECUTE sp_executesql @sqlCommand 
FETCH NEXT FROM c1 
INTO @dbname 
END
CLOSE c1 
DEALLOCATE c1 

SELECT COUNT(numberOfDocuments) from #results; 
```

拉吉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-25T18:48:18.447

如果您正在查找给定服务器中所有数据库的所有表计数，那么下面的解决方案非常简化。

```
DECLARE @dbname nvarchar(1000);
DECLARE @sqlCommand NVARCHAR(1000) 
drop table if exists ##temp
create table ##temp (dbname varchar(500),schemaname varchar(500),tablename varchar(500),counts int)
DECLARE c1 CURSOR READ_ONLY
FOR 
SELECT name FROM master.sys.databases  WHERE name NOT IN ('master', 'tempdb', 'model', 'msdb');
OPEN c1 
FETCH NEXT FROM c1 
INTO @dbname 
WHILE @@FETCH_STATUS = 0 
BEGIN 
    SET @sqlCommand = 'INSERT INTO ##temp'+'

SELECT 

    '''+@dbname+''' as databasename,    
    s.name AS schemaname,
    t.name AS tablename,
    p.rows AS rowcounts

FROM '+@dbname+'.sys.tables t
INNER JOIN '+@dbname+'.sys.indexes i ON t.OBJECT_ID = i.object_id
INNER JOIN '+@dbname+'.sys.partitions p ON i.object_id = p.OBJECT_ID AND i.index_id = p.index_id
INNER JOIN '+@dbname+'.sys.allocation_units a ON p.partition_id = a.container_id
LEFT OUTER JOIN '+@dbname+'.sys.schemas s ON t.schema_id = s.schema_id
WHERE t.NAME NOT LIKE ''dt%'' 
    AND t.is_ms_shipped = 0
    AND i.OBJECT_ID > 255 

GROUP BY 
t.name, s.name, p.Rows
'
;
    print @sqlCommand;
    EXECUTE sp_executesql @sqlCommand 
FETCH NEXT FROM c1 
INTO @dbname 
END
CLOSE c1 
DEALLOCATE c1 

select * from ##temp 
```

# android - Eclipse 找不到 android:id="@+id/android:names

> ID：14073856
> 
> 赞同：1
> 
> 时间：2012-12-28T18:13:05.890
> 
> 标签：android, eclipse

请问我为什么会出现这样的情况？

我在我的 XML 中定义了 2 个 ListView，并将它们命名为

```
android:id="@+id/android:listbest" 
```

和

```
android:id="@+id/android:listworst" 
```

当我尝试从我的代码中引用它们时，Eclipse 显然无法找到这些 id。

我引用它们如下：

```
v= inflater.inflate(R.layout.listaworstbest, container, false);    
lvBest= (ListView)v.findViewById(android.R.id.listbest);
lvWorst=(ListView)v.findViewById(android.R.id.listworst); 
```

我已经多次清理和重建该项目，但没有成功。

![在此处输入图像描述](../Images/dbb69074e2dd6fcc00117fd59db1884e.png)

我的 XML 应该没问题，我没有看到任何错误。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
     >
    <RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:background="#1414FF">
    <TextView
        android:id="@+id/titolo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="15dip"
        android:text="Best and Worst stocks"
        android:layout_centerHorizontal="true"
        android:textColor="#00EBEB"
         />  
         <TextView
        android:id="@+id/best"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="10dip"
        android:text="Best stocks"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/titolo"
        android:textColor="#00EBEB"
         />

    </RelativeLayout>

    <RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="20dip" 
    android:background="#1414FF">

        <TextView
        android:id="@+id/nome"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="10dip"
        android:text="Nome"
        android:ems="10"
        android:layout_alignParentLeft="true"
        android:layout_centerInParent="true"
        android:textColor="#00EBEB"
         />

<TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:ems="8"
        android:layout_height="wrap_content"
        android:textSize="10dip"
        android:text="Simbolo" 
        android:layout_toRightOf="@+id/nome"
        android:textColor="#00EBEB"
        android:layout_centerInParent="true"
        />

    <TextView
        android:id="@+id/prezzo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="10dip"
        android:text="Ultimo prezzo" 
        android:layout_toRightOf="@+id/textView1"
        android:textColor="#00EBEB"
        android:layout_centerInParent="true"    
        />

    <TextView
        android:id="@+id/cambiamento"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Variazione"
        android:textSize="10dip"
        android:layout_alignParentRight="true"
        android:textColor="#00EBEB"
        android:layout_centerInParent="true"
         />

    </RelativeLayout>

    <ListView
        android:id="@+id/android:listbest"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
         >
    </ListView>

    <RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:background="#1414FF">

        <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="10dip"
        android:text="Worst stocks"
        android:layout_centerHorizontal="true"

        android:textColor="#00EBEB"
         />

      </RelativeLayout>

    <ListView
        android:id="@+id/android:listworst"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
         >
    </ListView>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="34dp"
        android:background="#1414FF" >

        <Button
            android:id="@+id/dettagliobtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:text="Details" />

        <Button
            android:id="@+id/favoritesbtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="Favorites" />

      </RelativeLayout>

</LinearLayout> 
```

谢谢您的帮助！

**编辑：为什么它在这种情况下工作？？？？？？**

```
 <ListView
        android:id="@+id/android:list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
         >
    </ListView> 
```

Java是：

```
View v= inflater.inflate(R.layout.lista, container, false);    
        lv= (ListView) v.findViewById(android.R.id.list); 
```

谢谢！！！干杯! 皮特毛

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:15:09.460

将两个 ListViews id 更改为

`First ListView`标识为：

```
 android:id="@+id/listworst" 
```

和

`Second ListView`身份证到

```
android:id="@+id/listbest" 
```

并将它们称为：

```
v= inflater.inflate(R.layout.listaworstbest, container, false);    
lvBest= (ListView)v.findViewById(R.id.listbest);
lvWorst=(ListView)v.findViewById(R.id.listworst); 
```

# yii - YII 会话在 Chrome 浏览器中不起作用

> ID：14073857
> 
> 赞同：2
> 
> 时间：2012-12-28T18:13:06.973
> 
> 标签：yii

我无法使用 chrome 浏览器登录，但它在 Firefox 中运行良好。我猜 yii 会话在 chrome 中不起作用？或许？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T12:31:23.273

会话独立于浏览器 - 它们存储在服务器上。浏览器只能访问他通过 cookie 或链接参数从服务器获取的会话 ID

# android - Android 中使用正确布局的自定义首选项

> ID：14073858
> 
> 赞同：1
> 
> 时间：2012-12-28T18:13:07.213
> 
> 标签：android, android-preferences

对于自定义首选项，例如时间选择器首选项，我在 Android 中使用以下 XML：

```
<com.my.package.TimePreference android:key="notification_time" android:selectable="true" android:title="@string/notification_time" android:enabled="true" android:summary="@string/setTime" android:defaultValue="00:00" /> 
```

“TimePreference”类在哪里：

```
package com.my.package;

import android.content.Context;
import android.content.res.TypedArray;
import android.preference.DialogPreference;
import android.text.format.DateFormat;
import android.util.AttributeSet;
import android.view.View;
import android.widget.TimePicker;

public class TimePreference extends DialogPreference {

    private int lastHour = 0;
    private int lastMinute = 0;
    private TimePicker picker = null;
    private boolean is_24_hours = true;

    public static int getHour(String time) {
        String[] pieces = time.split(":");
        return(Integer.parseInt(pieces[0]));
    }

    public static int getMinute(String time) {
        String[] pieces = time.split(":");
        return(Integer.parseInt(pieces[1]));
    }

    public TimePreference(Context ctxt) {
        this(ctxt, null);
    }

    public TimePreference(Context ctxt, AttributeSet attrs) {
        this(ctxt, attrs, 0);
    }

    public TimePreference(Context ctxt, AttributeSet attrs, int defStyle) {
        super(ctxt, attrs, defStyle);
        setPositiveButtonText(ctxt.getString(R.string.save));
        setNegativeButtonText(ctxt.getString(R.string.cancel));
        try {
            is_24_hours = DateFormat.is24HourFormat(ctxt);
        }
        catch (Exception e) {
            is_24_hours = true;
        }
    }

    @Override
    protected View onCreateDialogView() {
        picker = new TimePicker(getContext());
        if (is_24_hours) {
            picker.setIs24HourView(true);
        }
        else {
            picker.setIs24HourView(false);
        }
        return(picker);
    }

    @Override
    protected void onBindDialogView(View v) {
        super.onBindDialogView(v);
        picker.setCurrentHour(lastHour);
        picker.setCurrentMinute(lastMinute);
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        super.onDialogClosed(positiveResult);
        if (positiveResult) {
            picker.clearFocus(); // important - otherwise manual input is not saved
            lastHour = picker.getCurrentHour();
            lastMinute = picker.getCurrentMinute();
            String time = String.valueOf(lastHour)+":"+String.valueOf(lastMinute);
            if (callChangeListener(time)) {
                persistString(time);
            }
        }
    }

    @Override
    protected Object onGetDefaultValue(TypedArray a, int index) {
        return(a.getString(index));
    }

    @Override
    protected void onSetInitialValue(boolean restoreValue, Object defaultValue) {
        String time = null;
        if (restoreValue) {
            if (defaultValue == null) {
                time = getPersistedString("00:00");
            }
            else {
                time = getPersistedString(defaultValue.toString());
            }
        }
        else {
            time = defaultValue.toString();
        }
        lastHour = getHour(time);
        lastMinute = getMinute(time);
    }
} 
```

这在 Android 2.2 和 2.3 上一直很有效——但现在我已经切换到 Android 4.0，我可以看到这个首选项不会适应首选项屏幕的布局：

![在此处输入图像描述](../Images/17128143cb1d7f5e55e7c1a4c7d90d59.png)

我怎么解决这个问题？有没有比手动设置边距/填充更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T14:17:47.023

终于发现问题了：

`super()`必须调用只接受两个参数（并且没有`int defStyle`参数）的构造函数。

在问题的代码中，`super()`使用预定义`defStyle`的值调用`0`whcih 会阻止 Android 选择任何好的布局。如果您在`super()`没有给出默认样式参数的情况下调用，超类`DialogPreference`的构造函数会自行选择最佳样式。

# php - 我的代码是从我的数据库中删除所有行，而不是一次只删除一行

> ID：14073859
> 
> 赞同：0
> 
> 时间：2012-12-28T18:13:10.717
> 
> 标签：php, mysql, codeigniter

我正在尝试使用我为大学创建的社交网站的 MVC Codeigniter 框架从我的数据库中的“消息”表中删除消息。我的数据库中的“消息”表中有 4 个字段 - id、to、from 和 message。我遇到了障碍 - 代码正在从“消息”表中删除所有行。我只想一次删除一行（消息）。尽管所有消息都被删除了——它会抛出一个错误：消息：未定义的变量：用户名——我应该传递“用户名”吗？- 任何帮助将非常感激。

```
This is the function in my Controller:

function delMessage($username) {
    $this->load->model('messages');
    $data['messages'] = $this->messages->deleteUserMessage($username);
    $this->load->view('message', $data);
}

This is the function in my Model:

function deleteUserMessage($username) {
    $this->db->where('from', $username);
    $this->db->or_where('to', $username); 
    $query = $this->db->get('messages');
    if ($query->num_rows() > 0){
        $messages = $query->result_array();
        $this->db->where('from', $username);
        $this->db->or_where('to', $username); 
        $this->db->delete('messages');
        return $messages;
    }
}

This is the code in my view:

  <?php foreach($messages as $message): ?>

          <li><?=$message['from']?> says...: "<?=$message['message']?>"<br/><?=anchor("message/delMessage/$username", 'Delete Message')?></li>      
         <?php endforeach?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:39:22.657

你的模型应该是这样的，

```
function deleteUserMessage($username) {
    $this->db->where('from', $username);
    $this->db->or_where('to', $username); 
    $query = $this->db->delete('messages');
    if($query) {
        return true;
    }
} 
```

# video.js - 使用 Video.js 全屏覆盖 HTML

> ID：14073860
> 
> 赞同：2
> 
> 时间：2012-12-28T18:13:16.730
> 
> 标签：video.js

有没有人能够使用 Video.js 播放器创建全屏覆盖？我们正在寻找一种在视频上显示 div 的方法，即使在全屏模式下也可以使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T13:59:09.187

这是我在最近使用 JQuery UI 对话框的项目中所做的，但该解决方案适用于您想要在视频上显示的任何元素。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery.ui.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#overlay').dialog({
        width: $(window).width() * .8,
        height: 100,
        position: { my: "center", at: "bottom", of: window },
        autoOpen: false,
        zIndex: 2147483647
    });
});
int = setInterval(function(){checkNews()},checkNewsInterval);
function checkNews() {
    var url = 'news.php';
        $('#overlay').load(url, function() {
        $('#overlay').dialog('open');
        return false;
}
</script>
<body>
<div id="video-container">
    <video id="myvideo" class="video-js vjs-default-skin" controls
    preload="auto"  poster="" data-setup="{}">
        <source src="<you_video_source>" type='video/mp4'></source>
        <param name="allowfullscreen" value="true" />
    </video>
</div>
<div id="overlay"></div>
</body
</html> 
```

诀窍是财产：

```
zIndex: 2147483647 
```

在对话框设置中设置或作为 CSS 在：

```
#overlay {
    z-index: 2147483647;
} 
```

# json - 了解 Excel 2010 中设置的 VBJSON 类

> ID：14073863
> 
> 赞同：0
> 
> 时间：2012-12-28T18:13:29.420
> 
> 标签：json, vba

我已经从这个网站下载并设置了 VB6 的 JSON 解析器： [VB-JSON](http://www.ediy.co.nz/vbjson-json-parser-library-in-vb6-xidc55680.html)

我无法理解这个模块是如何工作的。我在 Excel 2010 中成功设置了它，我想我也理解 JSON 格式，但我不知道这个类如何提取项目。我尝试以 JSON 格式解析以下文本

```
{"realms":[{"type":"pvp","population":"low","queue":false,"wintergrasp":{"area":1,"controlling-faction":1,"status":0,"next":1356724174636},"tol-barad":{"area":21,"controlling-faction":1,"status":0,"next":1356723246779},"status":true,"name":"Kor'gall","slug":"korgall","battlegroup":"Cruelty / Crueldad","locale":"en_GB","timezone":"Europe/Paris"},{"type":"pve","population":"medium","queue":false,"wintergrasp":{"area":1,"controlling-faction":0,"status":0,"next":1356724425638},"tol-barad":{"area":21,"controlling-faction":0,"status":0,"next":1356723369780},"status":true,"name":"Alonsus","slug":"alonsus","battlegroup":"Cruelty / Crueldad","locale":"en_GB","timezone":"Europe/Paris"}]} 
```

当使用以下地址时，浏览器将返回此内容： [Alonsus, Kor'gall](http://eu.battle.net/api/wow/realm/status?realms=Alonsus,Kor%27gall)

我写了一个类似的代码

```
Dim objJSON As Object
...
strData = objJSON.Item("Realms")(1).Item("Type") 
```

但它会导致错误：“对象变量或未设置块变量”。我希望得到“pve”值。我很困惑，因为它以对象名称“领域”开头，后跟一个数组。该数组应该作为集合返回。我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T18:45:19.370

```
set objJSON = JSON.Parse(jsonFromUrl)
strData = objJSON.Item("realms").Item(1).Item("type") 
```

json 中的键是区分大小写的。

# asp.net - asp.net mvc 3中的路由问题。按类别显示项目，但不显示所有项目

> ID：14073864
> 
> 赞同：0
> 
> 时间：2012-12-28T18:13:30.270
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, routing

我想按类别显示项目。我使用 linq 并且一切正常，除了我无法显示所有项目，无论类别。可能是路由问题，因为我已经问过有关我使用的 linq 表达式的问题，应该没问题。无论如何，这是我的代码：

```
public ViewResult Content(string category, int page = 1)
    { 
         var model = new StoreContentViewModel
            {
             Items = _itemsRepository.GetItems()
                             .Where(i => i.Product.Category == null || 
                                    i.Product.Category != null && i.Product.Category == category)
                             .OrderBy(i => i.ItemId)
                             .Skip((page - 1) * PageSize)
                             .Take(PageSize)
                             .Select(i => i),
             }
     } 
```

RegisterRouts 方法的内容：

```
 // without categories
        routes.MapRoute(
            null,
            "Store/Content/Page{page}",
            new { controller = "Store", action = "Content", category = (string)null},
            new { page = @"\d+" });

        // with categories
        routes.MapRoute(
            null,
            "Store/Content/{category}/Page{page}",
            new { controller = "Store", action = "Content" },
            new { page = @"\d+" });

        // Default route
        routes.MapRoute(
            null,
            "{controller}/{action}",
            new { controller = "Home", action = "Index"}); 
```

我对“有和没有类别”溃败的顺序感到困惑。

事情是当我输入网址时：

```
~/Store/Content 
```

或者：

```
~/Store/Content/Page1      // or Page2 
```

项目不显示。但如果我输入：

```
~/Store/Content/Man's-Shoes/Page1 
```

显示与“男鞋”类别相关的项目。

那么，这个问题与溃败或mabby有关吗？还有另一个问题吗？

ps过去两天我一直在处理这个问题，所以任何帮助都是合适的。

**编辑：** 还有这个单元测试失败了。大概是写的不好。也检查一下。
在我的模型中，我有“包含”产品和运输实体的 Items 实体：

```
[TestMethod]
    public void Can_Filter_Content()
    {            
        //Arrange
        private Mock<IItemsRepository> _itemsMock = new Mock<IItemsRepository>();
        private Mock<IProductRepository> _productsMock = new Mock<IProductRepository>();
        private Mock<IShippingRepository> _shippingMock = new Mock<IShippingRepository>();

        _itemsMock.Setup(i => i.GetItems()).Returns(new[]
            {
                new Item { ItemId = 1, ProductId = 1, ShippingId = 1},
                new Item { ItemId = 2, ProductId = 2, ShippingId = 2},
                new Item { ItemId = 3, ProductId = 3, ShippingId = 3},
                new Item { ItemId = 4, ProductId = 4, ShippingId = 4}
            });
        _productsMock.Setup(p => p.GetProducts()).Returns(new[]
            {
                new Product { ProductId = 1, Category = "shoes"},
                new Product { ProductId = 2, Category = "shoes"},
                new Product { ProductId = 3, Category = "superShoes"},
                new Product { ProductId = 4, Category = "shoes"}
            });

        var controller = new StoreController(_itemsMock.Object, 
            _productsMock.Object, _shippingMock.Object) {PageSize = 2};

        // Act
        Item[] result = ((StoreContentViewModel) controller.Content(null).Model).Items.ToArray();
        ViewResult viewResult = controller.Content(null);

        // Assert
        Assert.IsTrue(result[0].ItemId == 1 && result[1].ItemId == 2);
        Assert.AreEqual(result.Length, 2);

        Assert.AreEqual("", viewResult.ViewName);
    } 
```

马比这有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:37:39.040

应该这样：

```
.Where(i => i.Product.Category == null || 
      i.Product.Category != null && i.Product.Category == category) 
```

变成这样：

```
.Where(i => category == null || 
      i.Product.Category != null && i.Product.Category == category) 
```

当 category 为 null 时，原始条件表示产品类别不为 null 的位置，并且该类别与 null 匹配，这永远不会起作用。新条件表示如果类别为空，则不评估条件；否则，匹配类别（“男鞋”）。

# php - HTML & PHP - 如何使多个表单可提交

> ID：14073867
> 
> 赞同：0
> 
> 时间：2012-12-28T18:13:38.057
> 
> 标签：php, html, mysql, forms, submit

我有以下代码循环遍历数组以在单个页面上创建填充值（用户将能够编辑）的表单。数组中有多少循环就有多少形式，它总是在变化。

```
<body>
<div id="main">
    <?php
    foreach($articles as $item) { ?>
        <div id='container'>
            <form>
                Title: <input type="text" name="title" size="80" value="<?php echo $item[0]; ?>">
                <br>
                URL: <input type="text" name="url" size="80" value="<?php echo $item[1]; ?>">
                <br>
                End Date: <input type="text" name="endDate" value="<?php echo substr($item[7], 14, strpos($item[7], '@') - strlen($item[7])); ?>">
                <br>
                <?php
                    if (substr($item[8], 0, 2) === 'Su'){
                    } else {
                ?>
                Start Date: <input type="text" name="startDate" value="<?php echo substr($item[8], 7, 9); ?>">
                <?php } ?>
            </form>
        </div>
    <?php } ?>
</div>
</body> 
```

现在，我希望用户在页面底部有一个提交按钮，它将页面上的所有表单提交到 MySQL 数据库。问题是我不知道该怎么做。

我知道提交按钮的格式为

```
<input type="submit" value="Submit"> 
```

我假设我需要给循环中的每个表单一个唯一的名称，但是从那里我不知道下一步应该如何实际发送和接收来自这些多个表单的信息。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:19:54.663

您一次不能提交多个表单。将所有`<input>`s 集合成一个形式有什么问题？：

```
<body>
<div id="main">
    <form>
    <?php
    $inpCnt = 0;
    foreach($articles as $item) {
        $inpCnt++;  ?>
        <div id='container'>
                Title: <input type="text" name="title_<?php echo $inpCnt; ?>" size="80" value="<?php echo $item[0]; ?>">
                <br>
                URL: <input type="text" name="url_<?php echo $inpCnt; ?>" size="80" value="<?php echo $item[1]; ?>">
                <br>
                End Date: <input type="text" name="endDate_<?php echo $inpCnt; ?>" value="<?php echo substr($item[7], 14, strpos($item[7], '@') - strlen($item[7])); ?>">
                <br>
                <?php
                    if (substr($item[8], 0, 2) === 'Su'){
                    } else {
                ?>
                Start Date: <input type="text" name="startDate_<?php echo $inpCnt; ?>" value="<?php echo substr($item[8], 7, 9); ?>">
                <?php } ?>
        </div>
    <?php } ?>
</form>
</div>
</body> 
```

您需要能够定义这些输入中的每一个。所以我用循环给每个人一个唯一的名字。

# wcf - WCF：在运行时在常规和双工服务合同之间进行选择

> ID：14073869
> 
> 赞同：1
> 
> 时间：2012-12-28T18:14:22.003
> 
> 标签：wcf, generics, wcf-client

我正在编写 WCF 客户端/服务。该服务可以执行一些长时间的操作，所以我添加了一个回调合约`IProgressCallback`。我正在开发的系统必须在各种环境中运行，所以我怀疑我会遇到无法打开回调通道的环境（我可能在这里错了）。

所以要小心，我已经像这样定义了操作合同。

```
[ServiceContract()]
interface IContract
{ ... }

[ServiceContract(CallbackContract = typeof(IProgress))]
interface IDuplexContract : IContract
{ ... } 
```

这在服务器端非常有用。我可以轻松地配置服务以使用任一合同。

然而，问题出现在客户端。我手动定义了 2 个代理

```
public class ContractProxy 
   : ClientBase<IContract>, IContract
{ ... }

public class DuplexContractProxy 
   : DuplexClientBase<IDuplexContract>, IDuplexContract 
{ ... } 
```

同样，两个代理都可以正常工作。

现在我有一个代理工厂，负责创建正确的代理。它可以很容易地找出要实例化哪个代理，但是当我尝试返回代理时出现了我的问题。

用户需要至少返回一个对象，`IContract`但 `ICommunicationObject`我无法找到要返回的对象。我尝试了以下方法：

```
IContract CreateProxy(...)  // The user lacks access to Open, Abort, Close, etc.
ClientBase<IContract> CreateProxy(...)  // DuplexClientBase derives from ClientBase but the generic parameter is different and it isn't covariant so this cannot be done.

// First define a generic interface and then make both proxies implement it.
IProxy<TContract> : TContract, ICommunicationObject  // TContract cannot be restricted to an interface so I cannot make IProxy derive from TContract 
```

目前作为一种解决方法，我只是返回 IContract 接口，但是使用代理的每个人都必须首先将其转换为 ICommunicationObject 以打开代理等。

这里有没有人有更好的方法来做到这一点，或者我只是过度担心双工通信在某些环境中可能不起作用？

# c - 警告：传递参数'从不兼容的指针类型[默认启用]'

> ID：14073870
> 
> 赞同：11
> 
> 时间：2012-12-28T18:14:23.313
> 
> 标签：c, pointers, fft

我一直在寻找与此相关的其他线程，但不知何故我就是不明白......

我想对一组我评估过的值进行 FFT，并编写了这个程序来首先读取这些值并将它们保存到一个 size 的数组中`n`。

```
int main () {
    // some variables and also a bit of code to read the 'messwerte.txt'

printf("Geben sie an wieviele Messwerte ausgelesen werden sollen: ");
scanf("%d", &n);
double werte[n]; //Array der "fertigen" Messwerte
in = fopen ("messwerte.txt","r");
double nul[n]; //Array von nullen

int logN = 14;
l=FFT(logN,&werte,&nul);
} 
```

在同一个文件中，我还借助该程序进行了 FFT：

```
double FFT (int logN, double *real, double *im) //logN is base 2 log(N) {
// blabla FFT calculation
} 
```

但是，当我编译时，我总是会收到此错误：

```
gcc FFT.c -lm
FFT.c: In function ‘main’:
FFT.c:94:2: warning: passing argument 2 of ‘FFT’ from incompatible pointer type [enabled by default]
FFT.c:4:8: note: expected ‘double *’ but argument is of type ‘double (*)[(unsigned int)(n)]’
FFT.c:94:2: warning: passing argument 3 of ‘FFT’ from incompatible pointer type [enabled by default]
FFT.c:4:8: note: expected ‘double *’ but argument is of type ‘double (*)[(unsigned int)(n)]’ 
```

由于这是我第一次编程，我真的不知道我的代码有什么问题。我是否必须为编译器或类似的东西设置更多标志（因为我必须做这些`-lm`东西，否则它不会编译并说诸如 pow not found 之类的东西）？

我还意识到在 Windows 或 Linux 机器上编写时可能会有所不同，如果这是操作系统的问题，我使用的是 Linux、Lubuntu 12.10 32 位。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-28T18:16:04.830

> ```
> l=FFT(logN,&werte,&nul);
>            ^      ^ 
> ```

从该行删除＆符号。

* * *

问题在于，此上下文中的运算符生成的表达式与预期`&`的类型不同。`FFT`FFT 需要一个指向双精度的指针，并`&werte`产生一个指向 N 元素数组的指针。所以，为了让`FFT`快乐，只需传递`werte`which 将悄悄地衰减到指向第一个元素的指针。

有关指向数组的指针的更多信息，请参阅[C FAQ](http://c-faq.com/aryptr/ptrtoarray.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-28T18:25:58.337

`werte[]`和`nul[]`是数组，但单词`werte`本身是数组第一个元素的地址。因此，当您`&werte`尝试传递地址时**（正如@cnicutar 指出的那样，这实际上应该读取指向 N 个元素数组的指针）**。所以只需通过`werte`并且`nul`没有与符号来传递这些数组的地址。

# weka - Weka中的分类解读

> ID：14073874
> 
> 赞同：0
> 
> 时间：2012-12-28T18:15:07.060
> 
> 标签：weka, decision-tree, classification

我想用 Weka 来解决我的分类问题。我有一组训练数据实例。假设数据如下所示：

```
@relation Relation1

@attribute att1 {val11, val12}
@attribute att2 {val21, val22}
@attribute class {class1, class2, class3}

@data
val11, val21, class1
val11, val22, class2
val12, val21, class3 
```

在我的代码中，我从文件中读取了训练集。我训练 J48 树并尝试对实例进行分类。但是，我不知道如何解释分类结果。

我的代码如下：

```
try {
    DataSource source = new DataSource("trainingset.arff");
    Instances data = source.getDataSet();
    if (data.classIndex() == -1) {
        data.setClassIndex(data.numAttributes() - 1);
    }

    Instance xyz = new Instance(data.numAttributes());
    xyz.setDataset(data);
    xyz.setValue(data.attribute(0), "val11");
    xyz.setValue(data.attribute(1), "val21");

    String[] options = new String[1];
    options[0] = "-U"; // unpruned tree
    J48 tree = new J48(); // new instance of tree
    tree.setOptions(options); // set the options
    tree.buildClassifier(data); // build classifier

    double[] distributionForInstance = tree.distributionForInstance(xyz);
    System.out.println(distributionForInstance[0]);
    System.out.println(distributionForInstance[1]);
    System.out.println(distributionForInstance[2]);

} catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

作为输出，我得到：

```
0.3333333333333333
0.3333333333333333
0.3333333333333333 
```

我还尝试了其他对实例进行分类的方法：

```
double classifyInstance = tree.classifyInstance(xyz);
            System.out.println(classifyInstance); 
```

在这种情况下，输出为：

```
0.0 
```

您能解释一下我应该如何解释 distributionForInstance 和分类实例方法的输出吗？我的目标是能够创建分类器，它会告诉我给定实例属于哪个类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:19:46.033

看看[javadoc](http://weka.sourceforge.net/doc/weka/classifiers/Classifier.html)。该`distributionForInstance`方法返回一个具有类成员概率的数组（实例在第一类中的第一个元素概率等）并`classifyInstance`返回类（作为 ID - 考虑类标签数组的索引）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:47:08.867

使用`value`方法`Attribute`获取类标签：

```
double classifyInstance = tree.classifyInstance(xyz);
String classStr = data.classAttribute().value(classifyInstance); 
```

# c++ - OS X 上的 printf 和 %llu 与 %lu

> ID：14073877
> 
> 赞同：9
> 
> 时间：2012-12-28T18:15:15.937
> 
> 标签：c++, macos, types, integer, long-integer

> **可能重复：**
> [如何打印 uint64_t？](https://stackoverflow.com/questions/8132399/how-to-printf-uint64-t)

为什么在我的 64 位 Mac（我正在使用 Clang）上`uint64_t`类型是`unsigned long long`64 位 Ubuntu 上的`uint64_t`类型是`unsigned long`？

这让我很难`printf`在两种环境下都不给编译器警告（甚至不工作）。

我可以尝试使用宏来尝试选择正确的字符串（`#define LU`or `%llu`，`%lu`并且在这个过程中稍微修改`printf`字符串）但是在 Mac 上我有一个 64 位的字长（所以`_LP64`会被定义和`UINTPTR_MAX != 0xffffffff`）但是它仍然`long long`用于 64 位 int 类型。

```
// printf macro switch (for the uint64_t's)
#if UINTPTR_MAX == 0xffffffff 
   // 32-bit
#  define LU "%llu"
#else 
   // assume 64-bit
   // special case for OS X because it is strange
   // should actually check also for __MACH__ 
#  ifdef __APPLE__
#    define LU "%llu"
#  else
#    define LU "%lu"
#  endif
#endif 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T18:40:38.897

宏已经在`<cinttypes>`. 尝试

```
printf("%"PRIu64, x); 
```

或者，更好的是，使用 C++ 功能，例如

```
std::cout << x; 
```

这将为您的变量类型选择正确的 << 运算符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T06:51:35.883

答案是通过静态转换进行推广：

```
some_type i = 5;
printf("our value is: %llu", (unsigned long long)i); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T18:40:47.747

的底层类型`uint64_t`可以是任何实现，只要它实际上是 64 位。

显然，在 C++ 中，首选的解决方案是使用 iostreams 而不是`printf`问题消失。但是您总是可以只转换传递给的值`printf`以使类型始终正确：

`printf("%llu", static_cast<unsigned long long>(value));`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T18:41:07.853

不幸的是，标准对这些类型的大小不是很具体……唯一的保证是`sizeof(int) <= sizeof(long) <= sizeof(long long)`.

您可以像您说的那样使用宏，或者您可以尝试使用`%zu`or`%ju`用于打印`size_t`和输入的宏`uintmax_t`（在 OS X 上都是 64 位，尚未在 Ubuntu 上测试）。我认为没有其他选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T19:12:03.787

我相信其他人会告诉你使用 BOOST。因此，为了提供不依赖于 BOOST 的解决方案：

我经常遇到同样的问题，以至于我放弃并编写了自己的辅助宏来输入 %s 而不是任何品牌的`%llu`或`%lu`或其他什么。我还发现它有助于保持健全的格式字符串设计，并提供更好（和更一致）的十六进制和指针打印输出。有两个警告：

1.  你不能轻易地组合额外的格式参数（左/右对齐、填充等）——但是你也不能用`LU`宏真正做到这一点。

2.  这种方法确实为格式化和打印字符串的任务增加了额外的开销。但是，我编写了性能关键型应用程序，除了 Microsoft 的 Visual C++ 调试版本（由于所有内部验证和损坏检查，分配和释放堆内存的时间比正常情况要长约 200 倍）之外，我没有注意到这是一个问题。

这是一个比较：

```
printf( "Value1: " LU ", Value2: " LU, somevar1, somevar2 ); 
```

对比

```
printf( "Value1: %s, Value2: %s", cStrDec(somevar1), cStrDec(somevar2) ); 
```

为了使它工作，我使用了一组宏和模板，如下所示：

```
#define cStrHex( value )        StrHex    ( value ).c_str()
#define cStrDec( value )        StrDecimal( value ).c_str()

std::string StrDecimal( const uint64_t& src )
{
    return StrFormat( "%u%u", uint32_t(src>>32), uint32_t(src) );
}

std::string StrDecimal( const int64_t& src )
{
    return StrFormat( "%d%u", uint32_t(src>>32), uint32_t(src) );
}

std::string StrDecimal( const uint32_t& src )
{
    return StrFormat( "%u", src );
}

std::string StrDecimal( const int32_t& src )
{
    return StrFormat( "%d", src );
}

std::string StrHex( const uint64_t& src, const char* sep="_" )
{
    return StrFormat( "0x%08x%s%08x", uint32_t(src>>32), sep, uint32_t(src) );
}

std::string StrHex( const int64_t& src, const char* sep="_" )
{
    return StrFormat( "0x%08x%s%08x", uint32_t(src>>32), sep, uint32_t(src) );
}

// Repeat implementations for int32_t, int16_t, int8_t, etc.
// I also did versions for 128-bit and 256-bit SIMD types, since I use those.
// [...] 
```

我的字符串格式化函数基于现在首选的直接格式化为 std::string 的方法，它看起来像这样：

```
std::string StrFormatV( const char* fmt, va_list list )
{
#ifdef _MSC_VER
    int destSize = _vscprintf( fmt, list );
#else
    va_list l2;
    va_copy(l2, list);
    int destSize = vsnprintf( nullptr, 0, fmt, l2 );
    va_end(l2);
#endif
    std::string result;
    result.resize( destSize );
    if (destSize!=0)
            vsnprintf( &result[0], destSize+1, fmt, list );
    return result;
}

std::string StrFormat( const char* fmt, ... )
{
    va_list list;
    va_start( list, fmt );
    std::string result = StrFormatV( fmt, list );
    va_end( list );

    return *this;
} 
```

# c++ - 如何对 std::map 中的所有值求和？

> ID：14073879
> 
> 赞同：13
> 
> 时间：2012-12-28T18:15:31.303
> 
> 标签：c++, map, std

如何在`std::map<std::string, size_t>`不使用 for 循环的情况下对集合中的所有值求和？映射作为私有成员驻留在类中。在公共函数调用中进行累加。

我不想使用 boost 或其他 3rd 方。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-28T18:35:15.793

您可以使用 lambda 和`std::accumulate`. 请注意，您需要一个最新的编译器（至少 MSVC 2010、Clang 3.1 或 GCC 4.6）：

```
#include <numeric>
#include <iostream>
#include <map>
#include <string>
#include <utility>

int main()
{
    const std::map<std::string, std::size_t> bla = {{"a", 1}, {"b", 3}};
    const std::size_t result = std::accumulate(std::begin(bla), std::end(bla), 0,
                                          [](const std::size_t previous, const std::pair<const std::string, std::size_t>& p)
                                          { return previous + p.second; });
    std::cout << result << "\n";
} 
```

[现场示例在这里](http://coliru.stacked-crooked.com/a/b41182c6ab4f1541)。

如果您使用 C++14，则可以改用通用 lambda 来提高 lambda 的可读性：

```
[](const std::size_t previous, const auto& element)
{ return previous + element.second; } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T18:18:22.913

使用 std::accumulate。但它很可能会在幕后使用循环。

# android - 如何使用 Universal Image Loader Android 在 ViewPager 中仅显示缓存图像？

> ID：14073881
> 
> 赞同：4
> 
> 时间：2012-12-28T18:15:39.603
> 
> 标签：android, android-viewpager, universal-image-loader

一旦我们使用从 url 下载后，我只想显示那些加载到缓存中的图像`Universal Image Loader`

***例子***

我有**15 个 URL**来下载图像并显示在`ViewPager`其中，但其中只有 5 个被下载，我关闭了应用程序。现在我没有任何互联网连接来从网络获取所有其他图像，但应用程序只会显示 5图像和剩余页面将为空白..

是否可以从中获取仅这些图像的列表`cache Memory`？

我们如何限制`ViewPager`其他空白页面？

我已经成功实施`Universal Image Loader`，但陷入了这些问题。

任何想法/建议/样本将不胜感激..

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T23:43:49.840

您可以使用磁盘缓存定义图像是否缓存在磁盘上：

```
File cachedImage = imageLoader.getDiscCache().get(imageUrl);
if (cachedImage.exists()) {
    /// image is cached
} 
```

您可以检查每个图像 URL，定义缓存哪些图像并适当地配置 ViewPager。

# java - Spring MVC 等效于 .Net MVC LinkExtensions.ActionLink 方法

> ID：14073887
> 
> 赞同：1
> 
> 时间：2012-12-28T18:16:06.170
> 
> 标签：java, jsp, spring-mvc, jsp-tags

我来自 ASP.Net MVC 世界，微软在 Razor（他们的 JSP 版本）中提供 LinkExtensions.ActionLink 方法来生成特定控制器/动作的锚元素（一个元素）。

这个概念非常简单：Razor (JSP) 代码引用控制器和动作，ActionLink 函数负责生成正确的 URI 以访问该控制器/动作。

Spring MVC中有这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:23:08.813

不幸的是，Spring 目前不支持这个，尽管有一个[特性请求](https://jira.springsource.org/browse/SPR-5779)。你能做的最好的事情就是使用`<spring:url>`和硬编码控制器和动作的路径。`<spring:url>`会给你一个上下文根相关的 URL。

实现这一点的部分困难在于 Spring 赋予您任意定义映射的能力（即 with `@RequestMapping`）。所以如果你不使用`ControllerClassNameHandlerMapping`它可能是一个问题。

# twitter-bootstrap - Twitter Bootstrap - 即使使用工作示例，选项卡也不起作用

> ID：14073893
> 
> 赞同：2
> 
> 时间：2012-12-28T18:16:30.570
> 
> 标签：twitter-bootstrap

我正在尝试让 Bootstrap 使用选项卡，但出于某种原因，无论我尝试什么，它们都无法正常工作。它们显示正确，但单击链接时选项卡不会更改。令人困惑的是，我什至不再使用我的代码——我正在复制粘贴应该属于“工作示例”的代码，这些代码已作为其他问题的答案提交。

这是我正在使用的最新代码。它在作为另一个问题的答案提交的小提琴中完美地工作，并且除了我试图测试它的地方之外几乎在任何地方都可以正常工作。我已将文件作为直接 HTML 打开，由 Django 运行时服务器提供服务，并由 Apache 服务器提供服务，但似乎没有任何工作。

[http://jsfiddle.net/ivobos/fuBK6/](http://jsfiddle.net/ivobos/fuBK6/)

```
<html>
    <head>
        <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tab.js"></script>
        <script src="http://code.jquery.com/jquery-1.7.1.js"></script>
        <title>TabTest</title>
    </head>
    <body>
        <div class="tabbable">
           <ul class="nav nav-tabs">
             <li class="active"><a href="#tab1" data-toggle="tab">tab1</a></li>
             <li><a href="#tab2" data-toggle="tab">tab2</a></li>
           </ul>
           <div class="tab-content">
               <div id="tab1" class="tab-pane active">tab1 content</div>
               <div id="tab2" class="tab-pane">tab2 content</div>
           </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T20:28:13.463

尝试将脚本移到`jquery-1.7.1.js`脚本上方`bootstrap-tabs.js`。

```
<head>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <script src="http://code.jquery.com/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tab.js"></script>
    <title>TabTest</title>
</head> 
```

# magento - Magento 导航不显示

> ID：14073905
> 
> 赞同：0
> 
> 时间：2012-12-28T18:17:21.243
> 
> 标签：magento, navigation

我正在 CE 1.7.0.2 中开发一家新商店。

到目前为止，我有大约 130 个类别，所有类别都放在`root category`.

`root category`也定义在`Ststem -> Magage Stores -> Our Store -> Root Category`

如果我直接访问类别页面，我可以在面包屑等中看到所有产品和子类别，所以我知道我的结构是正确的。我知道我错过了一些简单的东西。

我现在正在使用该`modern`模板，直到网站正常运行，所以所有文件都是原始文件。

**编辑**我还应该提到`System -> Config -> Catalog -> Category Top Navigation -> Maximal Depth`设置为`1`

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:55:57.617

好的——经过几个小时的搜索，我终于弄明白了。如果您通过任何脚本导出您的产品（我的是定制的——我从 CE 1.3.2.4 导出）并将它们导入到更高版本（1.7.0.2），即使导入顺利，某些东西的值可能不会使过渡顺利。尽管我为商店视图设置了根类别，但我的产品并未应用于商店。结果他们在那里，但不在那里。

我的解决方案： `Catalog -> Manage Products -> Select all -> Actions -> Update Attributes -> Submit`.. 在那里检查您的`Websites`标签。确保“检查”您的主要网站按钮，然后单击保存。运行完整的重新索引并清除缓存（我使用 SSH 并`sudo rm -R *`在 /var/cache 和 /var/session 目录中）。

我希望这可以帮助遇到同样问题的其他人。

感谢 Moldovan Gheorghe Dani 的回答——感谢您的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:29:10.920

我刚刚在本地环境中尝试了相同版本的 magento 和主题，我一点问题都没有。我注意到，当您创建一个新类别时，“Is Active”标志默认设置为 No，因此请确保将其设置为 Yes，并且所有类别的“Include in Navigation Menu”也设置为 Yes。如果仍然无法工作，即使已禁用，也尝试刷新缓存，并索引。我希望它会帮助你。

# c++ - c++文件同步问题

> ID：14073910
> 
> 赞同：2
> 
> 时间：2012-12-28T18:17:58.567
> 
> 标签：c++, turbo-c++

我有将数据写入/读取文件的 c++ 程序（turbo c++ ver 3）。当程序的多个实例运行并在特定的执行点时，当程序的两个实例同时打开并写入文件时，一些信息会丢失。

```
if(!filein) 
```

不适合这种情况。我猜这是同步的问题

有什么方法可以在执行任何操作之前检查文件是否打开

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:51:21.253

`boost::interprocess::file_lock`如果您有可用的提升，那么最简单/最好的方法是使用（[文档](http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.file_lock)）将互斥锁嵌入文件本身

# java - 安卓服务初始化。我应该使用线程吗？

> ID：14073914
> 
> 赞同：0
> 
> 时间：2012-12-28T18:18:11.017
> 
> 标签：java, android, multithreading, service

我正在编写一个简单的 Android 服务，它将执行一些文件 IO 密集型工作。服务会在后台运行一段时间，初始化服务需要一段时间。（由于要扫描的文件更多，因此需要更长的时间）。

1.  所以我认为我应该使用一个线程来初始化服务，因为服务是在 UI 线程上运行的。这是个好主意吗？
2.  我是否应该通过调用 join() 方法等待初始化线程结束并执行更多耗时更少的作业？

我尝试使用线程进行初始化的原因是因为我不希望我的活动启动服务在我的服务启动时挂起。

**更新** 好的，我尝试使用服务的原因是为外部客户端（例如 Web 浏览器或 PC 客户端）提供访问我的 android 手机文件的方法。当我的应用程序进入后台时，我还希望允许服务继续运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:21:02.993

你真的需要服务吗？如果您的代码将在 Service 中执行大量工作，那么在线程中执行它始终是一个好主意。如果您真的不需要该服务，请考虑使用 AsyncTask。

注意：服务在其宿主进程的主线程中运行——该服务不会创建自己的线程，也不会在单独的进程中运行（除非您另外指定）。这意味着，如果您的服务要执行任何 CPU 密集型工作或阻塞操作（例如 MP3 播放或网络），您应该在服务中创建一个新线程来完成这项工作。通过使用单独的线程，您将降低应用程序无响应 (ANR) 错误的风险，并且应用程序的主线程可以保持专用于用户与您的活动的交互。

[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:21:11.477

看看[IntentService](http://developer.android.com/reference/android/app/IntentService.html)。它会自动在单独的线程中运行，并在完成工作后退出。似乎它适合您的情况。

# css - CSS：仅当元素包含特定元素时才选择它

> ID：14073916
> 
> 赞同：3
> 
> 时间：2012-12-28T18:18:16.990
> 
> 标签：css, printing, css-selectors

我正在创建一个*打印*样式表，并且希望`figure`仅当该标签包含一个 时才隐藏所有标签`iframe`，而该标签恰好是嵌入的 YouTube 视频。如果`figure`标签包含其他任何内容（即`img`），我希望标签及其内容仍显示在打印页面上。

我知道我可以简单地应用一个`class`“视频”，例如，`figure`在适当的地方应用到我的标签，但我想看看是否有一种方法可以*通过 CSS*来实现这一点，而无需在我的网站中添加类。此外，即使我知道它们存在，我也不是在寻找 jQuery 解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:21:13.337

# facebook - Heroku 实时游戏服务器

> ID：14073920
> 
> 赞同：0
> 
> 时间：2012-12-28T18:18:22.793
> 
> 标签：facebook, flash, heroku, real-time

我没有使用 Heroku 的经验。

我想在 Facebook 上发布我的多人（实时互动）Flash 游戏，但遇到了一些 https 问题。经过数小时试图找到不需要数百美元来购买和计算 ssl 证书的解决方案后，我发现了通过 Heroku 链接我的 facebook 应用程序的选项。

基本上我一直使用 Heroku 作为网络服务器，客户端连接到远程游戏服务器。

我在 Heroku 中看到了大量的附加组件、测功机和各种选项。

游戏服务器是用 VB.NET 编码的。有没有办法让它托管在 Heroku 上？（也许是一个附加组件？）

此外，我很难找到关于 Heroku 的简化信息（Heroku 是傻瓜式风格的 lol）。任何简化来源的链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:26:53.183

**为什么选择 Heroku 用于 SSL？**

每年购买 DV（域验证）SSL 证书的费用可能[不到 10 美元](http://www.namecheap.com/ssl-certificates/comodo/positivessl-certificate.aspx)。为什么每月花费 20 美元购买 Heroku SSL 插件？

* * *

**Heroku 上的 .NET 应用程序**

由于 heroku 正在运行 linux（根据[这篇官方文章](https://devcenter.heroku.com/articles/stack)Ubuntu 10.04 ），您可以尝试使用[Mono](http://www.mono-project.com/Main_Page)运行您的 .NET 应用程序。（[Mono VB.NET 支持](http://www.mono-project.com/VisualBasic.NET_support)）

您可能想阅读：

*   [如何在 Heroku 上使用 Mono 部署 .NET 应用程序](http://blog.benhall.me.uk/2012/01/how-to-deploy-mono-projects-to-heroku.html)
*   [YouTube - 如何在 Heroku 上使用 Mono 部署 .NET 应用程序](http://www.youtube.com/watch?v=LkdiTzgqqsk)

希望这可以帮助。

# xcode - XCode：重复符号

> ID：14073925
> 
> 赞同：1
> 
> 时间：2012-12-28T18:18:58.170
> 
> 标签：xcode, private-methods, duplicate-symbol

我有一个 C 函数 heightParameter，它是我在几个`UIViewController`s 中使用的一个简单工具。我仅在我的`UIViewController`其他函数上方的每个子类（在 .m 中）的主要实现中声明这一点，因此我什至不必在标题中声明它。

出于某种原因，我在使用它的每个其他子类中都得到了重复的符号，尽管它是私下实现的。它在每个子类的主 @implementation @end 块内，不应该被其他任何东西看到，那么它是如何被全局看到的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:20:45.877

C 函数名称具有全局范围。如果您希望对其进行限制，请将其标记`static`或使其成为一种方法。

# javascript - Jquery 无法从 WCF REST 服务获取响应

> ID：14073929
> 
> 赞同：0
> 
> 时间：2012-12-28T18:19:15.857
> 
> 标签：javascript, wcf, jquery, wcf-rest

我开发了 WCF 休息服务并将其部署在可以通过浏览器访问的链接上，因为它的操作是“GET”。

我想使用 jQuery 获取该数据。我尽力让 WCf 使用 jQuery 获得响应，但徒劳无功。我还尝试了 $.Ajax 和 'jsonp'，但没有成功。谁能帮我？

网址是：[http ://www.lonestarus.com/AndroidApp/AndroidLocation.svc/RestService/getLatestLocation](http://www.lonestarus.com/AndroidApp/AndroidLocation.svc/RestService/getLatestLocation)

您可以通过在浏览器中粘贴 url 来检查该 url 响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:24:40.600

我无法制作跨域示例来向您展示，但是

```
$('#a').load('http://www.lonestarus.com/AndroidApp/AndroidLocation.svc/RestService/getLatestLocation​​​​​​​​​​​​​​​​​?callback=run');​ 
```

如果这些东西都设置好了，就可以了。

您的服务需要启用 JSONP 回调或设置[`Access-Control-Allow-Origin`](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)跨域请求的标头才能工作，或者您需要从同一域运行脚本。鉴于您的网址显示 AndroidApp 我认为您想要跨域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:26:58.677

您需要在响应标头中将**Access-Control-Allow-Origin**设置为值 [*]。

[此博客](http://blogs.msdn.com/b/justinjsmith/archive/2007/08/22/setting-http-headers-in-wcf-net-3-5.aspx)提供了更多详细信息如何在 WCF REST 服务中完成

如果您要在 Web API 中执行此操作，您可以添加

```
 Response.Headers.Add("Access-Control-Allow-Origin", "*") 
```

使用小提琴调用服务

```
$(function() {

    $.ajax({
        url: "http://www.lonestarus.com/AndroidApp/AndroidLocation.svc/RestService/getLatestLocation",
        datatype: 'json',
        type : 'get',
        success: function(data) {
            debugger;

            var obj = data;
        }

    });

})​;​ 
```

我得到了错误

> XMLHttpRequest 无法加载 [http://www.lonestarus.com/AndroidApp/AndroidLocation.svc/RestService/getLatestLocation](http://www.lonestarus.com/AndroidApp/AndroidLocation.svc/RestService/getLatestLocation)。Access-Control-Allow-Origin 不允许来源[http://fiddle.jshell.net 。](http://fiddle.jshell.net)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:25:57.660

下面的示例代码：

```
$.ajax
(
    {
        type: 'GET',
        url: http://www.lonestarus.com/AndroidApp/AndroidLocation.svc/RestService/getLatestLocation,
        cache: false,
        async: true,
        dataType: 'json',
        success: function (response, type, xhr)
        {
            window.alert(response);
        },
        error: function (xhr)
        {
            window.alert('error: ' + xhr.statusText);
        }
    }
); 
```

# powershell - 从命令提示符运行 powershell 脚本？

> ID：14073935
> 
> 赞同：0
> 
> 时间：2012-12-28T18:19:55.363
> 
> 标签：powershell

以下脚本（当 AppMgmt 服务停止时将停止 IIS 服务）在“PowerGUI 脚本编辑器”中成功运行，但是当从控制台“powershell -file path_to_script”运行它时，它不会在事件触发时执行操作：

```
function Watch-MyService()
{
   $query = "SELECT * FROM __InstanceModificationEvent WITHIN 2 " +
             "WHERE TargetInstance Isa 'Win32_Service' " +
             "AND TargetINstance.Name = 'AppMgmt'" +
             "AND TargetInstance.State = 'Stopped'"

    $action = 
    { 
        Write-Host "stopping service # 2" 
        Stop-Service 'W3SVC' -Force
    }
    Write-Host "registering event"  
    Register-WMIEvent -query $query -SourceIdentifier "ControllerSvcEvent" -action $action
}

Watch-MyService 
```

在控制台中，我只看到：

## 注册活动

但停止“AppMgmt”服务时没有其他显示，没有输出到控制台，并且 IIS 服务不受影响。

控制台以管理员权限启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:28:21.337

当您以这种方式从命令提示符运行 PowerShell 脚本时，您的脚本会执行，然后 PowerShell 进程可能会退出（打开任务管理器以观察 PowerShell 进程在脚本执行后立即停止）。您的事件 (PowerShell) 的侦听器不再运行，因为该进程已退出。事件注册范围仅限于 PowerShell 会话的范围。

# javascript - Titanium 中的活动指示器不工作

> ID：14073939
> 
> 赞同：1
> 
> 时间：2012-12-28T18:20:08.220
> 
> 标签：javascript, android, titanium-mobile, activity-indicator

我想使用 Titanium 在我的屏幕上显示一个活动指示器，但它没有显示任何结果。它没有显示任何进展迹象。

这是我的代码：

```
var actInd = Titanium.UI.createActivityIndicator();

actInd.message = 'Please wait...';
//message will only shows in android.

var self = Ti.UI.createWindow({
    title : "About",
    navBarHidden : false,
    barColor : "#50b849",
    backgroundColor : "#2d2d2d",
});
self.add(actInd);
actInd.show();
self.orientationModes = [Titanium.UI.PORTRAIT];

var text = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory + "info.txt").read();

var infoText = Ti.UI.createTextArea({
    width : "100%",
    height : "100%",
    color : "#fff",
    backgroundColor : "#2d2d2d",
    value : text,
    editable : false,
    scrollable : false,
    font : {
        fontWeight : 'bold',
        fontSize : 20,
        fontFamily : 'Helvetica Neue'
    },
    textAlign : Ti.UI.TEXT_ALIGNMENT_CENTER,
    autoLink : Ti.UI.AUTODETECT_LINK
});

infoText.addEventListener("click", function() {
    Ti.Platform.openURL("http://tellusanotherone.org/c2p");
});

var scrollView = Ti.UI.createScrollView({
    width : "100%",
    height : "100%",
    verticalBounce : true,
    scrollType : "vertical",
});
scrollView.add(infoText);
self.add(infoText);

return self; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T05:31:48.890

只需创建文件 (lib/indicator.js) 并在其中添加以下代码

```
function createIndicatorWindow(args) {
    var width = 180,
        height = 50;

    var args = args || {};
    var top = args.top || 140;
    var text = args.text || 'Loading ...';

    var win = Titanium.UI.createWindow({
        height:           height,
        width:            width,
        top:              top,
        borderRadius:     10,
        touchEnabled:     false,
        backgroundColor:  '#000',
        opacity:          0.6
    });

    var view = Ti.UI.createView({
        width:   Ti.UI.SIZE,
        height:  Ti.UI.FILL,
        center:  { x: (width/2), y: (height/2) },
        layout:  'horizontal'
    });

    var style;
    if (Ti.Platform.name === 'iPhone OS') {
        style = Ti.UI.iPhone.ActivityIndicatorStyle.PLAIN;
    } else {
        style = Ti.UI.ActivityIndicatorStyle.DARK;
    }

    var activityIndicator = Ti.UI.createActivityIndicator({
        style : style,      
        height : Ti.UI.FILL,
        width : 30
    });

    var label = Titanium.UI.createLabel({
        left:    10,
        width:   Ti.UI.FILL,
        height:  Ti.UI.FILL,
        text:    text,
        color:   '#fff',
        font:    { fontFamily: 'Helvetica Neue', fontSize: 16, fontWeight: 'bold' }
    });

    view.add(activityIndicator);
    view.add(label);
    win.add(view);

    function openIndicator() {
        win.open();
        activityIndicator.show();
    }

    win.openIndicator = openIndicator;

    function closeIndicator() {
        activityIndicator.hide();
        win.close();
    }

    win.closeIndicator = closeIndicator;

    return win;
}

// Public interface
exports.createIndicatorWindow = createIndicatorWindow 
```

像这样在您的代码中使用

```
var uie = require('lib/indicator');
var indicator = uie.createIndicatorWindow();

someViewObject.addEventListener('click', function(e) {
    indicator.openIndicator();

    setTimeout(function() {
        // Do the work that takes a while
        // and requires an activity indicator
        indicator.closeIndicator();
    },0);
}); 
```

# c#-4.0 - 获取所有子文件夹及其大小

> ID：14073941
> 
> 赞同：1
> 
> 时间：2012-12-28T18:20:17.440
> 
> 标签：c#-4.0, combobox

我正在尝试编写一个方法。

```
public List<string> getList()
{
    string[] str;
    string no, name, size, price;
    string albumFolder = @"F:\Audio";
    char a = ' ';

    List<string> albums = new List<string>();

    albumFolder.Split(Path.DirectorySeparatorChar);
    str = albumFolder.Split(Path.DirectorySeparatorChar);

        for (int i = 0; i < str.Length; i++)
        {
            string n = str[i].ToString();
            n = n.Split(Path.DirectorySeparatorChar).ToString();
            no = (i > 8 ? "  " : "    ") + (i + 1) + "".PadRight(10, a);
            name = n.PadRight((155 - n.Length), a);
            size = "" + 512 + " MB".PadRight(20, a); // also help me finding their size
            price = "" + 80 + "".PadRight(10, a);
            albums.Add(no + name + size + price);
        }
    return albums;
} 
```

此方法将返回 a`List`以便我可以执行此操作：

```
albumList.DataSource = getList(); //albumList is a ComboBox 
```

这`List`应该包含具有所有子文件夹名称（不是位置，仅名称）的固定长度的字符串。但它就像图片一样：

![在此处输入图像描述](../Images/eb6ed5ba2253431af85da61265a7ccce.png) 提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:33:40.987

我认为这就是您可能正在寻找的（尽管我同意有更好/更简单的方法）：

```
public List<string> getList()
        {
            string no, name, size, price;
            string albumFolder = @"F:\Audio";
            char a = ' ';

            List<string> albums = new List<string>();

            string[] str = Directory.GetDirectories(albumFolder);

            for (int i = 0; i < str.Length; i++)
            {
                DirectoryInfo info = new DirectoryInfo(str[i]);
                no = (i > 8 ? "  " : "    ") + (i + 1) + "".PadRight(10, a);
                name = info.Name.PadRight(155, a);
                size = "" + 512 + " MB".PadRight(20, a); // also help me finding their size
                price = "" + 80 + "".PadRight(10, a);
                albums.Add(no + name + size + price);
            }
            return albums;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:22:19.047

更改[`List<String>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)为[`BindingList<String>`](http://msdn.microsoft.com/en-us/library/ms132679.aspx)

```
public BindingList<string> getList()
{
    ...
   return new BindingList<string>(albums);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:32:15.523

您的代码非常复杂，不必如此。请使用 Directory 和 Path 类，即 Path.GetDirectoryName，不要手动解析。

以下是一些以 pre-NET4 方式遍历文件的代码：

```
/// <summary>
/// Walks all file names that match the pattern in a directory
/// </summary>
public static IEnumerable<string> AllFileNamesThatMatch(this string fromFolder, string pattern, bool recurse)
{
  return Directory.GetFiles(fromFolder,
                     pattern,
                     recurse ? SearchOption.AllDirectories :
                               SearchOption.TopDirectoryOnly);
}

/// <summary>
/// Walks all file names in a directory
/// </summary>
public static IEnumerable<string> AllFileNames(this string fromFolder, bool recurse)
{
  return fromFolder.AllFileNamesThatMatch("*.*", recurse);
} 
```

您可以通过使用 Sum<> LINQ 遍历 IEnumerable 来获取大小

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T18:38:56.720

从您的代码中删除以下行，一切正常。

```
n = n.Split(Path.DirectorySeparatorChar).ToString(); 
```

# jquery - 使用 jquery 加载的菜单不会被激活

> ID：14073945
> 
> 赞同：0
> 
> 时间：2012-12-28T18:20:27.690
> 
> 标签：jquery, html, css

我正在用菜单构建一些 html，并且我在我的页面上使用 jquery 来包含它。当用户点击某个链接时，该`a`元素会获得一些类：`ativado`.

我的问题是，我如何加载用户单击“激活”菜单链接的页面？

我很清楚？

我的菜单：

```
<ul class="sf-menu">
    <li>
        <a href="#">O Clube</a>
        <ul>
            <li class="first"><a href="sobre.html">- Sobre</a></li>
            <li><a href="basquete_em_franca.html">- Basquete em Franca</a></li>
            <li><a href="ginasio.html">- Ginásio</a></li>
            <li><a href="titulos.html">- Títulos</a></li>
            <li><a href="times.html">- Times</a></li>
            <li><a href="social.html">- Social</a></li>
            <li><a href="estatisticas.html">- Estatísticas</a></li>
            <li><a href="cronograma_historico.html">- Cronograma Histórico</a></li>
            <li><a href="pedroca.html">- Pedroca</a></li>
            <li class="last"><a href="hino.html">- Hino</a></li>
        </ul>
    </li>
    <li><a href="equipe.html">A Equipe</a></li>
    <li><a href="calendario.html">Calendário</a></li>
    <li><a href="campeonatos.html">Campeonatos</a></li>
    <li><a href="socio_torcedor.html">Sócio Torcedor</a></li>
    <li><a href="noticias.html">Notícias</a></li>
    <li><a href="blog.html">Blog</a></li>
    <li><a href="loja.html">Loja</a></li>
    <li><a href="parceiros.html">Parceiros</a></li>
    <li><a href="links.html">Links</a></li>
    <li class="last"><a href="fale_conosco.html">Fale Conosco</a></li>
</ul> 
```

我的脚本：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.sf-menu a').click(function(e) {
            e.preventDefault();
            $('.sf-menu a').removeClass('ativado');
            $(this).addClass('ativado');
            var novaURL = $(this).attr('href');
            $(window.document.location).attr('href',novaURL);
        });

    });
</script> 
```

CSS：

```
.sf-menu a.ativado{
    color:#FFF;
    background:#CC0000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:38:59.137

您需要实施一些新技术来实现您想要做的事情。JavaScript 是一种客户端语言，因此如果您通过单击 DOM 元素来更改类，那么同样的单击会将您带到另一个页面，您将丢失由 JS 设置的类！

这里只是您可以使用的几个选项。如果您想让我详细说明其中任何一个，请发表评论。

## 选项 1：服务器端脚本

第一个选项是使用服务器端语言（如 PHP）处理这些动态类。例如，[使用这样的解决方案](https://stackoverflow.com/questions/6475221/php-getting-current-url)来获取当前页面的 URL。然后，编写一些逻辑，例如：

```
<a href="lala.php" class="<?php if($page=='lala') { echo 'active'; } ?>"> 
```

如果您在该页面上，它将附加课程。这主要是我为我只是快速拼凑在一起的网站所做的。

## 选项 2：AJAX

您还可以进行 ajax 调用以从服务器中提取数据并更新页面上的内容。这很糟糕，因为它不会更新 URL 或用户的浏览器历史记录；它看起来就像他们正在页面本身上浏览您的页面。

## 选项 3：AJAX + HTML5 浏览器 API

此选项是所有选项中最复杂的，但它仅适用于现代浏览器。您要做的是进行 AJAX 调用，然后使用[HTML5 历史 API](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)来修改用户的历史。这样做的目的是使新内容出现，同时更改浏览器窗口中的 URL 并将新页面添加到用户的历史记录中——所有这些都无需重新加载。相当了不起。

## 选项 4：可链接选项卡

我认为这个解决方案非常糟糕，但它会做你想做的事。有很多可能性；我不会试图在这里列出它们来重新发明轮子。您可以查看其中一些，看看是否对您有用。

[一](http://css-tricks.com/better-linkable-tabs/) [二三](http://css-tricks.com/examples/CSSTabs/) [_](http://css-tricks.com/functional-css-tabs-revisited/)

## 选项 5：硬编码页面

另一种选择——也许是最糟糕的——将菜单代码放在你的每个网页上。然后在每个页面上，您可以将类附加到正确的链接。我不会这样做，因为如果您的网站不止几个页面，维护起来就太乏味了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:56:08.180

您可以使用此脚本获取当前页面名称：

```
var sPath = window.location.pathname;
var sPage = sPath.substring(sPath.lastIndexOf('/') + 1); 
```

*来自： http: [//fuchangmiao.blogspot.com/2009/04/get-current-page-name-in-javascript.html](http://fuchangmiao.blogspot.com/2009/04/get-current-page-name-in-javascript.html)*

然后您可以找到应该激活的锚标记：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.sf-menu a').click(function(e) {
            e.preventDefault();
            $('.sf-menu a').removeClass('ativado');
            $(this).addClass('ativado');
            var novaURL = $(this).attr('href');
            $(window.document.location).attr('href',novaURL);
        });

        $(".sf-menu a[href='" + sPage + "']").addClass("ativado");
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:38:26.860

检查代码的这些行：

```
e.preventDefault();
$('.sf-menu a').removeClass('ativado');
$(this).addClass('ativado'); 
```

我在这里测试了评论这些行并且它有效。
也许这个 e.preventDefault() 正在触发错误，并且其余代码无法正常工作。

# oracle10g - Oracle 10g XE：rman 显示成功完整备份后所有数据文件都需要备份

> ID：14073946
> 
> 赞同：1
> 
> 时间：2012-12-28T18:20:34.023
> 
> 标签：oracle10g, oracle-xe, rman

我在 openSuSE 11.2 上运行 Oracle 10g XE 版本 10.2.0.1 时遇到问题。RMAN 显示所有数据文件都需要备份，即使在成功完整备份之后也是如此：

```
RMAN> report need backup;

using target database control file instead of recovery catalog
RMAN retention policy will be applied to the command
RMAN retention policy is set to redundancy 2
Report of files with less than 2 redundant backups
File #bkps Name
---- ----- -----------------------------------------------------
1    0     /usr/lib/oracle/xe/oradata/XE/system.dbf
2    0     /usr/lib/oracle/xe/oradata/XE/undo.dbf
3    0     /usr/lib/oracle/xe/oradata/XE/sysaux.dbf
4    0     /usr/lib/oracle/xe/oradata/XE/users.dbf
5    0     /oracle/XE/oradata/XE/datafile01.dbf
6    0     /oracle/XE/oradata/XE/index01.dbf

RMAN> list backup summary;

List of Backups
===============
Key     TY LV S Device Type Completion Time #Pieces #Copies Compressed Tag
------- -- -- - ----------- --------------- ------- ------- ---------- ---
1671    B  F  A DISK        26-DEC-12       1       1       YES        TAG20121226T010015
1674    B  A  A DISK        26-DEC-12       1       1       YES        TAG20121226T011359
1676    B  F  A DISK        27-DEC-12       1       1       YES        TAG20121227T010018
1679    B  A  A DISK        27-DEC-12       1       1       YES        TAG20121227T011434
1687    B  F  A DISK        28-DEC-12       1       1       YES        TAG20121228T010021
1689    B  F  A DISK        28-DEC-12       1       1       NO         TAG20121228T011355
1690    B  A  A DISK        28-DEC-12       1       1       YES        TAG20121228T011408
1691    B  F  A DISK        28-DEC-12       1       1       NO         TAG20121228T011506 
```

RMAN 参数如下：

```
RMAN> show all;

RMAN configuration parameters are:
CONFIGURE RETENTION POLICY TO REDUNDANCY 2;
CONFIGURE BACKUP OPTIMIZATION OFF; # default
CONFIGURE DEFAULT DEVICE TYPE TO DISK; # default
CONFIGURE CONTROLFILE AUTOBACKUP ON;
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK TO '%F'; # default
CONFIGURE DEVICE TYPE DISK PARALLELISM 1 BACKUP TYPE TO BACKUPSET; # default
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default
CONFIGURE MAXSETSIZE TO UNLIMITED; # default
CONFIGURE ENCRYPTION FOR DATABASE OFF; # default
CONFIGURE ENCRYPTION ALGORITHM 'AES128'; # default
CONFIGURE ARCHIVELOG DELETION POLICY TO NONE; # default
CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/usr/lib/oracle/xe/app/oracle/product/10.2.0/server/dbs/snapcf_XE.f'; # default 
```

数据库功能正常；但是，RMAN 不会自动删除早于保留策略（2 天）的备份。我必须每天手动删除旧备份以避免磁盘空间不足。

综上所述，问题如下：

1.  RMAN 显示所有数据文件都需要备份，即使在成功完整备份之后也是如此。
2.  RMAN 不会自动删除早于保留策略的备份。

我不清楚#2 是一个症状，还是一个单独的问题。

任何建议或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T20:46:31.680

#bkps=0 的问题看起来很奇怪，对你有好处，你已经解决了。

RMAN 不会自动删除备份。在安排备份时，您还应该安排此 RMAN 命令：

```
DELETE NOPROMPT OBSOLETE; 
```

如果您没有在备份后立即删除归档日志（`delete input`），您也应该处理它。

```
DELETE ARCHIVELOG ALL COMPLETED BEFORE 'SYSDATE-3'; 
```

并且您应该被告知从媒体“消失”的 RMAN 文件（即有人在操作系统级别移动/删除了它们，但留下了 RMAN 元数据）：

```
LIST EXPIRED; 
```

# php - 登录密码验证返回未知错误

ID：14073948

赞同：0

时间：2012-12-28T18:20:43.460

标签：php, authentication, pdo, bcrypt

# powershell - 使用 powershell 创建 MSMQ 消息的克隆/复制副本

> ID：14073961
> 
> 赞同：1
> 
> 时间：2012-12-28T18:21:33.017
> 
> 标签：powershell, msmq

我正在开发一个 powershell 实用程序，该实用程序将通过在队列被消费者进程耗尽时添加现有消息的重复副本来维护私有队列上的最少消息数量。

这是我正在做的

```
[Reflection.Assembly]::LoadWithPartialName("System.Messaging") | out-null
[Reflection.Assembly]::LoadWithPartialName("System.Text") | out-null
.
.
$enum = $queue.GetMessageEnumerator2();

while($enum.MoveNext())
{
    #Strategy 1 - Re-add existing message to queue
    $message = $enum.Current;
    $queue.Send($message);

    #Strategy 2 - Add a dummy message to queue
    $messageClone = New-Object System.Messaging.Message;
    $queue.Send($messageClone);

    logInfo("Number of messages in Queue - " + $queue.GetAllMessages().Length);
}
.
. 
```

我认为这不起作用，因为在将消息添加到队列后，消息总数保持不变。您能否指出这种方法的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:12:11.967

好吧，我没有以正确的方式创建重复的消息。这是这个问题的解决方案

```
[Reflection.Assembly]::LoadWithPartialName("System.Messaging") | out-null
[Reflection.Assembly]::LoadWithPartialName("System.Text") | out-null
.
.
$enum = $queue.GetMessageEnumerator2();

while($enum.MoveNext())
{
    $tran = new-object System.Messaging.MessageQueueTransaction;
    $tran.Begin();

    #$msgContent
    $message = $enum.Current;

    $msg = new-object System.Messaging.Message;
    $msg.BodyStream = $message.BodyStream;
    $queue.Send($msg, $tran);

    $tran.Commit();          
}
.
. 
```

# apache - htaccess 301 规则不重定向

> ID：14073963
> 
> 赞同：0
> 
> 时间：2012-12-28T18:22:04.647
> 
> 标签：apache, .htaccess

我似乎无法弄清楚如何 301 将旧 URL 重定向`https://www.mydomain.com/old_url/`到`https://www.mydomain.com/new_url/`

我目前在我的 htaccess 中有以下内容（注意与此问题相关的第二条规则）：

```
RewriteEngine On
# SSL redirect
RewriteCond %{HTTP:X-Forwarded-SSL} !on
RewriteRule ^(.*) https://www.mydomain.com$1 [R=301,nc]

RewriteCond %{THE_REQUEST} ^GET\ /old_url/
RewriteRule ^/old_url$ https://www.mydomain.com/new_url [R=301,nc]

# If the root has a querystring with at least 1 character
RewriteCond %{QUERY_STRING} ^.+
RewriteRule ^/?$ https://www.mydomain.com/new_home_page [R=301,nc] 
```

如果这有所作为，我也在使用 Django。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:30:37.717

而不是这个：

```
RewriteCond %{THE_REQUEST} ^GET\ /old_url/
RewriteRule ^/old_url$ https://www.mydomain.com/new_url [R=301,nc] 
```

你可以试试这个：

```
RewriteCond %{REQUEST_URI} old_url/(.*)
RewriteRule .* https://www.mydomain.com/new_url/%1 [R=301,QSA,NC] 
```

将重定向：

`https://www.mydomain.com/old_url/whatever`

到：

`https://www.mydomain.com/new_url/whatever`

**更新**

如果不复制 URI 的其余部分（“whatever”），请使用：

```
RewriteCond %{REQUEST_URI} old_url.*
RewriteRule .* https://www.mydomain.com/new_url [R=301,QSA,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:25:17.847

以下应该可以正常工作：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^old_url$ /new_url [L,R=301]
RewriteRule ^old_url/(.*) /new_url/$1 [L,R=301] 
```

# php - 使用 PHP 的 getlastmod() 和 SSI 制作动态页脚？

> ID：14073964
> 
> 赞同：0
> 
> 时间：2012-12-28T18:22:04.787
> 
> 标签：php, web, ssi

print我一直在尝试为我网站上的所有页面创建标准页脚。为了测试这一点，我创建了一个最小文件，如下所示：

```
<html>
<body>
This is a test file.
<!--#include virtual="/footer.php" -->
</body>
</html> 
```

然后，我在 footer.php 中：

```
<div id="footer">
What a lovely footer! <br />
<?php
    echo "Last modified: " . date("d F Y H:i:s.", getlastmod()); 
?>
</div> 
```

但是，最后显示的修改日期是 footer.php

我怎样才能使它打印包含它的文件的最后修改日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T06:11:08.453

你必须使用服务器端包含吗？如果您使用 php 包含 footer.php：

```
<?php include 'footer.php'; ?> 
```

它给出了包含文件（不是页脚文件）的最后修改日期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:25:24.340

您可以尝试`filemtime($_SERVER['PHP_SELF'])`，但是我不确定服务器端包含如何工作，因此这也可能会产生页脚文件的修改时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-12T14:13:00.350

你可以试试：

```
<?php echo "last modified: ".filemtime($_SERVER['REQUEST_URI']); ?> 
```

# android - 我需要添加一种编辑、删除或启动活动的方法，该活动根据列表视图中的选择显示数据库记录

> ID：14073969
> 
> 赞同：0
> 
> 时间：2012-12-28T18:22:41.810
> 
> 标签：android, contextmenu

我正在编写一个显示属性列表的应用程序。目前，当您单击一个地址时，它会启动编辑活动，当您长按该地址时，它会显示一个带有删除选项的上下文菜单。

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(this, ProjectEditActivity.class);
    i.putExtra(ProjectDbAdapter.ROW_ID, id);
    startActivityForResult(i, ACTIVITY_EDIT);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    switch(item.getItemId()) {
        case R.id.menu_project_delete:
            AdapterContextMenuInfo info =
                    (AdapterContextMenuInfo) item.getMenuInfo();
            mDbHelper.deleteProject(info.id);
            fillData();
            return true;
    }
    return super.onContextItemSelected(item);
} 
```

我想修改它，以便单击地址显示记录以供查看，上下文菜单提供删除和编辑记录的选项。

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(this, ProjectShowActivity.class);
    i.putExtra(ProjectDbAdapter.ROW_ID, id);
    startActivityForResult(i, ACTIVITY_EDIT);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    switch(item.getItemId()) {
        case R.id.menu_project_delete:
            AdapterContextMenuInfo deleteInfo =
                    (AdapterContextMenuInfo) item.getMenuInfo();
            mDbHelper.deleteProject(deleteInfo.id);
            fillData();
            return true;
        case R.id.menu_project_edit:
            AdapterContextMenuInfo editInfo =
                    (AdapterContextMenuInfo) item.getMenuInfo();
            Intent i = new Intent(this, ProjectEditActivity.class);
            i.putExtra(ProjectDbAdapter.ROW_ID, id)
            startActivityForResult(i, ACTIVITY_EDIT);
            fillData();
            return true;
    }
    return super.onContextItemSelected(item);
} 
```

不幸的是，我不知道如何在对 i.putExtra 的调用中确定 id 的值。任何建议，将不胜感激

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;

public class ProjectDbAdapter extends DbAdapter {

    private static final String DATABASE_TABLE = "Project";
    public static final String ROW_ID = "_id";
    public static final String STREET = "Street";
    public static final String CITY = "City";
    public static final String STATE = "State";
    public  static final String ZIP = "Zip";
    public static final String OTHER = "Other";

    /**
     * Constructor - takes the context to allow the database to be
     * opened/created
     *
     * @param ctx the Context within which to work
     */
    public ProjectDbAdapter(Context ctx) {
        super(ctx);
    }

    /**
     * Create a new project. If the project is successfully created return the
     * new rowId for the project, otherwise return -1 to indicate failure
     *
     * @param street
     * @param city
     * @param state
     * @param zip
     * @param other
     * @return rowId or -1 if failed
     */
    public long createProject(String street, String city, String state, String zip,         String other) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(STREET, street);
        initialValues.put(CITY, city);
        initialValues.put(STATE, state);
        initialValues.put(ZIP, zip);
        initialValues.put(OTHER, other);
        return this.mDb.insert(DATABASE_TABLE, null, initialValues);
    }

    /**
         * Delete the project with the given rowId
     *
     * @param rowId
     * @return true if deleted or false if not
     * @param rowId
     * @return
     */
    public boolean deleteProject(long rowId) {
        return this.mDb.delete(DATABASE_TABLE, ROW_ID + "=" + rowId, null) > 0;
    }

    /**
                     * Return a Cursor over the list of all projects in the database
     *
     * @return Cursor over all projects
     */
    public Cursor getAllProjects() {
        return this.mDb.query(DATABASE_TABLE,
                new String[]{ROW_ID, STREET, CITY, STATE, ZIP, OTHER},
                null, null, null, null, null);
    }

    /**
     * Return a Cursor positioned at project that matches the given rowId
     *
     * @param rowId
             * @return Cursor positioned to matching project, if found
     * @throws SQLException if project could not be found/retrieved
     */
    public Cursor getProject(long rowId) throws SQLException {
        Cursor mCursor = this.mDb.query(DATABASE_TABLE, new String[]{ROW_ID, STREET,     CITY, STATE, ZIP, OTHER},
                ROW_ID + "=" + rowId, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    /**
     * Update the project
     *
     * @param rowId
     * @param street
     * @param city
     * @param state
     * @param zip
     * @param other
     * @return true if the record was updated or false if not
         */
    public boolean updateProject(long rowId, String street, String city, String state,     String zip, String other) {
        ContentValues args = new ContentValues();
        args.put(STREET, street);
        args.put(CITY, city);
        args.put(STATE, state);
        args.put(ZIP, zip);
        args.put(OTHER, other);
        return this.mDb.update(DATABASE_TABLE, args, ROW_ID + "=" + rowId, null) > 0;
    }
}

    import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.os.Bundle;
import android.util.Log;

/**
 *
 * @author TJDroid
 */
public class DbAdapter {

    protected static final String DBADAPTER_TAG = "DbAdapter";
    protected static final String DATABASE_NAME = "TJBuilder";
    protected static final int DATABASE_VERSION = 1; 

    protected static final String CREATE_TABLE_PROJECT = 
            "create table Project (_id integer primary key autoincrement, "
            + "Street TEXT, "
            + "City TEXT, "
            + "State TEXT, "
            + "Zip TEXT, "
            + "Other TEXT);";

    protected final Context mCtx;
    protected DatabaseHelper mDbHelper;
    protected SQLiteDatabase mDb;

             protected static class DatabaseHelper extends SQLiteOpenHelper {

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
            public void onCreate(SQLiteDatabase db) {

            db.execSQL("DROP TABLE IF EXISTS Project");
            db.execSQL(CREATE_TABLE_PROJECT);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(DBADAPTER_TAG, "Upgrading database from version " + oldVersion + " to         "
                    + newVersion + ", which will destroy all old data");
                db.execSQL("DROP TABLE IF EXISTS Project");
            onCreate(db);
        }
    }

    /**
     * Constructor - takes the context to allow the database to be
     * opened/created
     * 
     * @param ctx the Context within which to work
     */
    public DbAdapter(Context ctx) {
        this.mCtx = ctx;
    }

    public DbAdapter open() throws SQLException {
        mDbHelper = new DatabaseHelper(mCtx);
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        mDbHelper.close();
        }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:29:57.587

> 不幸的是，我不知道如何在对 i.putExtra 的调用中确定 id 的值。任何建议，将不胜感激

您可以使用[`getItemId()`](http://developer.android.com/reference/android/view/MenuItem.html#getItemId%28%29)：

```
Intent i = new Intent(this, ProjectEditActivity.class);
i.putExtra(ProjectDbAdapter.ROW_ID, item.getItemId());
startActivityForResult(i, ACTIVITY_EDIT); 
```

# apache - 密码保护我的网站

> ID：14073972
> 
> 赞同：14
> 
> 时间：2012-12-28T18:23:01.933
> 
> 标签：apache, amazon-ec2, webserver

我最近使用 Amazon Linux AMI 创建了一个新的 Amazon EC2 实例。强制访问域的用户在允许访问站点之前输入用户名/密码的最佳方法是什么？

我目前正在使用 apache http 服务器，并看到一些资源表明我需要使用 .htaccess 文件，但正在寻找更简洁的解释。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-08-12T02:37:50.330

## 通过 Htaccess 密码保护站点

1.  在要保护的文件夹中创建一个包含以下内容的 .htaccess 文件：

    ```
    AuthType Basic
    AuthName "Password Protected Area"
    AuthUserFile /var/www/admin/.htpasswd
    Require valid-user 
    ```

2.  `.htpasswd`在相同或最好是外部文件夹中创建一个文件`/var/www`。

    为了演示，我在上面使用了一个虚拟路径。.htpasswd 文件应包含您的密码 salt 使用[此生成器](http://www.htaccesstools.com/htpasswd-generator/)创建您的`.htpasswd`文件。

3.  假设您使用的是 ubuntu，您必须通过此文件启用 htaccess 覆盖：`/etc/apache2/sites-available/default`

    将“AllowOverride None”更改为“AllowOverride All”：

    ```
    <Directory /var/www/>
       Options Indexes FollowSymLinks MultiViews
       AllowOverride None
       Order allow,deny
       allow from all
    </Directory> 
    ```

注意：您可能需要通过命令行在 ssh 中进行编辑：`sudo nano /etc/apache2/sites-available/default`

4.  `sudo /etc/init.d/apache2 reload`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T23:29:07.437

如果您正在寻找的只是服务器级别的访问控制（即不修改您的应用程序），您可以使用基本身份验证。这是在 Apache Web 服务器级别实现的，如果需要，可以使用 .htaccess 文件在逐个目录的基础上进行控制。

这是 Apache 文档的链接

[http://httpd.apache.org/docs/2.2/howto/auth.html](http://httpd.apache.org/docs/2.2/howto/auth.html)

这是一个如何实现的简单示例

[http://doc.norang.ca/apache-basic-auth.html](http://doc.norang.ca/apache-basic-auth.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-01T05:09:56.477

您需要生成密码用户名+密码字符串进行身份验证并将其写入文件。

*   您可以使用[HTTP 密码生成器工具](http://www.asempt.com/tool/http-password-generator)来执行此操作。
*   将获得的字符串复制粘贴到 Webroot 之外的任何位置的新文件 (.htpasswd) 中（最好保留在用户主目录内的任何位置）。
*   在 .htaccess 文件中添加以下行。

> ```
> AuthType Basic
> AuthName "Require Authentication"
> AuthUserFile [PATH_TO_FILE]/.htpasswd
> Require valid-user 
> ```

*   如果密码未触发，请检查 .htaccess 文件的权限。

*   如果验证失败，请检查指定位置是否存在 .htpasswd 文件。（确保您的用户帐户对 .htpasswd 文件有足够的权限来读取）

*   您无需重新启动服务器即可实现此目的。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-10T20:41:32.207

生成加密密码并添加到 .htpasswd 文件

```
$ htpasswd -nbm username Password 
```

*.htaccess 文件条目*

```
AuthType Basic
AuthName "My Protected Area"
AuthUserFile /absolute/path/to/password/file
Require valid-user 
```

[有关更多详细信息，请参阅此博客文章 - iCodefy](http://icodefy.com/password-protection-to-website-using-htaccess/)

# android - RuntimeException：无法启动活动 ComponentInfo：java.lang.NullPointerException

> ID：14073974
> 
> 赞同：0
> 
> 时间：2012-12-28T18:23:03.400
> 
> 标签：android, mysql, web-services, axis2, listview-selector

您好我正在尝试使用 web 服务axis2将mysql中的数据显示到android listview中。当我运行我的应用程序时，会出现以下异常。这是 Logcat 的详细信息

```
12-28 21:20:45.180: E/AndroidRuntime(406): FATAL EXCEPTION: main
12-28 21:20:45.180: E/AndroidRuntime(406): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kbj/com.kbj.Invitation}: java.lang.NullPointerException
12-28 21:20:45.180: E/AndroidRuntime(406):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
12-28 21:20:45.180: E/AndroidRuntime(406):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-28 21:20:45.180: E/AndroidRuntime(406):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-28 21:20:45.180: E/AndroidRuntime(406):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-28 21:20:45.180: E/AndroidRuntime(406):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-28 21:20:45.180: E/AndroidRuntime(406):  at android.os.Looper.loop(Looper.java:123)
12-28 21:20:45.180: E/AndroidRuntime(406):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-28 21:20:45.180: E/AndroidRuntime(406):  at java.lang.reflect.Method.invokeNative(Native Method)
12-28 21:20:45.180: E/AndroidRuntime(406):  at java.lang.reflect.Method.invoke(Method.java:521)
12-28 21:20:45.180: E/AndroidRuntime(406):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-28 21:20:45.180: E/AndroidRuntime(406):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-28 21:20:45.180: E/AndroidRuntime(406):  at dalvik.system.NativeStart.main(Native Method)
12-28 21:20:45.180: E/AndroidRuntime(406): Caused by: java.lang.NullPointerException
12-28 21:20:45.180: E/AndroidRuntime(406):  at com.kbj.Invitation.onCreate(Invitation.java:49)
12-28 21:20:45.180: E/AndroidRuntime(406):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-28 21:20:45.180: E/AndroidRuntime(406):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-28 21:20:45.180: E/AndroidRuntime(406):  ... 11 more
12-28 21:20:50.690: I/Process(406): Sending signal. PID: 406 SIG: 9 
```

这是我的功能

**1、Web Services类中的retrieveData**

```
public ArrayList<InvitePlayerDetails> retrievePlayer(String userName){

    Connection conn=null;
    PreparedStatement stmt=null;

      ResultSet result = null; 
      String retrievedUserName = "";
      //Boolean b = false;
     // String retrievedPassword = "";
      ArrayList<InvitePlayerDetails> playersList = new ArrayList<InvitePlayerDetails>();

    try{

       conn = Util.getConnection();
       stmt =  conn.prepareStatement("SELECT kbj_username FROM kbj_registration");
       result = stmt.executeQuery();
       System.out.println(result);

       while(result.next()){
        retrievedUserName = result.getString("kbj_username");
        System.out.println(retrievedUserName);
        InvitePlayerDetails p1 = new InvitePlayerDetails(retrievedUserName, false);
       // ArrayList<InvitePlayerDetails> playersList = new ArrayList<InvitePlayerDetails>(retrievedUserName, b);
        playersList.add(p1);

        System.out.println("PlayerListAdded" + playersList);
    }

      }
      catch(SQLException e)
      {
          e.printStackTrace();
      }

      finally
        {           
        Util.CloseDbResources(result, stmt, conn);

        }
return playersList;
}
} 
```

**这是我的android活动功能..**

公共类邀请扩展活动{

```
private final String NAMESPACE = "http://ws.kbj.com";
private final String URL = "http://10.0.2.2:8085/WS_KBJ/services/Kbj_WebService?wsdl";
private final String SOAP_ACTION = "http://ws.kbj.com/retrievePlayer";
private final String METHOD_NAME = "retrievePlayer";

@Override
protected void onCreate(Bundle savedInstanceState) {

    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.invitation);

    final TextView userName = (TextView) findViewById(R.id.CurPlayername);
    userName.setText(getIntent().getExtras().getString("UserName"));

    final Button fbBtn = (Button) findViewById(R.id.fbButton);
    final Button inviteBtn = (Button) findViewById(R.id.inviteBtn);
    ListView listView = (ListView) findViewById(R.id.invitePlayerList);  
    ArrayList<InvitePlayerDetails> playersList = new ArrayList<InvitePlayerDetails>();  

    playersList = retriveData();

    InvitePlayersBaseAdapter adapter = new InvitePlayersBaseAdapter(this, playersList);  
    listView.setAdapter(adapter);  
    listView.setOnItemClickListener(new OnItemClickListener() {  
        public void onItemClick(AdapterView<?> arg0, View v, int position,  
                long id) {  

        }  
    });  
    final Intent openFbOrTwLoginPage = new Intent(this, FbOrTwLogin.class);
    final Intent openNotificationPage = new Intent(this, Notification.class);
    fbBtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            startActivity(openFbOrTwLoginPage);

        }
    });
    twBtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            startActivity(openFbOrTwLoginPage);

        }
    });
    inviteBtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(openNotificationPage);

        }
}

public ArrayList<InvitePlayerDetails> retriveData(){
ArrayList<InvitePlayerDetails> playersList = new ArrayList<InvitePlayerDetails>();
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("userName");//Define the variable name in the web service method
    unameProp.setValue(title);//set value for userName variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
        androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

           System.out.println("SoapPriitive:"+response);
           //status1 = Boolean.parseBoolean(response.toString());

    }
    catch(Exception e){

    }

    return playersList;
} 
```

}

**我创建了一个 pojo 类，它是**

```
public class InvitePlayerDetails {

private String invitedplayerName;
private boolean ckBox;
  public InvitePlayerDetails(String invitedplayerName,boolean cb1) {  
        this.invitedplayerName = invitedplayerName;  
        this.ckBox = cb1;  
    }  

public String getInvitedplayerName() {
    return invitedplayerName;
}
public void setInvitedplayerName(String invitedplayerName) {
    this.invitedplayerName = invitedplayerName;
}
public boolean getCkBox() {
    return ckBox;
}
public void setCkBox(boolean b) {
    this.ckBox = b;
}

} 
```

请帮我解决这个问题..告诉我我的代码哪里出了问题..如果有人有关于使用axis2在列表视图中显示来自mysql的数据的代码，请在此处提供..对不起我的英语..提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:55:17.363

你没有指出哪一行是 49，但我有几个猜测：

```
userName.setText(getIntent().getExtras().getString("UserName")); 
```

在这里，您不检查 if `getIntent()`、`getExtras()`甚至`getString("UserName")`返回 null。在尝试使用它之前，您应该确保每个方法都返回有效数据。

我也没有`twBtn`在其他任何地方看到：

```
twBtn.setOnClickListener(new View.OnClickListener() {

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        startActivity(openFbOrTwLoginPage);

    }
}); 
```

它没有初始化，甚至没有定义......

如果这些都不在第 49 行，请仔细检查您的布局`invitation.xml`以确保您搜索的*每个*`findViewById()`视图都在此布局中。否则`findViewById()`会返回空...

# visual-c++ - 如何在opencv2.3中将图像序列组合成视频？

> ID：14073975
> 
> 赞同：0
> 
> 时间：2012-12-28T18:23:06.630
> 
> 标签：visual-c++, image-processing, opencv, visual-c++-2008

我正在尝试组合图像序列，使其成为视频。我有图像序列，它们被分成 200 个数字的帧。请任何人告诉我如何将它们组合起来并在 opencv 2.3 中制作视频剪辑。我在 Visual Studio C++ 2008 中使用它。实际上，首先我已经尝试并在这个站点上要求也连续显示多个图像，但没有得到正确的答案。

所以任何人都可以给我建议将图像序列组合成视频。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:24:52.883

使用[HighGUI](http://opencv.willowgarage.com/wiki/documentation/cpp/highgui/VideoWriter)的 VideoWriter。

```
Mat frame;
VideoWriter record("RobotVideo.avi", CV_FOURCC('D','I','V','X'), 
    30, frame.size(), true);

record << frame; 
```

# javascript - jQuery改变追加onClick

> ID：14073980
> 
> 赞同：4
> 
> 时间：2012-12-28T18:23:28.963
> 
> 标签：javascript, jquery

我有以下 jQuery 代码，它定位`ul`页面上的元素，隐藏`li`该元素内第三个项目之后的任何项目，`ul`并附加一个*“显示更多！”* 单击时显示/切换隐藏列表项的文本链接。

```
$('ul')
    .find('li:gt(2)')
    .hide()
    .end()
    .append(
        $('<li>Show More!</li>').click( function(){
        $(this).siblings().toggle(500);
        })
    ); 
```

**脚本功能示例：http: [//jsfiddle.net/vf6j5/](http://jsfiddle.net/vf6j5/)**

以下是我希望脚本执行的操作：在*“显示更多！”之后显示隐藏元素时。*被点击，我想要*“显示更多！”* 文本替换为*“少显示！”* . 这样做会更加用户友好并且更有意义。

关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:29:08.433

[http://jsfiddle.net/vf6j5/2/](http://jsfiddle.net/vf6j5/2/)

```
$('ul')
    .find('li:gt(2)')
    .hide()
    .end()
    .append(
        $('<li>Show More!</li>').click(function() {
            var txt = $(this).text() == "Show More!" ? "Show Less!" : "Show More!";
            $(this).text(txt).siblings(':gt(2)').toggle(500);
        })
    );​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T18:29:18.987

看看这个：

```
$('ul')
        .find('li:gt(2)')
         .hide()
        .end()
        .append(
            $('<li class="title">Show More!</li>').click( function(){
            $(this).siblings().toggle(500);
                $(".title").html() === "Show More!"
                    ? $(".title").html("Show Less!")
                    : $(".title").html("Show More!")

            })
        ); 
```

[工作代码](http://jsfiddle.net/vf6j5/1/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-28T18:27:23.200

```
$('ul').find('li:gt(2)').hide().end().append(
$('<li>Show More!</li>').click(function() {
    var $this = $(this);
    $this.siblings().toggle(500);
    $this.text(function(i, t) {
        return t === 'Show More!' ? 'Show Less!' : 'Show More!'
    })
})); 
```

[http://jsfiddle.net/aGeMp/](http://jsfiddle.net/aGeMp/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-28T18:29:58.827

```
$('ul').find('li:gt(2)')
       .hide()
       .end()
       .append(
         $('<li>Show More!</li>').click(function() {
            $(this).text($(this).prev('li').is(':visible') ? 'Show More' : 'Show Less')
                   .siblings().toggle(500);
         })
       );​ 
```

[**小提琴**](http://jsfiddle.net/adeneo/vf6j5/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T18:26:16.910

非常简单 - 选择要更改的元素并修改其文本

```
$('#myButton').text('Show Less!'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T18:27:07.627

由于您已经`this`在 click 事件中，只需调用`.text()`它：

```
.... .click(function() {
  var that = $(this);
  that.siblings().toggle(500);
  that.text("Show less!");
}); 
```

# tcl - Tcl 程序无法读取另一个程序传入的变量

> ID：14073981
> 
> 赞同：1
> 
> 时间：2012-12-28T18:23:35.100
> 
> 标签：tcl

我有一个 Tcl 过程，它围绕另一个过程并传递一些参数，如下所示：

```
proc OuterProc {
  ...some code here...
  InnerProc $a $b
}

proc InnerProc { a, b } {
  set someVar1 [split $a]
  set someVar2 [split $b]
  ...error: cannot read variable a or b
} 
```

为什么`InnerProc`看不到传入的 2 个参数？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:48:39.303

问题中显示的问题是您的参数列表中有逗号。请注意，Tcl 通常使用空格来分隔参数，而不是逗号。

```
proc OuterProc {} {
    set x foo
    set y bar
    InnerProc $x $y
}
proc InnerProc {a b} {
    puts "a=$a"
    puts "b=$b"
}
OuterProc 
```

生产

```
a=foo
b=bar 
```

我在 OuterProc 过程中使用了不同的变量名来证明无论你的局部变量*名*是什么，Tcl 都会将*值*传递给下一个过程。

如果这不是您的问题，那么您需要更具体地向我们展示您的真实代码是什么。

# apache - 安装 Skype 后 XAMPP apache 服务器未启动

> ID：14073985
> 
> 赞同：44
> 
> 时间：2012-12-28T18:24:11.410
> 
> 标签：apache, xampp, skype

我收到以下控制台日志：

```
1:14:33 PM  [apache]    Possible problem detected! 
1:14:33 PM  [apache]    Port 80 in use by "c:\program files (x86)\skype\phone\skype.exe"!
1:14:33 PM  [apache]    Possible problem detected! 
1:14:33 PM  [apache]    Port 443 in use by "c:\program files (x86)\skype\phone\skype.exe"!
1:14:33 PM  [main]  Starting Check-Timer
1:14:33 PM  [main]  Control Panel Ready
1:15:10 PM  [apache]    Starting apache app...
1:15:11 PM  [apache]    Status change detected: running
1:15:11 PM  [apache]    Status change detected: stopped 
```

它说“检测到状态变化：正在运行”立即“停止”。我试图：

*   关闭内部网络的 Windows 防火墙
*   将 httpd.conf 文件中两个位置 Listen:80 和 ServerName localhost:80 的端口 80 更改为 99
*   将 httpd.conf 文件中相同两个位置的端口 443 更改为 445。
*   Apache 服务器没有作为 Windows 服务安装在我的机器上。
*   今天的日期没有生成错误或访问日志。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-06-01T08:31:39.040

进入Skype->工具->选项->高级并取消选中使用端口80和443。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-04-24T19:14:02.953

这发生在我通过 Skype 与某人合作时，因此关闭 Skype 不是一种选择。

一种可能的解决方案是更改 XAMPP 用于 Apache 的端口。

## 1\. 更改*Apache (httpd.conf)*

转到 XAMPP 控制面板，单击Apache 模块的*Config ，然后单击**Apache (httpd.conf)*。

![XAMPP 控制面板 -> 单击 Apache 模块的配置](../Images/cded45fb2be381fe5b01e348eb4e6479.png)

![在新窗口中单击 Apache (httpd.conf)](../Images/6db341bd77e0abff02c82aebaa989c82.png)

现在，这将在 XAMPP 设置中配置的编辑器中打开配置文件（Windows 默认为 notepad.exe）。打开搜索工具并搜索`80`. 在端口号 80 中应该有两行包含 80：

```
Listen 80 
```

```
ServerName localhost:80 
```

现在`80`用一个开放的端口替换。我用过`8080`。

```
Listen 8080 
```

```
ServerName localhost:8080 
```

## 2\. 更改*Apache (httpd-ssl.conf)*

需要对 SSL 配置重复相同的过程。重复上述步骤，但转到*Apache (httpd-ssl.conf)*。替换以下行中的端口号：

```
Listen 443 
```

```
<VirtualHost _default_:443> 
```

```
ServerName www.example.com:443 
```

我选择`4433`。

* * *

**完毕。**单击Apache 的*启动*，Apache 应该可以正常启动。不过，就我而言，错误仍然会出现。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2014-05-29T07:24:53.780

去`Skype -> Tools -> Options -> Advanced -> Connection`

[![转到Skype->工具->选项->高级->连接](../Images/d6d341d205c54195496e46e0453d3a8a.png)](https://i.stack.imgur.com/jplfN.png)

[![只需取消选中使用端口 80 复选框](../Images/a71d9cd2acaaad3741b3fbc066ba9634.png)](https://i.stack.imgur.com/JGBa8.png)

之后，重新启动您的 Skype。

**最新更新**

Skype 现在不使用端口 80：https: [//support.skype.com/en/faq/FA148/which-ports-need-to-be-open-to-use-skype-on-desktop](https://support.skype.com/en/faq/FA148/which-ports-need-to-be-open-to-use-skype-on-desktop)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-29T18:19:22.337

打开 Skype 设置并取消选中“使用端口 80 作为传入端口”的选项，然后我必须“以管理员身份”启动 XAMPP 服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T18:26:45.880

它说 Skype 正在使用端口 80。我将禁用 Skype，然后启动您的 Web 服务器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-30T06:25:25.550

请使用以下命令的输出更新您的帖子，不要忘记更正路径：

```
C:\> path\to\xampp\apache\bin\httpd.exe 
```

我认为现在不是端口冲突问题，因为您更改了端口。

顺便说一句，您可以[更改](http://www.mydigitallife.info/disable-skype-from-using-opening-and-listening-on-port-80-and-443-on-local-computer/)Skype中的设置以不使用端口80和443，在新版本中应该有一些更改，但您应该能够找到它。:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-10T07:19:51.687

得到Skype>>工具>>选项>>高级并删除检查（使用端口80和443）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-14T08:52:08.457

自 Skype 2019 以来，他们没有使用端口 80，因此对 Xampp 没有影响。如果您的计算机上发生此问题，请尝试通过以下方式禁用万维网发布服务：

1.  打开 CMD
2.  输入 services.msc
3.  停止此服务：万维网发布服务

重启阿帕奇

# ruby - ruby 将多个进程的输出重定向到日志

> ID：14073989
> 
> 赞同：1
> 
> 时间：2012-12-28T18:24:49.207
> 
> 标签：ruby, multithreading, file-io

我的 ruby​​ 脚本应该处理多个外部进程，所以我想知道如何将不同进程的输出重定向到不同的日志文件。此外，由于外部过程需要相当长的时间才能完成，并行处理它们的最佳方法是什么？

由于我是 ruby​​ 新手，我可以向您展示一个 shell 等效代码：

```
LOGDIR="/tmp/test"
for host in $( h1 h2 h3 h4 ); do
  ( ssh root@${host} 'sh /tmp/scripttorun' >> ${LOGDIR}/${host}.log 2>&1 ) &
  sleep 5
done
wait #wait for all subprocesses to complete 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T04:36:05.370

可以使用非常相似的方法将输出重定向到日志文件，使用反引号或`%x`如果您选择：

```
`cp -v some/file/that/does/not/exist some/file/name >> /path/to/stdout.log 2>>/path/to/stderr.log` 
```

如果要在变量中传递值，请使用：

```
`ssh root@#{host} 'sh /tmp/scripttorun' >> #{LOGDIR}/#{host}.log 2>&1` 
```

不过，这一切都假设您使用的是 SSH 密钥。没有它们，SSH 将无法建立连接，而是会暂停并提示您输入密码，从而导致您的代码挂起。您需要以编程方式使用 Net::SSH gem 来解决这种情况。

要并行处理它们，我建议查看[EventMachine](http://eventmachine.rubyforge.org)和[EM-SSH](https://github.com/simulacre/em-ssh)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:06:46.610

我在 Ruby 中提出的代码如下：

```
@pids = []
hosts = %w(h1 h2 h3 h4)
hosts.each do |host|
  @pids << Kernel.fork { `ssh root@#{host} 'sh /tmp/test' >> #{LOGDIR}/#{host}.log 2>&1` }
end
@pids.each { |pid| Process.wait(pid) } 
```

如果此实现有一些缺点，请添加。

# html - cshtml 文件中标记中的空格是否有意义？

> ID：14073991
> 
> 赞同：1
> 
> 时间：2012-12-28T18:25:03.733
> 
> 标签：html, css, asp.net-mvc, forms, layout

在尝试为 ASP.Net MVC 4 项目中的登录表单添加基本标记时，我看到了一些奇怪的行为。这是我有问题的cshtml文件的一部分：

```
<form class="navbar-form pull-right">
    <input type="text" placeholder="Email" class="span2" />
    <input type="password" placeholder="Password" class="span2" />
    <button class="btn" type="submit">Sign in</button>
</form> 
```

该标记在我的主题中表现出色：

![在此处输入图像描述](../Images/754d7280ab8130a0978d46ebf6168491.png)

但是，如果我将其更改为：

```
<form class="navbar-form pull-right">
    <input type="text" placeholder="Email" class="span2" /><input type="password" placeholder="Password" class="span2" />
    <button class="btn" type="submit">Sign in</button>
</form> 
```

它开始像这样渲染：

![在此处输入图像描述](../Images/23433941215fec35533bee72d004f763.png)

我注意到这一点是因为我试图从一个基础主题中获取一个简单的形式并用`Html.BeginForm()`. 这导致标记都在一条线上，所以我看到了那种压缩的外观。

我可能可以用一些 css 来纠正它，但我很好奇是否有人知道我为什么会看到这种行为。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T18:30:32.287

在 HTML 中，任何空白都被视为一个空格。例如：

```
<div>TestTestTest</div> 
```

每个单词之间没有空格。

```
<div>Test Test Test</div> 
```

将有一个空间。

```
<div>Test     Test
Test</div> 
```

看起来与第二个示例相同。

这同样适用于输入标签：

```
<!-- No spacing -->
<div>
    <input /><input />
<div>

<!-- Line break converts to a space -->
<div>
    <input />
    <input />
<div>

<!-- Really big font -->
<div style="font-size: 120pt;">
    <input />
    <input />
<div> 
```

[JsFiddle 演示](http://jsfiddle.net/ht6fm/)。

更糟糕的是，*一些*浏览器会`TextElement`在两个`<input>`标签之间的 DOM 中为您提供一个。例如

```
<div id="foo">
   <input />
   <input />
</div> 
```

该元素`foo`将有 3 个子元素（一个输入、一个文本元素、另一个输入） - 其中：

```
<div id="foo"><input /><input /></div> 
```

将有 2 个子元素。当我试图通过索引引用子元素并且它在 IE 而不是 Chrome 上工作时，这让我很困惑（专业提示：永远不要这样做）

你是正确的，你应该使用 CSS 来准确指定你想要元素的布局方式。为您的标签分配`<form>`一个类，并定义您希望该类中的子元素如何流动，以及每个元素之间的边距、填充和间距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:29:51.230

要回答你的问题，不应该......但显然它是......所以。我会首先在 Firebug 中检查这两个版本，看看你能在那里找到什么。还要检查您是否在布局中定义了 Doctype。

# java - java网络：如何获取服务器的IP：

> ID：14073997
> 
> 赞同：-4
> 
> 时间：2012-12-28T18:25:23.593
> 
> 标签：java

我想用 java 制作一个聊天信使，它将在 LAN 本地网络上工作。在客户端我有：

```
Socket socket=new Socket(serverIP, port); 
```

如何理解什么是serverIP，serverSocket正在等待传入连接的计算机的ip地址

这是一个非常小的网络：1 个服务器和 1 个客户端，一个交叉电缆网络

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:41:23.800

客户端*必须知道*服务器 IP - 它必须是预定义的。客户没有神奇的方法可以找到它。这样你就可以：

*   在客户端代码中硬编码服务器 IP
*   运行客户端时将服务器 IP 作为命令行参数传递

如果您的 LAN 路由器设置了[DHCP](http://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol)，您的 IP 地址会随着时间而改变，因此第二种变体更好。我想商业聊天客户端有一个众所周知的 URL/IP 硬编码或类似的，他们从中获取聊天服务器地址。

在[这个 C# 示例](http://csharp.net-informations.com/communications/csharp-chat-server-programming.htm) 中，通过在同一台机器上运行两者来绕过这个问题，但是您可以看到客户端具有硬编码的“服务器 IP”。

在[这个 VB 示例](http://www.instructables.com/id/How-to-make-a-simple-chat-program-in-visual-basic-/step7/Using-the-programConclusion/)中，IP 由用户输入。

编辑：

客户端[Socket](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)（如您所写）连接到服务器[ServerSocket](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html)。ServerSocket 知道客户端 Socket IP 地址，因为客户端只是从该 IP 地址连接到它！如果您不理解这一点，请阅读（并**自己尝试**）这个[出色的教程](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)。

“将其作为参数传递”：

假设您有一个名为“project”的文件夹，其中有一个名为“mypackage”的文件夹，其中有一个名为 HelloWorld.class 的文件。HelloWorld.class 是从 HelloWorld.java 编译而来的 Java 类文件，它是一个 Java 源文件，如下所示：

```
package mypackage;

public class HelloWorld {

public static void main(String[] args) {
    System.out.println("You entered the following arguments from the command line:");
    for (int i = 0; i< args.length; i++) {
        System.out.println(args[i]);
    }
} 
```

将自己放在项目目录中并编写：

```
java mypackage.HelloWorld commandlineArgument1 commandlineArgument2 
```

它将打印：

```
You entered the following arguments from the command line:
commandlineArgument1
commandlineArgument2 
```

一个[教程](http://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:29:12.740

套接字类用于客户端，因此这将是您要连接的服务器的 IP。

请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html)和[http://docs.oracle.com/javase/1.4.2/docs/api/java /net/Socket.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T09:10:49.807

我不想练习网络编程，这是一个真正的程序，并且将要商业化。但无论如何，只有 2 台计算机将通过交叉电缆进入网络。由于该程序将安装在不同的计算机上，因此我在编程时服务器的 IP 对我来说是未知的，并且无法预定义。现在我正在寻找一种方法，让我的程序本身可以在该本地网络中找到服务器的 IP 并可以连接到服务器。所以它不能通过参数传递给客户端，因为它是未知的，程序必须发现......我终于找到了 2 个很好的方法让 java 程序自动找到它的服务器主机名并且用户不会给出对任何 IP 或任何信息进行编程...

1.首先我们找到我们的本地主机名：

```
InetAddress.getLocalHost().getHostName(); 
```

然后我们运行这个命令行：

```
net view 
```

这将返回当前网络中的主机名（在我的情况下是 LAN 网络），现在我们有了本地主机名和所有主机名，我们可以找到另一台主机（在我的情况下绝对是服务器，因为有网络中只有 2 台计算机...）名称，因此很容易连接到该名称：

```
Socket socket=new Socket(InetAddress.getByName(SERVER_NAME),port); 
```

2.客户端也可以通过multicastSocketing获取服务器的IP。所有客户端和服务器都加入到预定义 IP 上的组，服务器将其 IP 发送给所有接收者（= 客户端）。