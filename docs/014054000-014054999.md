# StackOverflow 问答 14054000-14054999

# compass-sass - 将mixin声明中的变量传递到附加的内容块中？

> ID：14054003
> 
> 赞同：5
> 
> 时间：2012-12-27T11:33:44.427
> 
> 标签：compass-sass, sass, susy-compass

在 Ruby 中，您可以轻松地将方法内部的变量传递到附加的代码块中：

```
def mymethod
  (1..10).each { |e| yield(e * 10) } # Passes a number to associated block
end

mymethod { |i| puts "Here comes #{i}" } # Outputs the number received from the method 
```

我想在 SASS mixin 中做同样的事情：

```
=my-mixin
  @for $i from 1 to 8
    .grid-#{$i}
      @content

+my-mixin
  color: nth("red green blue orange yellow brown black purple", $i) 
```

此代码不起作用，因为 $i 是在 mixin 声明中声明的，并且无法在使用 mixin 的外部看到。:(

那么......我如何利用在 mixin 声明中声明的变量？

当我使用网格框架和媒体查询时，我非常需要这个功能。目前，我每次需要时都必须复制 mixin 声明中的内容，这违反了 DRY 规则。

**更新 2013-01-24**

这是一个真实的例子。

我有一个混合断点循环并为每个断点应用一次提供的代码：

```
=apply-to-each-bp
  @each $bp in $bp-list
    +at-breakpoint($bp) // This is from Susy gem
      @content 
```

当我使用这个 mixin 时，我必须在 @content 中使用这个 $bp 值。它可能是这样的：

```
// Applies to all direct children of container
.container > *
  display: inline-block

// Applies to all direct children of container,
// if container does not have the .with-gutters class
.container:not(.with-gutters) > *
  +apply-to-each-bp
    width: 100% / $bp

// Applies to all direct children of container,
// if container has the .with-gutters class
.container.with-gutters  > *
  +apply-to-each-bp
    $block-to-margin-ratio: 0.2
    $width: 100% / ($bp * (1 + $block-to-margin-ratio) - $block-to-margin-ratio)
    width: $width
    margin-right: $width * $block-to-margin-ratio

    &:nth-child(#{$bp})
      margin-right: 0 
```

但这不起作用，因为 $bp 的值在 @content 中不可用。

在调用 mixin 之前声明变量将无济于事，因为 @content 在 mixin 被解析之前被解析一次。

相反，每次我需要它时，我都必须做两个丑陋的大腿：

1.  声明一个临时混合，
2.  写循环，违反DRY原则：

```
// Each of the following mixins is mentioned in the code only once.
=without-gutters($bp)
  width: 100% / $bp

=with-gutters($bp)
  $block-to-margin-ratio: 0.2
  $width: 100% / ($bp * (1 + $block-to-margin-ratio) - $block-to-margin-ratio)
  width: $width
  margin-right: $width * $block-to-margin-ratio

  &:nth-child(#{$bp})
    margin-right: 0

// Applies to all direct children of container
.container > *
  display: inline-block

// Applies to all direct children of container,
// if container does not have the .with-gutters class
.container:not(.with-gutters) > *
  @each $bp in $bp-list
    +at-breakpoint($bp) // This is from Susy gem
      +without-gutters($bp)

// Applies to all direct children of container,
// if container has the .with-gutters class
.container.with-gutters  > *
  @each $bp in $bp-list  // Duplicate code! :(
    +at-breakpoint($bp)  // Violates the DRY principle.
      +with-gutters($bp) 
```

所以，问题是：有没有办法做到这种 Ruby 风格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T13:42:06.237

Sass 中的变量对它们有*作用域*。它们仅在创建它们的块中可见。如果您希望变量在 mixin 内部和外部都可以访问，则必须在全局范围内定义它：

```
$var: 0;

@mixin test {
    $var: $var + 1;
    color: red;
}

.test {
    $var: 5;
    @include test;
    @debug $var; // DEBUG: 6
} 
```

只要您不关心`$var`很长时间的状态，这应该可以满足您的目的。

对于您的示例，这将不起作用，因为它看起来像是`@content`首先处理的。您需要的是一个以不同方式编写的 mixin：

```
@mixin test($properties...) {
    @for $i from 1 to 8 {
        .grid-#{$i} {
            @each $p in $properties {
                $list: nth($p, 2);
                @if length($list) > 1 {
                    #{nth($p, 1)}: nth($list, $i);
                } @else {
                    #{nth($p, 1)}: $list;
                }
            }
            @content;
        }
    }
}

.test {
    @include test(color (red green blue orange yellow brown black purple));
} 
```

生成的 CSS：

```
.test .grid-1 {
  color: red;
}

.test .grid-2 {
  color: green;
}

.test .grid-3 {
  color: blue;
}

.test .grid-4 {
  color: orange;
}

.test .grid-5 {
  color: yellow;
}

.test .grid-6 {
  color: brown;
}

.test .grid-7 {
  color: black;
} 
```

像这样的 mixin 可以输入任意数量的参数，并且仍然允许您根据需要使用`@content`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T08:12:31.543

所以目前这在 Sass 中是不可用的。

Sass 问题队列中有一张相关的票：[https](https://github.com/nex3/sass/issues/871) ://github.com/nex3/sass/issues/871它处于计划状态，但至少要到 Sass 4.0 才能实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-10T12:03:17.867

我自己也遇到过这个问题，AFAIK 这是目前 SASS 的一个限制。

# java - 未找到 Java Prepared statement 错误表

> ID：14054009
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:33:59.127
> 
> 标签：java, mysql, jdbc, prepared-statement, talend

我在使用 Talend Open Studio for Data Integration 构建数据迁移作业时遇到问题。Talend open studio 生成 java 类。我从一个mysql表迁移到另一个。

该声明：

```
 String insert_tMysqlOutput_1 = "INSERT INTO `"
                    + "workitem"
                    + "` (`name`,`type`,`budgetHours`,`deadline`,`dateStart`,`dateEnd`,`dateCreated`,`projectId`,`parentWorkItem`,`description`,`dateUpdated`,`companyId`,`state`,`reporterId`,`assigneeId`) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)"; 

            java.sql.PreparedStatement pstmt_tMysqlOutput_1 = conn_tMysqlOutput_1
                    .prepareStatement(insert_tMysqlOutput_1); 
```

错误：

```
Exception in component tMysqlOutput_1 com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'dashboard.work_item' doesn't exist
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:409)
at com.mysql.jdbc.Util.getInstance(Util.java:384)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1054)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3566)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3498)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1959)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2113)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2568)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2113)
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2409)
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2327)
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2312)
at dashboard_new.copy_of_workitem_2_0.Copy_of_workitem.tMysqlInput_1Process(Copy_of_workitem.java:3677)
at dashboard_new.copy_of_workitem_2_0.Copy_of_workitem.tMysqlConnection_2Process(Copy_of_workitem.java:1109)
at dashboard_new.copy_of_workitem_2_0.Copy_of_workitem.runJobInTOS(Copy_of_workitem.java:7370)
at dashboard_new.copy_of_workitem_2_0.Copy_of_workitem.main(Copy_of_workitem.java:7069) 
```

表结构（编辑＃1）

```
CREATE TABLE  `dashboard`.`workitem` (
`workItemId` bigint(20) NOT NULL AUTO_INCREMENT,
`name` varchar(255) NOT NULL,
`type` varchar(255) NOT NULL,
`projectId` bigint(20) NOT NULL DEFAULT '0',
`companyId` bigint(20) DEFAULT NULL,
`budgetHours` decimal(10,0) DEFAULT NULL,
`deadline` datetime DEFAULT NULL,
`dateStart` datetime DEFAULT NULL,
`dateEnd` datetime DEFAULT NULL,
`parentWorkItem` bigint(20) DEFAULT NULL,
`description` text,
`state` varchar(45) DEFAULT NULL,
`reporterId` bigint(20) DEFAULT NULL,
`assigneeId` bigint(20) DEFAULT NULL,
`dateCreated` datetime DEFAULT NULL,
`dateUpdated` datetime DEFAULT NULL,
`newColumn` varchar(10) DEFAULT NULL,
PRIMARY KEY (`workItemId`),
KEY `fk_project_id_idx` (`projectId`),
KEY `fk_parent_work_item_idx` (`parentWorkItem`),
KEY `fk_workitem_company1_idx` (`companyId`),
KEY `fk_workitem_name` (`name`),
KEY `fk_workitem_assignee` (`assigneeId`),
KEY `fk_workitem_reporter` (`reporterId`),
CONSTRAINT `fk_workitem_company1` FOREIGN KEY (`companyId`) REFERENCES `company`    (`companyId`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=2461 DEFAULT CHARSET=latin1 
```

奇怪的是..`work_item`在代码中找不到..所以我认为必须对语句进行一些缓存但不知道在哪里..

编辑＃1：当我将一个字段添加到表中不存在的查询中时，我得到一个错误字段未找到..所以以某种方式检查这些字段是否存在。

有没有人有任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:25:47.213

有东西正在访问`work_item`，但表的名称是`workitem`。

Perhaps there is a trigger on the table that has a coding error in it.
Or perhaps you have not posted the latest versions.

# visual-studio-2010 - vb.net 数据集不工作

> ID：14054012
> 
> 赞同：0
> 
> 时间：2012-12-27T11:34:14.913
> 
> 标签：visual-studio-2010, dataset, vb.net-2010

我正在使用两个不同的数据集来使用 vb.net 使用 Visual Studio 填充我的项目的 datagridview。它是 Windows 窗体应用程序，用于根据用户输入显示来自数据库的信息。一旦显示信息，用户可以将信息保存到专门创建的表格中，以存储报告信息，以便以后调用。我现在正试图回忆这些信息，因此以与以前相同的方式创建了我的数据集，现在正试图调用它的新出现，这就是问题开始的地方。代码如下。

```
Dim dv2 As New System.Data.DataView
dv2 = New System.Data.DataView(DataSet2.Tables(0), "Status <> ''", "",       
DataViewRowState.CurrentRows)
DataTable2TableAdapter.fill(DataSet2.DataTable2, f5.ComboBox2.SelectedValue) 
```

我有两个问题。

1.  对于`DataSet2.Tables(0)`：`Reference to a non-shared member requires an object reference`
2.  对于`DataTable2TableAdapter`：`’DataTable2TableAdapter’ is not declared. It may be inaccessible due to its protection level.`

我不知道为什么会发生这种情况，因为我在这里编写了与我之前的数据集相同的代码，除了在设置时更改数据集后面的 SQL 语句。任何想法都会受到欢迎，因为我完全没有想法。欢迎提出所有问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:53:46.503

尝试以下代码来修复您的错误号 1....

```
Dim tablezero as System.Data.DataTable
'
tablezero = DataSet2.Tables(0) 
```

您收到错误的原因是因为您正在尝试访问一个对象 (Table(0))，并且它对尝试访问它的代码不可见，如果它是 SHARED，那么它将是可见的。

因此，您可以通过定义和对象实例/引用来解决它，然后访问该引用，在这种情况下我称之为“tablezero”（或通过使 table(0) SHARED - 通常不是最好的选择，除非它是必要的 - 没有意义除非绝对必要，否则整个班级都可以访问它

很可能第二个错误在上面修复后可能会消失，然后如果没有您的 Dataset2 代码就很难分辨

希望能帮助到你。

# c# - System.Xml 引用错误

> ID：14054014
> 
> 赞同：0
> 
> 时间：2012-12-27T11:34:32.217
> 
> 标签：c#, silverlight, system.xml

我在一个项目中使用了 HtmlAgilityPack 并得到了 System.Xml 2.0.0.0 没有被引用的错误。我从 Silverlight 文件夹中添加了它，它起作用了。但现在我得到了同样的错误，但它需要版本 2.0.5.0。如果我添加它，它会起作用，但 HtmlAgilityPack 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:52:30.170

不要将其复制到您的目录中。您需要在应用程序配置文件中添加程序集重定向策略，该策略告诉加载程序在请求 V2.0.0.0 时使用 V2.0.5.0。

请参阅[http://msdn.microsoft.com/en-us/library/7wd6ex19.aspx](http://msdn.microsoft.com/en-us/library/7wd6ex19.aspx)

这样的事情应该可以解决问题：

```
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Xml"
                          publicKeyToken="7cec85d7bea7798e"
                          culture="neutral" />
        <bindingRedirect oldVersion="2.0.0.0"
                         newVersion="2.0.5.0"/>
     </dependentAssembly>
   </assemblyBinding>
  ... 
```

# ruby-on-rails - Rails中rake的范围是什么

> ID：14054017
> 
> 赞同：2
> 
> 时间：2012-12-27T11:34:44.573
> 
> 标签：ruby-on-rails, ruby, rake

我对 ruby​​ on rails 很陌生。的作用是什么`rake`。例如，这里有一个命令，例如

```
rake db:create 
```

这里这个命令是用来创建新数据库的。但在我们使用`rake`. 为什么我们`rake`在这里使用单词，它是什么功能。

`rake` `rake-task`&之间有什么不同`rakefile`。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T11:42:17.627

[Rake](http://rake.rubyforge.org/)是一个 Ruby 构建命令。当您调用 时`rake`，您实际上是在使用 Rake 工具，并且您要求 Rake 读取并使用`Rakefile`Rails 应用程序文件夹中的可用工具。

Rake 用于自动执行多项任务，从创建数据库到数据库迁移，再到生成新模型或控制器。

我鼓励您阅读[这篇关于 Rake](http://martinfowler.com/articles/rake.html)的文章，以了解有关此工具的更多信息。它将是您在 Rails 中使用的基本工具之一，因此在继续之前您确实需要了解它是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:42:49.837

Rake 是一个 gem，在 *nix 世界中的行为类似于 make。您使用它来运行脚本，通常是`Rakefile`. 您可以使用它来运行测试或设置数据库。Rails 广泛使用它，因为在部署之间需要运行许多步骤。

Rake 几乎可以做任何你需要自动化的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:44:11.537

有一篇关于它的维基百科文章是一个很好的起点：[http](http://en.wikipedia.org/wiki/Rake_(software) ://en.wikipedia.org/wiki/Rake_(software )

实际上，它的主要作用是成为应用程序命令行任务的中心点。你真的不需要它来完成一半的事情（而且经常不是最好的 IMO），但是通过运行`rake -D`你会得到所有可用命令的列表，这很有帮助。

# javascript - 弹出模式中的内容未显示

> ID：14054019
> 
> 赞同：0
> 
> 时间：2012-12-27T11:34:52.723
> 
> 标签：javascript, jquery, jquery-ui, simplemodal

我正在使用[本教程](http://www.queness.com/post/77/simple-jquery-modal-window-tutorial)在页面加载时显示弹出模式窗口，由于某种原因，它没有显示模式内的内容和图像。

我正在处理的代码在[jsFiddle](http://jsfiddle.net/HJUZm/2/)

我想要一个简单的模态弹出窗口，我可以在其上显示不同维度的图像形式的消息，我希望模态显示在页面中间并根据图像调整宽度和高度。我将不胜感激这方面的帮助。

代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Simple JQuery Modal Window from Queness</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script>
<script>
$(document).ready(function() {
        var id = $(this).attr('href');
        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set height and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //transition effect    
        $('#mask').fadeIn(1000);   
        $('#mask').fadeTo("slow",0.8);

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        $(id).css('top',  winH/2-$(id).height()/2);
        $(id).css('left', winW/2-$(id).width()/2);

        //transition effect
        $(id).fadeIn(2000);

    //if close button is clicked
    $('.window .close').click(function (e) {
        //Cancel the link behavior
        e.preventDefault();
        $('#mask, .window').hide();
    });    

    //if mask is clicked
    $('#mask').click(function () {
        $(this).hide();
        $('.window').hide();
    });        

    $(window).resize(function () {

        var box = $('#boxes .window');

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set height and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        box.css('top',  winH/2 - box.height()/2);
        box.css('left', winW/2 - box.width()/2);

    });    
});
</script>
<style>

/* Z-index of #mask must lower than #boxes .window */
#mask {
  position:absolute;
  z-index:9000;
  background-color:#000;
  display:none;
}
#boxes .window {
  position:fixed;

  display:none;
  z-index:9999;
  padding:20px;
}
/* Customize your modal window here, you can add background image too */
#boxes #dialog {

}
</style>

</head>
<body>

<div id="boxes">
    <!-- #customize your modal window here -->
    <div id="dialog" class="window">
        <b>Testing of Modal Window</b> |
        <!-- close button is defined as close class -->
        <a href="#" class="close">Close it</a>
 <br />
        <img src="http://pierre.chachatelier.fr/programmation/images/mozodojo-original-image.jpg" />
    </div>
    <!-- Do not remove div#mask, because you'll need it to fill the whole screen -->
    <div id="mask"></div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:38:57.240

错误是这一行操作

```
 var id = $(this).attr('href'); 
```

在 document.ready 上，您没有 href 属性，但如果将其替换为

```
 var id = "#dialog"; 
```

你的模态将起作用。见：http: [//jsfiddle.net/HJUZm/3/](http://jsfiddle.net/HJUZm/3/)

### 更多的...

对于您正在阅读的教程，我可以看到 2 个可能的错误。

首先是在您的 HTML 中您缺少

```
 <!-- #dialog is the id of a DIV defined in the code below -->
    <a href="#dialog" name="modal">Simple Modal Window</a> 
```

并且由于某种原因，您忘记了使用`$('a[name=modal]').click(function(e) {`，而是将其插入到 document.ready

两者之间的区别在于`$('a[name=modal]')`document.ready 在页面准备就绪时触发一次，并且`$('a[name=modal]').click(function(e){...});`在每次单击`name`属性时触发`modal`

# javascript - JS Bin 警告：EOL 擒纵机构不良。如果需要，使用选项 multistr

> ID：14054021
> 
> 赞同：9
> 
> 时间：2012-12-27T11:35:14.147
> 
> 标签：javascript, jsbin

这是来自以下片段的警告：

```
a="hello\
world" 
```

显然，除非设置了特定选项，否则 JsBin 不支持行继续符。

如何设置提到的多字符串选项？

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-07-25T15:25:34.933

不知道你是否需要这个，但使用：`/*jshint multistr: true */`

例子：

```
/*jshint multistr: true */
var data = "multiline \
text \
here."; 
```

它只会删除警告。

# javascript - Javascript 肥皂客户端不起作用（洗出服务）

> ID：14054022
> 
> 赞同：0
> 
> 时间：2012-12-27T11:35:14.343
> 
> 标签：javascript, ruby, soap

我用 Ruby 编写了 Web 服务（使用wash_out）。这是链接：[http ://dictionary.vipserv.org/slownik_de_pls/wsdl](http://dictionary.vipserv.org/slownik_de_pls/wsdl)

我找到了编写 JavaScript 肥皂客户端的解决方案。下面的代码：

```
<html>
<head>
    <title>SOAP JavaScript Client Test</title>
    <script type="text/javascript">
        function soap() {
    try
    {
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open('POST', 'http://www.dictionary.vipserv.org/slownik_de_pls/wsdl/', true);

            // build SOAP request
            var sr = '<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tns="urn:WashOut"><soap:Body><tns:get_word_response><value xsi:type="xsd:string">robic</value></tns:get_word_response></soap:Body></soap:Envelope>';

            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4) {
                    if (xmlhttp.status == 200) {

                        alert('done use firebug to see responce');
                    }
                }
            }
            // Send the POST request
            xmlhttp.setRequestHeader('Content-Type', 'text/xml');
            xmlhttp.send(sr);
        alert(xmlhttp.responseXML.xml);
            // send request
            // ...
    }
    catch(error)
    {
      alert(error);
    }
        }
    </script>
</head>
<body>
    <form name="Demo" action="" method="post">
        <div>
            <input type="button" value="Soap" onclick="soap();" />
        </div>
    </form>
</body>
</html> 
```

响应始终为空。怎么了？干杯，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:22:36.180

看一下 WSDL，您可能需要 to`POST`而`http://dictionary.vipserv.org/slownik_de_pls/action`不是 to `http://www.dictionary.vipserv.org/slownik_de_pls/wsdl/`。

此外，您可能想查看 jQuery，尤其是[像这样](https://stackoverflow.com/questions/10120064/call-soap-wsdl-using-jquery)的 SOAP 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T14:20:48.003

我在 Ruby (Savon) 中有肥皂客户端。在那里它工作正常。我在 jQuery 中找到了其他解决方案，但我遇到了解析错误。以下：

```
<html>
 <head>
    <title>Calling Web Service from jQuery</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#btnCallWebService").click(function (event) {
                var wsUrl = "http://dictionary.vipserv.org/slownik_de_pls/wsdl";

                var soapRequest = '<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tns="urn:WashOut" xmlns:env="http://schemas.xmlsoap.org/soap/envelope/"><env:Body><tns:get_word><wartosc>machen</wartosc></tns:get_word></env:Body></env:Envelope>';
                $.ajax({
                    type: "POST",
                    url: wsUrl,
                    contentType: "text/xml",
                    dataType: "xml",
                    data: soapRequest,
                    success: processSuccess,
                    error: processError
                });

            });
        });

        function processSuccess(data, status, req) {
            if (status == "success")
                $("#response").text($(req.responseXML).find("get_word_response").text());
        }

        function processError(data, status, req) {
            alert(req.responseText + " " + status);
        }  

    </script>
</head>
<body>
    <h3>
        Calling Web Services with jQuery/AJAX
    </h3>
    Enter your name:
    <input id="txtName" type="text" />
    <input id="btnCallWebService" value="Call web service" type="button" />
    <div id="response" />
</body>
</html> 
```

# objective-c - 不同数据的不同MKPinAnnotation

> ID：14054025
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:35:34.137
> 
> 标签：objective-c, ios, mkmapview, mapkit

我有 3 种类型的位置。

我从我的服务器获取数据，然后解析它并在 mapView 上显示位置。

我想为不同类型的数据显示不同的颜色。3 种类型 = 3 种颜色。

我该如何控制这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:49:15.117

`viewForAnnotation`为此实现委托方法。

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString *identifier = @"MyLocation";
    if ([annotation isKindOfClass:[yourAnnotationLocation class]])
    {

        MKAnnotationView *annotationView = (MKAnnotationView *) [_mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
        if (annotationView == nil)
        {
            annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
            annotationView.enabled = YES;
            annotationView.canShowCallout = YES;
            //if you need image you can set it like
            //annotationView.image = [UIImage imageNamed:@"yourImage.png"];//here we use a nice image instead of the default pins
            annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        }
        else
        {
            annotationView.annotation = annotation;
        }
        if ([annotation.title isEqualToString:@"Midhun"])
        {
             annotationView.pinColor = MKPinAnnotationColorGreen;
        }
        else
        {
            annotationView.pinColor = MKPinAnnotationColorRed;
        }
        return annotationView;
    }

return nil;
} 
```

要为您的注释设置自定义属性，请添加一个确认`MKAnnotation`协议的类。

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MyLocation : NSObject <MKAnnotation> {
    NSString *_name;
    NSString *_address;
    int _yourValue;
    CLLocationCoordinate2D _coordinate;
}

@property (copy) NSString *name;
@property (copy) NSString *address;
@property (assign) yourValue;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithName:(NSString*)name address:(NSString*)address coordinate:(CLLocationCoordinate2D)coordinate;

@end 
```

这是一个很好的[**教程**](http://www.raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutorial)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:51:38.103

```
Try this,
 annotation1.subtitle = @"1st annotation"; 
     annotation2.subtitle = @"2st annotation"; 
       annotation3.subtitle = @"3st annotation";
    Check annotation 
       if ([annotation.subtitle isEqualToString:@"1st annotation"]) 
       { 
          //change color 
         }
          else if ([annotation.subtitle isEqualToString:@"2st annotation"])
          { 
           //change color 
                 } 
         else if ([annotation.subtitle isEqualToString:@"3st annotation"]) 
          { 
          //change color 
           } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T11:59:29.933

您可以通过纬度和经度比较来做一些事情

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation { static NSString *identifier = @"yourIdentifier";  
MKPinAnnotationView *pin = (MKPinAnnotationView *) [self.mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
if([annotation coordinate].latitude==YourLocationLatitude)
{

    pin.image=[UIImage imageNamed:@"Flag-red.png"];
}
else
{
    pin.image=[UIImage imageNamed:@"Flag-green.png"];
}} 
```

# c++ - C++ 事件驱动的 json 流阅读器

> ID：14054029
> 
> 赞同：7
> 
> 时间：2012-12-27T11:35:56.290
> 
> 标签：c++, json, streamreader

我刚刚发现了 YAJL 项目，它可以满足我的需要。

*   从流中读取
*   每个有效解析令牌的回调
*   新数据到达时重新解析不完整的 json

但我更喜欢 C++。当然，如果我真的想的话，我可以使用 C++ 项目中的这个库，甚至可以编写自己的包装器，但无论如何，原生 C++ 更可取。

我查看了 JsonCPP，但看起来它无法从流中读取不完整的 json 数据。

是否有任何其他用于解析 json 流的 C++ 库？

还有一些要求：

*   轻的。boost 或 Qt 不适合
*   我需要一些我可以在商业闭源软件（mit、公共领域等）中自由使用的东西。
*   支持不阻塞读取。或允许提供数据（append_incoming_data）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-30T08:06:44.310

最近搜索了类似需求的库，实际上只有1.5个库支持这样的需求：

1.  [https://github.com/kazuho/picojson](https://github.com/kazuho/picojson)

一个头库，`BSD`许可证，并具有如下接口：

```
Iter parse(value& out, const Iter& first, const Iter& last, std::string* err); 
```

所以你可以 `append_incoming_data`用几行代码来创建。

2.  [https://github.com/dropbox/json11](https://github.com/dropbox/json11) 一个文件库，许可证类似`BSD`，`c++11`支持，但允许解析部分来自网络的接口`json`需要补丁：

[https://github.com/dropbox/json11/pull/55](https://github.com/dropbox/json11/pull/55)

**附言**

> 轻的。boost 或 Qt 不适合

实际上，它们不适合，因为

> 允许提供数据

目前两者`Qt5` `json`并`boost` `property_tree`不能解析一半准备就绪`json`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-12T05:45:20.440

其他选项是

*   [sjparser](https://github.com/dhurum/sjparser) - 解析基于指定的模式
*   [JsonReader](https://github.com/xquintana/JsonReader) - 基于普通事件的解析器

# image - invoke-webrequest 获取带有图像的完整网页

> ID：14054030
> 
> 赞同：1
> 
> 时间：2012-12-27T11:35:57.240
> 
> 标签：image, powershell, webpage, gif, powershell-3.0

如何让输出文件包含网页上的图像，而不仅仅是图像的链接？

`PS C:\temp> Invoke-WebRequest http://mitpress.mit.edu/sites/default/files/titles/content/sicm/book-Z-H-51.html -OutFile C:\temp\51.html`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:28:49.830

您需要稍微浏览一下该页面以找出一些细节。这是我已成功测试的完整脚本。

```
Invoke-WebRequest http://mitpress.mit.edu/sites/default/files/titles/content/sicm/book-Z-H-51.html |
select -expand images |
select -expand src |
foreach { start-bitstransfer $("http://mitpress.mit.edu/sites/default/files/titles/content/sicm/{0}" -f $_) C:\Users\Public\Downloads} 
```

# c++ - SFML 2.0 从地图文件加载

> ID：14054032
> 
> 赞同：0
> 
> 时间：2012-12-27T11:36:05.507
> 
> 标签：c++, file, map, external, sfml

好的大家好！我又遇到了另一个问题。我遇到了一个未处理的异常。

我将问题追溯到它的源头，即：

```
openfile >> MapFile[loadCounterX][loadCounterY]; 
```

例外是：

```
Unhandled exception at 0x76ee15de in The Vanity Engine.exe: 0xC0000005: Access violation writing location 0x336e880c. 
```

它说这违反了访问权限，但我正在访问的内容已在此处成功打开：

```
std::ifstream openfile(filename); 
```

整个功能是：

```
//Load map
void Map::Load(const char *filename)
{
    //Open the file
    std::ifstream openfile(filename);
    //Check if file is open
    if(openfile.is_open())
    {
        //Get mapSizeX and Y from the file
        openfile >> mapSizeX >> mapSizeY;
        //While not at the end of the file
        while(!openfile.eof())
        {
            //Store number at loadCounterX and loadCounterY
            openfile >> MapFile[loadCounterX][loadCounterY]; //Error here
            //Increment loadCounterX++
            loadCounterX++;
            //If loadCounterX is less than mapSizeX
            if(loadCounterX >= mapSizeX)
            {
                //Set loadCounterX to 0
                loadCounterX = 0;
                //Increment loadCounterY 
                loadCounterY++;
            }
        }
    }
} 
```

MapFile 在 Map.H 中

```
#ifndef MAP_H
#define MAP_H

#include "SFML\Graphics.hpp"
#include "Global.h"
#include <iostream>
#include <fstream>

class Map
{
public:
    void Load(const char *filename);
    void Draw(sf::RenderWindow &Window);
private:
    int loadCounterX, loadCounterY;
    int mapSizeX, mapSizeY;
    int MapFile[100][100];
};

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:58:16.720

`loadCounter*`每次加载时都应该在本地运行或至少初始化为 0。

这是第一次可以正常工作，但是在下次加载之前变量不会重置为 0，从而导致寻址未分配的空间。

*边注：*

请为您的地图数据使用某种动态分配（例如 std::vector）。每次都使用 100x100 是没有意义的，不是吗？

# extjs4.1 - 如何填充 Extjs4 网格

> ID：14054033
> 
> 赞同：0
> 
> 时间：2012-12-27T11:36:09.893
> 
> 标签：extjs4.1

我是 ExtJS4 的新手，我一直在阅读文档和一本书，但不能让一切按照我的意愿工作。

我有一个通过 AJAX 提交的表单，返回的 JSON 响应可能不包含一个或多个记录。我想在带有网格组件的新窗口中显示这些记录，以便用户只能选择一条记录。

对于初学者，我无法将 JSON 响应填充到网格中，

JSON响应存储在哪里？我有相应的成功和失败函数。

我如何让网格将这些数据加载到其中？

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:02:12.997

我会在这些方面做一些事情：

```
...//This is the form onsuccess
succes: function(response) {
    var json = Ext.JSON.decode(response.responseText);
    var win Ext.create('Ext.window.Window', {
        width: 600,
        height: 400,
        items: [ {
            xtype:'grid',
            columns:[ ... ],
            store: Ext.create('Ext.data,Store',{
                fields: ['field1', 'field2'],
                data: json })
            }]
        });
    win.show();
} 
```

希望有帮助。

# javascript - 天时差

> ID：14054035
> 
> 赞同：0
> 
> 时间：2012-12-27T11:36:16.773
> 
> 标签：javascript, time, google-closure

> **可能重复：**
> [JavaScript 中的日期之间的差异](https://stackoverflow.com/questions/1968167/difference-between-dates-in-javascript)

我发现自己在 javascript 砖墙上。

我想在两个不同的日子里找到两次之间的差异（以小时和分钟为单位）。

我可以为每个时间生成小时、分钟和星期几，但无法弄清楚如何实现一个函数来检查下一次还有多长时间。

例子：

如果是周五的 16:00，而下一次是周一的 13:00，则输出将是 69 小时 0 分钟。

有人对如何最好地实现这一点有任何想法吗？

注意我大量使用 Google Closure。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:58:58.823

```
var yourTimeStart = 'Friday 16:00'; //Your input
var yourTimeStop = 'Monday 13:00'; //Your input

var days = Array("Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday");

var differenceDays = days.indexOf(yourTimeStop.split(" ")[0]) - days.indexOf(yourTimeStart.split(" ")[0]);
if (days.indexOf(yourTimeStart.split(" ")[0]) > days.indexOf(yourTimeStop.split(" ")[0])) differenceDays = differenceDays + 7;

var timeStart = yourTimeStart.split(" ")[1];
var timeStop = yourTimeStop.split(" ")[1];

var differenceHours = timeStop.split(":")[0] - timeStart.split(":")[0];
var differenceMins = timeStop.split(":")[1] - timeStart.split(":")[1]

var resultHours = differenceDays*24 + differenceHours;;

if (differenceMins < 0) {
    resultHours--;
    differenceMins = 60 + differenceMins; // differenceMins is negative
}

if (resultHours < 0) resultHours = resultHours + 7*24; //(this is if a you calculate the time between for example Monday 16:00 and Monday 12:00)

document.write(resultHours + " hour(s) and " + differenceMins + " minutes."); //output 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:59:50.693

例如 ：

```
var dte = new DateTime(2012, 12, 26,1,0,0);
var dte2 = new DateTime(2012, 12, 27, 18, 5, 0);

var totalHours = (int) dte2.Subtract(dte).TotalHours;
var totalMin = dte2.AddHours(-totalHours).Subtract(dte).TotalMinutes;

Console.WriteLine(totalHours.ToString());
Console.WriteLine(totalMin.ToString()); 
```

# c# - 始终显示热键

> ID：14054036
> 
> 赞同：4
> 
> 时间：2012-12-27T11:36:20.247
> 
> 标签：c#, windows, visual-studio

是否可以使下划线热键在我的控件上始终可见，而无需使用 Visual Studio - C# 在 Windows 窗体中按 Alt 键？

我只有特定的时间需要表单的控件始终在字符下用“_”加下划线。所以最好有代码来做这件事。

我可以将 Windows 设置为始终显示快捷方式和热键的下划线，但我只需要它在特定时间发生。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T12:11:45.720

假设您使用的是 WinForms，您应该能够依赖底层的 Win32 机制。这就是[`WM_UPDATEUISTATE`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms646361.aspx)信息。文档说：

> 应用程序发送 WM_UPDATEUISTATE 消息以更改指定窗口及其所有子窗口的 UI 状态。

因此，您可以将消息发送到顶级窗口的句柄。您需要传递`UIS_CLEAR`的低位词`wParam`和`UISF_HIDEACCEL`的高位词`wParam`。

这是一些相当粗略的示例代码。请记住，我的 C# 专业知识非常有限。

```
public partial class Form1 : Form
{
    private const uint WM_UPDATEUISTATE = 0x0128;
    private const uint WM_QUERYUISTATE = 0x0129;
    private const uint UIS_CLEAR = 2;
    private const uint UISF_HIDEACCEL = 0x2;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_HandleCreated(object sender, PaintEventArgs e)
    {
        ClearHideAccel();
    }

    private void ClearHideAccel()
    {
        UIntPtr wParam = (UIntPtr)((UISF_HIDEACCEL << 16) | UIS_CLEAR);
        NativeMethods.SendMessage(this.Handle, WM_UPDATEUISTATE, wParam, IntPtr.Zero);
    }
}

internal class NativeMethods
{
    [DllImport("User32", SetLastError = true)]
    public static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, UIntPtr wParam, IntPtr lParam);
} 
```

# java - 使用 Hibernate 和 Spring 时连接过多

> ID：14054042
> 
> 赞同：2
> 
> 时间：2012-12-27T11:36:46.037
> 
> 标签：java, mysql, spring, hibernate, connection

我在我的项目中使用 Spring 和 Hibernate。我用这样的道具

```
 <prop key="hibernate.hbm2ddl.auto">update</prop>
        <prop key="hibernate.dialect">${chassis.storage.hibernate.dialect}</prop>
        <prop key="hibernate.show_sql">false</prop>
        <prop key="hibernate.jdbc.batch_size">${chassis.storage.hibernate.batch_size}</prop>
        <prop key="hibernate.c3p0.min_size">5</prop>
        <prop key="hibernate.c3p0.max_size">50</prop>
        <prop key="hibernate.c3p0.timeout">300</prop>
        <prop key="hibernate.c3p0.max_statements">50</prop>
        <prop key="hibernate.c3p0.idle_test_period">3000</prop> 
```

当我写一些数据时，我使用这样的代码

```
 getHibernateTemplate().execute(new HibernateCallback<Void>() {
        @Override
        public Void doInHibernate(Session session) throws HibernateException, SQLException {
            for (Data data : datas) {
                session.persist(data);
            }
            session.flush();
            return null;
        }
    }); 
```

但我有一个例外

> 原因：com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException：数据源拒绝建立连接，来自服务器的消息：“连接太多”

我使用`netstat -an | grep 3306`并看到了很多联系。有什么问题，你怎么看？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T08:57:15.403

问题出在数据源中。我用了

```
org.springframework.jdbc.datasource.DriverManagerDataSource 
```

现在我使用`org.apache.commons.dbcp.BasicDataSource`它并且效果很好！

在此处查看类似问题 - [Single database connection with HibernateTemplate and SessionFactory](https://stackoverflow.com/questions/5341618/single-database-connection-with-hibernatetemplate-and-sessionfactory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:59:18.423

您有最大`<prop key="hibernate.c3p0.max_size">50</prop>`连接数，而[MySQL 默认连接数是 151](https://dev.mysql.com/doc/refman/5.5/en/too-many-connections.html)，您的应用程序是唯一访问该数据库实例的应用程序吗？看起来不像。即使您的连接保持打开状态（我在使用 c3p0 时对此表示怀疑），您最多也设置了 50 个。另一种可能性是其他地方的连接泄漏，一个 JDBC 代码或配置，无论是 Hibernate，Spring，您都可以获得额外的连接。

更新：也许 MySQL 的连接数`max_connections`配置已更改为较低的值。

更新：使用例如 MySQL 工作台并检查您的数据库实例活动连接的来源。

# python - “参数 1 具有意外类型 'str'”

> ID：14054059
> 
> 赞同：1
> 
> 时间：2012-12-27T11:38:06.923
> 
> 标签：python, python-3.x, kde4, pykde

`PyKDE.kdecore.KStandardDirs`准确地说，我正在尝试使用 PyKDE 。[根据文档](http://api.kde.org/pykde-4.3-api/kdecore/KStandardDirs.html)和根据 PyQt4 文档，此方法使用两个字符串调用，我可以使用标准 Python`str`代替`QString`. 这不起作用：

```
>> KStandardDirs.locate()("socket", "foo")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: KStandardDirs.locate(): not enough arguments
>>> KStandardDirs.locate("socket", "foo")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: KStandardDirs.locate(): argument 1 has unexpected type 'str' 
```

我不能使用`QString`，因为它似乎不存在：

```
>>> from PyQt4.QtCore import QString
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: cannot import name QString
>>> from PyQt4.QtCore import *
>>> QString
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'QString' is not defined 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:44:54.133

我怀疑 PyKDE 还没有准备好 Python 3，至少就该错误消息而言；尝试传入一个字节串：

```
KStandardDirs.locate(b"socket", "foo") 
```

# c# - 使用 mousemove 为面板着色

> ID：14054061
> 
> 赞同：0
> 
> 时间：2012-12-27T11:38:20.700
> 
> 标签：c#, mouseevent, panel, mousemove

我在表单上创建了一个小面板字段，我希望用户能够为这些面板着色。要为它们着色，您只需单击面板即可。现在我希望能够让用户单击一个面板并拖动到其他面板上以一次为更多面板着色。

我已将 mousedown 和 mouseup 事件添加到所有面板以设置布尔值。我使用 mousemove 事件为面板着色。然而，只有第一个面板被着色。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;

namespace Application
{
    public partial class Form1 : Form
    {
        private const int dim = 25;
        private int cols;
        private int rows;

        private bool mouse_down = false;
        private sbyte fill = -1;
        private Panel pnlTmp;

        public Form1()
        {
            InitializeComponent();

            this.buildGrid();
        }

        /// <summary>
        /// Rebuild the grid to fit the screen.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void toolStripMenuItem2_Click(object sender, EventArgs e)
        {
            this.buildGrid();
        }

        /// <summary>
        /// Build the grid to fit the screen.
        /// </summary>
        private void buildGrid()
        {
            panel1.Controls.Clear();

            cols = int.Parse(Math.Floor((double)panel1.Width / dim).ToString());
            rows = int.Parse(Math.Floor((double)panel1.Height / dim).ToString());

            for (int i = 0; i < rows; i++)
            {
                for (int j = 0; j < cols; j++)
                {
                    Panel pnl = new Panel();
                    pnl.BorderStyle = BorderStyle.FixedSingle;
                    pnl.Width = dim;
                    pnl.Height = dim;
                    pnl.Location = new Point(j * 25 + 1, i * 25 + 1);
                    pnl.Name = string.Format("pnl-{0}-{1}", j, i);
                    pnl.MouseDown += new MouseEventHandler(pnl_MouseDown);
                    pnl.MouseUp += new MouseEventHandler(pnl_MouseUp);
                    pnl.MouseMove += new MouseEventHandler(pnl_MouseHover);
                    panel1.Controls.Add(pnl);
                }
            }
        }

        void pnl_MouseHover(object sender, EventArgs e)
        {
            if (mouse_down)
            {
                Panel p = (Panel)sender;
                if (p != pnlTmp)
                {
                    if (fill == -1)
                        fill = (p.BackColor == SystemColors.Control) ? (sbyte)1 : (sbyte)0;

                    if (fill == 1)
                        p.BackColor = Color.Blue;
                    else
                        p.BackColor = SystemColors.Control;

                    Debug.WriteLine(p.Name);
                }

                pnlTmp = p;
            }
        }

        void pnl_MouseDown(object sender, MouseEventArgs e)
        {
            Debug.WriteLine("true");
            mouse_down = true;
        }

        void pnl_MouseUp(object sender, MouseEventArgs e)
        {
            Debug.WriteLine("false");
            mouse_down = false;
            fill = -1;
        }

        private void panel1_MouseLeave(object sender, EventArgs e)
        {
            //mouse_down = false;
            //fill = -1;
        }
    }
} 
```

我尝试调试应用程序，结果是只有第一个面板继续触发事件，即使我正在移动其他面板。

有人能告诉我这是为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:16:55.153

您的问题是由称为“鼠标捕获”的功能引起的。它由 Control.Capture 属性控制。默认行为是在触发 MouseDown 事件之前在 OnMouseDown() 方法中自动打开它。

鼠标捕获会强制将所有鼠标事件定向到您单击的窗口，即使您将鼠标移出窗口也是如此。这就是为什么您只获得单击面板的 MouseMove 和 MouseUp 事件的原因。它在许多场景中都很重要，尤其是可靠地生成 Click 和 MouseUp 事件。

解决方法是在 MouseDown 事件处理程序中简单地关闭捕获：

```
 void pnl_MouseDown(object sender, MouseEventArgs e) {
        ((Control)sender).Capture = false;
    } 
```

请注意，您现在遇到了一个新问题，您的“mouse_down”变量不再可靠。如果您将鼠标移到任何面板或窗体之外，然后释放鼠标，则 MouseUp 事件将发送到错误的窗口，并且即使鼠标不再向下，您的 mouse_down 变量仍设置为 true。您失去了捕获功能提供的保证。您可以通过检查 MouseMove 事件处理程序中的按钮状态来解决该问题，如下所示：

```
 private void pnl_MouseMove(object sender, MouseEventArgs e) {
        if (e.Button == MouseButtons.Left) {
            // etc...
        }
    } 
```

请注意，我修复了您不正确的 pnl_MouseHover 事件处理程序并将其重命名为 pnl_MouseMove。我可以看到你最终是如何犯这个错误的，但它可能确实阻止了你自己发现这个解决方案。小心那把斧头尤金；）

# c# - C#，RichTextBox在放入指定符号后更改字体

> ID：14054064
> 
> 赞同：0
> 
> 时间：2012-12-27T11:38:24.860
> 
> 标签：c#, mysql, fonts, richtextbox

我正在使用 MySQL Connector .NET 从数据库中获取一些行。连接中的编码设置为 UTF8。它获取所有行，然后通过事件逐行打印。最后有一段代码：

```
this.BeginInvoke((Action)delegate()
{
  this.messages.Text += Environment.NewLine + message; 
       // this.messages is a RichTextBox
}); 
```

一切都很好，但是`message`例如当`aaarrtoń`它改变字体时，因为该标志从 Courier New 到默认值。`ń`自从标志（它是波兰字母）以来，它总是改变字体。这很奇怪，因为如果我手写它`RichTextBox`一切都很好。

我怀疑编码问题，但如果我以 UTF-8 编码读取数据，应该没问题吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:08:24.737

毕竟我找到了解决办法。在`RichTextBox`我设置的属性中：

```
this.messages.LanguageOption = RichTextBoxLanguageOptions.AutoKeyboard; 
```

我在某个地方找到了它，令人惊讶的是它有效。

# java - 记录器和 java.lang.SecurityManager

> ID：14054076
> 
> 赞同：1
> 
> 时间：2012-12-27T11:39:32.700
> 
> 标签：java, logging, code-access-security

我了解 java.lang.SecurityManager 用于根据特定场景检查和约束类访问或文件访问。

我需要识别 Log4J Helper 类的调用者，该类需要基于调用 Helper 类的 Class 返回 Logger 实例。

有两种方法可以做到这一点。

**使用线程**

```
public static Logger getLogger() {
    final Throwable thread = new Throwable();
    final StackTraceElement callerMethod = thread .getStackTrace()[1];
    final Logger logger = Logger.getLogger(callerMethod .getClassName());
    return logger;
} 
```

这是一个性能瓶颈，因为它涉及为每次调用 getLogger 获取当前堆栈跟踪

**第二种方法**

日志助手来扩展 java.lang.SecurityManager 在这种情况下我可以使用

```
getClassContext()[2].getName(); 
```

获取用于实例化 Logger 的绝对类名。

考虑到它的用法，扩展 SecurityManager 的 LoggingHelper 似乎不是一个好的设计原则。

我有什么理由可以将 SecurityManager 扩展到日志记录实用程序，还是有更好的方法？

注意：应用程序将在应用服务器实例中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T01:30:54.887

如果您使用的是 Java EE 6，则可以使用 CDI 来注入您的记录器。

```
public class LoggerProducer {

    @Produces 
    public Log createLogger(final InjectionPoint injectionPoint) {
        final String name = injectionPoint.getMember().getDeclaringClass().getName(); 
        return Logger.getLogger(name);
    }
} 
```

# objective-c - ios 6 无法播放视频

> ID：14054077
> 
> 赞同：1
> 
> 时间：2012-12-27T11:39:33.497
> 
> 标签：objective-c, ios, xcode, mpmovieplayercontroller, asihttprequest

我正在尝试从我的网络服务使用 MPMoviePlayerViewController 返回的 url 播放视频。返回的示例 url 是：

```
http://view.vzaar.com/1128188/player 
```

我将其传递给 MPMoviePlayerViewController。你觉得这个网址适合播放吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:18:21.463

我查看了该页面的来源，它是一个 html 页面。我确实找到了一个 html5 源网址。试试：http: [//view.vzaar.com/1128188/video](http://view.vzaar.com/1128188/video)

**是的，上面的网址。**我刚刚在 xcode 中尝试过它，我让它工作了。

```
NSURL *url = [[NSURL alloc] initWithString:@"http://view.vzaar.com/1128188/video"];

   self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];

   [self.moviePlayer prepareToPlay];
   [self.moviePlayer.view setFrame:self.view.bounds];  // player's frame must match parent's
   [self.view addSubview: self.moviePlayer.view];

   [self.moviePlayer play]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:20:30.413

**没有**。无法播放，因为它是嵌入了 Flash 播放器的 HTML 页面。更改您的 Web 服务以直接返回视频，可能在不同的 URL 中。

# android - tabview中的webview出现异常

> ID：14054079
> 
> 赞同：3
> 
> 时间：2012-12-27T11:39:36.693
> 
> 标签：android, android-webview

在我的应用程序中，我在选项卡视图中使用网络视图。在我的应用程序中，我使用了 5 个选项卡。在我的应用程序中，一个活动在侧选项卡中提供了连接按钮。每当单击连接按钮时，选项卡内打开的网络视图很好。在那个网络中-view Facebook URL is available.whenever 输入用户名和密码并单击获取以下异常。

我在网络视图活动中使用以下代码：

```
 public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.facebook);
    wvFacebook=(WebView)findViewById(R.id.webview);
    wvFacebook.setWebViewClient(new MyWebViewClient());
    wvFacebook.loadUrl(http://facebook.com);
    }
    private class MyWebViewClient extends WebViewClient{            
    pdHandler pdHandler;
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) 
              {
               Log.e("status....","WebViewClient");
//             view.getSettings().setJavaScriptEnabled(true);
               view.loadUrl(url);

                  return true;
              }   
       }
} 
```

设备版本 4.2（果冻豆）中出现此异常

```
FATAL EXCEPTION: main
android.view.WindowManager$BadTokenException: Unable to add
windowtokenandroid.app.LocalActivityManager$LocalActivityRecord@41e841a0 is not valid;    is your activity running?
at android.view.ViewRootImpl.setView(ViewRootImpl.java:567)
at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:246)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
at android.app.Dialog.show(Dialog.java:281)
at android.app.AlertDialog$Builder.show(AlertDialog.java:951)
at android.webkit.WebViewClassic.onSavePassword(WebViewClassic.java:1853)
at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:497)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method) 
```

但是每当连接按钮单击时，波纹管 4.2 设备在选项卡视图中打开 Facebook 登录页面。但用户名和密码编辑框没有响应。请帮助我。提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:16:27.677

您尝试过 Facebook 以外的其他方式吗？也许它的api东西问题

```
android.view.WindowManager$BadTokenException: 
```

也许这个答案会帮助你

[点击这里](https://stackoverflow.com/a/12086960/1932105)

# iphone - 从 NSMutablearray 中删除逗号

> ID：14054085
> 
> 赞同：0
> 
> 时间：2012-12-27T11:40:29.347
> 
> 标签：iphone, xcode

我从服务 url 得到响应并将它们放入数组中。我在今天的工作日中有这个数组中的对象。但是这样做时我从服务中得到逗号。所以我需要从它们中删除逗号并进行比较。如何我做吗？

```
array3:
(
{
    Code = "Sunday,";
},
{
    Code = "Thursday,";
},
{
    Code = "Friday,";
},
{
    Code = "Saturday,";
}
)

To compare:

  NSMutableArray *yourArray = [[NSMutableArray alloc] init];
    for (NSDictionary *dict in array3) {
        [yourArray addObject:[dict valueForKey:@"Code"]];

    }
    BOOL isTheObjectThere = [yourArray containsObject:@"Thursday"];

But I get isTheObjectThere as 'NO' because yourArray is like:

(
Sunday,,
Thursday,,
Friday,,
Saturday,
) 
```

那么，当有两个逗号并进行比较时，如何删除多余的逗号：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:47:00.380

尝试这个，

```
 for (NSDictionary *dict in array3) {

             NSString *str=[dict valueForKey:@"Code"];

  NSString*newstr=  [str stringByReplacingOccurrencesOfString:@"," withString:@""];

    [yourArray addObject:newstr];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:48:46.060

像这样使用`stringByReplacingOccurrencesOfString`：

```
NSMutableArray *newArrayDays = [NSMutableArray array];
for(int i=0; i< [mutArrDays count]; i++) //your array of days here to remove commas from it
{
    [newArrayDays addObject:[[mutArrDays objectAtIndex:i]stringByReplacingOccurrencesOfString@",," withString:@","]:
} 
```

**编辑**：你也可以使用`replaceObjectAtIndex:withObject:`

# liferay - 在 Liferay 的控制面板中添加新部分

> ID：14054088
> 
> 赞同：3
> 
> 时间：2012-12-27T11:40:52.213
> 
> 标签：liferay

我想在 liferay 的控制面板中添加一个新部分，并且在该部分中我想拥有我的自定义 portlet。我是用分机做的。但是我想用 hook 来做。可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:04:18.983

我认为使用钩子不会那么容易，原因如下：

1.  您不能在 Hook 中修改 -[`com.liferay.portal.util.PortletCategoryKeys`](https://github.com/liferay/liferay-portal/blob/6.1.x/portal-service/src/com/liferay/portal/util/PortletCategoryKeys.java#L22)包含用于显示不同部分的键的类。不同的部分在此类中硬编码在 String 数组`ALL`中。
2.  您不能修改[`PortalImpl#isControlPanelPortlet()`](https://github.com/liferay/liferay-portal/blob/6.1.x/portal-impl/src/com/liferay/portal/util/PortalImpl.java#L4834)使用`PortletCategoryKeys#ALL`来确定所讨论的请求是否针对控制面板 portlet 的逻辑。
3.  然后你还有另一种方法，你不能用 Hook 修改它并且被广泛使用[`PortalImpl#getControlPanelCategory()`](https://github.com/liferay/liferay-portal/blob/6.1.x/portal-impl/src/com/liferay/portal/util/PortalImpl.java#L1332)

### 用钩子做：

我没有尝试过，但我认为如果您需要使用钩子来执行此操作，则必须更改所有使用上述`PortletCategoryKeys#ALL`方法`PortalImpl`的 JSP，并为 JSP 中的所有这些方法提供自定义实现。

我真的很想知道您是如何使用 EXT 实现它的，可能只是您覆盖的步骤或方法。这样我就可以尝试将它们转换为钩子。

这是我的理解。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T22:54:31.347

随着 Marketplace 的出现，ControlPanel 有了一个名为“Marketplace”的新类别，该部分在插件中引入。但是，我从未检查过 6.1 GA2 是否引入了该插件刚刚填充的新部分。如果你能找到该部分的踪迹，请检查市场插件。

另一方面，还没有人命名任何肯定需要新部分的部分（尽管有些人问我如何解决同样的问题）。因此，您可能需要重新考虑要求并选择现有部分之一。如果你不这样做，至少我会对新部分的名称和目的感兴趣 - 我可能会找到第一个实际上证明这种实现的合理性......

# iphone - Twitter API：如何从 iphone App 中的 twitter 帐户获取所有推文

> ID：14054089
> 
> 赞同：3
> 
> 时间：2012-12-27T11:40:51.073
> 
> 标签：iphone, twitter, integration

使用 Twitter 的 Api 系统，我想获取用户帐户的所有推文（自己的推文或其他用户在用户个人资料上发布推文）。然而，这并不是我真正想要的。当我正在制作一个 iPhone 应用程序时，由于我是 twitter 集成的新手，所以我很难做同样的事情。如何从中获取所有推文（自己的推文或其他用户在用户个人资料上发布推文）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:15:32.020

尝试以下示例，

[http://developer.apple.com/library/ios/#samplecode/Tweeting/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Tweeting/Introduction/Intro.html)

希望对你有帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:35:26.323

这也可以帮助你。

[https://dev.twitter.com/docs/ios](https://dev.twitter.com/docs/ios)

[这](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)将帮助您获得用户时间线（最多您可以在单个服务中获得多达 200 条推文）

[示例代码](http://developer.apple.com/library/ios/#samplecode/Tweeting/Introduction/Intro.html)和 twitter 文档的组合。集成 Twitter 非常容易。

# java - JFreeChart x 轴刻度

> ID：14054091
> 
> 赞同：14
> 
> 时间：2012-12-27T11:41:08.377
> 
> 标签：java, graph, jfreechart

我有一个始终从 x = 0 开始的 JFree XY 折线图。然后根据属性文件中的用户定义设置，应用程序根据该数字递增（这表示以分钟为单位的时间）。

例如，x = 0 开始用户定义设置为 5，因此比例变为 0、5、10、15、20……，或者用户设置为 3，因此变为 0、3、6、9、12……非常简单.

我遇到的问题是图表的开始方式。如果我从 0 开始，则 0 位于图表的中间，而不是左下方 -0.0000005、-0.000004、-0.000003… 0.000000 、 0.000001 、 0.000002… 0.000005

我怎样才能在底部手动添加比例，即定义它应该是 2 的增量，然后保持它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-04T13:41:46.630

您应该使用[`NumberAxis`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/axis/NumberAxis.html)，其中包含许多定义图表比例的方法。

例子 ：

```
// Create an XY Line chart
XYSeries series = new XYSeries("Random Data");
series.add(1.0, 500.2);
series.add(10.0, 694.1);
XYSeriesCollection data = new XYSeriesCollection(series);
JFreeChart chart = ChartFactory.createXYLineChart("XY Series Demo", "X", "Y", data,
                                                  PlotOrientation.VERTICAL, 
                                                  true, true, false);

// Create an NumberAxis
NumberAxis xAxis = new NumberAxis();
xAxis.setTickUnit(new NumberTickUnit(2));

// Assign it to the chart
XYPlot plot = (XYPlot) chart.getPlot();
plot.setDomainAxis(xAxis); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-05T02:33:17.647

基于此[示例](https://stackoverflow.com/a/14158305/230513)，这里有一个[sscce](http://sscce.org/)，用于`setTickUnit()`动态调整域轴刻度单位，从 value 开始`5`。

![图片](../Images/70cd38dee022f896d0b9e234f9e832f7.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.util.Random;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.SpinnerNumberModel;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.axis.NumberTickUnit;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

/** @see https://stackoverflow.com/a/14167983/230513 */
public class SSCCE {

    private static final int COUNT = 100;
    private static final int UNITS = 5;
    private static final Random r = new Random();

    public static void main(String[] args) {
        XYSeries series = new XYSeries("Data");
        for (int i = 0; i < COUNT; i++) {
            series.add(i, r.nextGaussian());
        }
        XYSeriesCollection data = new XYSeriesCollection(series);
        final JFreeChart chart = ChartFactory.createXYLineChart("TickUnits",
            "X", "Y", data, PlotOrientation.VERTICAL, true, true, false);
        XYPlot plot = (XYPlot) chart.getPlot();
        final NumberAxis xAxis = (NumberAxis) plot.getDomainAxis();
        xAxis.setTickUnit(new NumberTickUnit(UNITS));
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame("TickUnitDemo");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.add(new ChartPanel(chart));
                final JSpinner spinner = new JSpinner(
                    new SpinnerNumberModel(UNITS, 1, COUNT, 1));
                spinner.addChangeListener(new ChangeListener() {

                    @Override
                    public void stateChanged(ChangeEvent e) {
                        JSpinner s = (JSpinner) e.getSource();
                        Number n = (Number) s.getValue();
                        xAxis.setTickUnit(new NumberTickUnit(n.intValue()));
                    }
                });
                JPanel p = new JPanel();
                p.add(new JLabel(chart.getTitle().getText()));
                p.add(spinner);
                f.add(p, BorderLayout.SOUTH);
                f.pack();
                f.setLocationRelativeTo(null);
                f.setVisible(true);
            }
        });

    }
} 
```

# java - 使 GWT 可抓取 (SEO)

> ID：14054096
> 
> 赞同：7
> 
> 时间：2012-12-27T11:41:37.647
> 
> 标签：java, gwt, servlets, seo

我喜欢让我的 GWT-App 可以被 google bot 抓取。我找到了这篇文章（[https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)）。它指出应该有一个 servlet 过滤器，它为 google bot 提供不同的视图。但这怎么能行呢？如果我使用例如活动和地点模式，那么页面更改仅在客户端并且不涉及 servlet -> servlet 过滤器在这里不起作用。

有人可以给我一个解释吗？或者是否有另一个为 gwt 量身定制的好教程如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:49:31.343

如果您使用Activities&Places，您的“页面”将有一个可收藏的URL（通常由HTML 主机页面、# 和一些用! 或其他字符分隔的标记组成）。

因此，您可以在应用程序中放置链接以使其可抓取。如果链接包含正确的结构（带有# 和标记的结构），它将导航到正确的位置。

看看[https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T02:18:27.790

所以这是实际问题的解决方案：

我想让我的 GWT（在 Google App Engine 上运行）可以被谷歌机器人抓取，并遵循这个文档：“https://developers.google.com/webmasters/ajax-crawling/”。我试图应用一个 servlet 过滤器来过滤对我的应用程序的每个请求，并检查由 google bot 添加的转义 url 中的特殊片段，并使用无头浏览器向 bot 呈现特殊视图。

但是 servlet 不适用于“MyApp.html”文件。然后我发现，所有文件都被视为静态文件，不受过滤器的影响。我不得不从这些静态文件中排除“.html”文件。我通过将“”行添加到“appengine-web.xml”中的静态文件来做到这一点。

我希望这将帮助一些有同样问题的人节省一些时间:)

谢谢和最好的问候

# android - Android浏览器上的CSS3动画问题

> ID：14054099
> 
> 赞同：2
> 
> 时间：2012-12-27T11:41:51.997
> 
> 标签：android, jquery-ui, css, jquery-mobile, css-transitions

我正在制作一个 HTML5 应用程序，并且我使用 CSS3 转换（css3 旋转）来使用可拖动的 jQuery ui 从其一端旋转箭头。我已经集成了 jQuery UI Touch Punch 库（v0.2.2）来模仿 Ipad 和平板电脑等触摸设备上的拖动事件。

箭头在除 Android 平板电脑 (4.1) 之外的所有平台上都能顺畅旋转。似乎我得到了一种滞后，它以帧为单位旋转（箭头在我的手指在设备上旋转 3-4 秒后旋转），或者它无法按时检测到我的触摸。我已经在许多平板电脑上进行了测试，所以我很确定这不是硬件问题。在互联网上查找后，我发现 android 上的 css3 动画在转换方面存在问题。但我不认为这是原因。

这是我的代码。虽然我确信性能问题与代码无关，但如果您仍然觉得，请随时评论并提高性能。如果有其他可用的库可以实现与 jquery touch punch 相同的功能，我也愿意对其进行测试。请建议。

```
$('#arrow').draggable({
    handle: '#arrow',
    opacity: 0.01,
    helper: 'clone',
    refreshPositions: true,
    cursorAt : {left: 0 , top: 0},
    drag: function(event, ui){
        var curr_x = ui.offset.left;
        var curr_y = ui.offset.top;
        var radians = Math.atan2(curr_x - 40, curr_y - 500);
        var degree = (radians * (180 / Math.PI) * -1) + 90;
        var rotateCSS = 'rotate(' + degree + 'deg)';
         $(this).css({
                'transform': rotateCSS,
                '-moz-transform': rotateCSS,
                '-webkit-transform': rotateCSS,
                '-ms-transform': rotateCSS,
                '-o-transform': rotateCSS,
         });
     }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:10:58.837

您的代码没有任何问题，不幸的是，Android 浏览器在不同版本之间发生了相当大的变化，因此这种滞后很可能只会在一小段时间内影响一小部分用户。

我认为优化您的流程的唯一方法是删除可拖动的 jquery ui（众所周知，jQuery UI 非常复杂且效率低下），而是使用核心 js 或简单 jquery 结合小型触摸库来编写功能比如[http://eightmedia.github.io/hammer.js/](http://eightmedia.github.io/hammer.js/)

但是，尽管我无法在没有示例的情况下进行检查，但您的问题只是缺少对 android 4.1 上 cssTransitions 的最新支持，或者说笔记本电脑缺乏处理能力。

要记住的另一件事是 jquery draggable 将使用 .animate() 而不是 .css() 来移动东西，因此在许多情况下，过渡将变得无用，因为 jquery 将导致性能不足。

您现在可能已经解决了这个问题，但希望这些信息对您有所帮助。

# c# - 提高线程效率

> ID：14054101
> 
> 赞同：0
> 
> 时间：2012-12-27T11:42:09.280
> 
> 标签：c#, multithreading

我有以下代码将读取文件的字节然后构造 8 个单独的字符串，一旦完成，8 个字符串将被拼凑在一起，但是当读取 500mb 文件时，此代码需要 10 多个小时，然后我放弃运行它.

有没有办法提高这段代码的效率，让它运行得更快？

```
namespace ConsoleApplication1
{
    public class object1
    {
        public static Byte[] split1 = new Byte[18082460];
        public static Byte[] split2 = new Byte[18082460];
        public static Byte[] split3 = new Byte[18082460];
        public static Byte[] split4 = new Byte[18082460];
        public static Byte[] split5 = new Byte[18082460];
        public static Byte[] split6 = new Byte[18082460];
        public static Byte[] split7 = new Byte[18082460];
        public static Byte[] split8 = new Byte[18082452];

        public static String[] output = new String[8];

        public void run1()
        {
            for (int i = 0; i < split1.Length; i++)
            {
                output[0] += "0x" + split1[i] + ", ";
                Program.amountDone[0] += 1;
                Thread.Sleep(1);
            }
        }
        public void run2()
        {
            for (int i = 0; i < split2.Length; i++)
            {
                output[1] += "0x" + split2[i] + ", ";
                Program.amountDone[1] += 1;
                Thread.Sleep(1);
            }
        }
        public void run3()
        {
            for (int i = 0; i < split3.Length; i++)
            {
                output[2] += "0x" + split3[i] + ", ";
                Program.amountDone[2] += 1;
                Thread.Sleep(1);
            }
        }
        public void run4()
        {
            for (int i = 0; i < split4.Length; i++)
            {
                output[3] += "0x" + split4[i] + ", ";
                Program.amountDone[3] += 1;
                Thread.Sleep(1);
            }
        }
        public void run5()
        {
            for (int i = 0; i < split5.Length; i++)
            {
                output[4] += "0x" + split5[i] + ", ";
                Program.amountDone[4] += 1;
                Thread.Sleep(1);
            }
        }
        public void run6()
        {
            for (int i = 0; i < split6.Length; i++)
            {
                output[5] += "0x" + split6[i] + ", ";
                Program.amountDone[5] += 1;
                Thread.Sleep(1);
            }
        }
        public void run7()
        {
            for (int i = 0; i < split7.Length; i++)
            {
                output[6] += "0x" + split7[i] + ", ";
                Program.amountDone[6] += 1;
                Thread.Sleep(1);
            }
        }
        public void run8()
        {
            for (int i = 0; i < split8.Length; i++)
            {
                if (i == split8.Length)
                {
                    output[7] += "0x" + split8[i];
                }
                else
                {
                    output[7] += "0x" + split8[i] + ", ";
                }
                Program.amountDone[7] += 1;
                Thread.Sleep(1);
            }
        }
    };
    class Program
    {
        public static int curPoint = 0;
        public static object1 obj = new object1();
        public static Thread thread1 = new Thread(new ThreadStart(obj.run1));
        public static Thread thread2 = new Thread(new ThreadStart(obj.run2));
        public static Thread thread3 = new Thread(new ThreadStart(obj.run3));
        public static Thread thread4 = new Thread(new ThreadStart(obj.run4));
        public static Thread thread5 = new Thread(new ThreadStart(obj.run5));
        public static Thread thread6 = new Thread(new ThreadStart(obj.run6));
        public static Thread thread7 = new Thread(new ThreadStart(obj.run7));
        public static Thread thread8 = new Thread(new ThreadStart(obj.run8));
        public static int[] amountDone = { 0, 0, 0, 0, 0, 0, 0, 0 };

        [STAThread]
        static void Main(string[] args)
        {
            Byte[] bytes = GetBytesFromFile(@"C:\Users\JLT\Desktop\320kbTest.rar");

            Array.Copy(bytes, 0, object1.split1, 0, 18082460);
            Array.Copy(bytes, 18082461, object1.split2, 0, 18082460);
            Array.Copy(bytes, 36164922, object1.split3, 0, 18082460);
            Array.Copy(bytes, 54247383, object1.split4, 0, 18082460);
            Array.Copy(bytes, 72329844, object1.split5, 0, 18082460);
            Array.Copy(bytes, 90412305, object1.split6, 0, 18082460);
            Array.Copy(bytes, 108494766, object1.split7, 0, 18082460);
            Array.Copy(bytes, 126577227, object1.split8, 0, 18082452);

            thread1.Start();
            thread2.Start();
            thread3.Start();
            thread4.Start();
            thread5.Start();
            thread6.Start();
            thread7.Start();
            thread8.Start();

            String output = "Byte[] rawData = { ";

            while (true)
            {
                if (thread1.IsAlive || thread2.IsAlive || thread3.IsAlive || thread4.IsAlive || thread5.IsAlive || thread6.IsAlive || thread7.IsAlive || thread8.IsAlive)
                {
                    int temp = 0;
                    foreach (int inter in amountDone)
                    {
                        temp += inter;
                    }
                    Console.WriteLine(temp + " | " + bytes.Length);
                    Thread.Sleep(100);
                    Console.Clear();
                }
                else
                {
                    int temp = 0;
                    foreach (int inter in amountDone)
                    {
                        temp += inter;
                    }
                    if (temp < bytes.Length - 1)
                    {
                        Thread.Sleep(100);
                    }
                    else
                    {
                        break;
                    }
                }
            }

            output += object1.output[0];
            output += object1.output[1];
            output += object1.output[2];
            output += object1.output[3];
            output += object1.output[4];
            output += object1.output[5];
            output += object1.output[6];
            output += object1.output[7];

            output += "};";
            Console.WriteLine(output);
        }

        public static byte[] GetBytesFromFile(string fullFilePath)
        {
            FileStream fs = File.OpenRead(fullFilePath);
            try
            {
                byte[] bytes = new byte[fs.Length];
                fs.Read(bytes, 0, Convert.ToInt32(fs.Length));
                fs.Close();
                return bytes;
            }
            finally
            {
                fs.Close();
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T11:48:34.977

> 有没有办法提高这段代码的效率，让它运行得更快？

好吧，我可以看到两个直接的问题：

*   你在循环中睡觉。为什么？
*   *您正在大量*使用字符串连接。创建长字符串时，这将是*可怕的。*

就个人而言，我建议您从一开始就*完全*摆脱线程。它使代码*变得更加*复杂，我怀疑当你解决了上面的两个问题后，你就可以使用一个线程了。

鉴于您只是将输出写入控制台，最简单的方法是完全避免将整个文件读入内存。只需一次读取一个块（例如 32K）并遍历每个字节，将每个字节的十六进制值直接写入控制台（我希望将其缓冲......）。

如果您*必须*在内存中构建字符串，请使用`StringBuilder`- 请参阅[我关于该主题](http://www.yoda.arachsys.com/csharp/stringbuilder.html)的文章以获得详细说明 - 但我真的认为您根本不应该这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T11:53:11.940

您的程序使用 8 个线程处理 144 MB 的数据，这些线程处理 1 个字节，然后休眠 1 毫秒。

因此，您的程序将花费至少 5 个小时来睡觉......

我建议您删除`Thread.Sleep`并尝试是否可以提高程序的效率。

# html - 我没有看到预期字体的句子

> ID：14054102
> 
> 赞同：0
> 
> 时间：2012-12-27T11:42:13.597
> 
> 标签：html, fonts, font-face

```
<html>

<head>
<title> </title>

<body>
    <font face="file:///E:/softwares/FONTS/alpha kufi regular.ttf" size="+2"> This is a tester for a font, that may not be installed on the machine </font>
</body>

</head>

</html> 
```

此代码段未以预期字体显示句子。这可能是什么原因？

*注意：我知道字体标签不受 HTML 5 支持，并且被 HTML 4 弃用。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:25:14.367

这里有两个基本问题：HTML`face`属性（以及它的 CSS 对应物，`font-family`属性）需要一个字体系列*名称*作为值，而不是字体文件的 URL，并且`file:`URL 本质上是系统相关的，可能无法工作在许多情况下。

以下工作，前提是字体文件`alpha_kufi_regular.ttf`（最好避免字体名称中的空格，因为 URL 中不允许使用空格）放置在`fonts`具有 CSS 文件的目录的子目录中，并且浏览器支持 TrueType 字体作为“网络字体” ”（这不必是“网络字体”的用法，但可以是本地的；技术是相同的）：

```
<style>
@font-face {
    font-family: AlphaKufi;
    src: url('fonts/alpha_kufi_regular.ttf');
}
    </style>
<font face="AlphaKufi" size="+2"> This is a tester for a font, 
that may not be installed on the machine </font> 
```

由于并非所有浏览器都支持 TrueType 字体作为“网络字体”，如果您打算在网页上使用该字体，请考虑使用[FontSquirrel @font-face 生成器。](http://www.fontsquirrel.com/fontface/generator)

字体设置通常使用 CSS 而不是 HTML 更好，但这是一个不同的问题。理论上，“网络字体”也不需要与 HTML 一起使用`<font face="...">`（没有规范要求），但实际上它们可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:12:14.287

我找不到它的参考，但我最好的猜测是您无法使用`file://`协议（本地文件系统）访问字体。如果页面在线或通过本地服务器（http://localhost 或同等服务器）访问，这当然是正确的。

此外，根本没有理由使用`<font>`. 它可能无法工作，只是因为浏览器不再完全支持它。

*编辑*：事实上，我不确定`<font>`是否曾经支持使用字体文件而不是字体名称。

提供字体文件的解决方案是使用 CSS 的[`@font-face`](https://developer.mozilla.org/en-US/docs/CSS/@font-face).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:26:25.340

这是因为`font`'s`face`属性不采用字体文件的路径。它采用逗号分隔的字体名称列表。浏览器在系统中搜索已安装的字体并从那里加载相关的字体（如果存在）。

如果你想指定你自己的，你可能需要使用[CSS @font-face](https://developer.mozilla.org/en-US/docs/CSS/@font-face)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:45:28.293

使用 Google Web Fonts API 将 Web 字体添加到您的页面：

```
<html>

<head>
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=alpha kufi regular">
<style>
  body {
    font-family: 'alpha kufi regular';
    font-size: 48px;
  }
</style>
<title> </title>

<body>
    <div>This is a tester for a font, that may not be installed on the machine</div>
</body>

</head>

</html> 
```

~[参考](https://developers.google.com/webfonts/docs/getting_started#Quick_Start)

# javascript - 分享此小部件填充错误

> ID：14054103
> 
> 赞同：1
> 
> 时间：2012-12-27T11:42:16.347
> 
> 标签：javascript, css, sharethis

我在页面右侧添加了一个 ShareThis 小部件。小部件内的其中一个 DIV 具有设置为 7px 的填充样式属性，这会使小部件看起来很有趣。

![ShareThisWidget](../Images/a6b2f7d885695659219fac267b082b9b.png)

当我将填充更改为 0px 时，它看起来很好（使用 chrome 开发人员工具 - 该属性不能直接更改，因为它是一个外部组件）。我认为这可能与使用的 CSS 文件之一发生冲突，但事实并非如此（我尝试将它们全部关闭，但仍然发生）。我还尝试在干净的 HTML 页面上使用小部件，它工作正常，所以它可能与页面\母版页上使用的脚本有关，有没有办法检查冲突？

# hibernate - Hibernate：从鉴别器中获取子类？

> ID：14054107
> 
> 赞同：0
> 
> 时间：2012-12-27T11:42:22.160
> 
> 标签：hibernate, jpa

我在 Jpa/Hibernate 中有每个类层次结构映射的经典表：

万物之父是：

```
@Entity
@Table( name="products", uniqueConstraints=@UniqueConstraint(columnNames="barcode") )
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(
    name="discriminator",
    discriminatorType=DiscriminatorType.STRING
)
@DiscriminatorValue(value="GENERAL")
public class Product implements Serializable ... 
```

然后我会有：

```
@Entity
@Table( name="products" )
@DiscriminatorValue("GLASS")
public class Sunglasses extends Product ... 
```

现在我问你：有一天我需要确定给定的**产品**是**太阳镜**还是其他产品类型。我想“鉴别器”就是为此而存在的，但是....

如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:24:28.627

您可以简单地在 getter 方法中返回实体的类型：

```
public ProductType getType() {
    return ProductType.PRODUCT;
}

...

@Override
public ProductType getType() {
    return ProductType.SUN_GLASSES;
} 
```

但问题是：你为什么需要这样做？产品应该以多态方式使用。访问者模式有助于做到这一点。

顺便说一句，请注意，即使返回的类型是 SUN_GLASSES，如果引用是惰性代理，将产品转换为 SunGlasses 也可能会失败。

# image - Skoch 的大小调整系统如何工作？

> ID：14054108
> 
> 赞同：2
> 
> 时间：2012-12-27T11:42:23.817
> 
> 标签：image, zend-framework, zend-form, image-resizing

我正在使用[http://eliteinformatiker.de/2011/09/02/thumbnails-upload-and-resize-images-with-zend_form_element_file/](http://eliteinformatiker.de/2011/09/02/thumbnails-upload-and-resize-images-with-zend_form_element_file/)在 Zend Framework 中调整我的图像大小。

但实际上，它不起作用`receive()`。

我的代码：

我的 Zend 表格

```
class Application_Form_Admin_Photos_Ajout extends Zend_Form
{
   public function init()
    {        

        /**
         * FILE
         */
        $this->setAttrib('enctype', 'multipart/form-data');
        $maxsize = 2 * 1024 * 1024; // Premier chiffre en MB
        $file = new Zend_Form_Element_File('path');
        $file->setLabel("Choisissez l'image");
        $file->setMaxFileSize($maxsize);
        $file->addValidator('Count', false, 1);
        $file->addValidator('Size', false, $maxsize);
        $file->addValidator('Extension', false, 'jpg,png,gif');
        $file->setRequired(true);
        $this->addElement($file);

        /**
         * LEGENDE
         */
[...]

        /**
         * SUBMIT
         */
[...]
    }

} 
```

我的控制器：

```
 if ($request->isPost())
    {
        if ($form->isValid($request->getPost()))
        {
            $file = pathinfo($form->path->getFileName());
            $path = Zend_Registry::get('config')->imgPath . uniqid() . time() . '.' . $file['extension'];
            $form->getElement('path')->addFilter('Rename', array('target' => $path,'overwrite' => true));
            $filterChain = new Zend_Filter();
            // Create the original one
            $filterChain->appendFilter(new Skoch_Filter_File_Resize(array(
                'directory' => Zend_Registry::get('config')->imgPath,
                'width' => 10000,
                'height' => 10000,
                'keepSmaller' => true
            )));
            // Create a medium image with at most 350x200 pixels
            $filterChain->appendFilter(new Skoch_Filter_File_Resize(array(
                'directory' => Zend_Registry::get('config')->thumbPath,
                'width' => 350,
                'height' => 200,
                'keepRatio' => true,
            )));
            $form->getElement('path')->addFilter($filterChain);
            if (!$form->path->receive())
                $this->_redirect('/admin/menu/menu');
        }
    } 
```

有什么解决办法吗？

谢谢你。

* * *

**我发现。**

在 Zend Form 中替换它：

```
$file->addValidator('Count', false, 1); 
```

经过，

```
$file->addValidator('Count', false, 2); 
```

其中`2`意味着您的 Zend Form 最多接受 2 个文件。( [http://framework.zend.com/manual/1.12/en/zend.file.transfer.validators.html#zend.file.transfer.validators.count](http://framework.zend.com/manual/1.12/en/zend.file.transfer.validators.html#zend.file.transfer.validators.count) )

另一种解决方案，只需**删除**线，

```
$file->addValidator('Count', false, 1); 
```

而这个，它不是很有用：

```
 $filterChain->appendFilter(new Skoch_Filter_File_Resize(array(
            'directory' => Zend_Registry::get('config')->imgPath,
            'width' => 10000,
            'height' => 10000,
            'keepSmaller' => true
        ))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T02:20:03.227

我只是添加你找到的答案，这样人们就知道这个问题得到了回答。

**我发现。**

在 Zend Form 中替换它：

```
$file->addValidator('Count', false, 1); 
```

经过，

```
$file->addValidator('Count', false, 2); 
```

其中 2 表示您的 Zend Form 最多接受 2 个文件。( [http://framework.zend.com/manual/1.12/en/zend.file.transfer.validators.html#zend.file.transfer.validators.count](http://framework.zend.com/manual/1.12/en/zend.file.transfer.validators.html#zend.file.transfer.validators.count) )

另一种解决方案，只需删除线，

```
$file->addValidator('Count', false, 1); 
```

而这个，它不是很有用：

```
$filterChain->appendFilter(new Skoch_Filter_File_Resize(array(
            'directory' => Zend_Registry::get('config')->imgPath,
            'width' => 10000,
            'height' => 10000,
            'keepSmaller' => true
        ))); 
```

# java - PyDev for Eclipse - 解决 Python 依赖项（未解决的导入）

> ID：14054111
> 
> 赞同：15
> 
> 时间：2012-12-27T11:42:40.747
> 
> 标签：java, python, eclipse-plugin, pydev, m2eclipse

我使用 PyDev for Eclipse 作为我的 IDE 和 pip 作为我的包管理工具，运行 virtualenv。

每次我想在我的项目中使用/包含一些新库或新依赖项时，我都会将它们添加到**pip-requires**文件中。依赖项安装在我的虚拟环境中，运行后没有问题`pip install -r pip-requires`。

**我的环境**：

*   Ubuntu 12.04
*   PyDev for Eclipse 2.7.1.2012100913
*   Python 2.7.3
*   日蚀靛蓝

更新：**我的 Pydev 设置**：

![在此处输入图像描述](../Images/bfddc6032cafe7494bed373e2f7e77cd.png)

**问题：**

*   **eclipse/pydev**对添加到我的虚拟环境中的新库一无所知。我不得不手动将 .egg 源文件夹一一添加到 Eclipse 项目的 PYTHONPATH 中，以解决所有未解决的导入问题，这非常烦人！能否以更简单的方式解决 python 依赖项？

更新：

*   我发现如果我使用虚拟环境`Env/bin/python`作为屏幕截图所示的解释器，一些基本模块在 eclipse 中没有解析，例如。`import copy, import json`等我应该使用默认`/usr/bin/python`作为解释器，只需将虚拟环境添加`site-package`到 PYTHONPATH 吗？这样我就可以解决标准python库（例如json）和我自己的项目依赖项？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T16:10:04.920

当您从 virtualenv 中选择 python 解释器时，请确保您的系统 PYTHONPATH 包含 site-packages 文件夹。就像快照一样。 ![在此处输入图像描述](../Images/9a6c3aae5dbc0d23de0920c3656099cc.png)

然后就不需要将它们一一添加到 PYTHONPATH 中了。您将需要重新启动 Eclipse（刷新不起作用）。将添加新模型。

更新：我检查了 virtualenv 中的 PYTHONPATH。我发现 sys.path 中还有其他一些路径。它们是系统默认的 python 安装位置。这些路径包括基本模型，如`copy`和`json`。

PS：我的环境是 Max OSX 10.8。请通过以下方式检查您自己平台的输出`print sys.path`

```
/Users/username/.virtualenvs/test/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
/Users/username/.virtualenvs/test/lib/python2.7/site-packages/pip-1.1-py2.7.egg
/Users/username/.virtualenvs/test/lib/python27.zip
/Users/username/.virtualenvs/test/lib/python2.7
/Users/username/.virtualenvs/test/lib/python2.7/plat-darwin
/Users/username/.virtualenvs/test/lib/python2.7/plat-mac
/Users/username/.virtualenvs/test/lib/python2.7/plat-mac/lib-scriptpackages
/Users/username/.virtualenvs/test/lib/python2.7/lib-tk
/Users/username/.virtualenvs/test/lib/python2.7/lib-old
/Users/username/.virtualenvs/test/lib/python2.7/lib-dynload
/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7
/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin
/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk
/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac
/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages
/Users/username/.virtualenvs/test/lib/python2.7/site-packages 
```

我认为这是 virtualenv 的要求。您需要将这些路径添加到 pydev 系统 PYTHONPATH 中。然后你就可以使用这些基本模块了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-31T13:37:55.240

根据您的问题，我了解到您正在手动将 Python Egg 包添加到路径中。而不是这样做，您可以转到项目设置窗口，然后打开“PyDev - PYTHONPATH”，导航到名为“外部库”的面板并添加虚拟环境的*整个* `site-packages`文件夹，通常是`/path/to/virtualenv/lib/site-packages/`. 这样您就不会为每个包裹一个一个地添加鸡蛋。当你安装一个新的包时，只要进入 Eclipse 窗口，如果导入仍然没有解决，选择项目并按`F5`键，刷新项目。

希望这对你有用。祝你好运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T23:41:44.253

这就是我使用 virtualenv 设置 PyDev 的方式：

1.  在以下位置创建一个 virtualenv`/home/anshumanb/.virtualenvs/myvenv`
2.  在 Eclipse 中，Window > Preferences > PyDev > Interpreter - Python，我添加了一个新的解释器。对于解释器可执行文件，我将它指向 virtualenv 的 Python 即`/home/anshumanb/.virtualenvs/myenv/bin/python`
3.  在“选择要添加到 PYTHONPATH 的文件夹”屏幕中，我选择了所有以`/home/anshumanb/.virtualenvs/myvenv`AND开头的路径
    `/usr/lib/python2.7`
    `/usr/lib/python2.7/plat-linux2`
    `/usr/lib/python2.7/lib-tk`，没有别的。
    （请参阅[此处](https://stackoverflow.com/questions/6615629/)了解我为什么选择`/usr/lib/python2.7`,`/usr/lib/python2.7/plat-linux2`和`/usr/lib/python2.7/lib-tk`）
4.  当我回到 Eclipse 首选项中的解释器 - Python 屏幕时，我点击应用然后确定

在此之后，每当我将任何包安装到 virtualenv 中时，我都会返回 Interpreter - Python 屏幕，点击 Apply，选择指向我的 virtualenv（以及我刚刚安装包的那个）的解释器，然后点击 Apply。PyDev 然后选择安装在 virtualenv 中的任何新包。

注意：我使用的是 PyDev 2.7.1 和 Python 2.7.3，但在带有 Eclipse 4.2.1 的 Arch Linux 机器上。但我认为这不会有什么不同。

# java - JTable 上的 JToolTip - 不显示

> ID：14054112
> 
> 赞同：1
> 
> 时间：2012-12-27T11:42:44.020
> 
> 标签：java, swing, jtable, jtooltip

我正在尝试在 JTable 上实现 JToolTip，但是我遇到了一些问题。我在以下链接中找到了如何执行此操作的 oracle 示例：

[http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableToolTipsDemoProject/src/components/TableToolTipsDemo.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableToolTipsDemoProject/src/components/TableToolTipsDemo.java)

```
public class test extends JPanel {
    private boolean DEBUG = false;
    protected String[] columnToolTips = {null,
                                         null,
                                         "The person's favorite sport to participate in",
                                         "The number of years the person has played the sport",
                                         "If checked, the person eats no meat"};

    public test() {
        super(new GridLayout(1,0));

        JTable table = new JTable(new MyTableModel()) {

            //Implement table cell tool tips.
            public String getToolTipText(MouseEvent e) {
                String tip = null;
                java.awt.Point p = e.getPoint();
                int rowIndex = rowAtPoint(p);
                int colIndex = columnAtPoint(p);
                int realColumnIndex = convertColumnIndexToModel(colIndex);

                if (realColumnIndex == 2) { //Sport column
                    tip = "This person's favorite sport to "
                           + "participate in is: "
                           + getValueAt(rowIndex, colIndex);
                } else if (realColumnIndex == 4) { //Veggie column
                    TableModel model = getModel();
                    String firstName = (String)model.getValueAt(rowIndex,0);
                    String lastName = (String)model.getValueAt(rowIndex,1);
                    Boolean veggie = (Boolean)model.getValueAt(rowIndex,4);
                    if (Boolean.TRUE.equals(veggie)) {
                        tip = firstName + " " + lastName
                              + " is a vegetarian";
                    } else {
                        tip = firstName + " " + lastName
                              + " is not a vegetarian";
                    }
                } else { 
                    //You can omit this part if you know you don't 
                    //have any renderers that supply their own tool 
                    //tips.
                    tip = super.getToolTipText(e);
                }
                return tip;
            }

            //Implement table header tool tips. 
            protected JTableHeader createDefaultTableHeader() {
                return new JTableHeader(columnModel) {
                    public String getToolTipText(MouseEvent e) {
                        String tip = null;
                        java.awt.Point p = e.getPoint();
                        int index = columnModel.getColumnIndexAtX(p.x);
                        int realIndex = columnModel.getColumn(index).getModelIndex();
                        return columnToolTips[realIndex];
                    }
                };
            }
        };

        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);

        //Create the scroll pane and add the table to it.
        JScrollPane scrollPane = new JScrollPane(table);

        //Add the scroll pane to this panel.
        add(scrollPane);
    }

    class MyTableModel extends AbstractTableModel {
        private String[] columnNames = {"First Name",
                                        "Last Name",
                                        "Sport",
                                        "# of Years",
                                        "Vegetarian"};
        private Object[][] data = {
        {"Kathy", "Smith",
         "Snowboarding", new Integer(5), new Boolean(false)},
        {"John", "Doe",
         "Rowing", new Integer(3), new Boolean(true)},
        {"Sue", "Black",
         "Knitting", new Integer(2), new Boolean(false)},
        {"Jane", "White",
         "Speed reading", new Integer(20), new Boolean(true)},
        {"Joe", "Brown",
         "Pool", new Integer(10), new Boolean(false)}
        };

        public int getColumnCount() {
            return columnNames.length;
        }

        public int getRowCount() {
            return data.length;
        }

        public String getColumnName(int col) {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        /*
         * JTable uses this method to determine the default renderer/
         * editor for each cell.  If we didn't implement this method,
         * then the last column would contain text ("true"/"false"),
         * rather than a check box.
         */
        public Class getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        /*
         * Don't need to implement this method unless your table's
         * editable.
         */
        public boolean isCellEditable(int row, int col) {
            //Note that the data/cell address is constant,
            //no matter where the cell appears onscreen.
            if (col < 2) {
                return false;
            } else {
                return true;
            }
        }

        /*
         * Don't need to implement this method unless your table's
         * data can change.
         */
        public void setValueAt(Object value, int row, int col) {
            if (DEBUG) {
                System.out.println("Setting value at " + row + "," + col
                                   + " to " + value
                                   + " (an instance of "
                                   + value.getClass() + ")");
            }

            data[row][col] = value;
            fireTableCellUpdated(row, col);

            if (DEBUG) {
                System.out.println("New value of data:");
                printDebugData();
            }
        }

        private void printDebugData() {
            int numRows = getRowCount();
            int numCols = getColumnCount();

            for (int i=0; i < numRows; i++) {
                System.out.print("    row " + i + ":");
                for (int j=0; j < numCols; j++) {
                    System.out.print("  " + data[i][j]);
                }
                System.out.println();
            }
            System.out.println("--------------------------");
        }
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("TableToolTipsDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        JComponent newContentPane = new test();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

但是，当我编译并运行它时，没有显示任何工具提示？

关于为什么会很棒的任何帮助，

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:38:29.070

您显示的代码正在执行代码中提到的内容。我尝试了这段代码，它显示了第 3 和第 5 列单元格以及第 3、第 4 和第 5 列标题的工具提示。

见代码：

```
columnToolTips = {null,
                                 null,
                                 "The person's favorite sport to participate in",
                                 "The number of years the person has played the sport",
                                 "If checked, the person eats no meat"}; 
```

和

```
 if (realColumnIndex == 2) { //Sport column
            tip = "This person's favorite sport to "
                   + "participate in is: "
                   + getValueAt(rowIndex, colIndex);
        } else if (realColumnIndex == 4) { //Veggie column
            TableModel model = getModel();
            String firstName = (String)model.getValueAt(rowIndex,0);
            String lastName = (String)model.getValueAt(rowIndex,1);
            Boolean veggie = (Boolean)model.getValueAt(rowIndex,4);
            if (Boolean.TRUE.equals(veggie)) {
                tip = firstName + " " + lastName
                      + " is a vegetarian";
            } else {
                tip = firstName + " " + lastName
                      + " is not a vegetarian";
            }
        } else { 
            //You can omit this part if you know you don't 
            //have any renderers that supply their own tool 
            //tips.
            tip = super.getToolTipText(e);
        } 
```

和

```
return new JTableHeader(columnModel) {
            public String getToolTipText(MouseEvent e) {
                String tip = null;
                java.awt.Point p = e.getPoint();
                //System.out.println(p);
                int index = columnModel.getColumnIndexAtX(p.x);
                int realIndex = columnModel.getColumn(index).getModelIndex();
                return columnToolTips[realIndex];
            }
        }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:45:03.877

根据您的代码片段`getToolTipText()`方法，仅返回选择性列的工具提示，即（2,4），对于标题，您有一个数组`columnToolTips`，其中仅指定了 3,4,5 列的值。

因此，简而言之，您的代码运行良好。请进行适当的更改，您将一切顺利。

# java - Java 小程序 - 在您声明的地方初始化和实例化

> ID：14054117
> 
> 赞同：1
> 
> 时间：2012-12-27T11:42:55.457
> 
> 标签：java, swing, applet, compiler-errors

这里有没有人不同意：

```
JLabel lbl;
lbl = new JLabel ("a label"); 
```

相当于：

```
JLabel lbl = new JLabel ("a label"); 
```

我猜不是？

请注意 - 这与以下问题有关：

```
public class Test 
extends JApplet
{
    JLabel lbl;
    lbl = new JLabel ("a label");
    public void init() 
    {
    }
} 
```

此代码 (A) 给出以下错误：

> 令牌“;”上的语法错误，预期

但是，此代码 (B) 完美运行：

```
public class Test 
extends JApplet
{
    JLabel lbl = new JLabel ("a label");
    public void init() 
    {
    }
} 
```

知道为什么会这样吗？这可能与 init 方法有关。我仍然期待看到数学上精确的解释，而不是可解释的理论。非常感谢。我是小程序的新手。PS：为简单起见，我省略了包导入（例如 import javax.swing.*; ）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:45:55.647

你不能在课堂上获得像这样的免费说明。类主体可以包含方法、字段声明、构造函数、内部类声明、静态和实例初始化程序块，但不能包含这样的自由指令。

你可以做

```
JLabel lbl;

{
    lbl = new JLabel ("a label");
} 
```

但它很丑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:27:39.633

它与applet 或init() 方法无关。您只能在方法体或块内有指令（`lbl = new JLabel ("a label");`没有声明是指令）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T12:26:27.653

如果在方法中使用它应该是相同的：

```
public void setMethod() {
    JLabel lbl;
    lbl = new JLabel ("a label");
} 
```

# iphone - iphone facebook login safari 无法打开页面

> ID：14054118
> 
> 赞同：2
> 
> 时间：2012-12-27T11:42:57.373
> 
> 标签：iphone, facebook

我正在尝试集成 facebook sdk 3.1.1，我在验证时遇到问题，当我在 safari 中授权应用程序时，它显示“无法打开页面”-“Safari 无法打开页面，因为地址无效”有什么猜测吗？

**编辑：**如果在设置中添加了帐户，它可以正常工作，但是如果没有链接帐户，则必须打开我这样打开的会话

```
 [FBSession openActiveSessionWithAllowLoginUI:YES]; 
```

它在验证应用程序后打开 safari [好的]，“无法打开页面”的 safari 弹出窗口并且不打开应用程序。其他认证方式？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T14:03:08.077

这是来自最新的 Facebook“Hackbook”示例代码的示例。打开你的 Info.plist 文件。构建 URL 类型 / URL 方案如下：

![在此处输入图像描述](../Images/2d859e9495a31cab900df37fdc3f2325.png)

URL Schemes 的第 0 项中 fb... 旁边的大数字必须是您在 Facebook 应用程序仪表板上找到的 Facebook 应用程序 ID。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T06:49:09.387

除了 plist 之外，我不知道或发现在 Project > Target > Info > URL Types > URL Schemes 下还有 facebook appid 的任何文档

就我而言，它不存在，但在 facebook 的示例项目中它存在，我用 fb 插入了 appid，它运行良好

**编辑**：将 fb 放在您的应用程序 ID 前面，例如。FB123456789

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T23:41:05.383

支持文件 -> info.plist 右键单击​​打开为 -> 源代码。

确保你有

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb0123456789</string>
        </array>
    </dict>
</array>
<key>FacebookAppID</key>
<string>012345678</string> 
```

其中 0123456789 是您的 Facebook 应用程序密钥

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T19:17:22.603

在我的情况下找到了anwser，我删除了 info.plist 文件中的“URL 类型”条目遵循 facebook 教程： [https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/ 3.1/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)子弹 5

一旦我再次使用带有 fb 的 URL 方案添加 URL 类型，它就可以工作了希望它可以帮助 BR @wazzaword

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-20T08:30:46.950

我在模拟器上有这个问题，在设备上它工作正常（当所有设置都正确时）

# html - 比原始文件更小的` `仍然加载整个图像文件吗？

> ID：14054119
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:42:58.073
> 
> 标签：html, image, jpeg

当我有一个`<img>`小于原始图像的文件时，文件会自动调整大小吗？还是用户必须加载整个图像？

例如，我有巨大的壁纸文件，但我只显示 100 x 100 像素的缩略图。我只是将`<img>`宽度和高度设置为 100 像素，效率低下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T11:44:54.437

是的。浏览器必须下载整个图像文件，然后对其进行缩放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:40:53.563

是的，整个图像将加载，然后缩放将在那里。

在问一个简单的问题之前，你为什么不搜索一下。如果你谷歌它，你可以很容易地得到这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:00:57.277

我建议下次在您提出任何可以让您获得实践经验的问题之前，请先在任何编辑器上进行一些 Google 操作并进行练习。

回答：- 整个图像将被加载，整个图像将自动重新调整大小，是的，使用大量尺寸来缩小图像高度和宽度并不是一个好习惯

# r - 将元素添加到 R 中的列表（在嵌套列表中）

> ID：14054120
> 
> 赞同：6
> 
> 时间：2012-12-27T11:43:09.437
> 
> 标签：r, list

我有一个嵌套列表 l3 为：

```
l1<- as.list(c(1,2,3,4,5))
l1

l2<- as.list(c(6,7,8,9,10))
l2

l3<- list(l1,l2)
l3 
```

l3 显示为：

```
> l3
[[1]]
[[1]][[1]]
[1] 1

[[1]][[2]]
[1] 2

[[1]][[3]]
[1] 3

[[1]][[4]]
[1] 4

[[1]][[5]]
[1] 5

[[2]]
[[2]][[1]]
[1] 6

[[2]][[2]]
[1] 7

[[2]][[3]]
[1] 8

[[2]][[4]]
[1] 9

[[2]][[5]]
[1] 10 
```

我需要将第三个列表 l4 添加到 l3 使得 l3 变为：

```
[[1]][[1]]
    [1] 1

to

[[2]][[5]]
    [1] 10

[[3]][[1]]
    [1] 30

[[3]][[2]]
    [1] 32

[[3]][[3]]
    [1] 33

[[3]][[4]]
    [1] 34

[[3]][[5]]
    [1] 35 
```

其中 l4 是：

```
l4<- as.list(c(31,32,33,34,35)) 
```

我该如何完成它？我已经尝试过`(c)`, `list`，甚至明确提出论点并得到了`out of bounds error`. 我可以用什么来完成这项工作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-27T12:01:14.873

它适用于`append`和`list`：

```
append(l3, list(l4)) 
```

结果：

```
> str(append(l3, list(l4)))
List of 3
 $ :List of 5
  ..$ : num 1
  ..$ : num 2
  ..$ : num 3
  ..$ : num 4
  ..$ : num 5
 $ :List of 5
  ..$ : num 6
  ..$ : num 7
  ..$ : num 8
  ..$ : num 9
  ..$ : num 10
 $ :List of 5
  ..$ : num 31
  ..$ : num 32
  ..$ : num 33
  ..$ : num 34
  ..$ : num 35 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-27T12:09:04.290

我不知道你试过什么`c`，但它有效

```
c(l3,list(l4)) 
```

PS：`append` 是`c`插入特定索引的包装器，（见参数后）

# android - 将对象与标记关联（谷歌地图 v2）

> ID：14054122
> 
> 赞同：31
> 
> 时间：2012-12-27T11:43:21.943
> 
> 标签：android, android-maps, google-maps-android-api-2

在我的应用程序中，我有一些使用标记在地图上显示其位置的对象。问题是我发现处理标记点击的唯一方法是

```
googleMap.setOnMarkerClickListener(new ... {
    @Override
    public void onMarkerClick(Marker marker) {
       // how to get the object associated to marker???
    }
}) 
```

换句话说，我得到了 Marker 对象，而我拥有的唯一接口允许我只设置 MarkerOptions。

有什么方法可以将标记与对象相关联？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-27T12:03:20.493

我认为这个回调虽然 Android 团队不是很彻底，但是，这就是我们所拥有的。

每当您调用`mMap.addMarker();`它时，它都会返回生成的标记。然后，您可以使用 HashMap 或其他一些数据持有者结构来记住它。

```
// Create the hash map on the beginning
WeakHashMap <Marker, Object> haspMap = new WeakHashMap <Marker, Object>();

// whenever adding your marker
Marker m = mMap.addMarker(new MarkerOptions().position(lat, lng).title("Hello World").icon(icon_bmp));
haspMap.put(m, your_data); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-08-24T11:51:21.800

您可以使用[Marker](https://developers.google.com/android/reference/com/google/android/gms/maps/model/Marker)的[setTag()](https://developers.google.com/android/reference/com/google/android/gms/maps/model/Marker.html#setTag(java.lang.Object))方法关联任意对象

```
Marker amarker = mMap.addMarker(new MarkerOptions().position(lat, lng).title("Hello World"));
amarker.setTag(new SomeData()); 
```

要检索与标记关联的数据，您只需使用其[getTag()](https://developers.google.com/android/reference/com/google/android/gms/maps/model/Marker.html#getTag())读取它，然后将其转换为其原始类型。

```
SomeData adata = (SomeData) amarker.getTag(); 
```

[更多信息](https://developers.google.com/maps/documentation/android-api/marker#display_additional_information_about_a_marker)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-21T16:23:00.087

另一种选择是创建一个 Map，其键是 marker.getId()，值是我们的对象。

这样，我们就不会在内存中保留对 Marker 的引用，也不必担心垃圾收集的标记。

在这里你可以看到[更多的答案](https://stackoverflow.com/questions/13713726/maps-api-v2-with-different-marker-actions)。

# php - 关于使用查询字符串和表单操作 get 重写 url

> ID：14054124
> 
> 赞同：0
> 
> 时间：2012-12-27T11:43:24.190
> 
> 标签：php, mod-rewrite, url-rewriting

请帮助删除额外的查询字符串

我在我的 .htaccess 中使用此代码

```
RewriteRule ^ip/(.*)$ /iplookup.php?lookup_ip=$1 [L,QSA] 
```

它可以工作，但是当尝试在表单中查找其他 IP 地址时，
它会在地址栏中显示如下内容：

```
"/ip/?lookup_ip=66.249.66.2" 
```

我的表格是

```
<form action="/ip/" method="get">
<input type="text" value="{$address}" name="lookup_ip" id="lookup_ip">
<input type="submit" value="IP Lookup"/>
</form> 
```

现在是否可以隐藏“？lookup_ip =”

我想显示 /ip/66.249.66.2

我认为我的问题出在形式上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T12:01:18.320

当您提交 GET 请求表单时，链接将更改为包含参数和值作为`param=value`. 默认情况下您无法更改它。

你可以使用 javascript 为你做这件事。

```
<script type='text/javascript'>
function SubmitForm() {
  var val = document.getElementById('lookup_ip').value;

  //check val for length / valid IP here

  window.location.href='/ip/' + val;
  return false;
}
</script>

<form action="/ip/" method="get" onsubmit='return SubmitForm()'>
<input type="text" value="{$address}" name="lookup_ip" id="lookup_ip">
<input type="submit" value="IP Lookup"/>
</form> 
```

# javascript - 在文本框中输入变量名并获取对应的值

> ID：14054130
> 
> 赞同：0
> 
> 时间：2012-12-27T11:44:03.473
> 
> 标签：javascript, variables, updates

我创建了 3 个变量 a、b、c。我已经为 a 和 b 赋值，并且还创建了一个文本框。我想要做的是在文本框中输入变量的名称并单击按钮，然后文本框应该显示分配给该变量的值。这可能很简单，但我不知道我做错了什么。

这是**[小提琴](http://jsfiddle.net/vh8AB/1/)**

```
<html>
    <head>
        <script>
            function display(){
                var a = 2;
                var b = 3;
                var c = document.getElementById("b1").value;       
                document.getElementById("demo").innerHTML=c;
            }
        </script>
    </head>
    <body>

        <input type="text" id="b1">
        <button type="button" onclick="display()">Display</button>
        <p id="demo">Update Value.</p>

    </body>
</html> 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:54:57.200

您最简单的选择是将变量分配给对象，如下所示：

```
var vars;

function display() {
    var value = document.getElementById("b1").value;
    vars = {
        a: 2,
        b: 3,
        c: value
    }
    if (vars.hasOwnProperty(value)) { // If the entered value is a variable name
        document.getElementById("demo").innerHTML = vars[value]; // Display the variable
    } else { // Otherwise
        document.getElementById("demo").innerHTML = value; // display the value
    }
} 
```

**[工作示例](http://jsfiddle.net/BKxWT/2/)**

可以用这个`if/else`替换，使它更短一点：

```
document.getElementById("demo").innerHTML = vars.hasOwnProperty(value) // If
                                                ? vars[value]          // Then
                                                : vars.c;              // Else 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:55:13.973

试试这个方法：

```
<html>
    <head>
        <script>
            function display(){
                var a = 2;
                var b = 3;
                var c = document.getElementById("b1").value;
                if(c==a){
                    document.getElementById("demo").innerHTML='a';
                }
                if(c==b){
                    document.getElementById("demo").innerHTML='b';
                }
            }
        </script>
    </head>
    <body>
        <input type="text" id="b1">
        <button type="button" onclick="display()">Display</button>
        <p id="demo">Update value.</p>
    </body>
</html> 
```

[**演示**](http://jsfiddle.net/vh8AB/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:02:46.627

您正在寻找的是 eval() 方法（不推荐使用快速谷歌搜索）。

```
 <script>
        function display(){
            var a = 2;
            var b = 3;
            var c = document.getElementById("b1").value;       
            document.getElementById("demo").innerHTML=(eval(c));
            // if user enters b in the input field, then the html in demo will be 3
            // if user enters a in the input field, then the html in demo will be 2
        }
    </script> 
```

再次，不推荐！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:03:31.417

如果您直接在您`script`的 -element 中声明变量，它们将作为 -object 的属性创建`window`并且可以这样访问。因此，只需像下面这样更新您的脚本以显示变量的内容：

```
<html>
    <head>
        <script>
            var a = 2, b = 3;
            function display() {
                var strVarName = document.getElementById('b1').value;
                if(window.hasOwnProperty(strVarName)) {
                    document.getElementById('demo').innerHTML = window[strVarName];
                } else {
                    document.getElementById('demo').innerHTML = 'Variable ' + strVarName + ' does not exist.'
                }
            }
        </script>
    </head>
    <body>
        <input type="text" id="b1">
        <button type="button" onclick="display()">Display</button>
        <p id="demo">Update Value.</p>
    </body>
</html> 
```

如果您在显示函数中声明变量，这将不起作用，但是如果此代码要在系统中用于除这个简单函数之外的任何内容，这似乎不是您会做的事情。

# iphone - 如何在 NSString 中用 / 替换“”

> ID：14054133
> 
> 赞同：1
> 
> 时间：2012-12-27T11:44:18.787
> 
> 标签：iphone, json, nsstring

我有以下字符串。

```
"phone" : "555-522-8243",
"name" : "Anna Haro" 
```

我想替换`"` 为`/"`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:48:33.073

```
NSString* yourNewString=  [yourOldaString stringByReplacingOccurrencesOfString:@"\"" withString:@"/\""];
NSLog(@"\n New String %@",yourNewString); 
```

# java - 如何使用 Log4j 使用 simpledb appender

> ID：14054134
> 
> 赞同：1
> 
> 时间：2012-12-27T11:44:20.353
> 
> 标签：java, logging, log4j, amazon-simpledb

如何使用 log4j 属性登录到 amazon simple db

```
http://code.google.com/p/simpledb-appender/ 
```

该站点演示了如何使用 xml 文件使用 slf4j 配置 simpledb，但我需要与 log4j 属性相同，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:17:00.947

是的，见下文

```
# Root logger option
log4j.rootLogger=INFO, simpledb

# Direct log messages to simpledb
log4j.appender.simpledb=com.kikini.logging.simpledb.SimpleDBAppender
log4j.appender.simpledb.DomainName=your_simpledb_domain
log4j.appender.simpledb.AccessId=your_aws_access_id
log4j.appender.simpledb.SecretKey=your_aws_secret_key 
```

# iphone - 适用于 iPhone 的 Facebook 分享按钮

> ID：14054135
> 
> 赞同：0
> 
> 时间：2012-12-27T11:44:23.067
> 
> 标签：iphone, ios, facebook

在我的应用程序中，我使用 Facebook SDK，

我的视图上有一个标记为收藏按钮

```
 UIImage *favNormal = [UIImage imageNamed:@"Fav_normal"];
UIImage *favPressed = [UIImage imageNamed:@"Fav_pressed"];
[favButton setImage:favNormal forState:UIControlStateNormal];
[favButton setImage:favPressed forState:UIControlStateHighlighted];
favButton.frame = CGRectMake(0, 0, favNormal.size.width, favNormal.size.height);
//    favButton.center = CGPointMake(190, 70);
favButton.center = CGPointMake(85+(favNormal.size.width/2), 73);
[headView addSubview:favButton];

favButton.enabled = NO;
ASIFormDataRequest *request = [ProjectServerRequests ASIFormDataRequestForSrcipt:@"isFavorite"];
[request setPostValue:[NSString stringWithFormat:@"%d", Id] forKey:@"sid"];
[request setCompletionBlock:^{
    NSString *response = [request responseString];
    NSLog(@"isFavorite response: %@", response);
    if([response isEqualToString:@"yes"]) {
        [favButton setImage:[UIImage imageNamed:@"Fav_normal"] forState:UIControlStateNormal];
        [fav setImage:[UIImage imageNamed:@"Fav_pressed"] forState:UIControlStateHighlighted];
    }
    favoriteButton.enabled = YES;
}];
[request startAsynchronous]; 
```

现在我正在尝试制作一个共享按钮，以便它应该在 Fb 上共享视图上的特定 URL，就像视图有 **www.my-website.com/key-chain**这个 URL 我将 Url 存储在**NSMutableString * url_selected**

因此，通过单击共享按钮，我希望它应该采用该特定 URL 并在 Fb 上共享该 URL，

谁能告诉我如何为我的应用程序中的 Fb 分享按钮编码...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:46:32.217

您可以使用[共享工具包](https://github.com/ShareKit/ShareKit)进行 FB 共享，例如 url、文本。安装最新的共享工具包并实施它。

它很容易实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:07:24.190

如果您使用的是 iOS6，请尝试使用 iOS SDK 中包含的社交框架以及此处提供的教程 - [http://www.mobile.safilsunny.com/integrating-facebook-ios-6/](http://www.mobile.safilsunny.com/integrating-facebook-ios-6/)

# apache - WebSVN 列出所有存储库。但不显示文件

> ID：14054137
> 
> 赞同：4
> 
> 时间：2012-12-27T11:44:36.953
> 
> 标签：apache, websvn

Apache 版本：Apache/2.2.15 (Unix) 操作系统：Fedora release 13 (Goddard)

加载 WebSVN 时，它显示了下面文件中配置的所有存储库，但是单击存储库名称时显示“Rev 0”，请参阅随附的屏幕截图。

```
 /var/www/html/websvn/include/config.php

<?php
$config->parentPath("/repos");
$config->addRepository('landfill', 'file:///repos/proj/landfill','Projects');
$config->setTemplatePath("$locwebsvnreal/templates/calm/");
$config->setMinDownloadLevel(2);
set_time_limit(0);
$config->expandTabsBy(8);
?> 
```

![但它在单击存储库名称时显示“Rev 0”](../Images/30a1455f52b7589df87d3b2934d4ca04.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:56:59.227

在 Menu sytem>Administration>SElinuxManagement Disabled Selinux 现在它工作正常！！

![在此处输入图像描述](../Images/ff54f10888ea6486543353681b383765.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:39:42.813

有几件事要尝试。

### 首先这是我的`config.php`：

```
$config->parentPath('/proj/lamolabs.org/scm/svn');
$config->addTemplatePath($locwebsvnreal.'/templates/calm/');
$config->useTreeIndex(true); // Tree index, open by default
$config->setShowLastModInListing(true);
$config->addInlineMimeType('text/plain');
$config->allowDownload();
$config->setMinDownloadLevel(2);
$config->useGeshi();
set_time_limit(0);
$config->expandTabsBy(2); 
```

### 其次，我`/etc/init.d/svnserve`为 svnserve 设置了自己的启动/停止脚本：

```
#!/bin/bash
# Control script for the Subversion daemon
#
# chkconfig: 2345 89 40
# description: Subversion daemon
#
# processname: svnserve

source /etc/rc.d/init.d/functions

[ -x /usr/bin/svnserve ] || exit 1

### Default variables
SYSCONFIG="/etc/sysconfig/subversion"

### Read configuration
[ -r "$SYSCONFIG" ] && source "$SYSCONFIG"

RETVAL=0
prog="svnserve"
desc="Subversion daemon"

start() {
  echo -n $"Starting $desc ($prog): "
  daemon $prog -d $OPTIONS
  RETVAL=$?
  [ $RETVAL -eq 0 ] && touch /var/lock/subsys/$prog
  echo
}

stop() {
  echo -n $"Shutting down $desc ($prog): "
  killproc $prog
  RETVAL=$?
  [ $RETVAL -eq 0 ] && success || failure
  echo
  [ $RETVAL -eq 0 ] && rm -f /var/lock/subsys/$prog
  return $RETVAL
}

case "$1" in
  start)
    start
    ;;
  stop)
    stop
    ;;
  restart)
    stop
    start
    RETVAL=$?
    ;;
  condrestart)
    [ -e /var/lock/subsys/$prog ] && restart
    RETVAL=$?
    ;;
  *)
    echo $"Usage: $0 {start|stop|restart|condrestart}"
    RETVAL=1
esac

exit $RETVAL 
```

### 第三，我设置了一个配置文件`/etc/sysconfig/subversion`，`svnserve`

```
# Configuration file for the Subversion service
#
# To pass additional options (for instace, -r root of directory to server) to
# the svnserve binary at startup, set OPTIONS here.
#
#OPTIONS=
OPTIONS="--threads --root /proj/lamolabs.org" 
```

我在我的[博客](http://www.lamolabs.org/blog/)上写了一篇题为：[Git and subversion setup on CentOS 5](http://www.lamolabs.org/blog/401/git-and-subversion-setup-on-centos-5/)的文章，讲述了我是如何设置它的。该帖子包含一些可能有用的附加信息。

让我知道你是怎么做到的，我很想知道你的设置是怎么回事。

**编辑#2**

`/etc/httpd/conf.d/subversion.conf`：

```
<VirtualHost *:80>
  UseCanonicalName Off
  ServerName websvn.lamolabs.org
  ServerAlias websvn.bubba.net
  DocumentRoot /var/www/websvn/current
  <Directory /var/www/websvn/current>
    Allow from all
  </Directory>
</VirtualHost> 
```

# javascript - 检查单击其他元素时是否单击了它

> ID：14054138
> 
> 赞同：1
> 
> 时间：2012-12-27T11:44:44.920
> 
> 标签：javascript, jquery, events

可以说我有`divB`里面`divA`。我有一个点击事件`divA`。
但是如何检查`divB`里面`divA`是否也被点击了？

jsFiddle - [http://jsfiddle.net/zwxK6/](http://jsfiddle.net/zwxK6/)

剧本 -

```
$('#divA').on('click', function() {
    //What to do here? how to check if divB inside divA is clicked also?
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T11:45:33.650

使用事件对象获取事件源，将事件对象传递给您要绑定的功能以进行点击，`event.target`将为您提供事件源。

**[现场演示](http://jsfiddle.net/rajaadil/zwxK6/1/)**

```
$('#divA').on('click', function(event) {
    alert(event.target.id);
    //Use event.target.id to check if divB inside divA is clicked also
});​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T11:54:14.267

试试这个：

```
$('#divA').on('click', function() {
    alert('divA is clicked');
});

$('#divB').on('click', function(e) {
    e.stopPropagation();
    alert('divB is clicked');
}); 
```

[在这里演示](http://jsfiddle.net/zwxK6/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T11:50:02.463

这将单击`divA`然后`divB`也被单击。

你可以这样找到：http: [//jsfiddle.net/zwxK6/4/](http://jsfiddle.net/zwxK6/4/)

```
function fireIt(id) {
    alert(id + " is clicked too.");
}
$(function() {
    $('#divA').on('click', function(e) {
       $(e.target.id).children('div').click(
          fireIt($(e.target).children('div').attr('id'))
       );
    });
}); 
```

# objective-c - 从目标c中的实例方法调用类方法

> ID：14054144
> 
> 赞同：0
> 
> 时间：2012-12-27T11:45:21.123
> 
> 标签：objective-c

从objective-C中的实例方法调用类方法的安全和正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:48:58.800

你可以这样做：

```
- (void)your_instanceMethodB
{

    [[self class] your_classMethodA];

} 
```

阅读： [**从该类中调用类方法**](https://stackoverflow.com/questions/7290156/call-a-class-method-from-within-that-class?answertab=active#tab-top) 。Jon Reid 和其他人回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:48:17.290

如果您正在使用子类并且您的子类覆盖了该方法，那么您应该这样做

```
 [[self class] myFunction]; 
```

如果不是，标准方法是正确的

```
[MyClass myFunction]; 
```

# google-chrome - Firefox中的CSS三角形问题

> ID：14054145
> 
> 赞同：4
> 
> 时间：2012-12-27T11:45:26.737
> 
> 标签：google-chrome, firefox, css

我需要使用 CSS 三角形来创建和箭头。这是我正在研究的：http: [//jsfiddle.net/7vRca/](http://jsfiddle.net/7vRca/)

```
<div class="arrow-outer"></div>

.arrow-outer{
border: 1em solid transparent;
border-top-color: #3bb0d7;
border-right-color: #3bb0d7;
height: 0;
width: 0; 
```

}

![在此处输入图像描述](../Images/6c6b941c1e73edfacb4997593e4c8af4.png)

问题是在 chrome 中它看起来很完美。但是在Firefox中，中间有一个小弯。

知道为什么会发生这种情况，我怎样才能让它看起来像 chrome 一样平滑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:08:32.023

不幸的是，我没有要测试的 mac，Windows 上的 Firefox 似乎可以正确呈现。你可以解决这个问题......

```
.arrow-outer {
  border: 2em solid transparent;
  border-right: 0;
  border-top-color: #3bb0d7;
  height: 0;
  width: 0;
} 
```

它不是将三角形渲染为边框的两侧，而是将右边框变平以仅使用顶部边框实现相同的形状，从而避免任何对齐问题（如下图所示）。

![边框直角三角形](../Images/4e5b0f95fa23effdf59830e3fc9ba5c8.png)

Mac OS 上的 Firefox 可能会将 div 渲染为像素高度，这可能会使用溢出隐藏来解决，但渲染算法中的舍入导致为边缘选择不同像素的可能性相同（如果不是更有可能）浏览器和操作系统组合的右边框。这将是我对它为什么发生的猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:21:37.257

为透明边框设置“插图”对我有帮助。我在这里找到了这个技巧：http: [//css-tricks.com/snippets/css/css-triangle/#comment-103785](http://css-tricks.com/snippets/css/css-triangle/#comment-103785)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-22T10:26:07.827

尝试将其添加到 css 中：

```
 -moz-transform: scale(.9999); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:04:32.150

尝试使用 RGB 而不是透明，

```
<div class="arrow-outer"></div>

.arrow-outer{
   border: 1em solid rgba(255,255,255,0);
   border-top-color: #3bb0d7;
   border-right-color: #3bb0d7;
   height: 0;
   width: 0;
} 
```

正如我们在这里所做的那样：[奇怪的深色边框：在 Firefox 中的 css 箭头之后](https://stackoverflow.com/questions/12956228/weird-dark-border-after-css-arrow-in-firefox)

* * *

编辑：顺便说一句，它在我的 Firefox 中以两种方式工作（一个有灰线，其他没有，但从来没有你描述的效果......）

# java - 在所有 Tomcat (GWT) servlet 中捕获所有未处理异常的最佳方法

> ID：14054146
> 
> 赞同：6
> 
> 时间：2012-12-27T11:45:27.307
> 
> 标签：java, gwt, tomcat, unhandled-exception

我对所有服务器日志使用 Tomcat 7 和 Lo4j，对客户端使用 GWT（仅 AJAX 调用）。我所有未处理的异常都会记录在我的 catalina.log 中。

现在我想捕获所有异常并添加一些用户特定的 Tomcat SessionData。

有几种方法：

*   尝试捕获所有 servlet（必须有更好的解决方案）。
*   [http://tomcat.apache.org/tomcat-7.0-doc/aio.html](http://tomcat.apache.org/tomcat-7.0-doc/aio.html)：我将不得不更改我的连接器，我不知道我是否可以在事件处理程序中使用 Tomcat 会话（EventType.ERROR） .
*   更好的方法？

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T11:44:59.937

根据我从您的问题中了解到的情况，您可以尝试至少使用以下两种方法中的一种：

## 基本日志记录 Servlet

如果您可以访问所有 servlet 的源代码，则可以使用一个基本的超级 servlet 进行一些重构，该超级 servlet 负责记录/任何使用 AJAX 透明工作的请求，没有错误转发指令，也没有全局异常处理程序。假设您使用`service(ServletRequest,ServletResponse)`servlet 入口点（但您也可以对每个`do*()`方法执行以下操作），那么您可以创建一个抽象的超级 servlet 并简单地从它继承您的 servlet。

```
<servlet>
    <servlet-name>servlet1</servlet-name>
    <servlet-class>stackoverflow.Servlet1</servlet-class>
</servlet>

<servlet>
    <servlet-name>servlet2</servlet-name>
    <servlet-class>stackoverflow.Servlet2</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>servlet1</servlet-name>
    <url-pattern>servlet1</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>servlet2</servlet-name>
    <url-pattern>servlet2</url-pattern>
</servlet-mapping> 
```

```
public abstract class BasicServlet extends HttpServlet {

    /**
     * Won't let it be {@code abstract} - we don't want to force any sub-servlet to implement this method.
     */
    protected void doService(ServletRequest request, ServletResponse response) {
    }

    @Override
    public final void service(ServletRequest request, ServletResponse response) {
        try {
            doService(request, response);
        } catch ( Throwable ex ) {
            err.println(ex.getMessage());
        }
    }

} 
```

```
public final class Servlet1 extends BasicServlet {

    @Override
    protected void doService(ServletRequest request, ServletResponse response) {
        out.println("I'm servlet #1");
    }

} 
```

```
public final class Servlet2 extends BasicServlet {

    @Override
    protected void doService(ServletRequest request, ServletResponse response) {
        out.println("I'm servlet #2");
    }

} 
```

这种方法的一个优点是除了更改 servlet 类并且不依赖于外部配置或上下文之外，您不需要配置任何其他内容。缺点是你总是必须扩展`BasicServlet`。

## 筛选

我现在没有实际测试它，有关更多信息，请参阅[http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)。过滤器允许拦截每个请求（我们在调试异常并将异常写入公共日志文件时为我们的 JSP 使用这样的过滤器实现）。缺点是不能保证过滤器可以覆盖所有异常/情况，例如，如果任何过滤器在您自己的过滤器之前。

```
<filter>
    <filter-name>exceptionLoggingFilter</filter-name>
    <filter-class>stackoverflow.ExceptionLoggingFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>exceptionLoggingFilter</filter-name>
    <url-pattern>*</url-pattern> <!-- we will process every request -->
</filter-mapping> 
```

```
public final class ExceptionLoggingFilter implements Filter {

    @Override
    public void init(FilterConfig filterConfig) {
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) {
        try {
            filterChain.doFilter(request, response);
        } catch ( Throwable ex ) {
            err.println(ex);
        }
    }

    @Override
    public void destroy() {
    }

} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T18:42:10.613

只需覆盖 GWT 函数 doUnexpectedFailure 即可。

```
@Override
protected void doUnexpectedFailure(Throwable t) {
  ServerLog.error(t.getMessage(), t);
  super.doUnexpectedFailure(t);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T13:59:19.640

1）您可以为您的 webapp 定义错误页面，如下所示：

```
<error-page>
        <exception-type>java.lang.Throwable</exception-type>
        <location>/error</location>
</error-page> 
```

然后你可以绑定另一个 servlet`/error`并在那里处理异常。

2）您可以[`setUncaughtExceptionHandler`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#setUncaughtExceptionHandler)为每个 HTTP 连接器线程。您可以将此技术与 servlet 过滤器一起使用，该过滤器将包含对当前的引用`HttpRequest`（例如，通过本地线程）。顺便说一句，这不适用于异步 I/O。

# java - Swing桌面java应用滚动

> ID：14054147
> 
> 赞同：-4
> 
> 时间：2012-12-27T11:45:27.547
> 
> 标签：java, swing, scroll

我是 Swing Java 应用程序的新手，我正在开发一个小型桌面应用程序，每次单击按钮都会在运行时创建 jlabels。

问题是当 jlabels 数量过多时，我需要在 jframe 中显示一个滚动，以使用户能够看到所有 jlabels（在 jframe 的高度之后创建的 jlabel）。

我尝试了 jscroll 窗格和 jscroll bar 但没有用，请提供一个完整的示例。

提前感谢您的努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:06:31.340

似乎对我有用，请发布[SSCCE](http://sscce.org)以显示具体问题，唯一想到的是您将您添加`JLabel`到容器而不是`JScrollPane`

![在此处输入图像描述](../Images/f6976751eab345c4a2d6e975b78ae8ee.png)

```
import java.awt.Dimension;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class JLabelJScrollPaneTest {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame() {
                    @Override
                    public Dimension getPreferredSize() {//size frame purposefully smaller
                        return new Dimension(100, 100);
                    }
                };
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                JLabel label = new JLabel("WWWWWWWWWoooooorrrrkkkk");
                JScrollPane jsp = new JScrollPane(label);

                frame.add(jsp);

                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

**更新**

我看你说：

> （在 jframe 的高度之后创建的 jlabel）。

所以我认为 JFrame 是可见的？如果是这样：

这是一个示例，它显示了如何在显示2 秒后添加`JLabel`到，最重要的是在添加/删除/更改组件大小后调用容器实例。`JScrollPane``JFrame``revalidate()``repaint()`

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class JLabelJScrollPaneTest {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                final JFrame frame = new JFrame() {
                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(100, 100);
                    }
                };
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                final JScrollPane jsp = new JScrollPane();
                frame.add(jsp);
                frame.pack();
                frame.setVisible(true);

               Timer t= new Timer(2000, new AbstractAction() {//create timer to add JLabel to scrollPane after 2 seconds
                    @Override
                    public void actionPerformed(ActionEvent ae) {
                        final JLabel label = new JLabel("WWWWWWWWWoooooorrrrkkkk");
                        jsp.setViewportView(label);
                        //refelect changes
                        frame.revalidate();
                        frame.repaint();
                    }
                });
                t.setRepeats(false);
                t.start();
            }
        });
    }
} 
```

**更新 2**

![在此处输入图像描述](../Images/6d864e90c78280dcd4d3572fc54877fc.png)

根据评论，它完全相同，只是稍作改动：

```
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class JLabelJScrollPaneTest {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                final JFrame frame = new JFrame() {
                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(100, 100);
                    }
                };
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                final JPanel labelPanel = new JPanel(new GridLayout(4, 1));

                final JScrollPane jsp = new JScrollPane(labelPanel);
                frame.add(jsp);
                frame.pack();
                frame.setVisible(true);

                Timer t = new Timer(2000, new AbstractAction() {//create timer to add JLabel to scrollPane after 2 seconds
                    @Override
                    public void actionPerformed(ActionEvent ae) {
                        final JLabel label = new JLabel("WWWWWWWWWoooooorrrrkkkk");
                        final JLabel label2 = new JLabel("Try it");
                        final JLabel label3 = new JLabel("Noooooo reealllly");
                        final JLabel label4 = new JLabel("Yes");
                        labelPanel.add(label);
                        labelPanel.add(label2);
                        labelPanel.add(label3);
                        labelPanel.add(label4);
                        labelPanel.revalidate();
                        labelPanel.repaint();
                    }
                });
                t.setRepeats(false);
                t.start();
            }
        });
    }
} 
```

# c - 在 eclipse juno 中使用 mingw 和 MPICH2 编译 MPI 程序

> ID：14054148
> 
> 赞同：0
> 
> 时间：2012-12-27T11:45:29.750
> 
> 标签：c, windows, eclipse, mpi, openmpi

我一直在尝试设置**mpich2**以在 Windows 7 上使用 MPI 编译一些程序。我遇到的问题是它在构建项目时**不会创建二进制文件。**我使用标准 mpi 程序进行测试（hello world），并在构建后收到此消息：

> 13:33:29 **** 重建项目 mpitest 的配置调试 **** 信息：内部生成器用于构建 mpiCC "-IC:\MPICH2\include"
> 
> ## -O0 -g3 -Wall -c -fmessage-length=0 -o "src\mpitest.o" "..\src\mpitest.c"
> 
> Open MPI 包装器编译器无法在您的 PATH 中找到指定的编译器 cl.exe。
> 
> 请注意，此编译器要么在配置时指定，要么在几个可能的环境变量之一中指定。
> 
> * * *
> 
> 13:33:29 构建完成（耗时 78 毫秒）

我试图搜索 cl.exe 但它不存在。我不得不说我也安装了openMPI，但我没有使用它，因为我要运行的程序的集群正在使用MPICH2。我已经安装了 32bit minGW、32bit MPICH2 和 32bit openMPI。因为我在集群中运行 .c 文件，所以不创建二进制文件是否正常？如果它正常，我将如何检查程序是否正常，即使是 1 个进程？提前致谢！干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T01:29:07.980

我很幸运地找到了答案...在项目首选项中，选择 C/C++ build-> Tool Chain editor-> 选择 cygwin 并完成。出于某种原因，我在该选项中有 mingw 并且不会创建二进制文件，我想它需要一些只能在 cygwin 而不是 mingw 中找到的其他工具......仍在尝试设置它并在集群上运行......这么多选项 ：/

# c++ - 如何使用CUDA c ++将向量乘以矩阵

> ID：14054153
> 
> 赞同：4
> 
> 时间：2012-12-27T11:45:47.430
> 
> 标签：c++, cuda

任何人都可以帮助我，我如何使用 CUDA c++ 将向量（1*N）和矩阵（N*M）相乘并将结果存储在新向量（1*M）上。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T13:13:40.123

我猜 StackOverflow 是提出问题和讨论解决方案的地方。虽然这个问题被很多人否决了，但我已经回答了这个问题。也许提问者需要对可用的解决方案进行一些讨论。这是用于大型的代码`M`：

```
#include <stdio.h>
#include <cuda.h>
#include <time.h>

__global__
void kernel(float *vec, float *mat, float *out, const int N, const int M){
    int tid=threadIdx.x+blockIdx.x*blockDim.x;
        float sum=0;
    if(tid<M){
        for(int i=0; i<N; i++)
            sum += vec[i]*mat[(i*M)+tid];
        out[tid]=sum;
    }
}

// debuging functions
void init_array(float *a, const int N);
void init_mat(float *a, const int N, const int M);
void print_array(float *a, const int N, char *d);
void print_mat(float *a, const int N, const int M, char *d);

int main (void) {
        srand( time(NULL) );

    float *a, *b, *c;
        float *dev_a, *dev_b, *dev_c;

    int N=3;
    int M=4;
    a=(float*)malloc(sizeof(float)*N);
    b=(float*)malloc(sizeof(float)*N*M);
    c=(float*)malloc(sizeof(float)*M);
        init_array(a, N);
        init_mat(b, N, M);
        init_array(c, M);

    printf("<<<<<<<<<< initial data:\n");
        print_array(a, N, "in-vector");
        print_mat(b, N, M, "matrix");
        print_array(c, M, "out-vector");

        cudaMalloc((void**)&dev_a, sizeof(float)*N);
        cudaMalloc((void**)&dev_b, sizeof(float)*N*M);
        cudaMalloc((void**)&dev_c, sizeof(float)*M);

        cudaMemcpy(dev_a, a, sizeof(float)*N, cudaMemcpyHostToDevice);
        cudaMemcpy(dev_b, b, sizeof(float)*N*M, cudaMemcpyHostToDevice);

    printf("\n\nRunning Kernel...\n\n");
        kernel<<<M/256+1, 256>>>(dev_a, dev_b, dev_c, N, M);
        //printf("error code: %s\n",cudaGetErrorString(cudaGetLastError()));

        cudaMemcpy(c, dev_c, sizeof(float)*M, cudaMemcpyDeviceToHost);

        cudaFree(dev_a);
        cudaFree(dev_b);
        cudaFree(dev_c);

    printf(">>>>>>>>>> final data:\n");
        print_array(c, M, "out-vector");

        return 0;
};

void init_array(float *a, const int N) {
        int i;
        for(i=0; i<N; i++)
                a[i] = rand() % 4 + 1;
}
void init_mat(float *a, const int N, const int M) {
        int i, j;
        for(i=0; i<N; i++)
            for(j=0; j<M; j++)
                    a[i*M+j] = rand() % 4 + 1;
}
void print_array(float *a, const int N, char *d) {
        int i;
        for(i=0; i<N; i++)
                printf("\n%s[%d]: %f",d, i, a[i]);
    printf("\n");
}
void print_mat(float *a, const int N, const int M, char *d) {
        int i, j;
        for(i=0; i<N; i++){
        printf("\n%s[%d]:", d, i);
        for (j=0; j<M; j++)
                    printf("\t%6.4f", a[i*M+j]);
    }
    printf("\n");
} 
```

它需要稍作修改以适应大型`N`.

# windows - 批处理文件 - 使用批处理脚本在文件夹中查找 Microsoft Visual C++ 2008 Redistributable Setup

> ID：14054156
> 
> 赞同：1
> 
> 时间：2012-12-27T11:45:57.807
> 
> 标签：windows, batch-file, batch-processing, cmd

如何签入我当前的文件夹：

```
Microsoft Visual C++ 2008 Redistributable setup exists using a batch script , 
```

由于它是一个 .exe 文件，我想我需要做一些事情才能阅读文件描述。

我可以将文件夹中存在的可用文件列表解析为：

```
 for /r %%i in (*) do echo %%i 
```

文件名是

```
 vcredist_x86_2008 
```

有人可以这样做吗

```
 Microsoft_VC90_CRT_x86 
```

这是一个 .msm 文件

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:02:02.147

怎么样：

```
dir *Redistributable*.exe
if ERRORLEVEL 1 echo Error 
```

基本上，您发出 dir 命令，然后使用 ERRORLEVEL 检查状态（即 dir 是否找到某些东西）。如果 dir 成功，则 ERRORLEVEL 将具有 0 值。

# ruby-on-rails - 在 Ruby on Rails 3 中压缩资产

> ID：14054158
> 
> 赞同：5
> 
> 时间：2012-12-27T11:46:16.863
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets, yui-compressor

我在 production.rb 中有以下配置

```
 # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Choose the compressors to use
  config.assets.js_compressor  = :uglifier
  config.assets.css_compressor = :yui

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true

  # Generate digests for assets URLs.
  config.assets.digest = true 
```

但是当生产服务器上的 ruby​​ on rails 应用程序出现以下错误时：

```
Error compiling CSS asset

LoadError: cannot load such file -- yui-compressor 
```

在评论线上`LoadError: cannot load such file -- yui-compressor`，一切顺利。
我只需要一个压缩器，它可以在发送之前压缩资产以提高性能！
那么，这里有什么问题，或者还有其他选择吗？

**更新：**
javascript压缩也不起作用，因为firefox的yslow插件也显示需要压缩javascripts。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T11:54:08.103

您是否在 Gemfile 中包含了[yui-compressor gem？](http://rubygems.org/gems/yui-compressor)如果没有，则包含它，运行 'bundle install'，然后 Rails 应该能够找到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T07:16:50.617

我发现**必须在网络服务器上启用压缩才能**生效。
所需要的只是添加以下内容：

```
AddOutputFilterByType DEFLATE text/html text/css application/x-javascript application/javascript 
```

在`<VirtualHost *:80></VirtualHost>`我的案例中针对 Apache（phusion 乘客）的指令。

# ruby-on-rails - Rails：simple_form：从复选框集合中获取空字符串

> ID：14054164
> 
> 赞同：24
> 
> 时间：2012-12-27T11:46:43.017
> 
> 标签：ruby-on-rails, simple-form

我的视图中有以下代码

`<%= f.input :role_names, as: :check_boxes, collection: @program.role_names %>`

每当我提交表单时，我都会得到类似的值，`["admin, "moderator", ""]`但我期待的是类似的值`["admin, "moderator"]`，这是为什么呢？

此外，我制作了一个检查元素，`<input name="user[role_names][]" type="hidden" value="">`在同一个控制组中的最后一个复选框之后有一个标签。我想这是在最后添加的`params[:user][:recipient_role_names]`。

我该如何处理？我知道我可以做，`reject(&:blank?)`但是有更清洁的方法`params[:user][:recipient_role_names]`吗？我还想知道为什么要添加输入元素？它是简单形式的错误还是我做错了什么？

其他信息：

1.  simple_form gem 版本：2.0.4
2.  导轨版本：3.2.8

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-27T11:53:17.110

这是 Rails 的一个特性。您将可以在 Rails 4 中禁用它。您可以在[简单表单问题 #603](https://github.com/plataformatec/simple_form/issues/603)和[Rails 问题 #5402上阅读更多相关信息](https://github.com/rails/rails/issues/5402)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-27T00:38:31.707

只需添加`include_hidden: false`到您的输入参数：

```
<%= f.input :role_names, 
  as: :check_boxes, 
  collection: @program.role_names, 
  include_hidden: false 
%> 
```

并且空字符串值不会在数组中发送。

* * *

Obs：我刚刚在此处添加了 simple_form 输入代码以供快速参考，因为 Vasily 的回答为我指明了正确的方向。谢谢

# ios - Explicitly add @2x to non retina devices

> ID：14054172
> 
> 赞同：3
> 
> 时间：2012-12-27T11:47:12.370
> 
> 标签：ios, retina-display

We have a mystery !

In our app we use only retina images (@2x marked). Until yesterday non-retina devices showed the images well even when we called the images without @2x at the end.

For example if the file name is 'fun@2x.png' we called `[UIImage imageWithName:@"fun"]`.

Today it stopped working and now we have to call `[UIImage imageWithName:@"fun@2x"]` for the image to display. (The device is iPhone 3GS iOS 5.1).

We are now afraid that we don't understand something about the retina naming.

What changed ? What is the correct way to deal with it?

Thanks

Shani

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T15:14:52.573

You should provide non-retina images! The downscaling isn't a good option. The problem here is that iOS tries to find the fun.png image and doesn't find it. Therefore can't present something.

I have no explanation why it worked before. Are you sure?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T15:20:59.187

In apps I have worked on if I am only supplying 1 image (the 2x one) than I just use the full image name, ie:

```
[UIImage imageWithName:@"my-image.png"] 
```

When I am supplying images for certain buttons that I need have 2 versions of, I use:

```
[UIImage imageWithName:@"my-image"] 
```

Doing it this second way, you **must** supply a retina & non-retina image with that base name

Like [dasdom](https://stackoverflow.com/a/14056867/480415) said it should have not been working before that way-- and even if it somehow was you should stick to what I said above if you want your images to always display.

# wordpress - Wordpress the_content() 验证错误

> ID：14054175
> 
> 赞同：0
> 
> 时间：2012-12-27T11:47:38.227
> 
> 标签：wordpress, validation

要在 wordpess 中显示内容，我使用`<p><?php the_content();?></p>`，但出现验证错误：

```
 Line 94, Column 3: document type does not allow element "p" here; missing one of "object", "applet", "map", "iframe", "button", "ins", "del" start-tag
<p>For companies that are willing to minimize their accounting costs or jus bar… 
```

如果我改成`p`我`span`得到同样的错误，也许有人知道任何解决方案来解决这个问题，验证错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:52:57.480

the_content() 里面已经有 p 个元素，所以没有必要把它包装在 p 中。

我建议将其包装在一个 div 中。

# javascript - 如何从 Javascript 调用简单的 Objective-C 函数

> ID：14054178
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:47:41.750
> 
> 标签：javascript, objective-c

> **可能重复：**
> [如何在 Cocoa/WebKit 应用程序中从 Javascript 调用 Objective-C 方法？](https://stackoverflow.com/questions/92471/how-to-call-an-objective-c-method-from-javascript-in-a-cocoa-webkit-app)

如何从 Javascript 调用简单的 Objective-C 函数。说我有一个功能：

> -(void) callFromJavascript {
> // 如何从 Javascript 函数调用 Objective-C 的这个方法。

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:50:24.960

一种机制是拦截`document.location`更改（并取消它们）并在请求的更改`document.location`与您预定义的 URL 匹配时调用您的方法。

然后，您只需从 JS 更改`document.location`为该预定义 URL。

要拦截更改覆盖：

```
- (BOOL)webView:(UIWebView *)_webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; 
```

`request`并在与您在 JS 中设置的内容匹配时返回 NO为`document.location`.

# php - 如何在主键上添加字段/参数？

> ID：14054179
> 
> 赞同：0
> 
> 时间：2012-12-27T11:47:56.987
> 
> 标签：php, sql, symfony, doctrine-orm

我使用 Symfony2.0 和 Doctrine，我创建了这个实体：

```
class MetaInformationsQuestionUser
{
  /**
   * @ORM\Id
   * @ORM\ManyToOne(targetEntity="Myproject\Bundle\UserBundle\Entity\User")
   */
  private $user;

  /**
   * @ORM\Id
   * @ORM\ManyToOne(targetEntity="Myproject\Bundle\QuestionsBundle\Entity\MetaInformationsQuestion")
   */
  private $metainformationsquestion;

  /**
   * @var datetime $created
   *
   * @Gedmo\Timestampable(on="create")
   * @ORM\Column(type="datetime")
   */
  private $created;

  /**
   * @var datetime $updated
   *
   * @Gedmo\Timestampable(on="update")
   * @ORM\Column(type="datetime")
   */
  private $updated;

  /**
   * @var array $score
   *
   * @ORM\Column(name="score", type="array", nullable="true")
   */
  private $score; 
```

因此，该实体是与属性的多对多关系的链接。（在这种情况下，得分和创建和更新日期）。

我的想法是添加每个用户玩的每个问题的记录，以及他获得的分数。

我的问题是我收到此错误：

> SQLSTATE [23000]：违反完整性约束：1062 键 'PRIMARY' 的重复条目 '1-3'

所以我的问题是：我怎样才能将创建日期添加到主键，或者只是删除在此上有一个主键的事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:07:04.680

好，我知道了，

我需要补充：

```
 * @ORM\Id 
```

在我创建的字段中：

```
 /**
   * @var datetime $created
   *
   * @ORM\Id
   * @Gedmo\Timestampable(on="create")
   * @ORM\Column(type="datetime")
   */
  private $created; 
```

它做了我想要的！

以下是文档： [https ://doctrine-orm.readthedocs.org/en/latest/reference/annotations-reference.html#annref-id](https://doctrine-orm.readthedocs.org/en/latest/reference/annotations-reference.html#annref-id)

# scheme - Scheme中的SRFI参考实现？

> ID：14054181
> 
> 赞同：1
> 
> 时间：2012-12-27T11:48:19.237
> 
> 标签：scheme

我有兴趣扩大对 Scheme 的理解，并且遇到了[SRFI 1](http://srfi.schemers.org/srfi-1/srfi-1.html)。我看到提到了一个参考实现，但我在任何地方都找不到它。

是否有这样的实现，用 Scheme 的一些变体编写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:48:38.383

SRFI 1 的参考实现链接到文档的“参考和链接”部分：[http ://srfi.schemers.org/srfi-1/srfi-1-reference.scm](http://srfi.schemers.org/srfi-1/srfi-1-reference.scm)

每个 SRFI 都有自己的参考实现，通常由 SRFI 的作者编写。有些可以跨多个 Scheme 实现工作，但偶尔有一些参考实现只适用于一两个 Scheme 实现，您可能需要移植。

# mysql - 删除 MySQL 中的前缀

> ID：14054185
> 
> 赞同：1
> 
> 时间：2012-12-27T11:48:39.663
> 
> 标签：mysql, vb.net, prefix

起初我有这个代码添加前缀：

```
Dim sSQL As String
sSQL = ("UPDATE `" + cboJob.Text + "` SET `Line Number` = CONCAT('a',`Line Number`) WHERE `Line Number` LIKE '%-%'")
MyDB.ExecQuery(sSQL, "wellsfargo") 
```

现在我的问题是如何删除我之前添加的前缀“a”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T11:59:12.493

```
 UPDATE your_table
 SET `Line Number` = substring(`Line Number`, 2)
 WHERE `Line Number` LIKE 'a%-%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:51:07.553

我想你想要这个：

```
Dim sSQL As String
sSQL = ("UPDATE `" + cboJob.Text + "` SET `Line Number` = `Line Number` WHERE `Line Number` LIKE '%-%'")
MyDB.ExecQuery(sSQL, "wellsfargo") 
```

我已经删除了以“a”为前缀的 CONCAT 到行号

# iphone - 使用 lineBreakMode 获取 UILabel 的文本

> ID：14054186
> 
> 赞同：2
> 
> 时间：2012-12-27T11:48:40.070
> 
> 标签：iphone, nsstring, uilabel

我想在 Nib 文件中获取接收 lineBreakMode 和 numberOflines 的 UILabel 的可见文本。或文本的 NSarray（可见和不可见），每一行都是标签中的行。

有人能帮我吗？谢谢..

编辑：

在 xcode 中我有 UILablel，我在 nib 文件中创建标签。在 UILabel 属性中，我确定了行数以及 LineBreakMode。

示例：在电话簿中有 1 行号码，我的名字很长，所以我只看到名字的开头后面有 3 个点（如果电话簿中的名字长于标签的框架）我想这是 LineBreakMode:trunk 属性。名字是：丽贝卡。所以我们会看到Reb...

如果是 LineBreakMode:wrap 则 3 个点不会出现，但我们会从名称中看到更少，等等。

我需要知道什么是可见文本。如果文本是 Rebecca，但在屏幕上我看到 Reb... 所以我只需要 Reb...，而不需要 Rebecca。如果它不是截断，那么我需要没有 3 个点的 Reb，等等。

根据 LineBreakMode 属性和行数，我只需要知道屏幕上的可见文本。

希望现在更清楚..

# javascript - 怎么能访问一堆 ?

> ID：14054187
> 
> 赞同：1
> 
> 时间：2012-12-27T11:48:41.003
> 
> 标签：javascript

我有一个文本列表，我想更改它们的 innerHTML。如果我有数千个 li 标签（其数据来自数据库），我该如何通过 javascript 做到这一点？

```
<div>
<ul>
<li>a</li>
<li>as</li>
<li>asd</li>
<li>asds</li>
<li>asdsa</li>
<li>asdsad</li>
<li>asdsadz</li>
<li>asdsadzc</li>
....
.....
</ul>
</div> 
```

-谢谢。

**更新** 正在使用的 JS 代码：

```
function a(){
    var parent = document.getElementById("z");
    var i = 0;
    for(i = 0; i <= parent.children.length; i++){
        if(parent.children[i].tagName == "LI"){
            if(i%2!=0){
                parent.children[i].innerHTML="ok";
            }
        }
    }
}
document.onload=a(); // this didn't work. so I called the function in body tag instead of that.
<body onload="a();"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T11:51:16.140

你试过使用`getElementsByTagName`吗？像它这样的 Sonds 会帮助你找到你正在尝试使用的元素。

**编辑**

如果您可以为包含您要处理的 li 的 UL 元素提供 Id，则可以执行以下操作：

```
var parent = document.getElementById("yourID");
var i = 0;
for(i = 0; i < parent.children.length; i++){ 
  if(parent.children[i].tagName == "LI") { 
     //do what you want...
   }
} 
```

**编辑 2**

您必须更改脚本的最后一行：

```
document.onload=a(); 
```

有了这个：`window.onload=a;`

这将使您的函数在 onLoad 事件上执行。请注意，可能存在一些跨浏览器不兼容，我建议研究一下如何以跨浏览器方式在 onload 事件上执行函数，或者只是将其添加到您的 body 标签中：

```
<body onload="a();"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:51:11.387

鉴于您希望使用 jQuery 的 - 不是那么遥不可及的 - 前提条件，您可以选择它们并使用“每个”迭代它们。

```
$("li").each( 
function() { $(this).html("changed content"); }
); 
```

如果你不使用 jQuery，那么使用 js 库来帮助你处理古怪的 dom 可能不是一个坏主意......

总体思路

1.  选择节点
2.  迭代和更改 html

总是一样的。

# variables - 在 beanshell 脚本之间共享变量

> ID：14054189
> 
> 赞同：1
> 
> 时间：2012-12-27T11:48:43.090
> 
> 标签：variables, shared, beanshell

我想在 1 个特定的 beanshell 脚本中进行某种初始化，稍后在其他 2 个 bsh 脚本中使用它。现在，初始化因此发生了两次。

有没有办法在 beanshell 脚本之间共享变量/命名空间，以便初始化只发生一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:52:14.407

您可以创建一个执行初始化的 BeanShell 脚本并通过[source](http://www.beanshell.org/manual/bshcommands.html#source)将其加载到您的其他脚本中吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:13:37.107

查看对象“bsh.shared”。

```
if(bsh.shared.myList == void)
  bsh.shared.myList = new java.util.ArrayList();

// Do stuff to the List anywhere as follows:
//
bsh.shared.myList.add("foo"); 
```

# html - CSS背景属性

> ID：14054192
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:48:48.180
> 
> 标签：html, css

当您在 facebook 中单击图像时，会弹出一个框，但其余的整个背景都会被黑色透明层覆盖。那是什么效果？可以使用 css 应用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:55:27.470

你可以使用这个插件：

//www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:55:44.487

它当然可以使用 css 应用：

这是黑色覆盖的CSS：

```
.overlay{
    background-color: black;
    z-index:1001;
    -moz-opacity: 0.8;
    opacity:.80;
    filter: alpha(opacity=80);
} 
```

z-index 表示叠加层位于所有其他元素之上，应位于叠加层顶部的元素（Facebook 上的图像框架）必须具有值 1002 或更大的 z-index。

-moz-opacity 是使用 firefox 的覆盖的不透明度，使用 chrome、safari 的覆盖的不透明度......过滤器是使用 IE 的覆盖。

我创建了一个有类似问题的项目，我创建了一个带有最初隐藏的类覆盖的 div，当单击按钮时，可见性设置为可见。我在 div 叠加层（z-index 1002）上放置了一个 iFrame。

这是我的叠加层的 CSS：

```
.black_overlay{
    display: none;
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    background-color: black;
    z-index:1001;
    -moz-opacity: 0.8;
    opacity:.80;
    filter: alpha(opacity=80);
}

.white_content {
    display: none;
    position: absolute;
    top: 15%;
    left: 15%;
    width: 70%;
    height: 70%;
    padding: 0px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border: 6px solid #E1143C;
    background-color: rgba(228,208,150,1);
    z-index:1002;
    overflow: auto;
} 
```

并遵循 jQuery：

```
function showForm() {
    $(".black_overlay").show(200);
    $(".white_content").show(500);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:56:05.497

是的。这种效果只能使用 css 来完成。

如果您有任何**id**或**class**应用于该元素。然后这样做 -

```
#transparentLayer {
   opacity:0.5; //for non-IE
   color:#000;
   filter: alpha(opacity=50); // for IE
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T11:54:22.147

```
<a href="#">Open FancyBox</a>
<div class="fancybox">
<div class="content">
    <div class="close">x</div>
</div>
</div>​ 
```

和 jQuery：

```
$(".fancybox").hide();
$("a").click( function() {
$(".fancybox").show();
});
$(".close").click( function() {
$(".fancybox").hide();
}); 
```

CSS：

```
.fancybox {
background-color:rgb(0,0,0);
background-color:rgba(0,0,0, 0.7);
width:100%;
height:100%;
position:absolute;
top:0;
left:0;
}
.content {
    width:600px;
    background:#fff;
    margin:0 auto;
    height:100%;
    position:relative;
}
.close {
    position:absolute;
    font-size:22px;
    top:2px;
    right:15px;
    font-family:Arial;
}
.close:hover {
    cursor:pointer;
}​ 
```

​</p>

[http://jsfiddle.net/YnQbY/1/](http://jsfiddle.net/YnQbY/1/)

# python - 使用注释来改进 PyDev 中的代码分析功能，例如 ZendStudio

> ID：14054193
> 
> 赞同：0
> 
> 时间：2012-12-27T11:48:51.717
> 
> 标签：python, pydev, zend-studio

在 Zend Studio 中，我可以使用

```
/**
@return CUser
 */
function getUser() {
} 
```

告诉IDE，getUser函数的返回值类型是CUser。

但我不能在 pydev 中做同样的事情，我想知道如何做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:45:27.100

PyDev 确实有预定义的完成模块。它看起来不像 ZendStudio 那样好用，但它与您正在寻找的功能相似。

看看这里： http: [//pydev.org/manual_101_interpreter.html#PyDevInterpreterConfiguration-PredefinedCompletions](http://pydev.org/manual_101_interpreter.html#PyDevInterpreterConfiguration-PredefinedCompletions)

你基本上定义了一个模块，它就像你的模块的接口/文档。

# java - 如何获取 OnClickListener 的线性布局中包含的 textview 的名称？

> ID：14054197
> 
> 赞同：2
> 
> 时间：2012-12-27T11:49:11.670
> 
> 标签：java, android, android-linearlayout, onclicklistener

我正在将文本视图动态添加到线性布局中，并希望获取在线性布局的 OnClickListener 中单击的文本视图的名称。这是代码：

```
m_lvSideIndex = (LinearLayout)ShowTheContacts1.this.findViewById(R.id.sideIndex);
TextView l_tempText = null;

for(int l_a = 0;l_a < m_arrayOfAlphabets.length;l_a++)
{
    l_tempText = new TextView(ShowTheContacts1.this);
    l_tempText.setGravity(Gravity.CENTER);
    l_tempText.setTextSize(15);
    l_tempText.setTextColor(getResources().getColor(R.color.black));
    LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1);
    l_tempText.setLayoutParams(params);;
    l_tempText.setText(m_arrayOfAlphabets[l_a]);
    m_lvSideIndex.addView(l_tempText);
    m_lvSideIndex.setTag(l_a);
}

m_lvSideIndex.setOnClickListener(new OnClickListener() 
{               
    @Override
    public void onClick(View v) 
    {
        String l_itemSelected = (String)v.toString();  //Want to get the name of textview selected here
}); 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:52:07.603

将单击侦听器添加到每个文本视图，然后您将在 onClick 中将视图作为参数接收。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:55:33.987

你可以在 getTag() 的帮助下完成

首先 setTag() 的值，即 TextName

```
m_lvSideIndex.setTag(m_arrayOfAlphabets[l_a]);
m_lvSideIndex.setTag(l_a, R.id.sideIndex); 
```

并通过 getTag() 获取值

```
m_lvSideIndex.setOnClickListener(new OnClickListener() 
{               
    @Override
    public void onClick(View v) 
    {
        String l_itemSelected = (String)v.getTag(); 
        Integer l_position = (Integer)v.getTag(R.id.sideIndex);   
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T11:57:36.057

OnClickListener 适用于 TextView。确保将 TextView 的 Clickable 属性设置为 true。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T11:59:08.747

((TextView)v.findviewbyTag(R.id.label)).getText();

我希望这项工作

# javascript - TypeScript Intellisense 和 jQuery 问题

> ID：14054199
> 
> 赞同：1
> 
> 时间：2012-12-27T11:49:17.993
> 
> 标签：javascript, jquery, intellisense, typescript

我正在使用 VS 2012 和带有 jquery 的 TypeScript。我正在将现有的 JS 应用程序转换为 TS，但遇到以下问题：

```
$(window).load(function () {
//stuff
}); 
```

$(window).load 带有下划线，错误是“提供的参数与调用目标的任何签名都不匹配”。我正在使用带有此[jquery.d.ts](http://typescript.codeplex.com/SourceControl/changeset/view/d397c54a55db#samples/jquery/jquery.d.ts) jquery ts 注释的 jquery 1.7.2。我在文件顶部添加了参考链接。

我究竟做错了什么 ？

编辑：我当然在 VS 中安装了打字稿，它不会改变任何东西来编辑参数，它可以是“窗口”或其他任何东西，它一直在出错。它期望的 load() 的定义是 (url:string, data: any, complete: any) 而在 jQuery doc 中它只是一个函数..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:53:44.500

Typescript 定义仅包含 1 个特定版本的加载函数的定义，即从 URL [http://api.jquery.com/load/加载 html 的定义](http://api.jquery.com/load/)加载 html 的定义。Typescript 仍处于 alpha 阶段，不要忘记。

这不应该影响您对 Typescript 的使用，除非您将继续收到警告。

作为替代方案，您可以将代码更改为以下内容：

```
$(window).on("load", function() {
    /// so stuff
}); 
```

# image-processing - 转换为灰度并减小尺寸

> ID：14054200
> 
> 赞同：0
> 
> 时间：2012-12-27T11:49:19.693
> 
> 标签：image-processing, vb6, bmp, grayscale

我正在尝试在 VB6 中开发 OCR，但 BMP 格式存在一些问题。我一直在研究 OCR 过程，第一步是使用阈值将图像转换为“黑白”。转换过程很容易理解，我已经做到了。但是，我试图减小生成图像的大小，因为它使用较少的颜色（每个像素只有 256 个可能的灰度值）。在原始图像中，我有 3 种颜色（红色、绿色和蓝色），但现在我只需要一种颜色（灰度值）。在这一刻，我已经实现了转换，但生成的灰度图像与原始彩色图像具有相同的大小（我在三个通道中分配了相同的颜色值）。

我试图修改 BMP 文件的标题，但我没有取得任何成果，现在我不明白它是如何工作的。例如，如果我使用绘画转换图像，则标题中指定的偏移量会更改其值。如果标头是恒定的，为什么偏移量会改变它的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:06:22.743

问题是灰度位图图像与彩色位图图像大小相同，因为用于保存灰色颜色的数据与颜色占用的空间一样多。

唯一的区别是灰色只是相同值的 3 倍。`(160,160,160)`例如，颜色给出类似`(123,200,60)`. 灰度值只是 RGB 字段的一小部分。

例如，通过将其从 24 位转换为 16 位或 8 位，您可以在转换为灰度后缩小尺寸。尽管这取决于您用于进行转换的内容是否已经提供给您。否则你必须自己做。

您也可以尝试使用 BMP 图像以外的其他东西。PNG 文件也是无损的，使用 24 位版本甚至可以节省空间。图像处理库通常为您提供多种输出格式选项。否则，您可能会找到一个为您执行此操作的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:25:47.547

您可以使用“lockbits”方法编写自己的转换。理解如何正确锁定/解锁位需要一段时间，但付出的努力是值得的，一旦你的代码工作了，你就会看到它如何应用于其他场景。例如，使用锁定/解锁位技术，您可以从位图中访问像素值，将这些像素值复制到数组中，操作数组，然后将修改后的数组复制回位图中。这比调用 GetPixel() 和 SetPixel() 快得多。这仍然不是可以编写的最快的图像处理代码，但它相对容易实现和维护代码。

我已经有一段时间没有编写 VB6 代码了，但是 Bob Powell 经常有很好的例子，他有一个关于锁位的页面：

[https://web.archive.org/web/20121203144033/http://www.bobpowell.net/lockingbits.htm](https://web.archive.org/web/20121203144033/http://www.bobpowell.net/lockingbits.htm)

在紧要关头，您可以创建一个适当格式的新位图并为每个像素调用 SetPixel()：

1.  24 位彩色图像中的每个像素 (x,y) 都有一个颜色值 (r,g,b)
2.  转换为 24 位灰度图像后，每个像素 (x,y) 对于每个颜色通道将具有三个相等的值；正如威廉在他的回复中所写的那样，这可以表示为 (n,n,n)。如果所有三种颜色 R、G、B 具有相同的值，那么您可以说颜色值是该像素的“灰度”值。这与您将在最终 8 位位图中看到的灰色阴影相同。
3.  为新创建的 8 位位图中的每个像素 (x,y) 调用 SetPixel，该位图中的宽度和高度与原始彩色图像相同。

# c# - 将简单的 int 更改为可以通过引用传递给 Lua 脚本的对象

> ID：14054201
> 
> 赞同：0
> 
> 时间：2012-12-27T11:49:24.790
> 
> 标签：c#, lua, runtime

我正在开发一个控制游戏角色的程序。我希望我的用户能够在我的游戏程序中编写 Lua 脚本。

我的程序中有一个`int`变量 ,`int SelfManaPc`以这种方式传递给脚本编写器：`lua_compiler["SelfManaPc"] = SelfManaPc;`.

这个变量在我的主程序中的不同线程中被快速更改。我的问题是，它只将值传递给 Lua 脚本，而不是指针。在 C# 程序中更改值后，在 Lua 脚本中它不再更改。

我已经制定了我的解决方案，它工作得很好（`SelfManaPc`现在是我自己的类的对象，`Integer`所以我可以传递指针而不是值）。

C#类：

```
 public class Integer
    {
        int value;
        public Integer(int xd) { value = xd; }

        public void Set(int xd) {value = xd;}
        public int Get() { return value; }        
    } 
```

Lua代码中的使用示例：

```
while true do
    Say(SelfManaPc:Get())
    Sleep(2000);
end 
```

如果没有别的办法，我就这样放着。但是，我想先向你们中的任何人询问其他想法。访问它有点愚蠢`int`，`Get`所以`Set`你们中的一些人可能知道一些不错的技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:01:02.407

如果您的脚本中有多个这样的变量，您可以考虑将它们放在一个全局表中，例如命名`options`。然后向该表添加一个*元*表：`__index`元方法返回给定名称的变量的值，元方法为给定名称的变量`__newindex`设置一个新值。

如何实现这取决于您用于 C# 的绑定库。

Lua代码中的使用示例：

```
while true do
    Say(options.SelfManaPc)
    Sleep(2000)
    options.SelfManaPc = 1000 -- sets new value
    Sleep(500)
end 
```

# xml - 使用 awk 命令提取 xml 标记值

> ID：14054203
> 
> 赞同：10
> 
> 时间：2012-12-27T11:49:25.857
> 
> 标签：xml, shell, unix, awk, aix

我有一个如下所示的 xml

```
<root>    
<FIToFICstmrDrctDbt>
            <GrpHdr>
                <MsgId>A</MsgId>
                <CreDtTm>2001-12-17T09:30:47</CreDtTm>
                <NbOfTxs>0</NbOfTxs>
                <TtlIntrBkSttlmAmt Ccy="EUR">0.0</TtlIntrBkSttlmAmt>
                <IntrBkSttlmDt>1967-08-13</IntrBkSttlmDt>
                <SttlmInf>
                    <SttlmMtd>CLRG</SttlmMtd>
                    <ClrSys>
                        <Prtry>xx</Prtry>
                    </ClrSys>
                </SttlmInf>
                <InstgAgt>
                    <FinInstnId>
                        <BIC>AAAAAAAAAAA</BIC>
                    </FinInstnId>
                </InstgAgt>
            </GrpHdr>
    </FIToFICstmrDrctDbt>
</root> 
```

我需要使用 awk 命令在单独的变量中提取每个标签值的值。怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-27T12:08:51.283

您可以使用`awk`如下所示，但是，这不是一个强大的解决方案，如果 xml 格式不正确，例如如果同一行上有多个元素，则会失败。

```
$ dt=$(awk -F '[<>]' '/IntrBkSttlmDt/{print $3}' file)
$ echo $dt
1967-08-13 
```

我建议您使用适当的 xml 处理工具，例如[`xmllint`](http://xmlsoft.org/xmllint.html).

```
$ dt=$(xmllint --shell file <<< "cat //IntrBkSttlmDt/text()" | grep -v "^/ >")
$ echo $dt
1967-08-13 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-19T01:49:17.013

以下 gawk 命令使用记录分隔符正则表达式模式来匹配 XML 标记。任何以 < 后跟至少一个 non-> 并以 > 结尾的内容都被认为是标签。Gawk 将每个 RS 匹配分配给 RT 变量。标签之间的任何内容都将被解析为 gawk 分配给 $0 的记录文本。

```
gawk 'BEGIN { RS="<[^>]+>" } { print RT, $0 }' myfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:54:01.543

下面的代码将所有标签值存储在一个数组中！希望这会有所帮助。但我仍然相信这不是一个最佳的方法。

```
> perl -lne 'if(/>[^<]*</){$_=~m/>([^<]*)</;push(@a,$1)}if(eof){foreach(@a){print $_}}' temp
A
2001-12-17T09:30:47
0
0.0
1967-08-13
CLRG
xx
AAAAAAAAAAA 
```

# javascript - 从另一个弹出窗口打开一个弹出窗口

> ID：14054205
> 
> 赞同：3
> 
> 时间：2012-12-27T11:49:36.467
> 
> 标签：javascript, jquery, css, jquery-mobile, popup

我的网站是用 HTML5、CSS3 和 Jquery-moblie 构建的。

我使用 Jquery-mobile 的弹出窗口。

在弹出窗口上，我有一个按钮，当按下该按钮时，我希望当前的弹出窗口关闭并打开另一个。

我试过这样：

弹出窗口：

```
 <div id="MyFirstPopup" data-role="popup" data-theme="a" data-overlay-theme="a" class="ui-content">
        <a  data-role="button" data-transition="none" data-theme="b"
            onclick="ShowSecond();" data-icon="forward" data-iconpos="left" >
        </a>
    </div>

    <div id="MySecondPopup" data-role="popup" data-theme="a" data-overlay-theme="a" class="ui-content">
     ...
    </div> 
```

JS：

```
function ShowSecond()
{
   $('#MyFirstPopup').popup('close');
   $('#MySecondPopup').popup('open');
} 
```

那没起效。

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:22:28.553

首先不要使用***onclick="ShowSecond();"*** 直接在一个标签上。

我为您创建了一个工作示例：http: [//jsfiddle.net/Gajotres/8Arrt/](http://jsfiddle.net/Gajotres/8Arrt/)

像这样添加点击事件：

```
 $('#popup-button').live('click', function(e) {
     setTimeout(function(){$('#MySecondPopup').popup('open');},500)
     $('#MyFirstPopup').popup('close');
}); 
```

或者使用 .on( 如果您使用的是新的 jQuery 库。除非旧的弹出窗口已关闭，否则您无法打开新的弹出窗口，但您也无法在关闭最后一个的事件中立即打开弹出窗口，因此需要 setTimeout 函数。设置任何超时需要/想要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:25:58.673

尝试这个：

```
<div id="MyFirstPopup" data-role="popup" data-theme="a" data-overlay-theme="a" class="ui-content">
    <a id="btOpenSecPopup" data-role="button" data-transition="none" data-theme="b"
        onclick="ShowSecond();" data-icon="forward" data-iconpos="left" >
    </a>
</div>

<div id="MySecondPopup" data-role="popup" data-theme="a" data-overlay-theme="a" class="ui-content">
 ...
</div> 
```

你的 js 文件

```
$('#btOpenSecPopup').live('click', function(e) {
    $('#MyFirstPopup').popup('close');
    $('#MySecondPopup').popup('open');
} 
```

# susy-compass - 使用 Susy 创建一个没有边距的容器（Compass/Sass）

> ID：14054210
> 
> 赞同：0
> 
> 时间：2012-12-27T11:49:47.600
> 
> 标签：susy-compass

我的 body 元素上有一个 8px 的边距，我不想在那里，因为它使导航看起来有点奇怪。我可以将 margin-top 设置为 0 像素，或者在导航上设置负 8 px 的边距，这样更好，为什么 Susy 在模板中有这个？

![导航有 8px 上边距](../Images/e29edb8d730d9690e87d795a302f2bbd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:39:15.537

这实际上与 Susy 一点关系都没有。Susy 不会对 body 应用任何 8px 的边距，但大多数浏览器默认会这样做。您可以使用重置（“ `@import "compass/reset";`”是一种方式），或者只是手动覆盖主体上的边距设置。我不会使用负边距来修复它，除非你真的想要其他地方的 8px 边距。

# vb.net - 如何获取窗口（模态/非模态），例如“查找和替换”

> ID：14054211
> 
> 赞同：1
> 
> 时间：2012-12-27T11:49:48.103
> 
> 标签：vb.net

找不到如何获取新窗口（表单），它的行为类似于 VB IDE 2008 中的“查找和替换”窗口，其中窗口始终位于顶部，我可以处理它，但我也可以使用底层代码位查找和当我将焦点设置到代码窗口时替换不要隐藏。

最好的解决方案是如果我打开多个这样的窗口。

这就是我尝试的方式，但打开的窗口是模态的！

```
Dim fl As New myWindow
With fl
    .StartPosition = FormStartPosition.Manual
    .aCallerLocation = Me.Location
End With

Dim ret As Integer = fl.ShowDialog(Me)
fl.Close()
fl = Nothing 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:04:33.757

将表单显示为对话框表单，不必使表单保持在主表单的前面。使用该`ShowDialog`方法会使表单成为模态的。使它保持领先的原因是您正在传递`Me`参数`owner`。即使您只是调用非模态`Show`方法，您仍然可以传递所有者表单：

```
Dim fl As New myWindow()
' ...
fl.Show(Me) 
```

这样，新表单将保留在主表单之前，但不会是模态的。因此，这两种表单都可以使用，并且您可以根据需要在主表单前面显示尽可能多的非模态子表单。

# java - 数组多维

> ID：14054214
> 
> 赞同：0
> 
> 时间：2012-12-27T11:49:56.707
> 
> 标签：java, arrays, multidimensional-array

我学习Java并用数组构建了一个程序：

```
com[0]="one";
com[1]="two";
com[2]="three";
[...]
com[9]="ten"; 
```

每个数组字符串都是一条诫命（我的程序是 10 条诫命）。

我想检查是否已经阅读了一条诫命。所以，我认为使用带有字符串数组和布尔数组的多维数组。

有可能吗？做这个的最好方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:56:57.827

这里不需要多维数组，这只会增加复杂性。你只需要一个类诫命：

```
public class Commandment {

   private String commandment;
   private boolean read;

   public Commandment(String commandment) {
      this.commandment = commandment;
   }

   public void setRead(boolean read) {
      this.read = read;
   }

   public boolean isRead() {
      return this.read;
   }
} 
```

然后你创建一个诫命数组：

```
com[0]= new Commandment("one");
com[1]= new Commandment("two");
com[2]= new Commandment("three"); 
```

要更改为“阅读”：

```
com[2].setRead(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:56:34.050

有一个单独的数组，长度相同，并且该数组的索引与您的 String 数组中的索引相关。

可能更好的方法是创建一个像

```
public class Commandment {
    private String com;
    private String read;
    public (String com) {
        this.com = com;
        this.read = false;
    }
    public getCom() {
        return com;
    }
    public isRead() {
        return read;
    }
    public beenRead() {
        read = true;
    }
} 
```

而是制作一个由这些对象组成的数组。

```
Commandment[] coms = new Commandment[10];
coms[0] = new Commandment("com1");
System.out.println(coms[0].getCom()+", has been read? "+coms[0].isRead());
coms[0].beenRead();
System.out.println(coms[0].getCom()+", has been read? "+coms[0].isRead()); 
```

将创建它，将第一条诫命作为“com1”放入，然后检查它是否已被阅读，使其阅读，然后再次检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T12:12:17.950

或者你可以使用两个集合

```
String[] commandments="zero,one,two,three,four,five,six,seven,eight,nine,ten".split(",");
BitSet read = new BitSet(commandments.length); 
```

# jxl - JXL 支持 excel 2007 格式

> ID：14054225
> 
> 赞同：3
> 
> 时间：2012-12-27T11:50:56.183
> 
> 标签：jxl

在我的应用程序中，我使用 JXL 来解析 XLS 表。

现在根据客户要求，我还需要提供对 XLSX (Excel 2007) 格式的支持。

但似乎 JXL 还没有发布任何支持 XLSX(Excel 2007) 格式的版本。

谁能建议我任何与 XLSX 格式兼容的 JXL 方式？

或者是否需要更改 API 或者我可以使用 JXL 处理 XLSX 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T13:05:25.217

我访问了 JXL api，似乎他们没有提供对 xlsx 格式的支持。

所以我将我的 api 更改为 Apche POI 3.9。

它具有很好的 xlsx/xls 处理功能。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-06T10:13:29.760

添加以下两个罐子然后它将起作用：

xmlbeans 和 dom4j

# iphone - 为什么 didEnterRegion 调用了两次？

> ID：14054235
> 
> 赞同：6
> 
> 时间：2012-12-27T11:51:44.257
> 
> 标签：iphone, ios, cllocationmanager, clregion

我在我的 iOS 应用程序中使用位置服务，即区域监控，这是我的代码

```
//this for creating region
-(void)createRegion
{
    [dictionary setValue:@"23 St, New York" forKey:@"title"];
    [dictionary setValue:[NSNumber numberWithDouble:40.742878] forKey:@"latitude"];
    [dictionary setValue:[NSNumber numberWithDouble:-73.992821] forKey:@"longitude"];
    [dictionary setValue:[NSNumber numberWithDouble:(300.0)] forKey:@"radius"];

    [regionArray addObject:[self mapDictionaryToRegion:dictionary]];
    [self initializeRegionMonitoring:regionArray];
}
- (CLRegion*)mapDictionaryToRegion:(NSDictionary*)dictionary {
    NSString *title = [dictionary valueForKey:@"title"];

    CLLocationDegrees latitude = [[dictionary valueForKey:@"latitude"] doubleValue];
    CLLocationDegrees longitude =[[dictionary valueForKey:@"longitude"] doubleValue];
    CLLocationCoordinate2D centerCoordinate = CLLocationCoordinate2DMake(latitude, longitude);

    CLLocationDistance regionRadius = [[dictionary valueForKey:@"radius"] doubleValue];

    return [[CLRegion alloc] initCircularRegionWithCenter:centerCoordinate
                                                   radius:regionRadius
                                               identifier:title];
}

- (void) initializeRegionMonitoring:(NSArray*)geofences {
    if(![CLLocationManager regionMonitoringAvailable]) {
       // [self showAlertWithMessage:@"This app requires region monitoring features which are unavailable on this device."];
        return;
    }

    for(CLRegion *geofence in geofences) {
        [_locationManager startMonitoringForRegion:geofence];
    }
}

- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region {
NSLog(@"entered region %@",region.identifier);
}
- (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region {
    NSLog(@"exited region %@",region.identifier);
} 
```

当应用程序在前台时它工作正常。它向我显示日志：“输入区域..”和“退出区域..”，但是当应用程序进入后台时，相同的日志在几分之一秒内打印两次，即委托方法调用两次，**我不需要，有什么办法可以避免调用 2 次？** 还是在创建或监视区域时犯了任何错误？请帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T12:16:25.747

我相信这个问题是我自己的重复。我认为 Apple 的区域监控 API 存在错误。我已经就这个问题向苹果公司提交了一份雷达报告，但到目前为止还没有收到任何回复。

我解决此问题的一种方法是将时间戳保存在 didEnter 和 didExit 方法中，如果这些方法在保存的时间戳后 10 秒内触发，则将方法作为骗子跳过。

如果有人感兴趣，我在 github 上有一个项目展示了这个问题。

[https://github.com/billburgess/GeofenceBug](https://github.com/billburgess/GeofenceBug)

随意提交另一个雷达，因为这是 Apple 注意到问题并采取行动的唯一方式。雷达号码是 12452255 - 重复代表要求区域监控。

如果你想欺骗这个雷达，这里是带有信息的开放雷达链接。 [http://openradar.appspot.com/radar?id=2484401](http://openradar.appspot.com/radar?id=2484401)

# javascript - 任务板 - 添加任务内置集会

> ID：14054241
> 
> 赞同：0
> 
> 时间：2012-12-27T11:52:00.537
> 
> 标签：javascript, ruby, popup, rally

我希望通过添加任务来为任务板添加更多可用性。

我偶然发现了 Git Hub 中的几个任务板。最好的是

[https://github.com/Pistos/Rally-Task-Board/blob/master/code.html](https://github.com/Pistos/Rally-Task-Board/blob/master/code.html)

在这个实现中有两个错误：

187 号线

```
html.push('<a href="/slm/tk/new.sp?cpoi=' + __PROJECT_OID__  + 'd&itemIndex=0&projectScopeUp=false&projectScopeDown=true&workProduct=' + value.ObjectID + '" target="task-window">add task</a>'); 
```

1.  有一个type-o /slm/tk/new.sp?cpoi=' + **PROJECT_OID** + 'd，我猜d应该在cpoi之后。
2.  主要的是在保存和关闭按钮时关闭任务选项卡并刷新任务板的视图。

我不知道 Rally 是否有更好的方法来打开任务窗口，但我认为这更多的是关闭该按钮的新选项卡/弹出窗口的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T04:40:24.140

很好地抓住了您在上述代码的任务编辑器 url 中发现的错字。至于在您找到的代码中出现的标准 Rally 任务编辑器窗口中单击“保存”或“保存并关闭”后刷新任务板，这实际上是不可能的。任务板是使用 YUI 编写的，标准的拉力赛任务编辑器没有任何 Javascript 可访问的“钩子”，允许您从任务板设置侦听器以启动重绘以响应标准任务中的保存事件编辑。

我见过各种允许从故事卡添加任务的客户“增强型任务板”。但是，他们这样做没有使用标准的拉力赛任务编辑器。相反，他们通过添加添加任务功能在 Javascript 应用程序中提出了一个基于 YUI 的编辑器窗口。其中大部分基于从`showEditor`标准应用目录任务板的第 440 行开始的现有编辑任务功能：

[https://github.com/RallyApps/TaskBoard/blob/master/deploy/App.html](https://github.com/RallyApps/TaskBoard/blob/master/deploy/App.html)

带有添加任务按钮的增强任务板通常使用与您在 showEditor 中看到的功能非常相似的功能构建添加任务编辑器。您可以通过开发自己的 addTaskEditor 函数轻松地进行类似的修改。

# perl - uniq 第一个字段，不丢弃重复行的内容

> ID：14054244
> 
> 赞同：1
> 
> 时间：2012-12-27T11:52:17.840
> 
> 标签：perl, sed, awk, uniq

这是我第一次面对这样的情况。我需要为第一个字段做 uniq ，但不删除重复行的任何内容。举这个例子

输入文件

```
ENST000001.1    +   67208778    67210057
ENST000001.1    +   67208778    67210768
ENST000001.1    +   67208778    67208882
ENST000002.5    +   67208778    67213982
ENST000003.1    -   57463571    57463801
ENST000003.1    -   57476352    57476463
ENST000003.1    -   57476817    57476945 
```

当我这样做时（uniq -w 12），只会检查第一个字段（只有 12 个字符）在所有其他行中是否存在重复项。结果将是这样的：

```
ENST000001.1    +   67208778    67210057
ENST000002.5    +   67208778    67213982
ENST000003.1    -   57463571    57463801 
```

所有重复行的内容都被丢弃，只保留第一行。我正在寻找的是这样的

```
ENST000001.1    +   67208778_67210057  67208778_67210768  67208778_67208882 
ENST000002.5    +   67208778_67213982
ENST000003.1    -   57463571_57463801  57476352_57476463  57476817_57476945 
```

如何在不丢失重复行内容的情况下使用 uniq ？！有没有办法在 AWK/sed/perl 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:00:40.437

```
awk '{a[$1" "$2]=a[$1" "$2]" "$3" "$4;}END{for(i in a)print i,a[i]}' your_file 
```

测试如下：

```
> cat temp
ENST000001.1    +       67208778        67210057
ENST000001.1    +       67208778        67210768
ENST000001.1    +       67208778        67208882
ENST000002.5    +       67208778        67213982
ENST000003.1    -       57463571        57463801
ENST000003.1    -       57476352        57476463
ENST000003.1    -       57476817        57476945
> awk '{a[$1" "$2]=a[$1" "$2]" "$3" "$4;}END{for(i in a)print i,a[i]}' temp
ENST000002.5 +  67208778 67213982
ENST000003.1 -  57463571 57463801 57476352 57476463 57476817 57476945
ENST000001.1 +  67208778 67210057 67208778 67210768 67208778 67208882 
```

如果您对 underscore( `_`) 有特别的了解，请使用以下命令：

```
> awk '{a[$1" "$2]=a[$1" "$2]" "$3"_"$4;}END{for(i in a)print i,a[i]}' temp
ENST000002.5 +  67208778_67213982
ENST000003.1 -  57463571_57463801 57476352_57476463 57476817_57476945
ENST000001.1 +  67208778_67210057 67208778_67210768 67208778_67208882
> 
```

解释：

-> 创建一个关联数组 a ，其键将是第一个字段+空格+第二个字段。

-> 每个键的值是它的前一个值+第三个字段+下划线+第四个字段

->end 块在处理完所有行后执行。和 for 循环将遍历 ass..array 并打印其键和值。

由于 perl 也被标记，这里是 perl 解决方案：

```
perl -F -lane '$H{$F[0]." ".$F[1]}=$H{$F[0]." ".$F[1]}." ".$F[2]."_".$F[3];if(eof){foreach(keys %H){print $_,$H{$_}}}' your_file 
```

上述 perl 解决方案适用于命令行本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:06:57.233

在 Perl 中，您可以通过将它们分组到 hashref 中来实现。

```
#!/usr/bin/perl
use strict;
use warnings;

my $lines;
while (<DATA>) {
  chomp;
  my @fields = split /\s+/;
  push @{ $lines->{"$fields[0] $fields[1]"} }, "$fields[2]_$fields[3]";
}

foreach my $line (sort keys %$lines) {
  print join("\t", $line, @{ $lines->{$line} }), "\n";
}
__DATA__
ENST000001.1    +   67208778    67210057
ENST000001.1    +   67208778    67210768
ENST000001.1    +   67208778    67208882
ENST000002.5    +   67208778    67213982
ENST000003.1    -   57463571    57463801
ENST000003.1    -   57476352    57476463
ENST000003.1    -   57476817    57476945 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:13:34.010

这是一个 Perl 单行代码：

```
perl -lane 'BEGIN{$"=v9}push@{$u{"@F[0,1]"}},"$F[2]_$F[3]"}{while(($k,$v)=each%u){print"@{[$k,@$v]}"}' 
```

扩展版：

```
#!/usr/bin/env perl
use strict;
use warnings;
BEGIN { $/ = "\n"; $\ = "\n"; $" = "\t" }
my %u;
while (<ARGV>) {
    chomp;
    my @F = split /\s+/;
    push @{$u{"@F[0, 1]"}}, "$F[2]_$F[3]";
}
while (my ($k, $v) = each %u) {
    print "@{[$k, @$v]}";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T13:45:57.150

这可能对您有用（GNU sed）：

```
sed -r ':a;$!N;s/^((\S+\s+\S+).*)\n\2/\1/;ta;s/\<([0-9]+)\s+([0-9]+)\>/\1_\2/g;P;D' file 
```

# java - java.lang.ExceptionInInitializerError 创建hibernate配置

> ID：14054245
> 
> 赞同：2
> 
> 时间：2012-12-27T11:52:20.660
> 
> 标签：java, eclipse, hibernate, exception, jboss

我正在开发一个 Hibernate 项目，并且我配置了所有内容。

所以，我生成了 bean 和 hbm 文件。

然后，我写了一个测试类来测试这个项目（我使用了这个`Client`类）

当我执行代码时，抛出了以下异常：

```
java.lang.ExceptionInInitializerError
Caused by: java.lang.NullPointerException
at org.slf4j.LoggerFactory.singleImplementationSanityCheck(LoggerFactory.java:192)
at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:113)
at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:269)
at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:242)
at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:255)
at org.aness.test.HiberM.<clinit>(HiberM.java:12)
Exception in thread "main" 
```

代码是：

```
import org.aness.beans.*;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class HiberM {
 final static Logger logger = LoggerFactory.getLogger(Client.class);
public static void main(String[]arg){

    Configuration cfg = new Configuration().configure();
    SessionFactory sf =cfg.buildSessionFactory();
    Session s = sf.openSession();
    Transaction tx =s.beginTransaction();

    Client c =new Client();
    c.setRaisonSociale("peugeot algerie");
    c.setNumeroRc("3215468897");
    c.setIdentificationFiscale("888777999");
    c.setAdresseActivite("blida zone atlas");
    c.setTelephone("00213(0)25436996");
    c.setFax("00213(0)25436996");

    s.save(c);
    tx.commit();

   }

 } 
```

这就是整个问题。

休眠 cfg 文件是：*

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                     "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory name="apurement">
 <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
 <property name="hibernate.connection.password">root</property>
 <property name="hibernate.connection.url">jdbc:mysql://localhost/apurement</property>
 <property name="hibernate.connection.username">root</property>
 <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
</session-factory>
</hibernate-configuration> 
```

客户端映射是：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 27 d?c. 2012 11:47:54 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="org.aness.beans.Client" table="client" catalog="apurement">
    <id name="clientId" type="int">
        <column name="client_id" />
        <generator class="assigned" />
    </id>
    <property name="raisonSociale" type="string">
        <column name="raison_sociale" length="150" not-null="true" />
    </property>
    <property name="numeroRc" type="string">
        <column name="numero_rc" length="45" not-null="true" />
    </property>
    <property name="identificationFiscale" type="string">
        <column name="identification_fiscale" length="45" not-null="true" />
    </property>
    <property name="adresseActivite" type="string">
        <column name="adresse_activite" length="250" not-null="true" />
    </property>
    <property name="adressePersonelle" type="string">
        <column name="adresse_personelle" length="250" />
    </property>
    <property name="telephone" type="string">
        <column name="telephone" length="45" not-null="true" />
    </property>
    <property name="fax" type="string">
        <column name="fax" length="45" not-null="true" />
    </property>
    <set name="domiciliations" table="domiciliation" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="client_id" not-null="true" />
        </key>
        <one-to-many class="org.aness.beans.Domiciliation" />
    </set>
    </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:57:47.767

两种可能性：

你`Hibernate.cfg.xml`不在类路径上。它在哪个文件夹中？

否则你可以尝试更新`slf4j`jar的版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:49:12.090

我想你已经遇到了[这个问题](http://mailman.qos.ch/pipermail/slf4j-dev/2009-December/002807.html)。

看来您使用的是 SLF4J 版本 1.5.8（或更高版本），因为[带有标签“SLF4J_1.5.8”的](https://github.com/qos-ch/slf4j/blob/SLF4J_1.5.8/slf4j-api/src/main/java/org/slf4j/LoggerFactory.java)[源代码的`org.slf4j.LoggerFactory`](https://github.com/qos-ch/slf4j/blob/SLF4J_1.5.8/slf4j-api/src/main/java/org/slf4j/LoggerFactory.java)行号与您的堆栈跟踪中的行号相匹配。

我建议更新到更高版本的 SLF4J。

# localdb - SqlLocalDb 的用户实例

> ID：14054254
> 
> 赞同：28
> 
> 时间：2012-12-27T11:53:01.457
> 
> 标签：localdb

当我尝试从 C# 访问数据库时出现此异常。

我的连接字符串是

```
Data Source=(localdb)\v11.0;integrated security=true;User Instance = true;AttachDbFileName=C:\Users\UserName\Desktop\DB\TestDB3.mdf 
```

例外是

> 连接到 SQL Server 的用户实例时，不允许使用用户实例登录标志。连接将被关闭。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-27T14:41:02.507

LocalDB 实例都是“用户实例”，无需`User Instance=true`在您的连接字符串中指定，实际上它甚至不受支持（如您所见）。只需删除这部分，它就会正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-07T14:42:08.637

只是为了添加更多信息。如果某些方法对您不起作用，并且它仍然抱怨它无法找到服务器。您将需要在 applicationHost 文件中为您的应用程序池标识设置以下两个属性

```
<add name="DefaultAppPool">
            <processModel identityType="NetworkService" loadUserProfile="true" setProfileEnvironment="true" />
        </add> 
```

需要这两个属性以确保您的帐户可以启动 LocalDB 服务器。

# c# - 新的 DateTime 对象在 WCF 中给出空引用异常

> ID：14054256
> 
> 赞同：1
> 
> 时间：2012-12-27T11:53:07.777
> 
> 标签：c#, .net, wcf, datetime

我是新手，`WCF`所以请多多包涵。

为什么我在我的服务中`NullReferenceException occured`尝试创建一个新`DateTime`对象时会得到一个。`WCF`

这是代码行：

```
DateTime fromDate = new DateTime(DateTime.Now.Ticks); 
```

我尝试了各种方法，例如：

```
DateTime fromDate = new DateTime();
DateTime fromDate = DateTime.Now; 
```

所有 3 行代码都给我一个`NullReferenceException occured`错误。

截屏：

![在此处输入图像描述](../Images/2877e8a8d99efa88e3d33ff965ba37a4.png)

我可以在 中使用`DateTime`对象`WCF`吗？

**编辑：**

代码到该行：

```
public class CampaignSchedulePlacementService : ICampaignSchedulePlacementService
    {

        public PlacementAdvertRoutingAddressPairsResponce GetPlacementAdvertRoutingAddressPairs(string userName, string password, string routingAddressCode, int monthsBack, int monthsAhead)
        {
            return GetPlacementAdvertRoutingAddressPairsByFilters(userName, password, routingAddressCode, monthsBack, monthsAhead);
        }

        #region Methods

        private PlacementAdvertRoutingAddressPairsResponce GetPlacementAdvertRoutingAddressPairsByFilters(string userName, string password, string routingAddressCode, int monthsBack, int monthsAhead)
        {
            PlacementAdvertRoutingAddressPairsResponce placementAdvertRoutingAddressPairsResponce = new PlacementAdvertRoutingAddressPairsResponce();
            StagingEntityModel stagingEntityModel = null;

            try
            {
                try
                {
                    string connectionString = WebConfigurationManager.ConnectionStrings["Test"].ConnectionString;
                    stagingEntityModel = new StagingEntityModel(RMS.Common.Core.Public.GetEntityConnectionString(connectionString, "Data.EntityFramework.Model.StagingEntityModel"));
                    stagingEntityModel.Connection.Open();
                }
                catch (Exception ex)
                {
                    placementAdvertRoutingAddressPairsResponce.Message = "Failed opening the connection :" + String.Format("{0}\r\n with an inner exception of {1}\r\nand a stack trace of {2}", ex.Message,
                                                                                ex.InnerException != null ? ex.InnerException.Message : "",
                                                                                ex.StackTrace);

                    return placementAdvertRoutingAddressPairsResponce;
                }

                User currentUser = stagingEntityModel.User.FirstOrDefault(x => x.UserName == userName && x.Password == password);

                if (currentUser != null)
                {
                    DateTime fromDate = new DateTime(DateTime.Now.Ticks); //.AddMonths(monthsBack * -1);
                    DateTime toDate = new DateTime(DateTime.Now.Ticks); //.AddMonths(monthsAhead); 
```

**编辑：**

调用堆栈：

![在此处输入图像描述](../Images/77556efa09e795636002bcc4fd158cb2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:07:47.943

> 我可以在 WCF 中使用 DateTime 对象吗？

最肯定的。

虽然我看不到堆栈跟踪，但这条线`DateTime fromDate = new DateTime(DateTime.Now.Ticks);`不会真的失败。没什么好说的`null`。但是，这一行：

```
stagingEntityModel.User.FirstOrDefault(x => x.UserName == userName && x.Password == password); 
```

肯定会失败。我想你会发现`.User`是`null`。而且我认为您还会发现 Visual Studio，因为它似乎做了很多，跳到其他一些不是失败的声明。

# jakarta-ee - Servlet jar 未加载 Tomcat 问题

> ID：14054262
> 
> 赞同：2
> 
> 时间：2012-12-27T11:53:25.467
> 
> 标签：jakarta-ee, tomcat

我今天重启了tomcat，webapp下线了。

当我提到 catalina.out 文件时，我看到了以下错误。

```
Dec 27, 2012 6:38:21 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/dun/stud01/webapps/WEB-INF/lib/servlet.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class 
```

在今天之前的这段时间里，应用程序运行良好。它是一个 Unix IBM-AIX 服务器环境。

我不知道这段时间出了什么问题，它工作正常。任何人都可以建议如何使网站恢复在线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:12:44.777

你看过[servlet 规范](http://www.jcp.org/aboutJava/communityprocess/final/jsr053/)的相关章节吗？它说：

> 它不能允许 WAR 覆盖 J2SE 或 Java servlet API 类。

换句话说，你**不**应该在你的 webapp 中提供`servlet.jar`，因为它已经随 Tomcat 一起提供了。从您的 .war 中删除它并重新启动 Tomcat。

# paypal - Paypal 动态订阅按钮 ipn

> ID：14054263
> 
> 赞同：0
> 
> 时间：2012-12-27T11:54:04.170
> 
> 标签：paypal

我正在使用我发现的这段代码：

```
<form name="_xclick" action="https://www.sandbox.paypal.com/cgi-bin/webscr method="post">
<input type="hidden" name="cmd" value="_xclick-subscriptions">
<input type="hidden" name="business" value="me@example.com">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="no_shipping" value="1">
<input type="image" src="http://www.paypal.com/en_US/i/btn/btn_subscribe_LG.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
<input type="hidden" name="a3" value="5.00">
<input type="hidden" name="p3" value="1">
<input type="hidden" name="t3" value="M">
<input type="hidden" name="src" value="1">
<input type="hidden" name="sra" value="1">
</form> 
```

当您从贝宝网站生成一个按钮时，它为您提供了选择发送 ipn 的链接的选项。我的问题是，如何使用上面的代码获得 ipn 确认，或者如何设置链接？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T09:22:33.370

要专门向此按钮添加 IPN 通知，您只需在表单中添加一个额外的隐藏字段。

```
<input type="hidden" name="notify_url" value="http://www.domain.com/ipn-listener.php" /> 
```

不过，这只会触发初始交易的 IPN。如果您想从那里获得与此配置文件关联的所有付款的 IPN，您需要在您的 PayPal 帐户配置文件中的即时付款通知首选项部分下配置 IPN。只需打开它并设置您要使用的 URL。

那时，帐户配置文件设置将是您的帐户将用于所有交易的默认 IPN。但是，这可以使用 notify_url （或 API 请求中的 NOTIFYURL ）覆盖。

希望有帮助。

# c# - Linq给出错误的第一种方法

> ID：14054266
> 
> 赞同：0
> 
> 时间：2012-12-27T11:54:14.600
> 
> 标签：c#, .net, wcf, linq, entity-framework

在我的 WCF 休息服务的网络方法中，我试图使用 Linq 的第一种方法查找记录，如下所示

```
 [WebInvoke(UriTemplate = "UpdateProductObject", Method = "PUT")]
    public Result UpdateProductObject(ProductObjectToSave prodSave)
    {

        IUnitOfWork unitOfWork = new UnitOfWork((IObjectContext)_objectSetFactory);
        var versions = prodSave.VersionDetails;

        foreach (var versionDetail in versions)
        {
            var detail = versionDetail;

            var dbVersionentity = _productVersionEntityRepository.First(x => x.Id == detail.Id);

            if (detail.Id  < 0)
            {

                dbVersionentity.Id = GetNextTableId("vProductVersion");

            }

            dbVersionentity.Name = detail.Name;
            dbVersionentity.Code = detail.Name;

            if (detail.Id > 0){

            _productVersionEntityRepository.Update(dbVersionentity);
            }
            else
            {
                _productVersionEntityRepository.Insert(dbVersionentity);
            }

        }

        try
        {
            unitOfWork.Commit();
        }
        catch (Exception e)
        {

            return new Result() { Error = e.Message };
        }

        return new Result() { Error = "Record updated successfully" };

    } 
```

“_productVersionEntityRepository”在我的服务中定义如下。

```
 private readonly Repository<ProductVersionEntity> _productVersionEntityRepository; 
```

当没有记录时，它会抛出异常 "Sequence contains no elements" 。我做了一些发现，我们可以使用 FirstOrDefault 方法。但不知何故，我没有得到使用 FirstOrDefault 的选项。我对此真的很陌生，所以可能我错过了一些可以描述解决方案的链接。如果第一种方法失败，请帮助我或建议我以其他方式进行错误处理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:57:56.847

这就是[First()](http://msdn.microsoft.com/en-us/library/bb535050.aspx)的工作方式，如果找不到元素，它将抛出异常。您可以改用[FirstorDefault()](http://msdn.microsoft.com/en-us/library/bb549039.aspx)并检查元素是否为`null`.

编辑：我意识到您正在使用自定义存储库。如果您可以访问源代码，我建议您添加一个名为的新方法`.FirstOrDefault()`，该方法将以谓词作为参数，如果未找到实体则返回 null。

编辑 2：将此方法添加到您的存储库：

```
T FirstOrDefault(Expression<Func<T, bool>> where, params Expression<Func<T, object>>[] includeProperties) 
{ 
    IQueryable<T> query = AsQueryable(); 
    query = PerformInclusions(includeProperties, query); 

    return query.FirstOrDefault(where); 
} 
```

然后你可以在你的代码中做这样的事情：

```
foreach (var versionDetail in versions)
{
    bool isNew = false;
    var detail = versionDetail;

    var dbVersionentity = _productVersionEntityRepository.FirstOrDefault(x => x.Id == detail.Id);

    // not found in database
    if(dbVersionentity == null)
    {
        isNew = true;

        // create entity here
        dbVersionentity = new .....; 

        // you don't need to do this if id is auto-generated, 
        // i.e. Identity column in SQL Server
        dbVersionentity.Id = GetNextTableId("vProductVersion");
    }

    dbVersionentity.Name = detail.Name;
    dbVersionentity.Code = detail.Name;

    if (isNew)
    {
        _productVersionEntityRepository.Insert(dbVersionentity);
    }
    else
    {
        _productVersionEntityRepository.Update(dbVersionentity);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:57:21.530

尝试

```
var dbVersionentity = _productVersionEntityRepository.Where(x => x.Id == detail.Id).FirstOrDefault(); 
```

# html - 允许 html5 拖动并显示图标 onDrag

> ID：14054267
> 
> 赞同：0
> 
> 时间：2012-12-27T11:54:16.280
> 
> 标签：html, drag-and-drop, draggable, openlayers

我有一个带有锚点和图标的 div。

```
<a id="createWave_addStation"><img class="createWaveToolBarImg" 
src="img/mapIcons/ico_station.png"></a> 
```

我拖动它并想将它放在 OpenLayers 地图上。因为 img 默认是可以拖拽的，所以我这里就不设置了。现在，当我拖动图标时，img 不会被拖动，所以我只看到光标。如何显示拖动的东西的图标。这是我的代码，但它不起作用。

```
$('#createWave_addStation').bind("dragstart", function(ev){
        ev.preventDefault();
        console.log("drag start");
        enableGetMouseupEvent();
        var dragIcon = document.createElement('img');
        dragIcon.src = ICO_STATION;
        dragIcon.width = 100;
        ev.originalEvent.dataTransfer.setDragImg(dragIcon, -10, -10);
    }); 
```

代码本身可以工作，但是拖动时不显示img

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T14:21:51.330

我一起破解了一些可以在 Chrome 中运行的东西，我没有在任何其他浏览器中测试它。演示在这个[小提琴](http://jsfiddle.net/aYzhb/)中。

有两件事很重要：

*   一个任意元素应该设置`draggable="true"`
*   要在拖动时显示的图像应该预先加载，否则它不会第一次显示。

# android - 在相对布局中对齐父底部有时不起作用

> ID：14054268
> 
> 赞同：0
> 
> 时间：2012-12-27T11:54:18.467
> 
> 标签：android, android-layout, android-relativelayout

相对布局的layout和layout1是用来显示add的

```
 <?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical"
   android:background="@drawable/zbackground" >
   <RelativeLayout
        android:id="@+id/layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true">
  </RelativeLayout>

   <RelativeLayout
  android:id="@+id/layout1"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:layout_alignParentBottom="true" >
   </RelativeLayout>

     <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_above="@+id/textView2"
    android:layout_marginTop="10dip"
    android:text="@string/about_text1"
    android:textStyle="bold"
    android:textColor="#ffffffff"
    android:textSize="20dip" />

    <TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_above="@+id/textView3"
    android:textStyle="bold"
    android:textColor="#ffffffff"
    android:textSize="20dip" />
    <TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:textStyle="bold"
    android:textColor="#ffffffff"
    android:textSize="20dip" />

     <TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/textView3"
    android:textStyle="bold"
    android:textColor="#ffffffff"
    android:textSize="20dip" />

  </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:09:15.860

试着放

```
<RelativeLayout
    android:id="@+id/layout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >
</RelativeLayout> 
```

后

```
<TextView
       android:id="@+id/textView1"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_centerHorizontal="true"
       android:layout_above="@+id/textView2"
       android:layout_marginTop="10dip"
       android:text="@string/about_text1"
       android:textStyle="bold"
       android:textColor="#ffffffff"
       android:textSize="20dip" />

   <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_above="@+id/textView3"
        android:textStyle="bold"
        android:textColor="#ffffffff"
        android:textSize="20dip" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:textStyle="bold"
        android:textColor="#ffffffff"
        android:textSize="20dip" />

  <TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/textView3"
    android:textStyle="bold"
    android:textColor="#ffffffff"
    android:textSize="20dip" /> 
```

# javascript - 单击事件侦听器在 OSX 的 Safari 中有效，但在 iOS 中无效

> ID：14054272
> 
> 赞同：6
> 
> 时间：2012-12-27T11:54:40.523
> 
> 标签：javascript, ios, macos, safari, click

我正在制作一个网络应用程序，我想单击一个元素并在一个长按事件处理程序中处理单击。我在 Safari 中进行测试。以下在我的 Mac 上的 Safari 中可以正常工作，但在 iOS 中却不行：

```
<html>
    <head>
        <script>
            window.addEventListener("click",function (event) {
                alert('hi');
            });
        </script>
    </head>
    <body>
        <div style="width: 100%; height: 100%; background: black;">
        </div>
    </body>
</html> 
```

为什么这在 OSX 版本的 Safari 中有效，但在 iOS 中无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:58:12.770

此代码应该跨浏览器工作：

```
function Subscribe(event, element, func) {
    if (element.addEventListener) {
        element.addEventListener(event, func, false);
    } else if (element.attachEvent) {
        element.attachEvent("on" + event, func);
    } else {
        element['on' + event] = func;
    }
}

function func () {
    alert('hi');
}

Subscribe('click', window, func); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:45:28.167

尝试将事件侦听器“click”更改为“click touchstart”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T16:47:52.733

我找到了一个非常简单的解决方案。我在示例代码中放置了另一个关于 div 元素的 div（请参阅上面的问题）。开始的 div 标签是

```
<div onClick=""> 
```

此 div 标签内的所有 div 现在都将触发 click 事件。这也适用于 touchstart。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-28T13:40:35.317

就我而言，我只需要替换`window`为`document`：

*不适用于 iOS：*

```
window.addEventListener('click', () => {}) 
```

**iOS 兼容：**

```
document.addEventListener('click', () => {})` 
```

# php - 致命错误：在第 1861 行的 ajaxCRUD.class.php 中调用未定义函数 q()

> ID：14054280
> 
> 赞同：0
> 
> 时间：2012-12-27T11:55:20.120
> 
> 标签：php, javascript, ajax, jquery

当我在本地主机 ( [http://www.ajaxcrud.com/](http://www.ajaxcrud.com/) ) 上测试 ajaxcrud 时。我收到以下错误。

```
Fatal error: Call to undefined function q() in ajaxCRUD.class.php on line 1861 
```

以下是存在错误的地方。

```
function getFields($table){
    $query = "SHOW COLUMNS FROM $table";
    $rs = q($query); // Line 1861

    $fields = array();
    foreach ($rs as $r){
        //r sub0 is the name of the field (hey ... it works)
        $fields[] = $r[0];
        $this->field_datatype[$r[0]] = $r[1];
    }

    if (count($fields) > 0){
        return $fields;
    }

    return false;
} 
```

希望可以有人帮帮我。非常感谢你 ....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:58:32.697

该函数在 ajaxCRUD 文件夹`q()`内的文件中定义。`preheader.php`只需将其包含在之前`ajaxCRUD.class.php`。

# c# - 服务器端 Web 表单中的列表框按键事件

> ID：14054284
> 
> 赞同：0
> 
> 时间：2012-12-27T11:55:38.277
> 
> 标签：c#, asp.net

我有一个列表框 (GroupListBox)，我想在 C# Web 表单中捕获此列表框上的 Enter 按键事件。我尝试了很多方法，但没有一种方法适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:41:07.297

如果您想在服务器端执行此操作，您应该使用 __doPostBack 来获取回发。

你的列表框-

```
<asp:ListBox ID="ListBox1" runat="server" onkeydown="enterKeyPressed(event);">
            <asp:ListItem>one</asp:ListItem>
            <asp:ListItem>two</asp:ListItem>
            <asp:ListItem>Three</asp:ListItem>
 </asp:ListBox> 
```

Javascript函数-

```
<script language="javascript" type="text/javascript">
    function enterKeyPressed(e) {
         if (window.event) {
            e = window.event;
        }
        if (e.keyCode == 13) {
            __doPostBack('ShowMessage', '');
        }
    }
</script> 
```

在页面的页面加载事件中 -

```
protected void Page_Load(object sender, EventArgs e)
    {
        ClientScript.GetPostBackEventReference(this, string.Empty);
        if (Request.Params["__EVENTTARGET"] != null)
            if (Request.Params["__EVENTTARGET"] == "ShowMessage")
            {
                Label1.Text = "Enter is pressed";
            }
 } 
```

# java - 使用 java mail multipart MIME 仅读取最新回复的内容

> ID：14054292
> 
> 赞同：1
> 
> 时间：2012-12-27T11:56:02.690
> 
> 标签：java, jakarta-mail

我想使用 java 邮件阅读多部分 MIME 邮件，只阅读最新回复的内容（不包括原始电子邮件内容）。除了进行字符串解析之外，还有其他可用的 API 支持吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:45:58.820

我这样做是因为我找不到任何 api。

```
if (messageContent.indexOf("From")!=-1)
                    {
                        messageContent = messageContent.substring(0, messageContent.indexOf("From")).trim();
                    }
                    else
                    {
                        messageContent = messageContent.trim();
                    } 
```

如果我做错了，请纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T06:30:32.087

尽管有一些共同的约定，但原始消息如何包含在回复消息中没有标准。您几乎被困在进行字符串处理以试图找出任何消息使用的约定。

# c# - 从日期列表中过滤星期

> ID：14054294
> 
> 赞同：0
> 
> 时间：2012-12-27T11:56:04.383
> 
> 标签：c#, .net

我有一个日期列表，如何从中选择一周？

**假设这是日期列表：**

```
02/11/2012
11/25/2012
04/08/2012
12/03/2012
04/13/2012
04/11/2012
12/12/2012
01/25/2012
04/10/2012
04/12/2012
04/09/2012
05/23/2012
10/05/2012
01/25/2012
04/14/2012 
```

**提取的周应该是这样的：**

```
04/08/2012
04/09/2012
04/10/2012
04/11/2012
04/12/2012
04/13/2012
04/14/2012 
```

**编辑：**

我在数据库中有一个包含日期的表，当我获取所有记录时，我需要根据这些日期过滤数据并在几周内查看它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:26:28.097

如果我理解正确，您想以某种方式对列表中的日期进行分组，那么同一周的日期将在同一组中。我认为应该这样做：

```
var dates = (..) // your list of dates

var dtf = DateTimeFormatInfo.CurrentInfo;

var groupedDates = dates.GroupBy(d => dtf.Calendar.GetWeekOfYear(d, dtf.CalendarWeekRule, dtf.FirstDayOfWeek)); 
```

之后，您将能够从所选周中选择日期：

```
var myWeekDates = groupedDates.SingleOrDefault(g => g.Key == myWeekNr); 
```

或简单地遍历所有组：

```
foreach(var g in groupedDates)
{
    // (...)
    // g.Key is #nr of the week
    // g is IEnumerable<DateTime> with dates within that week
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:37:10.157

您如何从数据库中选择这些记录？

也许你可以在 SQL 中处理它：

```
SELECT DATEPART(WK, date_column) FROM table; 
```

它返回日期的周数，因此您可以获取该周的第一天或最后一天。

# c# - 从自定义 WinForm 中的自定义事件处理程序访问控制

> ID：14054295
> 
> 赞同：0
> 
> 时间：2012-12-27T11:56:04.897
> 
> 标签：c#, winforms, events, event-handling

我正在使用**VS2010**，**WinForm**

我必须创建一个将输出 windows 窗体的类。我这样做是为了以这种形式执行一些操作，并最终将一些值传递给它的父级。将数据发送到父部件做得很好。我已经测试过了，很满意。

但是当我想在我制作的相同表格之间进行一些操作时，这里会产生一个问题。我想创建事件并告诉这些事件将做什么。我生成了事件处理程序，也可以去事件。但**在事件处理程序中，我无法访问我创建的任何控件**。我只想从我的事件**按钮ConnectServer_Click中访问我在****Show方法中创建的所有控件**

 **这是我的代码：

**自定义设置框.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing;
using System.IO;

namespace ServerConnector
{
    class CustomSettingBox
    {
        ConnectionSettings CS = new ConnectionSettings();

    public List<string> GetServerName()
    {
        StreamReader sr = new StreamReader("Settings//ServerList.txt");
        string line = "";
        List<string> lstServerName = new List<string>();
        while ((line = sr.ReadLine()) != null)
        {
             lstServerName.Add(line.Trim());
        }
        sr.Close();
        return lstServerName;
    }

**public void buttonConnectServer_Click(object sender, EventArgs e)
        { MessageBox.Show("Done!");   `//this message is succesfully shown. but i cannot get access any of my controls defined in Show() method.`

        }**

    public DialogResult Show(ref string ServerName, ref string AuthenTicationType)
    {
        Form form = new Form();

        Label labelServerName = new Label(); //otherlabels here

        TextBox textBoxLogin = new TextBox(); //other textboxs here

        ComboBox comboboxServerName = new ComboBox(); //more combo's

        ListBox listboxAllColumn = new ListBox(); // more listbox's

        Button buttonConnectServer = new Button();
        Button buttonOk = new Button();
        Button buttonCancel = new Button();

        form.Text = "Add Setting";
        labelServerName.Text = "Select a Server";//other labels are defined

        List<string> lstServerName = GetServerName();//gets servername from a text
        foreach (string tmp in lstServerName)
        {
            comboboxServerName.Items.Add(tmp);
        }

        comboboxAuthenticationType.Items.Add("Wndows Server Authentication");
        comboboxAuthenticationType.Items.Add("SQL Server Authentication");

        buttonOk.DialogResult = DialogResult.OK;
        buttonCancel.DialogResult = DialogResult.Cancel;

        **buttonConnectServer.Click +=new System.EventHandler(this.buttonConnectServer_Click);**

        labelServerName.SetBounds(9, 20, 100, 13);//others are here

        comboboxServerName.SetBounds(120, 20, 200, 30);//others are here

        //comboboxServerName.SetBounds(12, 75, 372, 27);
        buttonOk.SetBounds(228, 450, 75, 23);
        buttonCancel.SetBounds(309, 450, 75, 23);

        labelServerName.AutoSize = true;//otheres are here

        comboboxServerName.Anchor = comboboxServerName.Anchor | AnchorStyles.Right; // others are here

        buttonConnectServer.Anchor = buttonConnectServer.Anchor | AnchorStyles.Right;
        buttonOk.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;
        buttonCancel.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;

        form.ClientSize = new Size(600, 500);
        form.Controls.AddRange(new Control[] { labelServerName, labelAuthenticationType, labelLogin, labelPassword, labelDbName, labelTableName, labelSelectColumn, labelWhereColumn, comboboxServerName, comboboxAuthenticationType, textBoxLogin, textboxPassword, comboboxDbName, comboboxTableName, listboxAllColumn, listboxSelectColumn, listboxWhereColumn, buttonConnectServer, buttonOk, buttonCancel });

        form.FormBorderStyle = FormBorderStyle.FixedDialog;
        form.StartPosition = FormStartPosition.CenterScreen;
        form.MinimizeBox = false;
        form.MaximizeBox = false;
        form.AcceptButton = buttonOk;
        form.CancelButton = buttonCancel;

        DialogResult dialogResult = form.ShowDialog();

        ServerName = textBoxLogin.Text;
        AuthenTicationType = comboboxServerName.SelectedItem.ToString();
        return dialogResult;
    }
} 
```

}

因为我对设计没有任何问题，所以我试图避免这里的大部分设计代码，因为它会变得更大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:14:13.870

从另一个函数访问局部函数变量是不可能的。您必须将它们声明为全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:17:52.293

您可以将控制变量声明为父表单中的字段，也可以分配它们的`Name`属性并使用以下`Find`方法访问它们：

```
form.Controls.Find("control name", true); 
```

（只要您`form`在父表单中声明为字段）。**

# c++ - 在 C++ 应用程序中添加脚本

> ID：14054297
> 
> 赞同：1
> 
> 时间：2012-12-27T11:56:20.677
> 
> 标签：c++, python, vba, embedding

我正在做一个模拟股票市场的项目。人们买卖股票，我想将每一轮都称为脚本，以尝试针对市场的策略。

我想要的是 C++ 中的一个函数，它将整数向量作为参数发送到返回 3 个整数数组的 vba 或 python 脚本。

我已经搜索了一个解决方案，但我能找到的只是一种在 python 中执行脚本的方法，但我不知道如何从这个脚本发送和获取参数。我认为我的问题很常见，但我不知道去哪里寻找解决方案。

谢谢！

（我不是以英语为母语的人，如果我犯了语法错误，很抱歉）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:49:42.883

在 Windows 上，您可以使用该功能[`CreateProcess()`](http://msdn.microsoft.com/en-us/library/ms682425.aspx)来启动另一个程序。使用 python 解释器的完整路径作为第一个参数。从 Python 脚本的路径开始第二个参数。

如果您可以用 32768 个字符拟合表示向量的字符串，则可以在 CreateProcess 的第二个参数中提供向量。

[一个更灵活的选项是创建一个具有重定向输入和输出的子进程，如此处](http://msdn.microsoft.com/en-us/library/ms682499%28v=vs.71%29.aspx)所示。然后，您可以将向量写入 python 进程的标准输入，并从其标准输出中读取答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:33:48.263

有很多方法可以做到这一点。

我这样做的方法是[popen()](http://msdn.microsoft.com/en-us/library/96ayss4b%28v=vs.71%29.aspx)你的“脚本”[类似于“python myscript.py -arg1 -arg2”]。根据向量的大小，您可以将其存储在文件中，也可以将其作为参数的一部分传递[Windows 中的参数字符串有 8KB 之类的限制]。

然后输出将显示为 popen() 管道的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:48:04.253

使用[Boost.Python](http://www.boost.org/doc/libs/1_52_0/libs/python/doc/)。它将帮助您将 python 嵌入到您的应用程序中。

# git - 将主分支设置为最新标签

> ID：14054299
> 
> 赞同：6
> 
> 时间：2012-12-27T11:56:29.747
> 
> 标签：git, tags, push, head, master

这是我的 git repo 现在的示例：

> ```
> v1.0    v1.1    v1.2
>   |       |       |
>   a   -   b   -   c
>   |               |
> master           HEAD 
> ```

我通常像这样提交、标记和推送标记：

```
git commit -a -m "Commit msg"
git tag -a v1.3 -m "Tag msg"
git push --tags 
```

我遇到的主要问题是 master 分支没有移动到最新的标签，所以我总是处于[Detached HEAD](https://stackoverflow.com/a/3965714/720999)状态。有什么办法可以解决这个问题，所以主分支将始终指向最新推送的标签？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T15:17:16.567

在这种特殊情况下，我必须执行以下操作：

1.  首先设置master分支指向最新的标签（HEAD指向的地方），因为它是最新的标签。为此，我创建了一个新分支并将 master 合并到它。

```
git branch -b exp
git merge -s ours master
git checkout master
git merge exp 
```

现在 master 与 latest 标签相同：

```
v1.0    v1.1    v1.2
  |       |       |
  a   -   b   -   c
                  |
                 HEAD
                  |
                master 
```

2.  一旦我们将 master 放回原位，每当我们进行新的提交时，我们都需要推送 master 和标签：

```
git commit -a -m "Commit msg"
git tag -a v1.4 -m "Tag msg"
git push master --tags 
```

这样我们就可以避免处于 Detached HEAD 模式并且更新主分支。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T15:47:53.617

已经给出了关于为什么不以这种方式做事的各种答案/评论，但这里是你解决这个特定场景的方法：

```
git checkout -b tmpbranch       # creates a branch called tmpbranch at HEAD
git checkout master             # switch back to master branch
git merge --ff-only tmpbranch   # fast-forward merge master to tmpbranch, fail if not possible
git branch -d tmpbranch         # delete tmpbranch, it's not needed anymore 
```

然后，继续前进，不要签出标签，除了这种方式：

```
git checkout -b somebranch refs/tags/tagname    # creates a new branch starting at tag 
```

这样，您将不会处于分离的 HEAD 状态，并且任何新的提交都将从相关标签开始添加，这似乎是您想要的……提交后，您可以`git tag newtag`在正确的位置创建额外的标签.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T14:24:21.677

分支不引用标签。
一个标签引用一个*固定*的提交。

所以只要你`git checkout master`，你就不是在一个[超然的HEAD模式](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)。
然后您可以提交和标记：标记将在当前分支的 LATEST 上创建。

如果您处于分离的 HEAD 模式，请参阅“ [Git：我如何协调分离`HEAD`的与`master/origin`？](https://stackoverflow.com/questions/5772192/git-how-can-i-reconcile-detached-head-with-master-origin) ”以了解将分离的提交与分支协调的各种方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-05T10:02:17.257

标签用于创建稳定版本。要创建与 Git Drupal 存储库一起使用的标签，首先，如果您使用此标签进行发布，请确保您遵循标签命名约定。在项目目录中，一个示例是：

`git tag 7.x-1.0`

创建标签后，您需要将标签推送到主存储库。push 本身不会发送标签，您还需要通过附加 --tags 标志告诉它在推送中包含标签：

`git push --tags`

如果您不想推送所有标签，也可以具体：示例：

`git push origin tag 7.x-1.0`

要检查和确认远程标签，命令是：-

`git tag -l`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-11T14:55:20.967

我解决了这样的问题：

```
git checkout -B master HEAD
git push --force origin master 
```

# javascript - 如何确定具有不同行高和/或填充的不同浏览器中的最大滚动位置？

> ID：14054300
> 
> 赞同：9
> 
> 时间：2012-12-27T11:56:28.733
> 
> 标签：javascript, css

有没有办法确定每个浏览器的最大滚动位置，而无需实际滚动到末尾并读取此位置？

采用固定高度和溢出的容器 div。容器中的几个 div 元素，其高度之和大于容器的高度。

有一个最大滚动位置（y），我认为它只是容器高度减去总项目高度。`line-height`在容器的 大于项目的之前，这似乎是正确`height`的。如果是这种情况，似乎每个浏览器都以不同的方式确定最大滚动位置。

使用填充变得更糟，一些浏览器添加了顶部填充，一些浏览器添加了顶部和底部填充。

例如看这个[小提琴](http://jsfiddle.net/woomla/UMJ4n)。使用容器 line-height 和 div.item 高度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T02:08:34.070

我只能在少数浏览器中进行测试，但我认为您正在寻找的是：

```
elm.scrollHeight - elm.clientHeight 
```

显示在更新的[jsFiddle](http://jsfiddle.net/UMJ4n/27/)中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T06:47:13.733

看看这个[How to find the HTML element Scrollable Height and width using JQuery ？](http://jqfaq.com/how-to-find-the-html-element-scrollable-height-and-width-using-jquery/)，这显示了如何获取可滚动的高度和宽度，并且有一些关于元素滚动的相关帖子[如何检查滚动条当前是否可见？](http://jqfaq.com/how-to-check-if-the-scrollbars-are-currently-visible/)以及[如何确定垂直和水平滚动条是否到达边缘？](http://jqfaq.com/how-to-determine-if-the-vertical-and-horizontal-scrollbars-reaches-the-edges/). 还有更多常见问题解答，希望对您有所帮助！

# java - 排序列表中的二进制搜索算法

> ID：14054304
> 
> 赞同：-3
> 
> 时间：2012-12-27T11:56:47.610
> 
> 标签：java, algorithm, sorting, binary-search

我的算法应该告诉我**“x”**（值为 5）是否在排序数组中。但是，我一直得到 0。好吧，因为我的条件表明如果“x”不在数组中，则显示 0。我哪里出错了？

```
import java.util.Arrays;

public class binarySeacg {

public static void main (String[]args)
{
    int[] array = {10,7,11,5,13,8};
    exchangesort(array);
    binsearch(array,5);
    System.out.println(Arrays.toString(array));

}

public static void exchangesort(int[] S)
{
    int i,j,temp;

    for(i=0;i<S.length;i++)
        for(j=i+1;j<S.length;j++)
            if(S[i]>S[j])
            {
                temp = S[i];
                S[i] = S[j];
                S[j] = temp;
            }
}

public static int binsearch(int[] S, int x)
{
    int location, low, high, mid;

    low = 1; high = S.length;
    location = 0;

    while(low<=high && location==0)
    {
        mid =(low + high)/2;
        if(x== S[mid])
            location = mid;
        else if(x < S[mid])
            high = mid -1;
        else
            low = mid + 1;
    }
    System.out.println(location);
    return location;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:02:55.627

您设置`low = 1;`, 并且 5 是最小元素 - 所以它在索引 0 中 - 所以在 [1,S.length] 的子列表中 - 它确实不存在。

您应该设置`low = 0;`, 并从第一个元素开始 - 而不是第二个元素。（请记住，Java 中的索引从 0 开始，而不是 1）。

（PS，请注意，在这种特定情况下 - 算法是正确的，因为在排序列表中 - 5 在索引 0 中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:03:03.220

因为，您正在尝试找到`x`您正在传递`3`并在您的列表中的价值。它不存在。因此，将其更改为其他值`5`，然后尝试。

此外，您应该开始`low=0`而不是`low=1`. 因为，它会一直错过第一个元素。

```
public static int binsearch(int[] S, int x)
{
    int location, low, high, mid;

    low = 0; high = S.length;
    location = 0;

    while(low<=high && location==0)
    {
        mid =(low + high)/2;
        if(x == S[mid])
        {
            location = mid;break;
        } 
        else if (x < S[mid])
        {
            high = mid - 1;
        } else
        {
            low = mid + 1;
        }
    }
    System.out.println(location);
    return location;
} 
```

**注意：** 对于不同的输出，在`binsearch(array,5);`这里更改值，这是从`main()`方法调用的。请记住，更改列表中存在的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T12:30:03.280

在这里，您正在对数组进行排序，然后将排序后的数组用于搜索元素。

如果搜索成功，则执行以下任务

位置=中；这意味着您将匹配元素的索引分配给 location 变量。

在这种情况下，元素 5 位于第 0 个索引中。

因此，您的 STDOUT 始终为 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T05:06:57.603

1.  在 java 和大多数语言中，索引从 0 开始，而不是 1，并以 n-1 结束，而不是 n
2.  对于二分查找，请仔细检查何时退出 while 循环，并始终记住您的 low 和 high 变量的含义，无论是 [low, high] 还是 [low, high)
3.  对于这个特定问题，您还应该考虑如果数组中有 r 个重复项怎么办。是否返回数组中的第一个元素或任何元素

# android - android中的java.io.FileNotFoundException

> ID：14054307
> 
> 赞同：6
> 
> 时间：2012-12-27T11:56:56.033
> 
> 标签：android, web-services, path, image-uploading, filenotfoundexception

我正在使用代码从图库中选择图像

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gallery);

    Intent i = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    startActivityForResult(i, SELECT_PICTURE);
}

public void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) {
    Bitmap bitmap = null;
    switch (requestCode) {
    case SELECT_PICTURE:
        if (resultCode == RESULT_OK) {
            Uri selectedImage = imageReturnedIntent.getData();
            try {
                bitmap = decodeUri(selectedImage);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }
            MyApplicationGlobal.bitmap = bitmap;
            MyApplicationGlobal.imageUri = selectedImage.toString();
            Log.v("selectedImage", "selectedImage: " + selectedImage.getPath());

            Intent intentUpload = new Intent(GalleryActivity.this, UploadActivity.class);
            startActivity(intentUpload);
            finish();
        }
    } 
```

然后我尝试通过调用网络服务上传该图像

```
MultipartEntity reqEntity = new MultipartEntity();
    try {
        reqEntity.addPart("email", new StringBody(email));
        Log.v("in uploadImageUsingMultiPart", "imagePath: " + MyApplicationGlobal.imageUri);
        reqEntity.addPart("name", new FileBody(new File(MyApplicationGlobal.imageUri)));
        reqEntity.addPart("img_desc", new StringBody(img_desc));
        reqEntity.addPart("amount", new StringBody(amount));
        reqEntity.addPart("request_type", new StringBody("INSERT"));
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } 
```

但我收到错误`java.io.FileNotFoundException`

原木猫是

```
 java.io.FileNotFoundException: /content:/media/external/images/media/526 (No such file or directory)
at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:239)
at java.io.FileInputStream.<init>(FileInputStream.java:88)
at org.apache.http.entity.mime.content.FileBody.writeTo(FileBody.java:100)
at org.apache.http.entity.mime.HttpMultipart.doWriteTo(HttpMultipart.java:206)
at org.apache.http.entity.mime.HttpMultipart.writeTo(HttpMultipart.java:224)
at org.apache.http.entity.mime.MultipartEntity.writeTo(MultipartEntity.java:183)
at org.apache.http.impl.entity.EntitySerializer.serialize(EntitySerializer.java:97)
at org.apache.http.impl.AbstractHttpClientConnection.sendRequestEntity(AbstractHttpClientConnection.java:162)
at org.apache.http.impl.conn.AbstractClientConnAdapter.sendRequestEntity(AbstractClientConnAdapter.java:272)
at org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:237)
at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:119)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
at com.network.GetJSONFomURL.getJSONSrtringFromUrl(GetJSONFomURL.java:53)
at com.network.WebServices.uploadImageUsingMultiPart(WebServices.java:73)
at com.markphoto_activities.UploadActivity$MyAsyncTaskUploadImage.doInBackground(UploadActivity.java:127)
at com.markphoto_activities.UploadActivity$MyAsyncTaskUploadImage.doInBackground(UploadActivity.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:252)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
at java.lang.Thread.run(Thread.java:1020) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T13:41:48.040

只是一个更新，因为 managedQuery 已被弃用。

```
private String getPath(Uri uri) {
    String[]  data = { MediaStore.Images.Media.DATA };
    CursorLoader loader = new CursorLoader(context, uri, data, null, null, null);
    Cursor cursor = loader.loadInBackground();
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-27T12:15:43.217

调用此方法，将 selectedUri 传递给它，作为回报，您将获得所需的路径

```
public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T12:07:01.997

那是因为`content:/media/external/images/media/526`不是文件。它是媒体提供者的 URI 地址。如果您想要该文件，请检查此 SO 问题：

[从 mediastore 的 URI 获取文件名和路径](https://stackoverflow.com/questions/3401579/get-filename-and-path-from-uri-from-mediastore)

# java - 查找是否包含给定对象的 Set

> ID：14054309
> 
> 赞同：0
> 
> 时间：2012-12-27T11:57:10.183
> 
> 标签：java, collections

一个集合只包含一个实体社区的对象，我正在使用两个具有相同值的对象，其中一个对象存储在该集合中

```
Set<Community> communties = template.get(User.class, "1").getCommunities();
Community com = template.get(Community.class, 1);

for(Community community : communties)
        System.out.println(community.equals(com));

System.out.println(communties.contains(com)); 
```

First Statement 打印`true`，但 Second Statement 打印`false`。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:03:15.347

您必须重写 hashCode() 和 equals()，否则，Set 将找不到对象的正确存储桶，甚至无法到达 equals() 比较。

您可以使用 Eclipse 的“Source”菜单生成相当不错的 equals() 和 hashCode() 方法。

# android - 获取 GridView 项的图像名称

> ID：14054316
> 
> 赞同：1
> 
> 时间：2012-12-27T11:57:40.610
> 
> 标签：android, uiimageview

我有一个在对话框视图中膨胀的网格视图。现在，当我打开对话框（使用 Grid View ）时，它会显示一组 10 张图像。

当对话框被关闭时，我选择的图像设置在 ImageView 上。

现在我的查询是我可以得到图像的名称吗？这是在 ImageView 上设置的？？？

我必须把它保存在某个地方。

```
@Override
public void onClick(View view) {
    // TODO Auto-generated method stub
    final Dialog groupIconsDialog = new Dialog(CreateGroupActivity.this);
    groupIconsDialog.setTitle("Choose Group Icon");
    groupIconsDialog.setContentView(R.layout.group_icons_layout);
    //calling and setting the image icons to the grid view adapter
    GridView groupIconsGrid = (GridView)groupIconsDialog.findViewById(R.id.grid_groupIcons);
    groupIconsGrid.setAdapter(new GroupIconAdapter(CreateGroupActivity.this));

    groupIconsGrid.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1,
                        int position, long arg3) {
                    // TODO Auto-generated method stub

                    group_icon.setImageResource(new GroupIconAdapter(CreateGroupActivity.this).mThumbIds[position]);
                    groupIconsDialog.dismiss();

                }

            });

            groupIconsDialog.show();

        }
    }); 
```

图像适配器

```
public class GroupIconAdapter extends BaseAdapter {

    private Context mContext;

    //icons image array
     public Integer[] mThumbIds = {
                R.drawable.mogra,R.drawable.rhino,
                R.drawable.zebra,R.drawable.lion,
                R.drawable.mogra,R.drawable.rhino,
                R.drawable.giraffee,R.drawable.giraffee,
                R.drawable.lion,R.drawable.rhino
        };

     public GroupIconAdapter(Context c) {
        // TODO Auto-generated constructor stub
         mContext = c;
     }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return mThumbIds.length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return mThumbIds[position];
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View view, ViewGroup parent) {
        // TODO Auto-generated method stub
        ImageView imageView = new ImageView(mContext);
        imageView.setImageResource(mThumbIds[position]);
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new GridView.LayoutParams(50, 50));
        return imageView;
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:04:52.757

是的，如果您有图像的资源 ID，您可以获得图像的名称。您可以使用[getResourceEntryName(resourceId)](http://developer.android.com/reference/android/content/res/Resources.html)

```
String name = getResources().getResourceEntryName(mThumbIds[position]); 
```

# android-viewpager - 在android中使用ViewPager时OutOfMemory

> ID：14054320
> 
> 赞同：1
> 
> 时间：2012-12-27T11:57:49.903
> 
> 标签：android-viewpager, out-of-memory

嗨，我有一个 ViewPager 问题，我在使用 ViewPager 时在 XHDPI 设备上遇到了 OOM。在 MDPI 和 HDPI 设备上完美运行。

这是我的日志猫：

```
12-27 17:06:11.082: E/dalvikvm-heap(10480): 3936000-byte external allocation too large for this process.
12-27 17:06:11.082: E/GraphicsJNI(10480): VM won't let us allocate 3936000 bytes
12-27 17:06:11.102: E/AndroidRuntime(10480): FATAL EXCEPTION: main
12-27 17:06:11.102: E/AndroidRuntime(10480): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:483)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:359)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:382)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:408)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at com.phonethics.madhuridixitnene.MainImageFragment.bitmap(MainImageFragment.java:167)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at com.phonethics.madhuridixitnene.MainImageFragment.onCreateView(MainImageFragment.java:125)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.support.v4.app.FragmentStatePagerAdapter.finishUpdate(FragmentStatePagerAdapter.java:163)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:523)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:495)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:487)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at com.phonethics.madhuridixitnene.MadhuriHomeScreen$PageListener$5.run(MadhuriHomeScreen.java:666)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.os.Handler.handleCallback(Handler.java:587)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.os.Looper.loop(Looper.java:138)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at android.app.ActivityThread.main(ActivityThread.java:3701)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at java.lang.reflect.Method.invokeNative(Native Method)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at java.lang.reflect.Method.invoke(Method.java:507)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
12-27 17:06:11.102: E/AndroidRuntime(10480):    at dalvik.system.NativeStart.main(Native Method) 
```

我尝试回收位图，但事件不起作用。

我有大约 22 张 1280X800 分辨率的图像，我知道这些图像要多得多。但是当我将它们与寻呼机一起使用时，它会在第 3 次或第 4 次滑动后崩溃。

这是我的片段类：

```
import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ImageView;

public class MainImageFragment extends Fragment{

    Context context;
    String imgname;
    String animate;
    int tagPosition;
    Bitmap bm;
    public MainImageFragment()
    {

    }
    public MainImageFragment(Context context,String imgname,String animate,int position)
    {
        this.context=context;
        this.imgname=imgname;
        this.animate=animate;
        tagPosition=position;

    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setRetainInstance(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        if(savedInstanceState!=null)
        {
            imgname=savedInstanceState.getString("imgName");
            animate=savedInstanceState.getString("animate");
            context=getActivity().getApplicationContext();
        }

        View view=(View)inflater.inflate(R.layout.mainimagelayout,null);
        try
        {
            ImageView imgView=(ImageView)view.findViewById(R.id.mainImage);
            imgView.setTag(tagPosition);

            bm=bitmap(imgname);
            imgView.setImageBitmap(bm);
        //  imgView.setImageDrawable(context.getResources().getDrawable(context.getResources().getIdentifier("drawable/"+imgname, "drawable",context.getPackageName())));
            if(animate.equalsIgnoreCase("1"))
            {
                /*Animation anim=AnimationUtils.loadAnimation(context, R.anim.fade_in);
            anim.setFillAfter(true);
            imgView.startAnimation(anim);*/
                imgView.setVisibility(View.INVISIBLE);
            }

        }catch(Exception ex)
        {
            ex.printStackTrace();
        }

        return view;
    }
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);
        if(savedInstanceState!=null)
        {
            imgname=savedInstanceState.getString("imgName");
            animate=savedInstanceState.getString("animate");
        }
    }
    @Override
    public void onSaveInstanceState(Bundle outState) {
        // TODO Auto-generated method stub
        super.onSaveInstanceState(outState);
        outState.putString("imgName", imgname);
        outState.putString("animate", animate);
        context=getActivity().getApplicationContext();

    }

    private Bitmap bitmap(String name)
    {
        final Bitmap bitmap=BitmapFactory.decodeResource(getResources(), getResources().getIdentifier(name, "drawable", getActivity().getPackageName()));
        return bitmap;
    }
    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        bm.recycle();
        super.onDestroy();
    }

} 
```

这是我的适配器类：

```
public  class MainAdapter extends FragmentStatePagerAdapter
    {

        Context context;
        ArrayList<String>imgname=null;
        ArrayList<String>animate;
        public MainAdapter(FragmentManager fm,Context context,ArrayList<String>imgname,ArrayList<String>animate) {
            super(fm);
            // TODO Auto-generated constructor stub
            this.context=context;
            this.imgname=imgname;
            this.animate=animate;
        }

        @Override
        public Fragment getItem(int position) {
            // TODO Auto-generated method stub

            return new MainImageFragment(context, imgname.get(position),animate.get(position),position);

        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return imgname.size();
        }

            @Override
        public void destroyItem(ViewGroup container, int position, Object object) {
            // TODO Auto-generated method stub
            FragmentManager manager = ((Fragment) object).getFragmentManager();
            FragmentTransaction trans = manager.beginTransaction();
            trans.remove((Fragment) object);
            trans.commit();
            super.destroyItem(container, position, object);
        }

    } 
```

# c - 用 APR 编译。错误消息：“尚未对您的平台的 APR_PATH_MAX 做出决定”

> ID：14054326
> 
> 赞同：4
> 
> 时间：2012-12-27T11:58:12.300
> 
> 标签：c, apr

我最近下载了 APR 并在我的机器（Ubuntu 12.0.4）上成功构建了它。我将 /path/to/apr_file_info.h 包含到我的项目中，当我尝试编译时，我收到以下错误消息：

`no decision has been made on APR_PATH_MAX for your platform`

在调查头文件（apr.h）后，我发现以下指令负责：

```
#if defined(PATH_MAX)
#define APR_PATH_MAX       PATH_MAX
#elif defined(_POSIX_PATH_MAX)
#define APR_PATH_MAX       _POSIX_PATH_MAX
#else
#error no decision has been made on APR_PATH_MAX for your platform
#endif 
```

（天真的？）解决方案是定义这些变量 - 但我不确定使用错误的大小是否会有任何不良影响 - 我不确定为编译器指令定义的正确大小。

为什么 ./configure 无法正确确定我的平台（Ubuntu 12.0.4），我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:02:20.163

在 Linux 上，`PATH_MAX`应在`<linux/limits.h>`. 在 APR 之前包含它，它应该可以解决您的问题：

```
#include <linux/limits.h>
#include <path/to/apr_file_info.h> 
```

请注意，包括标准标头标`<limits.h>`头还应包括`<linux/limits.h>`或 POSIX 系统上的相关标头。

如果我没记错的话， Windows 上的等价物是`MAX_PATH`，在中定义。`<windef.h>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T09:05:02.423

我最近遇到了这个问题。令人惊讶的是，需要在 Linux 上使用的 APR 标头不直接包含 linux/limits.h（如果这是一个依赖项）。肯定是好的编程习惯？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-29T15:44:19.833

定义符号`_XOPEN_SOURCE`可能会解决这个问题，例如`CPPFLAGS='-D_XOPEN_SOURCE=700`

请注意，有些程序不支持 CPPFLAGS，因此您必须将其添加到 CFLAGS；tomcat-native 就是一个例子：编译它时你可以编辑文件`native/scripts/build/rules.mk`：

```
- COMPILE      = $(CC) $(CFLAGS)
+ COMPILE      = $(CC) $(CFLAGS) $(CPPFLAGS) 
```

# windows - Windows 服务器中 Wordpress 的文件夹权限

> ID：14054330
> 
> 赞同：1
> 
> 时间：2012-12-27T11:58:25.577
> 
> 标签：windows, wordpress, iis

我正在 Windows 服务器上安装一个 Wordpress 博客 (www.mydomain.com/blog)（是的，是的，我知道......）我在理解文件夹权限时遇到了一些麻烦，我想非常清楚谁是谁以及我授予谁做什么的权限。从某种意义上说，我需要将 Linux CHMOD 编号“翻译”到我的 Windows 服务器安装中。

这里是：在 Linux 服务器中，我可以为 wp-admin 文件夹（比如）选择权限，如下所示：

```
 Read   Write   Execute CHMOD
Owner           4         2        1    = 7
Group           4                  1    = 5
Public          4                  1    = 5 
```

在 Plesk 中，我关注域 - mydomain.com - 文件管理器 - wp-admin（锁定符号） - 高级。我有这个清单：

```
Users                   Inherited from      Apply to
--------------------------------------------------------------------------------------------------
Administrators              ...com\httpdocs\    This folder, subfolders and files
SYSTEM                  ...com\httpdocs\    This folder, subfolders and files
Plesk IIS User (IUSR_oneuser)       ...com\httpdocs\    This folder and subfolders
Plesk IIS User (IUSR_oneuser)       ...com\httpdocs\    Files only
Plesk IIS WP User (IWAM_plesk(default)) ...com\httpdocs\    This folder and subfolders
Plesk IIS WP User (IWAM_plesk(default)) ...com\httpdocs\    Files only
Plesk FTP User (anotheruser)        ...com\httpdocs\    This folder and subfolders
Plesk FTP User (anotheruser)        ...com\httpdocs\    Files only
Plesk Domain User (oneuser) 
```

（oneuser 和 anotheruser 是访问该站点的两个 FTP 帐户）

当我单击每个项目时，权限列表会激活允许...

```
Full Control
Read Control
Write Control
Execute Control
Traverse Folder / Execute File
List Folder / Read Data
Create Files / Write Data
Create Folders / Append Data
Delete subfolders and Files
Delete
Change Permissions
Take Ownership 
```

所以，我有读、写和执行，但我想如果我需要将数据（图像/视频）上传到我的博客上，我还需要“创建文件”。

我的问题（作为 Linux CHMOD 翻译）是：

*   谁是“主人”？管理员？系统？
*   谁是“群”？
*   谁是“公众”？

例如，我被告知 wp-admin 应该是 CHMOD 755 和 wp-admin/index.php CHMOD 644。我应该单击上述哪些项目（用户类型）以及我为每个项目授予什么权限来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T19:21:46.617

网络服务和 iusr（匿名访问公共 grp）刚刚设置使用相同的权限根据单词移动它们，你将拥有它“修改”是你需要的网络服务的写入

# android - Android：点击操作后取消通知（喜欢通话）

> ID：14054341
> 
> 赞同：5
> 
> 时间：2012-12-27T11:59:22.900
> 
> 标签：android, notifications, action

我有一个通过以下方式拨打号码的操作

```
uri = Uri.parse("tel:" + address);
Intent intent = new Intent(Intent.ACTION_DIAL);
intent.setData(uri);
PendingIntent pd = PendingIntent.getActivity(context, 0,intent, 
       PendingIntent.FLAG_UPDATE_CURRENT);
notif.addAction(R.drawable.ic_menu_call, "Call", pd); 
```

但问题是我不知道

如何/何时调用 NotificationManager 的`manager.cancel()`函数

以便在单击呼叫操作时关闭通知！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-04-11T18:39:43.543

我遇到了同样的情况，我设法通过创建一个在按下操作按钮时调用的广播接收器来解决它。然后，广播接收器会收到一个带有您要关闭的通知 ID 和您要拨打的号码的意图。

这是创建通知的代码：

```
NotificationManager notificationManager =
  (NotificationManager)MyApplication.getAppContext().getSystemService(Context.NOTIFICATION_SERVICE);
//for some versions of android you may need to create a channel with the id you want
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
    NotificationChannel chan = new NotificationChannel("your_channel_id", "ChannelName", NotificationManager.IMPORTANCE_DEFAULT);
    notificationManager.createNotificationChannel(chan);
}
Intent intent = new Intent(MyApplication.getAppContext(), ActionReciever.class);
intent.putExtra("phoNo", phoneNumber);

// num is the notification id
intent.putExtra("id", num);

PendingIntent myPendingIntent = PendingIntent.getBroadcast(
                  MyApplication.getAppContext(), 0, intent, PendingIntent.FLAG_UPDATE_CURRENT
                );
Notification n = new NotificationCompat.Builder(MyApplication.getAppContext(),
                        "your_channel_id")
                        .setSmallIcon(R.drawable.app_pic)
                        .addAction(R.drawable.app_pic, "Dial now", myPendingIntent)
                        .setAutoCancel(true)
                        .build();
notificationManager.notify(num, n); 
```

这是广播接收器代码，在按下操作按钮时调用。这里接收到的intent就是我们在通知中准备的pending intent里面的intent：

```
public class ActionReciever extends BroadcastReceiver {
    @SuppressLint("MissingPermission")
    @Override
    public void onReceive(Context context, Intent intent) {
        String phoneNumber = intent.getStringExtra("phoNo");
        int id = intent.getIntExtra("id",0);
        Intent i = new Intent(Intent.ACTION_DIAL);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        i.setData(Uri.parse("tel:" + phoneNumber));
        NotificationManager notificationManager =
                (NotificationManager) MyApplication.getAppContext().getSystemService(Context.NOTIFICATION_SERVICE);
        notificationManager.cancel(id);
        context.startActivity(i);
    }
} 
```

在应用程序标签内的应用程序清单中注册广播接收器

```
<receiver android:name=".ActionReciever" /> 
```

MyApplication 是一个扩展默认应用程序的类，因此我可以有一个地方来存储我需要的上下文。

```
public class MyApplication extends Application {
    private static Context context;

    public void onCreate() {
        super.onCreate();
        MyApplication.context = getApplicationContext();
    }

    public static Context getAppContext() {
        return MyApplication.context;
    }

} 
```

请注意，您需要更新清单以运行 MyApplication 类，如下所示：

```
android:name="com.example.yourpackage.MyApplication" 
```

即使应用程序关闭且没有后台服务，此代码也能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:17:46.230

请参阅[Android 读取电话状态？](https://stackoverflow.com/questions/7178941/android-read-phone-state)- 关于手机状态。

```
case TelephonyManager.CALL_STATE_RINGING:
    notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        notificationManager.cancel(100); // cancel notification by ID
                    break; 
```

// 建立你的通知。

```
intent notificationIntent = new Intent(context,
                    YourPhoneActivity.class);
            notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                    | Intent.FLAG_ACTIVITY_SINGLE_TOP);
            PendingIntent intent = PendingIntent.getActivity(context, 0,
                    notificationIntent, 0);

            Bitmap bm = BitmapFactory.decodeResource(context.getResources(),
                    iconLarge);
            NotificationCompat.Builder builder = new NotificationCompat.Builder(
                    context).setSmallIcon(iconSmall).setLargeIcon(bm)
                    .setContentTitle(title).setContentText(message)
                    .setAutoCancel(false).setContentIntent(intent).setWhen(when)
                    .setTicker(message);
             builder.getNotification(); 
```

# video - 从 Videos 文件夹播放 .mov 视频时出错（使用 MediaElement）

> ID：14054345
> 
> 赞同：0
> 
> 时间：2012-12-27T11:59:53.257
> 
> 标签：video, windows-8, quicktime, mediaelement, mov

**我在尝试什么？**

我正在尝试从视频库中加载一个快速电影，如下所示：

```
async void SetupVideoAsyncAndPlay() {
    StorageFolder folder = 
               await KnownFolders.VideosLibrary.GetFolderAsync("Video Folder");
    StorageFile file = await folder.GetFileAsync("test_video.mov");

    // Ensure a file was selected
    if (file != null) {
        var fileStream = 
                await file.OpenAsync(Windows.Storage.FileAccessMode.ReadWrite);

        Video.SetSource(fileStream, file.ContentType);
        Video.Play();
    }
} 
```

**我尝试了什么？**

经过大量的挖掘，我来到了这里。首先，我`Windows.Storage.FileAccessMode.ReadWrite`只有 Read 并且没有触发任何事件。现在，它会触发 MediaFailed 事件（使用 注册它`Video.MediaOpened += RightVideo_MediaOpened;`）

在 MediaFailed 事件中，我得到以下信息：

> 错误消息 =“MF_MEDIA_ENGINE_ERR_SRC_NOT_SUPPORTED：HRESULT - 0xC00D36C4”

因为我在 XAML 中声明了这个元素，所以我在可视树中有 MediaElement（可能的问题之一）。

此外，我尝试在没有文件流的情况下运行相同的视频（直接来自应用程序包）并且它可以工作。

此外，如果我用 Picker 替换 StorageFile/FileStream 代码，它可以工作：

```
FileOpenPicker openPicker = new FileOpenPicker();
openPicker.ViewMode = PickerViewMode.Thumbnail;
openPicker.FileTypeFilter.Add(".mov");
StorageFile file = await openPicker.PickSingleFileAsync();
var stream = await file.OpenAsync(Windows.Storage.FileAccessMode.Read); 
```

请注意，我在 Package.appmanifest 中为 Video 文件夹授予了权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:25:16.833

您何时调用 SetupVideoAsyncAndPlay？我记得有同样的问题，并通过确保 MediaElement 初始化仅在它被加载到 VisualTree 之后（在接收到 Loaded 事件之后）完成来解决它。

希望有帮助。

# mysql - 有没有办法改进这个查询？与自身连接子查询

> ID：14054346
> 
> 赞同：0
> 
> 时间：2012-12-27T11:59:56.000
> 
> 标签：mysql, wordpress, join, subquery

我正在使用 Wordpress 和 MySQL，我有以下查询

```
SELECT COUNT(p.ID)
FROM wp_posts AS p
    LEFT JOIN wp_postmeta AS t1
       ON t1.post_id = p.ID
         AND t1.meta_key = 'followers_count' 
    LEFT JOIN
       (SELECT tt.term_id,tr.object_id
        FROM wp_term_relationships AS tr
          INNER JOIN wp_term_taxonomy AS tt
             ON tt.term_taxonomy_id = tr.term_taxonomy_id
               AND tt.taxonomy='paises'
       ) as terms
         ON p.ID=terms.object_id 
    INNER JOIN
        (SELECT meta_value,tt.term_id
         FROM wp_postmeta AS t1 
          LEFT OUTER JOIN wp_term_relationships AS tr
             ON t1.post_id=tr.object_id
          INNER JOIN wp_term_taxonomy AS tt
             ON tt.term_taxonomy_id = tr.term_taxonomy_id
               AND tt.taxonomy='paises'
         WHERE t1.post_id = 80
            AND t1.meta_key = 'followers_count'
       ) AS f
          ON p.post_type='post'
             AND p.post_status='publish'
             AND t1.meta_value>f.meta_value
             AND terms.term_id=f.term_id 
```

基本上我在这里做的是从术语表中获取帖子国家，从 wp_postmeta 表中获取 follower_count。所以我们有 4 个连接表。

我想使用followers_count获得该帖子在指定国家/地区的排名，这是最后一个子查询。

它现在可以工作了，但我觉得它可以改进，因为我正在选择所有帖子及其对应的国家和追随者，然后我再次查询相同的表以从我选择的帖子中获取国家和追随者数量（在此为 80 case) 所以我将第一个查询限制在那个国家。

我尝试了临时表，但我不能在同一个查询中多次使用它，而且 MySQL 中不存在 CTE，所以我这样做了。

有没有办法改进这一点或缩小查询一点，而不是我想学习更多的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:55:41.880

如果您刚刚学习，那么我将从将所有子选择转换为连接开始。看一下“explain extended”的输出，看看优化器对这个查询做了什么——然后将它作为一系列连接重复。如果您不使用子选择，通常处理起来会更快、更容易。

几个参考：

[这里](https://stackoverflow.com/questions/2577174/join-vs-subquery)[和](https://stackoverflow.com/questions/4144645/rewriting-sql-to-joins-instead-of-subqueries?rq=1)
[这里](https://stackoverflow.com/questions/3856164/sql-joins-vs-sql-subqueries-performance?lq=1)

注意 - 这不是 100% 的规则 - 您的里程可能会有所不同。

# javascript - 如何访问我的页面在 jQuery 中的框架？

> ID：14054349
> 
> 赞同：1
> 
> 时间：2012-12-27T12:00:04.457
> 
> 标签：javascript, jquery, html, frame

> **可能重复：**
> [如何从 jQuery 访问框架（不是 iframe）内容](https://stackoverflow.com/questions/2921957/how-to-access-frame-not-iframe-contents-from-jquery)

所以，我试图在我的项目中使用一些 jquery，但我对 jQuery 部分有困难。

我想要做的是，我在内联网系统上有三个框架，顶部有一些链接，左框架有菜单，主框架有页面和其他所有内容。当该人单击菜单并开始浏览页面时，我想为该人提供一个选项隐藏左框架，因此页面会变大，这对可视化效果更好。

但是左框架加载了一个加载菜单的页面，我无法隐藏框架，导致按钮会隐藏它在页面上由具有框架的页面加载的框架。

我知道这很令人困惑，但我无法用英语更好地解释这一点。

那么，我可以使用框架中加载的页面上的按钮访问框架并将其隐藏吗？

我正在尝试这样做

```
<script type="text/javascript" language="JavaScript">
        $(document).ready(function(){   
             $("#btnTeste").click(function(){
                $("#menuFrame").hide();  
             }); 
        });
</script> 
```

但没有成功，因为框架不在页面上。无论如何，尝试将 parent 放在第二个参数上也无济于事。

希望你能帮助我，谢谢。

# jquery - 当我从 ajax.googleapis 应用 jquery.min.js 时，没有显示 jQuery 选项卡

> ID：14054358
> 
> 赞同：2
> 
> 时间：2012-12-27T12:01:02.393
> 
> 标签：jquery, html, ajax

我的标签有问题。在我包含之前`<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>`，选项卡正在显示，但现在 3 个表显示没有相应的选项卡。

请检查我下面的代码

**在我的头标签里面：**

```
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" type="text/css" href="css/userpage.css">

<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" media="all" /> 
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>  
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>  

<script>
$(function() {
    $( "#tabs" ).tabs();
});
</script> 

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>

<script type="text/javascript">
        function codeBinsAddEvent(obj,type,fn){
            if(obj.attachEvent){
                    if(type == "load"){
                        obj.attachEvent('on'+type, fn);
                    }
                    else{
                        obj.attachEvent('onreadystatechange', fn);
                    }
                    /*
                obj['e'+type+fn]=fn;
                obj[type+fn]=function(){
                    obj['e'+type+fn](window.event)}
                ;obj.attachEvent('on'+type,obj[type+fn])*/
             }
            else obj.addEventListener(type,fn,false)
        };
        function codeBinsAddLoadEvent(fn){
            codeBinsAddEvent(document.addEventListener&&!window.addEventListener?document:window,'load',fn)
        };
        function codeBinsAddReadyEvent(fn){
            codeBinsAddEvent(document,'DOMContentLoaded',fn)
        };   

     </script> 
```

**在我的身体标签中：**

```
<div id="tabs">
    <ul>
    <li><a href="#tabs-1">Students</a></li>
    <li><a href="#tabs-2">Subjects/a></li>
</ul>
<div id="tabs-1">   
<table id="mytable" cellspacing="0" summary="Students">
<tr>
<th scope="col" class="nobg"></th>
<th scope="col" abbr="Name">Name</th>
<th scope="col" abbr="Address">Address</th>
<th scope="col" abbr="Level">Level</th>
<th scope="col" abbr="School">School</th>
</tr>
<?php
// Start looping table row
while ($row = mysql_fetch_array($result)) {

        $firstname = $row["Firstname"];
            $middlename = $row["Middlename"];
            $lastname = $row["Lastname"];
            $address = $row["Address"];
    $level = $row["LevelName"];
    $school = $row["SchoolName"];

?>
<tr>
<td><input name="checkbox" type="checkbox" /></td>
<td class="spec"><?php echo $lastname.", ".$firstname. " " .substr($middlename, 0,1) . "." ; ?>   </td>
<td><?php echo $address; ?></td>
<td><?php echo $level; ?></td>
<td><?php echo $school; ?></td>
</tr>
<?php
// Exit looping 
}
?>
</table>

</div> <!-- end of tabs1 -->

<div id="tabs-2">

<table id="mytable" cellspacing="0" summary="Subjects">
<tr>
<th scope="col" class="nobg"></th>
<th scope="col" abbr="Code">Subject Code</th>
<th scope="col" abbr="Name">Subject Name</th>
<th scope="col" abbr="Description">Description</th>
<th scope="col" abbr="Unit">Unit</th>
</tr>

<?php

$result2 = mysql_query($sql);  

if($result2 === FALSE) {
die(mysql_error()); // TODO: better error handling
} 

// Start looping table row
while ($row2 = mysql_fetch_array($result2)) {

        $code = $row2["Code"];
    $Name = $row2["Name"];
    $description = $row2["Description"];
            $unit = $row2["Unit"];

?>

<tr>
<td><input name="checkbox" type="checkbox"/></td>
<td class="spec"><?php echo $code; ?>    </td>
<td><?php echo $name; ?></td>
<td><?php echo $description; ?></td>
<td><?php echo $unit; ?></td>
</tr>

<?php
// Exit looping
}

?>

</table>

</div> <!-- end of tabs2  --> 
```

当我添加这个时：

```
<script type="text/javascript">
        function codeBinsAddEvent(obj,type,fn){
            if(obj.attachEvent){
                    if(type == "load"){
                        obj.attachEvent('on'+type, fn);
                    }
                    else{
                        obj.attachEvent('onreadystatechange', fn);
                    }
                    /*
                obj['e'+type+fn]=fn;
                obj[type+fn]=function(){
                    obj['e'+type+fn](window.event)}
                ;obj.attachEvent('on'+type,obj[type+fn])*/
             }
            else obj.addEventListener(type,fn,false)
        };
        function codeBinsAddLoadEvent(fn){
            codeBinsAddEvent(document.addEventListener&&!window.addEventListener?document:window,'load',fn)
        };
        function codeBinsAddReadyEvent(fn){
            codeBinsAddEvent(document,'DOMContentLoaded',fn)
        };   

     </script> 
```

它不允许标签显示。怎么了？请帮忙谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:06:39.400

您包含 jQuery 两次，因此在第二次包含时，jQuery UI 选项卡将被删除。

删除这一行：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script> 
```

如果您想包含缩小版本，请将第一个 URL 更改为：

```
http://code.jquery.com/jquery-1.8.3.min.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:13:13.877

您正在尝试使用多个版本的 jQuery，这会导致错误。

如果您想使用缩小版，请选择

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js" ></script> 
```

# c++ - 如何在 C++ 中调用外部模板函数

> ID：14054359
> 
> 赞同：1
> 
> 时间：2012-12-27T12:01:11.243
> 
> 标签：c++, templates, extern

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

我在函数 main 中编写了一个模板函数和 int 类型的调用：

```
template <class T> T max (T a, T b) {    }
int main() {
    max(1,2);
} 
```

正如大多数 C++ 书籍所说，该`int max(int,int)`函数将在编译器满足`max(1,2)`.

但是在另一个文件中，我写了 的声明`int max(int,int)`并调用它，但是编译器（实际上是链接器）捕获了一个错误，说`max(int,int)`找不到引用。

```
extern int max(int,int);
max(1,2);    // Error:undefined reference to max(int,int) 
```

那么，有什么问题，以及如何使用 extern 而不是头文件声明来调用 max(int,int) 函数。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:04:03.050

这个问题只回答了几千次。简短的形式是：您必须安排模板定义在使用时可见，以便编译器可以隐式实例化函数模板，或者您必须显式实例化函数模板。

请注意，该声明声明了一个以两个作为参数`extern int max(int, int);`的非模板函数。函数模板永远不会满足这个引用，无论它是否被实例化。`max()``int`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:12:26.203

`extern int max(int,int);`声明一个非模板函数。它与模板不匹配，即使该模板已在您的其他文件中可见。

正确的方法是将模板放在头文件中，并在使用该函数的任何地方都包含该模板（或者，甚至更好的是，使用`max`标准库中已有的模板）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:29:24.203

当您声明时，`extern int max(int, int)`您告诉编译器在某处定义了具有此签名的函数，不一定在同一个翻译单元中。`extern`实际上是多余的，因为函数默认具有外部链接。

现在，您似乎认为此声明为模板函数的实例化提供了定义，其中 T = int。它没有，两者没有任何关系。当编译器搜索调用的候选者时，普通函数优先于函数模板`max(1,2)`。当它找到声明`int max(int, int)`时，它是一个完美的匹配并且它的工作已经完成——它甚至从不尝试实例化模板。编译完成后，链接器应该找到定义，并且由于您没有提供它，您会得到一个未定义的引用。

所以你可以写一个定义

```
int max(int, int) { } 
```

或明确告诉编译器使用模板

```
max<int>(1,2); 
```

您还可以将模板*专门*`int`用于类型

```
template<>
int max<int>(int, int) { }; 
```

但请注意，如果您保留正常功能，它仍然是一个更好的匹配。

# android - 如何将填充分配给 Listview 项目分隔线

> ID：14054364
> 
> 赞同：76
> 
> 时间：2012-12-27T12:01:31.470
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/1da828e731e2a423d37d7e7826bac085.png)

如图所示，如何为列表项提供填充。我想在布局中制作分隔线，如图所示。

这是我的列表片段代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" 
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_marginLeft="25dp"
android:layout_marginRight="25dp">

 <ListView 
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
     android:id="@+id/listV_main"
    android:layout_marginLeft="25dp"
android:layout_marginRight="25dp"/> 
```

这是我的列表部分代码

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:paddingLeft="10dp"
android:paddingTop="10dp"
android:paddingRight="10dp"
android:paddingBottom="10dp">
<include
    android:id="@+id/list_item_section_text"
    layout="@android:layout/preference_category"
     /> 
```

这是我的列表项代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:minHeight="?android:attr/listPreferredItemHeight"
android:adjustViewBounds="true"
android:paddingRight="?android:attr/scrollbarSize"
   >
<ImageView
    android:id="@+id/showlist_item_entry_drawable"
    android:layout_width="82dp"
    android:adjustViewBounds="true"
    android:layout_height="68dp"
    android:scaleType="fitXY"
    android:paddingLeft="9dp"/> 
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="6dip"
    android:layout_marginTop="6dip"
    android:layout_marginBottom="6dip"
    android:layout_weight="1"
>
    <TextView android:id="@+id/list_item_entry_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:ellipsize="marquee"
        android:fadingEdge="horizontal" /> 
    <TextView android:id="@+id/list_item_entry_summary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/list_item_entry_title"
        android:layout_alignLeft="@id/list_item_entry_title"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:singleLine="true"
        android:textColor="?android:attr/textColorSecondary" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2013-05-27T07:57:57.840

使用**'插入'** ......

(list_divider.xml)

```
<?xml version="1.0" encoding="UTF-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:insetLeft="50dp"
    android:insetRight="50dp" >

 <shape>
    <solid android:color="@color/orange" />
    <corners android:radius="2.0dip" />
</shape>

</inset> 
```

并在您的列表视图中添加这样的...

```
<ListView
    android:dividerHeight="2dp"
    android:divider="@drawable/list_divider"
    ...
/> 
```

您可以根据需要设置插入值...

**更新**

正如@Giulio Piancastelli 所指出的，如果列表容器的背景与列表项的背景不同，那么您可以使用**'layer-list'** ...

(list_divider.xml)

```
 <?xml version="1.0" encoding="utf-8"?>
  <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >  
   <item>
        <shape android:shape="rectangle" >
            <solid android:color="@color/list_background" />
        </shape>
    </item>

    <item
        android:left="10dp"
        android:right="10dp">
        <shape android:shape="rectangle" >
            <solid android:color="@color/divider_color"/>
        </shape>
    </item>

        </layer-list> 
```

并在您的列表视图中添加这样的...

```
<ListView
    android:dividerHeight="2dp"
    android:divider="@drawable/list_divider"
    ...
/> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-27T12:21:20.000

您需要分隔线的填充物吗？创建您的自定义可绘制形状：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:left="10dp"
        android:right="10dp">
        <shape android:shape="rectangle" >
            <solid android:color="@android:color/black" />
        </shape>
    </item>

</layer-list> 
```

并在 xml 中设置为 ListView 的分隔符：

```
<ListView
    android:dividerHeight="2dp"
    android:divider="@drawable/custom_divider"
    ...
/> 
```

**UPD**

我只有`ListView`在xml中：

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/list"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:dividerHeight="2dp"
android:divider="@drawable/line"
/> 
```

分频器`line.xml`如`drawable`：

```
<?xml version="1.0" encoding="utf-8"?>
    <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
        <item
        android:left="10dp"
        android:right="10dp">
        <shape android:shape="rectangle" >
            <solid android:color="@android:color/black" />
        </shape>
    </item>
</layer-list> 
```

不要对`ListView`in 代码进行任何修改。如果资源构建错误，您可以尝试使用*Clean 。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-24T04:54:01.830

正如@ASP答案下提到的@Giulio Piancastelli，`<inset>`当列表容器的背景颜色与列表中的行不同时，失败。一种解决方案是使用`<layer-list>`如下：

```
//This item is to overlay the container colour with the row background colour
<item
    android:left="0dp"
    android:right="0dp">
    <shape android:shape="rectangle" >
        <solid android:color="@color/row_background" />
    </shape>
</item>

//This item is the divider, put it at bottom so it will overlay the background colour
<item
    android:left="92dp"
    android:right="0dp">
    <shape android:shape="rectangle" >
        <solid android:color="@color/divider
    </shape>
</item> 
```

然后，您可以将其设置为大多数答案所建议的分隔符：

```
<ListView
    android:dividerHeight="2dp"
    android:divider="@drawable/layer_list"
    ...
/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:08:30.803

在您的列表项中，将 paddingtop 设置为主布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
   android:padding="10dp"
   ....// Remaining fields
>
... //Remaining items
</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-18T07:18:03.173

这应该是这个问题的替代解决方案：

```
<View 
   android:layout_width="match_parent"
   android:layout_height="1dp"
   android:layout_alignParentBottom="true"
   android:background="color/secondary_text"
   android:layout_marginTop="16dp" /> 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-12-27T12:09:41.617

设置您的列表项分隔线高度和颜色：

```
<ListView 
android:layout_height="wrap_content"
android:layout_width="fill_parent"
android:id="@+id/listV_main"
android:layout_marginLeft="25dp"
android:layout_marginRight="25dp"
android:divider="@android:color/darker_gray"
android:dividerHeight="1dp"/> 
```

# ruby-on-rails - 如何在这个多对多关联中使用 counter_cache？

> ID：14054366
> 
> 赞同：1
> 
> 时间：2012-12-27T12:01:35.543
> 
> 标签：ruby-on-rails, many-to-many

我在 a和模型`many-to-many`之间有关联：`Post``Tag`

**post.rb:**

```
 has_many :taggings, dependent: :destroy  
 has_many :tags, through: :taggings 
```

**标签.rb：**

```
has_many :taggings, :dependent => :destroy  
has_many :posts, :through => :taggings 
```

**标记：**

```
attr_accessible :tag_id, :post_id

belongs_to :post
belongs_to :tag 
```

我想要一个页面，在其中列出所有标签以及每个标签有多少帖子。

所以我`posts_count`在标签中添加了一列：

```
 create_table "tags", :force => true do |t|
    t.string   "name"
    t.datetime "created_at",                 :null => false
    t.datetime "updated_at",                 :null => false
    t.integer  "posts_count", :default => 0, :null => false
  end 
```

我以前使用过计数器缓存：

**回复.rb：**

```
 belongs_to :post, :counter_cache => true 
```

但我不确定如何与这个`many-to-many`协会合作。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:21:50.967

对标签使用常见的 :counter_cache 选项。尽管它计算了 Taggings 对象，它属于（仅一个）帖子，但这正是您要寻找的。

```
# tagging:

attr_accessible :tag_id, :post_id

belongs_to :post
belongs_to :tag, :counter_cache => :posts_count

validates_uniqueness_of :tag_id, :scope => :post_id 
```

Validator 将防止为相同的帖子创建多个相同的标签，因此您可以避免重复记录。

# excel - 64 位 Windows 7 上的 Excel 2003 自动更改对 SysWOW64\MSCOMCTL.OCX 的引用，因此 32 位 Excel 抱怨

> ID：14054371
> 
> 赞同：3
> 
> 时间：2012-12-27T12:01:59.177
> 
> 标签：excel, vba, 64-bit, ocx

在 Excel 2003 VBA 项目中，我使用的是 MSCOMCTL.OCX 中的控件。那就是 VBA 项目有对 System32\MSCOMCTL.OCX 的引用。

当我在 64 位 Windows 7 系统上的 Excel 2003 中打开该项目时，Excel 会自动更改对 SysWOW64\MSCOMCTL.OCX 的引用（这是正确的位置）。

但是，当我将该项目发送给使用 32 位 Windows XP 的客户时，该项目在打开过程中会报错，因为他的系统上不存在 SysWOW64\MSCOMCTL.OCX。

以下是我到目前为止提出的（不令人满意的）解决方案：

1.  指示客户端手动将引用更改回其系统上的正确位置 (System32\MSCOMCTL.OCX)。

    *   这实际上不起作用，原因如下：
        1.  当 Excel 2003 32 位打开工作表并且找不到对 MSCOMCTL 的引用时，它会从表单中删除来自库（例如 TreeCtrl）的所有控件:-(
        2.  客户正在为这个程序而苦苦挣扎，这对他来说非常麻烦。
2.  使用 VBA 的 VBProject.References.AddFromFile/AddFromGuid 自动更正引用。
    *   与上述相同的问题：当打开工作簿时编译 VBA 失败时，Excel 将删除从表单中找不到的所有控件。
3.  自动添加引用（如 2.）并在运行时使用动态绑定添加所有相关控件。
    *   这实际上可以工作，但是目前我正在努力将事件处理程序绑定到控件（但这将是一个单独的问题;-)

方法 1\. 和 2\. 并没有真正解决任何问题，解决方案 3 需要大量工作。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:28:25.103

如果您在工作簿关闭时自动关闭引用会怎样？这样，当工作簿打开时，引用就不会被“破坏”，并且您的所有控制都应该是好的。

IE ：

```
Private Sub Workbook_Open()
'use environ variable for folder locs
If os = "64bit" Then
    Me.VBProject.References.AddFromFile ("C:\WINDOWS\SysWOW64\MSCOMCTL.OCX")
Else
    Me.VBProject.References.AddFromFile ("C:\WINDOWS\system32\MSCOMCTL.OCX")
End If
End Sub

Private Sub Workbook_BeforeClose(Cancel As Boolean)
    For Each ref In Me.VBProject.References
       If ref.Name = "MSComctlLib" Then
        Me.VBProject.References.Remove ref
       End If
        Next ref
End Sub 
```

我对 ADODB dll 进行了快速测试，它似乎可以工作，但我不确定您是如何具体使用该 DLL 的；让我知道这是否有效！当然比选项3好很多！

# jquery-plugins - 使用 jquery-backstrech 自动调整整页背景图像的大小

> ID：14054376
> 
> 赞同：0
> 
> 时间：2012-12-27T12:02:32.780
> 
> 标签：jquery-plugins, background, slideshow, fullscreen, jquery-backstretch

我如何修改此插件[http://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)以在调整窗口大小时自动保持背景比例，如[http://css-tricks.com/examples/FullPageBackgroundImage/css-1。 .php](http://css-tricks.com/examples/FullPageBackgroundImage/css-1.php) _

> 我喜欢“backstrech”中的平滑淡入淡出效果，我想保留这个插件，但如果有人有更好的插件来实现我正在寻找的图像之间的平滑效果。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:26:53.423

尝试将其添加到您的 Css 文件中

```
html {
background: url(../img/pattern.png) fixed, url(../img/background-image.jpg) 50% 50% fixed no-repeat;
-moz-background-size: auto, cover; /* Firefox 3.6 */ 
background-size: auto, cover; /* Chrome, Firefox 4.0+, Safari 4.1+, Opera 10+ and IE9 */ 
```

}

# java - 简单示例：HBase + Spring

> ID：14054378
> 
> 赞同：2
> 
> 时间：2012-12-27T12:02:47.337
> 
> 标签：java, spring, hadoop, hbase

我找了一个简单的例子：HBase+Spring。我阅读了一些关于 hbase 配置的文档和文章。我配置了 HBase 服务器，现在我想创建客户端。我知道 spring 为使用 Hbase 提供了 HbaseTemplate 什么。也许有人有一个完整的例子？我需要简单的操作，例如 put、get、delete。我会很高兴看到任何工作示例。感谢和抱歉英语不好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:56:09.837

您可以在 github 中查看 spring-hadoop 示例，特别是 spring-hadoop-samples/original-samples/hbase-crud 中的文件。存储库位于[https://github.com/SpringSource/spring-hadoop-samples](https://github.com/SpringSource/spring-hadoop-samples)

希望这对您有所帮助。祝你好运！

# html - 如何嵌入这个 Flash 播放器？

> ID：14054379
> 
> 赞同：0
> 
> 时间：2012-12-27T12:02:47.267
> 
> 标签：html, flash, iframe, embed

我需要使用 Flash 中的播放器嵌入 m3u8 http 直播流 (HLS)。我必须嵌入这个网址：[http://osmfhls.kutu.ru/static/swf/StrobeMediaPlayback.swf?src=http://188.165.228.216:51935/mariorossi/DMAX/-156850092_quicklive/playlist.m3u8&plugin_m3u8=http： //osmfhls.kutu.ru/static/swf/OSMFHLSPlugin.swf&autoPlay=true&controlBarAutoHide=false](http://osmfhls.kutu.ru/static/swf/StrobeMediaPlayback.swf?src=http://188.165.228.216:51935/mariorossi/DMAX/-156850092_quicklive/playlist.m3u8&plugin_m3u8=http://osmfhls.kutu.ru/static/swf/OSMFHLSPlugin.swf&autoPlay=true&controlBarAutoHide=false)在 html 页面中。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:16:59.180

使用 iframe：

```
<html>
<head>

</head>
<body>
    <iframe src="http://osmfhls.kutu.ru/static/swf/StrobeMediaPlayback.swf?src=http://188.165.228.216:51935/mariorossi/DMAX/-156850092_quicklive/playlist.m3u8&plugin_m3u8=http://osmfhls.kutu.ru/static/swf/OSMFHLSPlugin.swf&autoPlay=true&controlBarAutoHide=false" />
</body>
</html> 
```

# delphi - 什么会在 Windows 8 和 Delphi XE3 上的 SQL Server 的 ADO 中导致“光标操作冲突”错误？

> ID：14054381
> 
> 赞同：2
> 
> 时间：2012-12-27T12:02:52.430
> 
> 标签：delphi, delphi-xe3, tadodataset

我在 Windows 8 上使用 Embarcadero Delphi XE3，并尝试连接 SQL Server 2000。

当我在 Windows 7 上使用 Delphi 2007 时，我的程序曾经可以正常工作，但现在每当我进行事务（更新、插入、删除）时，它都会给我一条错误消息，说明`"Cursor Operation Conflict"`并继续工作（提交事务）。

我`TADOConnection`用来连接服务器，我`TADODataSet`用来做交易。我使用`TADODataSet.Insert`///进行交易`TADODataSet.Edit`。`TADODataSet.Post``TADODataSet.Delete`

我无法从代码中发布任何内容，因为这是一般问题。

我想知道是什么可能导致此错误能够调试我的代码并确保我没有做错任何事情......

该错误仅在我`clUseServer`在`TADODataSet.CursorLocation`属性中使用时出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-19T12:36:58.453

我在使用一些 VB6 代码时遇到了同样的错误，甚至在我使用断开连接的 adodb.recordset 时发生了

我的解决方案是为我的记录集创建一个完全独立的连接（到同一台服务器），这似乎解决了我的问题

我对delphi不太了解，但我认为它*可能*会有所帮助

# pdf - PDF 文件开始下载

> ID：14054383
> 
> 赞同：-3
> 
> 时间：2012-12-27T12:02:57.683
> 
> 标签：pdf

我正在提供指向 pdf 文件的链接，但它开始下载文件而不是打开它

```
<a href="media/complains.pdf">Complains</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:03:58.200

可能是您的浏览器上没有安装 pdf 阅读器插件。

# ruby-on-rails - 将 MongoDB 中的 _id 类型更改为整数是否不好？

> ID：14054384
> 
> 赞同：32
> 
> 时间：2012-12-27T12:03:00.787
> 
> 标签：ruby-on-rails, mongodb, mongoid

MongoDB 使用 ObjectId 类型作为 _id。

如果我将 _id 设为递增整数会不会很糟糕？

（有[这个](https://github.com/goncalossilva/mongoid-sequence)宝石，如果你有兴趣）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-27T16:52:49.060

不，它一点也不差，事实上内置在`ObjectId`索引中相当大，所以如果你相信你有更好的东西，那么你非常欢迎将`_id`字段的默认值更改为任何值。

*但是*，这是一个很大的问题，在决定远离默认公式时，有一些考虑因素`ObjectId`，特别是在使用自动递增 _ids 时，如下所示：[https ://docs.mongodb.com/v3.0/tutorial/创建自动递增字段](https://docs.mongodb.com/v3.0/tutorial/create-an-auto-incrementing-field)

多线程并不是一个大问题，因为`findAndModify`原子锁实际上可以解决这个问题，但是你只是遇到了第一个问题。`findAndModify`不是最快的功能，也不是最轻的功能，经常使用它时性能明显下降。

无论如何，您还必须考虑自己执行此操作的开销，即使没有`findAndModify`. 对于每个插入，您都需要一个额外的查询。想象一下，有一个唯一的 id，您必须在每次要插入时查询其唯一性。最终，您的插入率将下降到爬行，并且您的锁定时间将增加。

当然，`ObjectId`它真的很擅长保持唯一性，而不必在插入之前通过触摸数据库来检查或制定自己的唯一性，因此它没有这种开销。

如果您仍然觉得整数 _id 适合您的场景，那么就去做吧，但请记住上面描述的开销。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-27T13:36:02.947

你可以这样做，但你有责任确保整数是唯一的。

MongoDB 不像大多数 SQL 数据库那样支持自增字段。当您的分布式或多线程应用程序具有多个创建新数据库条目的进程和/或线程时，您必须确保它们使用相同的计数器。否则可能会发生两个线程尝试在数据库中存储具有相同 _id 的文档。

当这种情况发生时，其中一个将失败。这意味着您必须等待数据库返回成功或错误（通过调用 GetLastError 或通过将写入问题设置为*确认*），这比仅以即发即弃的方式发送数据需要更长的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-26T02:41:34.933

我有一个用例：将 _id 替换为 64 位整数，该整数表示用于搜索的文档索引的 simhash。

由于我打算“获取或创建”，因此提供初始 simhash，并在不存在的情况下创建新记录是完美的。此外，对于任何在谷歌上搜索的人，MongoDB 支持向我解释说，simhashes 绝对适合分片和缩放，甚至比更通用的 ObjectId 更好，因为它们将完美地和内在地跨分片划分数据，并且您可以获得存储的密钥负空间（uint64 比 objectId 小得多，无论如何都需要存储）。

此外，对于您的 Google 员工来说，用 objectId 以外的其他东西替换 MongoDB _id 绝对简单：只需创建一个定义了 _id 的对象；如果您愿意，请使用整数。就是这样：Mongo 将简单地使用它。如果您尝试创建具有相同 _id 的文档，您将收到错误消息（E11000/重复键）。所以像我一样，如果你使用 simhashing，这在所有方面都是理想的。

# javascript - 如何在 javascript 中启用或禁用 asp.net 验证器

> ID：14054386
> 
> 赞同：1
> 
> 时间：2012-12-27T12:03:07.687
> 
> 标签：javascript, asp.net, validation

我只想启用/禁用验证不想解雇他们。等待reply.thanks提前。

ValidatorEnable(document.getElementById("")); 此功能启用验证器并执行验证...我不想要验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:04:43.423

您可以使用

```
ValidatorEnable(document.getElementById("ValidatorControlID"), false); 
```

禁用验证器。

# jquery - JSONP 的 getJSON 回调有什么意义？

> ID：14054392
> 
> 赞同：4
> 
> 时间：2012-12-27T12:03:34.490
> 
> 标签：jquery, ajax, json, jsonp, getjson

我只是想知道如果我使用 JSONP，在 jQuery 的 getJSON 函数中是否有一个回调函数成功。

从文档中：

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

```
jQuery.getJSON( url [, data] [, success(data, textStatus, jqXHR)] ) 
```

“成功”功能在成功的 JSON 响应后触发。

但是，如果我们在 JSONP 响应中使用函数回调的 JSONP，是否需要“成功”函数？

我猜不是，但我在页面上找不到任何信息来确认它。如果有理由使用“成功”功能，我只是不想忽视某种安全问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:12:35.627

jQuery 自动在全局窗口对象上设置自己的回调函数（使用自动生成的名称）并替换“？” 在“回调=？” 与函数的名称。该回调函数调用你的。

这意味着您可以只将匿名函数传递给 jQuery，而不必确保您不会两次使用相同的函数名称，就像使用 jQuery 的普通 AJAX 请求一样。

[来自jQuery.ajax() 文档](http://api.jquery.com/jQuery.ajax/)的相关引用：

> 最好让 jQuery 生成一个唯一的名称，因为这样可以更轻松地管理请求并提供回调和错误处理。当您想要启用更好的 GET 请求浏览器缓存时，您可能需要指定回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:13:02.167

当然，您不必使用成功回调，但我可以想到一个很好的用途——单一职责。

通过 JSONP url 传递的回调函数应该只处理解析 JSON 和动态更改页面，而 jQuery 的成功回调可用于执行与请求本身相关的其他任务，而不是与接收到的数据相关的任务。

# session - 在 Chrome 中删除的 Cookie 和会话

> ID：14054395
> 
> 赞同：1
> 
> 时间：2012-12-27T12:03:47.170
> 
> 标签：session, cookies

我的会话和 Cookie 遇到问题。我有一个登录页面，我在其中创建了一个会话和 cookie。重定向到另一个页面后，我的所有会话和 cookie 都会在 Chrome 中删除，但在其他操作中不会发生。

我在日志中看到的一些内容：

1.  在 chrome 中，我可以看到代码在此过程中再次访问 Global.asax.cs 中的 Session_Start 事件，但在 IE 中，它在开始时仅访问该事件一次。
2.  另一件事是，我们的登录页面与其他页面不同，它不继承 MasterPage，但我重定向到的页面确实继承了母版页。
3.  这可能是我们的负载均衡器在服务器之间的不同步吗？

# c# - 使用 BitmapImage.Create 从图像的一部分创建位图

> ID：14054402
> 
> 赞同：0
> 
> 时间：2012-12-27T12:04:10.213
> 
> 标签：c#, image

背景：

我正在使用一个外部（非托管）API，它将为我渲染图像并将图像的内存位置（以及步幅等）传回。此 API 尚未完全开发，因此我暂时尝试模拟该行为。

任务：

我正在尝试从在非托管代码中创建的图像的一部分创建图像。例如，我想创建一个仅包含图像右半部分的 BitmapSource。

为了模拟这一点，我在内存中创建了一个图像：

```
 Bitmap logo = Properties.Resources.test2;
 BitmapData bmpData =
            logo.LockBits(new System.Drawing.Rectangle(0, 0, 970, 844), System.Drawing.Imaging.ImageLockMode.ReadWrite, logo.PixelFormat); 
```

现在我可以得到内存中图像的起点

```
IntPtr startOfImage = bmpData.Scan0; 
```

为了获得图像的右侧，我没有成功尝试（假设图像尺寸为 970*844 且 Pixelformat 为 24bit RGB）：

```
 IntPtr locationOfImage = bmpData.Scan0 += bmpData.Stride / 2 ;

 BitmapSource source = BitmapImage.Create(485, 844, 96, 96, System.Windows.Media.PixelFormats.Rgb24, null, locationOfImage, 844 * bmpData.Stride / 2, bmpData.Stride / 2); 
```

但是，这不可能是给我图像的右手边，我错过了什么？

最好的祝福

丹尼尔

编辑：

很明显，这并没有返回图像的右侧，因为仅在第一行我跳过了一半的步幅。是否有可能在总是跳过部分字节的同时创建图像（例如，每行都有一个跳过值，跳过部分行）？

显然，我也可以首先将所有必要的字节读入一个数组并传递它而不是 IntPtr，但是能够直接传递该位置会很好。

# objective-c - UIScrollView 子视图中的水平 UISwipeGestureRecognizer ？（UIScrollView 只需要识别垂直滚动）

> ID：14054403
> 
> 赞同：3
> 
> 时间：2012-12-27T12:04:10.927
> 
> 标签：objective-c, ios, uiscrollview, uigesturerecognizer

我有一个 UIScrollView，我在其中添加了一个子视图。滚动视图可以很好地垂直滚动，这就是它应该做的。我现在想在 UISwipeGestureRecognizer 的帮助下识别子视图中的左/右滑动。我知道这是可能的，但我还没有找到解决方案，而且几次尝试都没有成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T12:46:23.437

试试这些：

*   设置你的代表`UIGestureRecognizer`和

*   实施`shouldRecognizeSimultaneouslyWithGestureRecognizer`：

    ```
    -(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
    return YES;
    } 
    ```

*   实施`shouldReceiveTouch`：

    ```
    - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
    {
     return YES;
    } 
    ```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T22:06:04.707

我能够使用新的 iOS 7 UIGestureRecognizerDelegate 方法完成一些相关的事情（直接在滚动视图上添加两指滑动手势识别器）：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer
        shouldBeRequiredToFailByGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return otherGestureRecognizer == scrollView.panGestureRecognizer;
} 
```

然而，结果并不完美——等待滑动手势识别器失败的延迟首先导致滚动视图的平移手势识别器延迟，因此当您开始滚动时，正常滚动明显延迟。

# python - pyamf，0.6.1，内存泄漏

> ID：14054408
> 
> 赞同：1
> 
> 时间：2012-12-27T12:04:31.437
> 
> 标签：python, memory-leaks, web2py, pyamf

在服务器使用 PyAMF 增加内存使用量之后，经过几个小时的挖掘，我注意到原因是 easy_install 安装的 0.6.1 版本的 pyamf 库。此错误发生在 Ubuntu 12.04 上：64 位和 32 位版本。以下是该`valgrind massif`工具的报告。

```
--------------------------------------------------------------------------------
Command:            python build_web/web2py.py -a root --minthreads=1 --maxthreads=1 --nogui
Massif arguments:   --depth=50
ms_print arguments: massif.out.492
--------------------------------------------------------------------------------

    MB
31.69^                                                                       #
 |                                                                  @@::@#
 |                                                     @@    :@:::::@ : @#
 |                                                ::: :@ :::::@: :: @ : @#
 |                                       :   ::::::: ::@ : : :@: :: @ : @#
 |                                       ::::::: ::: ::@ : : :@: :: @ : @#
 |                                       ::: ::: ::: ::@ : : :@: :: @ : @#
 |                           ::::@::@::::::: ::: ::: ::@ : : :@: :: @ : @#
 |                     ::::::: : @: @::: ::: ::: ::: ::@ : : :@: :: @ : @#
 |                 :@@::: :: : : @: @::: ::: ::: ::: ::@ : : :@: :: @ : @#
 |      ::::::::::::@ ::: :: : : @: @::: ::: ::: ::: ::@ : : :@: :: @ : @#
 |      :: ::: ::: :@ ::: :: : : @: @::: ::: ::: ::: ::@ : : :@: :: @ : @#
 | ::::::: ::: ::: :@ ::: :: : : @: @::: ::: ::: ::: ::@ : : :@: :: @ : @#
 | :: : :: ::: ::: :@ ::: :: : : @: @::: ::: ::: ::: ::@ : : :@: :: @ : @#
 | :: : :: ::: ::: :@ ::: :: : : @: @::: ::: ::: ::: ::@ : : :@: :: @ : @#
 | :: : :: ::: ::: :@ ::: :: : : @: @::: ::: ::: ::: ::@ : : :@: :: @ : @#
 | :: : :: ::: ::: :@ ::: :: : : @: @::: ::: ::: ::: ::@ : : :@: :: @ : @#
 | :: : :: ::: ::: :@ ::: :: : : @: @::: ::: ::: ::: ::@ : : :@: :: @ : @#
 | :: : :: ::: ::: :@ ::: :: : : @: @::: ::: ::: ::: ::@ : : :@: :: @ : @#
 | :: : :: ::: ::: :@ ::: :: : : @: @::: ::: ::: ::: ::@ : : :@: :: @ : @#
0+----------------------------------------------------------------------->Ti
 0                                                                   2.678 
```

在我的情况下，解决方案是`cpyamf`使用 pip 使用或安装 pyamf 包`pip install pyamf`，因为这个命令也安装`cpyamf`并且`__init.py__`包含条件导入，即

```
try:
    from cpyamf import amf3
except ImportError:
    from pyamf import amf3 
```

你能给我解释发生了什么吗？

# python - Python 和 SQL 批量插入

> ID：14054411
> 
> 赞同：4
> 
> 时间：2012-12-27T12:04:40.577
> 
> 标签：python, .net, sql-server, ironpython, sqlbulkcopy

我正在使用 IronPython 创建一个数据数组，我需要将此数组插入 MS SQL Server。我正在使用的 .Net 类是 SqlBulkCopy（System.Data.SqlClient 的一部分）。

我[从列表中发现这篇 StackOverflow 文章非常有用 SqlBulkCopy](https://stackoverflow.com/questions/3913371/sqlbulkcopy-from-a-list)

但是，由于我才刚刚开始学习 python，所以我很难用 Python 代码重新创建这个 C# 示例。

这是我到目前为止所拥有的

```
import clr
clr.AddReference('System.Data')
from System.Data import *

import clr
clr.AddReference('System')
from System import *

sqlDbConnection = SqlClient.SqlConnection("<my-db-connection-string>")
sqlDbConnection.Open()

myDataArray = [
[Byte(7), Byte(8), Int32(1), Byte(15), Byte(12), Single(0.34324)],
[Byte(5), Byte(1), Int32(2), Byte(11), Byte(10), Single(0.77362)],
[Byte(9), Byte(2), Int32(3), Byte(12), Byte(9), Single(0.93394)]]

sqlDbConnection.Close() 
```

这个想法是生成一个大型数据数组（比如> 100万行）并使用批量复制方法将其导入我的表中。如果有人能对此有所了解并解释我如何解决这个问题以及如何利用批量复制类附带的所有选项，我将不胜感激。[SqlBulkCopy msdn 参考](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)

我一直在寻找 Python 中有用的示例，但到目前为止还没有找到...

非常感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:54:55.150

终于明白了这一点，希望这对您有所帮助：

```
import clr
clr.AddReference('System.Data')
from System.Data import SqlClient
from System.Data import *
from System.Data import DataTable

import clr
clr.AddReference('System')
from System import *
from System import Console
from System import Data

sqlConnectionString = "<sql-connection-string>"
sqlDbConnection = SqlClient.SqlConnection(sqlConnectionString)
sqlDbConnection.Open()

workTable = DataTable()
workTable.Columns.Add("Col1", Byte)
workTable.Columns.Add("Col2",Byte)
workTable.Columns.Add("Col3", Int32)
workTable.Columns.Add("Col4", Byte)
workTable.Columns.Add("Col5", Byte)
workTable.Columns.Add("Col6", Single)

sampleArray = [Byte(7), Byte(8), Int32(1), Byte(15), Byte(12), Single(0.34324)] 
for i in range (0, 189000) :
  workTable.Rows.Add(Array[object](sampleArray))

cmd = SqlClient.SqlCommand("truncate table dbo.MyTable", sqlDbConnection);
def bulkLoadEsgData (): 
    sbc = SqlClient.SqlBulkCopy(sqlConnectionString, SqlClient.SqlBulkCopyOptions.TableLock, BulkCopyTimeout=0, DestinationTableName="dbo.MyTable")
    sbc.WriteToServer(workTable)

# Start simulation
Console.WriteLine("Enter number of simulations (1 simulation = 189,000 data rows):"+"\n")
strN = Console.ReadLine()

n = int(strN)
cmd.ExecuteNonQuery()
for i in range (0, n):
    bulkLoadEsgData()

sqlDbConnection.Close()
Environment.Exit(1111) 
```

# git - 如何删除 Git 中的所有提交，除了最新的提交？

> ID：14054417
> 
> 赞同：1
> 
> 时间：2012-12-27T12:05:11.010
> 
> 标签：git, github, rebase

我想通过删除所有以前的提交并只保留最新的提交来清理我的提交历史。我怎么能在 git 中做到这一点？我确实尝试过

`git rebase -i`..但这似乎以流血告终，我最终脱离了我的头.. `git prune --expire`似乎也不起作用。

所以如果我有 1 到 10 个提交。我现在只想保留第 10 个。所有这些都是本地的。因此，当我决定推动时，我只推动 10。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:14:35.987

该过程在[git book](http://git-scm.com/book/ch6-4.html#Squashing-Commits)中有描述：

> 挤压提交
> 
> 也可以使用交互式变基工具进行一系列提交并将它们压缩为单个提交。该脚本在 rebase 消息中提供了有用的说明：

```
#
# Commands:
#  p, pick = use commit
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#
# If you remove a line here THAT COMMIT WILL BE LOST.
# However, if you remove everything, the rebase will be aborted.
# 
```

> 如果您指定“squash”而不是“pick”或“edit”，Git 会应用该更改及其之前的更改，并使您将提交消息合并在一起。所以，如果你想从这三个提交中进行一次提交，你可以让脚本看起来像这样：

```
pick f7f3f6d changed my name a bit
squash 310154e updated README formatting and added blame
squash a5f4a0d added cat-file 
```

如果您不想将 seceral 提交压缩为一个，但实际上完全删除了提交，那么请执行脚本告诉您的操作：

```
# If you remove a line here THAT COMMIT WILL BE LOST. 
```

# java - 使用 Proguard 跳过特定的警告/注释？

> ID：14054421
> 
> 赞同：2
> 
> 时间：2012-12-27T12:05:31.667
> 
> 标签：java, warnings, obfuscation, proguard

在我的 Java 程序中，我动态下载和加载 SWT 库。所以我使用这个片段来检查下载的 jar 是否有效。

```
try {
   Class.forName("org.eclipse.swt.SWT");
   //valid swt.jar
} catch (Exception e) {
    //wrong swt.jar
} 
```

但是当我使用 ProGuard 混淆我的 jar 时，上面的行会产生以下注释/警告

```
 [proguard] Note: org.MyClass: can't find dynamically referenced class org.eclipse.swt.SWT
 [proguard] Note: there were 1 unresolved dynamic references to classes or interfaces. 
```

当然我可以禁用全班的**任何**笔记

```
-dontnote org.MyClass 
```

但我只想禁用此特定注释并查看同一类的其他注释。

是否可以？我已经检查了[使用手册](http://proguard.sourceforge.net/index.html#manual/usage.html)，但找不到如何实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T10:16:45.463

您还可以指定引用的类：

```
-dontnote org.eclipse.swt.SWT 
```

这不会禁用有关您自己的代码的任何注释。

# qt - 状态机和 Qt 设计器

> ID：14054427
> 
> 赞同：2
> 
> 时间：2012-12-27T12:05:55.787
> 
> 标签：qt, state-machine

我正在尝试修改 Qt 的状态机框架工作示例。我在 Qt 设计器中创建了一个 QWidget 并添加了一个标签和按钮。这是我的代码

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent), ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    setupStateMachine();
}

void MainWindow:: setupStateMachine()
{
    QStateMachine machine;
    QState *s1 = new QState();
    QState *s2 = new QState();
    QState *s3 = new QState();

    s1->assignProperty(ui->label, "text", "In state s1");
    s2->assignProperty(ui->label, "text", "In state s2");
    s3->assignProperty(ui->label, "text", "In state s3");

    s1->addTransition(this->ui->button, SIGNAL(clicked()), s2);
    s2->addTransition(this->ui->button, SIGNAL(clicked()), s3);
    s3->addTransition(this->ui->button, SIGNAL(clicked()), s1);

    machine.addState(s1);
    machine.addState(s2);
    machine.addState(s3);
    machine.setInitialState(s1);

    machine.start();

    qDebug() << "State Machine Created";
} 
```

它正在运行，但单击按钮不会更改标签文本。我在哪里犯错？我是 Qt 的新手，如果这是一个愚蠢的问题，请原谅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:47:21.960

该`QStateMachine`对象超出范围并在函数结束时被删除。您应该动态分配它：

```
QStateMachine *machine = new QStateMachine(this); 
```

# php - 在 ASP.NET 站点和 PHP 站点之间传输文件的最佳方式是什么？

> ID：14054433
> 
> 赞同：-1
> 
> 时间：2012-12-27T12:06:28.123
> 
> 标签：php, asp.net

我有一个基于 ASP.NET 的网站，托管在提供商 x 上。由于各种原因，我想将用户上传的所有图像文件保存在托管提供商 y 的另一个站点上。提供者 y 是基于 PHP 的。

将图像从我在 x 上的 ASP.NET 站点传输到提供商 y 的“PHP 商店”的最佳方式是什么？图像通过 Web 服务和“手动”文件上传进入 ASP.NET 站点。

存储图像时这只是一个“问题”，在读取图像 url 时当然会指向 y 上的位置。

我想唯一的方法是在 PHP 中创建一个 Web 服务，我可以在 y 处使用来自 x 的图像调用它，但是还有其他更好的方法吗？如果没有，任何人都知道该 Web 服务设置所需的 ASP.NET 和 PHP 代码示例的链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:17:51.863

只需在 POST 请求中发送原始数据……</p>

php 页面将确保文件来自批准的来源、捕获并处理它。（因为源只是一个特定的网站，也许允许所有来自该网站的源IP地址是安全的

```
Ideas on how to best accomplish this? 
```

在请求 (ASP.Net) 端，您将需要使用[HttpWebRequest](http://msdn2.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)和[HttpWebResponse](http://msdn2.microsoft.com/en-us/library/system.net.httpwebresponse.aspx)类。在响应（PHP）方面，它与处理表单提交没有什么不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:20:11.063

我假设当您说 Web 服务时，您指的是一个简单的 REST Web 服务，它包含在一个 PHP 页面中，该页面解析发布的数据并将其存储在适当的位置。

如果我是对的，是的，这似乎是向服务器 Y 提交图像的好方法。如果不是，并且您指的是适当的 SOAP/XML Web 服务，我认为没有必要仅使用此类高级方法来完成此操作简单的任务。

简而言之，您只需要在 ASP.NET 服务器端使用 a`WebClient`来制作包含图像数据的 POST 。`WebRequest`在 PHP 端，您将收到发布的数据，并能够对它做任何您想做的事情。

这是最简单的方法，但根据传输文件的大小和任务的性质，还有其他选择，例如： - 如果要传输的文件很大或不需要同步传输文件，您可以使用FTP 协议，根据您的要求使用 ad-hoc 或集成解决方案；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T16:10:54.060

正如大家所建议的，这样做的方法是使用网络服务。我找不到一个明确的例子，如何在两端（ASP.NET 和 PHP）做到这一点，所以这就是我最终得到的，而且它有效。

PHP 文件

```
<?php
$target_path =  "uploadfolder/";
$target_path = $target_path . basename( $_FILES['file']['name']); 
if(move_uploaded_file($_FILES['file']['tmp_name'], $target_path)) {
    echo "OK";
} else{
    echo "ERROR ".$target_path;
}
?> 
```

这就是我在 ASP.NET 方面的内容：

```
 private void UploadFile(string postUrl, string postFilename)
    {
        WebClient wb = new WebClient();
        try
        {
            byte[] responseArray = wb.UploadFile(postUrl, postFilename);
            string resp = Encoding.UTF8.GetString(responseArray);
            // You can read the response (resp) and check if you get an OK or ERROR from the PHP
        }
        catch (WebException e)
        {
            var response = (HttpWebResponse)e.Response;
            // Do stuff based on the exception
        }
    } 
```

用法：UploadFile("http://www.domain.com/thephpscript.php",FileUpload1.FileName);

很幸运，我猜到当您使用 .NET WebClient.UploadFile 方法时，它会将文件命名为“文件”，您需要在 PHP 端的 $_FILES 关联数组中知道该文件。这就是我发布这个的主要原因，所以我希望另一个善良的灵魂不必猜测。

当然，您应该采取措施检查用户上传的文件类型等，但这是基础。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:38:29.710

它可以通过在 PHP 端使用 web 服务来保存一个发布为的文件来完成`byte[]`

在 ASP.NET 中发送文件如下：-

```
if (FileUpload1.HasFile)
    {
        string spath = Server.MapPath("" + FileUpload1.FileName);
        FileUpload1.PostedFile.SaveAs(spath);
        FileInfo fInfo = new FileInfo(spath);
        long numBytes = fInfo.Length;
        FileStream fStream = new FileStream(spath, FileMode.Open, FileAccess.Read);
        BinaryReader br = new BinaryReader(fStream);
        byte[] data = br.ReadBytes((int)numBytes);
        br.Close();
        string result = src.UploadFile(data, FileUpload1.FileName);
        fStream.Close();
        fStream.Dispose();
} 
```

类 src 用于发送数据，即使用 PHP 服务器上的 Web 服务，它将数据保存为具有其文件名的文件。

# javascript - 更改 URL 的 Facebook 中的 Web 部分更新效果

> ID：14054434
> 
> 赞同：3
> 
> 时间：2012-12-27T12:06:30.307
> 
> 标签：javascript, html, ajax, page-refresh

> **可能重复：**
> [修改 URL 而不重新加载页面](https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page)

我发现在 Facebook 中，如果我单击左侧部分的*Notes*或*Music链接，只有中心部分会在 URL 更改时刷新，从 www.facebook.com 更改为 www.facebook.com/* *Notes*。

据我所知，更改 URL 将触发整个页面重新加载。Facebook 对其网页有什么魔力？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:10:07.027

神奇的是[history.pushState()](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#Adding_and_modifying_history_entries)。

> ## 例子
> 
> 假设[http://mozilla.org/foo.html](http://mozilla.org/foo.html)执行以下 JavaScript：

```
var stateObj = { foo: "bar" };
history.pushState(stateObj, "page 2", "bar.html"); 
```

> 这将导致 URL 栏显示[http://mozilla.org/bar.html](http://mozilla.org/bar.html)，但不会导致 >browser 加载 bar.html 甚至检查 bar.html 是否存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:10:44.557

您可以使用 javascript 命令（如 pushState/replaceState/popstate）来操作浏览器历史记录

例子：

```
function processAjaxData(response, urlPath){
     document.getElementById("content").innerHTML = response.html;
     document.title = response.pageTitle;
     window.history.pushState({"html":response.html,"pageTitle":response.pageTitle},"", urlPath);
 } 
```

# c# - SOLID、MasterPages 和 ASCX？

> ID：14054443
> 
> 赞同：2
> 
> 时间：2012-12-27T12:07:04.940
> 
> 标签：c#, asp.net, html, master-pages, solid-principles

我需要为网站创建布局。（我目前正在处理母版页）。

但是，徽标（ascx）位于*不同*的位置：（*位置由查询字符串值确定...*）。

![在此处输入图像描述](../Images/f9c568f9b771f20cb1517c5298761261.png)

*   是否应该`ascx`知道通过查询字符串在哪里呈现自己

或者

*   应该`master page`提供它在哪里呈现？

仅供参考，根据 DIP（依赖倒置）：

> 高级类不应该依赖于低级类。两者都应该依赖于抽象

所以我想在母版页的 ctor 中，我应该向 ascx ctor 提供它应该呈现的位置。

[就像在第一个示例中一样](http://www.remondo.net/category/solid-series/)

*   我对吗 ？或者，有更好的方法吗？

*（ps我已经知道masterpage也是继承的`usercontrol`）。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:37:32.263

是的，母版页应该负责在页面上呈现用户控件。

所以我希望你必须将它包装在一个 div 中，类随 URL 参数而变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:30:51.180

母版页将知道如何呈现任何周围的 div 标签和/或设置对 html 其他区域的可见性。.ascx 知道其周围的上下文会很尴尬。

话虽如此，我会更进一步。我会让母版页获取查询字符串值。但随后我将有另一个类 (LogotypeService) 运行一个方法 (GetPosition)，该方法采用该值并理解它并返回一些枚举 (LogotypePosition)。如果徽标出于某种原因必须知道它在哪里，它可以将此枚举作为由母版页设置的属性。

这样，您的 master 和您的控件都不包含用于确定为什么应该在某个位置呈现它的逻辑。但是他们有足够的信息将其放置在正确的位置，甚至在需要时进行一些自定义渲染。

# jquery - 如何将变量传递给回调函数

> ID：14054445
> 
> 赞同：2
> 
> 时间：2012-12-27T12:07:15.283
> 
> 标签：jquery, callback

```
function firstCallme(iWantToBePassed) {

   post(callbackFun);
}

// This function shouldn't be anonymous.
function callbackFun(dataFromPostFun) {

 alert(iWantToBePassed);
} 
```

如何将变量*iWantToBePassed*从*firstCallme()*传递给*callbackFun()*？SO中有几个类似的问题。但我无法从中找出解决方案。

我只知道一种解决方案，如下所示：

```
function firstCallme(iWantToBePassed) {

   post(function(data){callbackFun(data,iWantToBePassed) });
}

// This function shouldn't be anonymous.
function callbackFun(dataFromPostFun, iWantToBePassed) {

 alert(iWantToBePassed);
} 
```

有没有更好的解决方案？

更新：

这里：

```
function post(callbackFun) {
  jQuery.post('url', 'data', callbackFun, 'json');    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:22:08.943

由于您的回调函数是在 a`post`之后调用的，因此将参数传递给回调函数的唯一方法是使用某种形式的[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)，就像您在问题中提到的解决方案中展示的那样。

您还可以发布参数`iWantToBePassed`并从回调函数中发布的数据中检索它。但除非您在服务器上需要该参数，否则我不会推荐这条路线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:11:20.633

只需调用带有参数 to 的 callbackFun 函数即可。

函数后面的参数是发布的内容，您不必告诉 JavaScript 浏览器发布某些内容，它已经知道它必须在括号之间声明时将变量发布（传递）给函数。

```
function firstCallme(iWantToBePassed) {
    callbackFun(iWantToBePassed);
}

function callbackFun(dataFromPostFun) {
   alert(dataFromPostFun);
} 
```

*编辑：

jQuery.post 函数是一个异步 javascript 调用（无需页面加载即可获取数据）。

因此，当使用 jQuery.post 时，您可以将参数传递给例如 php 脚本并从中获取答案。例如，一个简写函数是 $.ajax()。

使用 jQuery.post，您可以将 'data' 发送到 'url'，而 'callbackFunction' 是处理答案的函数。您问题中的“json”是数据类型。

在你的情况下，这将变成这样：

```
function firstCallme(postData){
    jQuery.post("url.php", postData, callbackFun(data), "json");
}

callbackFun(successData){
    console.log(successData);
} 
```

[jquery.post 文档](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:18:35.203

试试这种方式：http: [//jsfiddle.net/6WxfF/](http://jsfiddle.net/6WxfF/)

```
function firstCallme(iWantToBePassed) {
    callbackFun(iWantToBePassed);
}

function callbackFun(dataFromPostFun) {
    post(dataFromPostFun);
}

function post(callbackFun) {
    jQuery.post('url', 'data', callbackFun, 'json');    
}

$(function() {
    var hel = "Hello";
    firstCallme(hel);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:24:16.310

改写`post`为：

```
function post(callbackFun, param) {
  jQuery.post('url', 'data', function() { callbackFun(param); }, 'json');    
} 
```

并称它为：

```
function firstCallme(iWantToBePassed) {
  post(callbackFun, iWantToBePassed);
} 
```

# c# - C# StringBuilder：检查它是否以新行结尾

> ID：14054446
> 
> 赞同：9
> 
> 时间：2012-12-27T12:07:23.240
> 
> 标签：c#, stringbuilder

我有一个`StringBuilder`可以积累代码的。在某些情况下，它在代码块之间有 2 个空行，我想创建 1 个空行。
如何检查当前代码末尾是否有空行？`ToString()`（由于性能问题，我不喜欢使用它的方法。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T12:12:13.013

您可以使用`StringBuilder`索引访问您的任何字符，就像使用`String`.

```
var sb = new StringBuilder();
sb.Append("Hello world!\n");
Console.WriteLine(sb[sb.Length - 1] == '\n'); // True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:18:53.467

您可以使用正则表达式规范化换行符：

```
var test = @"hello

moop

hello";

var regex = new Regex(@"(?:\r\n|[\r\n])+");

var newLinesNormalized = regex.Replace(test, Environment.NewLine); 
```

输出：

```
hello
moop
hello 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-21T08:46:08.093

单行检查。使用字符串类型，而不是 StringBuilder，但您应该了解基本概念。

```
if (theString.Substring(theString.Length - Environment.NewLine.Length, Environment.NewLine.Length).Contains(Environment.NewLine))
{
     //theString does end with a NewLine
}
else
{
     //theString does NOT end with a NewLine
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T13:24:51.463

这是完整的示例。

```
class string_builder
{
    string previousvalue = null;
    StringBuilder sB;
    public string_builder()
    {
        sB = new StringBuilder();
    }
    public void AppendToStringBuilder(string new_val)
    {
        if (previousvalue.EndsWith("\n") &&  !String.IsNullOrEmpty(previousvalue) )
        {
            sB.Append(new_val);
        }
        else
        {
            sB.AppendLine(new_val);
        }

        previousvalue = new_val;
    }

}
class Program
{

    public static void Main(string[] args)
    {
        string_builder sb = new string_builder();            
        sb.AppendToStringBuilder("this is line1\n");
        sb.AppendToStringBuilder("this is line2");
        sb.AppendToStringBuilder("\nthis is line3\n");

    }            
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-31T07:36:33.837

由于我不关心代码中间的2个空行，最简单的方法是使用

```
myCode.Replace(string.Format("{0}{0}", Environment.NewLine),Environment.NewLine); 
```

此选项不需要对使用代码累加器的类进行任何更改。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-01T07:21:48.113

万一有人像我在这里所做的那样最终来到这里，这是一种检查 a 结尾是否`StringBuilder`有必须使用的任意字符串的通用方法`ToString`。

```
public static bool EndsWith(this StringBuilder haystack, string needle)
{
    var needleLength = needle.Length - 1;
    var haystackLength = haystack.Length - 1;
    if (haystackLength < needleLength)
    {
        return false;
    }
    for (int i = 0; i < needleLength; i++)
    {
        if (haystack[haystackLength - i] != needle[needleLength - i])
        {
            return false;
        }
    }
    return true;
} 
```

# c++ - PETSc PF 对象和用户定义函数

> ID：14054448
> 
> 赞同：1
> 
> 时间：2012-12-27T12:07:23.677
> 
> 标签：c++, oop, petsc

目前我正在处理一个需要模块化的大型 PETSc 程序。我需要在 PETSc 中使用 PF 对象（至少我猜是因为我需要使用 MPI 向量将函数作为具有足够灵活性的参数传递。还有其他方法吗？）但是 PETSc 网站在这方面没有提供太多帮助，我我被困住了。任何建议或示例将不胜感激。

此外，每当我使用`PFApply`or时`PFApplyVec`，它都会**编译**但在执行时会给出类似

> “ src/vec/pf/interface/pf.c 应用程序中的 PFApplyVec() 第 202 行称为 MPI_Abbort(MPI_COMM_WORLD,-36453747642)”

# mysql - 显示来自数据库中未知数量表的信息

> ID：14054450
> 
> 赞同：0
> 
> 时间：2012-12-27T12:07:42.593
> 
> 标签：mysql, database, jdbc

我想问一下，是否可以使用单个查询从数据库中的多个表中显示列的名称、类型、大小等？问题是表格永远不会相同，所以我不能硬编码它们。我需要选择整个数据库。例如：

```
SELECT d1.*, d2.* FROM database1.table1 d1, database2.table1 d2 
```

如您所见，我这里有两个数据库。通过上述查询，我​​可以从两个数据库中打印出有关 table1 的信息。但是，我正在寻找一种动态方式来同时打印数据库中的所有表。正如我所说的，数据库和表并不总是相同的。那可能吗？

寻找如下输出：

`

```
 |dbname|tname|fname|typename|size|isPk|isFk| 
 |------------------------------------------| 
 | db1  |tbl1 |u_id |VARCHAR | 4  |YES | NO | 
```

`等

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:20:28.327

您需要的所有信息都通过[MySQL 的 information_schema 视图](http://dev.mysql.com/doc/refman/5.6/en/information-schema.html)公开。*几乎*所有这些都在“information_schema.columns”表中。

```
select table_schema, table_name, column_name, 
       data_type, character_maximum_length, column_key
from information_schema.columns
where table_schema in ( 'db-1-name', 'db-2-name')
order by table_schema, table_name, ordinal_position 
```

“character_maximum_length”列仅适用于可变长度列，但扩展查询以显示整数、大整数、日期等的长度应该相当容易。

有关外键约束的信息在“information_schema.key_column_usage”中。您只需要将其加入“information_schema.columns”。

```
select c.table_schema, c.table_name, c.column_name, 
       c.data_type, c.character_maximum_length, c.column_key,
       k.referenced_table_name
from information_schema.columns c
left join information_schema.key_column_usage k
       on c.table_catalog = k.table_catalog 
      and c.table_schema = k.table_schema
      and c.table_name = k.table_name
      and c.column_name = k.column_name
      and k.referenced_table_name is not null
where c.table_schema in ( 'db-1-name', 'db-2-name')
order by c.table_schema, c.table_name, c.ordinal_position 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:10:42.680

要选择数据库信息，您可以查看

```
SELECT * 
FROM information_schema.columns
WHERE table_schema in ('database1', 'database2')
AND table_name in ('table1', 'table2') 
```

# http - URIEncoding = 'UTF-8' 是如何工作的？

> ID：14054454
> 
> 赞同：0
> 
> 时间：2012-12-27T12:08:02.083
> 
> 标签：http, tomcat, encoding, catalina

[当我在http://grepcode.com/file/repo1.maven.org/maven2/org.apache.tomcat/tomcat-catalina/7.0.0/org/apache/catalina/connector/Request](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.tomcat/tomcat-catalina/7.0.0/org/apache/catalina/connector/Request.java#Request.parseParameters%28%29)查看 tomcat 源代码时。 [java#Request.parseParameters%28%29](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.tomcat/tomcat-catalina/7.0.0/org/apache/catalina/connector/Request.java#Request.parseParameters%28%29) 我找不到在哪里为来自 get 方法的 queryString 设置编码，以及该方法中的配置如何`URIEncoding="UTF-8"`工作`server.xml`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:14:19.963

该`URIEncoding`参数是您正在寻找的。它设置在 URI 解码查询字符串时要使用的字符编码。

您将其`server.xml`用作`Connector`实体的属性。

如果过去成功使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T22:15:21.197

首先，让我们使用更新版本的 Tomcat。7.0.0 已有多年历史：[来自 Tomcat 7.0.34 的 Request.java](http://svn.apache.org/viewvc/tomcat/tc7.0.x/tags/TOMCAT_7_0_34/java/org/apache/catalina/connector/Request.java?view=markup)

其次，该`parseParameters`方法不设置编码：它获取已由其他组件设置的编码。可能已设置内容编码的一些地方：

1.  连接器的 URIEncoding（根据 HTTP RFC 默认为 ISO-8859-1 AS）
2.  请求正文编码（来自 HTTP 请求的 Content-Type 标头）
3.  另一个组件——可能通过查看参数的值来嗅探编码

如果您只想在您的站点上无条件地将 URI 编码设置为 UTF-8，那么只需`URIEncoding`使用`<Connector>`.

您的问题的直接答案是 server.xml 的`URIEncoding`属性在此方法中不起作用：它在其他地方起作用。

# c# - 如何实例化通用类对象？

> ID：14054463
> 
> 赞同：3
> 
> 时间：2012-12-27T12:08:42.180
> 
> 标签：c#, java, generics

我正在尝试将以下 c# 代码转换为 java

```
abstract class BaseProcessor<T> where T : new()
{
 public T Process(HtmlDocument html)
 {
         T data = new T();

        Type type = data.GetType();
        BindingFlags flags = BindingFlags.Public | BindingFlags.Instance | BindingFlags.SetProperty;
        PropertyInfo[] properties = type.GetProperties(flags);
        foreach (PropertyInfo property in properties)
        {
             string value = "test";
             type.InvokeMember(property.Name, flags, Type.DefaultBinder, data, new object[] { value });
        }
 }
} 
```

所以我已经完成了

```
public class BaseProcessor<T> 
{
   public T Process(String m_doc)
   {
      T data = (T) new BaseProcessor<T>(); // this is not working

      Document doc = Jsoup.parse(m_doc);
      return data;
   }
} 
```

当我实例化数据对象时，它没有在运行时获取 Generic 类的属性，例如，当我点击代码时，它没有获取 DecodeModel 类的属性

```
IDocProcessor<DecodeModel> p = new DecodeThisProcessor();
return p.Process(doc);

public interface IDocProcessor<T>
{
    T Process(String webresponse);
}

public class DecodeThisProcessor extends BaseProcessor<DecodeModel> implements IDocProcessor<DecodeModel>
{
public void setup();
} 
```

所以请帮助我实例化通用对象数据的正确语法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:23:18.020

**您不能实例化泛型**。原因是该类型*在运行时不可用*`Object`，但实际上由编译器替换为。所以

```
T data = new T(); // Not valid in Java for a generics T! 
```

实际上是：

```
Object data = new Object(); // Obviously not the desired result 
```

阅读 Java 泛型教程 wrt。到“[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)”了解详情。

* * *

您将需要使用[工厂模式](https://en.wikipedia.org/wiki/Factory_pattern)。

```
T data = factory.make(); 
```

在哪里

```
public interface Factory<T> {
     T make();
} 
```

需要实现并传递给构造函数。要完成这项工作，您需要一个知道如何实例化所需类的工厂！

一个（相当明显的）变体是将工厂方法放入您的抽象类中。

```
public abstract class BaseProcessor<T> 
{
   protected abstract T makeProcessor();

   public T Process(String m_doc)
   {
       T data = makeProcessor(); // this is now working! 
```

并在扩展`BaseProcessor`时为实际的最终类型实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:14:00.523

倒霉; 在 Java 中，整个泛型严格来说是编译时工件，类型参数的实例化在运行时中不存在。通常的解决方法是将 的实例`Class`作为标记传递，这将允许您反射地创建该类型的对象。这充满了许多陷阱，但这是您在 Java 中可以得到的最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:10:50.200

你可以这样做：

```
public class BaseProcessor<T>
{
    private Class<T> clazz;

    public BaseProcessor(Class<T> clazz)
    {
        this.clazz = clazz;
    }

    public T Process(String m_doc)
    {
         T data = clazz.newInstance()
         Document doc = Jsoup.parse(m_doc);
         return data;
    }
} 
```

提示：确保 T 有一个无参数构造函数。

# php - 使用其他数组值上的 date_format 结果作为键的数组提取的 Smarty 值

> ID：14054465
> 
> 赞同：1
> 
> 时间：2012-12-27T12:08:50.260
> 
> 标签：php, smarty

我在 smarty 模板中有两个数组：$months 和 $contract。

## {$months|var_dump} 得到这个：

> 数组（大小=12）
> 1 => 字符串'января'（长度=12）
> 2 => 字符串'февраля'（长度=14）
> 3 => 字符串'марта'（长度=10）
> 4 => 字符串'апреля'（ length=12)
> 5 => string 'мая' (length=6)
> 6 => string 'июня' (length=8)
> 7 => string 'июля' (length=8)
> 8 => string 'августа' (length= 14)
> 9 => 字符串'сентября' (长度=16)
> 10 => 字符串'октября' (长度=14)
> 11 => 字符串'ноября' (长度=12)
> 12 => 字符串'декабря' (长度=14)

数组值是俄语月份的属格名称。

## {$contract|var_dump} 得到这个

> 'date_till' => '1355518365'（长度=10）

所以我需要先从 $contract.date_till 创建一个月份数。它通常是这样完成的

```
{$contract.date_till|date_format:"%m"} 
```

现在的问题是：**如何通过 $contract.date_till 和 date_format 组成的月份数从 $months 数组中提取月份名称？**

我尝试了 smarty 手册中描述的许多变体，但没有一个工作。例如，这个没有：{$months[{$contract.date_till|date_format:"%m"}]}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:35:24.563

{assign var=monthNo value=$contract.date_till|date_format:"%m"}

{$months.$monthNo} 这将为您提供必要日期的月份。

# unix - 需要 awk unix 中的代码或使用 substr

> ID：14054466
> 
> 赞同：0
> 
> 时间：2012-12-27T12:08:53.273
> 
> 标签：unix, awk

我想在“ctr{words}”之间打印单词并计算文件中的相同单词。

我试过了：

```
sed -n 's/.*ctr{\(.[^}]*\).*/\1/p' file 
```

但它没有搜索所有单词，只搜索一个单词

该文件是：

```
962796057604|mar0101|0|00000107A20E00000A6C331650B920340C00|0|0|400019FD7DBFBF7F|1001|962796057604|0 |01001|||-1|795971936| 00962795971936|16||-1| 00962795971936|-1|0|2|0|416019000659493|0||||||0|0|2012.12.01 00:07:09|12|30|0|516|16|1|2012.12.01 00:06:39|1|0||202|20001||0B12F1001104697209100300000000000000|1|1|11000|0|0||0881006972091003F000||0 714F610045584E6|000000000000|3|1|0000000000000000|0|140|0|0|0|0|0|0|||0|2|||||||||||||||||||||0|||0| |0|1|143|acf{0}cif{0}fcf{0}con{0}cuf{0}ctr{**Mo7afazat**}cgpa{962796057604}vlr{0096279001300}cff{0}roaf{0}mpty{0}ftksn{JMT}ftksr{0001}ftktp{CallTicketCPOCS} ||
1|34|2012.12.01 00:08:35|12|4|921-*203-0000000000-962796298894|mar0101|0|000001028225AE4AD868A8B750B900980C00|1|0|4000018001000002||962796298894|||||-1|||||-1||-1|0||||0||||||-1|-1|||-1|0|-1|-1|-1|2012.12.01 00:08:35|1|0||-1|0|||||||||||||0|0|||3797|0|12|-2147483648|-2147483648|-2147483648|-2147483648|||||||||||||||||||||||||0|||0||1|6|244|tid{111210532409329884}pfid{20}gob{1}rid{globitel} afid{}uid1{962796298894}aid1{1}ar1{0}uid2{globitel}aid2{-1}pid{1234}pur{!GDRC COMMIT AMOUNT 0}ratinf{}rec{0}rots{0}tda{}mid{}exd{0}reqa{0}ctr{**JaishanaIN**}ftksn{JMT}ftksr{0001}ftktp{PayCallTicket}||
1|34|2012.12.01 00:08:35|12|4|100-50-0-962796605155|mar0101|0|00000102A20400000A6A439D50B920520C00|0|0|400019FD7DBFBF7F|1001|962796605155|1 6||||-1|b116c||16||-1||-1|0|0|0|416017002233360|0||||||0|0|1970.01.01 02:00:00|0|0|0|220|0|1|1970.01.01 02:00:00|1|0||194|0||000000000000000000000000000000000000|0|0||0|0||00000000000000000000||0000000000 000000|000000000000|0|0|0000000000000000|0|370|0|0|0|0|0|0|||0|0|||||||||||||||||||||0|||0||0|1|70|a cf{3}ussd{1}ctr{**ZainElKul**}ftksn{JMT}ftksr{0001}ftktp{CallTicketCPOCS}||
1|34|2012.12.01 00:08:35|12|4|100-10-0
1|34|2012.12.01 00:08:35|12|4|921-*203-0000000000-962797611253|mar0101|0|0000010282B54BD015FF4C4B50B8F96E0C00|1|0|4000018001000002||962797611253|||||-1|||||-1||-1|0||||0||||||-1|-1|||-1|0|-1|-1|-1|2012.12.01 00:08:35|1|0||-1|0|||||||||||||0|0|||885|0|12|-2147483648|-2147483648|-2147483648|-2147483648|||||||||||||||||||||||||0|||0||1|6|243|tid{111220371293561120}pfid{20}gob{1}rid{globitel} afid{}uid1{962797611253}aid1{1}ar1{0}uid2{globitel}aid2{-1}pid{1234}pur{!GDRC COMMIT AMOUNT 0}ratinf{}rec{0}rots{0}tda{}mid{}exd{0}reqa{0}ctr{**ZainElKul**}ftksn{JMT}ftksr{0001}ftktp{PayCallTicket}||

-962795292027|mar0101|0|00000101A20200000A6A96B750B920300C00|0|0|400019FD7DBFBF7F|1001|962795292027|0 |01004|||-1|797196452| 00962797196452|16||-1| 00962797196452|-1|0|2|0|416018002276781|0||||||0|0|2012.12.01 00:07:09|12|12|23|516|16|1|2012.12.01 00:06:34|1|0||202|1||0B12F1001104697209100300000000000000|1|1|11000|0|0||0881006972091003F000||0714F 6100455AD67|000000000000|3|1|0000000000000000|0|30|0|0|0|0|0|0|||0|0|||||||||||||||||||||0|||0||0|1| 171|acf{0}cif{0}fcf{0}con{0}cuf{0}ctr{ZainUnlimited}cgpa{962795292027}vlr{0096279001300}cff{0}roaf{0}mpty{0}cacc{1;0;30}cquo{1;230;}ftksn{JMT}ftksr{000 1}ftktp{CallTicketCPOCS}||
1|34|2012.12.01 00:08:35|12|4|921-*203-0000000000-962796012818|mar0101|0|0000010882218115085D5F9150B920520C00|0|0|4000018001000002||962796012818|||||-1|||||-1||-1|0||||0||||||-1|-1|||-1|0|-1|-1|-1|2012.12.01 00:08:35|1|0||-1|1|||||||||||||0|0|||70|0|0|-2147483648|-2147483648|-2147483648|-2147483648|||||||||||||||||||||||||0|||0||1|6|258|tid{111221366974701289}pfid{17}gob{1}rid{globitel} afid{}uid1{962796012818}aid1{1}ar1{-2147483648}uid2{}aid2{-1}pid{DEFAULT_DECISION}pur{!GDRC Balance Check}ratinf{}rec{0}rots{0}tda{}mid{}exd{0}reqa{0}ctr{**AlBarakehNew**}ftksn{JMT}ftksr{0001}ftktp{PayCallTicket}||
1|34|2012.12.01 00:08:35|12|4|921-*203-0000000000-962797251349|mar0101|0|0000010282A451483EDFCFD350B920400C00|1|0|4000018001000002||962797251349|||||-1|||||-1||-1|0||||0||||||-1|-1|||-1|0|-1|-1|-1|2012.12.01 00:08:35|1|0||-1|0|||||||||||||0|0|||440|0|12|-2147483648|-2147483648|-2147483648|-2147483648|||||||||||||||||||||||||0|||0||1|6|245|tid{111211342745325133}pfid{20}gob{1}rid{globitel} afid{}uid1{962797251349}aid1{1}ar1{0}uid2{globitel}aid2{-1}pid{1234}pur{!GDRC COMMIT AMOUNT 0}ratinf{}rec{0}rots{0}tda{}mid{}exd{0}reqa{0}ctr{**ZainElKulSN**}ftksn{JMT}ftksr{0001}ftktp{PayCallTicket}||
1|34|2012.12.01 00:08:35|12|4|921-*203-0000000000- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:25:56.050

看起来你错过了计数。最简单的方法是通过管道输出您的输出`uniq -c`：

```
$ sed -n 's/.*ctr{\(.[^}]*\).*/\1/p' file | sort | uniq -c
      1 **Mo7afazat**
      1 **JaishanaIN**
      2 **ZainElKul**
      1 ZainUnlimited
      1 **AlBarakehNew**
      1 **ZainElKulSN** 
```

另一种方式，仅使用`awk`：

```
$ awk 'match($0,".*ctr{([^}]*)}.*",m){a[m[1]]++}END{for(i in a) print i,a[i]}' file
ZainUnlimited 1
**ZainElKulSN** 1
**Mo7afazat** 1
**ZainElKul** 2
**JaishanaIN** 1
**AlBarakehNew** 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:55:04.890

在文件中搜索匹配项`grep`通常是最佳选择。

使用`grep`正向前瞻和`uniq -c`：

```
$ grep -Po "(?<=ctr{)[^}]+" file | uniq -c
1 Mo7afazat
1 JaishanaIN
2 ZainElKul
1 ZainUnlimited
1 AlBarakehNew
1 ZainElKulSN 
```

来自`man uniq`：

> 注意：'uniq' 不会检测重复的行，除非它们是相邻的。

对于重复项与`sort`第一个管道不相邻的文件，但是在原始文件中找到每个匹配项的顺序将丢失：

```
grep -Po "(?<=ctr{)[^}]+" file | sort | uniq -c
1 AlBarakehNew
1 JaishanaIN
1 Mo7afazat
2 ZainElKul
1 ZainElKulSN
1 ZainUnlimited 
```

# bash - 如何处理缺少的命令行参数/命令行参数选项？

> ID：14054471
> 
> 赞同：1
> 
> 时间：2012-12-27T12:09:50.177
> 
> 标签：bash

我编写了一个 bash 脚本，允许多个长选项和短选项。这工作得很好，但我不确定如何处理

*   缺少长选项
*   缺少空头期权
*   缺少选项的参数
*   无论我没有想到

到目前为止，我发现的唯一建议是[这个 SO question](https://stackoverflow.com/q/10866443/1178669)，但答案并没有很详细。

是否有一些文件描述了如何处理这个问题？还是留给实施者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:15:18.767

在 bash 中使用[getopt(1) 。](http://linux.die.net/man/1/getopt)[这里](http://linuxwell.com/tag/getopt1/)是关于它的很好的教程。

如果你想坚持纯 bash 使用[getopts](http://en.wikipedia.org/wiki/Getopts)。它内置了 bash。这是[教程](http://wiki.bash-hackers.org/howto/getopts_tutorial)（在下面的评论中感谢 gniourf_gniourf）

# ruby-on-rails - Rails 回形针 - 上传原始图像和缩略图

> ID：14054475
> 
> 赞同：0
> 
> 时间：2012-12-27T12:10:29.120
> 
> 标签：ruby-on-rails, image, amazon-s3, paperclip, thumbnails

我不仅想上传原始图像，还想创建一个缩略图并将这两个文件存储在 S3 中。

我知道通过以下几行很好：

```
class Asset < ActiveRecord::Base
  belongs_to :component
  attr_accessible :image
  has_attached_file :image, :styles => {:original => "100x100>", 
                                    :thumb => "100x100"},
                :path => "images/:id/:style_:basename.:extension",
                :storage => :s3,
                :s3_credentials => {
                    :bucket => "xxxxxxxx",
                    :access_key_id => "xxxxxxx",
                    :secret_access_key => "xxxxxxx"
                }
end 
```

但它只保存原始文件。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:15:26.957

而不是这个

```
:style_:basename.:extension 
```

尝试这个

```
:style.:extension 
```

# jsf-2 - 复合组件和 setPropertyActionListener

> ID：14054477
> 
> 赞同：0
> 
> 时间：2012-12-27T12:10:40.280
> 
> 标签：jsf-2, primefaces, composite-component

我有一个复合组件，它有一个对话框......在对话框中我有以下代码：

```
 <p:commandButton id="selectButton" icon="ui-icon-check" oncomplete="lookupDialog.hide();" update=":#{cc.clientId}:#{cc.attrs.fieldId}_panelGrid">
                        <f:setPropertyActionListener target="#{cc.attrs.targetValue}" value="#{entity}" />                          
                    </p:commandButton> 
```

因此，当单击按钮时，对话框消失，但未设置属性。没有错误，没有警告，什么都没有！所以我根本不知道发生了什么......

如果您需要更多详细信息，请直接说出来！:)

***编辑

这是一个相关的问题，但并不是我真正想做的......将 [参数传递给复合组件操作属性](https://stackoverflow.com/questions/6355543/pass-argument-to-a-composite-component-action-attribute)

我只需要 propertyActionListener 来工作。这里有一些额外的信息：

```
 <cc:attribute name="targetValue" required="true"/> 
```

价值：

```
 targetValue="#{acaoController.entity.responsavel}" 
```

在 bean (acaoController) 内部我有一个实体......在实体内部我有另一个对象，即“responsavel”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:46:28.123

尝试在关闭对话框时检查响应的 setter 和 getter 是否被调用。否则，您可以使用 Flash 在组件之间传递值。在命令按钮的动作方法中，

```
 Flash flash = FaceUtil.getFacesContext().getExternalContext().getFlash();
    flash.put("entity",entity); 
```

您可以像这样提取值：

```
 Flash flash = FaceUtil.getFacesContext().getExternalContext().getFlash();
    responsavel = (Responsavel) flash.get("entity"); 
```

# asp.net-mvc-3 - ASP.NET MVC 应用程序中的 Web 服务

> ID：14054481
> 
> 赞同：0
> 
> 时间：2012-12-27T12:10:45.727
> 
> 标签：asp.net-mvc-3, web-services

我在解决方案中有一个 ASP.NET MVC 应用程序，在同一个解决方案中还有另一个 web 服务项目。我需要使用本地主机中的 url 在该服务中调试特定的 WebGet 方法。我能够使用该服务的实际 URL 访问托管它的 Web 服务。但是如果我必须调试它，在 localhost 中运行时如何使用该方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T07:52:59.973

您需要使用 IIS Express [How to: Specify the Web Server for Web Projects in Visual Studio](http://msdn.microsoft.com/en-us/library/ms178108%28v=vs.100%29.aspx)。使用 IIS express，您可以同时在解决方案中调试和运行这两个项目。

[面向开发人员的 IIS Express](http://www.microsoft.com/en-us/download/details.aspx?id=1038)

# c# - Path.GetExtension 返回“”

> ID：14054483
> 
> 赞同：2
> 
> 时间：2012-12-27T12:10:55.293
> 
> 标签：c#, file-upload, upload

我正在尝试将图像路径上传到数据库并将文件保存在图像文件夹中。这可以正常工作，除了 getExtension 部分（.jpg、.gif 等）之外，Path.GetExtension 方法总是返回 null（“”），我不知道为什么。

您可以在下面找到使用的代码：

```
string imagesFolderPath = Server.MapPath("//Images");
imagesFolderPath += "//";

string newImageName = addProduct.id.ToString();
string extension = Path.GetExtension(fileUpload.FileName.ToString());

addProduct.imagePath = "Images//" + newImageName + extension;

fileUpload.SaveAs(imagesFolderPath + newImageName); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:43:24.373

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)：

> 指定路径的扩展名（包括句点“.”），或者null，或者String.Empty。如果 path 为 null，GetExtension 返回 null。***如果 path 没有扩展信息，GetExtension 返回 String.Empty。***

获得空字符串 , 的唯一方法`""`是路径***不***存在`null` *且*路径***不***具有扩展名。

你得到一个空字符串，因为路径没有扩展名。

# android - 如何将本机库加载到android库项目

> ID：14054484
> 
> 赞同：0
> 
> 时间：2012-12-27T12:10:55.723
> 
> 标签：android, native, loadlibrary

首先，我的项目结构是这样的：

**Android 项目 A --> Android 库项目 B（包含一些原生的 so 库） --> Java 库 C**。

1.  项目A如何引用android库项目B： ![在此处输入图像描述](../Images/25de998309e79c4edc41a1c76f252d0a.png)

2.  android 库项目中的原生库 B.

![在此处输入图像描述](../Images/5145666f7524b381bd0eea18c63df0b1.png)

3.  Android Library 项目 B 如何是库： ![在此处输入图像描述](../Images/be7a490f89bfc8c1a4c4b8201dc4fa47.png)

4.  加载库代码（在android库项目B中）：

    System.loadLibrary("G72x");

    System.loadLibrary("H264Android");

5.  崩溃日志：

    ```
    12-27 20:32:51.698: E/AndroidRuntime(11589): FATAL EXCEPTION: Thread-1694
    12-27 20:32:51.698: E/AndroidRuntime(11589): java.lang.UnsatisfiedLinkError:    InitDecoder
    12-27 20:32:51.698: E/AndroidRuntime(11589):    at com.xx.xxx.media.H264Decoder.InitDecoder(Native Method)
    12-27 20:32:51.698: E/AndroidRuntime(11589):    at com.xx.xxx.media.VideoParseThread.getH264(VideoParseThread.java:131)
    12-27 20:32:51.698: E/AndroidRuntime(11589):    at com.xxx.xxx.media.VideoParseThread.run(VideoParseThread.java:46) 
    ```

现在，当应用程序运行需要 so 库的代码时，它崩溃了。我已经阅读了一些答案，但仍然没有解决。

如果所有库 b 项目都在项目 A 中，则它运行良好。

任何帮助将不胜感激，这个问题让我发疯，我知道它应该有一个解决方案，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:23:48.103

第一：
对您的项目的可怕解释和对项目结构的描述。
第二：
确保它在您的构建设置中导出。
如果你解释得更准确，你的结构是怎样的，也许用截图，那么我可以缩小我对你错误的解释

编辑：

在您的“项目属性”下进入“java 构建路径”，然后进入“订购和导出”。
在这里，您的项目需要存在并标记。

# javascript - 无法将 .CSV 文件中的数据加载到 Amcharts

> ID：14054486
> 
> 赞同：0
> 
> 时间：2012-12-27T12:11:10.747
> 
> 标签：javascript, csv, charts

我是 javascript 新手，正在创建一个饼图，它从逗号分隔的文件 data.txt 加载数据，但是当我打开 html 文件时，我在浏览器中看不到任何内容。

data.txt 包含以下数据 -

美国,9252
中国,1882
日本,1809
德国,1322
英国,1122
印度,984

我的html代码是-

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>amCharts examples</title>
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="amcharts/amcharts.js" type="text/javascript"></script>         
    <script type="text/javascript">
        var chart;
        var dataProvider;

        window.onload = function() {
        createChart();            
        loadCSV("data.csv");                                    
    }

    // method which loads external data
    function loadCSV(file) {
        if (window.XMLHttpRequest) {
            // IE7+, Firefox, Chrome, Opera, Safari
            var request = new XMLHttpRequest();
        }
        else {
            // code for IE6, IE5
            var request = new ActiveXObject('Microsoft.XMLHTTP');
        }
        // load
        request.open('GET', file, false);
        request.send();
        parseCSV(request.responseText);
    }

    // method which parses csv data
    function parseCSV(data){ 
        //replace UNIX new lines
        data = data.replace (/\r\n/g, "\n");
        //replace MAC new lines
        data = data.replace (/\r/g, "\n");
        //split into rows
        var rows = data.split("\n");
        // create array which will hold our data:
        dataProvider = [];

        // loop through all rows
        for (var i = 0; i < rows.length; i++){
            // this line helps to skip empty rows
            if (rows[i]) {                    
                // our columns are separated by comma
                var column = rows[i].split(",");  

                // column is array now 
                // first item is date
                var country = column[0];
                // second item is value of the second column
                var visits = column[1];
                // third item is value of the fird column 

                // create object which contains all these items:
                var dataObject = {country:country, visits:visits};
                // add object to dataProvider array
                dataProvider.push(dataObject);
            }
        }
        // set data provider to the chart
        chart.dataProvider = dataProvider;
        // this will force chart to rebuild using new data            
        chart.validateData();
    }

        function createChart(){   // PIE CHART
            chart = new AmCharts.AmPieChart();

            // title of the chart
            chart.addTitle("Visitors countries", 16);

            chart.titleField = "country";
            chart.valueField = "visits";
            chart.sequencedAnimation = true;
            chart.startEffect = "elastic";
            chart.innerRadius = "30%";
            chart.startDuration = 2;
            chart.labelRadius = 15;
            chart.pullOutEffect = "elastic";
            chart.pullOutDuration = 1;

            // the following two lines makes the chart 3D
            chart.depth3D = 10;
            chart.angle = 15;

            // WRITE                                 
            chart.write("chartdiv");
        }
    </script>
</head>

<body>
    <div id="chartdiv" style="width:600px; height:400px;"></div>
</body> 
```

我从[http://blog.amcharts.com/2011/03/amcharts-javascript-tutorials-part-2.html](http://blog.amcharts.com/2011/03/amcharts-javascript-tutorials-part-2.html)获取代码并根据饼图进行更改。请告诉我我做错了什么。我已将 data.txt 与 html 文件放在同一个文件夹中，并且没有在 Web 服务器上托管该文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:17:24.053

您正在调用 loadCSV 来加载 data.csv，但您说您的数据在 data.txt 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T14:54:58.597

您应该尝试更新您的 JS，Chrome 会抛出此错误：
`"AmCharts.AmPieChart is not a functioncreateChart @ Pie Charts.html:75window.onload @ Pie Charts.html:15"`
尝试使用 DATALOADER：

```
AmCharts.makeChart("chartdiv", {
      "type": "pie",
      "dataLoader": {
        "url": "data/pie.csv",
        "format": "csv",
        "delimiter": ",",
        "useColumnNames": true
     }, 
```

# android - 用于处理日期的 Sqlite 查询

> ID：14054496
> 
> 赞同：2
> 
> 时间：2012-12-27T12:12:07.873
> 
> 标签：android, sqlite

我在 Sqlite DB 中有这种格式的数据..

```
 month     year     FarmerCode     Value
   12       2012        1             10
   9        2012        1             25
   12       2012        2             5
   10       2012        2             12
   ..........
   .......... 
```

我必须找出有关 FarmerCode 的平均值。假设 FarmerCode 1 的两个月是`12 and 9`. 所以差异是`12 - 9 = 3`

然后`average = (25+10)/diffrence(which is 3 here)`

**找到这个的查询是什么？**

最后，如果日期移到明年，如此处所示

```
 month     year     FarmerCode     Value

   1        **2013**        4             20
   10       **2012**        4             50 
```

这次我做不到`1-10`

**那么根据 FarmerCode 和相应的平均值查找两个月之间的差异的可能的 sqlite 查询是什么，查找平均值的公式将是**

```
average = (value1+value2)/diffrence of months 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:28:59.523

**想法**：

诀窍是将年份乘以 12 并将其与月份相加。

```
(2013*12+1)-(2012*12+10) = 3 
```

**SQL查询**：

为此在 sqlite 中测试的有效 SQL 查询是：

```
SELECT 
    FarmerCode, 
    SUM(value) / (MAX(12 * year + month) - MIN(12 * year + month)) 
FROM 
    t 
GROUP BY 
    FarmerCode; 
```

By using `GROUP BY FarmerCode` you get one result row per different `FarmerCode` value. `sum()`, `min()`, and `max()` aggregates therefore all values of rows with equal `FarmerCode`. The `min()` and `max()` construct in this query works properly, if there are two rows for each `FarmerCode` value.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:19:00.283

然后您可以使用此方法找到月份的差异

```
private int monthsdiff(int m1,int year1, int m2,int year2)
{
    int yeardiff = year2 - year1;
    int mondiff  = m2 - m1;
    mondiff = yeardiff*12+mondiff;
    return mondiff;
} 
```

# php - PHP\MySQL 查询中的 JavaScript

> ID：14054501
> 
> 赞同：1
> 
> 时间：2012-12-27T12:12:24.877
> 
> 标签：php, javascript, mysql

嗨，我的 PHP 查询遇到问题，

每当我使用下面写的查询时，但在 BD 中找到一行

```
$txtx = "nope";
$query = "SELECT * FROM `users` WHERE `uname`='Shabi RoxX' AND `pass`='$txtx'"; 
```

当我像这样写“不”时

```
$txtx = "<script>document.write(String.fromCharCode(110,111,112,101));</script>";
$query = "SELECT * FROM `users` WHERE `uname`='Shabi RoxX' AND `pass`='$txtx'"; 
```

此查询找到 0 行，但是都打印/回显相同的字符串？怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:14:09.297

你不能这样写——

Javascript 是在客户端（浏览器）执行的东西，而 PHP 是一种服务器端脚本语言。而你正试图在 PHP 中执行 JS ......你不能！

```
$txtx = "<script>document.write(String.fromCharCode(110,111,112,101));</script>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:57:25.680

你想在这里完成什么？你要解决的更大的问题是什么？

现在看起来，您想使用 PHP（在服务器上）检查 Javascript（在客户端 = 浏览器上）中已知的密码。

虽然您可以使用 PHP（在服务器上）编写将在客户端执行的 Javascript，但您不能反过来。要从客户端调用服务器端代码，您必须通过提交页面或（最好）通过从 Javascript 进行 AJAX 调用来发出 POST 或 GET 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:59:45.913

改用php的[CHR](http://php.net/manual/en/function.chr.php)函数。

```
$txtx = chr(110).chr(111).chr(112).chr(101);
$query = "SELECT * FROM `users` WHERE `uname`='Shabi RoxX' AND `pass`='$txtx'"; 
```

我希望这有帮助。谢谢

# ios - UILabel 将其框架调整为文本长度

> ID：14054506
> 
> 赞同：-2
> 
> 时间：2012-12-27T12:12:46.037
> 
> 标签：ios

我的 UILabel 是否有可能将其帧大小调整为 UILabel 文本的长度？如果是，如何？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:17:43.807

使用`-sizeToFit`：

```
[label sizeToFit]; 
```

更重要的是，您还可以调整字体大小以适应宽度：

```
[label setAdjustsFontSizeToFitWidth:YES];
[label setMinimumFontSize:8.f]; 
```

# html - HTML 视频检测

> ID：14054509
> 
> 赞同：0
> 
> 时间：2012-12-27T12:12:58.497
> 
> 标签：html, html-parsing, html5-video

我有一个 HTML 文档，我想提取视频文件的每个 URL。最好的方法是什么，因为有不同的 HTML 版本和将视频文件嵌入 HTML 文档的不同可能性。为此，我将使用 Html Agility Pack (c#)。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T12:14:34.503

您应该使用正则表达式解析 html 以获取视频 URL。

# asp.net - 修改自定义会员提供程序

> ID：14054521
> 
> 赞同：0
> 
> 时间：2012-12-27T12:13:45.380
> 
> 标签：asp.net, createuserwizard, custom-membershipprovider

我正在尝试从[这里](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)使用自定义会员提供程序类并且工作得很好。

但我的问题是我想从这门课中删除密码问题和密码答案。

这是我的 web.config 文件：

```
 <?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
   <appSettings>
    <add key="ValidationSettings:UnobtrusiveValidationMode" value="None"/>
    <add key="ApplicationName" value="/>
  </appSettings>
  <connectionStrings>
    <add name="HDIConnectionString" providerName="System.Data.SqlClient" connectionString="Data Source=.\SQLExpress;Integrated Security=True;User Instance=True;AttachDBFilename=|DataDirectory|HDIMembershipProvider.mdf"/>
  </connectionStrings>
  <system.web>
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      </controls>
    </pages>
    <machineKey validationKey="C50B3C89CB21F4F1422FF158A5B42D0E8DB8CB5CDA1742572A487D9401E3400267682B202B746511891C1BAF47F8D25C07F6C39A104696DB51F17C529AD3CABE" decryptionKey="8A9BE8FD67AF6979E7D20198CFEA50DD3D3799C77AF2B72F" validation="SHA1"/>
    <!--Custom Membership Provider Configuration-->
    <membership defaultProvider="HDIMembershipProvider" userIsOnlineTimeWindow="15">
      <providers>
        <clear/>
        <add name="HDIMembershipProvider" type="HDI.AspNet.Membership.HDIMembershipProvider" connectionStringName="HDIConnectionString" enablePasswordRetrieval="true" enablePasswordReset="true" requiresQuestionAndAnswer="false" writeExceptionsToEventLog="false" applicationName="/" passwordFormat="Clear"/>
      </providers>
    </membership>
    <customErrors mode="Off"/>
    <compilation debug="true"/>
  </system.web>
  <system.webServer>
    <defaultDocument>
      <files>
        <clear/>
        <add value="Subscribe.aspx"/>
      </files>
    </defaultDocument>
  </system.webServer>
</configuration> 
```

当我尝试创建没有安全问题并回答的新用户时，它不接受新用户注册。如果我给他们，那么它正在添加到数据库中。

就像在许多论坛和网站中一样，我已经看到实施`requiresQuestionAndAnswer="false"`bu 单独没有成功。

那么如何删除它们呢？

这是会员提供者类：

```
 'Adapted from: http://msdn2.microsoft.com/en-us/library/6tc47t75(VS.80).aspx
    Imports System.Configuration
    Imports System.Collections.Specialized
    Imports System.Configuration.Provider
    Imports System.Data.SqlClient
    Imports System.Security.Cryptography
    Imports System.Text
    Imports System.Web.Configuration
    Imports System.Web.Security
    Imports System.Data

    Public NotInheritable Class HDIMembershipProvider
        Inherits MembershipProvider

    #Region "Enums"

        Private Enum FailureType
            Password = 1
            PasswordAnswer = 2
        End Enum

    #End Region

    #Region "Initialization"

        Public Overrides Sub Initialize(ByVal name As String, ByVal config As NameValueCollection)
            If config Is Nothing Then _
              Throw New ArgumentNullException("config")

            If name Is Nothing OrElse name.Length = 0 Then _
              name = "HDIMembershipProvider"

            If String.IsNullOrEmpty(config("description")) Then
                config.Remove("description")
                config.Add("description", "How Do I: Sample Membership provider")
            End If

            ' Initialize the abstract base class.
            MyBase.Initialize(name, config)

            _applicationName = GetConfigValue(config("applicationName"), System.Web.Hosting.HostingEnvironment.ApplicationVirtualPath)
            _maxInvalidPasswordAttempts = Convert.ToInt32(GetConfigValue(config("maxInvalidPasswordAttempts"), "5"))
            _passwordAttemptWindow = Convert.ToInt32(GetConfigValue(config("passwordAttemptWindow"), "10"))
            _minRequiredNonAlphanumericCharacters = Convert.ToInt32(GetConfigValue(config("minRequiredAlphaNumericCharacters"), "1"))
            _minRequiredPasswordLength = Convert.ToInt32(GetConfigValue(config("minRequiredPasswordLength"), "7"))
            _passwordStrengthRegularExpression = Convert.ToString(GetConfigValue(config("passwordStrengthRegularExpression"), String.Empty))
            _enablePasswordReset = Convert.ToBoolean(GetConfigValue(config("enablePasswordReset"), "True"))
            _enablePasswordRetrieval = Convert.ToBoolean(GetConfigValue(config("enablePasswordRetrieval"), "True"))
            _requiresQuestionAndAnswer = Convert.ToBoolean(GetConfigValue(config("requiresQuestionAndAnswer"), "False"))
            _requiresUniqueEmail = Convert.ToBoolean(GetConfigValue(config("requiresUniqueEmail"), "True"))

            Dim temp_format As String = config("passwordFormat")
            If temp_format Is Nothing Then
                temp_format = "Hashed"
            End If

            Select Case temp_format
                Case "Hashed"
                    _passwordFormat = MembershipPasswordFormat.Hashed
                Case "Encrypted"
                    _passwordFormat = MembershipPasswordFormat.Encrypted
                Case "Clear"
                    _passwordFormat = MembershipPasswordFormat.Clear
                Case Else
                    Throw New ProviderException("Password format not supported.")
            End Select

            Dim ConnectionStringSettings As ConnectionStringSettings = _
              ConfigurationManager.ConnectionStrings(config("connectionStringName"))

            If ConnectionStringSettings Is Nothing OrElse ConnectionStringSettings.ConnectionString.Trim() = String.Empty Then
                Throw New ProviderException("Connection string cannot be blank.")
            End If

            _sqlConnectionString = ConnectionStringSettings.ConnectionString

            ' Get encryption and decryption key information from the configuration.
            Dim cfg As System.Configuration.Configuration = _
              WebConfigurationManager.OpenWebConfiguration(System.Web.Hosting.HostingEnvironment.ApplicationVirtualPath)
            _machineKey = CType(cfg.GetSection("system.web/machineKey"), MachineKeySection)

            If _machineKey.ValidationKey.Contains("AutoGenerate") Then _
              If PasswordFormat <> MembershipPasswordFormat.Clear Then _
                Throw New ProviderException("Hashed or Encrypted passwords " & _
                                            "are not supported with auto-generated keys.")

        End Sub

        Private Function GetConfigValue(ByVal configValue As String, ByVal defaultValue As String) As String
            If String.IsNullOrEmpty(configValue) Then _
              Return defaultValue

            Return configValue
        End Function

    #End Region

    #Region "Implemented Abstract Methods from MembershipProvider"

        ''' <summary>
        ''' Change the user password.
        ''' </summary>
        ''' <param name="username">UserName</param>
        ''' <param name="oldPwd">Old password.</param>
        ''' <param name="newPwd">New password.</param>
        ''' <returns>T/F if password was changed.</returns>
        Public Overrides Function ChangePassword(ByVal username As String, _
        ByVal oldPwd As String, _
        ByVal newPwd As String) As Boolean

            If Not ValidateUser(username, oldPwd) Then _
              Return False

            Dim args As ValidatePasswordEventArgs = _
              New ValidatePasswordEventArgs(username, newPwd, True)

            OnValidatingPassword(args)

            If args.Cancel Then
                If Not args.FailureInformation Is Nothing Then
                    Throw args.FailureInformation
                Else
                    Throw New Exception("Change password canceled due to New password validation failure.")
                End If
            End If

            Dim _sqlConnection As SqlConnection = New SqlConnection(_sqlConnectionString)
            Dim _sqlCommand As SqlCommand = New SqlCommand("User_ChangePassword", _sqlConnection)

            _sqlCommand.CommandType = CommandType.StoredProcedure
            _sqlCommand.Parameters.Add("@password", SqlDbType.NVarChar, 255).Value = EncodePassword(newPwd)
            _sqlCommand.Parameters.Add("@username", SqlDbType.NVarChar, 255).Value = username
            _sqlCommand.Parameters.Add("@applicationName", SqlDbType.NVarChar, 255).Value = _applicationName

            Try
                _sqlConnection.Open()
                _sqlCommand.ExecuteNonQuery()
            Catch e As SqlException
                'Add exception handling here.
                Return False
            Finally
                _sqlConnection.Close()
            End Try

            Return True

        End Function
        ''' <summary>
        ''' Change the question and answer for a password validation.
        ''' </summary>
        ''' <param name="username">User name.</param>
        ''' <param name="password">Password.</param>
        ''' <param name="newPwdQuestion">New question text.</param>
        ''' <param name="newPwdAnswer">New answer text.</param>
        ''' <returns></returns>
        ''' <remarks></remarks>
        Public Overrides Function ChangePasswordQuestionAndAnswer( _
        ByVal username As String, _
        ByVal password As String, _
        ByVal newPwdQuestion As String, _
        ByVal newPwdAnswer As String) As Boolean

            If Not ValidateUser(username, password) Then _
              Return False

            Dim _sqlConnection As SqlConnection = New SqlConnection(_sqlConnectionString)
            Dim _sqlCommand As SqlCommand = New SqlCommand("User_ChangePasswordQuestionAnswer", _sqlConnection)

            _sqlCommand.CommandType = CommandType.StoredProcedure
            _sqlCommand.Parameters.Add("@returnValue", SqlDbType.Int, 0).Direction = ParameterDirection.ReturnValue
            _sqlCommand.Parameters.Add("@question", SqlDbType.NVarChar, 255).Value = String.Empty
            _sqlCommand.Parameters.Add("@answer", SqlDbType.NVarChar, 255).Value = String.Empty
            _sqlCommand.Parameters.Add("@username", SqlDbType.NVarChar, 255).Value = username
            _sqlCommand.Parameters.Add("@applicationName", SqlDbType.NVarChar, 255).Value = _applicationName

            Try
                _sqlConnection.Open()
                _sqlCommand.ExecuteNonQuery()
                If (_sqlCommand.Parameters("@returnValue").Value <> 0) Then
                    Return False
                End If
            Catch e As SqlException
                'Add exception handling here.
                Return False
            Finally
                _sqlConnection.Close()
            End Try

            Return True

        End Function
        ''' <summary>
        ''' Create a new user.
        ''' </summary>
        ''' <param name="username">User name.</param>
        ''' <param name="password">Password.</param>
        ''' <param name="email">Email address.</param>
        ''' <param name="passwordQuestion">Security quesiton for password.</param>
        ''' <param name="passwordAnswer">Security quesiton answer for password.</param>
        ''' <param name="isApproved"></param>
        ''' <param name="userID"></param>
        ''' <param name="status"></param>
        ''' <returns></returns>
        Public Overrides Function CreateUser( _
        ByVal username As String, _
        ByVal password As String, _
        ByVal email As String, _
        ByVal passwordQuestion As String, _
        ByVal passwordAnswer As String, _
        ByVal isApproved As Boolean, _
        ByVal userID As Object, _
        ByRef status As MembershipCreateStatus _
        ) _
        As MembershipUser

            Dim _args As ValidatePasswordEventArgs = _
              New ValidatePasswordEventArgs(username, password, True)

            OnValidatingPassword(_args)

            If _args.Cancel Then
                status = MembershipCreateStatus.InvalidPassword
                Return Nothing
            End If

            If (RequiresUniqueEmail AndAlso (GetUserNameByEmail(email) <> String.Empty)) Then
                status = MembershipCreateStatus.DuplicateEmail
                Return Nothing
            End If

            Dim _membershipUser As MembershipUser = GetUser(username, False)

            If _membershipUser Is Nothing Then
                Dim createDate As DateTime = DateTime.Now

                Dim _sqlConnection As SqlConnection = New SqlConnection(_sqlConnectionString)
                Dim _sqlCommand As SqlCommand = New SqlCommand("User_Ins", _sqlConnection)

                _sqlCommand.CommandType = CommandType.StoredProcedure
                _sqlCommand.Parameters.Add("@returnValue", SqlDbType.Int, 0).Direction = ParameterDirection.ReturnValue
                _sqlCommand.Parameters.Add("@username", SqlDbType.NVarChar, 255).Value = username
                _sqlCommand.Parameters.Add("@applicationName", SqlDbType.NVarChar, 255).Value = _applicationName
                _sqlCommand.Parameters.Add("@password", SqlDbType.NVarChar, 255).Value = EncodePassword(password)
                _sqlCommand.Parameters.Add("@email", SqlDbType.NVarChar, 128).Value = email
                _sqlCommand.Parameters.Add("@passwordQuestion", SqlDbType.NVarChar, 255).Value = String.Empty
                _sqlCommand.Parameters.Add("@passwordAnswer", SqlDbType.NVarChar, 255).Value = String.Empty
                _sqlCommand.Parameters.Add("@isApproved", SqlDbType.Bit).Value = isApproved
                _sqlCommand.Parameters.Add("@comment", SqlDbType.NVarChar, 255).Value = String.Empty

                Try
                    _sqlConnection.Open()

                    _sqlCommand.ExecuteNonQuery()
                    If (_sqlCommand.Parameters("@returnValue").Value = 0) Then
                        status = MembershipCreateStatus.Success
                    Else
                        status = MembershipCreateStatus.UserRejected
                    End If
                Catch e As SqlException
                    'Add exception handling here.

                    status = MembershipCreateStatus.ProviderError
                Finally
                    _sqlConnection.Close()
                End Try

                Return GetUser(username, False)
            Else
                status = MembershipCreateStatus.DuplicateUserName
            End If

            Return Nothing
        End Function
        ''' <summary>
        ''' Delete a user.
        ''' </summary>
        ''' <param name="username">User name.</param>
        ''' <param name="deleteAllRelatedData">Whether to delete all related data.</param>
        ''' <returns>T/F if the user was deleted.</returns>
        Public Overrides Function DeleteUser( _
        ByVal username As String, _
        ByVal deleteAllRelatedData As Boolean _
        ) As Boolean

            Dim _sqlConnection As SqlConnection = New SqlConnection(_sqlConnectionString)
            Dim _sqlCommand As SqlCommand = New SqlCommand("User_Del", _sqlConnection)

            _sqlCommand.CommandType = CommandType.StoredProcedure
            _sqlCommand.Parameters.Add("@returnValue", SqlDbType.Int, 0).Direction = ParameterDirection.ReturnValue
            _sqlCommand.Parameters.Add("@username", SqlDbType.NVarChar, 255).Value = username
            _sqlCommand.Parameters.Add("@applicationName", SqlDbType.NVarChar, 255).Value = _applicationName

            Try
                _sqlConnection.Open()
                _sqlCommand.ExecuteNonQuery()
                If (_sqlCommand.Parameters("@returnValue").Value = 0) Then
                    If deleteAllRelatedData Then
                        ' Process commands to delete all data for the user in the database.
                    End If
                Else
                    Return False
                End If

            Catch e As SqlException
                'Add exception handling here.
            Finally
                _sqlConnection.Close()
            End Try

            Return True

        End Function

        Public Overrides Function UnlockUser( _
        ByVal username As String _
        ) _
        As Boolean

            Dim _sqlConnection As SqlConnection = New SqlConnection(_sqlConnectionString)
            Dim _sqlCommand As SqlCommand = New SqlCommand("User_Unlock", _sqlConnection)

            _sqlCommand.CommandType = CommandType.StoredProcedure
            _sqlCommand.Parameters.Add("@returnValue", SqlDbType.Int, 0).Direction = ParameterDirection.ReturnValue
            _sqlCommand.Parameters.Add("@username", SqlDbType.NVarChar, 255).Value = username
            _sqlCommand.Parameters.Add("@applicationName", SqlDbType.NVarChar, 255).Value = _applicationName

            Dim _rowsAffected As Integer = 0

            Try
                _sqlConnection.Open()

                _sqlCommand.ExecuteNonQuery()
                If (_sqlCommand.Parameters("@returnValue").Value = 0) Then
                    Return False
                End If
            Catch e As SqlException
                'Add exception handling here.
                Return False
            Finally
                _sqlConnection.Close()
            End Try

            Return True

        End Function

        ''' <summary>
        ''' Update the user information.
        ''' </summary>
        ''' <param name="_membershipUser">MembershipUser object containing data.</param>
        Public Overrides Sub UpdateUser(ByVal _membershipUser As MembershipUser)

            Dim _sqlConnection As SqlConnection = New SqlConnection(_sqlConnectionString)
            Dim _sqlCommand As SqlCommand = New SqlCommand("User_Upd", _sqlConnection)

            _sqlCommand.CommandType = CommandType.StoredProcedure
            _sqlCommand.Parameters.Add("@email", SqlDbType.NVarChar, 128).Value = _membershipUser.Email
            _sqlCommand.Parameters.Add("@comment", SqlDbType.NVarChar, 255).Value = _membershipUser.Comment
            _sqlCommand.Parameters.Add("@isApproved", SqlDbType.Bit).Value = _membershipUser.IsApproved
            _sqlCommand.Parameters.Add("@username", SqlDbType.NVarChar, 255).Value = _membershipUser.UserName
            _sqlCommand.Parameters.Add("@applicationName", SqlDbType.NVarChar, 255).Value = _applicationName

            Try
                _sqlConnection.Open()
                _sqlCommand.ExecuteNonQuery()
            Catch e As SqlException
                'Add exception handling here.
            Finally
                _sqlConnection.Close()
            End Try
        End Sub
        ''' <summary>
        ''' Validate the user based upon username and password.
        ''' </summary>
        ''' <param name="username">User name.</param>
        ''' <param name="password">Password.</param>
        ''' <returns>T/F if the user is valid.</returns>
        Public Overrides Function ValidateUser( _
        ByVal username As String, _
        ByVal password As String _
        ) _
        As Boolean

            Dim _isValid As Boolean = False

            Dim _sqlConnection As SqlConnection = New SqlConnection(_sqlConnectionString)
            Dim _sqlCommand As SqlCommand = New SqlCommand("User_Validate", _sqlConnection)

            _sqlCommand.CommandType = CommandType.StoredProcedure
            _sqlCommand.Parameters.Add("@username", SqlDbType.NVarChar, 255).Value = username
            _sqlCommand.Parameters.Add("@applicationName", SqlDbType.NVarChar, 255).Value = _applicationName

            Dim _sqlDataReader As SqlDataReader = Nothing
            Dim _isApproved As Boolean = False
            Dim _storedPassword As String = String.Empty

            Try
                _sqlConnection.Open()
                _sqlDataReader = _sqlCommand.ExecuteReader(CommandBehavior.SingleRow)

                If _sqlDataReader.HasRows Then
                    _sqlDataReader.Read()
                    _storedPassword = _sqlDataReader.GetString(0)
                    _isApproved = _sqlDataReader.GetBoolean(1)
                Else
                    Return False
                End If

                _sqlDataReader.Close()

                If CheckPassword(password, _storedPassword) Then
                    If _isApproved Then
                        _isValid = True

                        Dim _sqlUpdateCommand As SqlCommand = New SqlCommand("User_UpdateLoginDate", _sqlConnection)

                        _sqlUpdateCommand.CommandType = CommandType.StoredProcedure
                        _sqlUpdateCommand.Parameters.Add("@username", SqlDbType.NVarChar, 255).Value = username
                        _sqlUpdateCommand.Parameters.Add("@applicationName", SqlDbType.NVarChar, 255).Value = _applicationName
                        _sqlUpdateCommand.ExecuteNonQuery()
                    End If
                Else
                    _sqlConnection.Close()
                    UpdateFailureCount(username, FailureType.Password)
                End If
            Catch e As SqlException
                'Add exception handling here.
            Finally
                If Not _sqlDataReader Is Nothing Then _sqlDataReader.Close()
                If Not _sqlConnection Is Nothing And _sqlConnection.State = ConnectionState.Open Then _sqlConnection.Close()
            End Try

            Return _isValid
        End Function
        ''' <summary>
        ''' Find all users matching a search string.
        ''' </summary>
        ''' <param name="usernameToMatch">Search string of user name to match.</param>
        ''' <param name="pageIndex"></param>
        ''' <param name="pageSize"></param>
        ''' <param name="totalRecords">Total records found.</param>
        ''' <returns>Collection of MembershipUser objects.</returns>
        Public Overrides Function FindUsersByName( _
        ByVal usernameToMatch As String, _
        ByVal pageIndex As Integer, _
        ByVal pageSize As Integer, _
        ByRef totalRecords As Integer _
        ) _
        As MembershipUserCollection

            Dim _sqlConnection As SqlConnection = New SqlConnection(_sqlConnectionString)
            Dim _sqlCommand As SqlCommand = New SqlCommand("Users_Sel_ByUserName", _sqlConnection)

            _sqlCommand.CommandType = CommandType.StoredProcedure
            _sqlCommand.Parameters.Add("@username", SqlDbType.NVarChar, 255).Value = usernameToMatch
            _sqlCommand.Parameters.Add("@applicationName", SqlDbType.NVarChar, 255).Value = _applicationName

            Dim _membershipUsers As MembershipUserCollection = New MembershipUserCollection()
            Dim _sqlDataReader As SqlDataReader = Nothing
            Dim _counter As Integer = 0

            Try
                _sqlConnection.Open()
                _sqlDataReader = _sqlCommand.ExecuteReader(CommandBehavior.CloseConnection)

                Dim _startIndex As Integer = pageSize * pageIndex
                Dim _endIndex As Integer = _startIndex + pageSize - 1

                Do While _sqlDataReader.Read()
                    If _counter >= _startIndex Then
                        Dim _membershipUser As MembershipUser = GetUserFromReader(_sqlDataReader)
                        _membershipUsers.Add(_membershipUser)
                    End If

                    If _counter >= _endIndex Then _sqlCommand.Cancel()

                    _counter += 1
                Loop
            Catch e As SqlException
                'Add exception handling here.
            Finally
                If Not _sqlDataReader Is Nothing Then _sqlDataReader.Close()
            End Try

            totalRecords = _counter

            Return _membershipUsers
        End Function

    #Region "Utility Functions"
        ''' <summary>
        ''' Create a MembershipUser object from a data reader.
        ''' </summary>
        ''' <param name="_sqlDataReader">Data reader.</param>
        ''' <returns>MembershipUser object.</returns>
        Private Function GetUserFromReader( _
        ByVal _sqlDataReader As SqlDataReader _
        ) _
        As MembershipUser

            Dim _userID As Object = _sqlDataReader.GetValue(0)
            Dim _username As String = _sqlDataReader.GetString(1)
            Dim _email As String = _sqlDataReader.GetString(2)

            Dim _passwordQuestion As String = String.Empty
            If Not _sqlDataReader.GetValue(3) Is DBNull.Value Then _
              _passwordQuestion = _sqlDataReader.GetString(3)

            Dim _comment As String = String.Empty
            If Not _sqlDataReader.GetValue(4) Is DBNull.Value Then _
              _comment = _sqlDataReader.GetString(4)

            Dim _isApproved As Boolean = _sqlDataReader.GetBoolean(5)
            Dim _isLockedOut As Boolean = _sqlDataReader.GetBoolean(6)
            Dim _creationDate As DateTime = _sqlDataReader.GetDateTime(7)

            Dim _lastLoginDate As DateTime = New DateTime()
            If Not _sqlDataReader.GetValue(8) Is DBNull.Value Then _
              _lastLoginDate = _sqlDataReader.GetDateTime(8)

            Dim _lastActivityDate As DateTime = _sqlDataReader.GetDateTime(9)
            Dim _lastPasswordChangedDate As DateTime = _sqlDataReader.GetDateTime(10)

            Dim _lastLockedOutDate As DateTime = New DateTime()
            If Not _sqlDataReader.GetValue(11) Is DBNull.Value Then _
              _lastLockedOutDate = _sqlDataReader.GetDateTime(11)

            Dim _membershipUser As MembershipUser = New MembershipUser( _
            Me.Name, _
            _username, _
            _userID, _
            _email, _
            _passwordQuestion, _
            _comment, _
            _isApproved, _
            _isLockedOut, _
            _creationDate, _
            _lastLoginDate, _
            _lastActivityDate, _
            _lastPasswordChangedDate, _
            _lastLockedOutDate _
            )

            Return _membershipUser

        End Function      
    End Class 
```

# java - 签署 SOAP 消息期间的 WSS4j 元素顺序

> ID：14054523
> 
> 赞同：7
> 
> 时间：2012-12-27T12:14:03.800
> 
> 标签：java, web-services, ws-security

我正在用 Java 实现 Web 服务客户端，它使用 wss4j 1.6.8 进行 WS-Security（更准确地说，我需要签署 SOAP 消息）。服务器端要求请求具有以下结构：

```
<Envelope>
    <Header>
        <wsse:Security mustUnderstand="1">
            **<wsu:Timestamp wsu:Id="Timestamp-913ca68e-05ed-44e1-9d6c-b2f293da5a1d">
                <wsu:Created>2012-12-21T11:37:31Z</wsu:Created>
                <wsu:Expires>2012-12-21T11:42:31Z</wsu:Expires>
            </wsu:Timestamp>**
            <wsse:BinarySecurityToken>
                MIID2jCCAsKg...
            </wsse:BinarySecurityToken>
            <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
                <SignedInfo>
                    <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                    <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
                    <Reference URI="#Timestamp-913ca68e-05ed-44e1-9d6c-b2f293da5a1d">
                        <Transforms>
                            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                        </Transforms>
                        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                        <DigestValue>jdVY1HaDLusqO9UcxASE/GQHxyo=</DigestValue>
                    </Reference>
                    <Reference URI="#Body-e344eef1-2d8a-42d0-8a30-361ee61a8617">
                        <Transforms>
                            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                        </Transforms>
                        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                        <DigestValue>L60mQelZERvXgLEgWlW50uJNqEA=</DigestValue>
                    </Reference>
                </SignedInfo>
                <SignatureValue>
                    NmgACUqrYYc/Kp/F...
                </SignatureValue>
                <KeyInfo>
                    <wsse:SecurityTokenReference xmlns="">
                        <wsse:Reference URI="#SecurityToken-3f054298-711c-4090-95c3-105e1093f3ba" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3"/>
                    </wsse:SecurityTokenReference>
                </KeyInfo>
            </Signature>
        </wsse:Security>
    </S:Header>
    <S:Body>
        Body content...
    </S:Body>
</Envelope> 
```

我的解决方案对文档（正文和时间戳元素）进行了签名，但由于某种原因，wss4j 将时间戳元素放在该部分的底部，`<wsse:BinarySecurityToken>`然后`<Signature>`是错误的元素。请查看进行签名工作的来源：

```
 public static SOAPMessage signSoapMessage(SOAPMessage message, PrivateKey signingKey, X509Certificate signingCert, char[] passphrase) throws WSSecurityException {

    final String alias = "signingKey";
    final int signatureValidityTime = 3600; // 1hour in seconds

    WSSConfig config = new WSSConfig();
    config.setWsiBSPCompliant(false);

    WSSecSignature builder = new WSSecSignature(config);

    builder.setX509Certificate(signingCert);
    builder.setUserInfo(alias, new String(passphrase));
    builder.setUseSingleCertificate(true);
    builder.setKeyIdentifierType(WSConstants.BST_DIRECT_REFERENCE);

    try {
        Document document = DanskeUtils.toDocument(message);
        WSSecHeader secHeader = new WSSecHeader();
        secHeader.setMustUnderstand(true);
        secHeader.insertSecurityHeader(document);

        WSSecTimestamp timestamp = new WSSecTimestamp();
        timestamp.setTimeToLive(signatureValidityTime);
        document = timestamp.build(document, secHeader);

        List<WSEncryptionPart> parts = new ArrayList<WSEncryptionPart>();
        WSEncryptionPart timestampPart = new WSEncryptionPart("Timestamp", WSConstants.WSU_NS, "");
        WSEncryptionPart bodyPart = new WSEncryptionPart(WSConstants.ELEM_BODY, WSConstants.URI_SOAP11_ENV, "");
        parts.add(timestampPart);
        parts.add(bodyPart);
        builder.setParts(parts);

        Properties properties = new Properties();
        properties.setProperty("org.apache.ws.security.crypto.provider", "org.apache.ws.security.components.crypto.Merlin");
        Crypto crypto = CryptoFactory.getInstance(properties);
        KeyStore keystore = KeyStore.getInstance("JKS");
        keystore.load(null, passphrase);
        keystore.setKeyEntry(alias, signingKey, passphrase, new Certificate[]{signingCert});
        ((Merlin) crypto).setKeyStore(keystore);
        crypto.loadCertificate(new ByteArrayInputStream(signingCert.getEncoded()));

        document = builder.build(document, crypto, secHeader);
        return Utils.updateSoapMessage(document, message);
    } catch (Exception e) {
        throw new WSSecurityException(WSSecurityException.Reason.SIGNING_ISSUE, e);
    }
} 
```

你能帮我澄清一下在签署文件之前如何改变元素的顺序吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T08:40:17.197

WS-SEC 规范说“当元素被添加到标题块时，它们应该被添加到现有元素的前面。”

因此，如果您首先添加时间戳，它将位于 ws-header 中任何现有子元素的上方。由于您在添加 timstamp 后对消息进行签名，因此签名信息将再次预先附加到标头中，因此它将出现在时间戳元素上方。

如果您需要时间戳元素出现在最顶部，请将其添加到标题中作为最终过程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T19:48:57.720

构建签名后，您可以添加以下行：

```
timestamp.prependToHeader(secHeader); 
```

它会将时间戳元素放在您的 BinarySecurityToken 元素之上。

# c# - 从 System.Type 创建一个通用委托实例

> ID：14054525
> 
> 赞同：0
> 
> 时间：2012-12-27T12:14:15.147
> 
> 标签：c#, entity-framework, generics, reflection, delegates

有没有办法像这样拥有一个开放的泛型类型参数的委托实例？

```
Action<T> SomethingHappened; 
```

编译器给我一个错误。

我可能每两年问一次这个问题并忘记了。我找不到以前的类似问题，所以我还是问了。

我真正想做的是：

在实体框架中，我希望每当向表中添加一些新行或修改表中现有行中的某些数据时，我想编写一个通用的发布者框架，它可以告诉任何感兴趣的听众，这样那样的事情已经发生了。

例如，发布者可能会告诉所有有兴趣了解 Customer 表中的任何新行添加**或****Customer**表中的任何修改的听众。

 **侦听器可能是记录器、电子邮件发送者等。

目前，我正在做的是一个 kludge，但我想要一个更安全的解决方案。这是我目前正在做的事情：

```
 public partial class DaEntities : ObjectContext
    {
        Action<object, ObjectStateEntry> EntityModified;
        Action<object, ObjectStateEntry> EntityDeleted;
        Action<object, ObjectStateEntry> EntityAdded;

    public override int SaveChanges(SaveOptions options)
        {
            var modifiedEntities = 
                 ObjectStateManager.GetObjectStateEntries(
                 System.Data.EntityState.Added | System.Data.EntityState.Modified);

            var deletedEntities = 
                 ObjectStateManager.GetObjectStateEntries(
                 System.Data.EntityState.Deleted);

            foreach (var entry in modifiedEntities)
            {
                var type = GetObjectType(entry.GetType());

                // fire delegates here
            }

            return base.SaveChanges(options);
        }
    } 
```

在上述情况下，我宁愿有这样的东西：

```
public static Action<T, ObjectStateEntry> EntityModified;
public static Action<T, ObjectStateEntry> EntityDeleted;
public static Action<T, ObjectStateEntry> EntityAdded; 
```

并让他们指向一个像这样的通用方法：

```
public void SomethingHappenedToAnEntity<T, ObjectStateEntry>
    (T t, ObjectStateEntry e)
{
    // do stuff here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:39:58.007

有一个未定义的 'T' 并没有任何意义...... - 你真正想要的是一个自定义事件参数。您将不得不在某些时候强制您的类型具体化 - 因此，您可以传递如下参数：

```
Action<object> SomethingHappened; 
```

然后让你的代码分支在消费方法中......

或者，您可以作弊，让动态调度尝试为您找出类型（以较小的性能成本）-但这只会推动问题......

```
void Main()
{
    dynamic objectToProcess = new Moop();

    DoStuff(objectToProcess); //Dynamic dispatch will pick the best match automatically
}

public void DoStuff(Moop obj)
{
    Console.WriteLine(obj.GetType());
}

public void DoStuff(Gloop obj)
{
    Console.WriteLine(obj.GetType());
}

public void DoStuff(Bloop obj)
{
    Console.WriteLine(obj.GetType());
}

public class Moop {}
public class Gloop {}
public class Bloop {} 
```**

# google-apps-script - 谷歌应用脚 本 - 回调混淆

> ID：14054530
> 
> 赞同：0
> 
> 时间：2012-12-27T12:14:33.277
> 
> 标签：google-apps-script

我对以下代码示例的行为感到困惑。为什么我不能通过 app 对象在回调中访问 statusLabelU ？

它在参数中可用

顺便说一句，回调中参数变量 e 的类型是什么？

```
function doGet() {
  var app = UiApp.createApplication();

  var button = app.createButton('Enter Symbol');
  app.add(button);

  var symbolText = app.createTextBox().setName('symbolText').setId('symbolText');
  app.add(symbolText);

  var labelU = app.createLabel('Unknown symbol U')
                 .setId('statusLabelU');

  var labelK = app.createLabel('Unknown symbol K')
                 .setId('statusLabelK');
  app.add(labelU);
  app.add(labelK);

  var handler = app.createServerHandler('myClickHandler');

  handler.addCallbackElement(symbolText);
  button.addClickHandler(handler);

  return app;
}

function myClickHandler(e) {
  var app = UiApp.getActiveApplication();

  var symU = app.getElementById('symbolText');
  var symK = e.parameter.symbolText;

  var financeU = FinanceApp.getStockInfo(symU);
  var financeK = FinanceApp.getStockInfo(symK);

  var label = app.getElementById('statusLabelU');
  label.setText(financeU.name);

  var label = app.getElementById('statusLabelK');
  label.setText(financeK.name);

  app.close();
  return app;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-05T05:40:12.987

如果你跑

```
labelU.setName('labelU');
handler.addCallbackElement(labelU); 
```

您将能够像这样访问回调中标签的值：

```
var value = e.parameter.labelU; 
```

参数“e”（或“eventInfo”）包含有关如何触发回调的信息。有一些关于用户 ID、光标的 x/y 位置以及触发回调的源元素的一般信息。除此之外，显式添加到处理程序的小部件的值将作为参数访问。您可以随时查看内容

> 记录器.log(e);

并从编码环境（cmd/ctrl + return）中查看日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T11:38:01.913

实际上，您可以通过 app 对象在回调中访问 statusLabelU。除了通过 addCallbackElement 将它作为参数传递给事件处理程序之外，你不能做什么（至少我不知道任何方式）来访问 TextBox 的内容（你也可以将容器传递给 addCallbackElement，然后将所有元素传递给这个容器传递给您的事件处理程序）。那么在您的示例中会发生什么：

```
var symU = app.getElementById('symbolText'); 
```

返回文本框的一种代理，当转换为字符串“通用”时返回。

```
FinanceApp.getStockInfo('Generic'); 
```

然后依次返回未定义，然后将其设置为标签 statusLabelU 的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-28T15:09:02.377

是的，我花了一段时间才明白发生了什么。我最终理解的方式是这样的：

服务器处理东西，然后向客户端提供 UI。每次客户端做某事，比如点击一个按钮，他都会把这些东西提交给服务器，但是服务器不记得它之前做了什么，所以你在向客户端提供 UI 之前所做的所有这些变量，它不再知道。

因此，如果您希望服务器在为客户端提供服务之前记住它创建的那些值，那么您需要将它们与发送给客户端的 UI 一起嵌入，以便当他执行某些操作时，数据会被发送回服务器。

该嵌入的废话被认为是隐藏的回调元素，用户不与之交互的东西，并且仅用于在下一个处理操作期间将其传递回服务器。“正常”回调元素是服务器还不知道的数据，例如表单元素（姓名、地址等）。一旦用户点击提交按钮来处理它，它就需要知道这个信息，所以这就是为什么它被称为回调信息。

# c# - wcf 服务不想添加到我的 asp/silverlight Web 应用程序中

> ID：14054533
> 
> 赞同：0
> 
> 时间：2012-12-27T12:14:37.923
> 
> 标签：c#, asp.net, wcf, silverlight, web-applications

我有一个 asp 应用程序，想给它添加一些 Silverlight 外观，所以我在我的 asp 项目中添加了一个 Silverlight 应用程序（控件）。然后我向 asp 项目添加了一个 wcf 服务，现在当将此 wcf 服务添加到 Silverlight 项目时，它给了我一个错误。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:11:57.850

请确保 Silverlight 应用程序的客户端支持您在 WCF 方法中使用的类和关键字。

另外，您是否在 WCF 服务中的任何方法中返回了 DataTable？如果是，请使用实体列表或 DataSet 而不是 DataTable。

希望能帮助到你 ：）

# image - 如何从 JSF 页面中的外部路径加载图像？

> ID：14054535
> 
> 赞同：1
> 
> 时间：2012-12-27T12:14:49.143
> 
> 标签：image, jsf, image-uploading, graphicimage

您好，我再次在 stackOverflow 上提问 :)

我的数据库中有一个问题列表，每个问题都有一个我上传的图像，其中`<p:fileupload>`指定了外部路径，如 *C:\imgQuestions*，备份工作正常。

我的问题是我不知道如何在外部路径中显示图像。我在我的 JSF 页面上测试了这段代码，但没有结果。

```
<p:graphicImage value="C:\imgQuestions\test.jpg" /> 
```

我找到了这个讨论的目的，但我不明白我的案子是如何参与的。

[刷新页面后上传的图片才可用](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page)

有什么建议吗？

谢谢你。

# mysql - 在一个 MySql 字段中保存两个引用

> ID：14054537
> 
> 赞同：-3
> 
> 时间：2012-12-27T12:14:57.267
> 
> 标签：mysql

我需要在**一个 MySql 字段**中保存两个数值**a**和**b**。两者都是最多 11 个字符的自然数，它们将在下一个 SQL 结构中使用。

```
"SELECT FROM table WHERE field=a and foild=b" 
```

我想到了接下来的两种可能性：

1.  创建一个具有 {11},{11} 范围的*DECIMAL 。*
2.  创建一个包含 23 个字符的*VARCHAR*并将它们保存为“ab”字符串。

哪个是最好的选择？有没有更好的选择让它快速工作？

当说快速时，我的意思也是让**a**和**b**在我的查询中工作的“最便宜”的方式。这两个示例在使用它们之前都需要一个拆分过程，我不知道是否有任何方法可以直接在一个查询中执行此操作，将**a**和**b**作为*好奇字段.part1*和*好奇字段.part2* ...

谢谢，*（如果**好奇领域**太棒了，请原谅）*

**编辑：**

为什么我想在一列中存储多个值？

因为我有下一张**桌子**：

**整数值** *内容 [INT]*

**varchar 值** *内容 [VARCHAR (100)]*

**文本值** *内容 [TEXT]*

**魔法值** *内容[????]*

由于多种原因，它总是被保存在“内容”中，并且使“幻值”表具有内容 a 和内容 b 字段，这对于我正在处理的需求来说并不是一个很好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:16:19.060

## 不不不！

永远不要在一列中存储多个值。时期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:18:07.090

您不能在一列中保存两个十进制值并且该列的数据类型为`decimal`，最好将其存储为数据类型为的两列而`decimal`不是值以逗号分隔的列。

使用两个数字列比使用逗号分隔值的列搜索要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:21:01.197

如果您想将自然数存储在数据库中，而不是存储在十进制或整数中。如果您存储为整数

1.  检索很容易。
2.  您可以在 sql 本身中对它们进行操作或计算。

If you store in a single field, the above benefit you cant get and more over you need to split /concatenation it whenever you are saving or retrieving from db.

# objective-c - Objective C - UITableViewCell 异步加载图像

> ID：14054538
> 
> 赞同：2
> 
> 时间：2012-12-27T12:15:08.803
> 
> 标签：objective-c, uitableview

我正在展示一张桌子。每行都有一个从 URL 加载的图像图标。

由于同步下载图像会阻塞 UI，因此我通过大型中央调度实现了异步方式。

我的问题是，当我向下和向上滚动时，由于正在重复使用单元格，因此会显示不正确的图像。

我可以猜到为什么会发生这种情况 - 这是因为重新使用的单元格更新了图像，因此，以前的单元格现在将具有新下载的错误图像。解决这个问题的理想方法是什么？

这是我的代码。

对于下载的每个图像，我将其存储在一个名为“ImageStore”的单例类中。

```
// set the data for each cell - reusing the cell
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

   if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                      reuseIdentifier:@"UITableViewCell"];
    }

    // setting the image for each cell
    // first check if there is UIImage in the ImageStore already
    NSString *imageUrl = [obj objectForKey:@"image"];
    if (imageUrl) {
      if ([[ImageStore sharedStore] imageForKey:imageUrl]) {

        [[[tableView cellForRowAtIndexPath:indexPath] imageView] setImage:[[ImageStore sharedStore] imageForKey:imageUrl]];
      } else {

        dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
    dispatch_async(queue, ^{
      UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:
      [NSURL URLWithString:[obj objectForKey:@"image"]]]];
      dispatch_sync(dispatch_get_main_queue(), ^{
        [[ImageStore sharedStore]setImage:image forKey:imageUrl];
        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]withRowAnimation:UITableViewRowAnimationNone];

            [[[tableView cellForRowAtIndexPath:indexPath] imageView] setImage:image];
      });
    });
      }
    }
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:23:21.067

尝试这个：

```
NSString *imageUrl = [obj objectForKey:@"image"];
if (imageUrl) {
  if ([[ImageStore sharedStore] imageForKey:imageUrl]) {
    [[cell imageView] setImage:[[ImageStore sharedStore] imageForKey:imageUrl]];
  } else {
  dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
  dispatch_async(queue, ^{
     UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:
     [NSURL URLWithString:[obj objectForKey:@"image"]]]];
  dispatch_sync(dispatch_get_main_queue(), ^{
     [[cell imageView] setImage:image];
     [cell setNeedsLayout];
  });
  });
} 
```

**编辑**：检查这个[grand-central-dispatch-for-ios-lazy-loading](http://www.jukaela.com/2012/01/23/grand-central-dispatch-for-ios-lazy-loading/)以进行 tableview 延迟加载

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:50:13.137

来自王子答案的一点修改

```
NSString *imageUrl = [obj objectForKey:@"image"];

if (imageUrl) 
{
  if ([[ImageStore sharedStore] imageForKey:imageUrl]) 
  {
      //This condition means the current cell's image has been already downloaded and stored. So set the image to imageview
      [[cell imageView] setImage:[[ImageStore sharedStore] imageForKey:imageUrl]];
  } 
  else 
  {
      //While reusing this imageView will have previous image that will be visible till the image is downloaded. So i am setting this image as nil.
      [[cell imageView] setImage:nil]; 

      dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
      dispatch_async(queue, ^{

         //Called Immediately.
         UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:
         [NSURL URLWithString:[obj objectForKey:@"image"]]]];
         dispatch_sync(dispatch_get_main_queue(), ^{

           //Called when the image is downloaded
           //Store in any external object. So that next time reuse this will not be downloaded
           [[ImageStore sharedStore]setImage:image forKey:imageUrl];
           //Also set the image to the cell
           [[cell imageView] setImage:image];
           [cell setNeedsLayout];
        });
     });
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-24T21:30:24.197

看看`AFNetworking`......他们使处理网络回调变得容易！我推荐`AFNetworking`过去，`ASIHTTPRequest`因为`AFNetworking`它会保持更新，`ASIHTTPRequest`而不是......他们只是停止了开发。

这是一个如何使用`AFNetworking`异步下载图像的示例：

```
NSDictionary * object = [self.array objectAtIndex:indexPath.row];
NSDictionary * image = [object valueForKey:@"image"];
NSString *imageUrl = [image valueForKeyPath:@"url"];
NSURL *url = [NSURL URLWithString:imageUrl];
[cell.imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"empty-profile-150x150.png"]]; 
```

该`setImageWithURL: placeholderImage:`方法是我曾经这样做的......而不是多个方法和代码行，我用这一行完成了所有事情。

这整行代码完全符合您的要求。真的没有必要重新创建轮子:)。尽管通过较低级别的编程来真正了解幕后真正发生的事情的实现确实有所帮助。

查看链接以下载该库并查看有关如何使用它的更多示例……说真的，它使您的生活更轻松，而不必担心线程和 GCD。

[AFNetworking 演示](https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking)

我还没有深入研究代码，`AFNetworking`但是在将图像加载到单元格时，我的应用程序运行起来像黄油一样。看起来不错 ：）

哦，这里的文档`AFNetworking`：[AFNetworking Documentation](http://cocoadocs.org/docsets/AFNetworking/1.3.2/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:32:34.403

我也注意到了这种行为。

我能找到的唯一通用解决方案是禁用单元重用。

# asp.net - 使用 ASP.NET 将 unicode 字符串插入 SQL Server

> ID：14054543
> 
> 赞同：0
> 
> 时间：2012-12-27T12:15:29.813
> 
> 标签：asp.net, sql-server-2008, unicode

我创建了一个存储过程，如下所示：

```
CREATE PROCEDURE spIns_nav_Content
  @CategoryID nVarChar(50),
  @ContentText nVarChar(Max)
AS
  INSERT INTO dbo.nav_Content(CategoryID, ContentText, Active)
  VALUES (@CategoryID, @ContentText, 1) 
```

在我的 ASP.net 应用程序中，我有一个文本框和一个按钮。我的 aspx 页面如下所示：

```
<div>
  <asp:Label ID="Label1" runat="server" Text="Text here"></asp:Label>
  <asp:TextBox ID="txtContent" runat="server" Font-Names="ML-TTKarthika"></asp:TextBox>
  <asp:Button ID="btnUpload" runat="server" Text="Upload" onclick="btnUpload_Click" />
  <asp:Label ID="lblContent" runat="server" Font-Names="ML-TTKarthika"></asp:Label>
</div> 
```

单击时，`btnUpload`我需要将非英语（马拉雅拉姆语）文本`txtContent`作为 unicode 字符保存到数据库中。点击事件如下：

```
protected void btnUpload_Click(object sender, EventArgs e) {
  string connectionString = System.Configuration.ConfigurationManager.ConnectionStrings["TestMalayalamConnectionString"].ConnectionString;
  SqlConnection con = new SqlConnection(connectionString);
  con.Open();
  SqlCommand sqlCmd = con.CreateCommand();
  sqlCmd.CommandType = CommandType.StoredProcedure;
  sqlCmd.CommandText = "spIns_nav_Content";
  sqlCmd.Parameters.Add("@CategoryID", SqlDbType.NVarChar, 50).Value = "Rashriyam";
  sqlCmd.Parameters.Add("@ContentText", SqlDbType.NVarChar, -1).Value = txtContent.Text;
  sqlCmd.ExecuteScalar();
  con.Close();
  lblContent.Text = txtContent.Text;
} 
```

当我看到我的数据库表时，其中的值`ContentText`是英文的。我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:20:08.523

字体的目的是什么？

如果出于显示目的将英文字符映射到外文字符集（据我所知），那么数据库将存储英文字符，因为它们是正在输入的内容。

我输入`hello`了字体预览，可以看到字母有两个相同的字符`l`，然后是`o`.

实际上，您所做的只是在显示时将输入的英文字符替换为外来字符集。底层字符仍然是英文。

要存储 Unicode 字符，您必须在输入控件中实际输入 Unicode 字符。

# android - Android - 强制 PreferenceActivity 不自动保存

> ID：14054546
> 
> 赞同：1
> 
> 时间：2012-12-27T12:15:47.310
> 
> 标签：android, xml, sharedpreferences, preferenceactivity

我有一个 PreferenceActivity 来管理我的 SharedPreferences xml 文件。但我想自己管理那个 xml 文件（加载、更改、保存）。

我可以强制 PreferenceActivity 不自动保存我的 Settings/SharedPreferences 吗？

我只想使用该 Activity 使我的设置易于查看，并在 Activity 失去焦点时让用户更改。之后，我使用 SharedPreferences 手动保存更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:31:51.407

您可以设置首选项的属性 android:persistent="false"，然后它不会将其值存储到共享首选项中。

# sql-server - 将表与 Sql Server 合并时有 2 个不同的排序规则冲突？

> ID：14054550
> 
> 赞同：0
> 
> 时间：2012-12-27T12:16:18.417
> 
> 标签：sql-server, sql-server-2008, collation, nvarchar

我有 `DB1`哪个有*希伯来语*排序规则

我也有 `DB2`拉丁*通用*排序规则。

`DB1.dbo.tbl1`我被要求在和之间合并一个表（写一个查询）`DB2.dbo.tbl2`

我*可以*写在wuqery

```
insert into ...SELECT Col1 COLLATE Latin1_General_CI_AS... 
```

但我*厌倦*了这样做。

我想将两个数据库/表都设置为*相同*的排序规则，所以我不必每次都写`COLLATE...`

问题是 -

我应该转换`latin->hebrew` **还是** `Hebrew->latin`？

我们需要存储一切。（我们所有的文本列都是`nvarachr(x)`）

如果是这样，我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:05:35.063

如果您在结果数据库中使用 Unicode 数据类型 - `nvarchar(x)`，那么您将`COLLATE`在`INSERT`. SQL Server 会自动将源排序规则中的数据转换为 Unicode。`nvarchar`因此，如果要插入列，则不应转换任何内容。

# delphi - 如何知道为什么调用“OnCloseQuery” - MDI 子关闭或应用程序关闭？

> ID：14054551
> 
> 赞同：5
> 
> 时间：2012-12-27T12:16:23.970
> 
> 标签：delphi, mdi

我目前正在开发一个 MDI 应用程序。
每次创建新的 MDI 子窗口时，它的基础数据都会即时保存到 SQLite 数据库，并且列`open`设置为`1`，因此如果用户关闭程序并重新打开它，窗口就会恢复（在任何情况下坏^(TM)）。
因此，每个文档始终存在于数据库中——如果用户单击“保存”，唯一发生的事情就是该列`persistent`设置为`1`.
现在如果一个 MDI 子窗口关闭，`open`设置为`0`- 并且每一行都`persistent=0 AND open=0`注定要被删除。

由于这种行为，我不需要询问“保存文档？” 在应用程序关闭。
但我**确实**需要在每次关闭 MDI 子窗口时询问。如果调用 before ，
这一切都很容易做到，但遗憾的是事实并非如此。`Mainform.OnCloseQuery``MDIChild.OnCloseQuery`

**总结一下：**
我需要一种方法来知道是否`MDIChild.OnCloseQuery`被调用，因为

*   应用程序正在关闭，或
*   MDI 子窗口正在关闭。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T12:30:04.743

您需要`CloseQuery`在主窗体中覆盖受保护的虚拟方法。当它触发时，您知道应用程序正在关闭。但是继承的实现在触发主窗体上`CloseQuery`的事件之前调用 MDI 子级。`OnCloseQuery`

这里是`TCustomForm`实现`CloseQuery`：

```
function TCustomForm.CloseQuery: Boolean;
var
  I: Integer;
begin
  if FormStyle = fsMDIForm then
  begin
    Result := False;
    for I := 0 to MDIChildCount - 1 do
      if not MDIChildren[I].CloseQuery then Exit;
  end;
  Result := True;
  if Assigned(FOnCloseQuery) then FOnCloseQuery(Self, Result);
end; 
```

请注意，MDI 子`CloseQuery`级在此之前收到通知`Self`，即主窗体。

因此，在您的主要形式中，您需要：

```
type
  TMainForm = class(TForm);
  private
    FCloseQueryExecuting: Boolean;
  protected
    function CloseQuery: Boolean; override;
  public
    property CloseQueryExecuting: Boolean read FCloseQueryExecuting;
  end; 
```

然后是一个看起来像这样的实现：

```
function TMainForm.CloseQuery: Boolean; 
begin
  FCloseQueryExecuting := True;
  try
    Result := inherited CloseQuery;
  finally
    FCloseQueryExecuting := False;
  end;
end; 
```

然后 MDI 子项可以在他们的事件中检查主窗体`FCloseQueryExecuting`属性的状态。`OnCloseQuery`

# php - php变量中的Javascript代码

> ID：14054552
> 
> 赞同：0
> 
> 时间：2012-12-27T12:16:25.643
> 
> 标签：php, javascript

我想将 javascript 代码放入 php 变量，然后将其保存到 mysql 数据库，然后在页面上回显。我在将 javascript 代码保存到 php 变量并在页面上回显时遇到问题。

我尝试以这种方式将 javascript 代码保存到 php 变量，但出现错误：

```
$parameter = "<script language='JavaScript'>document.write(geoip_country_name());</script>"; 
```

为了从数据库中回显这个javascript代码，我想用这种方式：

```
$parameterecho = htmlentities($parameter);
echo $parameterecho; 
```

有没有更好的解决方案来将代码回显到页面以及如何将代码保存到 php 变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:35:25.877

我认为您可以使用 AJAX 实现您想要的。这是一个使用 jQuery 的模型：

```
$.post(
        save_parameter.php,
        {
            parameter : geoip_country_name()
        });

file save_parameter.php
// save parameter to DB

$.get(
        get_parameter.php,
        function(parameter) {
            alert(parameter);
        }, 'html');

file get_parameter.php
// get $parameter from DB
// echo  $parameter
// exit; 
```

**更新**：

您可以像这样使用 jQuery 动态加载/运行 javascript：

```
$.getScript("have_javascript_code.php"); 
```

**最后**：

但似乎你在谈论保存/使用不仅仅是 javascript 值。如果您真的想这样做，没有问题。尽管我建议您重新考虑您的方法并利用之前的代码片段。

*保存代码：*

```
$parameter   = "<script language='JavaScript'>document.write(geoip_country_name());</script>";
$code        = htmlspecialchars($parameter, ENT_QUOTES);
// insert to DB 
```

*输出代码：*

```
// get $code from DB
$code = htmlspecialchars_decode($code, ENT_QUOTES);
echo <<<EOF
<script type="text/javascript">
$code
</script>
EOF; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:22:11.393

Javascript 和 PHP 不一样。你在想，呵呵！显然，但我的意思是 Javascript 是一种“客户端”技术，而 PHP 是一种“服务器端”技术。

您的 Javascript 只能从 PHP 变量中读取，因为首先在服务器上处理 .php 页面，然后返回输出。因此，任何变量都将输出到 JS 中。

然而，反之则不然。您的 Javascript 无法访问任何 PHP 信息，因为它驻留在服务器上。使 PHP 可以访问 JS 变量的唯一方法是使用所需的变量+值将 POST 或 GET 返回到服务器（再次调用 .php）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T12:23:54.090

PHP 在服务器上运行，因此代码将在服务器上执行，当页面首先加载时，整个 PHP 将被执行，并且您`$parameter`将是未定义的，因为 javascript 在客户端运行，它将在页面加载后或 php 执行后启动更倾向于。

# ruby-on-rails - 带有可选参数的 Sphinx 搜索

> ID：14054554
> 
> 赞同：1
> 
> 时间：2012-12-27T12:16:49.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search, sphinx, thinking-sphinx

我想使用带有可选参数的搜索（Thinking Sphinx）。

在我的控制器中，我有 3 个参数：

```
params[:model_id], params[:engine_id], params[:city_id] 
```

控制器

```
 def search  
    @search = Car.search :conditions => {
      :model_id => params[:model_id],
      :engine_id => params[:engine_id],
      :city_id => params[:city_id]
      }
  end 
```

模型

```
define_index do
    indexes model_id
    indexes city_id
    indexes area_id
    indexes engine_id
    indexes mileage
  end 
```

当其中一个参数为 nil 时，我收到错误消息：

提取的源代码（第 4 行附近）：

```
1: Result:
2: %br
3: %br
4:   = render :partial => "search_item", :collection => @search, :as => :item

index car_core: syntax error, unexpected TOK_FIELDLIMIT near '  @engine_id  @city_id' 
```

UPD1：

我的表格

```
= form_tag search_adverts_path, :method => :get, :id => 'admin_quick_filter' do
  %label
    = t('form.mileage')
  = text_field_tag :min_mileage, params[:min_mileage]
  = text_field_tag :max_mileage, params[:max_mileage]
  %br
  = select_tag :model_id, options_for_select(Model.all.collect{|c| [c.name, c.id]} , params[:model_id]), :include_blank => true
  %br
  = select_tag :engine_id, options_for_select(Engine.all.collect{|c| [c.name, c.id]} , params[:engine_id]), :include_blank => true
  %br
  = select_tag :city_id, options_for_select(City.all.collect{|c| [c.name, c.id]} , params[:city_id]), :include_blank => true
  %br
  %br
  = submit_tag t('form.search')

= render "search_result" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:31:49.153

在搜索时，当您提供时`:conditions`，ThinkingSphinx 会在您的查询中附加 @filedname 以将搜索范围扩展到该字段。而狮身人面像不处理`nil values`。所以你应该在将它传递给方法之前检查 nil 值`search()`。

> 请记住，Sphinx 不支持 SQL 比较运算符——它有自己的查询语言。:conditions 选项必须是一个散列，每个键是一个字段，**每个值是一个字符串**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:28:46.287

```
define_index do
  indexes name

  has mileage
end 
```

Car.search :with => {:mileage => 100..150000}

工作过

# java - GIF 动画在 JFrame 中播放速度极快

> ID：14054555
> 
> 赞同：2
> 
> 时间：2012-12-27T12:16:52.377
> 
> 标签：java, image, swing, jlabel, animated-gif

```
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.io.InputStream;

import javax.imageio.ImageIO;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

import common.ResourcesToAccess;

public class RecordingStartingThread extends Thread{
    @Override
    public void run(){
        JFrame f = new JFrame();
        ImageIcon reel = new ImageIcon("src/images/reel.GIF");
        JLabel label = new JLabel(reel);
        reel.setImageObserver(label);
        f.getContentPane().add(label);
        f.setUndecorated(true);
        f.setSize(300, 300);
        f.setVisible(true);
    }
    public static void main(String[] args) {
        new RecordingStartingThread().start();
    } 
} 
```

**问题：** GIF 播放速度非常快。

**问题：** 如何确保 GIF 以正常速度播放？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:37:29.833

至于 GIF 速度播放 - 我也遇到过这个问题。如果我没记错的话，这是由 GIF 文件中帧速率的“默认”（或未提供？）值引起的。一些网络浏览器“覆盖”了该帧速率，以便 GIF 正确播放。

结果，我创建了一个转换 GIF（读取 GIF -> 写入 GIF）并给出用户提供的帧速率的类。`com.madgag.gif.fmsware.AnimatedGifEncoder`class 是一个外部库，我通过 Maven 链接到该项目：`animated-gif-lib-1.0.jar`

```
public final class GIFUtils {

private GIFUtils() {
}

public static List<BufferedImage> extractFrames(String filePath) throws IOException {
    return extractFrames(new File(filePath));
}

public static List<BufferedImage> extractFrames(File file) throws IOException {
    List<BufferedImage> imgs = new LinkedList<BufferedImage>();
    ImageReader reader = ImageIO.getImageReadersBySuffix("GIF").next();
    ImageInputStream in = null;
    try {
        in = ImageIO.createImageInputStream(new FileInputStream(file));
        reader.setInput(in);
        BufferedImage img = null;
        int count = reader.getNumImages(true);
        for(int i = 0; i < count; i++) {
            Node tree = reader.getImageMetadata(i).getAsTree("javax_imageio_gif_image_1.0");
            int x = Integer.valueOf(tree.getChildNodes().item(0).getAttributes()
                    .getNamedItem("imageLeftPosition").getNodeValue());
            int y = Integer.valueOf(tree.getChildNodes().item(0).getAttributes()
                    .getNamedItem("imageTopPosition").getNodeValue());
            BufferedImage image = reader.read(i);
            if(img == null) {
                img = new BufferedImage(image.getWidth() + x, image.getHeight() + y,
                        BufferedImage.TYPE_4BYTE_ABGR);
            }

            Graphics2D g = img.createGraphics();
            ImageUtils.setBestRenderHints(g);
            g.drawImage(image, x, y, null);
            imgs.add(ImageUtils.copy(img));
        }
    }
    finally {
        if(in != null) {
            in.close();
        }
    }
    return imgs;
}

public static void writeGif(List<BufferedImage> images, File gifFile, int millisForFrame)
        throws FileNotFoundException, IOException {
    BufferedImage firstImage = images.get(0);
    int type = firstImage.getType();

    ImageOutputStream output = new FileImageOutputStream(gifFile);

    // create a gif sequence with the type of the first image, 1 second
    // between frames, which loops continuously
    GifSequenceWriter writer = new GifSequenceWriter(output, type, 100, false);

    // write out the first image to our sequence...
    writer.writeToSequence(firstImage);
    for(int i = 1; i < images.size(); i++) {
        BufferedImage nextImage = images.get(i);
        writer.writeToSequence(nextImage);
    }

    writer.close();
    output.close();
}

public static Image createGif(List<BufferedImage> images, int millisForFrame) {
    AnimatedGifEncoder g = new AnimatedGifEncoder();
    ByteArrayOutputStream out = new ByteArrayOutputStream(5 * 1024 * 1024);
    g.start(out);
    g.setDelay(millisForFrame);
    g.setRepeat(1);
    for(BufferedImage i : images) {
        g.addFrame(i);
    }
    g.finish();
    byte[] bytes = out.toByteArray();
    return Toolkit.getDefaultToolkit().createImage(bytes);
} 
```

`GifSequenceWriter`看起来像这样：

```
public class GifSequenceWriter {
    protected ImageWriter gifWriter;
    protected ImageWriteParam imageWriteParam;
    protected IIOMetadata imageMetaData;

    public GifSequenceWriter(ImageOutputStream outputStream, int imageType, int timeBetweenFramesMS,
            boolean loopContinuously) throws IIOException, IOException {
        gifWriter = getWriter();
        imageWriteParam = gifWriter.getDefaultWriteParam();
        ImageTypeSpecifier imageTypeSpecifier = ImageTypeSpecifier.createFromBufferedImageType(imageType);

        imageMetaData = gifWriter.getDefaultImageMetadata(imageTypeSpecifier, imageWriteParam);

        String metaFormatName = imageMetaData.getNativeMetadataFormatName();

        IIOMetadataNode root = (IIOMetadataNode) imageMetaData.getAsTree(metaFormatName);

        IIOMetadataNode graphicsControlExtensionNode = getNode(root, "GraphicControlExtension");

        graphicsControlExtensionNode.setAttribute("disposalMethod", "none");
        graphicsControlExtensionNode.setAttribute("userInputFlag", "FALSE");
        graphicsControlExtensionNode.setAttribute("transparentColorFlag", "FALSE");
        graphicsControlExtensionNode.setAttribute("delayTime", Integer.toString(timeBetweenFramesMS / 10));
        graphicsControlExtensionNode.setAttribute("transparentColorIndex", "0");

        IIOMetadataNode commentsNode = getNode(root, "CommentExtensions");
        commentsNode.setAttribute("CommentExtension", "Created by MAH");

        IIOMetadataNode appEntensionsNode = getNode(root, "ApplicationExtensions");

        IIOMetadataNode child = new IIOMetadataNode("ApplicationExtension");

        child.setAttribute("applicationID", "NETSCAPE");
        child.setAttribute("authenticationCode", "2.0");

        int loop = loopContinuously ? 0 : 1;

        child.setUserObject(new byte[] { 0x1, (byte) (loop & 0xFF), (byte) (loop >> 8 & 0xFF) });
        appEntensionsNode.appendChild(child);

        imageMetaData.setFromTree(metaFormatName, root);

        gifWriter.setOutput(outputStream);

        gifWriter.prepareWriteSequence(null);
    }

    public void writeToSequence(RenderedImage img) throws IOException {
        gifWriter.writeToSequence(new IIOImage(img, null, imageMetaData), imageWriteParam);
    }

    public void close() throws IOException {
        gifWriter.endWriteSequence();
    }

    private static ImageWriter getWriter() throws IIOException {
        Iterator<ImageWriter> iter = ImageIO.getImageWritersBySuffix("gif");
        if(!iter.hasNext()) {
            throw new IIOException("No GIF Image Writers Exist");
        }
        return iter.next();
    }

    private static IIOMetadataNode getNode(IIOMetadataNode rootNode, String nodeName) {
        int nNodes = rootNode.getLength();
        for(int i = 0; i < nNodes; i++) {
            if(rootNode.item(i).getNodeName().compareToIgnoreCase(nodeName) == 0) {
                return (IIOMetadataNode) rootNode.item(i);
            }
        }
        IIOMetadataNode node = new IIOMetadataNode(nodeName);
        rootNode.appendChild(node);
        return node;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T08:46:55.783

解决这个问题的最简单方法是创建一个“格式正确”的 .gif 文件，即包含适当的帧速率。这可以借助各种在线转换器来实现，只需 google “gif speed changer”即可。

# c# - 遍历后加快数组查找速度？

> ID：14054557
> 
> 赞同：8
> 
> 时间：2012-12-27T12:16:59.577
> 
> 标签：c#, performance, gpu, lookup

我有一个 123MB 的大`int`数组，基本上是这样使用的：

```
private static int[] data = new int[32487834]; 
static int eval(int[] c)
{
    int p = data[c[0]];
    p = data[p + c[1]];
    p = data[p + c[2]];
    p = data[p + c[3]];
    p = data[p + c[4]];
    p = data[p + c[5]];
    return data[p + c[6]];
} 
```

`eval()`被调用了很多（〜50B次）不同的`c`，我想知道我是否（以及如何）可以加快速度。

我已经使用了一个不安全的函数和一个使用所有 CPU[的固定数组。](https://gist.github.com/4387720)[它是 RayW 的TwoPlusTwo 7 卡评估器](http://www.codingthewheel.com/archives/poker-hand-evaluator-roundup#2p2)的 C# 端口。C++ 版本的速度要快得多。

GPU可以用来加速吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:22:29.483

1.  将数组引用缓存到局部变量中。由于多种原因，静态字段访问通常比本地访问慢（其中一个原因是该字段可以更改，因此必须一直重新加载它。JIT 可以更自由地优化本地）。
2.  不要使用数组作为方法的参数。硬编码 7 个整数索引。这减少了数组分配、间接惩罚和边界检查。
3.  使用不安全的代码来索引数组。这将消除边界检查。使用 a`GCHandle`来修复数组并将指针缓存在静态字段中（不要只使用固定块 - 我相信它与输入它有一定的（小）开销。不确定）。
4.  作为固定阵列的替代方法，使用`VirtualAlloc`和使用大页面分配 123MB 阵列。这减少了 TLB 失误。

所有这些都是硬核低级优化。它们仅适用于您需要最高性能的情况。

我认为在优化此功能方面我们几乎处于极限。如果您显示函数的调用者，我们可能只能做得更好，以便它们可以作为一个单元进行优化。

# django - django 嵌套模型字段访问

> ID：14054560
> 
> 赞同：3
> 
> 时间：2012-12-27T12:17:09.937
> 
> 标签：django, django-models

这是场景：

我有一个学生模型，其主题字段与主题模型的多对多关系相关

```
class Student(models.Model):
    (...)
    subject = models.ManyToManyField(Subject) 
```

在主题模型中，我有一个与程序模型的多对多关系相关的程序字段。主题模型也有 CharField 名称。

```
class Subject(models.Model):
    (...)
    program = models.ManyToManyField(Programs) 
```

在程序模型中，我有一个字段：

```
class Programs(models.Model):
    name = models.CharField(max_length=40)
    (...) 
```

Django 为多对多字段创建附加表。在我的应用程序中，我创建（使用表单）一个程序和与程序相对应的主题。然后我创建一些学生并选择一些科目。如何访问程序名称字段 (Student.objects.all()) 并显示 Student 正在使用的程序名称？
是否有可能，或者我需要在学生模型中创建与程序模型的多对多关系相关的附加字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:34:40.897

我是否认为您想返回属于 student.subject 中每个主题的程序的程序名称列表？

如果是这样，您可以将其用作学生模型的方法：

```
def get_program_names(self)
    programs = []
    for subject in self.subjects:
        programs += [program.name for program in subject.program]
    return programs 
```

但是，从您的问题看来，您希望只返回一个程序名称。如果是这种情况，那么也许你应该用 ForeignKey 字段替换你的 manyToMany 字段，这给出了两个模型之间的一对一关系，这意味着这个方法应该有效：

```
def get_program_name(self):
    return self.subject.program.name 
```

（无论哪种方式，您都没有理由必须在学生模型和程序模型之间创建直接链接，除非您希望减少数据库调用的次数，在这种情况下，您可以向 Student 添加一个字段，该字段更新为最新的程序名称或类似名称。）

我希望我没有误解你的问题。

# internet-explorer-8 - IE8 中的缩放和平移

> ID：14054562
> 
> 赞同：1
> 
> 时间：2012-12-27T12:17:16.993
> 
> 标签：internet-explorer-8, zooming, pan

如何放大和`div`平移`IE8`？

任何支持缩放和平移的 javascript 库`ie8`

当我尝试使用看起来像这样的 tweenlite 时 **[http://jsfiddle.net/jophine/FLt9X/5/](http://jsfiddle.net/jophine/FLt9X/5/)**

它在所有浏览器上都可以正常工作，除了`IE8`.

![在此处输入图像描述](../Images/ad58c0d8f6ed363d98ff48e550fdffe8.png)

![在此处输入图像描述](../Images/9dfb1a1a3f9053d319f10babddccc4de.png)

# java - 当在 UI 中留空时，Struts 表单长字段不作为 null 出现

> ID：14054563
> 
> 赞同：2
> 
> 时间：2012-12-27T12:17:21.510
> 
> 标签：java, struts, struts-config, struts-validation, apache-commons-beanutils

在 struts-config.xml 中

```
<form-bean name="myForm" type="com.validator.CustomeDynaValidatorForm">
      <form-property name="testId" type="java.lang.Long"/>
</form-bean> 
```

在validation.xml

```
<form name="myForm">
      <field property="testId" depends="required">
        <msg name="required" key="test ID required."/>
      </field>

</form> 
```

在验证规则.xml

```
<validator name="required"
            classname="com.validator.CustomFieldChecks"
               method="validateRequired"
               methodParams="java.lang.Object,
                       org.apache.commons.validator.ValidatorAction,
                       org.apache.commons.validator.Field,
                       org.apache.struts.action.ActionMessages,
                       org.apache.commons.validator.Validator,
                       javax.servlet.http.HttpServletRequest"
                  msg=""/> 
```

在 CustomFieldChecks.java 中

```
public static boolean validateRequired(Object bean, ValidatorAction va, Field field, ActionMessages errors, 
                                           Validator validator, HttpServletRequest request)
    {
        String value = null;

        if (isString(bean))
        {
            value = (String) bean;
        }
        else
        {
            value = ValidatorUtils.getValueAsString(bean, 
                                                    field.getProperty());
            **// here value is 0 , when the field is left blank in UI** 
        }

        if (GenericValidator.isBlankOrNull(value))
        {
            //add error message

            return false;
        }
        else
        {
            return true;
        }
    } 
```

有人可以告诉我，我如何确保如果该字段在 UI 中留空，则该值应为 null 而不是 0。有没有办法这样做？？？我正在使用 struts 1.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:41:04.483

AFAIK，对于 Struts1，您应该使用 String 而不是 Long 来表示用户输入的值，因为这是 Struts 用用户实际输入的内容填充表单 bean 并让您重新显示带有错误值的输入页面的唯一方法。

Struts 将尝试将空字符串转换为 Long，如果字符串不代表有效的 long 值，则将 Long 初始化为 0。这是 Struts 的众多弱点之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T05:21:36.980

是的 。找到了修复。在 web.xml 中使用下面的代码

```
<init-param>
      <param-name>convertNull</param-name>
      <param-value>true</param-value>
</init-param> 
```

所以这会将默认的 0 转换为 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:56:02.373

这是因为您的字段存在，当不存在时它只是返回 null

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:56:34.673

```
GenericValidator.isBlankOrNull(value) behavior is 

Checks if the field isn't null and length of the field is greater than zero not including whitespace. 
```

因此，您在代码中将所有传入值转换为字符串。'0' 也不是空的，所以它不会进入 if 条件。

您可以像这里一样更改您的代码

> ```
> if (GenericValidator.isBlankOrNull(value) ) {
>     ...
> } else if (value != null && value.equals("0")) {
> //Add here your sepecial error message for zero
> 
> } 
> ```

# android - 剪贴板管理器，如何在 android < 3

> ID：14054569
> 
> 赞同：1
> 
> 时间：2012-12-27T12:17:43.987
> 
> 标签：android, android-service

> **可能重复：**
> [适用于所有 API 级别的 Android 剪贴板代码](https://stackoverflow.com/questions/9027629/android-clipboard-code-that-works-on-all-api-levels)

在 android > 3 上，要将文本复制到剪贴板，我使用以下代码：

```
ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE); 
```

我没有找到如何使用 android < 3 复制文本

谢谢！

# java - Android jfeinstein10/SlidingMenu 布局错误

> ID：14054577
> 
> 赞同：1
> 
> 时间：2012-12-27T12:18:09.247
> 
> 标签：java, android, xml

我正在使用[jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu/) ...

在下图中，它是错误的屏幕截图。请注意，当我滑动关闭菜单时，菜单内容显示在内容活动的顶部。

我正在使用 XML 实现：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.slidingmenu.lib.SlidingMenu xmlns:sliding="http://schemas.android.com/apk/res-auto"
        android:id="@+id/slidingmenulayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        sliding:viewAbove="@layout/activity_start"
        sliding:viewBehind="@layout/activity_menu"
        sliding:touchModeAbove="fullscreen"
        sliding:behindScrollScale="@dimen/behind_scroll_scale"
        sliding:behindOffset="@dimen/behind_offset"
        sliding:shadowDrawable="@drawable/shadow"
        sliding:shadowWidth="@dimen/shadow_width"
        sliding:selectorEnabled="true"
        />

</LinearLayout> 
```

@layout/activity_menu：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <ListView
        android:id="@+id/list_menu"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

</FrameLayout> 
```

Main_Activity.java：

```
public class MainActivity extends SherlockActivity{

    private SlidingMenu menu;
    private ActionBar action;
    private ListView listView;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        MenuClass menu_data[] = populateMenuData();     

        MenuAdapter adapter = new MenuAdapter(this, R.layout.listview_row_item, menu_data);

        listView = (ListView)findViewById(R.id.list_menu);
        listView.setAdapter(adapter);

        menu = (SlidingMenu) findViewById(R.id.slidingmenulayout);

        menu.setFadeEnabled(true);
        menu.setFadeDegree(0.35f);

        action = getSupportActionBar();
        action.setDisplayHomeAsUpEnabled(true);

        menu.setBehindCanvasTransformer(new CanvasTransformer() {
            @Override
            public void transformCanvas(Canvas canvas, float percentOpen) {
                float scale = (float) (percentOpen * 0.25 + 0.75);
                canvas.scale(scale, scale, canvas.getWidth() / 2, canvas.getHeight() / 2);
            }
        });
    } 
```

谁能帮助我或告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:03:34.167

我使用这个库取得了更大的成功。 [https://github.com/iPaulPro/SlidingMenu](https://github.com/iPaulPro/SlidingMenu)

它提供与 3.0 之前的设备的向后兼容性。我已经使用它工作了几个星期，并且非常高兴。

我尝试了您正在使用的库，并让它工作，但在设备旋转等时遇到了问题......

希望有帮助。

# php - SQL-查询以使用使用 datepicker 选择的日期选择数据

> ID：14054582
> 
> 赞同：2
> 
> 时间：2012-12-27T12:18:38.573
> 
> 标签：php, mysql, sql

我想根据使用 datepicker 选择的日期从数据库中获取数据。

我正在使用以下查询来获取所选日期之间的数据，但是当我选择`from_date`并`to_date`使用 datepicker 并单击一个按钮时，我需要显示与所选日期相关的所有数据。我应该在查询中进行哪些更改（我认为在**Between**之后）。有人请帮助我。提前致谢。我想将它与 PHP 一起用作服务器页面。

```
SELECT
  EP.Employee_Id,
  TD.Training_Id,
  TD.Training_Date,
  DT.Topic_Name,
  EP.Employee_Name
FROM
  `training_details` TD 
  INNER JOIN `domain_topics` DT ON DT.Domain_Id=TD.Domain_Id 
  INNER JOIN `trainer_details` TRD ON TRD.Training_Id = TD.Training_Id
  INNER JOIN `employee_profile` EP ON TRD.Trainer_Id = EP.Employee_Id
WHERE
  TD.Training_Date BETWEEN '2012-12-01' AND '2012-12-31'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:37:45.857

这可能会有所帮助：如果您使用的是**POST**方法：

```
SELECT  EP.Employee_Id, TD.Training_Id, TD.Training_Date, DT.Topic_Name, EP.Employee_Name 
FROM `training_details` TD
INNER JOIN `domain_topics` DT ON DT.Domain_Id=TD.Domain_Id 
INNER JOIN `trainer_details` TRD ON TRD.Training_Id = TD.Training_Id
INNER JOIN `employee_profile` EP ON TRD.Trainer_Id = EP.Employee_Id
WHERE TD.Training_Date >= '$_POST[from_date]' AND TD.Training_Date <= '$_POST[to_date]'; 
```

或在您的查询`WHERE`子句中是这样的：

```
WHERE TD.Training_Date BETWEEN $_POST[from_date] AND $_POST[to_date] 
```

如果您使用**GET**方法，它将是：

```
WHERE TD.Training_Date BETWEEN $_GET[from_date] AND $_GET[to_date] 
```

# google-maps - 如何在电话间隙中防止两次 Google 地图 v 3.0 用户权限警报？

> ID：14054583
> 
> 赞同：3
> 
> 时间：2012-12-27T12:18:46.187
> 
> 标签：google-maps, cordova, userlocation

我在我的站点中使用 Google map API 3.0，我使用 PhoneGap 构建我的站点，出现了两次用户权限警报。如何防止这些警报？

# arrays - 在 VB.NET 中将字符串数组转换为双精度数组

> ID：14054585
> 
> 赞同：2
> 
> 时间：2012-12-27T12:18:57.267
> 
> 标签：arrays, vb.net, type-conversion

我有一个包含双精度和整数的字符串“TextLine”。现在我想将字符串拆分为其部分并将生成的字符串数组转换为双精度。不幸的是，当我尝试这样做时，我得到了一个重载解析错误（对于“解析”）。我究竟做错了什么？

```
Dim doubleAry As Double() = Array.ConvertAll(TextLine.Split(vbTab), [Double].Parse) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:24:50.380

你可以这样做：

```
Dim doubleAry As Double() = Array.ConvertAll(TextLine.Split(vbTab), New Converter(Of String, Double)(AddressOf Double.Parse)) 
```

但是，如果您提供的字符串数组包含任何无效项，则会引发异常并且无法转换任何项。如果您想处理无效项目并将其默认为 0，您可以实现自己的转换器，如下所示：

```
Private Function DoubleConverter(ByVal text As String) As Double
    Dim value As Double = 0
    Double.TryParse(text, value)
    Return value
End Function 
```

然后，您可以像这样使用它：

```
Dim doubleAry As Double() = Array.ConvertAll(TextLine.Split(vbTab), New Converter(Of String, Double)(AddressOf DoubleConverter)) 
```

# javascript - 将数据保存在 html 标签属性中

> ID：14054586
> 
> 赞同：4
> 
> 时间：2012-12-27T12:18:59.257
> 
> 标签：javascript, jquery, html

如何将一些数据保存为 html 标签属性？例如，给定数据`asd/45.33/blah`，我需要将这些数据保存在 html 中，然后使用 jquery 获取这些数据：

```
 $("#my_tag").attr("special_attribute"); 
```

这是可能的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T12:26:48.447

使用自定义属性会使您的文档无效，您可以使用 HTML5`data-*`属性并使用 jQuery 获取/设置值，您可以使用`data`方法，例如，如果您有一个数据属性调用`data-special`，您可以通过以下方式获取它的值：

```
var value = $("#my_tag").data("special"); 
```

并以这种方式设置/更改值：

```
$("#my_tag").data("special", "value"); 
```

[http://api.jquery.com/data/](http://api.jquery.com/data/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T12:31:31.873

如果您需要将它与 jQuery 一起使用，那么更好的方法是使用`data-`属性。

声明一个 html 标签将如下所示：

```
<div id="myDiv" data-url="asd/45.33/blah"></div> 
```

使用数据很简单：

```
var url = $('#myDiv').data('url') 
```

更多关于[jQuery 数据](http://api.jquery.com/data/)。

关于[attr 与 data](https://stackoverflow.com/questions/7261619/jquery-data-vs-attr)的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:20:25.517

USE`attr()`它用于获取值以及设置属性值。

```
$("#my_tag").attr("special_attribute",'asd/45.33/blah'); 
```

详情[http://api.jquery.com/attr/](http://api.jquery.com/attr/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:20:54.837

是的，有可能。但是它不会验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T12:21:29.503

是的你可以。我认为您应该为此使用隐藏字段：

```
<input type="hidden" id="my_tag" /> 
```

然后通过 jquery 访问它：

```
$("#my_tag").attr("value", "myvalue");
$("#my_tag").attr("value"); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-27T12:35:20.763

您可以将 html 元素中的值保存为：

```
$("htmlelement").data("key","value"); 
```

在您的情况下，它将是：

```
$("#my_tag").data("special_attribute","asd/45.33/blah"); 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-12-27T12:20:11.607

```
var html = "<p>HTML</p>";
$("#my_tag").attr("special_attribute", function() {
    return html;
}); 
```

现在检索它：

```
var s = $("#my_tag").attr("special_attribute");
alert(s) 
```

# android - 什么是 START_STICKY、START_NOT_STICKY 和 START_REDELIVER_INTENT 服务

> ID：14054588
> 
> 赞同：65
> 
> 时间：2012-12-27T12:19:02.000
> 
> 标签：android, android-intent

我无法理解

1.  START_STICKY，
2.  START_NOT_STICKY 和
3.  START_REDELIVER_INTENT

任何人都可以用例子清楚地解释。

我浏览了[这个](https://stackoverflow.com/questions/9093271/start-sticky-and-start-not-sticky)链接，但无法清楚地理解它。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-12-27T12:35:17.057

这些与服务有关。我们都知道服务会在后台继续运行，它们也会消耗一些内存来执行。

所以，随着越来越多的应用程序在android设备上运行，设备内存不断变低，到时候，当设备内存严重不足时，android系统开始终止进程​​，以释放进程占用的内存.

但是您可能正在对服务执行一些重要任务，这些任务也可能在服务停止时终止。*所以这些概念是告诉android系统当设备内存稳定以及准备好重新启动服务时你想要执行什么操作。*

对这些最简单的解释可能是，

`START_STICKY-`告诉系统在从低内存恢复后，在有足够内存可用时创建服务的新副本。在这里，您将丢失之前可能计算过的结果。

`START_NOT_STICKY-`告诉系统不要费心重新启动服务，即使它有足够的内存。

`START_REDELIVER_INTENT-`告诉系统在崩溃后重新启动服务，并重新传递崩溃时存在的意图。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T12:35:33.950

好吧，我阅读了您链接中的主题，它说明了一切。

如果您的服务由于内存不足而被 Android 杀死，并且 Android 清除了一些内存，那么...

1.  STICKY：...Android 将重新启动您的服务，因为设置了该特定标志。
2.  NOT_STICKY: ...Android 不会关心重新开始，因为标志告诉 Android 它不应该打扰。
3.  REDELIVER_INTENT: ...Android 将重新启动服务并将相同的意图重新传递给`onStartCommand()`服务，因为，再次，标志。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-12T16:10:30.187

仅当手机内存不足并在服务完成执行之前终止服务时，这两个代码才相关。START_STICKY 告诉操作系统在它有足够的内存后重新创建服务，并以空意图再次调用 onStartCommand()。START_NOT_STICKY 告诉操作系统不要再费心重新创建服务。还有第三个代码 START_REDELIVER_INTENT 告诉操作系统重新创建服务并将相同的意图重新传递给 onStartCommand()。

Dianne Hackborn 的这篇文章比官方文档更好地解释了这个背景。

来源：[http ://android-developers.blogspot.com.au/2010/02/service-api-changes-starting-with.html](http://android-developers.blogspot.com.au/2010/02/service-api-changes-starting-with.html)

这里的关键部分是函数返回的新结果代码，告诉系统如果它的进程在运行时被杀死，它应该如何处理服务：

> START_STICKY 与之前的行为基本相同，服务保持“启动”状态，稍后将由系统重新启动。与平台先前版本的唯一区别是，如果它因为进程被终止而重新启动，onStartCommand() 将在服务的下一个实例上以空 Intent 调用，而不是根本不调用。使用此模式的服务应始终检查此情况并适当处理。
> 
> START_NOT_STICKY 表示，在从 onStartCreated() 返回后，如果进程被杀死且没有剩余的启动命令可交付，则服务将停止而不是重新启动。这对于仅在执行发送给它们的命令时才运行的服务更有意义。例如，一项服务可能会从警报开始每 15 分钟启动一次，以轮询某些网络状态。如果它在做这项工作时被杀死，最好让它停止并在下次警报触发时启动。
> 
> START_REDELIVER_INTENT 类似于 START_NOT_STICKY，除非服务的进程在它为给定意图调用 stopSelf() 之前被终止，否则该意图将被重新传递给它，直到它完成（除非经过多次尝试它仍然无法完成，此时系统放弃）。这对于接收工作命令的服务很有用，并希望确保它们最终完成每个发送命令的工作。

# iphone - iOS6 和 iOS5 中 UIImage Orientation 的不同行为

> ID：14054589
> 
> 赞同：0
> 
> 时间：2012-12-27T12:19:04.103
> 
> 标签：iphone, objective-c, ios, uiimageorientation

我创建了一个仅纵向的 iphone 应用程序，即使我在旋转设备时也制作了一个支持横向方向的视图 在 iOS6 中一切正常，但是当我在 iOS5 上运行它时，横向模式不正确，它显示了一些讨厌的图像。（这两款设备都是 ipod 3.5" 视网膜显示屏）

为什么会这样？？

在此处添加我的代码和屏幕截图

**在 iOS6** ![第一视角](../Images/24ce2ee96e6a0fc1bbf5022c2e62f803.png) ![旋转设备后](../Images/cb5054b146fa458810f821442447b832.png) **在 iOS 5**

![第一视角](../Images/da069b353fafa77dd72de1a2267a50a9.png) ![旋转设备后](../Images/c3fe74a4a03d7188ca5dd7575b7a51bf.png) -(void)viewDidLoad { [超级 viewDidLoad];

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(didRotate:)
                                               name:UIDeviceOrientationDidChangeNotification
                                           object:nil];

}

- (void)didRotate:(NSNotification *)notification {
UIDeviceOrientation orientation = [[notification object] orientation];

if (orientation == UIDeviceOrientationLandscapeLeft) {
    [self.grpView setTransform:CGAffineTransformMakeRotation(M_PI / 2.0)];
   imageScrollView.frame =CGRectMake(-50, -100, 400, 620);

} else if (orientation == UIDeviceOrientationLandscapeRight) {
    [self.grpView setTransform:CGAffineTransformMakeRotation(M_PI / -2.0)];
} else if (orientation == UIDeviceOrientationPortraitUpsideDown) {
    [self.grpView setTransform:CGAffineTransformMakeRotation(M_PI)];
} else if (orientation == UIDeviceOrientationPortrait) {
    [self.grpView setTransform:CGAffineTransformMakeRotation(0.0)];

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:30:41.647

InterfaceOrientation 方法在 ios6 中已弃用。因此，如果您希望 ios5 和 ios6 都支持您的方向，则必须为 ios6 编写两个额外的方法以及

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// your customisation will go here
} 
```

ios6的两个额外方法

```
 - (BOOL)shouldAutorotate
    {
        return YES;
    }

    - (NSUInteger)supportedInterfaceOrientations
       {
   // your customisation will go here
       } 
```

享受编程！

# android - AES 解密：javax.crypto.BadPaddingException：Android 中的垫块损坏

> ID：14054593
> 
> 赞同：0
> 
> 时间：2012-12-27T12:19:21.220
> 
> 标签：android, exception, encryption, aes

我在我的 android 应用程序中遇到了 AES 解密的问题。我已经搜索了很多但无法获得解决方案。

这是步骤，我在做什么。

*   用我的密钥加密信用卡号发送到 Web 服务器。
*   Web 服务器 解密信用卡号并保存。
*   当我们从 Web 服务获取信用卡号时。
*   然后网络服务器用相同的密钥加密信用卡号并发送给我们。
*   现在当我们解密这个号码时，它会为一些信用卡号码信息抛出错误的填充异常。

来自服务器的加密信息也不相同，我们以加密格式发送的信息。而在 iPhone 应用程序中也是如此，并且 iPhone 能够成功解密信息。

我正在使用以下代码进行加密和解密。

```
public class AES256Cipher {

    public static byte[] ivBytes = { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };

    public static String AES_Encode(String str, String key) throws java.io.UnsupportedEncodingException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {

        byte[] textBytes = str.getBytes("UTF-8");
        AlgorithmParameterSpec ivSpec = new IvParameterSpec(ivBytes);
             SecretKeySpec newKey = new SecretKeySpec(key.getBytes("UTF-8"), "AES");
             Cipher cipher = null;
        cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, newKey, ivSpec);

        return Base64.encodeToString(cipher.doFinal(textBytes), 0);
    }

    public static String AES_Decode(String str, String key) throws java.io.UnsupportedEncodingException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {

        byte[] textBytes =Base64.decode(str,0);
        //byte[] textBytes = str.getBytes("UTF-8");
        AlgorithmParameterSpec ivSpec = new IvParameterSpec(ivBytes);
        SecretKeySpec newKey = new SecretKeySpec(key.getBytes("UTF-8"), "AES");
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, newKey, ivSpec);
        return new String(cipher.doFinal(textBytes), "UTF-8");
    } 
```

请建议。

**编辑：** 我还有一件事，它适用于 < 16 位数的信息。当我们放入 16 位信息时，它在解密时抛出异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:35:49.570

如果服务器遇到未映射到特定字符的未知编码，则密钥将无法正确传输并偶尔失败，从而导致密钥不正确。密文是使用 base64 编码的，所以这可能没问题，但你的密钥可能没那么幸运。

请注意，密钥或密文最后一个块的任何更改都*可能*导致`BadPaddingException`.

# android - android上的Jsch rm线程同步

> ID：14054594
> 
> 赞同：1
> 
> 时间：2012-12-27T12:19:23.887
> 
> 标签：android, multithreading, ssh, jsch

我正在使用 android 开发 sftp。我用来`JSch`在服务器和设备之间建立通道，但我遇到了问题：

首先，用户必须选择要下载的文件列表，并为每个文件`intentService`创建一个下载文件。然后我进行 md5 检查以了解下载是否正常，最后如果完整性正常，我必须从服务器中删除文件。

主要问题是我有一个错误：`SftpException 4:` 没有描述，我认为当我尝试从服务器删除文件时服务已关闭，因此通道已关闭，无法找到文件。

我还有其他活动监控所有下载+全球进展。但是我不能删除这个文件，因为 Network on `MainThread`... 所以我想我可以`SftpChannel`在一个单独的线程上创建它并将其提供给活动。但我该怎么做呢？我知道`BroadcastIntents`不能发送这些类型的数据......

所以要恢复：

`DownloadSFTPService => IntentService : open the SftpChannel`并下载文件，将数据发送到 RunningDownloadsActivity 以进行进度。

```
RunningDownloadsActivity => ListActivity : Monitor all the downloads + global receiving via BrodcastIntent updates from DownloadSftpService. 
```

下载Sftp服务：

```
protected void onHandleIntent(Intent intent) {

    //initializations

    //Création de la session avec le serveur
    JSch jsch = new JSch();
    Session session = null;
    try {
        session = jsch.getSession(loginFtp, ipServer, GlobalEnum.DOWNLOAD.PORT);
        if(session == null)
        {
            Log.e("SSHError","Impossible d'instancier la session");
        }
        else
        {

            //Configuration de la connexion par mot de passe plutot que certificat
            java.util.Properties config = new java.util.Properties();
            config.put("StrictHostKeyChecking", "no");
            config.put("PreferredAuthentifications", "password");
            session.setConfig(config);

            //Récupération du mot de passe dans les préférences et ouverture de session avec le serveur
            session.setPassword(passwordFtp);
            session.connect();

            //Configuration du canal en mode sFTP et ouverture
            Channel channel = session.openChannel("sftp");
            sftpChannel = (ChannelSftp) channel;
            sftpChannel.connect();

            //Initialisation de la notification
            initialiseNotif();

            //Lancement du téléchargement des fichiers
            downloadFiles();

            //Clôture de la connexion
            sftpChannel.disconnect();

        }
    } catch (JSchException e) {
        Log.e("JschException", e.toString());
    } catch (SftpException e) {
        Log.e("SftpException", e.toString());
    }

}

    private void downloadFiles() throws SftpException
{
    Vector<ChannelSftp.LsEntry> file;

    //Pour chaque fichier
    for( String tempFileName : downloadList)
    {           
        if(fileExisting(tempFileName)) {
            //Récupération des infos fichier
            file = sftpChannel.ls(tempFileName);
            currentFileSize = file.get(0).getAttrs().getSize();
            currentFileName = file.get(0).getFilename();

            broadcastIntentRD.putExtra(GlobalEnum.DOWNLOAD.FILE_NAME, currentFileName);
            broadcastIntentRD.putExtra(GlobalEnum.DOWNLOAD.FILE_SIZE, currentFileSize);

            //Lancement du téléchargement 

            int lastDot = tempFileName.lastIndexOf(".");
            String baseFileName = null;
            if(tempFileName.endsWith("tar.gz"))
            {
                String temp = tempFileName.substring(0, lastDot);
                baseFileName = temp.substring(0, temp.lastIndexOf("."));
            } else {
                baseFileName = tempFileName.substring(0, lastDot );
            }

            try {
                sftpChannel.get(baseFileName + ".md5", Environment.getExternalStorageDirectory() + vamsillaPath + "/" + baseFileName + ".md5");
            } catch (SftpException e) {
                Log.v("Sftp", "md5 introuvable pour : " + currentFileName);
            }
            sftpChannel.get(file.get(0).getFilename(), Environment.getExternalStorageDirectory() + vamsillaPath + "/" + file.get(0).getFilename(),this);
        }

    } 
```

运行下载活动：

```
public class DownloadReceiverRD extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {

        //BLABLA for notification and progressbar update

                    if(progress == fileSize){

                        //BLABLA for notification and progressbar closing

                        md5Sum(fileName);
                    }
                }
      private void md5Sum(String currentFileName) {
        VamsillaTools tools = new VamsillaTools(getApplicationContext());

        //Ouverture de la base de stockage des fichiers

        //Insertion du résultat dans la BDD
        int result = tools.checkMD5(currentFileName);
        db.insertFile(currentFileName, result);
        switch(result) {
            case -1 : Log.v("MD5", "Problème lors de la comparaison md5 : " + currentFileName); break;
            case 0 : Log.v("MD5", "Comparaison md5 fausse : " + currentFileName); break;
            case 1 : Log.v("MD5", "Succès de la comparaison md5 pour : " + currentFileName);

    /********
      SUPRESS THE FILE HERE WOULD BE PERFECT !!! 
    *********/

   break;
        }
    }
} 
```

请原谅我的英语，我是法国人，你知道我们的外语有多好......

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:10:20.890

可能已经晚了，但如果它可以帮助某人......我终于做了一个从 Thread 继承的类做网络 + 删除文件，当我们停止寻找困难的方法时，这很简单:)

# svg - raphael js，调整画布大小，然后 setViewBox 显示所有元素

> ID：14054595
> 
> 赞同：1
> 
> 时间：2012-12-27T12:19:46.363
> 
> 标签：svg, raphael

我的画布有问题。

我的画布第一个宽度 = 1300，高度 = 500

然后我将其调整为宽度 = 800px，高度 = 500

我尝试 setViewBox 来缩放它。但是当我拖动它们时，鼠标无法与元素一起修复。

```
@canvas.resize(800, 500)
@canvas.setViewBox(0,0, ??, ??) 
```

怎么计算？？？

感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:48:00.083

您可以使用以下方法计算必要的尺寸：

```
function recalculateViewBox( canvas )
{
    var max_x = 0, max_y = 0;
    canvas.forEach( function( el )
        {
            var box = el.getBBox();
            max_x = Math.max( max_x, box.x2 );
            max_y = Math.max( max_y, box.y2 );
        } );
    if ( max_x && max_y )
        canvas.setViewBox( 0, 0, max_x, max_y );
} 
```

本质上，您只需遍历画布的内容并构建一个元边界框，然后将 viewBox 调整为它。

如果你*想*变得有点花哨，你总是可以为 viewbox 设置动画，让它流畅地过渡到新的尺寸。在功能上不重要，但[适度性感](http://voidblossom.com/tests/easedViewBox.php)......

# javascript - GWT - 动态更改锚标题

> ID：14054596
> 
> 赞同：0
> 
> 时间：2012-12-27T12:19:47.757
> 
> 标签：javascript, gwt

我们在表格单元格中有一个链接。当用户将鼠标悬停在链接上时，会进行异步 RPC 调用并更新悬停文本（标题属性）。当用户仍然悬停在元素上时，我们看到悬停文本发生变化的结果非常不一致。在某些机器上它可以正常工作，而在其他机器上则根本不行。

我们缓存结果，因此如果用户再次触发悬停，工具提示文本将正确显示。

当用户仍然悬停在锚点上时，更新锚点的标题属性是否有技巧？

当 RPC 调用成功返回时，我们只需调用

```
link.setTitle(text); 
```

调用

```
/**
   * Sets the title associated with this object. The title is the 'tool-tip'
   * displayed to users when they hover over the object.
   * 
   * @param title the object's new title
   */
  public void setTitle(String title) {
    if (title == null || title.length() == 0) {
      DOM.removeElementAttribute(getElement(), "title");
    } else {
      DOM.setElementAttribute(getElement(), "title", title);
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:42:14.303

您在这里的代码并没有说明这个问题。`setTitle`毫无疑问，没有任何问题。但是在 mousehover 上触发异步调用并不是那么理想，因为您在这里面临的问题纯粹看起来像是源于异步调用完成所花费的时间。

我强烈建议在页面加载本身期间预取您需要在鼠标悬停时显示的数据，并直接设置该文本而不是异步调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:02:56.523

当用户将鼠标移到链接上时，浏览器会将标题属性显示为工具提示。在您的情况下，如果未设置标题，则根本没有工具提示。当您的 RPC 调用返回并设置标题时，*浏览器中不会发生任何事情，*直到用户将鼠标从链接上移开，然后再移回链接上。所以一些工具提示不会显示出来，其他的（已经在之前的鼠标悬停上设置的）会显示出来：这种 UI 模式真的会让你的用户感到困惑。

您可能需要重新考虑您的设计。更好的方法是在链接旁边显示一个小的弹出面板。您可以完全控制此面板何时显示和隐藏。创建一个弹出面板。将 MouseOverHandler 添加到您的链接。当 MouseOverEvent 触发时，调度您的 RPC 调用。当呼叫返回时，填充弹出面板并将其显示在链接旁边。当用户离开时，隐藏弹出面板。

如果表格中有大量链接，显然可以对其进行优化：您可以对表格使用单个 MouseOverHandler，然后检查哪个元素是事件的来源。

# c# - 在没有代理客户端的情况下使用 WCF 服务

> ID：14054597
> 
> 赞同：4
> 
> 时间：2012-12-27T12:19:48.693
> 
> 标签：c#, .net, wcf, web-services, soap

我有一个可以发送 SOAP 消息和解析响应的应用程序。如果我使用代理客户端，我的 WCF 服务可以正常工作，但我需要能够像在旧的 ASMX 服务中那样以 SOAP 格式发送 POST 请求。有没有可能做到这一点？

我尝试从调试 wcf 客户端复制 SOAP 请求并将其作为带有 Content-Type text/xml 的 POST 请求发送，但它没有给我正确的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T16:07:54.743

是的，您可以使用“普通”HTTP 请求来调用它们——毕竟，就服务器而言，它接收到的只是 TCP 连接中的字节。根据您使用的绑定，您可能还需要设置一些 HTTP 标头 - 如果您在服务上使用 BasicHttpBinding，您还需要设置`SOAPAction`标头。尝试使用 WCF 代理发送您的请求和来自客户端的请求，并在 Fiddler 等工具中进行比较。如果请求相同，服务器也会以相同的方式响应它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T17:38:39.947

当我需要通过http web 请求传递完整的soap 消息时，我使用SoapUI。您可以给它一个 WSDL，它执行代理对代码执行的操作，而是生成soap xml。正如@carlosfigueira 所提到的，您将需要查看 HTTP 标头部分并适当地设置它们。

[www.soapui.org](http://www.soapui.org/)

# java - 跳转到 JEditorPane 中的内部锚点

> ID：14054601
> 
> 赞同：5
> 
> 时间：2012-12-27T12:20:12.393
> 
> 标签：java, html, swing, hyperlink, jeditorpane

我有一个问题：我想在 JEditorPane中使用内部锚点`<a name="x">`和链接。`<a href="#x">`

窗格的内容不是从资源加载的，而是动态创建的，可以作为字符串使用。

如何让我的 JEditorPane 滚动到正确的位置？（在示例中它应该滚动到顶部）侦听器仅捕获 null，这增加了问题。

这是我的 SSCCCE：

```
public static void main(final String[] args) {
    final JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    f.setTitle("JEditorPane Test");

    final String text = "<html><body><a name='link1'>test</a>some text<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />some more text<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />some more text<a href='#link1'>jump to top</a></body></html>";

    final JEditorPane ep = new JEditorPane();
    ep.setContentType("text/html");
    ep.setText(text);
    ep.setEditable(false);
    ep.addHyperlinkListener(new HyperlinkListener() {
        @Override public void hyperlinkUpdate(final HyperlinkEvent pE) {
            if (HyperlinkEvent.EventType.ACTIVATED == pE.getEventType())
                System.out.println("ep link click: " + pE.getURL());
        }
    });

    final JScrollPane sp = new JScrollPane(ep);
    f.add(sp);

    f.setBounds(200, 200, 400, 400);
    f.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T12:23:46.483

好的，我终于解决了这个问题。

我一直在用 进行测试`scrollToReference()`，但不知何故它不起作用。然后我玩了 HTML 解析、锚点和插入符号，`setCaretPosition()`它们只在某些时候起作用。然后出于纯粹的巧合，我`scrollToReference()`再次将其包含在我的代码中并且滚动突然起作用了......并且仍然可以完美地工作！

这是工作代码：

```
public static void main(final String[] args) {
    final JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    f.setTitle("JEditorPane Test");

    final String text = "<html><body><a name='link1'>test</a>some text<br /><a href='#thisisbottom'>down</a><br /><br /><br /><br /><br /><br /><br /><br /><br /><a name='mid1'></a>some more text<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />some more text [<a href='#link1'>jump to top</a>] <br /> or jump to <a name='thisisbottom' href='#mid1'>center</a></body></html>";

    final JEditorPane ep = new JEditorPane();
    ep.setContentType("text/html");
    ep.setText(text);
    ep.setEditable(false);
    ep.addHyperlinkListener(new HyperlinkListener() {
        @Override public void hyperlinkUpdate(final HyperlinkEvent pE) {
            if (HyperlinkEvent.EventType.ACTIVATED == pE.getEventType()) {
                System.out.println("JEditorPane link click: url='" + pE.getURL() + "' description='" + pE.getDescription() + "'");
                String reference = pE.getDescription();
                if (reference != null && reference.startsWith("#")) { // link must start with # to be internal reference
                    reference = reference.substring(1);
                    ep.scrollToReference(reference);
                }
            }
        }
    });

    final JScrollPane sp = new JScrollPane(ep);
    f.add(sp);

    f.setBounds(200, 200, 400, 400);
    f.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:46:10.927

你可以这样做：

```
import java.awt.Point;
import java.util.logging.Logger;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JViewport;
import javax.swing.SwingUtilities;
import javax.swing.event.HyperlinkEvent;
import javax.swing.event.HyperlinkListener;

public class PaneWithScroll {
  private static final String TEXT = 
      "<html>"
        + "<head>"
        + "</head>"
        + "<body>"
          + "<p><a href=\"#top\">Go top</a></p>"
        + "</body>"
      + "</html>";
  private static final String TOP = "#top";

  public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        JFrame frame = new PaneWithScrollFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
      }
    });
  }

  private static class PaneWithScrollFrame extends JFrame {
    private PaneWithScrollFrame() {
      super.setName("Pane With Scroll");
      this.addComponents();
      super.setSize(640, 480);
    }

    private void addComponents() {
      JEditorPane editorPane = new JEditorPane();
      editorPane.setContentType("text/html");
      editorPane.setEditable(false);
      editorPane.setText(TEXT);

      final JScrollPane scrollpane = new JScrollPane(editorPane);

      editorPane.addHyperlinkListener(new HyperlinkListener() {
        @Override
        public void hyperlinkUpdate(HyperlinkEvent e) {
          if (HyperlinkEvent.EventType.ACTIVATED.equals(e.getEventType())) {
            String description = e.getDescription();
            if (TOP.equals(description)) {
              JViewport viewport = scrollpane.getViewport();
              viewport.setViewPosition(new Point(0, 0));
            }
          }
        }
      });

      super.add(scrollpane);
    }
  }
} 
```

# javascript - 变量未定义而已定义

> ID：14054607
> 
> 赞同：1
> 
> 时间：2012-12-27T12:20:29.787
> 
> 标签：javascript, jquery

下面的代码在控制台上为变量提供了一个未定义的错误`mystyle`。我没有得到它，因为我定义了变量。

```
jQuery( '.styles_div' ).each( function() {
switch (styles) {
    case 'style1':
        var mystyle = $('#stylewrap').append('<div class="style1"></div> ');
        break;
    case 'style2':
        var mystyle = $('#stylewrap').append('<div class="style2"></div> ');
        break;
}
$("#search").autocomplete({
    delay: 0,
    minLength: 3,
    search: function( event, ui ) {mystyle.show();},
    ...
})
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:22:41.903

mystyle 需要在使用之前定义 - 可能作为全局 var 并且没有两次 var 关键字。测试存在也是谨慎的

```
var mystyle;
switch (styles) {
    case 'style1':
        mystyle = $('#stylewrap').append('<div class="style1"></div> ');
        break;
    case 'style2':
        mystyle = $('#stylewrap').append('<div class="style2"></div> ');
        break;
}
$("#search").autocomplete({
    delay: 0,
    minLength: 3,
    search: function( event, ui ) {if (mystyle) mystyle.show();},
    ...
}) 
```

如果这是完整的代码，那么也许这段代码更简单：

```
var mystyle = $('#stylewrap').append('<div class="'+styles+'"></div> '); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:30:34.513

`mystyle`之前定义`switch case`。否则代码是正确的。

# php - PHP - 在 foreach 循环中分配变量

> ID：14054610
> 
> 赞同：0
> 
> 时间：2012-12-27T12:20:37.510
> 
> 标签：php, variables, variable-variables

我有一个像这样的变量

```
$profile = $adapter->getProfile(); 
```

现在我像这样使用它

```
$profile->profileurl
$profile->websiteurl
$profile->etc 
```

现在我想在 foreach 循环中使用它

所以我创建了一个这样的数组

```
$data = array('profileurl','websiteurl','etc');

foreach ($data as $d ) {
${$d} = ${'profile->'.$d};
} 
```

当我使用时，`var_dump(${$d})`我只看到`NULL`而不是值。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:27:26.107

以下代码：

```
${'profile->'.$d} 
```

应改为：

```
$profile->{$d}; 
```

这将按预期创建变量：

```
$profile = new stdClass();
$profile->profileurl = "test profileurl";
$profile->websiteurl = "test websiteurl";

$data = array('profileurl', 'websiteurl');
foreach ($data as $d) {
    ${$d} = $profile->{$d};
}

var_dump($profileurl, $websiteurl);
// string(15) "test profileurl"
// string(15) "test websiteurl" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:33:41.740

我的猜测是`$profile = $adapter->getProfile();`返回一个对象。而且您已经使用获取数据，`mysql_fetch_object()`因此结果`$profile`是一个对象

当您在数组中添加属性时，您将不得不做这样的事情

```
$data = array($profile->profileurl, $profile->websiteurl, $profile->etc); 
```

这将扼杀这样做的整个想法。所以我建议最好尝试修改`$adapter->getProfile()`方法以返回一个数组，使用`mysql_fetch_assoc()`which 将返回和数组，您可以使用它来迭代它

```
foreach($profile as $key => $value){
    //whatever you want to do
    echo $key .  " : " . $value . "<br/>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T12:40:19.643

我不知道你为什么要接近 foreach。我的假设是，您需要像 $profileurl = "something1", $websiteurl="something2" 等变量。

```
$profile = $adapter->getProfile(); 
```

现在只需将 $profile 对象转换为数组，如下所示，

```
$profileArray = (array)$profile 
```

然后使用提取功能，

```
extract($profileArray); 
```

现在你得到变量中的值

```
$profileurl = "something1";
$websiteurl="something2" 
```

然后你可以将它们用作普通的 php 变量。

# c# - 删除或编辑分发列表 Outlook（联系人组）

> ID：14054611
> 
> 赞同：0
> 
> 时间：2012-12-27T12:20:38.633
> 
> 标签：c#

我需要在 Outlook 中删除一组特定的联系人。

我找到了一些在 C# 中添加新组的命令，但现在我需要删除一个组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:48:32.720

我设法解决了。在下面的这个函数中，我删除了默认联系人文件夹中名为“Example”的组。

```
 private void RemoveItemGroup()
    {
        Outlook._Application outlookObj = new Outlook.Application();
        Outlook.MAPIFolder folder = (Outlook.MAPIFolder)
                      outlookObj.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderContacts);

        foreach (var curr in folder.Items.OfType<DistListItem>())
        {
            Console.WriteLine(curr.DLName);
            if (curr.DLName == "Example")
            {
                curr.Delete();
            }

        }
    } 
```

# c# - '+' 在 sql server 中存储为 '%2b'

> ID：14054622
> 
> 赞同：0
> 
> 时间：2012-12-27T12:21:40.933
> 
> 标签：c#, asp.net, sql-server

+ 符号在从文本框中存储在数据库中时被编码为 %2b。我只想将它存储为+。那么如何实现呢？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:23:08.377

您的值正在被 URL 编码。要解码，请尝试：

```
var decoded = HttpUtility.UrlDecode(input); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:23:57.257

您可以使用

```
Server.HtmlDecode(Textbox.Text) 
```

保存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T12:24:11.747

采用：

```
string value = Server.HtmlDecode(TextBox1.Text); 
```

# c - 为什么在下标中使用 CONSTANT 会给我错误？

> ID：14054624
> 
> 赞同：-1
> 
> 时间：2012-12-27T12:21:59.530
> 
> 标签：c

例如，我有以下代码：

```
#define MAX_CLIENTS 100;

void main() {
    char* pick[MAX_CLIENTS];
    int* points[MAX_CLIENTS];
    return 0;
} 
```

尝试编译它会引发以下错误：

```
file.c:4: error: expected ‘]’ before ‘;’ token
file.c:5: error: expected ‘]’ before ‘;’ token 
```

如果我用文字替换下标中的 MAX_CLIENTS `100`，那么错误就消失了。

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T12:22:43.173

`;`in是多余的`#define MAX_CLIENTS 100;`，删除它，你应该没问题。

请记住，这`#define`是一个预处理器命令，它替换`MAX_CLIENTS`为`100;`- 你不想要分号，只有 100。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T12:23:13.720

问题是您定义中的尾随分号，这会导致宏扩展为

```
char* pick[100;];
//            ^-- cause of compiler errors 
```

从您的定义中删除分号，一切都应该很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T12:28:07.427

它应该是 ：

```
#define MAX_CLIENTS 100 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T12:39:40.847

预处理器指令不应以分号结尾。

如果你这样做，它就会成为一个声明。

删除宏末尾的分号可以帮助您..

# c# - 如何为 ZPL ZEBRA 打印生成动态 GRF 图像

> ID：14054626
> 
> 赞同：10
> 
> 时间：2012-12-27T12:22:04.360
> 
> 标签：c#, image, printing, bmp, zpl

我有个问题。

我正在生成动态 BMP 图像并尝试通过 ZPL 命令将其发送到 ZEBRA 打印机。我需要将我的 BMP 转换为 GRF 图像。我认为我的 BMP 图像提取的十六进制不正确。

打印的图像模糊且不正确。

这是我的代码：

```
string bitmapFilePath = @oldArquivo;  // file is attached to this support article
byte[] bitmapFileData = System.IO.File.ReadAllBytes(bitmapFilePath);
int fileSize = bitmapFileData.Length;

Bitmap ImgTemp = new Bitmap(bitmapFilePath);
Size ImgSize = ImgTemp.Size;
ImgTemp.Dispose();

// The following is known about test.bmp.  It is up to the developer
// to determine this information for bitmaps besides the given test.bmp.            
int width = ImgSize.Width;
int height = ImgSize.Height;
int bitmapDataOffset = 62; // 62 = header of the image
int bitmapDataLength = fileSize - 62;// 8160;    

double widthInBytes = Math.Ceiling(width / 8.0);    

// Copy over the actual bitmap data from the bitmap file.
// This represents the bitmap data without the header information.
byte[] bitmap = new byte[bitmapDataLength];
Buffer.BlockCopy(bitmapFileData, bitmapDataOffset, bitmap, 0, (bitmapDataLength));

// Invert bitmap colors
for (int i = 0; i < bitmapDataLength; i++)
{
    bitmap[i] ^= 0xFF;
}

// Create ASCII ZPL string of hexadecimal bitmap data
string ZPLImageDataString = BitConverter.ToString(bitmap).Replace("-", string.Empty);

string comandoCompleto = "~DG" + nomeImagem + ".GRF,0" + bitmapDataLength.ToString() + ",0" + widthInBytes.ToString() + "," + ZPLImageDataString; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T00:55:00.677

试试下面的代码。**未测试！**

```
public static string CreateGRF(string filename, string imagename)
{
    Bitmap bmp = null;
    BitmapData imgData = null;
    byte[] pixels;
    int x, y, width;
    StringBuilder sb;
    IntPtr ptr;

    try
    {
        bmp = new Bitmap(filename);
        imgData = bmp.LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.ReadOnly, PixelFormat.Format1bppIndexed);
        width = (bmp.Width + 7) / 8;
        pixels = new byte[width];
        sb = new StringBuilder(width * bmp.Height * 2);
        ptr = imgData.Scan0;
        for (y = 0; y < bmp.Height; y++)
        {
            Marshal.Copy(ptr, pixels, 0, width);
            for (x = 0; x < width; x++)
                sb.AppendFormat("{0:X2}", (byte)~pixels[x]);
            ptr = (IntPtr)(ptr.ToInt64() + imgData.Stride);
        }
    }
    finally
    {
        if (bmp != null)
        {
            if (imgData != null) bmp.UnlockBits(imgData);
            bmp.Dispose();
        }
    }
    return String.Format("~DG{0}.GRF,{1},{2},", imagename, width * y, width) + sb.ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:39:39.507

需要指出的一点是，被转换的位图必须是单色的（即每像素 1 位）。Zebra 的知识库中有一个示例演示了在 ZPL 中打印简单的单色图像：[https ://km.zebra.com/kb/index?page=answeropen&type=open&searchid=1356730396931&answerid=16777216&iqaction=5&url=https%3A%2F%2Fkm .zebra.com%2Fkb%2Findex%3Fpage%3Dcontent%26id%3DSA304%26actp%3Dsearch%26viewlocale%3Den_US&highlightinfo=4194550,131,153#](https://km.zebra.com/kb/index?page=answeropen&type=open&searchid=1356730396931&answerid=16777216&iqaction=5&url=https%3A%2F%2Fkm.zebra.com%2Fkb%2Findex%3Fpage%3Dcontent%26id%3DSA304%26actp%3Dsearch%26viewlocale%3Den_US&highlightinfo=4194550,131,153#)。如果您可以将图像转换为单色位图，那么您应该能够遵循该示例。

```
// Given a monochrome bitmap file, one can read
// information about that bitmap from the header
// information in the file.  This information includes
// bitmap height, width, bitsPerPixel, etc.  It is required
// that a developer understands the basic bitmap format and
// how to extract the following data in order to proceed.
// A simple search online for 'bitmap format' should yield
// all the needed information.  Here, for our example, we simply
// declare what the bitmap information is, since we are working
// with a known sample file.

string bitmapFilePath = @"test.bmp";  // file is attached to this support article
byte[] bitmapFileData = System.IO.File.ReadAllBytes(bitmapFilePath);
int fileSize = bitmapFileData.Length;

// The following is known about test.bmp.  It is up to the developer
// to determine this information for bitmaps besides the given test.bmp.
int bitmapDataOffset = 62;
int width = 255;
int height = 255;
int bitsPerPixel = 1; // Monochrome image required!
int bitmapDataLength = 8160;
double widthInBytes = Math.Ceiling(width / 8.0);

// Copy over the actual bitmap data from the bitmap file.
// This represents the bitmap data without the header information.
byte[] bitmap = new byte[bitmapDataLength];
Buffer.BlockCopy(bitmapFileData, bitmapDataOffset, bitmap, 0, bitmapDataLength);

// Invert bitmap colors
for (int i = 0; i < bitmapDataLength; i++)
{
    bitmap[i] ^= 0xFF;
}

// Create ASCII ZPL string of hexadecimal bitmap data
string ZPLImageDataString = BitConverter.ToString(bitmap);
ZPLImageDataString = ZPLImageDataString.Replace("-", string.Empty);

// Create ZPL command to print image
string[] ZPLCommand = new string[4];

ZPLCommand[0] = "^XA";
ZPLCommand[1] = "^FO20,20";
ZPLCommand[2] =
    "^GFA, " +
    bitmapDataLength.ToString() + "," +
    bitmapDataLength.ToString() + "," +
    widthInBytes.ToString() + "," +
    ZPLImageDataString;

ZPLCommand[3] = "^XZ";

// Connect to printer
string ipAddress = "10.3.14.42";
int port = 9100;
System.Net.Sockets.TcpClient client =
    new System.Net.Sockets.TcpClient();
client.Connect(ipAddress, port);
System.Net.Sockets.NetworkStream stream = client.GetStream();

// Send command strings to printer
foreach (string commandLine in ZPLCommand)
{
    stream.Write(ASCIIEncoding.ASCII.GetBytes(commandLine), 0, commandLine.Length);
    stream.Flush();
}

// Close connections
stream.Close();
client.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T10:52:08.973

请将 2 添加到 widthInBytes - 它有效！

```
 int bitmapDataOffset = int.Parse(bitmapFileData[10].ToString()); ;
        int width = 624;// int.Parse(bitmapFileData[18].ToString()); ;
        int height = int.Parse(bitmapFileData[22].ToString()); ;
        int bitsPerPixel = int.Parse(bitmapFileData[28].ToString()); // Monochrome image required!
        int bitmapDataLength = bitmapFileData.Length - bitmapDataOffset;
        double widthInBytes = Math.Ceiling(width / 8.0)+2; 
```

# ruby-on-rails - 类型错误：Gmaps.map 未定义

> ID：14054628
> 
> 赞同：0
> 
> 时间：2012-12-27T12:22:10.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps, google-maps-api-3, gmaps4rails

@apneadiving：请帮帮我

在萤火虫中显示错误

类型错误：Gmaps.map 未定义

Gmaps.map.callback = function() {

我遵循了[Andy Glass 教程](http://andyglassblog.wordpress.com/2012/07/06/google-maps-for-rails-with-gmaps4-rails-tutorial-on-how-to-post-and-filter-locations/)中的所有内容，并停留在这一点上。在我的输出中，我能够看到谷歌地图和标记以及单击标记的一些详细信息。

应用程序.js

```
 Gmaps.map.callback = function() {

        var PopulationFilter = {
            min: 800000,
            max: 10000000
        };

        $( "#filtered-pop" ).val( (PopulationFilter.min)+ " - " + (PopulationFilter.max))
        $("#population-range").slider({
            range: true,
            min: PopulationFilter.min,
            max: PopulationFilter.max,
            values: [ PopulationFilter.min, PopulationFilter.max ],
            slide: function(event, ui) {
                $( "#filtered-pop" ).val( (ui.values[ 0 ])+ " - " + (ui.values[ 1 ]))
                PopulationFilter.min = ui.values[ 0 ]
                PopulationFilter.max = ui.values[ 1 ]
                applyFilters()
            }
        });

        var VisibleMarkers = function() {
            var filtered = _.reject(Gmaps.map.markers, function(marker) {
                return marker.prop_details < PopulationFilter.min || marker.prop_details > PopulationFilter.max;
            });
            return filtered
        }

        var applyFilters = function() {
            _.each(Gmaps.map.markers, function(marker) {
                Gmaps.map.hideMarker(marker)
            })
            _.each(VisibleMarkers(), function(marker) {
                Gmaps.map.showMarker(marker)
            })
        };
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:09:07.547

答案存在于[doc](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Javascript-goodies)中。

重要的一行是：

> 在 content_for :scripts 中的视图中包含以下代码

# iphone - 将 UIViewController xib 加载到情节提要中的 ContainerView

> ID：14054632
> 
> 赞同：12
> 
> 时间：2012-12-27T12:22:24.247
> 
> 标签：iphone, objective-c, ios, xcode, uistoryboard

我有一个“容器”视图控制器，它使用故事板保存一些容器视图。每个容器视图都有一个到嵌入式视图控制器视图的链接。

由于我正在从事一个大项目，事实证明情节提要文件很大，并且包含许多“子” viecontrollers 视图布局。当需要几个人同时处理该文件时，处理该文件将是一个问题。这对我不利。我想知道是否有办法将视图控制器的 xib 文件加载到每个容器视图中，并且仍在使用情节提要。

意思是，为每个视图控制器创建 .xib 文件，而不是将它们保存在情节提要本身中，并将它们链接到情节提要中的容器视图。

谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-12-14T18:21:08.543

您*可以*将视图控制器布局移动到单独的 xib 中。正如您所说，这是跨故事板共享布局的一种非常方便的方式。

在情节提要中设置容器视图时，请确保**删除嵌入式 ViewController 中提供的视图**。将 ViewController 的自定义类设置为您的类名。为 xib 命名以匹配类（例如 FooViewController.xib，以便在加载 FooViewController.m 时可以找到它。）

如果您不删除情节提要视图控制器布局中的视图，您将看到该空视图。`viewDidLoad`不会调用视图控制器中的方法，因为视图是默认的故事板视图。

我在 iOS 7 之前的项目中使用 Xcode 6.1 for iOS 8。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T15:16:54.170

是的你可以。几点观察：

1.  您需要做的就是输入我们在使用 NIB 时使用的那种代码。在容器的情况下，这意味着[典型的容器方法](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)。如果您尚未通过代码完成遏制，请参阅*View Controller Programming Guide*中的[创建自定义容器视图控制器。](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ImplementingaContainerViewController.html)底线，当您过渡到非故事板场景（或添加非故事板子视图控制器）时，只需像在基于 NIB 的环境中习惯的那样对其进行编码。您不能在情节提要中表示此基于 NIB 的场景。但是您只需像使用 NIB 一样获得控制器：

     *```
    SecondViewController *controller = [[SecondViewController alloc] initWithNibName:nil bundle:nil]; 
    ```* 
**   您显然失去了使用情节提要的许多好处（例如，根据父场景中的容器视图调整子场景的大小），但您的情况并不比在 NIB 环境中更糟。但是在回答您是否可以“将它们链接到情节提要中的容器视图”的问题时，您不能在情节提要本身中表示这种关系，而是以编程方式将它们链接起来。

    *   如果您的独立团队在单场景环境中工作，您可以使用这种 NIB 方法。不过，您还应该考虑只拥有多个故事板，每个逻辑团队一个。在故事板之间转换时，您仍然必须使用代码，就像您在这种 NIB 方法中所做的那样，但是如果您的团队中有多个场景要处理，他们可以在他们的项目部分中享受故事板的好处。当您想进入下一个故事板中的第一个场景时，您可以：

    ```
    UIStoryboard *secondaryStoryboard = [UIStoryboard storyboardWithName:@"SecondStoryboard" bundle:nil];
    SecondViewController *controller = [secondaryStoryboard instantiateInitialViewController]; 
    ```

    *   如果您的孩子需要过渡到情节提要上的新场景，我发现将我自己的`parentStoryboard`属性添加到我的子控制器中很有用，如果您需要执行类似`instantiateViewControllerWithIdentifier`. 显然，如果您不过渡到新的控制器，您可能不需要这样做，但如果您是，拥有一个`UIStoryboard`属性会很有用。*

# android - Android 应用基本安全

> ID：14054637
> 
> 赞同：-1
> 
> 时间：2012-12-27T12:22:43.807
> 
> 标签：android, security

从 android play store 下载后，是否可以发送定价的 android 应用程序。？

如果我们正在创建一个在 Play Store 上销售的应用程序，那么在上传之前我们应该为应用程序提供哪些基本安全性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:16:48.220

查看适用于 android 的安全功能，

*   [市场许可 (LVL)](http://developer.android.com/guide/publishing/licensing.html)
*   混淆（[ProGuard](http://proguard.sourceforge.net/)）
*   [使用MessageDigest](http://download.oracle.com/javase/1.4.2/docs/api/java/security/MessageDigest.html)（SHA 或 MD5）进行加密和散列
*   [客户经理](http://developer.android.com/reference/android/accounts/AccountManager.html)

还可以查看[Android 安全性](http://developer.android.com/guide/topics/security/permissions.html)

这种黑帽做法是无法避免的。无论您找到什么，幸运、聪明、耐心的黑客都会将其撤消。

尽管如此，您仍可以希望努力工作，以使大多数黑客更难轻易破坏您的保护。顺便说一句，这就是人们通常所说的 IT 安全 :)

# arrays - 将哈希表的键转换为字符串列表

> ID：14054643
> 
> 赞同：5
> 
> 时间：2012-12-27T12:23:07.293
> 
> 标签：arrays, string, powershell, hashtable

我想做，`[string]::Join(", ", $HashTable.Keys);`但返回`System.Collections.Hashtable+KeyCollection...`而不是枚举值。

我需要为此做一个foreach循环吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T12:38:59.210

你可以简单地做：

```
$HashTable.Keys -join ',' 
```

# javascript - 变量为空或未定义时的 IE9 javascript 错误

> ID：14054651
> 
> 赞同：1
> 
> 时间：2012-12-27T12:23:22.143
> 
> 标签：javascript, internet-explorer, cross-browser

我有一个 textarea ，我在其中使用 javascript 检查上面是否写了一些东西：

```
if (!editorInstance.document.getBody().getChild(0).getText()) {
    do some action
} 
```

它适用于 firefox，但在 IE9 中我收到此错误，告诉它是 null 或未定义的对象（因此 IE 不检查我的条件）。所以我尝试了：

```
var hasText = editorInstance.document.getBody().getChild(0).getText();
if (typeof hasText === 'undefined') {
    do some action
} 
```

问题是它仍然停在第一行（`var hasText = edit...`），因为`editorInstance.document.getBody().getChild(0).getText()`返回 null 或 undefined

**编辑**

当我这样做时`editorInstance.document.getBody().getChild(0).getText()`，我在 textarea 中输入了所有文本，但是当没有输入文本时（我检查它以验证此字段），此代码不返回任何内容，这就是`hasText`变量没有按我预期的方式工作的原因。

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:10:34.443

您需要检查您引用的每个变量和函数结果是否存在。

```
var firstChild = editorInstance && editorInstance.document && editorInstance.document.getBody() && editorInstance.document.getBody().getChild(0);
if (!firstChild || firstChild.getText() === '') {
    // do some action
} 
```

`&&`是 Javascript 的[逻辑 AND 运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators#Short-Circuit_Evaluation)。对于这种情况，当您想要获取对象的值但对象本身可能为**null**或**undefined**时，它非常方便。

考虑以下语句：

```
var doc = editorInstance && editorInstance.document; 
```

意思是一样的

```
var doc;
if (editorInstance) {
    doc = editorInstance.document;
} else {
    doc = editorInstance;
} 
```

但它更短。`editorInstance`如果为**null**，则此语句不会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T12:58:15.960

```
 function test() {
    var editor_val1 = CKEDITOR.instances.id1.document.getBody().getChild(0).getText() ;
    var editor_val2 = CKEDITOR.instances.id2.document.getBody().getChild(0).getText() ;
    var editor_val3 = CKEDITOR.instances.id3.document.getBody().getChild(0).getText() ;

    if ((editor_val1 == '') || (editor_val2 == '') || (editor_val3 == '')) {
        alert('Editor value cannot be empty!') ;
        return false ;
    }

    return true ;
} 
```

# php - 尽管 FOLLOWLOCATION 使用 cURL 获得 301

> ID：14054652
> 
> 赞同：3
> 
> 时间：2012-12-27T12:23:25.000
> 
> 标签：php, curl

尽管使用了 FOLLOWLOCATION 和 MAXREDIRS，但我收到 301 错误。我不知道该怎么做，我尽我所能：HEADER 为 0，FOLLOWLOCATION 为 1，MAXREDIRS 为 30，多次更改 USERAGENT，单独使用 COOKIEFILE，然后使用 COOKIEJAR，但没有。

这是最奇怪的部分：我试图抓取的同一个网站不会为其他页面提供 301，只是针对某些页面。有任何想法吗？？

```
function curl_start($url) {
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.4");
curl_setopt($ch, CURLOPT_REFERER, "http://google.com/");
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_ENCODING, "gzip");
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_FRESH_CONNECT, 1);
$html = curl_exec($ch);
curl_close($ch);
return $html;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:00:09.670

除非您在安全模式下运行 php，否则它应该可以工作。但即使这对你来说也不是问题。

无论如何，试试这个。

```
<?php
function curl_redirect_exec($ch, &$redirects, $curlopt_header = false) {
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $data = curl_exec($ch);
    $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    if ($http_code == 301 || $http_code == 302) {
        list($header) = explode("\r\n\r\n", $data, 2);
        $matches = array();
        preg_match('/(Location:|URI:)(.*?)\n/', $header, $matches);
        $url = trim(array_pop($matches));
        $url_parsed = parse_url($url);
        if (isset($url_parsed)) {
            curl_setopt($ch, CURLOPT_URL, $url);
            $redirects++;
            return curl_redirect_exec($ch, $redirects);
        }
    }
    if ($curlopt_header)
        return $data;
    else {
        list(,$body) = explode("\r\n\r\n", $data, 2);
        return $body;
    }
}
?> 
```

SRC：[http ://www.php.net/manual/en/function.curl-setopt.php#95027](http://www.php.net/manual/en/function.curl-setopt.php#95027)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:23:13.547

您的代码在我的服务器上运行。所以我想它与`safe_mode`或`open_basedir`已设置有关。您可以通过使用 启动脚本来检查输出警告`error_reporting(E_ALL);`。它应该显示警告。

检查以下链接以查看解决方案。

[http://php.net/manual/ro/function.curl-setopt.php#102121](http://php.net/manual/ro/function.curl-setopt.php#102121)

# javascript - 使用 JQuery 处理文档 objsct

> ID：14054658
> 
> 赞同：0
> 
> 时间：2012-12-27T12:23:49.943
> 
> 标签：javascript, jquery

我有具有下一个结构的 html 文档

```
<html>
<head>...</head>
<body>
Some text
<iframe name="frame2" id="frame2">
#document
<html>
<head>...</head>
<body>
<table>
<tr>
<td>Inner Text</td>
</tr>
</table>
</body>
</html>
</iframe>
</body>
</html> 
```

如何`<td>`使用 jQuery 选择器从 iframe2 中选择标签并获取它的内部文本？我不知道如何从内部#document 构造中选择任何标签？有人可以在我身上筹码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:27:41.240

首先你需要 iframe 的文档

```
var iframe_document = $("iframe").get(0).contentWindow.document; 
```

比正常使用 jquery

```
$("td",iframe_document)... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:26:26.457

您可以使用以下 jquery 语法获取 td 元素：

```
$("#frame2").contents().find("td").text() 
```

或使用纯 javascript：

```
var myIFrame = document.getElementById("frame2");
var content = myIFrame.contentWindow.document.body.table.tr.td.innerText; 
```

# android - 是否可以从多种尺寸的自定义适配器创建视图？

> ID：14054662
> 
> 赞同：0
> 
> 时间：2012-12-27T12:23:58.943
> 
> 标签：android

例如，像 Google+ 一样，有一个大尺寸和两个小尺寸交替显示，直到到达最后一个视图。那么有没有可能做到这一点。

喜欢这张照片： [http ://upic.me/show/42297666](http://upic.me/show/42297666)

Google+ 以不同大小显示每个项目。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:11:17.327

是的。

1）您创建一个布局（my_layout）负责对齐

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
 android:gravity="left"
 android:padding="1dp"
android:layout_gravity="left"
android:orientation="horizontal" >
<ImageView
    android:id="@+id/contentImage1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:padding="5dp"
    android:visibility="invisible"
    android:src="@drawable/browse_product_thumbnail" />
<ImageView
    android:id="@+id/contentImage2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:padding="5dp"
    android:visibility="invisible"
    android:src="@drawable/browse_product_thumbnail" /> 
```

2) 现在为此和 getView() 方法编写和适配器。类似于下面的代码

```
public class ItemListAdapter extends ArrayAdapter<LaunchItem> {

private int             _resource;
private LayoutInflater  _inflater;
private static Launcher _browse;
private static final String tag = "Adapterr";
public ItemListAdapter(Launcher activity , int resourceId, List<LaunchItem> objects) 
{
        super( activity, resourceId, objects );
        _resource = resourceId;
        _inflater = LayoutInflater.from(activity);
        this._browse = activity;
}

    @Override
    public View getView ( int position, View convertView, ViewGroup parent ) {

        convertView = ( LinearLayout ) _inflater.inflate( _resource, null );

        String imagePath = "";
        String name = "";
        LaunchItem item = getItem( position );

    } 
```

}

您可以决定在 getView 上显示什么以及它们的可见性。

3）在您的代码中使用自定义适配器。

```
 List<LaunchItem> lList = new ArrayList<LaunchItem>();   
        lList.add(new LaunchItem(image1,image2 );
        ItemListAdapter  data = new  ItemListAdapter (this,R.layout.my_layout,lList);
        view.setAdapter(data); 
```

-普雷亚

# c++ - pjsip 计时器是否需要 pjsip_endpt_handle_events

> ID：14054664
> 
> 赞同：2
> 
> 时间：2012-12-27T12:24:08.290
> 
> 标签：c++, voip, pjsip, dtmf

我在 debian linux 中使用 pjsip 2.01。我正在编写小班课程，以允许我的程序拨打特定电话并播放 wav 文件。我已经这样做了，一切正常。但现在我想在通话中播放 DTMF 信号。我想在 5 秒后使用计时器播放 DTMF。所以我在看 pj_timer_entry_init pj_timer_heap_schedule 我发现了几个样本。但它们有点争议。其中一些正在使用线程，而 pjsip_endpt_handle_events 另一个目前没有我在我的程序中不使用线程，尽管我同时进行 3-4 次调用。所以问题是 - 我是否需要在单独的线程中使用 pjsip_endpt_handle_events 才能使计时器正常工作？

# javascript - html更改时关联jquery回调

> ID：14054669
> 
> 赞同：1
> 
> 时间：2012-12-27T12:24:29.143
> 
> 标签：javascript, jquery, document-ready

> **可能重复：**
> [使用 jQuery 自动将事件处理程序添加到新创建的元素](https://stackoverflow.com/questions/10488861/automatically-add-an-event-handler-to-a-newly-created-element-using-jquery)

我需要在动态内容上关联一个 jquery 回调。

例如：

```
<script type="text/javascript">
jQuery(document).ready(function() {

   $("#createContent").click(function(){
       $("#myCont").append('<img  class="myImg" src="icon.png"  />');

   });

});
</script>

<span id="createContent">click me</span>
<div id="myCont"></div> 
```

如果我点击“点击我”，它会添加一个图像..好吧，现在我想在所有创建的图像上关联一个 JQuery 回调，但是如果我在 .ready() 中添加这个代码，它就不起作用。

```
$(".myImg").click(function(){
       alert("click on img"); 
       $(this).remove();
} ); 
```

有一种方法可以在运行时关联 JQuery 回调吗？

这里有 jsFiddle 中的示例：http: [//jsfiddle.net/fM8Z7/](http://jsfiddle.net/fM8Z7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:43:45.683

试试这个：

```
$("#createContent").click(function () {
    var img = document.createElement('img');
    img.setAttribute('class', 'myImg');
    img.setAttribute('title', 'blabla');
    img.setAttribute('src', 'http://icons.iconarchive.com/icons/mid-nights/santa/128/christmas-coupons-icon.png');

    img.addEventListener('click', function () {
        alert("click on img");
        $(this).hide();
    });
    $("#myCont").append(img);
}); 
```

这将创建 1 个`img`元素，设置它的属性，添加一个事件侦听器，然后将图像附加到`#myCont`.

或纯 jQuery：

```
$("#createContent").click(function () {

    var img = $('<img class="myImg" title="blabla" src="http://icons.iconarchive.com/icons/mid-nights/santa/128/christmas-coupons-icon.png" />')
        .click(function () {
            alert("click on img");
            $(this).hide();
        }
    );
    $("#myCont").append(img);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:29:02.360

试试这个：

```
jQuery(document).ready(function() {
    var i = 0;
   $("#createContent").click(function(){
       $("#myCont").append('<img  class="myImg" title="blabla"  src="http://icons.iconarchive.com/icons/mid-nights/santa/128/christmas-coupons-icon.png"  />');
       $(".myImg").eq(i).click(function() {
           $(this).fadeOut('slow');
       });
       i++;
   });              
});​ 
```

[**演示**](http://jsfiddle.net/salih0vicX/fM8Z7/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:47:23.747

试试这个...

这会附加元素并仅初始化对附加元素的单击

```
jQuery(document).ready(function() {
   $("#createContent").click(function(){
       var appendedItem= $('<img  class="myImg" title="blabla"  src="http://icons.iconarchive.com/icons/mid-nights/santa/128/christmas-coupons-icon.png"  />');
      appendedItem.appendTo("#myCont")
                  .click(function(){
                      alert("click on img");
                      $(this).hide();        
                   } 
   );

  });
}) ;​ 
```

[在这里](http://jsfiddle.net/fM8Z7/2/)摆弄

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:48:47.983

试试这个

```
jQuery(document).ready(function() {
   $("#createContent").click(function(){
   $("#myCont").append('<img  class="myImg" title="blabla"  src="http://icons.iconarchive.com/icons/mid-nights/santa/128/christmas-coupons-icon.png"  />');  

} );
$("#myCont").on('click', function(event){
        alert("click on img");          
        $(event.target).hide();
   }); 
```

});​</p>

由于绑定事件时“.myImg”类不存在，因此您必须将点击事件绑定到现有元素。您可以使用“事件”对象获取单击的图像。

您可以使用 event.target 的 tagName 属性过滤图像标签

探索 jquery 事件对象以获取更多数据。

此方法有助于避免多个绑定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T13:07:26.383

这应该会变魔术：

```
jQuery(document).ready(function() {
    var i = 0;
   $("#createContent").click(function(){
       $("#myCont").append('<img  class="myImg" title="blabla"  src="http://icons.iconarchive.com/icons/mid-nights/santa/128/christmas-coupons-icon.png"  />');
       $(".myImg").eq(i).click(function() {
           $(this).fadeOut('slow');
       });
       i++;
   });              
});​ 
```

[**演示**](http://jsfiddle.net/salih0vicX/fM8Z7/3/)

# php - Mysql日期格式化和排序

> ID：14054671
> 
> 赞同：1
> 
> 时间：2012-12-27T12:24:44.250
> 
> 标签：php, mysql, datetime

我有一张表，其中的约会不是标准的，需要按日期和时间以某种方式组织行。

```
job_date    |    job_time
=========================
12/12/2012  |   10.30am  
11/10/2012  |    9.00pm  
14/11/2012  |   11.50pm 
```

有没有办法在mysql中格式化这些。我查看了 DATE_FORMAT() 函数，但我发现的示例似乎与我的表格中的格式无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:37:06.417

关键方法是`STR_TO_DATE`。我会给你两个解决方案：

首先：如果您**不想**更改数据库：

```
SELECT jobdate, STR_TO_DATE(job_time,'%h:%i%p')AS real_job_time FROM yourtable ORDER BY real_job_time; 
```

第二：如果您**可以**修改数据库，请使用 TIME 格式：

```
ALTER TABLE yourtable 
    MODIFY COLUMN job_time TIME NOT NULL;
UPDATE yourtable SET job_time = STR_TO_DATE(job_time,'%h:%i%p'); 
```

并选择

```
SELECT jobdate,job_time FROM yourtable ORDER BY job_time 
```

我认为第二种解决方案是迄今为止最好的，您*应该*选择它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:35:16.980

SELECT *, STR_TO_DATE(CONCAT(job_date,' ',job_time), 'Ymd H:i:s') AS date_format from table ORDER BY date_format DESC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:29:27.123

显然，将其存储为正确的日期会好得多，并且会导致更快的查询。

```
SELECT *
FROM table
ORDER BY substr(job_date, -4), substr(job_date, 4, 2), substr(job_date, 1, 2) 
```

# wordpress - 自定义应用程序 Wordpress 开发的最佳实践是什么？

> ID：14054672
> 
> 赞同：-4
> 
> 时间：2012-12-27T12:24:45.960
> 
> 标签：wordpress, model-view-controller

我有一个需要在 Wordpress 上实施的中型项目。我对MVC很熟悉，但不知道能不能和Wordpress一起使用？

我打算仅从 wordpress 中使用 wordpress 加载的图像、菜单和主题，特别是与 wordpress 隔离的页面（将与菜单链接）。因此，每当请求页面时，WP 控制器都会将控制权委托给我的控制器。这让我头疼！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:59:49.280

您只能将所有内容与 Wordpress 结合使用，但是，如果您与 Wordpress 紧密结合，则不能：

*   对您的代码进行单元测试。
*   集成测试您的代码（以一种实际成功的方式）。
*   管理和自动化代码的暂存。

当您谈论 MVC 时，我假设您将其用作软件高级设计的术语。只要您能够将您的项目与 Wordpress 本身分离，答案是肯定的。

如果你不能这样做，答案是否定的。Wordpress 本身不提供任何您可以轻松重用以引入 MVC 的东西，它自己的设计完全不同。

但是，由于 Wordpress 是一种具有一定程度的遗留引入复杂性的软件，因此您需要三思而后行，是否真的值得与 Wordpress 完全分离，或者您需要与遗留系统保持一致的不仅仅是技术债务。代码也是如此。

我强烈建议使用像 git 这样的去中心化版本控制系统来创建你所做的任何事情。您可以在此处找到 Wordpress 的 github 镜像：[https ://github.com/WordPress/WordPress](https://github.com/WordPress/WordPress)

我会说对于中小型项目，这是首选工具。保持低设计决策，因为您正在与现有平台集成，这样您无论如何都不能做任何新的事情。

# java - GridBagLayout，消失的 JList

> ID：14054674
> 
> 赞同：3
> 
> 时间：2012-12-27T12:25:00.890
> 
> 标签：java, layout, gridbaglayout

我写了简单的java应用程序。一个窗口（JFrame ramka）包含 3 个元素：JButton、JComboBox 和容器（其中包含 JList）。我想重新排列这些元素的位置，这会导致问题。我想使用 GridBagLayout，但是当我这样做时，我的容器消失了（或者它是 1px 大 -.-），setSize 也适用于 JComboBox。当我不使用任何布局时，会显示带有 JList 的容器，但是调整 JComboBox 的大小不起作用，并且一切都在重叠......一般看起来......它看起来一点也不。

我的问题来了：如何以及使用什么布局来重新组织我的组件和 JFrame 的位置？我使用 NetBeans 7.2

```
package layouttest;

import java.awt.*;
import javax.swing.*;
import javax.swing.JList;
import java.util.ArrayList;
import java.awt.*;
import java.awt.GridBagLayout;
import java.awt.event.*;
import javax.swing.*;

public class Layouttest {
    public static void main(String[] args) {
        JFrame ramka = new JFrame();
        //ramka.setLayout(new GridLayout(4, 3));
        //ramka.setLayout(new GridBagLayout());
        String [] test = {"cos", "cos2", "cos3", "cos4", "cos5", "cos6", "cos7", "cos8", "cos9","cos10", "cos11", "cos12"};
        ArrayList<String> myList = new ArrayList<String>();
        myList.add("cos");
        myList.add("cos2");
        myList.add("cos3");
        myList.add("cos4");
        myList.add("cos5");
        myList.add("cos6");
        myList.add("cos7");
        myList.add("cos8");
        myList.add("cos9");
        myList.add("cos10");

        GridBagConstraints ogranicznik = new GridBagConstraints();
        ogranicznik.insets = new Insets(5, 10, 5, 5);
        ogranicznik.gridx = 0;
        ogranicznik.gridy = 0; 

        Container c = new Container();
        ramka.setSize(500, 500);
        c.setSize(100,100);

        JList lista = new JList(myList.toArray());
        JScrollPane sp = new JScrollPane(lista);
        JTextField txt = new JTextField("cos");
        c.add(sp);

        sp.setSize(100,100);
        lista.setSize(100, 100);
        ramka.add(c);
        ramka.add(txt);

        String[] dropBoxList = {"uno", "due", "tre"};
        final JComboBox listaRozwijalna = new JComboBox(dropBoxList);

        listaRozwijalna.setPrototypeDisplayValue("XXXXXXXXXXXXXXXXXXXX"); 
        listaRozwijalna.revalidate();
        listaRozwijalna.repaint();
        ramka.add(listaRozwijalna);

        c.revalidate();
        c.repaint();
        ramka.revalidate();
        ramka.setVisible(true);
        ramka.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        // TODO code application logic here
    }
} 
```

@EDIT我发现java在使用布局模型时显示容器有问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:37:40.657

我重新排列了您的代码并添加到 GridBagLayout 中。我不得不猜测你想如何安排你的组件。

1.  始终确保您的 Swing 组件位于 Event Dispatch 线程上。这就是 main 方法的作用。

2.  将您的 GUI 组件与数据定义分开。这使得验证您的 GUI 组件变得更加容易。

3.  按照放置在主 JPanel 上的顺序定义您的 GUI 组件。

4.  始终定义一个主 JPanel。这使您可以更灵活地选择要使用哪个布局管理器来定义您的 GUI。

5.  始终使用一个或多个布局管理器。

这是我的代码版本。

```
import java.awt.Component;
import java.awt.Container;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class Layouttest implements Runnable {

    protected Insets    ogranicznik = new Insets(5, 10, 5, 5);

    @Override
    public void run() {
        JFrame ramka = new JFrame();

        JPanel panel = new JPanel();
        panel.setLayout(new GridBagLayout());

        JTextField txt = new JTextField("cos");

        addComponent(panel, txt, 0, 0, 1, 1, ogranicznik,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        JComboBox listaRozwijalna = new JComboBox(setDropBoxValues());

        addComponent(panel, listaRozwijalna, 1, 0, 1, 1, ogranicznik,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        JList lista = new JList(setListValues());
        JScrollPane sp = new JScrollPane(lista);

        addComponent(panel, sp, 0, 1, 1, 1, ogranicznik,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        ramka.add(panel);
        ramka.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        // ramka.setSize(500, 500);
        ramka.pack();
        ramka.setVisible(true);
    }

    protected void addComponent(Container container, Component component,
            int gridx, int gridy, int gridwidth, int gridheight, Insets insets,
            int anchor, int fill) {
        GridBagConstraints gbc = new GridBagConstraints(gridx, gridy,
                gridwidth, gridheight, 1.0D, 1.0D, anchor, fill, insets, 0, 0);
        container.add(component, gbc);
    }

    protected String[] setListValues() {
        String[] test = { "cos", "cos2", "cos3", "cos4", "cos5", "cos6",
                "cos7", "cos8", "cos9", "cos10", "cos11", "cos12" };
        return test;
    }

    protected String[] setDropBoxValues() {
        String[] dropBoxList = { "uno", "due", "tre" };
        return dropBoxList;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Layouttest());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:53:22.870

我以完全不同的方式做到了...我只是省略了容器...

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package layouttest;

import java.awt.*;
import javax.swing.*;
import javax.swing.JList;
import java.util.ArrayList;
import java.awt.*;
import java.awt.GridBagLayout;
import java.awt.event.*;
import javax.swing.*;

/**
 *
 * @author kula
 */
public class Layouttest {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        JFrame ramka = new JFrame();
       //ramka.setLayout(new GridLayout(4, 3));
        ramka.setLayout(new GridBagLayout());
        String [] test = {"cos", "cos2", "cos3", "cos4", "cos5", "cos6", "cos7", "cos8", "cos9","cos10", "cos11", "cos12"};
        ArrayList<String> myList = new ArrayList<String>();
        myList.add("cos");
        myList.add("cos2");
        myList.add("cos3");
        myList.add("cos4");
        myList.add("cos5");
        myList.add("cos6");
        myList.add("cos7");
        myList.add("cos8");
        myList.add("cos9");
        myList.add("cos10");

        GridBagConstraints ogranicznik = new GridBagConstraints();
//ogranicznik.insets = new Insets(5, 10, 5, 5);
ogranicznik.gridx = 0;
ogranicznik.gridy = 2; 

        Container c = new Container();
        ramka.setSize(500, 500);
   // c.setSize(100,100);

    final JScrollPane sp = new JScrollPane();
    JList lista = new JList(myList.toArray());

   sp.getViewport().add(lista);//!!!!!!!!!!!!!!!!!!

    //sp.removeAll();

    //c.add(sp);
   //sp.setViewportView(lista);
  // sp.setSize(100,100);
   //lista.setSize(100, 100);
    ramka.add(sp);

    String[] dropBoxList = {"uno", "due", "tre"};
    final JComboBox listaRozwijalna = new JComboBox(dropBoxList);

   /* listaRozwijalna.setPrototypeDisplayValue("XXXXXXXXXXXXXXXXXXXX"); 
    listaRozwijalna.revalidate();
    listaRozwijalna.repaint();*/
   // ramka.add(listaRozwijalna);

    c.revalidate();
    c.repaint();
    ramka.revalidate();

    ramka.setVisible(true);
    ramka.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        // TODO code application logic here
    }
} 
```

# c# - 同步线程和事件

> ID：14054678
> 
> 赞同：0
> 
> 时间：2012-12-27T12:25:24.733
> 
> 标签：c#, console, .net-2.0, manualresetevent, event-wait-handle

在我的控制台应用程序中，在线程中同步事件很困难。

```
using System;
using System.Threading;
using System.Windows.Forms;

namespace ConsoleApplication1
{
    public class Example
    {
        private static Button _button;
        private static readonly EventWaitHandle Ewh = new EventWaitHandle(false, EventResetMode.ManualReset);
        private static readonly EventWaitHandle Btn = new EventWaitHandle(false, EventResetMode.ManualReset);

        [STAThread]
        public static void Main()
        {
            _button = new Button();
            _button.Click += _button_Click;
            for (int i = 0; i <= 0x4; i++)
            {
                var t = new Thread(ThreadProc);
                t.Start(i);
            }
            Console.WriteLine("Press ENTER to release a waiting thread.");
            Console.ReadLine();
            Ewh.Set();
            Console.ReadLine();
        }

        private static void _button_Click(object sender, EventArgs e)
        {
            Console.WriteLine(new Random().Next(0x1388));
            Thread.Sleep(10);
            Btn.Set();
        }

        public static void ThreadProc(object data)
        {
            _button.PerformClick();
            Btn.WaitOne();
            Btn.Reset();
            Console.WriteLine("Thread {0} blocks.", data);
            Ewh.WaitOne();
            Console.WriteLine("Thread {0} exits.", data);
        }
    }
} 
```

应用程序以一些随机数的形式给出结果，然后是线程块，并且在发出[EventWaihandle](http://msdn.microsoft.com/en-us/library/system.threading.eventwaithandle.aspx)数据线程退出的信号后打印在控制台上。

目的是通过以下方式打印数据，例如

*随机数据

线程块

随机数据

线程块

……

线程退出

...*

样本输出

1234

线程 2 块

2345

线程 0 块

3456

线程 1 块

……

线程 1 退出

线程 4 退出

……

如何以这种方式在线程内同步线程和事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:31:41.380

请改用任务计划程序和同步上下文。在主线程中创建一个同步上下文，并将其传递给您要在主线程中执行的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:15:06.793

这是我的代码。它使用 Btn 的 AutoResetEvent。另外，我看到您正在创建 Button 并从后台线程访问它。我删除了这段代码，而是直接调用了 ButtonClick 方法。这是生成的代码：

```
using System;
using System.Threading;
using System.Windows.Forms;

namespace ConsoleApplication1
{
    public class Example
    {
        private static Button _button;
        private static readonly EventWaitHandle Ewh = new EventWaitHandle(true, EventResetMode.ManualReset);
        private static readonly EventWaitHandle Btn = new EventWaitHandle(true, EventResetMode.AutoReset);
        [STAThread]
        public static void Main()
        {
            Ewh.Reset();
            _button = new Button();
            _button.Click += _button_Click;
            for (int i = 0; i <= 0x4; i++)
                new Thread(ThreadProc).Start(i);
            Console.WriteLine("Press ENTER to release a waiting thread.");
            Console.ReadLine();
            Ewh.Set();
            Console.ReadLine();
        }

        private static void _button_Click(object sender, EventArgs e)
        {
            Console.WriteLine(new Random().Next(0x1388));
            Thread.Sleep(10);
        }

        public static void ThreadProc(object data)
        {
            Btn.WaitOne();
            Console.WriteLine("Thread {0} blocks.", data);
            _button.PerformClick();
            Btn.Set();
            Ewh.WaitOne();
            Console.WriteLine("Thread {0} exits.", data);
        }
    }
} 
```

# ruby - 在 ruby 1.8.7 模块中修改哈希

> ID：14054679
> 
> 赞同：0
> 
> 时间：2012-12-27T12:25:33.187
> 
> 标签：ruby, module

我已经实现的模块有一个奇怪的问题。我定义了一个键值对的散列，然后用星号替换散列值中的空格。当我尝试通过以下方式在 IRB 中加载此模块时：

```
load 'lib/protocols/myprotocol.rb' 
```

我收到以下语法错误：

```
SyntaxError: ./lib/protocols/myprotocol/errors.rb:29: syntax error, unexpected '}', expecting ')'
./lib/protocols/myprotocol/errors.rb:48: syntax error, unexpected kEND, expecting '}'
from (irb):23:in `load'
from (irb):23 
```

有任何想法吗？当我评论以下行时它起作用：

```
STATUS_CODES_MAP.each_value { |val| val.sub!(/\s/, 'Network error ' } 
```

似乎问题与修改模块内的常量哈希有关，但我不知道确切原因。这是模块代码：

```
module Protocols
  module MyProtocol
    STATUS_CODES_MAP = {
      'AuthError'    => 'Some error text',
      'AnotherError' => 'Another error text'
    }
    STATUS_CODES_MAP.each_value { |val| val.gsub!(/\s/, '*' }

    def error_from_response_status_code(status_code)
      error_from_response_code(STATUS_CODES_MAP, status_code, 'Unknown protocol error!')
    end

    def error_from_response_code(errors, code, unknown_error_msg)
      if errors.has_key?(code)
        return Base.error_from_string(errors[code])
      else
        RemoteError.new(unknown_error_msg)
       end
    end

    module_function :error_from_response_status_code
  end
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:27:32.310

好像你错过了一个`)`：

```
STATUS_CODES_MAP.each_value { |val| val.gsub!(/\s/, '*' } 
```

对比

```
STATUS_CODES_MAP.each_value { |val| val.gsub!(/\s/, '*') } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:29:02.440

```
STATUS_CODES_MAP.each_value { |val| val.sub!(/\s/, 'Network error ' } 
```

这里有语法错误。) 最后缺少。

除此之外，修改哈希值应该没有任何问题。

# iphone - 使用 SQLite 创建具有详细视图的多级向下钻取 iphone 应用程序

> ID：14054682
> 
> 赞同：0
> 
> 时间：2012-12-27T12:25:35.373
> 
> 标签：iphone, objective-c, xcode

我是 iphone 应用程序开发的新手，正在寻找一个很好的教程演示如何在带有详细视图的多级向下钻取表视图中使用 SQLite。

我在网上搜索了教程，但只能找到一些容易混淆的代码。

我的 SQLite 表基于类别 id 工作，如果类别 id 有多个结果，则表视图将显示 else，如果只有一个结果，则显示任何选定表单元格的详细视图。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:33:53.787

听起来您正在尝试进行主从视图。XCode 为这种视图提供了一个很好的模板。快速搜索“ios master detail sample code”会显示很多响应以获取一些示例代码。SQLite DB 将用于填充表。我喜欢用数据库中的数据填充 NSMutableArray，然后用它来填充数据。

在 Storyboards 上观看 WWDC 视频也很好。这将帮助你更好地理解 segues。

# c# - C# 模态窗口。如何实现从主视图中添加和删除多项式的行为

> ID：14054683
> 
> 赞同：-3
> 
> 时间：2012-12-27T12:25:39.407
> 
> 标签：c#, wpf, modal-dialog

;) 我目前正在开发一个 WPF 应用程序，其主要功能是在视图中绘制多项式。所以我有一个带有画布和一个子模态窗口的主窗口，我可以在其中设置多项式的参数，还有一个列出所有先前多项式的列表框。当我按下 OK 按钮时，模态窗口关闭并在主窗口中我代码如下所示：

```
 PanelParametros pn = new PanelParametros();
        pn.Owner = this;
        pn.ShowDialog();
        Polynomial p= new Polynomial();

       if (pn.DialogResult == true)
        {

        if (!String.IsNullOrEmpty(pn.boxA.Text))
            {
                valueA = float.Parse(pn.boxA.Text);
            }
       p.setvalueA(valueA); 
       // ..... //
      //Set the rest of parameters to my p object 
```

我发现的问题是如何区分当我在添加新多项式后按下“确定”按钮时以及当我刚刚从列表框中删除一些多项式时。

因为现在每次按下 OK 按钮时它的编码方式我都会创建一个多项式对象的实例，有时这不是我想要的。

提前感谢世界上所有的程序员，圣诞快乐哈哈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:06:43.847

您可以在模态表单中引入一个取消按钮，并明确检查“pn.DialogResult == DialogResult.OK”以检测实际按下了 OK。如果模态表单是通过取消留下的，则主表单中不会发生任何事情。

另一种方法是记住最近显示的多项式，并且仅在可以检测到某些更改时才重新绘制。这可以通过计算所有多项式参数的哈希和来完成。只有当哈希和发生变化时，重绘才有意义。

# java - 扩展jframe的大小？

> ID：14054690
> 
> 赞同：4
> 
> 时间：2012-12-27T12:25:58.557
> 
> 标签：java, swing, size, jframe, maximize-window

如何获得扩展 JFrame 的宽度和高度？（通过）

```
setExtendedState( getExtendedState() | JFrame.MAXIMIZED_BOTH); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:35:55.877

添加到我的评论：

> 嗯，在将 JFrame 设置为 JFrame.MAXIMIZED_BOTH 后调用 getWidth 和 getHeight 有什么问题

您确定在`JFrame`可见并且尺寸状态已更改后调用它吗？IE：

```
frame.setExtendedState( getExtendedState() | JFrame.MAXIMIZED_BOTH);
frame.pack();
frame.setVisible(true);

System.out.println(frame.getWidth()+" "+frame.getHeight()); 
```

另一种解决方案是简单地通过

```
GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();
Rectangle bounds = env.getMaximumWindowBounds();
System.out.println("Screen Bounds: " + bounds ); 
```

因为那将是`JFrame`状态`JFrame.MAXIMIZED_BOTH`的大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:35:20.550

之后`frame.setVisible(true)`：

```
double width = frame.getSize().getWidth();
double height = frame.getSize().getHeight(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T12:31:26.133

```
frame.getContentPane().getSize(); 
```

您将失去装饰标题栏的大小。或者获取rootPane，甚至更好。

# jquery - 如何仅将 jquery.cookie.js 文件与 html 一起使用？

> ID：14054700
> 
> 赞同：0
> 
> 时间：2012-12-27T12:26:28.430
> 
> 标签：jquery, html

我正在做一个项目，我正在做 html 和 jquery 工作，并且在服务器端有 cgi。现在我们想在其中实现登录/注销功能，但问题是我们没有使用像 php 这样的脚本语言。我想使用 jquery.cookie.js 生成 cookie 并将其与每个请求一起发送到服务器。我的问题是如何为特定浏览器的所有页面只生成一个 cookie，以便相同的 cookie 可以发送到服务器。如果用户知道页面名称，那么他可以直接访问它（http://www.mydomain.com/page .html）。我只使用 html，所以我必须在每个页面上包含所有 js 和 css。

如果出于相同目的有任何其他替代方案，则可以接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:45:47.180

jquery.cookies.js 只是帮助您在浏览器中设置/修改/删除/获取 cookie（默认内置界面对此不是很方便）

一旦你设置它 - 每个下一个请求将自动包含该 cookie。Cookie 有多种设置，例如仅适用于某些路径（例如，您可以告诉浏览器仅在页面具有 www.example.com/path_with_cookie/* 之类的路径时才发送 cookie）或何时到期。只需打开插件的文档并阅读如何使用脚本设置不同的选项。一旦设置了 cookie - 它将与任何满足域和路径等要求的请求一起发送，直到它没有被删除或过期。

但是我看不到如何在没有任何服务器端编码的情况下创建登录/注销。好吧，您可以使用 js/css 在浏览器中隐藏/显示一些元素，但不涉及服务器（通常服务器将检查用户是否使用 cookie 登录并根据该内容做出决定是否应向用户显示某些内容) 这将是无用的。一旦将某些内容传递到浏览器，任何知道 JS/HTML 工作原理的人都可以看到隐藏的内容。另外-您需要以某种方式检查登录名/密码是否正确-不知道如何在没有服务器端编码并且仍然安全的情况下做到这一点。

**升级版：**

如果您仍然需要将 cookie 放入表单中，您可以添加如下代码：

```
$(document).ready(function() {
    $('form').live("submit", function(){
       $(this).append($("<input type=\"hidden\" name=\"auth_cookie\">").val($.cookie('auth_cookie')));
    });
}); 
```

另一种方式（对于较新版本的 jquery，`live`现在已弃用）：

```
$(document).on("submit", 'form', function(){...}); 
```

此代码将捕获提交事件并将隐藏字段添加到任何提交的表单。当然，它应该添加到任何可用表单的页面上。

# assembly - 是否可以编写所有十六进制操作码的测试来收集统计信息以查找未记录的功能？

> ID：14054706
> 
> 赞同：0
> 
> 时间：2012-12-27T12:26:46.467
> 
> 标签：assembly

所有可能更改的统计信息（端口标志 regs 中断异常等）并将其写入数组（以查看和比较）。它计算 opcode ...etc 的长度。

可能存在这样的标准测试，例如测试任何给定的处理器。并且没有特别需要未记录功能的“神奇发现”，您可以在网上找到它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T18:41:54.923

您没有提及您要定位的处理器类型。这个答案是从 x86 的角度来看的，但在其他架构中，这个任务可能也很相似。

首先，什么会限制你编写和运行这样的程序？如果您在计算机上具有 root 访问权限（可以在 x86 术语中运行 ring0 代码），您可以执行以下操作：

1.  钩住所有必要的中断（或者你可以钩住**所有**的中断）。
2.  生成指令。
3.  将指令代码写入内存（可能有不同的指令长度）。
4.  在指令之后写一个`jmp`, `call`, `int`or `int3`（在 x86 处理器中，在其他体系结构中，指令会有所不同）。
5.  跳转到指令，它被执行或导致中断。如果它被执行，在它之后你会跳转或调用处理代码。如果它导致中断，请`cs:ip`从堆栈中检查（以了解指令在哪个地址失败），您处于哪个中断等，然后跳转或调用处理代码。

然后，在处理代码中，将您想要的所有数据（至少所有寄存器，我想）发送到某个外部端口，然后在另一台计算机上将所有数据存储在磁盘上。

1.  然后生成下一条指令。
2.  除非您已经处理了所有指令，否则跳至 3。

但是，在 x86 的情况下，允许的最大指令长度为 15 个字节。256^15 = 1.33 * 10^36。宇宙的年龄约为 4.339 * 10^17 秒。假设一个 10.0 GHz 处理器具有单核，每个时钟恰好 1 条指令（尝试并报告它），您将需要超过 300 000 000 个这样的处理器才能在比当前时代更短的时间内测试所有 15 字节指令宇宙：

```
(256^15)/(10*10^9)/(4.339*10^17) = 306344317 
```

当然，您也需要相当多的存储空间。

# c# - 用户控件中的图像不显示在页面中

> ID：14054712
> 
> 赞同：0
> 
> 时间：2012-12-27T12:27:11.053
> 
> 标签：c#, xaml, windows-8

我的解决方案包含两个项目，一个是类库，另一个是 windows store app 空白页项目。我的类库项目中有一个用户控件，在用户控件中，有一个图像，图像的属性设置为嵌入资源。但是当我在我的 xaml 页面中使用用户控件时，图像不会显示。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:53:31.150

将构建类型从“嵌入式资源”更改为“内容”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T04:13:45.993

很可能您的图像文件没有显示在解决方案资源管理器中。

转到您的解决方案资源管理器，

右键单击并选择“添加”

选择“现有项目”并添加您的图像名称..

这应该够了吧...

# html - JSF2 h:outputLink 将冒号 ':' 编码为 %3A

> ID：14054715
> 
> 赞同：1
> 
> 时间：2012-12-27T12:27:14.907
> 
> 标签：html, jsf, jsf-2, utf-8

我有网址

```
/templates/includes/portal/Portal.xhtml?stparamdls=PRM0002:C:#{row.get("msm003_msa")} 
```

这被解释为

```
/templates/includes/portal/prashanthPortal.xhtml?stparamdls=PRM0002%3AC%3ADevloper 
```

谁能告诉我为什么冒号被解释为 '%3A' ？

文档编码为`UTF-8`. 先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:51:46.160

这是因为`:`是[URL 中的保留字符之一](http://en.wikipedia.org/wiki/Percent-encoding#Types_of_URI_characters)，因此需要通过百分比编码进行转义，以防止 Web 浏览器对它进行不同的解释。当参数`<f:param>`以`<h:outputLink>`. 这种行为是完全正常的和预期的。

如果您遇到技术问题，它是由其他地方引起的，需要在 JSF 之外的其他地方解决`<h:outputLink>`。

# mysql - IDS 外观相同但实际上不同

> ID：14054717
> 
> 赞同：3
> 
> 时间：2012-12-27T12:27:24.397
> 
> 标签：mysql

我遇到了一个非常奇怪的问题，在我的数据库中，我将我的 id 设置为主键，它也存储了那些相同的 id，例如：

```
+--------+
| 身份证 |
+--------+
| ABC94 |
| ABC94 |
+--------+

```

当我从 phpmyadmin 删除它们时，它会生成以下删除查询，您可以在其中看到一个 id 包含`\r`，这使得它是唯一的，但在选择视图中不可见。请让我知道如何确保何时保存 ID，然后它应该只`ABC94`参与并忽略任何部分，例如`\r or \d or the like`. 谢谢，

```
DELETE FROM `Db` WHERE `ID` = 'ABC94\r';
DELETE FROM `DB` WHERE `ID` = 'ABC94'; 
```

我尝试了以下代码，但它给了我错误，因为`\`我猜是因为当我使用它`-`而不是`\`

```
SELECT SUBSTRING_INDEX( "ABC94\r",  "\", 1 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:34:51.393

如果有任何额外空白的可能性，您必须在插入*之前*在应用程序代码中处理它，或者在插入时使用 RDBMS 将其修剪掉。

```
INSERT INTO `Db` (`ID`) VALUES (TRIM('input value')) 
```

除非您设计一种用其他可打印字符替换白人步伐的方案，否则您无法在没有键违规的情况下更新现有行。

例如，将回车符替换为`x`，它们仍然是唯一的：

```
/* Global replacement of carriage returns with 'x' */
UPDATE `Db` SET `ID` = REPLACE(`ID`, '\r', 'x') 
```

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim)

您的尝试`SUBSTRING_INDEX()`几乎是有效的，但您应该省略反斜杠，而是提供空字符串`''`。

```
SELECT SUBSTRING_INDEX( 'ABC94\r',  '', 1 ) 
```

但是`TRIM()`像我上面那样使用更可靠。如果可能的话，最好的方法是修复输入数据的来源，以避免一开始就生成这些数据。

# iphone - iphone中的动态表格视图超出框架高度

> ID：14054722
> 
> 赞同：1
> 
> 时间：2012-12-27T12:27:27.760
> 
> 标签：iphone, objective-c

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView.tag == 101)
    {
        tableView.frame = CGRectMake(tableView.frame.origin.x, tableView.frame.origin.y, tableView.frame.size.width, RowHeight * [lettersArray count]);
    }    
    if (tableView.tag == 201)
    {
        NSLog(@"table Height is %f",RowHeight*[selectedCategoryArray count]);
        tableView.frame = CGRectMake(tableView.frame.origin.x, tableView.frame.origin.y, tableView.frame.size.width, RowHeight * [selectedCategoryArray count]);
    }
    if (tableView.tag == 301)
    {
         NSLog(@"selectedSubCategoryArray count is %d",[selectedSubCategoryArray count]);
         tableView.frame = CGRectMake(tableView.frame.origin.x, tableView.frame.origin.y, tableView.frame.size.width, RowHeight * [selectedSubCategoryArray count]);      
    }

    return  RowHeight;
} 
```

我这样写代码。但第三个表格将显示超出高度。

# xamarin.ios - 旋转更改时如何存储单点触控应用程序的数据？

> ID：14054726
> 
> 赞同：1
> 
> 时间：2012-12-27T12:27:39.647
> 
> 标签：xamarin.ios

我有一个应用程序会调用我的 wcf 服务来获取它的数据

当用户旋转 iPhone 或 iPad 时，我将加载不同的视图，但是数据已经获得

我不想回到服务器

存储数据以避免仅仅因为用户旋转设备而再次调用 wcf 服务的最佳方法是什么？

我正在使用 MonoTouch

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:12:55.033

您应该使用**MVC**（模型视图控制器）模式（或类似模式）来分离您的 UI 和数据......

这是有关如何使用 MonoTouch 执行此操作的[指南。](http://docs.xamarin.com/ios/Guides/Getting_Started/Hello,_MVC)

# c++ - sendfile 不复制文件内容

> ID：14054732
> 
> 赞同：6
> 
> 时间：2012-12-27T12:27:57.320
> 
> 标签：c++, linux, system-calls, sendfile

我创建文件`1.txt` `2.txt`并将一些内容写入`1.txt`.
然后我使用下面的代码并将内容复制到`2.txt`.
但它不起作用。里面什么都没有`2.txt`。

你能解释一下我的错误吗？

```
int main()
{
    int fd1 = open("1.txt",O_RDWR);
    int fd2 = open("2.txt",O_RDWR);          
    struct stat stat_buf ;
    fstat(fd1,&stat_buf);
    ssize_t size = sendfile(fd1,fd2,0,stat_buf.st_size);
    cout<<"fd1 size:"<<stat_buf.st_size<<endl; //output 41
    cout<<strerror(errno)<<endl; //output success

    close(fd1);
    close(fd2);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T12:30:37.493

据[man说](https://www.kernel.org/doc/man-pages/online/pages/man2/sendfile.2.html)，签名是

`ssize_t sendfile(int out_fd, int in_fd, off_t *offset, size_t count);`

因此，第一个参数是要写入的文件描述符，第二个参数是要读取的文件描述符。

所以，你的电话应该是：

`ssize_t size = sendfile(fd2,fd1,0,stat_buf.st_size);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:31:51.267

根据[sendfile](http://linux.die.net/man/2/sendfile)原型，您要写入的 fd 应该是第一个参数，而从中读取的 fd 应该是第二个参数。但是，您以完全相反的方式使用它。

因此，您的 sendfile 语句应如下所示：

```
ssize_t size = sendfile(fd2,fd1,0,stat_buf.st_size); 
```

# java - 橡皮擦功能无法正常工作

> ID：14054733
> 
> 赞同：0
> 
> 时间：2012-12-27T12:28:04.633
> 
> 标签：java, android, paint

我是 android 新手，我的绘画应用程序有问题。当用户想要删除或擦除一些已经绘制的东西时，通过使用下面提到的方法，我实现了清晰度，但在清除期间，每当调用此函数时，它都会显示深黑色线条。我不想显示黑色线条，我想要那个，就像我们真正的橡皮擦一样简单。

**`mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));`**

请帮帮我。希望有人对以上问题有答案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:32:39.190

如果您使用画布，您可以在画布上绘制颜色。

`canvas.drawColor(Color.white);`

无论你想画什么颜色，它都会在画布上画

# android - android Avd(emulator) 启动后不显示

> ID：14054735
> 
> 赞同：0
> 
> 时间：2012-12-27T12:28:07.077
> 
> 标签：android, android-emulator

在运行 Android 项目时，avd(emulator) 没有启动，也没有显示任何错误。

我在控制台上收到以下消息：

STA 是我的项目名称，n_avd 是我的 avd 名称

```
[2012-12-27 17:12:19 - STA] Android Launch!
[2012-12-27 17:12:19 - STA] adb is running normally.
[2012-12-27 17:12:19 - STA] Performing com.nil.android.sta.launch.SplashScreen activity launch
[2012-12-27 17:12:19 - STA] Automatic Target Mode: launching new emulator with compatible AVD 'n_AVD'
[2012-12-27 17:12:19 - STA] Launching a new emulator with Virtual Device 'n_AVD' 
```

请给我您宝贵的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:50:19.107

如果我首先启动模拟器，那么我的运气会更好，然后一旦它运行（并连接），我就会部署我的应用程序。

一步启动 AVD 并部署到它通常对我不起作用。

# html - PHP_EOL 在 NOWDOC 中不起作用

> ID：14054737
> 
> 赞同：0
> 
> 时间：2012-12-27T12:28:23.423
> 
> 标签：html, newline

这个问题只是为了了解`PHP_EOL;`和`HEREDOC`/ `NOWDOC`。

我运行此代码，但输出格式错误（所有内容都在一行中）。我期望的是带有断线的格式良好的输出。

**像这样**

![在此处输入图像描述](../Images/7c31ea6cb18fa080b504933f13e2b65f.png)

问题是什么？

```
<?php
    $data = array(
        'Título 1' => array(
            'description' => 'A.',
            'year' => 2010
        ),
        'Título 2' => array(
            'description' => 'B.',
            'year' => 2008
        ),
        'Título 3' => array(
            'description' => 'C.',
            'year' => 2011
        )
    );

    echo <<<'NOWDOC'
    ---------------------------------------------------
    #List
    ---------------------------------------------------

    NOWDOC;

    echo PHP_EOL;

    foreach($data as $title => $info) {
        echo <<<HEREDOC
        Título: {$title}
        Ano: {$info['year']}
        Descrição: {$info['description']}
    ---------------------------------------------------
    HEREDOC;

        echo PHP_EOL;
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:38:02.640

在控制台中，这应该可以正常工作。在浏览器中添加：

```
header("Content-Type:text/plain"); 
```

到脚本的顶部，浏览器会将其呈现为纯文本。

# php - 运行超过 2 个语句

> ID：14054739
> 
> 赞同：-1
> 
> 时间：2012-12-27T12:28:54.133
> 
> 标签：php, echo

我一直在努力使用下面的这段代码来获得不超过两个变量来过滤语句部分，但希望实现的是运行尽可能多的变量并过滤它们。见下面的代码

**设置变量**

```
 <?php 
      $customergroup = $product['product_id'] ;
    ?> 
```

**运行代码**

```
 <?php 

      if ($customergroup == "1" || $customergroup == "2") 
      { 
      ?>
         first content if variable is/equals 1

    <?php } else { ?>

         Second content if variable is/equals 2
    <?php } ?> 
```

我已经在过滤器中尝试了下面的代码，并在每个中断中添加了“else”

```
($customergroup == "1" || $customergroup == "2" || $customergroup == "3" || $customergroup == "4") 
```

但是无法让它基于变量回显内容也必须在 =="2" 之前添加一个空格才能让“2”部分回显内容，即使变量回显没有空格

任何帮助表示赞赏

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:34:03.817

```
<?php
switch($customergroup){
    case 1:
        ?>first content if variable is/equals 1<?php
        break;
    case 2:
        ?>Second content if variable is/equals 2<?php
        break;
    case 3:
        ?>and so on - just keep adding cases<?php
        break;
}
?> 
```

**编辑：**修改为使用语句块

# java - 当一个 Hibernate 实例无法到达二级缓存时会发生什么？

> ID：14054754
> 
> 赞同：6
> 
> 时间：2012-12-27T12:30:02.517
> 
> 标签：java, hibernate

假设我有两个服务，每个都使用相同的二级缓存运行相同的 Hibernate 应用程序。现在假设其中一个服务无法连接到二级缓存（有人设置了阻止访问缓存集群的防火墙规则）。该服务器之后如何工作？服务器之间如何保持数据一致性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:45:51.817

需要进行实验。但我敢打赌，你得到的只是遭受通信失败的 Hibernate 操作的一个直接异常，与数据库不可用时发生的情况没有太大区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:58:04.927

实践应该这样，处理异常并且无法从缓存中获取它，然后必须访问数据库并获取值。

# iphone - 如何取消擦除擦除 UIImage

> ID：14054757
> 
> 赞同：0
> 
> 时间：2012-12-27T12:30:32.530
> 
> 标签：iphone, objective-c, ios, uiimageview, uiimage

> **可能重复：**
> [如何取消擦除已擦除的 UIImage](https://stackoverflow.com/questions/14053563/how-to-unerase-the-erased-uiimage)

嗨，伙计们，我正在我的 PanGesture 中尝试使用图像擦除代码，我正在使用以下代码：

```
 UIImage * image  = [UIImage imageNamed:@"326d4fb72362a2e44659141cadfc4977.jpg"];
 holderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 235)];
 imgForeground = [[UIImageView alloc] initWithFrame:[holderView frame]];
 [imgForeground setImage:image];
 [holderView addSubview:imgForeground];

 UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
 [panRecognizer setMinimumNumberOfTouches:1];
 [panRecognizer setMaximumNumberOfTouches:1];
 [panRecognizer setDelegate:self];
 [holderView addGestureRecognizer:panRecognizer];
 [self.view addSubview:holderView]; 
```

然后我在这里处理这个

```
 -(void)move:(id)sender {

    CGPoint currentPoint;
    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan){

        lastPoint =  [sender locationInView:imgForeground];
        lastPoint.y -=20;
    }
    else{

        currentPoint = [sender locationInView:imgForeground];;
        currentPoint.y -=20;
    }

    UIGraphicsBeginImageContext(imgForeground.frame.size);
    [imgForeground.image drawInRect:CGRectMake(imgForeground.frame.origin.x, imgForeground.frame.origin.y, imgForeground.frame.size.width, imgForeground.frame.size.height)];

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineCap(context,kCGLineCapRound); //kCGImageAlphaPremultipliedLast);
    CGContextSetLineWidth(context, 10);
    CGContextSetRGBStrokeColor(context, 0, 0, 0, 1.0);
    CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeClear);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(context, lastPoint.x, lastPoint.y);
    CGContextStrokePath(context);
    imgForeground.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

 } 
```

**我的问题是如何取消图像请帮忙**

# python - 如何在 QTabWidget 设置背景颜色/图像特定选项卡？

> ID：14054761
> 
> 赞同：3
> 
> 时间：2012-12-27T12:30:46.243
> 
> 标签：python, qt, pyqt, qtabbar, qtstylesheets

经过长时间的访客状态，终于，这是我的第一篇文章。我在我的 TabWidget（来自配置）中动态创建选项卡。喜欢; - 它是python代码，pyqt，答案可以用c++编码，对我来说没关系:) –</p>

```
baseWidget = QWidget()
//fill baseWidget with other widgets
window.tabWidget.addTab(baseWidget, _fromUtf8(""))
window.tabWidget.setTabText(window.tabWidget.indexOf(baseWidget), ...) 
```

然后，通过 qss 进行样式设置，例如；

```
QTabBar::tab {}
QTabBar::tab:selected {}
QTabBar::tab:!selected {}
QTabBar::tab:last {}
QTabBar::tab:first:!selected {}
QTabBar::tab:!selected:hover {} 
```

此时一切正常。但是，我想单独为我的标签着色。

我怎样才能做到这一点？如果可能，如何为选项卡设置 objectName？

所有帖子将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T20:01:31.467

更改基础对象名称将无济于事，您对基础对象的样式表要做的就是更改该面板的内容背景。

我做了很多研究并测试了一些关于您的问题的事情，似乎唯一的解决方案是重新实现`QTabWidget`绘画事件。

我尝试了一些我在其他任何地方都没有读过的东西，它给出了一些奇怪的结果，这种方法应该有效。如果你想研究它并亲自看看：

```
tabWidget->setCurrentIndex(0);
tabWidget->tabBar()->setStyleSheet("background-color: red;");

tabWidget->setCurrentIndex(1);
tabWidget->tabBar()->setStyleSheet("background-color: blue;"); 
```

# junit - 如何使用嵌入式 glassfish 测试 @RolesAllowed 安全 EJB3.1

> ID：14054764
> 
> 赞同：4
> 
> 时间：2012-12-27T12:31:03.203
> 
> 标签：junit, ejb-3.1, glassfish-embedded

我有一个受@RolesAllowed 保护的@Stateless EJB，我正在尝试使用嵌入式GlassFish 容器进行JUnit-4 测试。我最近克服的障碍是持久性单元和安全领域的 GlassFish 域配置。

```
Map<String, Object> properties = new HashMap<String, Object>();
properties.put(EJBContainer.MODULES, new File("build/classes"));
properties.put("org.glassfish.ejb.embedded.glassfish.configuration.file", 
     "test-resource/domain.xml");
ec = javax.ejb.embeddable.EJBContainer.createEJBContainer(properties); 
```

嵌入式 GlassFish 启动，我的应用程序部署，一切似乎都按预期工作，直到我调用带有 @RolesAllowed 注释的 EJB 方法。

```
javax.ejb.AccessLocalException: Client not authorized for this invocation 
```

由于某种原因，我无法弄清楚如何设置容器的角色以通过安全检查。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T13:02:15.450

您可以使用该`com.sun.appserv.security.ProgrammaticLogin`课程来帮助您解决此问题。这是 GlassFish 特有的，而不是 Java EE 6 API；如果您使用不同的嵌入式容器，则需要找到等效的容器。

`ProgrammaticLogin`使您能够以用户身份登录并为当前线程建立安全主体。它的用法示例是：

```
ProgrammaticLogin login = new ProgrammaticLogin();
login.login("user", "password", "file", true); 
```

where`user`和`password`是用于在`file`领域中以用户身份登录的凭据。这允许您在调用部署在嵌入式容器中的 EJB 时建立要使用的安全主体。缺少此将导致匿名主体被用作主体（因此在容器强制执行`RolesAllowed`约束时导致异常）。

请注意，这还需要您使用现有的安全领域。建议您使用自定义 GlassFish 安装根目录（或实例根目录），其中包含一个预配置`domain.xml`文件，其中包含您的应用程序使用的安全领域。

有关如何使用`ProgrammaticLogin`API的更多详细信息，请参阅[此 Oracle 博客条目](https://blogs.oracle.com/nithya/entry/running_a_secure_application_using)。

# c - 通过 UpdateResource 更新 STRING TABLE（添加多个字符串）

> ID：14054765
> 
> 赞同：1
> 
> 时间：2012-12-27T12:31:22.160
> 
> 标签：c, windows, winapi, string-table

> **可能重复：**
> [使用 UpdateResource 更新字符串表](https://stackoverflow.com/questions/14088057/updating-a-string-table-with-updateresource)

我正在尝试通过 UpdateResources 更新二进制字符串表，目前，我的代码只添加一个字符串，但我希望它在字符串表中添加多个条目。

这是我的代码：

```
 HANDLE hRes = BeginUpdateResource("file.exe",TRUE);
    if (hRes)
    {
        char * sNewString = "Line";
        int iCharCount = (strlen(sNewString) + 1);   //sNewString.size() + 1;
        LPWSTR pUnicodeString = new WCHAR[iCharCount];
        if (!pUnicodeString)
        {
            cout << "Error" << endl;
        }
        DWORD dwUnicodeCharCount = MultiByteToWideChar(CP_ACP,NULL,sNewString,-1,pUnicodeString,iCharCount);
        HGLOBAL hGlob = GlobalAlloc(GHND,(dwUnicodeCharCount + 4) * sizeof(WCHAR));
        LPWSTR pBufStart = (LPWSTR)GlobalLock(hGlob);
        LPWSTR pBuf = pBufStart;
        pBuf++;
          // offset to make it string ID=1\. Increment by more
            // to change to a different string ID
        //next 2 bytes is string length
        *(pBuf++) = (WCHAR)dwUnicodeCharCount-1;
        for (int i = 0; i < (int)dwUnicodeCharCount-1; i++)
        {
            dwUnicodeCharCount++;
        }
        delete pUnicodeString;
        if (++dwUnicodeCharCount%1) // make sure even number
        {
            dwUnicodeCharCount++;
        }
        if(!UpdateResource(hRes,RT_STRING,MAKEINTRESOURCE(1),MAKELANGID(LANG_ENGLISH, SUBLANG_ENGLISH_US),
                          pBufStart, dwUnicodeCharCount * sizeof(WCHAR)))
        {
            cout << "Function failed!" << endl;
        }
        GlobalUnlock(hGlob);
        GlobalFree(hGlob);
        EndUpdateResource(hRes,FALSE); 
```

我试图编辑`

```
char * sNewString = "Line"; 
```

到`

```
char * sNewString = "Line1\nLine2"; 
```

试图模仿换行符无济于事。

我错过了什么吗？我彻底查看了[http://msdn.microsoft.com/en-us/library/windows/desktop/aa381050(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381050(v=vs.85).aspx)，看起来我没有错过任何关键点，并且没有功能失败。

# compass-sass - 为什么我的指南针精灵路径错误

> ID：14054770
> 
> 赞同：7
> 
> 时间：2012-12-27T12:31:42.733
> 
> 标签：compass-sass, css-sprites

当我试图创建一个精灵时，使用指南针，screen.css 中主精灵图像的路径出错了，因为我看不到图像。

我的scss代码是

```
@import "compass";
@import "spr/*.png";
 h1 { @include spr-sprite("car");  height:50px; width:50px; } 
```

我的精灵 css 输出

```
.spr-sprite, h1 {  background: url('/images/spr-sa37328aec0.png') no-repeat; }
h1 {  background-position: 0 -147px;  
height: 50px; 
width: 50px;
overflow: hidden; 
text-align: left; 

                  } 
```

可以看到 out of the background 应该`../`以`/images/`. 它创造了一个问题。我的图像文件夹路径

```
images
 ------spr
          ---*.png
sass
-----screen.scss
css
---screen.css 
```

我的 config.rb 代码

```
# Require any additional compass plugins here.
# Set this to the root of your project when deployed:
http_path = "/"
css_dir = "stylesheets"
sass_dir = "sass"
images_dir = "images"
javascripts_dir = "javascripts" 
```

我是 sass 和 compass 的新手，所以我可能缺少一些代码。请帮我找出来。任何帮助将不胜感激。非常非常感谢提前回复。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-28T08:12:11.377

将此添加到您的`config.rb`：

```
relative_assets = true 
```

（我假设您不是从域的根目录提供此服务，否则不需要它。您是通过查看页面`file://`吗？）

# jquery - 样板js文件调用方法

> ID：14054773
> 
> 赞同：2
> 
> 时间：2012-12-27T12:32:03.597
> 
> 标签：jquery, html, html5boilerplate

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.3.min.js"><\/script>')</script> 
```

样板js文件调用方法

```
 1- Why calling two times on the same file..? 
    2- What is the different second one calling method..? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:41:58.817

1.  第一行从 Google 的内容分发网络 (CDN) 加载 jQuery。它很可能已经在某人的缓存中，因此它会为他们加载超快。

2.  第二行字面意思是`window.jQuery OR load a local copy`。本质上，如果第一行代码成功，`window.jQuery`就会存在，并且`||`不会执行后面的位。如果不是（站点已关闭，或发生其他错误），浏览器将跳转到 OR 条件，并改为加载本地副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:34:41.433

第一个从 Google CDN 服务器加载 Jquery。由于我们是从 CDN 服务器加载的，因此文件加载速度很快。而且您也可以从浏览器缓存中受益（如果其他人在其他网站上使用相同的 url）。

如果第一个由于任何原因（cdn 服务器关闭或其他问题）失败，则第二个从本地服务器加载（表示当前网站）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T12:35:16.043

我猜它会检查你是否有互联网连接。如果有，将使用 CDN 版本，否则使用本地版本。

# javascript - 如何在javascript中获取控件的id导致回发

> ID：14054783
> 
> 赞同：2
> 
> 时间：2012-12-27T12:33:03.553
> 
> 标签：javascript, jquery, asp.net

如何获取`PostBack`在 asp.net 中导致的控件的 ID。我用

```
document.getElementById("__EVENTTARGET") 
```

但它只给出了`objectHtmlInputElement`一个不完整的 ID。我怎样才能只在 javascript 中而不是在后面的代码中得到这个。我希望在回发后专注于该元素。请帮忙..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:42:29.020

[您可以使用本博客](http://geekswithblogs.net/mahesh/archive/2006/06/27/83264.aspx)中提到的这个函数来获取回发控件的 id，将此 id 存储在 hiddenfield 中并使用 JS 从 hiddenfield 中获取该 id

```
 protected void Page_Load(object sender, EventArgs e)
    {    
        if (Page.IsPostBack)
           HiddenField1.Value = getPostBackControlName();
    } 

private string getPostBackControlName()
{
    Control control = null;
    //first we will check the "__EVENTTARGET" because if post back made by       the controls
    //which used "_doPostBack" function also available in Request.Form collection.
    string ctrlname = Page.Request.Params["__EVENTTARGET"];
    if (ctrlname != null && ctrlname != String.Empty)
    {
        control = Page.FindControl(ctrlname);
    }

    // if __EVENTTARGET is null, the control is a button type and we need to
    // iterate over the form collection to find it
    else
    {
        string ctrlStr = String.Empty;
        Control c = null;
        foreach (string ctl in Page.Request.Form)
        {
            //handle ImageButton they having an additional "quasi-property" in their Id which identifies
            //mouse x and y coordinates
            if (ctl.EndsWith(".x") || ctl.EndsWith(".y"))
            {
                ctrlStr = ctl.Substring(0, ctl.Length - 2);
                c = Page.FindControl(ctrlStr);
            }
            else
            {
                c = Page.FindControl(ctl);
            }
            if (c is System.Web.UI.WebControls.Button ||
                     c is System.Web.UI.WebControls.ImageButton)
            {
                control = c;
                break;

            }
        }
    }
    return control.ID;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-28T19:02:16.823

采用`document.getElementById('__EVENTTARGET').value`

# html - 由于 iframe 边距，iframe 内的 Div 不完全可见

> ID：14054786
> 
> 赞同：1
> 
> 时间：2012-12-27T12:33:15.360
> 
> 标签：html, css, iframe, internet-explorer-8

我在 iframe 中有一个 div。我的问题是，当 div 打开时，由于 iframe 的宽度限制，它的内容没有完全显示。我尝试使用 z-index 并为 iframe 内的 div 设置了更高的 z-index 值，但没有成功。非常感谢任何建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:47:55.333

您可以在加载内容时自动调整 iframe 的大小：

```
<script type="text/javascript">
  function autoResize(id){
    var height = document.getElementById(id).contentWindow.document.body.scrollHeight;
    var width = document.getElementById(id).contentWindow.document.body.scrollWidth;

    document.getElementById(id).height= (height) + "px";
    document.getElementById(id).width= (width) + "px";
  }
</script>

<iframe src="yourpage.html" id="yourframe" onLoad="autoResize('yourframe');"></iframe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:39:39.337

您不能将内容溢出`iframe`. 因此`overflow`and`z-index`属性不能用于让某些元素流出`iframe`.

您需要增加框架的宽度或根本不使用`iframe`；例如通过 AJAX 加载内容并将它们插入到文档的另一个元素中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:38:04.423

您是否尝试过使用 div 的绝对位置？就像是：

```
.div-overlay {
    position:absolute;
    top:200px;
    left:100px;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:38:34.980

这可能是因为`margin:0`iframe 中使用了框架主体边距

```
html,body {margin:0px; padding:0px}   //use this in  iframe css 
```

# python - Sqlalchemy 核心，从元组插入多行而不是字典

> ID：14054787
> 
> 赞同：9
> 
> 时间：2012-12-27T12:33:22.693
> 
> 标签：python, sqlite, sqlalchemy

我在 2D 元组中有数据（或者说来自 Numpy 表），需要将其插入 SQL 表中。将 Sqlalchemy Core 与 SQLite 一起使用，我怎样才能有效且简单地将这些数据插入到我的表中？

取自@eclair；

```
engine = sa.create_engine('sqlite://', echo=True)
metadata = sa.MetaData()

widgets_table = sa.Table('widgets', metadata,
    sa.Column('id', sa.Integer, primary_key=True),
    sa.Column('bar', sa.String(50)),
    sa.Column('biz', sa.Boolean),
    sa.Column('baz', sa.Integer),
    )
metadata.create_all(engine)

# Assuming this is the data where None holds place for primary key
my_data = [
    (None, "Test", True, 3),
    (None, "Test", True, 3),
    ] 
```

到目前为止，我在文档中的[这一点](http://docs.sqlalchemy.org/en/latest/core/expression_api.html#sqlalchemy.sql.expression.Insert.values)；所以我有;

```
engine.execute(widgets_table.insert().values((None, "Test", True, 3))) 
```

哪个有效。但我想一次插入多行，例如

```
engine.execute(widgets_table.insert().values(((None, "Test", True, 3), (None, "Test", True, 3)))) 
```

但随后出现错误；

> 具有当前数据库版本设置的“sqlite”方言不支持就地多行插入。

也试过了；

```
insert = widgets_table.insert()

engine.execute(insert, [
                    (None, "Test", True, 3), 
                    (None, "Test", True, 3) 
                    ]) 
```

有错误；

> AttributeError：“元组”对象没有属性“键”

作为最近转换为 SQLalch 的人，我在这里有点迷失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:28:09.593

你错过了一些关于你的设置的细节，所以我做了一些事情。除非您也插入表的主键，否则插入元组很困难，那么为什么不在插入之前从您的数据中创建一个字典呢？

这应该适用于 SQLAlchemy 0.7.6 及更高版本：

```
import sqlalchemy as sa

engine = sa.create_engine('sqlite://', echo=True)
metadata = sa.MetaData()

widgets_table = sa.Table('widgets', metadata,
    sa.Column('id', sa.Integer, primary_key=True),
    sa.Column('foo', sa.String(50)),
    sa.Column('bar', sa.String(50)),
    sa.Column('biz', sa.Boolean),
    sa.Column('baz', sa.Integer),
    )
metadata.create_all(engine)

# Assuming this is your data
values = [
    (None, "Test", True, 3),
    (None, "Test", True, 3),
    ]

with engine.connect() as connection:
    with connection.begin() as transaction:
        try:
            markers = ','.join('?' * len(values[0]))
            ins = 'INSERT INTO {tablename} VALUES ({markers})'
            ins = ins.format(tablename=widgets_table.name, markers=markers)
            connection.execute(ins, values)
        except:
            transaction.rollback()
            raise
        else:
            transaction.commit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-30T23:05:06.967

来自未来的你好！

2021 年，随着 SQLAlchemy 1.4 成为稳定版本，2.0 即将发布，您`insert().values`在列表（或元组）列表中使用的最初尝试应该可以正常工作。

我对 SQLAlchemy 也比较陌生，所以我不能正确地说出发生了什么变化——也许变化不是在 SQLAlchemy 中，而是在`sqlite3`Python 附带的 DB-API 库中。在这种情况下，我应该注意我使用的是 Python 3.7.12。

```
import sqlalchemy as sa

engine = sa.create_engine('sqlite://', echo=True)
metadata = sa.MetaData()

widgets_table = sa.Table('widgets', metadata,
    sa.Column('id', sa.Integer, primary_key=True),
    sa.Column('bar', sa.String(50)),
    sa.Column('biz', sa.Boolean),
    sa.Column('baz', sa.Integer),
)

metadata.create_all(engine)

my_data = [
    (None, "Test", True, 3),
    (None, "Test", True, 3),
]

# works fine
engine.execute(widgets_table.insert().values(my_data)) 
```

进而：

```
>>> engine.execute(sa.select(widgets_table)).all()
[(1, 'Test', True, 3), (2, 'Test', True, 3)] 
```

* * *

另请参阅：[python sqlalchemy 在元组数据结构中插入多行](https://stackoverflow.com/questions/15628131/python-sqlalchemy-insert-multiple-lines-in-a-tuple-data-structure)

# jsf - 如何包含多个 xhtml 页面，这些页面将相同的模板扩展为摘要 xhtml 页面，

> ID：14054788
> 
> 赞同：8
> 
> 时间：2012-12-27T12:33:37.727
> 
> 标签：jsf, jsf-2, facelets

我们如何将多个 xhtml 页面包含到摘要页面中。这里所有的 xhtml 页面包括相同的模板。

## commonTemplate.xhtml

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
<title> SNS </title>
<meta http-equiv="expires" content="0"/>
<meta http-equiv="pragma" content="no-cache"/>
<meta http-equiv="cache-control" content="no-cache"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" href="sns.css" type="text/css" />
</head>
<h:body>

    <div id="header">
        <ui:insert name="commonHeader">
            <ui:include src="header.xhtml" />
        </ui:insert>
    </div>
    <div id="content">
        <ui:insert name="commonBodyContent">
            Common Body Content.
        </ui:insert>
    </div>
    <div id="footer">
        <ui:insert name="commonFooter">
            <ui:include src="footer.xhtml" />
        </ui:insert>
    </div>
</h:body>
</html> 
```

## updatePersonalDetails.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="commonTemplate.xhtml">

    <ui:define name="commonBodyContent">
        .........;
        ..........;
    </ui:define>

</ui:composition> 
```

## 更新地址.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="commonTemplate.xhtml">

    <ui:define name="commonBodyContent">
        .........;
        ..........;
    </ui:define>

</ui:composition> 
```

## 选择首选项.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="commonTemplate.xhtml">

    <ui:define name="commonBodyContent">
        .........;
        ..........;
    </ui:define>

</ui:composition> 
```

## 摘要.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:include src="updatePersonalDetails.xhtml" />
    <ui:include src="updatedAddress.xhtml" />
    <ui:include src="selectPreferences.xhtml" />

</ui:composition> 
```

无论我在所有 xhtml 页面中拥有什么数据，都应该在摘要页面中显示完全相同的数据。但包括这会导致多个`<html>`文档在页面上呈现。

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T13:56:57.193

将正文内容移动到您也包含`<ui:include>`在模板客户端中的另一个模板中。

例如`updatePersonalDetails.xhtml`

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="commonTemplate.xhtml">

    <ui:define name="commonBodyContent">
        <ui:include src="updatePersonalDetails-content.xhtml" />
    </ui:define>

</ui:composition> 
```

*（对其他人也重复）*

这样你就可以做到这一点`summary.xhtml`：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="commonTemplate.xhtml">

    <ui:define name="commonBodyContent">
        <ui:include src="updatePersonalDetails-content.xhtml" />
        <ui:include src="updatedAddress-content.xhtml" />
        <ui:include src="selectPreferences-content.xhtml" />
    </ui:define>

</ui:composition> 
```

* * *

**与具体问题无关**，考虑将模板和包含在`/WEB-INF`文件夹中，以防止它们被直接访问。另请参阅[我需要将哪些 XHTML 文件放入 /WEB-INF 而哪些不需要？](https://stackoverflow.com/questions/9031811/which-xhtml-files-do-i-need-to-put-in-web-inf-and-which-not/9033567#9033567)

# linux - awk：仅在特定字段中查找和替换

> ID：14054791
> 
> 赞同：5
> 
> 时间：2012-12-27T12:33:45.817
> 
> 标签：linux, bash, awk

我有一个这样的文本文件：

```
$ cat test
12 13 2100 s
12 13 3100 s
100 13 100 s
12 13 300 s 
```

我希望输出是这样的：

```
$ cat test
12 13 22000 s
12 13 32000 s
100 13 2000 s
12 13 300 s 
```

我只想将`100`字段 3（曾经`100`包含在 中`$3`）替换为`2000`. 我怎样才能完成这项工作`awk`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T12:41:23.747

这是一种使用方法`awk`：

```
awk '{ sub(/100$/, "2000", $3) }1' file 
```

结果：

```
12 13 22000 s
12 13 32000 s
100 13 2000 s
12 13 300 s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:43:37.087

```
awk '$3~/100/{gsub(/100/,"2000",$3)}1' your_file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T12:55:47.053

尝试：

```
awk '{$3=gensub(100,2000,1,$3);print}' test.txt 
```

# spring-mvc - 将文件上传到 spring mvc 服务器 - 最佳实践

> ID：14054793
> 
> 赞同：2
> 
> 时间：2012-12-27T12:33:48.543
> 
> 标签：spring-mvc, file-upload, image-uploading

在一个无状态的移动应用程序中，我需要将一个图像文件从一个移动客户端上传到我的服务器，该服务器公开一个基于 Spring MVC 的 Web 层（稍后我将需要对该图像执行 OCR 过程，但这一点不相关） .

我见过的所有 spring MVC 文件上传示例都是基于[MultipartFiles](http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/web/multipart/MultipartFile.html)的，它不适合我的需求，因为它们假设 modelAndView 存在，但是我的服务器是无状态的，我不使用模型或视图，也不使用 http 会话，只有纯和简单的 JSON 格式的宁静请求。

我想知道最好的方法是什么？

现在，我创建了一个测试，将我的图像作为字符串发送到我的服务器（使用 base64 编码）。就像是：

```
ClassPathResource myFile= new ClassPathResource("imageName.jpg");
byte[] fileByteArray = Files.readAllBytes(myFile.getFile().toPath());
String imageAsString = Base64.encodeBase64URLSafeString(fileByteArray); 
```

现在我将这个 imageAsString 发送给我的控制器。然后在我的控制器中，我可以使用以下内容将此字符串解码回字节数组：

```
public static byte[] decodeFile(String fileDataString) {
return Base64.decodeBase64(fileDataString);
} 
```

所以在我的服务器中，我现在持有一个字节数组，它是原始数据，除了将它写入 FileOutputStream 之外，我不确定我可以用它做任何事情。有人可以推荐将图像上传到我的服务器的良好做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:34:28.900

您可以使用 MultipartFile 执行此操作，而无需使用如下所示的模型和视图。

```
@RequestMapping(value="/rest/files", method=RequestMethod.POST,consumes="multipart/form-data", produces="application/json")
@ResponseBody()
public String uploadFile(@RequestParam("file") MultipartFile file) {
    try {
        if (!file.isEmpty()) {
            byte[] bytes = file.getBytes();
            // store the bytes somewhere
            return  "{\"success\": true}";
        } else {
            return  "{\"success\": false}";
        }
    } catch (Exception ex) {
        return  "{\"success\": false}";
    }
    return  "{\"success\": false}";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:53:45.827

Since uploading MultipartFile to a spring MVC web layer requires multiple changes (servlet-context changes, message converters changes, Controller adjustments etc..) and I could not find any complete and sinple tutorial for this process I decided to simply upload my files (images) as a Base64 encoded string. To do this I used org.apache.commons.codec.binary.Base64 which provides the ***encodeBase64URLSafeString*** mathod that can encode my file into string and then using ***decodeBase64*** decode it back to the original file content. This way I'm not loosing any data on the way and I'm avoiding any complex changes. The disadvantage of this method is that it requires my clients to encode the files in the exact same way the ***encodeBase64URLSafeString***方法可以，所以我很确定它不是最佳的..

# android-layout - 在自定义操作栏上添加点击事件

> ID：14054796
> 
> 赞同：1
> 
> 时间：2012-12-27T12:34:10.503
> 
> 标签：android-layout, android-actionbar, android-theme

我为我的应用程序创建了自己的主题。我还自定义了操作栏。现在我想将点击事件添加到操作栏的按钮。我的代码如下。我的主题是..

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="CustomTheme" parent="android:Theme.Holo">
    <!--  <item name="android:background">@drawable/red_dark3</item> -->
     <item name="android:windowBackground">@drawable/red_dark3</item>
      <item name="android:actionBarStyle">@style/Widget.ActionBar</item> 
    <item name="android:actionBarSize">120dp</item>
<!-- <item name="android:customNavigationLayout">@layout/top_bar</item> -->
</style>

<style name="Widget.ActionBar" parent="android:Widget.Holo.ActionBar">
     <!-- <item name="android:displayOptions">showHome|useLogo|showCustom</item>  -->
     <item name="android:displayOptions">showTitle</item> 
    <item name="android:customNavigationLayout">@layout/top_bar</item>
     <item name="android:background">@drawable/red_trans</item>
</style>
</resources> 
```

我的 top_bar.xml 布局如下..

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:id="@+id/top_bar_layout" >

<ImageButton
    android:id="@+id/back_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="7dip"
   android:background="@drawable/back" />

<ImageButton
    android:id="@+id/home_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:layout_marginLeft="10dip"
    android:background="@drawable/home" />
</LinearLayout> 
```

现在我想为这些按钮添加监听器。如果有人知道答案，请告诉我。提前致谢。如果有人知道答案，请回答这篇文章

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:23:54.253

我在布局 xml 中添加了“android:onClick”属性，如下所示..

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:id="@+id/top_bar_layout" >

<ImageButton
    android:id="@+id/back_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="7dip"
    android:clickable="true"
    android:onClick="backButtonOnClick"
    android:background="@drawable/back" />

<ImageButton
    android:id="@+id/home_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:layout_marginLeft="10dip"
     android:onClick="homeButtonOnClick"
    android:background="@drawable/home"
    android:clickable="true"  />
</LinearLayout> 
```

在我的活动中如下..

```
package com.example.android;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.LinearLayout;

public class HelloActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
      }

    public void backButtonOnClick(View v) {
        Log.d(TAG, "backButtonOnClick");
        onBackPressed();// handle your click
    }

    public void homeButtonOnClick(View v) {
        Log.d(TAG, "homeButtonOnClick");// handle your click
        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_HOME);
        startActivity(intent);
    }
   } 
```

这就是我所有的问题解决了。感谢 Stackoverflow 博客。参考你的博客，我尝试了很多东西，最后我得到了解决方案。

# service - ZF2 使用附加参数从服务管理器获取服务

> ID：14054797
> 
> 赞同：3
> 
> 时间：2012-12-27T12:34:36.597
> 
> 标签：service, zend-framework2

我有两个示例，我想使用服务管理器获取服务并让它通过配置解决依赖关系，除了一个可变的依赖项/参数（伪代码，因为我意识到'get'只允许一个参数）：

在控制器中，从数据库中获取实体：

```
$sm = $this->getServiceLocator();
$myObject = $sm->get('Model', $id); 
```

在 mapper 中（服务管理器应该得到相应的适配器）：

```
$sm = $this->getServiceLocator();
$tableGateway = $sm->get('TableGateway', $table); 
```

实现这一目标的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T23:05:12.817

您所描述的并不是 ServiceManager 设计的真正用例。就像它在罐头上所说的那样，它是一个管理*服务*的系统。用它来抓取单个实体并不合适。相反，使用 servicemanager 获取存储库，并使用该存储库获取实体：

```
$entity = $this->getServiceLocator()->get('FooRepository')->find($id); 
```

在您的第二个示例中，您似乎拥有某种创建 TableGateways 的工厂。一个明智的做法是：

```
$gateway = $this->getServiceLocator()->get('TableGatewayFactory')->get($table); 
```

或者，您可以为每个网关定义单独的服务：

```
$gateway = $this->getServiceLocator()->get('FooTableGateway'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:36:07.963

据我所知，这不是直接可能的，但我在某处读到初始化器适用于这种类型的场景。

initializer 可以是任何实现 InitializerInterface 的类，它有一个方法 initialize()，initialize() 方法是用对象（模型的实例）和服务管理器实例调用的，你需要为每个对象编写条件需要初始化。构建初始化器类后，您需要在服务管理器配置（module.config.php）或 getServiceConfig() 方法中包含条目

虽然没有完全涵盖您的问题，但可能有助于朝着正确的方向前进

**编辑**

实现这一目标的最佳做法是什么？

回答这个问题

如果您的对象没有依赖项，您可以将其实现为

```
$myObject = new Model();
$myObject->find($id); which would initialize the model 
```

如果您的模型具有依赖关系，并且如果您需要在开发阶段的后期将模型替换为其他对象，您可以将对象创建过程与服务定位器的服务工厂配置隔离开来，以实现这一点，在 getServicConfig() 方法中定义服务Module.php（您也可以定义自己的工厂代码并在配置中引用它，但在大多数用例中，简单的工厂定义就足够了）

```
public function getServiceConfig(){
    return array(
        'factories' => array(
            'Model' =>  function(ServiceLocatorInterface $sm) {
                return new Model($dependency1, $dependency2...);
            },
        ),
    );
} 
```

然后模型访问代码将是

```
$myObject = $this->serviceLocator()->get('Model');
$myObject->find($id); which would initialize the model 
```

最佳实践是定义一个接口，其中包括 find($id) 和所有其他需要调用的方法并在 Model 类中实现此接口，这样您就可以用实现该接口的任何其他对象替换您的工厂代码和您无需触摸 Model 对象的使用代码。

对于用例二，我假设您尝试重用或减少代码重复。如果你有一组有限的组合，你可以像下面这样实现

像这样定义服务工厂

```
public function getServiceConfig(){
    return array(
        'factories' => array(
            'Model/table1' =>  function(ServiceLocatorInterface $sm) {
                return new TableGateway('table1', $sm->get('db'));
            },
            'Model/table2' =>  function(ServiceLocatorInterface $sm) {
                return new TableGateway('table2', $sm->get('db'));
            },
        .
        .
        .
        .
        ),
    );
} 
```

访问 table1 作为

```
$tableGateway = $this->serviceLocator()->get('Model/table1'); 
```

注意：'Model/table1'是命名空间，避免覆盖配置，内部'/'将被服务管理器删除，名称将小写，注册和获取。

Zend\ServiceManager\ServiceManager 将它调用的内容存储`canonicalNames`在一个受保护的属性中。这是一个映射到规范名称的命名空间数组，这些命名空间是带有斜线并变为小写的命名空间。

# node.js - 为什么使用 Redis 而不是存储在普通变量中？

> ID：14054801
> 
> 赞同：7
> 
> 时间：2012-12-27T12:34:50.147
> 
> 标签：node.js, redis

与简单地将所有数据存储在应用程序内的变量中相比，使用 Redis 进行会话存储有什么优势？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T12:48:12.077

从我的头顶：

将会话存储在外部存储 (redis) 与进程内的优点

*   会话在应用服务器崩溃后幸存下来
*   会话在所有应用服务器之间共享（如果您有多个）。

缺点：

*   比进程内存储慢（因为网络延迟）
*   需要设置和管理存储

# macos - Mac OS 的 Build.xml

> ID：14054803
> 
> 赞同：2
> 
> 时间：2012-12-27T12:34:51.433
> 
> 标签：macos, ant, build.xml

我有一个 build.xml 来执行 junit Java 文件。下面的 build.xml 能否在 MAC OS 上正常工作，还是我必须在 XML 中进行任何更改（我的意思是对于 OSX，我们是否需要更改任何内容）？

```
<project name="JunitTest" default="test" basedir=".">
   <property name="testdir" location="test" />
   <property name="srcdir" location="src" />
   <property name="full-compile" value="true" />
   <path id="classpath.base"/>
   <path id="classpath.test">
      <pathelement location="/lib/junit-4.10.jar">
      <pathelement location="${testdir}" />
      <pathelement location="${srcdir}" />
      <path refid="classpath.base" />
   </path>
   <target name="clean" >
      <delete verbose="${full-compile}">
         <fileset dir="${testdir}" includes="**/*.class" />
      </delete>
   </target>
   <target name="compile" depends="clean">
      <javac srcdir="${srcdir}" destdir="${testdir}" >
         <classpath refid="classpath.test"/>
      </javac>
   </target>
   <target name="test" depends="compile">
      <junit>
         <classpath refid="classpath.test" />
         <formatter type="brief" usefile="false" />
         <test name="TestMessageUtil" />
      </junit>
   </target>
</project> 
```

# php - Zend Framework 2 - 用于 Doctrine 和 Annotation 表单的 Magic Getter 和 Setter

> ID：14054804
> 
> 赞同：2
> 
> 时间：2012-12-27T12:35:11.643
> 
> 标签：php, doctrine-orm, zend-framework2, zend-db, magic-methods

我读到了一个神奇的 getter 和 setter 函数，它取代了大量的标准 getter 和 setter。（[链接](http://milesj.me/blog/read/minimal-class-getset)）

我更改了 Miles 的功能，因为我正在使用`AnnotationForms`并且不希望在变量中使用下划线，例如`$_name`. 我更新了魔术功能，但是当我尝试调用时，`getName()`我得到：

> 致命错误：调用未定义的方法... Entity::getName()

这是我的代码：

```
<?php
namespace Entity;
use Doctrine\ORM\Mapping as ORM;
use Zend\Form\Annotation as Form;

/**
 * @ORM\Entity
 * @ORM\Table(name="masterdata_entity")
 * @Form\Name("entity")
 * @Form\Attributes({ "class": "form-horizontal" })
 * @Form\Hydrator("Zend\Stdlib\Hydrator\ObjectProperty")
*/
class Entity
{
  /**
   * @ORM\Id
   * @ORM\Column(type="integer")
   * @ORM\GeneratedValue(strategy="AUTO")
   * @Form\Exclude()
   */
  protected $id;
  /**
   * @ORM\Column(type="string")
   * @Form\Filter({"name":"StringTrim"})
   * @Form\Validator({"name":"StringLength", "options":{"min":1, "max":50}})
   * @Form\Attributes({"type":"text"})
   * @Form\Options({"label":"Name"})
   */
  protected $name;

public function __get($property) {
    return (isset($this->{$property}) ? $this->{$property} : null);
}

public function __set($property, $value) {
    if (isset($this->{$property})) {
        $this->{$property} = $value;
    }
}

public function __isset($property) {
    return isset($this->{$property});
}

} 
```

任何想法为什么会这样以及我如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:56:29.120

我想我的评论是对的。检查[DoctrineModule\Stdlib\Hydrator\DoctrineObject](https://github.com/doctrine/DoctrineModule/blob/master/src/DoctrineModule/Stdlib/Hydrator/DoctrineObject.php#L68)，你会发现它基本上使用了[\Zend\Stdlib\Hydrator\ClassMethods](https://github.com/zendframework/zf2/blob/master/library/Zend/Stdlib/Hydrator/ClassMethods.php)。看一下`extract()`-function 你可以看到所有 ClassMethods 都将在[第 60 行获取](https://github.com/zendframework/zf2/blob/master/library/Zend/Stdlib/Hydrator/ClassMethods.php#L60)

```
$methods = get_class_methods($object); 
```

看看[第 #63++ 行](https://github.com/zendframework/zf2/blob/master/library/Zend/Stdlib/Hydrator/ClassMethods.php#L63-L65)，你会发现只有默认的 getter`getX, hasX, isX`被视为有效：

```
if (!preg_match('/^(get|has|is)[A-Z]\w*/', $method)) {
    continue;
} 
```

这最终意味着，您将始终必须编写您的 setter 和 getter。即使文件大小可能会变大一点。它对于普通的 IDE 来说更好，而且它也可以提高性能，即使文件大小也是如此。

# wpf - 将对象 ID 替换为其在 WPF 数据网格 (MVVM) 中的相应名称

> ID：14054805
> 
> 赞同：0
> 
> 时间：2012-12-27T12:35:14.733
> 
> 标签：wpf, datagrid

考虑以下模型...

> > > **数据模型**

![数据模型](../Images/4a704de787f7cb0250d7902ad6c6e149.png)

我有一个 WCF 数据服务 (PMService)，它将数据模型公开给我的 JobsViewModel

> > > WCF 数据服务

```
namespace PM.DataService
{
    [ServiceContract]
    public class PMService
    {

[OperationContract]
    public ObservableCollection<Job> GetAllJobs()
    {
        using (var context = new logisticDBEntities())
        {
            var result = context.Jobs.ToList();
            result.ForEach(e => context.Detach(e));
            return new ObservableCollection<Job>(result);
        }
    }

    [OperationContract]
    public ObservableCollection<Status> GetStatuses()
    {
        using (var context = new logisticDBEntities())
        {
            var result = context.Statuses.ToList();
            result.ForEach(e => context.Detach(e));
            return new ObservableCollection<Status>(result);
        }
    }        
    }
} 
```

> > > **工作视图模型**

```
namespace PM.UI.ViewModel
{
    public class JobsViewModel:INotifyPropertyChanged
    {
    private PMServiceClient serviceClient = new PMServiceClient();

    public JobsViewModel()
    {
        this.RefreshAllJobs();
    }

    private void RefreshAllJobs()
    {
        this.serviceClient.GetAllJobsCompleted += (s, e) =>
        {
            this.AllJobs = e.Result;
        };
        this.serviceClient.GetAllJobsAsync();
    }

    private ObservableCollection<Job> allJobs;
    public ObservableCollection<Job> AllJobs
    {
        get{
            return this.allJobs;
        }
        set
        {
            this.allJobs = value;
            OnPropertyChanged("AllJobs");
        }
    }

    private ObservableCollection<Status> statuses;
    public ObservableCollection<Status> Statuses
    {
        get
        {
            return this.statuses;
        }

        set
        {
            this.statuses = value;
            this.OnPropertyChanged("Statuses");
        }
    }

    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;
    }
} 
```

我在 MainWindow.xaml 中包含了我的视图模型

> > > **主窗口.xaml**

```
<Window x:Class="PM.FullClient.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:PM.UI"
    xmlns:vms="clr-namespace:PM.UI.ViewModel"
    Title="MainWindow" Height="475" Width="575">
    <Window.DataContext>
        <vms:JobsViewModel/>
    </Window.DataContext> 
```

使用 DataGrid 我已成功显示所有作业。

```
<DataGrid AutoGenerateColumns="False" 
                          ItemsSource="{Binding Path=AllJobs}" Margin="6">
                    <DataGrid.Columns>
                        <DataGridTextColumn Binding="{Binding Path=jobNo}" Header="Job #" />
                        <DataGridTextColumn Binding="{Binding  Path=jobStatus}" Header="Status" />
                        <DataGridTextColumn Binding="{Binding Path=jobDate}" Header="Date" />
                        <DataGridTextColumn Binding="{Binding Path=Statuses}" Header="Status" />
                    </DataGrid.Columns>
                </DataGrid> 
```

> > > **JobsDataGrid_output**

![在此处输入图像描述](../Images/406ecd7634c903a75f85a0dd371e46cc.png)

在 JobsDataGrid 中，您可以看到我有状态的**ID**。

现在状态和工作有一对多的关系；Job 将持有 Status 的主键。

我想要做的是**显示jobStatus**（statusId）的相应statusCaption。

**按照 Ucodia 的建议进行编辑**

我在下面插入了代码

```
...
var result = context.Jobs.ToList();
    result.ForEach(e => context.LoadProperty(e, "Status"));
    result.ForEach(e => context.Detach(e));
... 
```

结果还是一样（状态栏还是空白

我在调试模式下运行应用程序并得到以下信息......希望它能帮助有人解释我做错了什么。

**>>>调试数据截图** ![调试信息](../Images/58ff0a81ff99da2615d06addb72e8e05.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:43:24.590

您将`Job`对象绑定到 DataGrid 并在列中绑定`jobStatus`成员，该成员是您的对象模型用来导航到该成员所属的具体`Status`对象的状态 ID。`statusCaption`

因此，您只需更改第二列绑定以使用对象的`Status`导航属性`Job`。

```
<DataGridTextColumn Binding="{Binding  Path=Status.statusCaption}" Header="Status" /> 
```

* * *

后来我意识到您正在将您的工作对象从加载时的上下文中分离出来。默认情况下，Job 模型上的 Status 等导航属性将被延迟加载，这意味着它们只会在请求时加载。但是对于要延迟加载的模型，需要附加它。因此，在加载 Job 对象时，您还需要在分离实体之前明确要求加载 Status 属性。

```
using (var context = new logisticDBEntities())
{
    var result = context.Jobs.ToList();
    result.ForEach(e => context.LoadProperty(e, "Status"));
    result.ForEach(e => context.Detach(e));
    return new ObservableCollection<Job>(result);
} 
```

# android - 保持垂直滑动在水平滑动滑块中滚动页面

> ID：14054810
> 
> 赞同：0
> 
> 时间：2012-12-27T12:35:20.227
> 
> 标签：android, web-applications, mobile, touch, zepto

在我的移动 web 应用程序中，我有一个`flickable imageslider`允许您`horizontally`使用`flickable.js`(http://blog.kojo.com.au/flickable-zepto-plugin/)浏览项目

像[这样的东西](http://blog.kojo.com.au/demos/flickable/demo2.html)

这个促销在移动设备上占据了相当大的空间。现在在 android 设备上，如果我尝试在图像滑块的空间上垂直滚动，页面将不会滚动。这对于用户体验来说是非常糟糕的。这在 iOS 设备上似乎不是问题。

我试图获取触摸事件并检查它是否是垂直滑动，但我不知道从那里去哪里。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:53:50.410

您可以将配置对象传递给 flickable 以告诉他不要阻止默认的触摸行为（页面滚动）。

例子：

$('#news ul').flickable({ section: 'li', preventDefault: false });

# visual-studio-2010 - 尽管更改了文件中的任何单词，Visual Studio 2010 -SVN 仍将整个文件显示为更改

> ID：14054822
> 
> 赞同：0
> 
> 时间：2012-12-27T12:35:58.023
> 
> 标签：visual-studio-2010, svn, tortoisesvn

我使用 VS2010 和 SVN 作为源代码控制。我面临一个问题，好像我正在进行任何更改并进行显示更改，它将整个文件显示为更改。例如，如果我更改文件中的任何世界，它会将所有文件显示为更改。我无法解决它。请让我知道是否有任何设置可以解决此问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:24:45.783

如果您将使用 GUI-differ，它可以显示比较文件中的行尾差异，您将看到修改的原因

您**确实必须**根据需要检查和更改`svn:eol-style` [属性](http://svnbook.red-bean.com/nightly/en/svn.ref.properties.html)：

*   它可以是一些特定的文件属性，在存储库级别定义
*   它可以是全局[自动属性](http://subversion.tigris.org/faq.html#auto-props)，在 Subversion 配置中为某些（或所有文本/*）扩展定义

`svn:eol-style = native`或者只是错过这个属性是最安全的方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:15:04.350

检查以下内容：

1.  您的开发环境和原始环境是否使用相同的制表符/间距设置？换句话说，你们都使用制表符还是空格来缩进？如果是这样，请在整个项目中标准化一个通用设置。
2.  您的环境是否会自动转换行尾，例如从 Windows CR/LF 转换为 Unix CR？默认情况下不应该，但设置可能已更改。
3.  文件是否使用不同的编码机制？例如，原始文件是否为 UTF8，但更改为 UTF16 或类似文件？再次对整个项目的通用设置进行标准化。

# java - 尝试从输入中删除空的新行（使用扫描仪）

> ID：14054826
> 
> 赞同：0
> 
> 时间：2012-12-27T12:36:33.123
> 
> 标签：java, input, newline, java.util.scanner

作为我作业的一部分，我需要制作一个需要用户输入的程序。现在我坚持使用控制台，但是我想避免由于换行符而导致的崩溃。

这是一个测试，它的行为类似于我正在尝试做的事情，甚至由于一个换行符而崩溃

```
public void testRead() {

    Scanner input = new Scanner(System.in);

    String s1 = "", s2 = "", s3 = "", s4 = "", s5 = "";

    while (s1 == "" || s1 =="\n") 
        if (input.hasNext()) {
            s1 = input.nextLine();
        }
    while (s2 == "" || s2 =="\n") 
        if (input.hasNext()) {
            s2 = input.nextLine();
        }
    while (s3 == "" || s3 == "\n") 
        if (input.hasNext()) {
            s3 = input.nextLine();
        }
    while (s4 == "" || s4 == "\n") 
        if (input.hasNext()) {
            s4 = input.nextLine();
        }
    while (s5 == "" || s5 == "\n") 
        if (input.hasNext()) {
            s5 = input.nextLine();
        }
        // Here is why it might crash
    if (input.hasNextInt()) // even though it should not pass this if
            // However the if is not the issue. 
            // This input may even be in another function
           int crash = input.nextLine();

    System.out.println("s1: " + s1);
    System.out.println("s2: " + s2);
    System.out.println("s3: " + s3);
    System.out.println("s4: " + s4);
    System.out.println("s5: " + s5);
} 
```

}

我希望该`while`声明能解决它，但事实并非如此。

**我可以解决崩溃，但这并不能解决问题，**因为我仍然有空字符串，什么都没有。

**例子**

```
This is the first string
This is the second string
                                          <- pressed enter again, by mistake or not
This is the third string
This is the fourth string 
```

**输出**

```
s1: This is the first string
s2: This is the second string
s3:
s4: This is the third string
s5: This is the fourth string 
```

// 现在崩溃。同样，可以避免崩溃，但我仍然有一个问题，字符串 3 没有被读取或包含......我不想要的东西。

**有没有解决这个问题的简单方法？如果没有简单的方法，我宁愿忽略它并快速完成我的作业，但我仍然想知道长答案以供将来参考。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:48:07.447

你不能`==`用于字符串内容相等，试试这个例如：

```
 while (s1.equals("") || s1.equals("\n")) 
        if (input.hasNext()) {
            s1 = input.nextLine();
        }
    while (s2.equals("") || s2.equals("\n")) 
        if (input.hasNext()) {
            s2 = input.nextLine();
        }
    while (s3.equals("") || s3.equals("\n")) 
        if (input.hasNext()) {
            s3 = input.nextLine();
        }
    while (s4.equals("") || s4.equals("\n")) 
        if (input.hasNext()) {
            s4 = input.nextLine();
        }
    while (s5.equals("") || s5.equals("\n")) 
        if (input.hasNext()) {
            s5 = input.nextLine();
        } 
```

# java - 发送和接收二维数组 java

> ID：14054828
> 
> 赞同：2
> 
> 时间：2012-12-27T12:36:34.483
> 
> 标签：java, networking

通过提出这个问题，我想实现的是学习如何向另一台计算机发送和接收*二维数组。*

上下文是*2-D 数组*是我的游戏的地图，当我开始游戏时，我希望选择成为服务器或客户端（如果是客户端，请指定服务器*IP*），然后服务器将发送客户端（其中一个是另一个人，具有不同的*IP*）连接时的 2D 阵列。

我希望这一切都有意义，我之前已经给出了这个但我无法让它工作，我尝试过*Datagram Packets*，但我无法弄清楚如何分段发送所有二维数组，然后将其转回成二维数组。

我需要使用什么类型的 Stream 或一般网络对象？它能够发送二维数组吗？你能举个例子来帮助我设置它吗？

还要注意的是，我之后会发送玩家坐标和地图更改，所以如果 Networking 对象也可以使用它，那将是一个加号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:51:49.500

如果对象类型是 instanceof Serializable，这将适用于任何原始类型数组和对象数组

服务器

```
 ServerSocket ss = new ServerSocket(port);
    Socket s = ss.accept();
    ObjectInputStream is = new ObjectInputStream(s.getInputStream());
    byte[][] array = (byte[][])is.readObject(); 
```

客户

```
 byte[][] array = new byte[10][10];
    Socket s = new Socket("host", port);
    ObjectOutputStream os = new ObjectOutputStream(s.getOutputStream());
    os.writeObject(array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:57:36.937

您应该从中创建一个对象。以后处理起来更方便。
之后序列化它，然后将其拆分为更小的字节 []（如果它大于 64 kb）。您为每个数据包添加一些字节，我更喜欢
byte[0] = 被拆分？
byte[1] + byte[2] = sendNumber （仅用于控制，每个发送对象后它都会增加）
byte[3] = 你的对象有多少部分
byte[4] = 它是
什么你还需要什么。
之后，您可以轻松地将零件组合在一起。
我从未使用过它，但我还发现了一个名为 kryonet 的库（在谷歌搜索时）。
看看......正确谷歌它。

# solr - 有没有办法将 DataImportHandler 与 C# 集成？

> ID：14054830
> 
> 赞同：1
> 
> 时间：2012-12-27T12:36:45.647
> 
> 标签：solr, solrnet, dataimporthandler

只是想知道有没有办法将 DataImportHandler 与 C# 应用程序集成。

目前我的要求是从不同的表中获取增量数据并将其索引到 solr，因为我创建了一个存储过程，它将返回一些增量行，我正在使用 solrnet 将它们索引到 solr。但只是想知道有什么方法可以实现它使用带有 c# 的 DataImportHandler。

以下哪种方法最适合将数据索引到**solr**

1.如果可能的话，使用 DataImportHandler 和 C#。

2.使用 SolrNet 和 Ado.net

提前致谢

# cocoa-touch - 如何在 UITextview 中打印出选定的文本？

> ID：14054831
> 
> 赞同：0
> 
> 时间：2012-12-27T12:36:45.013
> 
> 标签：cocoa-touch, uikit, uitextview

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    NSLog (@"This is selected text in UITextView %@", selectedText);
} 
```

如何打印出选定的文本`UITextView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:41:14.477

```
NSString *selectedText = [textView.text substringWithRange:[textView selectedRange]];
NSLog (@"This is selected text in UITextView %@", selectedText); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:29:07.820

为 UITextView 创建一个出口，比如说`yourTextViewName`。

（确保它已连接，以防万一您不使用拖动功能。）

然后在任何方法中使用这个语句。

```
_yourTextViewName.text = [_yourTextViewName.text substringWithRange:[_yourTextViewName selectedRange]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-22T17:29:35.667

我知道这已得到解答，但我想更清楚地说明。我已经创建了几个动态 UITextViews，并希望能够简单地检测用户点击了哪一个。

**将此添加到 UITextView：**

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapRecognized:)];
singleTap.numberOfTapsRequired = 1;
[textView addGestureRecognizer:singleTap]; 
```

**我使用的不同：**

```
UITextView *selectedTextView = (UITextView *)gestureRecognizer.view; 
```

**将此添加到您的 ViewController 以识别用户点击：**

```
- (void)tapRecognized:(UIGestureRecognizer *)gestureRecognizer 
{
    UITextView *selectedTextView = (UITextView *)gestureRecognizer.view;
    NSLog (@"UITextView test:%@", selectedTextView.text);
} 
```

# java - 通用工厂类实例化

> ID：14054836
> 
> 赞同：0
> 
> 时间：2012-12-27T12:37:14.183
> 
> 标签：java, generics, factory-pattern

如果有这样的 TCP/UDP 通信工厂

```
public enum IoFactory {
  // Singleton
  INSTANCE;

  public <T> Io<T> create(T type, TransportProtocol protocol) {
    ...
    return ...;
  }
} 
```

创建`Io`接口：

```
public interface Io<T> {
  public void send(T msg);
  public T receive();
} 
```

但是，当我创建 with 的实例`Io`时

```
IoFactory factory = IoFactory.INSTANCE;     
Io<TestMessage> u = factory.create(TestMessage.class, TransportProtocol.UDP); 
```

我收到一个编译错误，说正确的实例化应该是

```
Io<Class<TestMessage>> u = factory.create(TestMessage.class, TransportProtocol.UDP); 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:45:10.177

`create()`接受 a `T`, 作为参数并`Io<T>`作为返回值返回。

但是，在您的代码中，您`TestMessage.class`作为参数发送。
`TestMessage.class`是 type `Class<TestMessage>`，而不是 type `TestMessage`（它是类对象，不是 type 对象`TestMessage`）。

因此，编译器“理解”即`T`，`Class<TestMessage>`并且期望`Io<Class<TestMessage>>`应该是 from 的返回类型`create()`，但是您随后将其重新分配给`u`- 这是一个类型的变量`Io<TestMessage>`- 错误的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:45:44.653

我认为您正在寻找的签名是：

```
public <T> Io<T> create(Class<T> type, TransportProtocol protocol) { 
```

# iphone - 如何在 iPhone 的 PDF 中添加文本字段？

> ID：14054841
> 
> 赞同：0
> 
> 时间：2012-12-27T12:37:54.107
> 
> 标签：iphone, ios, pdf

是否可以在 PDf 文件中添加文本字段和标签并将 id 添加到这些字段，以便我们以后可以通过它们对应的 id 访问这些字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:00:47.110

是的，像这样：

```
 CGContextBeginPage(yourPDFContextRef,nil);

 //Draw view into PDF
 UIView *aPageNote=[[UIView alloc]initWithFrame:CGRectMake(0,0, 612, 892)]; //provide height and width of pdf page
 aPageNote.backgroundColor=[UIColor whiteColor];

 //turn PDF upsidedown
 CGAffineTransform aCgAffTrans = CGAffineTransformIdentity;
 aCgAffTrans = CGAffineTransformMakeTranslation(0,892);
 aCgAffTrans = CGAffineTransformScale(aCgAffTrans, 1.0, -1.0);
 CGContextConcatCTM(yourPDFContextRef, aCgAffTrans);

 //add UI Control here to UIVIEW
 UIImageView *aImgViewSign = [[UIImageView alloc] initWithFrame:frame];
            aImgViewSign.image = [imageArray objectAtIndex:index];
 [aPageNote addSubview:aImgViewSign];    
 [aPageNote.layer renderInContext:yourPDFContextRef];
 [aPageNote release]; 
 CGContextEndPage (yourPDFContextRef); 
```

# android - 将数据库文件复制到 sdcard

> ID：14054850
> 
> 赞同：0
> 
> 时间：2012-12-27T12:38:26.137
> 
> 标签：android, android-sdcard

我从教程中找到了这段代码，但它不起作用。

说目录不能创建

```
 try {

myInput = new FileInputStream("//data//net.learn2develop.Databases//databases//MyDB");//this is
// the path for all apps
//insert your package instead packagename,ex:com.mybusiness.myapp

// Set the output folder on the SDcard
// File directory = new File(Environment.getExternalStorageDirectory().getPath());

                File directory = new File("/sdcard/some_folder"); 

                // Create the folder if it doesn't exist:
                if (!directory.exists()) 
                {
                    directory.mkdirs();
                } 
                // Set the output file stream up:

               // OutputStream myOutput = new FileOutputStream("/sdcard/");
                OutputStream myOutput = new FileOutputStream(directory.getPath()+
                         "/database_name.backup");

                // Transfer bytes from the input file to the output file
                byte[] buffer = new byte[1024];
                int length;
                while ((length = myInput.read(buffer))>0)
                {
                    myOutput.write(buffer, 0, length);
                }
                // Close and clear the streams

                myOutput.flush();

                myOutput.close();

                myInput.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:45:26.140

这是错误的

```
"//data//net.learn2develop.Databases//databases//MyDB" 
```

它应该是`"/data/data/net.learn2develop.Databases/databases/MyDB"`

此外，永远不要`"sdcard"`在你的路径中对字符串进行硬编码

你应该得到如下输出文件：

```
File directory = new File(Environment.getExternalStorageDirectory(), "directory_name");
directory.makeDirs(); 
```

还要检查您在清单文件中的权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:42:31.030

可能是，您需要向 Manifest 添加权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:43:56.010

尝试这个 ：）

```
String path=Environment.getExternalStorageDirectory().getAbsolutePath();
File directory = new File(path+"your directory"); 
```

并检查清单中的权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:44:11.050

我认为您的数据库路径可能是错误的，在我的情况下使用以下方式：

```
 public static String PRIVATE_DATA = "/data/data/<your package name>/databases/<your db name>"; 
```

还在您的 androidManifest.xml 中添加对 sd 卡写入外部存储设备的权限

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T12:47:03.020

下面的代码对我有用:):)..希望它也能帮助你。

```
public class FileDownloader implements IJuicerDownloader {
public static final String tag = "FileDownloader";
public void download(String downloadFileWebPath, File savedFilename ) throws Exception 
{

    try
    {
        URL myFileUrl =null; 
        myFileUrl= new URL(downloadFileWebPath);
        Log.d(tag,"downloadFileWebPath " + downloadFileWebPath );
        HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
        conn.setDoInput(true);
        conn.connect();
        InputStream downloadFile = conn.getInputStream();
        int bytes = downloadFile.available();
        FileOutputStream fos = new FileOutputStream(savedFilename);          
        BufferedInputStream bis = new BufferedInputStream(downloadFile);
        ByteArrayBuffer baf = new ByteArrayBuffer(5000);
         int current = 0;
         while ((current = bis.read()) != -1) {
             baf.append((byte) current);
          }

          fos.write(baf.toByteArray());
          fos.flush();
          fos.close();

    }

    catch (MalformedURLException e) {
        // TODO Auto-generated catch block

        e.printStackTrace();
       //  throw your own exception
        }
    catch (FileNotFoundException e) {

        e.printStackTrace();
           //  throw your own exception
    }catch ( UnknownServiceException  e) {

        e.printStackTrace();

           //  throw your own exception
        } catch (IOException e) {

        e.printStackTrace();
           //  throw your own exception
    }

} 
```

-普雷亚

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-16T05:24:57.027

这里有很多有用的答案。我只想举另一个例子来说明如何做到这一点。

```
private final static String EXTERNAL_DIRECTORY = "/Android/data/{Name-Space}/databases/";
private final static String INTERNAL_DIRECTORY = "/data/data/com.fitocracy.app/databases/";

public static void copyDatabaseToSdcard() {
        String state = Environment.getExternalStorageState();

    if (Environment.MEDIA_MOUNTED.equals(state)) {  
        BufferedInputStream is = null;
        BufferedOutputStream os = null;
        try {
            is = getFIS();
            os = getFOS();

            int current = 0;
            while ((current = is.read()) != -1) {
                os.write(current);
            }

            os.flush();
            os.close();
            is.close();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
}

private static BufferedInputStream getFIS() throws FileNotFoundException {
    File db = new File(INTERNAL_DIRECTORY + DATABASE_NAME);
    return new BufferedInputStream(new FileInputStream(db));
}

private static BufferedOutputStream getFOS() throws FileNotFoundException {
    String path = Environment.getExternalStorageDirectory().getAbsolutePath();
    File dir = new File(path + EXTERNAL_DIRECTORY);
    if (!dir.exists()) {
        dir.mkdirs();
    }
    File db = new File(dir, DATABASE_NAME);
    return new BufferedOutputStream(new FileOutputStream(db));
} 
```

# objective-c - ui 滚动视图为模态呈现动画声明选择器

> ID：14054856
> 
> 赞同：0
> 
> 时间：2012-12-27T12:38:51.863
> 
> 标签：objective-c, ios, cocoa-touch

当呈现模态视图以允许选择地址簿时。我收到错误

`No visible @interface uiScrollView declares selector for modal presented animated`

这里

`[self presentModalViewController:picker animated:YES];`

我想我需要使用`performSelector:@selector`以下帖子中的研究

[Objective-C 调用编译器不相信存在的选择器（即使我们知道它存在）](https://stackoverflow.com/questions/9954886/objective-c-calling-a-selector-that-the-compiler-does-not-believe-exists-even-t)

但是我不确定如何在我的代码中实现

```
 - (id)initWithCertificate:(Certificate *)certificate
 {

if ((self = [super initWithCertificate:certificate])) {
    [[NSBundle mainBundle] loadNibNamed:@"MinorWorksPart1" owner:self options:nil];
    self.view.contentSize = CGSizeMake(self.contentView.frame.size.width, self.contentView.frame.size.height);

    self.dateMinorWorksCompletedField.textValue = ([self attributeWithName:@"dateMinorWorksCompleted"]).value;

    DebugLog(@"dateMinorWorksCompleted attribute value is %@", ([self attributeWithName:@"dateMinorWorksCompleted"]).value);
    DebugLog(@"Certificate reference is %@", self.certificate.reference);
    self.certificateReferenceField.text = (self.certificate.reference != nil ? self.certificate.reference : @"");
    self.clientField.text = ([self attributeWithName:@"client"]).value;
    self.detailsOfDeparturesField.text = ([self attributeWithName:@"detailsOfDepartures"]).value;
    self.addressOfTheMinorWorks.text = ([self attributeWithName:@"addressOfTheMinorWorks"]).value;
    self.descriptionOfMinorWorksField.text = ([self attributeWithName:@"descriptionOfMinorWorks"]).value;
}
return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:40:58.783

这对你没有任何好处，因为正如错误所说，滚动视图没有实现该方法。它会以同样的方式失败。而不是`self`（我怀疑你是 UIScrollView），使用对`UIViewController`.

作为旁注，根据[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentViewController%3aanimated%3acompletion%3a)，您现在应该使用：

`- (void)presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion`

如果您没有完成块，您可以通过这种方式调用它：

`[myViewController presentViewController:picker animated:YES completion:NULL];`

# php - php数组操作追加元素

> ID：14054857
> 
> 赞同：1
> 
> 时间：2012-12-27T12:38:57.167
> 
> 标签：php, arrays

我有一个小问题我正在创建多表并且我卡住了，我想创建这样的东西：

`1 table: [4,5,6]`
`2 table: [7,2,7,8]`
`3 table: [1,1,1]`
`4 table: [6,0,9]`

但每个表可以有不同的大小，
预期结果：

```
[[4,7,1,6], [5,2,1,0], [6,7,1,9], [8]] 
```

我试图让它使用`for`循环但到目前为止没有成功？

数组应该这样构建：
第一个元素是所有 t1[0] + t2[0] + t3[0]
的集合 ...第二个元素是所有 t1[1] + t2[1] + t3[1] 的集合……
等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:46:12.083

```
$result = array();
foreach ([[4,5,6], [7,2,7,8], [1,1,1], [6,0,9]] as $key => $value) {
    foreach($value as $key2 => $value2) {
        $result[$key2][$key] = $value2;
    }
}

var_dump($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:47:18.413

```
$result = array();
foreach (array(array(4,5,6), array(7,2,7,8), array(1,1,1), array(6,0,9)) as $k1 => $v1) {
    foreach($v1 as $k2 => $v2){
        if(!isset($result[$k2])){
            $result[$k2] = array();
        }
        $result[$k2][] = $v2;
    }
}

//output: [[4,7,1,6],[5,2,1,0],[6,7,1,9],[8]] 
```

这是一个演示：[http ://codepad.org/lxJt4zOp](http://codepad.org/lxJt4zOp)

# spring - 春季战争上下文加载器未初始化

> ID：14054860
> 
> 赞同：1
> 
> 时间：2012-12-27T12:39:08.820
> 
> 标签：spring, tomcat, maven, spring-mvc

当我运行时，我正在使用 maven antrun 插件将我的战争文件 scp 到远程 tomcat 服务器`mvn install`

```
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-antrun-plugin</artifactId>
<version>1.7</version>
<executions>
    <execution>
        <id>scp</id>
        <phase>install</phase>
        <configuration>
            <tasks>
                <scp file="target/somewar.war" todir="bar@foo.com:/usr/share/apache-tomcat-7.0.27/webapps"/>

            </tasks>
        </configuration>
        <goals>
            <goal>run</goal>
        </goals>
    </execution>
</executions>
<dependencies>
    <dependency>
        <groupId>ant</groupId>
        <artifactId>ant-jsch</artifactId>
        <version>1.6.5</version>
    </dependency>
    <dependency>
        <groupId>com.jcraft</groupId>
        <artifactId>jsch</artifactId>
        <version>0.1.42</version>
    </dependency>
</dependencies> 
```

工作正常，我设法复制了战争文件。但是启动startup.sh，webapp没有运行，似乎没有加载ContextListener或其他东西，似乎没有映射url。

```
INFO: Deploying web application archive /home/gohcy/apache-tomcat-7.0.34/webapps/ppdf-3party-trusted-1.0-SNAPSHOT.war
log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Dec 27, 2012 8:30:34 PM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["http-bio-80"] 
```

在本地 tomcat 的目标文件夹中使用相同的 war 文件时，我没有遇到这样的问题。有谁知道可能是什么问题？

更新：我很抱歉，但运行 md5 校验和似乎会产生不同的结果。我的 ant scp 任务配置正确吗？

```
webapps noob$ md5 somewar.war 
MD5 (somewar.war) = e9a7b263f30188df9a76c82ef9459912

[noob@PVM0 webapps]$ md5sum somewar.war 
37142c9902ba9b2d6ab4138c216520e8  somewar.war 
```

更新：重试，校验和正确，但结果相同。

我的 web.xml，以防我在这里做错了什么。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>redirect.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

# c++ - 注入函数值到全局变量失败

> ID：14054863
> 
> 赞同：1
> 
> 时间：2012-12-27T12:39:21.643
> 
> 标签：c++, dll

好吧，我已经在 c# 中注入了 c++ dll 并传递了 int 值，但是当 Inject 调用 y 的值在 x 中分配时，然后在函数结束时它返回到它的值 0；“anotherFunction”由 Inject 的事件处理程序调用。我真的不明白我在那里缺少什么，希望值得问一下。

```
int x =0;

extern "C" __declspec(dllexport) void Inject(int y)
{
    x = y;
}

extern "C" __declspec(dllexport) void OnInject()
{        
   anotherFunction();
}

void anotherFunction()
{
  printf("%i",x);
}
// value is 0 
```

# sql - SQL Server：更新树中的列

> ID：14054868
> 
> 赞同：5
> 
> 时间：2012-12-27T12:39:44.343
> 
> 标签：sql, sql-server, database-design, tree, sql-update

我想更新树中的一列。我想出了以下声明：

```
WITH q AS (
    SELECT t1.*
    FROM buss_item t1
    WHERE t1.id_item = 218

    UNION ALL

    SELECT t2.*
    FROM buss_item t2
    JOIN q ON t2.parent_id = q.id_item
)
UPDATE q
SET default_item = 0 
```

但我收到一个错误：

> *派生表“q”不可更新，因为派生表的列是派生的或不变的。*

关于如何修复此更新的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T12:50:25.587

```
WITH q AS (
    SELECT t1.*
    FROM buss_item t1
    WHERE t1.id_item = 218

    UNION ALL

    SELECT t2.*
    FROM buss_item t2
    JOIN q ON t2.parent_id = q.id_item
)
UPDATE buss_item  set default_item = 0 from q
where q.item_ID=buss_item.ItemID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:52:04.487

您无法更新 CTE，您可能需要`buss_item`根据 CTE 的结果更新表，试试这个：

```
WITH q AS (
    SELECT t1.*
    FROM buss_item t1
    WHERE t1.id_item = 218

    UNION ALL

    SELECT t2.*
    FROM buss_item t2
    JOIN q ON t2.parent_id = q.id_item
)

UPDATE  bi
SET     default_item = 0
FROM    buss_item bi
JOIN    q ON q.id_item = bi.id_item 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-06T11:58:01.073

您可以更新 CTE，这是 T-SQL 非常有用的高级功能。事实上，您当然不是在更新 CTE，而是在其定义中包含的表格，而您是一步完成的，当我发现这一点时我很惊讶 :) ！！经典派生表也可以这样做。您甚至可以进行多个嵌套，并且仍然可以更新定义的第一级中包含的真实表。您还可以在嵌套级别之间使用其他逻辑，例如使用排名函数。

这里报错是因为UNION语句，这种操作是不允许的，没有它更新会成功。

# iphone - 从 xcode 调用 FFMPEG 命令

> ID：14054878
> 
> 赞同：2
> 
> 时间：2012-12-27T12:40:26.417
> 
> 标签：iphone, objective-c, xcode, ffmpeg

我有一些 FFMPEG 的库文件：

libavcodec.a
libavfilter.a
libavutil.a
libswscale.a
libavdevice.a
libavformat.a
libswresample.a

如果我想在 iphone 应用程序中将 amr 文件的音频转换为 mp3，谁能告诉我如何使用这些库。

amr 文件放在资源包中

我不明白如何调用库的方法进行音频格式转换。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:37:23.610

如果您只进行音频转换，您可能需要查看一个名为 core-amr 的库。

# python - 将列表写入csv文件而不在python中循环

> ID：14054882
> 
> 赞同：4
> 
> 时间：2012-12-27T12:40:37.867
> 
> 标签：python, python-2.7

我有一个需要写入 csv 文件的列表列表。

```
mylist = [['Siddharth','Bangalore','blah@gmail.com'],  
        ['Rahul','Bangalore','blah2@gmail.com'],.....and so on] 
```

这个列表通常有 20,000 到 40,000 长。
所以，现在，将它们写入 csv 文件的唯一方法是遍历列表并写入：

```
fileObj = open("/home/siddharth/sample.csv", "wb")
csv_file = csv.writer(fileObj)  
for item in mylist:  
    csv_file.writerow(item) 
```

所以，我只是想知道，有没有办法将这样的列表列表写入 csv，而无需遍历列表中的每个项目，例如。喜欢使用`StringIO`等。
或者，任何人都可以提供一些提示/提示，以便我可以创建自己的实现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T12:42:53.233

有一种[`writerows`](http://docs.python.org/2/library/csv.html#csv.csvwriter.writerows)方法可以将所有行添加到可迭代对象中：

```
csv_file.writerows(the_list) 
```

无论你做什么，总会有一个循环在某处（无论是在你的代码中还是在 Python 库实现中）。没有办法绕过它，因为您需要查看列表中的每个项目，以便将它们写入文件。

如果您担心将每一行分别写入文件的性能：Python 默认使用缓冲 I/O，因此即使您在循环中逐个写入列表项，它们也不一定会写成这样到文件中。每当缓冲区填满时，它们将被分块写入，这将具有更好的性能。如果需要，您可以使用 的`buffering`参数显式控制缓冲区大小[`open`](http://docs.python.org/2/library/functions.html#open)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T12:42:59.877

简单的：

```
csv_file.writerows(mylist) 
```

（注意`s`中的[`writerows()`](http://docs.python.org/2/library/csv.html#csv.csvwriter.writerows)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:06:44.670

这些都是字符串元组？只有40,000个？你试过这个吗？

```
with open('outputfile.csv','w') as csv_file:
    csv_file.write('\n'.join(map(','.join, my_list)+'\n')) 
```

您*仍在*迭代列表，但使用`map`Python 的 C 库中实现的 .

# listview - 我可以用背景图像绘制 RichList 的每一行吗？（黑莓）

> ID：14054887
> 
> 赞同：2
> 
> 时间：2012-12-27T12:41:00.173
> 
> 标签：listview, blackberry

我想要一个放置在 RichList 行右侧的箭头图像。但由于 RichList 只允许图像位于其列表的左侧。所以我想为什么不画一排富豪榜，就像右边的箭头一样。

那么我们可以在使用 RichList 时用任何位图图像绘制每一行吗？

# google-app-engine - 如何通过 ID 查询实体

> ID：14054889
> 
> 赞同：1
> 
> 时间：2012-12-27T12:41:04.823
> 
> 标签：google-app-engine, app-engine-ndb

我试图通过他们的 ID 查询实体，但不包括他们的父 ID。

这里有一些代码可以帮助解释：

```
class Book(ndb.Model):
    ...

class User(ndb.Model):
    ...
class Review(ndb.Model):
    ... 
```

当我创建`Review`对象时，我将它们的父级设置为用户，并且它们的 ID 与书籍 ID 相同：

```
review = Review(key=ndb.Key('Review', book.key.id(), parent=user.key)) 
```

现在我想通过查询来知道每本书有多少评论。由于父 ID 不同，因此无法通过完整键进行查询。

我目前使用的解决方法是将图书 ID 存储在`ndb.KeyProperty`or`ndb.IntegerProperty`中，但这实际上是冗余信息，因为评论的 ID 已经相同。

有没有办法只通过键 ID 进行查询，不包括父 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:32:01.447

~~你会使用这样的东西来查询 ID: `review = Review.get_by_id(book.key.id())`。~~

您设置 ID 的方法仅适用于书籍和评论之间存在 1 对 1 关系的情况，因为键是唯一的。上述操作只会返回一个实体。

我建议将最常用的查询设置为审查的祖先。我的猜测是，除非您的用户是著名的评论家，否则他的书评所属的书在这里是最相关的。

如果您将 Review 的父级设置为 Book，则可以使用[Ancestor 查询](https://developers.google.com/appengine/docs/python/ndb/queries#ancestor)来获取所有具有保证一致性的评论。然后用户可以是评论的属性，您可以简单地按该属性进行过滤。我建议使用 KeyProperty 作为参考。

如果您希望保证用户查询的一致性，请为每个用户保留一个评论书籍列表（重复 KeyProperty），然后针对评论运行祖先查询，由该用户过滤。

更新：@JimmyKane 是对的 - get_by_id 根本不起作用，因为它显然需要指定父级，在你的情况下这似乎不太实用。

证明 get_by_id 不起作用的代码：

```
from flask import Flask

from google.appengine.ext import ndb

app = Flask(__name__)

class User(ndb.Model):
    name = ndb.StringProperty()

class Book(ndb.Model):
    name = ndb.StringProperty()

class Review(ndb.Model):
    name = ndb.StringProperty()

@app.route('/')
def hello_main():
    user = User()
    user.name = 'Test User1'
    user.put()

    book = Book()
    book.name = 'Test Book1'
    book.put()

    review = Review(id=book.key.id(), parent=user.key)
    review.name = 'Test Review1'
    review.put()

    return 'Review saved!'

@app.route('/reviews/')
def reviews():
    book = Book.query(Book.name == 'Test Book1').get()
    user = User.query(User.name == 'Test User1').get()

    if book:
        review = Review.get_by_id(book.key.id(), parent=user.key)
        if review:
            return review.name
        else:
            return 'no review'
    else:
        return 'no books'

if __name__ == "__main__":
    app.run() 
```

这是我推荐的方法的示例代码：

```
from flask import Flask

from google.appengine.ext import ndb

class User(ndb.Model):
    name = ndb.StringProperty()
    reviews = ndb.KeyProperty(repeated=True)

class Book(ndb.Model):
    name = ndb.StringProperty()

class Review(ndb.Model):
    name = ndb.StringProperty()

app = Flask(__name__)

@app.route('/')
def hello_main():
    user = User()
    user.name = 'Test User1'
    user.put()

    book = Book()
    book.name = 'Test Book1'
    book.put()

    review = Review(parent=book.key)
    review.name = 'Test Review1'
    review.put()

    user.reviews.append(review.key)
    user.put()

    return 'Review saved!'

@app.route('/add_review/')
def add_review():
    book = Book.query(Book.name == 'Test Book1').get()
    user = User.query(User.name == 'Test User1').get()

    if book:
        review = Review(parent=book.key)
        review.name = 'Test Review'
        review.put()

        user.reviews.append(review.key)
        user.put()

        return 'review added'
    else:
        return 'no books'

@app.route('/reviews/')
def reviews():
    book = Book.query(Book.name == 'Test Book1').get()
    user = User.query(User.name == 'Test User1').get()

    if book:
        reviews = Review.query(ancestor=book.key)
        for review in reviews:
            print(review.name)
            print('<br/>')
        return ''
    else:
        return 'no books'

@app.route('/reviews_by_user/')
def reviews_by_user():
    user = User.query(User.name == 'Test User1').get()

    for review_key in user.reviews:
        review = review_key.get()
        print(review.name)
        print('<br/>')
    return ''

if __name__ == "__main__":
    app.run() 
```

# php - 只替换一次子串，一个地方

> ID：14054891
> 
> 赞同：1
> 
> 时间：2012-12-27T12:41:09.723
> 
> 标签：php, replace

例子：

```
string1="ah ah I love you ah ah ah ah"; 
```

更换后：

```
string1="ah ah I love you ah thank you ah ah"; 
```

上面的意思是第四位的“啊”应该换成“谢谢”

我不知道如何用 PHP 编写上面的任务。你能帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T12:44:10.410

```
$string = "ah ah I love you ah ah ah ah";
echo preg_replace_callback('/ah/', function($m) {
    static $count = 0;
    if(++$count == 4) return 'thank you';
    else return $m[0];
}, $string); 
```

工作原理：每次`ah`匹配时调用回调函数。静态`$count`变量增加，当它是第四次匹配时，它返回替换字符串，否则返回最初匹配的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:13:56.043

非正则表达式方法。

```
$string = "ah ah I love you ah ah ah ah";

// search for the 4th 'ah'
$pos = 0;
for($i = 0; $i < 4; $i++){
    $pos = strpos($string, 'ah', $pos);
    $pos++;
}
// substring before the found, the replacement, and after the found
$result = substr($string, 0, $pos-1).'thank you'.substr($string, $pos+1); 
```

# ruby - Ruby——确保局部变量不与方法名冲突

> ID：14054893
> 
> 赞同：1
> 
> 时间：2012-12-27T12:41:16.270
> 
> 标签：ruby, mixins

我正在尝试通过应用单一责任原则来瘦身。我将许多通用代码挑选到 mixin 中，然后将它们包含在多个类中。但是，我遇到了一个奇怪的问题，即局部变量与包含 mixin 的类的方法名称（或 attr_accessors）发生冲突。例如：

```
module MyAwesomeMixin
  def update_total
    my_total = self.pricing_items.reduce(0) {|sum, x| sum + x} # this borks if the "host class" has a method called my_total=
    total = my_total
  end
end 
```

`my_total=`如果“宿主类”有一个名为“如何确保`my_total`变量完全在`update_total`方法范围内并且与它周围的环境完全无关”的方法，上面的代码片段会产生完全意想不到的后果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T13:46:33.097

每当局部变量和方法解释之间存在歧义时，它总是被解释为局部变量。

但是，局部变量在方法定义之外将不可用，因此您无需担心“宿主类”中的名称崩溃。您只需要在`update_total`. 而且由于您在定义中使用了固定数量的局部变量，因此您应该能够知道要注意哪些局部变量。

**1.局部变量和setter方法的歧义**

如果你有这个：

```
variable_name = 
```

那么它将始终被解释为局部变量赋值。如果你想引用 method `variable_name=`，那么你需要通过使用明显的接收器和/或一对括号来消除它与局部变量的歧义，如下所示：

```
self.variable_name = foo
variable_name=(foo)
self.variable_name=(foo) 
```

**2.局部变量和getter方法的歧义**

如果你有：

```
variable_name 
```

并且作用域中没有这样的局部变量，那么它将被解释为方法调用。如果作用域中有这样的局部变量，那么它将被解释为局部变量。如果您想在这种情况下调用该方法，再次，您需要使用显式接收器和/或一对括号来消除它与局部变量的歧义，如下所示：

```
self.variable_name
variable_name()
self.variable_name() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T13:04:20.287

有些东西你没有给我们看。在这种情况下，唯一的“意外后果”是`my_total=`没有调用该方法，因为`my_total`创建了本地 var。

```
module MyAwesomeMixin
  def update_total
    my_total = 10 # !> assigned but unused variable - my_total
  end
end

class Foo
  include MyAwesomeMixin

  attr_accessor :my_total
end

f = Foo.new
f.my_total # => nil
f.update_total
f.my_total # => nil 
```

如果您打算调用 setter，请在`self`.

```
module MyAwesomeMixin
  def update_total
    self.my_total = 10
  end
end

f = Foo.new
f.my_total # => nil
f.update_total
f.my_total # => 10 
```

# php - 即使在浏览器刷新后使用 isset() 提交按钮检查，PHP 脚本仍在执行

> ID：14054894
> 
> 赞同：2
> 
> 时间：2012-12-27T12:41:17.947
> 
> 标签：php, forms, submit, isset

我是自学 PHP 的新手。我只想在单击提交按钮时运行一个小的 PHP 脚本。不幸的`isset()`是（根据我的教程课程）执行此提交按钮检查的功能 - 似乎不起作用！

当我在浏览器中刷新页面时，部分 PHP 脚本：`print("You're not a member of this site");`即使我还没有按下提交按钮，仍在执行！为什么？

和代码：

```
<html>
<head>
    <title>A BASIC HTML FORM</title>

    <?PHP
        if (isset($_POST['Submit1'])) {
            $username = $_POST['username'];

            if ($username == "letmein") {

                print ("Welcome back, friend!");

            }
            else {

                print ("You're not a member of this site");

            }
        }
    ?>
</head>
    <body>
        <Form name ="form1" Method ="POST" Action ="basicForm.php">
            <INPUT TYPE = "TEXT" VALUE ="username" NAME="username">
<p>

            <Input Type = "Submit" Name = "Submit1" Value = "Login">
        </FORM>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:48:21.500

如果您使用的是浏览器的刷新或`F5`密钥，您需要在提交后立即重定向，并且刷新时不会超过 isset。

就像`mysql_query`您在表单提交时为 INSERT 记录编写的函数之后，您需要编写一个

> header('位置：yourpage.php')

它将防止这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:47:21.797

而不是 isset()

**利用**

!empty($_POST)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-15T22:47:33.610

我也是 php 新手，将分享我的经验.. 我对此有 2 个愿景.. 第一个是如果你有很多表单，你需要添加 form="form1" attrtibute insde 输入和按钮以获得一个单一的表单$_POST。

第二个想法是..

如果没有 ajax，$_POST 方法会在点击时发送数据，但来自服务器的请求仅在刷新后才发出。这意味着帖子中显示的数据落后了 1 次刷新。

您可以添加一个隐藏的单选按钮或带有“1”之类的“检查值”的检查按钮。直到此按钮接收到一个值，然后您可以比较该值，如果它为真，则显示一条消息，如果不是，则显示另一条消息.

但是你需要一个默认值，要么是空的，要么总是从“你不是成员”开始，直到复选框改变值。

```
<?php
 $username = "";
 $username = (isset($_POST['Submit1']) ? $_POST['Submit1'] : "");
?>
<Form name ="form1" Method ="POST" Action ="basicForm.php">
<INPUT TYPE = "TEXT" VALUE ="username" NAME="username">

<INPUT hidden TYPE = "checkbox" NAME="check_trigger"
<?php if(!is_empty($username)){ echo "checked";}; ?> >

<Input Type = "Submit" Name = "Submit1" Value = "Login">
</FORM> 
```

因此，当输入用户名时，复选框会自动选中，即使名称已更改，您也可以回显问候消息...我是否超出主题...

或者你可以把你的名字作为默认值放在isset里面

```
$username = (isset($_POST['Submit1']) ? $_POST['Submit1'] : "letmein"); 
```

并且有

```
<INPUT TYPE = "TEXT" 
VALUE =<?php"echo htmlspecialchars($username);?>" NAME="username"> 
```

但你需要一些验证和安全性。

# batch-file - 通过批处理脚本重命名多个文件

> ID：14054896
> 
> 赞同：0
> 
> 时间：2012-12-27T12:41:34.437
> 
> 标签：batch-file, batch-processing, dos, batch-rename

我有这部分批处理脚本正在执行以下操作：

***- 在每个子文件夹下，它会重命名文件：'jpg,gif,png' 到 'Poster 1', 'Poster 2', 'Poster 3' 等等...（扩展名没有变化）***

```
set i=0
for %%b in (*.jpg *.gif *.png) do (
  set /A i+=1
   ren "%%b" "Poster !i!%%~Xb"
  echo File "%%b" renamed to "Poster !i!%%~Xb"
) 
```

rem PATCH 修复上一个 FOR 命令中的错误（**请忽略：上一个 FOR 命令中有一个错误，如果文件** *夹****中只有两个图像文件****，它会重命名一个文件两次***）：** 

 **```
if !i! neq 0 if not exist "Poster 1.*" (
  ren "Poster !i!.*" "Poster 1.*"
  echo ...and renamed back to "Poster 1"
) 
```

**！！！！！！我需要的是：！！！！！！****-如果文件夹中只有一个文件**
， 我需要添加一个要求将其重命名为“**海报**”，因为没有它，此脚本会将其重命名为“海报 1” 谢谢！

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:49:17.797

只是一个合乎逻辑的解决方案，在do循环之后，您可以再次检查'i'的值，如果它是1，那么您可以再次执行重命名操作[Rename Poster1 to Poster]。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:55:31.357

补丁`if`命令后：

```
if !i! equ 1 ren "Poster 1.*" "Poster.*" 
```

**编辑**：

如果您在 patch 命令之后插入上一行`if`（如我所说），最终代码是这样的：

```
set i=0
for %%b in (*.jpg *.gif *.png) do (
   set /A i+=1
   ren "%%b" "Poster !i!%%~Xb"
   echo File "%%b" renamed to "Poster !i!%%~Xb"
)
rem PATCH to fix a bug in previous FOR command:
if !i! neq 0 if not exist "Poster 1.*" (
   ren "Poster !i!.*" "Poster 1.*"
   echo ...and renamed back to "Poster 1"
)
REM NEW COMMAND TO RENAME THE UNIQUE FILE TO "Poster":
if !i! equ 1 ren "Poster 1.*" "Poster.*" 
```

安东尼奥******

# jquery - 更改输入样式后如何获取jquery默认样式？

> ID：14054901
> 
> 赞同：3
> 
> 时间：2012-12-27T12:41:59.017
> 
> 标签：jquery, css, input

我有一个文本输入，当事件“模糊”触发时我验证它的值。当值无效时，我更改了输入背景颜色，当我解决了错误时，我希望重新设置输入的原始颜色和样式。但是在解决错误或收到错误后我失去了原来的风格，通常是在改变输入的风格时发生的。我试图寻找原始样式来重新设置它，但我在 jqueryui 样式中找不到它。需要你的帮助 ：

HTML 代码：

```
<input type='text' name='val1' id='val1'/> 
```

jQuery代码：

```
function is_numeric(value)
{
    var pattern= new RegExp(/^[0-9]+$/);
    return pattern.test(value);
}

$(document).ready(function ()
{
 $('#val1').blur(function()
    {
        if(!is_numeric($('#val1').val()))
        {
            $('#val1').css('background-color','#E65050');
        }
        else
        {
            $('#va1').css('background-color','white '); /// here ??
        }
    });
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:51:51.883

请使用`class` 查看**[演示](http://jsbin.com/ateruj/1/edit)**

**CSS**

```
.error {background-color:#E65050} 
```

**jQuery**

```
function is_numeric(value)
{
    var pattern= new RegExp(/^[0-9]+$/);
    return pattern.test(value);
}

$(document).ready(function ()
{
 $('#val1').blur(function()
    {
        if(!is_numeric($('#val1').val()))
        {
            $('#val1').addClass('error');
        }
        else
        {
            $('#va1').removeClass("error");
        }
    });
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:45:37.107

为什么不将其存储在准备好的文档中：

```
$(document).ready(function ()
{
   var defColor = $('#val1').css('background-color');

   $('#val1').blur(function()
   {
    ...
    $('#val1').css('background-color', defColor); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T14:05:24.943

代替

```
 $('#va1').css('background-color','white '); /// here ?? 
```

利用

```
 $('#va1').css('background-color',''); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T19:09:57.597

你注意到拼写错误了吗：

```
$('#va1').css('background-color','white '); 
```

应该是这样的

```
$('#val1').css('background-color','white '); 
```

# vba - 'End(xlDown)' 表现得很奇怪

> ID：14054906
> 
> 赞同：1
> 
> 时间：2012-12-27T12:42:31.080
> 
> 标签：vba, excel, row, offset

我怀疑它的`.end(xlDown)`行为有点奇怪。

```
Dim rfound As Range

Set rfound = Columns("B:B").Find(What:=Me.ComboBox1.Value, _
LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext)

If ComboBox1.Value <> "" And WorksheetFunction.CountIf(Range("B:B"), _
ComboBox1.Value) > 0 And rfound.Offset(0, 1).Value <> "" Then
rfound.Offset(0, 1).End(xlDown).Offset(1, 0).Value = TextBox1.Value 
```

之后，代码将在`CommandButton1_click`B 列中搜索任何匹配的条件，然后`OffSet`在我的条件都满足的情况下搜索正确的单元格。但是，它提示我一条消息`Run-time error '1004': Application defined or object-defined error`。

我不知道问题出在哪里。举例说明：

![在此处输入图像描述](../Images/29f96355ef85886354e9ac0d74b77488.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T13:12:44.517

您当前的代码

1.  大概发现`B2`为`rfound` *（注意：最好在with `If Not rfound Is Nothing Then`rfound`之后测试是否存在）`Find`*
2.  然后`C2`是 `rfound.Offset(0, 1)`
3.  `rfound.Offset(0, 1).End(xlDown)`找到 C 列中的最后一个单元格，因为所有其他单元格都是空白的
4.  `rfound.Offset(0, 1).End(xlDown).Offset(1, 0)`尝试在最后一行下方的单元格中输入一个值 - 不能。

而是从底部向上看，即而不是

`Then rfound.Offset(0, 1).End(xlDown).Offset(1, 0).Value = TextBox1.Value`
采用
`Then Cells(Rows.Count, rfound.Offset(0, 1).Column).End(xlUp).Offset(1, 0) = TextBox1.Value`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:24:40.833

我的三分钱...

美妙之处不在于编写复杂的代码，而是将其分解为易于理解的行，以便更容易理解代码的作用。如果发生错误，它还有助于调试它......

1.  你已经知道你必须写到 Col C 所以为什么要让它变得更复杂`Offset`
2.  `rfound`按照 brettdj 的建议测试是否存在
3.  用于`xlUp`查找最后一行。

请参阅此示例。（**未经测试**）

```
Sub Sample()
    Dim rfound As Range
    Dim lRow As Long

    With ThisWorkbook.Sheets("Sheet1")
        Set rfound = .Columns(2).Find(What:=Me.ComboBox1.Value, _
        LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext)

        If Not rfound Is Nothing Then
            If ComboBox1.Value <> "" And _
            WorksheetFunction.CountIf(.Range("B:B"), ComboBox1.Value) > 0 And _
            rfound.Offset(, 1).Value <> "" Then

                '~~> Find the next available row in Col C
                lRow = .Range("C" & .Rows.Count).End(xlUp).Row + 1

                '~~> Directly write to the cell
                .Cells(lRow, 3).Value = TextBox1.Value
            End If
        Else
            MsgBox "Not Found"
        End If
    End If
End Sub 
```

# php - 移动网站的标题和普通页面的标题

> ID：14054911
> 
> 赞同：0
> 
> 时间：2012-12-27T12:42:47.427
> 
> 标签：php, javascript

我选择了与数据库相同的移动设备，所以它无法获取我的页面/代码，不知道这是一个好主意还是你有一个好主意？..

我希望它做的是找出它是移动的还是只是您正在登录的浏览器。

```
function db_c()
     {
         $link = @mysqli_connect('localhost', '..', '..', '..');
         if(!$link)
         {
             die('Connect Error: ' . mysqli_connect_errno());
         }
         mysqli_set_charset($link, "utf8");
         $this->mysqli = $link;

         function detect_mobile($ua=null) {
             $ua = ($ua) ? $ua : $_SERVER['HTTP_USER_AGENT'];    
             return (preg_match('/(alcatel|amoi|android|avantgo|blackberry|benq|cell|cricket|docomo|elaine|htc|iemobile|iphone|ipad|ipaq|ipod|j2me|java|midp|mini|mmp|mobi|motorola|nec-|nokia|palm|panasonic|philips|phone|playbook|sagem|sharp|sie-|silk|smartphone|sony|symbian|t-mobile|telus|up\.browser|up\.link|vodafone|wap|webos|wireless|xda|xoom|zte)/i', $ua));    
         }

         if(detect_mobile($ua) ) {
            header('Location: http://mobil.blabla.dk/');
         }
         else{
             header('Location: http://www.blabla.dk/');
         }
 } 
```

**误会她：**

注意：未定义变量：第 39 行 /home/jesperbo/public_html/blabla.dk/inc/function_php/function.php 中的 ua 警告：无法修改标头信息 - 标头已由（输出开始于 /home/jesperbo/public_html/ blabla.dk/inc/function_php/function.php:39）在 /home/jesperbo/public_html/blabla.dk/inc/function_php/function.php 第 43 行

第 39 行在这里：

```
 if(detect_mobile($ua) ) { 
```

第 43 行在这里：

```
header('Location: http://www.blabla.dk/'); 
```

我试着把它拿在手里，然后继续，页面上什么都不会显示[http://dk1.php.net/manual/en/function.ob-start.php](http://dk1.php.net/manual/en/function.ob-start.php)

如果我这样做了：

```
function detect_mobile($ua=null) {
             $ua = ($ua) ? $ua : $_SERVER['HTTP_USER_AGENT'];    
             return (preg_match('/(alcatel|amoi|android|avantgo|blackberry|benq|cell|cricket|docomo|elaine|htc|iemobile|iphone|ipad|ipaq|ipod|j2me|java|midp|mini|mmp|mobi|motorola|nec-|nokia|palm|panasonic|philips|phone|playbook|sagem|sharp|sie-|silk|smartphone|sony|symbian|t-mobile|telus|up\.browser|up\.link|vodafone|wap|webos|wireless|xda|xoom|zte)/i', $ua));    
         }

         if(detect_mobile() ) {
            header('Location: http://mobil.blabla.dk/');
         }
         else{
             header('Location: http://www.blabla.dk/');
         } 
```

你会看到它显示如下：

Denne webside har et loop ved omdirigering Websiden på blabla.dk/ har forårsaget for mange omdirigeringer。Dette kan muligvis løses 在 rydde 为 dette 网站 eller ved 在tillade tredjepartscookies 提供的饼干。Hvis dette ikke hjælper, ligger problemet muligvis i din serverkonfigurationen og ikke din computer。Her nogle forslag：Genindlæs denne webside senere。Få flere oplysninger om dette 问题。Fejl 310 (net::ERR_TOO_MANY_REDIRECTS)：用于 mange omdiriginger 的 Der var。

[http://billedeupload.dk/images/fOUIQ.png](http://billedeupload.dk/images/fOUIQ.png)

因此，如果我花 $ua 更好但我在这里展示的最后一个：

*希望你能帮我 ：）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:46:20.503

要检测它是移动的还是常规的，您应该检查[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)您可以在大多数编码中下载检测器。

请记住，这永远不是 100% 确定的。移动计算机上的用户可以像普通浏览器一样浏览。即使在移动设备上浏览是移动设备时，用户也可能希望查看常规站点。

检测是好的，但尽量给用户一个选择。

标头已发送意味着有输出到浏览器。您可以使用输出缓冲`ob_start();`来捕获所有输出，这样就不会发生此问题。但更好的是确保没有输出。`<?php ?>`这也意味着在任何包含文件的标签之外都没有空格或新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:47:05.330

换行：

```
if(detect_mobile($ua) ) { 
```

到：

```
if(detect_mobile() ) { 
```

如果您自己不提供，该`detect_mobile`方法将为您提供用户代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:49:24.367

首先，需要在任何实际输出之前完成重定向。

在您的情况下，一些内容已经发送到客户端，这就是您无法重定向用户的原因。

所以不要这样做：

```
<? 
db_c();
detect_mobile();
// other stuff
?> 
```

这样做：

```
<?
    detect_mobile();
    db_c();
    //other stuff
?> 
```

并检查用户是否使用桌面浏览器或他的手机/平板电脑等使用这个类：[php-mobile-detection](http://code.google.com/p/php-mobile-detect/)

然后你可以像这样使用它：

```
include 'Mobile_Detect.php';
$detect = new Mobile_Detect();
if ($detect->isMobile()) {
    // redirect here
} 
```

# android - 如何在android中检查共享首选项是否为空？

> ID：14054914
> 
> 赞同：3
> 
> 时间：2012-12-27T12:42:52.983
> 
> 标签：android, sharedpreferences

在我的登录和注销功能应用程序中，我正在检查活动开始时共享首选项是否为空，但我仍然收到 NullPointerException。

这是我的 HomeActivity.java 代码：

```
// Username And Password Editbox
String eusername;
String epassword;

// Shared Preferences String declaration
String spusername;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     

    SharedPreferences spreferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    spusername=spreferences.getString("spusername","");

    if(!spusername.equals(""))
    {   
        Log.e("Spusername not null","-->"+spusername);
    }
    if(spusername==null)
    {
        Log.e("Spusername null","-->"+spusername);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T12:49:35.087

您[`contains`](http://developer.android.com/reference/android/content/SharedPreferences.html#contains%28java.lang.String%29)在 SharedPreferences 上有方法。

```
boolean isSpUsernameDefined = spreferences.contains("spusername"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:49:27.890

方法 "spreferences.getString("spusername", eusername);" 将默认值作为 eusername 返回为空。因此它给出了空指针异常。

取而代之的是 eusername，您可以尝试如下给出一些字符串值。

spreferences.getString("spusername", "");

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T12:45:28.197

你`eusername`没有初始化这个变量所以得到空指针异常所以试试这样

```
spusername = preferences.getString("spusername", "n/a");

if(spusername!= null && !spusername.equals(""))
    {   
        Log.e("Spusername != null","-->"+spusername);

    }
   else{
               // your code is here
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T12:46:42.110

尝试：

```
spusername=spreferences.getString("spusername", ""); 
```

如果在 SharedPreferences 中找不到密钥，则为 spusername 添加默认值，现在检查它是否为空或 null，如下所示：

```
spusername=spreferences.getString("spusername", "");

if(!spusername.equals("")){   
     Log.e("Spusername != null","-->"+spusername);
}else{
      // do some code here
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T12:47:08.287

只是因为您没有初始化默认值。

```
String eusername; 
```

这将始终为您提供 null ，直到您没有将任何值保存到共享首选项中。只需用空字符串初始化

```
String eusername = ""; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-25T13:10:39.473

首先确保您将一些数据保存到 Sharedpreferences 中，如下所示：

```
SharedPreferences.Editor preferences = getSharedPreferences(SETTINGS, MODE_PRIVATE).edit();
preferences.putString("appVersion", "1.0");
preferences.putString("appAuthor", "John Doe");
preferences.putString("authorEmail", "test@gmail.com");
preferences.apply();
preferences.commit(); 
```

然后你需要像这样初始化 SharedPreferences：

```
SharedPreferences preferences = getSharedPreferences(SETTINGS, MODE_PRIVATE); 
```

然后您可以使用`getAll()`方法获取可用的 Sharedpreferences 数组，然后`contains`根据您的条件使用该方法执行一些逻辑。这是我记录所有可用首选项的方法：

```
Log.d("AVAILABLE_PREFS", String.valueOf(preferences.getAll())); 
```

然后我可以根据得到的结果创建一个条件：

```
if (preferences.contains("appVersion")) {

    if(preferences.getString("appVersion", SETTINGS).equals("1.0")){
         // Do something if TRUE
    }

} else {
   // Do something here if no Preferences found.
} 
```

# python - psycopg2“IndexError：元组索引超出范围”使用带有参数元组的'％'类似运算符时出错

> ID：14054920
> 
> 赞同：9
> 
> 时间：2012-12-27T12:43:34.030
> 
> 标签：python, psycopg2

这工作正常：

```
 cc.execute("select * from books where name like '%oo%'") 
```

但如果第二个参数通过：

```
cursor.execute("select * from books where name like '%oo%' OFFSET % LIMIT %", (0,1)) 
```

Psycopg 错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: tuple index out of range 
```

如何避免这个错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T14:30:32.463

首先，您应该使用`%%`插入`%`文字，否则，库将尝试使用 all`%`作为占位符。其次，最好指定`%s`要插入值的位置。

因此，您的代码应如下所示：

```
cursor.execute("select * from books where name like '%%oo%%' OFFSET %s LIMIT %s", (0,1)) 
```

# c# - 用部分视图内容附加 div

> ID：14054926
> 
> 赞同：0
> 
> 时间：2012-12-27T12:44:00.347
> 
> 标签：c#, javascript, asp.net-mvc

我正在将请求从我的视图发送到控制器，结果发送部分视图页面。结果附加在所需的 div 中。唯一的问题是部分视图内容显示为源 html 内容（css 未正确呈现）。

因为我猜这个问题可能出在 javascript 或 partialview 视图中，所以它是

**partiaView.cshtml**

```
@foreach (var item in Model)
{
    <div class="product clearfix">
        <div class="l-new">
            <a href="#">
                <!-- -->
            </a>
        </div>
    ...
    </div>
} 
```

**jsfile.js**

```
function GetTabData(xdata) {
    $.ajax({
        url: ('/Home/GetData'),
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ id: xdata }),

        success: function (result) {
            $.each(result, function (i, item) {               
                $("#mytabDiv").append(item);                
            })
        },
        error: function () { alert("error"); }
    });
} 
```

谢谢

更新：当我使用

```
> html 
```

代替`append`

```
$("#mytabDiv").html(item); 
```

根本不填充 div 内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:02:01.980

由于您部分期望 IEnumerable 集合，因此您不需要在 js 端进行迭代。只发结果。

这些应该工作

```
success: function (result) {
           $("#mytabDiv").html(result);                
         },
         error: function () { alert("error"); } 
```

# jsp - 通过 Java Server Pages 中的搜索表单从数据库中检索产品

> ID：14054929
> 
> 赞同：0
> 
> 时间：2012-12-27T12:44:08.600
> 
> 标签：jsp, database-connection

我有一个关于 JSP 的问题要问。我正在使用以下编码根据在搜索表单中输入的关键字显示产品。但我目前没有得到任何结果。你能帮我检查一下编码中的任何错误吗？谢谢！

[http://pastebin.com/BHzRmC6K](http://pastebin.com/BHzRmC6K)

代码：

```
<%@ page import="java.sql.*" %>
   <%@ page import="java.util.*" %>
   <jsp:useBean id="dbBean" scope="page" class="source.DbBean"/>  
   <%
     String keyword = request.getParameter("valueEntered");
     if (valueEntered!=null) {
   %>

   <TABLE>
   <TR>  
       <TR>
          <TD><B>Product Id</B></TD>
          <TD><B>Name</B></TD>  
          <TD><B>Description</B></TD>
          <TD><B>Price</B></TD>
       </TR>
<%
    ArrayList products = dbBean.getSearchResults(valueEntered);
    Iterator iterator = products.iterator();
    while (iterator.hasNext()) {
      Product product = (Product) iterator.next();
%>
    <TR>
        <TD><%=product.ProductId%></TD>
      <TD><%=product.Name%></TD>
      <TD><%=product.Description%></TD>
      <TD><%=product.Price%></TD>
      </TR>
      <%
    }
    %>

</TR>
</TABLE>
    <%
  }

%> 
```

# windows-7 - 我在 Windows 7 客户端计算机上获得了共享打印机的重复打印作业

> ID：14054935
> 
> 赞同：0
> 
> 时间：2012-12-27T12:44:31.227
> 
> 标签：windows-7, printing, notifications, network-printers, print-spooler-api

我有一个用于共享打印机的打印作业

我在 win server 2008 上共享了一台打印机

我正在使用 Windows 7 客户端机器上的这台打印机

我正在开发一个为所有打印作业编写所有打印机通知的应用程序

而对于打印队列中的一个作业，我收到了两个作业的通知，两个作业具有两个不同的 JobID 和两个不同的机器名称。

我的问题是为什么只为发送到打印队列的一项作业创建两个作业？为什么它们如此不同？虚拟作业具有 le 客户端的机器名称，真实作业具有打印服务器的机器名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:25:06.203

据我了解，FindFirstPrinterChangeNotification 会在客户端计算机上的应用程序触发作业并添加到客户端假脱机队列时生成通知。当客户端后台处理程序队列将打印作业转发到打印服务器时，会生成另一个通知。您可以尝试使用 PRINTER_CHANGE_SERVER 代替 PRINTER_CHANGE_ALL，看看是否仍然生成 2 个通知。

# ruby-on-rails - 重新启动 rails 服务器，分离 rails 服务器

> ID：14054943
> 
> 赞同：3
> 
> 时间：2012-12-27T12:45:14.980
> 
> 标签：ruby-on-rails, ruby

你如何重新启动rails服务器？我开始了

```
导轨服务器 -d

```

所以服务器是分离的

我知道的唯一方法是做 ps aux | grep rails and kill -9 on the process # 但是这样杀死进程好吗？

rails 中是否有任何命令用于停止或重新启动服务器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:58:37.710

杀死分离的服务器应该没有负面影响（假设没有人试图访问服务器）。但是，如果仍有数据未持久化（例如来自 Active Directory 缓存），您当然会丢失这些数据。如果您更频繁地遇到该问题，您可能需要考虑创建一个 rake 任务来为您停止服务器。作为替代

```
ps aux | grep ... 
```

你也可以使用

```
lsof -i :[port] 
```

其中 [port] 是服务器运行的端口（默认值：3000）

# linq - uCommerce 中的 LINQ 自定义 OrderLine 字段

> ID：14054946
> 
> 赞同：1
> 
> 时间：2012-12-27T12:45:25.623
> 
> 标签：linq, umbraco, umbraco-ucommerce

我正在尝试计算有多少订单行（ol）的自定义字段“distributedOrderLineId”等于当前迭代的订单行 ID。

问题是，并非每个订单行都定义了这个自定义字段。如何使 LINQ 跳过带有未定义自定义字段的订单行，而不是引发错误。

请参考下面的代码。

```
var distributionsLeft = ol.Quantity - 1 - PurchaseOrder.All().Where(y => int.Parse(y["distributedOrderLineId"]) == ol.Id).Count(); 
```

最好的问候， Brinck10

**编辑**

我使用*any*尝试了以下代码：

```
PurchaseOrder.All().Where(y => y.OrderProperties.Any(z=>z.Key=="distributedOrderLineId")).Where(a=>a["distributedOrderLineId"]==ol.OrderLineId.ToString()).Count(); 
```

不幸的是，它不起作用。我在堆栈跟踪上得到的错误是：

```
[NotSupportedException: System.String get_Item(System.String)]
   NHibernate.Linq.Visitors.HqlGeneratorExpressionTreeVisitor.VisitMethodCallExpression(MethodCallExpression expression) +206 
```

**编辑结束**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:37:38.733

我希望我已经得到了你想要的。我`PurchaseOrder`用一系列字典模拟了你，我想`y`你的 lambda 表达式中的形式参数是从 派生的`IDictionary`，因为我可以看到这样的表达式`y["distributedOrderLineId"]`。如果我的假设有误，请纠正我。解决方法是通过调用来检查是否设置了key `order.ContainsKey("id")`。你可以看到下面的例子

```
var firstItem = new Dictionary<string, string>{{"id", "11"}};
var secondItem = new Dictionary<string, string>{{"id", "12"}};
var thirdItem = new Dictionary<string, string>(); // id is not set, as distributedOrderLineId in your example
var fourthItem = new Dictionary<string, string>{{"id", "14"}};

var PurchaseOrder = new [] {firstItem, secondItem, thirdItem, fourthItem};
var quantity = 4;
var orderID = 12;
var distributionsLeft = quantity - 1 - PurchaseOrder.Where(order => order.ContainsKey("id") && int.Parse(order["id"]) == orderID).Count();

Console.WriteLine (distributionsLeft); 
```

**编辑：** 您能否尝试使用下一个查询，看看它是否有效？如果它工作正常，我们可以尝试做一些优化。

```
PurchaseOrder.Where(y => y.OrderProperties.Any(z => z.Key == "distributedOrderLineId"))
             .ToList()
             .Where(y => y["distributedOrderLineId"] == ol.OrderLineId.ToString())
             .Count(); 
```

**优化版本**：我尝试从性能和可读性的角度优化上面给出的版本，但请注意 - 我错了，因为我没有运行该查询。我仅通过分析有关[OrderLine](http://www.ucommerce.dk/docs/html/T_UCommerce_EntitiesV2_OrderLine.htm)和[OrderProperty](http://www.ucommerce.dk/docs/html/T_UCommerce_EntitiesV2_OrderProperty.htm)的 uCommerce 文档来更改它。另请注意，我在 lambdas 中为形式参数使用了不同的名称——只是为了摆脱 y 和 z 的混乱。

```
string orderLineId = ol.OrderLineId.ToString();
PurchaseOrder
    .Count(order => order.OrderProperties.Any(property => property.Key == "distributedOrderLineId" && property.Value == orderLineId)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:53:06.563

您可以像这样检查特定的键/值组合：

```
bool anyLinesWithKeyValue = purchaseOrder.OrderLines.Any(x => x.OrderProperties.Any(y => y.Key == "distributedOrderLineId" && y.Value == "someValue")); 
```

这只会给你一个“耶”或“不”关于是否有任何具有该组合的实际行。如果您需要某些东西的订单行，只需将“Any”替换为“Where”。

希望这可以帮助。

# android - 我的 ListActivity 菜单问题有一个问题

> ID：14054949
> 
> 赞同：0
> 
> 时间：2012-12-27T12:45:29.523
> 
> 标签：android, listview, listactivity

我在我想实现 ListActivity 菜单的地方制作应用程序。我使用[了本](http://www.thenewboston.org)教程。我有一个问题。

如果我运行我的应用程序并运行 ListActivity，模拟器显示错误：

```
12-27 12:42:34.387: E/AndroidRuntime(756): FATAL EXCEPTION: main
12-27 12:42:34.387: E/AndroidRuntime(756): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tomaszsudol.simplyfun/com.tomaszsudol.simplyfun.PolishWebsites}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-27 12:42:34.387: E/AndroidRuntime(756):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 
```

我的代码 PolishWebsites.java：

```
public class PolishWebsites extends ListActivity {

    String[] classes = {"Demotywatory", "Kwejk", "Bebzol" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.pl_websites);
        setListAdapter(new ArrayAdapter<String>(PolishWebsites.this, android.R.layout.simple_list_item_1, classes));

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        String cheese = classes[position];
        try {
        Class myClass = Class.forName("com.tomaszsudol." + cheese);
        Intent myIntent = new Intent(PolishWebsites.this, myClass);
        startActivity(myIntent);
        } catch(ClassNotFoundException e) {
            e.printStackTrace();

        }
    }

} 
```

我的 pl_websites.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView 
        android:id="@+id/android.R.id.list" 
        android:layout_width="match_parent" 
        android:layout_height="wrap_content">

    </ListView>

</LinearLayout> 
```

我找到了我犯错的地方。我不必要地添加了这行代码：

```
setContentView(R.layout.pl_websites); 
```

完成教程练习后，我应该看看脚本是否工作以及如何工作。我添加了上面的行，因为我想在布局中显示 ListView。这是不必要的。

* * *

感谢您的回答。

如果我设置

```
<ListView 
     android:id="@+id/list" 
     android:layout_width="fill_parent" 
     android:layout_height="fill_parent">

</ListView> 
```

Eclipse 显示错误如下。

```
12-27 12:42:34.387: E/AndroidRuntime(756): FATAL EXCEPTION: main
12-27 12:42:34.387: E/AndroidRuntime(756): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tomaszsudol.simplyfun/com.tomaszsudol.simplyfun.PolishWebsites}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-27 12:42:34.387: E/AndroidRuntime(756):  at android.app.Instrumentation.callActivityOnCreate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:49:20.593

**android:id="@+id/android.R.id.list"**这将分配为**android.R.id.list**而不是**“列表”**

你需要像这样设置id

```
 android:id="@android:id/list" 
```

或者你也可以这样做

```
android:id="@+id/list" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:50:39.487

将您的`ListView`设计更改为此。

```
<ListView 
       android:id="@+id/list" 
       android:layout_width="match_parent" 
       android:layout_height="wrap_content"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:50:44.990

将您的 ListView 更改为

```
<ListView 
    android:id="@android:id/list"
    android:layout_width="match_parent" 
    android:layout_height="wrap_content">

 </ListView> 
```

# iphone - 适用于 iOS 的 .dst 文件阅读器

> ID：14054950
> 
> 赞同：2
> 
> 时间：2012-12-27T12:45:29.397
> 
> 标签：iphone, ios, dst-embroidery

我想读取和显示用于刺绣制作的 .dst 文件。我曾尝试在网上搜索库和框架，但一无所获，我也尝试使用 NSData 将文件作为字符串打开，但它无法读取。知道如何在 ios 中读取 .dst 文件扩展名文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T06:27:04.843

libembroidery 是 Embroidermodder 2 使用和开发的底层库。它处理超过 45 种不同的刺绣特定格式（包括 DST）以及几种非刺绣特定矢量格式。

它是开源的，你可以在这里找到它： [https ://github.com/Embroidermodder/Embroidermodder/tree/master/libembroidery](https://github.com/Embroidermodder/Embroidermodder/tree/master/libembroidery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:59:54.760

当然，您可以将 DST 文件读取为 NSData，但是您必须自己解析数据并创建缝合线。以此信息为起点：[http](http://www.achatina.de/sewing/main/DST.HTM) ://www.achatina.de/sewing/main/DST.HTM，AFAIK 没有可供公众使用的库/框架。

# java - 创建自定义的 JFrame

> ID：14054951
> 
> 赞同：0
> 
> 时间：2012-12-27T12:45:33.500
> 
> 标签：java, swing, opacity, bufferedimage, shapes

![在此处输入图像描述](../Images/bfa2bf9df42ed6a2f07c2ab3db428c49.png)

我知道如何创建一个半透明的窗口，但为了完整起见，我将其包括在内。
现在这就是我想要做的......

## 创建一个不透明度为 60% 的未装饰的 JFrame

## 软窗边缘。

参考上图，您可以看到边缘清晰且轮廓分明。我想让它们变软

## 给它一个圆角矩形。

我可以给出一个形状，`AWTUtilities.setWindowShape(Window,Shape)`但我想知道如何创建一个**圆角矩形**。

## 创建 `BufferedImage` 的反射以用作背景

*你为什么不用Photoshop？*你可能会问，但是创建一个你想尝试用作背景的图像的反射是很乏味的。相反，我想知道是否有一种编程方式：

*   拿一个`BufferedImage`*   垂直翻转它。换句话说，颠倒过来。*   将其不透明度更改为所需值*   将大小设置`JFrame`为原始缓冲图像的两倍

# 帮助！！！

* * *

```
import java.awt.*;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;
import javax.swing.*;
public class ImageReflection extends JFrame{
    public ImageReflection(){
        ImageIcon baseIcon = new ImageIcon("src/images/mentalist-logo.png");
        ImageIcon reflectIcon = new ImageIcon("src/images/mentalist-logo.png");
        JLabel baseLabel = new JLabel(baseIcon);
        JLabel reflectLabel = new JLabel();

        Graphics2D g2D = (Graphics2D) reflectIcon.getImage().getGraphics();
        g2D.rotate(180);
        reflectLabel.setIcon(reflectIcon);

        this.add(reflectLabel);
        this.setVisible(true);
        this.pack();

    }
    public static void main(String[] args) {
        new ImageReflection();
    }
} 
```

我得到一个`UnsupportedOperationException`at `Graphics2D g2D = (Graphics2D) reflectIcon.getImage().getGraphics();`。
这是我将图像倒置的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:13:42.657

> 剩下的是创造一个反射。

您可以像这样更改图形上下文`AffineTransform`：

```
BufferedImage newImage = new BufferedImage(
    oldImage.getWidth(), oldImage.getHeight, BufferedImage.TYPE_INT_ARGB);
Graphics2D g2d = newImage.createGraphics();
g2d.translate(0, newImage.getHeight());
g2d.scale(1, -1);
g2d.drawImage(oldImage, 0, 0, null);
g2d.dispose(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T13:26:08.253

可能你可以尝试这样的事情（如果不是全部，可能会有一些帮助），这是我之前尝试过的：

```
final JWindow initWindow = new JWindow();
SwingWorker<Object, Object> task = new SwingWorker<Object, Object>()
            {
        public Object doInBackground() 
        {
            //show init window
            //....
            initWindow.getContentPane().add(text);

           ( (JComponent) initWindow.getContentPane ( ) ).setBorder(new CompoundBorder(new CustomRoundedBorder(), new LineBorder(new Color(...)));

           AWTUtilities.setWindowOpaque ( initWindow, false );

           initWindow.setAlwaysOnTop(true);

           initWindow.setVisible(true);
             //....
            return null;
        }
        public void done() 
        {
        }
    };
    task.execute(); 
```

# javascript - phonegap 中的数据库视图

> ID：14054956
> 
> 赞同：2
> 
> 时间：2012-12-27T12:45:51.737
> 
> 标签：javascript, html, sqlite, cordova

```
<script type="text/javascript" src="phonegap-1.1.0.js"></script>
<script type="text/javascript" src="cordova-2.2.0.js"></script>
<script type="text/javascript">
    var firstNameBox = null;
    var lastNameBox = null;
    var db = null;
    var dataTable = null;
    /** Called when phonegap javascript is loaded */
    function onDeviceReady() {

        var addButton = document.getElementById("add");
        firstNameBox = document.getElementById("firstName");
        lastNameBox = document.getElementById("lastName");
        dataTable = document.getElementById("data-table");

        db = window.openDatabase("scontactDB", "1.0", "Contacts Database", 1000); //name,version,display name, size
        addButton.addEventListener(
            "click",

        function () {
            db.transaction(
            //function sql statements
            function (tx) {
                ensureTableExists(tx);
                var firstName = firstNameBox.value;
                var lastName = lastNameBox.value;

                var sql = 'INSERT INTO Contacts (firstName, lastName) VALUES ("' + firstName + '","' + lastName + '")';
                tx.executeSql(sql);

            },

            function (err) {
                alert("error callback " + err.code);

            },

            function (err) {
                alert("success callback " + err.code);
                loadFromDB();
            });

        },
        false);
        loadFromDB();

    }

    function loadFromDB() {

        db.transaction(

        function (tx) {
            ensureTableExists(tx);
            tx.executeSql('SELECT * FROM Contacts', [],

            function (tx, results) {
                var htmlStr = "";
                for (var index = 0; index < results.rows.length; index++) {
                    var item = results.rows.item(index);
                    htmlStr = htmlStr + "<tr><td>" + item.firstName + "</td><td>" + item.lastName + "</td><td><button onclick=\"deleteEntry('" + item.id + "');\">X</button></td></tr>";

                }
                dataTable.innerHTML = htmlStr;
            },

            function (err) {
                alert("Unable to fetch result from Contacts Table");
            });

        },

        function (err) {
            alert("error callback " + err.code + " " + err.message);

        },

        function () {
            firstNameBox.value = "";
            lastNameBox.value = "";

        });

    }

    function deleteEntry(id) {
        db.transaction(

        function (tx) {
            ensureTableExists(tx);
            tx.executeSql('Delete FROM Contacts where id=' + id);

        },

        function (err) {
            alert("error callback " + err.code + " " + err.message);

        },

        function (err) {
            alert("success callback ");
            loadFromDB();

        });

    }

    function ensureTableExists(tx) {
        tx.executeSql('CREATE TABLE IF NOT EXISTS Contacts (id INTEGER PRIMARY KEY, firstName,lastName)');

    }
    /** Called when browser load this page*/
    function init() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }
</script>
<body onLoad="init()">
    <table border="1">
        <tr>
            <td><b>First Name</b>
            </td>
            <td><b>Last Name</b>
            </td>
            <td><b>Action</b>
            </td>
        </tr>
    </table>
    <table id="data-table"></table>
    <table>
        <tr>
            <td>
                <input id="firstName" type="text">
            </td>
            <td>
                <input id="lastName" type="text">
            </td>
            <td>
                <button id="add">Add</button>
            </td>
        </tr>
    </table>
</body> 
```

我对电话间隙完全陌生；这是我的 index.html 文件。我不知道错误在哪里我需要检查值是否存储到数据库中。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:09:13.513

如果您删除此代码行，您的问题将得到解决：

```
<script type="text/javascript" src="phonegap-1.1.0.js"></script> 
```

你应该保持

```
<script type="text/javascript" src="cordova-2.2.0.js"></script> 
```

您不能使用相同的方法使用两个相似的 js 文件。

# c - C 错误 C2040？char *()' 与 'int ()' 的间接级别不同

> ID：14054957
> 
> 赞同：2
> 
> 时间：2012-12-27T12:45:51.800
> 
> 标签：c, function

你能否修复这段代码中的错误我得到这个错误 `error C2040: 'tmFunc' : 'char *()'`的间接级别不同`'int ()'`

```
#include<stdio.h>
main()
{
    char *tmStamp=tmFunc();
}

char *tmFunc() 
{
    char tmbuf[30];
    struct tm *tm;
    time_t ltime;             /* calendar time */
    ltime=time(NULL);         /* get current cal time */
    tm = localtime(&ltime);
    sprintf (tmbuf, "[%04d/%02d/%02d %02d:%02d:%02d]", tm->tm_year + 1900,
       tm->tm_mon + 1, tm->tm_mday, tm->tm_hour, tm->tm_min, tm->tm_sec);
    return(tmbuf);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T12:46:52.237

因为您没有`tmFunc`在使用前声明，所以它被隐式声明为返回的函数`int`。

只需在使用前声明它：

```
#include<stdio.h>

char *tmFunc();  // declaration

int main()
{
char *tmStamp=tmFunc();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T12:50:24.380

**阳离子：**您正在返回`(tmbuf)`局部变量的地址。

*   应该首先复制 `tmbuf[30];`到动态内存中并返回。

*   之前也定义`*tmFunc()`了函数`main()`。

我更正了您的代码：

```
#include<stdio.h>
#include<time.h>
#include<string.h>
#include<stdlib.h>

char *tmFunc() {
  char tmbuf[30];
  char *buff; 
  struct tm *tm;
  time_t ltime;             /* calendar time */
  ltime=time(NULL);         /* get current cal time */
  tm = localtime(&ltime);
  sprintf (tmbuf, "[%04d/%02d/%02d %02d:%02d:%02d]", tm->tm_year + 1900,
       tm->tm_mon + 1, tm->tm_mday, tm->tm_hour, tm->tm_min, tm->tm_sec);

       buff = calloc(strlen(tmbuf)+1,sizeof(char));
       strcpy(buff, tmbuf);
       return buff;

  return (buff);
}

int main()
{
   char *tmStamp=tmFunc();
   printf("Time & Date : %s \n", tmStamp);
   free(tmStamp);
   return 1;
} 
```

这实际上工作正常：

```
:~$ ./a.out 
[2012/12/27 18:28:53] 
```

存在范围问题。

# c# - 从同一页面中的另一个用户控件中查找用户控件的控件

> ID：14054959
> 
> 赞同：3
> 
> 时间：2012-12-27T12:45:57.467
> 
> 标签：c#, asp.net

我已经创建了一个`usercontrol`里面`treeview`。

现在我已经把它放在了一个`aspx page`两次中，`Id`让我们说`usercontrolA`和`usercontrolB`。

它们都被一页一页地加载。
现在我想得到控制`pre-render event`的对象。我怎样才能实现它？`usercontrolA``treeview``usercontrolB`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:48:41.860

您需要拥有 的实例*才能*`usercontrolB`访问`treeview`两个用户控件的控件。因此，请尝试将实例*保存*在一些适当的存储中，以便在`pre-render`事件中访问它。

1.  在 中引入一个属性来保存 UC 类型`User-Control`：

    ```
    public MyUserControl MainUserControl { get; set; } 
    ```

2.  在父 ASPX 中将属性设置为`usercontrolB`：

    ```
    usercontrolA.MainUserControl = usercontrolB;
    usercontrolB.MainUserControl = usercontrolB; 
    ```

3.  现在您可以使用该`MainUserControl`属性来访问您的`TreeView`：

    ```
    MainUserControl.treeView1 ... 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:55:41.583

此示例用于在此表单上的任何控件上查找名为 treeview 的“usercontrolB”。

```
 Control[] ctrl = this.Controls.Find("usercontrolB", true);
            if (ctrl != null && ctrl.Length > 0)
            {
                TreeView tv = (TreeView)ctrl[0];
                // do whatever you want with the treeview
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T12:56:40.613

为什么必须在 PreRender 中访问它？

您需要创建一个自定义事件：

**主页**

```
var uc1 = (UserControlType1)LoadControl("UC1.ascx");
var uc2 = (UserControlType1)LoadControl("UC2.ascx");
uc2.PreRendered += uc2_PreRendered;

public void uc2_PreRendered(object sender, TreeView tv){
    // you can access your treeview from here
} 
```

**用户控制 B**

```
public delegate void PreRenderDelegate(object sender, TreeView tv);
public event PreRenderDelegate PreRender;

public void OnPreRender(object sender, EventArgs e){
    if(this.Prerendered!=null)
        this.Prerendered(this, aTreeView);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T17:58:44.410

您可以在 user-controlA 的`OnPreRender`事件中使用以下代码：

```
var tree = this.Page.FindControl("uc2").FindControl("treeview1"); 
```

**注意：** “uc2”是 ASPX 页面中 User-ControlB 的 ID。

或者你可以试试这个：

```
 var tree = this.Page.LoadControl("UserControlB.ascx").FindControl("treeview1"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T19:06:21.867

（我只是重新发布[我的帖子，](http://forums.asp.net/post/5252125.aspx)以供其他人参考）

您始终可以使用控件的事件来更新 RadTreeView，方法是传递一些值作为属性并再次调用 RadTree（用户控件中的那个）的数据绑定方法……也就是说，您可以传递 RadTree 本身的对象，国际海事组织。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-09T10:47:29.497

```
Var str=This.Page.findControl("UserControlName").FindControl("NameOfTheControlToFind") 
```

# ruby-on-rails - 通过 Rails 在 BIRT 中进行身份验证

> ID：14054973
> 
> 赞同：0
> 
> 时间：2012-12-27T12:47:05.353
> 
> 标签：ruby-on-rails, url, authentication, birt

我正在使用在 Redis 服务器上运行的 rails 应用程序。我在 Apache Tomcat 服务器上也有 BIRT（商业智能和报告工具）报告，以生成托管在 Tomcat 服务器上的报告。当用户通过 Redis 服务器登录到 rails 应用程序时，就完成了身份验证。但是，Tomcat 服务器无需额外的身份验证即可查看报告。

我不希望用户看到报告的 URL。我正在使用 iFrames 向用户显示报告，因为这会阻止用户看到 URL。但是用户可以使用 Inspect Element / Firebug 来获取报告的 URL 并在没有任何身份验证的情况下单独访问它，这违背了使用 iFrame 的目的。

1.  用户查看报告时是否可以提供身份验证？

2.  是否可以隐藏/屏蔽 URL，使其无法通过 Inspect 元素/Firebug 访问，因此也无法单独访问报告。

请在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:21:05.883

1.  这个问题[Parameters with Connection Profile](https://stackoverflow.com/questions/15484366/parameters-with-connection-profile)说明了如何使用属性绑定在报告运行时从参数中获取用户ID 和密码（它继续提出一个更难的问题）。如果没有此用户输入，Tomcat 将不会“知道”这些值。

2.  我假设您想隐藏/屏蔽 URL，因为在默认的 Tomcat 设置服务器和端口信息中显示。您可以使用 DNS 命名更改/方向来隐藏 URL。

用户使用类似的链接

```
http://reports.YOU.com/run?__report=T_im_ByID.rptdesign 
```

并从

```
http://server01:8080/Birt/run?__report=T_im_ByID.rptdesign 
```

我不肯定没有办法绕过 DNS 更改，但是当我通过 firebug 运行 BIRT 报告时，我只看到“reports.YOU.com”

# python - 为什么我的变量在 python 的嵌套 for 循环中被覆盖？

> ID：14054981
> 
> 赞同：1
> 
> 时间：2012-12-27T12:47:31.573
> 
> 标签：python, variables, loops

我对 python 有点陌生，无法弄清楚为什么我的变量 GTRed 在指示的地方被覆盖。就我的理解而言，GTRed 在这一点上应该保持不变。我知道我可以通过使用“for x,y in xygrid:”之类的东西来减少嵌套 for 循环的数量，但这不应该影响这一点。

非常感谢您的帮助。

亲切的问候

```
GTN = 0
GTRed = [[0 for j in range(5)] for i in range(4)]
GTYH = [[0 for j in range(5)] for i in range(4)]
for jred in range(4):
    for ired in range(3):
        GTRed = [[0 for j in range(5)] for i in range(4)]
        GTRed[ired][jred]=11
        GTRed[ired+1][jred]=1
        GTRed[ired][jred+1]=1
        GTRed[ired+1][jred+1]=1
        for jyh in range(4):
            for iyh in range(2):
                GTYH = GTRed
                if GTYH[iyh][jyh]==0 and GTYH[iyh+1][jyh]==0:
                    print GTRed
                    GTYH[iyh][jyh]=22 
                                        # The above line seems to somehow  affect GTRed
                    print GTRed
                    GTYH[iyh+1][jyh]=2
                    GameTable[GTN] = GTYH
                    GTN = GTN + 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:48:52.450

问题出在一线

```
GTYH = GTRed 
```

这两个变量指向同一个列表列表。

```
a = [0,1,2]
b = a
b[1] = 100
print a # prints [0, 100, 2] 
```

一个解决方案（对于列表列表）将是

```
GTYH = [x[:] for x in GTRed] 
```

或者

```
import copy

GTYH = copy.deepcopy(GTRed) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T12:52:07.843

正如上面的海报所说，这条线 GTYH = GTRed

告诉 GTYH 访问与 GTRed 引用的相同列表

你可以试试 GTYH = GTRed[:]

这将创建列表的新实例

# iphone - 如何在 iPhone 的 UIbutton 中限制属性的访问？

> ID：14054985
> 
> 赞同：3
> 
> 时间：2012-12-27T12:47:36.960
> 
> 标签：iphone, objective-c, uibutton, getter-setter

我想从组件的现有类中限制某些属性。

这是示例代码，

```
UIButton *customBtn;
property (nonatomic, strong) UIButton *customBtn;
@synthesize customBtn; 
```

这是我的实现，

```
customBtn= [UIButton buttonWithType:UIButtonTypeCustom];
 customBtn= setImage:[UIImage imageNamed"radio_button_noraml.png"] forState:UIControlStateNormal];
 customBtn= setImage:[UIImage imageNamed"radio_button_acitve.png"] forState:UIControlStateSelected];
 customBtn = CGRectMake(5, 30, 20, 20); notsupport = [[UILabel alloc]initWithFrame:CGRectMake(25, 30, 290, 20)];
 [customBtn addTargetelf actionselector(MyAction:) forControlEvents:UIControlEventTouchUpInside];
 [self.view addSubview:customBtn]; 
```

在我的视图控制器中，我可以使用 customBtn 访问 UIbutton 中的所有属性。

myClass.customBtn.backGroundcolor = [UIColor blackColor];

但我想限制按钮属性的访问，例如，我想访问属性背景颜色和 alpha 值，其余的属性我不想访问。

所以请帮帮我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:11:09.707

在objective-c 中，所有方法都是公共的，而属性只不过是setter 和getter（方法）。
所以你不能限制现有的方法/属性。
即使您将其子类化，您也只能覆盖它。如果有人使用该方法，
您可以在此处添加。`NSAssert`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:51:38.070

看来您需要一个自定义组件并覆盖所需的 getter。我不知道其他实现方式，也许其他会给你。

所以它不会是一个简单的@synthesize。

@synthesize 等效代码：

```
// .h
@property (nonatomic, retain) id ivar;

// .m
- (id)ivar {
    return ivar;
}

- (void)setIvar:(id)newValue {
    if (ivar != newValue) {  // this check is mandatory
        [ivar release];
        ivar = [newValue retain];
    }
} 
```

现在在 - (id)ivar 中应该有一些限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T13:17:00.593

这是 obj-c 中缺少的东西之一，因为我与 C++ 比较，继承模式是私有的、受保护的和公共的。

如果这些功能在这里，您的工作就完成了，但事实并非如此。

在目标 C 中，没有私有或公共。每件事都是公开的。您实际上无法在类接口中显示方法，但知道它存在的人仍然可以访问它。从另一个类继承的类是所有“超级”类方法/属性和它自己的方法/属性的总和（在 Objective-C 中，一个只能从一个类派生，使用公共模式。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T13:50:55.933

不要`customBtn`在控制器的头文件中声明该属性，而是只声明您想要公开公开的那些按钮属性的属性。例如，在`MyController.h`：

```
@interface MyController : UIViewController
{
}

@property(nonatomic, copy) UIColor* customBtnBackgroundColor;

@end 
```

请注意，您使用的属性属性与原始类的属性声明中的属性属性相同。在示例中，按钮的`backgroundColor`属性实际上是由`UIView`(not `UIButton`) 声明的，因此如果您查看，`UIView.h`您会看到该属性是使用属性声明的`nonatomic`和`copy`。

接下来，您需要`customBtn`在控制器的实现文件中私下声明该属性。您还需要为您在头文件中公开的属性的 getter/setter 方法提供一个实现。getter/setter 方法只是将调用转发到实际的按钮对象。例如，在`MyController.m`：

```
#import "MyController.h"

// Class extension with private methods and properties for MyController
@interface MyController()
  property (nonatomic, strong) UIButton* customBtn;
@end

@implementation MyController

  @synthesize customBtn;

  // Note: No need to synthesize customBtnBackgroundColor here because
  // you don't need an instance variable, and you are providing the
  // getter/setter implementation yourself.

  - (UIColor*) customBtnBackgroundColor
  {
    return self.customBtn.backgroundColor;
  }

  - (void) setCustomBtnBackgroundColor:(UIColor*)backgroundColor
  {
    self.customBtn.backgroundColor = backgroundColor;
  }

@end 
```

正如其他人所写的那样，如果外面的人`MyController`知道某个属性`customBtn`存在，则仍然可以访问该属性。但是，重点应该是定义 的公共接口`MyController`，并且使用上面概述的解决方案，您已经完成了预期的工作。

# cucumber - 如何用黄瓜和 watir web-driver 回到窗口？

> ID：14054986
> 
> 赞同：0
> 
> 时间：2012-12-27T12:47:40.323
> 
> 标签：cucumber, watir-webdriver

我需要返回浏览器。我怎么能用黄瓜做呢？我使用 Watir 网络驱动程序。

以及如何关闭窗口中的弹出窗口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T13:04:45.827

这将在浏览器中返回：

```
browser.back 
```

如果您提供了相关代码，我可能会更具体。

# c# - 截断字符串错误

> ID：14054992
> 
> 赞同：0
> 
> 时间：2012-12-27T12:48:06.573
> 
> 标签：c#, sql, string, error-handling

我有这个字符串“SP-CTe-10-10-2012”。SQL 插入给出此错误“字符串或二进制文件将被截断，”

我试过这个：

```
string verapli1 = _infProt_verAplic.ToString();
string verapli2 =verapli1.Substring (verapli1.Length ,20); 
```

减少字符串的长度，但这段代码也有错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:51:38.677

您的列字符串长度低于您的字符串长度。

增加数据类型长度（尝试将列类型更改为`varchar(20)`）或在插入前减少值的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:50:52.803

这是一个 SQL Server 错误 - 意味着您的字符串不适合您尝试插入的字段。顺便说一句，不要将日期存储为字符串 - 这是糟糕的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:53:27.773

它应该是，

```
string verapli1 = _infProt_verAplic.ToString();
if(verapli1.Length > 20)
verapli1 =verapli1.Substring (0,20); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T18:14:21.490

问题是列 nvarchar(15) 的 SQL 长度，当我编写分配给变量的过程时

```
 alter proc probandodata (@dhre nvarchar(30))as
             insert into ctrc5 (veraplic,numero)
             values(@dhre,5555555) 
```

我只将 dhre 调整为 nvarchar 到 @dhre nvarchar(15) 并且工作正常。谢谢。

# jquery - 如何使用 jquery 淡入中继器 LinkBut ton

> ID：14054997
> 
> 赞同：0
> 
> 时间：2012-12-27T12:48:18.523
> 
> 标签：jquery, asp.net, repeater, databound

我对 jquery 很陌生，我在 W3Schools 上查看了一些示例，然后用谷歌搜索了我的问题，但没有找到符合我要求的答案...

无论如何，我有一个水平显示链接按钮的中继器。不用说，每次都会向中继器加载不同数量的此类链接按钮。

这是我正在使用的中继器：

```
 <div style="position: relative">
    <asp:Repeater runat="server" ID="repStatuses" 
            onitemdatabound="repStatuses_ItemDataBound" 
            onitemcommand="repStatuses_ItemCommand">
      <ItemTemplate>
        <asp:LinkButton ID="linkBtnStatuses" runat="server" CommandName="ShowText" CommandArgument='<%# Eval("Priority") + ";" + Eval("LevelID") + ";" + Eval("ID") %>'>
          <div runat="server" id="divSts" class="fontAriel"></div>
        </asp:LinkButton>
      </ItemTemplate>
    </asp:Repeater>
    </div> 
```

**我想使用 Jquery 创建淡入效果，以便每个 linbutton 在前一个淡入之后也会淡入**......但我不知道如何将 jquery 代码与 RepeaterItem LinkBut​​ton 结合起来。

**这是我希望我的应用程序看起来像的 jquery 示例代码：**

```
<script>
$(document).ready(function(){
  $("button").click(function(){
    $("#d1").fadeIn(2000);
    $("#d2").fadeIn(3000);
    $("#d3").fadeIn(6000);
  });
});
</script>
</head>

<body>
<p>Demonstrate fadeIn() with different parameters.</p>
<button>Click to fade in boxes</button>

<br><br>
<div id="d1" style="width:80px;height:80px;display:none;background-color:red;"></div><br>
<div id="d2" style="width:80px;height:80px;display:none;background-color:green;"></div><br>
<div id="d3" style="width:80px;height:80px;display:none;background-color:blue;"></div>

</body>
</html> 
```

我需要指导，但非常感谢任何帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:24:58.590

您可以使用带有睡眠的 javascript 循环：

```
var numberofbuttonsToDisplay = 5;

for (i=1;i<=numberofbuttonsToDisplay;i++)
{
  $('#d'+i).fadeIn(1000);
  sleep(1000);
} 
```

它会在显示下一个按钮之前等待 1 秒，同时淡入实际按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T07:53:09.333

经过一个漫长的周末，我想出了一个答案。似乎我的 js / jquery 没有响应的原因是由于对 的引用`<script src="../../script/jquery-1.8.3.min.js" type="text/javascript"></script>`已损坏。

现在是解决方案：

```
$(document).ready(function () {

    $('a[id*="repStatuses"]').each(function () {
        $(this).show(2500);
        $(this).delay(1000);
    });
}); 
```

我在这里指`a`的是因为 LinkBut​​ton 被渲染到一个`<a>`元素。

谢谢大家的帮助：）