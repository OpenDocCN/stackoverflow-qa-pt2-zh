# StackOverflow 问答 12700000-12700999

# html - 将制表符（在 PRE 元素中）渲染为 HTML 中的 4 个空格？

> ID：12700001
> 
> 赞同：15
> 
> 时间：2012-10-02T23:38:29.880
> 
> 标签：html

> **可能重复：**
> [指定制表符宽度？](https://stackoverflow.com/questions/667200/specifying-tab-width)

我需要在 pre 标签中打印一个制表符。选项卡的 HTML 字符是，`&#09;`但在我尝试过的所有浏览器上，它都呈现为 8 个空格。

有没有办法调整它以呈现为 4 个空格的宽度，或者是否有另一个我可以使用的 HTML 字符是 4 个空格？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-02T23:54:22.860

虽然我同意第一个答案，您不妨只放置 4 个空格，但似乎确实支持`tab-size`CSS 中的某个属性（尽管缺乏 IE 支持）：

```
pre {
    -moz-tab-size:    4; /* Firefox 4+ */
    -o-tab-size:      4; /* Opera 11.5 & 12.1 only */
    tab-size:         4; /* Chrome 21+, Safari 6.1+, Opera 15+ */
} 
```

仅使用`white-space: pre`或`white-space: pre-wrap`（或在`<pre>`标签内）有效。

*   [W3C 规范](http://www.w3.org/TR/css3-text/#tab-size)
*   [jsFiddle 演示](http://jsfiddle.net/deizel/rKmjw/34/)
*   [浏览器支持](http://caniuse.com/css3-tabsize)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T23:40:34.720

您可以使用一系列四个字符，它们总是扩展为四个空格。它是四个空格（`pre`至少在适当样式的其他元素内）。

由于没有普遍认可的方法来确定选项卡的宽度以及它的行为方式，因此最好不要在需要精确控制输出外观的地方使用它。HTML 和浏览器都没有提供任何设置选项卡宽度的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T06:11:39.133

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T00:08:07.903

CSS 是出于查看目的处理此问题的最佳方式。但是，如果您希望人们能够复制/粘贴文本并获得四个空格作为制表符，那么您最终将使用 Javascript 来修改您的 pre 标签。

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</head>
<body>
    <pre class="downtab">All    Tabs    Changed a   little.</pre>
    <script type="text/javascript">
        $(document).ready(function() {
            $(".downtab").each(function() {
                var text = $(this).html().replace(/\t/g, '    ');
                $(this).html(text);
            });
        });
    </script>
</body>
</html> 
```

这里真正的魔力是使用全局匹配的正则表达式的 replace() 函数。

# hadoop - 我应该如何选择表格的前 10%？

> ID：12700003
> 
> 赞同：0
> 
> 时间：2012-10-02T23:38:35.787
> 
> 标签：hadoop, apache-pig

我需要在 Pig 中选择表的前 x% 行。有人可以告诉我如何在不编写 UDF 的情况下做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T07:45:49.710

如前所述，首先您需要计算表中的行数，然后显然您可以这样做：

```
A = load 'X' as (row);
B = group A all;
C = foreach B generate COUNT(A) as count;
D = LIMIT A C.count/10; --you might need a cast to integer here 
```

问题是，[在 Pig 0.10 中引入了](https://issues.apache.org/jira/browse/PIG-2570)[对函数的动态参数支持`LIMIT`](https://issues.apache.org/jira/browse/PIG-2570)。如果您使用的是以前的版本，那么这里会使用该功能[提供建议。](http://grokbase.com/t/pig/user/124aespn4n/limit-operator-doesnt-work-with-variables)`TOP`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:58:13.233

不确定如何获取百分比，但如果您知道表大小为 100 行，则可以使用 LIMIT 命令获取前 10%，例如：

```
A = load 'myfile' as (t, u, v);
B = order A by t;
C = limit B 10; 
```

（以上示例改编自[http://pig.apache.org/docs/r0.7.0/cookbook.html#Use+the+LIMIT+Operator](http://pig.apache.org/docs/r0.7.0/cookbook.html#Use+the+LIMIT+Operator)）

至于动态限制为 10%，不确定您是否可以在不知道表有多大的情况下执行此操作，而且我很确定您无法在 UDF 中执行此操作，您需要运行一项工作来计算行数，然后执行 LIMIT 查询的另一项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T06:05:19.000

我不会写猪代码，因为编写和测试需要一段时间，但我会这样做（如果你需要确切的解决方案，如果没有，有更简单的方法）：

1.  从您的输入中获取样本。说几千个数据点左右。
2.  对它进行排序并找到 n 个分位数，其中 n 应该是你拥有的 reducer 数量的某个顺序或稍大一些。
3.  计算每个分位数的数据点。

4.  此时，前 10% 的最低点将落入这些区间之一。找到这个区间（这很容易，因为计数会准确地告诉你它在哪里），并使用较大分位数的计数总和与相关分位数一起找到这个区间中的 10% 点。

5.  再次检查您的数据并过滤掉所有内容，除了比您刚刚找到的点大的点。

其中的一部分可能需要 UDF。

# ios - 捕获和记录 iOS 超时

> ID：12700006
> 
> 赞同：0
> 
> 时间：2012-10-02T23:39:02.923
> 
> 标签：ios

iTunes Connect 提供超时报告以及崩溃和内存报告。是否可以捕获这些超时，以便我们记录它们并发送到我们的服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:38:43.283

否。外部系统进程正在监视应用程序，每当它确定发生此类问题时，它就会终止应用程序。当这种杀戮发生时，没有办法运行你自己的代码，也没有办法获得为什么会发生这种杀戮的信息。

然后，该系统进程会生成任意崩溃报告，这些报告会发送到 iTunes Connect。

# ios - iPhone 上的流畅 UI 布局

> ID：12700007
> 
> 赞同：0
> 
> 时间：2012-10-02T23:39:19.087
> 
> 标签：ios, user-interface, interface-builder

我有一个带有这样的 UI 的 Android 应用程序，用于查看电子邮件：

![示例布局](../Images/ebcf7ad946ae74096b78cbaead1a4652.png)

我正在尝试将其移植到 iOS 并需要它与 iOS 5.0 及更高版本一起使用（因此不能在 iOS 6.0 中使用自动布局）。希望您可以根据示例说明布局应如何调整/流动。

处理这种布局的最佳方法是什么？From 和 Re 线需要是可变高度，如图所示（实际上 To: 线也是如此）。消息正文当然需要可变高度。

到目前为止，我唯一的尝试是尝试将 UITableViewController 与静态单元格一起使用。我可以通过在 heightForRowAtIndexPath 中使用 sizeWithFont 来获得可变高度，以返回每行所需的高度。使用这种方法，我花了很长时间试图获得我想要的样式（圆角和背景仅用于顶部）。

那么有没有更好的方法呢？也许使用集合视图或容器视图的东西？在其他一些我需要移植的屏幕上，我遇到了类似的问题，但它们有更多级别的嵌套（圆形蓝色部分在圆形蓝色部分内的白色部分内）。还是我最好不要使用 IB 并仅从基本标签元素和通用视图在代码中构建整个 UI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:48:46.913

我能想到的最简单的方法是手动计算内部的标签框架`viewDidLayoutSubviews`。这是一些伪代码：

创作时：

1.  在 IB 中，将所有标签作为蓝色区域的子视图。检查容器的自动调整大小蒙版是否贴在顶部、左侧和右侧，并且具有可拉伸的宽度。我们将在代码中修复高度和子视图框架。消息正文可以是标签或作为单独视图的文本视图。
2.  在`viewDidLoad`中，根据需要设置包含视图的图层cornerRadius、borderColor 等。

在`viewDidLayoutSubviews`：

1.  时间标签：简单。只需将宽度设置为超级视图宽度减去一些填充，设置高度`sizeWithFont:`
2.  对于`To:`, `From:`, 和`Re:`; 打电话`sizeToFit`。获得最大宽度并坚持下去。
3.  `To:`label：将 x 设置为 0，将 y 设置为时间标签的底部。
4.  接收者姓名标签：将 x 设置为从 (2.) 获得的宽度，将 y 设置为与 (3.) 相同的宽度。将宽度设置为 (容器宽度 - (2.)) 并将高度设置为`sizeWithFont:`.
5.  `From:`对和`Re:`行执行从 (3.) 到 (4.) 的相同步骤。
6.  将蓝色视图高度设置为主题标签的框架底部。
7.  用正文文本视图/标签填充框架的其余部分。

您必须自己添加填充，因为`sizeToFit`并且`sizeWithFont:`不会为您这样做。此外，正文`UITextView`可以自行滚动，但如果您期望较长的主题标题，那么您应该将整个内容包装在另一个中`UIScrollView`（或者在 IB 中，只需将主视图的类设置为`UIScrollView`）

# javascript - 使用 html5/javascript 播放声音

> ID：12700008
> 
> 赞同：0
> 
> 时间：2012-10-02T23:39:21.020
> 
> 标签：javascript, html, html5-audio

**我的问题：**如果数字超过 100，我希望用户听到某种声音。

```
If (x > 100) { play sound } 
```

我将如何使用 html5/javascript 来解决这个问题。是否可以在没有内联小视频剪辑的情况下播放声音。到目前为止，我所看到的唯一内容是将那些嵌入在页面中的小型快速播放器：http: [//www.w3schools.com/html/html_sounds.asp](http://www.w3schools.com/html/html_sounds.asp)

希望有更好的解决方案？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:41:59.820

使用[一个`<audio>`元素](http://www.w3.org/TR/html5/the-audio-element.html#the-audio-element)。

```
var foo = document.createElement('audio');
foo.src = 'https://dl.dropbox.com/u/8090976/Matrix%20Ring.aiff';

if (x > 100)
{
    document.getElementById('foo').play();
} 
```

演示：http: [//jsfiddle.net/mattball/ZcRt9/](http://jsfiddle.net/mattball/ZcRt9/)

更多阅读：[http ://html5doctor.com/native-audio-in-the-browser](http://html5doctor.com/native-audio-in-the-browser)

# objective-c - mapViewDidFinishLoadingMap：调用过早

> ID：12700011
> 
> 赞同：6
> 
> 时间：2012-10-02T23:39:44.030
> 
> 标签：objective-c, ios, mkmapview, screenshot, mkmapviewdelegate

我的问题很简单：我正在等待 MKMapView 的屏幕截图，并且我只想在地图加载后才这样做。不幸的是，这个委托方法几乎总是在地图实际加载*之前被调用。*如果幸运的话，我只是得到一个网格，或者一些加载的瓷砖。有什么好方法可以做我需要做的事情吗？还是我在 MKMapViewDelegate 协议中遗漏了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T02:44:17.470

也许您可以尝试添加一个计时器，然后在计时器的完成块中截取屏幕截图。或者，也许，使用 mapView:didUpdateUserLocation: 委托方法作为屏幕截图的回调，而不是 mapView:DidFinishLoadingMap:

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T13:45:17.550

这似乎是 iOS 6 中 MapKit 中的众多错误之一。希望它会在 iOS 7 中得到修复。

# java - 使用 FTP4J 下载整个目录

> ID：12700012
> 
> 赞同：0
> 
> 时间：2012-10-02T23:40:01.407
> 
> 标签：java, ftp4j

我查看了文档，似乎找不到执行此操作的函数。所以，我认为我应该自己编写代码。进一步查看文档，我发现了一个 list() 函数，它列出了工作目录中的所有文件。如何在保留目录结构的同时下载所有文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T11:34:00.180

连接到服务器后：

```
FTPClient client = new FTPClient();
client.connect(host);
client.login(user, pass); 
```

> 您更改为所需的文件夹

```
client.changeDirectory(ftpFolder); 
```

然后您请求文件列表：

```
FTPFile[] list = client.list(); 
```

迭代结果的文件数组并下载文件。使用：

```
FTPFile[] list = client.list();
for (int i = 0; i < list.length; i++)
{
   //client.download("localFile", new java.io.File("remotefile);
    client.download(list[i].getName(), new java.io.File(list[i].getName());    
} 
```

# php - PHP文件上传创建目录

> ID：12700013
> 
> 赞同：1
> 
> 时间：2012-10-02T23:40:19.243
> 
> 标签：php, html, file-upload, upload, directory

所以我在我的网站上有一个文件上传部分，用户可以上传任何 doc 或 docx 文件夹。这是我的html代码：

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
    Select a file: <input type="file" name="upload">
<input type="submit"> 
```

这是 upload_file.php 的代码：

```
<?php
    session_start();
    $allowedExts = array("doc", "docx");
    $extension = end(explode(".", $_FILES["upload"]["name"]));

    if (($_FILES["upload"]["size"] < 200000)
    && in_array($extension, $allowedExts)) {
        if ($_FILES["upload"]["error"] > 0)
        {
            echo "Return Code: " . $_FILES["upload"]["error"] . "<br />";
        }
        else
        {
            echo "Upload: " . $_FILES["upload"]["name"] . "<br />";
            echo "Type: " . $_FILES["upload"]["type"] . "<br />";
            echo "Size: " . ($_FILES["upload"]["size"] / 1024) . " Kb<br />";
            echo "Temp file: " . $_FILES["upload"]["tmp_name"] . "<br />";

            if (file_exists("Proposals/".$_SESSION["FirstName"] ."/" . $_FILES["upload"]["name"]))
            {
                echo $_FILES["upload"]["name"] . " already exists. ";
            }
            else
            {
                move_uploaded_file($_FILES["upload"]["tmp_name"],
                "Proposals/". $_SESSION["FirstName"] ."/". $_FILES["upload"]["name"]);
                echo "Stored in: " . "Proposals/". $_SESSION["FirstName"] ."/". $_FILES["upload"]["name"];
            }
        }
    } else {
        echo "Invalid file";
    }
?> 
```

但这不会上传任何内容，即使它回复了一条成功的消息。我在想这是因为它不允许我创建目录。上面的代码有什么问题，还是我必须添加更多代码才能创建一个目录。如果有帮助的话，这里是我的文件夹结构：

![文件夹](../Images/2c3e13dae939853dc50ffd93906c75d0.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T23:43:28.163

您必须创建您尝试将文件移动到的目录，它不会由 move_uploaded_file 自动创建。

使用 mkdir()、[http](http://php.net/mkdir) ://php.net/mkdir 创建目录，然后移动文件。

这是脚本的另一种结尾，应该可以

```
// Create directory if it does not exist
if(!is_dir("Proposals/". $_SESSION["FirstName"] ."/")) {
    mkdir("Proposals/". $_SESSION["FirstName"] ."/");
}

// Move the uploaded file
move_uploaded_file($_FILES["upload"]["tmp_name"], "Proposals/". $_SESSION["FirstName"] ."/". $_FILES["upload"]["name"]);

// Output location
echo "Stored in: " . "Proposals/". $_SESSION["FirstName"] ."/". $_FILES["upload"]["name"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T23:47:00.297

您需要检查目录是否存在，如果不存在，则创建它。

```
if (!file_exists("Proposals/". $_SESSION["FirstName"])) {
      mkdir("Proposals/". $_SESSION["FirstName"]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T21:53:51.340

您正在将文件上传到不存在的目录，因此您需要先创建它，您的 upload_file.php 应该像

```
<?php
session_start();
$allowedExts = array("doc", "docx");
$extension = end(explode(".", $_FILES["upload"]["name"]));

if (($_FILES["upload"]["size"] < 200000)
&& in_array($extension, $allowedExts)) {
    if ($_FILES["upload"]["error"] > 0)
    {
        echo "Return Code: " . $_FILES["upload"]["error"] . "<br />";
    }
    else
    {
        echo "Upload: " . $_FILES["upload"]["name"] . "<br />";
        echo "Type: " . $_FILES["upload"]["type"] . "<br />";
        echo "Size: " . ($_FILES["upload"]["size"] / 1024) . " Kb<br />";
        echo "Temp file: " . $_FILES["upload"]["tmp_name"] . "<br />";

        if (file_exists("Proposals/".$_SESSION["FirstName"] ."/" . $_FILES["upload"]["name"]))
        {
            echo $_FILES["upload"]["name"] . " already exists. ";
        }
        else
        {
            // Check if directory exists if not create it 
            if(!is_dir("Proposals/". $_SESSION["FirstName"] ."/")) {
               mkdir("Proposals/". $_SESSION["FirstName"] ."/");
             }
             move_uploaded_file($_FILES["upload"]["tmp_name"],
            "Proposals/". $_SESSION["FirstName"] ."/". $_FILES["upload"]["name"]);
            echo "Stored in: " . "Proposals/". $_SESSION["FirstName"] ."/". $_FILES["upload"]["name"];
        }
    }
} else {
    echo "Invalid file";
}
?> 
```

# ruby-on-rails - 通过 Ajax Rails 调用辅助方法

> ID：12700015
> 
> 赞同：2
> 
> 时间：2012-10-02T23:40:34.000
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3, render

我需要在不重新加载页面（AJAX）的情况下更新我的 rails 模型的一些数据。

我有一个像[http://railscasts.com/episodes/364-active-record-reputation-system?autoplay=true这样的声誉系统](http://railscasts.com/episodes/364-active-record-reputation-system?autoplay=true)

在我的控制器中有这个方法：

```
def vote
   value = params[:type] == "up" ? 1 : -1
   @idea = Idea.find(params[:id])
   @idea.add_or_update_evaluation(:votes, value, current_user)
   redirect_to :back, notice: "Thank you for voting!"

end 
```

在我看来有这个：

```
<% if current_user && !current_user.voted_for?(idea) %>
| <%= link_to "LoV", vote_idea_path(idea, type: "up"), method: "post" %>
<% end %> 
```

我想在不重新加载页面的情况下更新以下数据，在我的应用程序布局文件中有这个：

```
strong>(<%= current_user.reputation_value_for(:votes).to_i %>).</strong>
<strong>LoV's(<%= link_to current_user.evaluations.count, user_path(current_user)%>)</strong> 
```

如何使用 AJAX 呈现该方法“投票”？

非常感谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-03T03:58:21.573

设置一个简单的javascript：

**投票-ajax.js.coffee**

```
$("a.vote").on
    click: (event) ->
        link = $(event.target)
        $.ajax
            type:     "POST"
            url:      "/votes"
            dataType: "json"
            data:
                voteType: link.attr("data-type")
                userId:   link.attr("data-userId")

            success: (response) ->
                link.addClass("voted-#{link.attr("data-type")}")

         event.preventDefault()
         false 
```

**votes_controller.rb**

```
respond_to :json

def create
  @vote = Vote.new(direction: params[:voteType], user_id: params[:userId])
  @vote.save
  respond_with @vote
end 
```

这不是一个完整的示例，也没有经过测试，您需要进行一些调整，但这应该会让您走上正确的道路。

你也可以使用

```
<%= link_to "Vote Up", votes_path(direction: "up"), method: :post, remote: true %> 
```

你需要`create.js.erb`在你的`views/votes`文件夹中创建一个文件来处理响应，它基本上应该看起来就像`success`上面方法中的回调。

就个人而言，我更喜欢手动方法（使用 jQuery 的`ajax`），因为它提供了更多的控制，并且在不久的将来不太可能发生变化，而 Rails 的 UJS 实现更有可能发生变化。它还可以让您更改编写一些简单的咖啡脚本，这始终是一个奖励！

# c++ - 减双给出错误的结果

> ID：12700018
> 
> 赞同：3
> 
> 时间：2012-10-02T23:40:52.580
> 
> 标签：c++, double, subtraction

我正在尝试从双精度数中获取小数部分，这是我获取小数部分的代码

```
double  decimalvalue = 23423.1234-23423.0;
0.12340000000040163 
```

但是在减法之后，我期望十进制值为 0.1234，但我得到 0.12340000000040163。请帮助我了解这种行为以及是否有任何解决方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T23:43:45.380

我建议你看看

[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

[维基百科：IEEE 754](http://en.wikipedia.org/wiki/IEEE_754-1985)

您可以在浮点数中指定有限数量的值，但在表示的范围内可以指定无限数量的浮点数。

因此，某些浮点数无法以任何浮点/双精度数据类型精确表示。

处理您的特定问题的典型方法是避免直接相等比较，而是进行 epsilon 测试：查看预期值和计算值是否在彼此之间称为*epsilon*的某个小数字（与减去的值相比）内.

间接相关的是[Machine Epsilon](http://en.wikipedia.org/wiki/Machine_epsilon)的概念，值得一看以获得完整的理解

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T23:42:42.143

这是一个舍入误差。在十进制中，您不能完美地表示给定位数（例如 15）的 1/3。在 base 2 中，还有很多你无法表示的东西，0.1234 恰好是其中之一。精度取决于比例，但双精度约为 15 位十进制数字。我建议查看[http://en.wikipedia.org/wiki/IEEE_floating_point](http://en.wikipedia.org/wiki/IEEE_floating_point)以了解有关浮点数的更多详细信息。

如果您正在尝试制作一个以 10 为底的系统（例如人类使用的计算器）并且您需要精确的结果，您应该使用 BCD。

# javascript - $(this.el).find().click() 在backbone.js 中不起作用

> ID：12700020
> 
> 赞同：-1
> 
> 时间：2012-10-02T23:41:08.320
> 
> 标签：javascript, jquery, backbone.js

这绝对让我发疯！有人可以解释为什么这段代码不起作用以及如何修复它吗？它应该向控制台发送“单击”消息，但它不起作用。控制台消息在其他任何地方都有效，但由于某种原因，javascript 没有捕获点击事件。

```
var resultsListView = new ResultsListView({model: comparablesList});

ResultsListView = Backbone.View.extend({
        tagName:'div',
        id:'resultView',
        template:_.template("<div class='resultsListItemView'></div>"),

        initialize:function () {
            $( this.el ).html('<p class="loadingText">Getting comparables...<p>');
            this.model.bind("change", this.render, this);
            this.model.bind("reset", this.loading, this);
        },

        render:function (eventName) {
            $( this.el ).html( this.template() );

            _.each(this.model.models, function (comparable) {
                this.$('.resultsListItemView').append(new ResultsListItemView({model:comparable}).el);
            }, this);

            $('#info').html($(this.el));

            return this;
        }
    });

    ResultsListItemView = Backbone.View.extend({
            initialize: function(){
                this.render();
            },

            template:_.template("<div class='hovr_item'> \
                                    <div class='hovr'> \
                                        <button class='test123'>test</button> \
                                    </div> \
                                </div> "),

            render: function(){
                var resultsListItemView = this;
                $(this.el).html(this.template(this.model.toJSON()));

                $(this.el).find('.test123').click(function() {
                    console.log('click'); // this does not work after clicking
                });
                return this;
            }
        }); 
```

作为一个额外的线索，如果我将此代码放入渲染中，它确实会显示在控制台中......所以它似乎只是点击事件：

```
$(this.el).find('.test123').each(function(index) {
        console.log('found');
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:50:43.857

您是否尝试过将此事件与 events 属性绑定？IE：

```
events: "click .test123": "affiliateClick" 
```

# php - php cURL 和 Instagram 照片

> ID：12700026
> 
> 赞同：1
> 
> 时间：2012-10-02T23:41:36.290
> 
> 标签：php, curl, instagram

所以有人在 Instagram 上发布了一张照片的链接：http: [//instagr.am/p/QSVkR8LS3H/](http://instagr.am/p/QSVkR8LS3H/)

[这将从http://t.co/bOJ4EX2j](http://t.co/bOJ4EX2j)重定向到[http://instagr.am/p/QSVkR8LS3H/](http://instagr.am/p/QSVkR8LS3H/)到照片所在的实际 Instagram 页面[http://instagram.com/p/QSVkR8LS3H/ 。](http://instagram.com/p/QSVkR8LS3H/)

凉爽的。这一切都很好。现在我想要一个 cURL 跟随推文链接并下载包含照片的 < img > 的最后一页。脚本看起来基本上是这样的：

```
 $target = 'http://t.co/bOJ4EX2j';

 $ch = curl_init();

 curl_setopt ($ch, CURLOPT_HTTPGET,        TRUE);
 curl_setopt ($ch, CURLOPT_POST,           FALSE);
 curl_setopt ($ch, CURLOPT_COOKIEJAR,      COOKIE_FILE);   // Defined Constant
 curl_setopt ($ch, CURLOPT_COOKIEFILE,     COOKIE_FILE);
 curl_setopt ($ch, CURLOPT_TIMEOUT,        CURL_TIMEOUT);  // Defined Constant
 curl_setopt ($ch, CURLOPT_USERAGENT,      WEBBOT_NAME);   // Defined Constant
 curl_setopt ($ch, CURLOPT_URL,            $target);       // Target site
 curl_setopt ($ch, CURLOPT_REFERER,        '');            // Referer value
 curl_setopt ($ch, CURLOPT_VERBOSE,        FALSE);         // Minimize logs
 curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE);         // No certificate
 curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, TRUE);          // Follow redirects
 curl_setopt ($ch, CURLOPT_MAXREDIRS,      4);             // Limit redirections to four
 curl_setopt ($ch, CURLOPT_RETURNTRANSFER, TRUE);          // Return in string

# Create return array
$return_array['FILE']   = curl_exec($ch); 
$return_array['STATUS'] = curl_getinfo($ch);
$return_array['ERROR']  = curl_error($ch);

# Close PHP/CURL handle
curl_close($ch);

return $return_array; 
```

现在这个脚本有更多的组件，但这只是 cURL 部分。现在，它确实设法吐出它降落在图像所在的正确最终页面[http://instagram.com/p/QSVkR8LS3H/](http://instagram.com/p/QSVkR8LS3H/)） - 但这就是 $return_array['FILE'] 吐出的内容：

```
 500 Server Error

 An internal server error occurred. 
```

即使您在浏览器中导航到页面，cookie 已关闭，并且未登录 Instagram（如果您是），页面也会完全加载！

我到底错过了什么，不允许这个 cURL 脚本下载 Instagram 页面？！它几乎适用于我尝试过的所有其他页面！只是不是 Instagram.com？！

请有人帮我解决这个问题 - 我非常感谢任何人可能拥有的任何帮助或见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:01:18.303

如果您在服务器而不是本地计算机上运行此代码，则服务器和 Instagram.com 之间可能存在配置错误的代理。检查本地机器上的代码，确保它也可以在*同一台机器上*的浏览器中运行。

如果你得到这个工作并发现，正如贾斯汀伍德所说，你有一个 HTML 页面而不是你想要的图像，我可以帮助你使用一些 PHP 来获取图像 URL（然后你必须运行另一个cURL 请求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T23:52:16.540

正如我们许多人所说，该代码似乎工作得很好。我只能建议您确保打开错误报告，然后检查基本目录中的 PHP 错误日志。

您可能还想检查 PHP.ini 中是否启用了 cURL 模块。

不确定还有什么问题。

# facebook-graph-api - 有没有办法查询 Facebook.com 上的“相关性排序”好友列表？

> ID：12700029
> 
> 赞同：1
> 
> 时间：2012-10-02T23:41:57.883
> 
> 标签：facebook-graph-api, sorting, facebook-fql, batch-processing

是否可以使用 Graph API 或 FQL访问（或纯粹使用 Facebook API 重新创建 - 即：批处理）“相关性排序”朋友列表（如[http://www.facebook.com/me/friends所示）？](http://www.facebook.com/me/friends)

如果我不得不猜测它似乎是您与每个朋友在消息/帖子/喜欢中互动的新近度和频率的组合，并且可能将朋友的成员资格合并到列表中（亲密朋友，熟人。）

它似乎不是朋友端点上的参数（例如：[https](https://graph.facebook.com/me/friends?sort=relevancy) ://graph.facebook.com/me/friends?sort=relevancy ），我相信这需要大量的查询、处理和扩展权限以收集对第三方应用程序的连接进行评分所需的数据；但是，我想我会检查是否有人知道通过 API 完成此操作的方法。

# asp.net - 在 ASP 中使控件可见/不可见

> ID：12700031
> 
> 赞同：0
> 
> 时间：2012-10-02T23:42:29.297
> 
> 标签：asp.net

我在一个名为 Home 的 ASP 页面中有一个名为“SEND”的超链接，它是：

```
<asp:TemplateField>
                    <ItemTemplate>
                        <asp:HyperLink ID="HyperLink1" runat="server" 
                            NavigateUrl='<%# Eval("Post_ID", "~/RCA.aspx?Post_ID={0}") %>' 
                            Text="SEND"></asp:HyperLink>
                    </ItemTemplate> 
```

当用户单击超链接时，它会转到另一个名为 RCA 的页面，在此页面中有一个按钮，代码如下：

```
<asp:Button ID="btnRCA" runat="server" onclick="Button1_Click" 
                  Text="Assign RCA" Width="147px" /> 
```

所以我希望这个按钮只有在点击主页中的超链接时才可见。我计划在 RCA 页面中有另一个按钮或控件，当单击时或在有人离开页面之前，它们将使其不可见，他们必须通过单击其他控件使其不可见按钮。有人可以帮我弄这个吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:47:01.670

在你的第二页上`page_load`，试试这个：

```
 protected void Page_Load(object sender, EventArgs e)
  {
        if (Request.QueryString["Post_ID"] != null)
          {
             btnRca.Visible = true;    
          }
   } 
```

我不知道在其他情况下您想如何处理此按钮的可见性，但这应该可以回答您的特定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:02:08.180

使用 QueryString 参数。

**主页.aspx**

```
//When linked to RCA.aspx from Home.aspx, a parameter called ShowButton=1 is included 
//in the URL.

<asp:HyperLink ID="HyperLink1" runat="server" 
    NavigateUrl='<%# Eval("Post_ID", "~/RCA.aspx?Post_ID={0}&ShowButton=1") %>' 
    Text="SEND"></asp:HyperLink> 
```

**RCA.aspx**

```
//By default, since you want the button to NOT appear for all incoming traffic EXCEPT 
//that which came from Home.aspx, the button's Visible property is set to false.

<asp:Button ID="btnRCA" runat="server" onclick="Button1_Click" 
    Text="Assign RCA" Width="147px" Visible="false" /> 
```

**RCA.aspx.cs**

```
protected void Page_Load(object sender, EventArgs e)
{
    //If the querystring has a parameter called ShowButton and it's equal to "1",
    //then set the button to Visible = true.
    //Else, do nothing, keeping the button in it's default, Visible=false state.

    //By putting this in an "IsPostback == false" check, you can guarantee that this will
    //only  happen on first page_load, and won't be triggered again even if you do other 
    //actions in the page that cause Postback

    //For example, if you don't use this !IsPostback check, and you end up creating some 
    //new function that causes the button to be hidden again, but then you make a 
    //selection from a dropdown list that causes postback, you will trigger the call to 
    //make the button Visible again, even though that's probably what you don't want at 
    //this point, since your other new function set it to Visible = false.

    if (!IsPostback)
    {
        if (Request.QueryString["ShowButton"] == "1")
        {
            RCAbtn.Visible = true;
        }

        if (Request.QueryString["Post_ID"] != null)
        {
            //do whatever you need to with the post ID  
        }
    }
} 
```

**SomeOtherPage.aspx.cs**

```
Response.Redirect("RCA.aspx?Post_ID=1234"); //button will be invisible 
```

然后让我们稍后说您想从其他页面重定向并让按钮可见，例如来自主页的重定向：

```
Response.Redirect("RCA.aspx?Post_ID=1234&ShowButton=1"); //button will be visible 
```

如果您不喜欢弄乱您的 URL，或者您觉得将您所做的事情如此清晰地呈现给用户的眼睛看起来很俗气，那么您不一定需要使用“ShowButton”。您可以说 ?Post_ID=1234&fkai3jfkjhsadf=1，然后检查您的查询字符串中是否有“fkai3jfkjhsadf”。有时我喜欢这样做，因为从用户的角度来看，这让我看起来像是在做一些真正技术性和加密的事情，而不仅仅是用简单的英语传递一堆基本指令:) 缺点是你需要跟踪您自己的查询字符串参数。

* * *

**编辑：**

如果您想获取仅包含 Post_ID 而没有其他内容的 URL，您可以执行以下操作：

```
string currenturl = Request.Url.ToString(); //get the current URL
string urlToSend = currenturl.Substring(0, currenturl.IndexOf("?")); //cut off the QueryString entirely
urlToSend += "?Post_ID=" + Request.QueryString["Post_ID"]; //re-append the Post_ID 
```

请注意，如果 URL 没有 QueryString，您对 Substring 的调用将导致异常，因此请以最适合您的方式（try/catch 等）对其进行修补。

之后，您应该可以在 mailMessage.Body 中使用“urlToSend”字符串。

# python - python中的一个简单程序，我很难过

> ID：12700043
> 
> 赞同：1
> 
> 时间：2012-10-02T23:44:59.007
> 
> 标签：python, range, augmented-assignment

```
m = 0
for i in range(1,1000):
    if i % 3 == 0 or i % 5 == 0:
        m += m
print m 
```

这给出`0`了答案。答案应该是`233168`。

以我的 IDE 结尾的行可能是个问题吗？我正在使用pycharm。

编辑：注意自我 - 休息一下。我一发布这个就发现了错字。在此之前，我遇到了 ide 和 line 结尾的问题。无论如何，谢谢:) 巨魔离开

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T23:46:27.370

注意这一行：

```
m += m 
```

你在增加`m`自己`m`；即你总是添加`0`到`0`.

你可能的意思是：

```
m += i 
```

# javascript - 谷歌地图地理编码位置不返回城镇

> ID：12700044
> 
> 赞同：0
> 
> 时间：2012-10-02T23:45:28.703
> 
> 标签：javascript, google-maps

我编写了一个函数来返回传递给该函数的任何 GPS 坐标的城镇，但由于某种原因它没有返回城镇。如果我提醒城镇，它会告诉我正确的城镇。

**代码：**

```
function getTown(latitude,longitude){

    // Define Geocoding 
    var geocoder = new google.maps.Geocoder(); 

    // Using the longitude / latitude get address details
    var latlng  = new google.maps.LatLng(latitude,longitude);

    geocoder.geocode({'latLng': latlng}, function(results, status){

        // If response ok then get details
        if (status == google.maps.GeocoderStatus.OK) {          
            var town = results[1].address_components[1].long_name;

            return town; // Returns Norwich when alerted using the e.g below.
        }           
    });
} 
```

**例子：**

```
getTown(52.649334,1.288052); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:01:41.217

这将是因为您正在从嵌套函数**内部返回城镇。**对 geocoder.geocode 的调用是异步的，并且会在一段时间后返回。您可以将其设置为如下变量：

```
var theTown = null;
function getTown(latitude,longitude){

// Define Geocoding 
var geocoder = new google.maps.Geocoder(); 

// Using the longitude / latitude get address details
var latlng  = new google.maps.LatLng(latitude,longitude);

geocoder.geocode({'latLng': latlng}, function(results, status){

    // If response ok then get details
    if (status == google.maps.GeocoderStatus.OK) {          
        var town = results[1].address_components[1].long_name;

        theTown = town; // Returns Norwich when alerted using the e.g below.
    }           
});
} 
```

# jquery - Jquery在多个单选按钮上显示隐藏

> ID：12700046
> 
> 赞同：1
> 
> 时间：2012-10-02T23:45:35.057
> 
> 标签：jquery, forms, hide, show, show-hide

Web 开发的新手，并且已经比我可以用这个特定的代码咀嚼更多。

我昨天问了一个关于它的问题，并且已经让它工作了大约 50%，答案是[jquery show/hide element on multiple radio button selection](https://stackoverflow.com/questions/12680111/jquery-show-hide-element-on-multiple-radio-button-selection/)

我要做的是根据收音机选择显示/隐藏一个贝宝按钮，因此客户将从类别 1 中选择一个选项，从类别 2 中选择一个选项，从类别 3 中选择一个选项。我的代码got 对第三个选项的选择采取行动，检查已检查的其他内容并显示与该选择相关的 paypal 按钮。

总而言之，我有 35 个按钮，在这个特定页面上我使用了 8个[http://infernodesign.co.nz/tempfiles/csl-dev/buy-online-half.php](http://infernodesign.co.nz/tempfiles/csl-dev/buy-online-half.php) 这是一个 jsfiddle [http://jsfiddle .net/spikeyheadedfreak/WwQW5/](http://jsfiddle.net/spikeyheadedfreak/WwQW5/)

问题是在完成三个单选组合并显示与之相关的按钮后，如果我更改三个选项中的前两个选项中的任何一个，它不会更改按钮，因此如果客户在单击后改变主意第三个单选按钮他们不能。

这是我用过的jquery的一个例子，很好，我是新手哈哈

```
 $('input:radio[value="Bone-and-Rolled-half"]').change(
  function(){
      if ($(this).is(':checked') && $('#leg-one-carvery').is(':checked')  && $('#loin-one-nolsette').is(':checked') ) {
            $('#submit,#button29,#button30,#button31,#button32,#button33,#button34,#button35').hide();
     $('#button28').show();

   }

   });  

  $('input:radio[value="French-Danish-half"]').change(
  function(){
      if ($(this).is(':checked') && $('#leg-one-carvery').is(':checked')  && $('#loin-one-nolsette').is(':checked') ) {
             $('#submit,#button28,#button30,#button31,#button32,#button33,#button34,#button35').hide();
     $('#button29').show();

   }

   });  

          $('input:radio[value="Bone-and-Rolled-half"]').change(
  function(){
      if ($(this).is(':checked') && $('#leg-one-carvery').is(':checked')  && $('#loin-one-backstrap').is(':checked') ) {
            $('#submit,#button28,#button29,#button31,#button32,#button33,#button34,#button35').hide();
     $('#button30').show();

   }

   });  

  $('input:radio[value="French-Danish-half"]').change(
  function(){
      if ($(this).is(':checked') && $('#leg-one-carvery').is(':checked')  && $('#loin-one-backstrap').is(':checked') ) {
             $('#submit,#button28,#button29,#button30,#button32,#button33,#button34,#button35').hide();
     $('#button31').show();

   }

   });  

          $('input:radio[value="Bone-and-Rolled-half"]').change(
  function(){
      if ($(this).is(':checked') && $('#leg-one-butterfly').is(':checked')  && $('#loin-one-nolsette').is(':checked') ) {
            $('#submit,#button28,#button29,#button30,#button31,#button33,#button34,#button35').hide();
     $('#button32').show();

   }

   });  

  $('input:radio[value="French-Danish-half"]').change(
  function(){
      if ($(this).is(':checked') && $('#leg-one-butterfly').is(':checked')  && $('#loin-one-nolsette').is(':checked') ) {
             $('#submit,#button28,#button29,#button30,#button31,#button32,#button34,#button35').hide();
     $('#button33').show();

   }

   });  

          $('input:radio[value="Bone-and-Rolled-half"]').change(
  function(){
      if ($(this).is(':checked') && $('#leg-one-butterfly').is(':checked')  && $('#loin-one-backstrap').is(':checked') ) {
            $('#submit,#button28,#button29,#button30,#button31,#button32,#button33,#button35').hide();
     $('#button34').show();

   }

   });  

  $('input:radio[value="French-Danish-half"]').change(
  function(){
      if ($(this).is(':checked') && $('#leg-one-butterfly').is(':checked')  && $('#loin-one-backstrap').is(':checked') ) {
             $('#submit,#button28,#button29,#button30,#button31,#button32,#button33,#button34').hide();
     $('#button35').show();

   }

   }); 
```

# git - 为什么 git 挂起 - 必须在命令后按两次 enter？

> ID：12700047
> 
> 赞同：16
> 
> 时间：2012-10-02T23:45:51.130
> 
> 标签：git, github, terminal

**编辑：摘要：在 Git 中输入的每个命令都会产生一个悬挂光标，如果在按下 enter 之前输入了任何内容，则会显示“输入错误”。没有命令产生任何结果。我尝试了全新安装，但没有任何结果。**

我对 Git*完全陌生。*不知道我在做什么。（我在 Mac 上）

我按照网站上的基本说明进行操作：

```
touch README.md
git init
git add README.md
git commit -m "first commit"
git remote add origin git@github.com:aerovistae/MetPetDB-Mobile.git
git push -u origin master 
```

但是只要我输入“git init”，终端就会挂起。我按回车，没有任何反应，提示没有开始新行......它只是开始一个没有闪烁光标的空白行。我再次按回车键，提示返回，在终端中跳过了一行，现在等待我的下一个命令。

我真的不明白这里发生了什么，我不确定是否有问题。

编辑：

Git 是从主下载页面安装的。

[http://git-scm.com/downloads](http://git-scm.com/downloads)

在我按回车键后，`git init`我在一个空白的新行上看到闪烁的光标，过了一会儿，我犹豫地输入`Testing`并再次按回车键。然后它在下一行吐了出来，`bad input: Testing`并向我展示了一个新的提示。

我尝试重新安装，但无济于事。我尝试了其他 git 命令，例如`git config --global user.name "Meeeee"`但没关系。它们都产生相同的悬挂。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T07:28:43.623

考虑到您使用的是 OS X，并且在[Keith Thompson](https://stackoverflow.com/users/827263/keith-thompson)的[评论](https://stackoverflow.com/questions/12700047/why-is-git-hanging-have-to-press-enter-twice-after-commands#comment17146902_12700047)之后，有可能

*   你有一个 git 的别名，调用`credential-osxkeychain`.
    请参阅“ [Git 无限期挂起 - 我认为与 osx credential helper 中断](https://stackoverflow.com/questions/12613315/git-hangs-indefinitely-broke-with-osx-credential-helper-i-think)”：

> 您已将 git 别名为其他东西（可能`alias git="git credential-osxkeychain"`），您应该`~.profile`查看是否可以删除别名。

*   或者你安装了几个 git：

> 看起来您将`git-credential-osxkeychain`包装器安装在错误的位置（您`cp`是`/usr/bin/git`不是安装了`/usr/local/git/bin`？）
> 要修复，您只需删除`/usr/bin/git`; 假设 git 仍然安装在`/usr/local/bin`它应该接管。
> 
> 它实际上已安装，`/usr/local/git/bin`所以我只是将它添加到我的`PATH`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T23:53:20.957

嗯，也许你在一个不可写的目录中？

通常你可以创建一个目录。

```
mkdir test
cd test
git init 
```

然后你在测试文件夹中初始化一个空的 GIT 存储库，你应该会看到一个名为**“.git”**的文件夹，它是隐藏的。也许您可以尝试构建一个裸存储库。

```
git --bare init 
```

但是你的问题听起来有点奇怪。你以所有权利运行你的命令吗？

# facebook-apps - 我必须使用我的个人 fb 帐户来管理我工作的应用程序吗？

> ID：12700052
> 
> 赞同：1
> 
> 时间：2012-10-02T23:46:50.537
> 
> 标签：facebook-apps, accounts

我需要在网站上为非营利组织创建一个应用程序，将信息上传到他们的 Facebook 页面。我读过企业无法创建应用程序，所以我真的迷路了。作为开发人员，我是否有必要为非营利组织开设个人帐户来管理此应用程序？这更多的是商业上的事情，而不是关于我个人的事情，那么为什么需要将它与我联系起来呢？还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:14:18.850

是的，应用程序需要与至少一个开发者帐户绑定 - 如果您不想这样做，您无需输入太多个人信息或将其用于除应用程序之外的任何其他内容。假设这是客户工作，您最终将把应用程序的所有权转让给非营利组织的某个人以进行管理，此外，您至少需要一个 Facebook 帐户来测试该应用程序是否正常运行。

除非ofc我误解了你的问题......

# xcode - 无法在捆绑基础国际化中加载 nib

> ID：12700056
> 
> 赞同：3
> 
> 时间：2012-10-02T23:47:10.597
> 
> 标签：xcode, internationalization, nib, base

我有一个在 xcode 4.5 中创建的项目，目标 ios 为 5.0，我使用了 Base Internationalization。Base Internationalization 将 nib 文件移动到 Base.lproj。

该项目在运行 ios 6 的 iPhone 4 和运行 ios 6 的 iPad 3 上运行。但是当我尝试在运行 ios 5.1.1 的 iPad 1 上运行它时会显示此错误。在目标的 Build Phase 部分，nib 文件显示为红色。

当我尝试将 nib 文件添加到 Build Phases 捆绑资源时，它们会添加但它们仍然是红色的（未找到）。我已经尝试了所有我知道的方法来将 nib 文件添加到包资源中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:59:25.970

Base Internationalization 仅在 iOS 6 中受支持。它会在 iOS 5 或更低版本尝试加载 Xib 时导致崩溃。

注意：奇怪的是，在带有 iOS 5 的模拟器上运行是可以的。那应该是个bug。

在发布我的应用程序后，我详细介绍了我的经验：http: [//samwize.com/2012/11/22/warning-do-not-use-base-internationalization-in-ios-5/](http://samwize.com/2012/11/22/warning-do-not-use-base-internationalization-in-ios-5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:46:10.123

我不知道英语（en）也必须本地化。当我本地化英语时，我能够将 nib 文件加载到包中。

我仍然收到'NSInternalInconsistencyException'，原因：'无法在包中加载NIB：'NSBundle（已加载）'，名称为'MainViewController_iPad''

但至少现在这不是因为 nib 文件不在捆绑包中。

# ruby-on-rails - Rails Active Record Query - 检索单个对象的问题

> ID：12700059
> 
> 赞同：0
> 
> 时间：2012-10-02T23:47:49.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我的目标是在 Rails Active Record 查询中返回单个对象。当表按 created_at 日期排序时，我想检索最新记录。因此，在下面的示例中，这意味着我要返回 ID 为 2 的记录。我不明白为什么下面的 4 个查询都返回相同的结果？

**销售表记录**

```
 +----+---------+-------+------------+----------------------------+
 | ID | user_id | price | sale_date  |         created_at         |
 +----+---------+-------+------------+----------------------------+
 |  1 |       1 |   200 | 2012-08-07 | 2012-10-02 23:01:46.706727 |
 |  2 |       1 |   400 | 2009-05-11 | 2012-10-02 23:09:01.342879 |
 +----+---------+-------+------------+----------------------------+ 
```

**查询：**

```
 <%= current_user.sales.order("created_at").last.price %> 
```

回报：200

```
 <%= current_user.sales.order("created_at DESC").last.price %> 
```

回报：200

```
 <%= current_user.sales.order("created_at ASC").last.price %> 
```

回报：200

```
 <%= current_user.sales.last.price %> 
```

回报：200

我也试过：

```
 <%= current_user.sales.last("created_at").price %> 
```

返回：`undefined method 'assert_valid_keys' for "created_at":String`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:53:42.547

如果`Sale`该类定义了 default_scope，并且它包含一个`order`子句，那么您可以使用

```
.reorder("created_at DESC") 
```

代替

```
.order("created_at DESC") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:05:46.297

如果你愿意，试试这个魔法咒语：

```
current_user.sales.sort_by(&:created_at).last 
```

# html - 是否可以将 url 参数传递给具有 method=post 的 HTML 表单？

> ID：12700060
> 
> 赞同：0
> 
> 时间：2012-10-02T23:47:50.620
> 
> 标签：html, url, post, coldfusion, parameters

假设我的表单如下所示：

```
<form name="myform" method="post" action="index.html">
   <input type="hidden" name="work" id="work1" value="20">
   <input type="hidden" name="play" id="play1" value="10">
   <input type="submit" name="submit">
</form> 
```

单击提交发送`form.work`到`form.play`index.html。在那里，工作和娱乐的价值被用在一个特定的公式中。

现在，我需要将指向该页面的链接发送给几个具有预定义工作和娱乐价值的人。我试过这个：

```
 www.mysite.com/index.html?work=20&play=10 
```

不幸的是，这不起作用。有什么办法可以做到这一点？

仅供参考，我使用的是 ColdFusion 服务器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T01:21:20.897

ColdFusion 有一个称为 URL 的范围和一个称为 FORM 的范围，每个 HTTP 方法分别对应一个 post/get。其他语言将它们混杂在一起。撇开优点/缺点不谈，一些 CFML 框架实际上会为您组合它们，并将它们作为“请求上下文”的一部分提供。

在这种情况下，您需要做的是检查您的值的 URL 和 FORM 范围。或者，您可以将表单方法更改为“获取”，以便您始终拥有 URL 变量而不是表单变量。这样，您将始终使用 URL.variables 而不是 Form.variable

cfparam> 为您设置默认值，以便变量存在。类似于 cfset>，但仅在缺少值时设置。

因此，在代码的顶部：

```
//this sets the url value to always be blank unless something is passed in
<cfparam name="url.work" default="" />
//this sets the form value to the url value by default
<cfparam name="form.work" default="#url.work#" />
//you should never actually output user content to the screen, but here it is
<cfoutput>#form.work#</cfoutput> 
```

与往常一样，永远不要相信用户提供的内容，在数据库中使用数据或将内容发送回浏览器之前对其进行清理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T10:59:45.867

您遇到的问题是您尝试在 HTML 页面上使用 ColdFusion。'index.html' 将不会被 ColdFusion 解析，除非您专门更改了您的 Web 服务器以引导 ColdFusion 解析的 .html 文件。

1.  将“index.html”更改为“index.cfm”
2.  通过 URL 或 FORM 范围访问传入的变量。如果表单已发布，则使用 FORM 范围（form.work 或 form.play）。如果表单是通过 url (?work=20&play=10) 完成的，则使用 URL 范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:50:15.610

是的，您通常可以传递查询字符串参数。它们只是构成所请求 URL 的一部分。

服务器端框架是否使它们可用取决于框架。我希望大多数框架都会公开它们，即使请求是 POST 请求。在 ASP.Net 中可用。我不确定冷聚变。

> 方法=“发布”

通知浏览器将表单变量作为 post 参数放置在 HTTP 请求中。它并不排除您还包括查询字符串变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T23:50:35.697

url 中的变量称为`GET`变量，ColdFusion 中必须有某种方式来检索它们。

# c# - 如何判断是否使用 Google AnalyticsService 删除了网络资产？

> ID：12700061
> 
> 赞同：0
> 
> 时间：2012-10-02T23:47:59.310
> 
> 标签：c#, google-api, google-analytics-api

我正在使用 Google Analytics Api从我的 Analytics 帐户中获取[网络资源信息。](https://developers.google.com/apis-explorer/#s/analytics/v3/analytics.management.webproperties.list)

当我登录分析时，我只有一个网站，但通过 api 我得到了几个（旧的和已删除的网站）

我的代码是这样的：

```
 var provider = new WebServerClient(GoogleAuthenticationServer.Description)
                           {
                               ClientIdentifier = _appId,
                               ClientSecret = _appSecret
                           };

        var auth = new OAuth2Authenticator<WebServerClient>(provider, x => new AuthorizationState { AccessToken = token });
        var analyticsService = new AnalyticsService(auth);

        var accounts = analyticsService.Management.Accounts.List().Fetch();

        foreach (var account in accounts.Items)
        {
            var webProperties = analyticsService.Management.Webproperties.List(account.Id).Fetch();

            // todo: determine if web property is still in use?
        } 
```

从代码中我如何判断哪些仍然处于活动状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:48:04.533

因此，经过更多的挖掘。

似乎没有标志或类似的东西表明它已被删除，但如果您继续深入研究结果集，您会注意到在配置文件级别，没有子项的配置文件似乎是已删除的。

这是有道理的，我猜不会有与已删除的配置文件相关联的配置文件。

```
var provider = new WebServerClient(GoogleAuthenticationServer.Description)
                           {
                               ClientIdentifier = _appId,
                               ClientSecret = _appSecret
                           };

        var auth = new OAuth2Authenticator<WebServerClient>(provider, x => new AuthorizationState { AccessToken = token });
        var analyticsService = new AnalyticsService(auth);

        var accounts = analyticsService.Management.Accounts.List().Fetch();
        var result = new List<Profile>();

        foreach (var account in accounts.Items)
        {
            var webProperties = analyticsService.Management.Webproperties.List(account.Id).Fetch();

            foreach (var webProperty in webProperties.Items)
            {
                var profiles = analyticsService.Management.Profiles.List(account.Id, webProperty.Id).Fetch();

                if (profiles.Items != null && profiles.Items.Any())
                {
                    // these are the ones we want
                    result.AddRange(profiles.Items);
                }
            }

        }
    } 
```

# java - 需要在eclipse里面调试一个swing应用

> ID：12700073
> 
> 赞同：1
> 
> 时间：2012-10-02T23:50:37.523
> 
> 标签：java, eclipse, swing

我创建了一个新的 Java 项目并导入了一些与 swing 相关的文件。一切似乎都可以编译，但我不知道从 Eclipse 中调试 Swing 应用程序的步骤是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:57:05.440

调试一个 Swing 应用程序实际上与调试任何其他 Java 应用程序没有什么不同。单击调试菜单（工具栏上的错误小图）-> 调试配置...并选择 Java 应用程序。如果您想在应用程序启动后立即中断，您可以选择“停止在主程序中”，否则设置断点。

快乐的错误狩猎！

# android - Android / Nexus 7 为 Geocoder.getFromLocationName() 抛出 IOException

> ID：12700077
> 
> 赞同：3
> 
> 时间：2012-10-02T23:51:33.730
> 
> 标签：android, google-geocoder

我正在尝试使用 Geocoder.getFromLocationName() 并且虽然相同的搜索字符串在这些实际设备上工作正常：

*   连结 1 (2.3.6)
*   三星 Galaxy SIII (4.0.4)
*   银河连结 (4.1.1)

在我的 Nexus 7 (4.1.1) 上，该方法抛出“服务不可用”IOException

这是简化的代码：

```
Geocoder geocoder = new Geocoder(mContext);
List<Address> addressFromSearch = geocoder.getFromLocationName("10918", 1); 
```

我还尝试了使用移动数据和仅限 wifi 的每台设备，它们都运行良好。到目前为止，唯一不起作用的设备/操作系统是 Nexus 7。我还检查了 Geocoder.isPresent() - 它返回 true。

关于我可能遗漏的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:04:55.597

在 Galaxy Nexus OTA 更新到 4.1.2 之后，这个问题终于解决了。这是关于 Android 版本 4.1.1 的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T19:33:42.900

我也在 samsung galaxy tab 2 android 4.0.4 上遇到了这个问题，我会看看是否有更新，但我肯定会投票解决这个问题。

看起来我的设备有解决方法！

如果你在三星 Galaxy Tab 2 上重新启动你的机器......它实际上开始工作了！......这就是我所说的解决方法！

# tsql - TSQL：将旧的 where 子句转换为 Join 语法

> ID：12700079
> 
> 赞同：0
> 
> 时间：2012-10-02T23:52:12.300
> 
> 标签：tsql, join

我有这个查询，我想将它放入“现代连接语法”中

```
SELECT  
    t.acct_order, 
    c1.acct_desc, 
    c1.position, 
    c1.end_pos,
    Budget = sum(((g.data_set-1)/2)*(g.debits - g.credits)),
    Actual = sum(((g.data_set-3)/-2)*(g.debits - g.credits)) 

FROM    
    glm_chart c1, 
    glm_chart c2, 
    glh_deptsum g, 
    #TEMPTABLE t

WHERE   
        g.acct_uno=c2.acct_uno  
    and c1.acct_code = t.acct_code  
    and c2.position between c1.position and c1.end_pos  
    and g.debits-g.credits<>0 
    and c1.book=1  
    and g.data_set in (1, 3)  
    and (g.period between 201201 and 201212) 

GROUP   by  t.acct_order, 
            c1.acct_desc, 
            c1.position,
            c1.end_pos 

ORDER   by  t.acct_order 
```

这就是我要做的，但正如你所看到的，我似乎无法识别表 glh_deptsum (g) 到 C1 或 T 的连接

```
SELECT  
    t.acct_order, 
    c1.acct_desc, 
    c1.position, 
    c1.end_pos,
    sum(((g.data_set-1)/2)*(g.debits - g.credits))  AS Budget,
    sum(((g.data_set-3)/-2)*(g.debits - g.credits)) AS Actual, 

FROM         #TEMPTABLE T
INNER JOIN  glm_chart c1 ON c1.acct_code = t.acct_code
INNER JOIN  glh_deptsum g <---- HELP WHAT GOES HERE ---------
INNER JOIN  glm_chart c2 ON c2.position between c1.position and c1.end_pos AND g.acct_uno=c2.acct_uno

WHERE   
    g.debits - g.credits <> 0 
    AND c1.book=1  
    AND g.data_set in (1, 3) 
    AND (g.period between 201201 and 201212) 

GROUP BY t.acct_order, 
            c1.acct_desc, c1.position,c1.end_pos 

ORDER BY t.acct_order 
```

谁能让我知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T23:56:59.613

看起来应该是这样的：

```
SELECT t.acct_order, 
    c1.acct_desc, 
    c1.position, 
    c1.end_pos,
    Budget = sum(((g.data_set-1)/2)*(g.debits - g.credits)),
    Actual = sum(((g.data_set-3)/-2)*(g.debits - g.credits)) 
FROM #TEMPTABLE t
INNER JOIN glm_chart c1
  ON t.acct_code = c1.acct_code
INNER JOIN glm_chart c2
  ON c2.position between c1.position and c1.end_pos  
INNER JOIN glh_deptsum g
  ON c2.acct_uno = g.acct_uno
WHERE g.debits-g.credits<>0 
    and c1.book=1  
    and g.data_set in (1, 3)  
    and (g.period between 201201 and 201212) 
GROUP by  t.acct_order, 
            c1.acct_desc, 
            c1.position,
            c1.end_pos 
ORDER   by  t.acct_order 
```

# jquery - 按照 jquery 站点上的描述进行原地编辑不起作用

> ID：12700081
> 
> 赞同：0
> 
> 时间：2012-10-02T23:52:24.780
> 
> 标签：jquery

[这是从edit-in-place-using-ajax](http://docs.jquery.com/Tutorials:Edit_in_Place_with_Ajax)直接提升的，但它不起作用。谁能建议为什么？保存按钮和取消按钮都不做任何事情。我认为单击时的 saveButton 和 cancelButton 不会触发分配给其单击事件的 jquery 代码。

```
<script src="/jscript/jquery-1.7.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){

    $("#editInPlace").click(function(){
        var textarea = '<div><textarea rows="5" cols="30">' + $(this).html() + '</textarea>';
        var button = '<div><input type="button" value="SAVE" class="saveButton" /> OR <input type="button" value="CANCEL" class="cancelButton"/></div></div>';
        var revert = $(this).html();
        $(this).after(textarea+button).remove();
    });
    $('.saveButton').click(function(){saveChanges(this, false);});
    $('.cancelButton').click(function(){saveChanges(this, revert);});
    function saveChanges(obj, cancel) {
        if (!cancel) {
            var t = $(obj).parent().siblings(0).val();
            alert('new text='+t);
        }else {
            var t = revert;         //orig code had cancel;
            }
        $(obj).parent().parent().after('<div id="editInPlace">'+t+'</div>').remove()
    }

});
</script>

 <div id='editInPlace'>we are going to change this comment.</div> 
```

为@nbrook 添加图像（基于他建议的代码）....

初始显示 ->![初始显示](../Images/8ecc97c9fd4e0e5e0bd4132183bc094c.png)

第一次点击->![第一次点击](../Images/df5786764baaa0fc408c14269e0c3bc8.png)

在文本区域内第二次单击 - >![在第二次点击...](../Images/b32fe3ad90b7e19dd790bd45d2b2406a.png)

这继续……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:02:57.010

看起来您正在尝试将事件处理程序绑定到页面加载时不存在的元素。更改这些：

```
$('.saveButton').click(function(){saveChanges(this, false);});
$('.cancelButton').click(function(){saveChanges(this, revert);}); 
```

至：

```
$('div#editInPlace').on('click', 'input.saveButton', function(){saveChanges(this, false);});
$('div#editInPlace').on('click', 'input.cancelButton', function(){saveChanges(this, revert);}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:27:53.737

这似乎不是一个很好的教程，即使是基础知识。请注意变量的范围：当您`var revert`在一个`function() {}`包装中声明时，它在外部范围或其他块内部将*不可*`function() {}`用，除非它们嵌套在原始范围中。因此，在您的所有其他功能中，`revert`都不存在。引用它会导致 a `ReferenceError`，并且 JS 解释器会中断所有错误，因此您不会收到警报。这应该会显示在您的 JS 错误控制台中。试试这个改变：

```
$(document).ready( function() {
    var revert;

    $("#editInPlace").click( function() {
        var textarea = '<div><textarea rows="5" cols="30">' + $(this).html()
                     + '</textarea>';
        var button = '<div><input type="button" value="SAVE" class="saveButton" />'
                   + 'OR <input type="button" value="CANCEL" class="cancelButton"/>'
                   + '</div></div>';

        revert = $(this).html();

        //$(this).after(textarea+button).remove();

        // to have this work more than once, better to do (corresponding change below)
        $(this).html(textarea+button);
    });

    // use delegated event handler for dynamically generated elements
    $('#editInPlace').on( 'click', '.saveButton', function() {
        saveChanges(this, false);
        return false;
    })
    .on( 'click', '.editButton', function() {
        saveChanges(this, revert);
        return false;
    }) // (you could also combine these into a single handler, based on `this`)

    .on( 'click', 'textarea', function() {
        return false;
    });
});

// no need for this in ready handler
function saveChanges(obj, cancel) {
    if (!cancel) {
        var t = $(obj).parent().siblings(0).val();
        alert('new text='+t);
    } else {
        var t = cancel;  // use cancel, that's why you pass it in...revert not in scope
        ///var t = revert; // orig code had cancel;
    }

    // If you use the approach below, your div clicks will only work once
    //$(obj).parent().parent().after('<div id="editInPlace">'+t+'</div>').remove()

    // Instead, do:
    $(obj).closest('#editInPlace').html(t); // replace the current html with the old stuff
} 
```

~~请注意，我假设您实际上在标记中有保存和取消按钮，只是选择不将它们包含在您的帖子中，因为它们并不真正相关......~~

**更正：**弄清楚你在哪里添加它们......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:46:49.860

你好结束这个问题。我想，在这上面花时间太多了。我决定使用 jeditable。它看起来不错且足够小，可以加载到浏览器上。

感谢大家的帮助和时间。抱歉，我不得不更改路线并选择 jeditable 库。它有比我想要的更多的代码和选项，但是，我用上面的代码（和许多更改）进行的测试产生了这个或那个错误的效果。

# xcode - 显示来自相机胶卷 xcode 的风景图像

> ID：12700083
> 
> 赞同：0
> 
> 时间：2012-10-02T23:53:03.607
> 
> 标签：xcode, camera, landscape, xcode4.5

我正在从相机胶卷中提取图像以显示在我的应用程序中，人像拍摄的照片效果很好，但风景图像却变得很时髦。

```
UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];        

displayPhoto.image = image; 
```

我已经想出了如何检查图片本身的长度和宽度，因此可以执行 if else 语句来仅旋转风景图片......但是试图找到实际旋转图像的工作代码很困难。[我在这里](https://stackoverflow.com/questions/9324130/iphoneimage-captured-from-camera-rotate-90-degree-automatically)找到了答案，但他正在调用不存在的函数，显然代码对我不起作用：p。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:00:52.983

你必须使用

```
 [displayPhoto setContentMode:UIViewContentModeScaleAspectFit]; 
```

# c++ - 使用 SDL_ttf 和 OpenGL，TTF_RenderUTF8_Blended 打印红色矩形

> ID：12700085
> 
> 赞同：4
> 
> 时间：2012-10-02T23:53:10.910
> 
> 标签：c++, opengl, sdl, sdl-ttf

当我使用我渲染我的文本时，`TTF_RenderUTF8_Blended`我在屏幕上获得了一个实心矩形。颜色取决于我选择的颜色，在我的例子中矩形是红色的。

![结果使用 TTF_RenderUTF8_Blended](../Images/6c08325f58e5e5b63b03f256a1efde66.png)

# 我的问题

我错过了什么？似乎我没有从用 生成的表面获得正确的 Alpha 值`SDL_DisplayFormatAlpha(TTF_RenderUTF8_Blended( ... ))`，或者我是这样吗？有人认识或知道这个问题吗？

## 附加信息

如果我使用`TTF_RenderUTF8_Solid`或`TTF_RenderUTF8_Shaded`文本绘制正确，但当然没有混合。

我还在屏幕上绘制其他纹理，所以我最后绘制文本以确保混合将考虑当前表面。

**编辑：**`SDL_Color g_textColor = {255, 0, 0, 0};` <-- 我尝试了使用和不使用 alpha 值，但我得到了相同的结果。

我试图在不删除太多细节的情况下总结代码。以“g_”为前缀的变量是全局变量。

## 初始化（）函数

```
// This function creates the required texture.
bool Init()
{
    // ...

    g_pFont = TTF_OpenFont("../arial.ttf", 12);
    if(g_pFont == NULL)
        return false;

    // Write text to surface
    g_pText = SDL_DisplayFormatAlpha(TTF_RenderUTF8_Blended(g_pFont, "My first Text!", g_textColor)); //< Doesn't work

    // Note that Solid and Shaded Does work properly if I uncomment them.
    //g_pText = SDL_DisplayFormatAlpha(TTF_RenderUTF8_Solid(g_pFont, "My first Text!", g_textColor));
    //g_pText = SDL_DisplayFormatAlpha(TTF_RenderUTF8_Shaded(g_pFont, "My first Text!", g_textColor, g_bgColor));

    if(g_pText == NULL)
        return false;

    // Prepare the texture for the font
    GLenum textFormat;
    if(g_pText->format->BytesPerPixel == 4)
    {
        // alpha
        if(g_pText->format->Rmask == 0x000000ff)
            textFormat = GL_RGBA;
        else
            textFormat = GL_BGRA_EXT;
    }

    // Create the font's texture
    glGenTextures(1, &g_FontTextureId);
    glBindTexture(GL_TEXTURE_2D, g_FontTextureId);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
    glTexImage2D(GL_TEXTURE_2D, 0, g_pText->format->BytesPerPixel, g_pText->w, g_pText->h, 0, textFormat, GL_UNSIGNED_BYTE, g_pText->pixels);

    // ...
} 
```

## DrawText() 函数

```
// this function is called each frame
void DrawText()
{
    SDL_Rect sourceRect;
    sourceRect.x = 0;
    sourceRect.y = 0;
    sourceRect.h = 10;
    sourceRect.w = 173;

    // DestRect is null so the rect is drawn at 0,0
    SDL_BlitSurface(g_pText, &sourceRect, g_pSurfaceDisplay, NULL);

    glBindTexture(GL_TEXTURE_2D, g_FontTextureId);
    glEnable(GL_TEXTURE_2D);
    glEnable(GL_BLEND);
    glBegin( GL_QUADS );

        glTexCoord2f(0.0f, 0.0f);
        glVertex2f(0.0f, 0.0f);

        glTexCoord2f(0.0f, 1.0f);
        glVertex2f(0.0f, 10.0f);

        glTexCoord2f(1.0f, 1.0f);
        glVertex2f(173.0f, 10.0f);

        glTexCoord2f(1.0f, 0.0f);
        glVertex2f(173.0f, 0.0f);

    glEnd();
    glDisable(GL_BLEND);
    glDisable(GL_TEXTURE_2D);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T02:20:44.060

你犯了一个相当普遍的错误。它在 OpenGL 端。

当您在 中渲染纹理四边形时`DrawText()`，您启用了 OpenGL 的混合功能，但您从未指定混合功能（即应该*如何*混合）！

您需要此代码在 OpenGL 中启用常规 alpha 混合：

```
glEnable( GL_BLEND );
glBlendFunc( GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA ); 
```

该信息以前在 OpenGL 网站上，但我现在找不到。

这应该会阻止它出现纯红色。其他人工作的原因是因为它们不是 alpha 混合的，它们实际上只是没有 alpha 的红黑图像，所以混合功能无关紧要。但混合后的仅包含红色，并带有 alpha 通道以使其不那么红色。

不过，我注意到您的程序中还有其他一些小问题。

在该`DrawText()`函数中，您使用 SDL 对表面进行 blitting，*并*使用 OpenGL 进行渲染。使用 OpenGL 时不应使用常规 SDL 位图；它不起作用。所以这条线不应该在那里：

```
SDL_BlitSurface(g_pText, &sourceRect, g_pSurfaceDisplay, NULL); 
```

此外，此行会泄漏内存：

```
g_pText = SDL_DisplayFormatAlpha( TTF_RenderUTF8_Blended(...) ); 
```

`TTF_RenderUTF8_Blended()`返回一个指向 的指针`SDL_Surface`，该指针必须用 释放`SDL_FreeSurface()`。由于您将它传递给`SDL_DisplayFormatAlpha()`，因此您无法跟踪它，并且它永远不会被释放（因此内存泄漏）。

好消息是这里不需要`SDL_DisplayFormatAlpha`，因为`TTF_RenderUTF8_Blended`无论如何都会返回一个带有 alpha 通道的 32 位表面！因此，您可以将此行重写为：

```
g_pText = TTF_RenderUTF8_Blended(g_pFont, "My first Text!", g_textColor); 
```

# mysql - 动态确定最适合列的数据类型

> ID：12700088
> 
> 赞同：6
> 
> 时间：2012-10-02T23:53:21.703
> 
> 标签：mysql, dynamic-columns

好的，我知道这看起来很奇怪。但是，我试图弄清楚如何动态确定将列设置为在 MySql 数据库中使用 SQL 查询的数据类型。

我有许多通过脚本动态创建的表。我最初创建它们，并将所有列的大小设置为长度为 2000 的“文本”数据类型。我这样做是为了不必担心在插入过程中实际进入表的内容。为表插入数据后，我会遍历表，检查存储的数据的最大长度以及为每个列和表存储的数据类型。有很多表和很多列。我想出了一个流程——但是，我有点担心它会错过其中一次。数据库有大约 1250 多个表和大约 300*多万行*总共。真正不幸的是，数据类型永远不能保证是一致的。曾经。这就是为什么我必须在导入后处理它们。

基本上，我运行一个查询来获取该列的 MAX CHAR_LENGTH 并存储它。然后，我运行一个查询，选择数据库中的 N 条记录，然后检查它们是数字还是字符。我知道我知道。不是最好的方法。

由于我绝对无法确定传入的数据（真是一场噩梦），我试图弄清楚是否有一种方法可以查询列以查看其中驻留的数据类型？我不是在寻找查询来查看列是如何定义的（显然，因为我已经用“通用”类型的“文本”定义了它）。

我知道我可以在导入过程中在脚本中处理这个问题，但我希望只运行一个 ALTER TABLE 命令而不是编写一堆额外的代码。

非常感谢任何想法或想法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T02:52:43.783

使用[`PROCEDURE ANALYSE()`](http://dev.mysql.com/doc/refman/5.6/en/procedure-analyse.html)选项：

```
SELECT * FROM `tablename` PROCEDURE ANALYSE(); 
```

这是一个输出示例：

```
mysql> select * from zip procedure analyse() \G
*************************** 1\. row ***************************
             Field_name: zip.zip
              Min_value: 00501
              Max_value: 99950
             Min_length: 5
             Max_length: 5
       Empties_or_zeros: 0
                  Nulls: 0
Avg_value_or_avg_length: 5.0000
                    Std: NULL
      Optimal_fieldtype: MEDIUMINT(5) UNSIGNED NOT NULL
*************************** 2\. row ***************************
             Field_name: zip.city
              Min_value: Aaronsburg
              Max_value: Zwolle
             Min_length: 3
             Max_length: 26
       Empties_or_zeros: 1009
                  Nulls: 0
Avg_value_or_avg_length: 8.3869
                    Std: NULL
      Optimal_fieldtype: VARCHAR(26) NOT NULL
*************************** 3\. row ***************************
             Field_name: zip.state_id
              Min_value: AA
              Max_value: WY
             Min_length: 2
             Max_length: 2
       Empties_or_zeros: 0
                  Nulls: 0
Avg_value_or_avg_length: 2.0000
                    Std: NULL
      Optimal_fieldtype: ENUM('AA','AE','AK','AL','AP','AR','AS','AZ','CA','CO','CT','DC','DE','FL','FM','GA','GU','HI','IA','ID','IL','IN','KS','KY','LA','MA','MD','ME','MH','MI','MN','MO','MP','MS','MT','NC','ND','NE','NH','NJ','NM','NV','NY','OH','OK','OR','PA','PR','PW','RI','SC','SD','TN','TX','UT','VA','VI','VT','WA','WI','WV','WY') NOT NULL
*************************** 4\. row ***************************
             Field_name: zip.latitude
              Min_value: -7.209975
              Max_value: 71.299525
             Min_length: 2
             Max_length: 8
       Empties_or_zeros: 1009
                  Nulls: 0
Avg_value_or_avg_length: 37.599173975674866
                    Std: 7.949323125673274
      Optimal_fieldtype: FLOAT NOT NULL
*************************** 5\. row ***************************
             Field_name: zip.longitude
              Min_value: -176.63675
              Max_value: -64.734694
             Min_length: 3
             Max_length: 8
       Empties_or_zeros: 1009
                  Nulls: 0
Avg_value_or_avg_length: -88.79028976104503
                    Std: 20.6017874416888
      Optimal_fieldtype: FLOAT NOT NULL
*************************** 6\. row ***************************
             Field_name: zip.timezone_id
              Min_value: 3
              Max_value: 11
             Min_length: 1
             Max_length: 2
       Empties_or_zeros: 0
                  Nulls: 1009
Avg_value_or_avg_length: 8.1563
                    Std: 1.0430
      Optimal_fieldtype: ENUM('3','5','6','7','8','9','11')
*************************** 7\. row ***************************
             Field_name: zip.dst
              Min_value: 1
              Max_value: 1
             Min_length: 1
             Max_length: 1
       Empties_or_zeros: 2618
                  Nulls: 0
Avg_value_or_avg_length: 0.9376
                    Std: 0.2419
      Optimal_fieldtype: ENUM('0','1') NOT NULL
*************************** 8\. row ***************************
             Field_name: zip.status
              Min_value: Active
              Max_value: Active
             Min_length: 6
             Max_length: 6
       Empties_or_zeros: 0
                  Nulls: 0
Avg_value_or_avg_length: 6.0000
                    Std: NULL
      Optimal_fieldtype: ENUM('Active') NOT NULL
*************************** 9\. row ***************************
             Field_name: zip.created
              Min_value: 2010-09-25 11:43:41
              Max_value: 2011-05-13 15:56:00
             Min_length: 19
             Max_length: 19
       Empties_or_zeros: 0
                  Nulls: 0
Avg_value_or_avg_length: 19.0000
                    Std: NULL
      Optimal_fieldtype: ENUM('2010-09-25 11:43:41','2010-09-25 11:43:56','2010-11-01 09:49:32','2011-05-13 15:56:00') NOT NULL
*************************** 10\. row ***************************
             Field_name: zip.updated
              Min_value: 2010-09-24 23:13:41
              Max_value: 2011-05-13 15:56:00
             Min_length: 19
             Max_length: 19
       Empties_or_zeros: 0
                  Nulls: 0
Avg_value_or_avg_length: 19.0000
                    Std: NULL
      Optimal_fieldtype: ENUM('2010-09-24 23:13:41','2010-09-24 23:13:56','2010-09-29 12:40:56','2010-11-01 09:49:32','2011-05-13 15:56:00') NOT NULL
10 rows in set (0.15 sec) 
```

# xml - 在 xml 文档中声明常量

> ID：12700092
> 
> 赞同：0
> 
> 时间：2012-10-02T23:54:03.087
> 
> 标签：xml, xsd

我有一个这样的 xml 文档：

```
<sample xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="structure">
    <film>
        <!-- The act1, act2 and act3 play for 27000 milli seconds each-->
        <sequence id="film1">
            <condition time="&lt;=27000"> PLAY </condition>
            <condition time="&gt;27000"> STOP </condition>
        </sequence>
            <sequence id="film2">
            <condition time="&lt;=27000"> PLAY </condition>
            <condition time="&gt;27000"> STOP </condition>
        </sequence>
        </film>
        </sample> 
```

我有这个时间属性和一些硬编码值。我有大约 20 个标签“电影”，我不想在所有 20 部电影中硬编码这些数字。请让我知道是否有办法声明一些常量并使用“LONG”、“SHORT”之类的东西来代替这些数字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:28:03.740

XML 中没有内置机制可以做到这一点。您有两种选择来完成此操作：

1.  修改处理 XML 的应用程序以识别标记以定义变量，然后在处理数据时替换这些值。
2.  通过将值替换为变量的 XSL 样式表预处理 XML

# python - django ORM 中的自定义 SQL：根据一个查询中的另一个过滤列表过滤列表

> ID：12700100
> 
> 赞同：1
> 
> 时间：2012-10-02T23:55:35.850
> 
> 标签：python, django, orm

我想要做的是检索 CarModel 对象的过滤列表，其中 carfield 在另一个模型的字段列表中，比如 GasModel。但是也必须过滤掉一组 GasModel，到一个列表中，其中 GasModel 中的一个字段必须等于 CarModel 中的另一个字段（不同的字段）。

所以几乎我想过滤一个列表，以便该列表的一个字段包含在不同模型的字段的单独列表中，并且该列表（第二个模型）也被过滤（但由第一个的不同字段（汽车模型）。我希望这一切都在一个查询集调用中。

这就是我到目前为止所拥有的，我相信的错误是

```
WHERE anothergasfield = another_field_from_car_carmodel 
```

我是否缺少 FROM 关键字或其他内容？如果是这样，它应该去哪里？

```
CarModel.objects.extra(where = ['carfield IN (SELECT gasfield FROM\
    gas_gasmodel WHERE anothergasfield = another_field_from_car_carmodel)'])
      .order_by(...) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T02:45:20.417

这个怎么样：

```
CarModel.objects.extra(where = ['carfield IN (SELECT gasfield FROM\
    gas_gasmodel WHERE anothergasfield = carmodel.another_field_from_car_carmodel)'])
      .order_by(...) 
```

只需将 替换为`carmodel`的表名即可`CarModel`。通常是`{{ app_name }}_{{ model_name }}`.

您有嵌套`select`语句，其中的字段来自`gas_gasmodel`表，而不是来自`carmodel`表。

# extjs - Extjs：如何防止 checkboxModel 取消选择 pagingtoolbar 页面更改上的行？

> ID：12700101
> 
> 赞同：0
> 
> 时间：2012-10-02T23:55:39.660
> 
> 标签：extjs, extjs4, extjs4.1

为什么[CheckboxModel在使用](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.selection.CheckboxModel)[分页工具栏](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.toolbar.Paging)时会取消选择页面更改上的所有选定行？如何停止在页面更改时取消选择行？

我看到有一个 pruneRemoved 可用于防止修剪节点，我将其设置为 false，但仍会触发取消选择。不知道还有什么可以尝试的。

我假设 checkboxmodel 向商店注册，或者可能在商店更改时通知分页工具栏......然后取消选择所有内容？为什么？我需要防止这种情况。

编辑：我不希望 deselectAll 被解雇的原因是；我在选择和取消选择上附加了一个处理程序。选择将行添加到另一个网格，取消选择删除它们。因此，当用户选中一个复选框时，该行被添加到另一个网格中，当他们取消选中它时，它会从该网格中删除。通过触发取消选择的网格，当存储发生更改时，我会丢失另一个网格中保存的所有行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:34:55.987

我不确定这是否是正确的方法，但它对我有用。

我所做的是创建自己的 Ext.grid.View。我扩展了 ext.view.Table 并覆盖了 onMaskBeforeShow 方法。这是在网格选择模型上调用取消全选的方法。如您所见，我在这里发表了评论

```
Ext.define('Ext.grid.SteveView', {
    extend: 'Ext.view.Table',
    alias: 'widget.stevegridview',

    onMaskBeforeShow: function(){
        var me = this,
            loadingHeight = me.loadingHeight;

        //me.getSelectionModel().deselectAll();
        me.all.clear();
        if (loadingHeight && loadingHeight > me.getHeight()) {
            me.hasLoadingHeight = true;
            me.oldMinHeight = me.minHeight;
            me.minHeight = loadingHeight;
            me.updateLayout();
        }
    }
}); 
```

包括上面的脚本，然后当你创建一个网格时，将 viewType 更改为 stevegridview，或者你决定命名它的任何名称

```
 {
        xtype: 'grid', 
        viewType:'stevegridview',
        store:'some store'
        ...
    } 
```

将使用新的视图类型，并调用新的 onMaskBeforeShow()。

# mysql - 如何加快使用 BETWEEN 条件的 SQL 查询？

> ID：12700102
> 
> 赞同：4
> 
> 时间：2012-10-02T23:55:56.043
> 
> 标签：mysql, sql, optimization

我有一个看起来像这样的表：

```
ID    StartRange    EndRange
----------------------------
 1        1            3
 2        4            8
 3        9           12 
```

依此类推，这样就有超过 500 万条记录。最后一条记录如下所示：

```
ID        StartRange    EndRange
---------------------------------
5235976   9894727374   9894727378 
```

换句话说，每条记录的`StartRange`and`EndRange`永远不会重叠。

我需要做一个查询，找到与范围匹配的数字的相应 ID：

```
SELECT ID FROM BigTable WHERE '5000000' BETWEEN StartRange AND EndRange; 
```

不幸的是，这个查询需要几秒钟才能完成。我需要对其进行优化，使其花费最少的执行时间。我做了一些研究，看起来添加索引没有帮助，因为它仅适用于数字恰好是`StartRange`or`EndRange`值，但不是介于两者之间。

有没有人有任何提示或技巧可以用来缩短执行时间？理想情况下，如果可能的话，我希望它低于 1 秒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T00:05:53.393

我在 IP 地址范围表上遇到了类似的问题，下面的内容确实对我有用。您至少需要一个关于 StartRange 的索引。

```
SELECT ID
FROM BigTable
INNER JOIN
  (SELECT MAX(StartRange) AS start
   FROM BigTable
   WHERE StartRange <= @Target) AS s
ON StartRange = s.start
WHERE EndRange >= @Target; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T00:07:57.573

向表中添加复合索引。该索引必须由`StartRange`和`EndRange`字段组成：

```
ALTER TABLE `BigTable` ADD INDEX ( `StartRange` , `EndRange` ); 
```

然后`EXPLAIN`在您的查询中使用以检查是否使用了新索引：

```
EXPLAIN SELECT ID FROM BigTable WHERE '5000000' BETWEEN StartRange AND EndRange; 
```

输出显示 MySQL 无法在此查询中使用新索引。然后，您可以重写您的初始查询：

```
SELECT ID FROM BigTable WHERE StartRange>='5000000' AND EndRange<='5000000'
                            OR EndRange>='5000000' AND StartRange<='5000000' 
```

这个新查询将返回与您的初始查询相同的结果。好消息是`EXPLAIN`：

```
EXPLAIN SELECT ID FROM BigTable WHERE StartRange>='5000000' AND EndRange<='5000000'
                            OR EndRange>='5000000' AND StartRange<='5000000' 
```

现在的输出显示 MySQL 能够使用新索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T23:58:42.827

索引应该可以很好地处理这个查询，即使该值与`StartRange`and不匹配`EndRange`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T00:20:42.363

索引不会加速此查询。索引可用于 BETWEEN 搜索，但只能用于“正确”的搜索（例如`StartRange BETWEEN 10000 AND 20000`）。

为了加快这个查询，你将不得不诉诸一些诡计。

首先，如果范围表是静态的或没有快速增长，并且范围值确实是整数，则可以生成一个额外的表，其中包含从最低 StartRange 到最高 EndRange 的所有值以及匹配的 id。然后你可以搜索你需要的确切值。

或者，计算 EndRange - StartRange 的最大值并将其称为 MaxRange。在 StartRange 上创建索引并将查询更改为：

```
 SELECT ID FROM BigTable 
    WHERE StartRange BETWEEN ('5000000' - MaxRange) AND '5000000' 
      AND '5000000' BETWEEN StartRange AND EndRange; 
```

现在，第一个 BETWEEN 子句*是*可索引的并且应该返回少量的行。然后，第二个 BETWEEN 子句将仅应用于那一小部分行。显然，这取决于您是否能够提前计算 MaxRange 的安全值。希望该范围有一些实际的最大可能值可以告诉您这个数字。

# asp.net - 你可以在 switch 中使用 if 语句吗？

> ID：12700103
> 
> 赞同：1
> 
> 时间：2012-10-02T23:56:03.480
> 
> 标签：asp.net, if-statement, switch-statement, .net-4.5

`case`是否可以使用带有语句的IF`switch`语句？我尝试了以下代码，但没有任何反应。我已经验证 SectionID 不等于 -1 但页面不处理任何内容，它不会触发or`Server.Transfer`也不会将分配传播到`ListView`or `Labels`。

```
case "Media":
    if (SectionID != "-1") { Server.Transfer("/Staff/Section.aspx"); }
    lvSearchResults.DataSource = SQLHelper.GetDataByQuery("SELECT SectionID AS ID, ShortName AS Title, Synopsis AS Descript, 'Section' AS PageName FROM dbo.tblSectionInfo WHERE  ShortName != 'Unknown' ORDER BY SectionTitle");
    lvSearchResults.DataBind();
    lblTitleRow.Text = "Add Section";
    lblDescriptionRow.Text = "Add new section home page.";
    btnAddNewItem.PostBackUrl = "/Staff/Section.aspx";
break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:43:17.413

在 case 语句中编写 if 语句是完全有效的。

你为什么不尝试使用 Response.Redirect 代替？

```
Response.Redirect("/Staff/Section.aspx" , false); 
```

# c++ - Visual C++ 2012 中的“枚举类”是什么意思？

> ID：12700105
> 
> 赞同：3
> 
> 时间：2012-10-02T23:56:42.033
> 
> 标签：c++, .net, visual-c++, enums, c++11

`enum class`Visual C++ 2012 中有两个相互冲突的定义：

*   C++11 的类型安全版本`enum`
*   C++/CLI，`System::Enum`派生类型，等效于`ref class`具有静态 const 整数成员的 a。

`enum class`当您启用或禁用 /clr 开关时，含义会改变吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T00:07:00.620

托管枚举必须具有访问说明符（要么 要么`public`）`private`。C++11 范围的枚举不能有访问说明符。例如，

```
enum class E { e0 };

public enum class F { f0 };
private enum class G { g0 }; 
```

`E`在 C++、C++/CLI 和 C++/CX 中有效，它是一个普通的 C++ 作用域枚举。

`F`并且`G`仅在 C++/CLI 和 C++/CX 中有效，它们命名托管枚举（在 C++/CLI 中）或 Windows 运行时枚举（在 C++/CX 中）。

# assembly - 在 x86 程序集中写入 stderr

> ID：12700106
> 
> 赞同：4
> 
> 时间：2012-10-02T23:56:50.120
> 
> 标签：assembly, x86

我对汇编很陌生，我想知道如何将输出写入标准错误。我知道您可以访问 C 标准库函数，例如 printf，以打印到控制台。但我不知道如何打印到标准错误。我试图使用 fprintf，但我只是在猜测参数，我不知道如何将 stderr 指定为文件指针。谢谢。

编辑：根据sehe的建议，我尝试了这个：

```
.586
.model small,c
.stack 100h

.data
msg db 'test', 0Ah

.code
includelib MSVCRT
extrn fprintf:near
extrn exit:near

public main
main proc
    push    offset msg
    push    2       ;specify stderr
    call    fprintf ;print to stderr
    push    0
    call    exit    ;exit status code 0

main endp

end main 
```

但这只是导致我的程序崩溃。还有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T01:39:18.280

您是否使用 MSVCRT dll 中的 fprintf？

第一个参数是指向流的指针。这是在汇编中使用 fprintf 的方法。此外，从 Assembly 调用 C 函数时，您需要在每次调用后调整堆栈，然后将参数推送到该堆栈。

另外，一个 BIGGIE ......你的字符串不是 NULL 终止的！您必须 NULL 终止您的字符串，这就是函数如何找到字符串的长度。不确定您使用的是什么汇编程序，但这是您可以在 MASM 中执行此操作的方法：

```
include masm32rt.inc

_iobuf STRUCT
    _ptr        DWORD ?
    _cnt        DWORD ?
    _base       DWORD ?
    _flag       DWORD ?
    _file       DWORD ?
    _charbuf    DWORD ?
    _bufsiz     DWORD ?
    _tmpfname   DWORD ?
_iobuf ENDS

FILE TYPEDEF _iobuf

.data
msg         db 'test', 0Ah, 0    

.data?
stdin       dd ?
stdout      dd ?
stderr      dd ?

.code
start: 

    call    crt___p__iob
    mov     stdin,eax          
    add     eax,SIZEOF(FILE)
    mov     stdout,eax          
    add     eax,SIZEOF(FILE)
    mov     stderr,eax        

    push    offset msg
    push    eax
    call    crt_fprintf
    add     esp, 4 * 2

    push    0
    call    crt_exit 

end start 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-12T01:57:19.737

我来到这里是因为我在 Debian Linux 下无法写入 stderr。我使用 yasm，因为我正在阅读 Ray Seyfarth 的书。我正在用 Intel 语法编写 elf64 格式和 dwarf2 调试协议。

我第一次尝试使用 fprintf 时遇到了分段错误。我查看了 stdio 的内部结构。我设法编写了相当于一个单行程序：

```
 int main()
     {
       fprintf(stderr, "%d\n", 3);
     } 
```

但是当我完全修改它时，我又开始遇到分段错误。我的目标是获得相当于：

```
 int main(int argc, char* argv[])
    {
      if (argc != 2) {
        fprintf(stderr, "Usage: %s n\n", argv[0]);
      } else {
        /* program code */
      }
    } 
```

我的最终解决方案是使用 sprintf() 调用，然后使用文件描述符进行 write() 系统调用。还需要调用 strlen()。这种策略应该适用于可以从汇编代码调用 C 库函数的任何环境。这是一些示例代码。如果没有给出参数或参数太多，则会打印一条使用消息并退出程序。如果提供了一个参数，则将其转换为整数并打印。

```
 segment .text
        global  main
        extern  printf, atoi, sprintf, strlen, write

    main:
    .argc   equ 0
    .argv   equ 4

        segment .data
    .f1 db  "Usage: %s n", 0x0a, 0
    .f2 db  "%d", 0x0a, 0

        segment .bss
    .buf    resb    255

        segment .text

        push    rbp
        mov rbp, rsp
        sub rsp, 16

        ; Save the arguments.
        mov [rsp+.argc], rdi
        mov [rsp+.argv], rsi

        ; if (argc != 2)
        cmp rdi, 2
        jne .usage

        ; Convert argv[1] to an integer, then print it.
        ; We could have printed argv[1] as a string,
        ; but in an actual program we might want to do
        ; n = atoi(argv[1])
        ; because we are passing a number on the command line.

        ; printf("%d\n", atoi(argv[1]))

        ; Get argv[1].
        mov rax, [rsp+.argv]
        mov rdi, [rax+8]        ; rdi gets *(argv + 1), or argv[1].
        call    atoi            ; Return value in eax.

        lea rdi, [.f2]
        mov esi, eax
        xor eax, eax
        call    printf

        jmp .done

    .usage:
        ; Get argv[0].
        mov rax, [rsp+.argv]
        mov rax, [rax]

        ; sprintf(buf, "Usage: %s n\n", argv[0])
        lea rdi, [.buf]
        lea rsi, [.f1]
        mov rdx, rax
        xor eax, eax
        call    sprintf

        ; len = strlen(buf);
        lea rdi, [.buf]
        call    strlen      ; string length is placed in eax.

        ; write(2, buf, strlen(buf))
        mov edi, 2      ; fd for stderr
        lea rsi, [.buf]
        mov edx, eax
        call    write

    .done:
        leave
        ret 
```

假设上面的代码包含在 progname.asm 中，它的组装和链接如下：

```
 yasm -f elf64 -g dwarf2 -l progname.lst progname.asm
    gcc progname.o -o progname 
```

# objective-c - Objective-C 中的继承属性和综合

> ID：12700108
> 
> 赞同：3
> 
> 时间：2012-10-02T23:56:54.933
> 
> 标签：objective-c, ios, inheritance

我有以下类和子类：

```
@interface NSHigh : NSObject
@property (nonatomic, strong) NSArray *array;
@end
@implementation NSHigh
-(NSArray*)array
{
    _array = [[NSArray alloc] init];
    return _array;
}
@end

@interface NSLow : NSHigh
@end
@implementation NSLow
/* synthesizing makes the assertion FAIL. NO synthesizing makes the assertion PASS */
@synthesize array;
@end 
```

然后我在某处运行这段代码：

```
NSLow *low = [[NSLow alloc] init];
assert(low.array); 
```

因此，显然，如果`NSLow`我在子类中合成了数组属性，那么来自超类的 getter 不会被调用，并且断言失败。

如果我不合成，则调用超类 getter，并且断言通过。

1.  为什么会这样？
2.  我如何在不每次`NSLow`调用的情况下访问子类中的数组实例变量？`self.array`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T00:02:08.587

`@synthesize`in`NSLow`将创建以下吸气剂：

```
- (NSArray *)array {
    return _array;
} 
```

因此，您的数组永远不会被初始化并被`nil`返回。

你通常不应该使用`@synthesize`在`@properties`超类中声明的。

此外，您不应该实现像`NSHigh`. 如果你想懒惰地初始化那个数组，你应该这样做：

```
- (NSArray *)array {
    if (!_array) {
        _array = [[NSArray alloc] init];
    }
    return _array;
} 
```

最后，你不应该使用`NS`前缀。

**编辑：**

如果您想在子类中直接访问您的 ivar，您可以在标头中显式声明它，如下所示：

```
@interface NSHigh : NSObject {
    NSArray *_array;
}
@property (nonatomic, strong) NSArray *array;
@end 
```

这也将允许您访问子类中的 ivar。

# java - if条件下的编译错误

> ID：12700110
> 
> 赞同：3
> 
> 时间：2012-10-02T23:57:00.557
> 
> 标签：java, compiler-errors, conditional-statements

在最后一个条件下，我期望从运算符 "&&" 左侧的表达式开始评估条件，该表达式变为 true，然后是右侧的语句。但是，我在这里收到编译错误，说“令牌上的语法错误“=，！=预期”。对这个问题的任何解释都会有很大帮助。

```
boolean boolTrue=Boolean.TRUE;
    boolean assignBool=Boolean.FALSE;
    int ten=10;

    //eventually evaluates to true , runs okay
    if(assignBool=boolTrue){
        System.out.println("Executed");
    }
    //evaluates to true && true: runs correctly
    if( assignBool=boolTrue && ten==10 )
        System.out.println("Executed");

    //evaluates to true && true : runs correctly
    if( ten==10 && (assignBool=boolTrue)  )
        System.out.println("Executed");

    /*was supposed to evaluate to true && true : but gives compile error
    compiler expects me to use '!=' or '==' operator though the second statement ultimately evaluates to true 
    as in above case*/
    if( ten==10 && assignBool=boolTrue  )//Compile error
        System.out.println("Executed"); 
```

**编辑：**感谢您的回答。为了检查它是否是操作员优先级问题，我在 for 循环中运行了相同的案例，是的，就是这样。

```
 boolean boolTrue=Boolean.TRUE;
    boolean assignBool=Boolean.TRUE;
    int ten=10;

    singleloop:
    for(int i=0;((ten==10 && assignBool)==boolTrue);System.out.println("Executed")){
        i++;
        if(i>10)
            break singleloop;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T23:58:27.027

编译器试图评估最后一个`if`，就好像它是写的一样

```
if( (ten==10 && assignBool)=boolTrue  ) 
```

这是没有意义的，因为左侧不是左值（从 C 中借用一些词汇）。这是因为`&&`优先级高于`=`Java。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T23:59:16.613

我从您的代码中假设您正在尝试使用并且实际上想要将 boolTrue 分配给 assignBool。

问题是运算符的顺序。&& 的优先级高于 = ( [source](http://bmanolov.free.fr/javaoperators.php) )。它通过与 10==10 表达式进行与运算来创建一个布尔值。结果是非左值（无法写入的表达式）。您的表达式相当于全括号：

```
((ten == 10) && assignBool) = boolTrue 
```

正如您已经发现的那样，以下是执行此操作的方法：

```
ten==10 && (assignBool=boolTrue) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T00:05:03.203

[从 Java 教程中的漂亮表格](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)可以看出，赋值运算符在所有运算符中的优先级最低。也就是说，表达式

```
ten==10 && assignBool=boolTrue 
```

被评估为

```
(ten==10 && assignBool) = boolTrue 
```

但左边的表达式是不可赋值的。

如果你想要不同的优先级，你必须使用括号，即

```
ten==10 && (assignBool = boolTrue) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T23:59:44.760

我不知道 java，但它可能比其他运算符绑定 && 更强。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T00:00:00.747

它正在被评估为`if((ten==10 && assignBool)=boolTrue )`这意味着您正在尝试分配给一个常量。

# php - php表单不邮寄

> ID：12700112
> 
> 赞同：0
> 
> 时间：2012-10-02T23:57:06.790
> 
> 标签：php, javascript, forms, email

我在网站上有一个 div，单击它时会用表单替换当前页面的内容（表单是用 javascript 创建的，是的，我知道这很奇怪）。这是一个非常简单的表单，一个文本输入一个textarea 和一个按钮type=submit。在提交时，我让它调用我的 php 邮件页面 (form.php)。什么都没发生。有谁知道为什么？

这是PHP：

```
<?php
$to = "theemail@yahoo.com";
$subject = "Someone has contacted you from your website";
$message = $_POST['theMessage'];
$from = $_POST['theEmail'];
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
header( 'Location: http://www.thesite.com/index.php' ) ;
?> 
```

这是我的js：

```
var theForm = '\
<from action="../form.php" method="post"> \
    <div class="title blueTxt">Your Email Address:</div>\
    <input type="text" name="theEmail"> \
    <div class="title blueTxt">Your Message:</div>\
    <textarea name="theMessage"></textarea><br> \
    <button type="submit">Send</button>\
    \
</form>';

$('a .callToAction').on('click',function(){
    $('.content').html(theForm);
}); 
```

我尝试了几件事，但都没有奏效：更改 js 中 form.php 的路径；使用输入类型=提交而不是按钮。这些都没用，有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:02:45.847

对我来说，这看起来像是一个拼写错误：

从行动...

应该：

形成动作...

# scala - 正确的功能定义结构？

> ID：12700115
> 
> 赞同：0
> 
> 时间：2012-10-02T23:57:31.420
> 
> 标签：scala

我真的不明白为了让scala理解我的函数最终会输出正确的类型而不是单位而需要布置函数和部分函数的顺序。对于 eclipse 在这些行中告诉我的内容，我已经发表了评论（第 7 行和最后一行）。非常感谢对编译器的任何见解。

```
object braces {
 def balance(chars: List[Char]): Boolean = {

    def rightBraces(chars: List[Char], openCount: Int, closeCount: Int): Boolean = {
        if (!chars.tail.isEmpty) {
            if (chars.head == '(') rightBraces(chars.tail, openCount + 1, closeCount)
            /*type mismatch;  found   : Unit  required: Boolean*/else if (chars.head == ')') rightBraces(chars.tail, openCount, closeCount + 1)
        }
        else {
            if ((chars.head == '(')&&(openCount == (closeCount - 1))) true
            else if ((chars.head == ')')&&(openCount == (closeCount + 1))) true
            else (openCount == closeCount)
        }
    }

    def wrongBrace(chars: List[Char]): Boolean = {
     if (!chars.tail.isEmpty) {
         if (chars.head == ')') false
         else if (chars.head == '(') rightBraces(chars.tail, 1, 0)
         else wrongBrace(chars.tail)
     }
     else false
    }

    wrongBrace(chars)

 }
}//Missing closing brace `}' assumed here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:10:29.000

问题出在这里：

> ```
>  if (!chars.tail.isEmpty) {
>         if (chars.head == '(') rightBraces(chars.tail, openCount + 1, closeCount)
>         else if (chars.head == ')') rightBraces(chars.tail, openCount, closeCount +1)
>     } 
> ```

对于内部 if 块，有可能 if 和 else if 都不为真。在这种情况下，不返回任何值，编译器默认返回一个 Unit。

**因此，您必须在else 块**中提供默认情况，或者在合适的情况下将**else** **if**更改为else 。

# excel - 比较 Excel VBA 中的两列（大于/小于或等于）

> ID：12700118
> 
> 赞同：1
> 
> 时间：2012-10-02T23:57:46.773
> 
> 标签：excel, function, vba, compare

实际上，我很难找到答案，这让我感到非常惊讶。我有 2 列包含一堆数字（在同一个工作表上）。我只是想让代码对列中的每一行说“如果第 1 列中的值 > 第 2 列中的值，请执行此操作”。我试过了

```
If sheet.range("B2:B35").Value > sheet.range("C2:C35").Value Then
'do something
End If 
```

但显然它不是那样工作的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T00:07:04.360

您需要考虑一个循环来独立检查每一行。

这个想法是这样的：

```
For i = 2 to 35
    If Sheet.Range("B" & i).Value > Sheet.Range("C" & i).Value
        'Do Something for Row i
    End If
Next 
```

`Value`可以省略，因为它是隐式的，意思是返回`Sheet.Range("B" & i).Value`相同的结果`Sheet.Range("B" & i)`

此外，根据您的需要，有多种方法可以寻址单元格。

```
 Range() 'Can be used to address multiple cells at the same time over a range
          ' or used to address a single cell as is done here

  Cells() 'Can be used to address a single Cell by calling Cells("B" & i) as is 
          ' done above, or can reference the row and column numerically like  
          ' Cells(2, i) 
```

如果您希望在给定的工作表中移动，则可以结合使用上述任何一种方法，`Offset()`例如：

```
 Cells(2, 1).Offset(0, i) 'Addresses the Cell offset from "B1" by 0 columns and
                           ' i rows. 
```

我个人倾向于`Cells(2, i)`在这些情况下使用，但我只是`Range`直接从您的示例代码片段中借用它。

# iphone - 显示自定义 UIButton 的问题

> ID：12700119
> 
> 赞同：0
> 
> 时间：2012-10-02T23:57:47.727
> 
> 标签：iphone, ios, cocoa-touch, uiview, uibutton

我正在尝试将自定义`UIButton`放在自定义上，`UIView`但`UIButton`没有出现。虽然当我尝试打印`UISubViews`my`UIView`时，它会在那里显示`UIButton`对象。

下面是我正在编写的将按钮放在我的自定义上的代码片段`UIView`

```
- (id)initWithFrame:(CGRect)frame{
    self = [super initWithFrame:frame];
    if (self) {
        self.backgroundColor = [UIColor blackColor];
        self.headerLabel = [[UILabel alloc] initWithFrame:CGRectZero];
        self.headerLabel.backgroundColor = [UIColor clearColor];
        self.headerLabel.textColor = [UIColor whiteColor];
        self.headerLabel.font = [UIFont systemFontOfSize:kApplicationHeaderTextFont];
        [self addSubview:self.headerLabel];

        self.actionButton = [UIButton buttonWithType:UIButtonTypeCustom];
        self.actionButton.frame = CGRectZero;
        [self addSubview:self.actionButton];
    }
    return self;
}
- (void)drawRect:(CGRect)iTotalRect{
    if (self.actionButtonImage) {
        self.actionButton.frame = CGRectMake(self.frame.size.width - self.actionButtonImage.size.width - 10.0, self.frame.size.height / 2 - self.actionButtonImage.size.height / 2, self.actionButtonImage.size.width, self.actionButtonImage.size.height);
        [self.actionButton setImage:self.actionButtonImage forState:UIControlEventTouchUpInside];
    } 
```

**有人知道我在做什么错吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:02:28.367

我的线索：

1.你为什么不用故事板？？

2.probably它是**阿尔法**？！

尝试使用：

```
self.alpha = 1.0; 
```

希望它有效：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:37:22.200

drawRect 中的以下代码对我有用。所以，基本上使用自定义按钮你不应该设置图像，你应该设置背景图像。

```
- (void)drawRect:(CGRect)iTotalRect
{
    if (self.actionButtonImage) {
        self.actionButton.frame = CGRectMake(self.frame.size.width - self.actionButtonImage.size.width - 10.0, self.frame.size.height / 2 - self.actionButtonImage.size.height / 2, self.actionButtonImage.size.width, self.actionButtonImage.size.height);
        [self.actionButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
        [self.actionButton setBackgroundImage:self.actionButtonImage forState:UIControlStateNormal];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T00:12:46.650

你需要为你的按钮添加一个背景颜色——在你设置它之前它是空的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T00:16:01.147

所以我找到了你需要的！！

也许是这样：

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self 
           action:@selector(aMethod:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Show View" forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[view addSubview:button]; 
```

现在你可以添加你的选项了！试试看！

这是我的应用程序的一部分，你可以明白我的意思：

```
- (void)addMyButton{    // Method for creating button, with background image and other properties

    UIButton *playButton = [[UIButton buttonWithType:UIButtonTypeRoundedRect] retain];
    playButton.frame = CGRectMake(110.0, 360.0, 100.0, 30.0);
    [playButton setTitle:@"Play" forState:UIControlStateNormal];
    playButton.backgroundColor = [UIColor clearColor];
    [playButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal ];
    UIImage *buttonImageNormal = [UIImage imageNamed:@"blueButton.png"];
    UIImage *strechableButtonImageNormal = [buttonImageNormal stretchableImageWithLeftCapWidth:12 topCapHeight:0];
    [playButton setBackgroundImage:strechableButtonImageNormal forState:UIControlStateNormal];
    UIImage *buttonImagePressed = [UIImage imageNamed:@"whiteButton.png"];
    UIImage *strechableButtonImagePressed = [buttonImagePressed stretchableImageWithLeftCapWidth:12 topCapHeight:0];
    [playButton setBackgroundImage:strechableButtonImagePressed forState:UIControlStateHighlighted];
    [playButton addTarget:self action:@selector(playAction:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:playButton];  
} 
```

**好吧，我为您找到了最终解决方案：**

```
UIButton *btnTwo = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
btnTwo.frame = CGRectMake(40, 140, 240, 30);
[btnTwo setTitle:@"vc2:v1" forState:UIControlStateNormal];
btnImage = [UIImage imageNamed:@"image.png"];
[btnTwo setImage:btnImage forState:UIControlStateNormal];
[btnTwo addTarget:self action:@selector(goToOne) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:btnTwo]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T00:51:22.310

你的actionButton的initWithFrame在哪里？

抱歉，我懒得看我的代码，但这里是来自互联网的示例，说明如何创建自定义按钮。

```
UIButton *playButton = [[UIButton buttonWithType:UIButtonTypeRoundedRect] retain];
playButton.frame = CGRectMake(110.0, 360.0, 100.0, 30.0);
[playButton setTitle:@"Play" forState:UIControlStateNormal];
playButton.backgroundColor = [UIColor clearColor];
[playButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal ];
UIImage *buttonImageNormal = [UIImage imageNamed:@"blueButton.png"];
UIImage *strechableButtonImageNormal = 
 [buttonImageNormal stretchableImageWithLeftCapWidth:12 topCapHeight:0];
[playButton setBackgroundImage:strechableButtonImageNormal forState:UIControlStateNormal];
UIImage *buttonImagePressed = [UIImage imageNamed:@"whiteButton.png"];
UIImage *strechableButtonImagePressed = 
[buttonImagePressed stretchableImageWithLeftCapWidth:12 topCapHeight:0];
[playButton addTarget:self 
action:@selector(playAction:) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:playButton]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-03T00:11:59.677

`-initWithFrame:`可能不会被调用，具体取决于您创建按钮的方式。`-initWithCoder:`如果您在 .xib 文件中创建按钮，可能会被调用。

# jquery - CSS 过渡与 Webkit 上的百分比宽度混淆（错误？）

> ID：12700126
> 
> 赞同：3
> 
> 时间：2012-10-02T23:58:16.977
> 
> 标签：jquery, css, webkit, width, css-transitions

我在这里有一个 CodePen：

[http://codepen.io/CWSpear/pen/BCriE](http://codepen.io/CWSpear/pen/BCriE)

这个想法是应用程序有一个侧边栏，您可以单击“扩展”以使内容区域全宽。如果您仍想调出侧边栏，您可以单击“Flyout”以使侧边栏重新出现在内容上（即，您可能只能选择在纵向模式下弹出，很像 iPad 上的邮件应用程序）。

我做了一个类切换方法，因为它使 JavaScript 变得非常简单，并且一切都通过 CSS 转换完成。

问题是，即使内容区域的标题/工具栏没有宽度，因此应该始终是内容区域的全宽，但是当您单击展开时，其他一切都有效，除了宽度标题不变。

这只发生在 Webkit 中。似乎它计算了“100%”是什么，即使我更改了内容的填充（由于我的盒子大小，这使得内容更宽），标题保持相同的宽度。回来的路上似乎反其道而行之。当我再次单击展开（现在我想它通常可能会说折叠）时，它使标题成为全宽，但是当向内容添加填充时，它不会重新调整宽度，现在标题是内容太宽。

让我举例说明：

前： ![从这里，您只需单击展开](../Images/014ae0caa1c488c68de197d9fe81f724.png)

点击展开，你会得到： ![啊，坏掉了！](../Images/233493cb16dfa29bbb6b14a6a198d3e0.png)

这是预期的： ![耶，这样更好！](../Images/6c8621d7cf2855e9566564f7e3cf9edc.png)

它在 Firefox 中运行良好。还应该注意的是，如果您手动调整窗口大小，它会重新绘制区域并修复标题（这就是我实际获得“预期”屏幕截图的方式）。用 JavaScript 触发调整大小似乎不起作用（因为我认为这不会触发重绘）。

我已经尝试设置显式的“100%”宽度和其他 JavaScript 技巧和黑客尝试在标题上设置百分比宽度但没有运气。

有没有其他人遇到过这个或有修复？

它在 Safari 6.0.1 和 Chrome 22.0.1229.79 中被破坏，并在 Firefox 15.0.1 中工作。像冠军一样，Firefox。

**[更新]** 它似乎只与填充有关，因为 ahren 能够通过切换到边距来修复它。这很有效，因为内容的宽度是自动的。如果它是 100% 宽度，那么它会破坏它。

这里的演示：http: [//codepen.io/CWSpear/pen/uvFJh](http://codepen.io/CWSpear/pen/uvFJh)

边距很好，直到我穿上`width: 100%`元素，然后它开箱即用，即使在`box-sizing: border-box`.

出于某种原因，我正在工作的实际项目在我设置时完全折叠了内容`width: auto`，即使它绝对是`display: block`. 我正在尝试重现它并为此发布 CodePen。

这确实是一个 Webkit 错误吗？还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:37:40.557

我最近遇到了同样的问题。

正如你所说，我还必须使用边距而不是填充。至少这是一个已知问题：[https ://bugs.webkit.org/show_bug.cgi?id=93876](https://bugs.webkit.org/show_bug.cgi?id=93876)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:20:07.143

[http://codepen.io/anon/pen/fzrkm](http://codepen.io/anon/pen/fzrkm)

我已经更新了`padding-left`，`margin-left`这似乎在 Chrome 和 Firefox 中很有效。

我希望我能给您更多详细信息，说明为什么这会修复您的错误。

# javascript - 直接从文件工作时“不安全的 JavaScript 尝试访问框架”

> ID：12700127
> 
> 赞同：3
> 
> 时间：2012-10-02T23:58:18.360
> 
> 标签：javascript, jquery

我收到此错误：

> 不安全的 JavaScript 尝试从具有 URL 文件的框架访问具有 URL 文件://localhost/Users/bobrodes2/Documents/PD%20Manager%20UI/3.7/FieldContactAddEdit.html# 的框架：//localhost/Users/bobrodes2/Documents/PD% 20Manager%20UI/3.7/fieldcontacteditactions_modal.html。域、协议和端口必须匹配。

我已经完成了阅读，但我无法弄清楚这两个文件如何可能是不同的域（或端口）。它们都在同一台机器的同一个文件夹中！后一个文件是使用 jQuery 的 dialog() 方法的模式，我们将模式设置为 iframe。不确定哪些代码会有所帮助，但很乐意发布任何请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:03:26.370

默认情况下，通过 file:// URI 提供的文件被认为在不同的域下。

要在 Chrome 下（暂时）禁用同源策略，出于开发目的，请尝试：http: [//joshuamcginnis.com/2011/02/28/how-to-disable-same-origin-policy-in-chrome/](http://joshuamcginnis.com/2011/02/28/how-to-disable-same-origin-policy-in-chrome/)

最好的选择是在本地启动一个 http 服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T00:04:48.887

这是浏览器安全问题。例如，Chrome 将拒绝使用该`file://`协议提供的任何文件的权限。

举个例子，如果你试图通过打开与 的连接来进行 AJAX 调用`file://c/myfiles/mytext.txt`，Chrome 将引发安全违规（因为为什么浏览器应该能够读取访问者的文件系统并将文件信息作为文本读取，存储在 cookie 中，或发送出去进行跟踪）。

如果画布用于保存从不同域加载的图片，则与 iFrame 以及编辑画布数据的处理相同。

解决方案是设置一个网络服务器。任何语言——我建议使用 PHP，因为 PHP 服务器的安装时间现在几乎为零，这要归功于 WAMP/EasyPHP/PHP5.4 的内置网络服务器等...

...但是，一旦您从 IP 地址或解析为 IP 地址（甚至`0.0.0.0`）的东西提供服务，该原始策略就应该消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T00:09:44.653

只需启动一个简单的 Web 服务器。

如果您在 OS X 上或以其他方式安装了 Python，只需`cd`进入您要以 root 身份使用的目录并使用...

```
python -m SimpleHTTPServer 
```

[文档](http://docs.python.org/library/simplehttpserver.html)。

# java - 在 Java 中没有 I/O 的正确 ZIP 实现

> ID：12700129
> 
> 赞同：2
> 
> 时间：2012-10-02T23:58:21.653
> 
> 标签：java, zip

是否有任何 Java 库通过查找中央目录记录的结尾并使用它来定位中央目录记录，然后是本地文件条目（本地文件头和本地文件数据）来实现读取 ZIP 存档所需的算法，而不做输入输出？

如果需要，请参阅[ZIP 规范](http://www.pkware.com/documents/casestudies/APPNOTE.TXT)以了解此类字段的定义。

从中央目录末尾读取的原因是能够正确解压缩文件*，例如*自解压文件（参见[Winzip 自](http://www.winzip.com/prodpagese.htm)解压器示例），这些文件在实际 ZIP 内容之前有数据，其中*可能*包含等于现有的字节序列ZIP 标头的签名。

“不进行 I/O”是指 ZIP 内容以字节数组的形式存在，不应使用磁盘或网络访问来解压缩它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:03:34.513

您可以使用 a[`ByteArrayInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayInputStream.html)来读取字节数组，就像从文件中读取一样。

```
byte[] zipData = . . .
ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(zipData)); 
```

**编辑**

由于标准`ZipFile`实现使用本机代码，因此不能与`ByteArrayInputStream`. 但是，您可能能够适应`ZipFile`. 一个起点是[Android 实现](https://github.com/android/platform_dalvik/blob/0c9612f9d7ff9fc0a61cc9eeb37acaabb7b28700/libcore/archive/src/main/java/java/util/zip/ZipFile.java)。它并没有完全完成这项工作，因为它使用`RandomAccessFile`. 但是，使用[这个线程](https://stackoverflow.com/questions/4897599/randomaccessfile-like-api-for-in-memory-byte-array)中的想法来构建内存版本`RandomAccessFile`，您可能能够将您需要的所有内容拼凑起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:35:17.153

我们的 SecureBlackbox 包括使用内存流操作的[ZIP 组件。](http://www.eldos.com/sbb/java-zip.php)我想这正是您正在寻找的。

# eclipse - GAE 开发模式不起作用

> ID：12700140
> 
> 赞同：3
> 
> 时间：2012-10-02T23:59:20.893
> 
> 标签：eclipse, google-app-engine

当我通过以下方式启动我的应用程序时：Debug As -> Web Application

开发模式窗口似乎不起作用，因为所有选项都保持灰色：

![开发模式](../Images/c947fa6c803c2989326bf9959ec9a50e.png)

我需要让它工作才能使用“重新加载 Web 服务器”按钮。

（我猜开发模式会代替控制台工作，但我不确定）

谢谢！

* * *

**编辑**

所以我继续做一些研究，我发现了这个：[https ://developers.google.com/eclipse/docs/running_and_debugging_2_0](https://developers.google.com/eclipse/docs/running_and_debugging_2_0)

在最后：

> **仅限 App Engine 的应用程序**
> 
> 如果您的应用程序使用 App Engine 而不是 GWT，则 App Engine 开发服务器正在运行的唯一指示将在控制台视图中输出。仅 App Engine 启动不会出现在开发模式视图中。控制台输出包括服务器的 URL，默认为 localhost:8888/。您可以通过 Eclipse 的启动配置对话框更改端口号，方法是选择 Web 应用程序启动并编辑 Main 选项卡上的 Port 值。
> 
> 如果您打开 Web 浏览器并导航到服务器地址，您应该会看到一个欢迎页面，其中包含指向应用程序定义的任何 servlet 的链接。

如果您不使用 GWT，就不可能简单地重新启动服务器以加载新的更改？

# c# - 如何处理Localhost中的相对路径和绝对路径

> ID：12700142
> 
> 赞同：2
> 
> 时间：2012-10-02T23:59:24.093
> 
> 标签：c#, .net, url, relative-path, absolute-path

好的，我们大多数人在将 Asp.NET Web 应用程序发布到生产服务器之前，在我们的本地主机中开发和测试它们。但对我来说， localhost 有时会很痛苦，因为我无法正确获取绝对路径。因为假设我的应用程序位于`http://localhost/MyApp/`我无法正确获取主机。我可以用几个代码来获得它，但我喜欢让它更通用，所以每当其他开发人员将相同的应用程序放在另一个位置（例如）时`http://localhost/TheirApp`，它应该可以正常工作。

**示例问题：**

每当我像这样使用绝对路径`/aboutus.aspx`时，它都会导致这个`http://localhost/aboutus.aspx`并省略`MyApp`。如果我使用相对路径，那么它变得`http://localhost/MyApp/IamHere.aspx/aboutus.aspx`相当令人不安。

因此，如果`Request.Url.Authority`或`Request.Url.Host`将返回`http://localhost/MyApp`，那么我们可以使用这些附加我们的 url 并找到一个不错的解决方案。

**另一种解决方案：**

我可以这样做：

```
if(Request.Url.Host.StartsWith("localhost"))
{
    string[] segments = Request.Url.AbsolutePath.Split("/");
    var localHost = Request.Url.Authority + "/" + segments[0];
} 
```

然后我可以使用`localHost`变量并将我的路径附加到它。

但我想了解你们是如何处理这样的问题的？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T00:02:41.830

我不太确定您要实现什么，但是您可以使用波浪号 ( `~`) 来引用 Web 应用程序的根，这应该可以解决您的问题。

```
string url = ResolveUrl("~/aboutus.apsx"); 
```

ASP.NET 应用程序将自行确定是否`~`应该是`localhost`、`localhost:34534`或`someserver.net/Deep/Path`其他任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:06:54.190

表现良好的应用程序的工作是通过配置参数或应用程序在任何主机和路径上工作。找出程序/脚本本身和主机名的路径（之间的位）应该不会太难。在大多数情况下，脚本/程序只能使用相对路径，网络服务器会自动为您添加其他位......所以不需要编写它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-17T19:45:28.560

也许另一种选择是创建一个链接或我称之为目标文件夹的“伪路径”。例如，您创建一个指向文件夹“MyApp”的链接“TheirApp”（或相反）：

```
TheirApp --> MyApp

MyApp --> TheirApp 
```

或者您可以在适当的子文件夹中这样做：

```
My/Path/MyApp --> Their/Path/TheirApp

Their/Path/TheirApp --> My/Path/MyApp 
```

# angularjs - 在 AngularJS 中格式化电话号码和信用卡号码

> ID：12700145
> 
> 赞同：69
> 
> 时间：2012-10-02T23:59:40.160
> 
> 标签：angularjs, number-formatting

**问题一（格式化电话号码）：**

我必须在 AngularJS 中格式化电话号码，但没有过滤器。有没有办法使用过滤器或货币将 10 位数字格式化为`(555) 555-5255`？并且仍然将字段的数据类型保留为整数？

**问题二（屏蔽信用卡号）：**

我有一个映射到 AngularJS 的信用卡字段，例如：

```
<input type="text" ng-model="customer.creditCardNumber"> 
```

它返回整数 ( `4111111111111111`)。我想用 xxx 的前 12 位数字来掩盖它，只显示最后 4 位。我正在考虑使用 filter:limit ，但不清楚如何。有任何想法吗？有没有办法用破折号格式化数字但仍将数据类型保留为整数？有点`4111-1111-1111-1111`。

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-10-04T13:57:18.943

此外，如果您只需要在输出中格式化电话号码，您可以使用这样的自定义过滤器：

```
angular.module('ng').filter('tel', function () {
    return function (tel) {
        if (!tel) { return ''; }

        var value = tel.toString().trim().replace(/^\+/, '');

        if (value.match(/[^0-9]/)) {
            return tel;
        }

        var country, city, number;

        switch (value.length) {
            case 10: // +1PPP####### -> C (PPP) ###-####
                country = 1;
                city = value.slice(0, 3);
                number = value.slice(3);
                break;

            case 11: // +CPPP####### -> CCC (PP) ###-####
                country = value[0];
                city = value.slice(1, 4);
                number = value.slice(4);
                break;

            case 12: // +CCCPP####### -> CCC (PP) ###-####
                country = value.slice(0, 3);
                city = value.slice(3, 5);
                number = value.slice(5);
                break;

            default:
                return tel;
        }

        if (country == 1) {
            country = "";
        }

        number = number.slice(0, 3) + '-' + number.slice(3);

        return (country + " (" + city + ") " + number).trim();
    };
}); 
```

然后你可以在你的模板中使用这个过滤器：

```
{{ phoneNumber | tel }}
<span ng-bind="phoneNumber | tel"></span> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-08-13T03:32:27.923

我使用自定义指令和随附的过滤器创建了一个 AngularJS 模块来为自己处理有关电话号码的问题。

jsfiddle 示例：http: [//jsfiddle.net/aberke/s0xpkgmq/](http://jsfiddle.net/aberke/s0xpkgmq/)

过滤器使用示例： `<p>{{ phonenumberValue | phonenumber }}</p>`

过滤器代码：

```
.filter('phonenumber', function() {
    /* 
    Format phonenumber as: c (xxx) xxx-xxxx
        or as close as possible if phonenumber length is not 10
        if c is not '1' (country code not USA), does not use country code
    */

    return function (number) {
        /* 
        @param {Number | String} number - Number that will be formatted as telephone number
        Returns formatted number: (###) ###-####
            if number.length < 4: ###
            else if number.length < 7: (###) ###

        Does not handle country codes that are not '1' (USA)
        */
        if (!number) { return ''; }

        number = String(number);

        // Will return formattedNumber. 
        // If phonenumber isn't longer than an area code, just show number
        var formattedNumber = number;

        // if the first character is '1', strip it out and add it back
        var c = (number[0] == '1') ? '1 ' : '';
        number = number[0] == '1' ? number.slice(1) : number;

        // # (###) ###-#### as c (area) front-end
        var area = number.substring(0,3);
        var front = number.substring(3, 6);
        var end = number.substring(6, 10);

        if (front) {
            formattedNumber = (c + "(" + area + ") " + front);  
        }
        if (end) {
            formattedNumber += ("-" + end);
        }
        return formattedNumber;
    };
}); 
```

指令使用示例：

```
<phonenumber-directive placeholder="'Input phonenumber here'" model='myModel.phonenumber'></phonenumber-directive> 
```

指令代码：

```
.directive('phonenumberDirective', ['$filter', function($filter) {
    /*
    Intended use:
        <phonenumber-directive placeholder='prompt' model='someModel.phonenumber'></phonenumber-directive>
    Where:
        someModel.phonenumber: {String} value which to bind only the numeric characters [0-9] entered
            ie, if user enters 617-2223333, value of 6172223333 will be bound to model
        prompt: {String} text to keep in placeholder when no numeric input entered
    */

    function link(scope, element, attributes) {

        // scope.inputValue is the value of input element used in template
        scope.inputValue = scope.phonenumberModel;

        scope.$watch('inputValue', function(value, oldValue) {

            value = String(value);
            var number = value.replace(/[^0-9]+/g, '');
            scope.phonenumberModel = number;
            scope.inputValue = $filter('phonenumber')(number);
        });
    }

    return {
        link: link,
        restrict: 'E',
        scope: {
            phonenumberPlaceholder: '=placeholder',
            phonenumberModel: '=model',
        },
        // templateUrl: '/static/phonenumberModule/template.html',
        template: '<input ng-model="inputValue" type="tel" class="phonenumber" placeholder="{{phonenumberPlaceholder}}" title="Phonenumber (Format: (999) 9999-9999)">',
    };
}]) 
```

带模块的完整代码以及如何使用它： [https ://gist.github.com/aberke/042eef0f37dba1138f9e](https://gist.github.com/aberke/042eef0f37dba1138f9e)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-02-25T20:02:01.363

正如 shailbenq 建议的那样，[phoneformat](https://github.com/albeebe/phoneformat.js)很棒。

在您的网站中包含电话格式。为角度模块或您的应用程序创建一个过滤器。

```
angular.module('ng')
.filter('tel', function () {
    return function (phoneNumber) {
        if (!phoneNumber)
            return phoneNumber;

        return formatLocal('US', phoneNumber); 
    }
}); 
```

然后，您可以在 HTML 中使用过滤器。

```
{{phone|tel}} 
OR
<span ng-bind="phone|tel"></span> 
```

如果要在控制器中使用过滤器。

```
var number = '5553219876';
var newNumber = $filter('tel')(number); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-07-11T08:54:16.583

![在此处输入图像描述](../Images/c58e948fdce1b13d4f34e220b84eef3a.png)

我还发现 JQuery 插件很容易包含在您的 Angular 应用程序中（也可以使用 bower :D ），并且可以使用各自的掩码检查所有可能的国家/地区代码： [intl-tel-input](https://github.com/Bluefieldscom/intl-tel-input)

然后，您可以使用该`validationScript`选项来检查输入值的有效性。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-03T13:01:23.643

Angular-ui 有一个用于屏蔽输入的指令。也许这就是你想要的掩蔽（不幸的是，文档不是那么好）：

[http://angular-ui.github.com/](http://angular-ui.github.com/)

不过，我认为这不会有助于混淆信用卡号码。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-01-28T14:08:05.060

您还可以检查**输入掩码格式化程序**。

这是一个指令，它被调用`ui-mask`，也是[`angular-ui.utils`](http://angular-ui.github.io/ui-utils/#/mask)库的一部分。

这是工作：**[现场示例](http://plnkr.co/edit/hcRp9b4YeRJX0dVddmZ6?p=preview)**

> 在写这篇文章的时候，还没有任何使用这个指令的例子，所以我做了一个非常**简单的例子**来演示这个东西在实践中是如何工作的。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-08-28T10:50:29.377

这是简单的方法。作为基本，我从[http://codepen.io/rpdasilva/pen/DpbFf](http://codepen.io/rpdasilva/pen/DpbFf)获取它，并做了一些更改。现在代码更简单。你可以得到：在控制器中——“ **4124561232** ”，在视图中“ **(412) 456-1232** ”

筛选：

```
myApp.filter 'tel', ->
  (tel) ->
    if !tel
      return ''
    value = tel.toString().trim().replace(/^\+/, '')

    city = undefined
    number = undefined
    res = null
    switch value.length
      when 1, 2, 3
        city = value
      else
        city = value.slice(0, 3)
        number = value.slice(3)
    if number
      if number.length > 3
        number = number.slice(0, 3) + '-' + number.slice(3, 7)
      else
        number = number
      res = ('(' + city + ') ' + number).trim()
    else
      res = '(' + city
    return res 
```

和指令：

```
myApp.directive 'phoneInput', ($filter, $browser) ->

  require: 'ngModel'
  scope:
    phone: '=ngModel'
  link: ($scope, $element, $attrs) ->

    $scope.$watch "phone", (newVal, oldVal) ->
      value = newVal.toString().replace(/[^0-9]/g, '').slice 0, 10
      $scope.phone = value
      $element.val $filter('tel')(value, false)
      return
    return 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-02-01T04:55:06.973

尝试使用 phoneformat.js ( [http://www.phoneformat.com/](http://www.phoneformat.com/) )，您不仅可以根据用户区域设置 (en-US、ja-JP、fr-FR、de-DE 等) 格式化电话号码，还可以验证电话号码。它基于 google 的 libphonenumber 项目非常强大的库。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-10-05T17:15:58.267

我采用了 aberke 的解决方案并对其进行了修改以适合我的口味。

*   它产生单个输入元素
*   它可以选择接受扩展
*   对于美国号码，它会跳过领先的国家代码
*   标准命名约定
*   从使用代码中使用类；不组成一个班级
*   允许使用输入元素上允许的任何其他属性

我的[代码笔](http://codepen.io/tmorrow-hyphensolutions/pen/pjeYLK?editors=101)

```
var myApp = angular.module('myApp', []);

myApp.controller('exampleController',
  function exampleController($scope) {
    $scope.user = { profile: {HomePhone: '(719) 465-0001 x1234'}};
    $scope.homePhonePrompt = "Home Phone";
  });

myApp
/*
    Intended use:
    <phone-number placeholder='prompt' model='someModel.phonenumber' />
    Where: 
      someModel.phonenumber: {String} value which to bind formatted or unformatted phone number

    prompt: {String} text to keep in placeholder when no numeric input entered
*/
.directive('phoneNumber',
  ['$filter',
  function ($filter) {
    function link(scope, element, attributes) {

      // scope.inputValue is the value of input element used in template
      scope.inputValue = scope.phoneNumberModel;

      scope.$watch('inputValue', function (value, oldValue) {

        value = String(value);
        var number = value.replace(/[^0-9]+/g, '');
        scope.inputValue = $filter('phoneNumber')(number, scope.allowExtension);
        scope.phoneNumberModel = scope.inputValue;
      });
    }

    return {
      link: link,
      restrict: 'E',
      replace: true,
      scope: {
        phoneNumberPlaceholder: '@placeholder',
        phoneNumberModel: '=model',
        allowExtension: '=extension'
      },
      template: '<input ng-model="inputValue" type="tel" placeholder="{{phoneNumberPlaceholder}}" />'
    };
  }
  ]
)
/* 
    Format phonenumber as: (aaa) ppp-nnnnxeeeee
    or as close as possible if phonenumber length is not 10
    does not allow country code or extensions > 5 characters long
*/
.filter('phoneNumber', 
  function() {
    return function(number, allowExtension) {
      /* 
      @param {Number | String} number - Number that will be formatted as telephone number
      Returns formatted number: (###) ###-#### x #####
      if number.length < 4: ###
      else if number.length < 7: (###) ###
      removes country codes
      */
      if (!number) {
        return '';
      }

      number = String(number);
      number = number.replace(/[^0-9]+/g, '');

      // Will return formattedNumber. 
      // If phonenumber isn't longer than an area code, just show number
      var formattedNumber = number;

      // if the first character is '1', strip it out 
      var c = (number[0] == '1') ? '1 ' : '';
      number = number[0] == '1' ? number.slice(1) : number;

      // (###) ###-#### as (areaCode) prefix-endxextension
      var areaCode = number.substring(0, 3);
      var prefix = number.substring(3, 6);
      var end = number.substring(6, 10);
      var extension = number.substring(10, 15);

      if (prefix) {
        //formattedNumber = (c + "(" + area + ") " + front);
        formattedNumber = ("(" + areaCode + ") " + prefix);
      }
      if (end) {
        formattedNumber += ("-" + end);
      }
      if (allowExtension && extension) {
        formattedNumber += ("x" + extension);
      }
      return formattedNumber;
    };
  }
);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
<div ng-app="myApp" ng-controller="exampleController">
  <p>Phone Number Value: {{ user.profile.HomePhone || 'null' }}</p>
  <p>Formatted Phone Number: {{ user.profile.HomePhone | phoneNumber }}</p>
        <phone-number id="homePhone"
                      class="form-control" 
                      placeholder="Home Phone" 
                      model="user.profile.HomePhone"
                      ng-required="!(user.profile.HomePhone.length || user.profile.BusinessPhone.length || user.profile.MobilePhone.length)" />
</div>
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-01-14T14:02:16.227

我修改了代码以这种格式输出电话值：**+38（095）411-22-23** 在这里你可以检查它[在此处输入链接描述](http://codepen.io/desructorvad/pen/LGjMMO)

```
 var myApp = angular.module('myApp', []);

myApp.controller('MyCtrl', function($scope) {
  $scope.currencyVal;
});

myApp.directive('phoneInput', function($filter, $browser) {
    return {
        require: 'ngModel',
        link: function($scope, $element, $attrs, ngModelCtrl) {
            var listener = function() {
                var value = $element.val().replace(/[^0-9]/g, '');
                $element.val($filter('tel')(value, false));
            };

            // This runs when we update the text field
            ngModelCtrl.$parsers.push(function(viewValue) {
                return viewValue.replace(/[^0-9]/g, '').slice(0,12);
            });

            // This runs when the model gets updated on the scope directly and keeps our view in sync
            ngModelCtrl.$render = function() {
                $element.val($filter('tel')(ngModelCtrl.$viewValue, false));
            };

            $element.bind('change', listener);
            $element.bind('keydown', function(event) {
                var key = event.keyCode;
                // If the keys include the CTRL, SHIFT, ALT, or META keys, or the arrow keys, do nothing.
                // This lets us support copy and paste too
                if (key == 91 || (15 < key && key < 19) || (37 <= key && key <= 40)){
                    return;
                }
                $browser.defer(listener); // Have to do this or changes don't get picked up properly
            });

            $element.bind('paste cut', function() {
                $browser.defer(listener);
            });
        }

    };
});
myApp.filter('tel', function () {
    return function (tel) {
        console.log(tel);
        if (!tel) { return ''; }

        var value = tel.toString().trim().replace(/^\+/, '');

        if (value.match(/[^0-9]/)) {
            return tel;
        }

        var country, city, num1, num2, num3;

        switch (value.length) {
            case 1:
            case 2:
            case 3:
                city = value;
                break;

            default:
                country = value.slice(0, 2);
                city = value.slice(2, 5);
                num1 = value.slice(5,8);
                num2 = value.slice(8,10);
                num3 = value.slice(10,12);            
        }

        if(country && city && num1 && num2 && num3){
            return ("+" + country+" (" + city + ") " + num1 +"-" + num2 + "-" + num3).trim();
        }
        else if(country && city && num1 && num2) {
            return ("+" + country+" (" + city + ") " + num1 +"-" + num2).trim();
        }else if(country && city && num1) {
            return ("+" + country+" (" + city + ") " + num1).trim();
        }else if(country && city) {
            return ("+" + country+" (" + city ).trim();
        }else if(country ) {
            return ("+" + country).trim();
        }

    };
}); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-07-01T20:51:57.550

您可以使用更简单、更轻便的 ng-pattern。 [http://tutorialzine.com/2014/12/learn-regular-expressions-in-20-minutes/](http://tutorialzine.com/2014/12/learn-regular-expressions-in-20-minutes/)。在这里你可以知道，，，只是一些有意义的词，，，不需要任何指令或过滤器，，，，

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-07-13T17:10:18.070

我也使用自定义 Angular 过滤器解决了这个问题，但我的利用了正则表达式捕获组，因此代码非常短。我将它与一个单独的`stripNonNumeric`过滤器配对以净化输入：

```
app.filter('stripNonNumeric', function() {
    return function(input) {
        return (input == null) ? null : input.toString().replace(/\D/g, '');
    }
}); 
```

`phoneFormat`过滤器正确格式化带有或不带有区号的电话号码。（我不需要国际号码支持。）

```
app.filter('phoneFormat', function() {
    //this establishes 3 capture groups: the first has 3 digits, the second has 3 digits, the third has 4 digits. Strings which are not 7 or 10 digits numeric will fail.
    var phoneFormat = /^(\d{3})?(\d{3})(\d{4})$/;

    return function(input) {
        var parsed = phoneFormat.exec(input);

        //if input isn't either 7 or 10 characters numeric, just return input
        return (!parsed) ? input : ((parsed[1]) ? '(' + parsed[1] + ') ' : '') + parsed[2] + '-' + parsed[3];
    }
}); 
```

简单地使用它们：

```
<p>{{customer.phone | stripNonNumeric | phoneFormat}}</p> 
```

过滤器的正则表达式`stripNonNumeric`来自[这里](https://stackoverflow.com/a/1862219/3123195)。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-10-03T14:36:07.130

您将需要为电话号码和信用卡创建自定义表单控件（作为指令）。[请参阅表单](http://docs.angularjs.org/guide/forms)页面上的“实现自定义表单控件（使用 ngModel）”部分。

正如 Narretz 已经提到的，Angular-ui 的[Mask 指令](https://github.com/angular-ui/angular-ui/tree/master/modules/directives/mask)应该可以帮助您入门。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-11-05T12:35:07.163

像这样的简单过滤器（在 [] 中的输入端过滤器字符上使用数字类）：

```
<script type="text/javascript">
// Only allow number input
$('.numeric').keyup(function () {
    this.value = this.value.replace(/[^0-9+-\.\,\;\:\s()]/g, ''); // this is filter for telefon number !!!
}); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-01-19T19:09:52.623

这是我创建检查模式的 ssn 指令的方式，我使用了 RobinHerbots `jquery.inputmask`

```
angular.module('SocialSecurityNumberDirective', [])
       .directive('socialSecurityNumber', socialSecurityNumber);

function socialSecurityNumber() {
    var jquery = require('jquery');
    var inputmask = require("jquery.inputmask");
    return {
        require: 'ngModel',
        restrict: 'A',
        priority: 1000,
        link: function(scope,element, attr, ctrl) {

            var jquery_element = jquery(element);
            jquery_element.inputmask({mask:"***-**-****",autoUnmask:true});
            jquery_element.on('keyup paste focus blur', function() {
                var val = element.val();    
                ctrl.$setViewValue(val);
                ctrl.$render();

             });

            var pattern = /^\d{9}$/;

            var newValue = null;

            ctrl.$validators.ssnDigits = function(value) {
                 newValue = element.val();
                return newValue === '' ? true : pattern.test(newValue);    
            };
        }
    };
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-09-23T08:58:35.847

使用 angularjs 指令查找[用于格式化信用卡号](http://plnkr.co/edit/f9oYZkqClSqe3plzDH44?p=preview)的 Plunker。在 xxxxxxxxxxxx3456 Fromat 中格式化卡号。

```
angular.module('myApp', [])

   .directive('maskInput', function() {
    return {
            require: "ngModel",
            restrict: "AE",
            scope: {
                ngModel: '=',
             },
            link: function(scope, elem, attrs) {
                var orig = scope.ngModel;
                var edited = orig;
                scope.ngModel = edited.slice(4).replace(/\d/g, 'x') + edited.slice(-4);

                elem.bind("blur", function() {
                    var temp;
                    orig  = elem.val();
                    temp = elem.val();
                    elem.val(temp.slice(4).replace(/\d/g, 'x') + temp.slice(-4));
                });

                elem.bind("focus", function() {
                    elem.val(orig);
               });  
            }
       };
   })
  .controller('myCtrl', ['$scope', '$interval', function($scope, $interval) {
    $scope.creditCardNumber = "1234567890123456";
  }]); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-08-31T06:20:50.197

> 在您的 Angular 应用程序中注入“xeditable”模块（免费提供）：

`var App = angular.module('App', ['xeditable']);`

然后在您的 HTML 代码中使用其内置功能，如下所示：

`<div>{{ value|number:2 }}</div>`

# node.js - Express.js 和 Zombie.js - 似乎无法解析 Javascript 资产

> ID：12700152
> 
> 赞同：0
> 
> 时间：2012-10-03T00:00:40.327
> 
> 标签：node.js, express, gzip, zombie.js, node.js-connect

`connect-asssets`我有一个用于提供 JS 和 CSS的 Express.js 应用程序：

```
app.configure(function() {
    app.set('port', 3000);
    app.set('views', path.join(__dirname, 'views'));
    app.set('view engine', 'ejs');
    app.use(connectAssets({src: path.join(__dirname, 'assets')}));
}); 
```

我正在尝试使用[Zombie.js](http://zombie.labnotes.org)进行验收测试，但`SyntaxError: Unexpected token ILLEGAL`每当它尝试解析 Javascript 文件时都会不断获取。如果我替换`connect-assets`为`express.static`，那么验收测试将完美运行。

知道有什么`connect-assets`不同会使 Zombie.js 绊倒吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:11:19.487

所以我通过[Charles](http://www.charlesproxy.com)运行请求。Zombie 发送请求标头`Accept-Encoding: identity`，但`connect-assets`无论如何都会返回 GZIP 数据。

我在 Github 上[提出了一个问题](https://github.com/TrevorBurnham/connect-file-cache/issues/8)，`connect-file-cache`希望一旦修复，一切都会正常运行。

# ios - 如何撤消和/或清除添加到 UIView 的 UIImageView？

> ID：12700155
> 
> 赞同：1
> 
> 时间：2012-10-03T00:01:21.383
> 
> 标签：ios, cocoa-touch, uiimageview, uiimage, undo

我有一个项目，我将选定的图像添加到 UIView。添加图像后，我可以移动、旋转和缩放该图像。但是假设我选择了错误的图像并且我想撤消。处理这样的事情的正确方法是什么？另外，假设我添加了多个但想从视图中清除所有这些，那么正确的方法是什么？

这是我目前正在尝试的：

```
-(IBAction)undoButtonTapped
{
    self.stampedImageView.image = nil;
} 
```

这将成功撤消先前的操作，但仅此而已。假设我添加了两个或更多图像。也许我想撤消一项或多项操作，但不是全部。这只会撤消最近的操作。

例子：

```
User adds three stamps
To undo 2 stamps:  tap the undo button twice
To delete all stamps:  tap the delete button once 
```

我已经想出了如何一键删除所有邮票。见下文。

删除代码：

```
UIView * subview;
while ((subview = [[imageView subviews] lastObject]) != nil)
{
    [subview removeFromSuperview];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:36:17.933

您可以遍历视图的子视图，测试特定子视图是否为图像视图，然后根据需要调用 removeFromSuperview。子视图中的视图将与添加的顺序相同，因此要删除最后 n 项，您需要从末尾枚举图像视图数组。例如，此方法将删除最后添加的 3 个图像视图：

```
-(IBAction)deleteThree:(id)sender {
    NSIndexSet *indxs = [self.view.subviews indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
        return [obj isKindOfClass:[UIImageView class]];
    }];

    __block int i = 0;
    [indxs enumerateIndexesWithOptions:NSEnumerationReverse usingBlock:^(NSUInteger idx, BOOL *stop) {
        [[self.view.subviews objectAtIndex:idx] removeFromSuperview];
        i++;
        if (i==3) 
            *stop = YES;
    }];
} 
```

# delphi - 为什么 AlphaBlend 总是返回 false（在画布上绘图）？

> ID：12700165
> 
> 赞同：1
> 
> 时间：2012-10-03T00:02:56.447
> 
> 标签：delphi, canvas, alphablending, ownerdrawn

我正在尝试使用 windows alphablend API 调用将两个画布混合在一起。首先，我在主画布（目标）上绘制一些东西，然后使用 TBitmap 实例化另一个画布，在上面绘制，然后将两者混合在一起（按照 SO 上的答案）。

但是，我发现它总是返回 false，起初我认为它与传递错误的源和目标句柄有关，但我无法弄清楚。会是什么呢？

```
unit MainWnd;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, ControlsEx;

type
{------------------------------------------------------------------------------}
  TfrmMain = class(TForm)
    PaintBox1: TPaintBox;
    procedure PaintBox1Paint(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmMain: TfrmMain;

implementation

{$R *.dfm}

{..............................................................................}
procedure alphaBlendf(
        const in_target       : TCanvas;
        const in_transperancy : integer;
        const in_color        : TColor;
        const in_rect         : TRect;
        const in_width        : integer;
        const in_height       : integer);
var
  w          : integer;
  h          : integer;
  bitmap     : TBitmap;
  blendFn    : BLENDFUNCTION;
  ret        : boolean;
begin
  blendFn.BlendOp             := AC_SRC_OVER;
  blendFn.SourceConstantAlpha := 80;

 try
   w := in_rect.Right - in_rect.Left - 1;
   h := in_rect.Bottom - in_rect.Top - 1;

   bitmap                    := TBitmap.Create;
   bitmap.PixelFormat        := pf32bit;
   bitmap.Width              := w;
   bitmap.Height             := h;
   bitmap.Canvas.Brush.Color := in_color;

   bitmap.Canvas.Rectangle(in_rect);

   ret := Windows.AlphaBlend(
        in_target.Handle,
        0,
        0,
        in_width,
        in_height,
        bitmap.Canvas.Handle,
        0,
        0,
        in_width,
        in_height,
        blendFn);

   if ret then in_target.TextOut(0, 0, 'ok')
          else in_target.TextOut(0, 0, 'fail');
  finally
   bitmap.Free;
  end;
end;

{..............................................................................}
procedure TfrmMain.PaintBox1Paint(Sender: TObject);
var
  r: TRect;
begin
  PaintBox1.Canvas.Brush.Color := $FCFFB5;
  PaintBox1.Canvas.FillRect(r);

  r := Rect(0, 0, 100, 100);
  alphaBlendf(PaintBox1.Canvas, 0, clLime, r, PaintBox1.ClientWidth, PaintBox1.ClientHeight);
end;

end. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T00:52:11.780

您的代码中有各种错误。

你没有填充你的一些成员`BLENDFUNCTION`。它们不是可选的，请提供它们的值。

您的位图对象创建应该在 try 语句之前（这与`AlphaBlend`失败的原因无关）。

您要求该`AlphaBlend`函数从源中混合比它拥有的更多，即您的位图是 99x99，但您希望 api 从中混合 105x105。

另请注意，在油漆盒的油漆处理程序中，您正在填充任意矩形（您`r`未初始化）。

```
procedure alphaBlendf(
        const in_target       : TCanvas;
        const in_transperancy : integer;
        const in_color        : TColor;
        const in_rect         : TRect;
        const in_width        : integer;
        const in_height       : integer);
var
  w          : integer;
  h          : integer;
  bitmap     : TBitmap;
  blendFn    : BLENDFUNCTION;
  ret        : boolean;
begin
  blendFn.BlendOp             := AC_SRC_OVER;
  blendFn.BlendFlags          := 0;
  blendFn.SourceConstantAlpha := 80;
  blendFn.AlphaFormat         := 0;

  bitmap                    := TBitmap.Create;
  try
   w := in_rect.Right - in_rect.Left - 1;
   h := in_rect.Bottom - in_rect.Top - 1;

   bitmap.PixelFormat        := pf32bit;
   bitmap.Width              := w;
   bitmap.Height             := h;
   bitmap.Canvas.Brush.Color := in_color;

   bitmap.Canvas.Rectangle(in_rect);

   ret := Windows.AlphaBlend(
        in_target.Handle,
        0,
        0,
        in_width,
        in_height,
        bitmap.Canvas.Handle,
        0,
        0,
        bitmap.width,
        bitmap.height,
        blendFn);

   if ret then in_target.TextOut(0, 0, 'ok')
          else in_target.TextOut(0, 0, 'fail');
  finally
   bitmap.Free;
  end;
end;

{..............................................................................}
procedure TfrmMain.PaintBox1Paint(Sender: TObject);
var
  r: TRect;
begin
  PaintBox1.Canvas.Brush.Color := $FCFFB5;
  r := Rect(0, 0, 100, 100);
  PaintBox1.Canvas.FillRect(r);

  alphaBlendf(PaintBox1.Canvas, 0, clLime, r,
      PaintBox1.ClientWidth, PaintBox1.ClientHeight);
end; 
```

# python - 计算两个数字之间的百分比变化（Python）

> ID：12700166
> 
> 赞同：12
> 
> 时间：2012-10-03T00:03:02.760
> 
> 标签：python

我有一个价格列表，我试图计算每个数字的百分比变化。我计算了差异

```
 prices = [30.4, 32.5, 31.7, 31.2, 32.7, 34.1, 35.8, 37.8, 36.3, 36.3, 35.6]

    def f():
        for i in range(len(prices)):
            print(prices[i]-prices[i-1]) 
```

这会返回差异，例如

```
 2.1
    -0.8
    -0.5
    ... 
```

我知道百分比的变化将是 ((i-(i-1))/(i-1) *100，但我不知道如何将其合并到脚本中。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T21:41:36.810

如果您还没有接触过 Python 中的 pandas 库 (http://pandas.pydata.org/)，那么您绝对应该去看看。

这样做很简单：

```
import pandas as pd
prices = [30.4, 32.5, 31.7, 31.2, 32.7, 34.1, 35.8, 37.8, 36.3, 36.3, 35.6]

price_series = pd.Series(prices)
price_series.pct_change() 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-03T00:08:38.183

试试这个：

```
prices = [30.4, 32.5, 31.7, 31.2, 32.7, 34.1, 35.8, 37.8, 36.3, 36.3, 35.6]

for a, b in zip(prices[::1], prices[1::1]):
    print 100 * (b - a) / a 
```

**编辑：**如果你想把它作为一个列表，你可以这样做：

```
print [100 * (b - a) / a for a, b in zip(prices[::1], prices[1::1])] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-08T13:01:53.850

虽然绝对不是最优雅的方式，但如果你想定义一个函数，它看起来像这样：

```
def pctc(Q):
    output = [0]
    for i in range(len(Q)):
        if i > 0:
            increase = Q[i]-Q[i-1]
            percentage = (increase/Q[i]) * 100
            output.append(percentage)
    return(output) 
```

可能有更好的方法来执行该功能，但至少很清楚。:))

# php - 查看 javascript 生成的 html 页面的实际 html 源

> ID：12700171
> 
> 赞同：2
> 
> 时间：2012-10-03T00:03:46.883
> 
> 标签：php, javascript, html

假设我有一些 javascript 代码，它从 php 传递了一个包含整个 html 页面的字符串。我将字符串写入当前文档，然后更改其中一个包含元素。像这样的东西：

```
<script type="text/javascript">
var foo = <?php echo $html_document;?>;
document.open();
document.write(foo);
document.close();
document.getElementById("some_id_within_html_document").innerHTML = "some stuff";
</script> 
```

这给了我我想要的输出，一切看起来都很棒......除非您查看此页面的源代码。如果我想稍后抓取这个页面并做同样的事情，它会显示 javascript 而不是浏览器解释的 html。使用这种方法我怎么能抓取所需的 HTML 而不是 javascript 生成它？我已经通过在 php 中处理字符串来规避这个问题，但是我仍然很好奇在查看源代码/抓取页面时是否可以以这种方式显示解释的 HTML。

编辑：全面的反应很好，我学到了很多关于这里实际发生的事情以及我应该远离的做法。Justin Wood 给出了与我最初的问题相关的最简单的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T00:28:23.027

不完全确定您要做什么，但您可以使用以下内容查看与生成/修改的 DOM 等效的 HTML：

```
document.documentElement.innerHTML 
```

或者：

```
document.getElementById("some_id").innerHTML 
```

见[**演示**](http://jsfiddle.net/C8Yj6/)。

您可以[创建一个](http://ted.mielczarek.org/code/mozilla/bookmarklet.html)包含此代码的书签：

```
alert(document.documentElement.innerHTML); 
```

在您查看的每个页面上查看由 JavaScript 修改的 DOM 的 HTML。

# 更新：

如果你想**在你的服务器上做一些网页抓取**，你想下载一些外部网页，**执行它的 JavaScript**，然后在 JavaScript 执行后查看与 DOM 对应的 HTML（使用 document.write 调用和所有这些）然后尝试使用[Zombie](http://zombie.labnotes.org/)或[Phantom](http://phantomjs.org/)。另请参阅[Mink](http://mink.behat.org/)以获取支持 Zombie 的 PHP 工具。

一般搜索带有 JavaScript 引擎的无头浏览器。

与人们在此处的其他答案中所写的相反，实际上是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:08:02.627

你没有。HTML 不在源代码中，句号。原始 HTML 包含需要执行的 Javascript。该 Javascript 操作页面的 DOM 以向其中添加更多内容。原始的 HTML 没有改变，它仍然只有 Javascript。

如果您想“抓取”Javascript 生成的内容，您总是需要解析和执行包括 Javascript 和 DOM 在内的整个页面，并评估生成的更改后的 DOM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T00:13:04.673

不要将您的 PHP 变量传递给 javascript。只需输出变量本身，然后使用 javascript 编辑您要编辑的任何内容...

```
<?php
$html = "<html><head><title></title></head><body><p id='p'>Something</p></body></html>";

echo $html;
?>

<script type="text/javascript">
  document.getElementById("p").innerHTML = "blah";
</script> 
```

像这样的东西应该适合你。

**注意：**我只在 chrome、FF 和 safari 中测试过这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T00:08:23.427

由于 JavaScript 是一种客户端语言，当您查看页面的源代码时它不会被执行，因此视觉结果与源代码之间的差异。您必须用 PHP 或其他服务器端语言替换 JS 才能获得相同的结果。

此外，如果您仍想使用 JavaScript，则必须在 JavaScript 执行后查看包含所有 HTML 节点的 DOM 或文档对象。一种方法是使用 Chrome 中的检查器（CTRT + SHIFT + I）或（右键单击 -> 检查此元素）。

# redirect - Emberjs：重定向到用户使用路由器的最后状态

> ID：12700173
> 
> 赞同：4
> 
> 时间：2012-10-03T00:04:00.397
> 
> 标签：redirect, ember.js, state, ember-old-router

我想将路由器重定向到用户所处的最后一个状态。

最好的方法是什么？是否可以在路由器中以某种方式使用 redirectTo ？

这是一个例子。假设一个帖子有两条主要路线，`show`并且`edit`

```
App.Router = Ember.Router.extend({

   post: Ember.Route.extend({         
       route: '/:post',

       show: Ember.Route.extend({
           route: '/',
           connectOutlets: function(router, context) {
              router.get('applicationController').connectOutlet("showPost", post);
           }
        }),

       edit: Ember.Route.extend({
           route: '/edit',
           connectOutlets: function(router, context) {
              router.get('applicationController').connectOutlet("editPost", post);
           }
        })

     })
  }) 
```

现在，我想做类似的事情：

```
 post: Ember.Route.extend({
       initialState: 'edit',
       route: '/:post',
       redirectTo: function(router) {
          router.transitionTo(router.currentState.name)
       }.property()
    }) 
```

额外的复杂性：redirectTo 特定于给定的帖子，即 post/3 可能默认为`edit`，但 post/4 可能默认为`show`取决于它们最后各自的状态。

我猜另一种方法是使用具有自己的 stateManager 的父控制器/视图，并导航到适当的子视图。如果这是首选方法，那么为此使用路由器有什么问题？

非常感谢这里的任何清晰度！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T10:03:15.687

在每次路由转换时，您都可以将最后一条路由存储在 cookie 中。您可以通过使所有路由都继承自抽象路由对象并将代码添加到 willTransition 操作挂钩来做到这一点。

然后剩下的就是在主索引路由上添加一些代码，从 cookie 加载数据，然后转换到保存的路由。

确保记录 ember 路由名称，而不仅仅是 URL 和任何相关的无关数据。

如果您还要处理保存状态（即未完成的记录更新等），那么您可能希望使用本地存储来存储未完成的编辑等。

过去，当我处理此类事情时，很容易陷入半无限循环，因此我肯定会确保您为他们提供恢复选项或其他选项，而不是使其自动执行。

# django - 通过父类选择 Django 模型对象时，如何知道是哪个子类？

> ID：12700174
> 
> 赞同：0
> 
> 时间：2012-10-03T00:04:09.177
> 
> 标签：django, django-models, python-2.6, django-1.3

我有一个主`Event`类和四种事件类型。它们中的每一个都是（至少）的子类`Event`。在事件的详细信息页面上，我正在为给定事件添加返回到管理界面的链接，以节省在管理中搜索的时间。不幸的是，无论子类如何，事件都是从父`Event`类中选择的。我对这个问题的解决方案是鸭式，在这种情况下我觉得这绝对是糟糕的。**我希望有一个更优雅且易于维护的解决方案来解决我的问题。**

模型：

```
class Event(models.Model):
    ...

class ListedEvent(Event):
    ....

class RSVPEvent(Event):
    ....

class TicketedEvent(Event):
    ....

class TicketedConcert(TicketedEvent):
    .... 
```

要查看事件详细信息，URL 会传递一个场地 slug 和事件名称 slug。这足以`Event`在所有子事件中将单个事件与父模型隔离。它还让我将事件类型排除在 URL 之外，使它们更简单、更友好。

```
@render_to('events/event_details.html')
def event_details(request, venue, slug):
    """
    Detail view of an event.
    """
    try:
        event = Event.objects.select_related(
            'listedevent',
            'rsvpevent',
            'ticketedevent',
            'ticketedconcert',
            'venue',
            'sites',
            'dj',
        ).get(
            slug=slug,
            venue__slug=venue,
        )
    except Event.DoesNotExist:
        raise Http404

    return {'event': event} 
```

在我回过头来意识到我正在使用父`Event`模型之前，假设我从其实际模型（父类的属性）中选择一个事件，这个解决方案更加优雅并且在 shell 中运行良好`Event`：

```
@property
def admin_link(self):
    et = self.__class__.__name__.lower()
    # ALWAYS: et == 'event', reverse() fails, returns ''
    return reverse('admin:events_%s_change' % et, args=(self.id,)) 
```

我当前的解决方案（父类的属性`Event`）：

```
@property
def admin_link(self):
    duck = None

    try:
        duck = self.ticketedevent.ticketedconcert.artist_name
        return reverse(
            'admin:events_ticketedconcert_change',
            args=(self.id,)
        )
    except:
        pass

    try:
        duck = self.ticketedevent.max_tickets
        return reverse(
            'admin:events_ticketedevent_change',
            args=(self.id,)
        )
    except:
        pass

    try:
        duck = self.rsvpevent.total_rsvp
        return reverse(
            'admin:events_rsvpevent_change',
            args=(self.id,)
        )
    except:
        pass

    try:
        duck = self.listedevent.name
        return reverse(
            'admin:events_listedevent_change',
            args=(self.id,)
        )
    except:
        pass 
```

必须有一种更简单、更易于维护的方法来找出我正在查看的事件类型。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:37:06.360

这是[一个](https://stackoverflow.com/questions/929029/how-do-i-access-the-child-classes-of-an-object-in-django-without-knowing-the-nam) [常见](https://stackoverflow.com/questions/5735124/django-model-inheritance-query-a-central-table) [问题](https://stackoverflow.com/questions/3109461/django-model-subclassing-get-the-subclass-by-querying-the-superclass)，并且似乎仍然是 Django 的丑小鸭之一。

您至少可以重新安排 2 美分的 DRY 增益：

```
from django.core.exceptions import ObjectDoesNotExist

@property
def event_type(self):
     for et in ('ticketedevent', 'rsvpevent', 'sillyhatsonlyevent', ...):
         try:
             getattr(self, et)
             return et
         except ObjectDoesNotExist:
             pass

@property
def admin_link(self):
    return reverse('admin:events_%s_change' % self.event_type, args=(self.id,)) 
```

如果您真的想花哨，可以使用`Event.__subclasses__`并生成事件类型列表。

# ruby-on-rails - Rails：与 FnordMetric 类似的宝石？

> ID：12700184
> 
> 赞同：1
> 
> 时间：2012-10-03T00:05:31.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3

是否还有其他类似于[FnordMetric](https://github.com/paulasmuth/fnordmetric)的宝石。gem 似乎完全符合我的要求，但我想在开始使用它之前评估更多选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:39:28.317

您可以尝试[New Relic RPM](https://github.com/newrelic/rpm)、[Engine Yard's Rails Metrics](https://github.com/engineyard/rails_metrics)和[Visage](https://github.com/auxesis/visage)

# ruby-on-rails - 从 Ruby 中打开回形针附件的标准/正确方法是什么？

> ID：12700189
> 
> 赞同：7
> 
> 时间：2012-10-03T00:05:56.330
> 
> 标签：ruby-on-rails, paperclip

Paperclip 提供了一个 .url 方法来获取附件的 URL 以包含在视图中。

我实际上需要从 Ruby 中将附件作为文件打开。

大约六个月前，Paperclip 的最新版本允许我们在附件对象上调用 to_file。尽管它没有记录，但它始终如一地工作。但在某些时候它停止了工作。

我希望能够从验证器中打开文件本身（在这种情况下，它尚未保存到其最终位置）或在保存 ActiveModel 对象后从完全其他方法打开文件（在这种情况下，文件已移动到其最终位置，可能在 Amazon S3 上）。

似乎选项是：

```
file = File.new(object.attachment.path) 
```

...仅适用于本地文件，不适用于 S3 上的文件。或者：

```
file = object.attachment.queued_for_write[:original] 
```

...仅在第一次保存之前有效（我认为）？

似乎应该有一种简单的方法来打开文件（在 Amazon S3 之类的情况下，可能涉及将其复制到临时位置），我猜答案与 io_adapter 有关，但我已经通读了代码（以及很多 StackOverflow 问题），但我仍然很难过。

是否有一种标准方法可以将回形针附件打开为适用于所有情况的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T01:24:52.830

这将为您提供文件（假设您的模型附加了一个`file`

```
require 'open-uri'

file = open(yourmodel.file.url) 
```

# vim - 需要一个脚本来模拟 在插入模式下按下

> ID：12700192
> 
> 赞同：2
> 
> 时间：2012-10-03T00:06:11.083
> 
> 标签：vim

我正在编写一个在特定条件下自动插入一些文本的函数。当我尝试模拟 Enter 按下时，我陷入了困境。我想出了这个（明显的）代码：

```
execute "normal! a\<cr>" 
```

问题是它破坏了自动缩进。例如，我有一个这样的文本文件（| 是光标）：

```
if (condition) {
    action();| 
```

所以我跑`execute "normal! a\<cr>"`。当我需要这个时：

```
if (condition) {
    action();
    | 
```

它的行为是这样的：

```
if (condition) {
    action();
| 
```

当然，自动缩进是打开的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T00:22:26.823

它实际上按预期工作。如果你执行`:execute "normal! a\<cr>hello`它会将'hello'放在正确的位置。如果您按下`A``Enter``Esc`它，它将下降到行首。该命令退出插入模式，因为它是一个空行，所以不缩进。

# macos - git svn clone 在 Mac OS X 上失败：“带有名字的临时文件 'svn_delta' 已经在使用中”

> ID：12700194
> 
> 赞同：14
> 
> 时间：2012-10-03T00:06:26.887
> 
> 标签：macos, perl, git, svn, macports

我已经从 MacPorts 在我的 Mac 上安装了 git-core (+svn)。这给了我：

```
git-core @1.7.12.2_0+credential_osxkeychain+doc+pcre+python27+svn
subversion @1.7.6_2 
```

我正在尝试调用类似以下内容：

```
git svn clone http://my.svn.com/svn/area/subarea/project -s 
```

输出看起来像这样：

```
Initialized empty Git repository in /Users/bitwise/work/svn/project/.git/
Using higher level of URL: http://my.svn.com/svn/area/subarea/project => http://my.svn.com/svn/area
A   folder/file.txt
    A       folder/file2.txt
   [... some number of files from svn ... ]
    A       folder44/file0.txt
Temp file with moniker 'svn_delta' already in use at /opt/local/lib/perl5/site_perl/5.12.4/Git.pm line 1024. 
```

我已经完成了通常的搜索，但大多数线程似乎都没有提出明确的解决方案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-09-03T19:20:11.637

将此设置添加到您的`~/.subversion/servers`文件中：

```
[global]
http-bulk-updates=on 
```

[我在 Linux 上遇到了这个问题，并在这个线程](http://mail-archives.apache.org/mod_mbox/subversion-users/201307.mbox/%3C51D79BDD.5020106@wandisco.com%3E)上看到了上述解决方法。我**想**我遇到了这个问题，因为我强迫[Alien SVN](http://search.cpan.org/~mschwern/Alien-SVN-v1.7.3.1/src/subversion/subversion/bindings/swig/perl/native/Core.pm)使用 subversion 1.8 构建，它现在使用 serf 库而不是使用 neon 来表示 https，显然 git-svn 不能很好地与 serf 配合使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-21T07:44:05.150

请注意，[git 1.8.5rc3（2013 年 11 月 20 日](https://github.com/git/git/blob/5fd09df3937f54c5cfda4f1087f5d99433cce527/Documentation/RelNotes/1.8.5.txt#L56-L61)发布，[在此处宣布](http://article.gmane.org/gmane.comp.version-control.git/238099)）现在包括：

*   " `git-svn`" 已被教导使用该[**`serf`**库](https://code.google.com/p/serf/)，这是[SVN 1.8.0 在谈论 HTTP 协议时为我们提供的唯一选项](http://subversion.apache.org/docs/release-notes/1.8.html#neon-deleted)（不再是[neon](http://webdav.org/neon/)）。

*   " " 由于SVN 使用的库中存在错误，因此使用库转储核心来`git-svn`讨论`https://`连接。 在我们这边解决它，即使 SVN 方面正在修复。**`serf`****`serf`**

所以一般升级到最新的 Git（1.8.5 应该在下周发布）和[最新的 SVN 1.8](http://samoldak.com/updating-to-svn-1-8-for-mac-os-x-10-8/)可以帮助让事情顺利进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:50:46.327

[http://bugs.debian.org/534763](http://bugs.debian.org/534763) 表明这是 libsvn-perl 包中的一个错误，尝试升级它

# jquery - 调用 __doPostBack 时是否有更好的方法来导致 $(form).submit() ？

> ID：12700196
> 
> 赞同：2
> 
> 时间：2012-10-03T00:06:31.307
> 
> 标签：jquery, asp.net, .net-3.5

在过去的几周里，我一直在旅途中，试图找出一个拥有大量基础设施的非常古老的应用程序中的大量缺陷。它使用了多个 3rd 方控件，我不可能希望在我拥有的时间范围内修复这些控件。这些缺陷之一归结为客户端状态的多个 javascript 模型。具体来说，一些控件希望能够挂钩到 jQuery 表单提交事件，而其他控件则在原始 .NET 中工作（`theForm.onsubmit`直接覆盖¹），还有一些控件使用`Sys.WebForms`和注册事件处理程序`PageRequestManager`（在某些页面上）。

起初我以为我可以简单地`__doPostBack`向页面添加一个新函数，但我无法（有时）注入它以在标准函数和`Sys.WebForms`运行拦截的代码之间运行`__doPostBack`。如果我之后覆盖它，那么我要么无法触发 WebForms 内部的逻辑，要么无法触发 jQuery 事件。我可以在原始函数之前注入它，`__doPostBack`但是如果不禁用原始函数被添加到页面，那什么也做不了。所以我想出了以下代码。

如果这是我实际尝试的唯一方法，为什么我还没有在网上找到它？有一个更好的方法吗？

```
public class Form : System.Web.UI.HtmlControls.HtmlForm 
{
    const string DoPostBackFn = @"
    <script type=""text/javascript"">
    (function ($) {
        window.theForm = document.forms[0];
        window.__doPostBack = function (eventTarget, eventArgument) {
            var originalvalues = [
                theForm.__EVENTTARGET.value,
                theForm.__EVENTARGUMENT.value,
                theForm.onsubmit
            ];
            if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
                theForm.__EVENTTARGET.value = eventTarget;
                theForm.__EVENTARGUMENT.value = eventArgument;
                try {
                    theForm.onsubmit = null;
                    $(theForm).submit();
                } finally {
                    theForm.__EVENTTARGET.value = originalvalues[0];
                    theForm.__EVENTARGUMENT.value = originalvalues[1];
                    theForm.onsubmit = originalvalues[2];
                }
            }
        };
    }(jQuery));
    </script>";

    protected override void RenderChildren(HtmlTextWriter writer) 
    {
        //temporarily disable the page from rendering the postback script
        var fRequirePostBackScript = typeof(System.Web.UI.Page).GetField("_fRequirePostBackScript", BindingFlags.Instance | BindingFlags.NonPublic);
        var isPostBackRequired = (bool)fRequirePostBackScript.GetValue(Page);
        if (isPostBackRequired) 
        {
            fRequirePostBackScript.SetValue(Page, false);

            //write custom postback script
            writer.Write(DoPostBackFn);
            //tell the page that the script is rendered already
            typeof(System.Web.UI.Page).GetField("_fPostBackScriptRendered", BindingFlags.Instance | BindingFlags.NonPublic).SetValue(Page, true);
        }

        //let ASP.NET do its thing
        base.RenderChildren(writer);

        //reset field to original value
        fRequirePostBackScript.SetValue(Page, isPostBackRequired);
    }
} 
```

¹这是你在页面上时显然不能做的事情，`Sys.WebForms`因为它盲目地覆盖 DOM 事件而不考虑已经注册的内容（至少在这个版本中），所以我必须在其他地方对它们做一些事情

# opengl - OpenGL glTranslatef/glRotatef 没有按我的预期工作

> ID：12700199
> 
> 赞同：2
> 
> 时间：2012-10-03T00:06:57.540
> 
> 标签：opengl

我正在尝试创建一个多边形并在释放鼠标按钮时平移/旋转它。如果我再次使用重新绘制整个多边形，我可以做到这一点`glBegin`，`glEnd`但我不确定我是否真的需要这个，因为我已经在屏幕上绘制了一次多边形并且只想使用相同的对象并应用旋转/平移给它。

我在下面放了一个片段。

```
if(state == GLUT_UP){

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glClear(GL_COLOR_BUFFER_BIT);
    glPushMatrix();
    glRotatef(90,0,0,1);
    //  glTranslatef(50,-50,0);
    /*
    glBegin(GL_POLYGON);
    glVertex2i (-40,40) ; //Specify li ne - se gme nt ge ometry .
    glVertex2i (-30 , -40) ;
    glVertex2i (0 , 20) ;
    glVertex2i (40 , 35) ;
    glEnd() ;
    */
    glClear(GL_COLOR_BUFFER_BIT);
    glPopMatrix();
    glutSwapBuffers();
    //  glutPostRedisplay();
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T09:37:27.240

请与我交谈：**“我永远不会再将 OpenGL 绘图调用放入事件处理程序中！”**

在事件处理程序中，您根据事件设置一些变量，然后发出重绘调用，并在渲染函数中根据变量的内容进行绘制。

### 更新：

OpenGL 也不会“记住”你画的东西。您发送绘图命令，OpenGL 执行它的操作，然后忘记它。剩下的唯一痕迹是在帧缓冲区上变成像素的片段。但帧缓冲区内容不受转换或任何 OpenGL 状态更改的影响。只有绘图会影响帧缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T16:48:12.687

您不需要再次编写整个代码：

在您的显示函数（与您用作将回调注册到 glut 窗口的参数相同的 void 函数`glutDisplayFunc(display)`）中，将您的代码片段放在上面。

在您的`glPushMatrix()`..`glPopMatrix()`序列中，将一个变量（最好是`GLfloat`类型）角度`glRotatef()`与您的旋转轴一起放入 call 中。你可以对`glRotatef()`参数做同样的事情。

如果您想使用鼠标或键盘进行旋转或平移，请使用`glutMouseFunc()`或`glutKeyboardFunc()`向 GLUT 注册回调。如果你想要一个动画，那么你可以用`glutIdleFunc()`.

代码片段将是：

```
void handler(...){
angle+=some_value;

//angle reset not so necessary but good,
 if you somehow are using that angle value somewhere else
  if(angle>360)
  angle=0;

glutPostRediplay();
} 
```

键盘：

```
handler(unsigned char key, int x, int y); 
```

老鼠：

```
handler(int button, int state, int x, int y); 
```

空闲功能（用于连续动画）

```
handler(void); 
```

# python - 在框内随机化 (x,y,z) 坐标

> ID：12700211
> 
> 赞同：2
> 
> 时间：2012-10-03T00:08:11.053
> 
> 标签：python

我对 python 相当陌生，在我目前的任务中，它查看了 3D 中的粒子。

问题的第一部分要求创建一个程序，将相同的、不重叠的粒子放入立方晶格中。所以我下面的代码只是遍历所有可能的组合，把它放在一个 XYZ 文件中。

xyz 文件采用以下格式：

```
1000.000000
comment goes here
H 0.000000 0.000000 0.000000
H 0.000000 0.000000 1.000000
H 0.000000 0.000000 2.000000
H 0.000000 0.000000 3.000000
H 0.000000 0.000000 4.000000
H 0.000000 0.000000 5.000000
H 0.000000 0.000000 6.000000
H 0.000000 0.000000 7.000000
H 0.000000 0.000000 8.000000 
```

我坚持的下一部分希望我做同样的事情，但以随机方式放置它们并限制我拥有的粒子数量。这是我第一部分的代码。

```
import itertools #will help iterating particles 

#we must set the values of diameter and Length
L=10
d=.5

#this is the intial coordinates of the first particle
x,y,z = 0,0,0
counter=0

#The particles will be spread across, the below ensures that there is no overlap of particles
with open("question1.xyz","w") as file:
    file.write("\ncomment goes here\n") #add comments into the 2nd line of the xyz file
    for x,y,z in itertools.product(range(L),repeat = 3):
        file.write('H %f %f %f\n' % (x, y, z))
        counter=counter+1

#this will put the number of particles as the first line
with open("question1.xyz") as infile:
    with open("q1Output.xyz","w") as outfile:
        for i,line in enumerate(infile):
            if i==0:
                outfile.write('%f\n'%counter)
            else:
                outfile.write(line) 
```

我感到困惑的部分是我应该如何随机化我的粒子/坐标并确保没有重叠。

有任何想法吗？提前致谢！

**编辑：这是我到目前为止所拥有的，除了要求改变 L 并尽量减少运行程序所需的时间的问题 - 不知道是什么

```
import random
import time

start_time=time.time() 

text_file=open("textfile.xyz","w")
text_file.write("512\n")
text_file.write("Comment goes here\n")

L=12.5
d=1

#place particles
for partciles in range(0,512)
    proxcheck=1
    while proxcheck !=2 #when the particles has been placed, proxcheck will be set=2, and the program will move onto next
    x,y,z=random.random()*L,random.random()*L,random.random()*L #random numbers for positions
    skipfirsttwolines,proxcheck=0,1;

For line in text_file
    skipfirsttwolines=skipfirsttwolines+1;
    if skipfirsttwolines>2: #in xyz file we dont look at first two lines
        proxcheck=0 #if no overlap particle will be placed
        oldvals=line.split(none)
        oldx=float(oldvals[1])
        oldy=float(oldvals[2])
        oldz=float(oldvals[3]) 
```

不知道从这里去哪里，或者我是否应该采取这种方法来确保没有重叠

@大卫：

这就是我的想法，有什么建议吗？

```
x,y,z=[],[],[]
for j in range(0,512):
    x.append(0)
    y.append(0)
    z.append(0)
xyz_line = '\n{0} {1} {2} {3}'.format('O',x[0],y[0],z[0])
f.write(xyz_line) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:01:00.950

您可以使用代码创建一个随机点

```
import random

p = (random.randint(0, L), random.randint(0, L), random.randint(0, L)) 
```

但是如果你需要防止两个在同一个地方，你可以这样做（在设置`num_points`为你想要的点数之后）：

```
points = set()
while len(points) < num_points:
    p = (random.randint(0, L), random.randint(0, L), random.randint(0, L))
    if p not in points:
        points.add(p) 
```

要将结果点写入文件：

```
for p in points:
    f.write("%s %s %s\n" % p) 
```

# javascript - 切换 javascript 隐藏和显示时，open.png 将更改为 close.png

> ID：12700212
> 
> 赞同：0
> 
> 时间：2012-10-03T00:08:10.837
> 
> 标签：javascript, image, toggle

我有一个有效的切换扰流板 - 感谢阿德里安的代码。打开另一个扰流板时它会立即关闭。

我在右侧添加了一个加号图像，我希望在打开后将加号更改为减号图像，然后在关闭或切换扰流板后更改回加号。

这是我目前拥有的：

[http://justxp.plutohost.net/slyfiles/index.html](http://justxp.plutohost.net/slyfiles/index.html)

如何在扰流板切换时使正图像变为负图像并在扰流板切换关闭时变回？

我的代码：

```
 <div id="spoiler1" data-hidden="hide1" class="spoiler"><span class="featurelist_2-text-margin">Networks</span><div id="plus"><img src="http://cdn4.iconfinder.com/data/icons/iconic/raster/12/plus.png"></div>
 </div>
<div id="hide1" class="hide"><p id="texting1">We have a very security system, including secure logging in, management, balance management and more. 
We do a SQL backup every hour to protect us from our data being lost.</p></div>

<div id="spoiler2" data-hidden="hide2" class="spoiler"><span class="featurelist_2-text-margin">Payment Avarge</span></div>
<div id="hide2" class="hide"><p id="texting1">We have a very security system, including secure logging in, management, balance management and more. 
We do a SQL backup every hour to protect us from our data being lost.</p></div>

<div id="spoiler3" data-hidden="hide3" class="spoiler"><span class="featurelist_2-text-margin">Control Panel - SlyPanel</span></div>
<div id="hide3" class="hide"><p id="texting1">We have a very security system, including secure logging in, management, balance management and more. 
We do a SQL backup every hour to protect us from our data being lost.</p></div>

<div id="spoiler4" data-hidden="hide4" class="spoiler"><span class="featurelist_2-text-margin">Security</span></div>
<div id="hide4" class="hide"><p id="texting1">We have a very security system, including secure logging in, management, balance management and more. 
We do a SQL backup every hour to protect us from our data being lost.</p>
</div> 
```

JS：

```
<script>
$('.spoiler').click(function() {
    var hiddenid = $(this).data('hidden');
    $('#' + hiddenid).slideToggle();
    $('.hide:not(#' + hiddenid + ')').slideUp();
});
</script> 
```

CSS

```
.featurelist_2-text-margin{
    margin-top: 10px;
    position: absolute;
    margin-left: 20px;
    text-align: left;
    color: #259acb;
}

.spoiler {
        font-size: 16px;
    background-color: #c0e6d2;
    border: 1px solid #a7c8b7;
    height: 45px;
    width: 530px;
        text-shadow: 0px 1px 0px #f4f4f4;
        filter: dropshadow(color=#fff, offx=0, offy=1);
                margin-top: 3px;
                cursor: pointer;
                    min-width: 511px;
                        position: relative;
}

.hide{
    font-size: 15px;
    background-color: #dedede;
    border: 1px solid #c1c1c1;
    width: 530px;
    height: auto;
    color: #262626;
        text-shadow: 0px 1px 0px #f4f4f4;
        filter: dropshadow(color=#fff, offx=0, offy=1);
                margin-top: 3px;
    display: none;
}

#plus {
float: right;
margin-top: 17px;
margin-right: 10px;
} 
```

Hide1,2,3,4 为空。

实时预览：http: [//justxp.plutohost.net/slyfiles/index.html](http://justxp.plutohost.net/slyfiles/index.html)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:54:26.080

试试这个..

```
$('.spoiler').click(function() {
    var hiddenid = $(this).data('hidden');
    $('#' + hiddenid).slideToggle();
    $('.hide:not(#' + hiddenid + ')').slideUp();

    var $img = $(this).find('img');
    if( $img.attr('src').indexOf('plus') > -1){

       $img.attr('src', 'http://cdn4.iconfinder.com/data/icons/iconic/raster/12/minus.png')
    }
    else{
       $img.attr('src', 'http://cdn4.iconfinder.com/data/icons/iconic/raster/12/plus.png')
    }

}); 
```

我假设图像的 src 以 plus.png 和 minus.png 结尾

# javascript - 在一个类中执行多个 setTimeout

> ID：12700213
> 
> 赞同：0
> 
> 时间：2012-10-03T00:08:22.407
> 
> 标签：javascript, class, settimeout

我有一个 javascript 类对象，我想在同一页面上多次使用它，并且它需要一个`setTimeout`函数才能工作，因为它在后台一直在滴答作响。但是，正如您在这个小提琴中看到的那样，在超时调用中，它只引用对象的最新实例。有谁知道我该如何排序？最好，我想看看它是如何在 jQuery 中完成的，我想确切地了解它是如何做到的。

[http://jsfiddle.net/cgoddard/yQDLe/20/](http://jsfiddle.net/cgoddard/yQDLe/20/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:12:29.660

当您`this.doDelayed`在双重嵌套函数中编写代码时，`this`关键字不会引用您的`test`对象。相反，它指的是当前正在执行的函数被调用的任何对象，可能是`window`.

为了克服这个问题，你必须`this`在函数的最开始保存你的`test`，这样说：`var $this = this;`
然后你可以使用`$this`.

除此之外，当您简单地编写 时`x = something`，符号`x`被视为对象上的`window`属性（也称为“全局变量”）。因此，您的`doDelayed`和`construct`函数最终都在`window`对象上。因此，当您第二次执行此操作时，它们都会被覆盖。这就是为什么您两次获得相同结果的原因。
相反，您应该写`$this.doDelayed = function() ...`（从上面`$this`保存的值在哪里`this`），并对`construct`.

# android - SherlockListActivity 在 TrackedListActivity 中是否具有类似的包含功能？

> ID：12700215
> 
> 赞同：1
> 
> 时间：2012-10-03T00:08:25.343
> 
> 标签：android, android-widget, actionbarsherlock

我正在使用 TrackedListActivity，但想改用 SherlockListActivity；以确保我具有操作栏向后兼容性。

我只是“杀死”了 TrackedListActivity 功能吗？

# mongodb - 我真的应该使用 NoSQL 吗？

> ID：12700217
> 
> 赞同：-3
> 
> 时间：2012-10-03T00:09:06.217
> 
> 标签：mongodb, performance, couchdb, scalability, nosql

我有一些报告，它们结合了来自 3 个不同服务器的数据创建 json 并将其显示给用户。当有数千条记录时，无法通过 Web 处理它并且它会超时。我现在正在排队用户请求并生成一个 json 文件并发送一个链接，所以当用户打开链接时，我只显示数据而不是任何处理。

我最近遇到了 NoSql。在我的特殊情况下，除了能够在文件上运行查询之外，使用 NoSql 将数据存储到文件有什么好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:11:36.730

如果您有数千条记录聚合结果，您应该能够使用 SQL 或 NoSQL 对几乎任何用例进行处理。

NoSQL 并不是让 SQL 更快的灵丹妙药，它是一种不同类型的数据存储解决方案，它有自己的优点和缺点。

聚合几千条数据记录的平面文件、SQL 还是 NoSQL 是否最好在很大程度上取决于您的舒适区和查询要求。从性能的角度来看，所有这些都可以在这种大小的数据集上运行良好。如果您发现自己编写的不仅仅是琐碎的逻辑来管理当前文件，请根据您对每种方法的熟悉程度使用 SQL 或 NoSQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:14:38.503

如果您正在创建报告，答案很可能是“否”。SQL 基本上是一个事务性和报告环境，您必须明白，在将 NoSQL 解决方案用作主存储时，您在很大程度上放弃了这两者。这也是为什么许多最令人印象深刻的 NoSQL 部署使用这些引擎作为传统 RDBMS 的附属品，而不是替代品的原因。

在这种情况下，我的建议是您希望考虑使用更多 SQL*并将*您的服务器连接在一起，以便您可以将其作为单个 SQL 查询运行。我不知道您使用的是什么 RDBMS，所以我无法提供具体信息，但在 PostgreSQL 上，您可以执行外部数据包装器并使用它们从其他三台服务器查询数据。是的，您可以通过这些访问非 PostgreSQL 服务器......

我的猜测是，如果只有几千行，你的问题是你在客户端编程中做的事情可能在数据库端更有效。

# ruby - 如何在 Ruby 中转义单引号？

> ID：12700218
> 
> 赞同：27
> 
> 时间：2012-10-03T00:09:10.790
> 
> 标签：ruby, string, escaping

我通过接受 JSON 作为字符串的脚本（不是我的）将一些 JSON 传递给服务器。

JSON 的某些内容包含单引号，因此我想确保在传递给脚本之前对任何单引号进行转义。

我尝试了以下方法：

```
> irb
> 1.9.3p194 :001 > x = "that's an awesome string"
>  => "that's an awesome string" 
> 1.9.3p194 :002 > x.sub("'", "\'")
>  => "that's an awesome string" 
> 1.9.3p194 :003 > x.sub("'", "\\'")
>  => "thats an awesome strings an awesome string" 
```

但似乎无法正确使用语法。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-03T02:08:55.847

`sub("'", "\'")`不起作用的原因是因为`"\'"`是一样的`"'"`。在双引号内，单引号的转义是可选的。

原因`sub("'", "\\'")`不起作用是因为`"\\'"`扩展为反斜杠后跟单引号。在`sub`or`gsub`参数中，后跟一些字符的反斜杠具有与相应的全局变量相当的特殊含义。特别是在这种情况下，全局变量`$'`保存最后一个匹配点之后的子字符串。您的`"\\'"`内部`sub`或`gsub`论点位置指的是类似的事情。为了避免这种特殊约定，您应该将替换字符串放在一个块中而不是一个参数中，并且由于您想要匹配的不仅仅是一个，您应该使用`gsub`而不是`sub`：

```
gsub("'"){"\\'"} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T00:12:57.910

你为什么不使用 JSON gem？

```
require 'json'
some_object = {'a string' => "this isn't escaped because JSON handles it.", 'b' => 2}

puts some_object.to_json
=> {"a string":"this isn't escaped because JSON handles it.","b":2} 
```

还有一个往返示例：

```
require 'pp'
pp JSON[some_object.to_json]
=> {
    "a string" => "this isn't escaped because JSON handles it.",
        "b" => 2
} 
```

还有一个带双引号的例子：

```
some_object = {
  'a string'       => "this isn't escaped because JSON handles it.",
  'another string' => 'double-quotes get "escaped"'
}
puts some_object.to_json
=> {
            "a string" => "this isn't escaped because JSON handles it.",
      "another string" => "double-quotes get \"escaped\""
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-07T20:39:44.270

如果您试图转义单引号（撇号），您可能还想转义双引号。（这将适用于 Javascript/JSON）

最简单的方法是使用`escape_javascript` [http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html)它“为 JavaScript 段转义回车和单引号和双引号”。

注意这仅适用于**Ruby on Rails**，不适用于普通 Ruby。但是，您可以使用以下内容为普通 Ruby 制作一个 polyfill：

```
JS_ESCAPE_MAP   =   { '\\' => '\\\\', '</' => '<\/', "\r\n" => '\n', "\n" => '\n', "\r" => '\n', '"' => '\\"', "'" => "\\'" }

def escape_javascript(javascript)
  if javascript
    result = javascript.gsub(/(\|<\/|\r\n|\342\200\250|\342\200\251|[\n\r"'])/u) {|match| JS_ESCAPE_MAP[match] }
  else
    ''
  end
end 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-01-23T03:43:19.130

试试这种方式，使用反斜杠转义：

```
puts 'sean\'s' 
```

输出应该是：

```
sean's 
```

# php - 尽管设置为不确定，但 cURL 连接仍断开

> ID：12700223
> 
> 赞同：1
> 
> 时间：2012-10-03T00:09:35.217
> 
> 标签：php, curl, connection

我们编写了一个通过 cURL 连接到 API 的 php/ajax 应用程序。我们构建它以无限期地保持联系，它运行良好，我们很高兴，定期使用它，然后转移到其他项目。

我们最近重新访问了它，发现它已经开始以不同的时间间隔超时。我们检查了脚本，寻找可能影响 cURL 调用的任何内容。没有什么。

我们在简单的 cURL 脚本中拥有并且拥有这些选项：

```
$sch = curl_init();
curl_setopt( $sch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($sch, CURLOPT_URL, $test_url);
curl_setopt($sch, CURLOPT_WRITEFUNCTION, 'get_data');
curl_setopt($sch, CURLOPT_NOSIGNAL, 1);
curl_setopt($sch, CURLOPT_TIMEOUT,0);
$output = curl_exec($sch); 
```

我的理解是 NOSIGNAL 和 TIMEOUT 选项的效果是保持我们的连接打开的原因。

但它不起作用。

我有两个问题。
1）关于编码的任何想法，我们在 cURL 中缺少的任何东西，或者代码中的其他地方是否有可能影响连接的东西？什么会影响连接？
2）如果问题不在于编码，我们如何检查上游连接。您如何检测实际断开连接的位置和原因？

感谢您的建议，如果您有任何问题或需要其他信息，请随时发布。

谢谢

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:15:09.753

您还需要设置`CURLOPT_CONNECTTIMEOUT`：

```
curl_setopt($sch, CURLOPT_CONNECTTIMEOUT,0); 
```

另外，尝试添加

```
if (curl_errno($sch) > 0) {
    error_log(sprintf(
        "Curl error %d: %s for %s\n", 
        curl_errno($sch), 
        curl_error($sch), 
        $test_url
    ));
} 
```

看看究竟是什么失败了。

# eclipse - 如何为 Eclipse 增量包构建 p2 站点？

> ID：12700225
> 
> 赞同：0
> 
> 时间：2012-10-03T00:09:50.677
> 
> 标签：eclipse, p2, tycho, delta-pack

我正在尝试为 Eclipse delta 站点构建我自己的 p2 更新站点（因为它不能用作 p2 更新站点）。

我做了什么：

```
 # Get the delta pack from Eclipse web site
 #
 wget http://mirror.cc.columbia.edu/pub/software/eclipse/eclipse/downloads/drops/R-3.7.2-201202080800/eclipse-3.7.2-delta-pack.zip

 # Unzip in its own directory (delta)
 #
 mkdir delta
 cd delta
 unzip ../eclipse-3.7.2-delta-pack.zip
 cd ../

 # Get Eclipse from Eclipse web site (in theory we could only get equinox,
 # but in pratice, it refused to start due to some race conditions.  Using
 # eclipse works out-of-the-box)
 #
 wget http://mirror.cc.columbia.edu/pub/software/eclipse/eclipse/downloads/drops/R-3.7.2-201202080800/eclipse-3.7.2-delta-pack.zip

 # Untar Eclipse (it creates an "eclipse" directory)
 #
 tar xzvf eclipse-java-indigo-SR2-linux-gtk-x86_64.tar.gz

 # Create (publish) a p2 site out of the delta features/plugins
 #
 ./eclipse/eclipse -console -consolelog -nosplash -debug -verbose        \
    -application org.eclipse.equinox.p2.publisher.FeaturesAndBundlesPublisher       \
    -metadataRepository file:${Repository}  \
    -artifactRepository file:${Repository}  \
    -source delta/eclipse                   \
    -configs ANY            \
    -publishArtifacts 
```

这在`${Repository}`以下结构中创建：

```
/<...>/local/apache2/htdocs/delta
    |-- artifacts.xml
    |-- content.xml
    |-- features
    |   `-- org.eclipse.equinox.executable_3.5.1.v20111216-1653-7P7NFUIFIbaUcU77s0KQWHw5HZTZ.jar
    `-- plugins
        |-- org.eclipse.compare.win32.source_1.0.200.I20110510-0800.jar
        |-- org.eclipse.compare.win32_1.0.200.I20110510-0800.jar
        |-- org.eclipse.core.filesystem.aix.ppc_1.1.0.v20110423-0524.jar
        |-- org.eclipse.core.filesystem.hpux.ia64_32_1.0.100.v20110423-0524.jar
        |-- org.eclipse.core.filesystem.linux.x86_1.4.0.v20110423-0524.jar
        |-- org.eclipse.core.filesystem.linux.x86_64_1.2.0.v20110423-0524.jar
        |-- org.eclipse.core.filesystem.macosx_1.3.0.v20110423-0524.jar
        |-- org.eclipse.core.filesystem.solaris.sparc_1.2.0.v20110423-0524.jar
        |-- org.eclipse.core.filesystem.win32.x86_1.1.300.v20110423-0524.jar
        |-- org.eclipse.core.filesystem.win32.x86_64_1.1.300.v20110423-0524.jar
        |-- org.eclipse.core.net.linux.x86_1.1.200.I20110419-0800.jar
        |-- org.eclipse.core.net.linux.x86_64_1.1.0.I20110331-0827.jar
        |-- org.eclipse.core.net.win32.x86_1.0.100.I20110331-0827.jar
        |-- org.eclipse.core.net.win32.x86_64_1.0.100.I20110331-0827.jar
        |-- org.eclipse.core.resources.win32.x86_3.5.100.v20110423-0524.jar
        |-- org.eclipse.equinox.launcher.carbon.macosx_1.1.100.v20110502.jar
        |-- org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.101.v20120109-1504.jar
        |-- org.eclipse.equinox.launcher.cocoa.macosx_1.1.101.v20120109-1504.jar
        |-- org.eclipse.equinox.launcher.gtk.aix.ppc64_1.1.0.v20110530.jar
        |-- org.eclipse.equinox.launcher.gtk.aix.ppc_1.1.0.v20110530.jar
        |-- org.eclipse.equinox.launcher.gtk.hpux.ia64_32_1.0.0.v20110502.jar
        |-- org.eclipse.equinox.launcher.gtk.linux.ppc64_1.0.100.v20110505.jar
        |-- org.eclipse.equinox.launcher.gtk.linux.s390x_1.1.100.v20110505.jar
        |-- org.eclipse.equinox.launcher.gtk.linux.x86_1.1.100.v20110505.jar
        |-- org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.100.v20110505.jar
        |-- org.eclipse.equinox.launcher.gtk.solaris.sparc_1.1.100.v20110505.jar
        |-- org.eclipse.equinox.launcher.gtk.solaris.x86_1.1.100.v20110505.jar
        |-- org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502.jar
        |-- org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502.jar
        |-- org.eclipse.equinox.security.macosx.source_1.100.100.v20100503.jar
        |-- org.eclipse.equinox.security.macosx_1.100.100.v20100503.jar
        |-- org.eclipse.equinox.security.win32.x86.source_1.0.200.v20100503.jar
        |-- org.eclipse.equinox.security.win32.x86_1.0.200.v20100503.jar
        |-- org.eclipse.equinox.security.win32.x86_64.source_1.0.0.v20110502.jar
        |-- org.eclipse.equinox.security.win32.x86_64_1.0.0.v20110502.jar
        |-- org.eclipse.jdt.launching.macosx.source_3.2.100.v20111006_r372.jar
        |-- org.eclipse.jdt.launching.macosx_3.2.100.v20111006_r372.jar
        |-- org.eclipse.jdt.launching.ui.macosx.source_1.0.100.v20111006_r372.jar
        |-- org.eclipse.jdt.launching.ui.macosx_1.0.100.v20111006_r372.jar
        |-- org.eclipse.swt.carbon.macosx.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.carbon.macosx_3.7.2.v3740f.jar
        |-- org.eclipse.swt.cocoa.macosx.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.cocoa.macosx.x86_64.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.cocoa.macosx.x86_64_3.7.2.v3740f.jar
        |-- org.eclipse.swt.cocoa.macosx_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.aix.ppc.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.aix.ppc64.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.aix.ppc64_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.aix.ppc_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.hpux.ia64_32.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.hpux.ia64_32_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.linux.ppc64.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.linux.ppc64_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.linux.s390.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.linux.s390_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.linux.s390x.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.linux.s390x_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.linux.x86.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.linux.x86_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.linux.x86_64.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.linux.x86_64_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.solaris.sparc.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.solaris.sparc_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.solaris.x86.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.gtk.solaris.x86_3.7.2.v3740f.jar
        |-- org.eclipse.swt.win32.win32.x86.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.win32.win32.x86_3.7.2.v3740f.jar
        |-- org.eclipse.swt.win32.win32.x86_64.source_3.7.2.v3740f.jar
        |-- org.eclipse.swt.win32.win32.x86_64_3.7.2.v3740f.jar
        |-- org.eclipse.ui.carbon.source_4.0.100.I20101109-0800.jar
        |-- org.eclipse.ui.carbon_4.0.100.I20101109-0800.jar
        |-- org.eclipse.ui.cocoa.source_1.1.0.I20101109-0800.jar
        |-- org.eclipse.ui.cocoa_1.1.0.I20101109-0800.jar
        |-- org.eclipse.ui.win32.source_3.2.200.v20110928-1505.jar
        |-- org.eclipse.ui.win32_3.2.200.v20110928-1505.jar
        |-- org.eclipse.update.core.linux.source_3.2.200.v20100512.jar
        |-- org.eclipse.update.core.linux_3.2.200.v20100512.jar
        |-- org.eclipse.update.core.win32.source_3.2.200.v20100512.jar
        `-- org.eclipse.update.core.win32_3.2.200.v20100512.jar 
```

我可以使用 URL [http://my.server/delta 检查](http://my.server/delta)。

当我在父 pom 中添加 url 时：

```
 <repositories>
            <repository>
                    <id>delta</id>
                    <layout>p2</layout>
                    <url>http://my.server/delta</url>
            </repository>
            <repository>
                    <id>eclipse-platform</id>
                    <layout>p2</layout>
                    <url>http://download.eclipse.org/releases/indigo</url>
            </repository> 
```

它没有选择我的项目需要的插件：

```
[INFO] Cannot complete the request.  Generating details.
[INFO] Cannot complete the request.  Generating details.
[INFO] {osgi.ws=win32, osgi.os=win32, osgi.arch=x86_64, org.eclipse.update.install.features=true}
[ERROR] Cannot resolve project dependencies:
[ERROR]   Software being installed: com.example.fs 1.0.0.qualifier
[ERROR]   Missing requirement: com.example.fs 1.0.0.qualifier requires 'org.eclipse.ui.carbon 0.0.0' but it could not be found 
```

插件 org.eclipse.ui.carbon 位于生成的 contents.xml 和 artifacts.xml 文件中，也位于 plugins 目录中：

```
/<...>/local/apache2/htdocs/delta
    |-- artifacts.xml
    |-- content.xml
    |-- features
    `-- plugins 
```

我不确定为什么 maven 无法从更新站点获取插件。我该如何调试/修复这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-24T11:02:47.090

Delta Pack 内容已在“Eclipse 项目更新”更新站点中可用（例如，Kepler 的[http://download.eclipse.org/eclipse/updates/4.3](http://download.eclipse.org/eclipse/updates/4.3)）。只需在您的目标平台中包含特性组*Eclipse RCP*和*Equinox Target Components 。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:27:26.737

其实我说得太早了。虽然更新站点 /eclipse/updates/3.7 具有“Eclipse 平台启动器”，但我看不到如何获取所有平台。

我确实得到了“Eclipse Platform Launchers”，但现在我的产品缺少以下插件。我们需要这些插件来为多个平台构建产品：

```
<plugin id="org.eclipse.swt.carbon.macosx" fragment="true"/>
<plugin id="org.eclipse.swt.cocoa.macosx" fragment="true"/>
<plugin id="org.eclipse.swt.cocoa.macosx.x86_64" fragment="true"/>
<plugin id="org.eclipse.swt.gtk.aix.ppc" fragment="true"/>
<plugin id="org.eclipse.swt.gtk.aix.ppc64" fragment="true"/>
<plugin id="org.eclipse.swt.gtk.hpux.ia64_32" fragment="true"/>
<plugin id="org.eclipse.swt.gtk.linux.ppc64" fragment="true"/>
<plugin id="org.eclipse.swt.gtk.linux.s390" fragment="true"/>
<plugin id="org.eclipse.swt.gtk.linux.s390x" fragment="true"/>
<plugin id="org.eclipse.swt.gtk.linux.x86" fragment="true"/>
<plugin id="org.eclipse.swt.gtk.linux.x86_64" fragment="true"/>
<plugin id="org.eclipse.swt.gtk.solaris.sparc" fragment="true"/>
<plugin id="org.eclipse.swt.gtk.solaris.x86" fragment="true"/>
<plugin id="org.eclipse.swt.win32.win32.x86" fragment="true"/> 
```

这就是我最初使用 delta 包的原因。

我想问题更多：您如何仅使用软件更新站点为多个平台构建产品？

# c# - 如何在 WinRT 中按字母顺序对 ListBox 项目进行排序？

> ID：12700227
> 
> 赞同：0
> 
> 时间：2012-10-03T00:10:14.237
> 
> 标签：c#, sorting, listbox, windows-8, windows-runtime

在 Windows RT 中，ListBox 似乎缺少 Sort 方法。我将如何按字母顺序对项目进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:21:40.317

您可以对其绑定的列表进行排序，通常是直接对列表进行排序，因为在 WinRT 中已经省略了对[ICollectionView的排序和过滤。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.icollectionview)有关详细信息，请参阅[在 WinRT 中创建排序集合视图](https://stackoverflow.com/questions/7649532/creating-a-sorted-collection-view-in-winrt)。

# regex - LFTP 将文件放在特定目录中？

> ID：12700228
> 
> 赞同：0
> 
> 时间：2012-10-03T00:10:28.213
> 
> 标签：regex, bash, shell

我正在处理以下 bash 脚本，我需要上传超过 10 MB 的特定文件：

```
#!/bin/sh

FTP_HOST=ftp.ftphost.com
FTP_USER=myftpuser
FTP_PASS=securepassword

[[ -n "$1" ]] || { echo "Usage: findlarge [PATHNAME]"; exit 0 ; }
FILES=`find "$1" -type f -size +10000k -printf '%p;'`

OLD_IFS="$IFS"
IFS=";"
FILES_ARRAY=( $FILES )
IFS="$OLD_IFS"

for fl in "${FILES_ARRAY[@]}"
 do
   INVERSE=`${fl//\/var\/www\/html/\/public_html}`
   lftp -u $FTP_USER,$FTP_PASS -e "cd '${INVERSE}'; put '${fl}';quit" $FTP_HOST
 done 
```

它用于需要将较大文件上传到其服务器的特定 CDN，它正在尝试做什么，而我不知道如何继续是在主机端找到文件`/var/www/html/`但远程服务器需要将它们放置在`/public_html/`. 我在远程服务器上需要与在主机服务器上相同的文件结构。

我遇到的问题`$INVERSE`仍然包括实际的文件名和路径。我需要一种方法从 INVERSE 变量中删除文件名，以便我可以正确地将文件放在正确的目录中。

有谁知道一个正则表达式语句可以采用以下内容：

```
/public_html/path/to/file/filename.zip 
```

并将其更改为

```
/public_html/path/to/file/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:15:01.893

你可以使用：

```
$(dirname "$INVERSE") 
```

完全符合您的要求 =)

此外，将正则表达式与 sed 一起使用：

```
$(echo "$INVERSE" | sed -e 's,/[^/]*$,/,') 
```

解释正则表达式：

1.  匹配斜线
2.  尽可能多地匹配不是斜线的字符
3.  匹配行尾

在替换时，我们只是确保不删除最后一个斜线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:22:20.247

使用 bash*参数扩展*：

```
$ x=/public_html/path/to/file/filename.zip
$ echo ${x%/*}/
/public_html/path/to/file/ 
```

它具有使用*内置 bash 的*优势，因此非常轻巧。

见[http://wiki.bash-hackers.org/syntax/pe](http://wiki.bash-hackers.org/syntax/pe)

# java - java - 未为类型定义运算符和（布尔值，整数）

> ID：12700229
> 
> 赞同：0
> 
> 时间：2012-10-03T00:10:46.433
> 
> 标签：java, operators, syntax-error

我正在将 c++ 标头转换为 java，以下不起作用。opstring 是一个字符串，而 alumacOP 是一个字符串数组。opindex 是一个整数。

```
opstring = alumacOP[opindex][(op >> 11) & 3 == 3]; //code does not work. 
```

由于某种原因，这不起作用。这不是算法，而是eclipse说没有为布尔和int类型定义'&'。

所以我的问题是：为什么逻辑 AND 在 java 中只引用布尔值？因为这有效：

```
boolean boola,boolb;
if(boola & boolb)
  return; 
```

但不是这个（eclipse仍然抛出一个错误：

```
int x = 9, y = 8;
for(int i = 0; i < 100; i++)
  if(x & y = i)
    return; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T00:14:58.100

这取决于运算符的优先级。

```
opstring = alumacOP[opindex][(((op >> 11) & 3) == 3)?1:0]; 
```

是你想要的。（注意 & 周围的括号和 ?: 将 bool 转换为 int。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T00:14:22.737

您看到的 & 是按位与，而不是逻辑与。

您看到它引发错误的原因是因为您的 if 语句条件是赋值，而不是检查。

您需要使用 2 个等号 (==)，例如 if (x & y == i)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T00:13:15.763

在 java 中，您可以`&`在两个`boolean`s 或两个`int`s 上执行此操作，但您不能在其中一个上执行此操作。`=`还要注意您的操作顺序，以及和之间的区别`==`。

# php - 带有动态图像的滑块

> ID：12700232
> 
> 赞同：0
> 
> 时间：2012-10-03T00:11:25.703
> 
> 标签：php, database, slider

我有一个滑块，我以这种方式从数据库中获取数据：

```
$sql="SELECT * FROM `banners` ORDER BY `id` DESC LIMIT 4"; 
$banners = $rs->get_object_list($sql); 

<?php foreach($banners as $ban) {  
$imagen="imagenes/banners/$ban->id/img.jpg"; ?> 

<img id="<?php echo $ban->id ?>" align="center" src="<?php echo $imagen ?>" class="slide" alt=""/> 

<?php } ?>

<script type="text/javascript">

 if(!window.slider) var slider={};  
 slider.data=[{"id":"1","client":"","desc":""},{"id":"2","client":"","desc":""},{"id":"3","client":"","desc":""},{"id":"4","client":"","desc":""}];

</script> 
```

但是我有一个问题，如果我上传例如 3 张图片，最后一张与第 3 张相同，我想我需要编写一些动态的东西，我尝试了这段代码：

```
slider.data=[{"id":"slide-img-<?php echo $ban->id ?>","client":"","desc":""}]; 
```

但它不起作用，希望有人能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:30:05.317

您可以执行以下操作：

```
<script type="text/javascript">
    if(!window.slider) var slider={};  
        slider.data= [
            <?php
                $resultstr = array();
                foreach ($banners as $ban) {
                    $resultstr[] = "{'id': $ban->id,'client':'','desc':''}";
                }
                $result = implode(",",$resultstr);
                echo $result;
            ?>];
</script> 
```

# php - Mongo ODM near 查询不填充距离属性。它是空的吗？

> ID：12700235
> 
> 赞同：0
> 
> 时间：2012-10-03T00:11:46.140
> 
> 标签：php, mongodb, symfony, doctrine-mongodb

根据 Mongo ODM，在近距离查询后应该能够获得距离：

[http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/geospatial-queries.html#distance](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/geospatial-queries.html#distance)

当我使用文档中显示的近查询时，我能够获得结果，但是距离永远不会被添加。

这是我的查询：

```
 $query = $dm->createQueryBuilder('SomeBundle:Blah')
        ->select('id', 'name', 'distance', 'propertyType', 'squareFootage')->field('coordinates')->near($latitude, $longitude);

$results = $query->getQuery()->execute();

foreach ($results as $city) {
    echo $city->name.': '.$city->distance."\n";
} 
```

我的距离属性设置为：

```
 /** @MongoDB\Distance */
    public $distance; 
```

我没有得到任何结果。Mongo ODM 有错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:49:49.850

而不是使用

```
$query->near($latitude, $longitude); 
```

你需要使用

```
$query->geoNear($latitude, $longitude) 
```

如果你想填充距离。

# java - 从返回的匿名内部类调用 @Bean 方法的线程安全

> ID：12700239
> 
> 赞同：0
> 
> 时间：2012-10-03T00:12:36.340
> 
> 标签：java, spring, thread-safety, config

假设这是从多个线程调用的，以下测试方法是否是线程安全的？有时 println 语句显示“null”。

这个想法是返回一个映射，该映射将根据提供的标识符按需创建 bean。请注意，这只是一个简单的示例，用于说明一个类似的现实生活场景，其中一个 bean 使用相同的方法没有满足其依赖关系（例如，value.x 为空）。对于加分，是否有另一种（更好的）方法可以达到相同的效果？

```
import java.util.Collections;
import java.util.HashMap;
import java.util.Map;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

import javax.annotation.Resource;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Scope;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.support.AnnotationConfigContextLoader;

import com.oanda.bi.rm.test.AnnotationConfigTest.Config;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = { Config.class }, loader = AnnotationConfigContextLoader.class)
public class AnnotationConfigTest {

    @Resource
    Map<String, Value> map;

    @Test
    public void test() throws InterruptedException {
        ExecutorService service = Executors.newFixedThreadPool( 10 );

        for ( int i = 0; i < 10; i++ ) {
            service.execute( new Runnable() {
                @Override
                public void run() {
                    // Is this thread-safe?
                    Value value = map.get( "value" );

                    // Sometimes null!
                    System.out.println( value.x );
                }
            } );
        }

        service.shutdown();
        service.awaitTermination( 1, TimeUnit.MINUTES );
    }

    public static class Value {
        @Resource
        protected Integer x;
    }

    @Configuration
    public static class Config {

        @Bean
        public Integer x() {
            return 1;
        }

        @Bean
        @Scope("prototype")
        public Value value() {
            return new Value();
        }

        @Bean
        @SuppressWarnings("serial")
        public Map<String, Value> map() {
            // Return a Spring agnostic "bean factory" map
            return Collections.unmodifiableMap( new HashMap<String, Value>() {
                @Override
                public Value get( Object obj ) {
                    String key = (String) obj;

                    if ( key.equals( "value" ) ) {
                        // Create new bean on demand
                        return value();
                    }

                    // Assume other similar branches here...

                    return null;
                }
            } );
        }

    }
} 
```

**更新**

鉴于来自 Biju Kunjummen 的富有洞察力的反馈，我尝试了一种直接使用应用程序上下文的不同方法，但它仍然失败，将返回空值。这次我使用的是 Function 抽象而不是 Map ，这似乎更合适：

```
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

import javax.annotation.Resource;

import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Scope;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.support.AnnotationConfigContextLoader;

import com.google.common.base.Function;
import com.oanda.bi.rm.test.AnnotationFunctionConfigTest.Config;

/**
 * Unit test that tries to perform the same pattern as {#link ResourceConfig} and ensure
 * thread safety.
 * 
 * @see http://stackoverflow.com/questions/12700239/thread-safety-of-calling-bean-methods-from-returned-annonymous-inner-classes/12700284#comment17146235_12700284
 * @see http://forum.springsource.org/showthread.php?130731-Thread-safety-of-calling-Bean-methods-from-returned-annonymous-inner-classes&p=426403#post426403
 * @author btiernay
 */
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = { Config.class }, loader = AnnotationConfigContextLoader.class)
public class AnnotationFunctionConfigTest {

    @Resource
    Function<String, Value> function;

    @Test
    public void test() throws InterruptedException {
        final int threads = 10;
        ExecutorService service = Executors.newFixedThreadPool( threads );

        for ( int i = 0; i < threads; i++ ) {
            service.execute( new Runnable() {
                @Override
                public void run() {
                    Value value = function.apply( "value" );
                    Assert.assertNotNull( value.x );
                }
            } );
        }

        service.shutdown();
        service.awaitTermination( 1, TimeUnit.MINUTES );
    }

    public static class Value {
        @Resource
        protected Integer x;
    }

    @Configuration
    public static class Config {

        @Bean
        public Integer x() {
            return 1;
        }

        @Bean
        @Scope("prototype")
        public Value value() {
            return new Value();
        }

        @Bean
        public Function<String, Value> function() {
            // Return a Spring agnostic "bean factory" function
            return new Function<String, Value>() {
                @Autowired
                private ApplicationContext applicationContext;

                @Override
                public Value apply( String key ) {
                    if ( key.equals( "value" ) ) {
                        // Create new bean on demand
                        return applicationContext.getBean( key, Value.class );
                    }

                    // Assume other similar branches here...

                    return null;
                }
            };
        }

    }
} 
```

有人愿意评论为什么这似乎仍然不安全吗？

**更新**

这看起来可能是一个 Spring 错误。我提交了一张jira票：

[https://jira.springsource.org/browse/SPR-9852](https://jira.springsource.org/browse/SPR-9852)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:53:52.127

我不推荐您实施它的方式：

1.  就像乔丹说的那样，那里并不真正需要地图，您根本没有将它用作哈希图，而只是使用它来调用 .value() 方法。

2.  Spring @Configuration 机制正在被绕过，在内部 Spring 为 @Configuration 类创建了一个 CGLIB 代理，并使用它知道哪些依赖项需要在哪里注入并创建知道如何管理范围的实例，通过绕过它，你基本上没有使用 Spring 来不再管理您的 bean 实例。

以下内容与您实现的内容类似，但我认为更简单并且每次都可以始终如一地工作 - 这是通过使用应用程序上下文来获取原型 bean 并以这种方式将其隐藏在自定义工厂后面：

**更新的实施**

```
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Scope;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
public class AnnotationConfigTest {

    @Autowired PrototypeBeanFactory prototypeFactory;

    @Test
    public void test() throws InterruptedException {
        ExecutorService service = Executors.newFixedThreadPool( 10 );

        for ( int i = 0; i < 10; i++ ) {
            service.execute( new Runnable() {
                @Override
                public void run() {
                    Value value = prototypeFactory.getBean("value", Value.class);
                    System.out.println( "value1.x = "  + value.getX() );
                }
            } );
        }

        service.shutdown();
        service.awaitTermination( 1, TimeUnit.MINUTES );
    }

    public static class Value {
        @Autowired
        private Integer x;

        public Integer getX() {
            return x;
        }

        public void setX(Integer x) {
            this.x = x;
        }
    }

    @Configuration
    public static class Config {

        @Bean
        public Integer x() {
            return 1;
        }

        @Bean
        @Scope(value="prototype")
        public Value value() {
            return new Value();
        }

        @Bean
        public PrototypeBeanFactory prototypeFactory(){
            return new PrototypeBeanFactory();
        }

    }

    public static class PrototypeBeanFactory implements ApplicationContextAware{
        private ApplicationContext applicationContext;
        @Override
        public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
            this.applicationContext = applicationContext;
        }

        public<T> T getBean(String name, Class<T> clazz){
            return this.applicationContext.getBean(name, clazz);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:19:24.737

你所做的只是返回一个只有一个 get 方法的不可变映射，所以如果你正在修改传入的 obj 的值，那么这不是线程安全的唯一方法。更好的解决方案可能是使用 ConcurrentHashMap 而不是 Collections.unmodifiableMap，但这只有在您计划稍后向地图添加值时才会真正有用。

# java - NetBeans Profiler 上的 byte[] 和 char[]

> ID：12700241
> 
> 赞同：0
> 
> 时间：2012-10-03T00:12:47.667
> 
> 标签：java, netbeans, profiling, profiler

我在我的应用程序中运行 NetBeans Profiler，并且 byte[] 和 char[] 占用了大约 90% 的分配内存。我的实体、bean、服务等，不占2%。

你知道为什么或者它可能是一些 NetBeans Profiler 的错误吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:34:11.277

这可能不是一个错误，因为在许多情况下，底层对象是`char[]`或。`byte[]`例如 -即使对于大s，`String`对象的大小也会显示为非常小，因为该对象实际上包含一个`String``String``char[]`，它是实际的大分配。

看看[OpenJDK 的实现](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java)。根本不是一个大对象，但包含一个可能很大的`char[]`.

# python - 熊猫：布尔索引上的边缘情况进入空DataFrame

> ID：12700251
> 
> 赞同：0
> 
> 时间：2012-10-03T00:13:49.273
> 
> 标签：python, dataframe, pandas

我正在使用熊猫 0.8.1

创建一个非空数据框：

```
import pandas
blah = pandas.DataFrame(numpy.empty([1, 1]), columns=['A'], index=pandas.DatetimeIndex(['2008-01-01']))
blah[numpy.array([true], bool)]

            A
2008-01-01  0

blah[numpy.array([True], bool)] = 0.0 
```

没关系，但是在空的情况下：

```
blah = pandas.DataFrame(numpy.empty([0, 1]), columns=['A'], index=pandas.DatetimeIndex([]))
blah[numpy.array([], bool)]

Empty DataFrame
...

blah[numpy.array([], bool)] = 0.0

Traceback (most recent call last):
...
IndexError: invalid index 
```

这是不对的，是吗？

# css - 字体在 Chrome 中呈现不佳

> ID：12700253
> 
> 赞同：0
> 
> 时间：2012-10-03T00:14:07.883
> 
> 标签：css, google-chrome, font-face

我查看了几种不同的解决方案，例如将 -webkit-font-smoothing 设置为抗锯齿和重置文本阴影。一切都无济于事，这真的让我很烦。

字体差异：http: [//imgur.com/a/8w9TM](http://imgur.com/a/8w9TM)

Firefox 和 Internet Explorer，然后是 chrome。

这是 chrome 行为，还是（更有可能）我实施不正确的东西？无论哪种方式，关于我能做些什么的任何建议？

```
@font-face{
    font-family: Patagonia;
    src: url('style/patagonia_regular_macroman/Patagonia-webfont.ttf');
    font-weight: normal;
    font-style: normal; 
} 
```

（注意：我将 IE 的字体包含在单独的 IE 特定 css 中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:26:41.370

这很可能是 Chrome 的问题，而不是您的实施问题。Chrome 已经被字体渲染怪癖困扰了很长一段时间。我知道 Jeff Atwood (@codinghorror) 进行了一些比较，但目前我似乎找不到它们。

我建议只针对 Safari（它也使用 WebKit）并等待谷歌的人推出补丁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T21:52:12.167

我尝试了网络上的每一个技巧，然后我尝试了这个......根本不理想，但它适用于我正在使用的 typekit 字体。

```
h1{
    background:white;
    -webkit-background-clip:text;
    color:transparent;
} 
```

# android - android将特定字符设置为inputType

> ID：12700254
> 
> 赞同：2
> 
> 时间：2012-10-03T00:14:08.050
> 
> 标签：android

我正在寻找一种“自定义” `inputType`. `EditText`用户应该输入具有格式的日期`dd.mm.yyyy`（是的，我不想使用日期选择器）。设置为`inputType`只`numberDecimal`允许输入一个点，但我希望只有数字键盘，而不是整个键盘。有没有一种简单的方法可以在不编写自定义键盘的情况下实现这一目标？

所以基本上我只想使用 [1,2,3,4,5,6,7,8,9,0,.]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T00:39:45.990

每当您将输入限制为一组唯一的字符时，您都可以使用[digits](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3adigits)属性：

```
android:digits="01234567890./-" 
```

您指定的每个字符都可以使用一次或多次，甚至可以包含字母和其他符号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T00:29:00.700

解决方法很简单：`inputType="date"`.

首先的问题是，在我的 AVD 中，中文和日文键盘被激活了。尝试输入点时似乎存在错误。所以我只是删除了这两种语言作为额外的键盘语言，它可以工作。

# json - Formcollection 无法处理带有“=”的 JSON

> ID：12700258
> 
> 赞同：0
> 
> 时间：2012-10-03T00:14:38.100
> 
> 标签：json, asp.net-mvc-3, stringify

当我尝试做这样的事情时：

```
$.post('@Url.Action("PostComment")', {"Id":32,"Title":"=","Desc":"=",}, function (data) {
    ....
} 
```

我的控制器在 FormCollection 中接收到这个值：

```
public ActionResult PostComment(FormCollection comment) {
    ....
} 
```

奇怪的是，这个值看起来像：

```
","Desc":"="} 
```

（该值使用： JSON.stringify( { Id: 32, Title: "=", Desc: "=" })

但是，当字符不是“=”时，对象被正确接收。

如何发送带有此特殊字符的 JSON 对象？似乎 MVC3 无法处理这些值......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:40:18.910

我对你真正想要发送的内容有点困惑，所以我将描述这两种情况。

您的 JavaScript 片段和操作方法会建议您发送`application/x-www-form-urlencoded`- 在这种情况下，您不应该`JSON.stringify`在您的数据上使用，一切都应该正常工作。

但是如果你真的想发送 JSON ( `application/json`)，那么你的 JavaScript 应该有点不同：

```
$.ajax({
    type: 'POST',
    url: '@Url.Action("PostComment")',
    data: JSON.stringify( { Id: 32, Title: '=', Desc: '=' }),
    contentType: 'application/json',
    success: function(result) {
    ...
    }
}); 
```

您还应该为实体获取一个类（它也可以用于`application/x-www-form-urlencoded`数据）：

```
public class Comment
{
    public int Id { get; set; }

    public string Title { get; set; }

    public string Desc { get; set; }
} 
```

它允许您像这样更改您的操作方法（同样，这也可以用于`application/x-www-form-urlencoded`数据）：

```
public ActionResult PostComment(Comment comment)
{
    ...
} 
```

ASP.NET MVC 将正确绑定数据，只需确保您以正确的格式和正确的内容类型发送数据，并且 JSON 应该绑定到对象。

**更新**

您的评论中还出现了另一种情况 - 将 JSON 作为表单中的字段值发布。要实现这一点，您应该首先将 JavaScript 更改为如下所示：

```
$.post('@Url.Action("PostComment")', { jsonComment: JSON.stringify({ Id: 32, Title: '=', Desc: '=' }) }, function (data) {
    ...
}); 
```

现在可以通过以下两种方式之一访问原始 JSON `FormCollection`：

```
[HttpPost]
public ActionResult PostComment(FormCollection fields)
{
    string jsonComment = fields["jsonComment"];
    ...
} 
```

或直接按名称：

```
[HttpPost]
public ActionResult PostComment(string jsonComment)
{
    ...
} 
```

这种包装是必需的，因为`FromCollection`不能直接使用 JSON，它不是为它设计的。您需要发布正确的表单数据，但您可以毫无问题地将 JSON 作为值（并且您也可以在该表单数据中包含其他简单值）。

# android - 使用库的应用程序的高级/免费版本？

> ID：12700262
> 
> 赞同：1
> 
> 时间：2012-10-03T00:14:49.167
> 
> 标签：android

我已经阅读并很好地理解了 Eclipse 中的库项目，但是我不理解它的一个功能。我想将我的一个应用程序声明为库项目，并使用它来创建高级付费应用程序和免费的广告支持版本。我听说这是可能的，但我仍然不确定我将如何使其工作。

我使用库的经验是使用它们来提供框架供其他应用程序使用。那是我难以弄清楚的领域；从本质上讲，我不会向项目添加任何内容，而是修改一些布局文件以添加广告横幅视图，所以我不确定如何让项目覆盖库文件，或者这是否正确要做的事。

谁能给我如何实现这一目标的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:38:48.613

应用程序可以覆盖库资源，因此在简单的情况下，您可以创建布局的新版本，但在顶部或底部添加广告。此外，您可能会做一些子类化或依赖注入来操作插页式广告的导航流。如果您想在广告版本中添加插页式广告，而不是直接在您的付费版本中启动“下一个”活动，您可以从某个导航管理器类中获取一个意图，该类的实现为您提供了不同的意图您的广告版本与付费版本。

# php - 如何拒绝用户访问但从 .htaccess 启用 php 脚本

> ID：12700267
> 
> 赞同：0
> 
> 时间：2012-10-03T00:15:15.723
> 
> 标签：php, apache, file, .htaccess

我有一个服务器，它将图像存储在一个名为“图像”的文件夹中，但我希望它只能由 php 脚本访问。任何人都可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:22:37.810

在您的`images`文件夹中，使用以下命令创建一个 htaccess 文件：

```
Deny from All 
```

然后在您的 php 脚本中，您执行以下操作：

```
<?php
$file = 'images/image.jpg';

if (file_exists($file)) {
    header('Content-Type: image/jpeg');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:23:50.673

首先，您使用简单的 .htaccess 阻止直接访问

```
deny from all 
```

您可以使用[`readfile`](http://php.net/manual/en/function.readfile.php)从文件系统读取图像并将字节输出到 HTTP 响应正文。

# java - 将 Spring Mongo 更新转换为 JSON 字符串

> ID：12700268
> 
> 赞同：4
> 
> 时间：2012-10-03T00:15:20.617
> 
> 标签：java, spring, mongodb, spring-data, spring-data-mongodb

我有一个`Update`对象的实例，我想将它转换为它的字符串 JSON 表示，以便以后可以使用它。

我创建了这样的更新对象：

```
Update update = new Update();
update.set("field", new SomeClass());
update.unset("otherField");
// etc 
```

我最初的尝试是：

```
update.getUpdateObject().toString(); 
```

这种方法适用于大多数情况，但偶尔会失败，因为它无法序列化`SomeClass`. 这是堆栈跟踪：

```
java.lang.RuntimeException: json can't serialize type : class com.example.SomeClass
at com.mongodb.util.JSON.serialize(JSON.java:261)
    at com.mongodb.util.JSON.serialize(JSON.java:115)
    at com.mongodb.util.JSON.serialize(JSON.java:161)
    at com.mongodb.util.JSON.serialize(JSON.java:141)
    at com.mongodb.util.JSON.serialize(JSON.java:58)
    at com.mongodb.BasicDBObject.toString(BasicDBObject.java:84) 
```

我有一个可用的实例，`MongoTemplate`但`MongoConverter`我不确定如何使用这些类来完成这项任务。

问题是：

获取更新对象的 JSON 表示的正确方法是什么？

我正在使用 spring-data-mongodb 版本 1.1.0.M1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T05:20:22.133

你可以通过使用来做到这一点，

```
Update update = new Update();

JSONObject jsonObject = new JSONObject(new SomeClass());

update.set("field",JSON.parse(jsonObject.toString()));
update.unset("otherField");

System.out.println(update.getUpdateObject().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T01:33:58.897

I've met the same problem, and solved by turning `SomeClass` into `DBObject`:

```
DBObject dbObject = new BasicDBObject();
dbObject.put("fieldA", "a"); // set all fields of SomeClass
...

update.set("field", dbObject); 
```

# mysql - 导入MySQL5.5数据库

> ID：12700270
> 
> 赞同：1
> 
> 时间：2012-10-03T00:15:49.947
> 
> 标签：mysql, import, phpmyadmin

我最近升级到 Windows server 2008 并想通过我的 MySQL 数据库进行传输。

我所有的文件都移到了 Windows.old，我将我的“数据”表从 Program Files / MySQL 5.5 / Data 移到了我当前窗口的新程序文件中，并重新启动了 MySQL 服务，但 phpmyadmin 无法检测到我的数据库。

我处于恐慌状态，因为我丢失了所有重要的数据库，请帮助。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:19:56.210

好消息是，如果您现在使用与以前相同的 MySQL 版本和发行版，您的数据可能不会丢失。你只需要弄清楚 MySQL 找不到数据库文件的原因。

如果可以启动 MySQL 命令行程序，请尝试运行查询

> 显示像“datadir”这样的变量；

查看数据目录是否设置在您期望的位置。如果没有，请编辑 my.ini（它可能会从您不期望的位置获取 my.ini）。

如果您无法启动 MySQL Windows 服务，请检查 Windows 事件日志。

# .net - 是否有 .Net 发布/订阅框架

> ID：12700278
> 
> 赞同：3
> 
> 时间：2012-10-03T00:18:23.060
> 
> 标签：.net, publish-subscribe

我正在寻找.net 中的发布/订阅框架。我的目标是让客户动态注册/注销以接收某些消息。然后消息队列处理器出列并向客户端发送适当的消息。我想找到已经构建的东西，所以我不必构建这将需要的所有系统管理。有什么建议么 ？描述此类内容的博客。Azure Appfabric 可能是我正在寻找的东西，但我发现的一切都是非常低级的。我正在寻找一个几乎完整的框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T08:59:30.650

在我们的研究项目中，我们最近开发了一个基于 .net 的完全分布式中间件，称为 Ella。它基于 UDP 广播在网络中执行自动发现。您可以在[http://ella.codeplex.com找到它](http://ella.codeplex.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:23:36.150

查看[NServiceBus](http://nservicebus.com/) (http://nservicebus.com/)

# facebook - 在 Facebook.com 上部署我的应用

> ID：12700279
> 
> 赞同：0
> 
> 时间：2012-10-03T00:18:23.407
> 
> 标签：facebook, facebook-graph-api, deployment, facebook-canvas

我有个问题。如果我使用笔记本电脑上的本地服务器在本地开发我的应用程序，我可以使用 facebook.com 上的画布部署它吗？然后用户可以登录并访问我的应用程序。对？但是，如果服务器本地不会有问题。我是 FB 开发人员的新手。如果这不是一个好问题，请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:43:23.890

您需要在自己的服务器上托管您的代码，或者使用 Facebook 通过[heroku提供的免费托管选项](https://devcenter.heroku.com/articles/facebook)

# unix - 将单词拆分为字符 - Unix

> ID：12700280
> 
> 赞同：4
> 
> 时间：2012-10-03T00:18:34.613
> 
> 标签：unix, split, character, words

如果我有一个叫做“橙色”的词，我如何将它拆分成单独的字符。

我的输出应该是：

```
o
r
a
n
g
e 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-03T00:28:22.180

```
echo orange | fold -w 1 
```

输出

```
o
r
a
n
g
e 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-05T03:57:24.143

这是一个解决方案`grep`：

`echo "orange" | grep -o .`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T00:28:17.253

这是使用 sed 的解决方案：

```
echo orange | sed 's/./&\n/g' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-26T02:26:02.873

一个纯 bash 解决方案（比在短字符串上调用外部工具更快）：

```
$ a="orange"
$ [[ $a =~ ${a//?/(.)} ]] && printf '%s\n' "${BASH_REMATCH[@]:1}"
o
r
a
n
g
e 
```

# php - 生成分页超链接的公式？

> ID：12700290
> 
> 赞同：1
> 
> 时间：2012-10-03T00:20:13.387
> 
> 标签：php, math, pagination

如果这是解决此问题的错误站点，我深表歉意，因为它与数学有关而不是编程。我正在尝试以 Google 风格的方式编写一系列 7 页链接。本质上，它将是 7 个数字，其中 s 是我的起始值。我无法计算我的起始值。

事先，该系列中的最大值是可变的，具体取决于用户提供的搜索词，它可能小于、大于或等于 7。在我的公式编写尝试中，我一直将此值称为 g。我也知道用户选择的页码。我一直把这个值称为 p 所以，例如，如果 g 是 21，我需要生成这些数字系列，其中粗体数字等于 p：

**1** 2 3 4 5 6 7

1 **2** 3 4 5 6 7

1 2 **3** 4 5 6 7

1 2 3 **4** 5 6 7

4 5 6 **7** 8 9 10

5 6 7 **8** 9 10 11

15 16 17 18 19 **20** 21

只要我可以使用可用信息确定起始值，其他一切都会到位。谁能建议我如何使用可用信息计算我的起始值？如果它是相关的，我将用 PHP 编写这个公式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T22:22:29.373

假设您想要`$n`链接并且`$g`是页数，在您的情况下`$n = 7`，起始值的`$s`范围只能从`1`到`$g - ($n - 1)`。

通常，当您不在这些限制之外时，起始值`$s`与页码相关`$s = $p - floor($n / 2)`。

将所有这些放在一个 PHP 函数中，您将得到：

```
// $p -- user's current page
// $g -- total number of pages
// $n -- number of links
function start_link($p, $g, $n)
{
    $s = $p - floor($n / 2);
    if($s < 1)
    {
        return 1;
    }
    $max_s = $g - ($n - 1);
    if($s > $max_s)
    {
        return $max_s;
    }
    return $s;
} 
```

您可以按如下方式测试此功能：

```
print start_link(1,21,7) . "\n";
print start_link(2,21,7) . "\n";
print start_link(3,21,7) . "\n";
print start_link(4,21,7) . "\n";
print start_link(7,21,7) . "\n";
print start_link(8,21,7) . "\n"; 
```

这将打印您在问题中给出的示例序列的起始页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:28:32.027

这不是一个公式，而是一个算法（因为它涉及一系列迭代步骤......除非你使用 Haskell）。

这是我使用的算法：

```
Int32[] CreateLinks(Int32 currentPageNumber, Int32 totalPages) {
    Int32[] links = new Int32[ Math.Min( totalPages, 10 ) ];
    Int32 start = currentPageNumber < 5 ? 1 : currentPageNumber;
    start = currentPageNumber > totalPages - 5 ? totalPages - 10 : start;
    for(int i=0;i<links.Length;i++) {
        links[i] = start + i;
    }
} 
```

其中`Int32[]`数组是一组页面链接。注意我的实现有一个隐藏的错误，你能看到吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:32:09.103

这是我最终为此编写的（PHP）代码。但是这段代码实际上计算了 9 个（不是 7 个）搜索页面链接的起始页和终止页。

```
if ($pagecount < 1) $start_page = 0;
else{
    $hyperlink_start_page = $hyperlink_end_page = $current_page;
    $hyperlink_start_page = $hyperlink_start_page - 4;
    $offset = 0;

    if ($hyperlink_start_page < 1 ){
        $offset = 1 - $hyperlink_start_page;
        $hyperlink_start_page = 1;
    }

    $hyperlink_end_page = $hyperlink_end_page + 4 + $offset;
    $offset = 0;

    if ($hyperlink_end_page > $lastpage ){
        $offset = $hyperlink_end_page - $pagecount;
        $hyperlink_end_page = $pagecount;
    }

    $hyperlink_start_page = $hyperlink_start_page - $offset;
    if ($hyperlink_start_page < 1 ) $hyperlink_start_page = 1;
} 
```

# html - Twitter bootstrap 响应速度不快

> ID：12700291
> 
> 赞同：0
> 
> 时间：2012-10-03T00:20:15.603
> 
> 标签：html, twitter-bootstrap

我想我会尝试一下 twitter bootstrap，然后我想出了以下布局。

```
<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <title></title>
</head>
<body>
    <div id="header" class="container">
        <div class="row">
            <div class="span1" style="background-color: yellow; height:50px;">
            </div>
            <div class="span1" style="background-color: yellow; height:50px;">
            </div>
            <div class="span1" style="background-color: yellow; height:50px;">
            </div>
            <div class="span1" style="background-color: yellow; height:50px;">
            </div>
            <div class="span1" style="background-color: yellow; height:50px;">
            </div>
            <div class="span1" style="background-color: yellow; height:50px;">
            </div>
            <div class="span1" style="background-color: yellow; height:50px;">
            </div>
            <div class="span1" style="background-color: yellow; height:50px;">
            </div>
            <div class="span1" style="background-color: yellow; height:50px;">
            </div>
            <div class="span1" style="background-color: yellow; height:50px;">
            </div>
            <div class="span1" style="background-color: yellow; height:50px;">
            </div>
            <div class="span1" style="background-color: yellow; height:50px;">
            </div>

        </div>
    </div>

    <div id="main" class="container">
        <div class="row">
            <div class="span3" style="background-color: red; height:100px;">
            </div>
            <div class="span9" style="background-color: blue; height:100px;">
                <div class="row">
                    <div class="span3" style="background-color: orange; height:50px;">
                    </div>
                    <div class="span3" style="background-color: orange; height:50px;">
                    </div>
                    <div class="span3" style="background-color: orange; height:50px;">
                </div>
            </div>
            </div>
        </div>
    </div>

    <div id="footer" class="container">
        <div class="row">
            <div class="span12" style="background-color: green; height:50px;">
            </div>
        </div>
    </div>

    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="js/bootstrap.min.js"></script>
</body>
</html> 
```

从我读过的内容来看，一旦视口宽度小于 767px，列应该堆叠。我无法让它在 Chrome 中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T00:38:16.080

我想到了。我只需要更改样式表的顺序。

```
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T06:15:22.427

是的。您必须在引导文件之后包含自定义 CSS 文件

# python - QtiPlot 和 Python：未定义全局名称“QLocale”

> ID：12700293
> 
> 赞同：2
> 
> 时间：2012-10-03T00:20:27.760
> 
> 标签：python, qt, pyqt, pyqt4, mencoder

我正在开发一个 Python 脚本，它将在名为 QtiPlot 的应用程序中运行。我搜索了 Qtiplot 的 Python API 文档，它使用 PyQt 4。我将脚本编码如下：

```
#! /usr/bin/env python

# A python script to be used in QtiPlot to convert .dat files into .jpg graphs and these ones into .avi movie

import os
import re
import glob
from PyQt4 import uic
from PyQt4 import *

def chooseInputFolder():
    input_folder = QtGui.QFileDialog.getExistingDirectory(qti.app, "Choose Working Folder")
    ui.inputFolderLine.setText(input_folder)
    return input_folder

def chooseOutputFile():
    output_file = QtGui.QFileDialog.getSaveFileName(qti.app, "Choose Output File")
    ui.outputFileLine.setText(output_file)
    return output_file

def createVideoFromJPG():
    input_folder_name = ui.inputFolderLine.text()
    output_file_name = ui.outputFileLine.text()
    dirList = os.listdir(input_folder_name)
    for fname in dirList:
        t = newTable()
        t.importASCII(input_folder_name+fname,sep="\t",ignoreLines=0,renameCols=False,stripSpaces=True,simplifySpace=False,importComments=False,comment="#",readOnly=False,importAs=Table.Overwrite,locale=QLocale(),endLine=0,maxRows=-1)
#       g = plot(t, 2, 0)
#       cmd = 'mencoder "mf://*.jpg" -mf fps=25 -o %s -ovc lavc -lavcopts vcodec=mpeg4' % output_file
#       os.system(cmd)

ui = uic.loadUi("/home/kurumin/Scripts/python/dat2vid.ui")
ui.connect(ui.inputFolderButton, QtCore.SIGNAL("clicked()"),chooseInputFolder)
ui.connect(ui.outputFileButton, QtCore.SIGNAL("clicked()"),chooseOutputFile)
ui.connect(ui.createVideo, QtCore.SIGNAL("clicked()"),createVideoFromJPG)
ui.show() 
```

这是输出：

```
Traceback (most recent call last):

File "<>", line 27, in createVideoFromJPG

NameError
: 
global name 'QLocale' is not defined 
```

我试图定义 QLocale 但我在文档中找不到任何真正有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:49:22.417

替换文件`locale=QLocale()`的`locale=QtGui.QLocale()`第**27 行**，因为`from PyQt4 import *`您必须提供模块名称..

# uitableview - NSDate 进入用户当前时区/区域以获取未来时间

> ID：12700296
> 
> 赞同：0
> 
> 时间：2012-10-03T00:20:42.213
> 
> 标签：uitableview, nsdate

我正在开发一个应用程序，该应用程序允许用户从时间的 UITableView（半小时增量）中选择日期/时间，直到我得到最后的时间，一切都很顺利。由于是格林威治标准时间，手机会自动将其转换为当地时间并取消日程安排。他们选择的时间需要转换为 GMT + 偏移量（因为用户选择的是本地时间而不是 GMT），这样他们选择的时间就是添加到他们日历中的时间。

```
NSDate* newDate = [[scheduled objectForKey:@"date"] dateByAddingTimeInterval:1800.0*indexPath.row];
    [scheduled setObject:newDate forKey:@"date"]; 
```

正如您现在所看到的，我只是采用基本 GMT 并为每个 indexPath.row 添加 1800 秒（30 分钟），这可以在 GMT 中获得正确的时间，但实际上我需要从用户当前时区做同样的事情（而且我猜测将其转换为 GMT，因为您应该将时间存储在 GMT 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:29:57.427

```
NSTimeInterval timeZoneOff = [[NSTimeZone systemTimeZone] secondsFromGMTForDate:[scheduled objectForKey:@"date"]];

NSDate *gmtDate = [[scheduled objectForKey:@"date"] dateByAddingTimeInterval:-timeZoneOff]; 
```

奇迹般有效。

# c# - 使用 ValueInjector 或 AutoMapper 展平集合

> ID：12700299
> 
> 赞同：2
> 
> 时间：2012-10-03T00:21:24.387
> 
> 标签：c#, automapper, valueinjecter

给定以下示例类：

```
public class OrderHeader
{
    public int OrderHeaderId { get; set; }
    public string CustomerName { get; set; }
}

public class OrderItem
{
    public int OrderHeaderId { get; set; }
    public int OrderItemId { get; set; }
    public string ProductName { get; set; }
    public float Price { get; set; }
}

// Order contains the header information and a collection of items ordered
public class Order
{
    public OrderHeader Header { get; set; }
    public IEnumerable<OrderItem> Items { get; set; }
}

// LineItem is OrderHeader and OrderItem flattened out
public class LineItem
{
    public int OrderHeaderId { get; set; }
    public int OrderItemId { get; set; }
    public string CustomerName { get; set; }
    public string ProductName { get; set; }
    public float Price { get; set; }
} 
```

使用 jgauffin 的扩展方法[来扩展 ValueInjector](https://stackoverflow.com/a/7872763/9664)以使用集合，以下将把 's 的集合展平为`Order`'s 的集合`LineItem`：

```
var orders = new List<Order>();

var lineItems = new List<LineItem>();

// -extension method for collections with ValueInjector
// -project all the OrderItems into a single list
lineItems.InjectFrom( orders.SelectMany( x => x.Items ) );

// inject the header information into the flattened out LineItem objects
foreach( LineItem item in lineItems )
{
    var order = orders.Single( x => x.Header.OrderHeaderId == item.OrderHeaderId );
    item.InjectFrom( order.Header );
} 
```

**2个问题：**

1.  上述模式是使用 ValueInjector 将 's 集合展平为`Order`'s集合的正确/有效用法`LineItem`吗？如果没有，还有什么替代方案？（除了不使用 ValueInjector 扩展方法并且只使用一个 for 每个循环将 Header 和 OrderItem 都注入到扁平 LineItem 中）
2.  使用 AutoMapper 时是否有等价物？

# sql - SQL Server 语句的执行顺序

> ID：12700307
> 
> 赞同：1
> 
> 时间：2012-10-03T00:22:25.523
> 
> 标签：sql, sql-server-2008

我有 SQL Server 2008 R2，Windows 7 操作系统。

在服务器中，我有一个`con1`通过以下 SQL 语句创建的表。

```
CREATE TABLE [dbo].[con1](
    [digit_str] [nvarchar](50) NULL
) ON [PRIMARY] 
```

在`con1`表中，我有这些值：

```
 digit_str
----------------
    1
    1
    2
    3
    4
    5
    1. 
```

我确实对数据库执行了以下 SQL 语句：

```
SELECT t1.digit FROM
(
select CAST(digit_str as int) as digit from con1 where RIGHT(digit_str,1) <> '.'
) as t1
where t1.digit <> 1 
```

服务器给了我以下错误信息：

> *转换 nvarchar 值“1”时转换失败。为数据类型 int。*

我以为我的内部 SQL 先执行并创建了一个临时表`t1`，所以`1.`不包含在表中`t1`，然后 SQL 解析器将用于`where t1.digit <> 1`过滤临时表`t1`。

但是上面似乎不对，所以有人解释一下上面SQL的执行顺序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T00:47:35.670

这是 SQL Server 的一个已知“功能”。永远不要假设 WHERE 子句在 SELECT 子句之前执行。

请参阅：[SQL Server 不应引发不合逻辑的错误](http://connect.microsoft.com/SQLServer/feedback/details/537419/sql-server-should-not-raise-illogical-errors)

实际上，有时这样做是有充分理由的。考虑连接两个表，其中 A 比 B 小得多。

```
select CAST(A.col1 as int), A.col2, B.col3
from A join B ...
where ... isnumeric(A.col1) = 1 
```

如果您检查生成的查询计划，无论对错，SQL Server 都会将来自 A 的数据作为前导行流式传输以与 B 连接。这样做时，它知道它只需要拉取`col2`和 `function on col1`. 它可能`col1`只是为了稍后运行该函数，或者对于像 CAST 这样微不足道的事情，SQL Server 还不如在流式处理过程中转换数据。

可以肯定的是，这种策略确实使 SQL Server 在某些查询中快了一点。但从纯粹逻辑的角度来看，我会称之为错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:40:56.550

我无法解释这种行为，但以下内容可以满足您的需求：

```
SELECT t1.digit FROM
(
select CAST(digit_str as int) as digit 
  from con1 
 where RIGHT(digit_str,1) <> '.' 
   AND digit_str <> '1'
) as t1 
```

我不确定为什么最后的*where*子句会导致执行该转换，因为在我看来它应该已经从 t1 的结果集中过滤掉了。

# python - 如何在 Python 3.3 中为所有键（在列表中给出）填充一个无

> ID：12700311
> 
> 赞同：3
> 
> 时间：2012-10-03T00:22:52.087
> 
> 标签：python, dictionary, python-3.x

对于 a `writerow`，`csv.DictWriter`我需要将（a 的一部分）字典填充为空。我没有找到直接的解决方案。有吗？

喜欢

```
fieldnames = ['first','last'] 
```

伪代码

```
row = fieldnames.fill(None) 
```

结果

```
print(row)
['first':None,'last':None] 
```

以便

```
destination.writerow(row) 
```

结果是

```
, 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T01:24:00.127

这对于内置的 dict 方法[fromkeys](http://docs.python.org/library/stdtypes.html#dict.fromkeys)来说真的很自然：

```
>>> dict.fromkeys('abcd',None)
{'a': None, 'c': None, 'b': None, 'd': None}
>>> dict.fromkeys(['first','last'],None)
{'last': None, 'first': None} 
```

根本不需要字典理解（2.7+）或列表理解。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T00:25:16.187

这可以通过简单的[字典理解](http://www.youtube.com/watch?v=t85uBptTDYY&list=UUAuqj5Bs5mTTl1mIVDmuAlw&index=1&feature=plcp)来实现：

```
{key: None for key in keys} 
```

例如：

```
>>> keys = ["first", "last"]
>>> {key: None for key in keys}
{'last': None, 'first': None} 
```

编辑：看起来`dict.fromkeys()`是最佳解决方案：

```
python -m timeit -s "keys = list(range(1000))" "{key: None for key in keys}"
10000 loops, best of 3: 59.4 usec per loop
python -m timeit -s "keys = list(range(1000))" "dict.fromkeys(keys)"
10000 loops, best of 3: 32.1 usec per loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T00:25:58.943

像这样的东西？

```
>>> fieldnames = ['first', 'last']
>>> row = dict((h, None) for h in fieldnames)
>>> row
{'last': None, 'first': None}
>>> 
```

# html - html body 显示左对齐，但在 css 中它设置为居中

> ID：12700322
> 
> 赞同：1
> 
> 时间：2012-10-03T00:24:00.457
> 
> 标签：html, css

我有一些问题。请参阅[http://jsfiddle.net/POZR2/](http://jsfiddle.net/POZR2/)

首先，如果您向右滚动，您将看到一个空白区域，如果您更改屏幕/结果框的大小，空白区域的大小会变大/变小。用于此的 css 位于“完整”div 下，并且是：

```
#full{ background-color:#262626} 
```

其次，即使 div id noint_box1 在 css 中居中，它似乎也左对齐。这个 div 基本上是从第一个标题到最后一张图片的 html 的“主体”。

思卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:32:09.407

你的桌子继承了你的居中，但没有使用它。如果您希望它居中，请为其添加边距

```
table { margin: auto; } 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:36:08.030

给`#full`一个- 这两个问题中的第一个`min-width`。`1061px`

对于另一个......好吧，我不太确定这是你想要的，但尝试将以下规则应用于`#noint_box1`：

```
width: 958px;
margin: 18px auto; 
```

# facebook - 使用从您的应用程序中删除共享的 Facebook 链接时的通知

> ID：12700323
> 
> 赞同：0
> 
> 时间：2012-10-03T00:24:10.573
> 
> 标签：facebook, facebook-graph-api

这是一个简单的问题，如果用户允许我通过 api 在他的墙上发帖，然后用户删除该帖子，我可以收到通知吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:42:19.833

据我所知没有，您需要使用用户的访问令牌轮询帖子 ID 以查看它是否仍然存在

# linux - DejaGNU - 想要在整个测试过程中使用 Linux 的环境变量

> ID：12700325
> 
> 赞同：2
> 
> 时间：2012-10-03T00:24:16.800
> 
> 标签：linux, testing, environment-variables

我有一些现有的 DejaGNU 测试需要修改，我想用环境变量替换一些硬编码的 /dev 条目，例如，而不是 /dev/ttyS0 我想要 /dev/$PORT ，其中 PORT 是在父 Linux shell 中定义的。

如何从父 shell 获取变量到 DejaGNU？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-07T14:17:45.953

$env（端口）

如果要测试是否设置了环境变量，可以使用

[信息存在环境（端口）]

# android - Android HTTP Request 在发出请求之前就使应用程序崩溃

> ID：12700326
> 
> 赞同：0
> 
> 时间：2012-10-03T00:24:22.437
> 
> 标签：android, apache-httpclient-4.x

> **可能重复：**
> [Android HttpClient：NetworkOnMainThreadException](https://stackoverflow.com/questions/11736530/android-httpclient-networkonmainthreadexception)

我正在开发一个正在发出请求的应用程序，并且该应用程序运行良好，直到我必须向服务器发出请求。我正在使用与之前为同一个应用程序编写的代码相同的代码，但这已被修改。

处理点击的片段类：

```
import org.json.JSONException;
import org.json.JSONObject;
import org.myapp.app.utils.API;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class FragmentStudentLogin extends Fragment implements OnClickListener {
EditText uN, pW;
Button signin;

private API api;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    View v = inflater.inflate(R.layout.fragment_login, container, false);
    signin = (Button)v.findViewById(R.id.s_sign_in);
    signin.setOnClickListener(this);

    uN = (EditText)v.findViewById(R.id.f_t_s_username);
    pW = (EditText)v.findViewById(R.id.f_t_s_password);

    api = new API();

    return v;

    }

    public void onClick(View v){
    switch(v.getId())
    {
        case R.id.s_sign_in:
            String user = uN.getText().toString();
            String pass = pW.getText().toString();
            if(user.length()==0){
                PopIt("Please enter your username.");
            } else if(pass.length()==0){
                PopIt("Please enter your password.");
            } else {
                try {
            JSONObject json;
                    json = api.login(user, pass);
        if(json == null || json.isNull("status")){
            PopIt(getString(R.string.error_network));
        } else {
                        PopIt(json.getString("msg"));
                    }
                } catch (JSONException e){ }
            }
        break;
        }
    }

    public void PopIt(String msg){
        Toast.makeText(getActivity(), msg, Toast.LENGTH_SHORT).show();
    }
} 
```

Click 调用的类：

```
import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;

import org.myapp.app.utils.JSONParser;

public class API
{
    private JSONParser jsonParser;
    private static String serverURL = "http://mydomain.com/api/device/login";

    public API(){
        jsonParser = new JSONParser();
    }

    public JSONObject login(String uN, String pW)
    {
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("username", uN));
        params.add(new BasicNameValuePair("password", pW));
        JSONObject json = jsonParser.getJSONFromUrl(serverURL, params);
        return json;
    } 
```

处理请求的类：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    InputStream is = null;
    JSONObject jObj = null;
    String json = "";

 // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
            Log.e("JSON", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

日志猫

```
10-02 19:40:23.734: E/AndroidRuntime(4401): FATAL EXCEPTION: main
10-02 19:40:23.734: E/AndroidRuntime(4401): android.os.NetworkOnMainThreadException
10-02 19:40:23.734: E/AndroidRuntime(4401):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at org.myapp.app.utils.JSONParser.getJSONFromUrl(JSONParser.java:42)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at org.myapp.app.utils.API.studentLogin(API.java:26)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at org.myapp.app.FragmentStudentLogin.onClick(FragmentStudentLogin.java:52)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at android.view.View.performClick(View.java:3511)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at android.view.View$PerformClick.run(View.java:14109)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at android.os.Handler.handleCallback(Handler.java:605)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at android.os.Looper.loop(Looper.java:137)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at java.lang.reflect.Method.invokeNative(Native Method)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at java.lang.reflect.Method.invoke(Method.java:511)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-02 19:40:23.734: E/AndroidRuntime(4401):     at dalvik.system.NativeStart.main(Native Method) 
```

就像我说的，这段代码以前有效，“单击的类调用：”和“处理请求的类：”部分，我以前用过没有问题。Android API 16 正在 7" 平板电脑上使用。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:29:16.600

异常消息非常清楚。Android 4.0 及更高版本不允许您在主 (UI) 线程上进行网络调用。

# javascript - 简单的线条动画不起作用

> ID：12700331
> 
> 赞同：0
> 
> 时间：2012-10-03T00:24:55.587
> 
> 标签：javascript, html, dhtml

ooookay..这整个 html5 画布 jive 对我来说是全新的。

所以我想做的是让一个“像素”在屏幕上移动，后面有一个附加的尾巴，到某个点，然后让像素仍然“移动”，但让尾巴的内容滚动出去。

我真的希望我以体面的方式描述了这一点。我从昨天早上开始就一直在尝试解决这个问题，但它只是没有发生......这里有一些代码：

```
rando=function(n){
  return Math.round(Math.random()*n);
}

pencil=function(id){
  this.neon=new Array();
  this.neon[0]="#00FF00";
  this.neon[1]="#00FF33";
  this.neon[2]="#00FF66";
  this.neon[3]="#33FF00";

  this.id=id;
  this.x=0;
  var me=this;

  this.paper=document.createElement("canvas");
  this.paper.id=id+"_paper";
  this.paper.width=100;
  this.paper.height=300;
  document.body.appendChild(this.paper);

  this.dot=this.paper.getContext("2d");
  this.dot.beginPath();
  this.dot.lineWidth=1;
  this.dot.strokeStyle = this.neon[rando(this.neon.length)];
  //this.img=this.dot.getImageData(0,0,this.paper.width,this.paper.height);

  this.drawr=function(){
    if(this.x==0){
      this.y=rando(300)+.5;
      this.dot.moveTo(this.x,this.y);
      this.count=0;
    }
    this.x+=1;
    this.count+=1;
    if(this.count==20){
      this.count=0;
      this.y+=rando(2)-1;
    }

    this.dot.lineTo(this.x,this.y);

    if(this.x>49){
      //this.paper.width=this.paper.width;
      //this.paper.height=this.paper.height;
      //this.dot.putImageData(this.img, (this.x-50)*-1, 0);
      //this.dot.translate(-1,0);
    }
    this.dot.stroke();
    setTimeout(function(){ me.drawr(); },rando(50)+10);
  };
}

window.onload=function(){
  var line=new Array();
  for(var i=0;i<5+rando(15);i++){
    line[i]=new pencil(i);
    line[i].drawr();
  }
} 
```

我尝试过翻译、绘制图像、放置图像数据和许多其他的东西，但没有任何效果..也许我正在接近这个完全错误的东西还是什么？任何有关解决此问题的不同方法的建议也可能有所帮助，感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:44:35.113

这看起来像你想要的吗？[http://jsfiddle.net/Y8rzX/](http://jsfiddle.net/Y8rzX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:19:36.337

我对您使用来自其他问题的信息和更多外包帮助的信息有了基本的了解 - 以及一些可怕的编码工作。

我仍在尝试找出一些随机细节以及它实际上是如何工作的，所以我无法详细回答它是如何工作的，但对于任何感兴趣的人，这里是 HTML 文档（或这里的[jsFiddle](http://jsfiddle.net/XkeQZ/2/)）：

```
<!DOCTYPE html>
<html>
<head>
<title>bored...</title>

<script type="text/javascript"><!--
rando=function(n){
  return Math.round(Math.random()*n);
}

pencil=function(id,w,h){
  this.neon=new Array();
  this.neon[0]="#FFFF00";
  this.neon[1]="#FFFF33";
  this.neon[2]="#F2EA02";
  this.neon[3]="#E6FB04";
  this.neon[4]="#FF0000";
  this.neon[5]="#FD1C03";
  this.neon[6]="#FF3300";
  this.neon[7]="#FF6600";
  this.neon[8]="#00FF00";
  this.neon[9]="#00FF33";
  this.neon[10]="#00FF66";
  this.neon[11]="#33FF00";
  this.neon[12]="#00FFFF";
  this.neon[13]="#099FFF";
  this.neon[14]="#0062FF";
  this.neon[15]="#0033FF";
  this.neon[16]="#FF00FF";
  this.neon[17]="#FF00CC";
  this.neon[18]="#FF0099";
  this.neon[19]="#CC00FF";
  this.neon[20]="#9D00FF";
  this.neon[21]="#CC00FF";
  this.neon[22]="#6E0DD0";
  this.neon[23]="#9900FF";

  this.id=id;
  this.x=0;
  this.y=0;
  this.w=w;
  this.h=h;
  var me=this;

  this.paper=document.createElement("canvas");
  this.paper.id=id+"_paper";
  this.paper.width=this.w;
  this.paper.height=this.h;
  this.paper.style.position = "absolute";
  document.body.appendChild(this.paper);

  this.dot=this.paper.getContext("2d");
  this.dot.beginPath();
  this.dot.lineWidth=1;
  this.dot.strokeStyle=this.neon[rando(this.neon.length-1)];

  this.drawr=function(){
    if(this.x==0){
      this.y=rando(this.h)+.5;                        //+.5???
      this.dot.moveTo(this.x,this.y);
      this.count=0;
    }
    this.x+=1;
    this.count+=1;
    if(this.count==10){
      this.dot.beginPath();
      this.count=0;
      this.y+=rando(2)-1;
      this.dot.moveTo(this.x-1,this.y);                    //-1????
    }
    if(this.x>=this.w-1){
      this.x=this.w-1;                            //-1???
      this.dot.moveTo(this.x-2,this.y);                    //-2????????
      this.img=this.dot.getImageData(1,0,this.w,this.h);
      this.dot.putImageData(this.img, 0, 0);
    }

    if(this.y<0){ this.y=rando(2)+1.5; }                //.5?
    if(this.y>this.h){ this.y=this.h+(rando(2)+1.5)*-1; }        //.5?

    this.dot.lineTo(this.x,this.y);
    this.dot.stroke();
    setTimeout(function(){ me.drawr(); },10);
  };
}

window.onload=function(){
  var line=new Array();
  for(var i=0;i<5+rando(10);i++){
    line[i]=new pencil(i,200,100);
    line[i].drawr();
  }
}
//--></script>

<style><!--
body{
  background:#000000;
}
//--></style>

</head>

<body>
</body>
</html> ​ 
```

# php - 不能使用获取参数

> ID：12700332
> 
> 赞同：1
> 
> 时间：2012-10-03T00:24:56.710
> 
> 标签：php, get, rewrite

1.  我的.htaccess：`Rewriterule ^(.*?)-(?:.*).html$ ver.php?id=$1 [L]`
2.  我的网址是这样的：[http ://www.site.com/listado/s.html](http://www.site.com/listado/s.html)
3.  我不能`GET`用来解析页面：`即：[http ://www.site.com/listado/s.html?page=2](http://www.site.com/listado/s.html?page=2)

我究竟做错了什么？
我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T00:28:33.457

您需要该`QSA`标志，因此 mod_rewrite 会将您的查询字符串附加到重写中。

```
Rewriterule ^(.*?)-(?:.*).html$ ver.php?id=$1 [L,QSA] 
```

# c - 加载模块时出错 (Lua)

> ID：12700342
> 
> 赞同：3
> 
> 时间：2012-10-03T00:26:11.920
> 
> 标签：c, lua, luasocket

每当我运行我的应用程序时，我都会遇到这个错误。错误是： `loop or previous error loading module 'socket'`。

导致此错误的代码是： `socket = require("socket")`.

此错误发生在第一个`lua_pcall`. 这是调用它的函数：

```
void startTerminal(int port, char host[80])
{
    lua_State *L = lua_open();

    /* Open Lua Library */
    luaL_openlibs(L);

    /* Choose the lua file that will run */
    if(luaL_loadfile(L, "socket.lua")) {
        lfatal(L, "luaL_loadfile() failed");
    }

    /* Start lua file */
    if(lua_pcall(L, 0, 0, 0)) {
        lfatal(L, "lua_pcall()");
    }

    /* Get connect function */
    lua_getglobal(L, "connect");

    if(!lua_isfunction(L, -1)) {
        lua_pop(L, 1);
        lfatal(L, "lua_isfunction() failed");
    }

    /* Setup arguments */
    lua_pushnumber(L, port);
    lua_pushstring(L, host);

    /* Call the lua function */
    if(lua_pcall(L, 2, 2, 0)) {
        lfatal(L, "lua_pcall() failed");
    }

    /* Print out results */
    printf("%s", lua_tostring(L, -1));
    printf("%s", lua_tostring(L, -1));

    lua_close(L);
} 
```

这是我编译代码的方式：

`gcc -Wall -o terminal attacker.c -I/usr/include/lua5.1 -llua5.1 -lm`

我在编译期间是否缺少任何开关或者我是否缺少库？

注意：编译器不会抛出任何错误并且可以干净地编译。在其他不包含 C 的 Lua 应用程序中，我对`require("socket")`.

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T00:31:24.533

```
luaL_loadfile(L, "socket.lua") 
```

这是可疑的。很可疑。

使用标准的 Lua 加载器，当你发出 时`require("MODULE_NAME")`，它首先会寻找（在检查是否`MODULE_NAME`已经加载之后）将是“MODULE_NAME.lua”。*在当前目录*中。这肯定存在。它被称为`socket.lua`，您已加载并尝试执行的文件。因此，它将尝试`socket.lua`作为模块加载。

既然`socket.lua`已经`require("socket")`在其中，它将再次加载自己。然后再次。然后再次。

好吧，这不会是因为 Lua 的包加载器系统足够聪明，可以检测循环并发出错误。这正是它所做的。

`MODULE_NAME.lua`因此，如果您确实需要具有该名称的模块，请不要命名文件。

# python-2.7 - Django：从 python 端使用 {{STATIC_URL}}

> ID：12700350
> 
> 赞同：0
> 
> 时间：2012-10-03T00:27:11.810
> 
> 标签：python-2.7, django-views, django-1.3

构建一个“历史”系统，根据用户要求的日期为静态页面提供服务。并非所有日期都有关联的页面，并且不可能根据数据库中的内容知道哪些内容有，哪些没有。我一直无法找到重定向到静态页面的方法，因为似乎没有任何方法可以在 python 端捕获 {{STATIC_URL}} 标记的值。我有一些代码依赖于与 django 服务器位于同一文件系统上的静态文件，但这显然是错误的。我有两个需求：

1：我如何（重定向？）从我的views.py文件到静态页面？

2：如何查询这些静态页面中的某个特定页面的存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:06:09.903

`{{ STATIC_URL }}`如果您了解标签的意图，我不确定您的问题。它是静态内容文件（如 css、javascript 或图像文件）的 URL 前缀。它不打算用作您自己的静态 HTML 文件的路径。最后，我不确定您是否针对您想要完成的任务提出了正确的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:38:25.720

正如 zzzirk 所说：Django 真的不是关于平面页面，所以最 Djangonic 的解决方案是将平面页面放在django 应用程序**旁边，而不是在其中。**

# c# - 使用实体框架映射多个 PK

> ID：12700361
> 
> 赞同：0
> 
> 时间：2012-10-03T00:29:00.433
> 
> 标签：c#, entity-framework, entity-framework-4, fluent

我现在有2节课。第一个是资产，第二个是与该资产相关的服务。SQL Server 中的 Asset 表在 ID 和 workflow_id 上都有一个 PK。

```
public class Asset
{
    public int ID { get; set; }
    public int workflow_id { get; set; }

    public string name { get; set; }
} 
```

第二个表是服务，它在 3 列上有一个 PK，服务 ID、workflow_id 和服务也绑定的asset_id。

```
public class Services
{
    public int ID { get; set; }
    public int workflow_id { get; set; }
    public int asset_id { get; set; }

    public string service_description { get; set; }
} 
```

示例数据：workflow_id#27 中 ID#10 的资产与 workflow_id#27 中资产 ID#10 的所有服务匹配。

如何将这两个与多列 PK 映射在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:38:35.120

注释要成为 PK 的列。在您的第一个模型示例中，您将拥有：

```
 [Key, System.ComponentModel.DataAnnotations.Schema.Column(Order = 0)]
    public int ID { get; set; }

    [Key, System.ComponentModel.DataAnnotations.Schema.Column(Order = 1)]
    public int workflow_id { get; set; } 
```

# sql - sql中的group，sum和join组合

> ID：12700362
> 
> 赞同：0
> 
> 时间：2012-10-03T00:29:05.613
> 
> 标签：sql, join, group-by

我有一个表`spending`，其中包含一些基本字段，这些字段定义了购买项目、购买时间和购买价值，以及它们是从哪个帐户购买的：`spItem`、`spAmount`和。`spDate``spAccount`

我已经进行了查询，以每月对它们进行分组，一次一个帐户，效果很好：

```
SELECT YEAR(spDate) as spYear,
       MONTH(spDate) as spMonth,
       SUM(spAmount) AS TotalAmount
FROM spending
WHERE spAccount like 'Bank1'
GROUP BY YEAR(spDate), MONTH(spDate)
ORDER BY YEAR(spDate), MONTH(spDate) 
```

和

```
SELECT YEAR(spDate) as spYear,
       MONTH(spDate) as spMonth,
       SUM(spAmount) AS TotalAmount
FROM spending
WHERE spAccount like 'Bank2'
GROUP BY YEAR(spDate), MONTH(spDate)
ORDER BY YEAR(spDate), MONTH(spDate) 
```

我正在尝试获取一个可以组合两个查询并显示`Bank1`到一列和`Bank2`下一列的表。可能有几个月其中一个账户没有支出。在这种情况下，它应该显示一个零值，而不仅仅是跳过它。

任何能以正确方式指出我的人都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:26:08.563

您可以使用带有条件聚合的分组来在一个查询中获取两个帐户的总计。这是它的样子：

```
SELECT YEAR(spDate) as spYear,
       MONTH(spDate) as spMonth,
       SUM(CASE spAccount WHEN 'Bank1' THEN spAmount ELSE 0 END) AS Bank1,
       SUM(CASE spAccount WHEN 'Bank2' THEN spAmount ELSE 0 END) AS Bank2
FROM spending
WHERE spAccount IN ('Bank1', 'Bank2')
GROUP BY YEAR(spDate), MONTH(spDate)
ORDER BY YEAR(spDate), MONTH(spDate)
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:05:57.073

我希望我正确理解了你的问题:-)

对于每个可用的月份和年份（数据存在于至少一个帐户中）显示每个帐户的总和（即使其中一个为 0）。为此，我加入了 2 个查询并使用 ISNULL 函数从正确的源获取数据。

这是我使用虚拟数据的解决方案：

```
--Preparing Dummy Data
;WITH spending
 AS (SELECT '01-01-2010' spDate, 
            100          spamount, 
            'Bank1'      spaccount 
     UNION 
     SELECT '01-01-2010' spDate, 
            200          spamount, 
            'Bank1'      spaccount 
     UNION 
     SELECT '03-01-2010' spDate, 
            150          spamount, 
            'Bank1'      spaccount 
     UNION 
     SELECT '04-01-2010' spDate, 
            500          spamount, 
            'Bank1'      spaccount 
     UNION 
     SELECT '01-01-2010' spDate, 
            200          spamount, 
            'Bank1'      spaccount 
     UNION 
     SELECT '03-01-2010' spDate, 
            10           spamount, 
            'Bank2'      spaccount 
     UNION 
     SELECT '05-01-2010' spDate, 
            800          spamount, 
            'Bank2'      spaccount 
     UNION 
     SELECT '03-01-2010' spDate, 
            110          spamount, 
            'Bank2'      spaccount 
     UNION 
     SELECT '01-01-2010' spDate, 
            100          spamount, 
            'Bank2'      spaccount) 
--End of Dummy Data

--Start Query on Dummy Data
SELECT ISNULL(Bank1.SPMONTH, Bank2.SPMONTH) AS spMonth, 
       ISNULL(Bank1.SPYEAR, Bank2.SPYEAR)   AS spYear, 
       ISNULL(Bank1.TOTALAMOUNT, 0)         AS TotalAmount_Bank1, 
       ISNULL(Bank2.TOTALAMOUNT, 0)         AS TotalAmount_Bank2 
FROM   (SELECT YEAR(SPDATE)  AS spYear, 
               MONTH(SPDATE) AS spMonth, 
               SUM(SPAMOUNT) AS TotalAmount 
        FROM   spending 
        WHERE  SPACCOUNT LIKE 'Bank1' 
        GROUP  BY YEAR(SPDATE), 
                  MONTH(SPDATE)) AS Bank1 
       FULL JOIN (SELECT YEAR(SPDATE)  AS spYear, 
                         MONTH(SPDATE) AS spMonth, 
                         SUM(SPAMOUNT) AS TotalAmount 
                  FROM   spending 
                  WHERE  SPACCOUNT LIKE 'Bank2' 
                  GROUP  BY YEAR(SPDATE), 
                            MONTH(SPDATE)) AS Bank2 
              ON Bank1.SPMONTH = Bank2.SPMONTH 
                 AND Bank2.SPYEAR = Bank2.SPYEAR 
ORDER  BY SPYEAR, 
          SPMONTH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T00:34:35.830

在日期上进行选择，将年月组合为一个字段，该字段将相应地进行排序和分组。还要确保首先按帐户分组，因为 SQL 中的分组顺序很重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T00:48:20.190

```
SELECT YEAR(spDate) as spYear, MONTH(spDate) as spMonth, SUM(spAmount) AS TotalAmount,(SELECT SUM(spAmount) AS TotalAmount2 FROM spending WHERE spAccount like 'Bank2' GROUP BY YEAR(spDate), MONTH(spDate) ORDER BY YEAR(spDate), MONTH(spDate)) FROM spending WHERE spAccount like 'Bank1' GROUP BY YEAR(spDate), MONTH(spDate) ORDER BY YEAR(spDate), MONTH(spDate) 
```

# php - 如何使用 Eclipse 和 XAMPP 在 Ubuntu 12.04 上设置 PHP 调试？

> ID：12700365
> 
> 赞同：7
> 
> 时间：2012-10-03T00:29:43.967
> 
> 标签：php, eclipse, debugging, ubuntu, xdebug

我已经尝试配置它很长一段时间了，但我无法让它正常运行。到目前为止完成：

*   下载最新版本的 xampp 并将其移至`/opt/lampp`
*   使用 apt-get 安装 php5-xdebug
*   将implicit_flush 更改为`On`in`/opt/lampp/etc/php.ini`
*   将以下行添加到 ini 文件的末尾：

    ```
    [xdebug]
    zend_extension="/usr/lib/php5/20090626/xdebug.so"
    xdebug.remote_enable=1
    xdebug.remote_handler="dbgp"
    xdebug.remote_port=9000
    xdebug.remote_host="localhost" 
    ```

我已经确保重新启动 apache，但是在显示时我仍然没有得到 xdebug-section`phpinfo();`

我认为 Eclipse 配置正确，但在运行 xdebug 之前我无法确定。

请帮助，非常欢迎所有建议！

**编辑：**

这是输出`phpinfo()`： http: [//www.pasteall.org/35930](http://www.pasteall.org/35930)

**更新：**

我已经下载了 Xampp 1.8.1（我之前有 xampp 1.8.0）`/opt/lampp`并添加了适当的开发文件。我都根据[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)上的指南自己编译了 Xdebug，并通过`/opt/lampp/bin/pecl`.

现在我的 php.ini 看起来像这样：

```
zend_extension = "/opt/lampp/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so"
xdebug.remote_enable = 1
xdebug.remote_port = 9000
xdebug.remote_host = "localhost"
xdebug.remote_handler = "dbgp" 
```

我不知道该怎么办， http: [//xdebug.org/wizard.php](http://xdebug.org/wizard.php)仍然报告说没有安装 Xdebug。会不会是权限问题？目前扩展的权限如下：

```
-rwxr-xr-x 1 niklas niklas  88376 Sep 30 10:43 interbase.so
-rwxr-xr-x 1 niklas niklas 184920 Sep 30 10:43 oci8.so
-rwxr-xr-x 1 niklas niklas 118592 Sep 30 10:43 pgsql.so
-rwxr-xr-x 1 niklas niklas 830886 Oct 10 15:10 xdebug.so 
```

他们应该归别人所有吗？我必须在 php.ini 中启用任何其他选项吗？这是我当前的输出`phpinfo()`： http: [//www.pasteall.org/36135](http://www.pasteall.org/36135)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:53:01.900

## 量身定制的安装说明

## 概括

*   **已安装 Xdebug：**否*   **服务器 API：** Apache 2.0 处理程序*   **窗户：**没有*   **Zend 服务器：**没有*   **PHP版本：** 5.4.4*   **Zend API 编号：** 220100525*   **PHP API 编号：** 20100525*   **调试构建：**否*   **线程安全构建：**否*   **配置文件路径：** /opt/lampp/etc*   **配置文件：** /opt/lampp/etc/php.ini*   **扩展目录：** /opt/lampp/lib/php/extensions/no-debug-non-zts-20100525

## 指示

1.  下载[xdebug-2.2.1.tgz](http://xdebug.org/files/xdebug-2.2.1.tgz)
2.  解压下载的文件`tar -xvzf xdebug-2.2.1.tgz`
3.  跑：`cd xdebug-2.2.1`
4.  跑：`phpize`

    作为其输出的一部分，它应该显示：

    ```
    配置：
    ...
    Zend 模块 API 编号：20100525
    Zend Extension API 编号：220100525

    ```

    如果没有，则说明您使用了错误的`phpize`. 请按照 [此常见问题解答条目](http://xdebug.org/docs/faq#custom-phpize)并跳过下一步。

5.  跑：`./configure`
6.  跑：`make`
7.  跑：`cp modules/xdebug.so /opt/lampp/lib/php/extensions/no-debug-non-zts-20100525`
8.  编辑`/opt/lampp/etc/php.ini`并添加行
    `zend_extension = /opt/lampp/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so`
9.  重启网络服务器

[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T17:25:33.483

请参阅下面的 URL，我认为这对您很有帮助

[http://www.edmondscommerce.co.uk/ubuntu/ubuntu-xampp-xdebug-install/](http://www.edmondscommerce.co.uk/ubuntu/ubuntu-xampp-xdebug-install/)

[http://www.webhelp2u.com/article/install-xdebug-on-lampp](http://www.webhelp2u.com/article/install-xdebug-on-lampp)

[https://stackoverflow.com/questions/9640912/problems-setting-up-eclipse-with-xdebug](https://stackoverflow.com/questions/9640912/problems-setting-up-eclipse-with-xdebug)

**阅读：-**

**在（LAMPP 或 XAMPP For Linux）上安装 XDebug**

[http://www.edmondscommerce.co.uk/ubuntu/ubuntu-xampp-xdebug-install/](http://www.edmondscommerce.co.uk/ubuntu/ubuntu-xampp-xdebug-install/)

[http://www.webhelp2u.com/article/install-xdebug-on-lampp](http://www.webhelp2u.com/article/install-xdebug-on-lampp)

在 LAMPP 上安装 XDebug

1.  从站点[http://www.apachefriends.org/en/xampp-linux.html下载 (XAMPP For Linux) 的最新版本](http://www.apachefriends.org/en/xampp-linux.html)

2.  安装它。要安装lampp，解压并放入/opt 目录。

3.  从同一站点下载开发包。

4.  解压它，从 Development 包中复制并粘贴“include”文件夹到 /opt/lampp 目录。（这个包将用于编译 XDebug 源代码）

5.  运行命令 /opt/lampp/bin/pecl update-channels。这将更新您本地 PC 上的 pecl 频道数据库。

6.  运行命令 /opt/lampp/bin/pecl 安装 Xdebug。并等待完成该过程。

7.  现在 xdebug.so 文件已在 /opt/lampp/lib/php/extensions/ 目录中创建。

8.  现在打开文件 php.ini 并添加行 zend_extension="/opt/lampp/lib/php/extensions/path_to_xdebug.so"。在文件的末尾。

9.  重新启动 Lampp & Check 启用或不使用 phpinfo();

**在您发表评论后更新我的答案**

请参阅下面的 URL，我认为这对您很有帮助。

**在 Ubuntu 中为 PHP5 设置 Xdebug**

[http://gayanhewa.info/setup-xdebug-php5-ubuntu/](http://gayanhewa.info/setup-xdebug-php5-ubuntu/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T17:15:54.453

由于没有迹象表明它为什么不起作用，我已经放弃了 xampp，只是安装了一个带有 xdebug 的常规灯服务器`apt-get`。我在启动期间禁用了 mysql 和 apache2，这样如果我不想要它们，它们就不会运行。这是一个关于如何使用 Eclipse 启用 xdebug-debugging 的非常简单的教程：[http ://www.web-brainz.co.uk/Xdebug](http://www.web-brainz.co.uk/Xdebug)

其他答案肯定是最适合其他用户的，但不幸的是他们没有解决我的问题。非常感谢您的帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-06T19:28:35.600

*   在新的 ubuntu 12.04 上运行：

> apt-get 安装 php5-xdebug

*   检查 xdebug 是否已安装：

> php --版本

它看起来像这样：

root@ubuntu-SandBox:/var/www# php --version PHP 5.3.10-1ubuntu3.19 with Suhosin-Patch (cli) (built: Jul 2 2015 15:05:04) Copyright (c) 1997-2012 The PHP Group Zend Engine v2.3.0，版权所有 (c) 1998-2012 Zend Technologies with Xdebug v2.1.0，版权所有 (c) 2002-2010，作者 Derick Rethans root@ubuntu-SandBox:/var/www#

*   修改你的 php.ini 以加载 Xdebug 运行：

> vi /etc/php5/apache2/php.ini

并在文件底部添加：

[xdebug]

xdebug.remote_enable=1

xdebug.remote_handler="dbgp"

xdebug.remote_port=9000

/* 这是你的 PHPstorm IDE 机器的 IP 地址。*/

xdebug.remote_host="10.70.111.11"

*   重启你的服务器：

> 服务 apache2 重启

*   现在您的服务器已准备好连接客户端 IDE 机器。

*   以下是配置 PHPSTORM 的方法：

按照 JetBrain [https://confluence.jetbrains.com/display/PhpStorm/Validating+Your+Debugging+Configuration的说明进行操作](https://confluence.jetbrains.com/display/PhpStorm/Validating+Your+Debugging+Configuration)

或者

在菜单 Run => Web Server Debug Validation 上，您将看到如下内容：

[![在此处输入图像描述](../Images/3eb16d37ccf4a6f4c7b73b82b6909dff.png)](https://i.stack.imgur.com/6JWo5.png)

*   如果你没有得到黄色并且一切都是蓝色的，那么你很好！
*   从这里安装 chrome 扩展 xdebug 助手：

> [https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc?hl=en](https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc?hl=en)

*   通过单击启用此扩展程序，在浏览器中启动调试会话，错误图标变为绿色。

*   然后在 IDE Run => Listening for php 调试连接。

*   在源代码中设置断点

*   加载您的 php 页面（webapp），它将在断点处停止。

完毕。

# php - 订购功能

> ID：12700366
> 
> 赞同：1
> 
> 时间：2012-10-03T00:29:47.190
> 
> 标签：php

如何让 PHP 为每个订单创建一个文件，命名为任何人在该字段中输入的名称

```
<?php

Name:           php echo $_POST["Firstname"]; 
            php echo $_POST["Lastname"];   <br /> <br />
Dorm Name:      php echo $_POST["DormName"];   <br />

Room Number:    php echo $_POST["RoomNumber"];   <br />

Pizza Type      php echo $_POST["PizzaType"];   <br />

?> 
```

这是我到目前为止所拥有的，但我需要一个函数来为每个提交创建一个文件并将其命名为人名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:49:38.817

你的PHP应该看起来像这样......

```
<?php
if ($_POST["submit"]) {
    $firstName = $_POST["firstName"];
    $lastName = $_POST["lastName"];
    $dormName = $_POST["dormName"];
    $roomNumber = $_POST["roomNumber"];
    $pizzaType = $_POST["pizzaName"];

    $fp = fopen($firstName . "_" . $lastName . ".txt", "a"); // the 'a' will append to the end of the file.
    fwrite($fp, "\n\n");
    fwrite($fp, "First Name: $firstName\n");
    fwrite($fp, "Last Name: $lastName\n");
    fwrite($fp, "Dorm Name: $dormName\n");
    fwrite($fp, "Room Number: $roomNumber\n");
    fwrite($fp, "Pizza Type: $pizzaType\n");
    fclose($fp);
}
?>

<html>
    <head>
        <title>test</title>
    </head>
    <body>
        <form method="POST" id="" action="">
            <input type="text" name="firstName" value="" />
            <input type="text" name="lastName" value="" />
            <input type="text" name="dormName" value="" />
            <input type="text" name="roomNumber" value="" />
            <input type="text" name="pizzaName" value="" />
            <input type="submit" name="submit" value="Submit" />
        </form>
    </body>
</html> 
```

**注意：**如果另一个同名的人再次订购，它将全部附加到同一文件的底部。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:43:19.947

尝试阅读有关 fopen 和 fwrite 的信息。

这是 php codex 中的一个示例：

```
$fp = fopen('data.txt', 'w');
fwrite($fp, '1');
fwrite($fp, '23');
fclose($fp);
// the content of 'data.txt' is now 123 and not 23! 
```

因此，在调用文件 data.txt 的地方，您可以将其称为基于 $_POST['Firstname'] 等的名称......

# javascript - pushNotification.onDeviceReady 未定义？

> ID：12700369
> 
> 赞同：3
> 
> 时间：2012-10-03T00:30:07.777
> 
> 标签：javascript, ios, cordova, push-notification

我正在尝试使用 Cordova 2.1.0 在我的 iOS 应用程序上获取推送通知。

我完全按照[本指南](http://www.pushwoosh.com/programming-push-notification/push-notification-sdk-integration-for-phonegap/)进行操作，但出现以下错误：

```
TypeError: 'undefined' is not a function (evaluating 'pushNotification.onDeviceReady()') 
```

[我不得不根据本指南](https://stackoverflow.com/questions/11613274/window-plugins-undefined-in-cordova-2-0-0)稍微修改脚本以修复 2.0 版，这似乎可行。

我这样称呼`initPushwoosh()` `onDeviceReady`：

```
window.addEventListener('load', function () {
    document.addEventListener('deviceready', function () {
        initPushwoosh();
    }, false);
}, false); 
```

该`PushNotification.js`文件如下：

```
(function(cordova) {

    function PushNotification() {}

    // Call this to register for push notifications and retreive a deviceToken
    PushNotification.prototype.registerDevice = function(config, success, fail) {
        cordova.exec(success, fail, "PushNotification", "registerDevice", config ? [config] : []);
    };

    // Call this to set tags for the device
    PushNotification.prototype.setTags = function(config, success, fail) {
        cordova.exec(success, fail, "PushNotification", "setTags", config ? [config] : []);
    };

    //Android Only----
    PushNotification.prototype.unregisterDevice = function(success, fail) {
        cordova.exec(success, fail, "PushNotification", "unregisterDevice", []);
    };

    PushNotification.prototype.startGeoPushes = function(success, fail) {
        cordova.exec(success, fail, "PushNotification", "startGeoPushes", []);
    };

    PushNotification.prototype.stopGeoPushes = function(success, fail) {
        cordova.exec(success, fail, "PushNotification", "stopGeoPushes", []);
    };

    //Android End----

    //iOS only----
    // Call this to send geo location for the device
    PushNotification.prototype.sendLocation = function(config, success, fail) {
        cordova.exec(success, fail, "PushNotification", "sendLocation", config ? [config] : []);
    };

    PushNotification.prototype.onDeviceReady = function() {
        cordova.exec(null, null, "PushNotification", "onDeviceReady", []);
    };

    // Call this to get a detailed status of remoteNotifications
    PushNotification.prototype.getRemoteNotificationStatus = function(callback) {
        cordova.exec(callback, callback, "PushNotification", "getRemoteNotificationStatus", []);
    };

    // Call this to set the application icon badge
    PushNotification.prototype.setApplicationIconBadgeNumber = function(badge, callback) {
        cordova.exec(callback, callback, "PushNotification", "setApplicationIconBadgeNumber", [{badge: badge}]);
    };

    // Call this to clear all notifications from the notification center
    PushNotification.prototype.cancelAllLocalNotifications = function(callback) {
        cordova.exec(callback, callback, "PushNotification", "cancelAllLocalNotifications", []);
    };
    //iOS End----

    // Event spawned when a notification is received while the application is active
    PushNotification.prototype.notificationCallback = function(notification) {
        var ev = document.createEvent('HTMLEvents');
        ev.notification = notification;
        ev.initEvent('push-notification', true, true, arguments);
        document.dispatchEvent(ev);
    };

    /* cordova.addConstructor(function() {
        if(!window.plugins) window.plugins = {};
        window.plugins.pushNotification = new PushNotification();
    }); */

    window.pushNotification = new PushNotification();

})(window.cordova || window.Cordova || window.PhoneGap);

function initPushwoosh()
{

    var pushNotification = window.pushNotification;
    pushNotification.onDeviceReady();

    pushNotification.registerDevice({alert:true, badge:true, sound:true, pw_appid:"17009-69D5F", appname:"Snow Day"},
                                    function(status) {
                                        var deviceToken = status['deviceToken'];
                                        console.warn('registerDevice: ' + deviceToken);
                                    },
                                    function(status) {
                                        console.warn('failed to register : ' + JSON.stringify(status));
                                        navigator.notification.alert(JSON.stringify(['failed to register ', status]));
                                    });

    pushNotification.setApplicationIconBadgeNumber(0);

    document.addEventListener('push-notification', function(event) {
                                    var notification = event.notification;
                                    navigator.notification.alert(notification.aps.alert);
                                    pushNotification.setApplicationIconBadgeNumber(0);
                              });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:04:45.307

这很奇怪，因为来自 github 的 Pushwoosh 示例几乎可以开箱即用。

确保在 cordova 脚本之后包含 PushNotification 脚本：

```
 <script type="text/javascript" src="cordova-2.1.0.js"></script>
    <script type="text/javascript" src="PushNotification.js"></script> 
```

# jquery - jquery mobile dialog call to diallog虽然链接不起作用

> ID：12700374
> 
> 赞同：0
> 
> 时间：2012-10-03T00:30:49.077
> 
> 标签：jquery, jquery-mobile, dialog

我有这个文档，其中定义了两个简单的页面：

```
 //page1
         ...
         <a href="#dialog" id="link_open_dialog" data-rel="dialog">Click me</a>
         ...

 //page2
    <div data-role="page" id="dialog">           
         <div data-role="header">
                <h1>Something</h1>
          </div>
          <div data-role="content" id="textDialog">
              something
          </div>  
     </div> 
```

但问题是我看不到对话框，从来没有............是我认为最简单的情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:11:25.937

问题是模板中的一个参数。与 jquery Mobile 无关。该参数是一个空链（“”），但我不知道因为那部分完全不完整，所以很难测试它。非常感谢，我花了几个小时来解决这个简单的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:50:32.450

我认为您没有正确定义 jQuery Mobile 的引用，或者您可能会检查控制台是否有错误。

尝试以下工作示例：

```
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile.structure-1.1.1.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
    </head>

    <body>
        <!-- PAGE 1 -->
        <div id="page_1" data-role="page">
            <div data-role="content">
                <a href="#dialog" id="link_open_dialog" data-rel="dialog">Click me</a>
            </div>
        </div>

        <!-- PAGE 2: DIALOG -->
        <div data-role="page" id="dialog">           
            <div data-role="header">
                <h1>Something</h1>
            </div>
            <div data-role="content" id="textDialog">
                something
            </div>  
        </div>  
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-03T00:46:24.343

不熟悉这个插件，但看起来你需要指定`data role`as `"button"`，否则不会触发任何事件......只是一个猜测。

```
<a data-role="button" data-rel="dialog">hello</a>

    <div data-role="dialog">Hello World</div> 
```

# algorithm - 面试算法

> ID：12700378
> 
> 赞同：10
> 
> 时间：2012-10-03T00:31:36.743
> 
> 标签：algorithm

最近有人问我以下面试问题：你有两组相同长度的数字N，例如A = [3, 5, 9]和B = [7, 5, 1]。接下来，对于范围 0..N-1 中的每个位置 i，您可以选择数字 A[i] 或 B[i]，因此最后您将拥有另一个长度为 N 的数组 C，其中包含来自 A 和B.如果C中所有元素的总和小于或等于K，那么这样的数组是好的。请编写一个算法，通过给定的数组 A、B 和数字 K 来计算好的数组的总数。

我提出的唯一解决方案是动态编程方法，当我们有一个大小为 NxK 的矩阵时，M[i][j] 表示如果当前总和等于 j，我们可以对数字 X[i] 有多少组合。但看起来他们希望我想出一个公式。你能帮我解决这个问题吗？至少我应该寻找什么方向？将不胜感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T01:28:43.247

经过一番考虑，我相信这是一个 NP 完全问题。考虑：

```
A = [0, 0, 0, ..., 0]
B = [b1, b2, b3, ..., bn] 
```

请注意，第三组的每个构造`C = ( A[i] or B[i] for i = 0..n )`都只是 的某个子集`A`和 的某个子集的并集`B`。在这种情况下，由于每个子集的`A`总和为`0`，因此 的总和`C`与 的某个子集的总和相同`B`。

现在你的问题是“我们可以用多少种方法构建`C`一个总和小于`K`？” 可以重述为“`B`总和的多少子集小于`K`？”。解决这个问题`K = 1`并`K = 0`产生[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)的解决方案`B`（两个解决方案之间的差异是总和为 0 的子集的数量）。

通过类似的论点，即使在包含非零元素的一般情况下`A`，我们也可以构造一个数组`S = [b1-a1, b2-a2, b3-a3, ..., bn-an]`，问题变成“和有多少个子集`S`小于`K - sum(A)`？”

由于子集和问题是NP完全的，所以这个问题也一定是。因此，考虑到这一点，我敢说你提出的动态编程解决方案是你能做的最好的，当然不存在神奇的公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:54:45.273

所以有 2^N 选择，因为在每一点你要么从 A 中选择，要么从 B 中选择。在具体的例子中，你给出的 N 恰好是 3，有 8 个。为了讨论，你可以将每组决策描述为一个位模式。

因此，蛮力方法会尝试每一个位模式。

但是应该很明显的是，如果前几位产生的数字太大，那么每个后续可能的尾位组也会产生一个太大的数字。因此，建模它的更好方法可能是一棵树，您不必费心沿着已经长出极限的四肢走下去。

您还可以计算从每个位到表末尾可以达到的最大总数。如果在任何时候你的运行总数加上你可以从这里获得的最大值小于 K，那么你所在的每个子树都是可以接受的，不需要遍历。正如评论中所讨论的那样，每个组合都是可以接受的，这是这种观察的一个特例。

正如下面 Serge 所指出的，对我们来说，一个相关的观察是最小值并使用相反的逻辑来取消整个子树而无需遍历。

一个潜在的进一步优化基于这样的观察，只要我们以相同的方式洗牌，改变 A 和 B 的顺序就没有效果，因为加法是可交换的。因此，您可以努力确保最大值尽可能快地增长或最小值尽可能慢地增长，以尝试尽早退出遍历。在实践中，您可能希望应用启发式方法将绝对最大值和最小值（无论如何您都已经计算过）与 K 进行比较。

在这种情况下，递归实现是最简单的，例如（在 C 中）

```
/* assume A, B and N are known globals */

unsigned int numberOfGoodArraysFromBit(
           unsigned int bit,
           unsigned int runningTotal,
           unsigned int limit)
{
    // have we ended up in an unacceptable subtree?
    if(runningTotal > limit) return 0;

    // have we reached the leaf node without at any
    // point finding this subtree to be unacceptable?
    if(bit >= N) return 1;

    // maybe every subtree is acceptable?
    if(runningTotal + MAXV[bit] <= limit)
    {
        return 1 << (N - bit);
    }

    // maybe no subtrees are acceptable?
    if(runningTotal + MINV[bit] > limit)
    {
        return 0;
    }

    // if we can't prima facie judge the subtreees,
    // we'll need specifically to evaluate them
    return
       numberOfGoodArraysFromBit(bit+1, runningTotal+A[bit], limit) +
       numberOfGoodArraysFromBit(bit+1, runningTotal+B[bit], limit);
}

// work out the minimum and maximum values at each position
for(int i = 0; i < N; i++)
{
    MAXV[i] = MAX(A[i], B[i]);
    MINV[i] = MIN(A[i], B[i]);
}

// hence work out the cumulative totals from right to left
for(int i = N-2; i >= 0; i--)
{
    MAXV[i] += MAXV[i+1];
    MINV[i] += MINV[i+1];
}

// to kick it off
printf("Total valid combinations is %u", numberOfGoodArraysFromBit(0, 0, K)); 
```

我只是即兴思考；可能存在更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T00:55:11.370

> “请编写一个算法，通过给定的数组 A、B 和数字 K 来计算好的数组**的总数。”**

这不是目标吗？

```
int A[];
int B[];
int N;
int K;
int Solutions = 0;

void FindSolutons(int Depth, int theSumSoFar) {
    if (theSumSoFar > K) return;
    if (Depth >= N) {
    Solutions++;
    return;
    }

    FindSolutions(Depth+1,theSumSoFar+A[Depth]);
    FindSolutions(Depth+1,theSumSoFar+B[Depth]);
} 
```

调用`FindSolutions`时将两个参数都设置为零。返回时`Solutions`将等于好数组的数量；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T01:13:15.320

这就是我尝试解决问题的方法（对不起，如果它很愚蠢）

想想数组

```
A=[3,5,9,8,2]
B=[7,5,1,8,2] 
```

* * *

如果元素 0..N-1

选择数量

2^N

```
C1=0,C2=0

for all A[i]=B[i] 
{
    C1++
    C2+=A[i]+B[i]
} 
```

然后创建新的两个数组，如

```
A1=[3,5,9]
B1=[7,5,1] 
```

现在C2也是10

现在所有选择的数量减少到 2^(N-C1)

现在计算所有好的数字

使用“K”作为 K=K-C2

不幸的是，无论您使用哪种方法，您都必须计算总和 2^(N-C1) 次

# perl - 使用 WWW::Scripter 字符集问题登录 Java 站点

> ID：12700379
> 
> 赞同：1
> 
> 时间：2012-10-03T00:31:59.210
> 
> 标签：perl, www-mechanize, www-authenticate

我正在尝试使用 WWW::Scripter 模块登录到 Java 网站。使用 WWW::Mechanize 模块可以正常工作，但是一旦通过身份验证，该站点就有我需要调用的 JavaScript 函数 - 因此需要 Scripter。

经过大量的故障排除后，我发现从 click() 事件发送的数据包的差异是 Content-Type varaibale。
Mechanize 有： Content-Type: application/x-www-form-urlencoded\r\n 但 Scripter 有： Content-Type: application/x-www-form-urlencoded; charset="ISO-8859-1"\r\n（这是使用WireShark查看的）

这解释了我从网站收到的错误：

> 错误消息：“ISO-8859-1”错误堆栈跟踪：java.nio.charset.IllegalCharsetNameException：“ISO-8859-1”在 java.nio.charset.Charset.checkName(Charset.java:305) 在 java.nio .charset.Charset.lookup(Charset.java:439) at java.nio.charset.Charset.forName(Charset.java(Inlined Compiled Code))
> 
> ```
>  at java.lang.StringCoding$DecoderCache.makeDecoder(StringCoding.java(Com 
> ```
> 
> 堆代码））在 java.lang.StringCoding$1.run（StringCoding.java（编译代码））在 java.security.AccessController.doPrivileged1（本机方法）在 java.security.AccessController.doPrivileged（AccessController.java（编译代码） )) 在 java.lang.StringCoding$DecoderCache.getDecoder(StringCoding.java(Comp iled Code)) 在 java.lang.StringCoding.getDecoder(StringCoding.java(Inlined Compiled Code)) 在 java.lang.StringCoding.decode(StringCoding .java(Compiled Code)) at java.lang.String.(String.java(Compiled Code)) at java.lang.String.(String.java(Inlined Compiled Code)) at com.ibm.ws.webcontainer.servlet .RequestUtils.parsePostData(RequestUti ls.java(Compiled Code)) 在 com.ibm.ws.webcontainer.srt.SRTServletRequest.parseParameters(SRTServ letRequest.java(Compiled Code)) at com.ibm.ws.webcontainer.srt.SRTServletRequest.getParameterNames(SRTSe rvletRequest.java(Compiled Code)) at javax.servlet.ServletRequestWrapper.getParameterNames(ServletRequestW rapper.java(Compiled Code)) at org .apache.struts.util.RequestUtils.populate(RequestUtils.java(Compiled Code)) at org.apache.struts.action.RequestProcessor.processPopulate(RequestProc essor.java(Compiled Code)) at org.apache.struts.action .RequestProcessor.process(RequestProcessor.java(Compiled Code)) at org.apache.struts.action.ActionServlet.process(ActionServlet.java(Inl ined Compiled Code)) at org.apache.struts.action.ActionServlet.doPost( ActionServlet.java（编译代码））在 javax.servlet.http.HttpServlet.service（HttpServlet.java(Compiled Code)) at javax.servlet.http.HttpServlet.service(HttpServlet.java(Compiled Code)) at com.ibm.ws.webcontainer.servlet.StrictServletInstance.doService(Stric tServletInstance.java(Compiled Code)) at com.ibm.ws.webcontainer.servlet.StrictLifecycleServlet._service(Stric tLifecycleServlet.java(Compiled Code)) 在 com.ibm.ws.webcontainer.servlet.IdleServletState.service(StrictLifecy cleServlet.java(Compiled Code)) 在 com. ibm.ws.webcontainer.servlet.StrictLifecycleServlet.service(Strict LifecycleServlet.java(Inlined Compiled Code)) at com.ibm.ws.webcontainer.servlet.ServletInstance.service(ServletInstance.java(Compiled Code)) at com.ibm .ws.webcontainer.servlet.ValidServletReferenceState.dispatch(V alidServletReferenceState.java（编译代码））在com.ibm.ws.webcontainer.servlet.ServletInstanceReference.dispatch（Ser vletInstanceReference.java（内联编译代码））在com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter（WebAppFilte rChain.java （编译代码））在 com.infostream.web.filters.HibernateSessionFilter.doFilter（HibernateS essionFilter.java（编译代码））在 com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter（FilterI nstanceWrapper.java（编译代码） ) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilte rChain.java(Compiled Code)) 在 com.infostream.web.filters.IdentificationFilter.doFilter(IdentificationFilter.java(Compiled Code)) 在 com。 ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java（编译代码））在com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter（WebAppFilte rChain.java（编译代码））在com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.handleWebAppDi spatch（WebAppRequestDispatcher.java（编译代码)) 在 com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.dispatch(WebApp pRequestDispatcher.java(编译代码)) 在 com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebApp RequestDispatcher.java(编译代码) )) 在 com.ibm.ws.webcontainer.srt.WebAppInvoker.doForward(WebAppInvoker.java (编译代码)) 在 com.ibm.ws.webcontainer.srt.WebAppInvoker.handleInvocationHook(WebApp Invoker.java(编译代码))在 com.ibm.ws.webcontainer.cache.invocation.CachedInvocation.handleInvocation（CachedInvocation.java（编译代码））在 com.ibm.ws.webcontainer.cache.invocation.CacheableInvocationContext.invoke（CacheableInvocationContext.java（编译代码））在 com.ibm.ws.webcontainer.srp.ServletRequestProcessor.dispatchByURI（服务器 vletRequestProcessor。 java（编译代码））在com.ibm.ws.webcontainer.oselistener.OSEListenerDispatcher.service（OSE Listener.java（编译代码））在com.ibm.ws.webcontainer.http.HttpConnection.handleRequest（HttpConnect ion.java（ Compiled Code)) at com.ibm.ws.http.HttpConnection.readAndHandleRequest(HttpConnection.ja va(Compiled Code)) at com.ibm.ws.http.HttpConnection.run(HttpConnection.java(Compiled Code)) at com. ibm.ws.util.ThreadPool$Worker.run（ThreadPool.java（编译代码））com.ibm.ws.webcontainer.srp.ServletRequestProcessor.dispatchByURI(Ser vletRequestProcessor.java(Compiled Code)) 上 com.ibm.ws.webcontainer.oselistener.OSEListenerDispatcher 上的 CacheableInvocationContext.i nvoke(CacheableInvocationContext.java(Compiled Code))。 com.ibm.ws.webcontainer.http.HttpConnection.handleRequest(HttpConnect ion.java(编译代码)) com.ibm.ws.http.HttpConnection.readAndHandleRequest(HttpConnection. JAVA（编译代码））在 com.ibm.ws.http.HttpConnection.run（HttpConnection.java（编译代码））在 com.ibm.ws.util.ThreadPool$Worker.run（ThreadPool.java（编译代码） )com.ibm.ws.webcontainer.srp.ServletRequestProcessor.dispatchByURI(Ser vletRequestProcessor.java(Compiled Code)) 上 com.ibm.ws.webcontainer.oselistener.OSEListenerDispatcher 上的 CacheableInvocationContext.i nvoke(CacheableInvocationContext.java(Compiled Code))。 com.ibm.ws.webcontainer.http.HttpConnection.handleRequest(HttpConnect ion.java(编译代码)) com.ibm.ws.http.HttpConnection.readAndHandleRequest(HttpConnection. JAVA（编译代码））在 com.ibm.ws.http.HttpConnection.run（HttpConnection.java（编译代码））在 com.ibm.ws.util.ThreadPool$Worker.run（ThreadPool.java（编译代码） )dispatchByURI(Ser vletRequestProcessor.java(Compiled Code)) at com.ibm.ws.webcontainer.oselistener.OSEListenerDispatcher.service(OSE Listener.java(Compiled Code)) at com.ibm.ws.webcontainer.http.HttpConnection.handleRequest( HttpConnection.java（编译代码））在 com.ibm.ws.http.HttpConnection.readAndHandleRequest（HttpConnection.ja va（编译代码））在 com.ibm.ws.http.HttpConnection.run（HttpConnection.java（编译代码） ) ) 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java(Compiled Code))dispatchByURI(Ser vletRequestProcessor.java(Compiled Code)) at com.ibm.ws.webcontainer.oselistener.OSEListenerDispatcher.service(OSE Listener.java(Compiled Code)) at com.ibm.ws.webcontainer.http.HttpConnection.handleRequest( HttpConnection.java（编译代码））在 com.ibm.ws.http.HttpConnection.readAndHandleRequest（HttpConnection.ja va（编译代码））在 com.ibm.ws.http.HttpConnection.run（HttpConnection.java（编译代码） ) ) 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java(Compiled Code))http.HttpConnection.readAndHandleRequest(HttpConnection.ja va(Compiled Code)) at com.ibm.ws.http.HttpConnection.run(HttpConnection.java(Compiled Code) ) at com.ibm.ws.util.ThreadPool$Worker.run (ThreadPool.java(编译代码))http.HttpConnection.readAndHandleRequest(HttpConnection.ja va(Compiled Code)) at com.ibm.ws.http.HttpConnection.run(HttpConnection.java(Compiled Code) ) at com.ibm.ws.util.ThreadPool$Worker.run (ThreadPool.java(编译代码))

我用来测试登录的代码是：

```
#!/usr/bin/perl -w

use WWW::Scripter;

my $urlLogin = "XXX";

my $viper = WWW::Scripter->new();

$viper->use_plugin('JavaScript');

$viper->get($urlLogin);

$viper->form_name('loginForm');

$viper->field(username => "xxx");
$viper->field(password => "xxx");

$viper->click(); 
```

如前所述，如果我使用 WWW::Mechanize 而不是 WWW::Scripter，这可以正常工作。

谁能建议我可以做些什么来删除正在发布的数据包的 Content-Type 中的字符集字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:08:27.243

我看到您将这个问题交叉发布到 PerlMonks，他们回答了您的问题。

在 CPAN 的模块评论中，我看到：“BUGS：太多无法列出！这东西目前非常不稳定，委婉地说。”

我认为最好的支持 javascript 的网络自动化是 WWW::Mechanize::Firefox。要使用它，您必须在您的机器上安装 Firefox 并添加一个插件。perl 脚本将使用 firefox 通过此插件使用 javascript 呈现页面。该页面与 Firefox 一起使用可能会弄乱它。

问候，

# php - CKEditor 正在转义 html 元素

> ID：12700383
> 
> 赞同：3
> 
> 时间：2012-10-03T00:32:39.983
> 
> 标签：php, ckeditor

我正在使用 CKEditor 将文本插入 MySQL 数据库。我注意到当数据到达数据库时，我安装的 CKEditor 正在转义所有 HTML 元素。

因此，以下是我在使用 CKEditor 插入文本后在数据库中得到的内容：

```
'&' (ampersand) becomes '&amp;'

'"' (double quote) becomes '&quot;

"'" (single quote) becomes '&#039;

'<' (less than) becomes '&lt;' 

'>' (greater than) becomes '&gt;' 
```

我宁愿完全禁用 CKEditor HTML 转义，并依靠我的 PHP 脚本来处理使用 PHP 的`htmlspecialchars`.

我禁用 CKEditor 的 HTML 转义功能的另一个很好的理由是我想将写入的内容保留在 MySQL 数据库中。换句话说，我想在数据库中保留单引号和双引号，然后`htmlspecialchars`当我使用 MySQL select 语句将数据库数据打印到页面时，我想让 PHP 清理 HTML 元素。

谁能告诉我如何在 CKeditor 中禁用 html 转义？您对上述内容的意见或任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T09:10:38.450

干得好：

*   [配置实体](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.entities)
*   [config.basicEntity](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.basicEntities)

# c - 将 void* 转换为双精度

> ID：12700384
> 
> 赞同：5
> 
> 时间：2012-10-03T00:32:49.437
> 
> 标签：c, pointers, pthreads, type-conversion

我正在尝试使用该`pthread`库来计算可以来自 range的`n`斐波那契数。当我尝试将我的类型转换为.`n``0-1000``void*``double`

在我的主要内容中，我调用了我的计算斐波那契函数：

```
pthread_create(&tid, &attr, calc_fib, (void *)n); 
```

在我的`calc_fib`函数中，我尝试使用以下方式进行类型转换：

```
void *calc_fib( void *num)
{
    double n;
    n = (double)num;
    ... 
```

但是，当我尝试这样做时，会出现以下错误：

```
In function ‘calc_fib’:
error: pointer value used where a floating point value was expected
In function ‘main’:
error: cannot convert to a pointer type 
```

我无法在 C 中从`void*`to进行类型转换，`double`还是我做错了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T00:37:37.630

`void *num`是一个指针。`double n`是一个变量。

您可以投射`void*`到`double*`：

```
double *p = (double *)num; 
```

然后你取消引用它：

```
double n = *p; 
```

或者在一行中：

```
double n = *(double *)num; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T00:35:27.113

首先，您要将 void* 转换为 double*。然后，您需要取消引用指针以将其分配给双精度值。

```
void *calc_fib( void *num)
{
    double n;
    n = *(double*)num;
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T01:06:43.907

您不能将 可移植`double`地转换为指针 - 首先，指针类型可能没有足够的位。

如果 调用后`n`不改变 in ，则可以将指针传递给变量本身（即，然后使用inside ）。`main``pthread_create``n``main``(void*)&n``*(double*)num``calc_fib`

如果`n`可能发生变化 - 也许你有一个循环计算各种 n 值以传递给你生成的不同线程 - 那么你必须避免新线程在主线程替换它之前可能没有读取值的竞争条件。您可以为此使用互斥锁 - 这意味着需要与线程数量无关的固定内存量 - 但代码相对冗长，它会进一步序列化并减慢线程的启动速度。通常更好的方法是将每个值放入单独的内存地址。您可以使用具有与新线程一样多的值的数组，或者在堆上为每个线程分配内存，`double`然后让线程读取然后释放该内存......

# ios - 具有相同服务和特性的多个设备中的身份蓝牙 BLE 设备连接？

> ID：12700385
> 
> 赞同：1
> 
> 时间：2012-10-03T00:33:09.493
> 
> 标签：ios, core-bluetooth

我有多个具有相同服务和特性的 BLE 设备。我可以扫描和连接多个设备。连接后，尝试通过发送命令来区分每一个，但它不起作用。它与单个设备完美配合。它类似于套接字连接吗？就像服务器产生子线程，每个客户端都可以通过线程保持连接。请提供一些关于如何识别每台设备的提示。

我创建的 CBCentralManager 实例是单例的。

```
+ (id) sharedInstance
{
    static BLEConnectionManager *this   = nil;

    if (!this)  {
        this = [[BLEConnectionManager alloc] init];
    }
    else  {
        [this scanDevice];
    }

    return this;
}

-(void) scanDevice {
    [centralManager scanForPeripheralsWithServices:nil options:0];
}

- (id) init
{
    centralManager = [[CBCentralManager alloc] initWithDelegate:self queue:nil];
    peripherals = [[NSMutableArray alloc] init];

    [centralManager scanForPeripheralsWithServices:nil options:0];
    return self;
} 
```

=== 编辑

这行得通吗？在为每个设备建立连接后，我将在 didConnectPeripheral 委托方法中创建实例处理服务和特性，例如 Apple 提供的 temperatureSensor 示例。因此，每个设备都单独维护一个连接。

```
- (void) centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral  
{
    service = [[[LeTemperatureAlarmService alloc] initWithPeripheral:peripheral  controller:peripheralDelegate] autorelease];
[service start];
} 
```

# c# - C# MVC EF 通过导航属性访问导致实体在 db.SaveChanges() 上抛出异常

> ID：12700407
> 
> 赞同：1
> 
> 时间：2012-10-03T00:36:31.590
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一个具有以下形式的引用约束的实体：Entity->Others，并且正在尝试删除有问题的实体。

加载实体后删除，然后保存回来，这工作正常。

```
Entity entity = null;
entity = db.Entities.Where(o => o.Id == loadId).FirstOrDefault();

db.Entities.DeleteObject(entity);
db.SaveChanges(); 
```

通过引用约束向其他类型的实体添加单个检查会导致在保存时引发异常

```
Entity entity = null;
entity = db.Entities.Where(o => o.Id == loadId).FirstOrDefault();

entity.Others.Count();

db.Entities.DeleteObject(entity);
db.SaveChanges(); 
```

除了：

*操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。*

我并没有期望太多，因为我在这里没有完整且最少的代码，但是关于如何简单地访问其他人使实体无效以进行保存的最模糊的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:45:36.223

看起来你的映射有一些错误。要么您首先使用数据库，并且您的数据库允许级联删除`Entity`，`Order`但您的 EDMX 模型不允许，或者您的数据库允许`Orders`不存在`Entity`（可为空的 FK）但您的类不存在。

在第一种情况下，选择 EDMX 中的关联并修改其属性以支持`OnDelete`正确的方向。在后一种情况下，确保 和 之间的基数`Entity`是`Order`0..1-N 而不是 1-N。如果您暴露了 FK，请`Order`确保它可以为空。

如果没有级联删除或可为空的 FK，您的第一个示例应该会抛出错误（除非您在数据库中关闭了您永远不应该做的约束验证）。在这种情况下，您必须先删除所有从属实体 ( `Orders`)，然后才能删除主体 ( `Entity`)。

# objective-c - 在 Block 语句中分配/显示 UIAlertView

> ID：12700411
> 
> 赞同：7
> 
> 时间：2012-10-03T00:37:07.337
> 
> 标签：objective-c, objective-c-blocks

我对目标 C 中的块很陌生。我已经阅读了文档，并且对它们有一个非常基本的了解。

为什么这行不通？这是请求日历访问的框架回调。它需要一个块作为参数。我想做的就是在块中分配并显示 UIAlertView，但是当它尝试显示时它会崩溃。

我希望这不是一个愚蠢的问题……网上所有使用块的介绍示例都只是展示了带有计数器的琐碎示例。

```
//Request access
[eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {

            if (granted == FALSE) {
                UIAlertView *myAlert = [[[UIAlertView alloc]initWithTitle:@"Calendar Access Denied"
                                                                          message:@"<InfoText>"
                                                                         delegate:nil
                                                                cancelButtonTitle:@"OK"
                                                                otherButtonTitles:nil] autorelease];
                [myAlert show];
            }
            else {
                [self addToCalendar];
            }
        }]; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-03T00:41:18.463

你有没有尝试过？

```
if (granted == FALSE)
{
    dispatch_async(dispatch_get_main_queue(), ^{
       UIAlertView *myAlert = [[[UIAlertView alloc]initWithTitle:@"Calendar Access Denied"
                                                         message:@ <InfoText>"
                                                        delegate:nil
                                               cancelButtonTitle:@"OK"
                                               otherButtonTitles:nil] autorelease];
       [myAlert show];
    });
} 
```

这会在主线程中进行回调，对于混合块和 UIKit 很有用

# java - Android：isDirectory() 总是返回 true

> ID：12700412
> 
> 赞同：0
> 
> 时间：2012-10-03T00:37:18.283
> 
> 标签：java, android

[我在这里](https://stackoverflow.com/questions/8666093/android-file-isdirectory-always-returning-true-for-a-file-so-unable-to-add)试过，但没有帮助。

我的文件名过滤器仅获取目录和 .txt 文件：

```
FilenameFilter filter = new FilenameFilter()
{
    public boolean accept(File dir, String name)
    {
        if (dir.isDirectory())
        {
            return true;
        }
        else
        {
            return dir.getName().endsWith(".txt");
        }
    }
}; 
```

我也试过 !dir.isFile()

将过滤器应用于文件和目录列表：

```
 CurDir = homeDir;
            dir = new File(homeDir);
            values = dir.list(filter);
            if (values == null)
            {
                Toast.makeText(this, "No Files/Folders", Toast.LENGTH_LONG).show();
            }
            else
            {
                ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, values);
                setListAdapter(adapter);
            } 
```

homeDir 的值：

```
homeDir = Environment.getExternalStorageDirectory().toString(); 
```

它仍然显示 .png 和所有其他文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:41:42.420

传递的`File dir`是包含实际文件的目录，因此它始终是一个目录。您拥有的完整文件是 %dir%/%name%。我相信如果整个文件是一个目录，名称将是“/”或者可能为 null。

您还可以通过执行创建完整文件`new File(dir, name);`

# asp.net-mvc - 在单元测试中调用 UrlHelper.Content(string) 时出现 NullReferenceException

> ID：12700415
> 
> 赞同：3
> 
> 时间：2012-10-03T00:37:39.887
> 
> 标签：asp.net-mvc, unit-testing

我有一些`UrlHelper`我想进行单元测试的扩展方法。但是，当路径以“~/”开头时，我`NullReferenceException`会从方法中得到一个。`UrlHelper.Content(string)`有谁知道是什么问题？

```
[Test]
public void DummyTest()
{
    var context = new Mock<HttpContextBase>();
    RequestContext requestContext = new RequestContext(context.Object, new RouteData());
    UrlHelper urlHelper = new UrlHelper(requestContext);

    string path = urlHelper.Content("~/test.png");

    Assert.IsNotNullOrEmpty(path);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T00:59:41.103

当您使用 RouteContext 创建 UrlHelper 时，HttpContext 在您的单元测试环境中为空。如果没有它，当您尝试调用任何依赖它的方法时，您会遇到很多 NullReferenceExceptions。

有许多关于模拟各种 Web 上下文的线程。您可以查看这个： [如何使用 Moq 在 ASP.NET MVC 中模拟 HttpContext？](https://stackoverflow.com/questions/1452418/how-do-i-mock-the-httpcontext-in-asp-net-mvc-using-moq)

或者这个 [Mock HttpContext.Current in Test Init Method](https://stackoverflow.com/questions/4379450/mock-httpcontext-current-in-test-init-method)

**编辑：** 以下将起作用。请注意，您需要模拟 HttpContext.Request.ApplicationPath 和 HttpContext.Response.ApplyAppPathModifier()。

```
[Test]
public void DummyTest() {
    var context = new Mock<HttpContextBase>();
    context.Setup( c => c.Request.ApplicationPath ).Returns( "/tmp/testpath" );
    context.Setup( c => c.Response.ApplyAppPathModifier( It.IsAny<string>( ) ) ).Returns( "/mynewVirtualPath/" );
    RequestContext requestContext = new RequestContext( context.Object, new RouteData() );
    UrlHelper urlHelper = new UrlHelper( requestContext );

    string path = urlHelper.Content( "~/test.png" );

    Assert.IsNotNullOrEmpty( path );
} 
```

我在以下线程中找到了详细信息： [ASP.NET 虚拟路径在哪里解析波浪号“~”？](https://stackoverflow.com/questions/4563235/where-does-asp-net-virtual-path-to-resolving-the-tilde)

# vb.net - 将参数从动态控件传递到 VB.NET 中的 AddHandler

> ID：12700418
> 
> 赞同：1
> 
> 时间：2012-10-03T00:38:12.607
> 
> 标签：vb.net

我试图弄清楚如何使用我在动态控件中创建的 AddHandler 将信息从一个表单传递到另一个表单。

我有一个类似的循环

```
Dim I As Integer

For I = 0 To 10
    Dim gbNew As New GroupBox()
    Dim pbNew As New PictureBox()
    Dim llbNew As New Label()
    Dim tlbNew As New Label()
    Dim olbNew As New Label()
    Dim slbNew As New Label()
    Dim wlbNew As New Label()

    UserName = dt.Rows(I)("UserName").ToString()
    Status = dt.Rows(I)("LastJobType").ToString()
    JobType = dt.Rows(I)("LastJobType").ToString()
    LLocation = dt.Rows(I)("LastLocation").ToString()
    TimeIn = dt.Rows(I)("LogInTime")
    TimeOut = dt.Rows(I)("LogOutTime")
    FlowLayoutPanel1.Controls.Add(gbNew)

    gbNew.Controls.Add(llbNew)
    llbNew.Visible = True
    llbNew.Text = LLocation
    llbNew.Font = New Font(llbNew.Font.FontFamily, 6.5)
    llbNew.Location = New System.Drawing.Point(3, 25)
    llbNew.BorderStyle = BorderStyle.None
    llbNew.TextAlign = ContentAlignment.MiddleLeft
    llbNew.Size = New Size(80, 15)

    gbNew.Size = New System.Drawing.Size(270, 80)
    'gbNew.BackColor = System.Drawing.Color.Silver
    gbNew.Visible = True
    gbNew.Text = UserName & " " & I + 1

    AddHandler gbNew.Click, AddressOf ShowForm
Next 
```

事件处理程序触发一个子 ShowForm：

```
Private Sub ShowForm()
    Details.Show()
End Sub 
```

这反过来会弹出一个表单，但我不知道如何将一些需要的信息从动态生成的控件传递到循环外的静态控件。

我在一个表单中使用了一个静态控件：

```
label1.text = "something" 
```

我打开了新表格，我可以使用类似 `dim info as string = form1.label.text`. 但由于它是动态的，所以我没有 label1.text。相反，我有一个`llbNew.Text`似乎无法从 form2 调用的东西 :(

如何将信息从 form1 的动态控件传递到 form2？

请将此保留到 VB.NET，而不是 C#，因为我几乎不了解 VB.NET，更不用说尝试从我零知识的 C# 进行大脑转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:55:46.923

这是你可以采取的方向。我希望很清楚：

```
For I = 0 To 10
    (...)
    gbNew.Text = UserName & " " & I + 1
    gbNew.Tag = dt.Rows(I) ' Any information that you need here 

    AddHandler gbNew.Click, AddressOf ShowForm  '(No changes here)
Next 

' Use the appropriate Event Handler signature @ the handler Sub
Private Sub ShowForm(sender as Object, e as EventArgs)
    Dim groupBoxClicked as GroupBox = TryCast(sender, GroupBox)
    If groupBoxClicked IsNot Nothing
        Dim detailsForm as New Details()
        detailsForm.ParentInformation = groupBoxClicked.Tag
        detailsForm.ShowDialog()
    End If
End Sub

(...)

Public Class Details ' Your Details Form
    Public Property ParentInformation as DataRow

End Class 
```

# r - 复数的实部？

> ID：12700424
> 
> 赞同：19
> 
> 时间：2012-10-03T00:38:46.467
> 
> 标签：r

我只是在学习 R，所以请原谅我确信这是一个非常基本的问题。如何取复数的实部？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-03T00:44:17.367

如果您阅读`complex`( `?complex`) 的帮助文件，您将看到许多用于执行复杂算术的函数。细节清楚地说明

> 函数`Re`、`Im`、和具有它们通常的解释`Mod`，即返回复数值的实部、虚部、模数、参数和复共轭。`Arg``Conj`

所以

使用`Re`：

```
Re(1+2i)
# 1 
```

对于虚部：

```
Im(1+2i)
# 2 
```

`?complex`将列出其他有用的功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T00:44:45.900

```
Re(z) 
```

和

```
Im(z) 
```

将是您正在寻找的功能。

另见[http://www.johnmyleswhite.com/notebook/2009/12/18/using-complex-numbers-in-r/](http://www.johnmyleswhite.com/notebook/2009/12/18/using-complex-numbers-in-r/)

# html - Flash 重定向 SWF 文件

> ID：12700428
> 
> 赞同：0
> 
> 时间：2012-10-03T00:39:23.533
> 
> 标签：html, flash

有没有办法让点击事件然后重定向到 swf 嵌入对象？

以下是我目前拥有的代码，但它似乎不起作用

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="560" height="80" id="ad_cat" align="">
                    <param name="movie" value="http://roadsonline.com.au/assets/ads/COA0460_560x80.swf?clickTAG=catredir.php">
                    <param name="wmode" value="transparent" /> 
                    <embed src="http://roadsonline.com.au/assets/ads/COA0460_560x80.swf?clickTAG=catredir.php" quality="high" width="560" height="80" name="movie"  wmode="transparent" align=""  type="application/x-shockwave-flash" plugins page="http://www.macromedia.com/go/getflashplayer"> 
                </object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:55:15.870

SWF 中有两部分，HTML 和 clickTAG。

我相信你的 html 应该可以工作——尽管我推荐一个像[http://yoursite.com/redirect.php](http://yoursite.com/redirect.php)这样的硬链接。那么让我们谈谈Flash好吗？

不久前，我为我的员工写了一个关于点击标签的教程，它解释了你需要在 Flash 中做什么。这是 AS2：

[http://ryanhollingsworth.com/index.php/banner-ad-tutorials/item/34-actionscript-20-basic-clicktag-and-fundamentals](http://ryanhollingsworth.com/index.php/banner-ad-tutorials/item/34-actionscript-20-basic-clicktag-and-fundamentals)

AS3 点击标签：

```
 import flash.display.MovieClip;

    var hit = new MovieClip();
    hit.graphics.beginFill(0xFFFFFF);
    hit.graphics.drawRect(0,0,stage.stageWidth,stage.stageHeight);
    var clicky = new SimpleButton(null,null,null,hit);
    this.addChild(clicky);

     clicky.addEventListener(MouseEvent.CLICK, function(e){
 if(root.loaderInfo.parameters.clickTAG) navigateToURL(new URLRequest(root.loaderInfo.parameters.clickTAG), "_blank");
 e.stopPropagation();
 }); 
```

进一步阅读： [http ://helpx.adobe.com/flash/kb/pass-variables-swfs-flashvars.html](http://helpx.adobe.com/flash/kb/pass-variables-swfs-flashvars.html)

# objective-c - UICollectionView 标头未显示

> ID：12700432
> 
> 赞同：46
> 
> 时间：2012-10-03T00:40:46.360
> 
> 标签：objective-c, cocoa-touch, uicollectionview

我正在做一个项目，该项目使用一个`UICollectionView`来显示几张专辑。这些项目显示得很好，但现在我想在第一部分上方显示一个标题。

为此，我在`registerNib:forSupplementaryViewOfKind:withReuseIdentifier:`我的 init 方法中添加了 。像这样：

```
[self.collectionView registerNib:[UINib nibWithNibName:@"AlbumHeader" bundle:nil] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:kAlbumHeaderIdentifier]; 
```

（`AlbumHeader`Nib 包含类的视图`AlbumHeader`，它是 的子类`UICollectionView`。）

之后，我实现了`collectionView:viewForSupplementaryElementOfKind:atIndexPath`方法：

```
- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath {
    return [collectionView dequeueReusableSupplementaryViewOfKind:kind withReuseIdentifier:kAlbumHeaderIdentifier forIndexPath:indexPath];
} 
```

现在它应该尝试加载标题视图，我想。但事实并非如此，补充视图的方法不会被调用。

我错过了什么？卡住了几个小时，已经多次阅读`UICollectionView`s 上的文档，但似乎没有任何帮助。有什么想法吗？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-10-03T09:49:10.680

在寻找 yuf 询问的方法后，我读到默认情况下页眉/页脚的大小为 0,0。如果大小为 0，则不会显示页眉/页脚。

您可以使用属性设置大小：

```
flowLayout.headerReferenceSize = CGSizeMake(0, 100); 
```

然后所有标题将具有相同的大小。如果每个部分必须不同，您可以实现以下方法，它是`UICollectionViewDelegateFlowLayout`协议的一部分。

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section {
    if (section == albumSection) {
        return CGSizeMake(0, 100);
    }

    return CGSizeZero;
} 
```

请注意，在垂直滚动中，它使用`height`集合视图的返回和全宽，在水平滚动中，它使用集合视图的返回`width`和全高。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T01:09:03.723

您是否实施：

```
- (UICollectionViewLayoutAttributes *)layoutAttributesForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath 
```

有很多方法可以实现只是为了让一件事起作用……我也在学习。告诉我它是否有效。

编辑：对不起错误的方法。那是我认为的子类化。我正在谈论的是`UICollectionViewLayout`（如果您的布局支持补充视图，您的子类的布局对象）：

```
- layoutAttributesForSupplementaryViewOfKind:atIndexPath: 
```

见这里：[https ://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionViewLayout_class/Reference/Reference.html#//apple_ref/occ/cl/UICollectionViewLayout](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionViewLayout_class/Reference/Reference.html#//apple_ref/occ/cl/UICollectionViewLayout)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-15T19:38:27.977

适用于**SWIFT 3 和 SWIFT 4**

```
 self.collectionView.register(UINib(nibName: "SectionCollectionReusableView", bundle: nil), forSupplementaryViewOfKind: UICollectionElementKindSectionHeader, withReuseIdentifier: "SectionCollectionReusableView")

    self.collectionView.fs_width = self.collectionView.bounds.width

    let layout: UICollectionViewFlowLayout = UICollectionViewFlowLayout()
    layout.sectionInset = UIEdgeInsets(top: 70, left: 40, bottom: 0, right: 0)
    layout.minimumInteritemSpacing = 0
    layout.minimumLineSpacing = 0
    layout.estimatedItemSize = CGSize(width: 350, height: 140)
    layout.scrollDirection = .horizontal
    layout.headerReferenceSize = CGSize(width: self.collectionView.bounds.size.width, height: 60)
    layout.sectionHeadersPinToVisibleBounds = true
    self.collectionView!.collectionViewLayout = layout 
```

您必须将此添加到**ViewDidLoad**，并注意

```
layout.headerReferenceSize = CGSize(width: self.collectionView.bounds.size.width, height: 60) 
```

这将使标题部分布局

并感谢@Guido Hendriks，我也从他们的回答中获得了洞察力

# java - Java Swing 为游戏添加组件

> ID：12700434
> 
> 赞同：2
> 
> 时间：2012-10-03T00:40:53.793
> 
> 标签：java, swing, jpanel, paintcomponent

我正在用 Java swing 编写游戏，并且有几层需要实现的类。

以下是课程：

*   Main() //设置窗口，制作游戏，并设置可见
    *   Game() //绘制主游戏画布，维护游戏数据，告诉每个对象自己绘制
        *   Board() //绘制房间和背景图形
            *   Room() //绘制房间内的东西，跟踪位置
                *   Items() //位置、颜色、功能等
                    *   CollectibleItems() //扩展项目
                    *   Creatures() //扩展项目
        *   ControlPanel() //放一个按钮做某事
        *   StatePanel() //将文本放入房间的面板中，是否锁定

主类：

```
import java.awt.*;

import javax.swing.*;

import javax.swing.border.*;

public class Main extends JFrame {
    public static void main (String [] args) {
        new Main ();
    }

    public Main () {
        // Window setup                                                                            
        setSize (700, 450);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        Container content = getContentPane();
        content.setLayout(new BorderLayout());

        // Put a Game in                                                                        
        Game myGame=new Game ();    
        myGame.setBorder(new LineBorder(Color.black, 9));
        content.add(myGame, BorderLayout.CENTER);

            setVisible (true);
    } 
```

这是我的游戏课。从这里我想添加Board和Panels，我希望Board添加Rooms等。我不知道如何封装类并仍然添加它们和setVisible。我知道如何在 main 中做到这一点，但是有没有办法使用类似的 content.add() 类型的东西向 Game 添加东西？

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.*;

public class Game extends JComponent {
    public void paintComponent (Graphics g) {

        JPanel ControlPanel=new JPanel();
        ControlPanel.setLayout(new FlowLayout());
        ControlPanel.setBorder(new LineBorder(Color.red, 9));
    }
} 
```

TL;DR-我如何封装和显示不同的类？JavaSwing 新手...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T00:50:43.193

首先...不要这样做！曾经！！

```
public void paintComponent (Graphics g) {

    JPanel ControlPanel=new JPanel();
    ControlPanel.setLayout(new FlowLayout());
    ControlPanel.setBorder(new LineBorder(Color.red, 9));
} 
```

你也必须打电话`super.paintComponent`，除非你有一个非常非常好的理由不打电话。这些方法做了很多重要的背景工作。

`paintXxx`永远不要在 any方法的上下文中修改任何组件。这将使您陷入无限循环并最终消耗您所有的 CPU。

我会先通读一遍

*   [使用 JFC/Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/index.html)
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)

# windows-7 - 在 cygwin 下的 windows 7 中安装 mahout

> ID：12700435
> 
> 赞同：1
> 
> 时间：2012-10-03T00:40:54.397
> 
> 标签：windows-7, hadoop, cygwin, mapreduce, mahout

我已经在 Windows 7 pro 64 位的 cygwin 下成功安装了 hadoop。

现在我正在安装 mahout，但我不能。

设置 MAHOUT_HOME 和变量并在 cygwin 上运行 mahout 后，出现以下错误

我想这与 cygwin 和 windows 路径之间的兼容性问题有关，但我找不到应该更改哪个特定路径。

```
Running on hadoop, using /cygdrive/c/hadoop/bin/hadoop and HADOOP_CONF_DIR=
MAHOUT-JOB: /cygdrive/c/mahout/mahout-examples-0.7-job.jar
Exception in thread "main" java.io.IOException: Error opening job jar: /cygdrive               /c/mahout/mahout-examples-0.7-job.jar
    at org.apache.hadoop.util.RunJar.main(RunJar.java:90)
Caused by: java.io.FileNotFoundException: \cygdrive\c\mahout\mahout
examples-0.7               
-job.jar (The system cannot find the path specified)
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.<init>(ZipFile.java:214)
    at java.util.zip.ZipFile.<init>(ZipFile.java:144)
    at java.util.jar.JarFile.<init>(JarFile.java:152)
    at java.util.jar.JarFile.<init>(JarFile.java:89)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:88) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:52:55.693

/cygdrive/c/mahout/mahout-examples-0.7-job.jar 应该是 C:\mahout\mahout-examples-0.7-job.jar。

```
 MAHOUT_JOB=`cygpath -wp $MAHOUT_JOB 
```

Java 是一个 Windows 程序，因此不能识别 Cygwin 特定的路径。所以 /cygdrive/c/foo/... 对 java.exe 没用。如果您的 Java 软件使用文件路径，则需要使用 Cygwin 附带的 cygpath 工具将它们转换为 Windows 样式的路径名。

cygpath 将 UNIX 风格的路径作为参数并返回 Windows 风格的路径。这是一个例子：

```
 $ cygpath -wp /cygdrive/c:/cygdrive/c/classes
    c:\;c:\classes 
```

因此，当调用 Java 程序（例如，从 shell 脚本中）时，您需要像这样编写命令行：

```
java -classpath `cygpath -wp $CLASSPATH` [arguments] 
```

参考： http: [//www.inonit.com/cygwin/faq/](http://www.inonit.com/cygwin/faq/)

# javascript - js函数在页面加载时没有运行？

> ID：12700439
> 
> 赞同：0
> 
> 时间：2012-10-03T00:41:07.490
> 
> 标签：javascript, jquery, function

我为这个相当基本的问题道歉，但我到此为止！

我有一个 javascript 函数，我想在页面加载时运行它......简单吧？我曾尝试将该功能放入文档准备就绪、窗口准备就绪、将其放在主要功能之前和之后等等。似乎没有任何效果。

到目前为止的代码：

```
function calcme() {         
    DA FUNCTON
    }

$(document).ready(function(){   
    calcme();
    $("input").bind("keyup", calcme);

}); 
```

请注意... keyup 绑定确实有效，但我需要 calcme 函数在页面加载时加载。想法？

***更新：根据要求，这是完整的小提琴。[http://jsfiddle.net/vpsSA/](http://jsfiddle.net/vpsSA/)***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:54:00.890

**发现问题**：该`calcme()`函数假定它是从输入之一的上下文中调用的，并在其中使用 this.value。因此，当您在没有任何参数的情况下调用它时，它显然会失败。这可以通过触发`keyup`每个输入来解决，而不是直接调用`calcme()`。请参阅下面的小提琴。

**工作小提琴：http:** [//jsfiddle.net/vpsSA/1/](http://jsfiddle.net/vpsSA/1/)

* * *

在您的`ready()`处理程序中，绑定语句出现在`caclme()`调用之后。正如您提到的，事件绑定有效。这表示：

a)`calcme()`肯定是在加载时执行的。没有其他办法，因为您已经提到`calcme()`调用之后的绑定语句按预期工作。

b)`calcme()`没有抛出任何 JS 错误 - 如果是这样，它将在错误处停止并且不会发生事件绑定。也许它会发出警告，您可以在 JS 控制台中看到它。

c) 由于您没有提供里面的内容`calcme()`，我们不能肯定地说。但它看起来像是某种条件失败，因为`calcme()`在负载运行时您没有得到预期的结果。您是否使用了在加载*后*运行后`calcme()`初始化的任何内容。我建议在处理程序的第一行添加一个语句，并在 Firebug 或 Chrome 中跟踪它。*`debugger;``ready()`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:54:05.883

试试这个：

```
function calcme() {         
   try {
      //your code
   }
   catch(e) {
      alert('error: ' + e);
   } 
}

if (typeof $ === undefined)) {
   alert('not jquery');
}

$(document).ready(function(){   

    if (typeof calcme === undefined) {
       alert('calcme not exist');
    }
    else {
       calcme();
       $("input").bind("keyup", calcme);
    }
}); 
```*

# android - 在 android 上播放从 iPhone 录制的视频

> ID：12700447
> 
> 赞同：10
> 
> 时间：2012-10-03T00:42:05.000
> 
> 标签：android, iphone, avfoundation, video-capture, video-processing

我正在为 iOS 和 android 编写基于视频的社交应用程序（WinPhone 正在等待中）。我在 iPhone 上使用 AVFoundation 框架录制了 mov 格式的视频并将其上传到服务器。它可以在iPhone客户端下载和播放。但在安卓设备上，下载的视频无法播放，因为它的格式不支持安卓。支持多种移动设备平台的视频录制和播放的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T01:21:37.430

*   博客文章@[为什么 Apple 正在赢得移动视频格式之战……现在](http://mashable.com/2011/12/09/apple-mobile-video/)
    1.  安卓用`flash`插件，苹果用`HLS`
    2.  今天 HLS 协议的广泛使用是 iOS 成功的结果。Apple 将该协议指定为将视频流式传输到`iOSDevice`. 不`Flash`，不`Silverlight`，不，`RTP`或者`RTSP`。
*   问答帖子@移动视频状态 的[最佳格式](http://www.warriorforum.com/offline-marketing-discussions/375270-best-format-mobile-video.html)
    1.  `MPEG-4`将在所有手机上播放（至少那些有能力的手机）
    2.  它还可以在缓冲区与 .mov 的同时播放，这需要在播放之前先下载整部电影。
*   StackOverflow 帖子@[适用于手机的视频格式](https://stackoverflow.com/questions/6932493/video-format-that-works-on-mobile-phones)
    1.  我还没有遇到过一个不支持`MPEG-4`容器格式的手机，包括[blackberry](http://docs.blackberry.com/en/developers/deliverables/11844/video_support_723832_11.jsp)。
    2.  我们测试了各种 Android 设备，所有最新型号（Android 2.2/2.3）都支持`MPEG 4/H.264`，iPhone 和 AFAIK Windows Phone 也是如此。
*   软件产品信息@[选择电影格式](http://www.bbsoftware.co.uk/BBFlashBack/Support/UserGuides/MovieFormats.aspx)
    1.  如果需要在移动设备上播放。选择`MPEG-4`格式可以在 iDevices 和 Android 手机上播放。
    2.  可以找到更多信息@[选择电影格式](http://www.bbsoftware.co.uk/BBFlashBack/Support/UserGuides/MovieFormats.aspx)
*   加速 MPEG-4 应用程序[@FZi Forshcungzentrum INformatik](http://www.fzi.de/index.php/de/forschung/forschungsbereiche/ess/veroeffentlichungen/1125)
    1.  整个`MPEG-4`编码/解码过程在控制系统并执行控制密集型算法的标准处理器和执行计算密集型数据流算法并将结果发送回主机处理器的 XPP 协处理器之间划分。

* * *

## 根据这些信息，我建议您转换为`MPEG-4`格式。

1.  [MPEG-4 - 维基百科，免费的百科全书](http://en.wikipedia.org/wiki/MPEG-4)
2.  [MPEG-4.net - 流媒体技术资源](http://www.mpeg4.net)

* * *

Mac 应用商店免费视频转换器：

1.  [米罗视频转换器 (MVC)](http://itunes.apple.com/us/app/miro-video-converter-mvc/id412699210?mt=12)
2.  [智能转换器](http://itunes.apple.com/us/app/smart-converter/id447513724?mt=12)
3.  [任何视频转换器精简版](http://itunes.apple.com/us/app/any-video-converter-lite/id479472944?mt=12)
4.  [WonTube 免费视频转换器](http://itunes.apple.com/us/app/wontube-free-video-converter/id495101962?mt=12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T14:35:34.783

```
ffmpeg -i infile.mov -vcodec copy outfile.mp4 
```

这会将 mov 文件重新打包为 mp4 而无需转码。它非常快。生成的文件与 android 和 iphone 兼容。当然，最好的解决方案是首先在 iphone 上录制 mp4。是的，你可以这么做。

# gitolite - 修改 gitolite 存储库 url

> ID：12700453
> 
> 赞同：1
> 
> 时间：2012-10-03T00:42:34.547
> 
> 标签：gitolite

我已经安装了 gitolite。我能够很好地管理它。我添加了一些新的存储库和一些 pub 密钥。安装为“ `git@domain.com`”，并为用户添加了一个存储库为`repo.git`.

是否必须`git@domain.com:repo.git`访问，或者有没有办法在 url 中指示用户？
可能类似`user@domain.com:repo.git`或`git.domain.com/user/repo.git`例如？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:52:58.413

不，它必须是`git@domain.com`因为用户总是相同的：你用来在你的服务器上安装和管理 gitolite 的 git 帐户。

实际用户是根据您在进行 ssh 调用时使用的公钥推导出来的。**如果您在 user.pub 文件中注册了该密钥，该文件表示以用户登录名命名的**
所述公钥，那么 gitolite 将能够识别您。

 **有关更多信息，请参阅“ [gitolite 如何使用 ssh](http://sitaramc.github.com/gitolite/glssh.html) ”。

> 如果你查看`authorized_keys`文件，你会看到这样的条目（我当然切掉了末端；它们很长）：

```
command="[path]/gitolite-shell sitaram",[more options] ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA18S2t...
command="[path]/gitolite-shell usertwo",[more options] ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEArXtCT... 
```

> 首先，它找出该文件中的哪些公钥与传入的登录名匹配。
> 一旦找到匹配项，它将运行该行给出的命令；例如，如果我登录，它将运行`[path]/gitolite-shell sitaram`.
> 所以首先要注意的是，这样的用户没有得到“shell访问”，这很好！
> 
> 当`gitolite-shell`获得控制权时，**它会查看第一个参数（“ `sitaram`”、“ `usertwo`”等）来确定您是谁**。然后它会查看`SSH_ORIGINAL_COMMAND`变量以找出您要访问的存储库，以及您是在阅读还是在写作。
> 
> 现在**它有一个用户**、存储库和请求的访问权限（读/写），gitolite 查看它的配置文件，并允许或拒绝请求。**

# android - 有没有办法在没有 Android 中的 GET_TASKS 权限的情况下从服务中获取当前正在运行的活动？

> ID：12700456
> 
> 赞同：0
> 
> 时间：2012-10-03T00:43:11.207
> 
> 标签：android, android-activity, android-service

我有一个服务，它监视活动堆栈以获取堆栈上的顶部活动，并根据顶部活动执行操作。我想出了一种使用 GET_TASKS 权限的方法。但问题是添加新权限会迫使我的用户手动更新他们的应用程序。所以我想知道是否有任何方法可以在不使用 GET_TASKS 权限的情况下获取当前正在运行的活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:47:34.157

不，许可是有原因的。该许可的文档说：

> 允许应用程序获取有关当前或最近运行的任务的信息。

显然您想获取有关当前正在运行的任务的信息，因此您需要此权限。只需在您的发行说明中解释为什么您需要新权限，如果您的应用程序对您的用户有足够的价值，他们无论如何都会更新它。

# bash - Bash，如何在视觉上区分标准输出和标准错误？

> ID：12700463
> 
> 赞同：3
> 
> 时间：2012-10-03T00:44:03.873
> 
> 标签：bash

我需要一目了然地将标准输出输出与来自我正在调试的 Bash 脚本的标准错误输出区分开来。

我是否可以通过一些“可视化增强器”UNIX 过滤器来传递命令，该过滤器至少会将 stderr 着色为“红色”，即使没有在每个 stderr 行前添加一些标签？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T00:49:51.923

好吧，有几个选择。最简单的方法是使用[hilite](http://directory.fsf.org/project/hilite/)。

其他选项包括编写自定义 shell 包装器来为输入着色。

[这里](https://stackoverflow.com/questions/1763891/can-stdout-and-stderr-use-different-colors-under-xterm-konsole)有几个选项（请注意，它们几乎是特定于 xterm 的）。

# php - Gallery3 验证规则的文档

> ID：12700464
> 
> 赞同：0
> 
> 时间：2012-10-03T00:44:09.143
> 
> 标签：php, validation, gallery, kohana

我需要更改 Gallery3 模块“注册”中用于表单验证的一些规则。但是，我不知道它使用的是什么验证系统，也不知道我可以做些什么来修改它。谁能告诉我在哪里可以找到这方面的文档？

这是一个例子：

```
$group->input("email")->label(t("Email"))->id("g-email")
      ->rules("required|valid_email|length[1,255]"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:49:28.930

似乎[Gallery3 是建立在 Kohana 2.3 上](http://codex.gallery2.org/Gallery3%3aDeveloper_Handbook%3aFramework)的，点击他们的 ORM 文档会显示有关验证的部分：

[http://kohanaframework.org/3.2/guide/orm/validation](http://kohanaframework.org/3.2/guide/orm/validation)

这似乎是一个很好的起点。Validation 类的实际 API 可以在这里找到：

[http://kohanaframework.org/3.2/guide/api/Validation](http://kohanaframework.org/3.2/guide/api/Validation)

再深入一点，Gallery3 中的每个模型中似乎都定义了非标准规则：

[https://github.com/gallery/gallery3/blob/master/modules/user/models/user.php](https://github.com/gallery/gallery3/blob/master/modules/user/models/user.php)

在上述模型（扩展 ORM）中，有一个 $rules 属性，匹配它们的方法以 'valid_' 为前缀（例如，$rules 属性中的 'email' 映射到 valid_email 方法）

# visual-studio - 如何在 Visual Studio 2012 LightSwitch 中创建自定义菜单/导航屏幕？

> ID：12700465
> 
> 赞同：2
> 
> 时间：2012-10-03T00:44:09.507
> 
> 标签：visual-studio, visual-studio-lightswitch

Visual Studio 2012 LightSwitch 为您提供了默认的 5 或 6 个屏幕，例如：搜索、新建等。

我想创建一个非常基本的自定义导航/主菜单屏幕。所有这个屏幕将在一个最大化的窗口中包含字面上的 6 个垂直按钮（对于初学者和问题的简单性），每个按钮都会弹出另一个屏幕。

是否有任何类似于常规 Visual Studio 2012 应用程序的拖放功能？我基本上想创建一个名为“导航菜单”或类似名称的新屏幕模板。

谢谢，DM。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T01:28:14.300

您只能通过创建 LightSwitch*屏幕模板扩展来创建新的**屏幕模板*。

 *然而，对于胆小的人来说，这并不是一份真正的工作。在过去的几年里，我创建了许多扩展，我认为*屏幕模板扩展*是最难做的。我了解设计屏幕模板的内容。它**可能**会占用大量代码，具体取决于您希望模板为您创建什么。我有几个屏幕模板，我想根据自己的需要创建，但我一直把它们推迟。

如果您决定创建自己的屏幕模板扩展，我不想让您失望，只是让您了解您的目的。

一个问题。您想在同一个应用程序或其他应用程序中*重复使用此屏幕吗？*如果他们的回答是“否”，那么创建一个屏幕模板扩展就太过分了。

如果您只想要其中一个屏幕，要按照您的描述进行操作，您只需将*RowsLayout*控件添加到屏幕，然后为屏幕上所需的每个导航“*按钮”添加一个**RowsLayout*控件。使用*添加按钮*上下文菜单选项（右键单击*RowsLayout*控件）添加按钮。将大小等设置为您想要的，并将 RowsLayout 控件水平对齐设置设置为居中。

 ***这些按钮不会那么“性感”，它们只是您将在应用程序的其他任何地方看到的相同按钮的更大版本（如果您决定更改大小，大小除外）。主要优点是您可以快速且开箱即用地做到这一点。

或者，如果您想改善屏幕的外观，您可以执行本文[课程管理器 VS 2012 示例第 6 部分 - 主屏幕中的操作。](http://blogs.msdn.com/b/lightswitch/archive/2012/08/27/course-manager-vs-2012-sample-part-6-home-screen-andy-kung.aspx)****

# c# - 互联网上的 C# 套接字

> ID：12700466
> 
> 赞同：5
> 
> 时间：2012-10-03T00:44:12.097
> 
> 标签：c#, sockets

我成功地用 C# 制作了一个客户端服务器程序，在 LAN 下完美运行，我们使用了 TcpListener 和 TcpSocket 类。

虽然我们无法让它通过互联网工作，但我知道它与防火墙、路由器端口阻塞等有关。

我们转发了我们使用的端口并关闭了我们的防火墙，但仍然没有运气。

为了完成这项工作，我必须做些什么不同的事情？像使用某个端口一样可以正常工作吗？说“Msn Messenger”是如何做到的？

服务器代码：

```
 private static TcpListener serverTcpListener;

   public static bool Run()
    {
        // Initialize new thread for client communications
        Thread listenThread = new Thread(new ThreadStart(ListenForClients));

        // Initialize TCP listener and attempt to start
        ServerTcpListener = new TcpListener(IPAddress.Any, 3000);

        try
        {
            ServerTcpListener.Start();
        }
        catch (SocketException)
        {
            return false;
        }

        // Start client communications thread
        listenThread.Start();

        return true;
    }

    public static void ListenForClients()
    {
        while (true)
        {
            TcpClient client = ServerTcpListener.AcceptTcpClient();
            Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
            clientThread.Start(client);
        }
    } 
```

客户代码：

```
 private TcpClient myClient;
    private NetworkStream clientStream;

   public InitializeResult Initialize()
    {
        IPEndPoint serverEndPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 3000);

        try
        {
            MyClient.Connect(serverEndPoint);
        }
        catch (SocketException)
        {
            return InitializeResult.AccessError;
        }
        catch (ArgumentNullException)
        {
            return InitializeResult.NullRemote;
        }

        try
        {
            ClientStream = MyClient.GetStream();
        }
        catch (Exception)
        {
            return InitializeResult.StreamFail;
        }

        if (!Authenticate())
        {
            return InitializeResult.AuthenticateFail;
        }

        return InitializeResult.Success;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:12:15.357

如果这：

```
IPEndPoint serverEndPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 3000); 
```

正是您的客户端代码中的内容，这可能就是问题所在，即使防火墙设置正确。您必须修改客户端程序以将 IP 作为配置设置、命令行参数、文本框等，然后改用它。

如果可能的话，我会首先使用运行服务器的盒子的地址在同一 LAN 上的两台计算机上进行测试。如果无法连接，请确保 IP 正确（通过在运行服务器的机器上运行 ipconfig），并查看服务器上是否打开了 Windows 防火墙。如果是，你要么必须允许你的程序，要么只打开 3000 端口。

一旦确认工作正常，完全来自另一个网络，使用服务器所在网络的外部 IP。您可以通过访问[http://icanhazip.com/](http://icanhazip.com/)或类似网站来获取此信息（我更喜欢这个而不是 whatismyip，没有广告，它只提供 IP 地址），并确保防火墙/路由器上的端口 3000 设置为转发到服务器盒子的内部IP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T00:58:04.367

以下是您可能会遇到的一些常见问题：

## 服务器

1.  Windows 防火墙。
    *   以下是有关如何允许您的程序通过防火墙的教程：http: [//windows.microsoft.com/en-US/windows7/Allow-a-program-to-communicate-through-Windows-Firewall](http://windows.microsoft.com/en-US/windows7/Allow-a-program-to-communicate-through-Windows-Firewall)
2.  路由器上的端口转发。
    *   [http://portforward.com/](http://portforward.com/)是一个很好的资源，我相信您可以选择您的路由器，它会为您提供相应的步骤。您需要选择托管服务器的机器的 LAN IP 地址，以及您尝试连接的端口（在您的情况下为 3000）。

## 客户

对于客户端，它应该可以正常连接，但您必须指定外部 IP 地址，而不是服务器的 LAN IP 地址。您可以通过在托管服务器的计算机上[访问 http://whatismyip.com找到它。](http://whatismyip.com)

--

Msn 和类似的聊天程序使用像这样简单的客户端/服务器方法 - 很容易完成。不过，一个非常有趣的聊天程序是 Skype。它使用 P2P 系统，而不是客户端-服务器。它使用 Nat Hole Punching 来完成，如果您有兴趣（作为学生）我建议您研究它以扩展您的网络知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T00:46:19.957

您需要绑定到外部网卡。您有可能绑定到 Loopback 适配器

如果您提供一些代码，我们也许可以诊断（甚至修复）问题

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-03T01:15:11.183

您需要在以下位置替换`127.0.0.1`为您的实际 IP 地址：

```
IPEndPoint serverEndPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 3000); 
```

要获取您的 IP，您可以谷歌“我的 ip 是什么”或从服务器访问[www.whatismyip.com/ 。](http://www.whatismyip.com/)

我还建议在您的客户端和服务器上安装[Wireshark 。](http://www.wireshark.org/download.html)在调试套接字和其他网络问题时，我经常使用这个工具。

# xna - XNA 和 Windows 8 之间的兼容性问题

> ID：12700472
> 
> 赞同：6
> 
> 时间：2012-10-03T00:44:58.097
> 
> 标签：xna, windows-8

当我尝试安装 XNA 时，我收到以下错误消息：

```
Your version of XNA Game Studio 4.0 and below isn't compatible with this version of Windows. 
```

*在Windows 8（安装了VS2010）上真的*不能使用XNA吗？这似乎很奇怪......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T00:57:30.967

如果有人遇到同样的问题：

您必须安装最新版本的 Games for Windows Marketplace 客户端（[此处](http://www.xbox.com/en-US/LIVE/PC/DownloadClient)）。

# java - 解决方法：动态编译代码时出现NoClassDefFoundError

> ID：12700478
> 
> 赞同：0
> 
> 时间：2012-10-03T00:45:41.310
> 
> 标签：java, reflection, compilation

简单地说，我有这个工作：

```
java -cp ".:bin:MyJar.jar" path.to.My.Main 
```

但这在尝试加载动态编译的类时引发了异常：

```
java -jar MyJar.jar 
```

失败是在

```
x = clazz.newInstance(); 
```

我得到一个“java.lang.NoClassDefFoundError：”的地方。我使用自定义类加载器加载了该类，因为该类是运行时编译的。发生异常的原因是因为 java 在尝试加载 clazz 中的导入时使用了单独的类加载器。这可以通过修改您的 ClassLoader extends URLClassLoader 来调用 super.loadClass(className, false); 来纠正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:45:41.310

问题解决方案：

修改您的自定义类加载器以调用 super.loadClass()。即使堆栈跟踪可能不会明显通过您的类加载器。

# java - 如何在json中提取数组元素

> ID：12700480
> 
> 赞同：0
> 
> 时间：2012-10-03T00:45:45.420
> 
> 标签：java, json

我想提取从“结果”开始的数组元素，如以下 JSON 响应所示：

```
 {
  "bossresponse":{
    "responsecode":"200",
    "web":{
      "start":"0",
      "count":"42",
      "totalresults":"89200000",
      "results":[
        {
          "date":"",
          "clickurl":"http:\/\/www.yahoo.com\/",
          "url":"http:\/\/www.yahoo.com\/",
          "dispurl":"www.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>!",
          "abstract":"Welcome to <b>Yahoo<\/b>!, the world's most visited home page. Quickly find what you're searching for, get in touch with friends and stay in-the-know with the latest news and ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/mail.yahoo.com\/",
          "url":"http:\/\/mail.yahoo.com\/",
          "dispurl":"mail.<b>yahoo<\/b>.com",
          "title":"Sign in to <b>Yahoo<\/b>!",
          "abstract":"Your World. Your Way. <b>Yahoo<\/b>! makes it easy to enjoy what matters most in your world. Best in class <b>Yahoo<\/b>! Mail, breaking local, national and global news, finance ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/groups.yahoo.com\/?ch=web&pub=fp-us&t=fp&sec=link&slk=defaultrough",
          "url":"http:\/\/groups.yahoo.com\/?ch=web&pub=fp-us&t=fp&sec=link&slk=defaultrough",
          "dispurl":"groups.<b>yahoo<\/b>.com\/?ch=web&pub=fp-us&t=fp&sec=link&slk=...",
          "title":"<b>Yahoo<\/b>! Groups - Join or create groups, clubs, forums ...",
          "abstract":"<b>Yahoo<\/b>! Groups offers free mailing lists, photo & file sharing, group calendars and more. Discuss hot topics, share interests, join online communities."
        },
        {
          "date":"",
          "clickurl":"http:\/\/homes.yahoo.com\/",
          "url":"http:\/\/homes.yahoo.com\/",
          "dispurl":"homes.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Homes - Home for Sale and Rent, Makeovers, Design and ...",
          "abstract":"Some <b>Yahoo<\/b>! Homes information is provided by our trusted partners. However, <b>Yahoo<\/b>! does not guarantee the accuracy or completeness of any third party content."
        },
        {
          "date":"",
          "clickurl":"http:\/\/en.wikipedia.org\/wiki\/Yahoo",
          "url":"http:\/\/en.wikipedia.org\/wiki\/Yahoo",
          "dispurl":"en.wikipedia.org\/wiki\/<b>Yahoo<\/b>",
          "title":"<b>Yahoo<\/b>! - Wikipedia, the free encyclopedia",
          "abstract":"<b>Yahoo<\/b>! Inc. (NASDAQ: YHOO) is an American multinational internet corporation headquartered in Sunnyvale, California, United States. The company is best known for its ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/taxes.yahoo.com\/",
          "url":"http:\/\/taxes.yahoo.com\/",
          "dispurl":"taxes.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Finance - Personal Finance | Taxes",
          "abstract":"Taxes - Read latest articles and guides, try our comprehensive calculators, tools, and get advice at <b>Yahoo<\/b>! Finance"
        },
        {
          "date":"",
          "clickurl":"http:\/\/omg.yahoo.com\/",
          "url":"http:\/\/omg.yahoo.com\/",
          "dispurl":"omg.<b>yahoo<\/b>.com",
          "title":"omg! Celebrity gossip, news photos, babies, couples, hotties ...",
          "abstract":"The latest celebrity gossip from <b>Yahoo<\/b>! omg! Get the latest news and gossip on the Hollywood celebrities with videos and photos."
        },
        {
          "date":"",
          "clickurl":"http:\/\/uk.yahoo.com\/",
          "url":"http:\/\/uk.yahoo.com\/",
          "dispurl":"uk.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! UK",
          "abstract":"Welcome to <b>Yahoo<\/b>!, the world's most visited home page. Quickly find what you're searching for, get in touch with friends and stay in-the-know with the latest news and ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/smallbusiness.yahoo.com\/?s_fptrough=ysb_acq_smallbiz_20081001",
          "url":"http:\/\/smallbusiness.yahoo.com\/?s_fptrough=ysb_acq_smallbiz_20081001",
          "dispurl":"smallbusiness.<b>yahoo<\/b>.com\/?s_fptrough=ysb_acq_smallbiz...",
          "title":"<b>Yahoo<\/b>! Small Business: Web Hosting, Domain Registration, E ...",
          "abstract":"<b>Yahoo<\/b>! Small Business provides reliable web hosting for your website, domain name registration, web site design templates, e-commerce solutions for your ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/cricket.yahoo.com\/",
          "url":"http:\/\/cricket.yahoo.com\/",
          "dispurl":"cricket.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Cricket - Live Cricket Score | Cricket News | Cricket ...",
          "abstract":"Check out live cricket scores, cricket news headlines, cricket schedules & results and more from <b>Yahoo<\/b>! Cricket Includes ICC World Cricket League Championship 2012 ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/messenger.yahoo.com\/?i=1",
          "url":"http:\/\/messenger.yahoo.com\/?i=1",
          "dispurl":"messenger.<b>yahoo<\/b>.com\/?i=1",
          "title":"<b>Yahoo<\/b>! Messenger - Chat, Instant message, SMS, Video Call, PC ...",
          "abstract":"<b>Yahoo<\/b>! Messenger - Chat with friends for free and enjoy stealth settings, video calls, PC calls, file sharing, photo sharing, SMS, emoticons, & more."
        },
        {
          "date":"",
          "clickurl":"http:\/\/uk.my.yahoo.com\/",
          "url":"http:\/\/uk.my.yahoo.com\/",
          "dispurl":"uk.my.<b>yahoo<\/b>.com",
          "title":"My <b>Yahoo<\/b>! - <b>Yahoo<\/b>! UK",
          "abstract":"My <b>Yahoo<\/b>! is a customisable web page from <b>Yahoo<\/b>! UK. Personalise your page by adding news, stock quotes, weather, email, social updates and much more."
        },
        {
          "date":"",
          "clickurl":"http:\/\/search.yahoo.com\/",
          "url":"http:\/\/search.yahoo.com\/",
          "dispurl":"search.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Search - Web Search",
          "abstract":"Learn about the new <b>Yahoo<\/b>! Axis. A better way to search. Way better. Get it Now! >>"
        },
        {
          "date":"",
          "clickurl":"http:\/\/news.yahoo.com\/",
          "url":"http:\/\/news.yahoo.com\/",
          "dispurl":"news.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! News - Latest News & Headlines",
          "abstract":"The latest news and headlines from <b>Yahoo<\/b>! News. Get breaking news stories and in-depth coverage with videos and photos."
        },
        {
          "date":"",
          "clickurl":"http:\/\/au.yahoo.com\/",
          "url":"http:\/\/au.yahoo.com\/",
          "dispurl":"au.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>!7",
          "abstract":"The <b>Yahoo<\/b>! for Australia offering local & global search, free email, instant messaging, news, sport, travel, shopping, movies & music."
        },
        {
          "date":"",
          "clickurl":"http:\/\/ca.yahoo.com\/",
          "url":"http:\/\/ca.yahoo.com\/",
          "dispurl":"ca.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Canada",
          "abstract":"Welcome to <b>Yahoo<\/b>! Canada, the world's most visited home page. Quickly find what you're searching for, get in touch with friends and stay in-the-know with the latest ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/everything.yahoo.com\/",
          "url":"http:\/\/everything.yahoo.com\/",
          "dispurl":"everything.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>!",
          "abstract":"<b>Yahoo<\/b>! International ... © 2012 <b>Yahoo<\/b>! Inc. All rights reserved"
        },
        {
          "date":"",
          "clickurl":"http:\/\/football.fantasysports.yahoo.com\/?ovchn=YAH&ovcpn=Front+Page&ovcrn=Front+page+P+Link+Nav+button&ovrfd=YAH&ovtac=AD",
          "url":"http:\/\/football.fantasysports.yahoo.com\/?ovchn=YAH&ovcpn=Front+Page&ovcrn=Front+page+P+Link+Nav+button&ovrfd=YAH&ovtac=AD",
          "dispurl":"football.fantasysports.<b>yahoo<\/b>.com\/?ovchn=YAH&ovcpn=Front...",
          "title":"It's Game Time! - <b>Yahoo<\/b>! Sports Fantasy Football",
          "abstract":"<b>Yahoo<\/b>! Fantasy Football. Create or join a NFL league and manage your team with FREE live scoring, stats, scouting reports, news, and expert advice."
        },
        {
          "date":"",
          "clickurl":"http:\/\/music.yahoo.com\/",
          "url":"http:\/\/music.yahoo.com\/",
          "dispurl":"music.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Music - Exclusive New Music and Music Videos",
          "abstract":"Find all the new music and exclusive video performances on <b>Yahoo<\/b>! Music. Get the latest news in our exclusive music blogs, listen to our online music radio and catch ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/uk.messenger.yahoo.com\/",
          "url":"http:\/\/uk.messenger.yahoo.com\/",
          "dispurl":"uk.messenger.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Messenger - Chat, Instant message, Video Call, PC Calls",
          "abstract":"<b>Yahoo<\/b>! Messenger - Chat with friends for free and enjoy stealth settings, video calls, PC calls, file sharing, photo sharing, emoticons, & more."
        },
        {
          "date":"",
          "clickurl":"http:\/\/in.yahoo.com\/",
          "url":"http:\/\/in.yahoo.com\/",
          "dispurl":"in.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! India",
          "abstract":"Welcome to <b>Yahoo<\/b>!, the world's most visited home page. Quickly find what you're searching for, get in touch with friends and stay in-the-know with the latest news and ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/companion.yahoo.com\/",
          "url":"http:\/\/companion.yahoo.com\/",
          "dispurl":"companion.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Toolbar - Stay in touch with your world.",
          "abstract":"Toolbar for <b>Yahoo<\/b>! search, alerts for <b>Yahoo<\/b>! Mail and an option to save bookmarks online."
        },
        {
          "date":"",
          "clickurl":"http:\/\/movies.yahoo.com\/photos\/",
          "url":"http:\/\/movies.yahoo.com\/photos\/",
          "dispurl":"movies.<b>yahoo<\/b>.com\/photos",
          "title":"Movie Pictures | Movie Posters - <b>Yahoo<\/b>! Movies",
          "abstract":"View movie pictures and stills from the latest releases on <b>Yahoo<\/b>! Movies. Find movie posters, red carpet photos and pictures from upcoming movies."
        },
        {
          "date":"",
          "clickurl":"http:\/\/local.yahoo.com\/",
          "url":"http:\/\/local.yahoo.com\/",
          "dispurl":"local.<b>yahoo<\/b>.com",
          "title":"Redmond City Pages on <b>Yahoo<\/b>! Local. Find Businesses, Services ...",
          "abstract":"<b>Yahoo<\/b>! Local has Redmond business reviews, top rated services, and events near Redmond, WA. Use interactive maps, driving directions reviews and ratings to find the ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/yahooligans.yahoo.com\/",
          "url":"http:\/\/yahooligans.yahoo.com\/",
          "dispurl":"<b>yahoo<\/b>ligans.<b>yahoo<\/b>.com",
          "title":"Kids Games, Kids Movies, Kids Music, and More - <b>Yahoo<\/b>! Kids",
          "abstract":"<b>Yahoo<\/b> Kids! is the ultimate web guide for kids! Features fun and educational resources for kids with games, animals, music, jokes, movies, news, astrology, TV ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/m.yahoo.com\/",
          "url":"http:\/\/m.yahoo.com\/",
          "dispurl":"m.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Mobile",
          "abstract":"Welcome to <b>Yahoo<\/b>! Mobile. Stay up to date on the go with business, sports, and entertainment news."
        },
        {
          "date":"",
          "clickurl":"http:\/\/tv.yahoo.com\/",
          "url":"http:\/\/tv.yahoo.com\/",
          "dispurl":"tv.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! TV",
          "abstract":"<b>Yahoo<\/b>! TV is your guide to everything about TV online, from TV show listings and episode guides, to the latest TV show photos, clips, news, recaps, cast & credits ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/shopping.yahoo.com\/",
          "url":"http:\/\/shopping.yahoo.com\/",
          "dispurl":"shopping.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Shopping - Online Shopping with great products, prices ...",
          "abstract":"<b>Yahoo<\/b>! Shopping is the best place to read user reviews, explore great products and buy online."
        },
        {
          "date":"",
          "clickurl":"http:\/\/dir.yahoo.com\/",
          "url":"http:\/\/dir.yahoo.com\/",
          "dispurl":"dir.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Directory",
          "abstract":"Help us improve the <b>Yahoo<\/b>! Directory - Share your ideas"
        },
        {
          "date":"",
          "clickurl":"http:\/\/overview.mail.yahoo.com\/",
          "url":"http:\/\/overview.mail.yahoo.com\/",
          "dispurl":"overview.mail.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Mail",
          "abstract":"Your favorite email is now: FASTER: 2x faster. How great is that? So great. SAFER: Even better spam protection. Yes! EASIER: Clean, simple design that makes email a ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/travel.yahoo.com\/",
          "url":"http:\/\/travel.yahoo.com\/",
          "dispurl":"travel.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Travel - Cheap flights, hotels, travel guides & car rental",
          "abstract":"Find cheap flights, hotels and car rentals with <b>Yahoo<\/b>! Travel. Plan your trip with travel guides, personalized recommendations, articles, deals and more."
        },
        {
          "date":"",
          "clickurl":"http:\/\/omg.yahoo.com\/news\/",
          "url":"http:\/\/omg.yahoo.com\/news\/",
          "dispurl":"omg.<b>yahoo<\/b>.com\/news",
          "title":"Celebrity News | Celebrity Gossip - <b>Yahoo<\/b>! omg!",
          "abstract":"Get the latest celebrity news from <b>Yahoo<\/b>! omg! Find the latest news about the Hollywood celebrities with videos and photos"
        },
        {
          "date":"",
          "clickurl":"http:\/\/games.yahoo.com\/",
          "url":"http:\/\/games.yahoo.com\/",
          "dispurl":"games.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Games - Play Free Online Games | Download Games",
          "abstract":"Play the latest online games on <b>Yahoo<\/b>! Games. Play and download single and multiplayer games from a wide selection of arcade, board and puzzle games."
        },
        {
          "date":"",
          "clickurl":"http:\/\/omg.yahoo.com\/photos\/",
          "url":"http:\/\/omg.yahoo.com\/photos\/",
          "dispurl":"omg.<b>yahoo<\/b>.com\/photos",
          "title":"Celebrity Photos | Pictures of Celebrities - <b>Yahoo<\/b>! omg!",
          "abstract":"View the latest celebrity photos on <b>Yahoo<\/b>! omg! Get the latest red carpet pictures and photos from Hollywood."
        },
        {
          "date":"",
          "clickurl":"http:\/\/finance.yahoo.com\/q?s=",
          "url":"http:\/\/finance.yahoo.com\/q?s=",
          "dispurl":"finance.<b>yahoo<\/b>.com\/q?s=",
          "title":"Quotes &amp; Info- <b>Yahoo<\/b>! Finance",
          "abstract":"View the basic stock chart on <b>Yahoo<\/b>! Finance. Change the date range, chart type and compare against other companies."
        },
        {
          "date":"",
          "clickurl":"http:\/\/movies.yahoo.com\/",
          "url":"http:\/\/movies.yahoo.com\/",
          "dispurl":"movies.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Movies - Upcoming Movies, Trailers and Showtimes",
          "abstract":"View the latest trailers and movie reviews on <b>Yahoo<\/b>! Movies. Find everything about movies online, from upcoming releases, movie ratings, trailers and movie news"
        },
        {
          "date":"",
          "clickurl":"http:\/\/screen.yahoo.com\/",
          "url":"http:\/\/screen.yahoo.com\/",
          "dispurl":"screen.<b>yahoo<\/b>.com",
          "title":"Watch videos online - <b>Yahoo<\/b>! Screen",
          "abstract":"Watch videos online for free on <b>Yahoo<\/b>! Screen. Find sports, kids and funny videos including the latest news video clips."
        },
        {
          "date":"",
          "clickurl":"http:\/\/privacy.yahoo.com\/",
          "url":"http:\/\/privacy.yahoo.com\/",
          "dispurl":"privacy.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Privacy Policy",
          "abstract":"WHAT THIS PRIVACY POLICY COVERS <b>Yahoo<\/b>! takes your privacy seriously. Please read the following to learn more about our privacy policy. The federal ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/news.yahoo.com\/us\/",
          "url":"http:\/\/news.yahoo.com\/us\/",
          "dispurl":"news.<b>yahoo<\/b>.com\/us",
          "title":"U.S. News Headlines - <b>Yahoo<\/b>! News",
          "abstract":"Get the latest U.S. news headlines from <b>Yahoo<\/b>! News. Find breaking U.S. news, including analysis and opinion on top U.S. stories."
        },
        {
          "date":"",
          "clickurl":"http:\/\/fantasysports.yahoo.com\/",
          "url":"http:\/\/fantasysports.yahoo.com\/",
          "dispurl":"fantasysports.<b>yahoo<\/b>.com",
          "title":"Fantasy on <b>Yahoo<\/b>! Sports - News, Scores, Standings, Rumors ...",
          "abstract":"Comprehensive Fantasy news, scores, standings, fantasy games, rumors, and more"
        },
        {
          "date":"",
          "clickurl":"http:\/\/finance.yahoo.com\/",
          "url":"http:\/\/finance.yahoo.com\/",
          "dispurl":"finance.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>! Finance - Business Finance, Stock Market, Quotes, News",
          "abstract":"At <b>Yahoo<\/b>! Finance, you get free stock quotes, up to date news, portfolio management resources, international market data, message boards, and mortgage ..."
        },
        {
          "date":"",
          "clickurl":"http:\/\/world.yahoo.com\/",
          "url":"http:\/\/world.yahoo.com\/",
          "dispurl":"world.<b>yahoo<\/b>.com",
          "title":"<b>Yahoo<\/b>!: <b>Yahoo<\/b>! Everywhere",
          "abstract":"<b>Yahoo<\/b>! USA (en Español) ... © 2012 <b>Yahoo<\/b>! Inc. All rights reserved"
        }
      ]
    }
  }
} 
```

我使用了以下几行：

```
 JsonParser jsonParser = new JsonParser();
  JsonObject linksObj =  jsonParser.parse(jsonReader).getAsJsonObject();
  JsonArray linksArray = jsonParser.parse(linksObj.get("results").toString()).getAsJsonArray(); 
```

但我收到一个错误：

```
Exception in thread "main" java.lang.NullPointerException
    at parseResponse.main(parseResponse.java:35) 
```

当我尝试删除之前的文本时`"results"`，我的代码可以成功解析 JSON 响应。任何机构都可以解释我该如何处理这个问题。该程序应该能够提取数组元素，而无需像调试时那样手动删除行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:26:25.453

试试这个代码来解析你的 JSON 响应。您可以在 resultArray 中获取数组，

```
try{
JSONObject obj = new JSONObject(JSONresponse);
JSONObject bossObj = obj.getJSONObject("bossresponse");
JSONObject webObj = obj.getJSONObject("web");
JSONArray resultArray obj = obj.getJSONArray("results");
for(i=0;i<=resultArray.length();i++){
JSONObject resultObject = resultArray.getJSONObject(i);
String date = resultObject.getString("date");
String clickurl = resultObject.getString("clickurl");
String url = resultObject.getString("url");
String dispurl= resultObject.getString("dispurl");
String title = resultObject.getString("title");
String abstract = resultObject.getString("abstract");
}
} catch (Exception ex) {
ex.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:59:16.990

看来您需要从 web 属性中读取结果，而不仅仅是包装器顶部对象，所以：这是您的`linksObject`：

```
JsonObject linksObj =  jsonParser.parse(jsonReader).getAsJsonObject(); 
```

它应该有`bossresponse`属性，它是另一个对象。从`bossresponse`对象你将有`web`对象从`web`你将有`results`对象

`bossresponse->web->results`

现在你是`results`第一级的阅读者。我想如果 json 是

```
{
results:[
   {
     //here attrs
   }
 ]
} 
```

# git - 如何在命令行获取 github“短”用户名？

> ID：12700483
> 
> 赞同：2
> 
> 时间：2012-10-03T00:46:23.107
> 
> 标签：git, bash, github, terminal, environment-variables

因此，如果..

```
$ git config user.name
↳ Alex Gray              # OK (my name)
$ git config user.email
↳ alex@mrgray.com        # OK (my email). 
```

和..

```
GithubUserForProject() {  # in pwd
    ORIGIN=$(git config --get remote.origin.url) && echo $ORIGIN
    OWNER=${ORIGIN%/*}     && echo $OWNER  # trim URL tail
    OWNER=${OWNER#*.com/}  && echo $OWNER  # trim URL head
    OWNER=${OWNER#*:}      && echo $OWNER  # trim ssh URL head
}

$ cd /local/git/MyGitHubRepo && GithubUserForProject
↓ git@github.com:mralexgray/MyGitHubRepo.git
↓ git@github.com:mralexgray
↳ mralexgray            # OK (my username, but skanky way of finding it) 
```

但...

```
$ cd /local/git/SomeGuysProject && GithubUserForProject
↓ git://github.com/someguy/SomeGuysProject.git
↓ git://github.com/someguy
↳ someguy              # WRONG! (cloned repo's user!) 
```

那么，我如何**以**编程方式确定我的 github“短用户名”，无论是从`env`Ironment、github API 请求等*还是以其他方式*（通过脚本或终端会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:04:38.570

我认为*这样一个愚蠢的问题*如此明显地没有解决是很愚蠢的......所以因为不知道如何巧妙地解析 bash 中的字符串而不诉诸`SED`我心中知道的一个组合，并且......

`security find-internet-password -s github.com | grep acct | sed 's/"acct"<blob>="//g' | sed 's/"//g'`

*瞧瞧....*

`mralexgray`

这可能取决于是否安装了 Github mac 客户端......再一次......*它可能不会*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:22:00.110

我同意评论者的观点：Bash 怎么知道你的用户名，除非你告诉它？

您可以测试`git push`它是否是“您的”存储库，但如果您的 SSH 密钥设置不正确，即使这样也会失败。简而言之，你应该把它放进去`~/.bash_profile`或其他东西，然后用它完成。

# c# - 实体框架代码优先 - 多对多没有集合

> ID：12700485
> 
> 赞同：3
> 
> 时间：2012-10-03T00:46:28.777
> 
> 标签：c#, entity-framework, collections, many-to-many

我首先开始处理 EF 代码中的多对多关系，发现我不喜欢在我的实体上拥有集合。我更希望在我的存储库中处理多对多关系，这样我就可以执行类似`repository.GetUsersForOrganization(organization)`. 我主要关心的不是在我的实体上公开一个集合，而是在我的存储库中使用一些方法来处理与多对多关系有关的所有事情，包括获取、添加和删除关系。对于删除集合并用基于存储库的方法替换它的最佳方法，我几乎不知所措。其他人是如何做到这一点的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:48:32.680

如果您不想在实体上具有多对多关系的导航属性，则根本不会映射那些多对多关系，而是将多对多关系的联结表映射为单独的实体和直接在存储库中的专用方法中访问它们。

# .htaccess - 无法在 android / blackberry 等移动设备上从 .htaccess 后面播放/下载 MP4 文件

> ID：12700486
> 
> 赞同：2
> 
> 时间：2012-10-03T00:46:44.197
> 
> 标签：.htaccess, video, mobile, mp4

我创建了一个带有密码保护目录的站点，里面是简单的 html 页面，其中包含指向位于目录内的 mp4 视频文件的链接。

当登录到三星 Galaxy S2 或黑莓 Playbook 等 Android 设备目录时，无法打开此视频文件。在桌面上，IE 和 FF 工作正常。

这是来自主机的回应：

> “这似乎是移动设备中的浏览器无法使用已完成的身份验证来使用嵌入式播放器获取视频文件的限制。经过深入调查后，我无法让任何其他播放器播放视频我的移动设备是否受到 .htaccess 密码保护，因为对实际视频文件的请求被 403 拒绝。”

那么在移动设备上在 htaccess 后面播放 Mp4 的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:54:48.877

我猜一种方法是链接不应该直接指向文件，而是应该触发一个小模块，该模块将为刚刚连接的客户端 ip 授予文件权限，然后重定向到文件。权限可以稍后收回。但这感觉很混乱，并且不确定这是否可以在巨大的流量水平上进行扩展。

# objective-c - 使用 Growl 注册我的应用程序时，如何定义在 .growlRegDict 文件中使用的通知样式？

> ID：12700489
> 
> 赞同：0
> 
> 时间：2012-10-03T00:46:56.480
> 
> 标签：objective-c, cocoa, growl

我想强制咆哮对我的应用程序中的所有通知使用 Bezel 样式通知。

考虑到典型的 .growlRegDict 看起来类似于下面的示例，是否可以在我的应用程序的 .growlRegDict 文件中定义一个键/值，它将我的应用程序的默认样式设置为 Bezel 样式。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-    1.0.dtd">
<plist version="1.0">
<dict>
    <key>TicketVersion</key>
    <integer>1</integer>
    <key>AllNotifications</key>
    <array>
        <string>MyNotification</string>
    </array>
    <key>DefaultNotifications</key>
    <array>
        <string>MyNotification</string>
    </array>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:07:06.983

在发布到 Growl Google 组后，我发现为您自己的应用程序定义警报样式是不可能的。无论最终用户将其整体配置为首选警报样式还是针对每个特定应用程序，都是将使用的样式。

# android - 绑定到远程服务时的 Android 应用程序生命周期

> ID：12700490
> 
> 赞同：1
> 
> 时间：2012-10-03T00:47:00.860
> 
> 标签：android, android-service, android-lifecycle

我有一个 android 应用程序，一旦应用程序启动，它就会将自己绑定到远程服务。远程服务为蓝牙摄像机提供了抽象，因此我们可以轻松地发送命令和接收事件。绑定发生在`Application`自身而不是`Activity`. 对我来说重要的是，只要相机与蓝牙的连接处于活动状态，我的应用程序就会保持运行，这样我就可以从远程服务接收事件。主要原因是我需要知道它是否正在录制，如果是，我需要定期发送 GPS 坐标。

如果我在自己的应用程序中使用服务来管理它，我的应用程序是否有更好的机会不被杀死？或者我的应用程序是否安全，因为它仍然绑定到远程服务？当然，我知道如果内存要求需要，android 系统会杀死我的应用程序，但它会仅仅因为它已经坐了一段时间没有做太多而杀死我的应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:40:33.323

仅当内存不足时才应删除应用程序的进程，但如果您使用服务而不是空进程或后台活动，则会提高进程的感知重要性。您还可以使用 startForeground() 来降低 Android 停止服务的可能性。

来自[http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle](http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle)：

## 流程生命周期

Android 系统尝试尽可能长时间地保留应用程序进程，但最终需要在内存不足时删除旧进程。如活动生命周期中所述，关于删除哪个进程的决定与用户与其交互的状态密切相关。通常，根据其中运行的活动，流程可以处于四种状态，此处按重要性顺序列出。系统会在杀死更重要的进程（第一个）之前杀死不太重要的进程（最后一个）。

1.  **前台**活动（用户当前正在与之交互的屏幕顶部的活动）被认为是最重要的。如果它使用的内存比设备上的可用内存多，它的进程只会作为最后的手段被杀死。通常此时设备已达到内存分页状态，因此需要这样做以保持用户界面响应。
2.  **可见**活动（对用户可见但不在前台的活动，例如坐在前台对话框后面的活动）被认为非常重要，除非需要保持前台活动运行，否则不会被杀死。
3.  **后台**活动（对用户不可见且已暂停的活动）不再至关重要，因此系统可以安全地终止其进程以回收其他前台或可见进程的内存。如果它的进程需要被杀死，当用户导航回活动（使其再次在屏幕上可见）时，将使用它之前在 onSaveInstanceState(Bundle) 中提供的 savedInstanceState 调用它的 onCreate(Bundle) 方法，以便它可以在与用户上次离开时​​相同的状态下重新启动。
4.  一个**空进程**是一个不承载任何活动或其他应用程序组件（例如服务或广播接收器类）的进程。当内存变低时，它们会很快被系统杀死。因此，您在活动之外执行的任何后台操作都必须在活动广播接收器或服务的上下文中执行，以确保系统知道它需要保留您的进程。

有时 Activity 可能需要执行独立于 Activity 生命周期本身而存在的长时间运行的操作。一个示例可能是允许您将图片上传到网站的相机应用程序。上传可能需要很长时间，并且应用程序应该允许用户离开正在执行的应用程序。为此，您的 Activity 应该启动一个进行上传的服务。这允许系统在上传期间正确地优先处理您的进程（认为它比其他不可见的应用程序更重要），而与原始活动是暂停、停止还是完成无关。

# facebook - Facebook API 不返回页面上的所有照片

> ID：12700493
> 
> 赞同：0
> 
> 时间：2012-10-03T00:47:25.873
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我试图抓取其他用户在页面上发布的所有照片，但由于某种原因，facebook 似乎跳过了看似随机的照片。我不确定它是否发生在几天前，但如果是我没有注意到它。这是我正在使用的 FQL 查询：

```
SELECT post_id, actor_id, created_time, permalink,
   message, attachment,
   comments.count
FROM stream
WHERE source_id=me()
AND filter_key='others'
AND attachment.fb_object_type='photo'
AND created_time > #{Time.now.to_i - 60*60*24*5}
ORDER BY updated_time DESC
LIMIT 0, 500 
```

请原谅其中的 ruby​​ time 方法 - 即使在 api explorer 中，它也可以在没有该行的情况下工作。此外，API 令牌用于页面，因此该`me()`方法可以正常工作。它似乎跳过了随机照片，即使它们都是公开的并且应该返回。这是一个错误还是查询有问题？如果我可以在图形 API 中执行此操作，我很想知道如何。

# javascript - 滞后于同时出现的 jQuery UI 效果

> ID：12700496
> 
> 赞同：0
> 
> 时间：2012-10-03T00:47:39.863
> 
> 标签：javascript, jquery, jquery-ui, lag

在我的页面上，我在不同的 div 上同时运行带有幻灯片的显示和隐藏效果，但动画有点滞后。如果我在隐藏完成后运行显示效果，它根本不会滞后，所以我想知道是否有任何方法可以消除这种滞后。

没有延迟的代码：

```
$(currentPageID).stop().hide("slide", {"direction": "left"}, 1000, function(){
    $(pageID).show("slide", {"direction": "right"}, 1000);
}); 
```

有滞后的代码：

```
$(currentPageID).hide("slide", {"direction": "left"}, 1000);
$(pageID).show("slide", {"direction": "right"}, 1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:16:22.217

这可能不会滞后太多，因为它只是基于您的屏幕分辨率的视错觉，与动画的持续时间以及在该持续时间的过程中动画的距离。这也部分归因于如何将持续时间分解为实际距离的计算。如果您在一秒钟内制作跨越 1000 像素的动画，并在一秒钟内使用相同的代码制作跨越 100 像素的动画，您会注意到一个比另一个更不稳定，因为距离与持续时间的块不同。

同样，分辨率、刷新率和所有其他因素也会发挥作用。就像您当时可能正在进行的其他任何事情一样

您提供的两个代码示例之间的区别在于，一个在完成向左等待轮到它时向右运行方向。代码读取的另一种方式是一个到另一个，除了处理它之外几乎没有暂停。

# c - 如何在C中连接两个整数

> ID：12700497
> 
> 赞同：19
> 
> 时间：2012-10-03T00:47:46.587
> 
> 标签：c, math, optimization, mathematical-optimization

Stack Overflow 用许多其他语言回答了这个问题，但不是 C。所以我想我会问，因为我有同样的问题。

**如何在 C 中连接两个整数？**

例子：

```
x = 11;
y = 11; 
```

我希望 z 如下：

```
z = 1111; 
```

其他示例尝试使用字符串执行此操作。什么是没有字符串的方法？

我正在寻找一种在 C 中执行此操作的有效方法，因为在我的特定用法中，这将进入代码的时间关键部分。

提前致谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-03T00:52:46.257

```
unsigned concatenate(unsigned x, unsigned y) {
    unsigned pow = 10;
    while(y >= pow)
        pow *= 10;
    return x * pow + y;        
} 
```

[编译/正确性/速度](http://ideone.com/hbWgE)证明

我避免使用`log10`and`pow`函数，因为我很确定它们使用浮点并且速度很慢，所以这在您的机器上*可能*会更快。也许。轮廓。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-03T00:58:03.800

```
z = x * pow(10, log10(y)+1) + y; 
```

**解释：**

首先你得到应该排在第二位的变量的位数：

```
int digits = log10(y)+1;  // will be 2 in your example 
```

然后你通过将另一个变量乘以 10^digits 来“移动”另一个变量。

```
int shifted = x * pow(10, digits);   // will be 1100 in your example 
```

最后添加第二个变量：

```
z = shifted + y;   // 1111 
```

或者在一行中：

```
z = x * pow(10, (int)log10(y)+1) + y; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-02T08:05:10.460

这可能不是一个最佳或快速的解决方案，但没有人提到它，它是一个简单的解决方案并且可能很有用。

你可以使用`sprintf()`和一个`strtol()`.

```
char str[100];
int i=32, j=45;
sprintf(str, "%d%d", i, j);
int result=strtol(str, NULL, 10); 
```

您首先将数字写入一个字符串，然后是另一个数字`sprintf()`（就像您将打印到标准输出一样`printf()`），然后将结果字符串转换为数字`strtol()`。

`strtol()`返回的 a`long`可能是一个大于可存储在 a 中的值`int`，因此您可能需要先检查结果值。

```
int result;
long rv=strtol(str, NULL, 10);
if(rv>INT_MAX || rv<INT_MIN || errno==ERANGE)
{
    perror("Something went wrong.");
}
else
{
    result=rv;
} 
```

如果返回的值`strtol()`不在an的范围内`int`（即不在（包括）`INT_MIN`和之间`INT_MAX`），则发生错误。`INT_MIN`并且`INT_MAX`来自`limits.h`。

如果字符串中的值太大而无法在 a 中表示`long`，`errno`则会因为溢出而被设置为`ERANGE`(from )。`errno.h`

`strtol()` [在这里](http://en.cppreference.com/w/c/string/byte/strtol)阅读。

编辑：

正如[chqrlie](https://stackoverflow.com/users/4593267/chqrlie)的启发性评论所指出的那样，负数会给这种方法带来麻烦。

你可以使用这个或修改这个来解决这个问题

```
char str[100], temp[50];
int i=-32, j=45, result;
sprintf(temp, "%+d", j);
sprintf(str, "%d%s", i, temp+1);
long rv=strtol(str, NULL, 10); 
```

`temp`首先将第二个数字及其符号打印到字符数组中。

`+`in将`%+d`导致打印数字的符号。

现在打印第一个数字和第二个数字，`str`但没有第二个数字的符号部分。我们通过忽略 中的第一个字符来跳过第二个数字的符号部分`temp`。

终于`strtol()`完成了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T00:51:39.473

```
int myPow(int x, int p)
{
     if (p == 0) return 1;
     if (p == 1) return x;

     int tmp = myPow(x, p/2);
     if (p%2 == 0) return tmp * tmp;
     else return x * tmp * tmp;
}
int power = log10(y);
z = x*myPow(10,power+1)+y; 
```

[在这里，我无耻地从https://stackoverflow.com/a/1505791/1194873](https://stackoverflow.com/a/1505791/1194873)复制了 myPow

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-05T00:34:22.530

这是@Mooing Duck 答案的变体，它使用查找表来查找 10 的倍数（对于具有慢整数乘法的平台）它还返回 unsigned long long 以允许更大的值，并在查找表中使用 unsigned long long 来解释 @ chqrlie 关于无限循环的评论。如果可以保证组合输入不超过无符号，则可以更改这些输入。

```
static const unsigned long long pow10s[] = {
   10,100,1000,10000,100000,1000000,10000000,100000000,1000000000,10000000000
};
unsigned long long concat(unsigned x, unsigned y) {
    const unsigned long long *p = pow10s;
    while (y >= *p) ++p;
    return *p * x +y;        
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-28T06:17:37.243

您还可以使用宏来连接字符串（简单的方法）

```
#include<stdio.h>
#define change(a,b) a##b
int main()
 {
    int y;
    y=change(12,34);
    printf("%d",y);
    return 0;
 } 
```

它有一个缺点。我们不能在这个方法中传递参数

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-03T11:44:34.180

这是另一种方法：

```
int concat(int x, int y) {
    int temp = y;
    while (y != 0) {
        x *= 10;
        y /= 10;
    }
    return x + temp;
} 
```

谁知道你会得到什么样的表现。只是试试看..

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-03T03:49:07.247

也许这会起作用：

```
int x=11,y=11,temp=0;
int z=x;
while(y>0)
{
    // take reciprocal of y into temp
    temp=(temp*10)+(y%10);       
    y=y/10;
}
while(temp>0)
{
    // take each number from last of temp and add to last of z
    z=(z*10)+(temp%10);      
    temp=temp/10;
} 
```

代码很长，但很简单。如果有任何错误，请纠正我。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-27T14:39:37.360

改进了[@Mooing Duck](https://stackoverflow.com/a/12700533/2410359)和[@none](https://stackoverflow.com/a/12707803/2410359)答案的变化。

只需根据需要进行十进制移位`x`。

```
unsigned concatenate2(unsigned x, unsigned y) {
  unsigned y_temp = y;
  do {  // do loop to insure at least one shift
    x *= 10;
    y_temp /= 10;
  } while (y_temp > 0);
  return x + y;  
} 
```

可以使用更广泛的数学来减少溢出可能性。[@technosaurus](https://stackoverflow.com/a/46576166/2410359)

```
#include <inttypes.h>

uintmax_t concatenate2(unsigned x, unsigned y) {
  uintmax_t x_temp = x;
  unsigned y_temp = y;
  do {  // do loop to insure at least one shift
    x_temp *= 10;
    y_temp /= 10;
  } while (y_temp > 0);
  return x_temp + y;  
} 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2014-09-21T13:42:35.347

```
#include<iostream>
using namespace std;

int main()
{
    int a=0,b=0,count=0,c=0,t=0;
    cout<<"enter 2 no"<<endl;
    cin>>a>>b;
    t=b;

    while(b!=0)
    {
        b=b/10;
        count++;
    }

    while(count!=0)
    {
        a=a*10;
        count--;
        c=a+t;
    }

    cout<<"concate no is:"<<c;
} 
```

# objective-c - 在不同的 ViewController 上分配 UISplitViewController 的委托

> ID：12700498
> 
> 赞同：1
> 
> 时间：2012-10-03T00:48:04.713
> 
> 标签：objective-c, ios, uisplitviewcontroller

我是 IOS 开发的新手，遇到了一个我无法找到答案的问题。

我正在使用带有两个独立导航控制器的 UISplitViewController。一个用于弹出框，一个用于细节。基本上，我需要能够将各种详细视图分配为导航控制器的委托，因为有些可能会显示弹出框而有些可能不会。

我在 viewDidLoad 上使用的当前代码是：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
UISplitViewController *splitViewController = (UISplitViewController *)appDelegate.window.rootViewController;
splitViewController.delegate = self; 
```

问题是委托只被分配给使用它的***第一个***视图。在其他视图中使用它时，仍会调用前一个视图的委托。

有人知道我可能做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:50:21.447

我想到了。

UISplitViewController 文档说

> 在复杂的配置中，您需要一个单独的自定义控制器对象来管理主视图控制器和详细视图控制器并在它们之间进行调解。自定义控制器是拆分视图>控制器的代理，负责与当前细节视图>控制器通信，以显示和隐藏弹出栏按钮项。

所以我做的事情从一开始就是错的。我通过将所有 SplitView 逻辑放入一个视图控制器来修复它，如下所示：

```
- (BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:        (UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation
{
  BOOL hide = YES;

  // Get current view from navigation controller
  UINavigationController *detailNavigationController = [svc.viewControllers objectAtIndex:1];
  NSInteger topIndex = detailNavigationController.viewControllers.count - 1;
  UIViewController *detailviewController = [detailNavigationController.viewControllers   objectAtIndex:topIndex];

  // Perform different actions based on visible view
  NSString *detailTitle = detailviewController.title;
  if([detailTitle isEqualToString:@"Controller_Name"]) { 
      hide = NO;
  }
  return hide;
} 
```

# python - 从html表单获取整数

> ID：12700499
> 
> 赞同：2
> 
> 时间：2012-10-03T00:48:08.100
> 
> 标签：python, html

我想从 HTML 表单中获取整数值，我使用了以下 python 代码：

```
 form = cgi.FieldStorage()
    if not form.has_key("id"):
        error_pop("There is no id in this form","The format of the request is not correct")
    id = form["id"].value    (*) 
```

在 HTML 文件中，我将输入类型设为`number`：

```
id: <input type="number" name="id" /><br /> 
```

但是，我从 ( ) 行得到的 id 似乎`*`仍然是一个字符串。

如何将其转换为整数？

我试过 use `int(form["id"].value)`，但python给了我以下错误：

> `<type 'exceptions.TypeError'>`: %d 格式：需要一个数字，不是 str args = ('%d 格式：需要一个数字，不是 str',) message = '%d 格式：需要一个数字，不是 str'

所以，我放弃了使用`int()`.

如果我在将其解析为 之前尝试打印该值`int()`，那么我将从浏览器收到内部服务器错误。实际上，如果我更改 python 文件中的某些内容，我总是会收到此错误。我可以从 error_log.log 中看到错误：

```
/usr/lib/python2.6/cgitb.py:173: DeprecationWarning: BaseException.message has been deprecated as of Python 2.6
value = pydoc.html.repr(getattr(evalue, name)) 
```

实际上，如果我从error.log grep 今天的时间，那么它就无法显示当前的错误......尽管它确实退出了几个小时前发生的一些错误......

我发现了一些新的东西：只有当事情涉及到“id”这个东西时，才会出现内部服务器错误。如果我做类似的事情`id = form["idid"].value`，那么它会给出错误：

```
<type 'exceptions.TypeError'>: int() argument must be a string or a number, not 'NoneType' 
      args = ("int() argument must be a string or a number, not 'NoneType'",) 
      message = "int() argument must be a string or a number, not 'NoneType'" 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-23T04:01:26.280

我遇到了同样的问题，无法将值从表单转换为数字。这是我改编自[这篇博文](http://www.pydanny.com/why-doesnt-python-have-switch-case.html)的另一个解决方案。我有一些从名为 q1、q2、q3 等的单选按钮集返回的值，并使用此字典对其进行转换。

```
 str2num = {"1":1, "2":2, "3":3, "4":4, "5":5, "6":6}

 val1 = str2num[ form.getvalue("q1") ]
 val2 = str2num[ form.getvalue("q2") ]
 val3 = str2num[ form.getvalue("q3") ] 
```

表单元素“q1”的值是数字的字符串形式，因此将其转换为数字形式。像你一样，`int( form.getvalue("q1") )`只是没有工作。我仍然不知道为什么会这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:06:52.327

似乎元素的值是`form`，您传递给`int`的是从 http 服务器返回的错误消息：
“%d 格式：需要一个数字，而不是 str”
为了论证，您可以在不限制的情况下尝试相同的事情吗**id**字段为 type="number"，但 type="text"。我的猜测是这将允许转换为整数。如果您需要强制结果为整数，请使用类似

```
while not id:
  try:
    id = int(form["id"].value)
  except TypeError:
    error_pop("id should be number") 
```

# c++ - 在另一个成员函数中使用 C++ 成员函数错误“未声明的标识符”

> ID：12700506
> 
> 赞同：0
> 
> 时间：2012-10-03T00:48:47.383
> 
> 标签：c++, function, undeclared-identifier

我认为这是在我的声明中，但我不确定。有一个类“Matrix”，它创建 int 类型的二维数组。该类有几个重载的运算符来对类对象执行算术等。

一项要求是检查矩阵是否具有相同的维度。维度存储为两个私有整数“dx”和“dy”。

因此，为了提高效率，我编写了一个 bool 类型的成员函数，如下所示；

`bool confirmArrays(const Matrix& matrix1, const Matrix& matrix2);`

是函数头，声明是；

```
bool Matrix::confirmArrays(const Matrix& matrix1, const Matrix& matrix2)
{
    if (matrix1.dx == matrix2.dx && matrix1.dy == matrix2.dy)
    {
        // continue with operation
        return true;

    } else {

        // hault operation, alert user
        cout << "these matrices are of different dimensions!" << endl;
        return false;
    }
} 
```

但是当我`confirmArrays`从另一个成员函数中调用时，我得到了这个错误；

**使用未声明的标识符** `confirmArrays`

像这样调用函数；

```
// matrix multiplication, overloaded * operator
Matrix operator * (const Matrix& matrix1, const Matrix& matrix2)
{
    Matrix product(matrix1.dx, matrix2.dy);
    if ( confirmArrays(matrix1, matrix2) )
    {
        for (int i=0; i<product.dx; ++i) {
            for (int j=0; j<product.dy; ++j) {
                for (int k=0; k<matrix1.dy; ++k) {
                    product.p[i][j] += matrix1.p[i][k] * matrix2.p[k][j];
                }
            }
        }
        return product;

     } else {

        // perform this when matrices are not of same dimensions
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:32:38.500

您`operator*`未在`Matrix`. 您实际上已经定义了一个全局运算符。你需要

```
Matrix Matrix::operator * (const Matrix& matrix1, const Matrix& matrix2)
{
   ...
} 
```

然后应该没问题。注意，如果已经编译，您将收到链接器“未定义对运算符 Matrix::operator* 的引用”错误，因为该错误未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:18:28.117

bool 函数只需要支持算术函数。其中一些函数可以是成员重载运算符，有些可以是朋友。这里的技巧是将 bool 函数也定义为友元，使其可以被成员直接函数和友元函数访问，同时保留访问私有成员数据的能力。

`friend bool confirmArrays(const Matrix& matrix1, const Matrix& matrix2);`

# bash - 打印错误消息的正确方法

> ID：12700507
> 
> 赞同：9
> 
> 时间：2012-10-03T00:48:51.690
> 
> 标签：bash

这条线是在 Bash 中打印错误消息的最佳方式吗？

```
echo 'Error: banana' >&2 
```

我需要更新数十个使用所有不同方式记录错误的 Bash 脚本，我不妨选择“正确”的方式来执行此操作，并在执行此操作时遵守标准……

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T08:20:12.650

在我的 bash 脚本开始时，我通常会定义一些函数，例如：

```
error() {
  echo "$@" 1>&2
}

fail() {
  error "$@"
  exit 1
} 
```

这对于输出致命和普通错误非常方便。您可以将此代码段移动到一个单独的文件中，并将`source`其从您的所有 bash 脚本中移出，例如：

```
. /usr/local/lib/snippets/error_handling.sh 
```

因此，当您决定需要一种更好的方法来处理错误消息（例如，将严重错误发送到 syslog）时，您可以一次性更改所有脚本的行为。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-03T00:51:38.140

在linux上，我更愿意说

```
echo "Some error message" >> /dev/stderr 
```

当然，这将有效地做同样的事情，因为`/dev/stderr`符号链接到`/proc/$PID/fd/2`

# wcf - 读取 XML 数据时已超出最大字符串内容长度配额 (8192)

> ID：12700511
> 
> 赞同：1
> 
> 时间：2012-10-03T00:49:33.637
> 
> 标签：wcf

我正在尝试调用读取 XML 字符串的 WCF 服务。我收到此错误“Formater error the maximum string content length quota (8192) has been exceeded while reading XML data.” 下面是服务 web.config 文件

```
<?xml version="1.0"?>
<configuration>

<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior>
                <serviceMetadata httpGetEnabled="true"/>
                <serviceDebug     includeExceptionDetailInFaults="true"/>
                <dataContractSerializer maxItemsInObjectGraph="2147483647" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IOrderCreateService"
                     maxReceivedMessageSize="2147483647"
                     openTimeout="00:1:00"
                     closeTimeout="00:1:00"
                     sendTimeout="00:25:00"
                     receiveTimeout="00:25:00">

            </binding>

        <binding name="HandleLargeMessage" maxReceivedMessageSize="2147483647">
            <readerQuotas maxDepth="2147483647"
               maxStringContentLength="2147483647"
               maxArrayLength="2147483647"
               maxBytesPerRead="2147483647"
               maxNameTableCharCount="2147483647" />

        </binding>
        </basicHttpBinding>

    </bindings>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <services>

        <!-- beta.telagententerprise.com/WcfServices-->
        <service name="OrderCreateService.OrderCreateService">
            <endpoint name="MessageServiceEndpoint"
                      address="http://localhost:2966/OrderCreateService.svc"
                      binding="basicHttpBinding"
                      bindingConfiguration="HandleLargeMessage"
                      contract="IOrderCreateService" />

        </service>

    </services>     
</system.serviceModel> 
```

下面是客户端app.config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.serviceModel>
    <behaviors>
    <serviceBehaviors>
        <behavior>
            <serviceMetadata httpGetEnabled="true"/>
            <serviceDebug includeExceptionDetailInFaults="true"/>
            <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>
    </serviceBehaviors>
    </behaviors>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IOrderCreateService"
                     maxReceivedMessageSize="2147483647"
                     openTimeout="00:1:00"
                     closeTimeout="00:1:00"
                     sendTimeout="00:25:00"
                     receiveTimeout="00:25:00">

            </binding>

            <binding name="HandleLargeMessage" maxReceivedMessageSize="2147483647">
                <readerQuotas maxDepth="2147483647"
                   maxStringContentLength="2147483647"
                   maxArrayLength="2147483647"
                   maxBytesPerRead="2147483647"
                   maxNameTableCharCount="2147483647" />

            </binding>
        </basicHttpBinding>

    </bindings>
    <client>
        <endpoint name="MessageServiceEndpoint"
                      address="http://localhost:2966/OrderCreateService.svc"
                      binding="basicHttpBinding"
                      bindingConfiguration="HandleLargeMessage"
                      contract="OrderCreateService.IOrderCreateService" />

    </client>
</system.serviceModel> 
```

我搜索了这个错误尝试了上面的代码仍然得到 8192 错误。任何帮助都会很棒。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-31T03:53:18.297

即使在客户端和服务器 .config 文件上设置 maxStringContentLength = "2147483647" 后，我也遇到了同样的问题。在网络上尝试了许多建议后，通过在客户端和服务器项目（在 Visual Studio 2013 中的项目属性/构建选项卡/平台目标下）匹配目标框架来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:37:57.183

服务器端配置 --> 端点元素合同值不是完全限定的。应该`OrderCreateService.IOrderCreateService`

此外，如果您在 IIS 上托管，则到服务的地址映射由 IIS 处理。

# java - 如何获取相对于框架的鼠标指针位置

> ID：12700520
> 
> 赞同：1
> 
> 时间：2012-10-03T00:51:02.687
> 
> 标签：java, mouse-position

我想获得相对于框架的鼠标位置。

MouseInfo 给我绝对位置。

如何获得相对于框架的位置？塔恩克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:40:17.813

使用 getLocationOnScreen() 获取帧的绝对位置，然后计算相对距离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T03:36:03.350

首先，从您当前的范围向上走树到顶部（这将是框架）：

```
Container container = this.getParent();
Container previous = container;
while (container != null)
{
    previous = container;
    container = container.getParent();
} 
```

上一个是顶部容器

```
if (previous instanceof JFrame)
{
    Point p = ((JFrame)previous).getMousePosition();
    System.out.println(p); // or do what you need to with p
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-03T20:11:03.373

要计算鼠标**相对于框架**的位置，必须从框架的位置减去鼠标的**绝对位置，从而消除****框架**左上角到屏幕左上角的无关点。

要获取鼠标相对于框架的位置作为**Point**：

```
public Point getLocationRelativeTo() {
    int x = frame.getX() - MouseInfo.getPointerInfo().getLocation().x;
    int y = frame.getY() - MouseInfo.getPointerInfo().getLocation().y;
    return new Point(x, y);
} 
```

要将 x 作为**int**：

```
public int getXRelativeTo() {
    int x = frame.getX() - MouseInfo.getPointerInfo().getLocation().x;
    return x;
} 
```

要将 y 作为**int**：

```
public int getXRelativeTo() {
    int y = frame.getY() - MouseInfo.getPointerInfo().getLocation().y;
    return y;
} 
```

我希望有所帮助。:)

有关更多信息，请访问[http://docs.oracle.com/javase/7/docs/api/java/awt/MouseInfo.html](http://docs.oracle.com/javase/7/docs/api/java/awt/MouseInfo.html)

# javascript - 带有 Titanium 的 Android 上的大图像

> ID：12700526
> 
> 赞同：3
> 
> 时间：2012-10-03T00:51:42.297
> 
> 标签：javascript, android, image, titanium, android-imageview

我需要使用 Titanium 在 Android 上显示一个巨大的图像（至少 2000x2000）并让用户滚动，就像他们在 iOS 上使用滚动视图一样。但是，我知道 Android 不支持相同类型的滚动视图，所以我选择使用 ImageView。

由于内存问题，我无法正确显示此图像，或者至少无法以我想要的方式显示（放大时不会模糊）。有没有人找到一种方法让大型可滚动图像在 Android 上的 Titanium 中工作而不会发生内存崩溃？

我也尝试了 WebView，但它似乎调整了我的图像大小，当你缩放时它也很模糊。我希望 Android webview 支持 SVG，但看起来它们不在大多数设备上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:23:03.213

这是迄今为止我找到的最好的答案：

[http://www.tenxperts.com/2011/07/13/working-with-large-images-in-android/](http://www.tenxperts.com/2011/07/13/working-with-large-images-in-android/)

我试过了，它适用于 Titanium 网络视图。

# iphone - SBJson 解析尝试——目标 C

> ID：12700527
> 
> 赞同：0
> 
> 时间：2012-10-03T00:51:58.910
> 
> 标签：iphone, objective-c, ios, ipad, sbjson

我正在尝试解析以下 JSon（我认为上次检查时已验证）：

```
{
    "top_level" =     (
                {
            "download" = "http:/target.com/some.zip";
            "other_information" = "other info";
            "notes" =             (
                                {
                    obj1 = "some text";
                    obj2 = "more notes";
                    obj3 = "some more text still";
                }
            );
            title = "name_of_object1";
        },
                {
            "download" = "http:/target.com/some.zip";
            "other_information" = "other info";
            "notes" =             (
                                {
                    obj1 = "some text";
                    obj2 = "more notes";
                    obj3 = "some more text still";
                }
            );
            title = "name_of_object2";
        },
                {
            "download" = "http:/target.com/some.zip";
            "other_information" = "other info";
            "notes" =             (
                                {
                    obj1 = "some text";
                    obj2 = "more notes";
                    obj3 = "some more text still";
                }
            );
            title = "name_of_object3";
        }
    );
} 
```

我的尝试是使用以下内容：

```
NSDictionary *myParsedJson = [myRawJson JSONValue];

for(id key in myParsedJson) {
    NSString *value = [myParsedJson objectForKey:key];
    NSLog(value);
} 
```

错误：

```
-[__NSArrayM length]: unrecognized selector sent to instance 0x6bb7b40 
```

**问题：** 在我看来，JSon 值使 myParsedJson 对象成为 NSArray 而不是 NSDictionary。

我将如何遍历名为 name_of_object 的对象并访问每个嵌套字典？我会以正确的方式去做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:37:50.450

NSLog 的第一个参数必须是一个字符串。试试这个：

```
NSLog(@"%@", value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:21:01.323

你`value`不是一个字符串，只是因为你已经输入了它。根据您发布的结构，您将拥有一个数组作为您的顶级对象。

```
NSDictionary *myParsedJson = [myRawJson JSONValue];
for(id key in myParsedJson) {
    id value = [myParsedJson objectForKey:key];
    NSLog(@"%@", value);
} 
```

NSLog 中的`%@`语法导致`-description`方法在值上被调用；此方法返回一个 NSString。这意味着您*可以*这样做`NSLog([value description]);`，但这通常不是一个好主意。（有人可能会制作可能使您的应用程序崩溃的恶意输入。）

# c# - 列表分组 - Lambda 或 Linq

> ID：12700528
> 
> 赞同：0
> 
> 时间：2012-10-03T00:52:10.783
> 
> 标签：c#, linq, lambda

我有一个报告软件，我一直在使用报告列表。在我们的一个界面上，可以显示多个时间段。每份报告都有 1 天的时间范围，对于每个时间段，我们每天都会提取一份报告并将它们添加到报告列表中。这导致了很多用于计算数字的混乱代码，我正在尝试重构它。

我遇到了 lambda 表达式或 linq 查询的问题。我想将所有报告组合成一个报告。在这个单一的报告中，我希望所有人都与他们的项目和案例合并。

```
class TimeReport : Report // Report handles basic stuff like time generated, start/end //date ect.
{
     public  List<ReportPersonRow> results;
     // more methods below for handling other report details
}

class ReportPersonRow
{
    public long PersonId {get;set;}
    public string PersonName {get;set;}
    public List<ReportProjectRow> Projects {get;set;}

    // more methods below for handling other details
}

class ReportProjectRow
{
    public long ProjectId{get;set;}
    public string ProjectName{get;set;}
    public List<ReportProjectCaseRow> Projects {get;set;}

    // more methods below for handling other details
}

class ReportProjectCaseRow
{
    public long CaseId{get;set;}
    public string CaseName{get;set;}
    public string HoursLogged{get;set;}

    // more methods below for handling other details
} 
```

我最初和其他各种人甚至试图去任何地方，但我迷失了前进的方向，或者我什至应该这样做。

```
 var flatList = Model.Reports.SelectMany(x => x.Results).GroupBy(x => x.PersonId); 
```

下面是数据当前的样子和我想要实现的示例。

报告
-person
--project
---case
--project
---case
---case
---case
--project
---case
---case
-person
--project
---case
--project
-- -case
---case
---case
--project
---case
---case

报告
-person
--project
---case
--project
---case
---case
---case
--project
---case
---case
-person
--project
---case
--project
-- -case
---case
---case
--project
---case
---case

最终结果将是（所有以前的报告合并为 1）

报告
-person
--project
---case
---case
---case
---case
--project
---case
---case
---case
--project
---case
---case
-- -case
---case
---case
-person
--project
---case
---case
---case
--project
---case
---case
---case
--project
---case
- --案例---
案例
---案例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:20:43.000

```
var flatlist = from r in Model.Reports
               from p in r.Results
               from c in p.Projects
               group c by p.PersonId
               into grp;
               select grp; 
```

也许？我不太确定你想要什么。这将创建一个按人员 ID 分组的 ReportProjectRow 列表。

“我想把所有的报告组合成一个单一的报告。在这个单一的报告中，我希望所有的人都与他们的项目和案例合并。”

这将获取所有报告，找到这些报告中的所有人员，找到所有这些人员的所有项目，然后将项目分组到人员 ID 下。从那里您可以随心所欲地操纵信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:37:42.767

你需要先做 GroupBy

```
var flatList = Model.results.GroupBy(r => r.PersonId)
                            .Select(group => new { Group = group.Key, Results = group.SelectMany(x => x.Projects) }); 
```

您可能需要调整查询，因为它可能无法准确返回您正在寻找的内容，但您应该明白这一点。Select 的 group 参数是唯一 PersonId 的所有实体的子集合。

# c++ - 初始化 pid_t 变量

> ID：12700531
> 
> 赞同：0
> 
> 时间：2012-10-03T00:52:27.740
> 
> 标签：c++, fork

Valgrind 报告了一个错误：

```
==5644== Conditional jump or move depends on uninitialised value(s) 
```

这发生在类型变量上`pid_t`。

我的代码如下：

```
GmpPipePlayer::GmpPipePlayer( IOBase *pIO, Referee *pBack, PieceColor pc, int size, const DataBoard *pBd, int handicap, const char *cmd_line, int bDebug )
    : GmpPlayer(pIO, pBack, pc, size, pBd, handicap, bDebug)
{
    int down[2], up[2];
        pid_t _pid;  //here the var is declared

    pipe(down);   
    pipe(up);

    _pid = fork();

    if (_pid < 0)
        exit(1);

    if (_pid == 0)
    {
        close(down[1]);
        close(up[0]);

        dup2(down[0], 0);
        dup2(up[1], 1);

        execl("/bin/sh", "sh", "-c", cmd_line, NULL);

        _exit(1);
    }

    close(down[0]);
    close(up[1]);
    _down = down[1];
    _up = up[0];

    _reader_thd = new Thread(reader_wrapper, this);
}

GmpPipePlayer::~GmpPipePlayer()
{
    if (_pid > 0)   //valgrind is reporting that the error is here!!
    {
        kill(_pid, SIGTERM);
        _pid = 0;
    }

    if (_up)
    {
        close(_up);
        _up = 0;
    }

    if (_down)
    {
        close(_down);
        _down = 0;
    }   
       delete _reader_thd
} 
```

所以，我认为问题是`_pid`没有初始化，应该如何初始化这个变量？我试过这样：

```
 pid_t _pid=0; 
```

但这仍然导致同样的错误。这段代码在此过程中被多次调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:03:02.507

看来您有两个变量被调用`_pid`- 您在构造函数中声明的本地变量：

```
pid_t _pid;  //here the var is declared 
```

以及您在析构函数中访问的那个：

```
if (_pid > 0)   //valgrind is reporting that the error is here!! 
```

这些变量并不相同：您在析构函数中访问的变量必须是全局变量或实例变量（更有可能）。

由于您依赖于`_pid`将状态从构造函数传递给析构函数，因此您需要从构造函数中删除本地声明，并根据需要初始化其他声明`_pid`。如果它是一个实例变量，则将其初始化添加到初始化器列表中，如下所示：

```
GmpPipePlayer::GmpPipePlayer( IOBase *pIO, Referee *pBack, PieceColor pc, int size, const DataBoard *pBd, int handicap, const char *cmd_line, int bDebug )
: GmpPlayer(pIO, pBack, pc, size, pBd, handicap, bDebug), _pid(0) {
    ... //                         HERE ------------------^
} 
```

# javascript - jQuery 根据表单条目计算实时输出

> ID：12700534
> 
> 赞同：1
> 
> 时间：2012-10-03T00:52:45.890
> 
> 标签：javascript, jquery, forms

我有一个表格。用户将填写它，并且在该表单的底部，我试图显示插入到表单页面中的基于值的值。

到目前为止，我根本没有得到任何输出，这是我的尝试：

HTML表格：

```
<form id="myform">
 <select   
            name="sv_313"
            onchange="calculate()"
            id="sv_313"
        >
                <option value="Select One">Select One</option>
                <option value="0.1">A</option>
                <option value="0.2">B</option>
                <option value="0.3">C</option>
        </select>
<br/>
           <input 

                type="number" 
                name="sv_312" 
                size="10" 
                maxlength="10"
                onblur="calculate()"
                id="sv_312" 
            />

Calculated value 
            <div id="coverage"> </div>

</form> 
```

的JavaScript：

```
<script>
//define an array for the possible values input via select menu
var spv = new Array();
spv["A"]=0.1;
spv["B"]=0.2;
spv["C"]=0.3;

//function to get the value from select menu
function getSAMprevalence()
{
var SAMprevalence=0;    
var theForm = document.forms["myform"];
var selectedSAMprevalence = theForm.elements["sv_313"];
SAMprevalence = spv[selectedSAMprevalence.value]
return SAMprevalence;
}

//function to get the value from input field
function getInputvalue()
{
var Inputvalue=0;   
var theForm = document.forms["myform"];
var Inputvalue = theForm.elements["sv_312"];
return Inputvalue;
}

//function to calculate using these two functions, and output into div named coverage:
function calculate()
{
var treatmentCoverage = getSAMprevalence() + getInputvalue();
document.getElementById('coverage').innerHTML =
                                      ""+treatmentCoverage;
}
    </script> 
```

我真的没有使用 javacsript 或任何东西的经验，任何指针都会非常感激。谢谢！

编辑：这是一个 jsfiddle，它设置在其中，说明缺少任何输出:( [http://jsfiddle.net/rHu8J/3/](http://jsfiddle.net/rHu8J/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T01:15:08.537

尝试使用 jQuery ..

[演示](http://jsfiddle.net/sushanth009/cXukD/)

```
$(function() {
    $('#sv_313').on('change', function() {
        calculate();
    });

    $('input[name=sv_312]').on('blur', function() {
        calculate();
    });
});

function calculate() {
    var $select = $('#sv_313').val();
    var $text = $('input[name=sv_312]').val();

    if ($select == undefined || $select == '' ||$select == 'Select One') {
        $select = 0;
    }
    else {
        $select = parseFloat($select);
    }
    //
    if ($text == undefined || $text == '') {
        $text = 0;
    }
    else {
        $text = parseFloat($text);
    }

    $('.coverage').html($select + $text);
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T01:35:39.420

HTML：

```
<form id="myform">
    <select name="sv_313" onchange="calculate()" id="sv_313">
        <option value="0">Select One</option>
        <option value="0.1">A</option>
        <option value="0.2">B</option>
        <option value="0.3">C</option>
    </select>
    <br/>
    <input type="number" id="sv_312" size="10" maxlength="10" onchange="calculate()"/>
</form>
Calculated value 
<div id="coverage"></div> 
```

Javascript：

```
function calculate() {
    var myForm = document.forms['myform'];
    var selectVal = myForm.elements['sv_313'].value;
    var inputVal = myForm.elements['sv_312'].value;
    if(!inputVal) inputVal = 0;
    document.getElementById('coverage').innerHTML = parseFloat(selectVal) + parseInt(inputVal);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T00:57:27.737

我相信您的错误是当您获得所选选项时。试试这个：

```
SAMprevalence = spv[selectedSAMprevalence.options[selectedSAMprevalence.selectedIndex].text] 
```

感谢： [使用 JavaScript 在下拉列表中获取选定的值？](https://stackoverflow.com/questions/1085801/how-to-get-the-selected-value-of-dropdownlist-using-javascript)

# .net - NH3.3 和附加分离物体

> ID：12700536
> 
> 赞同：0
> 
> 时间：2012-10-03T00:53:04.370
> 
> 标签：.net, nhibernate, session

在将我们的整个系统从 NH1.2 升级到 NH3.3 的过程中。系统中的一个常见场景（以前的开发人员）是分离多个对象并将它们存储在 Web Session 中，然后通过 IHttpModule 在每个请求时附加它们。

在运行 NProf 的简单页面加载中，我注意到现在附加的这些对象导致触发它们在数据库中更新，尽管它们没有被更改。

要附加的先前代码（NH1.2）大致如下：

```
if (((NHibernate.Impl.SessionImpl)session).IsSaved(obj)
   session.Lock(obj, LockMode.None)

```

由于似乎 IsSaved 已被删除，代码现在是：

```
如果 (obj != null)
   session.Lock(obj, LockMode.None)

```

我的理解是 LockMode.None 不应该导致数据库更新。有些对象有版本，有些则没有。两者都在更新。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:45:38.467

想我会通过一个类比来解释，看看区别：

```
var obj = _nhibernateSession.Load<MyObject>(id);
obj.Title = "Some Title";
_nhibernateSession.Transaction.Commit(); 
```

和

```
var obj = someObjectInMemoryNotInSession as MyObject;
obj.Title = "Some Title";
_nhibernateSession.Update(obj);
_nhibernateSession.Transaction.Commit(); 
```

你注意到区别了吗：在第一种情况下不需要更新，因为 obj 是从 session 中获取的，并且 session 会知道它的任何更改，但是在第二个示例中，我们需要显式调用 Update，因为现在我们的 obj与会话分离。

现在回答你的问题：声明：

```
if (((NHibernate.Impl.SessionImpl)session).IsSaved(obj)
   session.Lock(obj, LockMode.None) 
```

在 NH1.2 中运行良好，因为在第一种情况下（从会话中加载实体的情况），但现在您选择第二种方法：

```
if (obj != null)
   session.Lock(obj, LockMode.None) 
```

并且它不会从会话中加载 obj，这就是 NHibernate 触发数据库更新的原因。

如果你想避免这种情况，只需在 if 之前调用 Get()：

```
obj = session.Get(id, LockMode.None); 
```

或者简单地说：

```
obj = session.Get(id); 
```

两者都将为您的情况做好工作。

# xml - XSD complexType - 已知的孩子，未知的名字

> ID：12700540
> 
> 赞同：0
> 
> 时间：2012-10-03T00:54:01.370
> 
> 标签：xml, xsd

给定一个 XML 文件，例如

```
<stuff>
 <noidea>
  <name>x</name>
  <type>a</type>
 </noidea>
 <whatthesethings>
  <name>y</name>
  <type>n</type>
 </whatthesethings>
 <mightbenamed>
  <name>z</name>
  <type>c</type>
 </mightbenamed>
</stuff> 
```

在这个例子中，我知道每个元素的子元素是什么，并且我有它们的名字，所以我可以为它写一个 XSD，但实际上，其中的元素可以有任何名字。所以，我需要类似的东西

```
<xs:element name="stuff">
 <xs:complexType>
  <xs:sequence>
   <xs:element !!!unknownName!!! minOccurs="1" maxOccurs="unbounded">
    <xs:complexType>
     <xs:element name="name" type="xs:string" />
     <xs:element name="type" type="xs:string" />
    </xs:complexType>
   </xs:element>
  </xs:sequence>
 </xs:complexType>
</xs:element> 
```

在[问题 943659](https://stackoverflow.com/questions/943659)中`<xs:any/>`提到了，但我不认为它可以用作可以验证的扩展基础。

这是否可以在 XSD 中执行（如果可以，请提供示例），还是示例文档一开始就滥用 XML？

注意：这不是我的 XML 文件。我无法修改它以确保定义的元素名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:02:32.123

您提到的要求无法通过 XSD 实现。作为 XSD 开发人员，通过阅读您的问题，我的理解是......您想要验证节点下的层次结构和数据，而不是节点的名称。因此，您希望为各种传入的 XML 维护相同的 XSD。

出色地。您可能找不到完美的解决方案。但如果您有兴趣，我有一个解决方法。但是为此，您需要知道可能的名称..

在 XSD 中，我们有一个选项`<Choice/>`允许验证多个可能节点中的一个。**验证将侧重于层次结构和数据，而不是节点的名称。**

在下面提到的 XML 示例中，我们有 AppleFruit 或 Orange fruit 的定义。虽然标签名称不同，但层次结构和数据类型相同：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <AppleTree>
    <AppleFruitColor>Red</AppleFruitColor>
    <AppleFruitShape>Heart</AppleFruitShape>
    <Tastes>Sweet</Tastes>
    <Price>$1</Price>
  </AppleTree>
  <AppleTree>
    <AppleFruitColor>Green</AppleFruitColor>
    <AppleFruitShape>Heart</AppleFruitShape>
    <Tastes>Sweet and Sour</Tastes>
    <Price>$0.5</Price>
  </AppleTree>
</root> 
```

第二个 XML：

```
<root>
  <OrangeTree>
    <OrangeFruitColor>Orange</OrangeFruitColor>
    <OrangeFruitShape>Round</OrangeFruitShape>
    <Tastes>Sweet and Sour</Tastes>
    <Price>$0.5</Price>
  </OrangeTree>
</root> 
```

相关的 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root" type="root"/>
  <xs:complexType name="root">
    <xs:sequence>
      <xs:choice>
        <xs:element maxOccurs="unbounded" name="AppleTree" type="Tree"/>
        <xs:element maxOccurs="unbounded" name="OrangeTree" type="Tree"/>
      </xs:choice>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="Tree">
    <xs:sequence>
      <xs:choice>
        <xs:element name="AppleFruitColor" type="FruitCOLOR" />
        <xs:element name="OrangeFruitColor" type="FruitCOLOR" />
      </xs:choice>
      <xs:choice>
        <xs:element name="AppleFruitShape" type="xs:string" />
        <xs:element name="OrangeFruitShape" type="xs:string" />
      </xs:choice>
      <xs:element name="Tastes" type="xs:string" />
      <xs:element name="Price" type="xs:string" />
    </xs:sequence>
  </xs:complexType>
  <!--Custom Data Types-->
  <xs:simpleType name="FruitCOLOR">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Red"/>
      <xs:enumeration value="Green"/>
      <xs:enumeration value="Orange"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema> 
```

注意：您可以为每个元素定义单独的 ComplexTypes/SimpleTypes（不像例如，我正在重用 complexType "Tree"）

解释：
在上面的 XSD 中，根元素可能有 AppleTree 或 OrangeTree 或两者兼有。ComplexType Tree 的下一级验证 AppleTree/OrangeTree 下的节点，
例如：AppleFruitColor 或 OrangeFruitColor 可以有“红色或绿色或橙色”以外的数据.. XSD 是灵活的，因此它可以接受 AppleTree 下的 OrangeFruitColor，这意味着，**我们不关心 AppleTree 下的哪个节点，但我们关心的是它有什么水果颜色**！

在上面的示例中，我可以为 Apple 和 Orange 定义单独的水果颜色：

```
 <xs:complexType name="Tree">
    <xs:sequence>
      <xs:choice>
        <xs:element name="AppleFruitColor" type="AppleCOLOR" />
        <xs:element name="OrangeFruitColor" type="OrangeCOLOR" />
      </xs:choice>
      ........
      ......
  <xs:simpleType name="AppleCOLOR">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Red"/>
      <xs:enumeration value="Green"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="OrangeCOLOR">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Orange"/>
    </xs:restriction>
  </xs:simpleType> 
```

使用此代码，Schema 接受`<OrangeFruitColor>`只有橙色，其中`<AppleFriutColor>`可以是红色或绿色。

**验证的重点是层次结构和数据，而不是节点的名称。**

# asp.net - ASP.NET Web 窗体和 F5 刷新问题

> ID：12700543
> 
> 赞同：1
> 
> 时间：2012-10-03T00:54:22.933
> 
> 标签：asp.net, web, webforms

我有一个用户填写的 ASP.NET Web 表单 (C#)，它有几个导致回发的下拉列表和一些导致回发的验证。我还使用了几个不同的更新面板。一个面板对用户输入可见，而另一个面板在用户单击提交并将数据添加到数据库后出现。确认面板（最后一个面板）还向用户显示确认编号。

在最后一个面板显示后，我想防止在用户按 F5 或刷新时重新加载页面。原因是，我不希望用户不小心单击刷新或 F5 并丢失确认号和消息。当用户按下 F5 时，浏览器将其解释为要加载新页面，此时会话被清除（如下面的代码所示）。

我的第一个想法是重新打印消息和确认号码，并确保持有它的面板保持可见。我打算在下面代码的 else 部分执行此操作 - 但是由于有多个回发并且它们都触发页面加载，所以这不起作用，除非有某种方式可以确定回发是否是表单的结果元素或 f5 键。

```
protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            if (!IsPostBack)
            {
                Session.Clear();
                GetList();
            }
        }
        catch (Exception ex)
        {
            //Do something();
        }
    } 
```

我看过一些推荐使用 Javascript 的不同帖子，但如果可能的话，我会避免这样做，因为有人关闭了 javascript。

这是程序的流程：用户打开表单，填写联系人面板中的字段，然后点击提交。这些字段使用 ASP.NET 服务器验证控件进行验证，如果一切正常，则将数据发送到数据库并返回确认号。最后，联系人面板设置为可见性=false，确认面板设置为可见性=true。

希望这可以帮助。感谢任何建议。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:36:19.950

将您在最终屏幕（确认）上的内容移动到一个全新的页面。为进行确认而保存的任何数据都应保存在某种类型的数据存储中（例如数据库），然后访问者需要提取该信息的任何 ID 或变量都应保存在 Session var 中。这样当用户刷新页面时，他们仍然会看到你想要的内容。无论如何，这几乎就是我们必须在当天完成所有表格的方式。

例如：

```
~/form_page.aspx
- User lands
- Fills in information
- Post backs save data as the user progresses
- Save all data collected to a resource such as a database
- Save an ID to access that information to a Session variable
- Redirect user to...

~/form_thankyou.aspx
- On load, get the Session variable needed to pull the information
- Retrieve information from the resource
- Display results to user 
```

（这不是实际代码，我只是在格式化时遇到了问题。）

使用此技术还将使您的 SEO/Metrics 团队更容易跟踪转换（即使有很多其他方法）。

# php - 将 $_SERVER['REMOTE_ADDR'] 设置为假 IP 地址

> ID：12700545
> 
> 赞同：2
> 
> 时间：2012-10-03T00:54:27.127
> 
> 标签：php, ip-address

我正在调解从客户端 A 到服务器 B 的请求。客户端 A 可能是电话或笔记本电脑。服务器 B 想知道客户端 A 的 IP 地址，但他们正在`$_SERVER['REMOTE_ADDR']`. 因为我正在访问服务器 B，所以他们得到了“错误”的值`$_SERVER['REMOTE_ADDR']`——他们得到了我服务器的 IP 地址。我该怎么做才能让服务器 B`$_SERVER['REMOTE_ADDR']`在他们的端点访问时看到客户端的 IP 地址？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T01:10:27.783

这发生在您的 PHP 脚本无法覆盖的层上。标`X-Forwarded-For`头的存在是为了中继真实的客户端 IP，但远程服务器必须支持这个容易被欺骗的值。

```
$header = "X-Forwarded-For: {$_SERVER['REMOTE_ADDR']}, {$_SERVER['SERVER_ADDR']}";
curl_setopt($curl_handle, CURLOPT_HTTPHEADER, array($header)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:19:41.977

编辑：先前的答案是完美的。这仅适用于您自己的 dev-ip 干扰客户端统计信息的情况。

在没有更多信息的情况下，在最基本的层面上，您应该删除自己的“开发者 IP”，这样您就不会被包含在任何统计/数据/日志中......

您的 IP 可能与相关服务器不同：

```
<?php 

$dev_ip = '217.12.14.14' // your dev IP address

if ($_SERVER['REMOTE_ADDR'] == $dev_ip){
    // do nothing
} else {
    // do|show|log something
} 
```

这不考虑动态 IP 地址分配（而不是静态 IP）。动态 IP 通常由 ISP 分配，这会导致进一步的问题。

# java - Java数组在索引方法处获取值

> ID：12700547
> 
> 赞同：0
> 
> 时间：2012-10-03T00:54:38.347
> 
> 标签：java, methods, get

我制作了一个使用普通数组和模拟数组列表的动态数组。所以....请帮我检查方法是否正确。rangeCheck 是一个布尔方法，用于检查数组是否超出范围。rangeCheck 包含出站异常。

```
 public int get(int position)
{
    rangeCheck(position);
    int valuePosition =0;
    for(int count=0;count == position;count++)
    {
        valuePosition = storage[count] ;
    }
    return valuePosition; 
} 
```

出于某种愚蠢的原因，我一直在想，为了在某个特定的指数上获得一些价值，我必须循环执行它....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T00:59:59.407

怎么样

```
public int get(int position)
{
    boolean ok = rangeCheck(position);
    if(! ok)        
        throw new IndexOutOfBoundsException("Your error message");
    return storage[position];
} 
```

# css - 如何在 CSS 中获取对 id="xxx.yyy" 的引用？

> ID：12700549
> 
> 赞同：5
> 
> 时间：2012-10-03T00:54:44.447
> 
> 标签：css

在 HTML 代码中有一个像这样的 div：

```
<div id="xxx.yyy">...</div> 
```

我想在 css 文件中指定样式。如何获得对这个 div 的引用？以下似乎不起作用：

```
#xxx.yyy {

} 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T00:57:43.997

```
#xxx\.yyy {

} 
```

应该做的伎俩。在 CSS id 名称中使用点没有害处

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T01:22:32.673

你也可以做这样的事情......

```
​div[id="xxx.yyy"] {
    /* your styles here */
}​​​​​​ 
```

规范说明了一切：[http ://www.w3.org/TR/CSS21/syndata.html#value-def-identifier](http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier)

jsFiddle：http: [//jsfiddle.net/UnsungHero97/mjGzQ/](http://jsfiddle.net/UnsungHero97/mjGzQ/)

# php - 带有文件浏览按钮的 PHP Curl 上传文件

> ID：12700551
> 
> 赞同：0
> 
> 时间：2012-10-03T00:55:04.257
> 
> 标签：php, file-upload, curl

我想将我的文件远程上传到接受使用 curl 上传的服务器，但是每次不用“@”符号输入完整的文件路径我可以创建一个浏览按钮来选择文件然后继续 curl 上传

这是我的代码::

```
$post = array("file_box"=>"@/path/to/myfile.jpg");

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://remote-site");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
$output = curl_exec($ch);
curl_close($ch);

return $output; 
```

只想通过浏览按钮更改“@/path/to/myfile.jpg”，将其值传递给 php 变量

我想改变这个 [[ $post = array("file_box"=>"@/path/to/myfile.jpg"); ]]

类似的事情

[[ $post = array("file_box"=>"@".$variable_contains_file_path_from_browse_button); ]]

防止将文件直接从客户端上传到远程服务器的临时路径中的中间服务器（托管此脚本）

有没有解决方案

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:01:32.243

SO中有几个问题可以解决这个问题

这是一些链接

[使用 curl 上传文件](https://stackoverflow.com/questions/10530449/uploading-a-file-using-php-curl)

[curl php文件上传](https://stackoverflow.com/questions/3892617/curl-php-file-upload)

谷歌搜索策略也是[http://bit.ly/PMUf2b](http://bit.ly/PMUf2b)

但仍然因为您要求从前端上传浏览按钮，这里是完整的设置以及导师链接

你可以按照这里有前端和php代码的导师

[使用 curl 上传](http://www.akchauhan.com/how-upload-file-using-curl/) 这是 php 代码

```
 $request_url = ‘http://www.example.com/test.php’;
    $post_params['name'] = urlencode(’Test User’);
    $post_params['file'] = ‘@’.'demo/testfile.txt’;
    $post_params['submit'] = urlencode(’submit’);

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $request_url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_params);
    $result = curl_exec($ch);
    curl_close($ch); 
```

这是html代码

```
<form method=”post” action=”test.php” enctype=”multipart/form-data”&gt;
    <input type=”text” name=”name” value=”Test User” />
    <input type=”file” name=”file” />
    <input type=”submit” name=”submit” value=”submit” />
</form> 
```

# ios - 是否可以访问 iOS 系统动画的属性？

> ID：12700554
> 
> 赞同：2
> 
> 时间：2012-10-03T00:55:28.860
> 
> 标签：ios, animation, uikit

是否可以获得内置 iOS 系统动画的动画属性（速度和缓动曲线）？具体来说，`UIStatusBarAnimationSlide`当您隐藏或显示状态栏时。现在我只是在观察它并想出了一个很好的匹配：使用默认动画曲线的 0.35 秒。这很好用，但 Apple 可能会在未来的 iOS 更新中更改这样的动画，并且完全匹配它而不依赖于我自己提出的硬编码值会很好。

对于它的价值，这是我的视图控制器在我点击视图以隐藏状态栏并调整视图大小以填充屏幕时调用的方法。

```
-(void)tappedView:(UIGestureRecognizer *)gestureRecognizer
{
    UIApplication *app = [UIApplication sharedApplication];
    // First, toggle the visibility of the status bar
    [[UIApplication sharedApplication] setStatusBarHidden:![app isStatusBarHidden] withAnimation:UIStatusBarAnimationSlide];
    // Then scale this view controller's view, attempting to match the built-in
    // UIStatusBarAnimationSlide animation
    [UIView animateWithDuration:.35
            animations:^{
                self.view.frame = [UIScreen mainScreen].applicationFrame;
            }];
} 
```

顺便说一句，我很惊讶我找不到在隐藏状态栏时处理调整 VC 视图大小的内置方法。毕竟，如果在通话过程中状态栏的高度加倍，视图会自动调整大小。告诉我我遗漏了一些东西，还有一种方法可以让视图自动*增长*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:58:57.330

这是我在我的应用程序中使用的一段代码：

```
- (void)application:(UIApplication *)application willChangeStatusBarFrame:
    (CGRect)oldStatusBarFrame {
    [UIView animateWithDuration:0.355f animations:^{
        if(floating_point_values_are_equal(oldStatusBarFrame.size.height, 20.0f)) {
            for(UIViewController* VC in self.tabBarController.viewControllers) {
                UIView* view = VC.view;
                [view setTransform:CGAffineTransformMakeScale(1.0f, 1.0f)];
            }
        } else {
            for(UIViewController* VC in self.tabBarController.viewControllers) {
                UIView* view = VC.view;
                CGFloat ratio = (view.frame.size.height - 20) / view.frame.size.height;

                [view setTransform:CGAffineTransformMakeScale(1.0f, ratio)];
            }
        }
    }];
} 
```

它基本上根据新的屏幕尺寸缩放整个应用程序。它之所以有效，是因为比例不是很大的变化——为新的 iPhone 屏幕这样做看起来不正确。

# printing - 在python 3中打印没有空格

> ID：12700558
> 
> 赞同：26
> 
> 时间：2012-10-03T00:55:51.590
> 
> 标签：printing, python-3.x

我是 Python 的新手，我想知道如何打印多个值而不在两者之间添加额外的空间。我想要输出`ab`而不是`a b`不必调用`print`两次：

```
print("a", end="")
print("b") 
```

另外，我有以下代码：

```
a = 42
b = 84 
```

我想将它们的值打印为`a = 42, b = 84`，但如果我这样做

```
print("a = ", a, ", ", b = ", b) 
```

添加了额外的空格（它输出`a = 42 , b = 84`）

鉴于 Java 风格，

```
print("a = " + a + ", b = " + b) 
```

提出一个`TypeError`。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-03T01:06:13.440

您可以使用该`sep`参数摆脱空格：

```
>>> print("a","b","c")
a b c
>>> print("a","b","c",sep="")
abc 
```

我不知道您所说的“Java 风格”是什么意思；在 Python 中，您不能以这种方式将字符串添加到（比如说）整数，尽管 if`a`和`b`is 字符串它会起作用。当然，您还有其他几种选择：

```
>>> print("a = ", a, ", b = ", b, sep="") 
a = 2, b = 3
>>> print("a = " + str(a) + ", b = " + str(b))
a = 2, b = 3
>>> print("a = {}, b = {}".format(a,b))
a = 2, b = 3
>>> print(f"a = {a}, b = {b}")
a = 2, b = 3 
```

最后一个需要 Python 3.6 或更高版本。对于早期版本，您可以模拟相同的效果（虽然我一般不建议这样做，但它有时会派上用场，假装没有意义）：

```
>>> print("a = {a}, b = {b}".format(**locals()))
a = 2, b = 3
>>> print("b = {b}, a = {a}".format(**locals()))
b = 3, a = 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-07-04T11:47:12.803

print() 函数的实际语法是

```
print(*objects, sep=' ', end='\n', file=sys.stdout, flush=False) 
```

您可以看到它有一个`sep`带有默认值的 arg `' '`。这就是为什么在两者之间插入空间的原因。

```
print("United","States")            #Output: United States
print("United","States",sep="")     #Output: UnitedStates 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-26T18:27:08.383

你也可以使用

```
print("%d%d" %(a,b)) 
```

以格式化字符串的形式打印不由空格分隔的 a 和 b。这与 c 中的类似。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-19T07:59:09.687

`print()`将自动在参数之间留出空格。

```
>>> print("a", "b", "c")
a b c 
```

要更好地控制间距，您可以使用字符串格式：

```
>>> v0, v1, v2 = "a", "b", "c"
>>> print("%s%s%s" % (v0, v1, v2))
abc
>>> print("%s%s%s".format(v0, v1, v2)
abc
>>> print(f"{v0}{v1}{v2}")
abc 
```

我喜欢这个主题的指南：[https ://realpython.com/python-f-strings/](https://realpython.com/python-f-strings/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-27T14:01:37.277

要分隔字符串或值，您可以在 print() 中使用 sep 参数

```
print(a,b,sep='') 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-11-07T04:00:25.117

在[此页面上](http://anh.cs.luc.edu/python/hands-on/3.1/handsonHtml/io.html)，答案是打印您的普通文本并在最后使用 `sep=""`。

所以命令

```
print("Hole", hole, "Par", par, sep="") 
```

会给

```
"Hole1Par4" 
```

假设`hole==1`和`par==4`。

# javascript - 多个内联脚本是否比一个联合内联脚本慢？

> ID：12700559
> 
> 赞同：1
> 
> 时间：2012-10-03T00:56:08.453
> 
> 标签：javascript, html

多个内联脚本：

```
<script type="text/javascript">/* some codeblock 1 */</script>
<script type="text/javascript">/* some codeblock 2 */</script>
<script type="text/javascript">/* some codeblock 3 */</script> 
```

单连体内联脚本：

```
<script type="text/javascript">
    /* some codeblock 1 */
    /* some codeblock 2 */
    /* some codeblock 3 */
</script> 
```

多个内联脚本更慢吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:47:11.643

如果你说的是在实际的 HTML 中编写代码，而不是加载外部 JS，那么答案是它真的没关系。

...如果浏览器尝试以 60fps 的速度处理视觉刺激请求，并根据需要进行更改... ...那么几微秒的差异不会产生很大的影响。

在非常旧的浏览器上，如果您尝试编写非常多的代码（每个标签可能有数千行，或者每个标签有数万行），那么拥有多个代码可能会产生明显的差异............但是有一个在这种情况下，单个元素仍然会很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T03:38:18.453

看不到任何可以衡量的方式。

现代浏览器的解析器速度非常快——它们本质上是排序引擎。这个块到 HTML 引擎，这个块到 CSS 引擎，这个块到 JavaScript 引擎 - 这些引擎可能需要一些时间来完成它们的工作，但是将块放到正确的位置根本不是性能问题。

下载一个小页面的性能损失将比收集代码块并将它们送到引擎的性能损失更大。

此外，JavaScript（和许多其他交互语言）通过预处理器运行，在加载和运行时将它们转换为机器代码。现在可能有一个更时髦的名字（可能里面有“云”），但它曾经被称为“即时编译”（JIT）。

这一切都非常复杂，但基本上在页面加载时它只是将它找到的所有脚本发送到这个 JIT 引擎。这个人收集代码，优化它并将其存储在内存中，并将需要立即运行的任何内容传递给执行引擎。随着事物的运行和添加，它会尝试尽可能地简化事物。

因此，对于延迟的代码（例如稍后调用的函数），块的数量根本无关紧要。JIT 编译器将创建忽略块结构的内存优化代码。对于遇到时立即运行的内联代码来说，这并不重要，因为与脚本引擎相关的解析器是如此之快，以至于您在任何合理的情况下都无法看到差异。

也就是说，您可能能够构建一个*可能*显示出差异的测试用例。但我怀疑你需要进入数千（或数万）块范围才能看到可测量的差异。到那时，其他变量——比如文件大小（每个新的脚本块会在文件大小上增加大约 40 个字节）和渲染时间——将产生巨大的影响，因此您实际上可能永远看不到差异。

底线：编写干净的、文档化的、逻辑的代码，忘记下面的编译器。这将为您节省实际的时间和金钱，而不是给您带来微不足道的、不明显的性能提升。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T01:27:00.393

我猜单个连体内联脚本稍微快一些

# objective-c - 为什么这个 UIButton / IBAction 不刷新我的页面？

> ID：12700560
> 
> 赞同：2
> 
> 时间：2012-10-03T00:56:15.023
> 
> 标签：objective-c, ios, json, ios5, uibutton

当我加载我的主视图时，它会自动加载带有博客文章的 JSON 提要。

我的主视图顶部栏上有一个刷新按钮。我已经成功地将它连接到一个`IBAction`，当点击时，我可以输出一个字符串来记录。

当我单击刷新按钮时，我试图让我的视图重新加载 JSON 提要，但这不起作用。

我究竟做错了什么？

**我的 ViewController.h**

```
#import <UIKit/UIKit.h>

@interface ViewController : UICollectionViewController {
    NSArray *posts;
}

- (void)fetchPosts;

- (IBAction)refresh:(id)sender;
@end 
```

**我的 ViewController.m**

```
...

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self fetchPosts];
}

- (IBAction)refresh:(id)sender {

    [self fetchPosts];
}

- (void)fetchPosts
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString: @"http://website.com/app/"]];

        NSError* error;

        posts = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.collectionView reloadData];
        });
    });
}
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:50:22.020

帖子没有像您期望的那样更新，因为它是在异步块内捕获的。如果我没记错的话，实例变量一旦传递到块中就会被复制，因此对它们的更改不会反映在异步块之外，除非它们具有`__block`修饰符。

试试这个，

```
- (void)fetchPosts
{
    __block NSArray *blockPosts = posts;
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString: @"http://website.com/app/"]];

        NSError* error;

        blockPosts = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.collectionView reloadData];
        });
    });
} 
```

# php - 将字符串与php中textarea中的一行文本进行比较

> ID：12700562
> 
> 赞同：1
> 
> 时间：2012-10-03T00:57:11.530
> 
> 标签：php, linux

从主题本身来看，我需要将一个字符串与文本区域内的一行文本进行比较。

这是我从我的 linux 服务器的 php 得到的输出，我有一个程序可以打印可用的设备，我把它放在一个 textarea 中。

```
Device --------------      |        NAme       ------------------- |        Status  

/dev/ttyS0-----------| Profilic |-------------------|Available

/dev/ttyUSB0 -------| Test | ---------------------|Busy 
```

现在我有一系列设备..

```
$devices = array("/dev/ttyS0", "/dev/ttyUSB0", "/dev/ttyUSB1"); 
```

现在，如果 textarea 中存在以下设备，我如何比较我的字符串数组？

假设如果`/dev/ttyS0`在 textarea 中找到，则返回 true，因为我的字符串数组中有 /dev/ttyS0。

示例代码我如何从 linux 获取输出到 php。

```
echo "<textarea>";   
echo stream_get_contents($pipes[1]); 
echo "</textarea>"; 
```

我想要发生的事情。（样机代码）

```
if(/dev/ttyS0 == in the textarea){
  enable this part of code
}

if(/dev/ttyUSB0 == in the textarea){
  enable this part of code
}

and so on.... 
```

我怎样才能做到这一点？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:15:23.450

假设您的设备描述符应按上述格式出现在 textarea 中的行首，您可以遍历这些行并查找`strpos($line, $device) === 0`.

```
$lines = explode("\n", $teextarea_content);
// loop over array of device descriptors
// and make an array of those found in the textarea
$found_devices = array();
foreach ($devices as $device) {
  // Iterate over lines in the textarea
  foreach ($lines as $line) {
    if (strpos($line, $device) === 0) {
      // And add the device to your array if found, then break
      // out of the inner loop
      $found_devices[] = $device;
      break;
    }
  } 
}
// These are the devices you found...
var_dump($found_devices);

// Finally, enable your blocks.
if (in_array("/dev/ttyUSB0", $found_devices)) {
   // enable for /dev/ttyUSB0
}
// do the same for your other devices as necessary

// OR... You could use a fancy switch in a loop to act on each of the found devices
// Useful if two or more of them require the same action.
foreach ($found_devices as $fd) {
  switch($fd) {
    case '/dev/ttyUSB0':
      // stuff for this device
      break;
    case '/dev/ttyS0':
      // stuff for this device
      break;
    // These two need the same action so use a fallthrough
    case '/dev/ttyS1':
    case '/dev/ttyS2':
      // Stuff for these two...
      break;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:14:57.647

您很可能希望使用 AJAX 来执行此操作... JQuery 使 AJAX 变得非常简单。

但是您的 PHP 会希望看起来像...

```
<?php
// Already assuming you have filled out your array with devices...
$dev = $_POST["device"];

// This will loop through all of your devices and check if one matched the input.
foreach($devices as $device) {
    if ($device == $dev) {
        // Whatever you want to do if the device matches.
    }
}
?> 
```

干杯

# c++ - C++ 中的字符串生产者/消费者：std::deque 还是 std::stringstream？

> ID：12700563
> 
> 赞同：2
> 
> 时间：2012-10-03T00:57:23.567
> 
> 标签：c++, performance, stream, queue, standard-library

在我们的应用程序中，我们有一个生成字符的类，还有一个使用它们的类。当前的实现在字符产生时动态分配字符（使用`new`）并在使用时删除它们（使用`delete`）。这一切都非常缓慢，我正在寻找替换该实现以提高其性能的方法。

我需要的语义是标准类的语义`queue`：在前面推，在后面弹出。默认实现使用`deque`IIRC。`deque`通常使用“块”或“块”内存来实现，因此我希望对 OS 内存分配器的调用要少得多，并且可以显着加快速度，而几乎没有额外的内存使用。

但是，由于排队的数据是字符（可能是宽字符），因此另一种方法是使用标准输入/输出流类，即字符流`stringstream`。AFAIK，他们的行为也像队列一样。

有没有更好的先验选择？这两个类会有相似的分配模式吗？我可以尝试衡量两者的性能，但也许这并不重要，任何一个都足够好。在这种情况下，哪个最容易/最安全？

次要问题是生产者和消费者之间的并发性。我可以限制访问是顺序的（在同一个线程上），但是线程安全的实现可能对当前的多核硬件在性能方面是有益的。

在我深入研究并开始编码之前，感谢您的智慧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:28:56.123

很多年前我读过这篇文章（我想，没有再读过它），当时他们实际上曾经在他们破产前开始向我索要愚蠢的钱之前把杂志寄给我:-)。

这可能会有所帮助

[http://www.drdobbs.com/parallel/lock-free-queues/208801974](http://www.drdobbs.com/parallel/lock-free-queues/208801974)

作为旁注，我在处理金融数据的实时系统上工作——我们通常使用固定长度的队列，如果消费者无法处理它，就会丢弃不适合队列的数据——旧数据比丢失的数据更糟糕。当然，您的要求可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:40:22.693

`std::stringstream`不是队列，因为读取字符不会消耗它们。您可以简单地`seekg(0)`重新阅读相同的字符。因此，你写的越多，你消耗的内存就越多。

坚持`std::queue`。作为底层实现的默认选择`std::deque`几乎肯定是正确的选择。

关于并发性，`std::queue`当任何其他线程正在读取或写入它时写入绝对是不安全的。如果您想要一个有效的阻塞队列实现，您将不得不编写或借用一个专门为此目的构建的。

# python - Python：如何跟踪对象是否仍在“使用”中？

> ID：12700574
> 
> 赞同：2
> 
> 时间：2012-10-03T00:58:15.703
> 
> 标签：python

我有一个文本编辑程序，可以将光标分配给程序中需要它的其他部分。光标由两部分列表组成，`[start, end]`每次插入/删除文本时都需要更新（开始/结束索引向前或向后移动）。

当不再使用游标时，我想停止更新它，因为有很多而且更新很耗时。不用，我的意思是请求它的对象不再引用它——它不再关心它。（例如：它有一个光标列表到所有搜索结果中的单词“bob”，并且对单词“fred”进行了新的搜索，所以现在它用一个新的光标列表替换了它的结果列表.. . 旧列表及其游标不再使用。）

我可以要求任何使用游标的对象在`.finished()`不再需要时调用一个方法。但如果我能检测到它何时不再被编辑器之外的任何东西引用，那会更容易。如何在 python 中检查这个（我知道垃圾清理维护一个列表，并在不再引用时将其删除）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T01:09:23.087

使用模块中的*弱引用*来`weakref`保存光标引用。

当弱引用的引用不再有任何强（正常）引用时，弱引用将解析为`None`.

```
>>> import weakref
>>> class Cursor: pass
... 
>>> _ = None # suppress special _ variable
>>> a = Cursor()
>>> r = weakref.ref(a)
>>> print r()
<__main__.Cursor instance at 0x1004a2bd8>
>>> del a
>>> print r()
None 
```

您可以将所有这些弱引用放在一个集合中（或使用`WeakKeyDictionary`、`WeakValueDictionary`或`WeakSet`）来跟踪您必须更新的各种游标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T01:12:00.557

除了@nneonneo 所说的，您应该定期扫描您的光标弱引用列表并剔除`None`s 否则您最终会得到一个不断增长的`None`s列表

# git - git 多仓库管理

> ID：12700575
> 
> 赞同：5
> 
> 时间：2012-10-03T00:58:24.043
> 
> 标签：git, project-management, git-svn

我正在做一个项目，我们用 git 管理外部库/头文件和 qa。以下是每个开发人员的目录结构：

```
~/dev/proj 
~/dev/ext 
~/dev/qa 
```

proj、ext 和 qa 是*不同*的git 存储库。在 svn 下，这些目录的同步很简单：~/dev 下的单个更新将递归地更新所有这些目录。使用 git，我们需要为每个目录分别执行“git pull”。这不好；有人总是会忘记更新（git pull）这些目录之一，他的项目将不同步（例如，新的 qa 不会与旧代码一起通过）。我查看了“git submodules”，它没有为“git pull”提供一个点来同时更新这三个单独的模块[更正：我在这里错了，但请阅读[下面的答案]](https://stackoverflow.com/a/12715654/281545)。

您可能会争辩说我们应该将 proj、ext 和 qa 放在同一个 git 存储库下，但我认为这违反了 git 将不同概念保存在不同存储库中的哲学。

有没有人有解决这个琐碎问题的方法（除了编写脚本对 ~/dev 下的每个目录执行 git pull ）？

谢谢，

阿尔坦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T01:02:16.100

我的理念是：如果我总是需要将 X 和 Y 放在一起，那么从逻辑上讲，它们属于同一个存储库。仅当存在适当的隔离时，使用子模块才有意义 - 想想外部供应商库，您不希望随意引入更新并且您不希望您的团队能够直接编辑它们 - 这是有道理的。但是，无论您如何切片，它都会增加步骤。我坚持“如果它是一个项目，就把它放在一个存储库中”，不管我在理论上如何将它分解为更“类似于 git”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T05:40:34.213

博士先生，

您正在将苹果与橙子进行比较。git-submodules 类似于[svn:externals](http://svnbook.red-bean.com/en/1.0/ch07s03.html)，又名 svn-submodules。事实上，当您使用`-r`svn 附加特定版本的 svn 子模块时，行为几乎相同。要使用 svn-submodules 提交，您必须分别在每个子模块目录中提交，就像使用 git-submodules 一样。

但是有一个很大的不同：大多数开发人员，至少在开发的某个阶段，更喜欢附加到每个子模块的*分支*，这是 git-submodules 不支持的。这对协调发展很有用。（Google 的**Repo工具是****Git**的一个包装器，旨在与**Gerrit**（一种代码审查工具）一起使用，有点类似。但相信我：远离**Repo**。它解决了一个不同的问题。）最大的缺点是你无法恢复代码库的精确轮廓。暂时看起来还不错，但我听说过令人讨厌的战争故事。

您的替代方案不是**Subversion**，而只是一个单一的存储库，可以在**Git**、**Subversion**或其他任何地方。但是您实际上想要单个回购和多个回购的组合，对吗？你想要每个人的好处。所以你需要一个更复杂的解决方案。

一种想法是拥有一个项目存储库，您可以在其中进行大部分开发，加上几个单独的存储库，您可以从中分发模块：

```
proj/.git
proj/subA
proj/subB
subA/.git
subB/.git 
```

您可以使用**rsync**在它们之间移动代码。美妙之处在于您在开发和分发之间做出了鲜明的区分。您可以正常开发大型项目，包括分支、合并等。当您准备将子目录作为库分发时，您可以准确确定所需的库版本，并将其复制到自己的存储库中。当您需要合并而不只是复制时，可以使用[*git subtree merge strategy*](http://www.kernel.org/pub/software/scm/git/docs/howto/using-merge-subtree.html)。

还有另一个系统，建立在子树合并策略之上。它被称为[git-subtrees](https://github.com/apenwarr/git-subtree/blob/master/git-subtree.txt)，它是 git-1.7.11 的一部分。[这](http://psionides.eu/2010/02/04/sharing-code-between-projects-with-git-subtree/)是对其操作的一个很好的描述。您可以从图片中看到它的时间线看起来很混乱，但从功能上讲，它正是您想要的。[这](http://log.pardus.de/2012/08/modular-git-with-git-subtree.html)是最近的一篇文章，提供了很好的建议。

如果您不介意 git-submodules 的额外“更新”步骤，但您对它如何处理冲突感到不安，您可以尝试[giternal](https://github.com/patmaddox/giternal)。作者包含了一个脚本来显示它的行为与 git-submodules 和[braid](https://github.com/evilchelu/braid/wiki)的比较（用于出售子模块，但不合并它们）。

就个人而言，我喜欢[git-slave](http://gitslave.sourceforge.net/)，它是一个简单的 git 包装器。基本上，它将您的`gits`命令作为`git`命令应用于您的所有存储库。这真的只是一种方便。它很容易理解，对单个 repos 的影响为零，并且非常适合分支切换（git-subtrees 尚不支持）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T01:01:30.510

您仍然可以使用子模块。

`git submodule update`

将一次性更新所有子模块。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T19:40:48.957

我们尝试了“git submodule”，但并不令人满意。似乎 git submodule 是为变化不大的模块设计的。以下是对任何模块进行更改和推送更改的步骤：

```
cd ~/dev/proj
git checkout master
git pull
... make changes to your files ...
git commit -a -m "comment"
git push
cd ..   
git commit -a -m "comment"
git push 
```

这必须对 ~/dev 下的每个模块重复。对不起，但我觉得这很荒谬。在svn中，同样的事情是通过

```
cd ~/dev
svn commit -m "done in one line" 
```

我理解 git 优于 svn 的好处，但是缺乏适当的子模块支持和缺乏良好的大文件支持可能会让我们从 git 切换到 svn（除非我们在这里找到解决方案 --- 我宁愿留在 git 上） . 老实说，我很惊讶这根本没有出现在 git 中。不同的项目一直共享公共模块 [即实时]。

我反对将 proj、ext 和 qa 放在同一个存储库下，因为

*   ext 将与其他项目（存储库）共享
*   qa 应该能够在没有代码的情况下被检出（克隆）

阿尔坦

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-13T18:39:04.233

使用 git-repo

[https://github.com/android/tools_repo](https://github.com/android/tools_repo) [http://source.android.com/source/using-repo.html](http://source.android.com/source/using-repo.html)

android 开发者使用它来管理多个存储库

看

[https://github.com/android/tools_repo/blob/master/docs/manifest_xml.txt](https://github.com/android/tools_repo/blob/master/docs/manifest_xml.txt)

和 android repo 清单存储库

[https://android.googlesource.com/platform/manifest/+/master](https://android.googlesource.com/platform/manifest/+/master)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-07T18:14:08.730

git-multi 就是答案。[https://github.com/grahamc/git-multi](https://github.com/grahamc/git-multi)

有 git-multi 设置，并在 '~/dev' 文件夹下克隆你需要的所有 repos。

并从 '~/dev' 运行“git multi pull”或“git multi status”等命令，实习生在所有子仓库中运行相应的命令。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-11T17:41:09.057

我遇到了同样的问题并编写了一个程序（bash脚本）来做到这一点：[`gws`](https://github.com/StreakyCobra/gws)

大致思路如下：

1.  在以下位置创建项目路径和 url 列表`dev/.projects.gws`：

    ```
    work/proj  | https://...
    perso/ext  | git@github.com:...
    perso/qa   | https://... 
    ```

2.  使用以下`gws`命令之一：
    *   **init**：用于`.projects.gws`从当前文件夹树中的现有存储库自动创建文件。
    *   **更新**：克隆缺少的本地存储库，例如当一个项目添加到`.projects.gws`.
    *   **status**：显示所有存储库的状态（干净，未跟踪的文件，未提交的更改，...）。
    *   **fetch**：在所有存储库中执行 git fetch （如果在两者之间进行了修改， **status**将能够检测与原始存储库的差异）。
    *   **ff**：在所有存储库中执行 git 快进拉取
    *   **check**：验证工作空间的状态（工作空间中已知、未知、缺失的存储库）

然后`.projects.gws`可以使用 git 对文件进行版本控制，并在许多计算机（工作、家庭、笔记本电脑......）上使用。也可以编写一个`.ignore.gws`文件以使用正则表达式在本地忽略某些路径，例如忽略家庭计算机上`work/`文件夹中的存储库。`^work/.*`

有关详细信息，请参阅[自述文件](https://github.com/StreakyCobra/gws/blob/master/README.md)。

我每天都使用它，它适合我的需要（也许你的也一样）。请注意，我计划在有时间的时候用 Python 重写它（使用另一个名称）。原因是代码开始难以在 bash 中管理，我想添加更多功能（例如添加对 mercurial、darcs 的支持...）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-06T13:11:24.847

我编写了一个名为[gita](https://github.com/nosarthur/gita)的命令行工具来管理多个 repos。它并排显示已注册 repos 的状态，并从任何工作目录委托 git 命令/别名。例如

[![在此处输入图像描述](../Images/ccecbc685afef1665520552097ac6f54.png)](https://github.com/nosarthur/gita/raw/master/doc/screenshot.png)

颜色和额外符号显示本地/远程关系和编辑状态。

如果您有许多存储库，您可以将它们分组到不同的组中并在组上操作，或者为组设置上下文。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-03T05:30:26.127

恕我直言，子模块是去这里的方式。

与其问你是否总是需要 X 和 Y 一起使用，不如问自己是否总是希望*完全相同版本*的 X 和 Y 一起使用。

Git 子模块为您提供了这个非常强大的工具，可以快速修复 X ​​中的错误，而无需同时更新 Y。

例如，如果您正在开发在不同操作系统（例如 Mac OS X 和 Windows）上运行的产品，那么将操作系统特定的代码分成单独的子模块可能是有意义的。如果不同的人在这些不同的操作系统端口上工作，则尤其如此。使用 git 子模块，您可以轻松地将一个操作系统的修复程序部署给您的客户，而无需在另一个操作系统上进行 QA 流程。

另一个非常强大的用例是“工作区”模块。您只需一些本地模块（例如`/Workspace`），然后添加您正在使用的所有依赖项。

git submodules 的伟大之处在于它不仅记录了您使用的模块，还记录了它们的具体修订。在修复错误时，我经常需要测试某些依赖项的特定版本 - git 子模块让我可以轻松地将这些记录在我的工作区模块的历史记录中，让我可以在以后轻松地回到那个确切的状态。

# java - Android 动画，一个简单的线性插值器

> ID：12700579
> 
> 赞同：1
> 
> 时间：2012-10-03T00:58:46.487
> 
> 标签：java, android, android-layout, animation

我想为一个列表设置动画，它将隐藏在屏幕下方，bottomMargin 是一个负值，然后当我单击一个按钮时，我对其进行动画处理，然后在动画完成后“onAnimationEnd”我修改边距以使其停止在动画结束的地方。

动画下来时效果很好，进入-ve后我看不到任何东西

但是在动画中，它比它有更多，并且修改边距，产生不好的效果“因为它没有停止它必须的地方”这就是我正在做的

动画下来：

```
<?xml version="1.0" encoding="utf-8"?>
<set 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator">
    <!-- same animation, linear interpolator -->
    <translate xmlns:android="http://schemas.android.com/apk/res/android"
        android:toYDelta="25%p"
        android:duration="500"
     />
</set> 
```

动画向上：

```
<?xml version="1.0" encoding="utf-8"?>
<set 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator">
    <!-- same animation, linear interpolator -->
    <translate xmlns:android="http://schemas.android.com/apk/res/android"
        android:toYDelta="-25%p"
        android:duration="500"
     />
</set> 
```

代码在 onAnimationEnd 中运行：

```
MarginLayoutParams params = (MarginLayoutParams) playerLayout.getLayoutParams();
if (params.bottomMargin == 0) {
params.setMargins(0, 0, 0, playerLayout.getHeight()* -1);
} else {
params.setMargins(0, 0, 0, 0);
}
playerLayout.setLayoutParams(params); 
```

怎么了！！！在animation up中，动画区域开始正常出现，然后突然比正常位置快速上升，然后修改margin使其突然重新定位到正常位置。

这里是显示问题的视频的链接[https://dl.dropbox.com/u/51616029/irrelevant/20121005323.mp4](https://dl.dropbox.com/u/51616029/irrelevant/20121005323.mp4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:44:01.070

尝试将`View`要设置动画的对象放在布局中的最终位置，然后将其初始可见性设置为不可见（在带有 的 xml`android:visibility="invisible"`或带有 的代码中`setVisibility(INVISIBLE)`）。当您准备好为视图设置动画时，只需在启动动画时使视图可见。

```
onStartAnimation(Animation animation) {
    myView.setVisible(VISIBLE);
} 
```

你的动画可能只是

```
<?xml version="1.0" encoding="utf-8"?>   
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:fromYDelta="-100%p"
    android:toYDelta="0"
    android:duration="500"   
 /> 
```

这样，您根本不必担心进行复杂的布局更改。

# mysql - 使用 Hive 进行实时查询

> ID：12700582
> 
> 赞同：5
> 
> 时间：2012-10-03T00:58:59.923
> 
> 标签：mysql, hadoop, mapreduce, hive, bigdata

首先，我想澄清一下我正在学习 Hive 和 Hadoop（以及一般的大数据），所以请原谅缺乏适当的词汇。

我正在着手进行一个巨大的（至少对我而言）项目，该项目需要处理大量数据，这些数据我过去不习惯处理，因为我一直主要使用 MySQL。

对于这个项目，一系列传感器将每小时 5 次（每天 15.000.000.000 个）产生大约 125.000.000 个数据点，这是我插入到每个 MySQL 表中的所有数据加起来的几倍。

我知道一种方法是使用 Hadoop MapReduce 和 Hive 来查询和分析数据。

我面临的问题是，据我所知，我理解 Hive 的运行主要类似于“cron 作业”，而不是实时查询，这可能需要数小时并需要不同的基础架构。

我想根据 Hive 查询的结果创建 MySQL 表，因为最多需要实时查询的数据大约是 1.000.000.000 行，但我想知道这是否是正确的方法，或者我应该研究其他一些技术。

有没有我应该研究专门为大数据实时查询而创建的技术？

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T01:25:04.763

这是一个复杂的问题。让我们从解决您在问题中提到的技术开始，然后从那里开始：

1.  MySQL：任何使用过 MySQL（或任何其他关系数据库）的人都应该清楚，传统的开箱即用 MySQL 安装永远不会支持您所说的卷。信封背面的计算足以告诉我们 - 假设您的传感器插入只有 100 字节，那么您说的是每天 150 亿 x 100 字节 = 1.5 万亿字节或 1.396 TB。这是真正的大数据，特别是如果您计划将其存储一两天以上。

2.  Hive：Hive 确实可以处理这种数据量（我和许多其他人都做过），但是正如您所指出的，您无法获得实时查询。每个查询都将成批进行，如果您需要快速查询，则需要预先聚合数据。

现在这给我们带来了真正的问题——你需要运行什么样的查询？如果您需要运行任意的实时查询并且永远无法预测这些查询可能是什么，那么您可能需要寻找相对昂贵的专有数据存储，如 Vertica、Greenplum、Microsoft PDW 等。这些将花费很多钱，但他们和其他人可以处理你所说的负担。

另一方面，如果您可以在一定程度上准确地预测将要运行的查询类型，那么像 Hive 这样的东西可能是有意义的。将原始数据存储在那里，并使用批量查询功能来完成繁重的工作，并定期在 MySQL 或其他关系数据库中创建聚合数据表，以支持您对低延迟查询的需求。

另一种选择是 HBase 之类的。HBase 为您提供了对分布式数据的低延迟访问，但是您丢失了两个您可能已经习惯的关键项目 - 查询语言（HBase 没有 SQL）和聚合数据的能力。要在 HBase 中进行聚合，您需要运行 MapReduce 作业，尽管该作业可以将其结果存储回 HBase 以再次进行低延迟访问。

# c - 在 C 中使用 execve 调用 mkdir 系统调用

> ID：12700586
> 
> 赞同：3
> 
> 时间：2012-10-03T00:59:27.007
> 
> 标签：c, shell, exec

我对 C 非常陌生，并且在一个操作系统类中，我需要用 C 编写一个基本的 shell（是的）。它实际上已经完成了一半，我只是想在完成工作的同时学习 C 基础知识。

我正在尝试在分叉后使用 exec 并暂时调用 mkdir。争论需要通过我一点点，但我一直试图弄清楚，并希望有人能告诉我哪里出错了。

```
 } else {
            //fork exec
            int pid = fork();
            if (pid == 0) {
                printf("%s",my_argv[0]);
                execve("/bin/mkdir",my_argv,0);
            } else wait(NULL);
        } 
```

这是我响应 mkdir 调用的部分。现在，我有一个 line[] 是用户输入的，该命令采用

```
command = strtok(line, DELIMITERS); 
```

参数是：

```
arg = strtok(0,DELIMITERS);
        my_argv[0] = arg; 
```

一切都编译得很好，但 mkdir 永远不会工作。打印 my_argv[0] 给出了我期望的正确论点。我敢肯定这是愚蠢的，但任何提示将不胜感激。

所有代码：

```
int main(int argc, char *argv[])
{
char *command;
char line[MAXLINE];
char *arg = NULL;
char *my_argv[]; 

while(1) {
    printf(PROMPT);
    if (fgets(line,MAXLINE,stdin) != NULL) {
        //take out \n
        line[strlen(line)-1] = '\0';
    }
    //looks for first delimiter, saves as the command
    command = strtok(line, DELIMITERS);

    //start looking at what command it is by comparing
    if (strcmp(command,"cd")==0) {
        //if they equal zero, they match
        //this is a cd command, must have following arg
        if (argv[1] == NULL) chdir("/");
        else chdir(argv[1]);//chdir is the system call for cd
    } else if (strcmp(command,"exit")==0) {
        break;
    } else if (strcmp(command,"mkdir")==0){
        arg = strtok(0,DELIMITERS);
        my_argv[0] = arg;
        my_argv[1] = NULL;
        if (!arg) {
            printf("Usage: mkdir missing arg\n");
        } else {
            //fork exec
            int pid = fork();
            if (pid == 0) {
                printf("%s",my_argv[0]);
                //mkdir(arg);
                             execve("/bin/mkdir",my_argv,0);
            } else wait(NULL);
        }
    }

}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T01:04:57.770

*   `argv[0]`包含程序的名称
*   `argv[1]`是第一个参数
*   参数列表必须以 NULL 结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-01T21:52:50.757

您可以使用`mkdir`系统调用而不是`execve`

# android - findViewById 在不同类的静态方法中

> ID：12700588
> 
> 赞同：1
> 
> 时间：2012-10-03T00:59:55.053
> 
> 标签：android, static-methods, findviewbyid

在我的 android 片段中，我对我的应用程序是否在平板电脑上运行进行了以下简单检查（在平板电脑上我打开了 3 个视图，在手机上看不到视图 2 和 3，只看到第一个)

```
boolean mDualPane;
View detailsFrame = getActivity().findViewById(R.id.content1);
mDualPane = detailsFrame != null && detailsFrame.getVisibility() == View.VISIBLE; 
```

这在片段本身中工作正常，但我需要在许多片段中进行完全相同的检查，所以我想在我的“MiscMethods”类中使用它，用于多个类中的常用方法。现在我班上的同一个鳕鱼看起来像这样：

```
public class MiscMethods{    
public static boolean landscapeChecker(){
    boolean mDualPane;
    View detailsFrame = getActivity().findViewById(R.id.content1);
    mDualPane = detailsFrame != null && detailsFrame.getVisibility() == View.VISIBLE;
    return mDualPane;   
}
} 
```

对于 MiscMethods 类型，getActivity（如果我删除了 findViewById）是未定义的。

现在我有一个应用程序类的上下文，像这里

```
public static void ErrorToast(int errorCode) {
    String errorString = null;
    switch (errorCode) {
    case 1:
        errorString = App.getContext().getString(R.string.error_tooManyFieldsEmpty);
        break;
    case 2:
        errorString = App.getContext().getString(R.string.error_featureComingSoon);
        break;
    case 3:
        errorString = App.getContext().getString(R.string.error_SwitchBreak);
        break;
    default:
        errorString="Wrong Error Code";
        break;
    }
    Toast errormsg = Toast.makeText(App.getContext(), errorString, Toast.LENGTH_SHORT);
    errormsg.setGravity(Gravity.CENTER, 0, 0);
    errormsg.show();
} 
```

但是这个 App.getContext() 也无济于事。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T01:07:37.283

看起来您正在寻找一个快速而肮脏的解决方案，所以这里有两个：

*   更改方法签名以将活动作为参数：

    `public static boolean landscapeChecker(Activity activity)`.

    在方法中，使用传入的`activity`代替`getActivity()`. 从您的各种活动中调用它，例如`boolean mDualPane = landscapeChecker(this)`.

*   子类`Activity`化并将方法放在那里。对于此解决方案，您将创建一个类`MyActivity extends Activity`，然后进行各种活动`extend MyActivity`而不是`extend Activity`. 在方法中，使用`this`代替`getActivity()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-28T16:19:19.037

您只需在 oncreate 之前声明 MainActivity 静态元素。在此之后在底部创建一个方法；

```
static TextView textView;

@Override
    protected void onCreate(Bundle savedInstanceState) {
.....................................................

textView = (TextView) findViewById(R.id.texview);
}

public static void upTex(String up) {

        textView.setText(up);
    }

}

//other file class
public class other{

   public void method(){
     upText("jaja");
 } 
```

# ios - 在 Core Data 存储之间切换

> ID：12700590
> 
> 赞同：2
> 
> 时间：2012-10-03T01:00:00.547
> 
> 标签：ios, cocoa, core-data, magicalrecord

我目前正在更新一个应用程序以使用 Core Data。您可以说的应用程序是“数据库查看器”，一次只能查看一个数据库。每个数据库都保存在自己单独的文件夹中。目前，数据被下载并存储为一组 plist 文件。

在新版本中，我需要将这些 plist 数据库转换为 Core Data 存储（每个数据库一个存储。）我已经设置了创建单独存储文件和创建实体的方法。问题是所有实体都保存到我创建的第一个数据库中，而不是“当前”或“最后创建”文件中。

我正在使用的基本过程是：

```
//For each database {
//Create the sqlite file and set up NSManagedObjectContext
[MagicalRecord setupCoreDataStackWithStoreNamed:
    [NSURL fileURLWithPath:
    [NSString stringWithFormat:@"%@/%@/%@.sqlite",
    dirPath, directory, directory]]];
NSManagedObjectContext *managedObjectContext = 
    [NSManagedObjectContext MR_contextForCurrentThread];

//Iterate through all the plist files and create the necessary entities.
//Save new entities to file
[managedObjectContext MR_save];
//Clean up all cashes
[MagicalRecord cleanUp];
} 
```

一个人如何在商店之间正确切换，本质上是“重置”每个切换之间的所有内容。最好（如果可能）使用魔法记录。

编辑：我发现了问题的一部分，并删除了大部分不需要的行为。事实证明，您不能可靠地调用`[MagicalRecord cleanUp]`后台线程。此外，它没有做我认为应该做的事情（见下文）。我最终在每次“保存”后回调主线程以重置核心数据堆栈。这样做会为前三个数据库创建一个新的上下文。之后，它从三个数据库前的数据库中复制上下文。因此，在循环中使用了相同的三个上下文。

这是我目前拥有的；我通过创建一个后台线程来启动该过程并运行代码以在后台创建单个数据库：

```
backgroundQueue = dispatch_queue_create("com.BrandonMcQuilkin.myQueue", NULL);
    dispatch_async(backgroundQueue, ^(void) {
        [self createSQLiteDatabase:updateList];
    }); 
```

然后创建堆栈和数据库：

```
- (void)createSQLiteDatabase:(NSArray *)updateList
{
    NSString *directory = [updateList objectAtIndex:0];
    [MagicalRecord setupCoreDataStackWithStoreNamed:
        [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/%@/%@.sqlite",
        dirPath, directory, directory]]];
    NSManagedObjectContext *managedObjectContext = 
        [NSManagedObjectContext MR_contextForCurrentThread];
    //Check to see if the stack has reset
    NSLog(@"Before:%i", [[Competition MR_findAllInContext:managedObjectContext] count]);

    //Create and add entities to context...

    //Prepare for next loop
    NSLog(@"After:%i", [[Competition MR_findAllInContext:managedObjectContext] count]);
    [managedObjectContext MR_saveNestedContexts];
    [NSManagedObjectContext MR_resetContextForCurrentThread];

    NSMutableArray *temp = [[NSMutableArray alloc] initWithArray:updateList];
    [temp removeObjectAtIndex:0];

    dispatch_async(dispatch_get_main_queue(), ^(void){
        [self shouldContinueUpdating:temp];
    }); 
```

然后重置所有内容并重复所有数据库：

```
- (void)shouldContinueUpdating:(NSArray *)databases
{
    //preform cleanup on main thread and release background thread
    [MagicalRecord cleanUp];
    dispatch_release(backgroundQueue);

    if ([databases count] != 0) {
        backgroundQueue = dispatch_queue_create("com.BrandonMcQuilkin.myQueue", NULL);
        dispatch_async(backgroundQueue, ^(void) {
            [self createSQLiteDatabase:databases];
        });
    }
} 
```

使用两个 NSLog，我在控制台中得到了这个：（使用六个数据库，无论我转换多少个数据库，模式都是相同的。）

```
//First Loop
Before:0
After:308
//Second Loop
Before:0
After:257
//Third Loop
Before:0
After:37
//Fourth Loop
Before:308 
After:541 
//Fifth Loop
Before:257
After:490
//Sixth Loop
Before:37
After:270
... Keep adding to each of the three contexts. 
```

并`[MagicalRecord cleanUp]`没有按照它所说的那样做。这是该方法应该执行的操作。

```
+ (void) cleanUpStack;
{
[NSManagedObjectContext MR_cleanUp];
[NSManagedObjectModel MR_setDefaultManagedObjectModel:nil];
[NSPersistentStoreCoordinator MR_setDefaultStoreCoordinator:nil];
[NSPersistentStore MR_setDefaultPersistentStore:nil];
} 
```

但事实证明，我每次保存时的 NSStoreCoordinator 都是同一个协调器，在同一个内存位置，每个商店都在闲逛。有些东西不正常...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:04:17.130

MagicalRecord 可能不是您完成这项工作的最佳工具...

首先，让我们更正您对 setupCoreDataStackWithStoreNamed: 方法的使用。该参数采用 NSString，不是 URL，也不是文件路径。MagicalRecord 将为您选择正确的路径并在那里创建您的商店。您生成的 sqlite 文件可能会以您想要的路径命名。

接下来，您需要为此文件动态创建 CoreData 模型。这有点困难，但有可能。您需要遍历这些 plist 文件，解释实体、属性和关系，并创建相应的 NSEntityDescriptions、NSAttributeDescriptions 和 NSRelationshipDesctiptions 并“手动”填充 NSManagedObjectModel。你会想寻找方法

```
- [NSManagedObjectModel setEntities:(NSArray *)] 
```

以及 NSEntityDescription、NSAttributeDescription 和 NSRelationshipDescription 的创建方法。

您还需要将此模型保存在某处，这样您就不必每次都重新创建它。幸运的是，它符合 NSCoding，因此您应该能够将其保存到磁盘。

之后，您可能需要填充数据。从这里，MagicalRecord 可以为您提供帮助。我建议查看我为[Cocoa is My Girlfriend撰写的](http://www.cimgf.com)[Importing Data Made Easy](http://www.cimgf.com/2012/05/29/importing-data-made-easy/)博客文章

如果你想“切换存储”，我猜这意味着你想为你拥有的每个 plist 文件创建一个新的存储，那么你将不得不为每个文件拆除整个核心数据堆栈。如果您设法在此项目中使用 MagicalRecord，则需要查看 [MagicalRecord cleanUp]，然后重新开始。如果每个模型都相同，您可以通过发布 Persistent Store Coordinator 并为您的商店创建一个新协调器来解决问题。但是由于您的“模式”可能会有所不同，因此您只想从头开始一切并重新开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:03:18.733

原来我遇到的问题是因为 MagicalRecord 中的一个错误。我在这里提交了一个 git 问题：[https ://github.com/magicalpanda/MagicalRecord/issues/270](https://github.com/magicalpanda/MagicalRecord/issues/270)

# zend-framework2 - ZF2 重定向出控制器

> ID：12700594
> 
> 赞同：1
> 
> 时间：2012-10-03T01:00:30.737
> 
> 标签：zend-framework2

首先，对不起我糟糕的英语。晚安/白天/下午（取决于您所在的位置） 抱歉，如果我问一些可以在这里搜索的内容，我搜索了，甚至找到了，但也许我不明白。我需要在我的控制器中检查身份验证，因此，我实现了一个主控制器并将我所有的真实控制器扩展到它。在我的主控制器中，我检查身份验证并做得很好，但是当我尝试重定向未经身份验证的用户时，它崩溃了！在网上搜索，我意识到“init，preDispatch等”方法甚至不存在更多，只有“construct”方法，所以我尝试了它，但是在construct中没有事件管理器，所以我在这里停止。 ..这是我的代码：

```
public function __construct(){
    $r = new SimpleRouteStack();
    $r->addRoute('logoff', Literal::factory(array(
                                                'route'=>'/suporte/logoff',
                                                'defaults' => array(
                                                    'action'     => 'logoff',
                                                  'controller' => 'Suporte\Controller\Index',
                                                )
                                        )
                            )
    );
    $e = new MvcEvent();
    $e->setRouter($r);
    $this->setEvent($e);
    $this->getEvent()->setResponse(new Response());
    $this->getEventManager()->attach('*',array($this,'mvcPreDispatch'),100);

public function mvcPreDispatch(){
    $uri = explode('/',substr($_SERVER['REQUEST_URI'],1));
    $uri[2] = !isset($uri[2]) ? "index" : $uri[2];
    $auth = new AuthenticationService();
    $identity = $auth->getStorage()->read();
    $acl = $identity[2];

    if (!$auth->hasIdentity()){                                     
        $this->redirect()->toRoute('suporte/logoff');
    }elseif (   !$acl->hasResource($uri[0].'/'.$uri[1])             
                                        ||                          
                !$acl->isAllowed($identity[1],                      
                                $uri[0].'/'.$uri[1],                
                                $uri[2]                             
                            ) 
            )
                $this->redirect()->toRoute('logoff');
        else{
            /* $this->layout()->id = $identity[0]->getId();
            $this->layout()->nome = $identity[0]->getNome();
            $this->layout()->cargo = $identity[0]->getCargo(); */
            echo "permitido";
            //$this->layout()->recursos = $this->acl->getResources();
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:11:26.000

您是否`Suporte\Controller\logoff`也在扩展大师班。如果是，那么它将导致无限循环`indexController>masterController(!loggedin)>logoutController>masterController(!loggedin)>logoutController>..`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:47:19.053

我以前怎么说“这就是巫术”！！！当我今天醒来时，打开我的电脑，测试控制器和 BAZINGA ！！！运行正常...为什么？我不敢质疑......我的代码是：

```
abstract class PadraoControllerSuporte extends AbstractActionController{
public function setEventManager(EventManagerInterface $events){
parent::setEventManager($events);
$controller = $this;
$events->attach('dispatch', function ($e) use ($controller) {
    if (is_callable(array($controller, 'verificaAuth'))){
        call_user_func(array($controller, 'verificaAuth'));
    }
}, 100); 
```

}

```
public function verificaAuth(){
    $uri = explode('/',substr($_SERVER['REQUEST_URI'],1));
    $uri[2] = !isset($uri[2]) ? "index" : $uri[2];
    $auth = new AuthenticationService();
    $identity = $auth->getStorage()->read();
    $acl = $identity[2];
    if (!$auth->hasIdentity())                                      
        $this->redirect()->toRoute('suporte/logoff');
    elseif (    !$acl->hasResource($uri[0].'/'.$uri[1])                                 !$acl->isAllowed(   $identity[1],
                                    $uri[0].'/'.$uri[1],            
                                    $uri[2]                         
                                ) 
            )
                $this->redirect()->toRoute('logoff');
        else{
            /* $this->layout()->id = $identity[0]->getId();
            $this->layout()->nome = $identity[0]->getNome();
            $this->layout()->cargo = $identity[0]->getCargo(); */
            echo "permitido";
            //$this->layout()->recursos = $this->acl->getResources();
        }
} 
```

我的理解：我认为“setEventManager”是叠加的，所以它设置为监听“dispatch”事件并调用我的 verificaAuth 函数重定向（如果未经过身份验证）以注销或允许它经过身份验证。希望这是有用的......谢谢大家！

# javascript - Javascript对象声明问题

> ID：12700598
> 
> 赞同：0
> 
> 时间：2012-10-03T01:01:12.273
> 
> 标签：javascript, oop

我是第一次挖掘 OOP，但我遇到了一个小问题：

```
var panel = {    
    img : imgs[24],
    prop : this.img.height / this.img.width,

    h : this.img.height - (scale),
    w : h/prop,

    x : center.x - (w / 2),
    y : center.y - (h / 2)    
}

panel.draw = function(){    
   g.ctx.drawImage(this.img,
      0, 0,
      this.img.width, this.img.height,
      this.x, this.y,
      this.w, this.h)
} 
```

但它看起来像`this.img.height`在`typeError`. 有人可以解释为什么吗？

另外，如何*在*对象声明中声明方法？没什么特别的：我只是不想让我的代码看起来太乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:25:11.893

您的对象在名称面板上总是静态的吗？然后

```
var panel = {};
panel.img = imgs[24];
panel.prop = panel.img.height / panel.img.width;
... 
```

它不是静态的，但您不想要它的实例吗？然后做一个初始化函数来得到正确的`this`

```
var panel = {   // assuming "scale" and "center" in scope
        init : function(){
            this.img = imgs[24];
            this.prop = this.img.height / this.img.width;
            this.h = this.img.height - (scale);
            this.w = this.h / this.prop;
            this.x = center.x - (this.w / 2);
            this.y = center.y - (this.h / 2);
        }
};
panel.init();
... 
```

你想拥有对象的多个实例吗？然后做一个*构造函数*

```
function Panel (img) { // assuming "scale" and "center" in scope
    this.img = img;
    this.prop = img.height / img.width;
    this.h = img.height - (scale);
    this.w = this.h / this.prop;
    this.x = center.x - (this.w / 2);
    this.y = center.y - (this.h / 2);
}
Panel..draw = function(){
... 
```

并与`var panel = new Panel( imgs[24] );`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:09:26.027

即使您认为您没有这样做，您也指的是不同的对象。因此，在您的示例中，第三行`this`是指当前范围，而不是您正在创建的对象面板。这样做`img`和`h`

```
var panel = {    
    img : imgs[24],
    prop : this.img.height / this.img.width, // this != panel here

    h : this.img.height - (scale), // this.img != panel.img
    w : h/prop, // h != panel.h

    x : center.x - (w / 2), // w != panel.w
    y : center.y - (h / 2)  // h != panel.h  
}

panel.draw = function(){    
   g.ctx.drawImage(this.img,
      0, 0,
      this.img.width, this.img.height,
      this.x, this.y,
      this.w, this.h)
} 
```

应该是这样的

```
var Panel = (function() {    
    function Panel(img, scale, center) {  
       this.img = img
       this.prop = img.height / img.width
       this.h = img.height - scale
       this.w = this.h/this.prop
       this.x = center.x - (this.w / 2),
       this.y = center.y - (this.h / 2)
    }
    Panel.prototype.draw = function(ctx) {
          ctx.drawImage(this.img, 0, 0,
          this.img.width, this.img.height,
          this.x, this.y,this.w, this.h)
    }          
})():

var panel = new Panel(imgs[24], scale, center);
panel.draw(g.ctx); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T01:14:01.727

这是因为在使用*对象字面*量语法`this`时，将永远不会引用您正在创建的对象。

 *它是对外部变量范围的引用。要使用文字语法，您需要创建不需要自引用的部分，然后在初始化后创建 rest。

```
var panel = {    
    img : imgs[24],

    w : h/prop,

    x : center.x - (w / 2),
    y : center.y - (h / 2)    
};
panel.prop = panel.img.height / panel.img.width;
panel.h = panel.img.height - scale; 
```

我不知道你的`h`和`prop`变量应该指的是什么。

如果您希望它们引用对象的成员，那么您也需要将它们取出。而这个`center`变量似乎无处不在。

似乎您只是在猜测 JavaScript 语法的工作原理。如果是这样，那是一个很难学习的方法。在您继续之前，我会推荐一个基本教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T01:25:38.613

`this`指的`panel`是声明的上下文，而不是面板对象本身。一些解决方法：

缓存引用的对象：

```
var img = imgs[24];
var panel = {
    img: img
  , height: img.height - scale
  , //... 
```

创建一个空白面板对象，并一一添加属性：

```
var panel = {};
panel.img = imgs[24]
panel.height = panel.img - scale; 
```

方法可以像任何其他属性一样声明。

```
var panel = {
    img: imgs[24]
  , draw: function(){ g.ctx.drawImage(this.img, 0, 0) }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T01:13:53.547

Panel 对象没有 panel.img.height 属性。

```
var panel = {    
    img :
        { height: // stuff here
        }
    prop : this.img.height / this.img.width,

    h : this.img.height - (scale),
    w : h/prop,

    x : center.x - (w / 2),
    y : center.y - (h / 2)    
} 
```*

# java - 重新部署应用程序时创建的新日志和锁定文件

> ID：12700606
> 
> 赞同：2
> 
> 时间：2012-10-03T01:01:58.017
> 
> 标签：java, jsf, logging

我正在登录 JSF 和 ejb 环境，每次重新部署我的应用程序时，.lck 文件都不会被删除，并且会创建一个新的日志（和锁定）文件（logfilename.log.2、logfilename.log.3 ...)

这就是我获取日志并在 JSF 托管 bean 中添加文件处理程序的方式：

```
static {
  // (...)
  logger = Logger.getLogger("registrations");
  FileHandler fh;
  try {
    // (...)
    fh = new FileHandler(registerLogPath, true);
    fh.setFormatter(new Formatter() {

      @Override
      public String format(LogRecord record) {
        return ...
      }  
    });
    logger.addHandler(fh);
  } catch (IOException | SecurityException ex) {
    logger.log(Level.SEVERE, null, ex);
  }
} 
```

我试图删除`contextDestroyed`方法中的处理程序`ServletContextListener`，但似乎为时已晚，因为`Logger.getLogger("registrations").getHandlers()`返回一个空数组，所以没有什么可删除的。

你能帮我如何让记录器在重新部署之前使用它使用的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T02:34:57.457

我终于设法解决了这个问题。删除处理程序是不够的，您必须调用`close()`处理程序本身。此外，`logger.getHandlers()`在一种`contextDestroyed`方法中工作：

```
for (Handler h : logger.getHandlers()) {
  h.close();
} 
```

# java - 在允许可见光标移动的同时禁用 JTextPane 中的编辑

> ID：12700607
> 
> 赞同：4
> 
> 时间：2012-10-03T01:02:06.973
> 
> 标签：java, swing, jtextpane

我有一个`JTextPane`通过从文件中读取来填充的内容，之后对数据进行解析和格式化。不允许用户编辑`JTextPane`，但我希望他们能够使用可见光标在其中导航。

如果我使用`setEditable(false)`，则光标是不可见的，尽管可以通过按住***Shift***并使用箭头键选择文本块来间接观察不可见光标的位置。

为了在不允许编辑的同时启用可见光标，`setEditable(false)`我创建了一个对它的 、 和方法什么都不做的虚拟对象，而`DocumentFilter`不是。但是随后我必须换入常规过滤器，以便以编程方式从文件中填充，然后在将控制权返回给用户之前将虚拟过滤器放回原处。`insertString()``remove()``replace()``JTextPane`

到目前为止，这似乎可行，但有没有更简单的解决方案？如果我保持原样，是否有任何击键或鼠标活动序列可以以某种方式允许用户编辑文本窗格，因为它在技术上是可编辑的`setEditable`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T02:00:49.753

```
textPane.addFocusListener(new FocusListener() {

        @Override
        public void focusLost(FocusEvent e) {
            textPane.setEditable(true);

        }

        @Override
        public void focusGained(FocusEvent e) {
            textPane.setEditable(false);

        }
    }); 
```

又一个肮脏的黑客！它似乎提供了你需要的东西！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T05:57:05.650

扩展您的 DocumentFilter 引入标志 isAPI。如果它是错误的，请阻止所有更改。当您需要以编程方式添加内容时，设置标志、添加内容并将标志重置为 false。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-05T12:31:14.330

这对我有用（结合了之前的建议）：

```
textPane.addFocusListener(new FocusListener() {

    @Override
    public void focusGained(FocusEvent e) {
         textPane.getCaret().setVisible(true);
    }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T01:47:21.853

这可能是一个肮脏的，肮脏的黑客，但我得到了这个工作。

将文本窗格设置为不可编辑后，使用`textPane.getCaret().setVisible(true)`重新启用插入符号

# linux - LINUX：如何在不同的目录中搜索字符串？

> ID：12700611
> 
> 赞同：1
> 
> 时间：2012-10-03T01:02:29.013
> 
> 标签：linux, search, terminal, directory, grep

我在 Linux 终端上工作，我想知道如何在某个目录中搜索 c 文件。我让它适用于当前目录，但我如何为目录 usr/ 做它

对于我所做的当前目录

```
grep -l "main" *.c 
```

所以我想知道如何在不更改目录的情况下在 /usr 目录中进行搜索。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T01:05:12.600

您应该能够将您想要的目录名称作为您想要搜索的文件模式的前缀。

```
grep -l "main" /usr/*.c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:12:42.747

您还可以使用：

`find /usr/ -name "*.c"`

如果它只是您所追求的 /usr/ 目录中的 C 文件。

# php - 使用 PHP、CSS 和 MYSQL 开发/预览网站的最佳方法

> ID：12700612
> 
> 赞同：-1
> 
> 时间：2012-10-03T01:02:45.397
> 
> 标签：php, html, mysql, css, development-environment

在开发最终将位于远程服务器上的网站时，最好的编码和测试方法是什么？

我的意思的例子：

*- 将其保存在您的计算机上，并从那里访问文件。我应该在我的计算机上安装库和数据库软件（MySQL）还是让文件连接到远程服务器。*

*- 更新服务器上的文件并刷新浏览器以查看更改等。*

*- ？？？*

我正在编写的系统使用 HTML、CSS、JS、PHP 和 MySQL 数据库。也可能正在使用 cron 作业。PHP 主要用于 $_SESSION 和查询 MySQL 数据库（将有多个数据库）。远程服务器正在运行 Ubuntu Linux。

不确定大多数开发人员如何编码和检查他们的网站。由于工作限制，我目前被困在 Windows 7 环境中，但非常感谢对 OS X 和 Linux 的建议，因为我也从事这些工作。

请不要说“在单独的服务器或开发机器上开发”，因为我没有预算或时间。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T01:10:35.750

您通常在具有所有必需部件的本地计算机上进行开发。WAMP/LAMP/MAMP 包是一种流行的选择，因为它将所有必需的部分捆绑到一个易于安装的包中。如果您需要一个很难在桌面工作站上重新创建的特定设置，那么使用虚拟机也是一个不错的选择。然后，您通常还希望在每个方面都尽可能接近生产服务器的测试服务器上运行它，以便及早发现系统和配置特定的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T01:10:56.093

被困在 Windows 世界中通常不是一个大问题。安装所有开发工具/堆栈并使用与生产服务器相同的版本更是一个问题。如果你在 Linux 或 OSX 上，你会更接近你的生产环境。Apache 和 PHP 在这两个操作系统上几乎已经存在。

但无论如何，设置一个反映您的生产环境的开发机器是最好的方法。而且，如果您有足够的 RAM 和 CPU，那么在您的开发机器上使用 VirtualBox、VMWare 等的虚拟服务器是一个不错的选择。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T01:07:18.153

这一切都取决于，如果你是唯一一个做开发的人，那么在你的本地机器上进行测试是没有问题的。如果您与多人一起开发，您将希望在本地机器上测试您的更改，但要有一个“暂存”环境。如果它是您的生产环境的副本，则此“暂存”环境是最好的。这样，您的暂存环境和生产环境之间就不*应该*存在差异。

干杯。

# jquery - jquery find：选择器无法引用调用元素

> ID：12700619
> 
> 赞同：1
> 
> 时间：2012-10-03T01:04:27.720
> 
> 标签：jquery

我注意到 jquery find 中的一个错误。

如果我使用可能引用 foo 本身的选择器调用 foo.find，它将不起作用。这里的例子。

[http://jsfiddle.net/CgfPj/6/](http://jsfiddle.net/CgfPj/6/)（编辑：更新小提琴以更清楚地解释我想要做什么）

test.find 应该能够找到一个作为 div 子级的跨度，但它似乎不能，因为 div 是测试本身。这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:08:16.160

`#test`是`div`你引用的。

[`.find()`](http://api.jquery.com/find/)`#test`返回匹配给定选择器的后代。`#test`没有后代`div`s，因此`test.find("div > span")`不匹配任何元素。

要获得您的直系`span`后代，`#test`应使用：

```
test.find("> span") 
```

[**小提琴**](http://jsfiddle.net/ult_combo/CgfPj/3/)

* * *

根据 OP 编辑​​进行编辑：

```
$("#test > span, #test div > span") 
```

将获得所有`span`s 的直接后代`#test`以及s 内部的所有`span`元素的直接[后代](http://jsfiddle.net/ult_combo/CgfPj/7/)。`div``#test`

`:parentIs(div)`据我所知，CSS 选择器规范和 jQuery 中都没有选择器之类的东西，但是您可以使用[过滤器](http://api.jquery.com/filter/)功能轻松填补这一空白：

```
var spans = test.find('span').filter(function() {
    return $(this).parent()[0].tagName.toLowerCase() === 'div';
});

$("#result").text(spans.length); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/CgfPj/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:09:44.193

如果我看这个权利..

```
var test = $("#test");
$("#result").text(test.find("div > span").length)
$("#result2").text($("div > span").length)​ 
```

通过定义`test`为 div 本身的元素。您本质上是在告诉您`find`在该 div 中寻找另一个具有跨度的 div。尝试

```
$("#result").text(test.find("span").length) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T01:20:29.863

```
<div id="test">
  <span>hello</span>
</div>   

$("#result").text(test.find("div > span").length) 
```

长度 = 0 的输出是绝对正确的。这不是错误，而是预期的行为。

您的 span 嵌套在带有**#test的 div 内**

`test.find("div > span")` // 试图找到一个跨度，它是嵌套在#test div 中的 div 的子对象。因为它在#test 中没有 div，所以这会给你 0。

在这种情况下将返回 1 的 HTML 是

```
<div id="test">
   <div>
      <span>hello</span>
   </div>
</div> 
```

# java - 使用堆栈的二叉搜索树的中序树遍历算法

> ID：12700621
> 
> 赞同：1
> 
> 时间：2012-10-03T01:04:49.250
> 
> 标签：java, stack, binary-search-tree, inorder

我的输入结果`24, 4, 2, 3, 9, 10, 32`，我得到以下结果`2, 3, 4, 24`。

我正在使用*堆栈*。`else if`当我手动检查该程序时，即使有正确的子树，节点也不会在堆栈上的 4 处通过。

```
public void inorderNonRcursive(Node root){

    Stack s = new Stack();
    Node node = root;
    Node k;
    int c=0;

    if(node != null) {
        s.push(node);    
    }

    while(!s.stack.isEmpty()) {   

        //node=(Node) s.stack.get(s.stack.size()-1);
        System.out.println("first condition" + (node.getleft() != null && (node.getVisited() == false)) + "second condi" + (node.getRight() != null));

        if(node.getleft() != null && (node.getVisited() == false)) {
            node = node.getleft();
            s.push(node);
            System.out.println("   from 1           "+(++c)); 

        } else if(node.getRight() != null) {
            k = s.pop();
            System.out.println(k.getvalue());
            node=node.getRight();
            s.push(node);
            System.out.println("    from 2          "+(++c)); 

        } else {
            k = s.pop();
            System.out.println(k.getvalue());
            System.out.println("        from 3      "+(++c)); 
        }  

    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T23:07:06.290

对我来说，设计中有两个问题：

1.  该算法似乎是适用于迭代的递归算法，并且
2.  `Node`班级知道被访问。

这是一个不同的解决方案（您需要稍微调整一下）：

```
// Inorder traversal:
// Keep the nodes in the path that are waiting to be visited
Stack s = new Stack(); 
// The first node to be visited is the leftmost
Node node = root;
while (node != null)
{
    s.push(node);
    node = node.left;
}
// Traverse the tree
while (s.size() > 0)
{
    // Visit the top node
    node = (Node)s.pop();
    System.out.println((String)node.data);
    // Find the next node
    if (node.right != null)
    {
        node = node.right;
        // The next node to be visited is the leftmost
        while (node != null)
        {
            s.push(node);
            node = node.left;
        }
    }
} 
```

回顾我的第一条评论，您并没有说您编写了伪代码并对其进行了测试。我认为这是编写新算法的关键一步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T05:39:37.350

这看起来像是一个课堂练习，旨在帮助您理解二叉树。

在你写任何代码之前，画一张你的树的图片，在每个节点上都有一个值，比如“A”、“B”、“C”等。然后从根节点开始，看看你需要做什么按顺序访问每个节点。用伪代码写下你学到的东西，并按照它所说的来测试它。确保为每个节点测试你能想到的所有不同情况（你应该至少有三个）。在树中放置大约七个节点。

现在你可以开始你的代码了。输入您的伪代码作为注释，然后在每个注释之间插入您的 Java 代码。

享受 ：-）

# html - 在 HTML5 中选中和取消选中复选框的正确方法是什么？

> ID：12700626
> 
> 赞同：74
> 
> 时间：2012-10-03T01:05:41.030
> 
> 标签：html, checkbox, checked

查看了 HTML 规范，但无法对其做出正面或反面： http: [//www.w3.org/TR/html5/the-input-element.html#attr-input-checked](http://www.w3.org/TR/html5/the-input-element.html#attr-input-checked)

检查 HTML 中的复选框的正确方法是什么（不是动态的）？

```
checked="true"
checked="checked" 
```

***取消选中***复选框的正确方法是什么？

```
<input type="checkbox" /> with no checked attribute
checked="false"
checked="none" 
```

在哪里检查 HTML 规范以选中/取消选中复选框？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-10-03T01:10:18.980

```
<input type="checkbox" checked="checked" /> 
```

或者干脆

```
<input type="checkbox" checked /> 
```

选中复选框。未选中的复选框没有选中的属性 ( `<input type="checkbox" />`)。

参考：[http ://www.w3.org/TR/html-markup/input.checkbox.html#input.checkbox.attrs.checked](http://www.w3.org/TR/html-markup/input.checkbox.html#input.checkbox.attrs.checked)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-03T08:42:16.383

根据 HTML5 草案，该`checked`属性是“<a href="http://www.w3.org/TR/html5/common-microsyntaxes.html#boolean-attributes" rel="noreferrer">布尔属性”，并且“元素上布尔属性的存在表示真值，而属性的缺失表示假值。” 它是重要且足够的属性的名称。因此，要使复选框最初被选中，您可以使用

```
<input type=checkbox checked> 
```

默认情况下，在没有该`checked`属性的情况下，最初未选中复选框：

```
<input type=checkbox> 
```

保持这种方式使它们保持简单，但如果您需要符合 XML 语法（即在 XHTML 线性化中使用 HTML5），则不能单独使用属性名称。然后允许的（根据 HTML5 草案）值是空字符串和字符串`checked`，不区分大小写。例子：

```
<input type="checkbox" checked="checked" /> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-03T01:07:43.947

`<input type="checkbox" checked />`

HTML5 不要求属性有值

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-30T18:07:02.247

在 jQuery 中：

要选中复选框：

```
$("#checkboxid").attr("checked","checked"); 
```

要取消选中该复选框：

```
$("#checkboxid").removeAttr("checked"); 
```

其他答案暗示了解决方案，并指出您在进一步挖掘后将获得此答案的文档。Jukka K. Korpela 有理由这是正确的答案，基本上我按照他的链接，然后查找 jQuery 文档以获得该结果。只是想我会为以后找到这篇文章的人节省那些额外的步骤。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-02T09:08:05.990

在 jQuery 中对罗伯特的回答[http://jsfiddle.net/ak9Sb/的补充回答](http://jsfiddle.net/ak9Sb/)

在获取/设置复选框状态时，可能会遇到以下现象：

```
.trigger("click"); 
```

选中未选中的复选框，但不添加选中的属性。如果您使用触发器，请不要尝试获取具有“已检查”属性的状态。

```
.attr("checked", ""); 
```

不取消选中复选框...

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-03-06T05:56:52.607

您可以在父表单上使用 autocomplete="off"，因此如果您重新加载页面，复选框将不会被自动选中

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2021-03-20T15:33:50.947

我不完全确定为什么之前没有提到这一点，但对我来说，以下工作：

将其设置为`checked`：

```
<input type="checkbox" checked> 
```

将其设置为`unchecked`：

```
<input type="checkbox" unchecked> 
```

（我遇到的问题是重新加载页面后复选框仍然处于选中状态。使用`unchecked`解决了我的问题，所以它可能对其他人有用。）

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-10-03T01:10:02.977

[您可以在w3schools](http://www.w3schools.com/tags/att_input_checked.asp)参考此页面，但基本上您可以使用以下任何一种：

```
<input checked>
<input checked="checked">
<input checked=""> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-03T01:09:53.790

```
<form name="myForm" method="post">
  <p>Activity</p> 
  skiing:  <input type="checkbox" name="activity" value="skiing"  checked="yes" /><br /> 
  skating: <input type="checkbox" name="activity" value="skating" /><br /> 
  running: <input type="checkbox" name="activity" value="running" /><br /> 
  hiking:  <input type="checkbox" name="activity" value="hiking"  checked="yes" />
</form> 
```

# java - 将初始 perm 大小和最大 perm 大小设置为相同以防止完全 GC

> ID：12700627
> 
> 赞同：0
> 
> 时间：2012-10-03T01:05:46.003
> 
> 标签：java, garbage-collection

作者是否建议将初始 perm size 和最大 perm size 值设置为相同的值可以防止完全 GC 发生？

> 旧的或永久的内存空间已满，为了容纳新的对象或类，如果相关参数具有不同的值，则需要将其扩展到最大大小。换句话说，如果 -Xms 和 -Xmx 具有不同的值，并且如果 Old 的大小需要从 -Xms 向 -Xmx 增加以容纳更多对象，则调用 FullGC。类似地，如果 -XX:PermSize 和 -XX:MaxPermSize 具有不同的值，并且永久空间需要向 -XX:MaxPermSize 增加以容纳新的 java 类，则调用 FullGC。 **这可以通过始终将 -Xms 和 -Xmx**  **以及 -XX:PermSize 和 -XX:MaxPermSize 设置为相同的值**来避免。

Java 性能调优白皮书： http: [//mfinocchiaro.files.wordpress.com/2008/07/java-virtual-machine-neutral.pdf](http://mfinocchiaro.files.wordpress.com/2008/07/java-virtual-machine-neutral.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:57:42.460

我想他是这么说的。

但我不认为他是对的。当然，我不记得在任何官方的 Sun / Oracle 文档中提到过这一点。

注意：

*   链接的“白皮书”不是 Oracle / Sun 文档。
*   作者不是 Oracle / Sun 员工。
*   这篇论文相当陈旧，涉及 Java 4 和 Java 5 JVM。

通过打开 GC 日志并查看完整 GC 和堆扩展之间是否存在相关性，应该可以通过一种或另一种方式获得证据。

* * *

我（经常）听说将初始堆大小和最大堆大小设置为相同可以减少 JVM 预热开销。这是断言/暗示每个堆扩展之前都有一个完整的 GC，我对此表示怀疑。

# jquery - 在 imageMapster toolTip 中设置 Vimeo 缩略图，

> ID：12700628
> 
> 赞同：1
> 
> 时间：2012-10-03T01:05:50.070
> 
> 标签：jquery, tooltip, thumbnails, vimeo, imagemapster

我在将鼠标悬停在 imageMapster toolTip 地图中时遇到问题。实际上，我的代码在每次鼠标悬停时都会放置几个重复它们的缩略图。

这是我的代码：http: [//jsfiddle.net/H3mRE/1/](http://jsfiddle.net/H3mRE/1/)

我很感激任何帮助。
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:16:43.127

该`.append()`方法插入指定的内容作为每个元素的最后一个子元素。但是当`.html()`用于设置元素的内容时，该元素中的任何内容都会被新内容完全替换。

使用 `html()`而不是`append()` 喜欢

```
$('.toolTIPbocadillo').html(thumbImg); 
```

[http://jsfiddle.net/H3mRE/2/](http://jsfiddle.net/H3mRE/2/)

希望这会有所帮助

# algorithm - Java中的管道合并排序

> ID：12700632
> 
> 赞同：0
> 
> 时间：2012-10-03T01:06:43.523
> 
> 标签：algorithm, pipeline, mergesort

我用谷歌搜索了这个主题，所以我找到了一些东西：

```
Consider a pipeline of sorters S0 to Sm.

S0 has one input stream (the input sequence), and two output streams.
Si (i = 1 to m-1) has two input streams and two output streams. The
output streams of Si are the input streams of Si+1, for i = 0 to m-1.
Sm has two input streams and one output stream.

S0 reads the input stream, creates "sorted" sub-sequences of size one
and sends these intermittently to one of its two output streams.

Si repeatedly reads two sorted sub-sequences, one from each input
stream, merges them, and writes the double sized sorted sub-sequences
intermittently two one of its output streams.

Sm reads two sorted sub-sequences, one from each input stream, merges
these and produces the resulting output sequence.

Here is an example for a sequence of 8 numbers, where a bar | delimits
sorted sub sequences  

                  2 | 1 | 6 | 8  3 1 | 8 4  8 6 5 4 
7 2 3 1 5 6 4 8   ------------>  -------->  ------>   8 7 6 5 4 3 2 1
--------------> S0             S1         S2       S3 -------------->
                  ------------>  -------->  ------>
                  7 | 3 | 5 | 4  7 2 | 6 5  7 3 2 1 
```

我需要一些管道模式中的合并排序伪代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:28:27.303

这看起来是使用“流”的*自下而上*[*合并排序*](http://en.wikipedia.org/wiki/Merge_sort#Bottom-up_implementation)（以及[此处](http://www.algorithmist.com/index.php/Merge_sort#Bottom-up_merge_sort)和此处的[讲义）的变体：](http://algs4.cs.princeton.edu/22mergesort/)

> 自下而上的归并排序是归并排序的一种非递归变体，其中*数组按一系列传递进行排序。*在每次通过期间，数组被分成大小为 m 的块（最初，m=1）。每两个相邻的块被合并（就像在正常的合并排序中一样），下一次通过两倍大的 m 值。

在 Pipeline Mergesort 中，每个排序器都代表一个通道，因为它组合了相邻的块。但是，与更传统的自底向上合并排序不同，相邻块是从两个输入流中读取的匹配对（而不是在同一流/数组中相邻）。

无论如何，先*尝试*一下——SO 是一个提出*实际问题*的地方，而不是发布*任务*:)

# c# - 使用 RIPE 的顶级域无知

> ID：12700642
> 
> 赞同：0
> 
> 时间：2012-10-03T01:08:47.700
> 
> 标签：c#, .net, dns, whois, tld

我正在用 c# 开发一个简单的应用程序，它可以检查一个域名是否可用于购买特定的 tld。方法：我下载了一个whois-server列表，我用协议43的TCP客户端将域名发送到它的whois服务器，并检查服务器的回答。问题：更多国家拥有相同的 whois 服务器：“whois.ripe.net”。如果我发送完整的域名（带有 tld），服务器的回答总是“在源 RIPE 中找不到条目。”。如果我发送没有 tld 的域名，我不会得到任何关于域名状态的 tld 特定数据。

我使用的方法：

```
private string GetWhoisInformation(string whoisServer, string url)
    {
        try
        {
            StringBuilder stringBuilderResult = new StringBuilder();
            TcpClient tcpClinetWhois = new TcpClient(whoisServer, 43);
            NetworkStream networkStreamWhois = tcpClinetWhois.GetStream();
            BufferedStream bufferedStreamWhois = new BufferedStream(networkStreamWhois);
            StreamWriter streamWriter = new StreamWriter(bufferedStreamWhois);

            streamWriter.WriteLine(url);
            streamWriter.Flush();

            StreamReader streamReaderReceive = new StreamReader(bufferedStreamWhois);

            while (!streamReaderReceive.EndOfStream)
                stringBuilderResult.AppendLine(streamReaderReceive.ReadLine());
            return stringBuilderResult.ToString();
        }
        catch
        {
            return "lekérdezés sikertelen";
        }
    } 
```

示例：我这样做：

```
GetWhoisInformation("whois.ripe.net", "pokerstars.hu") 
```

服务员的回答：

```
%ERROR:101: no entries found
%
% No entries found in source RIPE. 
```

对于下一个命令：

```
GetWhoisInformation("whois.ripe.net", "pokerstars") 
```

结果包含几个这样的块：

```
% Information related to '80.65.254.128 - 80.65.254.159'

inetnum:        80.65.254.128 - 80.65.254.159
netname:        Pokerstars
descr:          Hosting
country:        GB
admin-c:        DC77-RIPE
tech-c:         JM2352-RIPE
status:         assigned PA
mnt-by:         manx-telecom-mnt
changed:        bill.hogg@manx-telecom.com 20101123
source:         RIPE 
```

没有关于域名“pokerstars.hu”的信息。当然，如果我想查看 pokerstars.va，我会得到完全相同的答案。Pokerstars.hu 是注册域名，pokerstars.va 不是。

如何找到域名的正确状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:30:26.140

RIPE 不作为任何域的 ccTLD whois 服务器；与 ARIN 一样，它只包含网络块信息。每个 ccTLD 都有自己的根 whois 服务器（或者，其中一些没有适当的 whois 服务 - 例如，西班牙`.es`注册局要求您使用 Web 客户端，并且必须填写令人讨厌的 CAPTCHA每次）。

另请参阅[http://www.ripe.net/data-tools/db](http://www.ripe.net/data-tools/db)，尽管它对数据库不包含的内容不是很明确。

您可以通过向`whois.iana.org`.

```
vnix$ whois -h whois.iana.org hu | fgrep whois:
whois:        whois.nic.hu 
```

另见[http://www.iana.org/domains/root/db/](http://www.iana.org/domains/root/db/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:19:34.873

我针对 whois.melbourneit.net 尝试了您的代码，它发现我的一个域没有问题。我能够重现您针对 RIPE 运行的问题，因此我在他们的网站上以交互方式尝试了相同的查询 - 并得到了相同的结果。你的代码没有问题。

Tripleee 是对的`whois.nic.hu`，我成功地用它来解析 pokerstars.hu - 这让我想知道 RIPE whois 服务器的用途是什么。

感谢 Triplee 向我们展示了如何获取 ccTLD 的 whois 服务器友好名称。

* * *

您可能会发现这很有用：

```
using System;
using System.IO;
using System.Net.Sockets;
using System.Text;

namespace Whois
{
  class Program
  {
    static void Main(string[] args)
    {
      string tldWhoisServer = "whois.iana.org";
      string ccTldServer, query = null;
      Console.Write("Query> ");
      while ((query = Console.ReadLine()) != string.Empty)
      {
        string tld = query.Substring(query.LastIndexOf('.') + 1);
        string foo = GetWhoisInformation(tldWhoisServer, tld);
        foo = foo.Remove(0, foo.IndexOf("whois:") + 6).TrimStart();
        ccTldServer = foo.Substring(0, foo.IndexOf('\r'));
        Console.WriteLine(GetWhoisInformation(ccTldServer, query));
        Console.Write("Query> ");
      } 
    }
    static string GetWhoisInformation(string whoisServer, string url)
    {
      try
      {
        StringBuilder stringBuilderResult = new StringBuilder();
        TcpClient tcpClinetWhois = new TcpClient(whoisServer, 43);
        NetworkStream networkStreamWhois = tcpClinetWhois.GetStream();
        BufferedStream bufferedStreamWhois = new BufferedStream(networkStreamWhois);
        StreamWriter streamWriter = new StreamWriter(bufferedStreamWhois);

        streamWriter.WriteLine(url);
        streamWriter.Flush();

        StreamReader streamReaderReceive = new StreamReader(bufferedStreamWhois);

        while (!streamReaderReceive.EndOfStream)
          stringBuilderResult.AppendLine(streamReaderReceive.ReadLine());
        return stringBuilderResult.ToString();
      }
      catch
      {
        return "Query failed";
      }
    }
  }
} 
```

# c++ - 将 Visual Studio 2008 配置为在程序/库中使用 log4cxx

> ID：12700655
> 
> 赞同：0
> 
> 时间：2012-10-03T01:10:17.683
> 
> 标签：c++, visual-studio-2008, log4cxx

我是 C++ 的初学者。我正在编译使用 log4cxx 的学校项目。[幸运的是，我在这个站点上](http://www.dreamcubes.com/b2/software-development/28/log4cxx-for-win32-with-vs2005/)找到了一个已经构建的 Visual c++ 2008 版本。

下载文件后，我做了以下

**Tools->Options->VC++Directories->Library Files**，添加路径到 Release_Shared 目录以链接必要的库

**Tools->Options->VC++Directories->Include Files**，添加路径到 src/main/include

但即使在此之后，我也会收到诸如“logError”标识符未找到“错误”未声明标识符之类的错误。显然缺少了什么。

我在某个地方看到我应该对 .dll 文件做一些事情，但不确定它是什么。有人可以帮我解决这个问题，或者将我指向一个有设置此类配置的分步说明的地方吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:41:02.370

您链接中的注释：

> 要使用静态链接 log4cxx 库，宏 LOG4CXX_STATIC 必须在您的项目预处理器中定义，否则您的编译将遇到未解决的链接错误。

[VS 2008 中的预处理器定义](http://msdn.microsoft.com/en-us/library/hhzbb5c8%28v=vs.90%29.aspx)

或使用

```
#define LOG4CXX_STATIC 
```

在标头包含之前

# c++ - 初始化列表和基于范围的函数

> ID：12700660
> 
> 赞同：0
> 
> 时间：2012-10-03T01:10:37.843
> 
> 标签：c++, vector, c++11, iostream, initializer-list

问题：编写一个程序，提示用户输入一些数量的 1、2、5、10、20、50 和 100 美元钞票。分别向用户查询每个大小美元的数量。

我想我已经很好地完成了代码，但是问题的最后一部分指出：修改程序以使用向量的初始化列表，并使用基于范围的 for 语句来遍历向量。注意：这些 C++11 功能在 g++-4.6 和 Visual Studio 2012 中可用，但在其他编译器上可能不可用。

我不明白最后一部分在问什么。希望这里有人可以指出我正确的方向。这是一个 C++ 类，我的书没有最新版本。

对我的代码格式的任何批评也很棒！

这是我的代码：

```
 #include "std_lib_facilities_3.h"
    vector<int>bills;
    int bill;
    int bill_tot(){
        int sum = 

    1*bills[0]+2*bills[1]+5*bills[2]+10*bills[3]+20*bills[4]+50*bills[5]+100*bills[6];
            return sum;
        }
    int main()
    try{
        cout << "Enter the number of One Dollar Bills you have: ";
        cin >> bill;
        cout << '\n';
        bills.push_back(bill);
        if (bill<0)
            error("You can't have a negative value.\n");

        cout << "Enter the number of Two Dollar Bills you have: ";
        cin >> bill;
        cout << '\n';
        bills.push_back(bill);
        if (bill<0)
            error("You can't have a negative value.\n");

        cout << "Enter the number of Five Dollar Bills you have: ";
        cin >> bill;
        cout << '\n';
        bills.push_back(bill);
        if (bill<0)
            error("You can't have a negative value.\n");

        cout << "Enter the number of Ten Dollar Bills you have: ";
        cin >> bill;
        cout << '\n';
        bills.push_back(bill);
        if (bill<0)
            error("You can't have a negative value.\n");

        cout << "Enter the number of Twenty Dollar Bills you have: ";
        cin >> bill;
        cout << '\n';
        bills.push_back(bill);
        if (bill<0)
            error("You can't have a negative value.\n");

        cout << "Enter the number of Fifty Dollar Bills you have: ";
        cin >> bill;
        cout << '\n';
        bills.push_back(bill);
        if (bill<0)
            error("You can't have a negative value.\n");

        cout << "Enter the number of One Hundred Dollar Bills you have: ";
        cin >> bill;
        cout << '\n';
        bills.push_back(bill);
        if (bill<0)
            error("You can't have a negative value.\n");

        cout << "You have " << bills[0] <<" One Dollar Bills.\n";
        cout << "You have " << bills[1] <<" Two Dollar Bills.\n";
        cout << "You have " << bills[2] <<" Five Dollar Bills.\n";
        cout << "You have " << bills[3] <<" Ten Dollar Bills.\n";
        cout << "You have " << bills[4] <<" Twenty Dollar Bills.\n";
        cout << "You have " << bills[5] <<" Fifty Dollar Bills.\n";
        cout << "You have " << bills[6] <<" One Hundred Dollar Bills.\n";
        cout << "The value of all your Dollar Bills are $" << bill_tot() << endl;
        keep_window_open();
    }
    catch (runtime_error e) {   
        cout << e.what() << '\n';
        keep_window_open();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:18:11.350

这是说明性代码：

```
std::vector<int> denomination { 1,2,5,20,50,100}; // Initializer list for vector
int sum = 0;
int number;
for ( int bill : denomination ) // range-based for loop
{
    cout << "Enter the number of $" << bill << " you have: ";
    cin >> number;
    sum += number * bill;
} 
```

# c++ - 从字符串末尾的位置开始返回子字符串（C++）

> ID：12700662
> 
> 赞同：4
> 
> 时间：2012-10-03T01:10:50.297
> 
> 标签：c++, substr

C++ STL 函数 substr(pos,n) 的第一个参数 pos 据说具有这种行为。

> “如果传递的位置超过了字符串的末尾，则会引发 out_of_range 异常。”

但是，如果我做类似的事情

```
string s("ab");
cout<<s.substr(2,666)<<endl; 
```

那么即使 pos=2 根据定义超过了字符串的末尾，也不会引发异常。

string::end 将“字符串中最后一个字符之后”的位置定义为“字符串末尾之后”。我注意到返回的字符总是'\0'。我的问题是这是否是标准行为，我是否可以指望在这种情况下返回一个空字符串。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T01:18:39.827

实际要求是（§21.4.7.8）：

```
1 Requires: pos <= size()
2 Throws: out_of_range if pos > size(). 
```

在你的情况下，pos == size()，所以你永远不会看到异常，并且应该总是得到一个空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:18:48.467

由于作为第一个参数传递的位置处的字符包含在结果中，因此`2`不应将位置视为*超过*字符串的末尾：它位于*字符串*的末尾。字符串的长度是传递给的合法参数`substr`。

# javascript - XML 化 HTML5 页面上的 UI 控件列表

> ID：12700667
> 
> 赞同：1
> 
> 时间：2012-10-03T01:11:54.333
> 
> 标签：javascript, xml, html, uicontrolevents

我从上周开始使用 Javascript 和 HTML5 并且对它很陌生。也许无论我问什么都很容易做到，但谷歌搜索对我没有帮助。我想循环遍历 HTML5 页面上的所有 UI 控件（可能使用 javascript 函数或类似函数）并查找每个 UI 控件的具体细节（如名称、宽度、长度和其他属性）并将这些细节写入预先确定的 xml 格式。我的后端代码在 C# 中，但我认为这并不重要或有帮助，因为 UI 页面控件等所有相关元素都在 HTML5 和 Javascript 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:38:06.113

我认为您正在寻找的是您的页面的 Controls 属性。Html5 不（必然）符合 XML 标准。

[http://msdn.microsoft.com/en-us/library/yt340bh4(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/yt340bh4(v=vs.100).aspx)应该向您展示一些在后端使用控件的好例子。

# haskell - Haskell 简单类型问题

> ID：12700674
> 
> 赞同：0
> 
> 时间：2012-10-03T01:13:52.933
> 
> 标签：haskell, types

我正在尝试编写一个函数，它将两个数组的所有元素相加并返回一个数组。它输入两个列表。

```
addTogether :: Num t => ([t],[t]) -> [t]
addTogether (x, y) = mapM_ (\ (a, b) -> a + b) (zip x y) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T04:18:29.353

我认为你在这里采取了错误的方法。在编译器停止对你大喊大叫之前，你不会`addTogether`通过组合你模糊理解的函数来获得可靠的函数。这有点危险，Haskell 和 C 都是如此。要么你不使用这些函数，要么你彻底阅读了他们的文档、示例和理想情况下的代码。这是我的意见。

关于`addTogether`，有很多不同的实现方式。如果您花了一个小时尝试使用`zip`并且`map`没有任何令人满意的结果，那么您可能会尝试其他方法。例如，如果这是你的事，你可以用递归的方式处理它：

```
addTogether :: Num t => ([t], [t]) -> [t] 
addTogether ([],_) = []
addTogether (_,[]) = []
addTogether ((x:xs),(y:ys)) = (x + y):addTogether (xs,ys) 
```

这里没有歧义。您也可以尝试使用列表推导（您想生成一个列表吗？），可能如下所示：

```
addTogether :: Num t => ([t],[t]) -> [t] 
addTogether (x, y)
    | null x || null y = []
    | otherwise = [ a + b | n <- [0..min (length x) (length y) - 1],
                            let a = x!!n,
                            let b = y!!n] 
```

（它不处理无限列表，我很快就做到了）

@Daniel Fischer 解决方案非常好，但`uncurry`一开始可能有点令人不安。你可以这样看：

```
addTogether :: Num t => ([t],[t]) -> [t] 
addTogether (x, y) = zipWith (+) x y 
```

我希望它对我糟糕的英语有所帮助和抱歉。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T01:19:14.100

您应该在那里使用的功能是

```
map :: (a -> b) -> [a] -> [b] 
```

但更好的选择是

```
addTogether :: Num t => ([t], [t]) -> [t]
addTogether = uncurry (zipWith (+)) 
```

的类型`mapM_`是

```
mapM_ :: Monad m => (a -> m b) -> [a] -> m () 
```

这显然不符合您的预期目的。

# c - 递归反向链表而不使用任何新变量

> ID：12700676
> 
> 赞同：5
> 
> 时间：2012-10-03T01:13:55.210
> 
> 标签：c, recursion, linked-list, reverse

在一次工作面试中，我被要求用 C 编写一个函数，它递归地反转一个链表，返回新的第一个节点，并且不使用任何新节点。

你怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T01:21:17.773

这是一般的想法，使用类似 C 语法的不可知语言：

```
Node invert(Node list, Node acc) {
    if (list == null)
        return acc;
    Node next = list.next;
    list.next = acc;
    return invert(next, list);
} 
```

上述函数接收要反转的列表的第一个节点和到目前为止的累积值，并返回新反转的列表的头部 - 节点的反转就地完成，没有分配额外的空间（除了一个本地堆栈中的变量）。像这样称呼它：

```
invert(firstNodeOfList, null); 
```

这是一个尾递归的例子：结果被收集在`acc`参数中，当每个递归调用返回时，没有什么可做的，只返回累加的值。

**更新：**

在函数式语言中，在不使用局部变量的情况下编写一个反转列表的函数更容易、更自然，例如查看 Scheme 中的以下代码 - 它有缺点，它会在调用`cons`过程时创建一个新的列表节点：

```
(define (invert lst acc)
  (if (empty? lst)
      acc
      (invert (rest lst)
              (cons (first lst) acc))))

(invert '(1 2 3 4 5) '())
> '(5 4 3 2 1) 
```

底线：您可以在每次递归调用时创建一个新节点或创建一个新的局部变量，但除非编程语言提供用于顺序执行的表达式并且编译器保证评估顺序（请参阅@WillNess 的答案），否则您不能同时消除两者并有一个可行的算法。最好谨慎行事，并使用临时变量来执行评估顺序并始终获得正确的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T01:21:51.440

这很简单：递归到链表尾，`next`每次传入新指针，返回链表尾。

```
struct list {
    struct list *next;
};

struct list *reverse(struct list *cur, struct list *prev) {
    struct list *next = cur->next;
    cur->next = prev;
    if(next == NULL) return cur;
    return reverse(next, cur);
}

reverse(head, NULL); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T01:38:13.460

我不知道什么是“递归链表”，所以我将使用您的标题并假设您想使用递归函数“反转链表”。

我假设它是一个单链表（所以每个元素都有一个指向`next`下一个元素的指针）并且按照惯例取`next = NULL`最后一个元素。 ~~对于双向链表，您还必须处理`prev`指针，但它基本上是相同的想法。~~ 使用双向链表会更简单，因为您甚至不需要跟踪前一个元素；您只需在每个元素上翻转两个指针。

要反转列表，我们可以想象一次向下遍历一个元素，同时翻转`next`指针以指向前一个元素。这很容易写成一个递归函数，它接受一个指向当前元素的指针和一个指向前一个元素的指针作为参数（在开始时这个指针是`NULL`）。

```
node* reverseList(node* head, node* prev = NULL) {
  if (head == NULL) return prev;

  std::swap(head->next, prev); // prev points to next element to process
  return reverseList(prev, head);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-13T06:49:59.060

嘿伙计们，请在下面找到带有和不带有递归的反向链表程序

```
LINK *reverse_linked_list_recursion(LINK *head)
{
        LINK *temp;
        if (!head) {
                printf("Empty list\n");
                return head;
        }
        else if (!head->next)
                return head;
        temp = reverse_linked_list_recursion(head->next);
        head->next->next = head;
        head->next = NULL;
        return temp;
}

LINK *reverse_linked_list_without_recursion(LINK *head)
{
        LINK *new, *temp;
        if (!head) {
                printf("No element in the list\n");
                return head;
        }
        else {
                new = head;
                while (head->next) {
                        temp = head->next;
                        head->next = temp->next;
                        temp->next = new;
                        new = temp;
                }
        }
        return new;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T23:29:30.740

所以，[奥斯卡洛佩兹的答案](https://stackoverflow.com/a/12700722/849891)的变化是

```
Node invert(Node list, Node acc) 
{
    if (!list) 
        return acc; 
    return invert(list.next, ((list.next=acc),list));
} 
```

表达式序列`(a,b)`返回其最后一个值并从左到右进行计算。

***这仅适用***于保证函数参数的评估顺序为*left-to-right*的编译器。如果它是*right-to-left*`invert` ，则应交换to 的参数

如果评估顺序是*不确定*的，这将不起作用。C 标准显然未指定此顺序，但某些编译器可能有自己的方式。你可能知道你的编译器，但它是不可移植的，你的编译器将来也可能会改变它。编写这样的代码是不受欢迎的。也许这就是你的面试官想从你那里听到的。他们喜欢这样的把戏，想看看你的反应。

控制评估顺序的正常方法是使用临时变量。

# c++ - C++ 重载运算符两次，一次返回非 const 引用，另一次返回 const 引用，偏好是什么？

> ID：12700682
> 
> 赞同：14
> 
> 时间：2012-10-03T01:14:48.310
> 
> 标签：c++, reference, operator-overloading, constants, operator-keyword

我用相同的参数列表重载了一个运算符两次。但返回类型不同：

```
T& operator()(par_list){blablabla}    
const T& operator()(par_list){blablabla} 
```

那么当我调用 () 运算符时，会根据什么偏好或情况调用哪个函数？我知道如果我在 const 函数下调用 () 它必须是 const T& 之一。

我只是好奇 C++ 如何处理这种情况以及默认首选项如何工作。

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-03T01:21:09.333

这些函数不会互相重载；它们具有相同的签名，因此尝试重新定义相同的函数，这是一个错误。返回类型不是函数签名的一部分。要重载一个函数，您必须声明另一个具有相同名称但参数或`const`/`volatile`限定符不同的函数 - 即函数上的限定符，而不是返回类型。

（它们也不会相互覆盖；覆盖是派生类对其基类的虚函数所做的事情）。

定义成员函数的a`const`和 non-重载是很常见的；重载必须声明函数，`const`而不仅仅是返回类型：`const``const`

```
T& operator()(par_list){blablabla}
const T& operator()(par_list) const {blablabla}
                              ^^^^^ 
```

`()`现在，如果您应用于非`const`对象，则将调用第一个，然后将调用第二个`const`。例如：

```
Thingy nc;
Thingy const c;

nc(); // calls the first (non-const) overload
c();  // calls the second (const) overload 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T01:20:29.993

您不能基于返回类型重载函数/方法。我希望编译器在这里抛出一个错误。您可以做的是将方法本身指定为`const`方法，使用

```
const T& operator()(par_list) const {blahblah} 
```

`const`限定符不仅意味着可以在接收器上调用它`const`，而且还用于重载解决方案。`*this`发生这种情况是因为它影响了传递给方法的隐式参数；方法在上`const`使用`const`限定符`*this`，并且`const`在重载解析期间会考虑限定符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T01:44:52.223

您定义运算符的方式，编译器无法决定调用哪个 operator()。函数（和运算符）的重载只能在参数的类型上完成，而不能在返回类型上完成。事实上，一旦定义了第二个，编译器就会出现错误，编译器认为您正在重新定义相同的函数/运算符。

但是，以下是常见的（并且可能是您所拥有的）：

```
T& operator()(par_list){blablabla}
const T& operator()(par_list) const {blablabla} 
```

存在参数列表之后的附加“const”是因为您正在定义非静态成员函数，并且成员函数具有隐式隐藏参数：指向类实例的“this”指针。那里的“const”关键字指示此隐藏指针是否指向 const 实例。此参数参与重载决议，在这种情况下，编译器使用它来选择要使用的运算符版本。

所以：

```
class A {
    T& operator()() { ... }
    const T& operator()() const { .... }
};

A a;
const A& ca(a);
a(); -> returns a T&
ca(); -> returns a const T& 
```

# jquery - 这个ajax调用我做错了什么？

> ID：12700690
> 
> 赞同：0
> 
> 时间：2012-10-03T01:15:42.873
> 
> 标签：jquery

```
<html>
<head>
    <script src="jquery.js"></script>
    <script>
        $(document).ready(function() {
        $.ajax({
             cache: false,
             url:"http://api.flickr.com/services/rest/?method=flickr.photosets.getList&api_key=eb6ffaa3fa419f01049c65f443ea1f08&user_id=87759985%40N04&format=json",
             type:"GET",
             contentType: "application/json",
             dataType: "text",
             timeout:3000,
             success: function(d, status, req)
             {
                alert(d);
                data = $.parseJSON(d);
                alert(data);
                var list = $("<ul></ul>");
                $.each(data.photosets.photoset, function (i, set) {
                    var link = $("<a/>").attr("title", set.description._content)
                        .attr("href", "http://www.flickr.com/photos/crazyeyes955/sets/" + set.id)
                        .text(set.title._content);
                    var li = $("<li/>").append(link).append(" (" + set.photos + ")");
                    $(list).append(li);
                });
              $("flicker_sets").text($.parseJSON(d).x);
             },
             error: function(req, status, err)
             {
                alert("Failed...");
              $("#result").text(req.responseText);
             }
            })
        // selectors
        // # = id
        // . = class
        });
    </script>
</head>
<body>
    <div id = "flicker_sets">
    </div>
</body> 
```

这是我到目前为止拼凑的脚本。我什至无法显示警报。jquery 文件在同一个文件中，我只是在 chrome 上运行它。FireFox 显示了同样的情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:25:50.197

您在请求中指定了这一点..

```
dataType: "text", 
```

尝试将其更改为

```
dataType: "json", 
```

# javascript - 如果用户使用的是 ie8 或更低版本，如何将浏览器重定向到升级页面

> ID：12700692
> 
> 赞同：0
> 
> 时间：2012-10-03T01:15:55.983
> 
> 标签：javascript, html, internet-explorer

> **可能重复：**
> [Internet Explorer 浏览器版本用户代理的 Javascript 重定向？](https://stackoverflow.com/questions/7407182/javascript-redirect-for-internet-explorer-browser-version-user-agent)
> [在 Javascript 中检测 IE 版本](https://stackoverflow.com/questions/10964966/detect-ie-version-in-javascript)

如果我不想让任何用户使用该网站，除非他们有 ie9 或更高版本，或者 firefox/chrome/safari。ie7 和 ie8 不应该工作，它应该重定向到一个通知页面，告诉用户升级他或她的浏览器。这甚至是这种情况的最佳做法吗？如果是这样，代码在javascript中的外观如何。

# scala - 比较 Scala 中的类型

> ID：12700693
> 
> 赞同：6
> 
> 时间：2012-10-03T01:15:59.947
> 
> 标签：scala

我有两个对象，每个对象都有本地定义的类型，我想确定类型是否相同。例如，我想编译这段代码：

```
trait Bar {
  type MyType
}

object Bar {
  def compareTypes(left: Bar, right: Bar): Boolean = (left.MyType == right.MyType)
} 
```

但是，编译失败并显示“值 MyType 不是 Bar 的成员”。

这是怎么回事？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T01:42:00.153

您可以这样做，但需要一些额外的机器：

```
trait Bar {
  type MyType
}

object Bar {
  def compareTypes[L <: Bar, R <: Bar](left: L, right: R)(
    implicit ev: L#MyType =:= R#MyType = null
  ) = ev != null
} 
```

现在，如果我们有以下内容：

```
val intBar1 = new Bar { type MyType = Int }
val intBar2 = new Bar { type MyType = Int }
val strBar1 = new Bar { type MyType = String } 
```

它按预期工作：

```
scala> Bar.compareTypes(intBar1, strBar1)
res0: Boolean = false

scala> Bar.compareTypes(intBar1, intBar2)
res1: Boolean = true 
```

诀窍是要求隐含的证据表明`L#MyType`和`R#MyType`相同，`null`如果不是，则提供默认值 ( )。然后你可以检查你是否得到默认值。

# html - 网站中的粘滞页脚适用于一个页面而不是另一个页面

> ID：12700696
> 
> 赞同：0
> 
> 时间：2012-10-03T01:16:38.600
> 
> 标签：html, css

我试图让页脚留在网页底部，并允许在不同页面上显示不同数量的内容。它适用于我的 index.html 页面，但是当我转到“关于”页面时，页脚会浮动到页面的中间。有什么建议吗？该网站位于[http://www.concept82.com/DISupdate/index.html](http://www.concept82.com/DISupdate/index.html)并且故障页面是[http://www.concept82.com/DISupdate/about.html](http://www.concept82.com/DISupdate/about.html)。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:58:33.380

#bottom 上的 margin-top 不是 -200px，而是 200px。那将解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:44:21.117

首先，您需要将 div 移到`#bottom`div 之外`#wrap`，因此它会立即跟随它。这将使您大部分时间到达那里，但您的索引页面上似乎仍有一些东西阻止它一直移动到窗口底部。

# ruby-on-rails-3 - 如何防止 Rails HTML 电子邮件中的样式重复？

> ID：12700699
> 
> 赞同：2
> 
> 时间：2012-10-03T01:17:03.133
> 
> 标签：ruby-on-rails-3, actionmailer

我正在尝试构建 Rails HTML 电子邮件，但电子邮件的结构（页眉和页脚）在每封邮件中都是重复的。通常这不是问题，但是对于内联样式，如果我想更改颜色，这似乎是一个问题。我怎样才能将这些元素从每个文件中提取出来并合并到一个文件中？

此外，是否有消除 html.erb 和 text.erb 文件之间的重复文本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T02:03:41.623

一个简单的方法是引用几个部分。假设它们的名称如下：

*   _email_header.html.erb
*   _email_footer.html.erb

然后，您可以在每封电子邮件中引用它们：

```
<%= render :partial => 'email_header' %>
Blah, email-specific content here...
<%= render :partial => 'email_footer' %> 
```

这会起作用，但仍会导致一堆复制粘贴，尽管比内联完整结构的原始版本少。一种更简洁的管理方法是为这些电子邮件设置自定义布局。

“[布局和渲染”Rails 指南和](http://guides.rubyonrails.org/layouts_and_rendering.html)[“Action Mailer”Rails 指南](http://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-layouts)的布局部分对此很有帮助，如果您以前没有这样做过的话。

您将从这些参考资料中看到，有多种方法可以在 Action Mailer 中调用布局（还有更多方法，在邮件上下文之外），但举个例子，您可以在此处创建布局模板文件：`app/views/layouts/{your_mailer_name}.html.erb`. 例如，“user_mailer.html.erb”

它的内容可能看起来像这样：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>My Fancy Email</title>
  </head>
  <body>
    <%= render :partial => 'email_header' %>
    <%= yield %>
    <%= render :partial => 'email_footer' %>
  </body>
</html> 
```

请注意`yield`通话，这是您的特定电子邮件内容将呈现的地方。

这种方法使您的内容保持“[干燥](http://programmer.97things.oreilly.com/wiki/index.php/Don't_Repeat_Yourself)”。

# html - 上传前在JS中提取音频比特和采样率信息

> ID：12700701
> 
> 赞同：2
> 
> 时间：2012-10-03T01:17:09.590
> 
> 标签：html, audio, filereader, sampling, bitrate

我正在构建一个应用程序，它允许经过身份验证的用户使用 Web 浏览器将 MP3 音频文件（语音）上传到服务器，以便在网络上分发音频。音频文件需要使用特定的比特率（32kbps 或更低）以确保有效使用带宽，并使用经批准的采样率（22.050 或 44.100）以最大限度地提高兼容性。我希望在上传之前使用 HTML5 FileReader 来确定这些信息，而不是使用服务器端脚本在上传后验证这些要求。如果浏览器检测到无效的比特率和/或采样率，则可以告知用户这一点，并且可以阻止上传尝试，直到对音频文件进行必要的修改。

这可能使用 HTML5 吗？请注意，问题是关于 HTML5，而不是关于我的应用程序的方法。HTML5 可以检测 MP3 音频文件的采样率和/或比特率吗？

仅供参考：我正在使用 FTP Java 小程序来执行上传。小程序设置为在成功上传后自动将用户转发到我选择的 URL。这将繁重的工作交给了客户端，而不是服务器。这也是必要的，因为每个上传文件的最终目的地是不同的；它们可以在不同的服务器和不同的域上，可能在服务器上支持不同的脚本语言。否则，任何一台服务器都会很快超出其存储空间，或者如果服务器端脚本进行了 FTP 传输，服务器的性能将作为单点故障迅速下降。因此，对于我的应用程序，它将上传的音频文件存储在多个服务器和多个域上，比特率和采样率的验证必须在客户端进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:34:29.587

您可以使用 FileReader API 和 Javascript 构建的音频编解码器从音频文件中提取此信息。

一个为纯 JS 编解码器提供基本代码的库是 Aurora.js - 然后实际的编解码器代码建立在它之上

[https://github.com/audiocogs/aurora.js/wiki/Known-Uses](https://github.com/audiocogs/aurora.js/wiki/Known-Uses)

自然浏览器必须支持 FileReader API。

从您的用例中，我不明白为什么需要 Java 小程序或 FTP。如果使用异步 badckend（如 Node.js、Python Twisted）和可扩展存储（Amazon S3）正确完成 HTTP 上传，则可以很好地处理多个大文件。类似的用例是调整传入图像的大小，这比从文件中提取音频元数据要求更高。客户端的唯一好处是减少了技术不熟练的用户不必要的上传次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:24:37.493

鉴于任何用户都可以更改您的脚本/标记以绕过它甚至重新利用它，我什至不会考虑它。

如果有人可以通过一些 HTML/Javascript 知识更改您的验证脚本，请不要使用 HTML/Javascript。**通过在服务器上验证它更容易确保它被验证并正确验证。**

# c# - ServiceStack IReturn

> ID：12700702
> 
> 赞同：11
> 
> 时间：2012-10-03T01:17:24.963
> 
> 标签：c#, .net, servicestack

我正在查看 2 周前发布的新 api。这好像是

```
ReqDTO : IReturn<List<ResDTO>> { //... } 
```

“IReturn”位似乎是可选的？RazorRockstars 演示项目中的 DTO 可以在没有它的情况下工作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-03T01:29:47.220

这是[ServiceStack 的新 API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)中的新增功能，它允许您记录请求 DTO 将返回的预期响应类型，例如

```
ReqDTO : IReturn<List<ResDTO>> { ... } 
```

这使您可以使用任何 C# 服务客户端调用：

```
List<ResDTO> response = client.Get(new ReqDto()); 
```

如果您没有 IReturn 标记，您的客户调用将必须如下所示：

```
List<ResDTO> response = client.Get<List<ResDTO>>(new ReqDto()); 
```

这是您服务的客户/消费者需要了解的内容。如果您在 DTO 上有标记，则响应类型是已知的。

该`IReturn<>`标记还用于确定在 ServiceStack`/metadata`页面中的 HTTP 响应中使用的响应 DTO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:21:41.283

据我所知，这只是定义请求/响应 DTO 的一种便捷方式。您可以自由使用或不使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T05:24:07.170

如果您在可移植类库中定义 DTO，您将无法使用 IReturn。也许 IReturn 应该在 ServiceStack 的 PCL 中定义。只是一个想法。

# c# - 使用 C# 与实体属性值合并的数据点/字段名称

> ID：12700703
> 
> 赞同：0
> 
> 时间：2012-10-03T01:17:29.237
> 
> 标签：c#, properties, merge, system.reflection

我有一个实体类 MyEntity.cs，它有大约 108 个属性。在我的 ASP .net 应用程序 UI 中，我正在显示来自数据库的字符串值（例如），其中包含一些以 <%fieldname%> 格式分隔的字段名或数据点。fieldname 只不过是 MyTable 表中的列名。我还阅读了 MyTable（大约有 108 列）记录（只有一条记录）并填充了实体 MyEntity。

我需要做的是将 MyEntity property.cs 值与包含 <%fieldname%> 的字符串合并。我想过使用反射，但 MyEntity.cs 中的属性名称可能与 MyTable 中的列名称不完全匹配。所以我不确定我应该如何进行。

如果有一种方法可以为 MyEntity 属性指定除属性名之外的名称，以便我可以为每个属性使用实体中的 MyTable 列名，并通过代码中的反射访问它们并替换字符串的 <%fieldname% > 使用 MyEntity.cs 属性值。任何帮助，将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:29:44.920

实体框架自动为您建模的表和存储过程生成类。我不明白为什么您不能更新这些文件并更改属性名称。我可能不建议这样做，并且您可能必须在任何时候从数据库更新模型时重新修改它们。

IMO 听起来您的数据模型很糟糕……一张表中有 108 列？噩梦听起来像它没有正常化，无法想象对那东西进行维护。

# linux - IMagemagick 的 DrawAnnotation 似乎无法在亚马逊的 Linux 上运行

> ID：12700705
> 
> 赞同：1
> 
> 时间：2012-10-03T01:17:40.730
> 
> 标签：linux, fonts, imagemagick

我正在使用 Pytohn 的魔杖 0.2.2 来访问 ImageMagick 6.5.4-7。我正在尝试将一些文字应用于一些照片。我不得不稍微扩展 wand 0.2.2，但我让它在 Windows 上运行。我的python代码如下：

```
color = image.Pixel()
color.color = 'white'
draw = image.Draw()
draw.font = 'verdana'
draw.fontsize = font_size
draw.fillcolor = color
draw.annotation(dx, dy, watermark_text)
new_image = image.Image(width=pic.width, height=pic.height)
new_image.DrawImage(draw) 
```

在我的 Amazon linux 实例上，我安装了 msttcorefonts。如果我做

```
identify -list font 
```

我得到一个包含 verdana 的字体列表。如果我运行：

```
convert -font verdana label:foo foo.gif 
```

我得到一个带有 verdana 文本的图像。

一切看起来都很好，直到我执行我的代码并且我的图片上没有文字。python 代码在 Windows 上运行良好，据我所知，imagemagick 可以在我的 linux 机器上找到字体。它只是拒绝将文字放在图片上。

我尝试过“verdana”、“Verdana-Regular”以及 ttf '/usr.../verdana.ttf' 的完整路径。我什至尝试了系统上安装的其他字体。绘图代码正在工作，如果我添加“draw.circle ...”，则会在我的图像上绘制一个圆圈。

我错过了什么？

# android - 正在编写 GPS 位置映射教程，半迷茫

> ID：12700708
> 
> 赞同：0
> 
> 时间：2012-10-03T01:18:36.160
> 
> 标签：android

所以我使用的这个教程并不像我希望的那样简单。下一步需要以下内容：

“我们需要创建一个实现抽象LocationListener类的类。这个类将注册到Location Manager以接收位置更新。我们需要覆盖这个类的所有四个方法，即onLocationChanged、onProviderDisabled/Enabled和onStatusChanged。就像我们一样只是对获取位置更新感兴趣，我们将修改 onLocationChanged 的​​代码以导航到地图视图中接收到的新位置。这是通过调用 MapController 的 animateTo 方法来实现的。

我只是想要一点建议，如果它是我需要在我自己的（new>Class）方法上创建的类，还是只是我应该添加到另一个文件中的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:55:03.910

它只是一个类的本机方法，您不必为此创建一个新方法。相反，您将覆盖类的特定方法。

onLocationChanged、onProviderDisabled/Enabled 和 onStatusChanged 方法就像您的主要活动的 onCreate。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:15:05.863

本教程有一个相对简单的示例，说明如何在 Android 中获取 gps 修复。

[http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/](http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/)

```
public class GPSTracker extends Service implements LocationListener {

@Override
public void onLocationChanged(Location location) {
}

@Override
public void onProviderDisabled(String provider) {
}

@Override
public void onProviderEnabled(String provider) {
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
}   
} 
```

本质上，您想要创建一个实现 LocationListener 的类，或者在您的活动中拥有一个嵌套类。

在任何一种情况下，您都需要覆盖这些方法以利用位置更改。

# ruby-on-rails - Rails 多步表单更新实例

> ID：12700715
> 
> 赞同：0
> 
> 时间：2012-10-03T01:19:54.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

[我刚刚观看了多步表单](http://railscasts.com/episodes/217-multistep-forms)的 railscasts ，现在我有一个多步表单，在创建新实例时效果很好，但是更新和编辑不起作用，它执行多步，但是当我单击最后一步的继续时，它只是没有更新，似乎会话丢失了...

这是控制器...如果我使用

```
session[:location_params].deep_merge!(params[:location]) if params[:location] 
```

发生一个错误，指出无法完成 deep_merge...

```
 def edit
    @location = Location.find(params[:id])
    session[:location_params] = @location
    @location.current_step = session[:location_step] = @location.steps.first
  end

  def update
    @location = Location.find(params[:id])
    @location.current_step = session[:location_step]
    if params[:back_button]
      @location.previous_step
    elsif @location.last_step?
      @location.save if @location.all_valid? and @location.changed?
    else
      @location.next_step
    end
    session[:location_step] = @location.current_step
    if @location.created_at_changed?
      flash[:success] = "Location updated!"
      session[:location_step] = session[:location_params] = nil
      redirect_to @location
    else
      render 'edit'
    end
  end 
```

感谢您的帮助和指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:32:47.297

我最终使用了 FormToWizard jquery 库，你可以[在这里](http://www.jankoatwarpspeed.com/post/2009/09/28/webform-wizard-jquery.aspx)下载。

它更干净，使视图非常干净，易于维护，不会改变控制器上的任何东西！

# javascript - 交替/双模 JavaScript 水印

> ID：12700724
> 
> 赞同：1
> 
> 时间：2012-10-03T01:21:32.037
> 
> 标签：javascript, asp.net-ajax, asp.net-4.0, watermark

在下面的代码示例中，我将`window.status`“a”替换为“b”

```
function alternateViaIntrvl() {
    setInterval('alterStatus()', 500);
}
var altrCounter = 0;

function alerted() {
    var txt = "a";
    if (altrCounter % 2 == 0) {
        txt = "b"
    }

    window.status=txta;
    countalerted++;
} 
```

我只是想制作一个从“插入日期”到“mm/dd/yyyy”的备用 Ajax 水印，但是使用 javascript 访问 ajax 太复杂了

`set_Text("mm/dd/yyyy")`

然后我找到了 ajax 的替代方法：*Md.Asaduzzaman Azad*的[javascriptWaterMark](http://www.codeproject.com/Articles/36809/TextBox-Watermark-Using-JavaScript-and-CSS)

 *我试图`setInterval()`在那个代码上实现一个，

所以我将能够拥有一个整洁的双模式 JavaScript-Watermark。

我知道它必须像`window.status`备用代码示例一样简单，但我自己不知道如何实现它。

JavaScript

```
 function Focus(objname, waterMarkText) {
        obj = document.getElementById(objname);
        if (obj.value == waterMarkText) {
            obj.value = "";
            obj.className = "NormalTextBox";
            if (obj.value == "insert date" || obj.value == "" || obj.value == null) {
                obj.style.color = "black";
            }
        }
    }

 function Blur(objname, waterMarkText) {
        var alternateWM1 = "insert date";
        var alternateWM2 = "mm/dd/yyyy";
        count++;
        obj = document.getElementById(objname);
        if (obj.value == "") {
            obj.value = waterMarkText;
            if (objname != "txtPwd") {
                obj.className = "WaterMarkedTextBox";
            }
            else {
                obj.className = "WaterMarkedTextBoxPSW";
            }
        }
        else {
            obj.className = "NormalTextBox";
        }

 if (obj.value == "insert date" || obj.value == "" || obj.value == null) {
    obj.style.color = "gray";
    }

} 
```

*   html

```
 <table>
        <tr>
            <td>
                User Id
            </td>
            <td>
                <asp:TextBox ID="txtUserId" runat="server" 
            onfocus="Focus(this.id,'insert date')"
                onblur="Blur(this.id,'insert date')" 
                Width="126px" CssClass="WaterMarkedTextBox">
                insert date
               </asp:TextBox>
            </td>
        </tr>
        <tr>
            <td>
                Password
            </td>
            <td>
                <asp:TextBox ID="txtPwd" TextMode="Password" runat="server" 
                        onfocus="Focus(this.id,'')"
                    onblur="Blur(this.id,'')" Width="126px" 
                      CssClass="WaterMarkedTextBoxPSW" />
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
                <asp:Button ID="Button1" runat="server" Text="Submit" />
            </td>
        </tr>
    </table>
    </form> 
```

这实际上是一个隐藏的表格行，默认状态是隐藏的，然后在 imageButton 单击事件（代码隐藏）上它变得可见

```
 TRinsertForm.Style.Add("visibility", "visible"); 
```

所以我想我可以在后面运行一个脚本表单代码，它会生成 javascript 代码来设置文本框初始文本或其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:49:35.433

这就是我想出的：

请参阅 html 代码，以便将其设置为完美的交替水印，因为我可以使用 javascript 和 ajax 方法结合起来

```
var original = "insert date";
var alternate = "mm/dd/yyyy";
var masked = "__/__/____";
var countalerted = 0;
var txt = "";
var intird = 0;
if (intird == 0) {
    intrId = setInterval(function () { alterWaterMarkForDateTBX() }, 1000);
}
function SetIntervalTBX() {
    setInterval(function () { alterWaterMarkForDateTBX() }, 1000);
}

function alterWaterMarkForDateTBX() {
    var d = new Date();
    var t = d.toLocaleTimeString();

    if (countalerted < 4) {
        if (countalerted % 2 == 0) {
            document.forms["form1"].elements["TBXinsertDate"].value = original;
        }
        else {
            document.forms["form1"].elements["TBXinsertDate"].value = alternate;
        }
        countalerted++;
    }
    else {
        window.status = intrId;
        clearInterval(intrId);
//        document.forms["form1"].elements["TBXinsertDate"].value = original;
    }
}

var wasFocused = false;var wasBlur = false;
function Focus(objname, waterMarkText) {
    wasFocused = true;
    if (wasBlur == false) {
        obj = document.getElementById(objname);
        if (obj.value == masked) {
            obj.value = ""; obj.removeAttribute("title");
            obj.className = "NormalTextBox";
            if (obj.value == original || obj.value == alternate || obj.value == "" || obj.value == null) {
                obj.style.color = "black";
            }
        }
    }
    else 
    {

            obj.value = "";

    }
}

function Blur(objname, waterMarkText) {

    var alternateWM1 = "insert date";
    var alternateWM2 = "mm/dd/yyyy";
    obj = document.getElementById(objname);

    if (obj.value == "" || obj.value == masked) {
        obj.value = waterMarkText;
        obj.className = "WaterMarkedTextBox";
        wasBlur = true;
    }
    else {
        obj.className = "NormalTextBox";
    }
    if (wasBlur == false) {
        if (obj.value == original || obj.value == alternate || obj.value == "" || obj.value == null ) {
            obj.style.color = "black";
            wasBlur = true;
            if (wasFocused == true) {
                SetIntervalTBX();
            }
        }
    }
}

         <asp:TextBox ID="TBXinsertDate" runat="server" ToolTip="insert date" 
        CssClass="WaterMarkedTextBox" Width="75px" OnTextChanged="TBXinsertDate_TextChanged" 
                 onfocus="Focus(this.id, this.value)"
                 onblur="Blur(this.id, this.value)" >
         </asp:TextBox>

         <cc1:TextBoxWatermarkExtender ID="insertDate_TextBoxWatermarkExtender" runat="server" TargetControlID="TBXinsertDate" WatermarkText="insert date" WatermarkCssClass="WaterMarkedTextBox">
                </cc1:TextBoxWatermarkExtender> 
```*

# html - 从文本 html 画布中提取路径

> ID：12700731
> 
> 赞同：12
> 
> 时间：2012-10-03T01:22:45.350
> 
> 标签：html, text, canvas

无论如何从html 5中的文本字母中提取路径，然后沿该路径抓取（x，y）坐标，以便字母可以由沿该字母路径的圆圈形成？

我想获取 x,y 坐标并在它们的位置应用一个形状，使其类似于“像素化”格式的文本字符串，然后是一些动画效果。

任何关于沿着画布上的字符路径获取某种 x,y 坐标的建议都会很棒。

编辑：我基本上是在尝试自动生成坐标来做类似的事情：[http ://www.html5canvastutorials.com/labs/html5-canvas-google-bouncing-balls/](http://www.html5canvastutorials.com/labs/html5-canvas-google-bouncing-balls/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-05-13T02:47:53.003

# 像素缩放

一个简单的方法是执行以下操作：

*   使用小字体，使用纯色绘制文本
*   迭代所有像素。任何 alpha = 255 的像素，存储到一个数组，但 x 和 y 随直径缩放

现在你有一个粗略的代表文本的“球”数组并且可以动画。当涉及到字母间距时，它不是非常准确，但它应该用于给定的目的（您总是可以测量每个字母并在分离点使用额外的增量值增加结束 x 值）。

较大的字体大小可以提高质量，但也会产生更多的点。与下面演示中使用的通用字体类型不同的字体类型也可能有利于整体外观（实验！）。您还可以调整 alpha 阈值以包含不完全实心但有影响的像素。

最后，不同的浏览器以不同的方式呈现文本，因此您可能也需要记住这一点（参见上文关于测量每个字母以在它们之间添加额外空间的内容）。

# 演示

![快照](../Images/1b5aa9e6086cca55a43bfd684678c83c.png)

```
var ctx = document.querySelector("canvas").getContext("2d"),
    inp = document.querySelector("input"),
    w = ctx.canvas.width,
    h = ctx.canvas.height,
    balls = [];                                     // global ball array

ctx.fillStyle = "rgb(0, 154, 253)";                 // fill must be a solid color
generate(inp.value)                                 // init default text
inp.onkeyup = function() {generate(this.value)};    // get some text to demo

function generate(txt) {
  var i, radius = 5,                                // ball radius
      data32;                                       // we'll use uint32 for speed

  balls = [];                                       // clear ball array
  ctx.clearRect(0, 0, w, h);                        // clear canvas so we can
  ctx.fillText(txt.toUpperCase(), 0, 10);           // draw the text (default 10px)

  // get a Uint32 representation of the bitmap:
  data32 = new Uint32Array(ctx.getImageData(0, 0, w, h).data.buffer);

  // loop through each pixel. We will only store the ones with alpha = 255
  for(i = 0; i < data32.length; i++) {
    if (data32[i] & 0xff000000) {             // check alpha mask
      balls.push({                            // add new ball if a solid pixel
        x: (i % w) * radius * 2 + radius,     // use position and radius to
        y: ((i / w)|0) * radius * 2 + radius, //  pre-calc final position and size
        radius: radius,
        a: (Math.random() * 250)|0            // just to demo animation capability
      });
    }
  }
  // return array - here we'll animate it directly to show the resulting objects:
}

(function animate() {
  ctx.clearRect(0, 0, w, h);
  ctx.beginPath();
  for(var i = 0, ball; ball = balls[i]; i++) {
    var dx = Math.sin(ball.a * 0.2) + ball.radius,   // do something funky
        dy = Math.cos(ball.a++ * 0.2) + ball.radius;
    ctx.moveTo(ball.x + ball.radius + dx, ball.y + dy);
    ctx.arc(ball.x + dx, ball.y + dy, ball.radius, 0, 6.28);
    ctx.closePath();
  }
  ctx.fill();
  requestAnimationFrame(animate);
})();
```

```
body {font:bold 16px sans-serif}
```

```
<label>Type some text: <input value="PIXELS"></label><br>
<canvas width=1024></canvas>
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-17T19:08:22.833

通过在字母路径上直观地放置圆圈来手动完成这是一项艰巨的任务。

*在没有人工干预的情况下自动（自动！）*变得更加困难。**

 ***这是自动排列圆圈以形成字母的方法。**

答案分为两部分...

1.  寻找“字母”，

2.  创建圆圈以填充和勾勒字体。

**1.困难的部分**

Frederik De Bleser 编写了一个名为的不错的库`opentype.js`，该库采用 .ttf 字体文件并使用画布上的二次曲线解析任何指定字符的字形轮廓：[https ://github.com/nodebox/opentype.js](https://github.com/nodebox/opentype.js)

**2.唯一稍微不那么硬的部分**

对于每个字母：

*   在每条二次曲线上找到“许多”点。这是在曲线上以间隔 T 计算 [x,y] 的算法。T 的范围从曲线开始处的 0.00 到曲线结束处的 1.00。T 不会沿曲线产生均匀间隔的 [x,y]，因此您需要过采样（因此“许多”可能意味着 1000 个 T 值在 0.00 和 1.00 之间）。

    ```
    function getQuadraticBezierXYatT(startPt,controlPt,endPt,T) {
        var x = Math.pow(1-T,2) * startPt.x + 2 * (1-T) * T * controlPt.x + Math.pow(T,2) * endPt.x; 
        var y = Math.pow(1-T,2) * startPt.y + 2 * (1-T) * T * controlPt.y + Math.pow(T,2) * endPt.y; 
        return( {x:x,y:y} );
    } 
    ```

*   找到在这些点处与曲线角度相切的角度。（基本上计算与曲线成直角的角度）。您可以使用二次公式的下一个导数来做到这一点：

    ```
    function quadraticBezierTangentAngle(t, p0, p2, p1) {
        var tt = 1 - t;
        var dx = (tt * p1.x + t * p2.x) - (tt * p0.x + t * p1.x);
        var dy = (tt * p1.y + t * p2.y) - (tt * p0.y + t * p1.y);
        return Math.tan(Math.atan2(dy,dx));
    } 
    ```

*   从曲线的开头开始，计算从当前 [x,y] 到下一个 [x,y] 的每个距离。你可以用勾股定理做到这一点：

    ```
    var dx=nextX-currentX;
    var dy=nextY-currentY;
    var distance=Math.sqrt(dx*dx+dy*dy); 
    ```

*   对数组进行重复数据删除，以使所有剩余的 [x,y] 元素与前一个 [x,y] 元素的距离为 1px。您可以通过使用第一个数组中的值填充第二个数组来做到这一点`parseInt( nextInOriginalArray - lastDistanceInNewArray)==1;`

*   确定构成每个字母的圆圈的半径。这实际上比看起来更难。对于“块状”字体，您可以在画布上绘制字母“I”。然后使用`getImageData`. 通过搜索在字母垂直中间水平运行的不透明像素的计数来计算“I”的垂直笔划的宽度。对于块状字体，`var radius = horizontalOpaquePixelCount/2;`. 对于具有可变宽度笔画的字体，您必须具有创造性。也许`var radius = horizontalOpaquePixelCount/3;`或`var radius = horizontalOpaquePixelCount/4;`。

*   遍历点数组并为每个`radius*2`像素定义一个新圆。您可以使用切角和三角函数计算每个圆的中心点，如下所示：

    ```
    var centerX = curvePointX + radius*Math.cos(tangentAngle);
    var centerY = curvePointY + radius*Math.sin(tangentAngle); 
    ```

*   在创建圆圈时，字母的曲线会在某些时候自动返回，因此您必须检查您创建的每个新圆圈，以确保它不会与现有圆圈重叠。您可以计算一个新圆是否会与每个现有圆相交，如下所示：

    ```
    var dx = newCircleCenterX - existingCircleCenterX;
    var dy = newCircleCenterY - existingCircleCenterY;
    var distance=Math.sqrt(dx*dx+dy*dy);
    var circlesAreIntersecting=(distance<=newCircleRadius+existingCircleRadius); 
    ```

微调：在字母路径中的一些端点附近，您会发现下一个完整半径的圆会溢出字母形状。如果发生这种情况，您可以缩小一些圆圈的半径以适应字体。如果您只想要一个固定半径的圆圈，那么您可以根据所有圆圈的平均半径重新计算所有圆圈的固定半径 - 包括您必须“缩小”以适应字体的那些。

例如。这是由 15 个圆圈组成的字母“L”。

![在此处输入图像描述](../Images/46a2e927d9ce1f24802a07e48a8aa3b9.png)

但是 2 个红色圆圈从它的字体中掉了出来。您可以 (1) 缩小红色圆圈以适应字形或 (2) 根据适合字形的平均半径重新计算新的固定圆半径：

```
var total=0;
total += greenRadii * 13;
total += verticalRedRadiusResizedToFitInsideLetterform;
total += horizontalRedRadiusResizedToFitInsideLetterform;
var newRadius = total / 15; 
```

您可以通过计算 2 条线的交点来计算适合字母形状的红色半径的长度：（1）通过连接最后一个绿色圆圈中心和红色圆圈中心形成的线段，（2）垂直形成的线曲线上的最后一点。这是计算两条线的交点的算法：

```
// Get interseting point of 2 line segments (if any)
// Attribution: http://paulbourke.net/geometry/pointlineplane/
function line2lineIntersection(p0,p1,p2,p3) {

    var unknownA = (p3.x-p2.x) * (p0.y-p2.y) - (p3.y-p2.y) * (p0.x-p2.x);
    var unknownB = (p1.x-p0.x) * (p0.y-p2.y) - (p1.y-p0.y) * (p0.x-p2.x);
    var denominator  = (p3.y-p2.y) * (p1.x-p0.x) - (p3.x-p2.x) * (p1.y-p0.y);        

    // Test if Coincident
    // If the denominator and numerator for the ua and ub are 0
    //    then the two lines are coincident.    
    if(unknownA==0 && unknownB==0 && denominator==0){return(null);}

    // Test if Parallel 
    // If the denominator for the equations for ua and ub is 0
    //     then the two lines are parallel. 
    if (denominator == 0) return null;

    // If the intersection of line segments is required 
    // then it is only necessary to test if ua and ub lie between 0 and 1.
    // Whichever one lies within that range then the corresponding
    // line segment contains the intersection point. 
    // If both lie within the range of 0 to 1 then 
    // the intersection point is within both line segments. 
    unknownA /= denominator;
    unknownB /= denominator;

    var isIntersecting=(unknownA>=0 && unknownA<=1 && unknownB>=0 && unknownB<=1)

    if(!isIntersecting){return(null);}

    return({
        x: p0.x + unknownA * (p1.x-p0.x),
        y: p0.y + unknownA * (p1.y-p0.y)
    });
} 
```*

# graphics - 使用混合模式重新创建 HSV 颜色

> ID：12700733
> 
> 赞同：6
> 
> 时间：2012-10-03T01:22:58.937
> 
> 标签：graphics, colors, alphablending, compositing, color-blending

我正在开发一个应用程序，该应用程序创建的图像的色调、饱和度和值会根据不同的参数而变化。出于性能原因，单独渲染色调、饱和度和值分量，然后使用 Photoshop 风格的混合模式（正片叠底、叠加、屏幕、色调等）将它们合成在一起是有意义的。

我已经知道如何对 RGB 图像执行此操作：将每个通道拆分为自己的红色、绿色或蓝色图像，其值范围从透明到该通道的颜色。将它们叠加在黑色之上并将它们的混合模式设置为屏幕，嘿，你有你的彩色图像：

![由组件制成的 RGB 图像](../Images/d8b29bf38b559c3ac1e849cf190bfbbd.png)

我将如何使用由 HSV 值定义的图像来执行此操作？我的应用程序经常更改其中一个通道而不更改其他两个通道，如果我可以在 GPU 上合成现有图像而不是每次发生变化时都渲染一个全新的图像，它将加快我的渲染速度。

这是一个例子： ![使用单独的 H、S 和 V 通道生成的图像](../Images/692749d0d303d938f4454288b6c46d47.png)

在此示例中，色调在圆周上从 0º 到 360º 变化，饱和度从中心到边缘从 0% 到 100% 变化，亮度 (V) 在圆周上从 0% 到 100% 变化。这是我的应用程序创建的典型图像类型。有没有可以用来分别创建这些通道并以数学上完美的方式合成它们的常见混合模式的组合？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-06T10:54:31.573

> 我的应用程序经常更改其中一个通道而不更改其他两个通道，如果我可以在 GPU 上合成现有图像而不是每次发生变化时都渲染一个全新的图像，它将加快我的渲染速度。[OP，@ZevEisenberg]

关于速度和 GPU，我只是将[转换函数](http://www.cs.rit.edu/~ncs/color/t_convert.html)放入片段着色器（[例如](https://stackoverflow.com/questions/15095909/from-rgb-to-hsv-in-opengl-glsl)）中。这将读取存储在纹理或三个不同纹理中的 HSV，按像素进行转换并输出 RGB。好，易于。我看不出不更改其他图层有什么好处，因为 H、S 或 V 都会影响所有 RGB 通道。也许存储中间 RGB 结果，例如`hue=hsv2rgb(H,1,1)`，并更新`final=(hue*S+1-S)*V`，缓存 hue-to-rgb 但我认为这不值得。

无论如何，每种混合模式都有一个简单的公式，您可以将它们串在一起以用于 HSV，涉及一组过于复杂的中间纹理，但它会慢*得多*，主要是因为不必要的临时存储和内存带宽。更不用说，尝试将公式重写为混合函数听起来非常具有挑战性，分支、除法`fract`、、钳位、绝对等...

> 我对将图像拆分为其 HSV 组件并使用 Photoshop 中的混合模式重新创建原始图像的解决方案非常感兴趣。[赏金，@phisch]

关于photoshop...我不是靠钱做的。**所以在 gimp 中，有`Colours -> Components -> Compose/Decompose`**哪个可以为你做到这一点。如果这在 Photoshop 中不存在，我会有点惊讶，但也有点奇怪。如果没有的话，也许有 Photoshop 脚本/插件可以做到这一点？但是你确实特别说*blending*。[您的问题可能会在https://graphicdesign.stackexchange.com/](https://graphicdesign.stackexchange.com/)上得到更多关注。下面，我对所涉及的复杂性给出了一个想法，我怀疑 Photoshop 是否真的可以做到。在 0 到 1 之外的像素值可能有一些方法，但是您可能会遇到精度问题，这是不应该的。

* * *

不管怎样，挑战就是挑战，尽管不切实际。以下内容仅供娱乐。

我将从以下函数（从[这里](https://stackoverflow.com/questions/15095909/from-rgb-to-hsv-in-opengl-glsl)）和三个 HSV 纹理开始......

```
vec3 hsv2rgb(vec3 c)
{
    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
} 
```

![H](../Images/9f45da8fded87e31103f897fe7b8a21d.png) ![H](../Images/84834d2c2905c4e920408472458a4e3e.png) ![H](../Images/ab532d46fc0aedad9ccea0f53ee792c2.png)

我只知道**OpenGL**，我不确定在没有浮点纹理或一些扩展混合功能的情况下如何做到这一点，所以我正在使用它们。但我只被允许使用混合（没有任何着色器）。对于常量，我将使用 (1,1,1), (1,2/3,1/3), (3,3,3), (6,6,6) (1/255,1) 制作纹理/255,1/255), (255,255,255), (1/2,1/2,1/2) 和 (0,0,0) 因为我无法让 GL_ZERO 与`GL_DIFFERENCE_NV`.

1.  从色调纹理开始
2.  使用添加剂混合添加 (1,2/3,1/3)
3.  找到小数部分

    1.  使用减法混合，减去 0.5（这是`floor()`因为我假设 GL在转换为 8 位时会*舍*入颜色。如果不是，请跳过此步骤）
    2.  缩小 1/255。这可以通过常规的 alpha 混合来完成，但我已经使用颜色纹理进行了缩放。
    3.  通过非浮点纹理四舍五入到最接近的 1/255
    4.  放大 255（回到浮点纹理）

        ![整数](../Images/b0a8ef6d8b42188b404f98796b0d344b.png)

    5.  现在我们有了整数分量。从我们开始的内容中减去这个

        ![分数](../Images/b52c08a28f84c4bf1a7be3ffc0f8024d.png)

4.  放大 6

5.  减法混合，取 3
6.  取值的绝对值

    我将简单地使用`GL_DIFFERENCE_NV`它，但如果没有它，下一步可能会使用两个单独的夹子。因为底片无论如何都会被钳制，类似于`clamp(p-K.xxx,0,1) + clamp(-p-K.xxx,0,1)`.

7.  减 1

    ![在此处输入图像描述](../Images/49a12a86fd9faaaa9533a7f59a34ce1c.png)好了，色调就完成了

8.  可以通过非浮点纹理进行夹紧，但只是要使用`GL_MIN`

9.  现在我可以使用 alpha 混合`mix()`，但饱和度被加载为没有 alpha 通道的 B/W 图像。因为它是混合白色的，所以用手做实际上更容易......

    按饱和度缩放

10.  加 1
11.  减去饱和度

    ![在此处输入图像描述](../Images/4ef2094b131400927aef594fa33b5e3d.png)并且已经应用​​了饱和度

12.  按值缩放

    ![在此处输入图像描述](../Images/f6e46784195b30edb633bb99d9378532.png)还有图像

13.  咖啡时间（休闲时光

全部使用完成

*   `glBlendEquation`和`GL_FUNC_REVERSE_SUBTRACT`_ `GL_MIN`_`GL_DIFFERENCE_NV`
*   `glBlendFunc`

这是我的代码...

```
//const tex init
constTex[0] = makeTex() with 1, 1, 1...
constTex[1] = makeTex() with 1, 2/3, 1/3...
constTex[2] = makeTex() with 3, 3, 3...
constTex[3] = makeTex() with 6, 6, 6...
constTex[4] = makeTex() with 1/255, 1/255, 1/255...
constTex[5] = makeTex() with 255, 255, 255...
constTex[6] = makeTex() with 1/2, 1/2, 1/2...
constTex[7] = makeTex() with 0, 0, 0...

...

fbo[0] = makeFBO() with GL_RGB
fbo[1] = makeFBO() with GL_RGB32F
fbo[2] = makeFBO() with GL_RGB32F

...

hsv[0] = loadTex() hue
hsv[1] = loadTex() value
hsv[2] = loadTex() saturation

...

fbo[1].bind();
glDisable(GL_BLEND);
draw(hsv[0]); //start with hue
glEnable(GL_BLEND);
glBlendEquation(GL_FUNC_ADD);
glBlendFunc(GL_ONE, GL_ONE); //add
draw(constTex[1]); //(1, 2/3, 1/3)
glBlendFunc(GL_ONE, GL_ONE);
fbo[1].unbind();

//compute integer part
fbo[2].bind();
glDisable(GL_BLEND);
draw(*fbo[1].colour[0]); //copy the last bit
glEnable(GL_BLEND);
glBlendEquation(GL_FUNC_REVERSE_SUBTRACT);
glBlendFunc(GL_ONE, GL_ONE); //subtract
draw(constTex[6]); //0.5
glBlendEquation(GL_FUNC_ADD);
glBlendFunc(GL_ZERO, GL_SRC_COLOR); //scale down
draw(constTex[4]); //1/255
fbo[2].unbind();

fbo[0].bind(); //floor to integer
glDisable(GL_BLEND);
draw(*fbo[2].colour[0]);
fbo[0].unbind();

fbo[2].bind(); //scale back up
glDisable(GL_BLEND);
draw(*fbo[0].colour[0]);
glEnable(GL_BLEND);
glBlendEquation(GL_FUNC_ADD);
glBlendFunc(GL_ZERO, GL_SRC_COLOR); //scale up
draw(constTex[5]); //255
fbo[2].unbind();

//take integer part for fractional
fbo[1].bind();
glEnable(GL_BLEND);
glBlendEquation(GL_FUNC_REVERSE_SUBTRACT);
glBlendFunc(GL_ONE, GL_ONE); //subtract
draw(*fbo[2].colour[0]); //integer part
glBlendEquation(GL_FUNC_ADD);
glBlendFunc(GL_ZERO, GL_SRC_COLOR); //scale
draw(constTex[3]); //6
glBlendEquation(GL_FUNC_REVERSE_SUBTRACT);
glBlendFunc(GL_ONE, GL_ONE); //subtract
draw(constTex[2]); //3
glBlendEquation(GL_DIFFERENCE_NV);
glBlendFunc(GL_ZERO, GL_ONE); //take the absolute
draw(constTex[7]); //0
glBlendEquation(GL_FUNC_REVERSE_SUBTRACT);
glBlendFunc(GL_ONE, GL_ONE); //subtract
draw(constTex[0]); //1
glBlendEquation(GL_MIN);
glBlendFunc(GL_ONE, GL_ONE); //clamp (<0 doesn't matter, >1 use min)
draw(constTex[0]); //1
glBlendEquation(GL_FUNC_ADD);
glBlendFunc(GL_ZERO, GL_SRC_COLOR); //scale
draw(hsv[1]); //saturation
glBlendEquation(GL_FUNC_ADD);
glBlendFunc(GL_ONE, GL_ONE); //add
draw(constTex[0]); //1
glBlendEquation(GL_FUNC_REVERSE_SUBTRACT);
glBlendFunc(GL_ONE, GL_ONE); //subtract
draw(hsv[1]); //saturation
glBlendEquation(GL_FUNC_ADD);
glBlendFunc(GL_ZERO, GL_SRC_COLOR); //scale
draw(hsv[2]); //saturation
fbo[1].unbind();

fbo[1].blit(); //check result 
```

# deployment - TFS Build Workflow 和 MSBuild 的输出序列

> ID：12700739
> 
> 赞同：1
> 
> 时间：2012-10-03T01:24:07.433
> 
> 标签：deployment, msbuild, msdeploy

我正在修改复制的构建过程模板`BuildAndDeploy.xaml`以包含 InvokeProcess 活动。此活动将运行`_PublishedWebsites\ProjectName_Package\ProjectName.deploy.cmd`以将 Web 应用程序部署到 QA 服务器。最终，我将为`ProjectName.deploy.cmd`网络场中的每台服务器运行多次。手动一切正常，但通过 TFS 构建代理，`_PublishedWebsites`文件夹及其内容创建得太晚了。我的第一次尝试是`InvokeProcess`在“”序列中添加活动`Compile the Project`作为最后一步。然后我把它移到“ `If Not DisableTests`”之后。为了排除故障，我在`BuildDetail.DropLocation`文件夹中运行 dir /s 命令，它始终只输出日志文件夹，不输出其他任何内容。我还手动验证了编译的输出和`_PublishedWebsites`文件夹及其内容是在我想要运行的点之后创建的`ProjectName.deploy.cmd`文件。工作流中的哪个位置是理想的并保证`ProjectName.deploy.cmd`准备好文件和其他相关的打包内容？

我正在遵循[TFS2010 Build Definition to Deploy to multiple servers](https://stackoverflow.com/questions/3519501/tfs2010-build-definition-to-deploy-to-multiple-servers/3544385#4315546)中接受的答案中给出的方法。

如果重要的话，构建放置位置是一个 UNC 路径。MSBuild 中使用的参数是`/p:DeployOnBuild=True`. TFS 构建正确地创建了包，我可以运行`ProjectName.deploy.cmd`并且 web 部署运行顺利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T06:37:03.063

是在外部的最后的活动中创建`BuildDetail.DropLocation\_PublishedWebsites`的。查找此文件的适当位置应为. 该文件夹和所有文件都是由 MSBuild 活动本身创建的。`Revert Workspace and Copy Files to Drop Location``Try Compile, Test, and Associate Changesets and Work Items``BinariesDirectory\_PublishedWebsites``BuildDetail.DropLocation\_PublishedWebsites`

# python - 如何防止 telnet 套接字在输出中间遇到空行时关闭？

> ID：12700740
> 
> 赞同：0
> 
> 时间：2012-10-03T01:24:17.837
> 
> 标签：python, telnet

我正在使用 python 文档模块中的 telnet 脚本[http://docs.python.org/library/telnetlib.html](http://docs.python.org/library/telnetlib.html) 如果输出没有空行，该脚本可以正常工作。
但是如果遇到空行，telnet Socket 会关闭（脚本终止）。

输出如下：line1
（空行）
line2

```
import getpass  
import sys  
import telnetlib  

HOST = "localhost"  
user = raw_input("Enter your remote account: ")  
password = getpass.getpass()  

tn = telnetlib.Telnet(HOST)  

tn.read_until("login: ")  
tn.write(user + "\n")  
if password:  
    tn.read_until("Password: ")  
    tn.write(password + "\n")  

tn.write("ls\n")  
tn.write("exit\n")  

print tn.read_all() 
```

# php - 在 php 中对 mysql_query 应用条件

> ID：12700741
> 
> 赞同：0
> 
> 时间：2012-10-03T01:24:19.897
> 
> 标签：php, mysql

对不起，我真的很愚蠢的问题。（我在这方面很新！）。

我有一个查询（mysql，编程语言是php）：

```
mysql_query("INSERT INTO user (id, f_name, l_name, email, user_name, password, b_day, gender, country, p_number, address, active)
VALUES ('NULL', '$_POST[fname]', '$_POST[lname]', '$_POST[email]', '$_POST[username]', '$_POST[password]', '$_POST[bday]', '$gender', '$_POST[country]', '$_POST[phone]', 'address', '0')")

or die("The username already exist"); 
```

我需要对其应用一些条件，比如......

```
if (mysql_query done inserting successfully){
// do 1-
// 2-
// 3-
// 4-
}

else {die("The username already exist");
//and do 
// 1-
// 2-
// 3-
// 4-

} 
```

顺便说一句，我在 mysql 数据库中将用户名设置为唯一的，因此如果有人想插入类似的东西并且我将其捕获为用户已经存在，则会给出错误。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:31:15.897

如果您在 MySQL 中遇到唯一键约束，它将抛出一个错误，导致 PHP 抛出一个错误，然后显示在您的日志中，这意味着您忘记在代码中执行某些操作。在尝试 INSERT 语句之前，您应该执行单独的 SELECT 查询以确定用户是否已经存在（验证）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:37:22.680

不鼓励使用 mysql_* 函数。你应该学习使用 MySqli 或 PDO。不过，我只会回答你的问题。

```
$qry = mysql_query("...");
if ($qry)
{
    //do 1-2-3-4
}
else
{
    //did not insert
} 
```

在插入任何内容之前，您可以进行查询检查用户是否已经存在。

您应该对那些 $_POSTS 进行消毒和清洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T01:38:13.833

如果要查找用户名是否存在，需要事先做一个select语句

```
SELECT * FROM user WHERE username = 'xxx' 
```

运行该查询后，通过使用 mysql_num_rows（或 mysqli_num_rows）计算返回的行数来检查用户名是否存在。

```
$result = mysql_query("SELECT * FROM user WHERE username = 'xxx'", $link);
$num_rows = mysql_num_rows($result);
if ($num_rows == 0) {
    mysql_query("INSERT INTO user (id,f_name,l_name,email,user_name,password,b_day,gender,country,p_number,address,active) VALUES ('NULL','$_POST[fname]','$_POST[lname]','$_POST[email]','$_POST[username]','$_POST[password]','$_POST[bday]','$gender','$_POST[country]','$_POST[phone]','address','0')")
} else {
    die("The username already exist");
} 
```

建议：

*   使用 mysqli 而不是 mysql
*   使用 mysqli_real_escape_string (http://www.php.net/manual/en/mysqli.real-escape-string.php) 转义要插入数据库的输入

# internet-explorer - IE10 会使用 `addEventListener` 还是 `attachEvent`？

> ID：12700742
> 
> 赞同：-4
> 
> 时间：2012-10-03T01:24:23.143
> 
> 标签：internet-explorer, dom, dom-events, internet-explorer-10, attachevent

到目前为止，它还会像其他人一样邪恶、令人沮丧和古怪吗？他们什么时候才能使用该程序，或者他们会一直这样做吗？就个人而言，我希望他们不会让人们更快地放弃他们而转向免费软件，这样我就可以使用更短的测试：

`var addEventListener = !-[1,] ? "attachEvent" : "addEventListener";`而不是每次都测试方法本身。或者 IE10 会同时支持这两者吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:04:18.143

IE9 使用`addEventListener`.
IE8用过`XMLHttpRequest`。

通过尝试测试“IE 怪癖”然后围绕它进行编程，您将失去实际使用标准功能的能力。
尤其是当您测试的怪癖与您要使用的功能无关时。一些具有这些怪癖的浏览器是否也不支持一个标准功能或另一个并不重要......
因为其他一些浏览器没有这个怪癖，也没有这个功能......
...或者确实具有该功能但仍然有怪癖。

# ruby-on-rails-3.2 - Rails 引擎中的虚拟应用程序去哪儿了？

> ID：12700744
> 
> 赞同：0
> 
> 时间：2012-10-03T01:24:49.727
> 
> 标签：ruby-on-rails-3.2

我记得不久前在玩 Rails 引擎时，在文件夹`dummy`中创建了一个 Rails 应用程序`lib`- 该应用程序用于驱动 Rails 引擎以进行测试。在 Rails 3.2.8 中，那个虚拟应用程序去了哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T01:39:15.097

默认情况下在您的 /test 文件夹中...

对于 rspec-rails

`rails plugin new --mountable --dummy-path=spec/dummy`

并在您的 spec_helper.rb 中更改对此的要求

`require File.expand_path("../../spec/dummy/config/environment", __FILE__)`

# c# - 在编辑页面上显示选中/选中的项目

> ID：12700755
> 
> 赞同：1
> 
> 时间：2012-10-03T01:26:26.320
> 
> 标签：c#, asp.net-mvc

所以我有这个页面，用户可以在其中选择两个不同类别（案例和当事人）的项目。当用户创建访问（计划）时，他们可以从“案例”类别中选择一个或多个项目并选择某些参与方。然后他们根据选择保存信息。当我转到此创建的时间表的编辑页面时，我希望为在创建页面期间选择和保存的项目标记复选框。我不确定我是否错过了传递的参数或我需要显示所选项目的内容。

我的 Create Get & Post Code（保存包含选择的信息）

```
[HttpGet]
    public ActionResult Create(Guid caseId)
    {
        var viewModel = new VisitViewModel();
        SetCaseFields(caseId, viewModel);
        viewModel.Time = _defaultVisitTime;
        AddLookupsToViewModel(viewModel);
        return View(viewModel);

    }

[HttpPost]
    public ActionResult Create(VisitViewModel viewModel, Guid[] associatedCasesSelected, Guid[] selectedParties)
    {
        if (!ModelState.IsValid)
        {
            viewModel.Time = _timeEntryHelper.Value;
            AddLookupsToViewModel(viewModel);
            return View(viewModel);
        }
        VisitEntry dto = Mapper.Map<VisitViewModel, VisitEntry>(viewModel);
        dto.VisitDate = _timeEntryHelper.AddTimeToDate(dto.VisitDate);
        dto.CasePartyIds = selectedParties;
        dto.Cases = associatedCasesSelected;
        SetCurrentUserAndOffice(dto);
        try
        {
            _visitEntryService.Create(dto, dto.Cases);
            this.FlashInfo(string.Format(Message.ConfirmationMessageCreate, Resources.Entities.Visit.EntityName));
        }
        catch (RulesException ex)
        {
            ex.CopyTo(ModelState);
        }
        if (ModelState.IsValid)
            return RedirectToAction("Edit", "Case", new { caseId = viewModel.CaseId });
        return View(viewModel);
    } 
```

这是我的编辑获取和发布方法。

```
[HttpGet]
    public ActionResult Edit(Guid visitEntryId)
    {
        VisitEntry dto = _visitEntryService.Get(visitEntryId);
        if (dto == null) return View("Error");
        VisitViewModel viewModel = Mapper.Map<VisitEntry, VisitViewModel>(dto);
        SetCaseFields(dto.CaseId, viewModel);
         AddLookupsToViewModel(viewModel);
        return View(viewModel);}

[HttpPost]
        public ActionResult Edit(VisitViewModel viewModel, Guid[] associatedCasesSelected, Guid[] selectedParties)
        {
            if(!ModelState.IsValid)
            {
                viewModel.Time = _timeEntryHelper.Value;
                AddLookupsToViewModel(viewModel);
                return View(viewModel);
            }

            try
            {
                VisitEntry dto = Mapper.Map<VisitViewModel, VisitEntry>(viewModel);
                dto.VisitDate = _timeEntryHelper.AddTimeToDate(dto.VisitDate);
                dto.CasePartyIds = selectedParties;
                dto.Cases = associatedCasesSelected;
                SetCurrentUserAndOffice(dto);
                _visitEntryService.Update(dto, dto.Cases);
            }
            catch (RulesException ex)
            {
                ex.CopyTo(ModelState);
            }

            if (!ModelState.IsValid)
            {
                viewModel.Time = _timeEntryHelper.Value;
                AddLookupsToViewModel(viewModel);
                return View(viewModel);
            }
            this.FlashInfo(string.Format(Message.ConfirmationMessageUpdate, Kids.Resources.Entities.Visit.EntityName));
            return RedirectToAction("Edit", "Case", new {caseId = viewModel.CaseId});

        } 
```

此方法加载聚会信息：

```
IList<Party> caseParties =
            _associatedCasePartyService.GetAssignedPartiesForThisAndAssociatedCases(viewModel.CaseId,
                                                                                    _currentUser.OfficeId);
        if (caseParties != null)
            viewModel.AvailableCaseParties = caseParties; 
```

这是我的视图模型：

```
public class VisitViewModel 
{
    public IEnumerable<Party> AvailableCaseParties { get; set; }
    public IList<Guid> PartiesSelected { get; set; }
} 
```

VisitForm.ascx 包含字段展示位置：

```
<%Html.RenderPartial("Parties", Model); %> 
```

Party.ascx - 包含允许选中该框的行，完成后编辑条目，页面加载所有保存的信息，除了选中的各方：

```
 <% if (Model.AvailableCaseParties != null && Model.AvailableCaseParties.Count() > 0)
     {%>
         <div class="row">
         <fieldset>
         <legend>Parties</legend>
         <div>
                                            <%=Html.Grid(Model.AvailableCaseParties).Attributes(id => "PartiesGrid").Columns(
         column =>
           {
             column.For(party =>
             string.Format("<input type='checkbox' {1} name='selectedParties' value='{0}'/>",
                                                                                 party.PartyId, Model.PartiesSelected != null &&  Model.PartiesSelected.Count(p => p == party.PartyId) > 0 ? "checked" : string.Empty)).Encode(false).Header(string.Format("<TH><input type='checkbox' name='checkSelect'/></TH>"));

         column.For(party => party.FullName).Named(Kids.Resources.Entities.Party.EntityName);
                                                    }
                                                                  ).Empty(string.Format("No {0}", Kids.Resources.Entities.Party.EntityNamePlural))
                  %>
               </div>
          </fieldset>
     </div> 
```

# user-controls - Umbraco 4.9.0 用户控制错误

> ID：12700756
> 
> 赞同：1
> 
> 时间：2012-10-03T01:26:29.520
> 
> 标签：user-controls, umbraco, asp.net-controls

我的用户控件属性中出现以下错误：

```
Error reading usercontrols/BrandHub/emintRegister.ascx

The following list shows the Public Properties from the Control. By checking the Properties and click the "Save Properties" button at the bottom, umbraco will create the corresponding Macro Elements.

System.Web.HttpParseException (0x80004005): Could not load type 'umbraco.emintControls.usercontrols.BrandHub.emintRegister'. ---> System.Web.HttpParseException (0x80004005): Could not load type 'umbraco.emintControls.usercontrols.BrandHub.emintRegister'. ---> System.Web.HttpException (0x80004005): Could not load type 'umbraco.emintControls.usercontrols.BrandHub.emintRegister'. at System.Web.UI.TemplateParser.GetType(String typeName, Boolean ignoreCase, Boolean throwOnError) at System.Web.UI.TemplateParser.ProcessInheritsAttribute(String baseTypeName, String codeFileBaseTypeName, String src, Assembly assembly) at System.Web.UI.TemplateParser.PostProcessMainDirectiveAttributes(IDictionary parseData) at System.Web.UI.TemplateParser.ProcessException(Exception ex) at System.Web.UI.TemplateParser.ParseStringInternal(String text, Encoding fileEncoding) at System.Web.UI.TemplateParser.ParseString(String text, VirtualPath virtualPath, Encoding fileEncoding) at System.Web.UI.TemplateParser.ParseString(String text, VirtualPath virtualPath, Encoding fileEncoding) at System.Web.UI.TemplateParser.ParseFile(String physicalPath, VirtualPath virtualPath) at System.Web.UI.TemplateParser.Parse() at System.Web.Compilation.BaseTemplateBuildProvider.get_CodeCompilerType() at System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider) at System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders() at System.Web.Compilation.BuildProvidersCompiler.PerformBuild() at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath) at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) at System.Web.Compilation.BuildManager.GetVPathBuildResult(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean ensureIsUpToDate) at System.Web.UI.TemplateControl.LoadControl(VirtualPath virtualPath) at umbraco.developer.assemblyBrowser.Page_Load(Object sender, EventArgs e) 
```

我试过“/usercontrols/BrandHub/emintRegister.ascx”，但我得到了同样的错误。

网页上显示以下错误消息：

```
Error creating control (/usercontrols/BrandHub/emintRegister.ascx).
Maybe file doesn't exists or the usercontrol has a cache directive, which is not allowed! See the tracestack for more information! 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:46:58.770

哎呀，我忘了把相关的 .dll 文件复制到“bin”文件夹。很高兴这很简单。

# algorithm - 均值偏移图像分割

> ID：12700760
> 
> 赞同：0
> 
> 时间：2012-10-03T01:27:10.267
> 
> 标签：algorithm, matlab, image-processing, image-segmentation

我 现在用固定带宽实现了来自[http://courses.csail.mit.edu/6.869/handouts/PAMIMeanshift.pdf的 meanshift 算法。](http://courses.csail.mit.edu/6.869/handouts/PAMIMeanshift.pdf)当我使用 h=[8 4 10] 在摄影师图像上运行我的 MATLAB 时，正如他们建议的那样，我得到了大约 4000 个集群（我对像素进行了光栅扫描，每个像素计算它映射和合并区域的模式，如果它们在 h) 内。对于 256x256 情况，此算法也需要大约 5 分钟。

我已经尝试阅读/使用他们的代码，但我需要一些解释......

我的结果是否符合预期，或者我可以在不进行后期处理的情况下将其用于更少的集群吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:33:59.080

如果我查看每个集群的像素数，我会发现 4000 中的大多数像素少于 20 个（论文中定义的 h 向量中的第三个数字），因此通过将这些区域与更大的区域合并，可以得到更易于管理的集群

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:25:19.567

有一个名为 EDISON 的实现，它实现了均值偏移聚类。它可作为 GUI 包和 mex-matlab 包装器使用 [http://coewww.rutgers.edu/riul/research/code/EDISON/index.html](http://coewww.rutgers.edu/riul/research/code/EDISON/index.html)

您可能会发现将结果与它进行比较很有帮助。

# javascript - Google PlusOne 的这个功能有什么作用？

> ID：12700761
> 
> 赞同：0
> 
> 时间：2012-10-03T01:27:16.040
> 
> 标签：javascript

在以下函数中：

```
(function() {
  var po = document.createElement('script');
  po.type = 'text/javascript';
  po.async = true;
  po.src = 'https://apis.google.com/js/plusone.js';
  var s = document.getElementsByTagName('script')[0]; 
  s.parentNode.insertBefore(po, s);  })
(); 
```

下面创建一个po文档脚本对象，源码来自google plusone.js。然后获取文档的第一个脚本元素并分配给 s。最后在 po 之前插入 script s。

我的问题是该功能的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:30:02.557

该函数简称为立即调用函数表达式或 IIFE。目的是将代码封闭在一个新的范围内，这样变量就不会泄漏到全局范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:31:16.217

此函数动态插入和加载脚本到当前页面（动态脚本包含）。

该函数本身是一个 IIFE，它可以防止将变量添加到全局范围。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T01:30:44.100

它在现有脚本元素之前插入新的 s 脚本。

# java - 是否可以将 try 块内部的变量返回到类的主要范围？

> ID：12700765
> 
> 赞同：1
> 
> 时间：2012-10-03T01:28:18.893
> 
> 标签：java

我正在尝试处理 Java 的错误处理。是否可以让小型 try/catch 块做一件事，然后将其操作的结果返回到主范围？

似乎*一切*都必须进入 try 块，这似乎有点奇怪。

我设置了以下测试：

```
public class test {
    public static void main(String[] args) {
        System.out.println(0-10);
        int guess;
        try {
            guess = 5;
        }
        catch(Exception ex) {
            System.out.println("bugger");
        }
        System.out.println(guess);
    }
} 
```

只是为了举例，我声明了一个变量，然后在 try 块内为其赋值，但它似乎只存在于 try 块内。尝试在 try 之外打印它会导致错误。有没有办法从尝试中传递信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:31:16.800

它会导致错误，因为编译器`guess`在程序结束时尝试打印它时无法知道是否已初始化。如果在你的`try`块中抛出异常并且`guess`永远不会分配给任何东西怎么办？您必须首先在开始时将其分配给某个默认值，例如`int guess = 0`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T01:33:43.883

使用您现有的代码，如果您尝试访问`guess`try 块之外的变量，编译器会告诉您：“`guess`变量可能未初始化”。

解决方案：直接在 try 块之外分配值，如下所示：

```
int guess = 5; 
```

但我想这样做会让你的 try/catch 没用。

因此，根据您对样本的真正期望，例如，您可以简单地将其初始化为 0。

```
public class test {
    public static void main(String[] args) {
        System.out.println(0-10);
        int guess = 0;
        try {
            guess = 5;
        }
        catch(Exception ex) {
            System.out.println("bugger");
        }
        System.out.println(guess);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T01:36:22.587

根据定义，try-catch 块不能保证完整执行。结果，编译器不知道`guess`已经设置`5`为确定，即使它显然会。因此，由于本地字段必须在使用之前进行初始化，编译器不知道它`guess`肯定会被赋值。

要解决这个问题，您可以简单地设置`guess`为默认值，以便编译器知道它已被初始化。

```
//...
int guess = 0;
try {
    guess = 5;
}
//... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T01:36:23.987

从概念上讲，如果操作您的变量guess 可能会由于错误而引发异常，那么在相应的catch 块中捕获它之后继续操作它是没有意义的。

如果操纵猜测不会触发任何类型的异常，只需在 try 块之外处理它就可以了。

您提供的代码模棱两可，因为如果引发并捕获异常，则程序将没有一致的值。

# c# - 如何以使用第二个 api 调用从第一个 api 调用下载图像的方式链接 api 调用？

> ID：12700771
> 
> 赞同：0
> 
> 时间：2012-10-03T01:29:01.717
> 
> 标签：c#, xml, windows-phone-7, asynchronous, async-await

我正在使用 api 来解析 xml 文件中的数据。我可以通过一个 api 调用来解析大部分数据。每个对象都有 Title、source、comment、action、objectkey 和其他我可以轻松解析的属性。但是我还需要一个图像属性。该图像未在 xml 文件中列出，但我可以在第二个 api 调用中使用它来解析图像。如何以某种方式执行此操作，以便我可以绑定到同一个列表框，以便每个对象都具有它们的所有属性，包括来自第二个 api 调用的图像？

有人提到异步可能是要走的路，但我不确定....

```
XDocument streamFeed = XDocument.Load(new StringReader(response.Content));
                var data = from query in streamFeed.Descendants("interaction")
                           select new Interaction
                           {
                                 title  = (string)query.Element("title"),
                                 displayName = (string)query.Element("displayName"),
                                 action = (string)query.Element("action"),                               
                                 userId   = (string)query.Element("userId"),
                                 objectKey = ((string)query.Element("objectKey")),
                                 timestamp = (string)query.Element("timestamp"),
                                 comment = (string)query.Element("comment"),
                                 source = (string)query.Element("source"),
                                 image =  getImage() ---> I imagine the second api call here

                           };

                streamListBox.ItemsSource = data;

            }
            catch (Exception e)
           {
                MessageBox.Show(e.Message);
            }

        });
    }

    public string getImage(string key)
    {
                    api calls here =>
        {

            try
            {
                //MessageBox.Show(response.Content);
                XDocument streamFeed = XDocument.Load(new StringReader(response.Content));
                var data2 = from query in streamFeed.Descendants("movie")
                           select new Object
                           {
                               image = (string)query.Element("image"),
                           };

                //streamListBox.ItemsSource = data2;

            }
            catch (Exception e)
            {
                MessageBox.Show(e.ToString());
            }

            // MessageBox.Show(image);

        });
        return image;
    } 
```

# xml - 拦截/记录来自 .net 应用程序的 REST 请求

> ID：12700772
> 
> 赞同：2
> 
> 时间：2012-10-03T01:29:17.890
> 
> 标签：xml, http, rest

这是一个两部分的问题：

问题 1：我正在编写一个 .NET REST 客户端，它将连接并使用一个 REST 服务。无论我使用什么方法进行调用（WebRequest、HttpClient、第三方 REST 库），我都想查看 REST 请求和响应的 xml/json 内容。

我目前正在使用 Wireshark 查看 Web 流量，但这不是查看 XML 数据的最有效方式。一定有更好的出路。我希望看到格式良好的 xml/json 以及 http 标头。有没有可以提供帮助的工具？

问题 2：在相关说明中，是否有任何好的 .net 库用于使用 REST 服务？我试过吊床，但我不是粉丝。我正在寻找有据可查且易于使用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:53:57.483

对于问题二，[RestSharp](http://restsharp.org/)是我的首选 REST 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T19:33:25.083

谢谢乔伊。RestSharp 非常有用，现在是我在 .net 中进行任何 REST 相关开发的图书馆。

至于问题 1：自从第一次发布这个问题以来，我发现[PostMan Rest Client](http://www.getpostman.com/)是我最喜欢的。Postman 是一个 Chrome 插件，非常适合在预开发测试阶段查看原始 REST 请求/响应数据。

# jquery - 如何获取已通过 ajax 发布到控制器的变量的值？

> ID：12700783
> 
> 赞同：0
> 
> 时间：2012-10-03T01:30:02.140
> 
> 标签：jquery, ajax, codeigniter

我有以下代码：

```
$('.pPage').click(function(){         
    var recordsPerPage = $(this).attr('id');
    $.ajax({
        type: "POST",
        dataType: 'json',
        url: "backOfficeUsers/displayAllUsers",
        data: { value: recordsPerPage }
    }).done(function( msg ) {
        alert( "Data Saved: " + msg );
    });
}); 
```

我需要在我的控制器中操作 recordsPerPage 变量。如何在我的控制器中接受这个变量的值并在我的 php 中使用它？

这是控制器的代码：

```
public function displayAllUsers()
{
    $currentUser = $this->isLoggedIn();
    $this->load->model('backOfficeUsersModel');
    $this->db->order_by('userid');

    $myrec = $this->input->post('value');
    $recordsPerPage = $myrec; 

    $limit = $recordsPerPage;
    $offset = 3;

    $offset = $this->uri->segment(3);
    $this->db->limit($limit, $offset);

    $data['users'] = $this->backOfficeUsersModel->get();

    $totalresults = $this->db->get('back_office_users')->num_rows();

    //initializing & configuring paging
    $this->load->library('pagination');
    $config['base_url'] = site_url('/backOfficeUsers/displayAllUsers');
    $config['total_rows'] = $totalresults;
    $config['per_page'] = $limit;
    $config['uri_segment'] = 3;
    $config['full_tag_open'] = '<div class="dataTables_paginate paging_bootstrap pagination"><ul>';
    $config['full_tag_close'] = '</ul></div>';
    $config['cur_tag_open'] = '<li><a href=# style="color:#ffffff; background-color:#258BB5;">';
    $config['cur_tag_close'] = '</a></li>';
    $config['num_tag_open'] = '<li>';
    $config['num_tag_close'] = '</li>';

    $this->pagination->initialize($config); 

    $data['main_content'] = 'bousers/users';
    $data['title'] = 'Back Office Users';
    $errorMessage = FALSE;

    $this->load->vars($data,$errorMessage);
    $this->load->vars($currentUser);
    $this->load->view('backOffice/template');

} // end of function displayAllUsers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:36:44.520

[http://codeigniter.com/user_guide/libraries/input.html](http://codeigniter.com/user_guide/libraries/input.html)

```
$this->input->post('value'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:08:06.750

尝试使用 `$_REQUEST['value'];`希望这会起作用

# ruby-on-rails - 如何在 Rails 中创建分层永久链接/路由？

> ID：12700785
> 
> 赞同：2
> 
> 时间：2012-10-03T01:30:22.097
> 
> 标签：ruby-on-rails, ruby, url-routing, ruby-on-rails-3.2

我正在尝试使用“友好的”永久链接结构（如 Adam Darowski 的博客文章[1](http://www.darowski.com/tracesofinspiration/2008/03/16/url-as-ui/ "博文")中所述）在我的 Rails 3.2 应用程序中路由内容。我找到了一些描述如何在单个“页面”或“类别”控制器中执行此操作的答案，但理想情况下，我希望应用程序在“部分”URL 的情况下路由到最具体的控制器。

```
http://example.com / shows / :genre / :series / :season / :episode 
```

因此，例如：`/shows/entertainment/the-survivors/01/01`将路由到 Episodes 控制器（播放特定系列的第 1 季第 1 集），`/shows/entertainment/the-survivors/`并将路由到 Series 控制器（列出该系列中的所有剧集）。等等。

我听说嵌套路由的深度不应超过一层，因此这似乎是一个糟糕的解决方案（标准嵌套路由“污染”了带有控制器名称和 ID 的 URL，无论如何`/genres/entertainment/shows/the-survivors/seasons/1/episodes/1`，我想避免）。

到目前为止，我能想出的最佳解决方案只是`match`我的 routes.rb 文件中的一系列越来越具体的规则，随着 URL 变得越来越具体，这些规则指向每个控制器。

在 Rails 中有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:59:40.957

我建议使用友好的 url gem，比如[friendly_id](https://github.com/norman/friendly_id)。我会去掉你网址的“显示”部分，除非它专门为路由添加了一些东西。然后你可以制作像这样的网址：

```
/entertainment/the-survivors/s01e01 
```

只需按 slug 查找每个系列和剧集（分别为“the-survivors”和“s01e01”）。

我认为无论哪种方式，您都必须像您在问题中提到的那样在路由文件中创建自定义路由，但是我认为这没有问题。

但是，我不同意您创建两个控制器的想法。在你的问题中你提到它

> 将路由到系列控制器（列出该系列中的所有剧集）

用您的语言，您是在说“列出所有剧集”。剧集是资源，所以如果你是真正的[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)，那么“系列”页面本身应该是 的`index`动作`EpisodesController`，每个剧集`show`都是`EpisodesController`.

# python - == 运算符不适用于两个匹配的字符串

> ID：12700788
> 
> 赞同：-4
> 
> 时间：2012-10-03T01:30:36.880
> 
> 标签：python, string, string-matching

我一直在调试这段代码，无法让`==`操作员处理两个匹配的字符串。

编码：

```
str1 = "string1"
str2 = "string2"

print str1
print str2

for row in results:
  print row[0]
  print row[1]   #as requested
  if((row[0] == str1) and (row[1] == str2)):
     print "We found the match....."
     #rest of the code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:57:58.963

确保用 . 清除空格`.strip()`。

```
>>> str1 = "string1"
>>> str2 = "string2"
>>>
>>> results = [["string1 ", " string2"]]
>>> for row in results:
...   if((row[0].strip() == str1) and (row[1].strip() == str2)):
...      print "We found the match....."
...
We found the match.....
>>> 
```

# c# - 抛出异常的最佳实践

> ID：12700795
> 
> 赞同：0
> 
> 时间：2012-10-03T01:31:37.740
> 
> 标签：c#, .net, nlog

> **可能重复：**
> [使用 NLog 记录异常时如何获取堆栈跟踪？](https://stackoverflow.com/questions/4684399/how-to-get-the-stack-trace-when-logging-exceptions-with-nlog)

抛出异常以从日志中获得清晰图片的最佳做法是什么？

对于日志记录，我使用的是 NLog。

下面是简单的代码：

```
catch (Exception ex)
{
    logger.Fatal(ex.Message);
    throw new Exception(ex.Message);
} 
```

它没有给我一个很好的日志记录消息。我需要诸如函数、错误代码行之类的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T01:36:46.143

出于登录目的，您要分析的不仅仅是异常对象的消息字段。

此[链接](http://msdn.microsoft.com/en-us/library/system.exception_properties.aspx)将为您提供有关您可以从通用异常对象中获得什么的信息

`throw ex`此外，和之间也有区别`throw`。此外，当您抛出新创建的异常时。

*   在您的情况下（`throw new Exception(ex.Message)`），您正在抛出通用异常，它没有说明异常的性质并具有新的堆栈跟踪，从这行代码构建。
*   `throw ex`- 重新抛出原始异常，但将堆栈跟踪剪切到当前的 catch 子句

*   `throw`- 使用原始堆栈跟踪重新抛出原始异常，允许您记录等异常并让它更进一步

因此，根据您要实现的目标，这三种情况之一将满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:48:59.167

[您可以从http://msdn.microsoft.com/en-us/library/system.exception_properties.aspx](http://msdn.microsoft.com/en-us/library/system.exception_properties.aspx)阅读更多关于异常抛出的最佳实践

# regex - Codeigniter 路由正则表达式

> ID：12700796
> 
> 赞同：2
> 
> 时间：2012-10-03T01:31:40.827
> 
> 标签：regex, codeigniter, routing

我有一个有多种语言的网站。对于我的新闻页面，我有两条规则将分页变量路由到我的控制器。一种用于所有语言（en、ct、cs、kr），一种用于默认语言。

# 路由.php

```
$route['^(en|ct|cs|kr)/news/page/(:num)'] = 'news/index/$1';
$route['news/page/(:num)'] = 'news/index/$1'; 
```

# 新闻控制器

```
public function index($id) 
{
   echo $id; 
} 
```

路由正在访问新闻控制器，但`$id`参数未传递给`index()`方法。

如果我回显它，`$id`它将返回语言段而不是我期望的分页变量：

> mysite.com/en/news/page/2 // $id 返回“en”。
> mysite.com/kr/news/page/2 // $id 返回“kr”。

当我为每种语言单独编写路由时，它会起作用：

> $route['en/news/page/(:num)'] = 'news/index/$1';

我的正则表达式在某个地方出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T02:10:20.057

That's because in your first rule, you're capturing 2 segments of the URL. The first one is the language (e.g. `en`), and the second one is the `id` (or page number). So, in your first rule you should instead use `$2` instead of `$1`.

```
$route['^(en|ct|cs|kr)/news/page/(:num)'] = 'news/index/$2'; 
```

# mysql - 取一个mysql值并将其插入另一个表？

> ID：12700800
> 
> 赞同：1
> 
> 时间：2012-10-03T01:32:52.560
> 
> 标签：mysql

这是一个相当简单的问题。

我在 MySQL 表中有一个值，我需要将其抓取并放入新表中。我还应该说，这不会使我的表非规范化，因为要提取的值位于临时表/行等中。

无论如何，这是我尝试这样做的一个示例：

```
INSERT INTO checkIn(t_id, p_id, checkIn, checkedOut) VALUES(2,11,curdate(), (SELECT checkedTime FROM checkOut WHERE t_id = 2)); 
```

如您所见，我试图从另一个表中提取的值由`SELECT`语句表示。执行时，仅`SELECT`运行语句 - 而不是插入。就个人而言，我不认为这是实现我的目标的正确方法。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:37:07.067

不要使用值...做一个直接插入就像..

```
insert into myTable (someNum, someOtherNum, date, someTime) select 2, 11, curdate(), checkedTime  from checkout etc. etc. 
```

# git - 如何获取 git 中的最新标签（一致）？

> ID：12700805
> 
> 赞同：0
> 
> 时间：2012-10-03T01:34:35.623
> 
> 标签：git

在某些项目中，该`git describe --tags`命令会返回准确的最新标签名称，但在其他情况下，它会返回额外信息：

```
project1> git describe --tags
2.0-BETA6

project2> git describe --tags
1.5-13-g4abc82e 
```

有没有办法调用 git describe 以便它仅返回第一种格式（仅 TAG）或仅返回第二种格式（带有提交信息的 TAG）。

我正在尝试更新一个 java 属性文件以包含一个具有最新标记的属性，以及另一个具有最新提交的属性。

*万一这很重要，我正在使用“git version 1.7.9.6 (Apple Git-31.1)”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:39:45.593

要获取所有分支中的最新标签：

```
git describe --tags `git rev-list --tags --max-count=1` 
```

# c# - 输入某个输入时，如何使 if 语句转到某个点？微软 Visual Studio C#

> ID：12700809
> 
> 赞同：0
> 
> 时间：2012-10-03T01:34:50.850
> 
> 标签：c#, visual-studio-2010, if-statement, readline, goto

我在 C# 中使用 Microsoft Visual Studio 2010。我做了一个程序，它会问一系列问题，最后会询问是否有任何错误。我怎样才能做到这一点，如果用户输入“否”，它会“转到”到某个点？这是我到目前为止所拥有的。

```
 Console.WriteLine("Is This Correct? Yes/No");
        var response = Console.ReadLine();
        if (response = No)
        goto Loop; 
```

由于这不起作用，任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T01:46:51.813

```
string Response = "No";
while (Response != "Yes")
{
    Console.WriteLine("Loop");
    Console.WriteLine("Is This Correct? Yes/No");
    Response = Console.ReadLine();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T01:38:36.687

你的`if`说法不正确。 `No`应该是一个字符串。尝试这个：

```
if (response == "No") 
```

# python - setup_module() 与 py.test 中的顶级语句有何不同？

> ID：12700811
> 
> 赞同：1
> 
> 时间：2012-10-03T01:35:02.650
> 
> 标签：python

如果我没有任何拆解，我需要使用 setup_module，还是可以只使用顶级语句？

```
=== test_1.py ===
foo = 3
def test_foo(): assert foo == 3

=== test_2.py 
def setup_module(m): m.foo = 3
def test_foo(): assert foo == 3 
```

py.test 会在执行第一个测试之前按顺序执行所有顶级语句吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:54:41.940

似乎 py.test 会在任何测试之前评估您的顶级语句，所以`test_1.py`会起作用。

但是，当您编写测试时，拥有任何顶级语句通常不是一个好主意。您应该尝试将您的测试结构化为测试用例（一个包含相关测试代码的类）并测试应用程序的特定功能。所以，如果你把你的代码 ( `test_2.py`) 变成一个测试用例，它看起来像这样：

```
def setup_module(module):
    module.TestFoo.foo = 3

class TestFoo:
    def test_foo(self):
        assert self.foo == 3 
```

这样，您可以继续向每个模块添加所有相关测试`TestFoo`，甚至添加多个测试`TestCase`（尽管通常最好将每个测试都`TestCase`放在自己的文件中）。

关于您的`teardown_module`问题，您只需要在需要将应用程序状态恢复到其初始状态（删除新创建的项目等）或清理挂起的连接（关闭文件、套接字等）时进行拆卸*。*在这种情况下，由于您`setup_module`没有做任何需要清理的事情，因此不需要*拆解*并且 py.test 不会抱怨缺少它。

# javascript - 为什么要在 JavaScript 资源的 URL 中添加时间戳？

> ID：12700822
> 
> 赞同：-2
> 
> 时间：2012-10-03T01:36:25.003
> 
> 标签：javascript

```
$script.ready('jui',function() { 
$script('<?php base_path(); ?>js/partnerScripts.js?ts=1315442861','partners');
}); 
```

为什么要标记固定的 ts=timestamp？以partnerScripts.js 名称结尾的东西？我在文件夹内搜索，但只找到没有 ts=xxxx 的文件。代码中的目的是什么。这个数字是固定的，它就像一个真正的时间戳？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T01:39:46.780

这通常用于不同版本的“缓存清除”。

如果您希望用户无限期地缓存脚本，但仍想在将来轻松更新它，您只需更新时间戳即可。这有效地使其成为一个新的 URL/资源，但您可以将文件保存在同一个位置。

是的，该时间戳是有效的，并且[是从 2011 年 9 月开始的](http://www.onlineconversion.com/unix_time.htm)。它是自 1970 年 1 月 1 日 UTC 午夜以来的秒数。

# mongodb - MongoDB 聚合查询等价于 PostsgreSQL

> ID：12700836
> 
> 赞同：2
> 
> 时间：2012-10-03T01:38:25.020
> 
> 标签：mongodb, aggregation-framework

这个问题有两个部分。集合结构为：

_id: MongoID,
agent_id: string,
result: string,
created_on: ISO DATE,
...其他字段...

第一部分：
期望的输出：每个 agent_id 的一个结果和带有计数的结果组合：使用 PostgreSQL 的具有等效 SQL 的 TUPLE 表示。

```
( "1234", "Success", 4 ),
( "1234", "Failure", 4 ),
( "4567", "Success", 3 ),
( "7896", "Failure", 2 ),
.....

SELECT agent_id, result, count(*)
FROM table
GROUP BY agent_id, result
HAVING created_on >= now()::date; 
```

我想出了下面的 mongo 查询....我想我有一个概念或语法错误。文档说要[在管道的早期使用 $match:](http://docs.mongodb.org/manual/reference/aggregation/)，但是虽然 $match 在我自己运行它时限制了查询，但只要我添加 $group 我就会得到很多结果。此外，我似乎无法理解如何按多个字段进行分组。如何编辑下面的查询以获得与上面的 SQL 查询类似的结果？

```
db.collection.aggregate(
  { $match : 
    { created_on: 
        { $gte: new Date('08-13-2012') //some arbitrary date
    }
  }, $group:
    { _id:"$agent_id" }, 
   $project:
  {_id:0, agent_id:1, result:1}
}) 
```

第 2 部分）第一个结果集就足够了，但不是最优的。使用 PostgreSQL，我可以实现如下结果集：

```
( "1234", { "Success", "Failure" }, { 4, 3 } ),
( "4567", { "Success", "Failure" }, { 3, 0 } ),
( "7896", { "Success", "Failure" }, { 0, 2 } ) 
```

我可以在 Postgresql 中使用数组数据类型和 set_to_array 函数（自定义函数）来执行此操作。Pg 特定的 SQL 是：

```
SELECT agent_id, set_to_array(result), set_to_array( count(*) )
FROM table
GROUP BY agent_id, result
HAVING created_on >= now()::date; 
```

我相信 mongodb 中的等效数据结构如下所示：

```
[
   { "1234", [ { "success": 4 }, { "failure": 4 } ] },
   { "4567", [ { "success": 3 }, { "failure": 0 } ] },
   { "7896", [ { "success": 0 }, { "failure": 0 } ] }
] 
```

是否可以使用 mongodb 聚合框架实现这些所需的压缩结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T02:21:38.007

干得好：

创建了一些测试数据：

> db.test.insert({agent_id:"1234", result:"Failure", created_on:new Date()}); db.test.insert({agent_id:"1234", result:"Success", created_on:new Date()}); db.test.insert({agent_id:"1234", result:"Failure", created_on:new Date()}); db.test.insert({agent_id:"1234", result:"Success", created_on:new Date()}); db.test.insert({agent_id:"1234", result:"Failure", created_on:new Date()}); db.test.insert({agent_id:"1234", result:"Success", created_on:new Date()}); db.test.insert({agent_id:"1234", result:"Success", created_on:new Date()}); db.test.insert({agent_id:"1324", result:"Success", created_on:new Date()}); db.test.insert({agent_id:"1324", 结果:"成功", created_on:new Date()}); db.test.insert({agent_id:"1324", result:"Success", created_on:new Date()}); db.test.insert({agent_id:"1324", result:"Success", created_on:new Date()}); db.test.insert({agent_id:"1324", result:"Failure", created_on:new Date()}); db.test.insert({agent_id:"1324", result:"Failure", created_on:new Date()}); db.test.insert({agent_id:"1324", result:"Failure", created_on:new Date()}); db.test.insert({agent_id:"1324", result:"Failure", created_on:new Date()}); db.test.insert({agent_id:"1324", result:"Failure", created_on:new Date()}); db.test.insert({agent_id:"1324", result:"Failure", created_on:new Date()}); db.test.insert({agent_id:"1324",

```
db.test.aggregate(
  {
    $match:{ /* filter out the things you want to aggregate */
      created_on:{$gte:new Date(1000000)}
    }
  }, 
  {
    $group: {_
      _id: { /* the things you want to group on go in the _id */
        agent_id:"$agent_id", 
        result:"$result"
      }, 
      count:{$sum:1} /* simple count */
    }
  }, 
  {
    $project: { /* take the id out into the separate fields for your tuple. */
      _id:0, 
      agent_id:"$_id.agent_id", 
      result:"$_id.result", 
      count:"$count"
    }
  }); 
```

给出：

```
{
"result" : [
    {
        "count" : 7,
        "agent_id" : "1324",
        "result" : "Failure"
    },
    {
        "count" : 4,
        "agent_id" : "1324",
        "result" : "Success"
    },
    {
        "count" : 4,
        "agent_id" : "1234",
        "result" : "Success"
    },
    {
        "count" : 3,
        "agent_id" : "1234",
        "result" : "Failure"
    }
],
"ok" : 1
} 
```

添加第 2 部分——与第 1 部分非常相似，但计数要复杂一些；基本上，只有当它与您要计算的内容匹配时，您才算数：

```
db.test.aggregate(
  {
    $match: { 
      created_on: {$gte:new Date(1000000)}
    }
  }, 
  {
    $group: {
      _id: { 
        agent_id:"$agent_id"
      }, 
      failure: {
        $sum:{
          $cond:[
            {$eq:["$result","Failure"]}, 
            1, 
            0
          ]
        }
      }, 
      success: {
        $sum: { 
          $cond:[
            {$eq:["$result","Success"]}, 
            1, 
            0
          ]
        }
      } 
    } 
  }, 
  {
    $project: {
      _id: 0, 
      agent_id: "$_id.agent_id", 
      failure: "$failure", 
      success: "$success"
    }
  }); 
```

给出：

```
{
"result" : [
    {
        "failure" : 7,
        "success" : 4,
        "agent_id" : "1324"
    },
    {
        "failure" : 3,
        "success" : 4,
        "agent_id" : "1234"
    }
],
"ok" : 1
} 
```

# jquery - 点击时移动图像（有点类似于谷歌地图）

> ID：12700839
> 
> 赞同：0
> 
> 时间：2012-10-03T01:38:57.903
> 
> 标签：jquery, css, dhtml

我正在寻找一些代码，可以让我操作类似于在

[白宫网站](http://www.whitehouse.gov/about/inside-white-house/interactive-tour)

我有一个网站，我正在编写代码，希望为他们自己的平面图实现类似的功能。这可以通过 CSS 或 jQuery 来实现吗？

这个想法是有链接，当点击时，将相应地移动图像。如果有人知道我可以利用的一些现有代码或教程，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:35:41.653

[Jquery ScrollTo](http://demos.flesler.com/jquery/scrollTo/)应该做你需要的......

基本思想是您的图像位于一个 div 内，该 div 的溢出设置为隐藏（具有定义的宽度和高度），并且在单击某些项目时滚动到一组坐标。

# php - 新网站显示奇怪的登录选项

> ID：12700840
> 
> 赞同：-2
> 
> 时间：2012-10-03T01:39:04.770
> 
> 标签：php, html, hosting

我刚刚发生了一件非常奇怪的事情；我的登录脚本在我的计算机上运行良好。我刚刚使用我的主机将所有数据库和新站点重新上传到我的新测试服务器。但是，当我登录并按下提交时，它只会在顶部显示用户名和密码，就好像我是他们的 var_dump 一样。

这有什么原因吗？

这就是显示

```
string(3) "s17" string(32) "PASSWORD HASH HERE" 
```

感谢您的任何帮助。

编辑。抱歉，这是我的代码，它有点长，我知道你会说我为什么要使用旧的 mysql_* 东西，但我很快就会转向 PDO，我现在正在学习它。

```
<?php

// Start Session to enable creating the session variables below when they log in
session_start();
// Force script errors and warnings to show on page in case php.ini file is set to not display them
//error_reporting(E_ALL);
//ini_set('display_errors', '1');
//-----------------------------------------------------------------------------------------------------------------------------------
// Initialize some vars

include 'connect_to_mysql.php';

    $var_error="";  
    if (isset($_SESSION['error'])) {

         $var_error = $_SESSION['error'];
        unset($_SESSION['error']);
        $error_check_tok = "error_overlay();";

    }else{
            unset($_SESSION['error']);

    }

$login_username = '';
$login_password = '';
if (isset($_POST['login_submit'])) {

    $login_username = $_POST['login_username'];
    $login_password = $_POST['login_password'];

    $login_username = stripslashes($login_username);
    $login_password = stripslashes($login_password);

    $login_username = strip_tags($login_username);
    $login_password = strip_tags($login_password);

    // error handling conditional checks go here
    if ((!$login_username) || (!$login_password)) { 

       $reg_error = "you did not enter both Username and Password, Please try again.";
       $_SESSION['error'] = $reg_error;
       header("Location: index.php");

    } else { // Error handling is complete so process the info if no errors
        include 'connect_to_mysql.php'; // Connect to the database

        $login_username = mysql_real_escape_string($login_username); // After we connect, we secure the string before adding to query
        $login_password = mysql_real_escape_string($login_password); // After we connect, we secure the string before adding to query

        $login_password = md5($login_password); // Add MD5 Hash to the password variable they supplied after filtering it
        var_dump($login_username);
        var_dump($login_password);
        // Make the SQL query
        $sql_users = mysql_query("SELECT * FROM users WHERE username='$login_username' AND password='$login_password' AND account_activated='1'", $general); 
        $login_check = mysql_num_rows($sql_users);
        // If login check number is greater than 0 (meaning they do exist and are activated)
        if($login_check >= 1){ 
                while($row_users = mysql_fetch_array($sql_users)){

                    // Pleae note: Adam removed all of the session_register() functions cuz they were deprecated and
                    // he made the scripts to where they operate universally the same on all modern PHP versions(PHP 4.0  thru 5.3+)
                    // Create session var for their raw id
                    $user_id = $row_users["user_id"];   
                    $user_no_of_logins = $row_users["no_of_logins"];
                    $user_online = $row_users["online"];

                    $_SESSION['user_id'] = $user_id;
                    // Create the idx session var
                    $_SESSION['idx'] = base64_encode("g4p3h9xfn8sq03hs2234$id");
                    // Create session var for their username
                    $login_username = $row["login_username"];
                    $_SESSION['login_username'] = $login_username;
                    // Create session var for their password
                    $login_userpass = $row["login_password"];
                    $_SESSION['login_userpass'] = $login_userpass;

                    //$sql_login_check = mysql_num_rows($sql_login);
                    if($user_no_of_logins == "0"){

                        mysql_query("UPDATE users SET first_login=now() WHERE user_id='$user_id' LIMIT 1", $general);

                    }

                    if($user_online == "0"){

                       mysql_query("UPDATE users SET online = '1' WHERE user_id='$user_id' LIMIT 1", $general); 
                       mysql_query("UPDATE system SET no_online = no_online + 1", $system);
                    }

                    mysql_query("UPDATE users SET last_login=now() WHERE user_id='$user_id' LIMIT 1", $general);  
                    mysql_query("UPDATE users SET no_of_logins = no_of_logins + 1 WHERE user_id='$user_id' LIMIT 1", $general); 
                    mysql_query("UPDATE system SET total_logins = total_logins + 1", $system);

                } // close while

                // Remember Me Section
                if(isset($_POST['login_remember'])) { 
                     $encryptedID = base64_encode("g4enm2c0c4y3dn3727553$user_id");
                     setcookie("idCookie", $encryptedID, time()+60*60*24*100, "/"); // Cookie set to expire in about 30 days
                     setcookie("passCookie", $login_password, time()+60*60*24*100, "/"); // Cookie set to expire in about 30 days

                }

                // All good they are logged in, send them to homepage then exit script
                header("Location: overview.php");

        } else { // Run this code if login_check is equal to 0 meaning they do not exist
            $reg_error = "Login Inputs Incorrect, Please try again.";
            $_SESSION['error'] = $reg_error;
            header("Location: index.php");
        }

    } // Close else after error checks

} 

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:57:31.337

嗯，它就在那里：

```
<blink>
           vvvvvvvvvvvvvvvvvvvvvvvvvv
---------> var_dump($login_username); <---------
---------> var_dump($login_password); <---------
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
                                        </blink> 
```

这没有出现在另一个系统上的原因很可能是输出在该系统上被缓冲。在新系统上，输出没有缓冲，所以上面是输出，而你的重定向标头不是。为什么会这样，请阅读[https://stackoverflow.com/a/8028987/476](https://stackoverflow.com/a/8028987/476)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T01:59:11.540

“它只是在顶部显示用户名和密码，就好像我是他们的 var_dump 一样。”

这是因为*您正在*调用`var_dump`用户名和密码。

从您的代码中删除以下内容将阻止它转储用户名和密码。

```
var_dump($login_username);
var_dump($login_password); 
```

# html - 垂直翻译的滚动 div 中的文本输入对键盘输入的反应很奇怪

> ID：12700842
> 
> 赞同：2
> 
> 时间：2012-10-03T01:39:38.733
> 
> 标签：html, css, webkit-transform

我在已翻译的垂直滚动 div 中输入文本时遇到问题。

在 webkit 浏览器中，查看这个简化的示例：

[http://jsfiddle.net/ZbguJ/3/](http://jsfiddle.net/ZbguJ/3/)

滚动到 div 的底部，单击文本框，然后按键盘按钮。div 向上滚动到顶部，并且不显示焦点输入。预期的行为是 div 不应该滚动，并且用户可以继续不受阻碍地输入文本。

就好像浏览器正在确定 div 应该滚动到哪里而不考虑翻译。

任何可能的解决方法？

在实际应用中，有问题的元素使用 translate 来在屏幕上设置动画。用 'top' 属性上的 CSS 动画替换 translate 会严重影响动画的平滑度，但可以解决滚动问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:57:10.203

简单的答案：不要使用`translate`. 使用`margin-top`and`margin-left`代替。我可以通过取消转换并添加来让你的小提琴工作

```
margin-top: -200px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:10:46.453

今天早上洗澡的时候想了想，找到了解决方法。

将滚动内容包裹在父 div 中，正常平移父 div，平移滚动 div 与父 div 相等且相反，并将 top 或 margin-top 设置为父平移量以正确对齐内部 div。请参阅此小提琴中的更新示例：http: [//jsfiddle.net/ZbguJ/5/](http://jsfiddle.net/ZbguJ/5/)

```
#Parent {
    -webkit-transform: translate(0, -200px); /* animated */
}
#Child { 
    -webkit-transform:  translate(0, 200px);
    top: -200px;
    position:relative;
} 
```

愚蠢，但它完成了工作。

# asp.net - 将数据绑定到 ASP.NET 控件时，多个查询或单个查询返回多个表？

> ID：12700848
> 
> 赞同：1
> 
> 时间：2012-10-03T01:40:08.513
> 
> 标签：asp.net, sql-server, tsql

ASP.NET 控件不允许您在绑定数据源时指定要使用的表索引，因此如果您使用 SqlDataSource 控件来处理数据，您的查询实际上只能返回一个表。另一种方法是手动从代码隐藏和数据绑定运行查询。这两种方法对我来说都很好，但我很好奇在这种情况下“最佳实践”是什么（以及为什么）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:47:08.160

如果您遇到性能问题，我会查看您的存储过程、数据库或网络配置。为了访问简洁和模块化的数据而多次调用数据库并没有错。事实上，你可以通过提出非常昂贵的查询来减少查询数量，从而更多地损害性能。

如果您正在为应用程序中的许多不同功能访问相同的数据，那么您可以将数据拉到您的缓存并查询缓存而不是数据库。与减少查询数量相比，这对性能的影响要大得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:52:07.420

如果您可以使用一个查询获得多组“需要”数据，那么它总是更可取的，前提是您确实需要这些数据。Yout 第二种方法为您提供了灵活性

此外，`SQLDataSource`在任何现实生活中的生产应用程序中使用 , 都会违反大多数最佳实践，因为它将 DAL 与 UI 结合在一起。以这种方式进行时绝对没有分层的概念，您实际上是在制作 1 层应用程序。不要使用 a`SQLDataSource`将是我的建议。

# magento - magento 如何调用此注释方法

> ID：12700852
> 
> 赞同：2
> 
> 时间：2012-10-03T01:40:29.767
> 
> 标签：magento

我正在学习 Magento，我遇到了这个问题。

模板文件代码

```
 <?php $testimonials = $this->getTestimonials(); ?>
<?php $i = 0;?>
<?php if ($testimonials->count() > 0): ?>
<div class="block testimonials_sidebar">
    <div class="block-title">
    <strong><span><?php echo $this->__('Testimonials') ?></span></strong>
    </div>
    <div class="block-content">
        <?php foreach ($testimonials as $testimonial): ?>
            <div class="testimonial_sidebar_box">
                <div class="testimonial_sidebar_text"><?php echo $testimonial->getTestimonialText(); ?></div>
                <div class="testimonial_sidebar_name"><?php echo $testimonial->getTestimonialName(); ?></div>
            </div>
        <?php endforeach; ?>
        <div class="actions">
            <a href="<?php echo $this->getUrl('testimonials'); ?>"><?php echo $this->__('View All Testimonials'); ?></a>
        </div>
    </div>
</div>
<?php endif;?> 
```

当我去阻止查看模板文件中的第一行代码时

```
 <?php $testimonials = $this->getTestimonials(); ?> 
```

而且我找不到在该块类中声明的此方法，而是可以在注释部分看到此方法。但是此方法尚未在模块中的任何地方声明。这是怎么回事？下面的块类代码。

```
/**
 * Frontend block for testimonials
 *
 * @method Turnkeye_Testimonial_Model_Mysql4_Testimonial_Collection getTestimonials()
 */
class Turnkeye_Testimonial_Block_Testimonial extends Mage_Core_Block_Template
{

    /**
     * Before rendering html, but after trying to load cache
     *
     * @return Turnkeye_Testimonial_Block_Testimonial
     */
    protected function _beforeToHtml()
    {
        $this->_prepareCollection();
        return parent::_beforeToHtml();
    }

    /**
     * Prepare testimonial collection object
     *
     * @return Turnkeye_Testimonial_Block_Testimonial
     */
    protected function _prepareCollection()
    {
        /* @var $collection Turnkeye_Testimonial_Model_Mysql4_Testimonial_Collection */
        $collection = Mage::getModel("turnkeye_testimonial/testimonial")->getCollection();
        if ($this->getSidebar()){
            $collection->addFieldToFilter('testimonial_sidebar', '1');
        }

        $collection->setOrder('testimonial_position', 'ASC')
                   ->load();
        $this->setTestimonials($collection);
        return $this;
    }

} 
```

如果我是 ctrl 单击模板文件中的该方法，它会将我带到评论中的该方法。我可以看到它指向收藏，所以这是我的收藏代码。

```
class Turnkeye_Testimonial_Model_Mysql4_Testimonial_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract
{

/**
 * Initialization here
 *
 */
public function _construct()
{
    parent::_construct();
    $this->_init('turnkeye_testimonial/testimonial');
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T05:42:49.997

Magento 使用魔术`__call()`方法为 Magento 对象中的私有（隐藏）数据动态“创建”访问器方法。

Magento 中的大多数类都继承自`Varien_Object`，其中定义了魔术`__call()`方法。

如果你想了解更多关于`__call()`PHP 中的魔法函数，你可以在这里阅读：[http](http://www.php.net/manual/en/language.oop5.overloading.php#object.call) ://www.php.net/manual/en/language.oop5.overloading.php#object.call 。

其他魔术方法可以在这里找到：[http](http://www.php.net/manual/en/language.oop5.magic.php) ://www.php.net/manual/en/language.oop5.magic.php 。（类似于`__call()`魔术方法`__get()`和`__set()`）。

我发现一篇文章解释了这一切在 Magento 中的工作原理：http: [//codemagento.com/2011/02/where-are-my-getters-and-setters/](http://codemagento.com/2011/02/where-are-my-getters-and-setters/)。

您看到的开头的注释行`@method`是对文档生成器、IDE 和您的提示，虽然此方法未在代码中定义，但应该可以通过魔术`__call()`方法访问。如果您使用的是 Netbeans 或 Eclipse 之类的 IDE，您应该获得该方法的代码完成功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T04:13:00.247

请参阅[`Varien_Object::__call()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/lib/Varien/Object.php#L622)- Magento 中所谓的魔术 getter 和 setter 的基础。

# vb.net - 是否可以禁用/启用 ContextMenuStrip 项目？

> ID：12700853
> 
> 赞同：0
> 
> 时间：2012-10-03T01:40:35.050
> 
> 标签：vb.net, winforms

我`ContextMenuStrip1`在我的表单项目中创建了一个。

是否可以修改代码中的项目？例如，我想禁用一些按钮或者编辑它们的文本。

我虽然关于修改 items 属性，但它是只读的。

# css - 多图像背景 重复

> ID：12700854
> 
> 赞同：4
> 
> 时间：2012-10-03T01:40:34.987
> 
> 标签：css, ipad, mobile-safari, tumblr

我正在尝试围绕 tumblr 网站的 iPad PNG/背景图像像素大小限制完成一项工作。该网站的内容区域使用无限滚动功能，并具有巨大的垂直背景，向下滚动时会显示更多字符。

我已经将背景图像分解为多个 png，并设置了位置，一切看起来都很棒.. 然而，我不知道的最后一件事是如何让整个集群重复。如果我设置背景重复：重复-Y；所有图像都堆叠在一起。

谢谢，代码打击：

老鼠

```
#contnetAreaBack {
        margin-left:auto;
        margin-right:auto;
        background-image:url('http://www.dratsum.com/clientDev/cartoonNetwork/2012-09-11-SuperJail-Tumblr/images/ContentBg_01.png'), url('http://www.dratsum.com/clientDev/cartoonNetwork/2012-09-11-SuperJail-Tumblr/images/ContentBg_02.png'), url('http://www.dratsum.com/clientDev/cartoonNetwork/2012-09-11-SuperJail-Tumblr/images/ContentBg_03.png'), url('http://www.dratsum.com/clientDev/cartoonNetwork/2012-09-11-SuperJail-Tumblr/images/ContentBg_04.png'), url('http://www.dratsum.com/clientDev/cartoonNetwork/2012-09-11-SuperJail-Tumblr/images/ContentBg_05.png'), url('http://www.dratsum.com/clientDev/cartoonNetwork/2012-09-11-SuperJail-Tumblr/images/ContentBg_06.png'), url('http://www.dratsum.com/clientDev/cartoonNetwork/2012-09-11-SuperJail-Tumblr/images/ContentBg_07.png'), url('http://www.dratsum.com/clientDev/cartoonNetwork/2012-09-11-SuperJail-Tumblr/images/ContentBg_08.png'), url('http://www.dratsum.com/clientDev/cartoonNetwork/2012-09-11-SuperJail-Tumblr/images/ContentBg_09.png'), url('http://www.dratsum.com/clientDev/cartoonNetwork/2012-09-11-SuperJail-Tumblr/images/ContentBg_10.png');
        background-position:center 0px, center 1000px, center 2000px, center 3000px, center 4000px, center 5000px, center 6000px, center 7000px, center 8000px, center 9000px;
        background-size: auto auto;
        background-repeat: no-repeat;
        background-attachment:scroll;
        width:100%;
        padding-bottom:500px;
        overflow-x:hidden;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:16:42.557

我从您的图片中注意到，您使用相同的黄色管道，带有不同的字符和裂缝。也许你可以让背景成为黄色管道的第一行像素，并在 y 上重复。然后，您可以运行一个 php 脚本，该脚本基于当您用完字符时结束的 while 循环来注入较小的 png 文件，其中只有字符/裂缝作为浮动图像在管道上。我不熟悉您提到的限制，但是如果您对可以使用的图像数量没有限制，那么您应该可以使用该方法，除非您想随着页面变长而无限滚动，循环返回字符。在这种情况下，我会尝试相同的解决方案，但不是使用字符数作为我的 php 循环约束，而是尝试在注入叠加图像之前获取页面的高度，将它除以一个叠加图像的高度（我想你所有的背景图像都具有相同的高度）并向上取整。这是一个 spitball 解决方案，如果您发现任何大问题，我可以更具体地为您服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T05:24:44.680

一旦 mod 等于某个值，您可以在 javascript 中使用 %(mod) 来重复图像。

基本上，您需要将所有这些分解的图像放入一个 div 中，在其下方放置一个重复的 div，然后在 mod 上重复。

# extjs - EXTjs：网格面板问题 - 列对齐和加载数据

> ID：12700856
> 
> 赞同：0
> 
> 时间：2012-10-03T01:40:56.110
> 
> 标签：extjs, alignment, gridpanel

我看到了一些类似于我的问题的帖子，但解决方案与我的不一致。首先是网格面板中的列未正确对齐。

![在此处输入图像描述](../Images/bb41afc88e35159012475e7738960710.png)

其次，看到第1列没有数据？这是我的制作方法：

```
// Data Tabe
var storeFields = Schedule.Calendar.panels.CallbackPanel.getDates(true);
storeFields.push('time');
/*
       storeFields will return: [0,0,0,0,.......0,'time']
    */
var callbackdata = Ext.create('Ext.data.ArrayStore', {
    fields: storeFields,
    data: Ext.create('Schedule.Calendar.data.CallbackData')
});

var callbackTable = Ext.create('Ext.grid.Panel', {
    id: 'callback-table',
    store: callbackdata,
    columns: [
        { header: 'Time',  dataIndex: 'time', id: 0},
        Schedule.Calendar.panels.CallbackPanel.getDates(false)
                         //This will return
                       /*
                       {
                       header : 0
                       dataIndex: '1'
                       id: 1
                       },
                       {
                       header : 1
                       dataIndex: '2'
                       id: 2
                       }
                       .
                       .
                       .
                       up to 30
                       */
    ],
    stripeRows : true,
    autoScroll: true,
    columnLines: true,
    listeners:{
        itemclick:
        function(grid, record, item, index, event){
            active_id = record.get('id');
        }
    },
    x: 0,
    y: 0,
    width: 1000,
    height: 435
}); 
```

我正在使用可扩展日历[http://ext.ensible.com](http://ext.ensible.com)，据我所知，我没有包含任何 css 文件。

这是我的html片段：

```
<head>
<title>Extensible : Basic Calendar</title>
<!-- Sets up all Ext and Extensible includes: -->
<script type="text/javascript" src="../Extensible-config.js"></script>

<!-- Page-specific includes -->
<script type="text/javascript" src="basic.js"></script>

<meta http-equiv="X-UA-Compatible" content="IE=edge">

<style>
    .sample-ct {      
        height: 500px;
        width: 1000px
        align: 'center'
    }

    .next-button {
        background-image: url("http://localhost/schedule/resources/images/custom/right_arrow.png");
    }
    .prev-button {
        background-image: url("http://localhost/schedule/resources/images/custom/left_arrow.png");
    }

</style> 
```

这是我的简单数据： - 它只接受到上午 9:30。如果我在 9:30 及以下注释掉它可以正常工作，否则对齐会变得疯狂。

```
myJsonData: function() {

    var myData = {'items' : [
                    {'time': '1:00 AM'},
        {'time': '1:30 AM'},
        {'time': '2:00 AM'},
        {'time': '2:30 AM'},
        {'time': '3:00 AM'},
        {'time': '3:30 AM'},
        {'time': '4:00 AM'},
        {'time': '4:30 AM'},
        {'time': '5:00 AM'},
        {'time': '5:30 AM'},
        {'time': '6:00 AM'},
        {'time': '6:30 AM'},
        {'time': '7:00 AM'},
        {'time': '7:30 AM'},
        {'time': '8:00 AM'},
        {'time': '8:30 AM'},
        {'time': '9:00 AM'},
        {'time': '9:30 AM'},
        {'time': '10:00 AM'},
        {'time': '10:30 AM'},
        {'time': '11:00 AM'},
        {'time': '12:00 NN'},
        {'time': '12:30 NN'},
        {'time': '1:00 PM'},
        {'time': '1:30 PM'},
        {'time': '2:00 PM'},
        {'time': '2:30 PM'},
        {'time': '3:00 PM'},
        {'time': '3:30 PM'},
        {'time': '4:00 PM'},
        {'time': '4:30 PM'},
        {'time': '5:00 PM'},
        {'time': '5:30 PM'},
        {'time': '6:00 PM'},
        {'time': '6:30 PM'},
        {'time': '7:00 PM'},
        {'time': '7:30 PM'},
        {'time': '8:00 PM'},
        {'time': '8:30 PM'},
        {'time': '9:00 PM'},
        {'time': '9:30 PM'},
        {'time': '10:00 PM'},
        {'time': '10:30 PM'},
        {'time': '11:00 PM'},
        {'time': '12:00 MN'},
        {'time': '12:30 MN'}
    ]};

    return myData;

}, 
```

问候， Ronel C.

# javascript - 如何在 JavaScript onclick 调用中发送数据，然后在点击处理函数中访问它？

> ID：12700865
> 
> 赞同：1
> 
> 时间：2012-10-03T01:43:20.780
> 
> 标签：javascript, jquery, javascript-events

这让我停留了一段时间......我的关于 onclick JavaScript 调用的网络搜索有时会在 onClick 中使用大写 C，有时在 onclick 中使用大写 C。我的代码是 JQuery Mobile 应用程序的一部分，但 onclick 是 JS。所以，它看起来像这样：

```
domEntry = '<li><a href="#poet-details"';
domEntry += ' onclick="getPoetDetails('+ poet_name + ')">';
domEntry += poet_name;
domEntry += '</a></li>'; 
```

我要把它添加到一个div中。'poet_name 确实在第 3 行正确显示。如何在 getPoetDetails 中访问它？我说的对吗？另外，请参阅：http: [//jsfiddle.net/brucewhealton/XF5AJ/](http://jsfiddle.net/brucewhealton/XF5AJ/)

可以在给出的链接中看到函数 getPoetDetails。我是否通过事件对象变量访问它？应用程序将查询字符串发送到另一个位置 dbpedia.org/sparql，并取回 JSON。我需要第二个查询的poet_selected 或poet_name 来获取有关诗人的详细信息，因为我的应用程序到目前为止只列出诗人，不是很有趣。我想弄清楚这一点，以便我可以通过让用户从 DBpedia.org 上的“Poets_by_nationality”类别中选择国籍来启动我的应用程序。我的问题是捕获用户的选择，他们在 JQuery Mobile 应用程序中单击或点击的内容并将其发送到另一个功能。谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:55:28.433

如果`poet_name`是一个字符串，那么它应该用引号引起来：

```
domEntry += ' onclick="getPoetDetails(\''+ poet_name + '\')">'; 
```

因此生成的 HTML 将如下所示：

```
onclick="getPoetDetails('Henry Abbey')" 
```

此外，您需要从 jsfiddle 设置中选择“no wrap”而不是“onLoad”以使函数成为`getPoetDetails`全局函数。

编辑：这是另一种方法：

```
domEntry = '<li><a href="#poet-details" class="poet">';
domEntry += poet_name;
domEntry += '</a></li>'; 
```

然后就在循环之后：

```
$('.poet').click(function() {
    getPoetDetails($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:26:27.693

因此，您的诗人姓名锚标签的 onClick 有问题吗？我认为最好的方法是没有任何内联javascript。有了这个，当你在窗口中启动你的javascript或者你选择这样做时，你应该添加这个小行

```
$('#result').delegate('a', 'click', getPoetDetails); 
```

这告诉 jQuery 查看#result 的内部，并且每当有一个新的锚标记时应用这个点击事件给它。点击事件应该调用 getPoetDetails。

现在你在哪里创建和插入你的锚标签，你应该摆脱 javascript 的东西，而是拥有这个

```
domEntry = '<li><a href="#poet-details"';
domEntry += 'data-name="'+ poet_name + '">';
domEntry += poet_name;
domEntry += '</a></li>'; 
```

这是给锚点一个数据值 name 和诗人名字的值。现在您可以使用 jQuery 在 getPoetDetails 函数中获取这些数据。它的开始现在可以是这样，其余的保持不变。

```
var getPoetDetails = function(){
var poet_name_selected = $(this).data('name');
// show loader 
```

我很确定您在调用获取 json 数据时做错了什么，或者您解析错误，但现在至少 getPoetDetails 正确获取了名称。为了使其显示为在 jsfiddle 中工作，您需要将 onLoad 下拉菜单更改为 noWrap 正文，因为您已经在 js 中准备好文档。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T01:50:09.013

如果我正确理解您的问题，在声明的 getPoetDetails(poet_name_selected) 函数中，poet_name_selected 将是 poet_name。

# algorithm - 将元素放入容器并尽可能保持容器均匀的良好排序算法是什么？

> ID：12700866
> 
> 赞同：1
> 
> 时间：2012-10-03T01:43:49.980
> 
> 标签：algorithm, sorting, extjs4, buckets

所以我实际上打算用它在 ExtJS4 中做一些动态表单布局生成，但我认为我可以将问题简化为便于讨论而不会丢失任何内容：

假设我有一个整数列表，我想将它们放在两个容器中。完成后，我希望两个容器“尽可能均匀”，在这种情况下，这意味着每个容器内的整数之和尽可能接近。在这种情况下，每个容器中有多少整数并不重要，只是它们的总和很接近。

这是一个可能的输入和理想输出的示例：

```
Integers: [1,7,13,3,6,8]
Container A: [13,6] (sum 19) 
Container B: [1,7,3,8] (sum 19) 
```

一种天真的方法可能是遍历整数列表一次，然后将每个整数放入当前总和较小的容器中：

```
Integers: [1,7,13,3,6,8]
Container A: [1,13,8] (sum 22)
Container B: [7,3,6] (sum 16) 
```

你们会建议什么算法/方法来解决这个问题？我想有很多潜在的。如果您发现在代码示例中更容易思考，我将在 javascript 中实现最终产品。

谢谢！

* * *

**编辑**

我喜欢目前介绍的两种方法（感谢chechen 和 sumudu fernando），这两种方法都提供了快速实现接近（或完全）理想答案的好方法。对于足够小的整数集，我想你可以强行计算并明确地说特定的答案是最好的（或并列最好的）。做这样的事情有什么建议吗？换句话说，一种以可能很慢（或对于大型问题集完全不可行）为代价来保证理想答案的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:50:44.490

1.  计算所有元素的总和。
2.  计算总和的一半，`s`。
3.  将[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)应用于求和的数字`s`。
4.  将溶液放入一个容器中，其余元素放入另一个容器中。

# django - 以星号为后缀的 django 文件名

> ID：12700871
> 
> 赞同：1
> 
> 时间：2012-10-03T01:44:37.587
> 
> 标签：django, python-2.7

我通过执行以下操作在 Ubuntu 11.10 上安装了 Django：

```
wget https://www.djangoproject.com/download/1.4.1/tarball/
tar xzvf index.html
cd Django-1.4.1
sudo python setup.py install 
```

一些 python 文件以 * 为后缀。例如：

```
django-admin.py*
daily_cleanup.py*
manage.py* 
```

星号的意义是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:46:39.317

Asterik 表示文件已`executable`设置位，因此您可以将它们作为`./filename.py`. 它只是将标志设置为默认值的`ls`命令的输出格式。`-F`

如果您`ls`使用完整路径运行，绕过别名，例如`/bin/ls`，您可能会看到这些别名与彩色输出一起消失。

# asp.net-mvc - 如何在 ASP.NET MVC 4 中将没有 www 的 HTTP 页面重定向到 HTTPS

> ID：12700878
> 
> 赞同：0
> 
> 时间：2012-10-03T01:45:54.113
> 
> 标签：asp.net-mvc, redirect, https

我在 Web.config 文件中有以下 ASP.NET 重写规则：

```
 <rule name="Redirect to HTTPS" stopProcessing="true">
          <match url="(.*)" />
          <conditions>
            <add input="{HTTPS}" pattern="^OFF$" />
          </conditions>
          <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" />
        </rule> 
```

虽然这会将 www.mysite.com 和[http://www.mysite.com](http://www.mysite.com)重定向到[https://www.mysite.com](https://www.mysite.com)，但如果省略 www 部分，它将不会重定向。我还尝试在自定义操作过滤器属性中进行重定向，但这也不起作用。我需要做什么来解决这个问题？

PS我正在使用自签名证书进行开发。

# math - 如何在大致等距的 D 维球体表面上绘制 N 个点？

> ID：12700879
> 
> 赞同：12
> 
> 时间：2012-10-03T01:45:57.570
> 
> 标签：math, graphics, 3d, trigonometry, vector-graphics

假设我有一个 D 维球体，中心为 [C1, C2, C3, C4, ... CD]，半径为 R。现在我想绘制 N 个均匀分布的点（彼此等距）在球体表面。这些点的确切位置并不重要，只是它们彼此之间的距离大致相等。我想要一个返回这些点数组的函数，P。

```
function plotter(D, C[1...D], R, N)
{
   //code to generate the equidistant points on the sphere

   return P[1...N][1...D];
} 
```

![具有许多点的 3 维球体](../Images/dc135709f6f82b1ad2a687246d4905fd.png)

![具有几个点的 3 维球体](../Images/0c8ef04903f15c55c2559ed3abacaf02.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T01:36:45.380

几个选项：

*   在球体上随机抛出点并使用劳埃德松弛使它们均匀分布：您迭代地计算它们的 Voronoi 图并将它们移向它们的 Voronoi 单元的中心（而不是在球体上工作，您可能想要使用欧几里德 voronoi 图仅限于领域：例如，CGAL 可以做到这一点，或参考[我的文章](http://www.springerlink.com/content/m2x70778r022j84h/)）。

*   如果粗略的近似值很好（即，如果均匀随机分布足够好），您可以使用 Wiki 上解释的公式：[N-Sphere](http://en.wikipedia.org/wiki/N-sphere#Uniformly_at_random_from_the_.28n.C2.A0.E2.88.92.C2.A01.29-sphere)。如果没有，你仍然可以使用这个随机抽样作为上述方法的初始化

*   对于仍然随机但更好的等距样本概念，您可以生成泊松磁盘分布。[Robert Bridson 的主页](http://www.cs.ubc.ca/~rbridson/)上提供了高维快速代码。不过，您可能需要将其调整为球形域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T07:29:00.790

我不知道这里是否已经提到过；但是您可以，正如其他人建议的那样，从球体上的均匀分布中绘制点。之后，根据柱能流过每个点；使用梯度下降法。这个特殊的问题受到了很多关注。查看以下[论文](http://www.math.vanderbilt.edu/~esaff/texts/161.pdf)和[本网站](http://www.maths.unsw.edu.au/about/distributing-points-sphere)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:40:35.270

我能想到的唯一方法应该会产生好的结果。

1.  在球面上生成 N 个点。对高维执行此操作的常用方法是根据 D 维正态分布生成点并归一化回球体。这些不会等距 - 所以我们需要第二步
2.  接下来使用一些排斥函数使每个点排斥其他点并使用一个小的时间步长，将运动方向调整为与 D-Sphere 相切。移动该点，然后重新投射回球体。继续这样做，直到你认为这些点足够多。

# regex - 如何编写以特定单词匹配开头并一直持续到遇到句点的正则表达式

> ID：12700880
> 
> 赞同：3
> 
> 时间：2012-10-03T01:46:12.207
> 
> 标签：regex

我试图编写一个匹配特定单词并继续匹配直到遇到句点的正则表达式。例如：

文本：

> 从未赢得过除处女、声称或首发之外的两场比赛，或者从未赢得三场比赛或可选的声称价格为 25,000 美元。三岁儿童，118 磅；较旧，123 磅。自 3 月 9 日以来未获得 24,000 美元的人允许 2 磅。

期望匹配：

> 从未赢得过除处女、声称或首发之外的两场比赛，或者从未赢得三场比赛或可选的声称价格为 25,000 美元。

正则表达式：

```
(?<Match1>Which\s[a-zA-Z]*[.]) 
```

不幸的是，我提出的表达方式涵盖了所有文本，并且似乎延伸到最后一个时期而不是第一个时期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:49:30.787

其实很简单。用于`[^.]*`匹配所有字符，但不包括下一个字符，并用边界`.`包围您想要的单词。`\b`我附加了最终结果`.`，`\.`假设您希望将其包含在匹配的输出中。

```
(?<Match1>\bWhich\b[^.]*\.) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T01:51:24.403

`(?<Match1>Which[^.]*?[.])`

除了一个时期到一个时期之外的任何东西的非贪婪匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T02:02:07.780

很简单：

```
([^.]*This[^.]*\.) 
```

在行动中看到它： [http ://regexr.com?32b8b](http://regexr.com?32b8b)

只需将“This”替换为您的单词，您应该匹配所有“句子”（如果您真的想要这样做，您应该考虑在句号中添加“！”和“？”以匹配以这些结尾的句子，也）。

编辑：如果单词完全在其中，则匹配整个句子，如果您只想从单词向前，即如果单词在句子中间，则省略第一个 [^.]* 并且应该工作。

```
(This[^.]*\.) 
```

# c# - 在单独的服务器上合并两个表的内容

> ID：12700881
> 
> 赞同：1
> 
> 时间：2012-10-03T01:46:37.107
> 
> 标签：c#, sql

我们有一个数据流程，可以在`4-5`几天内完成，因为我们每周都有客户数据，所以我们每周在两个单独的服务器上运行这个流程，

所以一个`Week1`它运行，`Server1`它`Week2`运行`Server2`，然后`Week3`运行，`Server1`依此类推。

我在两台服务器上都引入了一些新表，这些表有一列`WeekNo`。`Server1`奇数周数数据和偶数周数数据也是如此`Server2`。

情况是，在填充这些新表后的每个星期，我都必须合并另一台服务器上的数据，因此在数据处理后这些新表`Server1`上`Server2`总是会有相同的数据。

我想在 C# 中做这些事情，因为已经在 C# 中完成了很多事情，所以只需更新现有包并将新包移交`EXE`给*dataprocess team*。

我可以使用链接服务器在 SQL Server 脚本中执行相同的操作。

我也可以使用两个不同的连接来连接两个不同的服务器，但是我有数十亿行要跨服务器移动，所以需要运行 **`INSERT INTO SELECT * FROM`**查询。

谁能告诉我如何在 C# 中链接服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T22:57:01.377

你最好使用 SSIS 来完成这项工作

谢谢

# performance - ORACLE 10G 使用 FORALL 删除

> ID：12700883
> 
> 赞同：0
> 
> 时间：2012-10-03T01:46:50.610
> 
> 标签：performance, oracle, bulk-load

我有一个 txn 表，每个月有 200 万行我正在使用存储过程将数据加载到该表中。如果在我的过程中失败并且我曾经再次加载，我需要使用以下方法删除事务。

```
Table TXN structure

TXN_ID    NUMBER primary key 
TXN_AMT   number
YEAR    varchar2
MONTH   varchar2 
```

我可以在这里使用批量收集吗，但是在 where 子句中我需要

```
DELETE FROM TXN WHERE YEAR=cYear and Month=cMonth 
```

请建议我如何使它快速

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:36:41.223

> “如果在我的过程中失败并且我曾经再次加载，我需要使用以下方式删除交易。”

看来您的实际问题是加载过程。您应该将整个负载定义为一个工作单元，即在 2000000 行末尾有一个提交。然后，您不必在失败时删除任何内容。

目前，您显然有间歇性提交。您认为需要这样做的原因可能有多种，但它们都是虚假的。您只需让您的 DBA 调整 UNDO 表空间的大小，使其大小适合您的数据量。或者，您需要重新编写加载过程，以便确定哪些行已加载（即已提交）；如果发生故障，您可以只加载剩余部分。

* * *

就加快删除过程而言，您没有太多选择。FORALL 处理不会更快：PL/SQL 会产生开销，因此不会比直接 DELETE 便宜。除非您有一个包含十年数据的表，否则 (YEAR,MONTH) 上的索引将没有任何用处。

如果您有企业版和大量 CPU，您可以尝试使用 PARALLEL DML 在更短的时间内执行删除。

但是，与任何调优问题一样，您需要了解语句的当前执行路径，这意味着从解释计划开始。你知道，它们不仅适用于 SELECT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:15:25.780

作为一种替代方法，因为您要删除数据基础 Month 和 Year

*   您可以在表中创建按月分区，并在不需要时删除特定月份的分区。（ALTER TABLE TABLENAME DROP PARTITION PARTION_NAME）
*   同样，如果加载失败，只需截断该月分区并再次加载。
*   您可以进一步编写一个 PL/SQL 作业，该作业可以根据预定义的条件删除分区，例如 2012 年 12 月 1 日的 DROP PARTION_DEC_2011。并在使用它加载新数据前 2 个月添加一个分区。

# javascript - 向现有模型添加更多数据（backbone.js）

> ID：12700885
> 
> 赞同：1
> 
> 时间：2012-10-03T01:46:52.507
> 
> 标签：javascript, jquery, backbone.js, underscore.js

集合的初始`fetch`完成检索每个模型的部分详细信息。当用户单击网页上的某个项目时，它需要检索该项目的更多详细信息并将其显示给用户。

已经实现了用于返回该项目的初始提取中缺少的附加数据的 API 函数（`/api/full_details`）。

**问题：**我应该如何检索附加项并将其附加到现有模型中？我的理解是，如果我执行 a `model.fetch()`，该模型中的现有数据将会消失。我认为如果`fetch()`for 模型有`{add:true}`类似`fetch()`for 集合的选项，那将是我在这里需要的。

**模型**

```
Listing = Backbone.Model.extend({
}); 
```

**收藏**

```
ListingCollection = Backbone.Collection.extend({
    model: Listing,
    url: '/api/search'
}); 
```

**看法**

```
ListingListView = Backbone.View.extend({ ........ });

ListingView = Backbone.View.extend({
    events: {
        'click': 'getFullDetails'
    },

    getFullDetails: function() {
        // What should I do here?
    }
}) 
```

**在路由器的某个地方**

```
this.listingList = new ListingCollection();
var self = this;
this.listingList.fetch({
    data: {some:data},
    processData: true,
    success: function() {   
        self.listingListView = new ListingListView({ collection: self.listingListNew });
        self.listingListView.render();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:07:35.843

我可能会为此使用两个单独的模型：

1.  您现有的模型将变为`ListingSummary`并且您的集合将包含`ListingSummary`实例。
2.  为完整版本创建一个新的`Listing`（或`ListingFull`）模型。这将得到`/api/full_details`.

您可以使用摘要模型中已有的信息初始化完整模型：

```
var ListingSummary = Backbone.Model.extend({
    //...
    getListing: function() {
        if(!this._full) {
            this._full = new Listing({ summary: this });
            this._full.fetch();
        }
        return this._full;
    }
}); 
```

然后在完整版中结束：

```
var Listing = Backbone.Model.extend({
    initialize: function() {
        if(this.options.summary) {
            // Copy the interesting bits from this.options.summary.attributes
            // to this.attributes, possibly using this.set()
        }
    }
}); 
```

然后您的完整列表视图可以检查它`Listing`是否已完全加载：如果是，则视图可以显示完整列表，但如果模型还没有全部存在，则视图可以显示那里的内容并抛出一个微调器/加载器/在等待服务器以完整`Listing`模型响应时，颤抖/随便叫它；像往常一样，您的视图将列出模型中的事件以了解一切准备就绪的时间。

您可以对现有`Listing`模型执行相同的操作，只需启动原始`$.ajax`调用而不是使用单独的模型：

```
loadFullModel: function() {
    if(this._fullyLoaded)
        return;
    // Call out to /api/full_details ...
    var _this = this;
    $.ajax({
        //...
        success: function(data) {
            // Do things with data...
            _this._fully_loaded = true;
            // Trigger your event...
        }
    });
} 
```

# c++ - C++ - 进程之间共享的互斥锁

> ID：12700889
> 
> 赞同：0
> 
> 时间：2012-10-03T01:47:12.927
> 
> 标签：c++, mutex, semaphore

我正在尝试创建一个系统，该系统由一个服务器和几个尝试相互通信的客户端组成。客户端将数据放入共享内存（使用 ftok / shmget 创建），然后能够将数据写入该内存。这些包括 2 个独立的程序。

服务器读取客户端写入共享内存的值，并将它们写入文件。我可以让客户端将数据写入共享内存，让服务器读取数据，但我无法锁定共享内存，因此多个客户端不会同时写入。

我尝试创建一个信号量（使用 sem_open），但这不是在进程之间共享的。如何在进程（或互斥体，因为这些可能会更好）之间共享信号量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:13:40.617

您想使用命名信号量或互斥量：

```
int permissions = 0644;
sem_t *shared_sem;
unsigned int inital_value = 1;

shared_sem = sem_open("SharedSem", O_CREAT, permissions, inital_value); 
```

另外，请确保您正确设置了权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:52:11.743

使用“命名的”信号量......例如，两个进程都使用的“/someuniquename”。

# html - 将鼠标悬停在 li 标签上时打开 div

> ID：12700891
> 
> 赞同：1
> 
> 时间：2012-10-03T01:47:42.400
> 
> 标签：html, css

我正在尝试制作自己的导航栏，以更好地了解如何创建良好的导航栏。当悬停在链接上时，我已经创建了栏以及更改背景，但是当悬停在标签 li 上时，我无法添加下拉菜单（子菜单）。我为子菜单创建了一个内容框，但由于某种原因无法显示。我在下面包含了我的代码。我想要的是当 li 标签悬停时显示类子类别。另外，如果我的代码格式不正确，我提前道歉。这是我关于stackoverflow的第一个问题。

```
#navbar ul {
list-style-type:none;
color: #000;
padding: 0px;
text-align: center;
}
li:hover {
background-color: #0C0;
padding: 16.5px .1px;
border-top-left-radius: 5px;
border-top-right-radius: 5px;
}
.subcategory {
display: none;
width: 100px;
height: auto;
background-color: #FC0;
color: #03F;
position: absolute;
top: 100px;
}
li:hover .subcategory {
display: block;
}
#navbar {
border-bottom-left-radius: 5px;
border-bottom-right-radius: 5px;
border-top-left-radius: 5px;
border-top-right-radius: 5px;
background-color: #FC0;
float: left;
font-family: Arial, Helvetica, sans-serif;
}
#navbar ul li {
display: inline;
}
#navbar ul li a {
padding: 0 1.5em;
text-decoration: none;
}
<div id="navbar">
<ul> 
    <li><a href="#">LinkHere</a></li>
        <div class="subcategory">Hey</div>
    <li><a href="#">LinkHere</a></li> 
    <li><a href="#">LinkHere</a></li> 
    <li><a href="#">LinkHere</a></li> 
    <li><a href="#">LinkHere</a></li> 
    <li><a href="#">LinkHere</a></li> 
    <li><a href="#">LinkHere</a></li> 
    <li><a href="#">LinkHere</a></li> 
    <li><a href="#">LinkHere</a></li> 
</ul> 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:51:50.333

您的`.subcategory`元素不是 的子元素`li`，这就是它们不会出现的原因。

```
<ul> 
    <li><a href="#">LinkHere</a>
        <div class="subcategory">Hey</div></li>
</ul> 
```

# ruby-on-rails - 无法通过 rvm 安装 ruby gems

> ID：12700892
> 
> 赞同：9
> 
> 时间：2012-10-03T01:47:53.347
> 
> 标签：ruby-on-rails, rubygems, rvm

我是 ruby​​ 的菜鸟，我正在尝试在 ubuntu 12.04 上设置 Ruby on Rails。我正在按照本网站[https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-中给出的步骤进行操作带-rvm](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm)

但是每当我尝试运行这个命令> **rvm ruby​​gems current**我得到一个错误

> [“正在检索 ruby​​gems - ' http://production.cf.rubygems.org/rubygems/rubygems-.tgz](http://production.cf.rubygems.org/rubygems/rubygems-.tgz) ' 或 'rubygems-.tgz'没有校验和，无法验证它。如果您希望继续未经验证的下载在命令后添加'--verify-downloads 1'。”

关于如何进行的任何帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-07T22:21:45.520

它看起来像一个错误，但很可能已经修复，因为我无法重现它，更新 RVM 并重试：

```
rvm get stable
rvm rubygems current 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T08:41:05.597

我遇到了这个问题并且运行`rvm rubygems current`得到了类似的错误。它试图安装 1.8.25 版。我去了[Rubygems 网站](http://rubygems.org/)，看到最新版本是 1.8.24。所以我跑了`rvm rubygems 1.8.24`，它解决了这个问题，我可以用 RVM 正常安装其他 rubies。希望有帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T18:57:58.830

是的，您可以使用内联 RubyGems 版本（1.8.23 或 1.8.24）定义：

```
rvm_rubygems_version=1.8.24 rvm install ruby 
```

或者也可以使用特定的 Ruby 版本：

```
rvm_rubygems_version=1.8.24 rvm install ruby 1.9.3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-16T14:23:46.720

我遇到了同样的问题，但我发现[在这里](https://stackoverflow.com/questions/5804428/error-on-installing-ruby-with-rvm)和[这里](http://octopress.org/docs/setup/rvm/)结合步骤可以修复安装。

以下是我完成它们并进行全新安装的顺序：

```
rvm remove ruby
rvm implode
curl -L https://get.rvm.io | bash -s stable --ruby
rvm reload
rvm install 1.9.3
rvm get head && rvm-smile
rvm rubygems latest 
```

`rvm install 1.9.3`将在 gems 再次安装时失败，但继续下一步，就可以了。

运行`gems list`以查看安装是否有效，如果您想更加确定，请继续安装另一个特定的 gem，然后`gems list`再次运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-14T12:32:47.063

正如[rvm.io](https://rvm.io/rvm/install)网站所建议的那样，我使用以下方法安装了 rvm：

```
\curl -L https://get.rvm.io | bash -s stable --ruby 
```

并得到与问题中描述的相同的错误。然后我重新运行：

```
\curl -L https://get.rvm.io | bash -s stable --ruby 
```

问题消失了，安装成功完成。所以不确定是什么原因造成的，我建议重新尝试安装命令。

# python - 如何检查字符串是否是有效的python标识符？包括关键字检查？

> ID：12700893
> 
> 赞同：26
> 
> 时间：2012-10-03T01:47:58.073
> 
> 标签：python, keyword, identifier, reserved

有谁知道是否有任何内置的 python 方法可以检查某些东西是否是有效的 python 变量名，包括对保留关键字的检查？（所以，比如“in”或“for”之类的东西会失败......）

如果做不到这一点，有谁知道我在哪里可以获得保留关键字的列表（即，动态地，从 python 内部，而不是从在线文档中复制和粘贴某些内容）？或者，有另一种写自己支票的好方法？

令人惊讶的是，通过在 try/except 中包装 setattr 进行测试是行不通的，如下所示：

```
setattr(myObj, 'My Sweet Name!', 23) 
```

...确实有效！（...甚至可以用 getattr 检索！）

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2015-04-12T05:41:18.830

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-03T01:59:40.320

该`keyword`模块包含所有保留关键字的列表：

```
>>> import keyword
>>> keyword.iskeyword("in")
True
>>> keyword.kwlist
['and', 'as', 'assert', 'break', 'class', 'continue', 'def', 'del', 'elif', 'else', 'except', 'exec', 'finally', 'for', 'from', 'global', 'if', 'import', 'in', 'is', 'lambda', 'not', 'or', 'pass', 'print', 'raise', 'return', 'try', 'while', 'with', 'yield'] 
```

请注意，随着关键字列表的变化（尤其是在 Python 2 和 Python 3 之间），此列表将根据您使用的 Python 的主要版本而有所不同。

如果您还想要所有内置名称，请使用`__builtins__`

```
>>> dir(__builtins__)
['ArithmeticError', 'AssertionError', 'AttributeError', 'BaseException', 'BlockingIOError', 'BrokenPipeError', 'BufferError', 'BytesWarning', 'ChildProcessError', 'ConnectionAbortedError', 'ConnectionError', 'ConnectionRefusedError', 'ConnectionResetError', 'DeprecationWarning', 'EOFError', 'Ellipsis', 'EnvironmentError', 'Exception', 'False', 'FileExistsError', 'FileNotFoundError', 'FloatingPointError', 'FutureWarning', 'GeneratorExit', 'IOError', 'ImportError', 'ImportWarning', 'IndentationError', 'IndexError', 'InterruptedError', 'IsADirectoryError', 'KeyError', 'KeyboardInterrupt', 'LookupError', 'MemoryError', 'NameError', 'None', 'NotADirectoryError', 'NotImplemented', 'NotImplementedError', 'OSError', 'OverflowError', 'PendingDeprecationWarning', 'PermissionError', 'ProcessLookupError', 'ReferenceError', 'ResourceWarning', 'RuntimeError', 'RuntimeWarning', 'StopIteration', 'SyntaxError', 'SyntaxWarning', 'SystemError', 'SystemExit', 'TabError', 'TimeoutError', 'True', 'TypeError', 'UnboundLocalError', 'UnicodeDecodeError', 'UnicodeEncodeError', 'UnicodeError', 'UnicodeTranslateError', 'UnicodeWarning', 'UserWarning', 'ValueError', 'Warning', 'ZeroDivisionError', '_', '__build_class__', '__debug__', '__doc__', '__import__', '__name__', '__package__', 'abs', 'all', 'any', 'ascii', 'bin', 'bool', 'bytearray', 'bytes', 'callable', 'chr', 'classmethod', 'compile', 'complex', 'copyright', 'credits', 'delattr', 'dict', 'dir', 'divmod', 'enumerate', 'eval', 'exec', 'exit', 'filter', 'float', 'format', 'frozenset', 'getattr', 'globals', 'hasattr', 'hash', 'help', 'hex', 'id', 'input', 'int', 'isinstance', 'issubclass', 'iter', 'len', 'license', 'list', 'locals', 'map', 'max', 'memoryview', 'min', 'next', 'object', 'oct', 'open', 'ord', 'pow', 'print', 'property', 'quit', 'range', 'repr', 'reversed', 'round', 'set', 'setattr', 'slice', 'sorted', 'staticmethod', 'str', 'sum', 'super', 'tuple', 'type', 'vars', 'zip'] 
```

请注意，其中一些（如`copyright`）并不是什么大不了的交易。

另一个警告：请注意，在 Python 2 中，、、`True`和`False`不`None`被视为关键字。但是，分配给`None`是一个 SyntaxError。分配给`True`or`False`是允许的，但不推荐（与任何其他内置相同）。在 Python 3 中，它们是关键字，所以这不是问题。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-22T12:41:08.570

John：作为一个小小的改进，我在 re 中添加了一个 $，否则，测试不会检测到空格：

```
import keyword 
import re
my_var = "$testBadVar"
print re.match("[_A-Za-z][_a-zA-Z0-9]*$",my_var) and not keyword.iskeyword(my_var) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T01:53:57.540

python 关键字列表很短，因此您可以使用简单的正则表达式和相对较小的关键字列表中的成员资格检查语法

```
import keyword #thanks asmeurer
import re
my_var = "$testBadVar"
print re.match("[_A-Za-z][_a-zA-Z0-9]*",my_var) and not keyword.iskeyword(my_var) 
```

一个更短但更危险的选择是

```
my_bad_var="%#ASD"
try:exec("{0}=1".format(my_bad_var))
except SyntaxError: #this maynot be right error
   print "Invalid variable name!" 
```

最后是一个更安全的变体

```
my_bad_var="%#ASD"

try:
  cc = compile("{0}=1".format(my_bad_var),"asd","single")
  eval(cc)
  print "VALID"
 except SyntaxError: #maybe different error
  print "INVALID!" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-05T13:32:41.770

I needed to check for Python 3 identifiers from Python 2 code. I used a regex based on the [docs](https://docs.python.org/3/reference/lexical_analysis.html#identifiers):

```
import keyword
import regex

def is_py3_identifier(ident):
    """Checks that ident is a valid Python 3 identifier according to
    https://docs.python.org/3/reference/lexical_analysis.html#identifiers
    """
    return bool(
        ID_REGEX.match(unicodedata.normalize('NFKC', ident)) and
        not PY3_KEYWORDS.contains(ident))

# See https://docs.python.org/3/reference/lexical_analysis.html#identifiers
ID_START_REGEX = (
    r'\p{Lu}\p{Ll}\p{Lt}\p{Lm}\p{Lo}\p{Nl}'
    r'_\u1885-\u1886\u2118\u212E\u309B-\u309C')
ID_CONTINUE_REGEX = ID_START_REGEX + (
    r'\p{Mn}\p{Mc}\p{Nd}\p{Pc}'
    r'\u00B7\u0387\u1369-\u1371\u19DA')
ID_REGEX = regex.compile(
    "[%s][%s]*$" % (ID_START_REGEX, ID_CONTINUE_REGEX), regex.UNICODE)

PY3_KEYWORDS = frozenset('False', 'None', 'True']).union(keyword.kwlist) 
```

Note: this uses the `regex` package, not the built-in `re` package for matching against unicode categories. Also: this will reject `nonlocal` which is a keyword in Python 2 but not Python 3.

# java - Java Homework用户输入问题

> ID：12700897
> 
> 赞同：-2
> 
> 时间：2012-10-03T01:49:11.727
> 
> 标签：java, user-input

我有一个使用扫描仪读取数据的课程作业。

```
import java.util.Scanner;

public class Project23
{
    public static void main(String[] args)
    {
        // Declarations and instantiations.
        Scanner scan = new Scanner(System.in);
        String any = "";
        boolean more = false;
        double purchase = 0.0;

        // Ask if user would like to run program?
        System.out.print("Do you have any purchases? Y/N?: ");

        // Ready value into string.
        any = scan.nextLine();
        System.out.println();

        // If any is equal to y or Y it will set the value of more to true
        // this runs the while statement below.
        more = any.toUpperCase().equals("Y");

        // While more is still true continue to run the code within the brackets.
        while (more)
        {
            System.out.print("Please input purchase amount: ");
            purchase += scan.nextDouble();
            System.out.println();

            System.out.print("Do you have any more purchases Y/N?: ");
            any = scan.nextLine();
            System.out.println();

            more = any.toUpperCase().equals("Y");
        }

        if (purchase >= 2500)
            System.out.println("Purchase >= 2500");
        else
            System.out.println("Purchase < 2500");
    }
} 
```

底部只是作为测试让我了解一切是否正常。但是，我设置的 while 循环似乎不想继续运行不止一次。它将接受一个值，然后如果我说是，我有更多值（y 或 Y），它将退出并打印任一鲣鸟

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T02:07:21.850

基本上发生的事情是，当您以 scan.nextDouble() 读取双精度时，您仅读取双精度，但是当您在 scan.nextDouble() 未读取的流上按 Enter 键时会出现 ENDLINE 字符。因此，当您到达 any1=scan.nextLine() 时，它会读取不等于 Y 或 y 的结束行字符。结果它退出了while循环。像这样更正您的代码，只需更改您正在阅读的一行 doubel ：

```
while(more){

    System.out.print("Please input purchase amount: ");
    purchase+=Double.parseDouble(scan.nextLine());
    System.out.println();
    System.out.print("Do you have any more purchases Y/N?: ");
    // scan.nextLine();
    String any1=scan.nextLine();
    System.out.println();       
    more = any1.equals("y") || any1.equals("Y");//Shortened :)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T02:07:44.300

您应该能够通过在调试器下运行应用程序或添加一些诊断跟踪打印来自己解决这个问题；例如在适当的点上这样的事情。

```
 System.out.println("any is ==>'" + any + "'<=="); 
```

（我敢打赌，这将表明它`any`不包含您期望的内容......）

我强烈建议您学习调试自己的代码，而不是请其他人帮忙。这是专业软件工程师的一项关键技能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T02:00:18.050

这对我来说似乎很好......

```
boolean more = true;
while (more) {

    System.out.print("Do you have any more purchases Y/N?: ");
    String any1 = scan.nextLine();
    System.out.println();
    if (any1.equalsIgnoreCase("y")) {
        more = true;
    } else {
        more = false;
    }

    System.out.println(more);

} 
```

哪种让我感到害怕，因为我确定没有太大区别

`while(more==true)`不需要`while(more)`说同样的话。

`if(any1.equals("y") || any1.equals("Y"))`不是必需的，`if (any1.equalsIgnoreCase("y"))`会做同样的事情

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T02:16:22.787

为了获得更干净、更易读的代码，最好在这种情况下使用`do..while`块，因为现在不需要`more`变量：

```
public static void main(String[] args) {
    double purchase = 0.0;
    Scanner scan = new Scanner(System.in);
    System.out.print("Do you have any more purchases Y/N?: ");
    if (!scan.nextLine().equalsIgnoreCase("y")) {
        return;
    }
    do {
        System.out.print("Please input purchase amount: ");
        purchase += Double.parseDouble(scan.nextLine());
        System.out.print("Do you have any more purchases Y/N?: ");
    }
    while (scan.nextLine().equalsIgnoreCase("y"));
    System.out.println("Your purchase amount is: " + purchase + " and so is " + (purchase >= 2500 ? ">= 2500" : "< 2500"));
} 
```

对于家庭作业，我认为这很好。对于项目中的实际工作，您应该重构许多有意义的小方法并避免大部分冗余。这可能是你的第二功课：优化它:)

# php - SQL 语句/php 代码为一本书处理多个作者

> ID：12700900
> 
> 赞同：0
> 
> 时间：2012-10-03T01:49:32.940
> 
> 标签：php, mysql, sql

我会尽量让它简单。我有一张桌子放我的书，一张桌子放作者，还有一张连接表，其中的 id 来自我的书和作者 ID。

现在我的问题是，如果这本书有很多作者，我不想多次列出这些书。我可以使用 Group By，但我正在寻找一种方法来列出这本书一次，而不是只显示一个作者，如果它有多个，我想在同一个列表中添加其他作者.

白天还真想着这事，也想不出什么好办法。任何帮助是极大的赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T06:47:36.420

我认为您正在寻找的是[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
SELECT b.Name, GROUP_CONCAT(a.Name) AS Authors
FROM Book b 
    INNER JOIN BookAuthor ba
    ON b.ID = ba.BookID
    INNER JOIN Author a
    ON ba.AuthorID = a.ID
GROUP BY b.Name; 
```

提供输出

```
50 Shades of Grey                                           EL James
Design Patterns: Elements of Reusable Object-Oriented Software  Ralph
Johnson,Erich Gamma,John Vlissides,Richard Helm
Harry Potter and the Goblet of Fire                         JK Rowling 
Harry Potter and the  Philosopher`s Stone                   JK Rowling 
```

[SQL小提琴在这里](http://sqlfiddle.com/#!2/14462/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:58:47.520

执行两条 SQL 语句。像这样的东西...

```
$sql = "SELECT id, name FROM books";

foreach ($conn->query($sql) as $book) {
    $sql = "SELECT a.name
            FROM authors a, author_books ab
            WHERE ab.book_id = $book['id']
            AND ab.author_id = a.id";

    foreach ($conn->query($sql) as $author) {
        echo $row["name"];
    }
} 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:04:43.597

看这个例子

```
CREATE TABLE book
(
bID INT,
bName VARCHAR(100),
PRIMARY KEY (bID)
);
--
CREATE TABLE author
(
aID INT,
aName VARCHAR(100),
PRIMARY KEY (aID)
);

CREATE TABLE book_author
(
aID INT ,
bID INT ,
PRIMARY KEY (aID,bID),
FOREIGN KEY (aID) REFERENCES author(aID),
FOREIGN KEY (bID) REFERENCES book(bID)
); 

INSERT INTO author (aID, aName) VALUES
    (1, 'The Doctor'),
    (2, 'Dalek1'),
    (3, 'Dalek2'),
    (4, 'Amy'),
    (5, 'Rory');

INSERT INTO book (bID, bName) VALUES
    (1, 'The Book of Crazy'),
    (2, 'Is Time Really Time'),
    (3, 'I Think without Pants'),
    (4, 'Perfection'),
    (5, 'Rise of the Daleks ');

INSERT INTO book_author (aID, bID) VALUES
    (4, 1),
    (1, 2),
    (4, 2),
    (5, 2),
    (1, 3),
    (2, 4),
    (2, 5),
    (3, 5);

----------
--the query
SELECT DISTINCT b.bName
FROM book b,author a,book_author ba
WHERE ba.aID=a.aID and ba.bID=b.bID and (a.aName = 'Amy' or a.aName='The Doctor')

--------------
--output
--Is Time Really Time
--I Think without Pants
--The Book of Crazy 
```

您需要做的就是使用 DISTINCT 关键字并遵循 Justin Wood 的方法

# mysql - Mysql UPDATE 一行中的第一列不等于''

> ID：12700903
> 
> 赞同：1
> 
> 时间：2012-10-03T01:49:51.637
> 
> 标签：mysql

我有一个数据库，它有多个列，遵循“ **name_*** ”语法。基本上我想在查询中使用 UPDATE 以便它更新它的值等于''的第一列。

到目前为止我发现了这个：

```
UPDATE table SET
`name_1` = CASE WHEN `name_1` = '' then 'something' else name_1 end,
`name_2` = CASE WHEN `name_2` = '' then 'something' else name_2 end,
`name_3` = CASE WHEN `name_3` = '' then 'something' else name_3 end
WHERE ID = '$id_example' 
```

现在这将是完美的，除了它可以完成所有这些。我只想选择第一个，它等于''，然后将其余部分设置为之前的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:57:01.890

首先选择您想要的列，这将是一个很好的做法。

“SELECT * FROM table WHERE value= first”

然后

您的更新查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:55:17.227

```
UPDATE table SET
`name_1` = CASE WHEN `name_1` = '' then 'something' else name_1 end,
`name_2` = CASE WHEN `name_1` != '' and `name_2` = '' then 'something' else name_2 end,
`name_3` = CASE WHEN `name_1` != '' and `name_2` != '' and `name_3` = '' then 'something' else name_3 end
WHERE ID = '$id_example' 
```

# c# - 在下拉列表框中显示项目

> ID：12700904
> 
> 赞同：0
> 
> 时间：2012-10-03T01:49:52.643
> 
> 标签：c#, asp.net-mvc, html-select, dropdownbox

我试图在下拉列表框中显示基于先前条目的“计划访问”列表。我能够收集信息，但是当我显示它时，下拉列表框会变成一个输入框，并且我想要的信息都没有显示出来。我希望显示我的项目的格式是：2012 年 10 月 2 日 - 在学校。

这是我的代码：

这是我收集访问信息的地方 - 日期和地点

```
public JsonResult GetVisitDetails(Guid visitEntryId)
    {
        var model = new VisitDetailModel();
        VisitEntry visitEntry = _visitEntryService.Get(visitEntryId);
        if(visitEntry == null)
        {
            model.Message = string.Format(Message.NotFoundMessage, Resources.Entities.Visit.EntityName);
            return Json(model);
        }
        model.VisitEntryId = visitEntryId;
        model.VisitTypeId = visitEntry.VisitTypeId;
        if (visitEntry.VisitType != null)
            model.VisitType = visitEntry.VisitDate.ToShortDateString();
        return Json(model);
    }
#region Nested Type:VisitDetailModel

    public class VisitDetailModel
    {
        public Guid VisitEntryId { get; set; }
        public short VisitTypeId { get; set; }
        public string VisitType { get; set; }
        public string VisitDate { get; set; }
        public string Message { get; set; }
    }

    #endregion 
```

这就是我的 AddToViewModel 中的内容：

```
 var visits = _visitEntryService.FindAllForCase(viewModel.CaseId, _currentUser.OfficeId).Where(v=>v.VisitDate <= DateTime.Today.SetToMaximumTime()).OrderByDescending(v=>v.VisitDate).ToList();

        visits.Insert(0, new VisitEntry());
        viewModel.Visits = visits.ToSelectList("VisitEntryId", "Display", viewModel.VisitEntryId.ToString());

        if(viewModel.VisitTypes.Count() == 0)
            ModelState.AddModelError("",string.Format("No active {0} entered.", Kids.Resources.Entities.VisitType.EntityNamePlural)); 
```

我的 .ascx 页面显示下拉列表：

```
<div class="row">
<%:Html.EditorFor(m=>m.VisitEntryId) %>
<%:Html.LabelFor(m=>m.Visits) %>
<%:Html.ValidationMessageFor(m=>m.VisitEntryId) %> 
```

我的视图模型：

```
 [LocalizedDisplayName("VisitEntry", NameResourceType = typeof(VisitActivity))]
    public short? VisitEntryId { get; set; }

    [UIHint("DropDownList")]
    [DropDownList(DropDownListTargetProperty = "VisitEntryId")]
    public IEnumerable<SelectListItem> Visits { get; set; } 
```

关于我为什么无法显示下拉列表的任何信息都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:19:54.707

在您的 ascx 中，您正在执行`model.VisitEntryId`EditorFor`int`

你需要一个`Html.DropDownFor`下拉列表。

你`model.Visits`是一个 SelectList ，我猜你应该这样做：

```
<%:Html.LabelFor(m=>m.VisitEntryId) %>
<%:Html.EditorFor(m=>m.Visits) %>
<%:Html.ValidationMessageFor(m=>m.VisitEntryId) %> 
```

# asp.net - 如何让 iframe 在 main 的上下文中运行？DMZ - 网络混合

> ID：12700905
> 
> 赞同：0
> 
> 时间：2012-10-03T01:50:03.577
> 
> 标签：asp.net, iframe, iis-7

这是场景。DMZ 盒子有编写 ASP.NET 的主要应用程序，在 IIS7（机器 1）上运行 我们有另一个盒子，它在网络（机器 2）内。这个盒子有 JBOSS 和 PDF 生成器代码。

machine1 上的网页具有 iframe，在其中调用 machine2 以呈现 PDF。现在正如预期的那样，当我们在网络中时，这可以工作，因为 machine2 是可访问的。但是，网络之外的 iframe 调用失败。我们知道我们可以通过将 machine2 置于网络之外来解决这个问题，使其成为 DMZ。

问题可以避免吗？

我们能否以某种方式（IIS 设置，..）使 iframe 调用通过 machine1（DMZ）路由或在父上下文中运行？

如果问题很愚蠢，请原谅我，

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:03:18.467

您想要的称为“反向代理”。在 IIS7+ 中，您可以使用“URL 重写模块”和“应用程序请求路由”模块来执行此操作。

这是一篇讲述如何设置的文章：[http ://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing](http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing)

客户端浏览器只会在 HTML 中看到您的 machine1，但该服务器可以将某些 Web 请求转发到 machine2 以呈现 PDf。

# c++ - 说明用 C++ 编写抽象层的简单示例

> ID：12700909
> 
> 赞同：1
> 
> 时间：2012-10-03T01:50:42.817
> 
> 标签：c++

我只有 C++ 的基本知识。我正在尝试在 C++ 中实现硬件抽象层（HAL）。假设我想实现这个名为 Data 的类。基于平台，数据可以通过有线或无线方式发送。

```
class Data() {

public Data() {

//create random data

}

public sendData() {

// send data

}

public platform_action1() {

// do some platform specific action
} 
```

}

```
// My HAL
    int HAL() {

    Data myData;

    myData.platform_action1();
    myData.sendData();

    return 0;
    } 
```

现在，如果我有两个平台有线和无线，我如何扩展这个类并组织我的文件，这样它就`HAL()`不会改变。

我也不想要动态绑定，即使用关键字“虚拟”。在我的情况下，平台在编译时是已知的。

// 我不想这样做 :) ...

```
int HAL() {
Data* data = new WiredData();
data.sendData();

data = new WirelessData();

data.sendData();

} 
```

在我的情况下，平台在编译时是已知的。

来自 C 世界，这就像填写平台特定的函数指针一样简单。

以 Boost C++ API 中的“线程”类为例。该类通过调用基于平台的 Windows 线程 API 或 Linux 线程 API 自动生成线程。这样我的 HAL 就真正独立于平台了。

*   谢谢克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:59:22.380

这更像是一个设计问题，而不是一个实际的 C++ 问题，但您要查找的术语是`polymorphism`. 您可以使用您的`Data`类并创建两个继承自它的类`WiredData`和`WirelessData，这将使您能够执行以下操作：

```
Data data1 = new WiredData();
Data data2 = new WirelessData();

data1.sendData();
data2.sendData(); 
```

当您调用 data1 和 data2 对象时，多态性开始发挥作用`sendData()`，编译器将调用`sendData()`每个特定子类型的方法，即使它们被声明为类型`Data`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:03:15.603

> 来自 C 世界，这就像填写平台特定的函数指针一样简单。

在 C++ 中几乎相同。您可以创建 Data 类的 sendData() 函数`virtual`（将关键字作为签名的前缀`virtual`），然后派生指定适当`sendData()`功能的有线和无线实现类。然后，您有某种 if 语句，您可以在其中决定使用哪一个，并根据需要为or对象保留一个`Data*`变量……当您调用 时，它将调用相应的实现。这都是非常基础的——你应该在网上做几个介绍性的 C++ 教程，或者拿一本书。还有其他列出推荐的培训材料的 stackoverflow 问题。`Wired``Wireless``pointer->sendData()`

编辑：根据您在下面的评论中的要求提供大纲。

```
class Wrapper
{
    Data* p_;
  public:
    void sendData()
    {
        if (not p_)
            p_ = ... ? new Wired() : new Wireless();
        p_->sendData();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T03:52:32.323

```
Can we do this using PIMPL(Private Implementation) approach? This is what I am thinking ...

// In Data.h

class PlatformDataProcess;                    // forward declaration of Pimpl

class Data
{
public:
   Data (const IPC& ipc); // process IPC
   ~Data();

   Data( const Data &rhs );   // undefined for simplicity
   Data& operator=( Data );

   void  process_ipc();

private:
   PlatformDataProcess *pimpl_;              // the Pimpl
};

// In Wired.cpp

#include "Data.h"

class PlatformDataProcess
{
public:
   void SendData()  {// send data on wired}

};

// In Data.cpp

Data::Data()  :  pimpl_( new PlatformDataProcess() )
{
}

Data::~Data()
{
   delete  pimpl_;
}

void   Data::SendData()
{
   pimpl_->SendData();      // do some private work   
}

int HAL() {

  // receive IPC

  Data* data = new Data(ipc);
  data->SendData();

}

So all the user needs to do is supply the platform specific file like wired.cpp . 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T08:34:40.240

为什么不将更改的成员的定义放入名为的文件中：-

`Data_Windows.cpp`和`Data_Unix.cpp`（例如）然后使用您的构建系统仅在该平台上的构建中包含相关文件？还是我在这里遗漏了什么……？

# objective-c - 哪个视图控制器正在实例化目标视图控制器？

> ID：12700912
> 
> 赞同：0
> 
> 时间：2012-10-03T01:51:00.233
> 
> 标签：objective-c, ios, xcode, uinavigationcontroller, selector

所以这就是我想要实现的目标。

我有一个通用的`MapViewController`视图控制器和另外两个要从中发送数据的视图控制器。`ExploreViewController`和`SavedPlacesViewController`。

我没有使用 segues 来做到这一点。相反，我正在使用这样的东西：

```
[mapButton addTarget:self action:@selector(showExploreMap:)
            forControlEvents:UIControlEventTouchUpInside]; 
```

然后声明将`showExploreMap`方法推`MapViewController`送到`navigationController`.

我已经这样做了`ExploreViewController`，而且效果很好，但我不知道如何才能做到这一点，`SavedPlacesViewController`因为数据来自不同的模型。

我想不知何故我需要弄清楚哪个`ViewController`在调用`MapViewController`，这样我才能弄清楚要使用哪个数据模型。

有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:54:43.730

在 MapViewController 中合成一个 NSString。

MapViewController.h:-

```
NSString  *fromClass;
@property(nonatomic,retain)NSString *fromClass; 
```

MapViewController.m:-

```
@synthesize fromClass; 
```

探索视图控制器.m

```
-(IBAction)showExploreMap:(id)sender{
    MapViewController *obj=[[MapViewController alloc]initWithNibName:@"MapViewController Bundle:nil];
    obj.fromClass=[NSString stringWithString:@"ExploreViewController"];
    [self.navigationController pushViewController:obj animated:YES];
} 
```

SavedPlacesViewController.m

```
MapViewController *obj=[[MapViewController alloc]initWithNibName:@"MapViewController Bundle:nil];
obj.fromClass=[NSString stringWithString:@"SavedPlacesViewController"];
[self.navigationController pushViewController:obj animated:YES]; 
```

MapViewController.m

```
if([fromClass isEqualToString @"ExploreViewController"])
{
    //use datasource for ExploreViewController
}
else
{
    //use datasource for SavedPlacesViewController
} 
```

# c# - 完成工作后如何使用 htmlAgility 包卸载 html

> ID：12700916
> 
> 赞同：0
> 
> 时间：2012-10-03T01:51:33.707
> 
> 标签：c#, html, html-agility-pack

我已经使用 htmlAgility 包加载 html 工作良好，但经过一些工作我需要删除加载的包的 html，但它似乎已被进程使用并写保护，卸载 html 的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:01:08.757

处理完文档后，只需将文档的实例设置为 null ，如果需要，然后使用`GC.Collect()`

# amazon-s3 - S3在不同帐户的存储桶之间移动文件？

> ID：12700921
> 
> 赞同：30
> 
> 时间：2012-10-03T01:52:15.290
> 
> 标签：amazon-s3, s3cmd

我正在为一个拥有 2 个独立 AWS 账户的客户做一些工作。我们需要将其中一个 S3 账户上的存储桶中的所有文件移动到第二个账户上的新存储桶中。

我们认为 s3cmd 会允许这样做，使用以下格式：

```
s3cmd cp s3://bucket1 s3://bucket2 --recursive 
```

但是，这只允许我使用一个帐户的密钥，我不能指定第二个帐户的帐户。

有没有办法在不下载文件并将它们再次上传到第二个帐户的情况下做到这一点？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-06-18T07:27:27.797

您不必向所有人开放权限。使用以下关于源和目标的存储桶策略，使用 IAM 用户从一个账户中的存储桶复制到另一个账户

*   要复制的存储桶：`SourceBucket`

*   要复制到的存储桶：`DestinationBucket`

*   源 AWS 账户 ID：`XXXX–XXXX-XXXX`

*   来源 IAM 用户：`src–iam-user`

以下策略意味着 – IAM 用户 –`XXXX–XXXX-XXXX:src–iam-user`拥有`s3:ListBucket`和`s3:GetObject`特权`on SourceBucket/*` 以及`s3:ListBucket`和`s3:PutObject`特权`DestinationBucket/*`

在 SourceBucket 上，策略应如下所示：

```
{
  "Id": "Policy1357935677554",
  "Statement": [{
    "Sid": "Stmt1357935647218",
    "Action": ["s3:ListBucket"],
    "Effect": "Allow",
    "Resource": "arn:aws:s3:::SourceBucket",
    "Principal": {"AWS": "arn:aws:iam::XXXXXXXXXXXX:user/src–iam-user"}
  }, {
    "Sid": "Stmt1357935676138",
    "Action": ["s3:GetObject"],
    "Effect": "Allow",
    "Resource": "arn:aws:s3:::SourceBucket/*",
    "Principal": {"AWS": "arn:aws:iam::XXXXXXXXXXXX:user/src–iam-user"}
  }]
} 
```

在 DestinationBucket 上，策略应该是：

```
{
  "Id": "Policy1357935677555",
  "Statement": [{
    "Sid": "Stmt1357935647218",
    "Action": ["s3:ListBucket"],
    "Effect": "Allow",
    "Resource": "arn:aws:s3:::DestinationBucket",
    "Principal": {"AWS": "arn:aws:iam::XXXXXXXXXXXX:user/src–iam-user"}
  }, {
    "Sid": "Stmt1357935676138",
    "Action": ["s3:PutObject"],
    "Effect": "Allow",
    "Resource": "arn:aws:s3:::DestinationBucket/*",
    "Principal": {"AWS": "arn:aws:iam::XXXXXXXXXXXX:user/src–iam-user"}
  }]
} 
```

要运行的命令是`s3cmd cp s3://SourceBucket/File1 s3://DestinationBucket/File1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T01:59:33.980

AWS 内部的带宽不计算在内，因此只要存储桶位于同一区域，您就可以通过 AWS 内部的一个盒子完成所有操作，从而节省一些金钱和时间。

至于在没有将文件放在某处的计算机上的情况下这样做 - 不要这么认为。

除了：由于他们会从您邮寄给他们的硬盘驱动器进行批量上传，因此他们可能会为您执行相同的桶到桶传输。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T22:50:06.660

我建议使用 cloudberry s3 explorer，作为让事情快速发展的简单解决方案。它还允许您使用内部 aws 带宽免费传输服务。

您还可以使用 cloudberry sdk 工具集成到您的应用程序中。

祝乔恩好运

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-22T15:41:31.353

即使角色和策略是一种非常优雅的方式，我还有另一个解决方案：

1.  获取 Source-Buckets-Account 的 AWS 凭证
2.  Destination-Buckets-Account 相同
3.  在您的本地计算机（桌面或 AWS 之外的任何服务器）上，使用 Source-Bucket-Accounts 的凭据创建一个新配置文件。

    aws --profile ${YOUR_CUSTOM_PROFILE} 配置

4.  填写 aws_access_key_id 和 aws_secret_access_key（您可以跳过 Region 和 Output）

5.  将您的 Destination-Bucket-Credentials 保存为 Environment-Variables

    导出 AWS_ACCESS_KEY_ID=AKI...

    导出 AWS_SECRET_ACCESS_KEY=CN...

6.  现在进行同步，但添加关键的“配置文件”-参数

    aws --profile ${YOUR_CUSTOM_PROFILE} s3 同步 s3://${SOURCE_BUCKET_NAME} s3://${DESTINATION_BUCKET_NAME}

* * *

## 回答 #5

> 赞同：-11
> 
> 时间：2012-10-04T01:03:52.027

好的，想出了一个答案。可能还有其他方法可以做到这一点，但这很容易。

我可以使用 s3cmd 实用程序来做到这一点，但也可以使用类似的工具来完成。

配置 s3cmd 时，请使用*您的*帐户访问密钥和秘密访问密钥对其进行配置。

**使用您要转移到**的存储桶的帐户登录 S3 Web 控制台。

访问 S3 Web 控制台。

```
https://console.aws.amazon.com/s3/home 
```

单击您的存储桶，然后单击操作，然后单击属性。

在“权限”选项卡下的底部，单击“添加更多权限”。

```
Set "Grantee" to Everyone

Check "List" and "Upload/Delete"

Save 
```

要转移，请从您的终端运行

```
s3cmd cp s3://from_account_bucket s3://to_account_bucket --recursive 
```

传输完成后，您应**立即**再次访问 S3 控制台并删除您为存储桶添加的权限。

这里显然存在安全问题。我们要转移到的存储桶对所有人开放。有人找到您的存储桶名称的机会很小，但确实存在。

您可以使用存储桶策略作为仅打开对特定帐户的访问权限的替代方式，但这对我来说太难了，因此我将其作为练习留给那些需要弄清楚的人。

希望这可以帮助。

# c++ - 是否有可用的演示 C/C++ OpenCV 程序从网络摄像头进行简单的球跟踪？

> ID：12700922
> 
> 赞同：3
> 
> 时间：2012-10-03T01:52:21.687
> 
> 标签：c++, c, opencv, trackball

是否有任何用于 OpenCV 的 C/C++ 中可用的开源或演示代码来进行简单的球跟踪？

基本上我想在我的网络摄像头前拿着一个红色的球，我想让 OpenCV 检测它的位置。如果我将球移向屏幕的右侧或左侧，程序将检测到球的位置已更改并输出其新位置。

我已经使用网络摄像头在树莓派上成功安装了 Open CV 2.3.1，最终我想在 pi 上执行代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:17:39.530

我只是偶然发现了[这一点](http://www.youtube.com/watch?v=0dMGDzFYXVY&feature=player_embedded)。这是一个 cvBlob 示例，与您想要做的非常相似。源代码[在](http://cvblob.googlecode.com/hg/samples/red_object_tracking.cpp)[~~这里~~](http://code.google.com/p/cvblob/source/browse/trunk/samples/red_object_tracking.cpp) 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T12:40:41.440

这似乎是我正在寻找的：

[https://github.com/tommed/tommed-opencv-examples/](https://github.com/tommed/tommed-opencv-examples/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T02:36:35.680

我之前玩过一个名为[Touchless的项目](http://touchless.codeplex.com/)

对于您打算做的事情来说，这可能有点太复杂了，但是那里有一些标记跟踪代码，它可能很有用；）

祝你玩你的 Pi 好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-25T17:13:58.133

您找到的示例 - Tommed - 使用 RGB 来跟踪颜色。

看看 HSV 平面，你会做得更好。cvBlob 库中有一个例子

然而，人们在 Pi 上使用 cvBlob 取得了不同程度的成功。HSV的原理仍然是要走的路。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-27T00:43:31.793

如果您想检测简单的物体，例如红色球，您可以考虑使用像素相机。

# php - 将焦点设置在 img src

> ID：12700926
> 
> 赞同：1
> 
> 时间：2012-10-03T01:53:28.273
> 
> 标签：php, javascript, setfocus

我有一个评论框之类的东西，每条评论都有一个这样的删除按钮。

当我单击`img`删除我的评论时，它运行良好，但专注于页面的顶部。

我可以以某种方式将其集中在我将要删除的评论上，还是只能集中在页面的顶部或底部？我不确定这是否令人困惑......

```
 <a href="#" onclick="deletedata('<?php echo $row['CommentID'];?>')" 
     style="color:#FF0000; float:right;margin-right:20px;">
            <img src="images/trash.png" style="background:#FFFFFF" />
  </a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T01:56:35.797

添加`return false`到您的 Javascript 语句的末尾以防止遵循 href：

```
onclick="deletedata('<?php echo $row['CommentID'];?>'); return false;" 
```

# c# - Windows 8 应用程序超时

> ID：12700927
> 
> 赞同：1
> 
> 时间：2012-10-03T01:53:37.070
> 
> 标签：c#, windows-runtime

任何人都知道是否有办法禁用 Windows Metro 应用程序超时。我正在寻找类似于 WP7 中的 IdelDetectionMOde 的东西？我有一个应用程序需要一直保持到用户关闭或关闭它。

# iphone - 向应用商店提交应用时如何归属多个开发者？

> ID：12700932
> 
> 赞同：1
> 
> 时间：2012-10-03T01:54:49.960
> 
> 标签：iphone, ios, app-store

我们两个人在同一个 iPhone 应用程序上工作。我们俩过去都没有提交过，所以我们不确定这个过程。

如果我们俩都被归因，我们会喜欢它。我们如何才能最好地解决这个问题，因为我们都有 Apple 的个人开发者帐户，而且我们不是一家公司？

应用商店的应用标题下显示什么？是公司名称、卖家名称、版权名称，还是？公司名称与您的个人名称相同吗？您可以在每个应用程序的基础上更改它吗？应用程序底部的图像下方显示什么？

我到处搜索，找不到答案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:15:13.240

不幸的是，该应用程序只能在一个 Apple Store 帐户下提交。由您决定谁*“拥有”*该帐户。

如果这是我的应用程序，我会购买一个新的 Apple Developer 帐户，为我的两名开发人员团队决定一个好听的名称，然后两个开发人员都应该可以访问该帐户，以便您可以跟踪销售、进度和崩溃等。

一旦你决定了帐户的名称——即它在 App Store 上的显示方式——这就是今后在该帐户上提交的所有其他应用程序的名称。改变它真的很难（如果不是不可能的话）。

# iphone - iOS - 从 App Store 安装旧版本的应用程序

> ID：12700934
> 
> 赞同：16
> 
> 时间：2012-10-03T01:55:00.853
> 
> 标签：iphone, ios, app-store, app-store-connect

我们今天刚刚在 App Store 中批准了一个应用更新。但是，在某些设备上，当我们下载该应用程序时，即使先将其完全删除，它也会安装以前的版本。该设备是否以某种方式记住旧版本？这怎么可能？从今天开始，一些不常用于开发的设备似乎下载了正确的版本。

这里会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T19:13:48.467

这些设备是否曾经通过 TestFlight 安装过您的应用程序？我们遇到了这个问题，TestFlight 也引起了类似的问题。我们会尝试从 App Store 下载该应用程序，并且会安装一个较旧的应用程序版本。有趣的是，在安装这个较旧的应用程序并返回 App Store 后，我们会被告知我们的应用程序有可用的更新，此时我们将能够更新到正确的版本。

删除 TestFlight 及其相关配置文件似乎没有帮助；将手机恢复出厂设置就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T05:09:22.570

I don't know about TestFlight. But, I had this issue when my new version of app gets to "Ready for Sale". Spent long time searching for a solution for this issue.

Surprisingly about an hour it got resolved by itself. So, I advice you to be patient it works by itself after a while.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T02:17:49.757

您的应用程序进入“准备销售”的时间、您的新关键字（如果有）被 App Store 索引的时间以及二进制下载实际更新的时间之间存在时间差异。根据我们的经验，他们不会超过一个小时，但我可以想象有很多因素会影响这种延迟。

如果确实需要很长时间，那么将其报告给 Apple 可能是个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-29T09:29:37.840

我有同样的问题，我在 iTunesConnect 的帮助下上传了新版本的应用程序，但应用程序商店没有显示我的新版本。当我将应用程序上传到 iTunes 时，我上传了应用程序版本 1.06，但由于某些错误上传无效，所以我再次修复了小错误并再次上传，但这次但没有再次打开版本（我已经打开 iTunes，所以我只是上传新版本但不将新版本创建到 iTunes 中。）

所以我在 iTunes 连接帐户上再次单击新版本并设置相同的版本 1.0.7 并在应用程序上设置相同的版本并更改内部版本号并再次从 Xcode 上传到 iTunes 然后保存并单击提交之后一天审核时间我的新版本上传到应用商店。如果您使用 Apple Store 应用程序进行下载，请确保您直接从应用程序商店下载，然后更新 Apple Store 应用程序，否则您的应用程序不会显示旧版本的新版本。

# opencv - 由于在 Code::Block 中缺少“libgcc_s_dw2-1.dll”，OpenCV 程序无法运行

> ID：12700935
> 
> 赞同：1
> 
> 时间：2012-10-03T01:55:03.163
> 
> 标签：opencv, mingw, codeblocks

我编写了一个简单的 OpenCV 程序，尝试在同一目录中打开图像“kindle-fire-hd.jpg”。IDE 为 Code::Block，OpenCV 版本为 2.4.2，编译器为 MinGW，作为 Code::Block 的组件附加。代码如下所示：

```
#include "opencv2/highgui/highgui.hpp"
#include <iostream>

using namespace cv;
using namespace std;

int main(int argc, char** argv)
{
  Mat im = imread(argc == 2 ? argv[1] : "kindle-fire-hd.jpg", 1);
  if (im.empty())
  {
    cout << "Cannot open image!" << endl;
    return -1;
  }

  imshow("image", im);
  waitKey(0);

  return 0;
} 
```

它可以正确构建和编译（没有任何错误和警告消息），并且我已经按照[Getting started with OpenCV 2.4 and MinGW on Windows 7](https://stackoverflow.com/questions/10860352/getting-started-with-opencv-2-4-and-mingw-on-windows-7)中的说明配置了 Code::Block 。

但是，当我“运行”这个程序时。它显示“缺少 libgcc_s_dw2-1.dll”消息。

![](../Images/81ba9befe90ccaf49c9bb94da7e3f0e2.png)

而且，当我单击“确定”按钮时，控制台窗口会显示以下消息：

![控制台，错误代码窗口](../Images/b20acef5396b386025d2f59f3f3d1120.png)

我试图在 stackoverflow 上搜索相关的问题，但他们的所有解决方案都无法解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T02:55:43.250

最后，我解决了这个问题！

导致此“缺少 dll”问题的原因是附带 Code::Block 的 MinGW 编译器不完整。因此，您需要将所需的DLL文件下载到目录“C:\Program Files (x86)\CodeBlocks\MinGW\libexec\gcc\mingw32\4.4.1”，您还需要将该目录的路径添加到系统 PATH 环境变量。

在这种情况下，我下载了两个 DLL 文件：libgcc_s_dw2-1.dll 和 libstdc++-6.dll，即使只缺少一条关于 libgcc_s_dw2-1.dll 的错误消息。如果您忘记了第二个 libstdc++-6.dll，则在运行程序时会收到另一条丢失的消息。

第一个 dll，libgcc_s_dw2-1.dll，可能会喜欢这个问题[我在哪里可以获得 libgcc_s_dw2-1.dll？](https://stackoverflow.com/questions/9330219/where-can-i-get-libgcc-s-dw2-1-dll)，其中下载链接列在作者rodrigo选择的答案中。谢谢大佬！

第二个dll，libstdc++-6.dll，可以在[http://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/Version4/gcc-4.6.2-1/libstdc%2B%2B-下载4.6.2-1-mingw32-dl​​l-6.tar.lzma/下载](http://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/Version4/gcc-4.6.2-1/libstdc%2B%2B-4.6.2-1-mingw32-dll-6.tar.lzma/download)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:00:41.347

不管出于什么原因 Code::blocks 没有随该 DLL 一起提供，尽管它可以通过 google 的站点下载。您可能需要另一个 DLL，即 libstdc++6.dll

人们会通知您在链接选项中链接 -static-libgcc、-static- 或 -static-libg++，至少使用我的版本（大概是您的版本）它不会解决问题，除非我做错了，这是合理的.

# ms-access - 在宏中循环 3 个操作查询，直到第 4 个选择查询不返回任何记录

> ID：12700939
> 
> 赞同：0
> 
> 时间：2012-10-03T01:55:31.877
> 
> 标签：ms-access, ms-access-2007, vba

我有一个名为“macro_workorder_receipt”的 Access 2007 宏，它运行一堆查询。我希望有人指导我如何在下面列出的查询中循环查询 #2 和 #3 和 #4 ，直到选择查询 #1 不返回任何记录。一旦查询 #1 停止返回记录，我希望宏跳过查询 #2 和查询 #3 和 #4 并继续运行下一个未循环的宏操作。此外，如果任何查询 #2、#3 或 #4 失败（可能是由于数据库超时，因为另一个用户锁定了表或抓取了我的事务 ID（主键），然后我才能将其附加到链接的表），那么该失败的查询应该在继续下一个查询之前重新运行（以防止不匹配的记录）。还应该有 100 个循环的限制，所以我不会使数据库服务器过载。

1.  （选择查询）“qryAuto_issue_primary_key_generator”
2.  “qryAppend_autoissue_part_ID_to_sysadm_inventory_trans”</li>
3.  “qryMktbl_tbl_dynamic_autoissue_data_with_append_status”
4.  “qryUpdt_tbl_dynamic_autoissue_data_with_append_status”

我不知道 VBA，所以如果使用常规宏操作执行循环不可行，有人可以提供 VBA 代码来复制和粘贴吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:07:37.477

The simplest way of doing this is in fact using vba.

What I usually do is to nest recordsets into loops.

I can help you with the code, but you'll have to do the homework.

So, first read the Access Help (`Alt+F11`, `Alt+F1`) regarding to "Recordsets"

Also, can you please post the SQLs of your queries?

# .htaccess - htaccess 重定向所有域内但保留图像

> ID：12700941
> 
> 赞同：0
> 
> 时间：2012-10-03T01:55:44.503
> 
> 标签：.htaccess

我有 parkeddomain.com 和 maindomain.net （在配置服务器时设置）该网站在 parkeddomain.com 上运行，以供每次思考

现在我需要将所有对 maindomain.com 的请求重定向到 parkeddomain.com

到目前为止我得到了

```
RewriteCond %{HTTP_HOST} ^maindomain.net$ [OR]
RewriteCond %{HTTP_HOST} ^www.maindomain.net$
RewriteRule (.*)$ http://www.parkeddomain.com/$1 [R=301,L] 
```

但只有域重定向，内部页面/子文件夹不重定向！

而且我还需要无 cookie 的速度目的，静态/图像文件我需要保持图像 url 不重定向

例如：`www.maindomain.net/sample.html`需要重定向到`www.parkeddomain.com/sample.html`

但`www.maindomain.net/images/abc.jpg`不重定向到任何地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:06:58.423

尝试这个：

```
RewriteCond %{HTTP_HOST} ^maindomain.net$ [OR]
RewriteCond %{HTTP_HOST} ^www.maindomain.net$
RewriteRule (.*)\.jpg - [L]
RewriteRule (.*)$ http://www.parkeddomain.com/$1 [R=301,L] 
```

以下规则说，如果 url 以 then 结尾，`.jpg`则不要执行任何操作。`-`说什么都不做，并说`[L]`这应该是要遵循的最后一条规则，因此它忽略任何以下规则。

```
RewriteRule (.*)\.jpg - [L] 
```

如果你想要多个图像扩展，那么你可以使用类似于：

```
RewriteRule (.*)\.(jpg|jpeg|gif|png) - [L] 
```

# c# - 通过 VS 接口进行表单控制的多事件处理程序

> ID：12700942
> 
> 赞同：2
> 
> 时间：2012-10-03T01:55:52.260
> 
> 标签：c#, .net, visual-studio-2010

我有一个列表框，我想将它与两个事件处理程序相关联，通过 VS 2010 中的界面只允许我指定一个，如下所示 ![在此处输入图像描述](../Images/397a48f10a4adf26a85f056e2dbd93d2.png)

我想调整设计器代码可能不是一个好习惯，有没有办法通过 Visual Studio 界面添加事件处理程序？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T01:58:56.103

> 无论如何通过Visual Studio界面添加事件处理程序

在调用 之后，您始终可以在表单的构造函数中添加事件处理程序`InitializeComponent()`，即：

```
public Form1()
{
     InitializeComponent();
     lstDataset.SelectedIndexChanged += this.SecondEventHandler;
} 
```

话虽如此，这可能不是一个好主意。*同一个类*没有理由多次订阅同一个对象上的同一个事件。您可以将“两个处理程序”的代码放在同一方法中。

# asp.net - MVC ViewModel 错误 - 没有为此对象定义无参数构造函数

> ID：12700943
> 
> 赞同：9
> 
> 时间：2012-10-03T01:55:52.657
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-3, razor

我想知道如何在 Create Action 上使用我的 ViewModel？我尝试了几个在论坛中找到的示例，但没有一个能解决我的问题。这几天我一直在绞尽脑汁，但不知道出了什么问题。

每当我单击创建按钮时，我都会收到以下错误：没有为此对象定义无参数构造函数。

```
@model MvcMusicStore.ViewModels.AlbumViewModel

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Album</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.AlbumItem.GenreId, "Genre")
        </div>
        <div class="editor-field">
            @Html.DropDownList("Genres", String.Empty)
            @Html.ValidationMessageFor(model => model.AlbumItem.GenreId)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.AlbumItem.ArtistId, "Artist")
        </div>
        <div class="editor-field">
            @Html.DropDownList("Artists", String.Empty)
            @Html.ValidationMessageFor(model => model.AlbumItem.ArtistId)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.AlbumItem.Title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.AlbumItem.Title)
            @Html.ValidationMessageFor(model => model.AlbumItem.Title)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.AlbumItem.Price)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.AlbumItem.Price)
            @Html.ValidationMessageFor(model => model.AlbumItem.Price)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.AlbumItem.AlbumArtUrl)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.AlbumItem.AlbumArtUrl)
            @Html.ValidationMessageFor(model => model.AlbumItem.AlbumArtUrl)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

创建.cshtml

```
 public class StoreManagerController : Controller
        {
            private MusicStoreDB db = new MusicStoreDB();

            //
            // GET: /StoreManager/Create

            public ActionResult Create()
            {
                var viewModel = new AlbumViewModel()
                {
                    Genres = new SelectList(db.Genres, "GenreId", "Name"),
                    Artists = new SelectList(db.Artists, "ArtistId", "Name")
                };
                return View(viewModel);
            } 

            //
            // POST: /StoreManager/Create

            [HttpPost]
            public ActionResult Create(AlbumViewModel vm)
            {
                if (ModelState.IsValid)
                {
                    db.Albums.Add(vm.AlbumItem);
                    db.SaveChanges();
                    return RedirectToAction("Index");  
                }

                vm.Genres = new SelectList(db.Genres, "GenreId", "Name", vm.AlbumItem.GenreId);
                vm.Artists = new SelectList(db.Artists, "ArtistId", "Name", vm.AlbumItem.ArtistId);
                return View(vm);
            }
} 
```

StoreManager.cs - 片段

```
public class AlbumViewModel
    {
        public AlbumViewModel()
        {
            //  nothing
        }

        public Album AlbumItem { get; set; }
        public SelectList Genres { get; set; }
        public SelectList Artists { get; set; }
    }

public class Album
    {
        public Album()
        {
            //  nothing
        }

        public virtual int AlbumId { get; set; }
        public virtual int GenreId { get; set; }
        public virtual int ArtistId { get; set; }
        public virtual string Title { get; set; }
        public virtual decimal Price { get; set; }
        public virtual string AlbumArtUrl { get; set; }
        public virtual Genre Genre { get; set; }
        public virtual Artist Artist { get; set; }
    }

public class Artist
    {
        public Artist()
        {
            // nothing
        }

        public virtual int ArtistId { get; set; }
        public virtual string Name { get; set; }
    }

public class Genre
    {
        public Genre()
        {
            // nothing
        }

        public virtual int GenreId { get; set; }
        public virtual string Name { get; set; }
        public virtual string Description { get; set; }
        public virtual List<Album> Albums { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-03T04:10:40.420

如果我每次看到这个问题都有一个镍币。它通常与模型属性的命名以及如何在`DropDownList`. 99.999% 的时间是因为人们使用`Html.DropDownList()`和命名它与他们的`SelectList`. 这是您应该使用强类型的原因之一`DropDownListFor`。

在这种情况下，您的问题是您有`SelectList`s 命名`Genres`和`Artists`，那么在您看来，您有：

```
@Html.DropDownList("Genres", String.Empty)
@Html.DropDownList("Artists", String.Empty) 
```

看，同名。

您应该做的是更改您的模型以使`SelectList`s 被命名为`GenreList`and `ArtistList`。然后，更改您的视图以使用强类型模型。

```
@Html.DropDownListFor(m => m.AlbumItem.GenreID, Model.GenreList)
@Html.DropDownListFor(m => m.AlbumItem.ArtistID, Model.ArtistList) 
```

发生这种情况的原因是您正在向控制器发布一个名为 Genres 的值。默认模型绑定器尽职尽责地在模型中查找名为 Genres 的内容并将其实例化。但是，它找到了一个名为 Genres 的 SelectList，而不是一个 ID 或字符串，当它尝试实例化它时，它发现没有默认构造函数。

因此你的错误。SO充满了关于同样事情的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T11:12:12.150

与[Erik Funkenbusch 的回答](https://stackoverflow.com/a/12701768/413180)类似，我在表单中添加了一个 DropDownList，但是在我的情况下，它没有（也不打算）与表单一起提交，因为它在`<form></form>`标签之外：

```
@Html.DropDownList("myField", Model.MyField) 
```

由于模型包含仅用于显示的字段，这也导致了`No parameterless constructor defined for this object`错误，因为该字段根本没有提交。

在这种情况下，我通过添加排除绑定来修复它：

```
public ActionResult Foo(int id, int? page, [Bind(Exclude = "MyField")]MyModel model) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T10:24:28.983

对我来说，问题出在 BeginForm() 方法本身。它看起来像这样：

```
@using (Html.BeginForm("MyAccount", "MyController", Model)) 
```

从另一个项目的登录页面复制并粘贴，该页面没有下拉菜单。

无论如何，从参数列表中删除模型，一切正常:)

# cocoa - 使用 [NSValue valueWithCATransform3D: ] 创建 Transformable 属性时需要帮助调试 _encodeObject 中的异常

> ID：12700945
> 
> 赞同：4
> 
> 时间：2012-10-03T01:56:11.480
> 
> 标签：cocoa, core-data, nsmanagedobject, catransform3d, transformable

我正在尝试将 CATransform3D 保存在核心数据存储中。在我的自定义 NSObject 子类中，我使用：

```
self.transform = [NSValue valueWithCATransform3D: inputTransform ]; 
```

将输入 CATransform3D 转换为 NSValue。NSLog 显示了预期的转换：

```
2012-10-02 18:12:27.019 Model Importer[27908:303] Transform: <00000000 0000f03f 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 0000f03f 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 0000f03f 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 0000f03f> 
```

从我读过的所有 NSValue 中，通过实现 NSCoding（通过 NSSecureCoding），当在模型中指定为 Transformable 时应该是可存储的。但是，在写信给商店时，我得到了异常：

**[NSKeyedArchiver encodeValueOfObjCType:at:]：这个归档器不能编码结构**

我还有其他 CIColor 类型的 Transformable 属性似乎工作正常。

我确信还有许多其他方法可以存储 CATransform3D 属性，但我想了解这里不起作用的地方，以避免遇到类似情况。

对于它的价值，此时商店设置为默认二进制文件，但这在我看来并不取决于商店类型。

我错过了什么吗，这是一个已知的错误，还是其他什么？

# javascript - Javascript 移除事件

> ID：12700946
> 
> 赞同：1
> 
> 时间：2012-10-03T01:56:23.853
> 
> 标签：javascript, jquery

伙计们，我有一个小问题，对我来说很大，所以我不得不问你...无论如何问题是，我想从一个表中复制表行并将其添加到另一个表中，但在我将其添加到另一个表之前表我需要删除它的所有事件，我使用了谷歌分配但它没有帮助我

```
var $UserRow = $(Final).closest('tr');

$('td', $UserRow).each(function () {
    $(this).onclick = null;
});

$UserRow.clone().appendTo($('#UserTicket')); 
```

这是到目前为止的代码，我得到了 UserRow 和它里面的所有 'td' 只是如何删除它的所有事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:59:42.610

您只需要先克隆，然后附加到容器。`.clone`默认情况下不复制事件处理程序。

```
var $UserRow = $(Final).closest('tr').clone();
$UserRow.appendTo('#UserTicket'); 
```

***[jQuery.clone()](http://api.jquery.com/clone/)***

```
.clone( [withDataAndEvents] [, deepWithDataAndEvents] ) 
```

> ***withDataAndEvents***一个布尔值，指示是否应将事件处理程序和数据与元素一起复制。**默认值为 false**。在 jQuery 1.5.0 中，默认值是不正确的；它在 1.5.1 及更高版本中改回 false 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:29:39.333

由于它们不是 jQuery 事件系统的一部分，因此没有理由创建 jQuery 对象。

您需要清除本机 DOM 元素：

```
$('td', $UserRow).each(function () {
    this.onclick = null;
}); 
```

由于您使用了事件属性，我不确定是否会重新创建处理程序，因此您可能也想清除它。

```
$('td', $UserRow).each(function () {
    this.onclick = null;
    this.removeAttribute("onclick");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:03:10.477

尝试使用 DOM 和`cloneNode`; 您会注意到事件处理程序不会被复制。例如：

```
// get the first table row in the document.
var firstRow = document.getElementsByTagName('tr')[0];

// give it an event handler to test.
firstRow.onclick = function() { alert('It works'); };

// clone the row and append it to the end of the row set.
firstRow.parentNode.appendChild(firstRow.cloneNode(true)); 
```

你可以[在这里](http://jsfiddle.net/QtWGh/)测试它；您会看到它克隆了第一行并将其附加到表的末尾，并且该行不再可单击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T01:58:37.927

使用 jQuery `.off`。

```
$(element).off('click'); 
```

使用上述内容删除所有点击处理程序。要仅删除特定的单击处理程序，请执行

```
$(element).off('click', functionNotToBeExecuted); 
```

# jquery - 使用 jquery 解析 JSON

> ID：12700965
> 
> 赞同：0
> 
> 时间：2012-10-03T01:58:56.157
> 
> 标签：jquery, json, api

这里完全是初学者。我有 jquery 库。我调用了一个返回 json 的 api。我想使用 jquery 库中的 parseJSON 函数来解析它。简单地说，我不知道该怎么做。

我可以在 jquery 库中找到该函数，它看起来像这样：

```
parseJSON: function( data ) {
    if ( typeof data !== "string" || !data ) {
        return null;
    }

    // Make sure leading/trailing whitespace is removed (IE can't handle it)
    data = jQuery.trim( data );

    // Attempt to parse using the native JSON parser first
    if ( window.JSON && window.JSON.parse ) {
        return window.JSON.parse( data );
    }

    // Make sure the incoming data is actual JSON
    // Logic borrowed from http://json.org/json2.js
    if ( rvalidchars.test( data.replace( rvalidescape, "@" )
        .replace( rvalidtokens, "]" )
        .replace( rvalidbraces, "")) ) {

        return ( new Function( "return " + data ) )();

    }
    jQuery.error( "Invalid JSON: " + data );
}, 
```

我如何通过它发送我的json？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:03:05.840

```
var obj = jQuery.parseJSON(yourJsonObj); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T02:10:41.917

如果您使用的是 jQuery AJAX 命令，它们中的大多数都带有一个 dataType 参数。将 dataType 设置为 'json' 将自动解析返回的数据。

```
$.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: callback
}); 
```

在这种情况下，数据最终将成为基于从 AJAX 调用返回的 JSON 的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T02:06:34.970

如果您使用[jQuery.getJSON](http://api.jquery.com/jQuery.getJSON)函数，您可以访问您的 API 端点并在一次调用中解析所有响应。

```
$.getJSON("/my_resource.json", function(data) {
  // Use data here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T02:09:27.653

jQuery 的 parseJSON() 函数会将 json 转换为 javascript 对象。

如果您的 json 是，例如：

```
{ "firstname" : "john", "lastname" : "doe" } 
```

然后当您使用 parseJSON 时，您可以像这样访问属性：

```
var json = '{ "firstname" : "john", "lastname" : "doe" }';
var person = jQuery.parseJSON(json);

console.log(person.firstname); //will show john
console.log(person.lastname); //will show doe 
```

那应该让你开始。有关更多信息，请阅读此处的文档：http: [//api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

# php - 如何在 PHP 中对上传的 PDF 进行密码保护

> ID：12700974
> 
> 赞同：3
> 
> 时间：2012-10-03T02:00:09.300
> 
> 标签：php, security, passwords

我有一个网络应用程序，用户可以在其中上传 PDF 文档。是否有可用于密码保护 PDF 文件的 PHP 库？我需要该库来保留原始 PDF 的所有方面（即大小、字体、分辨率等）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T02:14:02.600

[下载使用的库：在 PHP 中保护 PDF](http://www.idsecuritysuite.com/blog/wp-content/uploads/fpdi.zip)

```
<?php

function pdfEncrypt ($origFile, $password, $destFile){
//include the FPDI protection http://www.setasign.de/products/pdf-php-solutions/fpdi-protection-128/
require_once('fpdi/FPDI_Protection.php');

$pdf =& new FPDI_Protection();
// set the format of the destinaton file, in our case 6×9 inch
$pdf->FPDF('P', 'in', array('6','9'));

//calculate the number of pages from the original document
$pagecount = $pdf->setSourceFile($origFile);

// copy all pages from the old unprotected pdf in the new one
for ($loop = 1; $loop <= $pagecount; $loop++) {
    $tplidx = $pdf->importPage($loop);
    $pdf->addPage();
    $pdf->useTemplate($tplidx);
}

// protect the new pdf file, and allow no printing, copy etc and leave only reading allowed
$pdf->SetProtection(array(),$password);
$pdf->Output($destFile, 'F');

return $destFile;
}

//password for the pdf file
$password = 'info@domain.com';

//name of the original file (unprotected)
$origFile = 'book.pdf';

//name of the destination file (password protected and printing rights removed)
$destFile ='book_protected.pdf';

//encrypt the book and create the protected file
pdfEncrypt($origFile, $password, $destFile );
?> 
```

**编辑** [使用的库的原始来源](https://www.setasign.com/products/fpdi/downloads/)。请注意，我上面的答案没有使用原始来源的脚本进行测试。我从上面的第三方链接下载的，我没有检查它们是否完全相同。

# security - kerberos匿名登录

> ID：12700978
> 
> 赞同：1
> 
> 时间：2012-10-03T02:00:25.297
> 
> 标签：security, sharepoint, kerberos, anonymous, spn

我正在尝试在 Java 上实现 Kerberos 身份验证以使用 Sharepoint 2010。
已经进行了大量配置：SPN、委托、权限、网络。使用 org.ietf.jgss 实现 Kerberos。

当前状态如下： IE 工作正常，Java 应用程序工作不正确。

我现在几乎唯一的区别是在事件查看器\Windows 日志\安全中。
如果我使用 Internet Explorer 登录，它会显示：

> 帐户已成功登录。
> ...
> 新登录：
> 安全 ID：COMPANYDOMAIN\myusername
> 帐户名称：myusername
> 帐户域：COMPANYDOMAIN
> ...
> 详细身份验证信息：
> 登录过程：Kerberos

使用我的 JavaApp 登录：

> 帐户已成功登录。
> ...
> 新登录：
> 安全 ID：匿名登录 *------> ???*
> 帐户名：myusername
> 帐户域：COMPANYDOMAIN.NET *------> .NET(!)*
> ...
> 详细的身份验证信息：
> 登录过程：Kerberos

使用 Wireshark，我可以看到票证在端点被成功接受，除了加密令牌的大小之外没有任何区别，甚至更多 - SharePoint 确实适用于我的 java 客户端。为什么它在匿名登录下工作的问题是不同的，我应该在某个地方关闭它。

主要问题是为什么安全 ID 是“匿名登录”，而帐户名和域是有效的？委派\模拟问题？但是 IE 在即使不在 Active Directory 之外的机器上也能正常工作。

如果需要，我可以提供其他信息：网络流量、SPN、应用程序池、权限、AD 配置。

============================

已解决：通过取消选中 Active Directory 用户帐户属性（选项卡帐户，帐户选项部分）中的复选框“不需要 Kerberos 预身份验证”来解决问题。

# drupal - 如何通过drupal中的规则填写日期字段

> ID：12700981
> 
> 赞同：0
> 
> 时间：2012-10-03T02:00:56.407
> 
> 标签：drupal, drupal-7, datefield, drupal-rules

我的 drupal 页面 ( *Drupal 7* ) 中的一种内容类型有一个**日期字段**。从 XML 文件导入开始小时、开始分钟和持续时间（*整数值*）后，我想通过规则设置节点的日期字段。似乎我无法访问日期字段的开始日期、结束日期、持续时间和重复。

是否有设置开始日期、结束日期、重复等的解决方案？

```
Node A
-- title (text)
-- start minute (integer)
-- start hour (integer)
-- end minute (integer)
-- end hour (integer)
-- duration (integer)
-- days (integer values)

Node B
-- title (text)
-- date (date field) 
```

使用规则我想循环每个节点 A 的内容并想要创建节点 B 的内容。在创建时，我想使用节点 A 的值设置日期字段。日期字段具有“开始日期、结束日期和重复”等选项。我想设置这些值，但规则中没有“重复”的标记。

节点 A 只是一个帮助节点，我用来从带有提要的 XML 文件中导入我的值。提要（使用 XML 解析器）无法将不同的值（分钟、小时、持续时间、重复）映射到一个日期字段。所以我希望这条规则可以帮助我。创建节点 BI 后将删除节点 A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:18:33.440

您可以使用模块[调度程序](http://drupal.org/project/scheduler)

如果您的要求非常具体，您可以在操作下使用执行 php 代码并使用查询更新数据库记录

干杯！！！

# c# - 如何在 C# MVC 应用程序中在运行时创建 SQL Server Express 数据库？

> ID：12700982
> 
> 赞同：0
> 
> 时间：2012-10-03T02:01:01.703
> 
> 标签：c#, entity-framework, sql-server-express

我正在尝试在 MVC3 Web 应用程序中使用 C# 中的 Entity Framework 5 来执行此操作：

```
// Local DB connection
var dbId = String.Format(@"Data Source=.\SQLEXPRESS;AttachDbFilename={0}.mdf;Database=Tests;Integrated Security=True;Pooling=False;Connect Timeout=30;User Instance=True", _dbPath);
_connection = new SqlConnection(dbId);

Database.SetInitializer<MyContext>(new DropCreateDatabaseAlways<MyContext>());

// Reset database if the file exists
var ctx = new MyContext(_connection);
ctx.Database.CreateIfNotExists();
ctx.Database.Initialize(true);
ctx.SaveChanges();

return _connection; 
```

这适用于我的测试，但不适用于我运行 Web 应用程序时。当我运行 Web 应用程序时，我得到：

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）*

我在其他一些问题中看到人们建议从连接字符串中删除“用户实例”，但这会导致：

> *数据库“master”中的 CREATE DATABASE 权限被拒绝。*

让我在这里完全清楚我的目标：我试图让 Web 应用程序`sqlexpress`按需创建数据库实例 ()。

*提前*创建数据库实例不是解决方案。

*当应用程序工作人员访问和创建*数据库时，为什么需要某种特殊权限，我对此感到非常困惑。

你怎么能做到这一点？

使用 sqlite 这是一个微不足道的操作，我开始觉得使用 Entity Framework（以及 SQL Server Express）是错误的，我应该使用 fluent nhibernate 和 sqlite 来代替。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:20:38.470

这篇文章[http://support.microsoft.com/kb/2002980](http://support.microsoft.com/kb/2002980)建议这是“ASP.Net V4.0”应用程序池的默认帐户“ApplicationPoolIdentity”的文件权限问题，并建议将其更改为使用“网络服务”。

# html - 如何“智能”我的 HTML/CSS 表格，使文本适合一行（巧妙地）

> ID：12700986
> 
> 赞同：2
> 
> 时间：2012-10-03T02:01:13.353
> 
> 标签：html, css, css-tables

我有一个在我的代码中重复使用的 CSS 表。每次使用表时，数据的大小和表的列数都会有所不同。表格的最大宽度（由 CSS 设置）是页面的 80%。但是，有时当表格有少量数据时（可能将表格扩展到页面的 50%），一些文本行会分成两行。我该如何抵消这一点，因此该表使用了所有可用空间。

这是目前发生的情况：

![问题](../Images/0c8d66ae1f386c66eb8f416311841113.png)

我已经尝试为表格设置手动宽度，但这意味着即使表格宽度只需要很小，表格也会保持拉伸状态。

我也尝试过使用 CSS`white-space:nowrap;`但是，如果一列中有很多数据，这会导致表格扩展超过 80%。

无论如何用CSS解决这两个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T03:38:55.023

只需使用这个 css：

```
td
{
white-space: nowrap; overflow: hidden; text-overflow:ellipsis;
}​ 
```

结果是这样的：http: [//jsfiddle.net/ongisnade/pghny/](http://jsfiddle.net/ongisnade/pghny/)

# asp.net-mvc-3 - 单元测试 MVC 控制器与 UnityAutoMoq 解析采用构造函数参数的接口

> ID：12700988
> 
> 赞同：0
> 
> 时间：2012-10-03T02:01:42.833
> 
> 标签：asp.net-mvc-3, unit-testing, unity-container, automocking

正如标题所说，我正在尝试解析一个实现了一个具体类的接口，该类也接受一个构造函数。

下面以具体的服务类为例：

```
public class MessageService : IMessageService
{
    private readonly IMessageGenerator _messageGenerator;

    public MessageService(IMessageGenerator messageGenerator)
    {
        _messageGenerator = messageGenerator;
    }

    public string GetMessage()
    {
        return string.Concat(_messageGenerator.GetMessage(), "");
    }
} 
```

如您所见，此服务类还需要一个接口作为构造函数参数。MVC 控制器构造函数如下所示：

```
 private readonly IMessageService _messageSvc;

    public HomeController(IMessageService messageSvc)
    {
        _messageSvc = messageSvc;
    } 
```

感谢 Unity.Mvc3，我已经解决了 Bootstrapper 中的接口

```
var container = new UnityContainer();

container
        .RegisterType<IMessageService, MessageService>()
        .RegisterType<IMessageGenerator, MessageGenerator>(); 
```

所以我遇到的主要问题是如何使用 UnityAutoMoq 在单元测试中将 IMessageGenerator 接口的模拟实例传递给 IMessageService？我认为这样的事情会起作用，但它不会：

```
 [TestMethod]
    public void Index()
    {
        var container = new UnityAutoMoqContainer();
        var controllerContext = container.Resolve<ControllerContext>();
        var nMsgSvc = container.Resolve<IMessageService>(container.Resolve<IMessageGenerator>);
        var sut = new HomeController(nMsgSvc) { ControllerContext = controllerContext };

        ViewResult result = sut.Index() as ViewResult;

        Assert.AreEqual("Hello from the MessageGenerator via the MessageService", result.ViewBag.Message);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:46:50.693

测试控制器时不需要这样做。在那种情况下，控制器只需要一个 IMessageService 的模拟。

此外，为了测试 Index 方法，我根本不会使用容器，因为它不涉及。

这样的事情应该这样做：

```
// arrange
var messageService = new Mock<IMessageService>();
// setup message service
...

var controller = new HomeController(messageService.Object);

// act
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T11:26:56.557

这个问题很久以前就被问过了。但我会提供一个可能有帮助的答案。您真的不想存根 IMessageGenerator。您想要删除的是 IMessageService。并将其配置为返回您想要的消息。从 IMessageGenerator 返回的内容与您的控制器无关。如果您在 Controller 中使用 IMessageGenerator，它只会成为一个问题。

请注意，使用 UnityAutoMoq 容器的测试也写得不好。

您可以配置 IMessageService 以返回所需的字符串，如下所示。

```
 [TestMethod]
    public void Index_ViewData_ContainsExpectedMessage()
    {
        var container = new UnityAutoMoqContainer();
        var messageToReturnViaMessageGenerator = "Hello from the MessageGenerator via the MessageService";                        
        var messageGenratorStub = container.GetMock<IMessageService>();
        messageGenratorStub.Setup(x => x.GetMessage()).Returns(messageToReturnViaMessageGenerator);
        var sut = container.Resolve<HomeController>();

        ViewResult result = sut.Index() as ViewResult;

        Assert.AreEqual(messageToReturnViaMessageGenerator, result.ViewBag.Message);
    } 
```

有几点需要注意

*   您不需要解析 ControllerContext - 出于本测试的目的，它是不必要的
*   解决苏...

    ```
     var sut = container.Resolve<HomeController>(); 
    ```

这将返回您的 sut（被测系统）。此实例还可以包含您使用 UnityAutoMoqContainer 存根的任何存根实例。在这种情况下，它是存根的 IMessageService。这样，您不必将存根的 IMessageService 实例显式传递给 Controller 的构造函数。

*   只是一个未成年人 - 总是给出一个可读的测试名称;）

高温高压

# javascript - Phonegap 在图像捕获期间返回当前方向

> ID：12700989
> 
> 赞同：6
> 
> 时间：2012-10-03T02:01:43.003
> 
> 标签：javascript, android, cordova

我只能在他们的文档中找到有关返回设备方向的加速度计的信息。无论如何，phonegap 可以返回拍照时设备的持有方式吗？要使用相机，我这样做：

```
function capturePhoto() {
    // Take picture using device camera and retrieve image as base64-encoded string
    navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
        destinationType: destinationType.DATA_URL });
} 
```

当它返回成功时，它会执行此操作。

```
 function onPhotoDataSuccess(imageData) {
        var baseImg = imageData;
        $('#uploadPreUpImgSwapHtml').html('<img src="data:image/jpeg;base64,'+ baseImg +'" style="max-width:100%; width:auto; max-height:300px; height:auto;" / >');
        $('#uploadPreBaseDataSwapHtml').html('<input type="hidden" id="chosenPictureData" value="'+ baseImg +'" />');
        $('#uploadPictureBtnHideHtml').fadeIn();

    } 
```

是否有回调成功返回拍摄照片时设备的持有方式，以便我可以将其发送到我的上传文件并正确旋转图片？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-03T14:30:55.357

为了让您的生活更轻松，您可以致电：

```
navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
    destinationType: destinationType.FILE_URI, 
    correctOrientation: true }); 
```

然后你会得到一个正确旋转的文件。

# c++ - 使用从 DLL 导出的 MFC90 类和用 MFC100 构建的 DLL

> ID：12700993
> 
> 赞同：1
> 
> 时间：2012-10-03T02:02:43.510
> 
> 标签：c++, visual-studio-2010, visual-studio-2008, dll, mfc

如果以前有人问过这个问题，请原谅我，但我保证我看了很多遍，找不到任何东西（也许我只是想不出正确的搜索词）。

情况是这样的，我有一个基于 MFC90 构建的 DLL，它导出一个类（并在头文件中使用 MFC 对象，如`CString`、`POSITION`等），我们将此 DLL 称为**ONE**。由于我只能访问 VS2010，因此我仅限于在 MFC100 上构建基于 MFC 的 DLL 和应用程序，而且我还有另一个 DLL，我们称之为**TWO**，它使用从 DLL **ONE**导出的对象。到目前为止，它似乎工作正常，但我想知道在将使用 MFC100 构建的 DLL 链接到使用 MFC90 构建的 DLL 时，我是否真的应该期待一些错误或奇怪的怪癖，或者这是一个微不足道的问题。

******注意事项* *******

 ***   我**没有**重建 DLL **ONE**的选项。
*   我一直在寻找使用 VS2010 在 MFC90 上构建应用程序的免费选项，但我还没有成功找到解决方案。我读到我可以简单地下载 Windows SDK 6.01，但是当我从 Microsoft 下载它时，其中没有 MFC 的痕迹。
*   我**没有**使用 VS2008 的选项（除了 VS2008 Express，它不附带 MFC）。
*   这都是公司专有代码，所以我不能发布任何源代码。

******编辑* *******

 ***   我应该提到 DLL **TWO**导出的函数将指向 DLL **ONE**导出的类的指针作为参数。
*   所有导出的类都不是从 MFC 对象*派生的。*导出的类仅使用 MFC 对象作为成员变量、成员函数参数或内部成员函数。我不能说这是 100% 确定的，但我不相信这些类使用的不仅仅是，或者像&这样的`CString`POD 结构。`POINT``POSITION`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:26:15.350

如果没有假设 DLL 本身是专有的源（代码 + 与 MFC 一起使用，或者只是其中一个），我会想象它们会像使用 Microsoft 自己提供的任何类型的 DLL 一样古怪。所以我确信这是微不足道的，根据我的经验，有人在它自己的 DLL 中为 WMPLib.DLL 编写了一个包装器，它的文件 API 没有引起任何潜在问题，但错误处理很糟糕，从 XP 到 vista 的可移植性和 7 不是问题，但在错误的时间传递错误的值是。总而言之，我认为内部函数编写得与 MFC 接口的好坏很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:09:06.417

[若要传递 MFC 派生对象或指向 MFC 对象和 MFC 分配的内存的指针，您必须构建扩展 DLL。](http://msdn.microsoft.com/en-us/library/f22wcbea%28v=VS.80%29.aspx)我假设您有一个 MFC 扩展 DLL 项目。如果您在结构中嵌入了一个复杂的 MFC 对象，例如 CView，那么您可能正在嵌入一个指向 MFC 对象的指针。具有已知的、与版本无关的布局（如 CRect）的 MFC 对象可以通过。

MFC 扩展 dll 不能跨多个版本移植。从[扩展 DLL](http://msdn.microsoft.com/en-US/library/h5f7ck28%28v=VS.80%29.aspx)的文档中：

客户端应用程序和扩展 DLL 都必须使用相同版本的 MFCx0.dll。

因此，您不能将 MFC 9 扩展 DLL 与 MFC 10 库链接。您需要要求作者使用 MFC10 进行重建，或者获取 VC9 以获得 MFC 9 库。

原因是，如果 V9 类定义和 V10 类定义之间存在[内存布局不匹配](http://en.wikipedia.org/wiki/One_Definition_Rule)，如果尝试将两者混合使用，则充其量会发生内存泄漏，最坏的情况是随机崩溃，因为 MFC 对象中的成员偏移量可能不同版本。当您写入认为它是 Foo::memberA 的地址时，可能会覆盖 Foo::memberB 因为内存布局不同。静态变量也存储在不同的地方。如果您尝试混合 MFC 版本，您可能会注意到的第一个不匹配是[运行时类检查中的调试断言，](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/6998c4dd-ff9f-4097-803c-b84802b02c78)这在 MFC 中非常频繁地调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T07:28:03.157

应该开箱即用。我见过混合版本的 MFC 的项目。唯一的问题是部署。MFC 8.0 和 9.0 需要一个清单（最好部署在 WinSxs 中），而 7.x 和 10.x 可以简单地放在与可执行文件相同的文件夹中。

只要您有 MFC/CRT 9.0 的合并模块，就不用担心。****

# asp.net - 在VB.net中使用参数时如何在执行后显示查询字符串

> ID：12700997
> 
> 赞同：1
> 
> 时间：2012-10-03T02:03:35.633
> 
> 标签：asp.net, vb.net

我正在寻找一种在 VB.net 中使用参数时如何在执行后显示查询字符串的方法。

例如 ：

```
Using con As New SqlConnection(strConnect)
con.Open()
Using com As New SqlCommand("INSERT INTO myTable (myColumn1, myColumn2) VALUES (@C1, @C2)", con)
    com.Parameters.AddWithValue("@C1", myValueForColumn1)
    com.Parameters.AddWithValue("@C2", myValueForColumn2)
    com.ExecuteNonQuery()
End Using
End Using 
```

所以我希望用实际值而不是参数显示查询字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:06:03.030

您要查找的查询字符串不存在。它永远不会在任何时候创建。参数化查询的全部目的是，参数中的数据*永远不会*被替换到命令文本中，因此数据输入`';DROP TABLE myTable;--` *永远不会*有机会被视为代码。

请记住：参数化查询不会清理输入：它们会隔离输入。

如果您想了解发生了什么，请更多地考虑一下，就好像您正在运行这样的 sql 过程：

```
DECLARE @C1 nvarchar(50);
DECLARE @C2 nvarchar(50);

Set @C1 = imaginaryFunctionToGetValueFromDataSegmentOfConnection(1);
Set @C2 = imaginaryFunctionToGetValueFromDataSegmentOfConnection(2);

INSERT INTO myTable (myColumn1, myColumn2) VALUES (@C1, @C2); 
```

如果您想了解更多信息，所涉及的实际机制是[sp_executesql 。](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCMQFjAA&url=http://msdn.microsoft.com/en-us/library/ms188001.aspx&ei=I6trUJXmGYWWyAHJz4DACg&usg=AFQjCNGjQSFvBRhz0y_FraF8zYR3pvVbjQ&sig2=zv0ncG2kECpH3zMmV-LUJQ)如果你想获得一个真正的调试查询，我的建议是编写代码来实际构建类似上面的代码片段，用你的值代替函数调用。