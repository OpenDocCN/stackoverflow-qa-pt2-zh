# StackOverflow 问答 12558000-12558999

# r - 在 R 中记录循环的输出

> ID：12558001
> 
> 赞同：2
> 
> 时间：2012-09-24T02:04:48.643
> 
> 标签：r, loops, record, palindrome

我在我的R课上做一个练习，希望你能帮到你。任务是创建我自己的脚本来确定一个数字是否是回文。我的想法是创建一个重复结构，以任意大小记录每个数字，按顺序比较这些数字，然后判断该数字是否为回文。

到目前为止，我认为我可以使用“for”命令来分解数字，如下所示：

```
# Initialize
Number <- 242   
Number

N <- nchar(Number)    
N

# Find numbers and digits
if (Number == 0) {
    print ("Number must be greater than 0")
}

if (Number < 0) {
    print ("Number must be greater than 0")
}

for (i in 1:N) {
    print (Number)
    Digit <- Number %/% 10^(N-1)
    print (Digit)
    Number <- Number %% 10^(N-1)
    N <- N-1
} 
```

但是，问题在于，由于此结构会覆盖每个循环中的变量，因此一旦循环完成，我就无法单独打印所有数字。我可以命令 R 打印并记录每个循环中产生的数字，以便它们可以在下游相互比较并用于评估原始数字是否是回文？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:30:16.917

有更好的方法来检查 R 中的回文性，您应该看到其他答案。对于在 for 循环期间跟踪事物的特定问题，一种方法是制作一个与 for 循环一样长的向量，并在循环的第 th 次迭代中分配给`i`向量的第 th 个元素。`i`

```
Number <- 12345
N <- nchar(Number)
backwardsDigits <- numeric(N) ## a vector of numerics of length N
for (i in N:1) {
    backwardsDigits[i] <- Number %/% 10^(i-1)
    Number <- Number %% 10^(i-1)
}

backwardsDigits

all(backwardsDigits == rev(backwardsDigits)) 
```

您可以通过在循环中`forwardsDigits`写入来代替。`forwardsDigits[N - i + 1]`在循环过程中你真的不需要`print`任何东西，尽管它对调试很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T03:16:00.680

正如@thelatemail 建议的那样，还有另一种（也许更直观的方式）可以做到这一点。

首先，让我们将数字 117711 转换为字符串并将其拆分。

```
charsplit <- strsplit(as.character(117712), "")

[[1]]
[1] "1" "1" "7" "7" "1" "2" 
```

然后，我们将它从列表形式中取出并反转它

```
revchar <- rev(unlist(charsplit))

[1] "2" "1" "7" "7" "1" "1" 
```

最后，我们将它们粘贴在一起并将它们转换为数字：

```
palinum <- as.numeric(paste(revchar, collapse=""))

[1] "217711" 
```

然后我们可以检查它们是否相同：

```
117712 == palinum

[1] FALSE 
```

我们甚至可以编写一个函数来为我们做这件事。

```
is.palindrome <- function(number){
  charsplit <- strsplit(as.character(number), "")
  revchar <- rev(unlist(charsplit))
  palinum <- as.numeric(paste(revchar, collapse=""))

  number==palinum
}

is.palindrome(117712)
[1] FALSE

is.palindrome(117711)
[1] TRUE 
```

# ruby-on-rails - ActiveModel::MassAssignmentSecurity::SubjectsController#create 中的错误

> ID：12558003
> 
> 赞同：1
> 
> 时间：2012-09-24T02:04:52.973
> 
> 标签：ruby-on-rails

```
Can't mass-assign protected attributes: created_at(2i), created_at(3i), created_at(1i), created_at(4i), created_at(5i) 
```

我的代码如下：

```
def new
  @subject = Subject.new(:name => 'default')
  @subject_count = Subject.count + 1
end

def create
  # Instantiate a new object using form parameters
  @subject = Subject.new(params[:subject])
  # Save the object
  if @subject.save
  # If save succeeds, redirect to the list action
    flash[:notice] = "Subject created."
    redirect_to(:action => 'list')
  else
  # If save fails, redisplay the form so user can fix problems
    @subject_count = Subject.count + 1
    render('new') 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:38:27.570

您可以试试这个，
在您的主题模型中添加您在表单中使用的所有属性，例如，

```
class Subject < ActiveRecord::Base
  attr_accessible :name, :created_at
  ...
  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:37:13.020

将应用程序中的 config.active_record.whitelist_attributes 设置为 application.rb 中的 false（不推荐）或使用 attr_accessible 将模型中的属性列入白名单，例如 attr_accessible :name, :etc...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T15:11:42.050

`Subject`确保按照 Alex 的说明将通过模型中的控制器发送的属性列入白名单。您的主题模型应如下所示：

```
class Subject < ActiveRecord::Base
  attr_accessible :created_at
end 
```

为什么？Rails 最近需要这样做（[在 Github 上出现安全问题](http://arstechnica.com/business/2012/03/hacker-commandeers-github-to-prove-vuln-in-ruby/)之后），以确保恶意用户不会从前端发送不需要的属性。假设您在 User 类上有一个 :admin 布尔字段。如果没有`attr_accessible`某人可以在表单中添加一个新字段，例如`<input type="checkbox" name="user[admin]" value="true" checked>`，这将赋予他对您的应用程序的管理权限。

旁注...您不需要从 HTML 表单中设置 :created_at 日期，ActiveRecord 会自动为您管理`:created_at`和`:updated_at`（除非您出于某种原因想要手动设置它）。

# c++ - 如何在 Mac OS X Mountain Lio 上编译 libnoise

> ID：12558007
> 
> 赞同：5
> 
> 时间：2012-09-24T02:05:34.283
> 
> 标签：c++, macos, compilation, operating-system

在编译基于 linux 的库时，我是 Mac OS X 环境的新手。每当我使用库时，我只需下载 .framework 文件，将其添加到我的 /Library/Frameworks 并将其包含在我的 XCODE 项目中，一切都很好。现在我被 libnoise 困住了。我想在我的项目中使用它，但我不知道如何生成 .framework 文件/目录。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:02:16.770

如果您有 libnoise，它很可能包含某种 a`Makefile`或`configure`脚本。

通过运行

```
 ./configure
 make all 
```

您将获得适用于您的平台 OSX10.8 的库文件 (libnoise.a)。

框架本质上是一个具有特定布局的文件夹和一个 .plist 文件。要自动生成这样的文件夹，您可以创建一个该类型的 expty Xcode 项目`Framework`并将`libnoise.a`您刚刚创建的项目添加为链接器的输入。

关于如何从静态库（.a 文件）创建框架的详细说明：http: [//www.blackdogfoundry.com/blog/creating-a-library-to-be-shared-between-ios-and- mac-os-x/](http://www.blackdogfoundry.com/blog/creating-a-library-to-be-shared-between-ios-and-mac-os-x/)

您可能缺少框架中的头文件，但也可以从 libnoise 源将其添加到 Xcode 项目中。

这个 SO 答案也可能有用：[Difference between framework and static library in xcode4, and how to call them](https://stackoverflow.com/questions/6245761/difference-between-framework-and-static-library-in-xcode4-and-how-to-call-them)

苹果的文档也不错：[https ://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Tasks/CreatingFrameworks.html](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Tasks/CreatingFrameworks.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T22:20:54.637

我不完全确定这是否是“使用不同的 fork 和 cmake”的意思

但是我使用这个 git repo 让 libnoise 在我的 mac 中运行。

[https://github.com/qknight/libnoise](https://github.com/qknight/libnoise)

# python - django 循环遍历模型字段

> ID：12558008
> 
> 赞同：2
> 
> 时间：2012-09-24T02:05:37.803
> 
> 标签：python, django

> **可能重复：**
> [Django 获取模型的字段](https://stackoverflow.com/questions/3647805/django-get-a-models-fields)

我有下一个模型：

```
class People(models.Model):
    name = models.CharField(max_length=100)
    lastname = models.CharField(max_length=100) 
```

我想遍历 People 表中的所有项目。

在views.py

- 当我尝试这个时：

```
 for each in People().objects.all():
     name=each.name 
```

我收到了那个错误：

```
Manager isn't accessible via People instances 
```

- 当我尝试这个时：

```
 for each in People():
     name=each.name 
```

我收到此错误：

```
'People' object is not iterable 
```

我该如何解决这个问题以及如何遍历我的 People 表中的所有项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T02:12:28.583

`People.objects.all()`

it works on the class not an instance `People` not `People()`

# java - 在 Java 中创建 Object 类的对象

> ID：12558010
> 
> 赞同：3
> 
> 时间：2012-09-24T02:06:01.437
> 
> 标签：java

在 Java 中，每个类都隐式地扩展了 Object 类。那么，这是否意味着我们可以创建 Object 类的对象？

* * *

```
public static void main(String[] args) {

Object ob=new Object();
    // code here ....
 } 
```

* * *

当我尝试它时，它编译并成功运行。在那种情况下，有人可以解释一下我们通常什么时候创建 Object 类的对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T02:11:43.030

You could instantiate an instance of an `Object` if you want to do a synchronization lock.

```
public void SomeClass {
    private Object lock = new Object();
    private SomeState state;

    public void mutateSomeSharedState() {
        synchronized(lock) {
            //mutate some state
        }
    }

    public SomeState readState() {
        synchronized(lock) {
            //access state
        }
    }
} 
```

It might be necessary to do this when `this` is already used to lock some other state of the same object, or if you want to have your lock be private (ie, no one else can utilize it). Even if it isn't necessary, some people prefer to do things that way. This is merely an example of when someone might do it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T02:13:12.550

Normally we don't create an object of the Object class directly. Usually, we create instances of direct/indirect subclasses of Object.

A scenario where we create an instance of Object is to create an object to [synchronize threads](http://www.javaworld.com/jw-04-1996/jw-04-threads.html).

Eg:

```
 Object lock = new Object();
   //...
   synchronize( lock ) {
       //...
       //...
   } 
```

However the Object class is used a lot to describe parameters of methods and of instance variables that may assume values of different classes ([polymorphism](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)).

Eg:

```
void example(Object arg) {
   // ...
   System.out.println( "example=" + arg.toString() );
}

Object foo = returnObject(); 
```

Sometimes the use of [Generics](http://en.wikipedia.org/wiki/Generics_in_Java) may be better than using Object to describe parameters and variables.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T04:19:58.370

由于 java.lang.Object 是最高级的类，它可以被我们创建的任何实例替换。当您不知道类型时，此概念非常有用（例如：有条件返回不同类型的方法，具有多种类型的集合）

当您想从 String 实例化类或使用反射执行方法时也常用。

但是，由于泛型，直接使用 Object 变得多余。干杯萨西什

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T02:21:39.517

在大多数情况下，我相信`Object`不再明确使用。

自从 Java 首次推出泛型以来，`Object`几乎不存在对类的强制转换。

# windows - 我不明白调用堆栈中重复 DispatchMessageW 的堆栈溢出错误

> ID：12558014
> 
> 赞同：6
> 
> 时间：2012-09-24T02:06:56.450
> 
> 标签：windows, delphi, stack-overflow

这是一个 Delphi 应用程序，但我想这是一个一般的 Windows 编程问题。

我让我的应用程序在周末运行（在 Delphi IDE 中），刚回来发现堆栈溢出。

堆栈是这样开始的......

```
:75c4417e kernel32.GetDriveTypeW + 0x23
:75c452ae kernel32.IsProcessorFeaturePresent + 0xa9
:75c45272 kernel32.IsProcessorFeaturePresent + 0x6d
:75c45248 kernel32.IsProcessorFeaturePresent + 0x43
:7678410b KERNELBASE.LoadStringBaseExW + 0xc7
:76678ed2 USER32.LoadStringW + 0x19
:0040c4ae LoadResString + $4A
uADStanDef.TADDefinition.Create(nil)
uADStanDef.TADDefinition.CreateTemporary
uADStanDef.TADConnectionDefTemporaryFactory.CreateObject
uADStanFactory.TADManager.CreateInterface((1050358107, 62550, 16757, (168, 100, 178, 87, 60, 74, 32, 21)),(no value),True)
uADStanFactory.ADCreateInterface((1050358107, 62550, 16757, (168, 100, 178, 87, 60, 74, 32, 21)),(no value),True)
uADCompClient.TADCustomConnection.Create($2DB7EB0)
fMainForm.TMainForm.ServerAliveTimerTimer($2E8DE38)    <========== my code
:004f1546 Winapi + $4F1546
:00461316 Winapi + $461316
:766762fa ; C:\Windows\syswow64\USER32.dll
:76676d3a USER32.GetThreadDesktop + 0xd7
:766777c4 ; C:\Windows\syswow64\USER32.dll
:7667788a USER32.DispatchMessageW + 0xf 
```

因此，计时器即将到期，我正在创建一个新对象（AnyDac 组件的）并且堆栈溢出。代码肯定会释放对象。我在下面为那些想要检查的人附加了它，但我不认为这是我的问题。

然后堆栈继续

```
:7669cdfd ; C:\Windows\syswow64\USER32.dll
:7669cf5c ; C:\Windows\syswow64\USER32.dll
:766cf73c ; C:\Windows\syswow64\USER32.dll
:766cfa18 ; C:\Windows\syswow64\USER32.dll
:766cfb1f USER32.MessageBoxTimeoutW + 0x52
:766cfd15 USER32.MessageBoxExW + 0x1b
:766cfd57 USER32.MessageBoxW + 0x18
:00549986 Vcl + $549986
:00549aa2 Vcl + $549AA2
:00549873 Vcl + $549873
:00461316 Winapi + $461316
:766762fa ; C:\Windows\syswow64\USER32.dll
:76676d3a USER32.GetThreadDesktop + 0xd7
:766777c4 ; C:\Windows\syswow64\USER32.dll
:7667788a USER32.DispatchMessageW + 0xf 
```

该块重复了三千行（！），我不知道它是什么或它在做什么。然后结束

```
StoreRoom.StoreRoom
:75c4339a kernel32.BaseThreadInitThunk + 0x12
:77eb9ef2 ntdll.RtlInitializeExceptionChain + 0x63
:77eb9ec5 ntdll.RtlInitializeExceptionChain + 0x36 
```

我不了解所有重复的堆栈-有人可以建议吗？

（对于那些注意到我的异常处理正在显示一个对话框的聪明人来说，这是一个 TForm，它在用户单击 OK 时关闭）

我的代码：

```
procedure TMainForm.ServerAliveTimerTimer(Sender: TObject);
begin
   try
      ADConnection := TADConnection.Create(Self);  <======= stack overflow here
      ADConnection.DriverName := 'mysql';
      ADConnection.Params.Add('Server=' + MAIN_STOREROOM_IP_ADDRESS);  
      // other params, such as password, removed for posting
      ADConnection.Connected := True;

   except
      on E : Exception do
      begin
         ADConnection.Free();
         theDialogForm := TDialogFormForm.Create(Nil);
         theDialogForm.ShowTheForm('Database problem'+#13+#10+''+#13+#10+
                                   E.ClassName+#13+#10+E.Message);    
         StopTheApplication();   <===== just calls ExitProcess(0);
         Exit;                     as I had problems with Halt elsewhere in the code
      end;
   end;

   if isMainStoreRoom then
   begin
      CheckIfStoreRoomIsAlive(SECONDARY_STOREROOM_IP_ADDRESS);
   end
   else
   begin
      CheckIfStoreRoomIsAlive(MAIN_STOREROOM_IP_ADDRESS);
   end;

   try    // Now, update our own timestamp
      timestamp  := GetCurrentUnixTimeStamp();
      ADConnection.ExecSQL('UPDATE server_status SET alive_timestamp="' + IntToStr(timestamp) + '" WHERE ip_address="' + ipAddress + '"');

   except
      on E : Exception do
      begin
         ADConnection.Free();
         Exit;
      end;
   end;

   ADConnection.Free();
end;     // ServerAliveTimerTimer() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T02:21:18.450

您的堆栈溢出是由于`MessageBox()`响应重复的窗口消息而一遍又一遍地调用。在内部，`MessageBox()`运行它自己的消息循环，这显然是一遍又一遍地处理和发送相同的消息。这可能表明计时器误入歧途。我强烈建议您在第一次进入`OnTimer`事件处理程序时禁用计时器，然后在退出之前重新启用计时器。

在单独的说明中，`StopTheApplication()`不应该直接调用`ExitProcess()`（甚至`Halt()`）。改为使用`Application.Terminate()`。

# oracle - Oracle PL/SQL：如何格式化输出

> ID：12558018
> 
> 赞同：0
> 
> 时间：2012-09-24T02:07:30.247
> 
> 标签：oracle, variables, plsql, oracle11g, database

这就是我要的：

```
 variable1:                1
    variable225:              ValueOfIt
    variable234234323:        $SomeAmount
    variable1234234:          Good
    variable1w23423423423423: September 11, 2001 
```

这是我所拥有的（我确实手动输入了变量的名称，例如“variable1”）。我想要类似于 variable.toString :-) 的东西，加上美元字符以及变量和值对之间的空格量，这样它们看起来很酷。

```
variable1: 1
variable225: ValueOfIt
variable234234323: SomeAmount
variable1234234: Good
variable1w23423423423423: September 11, 2001 
```

如何以上述方式格式化 DBMS_OUTPUT.PUT_LINE() 的输出？

我不想硬编码或手动输入变量的名称以及变量名称和变量值之间的距离？如果变量名很长，则变量的所有值都应在最长变量名之后的位置开始。另外，我想在数字变量前面做美元字符，而不像'$'那样硬编码它。

# emacs - 在 Emacs 中打开特定文件的快捷方式

> ID：12558019
> 
> 赞同：19
> 
> 时间：2012-09-24T02:07:33.580
> 
> 标签：emacs

我希望能够使用键盘快捷键来编辑我的 .emacs 文件，而不是每次都输入`Ctrl-X``Ctrl-F`.emacs （这里有一个关于 Vim[的类似问题）。](https://stackoverflow.com/questions/9079490/shortcut-to-open-specific-file-in-vim)可能有一种明显的方法可以做到这一点，但我找不到 Emacs Lisp 命令来打开文件。我认为这将以“打开”或“文件”开头，但打字和这些术语似乎并没有带来任何相关的东西。我试过了`Enter``M-x`

```
(global-set-key (kbd "<f6>") (find-file "~/.emacs")) 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-24T02:20:06.570

根据文档

> (global-set-key KEY COMMAND)
> 
> 给 KEY 一个全局绑定作为 COMMAND。COMMAND 是要使用的命令定义；通常它是一个命名交互式可调用函数的符号。

所以你必须使用一个交互式可调用函数：

```
(global-set-key (kbd "<f6>") (lambda() (interactive)(find-file "~/.emacs"))) 
```

我个人更喜欢使用[emacs 寄存器](http://www.gnu.org/software/emacs/manual/html_node/emacs/Registers.html)来存储我经常使用的文件。我会将 '~/.emacs' 存储在寄存器中：

```
(set-register ?e (cons 'file "~/.emacs")) 
```

并打开它 `C-x r j e`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-09-14T16:29:11.403

书签是一个很好的解决方案，它与 emacs 一起打包。这样，如果您可以查看要打开的文件列表，则可以轻松浏览它们。还有提供多种选择的[BookmarkPlus 。](https://www.emacswiki.org/emacs/BookmarkPlus)

`M-x list-bookmarks`

# artificial-intelligence - 如何处理人工神经网络中的不确定性/缺失数据？

> ID：12558024
> 
> 赞同：4
> 
> 时间：2012-09-24T02:08:17.933
> 
> 标签：artificial-intelligence, neural-network

上下文：

我正在尝试使用前馈人工神经网络为视频游戏创建 AI，但我遇到了一个问题，即我的一些输入特征依赖于其他输入特征的存在或价值。

我能想到的最基本、最简单的例子是这样的：

特征 1 是玩家数量（范围 2...5） 特征 2 到 ? 是每个玩家的得分（范围 >=0）

通知 ANN 分数所需的特征数量取决于玩家的数量。

问题：如何将这种动态知识输入表示给 ANN？

我已经考虑过的事情：

1.  只是不使用这些功能，或者将它们合并到静态输入中。IE 使用玩家得分的总和来代替。我严重怀疑这是否适用于我的问题，它会导致丢失太多信息并且 ANN 将无法正常运行。

2.  为不存在的输入传递错误值（例如 -1）或默认值（例如 0）我不确定这将如何工作，理论上 ANN 可以轻松地从该输入中学习并适当地对函数建模。在实践中，我担心大量不存在的输入会导致 ANN 出现问题。例如，如果玩家的范围是 2-10，如果只有 2 个玩家，则 80% 的输入数据将不存在，并且会在 ANN 中引入奇怪的偏差，从而导致性能不佳。

3.  在不存在的输入上传递训练集的平均值同样，不存在的输入量将是一个问题，我担心这会给离散值输入带来奇怪的问题。

所以，我在问这个，有没有人有我能想到的其他解决方案？有没有标准或常用的方法来处理这个问题？

我知道这对 SO 来说是一个相当小众且复杂的问题，但我对“如何修复此代码？”感到厌烦。和“我如何在 PHP/Javascript 中做到这一点？” 问题：P，谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T03:39:56.347

听起来您有多个数据集（针对每个玩家数量）彼此并不真正兼容。从 5 人游戏中吸取的教训真的适用于 2 人游戏吗？尝试简化问题，例如 #1，并查看程序的执行情况。在人工智能中，荒谬的简化有时会给你很大的吸引力，比如垃圾邮件过滤器[中的词袋。](http://en.wikipedia.org/wiki/Bag-of-words_model)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T20:30:38.180

尝试考虑以下模型：

假设 xi（例如 x1）是可以存在可变数量的输入之一。您可以拥有其中的 n 个（x1 到 xn）。让 y 成为其余的输入。

在您的第一个隐藏层上，将 x1 和 y 传递给第一个 c 节点，x1,x2 和 y 传递给下一个 c 节点，x1,x2,x3 和 y 传递给下一个 c 节点，依此类推。这假设 x1 和 x3 不能在没有 x2 的情况下都处于活动状态。如果需要，模型必须适当地改变。

网络的其余部分是一个标准的前馈网络，所有节点都连接到下一层的所有节点，或者您可以选择。

每当您有 w 活动输入时，禁用除第 w 组 c 节点之外的所有节点（将它们完全排除在该输入集的训练之外，在计算它们输出到的节点的值时不要包括它们，不要更新权重他们的输入或输出）。这将允许大部分网络进行训练，但对于第一个隐藏层，只有适用于该数量输入的部分。

我建议选择 c 以使 c*n（第一个隐藏层中的节点数）大于（或等于）第二个隐藏层中的节点数（并且对于 a，c 至少为 10中等大小的网络（到 100 也可以）），我还建议网络至少有 2 个其他隐藏层（所以总共 3 个不包括输入和输出）。这不是来自经验，而是我的直觉告诉我的。

这种工作依赖于不同数量的输入之间的某种（可能无法定义）相似性，如果这种相似性不存在，则可能无法正常工作。对于每个输入数量，这也可能需要相当多的训练数据。

如果您尝试，请让我/我们知道它是否有效。

如果你对人工智能讨论感兴趣，我建议加入一些专门讨论它的 Linked-In 小组，其中一些非常活跃并且有有趣的讨论。在谈到人工智能时，stackoverflow 似乎并没有发生太多事情，或者我们应该努力改变这一点，或者两者兼而有之。

**更新：**

以下是一些不错的人工智能 LinkedIn 群组的名称列表（除非他们最近更改了政策，否则应该很容易加入）：

*   '人工智能研究人员，教师 + 专业人员'

*   “人工智能应用”

*   '人工神经网络'

*   “AGI——通用人工智能”

*   “应用人工智能”（目前没有太多进展，仍在处理一些垃圾邮件，但正在变得更好）

*   “文本分析”（如果您对此感兴趣）

# php - $_SERVER['PHP_AUTH_USER'] is empty

> ID：12558025
> 
> 赞同：8
> 
> 时间：2012-09-24T02:08:32.393
> 
> 标签：php

I tried to update the php version of my VPS but it didn't work and my provider didn't help me well, so i downgrade it to the previous version.

I am now working with PHP 5.2.17 (cli). Everything was working properly in this version.

Since this upgrade and downgrade, the variable `$_SERVER['PHP_AUTH_USER']` is empty. (In the php.ini, `register_globals` is 'on' and `$_SERVER['PHP_SELF']` is properly working).

It ask me properly my username and password and i success to connect but i need to use `$_SERVER['PHP_AUTH_USER']`.

I tried `$_SERVER['PHP_AUTH_USER']`, `$_SERVER['AUTH_USER']`, `$_SERVER['REMOTE_USER']` nut none is working. (but im never getting any error, just a blank value...)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T03:08:51.703

感谢'mbinette'，我终于找到了答案。

在我的 PHP 配置中，PHP 5 的处理程序是 CGI，这种类型的身份验证不适用于 PHP CGI。所以我把它改成了 suPHP（这应该是 APACHE 上的默认值）。

[在这里找到](http://www.besthostratings.com/articles/http-auth-php-cgi.html)一篇解释使用 CGI 和 PHP_AUTH 的方法的帖子，但我试过了，但它不起作用。

[在这里找到](http://docs.cpanel.net/twiki/bin/view/11_30/WHMDocs/MorePhphandlers)一些关于 php 处理程序的解释

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T02:10:22.353

Is safe mode activated? That might be your problem...

> As of PHP 4.3.0, in order to prevent someone from writing a script which reveals the password for a page that was authenticated through a traditional external mechanism, the PHP_AUTH variables will not be set if external authentication is enabled for that particular page and safe mode is enabled. Regardless, REMOTE_USER can be used to identify the externally-authenticated user. So, you can use $_SERVER['REMOTE_USER'].

Source: [http://php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)

# sql - 如何在视图中旋转和连接数据？

> ID：12558031
> 
> 赞同：1
> 
> 时间：2012-09-24T02:09:39.647
> 
> 标签：sql, tsql, pivot

我正在创建一个视图作为报告，将来自各种表的行数据显示为列，在某些情况下涉及连接。当我使用临时表时，我的查询效果很好，但它需要是一个视图，**我正在努力将临时表方法转换为子查询**。

我创建了几个示例表和数据来尽可能简化这个问题。这是架构：

```
CREATE TABLE [Car] (
    [CarId] [int] NOT NULL,
    [Name] [varchar](50) NOT NULL,
 CONSTRAINT [PK_Car] PRIMARY KEY CLUSTERED ([CarId] ASC))
 INSERT INTO [Car] VALUES
    (1, 'Honda')

CREATE TABLE [Part] (
    [PartId] [int] IDENTITY(1,1) NOT NULL,
    [CarId] [int] NOT NULL,
    [Name] [varchar](50) NOT NULL,
    [PercentComplete] [decimal](3, 2) NOT NULL,
 CONSTRAINT [PK_Part] PRIMARY KEY CLUSTERED  ([PartId] ASC))
INSERT INTO [Part] VALUES
    (1, 'Engine', 0.5)
    ,(1, 'Transmission', 0.75)
    ,(1, 'Suspension', 0.3) 
```

这是初始步骤：

```
SELECT
    c.CarId
    ,c.Name AS [CarName]
    ,p.Name AS [PartName]
    ,p.PercentComplete AS [PartPercentComplete]
INTO #Temp
FROM Car c
JOIN Part p
ON p.CarId = c.CarId 
```

![初始设置](../Images/547a57a01007153fe0282701afb6da72.png)

这是将其转换为我的报告视图的分组选择：

```
SELECT
    MAX(CarName) AS [Car Name]

    ,STUFF((
        SELECT ', ' + [PartName] 
        FROM #Temp
        WHERE (CarId = t1.CarId) 
        FOR XML PATH (''))
    ,1,2,'') AS [Parts]

    ,MAX(CASE [PartCompleteAvg] WHEN 1.00 THEN 'Complete' ELSE 'Incomplete' END) AS [Part Status]
    ,MAX(CASE [PartId] WHEN [LatestPartId] THEN [PartName] ELSE NULL END) AS [Latest Part]
FROM (
    SELECT
        CarId
        ,AVG(PartPercentComplete) AS [PartCompleteAvg]
        ,MAX(PartId) AS [LatestPartId]
    FROM #Temp
    GROUP BY CarId
) t1
LEFT JOIN #Temp t2
ON t2.CarId = t1.CarId
GROUP BY t1.CarId 
```

![报告](../Images/b11059436aeb6f8b7039025f4a2ddd3e.png)

它工作得非常好，除了由于中间聚合函数`AVG(PartPercentComplete)`和与`STUFF`. 我的报告需要其中的几个。

我知道我不能嵌套`AVG()`在里面`MAX()`，因为这给了`Cannot perform an aggregate function on an expression containing an aggregate or a subquery.`

（仅供参考，我知道，`PIVOT`但它需要跨越[多个列](http://pratchev.blogspot.com/2009/01/pivoting-on-multiple-columns.html)，尽管我意识到这也是可能的，`CASE`似乎更容易，而且[我被告知更快](https://stackoverflow.com/a/3241524/879)。）

我完全不正确和糟糕的尝试：

```
SELECT
    MAX(CarName) AS [Car Name]
    ,STUFF((
        SELECT ', ' + [PartName] 
        FROM #Temp
        WHERE (CarId = t1.CarId) 
        FOR XML PATH (''))
    ,1,2,'') AS [Parts]

    ,MAX(CASE [PartCompleteAvg] WHEN 1.00 THEN 'Complete' ELSE 'Incomplete' END) AS [Part Status]
FROM (
    SELECT
        CarId
        ,AVG(PartPercentComplete) AS [PartCompleteAvg]
    FROM (
        SELECT
            c.CarId
            ,c.Name AS [CarName]
            ,p.Name AS [PartName]
            ,p.PercentComplete AS [PartPercentComplete]
        FROM Car c
        JOIN Part p
        ON p.CarId = c.CarId
    ) t1
    GROUP BY CarId
) t1
LEFT JOIN #Temp t2
ON t2.CarId = t1.CarId
GROUP BY t1.CarId 
```

显然`#Temp`在这两个位置都是无效的。我不是 SQL 专家，我希望有一种干净且相对简单的方法可以做到这一点，甚至可以避免自加入。

**编辑**

我添加了

```
MAX(PartId) AS [LatestPartId] 
```

和

```
MAX(CASE [PartId] WHEN [LatestPartId] THEN [PartName] ELSE NULL END) AS [Latest Part] 
```

因为这是一个更好的例子，说明为什么我需要一个中间`GROUP BY`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:29:58.497

也许我在您的要求中遗漏了一些东西，但这对您不起作用（在 SQL Server 2008 中测试并用它创建了一个视图）：

```
select max(c.name) CarName,
  STUFF((
        SELECT ', ' + p.Name 
        from part p
        WHERE (p.CarId = c.CarId) 
        FOR XML PATH (''))
    ,1,2,'') AS [Parts],
   CASE AVG(p.PercentComplete) WHEN 1.00 THEN 'Complete' ELSE 'Incomplete' END AS [Part Status]
from car c
inner join part p
  on c.carid = p.carid
group by c.carid 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/94583/12)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T02:41:53.603

这是更新问题的更新答案。

```
;WITH A(CarID,CarName,PartName,IsComplete,RN)AS(
SELECT C.CarID, C.Name, P.Name, case when P.PercentComplete=1 then 1 else 0 end,
    rn=row_number() over (partition by C.CarID order by P.PartId)
From Car C
LEFT JOIN Part P on P.CarId = C.CarId
)
,B(CarID,CarName,PartNames,LastPartName,IsComplete,RN)AS(
select CarID,CarName,CAST(PartName as VARCHAR(max)),PartName,IsComplete,RN
from A
Where rn=1
union all
select A.CarID,A.CarName,B.PartNames+', '+A.PartName,A.PartName,Case when A.IsComplete=1 and B.IsComplete=1 then 1 else 0 end,A.RN
from B
join A on A.CarID=B.CarID and A.RN-1=B.RN
),C AS(
select *, RNc=Row_number() over (partition by CarID order by RN desc)
from B
)
select CarID,CarName,PartNames,LastPartName,IsComplete
from C
where RNc=1 
```

在此之下，原始答案。

* * *

```
CREATE TABLE [Car] (
    [CarId] [int] NOT NULL,
    [Name] [varchar](50) NOT NULL,
    CONSTRAINT [PK_Car] PRIMARY KEY CLUSTERED ([CarId] ASC));
INSERT INTO [Car] VALUES (1, 'Honda'),
                         (2, 'Ford');

CREATE TABLE [Part] (
    [PartId] [int] IDENTITY(1,1) NOT NULL,
    [CarId] [int] NOT NULL,
    [Name] [varchar](50) NOT NULL,
    [PercentComplete] [decimal](3, 2) NOT NULL,
    CONSTRAINT [PK_Part] PRIMARY KEY CLUSTERED  ([PartId] ASC));
INSERT INTO [Part] VALUES (1, 'Engine', 0.5),
                          (1, 'Transmission', 0.75),
                          (1, 'Suspension', 0.3),
                          (2, 'Engine', 1),
                          (2, 'Brake', 1.0);

   SELECT C.CarID,
          C.Name CarName,
          STUFF((
              SELECT ', ' + Name
               FROM Part
              WHERE CarId = C.CarId 
                FOR XML PATH ('')),1,2,'') Parts,
          CASE WHEN Progress = 1 then 'Complete' else 'Incomplete' END [Part Status]
     From Car C
LEFT JOIN (
   select CarId, SUM(PercentComplete)/Count(1) Progress
     From Part
 Group by CarId) P on P.CarID = C.CarId 
```

```
CarID       CarName  Parts                               Part Status
----------- -------- ----------------------------------- -----------
1           Honda    Engine, Transmission, Suspension    Incomplete
2           Ford     Engine, Brake                       Complete 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T21:12:34.490

理查德让我走上了正轨。这就是我要找的东西：

```
SELECT c.CarId
    ,c.Name AS [CarName]
    ,STUFF((
        SELECT ', ' + Name
        FROM Part p
        WHERE p.CarId = c.CarId
        FOR XML PATH ('')),1,2,'') AS [Parts]
    ,CASE WHEN Progress = 1 THEN 'Complete' ELSE 'Incomplete' END AS [Part Status]
    ,[Latest Part]
FROM Car c
LEFT JOIN
(
    SELECT p.CarId
    ,SUM(PercentComplete)/COUNT(1) AS [Progress]
    ,MAX(CASE WHEN PartId = LatestPartId THEN p.Name ELSE NULL END) AS [Latest Part]
    FROM Part p
    LEFT JOIN (
        SELECT CarId
        ,MAX(PartId) AS [LatestPartId]
        FROM Part
        GROUP BY CarId
    ) latestPart
    ON latestPart.CarId = p.CarId
    GROUP BY p.CarId
) partInfo
ON partInfo.CarId = c.CarId 
```

关键是离开`GROUP BY`主选择（非常首选）并将我的聚合代码放在一系列使用 JOIN 中`GROUP BY`，在必要时嵌套一个连接以计算一些中间信息。

我觉得自己很傻，没想到用`SELECT`inside `JOIN`，脑子里只想着用inside `FROM`。现在我可以有效地使用旋转和连接！

## 这是[SQL Fiddle](http://sqlfiddle.com/#!3/94583/15)。

# javascript - 如何通过 JavaScript 将 [list] BBCode 转换为 HTML？

> ID：12558032
> 
> 赞同：2
> 
> 时间：2012-09-24T02:09:52.143
> 
> 标签：javascript, html, list, bbcode

我正在通过 JavaScript 将 BBCode 写入 HTML praser。我成功使用了 [b]、[i]、[img]、... 标签，但是使用`[list]`标签，我不知道该怎么做，因为它的元素可能是 2、3、n、... 你能帮我从：

```
[list]
item 1
item 2
item 3
[/list] 
```

到

```
<ul>
<li>item 1</li>
<li>item 2</li>
<li>item 3</li>
<ul> 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:22:58.020

如果您使用`indexOf`,`split`和`substring`@Dai 正在谈论的那个可怕的组合，则类似于以下内容的东西会做到这一点。

```
var start = this.value.indexOf("[list]"),
    ending = this.value.indexOf("[/list]"),
    lines = this.value.substring(start + 7, ending - 1).split("\n");

//perform loop on `lines`:
//    "<li>" + lines[i] + "</li>" 
```

本质上，这将获得的起始位置，`[list]`然后`[/list]`获得其间的线。你会注意到在 中`substring()`，我说`start+7`and `ending-1`。这可以通过以下事实来解释：实际行的起始位置将位于***+****字符串的实际长度****+****输入字符**的索引处。`[list]` **`[list]`*** ****末尾减一以删除该输入字符。一个更好的方法是简单地添加六个而不是七个开始，减去零，然后删除任何空数组值，但是，任何一种方式都可以，具体取决于您对用户的确切语法要求。****

 ****请记住，该`lines`变量将保存在两个列表 bbcode 之间输入的所有行，这意味着您必须遍历它们，然后用`<li></li>`标签包装它们。此外，我建议验证多项内容，例如确保`start > ending`并多次执行此操作，以便您了解每一次的出现，`[list]`而不仅仅是第一次。****

# javascript - 离线 HTML5 应用程序和跨站点通信

> ID：12558034
> 
> 赞同：1
> 
> 时间：2012-09-24T02:10:04.473
> 
> 标签：javascript, html, web-applications, local-storage, browser-cache

我正在开发一个使用缓存清单/HTML5 在浏览器中离线工作的 Web 应用程序。在某些情况下，应用程序的修改版本可能会在另一个服务器或域上运行。如果这两个 Web 应用程序想**在离线**时进行通信，它们如何实现呢？

据我所知，没有像本地存储那样的全局存储方法。AJAX 不起作用，因为这与服务器端脚本有关。网站只能将 cookie 分配给其域等。

用户是否必须在线才能在两个跨站点 Web 应用程序之间进行通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:17:19.837

您可以在离线时将数据存储在 localStorage 中，然后在用户重新在线时将其保存到服务器。这是一个简单的演示：[https ://github.com/chovy/offline-app](https://github.com/chovy/offline-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T03:56:15.927

在 iframe 中加载第二个应用程序并使用`window.postMessage()`.

# c - Unsigned char to char* and int in C?

> ID：12558035
> 
> 赞同：3
> 
> 时间：2012-09-24T02:10:09.170
> 
> 标签：c, visual-studio-2010, char, int, unsigned-char

Working on some encryption that requires unsigned char's in the functions, but want to convert to a char for use after it's been decrypted. So, I have:

```
unsigned char plaintext[16];
char *plainchar;
int plainint;

... Code now populates plaintext with data that happens to all be plain text 
```

Now at this point, let's say plaintext is actually a data string of "0123456789". How can I get the value of plaintext into plainchar as "012456789", and at the same time plainint as 123456789?

-- Edit --

Doing this when plaintext is equal to "AAAAAAAAAA105450":

```
unsigned char plaintext[16];
char *plainchar;
int plainint;

... Code now populates plaintext with data that happens to all be plain text

plainchar = (char*)plaintext; 
```

Makes plainchar equal to "AAAAAAAAAA105450╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠┤∙7" with a sizeof = 51\. The encryption code is the rijndael example code, so it should be working fine.

Thanks, Ben

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T06:03:03.907

您的纯文本字符串未终止。所有字符串都必须有一个额外的字符来表示字符串的结尾。这个字符是`'\0'`。

`plaintext`将变量声明为

```
unsigned char plaintext[17]; 
```

在你完成解密后添加这个

```
plaintext[last_pos] = '\0'; 
```

更改`last_pos`为解密文本的最后一个位置，默认为`16`（数组的最后一个索引）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T02:35:35.767

对于 unsigned char 到 char*

```
plainchar = (char*)plaintext; 
```

对于无符号到 int

```
sscanf( plainchar, "%d", &plainint ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T02:14:04.390

我认为它很简单

```
plainchar = (char*)plaintext;
sscanf( plainchar, "%d", &plainint ); 
```

# c++ - Segfault after the return 0;

> ID：12558037
> 
> 赞同：4
> 
> 时间：2012-09-24T02:10:15.833
> 
> 标签：c++, segmentation-fault, itk

I would like to use ITK for a simple color-ratio program, but I get a segfault after the return 0; of the main function. here is my code.

```
#include "itkImage.h"
#include "itkImageFileReader.h"
#include "itkImageFileWriter.h"
#include <iostream>
#include <string>
#include <vector>
#include "itkRGBPixel.h"

const unsigned int  Dimension = 2;
typedef itk::RGBPixel< unsigned char >       PixelType;
typedef itk::Image< PixelType, Dimension >   ImageType;
typedef itk::ImageFileReader< ImageType >    ReaderType;
typedef itk::ImageFileWriter< ImageType >   WriterType;

int main(int argc, char** argv)
{   
std::string input=argv[1], output=argv[2];

//allocation of the image data
ReaderType::Pointer reader    = ReaderType::New();
WriterType::Pointer writer = WriterType::New();

reader->SetFileName(input);
writer->SetFileName(output);

reader->Update(); 

//access image
ImageType::Pointer image = reader->GetOutput();
ImageType::Pointer output_img;

 //apparently providing the spacing and origin in ITK is mandatory
ImageType::SpacingType spacing;
spacing[0] = 0.33;
spacing[1] = 0.33;
image->SetSpacing(spacing);

ImageType::PointType origin;
origin[0] = 0.0;
origin[1] = 0.0;
image->SetOrigin(origin);

writer->SetInput( reader->GetOutput() ); 
    writer->Update(); 

 return EXIT_SUCCESS;
} 
```

It compiles and links without any error messages but I have a segfault during execution. By executing the program line by line using gdb, I pinpionted the segfault to the last line of the program: after return 0;

Here is the backtrace

```
Program received signal SIGSEGV, Segmentation fault.
0xb79099bc in ?? () from /usr/lib/i386-linux-gnu/libstdc++.so.6
(gdb) bt
#0  0xb79099bc in ?? () from /usr/lib/i386-linux-gnu/libstdc++.so.6
#1  0xb7909a4e in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() ()
from /usr/lib/i386-linux-gnu/libstdc++.so.6
 #2  0x08065369 in main (argc=3, argv=0xbffff1b4) at /home/thibault/workspace/OU/MachineLearning/Project1/src/itkTry1.cpp:221
(gdb) 
```

and when checking with valgrind:

```
 ==16671== Memcheck, a memory error detector
    ==16671== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
    ==16671== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
    ==16671== Command: ./ColorRatio clouds2.jpeg coucou.jpeg --track-origins=yes
    ==16671== 
    ==16671== Conditional jump or move depends on uninitialised value(s)
    ==16671==    at 0x4B28DD8: inflateReset2 (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
    ==16671==    by 0x4B28EC7: inflateInit2_ (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
    ==16671==    by 0x4C87E58: ??? (in /usr/lib/libITKniftiio.so.3.20.1)
    ==16671== 
    ==16671== Conditional jump or move depends on uninitialised value(s)
    ==16671==    at 0x4B28DD8: inflateReset2 (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
    ==16671==    by 0x4B28EC7: inflateInit2_ (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
    ==16671== 
    ==16671== Invalid read of size 4
    ==16671==    at 0x47429BC: ??? (in /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16)
    ==16671==    by 0x47CE4D2: (below main) (libc-start.c:226)
    ==16671==  Address 0xfffffffc is not stack'd, malloc'd or (recently) free'd
    ==16671== 
    ==16671== 
    ==16671== Process terminating with default action of signal 11 (SIGSEGV)
    ==16671==  Access not within mapped region at address 0xFFFFFFFC
    ==16671==    at 0x47429BC: ??? (in /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16)
    ==16671==    by 0x47CE4D2: (below main) (libc-start.c:226)
    ==16671==  If you believe this happened as a result of a stack
    ==16671==  overflow in your program's main thread (unlikely but
    ==16671==  possible), you can try to increase the size of the
    ==16671==  main thread stack using the --main-stacksize= flag.
    ==16671==  The main thread stack size used in this run was 8388608.
    ==16671== 
    ==16671== HEAP SUMMARY:
    ==16671==     in use at exit: 2,352,658 bytes in 63,532 blocks
    ==16671==   total heap usage: 74,071 allocs, 10,539 frees, 14,082,941 bytes allocated
    ==16671== 
    ==16671== LEAK SUMMARY:
    ==16671==    definitely lost: 49 bytes in 2 blocks
    ==16671==    indirectly lost: 0 bytes in 0 blocks
    ==16671==      possibly lost: 1,309,540 bytes in 42,156 blocks
    ==16671==    still reachable: 1,043,069 bytes in 21,374 blocks
    ==16671==         suppressed: 0 bytes in 0 blocks
    ==16671== Rerun with --leak-check=full to see details of leaked memory
    ==16671== 
    ==16671== For counts of detected and suppressed errors, rerun with: -v
    ==16671== Use --track-origins=yes to see where uninitialised values come from
    ==16671== ERROR SUMMARY: 5 errors from 3 contexts (suppressed: 0 from 0)
    Segmentation fault (core dumped) 
```

Even with 36000 useless try/catch statments, I still get that same segmentation fault after the main.

Can anyone please help me?

Thank you in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:59:55.590

这段代码对我有用：

```
#include <iostream>
#include <string>
#include <vector>

#include "itkImage.h"
#include "itkImageFileReader.h"
#include "itkImageFileWriter.h"
#include "itkRGBPixel.h"

int main(int argc, char** argv)
{
  std::string input = "/home/doriad/temp/test.png";
  std::string output= "output.png";

  const unsigned int  Dimension = 2;
  typedef itk::RGBPixel< unsigned char >       PixelType;
  typedef itk::Image< PixelType, Dimension >   ImageType;
  typedef itk::ImageFileReader< ImageType >    ReaderType;
  typedef itk::ImageFileWriter< ImageType >   WriterType;

  //allocation of the reader
  ReaderType::Pointer reader    = ReaderType::New();
  reader->SetFileName(input);
  reader->Update();

  //access image
  ImageType::Pointer image = reader->GetOutput();
//  ImageType::Pointer output_img;// This line does nothing

  //apparently providing the spacing and origin in ITK is mandatory
  // The spacing and origin are read from the file.
//  ImageType::SpacingType spacing;
//  spacing[0] = 0.33;
//  spacing[1] = 0.33;
//  image->SetSpacing(spacing);

//  ImageType::PointType origin;
//  origin[0] = 0.0;
//  origin[1] = 0.0;
//  image->SetOrigin(origin);

  WriterType::Pointer writer = WriterType::New();
  writer->SetFileName(output);
  writer->SetInput( reader->GetOutput() );
  writer->Update();

 return EXIT_SUCCESS;
} 
```

当然，您必须将“输入”字符串更改为您实际拥有的文件。

# c# - profile properties are not working

> ID：12558041
> 
> 赞同：2
> 
> 时间：2012-09-24T02:10:37.337
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-membership, membership-provider

when I add this code to my root web.config under system.web

```
<profile>
  <properties>
    <add name="UserId" type="String"/>

  </properties>
</profile> 
```

and rebuild my project, the properties don't seem to take.

Profile.UserId does not exist. Is there something obvious that I'm doing wrong? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:16:47.340

配置文件不是开箱即用的 Web 应用程序项目模板实现的：

[http://codersbarn.com/post/2008/07/10/ASPNET-PayPal-Subscriptions-IPN.aspx](http://codersbarn.com/post/2008/07/10/ASPNET-PayPal-Subscriptions-IPN.aspx)

[http://leedumond.com/blog/asp-net-profiles-in-web-application-projects/](http://leedumond.com/blog/asp-net-profiles-in-web-application-projects/)

您是否真正实施了它，或者您只是处于计划阶段？如果是后者，那么上面的链接应该提供一些有价值的信息。这也适用于 MVC AFAIK - 请参阅此问题：

[如何分配配置文件值？](https://stackoverflow.com/questions/426609/how-to-assign-profile-values)[查看乔尔·斯波尔斯基的回答]

# c++ - What I need to declare in this scope?

> ID：12558048
> 
> 赞同：2
> 
> 时间：2012-09-24T02:11:24.233
> 
> 标签：c++

I'm doing this little program in C++ but in codeblocks appears the following error: error:

> 'atod' was not declared in this scope

What I'm missing in this code? Thank you.

```
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
#include <string.h>
#include <fstream>
#include <math.h>
#include <iostream>

using namespace std;

class birth{
};

int main (void){

    int pass=1;
    string date, boy, aux1, aux2, aux4;
    double f;

    while(pass=! 0){
        cout<<"Enter the name of the birthday boy"<<endl;
        cin>>boy;
        cout<<"Enter the date of birth" <<endl;
        cin>>date;
        aux1= aux1.substr(5,10);
        f= atod(aux1);
        f=2012-f;
        cout<< "The birthday boy "<<boy<<"who born"<<date<<"now have"<<f<<"years"<<endl

        cout<<"Do you want to enter more birthdays?"<<endl;
        cout<<"1.- YES"<<endl;
        cout<<"2.- NO"<<endl;
        cin>>pass;
    }

    system ("pause");
    return 0;
}; 
```

EDIT: The problem is in this line:

```
 f= atod(aux1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:14:38.463

使用该`atof`功能。它在`stdlib.h`。您需要将 a 传递`const char*`给它，而不是 a `std::string`。

```
f = atof(aux1.c_str()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T02:18:50.113

没有任何像 atod
使用`_atold()`or的功能`atof()`，这些在`math.h`&`stdlib.h`

# java - override tostring of anonymous class

> ID：12558053
> 
> 赞同：2
> 
> 时间：2012-09-24T02:11:58.203
> 
> 标签：java, static, tostring, inner-classes, final

I want to override the title of each movie in a list.
I tried to make the `x` static and final but the compiler complains.

```
List<Movie> mList = new ArrayList<Movie>();

for(int i = 0; i < 5; i++)
{
int x;
mList.add(new Movie(){

  toString(){

   // need an easy way to give a unique string to each movie here.
   return "Movie" + x;
  } 
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T02:18:26.697

这应该有效：

```
List<Movie> mList = new ArrayList<Movie>();

for (int i = 0 ; i < 5 ; i++) {
    final int x = i;  // or anything else, but you must assign it some value
    mList.add(new Movie() {
        @Override
        public String toString(){
            return "Movie" + x;
        } 
    });
} 
```

您不能制作`x` `static`-`[static](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)`修饰符仅用于类的数据字段（或方法）。此外，`x`确实必须`final`允许`toString`匿名类的方法访问它。

# python - 在包的 __init__.py 中导入子模块时出现奇怪的命名空间污染

> ID：12558060
> 
> 赞同：8
> 
> 时间：2012-09-24T02:13:14.173
> 
> 标签：python

主要.py：

```
 import package 
```

包/__init__.py：

```
 # use function to split local and global namespace
    def do_import():
        print globals().keys()
        print locals().keys()

        import foo as mod

        print locals().keys()
        print globals().keys()

    do_import() 
```

包/foo.py：

```
 print 'Hello from foo' 
```

执行 main.py 会输出如下：

```
['__builtins__', '__file__', '__package__', '__path__', '__name__', 'do_import', '__doc__']
[]
Hello from foo
['mod']
['__builtins__', '__file__', '__package__', '__path__', '__name__', 'foo', 'do_import', '__doc__'] 
```

`import`in`__init__.py`没有按预期工作。请注意，全局命名空间有一个“foo”，它应该只绑定到本地“mod”

甚至 `exec "import foo as mod" in {'__name__': __name__, '__path__': __path__}` 无法阻止全局命名空间被修改

这怎么可能发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T04:05:13.570

啊! 棘手，但我明白了！

“foo”不是一个简单的“其他包”——Python 认为它是“包”模块的子模块。

当您第一次运行“包”时 - 从外部脚本导入它，或者使用`-m`命令行开关运行它（但如果您`python package/__init__.py`直接从命令行运行，则不会），“包”模块被解析，并添加到`sys.modules`字典（在`sys`模块上）。

读取子模块时`foo`，除了直接放在`sys.modules`key 下`["package.foo"]`，还设置为其父模块的属性。因此，它可以在您的 Python 应用程序中作为`package.foo`. 发生的情况是在 , 中设置属性与在运行时在全局变量中`sys.modules["package"]`设置键具有相同的效果。`package/__init__.py`这就是正在发生的事情。

我希望我能把这个过程正确地翻译成文字——如果没有，请通过评论再次询问。

-- Since this is probably happening in real code you have, and the equivalent of "do_import" is being called from code outside your package (and have the side effects of making your sub-modules appear on the package's global namespace), there is no easy work around on the way you are doing it. My suggestion is to just add an underscore (`_`) at the beggining of the sub-modules names if they are not intended to be called from general code from outside your package. (It also won't show up if someone does `from package import *` in this case)

# objective-c - NSMutableArray addObject 未在数组末尾插入

> ID：12558062
> 
> 赞同：2
> 
> 时间：2012-09-24T02:13:56.293
> 
> 标签：objective-c, nsmutablearray

我有下面的代码迭代我的 bookObjects 数组上的每一本书，我的问题是 addObject 是在随机索引上插入/添加我的 aBook 对象，而不是在 self.books 的末尾添加它

我只是希望它遵循 bookObjects 中书籍的顺序，没有特定的顺序或排序。

书籍是一个 NSMutableArray

```
NSArray *bookObjects = [element childrenNamed:@"books"];

int i = 0;
for(SMXMLElement *child in bookObjects)
{
    NSString *isbn = [child valueWithPath:@"isbn"]; 
    NVBook *aBook = [self getBookByISBN:isbn];
    if(nil == aBook)
    {
        aBook = [NVBook insertBookInContext:[self managedObjectContext]];
        aBook.isbn = isbn;

        [self.books addObject:aBook];
    }

    aBook.indexInList = i++;
    [aBook updateContentWithElement:child];
} 
```

附加代码

```
+ (NVBook *)insertBookInContext:(NSManagedObjectContext*)context
{
    return [NSEntityDescription insertNewObjectForEntityForName:@"Book" inManagedObjectContext:context];
}

- (NVBook *)getBookByISBN:(NSString *)aISBN
{
    NVBook *aBook = nil;

    for(NVBook *book in self.books)
    {
        if([book.isbn isEqual:aISBN])
        {
            aBook = book;
            break;
        }
    }

    return aBook;
} 
```

# c++ - 作为另一个函数参数的函数调用是否遵循任何定义的行为？

> ID：12558065
> 
> 赞同：1
> 
> 时间：2012-09-24T02:14:19.960
> 
> 标签：c++, c++11

在 C++11 中是否有关于以下内容的任何已定义行为？（即 a = 1、2 或未定义）

```
void somefunc(int a, int b) {
  std::cout << a << b << std::endl;
}

int i = 0;
somefunc(++i, ++i) 
```

或者我应该写：

```
int i = 0;
int a = ++i;
int b = ++i;
somefunc(a, b); 
```

我问的原因是我正在解析一个文件的选项，在一种情况下我想创建一个键值对。并具有类似于以下的功能：

```
std::string create_key(std::string &source, size_t &size, int &index) {
  std:: string key = "";
  while(index < size) {
    // parse the string to create the key
    ++index
  }
  return key;
}

// Value is an base class for a template class. Allowing me to store values 
// of different data types inside a container.
Value* create_value(std::string &source, size_t &size, int &index) {
  Value* value = nullptr;
  while(index < size) {
    // determine type and assign it to value
    ++index;
  }
  return value;
}

std::map<std::string, Value*> create_object(std::string &source, size_t &size, int &index) {
  std::map<std::string, Value*> object;
  while(index < size) {
    // the line I think produces the same issue as my original example
    object.insert(std::pair<std::string, Value*>(create_key(source, size, index), create_value(source, size, index)));
    ++index;
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T02:24:11.230

是的，因为您正在以相对于同一变量的另一个修改没有顺序的方式修改变量。请注意，逗号不是逗号运算符，它会引入排序并防止 UB；它只是分隔函数参数。

你甚至不能做

```
somefunc(i, ++i) 
```

不会导致未定义的行为。修改变量，然后分别调用函数（或者如果它是你想要的，反之亦然）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T02:28:12.157

未指定评估函数参数的顺序。`C++11 5.2.2.Function call para/4`状态：

> 调用函数时，每个参数都应使用其对应的参数进行初始化[注意：此类初始化相对于彼此的**顺序是不确定的]。**

你应该使用：

```
somefunc (i+1, i+2); i += 2; 
```

并停止担心这些事情。

除非您能够`i`从其他地方访问，否则这将正常工作，在这种情况下，您还有*更多*问题需要解决。

# c++ - 函数局部变量是否应该始终与 std::move 一起返回？

> ID：12558068
> 
> 赞同：0
> 
> 时间：2012-09-24T02:14:44.203
> 
> 标签：c++, reference, c++11, return-value, move-semantics

> **可能重复：**
> [从函数返回值时使用 std::move() 以避免复制](https://stackoverflow.com/questions/11817873/using-stdmove-when-returning-a-value-from-a-function-to-avoid-to-copy)

假设您在函数中有任何类型的变量并且您想要返回它：

```
X foo(/*...*/) {
  X x;
  //...
  return x;
} 
```

我正在尝试确定是否存在任何`return std::move(x);`问题。显然`x`会超出范围，因此似乎没有充分的理由保留它。但是，我不确定如果引用`X`一些`Y&`长期（更）寿命的变量会产生什么影响。

# android - 检查 sqlite 表时，我不断收到 NPE

> ID：12558072
> 
> 赞同：0
> 
> 时间：2012-09-24T02:15:07.417
> 
> 标签：android, sqlite, nullpointerexception

我正在尝试在我的 SQLiteOpenHelper 文件中使用它来检查是否存在表和带有 Android 的 SQLite 数据库

```
// Check to see if a table exists
public boolean isTableExists(String tblName) {
    String existQuery = "SELECT name FROM sqlite_master WHERE name ='" + tblName + "' and type='table'";
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(existQuery, null);

    if(cursor != null){
        cursor.close();
        return true;
    }

    return false;

} 
```

我的活动的电话是

```
if(db.isTableExists("characters") == false){
        Intent p = new Intent("com.tml.rpgtodo.CREATECHARACTER");
        startActivity(p);
    } 
```

我在 if 语句的行上不断收到 NullPointerException。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:22:23.260

`db`当你打电话时听起来像是null `if(db.isTableExists("characters") == false)`。

我还看到您在“isTableExists()”中初始化了 db。那是一个*不同*的“db”吗？

# javascript - 在 for 循环中错误地传递回调参数

> ID：12558073
> 
> 赞同：0
> 
> 时间：2012-09-24T02:15:24.107
> 
> 标签：javascript, parameters, callback, parameter-passing

我有一个在循环`id`中生成的变量。`for`由于某种原因，`id`当它传入 a 时会从 0 变为 1 `callback`。我的猜测是我`id`错误地传递了参数。

```
 refreshMenu: function(mods, callback){
    var menu = document.getElementById('menu'), 
            ul = document.createElement('ul');

    menu.innerHTML = ''; 
    menu.appendChild(ul);

    for(var id = 0; id < mods.length; id++){
        var li = document.createElement('li'), 
        that = this;

            ul.appendChild(li);

            li.setAttribute('id', id);
            li.innerHTML = mods[id].get('name');

            console.log(id); // HERE ---> 0

            li.addEventListener('click', function(){
                that.selectMenu(li, function(){

                    console.log(id); HERE ---> //1 ?

                that.selectList(id - 1);

                });
            }, false);
        }

        callback();
    }, 

    selectList: function(id)
        var activeList = this.activeList();

        console.log(id);

        if (activeList.id == id){
            return;
        } 
        else if (activeList){
            activeList.setAttribute('class', '');
        };

        var target = document.getElementById(id);
        target.setAttribute('class', 'activeList');
    },  

    selectMenu: function(li, callback){
        if(li.className == 'activeMenu') 
            return; 

        var active = document.getElementsByClassName('activeMenu')[0];
        if(active)      
            active.setAttribute('class', '');

        li.setAttribute('class', 'activeMenu');

        callback();
    }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:53:14.183

*在for*循环中构建闭包时，这是一个非常常见的问题。您创建的所有函数都引用同一个*id*变量，并且*for*循环会**改变**该变量。

解决此问题的一种简单方法：创建一个创建这些函数的辅助函数，并让辅助函数获取自己的参数。

```
// In the body of the for loop ...
var makeClickFunction = function (li, id) {
    return function (){
        that.selectMenu(li, function(){
                               console.log(id);
                               that.selectList(id - 1);
                            });
    };
};
li.addEventListener('click', makeClickFunction(li, id)); 
```

helper 对其*id*参数的绑定遮蔽了*for*循环的绑定，这是一件好事！我们是故意这样做的。我们也捕获*li*，因为它也需要被持有。

稍后，我们调用*makeClickFunction ，在**for*循环 中传入当前值。*for*将继续改变它的*id*，但这没关系：这种改变与*makeClickFunction*的闭包行为没有关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T02:28:30.807

的值`id`在回调被调用之前已经改变了，所以如果你想要在回调被调用时正确的 id 值，你需要闭包。

```
 li.addEventListener('click', function(){
            that.selectMenu(li, function(){

                console.log(id); HERE ---> //1 ?

            that.selectList(id - 1);

            });
        }, false); 
```

==>

```
li.addEventListener('click', 
(function(li,that,id){
    return function(){
        that.selectMenu(li, function(){
        console.log(id); 
        that.selectList(id - 1);
        })
    }
})(li,that,id),
false); 
```

# objective-c - iOS：如何检查字符串是否只有数字？

> ID：12558074
> 
> 赞同：5
> 
> 时间：2012-09-24T02:15:33.690
> 
> 标签：objective-c, ios, nsstring

我需要确定文本是电子邮件地址还是手机号码，对于电子邮件地址，我可以使用一些正则表达式，对于手机号码，我可以检查字符串是否只有数字（对吗？）

顺序如下：

```
is (regex_valid_email(text))
{
    // email
}
else if (all_digits(text))
{
    // mobile number
} 
```

但是如何检查一个字符串在 iOS 中是否只有数字？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T02:21:28.783

您创建一个 NSCharacterSet ，其中包括数字，可能还有破折号和括号（取决于您看到的电话号码格式）。然后你反转那个集合，所以你有一个集合，除了那些数字和东西，然后使用 rangeOfCharactersFromSet 如果你得到除了 NSNotFound 之外的任何东西，那么你就有了数字以外的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T03:11:40.140

这应该有效：

```
//This is the input string that is either an email or phone number
NSString *input = @"18003234322";

//This is the string that is going to be compared to the input string
NSString *testString = [NSString string];

NSScanner *scanner = [NSScanner scannerWithString:input];

//This is the character set containing all digits. It is used to filter the input string
NSCharacterSet *skips = [NSCharacterSet characterSetWithCharactersInString:@"1234567890"];

//This goes through the input string and puts all the 
//characters that are digits into the new string
[scanner scanCharactersFromSet:skips intoString:&testString];

//If the string containing all the numbers has the same length as the input...
if([input length] == [testString length]) {

    //...then the input contains only numbers and is a phone number, not an email
} 
```

# wpf - 在添加新项目窗口中找不到 ResourceDictionary

> ID：12558076
> 
> 赞同：19
> 
> 时间：2012-09-24T02:16:04.613
> 
> 标签：wpf, wpf-controls, resourcedictionary

当我创建一个新的 WPF 项目时，我可以在添加新项目窗口中找到 ResourceDictionary。但我有另一个项目我找不到，我不知道为什么。 ![只有 UserControl 但没有 ResourceDictionary](../Images/eaaede726ad08b274ecccb334bd38ae4.png)

更新： 该项目最初是为.net 3.5 的，但现在它也有一个为.net 4.0 的版本。这意味着同一个项目有两个 .sln 文件（一个用于 3.5，另一个用于 4.0）。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-12-30T18:32:35.930

将以下行添加到 Project.csproj

> ```
>  <ProjectTypeGuids>{60dc8134-eba5-43b8-bcc9-bb4bc16c2548};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
> ```

它应该是标签的子`<PropertyGroup>`标签，如下所示：

> ```
>  <Project>
>       <PropertyGroup>
>         ....
>         <ProjectTypeGuids>{guids};{go};{here}</ProjectTypeGuids>
>         ...
>       </PropertyGroup>
>     ...
>     </Project> 
> ```

[这篇文章](https://stackoverflow.com/questions/2911565/what-is-the-significance-of-projecttypeguids-tag-in-the-visual-studio-project-fi)很好地解释了为什么这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T03:25:55.343

首先，我希望您意识到这不应该阻止您，因为您可以轻松地将所需的任何文件添加到项目中，无论是从您的文件系统中，还是从另一个项目中复制它。添加新项目窗口只是为了方便。

其次，当您将新项目添加到您的解决方案中时，您选择了哪个项目模板？项目模板确定项目具有的初始引用程序集集。WPF 项目引用 WPF 库（WindowsBase、PresentationCore 等）。

Visual Studio 使用您引用的程序集来生成您在“添加新项”对话框中看到的可能项。

所以我假设您添加了一些其他类型的项目，例如基本类库。您可以使用“添加引用”对话框手动添加对 WPF 程序集的引用。或者您可以将项目重新创建为 WPF 自定义控件库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-10T10:56:37.750

关闭项目。创建一个新项目，该项目属于您将使用的 WPF 项目类型（或使用现有项目）。然后在文本编辑器中打开 WPF 项目的 .csproj 文件。找到`ProjectTypeGuids`元素。

在记事本中打开现有的 .csproj 文件。看看有没有`ProjectTypeGuids`元素。如果是这样，请将来自 WPF 项目的 GUID（不带`ProjectTypeGuids`）附加到现有项目中。如果现有的 .csproj 文件中没有`ProjectTypeGuids`元素，请从 WPF 项目中复制`ProjectTypeGuids`GUID 并将其粘贴到现有项目的第一个`PropertyGroup`元素中。

在 Visual Studio 中重新加载您的项目。您现在应该能够添加所有 WPF 文件类型。

我相信每个人的 GUIDS 都是相同的，所以您需要的值应该是：`{60dc8134-eba5-43b8-bcc9-bb4bc16c2548};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}`...这应该可以为您节省创建新项目的步骤。

因此，如果您有一个类库项目，只需添加

```
<ProjectTypeGuids>{60dc8134-eba5-43b8-bcc9-bb4bc16c2548};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

到 .csproj 文件中的第一个`PropertyGroup`元素。

# c# - SQL Server：存储过程挑战

> ID：12558078
> 
> 赞同：0
> 
> 时间：2012-09-24T02:16:55.343
> 
> 标签：c#, sql-server-2008, stored-procedures

场景如下：我`SunflowerSeeds`在 SQL Server 2008 中有一个表。

```
CREATE TABLE [dbo].[SunflowerSeeds](
    [Color] [nvarchar](50) NULL,
    [SeedType] [nvarchar](50) NULL,
    [Price] float NULL
) 
```

为简单起见，我没有插入一长串数据。

向表中插入数据如下所示：

```
Insert into [dbo].[SunflowerSeeds] (Color, SeedType, Price)
SELECT 'Yellow', 'Dwarf', 20
UNION ALL
SELECT 'Brown', 'Garden', 30
UNION ALL
SELECT 'Red', 'Garden', 35 
```

现在我得到了各种可以提高种子价格的矩阵。

1.  Polenless (YES/NO)：如果是，将价格提高 10%
2.  高度（> 13"）：如果是，则将价格提高 8%
3.  有机（是/否）：如果是，将价格提高 15%
4.  生命周期（年度-是/否）：如果是，将价格提高 12%

每个数据插入行对上面列出的每个矩阵都可以有 YES 或 NO 值。我需要想出一个过程来根据表`Price`中每个种子的返回新价格`SunFlowerseeds`并将矩阵组合纳入 a/c。

例如，如果黄矮星是无极的，高度 > 13 英寸，有机是并且具有年度生命周期，那么新价格必须计算为

```
10% + 8%+15%+12% = 45% = 1+ 0.45= 1.45 
```

那么新的价格是： `1.45 * Original Price= 1.45*20 = 29`

对于其余的组合也是如此。

我正在考虑编写一个 SQL Server 存储过程，以便以后可以在我的 C# 代码中调用它。存储过程的 i/p 参数将是`Color`和`SeedType`。有了这两个参数，我可以得到`Price`.

挑战是我如何`Price`使用适用矩阵的组合计算每个种子的新值 - Polenless、height、Organic、LifeCycle。谁能指出我正确的做法。请帮助我。TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:29:13.427

假设 SunflowerSeeds 中 Color 和 SeedType 的组合是唯一的：

```
CREATE PROCEDURE UpdatePrice
    @Polenless BIT,
    @Height BIT,
    @Organic BIT,
    @Lifecycle BIT,
    @color NVARCHAR(50),
    @seedType NVARCHAR(50)

AS
BEGIN
   UPDATE SunflowerSeeds
   SET Price = Price +  
                        ((Price * 0.1) * @Polenless)+
                        ((Price * 0.08) * @Height)+
                        ((Price * 0.15) * @Organic)+
                        ((Price * 0.12) * @Lifecycle)
    WHERE Color = @color  AND SeedType = @seedType

END
GO 
```

您也可以使用 int 类型的按位标志，而不是 @Polenless、@Height、@Organic、@Lifecycle。

# c++ - 以编程方式在 IE 中设置页面缩放和文本大小

> ID：12558080
> 
> 赞同：1
> 
> 时间：2012-09-24T02:17:18.833
> 
> 标签：c++, windows, internet-explorer, internet-explorer-8, automation

我需要编写一个小的可执行文件，它使用特定的 URL 加载 IE8，但还将页面缩放设置为默认值，将文本大小设置为默认值（中等）。

*我可以通过将ctrl+0*击键发送到 IE 窗口来粗略地设置页面缩放，但实际上没有任何简单的方法可以设置文本大小。

我可以通过击键浏览菜单：*alt+z -> x -> m*但这只是变得愚蠢。我无法知道菜单是否已显示以及发送下一个键是否安全。

我查看了 IE 命令行参数，但它们确实很有限。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:33:43.320

看看`HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Zoom`。您可以设置与页面缩放级别对应的 DWORD。

# javascript - CSS3 响应式、动态八角形

> ID：12558083
> 
> 赞同：3
> 
> 时间：2012-09-24T02:18:01.843
> 
> 标签：javascript, css, html

对于我正在处理的项目，我需要创建一个八边形网格。我可以使用 css 创建一个八边形，问题是它不响应浏览器，因为它不会随浏览器窗口调整大小。这很重要，因为要在多个设备上查看网站，并且必须在移动设备上查看网格。

八边形纯粹是为了显示目的，所以我可以只使用图像背景，但如果可能的话我想避免这种情况。我并不反对使用 JavaScript，但我并不完全是 JavaScript 专家，也不知道从哪里开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T06:35:45.910

你想达到这样的目标吗？（调整浏览器窗口大小以查看其行为）。

```
.o {
  float: left;
  overflow: hidden;
  position: relative;
  padding: 5%;
}

.o::before {
  position: absolute;
  top: 0; right: 0; bottom: 0; left: 0;
  transform: rotate(45deg);
  background: linear-gradient(dodgerblue, black);
  content: '';
}
```

```
<div class="o"></div>
<div class="o"></div>
<div class="o"></div>
<div class="o"></div>
<div class="o"></div>
```

还是这样的？

```
.o-outer {
  float: left;
  position: relative;
  padding: 5%;
  margin: 4.33% -3% 0 0
}

.o {
  position: absolute;
  top: 0; right: 0; bottom: 0; left: 0;
  overflow: hidden;
}

.o::before {
  position: absolute;
  top: 0; right: 0; bottom: 0; left: 0;
  transform: rotate(45deg);
  background: radial-gradient(dodgerblue, black);
  content: '';
}

.o-outer:nth-child(even) .o {
  margin: 71.66% 0 -71.66% 0;
}
```

```
<div class="o-outer"><div class="o"></div></div>
<div class="o-outer"><div class="o"></div></div>
<div class="o-outer"><div class="o"></div></div>
<div class="o-outer"><div class="o"></div></div>
<div class="o-outer"><div class="o"></div></div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T03:21:02.413

下面只是解决您的问题的另一种方法，我不知道您想要多复杂，但我会根据设备应用不同的 css。请考虑您项目的复杂性。

如果要在多个设备上查看该网站，我建议对不同的设备/浏览器使用不同的 CSS。

```
<link rel="stylesheet" media="screen and (min-device-width: 500px)" href="500example.css" /> 
```

上面的代码会将上述 css 应用于 witdh 为 500 及以上的设备。

这是一种简洁的方法，因为它检查设备宽度而不是浏览器宽度，因为这在使用移动/手持设备时非常有用。

另一种方法是检查浏览器宽度。

```
<link rel='stylesheet' media='screen and (min-width: 500px) and (max-width: 800px)' href=example2.css' /> 
```

仅当浏览器窗口介于 500px 和 800px 之间时，上面的代码才会应用样式表。

您可以编写一个函数来检查应用 css 的条件。

添加文件

```
<link rel="stylesheet" type="text/css" href="main.css" /> 
<link id="size-stylesheet" rel="stylesheet" type="text/css" href="example2.css" /> 
```

每次调整窗口时，您都可以检查要应用的 css，[添加 jQuery]

```
function adjust(width) {
    width = parseInt(width);
    if (width < 701) {
        $("#size-stylesheet").attr("href", "css/ex1.css");
    } else if ((width >= 701) && (width < 900)) {
        $("#size-stylesheet").attr("href", "css/ex2.css");
    } else {
        $("#size-stylesheet").attr("href", "css/wide.css");
    }
}

$(function() {
    adjust($(this).width());
    $(window).resize(function() {
        adjust($(this).width());
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T02:25:53.510

如果我理解正确，这不是您应该使用 Javascript 解决的问题。太沉重和笨拙

如果您可以放弃使用 CSS 创建它们，我认为您可以纯粹使用 CSS 对其进行排序。在这种情况下尝试`background-size`使用百分比，这里有一些例子：[http](http://whereswalden.com/files/mozilla/background-size/more-examples.html) ://whereswalden.com/files/mozilla/background-size/more-examples.html和这里[https://developer.mozilla.org/en-US/docs/ CSS/背景尺寸](https://developer.mozilla.org/en-US/docs/CSS/background-size)

或者，如果您的目标是支持移动设备，您可能只想禁用可能的缩放[如何在移动网页上“禁用”缩放？](https://stackoverflow.com/questions/4472891/how-can-i-disable-zoom-on-a-mobile-web-page)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T02:43:02.000

OP说，他用CSS绘制了图像，所以使用背景大小不起作用。您能否发布您为绘制八角形而编写的 CSS 代码？

虽然说实话，我确实同意 ido，并且并没有真正看到使用 css 绘制的图像（与 png 相比）的巨大性能改进，特别是当您打算将其简单地作为某种装饰功能时。

无论如何，请看一下这个 JsFiddle： http: [//jsfiddle.net/XkM9R/10/](http://jsfiddle.net/XkM9R/10/)，我仍在研究动态调整大小。

# ruby - 开发 gem 时，我是否必须在更新后继续安装？

> ID：12558084
> 
> 赞同：2
> 
> 时间：2012-09-24T02:18:06.790
> 
> 标签：ruby, gem

我正在文件夹中制作宝石：

```
/Users/me/projects/ruby/gems/mygamename/ 
```

它的布局是这样的：

```
/Users/me/projects/ruby/gems/mygamename/mygamename.gemspec
/Users/me/projects/ruby/gems/mygamename/mygemname.rb
/Users/me/projects/ruby/gems/mygamename/lib/mygemname/file1.rb
/Users/me/projects/ruby/gems/mygamename/lib/mygemname/file2.rb 
```

现在在我的另一个 ruby​​ 项目中，我想在我的 Gemfile 中引用这个 gem，所以我做了：

```
gem 'mygemname', :path => "/Users/me/projects/ruby/gems/mygamename" 
```

我知道我应该为我的 gem 编写测试来测试功能，但我很好奇我是否也可以从我的其他 ruby​​ 项目（我在我的 Gemfile 中引用它）进行集成测试。

1.  如果我对 gem 进行更新，是否必须重新运行 bundle？还是它会继续从该文件夹中读取并获取更改？

2.  关于如何从我的其他 ruby​​ 项目中测试它的任何其他建议？

同样，我将在 gem 本身中编写测试，但想知道如果我愿意，我也可以这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:53:20.133

您`bundle install`只需要运行一次。Bundler 不会缓存或打包您的 gem，它直接指向您的文件夹。

重启规则与主应用程序相同。如果您对视图、资产或自动加载的 ruby​​ 文件进行更改，它们将自动重新加载。但是，如果您需要应用程序中的一些 lib 文件并更改它们，则必须重新启动您的应用程序。默认情况下，Bundler 将需要 gem "mygemname" 的 "lib/mygemname.rb"，因此该文件将无法重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:38:35.653

我在开发 gem 时通常做的是在一个目录中创建 Gemfile 并从那里工作。在 Gemfile 中，我使用 :path 选项添加对我的 gem 的引用。

```
gem 'mygemname', :path => '/path/to/my/gem' 
```

然后我运行捆绑安装。这样我就不必继续重新安装我的 gem。

请记住，运行我的 gem 时需要使用 bundle exec。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:26:49.087

Gem 类/模块被缓存，因此每次您对 gemfile 进行更改时，您都必须重新启动您的应用程序。此外，如果您不在 gemspec 中更新 gem 版本，则不必重新捆绑。如果您更新 gem 版本，则可能需要执行`bundle update gemname`

# android - 如何根据本地设置格式化没有年份的Android日期并显示月份和日期？

> ID：12558085
> 
> 赞同：10
> 
> 时间：2012-09-24T02:18:09.300
> 
> 标签：android, date-format

> **可能重复：**
> [Android 获取当前时间和日期](https://stackoverflow.com/questions/5369682/android-get-current-time-and-date)

从这个[没有年份的格式日期，](https://stackoverflow.com/questions/3790918/format-date-without-year)我知道如何摆脱年份。

但我也想形成月份和日期。如果用户设置 09/24/2012，则显示 09/24；如果用户设置 24/09/2012，则显示 24/09。

我也想支持l18n。

也许解决方案是结合 DateFormat 和 DateUtils，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-24T02:47:56.713

首先将信息拆分为变量，然后根据需要显示。

```
public String formatDate(String date)
{
    int index1, index2;

    index1 = date.indexOf('/');
    index2 = date.lastIndexOf('/');

    String str1, str2, str3;

    str1 = date.substring(0, index1);
    str2 = date.substring(index1 + 1, index2);
    str3 = date.substring(index2);

    // Presuming that str1 is the month and str2 is the day ...

    return str1 + "/" + str2;
} 
```

# android - google api中带有触摸事件的反向地理编码不起作用

> ID：12558087
> 
> 赞同：0
> 
> 时间：2012-09-24T02:18:41.380
> 
> 标签：android, google-maps, geocoding

> **可能重复：**
> [在 Android 中使用触摸事件进行反向地理编码](https://stackoverflow.com/questions/12555032/reverse-geocoding-in-android-with-touch-event)

我想将地图的纬度和经度更改为位置地址，但我无法得到结果，它会抛出异常以捕获部分并打印捕获部分的部分。此代码是从几个教程中获得的，其中 sereenshot 显示了结果，但我无法得到它。它的原因可能是什么，或者在 api 2.2 中，它是无效的。

**这是代码**；

```
@覆盖
     public boolean onTouchEvent(MotionEvent 事件，MapView mapView)
     {
     //---当用户抬起手指时---
     if (event.getAction() == 1) {
     GeoPoint p = mapView.getProjection().fromPixels(
     (int) event.getX(),
     (int) event.getY());
     Toast.makeText(getBaseContext(),
             p.getLatitudeE6() / 1E6 + "," +
             p.getLongitudeE6() /1E6 ,
             Toast.LENGTH_SHORT).show();

 Geocoder geoCoder = new Geocoder(
         getBaseContext(), Locale.getDefault());
     try {
         List<Address> addresses = geoCoder.getFromLocation(
             p.getLatitudeE6()/1E6  , 
             p.getLongitudeE6()/1E6, 1);

         String add = "";

         if (addresses.size() > 0) 
         {
             for (int i=0; i<addresses.get(0).getMaxAddressLineIndex(); 
                  i++)
                add += addresses.get(0).getAddressLine(i) + "\n";
         }

         Toast.makeText(getBaseContext(), add, Toast.LENGTH_SHORT).show();
     }
     catch (IOException e) {  
          Toast.makeText(getBaseContext(), "uffff.... exception", Toast.LENGTH_SHORT).show();
         e.printStackTrace();
     }   
     return true;
 }
 else                
     return false;

 } 
```

请帮助我完成它，我已经在它下面很长时间了。谢谢你的提前

# emulation - Android Emulator 启动失败，可能是不支持扩展桌面

> ID：12558088
> 
> 赞同：1
> 
> 时间：2012-09-24T02:18:48.210
> 
> 标签：emulation, launch

在使用 x86 模拟器后，我对 Android 模拟器感到沮丧好几周了。即使 LogCat 指示它正在运行，模拟器也会显示几个小时的空白屏幕，但我担心应用程序陷入死循环。

为了解决这个问题，我重新安装了我所有的电脑和android开发环境，并按照我通过搜索互联网获得的所有说明进行操作；结果令人沮丧：模拟器上只运行了一个“system_process”。

然后今天发现**SystemUI报错**，估计是我使用**扩展桌面**时PC配置造成的。因此，我将笔记本电脑从扩展坞上卸下并重新启动了模拟器，这一次只需大约 10 秒就可以让所有进程准备好模拟 android 手机。

所以我想有一个错误来处理启用了扩展桌面的 PC。如果您在启动 Android Emulator 时遇到类似问题，请先尝试将您的 PC 与第二个显示器分离。

# php - PHP：从资源中获取图像文件大小（上传之前）？

> ID：12558091
> 
> 赞同：2
> 
> 时间：2012-09-24T02:19:01.860
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 和 GD 获取图像资源大小（以字节为单位）？](https://stackoverflow.com/questions/4023441/how-to-get-image-resource-size-in-bytes-with-php-and-gd)

```
$resource = imagecreatefromstring(stream_get_contents($fhandle)); 
```

我将使用 createjpeg() 将此图像保存在我的服务器上，但我想在保存之前检查文件大小。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:43:54.337

我能想到的唯一方法是使用输出缓冲。

使用 启用输出缓冲区[`ob_start()`](http://php.net/manual/en/function.ob-start.php)，输出图像，然后使用 检查长度[`ob_get_length()`](http://php.net/manual/en/function.ob-get-length.php)。然后，如果文件在您的限制范围内，您可以使用[`ob_get_contents()`](http://php.net/manual/en/function.ob-get-contents.php)并将其写入磁盘，而无需再次重新渲染图像。

但请注意，这可能会占用大量内存，就像任何图像操作一样。

# php - 从数据库中的所有表中获取数据

> ID：12558092
> 
> 赞同：0
> 
> 时间：2012-09-24T02:19:22.193
> 
> 标签：php, mysql

好的，我的数据库中有 5 个表，它们如下所示 officelocations_tbl state_tbl city_tbl staff_tbltitles_tbl

Titles 表只与staff 表相关联，而其他表都是内部连接的。我尝试了各种 mysql 语句，但没有一个允许我引入titles_tbl。这是我尝试使用的最新版本的 sql 语句：

```
 SELECT officelocations_tbl.*,city_tbl.*, state_tbl.* , titles_tbl.*, 
    contact1.firstName AS c1Firstname, contact1.lastName AS c1lastName, 
    contact1.middleInitial AS c1middleInitial, contact1.suffix AS c1suffix, 
    contact1.accredations AS c1accredations, contact1.phone AS c1Phone, 
    contact1.faxNumber AS c1FaxNumber, contact1.mobilePhone AS c1Mobile, 
    contact1.email AS c1Email, contact1.titleID AS c1Title, 

    contact2.firstName AS c2Firstname, contact2.lastName AS c2lastName, 
    contact2.middleInitial AS c2middleInitial, contact2.suffix AS c2suffix, 
    contact2.accredations AS c2accredations,  contact2.phone AS c2Phone, 
    contact2.faxNumber AS c2FaxNumber, contact2.mobilePhone AS c2Mobile, 
    contact2.email AS c2Email, contact2.titleID AS c2Title, 

    partner.firstName AS c3Firstname, partner.lastName AS c3lastName, 
    partner.middleInitial AS c3middleInitial, partner.suffix AS c3suffix, 
    partner.accredations AS c3accredations, partner.phone AS c3Phone, 
    partner.faxNumber AS c3FaxNumber, partner.mobilePhone AS c3Mobile, 
    partner.email AS c3Email, partner.titleID AS c3Title 

    FROM officelocations_tbl 

    JOIN city_tbl ON (officelocations_tbl.cityID = city_tbl.cityID)  
    INNER JOIN titles_tbl ON titles_tbl.titleID = staff_tbl.titleID 
    LEFT OUTER JOIN state_tbl ON (officelocations_tbl.stateID = state_tbl.stateID) 
    LEFT OUTER JOIN staff_tbl contact1 ON (contact1.staffID = officelocations_tbl.contact1) 
    LEFT OUTER JOIN staff_tbl contact2 ON (contact2.staffID = officelocations_tbl.contact2) 
    LEFT OUTER JOIN staff_tbl partner ON (partner.staffID = officelocations_tbl.partner) 
```

然而，这给了我一个错误 [Err] 1054 - Unknown column 'staff_tbl.titleID' in 'on Clause'。如果我删除这两行：

```
 INNER JOIN titles_tbl ON titles_tbl.titleID = staff_tbl.titleID
    titles_tbl.*, 
```

它有效，但不包含标题。我也尝试过这样做，但它只提取一次标题，而不是所有三个联系人。

```
 SELECT
    staff_tbl.staffID,
    staff_tbl.staffID_C2,
    staff_tbl.staffID_P,
    staff_tbl.firstName,
    staff_tbl.middleInitial,
    staff_tbl.lastName,
    staff_tbl.suffix,
    staff_tbl.accredations,
    staff_tbl.email,
    staff_tbl.phone,
    staff_tbl.mobilePhone,
    staff_tbl.officePhone,
    staff_tbl.faxNumber,
    staff_tbl.address1,
    staff_tbl.address2,
    staff_tbl.cityID,
    staff_tbl.stateID,
    staff_tbl.zipCode,
    staff_tbl.titleID,
    staff_tbl.locationID,
    staff_tbl.photoURL,
    staff_tbl.vCardURL,
    staff_tbl.qRCodeURL,
    staff_tbl.resumeURL,
    staff_tbl.biography,
    staff_tbl.dateCreated,
    officelocations_tbl.locationID,
    officelocations_tbl.officeName,
    officelocations_tbl.address1,
    officelocations_tbl.address2,
    officelocations_tbl.cityID,
    officelocations_tbl.stateID,
    officelocations_tbl.zipCode,
    officelocations_tbl.officePhone,
    officelocations_tbl.contact1,
    officelocations_tbl.contact2,
    officelocations_tbl.partner,
    city_tbl.cityID,
    city_tbl.cityName,
    state_tbl.stateID,
    state_tbl.state_abreviation,
    state_tbl.state_name,
    titles_tbl.titleID,
    titles_tbl.titleName, 

    contact1.firstName AS c1Firstname, contact1.lastName AS c1lastName, 
    contact1.middleInitial AS c1middleInitial, contact1.suffix AS c1suffix, 
    contact1.accredations AS c1accredations, contact1.phone AS c1Phone, 
    contact1.faxNumber AS c1FaxNumber, contact1.mobilePhone AS c1Mobile, 
    contact1.email AS c1Email, contact1.titleID AS c1Title, 

    contact2.firstName AS c2Firstname, contact2.lastName AS c2lastName, 
    contact2.middleInitial AS c2middleInitial, contact2.suffix AS c2suffix, 
    contact2.accredations AS c2accredations, contact2.phone AS c2Phone, 
    contact2.faxNumber AS c2FaxNumber, contact2.mobilePhone AS c2Mobile, 
    contact2.email AS c2Email, contact2.titleID AS c2Title, 

    partner.firstName AS c3Firstname, partner.lastName AS c3lastName, 
    partner.middleInitial AS c3middleInitial, partner.suffix AS c3suffix, 
    partner.accredations AS c3accredations, partner.phone AS c3Phone, 
    partner.faxNumber AS c3FaxNumber, partner.mobilePhone AS c3Mobile, 
    partner.email AS c3Email, partner.titleID AS c3Title 

    FROM officelocations_tbl
    INNER JOIN staff_tbl ON staff_tbl.staffID = officelocations_tbl.contact1
    INNER JOIN state_tbl ON state_tbl.stateID = officelocations_tbl.stateID
    INNER JOIN titles_tbl ON titles_tbl.titleID = staff_tbl.titleID
    INNER JOIN city_tbl ON city_tbl.cityID = officelocations_tbl.cityID

    LEFT OUTER JOIN staff_tbl contact1 ON (contact1.staffID = officelocations_tbl.contact1) 
    LEFT OUTER JOIN staff_tbl contact2 ON (contact2.staffID = officelocations_tbl.contact2) 
    LEFT OUTER JOIN staff_tbl partner ON (partner.staffID = officelocations_tbl.partner) 
```

这只会拉取 staff_tbl.staffID = officelocations_tbl.contact1 的第一个关联。我不知道接下来要尝试什么。有没有人知道如何让它拉出所有 5 张桌子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:41:48.917

您只需要将您的 INNER JOIN 向下移动，例如从

```
INNER JOIN titles_tbl ON titles_tbl.titleID = staff_tbl.titleID 
LEFT OUTER JOIN state_tbl ON (officelocations_tbl.stateID = state_tbl.stateID) 
```

至

```
LEFT OUTER JOIN state_tbl ON (officelocations_tbl.stateID = state_tbl.stateID) 
INNER JOIN titles_tbl ON titles_tbl.titleID = staff_tbl.titleID 
```

在解析器到达 INNER JOIN 时，staff_tbl 还没有被连接，解析器不会“向前看”来查看它是否在以后被连接。因此，它立即以“没有这样的表/字段”的形式退出。

切换发生这种情况的顺序允许首先加入 taff_table，然后您可以在进一步的联接中使用它。

# c# - 两个 Umbraco 站点的单点登录

> ID：12558094
> 
> 赞同：1
> 
> 时间：2012-09-24T02:19:46.793
> 
> 标签：c#, asp.net, umbraco, single-sign-on

我有两个 Umbraco 安装在 EC2 上的同一台机器上运行。我想允许一个站点的用户使用他们的第一个成员身份在另一个站点上创建帐户，例如“使用 Facebook 登录”之类的东西。在我的情况下，“使用您在 X 上的帐户登录到 Y”。

我目前正在考虑两种方法来做到这一点：

1.  通过共享数据库 - 我从一个站点重定向到另一个站点的 ASPX，进行身份验证（如果需要），将所需数据保存在共享数据库中并重定向回第一个站点。它会起作用，但我不喜欢它，因为它看起来很丑！

2.  在环回 (10.0.0.127) 上创建一个 Web 服务，并使用它以一种方式发送身份验证信息，以及创建新帐户所需的信息。

两者都可以，IMO，但我认为可能有一种更 Umbraco 的方式来做到这一点，或者至少是一种更基于标准的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:10:01.353

我不确定您使用的是成员还是用户。

如果您正在使用会员，并且您可以**安全地**从其他会话中获取电子邮件，您可以通过以下方式自动登录

```
Member member = Member.GetMemberFromEmail(<email address>);
Member.AddMemberToCache(member); 
```

AddMemberToCache(member) 将在服务器端执行登录，并在客户端计算机上创建成员成员身份验证 cookie。

然后检查登录是否有效：

```
if (umbraco.library.IsLoggedIn())
{
...
} 
```

如果您正在共享数据库，则 GetMemberFromEmail 方法将在内部访问数据库时获取正确的成员：

![在此处输入图像描述](../Images/f7ddfaf7738695eb80f7705f6a4bc0ac.png)

# android - 具有大量视图优化的 Horizo ntalscrollview？

> ID：12558096
> 
> 赞同：0
> 
> 时间：2012-09-24T02:20:09.237
> 
> 标签：android, android-layout, android-widget

**我有一个看起来像脉冲[https://lh5.ggpht.com/JPrFfuPBYwxBKQYcqSxdmdBWsJPRfZAiYmnKboFBI3V8Zqq7GqTUG9R_sCui3KIL1g](https://lh5.ggpht.com/JPrFfuPBYwxBKQYcqSxdmdBWsJPRfZAiYmnKboFBI3V8Zqq7GqTUG9R_sCui3KIL1g)的应用程序，它每个部分有大约 8-10 个新闻部分，大约有 20-30 个故事，我目前的设计是每个部分都是一个水平滚动视图包含 20-30 个故事，这是我的 suedo main.xml：**

```
<LinearLayout>
 <HorizontalScrollView>
  <LinearLayout orientation:horizontal>
   <RelativeLayout id:singlenewsstory>
    <Imageview/>
      <TextView/>
   <RelativeLayout/>
   <RelativeLayout id:singlenewsstory>
    <Imageview/>
      <TextView/>
   <RelativeLayout/>
    etc...
  <LinearLAyout/>
 <horizontalScrollView>
 <HorizontalScrollView>
  <LinearLayout orientation:horizontal>
   <RelativeLayout id:singlenewsstory>
    <Imageview/>
      <TextView/>
  <RelativeLayout/>
  <RelativeLayout id:singlenewsstory>
    <Imageview/>
      <TextView/>
  <RelativeLayout/>
  etc...
 <LinearLAyout/>
<horizontalScrollView>
<HorizontalScrollView>
 <LinearLayout orientation:horizontal>
  <RelativeLayout id:singlenewsstory>
    <Imageview/>
      <TextView/>
  <RelativeLayout/>
  <RelativeLayout id:singlenewsstory>
    <Imageview/>
      <TextView/>
 <RelativeLayout/>
    etc...
 <LinearLAyout/>
  <horizontalScrollView>
    etc... 
```

当然，我会动态填充布局，但我主要担心的是，使用这种设计，活动中将有大约 200 个视图和大约 150 个图像，这可能会减慢应用程序的速度。我有几个问题：

1-每个滚动视图在屏幕范围内最多可以看到 3 个新闻故事，horizo​​ntalscrollview 是否通过不绘制超出范围的视图来优化这一点。？

2-Horizo​​​​ntalscrollview适合我在做什么还是我可以使用其他东西？

3-我将所有这些水平滚动视图放入一个垂直滚动视图中，但一个我水平滚动一个垂直滚动视图也滚动少量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:19:18.033

你可以用列表视图替换你的滚动视图吗？Listviews 只在屏幕上绘制什么，听起来你正在滚动浏览一组重复的视图。

# mysql - 从相似结果中过滤掉每组除一个结果之外的所有结果

> ID：12558099
> 
> 赞同：3
> 
> 时间：2012-09-24T02:20:40.927
> 
> 标签：mysql, sql

所以我有一张桌子，列出了他们提供的所有服务以及他们`prime_ministers`的服务。`year``party`

我需要 3 位信息；他们`name`，他们的第一`year`任和`party`最后一年的任期（一些换党）。

桌子看起来有点像这样

```
min_nr|pm_name      |party           |yr_comm  
---------------------------------------------- 
1      Barton E      Protectionist    1901  
.  
.  
.  
11     Hughes W M    Labour           1915  
12     Hughes W M    National Labour  1916  
13     Hughes W M    Nationalists     1917  
14     Hughes W M    Nationalists     1918  
.  
. 
```

我已经做了很多搜索，但我不知道如何输入这个来获得结果。

Woo先生在评论部分做到了。事实证明，我不了解多个 JOINS 以及 ON 中 AND 的正确用法。

```
SELECT a.pm_name, a.party, c.minYear
FROM  Table1 a 
      INNER JOIN
      (
          SELECT pm_name, MAX(yr_comm) maxYear
          FROM table1
          GROUP BY pm_name
      ) b ON a.pm_name = b.pm_name AND
             a.yr_comm = b.maxYear
      INNER JOIN
      (
        SELECT pm_name, MIN(yr_comm) minYear
        FROM table1
        GROUP BY  pm_name
      ) c ON a.pm_name = c.Pm_name 
```

*编辑，很多很多的编辑*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T02:23:35.677

尝试使用子查询来获取每位总理的最长年份。如果您想获取所有列，则此方法有效。

```
SELECT a.*
FROM tableName a INNER JOIN
        (
            SELECT ID, MAX(`year`) maxYear
            FROM tableName
            GROUP BY ID
        ) b ON a.ID = b.ID AND
                a.`Year` = b.maxYear 
```

`tableName`=> 将其更改为您的表的名称
`ID`=> 将其更改为主键
`Year`=> 将其更改为您的年份的列名。

但如果你只想得到`ID`总理的名字，他们的最后一年是哪一年。您可以直接执行此操作而无需子查询。

```
SELECT ID, MAX(`year`) finalYear
FROM tableName
GROUP BY ID 
```

***PS：如果这个答案仍然不清楚，请添加您的表的架构，示例记录和所需的结果，我们可以处理它。谢谢。***

**更新 1**

```
SELECT a.pm_name, a.party, c.minYear
FROM  Table1 a 
      INNER JOIN
      (
          SELECT pm_name, MAX(yr_comm) maxYear
          FROM table1
          GROUP BY pm_name
      ) b ON a.pm_name = b.pm_name AND
             a.yr_comm = b.maxYear
      INNER JOIN
      (
        SELECT pm_name, MIN(yr_comm) minYear
        FROM table1
        GROUP BY  pm_name
      ) c ON a.pm_name = c.Pm_name 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/e3e787/7)

# linux - Linux shell脚本 - 将尾值分配给变量？

> ID：12558100
> 
> 赞同：0
> 
> 时间：2012-09-24T02:21:13.183
> 
> 标签：linux, bash, shell, tail

我正在设置一个 shell 脚本，它使用以下命令读取日志文件的最后一行：

```
tail -1 "/path/to/gdscript.log" 
```

..这很好地呼应了脚本的最后一行。日志的最后一行指示该过程是成功还是失败，因此我尝试按如下方式运行快速回显（这是我失败的地方）：

```
if [ (tail -1 "/path/to/gdscript.log")  == "Process Complete" ]; then
echo "Data Transfer OK"
else
echo "Data Transfer Failed"
exit 1
fi 
```

..但使用上面的脚本我得到：

```
./gdscript.sh: line 14: syntax error near unexpected token `tail' 
```

知道的人可以告诉我如何格式化上面的 IF 门，以便我可以处理日志文件的最后一行吗？我是 shell 脚本的新手，非常感谢您的帮助。

谢谢，保罗·G

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T02:24:10.810

要获得您需要的命令的输出`$(cmd...)`。所以我认为你的意思是：

```
if [ "$(tail -1 '/path/to/gdscript.log')"  == "Process Complete" ]; then
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:29:41.800

你应该使用：
`if [ $(tail -1 /path/to/gdscript.log) == "Process Complete" ]; then`

# jquery - 单击时添加/删除特定类

> ID：12558108
> 
> 赞同：2
> 
> 时间：2012-09-24T02:22:09.400
> 
> 标签：jquery, css

我需要能够在两个锚点上设置一个特定的类。

到目前为止，这是我的代码：http: [//jsfiddle.net/MV4uM/15/](http://jsfiddle.net/MV4uM/15/)

如果您当前在单击“价格”时参考上面的 jsfiddle，则文本颜色将变为红色 - 与“字母顺序”相同。

但是，由于它们都有不同的关联图标，因此我需要插入一个特定的类，以便能够将普通图标更改为“已选择”以向用户显示已选择的图标。

特定类的原因是我可以在 CSS 中引用图像，因为图像将通过 CSS 通过背景图像呈现。

所以最终产品应该是：

当用户单击“价格”时，将在名为“价格选择”的锚点上插入一个类，因此我可以在 CSS 中引用它。至于“按字母顺序”，当用户再次单击名为“aplha-selected”的类时，我可以在 CSS 中引用它来更改背景图像以显示选定状态。

一次只能选择一个，因为它被用作“分类器”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:29:47.313

没有理由添加一个额外的类.. 只需将你的 css 建立在 ID 或其他静态类的基础上`sort-price`，`sort-alpha`然后你就可以设置如下样式：

```
.sort-alpha.selected { /* bg image or what have you */ }
.sort-price.selected { /* bg image or what have you */ } 
```

您现在可以通过使用 ID 来执行此操作，而无需更改任何内容：

```
#alpha.selected { /* bg image or what have you */ }
#price.selected { /* bg image or what have you */ } 
```

[工作小提琴](http://jsfiddle.net/9VF4f/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T02:31:13.410

试试这个：

```
$(".btnSort").click(function () {
    var cls = this.id + '-selected'
    $(".btnSort").attr('class', 'btnSort');
    $(this).addClass(cls + ' selected');
}); 
```

[http://jsfiddle.net/NLv5J/](http://jsfiddle.net/NLv5J/)

# java - 创建对象的数组列表

> ID：12558110
> 
> 赞同：0
> 
> 时间：2012-09-24T02:22:30.437
> 
> 标签：java

我有两个类 A 和 B。B 扩展了 A。现在，在 B 中，我可以创建 A 的对象的数组列表吗？

* * *

```
public class A {

      // class fields
      // class methods  
} 
```

* * *

```
import java.util.*;

public class B extends A {

List<Object> listname=new ArrayList<Object>();

A obj=new A();
listname.add(obj);
 } 
```

* * *

我可以创建一个对象数组列表吗？顺便说一句，上面的代码给出了错误！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T02:26:21.400

是的，我认为您没有理由不能创建对象 A 的 ArrayList。

但是你不能按照你正在做的方式去做，你必须用一种方法去做。您正在尝试在字段声明中执行此操作。

尝试在构造函数中添加它？

所以像

```
public B() {
A obj=new A();
listname.add(obj);
} 
```

或者也许我只是不明白你的问题，我完全错了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T02:27:06.407

该错误是因为您在方法*之外*有代码。试试这个：

```
public class B extends A {

    private static List<Object> listname = new ArrayList<Object>();

    public static void main(String[] args) {
        A obj = new A();
        listname.add(obj);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T02:29:04.950

如果您想在任何方法之外将项目添加到列表中，请使用实例初始化程序：

```
public class B extends A{
    private List<A> listOfA = new ArrayList<A>();

    {
         listOfA.add(new A());
    }

    public B(){
    }   
} 
```

# javascript - 删除输入字段中的属性

> ID：12558111
> 
> 赞同：1
> 
> 时间：2012-09-24T02:22:41.950
> 
> 标签：javascript, input, attributes, field

我想删除这个属性

```
class="validate[custom[card]] text-input" 
```

当取消选择包含值“CreditCard”的收音机时，在我名为“card”的输入字段上。这是我的单选框的脚本：

```
<script>
$(document).ready(function() {
    $("input[name$='sel']").click(function() {
        var test = $(this).val();

        $("div.desc").hide();
        $("#sel" + test).show();
    });
});
</script> 
```

和输入字段

```
<table><tr><td>

<p> Credit/Debit Card<lable  style="margin-right:1px;"></lable><input
type="radio" name="sel" id="sel"  value="CreditCard"
class="validate[required] radio-input" /> </p> 

<p> Paypal<input type="radio" id="sel"  name="sel" value="Paypal"   />
</p>

<p> Wire Transfer<input type="radio" id="sel"  name="sel"
value="WireTransfer"  /> </p>

<!====================================================================================> 
</td<td>

<!====================================================================================> 
<div id="selCreditCard" class="desc"> <label for="card"><strong>Card
Number<font color=red size=3> *</font></strong></label>
        <input name="card"   type="text"  id="card" value=""  style="width:85px;" class="validate[custom[card]] text-input" />
</div>
<!====================================================================================> 
<div id="selPaypal" class="desc" style="display:
none;margin-left:20px;margin-top:1px;margin-bottom:1px;"> paypal
</div>
<!====================================================================================> 
<div id="selWireTransfer" class="desc" style="display:
none;margin-left:20px;margin-top:0px;margin-bottom:-5px;"> wired
</div>
<!====================================================================================>
</td></tr></table> 
```

当用户取消选择收音机时，该属性将被返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:33:20.567

看来您正在使用 jQuery。您想删除类属性。

在jquery中有`removeClass()`方法。

所以，你会这样做：

```
$("input[name$='sel']").removeClass("validate text-input"); 
```

**注意：** * *validate[custom[card]]* * 是一个非常奇怪的类名称。我怀疑它不是一个类的有效名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:37:10.317

要使用 jQuery 删除属性，您可以使用该`removeAttr(attrName)`方法。要删除特定类，您可以使用`removeClass(className)`

发布 jquery 示例，因为您似乎正在使用 jquery。

```
$("#input").removeAttr("class") // removes the entire attr (all classes/values)
$("#input").removeClass("myClass") // removes just the class called myClass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T02:43:15.113

像这样的东西会起作用：

```
 var radio_select="";
        $(document).ready(function() {
        if(radio_select!="")
        {
        previous_radio_select_id=radio_select_id;
        if(radio_select=="CreditCard")
        {
        $('.validate[custom[card]] .text-input').removeClass('validate[custom[card]] text-input');
        }
        }
        radio_select=$('form input[type=radio]:checked').val();
radio_select_id=$('form input[type=radio]:checked').attr('id');
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T03:37:07.583

好的解决了我的问题

我用了

```
<script>
$(document).ready(function() {
    $("input[name$='sel']").click(function() {
        var test = $(this).val();

        $("div.desc").hide();
        $("#sel" + test).show();

     if(test != "CreditCard"){
         $("#card").prop('class','')
         }
     else{
              $("#card").prop('class','validate[custom[card]] text-input')
     }  
    });
});
</script> 
```

# jquery - 使用jQuery动态添加内容时如何自动触发滚动？

> ID：12558112
> 
> 赞同：0
> 
> 时间：2012-09-24T02:22:48.013
> 
> 标签：jquery, scroll, eventtrigger

当我们进行物理滚动时，我们可以通过拖动滚动条或使用鼠标滚轮来检测窗口或元素滚动`.on(scroll`。`.scroll(`

但它不能通过动态添加的内容**自动触发**。

这是一个例子：http: [//jsfiddle.net/vs5bR/](http://jsfiddle.net/vs5bR/)

有什么解决办法吗？我见过DOM检查方法，它检查DOM元素一直在变化，似乎不是一个好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:53:18.037

好的，我找到了解决方案，但它仅适用于 Firefox

[https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/MozScrolledAreaChanged?redirectlocale=en-US&redirectslug=DOM%2FDetecting_document_width_and_height_changes#Example](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/MozScrolledAreaChanged?redirectlocale=en-US&redirectslug=DOM%2FDetecting_document_width_and_height_changes#Example)

```
document.addEventListener("MozScrolledAreaChanged", function( event ) {
    // do something
}, false); 
```

我仍在等待跨浏览器解决方案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:27:15.287

您可能希望委托滚动事件。

看看这里的文档：http `.on()`: [//api.jquery.com/on/](http://api.jquery.com/on/)

简而言之..如果您将“选择器”参数传递给`.on()`函数，您的处理程序也将附加到您调用`.on()`.

这是以前使用[live()](http://api.jquery.com/live/)完成的，现在已弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T11:47:23.250

您可以自动滚动 div。这也会触发滚动事件。看看[你小提琴中的 javascript](http://jsfiddle.net/vs5bR/5/)

将以下内容添加到单击事件中。此示例使用 jQuery 选择器来获取元素，但您也可以在没有 jQuery 的情况下执行此操作

```
var mydiv = $('#content')[0];
mydiv.scrollTop = mydiv.scrollHeight; 
```

# twitter-bootstrap - sass 的引导程序不调整图标大小

> ID：12558114
> 
> 赞同：0
> 
> 时间：2012-09-24T02:23:22.210
> 
> 标签：twitter-bootstrap, ruby-on-rails-3.2, sass, less

我在项目中使用指南针和引导程序进行 sass。一切正常。我唯一不知道的是如何调整图标字形的大小。

例如，当 bootstrap 在其默认的 less 配置上运行时，我可以通过向`font-size`父元素添加 css 方法来简单地增加图标大小。它运行良好，但是当我切换到 bootstrap for sass 时，图标失去了颜色和字体大小。

任何想法可能出了什么问题？Boostrap 已正确导入到我的`application.css.sass`文件中。

```
@import jquery.ui.all
@import variables.css.scss
@import bootstrap
@import sass-rules.css.scss
@import fonts.css.scss
@import general.css.scss
@import containers.css.scss
@import jquery.Jcrop.min
@import header.css.scss
@import side_bar.css.scss
@import modal.css.scss
@import home.css.scss
@import users.css.scss
@import items.css.scss
@import messages.css.scss
@import notifications.css.scss
@import me.css.scss
@import friends.css.scss
@import discover.css.scss 
```

**更新**

Gemfile 资产

```
group :assets do
  gem 'sass-rails', '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platform => :ruby
  gem 'twitter-bootstrap-rails'
  gem 'bootstrap-sass', '~> 2.1.0.0'

  gem 'uglifier', '>= 1.0.3'

end
gem 'jquery-rails'
gem 'jquery-ui-rails'
gem 'compass' 
```

[将此](https://github.com/thomas-mcdonald/bootstrap-sass)引导程序用于sass gem。我没有对图标使用任何混合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:12:07.430

我在那个项目中没有看到任何东西表明它正在使用类似[FontAwesome](http://fortawesome.github.com/Font-Awesome/)的东西。我看到的唯一图标来自[sprite map](https://github.com/thomas-mcdonald/bootstrap-sass/blob/master/vendor/assets/stylesheets/bootstrap/_sprites.scss)，显然这些图标不可调整大小。FontAwesome 确实提供了一个包含所有图标的 Sass 文件：

[https://github.com/FortAwesome/Font-Awesome/blob/master/sass/font-awesome.scss](https://github.com/FortAwesome/Font-Awesome/blob/master/sass/font-awesome.scss)

# javascript - 替换for循环中的id属性

> ID：12558116
> 
> 赞同：4
> 
> 时间：2012-09-24T02:23:33.300
> 
> 标签：javascript, jquery, clone

我对此提出了另一个问题，并得到了答案，但仍然设法搞砸了。我有一个 for 循环，我想在我的 for 循环中克隆一个模板。我希望第一次通过循环将每个 id 替换为 id + 0 。因此，带有 id 的文本框`tFirstName`将是`tFirstName0`并且 id`tLastName`将是`tLastName0`等等......然后对于下一个 clone ，然后下一次通过循环它将是 tFirstName1 ， tLastName1 等......

这段代码的问题是`i`为每个文本框添加一个，所以在第一个模板中，id 是`tFirstName0`, `tLastName1`, ect..

我正在寻找 - 如果有人建议`i`在 for 循环中保持统一，然后增加，然后在下一个循环中保持统一

```
 var NumofClones = (4 * 1);
            for (i = 0; i < NumofClones; i++) {
                var newrow = $('._template').clone().removeClass('_template');
                newrow.find('input[type=text]').attr('id', function (i, oldID) {
                    return oldID + i
                });

                $('.placenewrows').append(newrow);
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T02:28:47.870

的回调函数中指的是参数`i`，而不是for循环中的，将回调函数的参数更改为其他一些。`.attr()``i``i``i`

```
 var NumofClones = (4 * 1);
 for (var i = 0; i < NumofClones; i++) {
     var newrow = $('._template').clone().removeClass('_template');
     newrow.find('input[type=text]').attr('id', function (index, oldID) {
         return oldID + i;
     });
     $('.placenewrows').append(newrow);
 } 
```

# php - 我正在尝试从 CodeIgniter 中的 db 获取数据但出现错误

> ID：12558128
> 
> 赞同：0
> 
> 时间：2012-09-24T02:25:54.990
> 
> 标签：php, codeigniter, codeigniter-2

这是我的代码。

控制器功能

```
function index()
{
      $data['message'] = (validation_errors()) ? validation_errors() : $this->session->flashdata('message');

      $this->load->model('customers_model');
      $data['rows'] = $this->customers_model->getAll();

      $meta['page_title'] = 'Customers';
      $data['page_title'] = 'Customers';
      $this->load->view('../header', $meta);
      $this->load->view('content', $data);
      $this->load->view('../footer');
} 
```

模型功能

```
public function getAll() 
{
        $q = $this->db->get('customers');

        if($q->num_rows() > 0) {
            foreach ($q->result() as $row) {
                $data[] = $row;
            }

            return $data;
        }
} 
```

查看文件

```
<table cellpadding=0 cellspacing=10 width="100%">
    <thead>
        <tr>
            <th>Name</th>
            <th>Company</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Address</th>
            <th>City</th>
            <th>Code</th>
            <th>State</th>
            <th>Country</th>
        </tr>
    </thead>
    <tbody>
        <?php foreach ($data as $row):?>
            <tr>
                <td><?php echo $row->name; ?></td>
                <td><?php echo $row->company; ?></td>
                <td><?php echo $row->phone; ?></td>
                <td><?php echo $row->email; ?></td>
                <td><?php echo $row->address; ?></td>
                <td><?php echo $row->city; ?></td>
                <td><?php echo $row->postal_code; ?></td>
                <td><?php echo $row->state; ?></td>
                <td><?php echo $row->country; ?></td>
            </tr>
        <?php endforeach;?>
    </tbody>
</table> 
```

我收到错误

```
A PHP Error was encountered
Severity: Notice
Message: Undefined variable: data
Filename: views/content.php

A PHP Error was encountered
Severity: Warning
Message: Invalid argument supplied for foreach()
Filename: views/content.php 
```

我第一次使用 CI，不知道我做错了什么。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:48:15.480

您将模型返回的数据分配到关联数组中，键为`rows`。因此，在视图中变量的名称`$rows`不是`$data`。

# uml - 在 1 个序列图上显示 2 个参与者之间的交互

> ID：12558133
> 
> 赞同：1
> 
> 时间：2012-09-24T02:27:50.807
> 
> 标签：uml, sequence-diagram

我正在努力了解如何在序列图上显示这一点。

场景是，我必须展示系统如何决定应该首先处理哪个预订（对于图书馆书籍）。

有 2 个可能的演员，一个普通会员和一个忠实会员。

忠实会员比普通会员具有更高的优先级，因此每当他们预订一本书时，他们都会排在所有普通会员的前面。如果他们具有相同的成员类型，那么最初/较早预订该书的人具有更高的优先级。

任何提示或示例都会对我很有帮助。

我想过使用 ALT 框架？或者我应该只在 2 个不同的序列图中为每个参与者展示一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:22:48.410

您不能在一个序列图中显示这一点。使用两张图来展示交互，一张使用普通会员，一张使用忠诚会员。在忠诚会员的图表中显示，会员在预订图书时会跳到最前面。

# javascript - 将对象原型函数调用传递给输入按键检测事件处理程序

> ID：12558148
> 
> 赞同：1
> 
> 时间：2012-09-24T02:30:20.847
> 
> 标签：javascript, javascript-events

我试图在输入按键检测事件处理程序中传递对象原型函数调用，但不知道如何去做。任何帮助将不胜感激代码如下：

```
function foo{};

foo.prototype.shout = function() {
  alert(shout);
}

foo.prototype.someOtherFunction = function (event) {
  var e = event || window.event,
      code = e.charCode || e.keyCode;

    if(code === 38) {
       foo.shout// This is what doesn't work - sorry for the confusion
    }
}

foo.prototype.applyKeypress = function (_input) {
  var self = this;
      _input.onkeypress = foo.someOtherFunction; // someOtherFunction applied here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T02:38:03.270

正如我的帖子前几秒所述 - 你没有创建对象

[http://jsfiddle.net/Smzuu/2/](http://jsfiddle.net/Smzuu/2/)

我稍微更改了您的代码，以便它可以运行。我希望您在编写此示例代码时错过了一些小事情

```
function foo(){};

foo.prototype.shout = function() {
  alert("hello"); //alert(shout); // shout was not defined.
}

var sampleInput = document.getElementById('sampleInputField');

sampleInput.onkeypress = function(e) {
    if(e.charCode === 97) { // A pressed
      new foo().shout(); 
    }
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T02:33:04.657

不，它不起作用，因为您还没有创建对象：

```
function foo(){};

foo.prototype.shout = function() {
  alert(shout);
}

var o = new foo();

var sampleInput = document.getElementById('sampleInputField');

sampleInput.onkeypress = function(e) {
  if(code === 38) { //up arrow press
    o.shout() //now it works because it's an object, not a constructor
  }
} 
```

# jquery - Backbone - 视图元素连续触发 Mouseenter/Mouseleave

> ID：12558150
> 
> 赞同：4
> 
> 时间：2012-09-24T02:30:43.587
> 
> 标签：jquery, backbone.js, bind, mouseenter, mouseleave

对不起所有的代码：S

HomeIconView 中元素上的 mouseenter/mouseleave 绑定不断触发。Firebug 在 mouseenter/mouseleave 输出中的控制台输出行数不足。我只是想实现翻转效果。我必须假设这是我使用主干的方式。我这周才开始使用。到目前为止，我只在 Firefox 中进行了测试。

当“HomeView”视图被渲染时，“HomeIconView”视图被动态插入到“HomeView”视图中。调用 HomeIconView 的“事件”没有问题，问题是它们不断被调用！显然，鼠标实际上是进入还是离开并不重要。Backbone，在最初的 mouseenter 之后直到最后的 mouseleave，即使没有鼠标移动，也会不断地迭代 renderRollOver() 和 renderRollOut()。:(

我花了几天时间寻找解决方案。我能找到的只是人们无法绑定事件的线程，而不是人们正在经历活动绑定函数调用的线程。

一般来说，我愿意接受任何更好的编码实践的建议，但特别是，请帮助我摆脱对这个事件绑定鼠标进入/离开事件的痛苦。

再说一遍，对所有代码都很抱歉，我不想留下任何歧义。

```
...

window.HomeIconView = Backbone.View.extend ({

model: new HomeIconModel,

template: _.template([
                '<a href="#">',
                    '<div class="homeIcon" id="homeIcon-<%= id %>">',
                        '<img src="<%= homeIconSrc %>">',
                    '</div>',
                '</a>'
                ].join('')),

events: { 'mouseenter': 'renderRollOver', 'mouseleave': 'renderRollOut' },

initialize: function(md) {

    _.bindAll(this, 'render');
    this.id = 'Icon-' + md.c.id.toString();
    this.model.save(md.c);
},

render: function() {
    return this.$el.html(this.template(this.model.toJSON()));
},

renderRollOver: function() {

    console.log('rollover');
        $('#homeRollOver, #homeRollOver2').css({ 'display': 'block', 'opacity': 0.125 });
        $('#home' + this.id).stop().animate( { opacity: 1 }, 1000);
        var elOffset = $('#home' + this.id).offset();
        var elOffsetL = elOffset.left - 
                        (
                            (
                                parseInt($('#homeRollOver').css('width')) - 
                                parseInt($('#home' + this.id).css('width'))
                            ) / 2
                        );
        var elOffsetT = elOffset.top -
                        (
                            (
                                parseInt($('#homeRollOver').css('height')) - 
                                parseInt($('#home' + this.id).css('height'))
                            ) / 2
                        );
        $('#homeRollOver, #homeRollOver2').css(
            { 'marginLeft': elOffsetL, 'marginTop': elOffsetT }
        );
},

renderRollOut: function() {
    console.log('rollout');
    $('#homeRollOver, #homeRollOver2').css('display', 'none');
    $('#home' + this.id).stop().animate({ opacity: 0.125 }, 1000 );
}
});

window.HomeView = Backbone.View.extend({

model: new PreloadHomeImages,

template: _.template([
            '<div id="homeIconWrapper"></div>',
            '<div id="homeRollOver"></div>',
            '<div id="homeRollOver2"></div>'
            ].join('')),

initialize: function() {
    _PAGE_H = $(document).height();
    _PAGE_W = $(document).width();
    this.preload();
    this.render();
},

preload: function() {
    var i = 0;
    _.each(this.model.get('icons'), function(icon) {
        var tmpimg = $('<img/>');
        tmpimg.src = icon.image;
        i++;
    });
    this.$el.css('paddingTop', (_PAGE_H - 180) / 2) ;
    $('#wrapper').css('height', _PAGE_H - 50);
},

render: function() {
    this.$el.html(this.template);
    var i = 0;
    _.each(this.model.get('icons'), function(icon) {
        var iconView = new HomeIconView({
                                model: new HomeIconModel, 
                                c: { 'id': i, 'homeIconSrc': icon.image }
                            });
        $('#homeIconWrapper').append(iconView.render);
        i++;
    });
    return this;
}
}); 
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:14:46.553

HomeIconView 在实例化时需要一个有效的 ID。

后来在尝试实现翻转时，我遇到了 mu_is_too_short 描述的问题，因为元素的 z-index 导致 mouseenter/leave 也不断触发。两个答案都是正确的。再次感谢@mu_is_too_short。

例子;

[http://3d.rededitor.net/site2/](http://3d.rededitor.net/site2/)

# ruby-on-rails-3 - 多模型表单的rails中的麻烦fields_for方法

> ID：12558151
> 
> 赞同：0
> 
> 时间：2012-09-24T02:30:44.570
> 
> 标签：ruby-on-rails-3, forms

不知道我在这里做错了什么。但我正在尝试创建一个包含多个模型的表单。我已经阅读了它，它看起来很简单，但是我无法让子模型的字段在表单上呈现。据我了解解决方案，我必须将以下内容放入模型中

```
class Message < ActiveRecord::Base
  #parent model
  attr_accessible :duns, :ord
  has_many :po_recommits
  accepts_nested_attributes_for :po_recommits
end

class PoRecommit < ActiveRecord::Base
  #child model
  attr_accessible :comment, :detail_reason_code, :pid, :po, :qty, 
  belongs_to :message, :dependent => :destroy
end 
```

并将以下内容放入父控制器以创建占位符

```
def new
  @message = Message.new
  5.times { @message.po_recommits.build }
end 
```

最后将 fields_for 助手添加到视图中

```
<%= form_for @message do |f| %>
  <%= f.label :org %><%= f.text_field :org %>

  <% f.fields_for :po_recommits do |builder| %>
    <%= builder.label :po %><%= builder.text_field :po %>
  <% end %>

<%= f.submit %>

<% end %> 
```

此代码不会引发任何错误，但不会呈现`:po`表单上的字段。我认为这是因为该块正在执行 0 次。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:44:41.597

我认为 <% f.fields_for :po_recommits 做 |builder| %> 应该是 <%= f.fields_for :po_recommits do |builder| %>

# c++ - 哈希图和向量很慢

> ID：12558153
> 
> 赞同：1
> 
> 时间：2012-09-24T02:30:52.883
> 
> 标签：c++, vector, hashmap

我有一个要处理的大型数据集（1.2 亿条记录）。我的程序目前正在使用 Google 密集哈希，但仍然需要 29 小时才能完成，并且使用了 64 GiB 服务器中的 8.5 GiB 内存。

请问您有什么建议吗？我是 C++ 新手。如果我想用更快的东西替换向量，那会是什么？

```
#include <string>
#include <algorithm>
#include <tr1/unordered_map>
#include <iterator>
#include <sstream>
#include <cstring>
#include <iomanip>
#include <fstream>
#include <vector>
#include <iterator>
#include <time.h>
#include <iostream>
#include <iostream>
#include <sparsehash/dense_hash_map>
#include <stdio.h>
#include <string.h>
using google::dense_hash_map;  
using std::tr1::hash; 
using namespace std;
using std::string;

bool ProcessInput(const string& inChar, vector<string> *invector);
void Processmax( dense_hash_map < string, int>* ins, vector<int> *inc, vector<string>      *outs, vector<int> *outc);

int main()
{
time_t start, stop;
time(&start);
ofstream finall;
vector<int> usrsc,artc,tmusrc,tmart2c,atrsc,tmartc;
vector<string> tmart,tmusr,tmart2;
vector< vector<string> > usrlist,artlist;
string x1,x2;
ifstream ifTraceFile;
bool f,f2;
dense_hash_map < string, int > a;
dense_hash_map < string, int > u;
a.set_empty_key(string());
u.set_empty_key(string());

int kl=0;
ifTraceFile.open ("data2.tr", std::ifstream::in);
while (ifTraceFile.good ())
{
    ifTraceFile>>x1>> x2;

    if (kl==0)
    {
        a.insert(make_pair(x1,0));
        u.insert(make_pair(x2,0));
        usrlist.push_back((vector<string>()));
        usrlist[0].push_back(x1);
        artlist.push_back((vector<string>()));
        artlist[0].push_back(x2);
        usrsc.push_back(1);
        artc.push_back(1);
        atrsc.push_back(1);

    }
    else
    {

        dense_hash_map < string, int>::iterator itn;
        itn=a.find(x1);
        if (itn == a.end())
        {
            a.insert(make_pair(x1,(artlist.size())));
            artlist.push_back((vector<string>()));
            artlist[(artlist.size()-1)].push_back(x2);
            artc.push_back(1);
            atrsc.push_back(1);
        }
        else
        {
            f=ProcessInput(x2, &artlist[itn->second]);
            if(f)
            {
                artlist[itn->second].push_back(x2);
                atrsc[itn->second]+=1;
                artc[itn->second]+=1;
            }
            else
                atrsc[itn->second]+=1;

        }

         dense_hash_map < string, int>::iterator its;
        its=u.find(x2);
        if (its == u.end())
        {
            u.insert(make_pair(x2,(usrlist.size())));
            usrlist.push_back((vector<string>()));
            usrlist[(usrlist.size()-1)].push_back(x1);
            usrsc.push_back(1);

        }
        else
        {
            f2=ProcessInput(x1, &usrlist[its->second]);

            if(f2)
            {
                usrlist[its->second].push_back(x1);
                usrsc[its->second]+=1;

            }

        }

    }

    kl++;
}
ifTraceFile.close();
Processmax(&a, &artc, &tmart, &tmartc);
Processmax(&a, &atrsc, &tmart2 ,&tmart2c);
Processmax(&u, &usrsc ,&tmusr, &tmusrc);
int width=15;
cout <<"article has Max. review by users Top 1: "<<tmart.at(0)<<'\t'<<tmartc.at(0)<<endl;
cout <<"article has Max. review by users Top 2: "<<tmart.at(1)<<'\t'<<tmartc.at(1)<<endl;
cout <<"article has Max. review by users Top 3: "<<tmart.at(2)<<'\t'<<tmartc.at(2)<<endl;
cout <<endl;
cout <<"article has Max. review Top 1: "<<tmart2.at(0)<<'\t'<<tmart2c.at(0)<<endl;
cout <<"article has Max. review Top 2: "<<tmart2.at(1)<<'\t'<<tmart2c.at(1)<<endl;
cout <<"article has Max. review Top 3: "<<tmart2.at(2)<<'\t'<<tmart2c.at(2)<<endl;
cout <<endl;
cout <<"user who edited most articles Top 1: "<<tmusr.at(0)<<'\t'<<tmusrc.at(0)<<endl;
cout <<"user who edited most articles Top 2: "<<tmusr.at(1)<<'\t'<<tmusrc.at(1)<<endl;
cout <<"user who edited most articles Top 3: "<<tmusr.at(2)<<'\t'<<tmusrc.at(2)<<endl;

finall.open ("results");
finall << "Q1 results:"<<endl;;
finall <<"article has Max. review Top 1: "<<setw(width)<<tmart2.at(0)<<setw(width)<<tmart2c.at(0)<<endl;
finall <<"article has Max. review Top 2: "<<setw(width)<<tmart2.at(1)<<setw(width)<<tmart2c.at(1)<<endl;
finall <<"article has Max. review Top 3: "<<setw(width)<<tmart2.at(2)<<setw(width)<<tmart2c.at(2)<<endl;
finall<<endl;

finall<<"article has Max. review by users Top 1: "<<setw(width)<<tmart.at(0)<<setw(width)<<tmartc.at(0)<<endl;
finall <<"article has Max. review by users Top 2: "<<setw(width)<<tmart.at(1)<<setw(width)<<tmartc.at(1)<<endl;
finall <<"article has Max. review by users Top 3: "<<setw(width)<<tmart.at(2)<<setw(width)<<tmartc.at(2)<<endl;
finall<<endl;
finall <<"user edited most articles Top 1: "<<setw(width)<<tmusr.at(0)<<setw(width-5)<<tmusrc.at(0)<<endl;
finall <<"user edited most articles Top 2: "<<setw(width)<<tmusr.at(1)<<setw(width-5)<<tmusrc.at(1)<<endl;
finall <<"user edited most articles Top 3: "<<setw(width)<<tmusr.at(2)<<setw(width-5)<<tmusrc.at(2)<<endl;
finall.close ();
time(&stop);
cout<<"Finished in about "<< difftime(stop, start)<< " seconds"<<endl;

return 0;
}

void Processmax(  dense_hash_map< string,int >* ins, vector<int> *inc, vector<string> *outs, vector<int> *outc)
{
int index=0;
int l=0;
 dense_hash_map < string, int>:: iterator iti;
string value;
while(l!=4)
{
    vector<int>::iterator it=max_element(inc->begin(), inc->end());
    index = distance(inc->begin(), it);

    for (iti = ins->begin(); iti != ins->end(); ++iti)
    {
        if (iti->second == index)
        {
            value = iti->first;
            break;
        }
    }
    outs->push_back(value);
    outc->push_back(inc->at(index));
    inc->at(index)=0;
    l++;
  }
}

bool ProcessInput(const string& inChar, vector<string> *invector)
{
 bool index=true;
 vector<string>::iterator it=find(invector->begin(), invector->end(), inChar);
 if (it!=invector->end())
    index=false;

 return index;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:42:38.610

从您打印的数据来看，您正试图仅列出多个类别中的前三名左右的用户。无需存储所有数据，您只需存储每个类别中当前排名前三的用户。当新记录到达时，您确定它是否替换任何类别中的前三项中的任何一项，如果是，则安排新数据替换适当的旧数据。如果新记录“无趣”，则忽略它。将感兴趣的用户数量作为计算的参数；求解前 N 的一般情况，然后将 N 设置为 3。

这会将您的存储空间限制为最大几 KiB。您还需要处理更小的数据结构，因此它们的速度会大大提高。您的处理时间应该下降到读取该大小文件所需的时间，而不是 29 小时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T03:19:17.260

您可能需要执行几个简单的步骤：

1.  获取数据的子集（比如 1/100 或 1/1000）
2.  通过分析器下的示例数据运行您的程序
3.  找到瓶颈并优化它

一些阅读链接：

[http://www.sgi.com/tech/stl/complexity.html](http://www.sgi.com/tech/stl/complexity.html)

[快速而肮脏的方式来分析你的代码](https://stackoverflow.com/questions/61278/quick-and-dirty-way-to-profile-your-code)

[STL 中的向量与列表](https://stackoverflow.com/questions/2209224/vector-vs-list-in-stl)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T01:06:36.293

感谢您的帮助。我现在可以在 10 分钟内得到结果。只要！！！！！！！！！

```
 unordered_map < string, unordered_set <string> > a;
  unordered_map < string, unordered_set <string> > u;
  unordered_map < string, int > artc,usrc,artac;
    .....
    ....
   if (true)
    {  
        a[x1].insert(x2);
       u[x2].insert(x1);
        artc[x1]=a[x1].size();
        usrc[x2]=u[x2].size();
        artac[x1]++;
    } 
```

unordered_map 比 google dense hash 快 100%，它占用的 RAM 比 Google dense hash 少 30%。

# php - 我的 php/cakephp 语法有什么问题？

> ID：12558154
> 
> 赞同：0
> 
> 时间：2012-09-24T02:30:55.520
> 
> 标签：php, validation, cakephp, syntax

虽然我在 cakephp 中这样做，但我相信我的代码中有一个可怕的 php-syntax-newbie-mistake，但我无法破译正确的方法。

错误在于：

```
'logo' => $validateArray 
```

显然我不知道如何写那行，而不重复上面的文字。

```
var $validateArray = array(
    'rule1' => array(
        'rule' => 'isCompletedUpload',
        'message' => 'File was not uploaded '  
    ),
    'written' => array( 
        'rule' => 'isSuccessfulWrite', 
        'message' => 'blah'
     )
);
public $validate = array(
    'logo' => $validateArray
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:37:35.667

类属性的初始化必须是**常量**，不能包含变量。

您需要在构造函数中对其进行初始化。

```
public $validate;

public function __construct() {
  $this->validate = array(
    'logo' => $this->validateArray;
  );
} 
```

# html - firefox特定的图片和文字对齐问题

> ID：12558155
> 
> 赞同：0
> 
> 时间：2012-09-24T02:31:06.050
> 
> 标签：html, css

我与这个网站没有任何关系。我确实认为这是一项非常好的工作，但我对*firefox*`chapter-nav`中链接的一个对齐问题很好奇。

 *例如，在[此页面上，带有](http://reports.originenergy.com.au/shareholder/information-and-downloads/#investorcalendar)*chrome*和*ie7*的 div`class="fork chapter-nav"`看起来正确，但在*Firefox 7*中，文本与图像的底部对齐，而不是中心。

 ***导致对齐问题的*Firefox*有什么区别？是否会有一个纯 CSS 修复（即不更改 html 标记）？

![在此处输入图像描述](../Images/f9b9f2f2a463c9612546eb312224a197.png)****

# xml - Grails 渲染 XML 丢失 xml 格式和标签

> ID：12558156
> 
> 赞同：0
> 
> 时间：2012-09-24T02:31:11.007
> 
> 标签：xml, grails

我请求 Google Places API 并希望获得 XML 格式的响应。我这样做：

```
def http = new HttpURLClient( )
def resp = http.request(url:uRL)
render(text: resp.getData(), encoding:"UTF-8", contentType:"text/xml") 
```

它返回数据，但没有 XML 标记。所以将纯数据作为字符串。我 100% 确定，我从 Google 获得了 XML 格式的数据。谷歌的响应看起来像（这显示了浏览器）：

```
<PlaceSearchResponse>
<status>OK</status>
<result>
<name>Beth-El Synagogue</name>
<vicinity>Elizabeth Av & Downing, St. John's</vicinity>
<type>synagogue</type>
<type>place_of_worship</type>
<type>establishment</type>
<geometry>
<location>
<lat>47.5799640</lat>
<lng>-52.7172920</lng>
</location>
</geometry>
<icon>
http://maps.gstatic.com/mapfiles/place_api/icons/worship_jewish-71.png
</icon>
<reference>
CnRwAAAAH3oJJ3PaJPk5kesLiioompBTCh2NUBDxAh-wUKwZkFeolqoDCOEoOTYe9UpUdhVhkqMoL9mPPd-C0PuIvkyqBwfvdli1zHvaaEfJklQBHd-haHfMceF4vlPxV5r9kaSyWTwOAGSJWQhT6pkXmmoMCBIQbP457ZvQWJsX0JIEc-DnORoU_NRRZIlZN08azb3UL_X-xpqS6N4
</reference>
<id>b61e059f04e643fce7f4750a42c686901096bab3</id>
</result>
<html_attribution>
Listings by <a href="http://www.yellowpages.ca/">YellowPages.ca</a>
</html_attribution>
</PlaceSearchResponse> 
```

我只想再次呈现响应。那么，上面的代码有什么问题呢？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:29:49.943

首先将 XML 解析为文本：

```
import groovy.xml.XmlUtil
....
def http = new HttpURLClient( )
def resp = http.request(url:uRL)
def xmlAsText = XmlUtil.serialize(resp.data)
render(text: xmlAsText, encoding:"UTF-8", contentType:"text/xml") 
```

# c# - Microsoft Project 和安装选项

> ID：12558161
> 
> 赞同：1
> 
> 时间：2012-09-24T02:32:17.417
> 
> 标签：c#, installation

我在 C#.NET（服务器、客户端、服务）中有 3 个解决方案项目。我能够为每个解决方案单独创建设置。

但是我需要通过提供在这三个设置中进行选择的选项（例如：单选按钮）来为所有三个设置构建一个设置。用户选择的任何选项都应安装在他们的系统中。

# haskell - 如何更改emacs中haskell模式的默认工作目录

> ID：12558174
> 
> 赞同：1
> 
> 时间：2012-09-24T02:34:57.623
> 
> 标签：haskell, emacs, haskell-mode

我试图让它在我通过 Cl 加载模块时更新haskell模式的默认工作目录。目前，工作目录始终是我的主目录。这使得无法加载自定义模块并使用 emacs 运行它们。相反，我必须从命令行启动它们，这并不可怕，但它更耗时且有点烦人。

使用 Cl 加载模块时如何更新工作目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:51:41.813

如果您正在使用，`haskell-mode`那么我认为您可以将密钥设置为`haskell-process-load-file`. [您可以在此处](https://github.com/haskell/haskell-mode/blob/master/examples/init.el)查看示例

# python - 是否有不同的方法可以在 python 中检查双端队列为空

> ID：12558176
> 
> 赞同：2
> 
> 时间：2012-09-24T02:35:25.403
> 
> 标签：python, deque

它们是一样的吗？？？？

```
while len(deque)>0:
    deque.popleft()

while deque:
   deque.popleft() 
```

所以基本上这两个条件循环可以避免从空队列中弹出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T02:46:27.897

它们是相同的，但 PEP 8 更喜欢第二个版本。我不相信它总是更容易阅读，所以请使用你自己的判断。

[http://www.python.org/dev/peps/pep-0008/#programming-recommendations](http://www.python.org/dev/peps/pep-0008/#programming-recommendations)

> 对于序列（字符串、列表、元组），使用空序列为假的事实。
> 
> ```
> Yes: if not seq:
>      if seq:
> 
> No: if len(seq)
>     if not len(seq) 
> ```

# javascript - JSON的奇怪结构

> ID：12558180
> 
> 赞同：0
> 
> 时间：2012-09-24T02:35:42.547
> 
> 标签：javascript, json, traversal

好吧，我从外部服务器接收到这种 JSON 数据

```
{'mydata':[{'id':1012, 'username':'foo', 'password':'bar'}]} 
```

现在我的问题是我无法遍历`id`现在如何遍历它？我认为额外`[]`的问题是我用这个检查的。[http://jsfiddle.net/laupkram/ceL2C/](http://jsfiddle.net/laupkram/ceL2C/)

现在有没有可能我仍然可以遍历这种 JSON 结构中的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:39:12.213

由于数据位于数组中，因此您只需像引用数组中的数据一样引用它：

```
alert(window.data.mydata[0].id); 
```

将您的代码更改为该代码，它将正常工作。

[**演示**](http://jsfiddle.net/ceL2C/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:44:18.000

# c# - C# 每 5 秒从 200 台客户端 PC ping 服务器（在本地网络中）是否安全？

> ID：12558181
> 
> 赞同：3
> 
> 时间：2012-09-24T02:35:44.753
> 
> 标签：c#, ping, sendasync

我正在用 C# 构建一个应用程序（客户端），它使用 Ping.SendAsync(host, 3000, null) 对本地网络中的服务器执行 ping 操作，以验证连接性并发送数据。该应用程序将安装在大约 200 台 PC 上。

问题是：

整天从这 200 台 PC 中每 5 秒 ping 一次服务器是否安全？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T03:07:13.310

您应该已经知道这个问题的答案 -*这取决于*。

假设您平均每秒发送 40 个请求。Web 服务器每秒可以处理 40 个请求吗？它可能可以，但您没有提供服务器正在做什么的任何细节。

对于接收请求并返回简单值的服务器，毫秒数很可能是个位数。如果服务器需要读取或写入磁盘，或连接到另一台服务器（例如数据库），那么毫秒数可能是两位数。如果连接到远程或多个服务器，那么它甚至可能需要三位数 - 超过 100 毫秒。

如果服务器需要处理一些数字并计算一些东西，那么就无法猜测 - 据我所知，这可能需要一天的时间。

假设服务器不运行任何其他需要专用资源的关键系统，您对这里的两件事真正感兴趣

*   完成一项手术需要多长时间？它显然需要在不到 5 秒的时间内完成，因为那时服务器会想要发出另一个请求，他们只会排队导致混乱。
*   服务器可以处理多少并发请求？确保您没有运行单线程服务器；您希望能够同时处理多个请求。这将再次确保请求不会排队。

你需要平均每秒 40 次，这真的不是很多 - 假设没有太多的处理发生。但是知道这是否是一个“好主意”的方法是简单地测试一下。您应该使用测试框架或编写测试工具——这非常简单，只需编写尽可能快地访问服务器的应用程序。您将需要从多台客户端机器上运行测试，否则您将无法确定单台客户端机器不是瓶颈。

这听起来可能很乏味，但它既必要又具有教育意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:48:26.773

每天只有大约 110MB... 我不会为此感到压力。

您确实提到了发送数据...确保您的数据包大小合理（您要避免自己进行 DDOS）。

但是，如果它在互联网上运行，我可能会更加小心。

# c++ - FFMPEG 无法显示视频的持续时间

> ID：12558183
> 
> 赞同：9
> 
> 时间：2012-09-24T02:35:53.840
> 
> 标签：c++, c, ffmpeg, video-processing, libavcodec

我正在尝试使用 ffmpeg 从视频文件中捕获帧，但我什至无法获得视频的持续时间。每次当我尝试访问它时，`pFormatCtx->duration` 我都会得到 0。我知道指针已初始化并包含正确的持续时间，因为如果我使用 `av_dump_format(pFormatCtx, 0, videoName, 0);`，那么我实际上会获得持续时间数据以及有关视频的其他信息。这是我使用时得到的`av_dump_format(pFormatCtx, 0, videoName, 0);`：

```
Input #0, avi, from 'futurama.avi':
Duration: 00:21:36.28, start: 0.000000, bitrate: 1135 kb/s
Stream #0.0: Video: mpeg4 (Advanced Simple Profile), yuv420p, 512x384
[PAR 1:1 DAR 4:3], 25 tbr, 25 tbn, 25 tbc
Stream #0.1: Audio: ac3, 48000 Hz, stereo, s16, 192 kb/s 
```

我不明白为什么`av_dump_format`可以显示持续时间而我不能。我检查了函数定义，显示持续时间，函数也使用`pFormatCtx->duration`. 当我调用它们时，不仅仅是持续时间其他成员变量也没有显示正确的数据`main.cpp`

这是我的代码：

```
extern "C" {
    #include<libavcodec/avcodec.h>
    #include<libavformat/avformat.h>
    #include<libswscale/swscale.h>
}

int main(int argc, char *argv[]) {
    AVFormatContext *pFormatCtx = NULL;

    const char videoName[] = "futurama.avi";

    // Register all formats and codecs.
    av_register_all();
    cout << "Opening the video file";
    // Open video file
    int ret = avformat_open_input(&pFormatCtx, videoName, NULL, NULL) != 0;
    if (ret != 0) {
        cout << "Couldn't open the video file." << ret ;
        return -1;
    }
    if(avformat_find_stream_info(pFormatCtx, 0) < 0) {
        cout << "problem with stream info";
        return -1;
    }

    av_dump_format(pFormatCtx, 0, videoName, 0);
    cout << pFormatCtx->bit_rate << endl; // different value each time, not initialized properly.
    cout << pFormatCtx->duration << endl; // 0
    return 0;
} 
```

我不知道它是否有帮助，但我在 Ubuntu 上使用 QtCreator 并静态链接库。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-16T17:01:11.060

持续时间属性的`time_base`单位不是毫秒或秒。转换为毫秒非常简单，

```
double time_base =  (double)video_stream->time_base.num / (double)video_stream->time_base.den;
double duration = (double)video_stream->duration * time_base * 1000.0; 
```

持续时间现在以毫秒为单位，只需使用 floor 或 ceil 即可获得整数 msec，无论您喜欢哪个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-27T13:04:25.590

`av_open_input_file()`和之间的区别`avformat_open_input()`可能在于后者不读取流信息 - 因此`duration`未初始化。打电话`avformat_find_stream_info()`为我解决了这个问题。

我从 [http://ffmpeg.org/doxygen/trunk/dump_8c_source.html#l00480](http://ffmpeg.org/doxygen/trunk/dump_8c_source.html#l00480)获取了计算/显示的代码片段（请注意，行号可以并且可能会在新版本中更改）。并添加了一些初始化代码，“它对我有用”。希望能帮助到你。

```
#include <libavutil/avutil.h>
#include <libavformat/avformat.h>

int main()
{
    const char const* file = "sample.mpg";
    AVFormatContext* formatContext = NULL;

    av_register_all();

    // Open video file
    avformat_open_input(&formatContext, file, NULL, NULL);
    avformat_find_stream_info(formatContext, NULL);

    // Lower log level since av_log() prints at AV_LOG_ERROR by default
    av_log_set_level(AV_LOG_INFO);

    av_log(NULL, AV_LOG_INFO, "  Duration: ");
    if (formatContext->duration != AV_NOPTS_VALUE) {
        int hours, mins, secs, us;
        int64_t duration = formatContext->duration + 5000;
        secs  = duration / AV_TIME_BASE;
        us    = duration % AV_TIME_BASE;
        mins  = secs / 60;   
        secs %= 60;          
        hours = mins / 60;   
        mins %= 60;
        av_log(NULL, AV_LOG_INFO, "%02d:%02d:%02d.%02d\n", hours, mins, secs, (100 * us) / AV_TIME_BASE);
    } 

    return 0;
} 
```

编译，

```
gcc -o duration -lavutil -lavformat duration.c 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-04T15:34:15.440

**How to get duration information (and more) from ffmpeg**

I messed around with ffmpeg a while ago and found the learning curve to be pretty steep. So even though the OP asked this question months ago, I'll post some code in case others here on SO are looking to do something similar. The Open() function below is complete but has many asserts and lacks in the way of proper error handling.

Right off, one immediate difference I see is that I used **av_open_input_file** instead of **avformat_open_input**. I also didn't use **av_dump_format**.

Calculating the duration can be tricky, especially with H.264 and MPEG-2; see how **durationSec** is calculated below.

Note: This example also uses the [JUCE C++ Utility Library](http://www.juce.com/).

Note2: This code is a modified version of the [ffmpeg tutorial](http://dranger.com/ffmpeg/tutorial01.html).

```
void VideoCanvas::Open(const char* videoFileName)
{       
    Logger::writeToLog(String(L"Opening video file ") + videoFileName);
    Close();

    AVCodec *pCodec;

    // register all formats and codecs
    av_register_all();  

    // open video file
    int ret = av_open_input_file(&pFormatCtx, videoFileName, NULL, 0, NULL);
    if (ret != 0) {
        Logger::writeToLog("Unable to open video file: " + String(videoFileName));
        Close();
        return;
    }

    // Retrieve stream information
    ret = av_find_stream_info(pFormatCtx);
    jassert(ret >= 0);

    // Find the first video stream
    videoStream = -1;
    audioStream = -1;
    for(int i=0; i<pFormatCtx->nb_streams; i++) {
        if (pFormatCtx->streams[i]->codec->codec_type==AVMEDIA_TYPE_VIDEO && videoStream < 0) {
            videoStream = i;            
        }
        if (pFormatCtx->streams[i]->codec->codec_type == AVMEDIA_TYPE_AUDIO && audioStream < 0) {
            audioStream = i;
        }
    } // end for i
    jassert(videoStream != -1);
    jassert(audioStream != -1);

    // Get a pointer to the codec context for the video stream
    pCodecCtx=pFormatCtx->streams[videoStream]->codec;
    jassert(pCodecCtx != nullptr);

    /**
      * This is the fundamental unit of time (in seconds) in terms
      * of which frame timestamps are represented. For fixed-fps content,
      * timebase should be 1/framerate and timestamp increments should be
      * identically 1.
      * - encoding: MUST be set by user.
      * - decoding: Set by libavcodec.
      */
    AVRational avr = pCodecCtx->time_base;
    Logger::writeToLog("time_base = " + String(avr.num) + "/" + String(avr.den));

    /**
     * For some codecs, the time base is closer to the field rate than the frame rate.
     * Most notably, H.264 and MPEG-2 specify time_base as half of frame duration
     * if no telecine is used ...
     *
     * Set to time_base ticks per frame. Default 1, e.g., H.264/MPEG-2 set it to 2.
     */
    ticksPerFrame = pCodecCtx->ticks_per_frame;
    Logger::writeToLog("ticks_per_frame = " + String(pCodecCtx->ticks_per_frame));

    durationSec = static_cast<double>(pFormatCtx->streams[videoStream]->duration) * static_cast<double>(ticksPerFrame) / static_cast<double>(avr.den);
    double fH = durationSec / 3600.;
    int     H = static_cast<int>(fH);
    double fM = (fH - H) * 60.;
    int     M = static_cast<int>(fM);
    double fS = (fM - M) * 60.;
    int     S = static_cast<int>(fS);

    Logger::writeToLog("Video stream duration = " + String(H) + "H " + String(M) + "M " + String(fS, 3) + "S");

    // calculate frame rate based on time_base and ticks_per_frame
    frameRate = static_cast<double>(avr.den) / static_cast<double>(avr.num * pCodecCtx->ticks_per_frame);
    Logger::writeToLog("Frame rate = " + String(frameRate) );

    // audio codec context
    if (audioStream != -1) {
        aCodecCtx = pFormatCtx->streams[audioStream]->codec;

        Logger::writeToLog("Audio sample rate = " + String(aCodecCtx->sample_rate));
        Logger::writeToLog("Audio channels    = " + String(aCodecCtx->channels));       
    }
    jassert(aCodecCtx != nullptr);

    // format:
    // The "S" in "S16SYS" stands for "signed", the 16 says that each sample is 16 bits long, 
    // and "SYS" means that the endian-order will depend on the system you are on. This is the
    // format that avcodec_decode_audio2 will give us the audio in.

    // open the audio codec
    if (audioStream != -1) {
        aCodec = avcodec_find_decoder(aCodecCtx->codec_id);
        if (!aCodec) {
            Logger::writeToLog(L"Unsupported codec ID = " + String(aCodecCtx->codec_id) );
            Close();
            return;  // TODO: should we just play video if audio codec doesn't work?
        }
        avcodec_open(aCodecCtx, aCodec);
    }

    // Find the decoder for the video stream
    pCodec=avcodec_find_decoder(pCodecCtx->codec_id);
    if(pCodec == nullptr) {
        jassert(false);
        // fprintf(stderr, "Unsupported codec!\n");
        //return -1; // Codec not found
    }

    // Open video codec
    ret = avcodec_open(pCodecCtx, pCodec);
    jassert(ret >= 0);

    // Allocate video frame
    pFrame=avcodec_alloc_frame();
    jassert(pFrame != nullptr);

    // Allocate an AVFrame structure
    pFrameRGB=avcodec_alloc_frame();
    jassert(pFrameRGB != nullptr);

    int numBytes = avpicture_get_size(PIX_FMT_RGB32, pCodecCtx->width, pCodecCtx->height);
    jassert(numBytes != 0);
    buffer=(uint8_t *)av_malloc(numBytes*sizeof(uint8_t));
    jassert(buffer != nullptr);

    // note: the pixel format here is RGB, but sws_getContext() needs to be PIX_FMT_BGR24 to match (BGR)
    // this might have to do w/ endian-ness....make sure this is platform independent
    if (m_image != nullptr) delete m_image;
    m_image = new Image(Image::ARGB, pCodecCtx->width, pCodecCtx->height, true);

    int dstW = pCodecCtx->width; // don't rescale
    int dstH = pCodecCtx->height;
    Logger::writeToLog(L"Video width = " + String(dstW));
    Logger::writeToLog(L"Video height = " + String(dstH));

    // this should only have to be done once
    img_convert_ctx = sws_getContext(pCodecCtx->width, pCodecCtx->height, pCodecCtx->pix_fmt, dstW, dstH, PIX_FMT_RGB32, SWS_FAST_BILINEAR, NULL, NULL, NULL);
    jassert(img_convert_ctx != nullptr);  

    setSize(pCodecCtx->width, pCodecCtx->height);

} // Open() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-30T11:11:43.753

您可以从中获取持续时间`AVFormatContext`，但格式上下文中的持续时间在**AV_TIME_BASE**
中 阅读更多关于 FFMPEG 时基[的信息](https://titanwolf.org/Network/Articles/Article?AID=8df69d7a-adbf-4f8e-b69c-3e724113c8f3#gsc.tab=0)

从**avformat.h**文档：

> /**
> 流的持续时间，以 AV_TIME_BASE 小数秒为单位。仅当您不知道任何单个流持续时间并且不设置任何一个时才设置此值。如果未设置，则从 AVStream 值推导出来。仅解复用，由 libavformat 设置。
> */
> int64_t 持续时间；

因此，您应该使用将时基转换为秒`av_q2d(AV_TIME_BASE_Q)`

```
AVFormatContext *fmt_ctx;

/* init fmt_ctx etc. */

double duration_in_sec = (int) (fmt_ctx->duration * av_q2d(AV_TIME_BASE_Q)); 
```

# windows - 我可以确定 MSIEXEC 可以在现有的 Windows 平台上使用吗？

> ID：12558184
> 
> 赞同：0
> 
> 时间：2012-09-24T02:36:14.547
> 
> 标签：windows, windows-installer

我需要使用 MSIEXEC 来提取 MSI 包的内容（不安装它）并从本地服务中执行，但我的问题是 MSIEXEC 是否适用于自 Windows XP SP3 以来的所有库存操作系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:44:50.140

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372024%28v=vs.85%29.aspx)，`MSIExec`在大多数最新版本的 WIndows Installer（3.0 及更高版本）中都可用，并且还有其他命令行选项可用于早期版本。这似乎表明`MSIExec`安装程序的多个版本已经存在，其中必然包括 XP SP3 及更高版本。

检查 Windows 7 Pro 上 Windows XP SP3 虚拟模式的全新安装，它为 Windows Installer 3.0 安装了 MSIExec。它也在 Win7 Professional 中。

# r - 条件计数内/总和和转换

> ID：12558189
> 
> 赞同：-3
> 
> 时间：2012-09-24T02:37:18.460
> 
> 标签：r, dataframe, aggregate, transformation

## 更新于 2012-09-24 06:52:00Z

在[大卫罗宾逊](https://stackoverflow.com/users/712603/david-robinson)问了一些非常好的问题之后，我意识到我最初的问题并不准确。

我正在考虑我的问题是一个两步的事情，

首先，我需要查看我的数据以识别`id`只有 s 的 s`time` `intake_arm_1`并创建一个新行，其中只有他们的 # in `id`、`v_001_arm_1`in`time`和他们的 # in `c_n`。`t_name`为了在他们和我之间获得正确的匹配，`c_name`我使用了`lookup`这张桌子。

`id`其次，我需要在 'v_001_arm_1' 上执行或多或少相同的操作，但`v_010_arm_1`如果最新的*arm*已`ti_all`注册，请按 计数这些实例`ty_all`，并将这些数字写入列`out_c`和`out_c`。`intake_arm_1`此外，如果最新`ti_all`的不是 NA ，我还必须将名称编号从该新行传输到该新行。

新的*v_00n_arm_1*的 #应该是“当前突出显示编号”（例如`v_007_arm_1`）+ 1（例如`v_008_arm_1`）。

我将致力于手动制作一个引人注目的示例来说明我的目标。

```
lookup <- structure(list(c_name = c(1L, 2L, 4L, 5L, 6L, 7L), t_name = structure(1:6, .Label = c("Bob", "Julian", "Mitt", "Ricky", "Tom", "Victor"), class = "factor")), .Names = c("c_name", "t_name"), class = "data.frame", row.names = c("1", "2", "3", "4", "5", "6"))
> lookup
  c_name t_name
1      1    Bob
2      2 Julian
3      4   Mitt
4      5  Ricky
5      6    Tom
6      7 Victor

mydata <- structure(list(id = c(1L, 1L, 2L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 6L, 7L, 7L, 7L, 7L, 8L, 9L), time = c("intake_arm_1", "v_001_arm_1", "intake_arm_1", "intake_arm_1", "intake_arm_1", "v_001_arm_1", "v_002_arm_1", "v_003_arm_1", "v_004_arm_1", "v_005_arm_1", "v_006_arm_1", "v_007_arm_1", "intake_arm_1", "v_001_arm_1", "intake_arm_1", "intake_arm_1", "v_011_arm_1", "v_012_arm_1", "v_013_arm_1", "intake_arm_1", "intake_arm_1"), dat_all = c(NA, NA, NA, NA, NA, NA, NA, "2012-09-23", "2012-09-23", "2012-09-02", "2012-09-10", "2012-09-23", NA, NA, NA, NA, "2012-09-23", "2012-09-23", "2012-09-23", NA, NA), ti_all = c(NA, NA, NA, NA, NA, NA, NA, 6L, 44L, 33L, NA, 22L, NA, NA, NA, NA, 65L, NA, 10L, NA, NA),     ty_all = c(NA, NA, NA, NA, NA, NA, NA, "out_", "out_", "cma_",     NA, "cma_", NA, NA, NA, NA, "out_", "out_", "out_", NA, NA), out_c = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,     NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), cma_c = c(NA, NA,     NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,     NA, NA, NA, NA), c_n = c(NA, 1L, NA, NA, NA, NA, NA, 7L,     4L, 7L, NA, 1L, NA, 2L, NA, NA, 7L, 7L, 7L, NA, NA), t_name = c("Tom",     NA, "Ricky", "Ricky", "Victor", NA, NA, NA, NA, NA, NA, NA,     "Julian", NA, "Julian", "Bob", NA, NA, NA, "Mitt", "Mitt")), .Names = c("id", "time", "dat_all", "ti_all", "ty_all", "out_c", "cma_c", "c_n", "t_name"), class = "data.frame", row.names = c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21"))
> mydata    
     id          time    dat_all ti_all ty_all out_c cma_c  c_n  t_name
1     1  intake_arm_1         NA     NA     NA    NA    NA   NA     Tom
2     1   v_001_arm_1         NA     NA     NA    NA    NA    1      NA
3     2  intake_arm_1         NA     NA     NA    NA    NA   NA   Ricky
4     3  intake_arm_1         NA     NA     NA    NA    NA   NA   Ricky
5     4  intake_arm_1         NA     NA     NA    NA    NA   NA  Victor
6     4   v_001_arm_1         NA     NA     NA    NA    NA   NA      NA
7     4   v_002_arm_1         NA     NA     NA    NA    NA   NA      NA
8     4   v_003_arm_1 2012-09-23      6   out_    NA    NA    7      NA
9     4   v_004_arm_1 2012-09-23     44   out_    NA    NA    4      NA
10    4   v_005_arm_1 2012-09-02     33   cma_    NA    NA    7      NA
11    4   v_006_arm_1 2012-09-10     NA     NA    NA    NA   NA      NA
12    4   v_007_arm_1 2012-09-23     22   cma_    NA    NA    1      NA
13    5  intake_arm_1         NA     NA     NA    NA    NA   NA  Julian
14    5   v_001_arm_1         NA     NA     NA    NA    NA    2      NA
15    6  intake_arm_1         NA     NA     NA    NA    NA   NA  Julian
16    7  intake_arm_1         NA     NA     NA    NA    NA   NA     Bob
17    7   v_011_arm_1 2012-09-23     65   out_    NA    NA    7      NA
18    7   v_012_arm_1 2012-09-23     NA   out_    NA    NA    7      NA
19    7   v_013_arm_1 2012-09-23     10   out_    NA    NA    7      NA
20    8  intake_arm_1         NA     NA     NA    NA    NA   NA    Mitt
21    9  intake_arm_1         NA     NA     NA    NA    NA   NA    Mitt 
```

这就是我的目标（除非我打错了），

```
 id          time    dat_all ti_all ty_all out_c cma_c  c_n  t_name
1    1  intake_arm_1         NA     NA     NA    NA    NA   NA     Tom
2    1   v_001_arm_1         NA     NA     NA    NA    NA    1      NA
3    2  intake_arm_1         NA     NA     NA    NA    NA   NA   Ricky
4    2   v_001_arm_1         NA     NA     NA    NA    NA    5      NA
5    3  intake_arm_1         NA     NA     NA    NA    NA   NA   Ricky
6    3   v_001_arm_1         NA     NA     NA    NA    NA    5      NA
7    4  intake_arm_1         NA     NA     NA    NA    NA   NA  Victor
7    4   v_001_arm_1         NA     NA     NA    NA    NA   NA      NA
8    4   v_002_arm_1         NA     NA     NA    NA    NA   NA      NA
9    4   v_003_arm_1 2012-09-23      6   out_     1    NA    7      NA
10   4   v_004_arm_1 2012-09-23     44   out_     2    NA    4      NA
11   4   v_005_arm_1 2012-09-02     33   cma_     2     1    7      NA
12   4   v_006_arm_1 2012-09-10     NA     NA     2     1   NA      NA
13   4   v_007_arm_1 2012-09-23     22   cma_     2     2    1      NA
14   4   v_008_arm_1         NA     NA     NA     2     2    7      NA
15   5  intake_arm_1         NA     NA     NA    NA    NA   NA  Julian
16   5   v_001_arm_1         NA     NA     NA    NA    NA    2      NA
17   6  intake_arm_1         NA     NA     NA    NA    NA   NA  Julian
18   6   v_001_arm_1         NA     NA     NA    NA    NA    2      NA
19   7  intake_arm_1         NA     NA     NA    NA    NA   NA     Bob
20   7   v_011_arm_1 2012-09-23     65   out_     1    NA    7      NA
21   7   v_012_arm_1 2012-09-23     NA   out_     1    NA    7      NA
22   7   v_013_arm_1 2012-09-23     10   out_     2    NA    7      NA
23   7   v_014_arm_1         NA     NA     NA     2    NA    1      NA
24   8  intake_arm_1         NA     NA     NA    NA    NA   NA    Mitt
25   8   v_001_arm_1         NA     NA     NA    NA    NA    4      NA
26   9  intake_arm_1         NA     NA     NA    NA    NA   NA    Mitt
27   9   v_001_arm_1         NA     NA     NA    NA    NA    4      NA 
```

* * *

ps：我见过人们用`aggregate`和做惊人的事情`tapply`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T08:02:55.433

这是使用[plyr](http://plyr.had.co.nz/)的解决方案：

```
lookup <- structure(list(c_name = c(1L, 2L, 4L, 5L, 6L, 7L), t_name = structure(1:6, .Label = c("Bob", "Julian", "Mitt", "Ricky", "Tom", "Victor"), class = "factor")), .Names = c("c_name", "t_name"), class = "data.frame", row.names = c("1", "2", "3", "4", "5", "6"))

mydata <- structure(list(id = c(1L, 1L, 2L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 6L, 7L, 7L, 7L, 7L, 8L, 9L), time = c("intake_arm_1", "v_001_arm_1", "intake_arm_1", "intake_arm_1", "intake_arm_1", "v_001_arm_1", "v_002_arm_1", "v_003_arm_1", "v_004_arm_1", "v_005_arm_1", "v_006_arm_1", "v_007_arm_1", "intake_arm_1", "v_001_arm_1", "intake_arm_1", "intake_arm_1", "v_011_arm_1", "v_012_arm_1", "v_013_arm_1", "intake_arm_1", "intake_arm_1"), dat_all = c(NA, NA, NA, NA, NA, NA, NA, "2012-09-23", "2012-09-23", "2012-09-02", "2012-09-10", "2012-09-23", NA, NA, NA, NA, "2012-09-23", "2012-09-23", "2012-09-23", NA, NA), ti_all = c(NA, NA, NA, NA, NA, NA, NA, 6L, 44L, 33L, NA, 22L, NA, NA, NA, NA, 65L, NA, 10L, NA, NA),     ty_all = c(NA, NA, NA, NA, NA, NA, NA, "out_", "out_", "cma_",     NA, "cma_", NA, NA, NA, NA, "out_", "out_", "out_", NA, NA), out_c = c(NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,     NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), cma_c = c(NA, NA,     NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,     NA, NA, NA, NA), c_n = c(NA, 1L, NA, NA, NA, NA, NA, 7L,     4L, 7L, NA, 1L, NA, 2L, NA, NA, 7L, 7L, 7L, NA, NA), t_name = c("Tom",     NA, "Ricky", "Ricky", "Victor", NA, NA, NA, NA, NA, NA, NA,     "Julian", NA, "Julian", "Bob", NA, NA, NA, "Mitt", "Mitt")), .Names = c("id", "time", "dat_all", "ti_all", "ty_all", "out_c", "cma_c", "c_n", "t_name"), class = "data.frame", row.names = c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21"))

library(plyr)

newrows <- ddply(mydata, .(id), function(subdata) {
    subdata_ty = subdata[!is.na(subdata$ty_all), ]
    if (NROW(subdata) == 1) {
        r = subdata[1, ]
        c("v_001_arm_1", NA, NA, NA, NA, NA,
                    lookup$c_name[lookup$t_name == r$t_name], r$t_name)
    }
    else if (NROW(subdata_ty) > 0 & !is.na(subdata_ty[NROW(subdata_ty), ]$dat_all)) {
        numbers = sapply(strsplit(subdata$time, "_"), function(l)
            ifelse(l[1] != "intake", as.numeric(l[2]), 0))
        newname = paste(c("v", sprintf("%03d", max(numbers) + 1), "arm", "1"),
                            collapse="_")
        r1 = subdata[1, ]
        new_c_n = lookup$c_name[lookup$t_name == r1$t_name]

        new_out_c = sum(subdata$ty_all == "out_" & !is.na(subdata$ti_all))
        new_cma_c = sum(subdata$ty_all == "cma_" & !is.na(subdata$ti_all))

        # you want them to be NA instead of 0:
        new_out_c = ifelse(new_out_c == 0, NA, new_out_c)
        new_cma_c = ifelse(new_cma_c == 0, NA, new_cma_c)        

        return(c(newname, NA, NA, NA, new_out_c, new_cma_c, new_c_n, NA))
    }
})

# recombine and sort
colnames(newrows) = colnames(mydata)
newdata = rbind(mydata, newrows)
newdata = newdata[order(newdata$id), ] 
```

# python - 在 python 中调用我的类时出现问题

> ID：12558191
> 
> 赞同：0
> 
> 时间：2012-09-24T02:37:37.200
> 
> 标签：python, class, inheritance

我不知道如何保持简单...我希望有人也查看我的代码并告诉我为什么我的功能无法正常工作...

我有一堂课：

```
 class PriorityQueue(object):
'''A class that contains several methods dealing with queues.'''

    def __init__(self):
        '''The default constructor for the PriorityQueue class, an empty list.'''
        self.q = []

    def insert(self, number):
        '''Inserts a number into the queue, and then sorts the queue to ensure that the number is in the proper position in the queue.'''
        self.q.append(number)
        self.q.sort()

    def minimum(self):
        '''Returns the minimum number currently in the queue.'''
        return min(self.q)

    def removeMin(self):
        '''Removes and returns the minimum number from the queue.'''
        return self.q.pop(0)

    def __len__(self):
        '''Returns the size of the queue.'''
        return self.q.__len__()

    def __str__(self):
        '''Returns a string representing the queue.'''
        return "{}".format(self.q)

    def __getitem__(self, key):
        '''Takes an index as a parameter and returns the value at the given index.'''
        return self.q[key]

    def __iter__(self):
        return self.q.__iter__() 
```

我有这个函数，它将获取一个文本文件，并通过我的类中的一些方法运行它：

```
def testQueue(fname):
    infile = open(fname, 'r')
    info = infile.read()
    infile.close()
    info = info.lower()
    lstinfo = info.split()
    queue = PriorityQueue()
    for item in range(len(lstinfo)):
        if lstinfo[item] == "i":
            queue.insert(eval(lstinfo[item + 1]))
        if lstinfo[item] == "s":
            print(queue)
        if lstinfo[item] == "m":
            queue.minimum()
        if lstinfo[item] == "r":
            queue.removeMin()
        if lstinfo[item] == "l":
            len(queue)
        #if lstinfo[item] == "g": 
```

对我不起作用的是我对`queue.minimum`and的调用`queue.removeMin()`。

我完全感到困惑，因为如果我在 shell 中手动执行，一切正常，当我读取文件并从文件中的字母中获取指令时，它也可以工作，但`minimum`不会`removeMin()`显示 shell 中的值，`removeMin()`但是会从列表中删除最小的数字。

我做错了什么，它没有显示它在做什么，就像类方法定义的那样？

IE：

```
 def minimum(self):
     return min(self.q) 
```

当我从我的函数调用它时，它不应该显示最小值吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T02:45:14.927

不，`def minimum(self): return min(self.q)`调用时不会显示任何内容。如果您打印输出，它只会显示一些内容，如`print(queue.minimum())`. 例外情况是从 Python 提示符/REPL 执行代码时，默认情况下会打印表达式（除非它们是`None`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T02:46:36.133

它正在按应有的方式工作。你只是返回一个值。

如果要显示该值，则需要执行以下任一操作：

```
print queue.minimum() 
```

或者

```
rval = queue.minimum()
print rval 
```

打印未捕获的返回值是大多数解释器的实用功能。您将在 javascript 控制台中看到相同的行为。

# java - 非常基本的java方法

> ID：12558192
> 
> 赞同：1
> 
> 时间：2012-09-24T02:37:41.047
> 
> 标签：java

我是java的初学者，正在使用数组编写一个堆栈类。

所以我在这个类中有一个方法叫 pop

```
 public int Pop(){
   if (current_size >0)
    { // do something 
      return ele;
     }
     // return nothing  <-- ths is where error is
     } 
```

因为我有返回类型 int.. 类总是期望返回一些东西。我应该如何处理这种情况，如果条件为真，该方法将返回一些东西，否则它不应该返回任何东西？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T02:40:29.867

你必须总是返回一些东西（除非你的方法是`void`）或者抛出一个异常。你可以试试这个：

```
public int pop() {
    if (current_size > 0) 
        return ele;
    throw new EmptyStackException();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T02:42:44.063

在不知道你想要的行为是什么的情况下，很难告诉你，但我可以提供一些建议。

1.  如果您想真正不返回任何内容，则应将返回类型更改为`Integer`包装类而不是`int`原始类型。这样你就可以返回`null`，这没什么。
2.  如果这是一个例外情况，也许您想要`throw`一个`Exception`.

    ```
    if (evaluateSomething()) {
        // do something in response...
    } else {
        throw new RuntimeException("You can't do that!");
    } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T02:43:27.853

您可以在堆栈为空时引发异常，或者如果您的堆栈从不包含负数，您可以返回一个特殊的 int，例如 -1。

```
throw new StackIsEmptyException(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T03:19:44.440

您需要有一个 return 语句或为所有可能的退出点抛出异常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-16T11:04:29.517

除非您的方法是`void`，否则您必须返回变量或抛出/捕获异常。这样的事情应该做；

```
 public int pop() 
{
    if (current_size > 0) 
        return ele;                  //return variable
    throw new EmptyStackException(); //throw new exception
} 
```

# c# - 并非所有代码路径都返回值问题

> ID：12558193
> 
> 赞同：1
> 
> 时间：2012-09-24T02:37:42.413
> 
> 标签：c#, asp.net, .net

我在一个类（数据库）中有这段代码，我得到了

> 并非所有路径都返回值。

任何帮助将不胜感激。

```
public static DataSet DELETE_PDT(String rowid)
{
    SqlConnection con = new SqlConnection();
    SqlCommand cmd = new SqlCommand("sp_DELETE_PDT", con);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add("@rowid", SqlDbType.Int).Value = rowid;

    con.ConnectionString = ConfigurationManager.ConnectionStrings["WMS"].ConnectionString;

    try
    {
        con.Open();
        cmd.ExecuteNonQuery();
        cmd.Dispose();
        con.Close();
    }
    catch (Exception ex)
    {
        throw new Exception("Error while deleting record. Please contact your System Administrator", ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:38:48.623

您的方法应该有 a`return value`因为您已将其声明为 return `Dataset`。

例子，

```
return new Dataset(); 
```

如果您不想看到错误消息，请更改

```
public static DataSet DELETE_PDT(String rowid)
{
   // statements
} 
```

到

```
public static void DELETE_PDT(String rowid)
{
   // statements
} 
```

**更新 1**

根据您的评论，我将对其进行修改以再次返回字符串值。

```
public static string DELETE_PDT(String rowid)
{
    using (SqlConnection con = new SqlConnection())
    {
        con.ConnectionString = ConfigurationManager.ConnectionStrings["WMS"].ConnectionString;
        using (SqlCommand cmd = new SqlCommand("sp_DELETE_PDT", con))
        {
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@rowid", SqlDbType.Int).Value = rowid;
            try
            {
                if (con.State == ConnectionState.Open)
                con.Close();
                con.Open();
                cmd.ExecuteNonQuery();
                return "Record has been deleted";
            }
            catch (Exception ex)
            {
                return "Error while deleting record. Please contact your System Administrator";
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:39:07.430

您已经声明了返回 a `DataSet`... 的方法，但您什么也没返回。所以......您需要返回一个实例`DataSet`或更改您的方法签名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T02:40:18.340

您已声明该方法应返回 a `DataSet`，但它不返回任何内容（这对于该方法的作用是合乎逻辑的）。将签名更改为：

```
public static void DELETE_PDT(String rowid) 
```

* * *

旁注：为避免出现异常离开未关闭的连接，您可以使用`using`. 它确保无论发生什么，命令和连接总是被处理：

```
public static void DELETE_PDT(String rowid) {
  using (SqlConnection con = new SqlConnection()) {
    con.ConnectionString = ConfigurationManager.ConnectionStrings["WMS"].ConnectionString;
    using (SqlCommand cmd = new SqlCommand("sp_DELETE_PDT", con)) {
      cmd.CommandType = CommandType.StoredProcedure;
      cmd.Parameters.Add("@rowid", SqlDbType.Int).Value = rowid;
      try {
        con.Open();
        cmd.ExecuteNonQuery();
      } catch (Exception ex) {
        throw new Exception("Error while deleting record. Please contact your System Administrator", ex);
      }
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T02:42:17.690

我已经重构了你的代码；试试这个：

```
public static void DELETE_PDT(String rowid) {
    using(SqlConnection con = new SqlConnection()) {
        con.ConnectionString = ConfigurationManager.ConnectionStrings["WMS"].ConnectionString;
        using(SqlCommand cmd = new SqlCommand("sp_DELETE_PDT", con)) {
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@rowid", SqlDbType.Int).Value = rowid;

            try
            {
                con.Open();
                cmd.ExecuteNonQuery();
                con.Close();
            }
            catch (Exception ex)
            {
                throw new Exception("Error while deleting record. Please contact your System Administrator", ex);
            }
        }
    }
} 
```

# algorithm - 我可以将大师定理用于这种递归关系吗？

> ID：12558199
> 
> 赞同：0
> 
> 时间：2012-09-24T02:38:43.273
> 
> 标签：algorithm, analysis

我解决了我的作业问题，我使用了递归树。

但是解决方案说这种递归关系可以通过大师定理来解决！

T(N) = 49T(N/25) + n^(3/2)log(n)

我解决了 n^(3/2) log^2(n)

但解决方案说 n^(3/2) log(n)

我不知道为什么这种情况可以使用大师定理并且是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T03:01:37.133

我们可以看到`a=49`和`b=25`。注意那个`log_b(a) ~ 1.2`和那个`3/2 = 1.5`。因此，`log_b(a) < 3/2`。因此，我们可以看到，`f(n) = n^{3/2}log(n) = Omega(n^{log_b(a) + epsilon})`对于一些 epsilon，主定理的情况 3 适用。因此，运行时间为

```
T(n) = Theta(f(n)) = n^{3/2}log(n) 
```

*注意：*您还必须检查

```
af(n/b) <= cf(n) 
```

对于一些常数`c`。当然

```
49 (n/25)^{3/2} log(n/25) <= c n^{3/2}log(n) 
```

可以通过将两边除以`n^{3/2}`然后`c log(n)`从两边减去来检查

```
(49/25^{3/2} - c) log n - 49/25^{3/2} log(25) <= 0 
```

至少对于`c > 49/25^{3/2}`（没有必要弄得这么紧）来说，这肯定是正确的。

# ios - 从 AppStore 获取 App 购买中的顶部

> ID：12558204
> 
> 赞同：1
> 
> 时间：2012-09-24T02:39:13.807
> 
> 标签：ios, app-store, in-app-purchase

有什么方法可以让我从 App Store 获得“Top In App Purchases”以在我的应用程序中显示它？

例如： http: [//itunes.apple.com/vn/app/wild-blood/id451403547 ?mt=8](http://itunes.apple.com/vn/app/wild-blood/id451403547?mt=8)

我想得到：

应用内购买量最高

勇士的宝藏 $4.99

小宝 $1.99

骑士的宝藏 $9.99

国王的宝藏 $19.99

恶魔之宝 $49.99

上帝的宝藏 $99.99

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-24T02:44:51.307

是的，非常简单，找到任何 RSS 阅读器代码...并阅读此内容 对于排名前 10 位的免费应用程序 [http://itunes.apple.com/us/rss/topfreeapplications/limit=10/xml](http://itunes.apple.com/us/rss/topfreeapplications/limit=10/xml) 或排名前 10 位的付费应用程序 [http:/ /itunes.apple.com/us/rss/toppaidapplications/limit=10/xml](http://itunes.apple.com/us/rss/toppaidapplications/limit=10/xml)

[或者使用 iTunes Store RSS Feed Generator http://itunes.apple.com/rss](http://itunes.apple.com/rss)制作自己的 RSS

# java - 如何检查值是否为整数类型？

> ID：12558206
> 
> 赞同：65
> 
> 时间：2012-09-24T02:39:40.150
> 
> 标签：java, integer

我需要检查一个值是否为整数。我发现了这个：[如何检查输入值是整数还是浮点数？](https://stackoverflow.com/questions/4727569/how-to-check-whether-input-value-is-integer-or-float)，但如果我没记错的话，`double`即使***值***本身确实是一个`integer`.

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-09-24T02:59:16.443

如果输入值可以是整数以外的数字形式，请检查

```
if (x == (int)x)
{
   // Number is integer
} 
```

如果正在传递字符串值，请使用`Integer.parseInt(string_var).` 请确保在转换失败时使用 try catch 进行错误处理。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-24T03:52:17.767

如果您有一个双精度/浮点/浮点数并想查看它是否为整数。

```
public boolean isDoubleInt(double d)
{
    //select a "tolerance range" for being an integer
    double TOLERANCE = 1E-5;
    //do not use (int)d, due to weird floating point conversions!
    return Math.abs(Math.floor(d) - d) < TOLERANCE;
} 
```

如果您有一个字符串并想查看它是否为整数。最好不要丢弃`Integer.valueOf()`结果：

```
public boolean isStringInt(String s)
{
    try
    {
        Integer.parseInt(s);
        return true;
    } catch (NumberFormatException ex)
    {
        return false;
    }
} 
```

如果您想查看某物是否是 Integer 对象（因此包装了`int`）：

```
public boolean isObjectInteger(Object o)
{
    return o instanceof Integer;
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-09-01T08:06:27.433

```
if (x % 1 == 0)
    // x is an integer 
```

这`x`是一个数字原语：`short`, `int`, `long`,`float`或`double`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-24T03:01:20.000

试试这种方式

```
try{
    double d= Double.valueOf(someString);
    if (d==(int)d){
        System.out.println("integer"+(int)d);
    }else{
        System.out.println("double"+d);
    }
}catch(Exception e){
    System.out.println("not number");
} 
```

但是整数范围之外的所有数字（如“-1231231231231231238”）都将被视为双精度数。如果你想摆脱这个问题，你可以试试这种方式

```
try {
    double d = Double.valueOf(someString);
    if (someString.matches("\\-?\\d+")){//optional minus and at least one digit
        System.out.println("integer" + d);
    } else {
        System.out.println("double" + d);
    }
} catch (Exception e) {
    System.out.println("not number");
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-09-20T19:54:14.550

您应该使用`instanceof`运算符来确定您的值是否为整数；

对象对象 = your_value;

```
if(object instanceof Integer) {

Integer integer = (Integer) object ;

} else {
 //your value isn't integer
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-11-25T10:54:57.673

这是检查 String 是否为 Integer 的功能？

```
public static boolean isStringInteger(String number ){
    try{
        Integer.parseInt(number);
    }catch(Exception e ){
        return false;
    }
    return true;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-24T02:58:03.573

这可以工作：

```
int no=0;
try
{
    no=Integer.parseInt(string);
    if(string.contains("."))
    {
        if(string.contains("f"))
        {
            System.out.println("float");
        }
        else
            System.out.println("double");
    }
}

catch(Exception ex)
{
    Console.WriteLine("not numeric or string");
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-24T03:53:54.530

要检查字符串是否包含表示整数的数字字符，您可以使用`Integer.parseInt()`.

要检查 double 是否包含可以是整数的值，可以使用`Math.floor()`或`Math.ceil()`。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-08-05T13:46:00.423

你需要先检查它是否是一个数字。如果是这样，您可以使用该`Math.Round`方法。如果结果和原始值相等，那么它是一个整数。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-02-02T11:04:26.997

这是我知道启用负整数的最短方法：

```
Object myObject = "-1";

if(Pattern.matches("\\-?\\d+", (CharSequence) myObject);)==true)
{
    System.out.println("It's an integer!");
} 
```

这是禁用负整数的方式：

```
Object myObject = "1";

if(Pattern.matches("\\d+", (CharSequence) myObject);)==true)
{
    System.out.println("It's an integer!");
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-04-12T00:33:42.837

试试这段代码

```
private static boolean isStringInt(String s){
    Scanner in=new Scanner(s);
    return in.hasNextInt();
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-10-10T17:03:26.687

您可以使用模数％，解决方案非常简单：

```
import java.text.DecimalFormat;
import java.util.Scanner;
public class Main {
    public static void main(String[] args) {

    Scanner scan = new Scanner(System.in);
    System.out.println("Enter first number");
    Double m = scan.nextDouble();
    System.out.println("Enter second number");
    Double n= scan.nextDouble();

    if(m%n==0) 
    {
        System.out.println("Integer");
    }
    else
    {
        System.out.println("Double");
    }

}
} 
```

# c# - 当客户端使用 JSON 填充 Dropdown 时，添加 C# asp.net

> ID：12558208
> 
> 赞同：0
> 
> 时间：2012-09-24T02:40:05.570
> 
> 标签：c#, jquery, asp.net, c#-4.0, json.net

我继承了我在 Json 中的代码

```
function OnGetNotes(index) {
        proxyNotes.invoke("SearchBranchesByBankID",{ "request":{"BankID": index}
                            }, OnGetNotesComplete, OnError);
    }
    function OnGetNotesComplete(result) {
        var obj = jQuery.parseJSON(result);
        var notes = obj.Branches;
        if (notes.length > 0) {
            for (var i = 0; i < notes.length; i++) {
                var item = notes[i]; 
                $("#<%=cboBranch.ClientID%>").append($("<option></option>").val(notes[i].ID).html(notes[i].BranchName));                                    
            } 
```

这是我的 c# 中的代码，当我按下添加按钮时，我无法访问分支下拉列表的选定值

```
protected void btnSaveBank_Click(object sender, EventArgs e)
    {
        if (int.Parse(cboBank.SelectedValue) != -1)
        {
            int bankID = int.Parse(cboBank.SelectedValue);
            string bankName = cboBank.SelectedItem.Text;
            int branchID = int.Parse(cboBranch.SelectedValue);//this have no value at all
            string branchName = cboBranch.SelectedItem.Text;//and also this
            string accName = txtAccountName.Text;
            string accNo = txtAccountNumber.Text;
            DateTime tdate = UtilityHelper.ConvertToDateTime(txtToDateBank.Text);
            DateTime fdate = UtilityHelper.ConvertToDateTime(txtFromDateBank.Text);

            AddContractorBankAccountDetails(bankID, bankName, 1, "branch one", accName, accNo, tdate, fdate);
        }
        else
        {
            alertBoxBank.Visible = true;
        }
    } 
```

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:47:56.453

```
 int bankID = int.Parse(cboBank.SelectedValue.toString()); 
```

最后使用 toString ....或者你也可以这样做

int bankID = int.Parse(cboBank.SelectedItem.toString());

这将取决于您的项目价值..

# java - 当 Java 属性文件中有重复的键时会发生什么？

> ID：12558210
> 
> 赞同：14
> 
> 时间：2012-09-24T02:40:23.587
> 
> 标签：java, properties, configuration

`.properties`当 Java文件中存在重复键时，定义的行为是什么？

```
thing.valueA = 1
thing.valueB = 2

thing.valueA = 99 
```

保证使用哪个值`thing.valueA`？1、99 还是未定义？这种行为是否记录在任何地方？

注意。我不是在问重复键是否被认为是最佳实践。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T03:22:15.423

根据我对 的理解`Properties`，加载方法的工作方式与此类似：

1.  将文件分成几行，
2.  看下一行，
3.  使用一些规则确定键值对（见[这里](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29)）
4.  `put()`以类似于方法的方式将键值对放入 Properties 实例中

这意味着您的示例将显示`99`.

load 方法基本上被设计成就像你坐下来打字一样工作

```
propInstance.put("Key", "Value");
propInstance.put("Other", "Thing");
etc etc 
```

要了解此行为，请参阅`Hashtable.put()`指定它使用新值更新任何重复项的文档。由于 Hashtable 是 Properties 的超类，Properties 也复制了这种行为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-22T12:13:03.300

因为这没有在类的规范中定义，所以我想说这个问题的最正确答案是结果是未定义的，并且可能因实现而异。

但是，因为 java.util.Properties 继承自 java.utils.Hashtable，所以最有可能的实现与 @jozefg 所描述的完全一样，您可以在 OpenJDK 源代码中看到 Sun 实现以这种方式工作（[Properties.java:345](http://hg.openjdk.java.net/jdk6/jdk6-gate/jdk/file/tip/src/share/classes/java/util/Properties.java)为在撰写本文时）。读取每一行，解析它以确定是否需要附加其他行，分离键和值，将键/值放入 Hashtable。

没有：

*   检查密钥是否存在
*   基于密钥的存在引发的异常
*   避免覆盖值
*   乱序处理

这一切都非常简单，基本上假设您没有使用重复键，或者如果您有，那么解决问题是您的问题。

现在，当然，要完全确定您想要查看所有可能的 JVM 或至少查看代码的目标 JVM，以确保实现没有差异，但我认为这个实现是最有可能的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-13T23:33:01.823

这对我有用。我没有使用属性，而是实例化了一个 NaehasProperties，并覆盖了 HashTable put()。

```
/**
 *  Purpose:  Properties doesn't detect duplicate keys.  So this exists.
 *  @author shaned
 */
package com.naehas.tests.configs;

import java.util.Properties;

import org.apache.log4j.Logger;

public class NaehasProperties extends Properties
{
   private static final long   serialVersionUID = 1L;

   private static final Logger log              = Logger.getLogger(NaehasProperties.class);

   public NaehasProperties()
   {
      super();
   }

   /**
    * @param defaults
    */
   public NaehasProperties(Properties defaults)
   {
      super(defaults);
   }

   /**
    * Overriding the HastTable put() so we can check for duplicates
    * 
    */
   public synchronized Object put(Object key, Object value)
   {
      // Have we seen this key before?
      //
      if (get(key) != null)
      {
         StringBuffer message = new StringBuffer("Duplicate key found: " + key + " with value: " + value);
         message.append(". Original value is: " + (String) get(key));

         log.error(message.toString());

         // Setting key to null will generate an exception and cause an exit.
         // Can not change the signature by adding a throws as it's not compatible
         // with HashTables put().
         //
         key = null;
      }

      return super.put(key, value);
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-04T05:12:14.673

它通常取最后一个值，在你的情况下它将是 99。

谢谢， 拉格万

# java - 如何在 JTextArea 字段中显示计算区域？就像一张带有税款和总计和零钱的收据

> ID：12558212
> 
> 赞同：1
> 
> 时间：2012-09-24T02:40:28.243
> 
> 标签：java, swing, jtextarea

```
 public menu() {
    super ("Welcome to my Cake Shop");

    Box box = Box.createHorizontalBox();

    container = getContentPane ();
    container.setLayout (new FlowLayout());

    cakeList = new JList (cakeNames);
    cakeList.setVisibleRowCount(10);
     ;        
        cakeList.setFixedCellHeight( 15 );       
    cakeList.setSelectionMode       (ListSelectionModel.MULTIPLE_INTERVAL_SELECTION );
    container.add( new JScrollPane( cakeList ) );

    selection = new JButton ("Selection Completed");
    selection.addActionListener(
        new ActionListener() {
    public void actionPerformed (ActionEvent event)                    copyList.setListData(
                                cakeList.getSelectedValues());

    }
    }
    );      

    container.add ( selection );
        copyList = new JList ();
    copyList.setVisibleRowCount( 10 );

    copyList.setFixedCellHeight( 15 );       
    copyList.setSelectionMode               (ListSelectionModel.SINGLE_INTERVAL_SELECTION );
    container.add( new JScrollPane( copyList ));

        setSize (280,500);
    setVisible(true);
    } 
```

我不知道如何在 JTextarea 中显示计算出的区域以及选定的项目.. 就像另一边显示的收据一样，上面有税、总计和变化..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:44:00.283

![在此处输入图像描述](../Images/fe9b538f9c881d7052204308a450a3aa.png)

```
public class TestReceipts {

    public static void main(String[] args) {
        new TestReceipts();
    }

    public TestReceipts() {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {

                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Bill me");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(600, 400);
                frame.setLocationRelativeTo(null);
                frame.setLayout(new BorderLayout());
                frame.add(new ReceiptPane());
                frame.setVisible(true);

            }
        });

    }

    protected class ReceiptPane extends JPanel {

        private JTextArea textArea;

        public ReceiptPane() {

            setLayout(new BorderLayout());
            textArea = new JTextArea();
            textArea.setEditable(false);
            add(new JScrollPane(textArea));

            List<Item> lstItems = new ArrayList<Item>(25);
            lstItems.add(new Item("Cakes", 1.5d, 5));
            lstItems.add(new Item("Cakes with cream", 2d, 5));
            lstItems.add(new Item("Cakes with chocolate", 2d, 5));
            lstItems.add(new Item("Cakes with chocolate & cream", 2.5d, 5));
            lstItems.add(new Item("Diet Coke (Can)", 2.5d, 5));

            generateReceipt(lstItems, 100d);

        }

        protected void generateReceipt(List<Item> lstItems, double amountTendered) {

            List<List<String>> lstRows = new ArrayList<List<String>>(25);

            int totalQty = 0;
            double subTotal = 0;

            NumberFormat nf = NumberFormat.getCurrencyInstance();

            for (Item item : lstItems) {
                String unit = nf.format(item.getUnitCost());
                String total = nf.format(item.getUnitCost() * item.getQty());

                lstRows.add(createRow(
                        Integer.toString(item.getQty()),
                        item.getDescription(),
                        unit,
                        total));

                subTotal += item.getUnitCost() * item.getQty();
            }

            int maxWidth = 60;
            int qtyWidth = 4;
            int unitWidth = 8;
            int totalWidth = 8;
            int descWidth = maxWidth - qtyWidth - unitWidth - totalWidth;

            StringBuilder sbHeader = new StringBuilder(maxWidth);
            sbHeader.append("Qty ");
            sbHeader.append(fillWith("Item", " ", descWidth));
            sbHeader.append(padWith("Cost", " ", unitWidth));
            sbHeader.append(padWith(" Total", " ", totalWidth));

            textArea.append(sbHeader.toString() + "\n");

            System.out.println(sbHeader.toString());

            for (List<String> row : lstRows) {
                StringBuilder sb = new StringBuilder(maxWidth);

                sb.append(padWith(row.get(0), " ", 3));
                sb.append(" ");
                String desc = row.get(1);
                if (desc.length() > descWidth) {

                    desc = desc.substring(0, descWidth);

                }
                sb.append(fillWith(desc, ".", descWidth));
                sb.append(padWith(row.get(2), " ", unitWidth));
                sb.append(padWith(row.get(3), " ", totalWidth));

                textArea.append(sb.toString() + "\n");
            }

            textArea.append(padWith("Sub-total " + padWith(nf.format(subTotal), " ", totalWidth), " ", maxWidth) + "\n");

            double tax = subTotal * 0.1d;
            textArea.append(padWith("Tax " + padWith(nf.format(tax), " ", totalWidth), " ", maxWidth) + "\n");

            double total = tax + subTotal;
            textArea.append(padWith("Total " + padWith(nf.format(total), " ", totalWidth), " ", maxWidth) + "\n");

            textArea.append(padWith("Total " + padWith(nf.format(amountTendered), " ", totalWidth), " ", maxWidth) + "\n");

            double change = amountTendered - total;
            textArea.append(padWith("Change " + padWith(nf.format(change), " ", totalWidth), " ", maxWidth) + "\n");

        }

        protected List<String> createRow(String... columns) {
            return Arrays.asList(columns);
        }
    }

    public static String fillWith(String sValue, int width) {
        StringBuilder sb = new StringBuilder(width);
        for (int index = 0; index < width; index++) {
            sb.append(sValue);
        }
        return sb.toString();

    }

    public static String fillWith(String sValue, String fill, int width) {
        return sValue + fillWith(fill, width - sValue.length());
    }

    public static String pad(int iValue, int iMinLength) {
        return pad(Integer.toString(iValue), iMinLength);
    }

    public static String pad(String sValue, int iMinLength) {
        return padWith(sValue, "0", iMinLength);
    }

    public static String padWith(String value, String padding, int iMinLength) {
        StringBuilder sb = new StringBuilder(iMinLength);
        sb.append(value);

        while (sb.length() < iMinLength) {
            sb.insert(0, padding);
        }

        return sb.toString();
    }

    protected class Item {

        private String description;
        private double unitCost;
        private int qty;

        public Item(String description, double unitCost, int qty) {
            this.description = description;
            this.unitCost = unitCost;
            this.qty = qty;
        }

        public String getDescription() {
            return description;
        }

        public double getUnitCost() {
            return unitCost;
        }

        public int getQty() {
            return qty;
        }
    }
} 
```

# angularjs - angular.js：相当于 domReady

> ID：12558220
> 
> 赞同：1
> 
> 时间：2012-09-24T02:42:18.203
> 
> 标签：angularjs, domready

警告：前面有 Angular 新手。

我在 angular.js 页面中有这段代码

```
 <div class="clearfix" ng-controller="Controller">

    <h1>Active Ideas 
    <button type="button" ng-click="search()">get Ideas</button></h1>
    <hr> 
```

然后我将我的控制器定义为：

```
function Controller($scope, $http) {
  $scope.search = function(){... 
```

它工作正常。

我想在 dom 准备好时执行 search() 函数...

我尝试从 $(function() {... 调用它，但我不知道如何从我的控制器手动执行方法

也试过了

```
$scope.$on('$viewContentLoaded', function() { 
```

但无法使其工作（也找不到太多文档......）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T02:50:34.327

您应该`search`在初始化控制器时执行。IE

```
function Controller($scope, $http) {
  $scope.search = function(){...};
  $scope.search();
} 
```

当 Angular 的依赖注入构造你的控制器时，你就知道你的视图已经编译、链接并准备好初始化代码了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T16:26:40.757

有时您需要等待第一个摘要，否则您的 DOM 将准备就绪，但它不会具有您在 $scope 中设置的任何值，假设一个带有 ng-repeat 的元素链接到 $scope 中的数组不会准备好。为了使其正常工作，您需要将代码包装在 a 中`$timeout(..., 0)`，这样您的代码将在第一个摘要之后立即执行。

# html - 具有授权的静态 html 页面（密码保护）？

> ID：12558226
> 
> 赞同：5
> 
> 时间：2012-09-24T02:43:09.153
> 
> 标签：html, authentication, authorization, password-protection

我正在创建静态 html 页面。静态是指服务器不会动态生成 html 内容。只是一组 .html 文件。

我想强制想要显示页面的用户输入用户名和密码（或至少输入密码）。未输入正确密码者不得进入本站。密码（和用户名）可以是单一的（只有一个现有的正确用户名和密码组合）。保护不必是超级安全的，只要足以阻止随机冲浪者、谷歌机器人等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:49:09.863

使用 .htaccess ，但请注意，这样您不会创建自己的登录表单，它将是一个浏览器弹出窗口。阅读有关如何使用 .htaccess 密码保护您的页面的信息，[http://www.elated.com/articles/password-protecting-your-pages-with-htaccess/](http://www.elated.com/articles/password-protecting-your-pages-with-htaccess/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T02:51:00.510

使用[`.htaccess`](http://en.wikipedia.org/wiki/Htaccess#Common_usage)文件。这将使浏览器创建一个弹出窗口以输入用户名和密码。如果密码认证失败，服务器会给出 403 Forbidden 页面。

我通常会看到这些与 Apache 服务器一起使用，但这可能会根据您的托管服务提供商或您是否甚至使用 Apache 服务器而改变。

# javascript - Rails：在ajax提交后尝试渲染视图时出错（传递了nil对象）

> ID：12558230
> 
> 赞同：0
> 
> 时间：2012-09-24T02:43:29.453
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3

我目前有一个应用程序，其中包含用户状态并支持对这些雕像的评论。一切正常，直到我决定在每个状态下方呈现一个评论表单。成功提交后，我的 create.js.erb 会将新创建的状态添加到用户的提要中。这是我的代码：

此代码呈现各个状态，位于 shared/feed_item

```
<li id="<%= feed_item.id %>" class="block">
  <%= feed_item.content %>
  <%= render 'shared/feed_comment_form', object: feed_item %> //works fine without this line
</li> 
```

我的 create.js.erb 状态

```
<% if @status.errors.any? %>
    $("#new_status").replaceWith("<%= escape_javascript(render('shared/status_form')) %>");
<% else %>
    $("<%= escape_javascript(render('shared/feed_item', feed_item: @status)) %>").hide().prependTo('.feed').fadeIn(1000);
<% end %> 
```

共享/feed_comment_form

```
<%= form_for([object, @comment], :remote => true) do |f| %>
  <%= render 'shared/error_messages_short', object: @comment %>
  <div class="field">
    <%= f.text_area :content, placeholder: "Enter comment...", rows: 1 %>
  </div>
  <%= f.submit "Post", class: "status-btn", id: "status_submit_#{object.id}" %>
<% end %> 
```

这是错误

```
Rendered statuses/create.js.erb (9.4ms)
Completed 500 Internal Server Error in 21ms

ActionView::Template::Error (undefined method `model_name' for NilClass:Class):
    1: <%= form_for([object, @comment], :remote => true) do |f| %>
    2:   <%= render 'shared/error_messages_short', object: @comment %>
    3:   <div class="field">
    4:     <%= f.text_area :content, placeholder: "Enter comment...", rows: 1 %>
  app/views/shared/_feed_comment_form.html.erb:1:in `_app_views_shared__feed_comment_form_html_erb__4480113129845938771_70094779148500'
  app/views/shared/_feed_item.html.erb:24:in `_app_views_shared__feed_item_html_erb___2728444254186520065_70094807848760'
  app/views/statuses/create.js.erb:4:in `_app_views_statuses_create_js_erb__3125686809617511276_70094769988780'
  app/controllers/statuses_controller.rb:6:in `create' 
```

我不明白为什么变量 'object' 为空，因为我在 shared/feed_item 中传递了它 'feed_item'

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:19:13.260

原来@comment 实际上是 nil 而不是“对象”。我从控制器传入@comment，我猜它没有通过ajax 传递给渲染。我不得不将@comment 更改为 Comment.new。不确定这是否是最好的解决方案

# java - 使用 -Xlint:deprecation 重新编译以获取详细信息

> ID：12558231
> 
> 赞同：19
> 
> 时间：2012-09-24T02:43:34.100
> 
> 标签：java

我需要知道如何修复这些错误说明：

```
Note: Summer.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details. 
```

这是我的代码：

```
import java.util.Calendar;
import java.util.*;

class Summer
{
    public static void main(String[] args)
    {
        Date d1 = new Date();
        Date j21 = new Date(d1.getYear(), 6, 21);
        if(d1.before(j21)) {
            long diff = j21.getTime() - d1.getTime();
            diff = diff / (1000 * 60 * 60 * 24);
            System.out.println("There are " + diff + " days until June 21st" );
        }
        else {
            long diff = d1.getTime() - j21.getTime();
            diff = diff / (1000 * 60 * 60 * 24);
            diff = 365 - diff;
            System.out.println("There are " + diff + " days until June 21st" );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T14:11:32.600

This is not an error; it's a warning message.

Your program would run as you wrote it.

The reason why the compiler is giving you this warning is because you have used a deprecated function call.

By "recompile with -Xlint", the compiler means to inform you that you need to recompile your program like this:

```
javac -Xlint abc.java 
```

If you do so, the compiler will tell you which methods are deprecated so you can remove your calls to them. (If some method is deprecated, it *usually* means that a better implementation is available and that you should use that instead of the deprecated method.)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-24T02:49:43.450

这是一个警告。您正在使用已弃用的函数调用或对象。您可以像这样重新编译以找出它发生的位置：

```
javac -Xlint:deprecation Summer.java 
```

通常，使用已弃用的库是个坏主意。它们可能会在下一个版本中消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T02:49:20.127

正如消息所说，您需要使用`-Xlint`命令行切换到`javac`命令来编译它，如下所示：

```
C:\Temp>javac -Xlint Summer.java
Summer.java:22: warning: [deprecation] getYear() in java.util.Date has been deprecated
        Date j21 = new Date(d1.getYear(), 6, 21);
                          ^
Summer.java:22: warning: [deprecation] Date(int,int,int) in java.util.Date has been deprecated
        Date j21 = new Date(d1.getYear(), 6, 21);
               ^
2 warnings 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-01T07:00:28.343

```
Note: filename.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details. 
```

对于这个错误。但它实际上是缺少 try{}catch(){} 块的警告，您可以通过编写以下语句来查看受影响的代码

```
javac -Xlint:unchecked filename.java 
```

> 它将显示未经检查的所有必须通过用户定义或系统定义的异常代码捕获的异常

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-24T10:47:48.453

这些不是错误。只是警告。这些不会影响您的程序。但是，当您将来使用已弃用的 util 类 Date 时，它​​可能会影响您的程序。

最好使用它来`java.util.Calendar` 代替`java.util.Date`它提供与 Date 相同的功能和一些额外的功能

# sql-server - Linq to Sql 隔离级别

> ID：12558245
> 
> 赞同：2
> 
> 时间：2012-09-24T02:45:31.853
> 
> 标签：sql-server, linq-to-sql, transactions, isolation-level

在 LinqToSql 中 InsertOnSubmit 调用使用的默认事务隔离级别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:25:03.503

[`TranscationScope`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)使用使用带参数的非默认构造函数构造的显式对象[`TransactionOptions`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionoptions.aspx)。这样，您将获得所需的隔离级别，并且不会想知道默认值是什么。Scott Hanselman 在[让 LINQ to SQL 和 LINQ to Entities 使用 NOLOCK中有一个示例](http://www.hanselman.com/blog/GettingLINQToSQLAndLINQToEntitiesToUseNOLOCK.aspx)

作为一个侧节点，事务隔离级别在很大程度上与插入无关，因为隔离级别指的是*读取*而不是写入的行为。

# spring - 创建 ServletContext 资源中定义的名称为“dataSource”的 bean 时出错

> ID：12558250
> 
> 赞同：2
> 
> 时间：2012-09-24T02:46:24.337
> 
> 标签：spring, hibernate, dependency-injection, maven-3

我正在使用 struts2 演示项目和 spring 来管理 Hibernate 会话。

我正在关注这篇文章[http://www.splinter.com.au/using-spring-to-manage-hibernate-sessions-in/](http://www.splinter.com.au/using-spring-to-manage-hibernate-sessions-in/)

**错误**

```
 SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoSuchFieldError: NULL
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoSuchFieldError: NULL
    at org.springframework.expression.TypedValue.<clinit>(TypedValue.java:32)
    at org.springframework.expression.spel.support.StandardEvaluationContext.setRootObject(StandardEvaluationContext.java:85)
    at org.springframework.expression.spel.support.StandardEvaluationContext.<init>(StandardEvaluationContext.java:74)
    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:124)
    at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:1299)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.evaluate(BeanDefinitionValueResolver.java:210)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:182)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 21 more
Sep 24, 2012 7:22:18 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Sep 24, 2012 7:22:18 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/1-Struts2_CRUD] startup failed due to previous errors
Sep 24, 2012 7:22:18 AM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Sep 24, 2012 7:22:18 AM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/1-Struts2_CRUD] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Sep 24, 2012 7:22:18 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/1-Struts2_CRUD] appears to have started a thread named [Abandoned connection cleanup thread] but has failed to stop it. This is very likely to create a memory leak. 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <!-- enable annotation beans definitions -->
    <context:component-scan base-package="com.pirzada"/>

    <!-- Basic DataSource Configuration -->
    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://localhost:3306/struts2_demo_db"/>
        <property name="username" value="root"/>
        <property name="password" value="786"/>
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>

        <property name="packagesToScan">
            <list>
                <value>com.pirzada.dao</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.format_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
                <prop key="hibernate.connection.useUnicode">true</prop>
                <prop key="hibernate.connection.characterEncoding">UTF-8</prop>
                <prop key="hibernate.max_fetch_depth">0</prop>
                <prop key="hibernate.jdbc.use_scrollable_resultset">true</prop>
            </props>
        </property>
    </bean>

    <!-- defining transaction manager bean using Hibernate -->
    <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <!-- enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="txManager"/>

    <!-- &lt;!&ndash; exception translation bean post processor &ndash;&gt;
   <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>
   <bean class="org.springframework.orm.hibernate4.HibernateExceptionTranslator"/>-->

    <!--  DAO beans -->
    <!--
    <bean id="userDAO"  class="org.droidaceapps.dao.UserDAOImpl">
        <property name="hibernateTemplate" ref="hibernateTemplate" />
    </bean>

    &lt;!&ndash;  Service beans &ndash;&gt;

    <bean id="userService"  class="org.droidaceapps.services.UserServiceImpl">
        <property name="userDAO" ref="userDAO" />
    </bean>-->

</beans> 
```

**web.xml**

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0">

  <display-name>Archetype Created Web Application</display-name>

    <!--<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext.xml</param-value>
    </context-param>-->

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>
            org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Spring -->
    <listener> <!-- Required for the struts2 spring plugin to work -->
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <filter> <!-- Get spring to keep the session open for the whole request, so hibernate's lazy loads work -->
        <filter-name>openSessionInViewFilter</filter-name>
        <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
        <init-param>
            <param-name>sessionFactoryBeanName</param-name>
            <param-value>sessionFactory</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>openSessionInViewFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <welcome-file-list>
        <welcome-file>/index.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

**休眠.cfg.xml**

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/struts2_demo_db</property>
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.connection.password">786</property>
        <property name="hibernate.connection.pool_size">1</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</property>

        <!-- Echo all executed SQL to stdout for debugging -->
        <property name="show_sql">true</property>
        <property name="hbm2ddl.auto">update</property>

        <property name="hibernate.connection.provider_class">org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider</property>
        <property name="hibernate.c3p0.max_size">100</property>
        <property name="hibernate.c3p0.min_size">1</property>
        <property name="hibernate.c3p0.idle_test_period">30</property>

        <mapping class="com.pirzada.domain.User"/>
        <!-- DB schema will be updated if needed -->
        <!-- <property name="hbm2ddl.auto">update</property> -->
    </session-factory>
</hibernate-configuration> 
```

**用户DAOImpl**

```
/*@Transactional is needed so that a Hibernate transaction is set up, otherwise updates won't have an affect*/
@Transactional
public class UserDAOImpl implements UserDAO {

    // So Spring can inject the session factory
    protected SessionFactory sessionFactory;
    public void setSessionFactory(SessionFactory value) {
        sessionFactory = value;
    }

    // Shortcut for sessionFactory.getCurrentSession()
    protected Session session() {
        return sessionFactory.getCurrentSession();
    }

    @Override
    public void saveOrUpdateUser(User user) {
        session().saveOrUpdate(user);
    }
} 
```

**行家**

```
<dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
        </dependency>

        <!-- javaee-api 6 dependencies -->
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>

        <!-- Spring framework dependencies -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-spring-plugin</artifactId>
            <version>2.3.4.1</version>
        </dependency>

        <!-- struts2 dependencies -->
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>2.3.4.1</version>
        </dependency>

        <!-- sl4j dependencies -->
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${slf4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${slf4j.version}</version>
        </dependency>

        <!-- Hibernate dependencies -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${hibernate.core.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.3.0.Final</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-c3p0</artifactId>
            <version>${hibernate.core.version}</version>
        </dependency>

        <!-- JDBC dependencies -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

    </dependencies> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:18:38.510

这似乎是类路径中 JAR 文件版本不兼容的问题，例如 Spring 可能需要一些更低或更高版本的 hibernate。`hibernate.core.version`- 这会很有用。尝试改用 Hibernate3，我敢打赌这是 Hibernate4 及其 Spring 支持的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T02:14:12.797

我无法提供解决方案，但由于我没有足够的积分，因此无法发表评论，因此我可以向您提供我所获得的信息，希望您也能够找到解决方案。

当我尝试运行示例项目时，我遇到了同样的错误。我正在运行 Hibernate 3.2.0.ga、Maven 2、Spring 3.2.0 和 Tomcat 7。我得到了确切的错误。我下载了源文件，暂停并在调试时运行 Tomcat。据我所知。尝试获取注册范围时出现错误。Beans 传入的是“单例”，当它查找该范围时，它返回 null 并且我得到了您描述的错误。

为了理智，我在我所有的 bean 中添加了“会话”，但我得到了一个不同的错误

```
java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
    at org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes(RequestContextHolder.java:131)
    ... 
```

我希望这可能会让你走上解决这个问题的正确轨道，因为我也很想找到解决方案。设置项目和项目基础设施是我的弱点，所以这对我来说总是一个头疼的问题。

编辑：果然，很可能是库版本冲突。在我的项目中，当我遇到错误时，我最初尝试使用最新的 Spring 和 Hibernate 3。我用 Google 和 Google 搜索找出哪些版本相互兼容，并在 Hibernate 论坛上发现了一条旧评论，显示 Spring 3.0.0.RELEASE 将与 Hibernate 3.4.0.GA 一起使用。我计划更新每一个，直到我可以得到这两个工具的最新兼容版本。

SO评论上有人说过

> 只需使用这些库，直到找到一些兼容的库。这不是成为开发人员的乐趣之一吗？

...我当然希望那家伙是在开玩笑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T04:22:46.240

您应该将 mysql-connector-java-5.1.26-bin.jar 添加到 WEB-INF/lib 中。我遇到了像你这样的问题。它会工作的。

# algorithm - 给定一个时间表，找到医生办公室的所有冲突预约

> ID：12558261
> 
> 赞同：1
> 
> 时间：2012-09-24T02:48:05.013
> 
> 标签：algorithm

你有'n'个约会。每个约会都包含开始时间和结束时间。您必须有效地重新调整所有有冲突的约会，开始时间和结束时间可以从几分钟到几年不等。我看到了帖子：[在 O(n) 时间内找到重叠的约会？](https://stackoverflow.com/questions/12283559/find-overlapping-appointments-in-on-time)这与此非常相似。但仍有一个疑问。

我的问题是，如果我们有一个排序的时间表，比如说：（6：30-6：35），（6：40-7：10）（7：25-7：40），（7：35-7： 50）等等。

我们可以不遍历日程表并确保下一个约会应该在前一个约会结束后才开始吗？在这种情况下，我们对安排约会的可能时间施加了非常严格的限制。在这个例子中，我们知道从 7:35 开始的约会在最后一个约会结束 (7:40) 之前，所以这是一个冲突。我们是否真的需要通过创建树或哈希映射来使解决方案复杂化，如类似问题的链接中评价最高的解决方案中提到的那样？

请指出可以绕过此检查并证明此条件无效的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:53:52.610

在链接的答案中，列表约会未排序，因此解决方案更复杂。您是正确的，如果约会已排序，您只需遍历列表并跟踪迄今为止看到的最新结束时间。

另外，请注意，列表的排序是`O(n lg n)`，所以如果你想要一个解决方案，你不能只是对它进行排序然后遍历它`O(n)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:53:11.860

当然，如果您说“我们有一个已排序的时间表”，则可以在 O(n) 时间内执行该解决方案。您引用的问题是假设时间没有排序。

# audio - 使用 Mp3Wrap 合并两个 mp3

> ID：12558266
> 
> 赞同：0
> 
> 时间：2012-09-24T02:48:43.773
> 
> 标签：audio, command-line

我想合并两个文件，以便它们同时播放。我可以用 mp3wrap 做到这一点，还是有其他程序？

它需要来自命令行。

我想要类似的东西

```
> Mp3Wrap output.mp3 s1.mp3 -s s2.mp3 -s s3.mp3 -s s4.mp3 s5.mp3 
```

这`-s`意味着文件将与之前的文件重叠，而不是之后添加。是否有任何命令行程序可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:58:31.467

Java、C#、VB.NET 和许多其他编程语言都可以运行命令行语句。

# html - 两个浮动的 div 并排，相同的高度（跟进）

> ID：12558268
> 
> 赞同：4
> 
> 时间：2012-09-24T02:49:06.043
> 
> 标签：html, css

我之前的问题在这里得到了回答：[两个浮动的 div 并排，相同的高度](https://stackoverflow.com/questions/12556856/two-floating-divs-side-by-side-same-height/12557058#12557058)

我的问题：有人在这里提供了一个例子：http: [//jsfiddle.net/s7ufg/18/](http://jsfiddle.net/s7ufg/18/)

如何删除图像下方的多余空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T02:53:48.120

将 vertical-align:top 添加到您的 img 规则中：

```
img {
    max-width: 100%;
    height: auto;
    width: auto;   
    vertical-align:top;
}
​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/s7ufg/20/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T02:57:05.057

`display:block;`到图像解决它

```
img {
    display:block;
    max-width: 100%;
    height: auto;
    width: auto;   
} 
```

**[jsFiddle 示例](http://jsfiddle.net/swamimayank/hpvBD/)**

# android - sqlite 返回：错误代码 = 1，msg = 没有这样的列：kitchen1

> ID：12558270
> 
> 赞同：5
> 
> 时间：2012-09-24T02:49:09.230
> 
> 标签：android, android-sqlite

我已经收到这个错误两天了，我找不到我的代码的问题。

这是数据库代码。

> SQLHandler.java

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class SQLHandler {
    public static final String KEY_ROOMMOVEHOLDER = "roommoveholder";
    public static final String KEY_ROOM = "room";

    public static final String KEY_ITEMMOVEHOLDER = "itemmoveholder";
    public static final String KEY_ITEMNAME = "itemname";
    public static final String KEY_ITEMVALUE = "itemvalue";
    public static final String KEY_ROOMHOLDER = "roomholder";

    public static final String KEY_MOVENAME = "movename";
    public static final String KEY_ID1 = "_id";
    public static final String KEY_ID2 = "_id";
    public static final String KEY_ID3 = "_id";
    public static final String KEY_ID4 = "_id";
    public static final String KEY_MOVEDATE = "movedate";

    private static final String DATABASE_NAME = "mymovingfriend";
    private static final int DATABASE_VERSION = 1;

    public static final String KEY_TODOMOVE = "todomove";
    public static final String KEY_SORTANDPURGE = "sortandpurge";
    public static final String KEY_RESEARCH = "research";
    public static final String KEY_CREATEMOVINGBINDER = "createmovingbinder";
    public static final String KEY_ORDERSUPPLIES = "ordersupplies";
    public static final String KEY_USEITORLOSEIT = "useitorloseit";
    public static final String KEY_TAKEMEASUREMENTS = "takemeasurements";
    public static final String KEY_CHOOSEMOVER = "choosemover";
    public static final String KEY_BEGINPACKING = "beginpacking";
    public static final String KEY_LABEL = "label";
    public static final String KEY_SEPARATEVALUES = "separatevalues";
    public static final String KEY_DOACHANGEOFADDRESS = "doachangeofaddress";
    public static final String KEY_NOTIFYIMPORTANTPARTIES = "notifyimportantparties";

    private static final String DATABASE_TABLE1 = "movingname";
    private static final String DATABASE_TABLE2 = "movingrooms";
    private static final String DATABASE_TABLE3 = "movingitems";
    private static final String DATABASE_TABLE4 = "todolist";

    public static final String CREATE_TABLE_1 = "CREATE TABLE " + DATABASE_TABLE1 + " (" + 
            KEY_ID1 + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
            KEY_MOVEDATE + " TEXT NOT NULL, " + 
            KEY_MOVENAME + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_2 = "CREATE TABLE " + DATABASE_TABLE2 + " (" + 
            KEY_ID2 + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
            KEY_ROOMMOVEHOLDER + " TEXT NOT NULL , " + 
            KEY_ROOM + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_3 = "CREATE TABLE " + DATABASE_TABLE3 + " (" + 
            KEY_ID3 + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
            KEY_ITEMNAME + " TEXT NOT NULL, " + 
            KEY_ITEMVALUE + " TEXT NOT NULL, " +
            KEY_ROOMHOLDER + " TEXT NOT NULL, " +   
            KEY_ITEMMOVEHOLDER + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_4 = "CREATE TABLE " + DATABASE_TABLE4 + " (" + 
            KEY_ID4 + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
            KEY_TODOMOVE + " TEXT NOT NULL, " +
            KEY_SORTANDPURGE + " TEXT NOT NULL, " + 
            KEY_RESEARCH + " INTEGER NOT NULL, " +
            KEY_CREATEMOVINGBINDER + " TEXT NOT NULL, " + 
            KEY_ORDERSUPPLIES + " TEXT NOT NULL, " +
            KEY_USEITORLOSEIT + " TEXT NOT NULL, " + 
            KEY_TAKEMEASUREMENTS + " TEXT NOT NULL, " +
            KEY_CHOOSEMOVER + " TEXT NOT NULL, " + 
            KEY_BEGINPACKING + " TEXT NOT NULL, " +
            KEY_LABEL + " TEXT NOT NULL, " + 
            KEY_SEPARATEVALUES + " TEXT NOT NULL, " +
            KEY_DOACHANGEOFADDRESS + " TEXT NOT NULL, " + 
            KEY_NOTIFYIMPORTANTPARTIES + " TEXT NOT NULL);";

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(CREATE_TABLE_1);
            db.execSQL(CREATE_TABLE_2);
            db.execSQL(CREATE_TABLE_3);
            db.execSQL(CREATE_TABLE_4);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldversion, int newversion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE1);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE2);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE3);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE4);
            onCreate(db);
        }
    }

    public SQLHandler(Context c){
        ourContext = c;
    }

    public SQLHandler open() throws SQLException{
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close(){
        ourHelper.close();
    }

    public long createMove(String smovename){
        ContentValues cv = new ContentValues();
        cv.put(KEY_MOVENAME, smovename);
        cv.put(KEY_MOVEDATE, "Not yet set");
        return ourDatabase.insert(DATABASE_TABLE1, null, cv);
    }

    public long addRooms(String sroommoveholder, String sroom){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ROOMMOVEHOLDER, sroommoveholder);
        cv.put(KEY_ROOM, sroom);
        return ourDatabase.insert(DATABASE_TABLE2, null, cv);
    }

    public long addItems(String sitemmoveholder, String sroomholder, String sitemname, String sitemvalue){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ITEMMOVEHOLDER, sitemmoveholder);
        cv.put(KEY_ROOMHOLDER, sroomholder);
        cv.put(KEY_ITEMNAME, sitemname);
        cv.put(KEY_ITEMVALUE, sitemvalue);
        return ourDatabase.insert(DATABASE_TABLE3, null, cv);
    }

    public long todoList(String todoitem){
        ContentValues cv = new ContentValues();
        cv.put(todoitem, "Done");
        return ourDatabase.insert(DATABASE_TABLE4, null, cv);
    }

    public Cursor getMove(){
        String[] columns = new String[]{KEY_ID1, KEY_MOVENAME};
        Cursor cursor = ourDatabase.query(DATABASE_TABLE1, columns, null, null, null, null, null);
        return cursor;
    }

    public String getRoom(String r) throws SQLException{
        String roomName = null;
        String[] columns = new String[]{KEY_ID2, KEY_ROOMMOVEHOLDER, KEY_ROOM};
        Cursor c = ourDatabase.query(DATABASE_TABLE2, columns, KEY_ROOM + "=" + r , null, null, null, null);

        if (c != null) {
            c.moveToFirst();
            roomName = c.getString(2);
        }
        return roomName;
    }

} 
```

每次我调用此方法时都会发生错误

```
public String getRoom(String r) throws SQLException{
        String roomName = null;
        String[] columns = new String[]{KEY_ID2, KEY_ROOMMOVEHOLDER, KEY_ROOM};
        Cursor c = ourDatabase.query(DATABASE_TABLE2, columns, KEY_ROOM + "=" + r , null, null, null, null);

        if (c != null) {
            c.moveToFirst();
            roomName = c.getString(2);
        }
        return roomName;
    } 
```

这样做的原因一定是表的声明，但我不确定。我使用 adb shell 检查了数据库，我看不到表存在并且里面有一个值，但是错误说不存在这样的列。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T02:58:40.927

如果`room`是字符类型（它是，根据`CREATE_TABLE_2`它定义为的字符串`TEXT NOT NULL`），您需要替换：

```
KEY_ROOM + "=" + r 
```

和：

```
KEY_ROOM + "= '" + r + "'" 
```

按照你的方式，你最终得到了查询段：

```
where room = kitchen1 
```

它抱怨该表中没有`kitchen1`列，这是正确的。

通过引用它，您最终得到正确的：

```
where room = 'kitchen1' 
```

这会将光标创建行变为：

```
Cursor c = ourDatabase.query(DATABASE_TABLE2, columns,
    KEY_ROOM + "='" + r + "'", null, null, null, null);
//  ^^^^^^^^^^^^^^^^^^^^^^^^^
//         Changed bit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-30T09:43:46.950

当尝试为虚拟数据输入字符串时，您应该调用`INSERT VALUES ("'text'")`而不是`INSERT VALUES ( "text" )`

解释：因为 sql 命令将希望看到`'`文本周围的引号，而外部引号`"`是为了让 java 识别您尝试传入 / 连接的内容是一个字符串

# objective-c - 获取 mapView 注解的 indexPath

> ID：12558277
> 
> 赞同：0
> 
> 时间：2012-09-24T02:50:25.153
> 
> 标签：objective-c, ios, mkmapview, mkannotation

我正在使用 plist 中的数据在地图上加载一堆图钉。这是我获取数据的方式：

```
for (int i=0; i<self.dataArray.count; i++){

    NSDictionary *dataDictionary = [self.dataArray objectAtIndex:i];
    NSArray *array = [dataDictionary objectForKey:@"Locations"];

    for (int i=0; i<array.count; i++){

        NSMutableDictionary *dictionary = [array objectAtIndex:i];

        double latitude = [[dictionary objectForKey:@"Latitude"] doubleValue];
        double longitude = [[dictionary objectForKey:@"Longitude"] doubleValue];

        CLLocationCoordinate2D coord = {.latitude =
            latitude, .longitude =  longitude};
        MKCoordinateRegion region = {coord};

        MapAnnotation *annotation = [[MapAnnotation alloc] init];
        annotation.title = [dictionary objectForKey:@"Name"];

        NSString *cityState = [dictionary objectForKey:@"City"];
        cityState = [cityState stringByAppendingString:@", "];
        NSString *state = [dictionary objectForKey:@"State"];
        cityState = [cityState stringByAppendingString:state];
        annotation.subtitle = cityState;
        annotation.coordinate = region.center;
        [mapView addAnnotation:annotation];
    }
} 
```

现在，对于每个注释，我都添加了一个 detailDisclosureButton。我想从 plist 中显示该特定位置的详细信息。问题是我需要 indexPath.section 和 indexPath.row。

如何获取 pin 的 indexPath？有没有办法找到填充注释标题的字典的 indexPath ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T03:26:14.970

`dictionary`我建议在注释对象中存储对自身的引用，而不是跟踪“部分”和“行” 。

在`MapAnnotation`类中，添加一个属性来保存对源字典的引用：

```
@property (nonatomic, retain) NSMutableDictionary *sourceDictionary; 
```

创建注释时（在现有循环中），将此属性与`title`等一起设置：

```
annotation.sourceDictionary = dictionary;
annotation.title = [dictionary objectForKey:@"Name"]; 
```

然后在详细按钮处理程序方法中（假设您使用的是`calloutAccessoryControlTapped`委托方法），您将注释对象转换为您的类，您将能够访问注释来自的原始字典：

```
MapAnnotation *mapAnn = (MapAnnotation *)view.annotation;
NSLog(@"mapAnn.sourceDictionary = %@", mapAnn.sourceDictionary); 
```

# mysql - MySQL 中的分组 JOIN 查询 - 使用 ON 与 HAVING 条件进行过滤（有什么区别吗？）

> ID：12558278
> 
> 赞同：1
> 
> 时间：2012-09-24T02:50:25.653
> 
> 标签：mysql, join, filtering

以下是伪查询，所以我不关心结果，但是以下 MySQL 查询之间是否存在任何差异（在性能、结果数量等方面）？

**查询 1**

```
SELECT u.`username`, COUNT(*) AS 'posts', u.`age`
FROM `users` u
INNER JOIN `posts` p
ON p.`user_id`=u.`id`
GROUP BY u.`id`
HAVING u.`age` > 12 
```

假设`smth`这个查询中的列只是为了`HAVING`条件而被选择的，所以结果中不需要它的值。

**查询 2**

```
SELECT u.`username`, COUNT(*) AS 'posts'
FROM `users` u
INNER JOIN `posts` p
ON p.`user_id`=u.`id` AND u.`age` > 12
GROUP BY u.`id` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T03:23:24.713

HAVING 总是在所有 JOIN 和 WHERE 过滤器完成后完成。它本质上是查询结果的过滤器。这就是为什么您不能使用它来过滤不属于查询的字段的原因。

您的查询会以不同的方式执行。查询 2 会更有效，因为它会在 JOIN 期间过滤掉用户。查询 1 将加入所有用户，提取所有数据并将其分组，然后按年龄过滤。查询 2 将仅对 12 岁以下的用户进行 GROUP 和过滤，然后对其进行 GROUP。在查询 2 中需要读取和分组的数据更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T03:05:26.023

您的查询完全不同。特别是，第二个是有效的标准 SQL 语法。第一个使用 MySQL 功能，允许在聚合中允许任何列。

特别是，`smth`第一个查询中的列来自匹配数据中的任意行。如果所有行上的所有值都相同，则两者的结果将是等效的。

如果我假设 u.id 对于用户中的每一行都是唯一的，那么结果集是等效的。但是，我认为更易读的 SQL 版本是：

```
SELECT u.`username`, COUNT(*) AS 'posts', u.`smth`
FROM `users` u  INNER JOIN
     `posts` p 
     ON p.`user_id`=u.`id`
WHERE u.smth is not null
GROUP BY u.`id`, u.username
HAVING u.`smth` IS NOT NULL 
```

这清楚地表明您希望在每一行上都有一个单独的用户名，并且您不希望 smth 为 NULL。在性能方面，这个版本都相当于你的第二个版本，三个应该差不多。

# sql - SQL 从搜索结果的开头排除“The”

> ID：12558281
> 
> 赞同：2
> 
> 时间：2012-09-24T02:51:05.080
> 
> 标签：sql

我试图从列中值的开头排除“A”和“The”。我正在寻找以字母“A”开头的艺术家，例如：

```
 AND artist LIKE LOWER('A%') AND artist NOT LIKE LOWER('A %') 
```

问题是这会给我以“A％”开头的艺术家，而不是给我以“A％”开头的艺术家，但它也会排除以“AA％”开头的艺术家

如果某个乐队决定将自己命名为“A Apple”，他们将被排除在我的搜索之外。我如何在不排除“AA%”的情况下进行此查询

提前致谢！周杰伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:57:36.137

```
AND artist LIKE ('A%')
AND (artist NOT LIKE LOWER('A %') OR artist LIKE ('A A%')) 
```

我希望这是一个爱好或小型数据库，因为 LIKE 语句对性能不是很友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:05:08.733

这是一个常见且麻烦的问题，通常通过在显示名称“滚石乐队”旁边包含“滚石乐队”形式的艺术家姓名的第二个字段来解决。针对前者执行搜索，但使用后者显示结果。

但是如果你被你所拥有的数据所困扰，你需要一些类似的东西：

```
AND UPPER(artist) LIKE 'A%'
AND ( UPPER(artist) LIKE 'A A%' OR NOT (UPPER(artist) LIKE 'A %') ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:14:13.047

如果您可以控制数据库结构，特别是如果这是一个大型数据库，那么简单地添加一个包含艺术家姓名的“SearchArtist”列可能会更有益，因为它会出现在搜索中或用于排序。这样，您可以显示全名，但按可搜索名称排序：

通过 searchArtist 选择艺术家表格顺序；

这样滚石乐队就会出现在荒原狼之前的名单中......

# ruby-on-rails - 我如何知道我的 rails 中安装的应用服务器是什么？

> ID：12558283
> 
> 赞同：0
> 
> 时间：2012-09-24T02:51:16.400
> 
> 标签：ruby-on-rails, appserver

我在 Windows 中安装了 rails，是否有命令知道我的 rails 中安装的应用服务器版本是什么？什么是命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T03:12:02.763

rails 的版本在 gemfile 中指定

当您说 rails new my_app 时，它会生成整个项目（应用程序、日志、配置、数据库等）。还将生成一个 gemfile 。如果您打开 gemfile，您将能够找到您的 rails 的版本。

你会发现类似 gem rails , '3.2.1'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:27:40.573

运行服务器时，您可以看到服务器名称和版本。
例如。运行导轨

=> 启动 WEBrick

=> Rails 3.0.5 应用程序开始在 http 上开发：

=> 使用 -d 调用以分离

=> Ctrl-C 关闭服务器

[2012-09-24 12:23:38] INFO **WEBrick 1.3.1**

[2012-09-24 12:23:38] 信息 ruby​​ 1.9.2 (2011-02-18) [i386-mingw32]

[2012-09-24 12:23:38] 信息 WEBrick::HTTPServer#start: pid=10116 端口=3000

# android - android - 活动切换时意外的短暂方向变化

> ID：12558287
> 
> 赞同：1
> 
> 时间：2012-09-24T02:52:02.030
> 
> 标签：android

我想在我的 android 应用程序中动态设置屏幕的方向。为此我使用

```
activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT)); 
```

等等。到目前为止效果很好，但是当我从一项活动转到下一项活动时，我偶尔会遇到不需要的短暂方向切换。当我以某种方式握住设备时，就会出现问题，这将使传感器将方向设置为与以编程方式选择的方向不同。

我能够在以下简单的应用程序中重现该问题，该应用程序基本上由两个活动组成，让用户通过按下按钮切换到另一个活动。为简单起见，我将活动中的方向始终设置为横向，但请记住，我需要在运行时选择方向，因此将方向设置移动到清单不会对我有用。

任何如何避免这种不需​​要的偶尔屏幕方向切换的建议都会很棒。

谢谢

马丁

```
public class A_Activity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main_a);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    Button b = (Button) findViewById(R.id.button_a);
    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            startActivity(new Intent(A_Activity.this, B_Activity.class));
        }
    });

}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

}
} 
```

第二个活动 - B_Activity - 以与在按钮按下时启动 A_Activity 相同的方式定义

布局很简单

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button_a"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:text="Click A" />

</LinearLayout> 
```

和清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.switchactivitytest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".A_Activity"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:label="A Activity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".B_Activity"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:label="B Activity" >
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:01:43.650

将此用于清单中的活动，而不是以编程方式更改方向

```
android:screenOrientation="landscape" 
```

# excel - 如何在excel中根据日期和帐号返回一系列信息？

> ID：12558288
> 
> 赞同：0
> 
> 时间：2012-09-24T02:52:05.010
> 
> 标签：excel, excel-2010, invoice

我试图弄清楚如何根据日期范围和帐户信息返回全方位的信息。我有一个包含所有数据的电子表格，如下所示： ![在此处输入图像描述](../Images/0fdc3471443d55e804257f8d8f16e35a.png)

我需要弄清楚如何根据他们的帐号和在某个月份内将此信息获取到发票页面。有点像这样。布局不必相同，我只需要它根据标准以相同的方式将其组合在一起。

![在此处输入图像描述](../Images/63376f80f559f19db677f477269314a1.png)

有没有办法做到这一点？我不太了解 excel，不知道该用什么谷歌搜索或使用什么来执行此操作。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T05:21:28.530

单击[此](https://docs.google.com/file/d/0BwAPcQlXI3pYZGt0VXRxRGVwREE/edit?usp=sharing)下载解决方案。

我创建了一个名为 InvoiceDetails 的变量范围，它将捕获与给定帐号和月份对应的范围。您必须输入帐号和月份（可在源表中找到）并点击其上方的“生成发票”按钮，才能在下表中列出发票。

请注意，表格格式的输入数据，不要更改相同。将数据表中的值粘贴到源表中后，不要忘记先按帐号（A 到 Z）排序，然后按日期（从最旧到最新）排序，否则您可能会生成不同的结果。

例如，我使用了您在问题屏幕截图中的数据，并插入了一个字段来捕获源表中的月份。

当您在发票表中输入月份时，请确保在您要插入的月份的第一天输入，并且只输入您填写的源表中可用的值，否则会出现错误。您可以为此设置验证。

您将此作为创建自己的工作簿的想法/基础。

如果您有任何错误，请告诉我。

或者您也可以使用简单的数据透视表来生成这些。

# java - Java JTable 无法设置列宽

> ID：12558291
> 
> 赞同：2
> 
> 时间：2012-09-24T02:52:54.823
> 
> 标签：java, swing, jtable, width, jtableheader

我尝试为列设置宽度，但它根本不起作用，我一直在寻找答案几个小时，这是我的代码，谁能告诉我问题出在哪里。提前致谢。

```
 String [] columns = {"Day","StratTime","EndTime","Description"};
    mtbl = new DefaultTableModel();

    tbl = new JTable(mtbl);
    jsPane = new JScrollPane(tbl);

    tbl.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);

    for (int i = 0; i < Timedcolumns.length; i++) {
        mtbl.addColumn(columns[i]);
        tbl.getColumnModel().getColumn(i).setPreferredWidth(100);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T03:40:41.337

由于`addColumn()`,`JTable`可能最终重建所有列。这是一个片段`JTable.tableChanged()`：

```
public void tableChanged(TableModelEvent e) {
    if (e == null || e.getFirstRow() == TableModelEvent.HEADER_ROW) {
        ...

        if (getAutoCreateColumnsFromModel()) {
    // This will effect invalidation of the JTable and JTableHeader.
            createDefaultColumnsFromModel();
    return;
    }
        ... 
```

`TableModelEvent.HEADER_ROW``addColumn()`由于执行的结果而被解雇`DefaultTableModel`。`addColumn`执行`fireTableStructureChanged`：

```
public void fireTableStructureChanged() {
    fireTableChanged(new TableModelEvent(this, TableModelEvent.HEADER_ROW));
} 
```

您最终仅在添加的最后一列上设置首选大小，因为其余列由`createDefaultColumnsFromModel()`.

总而言之，在单独的循环中创建所有列之后设置首选大小可能更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T03:08:58.807

我发现除了设置列的 PreferredWidth 之外，设置 maxWidth 也很有帮助。根据您要完成的任务，您可能还希望设置 minWidth。

```
 for (int i = 0; i < Timedcolumns.length; i++) {
     mtbl.addColumn(columns[i]);
     tbl.getColumnModel().getColumn(i).setPreferredWidth(100);
     tbl.getColumnModel().getColumn(i).setMaxWidth(100);
 } 
```

# android - ListView 无法显示

> ID：12558292
> 
> 赞同：0
> 
> 时间：2012-09-24T02:52:58.803
> 
> 标签：android, listview

这是我第一次使用 ListView 并且已经尝试了许多方法来使其可行。首先，我在 xml 文件中使用字符串数组指定“android:entries”，它显示但我无法激活 onClickListener。另一种方法与我的方法相似，有些是我使用“扩展 Acitvity”的地方。提前感谢您帮助我。

基本上，我想为列表中的每个项目使用自定义的 textView 行，并为每个可点击的行显示一个 toast。我的问题是，当我尝试显示此活动时，应用程序会崩溃。我不确定问题出在哪里，因为没有任何语法错误。错误消息是（对不起，我会放一张图片，但我不能 - 新用户）：

*   致命例外：主要
*   java.lang.RuntimeException: 无法启动活动 ComponentInfo(edu.....)
*   在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2202)
*   在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2237)
*   在 android.app.ActivityThread.access$600(ActivityTHread.java:139)
*   在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
*   在 android.os.Handler.dispatchMessage(Handler.java:99)
*   在 android.os.Looper.loop(Loooper.java:154)
*   在 android.app.ActivityThread.main(ActivityThread.java:4974)
*   在 java.lang.reflect.Method.invokeNative(Native Method)
*   在 java.lang.reflect.Method.invoke（方法 java:511）
*   在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
*   在 com.android.internal.os.ZygoteInit.main(ZygotaInit.java:551)
*   在 dalvik.system.NativeStart.main（本机方法）
*   引起：java.lang.UnsupportedOperationException: addView(View, LayoutParams)...
*   在 android.widget.AdapterView.addView(AdapterView.java:471)
*   在 android.view.LayoutInflater.rInflate(LayoutInflater.java:743)
*   在 android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
*   在 android.view.LayoutInflater.rInflate(LayoutInflater.java:489)
*   在 android.view.LayoutInflater.rInflate(LayoutInflater.java:396)
*   在 android.view.LayoutInflater.rInflate(LayoutInflater.java:352)
*   在 com.android.internal.policy.impl.PhoneWindows.setContentView(PhoneWindow.java ...)
*   在 android.app.Activity.setContentView(Activity.java:1892)
*   在 edu.nyp.wonderful.Menu.onCreate(Menu.java:14)
*   在 android.app.Activity.performCreate(Activity.java:4538)
*   在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
*   在 android.app.ActivityThread.performLaunchActivity(ActivityTHread.java:2158)
*   ... 11 多行（我无法显示更多要输入的内容）

***菜单.java v***

```
package edu.nyp.wonderful;

import android.app.ListActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class Menu extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menu);

        Log.d("Menu:", "after set content view");

        String[] items = { "Set Pins", "View Pins", "List of Pins", "Email Summary", "Edit Session's Info" };

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.menu_row, R.id.menu_name, items);
        setListAdapter(adapter);
        Log.d("Menu:", "after setting adapter");
    }

    protected void onListItemClick(ListView l, View v, int position, long id){
        super.onListItemClick(l, v, position, id);
        Toast.makeText(getApplicationContext(), "Clicked position: " + position, Toast.LENGTH_SHORT).show();
    }
} 
```

***菜单.xml v***

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/background" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginBottom="10dp" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="54dp"
            android:layout_height="60dp"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="10dp"
            android:src="@drawable/logo" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Menu"
            android:textColor="#DC1700"
            android:textStyle="bold"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="30dp"
            android:textSize="25sp"
            android:typeface="serif" />
    </LinearLayout>

    <View android:id="@+id/separator1" 
         android:background="#000000" 
         android:layout_width = "fill_parent"
         android:layout_height="1dp"
         android:layout_marginBottom="10dp" />

    <ListView
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="#000000"
        android:dividerHeight="1dp" >

        <TextView android:id="@+id/android:empty"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="nothing" />

    </ListView>
</LinearLayout> 
```

* **menu_row.xml v***

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/menu_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="#000000"
    android:textSize="23dp"
    android:shadowRadius="5"
    android:shadowColor="#000000"
    android:shadowDy="3"
    android:shadowDx="3"
    android:layout_marginLeft="10dp"
    android:layout_marginBottom="10dp"
    android:layout_marginTop="10dp" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:14:17.850

是的，这就是问题所在。

```
android:id="@+id/android:list" 
```

它应该是

```
android:id="@android:id/list" 
```

修复它并检查，如果问题仍然存在，请报告。

**更新：**我不敢相信我之前没有看到它：P

你有一个`TextView`里面的`Listview`. 这是不可能的。如果您打算使用“空视图”，请将它们都放在 LinearLayout/FrameLayout 中。但是 Listview 不能包含 TextView，它们应该彼此相邻。然后，确保在这种情况下将“ListView”中的“Empty View”属性设置为 Textview 的 id `@android:id/empty`（也请更正）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:50:01.707

尝试像这样更改您的代码

```
public class Menu extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menu);

        Log.d("Menu:", "after set content view");

        String[] items = { "Set Pins", "View Pins", "List of Pins", "Email Summary", "Edit Session's Info" };

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.menu_row, R.id.menu_name, items);

        ListView lv  = getListView();
        lv.setAdapter(adapter);
        Log.d("Menu:", "after setting adapter");
    }

    protected void onListItemClick(ListView l, View v, int position, long id){
        super.onListItemClick(l, v, position, id);
        Toast.makeText(getApplicationContext(), "Clicked position: " + position, Toast.LENGTH_SHORT).show();
    }
} 
```

告诉我它是否有效...

# java - Swing 组件的重量有多轻？

> ID：12558300
> 
> 赞同：3
> 
> 时间：2012-09-24T02:54:04.153
> 
> 标签：java, swing, awt

> **可能重复：**
> [Swing 组件重量轻？](https://stackoverflow.com/questions/416947/swing-components-are-light-weight)

对此有不同的答案，但问题是，每个地方都解释过它只是说 AWT 为每个组件使用本机窗口，而在这些示例中没有使用 Swing，它在 Swing 中是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T02:59:38.080

我不确定我是否完全理解你的问题，但这里是：

大多数 Swing 组件都是**完全轻量级**的——它们是用纯 Java 代码实现的。就操作系统而言，Swing 轻量级组件并不存在。

然而你应该知道 Swing 总是使用**至少一个**本地组件（通常是顶层窗口）。Swing 的其余部分（所有轻量级组件）都已实现，以便它们在此本机组件中执行绘制。

# resharper - 如何让 Resharper 停止将我的测试功能标记为未使用？

> ID：12558303
> 
> 赞同：3
> 
> 时间：2012-09-24T02:54:35.807
> 
> 标签：resharper, xunit, resharper-7.0

我正在使用 xUnit 进行单元测试，在我的一个测试类中，我有 65 个测试。Resharper 将**其中一个**标记为未使用，并将文件标记为黄色/橙色，直到我将其删除。我不想删除它。我想保留那个测试方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T04:42:45.207

我假设您已安装 xunitcontrib for ReSharper，因为其他测试方法未标记为未使用。我还假设您的方法是公开的并且具有与其他测试方法（例如，`Fact`或`Theory`）相同的测试属性。如果不是这种情况，您可能会检查您是否有此方法的属性的外部注释（它们由用于 ReSharper 的 xunitcontrib 提供）。

ReSharper 错误报告问题的可能原因之一是它的某些缓存尚未更新。如果您可以重现该问题（鉴于您提出问题已过去将近一个月，这似乎不太可能），请尝试通过菜单 RESHARPER -> 选项 -> 常规 -> 清除缓存清除缓存，然后重新启动 Visual Studio。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:36:49.327

也可能是 ReSharper 注释已关闭。

您可以通过 RESHARPER > 选项 > 代码检查 - 代码注释来验证这一点。

# iphone - 如何从 NetService 获取 IP 地址

> ID：12558305
> 
> 赞同：4
> 
> 时间：2012-09-24T02:54:50.720
> 
> 标签：iphone, xcode, ip-address, data-conversion, nsnetservice

当我得到一个 NetService 对象时，我尝试这样做：</p>

```
NSNetService *ss=[netArray objectAtIndex:indexPath.row];
ss.delegate=self;
[ss resolveWithTimeout:3.0]; 
```

关于委托方法：</p>

```
-(void)netServiceDidResolveAddress:(NSNetService *)sender
{
   NSArray *address=sender.addresses;
   NSData *addressData=[NSData dataWithBytes:address length:sizeof(address)];
   /*
   How?
   */
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-25T10:39:51.597

```
// Sent when addresses are resolved
- (void)netServiceDidResolveAddress:(NSNetService *)netService
{
    // Make sure [netService addresses] contains the
    // necessary connection information
    if ([self addressesComplete:[netService addresses]
                 forServiceType:[netService type]]) {
        [services addObject:netService];
    }
}

// Verifies [netService addresses]
- (BOOL)addressesComplete:(NSArray *)addresses
           forServiceType:(NSString *)serviceType
{

    // Perform appropriate logic to ensure that [netService addresses]
    // contains the appropriate information to connect to the service

    NSData *myData = nil;
    myData = [addresses objectAtIndex:0];

    NSString *addressString;
    int port=0;
    struct sockaddr *addressGeneric;
    struct sockaddr_in addressClient;

    addressGeneric = (struct sockaddr *) [myData bytes];

    switch( addressGeneric->sa_family ) {
        case AF_INET: {
            struct sockaddr_in *ip4;
            char dest[INET_ADDRSTRLEN];
            ip4 = (struct sockaddr_in *) [myData bytes];
            port = ntohs(ip4->sin_port);
            addressString = [NSString stringWithFormat: @"IP4: %s Port: %d", inet_ntop(AF_INET, &ip4->sin_addr, dest, sizeof dest),port];
        }
            break;

        case AF_INET6: {
            struct sockaddr_in6 *ip6;
            char dest[INET6_ADDRSTRLEN];
            ip6 = (struct sockaddr_in6 *) [myData bytes];
            port = ntohs(ip6->sin6_port);
            addressString = [NSString stringWithFormat: @"IP6: %s Port: %d",  inet_ntop(AF_INET6, &ip6->sin6_addr, dest, sizeof dest),port];
        }
            break;
        default:
            addressString=@"Unknown family";
            break;
    }

    NSLog(@"Client Address: %@",addressString);

    return YES;
} 
```

这是输出客户端地址：IP4：192.168.69.38 端口：58612

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:28:38.153

我发现[了一篇](http://blog.evandavey.com/2009/07/how-to-convert-nsdata-to-nsstring.html)建议以下解决方案的帖子。

```
NSString* addressString = [[NSString alloc] initWithData:addressData encoding:NSASCIIStringEncoding]; 
```

虽然它确实**为**我输出人类可读的字符串......它可能对你有用。

* * *

这是我打印时写入控制台的内容`NSData`对象时写入控制台的内容。

```
<10026a5e 0a0a7893 00000000 00000000> 
```

同时，我发现**第二段**是**十六进制**形式。在这个例子中它是...

```
10.10.120.147 // 0a0a7893 
```

* * *

我编写了一个进行转换的[主机类](https://gist.github.com/3782610)。`NSString`可以在此处[找到](http://forums.macrumors.com/showthread.php?t=977076)扩展名。我只使用前 16 字节地址，而忽略所有其他地址。随意扩展课程。

# c++ - std::ostringsteam 和 std::string 出错

> ID：12558309
> 
> 赞同：0
> 
> 时间：2012-09-24T02:55:59.007
> 
> 标签：c++

嗨，我想从一个函数中保存许多不同的 csv 文件，这些文件具有基于不同双精度值的命名约定。我使用 for 循环执行此操作并传递一个字符串值以不同方式保存每个 .csv 文件。下面是我正在尝试做的一个例子，期望的结果是

```
1.1_file.csv
1.2_file.csv 
```

但相反我得到

```
1.1_file.csv
1.11.2_file.csv 
```

这是一个工作示例代码，我该怎么做才能解决这个问题

```
#include <sstream>
#include <iomanip>
#include <cmath>
#include <iostream>
#include <vector>

int main(){
    std::string file = "_file.csv";
    std::string s;
    std::ostringstream os;
    double x;

    for(int i = 0; i < 10; i++){
        x = 0.1 + 0.1 *i;
        os << std::fixed << std::setprecision(1);
        os << x;
        s = os.str();
        std::cout<<s+file<<std::endl;
        s.clear();
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T02:57:54.150

`ostringstream`不会在循环的每次迭代中重置，因此您只需在每次迭代中添加它`x`；将其放在 的范围内，`for`以便`os`在每次迭代时成为不同的干净对象，或使用 . 重置内容`os.str("")`。

此外，该变量`s`是不必要的；你可以做

```
std::cout << os.str() + file << std::endl; 
```

而且您不需要`s`并且消除了制作字符串副本的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T02:59:29.210

您的 ostringstream 会为循环的每次迭代附加。您应该清除它并重用它，如下所示（礼貌：[如何重用 ostringstream？](https://stackoverflow.com/questions/624260/how-to-reuse-an-ostringstream)关于如何重用`ostringstream`）

```
#include <sstream>
#include <iomanip>
#include <cmath>
#include <iostream>
#include <vector>

int main() {

    std::string file = "_file.csv";
    std::string s;

    double x;
    std::ostringstream os;

    for (int i = 0; i < 10; i++) {

        x = 0.1 + 0.1 * i;
        os << std::fixed << std::setprecision(1);
        os << x;
        s = os.str();
        std::cout << s + file << std::endl;
        os.clear();
        os.str("");
    }

    return 0;
} 
```

# geometry - 如何使用 webgl 绘制圆柱几何体？

> ID：12558310
> 
> 赞同：0
> 
> 时间：2012-09-24T02:56:11.033
> 
> 标签：geometry, webgl

我需要使用 webgl 绘制圆柱几何体，但不知道如何实现。参数可能是半径，细分和底面的两个中心点。任何想法将不胜感激，谢谢~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T03:04:40.970

从根本上说，您将使用三角形构建它。最容易将其视为“n 面”棱镜。顶面和底面需要由三角形“扇形”组成，每个三角形在中心共享一个点。

您将需要使用简单的数学（包括三角函数）来计算每个三角形的点的位置。

如果您不知道如何使用 WebGL 绘制三角形，请在[learningwebgl.com](http://learningwebgl.com/blog/?page_id=1217)上查看 NeHe 的优秀 WebGL 指南。

# javascript - 基于垂直滚动的jquery添加/删除类？

> ID：12558311
> 
> 赞同：79
> 
> 时间：2012-09-24T02:56:26.590
> 
> 标签：javascript, jquery, css

所以基本上我想在用户向下滚动一点后从“标题”中删除该类并添加另一个类来改变它的外观。

试图找出最简单的方法，但我无法让它发挥作用。

```
$(window).scroll(function() {    
    var scroll = $(window).scrollTop();    
    if (scroll <= 500) {
        $(".clearheader").removeClass("clearHeader").addClass("darkHeader");
    }
} 
```

CSS

```
.clearHeader{
    height: 200px; 
    background-color: rgba(107,107,107,0.66);
    position: fixed;
    top:200;
    width: 100%;   
}    

.darkHeader { height: 100px; }

.wrapper {
    height:2000px;
} 
```

HTML

```
<header class="clearHeader">    </header>
<div class="wrapper">     </div> 
```

我确定我在做一些非常基本的错误。

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-09-24T03:01:39.453

```
$(window).scroll(function() {    
    var scroll = $(window).scrollTop();

     //>=, not <=
    if (scroll >= 500) {
        //clearHeader, not clearheader - caps H
        $(".clearHeader").addClass("darkHeader");
    }
}); //missing ); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/ayGwn/1/)

此外，通过删除`clearHeader`类，您`position:fixed;`将从元素中删除 以及通过选择器重新选择它的能力`$(".clearHeader")`。我建议不要删除该类并在其之上添加一个新的 CSS 类以用于样式目的。

如果您想在用户向上滚动时“重置”类添加：

```
$(window).scroll(function() {    
    var scroll = $(window).scrollTop();

    if (scroll >= 500) {
        $(".clearHeader").addClass("darkHeader");
    } else {
        $(".clearHeader").removeClass("darkHeader");
    }
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/ayGwn/3/)

**编辑：**这是缓存标头选择器的版本 - 更好的性能，因为它不会在每次滚动时查询 DOM，并且您可以安全地删除/添加任何类到标头元素而不会丢失参考：

```
$(function() {
    //caches a jQuery object containing the header element
    var header = $(".clearHeader");
    $(window).scroll(function() {
        var scroll = $(window).scrollTop();

        if (scroll >= 500) {
            header.removeClass('clearHeader').addClass("darkHeader");
        } else {
            header.removeClass("darkHeader").addClass('clearHeader');
        }
    });
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/ayGwn/4/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-13T18:56:26.103

如果你喜欢，可以添加一些过渡效果：

[http://jsbin.com/boreme/17/edit?html,css,js](http://jsbin.com/boreme/17/edit?html,css,js)

```
.clearHeader {
  height:50px;
  background:lightblue;
  position:fixed;
  top:0;
  left:0;
  width:100%;

  -webkit-transition: background 2s; /* For Safari 3.1 to 6.0 */
  transition: background 2s;
}

.clearHeader.darkHeader {
 background:#000;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-19T15:35:08.327

它是我的代码

```
jQuery(document).ready(function(e) {
    var WindowHeight = jQuery(window).height();

    var load_element = 0;

    //position of element
    var scroll_position = jQuery('.product-bottom').offset().top;

    var screen_height = jQuery(window).height();
    var activation_offset = 0;
    var max_scroll_height = jQuery('body').height() + screen_height;

    var scroll_activation_point = scroll_position - (screen_height * activation_offset);

    jQuery(window).on('scroll', function(e) {

        var y_scroll_pos = window.pageYOffset;
        var element_in_view = y_scroll_pos > scroll_activation_point;
        var has_reached_bottom_of_page = max_scroll_height <= y_scroll_pos && !element_in_view;

        if (element_in_view || has_reached_bottom_of_page) {
            jQuery('.product-bottom').addClass("change");
        } else {
            jQuery('.product-bottom').removeClass("change");
        }

    });

}); 
```

它的工作正常

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-14T10:12:27.037

# 纯 JavaScript

这是在滚动期间处理类的仅限 javascript 的示例。

```
const navbar = document.getElementById('navbar')

// OnScroll event handler
const onScroll = () => {

  // Get scroll value
  const scroll = document.documentElement.scrollTop

  // If scroll value is more than 0 - add class
  if (scroll > 0) {
    navbar.classList.add("scrolled");
  } else {
    navbar.classList.remove("scrolled")
  }
}

// Use the function
window.addEventListener('scroll', onScroll)
```

```
#navbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  height: 60px;
  background-color: #89d0f7;
  box-shadow: 0px 5px 0px rgba(0, 0, 0, 0);
  transition: box-shadow 500ms;
}

#navbar.scrolled {
  box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.25);
}

#content {
  height: 3000px;
  margin-top: 60px;
}
```

```
<!-- Optional - lodash library, used for throttlin onScroll handler-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.js"></script>
<header id="navbar"></header>
<div id="content"></div>
```

## 一些改进

您可能希望限制处理滚动事件，因为处理程序逻辑变得更加复杂，在这种情况下`throttle`，来自`lodash`lib 就派上用场了。

如果您正在做 spa，请记住，一旦不需要事件侦听器，您就需要清除`removeEventListener`它们（例如，在`onDestroy`组件的生命周期钩子期间，例如`destroyed()`Vue，或者可能`useEffect`是 React 的钩子的返回函数）。

使用 lodash 进行节流的示例：

```
 // Throttling onScroll handler at 100ms with lodash
    const throttledOnScroll = _.throttle(onScroll, 100, {})

    // Use
    window.addEventListener('scroll', throttledOnScroll) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T02:59:33.260

这个值是有意的吗？`if (scroll <= 500) { ...`这意味着它发生在 0 到 500 之间，而不是 500 或更大。在原始帖子中，您说*“在用户向下滚动一点之后”*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-23T15:59:34.933

在类似的情况下，我想避免由于性能问题而总是调用 addClass 或 removeClass。我将滚动处理函数拆分为两个单独的函数，根据当前状态使用。我还根据这篇文章添加了去抖功能：[https ://developers.google.com/web/fundamentals/performance/rendering/debounce-your-input-handlers](https://developers.google.com/web/fundamentals/performance/rendering/debounce-your-input-handlers)

```
 var $header = jQuery( ".clearHeader" );         
        var appScroll = appScrollForward;
        var appScrollPosition = 0;
        var scheduledAnimationFrame = false;

        function appScrollReverse() {
            scheduledAnimationFrame = false;
            if ( appScrollPosition > 500 )
                return;
            $header.removeClass( "darkHeader" );
            appScroll = appScrollForward;
        }

        function appScrollForward() {
            scheduledAnimationFrame = false;
            if ( appScrollPosition < 500 )
                return;
            $header.addClass( "darkHeader" );
            appScroll = appScrollReverse;
        }

        function appScrollHandler() {
            appScrollPosition = window.pageYOffset;
            if ( scheduledAnimationFrame )
                return;
            scheduledAnimationFrame = true;
            requestAnimationFrame( appScroll );
        }

        jQuery( window ).scroll( appScrollHandler ); 
```

也许有人觉得这很有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-09T03:27:41.113

这是基于@shahzad-yousuf 的回答，但我只需要在用户向下滚动时压缩菜单。我使用顶部容器滚动“屏幕外”的参考点来启动“挤压”

```
 <script type="text/javascript">
    $(document).ready(function (e) {
      //position of element
      var scroll_position = $('div.mainContainer').offset().top;
      var scroll_activation_point = scroll_position;
      $(window).on('scroll', function (e) {
        var y_scroll_pos = window.pageYOffset;
        var element_in_view = scroll_activation_point < y_scroll_pos;
        if (element_in_view) {
          $('body').addClass("toolbar-compressed ");
          $('div.toolbar').addClass("toolbar-compressed ");
        } else {
          $('body').removeClass("toolbar-compressed ");
          $('div.toolbar').removeClass("toolbar-compressed ");
        }
      });

    });   </script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-24T11:07:55.837

对于 Android 移动 $(window).scroll(function() 和 $(document).scroll(function() 可能会或可能不会工作。所以请改用以下内容。

```
jQuery(document.body).scroll(function() {
        var scroll = jQuery(document.body).scrollTop();

        if (scroll >= 300) {
            //alert();
            header.addClass("sticky");
        } else {
            header.removeClass('sticky');
        }
    }); 
```

这段代码对我有用。希望它会帮助你。

# java - 基于文本的水印？

> ID：12558313
> 
> 赞同：1
> 
> 时间：2012-09-24T02:56:43.110
> 
> 标签：java, html, css, glassfish, watermark

我正在寻找一个基于文本的水印，它只显示在我们 GlassFish 运行站点的开发/测试版本中。

[https://stackoverflow.com/a/2486786/1174838](https://stackoverflow.com/a/2486786/1174838)主要做我想要的。唯一的问题是文本水印遮住了一些按钮。如何在所有内容背后制作水印但仍然可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:52:26.777

使用以下混合物：

```
z-index:/\*some high value\*/; 
```

&

```
user-select:none; 
```

并且还使用相对/绝对定位将水印放到正确的位置，例如：

```
position:absolute;
bottom:0;
right:0; 
```

*（注意 user-select:none; 此时需要供应商前缀）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:01:28.510

试一试`z-index`，假设您使用绝对定位放置水印。

# jmeter - JMeter中的“线程组”是什么意思？

> ID：12558323
> 
> 赞同：8
> 
> 时间：2012-09-24T02:58:15.387
> 
> 标签：jmeter, threadgroup

我不清楚JMeter中“线程组”的含义是什么。这是否意味着所有测试（Java 请求等）都属于在一个线程中运行的某个线程组，或者该线程组中的每个测试都在一个单独的线程中运行？我无法从 JMeter 文档或谷歌搜索中清楚地了解这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T05:37:46.197

解释见：

*   [http://jmeter.apache.org/usermanual/test_plan.html](http://jmeter.apache.org/usermanual/test_plan.html)

A`thread group`是一组执行相同场景的线程。设置配置中的迭代次数。一旦每个线程的迭代次数过去，线程行为是根据加速和销毁来定义的。

请注意，从 2.8 版开始，您将能够延迟创建线程，直到线程必须开始工作，这将适用于使用非常短寿命线程和许多线程的测试。

线程组可以看作是一组虚拟用户，但不一定。根据您开发测试的方式，它可以是其他东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T05:51:58.177

据我了解（我想知道的），JMeter 线程组中的所有操作在每个线程和迭代中按顺序运行一次。因此，这意味着线程组中的每个操作都不会在其自己的单独线程集中运行，而是与线程组中的其他操作共享每个线程。

例如，

*   线程组 1
    *   操作 1
    *   操作 2
    *   操作 3

如果我们安排这个线程组 Thread Group 1 在 3 个线程中运行，会发生什么，

*   操作 1、操作 2 和操作 3 将在线程 1 中执行。
*   操作 1、操作 2 和操作 3 将在线程 2 中执行。
*   操作 1、操作 2 和操作 3 将在线程 3 中执行。等等

以前我不确定这些操作中的每一个是否都在其自己的单独线程上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T03:22:38.830

线程 = 模拟用户。
所以线程组=用户。
查看[jMeter Plugins 线程组控制器](http://code.google.com/p/jmeter-plugins/wiki/UltimateThreadGroup)，它比默认线程组具有更多的控制权。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-13T14:56:43.780

只是为了在我自己的调查之后进一步做出贡献（我希望清楚和完整）：

1.  ThreadGroup 具有如上所述的请求/“操作”（在 Manjula Weerasinge 的摘要中），但也具有用户和循环配置。
2.  ThreadGroup 为每个用户创建一个线程。该线程（代表一个用户）在该循环中按顺序运行该线程组中的所有操作。
3.  这些线程在所有循环中被重用——也就是说：循环 2 也将与 n 个不同的用户执行相同的操作集，但这将重用与循环 1 相同的线程。

总之，一个 ThreadGroup 每个用户都有一个线程，它用于运行该组中的所有测试，用于所有循环。

这在两个有 10 个用户的循环中是正确的，我的测试包含以下内容：

```
System.out.println("MyTest#testSearchNodeByNodeNameExactMatch: MyTest=" 
        +this + "(" +System.identityHashCode(this)  +")" 
        +", thread=" +System.identityHashCode(Thread.currentThread())); 
```

并且可以使用以下方式汇总日志（假设 println 输出写入 thread-output.2.txt）：

```
grep MyTest#test thread-output.2.txt | awk -F ', ' '{print $2}' | sort | uniq 
```

# c++ - Visual Studio 2012 中的 Google 测试

> ID：12558327
> 
> 赞同：55
> 
> 时间：2012-09-24T02:58:47.087
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, googletest

我正在尝试开始进行单元测试。我下载了最新版本的gtest，并解压到`A:\gtest`按照说明打开gtest.sln。如果我同意更新它，Visual Studio 只允许我打开 sln。然后，当我尝试构建时，会出现一堆错误：

```
1>------ Build started: Project: gtest, Configuration: Debug Win32 ------
1>  gtest-all.cc
1>a:\gtest\include\gtest\gtest-printers.h(550): error C2977: 'std::tuple' : too many template arguments
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\gtest-printers.h(558): error C2977: 'std::tuple' : too many template arguments
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4017): error C2977: 'std::tuple' : too many template arguments
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>          a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4249) : see reference to class template instantiation 'testing::internal::CartesianProductGenerator9<T1,T2,T3,T4,T5,T6,T7,T8,T9>' being compiled
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4017): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4017): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4017): error C2955: 'testing::internal::ParamGeneratorInterface' : use of class template requires template argument list
1>          a:\gtest\include\gtest\internal\gtest-param-util.h(142) : see declaration of 'testing::internal::ParamGeneratorInterface'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4019): error C2977: 'std::tuple' : too many template arguments
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4030): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4030): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4035): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4035): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4042): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>          a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4042) : see reference to class template instantiation 'testing::internal::CartesianProductGenerator9<T1,T2,T3,T4,T5,T6,T7,T8,T9>::Iterator' being compiled
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4042): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4042): error C2955: 'testing::internal::ParamIteratorInterface' : use of class template requires template argument list
1>          a:\gtest\include\gtest\internal\gtest-param-util.h(69) : see declaration of 'testing::internal::ParamIteratorInterface'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4044): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4044): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4077): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4077): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4119): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4119): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4123): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4123): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4204): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4204): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4256): error C2977: 'std::tuple' : too many template arguments
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>          a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4505) : see reference to class template instantiation 'testing::internal::CartesianProductGenerator10<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10>' being compiled
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4256): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4256): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4256): error C2955: 'testing::internal::ParamGeneratorInterface' : use of class template requires template argument list
1>          a:\gtest\include\gtest\internal\gtest-param-util.h(142) : see declaration of 'testing::internal::ParamGeneratorInterface'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4258): error C2977: 'std::tuple' : too many template arguments
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4270): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4270): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4275): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4275): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4282): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>          a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4282) : see reference to class template instantiation 'testing::internal::CartesianProductGenerator10<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10>::Iterator' being compiled
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4282): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4282): error C2955: 'testing::internal::ParamIteratorInterface' : use of class template requires template argument list
1>          a:\gtest\include\gtest\internal\gtest-param-util.h(69) : see declaration of 'testing::internal::ParamIteratorInterface'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4284): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4284): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4320): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4320): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4366): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4366): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4370): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4370): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4456): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4456): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4738): error C2977: 'std::tuple' : too many template arguments
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>          a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4766) : see reference to class template instantiation 'testing::internal::CartesianProductHolder9<Generator1,Generator2,Generator3,Generator4,Generator5,Generator6,Generator7,Generator8,Generator9>' being compiled
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4738): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4738): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4782): error C2977: 'std::tuple' : too many template arguments
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
1>          a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4813) : see reference to class template instantiation 'testing::internal::CartesianProductHolder10<Generator1,Generator2,Generator3,Generator4,Generator5,Generator6,Generator7,Generator8,Generator9,Generator10>' being compiled
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4782): error C3203: 'tuple' : unspecialized class template can't be used as a template argument for template parameter 'T', expected a real type
1>a:\gtest\include\gtest\internal\gtest-param-util-generated.h(4782): error C2955: 'std::tuple' : use of class template requires template argument list
1>          b:\program files (x86)\microsoft visual studio 2012\vc\include\utility(73) : see declaration of 'std::tuple'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我做错了什么还是VS2012有问题？我不喜欢谷歌测试，也不反对使用不同的框架，如果它与 VS 一起工作得更好，我刚刚听说过关于 gtest 的非常好的事情。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-09-24T03:26:35.523

VC++ 2012 不（也永远不会）支持可变参数模板；因此，它的标准库实现尝试使用预处理器生成的重载和特化来伪造它们。正如[这篇博客文章](https://blogs.msdn.microsoft.com/vcblog/2011/09/12/c11-features-in-visual-c-11/)所指出的，虚假可变参数模板参数的数量默认为 5——问题是 gtest 试图`std::tuple<>`使用多达 10 个模板参数进行实例化。

正如博文继续提到的，您可以在`_VARIADIC_MAX`项目范围内定义宏以支持多达 10 个参数；您可能希望通过项目的[预处理器定义](https://msdn.microsoft.com/en-us/library/hhzbb5c8%28v=vs.110%29.aspx)设置来执行此操作，但重要的是确保每个 TU 在包含任何 stdlib 标头（直接或间接）之前定义它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-27T01:19:36.040

我没有使用宏修改 VS2012 元组实现`_VARIADIC_MAX`，而是通过在 gtest 项目和包括 gtest 标头的项目上定义以下两个宏来解决这个问题：

```
GTEST_HAS_TR1_TUPLE=0
GTEST_USE_OWN_TR1_TUPLE=1 
```

设置`GTEST_HAS_TR1_TUPLE`为 0 可防止 gtest 尝试使用 STL 标头中的元组类，设置`GTEST_USE_OWN_TR1_TUPLE`为 1 指示 gtest 使用其自己的元组实现而不是省略需要元组支持的功能。我个人更喜欢这个选项来调整 STL 实现，这个解决方案应该适用于任何其他有类似问题的编译器。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-13T23:11:43.460

这在 r675 版本中已修复。请参阅[https://code.google.com/p/googletest/source/detail?r=675](https://code.google.com/p/googletest/source/detail?r=675)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-28T06:20:26.757

此外，在您获得最新版本之前，请添加`GTEST_USE_OWN_TR1_TUPLE=0`到您的预处理器定义中。

# css - 从父 CSS 类补充 box-shadow

> ID：12558328
> 
> 赞同：2
> 
> 时间：2012-09-24T02:58:47.070
> 
> 标签：css

Twitter Bootstrap 定义了一个盒子阴影。我想定义一个插入框阴影，但保留来自 Bootstrap 的框阴影。

像这样的东西：

`bootstrap.css`

```
box-shadow: outer shadow 
```

然后在我自己的 CSS 文件中

`login.css`

```
box-shadow: inset 0px 3px 0 0 ... 
```

有没有一种方法可以同时应用于一个元素，而不必在我的 login.css 文件中重新定义 Bootstrap 阴影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:59:22.677

您将不得不覆盖引导框阴影..但您可以应用以逗号分隔的插图和开头

```
box-shadow: inset 0px 3px 0 0 ..., 0px 3px 0 0 ...; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:52:16.947

不幸的是，您不能继承 box-shadow 并仅更改 inset 值，但您可以继承它，然后添加自定义 inset 版本。

这是一个说明可以使用的继承的示例：http: [//jsfiddle.net/dwU2P/2/](http://jsfiddle.net/dwU2P/2/)

例子：

```
.parentBox{
    box-shadow:0 0 1em 1em #222;
}
.childBox{
    box-shadow:inherit,
    /* custom inset box-shadow */
} 
```

# ruby-on-rails - 回形针 - 没有路线匹配 GET

> ID：12558334
> 
> 赞同：2
> 
> 时间：2012-09-24T02:59:47.880
> 
> 标签：ruby-on-rails, upload, routes, paperclip

回形针 2.7 Ruby 1.8.7 企业 Rails 3.1.0 Imagemagick 6.6

当我在我的应用程序中上传图像时，它们由 imagemagick 正确处理，并且它们存储在正确的路径中。但是，当我需要拿这个文件来显示时，是找不到的。

**保存图像：**

```
Started POST "/p" for 177.16.57.105 at Sun Sep 23 23:39:16 -0300 2012
Processing by ProductsController#create as HTML
Parameters: {"commit"=>"Salvar", "authenticity_token"=>"EgBUGfKIIduS2lkl0mh5p27pT0vF0/P8HXO852KHMM8=", "utf8"=>"â", "product"=>{"photo"=>#>, "price"=>"", "name"=>"Brigadeiro de pistache", "product_type"=>"1", "featured"=>"0", "description"=>"Brigadeiro de pistache"}}
[32mCommand[0m :: convert '/tmp/stream20120923-19588-vw8u1s-020120923-19588-3lym39-0[0]' -resize "120x80>" '/tmp/stream20120923-19588-vw8u1s-020120923-19588-3lym39-020120923-19588-16ky3i8-0'
[paperclip] Saving attachments.
[paperclip] saving /home/brigaderiagourmand/apps_rails/site/public/system/photos/24/short/brigadeirocolorido.png
Redirected to http://brigaderiagourmand.com.br/p/24
Completed 302 Found in 257ms 
```

**当我需要文件时...**

```
Started GET "/photos/original/missing.png" for 177.16.57.105 at Sun Sep 23 23:39:17 -0300 2012

ActionController::RoutingError (No route matches [GET] "/photos/original/missing.png"): 
```

**我的模型**

```
class Product < ActiveRecord::Base
  attr_accessible :name, :description, :price, :photo, :product_type, :featured
  attr_accessor :photo_file_name
  has_attached_file :photo, :styles => { :thumb => "50x50>", :medium => "280x180>", :large => "585x400>", :short => "120x80>", :original => "200,200>" }

  TYPES = ["Belga", "Normal"]
end 
```

**表单视图**

```
= form_for @product, :html => {:multipart => true} do |f|
  = f.file_field :photo 
```

**显示视图**

```
= image_tag @product.photo.url(:original) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:41:39.020

处理图像的输出是否完整？在您的输出回形针中，仅将大小重新调整为短 (120x80>)

您的获取请求正在尝试加载missing.jpg，如果找不到请求，这是图像的默认值。查看 /home/brigaderiagourmand/apps_rails/site/public/system/photos/24/ 看看是否有其他调整大小的照片。

Ryan Bates 有一个很棒的关于[回形针的截屏视频](http://railscasts.com/episodes/134-paperclip)

希望这可以帮助你

# ubuntu - 如何为每个用户配置 msmtprc

> ID：12558339
> 
> 赞同：1
> 
> 时间：2012-09-24T03:00:48.830
> 
> 标签：ubuntu, nginx, sendmail, php

*   我有一个带有 nginx 和 php-fpm 的 Ubuntu 服务器；
*   需要为每个用户配置 msmtp 以使用站点。手册说：

> 您需要在每个想要发送邮件的用户的家中有一个 .msmtprc 文件（例如，如果您想以 root 身份发送邮件），或者您可以使用系统范围的 /etc/msmtprc

1.  我设置了 msmtp
2.  在 /etc/msmtprc 中创建配置文件

但我不明白如何为每个用户配置发送。我知道需要将每个 msmtprc 与特定用户的邮件设置放在 /home/~username/ 中，对吗？

以及如何配置 php.ini，该单用户站点从他的域发送邮件？在手册中没有说明每个用户的 msmtprc 设置。Man指出了这个例子：

```
sendmail_path = /usr/bin/msmtp-t-i-a username 
```

我理解这一点是为了使用特定的配置。您需要为单个配置添加或删除哪些键？

UPD：创建用户的示例脚本（可能有帮助） [https://dl.dropbox.com/u/2457864/addsite.sh](https://dl.dropbox.com/u/2457864/addsite.sh)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:35:59.113

[在这里](http://scottboms.com/2009/05/msmtp-and-virtual-hosts/)找到解决方案 但在 php-fpm 配置中需要更改：

```
 php_admin_value sendmail_path "/usr/bin/msmtp -a domain1 -t" 
```

至

```
 php_admin_value[sendmail_path] = /usr/bin/msmtp -a domain1 -t 
```

一切正常

# java - ';' 预期的。我究竟做错了什么？

> ID：12558341
> 
> 赞同：2
> 
> 时间：2012-09-24T03:00:54.343
> 
> 标签：java

有人可以帮忙吗？当我编译这个 Java 文件时，我无法弄清楚为什么会出现这个错误。该错误是一个棘手的错误`(';' expected)`。这 ”;” 预计在测试应用程序的“新”和“矩形”之间的第 7 行。

如果您需要我的主应用程序代码，我也可以添加。

```
import java.util.Scanner;

public class RectangleTest
{
    public static void main( String[] args )
    {
        Scanner input = new Scanner( System.in );
        Rectangle rectmeas = New Rectangle(); // LINE 7, WHERE THE ERROR IS
        int userinput = getOptions();
        while ( userinput != 3 )
        {
            switch ( userinput )
            {
                case 1:
                    System.out.print( "Please enter the length: " );
                    rectmeas.setLen( input.nextDouble() );
                    break;
                case 2:
                    System.out.print( "Please enter the width: " );
                    rectmeas.setWid( input.nextDouble() );
                    break;
            }
            System.out.println( rectmeas.toString() );
            userinput = getOptions();
        }
    }
    private static int getOptions()
    {
        Scanner input = new Scanner( System.in );
        System.out.println( "Press 1 to input the length" );
        System.out.println( "Press 2 to input the width" );
        System.out.print( "Which one?: " );
        return input.nextInt();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T03:02:02.027

Java 关键字都是小写的。您应该使用`new`而不是`New`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T03:02:00.997

```
 Rectangle rectmeas = New Rectangle(); 
```

应该

```
Rectangle rectmeas = new Rectangle(); 
```

当你想在 java 中创建一个对象时，你需要使用`new`而不是`New`. Java 区分大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T03:15:23.023

这是因为[所有 java 关键字都是小写的](http://en.wikipedia.org/wiki/List_of_Java_keywords)，所以使用`new`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T14:05:08.217

它的 new 而不是 New ，Java 是一种区分大小写的语言， new 和 New 并不意味着同一件事。new : 创建新对象的关键字

# jakarta-ee - Tomcat 上的“Servlet 当前不可用”错误

> ID：12558347
> 
> 赞同：2
> 
> 时间：2012-09-24T03:01:38.397
> 
> 标签：jakarta-ee, tomcat, servlets, web.xml

我正在尝试在 Eclipse EE Juno 中编写一个简单的 Java EE 应用程序。这是我的项目的文件层次结构：

![项目文件层次结构](../Images/e71611d412c78e0437b71243aefad08a.png)

index.jsp：

```
<jsp:forward page="/departments.do"/> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>UniBudget</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>Do</servlet-name>
    <servlet-class>control.Controller</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>Do</servlet-name>
    <url-pattern>*.do</url-pattern>
  </servlet-mapping>
</web-app> 
```

我得到的错误：

```
HTTP Status 503 - Servlet Do is currently unavailable 
```

问题是：为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:26:17.820

请在您的网址格式中添加正斜杠。

`<url-pattern>/*.do</url-pattern>`

# mysql - 我应该转义存储在 mysql db 中的代码还是使用占位符？

> ID：12558352
> 
> 赞同：1
> 
> 时间：2012-09-24T03:02:18.763
> 
> 标签：mysql, perl

我刚刚发现了 DBI [https://metacpan.org/pod/DBI#Placeholders-and-Bind-Values](https://metacpan.org/pod/DBI#Placeholders-and-Bind-Values)中的占位符，它似乎可以很好地处理各种代码。我应该强迫逃跑吗？是否存在占位符会根据输入失败的情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T05:07:23.770

如果你转义它们然后使用绑定占位符，它们最终会被双重转义，这不是你想要的。只需使用占位符。（即使输入是可信的，我也经常使用它们，因为它看起来更干净。）

很少有理由使用转义而不是占位符。一个例子是动态生成和操作一个查询作为一个 SQL 字符串，但你真的不应该这样做（CPAN 上有很多用于生成 SQL 的库）。

我所知道的占位符会根据输入而失败的唯一示例是，当您从字符串、LIMIT 子句或类似的（但同样是动态生成 SQL）中插入列名时就像我上面提到的那样。）

占位符 >> 手动转义

# python - Python xgoogle 库 - 特定于站点的搜索

> ID：12558353
> 
> 赞同：1
> 
> 时间：2012-09-24T03:02:37.367
> 
> 标签：python, xgoogle

我正在使用 xgoogle python 库尝试搜索特定站点。当我不在关键字搜索中使用“站点：”指示符时，该代码对我有用。如果我确实使用它，结果集是空的。有没有人有任何想法如何让下面的代码工作？

```
from xgoogle.search import GoogleSearch, SearchError

gs = GoogleSearch("site:reddit.com fun")  
gs.results_per_page = 50  
results = gs.get_results()  
print results  
for res in results:  
    print res.title.encode("utf8")  
print 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:12:27.663

带有“q”参数的简单网址（例如“ [http://www.google.com/search?&q=site:reddit.com+fun](http://www.google.com/search?&q=site:reddit.com+fun) ”）可以工作，所以我认为这是其他问题。

如果您使用的是 pkrumins/xgoogle，一个快速（且肮脏）的修复方法是修改 search.py​​ 第 240 行，如下所示：

```
if not title or not url: 
```

这是因为谷歌改变了他们的 SERP 布局，这破坏了 _extract_description() 函数。

你也可以看看[这个](https://github.com/flepied/xgoogle)叉子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T04:44:41.693

将关键字放在站点之前：XX。这个对我有用。

# ado.net - 如何跟踪批量更新中哪一行更新失败

> ID：12558354
> 
> 赞同：1
> 
> 时间：2012-09-24T03:02:53.897
> 
> 标签：ado.net, dataadapter, batch-updates, updatebatchsize

我正在使用try catch块使用ADO.NET2.0进行批量更新，UpdateBatchSize设置为500，我经常可以捕获异常，但我不知道哪一行更新失败，有没有办法得到实际失败的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:18:32.727

您可以使用事件[RowUpdated](http://msdn.microsoft.com/en-us/library/6d1wk41s.aspx)来获取行的引用：

```
yourAdapter.RowUpdated += OnRowUpdated; 
```

然后：

```
protected static void OnRowUpdated(object sender, SqlRowUpdatedEventArgs args)
{
    if (args.Status == UpdateStatus.ErrorsOccurred)
    {
        // Reference to row which throws error
        var row = args.Row;

        row.RowError = args.Errors.Message;
        args.Status = UpdateStatus.SkipCurrentRow;

        // Do something more
    }
} 
```

# python - 使用购买价格显示税收总额和总额？Python 编程

> ID：12558356
> 
> 赞同：1
> 
> 时间：2012-09-24T03:03:54.223
> 
> 标签：python

```
print ("What is/was your original purchase price?")
x = input
valx=float(x)

print ("Amount of original purchase: ${}"
   .format(valx))
print ("State sales tax on original purchase: ${}"
   .format(valx*.04))
print ("County sales tax on original purchase: ${}"
   .format(valx*.02))
print ("Total sales tax (county and state): ${}"
   .format(valx*.06))
print ("Total of the sale (original purchase and total sales tax): ${}"
   .format(valx*.06)) 
```

这对我来说很有意义，我过去曾使用过这种方法，但它现在不起作用。

```
Output error: line 9, in <module>builtins.TypeError: float() argument must be a string or a number 
```

基本上我的目标是显示原始购买的金额，原始购买的国家销售税（4％）金额，县销售税（2％）原始购买的金额，总销售税（县税加上州税），最后是销售总额（即原始购买金额加上总销售税的总和）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T03:06:02.310

您正在为变量分配一个*函数*`x`

```
x = input
>> x
<built-in function input> 
```

所以你不是给`float()`函数一个字符串或数字，而是一个函数。

我认为您要做的是*调用*该`input()`函数。您还可以将您的消息集成到其中。

```
x = input ("What is/was your original purchase price?") 
```

或者，如果您使用的是**python 3**或更高版本，则需要将输入从*字符串转换为浮点数*（或整数，或任何您想要的类型。）：

```
x = float(input("What is/was your original purchase price?")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:11:32.307

出于安全原因，您应该使用`raw_input()`而不是`input()`. 后者与 eval 一样，`eval(raw_input(prompt))`离邪恶不远:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T03:06:55.780

大概上面有 6 行您认为我们不需要看到。不过，这使得谈论第 9 行有点没用。

当然你的意思是*调用*输入函数

```
x = input() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T03:08:26.433

从命令行检索输入的方法是这样的：

```
valx=float(input("What is/was your original purchase price?")) 
```

`input`是一个字符串，您可以通过包装该调用将其转换为浮点数。然后，您不需要额外的变量。

# java - Java永无止境的开关循环（有时）日食

> ID：12558357
> 
> 赞同：4
> 
> 时间：2012-09-24T03:04:01.220
> 
> 标签：java, for-loop, switch-statement

我对此完全感到困惑，我在循环中有一个 switch 语句：

```
package com.example.project

import java.awt.AWTException;
import java.awt.Robot;
import java.awt.event.KeyEvent;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class Keyserver {
static ServerSocket server;
static Socket soc;
static ObjectInputStream in;
static int key;
static Robot bot;
static boolean shift = false;

public static void main(String[] args) throws AWTException{
    bot = new Robot();
    while(true){
        try {
            server = new ServerSocket(4321, 10);
            soc = server.accept();
            System.out.println("Accepted port");
            in = new ObjectInputStream(soc.getInputStream());
        } catch (IOException e) {
            e.printStackTrace();
        }
        while(soc.isConnected()){
            try {
                key = in.readInt();
                System.out.println(key);
                switch(key){
                case(7):
                    bot.keyPress(KeyEvent.VK_0);
                    bot.keyRelease(KeyEvent.VK_0);
                    break;
                case(8):
                    bot.keyPress(KeyEvent.VK_1);
                    bot.keyRelease(KeyEvent.VK_1);
                    break;
                case(9):
                    bot.keyPress(KeyEvent.VK_2);
                    bot.keyRelease(KeyEvent.VK_2);
                    break;
                case(10):
                    bot.keyPress(KeyEvent.VK_3);
                    bot.keyRelease(KeyEvent.VK_3);
                    break;
                                    ....
                case(53):
                    bot.keyPress(KeyEvent.VK_Y);
                    bot.keyRelease(KeyEvent.VK_Y);
                    break;
                case(54):
                    bot.keyPress(KeyEvent.VK_Z);
                    bot.keyRelease(KeyEvent.VK_Z);
                    break;
                case(4):
                    bot.keyPress(KeyEvent.VK_BACK_SPACE);
                    bot.keyRelease(KeyEvent.VK_BACK_SPACE);
                    break;
                case(62):
                    bot.keyPress(KeyEvent.VK_SPACE);
                    bot.keyRelease(KeyEvent.VK_SPACE);
                    break;
                case(59):
                    if(!shift){
                        bot.keyPress(KeyEvent.VK_SHIFT);
                    }else{
                        bot.keyRelease(KeyEvent.VK_SHIFT);
                    }
                    shift = !shift;
                    break;
                case(60):
                    if(!shift){
                        bot.keyPress(KeyEvent.VK_SHIFT);
                    }else{
                        bot.keyRelease(KeyEvent.VK_SHIFT);
                    }
                    shift = !shift;
                    break;

                case(90):
                    bot.keyPress(KeyEvent.VK_1);
                    bot.keyRelease(KeyEvent.VK_1);
                    break;
                case(91):
                    bot.keyPress(KeyEvent.VK_2);
                    bot.keyRelease(KeyEvent.VK_2);
                    break;
                case(92):
                    bot.keyPress(KeyEvent.VK_0);
                    bot.keyRelease(KeyEvent.VK_0);
                    break;
                case(93):
                    bot.keyPress(KeyEvent.VK_3);
                    bot.keyRelease(KeyEvent.VK_3);
                    break;
                case(104):
                    bot.keyPress(KeyEvent.VK_ENTER);
                    bot.keyRelease(KeyEvent.VK_ENTER);
                    break;
                case(105):
                    bot.keyPress(KeyEvent.VK_BACK_SPACE);
                    bot.keyRelease(KeyEvent.VK_BACK_SPACE);
                    break;
                case(106):
                    bot.keyPress(KeyEvent.VK_MINUS);
                    bot.keyRelease(KeyEvent.VK_MINUS);
                    break;
                case(107):
                    bot.keyPress(KeyEvent.VK_EQUALS);
                    bot.keyRelease(KeyEvent.VK_EQUALS);
                    break;
                case(108):
                    bot.keyPress(KeyEvent.VK_TAB);
                    bot.keyRelease(KeyEvent.VK_TAB);
                    break;
                case(109):
                    bot.keyPress(KeyEvent.VK_ESCAPE);
                    bot.keyRelease(KeyEvent.VK_ESCAPE);
                    break;
            }

            } catch (IOException e) {
                try {
                    e.toString();
                    in.close();
                    soc.close();
                    server.close();
                    break;
                } catch (IOException e1) {
                    e1.toString();
                }   
            }
        }
        System.out.println("PORT CLOSED");
    }

}

} 
```

一切正常，除了 90-93，它们导致程序永远循环，直到我点击 eclipse 然后它停止。这不是日食问题，因为当我将它构建到 .jar 中时，我得到了相同的结果，这不是服务器问题，因为当我制作发送 90 发送 7 的按钮时，它工作正常

似乎只有 90-93 导致无限循环，我已经尝试将数字从 90 更改为 200 但没有运气

任何启蒙者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:18:35.990

好吧，伙计们，我想通了。你不会相信这个。

我的服务器是一个虚拟的 android 设备——我想制作一个远程键盘应用程序，所以我编写了服务器以将我的虚拟键盘上的每个按键都发送到客户端，然后客户端将在我的计算机上模拟我的按键。

问题？有效。我的客户端将在我的计算机上模拟一个按键，然后在我的 android 模拟器上模拟一个按键（如果你按下键盘上的一个键，它会按下 android 键盘上的那个键），这会将按键发送给客户端以再次按下该键，创建一个无限循环。

这就解释了为什么当我专注于 eclipse 窗口而不是 android 窗口时，服务器停止接收数字，因为 android 设备停止接收按键

感谢你们的帮助，尽管非常感谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:24:55.313

听起来像这样的代码：

```
bot.keyPress(KeyEvent.VK_1);
bot.keyRelease(KeyEvent.VK_1); 
```

由于某种原因挂起。与switch语句无关。

# javascript - 回复：jQuery；将全局 ajax 事件绑定到非 DOM 对象

> ID：12558358
> 
> 赞同：3
> 
> 时间：2012-09-24T03:04:02.187
> 
> 标签：javascript, ajax, jquery, module-pattern

这里的基本模块问题：如果我放弃我的模块模式，我可以让全局处理程序正常工作，但是这个测试代码不起作用，我很难弄清楚为什么：

```
var MyModule = (function($, my) {
  $(my).ajaxStart(function() { window.alert("ajax start"); });

  $(document).ready(function() {
    $.ajax(SOME_AJAX_SETTINGS_HERE);
  });

  return my;
}(jQuery, MyModule || {})); 
```

执行 ajax 调用时，附加到`MyModule`实例的处理程序永远不会运行。如果我改为将处理程序附加到`$(document)`它就可以了，但我很好奇为什么该全局事件似乎没有正确绑定到模块对象。

编辑：这是一个更简单的例子：

```
var x = {};
$(x).ajaxStart(function() { window.alert("foo"); } );
$.ajax(SOME_AJAX_SETTINGS); 
```

如果我替换`$(x)`为`$(document)`，它可以工作......似乎我无法将`ajaxStart`（或其他全局 ajax 事件）绑定到非 DOM 对象？

* * *

@Nucleon，这对我来说似乎并不完全正确，这里有一个例子说明原因：

```
var item = {foo: function() { window.alert("shorthand"); } };
$(item).bind("foo", function () { window.alert("longhand"); } );
window.alert("about to trigger (locally)");
$(item).trigger("foo");
window.alert("now we triggerHandler (locally)");
$(item).triggerHandler("foo"); 
```

在这里，（自定义）事件“foo”通过两种模式绑定，并且不同的触发方法显示模式特异性......您将获得两次“普通”警报和一次“速记”警报。

`$.event.trigger("foo")`现在，您还可以使用（但是，不存在等效的全局）来触发全局事件`triggerHandler`。问题是如果您将此代码添加到末尾：

```
window.alert("now we trigger (globally)");
$.event.trigger("foo"); 
```

两个处理程序都不会针对此全局事件触发运行。

但是，如果您`item`用一些 DOM 类型的元素替换 - 正如您在上面建议的那样 - 那么本地*和*全局事件都会被处理，但需要注意的是“速记”处理程序现在不起作用*。所以看起来虽然本地处理适用于非 DOM 对象，但它*特别是*全局处理不起作用。

-m

*速记处理程序停止工作，因为速记模式*仅*适用于非 DOM 对象。我个人认为应该从 jQuery 中删除非 DOM 对象的这种“速记”行为。很少有人知道它，而且它只记录在全局 jQuery 对象页面上的一个晦涩的句子中......它的行为可能会让不知道它的人发疯，因为它隐含地执行了人们可能不知道的绑定步骤的。

* * *

啊，好吧...该`$.event.trigger`功能不是公开的，尽管它被底层事件触发机制使用。我想我只是不应该使用它。事实证明，这种行为对于 jQuery 开发人员来说很难正确实现，而且看起来他们完全放弃了它（或者这就是我从这个标记为“已修复”的错误报告中收集到的：[DEPRECATE AJAX "GLOBAL" EVENT BEHAVIOR](http://bugs.jquery.com/ticket/11717)）。

但我仍然对`.trigger`被记录为 DOM 或非 DOM 对象的行为方式相同感到有些困惑，因为仅运行以下警报之一：

```
var plain = {foo: function() { window.alert("plain"); } };
var dom = $("<div></div>");
dom.foo = function() { window.alert("dom"); };
console.log(plain.foo); // make sure we see function foo on the plain object.
console.log(dom.foo); // now make sure we see function foo on the DOM object.
$(plain).trigger("foo"); // raises the "plain" window alert.
$(dom).trigger("foo"); // raises no alert. 
```

我想这意味着`foo`设置的属性`dom`实际上并不是传统意义上的“正确”JS 属性（尽管在控制台上检查对象时它正确显示）？

注意：现在这一切都是为了知识 - 因为我将只接受上面错误链接中“修复”的建议，并将我所有的 AJAX（和其他全局）事件附加到`document`，因为它出现了将是 jQuery 1.9 中的强制行为。但我已经服用了蓝色药丸，感觉自己离兔子洞太远了，无法爬出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:01:48.100

只需更换

`var x = {};`

和

`var x = $("<div></div>");`

Javascript 事件需要绑定到有效的 DOM 对象（不仅仅是 javascript 对象）。现在，不需要将 DOM 对象实际附加到任何地方。Javascript 的事件系统基于在可用和相关 DOM 对象的层次链中上下冒泡事件。简单`{}`的不合格。

# gcc - MinGW gcc 无法识别的命令行选项'-Wl'/'Wa'/'Wp'

> ID：12558362
> 
> 赞同：0
> 
> 时间：2012-09-24T03:04:45.627
> 
> 标签：gcc, mingw

简而言之，我拥有最新版本的 MinGW，我正在尝试将选项传递给链接器等。

例如，我想通过以下方式更改堆栈大小：

```
gcc -Wl,--stack,[new size in bytes] 
```

但它既不识别 -Wl 也不识别 --stack。这也适用于其他选项。

我能够很好地编译我的程序，似乎我不能使用各种 gcc 选项。

这是MinGW的问题，还是我忽略了更多？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:34:30.727

我刚刚在有关将参数传递给链接器的[文档](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)中确认，数字前不能有空格，所以应该是：

```
gcc -Wl,--stack,[new size in bytes] 
```

逗号变成了空格，但一个真正的空格使下一个选项 gcc 选项，而不是链接器选项。

# vb.net - VB.Net：Crystal Report 运行时显示不同的结果

> ID：12558368
> 
> 赞同：2
> 
> 时间：2012-09-24T03:05:28.280
> 
> 标签：vb.net, crystal-reports

我在 VB.Net 中创建了水晶报表...当我单击报表预览时，它显示正确的结果...

当我运行程序时，第一次点击打印，它会显示不同的结果，我必须点击其他报告然后回到我想要打印的那个才能看到正确的输出......

在水晶报告中，我有 3 个组，最后一组有一个子报告...

你认为是什么问题？请帮忙！上帝保佑:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:10:59.740

是否检查了报表设计器中的“ `Save Data With Report`”？
[当您在设计器中看到报表预览时，该标志可见]

这个标志会导致意想不到的行为（让我很头疼）。

# python - 把数字变成单词

> ID：12558370
> 
> 赞同：0
> 
> 时间：2012-09-24T03:05:45.353
> 
> 标签：python, integer

> **可能重复：**
> [我如何告诉 Python 将整数转换为单词](https://stackoverflow.com/questions/8982163/how-do-i-tell-python-to-convert-integers-into-words)

我正在尝试编写一个简单的函数，它将输入作为整数，然后将其显示为单词。我不确定如何正确表达这个问题。这是一个时钟应用程序，这就是我正在做的事情，但我确信那里有更简单的方法。

```
if h == 1: h = "One"
if h == 2: h = "Two"
if h == 3: h = "Three"
if h == 4: h = "Four"
if h == 5: h = "Five"
if h == 6: h = "Six"
if h == 7: h = "Seven"
if h == 8: h = "Eight"
if h == 9: h = "Nine"
if h == 10: h = "Ten"
if h == 11: h = "Eleven"
if h == 12: h = "Twelve" 
```

有人可以告诉我一个更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T03:10:01.630

```
hours = ["Twelve", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Eleven"]

for i in range(0, 24):
    print(hours[i % 12]) 
```

您可以这样做，或者使用字典，其中每个小时的“名称”由它所代表的数字索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T03:16:10.637

用于`zip`构建字典，并查找带有数字的单词：

```
hour_word = ["One", "Two", "Three", "Four", "Five", "Six", "Seven", 
"Eight", "Nine", "Ten", "Eleven", "Twelve"]
clock_dict = dict(zip(range(1, 13), hour_word))
clock_dict[1]
# 'One'
clock_dict[2]
# 'Two'
clock_dict[12]
# 'Twelve' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T03:10:23.563

简单的方法，

```
h = ['zero','one','two','three','four','five','six'][h] # check bounds first 
```

如果你没有零，把它留在那里，或者让它`None`，它仍然可以工作。

这种方式更pythonic。并支持任意值

```
lst = ['zero','one','two','three','four','five','six']
d = dict(zip(range(len(lst)),lst))
print (d[2]) #prints two 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T07:16:35.067

这是一个相对紧凑且漂亮的代码版本，可以在一般意义上执行您想要的操作（适用于所有数字，而不仅仅是十二个）。

```
level1 = [ "", "one", "two", "three", "four",  "five", "six", "seven", "eight", "nine" ]
level2 = [ "", "eleven", "twelve", "thirteen",  "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen" ]
level3 = [ "", "ten", "twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety" ]
level4 = [ "","thousand", "million" ]

def number2string(number):
    if number == 0:
        return "zero"
    string = ""
    nparts = (len(str(number)) + 2) / 3
    filled = str(number).zfill(nparts * 3)
    for i in range(nparts):
        d3, d2, d1 = map(int, filled[3*i:3*(i+1)])
        d4 = nparts - i - 1
        string += " "*(i>0)
        string += (d3>0)*(level1[d3] + " hundred" + " "*(d2*d1>0))
        if d2 > 1:
            string += level3[d2] + (" " + level1[d1])*(d1 >= 1)
        elif d2 == 1:
            string += level2[d1]*(d1 >= 1) or level3[d2]
        elif d1 >= 1:
            string += level1[d1]
        string += (" " + level4[d4])*(d4 >= 1 and (d1+d2+d3) > 0)
    return string 
```

# vb.net - 查找单词的中间字符

> ID：12558371
> 
> 赞同：0
> 
> 时间：2012-09-24T03:05:56.493
> 
> 标签：vb.net, visual-studio-2010

在不使用 if else 语句的情况下，如何在 Visual Basic 中找到单词中的中间字符？例如，我在文本框中输入单词 STRENGTH，当我单击按钮时，我应该在文本框中输入 EN。如果我将 SOS 放入文本框中，我应该在文本框中输入 O。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:27:57.770

我不确定您要做什么，但看看这是否适合您。它使用[`Mid`](http://msdn.microsoft.com/en-us/library/8kyd8789%28v=vs.100%29.aspx)Method 从字符串中提取字符，使用[`Math.Round`](http://msdn.microsoft.com/en-us/library/ms131274%28v=vs.100%29.aspx)Method 设置起始位置，[`Mod`](http://msdn.microsoft.com/en-us/library/se0w9esz%28v=vs.100%29.aspx)如果 String.Length 为偶数，则使用 Length + 1 将返回结果的 Length 加 1。

* * *

修改示例以添加功能并更好地解决 OP 的问题。

```
Public Class Form1

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        TextBox2.Text = middleOfString(TextBox1.Text)
    End Sub

    Private Function middleOfString(value As String) As String

        'Get start location of substring, if value.length is odd have we have to make sure the result of the division rounds up to the nearest integer
        Dim start As Integer = CInt(Math.Round(value.Length / 2, MidpointRounding.AwayFromZero))

        'Get length of substring 1 if value length is odd, 2 if value length is even
        Dim length As Integer = CInt((value.Length + 1) Mod 2) + 1

        Return Mid(value, start, length)

    End Function

End Class 
```

# asp-classic - 经典的 ASP 滑动到期

> ID：12558376
> 
> 赞同：2
> 
> 时间：2012-09-24T03:06:26.730
> 
> 标签：asp-classic, iis-6

只是一个查询；经典的 ASP 是否像 asp.net 中的表单身份验证那样具有滑动到期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:11:07.133

No, there is no such thing as a property to expire form based authentication in classic asp.

Authentication in classic asp can be roughly divided in windows challenge/response and form-based authentication (often in combination with a database-driven username /password). You could use the session expiration as an alternative (for instance if the form-based authentication sets a a session value "isAuthenticated"). The default session timeout is 20 minutes, but this can be easily altered by adjusting Session.Timeout

# postgresql - Postgres "NOT IN" 运算符用法

> ID：12558377
> 
> 赞同：1
> 
> 时间：2012-09-24T03:06:27.853
> 
> 标签：postgresql, postgresql-9.1

在我的数据库中，当我运行以下查询时，我得到 1077 作为输出。

```
select count(distinct a_t1) from t1; 
```

然后，当我运行这个查询时，我得到 459。

```
select count(distinct a_t1) from t1 
where a_t1 in (select a_t1 from t1 join t2 using (a_t1_t2) where a_t2=0); 
```

上面与此相同，此查询也给出 459：

```
select count(distinct a_t1) from t1 join t2 using (a_t1_t2) where a_t2=0 
```

但是当我运行这个查询时，我得到的是 0 而不是我期望的 618：

```
select count(distinct a_t1) from t1 
where a_t1 not in (select a_t1 from t1 join t2 using (a_t1_t2) where a_t2=0); 
```

我正在运行 PostgreSQL 9.1.5，这实际上可能没有必要。请指出我在上述查询中的错误。

**更新 1：** 我创建了一个新表并将上面子查询的结果输出到该表中。然后，我运行了一些查询：

```
select count(distinct a_t1) from t1
where a_t1 not in (select a_t1 from sub_query_table order by a_t1 limit 10); 
```

万岁！现在我得到 10 作为答案！我能够将限制增加到 450。之后，我又开始得到 0。

**更新 2：**

sub_query_table 中有 459 个值。最后，这个查询给了我所需的答案：

```
select count(distinct a_t1) from t1
where a_t1 not in (select a_t1 from sub_query_table order by a_t1 limit 459); 
```

作为这个，给出 0 作为答案：

```
select count(distinct a_t1) from t1
where a_t1 not in (select a_t1 from sub_query_table); 
```

但是，为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:18:51.413

“NOT IN”运算符仅适用于“NOT NULL”。值为 null 的列不匹配。

```
select count(distinct a_t1) from t1 
where a_t1 not in (select a_t1 from t1 join t2 using (a_t1_t2) where a_t2=0) OR a_t1 IS NULL; 
```

# objective-c - 通过拖动 UISlider 滚动图像

> ID：12558378
> 
> 赞同：2
> 
> 时间：2012-09-24T03:06:40.610
> 
> 标签：objective-c, ios, xcode, uiscrollview, uislider

我是 IOS Dev 的初学者。询问一种`UIScrollView`通过拖动使图像滚动的方法`UISlider`。这是我的情况：

**所需案例：**

拖动滑块时，图像会滚动`UIScrollView`。滚动图像时，滑块也会相应地更改其值。

**实际案例：**

滚动图像时，滑块会相应地更改其值，**但**拖动滑块图像时**不要**滚动。

**这是我的代码，我希望有人告诉我如何在滑块拖动时滚动。**

滑块`IBAction`

```
- (IBAction)sliding:(UISlider *)sender{
    int slider_value = (int)slider.value;
    NSString *current_page = [[NSString alloc] initWithFormat:@"%i",slider_value];
    current_page_lbl.text = current_page ;
    [self loadPage:slider_value];
    [self loadVisiblePages];
} 
```

UIScrollview 的方法：

```
- (void)loadPage:(NSInteger)page {
        if (page < 0 || page >= self.pageImages.count) {
            return;
        }

        UIView *pageView = [self.pageViews objectAtIndex:page];
        if ((NSNull*)pageView == [NSNull null]) {

            CGRect frame = self.scrollView.bounds;
            frame.origin.x = frame.size.width * page;
            frame.origin.y = 0.0f;

            UIImageView *newPageView = [[UIImageView alloc] initWithImage:[self.pageImages objectAtIndex:page]];
            newPageView.contentMode = UIViewContentModeScaleAspectFit;
            newPageView.frame = frame;
            [self.scrollView addSubview:newPageView];

            [self.pageViews replaceObjectAtIndex:page withObject:newPageView];
        }
    }

- (void)purgePage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what you have to display, then do nothing
        return;
    }

    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView != [NSNull null]) {
        [pageView removeFromSuperview];
        [self.pageViews replaceObjectAtIndex:page withObject:[NSNull null]];
    }
} 
```

加载VisiblePage

```
- (void)loadVisiblePages {

    CGFloat pageWidth = self.scrollView.frame.size.width;
    NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth) / (pageWidth * 2.0f));
    NSLog(@"page loaded is %d",page);

    self.pageControl.currentPage = page; 

    NSInteger firstPage = page - 1;
    NSInteger lastPage = page + 1;

    for (NSInteger i=0; i<firstPage; i++) {
         [self purgePage:i];
    }

    for (NSInteger i=firstPage; i<=lastPage; i++) {
         [self loadPage:i];
         slider.value = 21-i ;
         int slider_value = (int)slider.value;
         NSString *current_page = [[NSString alloc] initWithFormat:@"%i",21-slider_value];
         current_page_lbl.text = current_page ;
    }

    for (NSInteger i=lastPage+1; i<self.pageImages.count; i++) {
         [self purgePage:i];
    }
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    [self loadVisiblePages];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:52:10.793

uislider 不适合与 uiscrollview 一起使用....为此，有一个可用的控件名称 UIPagecontrol.. 以下链接是一个很好的示例，其中包含指导您如何将其与 UIScollview 一起使用的代码

[UIPagecontroll 和 UIscollview 和代码点击这里](http://cocoawithlove.com/2009/01/multiple-virtual-pages-in-uiscrollview.html)

# jquery - jQuery 插件 setTimeout IE (Internet Explorer 8) 错误

> ID：12558382
> 
> 赞同：0
> 
> 时间：2012-09-24T03:07:15.437
> 
> 标签：jquery, scope, settimeout

我有一个根据此处建议的样板构建的插件：

[http://markdalgleish.com/2011/05/creating-highly-configurable-jquery-plugins/](http://markdalgleish.com/2011/05/creating-highly-configurable-jquery-plugins/)

该插件在 Chrome 中按我想要的方式响应，但出现 Internet Explorer 和 FireFox 错误

您可以在此处查看正在使用的插件[http://websonalized.com/myplugin.php](http://websonalized.com/myplugin.php)

MSIE 开发者控制台中的错误（调试）：

myplugin.js 参数无效，第 84 行字符 5

Firefox 中的错误：

错误：无用的 setTimeout 调用（参数周围缺少引号？）

setTimeout(animateSlide(sliderImage), 3000);

这是代码的相关位

```
...

this.$slides.each(function(i){

    slide_config = $.extend({
        duration: 3000,
        squares: 225, //it will display the closest 'perfect square' number of tiles
        transition: 'linear'
    }, $(this).data());

    var sliderImage = $(this).find('.slidebg');

    ...

    setTimeout(animateSlide(sliderImage), 3000);

    function animateSlide(s){
        console.log('ANIMATED IMAGE SLIDER ' + i);
        console.log(s); 

        $(s).show('explode', { pieces: slide_config.squares }, 5000);
    };

    ... 
```

**如果我将 setTimeout 位重写为**：

```
...

this.$slides.each(function(i){

    slide_config = $.extend({
        duration: 3000,
        squares: 225, //it will display the closest 'perfect square' number of tiles
        transition: 'linear'
    }, $(this).data());

    var sliderImage = $(this).find('.slidebg');

    ...

    setTimeout(function(){$(sliderImage).show('explode', { pieces: slide_config.squares }, 5000);}, 3000);              

    ... 
```

但是slide_config.squares的值与this实例不对应，而是上一张幻灯片数据设置的值

```
this.$slides.each(function(i){

    slide_config = $.extend({
        duration: 3000,
        squares: 225, //it will display the closest 'perfect square' number of tiles
        transition: 'linear'
    }, $(this).data()); 
```

我想这与上下文有关。谁能帮我修复并了解我应该如何使用 setTimeoff？

修复意味着我能够在浏览器 FF、IE 和 Chrome 中设置无错误的 setTimeout，而每个实例的 slide_config.squares 值等于每个幻灯片对象设置的值或默认值（即 slide_default ）

注意：对于第一个代码示例，slide_config.squares 的值是我所期望的，即根据幻灯片对象或 slide_config 默认值设置。同样，该代码在谷歌浏览器中似乎可以正常工作，并且具有第一位代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:09:28.510

您需要通过编写`slide_config`在回调中声明为局部变量`each()`

```
var slide_config = ...; 
```

这将为每个`setTimeout`闭包提供其自己的变量副本，而不是让它们都共享一个全局变量。

# android - greendroid的PageIndicator无法显示

> ID：12558384
> 
> 赞同：1
> 
> 时间：2012-09-24T03:07:26.273
> 
> 标签：android, greendroid

我的代码是：

主活动.cpp

我只是定义了一个按钮来测试 pageindicator，代码很简单。单击按钮和页面指示器更改点

```
package com.example.androidlab;

import greendroid.widget.PageIndicator;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {
    int i = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final Button btn = (Button) findViewById(R.id.btn);
        final PageIndicator pi = (PageIndicator) findViewById(R.id.pi);
        pi.setDotCount(5);
        pi.setActiveDot(0);
        btn.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                pi.setActiveDot((++i) % 5);
            }
        });
    }
} 
```

活动主.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <greendroid.widget.PageIndicator
        android:id="@+id/pi"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </greendroid.widget.PageIndicator>

</LinearLayout> 
```

我使用 android 2.3.1 sdk

谁能帮助我...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T09:56:20.203

我有同样的问题。我不知道为什么会这样，但由于某种原因`myPI.getDotDrawable()`正在返回一个`null`.

我验证了样式确实存在于源代码和 jar 文件中。

我正在检查它以找出问题所在，尽管在 Eclipse 布局预览窗口中，点确实出现了。

**解决方案：**

在您的活动中，添加以下内容：

```
setTheme(com.cyrilmottier.android.greendroid.R.style.Theme_GreenDroid_NoTitleBar); 
```

前`setContentView(...)`

现在像魅力一样工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T11:31:42.900

只需将此项添加到您的 AppThem 中的 styles.xml 中：

```
<style name="AppTheme" parent="AppBaseTheme">
    <item name="gdPageIndicatorStyle">@style/GreenDroid.Widget.PageIndicator</item>
     <!-- Now no need to set Theme_GreenDroid in your activity  -->
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:14:11.277

参考[这个链接](https://github.com/cyrilmottier/GreenDroid/blob/master/GDCatalog/res/layout/paged_view.xml)，`android:layout_width="match_parent"` 换成`android:layout_width="wrap_content"` .

# ruby-on-rails - Kaminari 导航菜单不显示

> ID：12558385
> 
> 赞同：1
> 
> 时间：2012-09-24T03:07:31.937
> 
> 标签：ruby-on-rails, pagination, kaminari

我正在使用 Kaminari 进行分页。在我的控制器中使用以下行：

```
@public_items =Array.new
@items= Item.all
@items.each do |item|
    if (item.is_public)
        @public_items <<item
    end
end
@public_items = Kaminari.paginate_array(@public_items).page(params[:page]).per(4) 
```

在我看来这条线

```
<%paginate @public_items %>
<% @public_items.each do |item| %>
.....
<%end%> 
```

分页效果很好，这意味着我可以通过转到 items?page=2 来导航到不同的页面，但页面导航菜单 () 不显示！并且 <%paginate @public_items %> 不会创建任何 html 代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:10:54.720

不应该是：

```
<%= paginate @public_items %> 
```

包括等号。没有等号它会隐藏它。

# ruby-on-rails - 如何在不刷新页面的情况下显示 flash 错误？

> ID：12558392
> 
> 赞同：1
> 
> 时间：2012-09-24T03:09:09.533
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, forms, ruby-on-rails-3.1

我有一个显示在灯箱中的提交表单。我对表单进行了大量验证，但在某些情况下，播放列表已经提交，在这种情况下，我无法在提交表单之前进行判断。

目前我有`:disable_with => 'Submitting...'`

如果错误被发送回表单，那将是非常棒的，并且提交按钮将重新启用。

如果没有太多复杂性，这可能吗？

我还有第二个相关问题......因为我的表单在灯箱中，所以它的代码实际上在索引页面上（我的应用程序几乎只有一页）。这意味着在我的索引操作中确实没有“新”操作，而是 a `@playlist = Playlist.new(:title => ...)`（以及 a`@playlists = Playlist.all`等）。在我的路线中，我这样做了：`resources :playlists, :only => [:create]`

这听起来像我做的那样吗？

编辑：这里有一些代码，虽然它基本上和你想象的一样简单。

以下类型的作品......如果播放列表有效，它会创建播放列表，否则它什么也不做。两次调用 create.js.erb .. 我现在只是不知道如何完成这项工作。成功时我需要关闭窗口，失败时我需要将错误加载到屏幕上已经存在的表单中。我不确定那会去哪里：/

```
 before_filter :load_genres, :only =>[:index, :user]
  before_filter :new_playlist, :only => [:index, :new]

  def index
    @playlists = Playlist.order('created_at DESC').page(params[:page]).per(30)
  end

  def create
    @playlist = Playlist.new(params[:playlist])
    respond_to do |format|
      if @playlist.save
        format.html { redirect_to root_path, :notice => "Playlist submitted" }
        format.js   {}
      else
        format.html { render :action => :new, :layout => !request.xhr? }
        format.js {}
      end
    end
  end

  def new

  end

  def load_genres
    @genres = Genre.order(:name)
  end

  def new_playlist
    @playlist = Playlist.new(:title => params[:title], :url => params[:url], :description => params[:description])
  end 
```

这是我的表单中的第一个（位于 index.html.erb 中）：

`<%= form_for @playlist, :remote => true do |f| %>`

我目前没有 html 或代码`create.html.erb`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:03:57.490

这是我对这个问题的解决方案......我把这些放在我所有的 js.erb 文件中

```
$('#flash').html("<%= escape_javascript raw(flash_display) %>"); 
```

有了这个助手

```
def flash_display
  response = ""
  flash.each do |name, msg|
    response = response + content_tag(:div, msg, :id => "flash_#{name}")
  end
  flash.discard
  response
end 
```

这适用于已经在布局中设置的 flash div

```
<div id="flash">
  <% flash.each do |name, msg| %>
    <%= content_tag :div, msg, :id => "flash_#{name}" %>
  <% end %>
</div> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:37:34.430

在没有看到您的代码的情况下，我只能提出广泛的建议。

一种方法是为控制器操作设置 js.erb 响应——或者您可以在 HTML 中的 if 子句中执行 js 脚本标记。无论哪种方式，您都将使用 jQuery 来更新元素。

在 js/html erb 文件中：

```
jQuery('#flash_area).html(<flash message>); 
```

视图中的 flash 区域需要一个 id `flash_area`（或任何你想命名的）。

# c++ - 使用 Poco::Net::StreamSocket 套接字从互联网下载文件？

> ID：12558399
> 
> 赞同：-1
> 
> 时间：2012-09-24T03:10:39.353
> 
> 标签：c++, poco-libraries

我想使用 Poco::Net::StreamSocket 套接字从互联网下载文件。我需要一个源模板。任何人帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-11T05:05:08.120

这段代码对我有用：

```
#include "Poco/URIStreamOpener.h"
#include "Poco/StreamCopier.h"
#include "Poco/Path.h"
#include "Poco/URI.h"
#include "Poco/Exception.h"
#include "Poco/Net/HTTPStreamFactory.h"
#include "Poco/Net/FTPStreamFactory.h"
#include <memory>
#include <iostream>

using Poco::URIStreamOpener;
using Poco::StreamCopier;
using Poco::Path;
using Poco::URI;
using Poco::Exception;
using Poco::Net::HTTPStreamFactory;
using Poco::Net::FTPStreamFactory;

int main(int argc, char** argv)
{
  HTTPStreamFactory::registerFactory(); // Must register the HTTP factory to stream using HTTP
  FTPStreamFactory::registerFactory(); // Must register the FTP factory to stream using FTP

  string url = "http://somefile.mp3";
  string filePath = "C:\\somefile.mp3";

  // Create and open a file stream
  std::ofstream fileStream;
  fileStream.open(filePath, ios::out | ios::trunc | ios::binary);

  // Create the URI from the URL to the file.
  URI uri(url);

  // Open the stream and copy the data to the file. 
  std::auto_ptr<std::istream> pStr(URIStreamOpener::defaultOpener().open(uri));
  StreamCopier::copyStream(*pStr.get(), fileStream);

  fileStream.close();
} 
```

以上很多内容来自[此处](https://github.com/pocoproject/poco/blob/develop/Net/samples/download/src/download.cpp)的示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:31:19.940

[查看Poco 网络幻灯片](http://pocoproject.org/slides/200-Network.pdf)的第 11 页，它应该有助于您入门。

# hadoop - SequenceFile.Writer的sync和syncFs是什么意思？

> ID：12558401
> 
> 赞同：3
> 
> 时间：2012-09-24T03:10:58.903
> 
> 标签：hadoop, hdfs, sequencefile

环境：Hadoop`0.20.2-cdh3u5`

我正在尝试使用使用 SequenceFile.Writer 的自定义工具将日志数据（10G）上传到 HDFS。

```
SequenceFile.Writer w = SequenceFile.createWriter(
                hdfs,
                conf,
                p,
                LongWritable.class,
                Text.class,
                4096,
                hdfs.getDefaultReplication(),
                hdfs.getDefaultBlockSize(),
                compressionType,
                codec,
                null,
                new Metadata()); 
```

在上传过程中，如果工具崩溃（没有显式调用close()方法），上传的日志会丢失吗？

我应该及时调用sync()还是syncFs()，这两种方法是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T04:24:23.210

很可能是。

`sync()`创建一个同步点。正如 Tom White (Cloudera) 所著的“Hadoop- The Definitive Guide”一书中所述

> 同步点是流中的一个点，如果阅读器“丢失”（例如在寻找流上的任意位置之后），它可以用来与记录边界重新同步。

现在的实现`syncFS()`非常简单：

```
 public void syncFs() throws IOException {
      if (out != null) {
        out.sync();                               // flush contents to file system
      }
    } 
```

哪里`out`是`FSDataOutputStream`。同样，在同一本书中指出：

> HDFS 提供了一种通过`sync()` on 方法强制所有缓冲区同步到数据节点的方法`FSDataOutputStream`。在从`sync()`HDFS 成功调用返回后，保证写入文件中该点的数据将被持久化并且对所有读取器可见。如果发生（客户端或 HDFS）崩溃，数据不会丢失。

但是一个脚注警告要寻找错误[HDFS-200](https://issues.apache.org/jira/browse/HDFS-200)，因为上述可见性并不总是得到尊重。

# excel - excel 2007 内存限制

> ID：12558403
> 
> 赞同：1
> 
> 时间：2012-09-24T03:11:09.900
> 
> 标签：excel, memory, limit

请问Excel 2007使用的内存真的没有限制吗？

微软规范说没有限制

我想验证它，但我失败了

我的测试环境是：Windows7 64Bit，4G Ram，使用的内存不多

这是我尝试过的，

创建大整数数组。这只能使用1G Ram。FAIL-->PROMPT OOM Error Create large string array, insert 1000 length string ，使用 1.9G Ram。失败 --> 提示字符串空间不足

在工作表中创建 100 万 * 10 列数据，不断复制它。使用 1.9G 内存。FAIL --> 提示一些随机错误。

我的问题是，真的没有内存限制，还是我真的用完了我电脑上的所有可用内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:12:05.137

Excel 内存限制因版本而异。Excel 2007 仅限于理论上 2 GB 的虚拟内存，但实际上由于内存碎片问题等原因，通常无法使用那么多。请参阅[http://www.decisionmodels.com/memlimitsc.htm](http://www.decisionmodels.com/memlimitsc.htm)了解一些更多细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-28T12:34:54.387

要找出 VBA 可用的内存量，请复制/粘贴下面的代码并调用`availableMemoryInMB()`

```
Function allocateMB(intNumMB As Integer) As Boolean
    On Error Resume Next
    Dim a As Variant
    ReDim a(intNumMB, 256, 256) As Variant 'intNumMB x 256 x 256 x 16 bytes = intNumMB MB
    allocateMB = (Err.Number = 0)
    Err.Clear
    Erase a
End Function

Function availableMemoryInMB() As Integer
    Dim intLow As Integer, intHigh As Integer, intTest As Integer
    intTest = 1: intHigh = 0
    Do
        If allocateMB(intTest) Then
            intLow = intTest
            If intHigh = 0 Then
                intTest = intTest * 2
            Else
                intTest = (intLow + intHigh) / 2
            End If
        Else
            intHigh = intTest
            intTest = (intLow + intHigh) / 2
        End If
    Loop Until intHigh - intLow <= 1 And intHigh > 0
    availableMemoryInMB = intLow
End Function 
```

代码的执行需要 2-20 秒。在 64 位 Excel 版本中，几 GB 的内存可供 VBA 使用，而在 32 位版本的 Excel 中，大约有半 GB 可用。

# xml - 使用 sed 在 xml 上移动文本

> ID：12558406
> 
> 赞同：-1
> 
> 时间：2012-09-24T03:12:19.627
> 
> 标签：xml, linux, sed, move

编辑：无论如何感谢您的帮助，忘记它..我将使用java直接在我的服务器上解析xml，然后直接从服务器将其下载到我的设备......这样更容易更快......

有人可以帮助我使用 sed 命令吗？我不太喜欢那个:)

我删除了这`<title lang="en">`条线，只让“pt”线..（设备限制）
我已经这样做了，它工作正常，像这样：

```
sed -i '/<title lang=\"en\">/d' xmltv_clarotv.xml 
```

现在，我正在尝试执行我所说的代码，并从中获取内容`<date></date>`并将其放入`<title lang="pt">`应该会导致如下结果的内容：
`<title lang="pt">[2011] Gigantes de Aço</title>` 请注意，并非每个`<programme>`拥有该字段的`<date>`
人都可以帮助我吗？它需要带有`sed`命令，而我将执行它的设备没有太多的 RAM 和本机功能......

我正在尝试这样做，因为解析它的设备只能识别“标题”和“描述”字段......

xml的一小部分：

```
<programme start="20120923200000 -0300" stop="20120923222500 -0300" channel="T4H" program_id="0000278093" event_id="000000000887005" series_key="">
<title lang="pt">Gigantes de Aço</title>
<title lang="en">Real Steel</title>
<desc>Viva a adrenalina e o frenesi de uma atividade como a luta de Robôs. Esta é a história de um ex-campeão de boxe que, empurrado pelo forte desejo de uma criança, volta ao mundo da luta como um misterioso andróide. - www.revistaeletronica.com.br </desc>
<credits>
<director>Shawn Levy</director>
<actor>Hugh Jackman</actor>
<actor>Dakota Goyo</actor>
<actor>Evangeline Lilly</actor>
<actor>Anthony Mackie</actor>
<actor>Kevin Durand</actor>
<actor>Hope Davis</actor>
</credits>
<date>2011</date>
<category lang="pt">Filme</category>
<category lang="pt">Ação</category>
<country>EUA/Índia</country>
<video>
<colour>yes</colour>
</video>
<rating system="Advisory">
<value>Programa impróprio para menores de 14 anos</value>
</rating>
<star-rating>
<value>4/5</value>
</star-rating>
</programme> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:42:36.327

为工作使用正确的工具。正则表达式不是处理 Xml 的正确工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:47:48.537

我会说使用`XSLT`来重新创建`XML`你想要的方式。（[`Ecplise`](http://www.eclipse.org/)有一个很棒的 XSLT 引擎来实现这一点）。

教程

*   [http://www.w3schools.com/xsl/](http://www.w3schools.com/xsl/)
*   [http://webdesign.about.com/od/xslt/a/xslt-tutorial-1.htm](http://webdesign.about.com/od/xslt/a/xslt-tutorial-1.htm)
*   [http://www.w3schools.com/xsl/xsl_transformation.asp](http://www.w3schools.com/xsl/xsl_transformation.asp)
*   [http://www.peachpit.com/articles/article.aspx?p=21846](http://www.peachpit.com/articles/article.aspx?p=21846)
*   [http://oreilly.com/catalog/orxmlapp/chapter/ch07.pdf](http://oreilly.com/catalog/orxmlapp/chapter/ch07.pdf)

> 为工作使用正确的工具。正则表达式不是处理 Xml 的正确工具。（[帕维尔斯](https://stackoverflow.com/users/1168070/pawel)，2012）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:50:19.763

这可能对您有用（GNU sed）：

```
sed '/^<programme/,/^<\/programme>/!b;/^<programme/{h;d};/^<title lang="en"/d;H;/^<\/programme>/!d;x;s/\(<title[^>]*>\)\(.*<date>\(.*\)<\/date>\)/\1[\3] \2/' file 
```

本质上，您想要存储`programme`标签之间的行，删除英文标题并用日期修改剩余的标题（或不修改）。

解释：

*   `/^<programme/,/^<\/programme>/!b`仅生产`progrmame`线
*   `/^<programme/{h;d}`第一行，覆盖保持空间（HS）中的任何内容并删除
*   `/^<title lang="en"/d`删除英文标题
*   `H`将所有其他行附加到 HS
*   `/^<\/programme>/!d`删除除最后一行以外的所有行
*   `x`与 HS 交换模式空间 (PS)
*   `s/\(<title[^>]*>\)\(.*<date>\(.*\)<\/date>\)/\1[\3] \2/`修改标题

# uiscrollview - iOS6 ScrollBarShouldScrollToTop 未触发/ ScrollView 委托问题

> ID：12558411
> 
> 赞同：5
> 
> 时间：2012-09-24T03:12:37.793
> 
> 标签：uiscrollview, ios6, uiscrollviewdelegate

我正在向我的应用程序添加一个虚拟 ScrollView 以检测用户单击状态栏，以在我的程序中执行一个事件。我在 ViewDidLoad 中创建它：

```
//Dummy Scroll is for the tap on status bar to work 

UIScrollView *dummyScrollView = [[UIScrollView alloc] init]; 
dummyScrollView.delegate = self; 
[[self view ] addSubview:dummyScrollView]; 
[[self view] sendSubviewToBack:dummyScrollView]; 
```

然后我实施：

```
 - (BOOL)scrollViewShouldScrollToTop:(UIScrollView *)scrollView 
 { 

NSLog(@"scrollViewShouldScrollToTop");
 .
 .
 } 
```

在所有以前的 IOS 版本下，它都可以完美无瑕地工作，但在 iOS 6 下，scrollViewShouldScrollToTop 永远不会被调用。这是bug吗？？API 说这应该仍然可以作为 iOS6 中委托的一部分使用，但是在设备和模拟器上的 iOS6 下它永远不会执行......有人知道发生了什么吗？

还是没有其他TableView或者ScrollView，但是有MAPVIEW？？但是 MapView 没有我可以找到设置为 NO 的 shouldScrollToTop .. 所以我仍然很困惑为什么它在 iOS 6 下停止工作...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T19:58:50.777

您创建的 UIScrollView 是否有可能不是您的视图层次结构中唯一的 UIScrollView？看起来在 iOS6 中，如果您的视图层次结构中有多个 UIScrollView，则应该只有一个`scrollsToTop = YES`. 这是将调用其 scrollViewShouldScrollToTop 方法的方法。

我的问题类似，因为我有一个***非常***基本的 UITableView，当点击状态栏时，它不再自动滚动到顶部。我终于记得我的 tableView 中的一个单元格使用 UIWebView，并且该单元格`webView.scrollView`（正确地，现在在 iOS6 中）劫持了对 scrollViewShouldScrollToTop 的调用，在 iOS6 之前，它是在我的 tableView 上进行的。

设置 tableViewCell 的“scrollsToTop = NO”后，状态栏自动滚动再次像以前一样工作。这里或多或少是代码的样子：

```
myCustomCellWithAWebView.webView.scrollView.scrollsToTop = NO; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:25:44.583

在 iOS 6 上，只有点击状态栏滚动视图上方的部分才能触发 scrollsToTop 事件。

而且，该 scrollView 不能被隐藏或 0 alpha。

但它可以被覆盖。或清除背景颜色。

所以在 iOS 6 上，你需要

```
dummyScrollView.frame = self.view.bounds;
dummyScrollView.backgroundColor = [UIColor clearColor]; 
```

# r - R中向量中相邻元素的加权平均值

> ID：12558412
> 
> 赞同：3
> 
> 时间：2012-09-24T03:12:40.710
> 
> 标签：r

我有两个向量`x`和`w`。vector`w`是与 x 长度相同的权重数值向量。我们如何获得向量中相邻元素的`x`加权平均值（第一个元素和第二个元素的加权平均值，然后是第二个和第三个元素的加权平均值......例如，这些向量如下：

```
x = c(0.0001560653, 0.0001591889, 0.0001599698, 0.0001607507, 0.0001623125,
      0.0001685597, 0.0002793819, 0.0006336307, 0.0092017241, 0.0092079042,
      0.0266525118, 0.0266889564, 0.0454923285, 0.0455676525, 0.0457005450)

w = c(2.886814e+03, 1.565955e+04, 9.255762e-02, 7.353589e+02, 1.568933e+03,
      5.108046e+05, 6.942338e+05, 4.912165e+04, 9.257674e+00, 3.609918e+02,
      8.090436e-01, 1.072975e+00, 1.359145e+00, 9.828314e+00, 9.455688e+01) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T03:16:13.627

```
sapply(1:(length(x)-1), function(i) weighted.mean(x[i:(i+1)], w[i:(i+1)])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T03:26:32.107

一种函数式编程方法 - 会比 `@David Robinsons 慢

```
# lots of `Map` \ functional programming
mapply(weighted.mean,
 x = Map(c, head(x,-1),tail(x,-1)), 
 w = Map(c, head(w,-1) ,tail(w,-1)) 
```

# java - 如何在 FileDialog 中过滤文件类型？

> ID：12558413
> 
> 赞同：10
> 
> 时间：2012-09-24T03:12:45.890
> 
> 标签：java, filedialog

我正在使用 FileDialog 在 Java 程序中保存和加载。

如何过滤下拉列表以将文件类型指定为“JPG”或“JPEG”等？

我尝试了以下代码，但似乎没有效果。

有没有其他方法可以做到这一点？

```
public void actionPerformed(ActionEvent e) {
            FileDialog saveFileDialog = new FileDialog(new Frame(), "Save", FileDialog.SAVE);

            saveFileDialog.setFilenameFilter(new FilenameFilter(){
                @Override
                public boolean accept(File dir, String name) {
                    return name.endsWith(".jpg") || name.endsWith(".jpeg");
                }
            });
            saveFileDialog.setFile("Untitled.jpg");
            saveFileDialog.setVisible(true);
        } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T04:28:53.070

答案很简单。您可以使用

```
 saveFileDialog.setFile("*.jpg;*.jpeg"); 
```

无需使用`setFilenameFilter`方法。您可以添加任意数量的文件类型。

可以在**huxhorn**在[Bug ID: 4031440 FileDialog doesn't call FilenameFilter.accept()](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4031440)中的评论中找到解决此问题的方法。

```
public void actionPerformed(ActionEvent e) {
            FileDialog saveFileDialog = new FileDialog(new Frame(), "Save", FileDialog.SAVE);
            saveFileDialog.setFile("*.jpg;*.jpeg");
            saveFileDialog.setVisible(true);
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T03:26:48.433

它对我也不起作用。[文件名过滤器在 Sun 的 Microsoft Windows 参考实现中不起作用。](http://download.java.net/jdk7/archive/b123/docs/api/java/awt/FileDialog.html#setFilenameFilter%28java.io.FilenameFilter%29)

相反，您可以尝试以下代码。您还应该删除该`setFilenameFilter`部分：

```
saveFileDialog.setFile("*.jpg"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T03:59:43.817

我一直使用 JFileChooser 而不是 FileDialog。然后，您可以为您的程序将以这种方式支持的各种类型添加多个 ChoosableFileFilter：

```
File myFilename;
chooser = new JFileChooser();
chooser.addChoosableFileFilter(new OpenFileFilter("jpeg","Photo in JPEG format") );
chooser.addChoosableFileFilter(new OpenFileFilter("jpg","Photo in JPEG format") );
chooser.addChoosableFileFilter(new OpenFileFilter("png","PNG image") );
chooser.addChoosableFileFilter(new OpenFileFilter("svg","Scalable Vector Graphic") );
int returnVal = chooser.showSaveDialog(mainWindow);
if (returnVal == JFileChooser.APPROVE_OPTION) {
     myFilename = chooser.getSelectedFile();
     //do something with the file
} 
```

下面是我对 FileFilter 的实现。

```
/**
 * This class defines which file types are displayed (by default) by the JFileChooser and what file
 * types appear in the drop down menu in the file dialog.
 * You could add more than one file type to the open file dialog by creating multiple instances of this 
 * class and then repeatedly calling addFileFilter.
 * @author LaSpina
 */

import java.io.File;
import javax.swing.filechooser.*;

public class OpenFileFilter extends FileFilter {

    String description = "";
    String fileExt = "";

    public OpenFileFilter(String extension) {
        fileExt = extension;
    }

    public OpenFileFilter(String extension, String typeDescription) {
        fileExt = extension;
        this.description = typeDescription;
    }

    @Override
    public boolean accept(File f) {
        if (f.isDirectory())
            return true;
        return (f.getName().toLowerCase().endsWith(fileExt));
    }

    @Override
    public String getDescription() {
        return description;
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-22T19:28:28.460

从 Java 8 开始，您可以使用 Lambda 表达式：

`fileDialog.setFilenameFilter((File dir, String name) -> name.endsWith(".html"));`

# android - 如何计算android电池使用时间

> ID：12558418
> 
> 赞同：0
> 
> 时间：2012-09-24T03:13:31.713
> 
> 标签：android, battery

现在我需要做一个计算android电池使用时间的应用，但是我在android API里面只能得到当前的电压、状态、数量、温度，而现在我想计算当前的电量可以用多久。例如：我现在有50%的电，3800mv的电压，充满到100%需要多长时间，充满以后能用多久，比如：我开了wifi，现在的功率能用多久。这些怎么算比较好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:28:12.260

这实际上是不可能的，除非您对设备的每个模块的功率要求有非常好的经验数据。但即便如此，这主要是猜测工作。

蜂窝待机电流要求取决于信号强度——来自塔的信号越强，设备用于传输确认的功率就越少。

这对于 wifi 也是类似的。甚至 wifi 接入点的信标频率（以及有多少其他接入点在相同和相邻的信道上）也会直接影响待机电流，从而影响电池寿命。

一旦你有了用户交互，所有的赌注都没有了：只要那个大而耗电的显示屏亮起，你的电池就会以极快的速度放电。

如果需要，您唯一可以跟踪的就是在充电器断开连接时捕获充电状态广播，然后监控电池百分比随时间的下降。然后你可以推断出来。例如，如果充电器在 5 分钟前断开，并且电池电量从 100% 变为 99%，那么您可以计算出在理想情况下，电池现在还剩 99x5 分钟或 495 分钟。

# xampp - Opencart How To] Xampp 本地主机上的多商店

> ID：12558423
> 
> 赞同：0
> 
> 时间：2012-09-24T03:15:08.403
> 
> 标签：xampp, local, opencart

`Opencart`是否有人在本地计算机中设置了多商店`Xampp`，知道如何正确添加代码。我已经扔了和谷歌一样多的教程，这个论坛已经而且似乎无法弄清楚如何正确放置代码。将它放在`http.conf`文件中时的外观示例将非常有帮助。

教程要求我编辑 Apache 配置文件，为每个子商店添加“别名”。

别名`/opcStore_1 "C:/xampp/htdocs/store"`

别名`/opcStore_2 "C:/xampp/htdocs/store"`

1.  转到此路径：C:\xampp\apache\conf\
2.  找到 httppd.conf 文件并打开它
3.  *搜索“”部分并在此部分中添加以下代码*。？？？

别名`/opcStore_1 "C:/xampp/htdocs/store"`

别名`/opcStore_2 "C:/xampp/htdocs/store"`

**添加代码后的外观如何？我在哪里添加它以及它应该看起来如何？** 因为我尝试放置它但只得到错误的本地 URL。谢谢

现在，您必须从`XAMPP`控制面板重新启动 Apache 服务器。重新启动后，您必须在`Opencart`配置中添加子商店。

`OpenCart`多商店的配置。

1.  登录到您的主商店：C:/xampp/htdocs/store/admin
2.  转到：系统>设置，在这里您可以添加新商店。
3.  添加给商店网址时：对于第一个商店给网址：“http://localhost/opcStore_1/”

对于第二家商店，请提供 url：“http://localhost/opcStore_2/”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:43:49.683

看起来像这样，最后我添加了 5 个子商店。

> # # Redirect: 允许你告诉客户端曾经存在于服务器命名空间中的文档，但现在不再存在了。客户端 # 将在其新位置对文档发出新请求。# 示例：# 重定向永久 /foo http://localhost/bar
> 
> ```
> #
> # Alias: Maps web paths into filesystem paths and is used to
> # access content that does not live under the DocumentRoot.
> # Example:
> # Alias /webpath /full/filesystem/path
> #
> # If you include a trailing / on /webpath then the server will
> # require it to be present in the URL.  You will also likely
> # need to provide a <Directory> section to allow access to
> # the filesystem path.
> 
> #
> # ScriptAlias: This controls which directories contain server scripts. 
> # ScriptAliases are essentially the same as Aliases, except that
> # documents in the target directory are treated as applications and
> # run by the server when requested rather than as documents sent to the
> # client.  The same rules about trailing "/" apply to ScriptAlias
> # directives as to Alias.
> #
> ScriptAlias /cgi-bin/ "cgi-bin/"  Alias /allbridaljewelry "C:/wamp/www/newStore"  Alias /caketopshop "C:/wamp/www/newStore" 
> ```
> 
> 别名 /myspecialparty "C:/wamp/www/newStore" 别名 /superweddingday "C:/wamp/www/newStore" 别名 /weddingfavorsmart "C:/wamp/www/newStore"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:03:34.370

您可以在开发阶段（不是本地主机）检查这个[如何设置我们自己的域](http://forum.opencart.com/viewtopic.php?f=104&t=56575)/

它是印度尼西亚语，但您可以尝试 translate.google.com 来翻译它。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T02:45:27.953

假设您的主要商店是`http://localhost/opencart-1.5.6.1`

1.  创建您的多商店（*商店名称马来西亚*），网址是`http://localhost/opencart-1.5.6.1/malaysia/`
2.  打开文件 C:\xampp\apache\conf\httpd.conf 并`Alias /opencart-1.5.6.1/malaysia "C:/xampp/htdocs/opencart-1.5.6.1/"`在后面添加此代码代码`ScriptAlias /cgi-bin/ "C:/xampp/cgi-bin/"`
3.  重新启动 Apache 进程并尝试访问此 URL`http://localhost/opencart-1.5.6.1/malaysia/`

# facebook - 从 facebook 获取照片和相册

> ID：12558426
> 
> 赞同：1
> 
> 时间：2012-09-24T03:15:44.727
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-c#-sdk

我有一个客户希望她的 Facebook 帐户中的相册和图片自动出现在她的网站上，这样她就不必在两个地方管理它们。

我花了几个小时研究并没有找到任何可以准确解释这种情况的东西。我在 facebook 开发人员文档中阅读了很多关于身份验证和访问令牌的信息，但对于我的场景仍然没有清晰的画面。

我可以肯定的是，我客户网站的最终用户不必拥有 facebook 帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T03:37:20.390

首先，您需要在 facebook 上设置一个应用程序，并指定您将在网站上使用它。你可以在[http://developers.facebook.com/apps/](http://developers.facebook.com/apps/)

既然你提到了 c#（这很难使用），这是在 JS 中做到这一点的最佳方法：

```
<div id="fb-root"></div>
<script language="javascript">
var facebookappid = '##FACEBOOK_APP_ID##';
//this is the site owners facebook id. note she must make all her galleries and pictures public
var userid = '8979567465474';

//load the facebook SDK
window.fbAsyncInit = function() {
    FB.init({appId: facebookappid, status: true, cookie: true,
             xfbml: true});
  };
  (function() {
    var e = document.createElement('script'); e.async = true;
    e.src = document.location.protocol +
      '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
  }());

//get albums
var albums;
FB.api('/'+userid+'/albums/', 'get', function(response){
    if (!response || response.error) {
        albums = response.error;
    } else {
        albums = response;
    }
}); 
</script> 
```

从那里你可以获取你的专辑变量，它会给你一个专辑ID数组。循环遍历每个相册，并使用相同的代码 FB.api 获取 '/'+userid+'/'+albumid+'/photos'

您可以使用 Graph API 资源管理器查看从每个数组 [https://developers.facebook.com/tools/explorer?method=GET返回的所有信息](https://developers.facebook.com/tools/explorer?method=GET)

这是从我的个人资料图片相册返回的数据示例： [https ://developers.facebook.com/tools/explorer?method=GET&path=159665340734292%2Fphotos%2F](https://developers.facebook.com/tools/explorer?method=GET&path=159665340734292%2Fphotos%2F)

希望这会有所帮助！如果您需要进一步解释，请告诉我:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T05:45:13.260

如果您有一个基于 Wordpress 的网站，那么您必须按照以下步骤来实现它：

1.  我们知道 Facebook Photo Fetcher 插件可用于 Wordpress，首先安装并使其处于活动状态。
2.  现在您必须在设置 >> FB Photo Fetcher 中为您的 Facebook Photo Fetcher 进行一些设置。
3.  设置成功后，您的插件与您的 ID Facebook 帐户成功连接。
4.  现在，您可以通过搜索相册并获取 ID 将 Facebook 相册插入 Wordpress 中的 Post 或 Page。
5.  使用 Html 编辑器在 Wordpress 中创建一个新页面或帖子并插入以下代码： ，将 234567890123456789 更改为您想要的真实 Facebook 相册 ID。
6.  现在保存并检查您的页面。希望你能在你的 Wordpress 网站上找到你的专辑。

# authentication - 从 Google Drive 上没有 oauth2.0 的共享文件中获取元数据

> ID：12558433
> 
> 赞同：1
> 
> 时间：2012-09-24T03:16:34.533
> 
> 标签：authentication, google-drive-api

我使用的 IDE 是 Eclipse 4.2 Juno。我没有编译或导入错误。这是我目前使用的代码（有些是从教程中公然复制的，有些是改编的，有些我不知道它来自哪里）：

```
public static void print()
{

    HttpTransport httpTransport = new NetHttpTransport();
    JsonFactory jsonFactory = new JacksonFactory();

    Drive serv = new Drive(httpTransport, jsonFactory,null);
    try {
    File f = serv.files().get("1K5Ge9-Rz_L2gJH5hKrpkAfFDos5ZgRCvnzy7_HaiAV8").execute();

    System.out.println(f.getId());

        //System.out.println(f.getDownloadUrl());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

错误与“文件 f = ...”有关。我收到 403 使用限制错误。查看代码，这是意料之中的，因为它没有按照 Google 文档中的要求进行身份验证。

该应用程序是一个简单的可执行 .jar，它从各种来源（在本例中为 google 驱动器）获取内容，然后调用外部程序对其进行转换。如果我能掌握文档的元数据，我就可以用它来更好地为用户服务。但是，内容必须公开。那么如何在不询问用户个人信息或打开他们的网络浏览器的情况下从文档链接中获取数据呢？是的，我有一个 API 密钥。

我知道它可以工作，因为[这里](https://developers.google.com/drive/v2/reference/files/get#try-it)的概念证明让我可以选择是否使用 OAuth2.0。作为记录，我目前正在从文档列表迁移。

*编辑* 在发布这个问题后不到 5 分钟我会弄明白才有意义。我只需要构建一个类似于“https://www.googleapis.com/drive/v2/files/document_id ?key= *key* *”*的 URL，我就可以获得我想要的所有数据。

 *新问题，将我的密钥放在源代码中是否明智？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:34:39.213

如果您不使用 OAuth 2.0 授权您的请求，则无法检索存储在 Google Drive 上的文件的元数据。

在发送授权请求之前，您需要在 API 控制台中创建一个项目并为您的应用程序生成 OAuth 2.0 凭据，而不是 API 密钥。

执行 OAuth 流程并获得访问令牌后，您可以使用它来检索文档的元数据。开始使用 Google Drive SDK 的一种简单方法是[https://developers.google.com/drive/quickstart](https://developers.google.com/drive/quickstart)上的快速入门，它将指导您从项目创建到将文件上传到 Drive 的完整命令行应用程序.*

# r - 编写函数返回向量的组件

> ID：12558434
> 
> 赞同：-2
> 
> 时间：2012-09-24T03:16:56.780
> 
> 标签：r

我想写一个函数，给定一个列表 L，它的每个组件都是一个向量，返回一个整数向量 V，这样对于每个 i，V[i] 是 L[[i]] 的长度

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T03:19:18.540

使用 sapply：

```
sapply(L, length) 
```

例如：

```
L = list(c(1, 2, 3), c(2, 3), c(3, 4, 5, 6))
sapply(L, length)
# [1] 3 2 4 
```

# php - 服务器端获取网站文档的高度并返回？

> ID：12558437
> 
> 赞同：0
> 
> 时间：2012-09-24T03:18:30.267
> 
> 标签：php, server-side

是否可以使用 PHP 或其他一些服务器端编程语言来获取网站的高度并将其返回为 HTML？我想从中获取高度的站点不在我的服务器上，我无法控制它。

我知道你可以让你的服务器截取网站的屏幕截图，所以也许你可以得到它返回的图像的高度。只是一个想法。

谢谢。

# asp.net - 我可以在没有 SQL 托管计划的情况下访问 MS Access 文件作为 ASP.NET 站点的数据库吗？

> ID：12558447
> 
> 赞同：3
> 
> 时间：2012-09-24T03:19:49.953
> 
> 标签：asp.net, ms-access-2007

我正在使用 ASP.NET C# 创建一个站点。现在我的问题是我购买了一个没有 SQL 数据库托管的托管计划，那么我可以使用 MS Access 作为我网站的数据库吗？我已从[net4.in](http://www.net4.in/)获取托管计划。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T03:30:31.623

是的你可以。确保您对文件具有适当的安全访问权限 - 这通常可以通过将 Access .mdb 文件放在 ASP.NET 的 App_Data 'magic' 文件夹中来完成。使用适当的值更新应用程序配置/web.config 中的连接字符串。

有关构建/配置连接字符串的信息，请参阅[connectionstrings.com 。](http://www.connectionstrings.com/access-2007)

并非 SQL Server 中可用的所有功能都可在 Access 中使用，并且您的查询/SQL 语法可能会略有变化，因此请确保 Access 拥有您想要的一切，然后再走这条路线 - 切换/升级主机的额外成本可能是少于修改和重新测试您的代码。

编辑：ASP.NET 还支持 App_Data 中的断开连接的数据库 MDF 文件 - 如果它们支持这一点，可能值得与您的主机检查，因为您根本不需要更改您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:30:35.303

简短的回答是肯定的，但我强烈建议不要这样做。使用 Sql Server 的原因是无限的。Sql Server 更安全，在优化查询方面比 Access 表现更好。Sql Server 查询优化器在分析拉回数据的最佳路径的能力方面非常出色，并且在保留服务器资源方面非常有效。但是，如果您无法支付 Sql 托管的费用，那么您当然可以使用 Access。这篇文章：[http](http://www.aspfree.com/c/a/Microsoft-Access/Connecting-to-a-Microsoft-Access-database-with-ASPNET/) ://www.aspfree.com/c/a/Microsoft-Access/Connecting-to-a-Microsoft-Access-database-with-ASPNET/可以帮助你开始......它已经过时了，但是它应该让您在正确的路径上设置连接字符串以授予您的应用程序访问您的 MS Access 数据的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:57:24.703

感谢您的所有回答，但我自己尝试[下载](http://www.codeproject.com/Articles/3517/ASP-NET-Guestbook-using-MS-Access)了一个示例应用程序并上传到我的服务器上，并且它可以正常工作。所以现在我可以在没有 SQL 服务器托管的服务器上使用 MS Access 数据库。由于使用数据库的需求非常小，所以我在这里使用了 MS Access。

# windows-phone-7 - WP7 手电筒应用错误

> ID：12558449
> 
> 赞同：2
> 
> 时间：2012-09-24T03:20:05.503
> 
> 标签：windows-phone-7, flashlight

在这个应用程序中有两个按钮来打开和关闭相机手电筒。我正在使用此代码，但出现错误。

```
using Microsoft.Devices;

public partial class MainPage : PhoneApplicationPage
{

    PhotoCamera cam = new PhotoCamera(CameraType.FrontFacing); 

    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        cam.FlashMode = FlashMode.On;  
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        cam.FlashMode = FlashMode.Off;
    }
} 
```

我收到此错误：

System.InvalidOperationException 未处理 Message=在完全初始化之前，您不能使用此实例。您可以通过将此 Camera 对象传递给 VideoBrush.SetSource(...)

这是错误的屏幕截图：

![在此处输入图像描述](../Images/4dd2f596f4b9469f9ad5f21b4e6ad303.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:39:59.410

其实没那么容易……手机上的闪光灯可以通过PhotoCamera对象来访问。所以我尝试的第一件事就是以这种方式打开闪光灯。要使用照片相机，您需要两个对象 PhotoCamera 和 VideoBrush。

```
private PhotoCamera _photoCamera;
private VideoBrush _videoBrush;

// Check to see if the camera is available on the device.
if (PhotoCamera.IsCameraTypeSupported(CameraType.Primary))
{
    // Use standard camera on back of device.
    _photoCamera = new PhotoCamera(CameraType.Primary);

    // Event is fired when the PhotoCamera object has been initialized.
    _photoCamera.Initialized += PhotoCamera_Initialized;

    // Add the photo camera to the video source
    _videoBrush = new VideoBrush();
    _videoBrush.SetSource(_photoCamera);
}

private void PhotoCamera_Initialized(object sender, CameraOperationCompletedEventArgs e)
{
    // Check if flash mode is supported on the device.
    if (_photoCamera.IsFlashModeSupported(FlashMode.On))
    {
        // Turn the flash on.
        _photoCamera.FlashMode = FlashMode.On;
        _photoCamera.Focus();
    }
} 
```

# ruby - 有没有更好的方法来收集和连接 Ruby 中的值？

> ID：12558450
> 
> 赞同：1
> 
> 时间：2012-09-24T03:20:28.140
> 
> 标签：ruby

当我从数组中收集值时，我喜欢使用这个 ruby​​ 习惯用法：

```
users.collect &:email 
```

但是当我想加入这些价值观时，我最终不得不像这样扩展它：

```
users.collect { |user| user.email }.join(", ") 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T03:21:41.360

我不明白你为什么要扩展它。你可以这样做：

```
users.collect(&:email).join(', ')

# or you can use collect's alias, map, 
# which is a much better name for this operation :)
users.map(&:email).join(', ') 
```

`&`此上下文中的运算符是 a [`Symbol#to_proc`](http://pragdave.pragprog.com/pragdave/2005/11/symbolto_proc.html)。它基本上将您提供的符号视为它应该在接收器上调用并返回其结果的方法名称。

# objective-c - 获取 NSInteger 值

> ID：12558455
> 
> 赞同：0
> 
> 时间：2012-09-24T03:22:18.200
> 
> 标签：objective-c, ios, ios6

我正在尝试获取 NSInteger 的值并为其设置 UILabel 值。代码如下：

```
counter_.text = [NSString stringWithFormat:@"%@", [counterAmount intValue]]; 
```

其中 counter_ 是我的标签，而 counterAmount 是我的 NSInteger。我不断收到“接收器类型'NSInteger *'（又名'int *'）不是'id'或接口指针，请考虑将其转换为id。

我不太确定如何理解这一点。我很感激你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:27:32.057

`intValue`是一种`NSNumber`返回 C 原始值的方法。`%@`打印对象。为了输出 C 原始值，您必须在格式化字符串中提供类型。`%d`是有符号整数的类型。

根据问题，正如下面 borrden 向我指出的那样，这里处理的类型是`NSInteger`而不是`NSNumber`. 在 iOS`NSInteger`中是一个 typedef `int`，所以你直接处理一个原始类型。NS 前缀并不意味着它是一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T03:31:47.417

由于 counterAmount 是 a `NSInteger`，因此您不能`intValue`在其上使用（因为它不是对象，实际上您无法向其发送**任何**消息）。

相反，使用：

```
counter_.text = [NSString stringWithFormat:@"%d", counterAmount]; 
```

话虽如此，如果您要向用户显示此值，您应该真正使用数字格式化程序，以便按照他们在设置应用程序中设置的方式对其进行格式化：

```
NSNumber *number                = [NSNumber numberWithInt:counterAmount];

NSNumberFormatter *formatter    = [NSNumberFormatter new];
formatter.numberStyle           = NSNumberFormatterDecimalStyle; // Or whichever style is appropriate for your number.

counter_.text                   = [formatter stringFromNumber:number]; 
```

# jquery - 从 Foursquare 提取和列出数据的起点

> ID：12558459
> 
> 赞同：0
> 
> 时间：2012-09-24T03:22:42.657
> 
> 标签：jquery, json, html, foursquare

Foursquare 有几个如何使用他们的 API 的示例，其中一个主要的示例我无法让它工作。但我的主要问题是如何在附近热门地点的地图上提取和显示列表而不是点？

[https://developer.foursquare.com/overview/tutorial](https://developer.foursquare.com/overview/tutorial)

我对此很陌生，不知道要使用什么方法或语言（json、jquery 等）。

任何人有任何方向或帮助让我开始如何从我可以通过 Foursquare 创建的 URL 中提取和列出数据，[https://developer.foursquare.com/docs/venues/trending](https://developer.foursquare.com/docs/venues/trending)？

这是他们用来在地图上调用和标记的代码，但我更喜欢一个列表：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <title>foursquare :: Explore Sample</title>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" id="jquery"></script>

  <link href="/styles/leaflet.css" type="text/css" rel="stylesheet" />
  <link href="/styles/apisamples.css" type="text/css" rel="stylesheet" />

  <script src="/scripts/apisamples.js" type="text/javascript"></script>
  <script src="/scripts/third_party/jquery.ba-bbq.js" type="text/javascript"></script>
  <script src="/scripts/third_party/leaflet.js" type="text/javascript"></script>
  <script src="/scripts/third_party/wax.leaf.min.js" type="text/javascript"></script>

  <style type="text/css">
    html { height: 100%; }
    body { height: 100%; margin: 0; padding: 0; }
    /* Give our markers a background image */
    .leaflet-marker-icon {
      background: url(https://foursquare.com/img/pin-blue-transparent.png);
      padding: 6px;
      padding-bottom: 17px;
      top: -6px;
      left: -6px;
      }
  </style>

  <script type="text/javascript">

  var config = {
    apiKey: 'XXXXXXXXXXXXXX',
    authUrl: 'https://foursquare.com/',
    apiUrl: 'https://api.foursquare.com/'
  };

  //<![CDATA[

  /* Attempt to retrieve access token from URL. */
  function doAuthRedirect() {
    var redirect = window.location.href.replace(window.location.hash, '');
    var url = config.authUrl + 'oauth2/authenticate?response_type=token&client_id=' + config.apiKey +
        '&redirect_uri=' + encodeURIComponent(redirect) +
        '&state=' + encodeURIComponent($.bbq.getState('req') || 'users/self');
    window.location.href = url;
  };

  if ($.bbq.getState('access_token')) {
    // If there is a token in the state, consume it
    var token = $.bbq.getState('access_token');
    $.bbq.pushState({}, 2)
  } else if ($.bbq.getState('error')) {
  } else {
    doAuthRedirect();
  }

  /* HTML 5 geolocation. */
  navigator.geolocation.getCurrentPosition(function(data) {
    var lat = data['coords']['latitude'];
    var lng = data['coords']['longitude'];
    /* Create map. */
    var map = new L.Map('map_canvas')
      .setView(new L.LatLng(lat, lng), 15);
    /**
     * This is a sample map url that you need to change.
     * Sign up at http://mapbox.com/foursquare for a custom map url.
     */
    var mapboxUrl = 'http://a.tiles.mapbox.com/v3/foursquare.map-b7qq4a62.jsonp';
    wax.tilejson(mapboxUrl, function(tilejson) {
      map.addLayer(new wax.leaf.connector(tilejson));
    });

    /* Query foursquare API for venue recommendations near the current location. */
    $.getJSON(config.apiUrl + 'v2/venues/explore?ll=' + lat + ',' + lng + '&oauth_token=' + window.token, {}, function(data) {
      venues = data['response']['groups'][0]['items'];
      /* Place marker for each venue. */
      for (var i = 0; i < venues.length; i++) {
        /* Get marker's location */
        var latLng = new L.LatLng(
          venues[i]['venue']['location']['lat'],
          venues[i]['venue']['location']['lng']
        );
        /* Build icon for each icon */
        var leafletIcon = L.Icon.extend({
          iconUrl: venues[i]['venue']['categories'][0]['icon'],
          shadowUrl: null,
          iconSize: new L.Point(32,32),
          iconAnchor: new L.Point(16, 41),
          popupAnchor: new L.Point(0, -51)
        });
        var icon = new leafletIcon();
        var marker = new L.Marker(latLng, {icon: icon})
          .bindPopup(venues[i]['venue']['name'], { closeButton: false })
          .on('mouseover', function(e) { this.openPopup(); })
          .on('mouseout', function(e) { this.closePopup(); });
        map.addLayer(marker);
      }
    })
  })
  //]]>
  </script>

</head>
<body>
  <div style="width: 100%; height: 100%;" id="map_canvas"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:33:30.437

场地/趋势 API 调用返回 JSON 格式的趋势场地数据。您可以访问[https://developer.foursquare.com/docs/explore#req=venues/trending%3Fll%3D40.7,-74](https://developer.foursquare.com/docs/explore#req=venues/trending%3Fll%3D40.7,-74)查看 API 返回的数据。您可以使用 Javascript（或其他语言）来操作 JSON 以获取热门场所列表。

# java - BCEL 传递“this”参数

> ID：12558461
> 
> 赞同：4
> 
> 时间：2012-09-24T03:24:44.667
> 
> 标签：java, bcel

我有

```
public class SecondClass{
        MainClass main;
        public SecondClass(MainClass main){
                this.main=main;
        }
        ....
} 
```

并且在 MainClass（.class 文件）中有`aMethod`

```
 public class MainClass(){
        public void aMethod(){
                //I want to insert 
                //SecondClass sc = new SecondClass(this);
        }
} 
```

如何使用 Apache BCEL 做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T09:20:37.810

'this' 作为堆栈上的第一项传递。因此，您可以将其存储到局部变量中的方式是使用 jvm 指令 ALOAD 和 ASTORE。

例如以下代码生成相应的 jvm 指令。

```
public void test()
{
    Test var1 = this;
    Test var2 = this;
}

   ALOAD 0      
   ASTORE 1     
   ALOAD  0  
   ASTORE 2           
   RETURN 
```

# python - 瓶子 request.json 在帖子上得到 405

> ID：12558464
> 
> 赞同：4
> 
> 时间：2012-09-24T03:24:59.337
> 
> 标签：python, json, xmlhttprequest, bottle, http-status-code-405

我试图让瓶子在 xmlhttprequest 中接收 json，但出现 405 错误

我的瓶子脚本的一部分：

```
@app.route('/myroute/')
def myroute():
    print request.json 
```

我测试 xhr 的其他脚本的一部分：

```
jdata = json.dumps({"foo":"bar"})
urllib2.urlopen("http://location/app/myroute/", jdata) 
```

为什么我会收到 405？

```
bottlepy error: 127.0.0.1 - - [2012-09-23 23:09:34] "POST /myroute/ HTTP/1.0" 405 911 0.005458

urllib2 error: urllib2.HTTPError: HTTP Error 405: Method Not Allowed 
```

我还尝试了以下变体：

```
@app.route('/myroute/json:json#[1-9]+#')
def myroute(json):
    request.content_type = 'application/json'
    print request.json, json 
```

返回 json 似乎不是问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T03:50:50.433

我认为问题是服务器不允许 POST 请求。您可能可以尝试在 GET 请求中发送它：

```
urllib2.urlopen("http://location/app/myroute/?" + jdata) 
```

* * *

**更新**：

我刚刚意识到，在再次查看您的问题后，您实际上是在尝试通过 GET 请求发送 JSON 数据。一般来说，您应该避免使用 GET 请求发送 JSON，而是使用 POST 请求[[参考](https://stackoverflow.com/questions/978061/http-get-with-request-body/978094#978094)]。

要向 Bottle 发送 POST 请求，您还需要[将标头设置为`application/json`](http://bottlepy.org/docs/0.10/api.html?highlight=json#bottle.BaseRequest.json)：

```
headers = {}
headers['Content-Type'] = 'application/json'
jdata = json.dumps({"foo":"bar"})
urllib2.urlopen("http://location/app/myroute/", jdata, headers) 
```

然后，借助@Anton 的回答，您可以像这样访问视图中的 JSON 数据：

```
@app.post('/myroute/')
def myroute():
    print request.json 
```

另外，作为奖励，发送一个正常的 GET 请求并访问它：

```
# send GET request
urllib2.urlopen("http://location/app/myroute/?myvar=" + "test")

# access it 
@app.route('/myroute/')
def myroute():
    print request.GET['myvar'] # should print "test" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T03:55:34.597

默认情况下，`route`装饰器使装饰函数只处理 GET 请求。您需要添加一个`method`参数来告诉 Bottle 来处理 POST 请求。为此，您需要更改：

```
@app.route('/myroute/') 
```

到：

```
@app.route('/myroute/', method='POST') 
```

或更短的版本：

```
@app.post('/myroute/') 
```

# java - java Math.random() 从 -N 到 N

> ID：12558465
> 
> 赞同：3
> 
> 时间：2012-09-24T03:25:47.033
> 
> 标签：java

我需要在 -N 和 N 之间随机选择一个数字（这是在 java 中，使用 Math.random()）。具体来说，在当前情况下，我需要在 -1 和 1 之间选择一个随机数。所有结果我ve found 解释了如何在一些正数之间找到一个随机数。

现在我正在使用这个语句，它只涵盖了我需要的一半。

```
double i = Math.random(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T03:30:40.473

对于 -n 和 n 之间的随机数：

```
/**
 * @return a random number, r, in the range -n <= r < n
 */
public static double getRandom(double n) {
   return Math.random()*n*2 - n;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T03:27:08.477

只需使用：

```
2 * Math.random() - 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T03:37:01.187

生成在一个范围（min，max）内均匀分布的随机数的一般公式是：

```
min + rand.nextDouble() * (max - min) 
```

在你的情况下，`max == -min == N`. 只需插入值并简化：

```
2 * N * rand.nextDouble() - N 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T03:32:41.173

试试这个：

```
double n = 1.0;
double range = 2 * n;
double value = range * Math.random() - n; 
```

您可以修改该`n`值以更改生成的最大值/最小值，例如，如果您需要范围内的随机数，`[-10, 10)`则让`n = 10.0;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T03:33:19.857

使用随机

```
(0, 32767+32768) then subtract by 32768 
```

或生成之间的数字`0 and 65535 then just subtract 32768`

# java - 如何使用 OWASP HTML Sanitizer 允许特定字符？

> ID：12558471
> 
> 赞同：12
> 
> 时间：2012-09-24T03:26:36.537
> 
> 标签：java, security, xss, sanitization, owasp

我正在使用 OWASP Html Sanitizer 来防止对我的 Web 应用程序的 XSS 攻击。对于许多应该是纯文本的字段，Sanitizer 的作用超出了我的预期。

例如：

```
HtmlPolicyBuilder htmlPolicyBuilder = new HtmlPolicyBuilder();
stripAllTagsPolicy = htmlPolicyBuilder.toFactory();
stripAllTagsPolicy.sanitize('a+b'); // return a&#43;b
stripAllTagsPolicy.sanitize('foo@example.com'); // return foo&#64;example.com 
```

当我有诸如电子邮件地址之类的字段`+`时，例如`foo+bar@gmail.com`我最终在数据库中得到了错误的数据。所以两个问题：

1.  诸如`+ - @`危险的字符本身是否真的需要编码？
2.  如何配置 OWASP html sanitizer 以允许特定字符，例如 + - @？

**问题 2 对我来说是更重要的一个答案。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-17T03:02:26.433

您可能希望使用 ESAPI API 来过滤特定字符。虽然如果你喜欢允许特定的 HTML 元素或属性，你可以使用下面的 allowElements 和 allowAttributes。

// 定义策略。

```
Function<HtmlStreamEventReceiver, HtmlSanitizer.Policy> policy
     = new HtmlPolicyBuilder()
         .allowElements("a", "p")
         .allowAttributes("href").onElements("a")
         .toFactory();

 // Sanitize your output.
 HtmlSanitizer.sanitize(myHtml, policy.apply(myHtmlStreamRenderer)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-19T05:18:59.193

我知道我在 7 年后回答问题，但也许它对某人有用。所以，基本上我同意你们的观点，出于安全原因，我们不应该允许使用特定字符（您涵盖了这个主题，谢谢）。但是，我正在处理遗留的内部项目，该项目要求转义 html 字符但“@”，原因我不知道（但这没关系）。我的解决方法很简单：

```
private static final PolicyFactory PLAIN_TEXT_SANITIZER_POLICY = new HtmlPolicyBuilder().toFactory();

public static String toString(Object stringValue) {
    if (stringValue != null && stringValue.getClass() == String.class) {
        return HTMLSanitizerUtils.PLAIN_TEXT_SANITIZER_POLICY.sanitize((String) stringValue).replace("&#64;", "@");
    } else {
        return null;
    }
} 
```

我知道它不干净，创建了额外的字符串，但我们非常需要这个。因此，如果您需要允许特定字符，您可以使用此解决方法。但是，如果您需要这样做，您的应用程序可能设计不正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T21:31:16.007

XSS 的危险在于，一个用户可能会在他的输入数据中插入 html 代码，然后您将这些代码插入发送给另一个用户的网页中。

如果您想防止这种情况发生，原则上您可以遵循两种策略。您可以在用户进入系统时从用户输入中删除所有危险字符，也可以在稍后将危险字符写回浏览器时对其进行 html 编码。

第一种策略的示例：

用户输入数据（带有html代码）

1.  服务器删除所有危险字符
2.  修改后的数据存储在数据库中
3.  一段时间后，服务器从数据库中读取修改后的数据
4.  服务器将网页中的修改数据插入到另一个用户

第二种策略的例子：

1.  用户输入数据（带有html代码）
2.  未修改的数据，带有危险字符，存储在数据库中
3.  一段时间后，服务器从数据库中读取未修改的数据
4.  服务器对危险数据进行 html 编码，并将其插入到网页中以供其他用户使用

第一种策略更简单，因为您通常读取数据的频率低于使用它们的频率。但是，它也更加困难，因为它可能会破坏数据。如果您需要数据而不是稍后将它们发送回浏览器（例如使用电子邮件地址实际发送电子邮件），则特别困难。它使得在数据库中进行搜索、在 pdf 报告中包含数据、在电子邮件中插入数据等变得更加困难。

另一种策略的优点是不破坏输入数据，因此您可以在以后如何使用数据方面拥有更大的自由。但是，实际检查您是否对发送到浏览器的所有用户提交的数据进行了 html 编码可能会更加困难。解决您的特定问题的方法是在（或如果）您曾经将该电子邮件地址放在网页上时对该电子邮件地址进行 html 编码。

XSS 问题是当您混合用户提交的数据和控制代码时出现的更普遍问题的一个示例。SQL 注入是同一问题的另一个例子。问题是用户提交的数据被解释为指令而不是数据。第三个鲜为人知的例子是，如果您在电子邮件中混合用户提交的数据。用户提交的数据可能包含电子邮件服务器解释为指令的字符串。这种情况下的“危险字符”是一个换行符，后跟“From:”。

不可能针对所有可能的控制字符或字符序列验证所有输入数据，这些控制字符或字符序列可能以某种方式在未来的某些潜在应用中被解释为指令。唯一永久的解决方案是在您实际使用这些数据时实际清理所有可能不安全的数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T12:19:12.867

老实说，你真的应该对所有用户提供的输入做一个白名单。如果它是一个电子邮件地址，只需使用 OWASP ESAPI 或其他东西来根据他们的验证器和电子邮件正则表达式验证输入。

如果输入通过白名单，您应该继续并将其存储在数据库中。在向用户显示文本时，您应该始终对其进行 HTML 编码。

OWASP 不推荐您的黑名单方法，并且可能会被致力于攻击您的用户的人绕过。

# android - 菜单点击显示错误的活动

> ID：12558474
> 
> 赞同：0
> 
> 时间：2012-09-24T03:27:06.393
> 
> 标签：android, android-activity

我为 Android 应用程序创建了三个活动：BaseballCardsList、BaseballCardsDetails 和 FilterBaseballCards。BaseballCardsList 是启动我的应用程序时加载的主要活动。它有一个菜单，然后显示其他两个活动之一。现在，当我只有 BaseballCardsList 和 BaseballCardsDetails 时，一切似乎都正常工作。但是当我添加 FilterBaseballCards 时，我一直遇到问题。我已经找到了[一个](https://stackoverflow.com/questions/12557073/displaying-another-activity-after-clicking-a-menu-item)我遗漏的问题`android:layout_width`和`android:layout_height`属性。我当前的问题是对 BaseballCardsDetails 或 FilterBaseballCards 的 XML 布局文件的更改会导致单击菜单以加载错误的 Activity 或根本不加载任何 Activity（应用程序仍保留在 BaseballCardsList 上）。

目前，我在 filter_cards.xml 中有以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical"
>
    <TextView     
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/filter_by_label" 
    />
    <Button android:id="@+id/ok_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/ok_button"
    />
</LinearLayout> 
```

这会按我的预期编译和运行。当我添加

```
 <Button android:id="@+id/cancel_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/cancel_button"
    /> 
```

在 LinearLayout 的末尾，单击菜单加载 BaseballCardDetails 加载应该在 FilterBaseballCards 中的小部件，然后单击菜单加载 FilterBaseballCards 什么也不做。

我是 Android 编程的新手，对此感到非常沮丧。我以为我从我所做的阅读中了解了一切是如何运作的，但显然不是。我不知道为什么添加 Button 小部件会导致看似无关的问题。而且我不知道如何追查真正的问题是什么。我在哪里可以解决这个问题？如果我需要发布更多代码，我会很乐意这样做。不过，我的最后一个问题以所有代码结束，所以我不想在我的新问题中用这么多代码淹没每个人。

**FilterBaseballCards.java**

```
package bbct.android;

import android.app.Activity;
import android.os.Bundle;

public class FilterBaseballCards extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.filter_cards);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:25:05.073

我希望你已经在你的`Manifest`

```
 <activity android:name=".Your Claass Name"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:45:36.137

以下是我对在 Android 项目的 XML 文件中更改资源和 ID 时会发生什么的推测：

aapt 生成的 R 类包含一堆`static final ints`. 当您编译引用这些的源文件时，该值被硬编码到生成的 .class 文件中。现在，当您更改资源或 id 并重新生成 R 类时，将重新生成 的值`static final ints`。在您编译的 .class 文件中硬编码的值可能是指不同的资源。

我太累了，无法测试这是否正确。因此，如果有人能证实我的猜测，那就太好了。

# java - SpringMvc java.lang.NullPointerException 将表单发布到服务器时

> ID：12558476
> 
> 赞同：0
> 
> 时间：2012-09-24T03:27:18.050
> 
> 标签：java, forms, post, spring-mvc, nullpointerexception

我有一个带有用户名字段的表单，当我从该字段中跳出时，我使用了一个**RESTFUL** **Web** **服务**，该服务调用了控制器中的处理程序方法。该方法调用**DAO**类来检查数据库是否存在用户名。

这很好用，但是当表单发布到服务器时，我调用了与处理程序方法中调用的完全相同的函数，但是当它访问调用**DAO**对象的类时，我得到了**java.lang.NullPointerException 。**所以它甚至不会第二次访问**DAO对象。**

 ****我在所有进行调用的类中都有异常处理程序。关于这里发生了什么的任何想法，为什么我会在第二次调用该函数时得到**java.lang.NullPointerException 。这与****Spring**使用**Singleton**方法实例化**DAO**类或类似的东西有什么关系？可以做些什么来解决这个问题？

 ****这是第一次使用 Web 服务调用方法时发生的情况（假设会发生）：**

```
13011 [http-8084-2] INFO  com.crimetrack.jdbc.JdbcOfficersDAO  - Inside jdbcOfficersDAO
13031 [http-8084-2] DEBUG org.springframework.jdbc.core.JdbcTemplate  - Executing prepared SQL query
13034 [http-8084-2] DEBUG org.springframework.jdbc.core.JdbcTemplate  - Executing prepared SQL statement [SELECT userName FROM crimetrack.tblofficers WHERE userName = ?]
13071 [http-8084-2] DEBUG org.springframework.jdbc.datasource.DataSourceUtils  - Fetching JDBC Connection from DataSource
13496 [http-8084-2] DEBUG org.springframework.jdbc.core.StatementCreatorUtils  - Setting SQL statement parameter value: column index 1, parameter value [adminz], value class [java.lang.String], SQL type unknown
13534 [http-8084-2] DEBUG org.springframework.jdbc.datasource.DataSourceUtils  - Returning JDBC Connection to DataSource
13537 [http-8084-2] INFO  com.crimetrack.jdbc.JdbcOfficersDAO  - No username was found in exception
13537 [http-8084-2] INFO  com.crimetrack.service.ValidateUserNameManager  - UserName :adminz does NOT exist 
```

**第二次当表单是“发布”并且验证方法处理表单并调用 Web 服务将调用的相同方法时：**

```
17199 [http-8084-2] INFO  com.crimetrack.service.OfficerRegistrationValidation  - UserName is not null so going to check if its valid for :adminz
17199 [http-8084-2] INFO  com.crimetrack.service.OfficerRegistrationValidation  - User Name in try.....catch block is adminz
17199 [http-8084-2] INFO  com.crimetrack.service.ValidateUserNameManager  - Inside Do UserNameExist about to validate with username : adminz
17199 [http-8084-2] INFO  com.crimetrack.service.ValidateUserNameManager  - UserName :adminz EXCEPTION OCCURED java.lang.NullPointerException 
```

**验证用户名管理器.java**

```
public class ValidateUserNameManager implements ValidateUserNameIFace {

    private OfficersDAO officerDao;

    private final Logger logger = Logger.getLogger(getClass());

    public boolean DoesUserNameExist(String userName) throws Exception {

        logger.info("Inside Do UserNameExist about to validate with username : " + userName);

        try{

            if(officerDao.OfficerExist(userName) == true){

                logger.info("UserName :" + userName + " does exist");
                return true;

            }else{
                logger.info("UserName :" + userName + " does NOT exist");
                return false;
            }

        }catch(Exception e){

            logger.info("UserName :" + userName + " EXCEPTION OCCURED " + e.toString());
            return false;
        }       

    }

    /**
     * @return the officerDao
     */
    public OfficersDAO getOfficerDao() {
        return officerDao;
    }

    /**
     * @param officerdao the officerDao to set
     */
    public void setOfficerDao(OfficersDAO officerDao) {
        this.officerDao = officerDao;
    }

} 
```

**JdbcOfficersDAO.java**

```
public boolean OfficerExist(String userName){

    String dbUserName;

    try{

        logger.info("Inside jdbcOfficersDAO");

        String sql = "SELECT userName FROM crimetrack.tblofficers WHERE userName = ?";

        try{
            dbUserName = (String)getJdbcTemplate().queryForObject(sql, new Object[]{userName},String.class);
            logger.info("Just Returned from database");

        }catch(Exception e){
            logger.info("No username was found in exception");
            return false;
        }

        if(dbUserName == null){

            logger.info("Database did not find any matching records");
        }

        logger.info("after JdbcTemplate");

        if (dbUserName.equals(userName)) {

            logger.info("User Name Exists");
            return true;

        }else{
            logger.info("User Name Does NOT Exists");
            return false;
        }       

    }catch(Exception e){

        logger.info("Exception Message in JdbcOfficersDAO is "+e.getMessage());
        return false;
    }
} 
```

**OfficeRegistrationValidation.java**

```
public class OfficerRegistrationValidation implements Validator{

    private final Logger logger = Logger.getLogger(getClass());

    private ValidateUserNameManager validateUserNameManager;

    public boolean supports(Class<?> clazz) {

        return Officers.class.equals(clazz);
    }

    public void validate(Object target, Errors errors) {

        Officers officer = (Officers) target;

        if (officer.getUserName() == null){

            errors.rejectValue("userName", "userName.required");

        }else{

            String userName = officer.getUserName();                    

            logger.info("UserName is not null so going to check if its valid for :" + userName);
            try {

                logger.info("User Name in try.....catch block is " + userName);

                if (validateUserNameManager.DoesUserNameExist(userName)== true){

                    errors.rejectValue("userName", "userName.exist");
                }
            } catch (Exception e) {
                logger.info("Error Occured When validating UserName");
                errors.rejectValue("userName", "userName.error");
            }

        }

        if(officer.getPassword()== null){
            errors.rejectValue("password", "password.required");
        }

        if(officer.getPassword2()== null){
            errors.rejectValue("password2", "password2.required");
        }

        if(officer.getfName() == null){
            errors.rejectValue("fName","fName.required");
        }

        if(officer.getlName() == null){

            errors.rejectValue("lName", "lName.required");
        }

        if (officer.getoName() == null){
            errors.rejectValue("oName", "oName.required");
        }

        if (officer.getEmailAdd() == null){
            errors.rejectValue("emailAdd", "emailAdd.required");
        }

        if (officer.getDob() == null){
            errors.rejectValue("dob", "dob.required");
        }

        if (officer.getGenderId().equals("A")){
            errors.rejectValue("genderId","genderId.required");
        }

        if(officer.getDivisionNo() == 1){

            errors.rejectValue("divisionNo", "divisionNo.required");
        }

        if(officer.getPositionId() == 1){

            errors.rejectValue("positionId", "positionId.required");
        }

        if (officer.getStartDate() == null){

            errors.rejectValue("startDate","startDate.required");
        }

        if(officer.getEndDate() == null){

            errors.rejectValue("endDate","endDate.required");
        }

        logger.info("The Gender ID is " + officer.getGenderId().toString());

        if(officer.getPhoneNo() == null){

            errors.rejectValue("phoneNo", "phoneNo.required");
        }

    }

    /**
     * @return the validateUserNameManager
     */
    public ValidateUserNameManager getValidateUserNameManager() {
        return validateUserNameManager;
    }

    /**
     * @param validateUserNameManager the validateUserNameManager to set
     */
    public void setValidateUserNameManager(
            ValidateUserNameManager validateUserNameManager) {
        this.validateUserNameManager = validateUserNameManager;
    }

} 
```

**使用 Logger.Error("Message", e) 更新错误日志：**

```
39024 [http-8084-2] INFO  com.crimetrack.service.OfficerRegistrationValidation  - UserName is not null so going to check if its valid for :adminz
39025 [http-8084-2] INFO  com.crimetrack.service.OfficerRegistrationValidation  - User Name in try.....catch block is adminz
39025 [http-8084-2] ERROR com.crimetrack.service.OfficerRegistrationValidation  - Message
java.lang.NullPointerException
    at com.crimetrack.service.OfficerRegistrationValidation.validate(OfficerRegistrationValidation.java:47)
    at org.springframework.validation.DataBinder.validate(DataBinder.java:725)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doBind(HandlerMethodInvoker.java:815)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:367)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:171)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
39025 [http-8084-2] INFO  com.crimetrack.service.OfficerRegistrationValidation  - Error Occured When validating UserName 
```

**更新**

**应用程序上下文.xml**

```
<beans>
<!-- __________________________________________________________________________________________________ --> 

    <bean id="officerRegistrationValidation" class="com.crimetrack.service.OfficerRegistrationValidation">
            <property name="validateUserNameManager" ref="validateUserNameManager"/>
    </bean>

    <bean id="validateUserNameManager" class="com.crimetrack.service.ValidateUserNameManager">
            <property name="officerDao" ref="officerDao"/>
    </bean>

    <bean id="officerDao" class="com.crimetrack.jdbc.JdbcOfficersDAO" >
            <property name="dataSource" ref="dataSource" />
    </bean>

<!-- __________________________________________________________________________________________________ --> 

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
            <property name="driverClassName" value="${jdbc.driverClassName}"/>
            <property name="url" value="${jdbc.url}"/>
            <property name="username" value="${jdbc.username}"/>
            <property name="password" value="${jdbc.password}"/>
    </bean>
<!-- __________________________________________________________________________________________________ -->    

    <bean id="propertyConfigurer" 
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:jdbc.properties</value>
            </list>
        </property>
    </bean>
<!-- __________________________________________________________________________________________________ -->    

    <bean id="transactionManager" 
          class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource"/>
    </bean>

  </beans> 
```

**小服务程序.xml**

```
<beans>
<!-- __________________________________________________________________________________________________ --> 

     <bean name="/hello.htm" class="com.crimetrack.web.CountryListController">
        <property name="countryManager" ref="countryManager"/>
     </bean>

    <bean name="/login.htm" class="com.crimetrack.web.AuthenticationController">
        <property name="authenticationManager" ref="authenticationManager"/>  
    </bean>

    <bean name="/officer_registration.htm" class="com.crimetrack.web.OfficerRegistrationController">
        <property name="divisionManager" ref="divisionManager" />
        <property name="positionManager" ref="positionManager" />
        <property name="genderManager" ref="genderManager"/>
    </bean>

<!-- __________________________________________________________________________________________________ -->    

    <bean name="/validateUserName.htm" class="com.crimetrack.web.OfficerRegistrationController">

        <property name="validateUserNameManager" ref="validateUserNameManager"/>    

    </bean>

<!-- __________________________________________________________________________________________________ -->    

      <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"></property>
        <property name="prefix" value="/WEB-INF/jsp/"></property>
        <property name="suffix" value=".jsp"></property>        
      </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:06:08.097

我认为您忘记自动装配`officerDao`ValidateUserNameManager.java 中的字段

尝试添加`@Autowire`：

```
@Autowire
private OfficersDAO officerDao; 
```

**更新：**

更新堆栈跟踪后，我认为它`validateUserNameManager`是未自动装配的 OfficerRegistrationValidation.java 中的字段。但是，这取决于 OfficeRegistrationValidation.java 中的第 47 行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:15:53.100

OfficeRegistrationValidation 类在每次调用时都会被实例化，如果这个类应该应用工厂 bean 来处理调用：

```
public final class BeanFactory() {

    private static ClassPathXmlApplicationContext context;

    private static ClassPathXmlApplicationContext getContext() {
        if (context== null) {
            context = new ClassPathXmlApplicationContext("applicationContext.xml");
        }
        return context;
    }

    public static OfficerRegistrationValidation getOfficerRegistrationValidation() {
        return (OfficerRegistrationValidation) getContext().getBean("officerRegistrationValidation");
    }
} 
```

在控制器中进行如下调用：`BeanFactory.getOfficerRegistrationValidation().validate(....)******

# android - 添加sql行时的Android通知

> ID：12558482
> 
> 赞同：2
> 
> 时间：2012-09-24T03:28:12.140
> 
> 标签：android, sql

当将一行添加到远程 SQL 服务器时，如何创建通知？

例如，如果用户 A 通过 PHP 脚本向 SQL 表中插入一行，那么用户 B 是否有办法从服务器获取某种响应以知道显示通知，某些内容已添加到数据库中？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:38:17.363

根据底层数据库（我只在 mySQL 和 Interbase/Firebird 中完成），通常有一种机制可以让更新/插入触发器更新另一个表（您可以拉取）或在套接字上广播消息（然后可以生成通知）。

也就是说，一个好的 Web 应用程序是围绕一个框架构建的，而这些框架通常抽象出数据库交互。简而言之，在 php 脚本中找到插入行的位置，并将通知代码挂在那里。它会更可靠，更即时。

至于通知远程应用程序，您可能需要查看[GCM](http://developer.android.com/guide/google/gcm/index.html)。

# sql - SQL查询缓慢计算累积总数

> ID：12558483
> 
> 赞同：1
> 
> 时间：2012-09-24T03:28:43.220
> 
> 标签：sql, sql-server, performance

我们以 5 分钟的间隔存储大量仪表的数据读数。

涉及的数据表有：

```
Table1 - GaugeData
Columns - 
    GaugeID (int, primary key)
    Timestamp (datetime, primary key)
    Value (decimal)

Table2 - GaugeSummaryData
Columns - 
    GaugeID (int, primary key)
    DayTimestamp (date, primary key)
    DayTotal (decimal) - total for the current date/day
    CumulativeTotal (decimal) - total up to and including the current date 
```

在不以任何方式更改表结构的情况下，将数据从 GaugeData 复制和聚合到 GaugeSummaryData 的最有效方法是什么？

我已经尝试过这两种方法。使用游标将所有数据从 GaugeData 复制到 GaugeSummaryData 需要 40 分钟。使用插入/更新语句需要 2 小时以上。

有人可以建议最有效的方法吗？伪代码或 SQL 赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:04:26.360

5GB 不是那么多数据。我会说你的表可以使用一些新的索引。一旦这些到位，插入触发器应该可以很好地完成这项工作。

```
CREATE TRIGGER trig_INS_GaugeData ON GaugeData FOR INSERT AFTER
AS
BEGIN
    -- create new GaugeSummaryData rows for dates that are not in table yet
    INSERT GaugeSummaryData (GaugeID, DayTimestamp, DayTotal, CumulativeTotal)
    SELECT I.GaugeID, CONVERT(date, I.TimeStamp), 0, SUM(GT.DayTotal)
    FROM INSERTED AS I
    INNER JOIN GaugeSummaryData GT ON I.GaugeID = GT.GaugeID AND convert(date, I.TimeStamp) < GT.DayTimestamp
    GROUP BY I.GaugeID, convert(date, I.TimeStamp)
    -- update GaugeSummaryData rows with totals
    UPDATE GSD
    SET DayTotal = DayTotal+I.Value, CumulativeTotal = CumulativeTotal + I.Value
    From INSERTED AS I
    INNER JOIN GaugeSummaryData GT ON I.GaugeID = GT.GaugeID
          and convert(date, I.TimeStamp) = GT.DayTimestamp
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:12:37.373

是否需要在每天结束时只更新一次 GaugeSummaryData？如果不是，那么可能在 Gauge Data 上应用插入后触发器应该使整个过程实时且耗时更少。只要在 Gauge Data 中创建条目，触发器就会更新 GaugeSummaryData 中的相应条目。如果它是当天的第一个条目，则触发器应在更新之前将 Day Total 重置为 0。

# iphone - NSURLConnectionDownloadDelegate 方法没有被调用

> ID：12558484
> 
> 赞同：2
> 
> 时间：2012-09-24T03:28:44.473
> 
> 标签：iphone, ios, xcode, nsurlconnection

我正在处理一个连接到服务器并从中下载数据的项目。如果连接中断，我喜欢支持恢复下载。我的方法是将下载的数据部分保存到目标文件中；如果连接中断，我想使用 connection:didWriteData:totalBytesWritten:expectedTotalBytes 标记下载的部分，然后使用服务器从停止的部分恢复。

我的代码：

```
- (IBAction)connectToServer:(UIButton *)sender
{
    // setup url and send request to server
    NSURL *url = [NSURL URLWithString:BASED_URL];
    self.urlRequest = [[NSMutableURLRequest alloc] initWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    self.urlConnection = [[NSURLConnection alloc] initWithRequest:self.urlRequest delegate:self];

    // start receive data if connection established
    if (self.urlConnection){
    self.receivedData = [NSMutableData data];
    NSLog(@"starting to receive data");

} else {
    // handle error
    NSLog(@"failed to connect to server");
    }
}

- (void)doSomethingWithData
{
    // handle data here
}

#pragma NSURLConnectionDataDelegate

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse     *)response
{
    [self.receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // received data
    [self.receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    // error connection
    NSLog(@"connection failed");
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"Data receiving succeed, received: %d bytes of data", [self.receivedData length]);

}

- (void)connection:(NSURLConnection *)connection didWriteData:(long long)bytesWritten totalBytesWritten:(long long)totalBytesWritten expectedTotalBytes:(long long)expectedTotalBytes
{
    NSLog(@"not getting called");
} 
```

我的问题是为什么永远不会调用“connection:didWriteData:totalBytesWritten:expectedTotalBytes”方法？

非常感谢！克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:00:14.697

你有没有在.h文件中添加这个：

```
 @interface yourViewContoller : UIViewController <NSURLConnectionDataDelegate, NSURLConnectionDelegate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T08:49:16.417

根据[苹果的文档](https://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLConnectionDownloadDelegate_Protocol/NSURLConnectionDownloadDelegate/NSURLConnectionDownloadDelegate.html)：

> NSURLConnectionDownloadDelegate 协议描述了应该由使用 Newsstand Kit 的 downloadWithDelegate: 方法创建的 NSURLConnection 实例的委托来实现的方法。

此外，它还说：

> 如果你直接使用 NSURLConnection，你的委托类应该实现 NSURLConnectionDataDelegate 协议中定义的方法。

# image - 二进制或连续图像？

> ID：12558496
> 
> 赞同：0
> 
> 时间：2012-09-24T03:30:37.897
> 
> 标签：image, matlab, image-processing

我有一张想在 MATLAB 中使用的图像。但是，我正在寻找一种能够自动发现我的图像是二进制（0 和 1）或连续图像的方法。有没有一段代码的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T03:57:09.233

对于初学者，您不能正式谈论二进制或连续图像。数字图像具有一组离散的值，取自有限值集，具体取决于它们的格式和像素逐位表示。

例如，“二值”图像将具有 2 级灰度（白色和黑色），由 0 或 1 或任何其他值组合表示，例如，级别 0、255 的图像仍然是“二值”。8 位表示（即每像素 8 位）的灰度图像将具有从0（黑色）到255（白色）`2^8`的离散强度级别。`min``max`

因此，您可以测试唯一灰度级的数量，即输入图像中的唯一值：

```
I = imread(image_filename); 
if length(unique(I))==2, 
    flag_binary = true 
end 
```

**例子**：

```
I = imread('cameraman.tif');
>> disp(flag_binary)
     0
I = imread('circles.png');
>> disp(flag_binary)
     1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:54:28.207

根据您的问题，我猜您只处理逻辑类或双重类的图像。第一个应该用于真正的二进制图像，但不幸的是，在野外使用代码时并非总是如此。

在我看来，您的问题是区分双类的真实图像（0 和 1 之间的所有值）或作为双类的二进制图像（所有值都是 0 或 1）。最好的方法是如果图像只有值 1 和 0，则返回 true：

```
bool = all ((image(:) == 1) + (image(:) == 0)); 
```

这是`isbw()`您可以使用的 Octave 图像包中的一行`isbw (img, "non-logical")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:26:54.100

使用 计算直方图`imhist`。如果直方图中有两个以上不同的灰度值，则您的图像不是二进制的。

# javascript - getter 返回未定义

> ID：12558498
> 
> 赞同：1
> 
> 时间：2012-09-24T03:31:15.200
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我正在使用 sencha touch 2 构建应用程序。

我有以下看法：

```
Ext.define("DRT.view.Pbox", {
    extend: 'Ext.form.Panel',
    xtype: 'pboxcard',
    config: {
        floating: true,
        centered: true,
        modal: true,
        height: 200,
        wifth: 300,
        styleHtmlContent: true,
        html: 'Hi this is a popup',
        items: [
            {
                xtype: 'button',
                action: 'hide',
                ui: 'confirm',
                docked: 'bottom'
            }
        ]
    }
}); 
```

在我的控制器中，我有以下参考：

```
 config: {
        refs: {
            home: 'homecard',
            pbox: 'pboxcard',
        }
   } 
```

我有以下功能之一：

```
showError: function(){
            var popup = this.getPbox();
        console.log(popup);
        Ext.Viewport.add(popup);  
        popup.show();
     } 
```

但由于某种原因，弹出窗口未定义。我似乎无法找出问题所在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:41:20.127

抱歉，伙计们，我想通了……我想发布得太早了。不得不这样做

```
 pbox: {
        selector: 'formpanel pboxcard',
        xtype: 'pboxcard',
        autoCreate: true
    }, 
```

# javascript - 如何编写一个 AMD 模块以在没有 RequireJS 的页面中使用？

> ID：12558499
> 
> 赞同：10
> 
> 时间：2012-09-24T03:31:21.403
> 
> 标签：javascript, requirejs, amd

我需要重新构建现有的 AMD 模块，以使其在有/没有出现 RequireJS 的页面中都可用。我应该怎么做，有没有示例代码？最好是一种不污染全局命名空间的方法，尽管不是严格要求。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T12:17:54.690

这根本不是一个坏主意，通常需要 JS 库来支持 AMD/非 AMD 环境。这是解决方案的一种变体：

```
!function (name, definition) {
    if (typeof module != 'undefined') module.exports = definition()
    else if (typeof define == 'function' && define.amd) define(name, definition)
    else this[name] = definition()
}('reqwest', function () {

    // Module here

}); 
```

唯一的缺点是您不能请求其他依赖项，因此这仅在独立库中有用，如下所示

*   [达斯汀迪亚兹的 Reqwest](https://github.com/ded/reqwest/blob/master/reqwest.js)
*   [胡子](https://github.com/janl/mustache.js/blob/master/mustache.js)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T07:55:41.243

*我最近写了一篇关于这个主题的要点，所以我在下面为你复制了相关的部分；但是，请随时查看[原始 Gist](https://gist.github.com/3880415)以获取更多信息。*

以下样板允许您编写一次模块并使其在 CJS/NodeJs、AMD 或浏览器全局环境中工作。

### 最佳使用时...

*   您正在从命名空间（错误、全局）代码迁移到 AMD 或 CJS 模块或两者。
*   您还不能考虑浏览器全局变量，但还需要通过 NodeJS 测试您的代码（例如[Mocha](http://visionmedia.github.com/mocha/)）

### 好处与权衡

*   一种单一的模块格式，允许您以 AMD、CJS/NodeJS 和旧版浏览器全局变量（如`window.*`.
*   允许定义多个依赖项。
*   通过 CLI/NodeJS 运行器（例如 Mocha）运行单元测试。
*   在逐步迁移到 CJS/NodeJS 或 AMD 模块时减轻痛苦。
*   你放弃了类似 Java 的命名空间（例如 com.company.package.module）——嗯，反正它们是一团糟。
*   这（UMD）不是标准；公平地说，AMD 也不是（这是一个具有明确规范的约定）。
*   大量的样板（和丑陋的）。

## 例子

```
/**
 * Creates a an "AppWidget" module that imports a "SingleDependency" constructor and exposes an "AppWidget" constructor.
 * 
 * Allows you to access AppWidget as a CJS/AMD module (i.e. NodeJS or RequireJs):
 * 
 * @example
 *    var AppWidget = require('app-widget')
 * 
 * Allows you to access AppWidget as a legacy browser global:
 * 
 * @example
 *    var AppWidget = window.AppWidget
 */

!(function (name, context, definition) {
  if (typeof exports === 'object') { module.exports = definition(require); } else if (typeof define === 'function' && define.amd) { define(definition); } else { context[name] = definition(); }
}).call(this, 'AppWidget', this, function (require) {
  'use strict'

  // imports
  var SingleDependency = (typeof require === 'function') ? require('./single-dependency') : window.SingleDependency;
  var singleDependency = new SingleDependency();

  function AppWidget() {}
  AppWidget.prototype.start = function () {};

  // exports
  return AppWidget;

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T12:22:29.953

查看[UMD](https://github.com/umdjs/umd)。您应该在那里找到适合您目的的模式。模板有些难看，但可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T06:16:49.453

我认为这是一个非常糟糕的主意。

您必须采取的可能步骤以确保其有效：

1.  确保所有模块的依赖项都加载到该页面上（jQuery、Backbone 等）
2.  按照您知道它们应该执行的顺序在页面上包含您的模块
3.  确保作为另一个模块的依赖项的任何模块创建一个与“导入”模块期望并在其代码中引用的同名的全局变量
4.  确保您的模块以相同的名称引用依赖项（包括其他模块）
5.  覆盖/创建一个`define`执行模块工厂函数的全局方法

这只是你必须做的一部分。您需要为您的 RequireJS 页面（或至少在其配置中）兼容 AMD 的第三方`shim`，但对于您的非 RequireJS 页面也应该是全局的？

**简而言之，IMO，将现有代码返工为 AMD 版本会更容易，这可以使您的模块成为非 AMD**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-13T15:21:38.557

根据 Simon Smiths 的回答，我处理了模块依赖项：

```
(function (root, factory) {
    if (typeof exports === "object") {
        module.exports = factory();
    } else if (typeof define === "function" && define.amd) {
        define(['jquery', 'ol'], factory);
    } else {
        root.module_name = factory();
    }
}(this, function (_$, _ol) {
    return new function () {
        // supposed that window.ol and window.$ are defined
        var ol = goog.isDef(_ol) ? _ol : window.ol;
        var $ = goog.isDef(_$) ? _$ : window.$;
}
})); 
```

`goog.isDef`函数在哪里`Google Closure`：

```
goog.isDef = function(val) {

  return val !== void 0;
}; 
```

希望它会帮助某人。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-12-19T17:14:31.287

查看[Browserify](http://browserify.org)，它将创建一个独立的 .js 文件，其中包含从您的 AMD/JS 代码中嵌入的所有依赖项。

然后，您可以发布 2 个版本的代码，一个用于 AMD 用户，一个用于“oldschool” js 用户。

# algorithm - 循环不变功能

> ID：12558502
> 
> 赞同：0
> 
> 时间：2012-09-24T03:31:56.043
> 
> 标签：algorithm, loop-invariant

我想知道循环不变量。我开始知道在算法（主要是排序算法）中有一个循环不变量，循环不变量表示算法的正确性。

这是如何运作的？有人可以帮助我理解这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T03:43:01.560

循环不变量本身并不表示算法的正确性。它是一个谓词，对于循环的每次迭代都是正确的。（您通常需要证明谓词对于循环确实是不变的。）然后可以使用不变量来证明循环的各种属性（可能包括正确性）。维基[百科文章*Loop invariant*](http://en.wikipedia.org/wiki/Loop_invariant)有一些例子展示了它是如何工作的。有关更多示例和解释，请参阅[此线程。](https://stackoverflow.com/questions/3221577/what-is-a-loop-invariant)

# aviarc - Aviarc 无法创建空数据代理

> ID：12558503
> 
> 赞同：0
> 
> 时间：2012-09-24T03:32:01.153
> 
> 标签：aviarc

只是想知道是否有人现在可以解决此问题。创建了数据代理的每个部分，并且所有数据库连接都可以正常工作。但是，一旦我们尝试将它们放在一起，就会出现一个错误，即无法创建 Null Databroker。

真正奇怪的是，我们的数据经纪人基本上是完全相同的工作方式。

任何人都可以对这个问题有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:14:02.470

我们今天一起工作。我们做了三件事来解决问题并解决问题：

1.  我们更改了调用工作流程，以便在显示屏幕标签内刷新数据集（以前，这是在调用屏幕之前完成的）。
2.  我们刷新了数据集（一个 H2 数据库）并连接了数据库（之前，它显示为池未打开）
3.  我们将数据库名称更改为 main

它现在正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:22:09.143

“空数据代理”表明代理未正确创建，尽管看起来并非如此，因为您没有提到必须对其进行修改才能使其正常工作。

在这些情况下，通过管理应用程序查看错误日志以查看是否在编译时以外的某个时间抛出了错误会很有用。

# java - 带有位集数组的空指针异常

> ID：12558504
> 
> 赞同：1
> 
> 时间：2012-09-24T03:32:10.763
> 
> 标签：java, nullpointerexception, bitset

有人可以向我解释为什么以下结果会导致空指针异常吗？以及如何为 bitarray[0] 设置值？

```
 BitSet[] bitarray;
      bitarray= new BitSet[10];
      bitarray[0].set(1); 
```

另外，为什么这样的工作不会导致指针异常？

```
 BitSet[] bitarray = new BitSet[10];
     BitSet bits = new BitSet(32);
     bits.set(1);
     bitarray[0] = bits; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T03:33:19.657

当您初始化`bitarray`时

```
bitarray = new BitSet[10]; 
```

它是一个包含 10 个引用的数组，*所有引用都是`null`*. 您需要先初始化每个引用，然后才能使用它。在第二种情况下，您分配`bits`为 的值`bitarray[0]`。`bitarray[0]`在第一种情况下，您在调用之前没有分配任何东西`set()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T03:33:20.687

`bitarray= new BitSet[10];`用 value 设置 10 个索引`null`。

第一个案例

`bitarray[0]`是`null`。你没有赋值。这就是为什么`NPE`

第二种情况：：

您正在将值设置为`Bitset`，然后将其分配给`index 0`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T03:35:03.747

您已经初始化**了 bitarray**，但之后还必须分别初始化每个项目；否则你拥有的是一个包含 10 个空引用的数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T04:13:47.210

[您可以在Arrays Tutorial](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)上找到很好的帮助

![数组](../Images/1c76b8eadfd68779ef8986ab2bca7e3b.png)

在上面的例子中，如果你只声明数组，`10 BitSet`因为默认值`BitSet`是`null`所以它包含所有`null`引用

```
BitSet[] bitarray = new BitSet[10]; 
```

所以初始化你需要做的引用

```
bitarray[index] =  new BitSet(SomeValue) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T03:33:22.593

仅仅因为您有一个包含十个空间的数组，并不意味着该数组已**填充**。在工作示例中，您正在设置一个值....

# python - 装饰时保留argspec？

> ID：12558505
> 
> 赞同：8
> 
> 时间：2012-09-24T03:32:14.030
> 
> 标签：python

> **可能重复：**
> [如何以编程方式更改 python 装饰器中函数的 argspec？](https://stackoverflow.com/questions/3729378/how-can-i-programmatically-change-the-argspec-of-a-function-in-a-python-decorato)

argspec 是获取函数参数的好方法，但是当函数被修饰时它不起作用：

```
def dec(func):
    @wraps(func)
    def wrapper(*a, **k)
        return func()
    return wrapper

@dec
def f(arg1, arg2, arg3=SOME_VALUE):
    return

import inspect
print inspect.argspec(f)

-----------

ArgSpec(args=[], varargs='a', keywords='k', defaults=None) 
```

Argspec 应该返回`arg1`, `arg2`, `arg3`. 我想我需要以`wrapper`不同的方式定义不使用`*a`and `**k`，但我不知道如何。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T03:42:53.397

该`decorator`模块可以很好地保存它们：

```
from decorator import decorator
@decorator
def dec(func, *a, **k):
    return func()

@dec
def f(arg1, arg2, arg3=1):
    return

import inspect
print inspect.getargspec(f) 
```

```
ArgSpec(args=['arg1', 'arg2', 'arg3'], varargs=None, keywords=None, defaults=(1,)) 
```

您可能可以通过手动将一些`__foo__`属性从函数复制到包装函数来获得相同的效果，但无论如何装饰器模块证明了它是可能的，并且可能会给您一个起点。

# sql - 在 Oracle 中连接和分组多行

> ID：12558509
> 
> 赞同：40
> 
> 时间：2012-09-24T03:32:47.383
> 
> 标签：sql, oracle, concatenation, grouping, group-concat

> **可能重复：**
> [如何在 Oracle 中检索 A、B 格式的两列数据](https://stackoverflow.com/questions/12145379/how-to-retrieve-two-columns-data-in-a-b-format-in-oracle)

假设我有一个这样的表：

```
NAME          GROUP_NAME
name1         groupA
name2         groupB
name5         groupC
name4         groupA
name3         groupC 
```

我想要这样的结果：

```
GROUP_NAME     NAMES
groupA         name1,name4
groupB         name2
groupC         name3,name5 
```

如果表中只有一列，我可以通过执行以下操作来连接记录，但是在上下文中进行分组，我真的没有太多想法。

连接一个列表：

```
SELECT names 
FROM (SELECT SYS_CONNECT_BY_PATH(names,' ') names, level
      FROM name_table

      START WITH names = (SELECT names FROM name_table WHERE rownum = 1)
      CONNECT BY PRIOR names < names
      ORDER BY level DESC)
      WHERE rownum = 1 
```

## 更新：

我现在有一个解决方案`LISTAGG`：

```
SELECT
group_name,
LISTAGG(name, ', ')
WITHIN GROUP (ORDER BY GROUP) "names"
FROM name_table
GROUP BY group_name 
```

`LISTAGG`仍然对不可用的情况下更“通用”的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-09-24T03:43:57.927

如果您使用的是 11g，请考虑使用[LISTAGG函数：](http://docs.oracle.com/cd/E11882_01/server.112/e41084/functions089.htm#SQLRF30030)

```
select grp, listagg(name,',') within group( order by name ) 
  from name_table group by grp 
```

[sqlFiddle](http://sqlfiddle.com/#!4/13401/15)

**upd：**如果您不是，请考虑使用分析：

```
select grp,
    ltrim(max(sys_connect_by_path
       (name, ',' )), ',')
        scbp
  from (select name, grp,
            row_number() over
           (partition by grp
            order by name) rn
         from tab
          )
start with rn = 1
connect by prior rn = rn-1
and prior grp = grp
  group by grp
  order by grp 
```

[sqlFiddle](http://sqlfiddle.com/#!4/13401/20)

# for-loop - 使用文件中的行作为变量，馈送到程序 - 自动化 wget

> ID：12558514
> 
> 赞同：0
> 
> 时间：2012-09-24T03:33:19.983
> 
> 标签：for-loop, automation, cron, pipe, wget

我编写了这个脚本来自动化我不同服务器之间的 wget，并将结果输出到日志文件，然后通过电子邮件将它们发送给我。我分享这个的部分原因是为了让其他人可以自己使用这个解决方案。

我已将文件放在 cron.weekly 中，因此它每周都会向我发送电子邮件。

顺便提一句。我是一个绝对的新手，这是我从这个网站学习编写的第一个脚本。

脚本如下：我也做了一些小评论。

```
#!/bin/sh
#wget -verbose -tries -timeout -dontcreatedirectories -dontsaveanything  http://x  output text to file

# automating apt-get update and upgrade so it runs weekly
apt-get update
apt-get upgrade -y

# this is where the logs will be stored
cd /var/log

# create a tmp file and if it is left behind from earlier results, empty it out
echo -e "\n" > wget.tmp

# these are the header texts for the results 
echo "***************" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
echo "WGET SCHEDULES" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
echo "***************" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log

# this will make note of the time the tests are started
date "+START OF WGETS SCHEDULE at %c"  >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
echo "\n" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
echo "\n" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log

# up to 10 servers to wget from
echo "Server #1" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
wget -v -r -t 2 -T 7 -nd -O /dev/null http://servername/file 2>> wget.tmp
grep -i 'Length\|connect\|100%\|saved\|failed\|Error' wget.tmp >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
rm -f wget.tmp
echo "\n" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log 
```

. 一直持续到 。

```
echo "Server #10" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
wget -v -r -t 2 -T 7 -nd -O /dev/null http://servername/file 2>> wget.tmp
grep -i 'Length\|connect\|100%\|saved\|failed\|Error' wget.tmp >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
rm -f wget.tmp
echo "\n" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log

# record the end time of tests
echo "***************" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
date "+END OF WGETS SCHEDULE at %c"  >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log

#mail results to yourself
echo "Subject: $(hostname -s| tr a-z A-Z)"  Wget Results v.2.0 Sendmail  "$(date +%x)"      ----   "$(date "+%A")"    "$(date "+%X")   ("$(date "+%Z")")  :::  Week "$(date "+%V")"  """ | cat -  $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log | /usr/lib/sendmail -t myemailaddress@host.x 
```

理想情况下，我不想将自己限制在 x # 台服务器上，但只要文件 servers.list 中有文本（通过在文件名中包含“.”，我就可以将其存储在 cron.weekly 中并且不会被处理）。所以对于每台服务器，写服务器#，处理wget，输出到文件，grep到日志文件。最好将 servers.list 文件格式化

```
hostname filename store/to
.
.
hostname filename store/to 
```

例子：

```
msn.robots.ua 100mb.test /dev/null
justme.cov ratings.xlsx  /srv/storage/latest 
```

邮件看起来像

主题：服务器名 Wget 结果 v.2.0 Sendmail 09/09/12 ---- 星期日 04:59:21 (MSK) ::: 第 36 周

* * *

WGET 时间表

* * *

WGETS 开始时间为 2012 年 9 月 9 日星期日 04:52:00

服务器 #1 连接到 xxx.xxxxxx.com|ip.ip.ip.ip|:80... 已连接。长度：104857600 (100M) [text/plain] 102350K ......................................................................................................... .. ..........100% 5.73M 0s 102400K 100% 0.00 =25s 2012-09-09 04:52:27 (4.07 MB/s) - `/dev/null' 已保存 [104857600/ 104857600]。.

* * *

WGETS 计划于 2012 年 9 月 9 日星期日 04:59:21 结束

* * *

因此，我的 /var/log 最终将诸如 wordpress-wget-SUMMARY-sep24_2012.log 之类的文件存储为示例文件名。问题是维护它正在成为一个问题，服务器发生变化，所以我想只更新一个位置的服务器列表，让他们自己处理。在执行之前，它将下载新的 servers.list 并完成其余的工作。

邮件工作输出到日志文件工作正常，一切正常，只需要一*点点*调整。

泰！泰！Ty 阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:52:37.633

如果我正确地重复了您的问题，那么您想要替换您只能做 10 台服务器并希望从文件中提取数据而不是在脚本中修复它（如果有任何变化）这一事实。基于该重复，这是我的建议：

在您的 server.list 文件中，| 分隔它，我将在代码片段之后解释原因。所以你的 server.list 文件看起来像：

```
msn.robots.ua|100mb.test|/dev/null
justme.cov|ratings.xlsx|/srv/storage/latest 
```

通过此设置，您可以在 bash 脚本中放置一个 for 循环，中间有重复的代码，如下所示：

```
 for conf in $(cat server.list); do
        server=`echo $conf | cut -d"|" -f1;`
        filename=`echo $conf | cut -d"|" -f2;`
        storeto=`echo $conf | cut -d"|" -f3;`

        ... the rest of your code goes here using the above variables ...

    done 
```

如果您在文件中使用空格作为分隔符，则每次迭代中的 $conf 将只是每个空格分隔的值，而不是获取行然后将其拆分。

使用 awk 可能有一种更优雅的方法来执行此操作，但这会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:38:04.873

所以最终脚本现在看起来像这样

```
#!/bin/sh
#wget -verbose -tries -timeout -dontcreatedirectories -dontsaveanything  http://x  output text to file
# update and upgrade packages and packages list
apt-get update
apt-get upgrade -y

# go to location where logs will be stored and servers list is updated from list stored on master server
cd /var/log
rm -f server.list 
wget http://yourserver/server.list

# create a tmp file and if it is left behind from earlier results, empty it out
echo -e "\n" > wget.tmp

# these are the header texts for the results 
echo "***************" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
echo "WGET SCHEDULES" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
echo "***************" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log

# this will make note of the time the tests are started
date "+START OF WGETS SCHEDULE at %c"  >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
echo " " >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log

### for loop to read from server.list file like this http://msn.robots.ua|100mb.test|/dev/null
wgetcount=0
for conf in $(cat server.list); do
        wgetcount=$((wgetcount+1)) 
        server=`echo $conf | cut -d"|" -f1;`
        filename=`echo $conf | cut -d"|" -f2;`
        storeto=`echo $conf | cut -d"|" -f3;`
        echo "Server # "$wgetcount >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
        wget -v -r -t 2 -T 7 -nd -O $storeto $server/$filename 2>> wget.tmp
        grep -i 'Length\|connect\|100%\|saved\|failed\|Error' wget.tmp >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
        rm -f wget.tmp
        echo " " >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
    done

# record the end time of tests
echo "***************" >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log
date "+END OF WGETS SCHEDULE at %c"  >> $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log

#mail results to yourself
echo "Subject: $(hostname -s| tr a-z A-Z)"  Wget Results v.2.0 Sendmail  "$(date +%x)"      ----   "$(date "+%A")"    "$(date "+%X")   ("$(date "+%Z")")  :::  Week "$(date "+%V")"  """ | cat -  $(hostname -s)"-wget-SUMMARY-"$(date "+%b%d_%Y" | tr A-Z a-z).log | /usr/lib/sendmail -t youremailaddress 
```

相同的结果，可更新，更简洁和更短的代码；）））谢谢彼得

# python - 非常难以捉摸的 for 循环（绞尽脑汁！）

> ID：12558516
> 
> 赞同：1
> 
> 时间：2012-09-24T03:33:45.350
> 
> 标签：python, for-loop, python-2.7, iteration

我在 Python 2.72 中遇到了一个循环问题，这让我非常沮丧。基本上循环不会在第一个 index 上迭代`j`，我已经尝试了各种方法来修复它，但没有运气。

```
def learn(dataSet):
    for i in dataSet.getNext():
        recall = raw_input("Enter all members of %s you are able to recall >>> (separated by commas)  " % (i.getName()))
        missed = i.getMembers()     
        missedString = []       
        for a in missed:
            missedString.append(a.getName()) 
```

这是我无法迭代的循环。第一个 for 循环仅经过`j`拆分字符串列表中的第一次迭代，然后将其从`missedString`. 我希望将拆分字符串的所有成员`recall`从`missedString`.

```
for j in string.split(recall, ','):
    if j in missedString:
        missedString.remove(j)
        continue
for b in missed:
    if b.getName() not in missedString:
        missed.remove(b)
print 'You missed %d.  ' % (len(missed))
if (len(missed)) > 0:
    print 'Maybe a hint or two will help...' 
    for miss in missed:
        remind(miss.getSecs(), i.getName(), missed) 
```

如何修复上述代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T04:26:07.040

`missedString`是一个可怕的**列表名称**

请注意，您可以在几个地方简化代码

```
 missedString = []       
        for a in missed:
            missedString.append(a.getName()) 
```

可以用列表推导替换

```
 missedString = [a.getName() for a in missed] 
```

在这里你应该只使用`split`方法`recall`而不是`string.split`)。看起来这个循环应该嵌套在`for i`循环内，所以我假设它是（如果不是，你将使用错误的数据集召回的错误值）。

```
for j in string.split(recall, ','):
    if j in missedString:
        missedString.remove(j)
        continue 
```

它也可以用列表推导替换。

```
recall_set = set(recall.split(','))
missedString = [j for j in missedString if j not in recall_set] 
```

如果例如，这将无法正常工作。用户在输入中输入了额外的空格，因此对`strip()`这些元素来说是个好主意

```
recall_set = set(s.strip() for s in recall.split(','))
missedString = [j for j in missedString if j not in recall_set] 
```

这个循环有一个严重的问题。一般来说，从您正在迭代的列表中删除元素并不是一个好主意。你最终会跳过一些元素而不检查它们

```
for b in missed:
    if b.getName() not in missedString:
        missed.remove(b) 
```

也许列表理解可以再次提供帮助

```
missed = [b for b in missed if b.getName() in missedString] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:29:07.023

在这段代码中

```
for j in string.split(recall, ','):
    if j in missedString:
        missedString.remove(j)
        continue 
```

尝试添加一个

```
 else:
        print 'Didn't remove "%s"' % j 
```

（并摆脱`continue`. 它没有任何目的）。

您可能在拆分中缺少一些空格。如果是这种情况，请添加`j = j.strip()`or`re.split(r'\s*,\s*', recall)`代替`string.split(recall, ',')`.

# c# - 关于反向传播算法的问题

> ID：12558517
> 
> 赞同：2
> 
> 时间：2012-09-24T03:33:47.727
> 
> 标签：c#, algorithm, neural-network, backpropagation

我有几个关于反向传播的问题。我正在尝试学习神经网络理论背后的基础知识，并想从小处着手，构建一个简单的 XOR 分类器。我已经阅读了很多文章并浏览了多本教科书 - 但我似乎无法教这个东西 XOR 的模式。

首先，我不清楚反向传播的学习模型。这是一些伪代码来表示我如何尝试训练网络。[假设我的网络设置正确（即：多个输入连接到隐藏层连接到输出层并且所有连接正确）]。

```
SET guess = getNetworkOutput() // Note this is using a sigmoid activation function.
SET error = desiredOutput - guess
SET delta = learningConstant * error * sigmoidDerivative(guess)
For Each Node in inputNodes
   For Each Weight in inputNodes[n]
      inputNodes[n].weight[j] += delta;

// At this point, I am assuming the first layer has been trained.
// Then I recurse a similar function over the hidden layer and output layer.
// The prime difference being that it further divi's up the adjustment delta. 
```

我意识到这可能还不够，我很乐意解释我实施的任何部分。使用上述算法，我的神经网络*确实*得到了训练。但不正确。输出总是

```
XOR 1 1 [smallest number]
XOR 0 0 [largest number]
XOR 1 0 [medium number]
XOR 0 1 [medium number] 
```

我永远无法将 [1,1] [0,0] 训练为相同的值。

如果您有任何建议、其他资源、文章、博客等供我查看，我非常有兴趣了解有关此主题的更多信息。感谢您的帮助，我非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:27:10.823

好的。首先。反向传播，因为它声明从后面工作。从输出通过所有隐藏层直到输入层。在最后一层计算的错误被“传播”到所有以前的错误。因此，假设您有以下类型的模型：输入 - 1 个隐藏层 - 输出。在第一步中，您从所需的值和您拥有的值中计算错误。然后你对隐藏和输出之间的权重进行反向传播。之后，您对输入和隐藏之间的权重进行反向传播。在每一步中，您都将错误从下一层反向传播到上一层，很简单。但是数学可能会令人困惑；）请查看他的简短章节以获得进一步的解释： http: [//page.mi.fu-berlin.de/rojas/neural/chapter/K7.pdf](http://page.mi.fu-berlin.de/rojas/neural/chapter/K7.pdf)

# firefox - Firefox 组件似乎没有加载

> ID：12558518
> 
> 赞同：0
> 
> 时间：2012-09-24T03:33:58.580
> 
> 标签：firefox, firefox-addon, components

[https://github.com/terrafrost/firefox-x-forwarded-for-spoofer](https://github.com/terrafrost/firefox-x-forwarded-for-spoofer)

这是我正在尝试恢复的插件，它在最新版本的 Firefox 中不起作用，我正在尝试找出原因。

据我所知，该组件无法正常工作，我不知道为什么。

我尝试使 chrome.manifest 文件如下所示：

```
content x-forwarded-for chrome/content/
overlay chrome://browser/content/browser.xul chrome://x-forwarded-for/content/overlay.xul
locale x-forwarded-for en-US chrome/locale/en-US/
component ec8030f7-c20a-464f-9b0e-13a3a9e97384 components/x-forwarded-for.js
contract @x-forwarded-for@frostjedi.com/x-forwarded-for.js;1 ec8030f7-c20a-464f-9b0e-13a3a9e97384 
```

我也试过 @frostjedi.com/x-forwarded-for;1 （这是 x-forwarded-for.js 的合同 ID，但没有帮助）无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:03:23.607

您列出的 ID`chrome.manifest`应该是组件 ID，而不是扩展 ID。此外，合同 ID 似乎不正确，可能是复制和粘贴错误。正确的行是：

```
component {f3bbf109-6d66-46ca-960e-4b78014023b3} components/x-forwarded-for.js
contract @frostjedi.com/x-forwarded-for;1 {f3bbf109-6d66-46ca-960e-4b78014023b3} 
```

组件本身也需要修改 - 为了与 Firefox 4 及更高版本兼容，它应该公开一个`NSGetFactory`函数而不是`NSGetModule`. 强烈建议为此使用[`XPCOMUtils.jsm`模块](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules/XPCOMUtils.jsm)，它将为您完成大部分工作。您可以丢弃整个模块定义并将其替换为以下行：

```
Components.utils.import("resource://gre/modules/XPCOMUtils.jsm");
var NSGetFactory = XPCOMUtils.generateNSGetFactory([XForwardedForProxy]); 
```

请注意，您不再需要在组件本身中声明组件 ID 和合约 ID，其中的条目`chrome.manifest`对于 Firefox 4 及更高版本已足够。

供参考：[Gecko 2.0 中的 XPCOM 更改](https://developer.mozilla.org/en/XPCOM/XPCOM_changes_in_Gecko_2.0)

# opencart - 编辑 opencart header.tpl

> ID：12558520
> 
> 赞同：1
> 
> 时间：2012-09-24T03:34:49.623
> 
> 标签：opencart

我正在尝试编辑使用 vqmod 的 opencart 网站的 header.tpl - 我需要向每个菜单链接添加更多信息（文本），所以基本上编辑头文件。

我查看了 vqmod 管理器和文件，但似乎无法正确处理。

不幸的是，每当我尝试编辑头文件时，站点就会中断-我也尝试过编辑缓存的 vqmod 文件，但没有运气。

有没有办法重置 vqmod / 禁用它，然后编辑 header.tpl 并再次启用 vqmod？我是否需要安装新主题并从头开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:09:19.930

要禁用所有 vQmod，只需重命名文件，以便`/vqmod/xml/`它们的扩展名变为- 然后删除文件夹中的所有文件，以便不使用缓存文件并且它应该可以工作。也就是说，如果您想为菜单项添加额外的文本，为什么不直接编辑文件的文本呢？`.xml_``.xml``/vqmod/vqcache/``/admin/language/your-language/common/header.php`

# java - 通过 android 模拟器发送 HTTP POST 请求不起作用

> ID：12558524
> 
> 赞同：0
> 
> 时间：2012-09-24T03:35:34.413
> 
> 标签：java, android, http, tomcat, android-emulator

我在我的本地机器上运行一个 tomcat servlet 和一个带有向 servlet 发出 post 请求的应用程序的 Android 模拟器。POST 的代码如下（无例外等）：

```
 String strUrl = "http://10.0.2.2:8080/DeviceDiscoveryServer/server/devices/";
        Device device = Device.getUniqueInstance();

        urlParameters += URLEncoder.encode("user", "UTF-8") + "=" + URLEncoder.encode(device.getUser(), "UTF-8");
        urlParameters += "&" + URLEncoder.encode("port", "UTF-8") + "=" + URLEncoder.encode(new Integer(Device.PORT).toString(), "UTF-8");
        urlParameters += "&" + URLEncoder.encode("address", "UTF-8") + "=" + URLEncoder.encode(device.getAddress().getHostAddress(), "UTF-8");

        URL url = new URL(strUrl);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoOutput(true);
        connection.setRequestMethod("POST");

        OutputStreamWriter wr = new OutputStreamWriter(connection.getOutputStream());
        wr.write(urlParameters);
        wr.flush();
        wr.close(); 
```

每当执行此代码时，都不会调用 servlet。但是，如果我将请求的类型更改为“GET”并且不向输出流写入任何内容，则会调用 servlet 并且一切正常。我只是没有正确地进行 POST 还是有其他错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:53:08.323

试试下面的代码，它可能对你有帮助

```
 try
{
    String argUrl = 
        "";

    String requestXml = "";
    URL url = new URL( argUrl );
    URLConnection con = url.openConnection();
    System.out.println("STRING" + requestXml);
    // specify that we will send output and accept input
    con.setDoInput(true);
    con.setDoOutput(true);

    con.setConnectTimeout( 20000 );  // long timeout, but not infinite
    con.setReadTimeout( 20000 );

    con.setUseCaches (false);
    con.setDefaultUseCaches (false);

    // tell the web server what we are sending
    con.setRequestProperty ( "Content-Type", "text/xml" );

    OutputStreamWriter writer = new OutputStreamWriter( con.getOutputStream() );
    writer.write( requestXml );
    writer.flush();
    writer.close();

    // reading the response
    InputStreamReader reader = new InputStreamReader( con.getInputStream() );

    StringBuilder buf = new StringBuilder();
    char[] cbuf = new char[ 2048 ];
    int num;

    while ( -1 != (num=reader.read( cbuf )))
    {
        buf.append( cbuf, 0, num );
    }

    String result = buf.toString();
    System.err.println( "\nResponse from server after POST:\n" + result );
}
catch( Throwable t )
{
    t.printStackTrace( System.out );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:41:50.183

出于好奇，我尝试获取请求的响应代码：

```
int responseCode = connection.getResponseCode();
System.out.println(responseCode); 
```

这实际上使请求通过，我得到了 200。我检查了我的 Tomcat 日志，请求终于得到了处理。我想这样做`url.openConnection()`和写信`OutputStream`是不够的。

# google-chrome-extension - chrome.tab.onactivated

> ID：12558528
> 
> 赞同：2
> 
> 时间：2012-09-24T03:36:28.410
> 
> 标签：google-chrome-extension

有人可以告诉我如何使用`chrome.tabs.onActivated`.

[如果 url 等于： www.example.com](http://www.example.com)，我想刷新单击/激活的选项卡。

或者，如果这是错误的方法，请告诉我要使用什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:26:06.450

首先，请务必在您的`manifest.json`文件中添加“标签”权限。然后，`chrome.tabs.onActivated`在您的后台页面脚本中使用。每次调用此事件时，您将获得`activeInfo`包含当前活动选项卡 ID 的对象。有了这个 ID，您可以[获取选项卡](http://developer.chrome.com/extensions/tabs.html#method-get)并查看它设置的 URL。当您确定这是您正在寻找的标签（URL 匹配）时，您可以[重新加载它](http://developer.chrome.com/extensions/tabs.html#method-reload)。

# java - 如何在 Java 中中断

> ID：12558531
> 
> 赞同：3
> 
> 时间：2012-09-24T03:37:10.903
> 
> 标签：java, user-interface

在 Java 中，假设我有一个带有 2 个按钮的 GUI，Go 和 Pause。

当我按 Go 时，“Hello”会一遍又一遍地打印出来。当我按下暂停时，“Hello”不再打印到屏幕上。

示例：用户按下 Go 按钮。“你好”会打印 1 分钟，直到用户按下“暂停”。

在 Java 中表达这种方法的正确方法是什么？它是否等同于我在 goButton 源代码中注释的伪代码？

```
public void actionPerformed(ActionEvent e) {
    if(e.getSource() == goButton)
    {
        // while user has not pressed the pause button
        printHello();
    }
    else if(e.getSource() == pauseButton)
    {
        pause();
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T03:42:05.600

要拥有响应式 UI，您通常必须`printHello()`在单独的线程中运行。然后，当您在此线程中进行处理时，例如，在每个打印语句之后，您检查一些标志`boolean isPaused;`并在它为真时停止执行。`pause`单击按钮时，将此标志的值设置为`true`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T03:49:29.660

为了让它以合理的方式工作，您将需要一个`Thread`. 这将在后台执行，直到您决定取消/暂停它。

这是一个非常基本的例子。通常我会将任务和 GUI 包装在适当的类中，而不是访问静态引用，但它提供了一个基本概念

```
public class TestHello {

    private static HelloTask task;

    public static void main(String[] args) {

        Thread thread = new Thread((task = new HelloTask()));
        thread.setDaemon(true);
        thread.start();

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new GridBagLayout());
        frame.setSize(200, 200);
        frame.setLocationRelativeTo(null);

        JButton goButton = new JButton("Go");
        JButton stopButton = new JButton("Stop");

        goButton.setActionCommand("Go");
        stopButton.setActionCommand("Stop");

        ActionHandler handler = new ActionHandler();

        goButton.addActionListener(handler);
        stopButton.addActionListener(handler);

        frame.add(goButton);
        frame.add(stopButton);

        frame.setVisible(true);

    }

    public static class ActionHandler implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {

            if (e.getActionCommand().equals("Go")) {
                task.start();
            } else if (e.getActionCommand().equals("Stop")) {
                task.pause();
            }

        }

    }

    public static class HelloTask implements Runnable {

        private static final Object WAIT_LOCK = new Object();
        private boolean dump = false;

        public void start() {
            synchronized (WAIT_LOCK) {
                dump = true;
                WAIT_LOCK.notify();
            }
        }

        public void pause() {
            synchronized (WAIT_LOCK) {
                dump = false;
                WAIT_LOCK.notify();
            }
        }

        @Override
        public void run() {
            while (true) {
                while (dump) {
                    System.out.println("Hello");
                }
                try {
                    synchronized (WAIT_LOCK) {
                        WAIT_LOCK.wait();
                    }
                } catch (Exception e) {
                }
            }
        }
    }
} 
```

一些进一步阅读：

*   [Java 并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

**注意事项**

切勿尝试从除事件调度线程之外的任何线程修改 GUI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T03:41:05.523

您需要在单独的线程中实现循环。否则，GUI 将变得无响应，用户可能根本无法单击暂停按钮。

使用这种线程化方法，您还需要一个标志来指示是否打印出消息。当标志设置为不再打印时，打印循环可以简单地停止执行线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T03:42:12.543

您可以通过几种最简单的方式做到这一点：

您有一个布尔标志，`keepPrinting`当您按下 Go 按钮时将其设置为 true，当您按下 Pause 时将其设置为 false。接下来，您有一个线程在某处执行 while 循环，当 keepPrinting 为 false 时将不打印任何内容。

这里的线程非常重要，没有它，一旦用户按下按钮，你的 GUI 就会冻结，因为程序会打印 hello 并愉快地忽略其他任何内容。

**伪代码**

```
//GUI
public ThreadedPrinter greeter;

void ButtonGoPushed(args){
    greeter.keepPrinting = true;
}

void ButtonPausePushed(args){
    greeter.keepPrinting = false;
}

//ThreadedPrinter

boolean keepPrinting
void run(){
    while(true){
        if(keepPrinting){
           print("Hello");
        }
        sleep(5); //Make sure that this thread yields if the system doesn't do it automatically
} 
```

关于 java 并发与说 C++ 的好消息是，这将起作用，您不必担心布尔值是疯狂的和不一致的，因为在 java 中变量集是原子的。如果您想做的不仅仅是设置变量，请创建一个`synchronized`方法来设置变量并执行您想做的任何其他事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T03:42:40.977

那么htis呢：

```
 boolean flag=true;
    public void actionPerformed(ActionEvent e) {
        if(e.getSource() == goButton)
        {
            while(true)
       {
            printHello();
       }
        }
        else if(e.getSource() == pauseButton)
        {

            pause();
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T03:57:51.927

基本上为了保持 UI 响应，这样的任务需要在其他线程中执行。

可以有多种方式在 java 中实现这种机制。我使用了简单的机制`Runnalbe`和`volatile`标志来确保调用`cancelPrint()`方法时线程存在

```
public void actionPerformed(ActionEvent e) {
if(e.getSource() == goButton)
{
  //start the thread here 
}
else if(e.getSource() == pauseButton)
{
    //call cancel here
}
}

public class HelloPrinter implements Runnable {

volatile boolean cancel = false;

@Override
public void run() {

    while (!cancel) {
        printHello();
    }
}

public void cancelPrint() {
    cancel = true;
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T04:44:11.367

我假设您想做的不仅仅是打印输出。看看[Swing Worker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html "摇摆工人")。

它允许您非常轻松地编写在 AWT 事件线程中执行的与 GUI 相关的代码以及在其他线程中执行的长时间执行代码，并来回传递值。这将有助于防止您可能遇到的任何 GUI 锁定问题。

# r - 从 RGtk2 中的旋转按钮填充数据框

> ID：12558532
> 
> 赞同：2
> 
> 时间：2012-09-24T03:37:18.640
> 
> 标签：r, user-interface, gtk2

我正在构建我的第一个 GUI，我希望它从旋转按钮和文本框中获取基本的数字输入，并使用这些值填充数据框，然后在最后按下按钮将它们插入到某个函数中。但是，我无法弄清楚它的连接部分。我有一个窗口可以准确地查看我想要的方式，并且我已将所有旋转按钮校准为具有理想的默认值并增加正确的增量数，但是我无法将其传递给我的模型. 我已经预先分配了一个数据框，然后我想为数据框中的每个元素分配特定的值，并使用来自文本框的输入来命名列。到目前为止，我尝试简单地分配它们但没有成功。一世' 我还尝试将它们设为全局变量，然后最后将它们放入数据框中，但也没有运气。我确定我在`gSignalConnect()`命令，但我无法弄清楚。下面给出了一个文本框和一个旋转按钮的代码，以及我的“计算”按钮的代码（`colMeans()`为了空间，我已经替换了我的函数）。

```
df <- data.frame(matrix(nrow=8,ncol=5))
library(RGtk2)
window <- gtkWindow()
window["title"]<- "My First GUI"

# Add a frame
frame <- gtkFrameNew("Input")
window$add(frame)

# Create vertical container for file name entry
vbox<- gtkVBoxNew(FALSE, 9)
frame$add(vbox)

# Add horizontal container for every widget line
hbox<-gtkHBoxNew(FALSE, 4)
vbox$packStart(hbox, FALSE, TRUE)
label <- gtkLabelNewWithMnemonic("Dataframe Column 1          ")
hbox$packStart(label,FALSE,TRUE)

# Add a text box that allows the user to name Dataframe Column1
col1nameLAB<-gtkLabel('Name: ')
col1name<-gtkEntryNew()
col1name$setWidthChars(20)
hbox$PackStart(col1nameLAB)
hbox$PackStart(col1name,FALSE,TRUE)
gSignalConnect (col1name,"value-changed",function (entry) {
names(df)[1] <- (entry$getText()}))

# Add a spin button for a numerical value that will eventually be the first value in Column 1 of the dataframe
col1valLAB <- gtkLabel("Integer Value: ")
col1valADJ <- gtkAdjustment(30,1,100,1)
col1valSB <- gtkSpinButton(col1valADJ,1,0)
gtkSpinButtonSetValue(col1valSB, 30)
hbox$PackStart(col1valLAB)
hbox$PackStart(col1valSB)
gSignalConnect (col1valSB,"value-changed",function (entry) {
df[1,1]<-entry$getValue()})

# Add a button to recalculate the model
hbox = gtkHBoxNew(FALSE,1)
vbox$packStart(hbox, FALSE, FALSE, 0)
button <- gtkButtonNew ( )
button$setLabel ( "Calculate" )
hbox$ packStart ( button )

# Now specify what happens when button is clicked:
gSignalConnect (button, "clicked",
f<-function( widget) {
  colmeans(df)
} ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:30:29.240

这行得通，不确定什么不适合您：

```
library(RGtk2)

df <- data.frame(a=1)

w <- gtkWindow()

col1valADJ <- gtkAdjustment(30,1,100,1)
col1valSB <- gtkSpinButton(col1valADJ,1,0)
w$add(col1valSB)

gSignalConnect(col1valSB, "value-changed", function(entry, ...) {
  val <- entry$getValue()
  message("Change to ", val)
  names(df)[1] <<- val
}) 
```

# sql-server-2012 - Microsoft SQL Server 不允许我打开 .bak

> ID：12558536
> 
> 赞同：1
> 
> 时间：2012-09-24T03:37:40.063
> 
> 标签：sql-server-2012

我正在上课，我们的讲师给了我们一个名为 cs.bak 的文件供我们下载，它应该针对我们正在使用的 SQL 版本进行格式化。所以我下载了 Microsoft SQL Server 的那个。

好吧，我尝试进行还原，但是当我到达选择设备并找到`cs.bak`它加载的文件的部分时，现在我想能够选择目的地。好吧，在我选择目的地之后，我没有`OK`按钮来进行还原。

在这些说明[http://www.katieandemil.com/sql-server-2012-restore-database-backup-file](http://www.katieandemil.com/sql-server-2012-restore-database-backup-file) 如果您计算窗口屏幕。我只能到达第 6 个屏幕。

我想这样做，“有些问题会要求您从数据库中写出查询结果。为了回答这些问题，您需要有可用的示例数据库。”

好吧，我无法打开它来执行此操作。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:49:23.393

检查这个：

![在此处输入图像描述](../Images/b76f8e0db1fee9dd305391f3c2f08296.png)

此复选框可能未选中 - 然后`[OK]`按钮保持禁用状态...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-27T17:11:16.447

这似乎是一个 Windows 布局问题。要解决此问题，请通过从主菜单 Window -> Reset Windows Layout 中选择来重置 SSMS Window Layout。

# c# - 在 C# 中的 PictureBox 上绘制点网格

> ID：12558537
> 
> 赞同：0
> 
> 时间：2012-09-24T03:37:51.353
> 
> 标签：c#, bitmap, picturebox

我已经搜索了大约 12 个小时，现在试图找到一种在 PictureBox 上绘制点的方法，我发现许多线程给出了示例代码，但我似乎无法完成我想要的。

本质上我想要做的是：

我有一个带有 PictureBox 的 Windows 窗体，PictureBox 中没有任何图像，但是我确实将 BackColor 设置为黑色。我正在尝试创建一个新的位图图像，然后运行代码以创建以下样式的白点：

```
 ..........
    ..........
    ..........
    .......... 
```

从而在 PictureBox 上给了我一个网格样式的外观。但是，每次尝试我都失败了，所以如果有人可以帮助我了解如何使用它，我将不胜感激。

我最近的尝试是使用 ControlPaint.DrawGrid 方法，如下所示：

```
private void picBox_Display_Paint(object sender, PaintEventArgs e)
{
    Size size = new Size(35, 35);
    Rectangle rect = new Rectangle(0,0,picBox_Display.Width, picBox_Display.Height);
    ControlPaint.DrawGrid(Graphics.FromHwnd(picBox_Display.Handle), rect, size, Color.White);
} 
```

上面的代码在 PictureBox Paint 事件方法中。我知道它贯穿代码，因为我在方法的末尾有一个断点，但什么也没发生。我不确定我是否理解 ControlPaint.DrawGrid 的工作原理，我应该添加其他内容吗？

我今天早些时候尝试使用 Bitmap.SetPixel 方法，但一直遇到问题，并一直在寻找其他方法来尝试完成它。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:47:48.693

为此，您需要使用 e.Graphics。另请注意，调试此类代码可能很困难，因为调试通常会使绘图无效，因此需要重新绘制。最后一个参数是你正在绘制的背景颜色，所以它看起来与你指定的相反。如果你的背景是黑色的，你需要传入 Color.Black

```
ControlPaint.DrawGrid(e.Graphics, rect, size, Color.Black); 
```

# c - 如何检查某个类型是否已在 C 编译器中定义？

> ID：12558538
> 
> 赞同：12
> 
> 时间：2012-09-24T03:38:10.267
> 
> 标签：c, types, typedef, c-preprocessor

如果编译器具有某种类型（例如 ptrdiff_t）作为嵌入式类型，我不想再次对其进行 typedef。我知道下面的代码不能像我预期的那样正常工作。

```
#ifndef ptrdiff_t 
    typedef long int ptrdiff_t;
#endif 
```

如何检查某个类型是否已在**C**编译器中定义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T20:51:53.270

正如其他人所说，对此没有好的通用解决方案。类型名称对预处理器不可见，因此您不能用于`#ifdef`测试它们的存在。

但是，有许多部分解决方案，它们会根据给定类型的要求的来源而有所不同。

ISO C 标准有多个版本，分别于 1990 年、1999 年和 2011 年发布。每个新标准（理论上）都取代和替换了之前的标准，每个新标准都定义了一些新类型。例如，1999 年的 C 标准添加了标头`<stdbool.h>`和`<stdint.h>`, 和类型`bool`, `int32_t`等。如果您想使用该`bool`类型，但仍希望您的代码可移植到不支持 C99 的实现，您可以执行以下操作：

```
#if defined(__STDC__) && __STDC_VERSION__ >= 199901L
#include <stdbool.h>
#else
typedef enum { false, true } bool;
#endif 
```

该类型的行为与 C99 的内置`enum`类型不*完全相同*`bool`，因此您需要小心使用它。

`uintptr_t`中定义的类型`<stdint.h>`是可选的。它是一种无符号类型，可以保存转换后的`void*`指针值而不会丢失信息；没有这种无符号类型的实现（例如，因为指针比任何整数类型都大）不会提供它。您不能直接测试类型本身，但可以测试给出其边界的宏：

```
#include <stdint.h>

#ifdef UINTMAX_MAX
/* uintmax_t exists */
#else
/* uintmax_t doesn't exist */
#endif 
```

如果您不能假设 C99 或更好，您可能需要将其包装在测试中`__STDC__`。`__STDC_VERSION__`

该类型`long long`是在 C99 中添加的预定义类型（不是库的一部分）。同样，您不能直接对其进行测试，但可以测试定义其边界的宏：

```
#include <limits.h>

#ifdef LLONG_MAX
/* long long exists */
#else
/* long long *probably* doesn't exist */
#endif 
```

最后，有些事情你不能直接在 C 中做，但你可以作为程序构建过程的一部分来做。例如，POSIX`pid_t`在特定于 POSIX 的标头中定义了一个类型`<unistd.h>`（它是进程标识符的类型，由`getpid()`函数返回）。您不能有条件地包含标头——但您可以编写一个小程序，如果标头不存在，该程序将无法编译：

```
#include <unistd.h>
pid_t dummy; 
```

作为构建过程的一部分，请尝试编译此文件。如果成功，请附加一行

```
#define HAVE_PID_T 
```

到配置头；如果失败，请附加一行

```
#undef HAVE_PID_T 
```

在您的源代码中，您可以编写如下内容：

```
#include "config.h"
#ifdef HAVE_PID_T
#include <unistd.h>
/* pid_t exists */
#else
/* pid_t doesn't exist */
#endif 
```

[GNU Autoconf](http://www.gnu.org/software/autoconf/)提供了一种自动化此类测试的方法，但它被批评为过于复杂和笨拙。

所有这些都假设，一旦您确定了某个类型是否存在，您就可以利用该信息做一些有用的事情。对于某些类型，例如`bool`，您可以实现几乎等效的替代方案。`pid_t`另一方面，对于，可能没有很好的回退，除非您简单地`#ifdef`删除所有处理进程的代码。如果您的程序无法在没有`pid_t`and的系统上运行，`getpid()`最好只编写假设它们存在的代码。如果您尝试在不提供代码的系统上编译代码，它将立即无法编译，这可能是您能做的最好的事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T03:42:52.527

一般没有办法做到这一点。在某些情况下，可能存在与您可以使用的类型同时定义的宏。

在您的特定示例中，您可以`#include <stddef.h>`，它应该始终定义 ptrdiff_t。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T05:39:12.130

在您的问题中，您有点混淆了两件事：

有内置类型，如`int`,`float`等。这些是标准类型，它们被定义为所有编译器。类似的类型`__int64`是后来引入和标准化的。这意味着它们在所有最近的编译器中定义，但仅在一些较旧的编译器中定义。您无需执行任何操作即可使用它们。同时，您无法在代码中确定它们是否已定义。这只能从编译器上的文档中弄清楚。你可以写：

```
#ifdef MSVC
       .... Microsoft specific code
#else
       .... Code for other compiler.
#endif 
```

这种方法允许您创建排序的`compiler independent environment`.

除了内置类型之外，还有来自标头的类型。一些标头具有如下结构：

```
#ifndef ptrdiff_t_DEFINED
    #define ptrdiff_t_DEFINED
    typedef long int ptrdiff_t;
#endif 
```

请注意，宏处理器定义与类型定义是分开的。您无法检查类型是否已定义，但您可以轻松检查是否定义了宏定义。

您自己决定的代码中包含哪些标头。这意味着这些定义不是`in the compiler itself`. 它们位于当前翻译单元的定义集中。对于编译器，它们与您在自己的代码中编写的其他类型定义几乎没有区别。

一些编译器或系统头文件没有像上面示例中的“保护定义”。在这种情况下，您唯一能做的就是跟踪即将到来的标头并包含/不包含这些标头，可能在语句`#ifdef`周围使用您自己的警卫。`#include`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T04:07:54.817

由于重新定义 C 语言保留结构通常会导致编译时错误，因此一般无法对其进行检查。如果您有兴趣（对于学术/学习过程），您可以编写一个基本的编译器通过来检查您的 C 程序上的异常/错误，以检测一个类型是否被保留。

# .htaccess - 需要更正 joomla htaccess 的 RewriteRule

> ID：12558543
> 
> 赞同：0
> 
> 时间：2012-09-24T03:39:16.023
> 
> 标签：.htaccess, mod-rewrite, joomla2.5

因此，中国有人不断将人们的浏览器重定向到我网站的副本。这是我发现的。

我有一个 joomla 安装，有人在论坛上发布了一条消息。通常我收到的电子邮件是嘿有人发了一条消息.....这是主题链接

`www.antifmradio.com/`在网站论坛的某个地方链接很好，但是今天我收到了一封电子邮件

```
http://122.72.0.7www.antifmradio.com 
```

所以这`http://www.antifmradio.com`

改成了这个

`http://122.72.0.7www.antifmradio.com`

好的，这就是我所做的。我创建了这个重写规则

```
RewriteCond %{HTTP_HOST} ^http://122.72.0.7www.antifmradio.com [NC]
RewriteRule ^(.*)$ http://www.antifmradio.com/$1 [R=301,L] 
```

现在无论您做什么，如果您尝试访问 122.72.0.7 链接，您将始终正确地访问我正确的域

惊人的！

现在这只适用于我域的 ROOT 文件夹，我需要知道如何编写它，以便它直接在我的 joomla 中运行。

Joomla 有自己的 htaccess 文件，我正在使用。但我不知道在哪里放置这个重写规则。

同样在我的域根文件夹中，我尝试这样做，这样它也可以识别 joomla 文件夹

```
RewriteRule ^(.*)$ http://www.antifmradio.com/$1**/$1** [R=301,L] 
```

但这并没有通过将附加内容添加`/$1`到末尾来实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:22:03.150

You need to hardcode the name of your joomla folder:

```
RewriteCond %{HTTP_HOST} ^http://122.72.0.7www.antifmradio.com [NC]
RewriteRule ^(.*)$ http://www.antifmradio.com/joomla_folder_name/$1 [R=301,L] 
```

And you'll want to add that **before** any other rules you may have in your joomla folder's htaccess file.

# mysql - 操作数应包含 1 列

> ID：12558544
> 
> 赞同：3
> 
> 时间：2012-09-24T03:39:20.187
> 
> 标签：mysql, sql, mysql-error-1064

`Operand should contain 1 column(s)`每当我尝试插入表时都会出现mysql 错误`sets`。

我在谷歌上搜索并发现了一大堆类似的问题，但它们总是针对解决他们当前的问题。顺便说一句，我有 mysql 5.6。我被允许多个 TIMESTAMPS。

**这是我的代码：**

```
INSERT INTO `sets` (`tabler_name`) VALUES ("leads_auto"); 
```

**这是我的桌子：**

```
CREATE TABLE IF NOT EXISTS `lms`.`sets` (
    `set_id` BIGINT NOT NULL AUTO_INCREMENT,
    `on_off` SMALLINT NOT NULL DEFAULT 0,
    `tabler_name` VARCHAR(45) NULL,
    `origin_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `last_modified_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `original_count` INT NULL,
    `current_count` INT NULL,
    `source_type` VARCHAR(45) NULL,
    `source` VARCHAR(45) NULL,
    `method` VARCHAR(45) NULL,
    `agent` VARCHAR(45) NULL,
    `dupes` INT NULL,
    `bads` INT NULL,
    `aged` INT NULL COMMENT 'This table keeps track of the record sets that enter the system.        Example: a set of leads imported into the database.',
    PRIMARY KEY (`set_id`)
) ENGINE = InnoDB; 
```

**存储过程：**

```
DELIMITER //

CREATE PROCEDURE `lms`.`leads_to_bak` ()
BEGIN
SET @table1 = (SELECT `tabler_name` FROM sets WHERE on_off=0 LIMIT 1);
SET @table2 = CONCAT(@table1, '_bak');
SET @SQL1 = CONCAT('INSERT INTO ',@table2, '(', (SELECT
REPLACE(GROUP_CONCAT(COLUMN_NAME), 'lead_id,', '') FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = @table2), ')', ' SELECT ', (SELECT                                                                   REPLACE(GROUP_CONCAT(COLUMN_NAME), 'lead_id,', '') FROM INFORMATION_SCHEMA.COLUMNS WHERE       TABLE_NAME = @table1), ' FROM ', @table1);
PREPARE stmt FROM @sql1;
EXECUTE stmt;
END//

DELIMITER ;
USE `lms`; 
```

**扳机**

```
DELIMITER $$

USE `lms`$$

CREATE TRIGGER `lms`.`after_insert_into_leads`
AFTER INSERT ON `sets` FOR EACH ROW
BEGIN
IF (SELECT * FROM sets WHERE on_off=0 LIMIT 1) THEN
CALL lms.leads_to_bak();
END IF;
END$$

DELIMITER ;
USE `lms`; 
```

我看不出我的日常生活有什么问题。删除例程和触发器似乎使问题消失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:54:33.863

在你的触发器中，你的意思是放在`EXISTS`后面`IF`吗？像这样：

```
CREATE TRIGGER `lms`.`after_insert_into_leads`
AFTER INSERT ON `sets` FOR EACH ROW
BEGIN
IF **EXISTS** (SELECT * FROM sets WHERE on_off=0 LIMIT 1) THEN
CALL lms.leads_to_bak();
END IF;
END$$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:07:01.790

除了在你的 -statement 中转义字段名称`INSERT`之外，它并没有太大的改进。但它不会在我的测试环境中产生任何错误。这真的是给您带来错误的确切陈述吗？

但是，您的表定义中有一个小问题，它会给您一个

> 表定义不正确；在 DEFAULT 或 ON UPDATE 子句中只能有一个带有 CURRENT_TIMESTAMP 的 TIMESTAMP 列。

如错误消息所示，您只能将一`timestamp`列与 一起使用`CURRENT_TIMESTAMP`，如果您需要多个，您可以使用[触发器](http://dev.mysql.com/doc/refman/5.5/en/triggers.html)来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:02:25.770

转义你的表名，它似乎是一个保留功能。我不确定您是否在本地定义了一个。

```
INSERT INTO `sets` (tabler_name) VALUES ("leads_auto"); 
```

此外，您不能在单个数据库 afaik 中有两个时间戳字段。如果它也导致您出现问题，请将两个时间戳之一更改为 DATETIME 字段

# python - 有没有办法简单地执行每个元素？

> ID：12558545
> 
> 赞同：4
> 
> 时间：2012-09-24T03:39:30.357
> 
> 标签：python, python-3.x

正常方式：

```
for x in myList:
    myFunc(x) 
```

您必须使用变量 x

利用

```
map(myFunc,myList) 
```

事实上你必须用它来完成上述工作

```
list(map(myFunc,myList)) 
```

那将建立一个列表，我不需要建立一个列表

也许有人会建议我这样做

```
def func(l):
   for x in l:
        .... 
```

那是另一个话题

有这样的吗？

```
every(func,myList) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T03:56:53.783

“正常方式”绝对是最好的方式，尽管出于您可能需要的任何原因[`itertools`](http://docs.python.org/library/itertools.html#recipes)都提供了*消费配方：*

```
import collections
from itertools import islice

def consume(iterator, n):
    "Advance the iterator n-steps ahead. If n is none, consume entirely."
    # Use functions that consume iterators at C speed.
    if n is None:
        # feed the entire iterator into a zero-length deque
        collections.deque(iterator, maxlen=0)
    else:
        # advance to the empty slice starting at position n
        next(islice(iterator, n, n), None) 
```

这可以像这样使用：

```
consume(imap(func, my_list), None) # On python 3 use map 
```

此函数执行速度最快，因为它通过使用在 C 端运行的函数避免了 python for 循环开销。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T04:07:28.350

AFAIK 标准库中没有“foreach”快捷方式，但这样的事情很容易实现：

```
def every(fun, iterable):
    for i in iterable:
        fun(i) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:04:50.990

如果您只想`myList`修改为包含`myFunc(x)`所有 x in`myList`那么您可以尝试一个列表推导，它也需要一个变量，但不会让变量泄漏到推导范围之外：

```
myList = [myFunc(x) for x in myList] 
```

希望有帮助

# java - Android 程序中 System.out.print("Hello") 的输出

> ID：12558547
> 
> 赞同：1
> 
> 时间：2012-09-24T03:40:32.197
> 
> 标签：java, android

我想在我的 android 程序中查看任何变量（String var）值。您可以说是出于调试目的。

当我使用 System.out.print("Hello") 打印任何内容时，我无法在任何地方找到此输出。

有谁知道在哪里可以找到这个输出。

这是我的代码-

```
package com.test1.nus;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        System.out.print("Hello");

        ....
     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T04:17:26.343

默认情况下，Android 系统会将`stdout`( `System.out`) 输出重定向到`/dev/null`，这意味着您的消息会丢失。

相反，在 Android 中记录调试字符串的常见模式如下

```
import android.util.Log; 
```

然后在你班级的顶部`YourClass`

```
private static final String TAG = YourClass.class.getSimpleName(); 
```

要记录调试字符串，您需要调用

```
Log.d(TAG, "your debug text here"); 
```

在你的情况下导致

```
package com.test1.nus;

import android.util.Log;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    private static final String TAG = MainActivity.class.getSimpleName();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Log.d(TAG, "Hello");

        ....
    } 
```

最后，您可以通过 Eclipse 在 Eclipse 中查看您的调试字符串

`Windows > Show view > Other`并选择`LogCat`

如果需要，按标签过滤`YourClass`。

但是，如果您确实需要查看由`System.out.println`您编写的消息，则需要告诉 Android 通过以下 shell 命令将它们路由到 logcat

```
$ adb shell stop
$ adb shell setprop log.redirect-stdio true
$ adb shell start 
```

然后您将能够通过 LogCat 视图和标签在 Eclipse 中看到您的调试消息`stdout`。

您可以从此处的官方文档中获取更多详细信息[http://developer.android.com/tools/debugging/debugging-log.html](http://developer.android.com/tools/debugging/debugging-log.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T03:41:05.313

您的输出将记录到`logcat`

假设您使用的是 eclipse：

```
Window > Show View ---> Logcat (If this not visible, select other--Android--Logcat) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T03:45:15.520

请参阅此链接：[http](http://www.droidnova.com/debugging-in-android-using-eclipse,541.html) ://www.droidnova.com/debugging-in-android-using-eclipse,541.html 它将显示一些与 logcat 相关的屏幕截图。在那里你可以找到你的输出信息。

按照这个：http: [//developer.android.com/tools/help/logcat.html](http://developer.android.com/tools/help/logcat.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T03:46:19.427

如果您想在 android 模拟器中检查您的输出，请使用`Toast messages`.

system.out.println("....") 的结果将显示在`logcat`.

要签入android `emulator/device`.just 这样做

```
Toast.makeText(getApplicationContext(), "Hello", Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T03:43:35.900

我建议你看看[android.util.log](http://developer.android.com/reference/android/util/Log.html)类。Android 开发者页面对使用它有[很好的介绍](http://developer.android.com/tools/debugging/debugging-log.html)。（其实我今天才发现这个，因为我自己正在学习Android编程。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T04:00:13.870

如果你使用 AVD 会给你带来比仅仅在日志中打印更有趣的体验。[在这里](http://developer.android.com/training/basics/firstapp/index.html)，他们完美地描述了所有这些事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-22T20:05:13.187

如果出于调试目的，最好使用 Logs。

有多种方法可用，例如 Log.v() Log.d() Log.i() Log.w() 和 Log.e() 分别用于详细、调试、信息、警告和错误日志。

然后您可以在调试应用程序时检查 logcat。

如需进一步参考，请转到[此处](https://developer.android.com/reference/android/util/Log.html)。

# iphone - iphone Table View Cell For Row 当Rows For Section返回> 0时没有被调用

> ID：12558549
> 
> 赞同：0
> 
> 时间：2012-09-24T03:40:41.500
> 
> 标签：iphone, uitableview

在用作另一个控制器的子视图的视图控制器中使用表视图。它们在首次创建时显示良好，等等。选择工作正常，等等。

但是当试图改变表中的显示项时，数据源数组正在被改变，并且在主线程上完成了重新加载。正在正确调用部分中的行，并返回正确大小的数组等。但是没有调用行的单元格。

这是子视图设置...

```
 [self addChildViewController : SQLTableNames];
    [self.view addSubview : SQLTableNames.view];
    [SQLTableNames didMoveToParentViewController : self]; 
```

其中 SQLTableNames 是一个 ViewController，其中包含 tableview(s)

已经尝试了一切，延迟重新加载，在主视图控制器上重新加载等。从主视图控制器延迟，在子视图控制器延迟，等等。

似乎节中行的返回只是被忽略了......

已尝试设置需要显示，并在索引路径处重新加载行。这些都不会调用 Cell for Row 来重新绘制表格。

所有代表都很好。它显示一次很好，然后无法更改表格显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:40:19.143

如果您在插入之前调用了 [self.tableView beginUpdates]，请确保调用

```
[self.tableView endUpdates]; 
```

后。

# apache - .htaccess RewriteRule 在没有结束斜杠时使地址栏 url 发生变化

> ID：12558551
> 
> 赞同：1
> 
> 时间：2012-09-24T03:40:50.027
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我对 .htaccess 配置有一个奇怪的情况。我有一个多域托管，每个域都有一个目录。例如，我有：

```
http://www.domain1.com
http://www.domain2.com 
```

和以下目录结构：

```
/domain1/
/domain1/index.php
/domain2/
/domain2/index.php
/domain2/subdirectory/
/domain2/subdirectory/index.php 
```

和一个`.htaccess`包含以下内容的文件：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^(www\.)?domain1\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/domain1/.*$
RewriteRule ^(.*)$ domain1/$1 [L]

RewriteCond %{HTTP_HOST} ^(www\.)?domain2\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/domain2/.*$
RewriteRule ^(.*)$ domain2/$1 [L] 
```

一切都按我喜欢的方式工作，但有一个例外：如果我这样做：

```
http://www.domain2.com/subdirectory/ 
```

（最后有一个斜线）内容正确显示，地址栏上的 url 保持不变，但如果我这样做：

```
http://www.domain2.com/subdirectory 
```

（末尾没有斜线）内容正确显示，但地址栏上的 url 更改为：

```
http://www.domain2.com/domain2/subdirectory/ 
```

（注意子目录名称和斜杠末尾附加），我不喜欢用户看到地址栏上的更改，这是我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:54:22.723

这会`mod_dir`干扰`DirectorySlash`URI 文件映射管道。默认情况下`DirectorySlash`是打开的，这使得当 apache 认为请求是针对目录的并且它缺少尾部斜杠时，它会 301 重定向到*带有*尾部斜杠的 URI。这样做是有充分理由的，[因为可能存在信息泄露安全问题](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash)。如果您不允许目录索引，则可以将其关闭：

```
DirectorySlash Off 
```

然后 Apache 根本不会重定向到斜杠。或者您可以将自己重定向为重写引擎的一部分。公开您内部重写的 URL 的原因是因为 2 个模块正在破坏 URI，mod_dir 和 mod_rewrite，并且它们在不知道彼此的情况下这样做。因此 URI 被 mod_rewrite 重写，然后 mod_dir 出现并说“这是一个目录！”，通过添加尾部斜杠来进一步破坏 URI 并将其标记为重定向响应。最终，您得到的是带有损坏 URI 的重定向。通过在 mod_rewrite 中处理重定向，当它到达 mod_dir 时，一切都很好。

这些需要高于您当前的规则

```
RewriteCond %{HTTP_HOST} ^(www\.)?domain1\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/domain1/.*$
RewriteCond %{DOCUMENT_ROOT}/domain1%{REQUEST_URI} -d
RewriteRule ^(.*[^/])$ /$1/ [L,R=301]

RewriteCond %{HTTP_HOST} ^(www\.)?domain2\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/domain2/.*$
RewriteCond %{DOCUMENT_ROOT}/domain2%{REQUEST_URI} -d
RewriteRule ^(.*[^/])$ /$1/ [L,R=301] 
```

# magento - 请问如何使用Magento扩展命令行模式如何使用Mage :: getResourceModel

> ID：12558556
> 
> 赞同：0
> 
> 时间：2012-09-24T03:41:29.543
> 
> 标签：magento, command-line

我正在开发命令行扩展的操作，仿照内置的cron.php 代码如下

扩展.php

```
require 'app/Mage.php';
$lowstockCollection = Mage::getResourceModel('reports/product_lowstock_collection')
->addAttributeToSelect('*')
->setStoreId($storeId)
->filterByIsQtyProductTypes()
->joinInventoryItem('qty')
->useManageStockFilter($storeId)
->useNotifyStockQtyFilter($storeId)
->setOrder('qty', Varien_Data_Collection::SORT_ORDER_ASC); 
```

执行，出现如下信息“Call to a member function getResourceModelInstance() on a non-object”

对应的函数如下

应用程序/Mage.php

```
public static function getResourceModel($modelClass, $arguments = array())
{
    return self::getConfig()->getResourceModelInstance($modelClass, $arguments);
} 
```

很明显，self::getConfig() -> getResourceModelInstance() 的问题

请问如何使用Command-Line Executive Mage::getResourceModel呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:54:14.733

cron.php 大部分代码拷贝进来，我就能用了，虽然我不明白他的动作原理 :P 程序大致如下

```
function xxx(){...}

require 'app/Mage.php';

if (!Mage::isInstalled()) {
    echo "Application is not installed yet, please complete install wizard first.";
    exit;
}

// Only for urls
// Don't remove this
$_SERVER['SCRIPT_NAME'] = str_replace(basename(__FILE__), 'index.php', $_SERVER['SCRIPT_NAME']);
$_SERVER['SCRIPT_FILENAME'] = str_replace(basename(__FILE__), 'index.php', $_SERVER['SCRIPT_FILENAME']);

Mage::app('admin')->setUseSessionInUrl(false);

umask(0);

xxx; 
```

# codeigniter - 如何将 SMF 与 CodeIgniter 集成？

> ID：12558570
> 
> 赞同：0
> 
> 时间：2012-09-24T03:43:43.183
> 
> 标签：codeigniter, smf, bridge

我正在开发一个仅使用 SMF 成员系统的项目。这意味着 SMF 是我用来登录的唯一成员系统，而不是我自己的系统以及 SMF，只是普通的 SMF。但是，我遇到了一个问题……我需要能够根据给定的 ID_MEMBER 从 SMF 获取信息。我的文章数据库使用 SMF 的 ID_MEMBER 字段作为作者信息。看到 CodeIgniter 是 MVC 并且使用类，我在互联网上搜索了一个通用的 SMF 类，但找不到。我决定自己编写，但无法使其正常工作……我对 OOP 没有太多经验。

 `````
<?php

class smf {

    var $context;
    var $memberContext;

    function __construct($who){

        include('/../../forums/SSI.php');
        $this->context = $context;
    }

    function user_context(){

        return $this->context['user'];

    }

    function member_context($id = NULL){

        loadMemberData($id);
        loadMemberContext($id);
        return $memberContext[$id];    
    } 
```` 

`}`

user_context 函数工作正常，但 member_context 函数不行。在 SSI.php 文件中，LoadmemberContext 函数将所有信息编译到一个名为 $memberContext[$id] 的数组中。当我从 CodeIgniter 控制器调用该方法时，我收到一条错误消息，指出 $memberContext 变量未定义。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:17:22.387

我也偶然发现了这个问题并设法解决了它。试试这个，它对我有用：

```
function member_context($id = NULL) {

    loadMemberData($id);
    loadMemberContext($id);
    global $user_profile;
    return $user_profile[$id];    
} 
````

# javascript - ASP.NET 文本框按键 (JS) 和 TextBoxChaged(Server) 事件不能同时工作。

> ID：12558571
> 
> 赞同：0
> 
> 时间：2012-09-24T03:43:44.460
> 
> 标签：javascript, asp.net

我在 Gridview 中有一个文本框，并且有一个 javascript 函数在文本框键上工作，称为“ `clearNoNum(obj)`”来检查 isnumber，

我已经注册了一个文本框事件（服务器端）' `TextBoxChanged`'，并且`AutoPostBack=true`

我的问题是：`TextBoxChange`如果在文本框上定义了 onkeyup javascript 函数，则不会触发服务器端事件。

以下是我的代码：

```
 <asp:TemplateField HeaderText="Number" ItemStyle-Width="100px" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:TextBox ID="tbxNumber" AutoPostBack="true" onkeyup="clearNoNum(this)"    runat="server"
                    OnTextChanged="tbxNumber_TextChanged" Text='<%#Eval("Number")%>'></asp:TextBox>
            </ItemTemplate> 
```

js函数：

```
 function clearNoNum(obj) {

    obj.value = obj.value.replace(/[^\d.]/g, "");

    obj.value = obj.value.replace(/^\./g, "");

    obj.value = obj.value.replace(/\.{2,}/g, ".");

    obj.value = obj.value.replace(".", "$#$").replace(/\./g, "").replace("$#$", ".");

} 
```

.cs 事件

```
 protected void tbxNumber_TextChanged(object sender, EventArgs e)
{
    TextBox tbxNumber = (TextBox)sender;
    GridViewRow gvr = (GridViewRow)tbxNumber.NamingContainer; 
    Label lblunitsPrice = ((Label)gvr.FindControl("lblunitsPrice"));
    Label lblTotalPrice = ((Label)gvr.FindControl("lblTotalPrice"));
    lblTotalPrice.Text = (int.Parse(lblunitsPrice.Text) * int.Parse(tbxNumber.Text)).ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:03:46.657

当您在文本更改时触发事件（服务器）时，它会在用户每次释放密钥时执行页面生命周期，想想您给服务器带来了多少负担。

最好在文本框上触发事件 onblur。Josh 发布了一个信息性答案，您可以在这里找到：[asp.net textbox 的 Lost Focus 方法？](https://stackoverflow.com/questions/3863927/lost-focus-method-for-asp-net-textbox)

# sed - sed — 加入一系列选定的行

> ID：12558578
> 
> 赞同：7
> 
> 时间：2012-09-24T03:44:27.573
> 
> 标签：sed

我是初学者`sed`。我知道可以将一个命令（或一组命令）应用于一定范围的行，就像这样

```
sed '/[begin]/,/[end]/ [some command]' 
```

where`[begin]`是指定范围开始行的`[end]`正则表达式，是指定范围结束行（但包含在范围内）的正则表达式。

我正在尝试使用它来指定文件中的一系列行并将它们全部加入一行。这是我最好的尝试，但没有奏效：

```
sed '/[begin]/,/[end]/ {
N
s/\n//
}
' 
```

我可以毫无问题地选择我想要的一组行，但我似乎无法将它们全部合并到一行中。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T04:27:53.880

一种使用方式`GNU sed`：

```
sed -n '/begin/,/end/ { H;g; s/^\n//; /end/s/\n/ /gp }' file.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T09:24:41.407

如果您想选择一些线并加入它们，这很简单。使用[史蒂夫的](https://stackoverflow.com/a/12558861/1331399)答案或我的 pipe-to-tr 替代方案：

```
sed -n '/begin/,/end/p' | tr -d '\n' 
```

如果您还想保留其他行，这会变得有点棘手。这是我的做法（使用 GNU sed）：

*加入.sed*

```
/\[begin\]/ {
  :a
  /\[end\]/! { N; ba }
  s/\n/ /g
} 
```

所以这里的逻辑是：

1.  当`[begin]`遇到行时，开始使用循环将行收集到模式空间中。
2.  发现时`[end]`停止收集并加入行列。

例子：

```
seq 9 | sed -e '3s/^/[begin]\n/' -e '6s/$/\n[end]/' | sed -f join.sed 
```

输出：

```
1
2
[begin] 3 4 5 6 [end]
7
8
9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T04:08:03.790

我喜欢你的问题。我也喜欢塞德。很遗憾，我不知道如何在 Sed 中回答您的问题；所以，和你一样，我在这里寻找答案。

由于这里还没有出现 Sed 的答案，下面是如何在 Perl 中执行此操作：

```
perl -wne 'my $flag = 0; while (<>) { chomp; if (/[begin]/) {$flag = 1;} print if $flag; if (/[end]/) {print "\n" if $flag; $flag = 0;} } print "\n" if $flag;' 
```

# matlab - Matlab ezmesh - 绘制作为一个变量函数的平面

> ID：12558581
> 
> 赞同：0
> 
> 时间：2012-09-24T03:44:35.437
> 
> 标签：matlab

我正在使用 ezmesh 在 matlab 中绘制平面。在我尝试绘制诸如 z=y 之类的平面之前，一切都很顺利——ezmesh 想要一个包含两个变量的函数。我想继续在我的代码中使用 ezmesh，而不是在这架飞机上使用类似 surf 的东西...... ezmesh 可以绘制这架飞机吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:26:29.580

这在这里有效：

```
ezmesh(@(x,y)y) 
```

该方程`z=y`实际上*是*两个变量的函数，只有它对所有 都成立`x`，用不使用来表示`x`。

# c - 用 C 编写一个 shell

> ID：12558583
> 
> 赞同：0
> 
> 时间：2012-09-24T03:45:46.880
> 
> 标签：c, shell, unix

我目前正在用 C 编写一个 shell，但遇到了一些问题。例如，当我尝试将我的命令与“退出”进行比较时，它只是在它上面运行 write 并且根据 gdb 表现得它们不相等。我以段错误结束。如果有人可以帮助我找出问题所在，我将不胜感激。顺便说一句，这是我的第一个外壳！

```
#include <stdio.h>
#include <string.h>
#include <strings.h>
#include <limits.h>
#include <unistd.h>
#include <stdlib.h>
#include <pwd.h>
#include <dirent.h>e
#include <sys/types.h>
#include <sys/wait.h>    
#include <signal.h>
#include "sh.h"

int sh( int argc, char **argv, char **envp ){

    char *prompt = calloc(PROMPTMAX, sizeof(char));
    char *commandline = calloc(MAX_CANON, sizeof(char));
    char *command, *arg, *commandpath, *p, *pwd, *owd;
    char **args = calloc(MAXARGS, sizeof(char*));
    int uid, i, status, argsct, go = 1;
    struct passwd *password_entry;
    char *homedir;
    struct pathelement *pathlist;

    uid = getuid();
    password_entry = getpwuid(uid);
    homedir = password_entry->pw_dir; 

    if ( (pwd = getcwd(NULL, PATH_MAX+1)) == NULL ){
    perror("getcwd");
    exit(2);
    }

    owd = calloc(strlen(pwd) + 1, sizeof(char));
    memcpy(owd, pwd, strlen(pwd));
    prompt[0] = ' '; prompt[1] = '\0';

    pathlist = get_path();

    prompt = "[cwd]>";

    while ( go ){
    printf(prompt);

    commandline = fgets(commandline, 100, stdin);
    command = strtok(commandline, " ");

    printf(command);

    if (strcmp(command, "exit")==0){
        exit(0);
    }

    else if (strcmp(command, "which")==0){
    //  which();
    }

    else if (strcmp(command, "where")==0){
    //  where();
    }

    else if (strcmp(command, "cd")==0){
        chdir(argv[0]);
    }

    else if (strcmp(command, "pwd")==0){
        getcwd(pwd, PATH_MAX);
    }

    else if (strcmp(command, "list")==0){
        if (argc == 1){

        }

        else if (argc > 1){

        }
    }

    else if (strcmp(command, "pid")==0){
        getpid();
    }

    else if (strcmp(command, "kill")==0){

    }

    else if (strcmp(command, "prompt")==0){
        prompt = "argv[0] + prompt";
    }

    else if (strcmp(command, "printenv")==0){

    }

    else if (strcmp(command, "alias")==0){

    }

    else if (strcmp(command, "history")==0){

    }   

    else if (strcmp(command, "setenv")==0){

    }

    else{
        fprintf(stderr, "%s: Command not found.\n", args[0]);
    }

}
return 0;

} 
```

其中大部分仍然是裸露的骨头，所以请耐心等待。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T03:51:02.930

如果你改变：

```
printf(command); 
```

进入：

```
printf("<<%s>>\n",command); 
```

你会明白为什么它永远不会匹配*任何*这些字符串。那是因为`fgets`没有去掉尾随换行符^((a))：

```
[cwd]>ls
<<ls
>> 
```

这意味着它将执行这行代码：

```
fprintf(stderr, "%s: Command not found.\n", args[0]); 
```

而且，由于您已使用, BANG!将所有这些`args[]`值初始化为 NULL ！`calloc`去你的代码（试图取消引用空指针是未定义的行为）。

去看看[这个答案](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)，以获得一个强大的用户输入解决方案，它带有提示、缓冲区溢出保护、忽略剩余的过长行，最重要的是，这里剥离了换行符。

* * *

^((a))顺便说一句，您不应该将用户输入`printf`作为格式字符串传递给。猜猜如果我`%s%s%s%s%s%s`在你的提示下输入会发生什么:-)

而且，与您的问题无关，ISO C 要求`sizeof(char)`始终为1，因此您*无需**在*分配语句中使用它 - 我发现它只会不必要地阻塞代码。

# terminal - 如何从所有 tmux 窗口中清除铃声状态

> ID：12558584
> 
> 赞同：7
> 
> 时间：2012-09-24T03:45:47.217
> 
> 标签：terminal, alert, tmux

我帮助维护了大量的类 Unix 服务器，因此保留了一个脚本`tmux-rebuild`，我用它来重建所有 tmux 会话和窗口，并通过 SSH 链接到每个服务器。

我已将 tmux 配置为当在该窗口中打印终端响铃字符时，在其状态栏中显示带有感叹号的红色窗口名称。`irssi`这对于像在另一个窗口中有消息时提醒我这样的程序非常方便。

我还在`$PS1`每台服务器上设置了在每次提示结束时打印终端铃声。这很有用，因为如果我在一个窗口中运行一个长作业并切换到另一个窗口，我可以立即看到它何时完成，因为当我的提示在作业完成后写入屏幕时，tmux 会使窗口名称以红色显示一个感叹号。这对我的工作流程非常有用。

然而，它会导致上面提到的重建脚本出现一个小问题，因为当我在运行它后启动 tmux 时，每个会话中的每个窗口都被标记为红色，因为第一个提示被打印到屏幕上。这使得该功能在我访问每个窗口之前都没用，其中有 40-50 个。

有什么我可以添加到我的脚本中的东西，可以在创建会话和窗口后清除所有警报吗？如有必要，我不介意使用 kludge。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-10-13T02:02:45.873

从 tmux 手册页，特别是这里的最后一句话：

```
kill-session [-aC] [-t target-session]
          Destroy the given session, closing any windows linked to it
          and no other sessions, and detaching all clients attached 
          to it.  If -a is given, all sessions but the specified one is
          killed.  The -C flag clears alerts (bell, activity, or
          silence) in all windows linked to the session. 
```

所以，简单地说：

```
tmux kill-session -C 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T12:30:13.657

想出一个可接受的解决方法；我重新定义了下一个/上一个绑定以允许重复：

```
# Allow repeats for next/prev window
bind-key -r n next-window
bind-key -r p previous-window 
```

这使我可以通过按前缀键并点击“n”来快速清除会话中所有窗口的警报，直到它们全部清除，然后我又回到原来的窗口中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T09:14:16.637

使用*tmux* 1.6（及更高版本），`list-windows`可以生成可定制的输出，因此读取输出行并`select-window`为每个窗口运行一个循环相当简单。

添加`list-session`（循环遍历所有会话，可选）和`display-message`（解析会话说明符，并记录当前/“最后一个”窗口，以便它们可以正确恢复），你可能会得到这样的结果：

```
#!/bin/sh

# usage: tmux-select-each [session [...]]
#
# Select every window in specified session(s). If no sessions are
# specified, process all windows in all sessions.
#
# This can be handy for clearing the activity flags of windows in
# freshly spawned sessions.

if test $# -gt 0; then
    for session; do
        tmux display-message -p -t "$session:" '#S'
    done
else
    tmux list-sessions -F '#{session_name}'
fi |
while read -r session; do
    active_window=$(tmux display-message -p -t "$session:" '#S:#I')
    last_window=$(tmux display-message -p -t "$session:"\! '#S:#I' 2>/dev/null)
    tmux list-windows -t "$session" -F '#{session_name}:#{window_index}' |
    while read -r window; do
        if test "$window" = "$active_window" ||
           test "$window" = "$last_window"; then
            continue
        fi
        tmux select-window -t "$window"
    done
    if [ -n "$last_window" ]; then
        tmux select-window -t "$last_window"
    fi
    tmux select-window -t "$active_window"
done 
```

# c#-4.0 - MonoTouch 在 IOS 模拟器上的运行方式与在 iPad 上的不同

> ID：12558586
> 
> 赞同：0
> 
> 时间：2012-09-24T03:45:52.630
> 
> 标签：c#-4.0, xamarin.ios, ios-simulator, xamarin

当我在 Windows上运行我的应用程序（基本上是修改后的世界移动大会）应用程序时，我遇到了问题，而`IOS Emulator`不是直接在其`IPad`本身上运行它。我知道有一个不同的过程或涉及，所以我不希望它完全相同。

具体来说，我在初始化 sql 数据库（SqlLite）时遇到错误，错误是

> “未定义对象”

当我尝试对设备进行单步调试时，我得到的错误感觉好像堆栈已损坏，我什至无法调试方法。

我的问题是，我可以寻找哪些差异类型以及如何调试它们？一定有某种模式会导致问题，我只是不知道那是什么或如何解决。我已经习惯了只在 x86 上工作的 c# 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T20:23:05.023

是什么导致模拟器表现不同？模拟器不像真实设备那样在内存使用方面受到限制，因此您可能会在设备上遇到内存警告（如果您没有正确处理它们，则会崩溃）。然而，代码本身运行得更快，因此线程之间的竞争条件更有可能发生，因此请注意这一点。不要从不同的线程与数据库交谈，或者至少使用适当的锁定。当然，还有仅在设备上发生的[AOT 限制。](http://www.mono-project.com/AOT#Limitations)您的 LINQ 问题对我来说听起来像是 AOT 问题。

# cakephp - 在 Cake 2 的相同条件下运行 find('all') 或 find('first')

> ID：12558587
> 
> 赞同：0
> 
> 时间：2012-09-24T03:45:54.680
> 
> 标签：cakephp

在我的 CakePHP2 应用程序的一个`controller/index`动作中，我有

```
$this->Model-find('all',array( ... lots conditions and things... )); 
```

然后，在`controller/view`我有：

```
$this->Model-find('first',array( ... lots conditions and things... )); 
```

这两个工作都非常好，但我显然重复了大量代码（即查找条件、字段列表等），唯一的两个区别是我正在做的第一个`find('all')`和第二个我'正在做`find('first')`并提供 id 作为条件之一。

有没有办法可以将条件移动到模型中，然后在这些条件下运行不同类型的查找？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:20:17.477

您可以在您的模型中创建一个方法：

```
public function getConditions($id = null) {
   return array( ... lots conditions and things... );
} 
```

此方法中的某处只是测试是否`(!empty($id))`返回正确的结果。（你没有提供“条件和事情”，所以我不能在这里写出确切的代码......

并在两个控制器操作中使用它：

```
$this->Model->find('first', $this->Model->getConditions()));

$this->Model->find('all', $this->Model->getConditions())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:37:59.043

将条件添加为控制器的属性

```
class FoosController extends AppController{

    public $conditions = array( ... lots conditions and things... )

    public function index(){
        $this-Foo->find('all', $this->conditions);
    }

    public function view(){
        $this-Foo->find('first', $this->conditions);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:05:04.793

是的，您可以将查询作为函数/方法移动到模型类中。后模型请参见下面的示例：

```
class Post extends AppModel {
    public $name = 'Post';

    public function getAll() {
       return $this->find('all', array('limit' => 20, 'order' => 'Post.created DESC'));
    }
} 
```

并通过 $this->Model->getAll(); 在你的控制器上调用它

```
$this->Post->getAll(); 
```

您还可以向函数添加参数。

# objective-c - 这 2 个委托的用法，它们是一样的吗？

> ID：12558590
> 
> 赞同：0
> 
> 时间：2012-09-24T03:46:25.840
> 
> 标签：objective-c

例如，我有 A 视图和 B 视图，一些值是从 A 传递到 B。

在`B.m`中，我写道：

```
A *av = [[A alloc] init];
[av setDelegate:self] 
```

是不是和我写的一样`A.m`：

```
B *bv = [[B alloc] init];
[self setDelegate:bv]; 
```

我应该把这个“setDelegate”放在哪里？在`viewDidLoad`？编译器没有产生任何错误，但是值传递没有成功，有人可以给我一些提示吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:00:08.363

通常，使用委托的目的是委托对象（`av`在这种情况下）需要来自外部对象的某种帮助。如果该对象设置了自己的委托，就像您对 所做的那样`bv`，这会否定拥有外部对象的优势。也就是说，如果`A`知道它想要一个实例`B`作为它的委托，您不妨将代码从其中滚动`B`并`A`跳过整个委托业务。

也就是说，默认情况下`A`可能会`B`用作其委托，但仍允许将某个其他类的实例设置为委托以更改某些行为。如果这是您的目标，您可能会在早期`A`设置一个实例`B`作为其委托，可能在它`-init`（或其他初始化程序）中。

# arrays - 在 mongodb 中拉取子数组中的元素（本机 js 或 .NET 驱动程序）

> ID：12558591
> 
> 赞同：2
> 
> 时间：2012-09-24T03:46:27.307
> 
> 标签：arrays, mongodb

我在 Mongo 中有这些数据：

```
{
    "_id": ObjectId("505fd43fdbed3dd93f0ae088"),
    "categoryName": "Cat 1",
    "services": [
        {
            "serviceName": "Svc 1",
            "input": [
-------------------------------------------------------------------------
                { "quantity": 10, "note": "quantity = 10" },
-------------------------------------------------------------------------
                { "quantity": 20, "note": "quantity = 20" }
            ]
        },
        {
            "serviceName": "Svc 2",
            "input": [
                { "quantity": 30, "note": "quantity = 30" },
                { "quantity": 40, "note": "quantity = 40" }
            ]
        }
    ]
} 
```

现在我想提取`{ "quantity" : 10, "note" : "quantity = 10" }`输入数组的元素。我该如何处理 Mongo？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:21:58.010

您可以使用[`$pull`](http://docs.mongodb.org/manual/reference/operator/pull/)带有 an 的运算符`update`来执行此操作，使用[`$`](http://api.mongodb.org/wiki/current/Updating.html#Updating-The%24positionaloperator)位置运算符来识别`services`您要定位的元素：

```
db.collection.update(
    { "_id" : ObjectId("505fd43fdbed3dd93f0ae088"), 'services.serviceName': 'Svc 1' },
    { $pull: { 'services.$.input': { "quantity" : 10, "note" : "quantity = 10" } } }
); 
```

# python - 如何从 Google App Engine 发布文件？

> ID：12558592
> 
> 赞同：1
> 
> 时间：2012-09-24T03:47:05.743
> 
> 标签：python, google-app-engine

我有几个不同的应用程序需要我将文件从 Google App Engine 发布到远程站点。我用 urllib2 尝试了一些方法，但是当我将代码移到 GAE 中时，我遇到了每种方法的问题。

将文件（csv、zip 等）从 Google App Engine 发布到远程网站的最简单方法是什么？一旦我可以发布现有文件，我就可以继续从数据存储中发布文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:30:41.873

你有没有看过`urlfetch`。[来自docs](https://developers.google.com/appengine/docs/python/urlfetch/overview?hl=et)的示例。

```
import urllib

from google.appengine.api import urlfetch

with open('/file', 'r') as f:
    data = f.read()

result = urlfetch.fetch(url=url,
                        payload=data,
                        method=urlfetch.POST,
                        headers={'Content-Type': 'application/x-www-form-urlencoded'}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T22:19:18.367

从[参考](https://developers.google.com/appengine/docs/python/urlfetch/fetchfunction)，

> `payload`:`POST`或`PUT`请求的正文内容。

所以只需加载文件的内容并将有效负载设置为 la

```
with open(filename, 'r') as fh:
  payload = fh.read()
response = urlfetch.fetch(url, payload=payload, method='POST') 
```

做你想做的事`response`。

这将与数据存储对象中的字符串以完全相同的方式工作。

编辑：`filename`可能是相对于您的项目的路径。因此，如果您的项目位于`/home/dinosaurs/sinclair`本地计算机上并且您`/home/dinosaurs/sinclair/stuff/contents.xml`的项目中有，那么将在 App Engine 上用于生产的相对路径是`stuff/contents.xml`.

# facebook - 如何通过 FOSFacebookBundle 使用 Facebook 服务器端流程

> ID：12558593
> 
> 赞同：1
> 
> 时间：2012-09-24T03:47:40.810
> 
> 标签：facebook, symfony, fosfacebookbundle

FOSFacebookBundle 的默认实现是使用客户端流。我已经尝试过了，它有效。现在我需要实现服务器端流程。然后我这样做：

点击时超链接将转到 Action 如下所示的路线：

```
$client_id = $this->container->getParameter('fos_facebook.app_id');
$redirect_uri = urlencode($this->generateUrl('_security_check', array(), true));
$scope = implode(',', $this->container->getParameter('fos_facebook.permissions'));
$state = md5(uniqid(rand(), TRUE)); //CSRF protection
$this->getRequest()->getSession()->set('facebook_state', $state);

$oauthUrl = 'https://www.facebook.com/dialog/oauth?client_id='.$client_id.'&redirect_uri='.$redirect_uri.'&scope='.$scope.'&state='.$state;
return $this->redirect($oauthUrl); 
```

它被重定向到 Facebook，当用户单击允许然后重定向回我的应用程序时，该操作与处理客户端操作的操作相同

它返回错误：必须使用活动访问令牌来查询有关当前用户的信息

此错误是由以下行引起的：

```
$me = $this->fbapi->api('/me'); 
```

使用 facebook 服务器端流程的正确实现是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:45:31.767

> 它被重定向到 Facebook，当用户单击允许然后重定向回我的应用程序时，该操作与处理客户端操作的操作相同

这是服务器端 Auth 流程的前三个步骤。

现在，您还必须执行**第四步**：[https ://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)

# php - php - 在选择>选项上显示最后一个值+ 1

> ID：12558597
> 
> 赞同：1
> 
> 时间：2012-09-24T03:48:43.200
> 
> 标签：php, mysql

我有表格“页面”并且有 4 个位置。我的问题是如何在选择选项上显示“5”的值，而不是显示 1-5 的所有位置。

图片示例：

代替

![在此处输入图像描述](../Images/3a2e7c3e8c4bc0230ca41ab35c906dd1.png)

它应该只显示：

![在此处输入图像描述](../Images/deea8f967eb6aa883d4b8c806f85ef6f.png)

```
function get_all_arjay_pages_desc(){
    $query = "SELECT * 
              FROM pages
              ORDER BY position DESC";
    $result = mysql_query($query);
    validate_query($result);

    return $result;
}

echo "<select name='position' id=''>";
        $get_all_page = get_all_arjay_pages_desc();
        $page_counts = mysql_num_rows($get_all_page);

        for($count=1; $count <= $page_counts + 1;$count++){
            echo "<option value='{$count}'>{$count}</option>";
        }

        echo "</select>"; 
```

提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:51:47.923

使用`selected`属性，例如

```
for($count=1; $count <= $page_counts + 1;$count++){
    $selected = ($count == 5) ? ' selected="selected"' : '';
    echo "<option value='{$count}'$selected>{$count}</option>";
} 
```

所以当 $count 达到 5 时，你会得到

```
<option value='5' selected="selected">5</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:54:58.200

检查最后一个值`$count`并添加选定的

```
for($count=1; $count <= $page_counts + 1;$count++){
            $sel = ($count == ($page_counts + 1)) ? ' selected="selected"' : '';
            echo "<option value='{$count}'$sel>{$count}</option>";
} 
```

# java - 我可以修改“引用”整数变量吗？

> ID：12558598
> 
> 赞同：3
> 
> 时间：2012-09-24T03:49:01.707
> 
> 标签：java

我意识到，如果我将对象作为函数的参数传递并对其进行更改，则更改会“保留”在对象中。但整数并非如此。

```
public void start() {
    int x = 100;
    modify(x);
    // I would like x to be 200 now. But it isn't :(
}

public void modify(int y) {
    y *= 2;
} 
```

所以基本上，有没有办法在上面的代码中实现我想要的？是否可以修改这样的整数（如对象引用）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T03:50:05.530

在使用`primitives`时没有“ `reference`”的概念。但是您可以通过执行以下操作来实现您想要的：

`x = modify(x);`可能是代码想要的。

现在`x`包含`modify(x)`方法调用的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T03:51:01.900

你不能这样做。基元按值传递。（引用也是按值传递的。您不能修改对象引用；您只能修改被引用的对象。）您能做的最好的事情是：

```
public void start() {
    int [] x = {100};
    modify(x);
    // x[0] is now 200 :)
}

public void modify(int []y) {
    y[0] *= 2;
} 
```

数组引用`x`是按值传递的，但您可以修改数组元素。请注意，传递 an`Integer`无济于事，因为`Integer`对象是不可变的。

或者，您可以重新设计您的方法以返回双倍值并在调用代码中分配它（如[Nambari 建议](https://stackoverflow.com/a/12558606/535871)的那样）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T04:17:12.447

[除了传递数组](https://stackoverflow.com/a/12558612/1347968)或[使用返回值](https://stackoverflow.com/a/12558606/1347968)之外，第三种可能性是使用`ValueHolder`getter 和 setter传递某个类的对象：

```
public class IntValueHolder
{
    private int value;
    public int getValue()
    {
        return this.value;
    }
    public void setValue(final int value)
    {
        this.value = value;
    }
} 
```

这在技术上与传递数组非常相似，但恕我直言，它更简洁一些，即它更好地描述了您的意图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T04:08:33.243

您可以做的一件事是获取 modify() 方法的返回值并将其分配给变量，如下所示。

```
public void start() {
    int x = 100;
    x=modify(x);   
}

public int modify(int y) {
    return y *= 2;
} 
```

# c++ - 模块化开发的互通方式选择

> ID：12558599
> 
> 赞同：0
> 
> 时间：2012-09-24T03:49:09.550
> 
> 标签：c++, c, shared-objects

我正在开发一个软件，它的核心、插件和 GUI 模块化分离。我按需动态加载模块。

考虑到使用不同工具包的插件或 GUI 最终将由第三方开发，我需要确定哪种类型的相互通信最适合以这种方式模块化的软件，以便不同部分可以交换事件和信息。

现在我考虑简单地从共享对象中加载符号，并在知道它们的类型和函数签名的情况下使用它们。我也考虑过使用像 DBus 这样的 IPC，但我不确定这是否是矫枉过正或完全没有必要。

跨平台现在不是什么大问题，但将来可能会。

一个与另一个的优缺点是什么？还有其他我没有找到的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T03:53:43.407

IPC 对于在进程中加载​​的组件来说太过分了。当调用者和被调用者可以直接共享指针时，所有关于缓冲区大小和复制方向的额外注释都是不必要的。

如果您想迁移到 Windows，请考虑共享库可能具有不同的分配器和不同的类布局。最好的办法是导出一个工厂函数，返回一个指向接口的指针（抽象类只有纯虚成员函数，没有数据，数据和实现都在一个子类中），然后让对象自己释放（其中之一）虚成员函数会破坏它）。

例如，您可以查看 COM `IUnknown`。您不需要接口查询等所有复杂性，但是使用纯虚函数和引用计数是一种非常灵活、非常可扩展且非常可移植的模式。

# c# - 我怎样才能做到这一点，以便用户可以快速更改为我的应用程序

> ID：12558607
> 
> 赞同：1
> 
> 时间：2012-09-24T03:50:04.243
> 
> 标签：c#, .net-3.5, windows-mobile-6

这也许是一个基本的话题；我几乎完成了一个适用于 windows mobile 6.0 的小型数据收集应用程序。

我希望用户能够轻松地从使用我的应用程序更改为另一个程序（我没有编写），反之亦然。

我希望有某种浮动按钮可以随时访问我的应用程序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:06:59.223

Windows Mobile 存在许多任务切换器附加组件，它们主要是屏幕顶部状态栏中的一个按钮，显示一个带有其他打开/正在运行的程序的气泡。你试过那些吗？

# c# - 如何在循环结束时接受输入以重新执行循环或不 C#

> ID：12558609
> 
> 赞同：0
> 
> 时间：2012-09-24T03:50:24.710
> 
> 标签：c#, loops, console-application

我试图弄清楚如何在控制台应用程序的循环结束时接受来自用户的输入以重新执行循环或不使用 Y/N 问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T03:54:58.360

```
bool executeLoop = true;

while (executeLoop)
{
    ...

    Console.WriteLine("Again? (Y/N)");
    string input = Console.ReadLine().ToUpper();

    while (input != "N" && input != "Y")
    {
        Console.WriteLine("Invalid answer. Again? (Y/N)");
        input = Console.ReadLine();
    }

    if (input == "N")
    {
        executeLoop = false;
        // can also just write "break;"
    }
} 
```

这部分验证答案是 Y 还是 N：

```
while (input != "N" && input != "Y")
{
    Console.WriteLine("Invalid answer. Again? (Y/N)");
    input = Console.ReadLine();
} 
```

您还可以删除该部分，以便“N”以外的每个输入都将继续循环。

另一种简单的方法是：

```
while (true)
{
    ...

    Console.WriteLine("Enter \"Y\" to continue...");

    if (Console.ReadLine().ToUpper() != "Y")
    {
        break;
    }
} 
```

这样循环将一直执行，直到用户输入“Y”以外的任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T03:57:36.340

用于`Console.ReadKey`从用户获取关键输入：

```
while (true)
{
     Console.Write("End program Y/N: ");
     char input = Console.ReadKey().KeyChar;
     if (input == 'Y' || input == 'y') break;

     Console.WriteLine();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T03:52:46.400

做一个 do while 循环。

```
do 
{
  //do other stuff first
  //then get input to Y and N question and set it
} while (input == 'Y'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T03:55:23.170

那这个呢

```
string s;
    do
    {
        // some statements
       s = Console.ReadLine();
    } while(s=="yes"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T04:02:11.030

当你想跳出一个循环时，你可以使用“break”命令。请注意，每个中断只会让您脱离您所处的最小循环。

```
 int count = 0;
        string myentry = "";
        for (count = 1; count < 10; count++)
        {
            Console.WriteLine("count=" + count);
            Console.WriteLine("Continue? Enter \"Y\" or \"N\"");
            myentry = Console.ReadLine().ToUpper();
            if (myentry=="N")
            {
                break;
            }

        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T04:39:58.740

```
do
{
    if(!somecondition){ continue; }

    DoSomething();

    Console.WriteLine("Do something again? (y = yes)");
}
while(Console.ReadKey().Key == ConsoleKey.Y); 
```

# css - CSS 标题 1 背景图片

> ID：12558618
> 
> 赞同：0
> 
> 时间：2012-09-24T03:51:48.630
> 
> 标签：css, background-image, html-heading

我在这里有这张图片，我想将其作为`h1` [http://inauguralseason.com/wp-content/themes/twentyeleven/images/wehavelaunched.png的背景图片](http://inauguralseason.com/wp-content/themes/twentyeleven/images/wehavelaunched.png)

我的问题是如何让左边的部分出现？这是我当前的 CSS 代码

```
.homeBottom h1 {
    background-image: url("http://inauguralseason.com/wp-content/themes/twentyeleven/images/wehavelaunched.png");
    color: #FFFFFF;
    height: 36px;
    margin-left: -50px;
    width: 589px;
} 
```

我原以为 use`margin-left:-50px`会起作用，但事实并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T03:54:51.043

您指定`height: 36px;`但您的图像高 86 像素。将高度更改为 86 像素，您将看到整个内容。

如果 36px 是正确的高度，您可以改为更改背景位置。

`background-position: left bottom;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:55:30.373

进行这些更改

```
.homeBottom {
position: relative;
}

.homeBottom h1 {
position: absolute;
left: -50px;
top: /* give as per required */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:21:16.737

嗨，现在习惯`after`在你的 CSS 中

像这样

**HTML**

```
<h1>Hello testing page </h1> 
```

**CSS**

```
h1{
background:red;
  padding-left:20px;
  position:relative;
  height:40px;
  line-height:40px;
}
h1:after{
content:'';
  position:absolute;
  left:6px;
  top:18px;
  background:green;
  width:30px;
  height:30px;
z-index:-1;
/* Firefox */
-moz-transform: rotate(-65deg);
/* Safari */
-webkit-transform: rotate(-65deg);

/* IE */
-ms-transform: rotate(-65deg);

/* Opera */
-o-transform: rotate(-65deg);

} 
```

演示[http://tinkerbin.com/QTAO90R0](http://tinkerbin.com/QTAO90R0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T04:49:51.077

您还可以使用[背景大小](http://www.w3.org/TR/css3-background/#the-background-size)属性 (CSS3)。您可以在其中设置背景图像的`width`和`height`。在您的情况下，如果要将背景图像的 设置为与元素`height`的相同，请给出：`height``h1`

```
background-size:100% 36px; 
```

[看这里](http://jsfiddle.net/venkateshwar/degmc/1/)的小提琴。

您也可以查看此[链接](https://stackoverflow.com/a/6353808/1577396)以使此属性在旧版本的 IE 中也能正常工作。

# c - 打开文件后如何使用getpagesize(2)获取文件大小

> ID：12558621
> 
> 赞同：-2
> 
> 时间：2012-09-24T03:52:06.887
> 
> 标签：c, unix

我有一个 hello.txt 文件和一个指向该文件的指针 *i，我使用 c open(*i) 函数打开了该文件。我想使用 getpagesize(2) 读取文件的内容并进一步将该内容写入目标文件来获取文件的大小。所以得到我现在需要的文件大小，文件有多大，有多少内容要读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:40:31.363

`getpagesize`仅告诉您系统上的内存页有多大；它与文件无关。你应该看看[`stat`](http://www.kernel.org/doc/man-pages/online/pages/man2/stat.2.html)电话；它可以满足您的需要。

如果在 上操作`FILE *`，您可以使用`fseek(f, 0, SEEK_END)`和`ftell(f)`来计算文件的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:51:45.127

如果您使用`open`系统函数打开文件，则应查看该[`fstat`](http://linux.die.net/man/2/fstat)函数以获取大小：

```
int fd = open(...);

struct stat st;
fstat(fd, &st);

printf("File size: %ld bytes\n", st.st_size); 
```

# google-maps-api-3 - 带有标签内容的信息窗口

> ID：12558626
> 
> 赞同：0
> 
> 时间：2012-09-24T03:52:40.167
> 
> 标签：google-maps-api-3, google-fusion-tables

我正在使用 jQuery UI 使用选项卡式信息窗口进行 Fusion Tables Layer 其中一个选项卡是“ProductDesc”，我只有在一列中有许多行 desc

**我希望它以这种方式显示：**

*   全新定制安装的 2 英寸百叶窗
*   新的前置式洗衣机和烘干机
*   新的室内木饰条和装饰
*   选定单位的淋浴房
*   所有住宅楼的新屋顶
*   新的空调和空气处理器
*   新的室内管道
*   每个厨房都有新的电线和新的制冷线
*   新的双层隔热窗户

**但是当它在浏览器中加载地图时，它看起来很乱**

*新的、定制安装的 2 英寸百叶窗 * 新的前置式洗衣机和干衣机 * 新的室内木饰条和装饰 * 选定单元的淋浴房 * 所有住宅楼的新屋顶 * 新的空调和空气处理器 * 新的室内管道 * 新的电线，每个厨房都有新的制冷线 * 新的双绝缘窗户

如何让它变得更好，我不可能为每一行 desc 打破许多列。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:32:09.697

看起来你想要一个HTML 中的[无序列表](http://www.w3schools.com/html/html_lists.asp)：

```
<ul>
  <li>
  <li>
  <li>
</ul> 
```

[https://www.google.com/fusiontables/DataSource?snapid=S693735w-hy](https://www.google.com/fusiontables/DataSource?snapid=S693735w-hy)

# ruby-on-rails - Linkedin 的公司搜索 API 是否限制每个用户或每个 IP？

> ID：12558627
> 
> 赞同：0
> 
> 时间：2012-09-24T03:52:42.580
> 
> 标签：ruby-on-rails, ruby, linkedin

[请求 Linkedin API 限制计数记录](https://developer.linkedin.com/documents/company-search)

今天我正在使用linkedin公司搜索api开发一个应用程序。[文档说](https://developer.linkedin.com/documents/throttle-limits)开发者注册每天有 500 次 API 调用。

当我注册了这个 api，并运行了一个 resque 调度程序时——我的两个用户应该是 1000 次，对吧？但实际上，在打了一些 510 电话后，它说油门限制超过了。

有人使用linkedin api遇到过这种问题吗？评论表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:00:21.193

API 可能会使用您的 API 密钥来跟踪调用，因此运行您的工作人员的额外实例不会获得更高的调用上限。

事实上，它就在您粘贴的文档中：

> 一个开发者注册每天有 500 次 API 调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:16:59.807

您可能已经为每个工作人员使用了相同的 API 密钥/注册。

创建不同的帐户/密钥，并为每个工作人员分配一个，可能仍然无法解决问题，因为 LinkedIn 可能会限制每个 IP 的使用。

一些测试可能表明并非如此，但您应该考虑自己处于不稳定的基础，并寻求将所需的 API 使用成本构建到您的应用程序/业务模型中。

# javascript - 确定特定图像/链接是否在页面上

> ID：12558630
> 
> 赞同：-1
> 
> 时间：2012-09-24T03:53:13.827
> 
> 标签：javascript, greasemonkey, userscripts

我正在尝试创建一个`onkeydown`事件，该事件将自动将特定站点上的图像库移动到下一个图像，或返回。问题是，链接结构没有有效地构建。

所以基本上，我试图在用户脚本中查找您要单击返回或前进的图像是否存在于页面上，带有 if 语句，以确定后退/前进操作（左箭头/右箭头键盘分别）实际上可以完成。

我将如何确定页面上是否存在所述图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:20:20.280

首先，确定图像的 CSS 路径或`src`属性。（`src`如果站点使用精灵，则可能不存在。或者，它可能不是唯一的。）

您可以右键单击图像并选择***Inspect Element***，然后使用开发工具或 Firebug 来帮助确定这一点。
链接到目标页面，或粘贴适当的 HTML 片段，如果您需要我们帮助选择选择器。

然后你可以使用这样的代码：

**纯javascript：**

*   ```
    var lftArrwImg  = document.querySelector ("#galleryControls div.foo a img");
    if (lftArrwImg) {
        // DO YOUR LEFT ARROW STUFF HERE.
    } 
    ```

    **或者：**

    ```
    var lftArrwImg  = document.querySelector ("img[src='/some_path/left_arrow.gif']");
    if (lftArrwImg) {
        // DO YOUR LEFT ARROW STUFF HERE.
    } 
    ```

**jQuery：**

*   ```
    if ( $("#galleryControls div.foo a img").length ) {
        // DO YOUR LEFT ARROW STUFF HERE.
    } 
    ```

    **或者：**

    ```
    if ( $("img[src='/some_path/left_arrow.gif']").length ) {
        // DO YOUR LEFT ARROW STUFF HERE.
    } 
    ```

* * *

请注意，某些网站可能始终存在图像，但在不适用时将其隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:42:16.623

通常一个画廊的所有图像都保存在一个数组中，所以一个典型的行为是循环，所以当它在最后一个图像并且用户想要去下一个时，画廊去第一个，*反之亦然*，例如

```
var currentImage = 0;
var numberOfImages = imageArray.length;

if ( <user wants next image> ) {
  currentImage = ++currentImage % numberOfImages;

} else if ( <user wants previous image> ) {
  currentImage = (--currentImage + numberOfImages) % numberOfImages; 
} 
```

我不知道你是如何实现画廊的，但你应该能够以某种方式应用上述逻辑。

提醒一下，如果您正在寻找具有特定`src`值的图像，请按照 MarcB 的建议遍历它们。请注意，不需要`getElementsByTagName`，有一个[`document.images`](http://dev.w3.org/html5/spec/single-page.html#dom-document-images)集合可供使用。

另请注意，在某些浏览器中，`src`属性将是完整路径，但在其他（较旧的）浏览器中只是属性值。所以最好只匹配实际的图像名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:29:36.363

假设您使用的是 jquery，那么简单如下：

```
$('img[src="/path/to/left-arrow-picture.jpg"]') 
```

会做，或者如果他们有特定的课程，

```
$('img.prevclass') 
```

会工作。如果您仅使用纯 JavaScript，则可以使用

```
var imgs = document.getElementsByTagName('img');
for(var i = 0; i < imgs.length; i++) {
   if (i.src == '/path/to/left-arrow-picture.jpg') {
       ...
   }
} 
```

# javascript - asp.net, javascript getElementById 到链接按钮

> ID：12558633
> 
> 赞同：0
> 
> 时间：2012-09-24T03:54:07.520
> 
> 标签：javascript, asp.net

我在 c# 中使用 asp.net。

我有一个 gridview 并且有一个 TemplateField 列。在 TemplateField 列内有一个 EditItemTemplate，在 EditItemTemplate 内是一个链接按钮 (LinkBut​​ton1)。

我试图从一个 javascript 函数的链接按钮上做一个 getelementbyid：

```
document.getElementById("<%= LinkButton1.ClientID %>").disabled = true; 
```

但是在编译时，我收到错误：“LinkBut​​ton1”在当前上下文中不存在。

aspx 网格视图代码：

```
<asp:GridView ID="GridView1" runat="server" Height="157px" Width="814px" 
             CellPadding="4" ForeColor="#333333" GridLines="None"
             OnRowEditing="GridView1_RowEditing"
             OnRowCancelingEdit="GridView1_RowCancelingEdit" 
             OnRowUpdating="GridView1_RowUpdating" AutoGenerateColumns="False" 
             OnRowDataBound="GridView1_RowDataBound"
              onrowdeleting="GridView1_RowDeleting" Font-Size="Medium" 
            AllowPaging="True" onpageindexchanged="GridView1_PageIndexChanged" onpageindexchanging="GridView1_PageIndexChanging"     >
            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
<Columns>
<asp:TemplateField ShowHeader="False">
<EditItemTemplate>
        <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update"
            Text="Actualizar" ValidationGroup="upd_validation"></asp:LinkButton>
        <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel"
            Text="Cancelar"></asp:LinkButton>
</EditItemTemplate>      
<ItemTemplate>
        <asp:LinkButton ID="LinkButton3" runat="server" CausesValidation="False" CommandName="Edit"
            Text="Editar"></asp:LinkButton>
        <asp:LinkButton ID="LinkButton4" runat="server" CausesValidation="False" CommandName="Delete"
            Text="Eliminar" CommandArgument='<%# Container.DataItemIndex %>' onclientClick="return ConfirmDelete()"></asp:LinkButton>                         
</ItemTemplate>                
</asp:TemplateField> 
```

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:08:18.430

你可以向 LinkBut​​ton 添加一些虚拟的 css 类（例如“disableLink”），然后使用 Jquery，你可以使用下面的代码轻松实现它

```
 $('.disableLink').each(function (i, obj) { 
      $(this).disabled = true;
      // OR
      $(this).attr('disabled','disabled');
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T04:58:59.980

你可以试试这个。

```
 $(document).ready(function() {
       $("#<%=grid1.ClientID%> td a").css("visibility","hidden");
  }); 
```

# collision-detection - 使用后验（离散）方法时如何摆脱碰撞

> ID：12558634
> 
> 赞同：1
> 
> 时间：2012-09-24T03:54:08.430
> 
> 标签：collision-detection

我正在学习基本的碰撞检测。

使用后验（离散）方法进行碰撞检测。假设最简单的情况是 2D 中的 2 个圆，相同的质量，相同的大小，并假设弹性碰撞并假设它们在 x 轴上移动并朝着彼此的方向移动。

现在将模拟推进一个时间步。

现在假设这些圆圈正在发生碰撞，其中一个圆圈进入了另一个圆圈。这是通过检查它们的中心之间的距离是否小于 2*r 来发现的，其中 r 是半径）。

现在根据标准方程调整速度，模拟前进一个时间步长，调整位置。在这种情况下，速度将翻转方向，圆圈将开始彼此远离。

问题是，如果模拟时间步太小或物体移动太慢，这两个圆圈可能会在下一步之前保持碰撞，因为它们还没有完全移出彼此。

因此，在下一个时间步，圆圈再次发生碰撞，再次调整速度，但现在它们会向后翻转，因此圆圈将开始相互移动。

在下一个时间步，再次检测到碰撞，调整速度，圆圈现在将彼此远离。

这个过程重复，圆圈将保持碰撞，无法完全离开彼此。

我确信这是后验方法的一个已知问题。解决这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:16:16.690

标准解决方案是在检测到碰撞时将对象分开。计算重叠量并将每个对象从另一个对象移开该距离的一半。如果需要，您甚至可以考虑物体的质量（较重的物体移动较少）。希望这可以帮助。

# c++ - 将 unicode 字符串转换为字符串

> ID：12558635
> 
> 赞同：2
> 
> 时间：2012-09-24T03:54:22.387
> 
> 标签：c++, string, class, unicode, typeconverter

我在 C++ Builder 中创建了一些 C++ 类。我现在在 VCL 表单应用程序中使用这些。我有一个加载文本文件并将字符串作为参数的函数。

我正在使用 openDialog 控件浏览到文件然后将其打开。

我的问题是：openFialog 的 .filename 属性是 UnicodeString 的形式，我的函数需要一个 std::string。如何将 unicode 字符串转换为 std::string？

这是我的代码：

```
OpenDialog1->Execute();
calCalendar.loadAppointmentsFromFile(OpenDialog1->FileName.t_str()); 
```

这是函数定义：

```
void loadAppointmentsFromFile(const std::string& stringFilename); 
```

我收到以下错误：

[BCC32 错误] Assessment2.cpp(39)：E2342 参数“stringFilename”中的类型不匹配（需要“const std::string &”，得到“wchar_t *”）

我可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:03:52.097

使用[UnicodeString::t_str](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/System__UnicodeString__t_str.html)来获得一个缩小的字符串。但是，您应该考虑不要将两者混合。

另一种选择是转换为`AnsiString`第一个：

```
AnsiString str = OpenDialog1->FileName;
std::string s(str.c_str());
loadAppointmentsFromFile(s); 
```

或者

```
std::string s = OpenDialog1->FileName.t_str(); // TCHAR mapping set to char
loadAppointmentsFromFile(s); 
```

# go - 在 Go 中使用通道对性能有好处吗？

> ID：12558637
> 
> 赞同：5
> 
> 时间：2012-09-24T03:54:32.973
> 
> 标签：go

我想知道通道是否足够高效，可以用作编写 Go 程序的一部分。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T07:47:05.137

Go 中的 Channels 不是函数，它们是原始类型，即所谓的语言的一等公民。

与信号量（又名互斥体）相比，强烈建议使用通道，因为如果使用得当，它们可以非常有效地序列化并发访问。

Go 肯定会胜过任何解释型动态语言，并且比许多编译型语言更好地处理并发性。仍然有一些 Go 不够用的用例，例如火箭控制器等，但对于*普通*的现实世界应用程序，Go 无疑是最快和最灵活的语言之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T06:25:29.007

一般来说，是的，频道很快，但我们不知道你是否应该在不了解你的程序的情况下使用它。我想说这部分没有建设性。

至于实现，当您使用源代码安装 Go 时，它是可用的。在 中查找示例`src/pkg/runtime/chan.c`。

大多数 Go 并发程序都依赖于通道。如果你想在 Go 中编写代码并执行并发任务，我会说你几乎别无选择：使用频道、配置文件，看看你是否有与频道相关的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T21:15:52.237

你的问题很奇怪，因为显然许多 Go 程序确实有效地使用了通道，所以答案是肯定的。但我认为您可能的意思是：对于*我的用例*来说，渠道是否足够高效。如果您可以详细说明您的程序应该做什么，那么我可以给您一个更好的答案。

值得一提的是，我使用 Go 编写了许多高性能程序，这些程序需要大量（从几十到几百）个通道通过相似数量的 goroutine 进行通信。所以，是的，总的来说，它们非常有效。

# c - 在这个简单的例子中递归是如何工作的？

> ID：12558638
> 
> 赞同：-5
> 
> 时间：2012-09-24T03:54:35.457
> 
> 标签：c, recursion

> **可能重复：**
> [这两个位置有什么区别？](https://stackoverflow.com/questions/12552268/what-is-the-difference-between-the-two-locations)

> 我昨天也问过这个问题，但以前没有得到任何答案。我真的很想逐步了解问题中发生了什么以及该程序中的控制流程。

```
#include<stdio.h>
rec(int);
main()
{
    int x=5;
    rec(x);
    system("PAUSE");
    return 0;
}
rec(int y)
{    
    if (y>0)
    {
        rec(y-1);
        printf("%d ", y);
    }
    // printf("%d ", y)
} 
```

> 两个`printf`语句的输出有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:04:58.940

rec 是一个递归函数，如果满足条件，它将调用自己。因此，当从 main (rec(5)) 调用它时，y 大于 0，因此它将调用自身，并将 4 作为参数 (y-1) 传递。一旦该调用完成，它将执行 printf ，但是因为它将 4 传递给它自己并且 4 > 0 为真，它会再次调用自己并传递它 3 。这将一直持续到 0 传递给 rec 。当达到 0 时，不满足条件并停止执行，因此之前的调用（传递 1 时的调用）将执行其 printf，然后之前的调用（y = 2）将执行其 printf，依此类推！所以你的输出将是 1 2 3 4 5

编辑：

我以为你的问题是关于递归，而不是语法

# c++ - socket() 和 bind() 的行为如何？

> ID：12558639
> 
> 赞同：-1
> 
> 时间：2012-09-24T03:54:40.967
> 
> 标签：c++, linux, sockets, network-programming

我有一些关于 C++ 套接字编程的问题。如果我问的方式是错误的，请帮助深入挖掘，并帮助纠正。

1.  操作系统级别的每个端口是否有一个文件描述符。
2.  多个端口如何使用相同的网络接口？它是否像处理器中的线程一样切换？那么，如果使用端口的数量增加，是否可以延迟特定端口的数据？
3.  创建套接字时操作系统级别会发生什么？是否创建对 IO 文件描述符的任何引用？
4.  那么当调用 bind() 时在操作系统级别会发生什么。它如何互连套接字和网卡地址？
5.  使用可重用套接字时会发生什么？多个套接字如何绑定到一个端口？那些在一个端口上切换的人会像线程一样吗？
6.  在没有 bind() 的情况下发送或接收到特定地址或端口时？逻辑操作系统如何以及什么是选择地址和端口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T04:47:19.683

您将很难找到比套接字的“圣经”更具影响力的网络编程文本，W Richard Stevens: [Unix Network Programming](http://www.kohala.com/start/unpv12e.html)。套接字编程不是一朝一夕的事，所以不要指望它会。这是一门学科，简单明了。而且，像所有学科一样，它需要磨练。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T10:53:59.340

> 操作系统级别的每个端口是否有一个文件描述符。

不。如果您是在侦听套接字上接受连接的服务器，您可能有 10,000 个文件描述符都引用相同的本地端口号。

> 多个端口如何使用相同的网络接口？它是否像处理器中的线程一样切换？那么，如果使用端口的数量增加，是否可以延迟特定端口的数据？

太复杂了，这里就不回答了。

> 创建套接字时操作系统级别会发生什么？是否创建对 IO 文件描述符的任何引用？

它们是非常相似的东西，在某些操作系统中它们甚至是相同的东西。一个是指套接字，另一个是指打开的文件。

> 那么当调用 bind() 时在操作系统级别会发生什么。

端口和 IP 地址被分配给套接字。IP 地址可以是 0.0.0.0。如果指定端口为零，系统会从空闲端口中为您选择一个。

> 它如何互连套接字和网卡地址？

往上看。

> 使用可重用套接字时会发生什么？

没有“可重复使用的套接字”之类的东西。您是在谈论重用*端口吗？*

> 在没有 bind() 的情况下发送或接收到特定地址或端口时？逻辑操作系统如何以及什么是选择地址和端口。

如果您自己还没有执行A `bind()`，则在幕后执行A。因此，与上述相同的规则适用`bind()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:45:26.083

我认为您应该阅读套接字编程，您要问的是基本概念，您应该了解服务器、客户端、TCP、UDP、本地主机、远程主机等术语。socket() 在进程和传输层之间创建一个接口，它创建并告诉套接字的特性。bind() 将套接字绑定到您的本地地址。您可以查看手册页 1 或 2，您会找到一个全面的答案。

# grails - 随着 Grails 中表的增长，防止行插入逐渐变慢的最佳方法

> ID：12558640
> 
> 赞同：0
> 
> 时间：2012-09-24T03:54:44.840
> 
> 标签：grails

我在我的 Grails 应用程序中有一个表，它变得相当大 - 大约 100,000 行，并且每天增长约 10,000 行。我注意到随着表格的增长，插入变得越来越慢。我认为这与我的索引有关。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:08:03.677

是的，可能是索引，但通常最大的打击是因为休眠会话过于臃肿，[Ted Naleid 对此](http://naleid.com/blog/2009/10/01/batch-import-performance-with-grails-and-mysql/)进行了很好的描述。如果这对您不起作用，请告诉我们有关您的情况的更多信息，您是在进行批量插入，还是您的网站从不同的请求中获得了 10000 个插入等？

我通过一个简单的方法解决了这个问题，该方法像 Ted 建议的那样经常调用（例如，每插入 1000 行）

```
def cleanUpGorm() {
        def session = sessionFactory.currentSession
        session.flush()
        session.clear()
        propertyInstanceMap.get().clear()
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:56:21.077

您应该首先确认是 DB 问题还是 Grails/Hibernate 问题；我会首先输出 Hibernate 生成的 SQL，`Datasource.groovy`然后看看那里是否发生了任何异常情况。您还可以使用数据库供应商提供的各种 SQL 分析工具来查看那里发生了什么；例如，您可以`EXPLAIN PLAN`从 SQL 生成一个，以查看插入是否由于没有正确的索引而变慢。

在处理性能问题时，您想深入研究并找到原因的具体证据，其他一切都只是猜测。

# php - 将函数作为参数传递给另一个函数

> ID：12558645
> 
> 赞同：0
> 
> 时间：2012-09-24T03:55:08.480
> 
> 标签：php

这段代码有效，可能有更好的方法来实现，但我的问题是，

***像这样通过有什么具体的术语吗？***（与匿名函数一样），
***这是一种可以接受的做法吗？,***

***是否违反标准？***

```
<?php
// suppose the only way i can retrieve the content is by using this function 
//like  wordpress equivalent of the_content()
function mycontent()
{
    $Original_content="oldcontent";
    return $Original_content;
}

//instead of ---> echo $Original_content."facebook,twitter code";
//if i define a new function
function social_share($content)
{
    $added_social=$content;
    $added_social.=" +  facebook,twitter code...";
    echo $added_social;
}

//function call
social_share(mycontent());
?> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:00:49.223

你没有传递一个函数。您将一个函数调用的结果作为参数直接传递给另一个函数。“传递函数”意味着“父”函数将在某个时候调用“子”函数。在这种情况下， social_share 根本不会调用 mycontent() - 这是在 social_share 甚至执行之前很久就完成的。

话虽这么说，如果你有这样的事情：

```
function my_echo($arg) {
   print($arg);
}

function social_share($somearg, $func_to_invoke) {
    $$func_to_invoke($somearg);
}

social_share('hello', 'my_echo'); 
```

那么您将通过将一个函数作为参数传递来从另一个函数中调用它。在这种情况下，您将通过您的小自定义`my_echo`函数打印出“hello”，而无需编写`my_echo('hello');`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T04:01:41.380

这一点都没有错。实际上，这很像面向对象的方法。您可以创建一个具有这些方法的类，并使用它们将其他属性传递给其他对象和类等。我认为这是一种很好的做法。

# c++ - URLDownloadToFile C++ 不会下载超过 15Kb

> ID：12558651
> 
> 赞同：0
> 
> 时间：2012-09-24T03:55:35.963
> 
> 标签：c++, winapi, download, max-size

```
void UpdateApp(HWND hwnd) {
HRESULT hRez = URLDownloadToFile( NULL, string("Web Address here.").c_str(), string("Download file here").c_str(), 0, NULL);
if(hRez == E_OUTOFMEMORY ){
    MessageBox(hwnd, "","",MB_OK);
}
else if(hRez!=S_OK) {
    MessageBox(hwnd, "Error downloading the updater.", "Error!", MB_ICONERROR | MB_SYSTEMMODAL);
}
if(hRez==S_OK) {
    MessageBox(hwnd, "Done", "", MB_OK);
}
} 
```

我正在为一个主程序制作一个自动更新程序。到目前为止一切顺利，但函数 URLDownloadToFile 下载的大小不超过 14.1 Kb。我正在使用它来下载一个包含所有更新文件的 zip。每次我运行它时，它都会达到 14.1 Kb，然后停止，并且不返回任何错误。我还没有读到任何关于下载大小限制的信息，那么可能是什么原因造成的？zip 的实际大小为 1,644Kb。感谢您提前提供的所有帮助。

# php - PHP中的代理请求

> ID：12558656
> 
> 赞同：0
> 
> 时间：2012-09-24T03:56:36.050
> 
> 标签：php, proxy, request

我有一个托管在美国服务器上的应用程序，我正在使用它连接到美国的另一项服务。所以请求是从美国 IP 发出的。我想从访问者国家的 IP 提出请求。

这可能吗 ？我们可以用 PHP 做到这一点吗？

# c# - jQuery选中/取消选中gridview中的所有内容

> ID：12558658
> 
> 赞同：0
> 
> 时间：2012-09-24T03:56:49.397
> 
> 标签：c#, jquery, asp.net

在我的用户控件中，有一个 gridview。我想使用标题复选框选择/取消选择gridview中的所有复选框。所以我使用jQuery实现它。

```
function SelectAllCheckboxes(chk) {
    $('#<%=gridView.ClientID %> >tbody >tr >td >input:checkbox').attr('checked', chk.checked);
} 
```

在我的gridview的headertemplate中，我放了这个

```
<asp:CheckBox ID="chkHeader" runat="server"  OnClick="javascript:SelectAllCheckboxes(this);"/> 
```

它运作良好。但是当另一个开发人员将我的用户控件放入 aspx**两次**时，它就无法正常工作。

每当我检查第一个或第二个 Gridview 的标题复选框时，**只有第二个**GridViews 的复选框被选中或取消选中。

即使我检查了第一个 Gridview 的标题复选框，它也从不检查第一个 GridView 的复选框。

我需要什么样的修改？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T04:03:58.717

你可以使用`closest()`方法：

```
function SelectAllCheckboxes(chk) {
    $(chk).closest('table >tbody >tr >td >input:checkbox').attr('checked', chk.checked);
} 
```

来自 jquery 的文档：“获取与选择器匹配的第一个元素，从当前元素开始并向上遍历 DOM 树。”

编辑：我不太确定它是否会那样工作。如果没有，您可以尝试：

```
function SelectAllCheckboxes(chk) {
    $(chk).closest('table').find('>tbody >tr >td >input:checkbox').attr('checked', chk.checked);
} 
```

希望能帮助到你。

# javascript - 从选择中创建过滤器（同位素）

> ID：12558661
> 
> 赞同：0
> 
> 时间：2012-09-24T03:57:14.797
> 
> 标签：javascript, jquery, jquery-isotope

我有四个级别的过滤器，基本上是：格式、区域、人口统计和兴趣。

```
<div class="form-div">
  <input type="checkbox" data-filter="i-newspaper">
  <input type="checkbox" data-filter="i-magazine">
</div>

<div class="form-div">
  <input type="checkbox" data-filter="i-northland">
  <input type="checkbox" data-filter="i-southland">
</div>

<div class="form-div">
  <select>
    <option value="4" data-filter="i-digital">Digital</option>
    <option value="1" data-filter="i-manufacturing">Manufacturing</option>
    <option value="2" data-filter="i-retail">Retail</option>
  </select>
</div>

<div class="form-div">
  <input data-filter="i-business-and-finance" type="checkbox">
  <input data-filter="i-careers-and-education" type="checkbox">
  <input data-filter="i-design-and-photography" type="checkbox">
</div> 
```

同位素过滤器基于上面检查/选择的内容。

我正在使用这样的东西：

```
var selectors = [];
$(".form-div").find("input:checked, option:selected").each(function(){
  selectors.push('.'+$(this).data('filter'));
});
selectors = selectors.join(''); 
```

它提供了一个选择器`.i-newspaper.i-magazine.i-northland.i-southland.i-digital.i-design-and-photography`（假设这些是选中/选中的表单元素）

然而，每一个`.form-div`都是一个单独的集合，所以通过上面的选择，我希望得到：

```
.i-newspaper.i-southland.i-digital.i-design-and-photography,
.i-newspaper.i-northland.i-digital.i-design-and-photography,
.i-magazine.i-southland.i-digital.i-design-and-photography,
.i-magazine.i-northland.i-digital.i-design-and-photography 
```

如何实现这样的目标？

如果我的问题需要更多澄清，请告诉我...

谢谢

**编辑**

此问题的另一种替代解决方案是“多级”过滤。

所以按这个集合过滤：`.i-newspaper, .i-magazine`

然后按此集合过滤子集：`i-southland, .i-northland`

等等等等...

**EDIT2** JsFiddle：http: [//jsfiddle.net/MkME9/](http://jsfiddle.net/MkME9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:22:37.923

看看我的编辑：http: [//jsfiddle.net/MkME9/](http://jsfiddle.net/MkME9/)

这就是你需要的吗？

**编辑** 这是正确的吗？

[http://jsfiddle.net/MkME9/6/](http://jsfiddle.net/MkME9/6/)

**最后编辑（我希望）**

[http://jsfiddle.net/MkME9/9/](http://jsfiddle.net/MkME9/9/)

# android - GC_CONCURRENT 问题

> ID：12558665
> 
> 赞同：0
> 
> 时间：2012-09-24T03:58:06.997
> 
> 标签：android, android-sqlite

这家伙一直在让我的应用程序冻结，有什么方法可以解决这个问题？

这是我的代码：

```
import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class StartMoving extends Activity implements OnClickListener {

    Button managemove, returnBack, manageroom, settings, kitchen, addmove;
    ImageButton add1;
    EditText newMove;
    TextView roomName, listMove, roomContent, itemValue;
    CheckBox cbox1;
    Dialog d;
    LinearLayout roomButtons, addRooms;
    RelativeLayout main, merge;
    int check = 0;
    int inc = 1;
    String currentMove = null;
    String currentRoom = null;
    String currentItem = null;
    String currentItemValue = null;
    int itemval = 1;
    boolean notavailroom = true;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.start_moving);

        roomName = (TextView) findViewById(R.id.tvRoomName);

        managemove = (Button) findViewById(R.id.bManageMove);

        manageroom = (Button) findViewById(R.id.bManageRooms);

        merge = (RelativeLayout) findViewById(R.id.rlmanagemove);

        main = (RelativeLayout) findViewById(R.id.rlmain);

        add1 = (ImageButton) findViewById(R.id.bAddDish);

        roomButtons = (LinearLayout) findViewById(R.id.llButtonRooms);

        kitchen = (Button) findViewById(R.id.bKitchen);

        roomContent = (TextView) findViewById(R.id.tvRoomContent);

        itemValue = (TextView) findViewById(R.id.tvItemValue);

        addRooms = (LinearLayout) findViewById(R.id.llhsvLayout);
        addRooms.setOrientation(LinearLayout.HORIZONTAL);

        managemove.setOnClickListener(this);
        manageroom.setOnClickListener(this);
        add1.setOnClickListener(this);
        kitchen.setOnClickListener(this);

        Intent i = getIntent();     
        currentMove = i.getStringExtra("moveName");

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.bManageMove:
            merge.setVisibility(View.VISIBLE);
            main.setVisibility(View.INVISIBLE);
            check = 1;
            break;

        case R.id.bManageRooms:
            roomButtons.setVisibility(View.VISIBLE);
            main.setVisibility(View.INVISIBLE);
            //          LinearLayout laddbuttons = (LinearLayout) findViewById(R.id.llhsvLayout);
            //          laddbuttons.setOrientation(LinearLayout.HORIZONTAL);
            //
            //          for (int i = 0; i < 3; i++) {
            //              LinearLayout row = new LinearLayout(this);
            //              row.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            //
            //              for (int j = 0; j < 4; j++) {
            //                  Button btnTag = new Button(this);
            //                  btnTag.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            //                  btnTag.setText("Button " + (j + 1 + (i * 4)));
            //                  btnTag.setId(j + 1 + (i * 4));
            //                  row.addView(btnTag);
            //              }
            //
            //              laddbuttons.addView(row);
            //          }
            check = 2;
            break;

        case R.id.bAddDish:
            currentItem = currentItem + "\nDishwahser";
            currentItemValue = "" + itemval + "\n";
            itemval++;

            roomContent.setText(currentItem);
            itemValue.setText(currentItemValue);
            break;

        case R.id.bKitchen:
            LinearLayout row = new LinearLayout(this);
            row.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

            try {
                SQLHandler kitchen = new SQLHandler(StartMoving.this);
                currentRoom = "Kitchen" + inc;
                kitchen.open();
                String returnedRoom = kitchen.getRoom(currentRoom);

                while (notavailroom) {
                    if (returnedRoom.equals(currentRoom)) {
                        inc++;
                        returnedRoom = kitchen.getRoom(currentRoom);
                    }else{
                        notavailroom = false;
                        kitchen.addRooms(currentMove, currentRoom);
                        roomName.setText(currentRoom);
                        Button b = new Button(StartMoving.this);
                        b.setText(currentRoom);
                        row.addView(b);
                        b.setOnClickListener(new OnClickListener() {

                            public void onClick(View v) {
                                // TODO Auto-generated method stub

                            }
                        });
                        addRooms.addView(row);
                        main.setVisibility(View.VISIBLE);
                        roomButtons.setVisibility(View.INVISIBLE);
                    }
                }
                kitchen.close();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                SQLHandler kitchen = new SQLHandler(StartMoving.this);
                currentRoom = "Kitchen" + inc;
                kitchen.open();
                kitchen.addRooms(currentMove, currentRoom);
                roomName.setText(currentRoom);
                Button b = new Button(StartMoving.this);
                b.setText(currentRoom);
                row.addView(b);
                b.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                    }
                });
                addRooms.addView(row);
                main.setVisibility(View.VISIBLE);
                roomButtons.setVisibility(View.INVISIBLE);
                kitchen.close();
            }

            break;

        default:
            break;
        }
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        // TODO Auto-generated method stub
        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onRestoreInstanceState(savedInstanceState);

        roomName.setText("Hello world");
    }

    public void onBackPressed(){
        super.onBackPressed();

    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event)  {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
            // do something on back.
            if (check == 1) {
                merge.setVisibility(View.INVISIBLE);
                main.setVisibility(View.VISIBLE);
                check = 0;
            }else if (check == 2) {
                main.setVisibility(View.VISIBLE);
                roomButtons.setVisibility(View.INVISIBLE);
                check = 0;
            }else {
                //              this.finish();
                Intent i = new Intent(StartMoving.this, ListMovingNames.class);
                startActivity(i);
            }
            return true;
        }

        return super.onKeyDown(keyCode, event);
    }
} 
```

这个问题的罪魁祸首就是这行代码

```
case R.id.bKitchen:
            LinearLayout row = new LinearLayout(this);
            row.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

            try {
                SQLHandler kitchen = new SQLHandler(StartMoving.this);
                currentRoom = "Kitchen" + inc;
                kitchen.open();
                String returnedRoom = kitchen.getRoom(currentRoom);

                while (notavailroom) {
                    if (returnedRoom.equals(currentRoom)) {
                        inc++;
                        returnedRoom = kitchen.getRoom(currentRoom);
                    }else{
                        notavailroom = false;
                        kitchen.addRooms(currentMove, currentRoom);
                        roomName.setText(currentRoom);
                        Button b = new Button(StartMoving.this);
                        b.setText(currentRoom);
                        row.addView(b);
                        b.setOnClickListener(new OnClickListener() {

                            public void onClick(View v) {
                                // TODO Auto-generated method stub

                            }
                        });
                        addRooms.addView(row);
                        main.setVisibility(View.VISIBLE);
                        roomButtons.setVisibility(View.INVISIBLE);
                    }
                }
                kitchen.close();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                SQLHandler kitchen = new SQLHandler(StartMoving.this);
                currentRoom = "Kitchen" + inc;
                kitchen.open();
                kitchen.addRooms(currentMove, currentRoom);
                roomName.setText(currentRoom);
                Button b = new Button(StartMoving.this);
                b.setText(currentRoom);
                row.addView(b);
                b.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                    }
                });
                addRooms.addView(row);
                main.setVisibility(View.VISIBLE);
                roomButtons.setVisibility(View.INVISIBLE);
                kitchen.close();
            }

            break; 
```

我基本上想要做的是什么时候`kitchen button`按下它首先检查数据库如果为按钮提供的文本存在于数据库中如果不存在则默认名称被赋予按钮并保存到数据库但如果名称确实存在另一个名称将通过增加`int inc`名称来给出`currentRoom = "kitchen " + inc;`

这里也是处理数据库的 SQLHandler.java

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class SQLHandler {
    public static final String KEY_ROOMMOVEHOLDER = "roommoveholder";
    public static final String KEY_ROOM = "room";

    public static final String KEY_ITEMMOVEHOLDER = "itemmoveholder";
    public static final String KEY_ITEMNAME = "itemname";
    public static final String KEY_ITEMVALUE = "itemvalue";
    public static final String KEY_ROOMHOLDER = "roomholder";

    public static final String KEY_MOVENAME = "movename";
    public static final String KEY_ID1 = "_id";
    public static final String KEY_ID2 = "_id";
    public static final String KEY_ID3 = "_id";
    public static final String KEY_ID4 = "_id";
    public static final String KEY_MOVEDATE = "movedate";

    private static final String DATABASE_NAME = "mymovingfriend";
    private static final int DATABASE_VERSION = 1;

    public static final String KEY_TODOMOVE = "todomove";
    public static final String KEY_SORTANDPURGE = "sortandpurge";
    public static final String KEY_RESEARCH = "research";
    public static final String KEY_CREATEMOVINGBINDER = "createmovingbinder";
    public static final String KEY_ORDERSUPPLIES = "ordersupplies";
    public static final String KEY_USEITORLOSEIT = "useitorloseit";
    public static final String KEY_TAKEMEASUREMENTS = "takemeasurements";
    public static final String KEY_CHOOSEMOVER = "choosemover";
    public static final String KEY_BEGINPACKING = "beginpacking";
    public static final String KEY_LABEL = "label";
    public static final String KEY_SEPARATEVALUES = "separatevalues";
    public static final String KEY_DOACHANGEOFADDRESS = "doachangeofaddress";
    public static final String KEY_NOTIFYIMPORTANTPARTIES = "notifyimportantparties";

    private static final String DATABASE_TABLE1 = "movingname";
    private static final String DATABASE_TABLE2 = "movingrooms";
    private static final String DATABASE_TABLE3 = "movingitems";
    private static final String DATABASE_TABLE4 = "todolist";

    public static final String CREATE_TABLE_1 = "CREATE TABLE " + DATABASE_TABLE1 + " (" + 
            KEY_ID1 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_MOVEDATE + " TEXT NOT NULL, " + 
            KEY_MOVENAME + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_2 = "CREATE TABLE " + DATABASE_TABLE2 + " (" + 
            KEY_ID2 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_ROOMMOVEHOLDER + " TEXT NOT NULL, " + 
            KEY_ROOM + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_3 = "CREATE TABLE " + DATABASE_TABLE3 + " (" + 
            KEY_ID3 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_ITEMNAME + " TEXT NOT NULL, " + 
            KEY_ITEMVALUE + " TEXT NOT NULL, " +
            KEY_ROOMHOLDER + " TEXT NOT NULL, " +   
            KEY_ITEMMOVEHOLDER + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_4 = "CREATE TABLE " + DATABASE_TABLE4 + " (" + 
            KEY_ID4 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_TODOMOVE + " TEXT NOT NULL, " +
            KEY_SORTANDPURGE + " TEXT NOT NULL, " + 
            KEY_RESEARCH + " INTEGER NOT NULL, " +
            KEY_CREATEMOVINGBINDER + " TEXT NOT NULL, " + 
            KEY_ORDERSUPPLIES + " TEXT NOT NULL, " +
            KEY_USEITORLOSEIT + " TEXT NOT NULL, " + 
            KEY_TAKEMEASUREMENTS + " TEXT NOT NULL, " +
            KEY_CHOOSEMOVER + " TEXT NOT NULL, " + 
            KEY_BEGINPACKING + " TEXT NOT NULL, " +
            KEY_LABEL + " TEXT NOT NULL, " + 
            KEY_SEPARATEVALUES + " TEXT NOT NULL, " +
            KEY_DOACHANGEOFADDRESS + " TEXT NOT NULL, " + 
            KEY_NOTIFYIMPORTANTPARTIES + " TEXT NOT NULL);";

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(CREATE_TABLE_1);
            db.execSQL(CREATE_TABLE_2);
            db.execSQL(CREATE_TABLE_3);
            db.execSQL(CREATE_TABLE_4);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldversion, int newversion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE1);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE2);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE3);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE4);
            onCreate(db);
        }
    }

    public SQLHandler(Context c){
        ourContext = c;
    }

    public SQLHandler open() throws SQLException{
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close(){
        ourHelper.close();
    }

    public long createMove(String smovename){
        ContentValues cv = new ContentValues();
        cv.put(KEY_MOVENAME, smovename);
        cv.put(KEY_MOVEDATE, "Not yet set");
        return ourDatabase.insert(DATABASE_TABLE1, null, cv);
    }

    public long addRooms(String sroommoveholder, String sroom){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ROOMMOVEHOLDER, sroommoveholder);
        cv.put(KEY_ROOM, sroom);
        return ourDatabase.insert(DATABASE_TABLE2, null, cv);
    }

    public long addItems(String sitemmoveholder, String sroomholder, String sitemname, String sitemvalue){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ITEMMOVEHOLDER, sitemmoveholder);
        cv.put(KEY_ROOMHOLDER, sroomholder);
        cv.put(KEY_ITEMNAME, sitemname);
        cv.put(KEY_ITEMVALUE, sitemvalue);
        return ourDatabase.insert(DATABASE_TABLE3, null, cv);
    }

    public long todoList(String todoitem){
        ContentValues cv = new ContentValues();
        cv.put(todoitem, "Done");
        return ourDatabase.insert(DATABASE_TABLE4, null, cv);
    }

    public Cursor getMove(){
        String[] columns = new String[]{KEY_ID1, KEY_MOVENAME};
        Cursor cursor = ourDatabase.query(DATABASE_TABLE1, columns, null, null, null, null, null);
        return cursor;
    }

    public String getRoom(String r) throws SQLException{
        String[] columns = new String[]{KEY_ID2, KEY_ROOMMOVEHOLDER, KEY_ROOM};
        Cursor c = ourDatabase.query(DATABASE_TABLE2, columns, KEY_ROOM + "= '" + r + "'" , null, null, null, null);

        if (c != null) {
            c.moveToFirst();
            String roomName = c.getString(2);
            return roomName;
        }
        return null;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:04:42.273

由于以下语句，在我看来这是一个持续循环：

```
if (returnedRoom.equals(currentRoom)) {
    inc++;
    returnedRoom = kitchen.getRoom(currentRoom);
} 
```

不returnRoom 总是等于currentRoom 吗？（仅仅是因为 currentRoom 永远不会改变。）

即使您增加 inc，它也不会改变 currentRoom。

我认为应该是

```
if (returnedRoom.equals(currentRoom)) {
    currentRoom = "Kitchen" + ++inc;
    returnedRoom = kitchen.getRoom(currentRoom);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:10:37.733

来自**SQLiteOpenHelper**文档：

> 此类使 ContentProvider 实现可以轻松地将数据库的打开和升级推迟到第一次使用，以避免因长时间运行的数据库升级而阻塞应用程序启动。

**在getReadableDatabase**和**getWritableDatabase**的文档下：

> 数据库升级可能需要很长时间，您不应该从应用程序主线程调用此方法，包括从 ContentProvider.onCreate()。

# wcf - 从 wcf 方法返回 null 异常

> ID：12558666
> 
> 赞同：0
> 
> 时间：2012-09-24T03:58:32.177
> 
> 标签：wcf, wcf-ria-services, ria

我正在使用带有 RIA 域服务的 silverlight 应用程序。在那个域服务中，我公开了一个 SOAP 端点，以便我可以通过 SOAP 调用域服务方法。我在 web.config 文件中做了类似下面的事情。

```
<system.serviceModel>
  <domainServices>
    <endpoints>
      <add name="soap" type="Microsoft.ServiceModel.DomainService.Hosting.SoapEndpointFactory, Microsoft.ServiceModel.DomainService.Hosting" />
    </endpoints>
  </domainServices>
<system.serviceModel> 
```

一切正常。当我从本地 ASP.net 服务器上的 Visual Studio 启动我的服务时，我可以将正确的异常返回给我的客户端。但是当我使用相同的 web.config 文件在 IIS 中托管这个域服务时，我得到了空异常。任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:35:59.590

我想到了。在 web.config 文件中设置 customErrors mode=false 就可以了。

# jquery-mobile - JQM RC2 data-role="header" 不是动态加载的样式

> ID：12558667
> 
> 赞同：0
> 
> 时间：2012-09-24T03:58:35.027
> 
> 标签：jquery-mobile

我的简单“页眉”或“页脚”都没有样式：所有其他小部件（控件组、可折叠集、列表等）都按预期样式。

我正在重新加载 data-role="page" 中的所有内容，然后像这样重建页面

```
$("#standings").load(url, function (content, status) {
        $("#standings").trigger("create");
        $.mobile.hidePageLoadingMsg();
}); 
```

data-role='content' 样式中的所有内容在加载时都很好。我在正确样式的内容之外有两个“控制组”，但页眉或页脚都没有选择任何样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:37:04.363

我认为你应该使用`trigger("pagecreate")`而不是`trigger("create")`......即使通常不推荐这样做......：S

所以，你会得到这样的东西：

```
$("#standings").load(url, function (content, status) {
        $("#standings").trigger("pagecreate");
        $.mobile.hidePageLoadingMsg();
}); 
```

我认为你可能想看看这个链接：[https ://github.com/jquery/jquery-mobile/issues/2703](https://github.com/jquery/jquery-mobile/issues/2703)

* * *

否则，您可以尝试将这些类直接应用于您的标题。

检查此链接以获取更多信息：[JQuery Mobile trigger('create') command not working](https://stackoverflow.com/questions/8088837/jquery-mobile-triggercreate-command-not-working)

* * *

希望这可以帮助。

# javascript - IE onpropertychange，如何区分来自JavaScript的真实输入和设置值？

> ID：12558668
> 
> 赞同：1
> 
> 时间：2012-09-24T03:58:35.027
> 
> 标签：javascript

我想在输入栏中收听用户输入事件，所以我`onpropertychange`在 IE 中使用：

```
input.onpropertychange = function(){
    // do something
}; 
```

但是如果我在 JavaScript 中设置该输入的值，该事件也会被触发：

```
input.value = "test"; 
```

我怎么区分它们？

# objective-c - 没有添加点击识别器

> ID：12558669
> 
> 赞同：0
> 
> 时间：2012-09-24T03:58:39.560
> 
> 标签：objective-c, cocoa-touch, ios5, xcode4.2

我正在使用以下代码

```
@property (retain, nonatmoic) UIImageView *imgView;

  if ( count == 6)
    {
        [timer invalidate]; 
         imgView= [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,460)];

        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
        {
            imgView.image = [UIImage imageNamed:@"ipad_popover-incorrectguess.png"];
            [self.view addSubview:imgView];

        }
        else if ( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
        {
            imgView.image = [UIImage imageNamed:@"iphone_popover-incorrectguess.png"];
            [self.view addSubview:imgView];        
        }
        UIGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                    initWithTarget:self action:@selector(newRound)];
        [imgView addGestureRecognizer:tap];
    }
}

-(void)newRound
{
    [imgView removeFromSuperview];
} 
```

当我点击图像上的任何位置时，似乎从未调用过 newROUND 。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:29:13.807

您需要为 imgView 启用用户交互：

```
imgView.userInteractionEnabled = YES; 
```

与 UIView 不同，UIImageView 的 userInteractionEnabled 属性默认设置为 NO，因此您需要将其显式设置为 YES 以使其接收触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:16:04.773

设置 tap.delegate =self。

UIGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(newRound)];

**tap.delegate=自己；**

[imgView addGestureRecognizer:tap];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:29:35.927

此外，我会确定该类是 .h 头文件中的委托：

```
@interface View : UIView <UIGestureRecognizerDelegate> 
```

# visual-studio-2010 - 如何在循环中重复调用两个 Visual Studio 项目

> ID：12558673
> 
> 赞同：-1
> 
> 时间：2012-09-24T03:59:16.233
> 
> 标签：visual-studio-2010, visual-studio, visual-c++

我有两个视觉工作室项目。我想做类似的事情

```
for(int i=0;i<10;i++)
{  
    Run_Project1(i)          // Pass i as argument to project 1.
    Run_Project2(i)
    // do something with results
} 
```

我怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:01:47.277

首先，您需要编译项目并获得生成的可执行文件，您不能简单地“运行”源代码。

接下来要做的是调用exe文件，在win32中最简单的方法是使用system. 所以你会运行类似的东西

```
while( itPleasesYou ){
    system("Path/proj1.exe args");
    system("Path/proj2.exe args");
} 
```

至于如何获得结果，那么您需要指定结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:16:29.350

目前尚不清楚您想要实现什么。也许您想批量编译和运行多个项目。在这种情况下，

使用以下代码创建一个批处理文件并运行它

```
FOR /L %%i IN (1,1,10) DO (
devenv "project%%i.vcxproj" /RunExit
) 
```

# javascript - UserScript 根据按键采取行动？

> ID：12558677
> 
> 赞同：3
> 
> 时间：2012-09-24T03:59:46.123
> 
> 标签：javascript, dom-events, userscripts, onkeydown

我正在为我正在尝试编写的这个用户脚本的语法而苦苦挣扎，它基本上应该遵循这个逻辑：

```
IF (LeftArrowKeyIsPressed) THEN doSomething;
ELSE IF (RightArrowKeyIsPressed) THEN doSomethingElse;
ELSE IF（按下任何其他键） THEN doNothing;
```

有人可以帮助我了解构建按键检查的代码语法吗？假设`onkeydown`正在使用一个事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:33:58.903

添加一个事件侦听器，可能是到窗口，使用`addEventListener`. 然后关闭该`Event.which`值以执行您想要的操作。

这是代码。[**在 jsFiddle 上查看它的实际效果。**](http://jsfiddle.net/Uzxjf/1/)：

```
/*--- Get or set the codes for the arrow keys.
    Firefox gives us nice constants, Chrome does not.
*/
KeyEvent        = (typeof KeyEvent === "object")  ?  KeyEvent  :  [];
const LEFT_KEY  = KeyEvent.DOM_VK_LEFT   ||  37;
const RIGHT_KEY = KeyEvent.DOM_VK_RIGHT  ||  39;

window.addEventListener ("keydown", keyboardHandler, false);

function keyboardHandler (zEvent) {
    var bBlockDefaultAction = false;

    //--- Assume we want only the plain keys, not the modified versions.
    if (zEvent.altKey  ||  zEvent.ctrlKey  ||  zEvent.shiftKey) {
        //-- Do nothing (most user-friendly option, in most cases).
    }
    else {
        if (zEvent.which == LEFT_KEY) {
            //DO LEFT KEY ACTION HERE.
            bBlockDefaultAction = true;
        }
        else if (zEvent.which == RIGHT_KEY) {
            //DO RIGHT KEY ACTION HERE.
            bBlockDefaultAction = true;
        }
    }

    if (bBlockDefaultAction) {
        zEvent.preventDefault ();
        zEvent.stopPropagation ();
    }
} 
```

* * *

此代码适用于用户脚本适用的浏览器（不是 IE）。jQuery 版本是相同的，只是将`addEventListener`行更改为：

```
$(window).keydown (keyboardHandler); 
```

# paypal - PayPal Payments Pro/Express Checkout API 是否支持向其他收款人汇款？

> ID：12558683
> 
> 赞同：0
> 
> 时间：2012-09-24T04:00:57.463
> 
> 标签：paypal, paypal-adaptive-payments

是否可以使用“旧”（Payments Pro / Express Checkout）PayPal API 代表某人向收款人或收款人组汇款？我意识到使用 Adaptive Payments Pay 方法可以做到这一点，但其他 API 似乎无法做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T22:12:40.167

是的，Express Checkout 支持这一点。

**仅以您为发送者*将*资金发送给多个接收者**
虽然它只是一个并行交易，没有链接，而且它可能没有自适应支付那么精致。但它肯定有效。

要通过 Express Checkout 交易向多个收款人汇款，只需确保您使用 PAYMENTREQUEST_* 变量（例如 PAYMENTREQUEST_0_AMT，而不仅仅是“AMT”），然后添加“PAYMENTREQUEST_0_SELLERPAYPALACCOUNTID=yourfirst@receiver.tld”。

然后对于第二个接收器，使用；

```
PAYMENTREQUEST_1_SELLERPAYPALACCOUNTID=yoursecond@receiver.tld
PAYMENTREQUEST_1_AMT=9.99 
```

第三个；

```
PAYMENTREQUEST_2_SELLERPAYPALACCOUNTID=yourthird@receiver.tld
PAYMENTREQUEST_2_AMT=9.99 
```

等等等等。:-)

**对于其他人给多个收款人**
或者如果您实际上并不持有资金并且您希望代表其他人向多个收款人进行操作，您可以使用`Permissions API`获得发件人的许可以代表他们汇款，然后发件人需要获得批准`MassPay API`。
鉴于，这并不理想，因为不是每个人都可以访问 MassPay API。但这当然是可能的。
如果你想测试一下；PayPal 沙盒中的所有 Premier 和 Business 帐户默认启用 MassPay。

# ios - 将对象附加到控件以指示 UITableView 中的状态

> ID：12558685
> 
> 赞同：0
> 
> 时间：2012-09-24T04:01:20.813
> 
> 标签：ios, xcode, cocoa-touch, uitableview

如何将对象附加到 iOS 中的控件/UIView，以便我可以清楚地知道我正在处理哪个控件？

场景是我有一个“绑定”到字符串数组的 UITableView。我在单元格中有一个自定义控件（UISwitch），有时会触发行/单元格的删除。

在回调中（通过在我的 UISwitch 上调用 addTarget 设置）我无法知道哪个单元格触发了事件。

UISwitch 上是否有一个属性可以用来指示这一点。理想情况下，我可以附加原始数据源对象。在 Microsoft 技术中，控件通常具有一个标记属性，该属性可以保存对任何内容（对象/id）的引用。然而，Cocoa Touch 中的 tag 属性是一个 NSUInteger，它并没有真正的帮助——因为一旦你从数组中间删除了一个项目，存储索引就不起作用了；一切都不同步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:49:40.747

您可以使用视图层次结构获取 tableview 单元格。

所以在你切换动作

```
- (IBAction)flip:(id)sender{
  //switch
  UISwitch *s=(UISwitch *)sender;
  //cell
  UITableViewCell *cell=sender.superview; 
  //index path 
  NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
  //then use the index path to access your array of strings
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:44:07.020

最后我实际上使用了关联引用，例如

```
#import <objc/runtime.h> 
```

...

```
static char const * const ItemTagKey = "ItemTag"; 
```

设置属性

```
objc_setAssociatedObject(sw, ItemTagKey, item, OBJC_ASSOCIATION_RETAIN_NONATOMIC); 
```

并把它拿回来

```
objc_getAssociatedObject(sw, ItemTagKey); 
```

这似乎运作良好。

# ruby - VCAP 首次启动问题

> ID：12558687
> 
> 赞同：0
> 
> 时间：2012-09-24T04:01:32.180
> 
> 标签：ruby, startup, runtime-error, eventmachine, cloud-foundry

好的，所以按照此处列出的步骤设置 VCAP 实例。我在 Ubuntu DIRECTLY 新配置的 Ubuntu 10.04 云 AMI 上运行它（所以它是 vanilla）。服用 FOREVER 后，我收到一条成功消息，并立即尝试使用说明中给出的启动命令启动实例。当我运行它时，我得到以下信息：

```
Targeting deployment "devbox" with cloudfoundry home "/home/vcap/cloudfoundry"
Setting up cloud controller environment
Setting up the uaa environment
Using cloudfoundry config from /home/vcap/cloudfoundry/.deployments/devbox/config
Executing /home/vcap/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/bin/ruby /home/vcap/cloudfoundry/vcap/dev_setup/bin/vcap start cloud_controller mongodb_node health_manager rabbitmq_node mongodb_gateway mysql_node redis_gateway uaa vblob_node filesystem_gateway mysql_gateway vblob_gateway stager dea rabbitmq_gateway postgresql_gateway router redis_node postgresql_node -c /home/vcap/cloudfoundry/.deployments/devbox/config -v /home/vcap/cloudfoundry -l /home/vcap/cloudfoundry/.deployments/devbox/log
/home/vcap/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:1637:in `raise_if_conflicts': Unable to activate nats-0.4.28, because eventmachine-1.0.0 conflicts with eventmachine (= 0.12.10) (Gem::LoadError)
    from /home/vcap/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:746:in `activate'
    from /home/vcap/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems.rb:212:in `rescue in try_activate'
    from /home/vcap/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems.rb:209:in `try_activate'
    from /home/vcap/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:59:in `rescue in require'
    from /home/vcap/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /home/vcap/cloudfoundry/vcap/dev_setup/bin/vcap:13:in `<main>' 
```

有没有人有任何想法？坦率地说，这个错误让我感到困惑......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:46:59.140

大约一个小时前解决了一个 gem 冲突，有关此问题的更多信息，请查看[https://github.com/cloudfoundry/vcap/commit/8a513847518f5d4bedc314bcc52b372763d6de3e](https://github.com/cloudfoundry/vcap/commit/8a513847518f5d4bedc314bcc52b372763d6de3e)

# linux - 期望 Interact 一遍又一遍地读取匹配的行而不继续前进

> ID：12558697
> 
> 赞同：0
> 
> 时间：2012-09-24T04:02:46.580
> 
> 标签：linux, ssh, command, tcl, expect

我有以下期望脚本：

*   SSH 到主机
*   如果需要，接受用户的密码
*   一旦 ssh 成功（出现提示），设置环境变量
*   再次返回提示符后，运行程序进行网络测试
*   再次返回提示符后，退出期望并关闭 ssh 会话

```
#!/usr/bin/expect
set hostname [lindex $argv 0]
set working_dir [lindex $argv 1]
set package [lindex $argv 2]
set tcl_test $working_dir/$package.tcl
set config $working_dir/$package.config
set logdir $working_dir/$package
set timeout 30
set prompt "\~\\\]\\\$"

eval spawn ssh $hostname
expect {
    -re "(yes/no)" {send "yes\r"}
    -re "password\:" {      
        interact {
            -o
            -re $prompt {send "export VARIABLE1=$working_dir\"\r"}
            -re $prompt {send "issue-test-command -config $config -module $tcl_test\r"}
        }
    }
} 
```

密码匹配和交互工作正常。一旦 $prompt 匹配，就会发出环境变量导出命令：

```
-re $prompt {send "export VARIABLE1=$working_dir\"\r"} 
```

这是正确的，但不是继续前进：

```
-re $prompt {send "issue-test-command -config $config -module $tcl_test\r"} 
```

读取同一行，再次匹配模式并执行相同的命令。这导致发出相同命令的永久循环。

如何强制交互移动到下一行，或者使用不同的内置期望来实现我所追求的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:18:32.757

想象一下，您正在向某人发出指示：

1.  如果你看到红灯然后停下
2.  如果你看到红灯然后走

如果他们感到困惑，你不会感到惊讶。这就是您对多个`-re $prompt`分支的期望所做的事情。然而，Expect 只接受你告诉它的第一条指令。

尝试这个：

```
 interact {
        -o
        -re $prompt {
            send "export VARIABLE1=\"$working_dir\"\r"
            send "issue-test-command -config $config -module $tcl_test\r"
        }
    } 
```

顺便提一句：

1.  你失踪`exp_continue`后`send "yes\r"`
2.  您在`export`命令上发送了错误数量的双引号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:24:47.963

如果您多次提供相同的模式，则只会执行其中一个关联的手臂。更复杂的事情必须完整地写出来（例如，用一个小的状态机）。

但是我认为您使该代码过于复杂。您真正想要的唯一地方`interact`是一旦您启动了程序，而您可能需要多臂的唯一地方`expect`是在交互中可能会发生多种事情时。让我们写得更简单，但使用`exp_continue`. （我省略了变量的设置……）

```
eval spawn ssh $hostname
# Manage the login sequence, with its optional host check and optional password
# (that's optional in case someone decides to properly set up RSA keys)
expect {
    -ex "(yes/no)" {      # Exact match here
        send "yes\r"
        exp_continue
    }
    -ex "password:" {     # Exact match here
        send "$password\r"
        exp_continue
    }
    -re $prompt {         # RE match here
        # Do nothing; fall out of the expect as we're now logged in...
    }
}

# We're now at a prompt; make things work as desired
send "export VARIABLE1=\"$working_dir\"\r"
expect -re $prompt
send "issue-test-command -config $config -module $tcl_test\r"

# Now we're ready to let the user talk to the program...
interact 
```

# php - 比较每行数据的表字段并采取一些措施 (PHP)

> ID：12558698
> 
> 赞同：1
> 
> 时间：2012-09-24T04:02:55.373
> 
> 标签：php, mysql, row

好吧，我有一个名为“amigos”的表，有 28 个字段（id、number、fecharev.horarev 等）。

如果字段不同，我想比较一些字段并制作和操作：

所以我有这段代码来比较字段：

```
 $c = mysql_pconnect('localhost','root','eagle');

mysql_select_db('controlj_amigos');
 $bit1 = mysql_query("SELECT tamano FROM amigos WHERE id=$id", $c);
 $bit2 = mysql_query("SELECT tamano2 FROM amigos WHERE id=$id", $c);

 $tama1 = mysql_fetch_object($bit1);
$tama2 = mysql_fetch_object($bit2);
$curDate = date("Y-m-d");

$bit11 = mysql_query("SELECT date_actual FROM amigos WHERE id=$id", $c);
$bit12 = mysql_query("SELECT fecharev FROM amigos WHERE id=$id", $c);
$fec1 = mysql_fetch_object($bit11);
$fec2 = mysql_fetch_object($bit12); 
```

我也是这个比较并采取一些行动的代码：

```
 if ($tama1->tamano < $tama2->tamano2 && $fec1->date_actual > $fec2->fecharev)  
    {  

  $query_auto = "UPDATE amigos set fecharev=CURDATE(),horarev=CURTIME(),ince='1' where 
    } 
```

所以，我希望我的表（朋友）的每一行都进行比较（“if ($tama1->tamano < $tama2->tamano2 && $fec1->date_actual > $fec2->fecharev)
{ ") 和ejecute 条件，但我不知道如何。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:19:41.993

利用 while 循环，以便对字段中的每一行进行比较......

使用标志变量...

当条件变为真时...将标志变量设置为某个值...并使用中断...

在while循环之外...检查标志并触发您最后触发的更新查询...

# asynchronous - 访问 getJSON 之外的数据

> ID：12558699
> 
> 赞同：0
> 
> 时间：2012-09-24T04:03:24.000
> 
> 标签：asynchronous, getjson

我被 getJSON 之外的访问/存储数据困住了

```
var arr = new Array();  // an array to store result

$.getJSON(url, function(data) {
    $.each(data.data, function(index, value){
    arr.push(value);
    }

 } 
```

## 需要在这里访问 arr。

我尝试使用 $ajax, async:false（因为这篇文章表明[在 $.getJSON 函数期间设置的变量只能在函数内访问](https://stackoverflow.com/questions/1739800/variables-set-during-getjson-function-only-accessible-within-function)），但仍然没有运气。我知道这个问题已经被问过很多次了，我做了一些搜索，但仍然没有成功。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:06:55.860

为什么不简单：

```
var arr = [];
$.getJSON(url, function(data) {
   arr = data;
}); 
```

您正在获取 JSON 解码生成的数组，然后在循环中分配其值。您可以一次分配整个数组，原样保留原始 json 数组中的键。您的代码仅保留值。

# sql-server - SQL Server 可视化工具

> ID：12558703
> 
> 赞同：-1
> 
> 时间：2012-09-24T04:04:02.120
> 
> 标签：sql-server

我最近搬到了我们使用 SQL Server 的 MS 环境。

我正在努力寻找一种工具，该工具允许通过单击结果视图（例如，从`SELECT`语句中）并直接在那里修改数据而不是编写`UPDATE`语句来更新表。

你能推荐一个工具吗？

推理：编写`UPDATE`语句需要很长时间，特别是如果您连接多个表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:08:10.153

我个人不使用（或推荐），但它内置在 SQL Management Studio 中，只需右键单击表格即可：

![在此处输入图像描述](../Images/878aa31ee81ad61a24c2a71ef05fd4da.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:06:08.133

使用 SQL Server 管理工作室。创建一个新视图并右键单击它并选择修改。见这里：http: [//msdn.microsoft.com/en-us/library/ms180800.aspx](http://msdn.microsoft.com/en-us/library/ms180800.aspx)

# android - 单击列表视图时颜色变化

> ID：12558705
> 
> 赞同：0
> 
> 时间：2012-09-24T04:04:29.570
> 
> 标签：android, listview, colors

我的 android 代码可以通过 onClick 事件将第一个可见列表视图项目的背景颜色更改为绿色，但是当我向下滚动列表视图并尝试单击列表时，绿色不会出现。如何解决这个问题任何帮助将不胜感激。我附上了我的代码片段。

```
 public void onItemClick( AdapterView<?> parent, View item,   
                                  int position, long id) {

     for(int i=0; i<parent.getChildCount(); i++)
           {
               Log.d("TAG", "Number of times printed");
                if(i == position)
                {
                          parent.getChildAt(position).setBackgroundColor(Color.GREEN);
                         // Log.d("TAG","Green at position :: " + position);

                }
                else
                {
                          parent.getChildAt(i).setBackgroundColor(Color.GRAY);
                }
            }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:15:01.120

在 values 文件夹中的 color.xml 文件中定义颜色

在可绘制文件夹 listViewBackground.xml 中使用以下代码制作 xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_focused="true" 
      android:state_pressed="false" 
      android:drawable="@color/grey" />

<item android:state_focused="true" 
      android:state_pressed="true"
      android:drawable="@color/green"

       />

<item android:state_focused="false" 
      android:state_pressed="true"
      android:drawable="@color/green" />

<item android:drawable="@color/grey" /> 
```

并将此文件设置为列表项的背景

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:38:45.640

代替

```
 parent.getChildAt(position).setBackgroundColor(Color.GREEN); 
```

尝试这个

```
 parent.getChildAt(position).setBackgroundColor(R.color.orange); 
```

您需要在 values 文件夹中的 color.xml 中定义您的颜色 - vales/color.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <color name="orange">#e68c10</color>
</resources> 
```

并寻找你的功能尝试使用

```
public void onListItemClick(ListView parent,View v,int position,long id){} 
```

# ruby-on-rails - 仅在 Rails 中禁用英语的 translation_missing

> ID：12558716
> 
> 赞同：2
> 
> 时间：2012-09-24T04:05:52.813
> 
> 标签：ruby-on-rails, localization, internationalization, translation

如果语言是英语，有没有办法防止`.translation_missing`课程出现在视图中？由于英文文本是正确的，我不需要翻译它。

现在，`span.translation_missing`如果语言环境是默认跨度，我添加了样式来掩盖，但如果语言环境是，我宁愿它根本不出现`:en`

**更新：**为了清楚起见，我在`.erb`文件中进行翻译，所以说`<%= t "Menu item" %>`变得`<span class="translation_missing">Menu item<span>`有点矫枉过正。我只需要它为`:en`语言环境保留原始字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:43:19.247

我认为没有办法通过标准方法来做到这一点，但你可以添加这样的补丁：

```
module I18n::MissingTranslation::Base

  def html_message_with_en_fix
    (locale == :en) ? key : html_message_without_en_fix
  end
  alias_method_chain :html_message, :en_fix

  def message_with_en_fix
    (locale == :en) ? key : message_without_en_fix
  end
  alias_method_chain :message, :en_fix

end 
```

或者，如果您不想使用补丁，您也可以定义自己的方法并自己捕获异常：

```
def my_translate(key)
  begin
    I18n.t(key, :raise => I18n::MissingTranslationData)
  rescue I18n::MissingTranslationData
    (I18n.locale == :en) ? key.to_s : I18n.t(key)
  end
end 
```

另请参阅[此答案](https://stackoverflow.com/questions/6027471/how-do-you-rescue-i18nmissingtranslationdata)。

（我已经更新了两个答案以返回翻译字符串，而不是感谢空白/无。）

# python - Python 3.2.3 编程...几乎可以正常工作

> ID：12558717
> 
> 赞同：-1
> 
> 时间：2012-09-24T04:05:59.780
> 
> 标签：python, python-3.x

```
x = float(input("What is/was the cost of the meal?"))
y = float(input("What is/was the sales tax?"))
z = float(input("What percentage tip would you like to leave?"))

print ("Original Food Charge: ${}"
.format(x*1)))
print ("Sales Tax: ${}"
.format((y/100)*x)))
print ("Tip: ${}"
.format(x*(z/100)))
print ("Total Charge For Food: ${}"
.format(x+((y/100)*x)+((z/100)*x)))

error output: 
```

第 10 行，语法错误：.format(x*1))):，第 1017 行

有人告诉我这在 2.6 中有效，但在 3.2.3 中仍然无效

我正在尝试编写一个程序来计算在餐厅购买的一顿饭的总金额。程序应该要求用户输入食品的收费和销售税的百分比。然后程序应该询问用户他们想要留下多少百分比的小费（例如：18%）。最后，程序应显示食品的总费用、食品总费用的销售税（食品总费用 * 销售税率）、膳食小费（食品总费用 * 小费百分比），最后是总费用餐费（食品费+销售税+小费）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:08:40.160

我认为您可能希望在这些输入语句中使用*字符串：*

```
x = float(input("What is/was the cost of the meal?")) 
```

此外，在格式字符串中使用（而不是）*可能*是一个好主意，至少如果您想与 2.7 之前的 Python 保持兼容（尽管在这种情况下，我可能也会使用）。即使*在*2.7 之后，我仍然更喜欢位置说明符，因为它让我更清楚。`{0}``{}``raw_input`

 *这段代码对我来说很好：

```
x = float(input("What is/was the cost of the meal?"))
y = float(input("What is/was the sales tax?"))
z = float(input("What percentage tip would you like to leave?"))

print ("Original Food Charge: ${0}".format(x))
print ("Sales Tax: ${0}".format(y*x))
print ("Tip: ${0}".format(x*z))
print ("Total Charge For Food: ${0}".format(x+(y*x)+(z*x))) 
```

例如：

```
What is/was the cost of the meal?50
What is/was the sales tax?.05
What percentage tip would you like to leave?.1
Original Food Charge: $50.0
Sales Tax: $2.5
Tip: $5.0
Total Charge For Food: $57.5 
```

尽管您可能想明确表示“百分比”应该采用小数格式，以免输入 20 作为小费会使服务员/女服务员*非常*高兴。

或者，您可以除以`y`100`z`将它们从百分比转换为分数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T04:08:10.800

```
input(What is/was the cost of the meal?) 
```

不好。`input()`想要一个*字符串*作为参数。

```
input('What is/was the cost of the meal?') 
```

这将发生在所有这三个方面。python 应该告诉你这些符号没有定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T04:08:18.847

您需要在字符串周围加上引号，例如，`x = float(input("What is/was the cost of the meal?"))` 您还需要阅读[Python 教程](http://docs.python.org/tutorial/)来学习 Python 的基础知识。*

# .net - MSBuild 在指定绝对路径时复制依赖关系，在相对路径时忽略

> ID：12558722
> 
> 赞同：4
> 
> 时间：2012-09-24T04:06:49.497
> 
> 标签：.net, msbuild, msbuild-4.0

我尝试构建`.csproj`引用解决方案中的一些项目。这些参考用 标记`CopyLocal=False`。这是期望的行为。

我使用 MSBuild 为 CI 构建它，所以我通过`/p:OutputPath="some output dir"`. 我还设置`/p:SolutionDir="path to the solution"`正确解析一些 NuGet 引用。

问题是：当我使用输出目录的绝对路径指定 OutputPath（如`d:\solution\build\buildgroupsubfolder`）时，MSBuild 将每个依赖项复制到输出目录中，我不知道它为什么这样做。如果我使用相对路径（如`..\..\..\..\..\build\buildgroupsubfolder`）指定输出路径，则 MSBuild 会正确处理`CopyLocal=false`并且不会复制对输出目录的引用。

我们的解决方案中有一些嵌套，项目分为组，因此我们希望将它们构建到子文件夹中。而且我希望能够指定相对于基本构建路径而不是项目本身路径的构建路径。

为什么 MSBuild 在指定绝对路径时忽略 CopyLocal=false 并在指定相对路径时正确对待它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T16:37:51.353

好吧，我已经深入挖掘了。我发现 MSBuild 行为不端，但不是我曾经想过的地方。

正如我在问题中描述的那样，我认为 MSBuild 的行为不正确。`CopyLocal=false`如果我设置`OutputDir`为相对路径，它确实会按原样处理。如果我设置`OutputDir`为绝对路径，它就会行为不端。我在 MSDN 中找到了答案：

> OutputPath - 指定输出目录的路径，**相对于项目目录**，例如“bin\Debug”。

所以事实上，当我设置为绝对路径时，MSBuild 应该警告我甚至失败`OutputPath`，但事实并非如此。这就是为什么我的印象是绝对路径是可以的，并且存在`CopyLocal`处理错误。实际的错误是 MSBuild 在它应该失败时工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:29:57.580

在将我的项目和 MSBuild 从 Visual Studio 2005 切换到 Visual Studio 2010 后，我遇到了同样的问题。但是，我想避免使用相对路径，所以我改用 .NET 中的新 Web 发布管道 (WPP) 4.0 通过将以下内容添加到我的 MSBuild 命令行：

```
/p:UseWPP_CopyWebApplication=True /p:PipelineDependsOnBuild=False 
```

现在输出恢复正常，并且仍然可以在我的输出目录中使用绝对路径。

# c - 如何并行比较两个以上的数字？

> ID：12558729
> 
> 赞同：6
> 
> 时间：2012-09-24T04:07:45.687
> 
> 标签：c, algorithm, parallel-processing, sse, sse4

是否可以使用 SSE4 在一条指令中比较多个数字？

[英特尔参考](http://software.intel.com/sites/default/files/m/9/4/2/d/5/17971-intel_20sse4_20programming_20reference.pdf)说以下关于 PCMPGTQ

> PCMPGTQ - 比较打包数据是否大于
> 
> 对目标操作数（第一个操作数）和源操作数（第二个操作数）中的压缩四字执行 SIMD 比较。如果第一个（目标）操作数中的数据元素大于第二个（源）操作数中的对应元素，则将目标中对应的数据元素设置为全1；否则，设置为 0。

这并不是我真正想要的，因为我希望能够确定向量中哪些整数更大，哪些更小。

例如，如果我需要比较

```
32 with 45
13 with 78
44 with 12
99 with 66 
```

我打算放入`[32, 13, 44, 99]`一个向量和`[45, 78, 12, 66]`另一个向量，并在一条指令中使用 SSE4 比较它们，并得到`[0, 0, 1, 1]`结果（0 - 更少，1 - 更大）

但这似乎不是 PCMPGTQ 所做的。有关如何在此级别使用并行性来加速此比较的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T04:12:34.883

我相信这实际上是`PCMPGT`运营商家族所做的。后缀指定元素的大小 -`B`对于 8 位元素、`W`对于 16 位元素、`D`对于 32 位元素、`Q`对于 64 位元素。因此，如果您想一次比较 4 个 32 位数字，请使用`PCMPGTD`128 位向量参数。有关这些操作码的伪代码描述，请参阅[此页面](http://www.rz.uni-karlsruhe.de/rz/docs/VTune/reference/vc232.htm)。

但是，他们不只写`1`or `0`；他们为每个元素写入全一或全零，以便`0x1234567887654321`与`0x8765432112345678`using进行比较`PCMPGTB`应该给出`0x0000FFFFFFFF0000`.

[这份英特尔白皮书](http://www.intel.in/content/dam/www/public/us/en/documents/white-papers/ia-32-64-assembly-lang-paper.pdf)给出了一个使用向量操作执行操作`a[i] = (a[i] > b[i]) ? a[i] : b[i]`（即）的简洁示例。`a[i] = max(a[i], b[i])`

# c# - 为什么不能正确显示 listBox1_SelectedIndexChanged

> ID：12558730
> 
> 赞同：0
> 
> 时间：2012-09-24T04:07:50.080
> 
> 标签：c#, user-interface, listbox, selectedindexchanged

第一个问题是如何让文本框显示列表框中所选员工的所有工资单信息，我不知道如何显示 HourlyWage、Hours 和 Salary。其次，我希望计算薪酬按钮在 ListBox 控件中显示当前选定员工的薪水。我不确定我的代码有什么问题以及为什么它没有显示。

```
namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    // create list
    private List<Employee> payroll;

    private int count = 0;
    private int SIZE = 0;
    public Form1()
    {
        InitializeComponent();

        payroll = new List<Employee>(SIZE);

        // Create some employee objects
        payroll.Add(new Hourly(1, "H. Potter", "Privet Drive", "201-9090", 40, 12.00));
        payroll.Add(new Salaried(2, "A. Dumbledore", "Hogewarts", "803-1230", 1200));
        payroll.Add(new Hourly(3, "R. Weasley", "The Burrow", "892-2000", 40, 10.00));
        payroll.Add(new Salaried(4, "R. Hagrid", "Hogwarts", "910-8765", 1000));

        foreach (Employee emp in payroll)
            employeeListBox.Items.Add(emp.Name);

    }

    private void buttonCalcPay_Click(object sender, EventArgs e)
    {
        textBoxCheck.Clear();
        int index = count;

        if (index < SIZE)
        {
            //The Compute Pay Button: When this button is clicked, display a 
            //paycheck for the currently selected employee in the ListBox 
            //control.

            string ostring = ("Fluffshuffle Electronics               check no.");
            ostring += string.Format("{0}", index);
            ostring += Environment.NewLine;
            ostring += Environment.NewLine;
            ostring += "       pay to the order of";
            ostring += payroll[index].Name;
            ostring += Environment.NewLine;
            ostring += "       ";
            ostring += string.Format("{0:C}", payroll[index].CalcPay());
            ostring += Environment.NewLine;
            ostring += Environment.NewLine;
            ostring += "             First National Bank";
            textBoxCheck.Text = ostring;

            textBoxName.Text = payroll[index].Name;
            textBoxAddress.Text = payroll[index].Address;
            textBoxPhone.Text = payroll[index].PhoneNum;
            textBoxEmpNum.Text = string.Format("{0}", payroll[index].EmpNum);

            //index++;
            //see if object is hourly
            Hourly someEmp1 = payroll[index] as Hourly;
            if (someEmp1 != null)
            {
                textBoxHours.Text = string.Format("{0:F2}", someEmp1.HoursWorked);
                textBoxHourlyWage.Text = string.Format("{0:F2}", someEmp1.HourlyWage);
                textBoxSalary.Clear();

            }
            //not hourly, must be salary
            Salaried someEmp2 = payroll[index] as Salaried;
            if (someEmp2 != null)
            {
                textBoxHours.Clear();
                textBoxHourlyWage.Clear();
                textBoxSalary.Text = string.Format("{0:F2}", someEmp2.Salary);

            }

            else
            {
                buttonCalcPay.Enabled = false;
                textBoxName.Clear();
                textBoxAddress.Clear();
                textBoxEmpNum.Clear();
                textBoxPhone.Clear();
                textBoxHours.Clear();
                textBoxHourlyWage.Clear();
                textBoxSalary.Clear();
                count = 0;
            }

        } count++;
    }
    private void textBoxCheck_TextChanged(object sender, EventArgs e)
    {

    }

    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        textBoxName.Text = payroll[employeeListBox.SelectedIndex].Name;
        textBoxAddress.Text = payroll[employeeListBox.SelectedIndex].Address;
        textBoxEmpNum.Text = string.Format("(0)",payroll[employeeListBox.SelectedIndex].EmpNum);
        textBoxPhone.Text = payroll[employeeListBox.SelectedIndex].PhoneNum;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:08:00.413

只需运行此代码，它就可以工作。我做了一些细微的修改（并简化了您的 Employee 对象以获得更快的结果）。

我更改了您将项目分配给列表框的方式并`DataSource`改为使用`DisplayMember`。`DataSource`自动将您的集合绑定到列表框，并`DisplayMember`告诉它使用哪个属性进行显示。这也意味着 the`SelectedItem`实际上是`Employee`您可以使用的对象。

此外，我更改了您处理活动中选定项目的方式。不需要直接使用数组和索引，它只会让人感到困惑。您可以使用`sender`事件的参数来了解谁触发了列表框更改事件。

```
 // create list
    private List<Employee> payroll;

    public Form1()
    {
        InitializeComponent();

        payroll = new List<Employee>();

        // Create some employee objects
        payroll.Add(new Employee(1, "H. Potter", "Privet Drive", "201-9090"));
        payroll.Add(new Employee(2, "A. Dumbledore", "Hogewarts", "803-1230"));
        payroll.Add(new Employee(3, "R. Weasley", "The Burrow", "892-2000"));
        payroll.Add(new Employee(4, "R. Hagrid", "Hogwarts", "910-8765"));

        employeeListBox.DataSource = payroll;
        employeeListBox.DisplayMember = "Name";

    }

    private void employeeListBox_SelectedIndexChanged(object sender, EventArgs e)
    {
        Employee selectedEmployee = ((sender as ListBox).SelectedItem as Employee);
        txtAddress.Text = selectedEmployee.Address;
        txtName.Text = selectedEmployee.Name;
        txtPhone.Text = selectedEmployee.PhoneNum;
    }

    private void btnCalc_Click(object sender, EventArgs e)
    {
        Employee selectedEmployee = (employeeListBox.SelectedItem as Employee);

        // Do calculations here...
    } 
```

# node.js - 手写笔、NodeJS 和 Nodemon

> ID：12558737
> 
> 赞同：0
> 
> 时间：2012-09-24T04:08:19.120
> 
> 标签：node.js, stylus

我在我的 nodejs 应用程序中使用手写笔（不是 express，只是普通节点）。我还使用[nodemon](https://github.com/remy/nodemon)来监视更改并在不重新启动我的应用程序的情况下应用它们。我有一个运行我的应用程序的小 sh 脚本：

```
#!/bin/sh

if [ -f style/*styl ]; then
  echo "Building *styl..."
  node_modules/stylus/bin/stylus -c style/*styl
fi
echo "Running src/app/index.js..."
nodemon src/index.js 
```

如您所见，如果在运行应用程序之前找到了手写笔，脚本会将其编译为 css。这是编译手写笔样式的正确方法吗？或者我应该在我的代码中使用 js 库吗？

此外，由于它是在运行应用程序之前编译的，因此更改 *styl 显然不会在不重新启动应用程序的情况下反映出来。

有什么办法可以做到这一点？更改文件时设置手写笔编译而不重新启动应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T04:44:05.603

当您运行`express`二进制文件时，它会为您引导一个 Node.js / Express 应用程序。在其`app.js`Stylus 中被引用并作为中间件激活。

在这种情况下配置 Stylus 的方式会导致`.styl`文件在更改后自动（！）重新编译为`.css`文件。

所以不需要手动做任何事情。

PS：[Stylus 和 Express - 样式表在修改时不会重新编译](https://stackoverflow.com/questions/5612777/stylus-and-express-stylesheets-are-not-re-compiled-when-modified)，您可能会感兴趣。

# asp.net-mvc - 如何对 global.asax 文件进行单元测试？

> ID：12558739
> 
> 赞同：-3
> 
> 时间：2012-09-24T04:08:38.600
> 
> 标签：asp.net-mvc, unit-testing

在我的应用程序中，一些变量在应用程序启动时被初始化 .ie 在 global.aspx 文件中

```
Application_start() 
{
    //velocityhelper.TemplateLocatio is static class.
    VelocityHelper.TemplateLocation = ConfigurationHelper.ContentLocation + "/"
        + ConfigurationHelper.CultureId + "/" + "Templates/";    
} 
```

当我们访问 templatelocation 变量时，它将始终返回 null。你能告诉我如何初始化这个模板位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:25:47.583

您无法对 Global.asax 中的代码进行单元测试，因为您需要一个 HttpApplication 才能执行它。另一方面，您可以做的是将此代码放在一个单独的方法中，然后对该方法进行单元测试。

# mongodb - 使用 Go 检索 MongoDB 文档的问题

> ID：12558741
> 
> 赞同：3
> 
> 时间：2012-09-24T04:09:25.317
> 
> 标签：mongodb, go, mgo

我有以下代码，但我不确定为什么它没有返回一片 Notes。我正在使用来自 labix.org 的 mgo 库连接到 MongoDB 并遵循他们的在线文档。

```
type Note struct {
    Url string
    Title string
    Date string
    Body string
}

func loadNotes() ([]Note) {
    session, err := mgo.Dial("localhost")
    if err != nil {
            panic(err)
    }
    defer session.Close()

    // Optional. Switch the session to a monotonic behavior.
    session.SetMode(mgo.Monotonic, true)

    c := session.DB("test").C("notes")

    notes := []Note{}
    iter := c.Find(nil).Limit(100).Iter()
    err = iter.All(&notes)
    if err != nil {
        panic(iter.Err())
    }

    return notes
}

func main() {
    notes := loadNotes()
    for note := range notes {
        fmt.Println(note.Title)
    }
} 
```

如果我只是打印出来，`notes`我会得到看起来像两个结构的切片，但我无法通过`notes.Title`类似的方式访问它们。

```
[{ Some example title 20 September 2012 Some example content}] 
```

这是我的文件的样子：

```
> db.notes.find()
{ "_id" : "some-example-title", "title" : "Some example title", "date" : "20 September 2012", "body" : "Some example content" } 
```

真正的问题是它将笔记作为一大片而不是`Note{}`（我认为？）

如果我做的事情明显错误，任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T16:17:51.253

你的问题在这里：

```
for note := range notes {
    fmt.Println(note.Title)
} 
```

它应该是：

```
for _, note := range notes {
    fmt.Println(note.Title)
} 
```

在切片上使用范围语句会返回形式对`i, v`，其中 i 是切片中的索引，v 是该切片中索引处的项目。由于您省略了第二个值，因此您循环的是索引，而不是`Note`值。

它在规范的 RangeClause 部分：http: [//golang.org/ref/spec#RangeClause](http://golang.org/ref/spec#RangeClause)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:27:20.060

看起来它对我有用。notes 是您指出的一部分结构。

```
for _, n := range notes {
  n.Title // do something with title
  n.Url // do something with url
} 
```

或者，如果您只想要第一个： `notes[0].Title`应该也可以。

结构切片不能像结构本身一样被索引，因为它不是结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:17:54.233

iter.All() 一次将整个结果集检索到一个切片中。如果您只想要一行，请使用 iter.Next()。见[https://groups.google.com/forum/#!msg/mgo-users/yUGZi70ik9Y/J8ktshJgF7QJ](https://groups.google.com/forum/#!msg/mgo-users/yUGZi70ik9Y/J8ktshJgF7QJ)

# c# - WebView 中的 Windows 8 Metro Print 嵌入式网页

> ID：12558743
> 
> 赞同：2
> 
> 时间：2012-09-24T04:09:41.953
> 
> 标签：c#, xaml, printing, microsoft-metro

在 Windows 8 Metro 中，我想打印托管在 WebView 控件中的网页。WebView 控件是否有我可以指向的文档以调用打印？

我希望用户能够通过单击在控件中嵌入网页的 Metro 应用程序上的打印按钮来打印网页。

提前致谢。

# ruby-on-rails - 如何将 config.ru 添加到我的 gem 中？

> ID：12558746
> 
> 赞同：0
> 
> 时间：2012-09-24T04:10:21.883
> 
> 标签：ruby-on-rails, ruby, rubygems, gem

我正在编写一个需要 config.ru 文件才能启动 sinatra 应用程序的 gem。我的可执行文件已安装，但当我查看我的 gem 的存储速度时未安装 config.ru。这是我的宝石的结构

```
gemservice
|-- bin
|  |-- gemservice
|-- lib
|  |-- gemservice
|  |  |-- version.rb  
|  |-- gemservice.rb
|  |-- config.ru
|-- Gemfile
|-- gemservice.gemspec
|-- Rakefile

$ gem env

RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-darwin11.4.0]
  - INSTALLATION DIRECTORY: /Users/Armanm/.rvm/gems/ruby-1.9.3-p194
  - RUBY EXECUTABLE: /Users/Armanm/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
  - EXECUTABLE DIRECTORY: /Users/Armanm/.rvm/gems/ruby-1.9.3-p194/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-darwin-11
  - GEM PATHS:
     - /Users/Armanm/.rvm/gems/ruby-1.9.3-p194
     - /Users/Armanm/.rvm/gems/ruby-1.9.3-p194@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

安装 gem 后没有 config.ru 文件的迹象（使用`rake install`命令）

```
$ ls -la /Users/Armanm/.rvm/gems/ruby-1.9.3-p194/gems/gemservice-0.0.1/lib/

total 8
drwxr-xr-x   4 Armanm  staff  136 24 Sep 13:52 .
drwxr-xr-x  10 Armanm  staff  340 24 Sep 13:52 ..
drwxr-xr-x   3 Armanm  staff  102 24 Sep 13:52 gemservice
-rw-r--r--   1 Armanm  staff  124 24 Sep 13:52 gemservice.rb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:36:14.767

好的，这是一个新手问题，它有一个新手答案。

所以我发现了在 gemsepc 文件中列出的文件最终被打包到 gem 中的困难方式。更具体地说，这段代码是做什么的：

```
Gem::Specification.new do |gem|
  ...    

  gem.files = `git ls-files`.split($\)

  ...
end 
```

它使用 git 填充构建 gem 时需要打包的文件。因此，确保包含我的 config.ru 文件的方法是确保 git 使用`git add lib/config.ru`. 将文件添加到 git 后，它就会包含在我的 gem 中。

# objective-c - Launch Daemon 可以运行哪些类型的文件？

> ID：12558751
> 
> 赞同：1
> 
> 时间：2012-09-24T04:11:03.257
> 
> 标签：objective-c, macos, cocoa, launchd

我正在尝试`SMJobSubmit`从普通桌面应用程序中启动我在 Xcode 中制作的 Unix 可执行文件。（GUI 部分应该调用命令行帮助工具。）

这是我用来尝试提交工作的代码。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [authView setString:kSMRightModifySystemDaemons];
    [authView setAutoupdate:YES];
    [authView setDelegate:self];
}

- (IBAction)pressedButton:(id)sender
{
    /*
      authView is an instance of SFAuthorizationView. At this point, the user
      already clicked the padlock and entered his password.
    */
    authRef = [[authView authorization] authorizationRef];

    //toolPath points to the file in the app's Resource folder.
    NSArray* call = [NSArray arrayWithObject:toolPath];

    NSDictionary* jobSpec = [NSDictionary dictionaryWithObjectsAndKeys:
                             call, @"ProgramArguments",
                             jobLabel, @"Label",
                             [NSNumber numberWithBool:YES], @"RunAtLoad",
                             nil];

    CFErrorRef submitError = nil;
    BOOL submitResult = SMJobSubmit(kSMDomainSystemLaunchd,
                                    (__bridge CFDictionaryRef)(jobSpec),
                                    authRef,
                                    &submitError);

    if(!submitResult)
    {
        NSLog(@"Job submit failed. %@", submitError);
        return;
    }
} 
```

`submitResult`总是结果是`true`，但我的程序似乎永远不会执行。我已经通过终端手动执行了我的程序，它运行良好；帮助工具应该将文件写入文件系统上的某个位置并且不带任何参数。但是，当我将它发送到启动守护程序时，什么也没有发生。它被标记为可执行。我也验证了路径。这是正确的。

那么，我想知道启动守护程序是否只能运行某些类型的文件？除非我在代码中搞砸了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:40:47.050

您创建的授权参考应该有权`kSMRightModifySystemDaemons`使用 launchd 运行可执行文件。

通过使用

`[authview SetAuthorizationRights:kSMRightModifySystemDaemons]`

之前的声明

`authRef = [[authView authorization] authorizationRef];`

事情应该工作。您可能需要包含`<ServiceManagement/ServiceManagement.h>`的定义`kSMRightModifySystemDaemons`。

# objective-c - iOS 6 地图 - 没有动画 PIN 下降

> ID：12558753
> 
> 赞同：2
> 
> 时间：2012-09-24T04:11:09.443
> 
> 标签：objective-c, mkmapview, mkannotation, mkpinannotationview, viewdidappear

我创建了一个自定义的 MKAnnotation 类并且它一直在工作——直到 iOS 6 出现。从那时起，我的图钉被添加到苹果地图中，但现在没有放置动画！这是它的设置方式还是我做事的方式可能存在问题。在调用将注释添加到地图的方法之前，我设置了 1 秒的延迟，因此我可以查看放置动画是否在视图出现之前实际发生 - 尽管如此，引脚只是突然出现而没有掉落。这是我正在使用的代码：

```
-(MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(Annotation*)annotation
{
    NSLog(@"the annotation ID is: %@", annotation.ID);
    MKPinAnnotationView *MyPin=[[MKPinAnnotationView alloc] initWithAnnotation:annotation   reuseIdentifier:@"current"];

    UIButton *goToObjectButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    [goToObjectButton addTarget:self action:@selector(goToObjectClick:)  forControlEvents:UIControlEventTouchUpInside];

    MyPin.pinColor = MKPinAnnotationColorRed;
    MyPin.rightCalloutAccessoryView = goToObjectButton;
    MyPin.draggable = NO;
    MyPin.highlighted = YES;
    MyPin.animatesDrop=YES;
    MyPin.canShowCallout = YES;

    return MyPin;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:22:53.017

我还发现，在 iOS6 中，MKMapView 上显示的顺序/时间发生了变化。我曾经在 viewDidLoad 中将我的注释添加到地图中，这在 iOS5 中运行良好，但在 iOS6 中，引脚不会掉落，它们只是出现。我现在已将代码移至 viewDidAppear 并且图钉现在为上方的水滴设置动画。然而，它们都同时下降，而不是像在 iOS5 中那样单独下降。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-16T12:09:40.863

MkMappin 下拉弹跳动画作品 - Prem Kumar（iOS 开发者）

```
-(void)addPinWithTitle:(NSString *)title AndCoordinate:(NSString     *)strCoordinate
{
MKPointAnnotation *mapPin = [[MKPointAnnotation alloc] init];
// clear out any white space
strCoordinate = [strCoordinate stringByReplacingOccurrencesOfString:@" " withString:@""];
// convert string into actual latitude and longitude values
NSArray *components = [strCoordinate componentsSeparatedByString:@","];
double latitude = [components[0] doubleValue];
double longitude = [components[1] doubleValue];

// setup the map pin with all data and add to map view
CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(latitude, longitude);

mapPin.title = [title valueForKey:@"restaurantBranchName"];
mapPin.coordinate = coordinate;
[locationMapView addAnnotation:mapPin];
}
- (MKAnnotationView *)mapView:(MKMapView *)mapview viewForAnnotation:(id <MKAnnotation>)annotation
{
if ([annotation isKindOfClass:[MKUserLocation class]])
    return nil;
static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
MKAnnotationView *annotationView = [locationMapView dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];
if(annotationView)
    return annotationView;
else
{
    MKAnnotationView *annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation
                                                                    reuseIdentifier:AnnotationIdentifier];
    annotationView.canShowCallout = YES;
    UIImage *img = [UIImage imageNamed:@"orange_restaurant"];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:img];
    imageView.frame=CGRectMake(0, 0, 40, 40);
    imageView.contentMode=UIViewContentModeScaleAspectFit;
    imageView.center = annotationView.center;
    [annotationView addSubview:imageView];

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];
    annotationView.rightCalloutAccessoryView = rightButton;

    UIView *rightView=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 30, 30)];
    rightView.backgroundColor=ThemeColor;
    rightView.layer.cornerRadius=rightView.frame.size.width/2;
    annotationView.leftCalloutAccessoryView=rightView;

    annotationView.canShowCallout = YES;
    annotationView.draggable = YES;
    return annotationView;
}
return nil; 
```

}

```
- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views {
MKAnnotationView *aV;

for (aV in views) {
    // Don't pin drop if annotation is user location
    if ([aV.annotation isKindOfClass:[MKUserLocation class]]) {
        continue;
    }
    // Check if current annotation is inside visible map rect, else go to next one
    MKMapPoint point =  MKMapPointForCoordinate(aV.annotation.coordinate);
    if (!MKMapRectContainsPoint(mapView.visibleMapRect, point)) {
        continue;
    }

    CGRect endFrame = aV.frame;
    aV.frame = CGRectMake(aV.frame.origin.x, aV.frame.origin.y - self.view.frame.size.height, aV.frame.size.width, aV.frame.size.height);
    [UIView animateWithDuration:0.5 delay:0.04*[views indexOfObject:aV] options: UIViewAnimationOptionCurveLinear animations:^{

        aV.frame = endFrame;

    }completion:^(BOOL finished){
        if (finished) {
            [UIView animateWithDuration:0.5 animations:^{
                aV.frame = CGRectMake(aV.frame.origin.x, aV.frame.origin.y - self.view.frame.size.height/6, aV.frame.size.width, aV.frame.size.height);
            }completion:^(BOOL finished){
                if (finished) {
                    [UIView animateWithDuration:0.5 animations:^{
                        aV.frame = endFrame;
                    }];
                }
            }];
        }
    }];
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T17:48:38.817

似乎在 iOS 6 中使用新的 Apple MapKit，将注释添加到 MKMapView 的顺序发生了一些变化。

（在我自己的情况下，我曾经添加注释，然后在 iOS 6 之后和之前立即设置地图视图的委托，注释直到运行周期的后期才出现，但现在他们尝试立即添加。）

因此，这可能是一个问题，要么是在连接代理之前添加注释，要么你太早添加注释而没有看到动画。有关何时创建 MKMapView（假设您是在代码中而不是在 .xib 中）以及何时添加注释的更多代码示例可能有助于澄清问题所在。

# javascript - 渲染顺序（EffectComposer？还是 Z-Buffers？）

> ID：12558755
> 
> 赞同：0
> 
> 时间：2012-09-24T04:11:26.270
> 
> 标签：javascript, three.js

我正在使用 Three.js（即一堆节点和互连线）构建网络图。我正在尝试设置它，以便线条总是出现在节点（它们是 Sprites）后面，但我遇到了很多麻烦。

我尝试设置 renderer.sortObjects = false ，然后在节点之前创建行，但它似乎没有用。我也尝试过使用多个渲染器和 EffectComposer，但仍然没有破解它。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:33:35.660

With just one scene, you can set the depthWrite to false in the lines material and lines.renderDepth = 1

# javascript - 如何将所有表单数据的页面内容保存为 HTML 文件

> ID：12558756
> 
> 赞同：1
> 
> 时间：2012-09-24T04:11:25.730
> 
> 标签：javascript, html, browser

在页面源已经下载到客户端*之后*，有没有办法将页面保存到 HTML 文件中，将客户端输入的文本保存到表单字段中 ？有没有办法在客户端完全做到这一点？

例如，在 Chrome 中，只有在加载文档时输入的文本才会保存到 HTML 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:05:46.313

我的理解是您正试图以 HTML 文件的形式在客户端上缓存您的页面。出于安全原因，浏览器确实为您的页面提供对文件系统的直接访问，但它们允许您访问`cookie`存储。如果您希望表单数据在同一台机器的页面加载之间保持不变，我建议您将表单数据保存在 cookie 中。然后在加载时执行检查，`cookie`如果存在则从那里加载表单数据。

# svg - 创建一个 SVG，其中除了文本之外的所有内容都可以缩放

> ID：12558757
> 
> 赞同：11
> 
> 时间：2012-09-24T04:11:48.187
> 
> 标签：svg

为了说明我所追求的效果，假设我们垂直缩放图像：

前：

![示例 1](../Images/3ac06bff8c099e9dfd0cd49be36347e7.png)

后：

![示例 2](../Images/8dac333caa5b20036d0964eeff8b0341.png)

请注意，文本不会扭曲。我正在寻找一种更简单的替代方法，以在每次比例更改时手动绘制和定位元素，特别是在文本保持相同尺寸的情况下，我认为 svg 可以解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-26T14:46:04.457

这个问题已经很久没有提出来了。我认为没有 JavaScript 是不可能的。如果您在使用 JavaScript 方面没有问题，请使用此插件。该插件获取具有特定类的所有 svg 元素，并在每个元素上创建一个转换矩阵：

此插件要求 svg 具有 viewBox 选项。这是一个起点，您可以根据自己的需要进行调整；）

```
(function($){

    var defaults = {

        class: "no-scale"

    }

    var methods = {

        //---Init method
        init: function(){

            //---Conform the settings
            var settings = $.extend({}, defaults);

            return this.each(function(index){

                //---Get the SVG
                var svg = $(this);

                //---Get the viewBox (svgRect)
                var viewBox = (svg[0].viewBox == undefined) ? false : svg[0].viewBox.animVal;

                //---Store the data
                svg.data({"viewBox": viewBox, settings: settings});

                //---Call to private function of resize elements
                private.updateSizes(svg);

            });

        },

        refresh: function(){

            return this.each(function(index){

                //---Get the SVG
                var svg = $(this);

                //---Call to private function of resize elements
                private.updateSizes(svg);

            });

        }

    };

    var private = {

       updateSizes: function(svg){

           //---Get the viewBox (svgRect)
           var viewBox = svg.data("viewBox");

           if(!viewBox) return;

           //---Get the settings
           var settings = svg.data("settings");

           //---Global scale
           var scalew = Math.round((svg.width() / viewBox.width) * 100) / 100;
           var scaleh = Math.round((svg.height() / viewBox.height) * 100) / 100;

           //---Get the resized elements
           var noScaleElements = svg.find("." + settings.class);

           noScaleElements.each(function(){

               var el = $(this);

               //---Set variables
               var sw = el.width();
               var sh = el.height();
               var sx = Math.round((1 / scalew) * 100) / 100;
               var sy = Math.round((1 / scaleh) * 100) / 100;
               var tx = Number( el.attr("x") ) * (1 - sx) + ((sw - sw * sx) / 2) * sx;
               var ty = Number( el.attr("y") ) * (1 - sy) + ((sh * sy - sh) / 2) * sy;

               var matrix = "matrix(" + sx + ",0,0," + sy + "," + tx + "," + ty + ")";

               $(this).attr("transform",  matrix);

           });

       }

    };

    $.fn.noScaleSVGElements = function(method){

        // Method calling logic
        if (methods[method] ) {

            return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));

        } else if ( typeof method === 'object' || ! method ) {

            return methods.init.apply( this, arguments );

        } else {

            $.error( 'Method ' +  method + ' does not exist on jQuery.noScaleSVGElements' );

        }

    }

})(jQuery); 
```

要使用插件：

```
//---Code
$("#svg-element").noScaleSVGElements();

//---Call this method every time that the sizes need to be recalculated
$("#svg-element").noScaleSVGElements("refresh"); 
```

[jsfiddle](http://jsfiddle.net/elchininet/phvenmhc/)

# c++ - C++ 模板：按名称调用变量的模板

> ID：12558758
> 
> 赞同：2
> 
> 时间：2012-09-24T04:12:07.733
> 
> 标签：c++, templates, boost, shared-ptr

这个问题是前面一个问题的延续：[如何模板化变量名称，而不是类型？](https://stackoverflow.com/questions/3942426/how-to-templateize-variable-names-not-types)

假设有以下代码：

```
struct VAR_TYPE{
public:
    bool is_fixed; 
    double value;      // Numerical value
    std::string name;  // Description of variable (to identify it by name)
    int reference_counter;
    /* ect. */
};

struct NODE{
public:
    VAR_TYPE X, Y, Z;
    /* ect. */
};

class MyClass{
public:
    std::vector <NODE_ptr> node;  // shared ptr, using boost::shared_ptr

    // what I have now
    void set_variable_X(int &i, double &P) { node[i]->X.value = P; }
    void set_variable_Y(int &i, double &P) { node[i]->Y.value = P; } 
    void set_variable_Z(int &i, double &P) { node[i]->Z.value = P; }

    // What I want to replace all 3 members with:
    <class T, class N>
    void set_variable( int &i, double &P, /* ??? */ ) { /* ??? */ }
    /* ect. */
}; 
```

我不确定在“？？？”的地方会发生什么 是写的。借用上述链接中使用的伪代码，我想对一些影响

```
main(){
    MyClass S;
    double x1, y1, z1;
    int index; 

    // set x1, y1, z1, index

    S.set_variable( index, x1, &MyClass::node::X ); // in essence, what I want
    S.set_variable( index, y1, &MyClass::node::Y );
    S.set_variable( index, z1, &MyClass::node::Z );
}; 
```

我尝试了一些想法，但错误很糟糕。我认为问题在于我使用的是 boost 共享指针和/或 std::vector。任何人都知道问题和合适的解决方案是什么？我一直在使用的一个选项是（但它不使用我在上面的 int main() 中确定的调用约定）：

```
template < class T, class N >
void MyClass::set_reference( int &i, double &P,  
                         T NODE::* MemPtr,
                         N VAR_TYPE::* ValPtr)
{
    *MemPtr[i].*ValPtr.value = P; // doesn't work work
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:59:51.847

以下是您似乎想要的：

```
#include <string>
#include <vector>
struct VAR_TYPE{
public:
    bool is_fixed; 
    double value;      // Numerical value
    std::string name;  // Description of variable (to identify it by name)
    int reference_counter;
    /* ect. */
};

struct NODE{
public:
    VAR_TYPE X, Y, Z;
    /* ect. */
};

class MyClass{
public:
    std::vector <NODE *> node;  // shared ptr, using boost::shared_ptr

    // what I have now
    void set_variable_X(int &i, double &P) { node[i]->X.value = P; }
    void set_variable_Y(int &i, double &P) { node[i]->Y.value = P; } 
    void set_variable_Z(int &i, double &P) { node[i]->Z.value = P; }

    // What I want to replace all 3 members with:
    void set_variable( int &i, double &P, VAR_TYPE NODE::* ptr ) { (node[i]->*ptr).value = P;}
    /* ect. */
};

main(){
    MyClass S;
    double x1, y1, z1;
    int index; 

    // set x1, y1, z1, index

    S.set_variable( index, x1, &NODE::X ); // in essence, what I want
    S.set_variable( index, y1, &NODE::Y );
    S.set_variable( index, z1, &NODE::Z );
} 
```

虽然我不明白“按名称调用变量的模板”是什么意思。顺便说一句，没有任何理由通过参考`i`，`P`你不应该这样做。

# perl - Perl：浏览网站，填写表格并启动浏览器（不提交）

> ID：12558762
> 
> 赞同：1
> 
> 时间：2012-09-24T04:12:57.430
> 
> 标签：perl

我正在寻找访问网站的 perl 代码，浏览几个链接，填写表格然后提交。但是，我想在 IE 中使用已填写的表单启动页面，以便在实际提交之前准确查看提交的内容（并进行完整性检查，也许更改几个词）。

我意识到 mechanize 可用于创建表单并自动提交它 - 但我被困在如何“在浏览器中启动填写好的表单网页”部分。任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:58:09.087

看一下

*   [LWP::简单](https://metacpan.org/module/LWP%3a%3aSimple)
*   [HTTP::请求](https://metacpan.org/module/HTTP%3a%3aRequest)
*   [HTTP::Request::Form](https://metacpan.org/module/HTTP%3a%3aRequest%3a%3aForm)
*   [HTML::TreeBuilder](https://metacpan.org/module/HTML%3a%3aTreeBuilder)
*   [万维网::机械化](https://metacpan.org/module/WWW%3a%3aMechanize)
*   [万维网::机械化::火狐](https://metacpan.org/module/WWW%3a%3aMechanize%3a%3aFirefox)
*   [万维网::脚本](http://search.cpan.org/~sprout/WWW-Scripter-0.029/lib/WWW/Scripter.pod)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:08:09.160

您可以尝试使用`Win32::OLE`启动 IE: [Controlling Internet Explorer Using Win32::OLE](http://www.drdobbs.com/web-development/controlling-internet-explorer-using-win3/184416120)。

`WWW::Mechanize::Firefox`应该能够在 Firefox 中执行此操作，但您需要安装`mozrepl`扩展程序。

# java - 使用 Java DOM Parser 在 XML NODE 中创建换行符

> ID：12558763
> 
> 赞同：0
> 
> 时间：2012-09-24T04:12:58.997
> 
> 标签：java, xml, dom, xsd

我正在使用 Java DOM 创建动态 XML 文档。请在下面找到相应的代码

```
Element cond = doc.createElement("condition");
Text value = doc.createTextNode("simulation/sim-time-sec  ge  0.25 \r\n\r\n dss");
cond.appendChild(value);
event.appendChild(cond); 
```

上面的代码结果

```
<condition>simulation/sim-time-sec ge 0.25 dss</condition> 
```

但我想要像下面这样的节点

```
<condition>
 simulation/sim-time-sec ge 0.25
 dss
</condition> 
```

请用Java提出解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T04:35:24.893

使用 Transformer 的 setOutputProperty() 构建带有缩进的 xml 文件

```
 TransformerFactory transfacObj = TransformerFactory.newInstance();
    Transformer transObj = transfacObj.newTransformer();
    transObj.setOutputProperty(OutputKeys.INDENT, "yes"); 
```

如果错了请纠正我

# character-encoding - 编码问题：解码怪物字符/mojibake 字符串

> ID：12558764
> 
> 赞同：0
> 
> 时间：2012-09-24T04:13:13.450
> 
> 标签：character-encoding

我有一段“怪物性格”的句子（有人发给我的）。

> æ��è©²å��è¬�: å�¨å®¶è£¡æ�¯ä¸�å�¯ä»¥è¬�æ°�ä¸»ç��ã��æ� �ä»¥, æ��æ��ç�¶å�ºç�¾ç³¾ç´�, ä¸�ä½�ä¸�å�¯ä»¥ç��é �, é��å�¯è� ½æ��ç¯�å¤�ç��æ��... ä½�å¤§ç��, å�¯æ��è®�ä¸�è®...

有没有办法将其解码回正常字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T20:20:23.040

从理论上讲，这是可能的。

您可以反转各种编码。[例如，这里](http://2cyr.com/decode/)有一个用俄语执行此操作的工具。

当然，自动执行此操作会好得多；可以这样做，因为 Microsoft Word 等程序在打开文件时会执行类似的操作。如果您尝试使用 Word 打开二进制文件，您会看到它有时会提示您选择一种编码，因为它找不到编码，并显示最可能的编码列表。

我认为这样做的方式是检查有关字符出现的统计信息。例如，在英语中，“e”和“t”比“q”和“j”出现得更多。这是众所周知的；出于这个原因，摩尔斯电码只对“e”和“t”使用一个点和一个破折号，而对“q”和“j”使用四个点和破折号。

因此，执行此操作的假设工具可能会尝试很多编码组合（很多！）并检查哪个看起来最像真正的语言。

其他启发式方法可能是每种语言的字典，但这开始成为一个非常密集的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:22:20.397

这个答案并不是真正的解决方案，但互联网上有一些软件提供了编码修复功能，可以完成这项工作。

其中一个是中文软件（[http://www.cpatch.org/thread-12818-1-1.html](http://www.cpatch.org/thread-12818-1-1.html)）。我把链接放在这里，以防有人在寻找它。

我尝试使用 PHP 函数`mb_detect_encoding`and `iconv`，但没有一个可以成功转换字符串。由于复制和粘贴不完整，数据可能会永久丢失。

# java - 减少 Java 中的内存消耗

> ID：12558767
> 
> 赞同：9
> 
> 时间：2012-09-24T04:13:52.727
> 
> 标签：java, performance, memory

我曾参与过一些以实现更好的性能和减少内存消耗为主要目标的项目。但是相信我，在 Java 中控制内存消耗已经很困难了。

这个[wiki 页面](http://en.wikipedia.org/wiki/Java_performance)在“ *Java 程序速度*” 上说*Java 在某些情况下在低级和数字基准测试上等于 C++。*

[这些统计数据](http://benchmarksgame.alioth.debian.org/u64q/java.html)并没有真正显示时间计算性能基准的主要差异。但是，Java 中的内存使用量比 C++ 高得多，因为在 Java（32 位；在 64 位 java 中是两倍）中，每个对象有 8 字节开销，每个数组有 12 字节开销，如以上维基链接。

现在的问题是***人们采取了哪些措施来最小化 Java 中的内存利用率？***

请注意，我更关心内存而不是性能，因为我想不出比“编写更好的程序”和“在 JDK 中正确调整内存”更好的方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T04:26:31.337

根据您的工作内容，您可以从不同的编程实践中受益，例如：

*   在实际使用它们之前限制您初始化的变量数量。
    *   只是一个一般的良好编码技巧。已初始化且暂时不需要的变量正在占用尚不需要的内存，这可能会浪费资源。
*   在适用的情况下通过静态对象进行对象缓存。
    *   我之前在反射繁重的应用程序中使用过它，我需要在循环中获取对象上的成员列表，它可以根据可能需要的情况显着提高性能。
*   适用的对象池
    *   [http://www.javaworld.com/jw-06-1998/jw-06-object-pool.html](http://www.javaworld.com/jw-06-1998/jw-06-object-pool.html)
*   如果您正在编写多线程应用程序，您可以利用线程池来通过限制创建和启动新线程的工作量来获得性能。
    *   [http://www.ibm.com/developerworks/library/j-jtp0730/](http://www.ibm.com/developerworks/library/j-jtp0730/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T04:54:50.320

在 java 中管理内存可能有两个动机。

**1\. 避免频繁创建/删除对象。**

这反过来又避免了 GC 频繁唤醒，因为这会导致一个或多个正在执行的线程挂起。

避免临时/永久内存漏洞

**2.降低VM的整体内存消耗**

如果您的 VM 将在具有严格内存限制的环境中运行，则需要这样做。

理想情况下，从内存的角度来看，一个编写良好的 java 程序应该尝试实现上述两个目标。现在要实现 1，您应该执行以下操作。

*   首选静态内存分配，即每个 VM 分配一次，而不是动态内存分配。

*   避免在函数中创建临时对象，为此大多数对象可以实现一个 reset() 方法，该方法可以允许对象重用

*   了解您正在使用哪个 API，例如。如果您使用 String，您
    最终将创建与修改一样多的实例。这同样适用于自动装箱类型。

以上几点也有助于管理或控制第 2 点

要检查 VM 内存大小，您需要执行上述几点并执行以下操作

在启动 VM 时使用 Xmx 和 Xms 标志，并故意将它们的值设置为低于可能需要的值，并注意 OutOfMemoryError 。

如果 OutOfMemoryError 发生，这意味着您超出了最大 VM 大小。确定原因并开始调整您的对象创建。

希望能帮助到你 ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T06:28:06.750

> 人们采取了哪些措施来最大限度地减少 Java 中的内存使用？

他们着眼于小型基准测试，而不是阵列大小的微观测试。

您可以尝试将 Java 的引用（即使在 64 位 JVM 上也使用 4 字节）与 C++ 共享指针（可以在 64 位进程上使用 48 字节）进行比较，并得出一些不太可能在真正的节目。

> 我更关心内存而不是性能，因为我想不出比“编写更好的程序”和“在 JDK 中正确调整内存”更好的方法

通常你需要做的就是使用内存分析器。这将帮助您最大限度地减少 Java 中的内存消耗。

我发现这种对保存每个字节的痴迷在大多数情况下是不合时宜的。在 PC 中，一个字节的内存成本约为 5e-7 美分。或大约 2e-6 秒的时间。这些可以加起来，但如果您只节省 100 KB，则可能不值得更改任何代码来执行此操作，如果您要节省 1 GB，则可能值得花几个小时。即使您确实节省了 1 GB，内存也可以重复使用，但您的时间却不是。

> “如果内存是主要限制因素，那么你需要 java 有什么理由吗？”

我同意这一点，如果你有一个只有几 MB 的设备，例如比安卓手机还小，C 将是你的最佳选择。如果您的设备至少具有智能手机容量，那么 Java 可能适合您的需求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T04:23:18.913

除了减少您创建的对象数量并尝试使您的对象短暂存在之外，您对内存无能为力。但是，Java 仍将使用它允许的所有内存以获得最佳性能。

# c++ - int* 参数是否与 int[] 参数完全相同

> ID：12558768
> 
> 赞同：5
> 
> 时间：2012-09-24T04:14:05.757
> 
> 标签：c++, c, function, pointers, parameters

**以下2个功能本质上是相同的功能吗？**

即，`int*`a 与 a 完全一样`int[]`吗？

```
int myFunction(int* xVals, int* yVals, int nVertices);
int myFunction(int xVals[], int yVals[], int nVertices); 
```

如何使用第一个功能？即，如何在参数中传递数组？以下是有效/正确的吗？

```
int xVals[5], yVals[5], zVals[5];
myFunction(xVals, yVals, zVals, 5);

// or should it be..
myFunction(&xVals[0], &yVals[0], &zVals[0], 5); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T04:21:19.413

在函数参数列表中，函数声明是等价的：

> ```
> int myFunction(int* xVals, int* yVals, int nVertices);
> int myFunction(int xVals[], int yVals[], int nVertices); 
> ```

然而，这并不容易一概而论。在函数内部，有很大的区别：

```
int AnotherFunction(void)
{
    int array[] = { 0, 1, 2, 3 };
    int *iptr = &array[0];
    ...
} 
```

而在函数接口中，两种参数类型有很大区别：

```
int arrays_vs_pointers(int **iptrptr, int array[][12]); 
```

您还询问（更正）：

> ```
> int xVals[5], yVals[5];
> myFunction(xVals, yVals, 5);
> 
> // or should it be..
> myFunction(&xVals[0], &yVals[0], 5); 
> ```

这些调用都是有效的并且彼此等效。

* * *

你原来的标题问题的答案是'一个和*一个`int *`完全一样`int []`吗？*'是否**。**

在非常有限的情况下它们是等价的，但是在更多的情况下它们是非常不同的。

您修改后的标题问题的答案'*参数与参数完全相同**吗？`int *``int []`*'**是**的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T04:20:00.773

标题中的问题与实际帖子正文中的问题不同......

**一般来说**，指针和数组是**不**一样的，所以在很多情况下，指针和数组`int []`是不一样的`int *`。

但是，在*函数声明*（或定义）中，当一维数组作为参数传递时，它会衰减为指针，这就是为什么与第一种情况相反，

```
int myFunction(int *xVals, int *yVals, int nVertices); 
```

和

```
int myFunction(int xVals[], int yVals[], int nVertices); 
```

是等价的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T04:23:31.080

前面的答案是正确的。这只是为了补充您的声明和调用之间的参数计数不匹配：

```
int myFunction(int* xVals, int* yVals, int nVertices);

myFunction(xVals, yVals, zVals, 5); 
```

myFunction 需要 3 个参数，但您在调用中传递了 4 个参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T04:53:51.677

围绕此类参数规范的一些有趣（有用？）点：

*   如果您为一维数组参数指定维度，则不会以任何方式检查调用者提供的参数，例如：`f(int x[5])`可以调用 ala`int x[] = { 1, 2}; f(x);`甚至`int x; f(&x);`

*   如果您接受对参数的引用，则检查尺寸*并且*必须匹配，例如：`f(int (&x)[5])`只能使用具有正好 5 个元素的整数数组的参数调用（或转换为该类型的东西）

*   模板可用于捕获编译器已知的参数维度，如下所示：`template <size_t N> void f(int (&x)[N]) { ...can use N in here... }`

*   对于最后两个引用参数，您不能传入任何旧的指向- `int`...如果指针确实指向合适的数组，则必须先对其进行类型转换

*   在编译时检查引用参数表明当参数的数量在编译时已知时应该首选它们......实际上它可能比这更复杂，例如提供标头声明的库`void f(int[]);`仍然可以改变实现并发布一个新的库对象，支持处理不同大小的数组（它需要根据其他一些参数或哨兵约定来检测），而无需更改标题或触发客户端重新编译（在大多数构建系统中）

# c++ - 带有文本和整数分量的 ShowMessage

> ID：12558770
> 
> 赞同：1
> 
> 时间：2012-09-24T04:14:23.413
> 
> 标签：c++, string, integer, message

我在显示由一些文本和一个整数组成的消息时遇到问题

这是我的代码：

```
int integerNumberOfImportantAppointments = calCalendar.getNumberOfImportantAppointments();

if (integerNumberOfImportantAppointments > 0)
{
    ShowMessage("You have " + integerNumberOfImportantAppointments + " important appointments. Do you wish to view them?");
} 
```

我收到以下错误：E2085 无效的指针添加

我可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:46:32.243

而不是使用`sprintf`or `itoa`（或类似的）你可能会更好[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)：

```
int iNumberOfImportantAppointments = calCalendar.getNumberOfImportantAppointments();

if (iNumberOfImportantAppointments > 0)
{
    std::istringstream istr;
    istr << "You have " << iNumberOfImportantAppointments << " important appointments. Do you wish to view them?";
    ShowMessage(istr.str().c_str());
} 
```

PS。描述性的变量/函数名称很好，但也有*这么长的*名称。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:21:30.740

关于这个：

```
int integerNumberOfImportantAppointments = calCalendar.getNumberOfImportantAppointments();
char buffer[30];
if (integerNumberOfImportantAppointments > 0)
{
itoa (integerNumberOfImportantAppointments,buffer,10);
    ShowMessage("You have " + buffer + " important appointments. Do you wish to view them?");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:40:58.297

尝试这个：

```
int integerNumberOfImportantAppointments = calCalendar.getNumberOfImportantAppointments();
if (integerNumberOfImportantAppointments > 0)
{
   // itoa is not standard (like any of this is)
   WCHAR strN[32];
   swprintf(strN, L"%d", integerNumberOfImportantAppointments);

   // not familiar with ShowMessage(), but I *think* this will work.
   ShowMessage("You have " + UnicodeString(strN) + " important appointments. Do you wish to view them?");
} 
```

# xslt - 在某些条件下从 xml 中过滤掉标签

> ID：12558771
> 
> 赞同：2
> 
> 时间：2012-09-24T04:14:40.280
> 
> 标签：xslt, xslt-1.0

我有一个要求，我想根据条件从 xml 中删除一些标签。

这是我的输入xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<TCXML xmlns="http://www.tcxml.org/Schemas/TCXMLSchema">
<File creation_date="2012-09-20T07:28:47Z" elemId="id280" exportedFileName="sheet 1" last_mod_date="2012-09-20T07:28:48Z" text_flag="8192">

    <GSIdentity elemId="id111" label="R0dB1SzBBT4jNA"/>

</File>
  <File creation_date="2012-09-20T07:18:26Z" elemId="id283"exportedFileName="test part" last_mod_date="2012-09-20T07:18:26Z"  text_flag="8192">

    <GSIdentity elemId="id31" label="SIWBFqLyBT4jNA"/>

</File>
  <File creation_date="2012-09-20T07:21:03Z" elemId="id322" exportedFileName="test part3"  last_mod_date="2012-09-20T07:21:03Z"  text_flag="8192">

    <GSIdentity elemId="id46" label="ycUBFqLyBT4jNA"/>

</File>
  <File creation_date="2012-09-20T07:18:25Z" elemId="id285" exportedFileName="test part2"  last_mod_date="2012-09-20T07:18:25Z"  text_flag="4096">

    <GSIdentity elemId="id29" label="SQRBFqLyBT4jNA"/>

</File>

  <Sheet creation_date="2012-09-20T07:28:48Z" date_released="" ead_paragraph="" elemId="id185"  keep_limit_prop="3" last_mod_date="2012-09-20T07:28:48Z"  object_desc="" object_name="Sheet 1"  ref_list="#id111">

    <GSIdentity elemId="id112" label="R4WB1SzBBT4jNA"/>

</Sheet>

  <PART creation_date="2012-09-20T07:21:22Z" date_released="" ead_paragraph="" elemId="id435"  keep_limit_prop="3" last_mod_date="2012-09-20T07:21:28Z" object_name="dwgTest-AA-dwg1" ref_list="#id29 #id31">

    <GSIdentity elemId="id32" label="SxZBFqLyBT4jNA"/>

</PART>
  <PART creation_date="2012-09-20T07:21:23Z" date_released="2012-09-20T07:21:27Z" ead_paragraph="" elemId="id438"  keep_limit_prop="3" last_mod_date="2012-09-20T07:21:29Z"  object_name="dwgTest-AA-dwg2" ref_list="#id46">

    <GSIdentity elemId="id21" label="itfBFqLyBT4jNA"/>

</PART>
</TCXML> 
```

我想从此 xml 中删除那些在 PART 中使用 ref_list 标记引用的文件标记。

我正在尝试关注 xsl，

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  xmlns:plm="http://www.tcxml.org/Schemas/TCXMLSchema" version="1.0">
  <xsl:output method="xml" indent="yes"/>

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="plm:File">

    <xsl:variable name="Ref_List" select="translate(/plm:TCXML/plm:PART/@ref_list,' ','')" />
    <xsl:variable name="currentElementGSId" select="plm:GSIdentity/@elemId" />  
    <xsl:variable name="RefcurrentElementGSId" select="concat(string('#'),$currentElementGSId)" />  
    <xsl:choose>
        <xsl:when test="((contains($Ref_List,$RefcurrentElementGSId))=true())" >
            </xsl:when>
    <xsl:otherwise>
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" /> 
        </xsl:copy>         
    </xsl:otherwise>
    </xsl:choose>   
</xsl:template> 
```

以上 xsl 仅适用于 xml 中的一个 PART，而不适用于 xml 中的所有 PART 标签，如何遍历 xml 中的所有 PART 标签。提前感谢您的帮助。

我正在寻找此 xml 的输出，如下所示，

```
<?xml version="1.0" encoding="UTF-8"?>
<TCXML xmlns="http://www.tcxml.org/Schemas/TCXMLSchema">
<File creation_date="2012-09-20T07:28:47Z" elemId="id280" exportedFileName="sheet 1" last_mod_date="2012-09-20T07:28:48Z" text_flag="8192">

    <GSIdentity elemId="id111" label="R0dB1SzBBT4jNA"/>

</File>

  <Sheet creation_date="2012-09-20T07:28:48Z" date_released="" ead_paragraph="" elemId="id185"  keep_limit_prop="3" last_mod_date="2012-09-20T07:28:48Z"  object_desc="" object_name="Sheet 1"  ref_list="#id111">

    <GSIdentity elemId="id112" label="R4WB1SzBBT4jNA"/>

</Sheet>

  <PART creation_date="2012-09-20T07:21:22Z" date_released="" ead_paragraph="" elemId="id435"  keep_limit_prop="3" last_mod_date="2012-09-20T07:21:28Z" object_name="dwgTest-AA-dwg1" ref_list="#id29 #id31">

    <GSIdentity elemId="id32" label="SxZBFqLyBT4jNA"/>

</PART>
  <PART creation_date="2012-09-20T07:21:23Z" date_released="2012-09-20T07:21:27Z" ead_paragraph="" elemId="id438"  keep_limit_prop="3" last_mod_date="2012-09-20T07:21:29Z"  object_name="dwgTest-AA-dwg2" ref_list="#id46">

    <GSIdentity elemId="id21" label="itfBFqLyBT4jNA"/>

</PART>
</TCXML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:56:27.840

**更短更简单，最重要的是：正确的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:x="http://www.tcxml.org/Schemas/TCXMLSchema">
 <xsl:output omit-xml-declaration="yes"/>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="x:File">
  <xsl:if test=
  "not(/*/x:PART/@ref_list
                 [contains(concat(.,' '),
                           concat('#',
                                  current()/x:GSIdentity/@elemId,
                                  ' ')
                           )
                 ])">
    <xsl:call-template name="identity"/>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<TCXML xmlns="http://www.tcxml.org/Schemas/TCXMLSchema">
    <File creation_date="2012-09-20T07:28:47Z" elemId="id280"
      exportedFileName="sheet 1" last_mod_date="2012-09-20T07:28:48Z"
      text_flag="8192">
        <GSIdentity elemId="id111" label="R0dB1SzBBT4jNA"/>
    </File>
    <File creation_date="2012-09-20T07:18:26Z" elemId="id283"
      exportedFileName="test part" last_mod_date="2012-09-20T07:18:26Z"
      text_flag="8192">
        <GSIdentity elemId="id31" label="SIWBFqLyBT4jNA"/>
    </File>
    <File creation_date="2012-09-20T07:21:03Z" elemId="id322"
      exportedFileName="test part3"  last_mod_date="2012-09-20T07:21:03Z"
      text_flag="8192">
        <GSIdentity elemId="id46" label="ycUBFqLyBT4jNA"/>
    </File>
    <File creation_date="2012-09-20T07:18:25Z" elemId="id285"
      exportedFileName="test part2"  last_mod_date="2012-09-20T07:18:25Z"
      text_flag="4096">
        <GSIdentity elemId="id29" label="SQRBFqLyBT4jNA"/>
    </File>
    <Sheet creation_date="2012-09-20T07:28:48Z" date_released=""
      ead_paragraph="" elemId="id185"  keep_limit_prop="3"
      last_mod_date="2012-09-20T07:28:48Z"  object_desc=""
      object_name="Sheet 1"  ref_list="#id111">
        <GSIdentity elemId="id112" label="R4WB1SzBBT4jNA"/>
    </Sheet>
    <PART creation_date="2012-09-20T07:21:22Z" date_released=""
    ead_paragraph="" elemId="id435"  keep_limit_prop="3"
    last_mod_date="2012-09-20T07:21:28Z" object_name="dwgTest-AA-dwg1"
    ref_list="#id29 #id31">
        <GSIdentity elemId="id32" label="SxZBFqLyBT4jNA"/>
    </PART>
    <PART creation_date="2012-09-20T07:21:23Z" date_released="2012-09-20T07:21:27Z"
    ead_paragraph="" elemId="id438"  keep_limit_prop="3"
    last_mod_date="2012-09-20T07:21:29Z"  object_name="dwgTest-AA-dwg2"
    ref_list="#id46">
        <GSIdentity elemId="id21" label="itfBFqLyBT4jNA"/>
    </PART>
</TCXML> 
```

**产生了想要的正确结果（4个文件元素中的3个被“删除”）：**

```
<TCXML xmlns="http://www.tcxml.org/Schemas/TCXMLSchema">
    <File creation_date="2012-09-20T07:28:47Z" elemId="id280" exportedFileName="sheet 1" last_mod_date="2012-09-20T07:28:48Z" text_flag="8192">
        <GSIdentity elemId="id111" label="R0dB1SzBBT4jNA"/>
    </File>
    <Sheet creation_date="2012-09-20T07:28:48Z" date_released="" ead_paragraph="" elemId="id185" keep_limit_prop="3" last_mod_date="2012-09-20T07:28:48Z" object_desc="" object_name="Sheet 1" ref_list="#id111">
        <GSIdentity elemId="id112" label="R4WB1SzBBT4jNA"/>
    </Sheet>
    <PART creation_date="2012-09-20T07:21:22Z" date_released="" ead_paragraph="" elemId="id435" keep_limit_prop="3" last_mod_date="2012-09-20T07:21:28Z" object_name="dwgTest-AA-dwg1" ref_list="#id29 #id31">
        <GSIdentity elemId="id32" label="SxZBFqLyBT4jNA"/>
    </PART>
    <PART creation_date="2012-09-20T07:21:23Z" date_released="2012-09-20T07:21:27Z" ead_paragraph="" elemId="id438" keep_limit_prop="3" last_mod_date="2012-09-20T07:21:29Z" object_name="dwgTest-AA-dwg2" ref_list="#id46">
        <GSIdentity elemId="id21" label="itfBFqLyBT4jNA"/>
    </PART>
</TCXML> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:15:00.607

您的输入/输出与您的描述不符：

> 我想从此 xml 中删除那些在 PART 中使用 ref_list 标记引用的文件标记。

以下 XSLT 执行与该描述相同的操作：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:plm="http://www.tcxml.org/Schemas/TCXMLSchema" version="1.0">
    <xsl:output method="xml" indent="yes" />
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
        </xsl:copy>
    </xsl:template>
    <xsl:template match="plm:File">
        <xsl:choose>
            <xsl:when test="/plm:TCXML/plm:PART[contains(
                concat(' ', @ref_list, ' '), 
                concat(' #', current()/@elemId, ' '))]">
            </xsl:when>
            <xsl:otherwise>
                <xsl:copy>
                    <xsl:apply-templates select="@*|node()" />
                </xsl:copy>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

第二个模板丢弃在任何`File`元素的属性中`elemId`找到的任何元素。所有其他元素都按原样复制。`ref_list``PART``File`

**注意**：您的模板无法按预期工作，因为`translate`它的第一个参数是字符串；[您传递了一个节点列表，该列表根据以下规则](http://www.w3.org/TR/xpath/#function-string)转换为字符串：

> 通过返回节点集中在文档顺序中排在第一位的节点的字符串值，将节点集转换为字符串。如果节点集为空，则返回一个空字符串。

# jquery - 我可以撤消 event.stopPropagation

> ID：12558772
> 
> 赞同：2
> 
> 时间：2012-09-24T04:15:57.437
> 
> 标签：jquery, events

作为一个使用 jQuery 的 n00b，我希望这个问题是有意义的！

我有一个作为嵌套表创建的菜单。有时我希望禁用它。（显示沙漏光标等）

每个菜单项实际上是`<td>`另一个的内部。幸运的是，内部`<td>`响应点击事件，因此应用`event.stopPropagation()`到`td.class`标识外部`<td>`s 的 s 可以很好地防止菜单项响应点击。

但在某些情况下，我想退出？暂停？撤消？关掉？所以`stopPropagation()`内部`<td>`的点击处理程序再次看到点击事件。我希望点击事件再次冒泡。

为此，我想我想“撤消”`stopPropagation()`外部`<td>`s。这应该是可能的吧？我找不到办法做到这一点的事实告诉我，我处理这个问题的方式可能有问题。

那么，有没有办法呢？如果不是，我是不是在错误地思考这个问题？谢谢。

段落

```
 <td onclick="javascript: myhandler();"><table><tr>
<td class="menuitems">Menu Item</td></tr></table></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:54:25.333

在没有看到您的代码的情况下，我可以建议尝试在,`.not(".class_to_exclude")`之前添加以`event.stopPropagation()`排除该类`<td>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:27:08.443

你可以`event.stopPropagation()`有条件地放。

每当您想停止冒泡时，只需确保该语句将执行。在匹配的情况下确保它不会执行。

任何方式你都会有一些条件来撤消`event.stopPropagation()`那为什么不这样呢？

# php - 基于测试动态调用php对象方法？

> ID：12558773
> 
> 赞同：3
> 
> 时间：2012-09-24T04:16:15.783
> 
> 标签：php, object, dynamic, methods

谁能告诉我是否可以根据测试的成功调用 php 对象的方法？例如下面...

正常使用：

```
$obj = new obj;
$obj->call()
    ->successive()
    ->methods(); 
```

运行测试以查看是否应调用方法：

```
$obj = new obj;
$obj->call()
    ( if ($a) ? ->successive() : '')
    ->methods(); 
```

有什么办法可以使上面的第二个例子起作用吗？或者另一种达到相同结果的方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:18:50.633

也许？

```
$obj = new obj;
$temp = $obj->call();
if ($a) {
   $temp = $temp->successive();
}
$temp->methods(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T04:26:56.547

也许将方法名称传递给`.successive()`并将其作为回调处理。

```
class obj {
  private $is_success;

  public function call() {
     $this->is_success = return_a_boolean();
     return $this;
  }

  public function successive($callback) {
     if ($this->is_success && method_exists($this, $callback)) {
        $this->$callback();
     }
     return $this;
  }

  public function methods() {
      //....
  }
}

$obj = new obj;
$obj->call()
    ->successive('methods'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:25:23.327

如果您在测试失败时执行回退方法，您可以像这样构造它，我认为：

```
$obj = new obj;
$obj->call()
    ->{ $a ? "successive" : "fallback_method"}()
    ->methods(); 
```

那会有帮助吗？您可能希望后备方法看起来像：

```
function fallback_method() {
    return $this;
} 
```

# c++ - 将文本文件中的行读入 C++ system() 命令

> ID：12558774
> 
> 赞同：0
> 
> 时间：2012-09-24T04:16:23.213
> 
> 标签：c++

我是 C++ 新手，我正在尝试从仅包含一个字符串的文本文件中读取一个字符串，并将其用作 system() 调用的输入。这是我所拥有的：

```
#include <iostream>
#include <string>
#include <fstream>

int main(int argc, const char * argv[])
{
    std::string curlString = "/usr/bin/curl -O ";
    std::ifstream file("/Users/test/Desktop/test.txt");
    if (file) {
    std::string line;
    while (std::getline( file, line ));
    system(curlString + line);
    }
 } 
```

这可能是一团糟，非常感谢您的帮助，我真的很感激。

提前感谢您的任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:24:09.340

我不确定问题到底是什么。是从文件中读取吗？在stackoverflow中有很多例子如何做到这一点。你为什么不做类似的事情：

```
std::string curlString = "/usr/bin/curl -O ";
std::string urlString= /* function that reads one line of code and does some verifcation if it is a URL */
system(curlString + urlString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:22:51.333

这似乎是一种非常迂回的方式来实现你的结果。

有一些更简单的方法可以实现这一点：

*   您可以通过在那里提示用户来完全用 C++ 构建字符串
*   您可以将字符串从 Bash 传递到 C++，方法是将其作为命令行参数发送到`argv`
*   你可以`curl`打电话`bash`

除非您特别需要创建文件，否则此处的文件似乎有点过头了。

# plugins - Zencart 的新闻和文章管理插件安装

> ID：12558776
> 
> 赞同：0
> 
> 时间：2012-09-24T04:16:51.990
> 
> 标签：plugins, e-commerce, zen-cart

我想知道在我的 Zencart 网站上安装新闻和文章管理插件的步骤。我是 zencart 的新手，所以我需要逐步解决这个问题。所以如果可能的话，请用截图解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:29:46.053

我希望[News and Article Manager & Optional Sideboxes](http://www.zen-cart.com/downloads.php?do=file&id=791)将帮助您将新闻和文章管理插件安装到您的 zencart 网站。

# c# - 更新页面的某个部分但没有 UpdatePanel

> ID：12558778
> 
> 赞同：-1
> 
> 时间：2012-09-24T04:17:06.813
> 
> 标签：c#, asp.net

有一个页面由 5 个不同的带有 texboxes 的用户控件、根据后端表要求的下拉列表和一个提交按钮组成。任务是在没有回发的情况下将字段保存在数据库中，就像更新面板一样，但没有它。每个用户控件都可以在没有回发的情况下执行此操作。我不知道该怎么办...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:08:00.530

也许你可以试试 jQuery Ajax。参考这些链接，

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

[使用 PHP 的 jQuery Ajax POST 示例](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)

# floating-point - 使用 IEEE-754 单精度可以表示多少个归一化数字？

> ID：12558780
> 
> 赞同：8
> 
> 时间：2012-09-24T04:17:16.800
> 
> 标签：floating-point, ieee-754

基于 IEEE-754 单精度标准，如果我知道以下内容，我怎么知道可以表示多少个归一化数字：

1 位用于标志

8 位为指数

尾数为 23 位

是否有可以应用于任何其他浮点系统的规则？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T07:36:15.987

您已经确定了表示的每个部分的位数，因此您已经完成了一半。有：

*   2^1 = 符号的 2 种可能性
*   2^8 = 256 种可能的指数位，其中两种保留用于非正规：全零的指数字段用于浮点零和次正规，而全为一的指数字段用于无穷大和 nan
*   2^23 = 8388608 尾数的可能性（请注意，“有效位”通常是首选术语）。

乘法，这给出了`2 * 2^23 * (2^8 - 2)`，或者等价地`2^32 - 2^25`，完全有可能。`2^32 - 2^25 = 4261412864`所以在 IEEE 754 binary32 格式中有不同的正常数字。从技术上讲，这两个零不是正常数字，但如果您想将它们包括在计数中，您会得到`2^32 - 2^25 + 2`。

是的，这直接推广到所有其他 IEEE 754 二进制交换格式。我会让你找到双精度、半精度、四精度等的数字。

* * *

只是为了好玩，这里有一个完整的细分：

*   2 个零（符号 0 或 1，指数和有效数字字段为零）

*   2^24 - 2 个次正规数（符号 0 或 1，指数字段为零，有效数字字段非零）

*   2^32 - 2^25 普通数（如上）

*   2 个无穷大（符号 0 或 1，指数字段全为 1，有效数字字段为零）

*   2^23 - 2 个信号 NaN（符号 0 或 1，指数字段全为 1，有效数字字段非零但第一位为零）

*   2^23 个安静的 NaN（符号 0 或 1，指数字段全为 1，有效数字字段的第一位为 1）

# sql-server - 将表从一个数据库移动到另一个数据库 SQL Server

> ID：12558783
> 
> 赞同：23
> 
> 时间：2012-09-24T04:17:28.593
> 
> 标签：sql-server

我有一个数据库，它有一个包含 5 列`DB_1`的空表。`T1`

我想将此表移动到`DB_2`同一 SQL Server 上的另一个数据库。

我试过使用这个命令：

```
alter table DB_1.T1 rename DB_2.T1 
```

但这显示错误。

> *消息 102，级别 15，状态 1，第 1 行
> “重命名”附近的语法不正确。*

请帮忙。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-24T04:44:40.383

如果数据库在同一台服务器上，那么这样做，

```
select * into DB_2.T1 from DB_1.[dbo].[T1] 
```

如果您在不同的服务器上拥有数据库，则必须创建链接服务器。

再三考虑，您可以生成**“创建表脚本”**并在第二个数据库上运行它们

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-24T04:47:43.223

在`SQL Server Management Studio`你有`Import and Export Wizard`：

1.  右键单击数据库名称（`DB_2`）
2.  任务
3.  导入数据
4.  选择数据源 ( `DB_1`)
5.  选择目的地 ( `DB_2`)
6.  选择`copy data from one ore more tables`
7.  选择您的餐桌 ( `T1`)
8.  结束

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T05:38:20.020

在我办公室朋友的帮助下，这是我想出的解决方案。

1.  在对象资源管理器中，转到源数据库并选择要移动的表。

2.  右键单击，将表编写为 -> CREATE TO -> 新查询编辑器窗口。这将打开查询窗口，其中 SQL 查询指定了表上的架构、索引、约束。

3.  您可以在 CREATE TABLE 部分更改表名并进行其他更改...

4.  将第一行中的数据库名称更改`USE <DATABASE>`为目标数据库并执行查询。

谢谢。

# c++ - 编译c ++项目/ Open GL时出现纹理错误

> ID：12558786
> 
> 赞同：2
> 
> 时间：2012-09-24T04:18:02.503
> 
> 标签：c++, visual-studio-2010, opengl, textures

我在编译我制作的程序时遇到问题。

问题是在 Visual C++ 2010 中是我使用的 IDE，当我在 Debug 或 Release 模式下编译时，一切都显示得很好（我正在使用 Open GL 和纹理）。

问题是当我有我的程序的 exe 并尝试运行 OpenGL 窗口时是空白的。

经过长时间的测试，我意识到如果我没有加载纹理，一切都会正确显示。

现在我的问题（记住路径是相对的或纹理是正确的）exe 文件无法正确加载并且纹理在从 Visual C++ 2010 编译时是否正确？

不要给出任何错误以了解问题所在。

我尝试了一切..路径是正确的，纹理存在于exe应该查找的同一目录中。它不可能......而且最奇怪的是，从视觉 c++ 程序（不是 exe）可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:37:44.223

从 Visual Studio 启动应用程序时，应用程序执行路径是源代码所在的路径（比 .sln 文件更深的一个文件夹）。
您是否将 exe 从“Release”文件夹复制粘贴到纹理所在的文件夹中？如果没有，请尝试这样做。这就是我通常在发布应用程序之前对其进行测试的方式。

另一个原因可能是您的应用程序中存在错误。
它可能是指针覆盖数据、删除释放的内存或写入超出数组范围之类的东西。所有这些都可能导致应用程序在没有调试器的情况下运行时根本无法工作。
原因是调试模式和释放模式之间的内存布局不同。
我有很多这样的问题。
您的应用程序是多线程的吗？如果是，那也可能是它失败的原因。

# ios - CFString（不可变）内存使用量在 IOS 应用程序中不断增长

> ID：12558788
> 
> 赞同：5
> 
> 时间：2012-09-24T04:18:30.943
> 
> 标签：ios, memory, memory-management, memory-leaks, instruments

我正在使用工具检查我的 IOS 应用程序的内存使用情况，发现 CFString 不断被分配和增长。在我的代码中创建 NSString 对象时，我使用了 StringWithFormat 方法，而不是 [[NSString alloc] init] 之类的方法。我怎样才能阻止这个？下图是仪器输出的屏幕截图。

如果缺少该问题的必要信息，请告诉我。

![仪器截图](../Images/90daca4545e7a800603411ccad706bff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T12:09:24.053

如果您使用便利构造函数创建大量临时对象，则使用自定义自动释放池块是一个好习惯。由于使用便利构造函数创建的对象是自动释放的，因此它们可能不会立即释放。这就是内存使用量激增的原因。

来自[苹果](https://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html#//apple_ref/doc/uid/20000047-SW2)：

> 许多程序会创建自动释放的临时对象。这些对象添加到程序的内存占用，直到块结束。在许多情况下，允许临时对象累积到当前事件循环迭代结束不会导致过多的开销；但是，在某些情况下，您可能会创建大量临时对象，这些对象会大大增加内存占用，并且您希望更快地处理这些对象。在后一种情况下，您可以创建自己的自动释放池块。在块的末尾，临时对象被释放，这通常会导致它们的释放，从而减少程序的内存占用。

[http://www.cocoanetics.com/2009/08/understanding-autoreleasing/](http://www.cocoanetics.com/2009/08/understanding-autoreleasing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T22:47:33.743

在我们的案例中，我发现 NSStrings 的持续泄漏（其中许多属于 NSPlaceholderString 类，它是类集群的一部分）是由于 NSZombieEnabled 在方案中启用。

关闭它可以消除这种内存泄漏的来源。

# c++ - 配置比较函数以使用 std::sort

> ID：12558792
> 
> 赞同：0
> 
> 时间：2012-09-24T04:18:51.323
> 
> 标签：c++, stl

假设我有以下片段：

```
int compareFoo(std::string** a, std::string** b) {
    return (**a).compare(**b);
}

int main() {
    std::string** foo = new std::string*[3];
    foo[0] = new std::string("a");
    foo[1] = new std::string("c");
    foo[2] = new std::string("b");
    sort(foo,foo+3,compareFoo);
    for (int i = 0; i < 3; i++) {
        std::cout << *foo[i] << std::endl; // print acb
    }
} 
```

如果我遗漏了**sort**的第三个参数（比较） ，它会根据它们的内存地址给我排序的 3 个字符串，这不是我想要的。但是我如何参数化**compareFoo**函数，以便它不会比较内存地址。

```
void sort(RandomAccessIterator first, RandomAccessIterator last, Compare comp); 
```

**cplusplus.com 上对Sort**的描述很模糊，给出的例子很简单。既然它需要一个**Iterator**，这是否意味着我只使用站立容器？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:32:32.460

我会重新考虑所有这些指针操作是否真的是你想要的。这不是 Java 或 C#。在 C++ 中，默认情况下您不会从空闲存储区（“堆”）进行分配。只需自动创建数组并直接存储字符串。换句话说，你最终会得到这样的结果：

```
#include <algorithm>
#include <string>
int main(){
    std::string foo [] = {
        "a",
        "c",
        "b"
    };
    std::sort(foo, foo + 3);
    for(int i = 0; i < 3; i++){
        std::cout << foo[i] << '\n'; // print abc
    }
} 
```

与您的版本相比，这

*   是比较快的
*   使用更少的内存（没有额外的指针开销）
*   不会泄露内存
*   对熟悉 C++ 的人来说更具可读性
*   消除对可能的空指针的任何担忧
*   需要更少的代码
*   与优化编译器一起工作更好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T04:22:59.233

比较函数需要两个项目进行比较，如果第一个小于第二个，则返回 true。在你的情况下，它会像这样工作：

```
#include <string>
#include <algorithm>
#include <iostream>

using std::sort;

bool compareFoo(std::string* a,std::string* b){
  return *a < *b;
}

int main(){
  std::string** foo = new std::string*[3];
  foo[0] = new std::string("a");
  foo[1] = new std::string("c");
  foo[2] = new std::string("b");
  sort(foo,foo+3,compareFoo);
  for(int i=0;i<3;i++){
    std::cout << *foo[i] << std::endl; 
  }

  // Remember to delete things that you dynamically allocate.
  delete foo[0];
  delete foo[1];
  delete foo[2];
  delete [] foo;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T04:23:39.700

std::sort 接受三件事：

1.  表示开始的随机访问迭代器
2.  代表结束的随机访问迭代器
3.  一个函数，它接受两件事并比较它们以返回它们的结果

所以这意味着它可以与任何遵循随机访问迭代器模板的东西一起工作。即指针，因此数组应该可以正常工作。

但是，使用您当前的代码，您取消引用一个级别太远了，试试这个

```
#include <string>
#include <algorithm>
#include <iostream>

using std::sort;

bool compareFoo(std::string a,std::string b){
  return *a < *b; //note the difference
}

int main(){
  std::string* foo = new std::string[3];
  foo[0] = std::string("a");
  foo[1] = std::string("c");
  foo[2] = std::string("b");
  sort(foo,foo+3,compareFoo);
  for(int i=0;i<3;i++){
    std::cout << *foo[i] << std::endl;
  }
} 
```

但是请注意，在这种情况下，我们不需要提供比较功能，该功能将自动使用 < 运算符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T04:24:14.140

```
bool compareFoo(std::string * lhs, std::string * rhs)
{
    return *lhs < *rhs;
} 
```

> 既然它需要一个迭代器，这是否意味着我只使用站立容器？

不，迭代器是一个概念。指针满足迭代器概念的要求，所以它是一个迭代器。

# c# - 将行从一个 DataGridGiew 复制到另一个 DataGridGiew，其中行前景色在 Windows 应用程序中为红色

> ID：12558794
> 
> 赞同：0
> 
> 时间：2012-09-24T04:18:59.073
> 
> 标签：c#, winforms, datagridview, background-color, rows

任何人都可以举例说明如何将行从一个 Datagridview 复制到另一个 DataGridView，其中行是前色是红色。

我在网上看到它们是相关的选定行复制。但我必须只复制前色为红色的行。

我正在使用的这段代码：

```
 int k = 0;
            foreach (DataGridViewColumn c in dgdPrview.Columns)
            {
                dgdMissingAcc.Columns.Add(c.Clone() as DataGridViewColumn);
            }
            foreach (DataGridViewRow dgvRow in dgdPrview.Rows)
            {
     if (dgdPrview.Rows[k][0].Cells[1].Style.ForeColor == System.Drawing.Color.Red)
                {                        
                  dgdMissingAcc.Rows.Add(dgvRow); //Error:Row provided already belongs to a DataGridView control.
                    k++;

                }
            }
          dgdMissingAcc.Show(); 
```

// 更新了第二个 foreach 循环：

```
 foreach (DataGridViewRow dgvRow in dgdPrview.Rows)
            {
                var cellcount = dgdPrview.ColumnCount; //here I take the column count not the row count.
                if (dgdPrview.Rows[k][0].Cells[1].Style.ForeColor == System.Drawing.Color.Red)
                {

                    for (int i = 0; i < cellcount; i++)
                    {
                       dgdMissingAcc.Rows[k][0].Cells[i].Value = dgdPrview.CurrentRow.Cells[i].Value.ToString();

                    }
                }
                k++;
            } 
```

当我来到第三行时，索引超出范围异常。让我知道为什么会出现此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:37:09.370

试着把条件大致像

```
if(gridview.CellStyle.ForeColor == Color.Red)
{
} 
```

这可以根据单元格样式或行样式而有所不同...

请参考链接，以便您对事情有更多的了解>>>

[http://www.daniweb.com/software-development/vbnet/threads/320268/datagridview-color-change-based-on-condition](http://www.daniweb.com/software-development/vbnet/threads/320268/datagridview-color-change-based-on-condition)

```
int k = 0;
            foreach (DataGridViewColumn c in dgdPrview.Columns)
            {
                dgdMissingAcc.Columns.Add(c.Clone() as DataGridViewColumn);
            }

            for(int i=0;i<dgdPrview.rows.count;i++)
            {
     if (dgdPrview.Rows[k].Cells[i].Style.ForeColor == System.Drawing.Color.Red)
                {                        
                  dgdMissingAcc.Rows[i].Cells[i].Value=dgdPrview.CurrentRow.Cells[i].value.toString();
                }
            }
          dgdMissingAcc.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:37:16.503

我想，你想要这样：

```
 private DataGridView CopyWhereForeColorIsRed(DataGridView dgv)
    {
        var dgv2 = new DataGridView();
        dgv2.Rows.AddRange(dgv.Rows
            .Cast<DataGridViewRow>()
            .Where(a=>a.Cells.Cast<DataGridViewCell>().Any(c=>c.Style.ForeColor == Color.Red))
            .ToArray());

        return dgv2;
    } 
```

# jquery - 带有禁用按钮的 Jquery Dialog 单实例工作不正确

> ID：12558795
> 
> 赞同：0
> 
> 时间：2012-09-24T04:19:18.327
> 
> 标签：jquery, jquery-ui-dialog

我正在打开 jquery 对话框并根据要求播放对话框按钮，例如在用户单击它后隐藏“保存”并在每个要求之后执行更多操作，然后允许用户手动关闭它。

我能够隐藏保存按钮。问题是当我为其他更新请求打开相同的对话框时（每个要求页面在对话框关闭后不应该刷新），我没有看到“保存”按钮。

有没有办法解决这个问题？

在 html 中：

```
<div id="mydiv" title="my title">
</div>

    $('#mydiv).dialog({
        autoOpen: false,
        width: 620,
        height: 550,
        modal: true,
        resizable: false,
        buttons: {
            "Cancel": function () { $(this).dialog("close"); },
            "Save": {
                id: "btnSave",
                text: "Save",
                click: function () {
                   // hide button

                }
            }
        }
    }); 
```

# java - 停止 Selenium 会话时出错

> ID：12558797
> 
> 赞同：1
> 
> 时间：2012-09-24T04:19:37.533
> 
> 标签：java, selenium, selenium-grid

我正在通过 selenium 网格运行 selenium 测试，但是当它执行`tearDownAfterClass()`方法时，会出现此问题：

```
com.thoughtworks.selenium.SeleniumException: Internal Server Error
    at com.thoughtworks.selenium.HttpCommandProcessor.throwAssertionFailureExceptionOrError(HttpCommandProcessor.java:112)
    at com.thoughtworks.selenium.HttpCommandProcessor.getCommandResponseAsString(HttpCommandProcessor.java:183)
    at com.thoughtworks.selenium.HttpCommandProcessor.executeCommandOnServlet(HttpCommandProcessor.java:118)
    at com.thoughtworks.selenium.HttpCommandProcessor.doCommand(HttpCommandProcessor.java:101)
    at com.thoughtworks.selenium.HttpCommandProcessor.stop(HttpCommandProcessor.java:265)
    at com.thoughtworks.selenium.DefaultSelenium.stop(DefaultSelenium.java:139)
    at com.thoughtworks.selenium.grid.tools.ThreadSafeSeleniumSessionStorage.closeSeleniumSession(ThreadSafeSeleniumSessionStorage.java:33)
    at com.icil.at.as.testtool.Suppliernamelookupv03Test.tearDownAfterClass(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:76)
    at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:525)
    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:202)
    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:130)
    at org.testng.internal.TestMethodWorker.invokeAfterClassMethods(TestMethodWorker.java:222)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:112)
    at org.testng.TestRunner.runWorkers(TestRunner.java:1147)
    at org.testng.TestRunner.privateRun(TestRunner.java:749)
    at org.testng.TestRunner.run(TestRunner.java:600)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:317)
    at org.testng.SuiteRunner.access$000(SuiteRunner.java:34)
    at org.testng.SuiteRunner$SuiteWorker.run(SuiteRunner.java:351)
    at org.testng.internal.thread.ThreadUtil$CountDownLatchedRunnable.run(ThreadUtil.java:147)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636) 
```

在我的测试脚本中，这个方法是这样的：

```
 @AfterClass
public static void tearDownAfterClass() throws Exception {
    closeSeleniumSession();
} 
```

有人建议使用 selenium.cloce() 并且这个错误消失了。但在我的脚本中，它使用 Selenium 网格。在我的脚本中，只有一种方法失败了，其他方法都成功了。

有人可以帮我检查一下并告诉我它有什么问题吗？

# php - php从存储在db中的数组中输出复选框，然后如果选中则显示选中

> ID：12558803
> 
> 赞同：1
> 
> 时间：2012-09-24T04:20:38.510
> 
> 标签：php, mysql, arrays, checkbox

提交时，我有一堆复选框，将值（如果选中）添加到数组并序列化，然后连续保存在我的数据库中。

现在我想在编辑页面上显示复选框，并选中相应的复选框。

我目前正在输出复选框......

HTML

```
6 w <input type="checkbox" name="size[]" value="6 w">
7 w <input type="checkbox" name="size[]" value="7 w">
8 w <input type="checkbox" name="size[]" value="8 w"> 
```

我试过回显一个检查过的值，但不知道如何检查正确的值。这是我遇到的一个网站的一个建议......

HTML

```
6 w <input type="checkbox" name="size[]" value="6 w" <? echo $checked['6 w'] ?> >
7 w <input type="checkbox" name="size[]" value="7 w" <? echo $checked['7 w'] ?> >
8 w <input type="checkbox" name="size[]" value="8 w" <? echo $checked['8 w'] ?> > 
```

PHP

```
$size = unserialize($row["size"]);        
$array = "";
foreach($size as $size_available)
{
  $array .= "$size_available,";
}
  $array_explode = explode(',',$array);

    //$checked = "";
    foreach ($array_explode as $v){
    $checked[$v] = "checked='CHECKED'";
} 
```

这几乎可以显示选中的正确复选框，但是任何未存储在数组中的复选框都会给出未定义的索引错误。我猜是因为它输出的是一个空变量？？？

有什么建议可以从这里开始，或者如何以更好的方式做到这一点？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:27:09.770

在访问它之前验证是否设置了索引`isset()`-

```
<? echo (isset($checked['8 w']))? $checked['8 w'] : "" ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:27:58.673

改变这个：

```
foreach($size as $size_available) 
```

为了这：

```
foreach($_REQUEST['size'] as $size_available) 
```

不需要反序列化命令。

# android - 即使代码中没有错误，我的应用程序也会崩溃

> ID：12558805
> 
> 赞同：1
> 
> 时间：2012-09-24T04:20:44.817
> 
> 标签：android, debugging

我是 android 编程的新手，我正在尝试制作一个应用程序来管理我的日常任务。现在我的应用程序需要在活动之间切换，它在第一个活动上正常启动，但是当我单击按钮转到另一个活动时，应用程序就会崩溃。我正在直接调试到我的手机（Galaxy s3）。

我认为 logcat 输出可能很有用，因为我注意到它在其他问题中很有帮助。

```
09-24 05:49:14.807: D/dalvikvm(9062): GC_FOR_ALLOC freed 137K, 4% free 12835K/13255K, paused 25ms
09-24 05:49:14.807: I/dalvikvm-heap(9062): Grow heap (frag case) to 13.065MB for 379472-byte allocation
09-24 05:49:14.837: D/dalvikvm(9062): GC_FOR_ALLOC freed <1K, 4% free 13205K/13639K, paused 11ms
09-24 05:49:14.862: D/AbsListView(9062): Get MotionRecognitionManager
09-24 05:49:16.102: D/CLIPBOARD(9062): Hide Clipboard dialog at Starting input: finished by someone else... !
09-24 05:49:22.282: D/AndroidRuntime(9062): Shutting down VM
09-24 05:49:22.282: W/dalvikvm(9062): threadid=1: thread exiting with uncaught exception (group=0x40c661f8)
09-24 05:49:22.297: E/AndroidRuntime(9062): FATAL EXCEPTION: main
09-24 05:49:22.297: E/AndroidRuntime(9062): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.dailyplanner/com.example.dailyplanner.new_task}: java.lang.RuntimeException: Binary XML file line #24: You must supply a layout_width attribute.
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.app.ActivityThread.access$600(ActivityThread.java:128)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.os.Looper.loop(Looper.java:137)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.app.ActivityThread.main(ActivityThread.java:4514)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at java.lang.reflect.Method.invokeNative(Native Method)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at java.lang.reflect.Method.invoke(Method.java:511)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at dalvik.system.NativeStart.main(Native Method)
09-24 05:49:22.297: E/AndroidRuntime(9062): Caused by: java.lang.RuntimeException: Binary XML file line #24: You must supply a layout_width attribute.
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.content.res.TypedArray.getLayoutDimension(TypedArray.java:491)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.view.ViewGroup$LayoutParams.setBaseAttributes(ViewGroup.java:5331)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.view.ViewGroup$MarginLayoutParams.<init>(ViewGroup.java:5452)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.widget.RelativeLayout$LayoutParams.<init>(RelativeLayout.java:1064)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.widget.RelativeLayout.generateLayoutParams(RelativeLayout.java:933)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.widget.RelativeLayout.generateLayoutParams(RelativeLayout.java:69)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:741)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:280)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.app.Activity.setContentView(Activity.java:1892)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at com.example.dailyplanner.new_task.onCreate(new_task.java:23)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.app.Activity.performCreate(Activity.java:4562)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
09-24 05:49:22.297: E/AndroidRuntime(9062):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
09-24 05:49:22.297: E/AndroidRuntime(9062):     ... 11 more
09-24 05:49:22.317: D/dalvikvm(9062): GC_CONCURRENT freed 164K, 3% free 13459K/13831K, paused 1ms+2ms
09-24 05:49:22.322: E/SQLiteDatabase(9062): close() was never explicitly called on database '/data/data/com.example.dailyplanner/databases/MyDB' 
09-24 05:49:22.322: E/SQLiteDatabase(9062): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:2064)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1118)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1075)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1051)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1154)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1147)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:860)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:222)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at com.example.dailyplanner.MainActivity.onCreate(MainActivity.java:24)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.app.Activity.performCreate(Activity.java:4562)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.app.ActivityThread.access$600(ActivityThread.java:128)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.os.Looper.loop(Looper.java:137)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at android.app.ActivityThread.main(ActivityThread.java:4514)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at java.lang.reflect.Method.invokeNative(Native Method)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at java.lang.reflect.Method.invoke(Method.java:511)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
09-24 05:49:22.322: E/SQLiteDatabase(9062):     at dalvik.system.NativeStart.main(Native Method)` 
```

这是我的安卓清单：

```
<manifest package="com.example.dailyplanner"

    android:versionName="1.0" xmlns:android="http://schemas.android.com/apk/res
/android" android:versionCode="1">

    <uses-sdk

        android:minSdkVersion="9"

        android:targetSdkVersion="15" />

<application

    android:icon="@drawable/ic_launcher"

    android:label="@string/app_name"

    android:theme="@android:style/Theme.Light.NoTitleBar" >

    <activity

        android:name=".MainActivity"

        android:label="@string/title_activity_main"

        android:screenOrientation="portrait" 

        android:configChanges="orientation|keyboardHidden">

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".new_task"/>
</application> 
```

`

这是2个java文件的代码：

```
import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends ListActivity {

    @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        SQLiteDatabase db = openOrCreateDatabase("MyDB", MODE_PRIVATE, null );
        db.execSQL("CREATE TABLE IF NOT EXISTS Data1 (Id INT IDENTITY(1,1) NOT NULL, text VARCHAR, time TIME, date DATE)");

        Button nTaskBtn = (Button) findViewById(R.id.nTask);
        nTaskBtn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent nTaskScreen = new Intent(MainActivity.this, new_task.class);

                startActivity(nTaskScreen);

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

第二个文件：

```
import android.R.string;
import android.app.Activity;
import android.app.TimePickerDialog;
import android.net.UrlQuerySanitizer.ValueSanitizer;
import android.os.Bundle;
import android.renderscript.Sampler.Value;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.TimePicker;
public class new_task extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.new_task);

        TextView timeTxt = (TextView) findViewById(R.id.timeTxt);
        TextView dateTxt = (TextView) findViewById(R.id.dateTxt);

        Button btnSave = (Button) findViewById(R.id.btnSave);
        btnSave.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

            }
        });

        Button btnSetTime = (Button) findViewById(R.id.btnSetTime);
        btnSetTime.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

            }
        });

        }

    } 
```

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:23:00.433

logcat 输出解释了这些问题。首先，似乎在 file`res/layout/activity_main`中，（至少）有一个视图没有必需的`android:layout_width`属性。

另一个问题是您正在打开一个数据库`MainActivity.onCreate`并且您永远不会关闭它。你需要关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T04:23:09.820

看清楚logcat错误，尤其是这一行..

```
09-24 05:49:22.297: E/AndroidRuntime(9062): Caused by: java.lang.RuntimeException: Binary XML file line #24: You must supply a layout_width attribute. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:25:55.283

您必须为您的布局提供必要的 attributes.layout_height 和 layout_width

# windows - 创建交互式窗口 .bat 文件以将开发文件复制到生产文件夹

> ID：12558806
> 
> 赞同：1
> 
> 时间：2012-09-24T04:20:45.270
> 
> 标签：windows, batch-file, command-prompt, dos

需要专家帮我做简单的窗口 .bat 文件将文件/文件夹复制到不同的特定文件夹中

```
ProjectDevFolder
    /module1
        /module1-1
        /module1-2
    /module2
        /module2-1
            /module2-1-1
                /module2-1-1-1
        /module2-2
    /images
    /css
    /jquery
    /classes
    .jspfile1
    .jspfile2
    .jspfile3
    .jspfile4 
```

**测试目的地**

```
wwwFolder
    /module1
        /module1-1
        /module1-2
    /module2
        /module2-1
            /module2-1-1
                /module2-1-1-1
        /module2-2
    /images
    /css
    /jquery
    /classes
    .jspfile1
    .jspfile2
    .jspfile3
    .jspfile4 
```

窗口命令提示符示例

```
C:\DeployScript.bat
To copy : css module2-1-1-1 jquery *(user can input multiple value with any seperator eg:space is the seperator)*
 - Status deploy css  -done
 - Status deploy module2-1-1-1  -done
 - Status deploy jquery  -done

To copy :   *(Next command)* 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:52:37.093

这个问题至少可以分为两个问题：

*   拆分用户输入
*   复制目录
    *   递归查找目录（module2-1-1-1）

需要澄清的一些问题：

*   如何进入目标根目录
*   如果目标文件夹（或其子文件夹）已经存在会怎样？

* * *

以下是针对这两个问题的一些提示：

*   拆分用户输入：[如何拆分 Windows 批处理文件中的字符串？](https://stackoverflow.com/questions/1707058/how-to-split-a-string-in-a-windows-batch-file)
*   批量递归：[Windows 批处理文件通过目录循环处理文件？](https://stackoverflow.com/questions/8397674/windows-batch-file-looping-through-directories-to-process-files)（去适应）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T22:10:41.160

这会将所有文件和子目录（包括空目录）从 复制`sourceDir`到`targetDir`.

```
XCOPY /S /E /I sourceDir targetDir 
```

`targetDir`不需要存在。`XCOPY`如果需要，将创建它。
要排除空目录，请省略`/e`.

要排除文件，请创建一个包含要排除的文件名称的文本文件，然后使用以下命令：

```
XCOPY /S /E /I /EXCLUDE:files.txt sourceDir targetDir 
```

要了解有关 的更多信息`xcopy`，`XCOPY /?` `ENTER`请在命令提示符处键入。

# google-docs-api - 试用演示中的 Google Drive SDK 更新（删除/插入）所有者权限 500 错误

> ID：12558808
> 
> 赞同：5
> 
> 时间：2012-09-24T04:20:53.883
> 
> 标签：google-docs-api, google-drive-api

我正在开发一个应用程序，它应该为 Google Apps 管理员提供重新分配文件所有权的能力。目前我正在使用带有 C# 代码的 Google Drive SDK for .NET。

当我在[https://developers.google.com/drive/v2/reference/permissions/insert](https://developers.google.com/drive/v2/reference/permissions/insert)的 Google Drive SDK 测试演示中进行身份验证并填写`FileId`属于管理员的文件并尝试插入另一个所有者时Google Apps 域我收到 500 内部服务器错误。我正在使用这些值：

```
POST     https://www.googleapis.com/drive/v2/files/0B1Y4_hVm0vbESlZuZHhBemtjcXM/permissions?key={YOUR_API_KEY}

Content-Type:  application/json
Authorization:  Bearer {MY_ACCESSTOKEN}
X-JavaScript-User-Agent:  Google APIs Explorer

{
 "role": "owner",
 "type": "user",
 "value": "user@mydomain.com"
} 
```

“Try It”演示为我设置了示波器

*   `https://www.googleapis.com/auth/drive`

*   `https://www.googleapis.com/auth/drive.file`

    做这个操作。

我可以通过使用以相同管理员用户身份验证的 Try It 演示来获取文件的权限列表，但我无法插入删除所有者权限。

我选择了 Google Drive SDK，因为它更新并且 Google Docs API 刚刚被贬低，但我愿意使用任何最好的工具来更新所有权。我只是在寻找通往那个目标的最直接的道路。

有没有人让所有权更新工作？如果是这样，您使用了什么工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:46:09.263

我提交了一个内部错误供我们的工程师进行调查，但是，当我尝试与来自外部域的用户而不是来自同一域的用户共享时，我只设法重现了该问题。

Google Apps 域管理员可以阻止其用户将所有权更改为外部用户，但在这种情况下，API 不应返回 500，而是失败并显示描述性错误消息。

我会在收到我们的调查回复后立即更新此答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T22:56:13.707

几个月前我遇到了同样的问题。我昨天重试了它，现在它似乎工作了。谷歌工程师似乎已经解决了这个问题。

希望它也开始为你工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T02:45:30.910

使用 transferOwnership 标志为我解决了这个问题。

在 python api 客户端中，您可以执行以下操作：

```
service.permissions().patch(
        fileId=doc.drive_id, permissionId=permission_id,
        body=patched_permission, transferOwnership=True).execute() 
```

# symfony - Symfony2：用户注册表单中的优惠券字段

> ID：12558813
> 
> 赞同：0
> 
> 时间：2012-09-24T04:21:31.457
> 
> 标签：symfony, registration, coupon

我想在用户注册上设置一个功能：用户可以输入之前生成并存储在表格中的优惠券代码。该字段与用户注册表一起出现。如果他们输入了不存在的代码，则表单不应该验证，应该会出现一条错误消息，告诉他们代码无效。实现这一目标的最佳实践是什么？

我的问题是优惠券字段未链接到用户实体。我可以使用 ajax 检查优惠券代码的有效性，并且只有在代码存在或字段为空时才验证表单。但是，如果我这样继续，我如何访问我的 RegistrationFormHandler 中的优惠券代码数据？目的是为输入有效代码的用户提供特殊特权。

这是一个好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:35:17.143

在您的表单中添加一个带有 false 的文本字段`property_path`：

```
$builder->add('coupon', 'text', array('property_path' => false)); 
```

使用 ajax 或自定义事件订阅者验证它（我更喜欢后者）。在您的控制器中检查表单是否有效应该足够了：

```
if('POST' === $request->getMethod()) {
    $form->bindRequest($request);
}

if('GET' === $request->getMethod() && $form->isValid()) {
    // Here both user and coupon are valid
    $coupon = $form->get('coupon')->getData();
} 
```

# hibernate - 将关联实体的列映射到关联实体字段

> ID：12558815
> 
> 赞同：0
> 
> 时间：2012-09-24T04:21:43.063
> 
> 标签：hibernate, hibernate-mapping

有一个只读的“目录”实体，它在表中预先配置了数据。“BookCatalog”是另一个与“Catalog”表具有多对一关系的实体。

目前我的配置文件如下，

```
<!--Catalog -->
<class name="xxxx.Catalog" table="CATALOG" mutable="false">
   ....
   ....
   <property name="a" type="string">
      <column name="A" />
   </property>
   <property name="b" type="string">
      <column name="B" />
   </property>
</class>

<!-- Book Catalog -->
<class name="xxxx.BookCatalog" table="BOOK_CATALOG">
    ....
    ....
    <many-to-one name="base_catalog" class="xxxx.Catalog" fetch="select">
        <column name="BASE_CATALOG_ID" length="36" />
    </many-to-one>

    <property name="c" type="string">
      <column name="C" />
   </property>
</class> 
```

目前，如果我想访问只读属性 a 和 b，我需要通过“base_catalog”字段进行访问。

我更喜欢将 BookCatalog 作为 Catalog 的子类，并从“CATALOG”只读表中映射属性 a 和 b。

我知道我可以对 CATALOG 表中的每个字段使用“公式”，但由于我有更多字段，因此效率不高。

休眠中有没有其他方法可以将关联实体的列映射到关联实体字段？

或者

有没有更好的数据库设计来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T04:26:35.753

I believe you can use `<component>` as below :

```
<class name="xxxx.BookCatalog" table="BOOK_CATALOG" mutable="false">
  <property name="c" type="string">
    <column name="C" />
  </property>
  <component name = "xxxx.Catalog">
    <property name="a" type="string">
      <column name="A" />
    </property>
    <property name="b" type="string">
      <column name="B" />
    </property>
 </component>
</class> 
```

# matlab - Matlab - 将 varargin 传递给接受可变数量参数的函数

> ID：12558819
> 
> 赞同：14
> 
> 时间：2012-09-24T04:21:59.413
> 
> 标签：matlab

想写一个简写`fprintf(..)`。

`varargin`是一个元胞数组。那么我怎样才能将它传递给`fprintf(..)`? 后者只接受可变数量的数组。

以下不起作用：

```
function fp(str, varargin)
    fprintf(str, varargin);
end 
```

给予

```
Error using fprintf
Function is not defined for 'cell' inputs. 
```

或者

```
Error: Unexpected MATLAB expression. 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-24T04:21:59.413

解决方案是：

```
function fp(str, varargin)
    fprintf(str, varargin{:});
end 
```

使用`{:}`语法将元胞数组扩展为以逗号分隔的列表。

使用匿名函数的快捷方式是

```
fp = @(str, varargin) fprintf(str, varargin{:}); 
```

# php - php根文件夹$_SERVER vs dirname

> ID：12558822
> 
> 赞同：0
> 
> 时间：2012-09-24T04:22:03.897
> 
> 标签：php, pointers, directory, root

任何人都知道是否有指向/调用文件的“最佳”或行业标准？可以说还涉及文件夹和子文件夹。我找到了一些不同的方法来做这件事。只是寻找一些指针〜。^和意见。

Windows 与 Linux（即使我使用的是 Linux，仅适用于看到这篇文章的其他人）

```
 (dirname(__FILE__))
    BASE_PATH
    $_SERVER["HTTP_HOST"]
    $_SERVER['DOCUMENT_ROOT'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:27:46.610

我个人使用这个：

```
require_once __DIR__ . '/../../my/path/to/file.php'; 
```

这样，无论`$_SERVER`、 OS 或包含路径如何，它总是正确的。

# linux - 从标准输出读取特定字符串时终止 bash 进程

> ID：12558838
> 
> 赞同：1
> 
> 时间：2012-09-24T04:24:14.170
> 
> 标签：linux, macos, bash

我正在使用 tail 读取更新的日志文件，如果 grep 返回特定字符串，我希望退出循环。我不确定如何“以编程方式”退出或终止进程

有人有什么好主意吗？这是一些示例脚本：

```
tail -f /var/log/{system.log,kernel.log} | grep -i "vendor: 0x22b8" 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T04:29:59.027

您可以像这样有效地做到这一点：

```
tail -f /var/log/{system.log,kernel.log} | awk '
  {print}
  /vendor: 0x22b8/ {exit}
' 
```

awk 命令将在第一次看到您的字符串时退出。由于 SIGPIPE 机制，tail 命令将在下次尝试写入管道时被终止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T04:53:44.010

使用`grep`最大计数：

```
tail -f /var/log/{system.log,kernel.log} | grep -i "vendor: 0x22b8" -m 1 
```

# assembly - 错误：表达式语法错误

> ID：12558841
> 
> 赞同：1
> 
> 时间：2012-09-24T04:24:57.003
> 
> 标签：assembly, x86, interrupt

嗨，我在编译 x86 汇编代码时遇到问题，我使用 nasm 进行编译，但编译器告诉我语法错误。我不明白，因为我使用了一个简单的标签并跳转到它？有人可以给我解释一下吗..

```
; reads character and prints ascii code in console

[BITS 16]

SEGMENT code
..start:
    mov ax, pile
    mov ss, ax
    mov ax, topofstack
    mov sp, ax

loop:               ; gives syntax error
    mov ah, 00h
    int 16h
    cmp ax, 1c0dh   ; user pressed enter, jump to end
    je end

    mov ah, 09h     ; write character and attribute at cursor position
    mov bh, 0h      ; flags...
    mov bl, 08h
    mov cx, 01h
    int 10h
    jmp loop        ; gives syntax error

end:
    mov ax, 04c00h
    int 21h

SEGMENT pile stack
resb 64
topofstack: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T04:30:32.817

`loop`是一条*指令，*我建议将标签更改为`loop1`.

有趣的是，这不会在我的`nasm`(2.10.03) 版本中导致错误，至少在 command`nasm -fobj xx.asm`中是这样，但事实上你在包含的行上出现了两个错误，`loop`因此可以肯定这是问题所在。

您可能有更早（或更高）的版本，或者您可能正在使用不同的选项。无论如何，当然值得研究。

# sql - 粘贴带有单元格引用的公式时创建自定义单元格增量

> ID：12558844
> 
> 赞同：1
> 
> 时间：2012-09-24T04:25:14.940
> 
> 标签：sql, excel, excel-formula

我有一份关于客户回答一组问题的 excel 报告，评分为 1-5。这是当前表格：（左边的大写字母和数字只代表单元格，不包含在数据中）

```
 A     B    C   D   E
1 Name  Age  Q1  Q2  Q3
2 John  19   5   4   5
3 Bob   18   3   2   5
4 Jess  20   3   5   4 
```

如何获取单元格并显示如下值：

```
 A     B   C   D
1 John  19  Q1  5
2 John  19  Q2  4
3 John  19  Q3  5
4 Bob   18  Q1  3
5 Bob   18  Q2  2
6 Bob   18  Q4  5
7 Jess  20  Q1  3
8 Jess  20  Q2  5
9 Jess  20  Q3  4 
```

粘贴带有单元格引用的公式时，如何创建自定义单元格增量？

我的公式：

> `="INSERT into tableName Values ('" & A 2& "', " & B2 & ", " & C1 & ", " &C2& "); INSERT into tableName Values ('" & A2 & "', " & B2 & ", " & D1 & ", " &D2& "); INSERT into tableName Values ('" & A2 & "', " & B2 & ", " & E1 & ", " &E2& ");"`

公式值：

> `INSERT into tableName Values ('John, 19, Q1, 5'); INSERT into tableName Values ('John', 19, Q2, 4); INSERT into tableName Values ('John', 19, Q3, 5);`

我必须粘贴它才能从所有名称中获取 Q1、Q2 和 Q3。问题是当我将公式粘贴到下一行时，它只会增加单元格引用一行..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:48:07.810

我在另一个网站上看到了一些答案。如果您不想增加公式中的特定单元格，只需转到您的公式并突出显示您不想增加的单元格，然后按 F4。

按 F4 将循环显示可能的动态/绝对组合：

1.  A1; 列和行动态
2.  1美元；列和行绝对值
3.  1澳元；动态列，绝对行
4.  $A1; 列绝对，行动态

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:45:33.953

`Offset`在这种情况下是你的恶魔

将您的示例数据放在 sheet1 中，并将这些公式放在 Sheet2 中......

```
A1: =OFFSET(Sheet1!$A$1,INT(ROW()-1)/3+1,0)
A2: =OFFSET(Sheet1!$B$1,INT(ROW()-1)/3+1,0)
A3: =OFFSET(Sheet1!$C$1,0,MOD((ROW()-1),3))
A4: =OFFSET(Sheet1!$C$1,INT(ROW()-1)/3+1,MOD((ROW()-1),3)) 
```

将这些复制到第 9 行，您将在第二个表中看到该数据

`INT(ROW()-1)/3+1`将从 1 开始增加，但仅每 3 行增加一次
`MOD((ROW()-1),3)`返回 0,1 和 2，按顺序每行

# java - 如何在 Web 服务代码中获取托管 WAS 7.0 服务器 url？

> ID：12558852
> 
> 赞同：0
> 
> 时间：2012-09-24T04:26:11.293
> 
> 标签：java, web-services, websphere-7

我有一个通用代码库部署在四个不同的服务器中，用于各种目的，例如测试环境、开发环境、生产环境等。

但我需要知道代码内部，运行哪个服务器的代码来决定我的代码流。有人知道如何在部署在服务器上的 Web 服务代码中获取服务器 url 或 id 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:01:23.427

方法 1：4 个不同的服务器，意味着四个不同的 URL。

假设您的应用程序网址是

```
http(s)://ipaddress:port/application 
```

现在有可能所有四个服务器实例都在同一台机器上。在这种情况下，“ipaddress”将是相同的。但港口会有所不同。如果在这种情况下机器不同，则 ipaddress 和 port 都会不同。

现在在您的代码中，您可以获得绝对路径。absolutepath 将包含请求绝对路径的文件的完整 URL。喜欢

```
http://ipaddress:port/application/abc/def/x.java. 
```

现在，您可以从中提取端口/IP 地址并编写您的逻辑。

方法2：

在您的应用程序中有一个属性文件，其中包含正在部署的服务器。（现在我想不出自动设置它的东西，但是在部署时你可以在这个属性文件中设置服务器名称）

以后需要的时候。您可以阅读属性文件，您将知道您正在运行哪个版本的应用程序。

我个人更喜欢方法2（如果我们可以考虑自动初始化属性文件，应该更喜欢）

希望能帮助到你 ：-）

# jsf - 在所有 xhtml 页面中包含一个 xhtml 页面

> ID：12558855
> 
> 赞同：1
> 
> 时间：2012-09-24T04:26:45.747
> 
> 标签：jsf, facelets, jsf-1.2

我有一个基于 JSF 1.2 的 Servlet。如果用户闲置一段时间，我正在做会话失效。我必须在会话失效发生前 1 分钟向用户显示一个 Jquery 对话框，并询问用户是要继续还是注销。

我在 xhtml 页面 (session.xhtml) 中有 Jquery 对话框的代码。我的 Web 应用程序中有近 15-20 个页面。用户可以在这 15-20 个页面中的任何一个页面中保持空闲状态。所以，我需要在我的所有 xhtml 页面中包含 session.xhtml 页面。我通过在我的所有页面中使用下面的代码来做到这一点。

```
<ui:insert>
<ui:include src="/session.xhtml" />
</ui:insert> 
```

我这里有两个问题。

a) 随着我的 Web 应用程序中页面数量的增加，我需要继续将上述代码添加到每个页面

b) 代码可维护性：下线，如果其他人必须在我的 Web 应用程序中开发某些页面，他可能不记得包含上述代码

所以，问题是，有什么方法可以放置这个页面（比如在 web.xml 或一些 xml 文件中的某个位置），默认情况下这个 session.xhtml 将可用于我的 Web 应用程序中的所有页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:28:56.537

视图文件可能有一个模板（这是一个很好的做法）：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:a="http://richfaces.org/a4j"
                ...
                template="../layout/maintemplate.xhtml"> 
```

您可以将通用逻辑放入 maintemplate.xhtml。希望这可以帮助。

# ios - 如何创建对对象的引用以在 iOS 中对其进行动画处理

> ID：12558862
> 
> 赞同：0
> 
> 时间：2012-09-24T04:27:55.650
> 
> 标签：ios, xcode, animation, uibutton

我有一个`imageView`，在里面我放了一个按钮。我有两个问题：

*   如何在不丢失功能的情况下正确添加按钮？
*   我如何`imageView`在方法中引用我的动画来为视图设置动画？

编码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImageView *grayFrame = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"expSqrGray.png"]];

    [self.view addSubview:grayFrame];

    grayFrame.frame = CGRectOffset(grayFrame.frame, 0, 0);

    UIButton *testButton = [UIButton buttonWithType:UIButtonTypeCustom];
    testButton.frame = CGRectMake(20, 20, 200, 44);
    testButton.backgroundColor = [UIColor blackColor];
    [testButton setTitle:@"Test" forState:UIControlStateNormal];
    [testButton addTarget:self action:@selector(tapped:) forControlEvents:UIControlEventTouchUpInside];

    [grayFrame addSubview:testButton];
    //[self.view addSubview:testButton];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:39:22.280

我对 Objective-C 知之甚少，但您可能想要做的是创建类`grayFrame`的`testButton`成员变量。这样，您的整个班级都可以访问这两个对象。

例如：

```
// Test.H
@interface YourClass : NSObject {
   UIImageView * grayFrame;
   UIButton * testButton;
} 
```

然后，您可以使用另一种方法来引用其中任何一个。

```
- (void) initializeObjects {
   grayFrame = [ [ UIImageView alloc ] initWithImage:[ UIImage imageNamed:@"expSqrGray.png" ] ];
   testButton = [ UIButton buttonWithType:UIButtonTypeCustom ];

   // Do things here.
} 
```

# c - 在c中找到分段错误的解决方案

> ID：12558866
> 
> 赞同：0
> 
> 时间：2012-09-24T04:29:02.460
> 
> 标签：c, segmentation-fault, elliptic-curve

我正在为 contiki os 移植椭圆曲线密码学（基于纯 c）。我收到分段错误的错误。我使用 xxgdb 进行调试，但仍然找不到原因。而且我对c中的调试没有明确的想法。请帮助如何始终摆脱 c 中的这些分段错误（如何找出发生此分段错误的原因）。

这是我的源代码。

```
#include <stdio.h>
#include <stdint.h>
typedef uint32_t NN_DIGIT;
typedef uint64_t NN_DOUBLE_DIGIT;

/* Types for length */
typedef uint8_t NN_UINT;
typedef uint16_t NN_UINT2;

#if defined (SECP128R1) || defined (SECP128R2)
#define KEY_BIT_LEN 128
#else 
#if defined (SECP160K1) || defined (SECP160R1) || defined (SECP160R2) 
#define KEY_BIT_LEN 160
#else 
#if defined (SECP192K1) || defined (SECP192R1)
#define KEY_BIT_LEN 192
#else
#define KEY_BIT_LEN 128
#endif /* 192 */
#endif /* 160 */
#endif /* 128 */

/* Length of digit in bits */
#define NN_DIGIT_BITS 32

/* Length of digit in bytes */
#define NN_DIGIT_LEN (NN_DIGIT_BITS/8)

/* Maximum value of digit */
#define MAX_NN_DIGIT 0xffffffff

/* Number of digits in key
 * used by optimized mod multiplication (ModMultOpt) and optimized mod square (ModSqrOpt)
 *
 */
#define KEYDIGITS (KEY_BIT_LEN/NN_DIGIT_BITS) //5

/* Maximum length in digits */
#define MAX_NN_DIGITS (KEYDIGITS+1)

/* buffer size
 *should be large enough to hold order of base point
 */
#define NUMWORDS MAX_NN_DIGITS

/* the mask for ModSqrOpt */
#define MOD_SQR_MASK1 0x8000000000000000ll
#define MOD_SQR_MASK2 0x0000000100000000ll

typedef struct Point
{
    // point's coordinates
    NN_DIGIT x[NUMWORDS];
    NN_DIGIT y[NUMWORDS];
} Point;

Point pbkey_alice;
void 
NN_Encode(unsigned char *a, NN_UINT len, NN_DIGIT *b, NN_UINT digits)
{
  NN_DIGIT t;
  int j;
  unsigned int i, u;

  for(i = 0, j = len - 1; i < digits && j >= 0; i++) {
    t = b[i];
    for(u = 0; j >= 0 && u < NN_DIGIT_BITS; j--, u += 8) {
      a[j] = (unsigned char)(t >> u);
    }
  }

  for(; j >= 0; j--) {
    a[j] = 0;
  }
}

int ecc_point2octet(uint8_t *octet, NN_UINT octet_len, Point *P, int compress)
{
    if (compress){
        if(octet_len < KEYDIGITS*NN_DIGIT_LEN+1)
      {//too small octet
        return -1;
    }
    else
    {
          //compressed point representation
            if((1 & P->y[0]) == 0){
        octet[0] = 0x02;
            }
            else
                {
                octet[0] = 0x03;
                }
            NN_Encode(octet+1, KEYDIGITS*NN_DIGIT_LEN, P->x, KEYDIGITS);
            return KEYDIGITS*NN_DIGIT_LEN+1;
      }
    }
  else
  {//non compressed
     if(octet_len < 2*KEYDIGITS*NN_DIGIT_LEN+1)
    {

        return -1;
    }
    else
    {
            //octet[0] = 0x04;
            NN_Encode(octet+1, KEYDIGITS*NN_DIGIT_LEN, P->x, KEYDIGITS);
            NN_Encode(octet+1+KEYDIGITS*NN_DIGIT_LEN, KEYDIGITS*NN_DIGIT_LEN, P->y, KEYDIGITS);
            return 2*KEYDIGITS*NN_DIGIT_LEN+1;
        }
  }
}

int main()
{
pbkey_alice.x[5] = 0x00000000;
  pbkey_alice.x[4] = 0x21961f69;
  pbkey_alice.x[3] = 0xf02d202b;
  pbkey_alice.x[2] = 0xa4b41f1a;
  pbkey_alice.x[1] = 0x0aa08a86;
  pbkey_alice.x[0] = 0xdf27908d;

  pbkey_alice.y[5] = 0x00000000;
  pbkey_alice.y[4] = 0x378e1278;
  pbkey_alice.y[3] = 0x62836d75;
  pbkey_alice.y[2] = 0x7acb7ca4;
  pbkey_alice.y[1] = 0x0dc0ad13;
  pbkey_alice.y[0] = 0x741e287c;
uint8_t *C;
int C_len = 2*KEYDIGITS*NN_DIGIT_LEN + 1 + 20 + 20;
int oct_len = ecc_point2octet(C, C_len, &pbkey_alice, 0);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T04:34:43.963

在`C`将其传递给`ecc_point2octet()`. 这似乎是您所看到的那种问题的秘诀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:51:49.940

正如卡尔所说，只需替换 : 就`uint8_t *C`可以`uint8_t *C = malloc(sizeof(uint8_t))`了。

# php - 我想在数据库中存储动态可增加形式的数据

> ID：12558870
> 
> 赞同：1
> 
> 时间：2012-09-24T04:29:20.593
> 
> 标签：php, database, forms

我有一个表格，可以通过单击“[+]”符号来增加其字段。

我用于表单的代码是 Description Quantity Price ';

```
// Loop to prepare the display of 100 product lines
for ($i=0; $i<100; $i++) {

   if ($text['quantity'][$i] == "") $text['quantity'][$i] = 1;
   if ($text['unit'][$i] == "") $text['unit'][$i] = "0.00";
   // Display only the first line
   if ($nbr_ligne == 0) $nbr_ligne = 1;
   if ($i >= $nbr_ligne) $display = 'style="display:none"';
   echo '
   <tr id="cell'.$i.'" '.$display.'>
       <td>
           <textarea name="text[detail]['.$i.']">'.stripslashes($text['detail'][$i]).'</textarea>
           <br />
           <a href="javascript:void(0)" onclick="javascript:document.getElementById(\'cell'.($i+1).'\').style.display=\'table-row\'; this.style.display=\'none\'">[+]</a>
       </td>
       <td>
           <input name="text[quantity]['.$i.']" id="q'.$i.'" value="'.stripslashes($text['quantity'][$i]).'" size="4" />
       </td>
       <td>
           <input name="text[unit]['.$i.']" id="u'.$i.'" value="'.stripslashes($text['unit'][$i]).'" size="7" /> USD
       </td>
   </tr>';
}

echo '
   </table>
   <input type="submit" name="save" value="Save" />
</form>
';
if(isset($_POST['save']))
{
    echo $text['quantity']['.$i.'];

       mysql_connect("localhost","root","");
       mysql_select_db("rvt") or die("unable to select db");
       extract($_POST);
       $insert=mysql_query("insert into add(description, quantity, price) values('$text[detail][".$i."]','$text[quantity][".$i."]','$text[unit][".$i."]')");
    if($insert)
    {
        echo "hi";
    }
}
?> 
```

我想将数据存储到数据库中。它不起作用。

请帮助我将数据存储在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:32:42.850

由于 PHP 解析器“错误”，您的查询将无法工作。它不是一个贪婪的解析器，所以类似于：

```
echo "$array[1][2]"; 
```

实际上会作为输出产生

```
Array[2]   <---yes, the literal word 'Array'. 
```

而不是存储在索引 1 的子数组的索引 2 处的任何值。

因为 PHP 的解析器在第一组`[]`. 您需要使用`{}`符号：

```
... values('{$text['detail'][$i]}', etc...
            ^                   ^ 
```

注意 的位置，以及detail 键周围的`{}`附加项。`'`

同样，请不要使用`extract()`，尤其是在 _GET/_POST 上。您实际上是在重现在 PHP 中打开 register_globals 时非常糟糕的糟糕日子。这是一个等待被利用的安全漏洞。

# security - 基于 unicode 的 XSS 是个问题吗？

> ID：12558875
> 
> 赞同：4
> 
> 时间：2012-09-24T04:30:02.110
> 
> 标签：security, unicode, xss, cjk

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T05:18:32.843

That would be in direct violation of HTML specifications. By them, the markup-significant characters are Ascii characters, whereas characters like U+FF1C FULLWIDTH LESS-THAN SIGN “＜” are just data characters with no special significance. Browsers would need extra code to map fullwidth characters to Ascii (either as an ad hoc mapping or e.g. via normalization to NFKD or NFCKC), but there’s no reason to assume they would do such things, any more than there is a reason to think that they could start mapping “[” to “&lt;”.

So a blog that claims otherwise is just describing a possibility that someone invented but has no real grounds. You can usually see this from the references and demonstrations given. (That is, from the absence of them.)

There are surely security issues around Unicode characters that look similar to each other, but then it’s a matter of human beings mistakenly taking one character for another even though they are internally quite different, like “＜” for “&lt;” (and therefore e.g. seeing a string in HTML source as a `script` element even though it isn’t) or “а” for “a” (a Cyrillic letter for a Latin letter with identical appearance). That is, people may see characters as identical even though programs see them as distinct.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-19T20:27:52.500

No, a *browser* will not interpret text surrounded by fullwidth LT or GT signs as valid HTML tags, but certain *backends* will transform them into normal LT or GT signs, creating an XSS risk. See the following: [http://websec.github.io/unicode-security-guide/character-transformations/#best-fit](http://websec.github.io/unicode-security-guide/character-transformations/#best-fit)

# python - 为什么这在 python 3.2.3 上不起作用

> ID：12558878
> 
> 赞同：-1
> 
> 时间：2012-09-24T04:30:50.300
> 
> 标签：python, python-3.x

> **可能重复：**
> [Python 3.2.3 编程……几乎可以正常工作](https://stackoverflow.com/questions/12558717/python-3-2-3-programming-almost-had-it-working)

```
x = float(input("What is/was the cost of the meal?"))
y = float(input("What is/was the sales tax?"))
z = float(input("What percentage tip would you like to leave?"))

print ("Original Food Charge: ${}"
.format(x)))
print ("Sales Tax: ${}"
.format((y/100)*x)))
print ("Tip: ${}"
.format(x*(z/100)))
print ("Total Charge For Food: ${}"
.format(x+((y/100)*x)+((z/100)*x))) 
```

输出错误：

第 10 行，语法错误：.format(x))):line 1015

有人报告说这在他们早期版本的python（我认为是v2.6）中有效。我正在使用后来的 3.2.3 并绞尽脑汁想知道为什么这不适用于这个版本。有人请启发我，这对我来说很有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T04:33:17.557

第三次打印后您错过了一个结束括号：`.format(x*(z/100)))`

这是我固定括号后的工作版本：

```
x = float(input("What is/was the cost of the meal?"))
y = float(input("What is/was the sales tax?"))
z = float(input("What percentage tip would you like to leave?"))

print("Original Food Charge: ${}".format(x))
print("Sales Tax: ${}".format((y/100)*x))
print("Tip: ${}".format(x*(z/100)))
print("Total Charge For Food: ${}".format(x+((y/100)*x)+((z/100)*x))) 
```

如果行宽小于 79，也不需要换行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T04:33:30.620

您在前一行缺少一个紧密的括号：

```
.format(x*(z/100)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T04:34:11.307

后面少了一个括号`.format(x*(z/100))`，属于前面的`print`。

它应该是：

```
print ("Tip: ${}".format(x*(z/100))) 
```

**更新：**不确定您是否可以正常工作，这是修复不平衡括号后的完整代码...

```
x = float(input("What is/was the cost of the meal?"))
y = float(input("What is/was the sales tax?"))
z = float(input("What percentage tip would you like to leave?"))

print ("Original Food Charge: ${}"
.format(x))
print ("Sales Tax: ${}"
.format((y/100)*x))
print ("Tip: ${}"
.format(x*(z/100)))
print ("Total Charge For Food: ${}"
.format(x+((y/100)*x)+((z/100)*x))) 
```

# ios - 检查不完整的响应

> ID：12558879
> 
> 赞同：0
> 
> 时间：2012-09-24T04:31:00.900
> 
> 标签：ios

当我的应用程序启动时，我通过点击服务 url 并将其保存在本地数据库中来接收 xml。我已应用可达性代码来检查连接是否已关闭。如果它已关闭，那么它将显示警报并且不会在用户交互被禁用时继续进行。但是，有时在获得响应时互联网连接无法访问。此时，用户交互在我得到响应时启用，但数据损坏导致应用程序在我想要时崩溃使用 xml 中不存在的一些数据。我无法对此采取正确的方法。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:41:05.457

您需要验证收到的任何输入。即使您始终保持网络连接，您使用的服务也有可能发送不完整或格式不正确的数据。具体如何操作取决于您，但有两种选择：

*   在您从服务接收数据时验证数据。当您收到 XML 数据时，您可能会先对其进行解析，然后再将其存储到本地数据库中。这是发现数据不完整的绝佳机会，此时您可以决定可以将多少（如果有）数据添加到数据库中。

*   在从数据库中检索数据时验证数据。如果数据可能零零散散地流入，您可能更愿意在获取数据后进行一些完整性检查，以确保数据库在继续之前为您提供了所需的一切。

# perforce - 请参阅每个用户的 Perforce 命令历史记录

> ID：12558881
> 
> 赞同：1
> 
> 时间：2012-09-24T04:31:02.663
> 
> 标签：perforce, obliterate

我们正试图找出一个神秘的 p4 obliterate 命令。有没有办法查看服务器上的命令历史记录，它是从哪个客户端发出的，等等？历史信息是否存储在某个地方？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:24:31.117

您可以检查您的服务器日志。这取决于您的服务器在哪个操作系统上运行，以及它是如何设置的。我会检查是否在您的服务器上或在您用于启动服务器的命令行上设置了 P4LOG。如果没有检查 P4ROOT 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:39:18.303

就像 aflat 所说的，如果 P4LOG 已设置，您需要检查它。p4 obliterate 的条目可能有点难以识别，因此您可能需要查看以下 URL [http://kb.perforce.com/article/1107](http://kb.perforce.com/article/1107)以了解要查找的内容。

如果您的服务器没有设置 P4LOG，您也可以尝试查看实际的 Perforce 日志文件，该文件跟踪 Perforce 中的所有事务。但是我必须警告你，直接访问日志文件是高风险的，如果不先联系 Perforce 支持，就不要这样做。

# knockout.js - 嵌套视图模型中的淘汰事件处理程序

> ID：12558884
> 
> 赞同：0
> 
> 时间：2012-09-24T04:31:25.230
> 
> 标签：knockout.js, knockout-2.0

我有多个需要导航菜单的 UI 组件。我正在尝试创建其他视图模型可以使用的 MenuItem 视图模型。

这个想法类似于[Knockout Webmail 示例](http://learn.knockoutjs.com/WebmailExampleStandalone.html "淘汰网络邮件示例")。

例如，“Window”视图模型可以有一个“MenuItems”数组。MenuItem 包含所有行为功能（悬停和活动状态）。

虽然在我的用例中悬停和活动状态是相当标准的，但每个 MenuItem 都需要单独触发一个点击处理程序。

如果我可以在 MenuItem 视图模型中附加事件回调，这样父视图模型可以处理每个菜单项的单击事件，那将是理想的。

我可以在父 viewModel 中定义点击处理程序，**但是如何在 foreach 模板绑定中引用每个 MenuItem 的点击处理程序？**

我仍在尝试并在[jsFiddle](http://jsfiddle.net/jasonnathan/ChK43/)中创建了一个示例。我现在对标记不太满意，因为数据绑定太冗长了。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T04:51:16.000

尝试使用`ko.contextFor(this)`.

看看[Ko 不显眼的事件处理程序](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)

# php - Rtrtr.com 电子邮件地址

> ID：12558886
> 
> 赞同：0
> 
> 时间：2012-09-24T04:31:52.457
> 
> 标签：php, web-applications

我是 Web 开发人员的新手。几天前，在我的网站上注册了 rtrt.com 电子邮件地址。是来自黑客吗？我们应该保护这封电子邮件？出于安全目的，我们是否应该避免使用其他电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:35:45.683

Rtrtr.com 只提供一次性电子邮件地址 - 他们不想使用他们的实际电子邮件地址进行注册，所以他们使用了一个临时地址......

人们这样做是为了绕过“单击此处确认您的帐户”注册步骤，而无需向您提供他们的实际电子邮件地址。如果您想阻止人们使用一次性电子邮件地址，那么是的，您需要阻止此域和许多其他域！

# java - 更改光标大小

> ID：12558887
> 
> 赞同：0
> 
> 时间：2012-09-24T04:31:58.113
> 
> 标签：java, cursor, custom-component

我使用以下方法创建了一个游标：

```
 BufferedImage im=null;
    try {
        im = ImageIO.read(new File("images/cursor1.jpg"));
    } catch (IOException ex) {
        Logger.getLogger(SRGView.class.getName()).log(Level.SEVERE, null, ex);
    }
    Cursor cursor = getToolkit().createCustomCursor(im, new Point(1,1), "s");
    this.setCursor(cursor); 
```

cursor1.jpg 是 5X5（以像素为单位）。但是，当它显示在屏幕上时，它要大得多。我想制作大小为 1X1、5X5、10X10 的游标。我宁愿动态创建图像而不是读取图像文件。IE

```
for (int x = 0; x < w; x++) {
        for (int y = 0; y < h; y++) {
        im.setRGB(x, y, new Color(255, 0, 0).getRGB());
  }
    } 
```

上面的代码将创建一个宽度、w 和高度为 h 的红色图像“im”，我想用它作为我的光标。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:13:38.033

似乎 windows 只接受 32X32 大小的光标。所以这就是我解决问题的方法：

主要思想是使 32X32 大小的图像中的每个像素都透明，并仅将颜色应用于您希望在光标中看到的那些像素。在这种情况下，我想要 awxh 红色矩形光标，因此，在 32X32 图像的中心，我将 wxh 像素设置为红色并将该图像设置为光标。

```
public void setCursorSize(int w, int h) {
    this.cw = w;
    this.ch = h;
    if (w > 32) {
        w = 32;
    }
    if (h > 32) {
        h = 32;
    }
    Color tc = new Color(0, 0, 0, 0);
    BufferedImage im = new BufferedImage(32, 32, BufferedImage.TYPE_4BYTE_ABGR);//cursor size is 32X32
    for (int x = 0; x < 32; x++) {
        for (int y = 0; y < 32; y++) {
            im.setRGB(x, y, tc.getRGB());
        }
    }
    for (int x = 16 - w / 2; x <= 16 + w / 2; x++) {
        for (int y = 16 - h / 2; y <= 16 + h / 2; y++) {
            im.setRGB(x, y, new Color(255, 0, 0).getRGB());
        }
    }
    this.setCursor(getToolkit().createCustomCursor(im, new Point(16, 16), "c1"));
} 
```

# ruby-on-rails - 如何让我的服务器以最好的方式处理大量的 Ajax 响应？

> ID：12558895
> 
> 赞同：0
> 
> 时间：2012-09-24T04:34:18.083
> 
> 标签：ruby-on-rails, http, heroku, webserver, webrick

我有一段时间没有使用服务器了，所以这可能是一个非常明显的问题。

我在 Heroku 上使用 WeBRick 来托管 Rails 应用程序（我知道我应该使用更好的服务器，但现在还为时过早）。当用户单击我的应用程序上的一个按钮时，它会立即向服务器发起大约 100 个 Ajax 调用，每个调用都将调用服务器端的一个方法，该方法访问一个 URL，从中获取一些数据，然后返回。一旦客户端确定所有 Ajax 调用都已完成（使用计数器），所有响应都会被组合成一个有凝聚力的东西。

首先它很慢，而且我没想到我的免费 Heroku 应用程序能够优雅地同时处理很多人使用它。一旦很多人开始使用它，我就希望它运行得非常缓慢。

我在 Chrome 中打开了两个选项卡，让它们同时向 Heroku 发出请求。发生的事情是一个人可以正常使用它，但另一个人必须等到第一个人的请求完全完成后才能开始。

然后我在 Chrome 中打开一个选项卡，在 Safari 中打开另一个选项卡，除了这次我使用 localhost 而不是 Heroku。Chrome先运行正常，然后我点击Safari中的按钮。Safari 有一段时间没有做任何事情，然后最终它开始了，他们似乎都走得更慢了。

第一种情况发生了什么，我有哪些改善这种情况的选择？我也很感激有人指出资源或向我介绍在这种情况下我不知道的基础知识。

# android - 如何在eclipse中显示android项目的bin文件夹？

> ID：12558896
> 
> 赞同：5
> 
> 时间：2012-09-24T04:34:19.737
> 
> 标签：android, eclipse

我正在使用日食 Helios。我的问题是我在 Eclipse 的项目中看不到 bin 文件夹。实际上它在我的项目实际位于的项目中（在工作区中）。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T04:44:02.990

eclipse左下角有一个“显示视图”选项，从那里找到/选择导航器外观以显示文件夹，这将显示**bin**文件夹。看图片 ![](../Images/6636da8828580308300579a9d33447be.png)

# jquery - 使用 $.fancybox() onclick 打开 Youtube 视频

> ID：12558897
> 
> 赞同：0
> 
> 时间：2012-09-24T04:34:32.123
> 
> 标签：jquery, fancybox

我正在尝试使用以下代码在灯箱中打开 Youtube 链接：

```
<a href="#" onclick="$.fancybox( ['http://www.youtube.com/watch?v=123'] );">Click me</a> 
```

灯箱会触发，但不是 Youtube 播放器，它只是 URL 的静态文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:05:11.567

*HTML 标记*

```
 <a class="video"  title="The Falltape" href="http://www.youtube.com/v/ZeStnz5c2GI?fs=1&amp;autoplay=1"><img src="images/1.jpg" alt="" /></a> 
```

*jQuery 标记*

```
jQuery(document).ready(function() {

   $(".video").click(function() {
       $.fancybox({
         'padding'      : 0,
         'autoScale'    : false,
         'transitionIn' : 'none',
         'transitionOut': 'none',
         'title'        : this.title,
         'width'        : 640,
         'height'       : 385,
         'href'         : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
         'type'         : 'swf',
         'swf'          : {
             'wmode'            : 'transparent',
             'allowfullscreen'  : 'true'
          }
       });

       return false;
   });
}); 
```

使用的代码是从快速谷歌搜索中找到的。[http://webdesignandsuch.com/fancybox-youtube-videos/](http://webdesignandsuch.com/fancybox-youtube-videos/)

# android - 如何在不强制关闭应用程序的情况下留在活动中

> ID：12558902
> 
> 赞同：-1
> 
> 时间：2012-09-24T04:35:19.507
> 
> 标签：android

在我的应用程序中，当我单击菜单按钮时，它将转到一个活动，我将从远程服务器加载数据和图像到自定义列表视图。问题是如果 WiFi 关闭，我会在第二个活动中崩溃。我已将代码放在 try catch 块中，并在 catch 部分中将适配器设置为 null。因此，当我单击按钮时，它将进入活动，如果 WiFi 已关闭，因为我在 catch 活动中设置了 adapter = null 将不显示列表视图。我怎样才能留在菜单屏幕上而不会崩溃。任何想法？

```
 Intent mainIntent = new Intent( SplashScreenActivity.this, GiftListActivity.class );
        SplashScreenActivity.this.startActivity( mainIntent ); 
```

这是我对第二项活动的呼吁。

```
try{
    adapter = new GiftJewelryListAdapter(GiftListActivity.this, giftlist);
    itemsListView.setAdapter(adapter);
}
catch(Exception e){
    adapter=null;
    MyAlertDialog.ShowAlertDialog(GiftJewelryListActivity.this, "", "Check Network Connection", "OK");
} 
```

在显示消息“检查网络连接”后，我想留在我调用的活动中。我应该在这里做什么改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:51:51.553

您可以在调用新活动的活动中检查网络可用性。如果网络可用，您可以开始新活动。

以下函数用于检测设备是否连接到网络。

```
 public static boolean isNetworkAvailable(Context context) {
     ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
     if (connectivity != null) {
        NetworkInfo[] info = connectivity.getAllNetworkInfo();
        if (info != null) {
           for (int i = 0; i < info.length; i++) {
              if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                 return true;
              }
           }
        }
     }
     return false;
  } 
```

您可以调用如下所示的函数...

```
if(!isNetworkAvailable(context))
     MyAlertDialog.ShowAlertDialog(GiftJewelryListActivity.this, "", "Check Network Connection", "OK")
else{
     Intent mainIntent = new Intent( SplashScreenActivity.this, GiftListActivity.class );
     SplashScreenActivity.this.startActivity( mainIntent );
} 
```

不要忘记在 Manifest.XMl 中添加权限。

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

希望能帮助到你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T04:42:45.083

我认为不要使用 try catch 块，而是在调用第二个活动之前检查 wifi 连接是否可用。仅当连接可用时，才调用第二个活动。这样你就可以留在当前的活动中。[请参阅此链接](https://stackoverflow.com/questions/1560788/how-to-check-internet-access-on-android-inetaddress-never-timeouts)，其中解释了有关检查互联网连接的说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T04:47:56.827

一种方法是检测用户何时点击警告对话框的 OK 按钮，方法是定义一个`DialogInterface.OnClickListener`您调用`YourActivity.this.finish()`以关闭活动并返回到前一个活动的方法。

# iphone - 创建用于播放 RTSP 流媒体视频的应用程序

> ID：12558906
> 
> 赞同：3
> 
> 时间：2012-09-24T04:35:54.050
> 
> 标签：iphone, ios, rtsp, live555, rtsp-client

我想创建一个播放 RTSP 流视频的应用程序。我在 SO 上发现了很多关于相同的问题。每个问题都指向我[live555](http://www.live555.com)。我按照链接下载了 c++ 库。起初我无法构建它，我再次得到了 SO 的帮助，并实施了提供的解决方案。

到目前为止我遵循的过程是：

*   在终端中，我选择我的库的路径，而不是`cd live`我放置库的所有文件的位置。
*   输入`./genMakefiles iphoneos`到终端 终端没有错误或成功响应
*   在我使用`make`错误发生时的上层命令之后`-bash: make: command not found`
*   当我使用`./genMakefiles iphoneos make`响应是`Usage: genMakeFiles <os-platform>`

我无法弄清楚我怎样才能知道图书馆是否成功构建？如果是，如何在 ios 应用程序中使用它？

我们需要访问和创建实例哪些类？

如果库未构建，我该如何构建它？同样，我如何从构建位置使用它。

我尝试了以下链接

*   [Live555 编译 iOS 构建错误](https://stackoverflow.com/questions/11369933/live555-compile-for-ios-build-error)
*   [H.264 over RTP/RTSP (iPhone)](https://stackoverflow.com/questions/6691147/h-264-over-rtp-rtsp-iphone)
*   [如何为 iphone 应用程序开发配置 live555 框架？](https://stackoverflow.com/questions/5191819/how-to-configure-live555-framework-for-iphone-app-devleopment)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:30:00.993

通常不会，没有其他人报告过。但是，如果不是，该框架应该在搜索路径中。对于那个很抱歉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:58:03.903

试试这个，它还不是很完美，但我们正在积极开发它。

[https://github.com/mooncatventures-group/RtspFrames-test](https://github.com/mooncatventures-group/RtspFrames-test)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T13:50:30.690

你下载的是 frameExtractor ，你可以下载 rtspplay ，它是一个基于 ffplay 的完整播放器，但是它确实使用了 SDL。FFPlayer-tests ，仍然提取帧，但可以编写仅视频的 h264 电影。

现在这就是我们开源产品的范围。但我们正在根据我们的商业产品开发一些产品。其中都包含音频，大部分都是open gl。

如果您想加入我们的 Facebook 群组，我相信我们可以解决一些问题，如果您可以获得更多信息，请访问我们的服务网站 wwww.mooncatbastet.com，了解详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T01:32:14.433

您可能没有为 OSX 安装命令行工具。假设您有 Xcode，请按照以下说明操作：[Xcode 4.4 及更高版本安装命令行工具](https://stackoverflow.com/questions/9329243/xcode-4-4-and-later-install-command-line-tools)

然后您应该能够使用以下命令构建 live555：

./genMakefiles iphoneos

请注意，根据您的 osx 版本，您可能需要更改 Live555 的 Makefile 在哪里寻找 arm/build 工具。

# javascript - 如何等待所有 AJAX 继续 Javascript 功能？

> ID：12558908
> 
> 赞同：0
> 
> 时间：2012-09-24T04:36:30.457
> 
> 标签：javascript, ajax, jquery

我有一个 Chrome 扩展程序，我终于开始更新 [已经超过 6 个月]。
我经历了将清单版本从 1 升级到 2 的过程。

我的扩展程序向 Facebook 添加了一个“全部戳”按钮，因此您不必单独戳每个人。

问题是，他们将戳移到了 facebook.com/pokes，而不是在主页的框架中。

所以我的解决方法是告诉人们在/pokes 上重新加载页面，这样脚本就会重新加载，并注入“Poke All”按钮。现在，我想解决这个问题，以便当用户访问 facebook.com，然后单击“戳”并加载戳时，该按钮会自动出现。我已经用 setTimeout 设置了 1.5 秒，但是如果有人的连接速度很慢，1.5 秒是不够的，并且脚本试图过早地注入按钮，导致没有按钮。

所以基本上，我在“Pokes”链接中添加了一个事件监听器。这就是我添加超时运行的原因`show_pokes()`，它运行注入代码。

我的想法是放一个`$(document).ready()` **inside** `show_pokes()`，但这不起作用，因为它从未在函数中继续存在。我猜`$(document).ready()`只是为了初始页面加载？所以我尝试了

```
document.addEventListener('DOMContentLoaded', function (){ /*huge chunk of code here*/ }) 
```

但这也只是挂起，从未完成该功能。

因此，我很确定当您单击 Facebook 选项卡时，Facebook 会使用 AJAX 请求 [请参见[此处](http://imageshack.us/a/img443/6369/87426057.png "这里")]，所以也许我可以设置一个事件以等待 AJAX 完成，然后它可以在我的函数中继续，并注入按钮？任何帮助将不胜感激，或者如果您需要更多代码或更多细节，请告诉我。或者，如果你可以去 Facebook 看看它是如何加载这些标签的，[并确认或否认它是否使用 AJAX]，那也会有很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:48:32.147

我不知道这是否会对您有所帮助，但听起来您可以使用`$.when().done()`jQuery 提供的。`when()`这样，它将等到`done()`.

[http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:56:56.843

正如杰里米所说，增加一个计数器。请注意，在此循环期间 AJAX 返回`i`将继续进行。如果您需要保留当前，`i`那么您需要将 AJAX 调用放在闭包中。

```
var pokes = $(".pokeMe");
var poked = 0;
var failed = 0;

for(var i = 0; i < pokes.length; i++) {
    $.ajax({
        url : url, 
        success : function(data) {
            poked++;

            if (poked + failed == pokes.length) {
                // all actions returned
            }
        },
        error : function(data) {
            failed++;

            // optional logic
        }
    });
} 
```

# ruby - Ruby - 在网络套接字上接收多行

> ID：12558909
> 
> 赞同：1
> 
> 时间：2012-09-24T04:36:44.917
> 
> 标签：ruby, sockets

我正在编写一个基本的网络日志记录脚本，客户端可以连接到我的服务器套接字，并且从套接字读取的所有数据都将写入文件。

我有它，所以我可以与 telnet 连接，并且第一行（在按下 enter 之前）被写入文件，但后续行没有被写入。我需要更改什么才能使其正常工作？

我还希望能够让多个侦听套接字写入同一个文件 - 有没有办法在没有多线程的情况下做到这一点？

```
log_path ||= "./network-logs"
listen_port ||= 2509
minute_buffer = {now: Time.now, buffer: "" }
current_time = Time.now
current_date = Date.today.to_s
client = nil
Dir.mkdir(log_path) unless File.exists?(log_path)
f = File.new("#{log_path}/#{current_date}.txt", 'w')

def short_time
  "%02d" % Time.now.hour.to_s + ':' + 
  "%02d" % Time.now.min.to_s + ':' + 
  "%02d" % Time.now.sec.to_s
end

server = TCPServer.open(listen_port)
loop {                                  
  client = server.accept                
  f.puts "#{Time.now} Client Connected"
  puts "#{Time.now} Client Connected"
  current_time = Time.now               
  if minute_buffer[:now].min != Time.now.min 
    f.puts "##### Minute summary for #{minute_buffer[:now].to_s}: #{minute_buffer[:min]} :"
    puts "##### Minute summary for #{minute_buffer[:now].to_s}: #{minute_buffer[:min]} :"
    f.puts "##### #{minute_buffer[:buffer]}"
    minute_buffer[:now] = Time.now
    minute_buffer[:buffer] = ""
  end
  data = client.gets
  f.puts short_time + "  : " + data.to_s
  puts short_time + "  : " + data.to_s
  minute_buffer[:buffer] = minute_buffer[:buffer] + data.to_s
  if current_date != Date.today.to_s
    f.close
    current_date = Date.today.to_s
    f = File.new("#{log_path}/#{current_date}.txt", 'w')
  end
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:26:53.540

您必须将`client = server.accept`行移出循环：

```
...
server = TCPServer.open(listen_port)
client = server.accept # <- moved out of the loop
loop {                                  
  f.puts "#{Time.now} Client Connected"
... 
```

# iphone - 应用程序试图在目标上呈现一个 nil 模态视图控制器

> ID：12558910
> 
> 赞同：1
> 
> 时间：2012-09-24T04:37:06.373
> 
> 标签：iphone, objective-c, ios, ipad

我收到以下错误：

```
Application tried to present a nil modal view controller on target <UINavigationController: 0x2007af00>. 
```

在以下代码上：

```
-(void) showAddressBookDialog
{
    [self presentMailComposeViewController:nil];
}

- (void)presentMailComposeViewController:(NSString *)recipient {
    // Create the compose email view controller
    MFMailComposeViewController *composeEmailViewController = [[MFMailComposeViewController alloc] init];
    [composeEmailViewController setMailComposeDelegate:self];
    [composeEmailViewController setSubject:@"Join me on X"];
    [composeEmailViewController setToRecipients:[NSArray arrayWithObjects:recipient, nil]];
    [composeEmailViewController setMessageBody:@"" isHTML:YES];
    [composeEmailViewController setModalPresentationStyle:UIModalPresentationFormSheet];
    [self dismissModalViewControllerAnimated:NO];
    self.inviteFriendsMailComposerVC_ = composeEmailViewController;
    //[self.navigationController presentModalViewController:composeEmailViewController animated:YES];
    [self.navigationController presentViewController:composeEmailViewController animated:YES completion:nil];
    [composeEmailViewController release];
} 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:47:46.263

我想知道你为什么要先解雇你的观点......从你的方法中删除这一行

```
[self dismissModalViewControllerAnimated:NO]; 
```

最好先检查设备是否配置为发送电子邮件。看到这个[链接](http://ioscoderef.blogspot.com/2012/09/using-inapps-email-for-ios-in-xcode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:43:39.807

`navigationController`是 all 的属性，`UIViewControllers`它为您提供其父导航视图控制器（如果存在）。听起来您从未添加 `yourviewController`到导航控制器的视图控制器堆栈中。

# asp.net-mvc-3 - 大型项目中带有 EF 解决方案设计的 MVC

> ID：12558914
> 
> 赞同：1
> 
> 时间：2012-09-24T04:37:18.957
> 
> 标签：asp.net-mvc-3, wcf, design-patterns, projects-and-solutions, business-logic-layer

我可以使用 MVC 解决方案的默认设计。例如，控制器：

```
public class ProductController : Controller
   {
       private Entities db = new Entities();

       public ViewResult Details( int id )
          {
              Product product = db.Products.Single( p => p.ID == id );
              return View( product );
          }
    } 
```

但是我在一些大型项目中看到，调用任何方法，他们只使用服务，例如

```
public class ProductController : Controller<ISomeService>
{
 public ViewResult Details( int id )
    {
       Product product = MyService.GetProductById();
       return View( product );
    }
} 
```

并且**不在**控制器中使用数据库实例，例如：

`private Entities db = new Entities();`

**模型**、**数据库**和**业务逻辑**是解决方案中的不同项目。

我可以从哪里了解任何样本中的这种结构？（抱歉英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:40:53.163

我会看看在 ASP.NET MVC 中使用依赖注入，这里有一篇关于这个主题的文章：

[http://weblogs.asp.net/shijuvarghese/archive/2010/04/30/dependency-injection-in-nerddinner-app-using-ninject.aspx](http://weblogs.asp.net/shijuvarghese/archive/2010/04/30/dependency-injection-in-nerddinner-app-using-ninject.aspx)

然后看一下在实体框架中使用 Repository/UnitOfWork 模式，另一篇文章：

[http://www.codeproject.com/Tips/309753/Repository-Pattern-with-Entity-Framework-4-1-and-C](http://www.codeproject.com/Tips/309753/Repository-Pattern-with-Entity-Framework-4-1-and-C)

如果你对自己编写所有这些代码不感兴趣，你可以使用，或者至少看看它是如何完成的，在这里：

[http://mvcbootstrap.codeplex.com](http://mvcbootstrap.codeplex.com)

# ruby-on-rails-3.2 - 如何将 NAMED SCOPES（或其他声明）添加到已安装 gem（例如我们的 Forem gem）的模型中？

> ID：12558915
> 
> 赞同：0
> 
> 时间：2012-09-24T04:37:35.830
> 
> 标签：ruby-on-rails-3.2

**环境**

红宝石 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin10.8.0]；导轨 3.2.6；OSX 10.6.8；设计（2.0.4）；**前红地毯（1.0.0）**

**客观的**

我们需要在 Forem 安装 (gem) 中部署额外的订单控制。很可能，我们还想声明更多的模型属性；并且假设我们会这样做：

1.  **通过将命名范围附加**到基础 Forem 模型；
2.  或**通过覆盖底层模型**。

**问题**

*我们会*怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T19:59:05.967

**答案 ― 如何解释装饰器中的异常执行**

一位同事将我的请求指向现有的 Forem 文档（**[Forem：Extended Classes](https://github.com/radar/forem#extending-classes)**），它**可以**很好地回答这个问题，但以下**非常可能**的例外情况除外：

直到现在我还没有做出回应的一个原因是，尝试遵循推荐的模式最初并未成功，因为*一些*底层代码（少数例外）引用了模型类，而没有将它们作为 Forem 引擎的前缀。因此，起初，这条路线似乎根本行不通；并且，（我仍然不确定所有的后果是什么），**因此似乎有必要使用修订后的引用来覆盖底层方法（它没有以“Forem::”开头的引用），形式为“Forem ::ModelName”**（与“ModelName”相对）。

正如 Github 上的 Forem 文档页面所示：

“Forem 的所有业务逻辑（模型、控制器、助手等）都可以使用标准 Ruby 习惯用法轻松扩展/覆盖以满足您的确切要求。

在应用程序或扩展中包含此类更改的标准做法是**创建目录 app/decorators。**将文件放在相关的**app/decorators/models**或**app/decorators/controllers**目录中，并将**_decorator**附加到原始类名。”

换句话说，要在控制器进程中分配更多的接口值，您必须将装饰器添加到相应的目录中，Ruby 将从该目录中找到并覆盖底层进程：

来自原始 Forem 源的控制器位于 /forem/app/ **controllers** /forem/admin/ **groups_controller.rb**，因此被 /your_project_name/app/ **decorators** / **controllers** /forem/admin/ **groups_controller_decorator.rb 覆盖**。

在下面的代码片段中（来自这个文件），您会经常调用“index_original”，并将原始索引方法别名为“index_original”：

```
Forem::Admin::GroupsController.class_eval do
alias_method :index_original, :index unless method_defined?(:index_original)

def index
    @h_title_of_page = t('h_title2_forum_admin_groups_index')
    @h_description2 = t('h_description2_forums')

    index_original 
    end 
```

**然而，这不起作用，因为 Forem 控制器的底层索引方法进行了以下分配：**

```
@groups = Group.all 
```

因此，当您在装饰器中调用 index_original 时，对“Group.all”的调用会引发错误，这显然是因为在没有前缀它属于 Forem 模块的情况下无法识别祖先：

```
@groups = Forem::Group.all 
```

**因此，要在您的装饰器中解决此问题，您必须采用以下方法（# index_original 被注释掉以指示必须替换它的内容）：**

```
def index
    @h_title_of_page = t('h_title2_forum_admin_groups_index')
    @h_description2 = t('h_description2_forums')

    # index_original
        @groups = Forem::Group.all # @groups = Group.all ERROR 
    end 
```

注意语句“@groups = Forem::Group.all”是祖先索引方法的唯一语句；因此将固定语句带入您的装饰器就是将整个方法代码带入您自己的装饰器。这修复了异常执行，仅因为对祖先索引方法的完全覆盖本身足以消除对未以 Forem:: 开头的模型的任何进一步调用。**如果没有对底层类进行任何进一步的调用，则同样必须将这些方法带入您的装饰器中。**

**因此，为了解决您自己（依赖）项目中的所有此类潜在异常，**您必须从 Github 下载 Forem 源代码，并研究您必须使用别名的底层方法是否引用了他们自己的模型（带/不带前缀）与“前::”：

1.  **如果您正在调用的 Forem 进程调用的所有调用模型都是 prefaced**，那么我的努力表明您**可以**将调用别名为原始方法（例如 index_original ）。
2.  **但是，如果在一个过程中对 Forem 模型的任何底层调用，你的装饰器调用没有以“Forem::”开头，另一方面，我的努力表明你必须将底层方法的所有代码拉入你的装饰器（如上所述）。**

希望在未来，Ruby 能够识别此类引用，和/或 Forem 作者将在引用其内部的前言（即使代码显然应该**在**Forem 开发环境中运行良好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:45:37.903

好吧...我建议1。（诚然，因为我确实对此有答案；-)）

把它放到你的 autoload_paths 中：

`extend_it.rb`：

```
require 'active_support/concern'

module ExtendIt
  extend ActiveSupport::Concern

  included do
    scope :extension_scope, where(:name => "Mr. X")
  end

  module ClassMethods
  end
end 
```

在初始化程序中是这样的：

`extend_it.rb`：

```
AnyClass.send :include, ExtendIt 
```

其中当然`AnyClass`是您的目标课程之一。更多阅读可以在这里找到：http: [//api.rubyonrails.org/classes/ActiveSupport/Concern.html](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)

# ios - iOS - self.view.frame.size.width 为 0.00000

> ID：12558916
> 
> 赞同：2
> 
> 时间：2012-09-24T04:37:48.357
> 
> 标签：ios, ipad, ios6

我有一个视图控制器（`SecondViewController`），它有一个名为的方法，该方法`setupHomeScreen`是从另一个视图控制器（`FirstViewController`）调用的。此方法在初始化*后调用。* `SecondViewController`

在`setupHomeScreen`中，`UIView`创建了一个我希望与主视图具有相同边界的边界，这取决于 iPad 是以纵向还是横向模式查看的。

首次调用该方法时（在应用程序启动时），视图完全错误，`NSLog`输出显示`self.view.frame.size.width`等于`0.0000`.

如果我导航到`ThirdViewController`，然后返回`SecondViewController`，则视图将正确显示并且`self.view.frame.size.width`值为`768`。

我尝试了很多不同的方法来解决这个问题，比如将方法的内容放在`didRotateFromInterfaceOrientation`and`viewDidAppear:`方法中，但似乎没有任何效果。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T04:46:52.287

> 首次调用该方法时（在应用程序启动时），视图完全错误，NSLog 输出显示 self.view.frame.size.width 等于 0.0000。

这可能是因为视图尚未加载。视图控制器在真正需要它们之前不会加载它们的视图，这通常是在视图即将第一次显示时。如果您的代码在视图显示之前尝试查找视图的宽度，则很有可能该视图尚未加载。在 Objective-C 中，您可以向 发送消息`nil`，结果将为 0 或 nil，具体取决于预期的类型。

> 如果我导航到 ThirdViewController，然后返回到 SecondViewController，视图将正确显示，并且 self.view.frame.size.width 值为 768。

这与上面的解释是一致的；一旦你显示了你的`SecondViewController`视图层次结构，这些视图就会被加载，并且找到你的视图的宽度是没有问题的。

只需访问视图控制器的`view`属性就足以导致加载视图层次结构。如果必须的话，您可以通过`self.view`在调用之前访问来解决您的问题`setupHomeScreen`。不过，更好的解决方案是在 的`-viewDidLoad`方法中设置视图的宽度`SecondViewController`，这将保持视图控制器的“延迟加载”行为（并节省内存），同时仍确保在需要时设置视图的宽度。

# javascript - 键盘控制网站

> ID：12558917
> 
> 赞同：3
> 
> 时间：2012-09-24T04:37:55.367
> 
> 标签：javascript, ajax

我正在为视障人士做一个项目。我想建立一个可以完全由键盘控制的网站。例如：如果他按下“空格”键，某些分组链接的div标签会被选中，那么他可以用Up和Down键盘键选择以下链接，并在按下Enter键时输入链接。该网站将嵌入声音，我现在已经完成了工作。我是使用 Javascript、Ajax 等进行网页设计的新手。所以如果有人能帮助我提供一点见解，那就太棒了！谢谢尤格什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:27:50.463

我想可能对您真正有用的库是[keymaster](https://github.com/madrobby/keymaster)。

它允许您定义键绑定，覆盖浏览器的默认绑定，并支持范围以启用/禁用应用程序各个区域的键绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:06:36.387

您只需编写“按键”事件并使用特殊键的键码，如左、上、右、下键的 37-38-39-40。

# php - 使用 mySQL 的查询填充 HTML 表单选择

> ID：12558918
> 
> 赞同：0
> 
> 时间：2012-09-24T04:38:16.910
> 
> 标签：php, mysql

我一直在尝试运行一个 mySQL 查询，该查询填充一个 HTML 表单，我在其中显示一个标签。我想填充 mySQL 表中的值和文本。这是我根据在不同网站上查找内容所尝试的方法，但没有成功

```
<select name="id">
   <?php

    require_once dirname(__FILE__) . '/db_connect.php';
    $db = new DB_CONNECT();

    $query="SELECT id, name FROM file order by name";
    $result=mysql_query($query) or die ("Query to get data from firsttable failed: " .mysql_error());

    while ($row = mysql_fetch_array($result)) {
    $id = $row[id];
    $name =$row[name];
      echo "<option value=\"$id\">
            $name
            </option>";
     }
   ?>
    </select> 
```

评论：没有工作是指选择下拉列表为空的事实。我确实将 PHP 从表单中拉出并将其放入它自己的 name.php 文件中以尝试运行它。它似乎奏效了。所以我在 php 中添加了 echo 语句来回显表单的开头和结尾，以及初始选择行。这很好用，没有问题，下拉列表填充得很好。回到上面的 HTML 表单，我确实在 PHP 中添加了一些其他的 echo 语句来输出一些调试语句。第一个回声总是被忽略，它不添加任何选择项。其他回显行仅添加指定的文本，变量作为变量名输出，而不是内容。所以 $name 出现在选择下拉列表中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T04:40:42.753

您需要在 id 和 name 周围加上单引号。那就是你需要更换这个

```
$id = $row[id];
$name =$row[name]; 
```

这样

```
$id = $row['id'];
$name =$row['name']; 
```

不知道 DB_CONNECT 中有什么以及您的错误是什么，这是我对错误的最佳猜测。

# string - FASM - 简单：lstrcpy & lstrcat - 结果字符串不正确

> ID：12558920
> 
> 赞同：0
> 
> 时间：2012-09-24T04:38:30.690
> 
> 标签：string, assembly, copy, appendto, fasm

我正在尝试在 FASM 中完成一项简单的任务，我已经为此苦苦挣扎了大约两个小时。

我已经用目标和问题评论了代码，但我会解释。

我正在尝试将特定文件的路径存储到变量中。该文件位于临时目录中。所以我必须先获取临时路径，然后将文件名附加到临时路径的末尾。

我正在尝试按顺序执行两次。但由于某种原因，我得到的字符串最终“搞砸了”。

我目前的代码如下：

```
include "win32ax.inc"

entry start

section ".data" data readable writeable

TmpDir          rb 256d
aSTR            dd ?
bSTR            dd ?
cSTR            db "aFILE.txt",0
dSTR            db "bFILE.txt",0

section ".code" code readable executable

start:

        ;The goal is to get two seperate strings like so:
        ;1 - C:\PATH-TO-TEMP-DIR\aFILE.txt in "aSTR"
        ;2 - C:\PATH-TO-TEMP-DIR\bFILE.txt in "bSTR"

        ;Get temp directory
        invoke  GetTempPath,TmpDir,TmpDir

        ;Copy tempdir into aSTR
        invoke  lstrcpy,aSTR,TmpDir
        ;Add "aFILE.txt" to the end of aSTR
        invoke  lstrcat,aSTR,cSTR

        ;Copy tempdir into bSTR
        invoke  lstrcpy,bSTR,TmpDir
        ;Add "bFILE.txt" to the end of bSTR
        invoke  lstrcat,bSTR,dSTR

        ;Results in "C:\UC:\Users\user\AppData\Local\Temp\AppData\Local\Temp\A\\
        ;Instead of "C:\Users\user\AppData\Local\Temp\aFILE.txt"
        invoke  MessageBox,0,aSTR,"Test",0
        ;Results in "C:\Users\user\AppData\Local\Temp\AppData\Local\Temp\A\\"
        ;Instead of "C:\Users\user\AppData\Local\Temp\bFILE.txt"
        invoke  MessageBox,0,bSTR,"Test",0

        invoke  ExitProcess,0

section ".idata" import readable writeable

        library kernel32,               "KERNEL32.DLL",\
                user32,                 "USER32.DLL"

        import  kernel32,\
                lstrcpy,                "lstrcpy",\
                lstrcat,                "lstrcat",\
                GetTempPath,            "GetTempPathA",\
                ExitProcess,            "ExitProcess"

        import  user32,\
                MessageBox,             "MessageBoxA" 
```

任何解决此问题的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:58:20.823

唔。您的字符串之一是：

```
C:\UC:\Users\u...
^^^^ 
```

几乎就好像在内存中的下一个项目之前只有四个字节用于存储它。

我想知道这是否与您`dd`用来为其定义空间的事实有关。轻推，轻推，眨眼，眨眼。

* * *

足够幽默，是时候做出更严肃的回应了。为什么你这么想：

```
aSTR            dd ? 
```

会给你足够的空间来存储路径名吗？当然它应该更像是：

```
aSTR            rb 512d 
```

这应该会给你*大量*的空间（对于 也是如此`bSTR`）。

* * *

实际上，您的第一个`cpy/cat`操作也会覆盖`cSTR`and `dSTR`，这使得弄清楚第二个操作会发生什么变得更加困难。

尝试保留足够的空间（如上所述），然后再试一次。

# java - 在 Windows 7 上安装 apache ant

> ID：12558924
> 
> 赞同：0
> 
> 时间：2012-09-24T04:39:21.163
> 
> 标签：java, ant, installation

我是 ANT 的新手，我很难解决这个问题。

我正确设置了所有变量，如下所示：

```
ANT_HOME="C:\Users\Spirithief\Documents\apache-ant-1.8.4"
JAVA_HOME="C:\Program Files\Java\jdk1.7.0_07"
PATH=%ANT_HOME%\bin;%JAVA_HOME%\bin 
```

我运行 cmd line ant 我得到命令不存在。

我进入了 \bin 文件中的 ant.bat，我将 echo off 设置为 echo on。

这里是apache的svn中的[批处理文件](http://svn.apache.org/repos/asf/ant/core/tags/ANT_180/src/script/ant.bat)。

错误似乎在这一行：

```
:stripAntHome
if not _%ANT_HOME:~-1%==_\ goto checkClasspath 
```

它说，它不是reconizable。

注意： echo %ANT_HOME% 效果很好，其他的也很好，所以这不是问题。

有什么提示吗？？

注意：这是批处理文件的执行（我的系统是法语：p）：

```
Microsoft Windows [version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation. Tous droits réservés.

C:\Users\Spirithief>ant

C:\Users\Spirithief>REM  Licensed to the Apache Software Foundation (ASF) under
one or more

C:\Users\Spirithief>REM  contributor license agreements.  See the NOTICE file di
stributed with

C:\Users\Spirithief>REM  this work for additional information regarding copyrigh
t ownership.

C:\Users\Spirithief>REM  The ASF licenses this file to You under the Apache Lice
nse, Version 2.0

C:\Users\Spirithief>REM  (the "License"); you may not use this file except in co
mpliance with

C:\Users\Spirithief>REM  the License.  You may obtain a copy of the License at

C:\Users\Spirithief>REM

C:\Users\Spirithief>REM      http://www.apache.org/licenses/LICENSE-2.0

C:\Users\Spirithief>REM

C:\Users\Spirithief>REM  Unless required by applicable law or agreed to in writi
ng, software

C:\Users\Spirithief>REM  distributed under the License is distributed on an "AS
IS" BASIS,

C:\Users\Spirithief>REM  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either ex
press or implied.

C:\Users\Spirithief>REM  See the License for the specific language governing per
missions and

C:\Users\Spirithief>REM  limitations under the License.

C:\Users\Spirithief>REM This is an inordinately troublesome piece of code, parti
cularly because it

C:\Users\Spirithief>REM tries to work on both Win9x and WinNT-based systems. If
we could abandon '9x

C:\Users\Spirithief>REM support, things would be much easier, but sadly, it is n
ot yet time.

C:\Users\Spirithief>REM Be cautious about editing this, and only add WinNT speci
fic stuff in code that

C:\Users\Spirithief>REM only runs on WinNT.

C:\Users\Spirithief>if "" == "" goto homeDrivePathPre

C:\Users\Spirithief>if "C:\Users\Spirithief" == "" goto userProfilePre

C:\Users\Spirithief>if "C:\Users\Spirithief" == "" goto userProfilePre

C:\Users\Spirithief>if exist "C:\Users\Spirithief\antrc_pre.bat" call "C:\Users\
Spirithief\antrc_pre.bat"

C:\Users\Spirithief>if "C:\Users\Spirithief" == "" goto alpha

C:\Users\Spirithief>if "C:\Users\Spirithief" == "" goto alpha

C:\Users\Spirithief>if "C:\Users\Spirithief" == "C:\Users\Spirithief" goto alpha

C:\Users\Spirithief>if "Windows_NT" == "Windows_NT"

C:\Users\Spirithief>if "Windows_NT" == "WINNT"

C:\Users\Spirithief>if ""C:\Users\Spirithief\Documents\apache-ant-1.8.4"" == ""
goto setDefaultAntHome
La syntaxe de la commande n'est pas correcte.
C:\Users\Spirithief>if not _"==_\ goto checkClasspath
C:\Users\Spirithief> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T05:22:28.510

删除环境变量中的引号，因为它不是必需的，并且 ant 脚本已经为您添加了它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T04:24:10.073

不是你问的答案，但这可能是相关的，应该对你有所帮助：

[http://wiki.apache.org/ant/AntOnWindows](http://wiki.apache.org/ant/AntOnWindows)

我可以亲自担保：[http ://code.google.com/p/winant/](http://code.google.com/p/winant/)

我从 wiki 获得了链接，所以我会相信它，而且它也是一次性的。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T08:25:10.527

仅供参考，它适用于二进制分发（不是 source-distr。），因为二进制默认包含 \bin 目录。

# c# - 以编程方式查找对象使用的内存

> ID：12558928
> 
> 赞同：10
> 
> 时间：2012-09-24T04:40:40.373
> 
> 标签：c#, memory, profiling

有没有办法以编程方式准确地确定 c# 中对象使用的内存量？我不关心这个过程有多慢，所以左右运行 GC 是可以接受的（当然我更喜欢更高效的东西）。

*   序列化对象并查看结果长度似乎不是很准确（在对该方法的简单测试中，我看到一个整数返回值 54）。

*   使用`GC.GetTotalMemory(true)`似乎会产生不一致的值，更不用说它们看起来太大了。

*   使用`Marshal.SizeOf(object)`会产生准确的结果，但似乎只适用于基元。

如果这些方面没有可用的，另一种方法是根据所使用的结构和所涉及的基元来计算大小。这也是可以接受的（虽然令人不安），但我需要知道计算对象开销等的正确方法。任何能向我展示如何做到这一点的文献都会很棒。

类似的 SO 问题（似乎都没有准确计算对象大小的具体方法）：

[C#/.NET 对象使用多少内存？](https://stackoverflow.com/questions/426396/how-much-memory-does-a-c-net-object-use)

[如何在 C# 中获取可用或使用的内存](https://stackoverflow.com/questions/750574/how-to-get-memory-available-or-used-in-c-sharp)

[如何获取内存中的对象大小？](https://stackoverflow.com/questions/605621/how-to-get-object-size-in-memory)

[sizeof() 等效于引用类型？](https://stackoverflow.com/questions/26570/sizeof-equivalent-for-reference-types)

分析内存的工具（非编程方法）：

[http://www.microsoft.com/en-us/download/details.aspx?id=16273](http://www.microsoft.com/en-us/download/details.aspx?id=16273)

[找出 C# 中的对象使用了多少内存？](https://stackoverflow.com/questions/60820/find-out-how-much-memory-is-being-used-by-an-object-in-c)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:21:32.793

another idea is to have a helper class to do this by reflecting the object and extract its all data members and gather all fields size by sizeof() , it will be a little bit complicated but it is implementable

this class will calculate the actual size of an object , but i have tested it just a few times and a few objects were tested but i think i will be working.

```
public class SizeHelper
{
    private static int GetTypeSizeArray(string typeName, object objValue)
    {
        switch (typeName)
        {
            case "System.Double[]":
                return sizeof(System.Double) * ((System.Double[]) objValue).Length ;
            case "System.Single[]":
                return sizeof(System.Single) * ((System.Single[])objValue).Length;
            case "System.Char[]":
                return sizeof(System.Char) * ((System.Char[])objValue).Length;
            case "System.Int16[]":
                return sizeof(System.Int16) * ((System.Int16[])objValue).Length;
            case "System.Int32[]":
                return sizeof(System.Int32) * ((System.Int32[])objValue).Length;
            case "System.Int64[]":
                return sizeof(System.Int64) * ((System.Int64[])objValue).Length;
            case "System.UInt16[]":
                return sizeof(System.UInt16) * ((System.UInt16[])objValue).Length;
            case "System.UInt32[]":
                return sizeof(System.UInt32) * ((System.UInt32[])objValue).Length;
            case "System.UInt64[]":
                return sizeof(System.UInt64) * ((System.UInt64[])objValue).Length;
            case "System.Decimal[]":
                return sizeof(System.Decimal) * ((System.Decimal[])objValue).Length;
            case "System.Byte[]":
                return sizeof(System.Byte) * ((System.Byte[])objValue).Length;
            case "System.SByte[]":
                return sizeof(System.SByte) * ((System.SByte[])objValue).Length;
            case "System.Boolean":
                return sizeof (System.Boolean)*((System.Boolean[]) objValue).Length;
            default:
                return 0;
        }
    }

    public static int GetSize(object obj)
    {
        Type t = obj.GetType();

        FieldInfo[] fields = t.GetFields(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Static);
        int size = 0;
        foreach (FieldInfo fieldInfo in fields)
        {
            if (fieldInfo.FieldType.BaseType.FullName.Equals("System.ValueType"))
            {
                size += GetTypeSize(fieldInfo.FieldType.FullName);
            }
            else if (fieldInfo.FieldType.BaseType.FullName.Equals("System.Array"))
            {
                var subObj = fieldInfo.GetValue(obj);
                if (subObj != null)
                    size += GetTypeSizeArray(fieldInfo.FieldType.FullName, subObj);
            }
            else if(fieldInfo.FieldType.FullName.Equals("System.String"))
            {
                var subObj = fieldInfo.GetValue(obj);
                if (subObj != null)
                {
                    size += subObj.ToString().Length*sizeof (System.Char);
                }
            }
            else
            {
                var subObj = fieldInfo.GetValue(obj);
                if (subObj != null)
                    size += GetSize(subObj);
            }
        }
        return size;
    }

    private static int GetTypeSize(string typeName)
    {
        switch (typeName)
        {
            case "System.Double":
                return sizeof(System.Double);
            case "System.Single":
                return sizeof(System.Single);
            case "System.Char":
                return sizeof(System.Char);
            case "System.Int16":
                return sizeof(System.Int16);
            case "System.Int32":
                return sizeof(System.Int32);
            case "System.Int64":
                return sizeof(System.Int64);
            case "System.UInt16":
                return sizeof(System.UInt16);
            case "System.UInt32":
                return sizeof(System.UInt32);
            case "System.UInt64":
                return sizeof(System.UInt64);
            case "System.Decimal":
                return sizeof(System.Decimal);
            case "System.Byte":
                return sizeof(System.Byte);
            case "System.SByte":
                return sizeof(System.SByte);
             case "System.Boolean":
                return sizeof (System.Boolean);
            default:
                return 0;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:53:02.613

```
object obj = new List<int>(); // whatever you want to get the size of
RuntimeTypeHandle th = obj.GetType().TypeHandle;
int size = *(*(int**)&th + 1);
Console.WriteLine(size); 
```

我不知道它是否对您有用...但请尝试参考此链接...特别是图 4

[http://msdn.microsoft.com/en-us/magazine/cc163791.aspx#S9](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx#S9)

# windows-phone-7 - WP7 - 水平滚动列表框的问题

> ID：12558935
> 
> 赞同：2
> 
> 时间：2012-09-24T04:41:53.493
> 
> 标签：windows-phone-7, listbox, horizontal-scrolling

我需要一个水平滚动的列表框，并且我遵循了关于如何实现的其他几个问题的建议。

我目前确实水平滚动，但在滑动结束时，它不会停留在我滚动到的位置，它会恢复到原始显示 - 有点像它的一块弹性，在之后又回到原来的位置它被拉长了。我的列表框包含按钮，我希望用户能够滑动列表框，找到他们想要的按钮，然后单击该按钮。

```
 <DataTemplate x:Key="ClassesDisplay">
        <Button Height="60"  FontSize="12"  Content="{Binding ClassName}" />
    </DataTemplate>

                <ScrollViewer HorizontalScrollBarVisibility="Auto" Margin="0,6,-196,0" Height="Auto" Name="imageScroll">  

                <ListBox x:Name="ClassesListbox"
                     Margin="114,371,24,814" Height="60" ItemsSource="{Binding TimetableClasses}"
                     ItemTemplate="{StaticResource ClassesDisplay}" >

                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel  Orientation="Horizontal"></StackPanel>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>

                </ListBox>
           </ScrollViewer> 
```

AI 怀疑我在这里做错了什么，还是我应该以不同的方式做这件事？

*   谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:50:56.140

看来您没有为 ScrollViewer 添加宽度

尝试添加宽度

```
<ScrollViewer HorizontalScrollBarVisibility="Auto" Margin="0,6,-196,0" Height="Auto" Name="imageScroll" Width="400">  
 //Your ListBox 
</ScrollViewer> 
```

或者列表框有内部滚动条，你可以这样使用

```
 <ListBox ScrollViewer.HorizontalScrollBarVisibility="Auto"
     ScrollViewer.VerticalScrollBarVisibility="Disabled" 
     // your code
     >
 </ListBox> 
```

# php - 如何访问远程服务器上的 PHP 文件

> ID：12558938
> 
> 赞同：3
> 
> 时间：2012-09-24T04:42:31.220
> 
> 标签：php, html, web, remote-server

好的，所以我使用 html 已经有一段时间了，现在正在学习如何使用 php 函数。我有一个域并且正在使用托管站点来托管我的文件，我有一个 php 文件，允许用户将图片上传到指定的文件，但我不断收到错误消息。该功能在我的服务器上运行，所以我知道它是正确的，所以我相信这可能是我用来托管文件的网站的安全问题。所以我想用我的服务器来处理 php 并接受上传。我试着在我的服务器上的#post 行中输入我的 php 文件的 url，但我应该知道它不会那么简单。我对此进行了研究，看起来我需要设置一个“监听页面”php文件和一个定义url的变量。因为我对此很陌生，所以我希望有人可以帮助我提供具体的说明，以便我可以看到它的机制并更好地理解它。这是我的代码：

```
<form enctype="multipart/form-data" action="upload.php" method="POST">
    Please choose a file: <input name="uploaded" type="file" /><br/>
    &#60;input type="submit" value="Upload" />` 
```

一旦用户提交文件，它由以下代码处理

```
$target = "upload/"; 
$target = $target . basename( $_FILES['uploaded']['name']) ; 
$ok=1; 
if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)) 
{
    echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded";
} 
else {
    echo "Sorry, there was a problem uploading your file.";
}

if ($uploaded_size > 10000)
{
    echo "Your file is too large.<br>"; 
    $ok=0;
}

if ($uploaded_type =="text/php")
{
    echo "No PHP files<br>";
    $ok=0;
} 
```

那么如何获得在我的服务器上调用此函数的表单？[http://www.server-name/folder/upload.php](http://www.server-name/folder/upload.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:50:18.803

这是因为您的服务器不允许您将外部图像上传到服务器。

将服务器的图片上传目录权限更改为`777`.

# gwt - gwt 活动和地点中的嵌套活动和历史

> ID：12558939
> 
> 赞同：1
> 
> 时间：2012-09-24T04:42:36.367
> 
> 标签：gwt

我有一个设计如下的应用程序。这是一个旅行索赔报销应用程序。它有两个选项卡：

1.  我的索赔：显示迄今为止提出的所有报销索赔
2.  我的帐户：显示我的详细信息

它在左侧和选定时具有索赔数量，将显示右侧的条目。

我提出以下意见。

*   `AppView`：对于具有标签面板和标签的整个应用程序
*   `MyAccountsView`: MyAccount 标签下的内容。
*   `MyClaims View`: 对于 Myclaims 标签下的内容。这有两个面板。左边的那个加载了索赔。在选择要查看的声明之前，该权限为空。
*   `SelectedClaimView`：右侧面板显示所选索赔的索赔条目。

每个视图都有相应的位置和活动。

这些是我在创建应用程序时遇到困难的以下要求：

当我单击左侧面板上的声明时，右侧面板必须在 selectedClaimView 中显示声明条目。当我单击另一个声明时，列表必须由该声明的内容填充。我还想要此声明选择的历史支持。

我在设计时面临以下问题：

1.  如何添加嵌套活动。例如，当我选择 MyClaimsTab 时，所有声明都必须加载到左侧面板中。在选择索赔时，索赔条目必须通过选定的索赔视图加载到右侧面板中。但是，调用活动并更改位置会停止调用活动。

2.  此外，两个选项卡中的两个活动都必须同时运行，并且必须在选项卡切换之间维护历史记录。这是我不知道该怎么做的事情，并希望得到建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:57:22.680

您的要求非常简单，您的设计也应该如此。您只需要两个活动和两个视图：AccountView 和 ClaimsView。

您需要一个简单的小部件 - 一个带有两个标签样式为选项卡的 FlowPanel - 作为您的导航菜单。您将此小部件放在两个视图的顶部，并将 ClickHandler 附加到与另一个视图相对应的标签上 - 即在 AccountView 中将处理程序附加到 Claims 标签，这会触发 presenter.goTo(new ClaimsTab(""). Claims label应该在 ClaimsView 中设置为按下的选项卡，在 AccountView 中设置 Account 标签。这将负责导航：不需要特殊活动。

AccountView 很简单：顶部的导航小部件，下面的详细信息。对于 ClaimsView 使用分为三层的 LayoutPanel：顶层用于导航小部件，左侧层用于声明，右侧层用于详细信息。假设您将 Tree 用于索赔，并使用封装在 ScrollPanel 中的 FlowPanel（“claimDetailsPanel”）用于索赔详细信息。

您的 ClaimsView 应该有一个“已初始化”标志（带有 getter 和 setter）。当用户来到 ClaimsTab 位置时，您将启动 ClaimsActivity。此活动获取对 ClaimsView 的引用。它检查 ClaimsView 是否已初始化。如果没有，它会加载声明列表并填充声明树。构建树时，将每个声明设置为每个 TreeItem 的用户对象。然后将初始化标志设置为真。

您将选择处理程序附加到调用 presenter.goTo(new ClaimsTab(selectedClaim.getId().toString())); 的树上。

这会将用户发送回同一选项卡，但使用新的 URL 令牌 - 如果所选声明的 id=123，您将看到 #ClaimsTab:123 令牌。屏幕上不会有闪烁，因为 ClaimsView 已经构建并且仍然可见。

现在您将运行一个新的 ClaimsActivity。此活动注意到 (a) 有一个需要处理的令牌，以及 (b) 不需要加载声明并填充声明树，因为视图已初始化。您的活动应该解析令牌（将其转换为声明 ID），加载此声明的详细信息，并将此信息提供给 ClaimsView 以填充 claimDetailsPanel（您应该首先清除它，因为它可以包含先前声明的内容）。

一个小细节。用户可以为任何声明添加书签。因此，如果您的 ClaimsActivity 构建声明树，它应该检查令牌。带有书签的页面将有一个标记，因此活动应该告诉视图要选择哪个树项。

就是这样：两种观点，两种活动。没有嵌套。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:50:54.160

[Slotted](https://code.google.com/p/slotted)框架使您可以轻松地做到这一点。（免责声明：我写了[Slotted](https://code.google.com/p/slotted)）。让我描述一个简单的方法来做你想要的。您像这样定义您的主要 AppPlace：

```
public class AppPlace extends SlottedPlace {
    public static final Slot TabsSlot = new Slot(new AppPlace(), new MyClaimsPlace());

    @Override public Slot getParentSlot() {
        return SlottedController.RootSlot;
    }

    @Override public Slot[] getChildSlots() {
        return new Slot[] {TabsSlot};
    }
} 
```

这告诉 Slotted 框架，您的 AppPlace 有一个 Slot，它可以在当前 View 中包含另一个 Activity。

在 AppActivity 中，您需要扩展 SlottedPlace 并覆盖此方法：

```
@Override public void setChildSlotDisplay(Slot slot) {
    slot.setDisplay(tabsSlotWidget);
} 
```

tabsSlotWidget 将是一个 SimplePanel 或 SimpleLayoutPanel，将用作新活动的容器。AppPlace 中可以有两个插槽，MyClaimsPlace 中也可以有插槽。有一个 SlottedTab 小部件，它提供与 TabPanel 类似的功能，但允许每个选项卡成为一个 Activity。

除了上述更改之外，活动的工作方式与 GWT A&P 相同。您还可以在 Slotted 中运行现有的 A&P 站点，并且只升级需要嵌套的活动。

1.  这允许同时启动多个活动，这是普通 GWT A&P 所不允许的。如果您调用位于 Activity 中的同一级别的 Place，它只会替换该 Activity，并且仍然保留层次结构的其余部分。

2.  Slotted 将处理整个层次结构的历史，因此无论嵌套的级别/宽度有多少，历史令牌都将允许重新创建它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T10:26:36.477

I hope I can point you in the right direction.

1.  There are an endless amount of ways of implementing logic. I would recommend reading up on the command design pattern (google it you will find good resources)

2.  If you mean history by browser history see [DevGuide](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsHistory). If you mean simply remember what the user chose options. Then simple write your own class which remembers it, this might also help you with 1..

# xcode - xcode 无法执行“/usr/bin/svnversion”

> ID：12558941
> 
> 赞同：1
> 
> 时间：2012-09-24T04:43:09.543
> 
> 标签：xcode, macos

自从升级到 Mac OS X Mountain Lion 后，“/usr/bin/svnversion”就不见了。如何解决此错误？

```
Can't exec "/usr/bin/svnversion": No such file or directory at /Users/realmasse/Library/Developer/Xcode/DerivedData/ExamGame-gvcepttntbnapmeeeyndutgfakbn/Build/Intermediates/ExamGame.build/Debug-iphonesimulator/HOE.build/Script-C428913C15B9011A0029ED43.sh line 16.
Use of uninitialized value $version in pattern match (m//) at /Users/realmasse/Library/Developer/Xcode/DerivedData/ExamGame-gvcepttntbnapmeeeyndutgfakbn/Build/Intermediates/ExamGame.build/Debug-iphonesimulator/HOE.build/Script-C428913C15B9011A0029ED43.sh line 29.
/Users/realmasse/Library/Developer/Xcode/DerivedData/ExamGame-gvcepttntbnapmeeeyndutgfakbn/Build/Intermediates/ExamGame.build/Debug-iphonesimulator/HOE.build/Script-C428913C15B9011A0029ED43.sh: No Subversion revision found at /Users/realmasse/Library/Developer/Xcode/DerivedData/ExamGame-gvcepttntbnapmeeeyndutgfakbn/Build/Intermediates/ExamGame.build/Debug-iphonesimulator/HOE.build/Script-C428913C15B9011A0029ED43.sh line 31.
Command /bin/sh failed with exit code 255 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:50:16.400

1.  确保您将最新的 Xcode（4.5 版）安装为`/Applications/Xcode.app`.
2.  在 Xcode 的首选项中，转到下载，然后是组件，并确保安装了命令行工具。
3.  从命令行（例如在 Terminal.app 中），运行：`xcode-select --switch /Applications/Xcode.app`

# asp.net-mvc - 无法使用 Windsor 容器将依赖项注入 Asp.net MVC 4 Web API 控制器

> ID：12558942
> 
> 赞同：5
> 
> 时间：2012-09-24T04:43:11.517
> 
> 标签：asp.net-mvc, asp.net-mvc-4, castle-windsor, asp.net-web-api, ioc-container

我无法使用 asp.net web api 配置 Windsor Container，尽管它与常规控制器（IController）一起工作正常。

我在同一个项目中有常规控制器和 api 控制器。

这是正常控​​制器的代码：

```
/// <summary>
    /// Controller Factory class for instantiating controllers using the Windsor IoC container.
    /// </summary>
    public class WindsorControllerActivator : IControllerActivator
    {
        private readonly IWindsorContainer container;
        public WindsorControllerActivator(IWindsorContainer container)
        {
            this.container = container;
        }
        public IController Create(RequestContext requestContext, Type controllerType)
        {
            var controller = (IController)container.GetService(controllerType);
            return controller;
        }

} 
```

在 global.asax.cs 中

```
 container.Register(Component.For<IWindsorContainer>().Instance(container));
  container.Register(Component.For<IControllerActivator>().ImplementedBy<WindsorControllerActivator>()); 
```

以下是有问题的代码：

```
public class WindsorApiControllerActivator : IHttpControllerActivator 
    {
        private readonly IWindsorContainer container;
        public WindsorApiControllerActivator(IWindsorContainer container)
        {
            this.container = container;
        }
        public IHttpController Create(HttpRequestMessage request, HttpControllerDescriptor controllerDescriptor, Type controllerType)
        {
            var controller = (IHttpController)container.GetService(controllerType);
            return controller;
        }
    } 
```

和安装程序：

```
 container.Register(Component.For<IHttpControllerActivator>().ImplementedBy<WindsorApiControllerActivator>()); 
```

但是，我永远无法执行 WindsorApiControllerActivator。

什么时候，我将调试器放在 WindsorControllerActivator 中，它按预期工作，但对于 WindsorApiControllerActivator，它永远不会被执行。

您的帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:37:54.433

我在 global.asax.cs 中添加了以下代码，它可以工作:)

```
 _windsorContainer = new WindsorContainer();
    _windsorContainer.Install(new EventSorbetInstaller());
    DependencyResolver.SetResolver(new WindsorDependencyResolver(_windsorContainer));
   ServiceLocator.SetLocatorProvider(() => new WindsorServiceLocator(_windsorContainer));
   RegisterFilterProviders(FilterProviders.Providers, _windsorContainer);

  var activator = _windsorContainer.Resolve<IHttpControllerActivator>();

   GlobalConfiguration.Configuration.Services.Replace(typeof(IHttpControllerActivator), activator); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:59:16.643

您应该非常小心地为 Windosr 使用 IDependencyResolver，而无需考虑 decomissiong/release 问题。

看看这个实现 [http://nikosbaxevanis.com/2012/06/04/using-the-web-api-dependency-resolver-with-castle-windsor-part-2/](http://nikosbaxevanis.com/2012/06/04/using-the-web-api-dependency-resolver-with-castle-windsor-part-2/) 我还没试过，但这似乎是当前 webapi 版本的必经之路

# url-rewriting - 此 cgit 实例（在共享主机上）需要哪些重写规则？

> ID：12558943
> 
> 赞同：0
> 
> 时间：2012-09-24T04:43:17.633
> 
> 标签：url-rewriting, apache2, rewrite, cgit

我在共享主机上安装了 cgit，虽然主页出现了，但每个 url 都出现了找不到文件，直到我将 cgit.cgi 添加到路径的前面。

例如`www.domain.com/path`，除非在浏览器中键入 as 否则会出错`www.domain.com/cgit.cgi/path`，但返回页面中的所有链接都在表单中`www.domain.com/path`。

.htaccess 是否有一些重写规则会导致网络服务器将每个实例`www.domain.con/path`视为 as `www.domain.com/cgit.cgi/path`？Drupal 的 Clean URLs 浮现在脑海中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:27:33.723

尝试这个

```
RewriteRule path cgit.cgi/path 
```

# python - 在 django 列表的每个元素上调用方法的快速策略是什么

> ID：12558945
> 
> 赞同：0
> 
> 时间：2012-09-24T04:43:19.567
> 
> 标签：python, mysql, django, postgresql

所以我想为模板视图获取一些模型对象，但我需要先调用每个选定元素的计算热度或计算排名。

```
models = Model.objects.a_bunch_of_filtering_sorting() 
```

那么有什么快速的方法来做到这一点呢？
也许重申名单？

```
for model in models: # Surely it can't be this
   model.the_method() 
```

我尝试做一些自定义 SQL 的东西，但它不允许任何方法调用或列表排序太早

```
sortValue = ORDER BY ....
cursor = connection.cursor()
cursor.execute("""
SELECT d.field1, d.field2 ........ 
# unfortunately method calls aren't allowed in here

FROM Model_model d
GROUP BY 1
%s""" % sortValue)

for row in cursor.fetchall():
d = self.model(id=row[0] .... )
d.the_method() # wont work, the list is already 
               # ordered so we are calculating a sorting key one step behind 
```

那么在对所有 django 模型（最首选的方式）进行排序并将它们发布到模板之前，我可以采取哪些可能的步骤来调用方法

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:59:18.940

这个

```
for model in models:
   model.the_method() 
```

你可以试试这个

```
from itertools import imap
from collections import deque
from operator import methodcaller
deque(imap(methodcaller('the_method'), models), maxlen=0) 
```

但它通常不会更快/更快，当然也不会更清晰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:03:03.443

如果方法`the_method`执行新的 SQL，并且模型的数量很大，那么它真的会损害性能，因为每个对象都有额外的查询。在这种情况下，最好只执行一条 SQL 来更新所有需要的对象。如果`the_method`不执行新查询，则使用循环非常好 - 它们正是为此目的而制作的。

# database - 如何在不影响yii的情况下更改数据库？

> ID：12558949
> 
> 赞同：2
> 
> 时间：2012-09-24T04:44:01.773
> 
> 标签：database, database-design, yii

首先我创建了一个数据库，然后是一个模型和 CRUD。当我尝试更改数据库属性时，出现错误。将数据库更改为所需架构的步骤是什么？例如添加一列，将 int 更改为 varchar，或更改列名。我是[yii](http://www.yiiframework.com/)的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:30:03.333

我不确定你在这里的意思。

如果您的意思只是更改一些列和表，那么您可以从任何地方执行此操作，mysql 命令行（如果您正在使用它）phpMyAdmin，无论您喜欢从哪里进行数据库管理。Yii 在访问这些表时会自动获取对数据库模式的任何更改。

如果您的意思是从 Yii 中更改某些列和属性的方法，那么您可以使用[DBCommand](http://www.yiiframework.com/doc/api/1.1/CDbCommand "数据库命令")来发出`dropColumn`等`alterColumn`。

如果您的意思是一种跟踪架构更改的方法，那么您需要查看[迁移](http://www.yiiframework.com/doc/guide/1.1/en/database.migration#creating-migrations "迁移")和源代码控制它们

如果这些都不合适，那么我不确定您要的是什么，抱歉。

# linux - 带有 http / lighttpd 的乳胶

> ID：12558955
> 
> 赞同：1
> 
> 时间：2012-09-24T04:45:13.200
> 
> 标签：linux, latex

我在 Ubuntu 上使用 Imgtex 和 Apache 来解决乳胶方程，但我所有其他的盒子都在 centos 上，并且希望将 imgtex/latex 服务器迁移到 centos 以实现统一。

Imgtex 不适用于 centos。

我的问题是我们如何在 centos 或任何其他 redhat 风格上使用 httpd 或 lighttpd 配置乳胶。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:37:17.743

根据其[网页](http://www.eaflux.com/imgtex/)，`imgtex`它只是一个用 Perl 编写的提供 FastCGI 服务的脚本。您可以配置`lighttpd`启用[FastCGI](http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs_ModFastCGI)。所以我认为你应该能够`imgtex`在你的系统上工作。

您还可以考虑其他解决方案，特别是[HeVeA](http://hevea.inria.fr/)，将乳胶数学方程式转换为图像或 HTML。

# java - java Intellij 错误

> ID：12558956
> 
> 赞同：1
> 
> 时间：2012-09-24T04:45:57.607
> 
> 标签：java, android, intellij-idea

这是我的 android 应用程序的代码，它不完整

```
package com.example;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.Toast;

public class MainActivity extends Activity {
    private EditText text;
    private EditText text2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        text = (EditText) findViewById(R.id.editText1);
        text2=(EditText)findViewById(R.id.result);

    }

    // This method is called at button click because we assigned the name to the
    // "OnClick property" of the button
    public void onClick(View view) {
        switch (view.getId()) {
            case R.id.button1:
                RadioButton celsiusButton = (RadioButton) findViewById(R.id.radio0);
                RadioButton fahrenheitButton = (RadioButton) findViewById(R.id.radio1);
                RadioButton KelvinButton=(RadioButton) findViewById(R.id.radio2);
                if (text.getText().length() == 0) {
                    Toast.makeText(this, "Please enter a valid number",
                            Toast.LENGTH_LONG).show();
                    return;
                }

                float inputValue = Float.parseFloat(text.getText().toString());
                if (celsiusButton.isChecked()) {
                    text2.setText(String
                            .valueOf(convertFahrenheitToCelsius(inputValue)));
                    celsiusButton.setChecked(true);
                } else {
                    text2.setText(String
                            .valueOf(convertCelsiusToFahrenheit(inputValue)));
                    fahrenheitButton.setChecked(false);
                    celsiusButton.setChecked(true);
                    if(KelvinButton.isChecked())
                    {
                        text2.setText(String.valueOf(convertoKelvin(inputValue)));
                    }
                }
                break;
            case R.id.button2:
                RadioButton celsiusButton = (RadioButton) findViewById(R.id.radio0);
                RadioButton fahrenheitButton = (RadioButton) findViewById(R.id.radio1);
                RadioButton KelvinButton=(RadioButton) findViewById(R.id.radio2);
                float inputValue = Float.parseFloat(text.getText().toString());

                if (text.getText().length() == 0) {
                    Toast.makeText(this, "Please enter a valid number",
                            Toast.LENGTH_LONG).show();
                    return;
                }

                if (fahrenheitButton.isChecked()) {
                    text2.setText(String
                            .valueOf(convertFahrenheitToCelsius(inputValue)));
                    celsiusButton.setChecked(true);
                } else {
                    text2.setText(String
                            .valueOf(convertCelsiusToFahrenheit(inputValue)));
                    fahrenheitButton.setChecked(true);
                    if(KelvinButton.isChecked())
                    {
                        text2.setText(String.valueOf(convertoKelvin(inputValue)));
                    }
                }
                break;
            case R.id.button3:
                RadioButton celsiusButton = (RadioButton) findViewById(R.id.radio0);
                RadioButton fahrenheitButton = (RadioButton) findViewById(R.id.radio1);
                RadioButton KelvinButton=(RadioButton) findViewById(R.id.radio2);
                float inputValue = Float.parseFloat(text.getText().toString());
                if (text.getText().length() == 0) {
                    Toast.makeText(this, "Please enter a valid number",
                            Toast.LENGTH_LONG).show();
                    return;
                }

                if (KelvinButton.isChecked()) {
                    text2.setText(String
                            .valueOf(convertFahrenheitToCelsius(inputValue)));
                    celsiusButton.setChecked(true);
                } else {
                    text2.setText(String
                            .valueOf(convertCelsiusToFahrenheit(inputValue)));
                    fahrenheitButton.setChecked(false);
                    celsiusButton.setChecked(true);
                    if(KelvinButton.isChecked())
                    {
                        text2.setText(String.valueOf(convertoKelvin(inputValue)));
                    }
                }
                break;

        }
    }

    // Converts to celsius
    private float convertFahrenheitToCelsius(float fahrenheit) {
        return ((fahrenheit - 32) * 5 / 9);
    }

    // Converts to fahrenheit
    private float convertCelsiusToFahrenheit(float celsius) {
        return ((celsius * 9) / 5) + 32;
    }

    private float convertoKelvin(float celsius)
    {
        return ((celsius+273)) ;
    }

} 
```

正如你所看到的，我每次都定义了我的变量。如果我不这样做，我会得到错误“值可能没有被初始化。我做错了什么。

如果您想知道，我的代码不完整。我很讨厌这个错误，一旦解决这个问题就会继续

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:14:47.383

如果我正确理解了您的问题如果您仅在一种情况下将值分配给 `celsiusButton`, `fahrenheitButton`,`KelvinButton`变量，那么您会得到错误。

发生这种情况的原因是对象初始化的范围。以下是说明正在发生的事情的示例。

```
public void example() {
    String str;
    switch (1) {
    case 1:
        str = "test";// If I initalize here then there is problem since
                        // scope is limited to only this case
        str.toString();
        break;

    default:
        str.toString();// Compilation error here.
        break;
    }
}

public void example() {
    String str = "test";
    switch (1) {
    case 1:
        str.toString();
        break;

    default:
        str.toString();// No error because scope of initialisation is whole
                        // method
        break;
    }
} 
```

所以你需要先定义你的变量`switch (view.getId()) {`

结果声明如下所示

```
public void onClick(View view) {
RadioButton celsiusButton = (RadioButton) findViewById(R.id.radio0);
RadioButton fahrenheitButton = (RadioButton) findViewById(R.id.radio1);
RadioButton KelvinButton=(RadioButton) findViewById(R.id.radio2);
switch (view.getId()) {
    case R.id.button1: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:49:48.150

如果我对您的理解正确，那么 IntelliJ 会警告您您正在使用的变量可能没有正确初始化。乍一看， if`onCreate()`之前没有调用`onClick()`， then`text`并且`text2`不会被初始化。这很容易成为 IntelliJ 感到困惑的一个原因。

# ruby-on-rails - 简单形式：是否可以使用标签 i18n 删除标签并用占位符替换它们？

> ID：12558957
> 
> 赞同：13
> 
> 时间：2012-09-24T04:46:10.817
> 
> 标签：ruby-on-rails, simple-form

我正在尝试生成一个常规的简单形式

```
= simple_form_for [:hq, @team, @order] do |f|
  .tickets
    = f.select :tickets, :aaa => "aaa"
    = render "ticket"

  .details
    .left
      = f.input :address1
      = f.input :address2
      = f.input :state
      = f.input :country
      = f.input :email
    .right
      = f.input :comments 
```

但我希望输入不使用标签呈现，只是占位符中的标题“地址行 1”。

我知道我可以这样做，`f.input :address1, :placeholder => "whatever", :label => ""`但我希望它可以使用包装器进行配置，并采用 i18n 值形式标签，而不是占位符。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-05-21T03:24:29.180

尝试执行以下操作：

```
f.input :address1, placeholder: "Address Line 1", label: false 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-31T20:04:56.483

如果你想使用 javascript，这里有一个 jQuery 片段可以完成这项工作：

```
$.each($(".left .input"), function() {
  var label = $("label",$(this)).text();
  $("label",$(this)).hide();
  $("input",$(this)).attr("placeholder",label);
}); 
```

在这种情况下使用 js 的主要优点是结果保持屏幕阅读器兼容（他们将阅读标签，因为他们不会运行 js）。

# ftp - FTP 上传未在 AWS 服务器上完成 (vsftp)

> ID：12558959
> 
> 赞同：0
> 
> 时间：2012-09-24T04:46:18.637
> 
> 标签：ftp, amazon-web-services

我有一个运行 vsftp 的 AWS 服务器，但我没有收到传输完成的 226 消息。我的 php 编辑器显示上传失败，所以我使用 FileZilla 和 CuteFTP 观看了交易。

*   开始上传。
*   该文件出现在服务器上。
*   没有收到 226 响应，因此 FTP 管理器超时并尝试重新开始上传。
*   重新启动时，系统会要求我确认是否要覆盖刚刚上传的文件。
*   我已经测试了上传的文件，传输的文件是完整的。

我通过上传到另一个托管设施中的另一个服务器来验证 FTP 管理器软件正在工作。（这台计算机正在运行另一个 FTP 服务。

我能够成功列出目录、下载文件，甚至创建新目录。

我已经升级了 vsftp 试图解决这个问题。

我已经为此苦苦挣扎了一段时间。任何想法表示赞赏。

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:29:20.527

在清除服务器上的 vsftp 并测试其他几个 conf 更改后，我远程连接到另一个办公室的 PC，加载 FileZilla，发现那里没有问题。

事实证明，这台服务器需要在我办公室运行 Windows 7 下的 BitDefender Internet Security 软件的 PC 上的本地防火墙软件中列入白名单。为什么亚马逊 AWS 服务器需要列入白名单，而另一台服务器没有？为什么 FTP 事务中只有一个 [服务器] 回复被防火墙阻止？没有答案，也没有时间进一步测试。所有程序的 FTP 链接都正常运行。

# image-manipulation - 编码 JPEG 文件

> ID：12558960
> 
> 赞同：0
> 
> 时间：2012-09-24T04:46:34.620
> 
> 标签：image-manipulation, jpeg, file-conversion

我有一个代表 .jpeg 图像的字节文件。但是，当我尝试打开图像时，我收到一条错误消息，表明我的文件格式不正确。我对此有点失望，因为文件中的字节看起来应该可以工作。在我阅读的内容中，该文件与 JPEG 文件格式完全一致。这是一张大小合适的图片，所以我不会发布所有数据，但前几行看起来像这样：

```
ff d8 ff e0 00 10 4a 46 49 46 00 01 01 00 00 01 00 01 00 00 ff e1 00 58 45 78 69 66 00 00 4d 4d 00 2a 00 00 00 08 00 02 01 12 00 03 00 00 00 01 00 06 00 00 87 69 00 04 00 00 00 01 00 00 00 26 00 00 00 00 00 03 a0 01 00 03 00 00 00 01 00 01 00 00 a0 02 00 04 00 00 00 01 00 00 0a 20 a0 03 00 04 00 00 00 01 00 00 07 90 00 00 00 00 ff db 00 43 00 1f 15 17 1b 17 13 1f 1b 19 1b 23 21 1f 25 2f 4e 32 2f 
```

我查看了其他一些 .jpeg 图像的来源，我可以看出它与我在这里看到的完全不同。我怀疑正在进行一些编码，我只是不确定它是什么。如果有人能指出我正确的方向，我将不胜感激。谢谢！

**编辑**

这是文件的十六进制数据。我知道我需要把它转换成一些东西。我只是不确定是什么。它是十进制，二进制还是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:00:36.077

您绝对应该使用[JPEGsnoop](http://www.impulseadventure.com/photo/jpeg-snoop.html)，它是一种专用于（除其他外）检查 JPEG 文件的工具 - 包括*损坏 JPEG 照片中的错误检测*（请参阅[JPEGsnoop 使用](http://www.impulseadventure.com/photo/jpeg-snoop-uses.html)）。

从您发布的内容来看，前 20 个字节是完全正确的（包括有效的 SOI 标记`0xFFD8`、APP0 标记`0xFFE0`、段长度`0x0010`等）。JPEGsnoop 将帮助确定问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:27:26.057

如果您说您在文本文件中确实有代表二进制的十六进制数字 - 您可以使用此工具对其进行转换：[http ://stahlworks.com/dev/index.php?tool=hextobin](http://stahlworks.com/dev/index.php?tool=hextobin)

或者你可以自己写一个程序。如果您添加一些有关您知道的语言的信息，有人可能会为您指明正确的方向。这是 Perl [http://www.velocityreviews.com/forums/t22256-hexadecimal-to-binary-file-conversion-utility.html中的一个实现](http://www.velocityreviews.com/forums/t22256-hexadecimal-to-binary-file-conversion-utility.html)

# c - GCC-4.3.2 中可用的标准算法

> ID：12558961
> 
> 赞同：-1
> 
> 时间：2012-09-24T04:46:50.087
> 
> 标签：c, algorithm, gcc

我正在从事一个涉及使用多种标准算法的项目，例如快速排序、合并排序、二进制搜索。在使用之前实现所有这些将非常繁琐且耗时。

那么，谁能给我 GCC-4.3.2 中已经可用的标准算法列表，以便我可以直接在我的项目中使用它们。

如果我不清楚我的疑问，请发表评论。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:20:02.213

目前尚不清楚您的问题的最佳答案是什么。这可能取决于您使用的操作系统。

C 标准库提供了许多实现各种算法和/或提供（有限）访问操作系统特性的函数。特别是，标准`qsort()`函数对数组进行排序，并且该`bsearch()`函数搜索数组。在这两种情况下，C 标准都规定了它们的作用；它没有说明他们是如何做到的。一个实现提供一个`qsort()`进行冒泡排序和一个`bsearch()`进行线性搜索的实现甚至是合法的——尽管我确信没有一个实现实际上会做那么愚蠢的事情。

C 标准库的权威参考是 ISO C 标准。该标准有几个连续版本，分别于 1990 年、1999 年和 2011 年发布。1999 年标准的一个很好的草案是[N1256](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)；C11 标准的一个很好的草案是[N1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)。如果您使用 gcc，您的实现可能实现了几乎所有 C99（您可以使用`gcc -std=c99`）；C11 一致性是一项正在进行的工作。

大多数实现提供了 C 标准不需要的附加库函数。例如，[POSIX](http://www.opengroup.org/austin/papers/posix_faq.html)指定了大量的附加功能。

您使用 gcc 4.3.2 的事实实际上并没有告诉我们您的运行时库中有什么可用的。AC 实现由一个编译器和一个运行时库组成。gcc 只是编译器；根据操作系统，它可以与许多不同的运行时库一起使用。对于 Linux（或 GNU/Linux，如果您愿意）系统，运行时库通常（总是？）[GNU libc](http://www.gnu.org/software/libc/manual/)（感谢 Jim Balter 的链接）。其他系统可能会使用其他一些运行时库；您必须找出系统使用的库并查找其文档。

请注意，C 库没有提供很多通用算法，部分原因是很难在纯 C 中清晰地表达这些算法。例如，如果您查看`qsort()`and `bsearch()`，您会发现它们使用`void*`指针并处理内存块而不是类型化的对象。您可能会考虑查看 C++，它的标准库提供了更多的数据类型和算法；它们的类型更安全，因为它们使用 C++ 的模板特性。

# javascript - ckeditor 将选择转换为指定的标签

> ID：12558971
> 
> 赞同：2
> 
> 时间：2012-09-24T04:47:57.900
> 
> 标签：javascript, ckeditor

我只是按照参考在 ckeditor/plugins 中添加一个文件夹并将其命名为 button-pre

这是来源

```
(function(){
var a={
    exec:function(editor){
        var format={element:'pre'};
        var style=new CKEDITOR.style(format);
        style.apply(editor.document);
    }
}, 
b='button-pre';
CKEDITOR.plugins.add(b, {
    init:function(editor){
        editor.addCommand(b, a);
        editor.ui.addButton('button-pre', { 
            label:'Button PRE', 
            icon:this.path+'button-pre.png', 
            command:b
        });
    }
});
})(); 
```

这是我的问题

当我滚动鼠标选择几行并想将其转换为标记 PRE 时，它总是转换所有文档。

我意识到它可能是由 style.apply(editor.document) 的东西设置的。

所以我尝试了一些方法来解决这个问题（例如 style.apply(editor.getSelection().getNative())

但我找不到任何解决方案。它根本不起作用，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:42:01.410

这并不像看起来那么容易。请查看将选择包装到元素[中的 div 插件的源代码。](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/div/dialogs/div.js#L98-185)`DIV`这可能对你有启发。但是，请注意，您需要掌握 DOM hacking 方面的大量技能，以避免出现一些异常情况，例如标签重叠：

`<p>First [paragraph</p><p>Second]^ paragraph</p>`

上面不能转换成这个：

`<p>First <pre>paragraph</p><p>Second</pre> paragraph</p>`

因为这是一个错误的标记。

无论如何，祝你好运！

# mysql - 数据库升级后 Solr 未建立索引

> ID：12558974
> 
> 赞同：1
> 
> 时间：2012-09-24T04:48:30.867
> 
> 标签：mysql, solr, lucene

```
<dataConfig>
  <dataSource type="JdbcDataSource" 
              driver="com.mysql.jdbc.Driver"
              url="jdbc:mysql://127.0.0.1/hb" 
              user="root" password="jetech123"/>
<entity name="lmap" query="CALL get_locations(${location.region_id})">
        </entity>
<entity name="l1" query="SELECT IF((SELECT EXISTS(SELECT loc_name FROM lmap WHERE lvl = 1) AS loc_exist) = '0', NULL, (SELECT loc_name FROM lmap WHERE lvl = 1) ) l1">
            <field column="l1" name="l1"/>
            <entity name="l1_url" query="SELECT (SELECT CONCAT('/', LOWER(REPLACE(loc_name,' ','-'))) AS l1_url FROM lmap WHERE lvl = 1) l1_url">
                <field name="l1_url" column="l1_url"/>
            </entity>
        </entity> 
```

在 mysql 5.1 中它工作正常并且 solr 也正确索引，但是当我将我的数据库升级到 Mysql 5.5 时，由于上述实体，solr 没有索引。谁能告诉我上述实体有什么问题？

# mysql - 如何使用 MYSQL 查询访问 Ms-Access 数据库

> ID：12558975
> 
> 赞同：0
> 
> 时间：2012-09-24T04:48:36.480
> 
> 标签：mysql, ms-access-2007

我想使用 MYSQL 查询访问 MS-ACCESS 数据库。我想从 MS-ACCESS 数据库表中下载一些数据到 MYSQL 表中。但我不知道从不同的数据库传输数据。请帮我找到解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:43:50.520

您可以使用[**SQLyog 的**](http://www.webyog.com/en/downloads.php) **Import External Data Feature**将来自不同数据源的数据导入 MySQL（包括 MS-ACCESS）。

您可以[在此处查看 SQLyog 的帮助文档](http://www.webyog.com/doc/SQLyog/#Migration_Toolkit_-_Select_File_or_Folder_SQLyog_MySQL_GUI.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:51:07.427

你不能。MySQL 无法与 MS Access 对话。但是，如果已设置 ODBC 数据源指向存储在 MySQL 中的数据库，则您可以使用 MS Access 与 MySQL 通信。

然后，您可以使用 Access 本身进行复制。

# jquery - 要从属性文件中获取的 Jquery 对话框 URL 值

> ID：12558977
> 
> 赞同：0
> 
> 时间：2012-09-24T04:49:01.210
> 
> 标签：jquery

我有会话失效代码，如果用户闲置一段时间，它将使用户的会话失效。在使会话失效之前，我必须在失效前 1 分钟显示一个 Jquery 对话框，并询问用户是否要继续或注销。

下面是我的部分代码，

```
$j("#dialog").dialog({
buttons: {
'Yes, Continue': function()
 {
   $j.ajax({
    url: 'http://myDomain/session_extend.jsp', 
```

无论我有什么代码都可以正常工作。

问题是，我有 3 个环境（开发、测试和生产）。此代码在我的 Web 应用程序中。每次发生代码更改时，都必须将其转移到开发、测试和生产。并且每次我需要更改上述 URL 中的域并在各自的环境中进行部署。

是否可以从某个属性文件中获取 URL 值？或者还有其他方法可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:03:42.723

您可以使用 javascript 获取您的主机名，例如

```
var host = location.protocol+"//"+location.host+"/";
var pageUrl = host + "session_extend.jsp"; 
```

你可以像这样`pageUrl`在ajax中传递它`url`

```
$j("#dialog").dialog({
  buttons: {
   'Yes, Continue': function()
   {
     $j.ajax({
       url: pageUrl, 
```

我希望，它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:20:10.377

您可以使用相对 URL：

```
url: 'session_extend.jsp', 
```

如果调用页面在您的开发环境中。

# asp.net - IIS 7 ASP.NET 4.0 忽略默认文档

> ID：12558978
> 
> 赞同：3
> 
> 时间：2012-09-24T04:49:02.797
> 
> 标签：asp.net, iis-7

我们有一个从 3.5 升级的 ASP.NET 4.0 Web 应用程序。不幸的是，当用户尝试通过[http://xxx.abc.com/](http://xxx.abc.com/)访问 URL 时，用户会得到 /login.aspx?ReturnUrl=%2f。

我知道这似乎是 .NET 4.0 和 IIS7 上的一种行为。这会导致负载均衡器出现问题，因为它返回**302 状态**代码。负载均衡器已配置为查找 http **200 状态**代码的某些原因。

有什么方法可以修复 ASP.NET 4.0 行为，以便当用户单击[http://xxx.abc.com/](http://xxx.abc.com/)时，显示 login.aspx 而无需重定向？

我在下面尝试了这个但没有奏效：

```
<system.webServer>
    <defaultDocument>
      <files>
        <add value="Login.aspx" />
      </files>
    </defaultDocument>
</system.webServer> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T05:12:20.230

这不是 .NET 4 / IIS 7 的行为，而是表单身份验证的行为。似乎 Authentication 模块首先运行，并在 Default Document 模块获得机会之前触发重定向。这是我建议的解决方法：

*   使用标签 `<allow users="?" />`在您网站的根目录上设置。`location`
*   如果上述方法不可行或不可行，请使用[URL 重写模块](http://www.iis.net/downloads/microsoft/url-rewrite)而不是依赖默认文档。

我使用这个重写规则`login.aspx`从根 URL 返回一个 200 状态码：

```
<rewrite>
  <rules>
    <rule name="RewriteURL1" stopProcessing="true">
      <match url="" />
      <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
      </conditions>
      <action type="Rewrite" url="login.aspx" />
    </rule>
  </rules>
</rewrite> 
```

# python - Python：在调用时评估列表中的变量，而不是指向对象

> ID：12558979
> 
> 赞同：1
> 
> 时间：2012-09-24T04:49:08.777
> 
> 标签：python

我想我的代码走错了路。我希望得到一些pythonic的答案。

我希望能够生成 [object.name, object] 的列表。然后将使用一个方法在列表中搜索 object.name，然后返回该对象。用户还应该能够更改 object.name 下面的代码设置类。

```
class a():
    def __init__(self, name):
        self.name = name

class b():
    def __init__(self):
        self.graph = []
    def make_a(self, name):
        new_a = a(name)
        self.graph.append([new_a.name, new_a]) 
```

然后用户将输入：

```
obj_B = b()
obj_B.make_a('jack')
obj_B.graph
[['jack', <a instance at 0x02FB2260>]] 
```

然后用户应该能够：

```
obj_B.graph[0][1].name = 'jill' 
```

那么的输出`obj_B.graph`应该是：

```
[['jill', <a instance at 0x02FB2260>]] 
```

在写这篇文章时，我意识到我可能应该只使用字典，然后编写一个方法来创建新的和删除旧的字典键。如果有人有更好的想法，我会很感激看到他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:30:58.380

正如@David Robinson 指出的那样，听起来您正在尝试重新实现`dict`的功能。但是，为了解决最初的问题，您遇到的问题是字符串是不可变的。当您编写时，您正在更改's`obj_B.graph[0][1].name = 'jill'`实例中保存的引用，而不是 in 中的引用。考虑以下：`a``name``obj_B.graph`

```
>>> a = 'hello'
>>> b = a  # b is now a reference to the same str object as a
>>> id(a)
4305179104
>>> id(b)
4305179104
>>> b is a
True
>>> a = 'goodbye'  # create a new str object in the heap, and change the reference belonging to a
>>> id(a)
4305179152  # not the same object as before!
>>> id(b)
4305179104  # b is the same
>>> b is a
False 
```

将此与就地修改的可变类型进行比较：

```
>>> a = [1,2,3]
>>> b = a
>>> a.append(4)  # we are not reassigning a, just modifying the list object it points to
>>> print a
[1, 2, 3, 4]
>>> print b
[1, 2, 3, 4]
>>> b is a
True 
```

无论引用是命名空间中的变量还是列表中的条目，这都适用。

您最初问题的解决方案是创建`name`一个方法并通过调用访问它，如下所示：

```
class A(object):
    def __init__(self, name):
        self._name = name
    def set_name(self, name):
        self._name = name
    def get_name(self):
        return self._name

>>> l = []
>>> a = A('jack')
>>> l.append((a.get_name, a))
>>> l[0][1].set_name('jill')
>>> l[0][0]()
'jill' 
```

或者，您可以给类一个`__str__`方法并使用它来返回名称。这样，您只需要列表中的单个条目：

```
class A(object):
    def __init__(self, name):
        self.name = name
    def __str__(self):
        return self.name

>>> l = []
>>> l.append(A('jack'))
>>> str(l[0])
'jack'
>>> l[0].name = 'jill'
>>> str(l[0])
'jill' 
```

PS，如果您使用的是 Python 2.x，那么您编写的*所有*类都应该继承自`object`. 也就是说，您的 classdefs 应该读取`class a(object):`等。这对于您的类是*new-style*是必要的，这是[非常可取的](http://docs.python.org/reference/datamodel.html#new-style-and-classic-classes)。旧式类（不继承自`object`）只是为了向后兼容。在 Python 3 中，这不再是必需的，因为所有类都是新样式的。

# mysql - 更新 sql 查询 where select max

> ID：12558981
> 
> 赞同：2
> 
> 时间：2012-09-24T04:49:23.720
> 
> 标签：mysql, sql

我想要一个更新 id 最大数量的查询......这是我的代码..

```
UPDATE `jobs` SET `sectors` = '12' WHERE `id` = (SELECT MAX(`id`) FROM `jobs`) 
```

错误说：`#1093 - You can't specify target table 'wpjb_job' for update in FROM clause`

我该怎么做才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T04:54:53.110

如果`id`是一个唯一字段，那么您可以使用以下查询：

```
UPDATE `jobs` 
SET `sectors` = '12' 
ORDER BY `id` DESC LIMIT 1 
```

如果它不是唯一的，那么您需要使用临时表：

```
UPDATE `jobs`
SET `sectors` = '12'
WHERE `id` = (SELECT `id` FROM (SELECT MAX(`id`) AS `id` FROM `jobs`) as temp) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:56:59.273

正如 AVD 所说，使用这样的表别名

```
 UPDATE jobs
    SET sectors= '12'
    WHERE ID = (select * from (SELECT MAX(ID) FROM jobs) as t) 
```

# javascript - 如何在流星的车把助手中使用多个参数？

> ID：12558982
> 
> 赞同：57
> 
> 时间：2012-09-24T04:49:31.107
> 
> 标签：javascript, meteor, handlebars.js, meteor-helper

我正在尝试使用 Meteor 创建一个自定义助手。按照这里的文档： [https ://github.com/meteor/meteor/wiki/Handlebars](https://github.com/meteor/meteor/wiki/Handlebars)

我试图将我的助手定义如下：

```
Template.myTemplate.testHelper = function(foo, bar, options) {
    console.log(foo);
    console.log(bar);
} 
```

我的模板看起来像：

```
<template name="myTemplate">
    {{#testHelper "value1" "value2"}}
    {{/testHelper}}
</template> 
```

查看我的控制台输出，我预计会看到 2 行输出：

```
value1
value2 
```

但是我的控制台看起来像：

```
value1
function (data) {
    // don't create spurious annotations when data is same
    // as before (or when transitioning between e.g. `window` and
    // `undefined`)
    if ((data || Handlebars._defaultThis) ===
        (old_data || Handlebars._defaultThis))
      return fn(data);
    else
      return Spark.setDataContext(data, fn(data));
  } 
```

请注意，我对流星和车把完全陌生。我想我会更高兴使用下划线，但流星的文档几乎完全忽略了下划线。我在定义我的辅助函数时做错了什么？似乎它没有看到第二个参数“bar”，而是将其解释为选项。（注意：如果我 console.log(options) 它返回“未定义”）。

流星版本 0.4.0 (8f4045c1b9)

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-09-24T14:48:09.417

你的逻辑很好，只是对模板进行一些更改

```
<template name="myTemplate">
  {{testHelper "value1" "value2"}}
</template> 
```

请记住，testHelper 函数仅在 myTemplate 模板中定义。

如果你想在全球注册 testHelper 你需要做这样的事情

```
Handlebars.registerHelper('testHelper', function(foo, bar){
  console.log(foo);
  console.log(bar);
}); 
```

玩得开心

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-31T07:46:16.847

除了

```
<template name="myTemplate">
  {{testHelper "value1" "value2"}}
</template> 
```

而不是将值作为参数传递，而是将函数作为参数传递这是代码

```
<template name="myTemplate">
  {{ testHelper1 (testHelper2 "value2") }}
</template> 
```

# javascript - nsISocketTransportService 使用 Firefox 插件 sdk

> ID：12558983
> 
> 赞同：3
> 
> 时间：2012-09-24T04:49:44.810
> 
> 标签：javascript, firefox, firefox-addon

我正在尝试使用 Firefox 来阅读 SSH 横幅。IE。当您最初连接到 SSH 服务器时，服务器会向您发送横幅，标识服务器软件，然后您向 SSH 服务器发送横幅，标识客户端软件。

为此，我使用此 URL 中的示例：

[Firefox 扩展 javascript 中是否有 nsiClientSocket？](https://stackoverflow.com/questions/7850258/is-there-nsiclientsocket-in-firefox-extension-javascript)

这是我的代码：

```
'use strict';

const {Cc,Ci} = require("chrome")
const prefs = require("simple-prefs");

exports.main = function(options,callbacks) {
    var transport = Components.classes["@mozilla.org/network/socket-transport-service;1"]
                              .getService(Components.interfaces.nsISocketTransportService)
                              .createTransport(null, 0, "localhost", 22, null);

    //var output = transport.openOutputStream(0, 0, 0);
    var input = transport.openInputStream(0, 0, 0);
    var data = "test";
    dump(stream.read());
    //stream.write(data, data.length);
    //stream.close();
    dump("all done!");
}; 
```

当我用它做 cfx xpi 时，我得到了这个：

```
The following lines from file C:\path\to\lib\main.js:
   8: var transport = Components.classes["@mozilla.org/network/socket-transport-service;1"]
   9: .getService(Components.interfaces.nsISocketTransportService) use 'Components' to access chrome authority. To do so, you need to add a line somewhat like the following:

  const {Cc,Ci} = require("chrome");

Then you can use any shortcuts to its properties that you import from the 'chrome' module ('Cc', 'Ci', 'Cm', 'Cr', and 'Cu' for the 'classes', 'interfaces', 'manager', 'results', and 'utils' properties, respectively. And `components` for `Components` object itself). 
```

所以我试试这个：

```
'use strict';

const {Cc,Ci} = require("chrome")
const prefs = require("simple-prefs");

exports.main = function(options,callbacks) {
    var transport = components.classes["@mozilla.org/network/socket-transport-service;1"]
                              .getService(interfaces.nsISocketTransportService)
                              .createTransport(null, 0, "localhost", 22, null);

    //var output = transport.openOutputStream(0, 0, 0);
    var input = transport.openInputStream(0, 0, 0);
    var data = "test";
    dump(stream.read());
    //stream.write(data, data.length);
    //stream.close();
    dump("all done!");
}; 
```

IE。我制作 Components 组件（小写）和 Components.interfaces 只是接口。但是后来我在控制台上收到了这个错误：

```
 var transport = components.classes["@mozilla.org/network/socket-transport-service;1"]
ReferenceError: components is not defined 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T19:22:26.857

您应该使用`Cc`代替`Components.classes`和`Ci`代替`Components.interfaces`- 这些是您从`chrome`模块导入的变量并且它们已定义。如果您需要使用`Components`对象本身（不太可能），您也可以导入它：

```
const {components, Cc, Ci} = require("chrome"); 
```

供参考：[chrome权威](https://developer.mozilla.org/en-US/Add-ons/SDK/Tutorials/Chrome_Authority)

# algorithm - 在地图上排序点的算法？

> ID：12558984
> 
> 赞同：3
> 
> 时间：2012-09-24T04:49:45.793
> 
> 标签：algorithm, geometry, mkmapview, polygons

我有一个点数组，其中每个点都是地图上的坐标。我想这样做，以便当我向地图添加一个点时，它会添加到我的数组中最近的两点之间。

此外，我想渲染这些点，以便不同点之间永远不会有任何交叉。新点应添加到生成的多边形的外边缘，并连接到最近的两个。

有这样做的算法吗？

编辑：

为清楚起见，我有以下屏幕截图。我想实现方法B：

![在此处输入图像描述](../Images/ae945738a02078dd849ad7e8e08a0ea1.png)

**编辑2：**

这是我为尝试解决问题而编写的一堆代码。假设 MBCoordinates 就是这样，坐标：

```
//
//  Detect which coordinate is the closest to the supplied coordinate
//

- (void) insertCoordinateBetweenClosestNeighbors:(MBCoordinate *)coordinate{

if (![self points] || [[self points] count] < 3) {
    [[self points] addObject:coordinate];
    return;
}

NSMutableSet *pointSet = [NSMutableSet setWithArray:[self points]];

MBCoordinate *closestCoordinate = [self closestCoordinateToCoordinate:coordinate inSet:pointSet];
[pointSet removeObject:closestCoordinate];

MBCoordinate *nextClosestCoordinate = [self closestCoordinateToCoordinate:coordinate inSet:pointSet];

NSUInteger indexOfClosestCoordinate, indexOfSecondClosestCoordinate, insertionIndex;

for (NSUInteger i=0; i < [[self points] count]; i++) {

    if ([[self points][i] isEqual:closestCoordinate]) {
        indexOfClosestCoordinate = i;
    }

    if ([[self points][i] isEqual:nextClosestCoordinate]) {
        indexOfSecondClosestCoordinate = i;
    }
}

if(indexOfSecondClosestCoordinate == indexOfClosestCoordinate-1){
    insertionIndex = indexOfSecondClosestCoordinate+1;
}else{
    insertionIndex = indexOfClosestCoordinate+1;
}

[[self points] insertObject:coordinate atIndex:insertionIndex];

 /*

 Not in use in my program, but an alternate attempt:
[[self points] addObject:coordinate];
[self sortPointsByDistance];
 */
}

- (void) sortPointsByDistance{

//
//  Points that need sorting
//

NSMutableSet *unprocessedPoints = [NSMutableSet setWithArray:[self points]];

//
//  All of the unsorted points
//

NSMutableSet *unsortedPoints = [NSMutableSet setWithArray:[self points]];

//
//  The unsorted points minus the closest one
//

NSMutableSet *unsortedPointsExceptClosest = [NSMutableSet setWithArray:[self points]];

//
//  We put the point into here in the correct order
//

NSMutableArray *sortedPoints = [@[] mutableCopy];

//
//  Prime the pump
//

MBCoordinate *workingCoordinate = [self points][0];
[sortedPoints addObject:workingCoordinate];
[unprocessedPoints removeObject:workingCoordinate];

while([unprocessedPoints count] > 0){

    MBCoordinate *closestCoordinate = [self closestCoordinateToCoordinate:workingCoordinate inSet:unsortedPoints];
    MBCoordinate *secondClosestCoordinate = nil;

    //
    //  The closest point might be sorted already!
    //
    //  If it is, then we have to find the closest point.
    //

    if ([sortedPoints containsObject:closestCoordinate]) {

        NSInteger indexOfClosest = [sortedPoints indexOfObject:closestCoordinate];
        NSInteger indexOfSecondClosest = indexOfClosest;
        NSInteger targetIndex = indexOfClosest+1;

        if (!secondClosestCoordinate) {
            [unsortedPoints removeObject:closestCoordinate];
            secondClosestCoordinate = [self closestCoordinateToCoordinate:workingCoordinate inSet:unsortedPointsExceptClosest];

            if ([sortedPoints containsObject:secondClosestCoordinate]) {

                //
                //  Insert between the two points
                //

                indexOfSecondClosest = [sortedPoints indexOfObject:secondClosestCoordinate];

            }
        }

        if (indexOfSecondClosest < indexOfClosest) {
            targetIndex = indexOfSecondClosest + 1;
        }

        [sortedPoints insertObject:workingCoordinate atIndex:targetIndex];
        workingCoordinate = [unprocessedPoints anyObject];

        break;

    }else{
        workingCoordinate = closestCoordinate;
    }

    [sortedPoints addObject:workingCoordinate];
    [unprocessedPoints removeObject:workingCoordinate];
    unsortedPointsExceptClosest = [unsortedPoints copy];
    secondClosestCoordinate = nil;

}

[self setPoints:sortedPoints];
}

- (MBCoordinate *) closestCoordinateToCoordinate:(MBCoordinate *)coordinate inSet:(NSSet *)aSet{

MBCoordinate *closest = nil;
CGFloat closestDistance;

for (MBCoordinate *coordinateInSet in aSet) {

    if ([coordinateInSet isEqual:coordinate]) {
        continue;
    }

    if (!closest) {
        closest = coordinateInSet;
        closestDistance = [self distanceBetweenCoordinate:coordinate andCoordinate:coordinateInSet];
    }

    CGFloat distanceBetweenPoints = [self distanceBetweenCoordinate:coordinate andCoordinate:coordinateInSet];

    if (distanceBetweenPoints < closestDistance) {
        closest = coordinateInSet;
        closestDistance = distanceBetweenPoints;
    }

}

return closest;
}

//
//  Determines the distance between two coordinates
//

- (CGFloat) distanceBetweenCoordinate:(MBCoordinate *)coordinate andCoordinate:(MBCoordinate *)anotherCoordinate{

CGFloat xDistance, yDistance;

xDistance = coordinate.latitude-anotherCoordinate.latitude;
yDistance = coordinate.longitude-anotherCoordinate.longitude;

float distance = xDistance/yDistance;

//
//  Absolute value of floats...
//

if (distance < 0) {
    distance *= -1;
}

return distance;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T05:05:36.407

我认为你所追求的可以通过使用[Convex Hull](http://en.wikipedia.org/wiki/Convex_hull)来实现。这将创建一个多边形，其边围绕您的所有点。但是，如果您有一个不在边缘上的点，它将最终在多边形内。

[您可以在此](http://www.geocodezip.com/map-markers_ConvexHull_Polygon.asp)页面上查看 Convex Hull 算法的实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T05:24:42.520

好吧，我不知道您的坐标系是如何工作的，但是您要做的是计算新点与数组中其他点之间的[欧几里得距离。](http://en.wikipedia.org/wiki/Euclidean_distance)然后只需将新点插入到新点的欧几里德距离最短的两个点之间。

请记住，地球表面并不平坦。上面链接的欧几里得距离假定二维*平面度。*因此，您的观点相距越远，该公式的准确性就越低。

# c++ - Qt：按键事件

> ID：12558988
> 
> 赞同：9
> 
> 时间：2012-09-24T04:50:02.980
> 
> 标签：c++, qt

我是 Qt 的初学者，正在实施 keypressevent。我想以这样的方式处理键，如果按下“A”，它应该打印“R”并按下其他键我应该打印。

如何在 Qt 中处理这种类型的活动......？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-24T06:06:00.627

您可以使用`key()`函数获取按下的键。可以[在此文档页面](http://doc.qt.io/qt-4.8/qt.html#Key-enum)中找到键的代码列表。所以，如果你想要你的`A`钥匙，你可以做

```
keyPressEvent( QKeyEvent * event )
{
    if( event->key() == Qt::Key_A )
    {
        // do your stuff here
    }
} 
```

或直接使用密钥代码：

```
if( event->key() == 0x41 )
{
    // do your stuff here
} 
```

# java - sql连接，java，我的sql

> ID：12558991
> 
> 赞同：0
> 
> 时间：2012-09-24T04:50:52.893
> 
> 标签：java, mysql, sqlconnection

我是 Java 新手，我需要你的帮助。
我在服务器中有一个 sql 数据库，并且在服务器的 cmd 中始终使用 sql plus 登录数据库。在客户端 PC 上，当我尝试开发配置字符串时，我正在使用 mysql 连接器，它可以工作吗？是否可以使用 mysql 连接器与 sql 建立连接？

这是我的代码：

```
 public class Connection_String {

      static public final String driver = "com.mysql.jdbc.Driver";
      static public final String    connection= "jdbc:mysql://192.168.2.22:1521/nameofdatabase ";
      static public final String user = "user" ; 
      static public final String password = "password"; //connection password 

      public static void main(String[] args) throws ClassNotFoundException, SQLException 
      {
        try 
        {
            Class.forName(driver);
            Connection con = DriverManager.getConnection(connection,user,password);
            System.out.println(" Connection string : ");
            System.out.println(connection);
            System.out.println("User Name " + user );
            System.out.println("password" + password);

            if (!con.isClosed())
            { 
                con.close();
            } 
```

这些是错误：

> 线程“主”com.mysql.jdbc.exceptions.jdbc4.CommunicationsException 中的异常：通信链接失败
> 
> 最后一个成功发送到服务器的数据包是 0 毫秒前。驱动程序没有收到来自服务器的任何数据包。在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) 在 java.lang.reflect.Constructor.newInstance(Unknown Source)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:57:25.080

您确定您的 mysql 正在侦听端口 1521 的套接字吗？默认情况下，mysql 配置为使用端口 3306。

# iphone - iPhone - 触控区域检测

> ID：12558993
> 
> 赞同：-1
> 
> 时间：2012-09-24T04:51:03.830
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在创建一个应用程序，允许用户在其中触摸线或路径上方。我想做一些事情，比如用户应该能够点击大约 20 像素的线。我用谷歌搜索了很多，但一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T04:54:41.957

以下是我的一个程序中的一段代码：在这里我做了类似的事情。用户在屏幕上点击的任何位置都会出现图像。我已将屏幕限制在某些区域，只有在哪里可以注册点击。希望这对你有帮助：！！

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

  UITouch *touch = [[event allTouches] anyObject];
     CGPoint location = [touch locationInView:touch.view];
    image=[UIImage imageNamed:@"anyImage.gif"];
    newView = [[UIImageView alloc]initWithImage:image];
    if (location.y<117 || location.y>354)
    {
        newView.frame = CGRectMake (location.x, location.y,87,70);
        newView.center=location;
        [self addSubview:newView];

    }

    if (location.y<90)
    {
        if(location.y>85)
        {
            if (location.x>133 || location.x<183)
            {

                [self shakeA]; //A method shakeA is called

            }
        }
    }
    else if (location.y<360)
    {
        if (location.y>354)
        {
            if (location.x>133 || location.x<183)
            {       
                [self shakeB]; // Method shakeB called

            }
        }
    }
} 
```

# php - JQuery Knob显示数字变化

> ID：12558996
> 
> 赞同：6
> 
> 时间：2012-09-24T04:51:24.890
> 
> 标签：php, javascript, jquery, jquery-plugins

我正在使用[JQuery Knob](http://anthonyterrien.com/knob/)制作一些很酷的图表，并且运行良好。但是我有一个问题：我想让图表之间的显示数字连接一个'％'符号。但我似乎无法让它发挥作用。通过 jquery 修改输入不会这样做，我已经尝试读入库的代码但没有运气。以前有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-24T05:44:46.487

如果您快速浏览一下 github 存储库，您会发现每次绘制画布时都会调用一个绘制钩子。如果你实现了那个钩子，你应该能够在输入中添加任何你想要的东西。这是您正在寻找的功能的简短示例（尝试一下：http: [//jsfiddle.net/eAQA2/](http://jsfiddle.net/eAQA2/)）并供将来参考：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="https://raw.github.com/aterrien/jQuery-Knob/master/js/jquery.knob.js"></script>
<script>
$(function() {
    $(".dial").knob({
      'draw' : function () { 
        $(this.i).val(this.cv + '%')
      }
    })
})
</script>
</head>
<body>
<input type="text" class="dial" data-min="0" data-max="100">
</body>
</html>​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-20T17:36:18.043

从 1.2.7 版开始，现在有一个`format`钩子可以执行如下任务：

```
$(".dial").knob({
  'format' : function (value) {
     return value + '%';
  }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-14T13:18:46.883

我也设法通过动画实现了这一点：

我的解决方案是通过在每次增加值时添加百分比来做到这一点：

```
$(function() {
      $('.dial_overall').each(function () {

           var $this = $(this);
           var myVal = $this.attr("value");

           $this.knob({
           });

           $({
               value: 0 
           }).animate({

               value: myVal
           }, {
               duration: 1600,
               easing: 'swing',
               step: function () {
                   $this.val(Math.ceil(this.value)).trigger('change');
                     $('.dial_overall').val($('.dial_overall').val() + '%');
               }

           })   
       });

    }); 
```