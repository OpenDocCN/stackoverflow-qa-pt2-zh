# StackOverflow 问答 14558000-14558999

# jenkins - 在 Jenkins 中为 settings.xml 指定一个单独的位置

> ID：14558002
> 
> 赞同：10
> 
> 时间：2013-01-28T08:18:16.187
> 
> 标签：jenkins, continuous-integration

我想为 Maven 构建的 settings.xml 指定一个不同的位置，而不是默认位置 ( `<USER_HOME>/.m2/settings.xml`)。

我已经尝试过该`-s`标志，但它不起作用。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T12:44:26.317

我找到了一个简单的方法来做到这一点..

转到作业的“构建”部分，然后单击“高级”。那里有一个“设置文件”选项。指定“settings.xml”文件的位置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-28T08:38:57.697

实际上 -s 标志有效。我们使用它 maven 工作。

在*Build*部分下添加**Invoke 顶级 Maven 目标**并将*Goals*设置为`[your goals] -s [path/to/settings.xml]`（例如`clean deploy -s /some/path/settings.xml`）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-28T08:39:04.737

jenkins[托管脚本插件](https://wiki.jenkins-ci.org/display/JENKINS/Managed+Script+Plugin)允许您管理多个 maven 设置文件。安装后，您可以在*Manage* > *Manage Files* > *Add new config* > *[Global] Maven Settings File*中添加配置，您可以在其中存储配置。

在*Build Configuration Settings*的作业配置中，选中*提供配置文件并在**Managed Files* > *File*中选择 settings.xml 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-26T13:48:58.633

转到您的 JOB 配置

比构建部分

添加构建步骤：- 调用顶级 Maven 目标并填写 Maven 版本和目标

比单击高级按钮并提及图像中提及的**设置**文件路径 [![在此处输入图像描述](../Images/f35f294534d97646d78f5ddcb7fdbeb6.png)](https://i.stack.imgur.com/jLwqu.png)

# c++ - 如何使用结构传递文件对象？

> ID：14558007
> 
> 赞同：0
> 
> 时间：2013-01-28T08:18:35.377
> 
> 标签：c++

我在使用结构传递文件对象时遇到一个问题，代码是

```
#include <iostream>
#include<fstream>
using namespace std;
typedef struct abc
{
    ofstream &t;

}stabc;

class dc
{
    public:
    static void fun(stabc *ad);
    static stabc ab;

};
int main()
{
    ofstream str;
    str.open("hello.csv",ios::app);
    str<<"hellllooo"<<endl;
    dc d;
    d.ab.t=str;
    dc::fun(&d.ab);
    cout << "Hello world!" << endl;
    return 0;
}
void dc::fun(stabc *ad)
{
    ofstream& st=ad->t;
    st<<"kikiki"<<endl;

} 
```

它给出未初始化的引用成员 abc::t。请告诉我我错在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:20:23.183

您需要`t`在**[成员初始化列表](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor/8523361#8523361)**中初始化引用。
引用是特殊的构造，需要在创建时进行初始化。由于您没有初始化成员引用，因此编译器会发出诊断信息。

成员引用**必须**在成员初始化器列表中进行初始化。

**[在线样品](http://ideone.com/38qGfE)**：

```
#include <iostream>
#include <fstream>
using namespace std;
struct stabc
{
    ofstream &t;
    stabc(ofstream &obj):t(obj){}
};

int main()
{
    ofstream obj2;
    stabc obj(obj2);
    return 0;
} 
```

另请注意，在 C++（*与 C 不同*）中，您不需要`typedef`结构即可在没有关键字的情况下使用它`struct`。您可以简单地使用结构名称，而无需预先添加`struct`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:21:17.520

您不能重新设置参考。它们必须被初始化，并且没有“默认”值作为参考。因此，您需要`abc`使用对文件流对象的引用来构造一个实例：

```
struct abc
{
    std::ofstream &t;
}; 
```

然后

```
abc myabc = {str}; 
```

或者给出`abc`一个构造函数并使用构造函数初始化列表：

```
struct abc
{
  abc(std::ofstream& o) : t(o) {}
  std::ofstream &t;
};

abc myabc(str); 
```

# asp.net - aspx 中 __EVENTVALIDATION __VIEWSTATE 的目的是什么？

> ID：14558022
> 
> 赞同：18
> 
> 时间：2013-01-28T08:20:01.893
> 
> 标签：asp.net

考虑：

```
Content-Disposition: form-data; name="__VIEWSTATE"

/wEPDwUKMTQxNzIxMTc0MQ9kFgICAw8WAh4HZW5jdHlwZQUTbXVsdGlwYXJ0L2Zvcm0tZGF0YWRkflsROmXoLo8ar8ukWWYDh1Wr2BCwmhiAAqpX/xwqLq8=

Content-Disposition: form-data; name="__EVENTVALIDATION"

/wEWBgKJ1KD6AwKH3P+GBQLr/4HeAgKWoZqyCQLinqurDALt3oXMA0YLgb/Mt6KGihl+8ixYoY9A24wgHGGoPAINhuyP7nEl 
```

我们制作了一个用户可以上传照片的网站。后来我们决定用户也可以通过其他应用上传照片，我们希望有一个统一的界面。所以其他应用程序使用相同的页面。

我们注意到，除非我们知道 __EVENTVALIDATION 和 __VIEWSTATE 的值，否则我们无法上传照片。

当然，应用程序可以只加载上传的图像，但这有点麻烦。

那些到底是为了什么？有没有办法在不指定内容的情况下将图像上传到 aspx 上传网站？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-28T08:22:36.533

[HTTP](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)是一种无状态协议，这意味着客户端和服务器没有内置的方式来跟踪应用程序从一个请求到下一个请求的状态。已经发明了各种技术来规避这种情况，例如 cookie。ViewState 和事件验证是[ASP.NET](https://en.wikipedia.org/wiki/ASP.NET)使用的两种技术，用于为网页提供完整状态的感觉。

ViewState 中的数据是所有控件（输入字段、复选框等）向下发送到客户端时的状态。当表单被发送回服务器时，ASP.NET 可以判断用户是否更改了任何字段中的任何值，并且可以引发反映这一点的事件（[`CheckedChanged`例如在复选框上](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.checkedchanged.aspx)）。如果没有 ViewState，服务器将无法判断是否有任何字段已更改。

事件验证确保客户端上引发的事件源自 ASP.NET 呈现的控件。

这是[一篇关于 ViewState 的论文](http://msdn.microsoft.com/en-us/library/ms972976.aspx)和[另一篇涵盖事件验证](https://web.archive.org/web/20140208174740/http://msdn.microsoft.com/en-us/magazine/cc163512.aspx)的论文。

# php - KNET 与 Opencart 的集成

> ID：14558027
> 
> 赞同：0
> 
> 时间：2013-01-28T08:20:20.567
> 
> 标签：php, payment-gateway, opencart

我想在我的 opencart 应用程序中集成 KNET（科威特支付网关）。我收到了一个 PHP 集成工具包，但不知道从哪里开始在 opencart 中。请让我知道如何将 KNET 添加为付款方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:00:59.633

# 准备开发环境

1）首先，设置商店的开发克隆或将其关闭（如果您仍在构建它）

# 下载现有的支付网关

2) 除了您的供应商的 PHP 和 SDK；mashAllah，KNET 提供了，我建议下载一个附加模块。

所以访问这个页面：[http ://www.opencart.com/index.php?route=extension/extension&path=3](http://www.opencart.com/index.php?route=extension/extension&path=3)

浏览最近的国家或匹配的模块付款。有许多自定义支付网关。这让您了解它们是如何工作的。

# 安装/构建您的支付网关

3) 工作流程。当前的工作流程是放置和编辑支付文件夹：

```
/catalog/view/default/template/payment
/catalog/model/payment
/catalog/controller/payment 
```

这是 MVC 模式，在我看来，Nochex.php 可能是最容易使用和查看的模式之一。您需要考虑的是 SSL 重定向、Order_status 以及完整和失败的页面。

我会下载 nochex 文件，备份它们，然后开始制作名为 的新文件`Knet.php`，`KnetMVC.php`等等。

我不会编辑核心会话文件、快速修改或编辑——使用系统；避免快速破解。另一个建议来源是付款文章；也值得一读：[http ://www.opencart.com/index.php?route=documentation/documentation&path=78_32_35](http://www.opencart.com/index.php?route=documentation/documentation&path=78_32_35)

# 未来的参考文献和文​​档

4) 对于未来关于向 opencart 添加支付网关和更新/修改的帖子，我也参考了这些：

[Opencart 中的支付网关集成](https://stackoverflow.com/questions/11539803/payment-gateway-integration-in-opencart)

[http://forum.opencart.com/viewtopic.php?f=20&t=19350](http://forum.opencart.com/viewtopic.php?f=20&t=19350)

[http://www.webhostinghub.com/support/website/opencart-15/add-new-payment-processors](http://www.webhostinghub.com/support/website/opencart-15/add-new-payment-processors)

[http://www.inmotionhosting.com/support/edu/opencart/setting-up-payment-gateways](http://www.inmotionhosting.com/support/edu/opencart/setting-up-payment-gateways)

[http://www.inmotionhosting.com/support/edu/opencart/setting-up-payment-gateways/setting-up-payment-modules-in-opencart](http://www.inmotionhosting.com/support/edu/opencart/setting-up-payment-gateways/setting-up-payment-modules-in-opencart)

# sql-server - 联接两个表，但只返回一个字段中具有唯一值的行

> ID：14558028
> 
> 赞同：0
> 
> 时间：2013-01-28T08:20:21.203
> 
> 标签：sql-server, sql-server-2008, tsql

我有一张表`Currency CHAR(3)`：StressValue`(FLOAT)`对。它有 6 行。

第 6 行的`'Currency'`值代表在第二个:对`'GRP'`表中指定的一组货币。`Currency``StressValue`

我想在“货币”上加入两个表，但我不想返回第二个表中的那些行，这些行在第一个表的 5 行中的任何一行中都包含相同的“货币”值。

例如，如果第 2 行具有组合`'GBP`': '0.05' 并且第二个（即`'GRP'`）表具有 'GBP' 行：`'0.10'`那么我希望结果集仅显示`'GBP'`一行 - 即`'0.05'`。

请问，有人可以建议在 SQL Server 2008 R2 中执行此操作的最佳方法吗？

编辑：

下面是 Dimension1=GroupName 的简单 LEFT JOIN 中的两个表。
问题是我有两个值的“ES”：-0.04 和 -0.045，我只想保留 -0.04 一个。

![在此处输入图像描述](../Images/fa0d0e4e8a4ec81207e472114a984a09.png) 编辑2：

左表、右表和所需结果集：

![在此处输入图像描述](../Images/1e887be2f6c9c5c5b681557c46aa1277.png)

![在此处输入图像描述](../Images/16e04defbfcf7325a85d03ae77c17f21.png)

![在此处输入图像描述](../Images/617695c0f183694d127274db51b5ed2d.png)

请注意，GroupName='PE' AND 'MemberName='ES' 的行已从所需结果集中排除，因为 'ES' 已出现在左表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:45:35.693

假设我理解你的正确：

```
select * from
Currency as c
left join StressValue as s on c.Diemention1 = s.GroupName AND s.MemberName <> ( 
  SELECT s.MemberName 
  from Currency as c 
  join StressValue as s 
  on c.Diemention1 = s.MemberName) 
```

见[小提琴](http://sqlfiddle.com/#!3/eaf9f/13)

# python - 递归拆分包含一组已定义前缀的字符串 - Python

> ID：14558034
> 
> 赞同：6
> 
> 时间：2013-01-28T08:20:42.357
> 
> 标签：python, string, recursion, split, prefix

如果我有一个可以附加到字符串的前缀列表，我如何将一个字符串拆分为它的前缀和下一个子字符串中的其他字符。例如：

```
prefixes = ['over','under','re','un','co']

str1 = "overachieve"
output: ["over","achieve"]

str2 = "reundo"
output = ["re","un","do"] 
```

有没有更好的方法来完成上述任务，也许使用正则表达式或一些字符串函数，而不是：

```
str1 = "reundo"
output = []

for x in [p for p in prefixes if p in str1]:
    output.append(x)    
    str1 =  str1.replace(x,"",1)
output.append(str1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T09:05:34.603

正则表达式是搜索许多替代前缀的有效方法：

```
import re

def split_prefixes(word, prefixes):
    regex = re.compile('|'.join(sorted(prefixes, key=len, reverse=True)))
    result = []
    i = 0
    while True:
        mo = regex.match(word, i)
        if mo is None:
            result.append(word[i:])
            return result
        result.append(mo.group())
        i = mo.end()

>>> prefixes = ['over', 'under', 're', 'un', 'co']
>>> for word in ['overachieve', 'reundo', 'empire', 'coprocessor']:
        print word, '-->', split_prefixes(word, prefixes)

overachieve --> ['over', 'achieve']
reundo --> ['re', 'un', 'do']
empire --> ['empire']
coprocessor --> ['co', 'processor'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:30:19.030

我会使用该`str.startswith`方法

```
for p in prefixes:
    if str1.startswith(p):
        output.append(p)
        str1 = str1.replace(p, '', 1)
output.append(str1) 
```

您的代码的最大缺陷是类似的字符串`'found'`会输出`['un', 'fod']`.

但是，如果您有一个假设的 string `'reuncoundo'`，那么您将需要多次迭代列表。

```
while True:
    if not any(str1.startswith(i) for i in prefixes):
        output.append(str1)
        break
    for p in prefixes:
        if str1.startswith(p):
            output.append(p)
            str1 = str1.replace(p, '', 1) 
```

这输出`['re', 'un', 'co', 'un', 'do']`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T08:32:59.353

```
prefixes = ['over','under','re','un','co']

def test(string, prefixes, existing=None):
    prefixes.sort(key = lambda s: len(s))
    prefixes.reverse() # This and the previous line ensure that longer prefixes are searched first regardless of initial sorting.
    if existing is None:
        existing = [] # deals with the fact that placing [] as a default parameter and modifying it modifies it for the entire session
    for prefix in prefixes:
        if string.startswith(prefix):
            existing.append(prefix)
            return test(string[len(prefix):], prefixes, existing)
    existing.append(string)
    return existing 
```

这段代码递归地遍历一个字符串，删除已知的前缀直到它用完，然后返回整个列表。在较长的字符串上，生成器可能是更好的路线，但在较短的字符串上，不需要生成器的额外开销可能会使这成为更好的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T08:55:44.533

考虑到“两个问题”的谚语，我仍然会说这是正则表达式的工作。正则表达式编译为状态机，该状态机并行检查所有可能的变体，而不是一个一个地检查。

这是一个利用它的实现：

```
import re

def split_string(string, prefixes):
    regex = re.compile('|'.join(map(re.escape, prefixes))) # (1)
    while True:
        match = regex.match(string)
        if not match:
            break
        end = match.end()
        yield string[:end]
        string = string[end:]
    if string:
        yield string # (2)

prefixes = ['over','under','re','un','co']
assert (list(split_string('recouncoundo',prefixes))
        == ['re','co','un','co','un','do']) 
```

注意正则表达式在 (1) 中是如何构造的：

*   前缀使用转义，`re.escape`以便特殊字符不会干扰
*   `|`使用（或）正则表达式运算符连接转义的前缀
*   整个事情都被编译了。

第 (2) 行产生最后一个词，如果在拆分前缀后有剩余的话。`if string`如果您希望函数在前缀剥离后没有任何内容时返回空字符串，您可能需要删除检查。

另请注意，`re.match`（与 相反`re.search`）仅在输入字符串的开头查找模式，因此无需附加`^`到正则表达式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T09:50:41.627

如果您正在处理前缀，则不需要正则表达式，您只需要`startswith()`. 你当然可以使用正则表达式，但它更难阅读和维护，即使是这样一个简单的。`startswith()`在我看来，更简单。

对于这样一个简单的问题，其他答案似乎太复杂了。我建议使用这样的递归函数：

```
def split_prefixes (word, prefixes):
    split = [p for p in prefixes if word.startswith(p)]
    if split:
        return split + split_prefixes (word[len(split[0]):], prefixes)
    else:
        return [word] 
```

这是结果：

```
"overachieve" -> ['over', 'achieve']
"reundo" -> ['re', 'un', 'do']
"reuncoundo" -> ['re', 'un', 'co', 'un', 'do']
"empire" -> ['empire'] 
```

# android - android 4.2 上的接近警报

> ID：14558035
> 
> 赞同：1
> 
> 时间：2013-01-28T08:20:44.947
> 
> 标签：android, proximity

在我的项目中，我使用了接近警报，它在 android 4.1 版本（API 16）上运行良好，但在 android 4.2（API 17）上它不起作用。我需要添加一些额外的标志或其他东西吗？

```
loctionContex  = Context.LOCATION_SERVICE;
LocationManager locationManager = (LocationManager)getSystemService(loctionContex);

Intent intent1 = new Intent(PROXIMITY_ALERT);
PendingIntent proximityIntent = PendingIntent.getBroadcast(this, 0, intent1, 0);

locationManager.addProximityAlert(lat, lng, 4, -1, proximityIntent); 

IntentFilter filter = new IntentFilter(PROXIMITY_ALERT);

 registerReceiver(new ProximityIntentReceiver(), filter); 
```

显现：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

<application

    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.proximityalert.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

# php - 如何在 PHP 中实现 web2py 密码加密？

> ID：14558044
> 
> 赞同：1
> 
> 时间：2013-01-28T08:21:06.443
> 
> 标签：php, login, passwords, web2py, password-encryption

我有一个网站，我正在从 web2py 转换为 PHP，我正在使用网站数据库，所以在 PHP 网站中，我有一个正在使用的登录表单，在发布电子邮件和密码后，我检查了数据库，但我可以' t 获得与表 auth_user 中的数据库密码字段相同的加密？我怎样才能进行与 web2py 剂量相同的加密？

我的 PHP 代码是这样的，但我使用的是 MD5：

```
<?php
// IF The Login Form Was Filled and Submited
if(isset($_POST['email']) && isset($_POST['password'])){

// Fetch The Username And Password
$username = $_POST['email'];
$password = $_POST['password'];

// Use Md5 Hashed Password For Security  
$password_hash = md5($password);

// Check IF The Username and Password was Not Empty . 
if (!empty($username) && !empty($password)) {

  // Selecting The ID for the user with the Posted Credintials .
  $query = "SELECT id FROM auth_user WHERE email='$username' AND password='$password_hash' ";

  // Run The Query
  $query_run = mysql_query($query);

        // Check if the Query Works and return records . 
        if ($query_run){

          // Check if the Query Returns any rows
          $query_num_rows = mysql_num_rows($query_run);

          // If the query Dosent return any rows that means that the user credintials is wrong or the user is not registerd
          if ($query_num_rows == 0) {

            echo "<div class='alert alert-error' style='width:300px;margin:0 auto'><button type='button' class='close' data-dismiss='alert'>&times;</button><h4>Warning!</h4>Invalid username / password combination</div><br>";

          // If the Query Return a row that means that everyhting is right. 
          } else if ($query_num_rows == 1) {

            // Fetch the user id from the query
            $user_id = mysql_result($query_run, 0 ,'id');

            // Store the user id in the Session
            // Note : The Session is Started in the page Core.inc.php which is included to the index page and has session.start();
            $_SESSION['user_id'] = $user_id;

            // Redirect To index Page , we user here the http_referer 
            //which is coming from the core.inc.php that return the url of the page we came from
            header('Location: ' . '../index.php');

          } else {

            echo "Who The Hell Are you !!";
          }

        // If the Query Didnt Run Retrun mysql Error.
        } else{echo mysql_error();}

// IF The Login Form Was Not Filled . 
} else {

  echo "<div class='alert alert-error' style='width:300px;margin:0 auto'><button type='button' class='close' data-dismiss='alert'>&times;</button><h4>Warning!</h4>Sorry , You must Supply a username and  a password . </div><br>";

}

}

// Print Out Any Other Errors
if(mysql_error()){
echo "Database Error : " . Mysql_error();
}

?> 
```

# c# - 如何在 Windows 7 中以编程方式获取 INI 文件路径

> ID：14558052
> 
> 赞同：0
> 
> 时间：2013-01-28T08:21:34.163
> 
> 标签：c#, windows-7, ini

我们从我们的应用程序中写入和读取 ini 文件。在 win 7 ini 文件中总是在名为的文件夹中创建`"C:\Users\madhabi\AppData\Local\VirtualStore\Program Files\BBA-reman\BBA Business Assistant (New Part)"`

我知道如何使用类似的代码获取 VirtualStore 路径

```
 String appdata = System.Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData);
            String VirtualStoreRoot = appdata + "\\VirtualStore";
            MessageBox.Show(VirtualStoreRoot); 
```

所以现在我想以编程方式获取我的 ini 文件位置，而不需要任何硬编码。所以请指导我如何以编程方式从我的应用程序中获取我的 ini 文件路径，而无需任何硬编码。谢谢

# php - 电子邮件通知重力形式中的交易 ID

> ID：14558054
> 
> 赞同：1
> 
> 时间：2013-01-28T08:21:42.690
> 
> 标签：php, wordpress, gravity

我需要帮助在以重力形式发送给管理员的通知电子邮件中插入交易 ID，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-18T21:24:31.573

您需要将其添加到主题的 functions.php 文件中：

```
add_filter( 'gform_replace_merge_tags', 'replace_transaction_id', 10, 7 );
function replace_transaction_id( $text, $form, $entry, $url_encode, $esc_html, $nl2br, $format ) {
    $transaction_id = empty( $transaction_id ) ? rgar( $entry, 'transaction_id' ) : $transaction_id;
    $text = str_replace( '{transaction_id}', $transaction_id, $text );
    return $text;
} 
```

然后，您可以将以下合并标签添加到您的重力形式通知区域：

```
{transaction_id} 
```

希望这会有所帮助，尽管距离您的问题已经很长时间了，但我一直在谷歌上搜索这个答案并来到这个页面，然后最终找到了答案，所以我在这里分享它。

# php - 从 PHP 创建动态 PDF（带有表单域和交互式元素）

> ID：14558055
> 
> 赞同：3
> 
> 时间：2013-01-28T08:21:43.230
> 
> 标签：php, forms, validation, pdf, dynamic

首先让我说我在创建此请求之前搜索了一段时间。只是要确定 ：）。

我想通过 PHP 创建一个动态 PDF。有许多免费类（DomPDF、TCPDF、Zend_PDF 等）可以毫无问题地处理常规（静态）PDF 创建。

但是，我的需要是：

1.  一个后端，您可以在其中创建/读取/更新/删除一些数据集（这不是问题）。
2.  如果后端中的任何数据发生更改，则会写入 PDF。此 pdf 具有静态页眉和页脚。然而，在中间部分，有一个包含来自后端的所有数据字段的动态表单（因此，如果我创建一个名为“字段 1”的字段，则创建的 pdf 上也应该有一个文本字段）。
3.  字段的某些部分需要触发事件，即如果我将“选择框1”更改为“选项2”，它应该将标题更改为预定义的文本。
4.  表单字段需要验证，因此必须在打印 pdf 之前填写（参见 5.）
5.  应该有 2 个按钮，重置（将表单重置为默认值）和打印（应该以当前填写的状态打印 pdf）。

我知道这可以通过 Acrobat 直接完成，但由于我需要将其集成到基于 php 的应用程序中，因此我必须通过 php 创建此表单及其数据。

我在谷歌上搜索过这个，但没有找到任何证据证明这可以在任何流行的 PHP PDF 生成器中工作（我搜索了 Zend_PDF、DomPDF、TCPDF - 它至少支持表单但没有说明是否存在是验证和 XPDF 的任何可能性）。

如果可以的话，我也可以使用命令行界面（例如使用 JS 生成 HTML 页面以从我的 PHP 进行验证并通过 Tool x 将其呈现为 PDF）。

有没有人做过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:59:38.850

我还没有实现它，但是我遇到了一个非常相似的问题，试图增强正在运行的 webapp（php+smarty），以便让它输出 pdf（基于模板，我相信这会实现你的目标） ）。在尝试了一些工具之后，我们访问了 [http://code.google.com/p/wkhtmltopdf/wiki/IntegrationWithPhp](http://code.google.com/p/wkhtmltopdf/wiki/IntegrationWithPhp)

希望能帮助到你！

# android - 从 android 模拟器调试 https

> ID：14558056
> 
> 赞同：6
> 
> 时间：2013-01-28T08:21:51.810
> 
> 标签：android, https, fiddler, wireshark, man-in-the-middle

我有一个使用 https 与 web 服务对话的 android(4.2) 应用程序。我想调试/记录每一个出去的 https。我有 fiddler 和 wireshark 来调试它们，但一切看起来都是加密的。可以使用模拟器和 fiddler/wireshark 设置中间人攻击来解码和显示 http url 及其参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:32:45.230

您可以使用 MITM 代理，例如[Burp](http://www.portswigger.net/burp/)。在设备/模拟器上安装受信任的 CA 证书后，您将能够解密 SSL 流量。

此外，如果您有服务器私钥（即，它是您自己的服务器），如果确实需要低级信息，您可以解密使用 Wireshark 截获的流量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T07:07:57.710

我发现的最简单的选择是使用 mitmproxy。此处列出的简单步骤：

*   [http://mitmproxy.org/doc/certinstall/android.html](http://mitmproxy.org/doc/certinstall/android.html)
*   [http://danosipov.com/?p=557](http://danosipov.com/?p=557)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-29T04:44:06.937

是的，您可以使用 Fiddler 来执行此操作。您需要在`Tools -> Options`. Fiddler 为 SSL 通信提供 CA 证书。您所要做的就是在您的 Android 设备上安装相同的内容。您可以通过从浏览器转到以下 URL 来获取证书

[http://machinesIPAddress:8888/FiddlerRoot.cer](http://machinesIPAddress:8888/FiddlerRoot.cer)

其中machinesIPAddress 是运行fiddler 的机器的地址。安装后你可以在下面看到相同的

> 设置 -> 安全 -> 可信凭据 -> 用户选项卡

我已经用截图列出了整个过程。希望有帮助-

[使用 Fiddler Web 代理拦截 Android 网络调用](http://opensourceforgeeks.blogspot.in/2015/03/intercepting-android-network-calls.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:34:10.660

我曾经也有同样的需求。

可以在这里找到很好的解释：[https ://security.stackexchange.com/questions/8145/does-https-prevent-man-in-the-middle-attacks-by-proxy-server](https://security.stackexchange.com/questions/8145/does-https-prevent-man-in-the-middle-attacks-by-proxy-server)

事实证明，一些公司会这样做，尤其是在移动浏览器（Opera、Nokia）的情况下——为了节省带宽，他们通过自己的代理服务器传递所有流量并对其进行压缩。有趣的是，它们还可以与支持 HTTPS 的站点一起使用。他们将他们的（有点假的）证书安装在您本地的受信任存储中，并且代理返回使用该假证书签名的压缩响应，以便浏览器不会抱怨潜在的攻击。

我还没有找到任何可以帮助创建这样一个代理的工具，所以最后（因为我控制了 web 服务和它运行的服务器）我在开发过程中启用了纯 HTTP。这可能为我节省了几个小时的工作时间；）

# c# - 保护 MVC4 c# webapi，以便只有我的应用程序可以访问它

> ID：14558057
> 
> 赞同：6
> 
> 时间：2013-01-28T08:22:02.413
> 
> 标签：c#, security, asp.net-mvc-4, asp.net-web-api

我在这里阅读了一些帖子，但似乎找不到合适的答案，希望有人能提供帮助。

我看到你可以添加

> [认证]

mvc 控制器的属性。这在人们可以登录的网站情况下是合理的，但我有一个与 Web 服务通信的 iOS 应用程序。我想限制对我的应用程序的访问。

我认为需要的“步骤”是：

1.  为所有 webapi 操作添加某种“[authenticate]”属性（甚至在全局级别上更好）
2.  为 Web 服务创建某种 ssl 证书
3.  添加某种身份验证方法并将凭据硬编码到应用程序代码中

如何利用 mvc 框架来完成这个或类似的事情？

（PS：见过这样的帖子，[但是](https://stackoverflow.com/questions/761709/secure-iphone-to-server-communication-so-that-only-my-app-can-post-data)把这个逻辑加到每一个代码动作中是非常不切实际的，我会创造什么样的“挑战”？？）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T08:33:12.087

您可以通过一些简单的方法向您的 Web 服务验证自己，并且您不必使用任何花哨的东西，甚至不必遵循 OAuth 或 OpenID 之类的标准（并不是说这些不好，但听起来您想站稳脚跟在门口有一些简单的东西）。

您需要做的第一件事是学习如何从`AuthorizeAttribute`（**System.Web.Http 命名空间**中的那个，而不是 MVC 中的那个）派生。您覆盖该`OnAuthorization`函数并将您的身份验证逻辑放在那里。请参阅此获取帮助，[MVC Api Action & System.Web.Http.AuthorizeAttribute - 如何获取发布参数？](https://stackoverflow.com/questions/12216545/mvc-api-action-system-web-http-authorizeattribute-how-to-get-post-parameters)

接下来决定如何进行身份验证。在最基本的形式中，您可以执行一些操作，例如为每个名为`MyID: [SomeRandomString]`. 然后在您的`OnAuthorization`方法中检查请求的标头，如果它不是正确的字符串，则将响应状态代码设置为 401（未授权）。

如果您的服务是自托管的，那么您可以将证书绑定到它托管的端口并使用 https:// 前缀，您现在已经保护了传输层，因此人们无法看到您传递的 id/密码。如果您在 IIS 中托管，则可以通过它绑定证书。这很重要，因为通过普通 HTTP 传递密码之类的东西是不安全的。

* * *

**创建自定义 AuthorizeAttribute**

```
public class PasswordAuthorizeAttribute : System.Web.Http.AuthorizeAttribute
{
    public override void OnAuthorization(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        try
        {
            string password = actionContext.Request.Headers.GetValues("Password").First();

            // instead of hard coding the password you can store it in a config file, database, etc.
            if (password != "abc123")
            {
                // password is not correct, return 401 (Unauthorized)
                actionContext.Response = new HttpResponseMessage(HttpStatusCode.Unauthorized);
                return;
            }
        }
        catch (Exception e)
        {
            // if any errors occur, or the Password Header is not present we cannot trust the user
            // log the error and return 401 again
            actionContext.Response = new HttpResponseMessage(HttpStatusCode.Unauthorized);
            return;
        }
    }
}

[PasswordAuthorize]
public class YourController : ApiController
{
} 
```

* * *

**生成自签名证书**

生成自签名证书的最简单方法是打开 IIS，单击服务器证书，然后“生成自签名证书”，如下所示，[http://www.sslshopper.com/article-how-to-create-a-self -signed-certificate-in-iis-7.html](http://www.sslshopper.com/article-how-to-create-a-self-signed-certificate-in-iis-7.html)

* * *

**将证书绑定到端口**

[http://msdn.microsoft.com/en-us/library/ms733791.aspx](http://msdn.microsoft.com/en-us/library/ms733791.aspx)

```
netsh http add sslcert ipport=0.0.0.0:8000 certhash=0000000000003ed9cd0c315bbb6dc1c08da5e6 appid={00112233-4455-6677-8899-AABBCCDDEEFF} 
```

这是一个很棒的教程，关于如何通过 https 来自托管 web api 服务，http: [//pfelix.wordpress.com/2012/02/26/enabling-https-with-self-hosted-asp-net-web -api/](http://pfelix.wordpress.com/2012/02/26/enabling-https-with-self-hosted-asp-net-web-api/)

* * *

# javascript - Javascript 通过 Outlook Express 打开电子邮件

> ID：14558063
> 
> 赞同：0
> 
> 时间：2013-01-28T08:22:44.637
> 
> 标签：javascript, html, email, outlook

对于通过 Outlook 打开的邮件，我使用了：

```
function OpenNewMail(imgName) 
{
   var objO = new ActiveXObject('Outlook.Application');
   var objNS = objO.GetNameSpace('MAPI');
   var mItm = objO.CreateItem(0);
   mItm.Display();
   mItm.To = "";
   mItm.Subject = "My Subject";
   mItm.HTMLBody = "<html><body>MyHTML</body></html>"
   mItm.GetInspector.WindowState = 2;
} 
```

是否有这样的代码可以用**Outlook Express打开邮件** *（邮件正文必须是 HTML）*

**我的浏览器以强权限运行，所以我可以执行任何 shell 命令**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:26:30.413

您无法选择应该打开电子邮件链接的应用程序。这取决于浏览器来决定哪个是默认邮件阅读器。

```
<a href="mailto:foobar@example.com">click here to send email</a> 
```

如果 Outlook Express 是默认邮件客户端，则单击时它将打开。否则会打开另一个，但这就是你想要的。如果您的用户使用的是 firebird 而不是 Outlook，而您实际上可以强制浏览器打开 Outlook，目的是什么？

# c - C、杀死所有进程

> ID：14558068
> 
> 赞同：3
> 
> 时间：2013-01-28T08:23:09.233
> 
> 标签：c

我有一个学校项目，我需要一些帮助。我在 C 中工作，我有一个服务器和一个客户端。在服务器中，我使用 fork 为每个客户端创建一个新进程。我的问题是：如果我用 CTRL+C 关闭服务器，我如何杀死所有剩余的进程？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:28:12.947

您可以在创建它们后存储它们的 pid，然后在退出时`sigterm`向`sigkill`它们发出信号。

你可以通过 shell 来实现——`killall`这就是你在 linux 下搜索的东西。

您可以使用线程而不是进程（可以吗？项目详细信息怎么说？）并通过变量进行通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:26:29.553

这将在 shell 中为您完成：

```
killall -15 <process name> 
```

在 C 中，您可以尝试：

```
kill(0, SIGKILL) 
```

在`SIGINT`您的主服务器进程的信号处理程序中杀死其进程组中的所有进程，其中应包括其子进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:32:19.820

我建议这将是实现定义的。您需要保留分叉的 PID，挂钩CTRL+C 发送到您的服务器的信号（POSIX 中的 SIGINT）并使用您的操作系统推荐的任何方法（在 POSIX 环境中 kill）[杀死](http://pubs.opengroup.org/onlinepubs/009696899/functions/signal.html)它们[。](http://pubs.opengroup.org/onlinepubs/009604599/functions/kill.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:47:37.483

当您单独杀死一个进程时，它不会杀死子进程。

如果您希望给定组的所有进程都接收信号，则必须将信号发送到进程组：`kill -9 -parentpid`。否则，孤儿将链接到`init`,

# zend-framework2 - ZF2 相当于 Zend_Controller_Action_Helper_ContextSwitch？

> ID：14558075
> 
> 赞同：0
> 
> 时间：2013-01-28T08:23:39.713
> 
> 标签：zend-framework2, context-switch

我在 Zend Framework 2 中找不到类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T08:40:50.147

它`ViewStrategy`在 ZF2 中被调用。

默认情况下`JsonStrategy`实现，要创建自己的，`ViewStrategy`请参阅[本文](http://samsonasik.wordpress.com/2012/12/10/zend-framework-2-step-by-step-create-custom-view-strategy/)

# bash - 如何比较相对于空间倒置的两条线

> ID：14558076
> 
> 赞同：2
> 
> 时间：2013-01-28T08:23:42.140
> 
> 标签：bash, sed, awk

我有以下 VPN 隧道状态的输出：

```
[root@localhost:~]# setkey -D
82.113.11.226 10.18.1.201
        esp mode=tunnel spi=143937423(0x08944f8f) reqid=0(0x00000000)
        E: 3des-cbc  c114543c 3049e8b8 c033e4ea 07e0054e 3e8ac254 f0dbb7f5
        A: hmac-md5  8461e21b 2318bb9c 352bee1d e24a0a53
        seq=0x00000000 replay=4 flags=0x00000000 state=mature
        created: Jan 28 09:52:41 2013   current: Jan 28 09:56:58 2013
        diff: 257(s)    hard: 3600(s)   soft: 2880(s)
        last: Jan 28 09:52:49 2013      hard: 0(s)      soft: 0(s)
        current: 852(bytes)     hard: 0(bytes)  soft: 0(bytes)
        allocated: 11   hard: 0 soft: 0
        sadb_seq=1 pid=12264 refcnt=0
10.18.1.201 82.113.11.226
        esp mode=tunnel spi=3053715472(0xb6040010) reqid=0(0x00000000)
        E: 3des-cbc  28c87550 a6c9a17b 37ad0b02 03567617 79647aeb 644563d8
        A: hmac-md5  0ef83de9 1b279a16 658eb176 dad37d50
        seq=0x00000000 replay=4 flags=0x00000000 state=mature
        created: Jan 28 09:52:41 2013   current: Jan 28 09:56:58 2013
        diff: 257(s)    hard: 3600(s)   soft: 2880(s)
        last: Jan 28 09:52:41 2013      hard: 0(s)      soft: 0(s)
        current: 1524(bytes)    hard: 0(bytes)  soft: 0(bytes)
        allocated: 19   hard: 0 soft: 0
        sadb_seq=0 pid=12264 ref 
```

我想取只包含 ip 地址的行，并比较第一行的左边部分是否与第二行的右边部分相等，这是空格分隔的，反之亦然。第一步，我做了以下命令：

```
[root@localhost:~]# setkey -D | sed -n '/\([0-9]\{1,3\}\.\)\{3\}[0-9]\{1,3\}/p'
82.113.11.226 10.18.1.201
10.18.1.201 82.113.11.226 
```

线条对空间感兴趣。任何人都可以建议任何 awk 或 sed 表达式来做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:46:18.383

使用 比较字符串更容易`awk`。试试这个：

```
setkey -D | awk 'NR==1 { a=$1; b=$2; next } !/^ / { print ($1==b && $2==a ? "match" : "none") }' 
```

根据您的输入，我的结果是：

```
match 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:47:21.210

首先使用 将 ip 地址放到同一行`tr`，然后使用`egrep`with backreferences 检查它们是否相同：

```
$ cat file
10.18.1.201 82.113.11.226
82.113.11.226 10.18.1.201

$ tr '\n' ' ' < file | egrep "^(.*) (.*) \2 \1"
82.113.11.226 10.18.1.201 10.18.1.201 82.113.11.226 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:40:17.013

我认为最好的方法是简单地使用`read`数据并将数据读取到单独的变量中，如下所示：

```
read -r trash right
read -r left trash
# compare left and right 
```

# html - Outlook 2010 电子邮件模板中的表格问题

> ID：14558078
> 
> 赞同：0
> 
> 时间：2013-01-28T08:23:53.690
> 
> 标签：html, css, email, outlook, email-templates

我正在尝试将宽度固定为 <800px 宽，但是 Outlook 弄乱了模板并且表格宽度变为 > 1000px 并且列都是不均匀的宽度。

**重现步骤：**

1.  转到模板：[http ://skif.pk/email/sm1/](http://skif.pk/email/sm1/)
2.  按 CTRL+A 全选
3.  转到 Outlook 2010 撰写新电子邮件，或其他富文本电子邮件编辑器
4.  在富文本编辑器中按 CTRL+V

我只使用了内联样式并在所有内容上设置了宽度，所以我不确定问题出在哪里

![Outlook 2010 电子邮件视图](../Images/65337bb7b5379e786a8be4ee60c5ad91.png)

# 解决

**解决方案：**

```
<tr>
  <td colspan="1" width="120">&nbsp;</td>
  <td colspan="1" width="120">&nbsp;</td>
  <td colspan="1" width="120">&nbsp;</td>
  <td colspan="1" width="120">&nbsp;</td>
  <td colspan="1" width="120">&nbsp;</td>
  <td colspan="1" width="120">&nbsp;</td>
</tr> 
```

第一行没有先前定义的列宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:27:10.407

您设置的宽度错误。应该`<table width="780"`不是`<table width="780px"`

# grizzly - grizzly http 服务器应该继续运行

> ID：14558079
> 
> 赞同：14
> 
> 时间：2013-01-28T08:23:59.557
> 
> 标签：grizzly

下面是启动 Grizzly Http Server 的代码。如果我按任何键，服务器就会停止。有什么办法让它活着。

Jetty 有 join() 方法，不会退出主程序。灰熊中是否也有类似的东西。

```
public static void main(String args){

ResourceConfig rc = new PackagesResourceConfig("com.test.resources");

        HttpServer httpServer = GrizzlyServerFactory.createHttpServer(BASE_URI, rc);
        logger.info(String.format("Jersey app started with WADL available at "
                        + "%sapplication.wadl\nTry out %shelloworld\nHit enter to stop it...",
                        BASE_URI, BASE_URI));

        System.in.read();
        httpServer.stop();

        } 
```

根据上面的代码，如果您按下任何键，服务器就会停止。我想让它继续运行。当我真正想停止服务器时，我会终止该进程。main 方法不应终止。

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-13T16:31:35.077

我使用关机钩子。这是一个代码示例：

```
public class ExampleServer {
private static final Logger logger = LoggerFactory
        .getLogger(ExampleServer.class);

public static void main(String[] args) throws IOException {
    new Server().doMain(args);
}

public void doMain(String[] args) throws IOException {
    logger.info("Initiliazing Grizzly server..");
    // set REST services packages
    ResourceConfig resourceConfig = new PackagesResourceConfig(
            "pt.lighthouselabs.services");

    // instantiate server
    final HttpServer server = GrizzlyServerFactory.createHttpServer(
            "http://localhost:8080", resourceConfig);

    // register shutdown hook
    Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {
        @Override
        public void run() {
            logger.info("Stopping server..");
            server.stop();
        }
    }, "shutdownHook"));

    // run
    try {
        server.start();
        logger.info("Press CTRL^C to exit..");
        Thread.currentThread().join();
    } catch (Exception e) {
        logger.error(
                "There was an error while starting Grizzly HTTP server.", e);
    }
}

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:10:18.473

尝试类似：

```
 try {
        server.start();
        Thread.currentThread().join();
    } catch (Exception ioe) {
        System.err.println(ioe);
    } finally {
        try {
            server.stop();
        } catch (IOException ioe) {
            System.err.println(ioe);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T14:28:51.017

服务器停止，因为您`httpServer.stop()`在输入流之后调用该方法。当执行到达时，`System.in.read();`它会挂起，直到您输入一个字母，然后移动到服务器停止。

您可以只发表评论`httpServer.stop()`，因为该代码示例正是在按下键时挂断服务器。

但是如果你想创建一个 Webserver 实例，我建议你在 main() 中运行一个 Thread 来启动 Grizzly Webserver 的一个实例。

# python - 龙卷风在 Django 中“写”的替代解决方案是什么？

> ID：14558081
> 
> 赞同：0
> 
> 时间：2013-01-28T08:24:08.453
> 
> 标签：python, django, web, tornado

我正在使用 django 1.4。我正在将代码从龙卷风移动到 django。`self.write()`结尾有`class`. HttpResponse的替代解决方案是`self.write()`什么？只有一个模板页面，所以我需要回复其他页面吗？我可以直接调用response吗？或者render_to_response再次到模板页面来包装数据到页面？和`write()`一样`HttpResponse()`吗？大家好。有许多 ”？” 以上，但我只有一个问题。龙卷风在 django 中的“write()”的替代解决方案。谢谢你的时间。

龙卷风中的代码如下所示：

```
class DataHandler(tornado.web.RequestHandler):
    ...
    val = ...
    self.write(val) 
```

也许在 django 中？

```
def DataHandler(request):
    ...
    val = ...
    return HttpResponse(val) 
```

我的问题清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:56:37.073

`HttpResponse`如果您希望返回非模板响应，通常使用。

要呈现模板，请使用`render`from `django.shortcuts`，例如：

```
from django.shortcuts import render

def some_handler(request):
    context_for_template = {}
    return render(request, 'template_name.html', context_for_template) 
```

从 Tornado 的文档来看，[`write`](http://www.tornadoweb.org/documentation/web.html#tornado.web.RequestHandler.write)似乎能够自动将字典转换为 JSON。HttpResponse 默认情况下不这样做，如果它是您用例的一部分，您应该查看[使用 Django 和 Python 创建 JSON 响应。](https://stackoverflow.com/questions/2428092/creating-a-json-response-using-django-and-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T23:03:39.267

[HttpResponse](https://docs.djangoproject.com/en/dev/topics/http/views/#a-simple-view)模块_

```
from django.http import HttpResponse

def current_datetime(request):
    now = datetime.datetime.now()
    html = "<html><body>It is now %s.</body></html>" % now
    return HttpResponse(html) 
```

# html - 数据列表行为怪异

> ID：14558083
> 
> 赞同：0
> 
> 时间：2013-01-28T08:24:12.260
> 
> 标签：html, cross-browser, html-datalist

我正在使用数据列表来填充实时搜索框。该框从数据库中搜索城市，并且数据列表应填充最多 10 条建议，这些建议在用户键入时会发生变化。

但是，显示的建议与数据列表中的选项不完全对应，我只能看到其中的几个。例如，假设我会搜索纽约市。第一个建议在我完成输入“New”之前不会出现，我看到的城市是“New Glasgow”和“New Westminster”，在查看源代码时，我可以看到数据列表确实填充了 10 个开始的城市与“新”。

```
<input type="text" list="searchResults">
<datalist id="searchResults">
  <option value="New Glasgow"></option>
  <option value="New Westminster"></option>
  <option value="New Milton"></option>
  <option value="New Malden"></option>
  <option value="New Amsterdam"></option>
  <option value="New Delhi"></option>
  <option value="New Kingston"></option>
  <option value="New Yekepa"></option>
  <option value="New Plymouth"></option>
  <option value="New Corella"></option>
</datalist> 
```

“New Y”给了我“New Yekepa”，而数据列表中填充了“New Yekepa”、“West New York”、“East New York”和“New York City”。“New Yo”一直到“New York”只给了我“New York City”，但源代码中当然还有东西方。

这是在 Chrome 中。当我在 Firefox 中尝试它时，它的效果稍微好一些，显示了更多的结果——有时是全部 10 个，但更常见的是我可以看到数据列表中出现的 10 个中的 7-8 个。

# javascript - 赫罗库！找不到资源

> ID：14558086
> 
> 赞同：0
> 
> 时间：2013-01-28T08:24:22.043
> 
> 标签：javascript, node.js, heroku, foreman

我正在尝试访问/重新部署在雪松堆栈上运行的非常简单的 node.js heroku 应用程序。我已经在我的硬盘上移动了目录，除此之外，自上次成功执行此操作以来没有任何变化。

本地/使用工头的应用程序工作正常，但无论我做什么，除了登录，远程失败，并出现有点描述性的“！找不到资源”错误消息。

-- 登录 - 确定

09:13 ~/web/2012/heroku [master]$ heroku auth:login 输入您的 Heroku 凭据。邮箱：me@me.com
密码（隐藏输入）：认证成功。

工头——好的

09:14 ~/web/2012/heroku [master]$ foreman start 09:14:31 web.1 | 从 pid 1695 09:14:31 web.1 | 开始 收听 5000 ^CSIGINT 收到 09:14:33 系统 | 将 SIGTERM 发送到 SIGTERM 收到的所有进程 09:14:33 web.1 | 以代码 1 退出

其他的 - 不好

09:14 ~/web/2012/heroku [master]$ heroku ps ！找不到资源

## 09:14 ~/web/2012/heroku [master]$

任何帮助表示赞赏！

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:01:53.837

您通常会看到，如果您无权访问您尝试在 Heroku 上询问的应用程序，或者该应用程序不在您登录的帐户中。

查看输出`git remote -v`并确保`heroku`端点指向您期望的应用程序的 git 存储库。

# ios - 使用 NavigationControllers 切换到 TabBarController 时共享日期

> ID：14558089
> 
> 赞同：0
> 
> 时间：2013-01-28T08:24:34.023
> 
> 标签：ios, singleton, segue, tabbar

在我的故事板中，App 工作流程设计是这样的

```
-> NavigationController -> ViewControllerX -> TabBarController -> NavigationController -> ViewControllerA
                                                               -> NavigationController -> ViewControllerB
                                                               -> NavigationController -> ViewControllerC 
```

关于封装设计模式，我想知道以下哪种方法最适合共享从 segueing`ViewControllerX`到`TabBarController`包含的数据`ViewControllerA/B/C`：

1.  使用自定义属性对 TabBarController 进行子类化。然后在 segueing 时将数据传递给 TabBarController。每个`ViewControllerA/B/C`“拉”数据`viewDidLoad`与`CustomVar *myCustomVariable = self.tabBarController.myCustomVariable`.

2.  创建一个单例。

我更喜欢方法 1，因为项目中有更多 ViewController，并且共享仅在`ViewControllerX`和之间`ViewControllerA/B/C`。这有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:34:15.637

我根本看不到任何问题。每次遇到类似情况时，我都会这样做。对于像这样的“简单”情况，无需寻找比这更复杂的东西。

除了我自己的经验，我真的没有任何东西可以支持我的回答。我认为方法 1 没有什么不好的。

关于解决方案 2，当我在整个应用程序中需要数据时，我通常将 AppDelegate 用作“单例”。我听说过这方面的好与坏，但我从未遇到过任何不好的事情，而且我一直在使用它。但是考虑到您的情况，我宁愿选择解决方案 1。我会说解决方案 2 用于整个应用程序工作流程中使用的数据。

编辑 ：

以下是如何将[AppDelegate 用作单例](http://iphonedevsdk.com/forum/iphone-sdk-development/66286-use-your-app-delegate-to-share-info-between-objects.html)。

# css - 相对于页面在 div 中居中 div

> ID：14558092
> 
> 赞同：0
> 
> 时间：2013-01-28T08:24:49.607
> 
> 标签：css, html, styles, center

我知道如何将 div 层相对于它的包装器或父容器居中，但是当我在页面主体内的 div 内有一个 div 时呢？如何将最小的 div 相对于身体居中？

```
<div id="1" style="width: 100%">
<div id="2" style="width: 22.5%; height: 1000000000px; margin-left: 12%;">
<div id="3" style="position: absolute;">
</div>
</div>
</div> 
```

在上面的示例中，如何将 id="3" 的 div 相对于 id="1" 的 div 居中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:27:42.060

设置`marging:0 auto`为 div id=3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:00:40.323

`#1`必须是`position: absolute`，`#3`设置`left: 50%`和向左偏移一半宽度

```
#d1 {
    position: absolute;
}

#d3 {
    position: absolute;
    left: 50%;
    width: 100px;
    margin-left: -50px;
} 
```

[JSFiddle](http://jsfiddle.net/x2cUK/3/)用于播放。

我已将内联样式移至 CSS 面板，并将`id`s 分别更改为`d1`,`d2`和`d3`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T08:31:17.680

```
div#2 {
  position: relative;
}
div#3{
    position: absolute;
    margin: auto;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
} 
```

`div#3`如果您要这样做，这不仅会使水平居中而且垂直居中于 div#2。请记住，您不能有数字作为 id。

如果你想居中`div#3`到`div#1`...你只需将`position:relative`样式从移动`div#2`到`div#1`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T08:35:54.063

如果您希望它准确定位在屏幕的中心，您需要将 ID#3 包含在 2 个 div 中，一个负责垂直对齐，另一个负责水平对齐：

```
<div id="vertical">
    <div id="horizontal">
        <div id="3" style="position: absolute;">
    </div>
</div> 
```

更多细节在这里：[死点](http://www.wpdfd.com/editorial/thebox/deadcentre4.html)

# python - 将 QmouseEvent 转换为 QGraphicsSceneMouseEvent 以进行拖动移动

> ID：14558105
> 
> 赞同：1
> 
> 时间：2013-01-28T08:25:33.000
> 
> 标签：python, qt, pyqt, pyside

我想移动 QGraphicsScene 而不是移动我的整个小部件（由于小部件移动越界而导致一些图形故障）。

这就是我试图做的：

```
def mousePressEvent(self, event):
    #super(SvgView, self).mousePressEvent(event)

    self.svgItem.mousePressEvent(event)

    self.x += event.pos().x()
    self.y += event.pos().y()
    event.accept() 
```

（请注意，我没有以正确的方式更新我的 self.x 和 self.y，因为这是一个“拖动”运动，我应该改为放置“delta”，但我不知道如何获得它）

这不起作用，因为 svgItem 需要一个`QGraphicsSceneMouseEvent`.

我尝试在场景中执行此 mouseEvent 而不是在 QGraphicsView 上执行此操作，但它不会使项目拖动。

无论如何都可以在不进行此转换的情况下执行此操作，如果有必要，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:13:57.937

对我来说 SVG + Javascript 是非常容易理解的，有了它我可以做任何我想做的事情。但我正在为桌面应用程序的 PyQt 苦苦挣扎。Avaris 帮助我了解 Qt 中的事件传播。我写了几行进行实验，但也许它可以帮助你。不是最好的，而是“eppur si muove”：

```
from PySide import QtGui, QtCore

class View(QtGui.QGraphicsView): # as separate class
    def BlahBlah():
        print dir()

class Scene_w_ellipse(QtGui.QGraphicsScene):
    def __init__(self):
        super(Scene_w_ellipse, self).__init__()
        self.setSceneRect(0,0,300,200)
        self.C = QtGui.QGraphicsEllipseItem(-4,-20,80,40)
        self.C.setPos(100,70)
        self.C.setFlags(QtGui.QGraphicsItem.ItemIsMovable)
        #self.C.mousePressEvent(QtGui.QGraphicsSceneMouseEvent)
        self.addItem(self.C)

    def mousePressEvent(self, event):
        print dir()

    def mouseMoveEvent(self, event):
        self.C.mouseMoveEvent(event)

    def mouseReleaseEvent(self, event):
        self.C.mouseReleaseEvent(event) 
```

对于您的背景，不要子类化，将其构建为单独的类。

# c# - AsQueryable() 不使用 Lightswitch 在自定义 LINQ 查询中返回所需的类型

> ID：14558107
> 
> 赞同：1
> 
> 时间：2013-01-28T08:25:40.853
> 
> 标签：c#, linq, visual-studio-lightswitch

我正在使用 Lightswitch 构建我的应用程序，但遇到以下问题。

在我的数据库中，我有三个表：

*   文章
*   提供者
*   文章提供者

Article 和 Provider 是多对多的关系，因此需要连接表 ArticleProvider。

现在，我希望我的应用程序中有一个屏幕，用户可以在其中选择提供者并查看与该提供者相关的所有文章。

使用 SQL，我会这样（123 是我要选择的 Provider_Id）。

```
SELECT * 
FROM Article a 
WHERE a.Id IN 
    (SELECT ap.Article_Id FROM ArticleProvider ap WHERE ap.Provider_Id=123) 
```

在我的 Lightswitch 应用程序中，我通过单击数据源中的“文章”表并选择“添加查询”来创建一个查询。我添加了一个参数`ProviderId`并切换到源代码编辑器来创建我的自定义查询：

```
partial void ArticleByProvider_PreprocessQuery(int? ProviderId, 
                                               ref IQueryable<Article> query)
{ 
    ...
} 
```

接下来我开始创建我的 Linq 查询。我想我需要一个`IQueryable<ArticleProvider>`查询来过滤它们，所以我尝试了：

```
(from art in query select art.ProviderQuery).AsQueryable<ArticleProvider>() 
```

但是，在尝试这个时，我得到一个编译时错误，说这种类型不能被转换。所以我尝试了这个，它编译得很好：

```
(from art in query select art.ProviderQuery)
    .AsQueryable<IDataServiceQueryable<ArticleProvider>>() 
```

但是，`IQueryable apList`在我的下一个查询中使用返回时：

```
from ap in apList where ap.Provider.Id == 123 select ap.Article.Id 
```

似乎该字段`Provider`并`Article`找不到。此外，Visual Studio 的代码完成并没有建议这些字段，只有很多不在我的数据库中的方法和字段。

我怎么解决这个问题？

我玩过强制转换和其他方法调用，例如`ToList()`，但我总是卡在这一点上。我是 Linq 和 C# 的新手。预先感谢您的任何帮助。

* * *

**编辑：** 我使用以下方法检查了第一个查询的返回类型： `var temp = (from art in query select art.ProviderQuery).AsQueryable()`

返回的类型是`System.Linq.IQueryable<Microsoft.LightSwitch.IDataServiceQueryable<LightSwitchApplication.ArticleProvider>>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:34:45.350

你的问题是你在 PreprocessQuery 这是为了进一步过滤数据，而不是添加额外的。

如果你环顾四周，这会被提到很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:06:17.807

试试这个查询，看看它是否有效：

```
partial void ArticleByProvider_PreprocessQuery(int? ProviderId, 
                                               ref IQueryable<Article> query)
{
     query.Where(art => art.ArticleProviders
                              .Any(artProv => artProv.Provider.Id == ProviderId));
} 
```

这个想法是获取至少与提供者 ID 匹配的所有文章。

注意：我自己没有测试过这段代码。但这个想法应该存在。

# internet-explorer - 如何找到 GXT Grid 滚动响应时间

> ID：14558108
> 
> 赞同：0
> 
> 时间：2013-01-28T08:25:47.997
> 
> 标签：internet-explorer, gwt, gxt

我有一个包含 1000 条记录的 GXT 网格，而在加载数据后滚动网格时，每次滚动都会花费太多时间。当我单击向上/向下滚动以加载下一条记录时，它会撞击一段时间并在 IE 中加载记录，但 FF 不存在同样的问题。是否有任何 IE 插件或附加组件可以帮助测量每次点击 IE 的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:38:24.993

您一次加载 1000 个。因此创建 DOM 需要花费很多时间。如果您在创建 DOM 时滚动，则会形成磨损行为并且浏览器进入无响应模式..

因此，使用`AJAX`并减少 DOM 的痛苦。在第一次拍摄时加载少量记录并放置更多按钮。干杯 :)

# mysql - 如何在 iReport 中获取存储过程的结果？

> ID：14558109
> 
> 赞同：0
> 
> 时间：2013-01-28T08:25:54.093
> 
> 标签：mysql, stored-procedures, ireport

我正在使用 Ubuntu 12.04、iReport-4.7、MySQL、mysql-jdbc 驱动程序

我在 MySQL 中编写存储过程

```
DELIMITER //
CREATE PROCEDURE first()
BEGIN
select * from person where id in (11,22,33);
END //
DELIMITER; 
```

它返回`id`&`name`作为字段 & 从 iReport 调用它

```
select id+1,name from (call first) 
```

给我语法错误，

```
Caused by: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'call first)' at line 1 
```

但是当我`call first`在查询执行器中运行时，没有错误

我应该如何获得进一步计算的必填字段？这在 MS-SQL 中可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:25:12.587

这不可能。

您可以考虑使用临时表。

请查看此 SO 帖子：[MySql：存储过程/函数可以返回表吗？](https://stackoverflow.com/questions/1637288/mysql-can-a-stored-procedure-function-return-a-table)

问候

# c# - 我在哪里可以找到已部署的 SSIS 包？

> ID：14558110
> 
> 赞同：0
> 
> 时间：2013-01-28T08:26:03.423
> 
> 标签：c#, sql, sql-server, ssis

在我部署一个 .dtsx SSIS 包之后，我可以运行任何查询或 C# 代码来让它在驱动器上洗澡，或者我可以检索部署的 .dtsx 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:23:47.300

由于包存储在SSIS包中，`MSDB`所以`Right Click`放在SQL Server中然后单击`Run Package`。你会得到一个对话框

![在此处输入图像描述](../Images/be7d2f8d6556ae604d68030b425c1a4c.png)

单击`Connection Managers`选项卡，然后更改单个连接的连接字符串。

别的

如果 SSIS 包是使用创建的，`xml config file`则单击`configuration tab`并打开配置文件以了解包的详细信息

更新1：-

1.  为 SSIS 包变量赋值

添加此命名空间 `Microsoft.SqlServer.Dts.Runtime;`

```
Application app = new Application();
Package package = null;
package = app.LoadPackage(deployed ssis package path,null) //Load DTSX path
//Access the SSIS variables
pkg.Connections["sConn"].ConnectionString = strSourceConn;
pkg.Connection["dConn"].ConnectionString = strDestConn; 
```

2.阅读XML

每个 dtsx 包的底层代码都是`xml`.因此您可以使用 C# 加载 XML，然后遍历每个节点并查找信息。

3.从dtsx.config文件中获取信息。

正如我上面所说的，ssis 包可能有一个 xml 配置文件，它存储所有信息。这个 xml 文件在 C# 中更容易阅读，然后阅读中提到的整个 DTSX 包`point 2`

4.如果包配置存储在sql server中，则使用以下代码。代码取自[收集SSIS包信息](http://sqlblog.com/blogs/jamie_thomson/archive/2009/10/18/collecting-information-about-your-ssis-packages-ssis-nugget.aspx)

```
 SELECT    Props.Prop.query('.') as PropXml,
    Props.Prop.value('declare namespace p1="www.microsoft.com/SqlServer/Dts";
    string(./@p1:Name)','nvarchar(max)')  as PropName,
    Props.Prop.value('.', 'nvarchar(max)') as PropValue
    FROM    (
    SELECT    CAST(pkgblob.BulkColumn AS XML) pkgXML
    FROM    OPENROWSET(bulk 'C:\tmp\MyPkg.dtsx',single_blob) AS pkgblob
    ) t
    CROSS    APPLY pkgXML.nodes('declare namespace DTS="www.microsoft.com/SqlServer/Dts";
                    /DTS:Executable/DTS:Property') Props(Prop) 
```

结论 ：-

如果 SSIS 包是使用配置文件创建的。找到它的存储位置。如果它存储在`XML configuration type`C# 中，则加载该 XML 文件并搜索节点。如果存储了 ssis 数据，`sql server`则运行上面的 sql 并获取所有信息。sql 查询以 xml 类型返回包详细信息，您可以在 C# 中读取这些详细信息并获取所需信息

更新 2：-

如果 SSIS 包部署在 sql server 中，那么下面的代码将帮助您使用 C# 检索包详细信息

```
public class SSISDetails
{
    public string PackageData { get; set; }
    public string PackageName { get; set; }
}

  string storedProc = string.Empty;
        List<SSISDetails> _pkgcol = new List<SSISDetails>();
        string connectionString = "server=localhost;Integrated Security=SSPI";
        using (var conn = new SqlConnection(connectionString))
        using (var command = new SqlCommand("SSISDetails", conn)
        {
            CommandType = CommandType.StoredProcedure
        })
        {

            conn.Open();
            SqlDataReader reader = command.ExecuteReader();

                while (reader.Read ())
                {
                    _pkgcol.Add(new SSISDetails() 
                    {
                       //Please don't write the code like the one below accessing 
                       //columns  using index .
                        PackageName =reader[2].ToString (),
                        PackageData =reader[10].ToString ()
                    });

                }

            conn.Close();
        }

        foreach (var item in _pkgcol.Where (a=>a.PackageName =="YourPackageName") )
        {
            //read the item.PackageData and using Linq to xml retrieve the nodes which
            //you want
        } 
```

检索信息的存储过程是：- 下面的 sql 代码给出了`package name`、`path`和格式`description``package data``xml`

```
 Create Procedure SSISDetails
 as 
 begin
 with ChildFolders
 as
 (
   select PARENT.parentfolderid, PARENT.folderid, PARENT.foldername,
    cast('' as sysname) as RootFolder,
    cast(PARENT.foldername as varchar(max)) as FullPath,
    0 as Lvl
   from msdb.dbo.sysssispackagefolders PARENT
   where PARENT.parentfolderid is null
   UNION ALL
   select CHILD.parentfolderid, CHILD.folderid, CHILD.foldername,
   case ChildFolders.Lvl
        when 0 then CHILD.foldername
        else ChildFolders.RootFolder
    end as RootFolder,
    cast(ChildFolders.FullPath + '/' + CHILD.foldername as varchar(max))
        as FullPath,
    ChildFolders.Lvl + 1 as Lvl
   from msdb.dbo.sysssispackagefolders CHILD
   inner join ChildFolders on ChildFolders.folderid = CHILD.parentfolderid
   )
   select F.RootFolder, F.FullPath, P.name as PackageName,
   P.description as PackageDescription, P.packageformat, P.packagetype,
   P.vermajor, P.verminor, P.verbuild, P.vercomments,
   cast(cast(P.packagedata as varbinary(max)) as xml) as PackageData
   from ChildFolders F
   inner join msdb.dbo.sysssispackages P on P.folderid = F.folderid
   order by F.FullPath asc, P.name asc;

end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T08:32:14.220

如果部署到文件系统，默认包位置是：C:\Program Files\Microsoft SQL Server\100\DTS\Packages (SQL 2008) 或 C:\Program Files\Microsoft SQL Server\90\DTS\Packages (SQL 2005 ）。

如果部署到 sql server，它存储在 msdb 数据库中，因此您可以从 SQL Server Management Studio 访问它。

1.  在连接选项中选择“集成服务”而不是“数据库引擎”。
2.  Expand Stored Packages - 展开 MSDB 并搜索您的包（与您在保存包时使用的名称相同。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T08:49:48.580

您可以通过 Visual Studio（或 Business Intelligence Development Studio）导入它。创建一个新的 SSIS 项目，右键单击包，选择导入并连接到存储包的 SQL Server。

# android - 签名验证，Android 应用计费在之前工作后失败

> ID：14558116
> 
> 赞同：3
> 
> 时间：2013-01-28T08:26:28.857
> 
> 标签：android, in-app-billing

*背景：*

我们有一个 Android 应用程序，目前正在通过 Google Play 销售。要使应用程序正常运行，用户必须通过应用程序内结算购买“令牌”。“令牌”是消耗品，例如使用一次并用完。为了验证令牌，我们将购买数据发送到使用标准 Java RSA 安全代码的服务器，以验证从 Play 商店返回的信息是否有效。（下面的代码）。在发布应用程序之前，我们进行了广泛的测试，甚至在应用程序上架后，我们也进行了更多测试。谷歌返回的数据每次都通过验证。然后大约在 12 月初，签名验证开始失败。我们没有更改代码或商店中的应用程序，服务器上的验证码保持不变。

我已经调试了代码，并运行了从 Play 商店返回的收据数据和签名数据，现在确实验证失败了。当它工作正常时，我无法解释发生了什么变化，或者为什么验证开始失败。

*问题：*

有没有人遇到过这种情况，在未更改的应用程序中签名验证失败？关于从哪里开始尝试并找出问题可能来自哪里的任何提示？

*更多的信息*

我能想到的唯一改变是谷歌发布了应用内计费 API v3，但这不应该影响我们使用的 V2。

为了帮助开发，我们使用 net.robotmedia.billing 库来处理 IAB。

下面是从 Play 商店返回的数据的服务器验证码

其中 encodePublicKey => 我们来自 Play 商店的公钥

signedData => base64 编码的receiptData 作为 Play 商店购买的返回

签名 => 从 Play 商店返回的签名

```
public class Security {

    public final static Logger logger = Logger.getLogger(Security.class.getName());

    private static final String KEY_FACTORY_ALGORITHM = "RSA";
    private static final String SIGNATURE_ALGORITHM = "SHA1withRSA";

    /**
     * Generates a PublicKey instance from a string containing the
     * Base64-encoded public key.
     * 
     * @param encodedPublicKey
     *            Base64-encoded public key
     * @throws IllegalArgumentException
     *             if encodedPublicKey is invalid
     */
    public static PublicKey generatePublicKey(String encodedPublicKey) {
        try {
            byte[] decodedKey = Base64.decode(encodedPublicKey);
            KeyFactory keyFactory = KeyFactory.getInstance(KEY_FACTORY_ALGORITHM);
            return keyFactory.generatePublic(new X509EncodedKeySpec(decodedKey));
        }
        catch (NoSuchAlgorithmException e) {
            throw new RuntimeException(e);
        }
        catch (InvalidKeySpecException e) {
            logger.error("Invalid key specification.", e);
            throw new IllegalArgumentException(e);
        }
        catch (Base64DecoderException e) {
            logger.error("Base64 decoding failed.", e);
            throw new IllegalArgumentException(e);
        }
    }

    /**
     * Verifies that the signature from the server matches the computed
     * signature on the data. Returns true if the data is correctly signed.
     * 
     * @param publicKey
     *            public key associated with the developer account
     * @param signedData
     *            signed data from server
     * @param signature
     *            server signature
     * @return true if the data and signature match
     */
    public static boolean verify(PublicKey publicKey, String signedData, String signature) {
        Signature sig;
        try {
            sig = Signature.getInstance(SIGNATURE_ALGORITHM);
            sig.initVerify(publicKey);
            sig.update(signedData.getBytes());
            byte[] decodedSig = Base64.decode(signature);
            if (!sig.verify(decodedSig)) {
                logger.error("Signature verification failed.");
                return false;
            }
            return true;
        }
        catch (NoSuchAlgorithmException e) {
            logger.error("NoSuchAlgorithmException.");
        }
        catch (InvalidKeyException e) {
            logger.error("Invalid key specification.");
        }
        catch (SignatureException e) {
            logger.error("Signature exception.");
        }
        catch (Base64DecoderException e) {
            logger.error("Base64 decoding failed.");
        }
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-21T20:44:13.220

对我来说，文件编码可能是问题所在，在更改 eclipse 工作区后，它再次使用 mac 文件格式。

将其更改为***UTF-8*并将密钥再次*复制并粘贴***到项目中，

现在一切正常：/浪费时间：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:29:58.463

只是一个更新。我从来没有深入了解为什么它停止验证失败。我们认为这可能是 Google Play 服务器和我们的公钥的问题。

无论如何，就目前而言，解决方案是实施 In-App Billing v3 Api（它比旧版本的 BTW 更好），然后它又开始工作了。

因此，这并不是一个确定的答案，而是一个修复。

# html - CSS 表格 100% 宽度，td 宽度

> ID：14558121
> 
> 赞同：3
> 
> 时间：2013-01-28T08:26:39.093
> 
> 标签：html, css

编辑2：

问题似乎出在“bigTable”元素的规则上。显然，在布局模板上使用时继承了错误的最小宽度。我还在调查这个。

不过，我将再试一次 div。一个大问题是使用固定导航和动态内容，但我已经找到了解决方案（[http://alistapart.com/article/holygrail](http://alistapart.com/article/holygrail)）。

感谢您的建议和所有可爱的 trolololo。

* * *

编辑：

我将此问题复制到[http://jsbin.com/eyitij/4/edit](http://jsbin.com/eyitij/4/edit)

* * *

我对 table + td 宽度有一个奇怪的问题。我有类似这样的代码：

```
<table class="mainLayout" style="width: 100%;">
    <tr>
        <td style="width: 250px;">
            <div id="leftNavigationPanel"> * content * </div>
        </td>
        <td id="panelCell">
            <div class="panel">
                 <table id="bigTable" width="100%"> * LOTS OF CONTENT, includes big table * </table>
            </div>
        </td>
    <tr>
</table> 
```

当我在浏览器上运行这段代码时，mainLayout 被溢出，所以它变成了 3600px，这是因为 Panel 里面的大表。

我指的大表可以包含在屏幕中。完成后，它会获得水平滚动条（这是我想要的）。如果使用规则“宽度：100%”将大表加载到单独的 html 文件中，则此方法有效。

添加 mainLayout 规则“display: block;”后，mainLayout 表呈现 ~1800px 并包含在屏幕内，但问题是“panelCell”-TD 仍然是 ~3400px 宽，所以我仍然有整个页面滚动.. . TD 不包含在表格中，但总是扩展为 250px + bigTable.width() ！？

基本上浏览器不知道如何计算“panelCell”来填充：window.width - leftNavigationPanel。

任何想法如何在不使用“panelCell”的javascript +预先计算的最大宽度规则的情况下制定正确的规则？

*   panelCell 必须包含在窗口中

*   bigTable 必须包含在 panelCell 中，带有滚动条

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T09:42:32.330

设置 table-layout:fixed 修复了很多关于表格的奇怪问题：

```
<table style="table-layout:fixed;">
<col style="width:250px"/>
<col/>
<tr>
... 
```

# n2cms - 在 N2CMS 中，您可以禁用“更新链接到”您刚刚编辑的项目的提示吗？

> ID：14558122
> 
> 赞同：1
> 
> 时间：2013-01-28T08:26:43.093
> 
> 标签：n2cms, n2

我正在使用 N2CMS 来管理我的网站内容，而不使用 N2 的页面路由。因此，当我编辑一段内容时，当 N2 询问我：“更新指向...的链接”“在以前的 URL 上添加永久重定向？”时，它是毫无用处的。我可以禁用此行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:11:39.683

将页面转换为部分本质上是个坏主意。它可能会暂时解决您遇到的问题，但它会以不好的方式反弹给您。

相反，您可以这样做

*   在 web.config 中关闭 LinkTracker

    ```
    linkTracker enabled="false" permanentRedirectEnabled="false" 
    ```

*   将 CommandFactory.cs 从 N2 Source 复制到您的解决方案中，并将其重命名为 MyCommandFactory.cs。添加服务替换属性

    ```
    [Service(typeof(ICommandFactory), Replaces = typeof(CommandFactory))] 
    ```

在构造函数中，更改此行

```
updateReferences = new MyUpdateReferencesCommand(); 
```

*   编写自己的空更新引用命令类

    ```
    public class MyUpdateReferencesCommand : UpdateReferencesCommand
    {
        public override void Process(CommandContext state)
        {
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:57:20.737

据我从源代码中可以看出，如果 ContentItem 是 Page（即 [PageDefinition] 属性或 .IsPage = true）并且地址具有已更新。在我们的案例中，解决方案是使用 [PartDefinition] 将有问题的“页面”变成“部分”。

# linux - Linux：在接口上环回传入的数据包

> ID：14558125
> 
> 赞同：-1
> 
> 时间：2013-01-28T08:27:06.827
> 
> 标签：linux, networking, routing, ip, iptables

将来自接口的数据包发送回同一接口而不更改数据包中的任何内容的最佳方法是什么？我想对来自我的一个接口的实际流量产生环回效果，例如`eth0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:25:02.880

我认为您不能使用物理接口轻松做到这一点。不过，我为此使用了 tap 模块。这很简单：我创建了一个新的点击界面，我的程序写回了从设备读取的所有内容。我用它来测试一个专有的网络协议——所以它可能适用于你打算做的事情，也可能不适用。代码很简单：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/ioctl.h>
#include <net/if.h>

#include <linux/if_tun.h>

#define DEVNAME "gnlo0"

static int tun_alloc(char *dev)
{
    struct ifreq ifr;
    int fd, ret;

    if ((fd = open("/dev/net/tun", O_RDWR)) < 0) {
        perror("open");
        return -1;
    }

    memset(&ifr, 0, sizeof(ifr));

    ifr.ifr_flags = IFF_TAP;
    if (*dev)
        strncpy(ifr.ifr_name, dev, IFNAMSIZ);

    ret = ioctl(fd, TUNSETIFF, (void *)&ifr);
    if (ret < 0) {
        close(fd);
        perror("ioctl TUNSETIFF");
        return ret;
    }
    strcpy(dev, ifr.ifr_name);
    return fd;
}

int main(int argc, char **argv)
{
    int fd = -1;
    int ret = 1;
    char dev[IFNAMSIZ];
    strncpy(dev, DEVNAME, IFNAMSIZ - 1);
    printf("opening %s\n", dev);

    fd = tun_alloc(dev);
    if (fd < 0)
        goto out;

    char buf[512];
    snprintf(buf, sizeof(buf) - 1,
             "ip addr flush dev %s; ip link set dev %s up", dev, dev);
    if (system(buf) < 0) {
        perror("system");
        goto out;
    }

    while (1) {
        unsigned char packet[65535];
        int len = read(fd, packet, sizeof(packet));
        if (len < 0) {
            perror("read");
            goto out;
        }
        printf("incoming packet [%d octets]\n", len);

        len = write(fd, packet, len);
        printf("fed back packet [%d octets]\n", len);
    }
    ret = 0;

out:
    if (fd >= 0)
        close(fd);
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:10:51.723

我认为您可以使用 Python/Scapy 轻松实现这一目标。就像是

`sniff(iface="eth0", prn=lambda x: sendp(x, iface="eth0"))`

应该这样做。

# java - 增加 cmu sphinx 中的语言模型大小

> ID：14558137
> 
> 赞同：0
> 
> 时间：2013-01-28T08:27:31.470
> 
> 标签：java, cmusphinx

嗨，我正在 windows xp 中的 cmu sphinx 上工作。我已经按照 sphinx 的建议创建了语言模型，当我尝试提供与语言模型相对应的语音样本时，它的工作正常。但是当我在语言模型中有更多文本并输入相应的语音样本作为输入时，cmu 无法检测到单词并且它继续使用创建语言模型的参考文本的前 100 行中的单词，谁能帮助我如何来克服这个问题。

提前致谢

G查兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:31:00.213

AFAIR n-gram 语言模型文件将每种 N-gram 类型的行数存储在给定 N 之前的第一行中。因此，您必须自己修改数字以适应模型中的数据量。它应该如下所示：

```
[100]
iaeug
asedrgkjh
3eirghb
aeirf
iajedf
... 
```

# passwords - 重置密码 joomla 3.0 中的错误

> ID：14558138
> 
> 赞同：2
> 
> 时间：2013-01-28T08:27:32.843
> 
> 标签：passwords, reset, joomla3.0

当我在验证代码 url 为 ../index.php/registration?view=reset&layout=complete 后进入重置页面时，我在 joomla 3.0 中遇到问题。

场景是：在密码中填写不同的值，并符合密码。然后提交表单，报错：

> 注意 完成重置密码失败：异常“UnexpectedValueException”并显示消息“您输入的密码不匹配。请在密码字段中输入您想要的密码，并在确认密码字段中输入以确认您的输入。在 /home/fiable/public_html/projects/canvasfast/libraries/joomla/form/form.php:1872 堆栈跟踪：#0 /home/fiable/public_html/projects/canvasfast/libraries/joomla/form/form.php(1105 ): JForm->validateField(Object(SimpleXMLElement), '', 'dfdefsdfdfdfdf', Object(JRegistry)) #1 /home/fiable/public_html/projects/canvasfast/components/com_users/models/reset.php(122): JForm->validate(Array) #2 /home/fiable/public_html/projects/canvasfast/components/com_users/controllers/reset.php(156): UsersModelReset->

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:52:13.477

在 joomla 3.0 中测试转到第 130 行 components\com_users\models\reset.php

替换波纹管代码：

```
 // Check the validation results.
        if ($return === false) {
            // Get the validation messages from the form.
            foreach ($form->getErrors() as $message) {
                $this->setError($message);
            }
            return false;
        } 
```

到：

```
 // Check the validation results.
      if ($return === false) {
   $errors = $form->getErrors();
   for ($i = 0, $n = count($errors); $i < $n && $i < 3; $i++) {
    if ($errors[$i] instanceof Exception) {
     $this->setError($errors[$i]->getMessage());
    } else {
     $this->setError($errors[$i]);
    }
   }

   return false;
  } 
```

# android - Android，后退按钮释放活动内存？

> ID：14558144
> 
> 赞同：5
> 
> 时间：2013-01-28T08:28:07.723
> 
> 标签：android, memory, garbage-collection

我做了一个简单的应用程序来测试Android的内存。它有两个 Activity，A 和 B。A 是一个简单的 Activity，带有一个启动 B 的按钮。B 包含一个非常大的图像（jpg，mdpi 中的 1024x768 像素）

当我使用 DDMS 监视此过程时，从 A 移动到 B 时，堆按预期上升。当我按下 B 上的（硬件或软件使用`super.onBackPressed()`）按钮并再次进入 A 时，即使在调用之后，堆也不会再次缩小垃圾收集。这是预期的吗？B占用的内存会在进程的生命周期内被释放吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:35:43.710

**onBackPressed()**只是从**[BackStack](http://developer.android.com/guide/components/tasks-and-back-stack.html)**中弹出你的 B Activity然后你的 Activity 不再可见（onStop() 调用）对你来说，但它的进程还没有被杀死，直到操作系统需要它的内存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:37:10.777

请注意，垃圾收集器的工作方式是“*不确定*的”。特别是，即使是对垃圾收集器的调用也不意味着内存被完全释放。只有在请求更多内存时才能保证释放内存。

# c# - 如何创建半透明表单 win 应用程序

> ID：14558146
> 
> 赞同：2
> 
> 时间：2013-01-28T08:28:16.083
> 
> 标签：c#, winforms, transparent

我想为叠加效果创建一个半透明的表格。表格应该是透明的。这是我尝试这样做的方式，但它没有得到半透明的形式。所以请帮助我。

```
 Form mMask = new Form();
    mMask.FormBorderStyle = FormBorderStyle.None;
    mMask.BackColor = Color.DarkGray;
    mMask.Opacity = 0.10;
    mMask.Height = this.ClientRectangle.Height;
    mMask.Width = this.ClientRectangle.Width;
    mMask.Top = 0;
    mMask.Left = 0;
    mMask.Text = this.Text;
    mMask.AllowTransparency = true;
    mMask.ShowInTaskbar = false;
    mMask.StartPosition = FormStartPosition.Manual;
    mMask.TopLevel = false;
    this.Controls.Add(mMask);
    mMask.Show();
    mMask.BringToFront(); 
```

请指导我谢谢。

## 我修改了这个程序，现在如下

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows.Forms;

namespace dialog
{
    public class MaskedDialog : Form
    {
        static MaskedDialog mask;
        static Form frmContainer;

        private Form dialog;
        private UserControl ucDialog;

        private MaskedDialog(Form parent, Form dialog)
        {
            this.dialog = dialog;
            this.FormBorderStyle = FormBorderStyle.None;
            this.BackColor = System.Drawing.Color.Black;
            this.Opacity = 0.50;
            this.ShowInTaskbar = false;
            this.StartPosition = FormStartPosition.Manual;
            this.Size = parent.ClientSize;
            this.Location = parent.PointToScreen(System.Drawing.Point.Empty);
            parent.Move += AdjustPosition;
            parent.SizeChanged += AdjustPosition;
        }

        private MaskedDialog(Form parent, UserControl ucDialog)
        {
            this.ucDialog = ucDialog;
            this.FormBorderStyle = FormBorderStyle.None;
            this.BackColor = System.Drawing.Color.Black;
            this.Opacity = 0.50;
            this.ShowInTaskbar = false;
            this.StartPosition = FormStartPosition.Manual;
            this.Size = parent.ClientSize;
            this.Location = parent.PointToScreen(System.Drawing.Point.Empty);
            parent.Move += AdjustPosition;
            parent.SizeChanged += AdjustPosition;
        }

        private void AdjustPosition(object sender, EventArgs e)
        {
            Form parent = sender as Form;
            this.Location = parent.PointToScreen(System.Drawing.Point.Empty);
            this.ClientSize = parent.ClientSize;
        }

        public static DialogResult ShowDialog(Form parent, Form dialog)
        {
            mask = new MaskedDialog(parent, dialog);
            dialog.StartPosition = FormStartPosition.CenterParent;
            mask.Show();
            DialogResult result = dialog.ShowDialog(mask);
            mask.Close();
            return result;
        }

        public static DialogResult ShowDialog(Form parent, UserControl dialog)
        {
            mask = new MaskedDialog(parent, dialog);
            frmContainer = new Form();
            frmContainer.ShowInTaskbar = false;
            frmContainer.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
            frmContainer.StartPosition = FormStartPosition.CenterParent;
            frmContainer.Height = dialog.Height;
            frmContainer.Width = dialog.Width;

            frmContainer.Controls.Add(dialog);
            mask.Show();
            DialogResult result = frmContainer.ShowDialog(mask);
            frmContainer.Close();
            mask.Close();
            return result;
        }

        public static void CloseDialog()
        {
            if (frmContainer != null)
            {
                frmContainer.Close();
            }
        }
    } 
} 
```

## 用表格调用技术 1

```
Form d = new Form();
d.Width = 400;
d.Height = 300;
MaskedDialog.ShowDialog(this, d); 
```

## 用表格调用技术 2

```
UserControl1 uc = new UserControl1();
uc.CloseClicked += new UserControl1.CloseComplete(OnCloseClicked);
MaskedDialog.ShowDialog(this, uc);

void OnCloseClicked()
{
    MaskedDialog.CloseDialog();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T08:32:55.350

![在此处输入图像描述](../Images/1d53253c883b132868adebfc74b87c3b.png)

```
void Main()
{
    var f = new Form 
    {
        Width = 800,
        Height = 600
    };
    var d = new Form
    {
        Width = 400,
        Height = 300
    };
    var tb = new TextBox 
    { 
        Width = 250, 
        Height = 250, 
        Multiline = true, 
        Text = "Hello World", 
        Dock = DockStyle.Top 
    };
    var b = new Button
    {
        Text = "Display Masked Dialog",
        Dock = DockStyle.Top
    };
    b.Click += (s, e) => 
    {
        MaskedDialog.ShowDialog(f, d);
    };
    f.Controls.AddRange(new Control[] { tb, b } );
    Application.Run(f);
}

public class MaskedDialog : Form
{
    private Form dialog;
    private MaskedDialog(Form parent, Form dialog)
    {
        this.dialog = dialog;
        this.FormBorderStyle = FormBorderStyle.None;
        this.BackColor = System.Drawing.Color.Black;
        this.Opacity = 0.50;
        this.ShowInTaskbar = false;
        this.StartPosition = FormStartPosition.Manual;
        this.Size = parent.ClientSize;
        this.Location = parent.PointToScreen(System.Drawing.Point.Empty);
        parent.Move += AdjustPosition;
        parent.SizeChanged += AdjustPosition;
    }
    private void AdjustPosition(object sender, EventArgs e)
    {
        Form parent = sender as Form;
        this.Location = parent.PointToScreen(System.Drawing.Point.Empty);
        this.ClientSize = parent.ClientSize;
    }
    public static DialogResult ShowDialog(Form parent, Form dialog)
    {
        var mask = new MaskedDialog(parent, dialog);
        dialog.StartPosition = FormStartPosition.CenterParent;
        mask.Show();
        var result = dialog.ShowDialog(mask);
        mask.Close();
        return result;
    }
} 
```

# postgresql - 记录是否在 postgres 集群中复制？

> ID：14558149
> 
> 赞同：0
> 
> 时间：2013-01-28T08:28:21.540
> 
> 标签：postgresql, synchronization, replication, master-slave

我们使用 Postgres 作为我们项目的数据库，发现流复制适合我们的异步工作需求。我们有一台服务器处于只写模式（MASTER），其他服务器处于只读模式（SLAVES）。

在大多数情况下，我们将数据发送到 MASTER 并忘记它。但有时我们希望在继续之前确保当前块在主从之间同步。对于新行（INSERTS），这很简单，脚本可以检查简单的 SELECT 查询是否出现了新行。但是对于 UPDATE，它就成了问题。

那么，有没有简单合法的方法来检查slave是否赶上master呢？我知道每条记录都应该有自己的内部 id，但不确定服务器之间是否相同。

我们使用 Postgres 9.2 和[这篇文章中描述的](http://bartek.im/blog/2012/12/04/postgresql-92-streaming-primer.html)非常相似的配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:40:26.437

所以，最后我自己找到了解决方案。到目前为止，postgres 将所有更改存储为特殊的日志文件，然后将更改复制到从服务器上。同时 postgres 拥有丰富的 API 方法，可以读取不同内部进程的状态。所以最后我使用这个查询：

```
-- On MASTER server current xlog location:

SELECT 
  pg_xlog_location_diff(pg_current_xlog_location(), '0/0') AS offset;

-- On SLAVE server current offset of received and applied changes

SELECT 
   pg_xlog_location_diff(pg_last_xlog_receive_location(), '0/0') AS receive,
   pg_xlog_location_diff(pg_last_xlog_replay_location(), '0/0') AS replay; 
```

从 MASTER 和 SLAVE 获取这些值我可以确定服务器之间的差异有多大。当我需要确保两台服务器处于相同状态时，我可以等到 SLAVE 上的偏移量等于或大于 MASTER 上的偏移量。

如果您有同样的问题，这个查询可能也很方便：

```
-- Check is current server in cluster

SELECT 
  pg_is_in_recovery() AS recovery;

-- False — server is MASTER
-- True — server is SLAVE 
```

# php - 我如何知道使用了哪个 'php.ini' 文件？

> ID：14558150
> 
> 赞同：73
> 
> 时间：2013-01-28T08:28:24.313
> 
> 标签：php, php-ini

我在我们的Linux Ubuntu服务器中搜索了*php.ini*文件所在的路径，执行命令的时候发现了很多*php.ini*`find / -name php.ini`文件。那么我如何才能从 php.ini 所在的 PHP 脚本网页中准确知道呢？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-01-28T08:31:15.400

```
php --ini 
```

对于 webserver-SAPIs 使用`phpinfo()`

这是一些示例输出：

```
bash-3.2# php --ini
Configuration File (php.ini) Path: /usr/local/php5/lib
Loaded Configuration File:         /usr/local/php5/lib/php.ini
Scan for additional .ini files in: /usr/local/php5/php.d
Additional .ini files parsed:      /usr/local/php5/php.d/10-extension_dir.ini,
/usr/local/php5/php.d/20-extension-opcache.ini,
/usr/local/php5/php.d/40-openssl.ini,
/usr/local/php5/php.d/50-extension-apcu.ini,
/usr/local/php5/php.d/50-extension-curl.ini,
/usr/local/php5/php.d/50-extension-gmp.ini,
/usr/local/php5/php.d/50-extension-imap.ini,
/usr/local/php5/php.d/50-extension-intl.ini,
/usr/local/php5/php.d/50-extension-mcrypt.ini,
/usr/local/php5/php.d/50-extension-mssql.ini,
/usr/local/php5/php.d/50-extension-pdo_pgsql.ini,
/usr/local/php5/php.d/50-extension-pgsql.ini,
/usr/local/php5/php.d/50-extension-propro.ini,
/usr/local/php5/php.d/50-extension-raphf.ini,
/usr/local/php5/php.d/50-extension-readline.ini,
/usr/local/php5/php.d/50-extension-xdebug.ini,
/usr/local/php5/php.d/50-extension-xsl.ini,
/usr/local/php5/php.d/60-extension-pecl_http.ini,
/usr/local/php5/php.d/99-liip-developer.ini 
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2013-01-28T08:32:12.643

您可以使用[php_ini_loaded_file()](http://php.net/manual/en/function.php-ini-loaded-file.php)。

取自*php.net*：

```
$inipath = php_ini_loaded_file();
if ($inipath) {
    echo 'Loaded php.ini: ' . $inipath;
} else {
    echo 'A php.ini file is not loaded';
} 
```

您可能还想检查[php_ini_scanned_files()](http://php.net/manual/en/function.php-ini-scanned-files.php)。

此外，您应该注意，如果您从 CLI 运行 PHP 脚本，则可能`php.ini`会使用与服务器（例如，nginx 或 Apache）运行它不同的文件。

其他选项：

*   `php -i|grep 'php.ini'`
*   创建`info.php`包含`<?php phpinfo();`在 webroot 中，并在浏览器中运行它

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-03-31T09:34:09.427

请注意，在控制台中使用 PHP 时为其加载的配置与 Web 进程的配置不同。大多数 PHP 安装都会附带一个用于 Apache 的*php.ini*文件和另一个用于 CLI 的文件。

要知道哪个配置文件用于控制台命令，请使用

```
php -i | grep "Configuration File" 
```

要知道哪个配置文件用于 Web 进程，请按照以下步骤操作

1.  创建一个信息文件（最好在根文件夹中）
2.  这个文件的内容应该是`<?php phpinfo(); ?>`
3.  `Ctrl`+`F`并搜索“配置文件”

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-28T08:30:40.340

您必须使用 PHP 方法`php_ini_loaded_file`（仅在 PHP 5.2.4 之后）

> php_ini_loaded_file — 获取加载的 php.ini 文件的路径

PHP网站示例：

```
<?php
$inipath = php_ini_loaded_file();

if ($inipath) {
    echo 'Loaded php.ini: ' . $inipath;
} else {
    echo 'A php.ini file is not loaded';
}
?> 
```

来源：[PHP网站](http://php.net/manual/en/function.php-ini-loaded-file.php)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-28T08:30:58.717

只需添加这样的文件：

```
<?php
    phpinfo();
?> 
```

然后寻找

```
Loaded Configuration File 
```

您将看到*php.ini*文件的完整路径。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-28T08:30:50.173

创建一个简单的页面，它将在那里列出！

```
<?php

phpinfo();

?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-30T06:50:28.107

如前所述，“find / -name php.ini”将帮助获取所有*php.ini*文件。您可能正在编辑的那个可能不是服务器从中提取命令的那个！我在我的服务器上找到了三个不同版本的 PHP 的*php.ini*，然后我立即得到了修复。

# git - 如何在本地设置中覆盖 git 作者姓名？

> ID：14558151
> 
> 赞同：0
> 
> 时间：2013-01-28T08:28:24.177
> 
> 标签：git, git-svn

我的 git 存储库是从 svn 导入的。并且用户名`git log`类似于 0129。我想用我的设置覆盖它，比如 John 而不是 0129。我发现这个：

[有没有办法在本地存储库配置中覆盖 git 作者的显示名称？](https://stackoverflow.com/questions/8878615/is-there-a-way-to-override-a-git-authors-display-name-in-local-repository-confi)

.mailmap 解决方案在 中运行良好`git shortlog`，但`git log`仍然提供相同的输出。有什么建议么？

*编辑* 我也检查[了在 Git 中更改多个提交的作者和提交者姓名和电子邮件，](https://stackoverflow.com/questions/750172/how-do-i-change-the-author-of-a-commit-in-git/870367#870367)但我不想`git filter branch`每次都在`git svn rebase`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:39:55.673

您需要在从 svn 迁移到 git 时使用 git-svn 指定作者的映射：

```
 mkdir project_tmp
  cd project_tmp
  git-svn init https://company.project.org/project --no-metadata
  git config svn.authorsfile ~/Desktop/users.txt
  git-svn fetch 
```

users.txt 文件是这样的：

```
 xavier.fuster = xavier.fuster <xavier.fuster@project.org>
  francesc.dalmau = francesc.dalmau <francesc.dalmau@project.org> 
```

equal的第一部分是svn用户名，第二部分是git名。

在此之后，您需要进行正常克隆以留下所有 svn 内容：

```
 git clone project_tmp project 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:37:13.347

你看过什么`--authors-file`时候克隆/获取/变基/...？

提供作者文件，将允许您使用理智的名称。作者文件的语法类似于以下内容，每行有 1 个作者：

```
svn_user_name = JustNameInGit <obligatory@email.com> 
```

# javascript - 显示价格时，逗号值不起作用

> ID：14558152
> 
> 赞同：2
> 
> 时间：2013-01-28T08:28:29.730
> 
> 标签：javascript, parsing, numbers

我在显示由 AJAX 从 PHP 文件引入然后通过 Javascript 附加到页面的价格时遇到问题。

```
$('.cash1').text(parseFloat(prices[0]).toFixed(2)); 
```

这可以正常工作，直到返回的值是数千并且包含逗号 ie `1,123.34`。

如果可能的话，我真的很想在值中保留逗号，但到目前为止，脚本只会返回值`1.34`。我尝试过使用`parseInt`，但这似乎以同样的方式失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:03:06.907

这对你好吗？

```
<script> 
.............
    $('.cash1').text(numberWithCommas(prices[0].toFixed(2)));
.............. 

function numberWithCommas(x) {
     var parts = x.toString().split(".");
     parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
     return parts.join(".");
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:37:35.687

建议您需要使用浮动，您需要使用[替换](http://www.w3schools.com/jsref/jsref_replace.asp)方法：

```
var n = prices[0].replace(',','');
$('.cash1').text(parseFloat(n).toFixed(2)); 
```

如果您出于某种目的需要这些逗号，我建议您创建一种方法，该方法将在需要时从浮点数中生成带有逗号的字符串，并在其他任何时候使用数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:36:39.197

为什么要解析它？只需按原样（或作为字符串）使用它：

```
$('.cash1').text(prices[0].toString()); 
```

# css - 带有固定标题的 CSS 可滚动表格，但使用浏览器滚动条，不会溢出

> ID：14558158
> 
> 赞同：2
> 
> 时间：2013-01-28T08:29:06.970
> 
> 标签：css, scrollbar, css-tables

这就是我所做的。[http://jsfiddle.net/FeHdS/5/](http://jsfiddle.net/FeHdS/5/)

如您所见，当您使用浏览器滚动条时，整个表格位于“mainwrapper”div 后面。我想让我的表有一个固定的标题，我不想使用溢出滚动。

我尝试的是简单地为thead分配一个固定位置。

```
thead{
    position: fixed;
} 
```

但是随后，表格的第一行占据了标题的位置。

有没有办法只用 CSS 做到这一点？如果没有，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:34:02.847

您可以使用带有 javascript 的 CSS 来执行此操作。

基本上，您使用 CSS 来定位表格和表格标题行，并让表格表现得像 div。然后使用 javascript 来操作表格标题行的 CSS 定位和一个“掩码”div，在表格滚动时隐藏常规表格行。因为您的表格现在认为它是 div 并调整单元格的大小而不匹配它们的宽度，您还需要使用 CSS 设置宽度，以便表格标题宽度与 td 宽度匹配。

相关组件是：

```
<!-- divs with IDs are manipulated with javascript -->
<div class="fixedTableHolder">

  <div class="maskHolder">
     <div id="mask" class="mask">&nbsp;</mask>
  </div>

  <div class="fixedTable">
    <div id="theTable" class="theTable">

       <!-- here is the table, header row must have an ID -->
       <table border="0" cellspacing="5" cellpadding="5"> 
          <tr id="thFixed" class="thFixed"> 
            <td class="col1">Header cell 1</td> 
          </tr>
          <tr>
            <td class="col1">regular cell</td>
          </tr>
       </table>

    </div>
  </div>

</div> 
```

它相当复杂，需要一两分钟以上的时间来实现。我是为一个我打算经常重复使用它的应用程序做的。这是 jsFiddle 中的演示（包含 CSS 和 javascript 以及 html）：http: [//jsfiddle.net/deborah/Msvvr/](http://jsfiddle.net/deborah/Msvvr/)

# javascript - jQuery UI 选项卡不正确

> ID：14558159
> 
> 赞同：0
> 
> 时间：2013-01-28T08:29:09.810
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-tabs

所以，我正在使用 jQuery UI（带有标签）来为我的页面上的一些内容添加标签。但是，有一个奇怪的问题正在发生。

我有两个标签，“KR”和“O”——当我点击“O”标签时，我确实得到了正确的内容。但是，如果我单击“KR”选项卡，我会同时获得 KR 和 O？检查下面的图片进行审查。

![在此处输入图像描述](../Images/953b524e301f9ad3dd9926e7ba4d77f3.png)

![在此处输入图像描述](../Images/55f6c907278335171a935e9e910716b7.png)

这是 PHP/HTML 代码，

```
 <div id="right_side_menu">

                <div id="sub_menu">
                    <ul>
                        <?php if($money_type == TRUE) : ?><li><a href="#tab-coins"><span>Kr</span></a></li> <?php endif ?>
                        <?php if($tasks_type == TRUE) : ?> <li><a href="#tab-hours"><span>O</span></a></li> <?php endif ?>
                        <?php if($hours_type == TRUE) : ?> <li><a href="#tab-tasks"><span>T</span></a></li> <?php endif ?>
                    </ul>
                </div> <!-- end sub_menu -->

                <div class="clear"></div>

                <br />

                <div id="statistics">

                    <?php if($money_type == TRUE) : ?>

                        <div id="tab-coins">
                            <ul>
                                <li><span id="statistics_big"> <?php if($total_year_money == FALSE) { echo '0'; } else { echo $total_year_money; } ?> </span><br><span class="statistics_underline">Kroner totalt i år</span></li>
                                <div class="clear"></div>
                                <li><span id="statistics_medium"> <?php if($total_month_money == FALSE) { echo '0'; } else { echo $total_month_money; } ?> </span><br><span class="statistics_underline">Kroner denne måneden</span></li>
                                <div class="clear"></div>
                                <li><span id="statistics_small"> <?php if($total_highest_money == FALSE) { echo '0'; } else { echo $total_highest_money; } ?> </span><br><span class="statistics_underline">Høyest salg denne måneden</span></li>
                            </ul>
                        </div> <!-- end tab-coins -->

                    <?php endif ?>

                    <?php if($hours_type == TRUE) : ?> 

                        <div id="tab-hours">
                            <ul>
                                <li><span id="statistics_big"> <?php if($total_year_hours == FALSE) { echo '0'; } else { echo $total_year_hours; } ?> </span><br><span class="statistics_underline">Timer totalt i år</span></li>
                                <div class="clear"></div>
                                <li><span id="statistics_medium"> <?php if($total_month_hours == FALSE) { echo '0'; } else { echo $total_month_hours; } ?> </span><br><span class="statistics_underline">Timer denne måned</span></li>
                                <div class="clear"></div>
                                <li><span id="statistics_small"> <?php if($total_highest_hours == FALSE) { echo '0'; } else { echo $total_highest_hours; } ?> </span><br><span class="statistics_underline">Høyest antall timer denne måneden</span></li>
                            </ul>
                        </div> <!-- end tab-coins -->

                    <?php endif ?>

                    <?php if($tasks_type == TRUE) : ?>

                        <div id="tab-tasks">
                            <ul>
                                <li><span id="statistics_big"> <?php if($total_year_tasks == FALSE) { echo '0'; } else { echo $total_year_tasks; } ?> </span><br><span class="statistics_underline">Arbeidsoppgaver totalt i år</span></li>
                                <div class="clear"></div>
                                <li><span id="statistics_medium"> <?php if($total_month_tasks == FALSE) { echo '0'; } else { echo $total_month_tasks; } ?> </span><br><span class="statistics_underline">Arbeidsoppgaver denne måneden</span></li>
                                <div class="clear"></div>
                                <li><span id="statistics_small"> <?php if($total_highest_tasks == FALSE) { echo '0'; } else { echo $total_highest_tasks; } ?> </span><br><span class="statistics_underline">Høyest arbeidsoppgaver denne måneden</span></li>
                            </ul>
                        </div> <!-- end tab-coins -->

                    <?php endif ?>

                    <div class="clear"></div>

                </div>

            </div> <!-- end right side menu --> 
```

这是实时输出，

```
<div id="right_side_menu">

                <div id="sub_menu">
                    <ul>
                        <li><a href="#tab-coins"><span>Kr</span></a></li>                            <li><a href="#tab-hours"><span>O</span></a></li>                                                   </ul>
                </div> <!-- end sub_menu -->

                <div class="clear"></div>

                <br />

                <div id="statistics">

                        <div id="tab-coins">
                            <ul>
                                <li><span id="statistics_big"> 0 </span><br><span class="statistics_underline">Kroner totalt i år</span></li>
                                <div class="clear"></div>
                                <li><span id="statistics_medium"> 0 </span><br><span class="statistics_underline">Kroner denne måneden</span></li>
                                <div class="clear"></div>
                                <li><span id="statistics_small"> 0 </span><br><span class="statistics_underline">Høyest salg denne måneden</span></li>
                            </ul>
                        </div> <!-- end tab-coins -->

                        <div id="tab-tasks">
                            <ul>
                                <li><span id="statistics_big"> 0 </span><br><span class="statistics_underline">Arbeidsoppgaver totalt i år</span></li>
                                <div class="clear"></div>
                                <li><span id="statistics_medium"> 0 </span><br><span class="statistics_underline">Arbeidsoppgaver denne måneden</span></li>
                                <div class="clear"></div>
                                <li><span id="statistics_small"> 0 </span><br><span class="statistics_underline">Høyest arbeidsoppgaver denne måneden</span></li>
                            </ul>
                        </div> <!-- end tab-coins -->

                    <div class="clear"></div>

                </div>

            </div> <!-- end right side menu --> 
```

我使用的 JavaScript，

```
<script>
$(function() {
    $( "#right_side_menu" ).tabs();
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:39:04.517

首先，尝试是否可以让标签使用最基本的 HTML：

```
<ul>
    <li><a href="#tabOne">One</a></li>
    <li><a href="#tabTwo">Two</a></li>
    <li><a href="#tabThree">Three</a></li>
</ul>
<div id="tabOne">One</div>
<div id="tabTwo">Two</div>
<div id="tabThree">Three</div> 
```

我看到您的选项卡周围有一些额外的 HTML，这可能会造成干扰。
除此之外，请绝对确保您的 HTML 中包含所有“菜单按钮”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:48:05.347

我想通了..你有一个错误的标签ID选择器

```
<li><a href="#tab-hours"><span>O</span></a>
            // -----^----- //here 
```

你没有一个`<div>`with id = "tab-hours" .. （但是我仍然想知道即使 id 错误，该选项卡如何向您显示其他选项卡任务..）

无论如何它应该是

```
<li><a href="#tab-tasks"><span>O</span></a>
             --^-- here 
```

**这是有效的**

[工作小提琴](http://jsfiddle.net/bipen/7Yn66/)

# android - android Timer中的致命异常

> ID：14558161
> 
> 赞同：0
> 
> 时间：2013-01-28T08:29:32.703
> 
> 标签：android, timer

在我的 android 应用程序中，我正在使用 Timer schedule.but 得到 Timer-0 致命异常，如下所示。我该如何删除它。我还提到了下面的代码 -

```
01-28 13:44:41.142: E/AndroidRuntime(1307): FATAL EXCEPTION: Timer-0
01-28 13:44:41.142: E/AndroidRuntime(1307):android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
01-28 13:44:41.142: E/AndroidRuntime(1307):     at android.view.ViewRoot.checkThread(ViewRoot.java:2932)
01-28 13:44:41.142: E/AndroidRuntime(1307):     at android.view.ViewRoot.invalidateChild(ViewRoot.java:642)
01-28 13:44:41.142: E/AndroidRuntime(1307):     at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:668)
01-28 13:44:41.142: E/AndroidRuntime(1307):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:2511)
01-28 13:44:41.142: E/AndroidRuntime(1307):     at android.view.View.invalidate(View.java:5279)
01-28 13:44:41.142: E/AndroidRuntime(1307):     at android.view.View.setBackgroundDrawable(View.java:7626)
01-28 13:44:41.142: E/AndroidRuntime(1307):     at android.view.View.setBackgroundResource(View.java:7535)
01-28 13:44:41.142: E/AndroidRuntime(1307):     at com.example.iqtest.PlayGame$1.run(PlayGame.java:61)
01-28 13:44:41.142: E/AndroidRuntime(1307):     at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

和代码是 -

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.next);
    but1=(Button) findViewById(R.id.b1);
    but2=(Button) findViewById(R.id.b2);
    but3=(Button) findViewById(R.id.b3);

    myTimer = new Timer();

    myTimer.schedule(new TimerTask() {      

        @Override
        public void run() {
            Random rand=new Random();
            int num=rand.nextInt(9)+1;

            num = rand.nextInt(buttonIds.length);
            int buttonId = buttonIds[num];
            Button bb=(Button) findViewById(buttonId);

            Drawable a=bb.getBackground();
            if(getResources().getDrawable(R.drawable.happy).equals(a))
             bb.setBackgroundResource(R.drawable.happy);
            else
                bb.setBackgroundResource(R.drawable.whoa);
        }
    },0, 1000);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T08:31:45.863

使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)从 Timertask run 方法更新 UI 元素：

```
 myTimer.schedule(new TimerTask() {      

 @Override
 public void run() {
  Current_Activity.this.runOnUiThread(new Runnable() {
    public void run() {
        // update UI here
    }
 });
 }
},0, 1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T08:32:15.733

您可以使用 a`CountDownTimer`而不是`Timer`：

```
Timer timer = new CountDownTimer(Long.MAX_VALUE, 1000) {
    public void onTick(long millisUntilFinished) {
        // the code in the method run
    }

    public void onFinish() {

    }
}; 
```

方法`onTick`和`onFinish`将在 UI 线程中调用。

要使计时器开始执行其操作，请运行：`timer.start()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:32:23.950

这很简单，您正在安排 Timer 但永远不会取消它。所以调度的任务将在队列中等待轮到它。到那时它应该被执行，您的 Activity 可能不在前台，并且无法找到视图。所以它抛出了致命异常。为了解决上述问题，您需要在从该特定活动开始时通过调用取消任务`myTimer.cancel()`。

要不然

使用[处理程序](http://developer.android.com/reference/android/os/Handler.html)类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:33:41.173

```
runOnUiThread(new Runnable() {
     public void run() {

       //stuff that updates ui

    }
}); 
```

尝试这个

也看看

[Android“只有创建视图层次结构的原始线程才能触摸它的视图。”](https://stackoverflow.com/questions/5161951/android-only-the-original-thread-that-created-a-view-hierarchy-can-touch-its-vi)

[CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能接触视图](https://stackoverflow.com/questions/3280141/android-calledfromwrongthreadexception-only-the-original-thread-that-created)

[只有创建视图层次结构的原始线程才能接触其视图](https://stackoverflow.com/questions/14294287/only-the-original-thread-that-created-a-view-hierarchy-can-touch-its-views)

# html - 删除菜单和轮播之间的空格 Twitter bootstrap 2.2.2

> ID：14558167
> 
> 赞同：0
> 
> 时间：2013-01-28T08:29:46.530
> 
> 标签：html, css, twitter, twitter-bootstrap, carousel

我只是添加导航栏，然后在屏幕底部添加这样的轮播：http: [//imageshack.us/photo/my-images/833/zrzutekranu2h.png/](http://imageshack.us/photo/my-images/833/zrzutekranu2h.png/)

在 twitter bootstrap css 中，我没有任何改变。我怎样才能删除这个空间？这是我的 index.html 代码

```
 <!-- NavBar
    ================================================== -->
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Project name</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

<!-- Carousel
    ================================================== -->
    <div id="myCarousel" class="carousel slide">
      <div class="carousel-inner">
        <div class="item active">
          <img src="assets/img/examples/slide-01.jpg" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>Example headline.</h1>
              <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <a class="btn btn-large btn-primary" href="#">Sign up today</a>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="assets/img/examples/slide-02.jpg" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>Another example headline.</h1>
              <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <a class="btn btn-large btn-primary" href="#">Learn more</a>
            </div>
          </div>
        </div>
        <div class="item">
          <img src="assets/img/examples/slide-03.jpg" alt="">
          <div class="container">
            <div class="carousel-caption">
              <h1>One more for good measure.</h1>
              <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              <a class="btn btn-large btn-primary" href="#">Browse gallery</a>
            </div>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
      <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
    </div><!-- /.carousel -->
    <div class="container">

      <h1>Bootstrap starter template</h1>
      <p>Use this document as a way to quick start any new project.<br> All you get is this message and a barebones HTML document.</p>

    </div> <!-- /container -->

    <!-- Le javascript 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:42:12.487

默认情况下，导航栏会因为`navbar-fixed-top`. 你实际上是在`padding-top`为身体设置一个来防止这种情况。该填充需要设置为**`40px`**. 它现在可能设置为更多。

**同样，此填充是在您的 CSS 或 HTML 中设置的，而不是在引导程序本身中设置的。**

# ffmpeg - ffmpeg av_read_frame() 需要很长时间才能停止

> ID：14558172
> 
> 赞同：8
> 
> 时间：2013-01-28T08:30:18.783
> 
> 标签：ffmpeg

我使用ffmpeg解码RTSP视频。它喜欢这样：当它在文件末尾时，它会在av_read_frame（）中阻塞很长时间，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T11:03:54.590

各种原因都可能导致长时间阻塞。但是您可以控制 I/O 层的处理时间。

使用该结构`AVFormatContext::interrupt_callback`设置中断处理程序。

```
class timeout_handler {
  public:
    timeout_handler(unsigned int t) : timeout_ms_(TimeoutMs){}

    void reset(unsigned int 0) {
      timeout_ms_ = TimeoutMs;
      lastTime_ = my_get_local_time();
    }

    bool is_timeout(){
      const my_time_duration actualDelay = my_get_local_time() - lastTime_;
      return actualDelay > timeout_ms_;
    }

    static int check_interrupt(void * t) {
       return t && static_cast<timeout_handler *>(t)->is_timeout();
    }

 public:
   unsigned int timeout_ms_;
   my_time_t lastTime_;      
 };

 /// .................
 AVFormatContext * ic;
 timeout_handler * th = new timeout_handler(kDefaultTimeout);
 /// .................
 ic->interrupt_callback.opaque = (void*)th ;
 ic->interrupt_callback.callback = &timeout_handler::check_interrupt;
 /// open input
 // avformat_open_input(ic, ... );
 // etc

 /// .................
 /// before any I/O operations, for example:
 th->reset(kDefaultTimeout);
 int e = AVERROR(EAGAIN);
 while (AVERROR(EAGAIN) == e) 
  e = av_read_frame(ic, &packet);
 // If the time exceeds the limit, then the process interruped at the next IO operation. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T13:59:29.927

出现这个问题是因为 av_read_frame() 卡在网络无限循环中我遇到了同样的问题然后我使用了中断回调请参考示例代码

首先初始化你的上下文并设置中断回调

```
AVFormatContext *_formatCtx;

//Initialize format context
_formatCtx=avformat_alloc_context();

//Initialize intrrupt callback
AVIOInterruptCB icb={interruptCallBack,(__bridge void *)(self)};
_formatCtx->interrupt_callback=icb; 
```

现在在你的回调中处理中断

```
int interruptCallBack(void *ctx){

   //once your preferred time is out you can return 1 and exit from the loop
   if(timeout){
      //exit
      return 1;
    }

   //continue 
   return 0;

} 
```

# vb.net - 仅通过知道其 tabindex 来设置 vb.net 中文本框的值

> ID：14558173
> 
> 赞同：0
> 
> 时间：2013-01-28T08:30:25.567
> 
> 标签：vb.net, textbox, tabindex

在一个表单上，我有 100 个文本框。所有这些都按 TabIndex 从 0 到 99 排序，因此您可以对所有这些进行制表。

我需要设置，当我更改偶数 TabIndex 的值时，具有下一个 TabIndex 的单元格将获得相同的值。
因此，例如，如果我更改了 then 的值，`textbox6`则会`textbox7`得到相同的值。

此代码仅适用于文本框。

```
Private Sub Value_Changed(.....) Handles textbox0.TextChanged, textbox2.TextChanged etc...
....
End Sub 
```

我的问题是我不知道如何使用 tabindex = tabindex+1 设置文本框的值。

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:57:37.373

用“getnextcontrol”功能解决！

```
 Dim txt As TextBox = DirectCast(sender, TextBox)
        Dim txt2 As TextBox
        txt2 = GetNextControl(sender, True)
        txt2.Text = txt.text 
```

# performance - 我应该使用 tcmalloc/jemalloc 替换内存池吗？

> ID：14558180
> 
> 赞同：3
> 
> 时间：2013-01-28T08:31:05.550
> 
> 标签：performance, pool, tcmalloc

在我的项目中，我使用了内存池（boost::pool），但是它占用了太多内存（实测 22G），所以我想使用 tcmalloc/jemalloc 替换内存池，我考虑以下方面：

```
1.performance
2.memory use 
```

我想如果我使用 tcmalloc/jemalloc 替换池，那么使用的内存会更小，但是会出现性能问题。我该如何解决？谢谢！

# java - Java Diameter 消息不可路由

> ID：14558183
> 
> 赞同：0
> 
> 时间：2013-01-28T08:31:13.273
> 
> 标签：java, diameter-protocol

我正在使用 java 直径库来实现充电客户端。来自服务器的功能交换答案是好的，但是当我发送收费请求时。客户退货`SimpleSyncClient.sendRequest(): not routable`。我正在使用[这个库](http://i1.dk/JavaDiameter/)。有人知道为什么会这样吗？如果 CEA 正常，那么为什么消息不可路由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T10:40:14.800

“不可路由”背后的原因是能力交换答案应该将发起者主机作为某个域。在驱动程序的主机文件中更新相同的内容应该可以解决问题。

# python - 如何将键盘事件发送到 Pywin32 中的不同窗口？

> ID：14558191
> 
> 赞同：0
> 
> 时间：2013-01-28T08:31:35.337
> 
> 标签：python, pywin32

我必须编写一个脚本来模拟后台不同程序中的一些键盘事件。这是我的代码：</p>

```
pwin = win32ui.FindWindow(None,r'someprograme')
pwin.SendMessage(win32con.WM_KEYDOWN,18)
pwin.SendMessage(win32con.WM_KEYDOWN,68)
pwin.SendMessage(win32con.WM_KEYUP,18)
pwin.SendMessage(win32con.WM_KEYUP,68)
pwin.SendMessage(win32con.WM_KEYDOWN,13)
pwin.SendMessage(win32con.WM_KEYUP,13) 
```

但似乎什么也没发生。那我该怎么办？我试过 PostMessage func 似乎仍然无法做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:37:48.160

快速查看[WM_KEYDOWN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646280%28v=vs.85%29.aspx)后：

> 当按下非系统键时，以键盘焦点发布到窗口。非系统键是在未按下 ALT 键时按下的键。

但是查找[您的 keycodes](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)，您正在尝试发送 ALT-D （后跟 ENTER，这很好）。听起来您正在尝试驱动菜单；如果那是您想要做的，那`WM_KEYDOWN`不是这样做的方法。

问题是键盘菜单导航是由 Windows 驱动的，而不是由应用程序驱动的（除了少数覆盖正常菜单处理的应用程序，如某些版本的 Visual Studio）。当您查看记事本并按 ALT-F 打开“文件”菜单时，记事本代码会收到一堆与菜单相关的消息（`WM_INITMENU`等），而不是击键。

如果您使用 WM spy 程序（我认为免费的 Visual Studio Express 仍然带有 Spy++ 和 ManagedSpy，但如果没有，请搜索等效程序），您可以看到应用程序在使用键盘驱动时实际看到的内容，并且然后你可以弄清楚如何从你的 Python 脚本中模拟它。

最重要的是，根据程序的编写方式，当它没有焦点时，它可能不接受击键。

顺便说一句，如果您刚刚开始使用 Windows GUI 自动化，您可能希望查看更高级别的内容，例如[`pywinauto`](http://code.google.com/p/pywinauto/). 这样，您不必弄清楚要发送哪些与菜单相关的消息来打开“数据”菜单；你只是做类似的事情`app.Foo.MenuSelect('Data')`。

# javascript - 使用不同的用户名登录时javascript没有运行

> ID：14558192
> 
> 赞同：0
> 
> 时间：2013-01-28T08:31:36.227
> 
> 标签：javascript, jquery, asp.net-mvc, dom

所以我有一个用 ASP.NET 制作的网站，它在从用户帐户获取设置后使用 JS 生成一些 DOM 元素。

问题是，在我退出并使用不同的用户名登录后，我从前一个用户那里获得了生成的元素，但我不知道为什么。生成元素的代码如下：

```
$.ajax({
    url: '@Url.Content("~")' + 'Ticket/GetTvrtke',
    async: false,
    success: function (data) {
        document.getElementById("header_tvrtka_holder").innerHTML = data;
    }
}); 
```

稍后它被这样使用： var tvrtke = document.getElementById("header_tvrtka_holder").innerHTML.split(", ");

```
$.each(tvrtke, function (index, value) {
    $("#KlijentMultiSelect").append("<option value=\"" + value + "\" id=\"" + index + "\" >" + value + "</option>");
}); 
```

现在，当我注销并以其他用户身份登录时，上面的 ajax 代码不会触发 getTvrtke URL，该 URL 会获取生成元素的设置，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:38:43.550

Ajax 默认缓存调用的响应。您可以将其设置为 false，这样每次都会有一个新的请求，方法是使用应用程序顶部的以下内容。

```
$.ajaxSetup({cache: false}); 
```

# jquery - 如何在自己的 javascript 点击事件中禁用按钮？

> ID：14558195
> 
> 赞同：0
> 
> 时间：2013-01-28T08:31:46.043
> 
> 标签：jquery, events, dynamic, bind

我有一个附加在表单上的按钮。表单是在应用程序中的某个点动态创建的，按钮的附加方式如下：

```
$('#imgform').append("<center><input type='submit' value='Upload' id='#imgupload' onclick='showUploadedItem()'/>"); 
```

这是我的代码`showUploadedItem()`：

```
function showUploadedItem () {
    $('#upload_process').show();
            // a bunch of other things to do
           $('#imgupload').prop('disabled',true);
           console.log("the submit button ID is: " + $('#imgupload').attr('id'));
} 
```

但是 console.log 消息显示按钮 ID 是`undefined`，这意味着此时代码中的按钮甚至不存在。我可以理解它是动态创建的，也许我需要绑定事件，但是它是如何被点击的，甚至根本没有显示控制台消息？

如何在功能中禁用此按钮？或者甚至不可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:55:32.910

您使用的 html`id="#imgupload"`似乎不合法。虽然为了好玩，我能够得到一个选择器来工作：

```
 $('#\\#imgupload').prop('disabled',true); 
```

不过，这确实看起来像一个**错误**，您的 html 应该只是`id="imgupload"`

[小提琴](http://jsfiddle.net/gillyspy/7vxE9/)

另外，如果您使用 jQuery，为什么要使用内联 javscript？只需绑定一个事件处理程序（也请参见 fiddle）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T08:36:02.457

这是因为您在 HTML 中有一个错误，更好的是，您记下 ID 的方式。# 用于在 CSS 或 jQuery (#+Name) 中引用 ID-Name。在 HTML 中，它只是名称，如下所示：

```
$('#imgform').append("<center><input type='submit' value='Upload' id='imgupload' onclick='showUploadedItem()'/>"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T08:36:48.800

你不需要`#`在id之前给。从代码中删除它

改成这样，

```
$('#imgform').append("<center><input type='submit' value='Upload' id='imgupload' onclick='showUploadedItem()'/>"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T08:37:09.390

从您的按钮 ID 中删除 # 将解决该问题。

# android - 如何将 setTop() 用于 LinearLayout

> ID：14558200
> 
> 赞同：0
> 
> 时间：2013-01-28T08:32:12.417
> 
> 标签：android

我想将 LineatLayout 放在屏幕底部。这个 LineraLayout 在他的父 Linearlayout 里面。我得到了屏幕的高度并根据它，我知道 setTop() 中的值是什么。但是 setTop() 没有做任何事情。我在单击按钮后使用 setTop，而不是在 onCreate 方法中，因此主布局已完全加载。

我尝试使用 `LinearLayout.LayoutParams parms = new LinearLayout.LayoutParams(width,height);` ，但在这种情况下没有 setTop 方法。

这是我现在的布局![在此处输入图像描述](../Images/e3b65bd0afb423cb66a11dbbf7f6819b.png)

这就是我想要实现的

![在此处输入图像描述](../Images/459572d6143673bc4769aba9d99ef627.png)

这是我的 xml 文件的一部分

```
<!-- parent-->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@xml/background_generale"
    android:gravity="top|right|center"
    android:orientation="vertical"
    tools:context=".MainActivity" >

        <!-- child-->
        <LinearLayout
         android:id="@+id/layoutBottom"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/mainLayoutRaddoppiaBackground"
        android:gravity="bottom|center_horizontal"
        android:weightSum="1" >

       ...here there are the 4 buttons you can see in the image...

       <!-- end child-->
        </LinearLayout> 

<!-- end parent-->
 </LinearLayout> 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:40:52.627

```
parms = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,   
RelativeLayout.LayoutParams.WRAP_CONTENT);
parms.addRule(RelativeLayout.ALIGN_BOTTOM, RelativeLayout.TRUE); 
```

这应该将元素放在其父元素的底部。如果您希望布局填充其父级的全部内容，请尝试更改`WRAP_CONTENT`为`MATCH_PARENT`. 但实际上在顶部对齐布局的部分是`rule`我添加的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:22:25.030

看看这个布局是否有帮助：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/holo_grey"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="45dp"
    android:background="@color/blue_dark" >
</LinearLayout>

<LinearLayout
    android:id="@+id/llContent"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:gravity="center"
    android:orientation="vertical" >

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:onClick="openAdmin"
        android:text="ABC" />

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:onClick="openTasks"
        android:text="XYZ" />
</LinearLayout>
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="45dp"
    android:background="@color/blue_dark" >
</LinearLayout>
</LinearLayout> 
```

# ios - AFHTTPREquestOperation 在 iPad 上不起作用

> ID：14558209
> 
> 赞同：-1
> 
> 时间：2013-01-28T08:32:42.050
> 
> 标签：ios, objective-c, ipad, ftp, afnetworking

我正在尝试在我的 iPad 上编译应用程序。我正在使用 AFNetworking 来获取我的 FTP 上的文件列表。应用程序在模拟器上运行，但是当我在 iPad 上启动它时，我得到（空）文件内容和列表。这是代码：

```
- (void) getListOfFiles {

NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL  URLWithString:@"ftp://anonymous@ftphost/"]];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

NSString *path = [[[NSBundle mainBundle]resourcePath]stringByAppendingPathComponent:@"list"];

operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:YES];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, NSHTTPURLResponse *response) {
         NSLog(@"Success %@",operation.response);
}
            failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                NSLog(@"Error: %@", [error localizedDescription]);
                                 }];

[operation start];
NSString *content  = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding  error:nil];

NSLog (@"%@",content);
} 
```

所以 variable content = (null) 只在 iPad 上，在 Simulator 上一切都很好。请帮忙，我已经失去了任何希望）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:09:32.567

默认情况下，AFHTTP*Operations 都是异步的。

这是正确的，因为同步（阻塞）调用阻塞了主线程

您正在开始操作并在之后直接获取文件内容。这不能可靠地工作，因为开始调用是 ASYNC 并且只启动操作但不等待它

**要么等待**它......**这很糟糕**，因为它阻塞了线程：

```
[operation start];
[operation waitUntilDone]; 
```

或者**更好**地修改 getFiles 以**异步工作**：

```
- (void) getListOfFiles {
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL  URLWithString:@"URL"]];
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

    NSString *path = [[[NSBundle mainBundle]resourcePath]stringByAppendingPathComponent:@"list"];
    operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:YES];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, NSHTTPURLResponse *response) {
             NSLog(@"Success %@",operation.response);
             NSString *content  = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding  error:nil];
             NSLog (@"%@",content);
        }
        failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSLog(@"Error: %@", [error localizedDescription]);
        }];

    [operation start];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T00:11:49.147

好的，问题解决了。我无法写入捆绑目录，所以我需要使用下一个代码：

```
NSArray *paths = NSSearchPathForDirectoiesDomain(NSDocumentDirectory,NSCachesDirectory,YES);
NSString *path = [[paths objectAtIndex:0] stingByAppendingPathComponent:@"list"]; 
```

# php - 在 php 和 dart 之间发送数据

> ID：14558210
> 
> 赞同：2
> 
> 时间：2013-01-28T08:32:43.907
> 
> 标签：php, ajax, post, dart

所以我正在尝试使用 AJAX 在 dart 客户端和 php 服务器端之间进行通信。因为直接执行是不可能的。我将 dart 编译为 javascript，然后在 apache 服务器上运行它。

客户端生成json数据，但服务器没有响应

飞镖代码

```
import 'dart:html';
import 'dart:json';

void main() {
  query("#clicker").on.click.add(callServer);

}

void callServer(Event event) {
  var data ={ 'name':"sendname"}
  ,jsondata=stringify(data);
  print(jsondata);

  var req = new HttpRequest();
  req.open('post','http://localhost:8080/darttest/server.php',true);
  //req.setRequestHeader('Content-type','application/json');
  req.send(jsondata);
  print(req.responseText);
} 
```

php方面我只是回显收到的内容

```
<?php

$name = $_POST['name'];
echo $name;

?> 
```

这是我第一次尝试 dart 编程，所以请告诉我这种方法是否可行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:40:09.163

localhost:8080 是否同时为静态 Dart（作为 JS）和 php 提供服务？如果没有，您可能会遇到这个`access-control-allow-origin`问题（这是一个浏览器安全问题）。

这可以防止一个站点将日期发布到另一个站点。

解决方法：

1.  确保提供 php 的站点返回正确的 CORS 标头：[http ://enable-cors.org/server.html](http://enable-cors.org/server.html)
2.  从同一 URL (localhost:8080) 提供静态 Dart/JS 文件

有关更多信息，请阅读以下内容：

*   [https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)
*   [带有 Dart 的 CORS，我如何让它工作？](https://stackoverflow.com/questions/10456591/cors-with-dart-how-do-i-get-it-to-work)
*   [创建机器人/爬虫](https://stackoverflow.com/questions/14130591/creating-a-bot-crawler/14135194#14135194)

**此处描述了更新**解决方法 3（对于 Chrome / Dartium）： [https ://groups.google.com/a/dartlang.org/d/msg/misc/kg13xtD​​7aXA/uxeXXrw3CG8J](https://groups.google.com/a/dartlang.org/d/msg/misc/kg13xtD7aXA/uxeXXrw3CG8J)

> 您可以在 chrome.exe 中添加参数“--disable-web-security”来禁用跨域检查。

（当然，这只在你开发的时候有用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:44:32.963

要阅读响应，您必须将代码放入回调中`readyStateChange`：

```
var req = new HttpRequest();
req.open('post','http://localhost:8080/darttest/server.php',true);
req.on.readyStateChange.add((e){
  if (req.readyState == HttpRequest.DONE && req.status == 200){
    print(req.responseText);
  }
});
req.send(jsondata); 
```

使用您的代码，当您尝试读取响应时，未处理 http 请求。您必须等待请求完成才能读取响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:06:48.977

这不是在 dart 和 php 之间发送数据。这是从 dart 向 php 发送数据！！！

# android - 重启时的 AlarmManager

> ID：14558213
> 
> 赞同：0
> 
> 时间：2013-01-28T08:32:51.893
> 
> 标签：android, startup, alarmmanager

我正在尝试创建一个警报，该警报会在设备重新启动时自行重置。这是正确的方法吗（假设 Android 清单是正确的）？该代码似乎使我的应用程序崩溃。

```
public class AlarmReceiver extends BroadcastReceiver {
     Context cxt;

 @Override
 public void onReceive(Context context, Intent intent) {
     cxt = context;
    if (intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)){
        Calendar updateTime = Calendar.getInstance();
        updateTime.setTimeZone(TimeZone.getDefault());
        updateTime.set(Calendar.HOUR_OF_DAY, 0);
        updateTime.set(Calendar.MINUTE, 0);

        AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(context, AlarmReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 1234, 
            intent, PendingIntent.FLAG_CANCEL_CURRENT);
        am.setRepeating(AlarmManager.RTC_WAKEUP, updateTime.getTimeInMillis(), AlarmManager.INTERVAL_FIFTEEN_MINUTES, pendingIntent);
    }
} 
```

这是Logcat：

```
01-28 00:35:00.263: E/AndroidRuntime(31269): FATAL EXCEPTION: main
01-28 00:35:00.263: E/AndroidRuntime(31269): java.lang.RuntimeException: Unable to start receiver com.neelsomani.meds.AlarmReceiver: java.lang.NullPointerException
01-28 00:35:00.263: E/AndroidRuntime(31269):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2265)
01-28 00:35:00.263: E/AndroidRuntime(31269):    at android.app.ActivityThread.access$1600(ActivityThread.java:139)
01-28 00:35:00.263: E/AndroidRuntime(31269):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1300)
01-28 00:35:00.263: E/AndroidRuntime(31269):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-28 00:35:00.263: E/AndroidRuntime(31269):    at android.os.Looper.loop(Looper.java:137)
01-28 00:35:00.263: E/AndroidRuntime(31269):    at android.app.ActivityThread.main(ActivityThread.java:4918)
01-28 00:35:00.263: E/AndroidRuntime(31269):    at java.lang.reflect.Method.invokeNative(Native Method)
01-28 00:35:00.263: E/AndroidRuntime(31269):    at java.lang.reflect.Method.invoke(Method.java:511)
01-28 00:35:00.263: E/AndroidRuntime(31269):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
01-28 00:35:00.263: E/AndroidRuntime(31269):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
01-28 00:35:00.263: E/AndroidRuntime(31269):    at dalvik.system.NativeStart.main(Native Method)
01-28 00:35:00.263: E/AndroidRuntime(31269): Caused by: java.lang.NullPointerException
01-28 00:35:00.263: E/AndroidRuntime(31269):    at com.neelsomani.meds.AlarmReceiver.onReceive(AlarmReceiver.java:40)
01-28 00:35:00.263: E/AndroidRuntime(31269):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2258) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:35:57.797

这段代码看起来不错，你能给我们更多关于崩溃的细节吗？

您是否在 AndroidManifest.xml 中声明了这个 broadcastReceiver ？

```
 <receiver android:name="MyAlarmReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:39:28.860

```
AlarmManager am = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        Intent intent1 = new Intent(context, AlarmReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
                0, intent1, PendingIntent.FLAG_UPDATE_CURRENT);
        Calendar calendar1 = Calendar.getInstance();
        calendar1.set(Calendar.HOUR_OF_DAY, (int) h);
        calendar1.set(Calendar.MINUTE, (int) m); 
```

请使用这个 PendingIntent.FLAG_UPDATE_CURRENT

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:39:53.580

你的上下文是错误的。传递正确的上下文，

```
AlarmManager am = (AlarmManager) cxt.getSystemService(Context.ALARM_SERVICE); 
```

改成

> AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);

# google-apps-script - 用于根据单元格值自动为整行着色的 Google 电子表格脚本

> ID：14558218
> 
> 赞同：0
> 
> 时间：2013-01-28T08:33:25.450
> 
> 标签：google-apps-script, google-sheets

*我正在接管一个小组成员名单，该名单已经*通过几代“领导层”传承下来，我无法弄清楚......

电子表格*用于*根据第 10 列中单元格的值自动更新每行的颜色（来自 6 个不同的选项） - 但神秘地停止了这样做。

我一直在看那里的剧本，但我不太明白 - 有人有什么建议吗？将不胜感激！

```
function colorRow(r){

  // only uncomment for Debuging
  //r = 2;

  var sheet = SpreadsheetApp.getActiveSheet();

  var dataRange = sheet.getRange(r, 1, 1, sheet.getLastColumn());

  // will get the row
  var row = dataRange.getValues()[0];

  // change the row[8] to row[?] where ? is your column number
  var cellValue = row[10];

  if(cellValue == "1"){
    dataRange.setBackgroundRGB(255, 0, 255);
  }
  else if(cellValue == "2"){
    dataRange.setBackgroundRGB(255, 153, 0);
  }
  else if(cellValue == "3"){
    dataRange.setBackgroundRGB(153, 204, 255);
  }
  else if(cellValue == "4"){
    dataRange.setBackgroundRGB(0, 255, 0);
  }
  else if(cellValue == "5"){
    dataRange.setBackgroundRGB(0, 255, 255);
  }
  else if(cellValue == "6"){
    dataRange.setBackgroundRGB(255, 255, 0);
  }

  // not sure if I need to flush...
  SpreadsheetApp.flush(); 
}

function onEdit(event)
{
  colorRow(event.source.getActiveRange().getRowIndex());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:30:12.783

您说颜色取决于第 10 列的内容，但代码显示 `var cellValue = row[10];`

数组索引为 0，这意味着您正在获取第 11 列的内容...（电子表格中的列索引为 1）

那不是问题吗？

**编辑：**当您查看脚本时，我还建议在您的`IF`陈述中使用不同的条件，因为您使用的条件非常脆弱：如果有人在数字之前或之后键入空格，它将失败......我什么d 是这样的：

```
 if(cellValue.toString().match("1") == "1"){ 
```

它会“捕获”“1”值，即使它在其单元格中并不孤单，并且会达到 9 的值（之后你会混淆 10、11 等......）（但这只是一条建议...;）

# android - 用于读取 apk 文件的 Java 库（用于构建应用商店等应用程序）

> ID：14558227
> 
> 赞同：0
> 
> 时间：2013-01-28T08:34:16.900
> 
> 标签：android, apk, java

我的要求是开发一个类似 Play 商店的应用程序。开发人员将在哪里上传他们的 Android .apk 文件。

只能通过应用程序包路径检查移动应用程序端。这需要手动获取包路径或使用库读取应用程序的 .apk 文件。

a）让开发者输入应用程序包路径不是最佳实践，b）我在网上搜索，发现没有任何方法可以读取 .apk 文件。

我不确定我的方法是否正确，如果我遗漏了什么，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:37:59.717

有一个 api/toolkit [android-apktool](http://ibotpeaches.github.io/Apktool/)。用于读取 .apk 和 xml 元数据

那应该有帮助

# datagridview - 如何使用 datareader 将数据插入（合并）到现有数据表

> ID：14558231
> 
> 赞同：0
> 
> 时间：2013-01-28T08:34:29.923
> 
> 标签：datagridview, insert, merge, datareader

我想做的是生成用户添加到datagridview中的产品列表，但是当我使用datatable.load（datareader）时，它总是重置datatable的先前值，我也尝试了datatable.load（datareader，upinsert ) 但同样的事情再次发生。

```
If e.KeyCode = Keys.Return Then
            cn = connectdb("MSMS.mdb", "")
            Dim cmd2 As New OleDbCommand("SELECT Code,Product,Pack,Batch,Expiration,Free,MRP,Rate,CST,VAT,CD,SD FROM product WHERE Product ='" + DataGridView2.SelectedRows(0).Cells(0).Value.ToString + "'", cn)
            Dim dr2 As OleDbDataReader
            Dim dt As New DataTable
            dr2 = cmd2.ExecuteReader()
            dt.Load(dr2, LoadOption.Upsert)
            DataGridView3.DataSource = dt 
```

我想在每次按下 Enter 和最后一个结果时插入数据表？

# jquery - jQuery 不适用于 Easing 和 Fancybox 插件

> ID：14558232
> 
> 赞同：0
> 
> 时间：2013-01-28T08:34:34.840
> 
> 标签：jquery, wordpress, fancybox, easing

我已经环顾了一个小时，试图解决这个问题。

[我在这里](http://www.emmaelisabethnielsen.dk/)运行最新版本的 Wordpress

我*认为*这与 jQuery 被错误地调用有关，但它可能很简单，我已经研究这个太久了，我可能正在监督最简单的事情。-.-

我在标题部分使用 wp head，取消注册 Wordpress jQuery 并添加我自己的。它曾经是来自谷歌 API 的那个，现在在实际正文中被称为下面 - 一种使事情正常进行的绝望尝试。

我还下载了在 Easing Plugins 网站上找到的旧 1.2 版本，这是一次恶毒而疯狂的尝试。

如果有人能打我的头，最好是用硬的东西，澄清我的编码缺陷的愚蠢性，那就太好了。

谢谢！

此外，没有提到它直到一周前才真正起作用。

**编辑：** 这是functions.php - 也许这会有所帮助？

```
<?php
function emmatheme_scripts() {

//deregisters the Wordpress included jquery
wp_deregister_script( 'jquery' );

//adds own jquery
wp_register_script( 'jquery2', 'http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js');
wp_enqueue_script( 'jquery2' );
wp_enqueue_script( 'easing', get_template_directory_uri() . '/js/easing.js', 'jquery2' );

//Fancybox
wp_enqueue_script( 'fancy2', get_template_directory_uri() . '/js/fb2.js', 'jquery2' );
wp_enqueue_script( 'fancy3', get_template_directory_uri() . '/js/fb3.js', 'jquery2' );

}    

add_action('init', 'emmatheme_scripts');

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:42:34.967

请试试这个：

```
(function($){
            $(document).ready(function(){
                $("a.gallery_fancybox]").fancybox({
                    'transitionIn'      : 'elastic',
                    'transitionOut'     : 'elastic',
                    'titlePosition'     : 'inside',
                    'speedIn'                   :   500, 
                    'speedOut'              :   300,
                    'titleFormat'           : function(title, currentArray, currentIndex, currentOpts) {
                        return '<span id="fancybox-title-inside">&copy; Fotografi af Thomas Kj&aelig;r Nielsen </span>';
                    },
                    'onComplete':   function() {
                        clearTimeout(jQuery.fancybox.slider);
                        jQuery.fancybox.slider=setTimeout("jQuery.fancybox.next()",2000);
                    }               });
            });
        })(jQuery); 
```

也从你的代码中删除它：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> 
```

因为您已经在站点的标题中包含了 jquery 文件。

问候。

# c - 在线判断系统 - 为什么我在这个帖子中得到了错误的答案？

> ID：14558234
> 
> 赞同：-10
> 
> 时间：2013-01-28T08:34:55.703
> 
> 标签：c, algorithm, dynamic-programming

原文页面：[http ://acm.whu.edu.cn/learn/problem/detail?problem_id=1036](http://acm.whu.edu.cn/learn/problem/detail?problem_id=1036)

这应该是一个简单的动态规划问题。我想出解决方案如下：

```
int main(void)
{
    double d[501];
    int i;
    d[0] = d[1] = 1.;
    d[2] = 2.;
    for(i = 3; i<=500; i++)
        d[i] = d[i-1] + d[i-2] + d[i-3];

    int n;
    while(scanf("%d", &n) == 1) {
        if(n == 0) return 0;
        printf("%.0lf\n", d[n]);
    }

    return 0;
} 
```

但是提交后报错答案。我真的不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:37:38.950

双精度不够

你应该使用高精度来解决它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:03:35.350

可能是小数点。`printf("%.0lf\n", 1.0);`将打印`1.0`，但系统可能会等待`1`。

# android - onActivityResult 从相机返回，Intent null

> ID：14558240
> 
> 赞同：19
> 
> 时间：2013-01-28T08:35:16.730
> 
> 标签：android, android-camera, android-camera-intent

我按照[Android 开发网站上相机上的说明进行操作](http://developer.android.com/guide/topics/media/camera.html#custom-camera)

我只是启动相机意图，而不是构建自己的相机。

拍照后返回结果的处理示例代码如下。

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            // Image captured and saved to fileUri specified in the Intent
            Toast.makeText(this, "Image saved to:\n" +
                    data.getData(), Toast.LENGTH_LONG).show();
        } else if (resultCode == RESULT_CANCELED) {
            // User cancelled the image capture
        } else {
            // Image capture failed, advise user
        }
    }

    if (requestCode == CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            // Video captured and saved to fileUri specified in the Intent
            Toast.makeText(this, "Video saved to:\n" +
                    data.getData(), Toast.LENGTH_LONG).show();
        } else if (resultCode == RESULT_CANCELED) {
            // User cancelled the video capture
        } else {
            // Video capture failed, advise user
        }
    }
} 
```

`resultCode`可以，但`data`始终为 NULL，这会导致 NPE。我查看了sdcard，照片真的保存在那里。任何提示？非常感谢。

更新：根据要求提供 logcat 信息：

```
 01-28 19:39:00.547: ERROR/AndroidRuntime(24315): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to resume activity {com.example.CameraTest/com.example.CameraTest.MyCamera}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=100, result=-1, data=null} to activity {com.example.CameraTest/com.example.CameraTest.MyCamera}: java.lang.NullPointerException
    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2455)
    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2483)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1997)
    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3362)
    at android.app.ActivityThread.access$700(ActivityThread.java:127)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1162)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4511)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=100, result=-1, data=null} to activity {com.example.CameraTest/com.example.CameraTest.MyCamera}: java.lang.NullPointerException
    at android.app.ActivityThread.deliverResults(ActivityThread.java:2991)
    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2442)
    ... 13 more
    Caused by: java.lang.NullPointerException
    at com.example.CameraTest.MyCamera.onActivityResult(MyCamera.java:71)
    at android.app.Activity.dispatchActivityResult(Activity.java:4654)
    at android.app.ActivityThread.deliverResults(ActivityThread.java:2987)
    ... 14 more 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-10-18T16:08:02.777

您的代码的问题是：

```
data.getData() 
```

此调用不会从返回**的**`Intent`. `data`它从返回的字段中获取`Intent`可能是`null`.

您需要从返回的内容中获取额外的信息，`Intent`如下所示：

```
data.getExtras().get("data"); 
```

其他一些答案已经表明了这一点，嵌入在大量其他代码中。这使得很难真正看到问题所在。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-22T09:14:19.643

[这是一个类似问题的答案](https://stackoverflow.com/a/4989163/1092403)。好像是三星手机的问题。。。

基本上，如果您有这样的[代码](http://developer.android.com/guide/topics/media/camera.html#intent-image)来创建 Intent：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE); // create a file to save the image
intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name

// start the image capture Intent
startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

然后，在 中`onActivityResult`，**替换`data.getData()`为`fileUri.toString()`，它将解决您的问题。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-21T09:06:56.107

使用@KJ50 的解决方案，并使用`savedInstanceState`以确保您不会得到空值。

```
/**
     * Here we store the file url as it will be null after returning from camera
     * app
     */
    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        // save file url in bundle as it will be null on screen orientation
        // changes
        outState.putParcelable("file_uri", fileUri);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);

        // get the file url
        fileUri = savedInstanceState.getParcelable("file_uri");
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T08:59:49.267

试试下面的代码：

> ```
>  Button m_btnCamera;
>   ImageView m_ivCaptureImage;
>   String m_curentDateandTime;
>   String m_imagePath;
>   Bitmap m_bitmap;
> 
>    //Start camera to caputre image.
>  Intent m_intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
>   m_intent.putExtra(MediaStore.EXTRA_OUTPUT, getImageUri());
>   startActivityForResult(m_intent, TAKE_PHOTO_CODE);
> 
>  private Uri getImageUri() throws CustomException
>     {
>     Uri m_imgUri = null;
>     File m_file;
>     try
>     {
>         SimpleDateFormat m_sdf = new SimpleDateFormat("yyyyMMdd_HHmmss");
>         m_curentDateandTime = m_sdf.format(new Date());
>         m_imagePath = File.getPath() + File.separator + m_curentDateandTime + ".jpg";
>         m_file = new File(m_imagePath);
>         m_imgUri = Uri.fromFile(m_file);
>     }
>     catch (Exception p_e)
>     {}      
>     return m_imgUri;        
> }
> 
>  @Override
>   protected void onActivityResult(int requestCode, int resultCode, Intent data)
>   {
>   super.onActivityResult(requestCode, resultCode, data);
>  if (requestCode == TAKE_PHOTO_CODE && resultCode == RESULT_OK)
>     {
>         m_bitmap = ImageHelper.scaleImage(m_imagePath, 200, 200);
>             m_bitmap = ImageHelper.rotateImage(m_bitmap, true, m_rotate);
>             m_ivCaptureImage.setImageBitmap(m_bitmap);
>     }
>   }
> } 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-28T17:14:25.110

试试这个

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    switch (requestCode) {
        case PICK_IMAGE_ID:

            Bitmap bitmap = ImagePicker.getImageFromResult(this.getActivity(), resultCode, data);

            if(data!=null){
                //set image view
            }
            break;
        default:
            super.onActivityResult(requestCode, resultCode, data);
            break;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-06T06:10:29.523

**此代码将帮助您**

getData() 方法仅在 Android 版本高于 M 时返回数据，否则返回 null 结果。

```
if (resultCode == Activity.RESULT_OK) {

                //Check Android version, as intent.getData() will return data only if v is above or equal to M otherwise the data will be null
                if (Build.VERSION.SDK_INT == Build.VERSION_CODES.M) {
                    Uri selectedImageURI = imageReturnedIntent.getData();
                    Toast.makeText(getActivity(), "URI Path:" + selectedImageURI, Toast.LENGTH_LONG).show();
                } else {
                    Bitmap photo = (Bitmap) imageReturnedIntent.getExtras().get("data");
                    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                    photo.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
                    String path = MediaStore.Images.Media.insertImage(getActivity().getContentResolver(), photo, "Title", null);
                    Uri selectedImageURI = Uri.parse(path);
                    Toast.makeText(getActivity(), "URI Path:" + selectedImageURI, Toast.LENGTH_LONG).show();
                }
            } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-28T09:30:09.753

试试下面的代码.....

```
btn_capture.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            Intent cameraIntent = new  Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
            startActivityForResult(cameraIntent, CAMERA_REQUEST); 
        }
    });
 protected void onActivityResult(int requestCode, int resultCode, Intent data){

             if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  
                 Bitmap photo = (Bitmap) data.getExtras().get("data"); 
                 img.setImageBitmap(photo);
             } 
          }

    } 
```

最后，您将以下代码添加到清单中

```
 <uses-feature android:name="android.hardware.camera"></uses-feature> 
```

# gwt - 具有显式尺寸的 GWT 精灵不会缩放

> ID：14558245
> 
> 赞同：2
> 
> 时间：2013-01-28T08:35:32.097
> 
> 标签：gwt, css-sprites

我们在尝试将 GWT 精灵用于不同大小的按钮时遇到问题，使用相同的背景图像，如下所示：

```
@Source("background.png")
@ImageOptions(width=200,height=50)  
ImageResource wideButton();

@Source("background.png")
@ImageOptions(width=100,height=50)  
ImageResource narrowButton(); 
```

在 css 中，我们像这样使用图像资源：

```
@sprite .wideButton {
gwt-image: "wideButton"; }

@sprite .wideButton {
gwt-image: "narrowButton"; } 
```

这会生成具有适当尺寸的 DIV 元素，但是当这些尺寸小于图像的原始宽度和高度时，它不会正确显示图像：图片被裁剪以适合，而不是缩放。在css中设置宽高并不能解决显示问题。

```
@sprite .wideButton {
gwt-image: "narrowButton"; 
    width: 100px;
    height: 50px;
} 
```

有没有办法让这项工作，或者精灵根本就没有设计成以这种方式使用？提前致谢。

# java - 春季休眠：org.hibernate.exception.SQLGrammarException

> ID：14558246
> 
> 赞同：1
> 
> 时间：2013-01-28T08:35:37.213
> 
> 标签：java, sql, spring, hibernate

**我的DAO层代码如下：**

```
package com.app.dao;
import javax.annotation.Resource;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.springframework.orm.hibernate3.HibernateTemplate;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;
import org.springframework.stereotype.Repository;
import com.app.pojo.InterviewerPojo;

@Repository("interviewer_details_dao")
public class InterviewerDetailsDaoImpl implements InterviewerDetailsDao {

    @Resource(name="sessionFactory")
    private SessionFactory factory;
    /*private HibernateTemplate template;
    public void setSessionFactory(){
        template = new HibernateTemplate(factory);
    }*/
    /*private HibernateTemplate template = new HibernateTemplate(sessionFactory);*/
    @Override
    public void saveInterviewDetails(InterviewerPojo interviewerPojo) {

/*      Session sess = factory.getCurrentSession();
        try{
            sess.getTransaction().wasCommitted();
        Transaction trans = sess.beginTransaction();
        System.out.println("a");
        sess.saveOrUpdate(interviewerPojo);
        sess.getTransaction().commit();}
        catch(Exception e){
            throw e;
        }*/
        System.out.println("b");
        factory.getCurrentSession().save(interviewerPojo);
    /*  System.out.println(interviewerPojo);
        template.saveOrUpdate(interviewerPojo);
        System.out.println("b");*/

        System.out.println("done");

    }

} 
```

**如果我按以下方式从数据库中获取值，则运行与上面相同的代码** sessionFactory.getCurrentSession().createQuery("select m from emp m).list; **但是当我编写另一个页面来插入值时，它就有问题** **如您所见，我使用了相同的概念，我通过上面的查询** 从数据库中获取的另一个模型（pojo）填充了模型（POJO）类**，现在调试到“template.saveOrUpdate”并抛出如下异常**

> org.hibernate.exception.SQLGrammarException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 org.hibernate.engine 的 org.hibernate.exception.internal.SQLStateConverter.convert(SQLStateConverter.java:100) 的第 1 行的“休眠序列的值”附近使用正确的语法.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125) 在 org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110) 在 org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler .continueInvocation(AbstractStatementProxyHandler.java:129) at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81) at $Proxy24.executeQuery(Unknown Source) at org.hibernate.id.SequenceGenerator。407) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) 在 org.apache.tomcat.util.net 的 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) .JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312) at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread。 run(Unknown Source) Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; 检查与您的 MySQL 服务器版本相对应的手册，以在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 的 sun.reflect 的第 1 行的“hibernate_sequence 的值”附近使用正确的语法。

* * *

POJO源代码：

```
package com.app.pojo; 
import java.io.Serializable; 
import javax.persistence.*; 

@SuppressWarnings("serial") 
@Entity @Table(name="interviewer") 
public class InterviewerPojo implements Serializable {
    private int eid;

    private int vid; 

    @Id @GeneratedValue(strategy=GenerationType.SEQUENCE) 
    private int i_eid; 

    private String i_name; 

    private String password; 

    public int getEid() { 
        return eid; 
    } 

    public void setEid(int eid) { 
        this.eid = eid; 
    } 
} 
```

休眠配置：

```
<property name="hibernateProperties"> 
    <props>
        <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
        <prop key="hibernate.formatsql">true</prop>
        <prop key="hibernate.showsql">true</prop>
        <prop key="hibernate.hbm2ddl.auto">validate</prop>
    </props> 
</property> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:53:30.123

在您的错误日志中，它表明您正在使用 MySQL。但是，您配置的 Hibernate 方言是 HSQLDialect。

> org.hibernate.dialect.HSQLDialect

你应该删除这个方言属性，Hibernate 可以通过 JDBC 驱动程序自动检测正确的方言。或者您自己修改为正确的方言。

# c# - 如何按包含数字的字符串字段对对象进行排序

> ID：14558247
> 
> 赞同：1
> 
> 时间：2013-01-28T08:35:38.940
> 
> 标签：c#, sorting

我有一堂课：

```
public class Essay
    {   
            public int ID{get;set;}
            public string Name{get;set;}
    } 
```

和论文类型列表

```
List<Essay> essays=new List<Essay>(); 
```

name 属性上包含数字和字母。

我想按名称属性对列表进行排序

例如：

```
essays=
{1,"ccccc"},
{2,"aaaa"},
{3,"bbbb"},
{4,"10"},
{5,"1"},
{6,"2"},
{7,"1a"} 
```

我想排序：

```
essays=
{2,"aaaa"},
{3,"bbbb"},
{1,"ccccc"},
{5,"1"},
{7,"1a"},
{6,"2"},
{4,"10"} 
```

我怎么做？

感谢所有人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T08:49:59.787

该名称混合了字符和数字，如果您只是按字母顺序排序，则会导致排序不便。

您似乎更喜欢的是*自然排序*，其中文本中的数字被真正识别为数字，而排序短则以数字为基础应用它们。

该算法的一些实现可以在[Jeffs 网页上](http://www.codinghorror.com/blog/2007/12/sorting-for-humans-natural-sort-order.html)找到。

我最喜欢的是[Dave](http://www.davekoelle.com/files/AlphanumComparator.cs)的那个：

```
/*
 * The Alphanum Algorithm is an improved sorting algorithm for strings
 * containing numbers.  Instead of sorting numbers in ASCII order like
 * a standard sort, this algorithm sorts numbers in numeric order.
 *
 * The Alphanum Algorithm is discussed at http://www.DaveKoelle.com
 *
 * Based on the Java implementation of Dave Koelle's Alphanum algorithm.
 * Contributed by Jonathan Ruckwood <jonathan.ruckwood@gmail.com>
 * 
 * Adapted by Dominik Hurnaus <dominik.hurnaus@gmail.com> to 
 *   - correctly sort words where one word starts with another word
 *   - have slightly better performance
 * 
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
 *
 */
using System;
using System.Collections;
using System.Text;

/* 
 * Please compare against the latest Java version at http://www.DaveKoelle.com
 * to see the most recent modifications 
 */
namespace AlphanumComparator
{
    public class AlphanumComparator : IComparer
    {
        private enum ChunkType {Alphanumeric, Numeric};
        private bool InChunk(char ch, char otherCh)
        {
            ChunkType type = ChunkType.Alphanumeric;

            if (char.IsDigit(otherCh))
            {
                type = ChunkType.Numeric;
            }

            if ((type == ChunkType.Alphanumeric && char.IsDigit(ch))
                || (type == ChunkType.Numeric && !char.IsDigit(ch)))
            {
                return false;
            }

            return true;
        }

        public int Compare(object x, object y)
        {
            String s1 = x as string;
            String s2 = y as string;
            if (s1 == null || s2 == null)
            {
                return 0;
            }

            int thisMarker = 0, thisNumericChunk = 0;
            int thatMarker = 0, thatNumericChunk = 0;

            while ((thisMarker < s1.Length) || (thatMarker < s2.Length))
            {
                if (thisMarker >= s1.Length)
                {
                    return -1;
                }
                else if (thatMarker >= s2.Length)
                {
                    return 1;
                }
                char thisCh = s1[thisMarker];
                char thatCh = s2[thatMarker];

                StringBuilder thisChunk = new StringBuilder();
                StringBuilder thatChunk = new StringBuilder();

                while ((thisMarker < s1.Length) && (thisChunk.Length==0 ||InChunk(thisCh, thisChunk[0])))
                {
                    thisChunk.Append(thisCh);
                    thisMarker++;

                    if (thisMarker < s1.Length)
                    {
                        thisCh = s1[thisMarker];
                    }
                }

                while ((thatMarker < s2.Length) && (thatChunk.Length==0 ||InChunk(thatCh, thatChunk[0])))
                {
                    thatChunk.Append(thatCh);
                    thatMarker++;

                    if (thatMarker < s2.Length)
                    {
                        thatCh = s2[thatMarker];
                    }
                }

                int result = 0;
                // If both chunks contain numeric characters, sort them numerically
                if (char.IsDigit(thisChunk[0]) && char.IsDigit(thatChunk[0]))
                {
                    thisNumericChunk = Convert.ToInt32(thisChunk.ToString());
                    thatNumericChunk = Convert.ToInt32(thatChunk.ToString());

                    if (thisNumericChunk < thatNumericChunk)
                    {
                        result = -1;
                    }

                    if (thisNumericChunk > thatNumericChunk)
                    {
                        result = 1;
                    }
                }
                else
                {
                    result = thisChunk.ToString().CompareTo(thatChunk.ToString());
                }

                if (result != 0)
                {
                    return result;
                }
            }

            return 0;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:09:38.090

答案有几个要素。

第一部分是能够使用 Sort() 和 lambda 比较方法对 List 进行就地排序。这可以通过使用 IList 的扩展方法和帮助程序“ComparisonDelegator”类来解决。结合这些，可以将 lambda 传递给 List.Sort()。

第二部分已在此处的另一篇文章（我已投票）中得到解决，并且我在此答案中无耻地粘贴到 AlphanumComparator 类中的代码。

（作为旁注，我应该指出，该线程中其他地方发布的所有 Linq 示例都会复制列表。这对于短列表很好，但如果您的列表很长，则可能会导致性能问题。提出的解决方案这里不复制列表。）

把它们放在一起，我们得到以下代码，它输出：

```
ID=2, Name=aaaa
ID=3, Name=bbbb
ID=1, Name=ccccc
ID=5, Name=1
ID=7, Name=1a
ID=6, Name=2
ID=4, Name=10 
```

以及完整的代码示例（可编译为控制台应用程序）：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Globalization;
using System.Text;

namespace Demo
{
    public static class Program
    {
        public static void Main()
        {
            var list = new List<Essay>
            {
                new Essay {ID=1, Name="ccccc"},
                new Essay {ID=2, Name="aaaa"},
                new Essay {ID=3, Name="bbbb"},
                new Essay {ID=4, Name="10"},
                new Essay {ID=5, Name="1"},
                new Essay {ID=6, Name="2"},
                new Essay {ID=7, Name="1a"}                
            };

            var comp = new AlphanumComparator();

            list.Sort((lhs, rhs) => comp.Compare(lhs.Name, rhs.Name));

            foreach (var essay in list)
            {
                Console.WriteLine("ID={0}, Name={1}", essay.ID, essay.Name);
            }
        }
    }

    public class Essay
    {
        public int ID
        {
            get;
            set;
        }

        public string Name
        {
            get;
            set;
        }
    }

    /// <summary>Extensions for IList{T}</summary>

    public static class ListExt
    {
        /// <summary> Sorts an IList{T} in place. </summary>

        public static void Sort<T>(this IList<T> list, Comparison<T> comparison)
        {
            ArrayList.Adapter((IList)list).Sort(new ComparisonDelegator<T>(comparison));
        }
    }

    /// <summary>
    /// Provides a mechanism for easily converting a Comparison&lt;&gt; delegate (or lambda) to an IComparer&lt;&gt;.
    /// This can be used for List.BinarySearch(), for example.
    /// </summary>
    /// <typeparam name="T">The type of items to be compared.</typeparam>

    public sealed class ComparisonDelegator<T>: IComparer<T>, IComparer
    {
        /// <summary>Create from a Comparison&lt;&gt; delegate.</summary>
        /// <param name="comparison">A Comparison&lt;&gt; delegate.</param>

        public ComparisonDelegator(Comparison<T> comparison)
        {
            this._comparison = comparison;
        }

        /// <summary>Implements the IComparer.Compare() method.</summary>

        public int Compare(T x, T y)
        {
            return _comparison(x, y);
        }

        /// <summary>Implements the IComparer.Compare() method.</summary>

        public int Compare(object x, object y)
        {
            return _comparison((T)x, (T)y);
        }

        /// <summary>Used to store the Comparison delegate.</summary>

        private readonly Comparison<T> _comparison;
    }

    /// <summary>
    /// Special class to sort strings "naturally", 
    /// but to place non-numeric items *before* numeric items.
    /// </summary>

    public class AlphanumComparator : IComparer
    {
        private enum ChunkType {Alphanumeric, Numeric};
        private bool InChunk(char ch, char otherCh)
        {
            ChunkType type = ChunkType.Alphanumeric;

            if (char.IsDigit(otherCh))
            {
                type = ChunkType.Numeric;
            }

            if ((type == ChunkType.Alphanumeric && char.IsDigit(ch))
                || (type == ChunkType.Numeric && !char.IsDigit(ch)))
            {
                return false;
            }

            return true;
        }

        public int Compare(object x, object y)
        {
            String s1 = x as string;
            String s2 = y as string;
            if (s1 == null || s2 == null)
            {
                return 0;
            }

            int thisMarker = 0, thisNumericChunk = 0;
            int thatMarker = 0, thatNumericChunk = 0;

            while ((thisMarker < s1.Length) || (thatMarker < s2.Length))
            {
                if (thisMarker >= s1.Length)
                {
                    return -1;
                }
                else if (thatMarker >= s2.Length)
                {
                    return 1;
                }
                char thisCh = s1[thisMarker];
                char thatCh = s2[thatMarker];

                StringBuilder thisChunk = new StringBuilder();
                StringBuilder thatChunk = new StringBuilder();

                while ((thisMarker < s1.Length) && (thisChunk.Length==0 ||InChunk(thisCh, thisChunk[0])))
                {
                    thisChunk.Append(thisCh);
                    thisMarker++;

                    if (thisMarker < s1.Length)
                    {
                        thisCh = s1[thisMarker];
                    }
                }

                while ((thatMarker < s2.Length) && (thatChunk.Length==0 ||InChunk(thatCh, thatChunk[0])))
                {
                    thatChunk.Append(thatCh);
                    thatMarker++;

                    if (thatMarker < s2.Length)
                    {
                        thatCh = s2[thatMarker];
                    }
                }

                int result = 0;
                // If both chunks contain numeric characters, sort them numerically
                if (char.IsDigit(thisChunk[0]) && char.IsDigit(thatChunk[0]))
                {
                    thisNumericChunk = Convert.ToInt32(thisChunk.ToString());
                    thatNumericChunk = Convert.ToInt32(thatChunk.ToString());

                    if (thisNumericChunk < thatNumericChunk)
                    {
                        result = -1;
                    }

                    if (thisNumericChunk > thatNumericChunk)
                    {
                        result = 1;
                    }
                }
                else if (char.IsDigit(thisChunk[0]) && !char.IsDigit(thatChunk[0]))
                {
                    return 1; // Ensure that non-numeric sorts before numeric.
                }
                else if (!char.IsDigit(thisChunk[0]) && char.IsDigit(thatChunk[0]))
                {
                    return -1;  // Ensure that non-numeric sorts before numeric.
                }
                else
                {
                    result = thisChunk.ToString().CompareTo(thatChunk.ToString());
                }

                if (result != 0)
                {
                    return result;
                }
            }

            return 0;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:08:59.540

您可以将数字字符更改为具有更高 ascii 值的字符，然后执行 a`orderby` 并恢复。

```
List<Essay> essays = new List<Essay>();
        essays.Add(new Essay(){ID = 1, Name = "ccccc"});
        essays.Add(new Essay(){ID = 2, Name = "aaaa"});
        essays.Add(new Essay(){ID = 3, Name = "bbbb"});
        essays.Add(new Essay(){ID = 4, Name = "10"});
        essays.Add(new Essay(){ID = 5, Name = "1"});
        essays.Add(new Essay(){ID = 6, Name = "2"});
        essays.Add(new Essay(){ID = 7, Name = "1a"});

        essays.ForEach(q => Replace(q));
        var result = essays.OrderBy(q => q.Name).ToList();
        result.ForEach(q => Revert(q)); 
```

相关功能：

```
public void Replace(Essay x)
    {
        x.Name = x.Name.Replace('0', ((char)240));
        x.Name = x.Name.Replace('1', ((char)241));
        x.Name = x.Name.Replace('2', ((char)242));
        x.Name = x.Name.Replace('3', ((char)243));
        x.Name = x.Name.Replace('4', ((char)244));
        x.Name = x.Name.Replace('5', ((char)245));
        x.Name = x.Name.Replace('6', ((char)246));
        x.Name = x.Name.Replace('7', ((char)247));
        x.Name = x.Name.Replace('8', ((char)248));
        x.Name = x.Name.Replace('9', ((char)249));
    }

    public void Revert(Essay x)
    {
        x.Name = x.Name.Replace(((char)240), '0');
        x.Name = x.Name.Replace(((char)241), '1');
        x.Name = x.Name.Replace(((char)242), '2');
        x.Name = x.Name.Replace(((char)243), '3');
        x.Name = x.Name.Replace(((char)244), '4');
        x.Name = x.Name.Replace(((char)245), '5');
        x.Name = x.Name.Replace(((char)246), '6');
        x.Name = x.Name.Replace(((char)247), '7');
        x.Name = x.Name.Replace(((char)248), '8');
        x.Name = x.Name.Replace(((char)249), '9');

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T09:10:24.283

我创建了一个 IComparer 实现并使用 OrderBy 对列表进行排序。我使用正则表达式来捕获开头的数字，`Name`如果它们存在，则使用它们来订购项目，如果不存在，则只需使用字符串比较来比较名称。以数字开头的名称总是出现在所有以字母开头的名称之后。它给出了您要求的输出。

```
public class EssayNameComparer : IComparer<string>
{
    private Regex _digits = new Regex("(\\d+)(.*)");

    public int Compare(string a, string b)
    {
        Match matcha = _digits.Match(a);
        Match matchb = _digits.Match(b);

        if (matcha.Success && matchb.Success)
        {
            int numa = int.Parse(matcha.Groups[1].Value);
            int numb = int.Parse(matchb.Groups[1].Value);
            return numa.CompareTo(numb);
        }
        else if (matcha.Success)
        {
            return 1;
        }
        else if (matchb.Success)
        {
            return -1;
        }
        else
        {
            return string.Compare(a, b);
        }            
    }
}

public class Program
{
    public static void Main(string[] args)
    {
        List<Essay> essays= new List<Essay>() { 
            new Essay { ID = 1, Name = "ccccc"},
            new Essay { ID = 2, Name = "aaaa"},
            new Essay { ID = 3, Name = "bbbb"},
            new Essay { ID = 4, Name = "10"},
            new Essay { ID = 5, Name = "1"},
            new Essay { ID = 6, Name = "2"},
            new Essay { ID = 7, Name = "1a"}
        };

        foreach(Essay essay in essays.OrderBy(e => e.Name, new EssayNameComparer()))
        {
            Console.WriteLine(essay.Name);
        }
    }
} 
```

输出：

*   啊啊啊
*   bbbb
*   cccc
*   1
*   1a
*   2
*   10

# php - 子文件夹路由不起作用

> ID：14558250
> 
> 赞同：0
> 
> 时间：2013-01-28T08:35:46.700
> 
> 标签：php, codeigniter

我在路由文件时遇到问题。我需要访问其中的`new_account`子文件夹和控制器...

这是结构：

```
controllers
---new_account
---------step1.php
---------step2.php
---accounts.php 
---pages.php 
```

这是我`.htaccess`位于外面的文件的内容`application`

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

这是我的`routes.php`

```
$route['default_controller'] = 'pages/show_page/home';
$route['pages/(:any)'] = 'pages/show_page/$1';
$route['accounts'] = 'accounts';
$route['new_account/(:any)'] = "new_account";
$route['(:any)'] = 'pages/show_page/$1';
$route['404_override'] = ''; 
```

我也用`$config['uri_protocol'] = 'REQUEST_URI';`

我的`pages`控制器工作正常，即使是直接链接，例如`<?php echo base_url(); ?>home`重定向到`../pages/home.php`.

`accounts.php`控制器调用`new_account/user_home.php`包含指南和指向实际表单的链接。该链接是`<?php base_url();>new_account/step1`并且它不起作用应该有，因为`$route['new_account/(:any)'] = "new_account";`.

每当我单击指向 的链接时`new_account/step1`，我都会被重定向到主页。

我真的很想访问`app_name/new_account/step1`目录中的其他人...我错过了这些文件中的某些内容还是一个不可或缺的步骤？

笔记：

我还通过插入文件夹尝试了[这个子文件夹路由扩展](https://stackoverflow.com/questions/5213115/route-to-multiple-sub-folders-in-codeigniter)，但没有发生任何变化。然后我将其移入，但我得到的只是服务器错误。`MY_Router.php``application/libraries``application/core`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:41:41.827

在你的评论这一行`routes.php`：

```
$route['new_account/(:any)'] = "new_account"; 
```

Codeigniter 默认路由应该可以工作，因为您在文件夹中`http://YOUR_SITE/new_account/step1`有一个名为的控制器文件。还要检查你的控制器里面的类的名称是`step1.php``new_account``step1.php``Step1`

# vb.net - 显示来自 form_load 事件处理程序的表单并显示进度条

> ID：14558255
> 
> 赞同：0
> 
> 时间：2013-01-28T08:36:08.103
> 
> 标签：vb.net

以下是一些我不知道如何在 .Net 中正确完成的事情，但我确信肯定存在一些解决方案。

我有一个像对话框一样打开的表单，在（那个）form_load 下我有一些数据检查，然后我调用一个可能需要 10 秒来处理的过程。
在此期间，直到我的流程未完成，我的表单才会显示，并且我可以在我的主表单中看到一些“垃圾菜单”，而不是那些正在处理的新表单中的进度条。

我看到的第二件事可能接近第一个问题是，在我的某些表单中，当显示某些过程的结果但程序（用于进度条）正确制作时，进度条不会结束。似乎进度条在某些异步任务中工作。

如何解决这些问题并在我的程序开始之前显示我的表格？如何让进度条显示可靠的值？或者我可以说更好，就像它在 VB6 中工作一样？

对于第一个问题，我尝试：

```
Me.Activate
or 
Me.Refresh

Call myProcedureWithProgressBar(myArgs) 
```

来自 Form_Load 但没有结果。
表格在我的程序完成时显示，但应该在之前显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:57:41.970

事件在显示**之前**`Form_Load`执行代码。您可以创建一个并使用它在表单加载后自动执行代码：**`Form``Timer`**

 **```
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    Timer1.Start()
End Sub

Private Sub OnFormLoaded(sender As Object, e As EventArgs) Handles Timer1.Tick
    Timer1.Enabled = False

    '...
End Sub 
```

并确保您像我一样停止该方法上的计时器，并确保您阻止用户做一些可能干扰执行的事情（单击按钮，关闭表单......）。希望能帮助到你。

* * *

关于这个`ProgressBar`问题，如果没有更多信息或代码，我不知道可能是什么问题。也许你可以尝试这样的事情：

```
Public Sub UpdateProgressBar(ByVal cont As Integer, ByVal max As Integer, ByRef objTarget As ProgressBar)
    Dim dProgress As Double = cont * 100 / max
    objTarget.Value = CInt(dProgress)
    objTarget.Refresh()
End Sub 
```**

# c# - 在 DLL“opengl32.dll”中找不到名为“glBindFramebuffer”的入口点。在 MonoGame 3.0 中

> ID：14558256
> 
> 赞同：4
> 
> 时间：2013-01-28T08:36:20.937
> 
> 标签：c#, .net, xna, mono, monogame

最近我在笔记本电脑上安装了 MonoGame 3.0。我从项目模板中拿了一个乐队 New "MonoGame Windows OpenGL Project" 并尝试运行它，我得到了这个异常。

```
Unable to find an entry point named 'glBindFramebuffer' in DLL 'opengl32.dll'. 
```

例外在这里：

```
 public Game1()
 : base()
 {
   graphics = new GraphicsDeviceManager(this);<----|Unable to find an entry point named 'glBindFramebuffer' in DLL 'opengl32.dll' 
```

我已安装：

```
MonoDevelop 3.0.6
gtk-sharp-2.12.10.win32
Opentk-2010-10-06
XNAGS40_Setup
jdk-7u9-windows-x64
MonoGame3.0 
```

我在用 ：

```
Windows 7 x64
Visual studio 2012
ASUS A52F Laptop
Graphic : Integrated Intel® GMA HD 
```

有什么需要安装的吗？

注意：如果我使用 MonoGame 2.5.1.0，那么一切正常。此异常仅在我安装 MonoGmae 30 时发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:06:45.303

MonoGame 3.0 需要 OpenGL 3。尝试更新您的图形驱动程序，如果这不起作用，那么除非您购买新的笔记本电脑，否则您将不走运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T09:44:46.773

这是一个[已知问题](https://github.com/mono/MonoGame/issues/998)。您可以尝试查找已安装的驱动程序并检查其[OpenGL 功能](http://feedback.wildfiregames.com/report/opengl/)。看起来驱动程序只支持 OpenGL 2.1，而且可能[不会添加](https://github.com/mono/MonoGame/issues/811)支持。

如果对您有用，您可以尝试[将实例化包装在 try/catch](https://github.com/mono/MonoGame/pull/1004)中。

祝你好运。

# c++ - 在 C++ 中打开文件 - getline 在第二次迭代中失败

> ID：14558258
> 
> 赞同：1
> 
> 时间：2013-01-28T08:36:23.220
> 
> 标签：c++, xcode, file-io

我无法弄清楚为什么 getline 在一个 X-Code 项目中工作，而在另一个项目中却没有。错误“没有调用'getline'的匹配函数。当我制作单个cpp文件时，它编译没有问题。

```
 // reading a text file
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main () {
      string line;
      ifstream myfile ("example.txt");
      if (myfile.is_open())
      {
        while ( myfile.good() )
        {
          getline (myfile,line);
          cout << line << endl;
        }
        myfile.close();
      }

  else cout << "Unable to open file"; 

  return 0;
} 
```

我真的很感激一些帮助。我只是在学习，上面的例子来自我的测试书。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T08:39:58.943

代码嘈杂且不正确。正确的标准成语是这样的：

```
#include <fstream>   // for std::ifstream
#include <string>    // for std::getline and std::string

std::ifstream myfile("example.txt");

if (!myfile) { /* error, die */ }

for (std::string line; std::getline(myfile, line); )
{
    std::cout << "Read one line: '" << line << "'\n";
} 
```

**正确性：**

*   *在使用输入之前*，您必须检查输入操作是否成功。否则可能是UB，当然永远不会正确。

*   [感谢@James 指出这一点：]`good()`不检查文件是否已打开。您可以使用`!myfile.fail()`or `myfile.is_open()`，但不要打扰（见下文）。

**噪音：**

*   构造`ifstream`函数获取文件名并已经打开文件。用它。

*   在其`ifstream`析构函数中进行清理，无需显式执行此操作。完成后立即使用严格的范围来关闭文件。

*   `line`如果您不需要它，请不要泄漏到环境范围中。

*   不需要`good()`（或任何正确的替代方案）。只需在布尔上下文中评估`ifstream`对象以查看文件是否已成功打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:17:15.397

有一个实际的错误：你使用的结果`getline` 没有测试它是否成功。编写内部循环的常用方法是：

```
std::string line;
while ( std::getline( myfile, line ) ) {
    std::cout << line << std::endl;
} 
```

其他更多的是风格问题，尽管有些问题确实享有几乎普遍的共识：例如，不要在需要之前定义变量（因此，定义 of `line`应该紧接在循环之前）。错误输出转到`std::cerr`，而不是`std::out. And in case of an error, you should return`EXIT_FAILURE 0` `, and not`。

人们也普遍接受您不必显式关闭输入（因为析构函数会处理它，并且您已经成功读取了所有内容）。对于其他人来说，共识并不完整：`using namespace std;`例如，我永远不会使用 ，并且我永远不会将代码 `else`放在同一行之后。如果 an 中较短的条件`if...else`是第一个，我还发现代码更具可读性，所以我会写：

```
if ( !myfile.is_open() ) {
    std::cout << "Unable to open file" << std::endl
    returnCode = EXIT_FAILURE;
} else {
    std::string line;
    while ( std::getline( myfile, line ) ) {
        std::cout << line << std::endl;
    }
    returnCode = EXIT_SUCCESS;
} 
```

除了更复杂的事情，我会将文件的处理分解为一个单独的函数。所以我最终会得到类似的东西：

```
if ( myfile.is_open() ) {
    process( myfile );
} else {
    //  error handling...
} 
```

但是您似乎暗示您在 `std::getline`未发布的代码中遇到问题。有两种明显的可能解释：您没有包含`<string>`，或者您忘记了`std::`前面的 。还有其他可能的解释，但我们必须实际查看无法准确说明问题所在的代码。

# c++ - c++ 如何在编译时创建我自己的警告

> ID：14558260
> 
> 赞同：4
> 
> 时间：2013-01-28T08:36:29.657
> 
> 标签：c++, visual-studio-2010, compilation, compiler-errors, static-assert

我想在编译时而不是在预处理器中创建自己的警告（因为我已经看到了一些答案）假设我们有：

```
class A
{
private:
    explicit A(A const& other);
}; 
```

现在如果用户这样做：

`A first;`

接着：

`A second(first);`

他会得到一个错误，即未实现复制构造或其他什么......请记住我的代码中有很多继承......以及将我引向 H 文件 A 是在其中实现的，而不是我尝试过的地方使用复制构造函数...

所以..而不是编译器的默认警告，我想创建自己的.. 类似..“你不能使用复制构造函数”

帮助？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:41:03.077

使用`static_assert`带有用户定义消息的 a 将在编译期间触发此错误消息

```
class A
{
private:
    A() {}

    explicit A(A const& /* other */) 
    { 
        static_assert(false, "You cannot use copy constructor"); 
    }
};

int main()
{
    A first;    
    A second(first); // compile error
} 
```

[LiveWorkSpace](http://liveworkspace.org/code/3S7pV3%243)上的输出

请注意，这将产生错误而不是警告。但是，几乎总是最好使用“警告作为错误”编译器选项，并明确（即用注释记录）禁用您知道无害的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:40:28.163

没有预处理器，只使用标准 C++，这是不真实的。您可以使用`static_assert`，但这不是警告。

# branch - git-svn 新分支重新获取整个历史记录

> ID：14558261
> 
> 赞同：1
> 
> 时间：2013-01-28T08:36:37.060
> 
> 标签：branch, git-svn, history, fetch

我想用 git-svn 创建一个大型 svn 存储库的 git 克隆。然而，我的主要问题是，每当创建一个新分支时，都会重新下载整个历史记录：“找到可能的分支点”并从 r1 开始下载（'直到 40000 ...）。我如何（以及为什么我必须）告诉 git 跳过已经获取的提交？

谢谢， Lőrinc

# sql-server - 带支票 | 现有数据检查执行的 NOCHECK 选项被忽略

> ID：14558263
> 
> 赞同：10
> 
> 时间：2013-01-28T08:36:45.350
> 
> 标签：sql-server, visual-studio, compiler-warnings, static-analysis, database-project

我正在使用 Visual Studio 2012，带有一个 SQL 数据库项目并针对该数据库运行数据库分析，它会引发以下警告： `WITH CHECK | NOCHECK OPTION FOR EXISTING DATA CHECK ENFORCEMENT IS IGNORED.`

我对错误的理解是，当脚本运行时，现有数据的`CHECK`and`NOCHECK`约束将被忽略（在每种情况下，对我来说，它都是一个`ALTER TABLE`）。

因此，我的问题是，为什么会忽略检查约束？

## 警告 ID 号

警告 ID 似乎已更改，因此我将两者都包括在下面，以便将来轻松搜索。
在 Visual Studio 2010 中，警告 ID 为：SQL03159
在 Visual Studio 2012 中，警告 ID 为：SQL70588

## 相关信息

[ALTER TABLE [dbo].[MyTable] 检查约束 [FK_MyTable_SomeCol]](https://stackoverflow.com/questions/9974506/alter-table-dbo-mytable-check-constraint-fk-mytable-somecol)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-12T01:07:46.677

就我而言，这发生在我导入的具有如下结构的脚本中：

```
CREATE TABLE [dbo].[ELMAH_Error]
(
    [ErrorId]     UNIQUEIDENTIFIER NOT NULL,
) 
GO
ALTER TABLE [dbo].[ELMAH_Error] WITH NOCHECK ADD 
    CONSTRAINT [PK_ELMAH_Error] PRIMARY KEY NONCLUSTERED ([ErrorId]) ON [PRIMARY]
GO 
```

当我查看上面的代码时，[`WITH NOCHECK`](http://msdn.microsoft.com/en-us/library/ms190273.aspx)看起来是多余的，因为表应该只是刚刚创建，因此是空的。所以我怀疑这个代码分析警告指出了这种冗余。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-07-06T16:33:51.560

这与冗余无关，而是项目处于期望状态或 DDL 模式的理想状态这一事实。

将项目应用于现有数据库时，流程（发布、dacpac 部署等）将在应用增量时强制执行检查约束。因此，with check 和 with nocheck 在定义表和后续约束的项目 DDL 中没有意义。

CHECK 和 NOCHECK 唯一受尊重的地方是部署前和部署后脚本。

编辑：

如果您曾经从 dacpac 生成脚本，您会注意到事情是分阶段发生的。

当涉及到应用新约束时，它们总是添加 WITH NOCHECK。最后阶段是将 WITH CHECK 应用于所有需要它的约束，在运行后部署脚本之后。这允许在各个阶段（包括部署前和部署后脚本阶段）进行最大程度的定制。

# binding - 清理 JavaFX 属性侦听器和绑定（内存泄漏）

> ID：14558266
> 
> 赞同：22
> 
> 时间：2013-01-28T08:37:04.383
> 
> 标签：binding, memory-leaks, listener, javafx

我还没有找到这两个问题的简单答案：

1.  是否必须在删除属性实例之前删除侦听器（侦听器不在其他任何地方使用）？

    ```
    BooleanProperty bool = new SimpleBooleanProperty();
    bool.addListener(myListener);
    bool.removeListener(myListener); // is it necessary to do this?
    bool = null; 
    ```

2.  在删除属性实例之前，我是否必须取消绑定单向有界属性？

    ```
    BooleanProperty bool = new SimpleBooleanProperty();
    bool.bind(otherBool);
    bool.unbind(); // is it necessary to do this?
    bool = null; 
    ```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-07-15T13:05:14.353

# 情况1

鉴于`myListener`“未在其他任何地方使用”，因此我假设是一个 [method-] 局部变量，答案是**否定**的。但在一般情况下，答案大多是*no*但有时可能是*yes*。

只要`myListener`是强可达的，那么它就永远不会有资格进行终结，它将继续消耗内存。例如，如果`myListener`是“正常”声明的`static`变量（*Java 中的所有“正常”引用都是*强*引用*），就会出现这种情况。但是，如果`myListener`是局部变量，那么在当前方法调用返回后，该对象将不再可达，`bool.removeListener(myListener)`有点无意义的过度工程。观察者和观察者`Observable`都超出了范围，最终将被最终确定。[我自己的博客文章](http://blog.martinandersson.com/the-dilemma-of-weak-listeners-in-javafx/)中关于这个答案的引述可能会描绘出更好的画面：

> 盒子是否知道里面的猫并不重要，如果你把盒子扔到海里。如果盒子够不到，猫也够不到。

## 理论

为了完全理解这里的情况，我们必须提醒自己 Java 对象的生命周期（[source](http://docs.oracle.com/javase/8/docs/api/java/lang/ref/package-summary.html#reachability)）：

> 如果某个对象可以被某个线程访问而无需遍历任何引用对象，则该对象是强可达的。创建它的线程可以强烈访问新创建的对象。[..] 一个对象是弱可达的，如果它[不是] 强[..] 可达但可以通过遍历一个弱引用来达到。当对弱可达对象的弱引用被清除时，该对象就有资格进行终结。

在静态变量的情况下，只要类被加载，它们就总​​是可以访问的，因此是可以访问的。如果我们不希望静态引用成为阻碍垃圾收集器完成工作的对象，那么我们可以声明变量以使用 a[`WeakReference`](http://docs.oracle.com/javase/8/docs/api/java/lang/ref/WeakReference.html)代替。JavaDoc 说：

> 弱引用对象 [..] 不会阻止它们的引用对象被最终化、最终化，然后被回收。[..]假设垃圾收集器在某个时间点确定一个对象是弱可达的。那时它将自动清除对该对象的所有弱引用 [..]。同时它将声明所有以前的弱可达对象都是可终结的。

## 显式管理

为了说明，假设我们编写了一个 JavaFX 空间模拟游戏。每当`Observable`一颗行星进入宇宙飞船观察者的视野时，游戏引擎就会向该行星注册宇宙飞船。很明显，每当行星离开视野时，游戏引擎也应该通过使用[`Observable.removeListener()`](http://docs.oracle.com/javase/8/javafx/api/javafx/beans/Observable.html#removeListener-javafx.beans.InvalidationListener-). 否则，随着飞船继续在太空中飞行，内存就会泄漏。最终，游戏无法处理 50 亿颗观测到的行星，并且会以[`OutOfMemoryError`](http://docs.oracle.com/javase/8/docs/api/java/lang/OutOfMemoryError.html).

请注意，对于绝大多数 JavaFX 侦听器和事件处理程序，它们的生命周期与它们的生命周期是平行的，`Observable`因此应用程序开发人员无需担心。例如，我们可以构造一个[`TextField`](http://docs.oracle.com/javase/8/docs/api/java/awt/TextField.html)并在文本字段中注册`textProperty`一个验证用户输入的侦听器。只要文本字段存在，我们就希望听众持续存在。迟早，文本字段不再使用，当他被垃圾收集时，验证侦听器也被垃圾收集。

## 自动管理

继续空间模拟示例，假设我们的游戏对多人游戏的支持有限，并且所有玩家都需要互相观察。也许每个玩家都有一个本地的击杀指标计分板，或者他们可能需要观察广播的聊天消息。原因不是这里的重点。当玩家退出游戏时会发生什么？显然，如果监听器没有被明确管理（*移除*），那么退出的玩家将没有资格获得最终确定。其他玩家将保持对离线玩家的强烈参考。显式删除侦听器仍然是一个有效的选项，并且可能是我们游戏的最首选选项，但假设它感觉有点突兀，我们希望找到一个更巧妙的解决方案。

我们知道，只要他们在线，游戏引擎就会对所有在线玩家保持强烈的参考。所以我们希望宇宙飞船只在游戏引擎保持强引用的情况下监听彼此的变化或事件。如果您阅读“理论”部分，那么`WeakReference`听起来肯定是一个解决方案。

然而，仅仅在 WeakReference 中包装一些东西并不是完整的解决方案。它很少是。确实，当对“referent”的最后一个强引用被设置为`null`或变得不可访问时，该referent 将有资格进行垃圾收集（*假设无法使用 a 来[`SoftReference`](http://docs.oracle.com/javase/8/docs/api/java/lang/ref/SoftReference.html)*访问该referent ）。但是 WeakReference 仍然存在。应用程序开发人员需要添加一些管道，以便将 WeakReference 本身从他放入的数据结构中删除。如果没有，那么我们可能已经降低了内存泄漏的严重性，但内存泄漏仍然存在，因为动态添加了弱引用也会消耗内存。

幸运的是，JavaFX 添加了接口[`WeakListener`](http://docs.oracle.com/javase/8/javafx/api/javafx/beans/WeakListener.html)和类[`WeakEventHandler`](http://docs.oracle.com/javase/8/javafx/api/javafx/event/WeakEventHandler.html)作为“自动删除”的机制。所有相关类的构造函数都接受客户端代码提供的真正的侦听器/处理程序，但它们使用弱引用存储侦听器/处理程序。

如果您查看 的 JavaDoc `WeakEventHandler`，您会注意到该类实现了`EventHandler`，因此 WeakEventHandler 可以在任何需要 EventHandler 的地方使用。同样，a 的已知实现`WeakListener`可以在任何预期`InvalidationListener`a 或 a的地方使用。`ChangeListener`

如果您查看 的源代码`WeakEventHandler`，您会注意到该类基本上只是一个包装器。当他的所指对象（*真正的事件处理程序*）被垃圾收集时，调用`WeakEventHandler`时根本不做任何事情来“停止工作” [`WeakEventHandler.handle()`](http://docs.oracle.com/javase/8/javafx/api/javafx/event/WeakEventHandler.html#handle-T-)。The`WeakEventHandler`不知道他与哪个对象挂钩，即使他知道，事件处理程序的删除也不是同质的。尽管如此，所有已知的实现类都`WeakListener`具有竞争优势。当它们的回调被调用时，它们被隐式或显式地提供了对`Observable`它们注册的引用。因此，当 a 的所指对象`WeakListener`被垃圾回收时，最终`WeakListener`实现将确保将其`WeakListener`自身从`Observable`.

如果还不清楚，我们的太空模拟游戏的解决方案是让游戏引擎使用对所有在线宇宙飞船的强引用。当一艘宇宙飞船上线时，所有其他在线宇宙飞船都会使用弱监听器向新玩家注册，例如[`WeakInvalidationListener`](http://docs.oracle.com/javase/8/javafx/api/javafx/beans/WeakInvalidationListener.html). 当玩家下线时，游戏引擎会删除他对玩家的强引用，玩家将有资格进行垃圾回收。游戏引擎不必费心将离线玩家作为其他玩家的侦听器显式移除。

# 案例2

**不。**为了更好地理解我接下来要说的内容，请先阅读我的案例 1 答案。

[`BooleanPropertyBase`](http://docs.oracle.com/javase/8/javafx/api/javafx/beans/property/BooleanPropertyBase.html)存储对`otherBool`. 这本身并不会导致`otherBool`始终可访问，因此可能会导致内存泄漏。当`bool`变得无法访问时，其所有存储的引用也是如此（*假设它们没有存储在其他任何地方*）。

`BooleanPropertyBase`也可以通过将自身添加为`Observer`您绑定到的属性的一个来工作。但是，它通过将自身包装在一个几乎与`WeakListener`我的案例 1 答案中描述的 s 完全相同的类中来实现这一点。所以一旦你作废`bool`，它被删除只是时间问题`otherBool`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-19T16:36:57.613

我完全同意**案例 1**的答案，但**案例 2**有点棘手。`The bool.unbind()`打电话是必要的。如果省略，它**确实**会导致小的内存泄漏。

如果运行以下循环，应用程序最终将耗尽内存。

```
BooleanProperty p1 = new SimpleBooleanProperty();
while(true) {
    BooleanProperty p2 = new SimpleBooleanProperty();
    p2.bind(p1)
} 
```

BooleanPropertyBase 本质上不使用真正的 WeakListener（[WeakListener](http://docs.oracle.com/javase/8/javafx/api/javafx/beans/WeakListener.html)接口的实现），它使用的是半生不熟的解决方案。所有“p2”实例最终都会被垃圾回收，但是对于每个“p2”，持有空 WeakReference 的侦听器将永远保留在内存中。这同样适用于所有属性，不仅是 BooleanPropertyBase。 [这里](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=8089305)有详细解释，他们说它在 Java 9 中已修复。

在大多数情况下，您不会注意到这种内存泄漏，因为它只为每个未解除绑定的绑定留下了几十个字节。但在某些情况下，它给我带来了真正的麻烦。一个很好的例子是经常更新的表格的表格单元格。然后这些细胞会一直重新绑定到不同的属性，这些残留在记忆中的东西会迅速积累。

# xml - 从 nodejs 解析 XML 数据

> ID：14558281
> 
> 赞同：4
> 
> 时间：2013-01-28T08:38:02.627
> 
> 标签：xml, node.js, parsing

嗨，我已经使用 JSOn.parse() 在 nodejs 编码中解析了 json 响应。同样，如何解析 xml 数据？我不知道关于 xml，因为我是处理它的新手。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:55:14.297

没有内置的 xml 解析器，你需要一个像 node-xml-lite 这样的 npm 模块：[https ://npmjs.org/package/node-xml-lite](https://npmjs.org/package/node-xml-lite)

# zend-framework - 如何仅获取一个字段不为空的文档

> ID：14558283
> 
> 赞同：0
> 
> 时间：2013-01-28T08:38:23.923
> 
> 标签：zend-framework, lucene, zend-search-lucene

我正在尝试创建一个查询以排除在一个特定字段中具有空/空值的所有文档。

执行此操作的查询语法或编程方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:20:37.040

您可以使用在两侧都打开的所需范围查询，例如：

```
+field:[* TO *] 
```

假设要排除的文档在索引中没有价值，这可能就足够了。

如果出现某种形式的默认值，您还必须排除该值，例如：

```
+field:[* TO *] -field:NULL 
```

# c# - PostgreSQL：如何在 PostgreSQL 数据库中只插入一个反斜杠

> ID：14558284
> 
> 赞同：1
> 
> 时间：2013-01-28T08:38:31.260
> 
> 标签：c#, postgresql, npgsql

有谁知道如何将单个反斜杠存储到 PostgreSQL 数据库中？

我正在使用 C# 和 Nqgsql 访问 PostgreSQL，我的情况是我想将“1\\0\\0\\0\\1\\0”存储到数据库中，并且 DB 字段中的预期字符串将为“ 1\0\0\0\1\0"，即我在db字段中只需要一个反斜杠，因此当我从d​​b获取数据时，它仍然是"1\\0\\0\\0\ \1\\0" 在内存中。但我的问题是当内存字符串为“1\\0\\0\\0\\1\\0”时，存储到db字段中的字符串也是“1\\0\\0\\0\\1 \\0”，那么当我从 db 获取数据时，内存字符串将为“1\\\\0\\\\0\\\\0\\\\1\\\\0”。

我在c#代码中使用的变量设置为如下格式： var a = "1\\0\\0\\0\\1\\0"; var b = @"1\0\0\0\1\0";

当存储到 db 中时，两个变量中的反斜杠似乎都加倍了。如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:55:29.677

您应该通过使用参数化查询来完全避免这种情况。请参阅 Npgsql 中的示例[：用户手册](http://npgsql.projects.pgfoundry.org/docs/manual/UserManual.html)在查询部分中*使用参数。*

但是如果你真的想构造一个文字查询，那么你可以使用`E''`语法，像这样：

```
var sql = @"insert into table_name (column_name) values (E'1\\0\\0\\0\\1\\0')"; 
```

此语法独立于服务器或连接配置，例如`standard_conforming_strings`. 但它是 Postgres 特有的。

如果您希望您的代码在不同的数据库引擎之间可移植，您可以`set standard_conforming_strings=on`在连接后立即发出。然后这个工作：

```
var sql = @"insert into table_name (column_name) values ('1\0\0\0\1\0')"; 
```

此选项自 PostgreSQL 9.1 起默认开启，自 8.2 起可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T18:15:53.830

我也有这个问题。我能够通过进入数据库的配置并将“standard_conforming_strings”更改为OFF来解决它。

# ruby-on-rails-3 - 使用 RefineryCMS 的多个帐户？

> ID：14558288
> 
> 赞同：1
> 
> 时间：2013-01-28T08:38:56.953
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, refinerycms

我正在考虑将 RefineryCMS 用于多个帐户，因此每个用户都可以创建自己的页面、自己的图像 .. 等

我需要知道的是：

1.  我将如何为每个用户安装 RefineryCMS（例如通过他的 id）？没有这个我也可以工作，但组织路线真的更好。

2.  将 user_id 添加到 Refinery 页面模型中，我能否在管理页面中仅显示某些用户 id 的页面？是吗？

3.  配置 Dragonfly 以在 amazon s3 上使用不同的存储桶？

有没有人尝试过这个？那我还会考虑什么？谢谢

# java - Java：将日期时间数据插入表中

> ID：14558289
> 
> 赞同：10
> 
> 时间：2013-01-28T08:38:56.730
> 
> 标签：java, sql, sql-server, datetime, jdbc

我正在尝试将当前日期和时间插入到 MS-SQL 数据库中的变量中。我使用这种格式：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS"); 
Calendar cal = Calendar.getInstance();  
System.out.println(dateFormat.format(cal.getTime())); 
```

结果我得到了这个 2013-01-28 09:29:37.941

我在数据库中的字段已定义`datetime`，正如我在其他具有相同字段的表中看到的那样，日期和时间的写法与 2011-07-05 14:18:33.000 完全相同。

我尝试使用在 java 程序中执行的查询插入数据库，但出现此错误

> SQL 异常：状态：S0003 消息：varchar 数据类型到值的日期时间数据类型的转换超出范围。错误：242

我的查询是这样的：

```
query = "INSERT INTO Companies CreatedOn"+ 
         "VALUES ('" + dateFormat.format(cal.getTime()) + "')" 
```

但我不明白我做错了什么。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-28T08:45:55.020

根据[错误描述](http://www.sql-server-helper.com/error-messages/msg-242.aspx)，您在数据库中插入了不正确的类型。请参阅[JDBC 到 MSSQL](http://msdn.microsoft.com/en-us/library/ms378878.aspx)。您应该将 Calendar 转换为[Timestamp](http://docs.oracle.com/javase/7/docs/api/java/sql/Timestamp.html)。

尝试使用：

```
PrepareStatement statement 
    = connection.prepareStatement("INSERT INTO Companies CreatedOn VALUES(?)");
java.sql.Timestamp timestamp = new java.sql.Timestamp(cal.getTimeInMillis());
statement.setTimestamp(1, timstamp);
int insertedRecordsCount = statement.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T08:51:36.640

首先，不要使用字符串连接。你有没有想过[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)？

如何做到这一点的正确方法是使用准备好的语句：

想法是您使用占位符定义语句，然后为这些占位符定义值。

有关更多详细信息，请参阅[@Taky](https://stackoverflow.com/questions/14558289/java-insert-into-a-table-datetime-data#14558378)的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T08:43:09.013

`dateFormat#format`此方法返回格式化字符串而不是`Date`对象。数据库字段是`DateTime`并且预计`java.sql.Timestamp`不会`String`根据[docs](http://docs.oracle.com/javase/7/docs/api/java/sql/Date.html)插入那里。

> 为了符合 SQL DATE 的定义，由 java.sql.Date 实例包装的毫秒值必须通过在实例关联的特定时区中将小时、分钟、秒和毫秒设置为零来“规范化” .

在查询中尝试`java.sql.Timestamp`使用 object 而不是 String，我建议您使用`PreparedStatement`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:43:35.133

这是因为您试图将字符串日期值保存到日期类型数据库字段。

将其转换为数据数据类型

您还可以使用[日期时间](http://www.karaszi.com/SQLServer/info_datetime.asp)“未分隔”格式`yyyymmdd hh:mm:ss`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T08:57:16.483

您可以使用[Joda](http://joda-time.sourceforge.net)框架来处理日期/时间。它将自己的日期/时间类型映射到 Hibernate/SQL 类型没有问题。当您在 HQL 查询中设置参数时，joda 带有正确的类型映射。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T09:13:03.267

If you want to store current date and time then you should use **MYSQL** inbuilt method **NOW()**. for brief documentation refer [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html) . so your code will be like.

```
INSERT INTO Companies CreatedOn VALUES(NOW())" 
```

However If you want to do it using java Date-util then it should be

```
Calendar cal = Calendar.getInstance(); 
java.sql.Timestamp timestamp = new Timestamp(cal.getTimeInMillis()); 
```

# shell - 从命令行如何在 shell 脚本中调用用户定义的函数

> ID：14558295
> 
> 赞同：0
> 
> 时间：2013-01-28T08:39:19.560
> 
> 标签：shell

Unix shell 脚本：

我有 7 个函数需要作为命令行输入执行，我尝试使用下面的代码它没有执行函数。

```
if [ "$VAL" == "1" ]
then
fun1
elif [ "$VAL" == "2" ]
then
fun2
elif [ "$VAL" == "3" ]
then
fun3
elif [ "$VAL" == "4"]
then
fun4
elif [ "$$VAL" ==" 5" ]
then
fun5
elif [ "$VAL" == "6" ]
then
fun6
elif [ "$VAL" == "7" ] then
fun7
else
echo -e "Invalid input.............\n"
Help
  exit
fi 
```

输出：

```
Usage:  ./script  $VAL
#   ./script  2
Invalid input........... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:45:40.717

老实说，我在您的代码中看不到任何错误（除了`$$VAL`与 5 相比）。你确定`VAL`等于2吗？也许尝试以这种方式调用您的代码，`./script 2`而不是`./script $VAL`. 还有什么我会推荐使用`case`声明：

```
 case "$VAL" in
 "1")
    fun1
    ;;
 "2")
    fun2
    ;;
 "3")
    fun3
    ;;
 *)
    echo -e "Invalid input.............\n" 
    ;;
 esac 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:59:55.000

嗨，这是linux中的函数代码，希望对您有所帮助

```
func() 
{
if [ thisconditionistrue ]
then
a=100
else
a=500
fi
}

#CallerScript
a=50
passme=Thisisvalue
func $passme 
```

# java - Memcached 会话管理器 - 高失误：浪费为 100%

> ID：14558302
> 
> 赞同：0
> 
> 时间：2013-01-28T08:39:52.677
> 
> 标签：java, tomcat, memcached

尝试搜索但找不到。我们将 java/tomcat 与[Memcached 会话管理器](http://code.google.com/p/memcached-session-manager/wiki/SetupAndConfiguration)一起使用。只有一个 memcached 服务器。即使只有一个人进行测试，我们也有大约 50% 的失误。任何建议。

按要求更新----Tomcat的config.xml

```
<Manager className="de.javakaffee.web.msm.MemcachedBackupSessionManager"
    memcachedNodes="n1:10.10.1.151:11211"
    sticky="false"
    sessionBackupAsync="false"
    lockingMode="auto"
    requestUriIgnorePattern=".*\.(ico|png|gif|jpg|css|js)$"
    /> 
```

添加缓存统计

## 缓存大小统计

```
Used   6.0   MBytes
Total  512.0 MBytes
Wasted 6.0   MBytes 
```

# c# - 构建 RSA 加密服务提供者是否会保留或泄漏密钥数据？

> ID：14558304
> 
> 赞同：4
> 
> 时间：2013-01-28T08:39:54.403
> 
> 标签：c#, cryptography, rsa

我在这里的另一篇文章中读到，诸如此类的代码会导致 .NET 将密钥从创建它的机器持久保存到随机密钥存储区（可能在注册表中）。这是真的吗？在什么条件下它会持续存在而不是持续存在？如果 key 是从字符串初始化的，持久性仍然会发生吗？

```
RSACryptoServiceProvider alg = new RSACryptoServiceProvider(); 
```

好像是真的？

[http://blogs.msdn.com/b/winsdk/archive/2010/01/29/while-creating-cryptographic-keys-or-key-containers-repeatedly-your-hard-disk-may-get-filled-带有大量文件并且可能最终填充整个硬盘空间如果未删除.aspx](http://blogs.msdn.com/b/winsdk/archive/2010/01/29/while-creating-cryptographic-keys-or-key-containers-repeatedly-your-hard-disk-may-get-filled-with-lots-of-files-and-may-end-up-filling-the-whole-hard-disk-space-if-not-deleted.aspx)

---- 现在我不确定.. 当我在我的机器上调试时 PersistInCspContainer 设置为 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:59:14.680

我认为混淆在于规范的这一部分：

> `PersistKeyInCsp`当您在对象中指定密钥容器名称`CspParameters`并使用它来初始化 RSACryptoServiceProvider 对象时，该属性会自动设置为 true。`KeyContainerName`您可以使用该字段指定容器名称。如果您将该 `PersistKeyInCsp`属性设置为 true 而不使用对象初始化该 `RSACryptoServiceProvider`对象，则会创建`CspParameters`一个前缀为的随机密钥容器名称。`"CLR"`

在我看来，您必须提供`CspParameters`or 设置`PersistKeyInCsp`为 true 才能保留密钥。至少，我是这么读的，你的实验似乎是匹配的。

它可能类似于 PKCS#11 令牌；默认情况下，键是会话对象。

# c# - 读取 Http WebResponse

> ID：14558306
> 
> 赞同：0
> 
> 时间：2013-01-28T08:39:56.077
> 
> 标签：c#, asp.net, .net, httpwebrequest, httpwebresponse

当我使用它使用 http 请求发送短信时，我得到了来自 api 的响应，现在我在发送短信时得到了一些响应。我需要从响应中解析“MessageID”。

我正在使用以下代码来阅读响应

```
 HttpWebResponse webresponse = (HttpWebResponse)myReq.GetResponse();

        Encoding enc = System.Text.Encoding.GetEncoding(1252);
        StreamReader loResponseStream = new
          StreamReader(webresponse.GetResponseStream(), enc);

        string Response = loResponseStream.ReadToEnd(); 
```

我在字符串响应中收到的内容如下

```
<rsp stat=\"ok\">\n<success msg=\"accepted\" transactionid=\"fe417b1b3dd5f68cc99c5df182fe606a\" messageid=\"332b21a2813900a7b81af1635aa1a8d5\"/>\n</rsp> 
```

如何从此响应中解析 transactionid 和消息 id 的值。请告诉我 。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:48:46.017

您可以使用 LINQ to XML：

```
 var successElement = XElement.Parse(response).Element("success");

  var transactionId = successElement.Attribute("transactionid").Value;
  var messageId = successElement.Attribute("messageid").Value; 
```

# php - 将动态添加的表行值添加到数据库中

> ID：14558310
> 
> 赞同：0
> 
> 时间：2013-01-28T08:40:06.450
> 
> 标签：php, javascript, mysql

嗨，我正在研究一个表格，该表格在单击按钮时添加了行，但我的问题是当我添加新行时，计数器值变为 12 而不是 2 谁能帮我这是我的代码

```
<?php
session_start();
if (!isset($_SESSION["username"])) {
    header("Location: unauthorize_access.php");
}
require("includes/dbconnect.php");
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>Makhtab</title>
            <link rel="stylesheet" type="text/css" href="form2/view.css" media="all">
                <script type="text/javascript" src="form2/view.js"></script>
                <script type="text/javascript" src="form2/calendar.js"></script>
                <meta http-equiv="Content-Script-Type" content="text/javascript"> 
                    <script type="text/javascript">

                        function deleteRow(row)
                        {
                            var i=row.parentNode.parentNode.rowIndex;
                            document.getElementById('POITable').deleteRow(i);
                        }

                        function insRow()
                        {
                            console.log( 'hi');
                            var x=document.getElementById('POITable');
                            var new_row = x.rows[1].cloneNode(true);
                            var len = x.rows.length;
                            new_row.cells[0].innerHTML = len;

                            var inp1 = new_row.cells[1].getElementsByTagName('input')[0];
                            inp1.id += len;
                            inp1.value = '';
                            var inp2 = new_row.cells[2].getElementsByTagName('input')[0];
                            inp2.id += len;
                            inp2.value = '';
                            x.appendChild( new_row );
                        }
                    </script>
                    <script language="javascript" type="text/javascript">
                        var i=1;
                        function addRow()
                        {
                            var tbl = document.getElementById('zimtable');
                            var lastRow = tbl.rows.length;
                            var iteration = lastRow - 1;
                            var row = tbl.insertRow(lastRow);

                            var firstCell = row.insertCell(0);
                            var el = document.createElement('input');
                            el.type = 'text';
                            el.name = 'zimname_' + i;
                            el.id = 'zimname_' + i;
                            el.size = 40;
                            el.maxlength = 40;
                            firstCell.appendChild(el);

                            var secondCell = row.insertCell(1);
                            var el2 = document.createElement('input');
                            el2.type = 'text';
                            el2.name = 'zimmob_' + i;
                            el2.id = 'zimmob_' + i;
                            el2.size = 13;
                            el2.maxlength = 13;
                            secondCell.appendChild(el2);

                            // alert(i);
                            i++;
                            makhtab.h.value=i;
                              alert(i);
                        }
                    </script>
                    <script language="javascript" type="text/javascript">
                        var i=1;
                        function addalRow()
                        {
                            var tbl = document.getElementById('alimtable');
                            var lastRow = tbl.rows.length;
                            var iteration = lastRow - 1;
                            var row = tbl.insertRow(lastRow);

                            var firstCell = row.insertCell(0);
                            var el = document.createElement('input');
                            el.type = 'text';
                            el.name = 'alimname_' + i;
                            el.id = 'alimname_' + i;
                            el.size = 40;
                            el.maxlength = 40;
                            firstCell.appendChild(el);

                            var secondCell = row.insertCell(1);
                            var el2 = document.createElement('input');
                            el2.type = 'text';
                            el2.name = 'alimmob_' + i;
                            el2.id = 'alimmob_' + i;
                            el2.size = 13;
                            el2.maxlength = 13;
                            secondCell.appendChild(el2);

                            var thirdCell = row.insertCell(2);
                            var element4 = document.createElement("select");
                            element4.name ='qabil_'+i;
                            var option1 = document.createElement("option");
                            option1.value='MUFTI';
                            option1.innerHTML='MUFTI';
                            element4.appendChild(option1);

                            var option2 = document.createElement("option");
                            option2.value='AALIM';
                            option2.innerHTML='AALIM';              
                            element4.appendChild(option2);

                            var option3 = document.createElement("option");
                            option3.value='QARI';
                            option3.innerHTML='QARI';               
                            element4.appendChild(option3);

                            var option4 = document.createElement("option");
                            option4.value='HAFIZ';
                            option4.innerHTML='HAFIZ';              
                            element4.appendChild(option3);

                            thirdCell.appendChild(element4);

                            // alert(i);
                            i++;
                            makhtab.r.value=i;
                              alert(i);
                        }
                    </script>

                <!--<style type="text/css" title="currentStyle">
                    @import "tran/css/layout-styles.css";
                    @import "tran/css/themes/smoothness/jquery-ui-1.8.4.custom.css";
                </style>-->
                    <script  type="text/javascript" src="tran/js/jquery-1.6.1.min.js"></script>
                    <script  type="text/javascript" src="tran/js/jquery-ui-1.8.14.custom.min.js"></script>

                    <script  type="text/javascript" src="tran/js/jq-ac-script.js"></script>
                    <script type="text/javascript">

                        //   function checkForm()
                        // {
                        //     if(makhtab.code.value == "") {
                        //       alert("Error: Code cannot be Empty!");
                        //     makhtab.code.focus();
                        //   return false;
                        // }
                        //   if(makhtab.name.value == "") {
                        //     alert("Error: Name cannot be Empty!");
                        //   makhtab.name.focus();
                        //  return false;
                        //}
                        //if(makhtab.cmbcount.value == "") {
                        //  alert("Error: Country cannot be Empty!");
                        //makhtab.cmbcount.focus();
                        // return false;
                        // }
                        //if(makhtab.cmbstate.value == "") {
                        //  alert("Error: State cannot be Empty!");
                        //makhtab.cmbstate.focus();
                        // return false;
                        // }

                        /* if(makhtab.cmbteh.value == "") {
                                alert("Error: Tehsil cannot be Empty!");
                                makhtab.cmbteh.focus();
                                return false;
                            } 
                            if(makhtab.cmbcity.value == "") {
                                alert("Error: City cannot be Empty!");
                                makhtab.cmbcity.focus();
                                return false;
                            } 
                            if(makhtab.tel.value == "") {
                                alert("Error: Telephone cannot be Empty!");
                                makhtab.tel.focus();
                                return false;
                            }
                            if(makhtab.mob.value == "") {
                                alert("Error: Mobile cannot be Empty!");
                                makhtab.mob.focus();
                                return false;
                            } 

                            if(makhtab.stu.value == "") {
                                alert("Error: Students cannot be Empty!");
                                makhtab.stu.focus();
                                return false;
                            }

                        }*/

                    </script>
                    <SCRIPT type="text/javascript">
                        <!--
                        pic1 = new Image(16, 16); 
                        pic1.src = "loader.gif";

                        $(document).ready(function(){

                            $("#code").change(function() { 

                                var code = $("#code").val();

                                if(code.length >= 4)
                                {
                                    $("#status").html('<img src="loader.gif" align="absmiddle">&nbsp;Checking availability...');

                                    $.ajax({  
                                        type: "POST",  
                                        url: "check_ct.php",  
                                        data: "code="+ code,  
                                        success: function(msg){  

                                            $("#status").ajaxComplete(function(event, request, settings){ 

                                                if(msg == 'OK')
                                                { 
                                                    $("#code").removeClass('object_error'); // if necessary
                                                    $("#code").addClass("object_ok");
                                                    $(this).html('&nbsp;<img src="tick.gif" align="absmiddle">');
                                                }  
                                                else  
                                                {  
                                                    $("#code").removeClass('object_ok'); // if necessary
                                                    $("#code").addClass("object_error");
                                                    $(this).html(msg);
                                                }  

                                            });

                                        } 

                                    }); 

                                }
                                else
                                {
                                    $("#status").html('<font color="red">The code should have at least <strong>4</strong> characters.</font>');
                                    $("#code").removeClass('object_ok'); // if necessary
                                    $("#code").addClass("object_error");
                                }

                            });

                        });

                        //-->
                    </SCRIPT>
                    </head>
                    <body id="main_body" >

                        <div id="form_container">
                            <form id="makhtab" class="appnitro" enctype="multipart/form-data" method="post"  onsubmit="return checkForm()" action="submit2.php">
                                <div class="form_description">
                                    <br />
                                    <h2>Makhtab Details</h2>
                                    <!--<p>This is your form description. Click here to edit.</p>-->
                                </div>                      
                                <table border="0px" width="100%">

                                    <tr>
                                        <td><label class="description" for="element_1">Code</label></td><td><input id="element_1"  id="code" name="code" class="element text small" type="text" maxlength="6" value=""/></td>
                                    </tr>
                                    <tr>
                                        <td><label class="description" for="element_1">Name</label></td><td><input id="element_1" name="name" class="element text large" type="text" maxlength="40" value=""/> </td>
                                    </tr>

                                    <tr>
                                        <td><label class="description" for="element_1">Address</label></td><td><input id="element_4_1" name="add1" class="element text large" value="" type="text"></td>
                                    </tr>
                                    <tr>
                                        <td></td><td><input id="element_4_1" name="add2" class="element text large" value="" type="text"></td>
                                    </tr>
                                    <tr>
                                        <td></td><td><input id="element_4_1" name="add3" class="element text large" value="" type="text"></td>
                                    </tr>
                                    <tr>
                                        <td><label class="description" for="element_1">City</label></td><td><select name="cmbcity" class="element text medium" style="font-size:18px;"/>
                                            <option value=""></option>
                                          <?php
                                            $result = mysql_query("SELECT code, `name` from city ") or die(mysql_error());

                                            while ($year = mysql_fetch_array($result)) {

                                                echo "<option value='$year[code]'>$year[name]</option>";
                                            }
                                            ?>
                                            </select>

                                    </tr>
                                    <tr>
                                        <td><label class="description" for="element_1">State</label></td><td><select name="cmbstate" class="element text medium" style="font-size:18px;"/>
                                            <option value=""></option>
                                            <?php
                                            $result = mysql_query("SELECT code, `name` from state ") or die(mysql_error());

                                            while ($year = mysql_fetch_array($result)) {

                                                echo "<option value='$year[code]'>$year[name]</option>";
                                            }
                                            ?>
                                            </select>
                                    </tr>
                                    </tr>
                                    <tr>
                                        <td><label class="description" for="element_1">Country</label></td><td><select name="cmbcount" class="element text medium" style="font-size:18px;"/>
                                            <option value=""></option>
                                            <?php
                                            $result = mysql_query("SELECT code, `name` from country ") or die(mysql_error());

                                            while ($year = mysql_fetch_array($result)) {

                                                echo "<option value='$year[code]'>$year[name]</option>";
                                            }
                                            ?>
                                            </select>
                                            <tr>
                                                <td><label class="description" for="element_1">Telephone</label></td><td><input id="element_1" name="tel" class="element text medium" type="text" maxlength="255" value=""/></td>
                                            </tr>
                                            <tr>
                                                <td><label class="description" for="element_1">Mobile</label></td><td><input id="element_1" name="mob" class="element text medium" type="text" maxlength="10" value=""/></td>
                                            </tr>
                                            <tr>
                                                <br />
                                            </tr>

                                            </table>

                                            <tr>
                                                <br /><p style="border-bottom: 1px dotted #ccc;"></p><br />
                                                <div class="form_description">
                                                    <h2>Zimmedar Details</h2>

                                                </div>
                                            </tr>
                                            <table border="1px" id="zimtable" border="0px" size="100px" cellspacing="0" cellpadding="2">
                                                <tr>
                                                    <td><strong>Zimmedar Name</strong></td>
                                                    <td><strong>Mobile</strong> </td>

                                                </tr>
                                                <tr>
                                                    <td><input name="zimname_0" type="text" id="zimname_0" size="40" maxlength="20" /></td>
                                                    <td><input name="zimmob_0" type="text" id="zimmob_0" size="13" maxlength="20" /></td>
                                                </tr>

                                            </table>
                                            <input type="button" value="Add" onclick="addRow();" /><input name="h" type="hidden"   id="h" value="1" />
                                            <tr>
                                                <br /><p style="border-bottom: 1px dotted #ccc;"></p><br />
                                                <div class="form_description">
                                                    <h2>Muallim Details</h2>
                                                    <!--<p>This is your form description. Click here to edit.</p>-->
                                                </div>
                                            </tr>
                                            <table border="1px" id="alimtable" border="0px" size="100px" cellspacing="0" cellpadding="2">
                                                <tr>
                                                    <td><strong>Muallim Name</strong></td>
                                                    <td><strong>Mobile</strong> </td>
                                                    <td><strong>Qabiliyat</strong> </td>

                                                </tr>
                                                <tr>
                                                    <td><input name="alimname_0" type="text" id="alimname_0" size="40" maxlength="20" /></td>
                                                    <td><input name="alimmob_0" type="text" id="alimmob_0" size="13" maxlength="20" /></td>
                                                    <td><select id="qabil_0" name="qabil_0" class="element text large" style="font-size:14px;"/>
                                                        <option value="MUFTI">MUFTI</option>
                                                        <option value="AALIM">AALIM</option>
                                                        <option value="QARI">QARI</option>
                                                        <option value="HAFIZ">HAFIZ</option>
                                                         </select></td>
                                                </tr>
                                                         <input name="r" type="hidden"  id="r" value="1" />
                                            </table>
                                            <input type="button" value="Add" onclick="addalRow();" />

                                            <br /><p style="border-bottom: 1px dotted #ccc;"></p><br />
                                            <table border="0px" width="85%">
                                                <tbody><tr>
                                                        <td width="105"><label class="description">No. of Students</label></td>
                                                        <td width="65"><input type="text" name=stu" size="5" maxlength="5"></input></td>
                                                        <td width="105"><label class="description">No. of Batches</label></td><td width="14"><input type="text" name="batch" size="5" maxlength="3"></input></td>
                                                    </tr>
                                                    <tr>
                                                        <input type="submit" name="submit" value="Save"></input>

                                                    </tr>
                                                </tbody>

                                            </table>     
                                            </div>
                                            </div>

                                            </form>  

                                            </body>
                                            </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:47:11.240

看来您的问题是您没有将字符串转换为 int。`+`可以表示连接或加法，具体取决于它所使用的 2 个变量的类型。

例如：

```
var x = '1';
var y = 2;
alert(x+y); // 12, since x is a string and y is automatically cast to string.

alert(parseInt(x)+parseInt(y)) = 3; // since we cast both x and y to int. 
```

**PS：如果您真的需要帮助，并且这里的任何人都可以阅读您的代码，请复制重要的部分，而不是整个文件。**

PS2：你应该开始使用[jQuery——](http://jquery.com/)它可以为你节省很多时间

# android - 显示选项菜单图标

> ID：14558311
> 
> 赞同：0
> 
> 时间：2013-01-28T08:40:08.397
> 
> 标签：android

我在为没有软键的设备显示选项菜单图标时遇到问题。当我尝试将应用程序应用到没有软键的 4.0.3 设备时，我不知道如何打开选项菜单。

我搜索了一些答案，它说 Android Manifest ( `minSdkVersion and TargetVersion`)。这是应用程序的 android 清单：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="14" /> 
```

如何在没有软键的设备中打开选项菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:44:47.573

使您的`android:targetSdkVersion`值低于 11，例如 10 (Android 2.3.3)。如果您`targetSDKversion`设置为`HoneyComb`或更高版本，则菜单按钮不会出现在您的设备上，因为此版本的 android 使用 ActionBar 图标应该出现在哪里（当然，如果您编写了该实现）。

# extjs - 如何将属性 useArrows 从 TreePanel 传递到 extjs 中的 Treenodes？

> ID：14558315
> 
> 赞同：0
> 
> 时间：2013-01-28T08:40:30.177
> 
> 标签：extjs, extjs3, treenode, treepanel

我正在尝试从 TreeNode 访问 TreePanel 的 useArrows 属性。谁能建议我如何从 extjs 中的 TreeNode 访问 TreePanel 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:18:58.897

诺霍。如果你使用 ExtJS 3，你可以使用`Ext.ComponentMgr.get()`方法。

# javascript - Javascript 替换字符串中的单词

> ID：14558318
> 
> 赞同：-1
> 
> 时间：2013-01-28T08:40:46.713
> 
> 标签：javascript, regex, replace

我在 javascript 中有这个文本：

```
'This is a %{component} with a %{value}' 
```

我应该`%{\w+}`用`<span>word</span>`

最终结果应如下所示：

```
'This is a <span>component</span> with a <span>value</span>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:49:48.403

正如已经写好的使用`String.replace`和正则表达式：

```
var originalString = 'This is a %{component} with a %{value}';
var replacedString = originalString.replace(/%\{(\w+)\}/g, '<span>$1</span>');
// "This is a <span>component</span> with a <span>value</span>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:47:46.783

这是你想要的？

```
<!DOCTYPE html>
<html>
<body>
    <p id="demo">This is a %{component} with a %{value}</p>

    <button onclick="myFunction()">Test</button>

    <script>
      function myFunction()
     {
        var str=document.getElementById("demo").innerHTML; 
        var n=str.replace("%{","< span >").replace("}","< /span >");
        document.getElementById("demo").innerHTML=n;
     }
    </script>
</body> 
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:43:43.353

您可以使用javascript / jquery 中的**正则表达式来做到这一点。**看看这里：[http ://de.selfhtml.org/javascript/objekte/regexp.htm](http://de.selfhtml.org/javascript/objekte/regexp.htm)

# lucene.net - 对 Lucene.Net 文档中的字段进行分组

> ID：14558319
> 
> 赞同：2
> 
> 时间：2013-01-28T08:40:46.760
> 
> 标签：lucene.net, lucene

在我们的应用程序中，我们一直在使用 Lucene.Net 来索引大量数据。字段本身是可配置的，因此字段的名称和类型可以随着每次重建而改变。在每个文档中，我们可以有多个具有相同名称的字段以及不同数量的数字和文本字段。由于我们在当前的开发中投入了大量工作，因此更改为不同的搜索引擎是行不通的

事实是，在大多数情况下，它是一种魅力，但我们确实有一个我们似乎无法解决的困难。

假设我们要索引包含以下内容的文档“X”：

A 行 - 字段 1：4 + 字段 2：a
行 B - 字段 1：8 + 字段 2：b

我们将创建的索引将包含 4 个字段：

*   文件 X：
    *   字段 1：4（数字）
    *   字段 2：a（文本）
    *   字段 1：8（数字）
    *   字段 2：b（文本）

*（行 ID 不重要）*

搜索**Field1:[3 TO 6] AND Field2:b**会对该文档产生影响。
但是，由行表示的字段之间的链接（链接 4 和“a”）消失了。

我们可以连接像 4_a 这样的值，但这会破坏我们的数字搜索，并且会要求客户端知道连接了哪些字段以获得正确的结果。这也会增加我们分析器的难度，因为对于每个字段，我们可以添加不同的分析器（主要用于语言目的）。

此外，我们可以使用相同的键为每一行创建一个单独的文档，并在搜索结果中添加一个 distinct，但这听起来不像是要走的路，是吗？它会大大增加文档的数量，因为我们将为我们现在创建的每个文档创建 20 到 100 个文档。我还没有在性能或可用性方面对此进行测试，因为当前的实现不允许我很容易地尝试这个:-)

有谁知道我如何强制 Lucene.Net 中的某些字段之间建立链接，但仍然保留一种单独搜索每个字段的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:38:31.407

我个人不明白为什么增加文档数量会影响性能。至少在 Java 版本的 Lucene 中，大部分内存用于术语缓存 - 这是*每个术语*并且与文档计数无关（假设术语计数不改变）。无法详细说明可用性，因为这是特定于您的应用程序的。

要点是，一旦将行分组到文档中，就会丢失行关系信息。您可以通过添加额外的字段（例如`rowInfoA:4_a`, `rowInfoB:8_b`）来解决这个问题，但这似乎太麻烦并且实际上需要更多的内存。是的，您可以选择不索引而只存储这些辅助字段，但我（已给出信息）仍然更喜欢 1:1 行：文档映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:06:37.940

一个问题是为链接添加另一个字段：

*   文件 X：

    *   字段 1：4（数字）
    *   字段 2：a（文本）
    *   字段 1：8（数字）
    *   字段 2：b（文本）
    *   链接：4_a
    *   链接：8_b

另一个组合是添加一个类似的字段`MyDocument:X`并分别索引每一行，每一行都包含`MyDocument`其文档的一个字段。这将允许您稍后在流程中按文档进行过滤。

# wpf - wpf应用程序关闭时如何显示消息框？

> ID：14558321
> 
> 赞同：0
> 
> 时间：2013-01-28T08:40:52.220
> 
> 标签：wpf, mvvm, messagebox

我有一个带有 MVVM 模式的 WPF 应用程序，它包含以下 2 个视图：

1：（`MainWindow.xaml`它是一个窗口）下面是主要部分`MainWindow.xaml`：

```
<Window.Resources>
    <DataTemplate DataType="{x:Type vm:XliffListViewModel}">
        <vw:XliffListView />
    </DataTemplate>
</Window.Resources>
<Grid Margin="4">
    <Border Background="GhostWhite" BorderBrush="LightGray" BorderThickness="1" CornerRadius="5" >
        <ItemsControl ItemsSource="{Binding ViewModels}" Margin="4" />
    </Border>
</Grid> 
```

2：（`XliffListView.xaml`它是一个用户控件）XliffListView 包含一个数据网格和一个按钮，用于保存发生的所有更改

如果未保存更改，我想在用户关闭应用程序时显示消息框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:02:40.010

您可以编写并`Attached behavior`处理`Window.Closing()`Window 的事件并执行`ClosingCommand`from`ViewModel`并返回 true 或 false 作为参数，以便`e.Cancel`在 VM 想要停止关闭窗口时取消 () 关闭事件。

下面的代码只是概念，并不完整

**XAML**

```
 <Window x:Class="..."
          ...
          myBheaviors:WindowBehaviors.ClosingCommand="{Binding MyClosingCommand}">
      ...
  </Window> 
```

**视图模型**

```
 public class MyWindowViewModel 
  {
      public ICommand MyClosingCommand
      {
          get
             { 
                 if (_myClosingCommand == null)
                    _myClosingCommand 
                       = new DelegateCommand<CancelEventArgs>(OnClosing);
                 return _myClosingCommand;
             }
      }

      private void OnClosing(CancelEventArgs e)
      {
          if (this.Dirty) //Some function that decides if the VM has pending changes.
              e.Cancel = true;
      }
  } 
```

**依附行为**

```
 public static class WindowBehaviors
  {
      public static readonly DependencyProperty ClosingCommandProperty
         = DependencyProperty.RegistsrrAttached(
                "ClosingCommand", 
                ..., 
                new PropertyMetataData(OnClosingCommandChanged);

      public static ICommand GetClosingCommand(...) { .. };

      public static void SetClosingCommand(...) { .. };

      private static void OnClosingCommandChanged(sender, e)
      {
           var window = sender as Window;
           var command = e.NewValue as ICommand;
           if (window != null && command != null)
           {
               window.Closing 
                  += (o, args) => 
                     { 
                         command.Execute(args);
                         if (args.Cancel)
                         {
                             MessageBox.Show(
                                "Window has pending changes. Cannot close");

                             // Now window will be stopped from closing.
                         }
                     };     
           } 
      }
  } 
```

**编辑：**

对于用户控件，而不是`Closing`使用`Unloaded`事件。

另外尝试建立`ViewModel`siee Window的ViewModel之间的层次结构应该包含UserControl的ViewModel。因此，该`Closing`事件的 IsDirty() 调用也可以检查 UserControls 的 ViewModel。

# sql-server - 具有多个分组的报表服务

> ID：14558323
> 
> 赞同：3
> 
> 时间：2013-01-28T08:40:58.240
> 
> 标签：sql-server, reporting-services, grouping

我是报告服务的新手。我有 2 张桌子：

*   “汽车”，列 id、cartype、容量
*   具有列 id、carid、year、val1、val2 的“值”

这些表的记录是：

```
Cars:
id    cartype  capacity

1     Passat   2200

2     BMW      2800

Values:
id    carid  year val1  val2

1      1     2012 100    1

2      1     2011 200    2

3      1     2010 300    3

4      2     2012 400    4

5      2     2011 500    5 
```

我想做一份报告来说明这一点：

```
Car Type    Capacity

Passat       2200

       2012   2011    2010

val1   100    200     300

val2    1      2      3

Car Type    Capacity

BMV       2800

       2012   2011 

val1   400    500   

val2   4      5 
```

我用这个选择创建了一个数据源：

```
 SELECT m.Id AS carid, m.cartype, m.capacity, v.Id AS idval, v.An, v.val1, v.val2
 FROM  car AS m INNER JOIN  values AS v ON m.Id = v.carid 
```

我曾尝试使用矩阵，但无法成功制作这种格式。有人可以帮我获得这份报告吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T09:33:23.530

您的**数据集**适合此报告。

您需要基于*汽车组创建一个***列表**，在此**列表**中为*汽车*详细信息添加两个**文本框**，为*val1*、*val2*等添加一个**矩阵。**

 ***********List**允许您根据需要灵活地放置和移动项目，并且将**Matrix**与*Cars*组一起放置意味着它将仅包含每个*Car*范围内的值。**列表**（以及因此Car*详细*信息和值**Matrix**）将根据需要为每辆*Car*重复。

**评论后补充：**

不可能说出是什么导致了你的错误；这确实是一个具体的实现细节。为了举例说明如何做到这一点，我模拟了一份报告。第一步是创建*汽车*组：

![在此处输入图像描述](../Images/a0b7a1d5548564d92aad03cf1784f52f.png)

你可以看到有一个**Group**，有一个**Textbox**。在**文本框中**有一个**矩形**（SSRS 中的列表只是插入了矩形的表格）。*Car*和*Capacity*只是**Textboxes**。在此示例中，我使用了两个**矩阵**，但这可以通过多种方式完成。**VAL1**：

![在此处输入图像描述](../Images/7dd8f60584b10fb6d6bb1304bfe8375b.png)

**VAL2**：

![在此处输入图像描述](../Images/d94f1490663fc5010bd5a208d6c30da2.png)

**最终结果**：

![在此处输入图像描述](../Images/d79ae839ce5918e05972dfc217c891bb.png)

所以你可以看到这是很有可能的，你只需要了解所需的分组以及如何构造一个矩阵。不幸的是，不可能说出是什么导致了这个错误，但希望这能给你一些目标。*********

# java - <= && >= Java/Android 运算符

> ID：14558328
> 
> 赞同：2
> 
> 时间：2013-01-28T08:41:39.850
> 
> 标签：java, android

我对这段代码有问题。它总是继续“你在博物馆外面或再次检查你的位置”祝酒：/你认为问题是什么？这是代码：

```
 x3 = x3 * -1; //for example is 187
    y3 = y3 * -1;//for example is 698

    ImageView img = (ImageView) findViewById(R.id.imageView1);

    if(((x3 <= 150) && (x3 >= 170)) && ((y3 <= 680) && (y3 >= 725))){
        img.setImageResource(R.drawable.map_1_full_lite);
        Toast.makeText(getBaseContext(), "You're currently on Section 1", Toast.LENGTH_LONG).show();
        currentSection = "sect_1";
    }else if(((x3 <= 170) && (x3 >= 195)) && ((y3 <= 690) && (y3 >= 715))){
        img.setImageResource(R.drawable.map_2_full_lite);
        Toast.makeText(getBaseContext(), "You're currently on Section 2", Toast.LENGTH_LONG).show(); //this suppost to be the output
        currentSection = "sect_2";
    }else if(((x3 <= 200) && (x3 >= 230)) && ((y3 <= 680) && (y3 >= 720))){
        img.setImageResource(R.drawable.map_3_full_lite);
        Toast.makeText(getBaseContext(), "You're currently on Section 3", Toast.LENGTH_LONG).show();
        currentSection = "sect_3";
    }else if(((x3 <= 190) && (x3 >= 220)) && ((y3 <= 675) && (y3 >= 710))){
        img.setImageResource(R.drawable.map_4_full_lite);
        Toast.makeText(getBaseContext(), "You're currently on Section 4", Toast.LENGTH_LONG).show();
        currentSection = "sect_4";
    }else if(((x3 <= 175) && (x3 >= 219)) && ((y3 <= 710) && (y3 >= 745))){
        img.setImageResource(R.drawable.map_5_full_lite);
        Toast.makeText(getBaseContext(), "You're currently on Section 5", Toast.LENGTH_LONG).show();
        currentSection = "sect_5";
    }else if(((x3 <= 155) && (x3 >= 165)) && ((y3 <= 715) && (y3 >= 735))){
        img.setImageResource(R.drawable.map_6_full_lite);
        Toast.makeText(getBaseContext(), "You're currently on Section 6", Toast.LENGTH_LONG).show();
        currentSection = "sect_6";
    }else{
        Toast.makeText(getBaseContext(), "You're outside of the museum or Check your postion again", Toast.LENGTH_LONG).show();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T08:43:24.527

这是不可能的

```
(x3 <= 150) && (x3 >= 170) 
```

原样

```
(x3 <= 170) && (x3 >= 195) 
```

x3 不能小于或等于 150 并且大于或等于 170。我怀疑您打算这样

```
(150 <= x3) && (x3 <= 170) 
```

和

```
(170 <= x3) && (x3 <= 195) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:43:15.883

那是因为你的陈述如

```
(x3 <= 150) && (x3 >= 170) 
```

永远不可能是真的。

你是这个意思吗？

```
(x3 <= 150) || (x3 >= 170) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T08:46:49.963

你的条件总是`false`。只需考虑：

```
((x3 <= 155) && (x3 >= 165)) && ((y3 <= 715) && (y3 >= 735)) 
```

`&&`运算符意味着该运算符`AND`两侧的两个条件都必须为真，整个表达式才能为真。现在不难发现条件的*任何*值都是假的。因此，条件永远无法满足。`x3``(x3 <= 155) && (x3 >= 165)`

您的每个分支都`if`具有该属性，因此最终`else`选择了该分支。

我认为您混合了`<=`（小于或等于）和`>=`（大于或等于）运算符。例如`x3`，所有值都应该在某个范围内（即房间边界坐标），就像在提到的情况下`x3`应该在范围内`(x3 >= 155) && (x3 <= 165)`（注意反向运算符）。

# multithreading - 树状结构中的多线程

> ID：14558330
> 
> 赞同：2
> 
> 时间：2013-01-28T08:41:47.570
> 
> 标签：multithreading, data-structures

下面是我在一次采访中被问到的问题，我相信这个问题有很多解决方案，但我想知道什么是最好的解决方案（stackoverflow 非常适合这个问题:)）。

问：我们有一个树状结构并有三个线程。现在我们必须执行三个操作：插入、删除和查找。你将如何设计这个？

我的方法：我将使用互斥锁进行插入和删除操作，因为我希望一次只执行一个线程插入或删除。而在查找的情况下，我将允许所有三个线程进入函数但保留一个计数（计数信号量），以便这次无法执行插入和删除操作。同样，当插入或删除操作进行时，不允许线程进行查找，插入和删除的情况相同。

现在他交叉质疑我，因为我一次只允许插入一个线程，所以如果需要插入不同叶子上的两个节点，那么我的方法仍然一次允许一个，这会卡住。

我的方法好吗？还有什么其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:27:08.263

像这样怎么样？类似于交通路障（断路）。

*   每个节点将有两个标志说`leftClear_f`并`rightClear_f`指示`clear-path`前面
*   树将只有一个互斥锁

**查找操作：**

*   如果设置了指示前方路径正在修改的标志，则到达`conditional_wait`并等待信号。
*   收到信号后检查标志并继续。

**插入操作**

*   按照`Lookup`直到您到达插入位置。
*   在检查它们的状态后，获取 MutEx 并设置`parent_node`它们的相关标志。`child_node`
*   释放互斥体，以便并行`Delete`/`Insert`可以发生在其他有效的完整路径上
*   插入操作后获取 MutEx 并更新`parent_node`和`child_node`s 中的相关标志。

**除删除节点外，删除操作** 与插入操作相同。

PS：您也可以在其他地方维护`Insert`或处理节点的详细信息。`Delete`如有必要/需要，其他操作可以跳过损坏的路径！这听起来很复杂但可行。

# javascript - 让网络字体在 HTML5 Windows Phone 应用程序上工作？

> ID：14558331
> 
> 赞同：9
> 
> 时间：2013-01-28T08:41:47.720
> 
> 标签：javascript, windows-phone-8, fonts

我正在构建一个在 Web 上显示外部网站的 Windows Phone 8 HTML5 应用程序。当页面加载时，它会显示所有内容以及正确的 CSS 样式，但 Web 字体除外。网络字体不包含在项目中，它是从网站在线运行的。另外，我知道 javascript 正在运行，因为其他 javascripts 正在页面上工作。有谁知道让网络字体在应用程序中工作的解决方案？如果它有帮助，当我将 Windows Phone 8 中的主 Web 浏览器定向到相关网页时，webfonts 加载正常。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-12-13T18:39:30.830

自定义字体可以在 Windows Phone 8 HTML5 应用程序中使用，就像在网站和其他移动平台的 web 视图中使用一样。有两点需要注意，

1.  在 Visual Studio 中，确保字体`Properties>Advanced>Build Action`设置为“内容”，以便在构建和部署项目时将其复制到设备。
2.  确保您使用的字体已获得嵌入许可，并且[truetype 字体中的 embeddable 标志](http://en.wikipedia.org/wiki/TrueType#Embedding_protection)设置为 0 以允许嵌入。iOS 和 Android 忽略了这个可嵌入标签，但 IE10 尊重它。

您可以使用开源[TTFEdit](http://sourceforge.net/projects/ttfedit/)检查任何 truetype 字体的可嵌入标志。`View>Show>Advanced>Legal rights for embedding`您可以通过将值更改为 0 并重新保存来使字体可嵌入。仅当字体获得嵌入许可时才更改标志。

我已经测试了许多 truetype 字体，没有问题。到目前为止，我唯一的问题是包含 font-awesome 库时，其中的`src:`值`font-awesome.min.css`需要更改以修复 IE10 移动设备中的错误。使用 font-awesome 时，

`src:url('../fonts/fontawesome-webfont.ttf?v=4.0.3')`不会工作。`src:url('../fonts/fontawesome-webfont.ttf')`将要。

![Lumia 920 上具有四种嵌入字体的示例项目（在 Amber 和 Black 更新上测试）](../Images/3b066b3f1ab9f11dc989fbec9b6e3b86.png)

# iphone - 使用线程 ios 从另一个类调用方法

> ID：14558341
> 
> 赞同：1
> 
> 时间：2013-01-28T08:42:41.627
> 
> 标签：iphone, objective-c, ios5, nsthread

我有两个类，一个是 Sample 类和 ServerConnection 类。

样本.m

```
.
.
    ServerConnection *serverConnection = [[ServerConnection alloc]init:val1 _handler:serverConnectionHandler _connectionURL:url];
//    [NSThread detachNewThreadSelector:@selector(run) toTarget:serverConnection withObject:NULL];    
    [serverConnection performSelectorInBackground:@selector(run) withObject:NULL]; 
```

在 serverConnection 我只有两种方法 ServerConnection.h

```
@interface ServerConnection : NSObject
{
//    NSString* url;
//    Handler* handler;
//    int action_code;
}

@property (nonatomic,retain) NSString* url;
@property (nonatomic,retain) Handler* handler;
@property (nonatomic,retain) NSNumber* action_code;

-(id) init:(int)_action_code _handler:(Handler *)_handler _connectionURL:(NSString *)_connectionURL;
-(void)run; 
```

服务器连接.m

```
- (id) init:(int)_action_code _handler:(Handler *)_handler _connectionURL:(NSString *)_connectionURL{
    if (self = [super init]) {
        action_code = 0;
        action_code = [[NSNumber alloc]initWithInt:_action_code];
        handler = [[Handler alloc]init:_handler];
        url = [[NSString alloc]initWithString:_connectionURL];
    }
    return self;
}

-(void)run
{
     NSLog(@"url--> %@",url);

   //Here using NSURLConnection to fetch data from server
} 
```

当运行方法启动时，我有时会收到此错误**过度不良访问**，并且在启用僵尸后显示此错误消息 **-[CFString release]：消息发送到已释放实例 0xf9978d0* * 和 ****malloc：****对象 0x11039420 的错误：未分配被释放的指针* ****在 malloc_error_break 中设置断点进行调试********

 ****我参考了旧帖子并试图解决但仍然面临同样的问题。任何人请指出我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:07:49.480

我看不出你的`url`ivar 有什么问题。这是你的全部代码吗？生命周期是什么`ServerConnection`？星期一早上可能是我没有看到任何可疑之处的原因......几乎没有其他评论......

`action_code = 0;`行是没用的，因为你`NSNumber`在下一行分配。`action_code`是，所以`NSNumber`，即使你想给它赋值 0，你也应该写`action_code = @( 0 )`。

样式 ...`action_code`也应命名为`actionCode`. 该`init...`方法应如下所示：

```
- (id)initWithActionCode:(int)actionCode handler:(Handler *)handler connectionURL:(NSString *) connectionURL { 
```

并且`if (self = [super init]) {`应该看起来像`if ( ( self = [super init] ) ) {`或使用两个班轮：

```
self = [super init];
if ( self ) { 
```

你应该改进你的风格，让你的代码更容易被其他人阅读。****

# php - 如何去除数字中的点？

> ID：14558343
> 
> 赞同：8
> 
> 时间：2013-01-28T08:42:59.577
> 
> 标签：php, mysql, formatting, numbers

我有一个用 javascript 格式化的表单，它使数字看起来像：

10.000 或 2.300

```
<form>
<input type="text" name="price_1" value="2.300">
</form> 
```

但我想将它们存储在没有点的mysql中。如何删除它们？

```
mysql_query("INSERT INTO prices price_a='price_1' WHERE id ='price_id'"); 
```

我看到money_format和number_format，但它只是格式化数字并没有删除任何东西。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-28T08:45:51.120

试试这个 ：

```
str_replace(".", "", $string); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T08:47:13.473

你可以使用`str_replace()`函数。

```
echo str_replace(".", "", $value); 
```

$value 将是 10.000

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T08:46:44.690

您可以像这样使用 str_replace：

```
$var1 = "10.000";
$var1 = str_replace(".", "", $var1); 
```

有关功能的更多信息在[这里](http://php.net/manual/en/function.str-replace.php)

# java - Java套接字读取错误异常与返回码

> ID：14558345
> 
> 赞同：0
> 
> 时间：2013-01-28T08:43:12.000
> 
> 标签：java, sockets, exception, networking, connection

我正在使用以下循环从套接字读取数据

```
InputStream in = getInputStream();
int retCode;

try {
  while( ( retCode = in.read()) > -1) {
    // do something
  }
  logger.info( "Done reading : Code " + retCode);
} catch( IOException ioe) {
  logger.warning( "IOException while reading : " + ioe.getMessage());
} 
```

有时连接会断开，这是意料之中的，但结果是不一致的。
我得到一个异常，或者 retCode==-1

因此我的问题**是什么决定了读取套接字时异常与返回代码？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:53:14.430

正如@PeterLawrey 正确提到的那样

如果`in.read()`返回**-1** - 表示已到达流的末尾。

**流/通信失败的任何不可用情况下的异常**- 取决于抛出的异常类型。

[更多的](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-03T21:17:13.823

@PeterLawrey 的回答是正确的

> 如果 in.read() 返回 -1 - 表示已到达流的末尾。

但还有更多。Java 流由操作系统套接字支持。如果您的程序在套接字关闭后尝试写入套接字，或者如果它尝试从损坏的套接字中读取，那么您的程序将收到一个 SocketException 原因，例如*管道损坏*或*对等连接重置*。我在 Java 文档中找不到任何官方的东西，但似乎如果你的程序被阻止对套接字的输入流进行读取，然后套接字被干净地关闭（没有套接字异常），那么你的程序将是未阻塞，读取方法将返回 -1。

# php - 会话不保留值

> ID：14558346
> 
> 赞同：0
> 
> 时间：2013-01-28T08:43:13.160
> 
> 标签：php, session, pagination

我有一个变量数组，我需要显示它的值。

所以首先我发送“me”变量将数组复制到会话中，然后我发送“mypage”变量以显示数组的第一个变量但是当我发送“mypage”变量时，会话似乎是空的，因为显示函数没有显示任何事物。

如果您认为我应该使用任何其他方法来实现分页，请提出建议。

```
<?php session_start();
if(isset($_GET["me"])      //if me variable is received copy the array in session
{
   $myarray = array("foo", "bar", "hallo", "world");
   $_SESSION["mysession"] = $myarray;
}

if(isset($_GET["mypage"])   // if mypage variable is received go to show function
   show()

show()   // show value 1 of the session
{
 $values = array();
 $values= $_SESSION['mysession'];
 echo $values[1];
} 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:46:29.350

您的代码非常模糊，但对于您的问题，您似乎正在使用错误的密钥访问 SESSION。

当您使用`mysession`上面的键设置会话时。尝试在您的显示功能中更改以下内容，

```
$values= $_SESSION['mysession']; 
```

# java - 使用 MySql DB 获取 java 中准备好的语句的元数据

> ID：14558353
> 
> 赞同：17
> 
> 时间：2013-01-28T08:43:48.223
> 
> 标签：java, mysql, metadata, sqlexception

我想获取给定准备语句的参数名称和参数类型。我正在使用 MySQL 数据库。但是当我运行我的程序时，它会抛出一个错误：

```
Exception in thread "main" java.sql.SQLException: Parameter metadata not available for the   given statement 
```

在这条线上

```
String paramTypeName = paramMetaData.getParameterTypeName(param); 
```

我不知道为什么会这样。如果可能的话，请任何人帮助我。

这是我的代码：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ParameterMetaData;
import java.sql.PreparedStatement;
import java.sql.Statement;

public class Main {
  public static void main(String[] args) throws Exception {
    Connection conn = getMySqlConnection();
    Statement st = conn.createStatement();

    String query = "select * from survey where id > ? and name = ?";
    PreparedStatement pstmt = conn.prepareStatement(query);
    ParameterMetaData paramMetaData = pstmt.getParameterMetaData();
    if (paramMetaData == null) {
      System.out.println("db vendor does NOT support ParameterMetaData");
    } else {
      System.out.println("db vendor supports ParameterMetaData");
      // find out the number of dynamic parameters
      int paramCount = paramMetaData.getParameterCount();
      System.out.println("paramCount=" + paramCount);
      System.out.println("-------------------");
      for (int param = 1; param <= paramCount; param++) {
        System.out.println("param number=" + param);
        String paramTypeName = paramMetaData.getParameterTypeName(param);
        System.out.println("param SQL type name=" + paramTypeName);
      }
    }
    pstmt.close();
    conn.close();
  }

public static Connection getMySqlConnection() throws Exception {
    String driver = "com.mysql.jdbc.Driver";
    String url = "jdbc:mysql://localhost:3306/mydb";
    String username = "root";
    String password = "";
    Class.forName(driver);
    Connection conn = DriverManager.getConnection(url, username, password);
    return conn;
  }

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T09:05:26.440

据此[_](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)

**当由于服务器不支持准备语句或服务器端准备语句被禁用而没有可用的元数据时，驱动程序是否应该为 PreparedStatements 生成简化的参数元数据？**

你必须设置`generateSimpleParameterMetadata`为真

使用与此类似的连接字符串

```
jdbc:mysql://localhost:3306/mydb?generateSimpleParameterMetadata=true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-14T10:47:01.793

**MySQL JDBC 驱动程序目前不支持它**。我正在解决类似的问题，并提出了以下解决方法：

1.  在您的项目中包含 H2 数据库（它也可以在嵌入式模式或内存中运行）
2.  将您的 MySQL 创建数据库脚本转换为 H2 语法（或用 ANSI 编写，以便与两者兼容）
3.  先在H2数据库上编译prepared statements并从中获取元数据-H2数据库支持此功能，大多数情况下SQL查询语法相似-然后将获取的元信息保存以备后用
4.  数据类型等方面可能存在差异，但总的来说，这应该让您与 MySQL 有大约 80% 的匹配，而不会有太多麻烦

我知道它有很多警告，但它可能适用于某些用例。

还可以考虑将 MySQL 数据库升级到 5.7，有一些与准备好的语句相关的增强功能可能会有所帮助，但我对这些不是很了解：

*   [http://dev.mysql.com/doc/refman/5.7/en/prepared-statements-instances-table.html](http://dev.mysql.com/doc/refman/5.7/en/prepared-statements-instances-table.html)
*   [http://dev.mysql.com/doc/refman/5.7/en/prepare.html](http://dev.mysql.com/doc/refman/5.7/en/prepare.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T09:07:08.333

您尚未将参数设置为准备好的语句，否则您将无法获取参数元数据。所以首先设置参数

```
pstmt.setInt(val)
pstmt.setString(val) 
```

添加参数后，您可以获得有关参数的元数据。

希望这可以帮助。

# jquery - 忽略父级的最佳 div 宽度

> ID：14558355
> 
> 赞同：0
> 
> 时间：2013-01-28T08:44:06.960
> 
> 标签：jquery, html, css, popover

我正在用 jQuery、HTML 和 CSS3 构建一个弹出框。
你可以在这里查看：

[http://themelandia.com/lib/pages/templates/popover.html](http://themelandia.com/lib/pages/templates/popover.html)

目前我将弹出框放在触发器之后。
触发器和弹出框用`div.popover-wrapper`.

```
<div class="popover-wrapper">
    <a class="popover-trigger" href="#">The Trigger</a>
    <div class="popover">
        This is the popover!
    </div>
</div> 
```

我的问题是弹出框被弹出框包装器的父级合并。虽然如果我添加一个长字符串，布局没有问题

> AReallyLongLineWithoutASpace 正确显示

以下字符串在每个新单词后换行。

> 一条很长的线，带有无法正确显示的空间

您也可以在上面的链接中看到这一点。
第一个弹出框工作正常，而第二个弹出框不是因为它被包裹在`div`宽度较小的 a 中。

* * *

## 较少的

```
div.popover-wrapper {
    position: relative;

    div.popover {
        position: absolute;
        z-index: 200;
        width: auto;
    }
} 
```

* * *

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:58:05.873

添加`word-break: break-all;`我在您的网站上检查了这个并且它有效。

```
<div class="popover show-animation shown" style="top: 44px; left: -38px; -webkit-transform-origin: 24px 0px; display: block; word-break: break-all;">
  AReallyLongLineWithoutASpaceWhichGetsDisplayedCorrectly
                </div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T08:58:29.437

我想最简单的方法是使用`white-space: nowrap`on `<div class="popvover">`。

# android - 处理列以返回 SQLite 数据库 Android 变量的更好方法是什么

> ID：14558356
> 
> 赞同：0
> 
> 时间：2013-01-28T08:44:08.003
> 
> 标签：android, database, sqlite

此数据库方法仅返回数据库的 KEY_NAME 列中的字符串名称。另外两列是 KEY_ROWID 和 KEY_HITS。

让列像这样返回数组变量更好吗？

```
 String[] columns = new String[] { KEY_NAME }; 
```

因为只需要 KEY_NAME 列，或者总是将所有列都像这样放入更好；

```
 String[] columns = new String[] {KEY_ROWID, KEY_NAME, KEY_HITS }; 
```

下面显示的数据库方法的完整代码；

```
 public String getName(long l){
    String[] columns = new String[] {KEY_ROWID, KEY_NAME, KEY_HITS };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID +"="+ l, null, null, null, null);
if(c!= null){
    c.moveToFirst();
    String name = c.getString(1);
    return name;
}
return null;
} 
```

编辑;

经过一些测试，我发现如果我使用它，我只能返回单个列名“KEY_NAME”；

```
total = total + c.getInt(c.getColumnIndex(KEY_NAME)); // only need { KEY_NAME }; 
```

但是，当我使用以下代码使用数字来获取列位置“c.getInt(2)”时，除非我返回所有三个列名，否则它不起作用

```
total = total + c.getInt(2);   // requires {KEY_ROWID, KEY_NAME, KEY_HITS }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:47:00.917

为什么要获取不需要的数据。

如果您只想获取一列，请仅查询该列的数据库，并且只要它适合您就继续这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:48:44.593

出于性能原因，您应该尝试获取尽可能少的列。

但是，如果您使用的是 CursorAdapter，则需要*id*列。

# oracle - 函数 substr 返回大于规定的数据类型

> ID：14558358
> 
> 赞同：0
> 
> 时间：2013-01-28T08:44:10.357
> 
> 标签：oracle, plsql

pl/sql 函数 substr，例如`substr('some text', 1, 4)`返回大于 4 个字符的数据类型。

我很难理解为什么以下内容不起作用：

```
rowTxt VARCHAR2(60);
rowTxt := substr(text, (pos + 1), 60); 
```

我一直有一个例外

> ORA-06502: PL/SQL: 数字或值错误: 字符串缓冲区太小

谁能给我一些理由？

希尔德干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:06:39.270

也许这与 nls_length_semantics 有关。

Varchar2(60) 可能表示 60 个字符，但也可能表示 60 个字节。如果 nls_length_semantics 设置为 BYTE，则意味着 60 个字节。

SUBSTR(,1,60) 将返回 60 个字符。如果这些字符中的一个或多个使用超过 1 个字节，则会出现异常。

要尝试此操作，请将您的字符串声明为 VARCHAR2(60 CHAR)。

[http://www.oracle-base.com/articles/9i/character-semantics-and-globalization-9i.php](http://www.oracle-base.com/articles/9i/character-semantics-and-globalization-9i.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:47:56.203

结果的大小不是从参数中推断出来的。在许多情况下，无论如何这是不可能的。

使用 Cast(substr(text, (pos + 1), 60) as varchar2(60)) 来解决这个问题。

# android - 动画之间与引擎同步

> ID：14558362
> 
> 赞同：1
> 
> 时间：2013-01-28T08:44:40.807
> 
> 标签：android, animation, synchronization, andengine

我正在使用**Andengine**开发一个 Android 游戏，这是一个**赌场游戏 - 轮盘赌（你可以**[在这里](http://www.rouletteedu.com/american-roulette.php)看到一个例子）。

在我的游戏中，轮盘赌桌上没有数字，而是有项目。因此，当轮盘赌桌旋转时，项目也随之旋转。

我的问题是，这些项目是通过使用**PathModifier**旋转的，所以我可以决定每一轮的总时间。但是，轮盘赌桌是**AnimatedSprite**，我只能决定帧的持续时间，而不是总时间。因此，即使我为它们计算了相等的时间，它们也没有相互同步。请给我一个解决方案。

先感谢您。

# java - 使用 JAXB 根 据属性创建引用对象

> ID：14558367
> 
> 赞同：3
> 
> 时间：2013-01-28T08:45:00.147
> 
> 标签：java, xml, jaxb

考虑以下 xml：

```
<Config>
    <Paths>
        <Path reference="WS_License"/>
    </Paths>

    <Steps>
        <Step id="WS_License" title="License Agreement" />
    </Steps>
</Config> 
```

以下 JAXB 类：

```
public class Path {

    private String _reference;

    public String getReference() {
        return _reference;
    }

    @XmlAttribute
    public void setReference( String reference ) {
        _reference = reference;
    }

} 
```

和

```
public class Step {

    private String _id;
    private String _title;

    public String getId() {
        return _id;
    }

    @XmlAttribute
    public void setId( String id ) {
        _id = id;
    }

    public String getTitle() {
        return _title;
    }

    @XmlAttribute
    public void setTitle( String title ) {
        _title = title;
    }

} 
```

我不想将 Path 对象中的引用存储为 String，而是将其保存为 Step 对象。这些对象之间的链接是引用和 id 属性。@XMLJavaTypeAdapter 属性是要走的路吗？谁能提供一个正确用法的例子？

谢谢！

**编辑：**

我也想对元素做同样的技术。

考虑以下 xml：

```
<Config>
    <Step id="WS_License" title="License Agreement">
        <DetailPanelReference reference="DP_License" />
    </Step>

    <DetailPanels>
        <DetalPanel id="DP_License" title="License Agreement" />
    </DetailPanels>
</Config> 
```

以下 JAXB 类：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Step {

    @XmlID
    @XmlAttribute(name="id")
    private String _id;

    @XmlAttribute(name="title")
    private String _title;

    @XmlIDREF
    @XmlElement(name="DetailPanelReference", type=DetailPanel.class)
    private DetailPanel[] _detailPanels; //Doesn't seem to work

}

@XmlAccessorType(XmlAccessType.FIELD)
public class DetailPanel {

    @XmlID
    @XmlAttribute(name="id")
    private String _id;

    @XmlAttribute(name="title")
    private String _title;

} 
```

Step-object 中的属性 _detailPanels 为空，链接似乎不起作用。是否有任何选项可以创建链接而不创建仅包含对 DetailPanel 的引用的新 JAXB 对象？

再次感谢 ： ）！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T09:39:22.663

您可以使用`@XmlID`将属性映射为键并将`@XmlIDREF`引用映射到此用例的键。

**步**

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Step {

    @XmlID
    @XmlAttribute
    private String _id;

} 
```

**小路**

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Path {

    @XmlIDREF
    @XmlAttribute
    private Step _reference;

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/10/jaxb-and-shared-references-xmlid-and.html](http://blog.bdoughan.com/2010/10/jaxb-and-shared-references-xmlid-and.html)

* * *

**更新**

> 谢谢！我完全错过了你的文章。我已经扩展了我的问题，如果这也可能，您是否有任何线索？我不想创建一个只保存引用的类，我想将它存储在 step 类中。

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

如果您使用 MOXy 作为您的 JAXB (JSR-222) 提供程序，那么您可以将`@XmlPath`注释用于您的用例。

```
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlAccessorType(XmlAccessType.FIELD)
public class Step {

    @XmlID
    @XmlAttribute
    private String id;

    @XmlPath("DetailPanelReference/@reference")
    @XmlIDREF
    // private List<DetailPanel> _detailPanels; // WORKS
    private DetailPanel[] _detailPanels; // See bug:  http://bugs.eclipse.org/399293

} 
```

**了解更多信息**

*   [http://bugs.eclipse.org/399293](http://bugs.eclipse.org/399293)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)
*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)

# php - Facebook 附加页面

> ID：14558369
> 
> 赞同：0
> 
> 时间：2013-01-28T08:45:18.483
> 
> 标签：php, facebook, facebook-like

我遇到了这个 facebook 页面。

[https://www.facebook.com/hadalabosg](https://www.facebook.com/hadalabosg)

除了通常的照片、点赞、笔记和视频页面外，该页面还有一个名为“免费乳液/免费样品”的附加页面。当我进入**免费样品**页面时，该页面要求我“点*赞*”该页面才能输入我的详细信息。我继续“*喜欢*”页面并刷新页面。刷新后，FaceBook 会提示我允许访问应用程序或授予代表我发布提要的权限，这类似于应用程序。

我可以知道，我如何为我的页面创建一个额外的页面并执行与上面类似的操作。提前致谢。

# dynatree - Dynatree - 每个节点 2 个链接？

> ID：14558377
> 
> 赞同：0
> 
> 时间：2013-01-28T08:45:51.167
> 
> 标签：dynatree

有谁知道是否可以让 DynaTree jquery 插件处理每个节点的两个 HREF 链接？

我有一个链接工作正常，但我也在查看在每个可点击节点的右侧显示“联系人”图像的请求，单击该节点时会产生其他用户的弹出窗口（我知道，不是我的设计）处理同一个项目。

我可以使用 SPAN 标签相当容易地显示图像，但由于现有的 HREF 是被 OnActivate 捕获的，所以我很难让它做任何事情。

欢迎所有建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:35:54.553

我发现了一个更好的方法。

```
<script type="text/javascript">
     $(function () {
         $("#tree").dynatree({
             initAjax: {
                 type: "POST", 
                 url: "TreeView/GetNodes"

                // This gets data from an MVC3 controller
                // in the form of a serialised list of nodes
               // with custom attributes.

             },
             //here's the meat of it - 
             // elements are created and added 
             // according to the custom data values in the node

             onRender: function (node, nodeSpan) {
                 if (node.data.hasPostImage) {
                     var postImg = document.createElement('img');
                     postImg.setAttribute('src', node.data.postImageUrl);
                     postImg.setAttribute('class', node.data.postImageClass);
                     postImg.setAttribute('alt', node.data.postImageAltText);
                     postImg.setAttribute('onClick', 'javascript:loadContacts(\'' + node.data.postImageScriptHref + '\');');

                     // the element is then appended to the Anchor tag (title)
                     // using jquery.after.

                     // it works really well, except for IE7\.  Working on that now.

                     $(nodeSpan).find('.dynatree-title').after(postImg);
                 }
             },
             onClick: function (node) {
             node.toggleExpand();
             }
         });
     });    
  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:19:47.100

我注意到直接输出树允许我在结构中嵌入图像标签，如下所示 -

```
<div id="tree">
    <ul id="treeData" style="display: none;">
        @foreach (var provider in Model.Locations)
        {
            <li class="folder"  data="icon: 'false', addClass: 'root-node'">@provider.Provider
                <ul>
                @foreach (var profession in provider.ChildLocations)
                {
                    <li id="@profession.Id">@profession.Profession &nbsp;<img class="contactsImg" onclick="loadContacts();" src="../../Content/themes/default/images/icons/contacts.png" />
                        <ul>
                            @foreach (var formtype in profession.ChildLocations)
                            {
                                <li class="folder" id="@formtype.Id" data="addClass: 'progress-bar'">@formtype.Type

                                    <ul>
                                       @foreach (var form in formtype.ChildLocations)
                                       {
                                          <li id="@form.Id" data="addClass: 'progress-bar'">@Ajax.ActionLink(form.Form, "PartialIndex", "FormCover", new { Id = form.formId }, new AjaxOptions { UpdateTargetId = "contentpanel" })
                                                <ul>
                                                    @foreach (var lo in form.ChildLocations)
                                                    {
                                                        <li id="@lo.Id" data="addClass: 'action-required'">@Ajax.ActionLink(lo.Name, "ActualFormTab", new {formid = form.formId, layoutid = lo.formId}, new AjaxOptions{ UpdateTargetId = "contentpanel"})</li>
                                                    }
                                                </ul>
                                          </li>
                                       }   
                                    </ul>

                                </li>
                            }
                        </ul>
                    </li>
                }
                </ul>
            </li>
        }
    </ul>
</div> 
```

而且，正如演示的那样，将 OnClick 事件添加到图像非常简单。

# facebook - 用户选择“跳过”时的响应

> ID：14558379
> 
> 赞同：0
> 
> 时间：2013-01-28T08:46:16.173
> 
> 标签：facebook, dialog

当我请求 manage_pages 和 publish_stream 权限并且用户单击跳过时，我仍然在响应中得到一个代码。有什么方法可以查明用户是否在对话框中选择了允许或跳过？

# python - 如何从python中没有特定列的数组中读取

> ID：14558387
> 
> 赞同：1
> 
> 时间：2013-01-28T08:46:30.263
> 
> 标签：python, numpy, python-2.7, pandas, data-analysis

我有一个 dtype = object 的 numpy 数组（实际上是各种数据类型的列表）。所以它创建了一个二维数组，因为我有一个列表数组（？）。我想将此数组的每一行和仅某些列复制到另一个数组。我将数据从 csv 文件存储在这个数组中。此 csv 文件包含多个字段（列）和大量行。这是我用来将数据存储到数组中的代码块。

```
data = np.zeros((401125,), dtype = object)
for i, row in enumerate(csv_file_object):
    data[i] = row 
```

数据基本上可以描述如下

```
column1  column2  column3  column4  column5 ....
1         none     2       'gona'    5.3
2         34       2       'gina'    5.5
3         none     2       'gana'    5.1
4         43       2       'gena'    5.0
5         none     2       'guna'    5.7
.....     ....   .....      .....    ....
.....     ....   .....      .....    ....
.....     ....   .....      .....    .... 
```

中间有我想要删除的不需要的字段。假设我不想要第 3 列。如何从我的数组中仅删除该列？或者仅将相关列复制到另一个数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:17:28.663

使用[熊猫](http://pandas.pydata.org/)。在我看来，对于您的各种类型的数据，`pandas.DataFrame`可能更合适。

```
from StringIO import StringIO
from pandas import *
import numpy as np

data = """column1  column2  column3  column4  column5
1         none     2       'gona'    5.3
2         34       2       'gina'    5.5
3         none     2       'gana'    5.1
4         43       2       'gena'    5.0
5         none     2       'guna'    5.7"""

data = StringIO(data)
print read_csv(data, delim_whitespace=True).drop('column3',axis =1) 
```

*出去：*

```
 column1 column2 column4  column5
0        1    none  'gona'      5.3
1        2      34  'gina'      5.5
2        3    none  'gana'      5.1
3        4      43  'gena'      5.0
4        5    none  'guna'      5.7 
```

如果您需要一个数组而不是 DataFrame，请使用以下`to_records()`方法：

```
df.to_records(index = False)
#output:
rec.array([(1L, 'none', "'gona'", 5.3),
           (2L, '34', "'gina'", 5.5),
           (3L, 'none', "'gana'", 5.1),
           (4L, '43', "'gena'", 5.0),
           (5L, 'none', "'guna'", 5.7)], 
            dtype=[('column1', '<i8'), ('column2', '|O4'),
                   ('column4', '|O4'), ('column5', '<f8')]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T09:18:39.170

假设您正在读取 CSV 行并将它们粘贴到一个`numpy`数组中，最简单和最好的解决方案几乎肯定是在数据到达数组之前对其进行预处理，正如 Maciek D. 的回答所示。（如果你想做一些比“删除第 3 列”更复杂的事情，你可能想要类似的东西`[value for i, value in enumerate(row) if i not in (1, 3, 5)]`，但想法仍然是一样的。）

但是，如果您已经导入了数组并且想要在事后过滤它，您可能想要[`take`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.take.html#numpy.take)or [`delete`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.delete.html)：

```
>>> d=np.array([[1,None,2,'gona',5.3],[2,34,2,'gina',5.5],[3,None,2,'gana',5.1],[4,43,2,'gena',5.0],[5,None,2,'guna',5.7]])
>>> np.delete(d, 2, 1)
array([[1, None, gona, 5.3],
       [2, 34, gina, 5.5],
       [3, None, gana, 5.1],
       [4, 43, gena, 5.0],
       [5, None, guna, 5.7]], dtype=object)
>>> np.take(d, [0, 1, 3, 4], 1)
array([[1, None, gona, 5.3],
       [2, 34, gina, 5.5],
       [3, None, gana, 5.1],
       [4, 43, gena, 5.0],
       [5, None, guna, 5.7]], dtype=object) 
```

对于“删除第3列”的简单情况，`delete`更有意义；对于更复杂的情况，`take`可能更有意义。

如果您还没有弄清楚如何首先导入数据，您可以使用内置[`csv`](http://docs.python.org/2/library/csv.html)模块和 Maciek D. 之类的代码和过程，或者使用类似[`pandas.read_csv`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)和后处理的东西结果，如根的答案所示。

但首先使用本机`numpy`数据格式而不是 CSV 可能会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T08:56:02.950

您可以使用范围选择。例如。要删除 column3，您可以使用：

```
data = np.zeros((401125,), dtype = object)
for i, row in enumerate(csv_file_object):
    data[i] = row[:2] + row[3:] 
```

假设 csv_file_object 产生列表，这将起作用。如果它是一个使用 创建的简单`file`对象，请在循环`csv_file_object = open("file.cvs")`中添加：`split`

```
data = np.zeros((401125,), dtype = object)
for i, row in enumerate(csv_file_object):
    row = row.split()
    data[i] = row[:2] + row[3:] 
```

# ios - RestKit 0.20.0 获取对象

> ID：14558389
> 
> 赞同：1
> 
> 时间：2013-01-28T08:46:39.357
> 
> 标签：ios, restkit

我是restkit的新手。我按照github的说明成功集成了restkit 0.20.0-pre6。然后我在控制台中构建了我的项目，我得到了以下

restkit:RKLog.m:34 RestKit 日志记录已初始化...

之后我想在路径上获取数据

最初有一个激活屏幕。所以我想向它发送激活码，如果正确，我想获得相应的详细信息。

```
NSURL *urll=[NSURL URLWithString:@"http://url/FirstRest/rest/application/Activate"];
AFHTTPClient* client = [[AFHTTPClient alloc] initWithBaseURL:urll];
RKObjectManager *manager = [[RKObjectManager alloc] initWithHTTPClient:client];
[RKObjectManager setSharedManager:manager];

Article *article = [Article new];
article.activationCode = @"S1234";
[manager.router.routeSet addRoute:[RKRoute routeWithClass:[Article class] pathPattern:@"/FirstRest/rest/application/Activate/:activationCode" method:RKRequestMethodGET]];

[[RKObjectManager sharedManager] getObject:article path:nil parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *result)
{
    // Request
    NSLog(@"result is ************* %@",result);
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
                       UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                      [alert show];
}]; 
```

`

在我的控制台中，我得到了

```
 I restkit.network:RKHTTPRequestOperation.m:179 GET 'http://url/FirstRest/rest/application/Activate/S1234' (200 OK) [1.4744 s] 
```

2013-01-28 14:07:59.284 Polls[985:15103] E restkit.network:RKResponseMapperOperation.m:240 无法解析响应数据：加载了内容类型为“application/json”的无法处理的响应 (200)

我无法找出它的真正含义以及如何克服它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:41:11.773

您作为响应获得的 JSON 可能格式不正确。

我遇到了类似的情况并检查了实际的错误对象（CMD+SHIFT+F 表示“无法解析响应”，您会找到这些行）。

在打印错误描述后，**我发现我得到的 JSON 有重复的键**，因此不可解析（尽管大多数浏览器/json 查看器只是忽略了它）。

# php - Batch-API：我在这段代码中做错了什么？

> ID：14558390
> 
> 赞同：0
> 
> 时间：2013-01-28T08:46:39.073
> 
> 标签：php, drupal-7, nodes

我正在尝试开发一个模块来一次插入很多节点，我想使用 Batch-API 来显示操作的进度。

我将示例读入“示例”模块并编写了此代码。

但不要做任何事。我可以看到进度条往前走，但它不保存任何节点。

谁可以帮我这个事？

```
function custom_content_archive_import_contents_submit($form, &$form_state) {
    $file=$form_state['values']['file'];
    unset($form_state['values']['file']);
    $file->status = FILE_STATUS_PERMANENT;
    file_save($file);
    drupal_set_message(t('The file @filename was uploaded successfully.', array('@filename' => $file->filename)));

    ini_set('auto_detect_line_endings',TRUE);
    $path = drupal_realpath($file->uri);
    $importer = new CsvImporter($path, true, variable_get('custom_content_archive_file_delimiter'), variable_get('custom_content_archive_file_enclosure'));
    $data = $importer->get();
    ini_set('auto_detect_line_endings',FALSE);

    $_SESSION['http_request_count'] = 0; // reset counter for debug information.
    $all_data = array(
        'ctype' => $form_state['values']['list'],
        'data' => $data,
        'user' => $form_state['values']['user'],
        'lang' => $form_state['values']['languages'],
    );
    batch_set(start_batch_creation_nodes($all_data));
}

function start_batch_creation_nodes($all_data) {
    $num_operations = count($all_data['data']);

    $operations = array();
    $i = 0;
    // leggo il file uploadato e creo i nodi
    foreach ($all_data['data'] as $node) {
         $operations[] = array('create_node', 
                          array($node,
                                $all_data['ctype'],
                                $all_data['user'],
                                $all_data['lang'],
                                t('(Operation @operation)', array('@operation' => $i))
                          )
         );
         $i++;
    }

    $batch = array(
        'operations' => $operations,
        'finished' => 'custom_content_archive_import_contents_finished',
    );
    return $batch;
}

function create_node($arrnode, $ctype, $user, $lang, $operation_details, &$context) {
    $node = new stdClass(); // Create a new node object
    $node->type = $ctype; // Or page, or whatever content type you like
    node_object_prepare($node); // Set some default values
    $node->uid = $user; // UID of the author of the node; or use $node->name
    $node->language = $lang; // Or e.g. 'en' if locale is enabled
    $node->promote = 0;

    foreach ($arrnode as $field => $value){
        switch ($field) {
            case 'title':
                $node->title = $arrnode['title'];
                break;
            case'body':
                $node->body[LANGUAGE_NONE][0]['value'] = nl2br($arrnode['body']);
                $node->body[LANGUAGE_NONE][0]['summary'] = text_summary($bodytext);
                $node->body[LANGUAGE_NONE][0]['format'] = 'filtered_html';
                break;
            default:
                $arrfield = field_info_field($field);
                switch ($arrfield['type']) {
                    case 'datetime':
                         $my_date = new DateTime($value);
                         $node->{$field}[LANGUAGE_NONE][0][value] = date_format($my_date, 'Y-m-d H:i:s');
                         break;
                    case 'text':
                         $node->{$field}[LANGUAGE_NONE][0][value] = $value;
                         break;
                    case 'email':
                         $node->{$field}[LANGUAGE_NONE][0][email] = $value;
                         break;
                    case 'link_field':
                         $node->{$field}[LANGUAGE_NONE][0][url] = $value;
                         break;
                }
        }
    }

    if($node = node_submit($node)) { // Prepare node for saving
        node_save($node);
        workflow_execute_transition($node, 3, $comment = NULL, $force = TRUE);
        // Store some results for post-processing in the 'finished' callback.
        // The contents of 'results' will be available as $results in the
        // 'finished' function (in this example, batch_example_finished()).
        $context['results'][] = $node->nid . ' : ' . check_plain($node->title);

        // Optional message displayed under the progressbar.
        $context['message'] = t('Saving node "@title"', array('@title' => $node->title)) . ' ' . $operation_details;

        _custom_content_archive_import_contents_update_http_requests();
    }

}

function custom_content_archive_import_contents_finished($success, $results, $operations) {
    if ($success) {
        // Here we could do something meaningful with the results.
        // We just display the number of nodes we processed...
        drupal_set_message(t('@count results processed in @requests HTTP requests.', array('@count' => count($results), '@requests' => _custom_content_archive_import_contents_get_http_requests())));
        drupal_set_message(t('The final result was "%final"', array('%final' => end($results))));
    } else {
        // An error occurred.
        // $operations contains the operations that remained unprocessed.
        $error_operation = reset($operations);
        drupal_set_message(t('An error occurred while processing @operation with arguments : @args', array('@operation' => $error_operation[0], '@args' => print_r($error_operation[0], TRUE))));
    }
}

function _custom_content_archive_import_contents_update_http_requests() {
    $_SESSION['http_request_count']++;
}

function _custom_content_archive_import_contents_get_http_requests() {
    return !empty($_SESSION['http_request_count']) ? $_SESSION['http_request_count'] : 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T09:22:14.577

您必须在函数中包含 node.pages.inc 才能使 node_object_prepare() 工作。

```
module_load_include('inc', 'node', 'node.pages'); 
```

# android - Android：Json解析fb图api url

> ID：14558393
> 
> 赞同：0
> 
> 时间：2013-01-28T08:46:56.500
> 
> 标签：android, json, facebook-graph-api

在我的应用程序中，我试图从 fb graph api url 检索数据，如下所示

```
URL fbmsg = new URL("https://graph.facebook.com/"+FbPostId()+"?access_token="+TOKEN+"");
            URLConnection yc = fbmsg.openConnection();

            BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));

            String inputLine;

            String s = "";

            while ((inputLine = in.readLine()) != null)

            System.out.println(inputLine);
            //Log.d(TAG, "getPostId trace getFbPostId " + inputLine);   
            s = s + inputLine + "n";
            //Log.d(TAG, "getPostId trace getFbPostId " + s);   
            in.close();
            //System.out.println(s);

            JSONObject json = new JSONObject(inputLine);
            //JSONObject message = json.getJSONObject("message");
           String fbmessage = json.getString("message");
            System.out.println( "message: " + fbmessage ); 
```

我得到 json 格式的输出，但我无法读取消息，在这一行出现错误，出现`JSONObject json = new JSONObject(inputLine);` nullpointer 异常。下面是我的日志

```
01-28 14:05:56.384: E/FBUtils(5894): getPostId
01-28 14:05:56.384: E/FBUtils(5894): java.lang.NullPointerException
01-28 14:05:56.384: E/FBUtils(5894):    at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116)
01-28 14:05:56.384: E/FBUtils(5894):    at org.json.JSONTokener.nextValue(JSONTokener.java:94)
01-28 14:05:56.384: E/FBUtils(5894):    at org.json.JSONObject.<init>(JSONObject.java:154)
01-28 14:05:56.384: E/FBUtils(5894):    at org.json.JSONObject.<init>(JSONObject.java:171)
01-28 14:05:56.384: E/FBUtils(5894):    at org.appright.myneighborhood.utils.FBUtils.doInBackground(FBUtils.java:104)
01-28 14:05:56.384: E/FBUtils(5894):    at org.appright.myneighborhood.utils.FBUtils.doInBackground(FBUtils.java:1) 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:03:06.343

使用 StringBuilder 而不是 String 从 InputStream 读取数据并尝试从 InputStream 读取数据：

```
StringBuilder inputLine = new StringBuilder();
String s;
String NL = System.getProperty("line.separator");
while ((s = in.readLine()) != null) {
   inputLine.append(s + NL);
}
in.close();
JSONObject json = new JSONObject(inputLine.toString()); 
```

# c# - 在 silverlight 的网格中向文本框添加工具提示

> ID：14558396
> 
> 赞同：-1
> 
> 时间：2013-01-28T08:47:06.343
> 
> 标签：c#, silverlight, silverlight-4.0

```
<Grid>
<Canvas>

<TextBox Name="txt" IsReadOnly="True" Width="620" VerticalAlignment="Center"
Canvas.Left="340" Canvas.Top="5" Text="{Binding RowTitle2,Mode=OneWay}"    
ToolTipService.ToolTip="{Binding Path=Text, RelativeSource={RelativeSource Self}}"
TextWrapping="NoWrap" HorizontalAlignment="Stretch"/>

</Canvas>
</Grid> 
```

这种方式没有工具提示，那么如何添加一个？在这里我动态创建记录（网格中的txtboxes）

但在一个类似的例子中，一切都很好（没有动态调用创建txtboxes）

```
<Grid>
<Canvas>

  <TextBox Name="txt" Margin="0,5,5,0" IsReadOnly="True" Width="620" VerticalAlignment="Center"
  Canvas.Left="-200" Canvas.Top="-5" 
ToolTipService.ToolTip="{Binding Path=Text, RelativeSource={RelativeSource Self}}"
TextWrapping="NoWrap" HorizontalAlignment="Stretch"/>

</Canvas>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:19:09.133

这里有什么意义？在位于网格中的画布中使用 ReadOnly 文本框有点令人困惑。取而代之的是使用 TextBlock，它还可以提高性能、防止内存泄漏并且看起来更好。

```
 <Grid>
  <TextBlock Margin="0,5,5,0" 
VerticalAlignment="Center" 
HorizontalAlignment="Stretch"
TextWrapping="NoWrap"
Text="{Binding RowTitle2}"
ToolTipService.ToolTip="{Binding Path=Text, RelativeSource={RelativeSource Self}}"
 />
</Grid> 
```

# c# - C# 中的 Apple 推送通知服务器端

> ID：14558398
> 
> 赞同：7
> 
> 时间：2013-01-28T08:47:12.573
> 
> 标签：c#, .net, apple-push-notifications

我是 .net 的新手，在 C# 中做 apn 服务器端。我正在使用下面的代码将消息推送到苹果服务器。

```
 private void pushMessage()
    {
        int port = 2195;
        String deviceID = "4564c705 63b371aa 3811699e 1e4ac3d2 ba592b27 f2a5a613 d25cd035 xx213e54";
        String hostname = "gateway.sandbox.push.apple.com";     // TEST
        //String hostname = "gateway.push.apple.com";           // REAL

        //        @"cert.p12";
        String certificatePath = HttpContext.Current.Server.MapPath("Certi.p12");
        //X509Certificate2 clientCertificate = new X509Certificate2(certificatePath, "");

        X509Certificate2 clientCertificate = new X509Certificate2(System.IO.File.ReadAllBytes(certificatePath), "", X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.PersistKeySet | X509KeyStorageFlags.Exportable);

        X509Certificate2Collection certificatesCollection = new X509Certificate2Collection(clientCertificate);
        TcpClient client = new TcpClient(hostname, port);

        // _apnsStream = new SslStream(_apnsClient.GetStream(), false, validateServerCertificate, SelectLocalCertificate);
        //SslStream sslStream = new SslStream(client.GetStream(), false, new RemoteCertificateValidationCallback(ValidateServerCertificate),null);

        SslStream sslStream = new SslStream(client.GetStream(), false, validateServerCertificate, SelectLocalCertificate);
        try
        {
            sslStream.AuthenticateAsClient(hostname, certificatesCollection, SslProtocols.Default, false);
        }
        catch (Exception e)
        {
            throw (e);
            client.Close();
            return;
        }

        MemoryStream memoryStream = new MemoryStream();
        BinaryWriter writer = new BinaryWriter(memoryStream);
        writer.Write((byte)0);  //The command
        writer.Write((byte)0);  //The first byte of the deviceId length (big-endian first byte)
        writer.Write((byte)32); //The deviceId length (big-endian second byte)

        writer.Write(HexStringToByteArray(deviceID.ToUpper()));
        String payload = "{\"aps\":{\"alert\":\"hello\",\"badge\":0,\"sound\":\"default\"}}";
        writer.Write((byte)0);
        writer.Write((byte)payload.Length);
        byte[] b1 = System.Text.Encoding.UTF8.GetBytes(payload);
        writer.Write(b1);
        writer.Flush();
        byte[] array = memoryStream.ToArray();
        sslStream.Write(array);
        sslStream.Flush();
        client.Close();
    }

    private string HexStringToByteArray(string p)
    {
        throw new NotImplementedException();
    } 
```

在执行过程中，出现“对 SSPI 的调用失败，请参阅内部异常”之类的错误。

![在此处输入图像描述](../Images/39a0317a8f288ba5fa763fa8d0d0f22b.png)

![在此处输入图像描述](../Images/d5016ec15db5e23334666932bb0e6f1a.png)

我在这里做错或错过了。Windows 中需要安装任何证书吗？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T10:41:05.467

我在 PushNotification.class 文件中更改了我的代码

```
_certificate = string.IsNullOrEmpty(p12FilePassword)? new X509Certificate2(File.ReadAllBytes(p12File)): new X509Certificate2(File.ReadAllBytes(p12File), p12FilePassword); 
```

和

```
_certificate = string.IsNullOrEmpty(p12FilePassword) ? new X509Certificate2(File.ReadAllBytes(p12File)) : new X509Certificate2(File.ReadAllBytes(p12File), p12FilePassword, X509KeyStorageFlags.MachineKeySet); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-01-05T20:05:27.060

所以试试....

```
SslStream sslStream = new SslStream(client.GetStream(), false,
    new RemoteCertificateValidationCallback(ValidateServerCertificate), null);

....

public static bool ValidateServerCertificate(object sender,
                                             X509Certificate certificate,
                                             X509Chain chain,
                                             SslPolicyErrors sslPolicyErrors)
{
  if (sslPolicyErrors == SslPolicyErrors.None)
    return true;

  gerarLog("Certificate error: " + sslPolicyErrors);

  // Do not allow this client to communicate with unauthenticated servers.
  return false;
}

public static byte[] HexStringToByteArray(string hexString)
{
  byte[] HexAsBytes = new byte[hexString.Length / 2];
  for (int index = 0; index < HexAsBytes.Length; index++)
  {
    string byteValue = hexString.Substring(index * 2, 2);
    HexAsBytes[index] = byte.Parse(byteValue, NumberStyles.HexNumber, CultureInfo.InvariantCulture);
  }
  return HexAsBytes;
} 
```

# jquery - 如何防止 CKEditor 将标题设置为其 iframe？

> ID：14558400
> 
> 赞同：5
> 
> 时间：2013-01-28T08:47:15.460
> 
> 标签：jquery, attributes, ckeditor, tooltip, title

我使用 CKEditor 和 jQuery UI 的工具提示插件。发生的情况是 CKEditor 将 title 属性设置为其 iframe 元素，然后 jQuery 工具提示插件将其转换为工具提示，然后，每当您将鼠标悬停在编辑器的任何部分上时（每次编辑文本时都必须这样做） ，工具提示总是显示，说“富文本编辑器，elementId”。

即使我将工具提示插件的选择器设置为“*:not(iframe)”，它仍然会这样做。到目前为止，我发现让它不为 iframe 设置工具提示的唯一方法是从选择器中排除“div”，但随后我也会丢失编辑器的粗体/斜体等选项的工具提示。

而且我在CKEditor的Javascript中找不到设置iframe标题的代码部分，所以我可以删除它。我发现的一部分是语言文件中的实际标题字符串，我可以用空字符串替换“富文本编辑器”，但它仍然将 iframe 的标题设置为“，{elementId}”。

任何帮助表示赞赏，我很想保留这两个插件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-02T16:57:30.320

Bumped into the exact same problem, developing a custom CMS for another developer who isn't likely to need a screen reader anytime soon.

Thanks [mihaisimi](https://stackoverflow.com/users/1448554/mihaisimi) for your pointer. With a bit of digging into CKEditor instance properties, I ended up writing the JS bit below to remove the "Rich text editor, element_id" title from the content area.

```
CKEDITOR.on("instanceReady", function(e) {
 var $frame = $(e.editor.container.$).find(".cke_wysiwyg_div");
 if($frame) $frame.attr("title", "");
}); 
```

So basically as soon as the CKEditor loads I'm wrapping the CKEditor's container in a jQuery object, I look for the actual content `div` with [.find()](http://api.jquery.com/find/) and remove its title with [.attr()](http://api.jquery.com/attr/).

Please note this solution requires jQuery. I'm using CKEditor version 4.1.1 in 'div mode'. Anyone using a similar version in 'iframe mode' would probably get away with changing `.find(".cke_wysiwyg_div")` to `.find(".cke_wysiwyg_frame")`.

You could append the bit of code to the ckeditor/config.js file, for example. Its not pretty, but it works.

Hope my solution helps anyone bumping into this problem.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-20T13:23:01.700

您可以通过配置选项消除编辑器区域的标题（成为工具提示）：

```
config.title = false; 
```

请参阅[http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-title](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-title)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-09T14:02:25.617

您可以在工具提示选项中定义：

```
$( document ).tooltip({
    items: "input[title],p[title],span[title],td[title],img[title],a[title]",
}); 
```

对于您想要预期 iFrame 的所有标签！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T11:57:54.007

您可以使用简单的 javascript 轻松进行设置。您在下面有一个示例。在我的情况下，ck 4.0.1 用于所有以“webedit”开头的 id 的页面 div，工具提示被我存储在评论属性中的文本替换。

一个 div 看起来像这样：

```
<div id="webedit1" comment="My own tooltip"> 
```

在创建实例时，我的代码会重置标题并将其替换为我的评论：

```
CKEDITOR.on( 'instanceReady', function( event ) {
        var editor = event.editor;
        var divElement = event.editor.element.$;

        if(divElement){
            var divComment = divElement.getAttribute("comment");
            if(divComment){
                divElement.title=divComment;
            }
        }
    }); 
```

祝你有美好的一天，米海

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T13:59:27.223

[这是设置标题的地方。](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/wysiwygarea/plugin.js#L61)如您所见，编辑器无法更改它，因为这对于屏幕阅读器和一般 a11y 来说是至关重要的。但是，您可以更改*所见即所得插件*的代码以获得不同的东西。

# cmake - 配置调用cmake的脚本

> ID：14558409
> 
> 赞同：1
> 
> 时间：2013-01-28T08:47:53.627
> 
> 标签：cmake, configure

我正在考虑编写一个执行 cmake 的简单配置脚本（类似于 autoconf 之一）。但在此之前，我想检查是否有人已经知道这样的努力。我在谷歌上找不到任何东西。

它应该能够支持基本的 autoconf 配置标志（主要是前缀、exec-prefix、bindir）。

这样做的原因当然是有一定的用户期望能够做到`./configure && make`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:55:37.563

也不是真正的答案，但评论太长了：

在阅读了 cmake / [cpack 之后](http://cmake.3232098.n2.nabble.com/How-to-deliver-a-source-code-package-td6505888.html)，我至少可以告诉你这一点。Cmake 期望出现在平台上。因此 CPack 无法生成与 autotools 相同类型的 ./configure 脚本。Autotools 期望存在一些 shell，这与存在的 cmake 基本相同。然而，由于 cmake 也针对 Win 环境，它不能依赖于 shell。话虽如此，[CPack](http://www.cmake.org/Wiki/CMake%3aPackaging_With_CPack)可以提供源码包，需要用 cmake 以通常的方式安装。

这也不能解决您的问题，我不建议为 cmake 编写工具。Cmake 能够使用您感兴趣的所有这些类型的前缀。如果用户想从头开始编译您的程序，他必须至少了解构建系统的基础知识（例如设置变量）。对于自动工具也是如此。如果你想减轻他的痛苦，你可以提供二进制 .sh、.deb 或 .rpm 包，可以使用 cmake / [cpack](http://www.cmake.org/Wiki/CMake/CPackExample)轻松构建。

# php - 如何确保在不使用锁的情况下自动执行某些语句？

> ID：14558412
> 
> 赞同：1
> 
> 时间：2013-01-28T08:48:10.433
> 
> 标签：php, apc

我的疑问：是否有一种方法可以确保一系列语句以原子方式执行。但有一件事是确定我们不需要使用锁。那么，有什么优雅的方法可以做到这一点。例如我需要在 php.ini 中做同样的事情。例如：要执行的语句：

1.  从 APC 缓存中获取密钥。
2.  对此进行一些操作..让我们说增加它。
3.  再次将其保存到缓存中。

我需要它来原子地做这些事情，因为很多进程可以同时更新同一件事。

谢谢，瓦伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:53:21.747

信号量是其中一种方法：

[http://php.net/manual/en/intro.sem.php](http://php.net/manual/en/intro.sem.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:30:38.043

锁、互斥体、信号量都是为了保证多任务/并行计算机中的原子性而发明的。

有一些方法可以优化锁定：最糟糕的情况是在循环中忙于等待资源准备好；而更好的解决方案涉及信令/排队以获取资源。

在这一点上应该清楚的是，在没有锁定的情况下，你可以做很多事情来实现原子性，特别是当***某个****时刻有多个指令在执行时，即使是在单个 CPU 内核中（它称为**流水线**）*。

也就是说，这里之前**已经**问过这个问题：[APC 缓存和原子操作](https://stackoverflow.com/questions/2434099/apc-caching-and-atomic-operations)

# c - scanf("%s",input) 不能正常工作

> ID：14558417
> 
> 赞同：0
> 
> 时间：2013-01-28T08:48:32.193
> 
> 标签：c, scanf

我正在尝试将我的诺基亚 N95 与 Proteus 接口。它几乎可以正常工作，除了一件事。当我想从调制解调器获得响应时，我使用`unsigned char input[20]`and `scanf("%s",input)`。当调制解调器收到呼叫时，它会发送`RING`到端口，但我得到的`scanf`是`RIG`or `RNG`。可能是什么问题？

```
#include <regx51.h>
#include <stdio.h>
#include <string.h>

sbit TE = P2^4;//for transmitting
unsigned char ch;
unsigned char ch2;

long i;
short bakar=0;

unsigned char Command_AT[]="AT\r";

unsigned char xdata Command_CPIN[]="AT+CPIN =\"0000\"\r"; 

unsigned char Command_CMGF[]="AT+CMGF=1\r"; 

unsigned char Command_CMGS[]="AT+CMGS =\"5555\"\r"; 

unsigned char msg_report[]="Ok";

unsigned char CtrlZ=0x1A;                   

unsigned char xdata Status_Ok[]="AT\rOK";

unsigned char Command_CHUP[]="AT+CHUP\r";

unsigned char input[10];

void iniSerial()
{
    TMOD=0x20;  
    TH1=0XFD;
    SCON=0x50;
    TR1=1;
    TI=1;
    RI=0;
}
void delay() 
{
    for(i=1;i<=30000;i++); //Dont know how much exactly
}
void delay2()
{
    for(i=1;i<=50000;i++);
}
void sendDeliveryReport() 
{

    puts(Command_AT);
    delay();
    puts(Command_CMGF);
    delay();
    puts(Command_CMGS);
    delay();
    puts(msg_report);
    while(TI == 0);
    SBUF = 0x1A;
}
void checkRing()
{
    while(bakar!=1)
    {
        scanf("%s",&input);//problem is here

        if(strcmp(input,"RING") == 0)
        {
            bakar=1;
            delay();
            puts(Command_CHUP);
        }
        delay2();               
    }
}
void main()
{
    delay2();   //Wait for GSM modem to start.
    TE=1;       //Don't trasmit yet
    iniSerial();
    checkRing();
    TE=0;
    iniSerial();
    sendDeliveryReport();
    while(1);   //Pause forever
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T09:49:43.597

该代码真的可以编译吗？void checkRing() 中的 if 语句的括号不匹配。

附言。对不起“答案”而不是评论，但我的声誉不允许评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T09:16:03.127

你的线路

```
scanf("%s",&input); 
```

完全是错误的。一个好的编译器应该会告诉你是否有不错的警告级别。

`&input`是 类型的`unsigned char (*)[10]`，即指向`unsigned char`数组的指针。利用

```
scanf("%s",input); 
```

反而。这里`input`衰减到 a ，**如果**您期望的是真正的字符串而不是任意数据`unsigned char*`，这就是您想要的。如果您的数据可能包含 0 个字节，则必须使用或等效的东西。**`read`**

 ***编辑：*如果您的输入确实是字符串，请使用`char`而不是`unsigned char`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T10:15:36.313

我必须说这段代码似乎会招致黑客攻击。

该行将`scanf("%s",&input);`字节读取到换行符为止，然后将其读取到堆栈上的缓冲区中。如果读取的字节数超过 10 个，则缓冲区溢出并且堆栈损坏。
从那里，覆盖返回地址和执行任意代码的方法很短。

您必须使用`fgets`，它允许您限制读取的字节数，然后`fscanf`在分隔符处停止，或者使用 Daniel Fischer 建议的格式字符串`"%9s"`，它不会在缓冲区中存储超过 10 个字节（9 +终止空）。**

# linux - 比较Linux中的两个文件：忽略第一行和最后一行

> ID：14558418
> 
> 赞同：11
> 
> 时间：2013-01-28T08:48:33.140
> 
> 标签：linux, comparison, diff

我想比较两个文件，但我不想考虑前 10 行和两个文件的最后 3 行。我尝试使用 diff 和 tail 命令来做到这一点，就像在[这里](http://www.coderanch.com/t/111217/Linux-UNIX/Command-compare-files-starting-line)一样，但没有成功。我该怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T09:02:27.967

使用 GNU`tail`和`head`：

要忽略文件的前 10 行，请`tail`像这样使用：

```
tail -n +11 file 
```

要忽略文件的最后 3 行，请`head`像这样使用：

```
head -n -4 file 
```

[然后，您可以使用进程替换](http://tldp.org/LDP/abs/html/process-sub.html)构造您的`diff`命令，如下所示：

```
diff <(tail -n +11 file | head -n -4) <(tail -n +11 file2 | head -n -4) 
```

# scriptella - 在 Scriptella 中复制 blob 字段

> ID：14558421
> 
> 赞同：0
> 
> 时间：2013-01-28T08:48:46.343
> 
> 标签：scriptella

我正在使用**Scriptella**进行数据库迁移。将 longblob 字段从表 A 复制到表 B 的最佳方法是什么？

当我像这样做这项工作时：

```
<query ...
  SELECT FL_DATA as data FROM A where FL_DATA IS NOT NULL
  <script ...>
    INSERT B (FL_DATA) VALUES ('$data');
  </script>
</query> 
```

然后它只会将“BLOB: java.io.IOException: Content too long to fit in memory”写入目标字段（顺便说一句：longblob 的大小只有几 kBytes）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:06:28.127

当使用 $variable 语法时，变量的文本值被简单地插入到语句的文本中。推荐的方法是使用准备好的语句语法。在这种情况下，值将与 SQL 语句分开传输。请尝试以下方法：

```
<query ...
  SELECT FL_DATA as data FROM A where FL_DATA IS NOT NULL
  <script ...>
    INSERT B (FL_DATA) VALUES (?data);
  </script>
</query> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:21:03.513

抱歉，这不是答案，但我不知道如何评论 ejboy 的答案。

Ejboy，它对我不起作用。我已经尝试使用（在我的情况下）?description 和?2 准备好的声明。当我尝试在控制台上显示内容时遇到同样的错误：

```
<query connection-id="database">
    SELECT id, description FROM table;
    <script connection-id="copy_database">
        INSERT INTO table VALUES (?1, ?2);
    </script>
    <script connection-id="text">
      $id, $description
    </script>
</query> 
```

对于显示和插入，我都得到相同的错误（这里是显示示例）：

```
BRA0735401, CLOB: java.io.IOException: Content too long to fit in memory 
```

我的主要任务是从一个数据库复制到另一个数据库。就像 Jan 的情况一样，blob/clob 内容约为 40 kB（键/值列表，每个在单独的行中，从数据库的角度来看，这是 MySQL MEDIUMTEXT）。我知道，可以插入一个 blob/clob从文件（带有mp3文件的scriptella示例），并且可以将blob的内容写入文件（带有odbc的scriptella示例和带有janino的图片），所以我将尝试使用带有临时文件的解决方案，但它是不是一个漂亮的解决方案。我对吗？

有没有更简单的解决方案？

问候， 雅克

# visual-studio - 在 Microsoft Visual Studio 中禁用解决方案级别的代码分析

> ID：14558422
> 
> 赞同：12
> 
> 时间：2013-01-28T08:48:55.373
> 
> 标签：visual-studio, visual-studio-2012

在我们的产品中，大约有 400 个项目，所以在 VS 2012 中，如果我想进行构建，那么它会为所有 400 个项目生成代码分析，我不能手动禁用每个项目的代码分析。所以我正在寻找一种机制来禁用整个解决方案（所有项目）的代码分析，而不是将这些设置应用于单个项目。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-02-24T08:14:54.190

您可以使用一个小技巧来禁用整个 Visual Studio 实例的静态代码分析，如此[处](http://www.jaylee.org/post/2013/03/30/VS2012-Temporarily-disable-the-C-static-code-analysis-for-a-whole-VS-instance.aspx)所述。简而言之：

*   打开一个`Developer Command Prompt for VS2012`
*   类型`set DevDivCodeAnalysisRunType=Disabled`
*   键入`devenv`以启动 Visual Studio

相同的解决方案适用于 Visual Studio 2015，通过`Developer Command Prompt for VS2015`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-13T21:24:52.777

您可以编写一个小控制台应用程序，从解决方案文件中读取所有项目文件，然后切换每个项目的 Xml 节点。

*从解决方案中获取项目文件的功能：*

```
public IEnumerable<string> Parse(string solutionFile)
{
    if (solutionFile == null)
        throw new ArgumentNullException("solutionFile");

    if (!File.Exists(solutionFile))
        throw new FileNotFoundException("Solution file does not exist", solutionFile);

    var projectFiles = new List<string>();

    using (var reader = new StreamReader(solutionFile, true))
    {
        while (!reader.EndOfStream)
        {
            var line = reader.ReadLine();
            if (line == null)
                continue;

            line = line.TrimStart();
            if (!line.StartsWith("Project(", StringComparison.OrdinalIgnoreCase)) 
                continue;

            var projectData = line.Split(',');
            var projectFile = projectData[1].Trim().Trim('"');
            if (!string.IsNullOrEmpty(Path.GetExtension(projectFile)))
                projectFiles.Add(projectFile);
        }
    }

    return projectFiles;
} 
```

*以及切换 RunCodeAnalysis 节点的功能：*

```
public void ToggleCodeAnalysis(string projectFile)
{
    if (projectFile == null)
        throw new ArgumentNullException("projectFile");

    if (!File.Exists(projectFile))
        throw new FileNotFoundException("Project file does not exist", projectFile);

    var xmlDocument = new XmlDocument();
    xmlDocument.Load(projectFile);

    var namespaceManager = new XmlNamespaceManager(xmlDocument.NameTable);
    namespaceManager.AddNamespace("ns", "http://schemas.microsoft.com/developer/msbuild/2003");

    var nodes = xmlDocument.SelectNodes("//ns:RunCodeAnalysis", namespaceManager);
    if (nodes == null)
        return;

    var hasChanged = false;
    foreach (XmlNode node in nodes)
    {
        bool value;
        if (!Boolean.TryParse(node.InnerText, out value))
            continue;

        node.InnerText = value ? "false" : "true";
        hasChanged = true;
    }

    if (!hasChanged)
        return;

    xmlDocument.Save(projectFile);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T10:37:43.900

不确定VS2012是否容易做到这一点。CodeAnalysis 在项目级别定义，取决于您的构建配置。例如，Release 中没有代码分析。

首先，尝试创建基于 Release 的配置。

另一种解决方案（但非常糟糕）可能是运行批处理来修改所有项目文件。

这是一个示例项目文件（检查名为**RunCodeAnalysis**的元素）：

```
 <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <RunCodeAnalysis>false</RunCodeAnalysis>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <ItemGroup> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-29T11:12:00.257

您可以使用 Nuget 的包管理器控制台窗口来执行此操作。

在目录“C:\Users{your user}\Documents\WindowsPowerShell”中创建一个名为“NuGet_profile.ps1”的新文本文件，并添加以下代码：

```
function Disable-CodeAnalysis(){
  ForEach ($project in $dte.Solution.Projects) {
    Set-CodeAnalysis($project, $false)
  }
}

function Enable-CodeAnalysis(){
  ForEach ($project in $dte.Solution.Projects) {
    Set-CodeAnalysis($project, $true)
  }
}

function Set-CodeAnalysis($project, $value){
  $projectName = $project.Name
  $projectFilePath = $project.FullName
  if ([System.String]::IsNullOrWhiteSpace($projectFilePath)){
    if($proj.Kind -eq "{66A26720-8FB5-11D2-AA7E-00C04F688DDE}"){
      ForEach ($item in $proj.ProjectItems) {
        if($item.SubProject -ne $null){
          Set-CodeAnalysis($item.SubProject, $value)
        }
      }
    }
    continue;
  }
  $xmlDocument = new-object System.Xml.XmlDocument
  $action = "Enable"
  if($value -ne $true){
    $action = "Disable"
  }

  Write-Host "$action code analysis for $projectName at $projectFilePath"
  $xmlDocument.Load([string]$projectFilePath);

  $namespaceManager = new-object System.Xml.XmlNamespaceManager($xmlDocument.NameTable);
  $namespaceManager.AddNamespace("ns", "http://schemas.microsoft.com/developer/msbuild/2003");

  $nodes = $xmlDocument.SelectNodes("//ns:RunCodeAnalysis", $namespaceManager);
  if ($nodes -eq $null){
    continue;
  }
  foreach ($node in $nodes){
    $node.InnerText = "$value";
  }
  $xmlDocument.Save($projectFilePath);
} 
```

重新启动 Visual Studio。点击菜单“查看”| “其他窗口” | “包管理器控制台”。现在您可以执行以下命令：

```
> Enable-CodeAnalysis
> Disable-CodeAnalysis 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-26T12:22:22.493

禁用特定项目的代码分析：-

1.  右键单击项目，选择属性。
2.  在属性页面上选择代码分析。
3.  取消选中“在构建时启用代码分析”复选框。

# android - 没有这样的列名 sqlite android

> ID：14558423
> 
> 赞同：1
> 
> 时间：2013-01-28T08:48:55.467
> 
> 标签：android, sqlite

我正在尝试将列表中的一些值添加到 android sqlite 数据库，但不知何故，它似​​乎找不到表，而且我尝试在表中添加的东西根据 logcat 的顺序也不正确。我又使用了 3 个表，并在没有问题的表中添加了值。我已经为此苦苦挣扎了一段时间，但我似乎看不到问题所在。有任何想法吗？这是我的代码和错误消息：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_settings);
    currentCurrency = new ArrayList<String>();
    currentCurrencyDetails = new ArrayList<String>();
    currentCurrency.add("€");
    currentCurrencyDetails.add("€ EURO");
    currentCurrency.add("£");
    currentCurrencyDetails.add("£ UK POUND");
    currentCurrency.add("$");
    currentCurrencyDetails.add("$ USA DOLLAR");
    currentCurrency.add("¥");
    currentCurrencyDetails.add("¥ JAPAN YEN");

    db = new DBAdapter(this);
    db.open();
    for (int i = 0; i <= currentCurrency.size() - 1; i++) {
        if (i == 0) {
            db.insertDefaultCurrency(currentCurrency.get(i).toString(),
                    currentCurrencyDetails.get(i).toString(), 1);
        } else {
            db.insertDefaultCurrency(currentCurrency.get(i).toString(),
                    currentCurrencyDetails.get(i).toString(), 0);
        }
    }

} 
```

DBAdapter 类：

```
public static final String MY_CURRENT_CURRENCY_TABLE = "MyCurrency";
public static final String MY_CURRENT_CURRENCY = "MyCurrentCurrency";
public static final String MY_CURRENT_CURRENCY_NAMES = "MyCurrentCurrencyNames";
public static final String MY_CURRENT_CURRENCY_BOOLEAN = "MyCurrentCurrencyBoolean";

private static final String DATABASE4_CREATE = "CREATE TABLE "
        + MY_CURRENT_CURRENCY_TABLE + "(" + MY_CURRENT_CURRENCY + " TEXT NOT NULL, "
        + MY_CURRENT_CURRENCY_NAMES + " TEXT NOT NULL, "
        + MY_CURRENT_CURRENCY_BOOLEAN + "INTEGER NOT NULL);";

    public void onCreate(SQLiteDatabase db) {
        db.execSQL(DATABASE_CREATE);
        db.execSQL(DATABASE1_CREATE);
        db.execSQL(DATABASE2_CREATE);
        db.execSQL(DATABASE3_CREATE);
        db.execSQL(DATABASE4_CREATE);
    }

public long insertDefaultCurrency(String currency, String currencyDetails, int usedBoolean) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(MY_CURRENT_CURRENCY, currency);
    initialValues.put(MY_CURRENT_CURRENCY_NAMES, currencyDetails);
    initialValues.put(MY_CURRENT_CURRENCY_BOOLEAN, usedBoolean);
    return db.insert(MY_CURRENT_CURRENCY_TABLE, null, initialValues);
} 
```

日志信息：

```
01-28 10:31:26.865: E/SQLiteLog(8623): (1) table MyCurrency has no column named MyCurrentCurrencyBoolean
01-28 10:31:26.880: E/SQLiteDatabase(8623): Error inserting MyCurrentCurrencyBoolean=1 MyCurrentCurrency=€ MyCurrentCurrencyNames=€ EURO
01-28 10:31:26.880: E/SQLiteDatabase(8623): android.database.sqlite.SQLiteException: table MyCurrency has no column named MyCurrentCurrencyBoolean (code 1): , while compiling: INSERT INTO MyCurrency(MyCurrentCurrencyBoolean,MyCurrentCurrency,MyCurrentCurrencyNames) VALUES (?,?,?) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T08:51:32.437

改变：

```
+ MY_CURRENT_CURRENCY_BOOLEAN + "INTEGER NOT NULL);"; 
```

到

```
+ MY_CURRENT_CURRENCY_BOOLEAN + " INTEGER NOT NULL);"; 
```

`"`和之间的缺失空间`INTEGER`几乎肯定是您的错误的原因。之后，清除应用程序的数据并再次运行，以便重新创建数据库。

# c# - DotNetOpenAuth 和多个子域

> ID：14558428
> 
> 赞同：1
> 
> 时间：2013-01-28T08:49:22.130
> 
> 标签：c#, single-sign-on, dotnetopenauth

我有一个问题，我似乎无法在网络上的任何地方得到直接的答案。

DotNetOpenAuth 是否可以用于处理多个子域的单点登录，不管是什么应用程序或平台，我可以有一个提供商服务，在用户首次登录其中一个子域后，他不必再次登录。

我不关心 facebook/twitter 集成等。在我看来，DotNetOpenAuth 似乎主要用于？

另外，有没有人有这样一个提供者的示例实现？

谢谢尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:37:53.433

当您说*子*域时，您是指第三级域名（“www”部分）吗？如果是这样，您可以完全做到这一点，而无需任何特殊的库或协议。只需将您的用户会话 cookie 设置为应用于二级域名，所有子域将自动对其可见。

跨二级域名需要协议，是的，DotNetOpenAuth 可以在这里提供帮助。如果您从 sourceforge 下载 .zip，示例中包含两个 SSO 示例，它们可能会对您有所帮助。

# javascript - 如何从文本框中删除未选中的项目？

> ID：14558432
> 
> 赞同：0
> 
> 时间：2013-01-28T08:49:38.553
> 
> 标签：javascript, text, checkbox, textbox

我的 JavaScript：

```
<script type="text/javascript">
function getVal(chk, adto)
{
  var ad="";
  if (chk.checked) 
  {
    ad=document.getElementById(adto).value + chk.value;
    document.getElementById(adto).value = ad;
  }
  else  
  {
  }
}
</script> 
```

第一个块按我的意愿工作，但是当用户取消选中该复选框时，它应该从文本框中删除该值。

下面是 HTML 代码：

```
<body>
<input type="checkbox" name="chk[]" value="0" id="chk0" onclick="getVal(this, 'inp0')">value 0<br>
<input type="checkbox" name="chk[]" value="1" id="chk1" onclick="getVal(this, 'inp0')">value 1<br>
<input type="checkbox" name="chk[]" value="2" id="chk2" onclick="getVal(this, 'inp0')">value 2<br>
<input type="checkbox" name="chk[]" value="3" id="chk3" onclick="getVal(this, 'inp0')">value 3<br>
<input type="checkbox" name="chk[]" value="4" id="chk4" onclick="getVal(this, 'inp0')">value 4<br>
<input type="checkbox" name="chk[]" value="5" id="chk5" onclick="getVal(this, 'inp0')">value 5<br>
<br>
<input type="text" name="inp" id="inp0" readonly><br> 
```

请帮助如何从文本框中删除未选中的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:56:33.860

[演示](http://jsfiddle.net/mplungjan/e4TBN/)

假设所有具有相同名称的复选框都添加到相同的字段中。如果没有，我们将需要更多代码。

我还假设这些盒子被包裹在一个表单标签中

```
function getVal(chk, adto) {
  var ad=[];
  var checks = chk.form[chk.name];
  for (i=0;i<checks.length;i++) {
    if (checks[i].checked) {
      ad.push(checks[i].value);
    }
  }
  document.getElementById(adto).value = (ad.length>0)?ad.join(" "):"";

} 
```

# php - 一种或多种语言文件？

> ID：14558438
> 
> 赞同：0
> 
> 时间：2013-01-28T08:50:08.677
> 
> 标签：php, internationalization, gettext

I18n 问题。

使用`GetText PO`具有`2-3 semi-separate working areas`（如前端、后端和一些特殊区域）的文件和站点时：

1.  对所有翻译使用一个大文件是否更好（因为其中一些不可避免地会在所有区域重复）
2.  将其按区域分开，以免重复翻译

方法 1 的好处很明显 - 需要翻译的内容更少。方法 2 的好处可能是更好的性能/更少的资源使用？

任何人都可以阐明这个问题吗？我们希望尽量减少翻译工作量，但我们又不想牺牲太多性能。

PS。网站用 PHP 编写并托管在 LAMP 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:56:39.723

一般来说，最好的方法是创建一个“主”翻译文件，其中包含最通用和最常用的翻译。

假设您可以拥有页眉、页脚和侧边栏的所有翻译（即使不是所有页面都有侧边栏，如果大多数页面都有 - 这很好）。

之后，您可以为每个页面拥有单独的翻译文件。

这样可以减少重复翻译的数量，但也可以防止您加载不需要的翻译。

IMO 这是一个很好的妥协。

这也适用于 javascript 和 css。

# c - C - 共享内存 - 共享结构内的动态数组

> ID：14558443
> 
> 赞同：16
> 
> 时间：2013-01-28T08:50:37.163
> 
> 标签：c, memory, dynamic, malloc, shared

我正在尝试像这个
例子一样分享一个结构：

```
typedef struct {
    int* a;
    int b;
    int c;
} ex; 
```

在进程之间，问题是当我用 malloc 初始化“a”时，它对执行此操作的进程的堆变得私有（或者至少我认为这是发生的事情）。有没有办法使用这个有效的结构创建共享内存（使用 shmget、shmat）？

编辑：我在 Linux 上工作。
编辑：我有一个像这样初始化缓冲区的过程：

```
key_t key = ftok("gr", 'p');   
int mid = shmget(key, sizeof(ex), IPC_CREAT | 0666);    
ex* e = NULL;
status b_status = init(&e, 8); //init gives initial values to b c and allocate space for 'a' with a malloc
e = (ex*)shmat(mid, NULL, 0); 
```

另一个进程将自己附加到共享内存，如下所示：

```
key_t key = ftok("gr", 'p');
int shmid = shmget(key, sizeof(ex), 0);
ex* e;
e = (ex*)shmat(shmid, NULL, 0); 
```

然后从 a 中获取一个元素，在这种情况下，在位置 1

```
int i = get_el(e, 1); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T09:56:50.697

首先，要共享您的`int *a`领域指向的内容，您需要复制与其相关的整个内存。因此，您将需要一个至少可以容纳`size_t shm_size = sizeof(struct ex) + get_the_length_of_your_ex();`.

从现在开始，既然您提到了 shmget 和 shmat，我将假设您运行的是 Linux 系统。
第一步是**创建共享内存段**。如果您可以确定内容大小的上限，那将是一件好事`int *a`。这样您就不必一遍又一遍地创建/删除共享内存段。但是，如果您这样做，则需要额外的开销来说明实际数据需要多长时间。我会假设一个简单`size_t`的方法可以达到这个目的。

然后，在您创建细分后，您必须正确设置数据以使其包含您想要的内容。请注意，虽然内存段的物理地址始终相同，但在调用时`shmat`您将获得**虚拟**指针，这些指针仅在调用的进程中可用`shmat`。下面的示例代码应该为您提供一些技巧。

```
#include <sys/types.h>
#include <sys/ipc.h>

/* Assume a cannot point towards an area larger than 4096 bytes. */
#define A_MAX_SIZE (size_t)4096

struct ex {
    int *a;
    int b;
    int c;
}

int shm_create(void)
{
    /*
     * If you need to share other structures,
     * You'll need to pass the key_t as an argument
     */
    key_t k = ftok("/a/path/of/yours");
    int shm_id = 0;
    if (0 > (shm_id = shmget(
        k, sizeof(struct ex) + A_MAX_SIZE + sizeof(size_t), IPC_CREAT|IPC_EXCL|0666))) {
        /* An error occurred, add desired error handling. */
    }
    return shm_id;
}

/*
 * Fill the desired shared memory segment with the structure
 */
int shm_fill(int shmid, struct ex *p_ex)
{
    void *p = shmat(shmid, NULL, 0);
    void *tmp = p;
    size_t data_len = get_my_ex_struct_data_len(p_ex);
    if ((void*)(-1) == p) {
        /* Add desired error handling */
        return -1;
    }
    memcpy(tmp, p_ex, sizeof(struct ex));
    tmp += sizeof(struct ex);
    memcpy(tmp, &data_len, sizeof(size_t);
    tmp += 4;
    memcpy(tmp, p_ex->a, data_len);

    shmdt(p);
    /*
     * If you want to keep the reference so that
     * When modifying p_ex anywhere, you update the shm content at the same time :
     * - Don't call shmdt()
     * - Make p_ex->a point towards the good area :
     * p_ex->a = p + sizeof(struct ex) + sizeof(size_t);
     * Never ever modify a without detaching the shm ...
     */
    return 0;
}

/* Get the ex structure from a shm segment */
int shm_get_ex(int shmid, struct ex *p_dst)
{
    void *p = shmat(shmid, NULL, SHM_RDONLY);
    void *tmp;
    size_t data_len = 0;
    if ((void*)(-1) == p) {
        /* Error ... */
        return -1;
    }
    data_len = *(size_t*)(p + sizeof(struct ex))
    if (NULL == (tmp = malloc(data_len))) {
        /* No memory ... */
        shmdt(p);
        return -1;
    }
    memcpy(p_dst, p, sizeof(struct ex));
    memcpy(tmp, (p + sizeof(struct ex) + sizeof(size_t)), data_len);
    p_dst->a = tmp;
    /*
     * If you want to modify "globally" the structure,
     * - Change SHM_RDONLY to 0 in the shmat() call
     * - Make p_dst->a point to the good offset :
     * p_dst->a = p + sizeof(struct ex) + sizeof(size_t);
     * - Remove from the code above all the things made with tmp (malloc ...)
     */
    return 0;
}

/*
 * Detach the given p_ex structure from a shm segment.
 * This function is useful only if you use the shm segment
 * in the way I described in comment in the other functions.
 */
void shm_detach_struct(struct ex *p_ex)
{
    /*
     * Here you could : 
     * - alloc a local pointer
     * - copy the shm data into it
     * - detach the segment using the current p_ex->a pointer
     * - assign your local pointer to p_ex->a
     * This would save locally the data stored in the shm at the call
     * Or if you're lazy (like me), just detach the pointer and make p_ex->a = NULL;
     */

    shmdt(p_ex->a - sizeof(struct ex) - sizeof(size_t));
    p_ex->a = NULL;
} 
```

请原谅我的懒惰，因为它在共享内存中完全未使用，所以完全不复制**struct ex**`int *a`指针的值将是空间优化的，但我为自己节省了额外的代码来处理这个问题（以及一些指针检查，如p_ex 参数完整性）。

 **但是当你完成后，你必须找到一种在你的进程之间共享 shm ID 的方法。这可以使用套接字、管道......或使用`ftok`相同的输入来完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T09:53:38.860

您分配给指针使用的内存`malloc()`是该进程私有的。因此，当您尝试访问另一个进程（分配它的进程除外）中的指针时，您可能会访问无效的内存页或映射到另一个进程地址空间的内存页。因此，您很可能会遇到段错误。

如果您使用共享内存，则必须确保要向其他进程公开的所有数据都“在”共享内存段中，而不是进程的私有内存段。

您可以尝试将数据保留在内存段中的指定偏移量处，该偏移量可以在编译时具体定义，也可以放置在共享内存段中某个已知位置的字段中。

例如：如果你这样做

`char *mem = shmat(shmid2, (void*)0, 0);`

```
// So, the mystruct type is at offset 0.
mystruct *structptr = (mystruct*)mem;

// Now we have a structptr, use an offset to get some other_type.
other_type *other = (other_type*)(mem + structptr->offset_of_other_type); 
```

另一种方法是使用共享内存方法使用固定大小的缓冲区来传递信息，而不是使用动态分配的指针。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T09:01:23.240

您是在 Windows 还是 Linux 中工作？无论如何，您需要的是[内存映射文件](http://en.wikipedia.org/wiki/Memory-mapped_file)。此处包含代码示例的文档，

[http://msdn.microsoft.com/en-us/library/aa366551%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa366551%28VS.85%29.aspx) [http://menehune.opt.wfu.edu/Kokua/More_SGI/007-2478-008/sgi_html/ch03 .html](http://menehune.opt.wfu.edu/Kokua/More_SGI/007-2478-008/sgi_html/ch03.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T09:03:46.033

您需要使用共享内存/内存映射文件/您的操作系统为您提供的任何内容。通常，进程之间的 IPC 和共享内存非常依赖于操作系统，尤其是在 C 之类的低级语言中（高级语言通常有相应的库 - 例如，甚至 C++ 也使用 boost 支持它）。如果你在 Linux 上，我通常使用 shmat 少量，mmap ( [http://en.wikipedia.org/wiki/Mmap](http://en.wikipedia.org/wiki/Mmap) ) 用于大量。在 Win32 上，有很多方法；我更喜欢的通常是使用页面文件支持的内存映射文件（[http://msdn.microsoft.com/en-us/library/ms810613.aspx](http://msdn.microsoft.com/en-us/library/ms810613.aspx)）

此外，您需要注意在数据结构中使用这些机制的位置：如评论中所述，如果不使用预防措施，您在“源”进程中的指针在“目标”进程中无效，需要被替换/调整（IIRC，来自 mmap 的指针已经可以（映射）；至少，在 Windows 指针下，您从 MapViewOfFile 中得到的指针是可以的）。

编辑：从您编辑的示例中：您在这里做什么：

```
e = (ex*)shmat(mid, NULL, 0); 
```

（其他过程）

```
int shmid = shmget(key, sizeof(ex), 0);
ex* e = (ex*)shmat(shmid, NULL, 0); 
```

是正确的，但是您需要为每个指针执行此操作，而不仅仅是指向结构的“主”指针。例如，您需要这样做：

```
e->a = (int*)shmat(shmget(another_key, dim_of_a, IPC_CREAT | 0666), NULL, 0); 
```

而不是使用 malloc 创建数组。然后，在另一个进程中，您还需要对指针执行 shmget/shmat。这就是为什么，在评论中，我说我通常更喜欢打包结构：所以我不需要为每个指针都经历这些操作的麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-04T18:59:22.467

转换结构：

```
typedef struct {
     int b;
     int c;
     int a[];
} ex; 
```

然后在父进程上：

```
int mid = shmget(key, sizeof(ex) + arraysize*sizeof(int), 0666); 
```

它应该工作。

一般来说，很难在 c 中的结构中使用动态数组，但通过这种方式，您可以分配适当的内存（这也适用于 malloc：[如何在 C 中的结构中包含动态数组？](https://stackoverflow.com/questions/2060974/how-to-include-a-dynamic-array-inside-a-struct-in-c)）**

# iphone - NSMutableArray 丢失数据

> ID：14558444
> 
> 赞同：0
> 
> 时间：2013-01-28T08:50:41.843
> 
> 标签：iphone, ios, ios5, ios6

我已经为它创建了一个属性`NSMutableArray`，当为其赋值时，我编写了以下代码

```
[self setTotalCells:[[NSMutableArray alloc] initWithArray:[jsonDictionary valueForKey:@"data"]]]; 
```

我在搜索栏方法中使用它。但是，一旦我使用了该属性，那么数组就会变空。

```
cells = [[NSMutableArray alloc]init];
NSLog(@"filterContentForSearchText");
NSLog(@"**************************************************************");
if ([totalCells count]<= 0) {
    totalCells = [_jsonPropertiesDictionary valueForKey:@"data"];
}
NSLog(@"%@",totalCells);
NSLog(@"**************************************************************");
for (id cell in totalCells)
{
    NSLog(@"bedrooms : %@",[cell valueForKey:@"BEDROOMS"]);
    NSLog(@"DISPLAY_ADDRESS : %@",[cell valueForKey:@"DISPLAY_ADDRESS"]);
    NSLog(@"PRICE : %@",[cell valueForKey:@"PRICE"]);
    NSLog(@"searchText : %@",searchText);
    NSComparisonResult result = NSOrderedAscending;
    if ([[cell valueForKey:@"BEDROOMS"] isKindOfClass:[NSString class]] && [[cell valueForKey:@"BEDROOMS"] length] > 0) {
        result = [[cell valueForKey:@"BEDROOMS"] compare:searchText options:(NSCaseInsensitiveSearch) range:NSMakeRange(0, [searchText length])];

        if (result == NSOrderedSame)
            [self.filteredListContent addObject:cell];
    }
    if ([[cell valueForKey:@"DISPLAY_ADDRESS"] isKindOfClass:[NSString class]] && [cell valueForKey:@"DISPLAY_ADDRESS"] != nil && [cell valueForKey:@"DISPLAY_ADDRESS"] != @"" && [[cell valueForKey:@"DISPLAY_ADDRESS"] length] > 0) {
        result = [[cell valueForKey:@"DISPLAY_ADDRESS"] compare:searchText options:(NSCaseInsensitiveSearch) range:NSMakeRange(0, [searchText length])];

        if (result == NSOrderedSame)
            [self.filteredListContent addObject:cell];
    }
    if ([[cell valueForKey:@"PRICE"] isKindOfClass:[NSString class]] && [cell valueForKey:@"PRICE"] != nil && [[cell valueForKey:@"PRICE"] length] > 0) {
        result = [[cell valueForKey:@"PRICE"] compare:searchText options:(NSCaseInsensitiveSearch) range:NSMakeRange(0, [searchText length])];

        if (result == NSOrderedSame)
            [self.filteredListContent addObject:cell];
    }
    if ([searchText isEqualToString:@"" ]) {
        filteredListContent = totalCells;
        break;
    }
}
if (self.filteredListContent.count > 0) {
    cells = self.filteredListContent;//added by prajakta
}

[self.propertyList_table reloadData];
NSLog(@"filteredListContent : %@ ",filteredListContent); 
```

我已将此属性声明为

```
@property(atomic,retain)NSMutableArray *totalCells; 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:11:41.343

你为什么不用这种方式过滤呢？它不会破坏您的原始数据源...

```
cells = [[NSMutableArray alloc]init];
NSLog(@"filterContentForSearchText");
NSLog(@"**************************************************************");
if ([totalCells count]<= 0) {
    totalCells = [_jsonPropertiesDictionary valueForKey:@"data"];
}
NSLog(@"%@",totalCells);
NSLog(@"**************************************************************");

/*
 * replace your code FROM here...
 */

NSArray *filteredCells = [totalCells filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
    NSDictionary *cell = (NSDictionary *)evaluatedObject;
    if ([[cell valueForKey:@"BEDROOMS"] isKindOfClass:[NSString class]] && [[cell valueForKey:@"BEDROOMS"] length] > 0) {
        return [[cell valueForKey:@"BEDROOMS"] compare:searchText options:(NSCaseInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
    }
    if ([[cell valueForKey:@"DISPLAY_ADDRESS"] isKindOfClass:[NSString class]] && [cell valueForKey:@"DISPLAY_ADDRESS"] != nil && [cell valueForKey:@"DISPLAY_ADDRESS"] != @"" && [[cell valueForKey:@"DISPLAY_ADDRESS"] length] > 0) {
        return [[cell valueForKey:@"DISPLAY_ADDRESS"] compare:searchText options:(NSCaseInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
    }
    if ([[cell valueForKey:@"PRICE"] isKindOfClass:[NSString class]] && [cell valueForKey:@"PRICE"] != nil && [[cell valueForKey:@"PRICE"] length] > 0) {
        return [[cell valueForKey:@"PRICE"] compare:searchText options:(NSCaseInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
    }
    return FALSE;
}]];

/*
 * TO here...
 */

if (self.filteredListContent.count > 0) {
    cells = self.filteredListContent;//added by prajakta
}

[self.propertyList_table reloadData];
NSLog(@"filteredListContent : %@ ",filteredListContent); 
```

# git - 不小心写了一些东西到 git log

> ID：14558446
> 
> 赞同：1
> 
> 时间：2013-01-28T08:50:55.877
> 
> 标签：git

我正在检查我的 git 日志，不小心按下了“sqwe”之类的东西，它被添加到了日志中，现在当我执行“git status”时，它向我显示以下内容：

```
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   sqwe 
```

如何从我的 git 日志和状态中删除此垃圾？如果我不remobe它会发生什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:53:47.097

这只是意味着该文件存在 - 它尚未添加到 git。如果您不想要该文件，则只需将其删除。除非您明确要求，否则 Git 不会将其添加到提交中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T09:23:00.367

`rm /path/to/sqwe`

或者，在干净的分支上： `git add .`其次是 `git reset --hard latestcommitSHA`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T08:55:56.373

这只是说当前在您的目录树中有一个名为的文件`sqwe`，没有被跟踪。此时实际上没有任何内容写入 git log。事实上，只要你不显式地（或隐式地，例如使用 " `-a`" 参数`git commit`）将文件添加到索引中，它就永远不会被写入 git。

只需删除`sqwe`文件就可以了。

# svg - svg 图像的画布安全错误

> ID：14558447
> 
> 赞同：1
> 
> 时间：2013-01-28T08:51:02.927
> 
> 标签：svg, html5-canvas

我要做的是在画布上绘制 svg 图像，然后创建这个画布的 PNG 图像。这是我所做的一个例子：

```
 var canvas = document.getElementById('mycanvas');
        var ctx = canvas.getContext('2d');
        var img = new Image();
        img.onload  = function () {
                ctx.drawImage(this, 0, 0, this.width, this.height);
                var url = canvas.toDataURL("image/png");
        }
        img.crossorigin = "Anonymous"; //not sure this affects anything...
        img.src="some image url" 
```

当我设置 png/jpeg 图像的来源时，它可以正常工作，但是 src 是 svg 图像，我在调用“ **canvas.toDataURL("image/png") ”时收到“** **Uncaught Error: SECURITY_ERR: DOM Exception 18** ”。我不明白有什么区别？

 **当我采用内联 svg 并将其渲染到画布内，然后尝试创建 png 图像时，也会发生同样的情况。我现在没有代码 - 如果需要，我稍后会添加它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T19:10:31.910

我找到了解决方案。显然画布有另一个功能来绘制svgs“drawSvg”所以我使用它并且它有效。**

# authentication - 带有客户端证书的 Windows Phone 8 身份验证

> ID：14558449
> 
> 赞同：0
> 
> 时间：2013-01-28T08:51:06.307
> 
> 标签：authentication, windows-phone-8, client-certificates

Windows Phone 8 操作系统及其 API 是否支持使用证书的客户端身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T06:30:42.277

否 Windows Phone 8 sdk 不支持客户端证书。有关详细信息，请参阅[MSDN 链接。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402533#BKMK_SecureSocketsLayerSSLcertificates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:39:16.547

好吧，您可以设置一个 x501 证书，以便 API 有点支持它，但我一直无法找到选择证书的方法。所以这就像有一半的 API 在那里。

# git - 为什么在 Git 中忽略特定于 IDE 的项目文件？

> ID：14558450
> 
> 赞同：4
> 
> 时间：2013-01-28T08:51:21.610
> 
> 标签：git, github, ide

我已经看到在 Github 上发布的许多项目都有一个`.gitignore`明确排除与 IDE 相关的控制文件的文件。这些控制文件广泛用于定义项目及其依赖项。这些可以`.sln`用于 .NET 或`.project`Eclipse。

考虑到我同意实现 IDE 中立性（不要将开发人员绑定到特定的 IDE）是一个很好的原则，我想问为什么这种做法被广泛应用或被认为是一种好的做法。

相反，这些控制文件通常在多个配置中指示项目依赖关系、配置或编译变量（`.csproj`例如文件就是这种情况）。

我见过大量忽略 Eclipse 文件的开源项目，但是到目前为止，我不可能在没有项目文件的情况下建立开发环境（即使我从现有代码创建项目，或者创建一个新项目和导入代码，我总是得到很多编译错误）。

如果项目文件存在于存储库中，那么通过“下载代码，导入项目并编译源代码”来设置开发环境将非常简单，但它显然会将开发人员绑定到特定的 IDE（这并不好笑） .

标准化或迁移项目文件超出了问题的范围。

那么，从外部贡献者的角度来看，如何为他从 Github 下载源代码的项目构建一个工作和编译项目环境？（克隆所有子模块后，如果需要）

随便挑**一个**我想导入Eclipse的示例项目，分析一下，稍微修改一下，就[到这里](https://github.com/mitreid-connect/OpenID-Connect-Java-Spring-Server)了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T09:01:04.783

请注意，`csproj`文件**不是**特定于 IDE 的，而是构成项目的基本项目结构和构建步骤`.NET`。即使您切换到像 SharpDevelop 这样的完全不同的 IDE，您仍然需要它们来运行项目。所以，一般来说，这些不应该在`.gitignore`文件上。仅应排除用户或 IDE 特定的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T08:59:53.860

因为有些人不使用这些 IDE，而另一些人则对其配置进行了一些调整。更不用说那些 IDE 特定文件在每个编译步骤之后更改太快且太无用的事实。

最好的办法是准备好 Makefile、Ant 文件或其他等效的构建系统，而不是依赖 IDE 文件。

当然，有些错误是由于缺少库引起的。您必须自己安装它们，是否在 repo 中有 IDE 文件并不重要。

我通常做的事情：克隆项目，如果不存在则创建构建脚本，添加它，`.git/info/exclude`因为它将是特定于机器的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T11:42:13.110

在 Java 世界中有很多构建系统（Maven、Gradle、SBT 等）。为您的 IDE 生成项目文件是小菜一碟。这使得没有必要将它们检查到版本控制中，因为它们可以被视为构建工件。

此外，在一个混合团队中，不同的人使用不同的 IDE，当有人更新 Eclipse 项目文件时，使用 IntelliJ 的人突然也需要更新他的项目文件，因为他现在遇到了编译问题。而使用生成这些文件的构建系统可确保它们始终是最新的。例如，使用 Maven，当您将 M2Eclipse 插件添加到 Eclipse 或使用 IntelliJ 时，甚至无需用户交互即可完成。

所以我一直提倡将项目文件添加到`.gitignore`...

# java - 是否有任何工具可以在 Windows 7 中监控 Java 应用程序？

> ID：14558451
> 
> 赞同：4
> 
> 时间：2013-01-28T08:51:24.620
> 
> 标签：java

我已经创建了 Java 项目。在这个项目中，我使用了文件创建、删除来使用文件处理程序进行文件操作操作。所以我需要在调试项目时查看那些文件处理程序。我尝试了以下命令**JPS、JSTACK**等。这些工具正在显示进程 ID、类名、包名。

但我需要知道每个类的实际功能。例如对象创建、文件创建、反对删除等。有没有适用于 windows 的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:55:50.070

使用`-XX:+PrintCompilation`可以帮助你。

`-XX:+PrintCompilation`标志输出如下所示：

```
1  sb   java.lang.ClassLoader::loadClassInternal  (6 bytes)     
2  b    java.lang.String::lastIndexOf  (12 bytes)
3  s!b  java.lang.ClassLoader::loadClass  (58 bytes) 
```

标志对应于：

```
b    Blocking compiler (always set for client)  
*    Generating a native wrapper    
%    On stack replacement   
!    Method has exception handlers  
s    Synchronized method 
```

[更多细节](http://blog.joda.org/2011/08/printcompilation-jvm-flag.html)。

* * *

此外，也许您可​​以尝试[使用 javamelody](https://code.google.com/p/javamelody/)来监控您的应用程序。

以下是一些屏幕截图： ![所有图表](../Images/fb055b11d9a5269f09f3e6b3e17b01e0.png)

![在此处输入图像描述](../Images/3c60069f6560b3f198ddf643c5c81267.png)

![在此处输入图像描述](../Images/c27e420f40ae97b3af4b161f4fdf7d88.png)

# visual-studio-2010 - OpenCV：难以使用 cvBlobs 库

> ID：14558452
> 
> 赞同：1
> 
> 时间：2013-01-28T08:51:27.653
> 
> 标签：visual-studio-2010, opencv, cvblobslib

我是`OpenCV2.3`Windows7的初学者，`Visual Studio2010`并且在安装 blob 库时遇到了困难（因为谷歌提供了几个版本而感到困惑）。我知道 SO 本身有几个帖子处理这个问题。所以，请耐心回答这个问题。这些是我所做的步骤。

1.  从[Grossman 的 blob 检测库下载库](http://tech.groups.yahoo.com/group/OpenCV/message/90124)
2.  提取压缩文件夹
3.  `C:\Users\Admin\Documents\Visual Studio 2010\Projects\Blob`阅读[Link1](http://www.technical-recipes.com/2011/object-detection-using-the-opencv-cvblobslib-libraries/)后创建了一个新的 Visual Studio 2010 空白项目
4.  复制文件夹下Step(1)中的两个.cpp文件，并复制VS2010文件夹`Source`下的include.h 。`Header`然后，我包括了我们通常用来运行任何 OpenCV 程序的附加库和其他依赖项。
5.  这就是我迷路的地方>>[关注 Link2](https://stackoverflow.com/questions/8503748/how-to-configure-visual-studio-2010-with-opencv-cvblobs-library)。在我的 Cmake2.8.7 版本中，我拥有*的源代码*`C:/OpenCV2.3/opencv/opencv`在哪里和在*哪里构建库*，我有`C:/Users/Shreya/Downloads/OpenCV2.3`。现在应该怎么办？

非常感谢您的详细解释。

# ios - 如何从两个文本字段中获取价值？

> ID：14558457
> 
> 赞同：0
> 
> 时间：2013-01-28T08:51:55.787
> 
> 标签：ios, ios6, datepicker, textfield

我有两个文本字段，并且我已将默认点击行为从键盘替换为 DatePicker

```
-(void)updateTextField:(id)sender
{
    UIDatePicker *picker = (UIDatePicker*)_editStartDate.inputView;
    _editStartDate.text = [NSString stringWithFormat:@"%@",picker.date];
}

- (void)viewDidLoad
{
   UIDatePicker *datePicker = [[UIDatePicker alloc]init];

    [datePicker setDate:[NSDate date];
    [datePicker addTarget:self action:@selector(updateTextField:) forControlEvents:UIControlEventValueChanged];       
    [_editStartDate setInputView:datePicker];
...
} 
```

此代码创建日期选择器而不是键盘并使用名称 editStartDate 更新 textField，但我有第二个名称为 editEndDate 的 textField，我也不知道如何在其中获取值。

你有什么想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:15:07.400

试试这个：

```
-(void)updateTextField:(id)sender
{

    if([_editStartDate isFirstResponder]){
        UIDatePicker *picker = (UIDatePicker*)_editStartDate.inputView;
        _editStartDate.text = [NSString stringWithFormat:@"%@",picker.date];
    }
    if([_editEndDate isFirstResponder]){
        UIDatePicker *picker = (UIDatePicker*)_editEndDate.inputView;
        _editEndDate.text = [NSString stringWithFormat:@"%@",picker.date];
    }

} 
```

# objective-c - cocos2d for iphone：线条抗锯齿

> ID：14558458
> 
> 赞同：1
> 
> 时间：2013-01-28T08:52:00.343
> 
> 标签：objective-c, cocos2d-iphone

我花了很多时间寻找这个并尝试调整代码，但由于我是 cocos2d 的新手，我真的需要你的帮助。

所以我想做的是用v2.0画一条直线和抗锯齿线，因为我被一条丑陋的锯齿线困住了。

非常感谢！

# eclipse - Eclipse 插件 - 是否有任何可编辑的 TreeSelection 类

> ID：14558459
> 
> 赞同：0
> 
> 时间：2013-01-28T08:52:08.740
> 
> 标签：eclipse, eclipse-plugin

我正在寻找一种解决方案，以使此树选择在包资源管理器视图本身中可编辑。

这个想法

例如 - 如果我们在包资源管理器中单击任何类的重命名，它将提示一个新窗口进行重命名。此功能对于任何实现 TreeSelection 类的类都是相同的。

但我正在寻找的解决方案是 - 当调用重命名时，重命名选项显示在树本身（就像我们在 Windows 资源管理器视图中一样）

关于如何在 Eclipse 上实现这种行为的任何建议。

![树选择](../Images/afc9b7479236a0efeb03c88eea3e910a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:50:37.497

您不需要有一些特殊的可编辑选择，您只需要使树可编辑。为此，您可以`EditingSupport`像这样使用（改编自[http://www.vogella.com/articles/EclipseJFaceTableAdvanced/article.html#jfacetable_editor](http://www.vogella.com/articles/EclipseJFaceTableAdvanced/article.html#jfacetable_editor)）：

```
public class NameEditingSupport extends EditingSupport {
  private final TreeViewer viewer;

  public FirstNameEditingSupport(TreeViewer viewer) {
    super(viewer);
    this.viewer = viewer;
  }

  @Override
  protected CellEditor getCellEditor(Object element) {
    return new TextCellEditor(viewer.getTree());
  }

  @Override
  protected boolean canEdit(Object element) {
    return true;
  }

  @Override
  protected Object getValue(Object element) {
    // return the name
  }

  @Override
  protected void setValue(Object element, Object value) {
    // update the name of your object
    viewer.update(element, null);
  }
} 

// in the code creating the tree
treeViewer.setEditingSupport(new NameEditingSupport(treeViewer)); 
```

# android - 有没有办法保存密码？

> ID：14558460
> 
> 赞同：0
> 
> 时间：2013-01-28T08:52:28.073
> 
> 标签：android

在 Android 设备管理中，我知道`resetPassword(String password, int flags)`可以重置密码。但是，我的愿望是在重置之前我会保留旧密码。这样，如果用户愿意，我可以挽救密码。有没有办法保存密码？此外，如何从系统获取密码？

注意：我的应用程序是系统应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:10:57.950

不，您无法获取密码。它确实是经过哈希处理的，并且设备在技术上并不“知道”它。此外，由于几乎任何应用程序都可以成为系统管理员（如果用户确认），任何应用程序都可以检索密码，这是一个坏主意。

# python - 使用 cx_freeze 冻结的 pyGTK 应用看起来不同

> ID：14558464
> 
> 赞同：2
> 
> 时间：2013-01-28T08:52:58.077
> 
> 标签：python, pygtk, cx-freeze

在我使用 cx_freeze 冻结它（我正在使用 Gui2Exe 创建和运行 cx_freeze 脚本）以及使用 python 解释器运行它时，我的应用程序看起来不同了。

*[因为我不允许发布图像，这里是 UI 的链接，编辑？]*

**脚本运行：**

[从命令行运行的应用程序](http://i.imgur.com/7aQzw4g.jpg)

**冻结运行：**

[应用程序在被 cx_freeze 冻结后运行](http://i.imgur.com/mx7kcEZ.jpg)

我已经尝试在 cx_freeze 脚本中包含和不包含清单文件，但我不确定是什么导致应用程序 UI 发生如此巨大的变化。

**这是 cx_freeze 脚本：**

```
# ======================================================== #
# File automagically generated by GUI2Exe version 0.5.3
# Copyright: (c) 2007-2012 Andrea Gavana
# ======================================================== #

# Let's start with some default (for me) imports...

from cx_Freeze import setup, Executable

# Process the includes, excludes and packages first

includes = ['ast', 'gobject', 'gtk']
excludes = ['_gtkagg', '_tkagg', 'bsddb', 'curses', 'email', 'pywin.debugger',
            'pywin.debugger.dbgcon', 'pywin.dialogs', 'tcl',
            'Tkconstants', 'Tkinter']
packages = ['BeautifulSoup', 'mechanize', 'pygtk']
path = []

# This is a place where the user custom code may go. You can do almost
# whatever you want, even modify the data_files, includes and friends
# here as long as they have the same variable name that the setup call
# below is expecting.

# No custom code added

# The setup for cx_Freeze is different from py2exe. Here I am going to
# use the Python class Executable from cx_Freeze

GUI2Exe_Target_1 = Executable(
    # what to build
    script = "moodle-downloader.py",
    initScript = None,
    base = 'Win32GUI',
    targetDir = r"md",
    targetName = "moodle-downloader.exe",
    compress = True,
    copyDependentFiles = True,
    appendScriptToExe = True,
    appendScriptToLibrary = True,
    icon = r"C:\Users\Nasser.Al-Hilal\Dropbox\CodeN\Projects\Applications\Personal\MoodleDownloader\res\md.ico"
    )

# That's serious now: we have all (or almost all) the options cx_Freeze
# supports. I put them all even if some of them are usually defaulted
# and not used. Some of them I didn't even know about.

setup(

    version = "0.3",
    description = "An app to assist in downloading assignment submissions from Moodle LMS.",
    author = "Nasser Al-Hilal",
    name = "Moodle Downloader",

    options = {"build_exe": {"includes": includes,
                             "excludes": excludes,
                             "packages": packages,
                             "path": path
                             }
               },

    executables = [GUI2Exe_Target_1]
    )

# This is a place where any post-compile code may go.
# You can add as much code as you want, which can be used, for example,
# to clean up your folders or to do some particular post-compilation
# actions.

# No post-compilation code added

# And we are done. That's a setup script :-D 
```

如果我能让应用程序看起来与从解释器运行时相同，我会更喜欢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-12T20:52:57.173

为了让您工作，您必须下载 gtkruntime，将其安装在您的系统上，然后复制 lib 文件夹并共享您生成的构建文件夹，然后将 bin 文件夹 gtkruntime 的内容复制到您的构建文件夹，然后您就可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T12:26:51.483

我的安装：

*   Windows 7的
*   Python 2.7.9
*   GTK2 (python -m pip install pygtk)
    *   pycairo (1.8.10) pygobject (2.28.3) pygoocanvas (0.14.2) pygtk (2.24.0) pygtksourceview (2.10.1)
*   cx-Freeze (python -m pip install cx-Freeze)
    *   cx-冻结 (4.3.4)

cx-freeze 编译命令：

```
 \Py279\Scripts\cxfreeze  MyGUIapp.py --target-dir somewheredir --base-name=Win32GUI 
```

（本质上，所有这些都无需任何设置命令文件即可完成，尽管可以创建一些 :)）

一旦 cx-freeze 编译为 exe 并复制它认为需要的 dll，我会得到主题/x11 外观/感觉，但是，当我从以下位置添加到`somewheredir`所有 .dll 文件时：

```
\Py279\Lib\site-packages\gtk-2.0\runtime\lib\gtk-2.0\2.10.0\engines\ 
```

至：

```
somewheredir\lib\gtk-2.0\2.10.0\engines\ 
```

我得到窗户的外观和感觉。

在我的案例中找到的文件是：

*   libpixmap.dll
*   libsvg.dll
*   libwimp.dll

就这样。

加：

`.gtkrc-2.0`通过在用户的主文件夹中创建可以实现一些进一步的设计定制影响`c:\Users\myuser`。即可以影响使用的默认字体和大小、窗口背景颜色等。例如，以下代码（来自其他地方的提示）

```
 style "win32-font" {
      # make default font larger
      font_name = "Sans 12"
      # set the background to a light grey
      bg[NORMAL] = "#f6f6f6"
    }
    class "*" style "win32-font" 
```

放置`c:\Users\myuser\.gtkrc-2.0`将更改“默认”字体大小并更改用户运行的 pygtk 应用程序的顶部窗口背景（这意味着每个用户都可以在那里设置自己的首选项）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-31T05:17:03.597

这只是 Blasito 答案的翻译：

“为了使其正常工作，首先在您的计算机上下载并安装 GTK-runtime。然后导航到 GTK-runtime 安装文件夹（在 Program Files 中）并将 lib 和共享文件夹复制到生成的构建文件夹。最后，复制将 bin 文件夹（在安装目录中）的内容放入 build 文件夹中。”

我可以验证这是否有效。

# c# - WCF DataService - 取消插入服务器端

> ID：14558471
> 
> 赞同：3
> 
> 时间：2013-01-28T08:53:57.153
> 
> 标签：c#, wcf-data-services

我们已经使用 WCF 数据服务构建了一个简单的 Web 服务。此服务由多个应用程序使用。

在某些情况下，我希望能够在服务器端检查插入的消息，如果插入的对象满足特定条件，则取消插入。

我发现我可以使用 QueryInterceptor 检查插入，但没有找到“取消”插入的方法。

是否可以取消插入服务器端而不抛出异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:16:26.810

你可以只写一个[DispatchMessageInspector](http://blogs.msdn.com/b/zelmalki/archive/2008/12/29/creating-a-wcf-idispatchmessageinspector.aspx)并检查收到的消息；你可以决定是否执行它而不抛出任何异常。

# memcached - Memcached 适合我吗？

> ID：14558477
> 
> 赞同：0
> 
> 时间：2013-01-28T08:54:28.263
> 
> 标签：memcached

我是几家大型在线商店的系统管理员，我正在研究 Memcached 作为一种可能的缓存解决方案。

访问最多的查询是构成动态产品页面的查询，因此缓存这些查询是有意义的。工作人员定期使用更新程序以新价格更新表格。据我了解，如果我使用 Memcached，则更改只会在缓存过期后才会显现，而不是在我的程序更新后才会显现。

在文档中，我可以看到刷新所有现有项目的“Memcache::flush”，但是有没有办法刷新单个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:01:00.883

您可以在[文档](http://code.google.com/p/memcached/wiki/NewCommands)中看到删除一个项目的[删除](http://code.google.com/p/memcached/wiki/NewCommands#delete)命令。还有一[组](http://code.google.com/p/memcached/wiki/NewCommands#set)添加或替换一个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:55:31.247

最重要的部分是在你的键上有一个可靠的命名方案。大概您有一个 cms 类型的页面来更新/插入数据库中的行（mysql？）。只要确保在 mysql 中进行更新时删除 memcache 记录就可以了。

# iphone - 在 Objective C、ios6、Xcode 中根据屏幕大小定位元素

> ID：14558478
> 
> 赞同：0
> 
> 时间：2013-01-28T08:54:34.423
> 
> 标签：iphone, objective-c, xcode, ios6, uiscrollview

我有一个从左到右水平滚动的 UIScrollView。

我希望能够根据 iPhone 的屏幕尺寸将我的 UIScrollView 垂直定位在 Y 轴上。例如 iPhone 4 和 iPhone 5。

```
CGFloat startX = (70.0f * ((float)[_attachments count] - 1.0f) + padding);
CGFloat startY = 295;
CGFloat width = 64;
CGFloat height = 64; 
```

现在我的 Y 位置从 295 开始，这适用于 iPhone 4，但不适用于 iPhone 5。

如何更改 startY 以适应不同屏幕尺寸的相同位置？

![在此处输入图像描述](../Images/cbe4bbc45a15c9d09ccfdcaddfcc664a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:35:37.743

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568)
{
     //iphone5
}
else
{
     //iphone4
} 
```

您可以相应地设置您的 y 值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:13:46.990

`layoutSubviews`在你看来使用...

```
- (void)layoutSubviews {
  CGRect frame = self.bounds;
  frame.origin.y += frame.size.height - _scrollView.frame.size.height;
  if ( ! CGRectEqualToRect( _scrollView.frame, frame ) {
    _scrollView.frame = frame;
  }
} 
```

...我假设您的水平滚动视图在`_scrollView`ivar 中，并且`_scrollView.frame.size.height`包含正确的高度`_scrollView`。如果不是，请替换`_scrollView.frame.size.height`为包含您的`UIScrollView`身高的一些常数。

为什么条件与`CGRectEqualToRect`？因为`layoutSubviews`可以经常调用，并且当您为其设置新框架（即使它等于）时，`UIScrollView`可以停止滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:15:31.527

你可以这样做-

首先获取屏幕的宽度和高度

```
CGRect screenBounds = [UIScreen mainScreen].bounds ;
CGFloat width = CGRectGetWidth(screenBounds);
CGFloat height = CGRectGetHeight(screenBounds)  ; 
```

现在创建一个方法，该方法将进行一些计算并返回一个 int

```
-(NSInteger) getwidth:-(NSInteger *) value
{
int temp = (value * 100) / 480;
return int((height * temp) / 100);
}

-(NSInteger) getheight:-(NSInteger *) value
{
 var temp = (value * 100) / 320;
return int((width * temp) / 100);
} 
```

现在根据这些功能设置视图的边界

```
actind.frame=CGRectMake(getWidth(20),getheight(20),16,16); 
```

这将适用于所有设备，并且视图将根据屏幕的宽度和高度自行排列。

希望这对你有帮助。:)

# java - 在linux中运行从windows创建的jar文件作为可执行文件

> ID：14558479
> 
> 赞同：4
> 
> 时间：2013-01-28T08:54:39.247
> 
> 标签：java, linux, jar, executable-jar

嗨，我开发了一个`javafx`在 Windows 操作系统上使用的摇摆应用程序。它在 Windows 上运行良好。但是当我在 Linux 上运行 jar 时，它默认在存档管理器中打开，它不能作为可执行文件工作。

我检查了 jar 文件的属性，它已经是一个可执行文件。

我是否必须在 Linux 环境中重新编译源文件才能在 Linux 上运行它`jar file`，还是`jar file`在 Linux 上也能工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T09:00:22.620

如果您没有使用依赖于操作系统的命令，例如从 java 运行 windows 命令（肯定不会在 linux 中运行）或使用 windows 特定模块，那么您的 java 将在所有其他操作系统中运行。这是跨平台的 java 最重要的功能之一，您可以在安装了特定于操作系统的 java 运行时环境的不同操作系统中运行您的代码。

所以在所有操作系统中，只需要运行

```
java -jar yourjarfile.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:59:07.100

可执行 jar 必须可以跨操作系统执行。

但是，您需要检查 .jar 文件的权限。尤其是在类似 linux 的环境中执行时。

```
chmod +x /path/to/your/java.jar 
```

[在 linux 中使用 chmod 命令/使用Ant chmod](http://ant.apache.org/manual/Tasks/chmod.html)修改您的 buil.xml

# .net - 如何使用 iExpress 从多个 .msi 和 .exe 进行单一设置？

> ID：14558480
> 
> 赞同：2
> 
> 时间：2013-01-28T08:54:39.857
> 
> 标签：.net, winforms, visual-studio-2010, iexpress

我有两个应用程序，它们有自己的 .msi 和 .exe 。我需要一个 .exe/.msi 可以一个接一个地安装我的两个应用程序。

说 MyApp1.msi/setup1.exe MyApp2.msi/setup2.exe

这两个应该包含在一个名为 MyAppFull 的设置中。

我如何在 iExpress 中实现这一点，我只允许在我的公司中使用它。要使用其他工具，需要获得许可。我的 VS 2010 高级版中也有一个 Installshield，但它要求获得许可。您还可以建议一些工具来完成此任务吗？

我正在使用 Win forms C# 4.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T03:26:19.657

如果您的两个设置文件的名称不同（例如`setup1.exe`，和`setup2.exe`，如您的示例中所示），这相当简单。

因为 IExpress 只能启动一个文件（提取前和提取后），所以您需要一个批处理文件来按顺序启动这两个文件。批处理文件可以很简单：

```
@echo off
setup1.exe
setup2.exe 
```

构建你的 IExpress 包；包括两个安装文件，加上批处理文件（例如`setup12.bat`）。将*安装程序*设置为：`cmd /c setup12.bat`

因此，这两个文件都将按照指定的顺序执行。您可以变得更有趣（例如，让批处理文件使用或使用 VBScript 等显示某种输出`echo`），但这应该会给您一些想法。

# javascript - 下拉菜单不起作用

> ID：14558489
> 
> 赞同：1
> 
> 时间：2013-01-28T08:55:20.507
> 
> 标签：javascript, drop-down-menu, cross-browser

我有一个用 javascript 制作的下拉菜单，但它在 IE 中不起作用，而在 Firefox 和 Chrome 中运行良好。我正在使用的 HTML 代码是这样的：

```
<div id="sidemeny-container">
<div class="sidemenu-maincat">
    <img src="cat1.jpg" alt="cat1" />
        <div class="sidemenu-subcat hidden">
        <a href="subcat1.html"> - Subcat 1 </a>
        </div>
        <div class="sidemenu-subcat hidden">
        <a href="subcat2.html"> - Subcat 2 </a>
        </div>
        <div class="sidemenu-subcat hidden">
        <a href="subcat3.html"> - Subcat 3 </a>
        </div>  
    </div>

    <div class="sidemenu-maincat">
    <img src="cat2.jpg" alt="cat2" />
        <div class="sidemenu-subcat hidden">
        <a href="subcat2-1.html"> - Subcat 2-1 </a>
        </div>
        <div class="sidemenu-subcat hidden">
        <a href="subcat2-2.html"> - Subcat 2-2 </a>
        </div>
        <div class="sidemenu-subcat hidden">
        <a href="subcat2-3.html"> - Subcat 2-3 </a>
        </div>  
    </div>
        </div> 
```

CSS 代码：

```
#sidemeny-container {
    border-bottom:1px #000 solid; 
    height: auto;
    width: 153px;
    float:left;
    padding: 10px 0px 0px 0px;

}

.sidemenu-maincat {
    border-top: 1px #000 solid;
    border-right: 1px #000000 solid;
    width:148px;
    height:auto;
    float:left;
    padding: 0px 0px 0px 5px;
}

.sidemenu-subcat.hidden {
    display:none;
    width:148px;
    height:auto;
    float:left;
    padding: 0px 0px 0px 15px;
} 
```

和 javascript

```
 function initiate()
{

var sideMenuOptions = document.getElementsByClassName('sidemenu-maincat');
    for (var i = 0; i < sideMenuOptions.length; i++) {
        sideMenuOptions[i].addEventListener('click', function() {
    var subMenuItems = this.getElementsByClassName('sidemenu-subcat');
    for (var s = 0; s < subMenuItems.length; s++) {
      var subItem = subMenuItems[s];
      if (subItem.offsetWidth === 0 && subItem.offsetHeight === 0) {
        subItem.className = 'sidemenu-subcat';
      } else {
        subItem.className = subItem.className + ' hidden';
      }
    }
  });
    }       
}

window.onload = initiate; 
```

我不明白为什么这在 IE 中不起作用，因为它在其他浏览器中运行良好。而且我更喜欢将我所有的 javascript 保存在我的单独文档 javascript.js 中，并且我不想使用库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:07:55.757

IE 不支持 getElementsByClassName。在不使用库的情况下克服这个问题的最简单方法是使用 document.getElementsByTagName，遍历结果并检查每个结果的类名。就像是：

```
if (document.getElementsByClassName)
    {
        var sideMenuOptions = document.getElementsByClassName('sidemenu-maincat');
        for (var i = 0; i < sideMenuOptions.length; i++) {
            sideMenuOptions[i].addEventListener('click', function () {
                var subMenuItems = this.getElementsByClassName('sidemenu-subcat');
                for (var s = 0; s < subMenuItems.length; s++) {
                    var subItem = subMenuItems[s];
                    if (subItem.offsetWidth === 0 && subItem.offsetHeight === 0) {
                        subItem.className = 'sidemenu-subcat';
                    } else {
                        subItem.className = subItem.className + ' hidden';
                    }
                }
            });
        }
    }
    else
    {
        var sideMenuOptions = document.getElementsByTagName('div');
        for (var i = 0; i < sideMenuOptions.length; i++) {
            if (sideMenuOptions[i].className == 'sidemenu-maincat')
            {
                sideMenuOptions[i].addEventListener('click', function () {
                    var subMenuItems = this.getElementsByClassName('sidemenu-subcat');
                    for (var s = 0; s < subMenuItems.length; s++) {
                        var subItem = subMenuItems[s];
                        if (subItem.offsetWidth === 0 && subItem.offsetHeight === 0) {
                            subItem.className = 'sidemenu-subcat';
                        } else {
                            subItem.className = subItem.className + ' hidden';
                        }
                    }
                });
            }
        }
    } 
```

# jquery - 如何加快 $.offset() 的速度？

> ID：14558493
> 
> 赞同：8
> 
> 时间：2013-01-28T08:55:49.280
> 
> 标签：jquery, performance, twitter-bootstrap

我正在使用 jQuery 和 Bootstrap 构建一个 Backbone 应用程序。

在 Firefox 上一切正常，但我在使用 Webkit 浏览器的一些 $.offset() 计算上的性能非常缓慢（$.offset 大约需要 250 毫秒才能执行）

有没有人已经经历过这种行为？

注意：应用 $.offset 的 dom 元素被放入 Bootstrap 轮播和一些嵌套的折叠小部件（使用 css3 转换属性......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-10T09:22:45.733

如果可能的话，你能在这部分使用纯 JavaScript 吗？您可以使用[`getBoundingClientRect()`](https://developer.mozilla.org/en/docs/Web/API/Element/getBoundingClientRect)：

```
element.getBoundingClientRect();
console.log(element.top, element.right, element.bottom, element.left); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-20T12:21:38.607

您还可以使用本机[offsetTop](https://www.w3schools.com/jsref/prop_element_offsettop.asp)和[offsetLeft](https://www.w3schools.com/jsref/prop_element_offsetleft.asp)。

它们要快得多，您可以通过将宽度和高度添加到左侧和顶部偏移量来计算右侧和底部。

# php - 仅打印数组中某些键的值

> ID：14558498
> 
> 赞同：-1
> 
> 时间：2013-01-28T08:56:30.413
> 
> 标签：php, arrays, json, foreach

我有这个源文件。

```
[
    {
        "title": "Course1",
        "location": "BuildingA",
        "day": "wednesday",
        "id": 85412
    },
    {
        "title": "Course2",
        "location": "BuidlingB",
        "day": "friday",
        "id": 85413
    },
    {
        "title": "Course3",
        "location": "BuidlingA",
        "day": "friday",
        "id": 85414
    }
] 
```

如何在 PHP 中只打印键“title”和“location”的值？

到目前为止我得到的代码是：

```
$array = json_decode($json, true);

foreach ($array as $key => $jsons) {
     foreach($jsons as $key => $value)  
echo $value." ";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:58:06.830

```
foreach ($array as $key => $jsons) {     
echo $jsons['title'];
echo $jsons['location'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:59:39.017

```
$json = '
[
    {
        "title": "Course1",
        "location": "BuildingA",
        "day": "wednesday",
        "id": 85412
    },
    {
        "title": "Course2",
        "location": "BuidlingB",
        "day": "friday",
        "id": 85413
    },
    {
        "title": "Course3",
        "location": "BuidlingA",
        "day": "friday",
        "id": 85414
    }
]
';

$array = json_decode($json, true);

foreach ($array as $key => $jsons) {
echo $jsons["location"];
echo $jsons["title"];
} 
```

# sql-server - SQL Server 中的永久行级锁定

> ID：14558500
> 
> 赞同：4
> 
> 时间：2013-01-28T08:56:34.553
> 
> 标签：sql-server, performance, tsql, locking

我在一个存储过程上的性能非常差，该存储过程对几个非常小的表进行了超过一百次（！）更新，并且似乎所有并发用户都在不断地相互阻塞。

计划在今年晚些时候对 proc 进行完全重写，但与此同时，我想看看我们是否可以通过强制对每个受影响的表进行行级锁定来缓解这个问题。

在 Sybase 上，您可以（或者至少可以在 2007 年左右）使用以下语句强制对表进行行级锁定：

```
alter table titles lock datarows 
```

在 SQL Server 上，似乎获得相同效果的唯一方法是在每个更新或插入语句上使用 WITH (ROWLOCK)。即便如此，这也只是一个可以忽略的提示。

SQL Server 中是否有一种方法可以强制（或强烈支持）对给定表的所有更新进行行级锁定？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T09:09:18.937

首先要确保更新不是表扫描。换句话说，您**确实拥有正确的索引**（UPDATE 也需要索引......）。在您确保经过仔细考虑后，[禁用所用索引上的页面锁定](http://technet.microsoft.com/en-us/library/ms188388.aspx)：

```
ALTER INDEX ... WITH (ALLOW_PAGE_LOCKS = OFF, ALLOW_ROW_LOCKS = ON); 
```

像在慢跑一桶 TNT 和一瓶凝固汽油弹时一样小心翼翼地进行这项操作……

* * *

*附加信息（来自下面的评论）：*

*   您可以禁用聚集索引上的页面锁，但不能禁用堆上的页面锁（因为它们是物理结构化的，并且无法在不锁定页面的情况下执行正确的锁层次结构）。

*   锁升级是一个（相关但）不同的主题。仅当语句选择行级锁粒度并决定在执行期间升级到行集粒度级时，才会出现锁升级。确实，OP可能实际上是升级的受害者，从我阅读OP的方式来看，我认为更可能的原因只是缺少索引（即，由于扫描而预先选择了高锁定粒度，不会触发升级）。

*   初始粒度级别是手头任务的引擎估计的结果。如果估计表明必须锁定大量行，那么它可能会选择页粒度，因为获取大量行锁通常是有问题的。缺少索引会触发扫描，扫描通常会选择页面粒度。

*   升级也是从行/页到行集（对象）粒度。首先通过中间页面级别充满了并发问题，因此使用了“大锤”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:23:24.393

您可以使用它来禁用锁升级：

```
ALTER TABLE titles SET (LOCK_ESCALATION=DISABLE) 
```

请参阅[有关锁升级的文档](http://msdn.microsoft.com/en-us/library/ms184286%28SQL.105%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-23T17:34:17.173

1.  跟踪标志 1211
2.  通过更改索引关闭页面级别锁定

这两个的组合将为您提供行级锁定。除非当然 sql 会决定直接进入表锁定 :) 还有 1224 标志，但它会忽略您的请求处于内存压力下，1211 不会。内存消耗可能会大幅增加，被警告并进行一些用户活动模拟（RML 或基准工厂）并运行 perfmon 进行观察。我认识过去做过的人。

# html - 通过 appcache 排除页面自身

> ID：14558505
> 
> 赞同：2
> 
> 时间：2013-01-28T08:56:54.147
> 
> 标签：html, browser-cache

我有一个 appcache（带有 NETWORK *）。所以现在我访问我的页面`<html manifest="/cache.appcache">`。然后页面本身就像所有图像一样被缓存。但我希望页面自身不被缓存。我怎样才能做到这一点？我想`NETWORK *`会做的伎俩。

问候，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T15:11:30.117

appcache 清单始终缓存母版页。如果您使用的是 Chrome，请在此处检查页面的缓存文件：chrome://appcache-internals

一种解决方法是在页面的某个位置放置一个隐藏的 iframe，其中包含用于缓存离线内容的 appcache 文件。（在此处查看“防止应用程序缓存使用 iframe 存储主文件”：http: [//labs.ft.com/2012/11/using-an-iframe-to-stop-app-cache-storing-masters /](http://labs.ft.com/2012/11/using-an-iframe-to-stop-app-cache-storing-masters/) )

更好的解决方案可能是编写页面以在打开服务器时从服务器获取新内容 - 如果无法访问服务器，它可以提供来自 HTML5 本地存储的最后一个已知内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T16:08:08.167

我已经尝试过 iframe 解决方法，发现它已经成熟但有错误。大多数浏览器会缓存页面无法获取的 iframe 的数据。

**而是通过 AJAX 加载页面的内容**。基本上有一个带有清单和 javascript 的空白 html 页面，它从服务器中提取和添加其内容。这样只有空白的 html 被缓存，内容总是从服务器更新。

将页面转换为这种方法可能非常困难，但它确实有效。确保适当的 javascript 在正确的时间运行，可能需要一些解开。移动从缓存拉到新 ajax 方法时不会调用的服务器代码。

注意：如果条件在查询字符串中，则不需要从服务器拉取条件内容，不同的查询字符串做一个单独的缓存

# python - 如何将负面后视列表附加到 python 正则表达式？

> ID：14558508
> 
> 赞同：0
> 
> 时间：2013-01-28T08:57:07.940
> 
> 标签：python, regex

我正在尝试使用 regex split 将段落拆分为句子，并且我正在尝试使用此处发布的第二个答案： [a Regex for extracting sentence from a paragraph in python](https://stackoverflow.com/questions/8465335/a-regex-for-extracting-sentence-from-a-paragraph-in-python)

但是我有一个缩写列表，即使有句号，我也不想结束句子。但我不知道如何正确地将其附加到该正则表达式中。我正在从一个包含诸如 Mr. Ms. Dr. St. 之类的术语的文件中读取缩写词（每行一个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:00:16.530

简短的回答：你不能，除非所有后向断言都具有相同的固定宽度（在你的情况下它们可能不是；你的例子只包含两个字母的缩写，但`Mrs.`会破坏你的正则表达式）。

这是当前 Python 正则表达式引擎的限制。

更长的答案：

您*可以*编写一个正则表达式，如`(?s)(?<!.Mr|Mrs|.Ms|.St)\.`，用尽可能多的 s 填充后向断言的每个交替部分，`.`以使它们都具有相同的宽度。但是，这在某些情况下会失败，例如当段落以 . 开头时`Mr.`。

无论如何，您在这里没有使用正确的工具。更好地使用为这项工作设计的工具，例如[Natural Language Toolkit](http://nltk.org/)。

如果您坚持使用正则表达式（太糟糕了！），那么您可以尝试使用一种`findall()`方法而不是`split()`：

```
(?:(?:\b(?:Mr|Ms|Dr|Mrs|St)\.)|[^.])+\.\s* 
```

`.`将匹配以（可选地后跟空格）结尾的句子，并且可能不包含点，除非前面是允许的缩写之一。

```
>>> import re
>>> s = "My name is Mr. T. I pity the fool who's not on the A-Team."
>>> re.findall(r"(?:(?:\b(?:Mr|Ms|Dr|Mrs|St)\.)|[^.])+\.\s*", s)
['My name is Mr. T. ', "I pity the fool who's not on the A-Team."] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:35:57.060

**我没有直接回答您的问题，但这篇文章应该包含足够的信息，以便您为您的问题编写一个有效的正则表达式。**

您**可以**附加负面回顾列表。请记住，look-behinds 是零宽度的，这意味着您可以将任意数量的look-behinds 放在一起，并且您仍然从同一位置进行look-behinds。只要您不需要在后视中使用“许多”量词（例如，、、`*`）`+`，`{n,}`一切都应该没问题（？）。

所以正则表达式可以这样构造：

```
(?<!list )(?<!of )(?<!words )(?<!not )(?<!allowed )(?<!to )(?<!precede )pattern\w+ 
```

这有点太冗长了。无论如何，我写这篇文章只是为了证明可以回顾固定字符串的列表。

示例运行：

```
>>> s = 'something patterning of patterned crap patternon not patterner, not allowed patternes to patternsses, patternet'
>>> re.findall(r'(?<!list )(?<!of )(?<!words )(?<!not )(?<!allowed )(?<!to )(?<!precede )pattern\w+', s)
['patterning', 'patternon', 'patternet'] 
```

但是，使用look-behind 有一个问题。如果黑名单文本和匹配模式的文本之间存在动态数量的空格，则上面的正则表达式将失败。我真的怀疑是否存在修改正则表达式的方法，以便它适用于上述情况，*同时保持后视*。（您总是可以将连续的空格替换为 1，但它不适用于更一般的情况）。

# c# - 日期选择器不适用于更新面板

> ID：14558512
> 
> 赞同：2
> 
> 时间：2013-01-28T08:57:29.140
> 
> 标签：c#, asp.net, scriptmanager

我的应用程序在 asp.net 3.5 中，我从更新面板内的日期选择器中选择日期。选择日期并单击提交按钮页面后回发。回发后，当我再次尝试选择日期时，我看不到那里的日期选择器。

//aspx页面上的代码

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Sample/MasterPage.master" AutoEventWireup="true" CodeFile="UpdateProblem.aspx.cs" Inherits="Sample_UpdateProblem" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<script type="text/javascript" src="jscolor/jscolor.js"></script>  // Script for date 
<asp:ScriptManager ID="ScriptManager1" runat="server" >
</asp:ScriptManager>
<div>
<asp:UpdatePanel ID="panel1" runat="server">
    <ContentTemplate>
        <asp:TextBox runat="server" ID="textbox" CssClass="color" />
        <asp:Button ID="Button1" runat="server" Text="Button" />
    </ContentTemplate>
</asp:UpdatePanel>
</div>
</asp:Content> 
```

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T09:03:22.913

在您的 UpdatePanel 中，在您的测试框上添加 css 类

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
           <asp:TextBox ID="TextBox1" runat="server" CssClass="classTarget"></asp:TextBox>
           ..... 
        </ContentTemplate>
</asp:UpdatePanel> 
```

在您的脚本中添加此代码

```
 <script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.1.js">
   </script>
   <script type="text/javascript">
        $(document).ready(function() {
            Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);

            function EndRequestHandler(sender, args) {
                $('.classTarget).datepicker({ dateFormat: 'dd-mm-yy' });
            }

        });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-22T06:48:57.450

```
$(function () {
   bindDatePickers(); // bind date picker on first page load
   Sys.WebForms.PageRequestManager.getInstance().add_endRequest(bindDatePickers); // bind date picker on every UpdatePanel refresh
});

function bindDatePickers() {
   $('#<%= txtInvoiceDateFrom.ClientID%>').datepicker({
      uiLibrary: 'bootstrap4'
   });
   $('#<%= txtInvoiceDateTo.ClientID%>').datepicker({
      uiLibrary: 'bootstrap4'
   });
 } 
```

# vb.net - Cursor.Wait 后 printDialog

> ID：14558516
> 
> 赞同：4
> 
> 时间：2013-01-28T08:57:40.130
> 
> 标签：vb.net, winforms, cursor

我有一个小问题。我将光标设置为等待状态。调用 PrintDialog 后，光标返回默认状态。我无法再次将光标设置为等待状态。代码是这样的：

```
Cursor.Current = Cursors.WaitCursor
[...]
Dim result As DialogResult = printDialog.ShowDialog()
If result = DialogResult.Cancel Then
    Return
End If
Cursor.Current = Cursors.WaitCursor
[...] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:28:42.783

我只是用你的代码做了一个小测试。使用您的代码时，我的 VS2012 没有出现，`Cursor.Current`但在使用时没有抛出任何异常。所以我把它改成了

```
Me.Cursor = Cursors.WaitCursor

Dim result As DialogResult = printDialog.ShowDialog()
If result = DialogResult.Cancel Then
    Return
End If
' not necesary any more
'Cursor.Current = Cursors.WaitCursor 
```

并且**WaitCursor**在显示 printDialog 后保持不变。

**编辑：**找到了一个很好的解释[Cursor.Current 和 Cursor](https://stackoverflow.com/questions/302663/cursor-current-vs-this-cursor-in-net-c)之间的**区别**！

**EDIT2：**我更改了代码以使用上述@HansPassant 示例中的 HourGlass 类。即使您输入文本框，WaitCursor 现在也会保留。无论如何 - 当悬停在例如边界上时，我仍然能够丢失 waitCursor。一个文本框。

总而言之，IMO 我认为当仍然可以输入文本时**强制等待光标不是很好。**也许您可以*考虑禁用控件*，直到某种操作完成，然后再将光标变回。

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Hourglass.Enabled = True

    Dim result As DialogResult = PrintDialog1.ShowDialog()
    If result = Windows.Forms.DialogResult.Cancel Then
        Return
    End If

    'Cursor.Current = Cursors.WaitCursor
End Sub 
```

**Hourglass.vb** - 我希望我在将其转换为 vb.net 时没有犯任何错误

```
Public Class Hourglass
  Implements IDisposable

  Public Shared Property Enabled As Boolean
    Get
        Return Application.UseWaitCursor
    End Get
    Set(ByVal value As Boolean)
        If value = Application.UseWaitCursor Then Return
        Application.UseWaitCursor = value
        Dim f As Form = Form.ActiveForm
        If Not f Is Nothing AndAlso f.Handle <> IntPtr.Zero Then
            SendMessage(f.Handle, 32, f.Handle, 1)
        End If
    End Set
  End Property

  <System.Runtime.InteropServices.DllImport("user32.dll")>
  Private Shared Function SendMessage(hWnd As IntPtr, msg As IntPtr, wp As IntPtr, lp As IntPtr) As IntPtr
  End Function

  Public Sub Dispose() Implements IDisposable.Dispose
    Enabled = False
  End Sub
End Class 
```

# javascript - 子标题的jQuery移动标题背景颜色

> ID：14558520
> 
> 赞同：2
> 
> 时间：2013-01-28T08:57:58.600
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我目前正在开发 jquery 自定义移动模板。我需要知道我们可以`data-role="header"`在一个页面中多次使用标签吗？因为在我的页面中，根据页眉和页脚，我也有几个在中间。例如标题应该用背景颜色包裹，即使我使用它也会验证[http://validator.w3.org/mobile/](http://validator.w3.org/mobile/)。此外，我尝试将以下 jquerymobile 类应用于 div `class="ui-bar"`，但它没有按预期工作，例如：（不读取背景颜色）。

或者，我可以定义一个自定义类，但我需要知道 jquery 已经定义了一个类似于我的要求的类。

仅供参考：这是我的 HTML 示例

```
<div data-role="page" data-theme="a">
            <header data-role="header">
                <div>Main Heading</div>
            </header>
            <!-- logo -->
            <hr/>
            <div class="ui-grid-b">
                <div class="ui-block-a">
                    <a href="#">
                        <div class="h_bag"></div>
                        BAG (0)
                    </a>
                </div>
                <div class="ui-block-b">
                    <a href="#">
                        <div class="lust_list"></div>
                        LUST LIST
                    </a>
                </div>
                <div class="ui-block-c">
                    <a href="#">
                        <div class="search_size"></div>
                        SEARCH SIZE
                    </a>
                </div>
            </div>
            <!-- header options -->

            <div class="ui-bar">
                <h1>This Sub heading should to wrapped with background colour</h1>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:14:12.870

您可以轻松地在 jQuery Mobile 中使用更多的 one 标头，下面是一个示例：

[http://jsfiddle.net/Gajotres/UGVwW/](http://jsfiddle.net/Gajotres/UGVwW/)

每个元素的背景颜色也可以很容易地实现，但您需要使用**!important**来突出它：

```
#second-header {
    background: red !important;      
} 
```

这是一个 HTML 示例：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>
        <div data-theme="a" data-role="header" id="second-header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-left">Next</a>
        </div>        

        <div data-role="content">
            <a href="#" data-role="button" id="test-button">Test button</a>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>   
</body>
</html> 
```

# javascript - Javascript 闭包和内存泄漏风险

> ID：14558521
> 
> 赞同：3
> 
> 时间：2013-01-28T08:57:59.917
> 
> 标签：javascript, jquery, memory, closures, memory-leaks

Recetly 我一直在寻找我的 javascript 代码中的内存泄漏。在发现一些重大泄漏之后，我开始寻找较小的泄漏，并发现了一些可能是潜在泄漏的东西——“hoverIntent.js”插件。请问这真的是泄密还是我太热心了？

代码的一般模式（完整代码在这里[http://cherne.net/brian/resources/jquery.hoverIntent.js](http://cherne.net/brian/resources/jquery.hoverIntent.js)）：

```
(function($) {
    $.fn.hoverIntent = function(f,g) {

    //...

    var track = function(ev) {
        cX = ev.pageX;
        cY = ev.pageY;
    };

    var compare = function(ev,ob) {
        //... function body
    };

    var delay = function(ev,ob) {
       //... function body
    };

    var handleHover = function(e) {
      //... function body
    };

    return this.bind('mouseenter',handleHover).bind('mouseleave',handleHover);
    };
})(jQuery); 
```

我知道很多 js 插件都是这样写的，但是......如果我每次`hoverIntent`在我的对象上调用时都能正确地做到这一点，那么会创建 3 个新函数（闭包）吗？这不是可能的内存泄漏（或至少是性能问题）吗？

这样写不是更好吗：

```
(function($) {

  //create the methods only once on module init?

    var track = function(ev) {
        cX = ev.pageX;
        cY = ev.pageY;
    };

    var compare = function(ev,ob) {
        //... function body
    };

    var delay = function(ev,ob) {
       //... function body
    };

    var handleHover = function(e) {
      //... function body
    };

    $.fn.hoverIntent = function(f,g) {
            //no closures here
    return this.bind('mouseenter',handleHover).bind('mouseleave',handleHover);

    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:06:05.150

你是对的，你的第二个例子会使用更少的内存，因为闭包函数更少。但是，一旦您的事件不可调用（删除了元素等），它们就会再次消失，因此它不是“泄漏”，因为内存不会永远丢失。

此外，许多插件通过在变量中设置元素的当前状态而不是元素本身来使用闭包。

# android - PC“磁盘驱动器”访问后 SD 卡上的文件损坏

> ID：14558524
> 
> 赞同：0
> 
> 时间：2013-01-28T08:58:14.873
> 
> 标签：android, file-io, android-sdcard

我在我的应用程序中遇到 SD 卡文件损坏问题（无论如何它只会打开文件以供读取）。它发生在一种特定情况下： - 应用程序一直在运行，并已从文件中加载数据（并再次关闭它） - 应用程序尚未“强制关闭” - 手机连接到 PC 并使用 SD 卡作为驱动器- 各种 PC 手机文件操作已经进行（但此特定文件没有任何内容） - 手机与 PC 断开连接 - 下次运行应用程序时，文件将损坏并且无法正确加载 - 没有损坏模式 -随机垃圾 - 但文件长度永远不会改变

读取文件的代码如下，注意 - 非常简化，各种尝试/捕获/其他测试以检查沿途的问题，并且工作正常，除了上面详述的。该文件是原始二进制文件，而不是文本。

```
String  fullPath = " ... this will have the path to the file in it  ... ";
FileInputStream
            fs = new FileInputStream(fullPath);
DataInputStream
        ds = new DataInputStream(fs);

Boolean     res = loadBEBin(ds);    //  this reads and loads the file

fs.close();
return res; 
```

很困惑，任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T07:09:54.137

我的 pone (HTC Desire) 似乎是这种情况，如果它作为磁盘驱动器连接到 PC，并且如果 Eclipse 在登录会话期间一直在运行，那么一切都会被破坏。与我的应用程序无关。

我认为与加载 adb 有关。

# ios - 想要从当前视图推送另一个视图

> ID：14558528
> 
> 赞同：0
> 
> 时间：2013-01-28T08:58:39.467
> 
> 标签：ios, uiviewcontroller

我正在做贝宝集成，我的项目运行良好。

但我想从我当前的视图中推送我的下一个视图。首先我使用导航控制器，但现在我想在没有导航控制器的情况下推送它。

我使用导航控制器的语法是

```
[self.navigationController pushViewController:[[[NextViewController alloc] initWithURL:[ECNetworkHandler sharedInstance].redirectURL returnURL:RETURN_URL cancelURL:CANCEL_URL] autorelease] animated:TRUE]; 
```

我使用语法来推送另一个没有导航控制器的视图控制器是

```
NextViewController *webVcustome = [[NextViewController alloc]initWithURL:[ECNetworkHandler sharedInstance].redirectURL returnURL:RETURN_URL cancelURL:CANCEL_URL];
[self.view addSubview:webVcustome.view]; 
```

使用导航它可以工作，但没有导航它不会。

我应该怎么做才能推动视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:04:13.320

而不是添加子视图调用`presentViewController:animated:completion`，如下所示：

```
[self presentViewController:webVcustome animated:YES completion:nil]; 
```

有关此消息的更多信息，请查看[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentViewController%3aanimated%3acompletion%3a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:15:13.363

如果您想在不使用 UINavigationController 的情况下“推送”视图，我认为您只能在开始“推送”移动时使用两个视图来调整它们的框架。

例如：也许您可以创建 2 个子视图，例如 : `currentView`, `anotherView`. 然后将它们添加到`self.view`. 也许你可以设置`currentViews`frame is`(0,0,320,480)`和`anotherViews`frame is `(320,0,320,480)`，当你想“推”他们时，你可以设置他们的 frame 是 currentViews 框架是`(-320,0,320,480)`和 anotherViews 框架`(0,0,320,480)`是`UIView animation`

# php - http POST和http GET之间的澄清

> ID：14558530
> 
> 赞同：2
> 
> 时间：2013-01-28T08:58:52.053
> 
> 标签：php, asp.net, html, web

我已经阅读了大量关于 http 帖子和 http get 方法之间区别的文章。我只是对这两者中哪一个在安全性方面是更好的选择感到困惑。因为，有些文章说最好使用post方法而不是get，因为它不允许在url中显示数据。但是也有人说最好用get，因为它不参与数据的更新，它只是用来读取数据并显示它们。那么，我应该选择两者中的哪一个？还是我理解正确？请帮忙，我需要在这里澄清一下......谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T09:05:56.667

GET 和 POST 是方法/动词，并且——正如口语中的动词和编程语言中的方法——它们表示动作。您应该选择最适合该操作的方法。

从[定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)开始：

**得到**

> GET 方法意味着检索由 Request-URI 标识的任何信息（以实体的形式）

**邮政**

> POST 方法用于请求源服务器接受请求中包含的实体，作为 Request-Line 中 Request-URI 标识的资源的新下级。

概括地说，一个 GET 应该检索，一个 POST 应该创建或更新。选择的方法与安全无关；可以适当地保护或完全不安全。

换句话说：**仅仅因为 POST 似乎“隐藏”了数据并不意味着它更安全。**

我建议还阅读有关[REST 原则](http://en.wikipedia.org/wiki/Representational_state_transfer)的信息。

我会进一步建议阅读有关[Idempotence 和 Safe methods](http://en.wikipedia.org/wiki/Idempotence)的内容。请参阅[规范的第 9.1 节，将](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)幂等性和无能性直接应用于 HTTP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:03:55.873

POST 或 get 在安全性方面并没有真正的区别，如果您的代码容易受到注入，POST 或 GET 方法不会有任何区别，甚至您可以说 GET 更安全，因为 GET URL 将完全记录在日志文件中，如果有是代码中的注入，您可以在日志文件中找到整个注入代码/部分，但不会记录 POST 数据。

POST 没有限制并支持多部分帖子，因此您可以使用 POST 上传文件等。但 GET 参数在 apache 中默认有 8000 个字符限制。

POST 将使您的 URL 看起来更清晰，并且您的参数将被隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:08:32.353

POST 和 GET 是最初用于**POST**（提交）数据和**GET**（检索）数据的两种[HTTP 请求方法。](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)这被[REST](http://en.wikipedia.org/wiki/REST)大量使用，以及更多的请求方法（如**PUT**和**DELETE**）。这就是 POST 和 GET 之间的实际区别。

 ******对于网页上的表单，也使用 POST 和 GET。就安全性而言，这并不重要：两者都可以被客户端读取。唯一的区别是使用**GET**更容易，因为用户可以查看 URL 中的参数。使用**POST**，您需要从 HTTP 请求正文中提取参数（[更多详细信息](http://www.w3schools.com/tags/ref_httpmethods.asp)）。

底线：这主要取决于您想要做什么：您是否希望用户复制 URL 以获得相同的页面？例如，这可能很有用：

```
http://www.yoursite.com/index.php?search=MySearchTerm 
```

这是一个**GET**请求，用户可以复制/与他人共享。但是联系表单会赌一个**POST**请求，因为在 URL 中添加所有联系方式没有任何意义。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T09:03:18.247

通过这个你会有一个清晰的想法

礼貌：-维基答案.....

$_POST 和 $_GET 都是用于从 HTML 表单中提取输入的 PHP 变量。但是，不同之处在于 $_POST 对用户隐藏了提取的变量，而 $_GET 则没有。因此，这两个变量在安全性方面存在重大差异。

那你为什么要使用 $_GET 呢？因为有些网站拥有为用户提供完整信息的大型数据库。例如，假设您在网上购物，您去购买 2 条裤子（商品 #125）。您被发送到的 URL 可能如下所示：

目录.php?item=125&quantity=2

如您所见，通过 $_GET 获得的变量对用户是可见的。

POST 方法有可能发送大量数据（通常受服务器设置限制），除非它代表比较 GET 方法的好处，否则可以使用它。很多浏览器无法正确地为 HTTP POST 方法后显示的页面添加书签，因为提交的数据显示在地址栏中。当您需要使用 GET 方法获取的查询字符串时（由于其限制无效），您将尝试对表单使用 POST 方法。如果您提交不应该在地址栏中显示的重要信息，您可以使用 POST 方法。******

# android - Android：如何指定不透明度 ?

> ID：14558531
> 
> 赞同：5
> 
> 时间：2013-01-28T08:58:52.560
> 
> 标签：android, android-layout, opacity, layer-list

我希望我的 LayerList 的不透明度为 80，所以我写道：

```
<layer-list
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:opacity="80"> 
```

但我得到：

```
Error: Integer types not allowed (at 'opacity' with value '80') 
```

如何指定不透明度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T13:33:24.233

要提供半透明效果，例如 50% 的不透明度，请使用：

`Drawable d = new ColorDrawable(Color.BLACK);
d.setAlpha(130);
mDialog.getWindow().setBackgroundDrawable(d);`

可以更改“130”（0-255）以实现所需的不透明度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:22:53.060

android:opacity 仅支持 layer-list 中的 translucent|opaque|transparent 值。

顺便问一下你的要求是什么？

更新答案：要将不透明度/不那么可见设置为 80%，您需要设置为您的视图

`android:alpha="0.8"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-24T15:47:23.963

我认为这个问题是关于在 a 中设置单个项目的不透明度`<layer-list>`，而不是以编程方式设置整个图像。

如果您已经知道颜色，请使用组合十六进制 RGBA 代码，例如：

`<solid android:color="#80FF0000" />`

将颜色设置为红色 (0xFF0000)，不透明度为 0x80。

同样的事情也适用于其他一些项目。例如中风

`<stroke android:color="#6000FF00" android:width="20dp" />`

这将创建一个 0x60 不透明度的 20dp 厚的绿色描边。

此外，如果您想以编程方式执行此操作，即修改特定项目的 alpha 而不是整个可绘制对象，请为项目使用新的资源 id (android:id="@+id/...") 并访问它 。我还没有碰巧验证这部分。

# php - 在后台运行选定的链接，更新链接的 url 和图标？

> ID：14558533
> 
> 赞同：1
> 
> 时间：2013-01-28T08:59:00.903
> 
> 标签：php, jquery, url, icons, toggle

我不太确定如何表达这个..但这里是:)

我有类似的链接：

```
<a href='#' class='tip' id='4a' onclick=\"load('go.php?go=4a');\"><img src='go.png'></a>
<a href='#' class='tip' id='6a' onclick=\"load('go.php?go=6a');\"><img src='go.png'></a>
<a href='#' class='tip' id='8a' onclick=\"load('go.php?go=8a');\"><img src='go.png'></a> 
```

当有人点击我想`go.php?go=4a`在后台运行的第一个链接时，将链接上的图标更改为`stop.png`，同时将此链接的 URL 更改为`go.php?stop=4a`。

如果他们认为单击相同的链接，我想将这一切恢复到原来的样子。有效地使每个链接都成为去/停止切换！

我似乎认为 jquery 可以做到这一点，但我找不到任何例子。

有人有什么想法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:17:43.273

如果您已加载 jQuery，并且您有一个`x`用作页面内容的容器，则可以使用`$.ajax`将动态内容加载到容器并使其加载/停止，例如：

```
$(function () {
    $('a.tip').on(' click', function () {
        var $this = $(this),
            container = $('#x'),
            prevHTML = container.html(),
            req = {};
        if ($this.hasClass('go')) {
            req.abort();
            container.html(prevHTML);
            $this.find('img').attr('src', 'go.png');
            $this.removeClass('go');
        } else {
            $this.find('img').attr('src', 'stop.png')
                .end().addClass('go');
            req = $.ajax({
                url: 'go.php?go=' + $this.attr('id'),
                type: 'get',
                success: function (data) {
                    container.html(data);
                    $this.removeClass('go');
                }
            });
        }
    });
}); 
```

ps 这是一个让您入门的粗略示例。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:14:30.033

据我所知 - 你想要什么是不可能的。更改 URL 会刷新页面，因此您的 ajax 将在关键时刻丢失。

不过，您可以使用锚点（例如，如果您在`go.php`，您可以将 url 更改为`go.php#go4a`，并且通过正确的编码，您将能够使页面像运行 AJAX 一样工作。

关于还原，您需要使用标志来查看其状态，然后进行适当的还原。不知道你需要什么，所以这是我能给你的所有信息。

# android - 单击按钮我如何动态设置 myglsurfaceview

> ID：14558536
> 
> 赞同：0
> 
> 时间：2013-01-28T08:59:28.987
> 
> 标签：android, opengl-es-2.0

我已经`glSurfaceView`使用 android 做了一个嵌入到布局中，并且在`glSurfaceView`. 通过单击该按钮，`glSurfaceView`应在前一个按钮上创建一个新按钮。

我怎么能那样做？由于这`com.example.activity.MyGlSurfaceView`始终是不变的，我怎样才能让它动态改变呢？

```
 <Linearlayout .....>

  <include android:id="@+id/title_btn"
     android:layout_width="0dp"
     android:layout_height="match_parent"
     android:layout_weight="1"
    layout="@layout/option_button"/>

   <com.example.activity.MyGlSurfaceView
         android:id="@+id/gl_surface_view"
   android:layout_width="0dp"
        android:layout_height="wrap_content" 
   android:layout_weight="8"/> 
       </Linearlayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:25:56.093

希望它可以成为您问题的答案

```
MyGlSurfaceView sv = (MyGlSurfaceView)findViewById(R.id.gl_surface_view);

yourButton.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){
        sv = new MySurfaceView(yourContext);
    }
}); 
```

这是我的第一个答案XD

添加：

```
public class MainActivity extends Activity{

    MyGLSurfaceView myGl;
    Button button;
    Context context;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        context= this;
        setContentView(R.layout.main_activity);
        myGl = (MyGLSurfaceView)findViewById(R.id.main_gl);
        button = (Button)findViewById(R.id.main_button);
        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                myGl = new MyGLSurfaceView(context);
            }
        });
    }
}

public class MyGLSurfaceView extends GLSurfaceView {

    public MyGLSurfaceView(Context context) {
        super(context);
        this.setRenderer(new MyRenderer());
    }

    public MyGLSurfaceView(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.setRenderer(new MyRenderer());
    }   
    static class MyRenderer implements GLSurfaceView.Renderer{

        public void onSurfaceChanged(GL10 gl, int w, int h) {
            gl.glViewport(0, 0, w, h);
        }

        public void onDrawFrame(GL10 gl) {
            gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        }

        @Override
        public void onSurfaceCreated(GL10 gl, EGLConfig config) {
            // TODO Auto-generated method stub          
        }

    }
}

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/main_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <com.renderer.test.MyGLSurfaceView
        android:id="@+id/main_gl"
        android:layout_width="300dp"
        android:layout_height="200dp" />

</LinearLayout> 
```

我不确定这是否适合您的情况，但它不会在我的手机上出错。

# class - ClassLoader 在 prog 时找不到类。导出为 .jar

> ID：14558544
> 
> 赞同：0
> 
> 时间：2013-01-28T08:59:53.760
> 
> 标签：class, jar, export, classloader

所以事情是这样的：我有一个类可以扫描点定义的包名称（例如com.this.package）以查找类，然后将它们添加到列表中。奇怪的是，当我在 IDE 中工作时它工作正常，但是当我将项目导出到可执行 jar 文件时，以及它所有需要的依赖项，它无法找到任何类。

代码如下所示：

```
private void discoverTestCases(String packageName) throws ClassNotFoundException, IOException {
System.out.println("2");
    ClassLoader classLoader = Thread.currentThread()
            .getContextClassLoader();
    System.out.println("3");
    String path = packageName.replace('.', '/');
    System.out.println("4"+ path);
    Enumeration<URL> resources = classLoader.getResources(path);

    System.out.println("5");
    List<File> dirs = new ArrayList<File>();

    while (resources.hasMoreElements()) {
        URL  resource = resources.nextElement();
        System.out.println(resource.getFile());
        System.out.println(resource.getPath());
        dirs.add(new File(resource.getFile()));
    }

    List<Class> classes = new ArrayList<Class>();

    for (File directory : dirs) {
        classes.addAll(findClasses(directory, packageName));
    }

getTestableClasses(classes);

} 
```

如您所见，我添加了一些打印输出，以查看在运行时可以从哪里获得，但最后显示的是“5”。

你能帮我个忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:02:42.947

好吧，问题是，通过这种方式，ClassLoader 会尝试从它们的绝对路径加载类，这会导致它们所在的项目文件夹。但是当项目被打包在单个 JAR 文件中时，这个文件夹就不再存在了。所以解决方案是在 JAR 文件中搜索并使用 UrlClassLoader 加载它们：

```
File f = new File("file.jar");
    List<Class> classes = new ArrayList<Class>();

    URL [] urls = {new URL("jar:"+f.toURL()+"!/")};

    URLClassLoader classLoader = URLClassLoader.newInstance(urls);

    JarFile jarFile = new JarFile(f);
    Enumeration<JarEntry> e = jarFile.entries();
    String className=null;
    while(e.hasMoreElements()){
        JarEntry je = e.nextElement();

         if(je.isDirectory() || !je.getName().endsWith(".class")){
             continue;
         }

         className  = je.getName().substring(0,je.getName().length()-6);
         className = className.replace('/', '.');

         if(className.contains("test.smoke") || className.contains("test.ml") || className.contains("test.sanity")){
             System.out.println("classname::: "+className);
             Class c = Class.forName(className);
             classes.add(c);
         } 
```

# delphi - 在delphi中添加新的word文档

> ID：14558545
> 
> 赞同：2
> 
> 时间：2013-01-28T08:59:54.490
> 
> 标签：delphi, ms-word, delphi-xe

我正在构建一个 delphi 表单以在 MS Word 中添加一个新的 Word 文档，并等待用户插入文本和编辑文档，保存文件并退出 MS Word，然后获取文件名和文件路径。

```
 WordApp := CreateOleObject('Word.Application');
 WordApp.Visible := True;
 Doc := WordApp.Documents.add(); 
```

等待用户插入文本并编辑文档并保存文件并退出表单 MS Word THEN

```
Doc.Save;
DocName := Doc.Name;
Docpath := IncludeTrailingPathDelimiter(Doc.path) + DocName;

with ZipForge1 do
begin
  FileName := Zipfilename;
  OpenArchive;
  Options.StorePath := spNoPath;
  AddFiles(Docpath);
  CloseArchive;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T09:11:38.533

您可以编写自己的事件接收器来侦听 Word 应用程序的`OnQuit`事件。但是，切换到早期绑定 COM 会更容易。中的导入类型库`Word2000.pas`包含您需要的所有内容。

*   用于`TWordApplication`您的应用程序对象。
*   将您的处理程序分配给应用程序对象的事件。
*   根据您想要做什么，似乎最适用的事件是`OnDocumentBeforeClose`和`OnQuit`。

为了说明，这是我能设计的最简单的例子：

```
uses
  Word2000;

procedure TForm1.Button1Click(Sender: TObject);
var
  WordApp: TWordApplication;
begin
  WordApp := TWordApplication.Create(Self);
  WordApp.Visible := True;
  WordApp.Documents.Add(EmptyParam, EmptyParam, EmptyParam, EmptyParam);
  WordApp.OnQuit := WordAppQuit;
  WordApp.OnDocumentBeforeClose := WordDocumentBeforeClose;
end;

procedure TForm1.WordAppQuit(Sender: TObject);
begin
  ShowMessage('Word application quit');
end;

procedure TForm1.WordDocumentBeforeClose(ASender: TObject; 
  const Doc: WordDocument; var Cancel: WordBool);
begin
  ShowMessage(Doc.Name + ' closed');
end; 
```

# iphone - 在 iphone 上测试 ios 版本高于 xcode sdk 的应用程序

> ID：14558547
> 
> 赞同：2
> 
> 时间：2013-01-28T09:00:05.037
> 
> 标签：iphone, ios, xcode

我是 iOS 开发的新手，我有一个很好的旧 macbook，它有 Mac OS X 10.6.8 - 雪豹。我的 Xcode 版本是 3.2，**iOS 4.3 SDK**可以完美运行。但是我有一个 iPhone 4 在**iOS 6**上运行，我想在上面测试我的应用程序。在项目设置中，我选择 iOS 4.3 作为基础 sdk。

是否可以在运行在比我们在 android 中开发的 SDK 更新的 SDK 上的设备上进行测试？或者我应该将我的系统升级到 Mountain Lion 并安装 iOS 6 SDK 吗？

编辑：我已经注册了开发者计划

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:08:51.507

是的，您可以在 xcode 3.2 上测试您的应用程序

只需准备构建，将您的应用程序拖到 iTunes（创建 .ipa 文件）-> 与您的设备同步。

但是您无法调试您的应用程序。

此外，由于每个应用程序都需要与 iPhone 5 兼容，我建议你将你的 mac 升级到最新的 Mountain Lion，因为它只需花费你 20 美元。因为你可以为 iOS 6 编写特殊的代码，比如 iOS 5 的方向方法在 iOS 6 中不再继续，所以最好更新你的系统。

希望这些信息对你有帮助..

# javascript - onunload 事件出错

> ID：14558551
> 
> 赞同：0
> 
> 时间：2013-01-28T09:00:15.943
> 
> 标签：javascript

我的`onunload`事件测试脚本有问题，它必须只在窗口`onunload` 上触发，但它也会随着负载触发。为什么？有问题，我不知道它是什么..请帮助

这是html代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">
function hello(){alert("welcome to my page");}
</script>
<script type="application/javascript" src="script.js"></script>
</head>
<body onload="hello()" >
</body>
</html> 
```

这是脚本代码

```
window.onunload = goodbye();
function goodbye(){
alert("Thank you for visiting.come back soon!");
}
//window.addEventListener('unload',goodbye(),false); 
```

我已经尝试了带有 body 标签的内联调用、`window.onunload`调用和侦听器调用。没有任何工作正常，我收到“感谢您的访问。很快回来！” 页面首次加载时的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:06:35.130

问题是以下行：

```
window.onunload = goodbye(); 
```

这将`window.unload`事件设置为等于函数的结果`goodbye()`，并立即调用该`goodbye()`函数。将其更改为：

```
window.onunload = goodbye; 
```

**更详细：**

您通过命名函数来调用函数，并在括号中传递零个或多个参数（例如：）`goodbye()`。当你调用一个函数时，它会立即被调用，如果它被用作语句的一部分（而不是整个语句），那么函数的返回值将在调用的地方使用。所以，你在说什么：

```
window.onunload = goodbye(); 
```

是：“获取我调用`goodbye`函数的结果，并将返回值分配给`window.onunload`变量”。调用该`goodbye`函数会弹出一个警报，但返回 null，因此您实际上是在说“现在弹出一个警报，然后将`window.onunload`变量设置为 null”。

变量（`window.onunload`和所有其他事件变量）期望是一个函数，所以你在这里真正想说的是，“将`window.onunload`函数设置为`goodbye`函数，所以当系统调用`onunload`事件时，它会调用`goodbye`函数”，并且为此，您将函数本身分配给变量：

```
window.onunload = goodbye; 
```

**然而**

该`onunload`事件可能不是您想要的。这仅在页面被卸载后触发，因此大多数 UI 组件不再可供您使用，包括`alert`. 尝试查看`onbeforeunload`（[JavaScript + onbeforeunload](https://stackoverflow.com/questions/1270395/javascript-onbeforeunload)）

# java - 如何使用 Tomcat 6 限制请求执行时间

> ID：14558559
> 
> 赞同：7
> 
> 时间：2013-01-28T09:00:51.790
> 
> 标签：java, spring, tomcat6

我正在使用 Spring 和 Tomcat 6 开发 Web 应用程序。有时，由于某种原因，请求需要很长时间才能完成，并且会降低服务器的性能。是否可以限制 Tomcat 6 或 Spring 中的请求执行时间？欢迎使用其他有关此问题的方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:09:17.563

使用 HttpConnector 配置`connectionTimeout`

修改你的 server.xml

```
<Connector ... connectionTimeout="xxxx" 
```

其中**xxxx**是毫秒数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:09:55.067

> 是否可以限制 Tomcat 6 或 Spring 中的请求执行时间？

是的，这是可能的，但您需要自己实现。

基本思想是请求方法需要使用a[`Timer`](http://download.oracle.com/javase/6/docs/api/java/util/Timer.html)来为自己安排一个未来N秒的中断。然后它需要在请求处理过程中定期检查是否被中断。最后，如果它在超时之前完成，它需要取消定时器。

* * *

以上假设是 servlet 应该限制它花费在处理请求上的时间。相反，如果您想在客户端实现超时，则很容易在请求完成时设置超时；例如，请参阅[Tomcat 请求超时](https://stackoverflow.com/questions/7145131/tomcat-request-timeout)。

（但是客户端超时的问题是服务器不会知道客户端已经放弃等待，并且无论如何都会继续处理请求。这很容易陷入大问题。想象一个请求需要完成时间比超时要长得多，再加上客户端反复重试已超时的请求...）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-25T06:22:44.750

Sthepen 的上述说法是不正确的。在客户端，当它放弃或浏览器关闭时，浏览器当然不会保持其套接字活动。它会关闭套接字（恢复内存和端口，对吗？）。关闭程序将发送确定的信号到服务器端套接字 - 我相信是 RST。

# javascript - 获取相对定位元素的绝对顶部和底部

> ID：14558569
> 
> 赞同：0
> 
> 时间：2013-01-28T09:01:25.137
> 
> 标签：javascript, jquery, html, upload

我冒着设置输入类型 = 文件元素样式的风险，在其上放置一个按钮，使其不可见后，在内容不时更新的页面上。当添加或删除任何内容时，按钮在输入上的位置会发生变化，并且它会丢失它正好在输入类型 = 文件元素前面的位置。谁能给我任何我能够获得元素的相对位置（顶部和底部）并将其转换为绝对位置的东西。我知道这听起来可能很傻，但不要投反对票，如果有办法，请帮助我，或者你可以给我一个建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:28:43.577

尝试使用具有相对位置的 div 及其具有绝对位置的子元素来包装整个事物，并使用 z-index 将元素定位在彼此之上。

# http - 遗留组件和不同的 http 标头是否存在任何缓存问题

> ID：14558570
> 
> 赞同：0
> 
> 时间：2013-01-28T09:01:32.410
> 
> 标签：http, rest, caching, http-headers, api-design

我正在考虑设计一个 ReST 服务，其中资源可以以多种表示形式提供服务。

我首选的方法是让客户端使用适当的 Accept 标头发出请求，并使用在 Accept 上设置的 Vary 标头进行响应：

```
Vary: Accept 
```

我的问题是，互联网上的各种硬件（代理层等）是否会尊重这一点，或者当我的一个客户要求某种 xml 时，我是否会冒着为我的一个客户提供我的资源的 pdf 表示的硬件的风险？表示？

我的替代方法是通过 uri 扩展运行 conneg

```
~/resource.pdf  ||   ~/resource.xml) 
```

或更可能通过查询字符串参数：

```
~/resource?content-type=application/pdf    ||    ~/resource?content-type=application/vnd.mytype+xml 
```

所以：我会接受 Vary:Accept，还是我需要通过弄乱我的 Url 来保证安全？哪些硬件会给我带来问题？还有什么我应该考虑的吗？

谢谢

# sql - 如何在不使用聚合函数的情况下使用 Pivot

> ID：14558577
> 
> 赞同：0
> 
> 时间：2013-01-28T09:02:17.640
> 
> 标签：sql, sql-server-2008, tsql, pivot, unpivot

我正在使用 MS Sql2008，

```
 Table1: Plan.Plan
     Table2: Plan.PlanFeature
     Table3:Plan.PlanDetails

    Plan.Plan

    PlanID_PK    PlanName  AnnualPrice  MonthlyPrice

  1                   Plan1            Free              Free
  2                   Plan2            $50.00          $4.99
  3                   Plan3            $100.00        $9.99

Plan.PlanFeature

PlanFeatureID_PK    FeatureName
- - - - - - - - - - - - - - - - - - - - - - - - - - - 
        1                           Feature1
        2                           Feature2
        3                           Feature3
        4                           Feature4

Plan.PlanDetails

PlanDetailsID_PK    PlanID_FK    PlanFeatureID_FK    Quantity     Quantity_Type
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -- - - - - - - - - - -
             1                        1                   1                                0               Included
             2                        1                   2                                0               Unlimited
             3                        1                   3                                2               None
             4                        1                   4                                0               Unlimited
             5                        2                   1                                0               Included
             6                        2                   2                                0               Unlimited
             7                        2                   3                                20               None
             8                        2                   4                                0               Unlimited
             9                        3                   1                                0               Included
             10                      3                   2                                0               Unlimited
             11                      3                   3                                >20               None
             12                      3                   4                                0               Unlimited

Output :

FeatureName     Plan1          Plan2         Plan3  
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
Feature1          Included      Included      Included
Feature2          Unlimited     Unlimited    Unlimited
Feature3              2                    20                >20
Feature4          Unlimited     Unlimited     Unlimited
AnnualPrice     Free             $50.00           $100.00
MonthlyPrice   Free             $4.99              $9.99 
```

所以我们开始了，为了将行转换为列，我使用了 COALESCE 和 Pivot

这是我正在尝试的存储过程，

```
DECLARE @cols NVARCHAR(2000)
DECLARE @SubjectQuery NVARCHAR(MAX)
SELECT  @cols = COALESCE(@cols + ',[' + PlanNames + ']',
                         '[' + PlanNames + ']')
FROM    Plans.Plans
ORDER BY PlanNames
SET @SubjectQuery = 'SELECT FeatureName, ' + @cols + '
FROM 
(select p.PlanId_PK, p.PlanNames,pf.FeatureName,pd.Quantity from Plans.PlanDetails pd 
join Plans.Plans p on pd.PlanId_FK=p.PlanId_PK 
join Plans.PlanFeatures pf on pd.PlanFeatureId_FK=pf.PlanFeatureId_PK  ) S
PIVOT
(
Count(Quantity) --Dont know which aggregate functions i have to use here according to my output
FOR PlanNames IN
(' + @cols + ')) AS pvt'
exec @SubjectQuery 
```

对于数量，我必须像这样检查条件`MAX(CASE WHEN pd.Quantity = '0' THEN pd.Quantity_Type)as Quantity`，如果数量值为 0，那么我必须显示`Quantity_type`值

在枢轴块内，根据我的输出不知道我必须使用哪个聚合函数，你能弄清楚这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:36:52.613

根据您的示例数据和期望输出，我认为您将希望`case`在子查询的内部使用`pivot`：

```
DECLARE @cols NVARCHAR(2000)
DECLARE @SubjectQuery NVARCHAR(MAX)
SELECT  @cols = COALESCE(@cols + ',[' + PlanName + ']',
                         '[' + PlanName + ']')
FROM    [Plans]
ORDER BY PlanName

SET @SubjectQuery 
   = 'SELECT FeatureName, ' + @cols + '
      FROM 
      (
        select p.PlanName,
          pf.FeatureName,
              MAX(CASE WHEN pd.Quantity = ''0'' THEN pd.Quantity_Type else quantity end)as Quantity
        from PlanDetails pd 
        join [Plans] p 
          on pd.PlanId_FK=p.PlanId_PK 
        join PlanFeature pf 
          on pd.PlanFeatureId_FK=pf.PlanFeatureId_PK  
        group by p.PlanName, pf.FeatureName
      ) S
      PIVOT
      (
        max(Quantity)
        FOR PlanName IN (' + @cols + ')
      ) AS pvt'

exec(@SubjectQuery); 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/a3438/34)。

结果是：

```
| FEATURENAME |     PLAN1 |     PLAN2 |     PLAN3 |
---------------------------------------------------
|    Feature1 |  Included |  Included |  Included |
|    Feature2 | Unlimited | Unlimited | Unlimited |
|    Feature3 |         2 |        20 |       >20 |
|    Feature4 | Unlimited | Unlimited | Unlimited | 
```

编辑，如果您需要年度价格和每月价格，那么您将需要合并一个`unpivot`和`pivot`功能：

```
DECLARE @cols NVARCHAR(2000)
DECLARE @SubjectQuery NVARCHAR(MAX)
SELECT  @cols = COALESCE(@cols + ',[' + PlanName + ']',
                         '[' + PlanName + ']')
FROM    [Plans]
ORDER BY PlanName

SET @SubjectQuery 
   = 'SELECT FeatureName,'+@cols+'
      FROM 
      (
          select PlanName, FeatureName, 
              MAX(CASE WHEN Quantity = ''0'' THEN Quantity_Type else quantity end)as Quantity,
              SortOrder
          from
          (
              select p.PlanName, pf.FeatureName, pd.Quantity, pd.Quantity_Type, 1 Sortorder
              from PlanDetails pd 
              join [Plans] p 
                on pd.PlanId_FK=p.PlanId_PK 
              join PlanFeature pf 
                on pd.PlanFeatureId_FK=pf.PlanFeatureId_PK  
              union all
              select PlanName, col, ''0'', value, 2 SortOrder
              from
              (
                  select PlanID_PK, PlanName,
                      AnnualPrice, 
                      cast(MonthlyPrice as varchar(6)) MonthlyPrice
                  from plans
              ) src
              unpivot
              (
                  value
                  for col in (annualprice, monthlyprice)
              ) unpiv
          ) pl
          group by PlanName, FeatureName, SortOrder
      ) d
      PIVOT
      (
          max(Quantity)
          FOR PlanName IN ('+@cols+')
      ) AS pvt
      order by SortOrder'

exec(@SubjectQuery); 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/a3438/43)

结果：

```
|  FEATURENAME |     PLAN1 |     PLAN2 |     PLAN3 |
----------------------------------------------------
|     Feature1 |  Included |  Included |  Included |
|     Feature2 | Unlimited | Unlimited | Unlimited |
|     Feature3 |         2 |        20 |       >20 |
|     Feature4 | Unlimited | Unlimited | Unlimited |
|  AnnualPrice |      Free |     50.00 |    100.00 |
| MonthlyPrice |      Free |      4.99 |      9.99 | 
```

# jquery - 如何使用 select2.js

> ID：14558578
> 
> 赞同：14
> 
> 时间：2013-01-28T09:02:22.517
> 
> 标签：jquery, html, jquery-chosen, jquery-select2

我想添加一个表单字段，它可以自动填充文本并可以使用多个选项卡（类似于 fb）。我发现 select2.js 可以帮助我做到这一点，但是当我将多个属性设置为 true 时，我在使用它时遇到了问题。如果我添加多个：true，则页面将其显示为正常选择。

我发现 select2 页面上的文档令人困惑。

我是他们所有人的新手，请帮助我。

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>          
<script type="text/javascript" src="select2.js"></script>          

 <link href="select2.css" rel="stylesheet"/>
    <script src="select2.js"></script>
    <script>
        $(document).ready(function() { 
        $("#e1").select2([multiple: true]);
        });
    </script>

</head>
<body>
<input type="button" id="123">click
</br>
<input type="hidden" id="1234">
<select id="e1">
        <option value="AL">Alabama</option>
        <option value="Am">Amalapuram</option>
        <option value="An">Anakapalli</option>
        <option value="Ak">Akkayapalem</option>

        <option value="WY">Wyoming</option>
    </select>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-29T22:46:29.193

仅在标记中添加属性“multiple”和宽度。

```
<select multiple id="e1" style="width:300px"> 
```

和js这样：

```
$(document).ready(function() { 
 $("#e1").select2();
}); 
```

在这里看小提琴：http: [//jsfiddle.net/marcusasplund/jEADR/2/](http://jsfiddle.net/marcusasplund/jEADR/2/)

旁注；您在问题中发布的代码中加载了 select2.js 2 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T14:36:24.640

您可以覆盖特定于 select2.js 的类：

```
.select2-container-multi .select2-choices {
    width: 150px;
} 
```

它应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-28T12:27:43.293

**您可以将多个属性与选择一起使用**

```
 <html>
  <head>
    <link href="select2.min.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="jquery.js"></script>      
    <script type="text/javascript" src="select2.min.js"></script>     
 </head>
 <body>
    <select multiple id="getCountry">
      <option value="India">India</option>
      <option value="Afghanistan">Afghanistan</option>
      <option value="japan">japan</option>
    </select>
    <input type="button" id="submit" value="Submit">click
    <script>
      $(document).ready(function() {   
        $("#getCountry").select2();   
      });      
    </script>   
  </body>
</html> 
```

# php - 如果发现重复值，则删除数组中的值

> ID：14558597
> 
> 赞同：1
> 
> 时间：2013-01-28T09:03:28.997
> 
> 标签：php, arrays, duplicates

我有一个这样的数组

```
$callerid = Array ( [1] => <409> [2] => <3214> [3] => <409> [4] => <5674> ) 
```

我想要像这样的输出

```
Array ( [1] => <3214> [2] => <5674> ) 
```

也就是说，如果在数组中发现重复，我想删除出现的值。

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:12:05.890

不保留键，但返回正确的值（即出现次数为 1 的值）

```
$callerid = array(1 => 409, 2 => 3214, 3 => 409, 4 => 5674);
$calleridCounts = array_count_values($callerid);
$result = array_keys(
    array_intersect($calleridCounts,array(1))
);
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:15:46.490

```
<?php
$string = Array ( 409,3214,409,5674 ) ;
print_r($string);
foreach($string as $vals){
   $match  = array_keys($string, $vals);
   if(count($match) > 1){
      foreach($match as $ky){
        unset($string[$ky]);
      }
   }

}
print_r($string);
?> 
```

# javascript - 如何替换 html-tag 属性字符串中的多个 '<' 和 '>'？

> ID：14558604
> 
> 赞同：1
> 
> 时间：2013-01-28T09:03:53.440
> 
> 标签：javascript, regex, brackets, html

我从 rte 读取内容，在将它们提交到服务器之前，我需要在一些标题属性中替换 `<`它们`>`的 html 实体。我不想在这里使用 Dom-Operations，因为我在这里得到的只是文本表示。我正在寻找的是一个转换这个的正则表达式

```
<div>ABCD<img style="max-height: 25px; max-width: 25px;" class="inlinetag" 
  src="http://my_images/icon.gif" 
  title="<ir_inline itemname=bild_1 type=0><cbd>"> EFG</div> 
```

进入这个

```
<div>ABCD<img style="max-height: 25px; max-width: 25px;" class="inlinetag" 
  src="http://my_images/icon.gif" 
  title="&lt;inline itemname=bild_1 type=0&gt;&lt;cbd&gt;"> EFG</div> 
```

**如何才能做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:46:43.933

试试这个 JS 函数：

```
function title_replace() {
    var str = '<div>ABCD<img style="max-height: 25px; max-width: 25px;" class="inlinetag" \
  src="http://my_images/icon.gif" \
  title="<ir_inline itemname=bild_1 type=0><cbd>"> EFG</div>';
    var re = new RegExp(/title="(.|[\s\S])+?"/gm);
    var title = "";
    while (title_matches = re.exec(str)) {
        title = title_matches[0];
        var new_title = title.replace(/</gm,"&lt;").replace(/>/gm,"&gt;");
        str = str.replace(title, new_title);
    }
} 
```

**编辑：**

我已经删除了 dom 上的所有工作，现在都是 JS。看看这是否适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:26:08.297

纯正则表达式解决方案：

```
var input = "title=\"<ir_inline itemname=bild_1 type=0><cbd>\""; //use the entire input
var myRegexp = /title=\"(.*?)\"/g; // get all title attributes
var output = input.replace(myRegexp,function(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;");}); 
```

我已经用您的示例输入和输出对其进行了测试。它应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T11:47:41.993

所以让我假设几件事，你有一个带有html标签和属性的纯文本，你只想把它当作纯文本，可能是因为你在服务器端得到这个文本。

除了正则表达式，如果您更喜欢通过循环进行字符串操作，那么下面是简单的循环（逻辑），通过它您可以实现您想要的。

我假设您需要在服务器端执行此操作，因此我为此使用了 C#，您可以使用任何语言，甚至是 javascript 来执行此循环。

```
 string sourceText = "<div id=\"target\" ><div>ABCD<img style=\"max-height: 25px; max-width: 25px;\" class=\"inlinetag\" " +
                            "src=\"http://my_images/icon.gif\\" +
                            "title=\"<ir_inline itemname=bild_1 type=0><cbd>\"> EFG</div>" +
                        "</div>";
 string targetText = sourceText;
 bool traceOn = false;
 for (int i = 0; i < targetText.Length; i++)
 {
    if (traceOn)
       if (targetText[i] == '"')
            traceOn = false;

   if (traceOn)
   {
        if (targetText[i] == '<')
        {
             targetText = targetText.Remove(i, 1).Insert(i, "&lt;");
        }
        if (targetText[i] == '>')
        {
            targetText = targetText.Remove(i, 1).Insert(i, "&gt;");
        }
   }
   if (targetText[i] == '"')
   {
        if (targetText[i - 1] == '=')
          traceOn = true;
   }
}
        } 
```

所以基本上我正在做的是为你的替换操作模式，即你只需要替换那些出现在双引号内并且前面还有一个'='的<和>。它完美地工作。

这不是一个完美的解决方案，但它应该给你和想法，你可以如何处理你的字符串。这里有人可以编写更强大和更灵活的逻辑。尝试/改进它。

其他解决方案可以是，将您的整个字符串视为 xml。即几乎所有服务器端语言都提供了将字符串处理为xml 的工具。找到适合您需要的，即

我本可以做类似的事情

```
XmlDocument doc = new Xmldocument();
doc.LoadXml(targetString);

and then I could easily retrieve any tag and its attribute. 
```

至于正则表达式，我很害怕它们。它应该给你一个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T09:23:21.563

在服务器端尝试[antisamy 。](https://www.owasp.org/index.php/Category%3aOWASP_AntiSamy_Project)它功能强大且安全。

# c# - 在 C# Linq 表中保留唯一的主键

> ID：14558607
> 
> 赞同：0
> 
> 时间：2013-01-28T09:04:11.520
> 
> 标签：c#, database, linq

我是在 C# 的类中使用带有 Linq 的表的新手，如果我的术语不正确，请原谅我！一般来说，数据库也相对较新，所以如果这是我忽略的基本数据库概念，请告诉我。

我有一个类似于下面的“人”类，并且我定义了一个名为 Id 的列，它是主键 - 即它必须是唯一的。

我还指定了 isDbGenerated = true，这样我就不必手动指定此 ID。

```
[Table]
public class Person
{

    [Column(IsPrimaryKey = true, IsDbGenerated = true)]
    public int Id;

    ...
} 
```

当我向表中添加行时，这很有效。

当我从表中删除行时，它会在行 ID 序列中留下空白。这可以。

当我尝试保存我的数据并将其重新加载到表中时，就会出现问题。为了保存数据，我手动将所需的信息写入文本文件。

当我将数据重新加载到我的表中时，自动生成的 ID 会覆盖我保存信息时使用的原始 ID。这会导致我的大型数据库出现问题，该数据库通过它们的 ID 引用这些行。

例如。

我的数据库包含这些行：

*   身份证、姓名
*   1、约翰
*   2、吉姆
*   4，马克（注释#3丢失了，因为我在某个时候删除了它）
*   5、大卫

我将这些保存到文本文件中。我在另一个时间将它们从文本文件中加载回一个空表中。

*   1、约翰
*   2、吉姆
*   3、马克
*   4、大卫

IsDBGenerated 功能使这些数字是连续的。

对我来说，最好的设置方法是什么，以便在保留唯一 ID 的同时将数据重新加载到表中？

编辑：我认为使用自动生成的密钥并没有让我的生活更轻松。

自行生成下一个要使用的主键的最佳方法是什么？一个。只是在最后一个条目后增加数字？湾。生成 GUID？C。现有功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:15:26.577

你并没有真正错过任何我认为没有的大概念。您遇到了使用自动生成的密钥可能遇到的固有问题。

在 SQL Server 中（你在使用 SQL Server 吗？）你可以使用一个名为**identity insert**的功能，它可以**关闭**（数据库自动编号，适合插入新记录）或**开启**（你必须提供数字，适合加载从一个文件）。

开/关的含义很容易混淆，因此请阅读文档[SET IDENTITY_INSERT](http://msdn.microsoft.com/en-us/library/ms188059.aspx)。

至于如何在您的特定 ORM 的上下文中执行此操作（它是 LINQ to SQL，实体框架？）我不太确定 - 我在实践中对这个问题的回答是解决它（即不要让自己陷入我将自动生成的 ID 存储在一个文本文件中的情况，我需要在我的应用程序逻辑的上下文中重新加载该文件）。

# visual-studio - Visual Studio Express 2012 在 Windows 应用商店应用的 Windows 8 Release Preview 中运行问题

> ID：14558609
> 
> 赞同：1
> 
> 时间：2013-01-28T09:04:15.577
> 
> 标签：visual-studio, windows-8, visual-studio-2012, windows-runtime, windows-store-apps

我将 Windows 8 Release Preview 64 位操作系统用于我的 Visual Studio Express edition 2012 for Windows Store Development。但是 XAML 设计页面不起作用。它越来越错误是

System.Exception 包更新、依赖或冲突验证失败。（HRESULT 异常：0x80073CF3）

警告框显示为存在部署错误当我尝试执行任何项目时，它显示显示错误是

项目“App1”需要部署才能启动。

验证项目是否已选择部署在解决方案配置管理器中，或通过单击构建菜单中的部署命令之一显式部署它。

然后最后错误是

应用注册失败。Windows 无法安装包 b048fc10-8037-494c-8b3f-0191a2c1bf33，因为此包需要更高的 Windws 版本。包请求的Windows 版本。包要求windws版本为6.2，AppModel版本为6.2，而当前的Windows版本为6.2，AppModel版本为0。（0x80073cfd）

任何人都可以帮我调试错误..这很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:03:32.813

您肯定会在预发布操作系统上运行 RTM 软件 (VS) 时遇到问题。我对您的最佳建议是获取 Windows 8 的发行版。

如果这不可行，您可以使用 Visual Studio 中的 XML 编辑器打开 Package.Appxmanifest。在那里，您会找到包含最低和最高操作系统版本的先决条件部分。将那里的值更改为 6.1.0 (IIRC)，您的应用程序应该会运行。

**警告**虽然不能保证您的应用程序的行为 - 发布候选版本和 RTM 之间的操作系统更改意味着某些行为已更改，并且旧版本可能根本不支持某些行为。继续需要您自担风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:30:48.110

我的愿望是尝试企业版。如果你想要 Windows 8 企业版，你可以[在这里下载](http://technet.microsoft.com/en-us/evalcenter/hh699156.aspx?ocid=wc-tn-wctc)

当您选择任何版本时，它会要求您提供 Microsoft 凭据。

# hadoop - 将大文件复制到 HDFS

> ID：14558612
> 
> 赞同：4
> 
> 时间：2013-01-28T09:04:28.727
> 
> 标签：hadoop, hdfs, ioexception

我正在尝试将一个大文件（32 GB）复制到 HDFS 中。在 HDFS 中复制文件时我从来没有遇到任何麻烦，但这些文件都更小。我正在使用`hadoop fs -put <myfile> <myhdfsfile>`高达 13,7 GB 一切顺利，但后来我得到了这个例外：

```
hadoop fs -put * /data/unprocessed/
Exception in thread "main" org.apache.hadoop.fs.FSError: java.io.IOException: Input/output error
        at org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileInputStream.read(RawLocalFileSystem.java:150)
        at java.io.BufferedInputStream.read1(BufferedInputStream.java:273)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
        at java.io.DataInputStream.read(DataInputStream.java:149)
        at org.apache.hadoop.fs.FSInputChecker.readFully(FSInputChecker.java:384)
        at org.apache.hadoop.fs.ChecksumFileSystem$ChecksumFSInputChecker.readChunk(ChecksumFileSystem.java:217)
        at org.apache.hadoop.fs.FSInputChecker.readChecksumChunk(FSInputChecker.java:237)
        at org.apache.hadoop.fs.FSInputChecker.read1(FSInputChecker.java:189)
        at org.apache.hadoop.fs.FSInputChecker.read(FSInputChecker.java:158)
        at java.io.DataInputStream.read(DataInputStream.java:100)
        at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:74)
        at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:47)
        at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:100)
        at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:230)
        at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:191)
        at org.apache.hadoop.fs.FileSystem.copyFromLocalFile(FileSystem.java:1183)
        at org.apache.hadoop.fs.FsShell.copyFromLocal(FsShell.java:130)
        at org.apache.hadoop.fs.FsShell.run(FsShell.java:1762)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
        at org.apache.hadoop.fs.FsShell.main(FsShell.java:1895)
Caused by: java.io.IOException: Input/output error
        at java.io.FileInputStream.readBytes(Native Method)
        at java.io.FileInputStream.read(FileInputStream.java:242)
        at org.apache.hadoop.fs.RawLocalFileSystem$TrackingFileInputStream.read(RawLocalFileSystem.java:91)
        at org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileInputStream.read(RawLocalFileSystem.java:144)
        ... 20 more 
```

当我检查日志文件（在我的 NameNode 和 DataNodes 上）时，我看到文件上的租约已被删除，但没有指定原因。根据日志文件，一切都很顺利。这是我的 NameNode 日志的最后几行：

```
2013-01-28 09:43:34,176 INFO org.apache.hadoop.hdfs.StateChange: BLOCK* NameSystem.allocateBlock: /data/unprocessed/AMR_EXPORT.csv. blk_-4784588526865920213_1001
2013-01-28 09:44:16,459 INFO org.apache.hadoop.hdfs.StateChange: BLOCK* NameSystem.addStoredBlock: blockMap updated: 10.1.6.114:50010 is added to blk_-4784588526865920213_1001 size 30466048
2013-01-28 09:44:16,466 INFO org.apache.hadoop.hdfs.StateChange: Removing lease on  file /data/unprocessed/AMR_EXPORT.csv from client DFSClient_1738322483
2013-01-28 09:44:16,472 INFO org.apache.hadoop.hdfs.StateChange: DIR* NameSystem.completeFile: file /data/unprocessed/AMR_EXPORT.csv is closed by DFSClient_1738322483
2013-01-28 09:44:16,517 INFO org.apache.hadoop.hdfs.server.namenode.FSEditLog: Number of transactions: 168 Total time for transactions(ms): 26Number of transactions batched in Syncs: 0 Number of syncs: 0 SyncTimes(ms): 0 
```

有人对此有任何线索吗？我已经检查了我可以覆盖的可以延长租约但找不到的属性`core-default.xml`。`hdfs-default.xml`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:04:41.940

一些建议：

*   如果要复制多个文件，请使用多个 -put 会话
*   如果只有一个大文件，则在复制前使用压缩，或者您可以将大文件分成小文件，然后复制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:41:21.000

这听起来是读取本地文件的问题，而不是 hdfs 客户端的问题。堆栈跟踪显示读取一直冒泡的本地文件时出现问题。租约被丢弃，因为客户端在读取文件时由于 IOException 而丢弃了连接。

# python - 使用python的Excel数据映射

> ID：14558613
> 
> 赞同：0
> 
> 时间：2013-01-28T09:04:34.203
> 
> 标签：python, excel

我想打开一个主 Excel 工作簿，并借助位于其他一些目录中的其他工作簿中包含的数据在主工作簿中填写一个表格。

数据的映射基于以下逻辑：

1.  程序应该首先打开一个主工作簿（比如 master.xls）

2.  然后程序应该找出主工作簿中单元格A1对应的值，例如，单元格A1的值是'AB_CD_EF'。

3.  下一步是找出所有“子目录”中的工作簿名称，并检查所有这些目录中包含的任何工作簿的文件名是否与主 Spreadhseet 的单元格 A1 中的值匹配。

4.  如果任何工作簿名称与单元格 A1 匹配，程序应打开该工作簿并提取该工作簿特定单元格中包含的数据，例如单元格 D5 并将其复制到主电子表格的单元格 B1 中。

5.  然后，程序应遍历主电子表格 A 列中包含的所有值，并使用其他工作簿中包含的数据填写完整的表格（与上述步骤 2 至 5 相同）。

希望我的问题很清楚。任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:10:26.610

[使用www.python-excel.org](http://www.python-excel.org/)中解释的模块，这应该非常简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:26:31.707

如果您想在 python 中完成所有繁重的工作，您可以查看此[链接](http://docs.python.org/2/library/csv.html)。有些方法可以将您的数据放入数组或字典中，您可以在 Python 中进行比较。

# spring - 使用resttemplate从xml解组对象时出错

> ID：14558614
> 
> 赞同：1
> 
> 时间：2013-01-28T09:04:36.640
> 
> 标签：spring, resttemplate

我正在使用 spring 的 resttemplate 来调用 rest api 获取错误以解组 xml 以对象我的代码是：-

```
String  uri = "http://devd.webservice.com/devpl/api/1.0/credential?apiKey=" + apiKey + "&signature=" + signature + "&timeStamp=" + timeStamp;
        HttpHeaders requestHeaders = new HttpHeaders();
        requestHeaders.set("accountName", accountName);
        requestHeaders.set("containerName", containerName);
        requestHeaders.set("folderPath", folderPath);
        requestHeaders.set("Content-Type","application/xml");
        requestHeaders.set("Accept","application/xml");
        RestTemplate template = getRestTemplate();
        HttpEntity<String> requestEntity = new HttpEntity<String>(requestHeaders);
        Credential result =(Credential)template.postForObject(uri,requestEntity,Credential.class); 
```

我使用对象的对象类 bean：-

```
 package com.simplidrivechn.netmagicsolutions.bean;
    import com.thoughtworks.xstream.annotations.*;

    @XStreamAlias("credential")
    public class Credential
    {
    private String DestinationUrl;
    private String AuthToken;
    private String StorageUrl;

        public String getAuthToken() {
            return AuthToken;
        }

        public void setAuthToken(String AuthToken) {
            this.AuthToken = AuthToken;
        }

        public String getDestinationUrl() {
            return DestinationUrl;
        }

        public void setDestinationUrl(String DestinationUrl) {
            this.DestinationUrl = DestinationUrl;
        }

        public String getStorageUrl() {
            return StorageUrl;
        }

        public void setStorageUrl(String StorageUrl) {
            this.StorageUrl = StorageUrl;
        }
      } 
```

我的弹簧配置文件： -

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
    <property name="messageConverters">
    <list>
      <bean id="messageConverter" class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
        <property name="marshaller" ref="xstreamMarshaller" />
        <property name="unmarshaller" ref="xstreamMarshaller" />
      </bean>
    </list>
    </property>
  </bean>

 <bean id="xstreamMarshaller" class="org.springframework.oxm.xstream.XStreamMarshaller">
  <property name="aliases">
    <props>
      <prop key="credential">com.simplidrivechn.netmagicsolutions.bean.Credential</prop>
    </props>
  </property>
 </bean>
</beans> 
```

我收到错误：-

```
Exception in thread "main" org.springframework.http.converter.HttpMessageNotReadableException: Could not read [class com.simplidrivechn.netmagicsolutions.bean.Credential]; nested exception is org.springframework.oxm.UnmarshallingFailureException: XStream unmarshalling exception; nested exception is com.thoughtworks.xstream.mapper.CannotResolveClassException: Credential : Credential 
```

请帮我解决这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T10:14:09.813

定义别名的另一种方法是自动扫描。

```
<bean id="xstreamMarshaller" class="org.springframework.oxm.xstream.XStreamMarshaller">
    <property name="autodetectAnnotations" value="true"/>
    <property name="annotatedClasses">
        <array>
            <value>com.simplidrivechn.netmagicsolutions.bean.Credential</value>
        </array>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T02:10:05.883

查看您的异常，`XStreamMarshaller's`您的 spring 上下文中似乎没有正确设置别名。您必须确保您的键是“别名”，即您的情况下的根元素。“凭据”是您尝试反序列化的 xml 响应的根元素吗？请注意，别名区分大小写。以下代码对我有用。注意`aliases.put("person", Person.class);`我的 xml 响应具有根元素“人”。如果我将此键更改为让我们说“人”，`aliases.put("Person", Person.class);`我会像你一样得到例外。

```
XStreamMarshaller marshaller = new XStreamMarshaller();
Map<String, Class> aliases = new HashMap<String, Class>();
aliases.put("person", Person.class);
marshaller.setAliases(aliases);
MarshallingHttpMessageConverter converter = new MarshallingHttpMessageConverter(
                marshaller, marshaller);
List<HttpMessageConverter<?>> converters = new ArrayList<HttpMessageConverter<?>>();
converters.add(converter);
template.setMessageConverters(converters);
HttpEntity request = new HttpEntity(null, headers);
ResponseEntity<Person> response = template.exchange(url,
                HttpMethod.GET, request, Person.class); 
```

# wpf - WPF 中的组合框样式

> ID：14558615
> 
> 赞同：1
> 
> 时间：2013-01-28T09:04:42.830
> 
> 标签：wpf, wpf-controls

我有一个问题`ComboBox`。我想通过覆盖它的样式来改变它的外观，但是我有一些外观问题，我找不到它们在哪里。

我`ComboBox`有这样的外观：

![在此处输入图像描述](../Images/40967f48945b4af37362fcfae408ca89.png)

我有两个问题：

1.  我不知道在哪里改变可扩展菜单的前景......无论我在哪里改变它，它仍然是白色的！

2.  当我选择一个选项时，`Text`的`ComboBox`出现两次，一次是深蓝色，一次是白色，您可以在图像上欣赏。而且不知道怎么改。。。

我的风格是这样的：

```
<!-- All ComboBox styles -->
<ControlTemplate x:Key="ComboBoxToggleButton" TargetType="ToggleButton">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition Width="20" />
        </Grid.ColumnDefinitions>
        <Border
          x:Name="Border" 
          Grid.ColumnSpan="2"
          CornerRadius="5"
          Background="{StaticResource DarkGradient}"
          BorderBrush="{StaticResource SolidBorderBrush}"
          BorderThickness="1" />
        <Border 
          Grid.Column="0"
          CornerRadius="5,0,0,5" 
          Margin="1" 
          Background="{StaticResource TextBoxBrush}" 
          BorderBrush="{StaticResource SolidBorderBrush}"
          BorderThickness="0,0,1,0" />
        <Path 
          x:Name="Arrow"
          Grid.Column="1"     
          Fill="{StaticResource TextBoxBrush}"
          HorizontalAlignment="Center"
          VerticalAlignment="Center"
          Data="M 0 0 L 4 4 L 8 0 Z"/>
    </Grid>
    <ControlTemplate.Triggers>
        <Trigger Property="IsEnabled" Value="False">
            <Setter TargetName="Border" Property="Background" Value="LightGray" />
            <Setter TargetName="Border" Property="BorderBrush" Value="Gray" />
            <Setter Property="Foreground" Value="DarkGray"/>
            <Setter TargetName="Arrow" Property="Fill" Value="DarkGray" />
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate>

<!-- ComboBox TextBox -->
<ControlTemplate x:Key="ComboBoxTextBox" TargetType="TextBox">
    <Border x:Name="PART_ContentHost" Focusable="False" Background="{TemplateBinding Background}" />
</ControlTemplate>

<!-- ComboBox style -->
<Style x:Key="{x:Type ComboBox}" TargetType="ComboBox">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
     <Setter Property="OverridesDefaultStyle" Value="true"/> 
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
    <Setter Property="MinWidth" Value="120"/>
    <Setter Property="MinHeight" Value="20"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ComboBox">
                <Grid>
                    <ToggleButton 
                    Name="ToggleButton" 
                    Template="{StaticResource ComboBoxToggleButton}" 
                    Grid.Column="2" 
                    Focusable="false"
                    IsChecked="{Binding Path=IsDropDownOpen,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}"
                    ClickMode="Press">
                    </ToggleButton>
                    <ContentPresenter
                        Name="ContentSite"
                        IsHitTestVisible="False" 
                        Content="{TemplateBinding SelectionBoxItem}"
                        ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                        ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                        Margin="3,3,23,3"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left" /> 
                    <TextBox x:Name="PART_EditableTextBox"
                        Style="{x:Null}" 
                        Template="{StaticResource ComboBoxTextBox}" 
                        HorizontalAlignment="Left" 
                        VerticalAlignment="Center" 
                        Text="{TemplateBinding Text}"
                        Margin="3,3,23,3"
                        Focusable="True" 
                        Background="Transparent"
                        Visibility="Visible"
                        Foreground="DarkBlue"
                        IsReadOnly="{TemplateBinding IsReadOnly}"/> 
                    <Popup 
                        Name="Popup"
                        Placement="Bottom"
                        IsOpen="{TemplateBinding IsDropDownOpen}"
                        AllowsTransparency="True" 
                        Focusable="False"
                        PopupAnimation="Slide">
                        <Grid 
                          Name="DropDown"
                          SnapsToDevicePixels="True"                
                          MinWidth="{TemplateBinding ActualWidth}"
                          MaxHeight="{TemplateBinding MaxDropDownHeight}">
                            <Border 
                                x:Name="DropDownBorder"
                                Background="{StaticResource TextBoxBrush}"
                                BorderThickness="1"
                                BorderBrush="{StaticResource SolidBorderBrush}"/>
                            <ScrollViewer Margin="4,6,4,6" SnapsToDevicePixels="True">
                                <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                            </ScrollViewer>
                        </Grid>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="HasItems" Value="false">
                        <Setter TargetName="DropDownBorder" Property="MinHeight" Value="95"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="LightGray"/>
                    </Trigger>
                    <Trigger Property="IsGrouping" Value="true">
                        <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                    </Trigger>
                    <Trigger SourceName="Popup" Property="Popup.AllowsTransparency" Value="true">
                        <Setter TargetName="DropDownBorder" Property="CornerRadius" Value="0,0,4,4"/>
                        <Setter TargetName="DropDownBorder" Property="Margin" Value="0"/>
                    </Trigger>
                    <Trigger Property="IsEditable"
           Value="true">
                        <Setter Property="IsTabStop" Value="false"/>
                        <Setter TargetName="PART_EditableTextBox" Property="Visibility" Value="Visible"/> 
                        <Setter TargetName="ContentSite" Property="Visibility" Value="Hidden"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
    </Style.Triggers>
</Style> 
```

如果有人可以帮助解决这个问题，将不胜感激！

**编辑：**

我可以通过改变这个来解决写入两倍值的问题：

```
Text="{TemplateBinding SelectionBoxItem}" 
```

然后添加到`ItemSource`选择语句中，然后默认设置，但是我还是有无法改变`Foreground`combo的问题...

**编辑2：**

我发现了一件事：当我创建列表时，我这样做：

```
listPrecissions = new List<Precisions>() 
```

`Precisions`我用两个字符串创建的类在哪里。如果我使用直接字符串创建它：

```
listPrecissions = new List<string>() 
```

并添加项目，它有一个黑色的前景。但是不知道为什么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:50:17.183

您的问题缺少以下样式`TextBoxBrush`，`SolidBorderBrush`并且`DarkGradient`.

> 我不知道在哪里改变可扩展菜单的前景......无论我在哪里改变它，它仍然是白色的！

在 ComboBox 上设置`Foreground`属性似乎为我改变了它（应用了您的样式）。

> 当我选择一个选项时，组合框的文本会出现两次，一次是深蓝色，一次是白色，正如您在图像上所看到的那样。而且不知道怎么改。。。

`<ContentPresenter Name="ContentSite"`并`<TextBox x:Name="PART_EditableTextBox"`负责显示两种不同情况的当前项目。第一个是正常的，第二个`ComboBox`是标记为可编辑的 ( `IsEditable="True"`)。在您的样式中，默认`PART_EditableTextBox`值为可见，因此只需将其设置为隐藏。

```
<TextBox x:Name="PART_EditableTextBox"
    Style="{x:Null}" 
    Template="{StaticResource ComboBoxTextBox}" 
    HorizontalAlignment="Left" 
    VerticalAlignment="Center" 
    Text="{TemplateBinding Text}"
    Margin="3,3,23,3"
    Focusable="True" 
    Background="Transparent"
    Visibility="Hidden"
    Foreground="DarkBlue"
    IsReadOnly="{TemplateBinding IsReadOnly}"/> 
```

# c# - 在 wpf 中获取选定的数据网格行的问题

> ID：14558618
> 
> 赞同：0
> 
> 时间：2013-01-28T09:04:58.600
> 
> 标签：c#, wpf, wpfdatagrid

```
 <Employees>
  <Employee>
    <EmpId>1</EmpId>
    <Name>Sam</Name>
    <Sex>Male</Sex>
  </Employee>
  <Employee>
    <EmpId>2</EmpId>
    <Name>Lucy</Name>
    <Sex>Female</Sex>    
  </Employee>
</Employees>

  <Grid x:Name="LayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="0.8*"/>
        <RowDefinition Height="0.05*"/>
    </Grid.RowDefinitions>
    <DataGrid x:Name="DgrdEmployeeDetails" Grid.Row="0" FontSize="14.667" FontWeight="Bold" RowHeight="60" ColumnHeaderHeight="60" RowHeaderWidth="40" ColumnWidth="*"/>
    <StackPanel Orientation="Horizontal" Grid.Row="1" HorizontalAlignment="Center">         
        <Button x:Name="BtnGetSelectedRow" Content="GetSelectedRow" Width="120" Height="50" Click="BtnGetSelectedRow_Click" />
    </StackPanel>
</Grid>

private void Window_Loaded(object sender, RoutedEventArgs e)
    {

        XDocument emplyeeDetails = XDocument.Load("Employees.xml");
        var emplyees = from emp in emplyeeDetails.Descendants("Employee").Take(10)
                       orderby emp.Element("EmpId").Value ascending
                       select new
                       {
                           Id = emp.Element("EmpId").Value,
                           Name = emp.Element("Name").Value,
                           Sex = emp.Element("Sex").Value
                       };
        DgrdEmployeeDetails.ItemsSource = emplyees.ToList();
    }
    private void BtnGetSelectedRow_Click(object sender, RoutedEventArgs e)
    {
        DataRowView dr= DgrdEmployeeDetails.SelectedItem as DataRowView;
    } 
```

当我单击 **GetSelectedRow**按钮时，**博士**返回**空**值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:20:39.863

Null，因为您不能将动态对象强制转换为 DataRowView。

```
var dr= DgrdEmployeeDetails.SelectedItem; 
```

博士是一个实例

```
{
    Id,
    Name,
    Sex
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:38:43.933

```
 ObservableCollection<EmpData> _EmpDetail =
    new ObservableCollection<EmpData>();

  public ObservableCollection<EmpData> EmpDetail
    { get { return _EmpDetail; } }            
    public class EmpData
    {
        public int Id{ get; set; }
        public string Sex{ get; set; }
        public int name{ get; set; }                    
    }      

      var emplyees = from emp in emplyeeDetails.Descendants("Employee").Take(10)
                   orderby emp.Element("EmpId").Value ascending
                   select new
                   {
                       Id = emp.Element("EmpId").Value,
                       Name = emp.Element("Name").Value,
                       Sex = emp.Element("Sex").Value
                   };

      foreach (var Emp in emplyees )
        {                             
            _EmpDetail.Add(new EmpData
            {
                Id= Emp.Id,
                Sex= Emp.Sex,
                Name= Emp.Name
            });
        }

   DgrdEmployeeDetails.ItemsSource = _EmpDetail;

 private void BtnGetSelectedRow_Click(object sender, RoutedEventArgs e)
{
    EmpData dr= DgrdEmployeeDetails.SelectedItem as EmpData;
} 
```

# android - android中的活页夹

> ID：14558621
> 
> 赞同：2
> 
> 时间：2013-01-28T09:05:09.600
> 
> 标签：android, android-source, android-binder

1.  我在android binder server中通过ProcessState和defaultServiceManager获取服务管理器的代理接口。

    我还通过客户端中的 defaultServiceManager 获取代理接口。

    我想知道它在客户端调用 defaultServiceManager 时是否创建新的 ProcessState 对象。如果创建新的 ProcessState 对象，是否需要在客户端打开 binder 设备？

2.  在活页夹中，客户端通过通知服务器中的传递来获取信息。客户端为本地站点，服务器端为客户端。

    服务器中有 IPCThreadState poll monitor binder 驱动。如何知道服务器在客户端发送通知信息？

# asp.net - 与 .NET 兼容的 BI 工具的名称，最终用户可以通过这些工具设计自己的报告

> ID：14558624
> 
> 赞同：1
> 
> 时间：2013-01-28T09:05:25.060
> 
> 标签：asp.net, reporting-services, sql-server-2012, business-intelligence, powerview

我用谷歌搜索了很多，但找不到合适的工具。

我有一个 .NET 应用程序。为了使报告功能更好，我正在尝试寻找第三方报告工具，并且能够生成 pdf、jpg 等格式的报告。

主要是根据最终用户的需要设计报告。我检查了 Cognos，我发现它以类似网格的样式提供输出，但我也需要自定义方式。

我得到了以下第三方工具。

```
Fast Reports
Jreport
Cognos
Combit 
```

我需要一个工具，从最终用户的角度来看，这很容易。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:15:28.917

如果您希望最终用户按需设计自己的报告，您是否尝试过新的 Power View (SQL Serves 2012)？

[http://www.microsoft.com/en-us/bi/Products/PowerView.aspx](http://www.microsoft.com/en-us/bi/Products/PowerView.aspx)

# c# - 在datagrid wpf C#中，此视图不允许编辑项目'

> ID：14558626
> 
> 赞同：0
> 
> 时间：2013-01-28T09:05:28.163
> 
> 标签：c#, wpf, wpfdatagrid

我正在使用 WPF `DataGrid`，但无法编辑其中的数据。当我双击一个单元格时，我得到讨论名称中列出的错误：

> 此视图不允许“编辑项目”。

我该如何克服呢？

谢谢

**编辑：** 我的学生姓名和他们想说的内容中有两个数据，都是字符串。然后，我将绑定我的实体框架。

**下面是我的 selectionchanged 功能**

```
private void ClassDataGrid_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var selectedStudent = (Class)e.AddedItems[0];

        var sayingCollection = selectedStudent.;

        sayingCollection.AssociationChanged += ColumnsCollection_Changed;
        var sayingViewSource = ((CollectionViewSource)(this.FindResource("StudentsSayingViewSource")));

        sayingViewSource.Source = sayingCollection.Where(c => c.Saying.Contains(":"));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:45:28.027

让您确认我们是否在 ItemSource 中绑定了 Collection Item，例如 IList、ObservableCollection 或 IEnumerable。

因为 IEnumerable 对象没有 add\remove 属性。所以你不能修改集合。

# c# - 在不创建新会话的情况下下载当前页面 HTML

> ID：14558628
> 
> 赞同：0
> 
> 时间：2013-01-28T09:05:29.697
> 
> 标签：c#, asp.net, httpwebrequest, forms-authentication

我有一个经过 Windows 窗体身份验证的网页，当用户请求此页面时，我想将此页面的 HTML 副本下载到我的服务器中。我尝试过这样的事情

```
using (WebClient client = new WebClient())
        {
            string htmlCode = client.DownloadString("http://aksphases:200/lynliste.aspx");  
        } 
```

这并没有给我正确的结果，因为我传递给系统的 URL 创建了新会话。在这种情况下，我需要验证这个 web 请求，我不能这样做。验证这个网页的唯一方法是那个用户手动登录（我知道通过代码验证任务的方法，但由于某些特殊原因我不能在这里尝试）。有没有其他方法可以让我下载在浏览器中运行的当前页面的 HTML，而无需验证 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:10:16.047

您可以将当前表单身份验证 cookie 与请求一起发送：

```
using (WebClient client = new WebClient())
{
    client.Headers[HttpRequestHeader.Cookie] = 
        System.Web.HttpContext.Current.Request.Headers["Cookie"];
    string htmlCode = client.DownloadString("http://aksphases:200/lynliste.aspx");  
} 
```

这样，我们基本上将当前的 HTTP 请求 cookie 传输到远程 HTTP 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:11:03.660

如果网络服务器不允许匿名访问，那么就没有办法了——您必须通过网站验证自己的身份。

但是，与您认为必须手动完成登录操作相反，它也可以通过代码完成。在 Windows 身份验证的情况下，通过[Credentials](http://msdn.microsoft.com/en-us/library/system.net.webclient.credentials.aspx)属性传递凭据。对于表单身份验证，您需要将登录凭据发布到登录页面，然后在后续请求中使用响应中的身份验证 cookie（使用诸如提琴手之类的工具来检查来自浏览器的请求/响应以在您的代码中复制相同的内容）。

# c# - WPF：未初始化的 Fill 属性中断 IsMouseOver

> ID：14558631
> 
> 赞同：1
> 
> 时间：2013-01-28T09:05:45.393
> 
> 标签：c#, wpf, ismouseover

我有这个 XAML 代码：

```
<Window x:Class="TTT_01.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" MouseLeftButtonDown="Window_MouseLeftButtonDown">
    <Canvas>
        <Rectangle Canvas.Left="146" Canvas.Top="110" Height="100" Name="rectangle1" Stroke="Black" Width="200" />
    </Canvas>
</Window> 
```

这是后面的 C# 代码：

```
public partial class MainWindow : Window
{      
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        if (rectangle1.IsMouseOver)
        {
            MessageBox.Show("Click!");
        }
    }
} 
```

我看到的是一个白色的矩形。当我单击矩形时，我希望会弹出消息框。但这不会发生，除非我`Fill`在 XAML 或 MainWindow 构造函数中初始化矩形的属性。即使我单击矩形，也没有被`Fill`初始化。`rectangle1.IsMouseOver``false`

有什么`Fill`关系`IsMouseOver`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:16:12.713

填充是指定控件的命中测试区域的一部分。在 WPF 控件中，通常会进行像素完美的命中测试，而不是矩形的。例如，如果您`<Ellipse/>`在 XAML 中放置一个，在圆周外单击，但在边界矩形内不会在 Ellipse 中生成 MouseDown 事件（虽然这很明显）。同样，不为形状指定填充意味着形状的内部根本不存在——它对测试产生负面影响，让点击失败。换句话说，没有填充的形状仅构成它们的轮廓，用于命中测试。

如果您希望有一个仅边框透明矩形（或任何其他`Shape`）仍然在内部进行测试，然后指定`Fill="Transparent"`.

这不仅适用于形状，而且适用于像`Grid`and这样的容器`Border`- 如果您不指定 a `Background`，那么它们的空白区域不会在命中测试中注册。

# java - 如何在 Android 应用程序中从图库中选择图像

> ID：14558632
> 
> 赞同：0
> 
> 时间：2013-01-28T09:05:49.270
> 
> 标签：java, android

我正在尝试在 android 中制作一个将 Image Gallery 与我的应用程序集成的应用程序。
以下是我的应用程序剂量的任务：

1.第一个屏幕向用户显示图像视图和加载图片的按钮。
2.点击“加载图片”按钮，用户将被重定向到Android的图片库，在那里她可以选择一张图片。
3.选择图像后，图像将加载到主屏幕的图像视图中。

除了上述三个任务之外，我还需要我的应用程序来执行以下任务：

4.When the image is selected ,it is shown on main screen , when i go for more "load picture" option the previously selected image get disappeared ,but i need my app not to hide the previously selected image ,infact the all selected images它显示在主屏幕上的水平滚动列表中。当我从水平滚动列表中选择它们中的任何一个时，它们显示在主屏幕上。

为此，我的 xml 代码是：

**主.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ImageView
        android:id="@+id/imgView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"></ImageView>
    <Button
        android:id="@+id/buttonLoadPicture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:text="Load Picture"
        android:layout_gravity="center"></Button>
</LinearLayout> 
```

**爪哇代码：**

```
package com.ohile.imagegallerydemo;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class ImageGallery extends Activity {

    private static int RESULT_LOAD_IMAGE = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_image_gallery);

        Button buttonLoadImage = (Button) findViewById(R.id.buttonLoadPicture);
        buttonLoadImage.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent i = new Intent(
                        Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

                startActivityForResult(i, RESULT_LOAD_IMAGE);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
            Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(selectedImage,
                    filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String picturePath = cursor.getString(columnIndex);
            cursor.close();

            ImageView imageView = (ImageView) findViewById(R.id.imgView);
            imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:18:55.340

您可以使用 ListView（水平滚动）或 GridView 来显示所有选定的图像。您可以从本[教程](http://ttlnews.blogspot.in/2011/04/horizontally-sliding-grid-of-images-in.html)中获得灵感。

# php - 检测 SQL 注入漏洞

> ID：14558635
> 
> 赞同：-6
> 
> 时间：2013-01-28T09:06:17.507
> 
> 标签：php, sql, sql-injection

我阅读了有关 SQL 注入和执行它们的经典方法的信息。我也遇到过一些工具，比如 Burp-suite。但是，该材料似乎已经过时了。你能给我一些关于 SQL 注入的好材料的建议吗？请注意，这纯粹是出于教育目的，是黑客竞赛的一部分。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:48:09.900

您需要考虑 2 个部分：

1.  尽可能多地查找信息。关于剧本
2.  实际上是在利用它。

Jihnesh 说的是第一部分。在 Jignesh 给出的示例中，您发现脚本正在使用 MySQL，有关服务器/文件的信息，并且他没有将 category 参数检查为 int（因为他会做一些事情来处理这种情况，而不是查询运行，结果（预计是一个数组） - 可能是空的）。

第一部分有很多方法，但我建议你检查[sqlmap](http://sqlmap.org/) - 这是我用来检查我的网站的一个非常棒的程序。

继续实际的“黑客”——最基本的例子是用户的例子：

```
URL: login.php | POST info: user = "admin' OR 1 -- "
$query = "SELECT * FROM users WHERE user = '{$_POST[user]}' AND password = {$_POST[pass]}";
SQL: SELECT * FROM users WHERE user = 'admin' OR 1 -- ' AND password = ''
Result: Selects all the users in the users table 
```

您还可以查看本教程[http://www.unixwiz.net/techtips/sql-injection.html](http://www.unixwiz.net/techtips/sql-injection.html)

# jquery - 在 IE8 和 IE7 上调用 .dialog() 时出错

> ID：14558636
> 
> 赞同：1
> 
> 时间：2013-01-28T09:06:18.427
> 
> 标签：jquery, jquery-ui

调用 .dialog() 时，我在 IE8 和 IE7 上收到错误消息。

我从 IE 控制台收到的错误消息是：

> SCRIPT438：对象不支持此属性或方法。
> 
> jquery-1.7.2.min.js，第 2 行字符 21784

这是我的代码：

```
// Add to cart button clicked
$tablePanel.on('click', '.AddToCartButton', function (e) {
    $('#mdlPopup_backgroundElement').show();

var optionId = +e.target.getAttribute('optionid');       
var categoryId = +e.target.getAttribute('categoryid');       
// Get the product shoptCityId from previous <tr>       
var $baseProdTr = $(e.target).closest('td.info_row').parent().prev();       
var shopCityId = +$baseProdTr.attr('shopcityid');

// For Dev!
if (isNaN(shopCityId)) {        
    alert('Error:\nFailed to get the shopCityId value from the base product <tr>');
    return;           
}

// Close the product <tr> in the table
oTable.fnClose($baseProdTr[0]);

var shopDisplay = $baseProdTr.find('b.shopDisplay').text();

$.post(urlAddToCart, { productOptionId: optionId, shopCityId: shopCityId, shopDisplay: shopDisplay, categoryId: categoryId }, function (result) {

    if (result === 'EmptyView') {
        updateCartItemsCount();

        $('#mdlPopup_backgroundElement').hide();
        return;
    }

    var $input = $(result).filter('#hdnModalProps');           
    var className = $input.attr('classval');           
    var width = $input.attr('widthval');         
    var height = $input.attr('heightval');

    // --------- the error occurred here:  ------------------
        $modalDialog = $(result).dialog({ modal: true, draggable: false, resizable: false, width: width,
            dialogClass: className + 'noTitleDialog'
        });

    $('#mdlPopup_backgroundElement').hide();

}); 
```

});

我正在使用：jquery-ui-1.8.11.min.js

你可以在这里看到这个：

[http://2send.co.il/Products/%D7%A2%D7%A4%D7%95%D7%9C%D7%94/%D7%A2%D7%A6%D7%99%D7%A6% D7%99%D7%9D](http://2send.co.il/Products/%D7%A2%D7%A4%D7%95%D7%9C%D7%94/%D7%A2%D7%A6%D7%99%D7%A6%D7%99%D7%9D)

1.  点击照片。
2.  点击粉色按钮

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:08:50.183

对话框方法来自[jQuery UI 库](http://jqueryui.com/dialog/)。

您不仅应该在代码中包含 jQuery，还应该包含 jQuery UI 库。如果你已经完成了，请显示完整的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:05:21.137

对话框内容来自服务器的 \r\n，IE8 不解析这些 \r\n 并制作 DOM 元素。所以在 js 中，我添加了从内容中删除 \r\n 的代码。

> 结果 = result.replace(/\r\n/g, '').replace(/\s+/g, ' ');
> 
> $modalDialog = $(result).dialog({modal: true, draggable: false, resizable: false, width: width, height: height, dialogClass: className + 'noTitleDialog' });

# javascript - 如何组合 2 个同位素过滤器 javascript 函数？

> ID：14558638
> 
> 赞同：4
> 
> 时间：2013-01-28T09:06:30.683
> 
> 标签：javascript, jquery, jquery-plugins, filtering, jquery-isotope

嗨，我已经使用此 js 代码成功设置了具有多个下拉菜单的同位素过滤 -

```
jQuery(function() {
    var $container = $('#isocontent'),
        $select = $('div#filterGroup select');
    filters = {};

    $container.isotope({
        itemSelector: '.box'
    });
    $select.change(function() {
        var $this = $(this);

        var $optionSet = $this;
        var group = $optionSet.attr('data-filter-group');
        filters[group] = $this.find('option:selected').attr('data-filter-value');

        var isoFilters = [];
        for (var prop in filters) {
            isoFilters.push(filters[prop])
        }
        var selector = isoFilters.join('');

        $container.isotope({
            filter: selector
        });

        return false;
    });

}); 
```

在同一页面上，我可以使用 quicksearch.js 插件和同位素设置实时搜索输入字段，方法是使用此代码 -

```
<script type="text/javascript">
            $(function () {
                $('input#id_search').quicksearch('#isocontent.box');
});
        </script>
<script type="text/javascript">
$(function() {

   var $container = $('#isocontent');

   $container.isotope({
        itemSelector: '.box'
    });

    $('input#filter').quicksearch('#isocontent .box', {
        'show': function() {
            $(this).addClass('quicksearch-match');
        },
        'hide': function() {
            $(this).removeClass('quicksearch-match');
        }
    }).keyup(function(){
        setTimeout( function() {
            $container.isotope({ filter: '.quicksearch-match' }).isotope(); 
        }, 100 );
    });

});
 </script> 
```

实时搜索和下拉菜单可以工作，但它们不能一起工作。进行搜索时，它会找到应有的内容 - 隐藏不相关的内容 - 但在使用下拉菜单进行过滤时，它似乎会重置或忽略实时搜索完成的过滤。有没有办法让这两个功能一起工作，并可能将脚本组合成一个脚本？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-27T11:41:57.233

这就是我的做法。

首先，我注册了一个简单的文本过滤器。

然后，如果单击按钮，我通过重新定义它来“扩展”这个过滤器（通过将函数传递给同位素的过滤器选项）。

如果未单击任何按钮，我将重新注册简单文本过滤器。

**同位素初始化：**

```
var qsRegex; // global variable

var $grid = $(container).isotope({
    resizable: true,
    masonry: {
        columnWidth: columnWidth
    },
    filter: function() {
        return qsRegex ? $(this).text().match( qsRegex ) : true;
    }
}); 
```

**然后我在输入上的 keyup 事件：**

```
var tabPane = $('.tab-pane.active');
var $quicksearch = tabPane.find('.quicksearch').unbind().keyup( debounce( function() {

    qsRegex = new RegExp($quicksearch.val(), 'gi');
    $grid.isotope();

}, 200 ) ); 
```

**然后我在按钮上的点击事件：（** *简化）*

添加*$(this).hasClass(filter)*在这里很重要。

```
$('.gender-switch').click(function() {

    if ($(this).hasClass('active') == false) {
        var filter = $(this).attr('data-filter');
        var my_combined_filter = function() {
            return qsRegex ? ($(this).text().match( qsRegex ) && $(this).hasClass(filter))  : true;
        }
        $('.tab-pane.active .gallery').isotope({ filter: my_combined_filter });
    } else {
        // none of the buttons have been selected.
        // reset to the simple filter
        $('.tab-pane.active .gallery').isotope({ filter: '*' });
        var my_simple_filter = function() {
            return qsRegex ? $(this).text().match( qsRegex ) : true;
        }
        $('.tab-pane.active .gallery').isotope({ filter: my_simple_filter });
    }
}); 
```

**额外：keyup 事件中的 debounce 功能**

```
// debounce so filtering doesn't happen every millisecond
function debounce( fn, threshold ) {
    var timeout;
    return function debounced() {
        if ( timeout ) {
            clearTimeout( timeout );
        }
        function delayed() {
            fn();
            timeout = null;
        }
        timeout = setTimeout( delayed, threshold || 100 );
    }
} 
```

# java - 无法从类路径中的 jar 中找到 applicationContext.xml

> ID：14558640
> 
> 赞同：0
> 
> 时间：2013-01-28T09:06:33.320
> 
> 标签：java, xml, spring, configuration

我有 Spring 的 Maven 项目。我在类路径中有后端项目作为 jar（添加为 maven 依赖项）。后端项目再次使用 Spring 并拥有自己的 applicationContext.xml。在前端项目中，我有 applicationContext.xml，我想从后端访问应用程序上下文，如下所示：

```
<import resource="classpath:applicationContext.xml" /> 
```

但我得到了：

```
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from URL location [classpath:applicationContext.xml]
Offending resource: ServletContext resource [/WEB-INF/appContext.xml]; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [applicationContext.xml]; nested exception is java.io.FileNotFoundException: class path resource [applicationContext.xml] cannot be opened because it does not exist 
```

也试过：

```
<import resource="classpath*:applicationContext.xml" /> 
```

和

```
<import resource="classpath:/applicationContext.xml" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:06:16.780

如果我理解正确，您希望前端访问后端项目的 applicationContext.xml。那么 classpath* 是正确的说法，你应该确保两个配置文件的命名空间是相同的。

例如，这种情况下不起作用

前端：

```
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
```

后端：

```
http://www.springframework.org/schema/beans/spring-beans-3.2.xsd 
```

# macos - 打开核心数据文档文件时未显示绑定的核心图散点图

> ID：14558642
> 
> 赞同：0
> 
> 时间：2013-01-28T09:06:36.143
> 
> 标签：macos, core-data, core-plot

我有一个`NSPersistentDocument`基于核心数据的应用程序。我可以在文档中编辑一组数据，并且我希望将数据显示在 Core Plot 图中。我将 a 绑定`CTPScatterPlot`到连接到相应实体的 ArrayController。几乎一切正常：每次添加新数据点或编辑数据点时，绘图都会更新。所以我想我做了正确的绑定。

问题是，当我打开一个文档时，最初没有显示数据图。我只看到范围错误的轴。

`awakeFromNib`我在我的 GraphController（不是文档）的方法中设置了图形和绘图。我将绘图绑定到 ArrayController，然后缩放绘图空间。调试时我可以看到排列对象的计数为零，所以难怪缩放不起作用。

我目前通过在按下按钮时调用我的 scaleSpace 方法再次缩放绘图空间。

在我看来，`managedObjectContext`当我设置图表时还没有准备好。什么时候进行缩放合适？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:31:02.423

我想你回答了你自己的问题。当绘图没有任何数据时，缩放绘图空间没有好处。等到您的数据模型构建完成，然后缩放绘图空间。您可以随时构建图表；当数据可用时，它将重新绘制。

# ios - UIViewController 中的 TableView 移动到窗口内的两侧

> ID：14558646
> 
> 赞同：0
> 
> 时间：2013-01-28T09:06:45.447
> 
> 标签：ios, objective-c, uitableview, uiviewcontroller, autoresize

我刚刚在 a中`TableView`添加了一个并通过情节提要`UIViewController`嵌入其中。我实现了委托和源方法，一切正常，除非我第一次以*横向*模式加载视图然后将其更改为纵向模式。可以移动到窗外的侧面并保持不动，但不会粘在边缘上。`ViewController``NavigationController`*`TableView`*

 *![上述问题的屏幕截图。](../Images/a93640cb534db7c59ecc9d4ee8cabfaa.png)

PS：这是专为在 iPad 上使用而设计的。

编辑：添加了另一个 ss：[http ://d.pr/i/vs5d](http://d.pr/i/vs5d)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:22:40.633

找到了答案；方向改变后需要重新加载表格视图。我猜这是横向->纵向方向更改后发生的自动布局错误。

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    [self.tableView beginUpdates];
    [self.tableView endUpdates];
} 
```*

# heroku - 如何在 Heroku 中使用 config.log_tags

> ID：14558650
> 
> 赞同：3
> 
> 时间：2013-01-28T09:06:59.043
> 
> 标签：heroku, ruby-on-rails-3.2

我已经添加`config.log_tags = [:uuid, :remote_ip]`到我的`development.rb`,`test.rb`和`production.rb`文件中，当我在本地运行（开发）时，我确实可以看到这些字段。

但是，当我部署到 Heroku 时，看起来标准日志记录接管了，我没有看到我的附加字段。同一部署中确实发生了其他更改，所以我猜 Heroku 会覆盖我的日志配置（就像它对数据库配置所做的那样）。

知道如何将这些字段添加到日志中吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T18:36:53.467

查看[heroku 博客上](https://blog.heroku.com/archives/2014/2/28/http_request_id_s_improve_visibility_across_the_application_stack)关于使用 HTTP 请求 ID 的这篇文章，其中指出：

> 现在所有 Heroku 应用都启用了 HTTP 请求 ID。

他们刚刚在其平台上启用了此功能（截至 2014 年 2 月），因此您现在应该能够在日志中看到 UUID/x-Request-ID。这应该可以解决您的问题`config/environments/production.rb`：

```
config.log_tags = [ :uuid ] 
```

您可以在[heroku 开发中心](https://devcenter.heroku.com/articles/http-request-id#usage-with-rails)阅读更多详细信息。

# wpf - Google Static Maps WPF 在图像上恢复鼠标坐标

> ID：14558651
> 
> 赞同：0
> 
> 时间：2013-01-28T09:07:07.377
> 
> 标签：wpf, google-maps, coordinates

大家早上好，我有一个小问题要问你，我目前正在使用谷歌地图和静态地图进行项目。我正在研究 WPF，我设法获得了鼠标 X，Y 在图像上的位置。当鼠标在图像上移动时，我想接收坐标，纬度，经度。

那可能吗 ？

非常感谢您的帮助和未来的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:47:59.280

我找到了解决方案，我会在下班后立即发布！

并编辑这篇文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:40:05.350

看：

```
http://home.provide.net/~bratliff/largetiles/ 
```

鼠标事件在某些浏览器中可能不起作用。墨卡托投影函数在每个浏览器中都是相同的。

# c++ - c++ 组合（has-a）问题

> ID：14558655
> 
> 赞同：3
> 
> 时间：2013-01-28T09:07:18.300
> 
> 标签：c++, polymorphism, containers, smart-pointers

作为 C++ 程序员，我学到的一个重要且基本的规则是组合优先于继承 ( [http://en.wikipedia.org/wiki/Composition_over_inheritance](http://en.wikipedia.org/wiki/Composition_over_inheritance) )。

我完全同意这条规则，它使事情比我们使用继承要简单得多。

我有一个应该使用 Composition 解决的问题，但我真的很难做到这一点。

假设您有一***台 Vendor Machine***，并且您有两种类型的产品：

1.  离散产品 - 像零食。
2.  流体产品 - 如饮料。

这两种类型的产品需要在一个名为 VendorCell 的类中表示，该类包含单元格内容。

这两种产品共享一些相同的属性（dm），如价格、数量等......**但**也包含一些不同的属性。

因此，在此处使用 Composition 可能会导致以下结果：

```
class VendorCell {
private : // default access modifier
    int price;
    int quantity;

    // int firstProductAttributeOnly
    // char secondProductAttributeOnly
}; 
```

如您所见，注释行表明，对于单个 VendorCell 取决于它**包含**的产品，这两个注释行中只有一个是重要且可用的（另一行仅与其他类型相关 - 例如流体）。

因此，我可能有一个 VendorCell，里面有零食，并且不需要它的 secondProductAttributeOnly。

组合（对于 VendorCell）是正确的解决方案吗？对你们来说，有人会通过构造函数来确定 VendorCell 类型，而一个 DM（专用于另一种类型的 DM）根本不会被使用（例如，将其标记为 -1），这对你们来说是否合适？>

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:29:30.457

您赞成组合而不是继承的一般规则是正确的。这里的问题是你想要一个[**多态对象的容器**](https://stackoverflow.com/questions/41045/can-i-have-polymorphic-containers-with-value-semantics-in-c)，而不是一个可以容纳所有可能产品的巨大聚合类。但是，由于[**切片问题**](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)，您不能直接保存多态对象，而是需要通过（最好是智能）指针来保存它们。您可以通过（智能）指针直接持有它们，例如

```
class AbstractProduct { /* price, quauntity interface */ };
class AbstractSnack: public AbstractProduct { /* extended interface */ };
class AbstractDrink: public AbstractProduct { /* extended interface */ };
typedef std::unique_ptr<AbstractProduct> VendorCell;
typedef std::vector< VendorCell > VendorMachine; 
```

您只需从 AbstractSnack/AbstractDrink 派生来定义您的零食/饮料

```
class SnickersBar: public AbstractSnack { /* your implementation */ };
class CocaColaBottle: public AbstractDrink { /* your implementation */ }; 
```

然后您可以像这样插入或提取产品：

```
// fill the machine
VendorMachine my_machine;
my_machine.emplace_back(new SnickersBar());
my_machine.emplace_back(new CocaColaBottle());

my_snack = my_machine[0]; // get a Snickers bar
my_drink = my_machine[1]; // get a Coca Cola bottle; 
```

还有其他解决方案，例如[**Boost.Any**](http://www.boost.org/doc/libs/1_52_0/doc/html/any.html)，它使用内部保存指向多态对象的指针的包装类。您还可以通过将 替换为`typedef`包含 a 的单独类`VendorMachine`来重构此代码`std::vector< VendorCell >`，以便您可以获得更好的界面（例如具有货币兑换功能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:36:14.450

你继承是为了被重用。

您编写以便重用。

如果你有不同的属性，那么你可能想要继承，否则组合。

一些变化：

```
class ProductVariety {
public:
    virtual void display(Screen& screen) = 0;
}; 
```

一个实现：

```
class Liquid : public ProductVariety {
public:
    virtual void display(Screen& screen) {
        //...
    }
} 
```

作曲变奏：

```
class Product
{
    int price;
    int quantity;

    unique_ptr<ProductVariety> variety;
} 
```

# forms - 带有 target="_blank" 的花式框内的表单（webkit）

> ID：14558656
> 
> 赞同：1
> 
> 时间：2013-01-28T09:07:27.937
> 
> 标签：forms, fancybox, modal-window

我有一个由贝宝向导创建的贝宝标准按钮（立即购买），该按钮通过`<form target="_new" [...]>`. 在 IE 和 Firefox 中它可以正常工作，但在 webkit 浏览器（如 chrome 和 safari）中它不会创建新窗口。

该表单位于由 fancybox 创建的模式窗口中。它是一个 webkit 错误还是代码中的某些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:15:45.267

于是，我发现了问题，

在普通的 fancybox（不是 2.0+）上，如果你`parent.$.fancybox.close()`在调用 $("#formID").submit() 之后调用，它会取消 webkit 提交。

一种快速的解决方案是进行 1 秒超时（等到目标打开）然后关闭花式框。

# android - 如何打开振动并保持声音

> ID：14558658
> 
> 赞同：1
> 
> 时间：2013-01-28T09:07:44.270
> 
> 标签：android, audio, vibration, android-audiomanager

由于`AudioManager.RINGER_MODE_VIBRATE`还会使设备静音，您如何打开振动并保持当前音量（例如，如果有来电，手机会振动并播放铃声）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:41:10.200

我能想到的最简单的方法是使用：

```
setVibrateSetting(AudioManagerVIBRATE_TYPE_RINGER, AudioManager.VIBRATE_SETTING_ON); 
```

尽管该方法在 API 16 中已被弃用，但如果您希望更改振动设置而不是您自己的应用程序，我不知道有什么好的替代方法。

只需确保振铃器模式也已打开`AudioManager.RINGER_MODE_NORMAL`。

* * *

当然，您也可以将振铃模式设置为`AudioManager.RINGER_MODE_NORMAL`并调出设置页面供用户手动更改振动设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:12:26.613

查看此代码，

```
// Get instance of Vibrator from current Context
        Vibrator vb = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

        // Start immediately
        // Vibrate for 200 milliseconds
        // Sleep for 500 milliseconds
        long[] pattern = { 0, 200, -1 };

        // The "0" means to repeat the pattern starting at the beginning
        // CUIDADO: If you start at the wrong index (e.g., 1) then your
        // pattern
        // will be off --
        // You will vibrate for your pause times and pause for your vibrate
        // times !
        vb.vibrate(pattern, 0); 
```

停下来，打电话

```
vb.cancel(); 
```

注意：vb.cancel() 不应在 vb.vibrate(pattern, 0); 之后立即调用。

# java - Java中的Deci和Centi秒解析

> ID：14558663
> 
> 赞同：9
> 
> 时间：2013-01-28T09:08:10.273
> 
> 标签：java

我有时间戳作为字符串“2013-01-28 11:01:56.9”。这里提到了 56.9 秒。

.9 秒 = 900 毫秒

我们可以说它是 9 分秒或 90 厘秒

但是在java中...

```
String string = "2013-01-28 11:01:56.9";
String pattern = "yyyy-MM-dd hh:mm:ss.S";
SimpleDateFormat formatter = new SimpleDateFormat(pattern);
Date date = formatter.parse(string);
System.out.println(date.getTime()); 
```

输出为：1359388916009

这里 9 被解析为 009 毫秒，因为“S”（Capital-S）用于毫秒。

类似地，如果 0.95 秒作为“SS”模式提供并解析，它给出“095”毫秒而不是“950”毫秒。

*   为什么 java 不提供模式来解析/格式化十进制秒和厘秒以使事情变得更容易？
*   这样做的体面方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:21:27.820

1) 没有人知道为什么*Java 不提供模式来解析/格式化 deci-seconds 和 centi-seconds*。但我个人怀疑，尽管您的案例非常有趣，但它是一个非常特殊的格式化案例。

很难想象这种方便的格式化风格，它允许区分大小写，当`.`符号是整数和浮点部分之间的分隔符时，以及它只是日期部分之间的分隔符时。

2）关于体面的方式。在我看来，这个简单的预处理应该可以帮助你：

```
public static String preprocess(String date) {
    int pIndex = date.lastIndexOf(".") + 1;
    String millis = date.substring(pIndex);
    for (int i = millis.length(); i < 3; i++)
        millis += "0";
    return date.substring(0, pIndex) + millis;
} 
```

**UPD：**它可以写得更简单：

```
public static String preprocess(String date) {
    String millis = date.substring(date.lastIndexOf(".") + 1);
    for (int i = millis.length(); i < 3; i++)
        date += "0";
    return date;
} 
```

# perforce - perforce 中两个待处理的变更列表之间的差异如何？

> ID：14558664
> 
> 赞同：4
> 
> 时间：2013-01-28T09:08:27.403
> 
> 标签：perforce

我有几个类似的待处理变更列表，它们基于代码分支的顶部和 perforce 中的同一工作区。我需要区分它们并（最终）将它们合并到一个变更列表中。最快和最简单的方法是什么？我宁愿避免创建一个临时分支。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:38:41.687

服务器的最新版本支持将更改搁置到已打开文件的工作区中，并解决合并问题。

因此，假设您的服务器足够新，您只需：

1.  搁置更改
2.  从干净的工作空间开始
3.  将其中一项更改搁置到该工作区中
4.  将其他更改取消搁置到同一工作区
5.  解决导致的任何合并更改。
6.  在提交之前仔细检查您的差异，以确保您拥有所需的更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-16T13:59:37.233

您的问题的一般答案（合并不是目标）是 p4 命令不可能。

您必须将两个更改列表取消搁置到不同的工作区，然后在两个工作区目录上运行外部差异工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-05T16:26:19.703

尝试

> p4 diff2 //repo/path/to/file@=shelf1 //repo/path/to/file@=shelf2

比较所有文件：

> p4 diff2 //repo/path/...@=shelf1 //repo/path/...@=shelf2

其中 'shelf1' 和 'shelf2' 是您搁置的更改列表。

警告：您只能使用“p4 diff2”进行文本差异

# html - HTML 表单、数据集、数据结构解释

> ID：14558667
> 
> 赞同：1
> 
> 时间：2013-01-28T09:08:35.770
> 
> 标签：html, rest

我有一个动态生成的表单。包含隐藏字段的重复列表，代表我的应用程序中的选择。

表单通常看起来像这样：

```
<form>
    <fieldset>
        <input type="hidden" name="key1" value="value1"/>
        <input type="hidden" name="key1_option" value="option1"/>
    </fieldset>
    <fieldset>
        <input type="hidden" name="key2" value="value1"/>
        <input type="hidden" name="key2_option" value="option2"/>
    </fieldset>
</form> 
```

有没有更好的方法来做这样的事情？

我面临的主要困难是，当您提交表单并尝试解释后端的输入时，您会丢失字段集的逻辑分组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:13:23.923

HTML结构背后的逻辑当然会丢失，唯一传输的信息是form-tag里面的内容。但我想你已经知道了。

为什么不使用数组来命名变量？

```
<form>
    <fieldset>
        <input type="hidden" name="keyset[0][key]" value="value1"/>
        <input type="hidden" name="keyset[0][option]" value="option1"/>
    </fieldset>
    <fieldset>
        <input type="hidden" name="keyset[1][key]" value="value1"/>
        <input type="hidden" name="keyset[1][key]" value="option2"/>
    </fieldset>
</form> 
```

你有理由把你的物品分组吗？

# ios - RubyMotion 中的字符串加密

> ID：14558668
> 
> 赞同：3
> 
> 时间：2013-01-28T09:08:35.873
> 
> 标签：ios, encryption, aes, blowfish, rubymotion

我正在尝试在 RubyMotion 中加密字符串-理想情况下是 AES，但较弱/较旧的密码（例如 Blowfish）应该可以。

到目前为止，我未能编译几个 pod：RNCrypto 和 CommonCrypto。

建议？其他人尝试过这些豆荚吗？

谢谢你，阿德里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T01:42:52.363

如果您在编译 CocoaPods 时遇到问题，请确保您运行`rake clean`. 据我所知，CocoaPods 应该可以与 RubyMotion 一起正常工作。

编辑：由于 OP 没有发布他的解决方案作为答案，我会在这里发布：

> RNCryptor 不是为 iOS6 构建的，并且有 ARC 兼容性的吸引力，但尚未集成到 pod 中。
> 
> 至于 CommonCrypto，它有一个 example.m 文件展示其功能。这个 example.m 包含一个与 RubyMotion 创建的主函数发生冲突的主函数。通过删除它，我设法使其编译成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T21:12:43.047

如果您当前想要使用 CommonCrypto pod，以下是必要的过程：

*   确保将 pod 包含在 Rakefile 中或执行等效的 Bundler 仪式
*   不要忘记在 Rakefile 中包含app.frameworks *<< 'Security'*
*   然后转到 vendor/Pods/CommonCrypto 并删除文件 example.m

恭喜你，一切准备就绪！

这是一个快速（又脏）的示例：

```
iv = 'init_vector_here'
key = 'key_here'
plainText = 'This is plain text'

plainData = plainText.dataUsingEncoding(NSUTF8StringEncoding)
ivData = iv.dataUsingEncoding(NSUTF8StringEncoding)
keyData = key.dataUsingEncoding(NSUTF8StringEncoding)

status = NIL
result = plainData.dataEncryptedUsingAlgorithm(0, key: keyData, initializationVector: ivData, options: 0, error: status) # 0 = AES128
p result.base64EncodedString 
```

对于 Base64 编码，您必须包含“NSData+Base64”吊舱。

感谢@AwDogsGo2Heaven 和@Jamon Holmgren 的有用建议！

# angularjs - 从指令调用控制器方法而不在指令元素上定义它 - AngularJS

> ID：14558670
> 
> 赞同：1
> 
> 时间：2013-01-28T09:08:43.087
> 
> 标签：angularjs

我敢肯定，我刚刚错过了一个简单的答案。

[http://jsfiddle.net/jonathanwest/pDRxw/3/](http://jsfiddle.net/jonathanwest/pDRxw/3/)

本质上，我的指令将包含控件，这些控件将始终在指令本身外部的控制器中调用相同的方法。正如您从上面的小提琴中看到的那样，我可以通过使用`control`指令上的方法定义属性来完成这项工作，但由于该方法将始终从指令中的同一个按钮调用，我不想定义要调用的方法。`edit`相反，该指令应该知道在按下该按钮时调用控制器方法。因此， 的定义`control`将是：

`<control title="Custom Title" />`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T10:03:23.503

实际上，我认为`$parent`不建议直接使用这种方式来定义指令。因为实际上对于可以从父控制器调用的函数没有明显的依赖关系，这使得它们更难重用。

我不知道实际用例为什么需要这个，但我假设您使用`control`了多次并且您不想复制粘贴一堆定义一些常见行为的属性。

在这种情况下，我会推荐一点其他方法：添加一些将定义该行为的指令容器，并且控制将需要此指令作为依赖项：

```
myApp.directive('controlBehavior', function() {
    return {
        restrict: 'E',
        scope: {
            modifyfunc: '&'
        },        
        controller: function($scope, $timeout) {
            this.modifyfunc = $scope.modifyfunc;
        }
    };
});
myApp.directive('control', function() {
    return {
        restrict: 'E',
        require: '^controlBehavior',
        replace: true,
        scope: {
            title: "@"
        },
        template : '<div>{{title}}<button ng-click="edit()">Edit</button></div>',
        link: function(scope, element, attr, behavior) {            
            scope.edit = behavior.modifyfunc;   
        }            
    }
}); 
```

这是一个演示这种方法的小提琴：http: [//jsfiddle.net/7EvpZ/4/](http://jsfiddle.net/7EvpZ/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T09:17:14.937

您可以使用当前范围的属性访问父`$parent`范围。

[http://jsfiddle.net/XEt7D/](http://jsfiddle.net/XEt7D/)

# javascript - 相对位置

> ID：14558671
> 
> 赞同：0
> 
> 时间：2013-01-28T09:08:44.453
> 
> 标签：javascript, html, css, position, css-position

我有一个随着用户在其上添加图像而扩展的 div。在 div 下我有一个按钮。当 div 向下扩展时，我需要此按钮向下。按钮位置取决于 div 位置。

**我希望 divUpload 在用户将照片添加到面板时关闭：文件。**

## HTML：

```
<form id="form1" runat="server" enctype="multipart/form-data">
    <div id="divListFiles">
        <asp:FileUpload ID="files" name="files[]" accept='image/*' runat="server" multiple />
        <asp:Panel ID="list" name="list" runat="server" Height="107px">
        </asp:Panel>
    </div>
    <div id="divListDel">
        <output id="listdel" name="listdel"></output>
    </div>
    <div id="divCarregando">
        <img id="carregando" src="http://bps.saude.gov.br/visao/img/carregando.gif" alt="Carregando..">
    </div>
    <div id="divNumImages">
        <asp:TextBox ID="txbNumImages" runat="server"></asp:TextBox>
    </div>
    <div id="divUpload">
        <asp:Button ID="btnUpload" runat="server" Text="Upload" OnClientClick="ShowCarregando()" OnClick="btnUpload_Click" />
    </div> 
```

## CSS：

```
divListFiles {
    position:absolute;
    left:9px;
    top:99px;
    width:653px;
    height:105px;
    z-index:1;
}

#divListDel {
    position:absolute;
    left:81px;
    top:73px;
    width:627px;
    height:33px;
    z-index:1;
    text-align: left;
}

#divCarregando {
    position:absolute;
    left:7px;
    top:113px;
    width:423px;
    height:231px;
    z-index:-1;
    text-align: left;
}

#divNumImages {
    position:absolute;
    left:9px;
    top:100px;
    width:123px;
    height:27px;
    z-index:5;
    text-align: left;
}

#divUpload {
    position:relative;
    left:19px;
    top:241px;
    width:65px;
    height:27px;
    z-index:1;
    text-align: left;
}

#form1{
    height: 303px;
}

#carregando{
    visibility:hidden;
}

.thumb {
    height:65px;
    width:90px;
    border: 1px solid #000;
    margin: 10px 5px 0 0;
}

.thumbdel {
    height: 17px;
    width: 17px;
    margin: 60px 81px 0 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:09:51.600

您所描述的将是以下情况的正常行为：

```
<div><!-- ...the images here ... --></div>
<button>The Button</button> 
```

...因为默认情况下 a`div`尽可能宽，尽可能高，其后面的内容在下面呈现。

[实例](http://jsbin.com/ivihiq/1)| [来源](http://jsbin.com/ivihiq/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:14:14.603

**HTML**

```
<div class="wrap">
<div class="innner">nfdj</div>
<button>Click</button>
</div> 
```

**CSS**

```
.wrap{
    width:250px;
    background:green;
    height:auto;
}
div{
    width:100%;
    height:150px;
    background:grey
} 
```

**[演示](http://jsfiddle.net/M3aWc/2/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:17:11.957

每当我想知道 CSS 时，我都会去拜访 Peter-Paul Koch -

[http://www.quirksmode.org/css/display.html](http://www.quirksmode.org/css/display.html)

但是如果你不想发现那个站点，那么在大多数情况下我会使用*display: block;* 对于按钮，这将确保它低于它上面的那个。

如果我有一组水平排列的按钮，我会将它们全部包含在一个 div 中，即*display: block;* 并使每个按钮*显示：内联；*. 这样整个组就会被推到上面的 div 之下，但每个按钮都内联在 div 内。

我会让你弄清楚如何处理主 div 一侧或另一侧的一组垂直按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T04:39:04.420

问题是您的 CSS 中的这些行：

```
#divCarregando {
    position:absolute; 
```

[“绝对定位的盒子会脱离正常流程”](http://www.w3.org/TR/CSS2/visuren.html#choose-position)，这会在您的页面上创建（在我看来）绝对的 MAYHEM。

我的**#1**建议是使用流畅的 HTML 文档而不诉诸`absolute`定位。

如果您不能或不会这样做，您唯一的选择是重新计算图像容器的底部位置并将其应用于按钮容器的顶部。

使用 jQuery（只是为了方便举例，因为没有它当然可以）：

添加图像时：

```
var images = $( "#divCarregando" ),
    position = images.offset();

$( "#divUpload" ).css({
    "top": position.top + images.outerHeight( true )
}); 
```

对于它的价值，我**强烈**建议不要使用`absolute`.

# oracle - 制作 CLOB 备份列

> ID：14558684
> 
> 赞同：-1
> 
> 时间：2013-01-28T09:09:37.763
> 
> 标签：oracle, clob

我有 3 个 CLOB 列，我必须操纵它们并重新创建我试图制作备份列的数据，如下所示：

```
update
tbl_order_webform
set mail_bak = mail_html 
```

但是脚本之后的备份列是空的。

这甚至可能吗？或者这是为他们创造背部的任何其他方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:34:09.103

您必须提交更改才能在另一个会话中看到它们。

# javascript-events - 如何在 jQuery 中正确分离事件处理程序

> ID：14558686
> 
> 赞同：5
> 
> 时间：2013-01-28T09:09:38.160
> 
> 标签：javascript-events, jquery

我有这个 jQuery 函数，它通过滚动支持垂直居中元素：

```
 $.fn.center = function () {
        var self = this;
        this.css("position", "absolute");
        this.css("top", ($(window).height() - this.height()) / 2 + $(window).scrollTop() + "px");            
        $(document).on("scroll", function () {
            self.center();
        });
        return this;
    }; 
```

它与 jQuery Block UI 插件一起使用：

```
 $('#cph')
        .block(finalOptions)
        .find('.blockUI.blockMsg')
        .center(); 
```

每次需要阻止 UI 时，我都会执行第二个代码段。但是当我取消阻止 UI 时，我只是简单地使用 Block UI API 将其删除，但我对滚动事件处理程序不做任何事情。如果我多次阻止/取消阻止 UI，我将注册许多事件处理程序来滚动事件 - 我猜这很糟糕。但我不知道如何正确解决这个问题。你能建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T09:13:53.557

使用 jquery[关闭](http://api.jquery.com/off/)

```
// assume you have a method for reuse purpose
function YourFunction(){
    // do something
};

$(document).on("scroll", YourFunction);
$(document).off("scroll", YourFunction); 
```

请注意，除非您想分离所有事件处理程序，否则匿名函数在这种情况下将不起作用：

```
$(document).off("scroll"); 
```

您还可以在“on”和“off”事件时指定“命名空间”：

```
// delegate events under the ".validator" namespace
$(document).on("click.validator", function(){
    // do something
});

// remove only event handlers in the ".validator" namespace
$("form").off(".validator"); 
```

# jquery - bassistance jQuery 表单验证插件 - 提交前的电子邮件错误

> ID：14558690
> 
> 赞同：0
> 
> 时间：2013-01-28T09:10:01.773
> 
> 标签：jquery, jquery-validate

我正在使用这个插件： [http ://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

用于 JQuery 表单验证。除了电子邮件字段外，一切都很好。一旦我开始在该字段中输入，“请输入有效的电子邮件地址”。即使我到目前为止输入的内容是正确的，也会出现消息。

在文档（[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)）中它说：

> “在一个字段被标记为无效之前，验证是懒惰的：在第一次提交表单之前，用户可以在字段之间切换而不会收到烦人的消息——在他有机会实际输入正确的信息之前，他不会被窃听价值”

但这似乎不会发生在电子邮件字段中。

这个问题也可以在作者的demo中看到：http: [//jquery.bassistance.de/validate/demo/](http://jquery.bassistance.de/validate/demo/)

这种行为是否有选项/解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:55:06.423

此行为已[在 github 上的最新 jquery-validate.js](https://github.com/jzaefferer/jquery-validation/archive/master.zip)中修复。该错误被报告为

> '当文本在字段中时，电子邮件验证立即触发'

[错误报告和讨论在这里](https://github.com/jzaefferer/jquery-validation/issues/521)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:13:28.767

> *“在一个字段被标记为无效之前，验证是懒惰的：在第一次提交表单之前，用户可以在字段之间切换而不会收到烦人的消息——在他有机会实际输入正确的信息之前，他不会被窃听价值”*
> 
> 但这似乎不会发生在电子邮件字段中。

这不仅仅是`email`规则。`minlength`您可以在规则上看到相同的行为。

[http://jsfiddle.net/f3sxF/](http://jsfiddle.net/f3sxF/)

> 这种行为是否有选项/解决方法？

您可以使用似乎可以解决此问题的预发布版本。但是，与其在您的生产站点上使用插件的“预发布”版本来冒新错误的风险，您可以简单地使用`onkeyup`回调函数的修改版本......

```
$('#myform').validate({
    onkeyup: function (element, event) {
        if (event.which === 9 && this.elementValue(element) === '') {
            return;
        } else if (element.name in this.submitted ) {
            this.element(element);
        }
    },
    // your other options
}); 
```

使用上述方法，所有`onkeyup`验证都会被忽略，直到第一次提交表单，或者直到用户跳出包含输入数据的字段。

演示：http: [//jsfiddle.net/wNj4n/](http://jsfiddle.net/wNj4n/)

# cuda - 平行还原技术

> ID：14558691
> 
> 赞同：0
> 
> 时间：2013-01-28T09:10:05.957
> 
> 标签：cuda, parallel-processing

我有这段 C++ 代码，我想将它移植到 CUDA。

```
for (int im = 0; im < numImages; im++)
{
    for (p = 0; p < xsize*ysize; p++) 
    {
        bool ok = false;

        for (f = 0; f < numFeatures; f++)
        {
            if (feature[im][f][p] != 0) 
            {
                ok = true;
                break;
            }
        }
        if (ok)
        {         
            minDist = 1e9;
            for (i = 0; i < numBins; i++) 
            {
                dist = 0;
                for (f = 0; f < numFeatures; f++)
                {
                    dist += (float)((feature[im][f][p]-clusterPoint[f][i])*(feature[im][f][p]-clusterPoint[f][i]));
                }

                if (dist < minDist) 
                {
                    minDist = dist;
                    tmp = i;          
                }
            }//end for i  

            for (f = 0; f < numFeatures; f++) 
                csum[f][tmp] += feature[im][f][p];

            ccount[tmp]++;

            averageDist[tmp] += sqrt(minDist);

        } // end if (ok)
    }  //end for p    
}// end for im 
```

我想计算`csum`,`ccount`并`averageDist`在 GPU 中。`csum`并且`averagedist`是浮点数，`ccount`是整数。

这是一个并行减少问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:52:16.793

`numBins`我没有完全理解你的代码应该做什么，我也不知道和的近似值是什么`numFeatures`。尽管如此，我会并行这个循环：`for (p = 0; p < xsize*ysize; p++)`，以便每个线程计算它的值并将它们存储在全局数组中。拥有可以计算的这些*特征*和*距离*数组`csum`，`ccount`并`averageDist`使用标准的并行缩减。

*可以通过重复启动内核来计算图像* 的主循环，`for (int im = 0; im < numImages; im++)`也可以通过像素循环使其一次并行。

在`if(ok)`不够频繁的情况下，会发生翘曲发散（请参阅[this](https://stackoverflow.com/questions/13532858/how-can-warps-in-the-same-block-diverge)）。避免这种情况，您不能为每个像素分配一个线程，只能分配一个扭曲，并将剩余的计算分配给该扭曲内的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:27:14.560

是的，您可以使用 CUDA 进行求和。但是，元素的数量应该足够大，使得在 GPU 上求和所用的时间应该小于在 CPU 上求和所用的时间。[这可能会帮助你](http://www.cse.nd.edu/courses/cse40833/www/kogge_gpu/lectures/logsum.pdf)

# android - 从在线数据库Android获取数据？

> ID：14558692
> 
> 赞同：0
> 
> 时间：2013-01-28T09:10:09.387
> 
> 标签：android

我正在创建从数据库中获取数据的应用程序，在用户安装应用程序后，我将每周用新数据更新我的数据库，如何让我的数据库在每次添加新项目时自动更新并将其替换为现有项目，而无需需要更新整个应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:23:03.890

这是如何填充本地数据库的代码示例：

```
 public CreatePopulateDB(SQLiteDatabase database){
        database.execSQL("BEGIN TRANSACTION");  

        database.execSQL("DROP TABLE IF EXISTS xyz;");
        database.execSQL("CREATE TABLE xyz( field1 integer primary key autoincrement, field2 numeric not null, );");
        database.execSQL("INSERT INTO xyz VALUES(1,1);"); 
        database.execSQL("INSERT INTO xyz VALUES(2,2);"); 
...
        database.execSQL("COMMIT;");
    } 
```

如上面评论中所述，您将使用来自 php API 的数据填充本地数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:36:58.057

这是您可以从 Web 服务中检索数据的方法

```
public class GetXMLTask
{
        public static final String URL = "http://localhost:8080/appName/actionOrServletTobeCalled";
    public static void main(String args[])
    {
        GetXMLTask obj = new GetXMLTask();
        String username = "username";
        String password = "password";
        obj.getOutputFromUrl(URL+"?"+username+"&password="+password);

    }
    public String getOutputFromUrl(String url) 
    {
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse response;
        StringBuilder builder= new StringBuilder();
        BufferedReader in = new BufferedReader(new                            InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        char[] buf = new char[8000];
        int l = 0;
            while (l >= 0) 
            {
                builder.append(buf, 0, l);
                l = in.read(buf);
            }
        return builder.toString();
    }   
} 
```

如果您在创建 Web 服务方面需要任何帮助，请告诉我

# sql - 如何转置表并导入 SQL Server 表

> ID：14558694
> 
> 赞同：0
> 
> 时间：2013-01-28T09:10:15.567
> 
> 标签：sql, sql-server

我有下表用于自行车测量，我在 csv 文件中拥有并希望转置并导入到我的 SQL Server 数据库中的表中。

```
Size             XS S   M   L   XL
Frame Reach 365mm   385mm   405mm   425mm   445mm
Frame Stack 495mm   515mm   540mm   565mm   590mm
Stem Length 90mm    90mm    90mm    90mm    90mm
Seat Tube Length    505mm   525mm   551mm   577mm   603mm
Top Tube Length 481mm   504mm   530mm   557mm   582mm
B-B Drop             72mm   72mm    72mm    72mm    72mm
Chain-Stay Length   395mm   395mm   395mm   395mm   395mm
Seat-Tube Angle 77° 77° 77° 77° 77°
Head-Tube Angle 70.25°  71.5°   72° 72.5°   72.5°
Fork Rake            50mm   50mm    45mm    45mm    45mm
Trail            69mm   61mm    63mm    60mm    60mm
Front-Center    573mm   589mm   608mm   631mm   659mm
Wheelbase            957mm  973mm   992mm   1016mm  1043mm
Stand-Over Height   752mm   772mm   797mm   822mm   847mm
Head-Tube Length    99mm    115mm   139mm   163mm   189mm
Seat Post Setback   12.5mm  12.5mm  12.5mm  12.5mm  12.5mm
Seat-Post Length    350mm   350mm   350mm   350mm   350mm
Crank Length    167.5mm 170mm   172.5mm 172.5mm 175mm 
```

所以对于上表，我希望它看起来像这样：

```
Size    Frame Reach Frame Stack Stem Length -18° Horizonta  Seat Tube Length    Top Tube Length B-B Drop    Chain-Stay Length   Seat-Tube Angle Head-Tube Angle Fork Rake   Trail   Front-Center    Wheelbase   Stand-Over Height   Head-Tube Length    Seat Post Setback   Seat-Post Length    Crank Length
XS  365mm   495mm   90mm    505mm   481mm   72mm    395mm   77° 70.25°  50mm    69mm    573mm   957mm   752mm   99mm    12.5mm  350mm   167.5mm
S   385mm   515mm   90mm    525mm   504mm   72mm    395mm   77° 71.5°   50mm    61mm    589mm   973mm   772mm   115mm   12.5mm  350mm   170mm
M   405mm   540mm   90mm    551mm   530mm   72mm    395mm   77° 72° 45mm    63mm    608mm   992mm   797mm   139mm   12.5mm  350mm   172.5mm
L   425mm   565mm   90mm    577mm   557mm   72mm    395mm   77° 72.5°   45mm    60mm    631mm   1016mm  822mm   163mm   12.5mm  350mm   172.5mm
XL  445mm   590mm   90mm    603mm   582mm   72mm    395mm   77° 72.5°   45mm    60mm    659mm   1043mm  847mm   189mm   12.5mm  350mm   175mm
XL 
```

我在这个论坛中找到了 pivot / unpivot 功能，但我无法让它为我工作。请注意，我首先将 csv 导入到一个临时表中，并从数据中删除了“mm”和“°”。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:20:17.593

对于一次性解决方案，我建议在 Excel 中打开 csv 文件，然后在那里执行转置。

如果您真的想使用 T-SQL 执行此操作，则必须先 UNPIVOT 数据，然后将其 PIVOT 回转置布局，但是，这仅适用于您在数据列上使用相同的数据类型 ("浮动”，例如）。假设您的临时表名为“Temp”，并具有以下列：“Dimension”、“XS”、“S”、“M”、“L”和“XL”：

反透视：

```
SELECT Dimension, Size, Value
FROM Temp
UNPIVOT (Value FOR Size IN (XS, S, M, L, XL)) AS unpvt; 
```

将此输出放入一个新的临时表 (temp2)，然后像这样使用 PIVOT：

```
SELECT Size, FrameReach, FrameStack, StemLength, SeatTubeLength, [...]
FROM Temp2
PIVOT (
    MAX(Value) FOR Dimension IN ('Frame Reach', 'Frame Stack', 'Stem Length', 'Seat Tube Length', [...])
    ) AS Pvt 
```

# android - Card filp Animation to button 在某些设备上不起作用

> ID：14558696
> 
> 赞同：1
> 
> 时间：2013-01-28T09:10:23.833
> 
> 标签：android, animation, flip

我在 xml 中定义了一个按钮，我正在向它添加动画（Card Flip 3D），它在 google nexus one 中工作正常，但在 Kindle 上无法正常工作。

你可以在这里看到一个演示[演示卡翻转动画](http://www.snorkl.tv/2010/12/easy-breezy-3d-card-flip-effect-with-flash-as3-and-our-good-buddy-timelinemax/)这是我试图在 ANDROID 中实现的。

这是我的代码：

```
public class CardFlipAnimation extends Animation {
    private Camera camera;

    private View fromView;

    private View toView;

    private float centerX;

    private float centerY;

    private boolean forward = true;

    private boolean visibilitySwapped;

    /**
     * Creates a 3D flip animation between two views. If forward is true, its
     * assumed that view1 is "visible" and view2 is "gone" before the animation
     * starts. At the end of the animation, view1 will be "gone" and view2 will
     * be "visible". If forward is false, the reverse is assumed.
     * 
     * @param fromView First view in the transition.
     * @param toView Second view in the transition.
     * @param centerX The center of the views in the x-axis.
     * @param centerY The center of the views in the y-axis.
     * @param forward The direction of the animation.
     */
    public CardFlipAnimation(View fromView, View toView, int centerX, int centerY) {
        this.fromView = fromView;
        this.toView = toView;
        this.centerX = centerX;
        this.centerY = centerY;

        setDuration(500);
        setFillAfter(true);
        setInterpolator(new AccelerateDecelerateInterpolator());
    }

    public void reverse() {
        forward = false;
        View temp = toView;
        toView = fromView;
        fromView = temp;
    }

    @Override
    public void initialize(int width, int height, int parentWidth, int parentHeight) {
        super.initialize(width, height, parentWidth, parentHeight);
        camera = new Camera();
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        // Angle around the y-axis of the rotation at the given time. It is
        // calculated both in radians and in the equivalent degrees.
        final double radians = Math.PI * interpolatedTime;
        float degrees = (float) (180.0 * radians / Math.PI);

        // Once we reach the midpoint in the animation, we need to hide the
        // source view and show the destination view. We also need to change
        // the angle by 180 degrees so that the destination does not come in
        // flipped around. This is the main problem with SDK sample, it does not
        // do this.
        if (interpolatedTime >= 0.5f) {
            degrees -= 180.f;

            if (!visibilitySwapped) {
                fromView.setVisibility(View.GONE);
                toView.setVisibility(View.VISIBLE);

                visibilitySwapped = true;
            }
        }

        if (forward)
            degrees = -degrees;

        final Matrix matrix = t.getMatrix();

        camera.save();
        camera.translate(0.0f, 0.0f, (float) (150.0 * Math.sin(radians)));
        camera.rotateY(degrees);
        camera.getMatrix(matrix);
        camera.restore();

        matrix.preTranslate(-centerX, -centerY);
        matrix.postTranslate(centerX, centerY);
    }
} 
```

在我的活动中，我这样做：

```
CardFlipAnimation animator = new CardFlipAnimation(button, button,
                    button.getWidth() / 2, Button.getHeight() / 2);
            if (button.getVisibility() == View.GONE) {
                animator.reverse();
            }
            layout.startAnimation(animator); // Relative layout with the button 
```

代码有什么问题，它在某些设备中运行良好，在某些设备中无法运行。它给了我 3d 效果吗？

**编辑**

这个链接解决了我的问题 [http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)

**感谢罗宾汉**

# ios - 部署自定义 iPhone 应用程序的方法？美国以外

> ID：14558698
> 
> 赞同：1
> 
> 时间：2013-01-28T09:10:27.893
> 
> 标签：ios, iphone, deployment

我们在危地马拉经营一家小型软件公司，我们在决定/调查如何部署我们受雇开发的应用程序时遇到了麻烦。

目前的选择是，注册​​企业计划，但这是否意味着我们作为第三方不能这样做？我们如何为我们的客户获取 DUN？（我们会跳过应用商店验证）

注册传统的开发者计划并通过 B2B 门户销售我们的应用程序，但危地马拉并未列为我们的客户可以注册的国家（并且作为自定义应用程序，我们不知道审批流程是否会批准我们的应用程序）

欢迎大家分享之前的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:25:50.977

您可以按照以下步骤进行：

1) 在 Apple 上创建开发者帐户。（您可以要求客户创建它）。

2) 请求客户端提供设备 UDID 编号，他们将在其上测试您的应用程序。（一旦设备连接，您可以通过转到 iTunes 来实现此目的）。

3) 创建 AppID，添加了客户端 UDID 的临时配置文件。

4) 创建 AdHoc 捆绑包并发送给客户端以测试应用程序。

5）只需检查您的客户可以从应用商店下载应用的应用商店。只需在 AppStore 上上传应用程序并仅检查该国家/地区即可。

注意：要在 App Store 上部署应用程序，您需要开发者帐户。您不能使用 Enterprice 帐户在 App Store 上部署应用程序。

希望，您对整个过程有所了解。

如果有任何困难，请告诉我。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:30:07.787

如上文评论中所述。您需要拥有开发人员帐户，才能创建附加了设备 UDID 的配置文件。

在您的情况下，您可以要求您的客户为您创建开发者帐户或企业帐户，或者要求他的客户创建开发者帐户或企业帐户。

您还可以使用[TestFlight](https://testflightapp.com/)，它是共享 iOS 企业应用程序的绝佳工具。

希望这些信息对您有所帮助。

# delphi - Delphi 7 和 Delphi XE 及更高版本之间接口的不同行为

> ID：14558704
> 
> 赞同：2
> 
> 时间：2013-01-28T09:11:03.907
> 
> 标签：delphi, interface, delphi-7, delphi-xe

我在不同版本的 Delphi 中使用界面时遇到了一个奇怪的问题。以下最小化代码在 Delphi XE 及更高版本中按预期编译和运行，但在 Delphi 7 中没有。具体而言，在 Delphi 7 中编译时，`function TForm1.Load: IMoleculeSubject;`似乎没有返回正确的结果，即对新创建实例的正确引用。你能帮忙评论一下原因和可能的解决方法吗？非常感谢！

### uInterface.pas

```
 unit uInterface;

    interface

    type

      IMoleculeSubject = interface
      ['{BEB4425A-186C-45DF-9DCE-C7175DB0CA90}']
      end;

      TMoleculeSubject = class(TInterfacedObject, IMoleculeSubject)
      end;

    implementation

    end. 
```

### uBusiness.pas

```
 unit uBusiness;

    interface

    uses
      uInterface;

    type

      TMoleculeDecorator = class(TMoleculeSubject) 
      private
        FID: Integer;
      public           
        property ID: Integer read FID;
        constructor Create;
      end;

    implementation

    { TMoleculeDecorator }

    constructor TMoleculeDecorator.Create;
    begin
      inherited Create;

      FID := Random(100);
    end;

    end. 
```

### 单元1.pas

```
 unit Unit1;

    interface

    uses
      uInterface, uBusiness,

      Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, 
      Forms, Dialogs;

    type
      TForm1 = class(TForm)
        procedure FormCreate(Sender: TObject);
      private
        function Load: IMoleculeSubject;
      public
      end;

    var
      Form1: TForm1;

    implementation

    {$R *.dfm}

    procedure TForm1.FormCreate(Sender: TObject);
    var
      MolSubject: IMoleculeSubject;
    begin
      MolSubject := Load;

              // The down-cast is to show the returned result is wrong in Delphi 7!
      Caption := IntToStr(TMoleculeDecorator(MolSubject).ID);
    end;

    function TForm1.Load: IMoleculeSubject;   
    var
      MolSubject: IMoleculeSubject;
    begin
      MolSubject := TMoleculeDecorator.Create;
      Result := MolSubject;
    end;

    end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T09:19:46.777

自 Delphi 2010 起就可以将接口转换为对象。旧版本的 Delphi 的解决方法在哪里，请参见示例[How to cast a Interface to a Object in Delphi](https://stackoverflow.com/questions/4138211/how-to-cast-a-interface-to-a-object-in-delphi)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T09:20:55.903

该`Load`功能在所有版本的 Delphi 中都运行良好。问题在于您的演员表，这就是所谓的*不安全类型转换*。从接口引用到对象的不安全类型转换在旧版本的 Delphi 中具有不明确的行为。然而，这种行为在现代 Delphi 中是明确定义的。[文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/Interface_References#Interface_Typecasts)说得更多。

因此，基本问题是您对行为的期望与该语言的 Delphi 7 版本不兼容。

如果你得到接口返回ID，你会发现你创建的接口和预期的一样。

```
program InterfaceDemo;

{$APPTYPE CONSOLE}

uses
  Classes;

type
  IMyIntf = interface
    function GetID: Integer;
  end;

  TImplementingObject = class(TInterfacedObject, IMyIntf)
  private
    FID: Integer;
    function GetID: Integer;
  public
    constructor Create;
  end;

{ TImplementingObject }

constructor TImplementingObject.Create;
begin
  FID := Random(100);
  Writeln(FID);
end;

function TImplementingObject.GetID: Integer;
begin
  Result := FID;
end;

var
  MyIntf: IMyIntf;

begin
  Randomize;
  MyIntf := TImplementingObject.Create;
  Writeln(MyIntf.GetID);
  Readln;
end. 
```

从接口请求实现对象是相当不寻常的。这样做表明您的设计存在问题。如果你真的需要这样做，有几个选择：

*   在现代 Delphi 中，您可以将类型安全案例与`as`运算符一起使用。
*   在较旧的 Delphi 版本中，有一些技巧可以检索实现对象：[Casting a delphi interface to its implementation class without modifying the interface](https://stackoverflow.com/questions/6414496/casting-a-delphi-interface-to-its-implementation-class-without-modifying-the-int?lq=1)
*   您可以向返回实现对象的接口添加一个函数。

后一个选项在所有版本的 Delphi 中都有效，并且无需使用诡计。

# ios - Apple 的 LoadPresetDemo 不起作用

> ID：14558708
> 
> 赞同：0
> 
> 时间：2013-01-28T09:11:07.627
> 
> 标签：ios, xcode, midi

当我运行苹果的`LoadPresetDemo`示例时，它应该播放来自按钮单击产生的 MIDI 信号的声音，示例代码停止工作，我不知道该怎么做。

我得到的唯一线索就是这个输出。

```
2013-01-28 03:41:52.842 Load Presets[586:10703] Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Users/tj/Documents/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-01-28 03:41:52.848 Load Presets[586:10703] Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Users/tj/Documents/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-01-28 03:41:52.886 Load Presets[586:10703] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Users/tj/Documents/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-01-28 03:41:52.892 Load Presets[586:10703] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Users/tj/Documents/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-01-28 03:41:52.931 Load Presets[586:10703] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Users/tj/Documents/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-01-28 03:41:53.051 Load Presets[586:10703] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Users/tj/Documents/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-01-28 03:41:53.061 Load Presets[586:10703] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Users/tj/Documents/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-01-28 03:41:53.066 Load Presets[586:10703] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Users/tj/Documents/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2013-01-28 03:41:53.081 Load Presets[586:10703] *** Assertion failure in -[MainViewController configureAndStartAudioProcessingGraph:], /Users/tj/Developer/LoadPresetDemo/LoadPresetDemo/Classes/MainViewController.m:169
2013-01-28 03:41:53.113 Load Presets[586:10703] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'AudioUnitSetProperty (set Sampler unit output stream sample rate). Error code: -10865 'è’ˇˇ''
*** First throw call stack:
(0x1891022 0x133bcd6 0x1839a48 0xe352cb 0x3052 0x50a3 0x1fda 0x49c386 0x49d274 0x4ac183 0x4acc38 0x4a0634 0x2e4def5 0x1865195 0x17c9ff2 0x17c88da 0x17c7d84 0x17c7c9b 0x49cc65 0x49e626 0x1f0c 0x1e75)
terminate called throwing an exception(lldb) 
```

我知道我需要先阅读一本初学者的书，但有时也有机会。我必须做一些我不知道的事情。我需要做的就是正确构建并运行示例代码。

你能告诉我该怎么做吗？或者我可以检查任何其他日志窗口吗？像android一样有输出和日志。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:26:12.297

您可能需要包含安全框架。参考 Xcode 帮助应该很容易做到。

# java - 如何在java中检查目录的写权限？我们可以改变它吗？

> ID：14558709
> 
> 赞同：-1
> 
> 时间：2013-01-28T09:11:10.303
> 
> 标签：java, file-io

我正在使用下面的代码，但它不起作用。`canWrite()`即使更改目录的写入权限，该方法也不起作用。

```
File file = new File(fc.getSelectedFile().getAbsolutePath());
// fc is a FileChooser object
if(f.canWrite()) 
{
  // write access
} 
else 
{
  // no write access
} 
```

我也试过：

```
try 
{
    AccessController.checkPermission(new FilePermission("/tmp/*", "read,write"));
    System.out.println("Good");
    // Has permission
}
catch (SecurityException e) 
{
// Does not have permission
System.out.println("Bad");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:23:03.270

该`File.canWrite()`方法的行为与其规范所说的一样：

> 返回：`true`当且仅当文件系统实际包含由该抽象路径名表示**的文件**并且允许应用程序写入该文件时；`false`否则。

（强调补充）。

它正在返回`false`，因为该对象不是文件。

* * *

如果您使用的是 Java 7（或更高版本），一种解决方案是使用[`Files.getAttribute`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#getAttribute%28java.nio.file.Path,%20java.lang.String,%20java.nio.file.LinkOption...%29)检索相关属性来确定访问权限。请注意，您使用的属性可能是特定于操作系统的。（我相信 Google 可以为您找到示例。）

# java - 放置未设置的请求参数

> ID：14558713
> 
> 赞同：0
> 
> 时间：2013-01-28T09:11:24.703
> 
> 标签：java, http, parameters

这可能是标准的东西，但无法让它工作。我`org.apache.commons.httpclient.methods`用于从我的 Java 代码发出 Http 请求。在一种情况下，我必须发出 PUT 请求并传递一些参数。我正在按照以下方式进行操作：

```
PutMethod putMethod = new PutMethod(url);
putMethod.getParams().setParameter("param1", "param1Value");
putMethod.getParams().setParameter("param2", "param2Value");
httpClient.executeMethod(putMethod); 
```

但是在服务器上，当它尝试读取这些参数时 - 它只能获取`null`.

但是，当我修改我`url`的`url?param1=param1Value&param2=param2Value`工作时。

如何使用 setParameter 方法使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-21T14:42:11.347

要将查询参数添加到 PutMethod，请遵循此方法。

```
 NameValuePair[] putParameters = new NameValuePair[2];   
    putParameters[0] = new NameValuePair(Param1, value1);       
    putParameters[1] = new NameValuePair(Param2, value2);   

    HttpClient client = new HttpClient();
    PutMethod putMethod = new PutMethod(url);       

    putMethod.setQueryString(putParameters); 
```

然后打电话，

```
int response = client.executeMethod(putMethod); 
```

而不是`putMethod.setQueryString(putParameters);`你也可以使用

> putMethod.setRequestBody(EncodingUtil.formUrlEncode(putParameters, "UTF-8")); （已弃用）

**GetMethod、PostMethod 在添加 Query Params 时与上面的代码有细微的差别。**

更多代码示例： http: [//www.massapi.com/class/pu/PutMethod.html](http://www.massapi.com/class/pu/PutMethod.html)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T09:14:04.963

您的服务器端代码必须支持该`PUT`方法

例如，如果它是一个 Servlet，您可以包含该方法

```
doPUT(); // your put request will be delivered to this method 
```

如果您使用基于 REST 的框架，例如 jersey

您可以使用

```
@PUT 
   Response yourPutMethod(){..} 
```

# blackberry - 标签背景中心未设置标签标题

> ID：14558717
> 
> 赞同：0
> 
> 时间：2013-01-28T09:11:39.947
> 
> 标签：blackberry

我正在研究一种逻辑，我必须将标签标题垂直居中对齐，但它不起作用。

我试图设置文本填充，但带有背景的整个标签正在移动。有没有办法解决这个问题。

这是我的代码：

```
final Bitmap tabBackGroundImage1 = Bitmap.getBitmapResource("box_img.png");
homeContentManager.setBorder( BorderFactory.createBitmapBorder(
    new XYEdges(16,16,16,16), tabBackGroundImage));
//homeContentManager.setBorder(roundedBourder);

//HOME SCREEN HORIZONTAL MANAGER
buddiesLabel=new LabelField("Buddies");

_bitmap = EncodedImage.getEncodedImageResource("buddies.png");
final BitmapField buddiesBmp = new BitmapField(Constant.sizePic(_bitmap, 
                                      _bitmap.getHeight(), _bitmap.getWidth()));
buddiesBmp.setMargin(3,5,0,5);

if(BuddyListField.onlineBuddyCount < 1000) {
    buddyCount=new LabelField(" "+BuddyListField.onlineBuddyCount+" "){
        /*public void setText(String text,int offset,int length){
            text = String.valueOf(BuddyListField.onlineBuddyCount);
            offset = 200;
            length = 5;
            super.setText(text, offset, length);
        }*/
        public int getPreferredHeight() {
            return tabBackGroundImage1.getHeight();
        }
        public int getPreferredWidth() {
            return  tabBackGroundImage1.getWidth();
        }

        protected void layout(int width, int height) {
            super.layout(width, height);
            setExtent(Math.min(width, tabBackGroundImage1.getWidth()), Math.min(height, tabBackGroundImage1.getHeight()));
        }
        protected void paint(Graphics graphics) {
            int deviceWidth=net.rim.device.api.system.Display.getWidth();
            int deviceHeight=net.rim.device.api.system.Display.getHeight();

            graphics.clear();
            graphics.drawBitmap(0, 0, deviceWidth,
            deviceHeight, tabBackGroundImage1, 0, 0);
            super.paint(graphics);
        }
    }; 
```

这是输出：

![在此处输入图像描述](../Images/820766cb7a450ae5113e40588c361f75.png)

但是我需要将零设置为在背景中垂直居中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:41:09.490

像这样试试

```
protected void paint(Graphics graphics) {
            int deviceWidth=net.rim.device.api.system.Display.getWidth();
            int deviceHeight=net.rim.device.api.system.Display.getHeight();

            graphics.clear();
            graphics.drawBitmap(0, 0, deviceWidth,
            deviceHeight, tabBackGroundImage1, 0, 0);

            graphics.drawText((getPreferredWidth()-getText())/2,(getPreferredHeight()-graphics.getFont().getHeight())/2,getText);

//            super.paint(graphics);
        } 
```

# java - 如何分析java，eclipse，junit中哪个方法消耗的时间更多？

> ID：14558722
> 
> 赞同：11
> 
> 时间：2013-01-28T09:11:54.890
> 
> 标签：java, profiler

对于一些专业的 Java 程序员来说，这可能是一个愚蠢的问题，但我现在要疯了，所以我还在问。请指导我正确的方向有人。

如何分析哪个方法/partOfMethod 在我的 java 程序中消耗更多时间？

（我正在使用 Eclipse 和 Junit）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T09:19:02.660

使用 jvisualvm。它现在与 JDK 捆绑在一起，但也有一个独立版本，它是最新的。通常，当您启动它时，您可以选择要连接到哪个正在运行的 java 进程（这很可能是我们正在运行的单元测试）。您可以指定需要跟踪的合格类名过滤器。通常，会出现一些类检测，您将能够跟踪分配给每个方法的处理时间（以及累积时间）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T09:17:19.210

您需要获取[Java 分析器](http://java-source.net/open-source/profilers)。[其中一些在 Eclipse 中集成得很好](http://www.eclipse.org/articles/Article-TPTP-Profiling-Tool/tptpProfilingArticle.html)。

除此之外，您还可以使用自定义分析器类（如果您没有太多的分析工作要做并且您已经怀疑存在一些瓶颈）。

这是一个简单的类来做到这一点：

```
/**
 * Small helper class to profile the code, take timing, ...
 * 
 * To use this, simply call the start method with an identifier. When you want to measure the time, call the stop method
 * with the same identifier. To output statistics, simply call the toString method or the toCsv method to create a CSV
 * file with the profiler information.
 * 
 * @author Vincent Prat @ MarvinLabs
 */
public class Profiler {

    private static final int THEORETICAL_MAX_NAME_LENGTH = 50;

    private static Profiler singletonInstance = null;

    private Map<String, Profile> profiles; // Fast access to profiles by name
    private List<Profile> profilesStack; // Profiles as created chronologically

    /**
     * Get access to the singleton instance (create it if necessary)
     */
    public static Profiler getInstance() {
        if (singletonInstance == null) {
            singletonInstance = new Profiler();
        }
        return singletonInstance;
    }

    /**
     * Protected constructor for singleton
     */
    protected Profiler() {
        profiles = new HashMap<String, Profiler.Profile>();
        profilesStack = new ArrayList<Profile>();
    }

    /**
     * Start a profile. If the profile does not exist, it will be created. If it exists, a new round of measure is
     * taken.
     * 
     * @param name
     *            The name of the profile. If possible, less than Profiler.THEORETICAL_MAX_NAME_LENGTH characters
     * 
     * @see Profiler.THEORETICAL_MAX_NAME_LENGTH
     */
    public void start(String name) {
        Profile p = profiles.get(name);
        if (p == null) {
            p = new Profile(name);
            profiles.put(name, p);
            profilesStack.add(p);
        }
        p.start();
    }

    /**
     * Stop a profile and compute some statistics about it.
     * 
     * @param name
     *            The name of the profile as declared in the corresponding start method
     */
    public void stop(String name) {
        Profile p = profiles.get(name);
        if (p == null) {
            throw new RuntimeException("The profile " + name + " has not been created by a call to the start() method!");
        }
        p.stop();
    }

    /**
     * Clear all the current measures. Not to be called within any start/stop pair.
     */
    public void reset() {
        profiles.clear();
    }

    /**
     * Build a string containing all the information about the measures we have taken so far.
     */
    @Override
    public String toString() {
        final StringBuffer sb = new StringBuffer();
        for (Profile p : profilesStack) {
            sb.append(p.toString());
            sb.append("\n");
        }
        return sb.toString();
    }

    /**
     * Output the measures to an output string
     */
    public void toCsvFile(OutputStream os) throws IOException {
        Profile.writeCsvHeader(os);
        for (Profile p : profilesStack) {
            p.writeCsvLine(os);
        }
    }

    /**
     * Profile information. It stores statistics per named profile.
     * 
     * @author Vincent Prat @ MarvinLabs
     */
    private static class Profile {
        private static final String CSV_HEADERS = "Name, Call Count, Total Time (ms), Average Time (ms), Min Time (ms), Max Time (ms), Delta Time (ms), Delta Ratio (%)\n";

        private static final String FORMAT_STRING = "%-" + THEORETICAL_MAX_NAME_LENGTH + "."
                + THEORETICAL_MAX_NAME_LENGTH
                + "s: %3d calls, total %5d ms, avg %5d ms, min %5d ms, max %5d ms, delta %5d ms (%d%%)";

        private static final String CSV_FORMAT_STRING = "%s,%d,%d,%d,%d,%d,%d,%d\n";

        private String name;
        private long startTime;
        private long callCount;
        private long totalTime;
        private long minTime;
        private long maxTime;

        public Profile(String name) {
            this.name = name;
            this.callCount = 0;
            this.totalTime = 0;
            this.startTime = 0;
            this.minTime = Long.MAX_VALUE;
            this.maxTime = Long.MIN_VALUE;
        }

        public void start() {
            startTime = System.currentTimeMillis();
        }

        public void stop() {
            final long elapsed = (System.currentTimeMillis() - startTime);
            if (elapsed < minTime) minTime = elapsed;
            if (elapsed > maxTime) maxTime = elapsed;
            totalTime += elapsed;
            callCount++;
        }

        private String getFormattedStats(String format) {
            final long avgTime = callCount == 0 ? 0 : (long) totalTime / callCount;
            final long delta = maxTime - minTime;
            final double deltaRatio = avgTime == 0 ? 0 : 100.0 * ((double) 0.5 * delta / (double) avgTime);

            return String
                    .format(format, name, callCount, totalTime, avgTime, minTime, maxTime, delta, (int) deltaRatio);
        }

        @Override
        public String toString() {
            return getFormattedStats(FORMAT_STRING);
        }

        public static void writeCsvHeader(OutputStream os) throws IOException {
            os.write(CSV_HEADERS.getBytes());
        }

        public void writeCsvLine(OutputStream os) throws IOException {
            os.write(getFormattedStats(CSV_FORMAT_STRING).getBytes());
        }
    }
} 
```

和示例用法：

```
Profiler.getInstance().start("marker1");
// Do something...

Profiler.getInstance().start("marker2");

// Something else...

Profiler.getInstance().stop("marker2");

// And some more...

Profiler.getInstance().stop("marker1");

// Output the profiling result
System.out.println(Profiler.getInstance().toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:27:34.870

你可以看看[Yourkit](http://www.yourkit.com/)（商业软件），它可以监控内存、CPU等等。它有特殊的视图来显示方法中花费了多少时间（例如，您可以看到 40% 的执行时间花费在方法中`xyz()`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T10:01:43.247

称我为老式，但这是我认为最简单的方法：

```
long a, b, c, d;
a = System.currentTimeMillis();
// some code 1
b = System.currentTimeMillis();
// some code 2
c = System.currentTimeMillis();
// some code 3
d = System.currentTimeMillis();

System.out.println("Some code 1 took "+(b-a)+"mil to execute. ("+((b-a)/1000)+" seconds)");
System.out.println("Some code 2 took "+(c-b)+"mil to execute. ("+((c-b)/1000)+" seconds)");
System.out.println("Some code 3 took "+(d-c)+"mil to execute. ("+((d-c)/1000)+" seconds)"); 
```

希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-28T09:18:30.570

测量程序的哪一部分需要多少运行时间的过程称为“分析”。

eclipse 有很多分析插件。一个[在这里描述](http://www.eclipse.org/articles/Article-TPTP-Profiling-Tool/tptpProfilingArticle.html)。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-18T08:59:02.920

有一些像[IdeOne](http://www.ideone.com)这样的在线工具可以让你花时间执行代码块。试试看！

# apache - 如何删除以“？”开头的任何内容？在斜杠之后？

> ID：14558724
> 
> 赞同：0
> 
> 时间：2013-01-28T09:12:02.603
> 
> 标签：apache, mod-rewrite

我的 .htaccess 中有以下重写规则：

```
RewriteRule ^([A-Za-z0-9-]+)/?$ product.php?var1=$1
RewriteRule ^([A-Za-z0-9-]+)/?([A-Za-z0-9-_]+)?/?$ product.php?var1=$1&var2=$2
RewriteRule ^([A-Za-z0-9-]+)/?([A-Za-z0-9-_]+)?/?([A-Za-z0-9-_]+)?/?$ product?var1=$1&var2=$2&var3=$3 
```

这是我网站上使用的 url 示例::

```
/electronics/
/electronics/laptops/
/electronics/laptops/hp/ 
```

为避免重复内容，我试图消除使用这些网址的任何人：

```
/electronics/?
/electronics/?qweqwe=fff
/electronics/laptops/?
/electronics/laptops/?q34t5gt=12
/electronics/laptops/hp/?
/electronics/laptops/hp/?id=12&hdhdhdhhd=3333 
```

我如何进行 301 重定向（假设这是避免重复内容的最佳方法），以删除以“？”开头的任何内容 在斜杠之后？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:40:38.833

我做了很多搜索和测试。我想出了这个解决方案：

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /([^?#\ ]*)\?[^\ ]*\ HTTP/
RewriteRule ^(.*)$ %{REQUEST_URI}? [R=301] 
```

# ios - UIImagePickerController TakePicture 方法不保存到相机胶卷

> ID：14558727
> 
> 赞同：0
> 
> 时间：2013-01-28T09:12:06.280
> 
> 标签：ios, xcode, uiimagepickercontroller

感谢您的阅读，我正在制作一个相机计时器应用程序，当计时器达到 0 时，意味着要拍摄一张照片。然而，事实并非如此。：C。

这里是为我的新控件显示 PickerController 和 Overlay 的代码。（ViewDidLoad 方法加载它还为时过早。）

```
-(void)viewDidAppear:(BOOL)animated{
    overlayView.hidden = false;
imagePicker = [[UIImagePickerController  alloc] init];
imagePicker.delegate = self;
[imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
[self presentViewController:imagePicker animated:YES completion:NULL];
imagePicker.showsCameraControls = NO;
imagePicker.cameraOverlayView = overlayView; 
```

}

这里是计时器达到 0 并且要拍照的代码。

```
//cameraTimeInt is the timer//
if(cameraTimeInt ==0){

//timerDisplay is the picture displaying the countdown to 0//
        [timerDisplay setImage:NULL];

        [imagePicker takePicture];

    } 
```

这是您单击“拍照”按钮时的代码。

```
-(IBAction)takePicture:(id)sender {

    cameraTimeInt = timeSlider.value;

    NSTimer *timerStart = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timerTickStart:) userInfo:nil repeats:YES];
    [[NSRunLoop currentRunLoop] addTimer:timerStart forMode:NSDefaultRunLoopMode];

} 
```

我知道代码有点草率，但如果有人有任何想法，将不胜感激:)

另外我得到的错误是：

CameraTimer[392:907] UIImagePickerController：忽略拍照请求；图像已被捕获或相机尚未准备好。

它似乎正在尝试拍摄两张图像，因为我听到了两次咔嗒声（相机拍摄照片噪音）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:23:52.770

已编辑

```
 UIImageWriteToSavedPhotosAlbum(_imgView.image, nil, nil, nil); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:27:48.587

在你的情况下，`NSTimer`拍照的时间很早。因此，将其更改为**7 秒** ，因为它可能在所有组件初始化过程中拍照。

```
-(IBAction)takePicture:(id)sender {

    cameraTimeInt = timeSlider.value;

    NSTimer *timerStart = [NSTimer scheduledTimerWithTimeInterval:7 target:self selector:@selector(timerTickStart:) userInfo:nil repeats:YES];
    [[NSRunLoop currentRunLoop] addTimer:timerStart forMode:NSDefaultRunLoopMode];

} 
```

# xml - 如何使用 xpath 在没有特定属性的两个标签之间选择标签

> ID：14558728
> 
> 赞同：0
> 
> 时间：2013-01-28T09:12:11.100
> 
> 标签：xml, xslt, xpath

我的 xml 看起来像这样：

```
<p>text</p>
<p>text</p>

<table>
<!--some tr and td's-->
</table>
<p><sup>a</sup> text</p>
<p><sup>b</sup> text</p>
<p><sup>c</sup> text</p>
<p></p>

<table>
<!--some tr and td's-->
</table>
<p><sup>a</sup> text</p>
<p><sup>b</sup> text</p>

<p>text</p> 
```

我需要选择 p 标签，它们是第一个表的后续兄弟和空 p 的前兄弟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:22:13.553

鉴于您的 XPath 解释器支持 XPath 2.0，有一个很好的解决方案`intersects`：

```
//table/following-sibling::p
    intersect
//p[data()='']/preceding-sibling::p 
```

第一行获取表格之后的所有段落，第三行获取空段落之前的所有段落。交集是期望的结果。

# php - 如何设置 ini_get 使用正确的 ini 文件？

> ID：14558731
> 
> 赞同：-2
> 
> 时间：2013-01-28T09:12:36.683
> 
> 标签：php, php-ini

我们的 linux ubuntu 服务器中有很多 php.ini 文件。我想在我的 php 文件中使用 ini_get；那么如何告诉脚本使用正确的 php.ini 文件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:17:30.713

您可以通过`php.ini`查看`phpinfo()`.

看[这篇博](http://wiki.gandi.net/en/hosting/using-linux/tutorials/phpinfo)文的图片，有一行说`Loaded Configuration file`。这就是您正在寻找的价值。

从命令行，您可以使用：

```
php -i | grep 'Loaded Configuration File' 
```

从php内部，有[`php_ini_loaded_file`](http://php.net/php_ini_loaded_file)函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:20:07.853

请回显 phpinfo()

您可以在其中找到ini文件的路径。

# c# - 在 WebBrowser Windows Phone 中订阅回调函数 javascript

> ID：14558737
> 
> 赞同：0
> 
> 时间：2013-01-28T09:13:00.727
> 
> 标签：c#, javascript, windows-phone-7, webbrowser-control

我有带有回调的组件`WebBrowser`和`javascript`函数：`start()`

```
 function start() {
      my_object.subscribe("chanel_name", function(data) {
               alert(data);
        });
   } 
```

我可以调用我的函数：

> Browser.InvokeScript（“开始”）

但我如何订阅回调？

```
function(data) {
               alert(data);
        }); 
```

我想在 C# 代码中使用可变数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:22:26.497

您可以使用 window.external.notify 将消息从 WebBrowser 传递回您的应用程序，如[本博客文章](http://www.nickharris.net/2010/11/windows-phone-7-webbrowser-control-script-notify/)中所述。它仅适用于字符串，因此您必须进行一些 JSON 序列化才能返回数据。

# c++ - 为什么编译器不帮助我们处理类型特征而不是求助于语言怪癖？

> ID：14558739
> 
> 赞同：1
> 
> 时间：2013-01-28T09:13:09.773
> 
> 标签：c++, std, typetraits

类型特征很酷，自从几年前它们起源于 boost 以来，我就一直在使用它们。但是，当您查看它们的实现时（查看[“如何`is_base_of`工作？”](https://stackoverflow.com/questions/2910979/how-is-base-of-works) StackOverflow 线程）。

为什么编译器在这里没有帮助？例如，如果你想检查某个类是否是另一个类的基础，编译器已经知道了，为什么不能告诉我们呢？这将使概念之类的东西更容易实现和使用。你可以在那里使用语言结构。

我不确定，但我猜它会提高整体性能。这就像向编译器寻求帮助，而不是 C++ 语言。

我怀疑主要原因听起来像是“我们需要保持向后兼容性”，我同意，但是为什么编译器不会更积极地生成通用模板代码呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T10:09:49.200

实际上......[有些人这样做](http://lists.cs.uiuc.edu/pipermail/cfe-commits/Week-of-Mon-20101129/036967.html)。

问题是，如果可以在纯 C++ 代码中实现某些东西，那么除了简化代码之外，没有理由将它们硬连接到编译器中。那么这是一个权衡的问题，代码简化带来的价值是否值得硬接线？

这取决于几点：

*   正确性（有时软件可能只能部分模拟该特征）
*   代码复杂~~维护负担
*   表现
*   ...

一旦对所有这些点进行了加权，您就可以确定将内容放入库还是编译器是否更有利；更有可能的情况是您最终会采用混合策略：编译器中的几个内在函数用作构建块，以在库中提供所需的接口。

请注意，编译器的维护负担要大得多：任何充分熟悉该语言的 C++ 开发人员都可以深入研究库实现，而编译器代码是一个黑盒。因此，调试和修补库比编译器容易得多，所以除非你有充分的理由，否则*不要将东西放入编译器。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:24:46.067

在这里很难给出客观的答案，但我怀疑以下几点。

1.  使用语言怪癖来找出这些东西的代码通常已经编写好了（Boost 等）。
2.  如果可以通过语言怪癖来完成，则无需更改编译器即可实现这一点（这可以节省大量编写、编译、调试和测试的时间）。

这基本上是一种“不修复没有损坏的东西”的心态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:42:28.460

类型特征的编译器帮助一直是设计目标。TR1 正式引入了类型特征，并包括一个描述在某些情况下可接受的不正确结果的部分，以便能够直接用 C++ 编写类型特征。当这些类型特征被添加到 C++11（一些名称更改不影响其实现）时，允许不正确的结果被删除，实际上**需要**编译器帮助来实现其中的一些。即使对于那些可以直接用 C++ 实现的程序，编译器编写者也更喜欢内在函数而不是复杂的模板，这样您就不必在计算机下放置一个滴盘来接渣，因为过度工作的编译器会导致计算机崩溃。

# sql-server-2008 - 数据库表占用多少磁盘空间？

> ID：14558742
> 
> 赞同：3
> 
> 时间：2013-01-28T09:13:35.500
> 
> 标签：sql-server-2008

在 SQL SERVER 中，我需要知道特定 db 表消耗了多少磁盘空间。有没有办法找出来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:04:38.123

您可以使用此查询：

EXEC sp_spaceused 表名

# javascript - 在 Javascript 中保护 JSON？

> ID：14558747
> 
> 赞同：0
> 
> 时间：2013-01-28T09:14:00.127
> 
> 标签：javascript, ajax, json, http-headers, encode

我使用 jQuery Ajax 与`php`脚本对话，然后它返回`JSON`. 然后，将返回的`JSON`Array Object 分配给 Javascript 变量`var myJSON = ajaxReturn;`

通常，返回的`JSON`值在页面源或 Javascript 文件中不可见，因为它仅在运行时呈现。

但是当我打开类似的工具`Firebug`并在控制台中调用该变量时，例如：`alert(myJSON);`结果正在弹出。我不希望它是，因为这是一些秘密数据。

*   防止/保护`JSON`Javascript 端的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:15:53.667

发送到客户端的所有内容都是公开的，这是前端开发的本质，您无法更改。如果他决定偷看，就不可能向用户隐藏东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:16:48.673

如果您的应用程序的目的是存储`JSON`供客户使用的信息，那么您无法保护它不被访问。但是，您可以在收到后进行所有修改`JSON`，然后丢弃它（而不是存储它）。请记住，请求仍然可以被拦截，只需使用浏览器开发人员工具的网络选项卡即可读取响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T09:17:58.063

您如何处理 JSON 数据？很可能，您正在提供 UI 控件或对 Web 服务的后续调用。因此，如果您要保护（即加密）JSON，您仍然需要客户端解密，因此您的 JSON 仍然容易受到攻击——您也可以这样做`alert(decryptedJSON)`。

如果您必须能够解密浏览器中的数据，那么没有真正安全的方法来保护 JSON。

当然，您可以通过使用 HTTPS 或通过在服务器端显式加密数据，然后使用客户端 JavaScript 对其进行解密来加密通过网络传输的数据来保护数据。但这并不能防止它在浏览器中被查看。

如果适合您的情况，更好的选择可能是仅在服务器上加密和解密。因此，您可以从特定的 Web 服务调用中获取加密的 JSON 数据，然后将该数据提供给您的下一个 Web 服务调用，并在服务器上对其进行解密。这样一来，您的客户端 JavaScript 就不需要解密，从而使您的数据更安全。但如果目的是填充 UI，显然这不符合您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T09:23:36.480

您刚刚错过了游戏，一旦您从服务器发送数据，那么它就超出了您的限制。因为像 firefox 这样的浏览器可以做任何事情，所以关键是在客户端上呈现的所有内容都是**Public**。

即使有某种方法可以阻止 Firefox 在 firebug 中显示数据，任何人都可以轻松编写自己的网络客户端，伪装成网络浏览器，然后他们可以对数据做任何他们想做的事情。

如果您真的想隐藏**json-data**，请不要使用 ajax-json 发送它。使用不同的术语或服务器端编程。

# css - 设置标签的 CSS 规则以匹配另一个标签

> ID：14558751
> 
> 赞同：-1
> 
> 时间：2013-01-28T09:14:22.060
> 
> 标签：css

假设我们有这个规则：

```
.ruleA{
color: black;
} 
```

我们如何设置另一条规则

```
.ruleB{
color: get the color value of ruleA;
} 
```

不使用 jquery 是否可能，我的意思是直接使用 css 规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:16:57.750

不，你不能。如果“div”是嵌套的，您可以使用`color:inherit`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:18:44.053

纯 CSS 是不可能的。[研究Less](http://www.lesscss.org)或SASS[以](http://www.sass-lang.com)获得这种功能。

# postgresql - 如何从 plpgsql 函数中的动态查询返回可选结果？

> ID：14558752
> 
> 赞同：1
> 
> 时间：2013-01-28T09:14:24.060
> 
> 标签：postgresql, plpgsql

我正在玩弄 plpgsql 并组合了一个组装动态查询的函数。我已经对其进行了测试并执行了（我已经包含了一个测试包装器来输出组装的查询）。

我绊倒的地方是在 EXECUTE 命令运行后捕获它的输出，因为我想返回部分或全部值，具体取决于动态查询的性质。我已经设置了一个类型 userprofile，并让 setProfileDynamic 函数返回这个类型。

使用完整的参数补充，输出检查（第二个查询除外，稍后会详细介绍）。但是当某些参数丢失时（即不是所有的用户偏好都被更新，只有一个，例如：measuresystem），那么输出就会被破坏，因此 measuresystem_id 可能会在输出中显示为用户名。

其次，是如何将第二个查询（updateDefaultMealplan）的结果放入userprofile类型（其中mealplan_id和mealplan_name列正在耐心等待）。当前，此查询返回到 mp_id（如果存在 'defaultmealplan' 键，则 mp_name 从 _values 数组中填充）。

我对此很陌生，我可能试图在一个功能中做太多事情，而且我可能完全错误地做这件事，所以我不介意任何可能发生的更正。

用户配置文件类型：

```
DROP TYPE IF EXISTS userprofile CASCADE;
CREATE TYPE userprofile AS (
    username text,
    measuresystem_id int,
    blanksymbol_id int,
    mealplan_id int,
    mealplan_name text
); 
```

主要功能

```
DROP FUNCTION IF EXISTS setProfileDynamic (int, text, text[], text[]);
CREATE OR REPLACE FUNCTION setProfileDynamic (_userid int, _token text, _keys text[], _values text[])
RETURNS userprofile AS $$
DECLARE
    _query text;
    numkeys int;
    i int;

    _update text[];
    _from text[];
    _where text[];
    _return text[];
    _into text[];
    test text[];

    up userprofile;
    mp_name text;
    mp_id int;

    u text;
    f text;
    w text;
    r text;

    c_update int := 1;
    c_from int := 1;
    c_where int := 3;
    c_return int := 1;

    runupdate boolean := false; --bc passing default mealplan through this fn too.
    changedefaultmp boolean := false;
 BEGIN
    test[1] := 'users.id';
    test[2] := 'users.token';
    test[3] := _userid;
    test[4] := _token;
    numkeys := array_length(_keys, 1);
    raise notice 'numkeys = %', numkeys;
    _where[1] := test[1] || ' = ' || quote_literal(test[3]);
    _where[2] :=  test[2] || ' = ' || quote_literal(test[4]);
    --raise notice '_where[1] = %', _where[1];
    --raise notice '_where[2] = %', _where[2];
    for i in 1..numkeys loop
        raise notice 'keys[%] = %', i, _keys[i];
        CASE _keys[i]
            WHEN 'email' THEN 
                runupdate := true;
                _update[c_update] := quote_ident(_keys[i]) || ' = ' || quote_literal(_values[i]);
                c_update := c_update + 1;
            WHEN 'password' THEN
                runupdate := true;
                _update[c_update] := quote_ident(_keys[i]) || ' = ' || quote_literal(_values[i]);
                c_update := c_update + 1;
            WHEN 'username' THEN
                runupdate := true;
                _update[c_update] := quote_ident(_keys[i]) || ' = ' || quote_literal(_values[i]);
                c_update := c_update + 1;
                _return[c_return] := quote_ident(_keys[i]);
                c_return := c_return + 1;
            WHEN 'measuresystem' THEN
                runupdate := true;
                _update[c_update] := 'measuresystem_id = ms.id';
                c_update := c_update + 1;
                _from[c_from] := 'measuresystem as ms';
                c_from := c_from + 1;
                _where[c_where] := 'ms.name = ' || quote_literal(_values[i]);
                c_where := c_where + 1;
                _return[c_return] := 'ms.id';
                c_return := c_return + 1;
            WHEN 'blanksymbol' THEN
                runupdate := true;
                _update[c_update] := 'blanksymbol_id = bs.id';
                c_update := c_update + 1;
                _from[c_from] := 'blanksymbol as bs';
                c_from := c_from + 1;
                _where[c_where] := 'bs.name = ' || quote_literal(_values[i]);
                c_where := c_where + 1;
                _return[c_return] := 'bs.id';
                c_return := c_return + 1;
            ELSE
                changedefaultmp := true;
                mp_name := _values[i];
        END CASE;
    end loop;
    u := 'UPDATE users SET ' || array_to_string(_update, ', ');
    f := 'FROM ' || array_to_string(_from, ', '); --if a_t_s is null, the whole f is null and not included so no error
    w := 'WHERE ' || array_to_string(_where, ' AND ');
    r := 'RETURNING ' || array_to_string(_return, ', ');

    raise notice 'u = %', u;
    raise notice 'f = %', f;
    raise notice 'w = %', w;
    raise notice 'r = %', r;

    _query = concat_ws(' ', u, f, w, r);
    raise notice '_query = %', _query;
    IF runupdate THEN
        if r IS NULL THEN
            EXECUTE _query;
        ELSE
            EXECUTE _query INTO up;
        END IF;
    END IF;
    IF changedefaultmp THEN
        SELECT into mp_id updateDefaultMealplan(_userid, mp_name);
    END IF;
    return up;
END
$$ LANGUAGE PLPGSQL; 
```

这是包装函数，您可以在其中查看为不同输入生成的查询：

```
DROP FUNCTION IF EXISTS T ();
CREATE OR REPLACE FUNCTION T ()
RETURNS setof userprofile AS $$
declare
    _keys text[];
    _values text[];

    _userid int := 1;
    _token text := 'beet';
begin
    _keys := ARRAY['email', 'password', 'username', 'measuresystem', 'blanksymbol', 'defaultmealplan'];
    _values := ARRAY['s@p.com', 'secret', 'myname', 'metric', '?', 'new'];
    --_keys := ARRAY['email', 'blanksymbol'];
    --_values := ARRAY['k@d.com', '[]'];
    return query
        SELECT * from setProfileDynamic(_userid, _token, _keys, _values);
end
$$ LANGUAGE PLPGSQL; 
```

我意识到要通过很多代码，我希望 T 函数有助于澄清事情。“电子邮件”和“密码”参数未返回。'defaultmealplan' 触发第二个查询。'username'、'measuresystem'、'blanksymbol' 或 'defaultmealplan' 中的任何一个都应该在 userprofile 类型中返回一个值。感谢任何即将到来的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:06:44.290

基本问题是您的动态查询不会返回所有必要的列，第二个问题 - 您可能期望，但这不是有效的期望，因此记录分配有尊重字段的名称。但是，当您将某些值分配给某些复合类型时，postgres 不会检查名称 - 只有顺序很重要。因此，您必须使用 NULL 来填补空白并返回所有字段。

您可以使用数组连接来简化代码

```
声明 _return_cols text[] = '{}';

开始
  _return_cols := _return_cols || quote_ident('some_column');
  _return_cols := _return_cols || quote_ident('some_other_column');

  ...

```

# infopath-2007 - 信息路径中除星期日之外的日期选择器之间的区别

> ID：14558757
> 
> 赞同：0
> 
> 时间：2013-01-28T09:14:46.507
> 
> 标签：infopath-2007

如何获取信息路径中两个日期选择器控件之间的天数（星期日除外）？

如果可能，请告诉我。

提前致谢.........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:05:38.887

使用自定义代码，您可以轻松完成。在这种情况下，我正在计算给定日期和今天日期之间的天数（星期日除外）。

```
var navigator = this.MainDataSource.CreateNavigator();
string startDate = navigator.SelectSingleNode("/my:myFields/my:date_start", NamespaceManager).Value;
DateTime startDateTime = DateTime.ParseExact(startDate, "yyyy-MM-dd", null);

DateTime today = DateTime.Today;

int count = 0;

while (startDateTime > today)
{
    today = today.AddDays(1);

    if (today.DayOfWeek != DayOfWeek.Sunday)
    {
        count++;
    }
} 
```

我希望它有帮助

# ember.js - 通过操作防止 TextField 提交其表单

> ID：14558760
> 
> 赞同：4
> 
> 时间：2013-01-28T09:15:03.320
> 
> 标签：ember.js

我有一个`{{view Ember.TextField action="foo"}}`嵌套在`<form>`标签中：

```
My form:
<form>
  {{view Ember.TextField action="foo"}}
</form> 
```

我希望按下`enter`此文本字段将调用 action `foo`，而不会在其表单上触发`submit`事件（因为默认情况下`Ember.TextField#bubbles`设置为`false`）。但事实并非如此：页面被重新加载。

出于语义和集成目的，我想保留`<form>`标签，不要写`Ember.Form`视图。

[您可以在此 JSFiddle 中对其进行测试](http://jsfiddle.net/lcoq/Ap7AV/)。

我怎么能做到这一点？

PS：我正在使用 ember-latest：

*   版本：v1.0.0-pre.4-31-g16442c5
*   最后一次提交：16442c5 (2013-01-23 23:48:09 -0800)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-31T23:36:03.007

`<form {{ action "" on="submit" }}>`将阻止表单提交。（这基本上相当于`onsubmit="return false;"`另一个答案中的建议。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:00:31.160

我认为最简单的方法是添加 onsubmit="return false;" 在表单元素上。或者使用 jQuery ， preventDefault();

我敢肯定这不是**最好**的方法，但它有效！

# php - 是否可以使用具有当前类作为属性的“假父”类中的函数？

> ID：14558761
> 
> 赞同：0
> 
> 时间：2013-01-28T09:15:04.867
> 
> 标签：php, class, oop

下面的示例定义了一个 foo 类，它构造了一个 bar 类，并将其存储为一个 property `$foo->bar`。在 bar 类中，是否可以引用“false”父类并使用它的功能？

```
class bar
{
    public function test_false_parent()
    {
            //Is it possible to access foo->display() from here
        {unknown code}::display();
    }
}

class foo
{
    public $bar;

    public function __construct()
    {
        $this->bar = new bar;
    }

    public function display()
    {
        echo "in";
    }
}

$foo = new foo;

$foo->bar->test_false_parent();
//Equivalent to $foo->display(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T09:18:50.143

并非没有反向参考：

```
class bar
{
    protected $foo;

    public function __construct(foo $foo)
    {
        $this->foo = $foo;
    }

    public function test_false_parent()
    {
        $this->foo->display();
    }
}

class foo
{
    public $bar;

    public function __construct()
    {
        $this->bar = new bar($this);
    }

    public function display()
    {
        echo "in";
    }
}

$foo = new foo;

$foo->bar->test_false_parent(); 
```

# python - SQLAlchemy：动态加载对另一个模块的反向引用

> ID：14558765
> 
> 赞同：7
> 
> 时间：2013-01-28T09:15:27.993
> 
> 标签：python, sqlalchemy

假设我在一个模块中有一个用户模型。

```
class User(Model):
    id = Column(Integer, primary_key=True) 
```

然后我想从另一个模块的 Post 模型中添加一个动态加载的多对一关系到 User 。另外，我不想用来自其他模块的关系“污染”用户的模型定义。

除了像这样从 Post 模型外部向 User 类添加字段之外，还有更简洁的方法吗？

```
class Post(Model):
    user_id = Column(Integer, ForeignKey('user.id'))

User.posts = relationship('Post', backref='user', lazy='dynamic') 
```

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T10:26:58.387

好吧，你可以在 Post 模型中定义它（见下文）

```
class Post(Model):
    user_id = Column(Integer, ForeignKey('user.id'))
    user = relationship('User', backref=backref('posts', lazy='dynamic')) 
```

# sql - T-SQL 检查存储过程中包含 IF NOT EXISTS 的列

> ID：14558769
> 
> 赞同：2
> 
> 时间：2013-01-28T09:15:39.460
> 
> 标签：sql, tsql, stored-procedures, sql-server-2008-r2

`IF NOT EXISTS`我的陈述有问题。我在使用存储过程的过程中使用了以下代码：

```
IF NOT EXISTS(SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS
                         WHERE TABLE_NAME = 'tableName'
                         AND COLUMN_NAME = @fieldName
                         AND TABLE_SCHEMA = 'dbo')   
BEGIN  
       DECLARE @paramDefinitions NVARCHAR(1000)

    SET @paramDefinitions=
     '@dataType nvarchar(100) OUTPUT'
        SET @typeQuery = 'SELECT @dataType =
                  CASE 
                  WHEN s.name = ''nvarchar'' THEN ''nvarchar('' + CAST(c.max_length AS varchar(4)) + '')'' 
                      WHEN s.name = ''varchar'' THEN ''varchar('' + CAST(c.max_length AS varchar(4)) + '')''
                      WHEN s.name = ''char'' THEN ''char('' + CAST(c.max_length AS varchar(4)) + '')''
              WHEN s.name = ''nchar'' THEN ''nchar('' + CAST(c.max_length AS varchar(4)) + '')''
             ELSE s.name 
              END                 
            FROM sys.views t JOIN sys.columns c ON t.object_id = c.object_id 
                              JOIN sys.types s ON c.user_type_id = s.user_type_id 
            WHERE t.name = ''tablename'' AND c.name =' + @tmpField

            EXEC sp_executesql @typeQuery, @paramDefinitions, @dataType OUTPUT

            SET @updateTable = 'Alter table dbo.tablename add ' + @field +' '+ @dataType 
            print @updateTable

        EXEC sp_executesql @updateTable  
END 
```

如果我现在启动 SP，它会尝试重新创建已经存在的列，但它也会创建任何新列。如果我改变它，`IF EXISTS`它不会做任何事情。

如果我自己运行 select 语句，如果列存在，则结果为 1，如果不存在，则结果为 1。我的错误在哪里？不能`IF NOT EXISTS`用于此目的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:06:31.457

如果我想检查一个表是否包含某些列，我使用**COLUMNPROPERTY**：

```
IF COLUMNPROPERTY(object_id('[dbo].[TABLE]'), 'COLUMN_NAME', 'AllowsNull') is NULL
BEGIN
SELECT 'The column does not exists'
END 
```

# php - 使用 php simplexml 工具更新格式化文本中的 xml 文件

> ID：14558780
> 
> 赞同：0
> 
> 时间：2013-01-28T09:16:24.460
> 
> 标签：php, xml, xml-parsing, simplexml

> **可能重复：**
> [PHP XML 如何输出好的格式](https://stackoverflow.com/questions/8615422/php-xml-how-to-output-nice-format)

我在用这个

```
<?php

$file = '/Applications/MAMP/htdocs/payback_service/payback_records.xml';

if (file_exists($file)) {
    $sxe = simplexml_load_file($file);  
    $movie = $sxe->addChild('record');
    $movie->addChild('lat', 'PHP2: More Parser Stories');
    $movie->addChild('lng', 'This is all about the people who make it work.');
    $movie->addChild('address', 'PHP2: More Parser Stories');
    $movie->addChild('picture_link', 'PHP2: More Parser Stories');
    $movie->addChild('message', 'PHP2: More Parser Stories');
    $sxe->asXML($file);

} else {
    exit('Failed to open '.$file);
} 
```

我希望以格式化的形式更新 xml 的文本。

现在我得到这个：

```
<record><lat>PHP2: More Parser Stories</lat><lng>This is all about the people who make it work.</lng><address>PHP2: More Parser Stories</address><picture_link>PHP2: More Parser Stories</picture_link><message>PHP2: More Parser Stories</message></record><record><lat>PHP2: More Parser Stories</lat><lng>This is all about the people who make it work.</lng><address>PHP2: More Parser Stories</address><picture_link>PHP2: More Parser Stories</picture_link><message>PHP2: More Parser Stories</message></record></root> 
```

我需要文件是这样的：

```
<record>
    <lat>1.5</lat>
    <lng>-8.5</lng>
    <address>this is the address</address>
    <picture_link>this is picture link</picture_link>
    <message>this is the message</message>
</record>
<record>
    <lat>1.5</lat>
    <lng>0.248</lng>
    <address>PHP2: More Parser Stories</address>
    <picture_link>PHP2: More Parser Stories</picture_link>
    <message>PHP2: More Parser Stories</message>
</record> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:54:09.020

我不认为 SimpleXML 支持格式化。但是[DOMDocument 类](http://php.net/manual/en/class.domdocument.php)会：

```
<?php

$file = '/Applications/MAMP/htdocs/payback_service/payback_records.xml';

if (file_exists($file)) {
    $sxe = simplexml_load_file($file);  
    $movie = $sxe->addChild('record');
    $movie->addChild('lat', 'PHP2: More Parser Stories');
    $movie->addChild('lng', 'This is all about the people who make it work.');
    $movie->addChild('address', 'PHP2: More Parser Stories');
    $movie->addChild('picture_link', 'PHP2: More Parser Stories');
    $movie->addChild('message', 'PHP2: More Parser Stories');

    $dom = new DOMDocument('1.0');
    $dom->preserveWhiteSpace = false;
    $dom->formatOutput = true;
    $dom->loadXML($sxe->asXML());
    echo $dom->saveXML();

} else {
    exit('Failed to open '.$file);
} 
```

# jquery - 如何打开垂直下拉菜单项左对齐

> ID：14558789
> 
> 赞同：0
> 
> 时间：2013-01-28T09:16:49.000
> 
> 标签：jquery, html, css

我正在尝试将下拉垂直菜单项打开到左侧，现在它在右侧打开，但我希望它应该在左侧打开，

我怎么能做到这一点？，我写了以下事情来完成这项工作

CSS：

```
#navContainer
{
    margin: 0;
    padding: 0;
    background: red;
    border: 1px solid #7398ba;
    text-align: center;
    width: 220px;
}

    #navContainer ul
    {
        margin: 0;
        padding: 0;
        list-style: none;
    }

        #navContainer ul li
        {
            position: relative;
        }

            #navContainer ul li span
            {
                display: block;
            }

            #navContainer ul li a
            {
                text-decoration: none;
                color: white;
                display: block;
                padding: 8px;
            }

            #navContainer ul li span:hover
            {
                /*background: pink;*/
            }

            #navContainer ul li a:hover
            {
                background: black;
            }

        #navContainer ul ul
        {
            position: absolute;
            display: none;
        }

            #navContainer ul ul li a
            {
                background: #bec8cb;
            }

        #navContainer ul li:hover ul
        {
            width: 80%;
            position: absolute;
            display: block;
            left: 218px;
            top: 0;
        } 
```

HTML :-

```
<div id="navContainer">
        <ul>
            <li><span><a href="#">Home</a></span></li>
            <li>
                <span><a href="#">About </a></span>
                <ul>
                    <li><a href="#">Our business</a></li>
                    <li><a href="#">Our History </a></li>
                </ul>
            </li>
            <li>
                <span><a href="#">Services</a></span>
                <ul>
                    <li><a href="#">Web Design</a></li>
                    <li><a href="#">Web templates </a></li>
                    <li><a href="#">Tutorials </a></li>
                </ul>
            </li>
            <li><span><a href="#">Contact</a></span></li>
            <li><span><a href="#">News</a></span></li>
        </ul>
    </div> 
```

当前结果：-

![在此处输入图像描述](../Images/c96bf64e81fe589f7fa133ddf9d5919b.png)

**我想要的结果**

![在此处输入图像描述](../Images/52a3f7bbd1d06a1877532551d4e0d94b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-10T06:39:52.487

这次我和你有同样的问题，我通过`ul`用 a 包装元素来解决这个问题`div`，并使用了两次绝对位置。这样我才能达到这个结果。

*   第一次左对齐包装器`left: 0`
*   第二次离开扩大了下拉`right: 0`

代码示例：

```
<div class="parent">
    <div>Trigger Dropdown</div>
    <div class="wrapper">
        <ul class="dropdown">
            <li>foo</li>
            <li>bar</li>
        </ul>
    </div>
</div> 
```

```
.parent {
    position: relative;
    margin-left: 100px;
}

.dropdown {
    background: red;
    position: absolute;
    top: 0;
    right: 0;
}

.wrapper {
    position: absolute;
    top: 0;
    left: 0;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T09:19:12.067

只需更改`left`为`right`您的绝对定位即可。在你的情况下：

改变：

```
#navContainer ul li:hover ul
    {
        width: 80%;
        position: absolute;
        display: block;
        left: 218px;
        top: 0;
    } 
```

至：

```
#navContainer ul li:hover ul
    {
        width: 80%;
        position: absolute;
        display: block;
        right: 218px;
        top: 0;
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T09:21:03.690

或者您可以像这样将像素`#navContainer ul li:hover ul`从正变为负

`left: 218px`==> `left: -218px`/无论你的下拉菜单的宽度是多少/

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T09:21:41.283

更改`left:218px`to - 值并赋予`margin-left`main`navigation ul`

```
#navContainer
{
    margin: 0 0 0 218px;
    padding: 0;
    background: red;
    border: 1px solid #7398ba;
    text-align: center;
    width: 220px;
}
     #navContainer ul li:hover ul
        {
            width: 80%;
            position: absolute;
            display: block;
            left: -178px;
            top: 0;
        } 
```

**[演示](http://jsfiddle.net/3GEfb/1/)**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-28T10:03:17.927

```
#navContainer
{
    margin: 0;
    padding: 0;
    background: red;
    border: 1px solid #7398ba;
    text-align: center;
    width: 220px;
    position:relative;
    float:right;
}

#navContainer ul
{
    margin: 0;
    padding: 0;
    list-style: none;

}

#navContainer ul li
{
    position: relative;
}

#navContainer ul li span
{
    display: block;
}

#navContainer ul li a
{
    text-decoration: none;
    color: white;
    display: block;
    padding: 8px;
}

#navContainer ul li span:hover
{
    /*background: pink;*/
}

#navContainer ul li a:hover
{
    background: black;
}

#navContainer ul ul
{
    position: relative;
    display: none;

}

#navContainer ul ul li a
{
    background: #bec8cb;
}

#navContainer ul li:hover ul
{
    width: 80%;
    position: absolute;
    display: block;
    left: 218px;
    top: 0;
    margin-left:-380px;
}

<div id="navContainer">
        <ul>
            <li><span><a href="#">Home</a></span></li>
            <li>
                <span><a href="#">About </a></span>
                <ul>
                    <li><a href="#">Our business</a></li>
                    <li><a href="#">Our History </a></li>
                </ul>
            </li>
            <li>
                <span><a href="#">Services</a></span>
                <ul>
                    <li><a href="#">Web Design</a></li>
                    <li><a href="#">Web templates </a></li>
                    <li><a href="#">Tutorials </a></li>
                </ul>
            </li>
            <li><span><a href="#">Contact</a></span></li>
            <li><span><a href="#">News</a></span></li>
        </ul>
    </div> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-28T09:25:10.183

您需要将`navContainer`向右移动，例如：

```
#navContainer
{
    margin: 0;
    padding: 0;
    background: red;
    border: 1px solid #7398ba;
    text-align: center;
    width: 220px;
    float: right;
} 
```

然后使用`right`属性而不是`left`属性`ul`

```
#navContainer ul li:hover ul
{
    width: 80%;
    position: absolute;
    display: block;
    left: 218px;
    top: 0;
} 
```

# java - 无需“mvn:redeploy”即可自动重新部署

> ID：14558793
> 
> 赞同：0
> 
> 时间：2013-01-28T09:16:55.373
> 
> 标签：java, eclipse, maven

我在 Eclipse 中有一个 mavenized 动态 web 项目。当我对其进行更改时，我必须调用`mvn:redeploy`将项目重新部署到 Tomcat 中。有没有办法在保存文件时自动重新部署到Tomcat，而不需要`mvn:redeploy`命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:26:23.380

使用 Eclipse 的“ [Java-On Save Actions](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/java/editor/ref-preferences-save-actions.htm) ”来配置将调用的附加操作`mvn redeploy`。

# validation - VB6：以某种格式验证日期

> ID：14558797
> 
> 赞同：2
> 
> 时间：2013-01-28T09:17:11.893
> 
> 标签：validation, date, vb6, format

我已经使用 Visual Basic 6 构建了一个表单。一切都很好，表单将数据插入我的数据库中，这里根本没有问题。

现在我需要验证日期字段，我需要输入的日期具有以下格式：dd/mm/yyyy

我正在做：

```
Private Sub txtMyText_Validate(Index As Integer, Cancel As Boolean)
If IsDate(Format$(txtMyText(9).Text, "dd/mm/yyyy")) Or txtMyText(9).Text = "" Then
txtMyText(9).SetFocus
Else
txtMyText(9).SetFocus
MsgBox "Please enter a valid date with this format: dd/mm/yyyy."
End If
End Sub 
```

但是这段代码不起作用。当我输入具有这种格式 dd/mm/yy 的日期时，流程遵循插入功能，我收到错误，因为它不是 dd/mm/yyyy。

你能帮我修复这个代码吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:04:22.340

在您插入数据库行的日期字段中使用它：

```
Format(txtMyText(9).Text, "dd/mm/yyyy") 
```

这将解决输入为 dd/mm/yy 或 yyyy/mm/dd 的日期

并防止输入整数或字符串而不是日期：

```
Private Sub txtMyText_Validate(Index As Integer, Cancel As Boolean)
    If Not IsDate(txtMyText(9).Text) Then
    MsgBox "Enter a valid date with this format: dd/mm/yyyy"
    Cancel = True
    End If
End Sub 
```

# jquery - 从 JSON 文件创建联系人表

> ID：14558801
> 
> 赞同：3
> 
> 时间：2013-01-28T09:17:18.407
> 
> 标签：jquery, html, json, html-table

我是 JSON 新手。

我最近在做一个关于 HTML、JSON 和 jQuery 的项目。我现在想要实现的是从 JSON 文件中获取数据并将其加载到我的表中。数据未加载到我的表中。

我的 json 文件 contact.json

```
{
    "length": 2,
    "info": [
        {
            "name":"Sam",
            "email":"fred@server.com",
            "phone":"789456235"
        },
        {
            "name":"Fred",
            "email":"fred@server.com",
            "phone":"125689564"
        }
    ]
} 
```

我加载数据的脚本：

```
window.onload = function () {
            var contacts;
            setTimeout(function(){  //pass it an anonymous function that calls foo
                          loadData("contact");
                       },2000);
        };

        function loadData(myfile){
           $.getJSON( myfile + ".json", function(data){
            console.log(data)
              $.each(data, function(index, element){
            $.each(element, function(i, item){  
               $('#contacts').append('<tr><td>' + item.name + '</td><td>'+ item.email +'</td><td>' + item.phone + '</td><td>');       
            });
              });
           });
        } 
```

我的 HTML

```
<body>
<div id="tt" class="easyui-tabs" style="width:400px;height:250px;">
    <div title="Home">
        <table id='contacts'></table>   
    </div>
</div> 
```

我[从 JSON 数据创建联系人表中复制了整个内容](https://stackoverflow.com/questions/10082929/create-contact-table-from-json-data)

这是错误

```
 TypeError: j is undefined
http://code.jquery.com/jquery-1.4.4.min.js
Line 32 
```

我在控制台中获取对象。但未加载数据。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:25:24.410

`$.parseJSON()`解析 JSON 字符串以返回 JSON 对象。它不会从您的 JSON 文件中获取数据。为此，您需要使用`$.getJSON(url, function(data){ //Parse JSON here })`

将您的`loadData`功能更新为：

```
function loadData(myobject, myfile){
    $.getJSON("../data/" + myfile + ".json", function(data){
        myobject = data;
        $(myobject.info).each(function(index, element){  
            $('#contacts').append('<tr><td>' + element.name + '</td><td>'
            + element.email + '</td><td>'
            + element.phone + '</td><td>');       
        })
    })
}; 
```

并将您的`onLoad`功能更改为：

```
window.onload = function () {
    var contacts;
    setTimeout(function(){
        loadData(contacts, "contact");
    }, 2000);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T09:30:00.313

您正在将文件的相对 url 传递给 jQuery.parseJSON 函数。[API文档说](http://api.jquery.com/jQuery.parseJSON/)，jQuery.parseJSON：

> 采用格式良好的 JSON 字符串并返回结果 JavaScript 对象。

您应该首先加载 json 文件的内容（[可能使用 jQuery.getJSON()](http://api.jquery.com/jQuery.getJSON/)）并将结果传递给 parseJSON 函数。

第二：您在 HTML 和 JavaScript 中为表格使用不同的 ID。“联系人”与“联系人”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T09:40:51.040

试试这个：

因为你有数组`info[]`

```
$(function () {
   setTimeout(function(){  //pass it an anonymous function that calls foo
      loadData('contact');
   },2000);
});

function loadData(myfile){
   $.getJSON("../data/" + myfile + ".json", function(data){
      $.each(data, function(index, element){
        $.each(element, function(i, item){  
           $('#contacts').append('<tr><td>' + item.name + '</td><td>'+ item.email +'</td><td>' + item.phone + '</td><td>');       
        });
      });
   });
} 
```

我通过创建一个包含所有 json 值的 var json 在小提琴上做到了这一点。 `[http://jsfiddle.net/vyTjn/](http://jsfiddle.net/vyTjn/)`

# c# - 基于服务的数据库和本地数据库之间的混淆

> ID：14558804
> 
> 赞同：3
> 
> 时间：2013-01-28T09:17:28.157
> 
> 标签：c#, sql-server, database, winforms

嗨，我是 c# 的新手，我是一名从最近 3 个月开始学习 c# 的学生，在开始我的小项目时，我创建了一个基于服务的数据库并用于将值存储在表中。在我的应用程序中，我只处理表格。以及将在单台机器上运行的查询。我正在生成一个只能在单台机器上工作的项目。所以我现在意识到基于服务的数据库和本地数据库之间的差异**基于服务的数据库是只能通过服务器访问的数据库。它使用 MDF 数据文件，它是 SQL Server 格式。为了能够连接到 SQL Server 数据库，必须运行 SQL Server 服务，因为它会处理您的请求并访问数据文件。

本地数据库是仅对您的应用程序本地的数据库。它使用 SDF 数据文件，它是 SQL Server CE（精简版）格式。无需安装服务器即可访问 SDF 数据库**，但我使用基于服务的数据库构建了整个项目，并使用了所有选择和更新的查询。我用了这段代码

```
connectionString = @"Data Source=.\
    SQLEXPRESS;AttachDbFilename=E:\project\Database1.mdf;Integrated 
    Security=True;User Instance=True";
sqlConnection = new SqlConnection(connectionString); 
```

但是当转移到 .sdf 文件意味着到本地数据库时，我只需要替换新的连接字符串？它是否反映了任何功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:20:13.703

如果数据库结构相同，则您的代码（可能）必须保持不变。唯一需要改变的是*连接字符串*。

还有其他类型的问题可以在本地和服务器端存储之间产生差异，例如：

*   外部进程调用
*   文件访问
*   表现

等等..

但是从*功能*（通用）的角度来看，您的程序应该只更改*连接字符串*。

# ios - 以编程方式创建 ViewController 和可能的内存泄漏

> ID：14558810
> 
> 赞同：0
> 
> 时间：2013-01-28T09:17:44.070
> 
> 标签：ios, memory-management

我有时无法理解 iOS 的内存管理。

我接管了一些应用程序，我正在开发它。应用程序是在部署目标 4.3 下开发的，不能因客户要求而更改。

有一种方法可以创建 Picker。

```
NSMutableArray *arrayToLoad = [[NSMutableArray alloc] initWithObjects: obj, nil];
[arrayToLoad addObjectsFromArray: (NSMutableArray*)[valueArrays objectAtIndex: btn.tag]];
if( !picker )
{
    picker = [[WybierzZListyViewController alloc] initWithValues: arrayToLoad useObjectType: YES selectedIndex:0];
    [self.view addSubview: picker.view];
    picker.delegate = self;
    [picker animate];
}
else
{
    picker = [[WybierzZListyViewController alloc] initWithValues: arrayToLoad useObjectType: YES selectedIndex:0];
    [picker reuseWithValues: arrayToLoad useObjectType: YES selectedIndex: indexes[btn.tag]];
    [picker animate];
} 
```

这个 else 块，尤其是方法 reuseWithValues 给我带来了很多麻烦，我很可能会把它清除掉。

以前的开发人员关于重用以前创建的选择器而不是重新创建新的选择器是否正确？听起来很合理，但后来对我来说几乎没有什么困难，我想知道我是否可以：

```
picker = [[WybierzZListyViewController alloc] initWithValues: arrayToLoad useObjectType: YES selectedIndex:0];
[self.view addSubview: picker.view];
picker.delegate = self;
[picker animate]; 
```

没有 else 阻塞，并避免内存泄漏。理论上新的 ViewController 应该分配在 picker 变量下，但是替换一个呢。我应该在更换之前以某种方式破坏它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:21:05.043

在初始化选择器时尝试这样做

```
 NSMutableArray *arrayToLoad = [[NSMutableArray alloc] initWithObjects: obj, nil];
        [arrayToLoad addObjectsFromArray: (NSMutableArray*)[valueArrays objectAtIndex: btn.tag]];
        if( !picker )
        {

[picker.view removeFromSuperview];
picker.delegate = nil;
picker = nil
        }
            picker = [[WybierzZListyViewController alloc] initWithValues: arrayToLoad useObjectType: YES selectedIndex:0];
            [self.view addSubview: picker.view];
            picker.delegate = self;
            [picker animate]; 
```

希望这能解决您的问题。

# graphics - 贝塞尔补丁如何在犹他茶壶中工作？

> ID：14558814
> 
> 赞同：5
> 
> 时间：2013-01-28T09:17:52.477
> 
> 标签：graphics, 3d, postscript, bezier, bspline

我过早地发布了一个代码高尔夫挑战赛来使用[这个数据集](ftp://ftp.funet.fi/pub/sci/graphics/packages/objects/teaset.tar.Z)（[只是茶壶](http://code.google.com/p/xpost/downloads/detail?name=teapot)）绘制[犹他茶壶](http://en.wikipedia.org/wiki/Utah_teapot)。（[修订和发布的茶壶挑战](https://codegolf.stackexchange.com/questions/22620/draw-the-utah-teapot)）但是当我更深入地查看数据以提出一个小例子时，我意识到我不知道这些数据发生了什么。我对二维贝塞尔曲线有很好的理解，实现了 deCasteljau。但是对于 3D，它的工作原理是否相同？

> 是的！确实如此！

数据包含每个包含 16 个顶点的补丁。是否有关于这些布局的标准顺序？如果它们对应 2D 曲线，那么四个角点实际上接触表面，其余 12 个是控件，对吗？

> 是的！

我的“原始计划”是将形状简化为矩形，将它们投影到画布上，并以灰色绘制填充形状，该灰色由垂直于光矢量的补丁的点积的大小计算得出。如果我把它简化这么多，它甚至会看起来像一个茶壶吗？是否必须使用光线追踪来获得可识别的图像？

> 那是主观的。:-(

虽然这可能看起来像几个问题，但它们都是这个问题的各个方面：“请，好心的大师，教我一些贝塞尔补丁？我需要知道什么来画茶壶？”

* * *

这是我到目前为止编写的代码。（使用这个矩阵库：[mat.ps](http://web.archive.org/web/20160404161539/https://code.google.com/p/xpost/downloads/detail?name=mat.ps&can=2&q=)）

```
%!
%%BoundingBox: 115 243 493 487
%-115 -243 translate

(mat.ps)run  %include matrix library

/tok{ token pop exch pop }def
/s{(,){search{ tok 3 1 roll }{ tok exit }ifelse }loop }def
/f(teapot)(r)file def
/patch[ f token pop { [ f 100 string readline pop s ] } repeat ]def
/vert[ f token pop { [ f 100 string readline pop s ] } repeat ]def
%vert == patch == %test data input

/I3 3 ident def      % 3D identity matrix
/Cam [ 0 0 10 ] def  % world coords of camera center viewpoint
/Theta [ 0 0 0 ] def % y-rotation x-rotation z-rotation
/Eye [ 0 0 15 ] def  % eye relative to camera vp
/Rot I3 def          % initial rotation seq

/makerot {
    Theta 0 get roty        % pan
    Theta 1 get rotx matmul % tilt
    Theta 2 get rotz matmul % twist
} def

/proj {
    Cam {sub} vop  % translate to camera coords
    Rot matmul  % perform camera rotation
    0 get aload pop Eye aload pop  % extract dot x,y,z and eye xyz
    4 3 roll div exch neg          % perform perspective projection
    4 3 roll add 1 index mul
    4 1 roll 3 1 roll sub mul exch % (ez/dz)(dx-ex) (ez/dz)(dy-ey)
} def

/R 20 def
/H -3 def
/ang 0 def
{
    300 700 translate
    1 70 dup dup scale div setlinewidth

    /Cam [ ang sin R mul  H  ang cos R mul ] def % camera revolves around Y axis at height H, dist R
    /Theta [ ang  H R atan  0 ] def % rotate camera back to origin
    /Rot makerot def % squash rotation sequence into a matrix

    patch {
        % Four corners
        %[ exch dup 0 get exch dup 3 get exch dup 12 get exch 15 get ]

        % Boundary curves
        [ exch
            dup 8 get exch dup 4 get exch dup 0 get exch %curveto4

            dup 14 get exch dup 13 get exch dup 12 get exch %curveto3

            dup 7 get exch dup 11 get exch dup 15 get exch %curveto2

            dup 1 get exch dup 2 get exch dup 3 get exch %curveto1

            dup 0 get exch %moveto
        pop ]

        { 1 sub vert exch get proj } forall

        moveto
            curveto curveto curveto curveto

        stroke
        %flushpage flush (%lineedit)(r)file pop
    } forall
    pstack
    showpage

    %exit
    /ang ang 10 add def
} loop 
```

这是[原始的 Newell Teapot 数据集](ftp://ftp.funet.fi/pub/sci/graphics/packages/objects/teaset.tar.Z)。

这是我非常糟糕的形象：
![不知道顶点是如何组织的。](../Images/9943be871e96ee50b253f4f32426098d.png)

更新：错误修正。也许它们毕竟是“正常”布置的。选择正确的角至少会给出对称的形状：
![找到了角落。](../Images/26d2db61f661e19cccdec7637440f0c8.png)

更新：边界曲线看起来更好。
![边界曲线](../Images/31cb1fd1066c32cb2f3aa3b837da40c9.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T09:48:35.100

Bi-Cubic Bezier 曲面片是 3D 点的 4x4 阵列。是的，四个角接触表面；行是贝塞尔曲线，列也是贝塞尔曲线。但 deCasteljau 算法基于计算两点之间的中值，在 3D 和 2D 中同样有意义。

完成上述代码的下一步是细分补丁以覆盖更小的部分。那么上面简单的边界曲线提取*就变成*了一个合适的多边形网格。

首先展平补丁，直接插入顶点数据，而不是使用单独的缓存。这段代码遍历补丁，在顶点数组中查找点并构造一个新的补丁数组，然后用相同的名称重新定义它。

```
 /patch[ patch{ [exch { 1 sub vert exch get }forall ] }forall ]def 
```

然后我们需要 deCasteljau 算法来分割 Bezier 曲线。`vop`来自矩阵库，并对向量的相应元素进行二元运算，并生成一个新向量作为结果。

```
/median { % [x0 y0 z0] [x1 y1 z1]
    {add 2 div} vop % [ (x0+x1)/2 (y0+y1)/2 (z0+z1)/2 ]
} def   

/decasteljau { % [P0] P1 P2 P3  .  P0 P1' P2' P3'  P3' P4' P5' P3
    {p3 p2 p1 p0}{exch def}forall
    /p01 p0 p1 median def
    /p12 p1 p2 median def
    /p23 p2 p3 median def
    /p012 p01 p12 median def
    /p123 p12 p23 median def
    /p0123 p012 p123 median def
    p0 p01 p012 p0123  % first half-curve
    p0123 p123 p23 p3  % second half-curve
} def 
```

然后进行一些堆栈操作以应用于补丁的每一行并将结果组装成 2 个新补丁。

```
/splitrows { % [b0 .. b15]  .  [c0 .. c15] [d0 .. d15] 
    aload pop % b0 .. b15
    4 {                          % on each of 4 rows
        16 12 roll decasteljau   % roll the first 4 to the top
        8 4 roll                 % exch left and right halves (probably unnecessary)
        20 4 roll                % roll new curve to below the patch (pushing earlier ones lower)
    } repeat
    16 array astore              % pack the left patch
    17 1 roll 16 array astore    % roll, pack the right patch
} def 
```

一个丑陋的实用程序让我们可以重用列的行代码。堆栈注释是编写此过程所必需的，因此可能需要阅读它。`n j roll`滚动 n 个元素（向左）， j 次；== 第 n 个元素上方的前 j 个元素（从 1 开始计数）。因此 n 稳定减小，选择*放置*元素的位置，而 j 选择放置哪个元素（用它拖动其他所有内容）。如果`bind`应用，此过程将比基于字典的过程快得多。

```
% [ 0  1  2  3
%   4  5  6  7
%   8  9 10 11
%  12 13 14 15 ]
/xpose {
    aload pop % 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
    15 12 roll % 0 4 5 6 7 8 9 10 11 12 13 14 15 1 2 3
    14 11 roll % 0 4 8 9 10 11 12 13 14 15 1 2 3 5 6 7
    13 10 roll % 0 4 8 12 13 14 15 1 2 3 5 6 7 9 10 11

    12 9 roll % 0 4 8 12 1 2 3 5 6 7 9 10 11 13 14 15
    11 9 roll % 0 4 8 12 1 5 6 7 9 10 11 13 14 15 2 3
    10 8 roll % 0 4 8 12 1 5 9 10 11 13 14 15 2 3 6 7
    9 7 roll % 0 4 8 12 1 5 9 13 14 15 2 3 6 7 10 11

    8 6 roll % 0 4 8 12 1 5 9 13 2 3 6 7 10 11 14 15
    7 6 roll % 0 4 8 12 1 5 9 13 2 6 7 10 11 14 15 3
    6 5 roll % 0 4 8 12 1 5 9 13 2 6 10 11 14 15 3 7
    5 4 roll % 0 4 8 12 1 5 9 13 2 6 10 14 15 3 7 11
    4 3 roll % 0 4 8 12 1 5 9 13 2 6 10 14 3 7 11 15
    16 array astore
} def
% [ 0 4  8 12
%   1 5  9 13
%   2 6 10 14
%   3 7 11 15 ]

/splitcols {
    xpose
    splitrows
    xpose
} def 
```

然后将这些函数应用于补丁数据。再次，每次重新定义补丁。

```
/patch[ patch{ splitrows }forall ]def
/patch[ patch{ splitrows }forall ]def
/patch[ patch{ splitcols }forall ]def
/patch[ patch{ splitcols }forall ]def 
```

这提供了处理较小片段的能力。
![按细分线框](../Images/a33193ca959ef1aba033b91f57abdf06.png)

添加可见性测试。

```
/visible { % patch  .  patch boolean 
    dup % p p
    dup 3 get exch dup 0 get exch 12 get % p p3 p0 p12
    1 index {sub} vop % p p3 p0 v0->12
    3 1 roll {sub} vop % p v0->12 v0->3
    cross /normal exch def
    dup
    [ exch dup 0 get exch dup 3 get exch dup 12 get exch 15 get ]
    { Cam {sub} vop normal dot 0 ge } forall
    %add add add 4 div 0 lt
    or or or
} def 
```

生产
![应用可见性测试](../Images/2952120f3272109839bc4bc4917bf3ed.png)

更新：测试是倒退的。
![固定能见度测试](../Images/c0d8c9853decc23955b9164aea5ba972.png)

更新：*测试没用！*您可以从图像中看到底部没有朝外，当然，背面剔除不会阻止把手从锅中露出来。这需要去除隐藏的表面。而且由于 Postscript 不支持 Z 缓冲区，我想它必须是二进制空间分区。所以这对我来说又回到了书本上。

更新：添加一个模型->世界变换来把东西竖起来。

```
/Model -90 rotx def % model->world transform

/proj {
    Model matmul 0 get             % perform model->world transform
    Cam {sub} vop                  % translate to camera coords
    ... 
```

生产这个。
![直立](../Images/dc0862b5479e0bfa35ef20edf4118254.png)

至此完成程序。（使用矩阵库：[mat.ps](http://web.archive.org/web/20160404161539/https://code.google.com/p/xpost/downloads/detail?name=mat.ps&can=2&q=)。）在ghostscript中，您可以通过按住来查看动画旋转`[enter]`。

```
 %!
    %%BoundingBox: 109 246 492 487
    %-109 -246 translate

    (mat.ps)run  %include matrix library
    (det.ps)run  %supplementary determinant function

    /tok{ token pop exch pop }def
    /s{(,){search{ tok 3 1 roll }{ tok exit }ifelse }loop }def
    /f(teapot)(r)file def
    /patch[ f token pop { [ f 100 string readline pop s ] } repeat ]def
    /vert[ f token pop { [ f 100 string readline pop s ] } repeat ]def
    /patch[ patch{ [exch { 1 sub vert exch get }forall ] }forall ]def
    %vert == patch == %test data input flush quit

    /I3 3 ident def      % 3D identity matrix
    /Cam [ 0 0 10 ] def  % world coords of camera center viewpoint
    /Theta [ 0 0 0 ] def % y-rotation x-rotation z-rotation
    /Eye [ 0 0 15 ] def  % eye relative to camera vp
    /Rot I3 def          % initial rotation seq

    /Model -90 rotx def % model->world transform

    /makerot {
            Theta 0 get roty        % pan
            Theta 1 get rotx matmul % tilt
            Theta 2 get rotz matmul % twist
    } def

    /proj {
            Model matmul 0 get             % perform model->world transform
            Cam {sub} vop  % translate to camera coords
            Rot matmul  % perform camera rotation
            0 get aload pop Eye aload pop  % extract dot x,y,z and eye xyz
            4 3 roll div exch neg          % perform perspective projection
            4 3 roll add 1 index mul
            4 1 roll 3 1 roll sub mul exch % (ez/dz)(dx-ex) (ez/dz)(dy-ey)
    } def

    /median { % [x0 y0 z0] [x1 y1 z1]
            {add 2 div} vop % [ (x0+x1)/2 (y0+y1)/2 (z0+z1)/2 ]
    } def

    /decasteljau { % [P0] P1 P2 P3  .  P0 P1' P2' P3'  P3' P4' P5' P3
            {p3 p2 p1 p0}{exch def}forall
            /p01 p0 p1 median def
            /p12 p1 p2 median def
            /p23 p2 p3 median def
            /p012 p01 p12 median def
            /p123 p12 p23 median def
            /p0123 p012 p123 median def
            p0 p01 p012 p0123
            p0123 p123 p23 p3
    } def

    /splitrows { % [b0 .. b15]  .  [c0 .. c15] [d0 .. d15]
            aload pop % b0 .. b15
            4 {
                    16 12 roll decasteljau
                    %8 4 roll
                    20 4 roll
            } repeat
            16 array astore
            17 1 roll 16 array astore
    } def

    /xpose {
            aload pop % 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
            15 12 roll % 0 4 5 6 7 8 9 10 11 12 13 14 15 1 2 3
            14 11 roll % 0 4 8 9 10 11 12 13 14 15 1 2 3 5 6 7
            13 10 roll % 0 4 8 12 13 14 15 1 2 3 5 6 7 9 10 11

            12 9 roll % 0 4 8 12 1 2 3 5 6 7 9 10 11 13 14 15
            11 9 roll % 0 4 8 12 1 5 6 7 9 10 11 13 14 15 2 3
            10 8 roll % 0 4 8 12 1 5 9 10 11 13 14 15 2 3 6 7
            9 7 roll % 0 4 8 12 1 5 9 13 14 15 2 3 6 7 10 11

            8 6 roll % 0 4 8 12 1 5 9 13 2 3 6 7 10 11 14 15
            7 6 roll % 0 4 8 12 1 5 9 13 2 6 7 10 11 14 15 3
            6 5 roll % 0 4 8 12 1 5 9 13 2 6 10 11 14 15 3 7
            5 4 roll % 0 4 8 12 1 5 9 13 2 6 10 14 15 3 7 11
            4 3 roll % 0 4 8 12 1 5 9 13 2 6 10 14 3 7 11 14
            16 array astore
    } def

    /splitcols {
            xpose
            splitrows
            xpose exch xpose
    } def

    /patch[ patch{ splitrows }forall ]def
    /patch[ patch{ splitrows }forall ]def
    /patch[ patch{ splitrows }forall ]def
    /patch[ patch{ splitrows }forall ]def
    /patch[ patch{ splitcols }forall ]def
    /patch[ patch{ splitcols }forall ]def

    /color {normal light dot 1 add 4 div
%1 exch sub
setgray} def

    /visible { % patch  .  patch boolean
            dup % p p
            dup 3 get exch dup 0 get exch 12 get % p p3 p0 p12
            1 index {sub} vop % p p3 p0 v0->12
            3 1 roll {sub} vop % p v0->12 v0->3
            cross /normal exch def
            dup
            [ exch dup 0 get exch dup 3 get exch dup 12 get exch 15 get ]
            { Cam {sub} vop normal dot 0 ge } forall
            %add add add 4 div 0 lt
            or or or
    } def

    /drawpatch {

            % Four corners
            %[ exch dup 0 get exch dup 3 get exch dup 12 get exch 15 get ]

            visible {

                    [ exch
                            % control rows
                            %dup 4 get exch dup 5 get exch dup 6 get exch dup 7 get exch
                            %dup 11 get exch dup 10 get exch dup 9 get exch dup 8 get exch

                            % control columns
                            %dup 1 get exch dup 5 get exch dup 9 get exch dup 13 get exch
                            %dup 14 get exch dup 10 get exch dup 6 get exch dup 2 get exch

                            % Boundary curves
                            dup 8 get exch dup 4 get exch dup 0 get exch %curveto4
                            dup 14 get exch dup 13 get exch dup 12 get exch %curveto3
                            dup 7 get exch dup 11 get exch dup 15 get exch %curveto2
                            dup 1 get exch dup 2 get exch dup 3 get exch %curveto1
                            dup 0 get exch %moveto
                    pop ]

                    { proj } forall

                    moveto curveto curveto curveto curveto
                    %moveto lineto lineto lineto lineto lineto lineto lineto closepath
                    %moveto lineto lineto lineto lineto lineto lineto lineto closepath

                    stroke
                    %flushpage flush (%lineedit)(r)file pop

            }{
                    pop
            }ifelse

    } def

    /R 20 def
    /H -3 def
    /ang 10 def
    {
            300 700 translate
            1 70 dup dup scale div setlinewidth

            % camera revolves around Y axis at height H, dist R
            /Cam [ ang sin R mul  H  ang cos R mul ] def
            /Theta [ ang  H R atan  0 ] def   % rotate camera back to origin
            /Rot makerot def        % squash rotation sequence into a matrix

            patch {
                    drawpatch
            } forall
            pstack
            showpage

            %exit
            /ang ang 10 add def
    } loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T04:01:57.120

基于[math.StackExchange](https://math.stackexchange.com/a/297905/16936)的帮助，我被引导到一个子目标，即用计算行列式的函数来补充矩阵库。

所以，这段代码通过了一些笨拙的初始测试，但它非常*丑陋*，我必须承认：

```
`GS>[[1 0][0 1]] det
GS<1>=
1
GS>[[0 1][1 0]] det =
-1
GS>(mat.ps) run
GS>3 ident
GS<1>det =
1
GS>[[1 2 3][4 5 6][7 8 9]] det =
0
GS>` 
```

`更新。更具可读性。`

 `更新。使用点和十字更具可读性。再次感谢，MVG。

```
(mat.ps) run % use dot and cross from matrix library

/elem { % M i j
    3 1 roll get exch get % M_i_j
} def

/det {
    dup length 1 index 0 get length ne { /det cvx /typecheck signalerror } if
    1 dict begin /M exch def
        M length 2 eq {
            M 0 0 elem
            M 1 1 elem mul
            M 0 1 elem
            M 1 0 elem mul sub
        }{
            M length 3 eq {
                M aload pop cross dot
            }{ /det cvx /rangecheck signalerror } ifelse
        } ifelse
    end
} def 
````

# c# - 尝试解析列以进行不等式比较时，LINQ to Entities 无法识别方法“Int32 Parse(System.String)”方法

> ID：14558837
> 
> 赞同：27
> 
> 时间：2013-01-28T09:19:01.040
> 
> 标签：c#, entity-framework

我的页面中有以下代码：

```
var myVar= Entity.SetName
                 .Where(p => int.Parse(p.ID) >= start &&
                  int.Parse(p.ID) <= end); 
```

start 和 end 是 int，但*p.ID*是 string。所以我应该将*p.ID*转换为 int。但我收到以下错误：

> LINQ to Entities 无法识别方法“Int32 Parse(System.String)”方法，并且该方法无法转换为存储表达式。

哪里有问题？？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-28T09:29:00.650

*首先，我强烈建议检查您的数据库设计，是否有充分的理由`ID`成为`string`. 我会考虑将`ID`DB 类型更改为`int`，您将通过转换摆脱这个问题*。

您得到的错误意味着 EF 不知道如何将该方法转换`Int32.Parse()`为 SQL。基本上你有两种选择如何处理：

在 linq 之外对实体进行比较：

```
var myVar= Entity.SetName.AsEnumerable()
                 .Where(p => int.Parse(p.ID) >= start &&
                  int.Parse(p.ID) <= end); 
```

但**不推荐**`where`这样做，因为在应用条件之前，您正在从 DB 中读取整个结果集。

或者按照关于 SO 的这篇文章中的描述制作**自定义模型定义的函数：**

在 EF 4.0或 实体框架[中将 String 转换为 Int](https://stackoverflow.com/questions/5754218/convert-string-to-int-in-ef-4-0) [：我在哪里扩展 CSDL/MSL？](https://stackoverflow.com/questions/5612827/entity-framework-where-do-i-extend-the-csdl-msl/5613642#5613642)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-06T10:23:27.067

首先尝试转换为`int`然后传递该变量名

```
int catgry = Convert.ToInt32(customercategory.OWNERSHIP_TYPE);
var customerCateg = (from d in _db.tbl_SIL_CUSTOMER_CATEGORY_MST
    .Where(d => d.CAT_ID == catgry) select d.CAT_TYPE).SingleOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-16T23:56:56.937

```
private void LoadDetail(int id)
    {
        var sp = from category in db.ProductCategories
                 join product in db.Products on category.ProductCategoryID equals product.ProductCategoryID
                 where id == int.Parse(category.ProductCategoryID)
                 select new
                 {
                     product.ProductID,
                     product.ProductName,
                     product.ProductCode,
                     product.Deception,
                     category.CategoryName,
                     product.Quanrity,
                     product.Price
                 };
        DGVDetail.DataSource = sp.ToList();//help: Error: LINQ to Entities does not recognize the method 'Int32 Parse(System.String)' method, and this method cannot be translated into a store expression
    }

    private void DGVMaster_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        int index = e.RowIndex;
        LoadDetail(index + 1);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-16T17:35:00.510

要将字符串转换为 int，您必须使其可枚举，然后您可以进行排序或任何您喜欢的

```
 var list = db.UserEntriesTable.AsEnumerable().Select(x => new {

             Name = x.Name,

             Roll = Convert.ToInt32(x.Roll),

             Mobile = x.Mobile

        }).OrderBy(x => x.Roll).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-24T14:55:42.813

```
int nb = EE.Stagaire.Join(EE.Filiere, S => S.IdFiliere, F => F.IdFiliere, (S, F) => new
        {
            ID = S.Id,
            Name = S.Nom,
            Prénon = S.Prenon,
            Email = S.Email,
            MoteDePass = S.MoteDePass,
            Filiere = F.Filiere1,
        }).Where(S => S.ID.ToString() == r.ToString()).Take(1).Count();
        if (nb != 0)
        {
            MessageBox.Show("find it");

        } 
```

//如果你必须数据类型是整数，你可以这样做

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-28T09:25:47.417

虽然效率不高，但您应该能够加载所有行，然后使用 LINQ to Objects：

```
var myVar= Entity.SetName.ToList()
                 .Where(p => int.Parse(p.ID) >= start &&
                  int.Parse(p.ID) <= end); 
```

# prolog - Prolog - union 不检查重复项或列表是否有序

> ID：14558839
> 
> 赞同：0
> 
> 时间：2013-01-28T09:19:04.063
> 
> 标签：prolog, set, set-union

我正在尝试在 Prolog 中编写联合函数，但遇到了一些麻烦。我已经查找了示例并列出了联合的内置示例，但我正在为作业编写自己的示例。当列表具有重复值和/或列表的顺序不是升序时，我注意到一些奇怪的结果。以下是内置的联合代码：

```
union([], A, A) :- !.
union([A|C], B, D) :-
        memberchk(A, B), !,
        union(C, B, D).
union([A|B], C, [A|D]) :-
        union(B, C, D). 
```

我相信这里的伪代码是我们希望在结果中找到所有列表 1，一旦用尽，我们比较列表 2 和列表 3。它们应该是相同的。但是，这不会检查订单。

```
30 ?- union([1,2,3],[],[3,2,1]).
false. 
```

为什么这是假的？清单 1 和清单 3 是相同的集合，即使顺序不同！

```
24 ?- union([a],[a,a],[a,a]).
true.

25 ?- union([a,a],[a],[a,a]).
false. 
```

这两者有什么不同？它们应该产生相同的结果。但是，由于函数的编写方式，最后我们只比较了列表 2 和列表 3，它们在第 25 行是不同的。

我的问题是。. . 有没有更好的方法来编写这些函数，以便正确处理重复项并且顺序无关紧要？有人会假设内置方法可以解决问题，但没有骰子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:57:54.873

First, it's easier to read a code written with consistent naming:

```
union([], A, A) :- !.
union([A|B], C, D) :-
        memberchk(A, B), !,
        union(B, C, D).
union([A|B], C, [A|D]) :-
        union(B, C, D). 
```

What does it do? Given two lists `A` and `B`, it produces the result with a prefix of all elements of `A` not present in `B`, and then `B` itself. So, `union([1,2,3],[],[1,2,3])`. And also `union([1,2,3],[2],[1,3,2])`. You see that order is preserved here. So if you want to compare lists regardless of their order, you should write a special, additional predicate for that: `union([1,2,3],[],X), regardless(X,[3,2,1])` should work then.

Same with the duplicates - your set equality predicate should disregard any. `union` as presented above OTOH is not about sets, but about lists. There are many different lists representing the same set, but as lists they are considered different.

In your `25` you hit the issue of duplicates: `union([a,a],[a],X)` produces `X=[a]`. Again, as set it is the same as `[a,a]`, but as lists they are different.

One strategy for coping with this is to represent *sets* as strictly increasing lists - if your elements have order well defined for them. Then we can write `union` such that given two *sets* according to that definition, it will also produce a *set*, and it will work efficiently at that:

```
union([],X,X):-!.
union(X,[],X):-!.
union([A|B],[C|D],[H|T]):-
  A @< C -> H=A, union(B,[C|D],T) ;
  C @< A -> H=C, union([A|B],D,T) ;
  H=A, union(B,D,T). 
```

We will have to define `make_set/2` predicate here too. Even better (in some respects) is representing sets (again, of comparable elements) by self-balancing binary trees.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:02:05.527

您正在使用语言（Prolog，在您的情况下）放在您手中的“工具”来*实现一个概念。*那么你应该更好地定义（首先用自然语言）你的目标是什么，考虑到*append* /3 也可以符合联合概念。

如果...，您可以将*列表*C称为*列表*A，B之间的*并集。*

 *我会这样填写省略号

*   每个 A 元素在 C 中出现*一次，**并且*
*   每个 B 元素在 C 中出现*一次，**并且*
*   每个 C 元素出现在 A*或*B

如果你同意这个定义，那么一个实现可能是

```
union(A, B, C) :-
  elems_once(A, [], C1),
  elems_once(A, C1, C2),
  each_elems(C2, A, B, C). 
```

这比显示的库代码效率低得多，但这是一般性的代价......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T16:04:29.997

为了有一个`union(?A, ?B, ?C)`（也就是说，你可以使用任何变量作为输入或输出）我创建了一个新的联合

`uniao(?A, ?B, ?C)`

`list:union`除其他外使用，如：

```
uniao([], [], []) :- !.

uniao(X, [], X) :- !.

uniao([], X, X) :- !.

uniao(X, Y, Z) :-
    nonvar(X),
    nonvar(Y),
    var(Z),
    list_to_set(X, Xs),
    list_to_set(Y, Ys),
    union(Xs, Ys, Z), 
    !.  

uniao(X, Y, Z) :-
    nonvar(X),
    var(Y),
    nonvar(Z),
    list_to_set(X, Xs),
    list_to_set(Z, Zs),
    subset(Xs, Zs),
    subtract(Zs, Xs, Y), 
    !.  

uniao(X, Y, Z) :-
    var(X),
    nonvar(Y),
    nonvar(Z),
    list_to_set(Y, Ys),
    list_to_set(Z, Zs),
    subset(Ys, Zs),
    subtract(Zs, Ys, X),
    !.

uniao(X, Y, Z) :-
    nonvar(X),
    nonvar(Y),
    nonvar(Z),
    list_to_set(X, Xs),
    list_to_set(Y, Ys),
    list_to_set(Z, Zs),
    union(Xs, Ys, Ts),
    subtract(Zs, Ts, []),
    subtract(Ts, Zs, []),
    !. 
```*

# python - 为什么 matplotlib 不绘图？

> ID：14558843
> 
> 赞同：23
> 
> 时间：2013-01-28T09:19:15.280
> 
> 标签：python, matplotlib

我开始使用[本](http://www.loria.fr/~rougier/teaching/matplotlib/)教程为初学者学习 MatPlotLib。这是第一个例子。

```
from pylab import *
X = np.linspace(-np.pi, np.pi, 256,endpoint=True)
C,S = np.cos(X), np.sin(X) 
```

如果我将这 3 行写入我的 python 文件并在命令行中执行它（通过键入`python file_name.py`），则不会发生任何事情。没有错误信息，没有情节。

有人知道为什么我看不到剧情吗？

**添加**

当然我需要使用`show`. 但即使我添加以下 3 行：

```
plot(X,C)
plot(X,S)
show() 
```

它仍然没有产生任何东西。

**添加**

这是我现在使用的行：

```
import pylab as p
C = [1,2,3,4]
S = [10, 20, 30, 10]
p.plot(C,S)
p.show() 
```

我仍然有相同的结果（什么都没有）。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-28T10:15:22.110

这可能是后端的问题。的输出是 `python -c 'import matplotlib; import matplotlib.pyplot; print(matplotlib.backends.backend)'`什么？

如果它是“agg”后端，您看到的是预期的行为，因为它是一个非交互式后端，不会在屏幕上显示任何内容，但可以使用 plt.savefig(...)。您应该切换到例如 TkAgg 或 Qt4Agg 才能使用`show`. 您可以在 matplotlib.rc 文件中执行此操作。

@shashank：我在 12.04 和 12.10 上都运行 matplotlib 没有问题。在这两种情况下，我都使用 Qt4Agg 后端。如果您没有设置 matplotlibrc，则使用默认后端。我确信对于 Precise matplotlib repo 是用 TkAgg 构建的。如果 Quantal 版本是用例如 Agg 构建的，那么这将解释差异

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-28T09:22:39.143

您需要调用该函数：

```
show() 
```

更准确地说：

```
pylab.show() 
```

甚至最好不要使用：

```
from pylab import * 
```

宁可这样做：

```
import pylab as p: 
```

进而：

```
X = np.linspace(-np.pi, np.pi, 256,endpoint=True)
C,S = np.cos(X), np.sin(X)

p.plot(C,S)
p.show() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-10-10T07:01:24.050

尝试添加。我使用 Jupyter，这对我有用。

```
 %matplotlib inline 
```

# properties - 如何检查 SharePoint 网站上是否存在 Web 属性？

> ID：14558844
> 
> 赞同：2
> 
> 时间：2013-01-28T09:19:20.723
> 
> 标签：properties, sharepoint-2010, web

我需要使用客户端对象模型检查 SharePoint 网站上是否存在 Web 属性。

```
SP.Web web = clientContext.Site.RootWeb;
clientContext.Load(web.AllProperties, p=> p[propertyName]);
clientContext.ExecuteQuery(); 
```

此代码失败，因为没有名称为 propertyName 的**属性**。在尝试加载此属性之前，我如何检查它是否存在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-27T20:01:50.377

```
Site spSite = clientContext.Site;
clientContext.Load(spSite);
Web spWeb = spSite.RootWeb;
clientContext.Load(spWeb, w => w.AllProperties);
clientContext.ExecuteQuery();
var allProperties = spWeb.AllProperties;
clientContext.Load(allProperties);

// next line checks if property exists
if (!spWeb.AllProperties.FieldValues.ContainsKey("SiteType"))
{
    spWeb.AllProperties["SiteType"] = "BuildWork";
    spWeb.Update();
}
clientContext.Load(spWeb, w => w.AllProperties);
clientContext.ExecuteQuery(); 
```

# android - 如何使用 Alfresco Mobile SDK for Android 更改节点（文件夹或文档）的名称？

> ID：14558847
> 
> 赞同：2
> 
> 时间：2013-01-28T09:19:46.730
> 
> 标签：android, alfresco, setter

我想更改**Alfresco**服务器上的节点名称。

我正在使用**适用于 Android 的 Alfresco Mobile SDK**和网站上提供的文档。我发现没有困难的节点名称：getName（），但是没有setName（）的方法，我想知道一种为节点设置名称的方法。

也许这个功能很有用，但我还不够如何使用属性映射：

```
public Node updateProperties(Node node, Map<String, Serializable> properties) 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T09:39:13.333

使用节点调用该方法，如下所示：

```
 Map<String, Serializable> properties = new HashMap<String, Serializable>();
 properties.put(ContentModel.PROP_NAME, "nodename");

 // like this:
 documentFolderService.updateProperties(myNode, properties); 
```

# windows-phone-8 - InvalidOperation 异常，后台音频代理，Windows Phone 8

> ID：14558851
> 
> 赞同：2
> 
> 时间：2013-01-28T09:20:17.510
> 
> 标签：windows-phone-8, background-audio

我正在尝试将背景 AudioPlayer 添加到 Windows Phone 8 应用程序。

我已经创建了主项目和后台音频代理。我在主项目中添加了对背景音频播放器的引用，并将以下内容添加到应用清单文件中。

```
 <ExtendedTask Name="BackgroundTask">
       <BackgroundServiceAgent Name="myCastsbackgroundaudio" Type="myCastsbackgroundaudio.AudioPlayer" Source="myCastsbackgroundaudio" Specifier="AudioPlayerAgent"/>
    </ExtendedTask> 
```

我已经两次和三次检查了参考文献，我确信它们指向正确的东西。

我正在使用 IsolatedStorage 和以下代码在两个应用程序之间共享信息

```
 private AudioTrack GetNextTrack()
    {
      string  myTrack = settingsHelper.Read("track", string.Empty);
      AudioTrack track = new AudioTrack()
      {
            Title = "Generic Title",
            Source = new Uri("isostore://"+ myTrack, UriKind.Relative)
      };
      return track;
    } 
```

这似乎可以很好地获取曲目名称，然后尝试创建 Audiotrack 以进行播放。此时，应用程序将抛出以下错误。

```
 System.InvalidOperationException was unhandled
      _HResult=-2146233079
      _message=Operation is not valid due to the current state of the object.
      HResult=-2146233079
      Message=Operation is not valid due to the current state of the object.
      Source=Microsoft.Phone
      StackTrace:
        at Microsoft.Phone.BackgroundAudio.AudioTrack.set_Title(String value)
        at myCastsbackgroundaudio.AudioPlayer.GetNextTrack()
        at myCastsbackgroundaudio.AudioPlayer.OnPlayStateChanged(BackgroundAudioPlayer player, AudioTrack track, PlayState playState)
        at Microsoft.Phone.BackgroundAudio.AudioPlayerAgent.CallOnPlayStateChanged(ParameterPropertyBag parameters)
        at Microsoft.Phone.BackgroundAudio.AudioPlayerAgent.Invoke(Uri uri, ParameterPropertyBag parameters)
        at Microsoft.Phone.BackgroundAgentDispatcher.AgentRequest.Invoke()
        at Microsoft.Phone.BackgroundAgentDispatcher.InvocationThread()
        at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
        at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
        at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
        at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
        at System.Threading.ThreadHelper.ThreadStart()
    InnerException: 
```

对于我的一生，我无法弄清楚是什么导致了错误。没有什么是根本原因跳出来的，我已经为其他应用程序做了几次，没有任何问题。

任何建议或见解表示赞赏。

编辑：根据要求，我在下面粘贴了 OnPLayStateChanged 代码

```
 protected override void OnPlayStateChanged(BackgroundAudioPlayer player, AudioTrack track, PlayState playState)
    {
       switch (playState)
        {
            case PlayState.TrackEnded:
                player.Track = GetNextTrack();
                break;
            case PlayState.TrackReady:
                player.Play();
                break;
            case PlayState.Shutdown:
                // TODO: Handle the shutdown state here (e.g. save state)
                break;
            case PlayState.Unknown:
                break;
            case PlayState.Stopped:
                break;
            case PlayState.Paused:
                break;
            case PlayState.Playing:
                break;
            case PlayState.BufferingStarted:
                break;
            case PlayState.BufferingStopped:
                break;
            case PlayState.Rewinding:
                break;
            case PlayState.FastForwarding:
                break;
        }

        NotifyComplete();
    } 
```

还要添加一些附加信息，在 GetNextTrack 中创建音轨时会引发错误，因此此代码块

```
 AudioTrack track = new AudioTrack()
      {
            Title = "Generic Title",
            Source = new Uri("isostore://"+ myTrack, UriKind.Relative)
      }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T10:52:33.020

`AudioTrack`对轨道属性的编辑非常敏感。您应该使用构造函数来设置这些值，否则使用`AudioTrack.BeginEdit/EndEdit`.

所以试试：

```
 var track =
        new AudioTrack(
            new Uri("isostore://"+ myTrack, UriKind.Relative),
            myTrack,
            string.Empty,
            string.Empty,
            null); 
```

# blackberry - 基于 BlackBerry 的推送通知（客户端）

> ID：14558858
> 
> 赞同：0
> 
> 时间：2013-01-28T09:20:47.027
> 
> 标签：blackberry, push-notification

我想为黑莓开发一个推送通知接收应用程序。

我为 iOS 和 Android 平台制作了一些应用程序。在这两个平台中，客户端应用程序都必须向 APN/GCM 注册才能接收通知。作为回报，APN/GCM 返回唯一标识设备的 DeviceToken/RegistrationID。

我无法找到相同的过程是否也适用于黑莓。如果是，在这种情况下我们如何获得唯一的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T19:43:22.220

从以下网址填写表格 [https://www.blackberry.com/profile/?eventId=8121](https://www.blackberry.com/profile/?eventId=8121)

您需要使用公司电子邮件帐户，否则他们将不会回复您。

# objective-c - 使用 StoryBoard 在 Segue 中传递信息

> ID：14558859
> 
> 赞同：0
> 
> 时间：2013-01-28T09:20:50.257
> 
> 标签：objective-c, xcode, ios6

我已经涉足 iOS 应用程序有一段时间了，并没有真正花太多时间来投资它。我现在正用头撞墙，因为我不知道如何让它工作或我没有正确配置什么......我试图让 NewsTableViewController 中引用的正文加载到 NewsView 上的 textView控制器。目前只有标题更新，文本视图只显示 lorum ipsum 文本。

我的理解是，因为我可以在 NSLog 中看到信息，并且如果我尝试将新闻正文文本放在推送视图的标题中，它会显示在标题中 - 我的想法是我未能定义视图，但正如我所说我就是看不到！无论如何，这就是我所拥有的......

这是将数据从 xml 文件加载到第一个视图的表

```
//
//  NewsTableViewController.h
//

#import <UIKit/UIKit.h>
#import "MBProgressHUD.h"

@interface NewsTableViewController : UITableViewController
{
    IBOutlet UITableView *newsTable;
    CGSize cellSize;
    NSXMLParser *rssParser;
    NSMutableArray *stories;
    NSMutableDictionary *item;
    NSString *currentElement;
    NSMutableString *currentName, *currentTitle, *currentDated, *currentBodyText;
}

- (UITableViewCell *) getCellContentView:(NSString *)MyIdentifier;

@end 
```

代码的实现

```
//
//  NewsTableViewController.m
//  

#import "NewsTableViewController.h"
#import "NewsViewController.h"

@interface NewsTableViewController ()

@end

@implementation NewsTableViewController

dispatch_queue_t myQueue;

-(void) showHUD{

    MBProgressHUD *HUD;

    HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
    [self.navigationController.view addSubview:HUD];

    //HUD.delegate = self;
    HUD.labelText = @"News Loading";
    HUD.detailsLabelText = @"please wait...";
    HUD.square = YES;
    HUD.dimBackground = YES;

    [HUD showWhileExecuting:@selector(parserStart) onTarget:self withObject:nil animated:YES];
    //dispatch_async(dispatch_get_main_queue(), ^ {[self parserStart]; });   

}

- (void)viewDidLoad {
    [super viewDidLoad];
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    //NSLog(@"View Did Appear");

    myQueue = dispatch_queue_create("com.xxxxxxxxxxx.xxxxxxxxxx",NULL);
    dispatch_async(dispatch_get_main_queue(), ^ {[self showHUD]; });

}

- (void) parserStart {
    //Insert a small delay for testing purposes
    //[NSThread sleepForTimeInterval:2];

    if ([stories count] == 0) {

        NSString *path = @"http://xxx.xxxxxxxxxxx.xxx/xxxxxx/xxxxxxx.xml";
        [self parseXMLFileAtURL:path];
        //[path release];
    }
    cellSize = CGSizeMake([newsTable bounds].size.width, 60);

    [self.tableView reloadData];

}

- (void)parseXMLFileAtURL:(NSString *)URL {

    if (stories) {
        //[stories release];
        stories = nil;
    }

    stories = [[NSMutableArray alloc] init];

    //you must then convert the path to a proper NSURL or it won't work
    NSURL *xmlURL = [NSURL URLWithString:URL];

    // here, for some reason you have to use NSClassFromString when trying to alloc NSXMLParser, otherwise you will get an object not found error
    // this may be necessary only for the toolchain
    rssParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlURL];

    // Set self as the delegate of the parser so that it will receive the parser delegate methods callbacks.
    [rssParser setDelegate:self];

    // Depending on the XML document you're parsing, you may want to enable these features of NSXMLParser.
    [rssParser setShouldProcessNamespaces:NO];
    [rssParser setShouldReportNamespacePrefixes:NO];
    [rssParser setShouldResolveExternalEntities:NO];

    [rssParser parse];
}

- (void)parserDidStartDocument:(NSXMLParser *)parser {
    //NSLog(@"found file and started parsing");
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError {
    NSString * errorString = [NSString stringWithFormat:@"Unable to download the news feed from web site (Error code %i )", [parseError code]];
    //NSLog(@"error parsing XML: %@", errorString);

    UIAlertView * errorAlert = [[UIAlertView alloc] initWithTitle:@"Error loading content" message:errorString delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [errorAlert show];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    //NSLog(@"found this element: %@", elementName);

    //if (currentElement) {
        //[currentElement release]; 
        //currentElement = nil; 
    //}

    currentElement = [elementName copy];

    if ([elementName isEqualToString:@"article"]) {
        // clear out our story item caches...
        item = [[NSMutableDictionary alloc] init];
        currentName = [[NSMutableString alloc] init];
        currentTitle = [[NSMutableString alloc] init];
        currentDated = [[NSMutableString alloc] init];
        currentBodyText = [[NSMutableString alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    //NSLog(@"found characters: %@", string);
    // save the characters for the current item...
    if ([currentElement isEqualToString:@"article"]) {
        [currentName appendString:string];
    } else if ([currentElement isEqualToString:@"title"]) {
        [currentTitle appendString:string];
    } else if ([currentElement isEqualToString:@"dated"]) {
        [currentDated appendString:string];
    } else if ([currentElement isEqualToString:@"bodytext"]) {
        [currentBodyText appendString:string];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{

    //NSLog(@"ended element: %@", elementName);
    if ([elementName isEqualToString:@"article"]) {
        // save values to an item, then store that item into the array...
        [item setObject:currentName forKey:@"article"];
        [item setObject:currentTitle forKey:@"title"];
        [item setObject:currentDated forKey:@"dated"];
        [item setObject:currentBodyText forKey:@"bodytext"];

        [stories addObject:[item copy]];
        //NSLog(@"adding story: %@", currentName);
    }
}

- (void)parserDidEndDocument:(NSXMLParser *)parser {

}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;

}

#pragma mark Table view methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [stories count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *MyIdentifier = @"MyIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    if (cell == nil)

        cell = [self getCellContentView:MyIdentifier];

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    UILabel *lblTitle = (UILabel *)[cell viewWithTag:101];
    UILabel *lblDate = (UILabel *)[cell viewWithTag:102];
    UILabel *lblBodyText = (UILabel *)[cell viewWithTag:103];

    int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];

    //NSString *articleValue = [[stories objectAtIndex: storyIndex] objectForKey: @"article"];
    NSString *titleValue = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];
    NSString *datedValue = [[stories objectAtIndex: storyIndex] objectForKey: @"dated"];
    NSString *bodytextValue = [[stories objectAtIndex: storyIndex] objectForKey: @"bodytext"];

    lblTitle.text = titleValue;
    lblDate.text = datedValue;
    lblBodyText.text = bodytextValue;

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"NewsSegue"]) {

        // note that "sender" will be the tableView cell that was selected
        UITableViewCell *cell = (UITableViewCell*)sender;
        NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];

        NewsViewController *nvc = [segue destinationViewController];

        int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];

        nvc.title = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];
        nvc.textView.text = [[stories objectAtIndex: storyIndex] objectForKey: @"bodytext"];
        //nvc.textView.text = [self getDataToPass:storyIndex.row];

        // hide the tabBar Controller
        nvc.hidesBottomBarWhenPushed = YES;

        //NSLog(@"Article : %@", [[stories objectAtIndex:storyIndex] objectForKey: @"article"]);
        NSLog(@"Title : %@", [[stories objectAtIndex:storyIndex] objectForKey: @"title"]);
        NSLog(@"Dated : %@", [[stories objectAtIndex:storyIndex] objectForKey: @"dated"]);
        NSLog(@"BodyText : %@", [[stories objectAtIndex:storyIndex] objectForKey: @"bodytext"]);    }
}

- (void)dealloc {
}

@end 
```

现在我正在推进的观点......

```
//
//  NewsViewController.h
//

#import <UIKit/UIKit.h>

@class NewsViewController;

@interface NewsViewController : UIViewController {

    IBOutlet UITextView* textView;
}

@property (nonatomic, retain) IBOutlet UITextView* textView;

@end 
```

然后是这个视图的实现文件。

```
//
//  NewsViewController.m
//

#import "NewsViewController.h"
#import "NewsTableViewController.h"

@interface NewsViewController ()

@end

@implementation NewsViewController

@synthesize textView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.textView = self.title;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

![在此处输入图像描述](../Images/d7969860c31b0e4bbf6176f726691764.png)

编辑：据我了解，Segue 的这一部分是我从附加到解析器的代码的发送部分发送信息的地方：

```
 nvc.title = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];
    nvc.textView.text = [[stories objectAtIndex:storyIndex] objectForKey: @"bodytext"]; 
```

如果我将正文设置为信息显示的标题，那么为什么我认为 textview 有一些不正确的地方，这就是我被卡住的地方吗？

任何帮助将不胜感激，因为我真的不知道出了什么问题！！！我实际上希望我错过了什么非常明显！感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:04:54.507

我在prepareforsegue中添加了以下内容

```
[nvc setTextFieldContentText:[[stories objectAtIndex:storyIndex] objectForKey: @"bodytext"]]; 
```

然后在视图中确实加载了接收视图

```
[textView setText:[self textFieldContentText]]; 
```

并且显然在接收视图头文件中设置属性

```
@property NSString* textFieldContentText; 
```

感谢所有花时间寻找和帮助的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:15:48.540

需要设置 textView 的 text 属性。试试这个：

```
self.textView.text = self.title; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T01:08:10.947

我有点困惑这行代码试图完成什么：`self.textView = self.title;`

但无论如何，我认为您的问题是您正在尝试为尚不存在的视图设置文本。尝试在您的新闻视图控制器中创建一个`NSString`（比如说）并将其设置在您的然后在您的或做`textViewString``prepareForSegue``viewDidLoad``viewWillAppear``self.textView.text = self.textViewString;`

# postgresql - PostgreSQL 用户定义类型成员比较

> ID：14558868
> 
> 赞同：1
> 
> 时间：2013-01-28T09:21:24.393
> 
> 标签：postgresql, plpgsql, composite-types

我有以下表定义：

```
 CREATE TYPE product_limit_type AS (
    product_code varchar(5),
    limit_type varchar(30),
    limit_value numeric(4,0)
);

CREATE TABLE rule_locks (
    session_id bigint,
    rule_id bigint,
    product_limit product_limit_type
); 
```

当我执行以下查询时：

```
DELETE FROM rule_locks
WHERE (session_id=session_id_ AND product_limit.product_code=product_code_); 
```

我从服务器收到此错误：

```
ERROR:  missing FROM-clause entry for table "product_limit"
LINE 1: ...FROM rule_locks WHERE (session_id=session_id_ AND product_li...
                                                         ^ 
```

`session_id_`并且`product_code_`是相应类型的预初始化变量。

它应该如何擦除/修改一行，其单元成员变量满足给定条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:34:30.183

字段名称周围应该有括号以访问其子字段，如下所示：

```
DELETE FROM rule_locks WHERE (session_id=session_id_
     AND (product_limit).product_code=product_code_); 
```

请参阅文档中的[访问复合类型](http://www.postgresql.org/docs/current/static/rowtypes.html#AEN7304)。

# php - 当 jpgraph 旋转 90 度时，如何处理 jpgraph 中 x 轴上的冗长标签。

> ID：14558873
> 
> 赞同：2
> 
> 时间：2013-01-28T09:21:45.527
> 
> 标签：php, jpgraph

我使用 制作了一个水平条形图`jpgraph`，并将其旋转了 90 度。但是 x 轴上的标签被切断，即没有显示整个标签。
我已经设置`$graph->theme = null;`
并且还设置了边距。但没有任何改变。

请建议我处理它的方法。
例如，我`Business management & Administration`在 x 轴上有一个标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T01:04:43.467

尝试在标签中添加一条新线，使其更短，并通过`$graph->Set90AndMargin(a,b,c,d);`边距调整边距可能有点混乱，上边距（即 c）也随图形旋转，因此您现在正在调整右边距，如果这有意义的话.

# c# - C# - RenderControl 的问题，“RegisterForEventValidation 只能在 Render() 期间调用”

> ID：14558875
> 
> 赞同：4
> 
> 时间：2013-01-28T09:21:53.607
> 
> 标签：c#, gridview, asp.net-4.0, rendercontrol

我需要获取`Html`并`GridView`发送电子邮件。

我的`GridView`设计如下所述

```
<div id="DivEmail" class="clear">
    <asp:Repeater ID="rpt1" runat="server" OnItemDataBound="rpt1_ItemDataBound">
        <ItemTemplate>
            <asp:HiddenField ID="TypeID" runat="server" Value='<%# Eval("TypeID") %>' />
            <div id='Handle<%# Eval("TypeName")%>' class="ulheader" >
                <asp:Label ID="lblType" runat="server" Text='<%# Eval("TypeName")%>' ></asp:Label>
            </div>
            <div id="Reuslt<%# Eval("TypeName")%>">
                <asp:GridView ID="grvReport" runat="server" Width="100%" BorderColor="#e4e4e4" border="0" Style="border-collapse: collapse;" ShowHeader="true" CellPadding="5" CellSpacing="0" AutoGenerateColumns="false" EmptyDataText="No Results Found" AllowPaging="false" AllowSorting="false" CssClass="grid grid-iq" BackColor="#FFFFFF">
                    <Columns>
                        <asp:TemplateField HeaderText="Image">
                            <ItemTemplate>
                                <asp:Image ID="thumb" Width="100px" Height="100px" runat="server" ImageUrl='<%# Eval("ImageUrl") %>' 
                                                 ImageAlign="Middle" />
                            </ItemTemplate>
                            ItemStyle CssClass="center" Height="20px" />
                            <HeaderStyle CssClass="grid-th center" Width="100px" VerticalAlign="Top" />
                        </asp:TemplateField>
                        <asp:BoundField DataField="Title" HeaderText="Title">
                            <HeaderStyle Height="20px" Width="20%" CssClass="grid-th-left" VerticalAlign="Top" />
                            <ItemStyle CssClass="left"></ItemStyle>
                        </asp:BoundField>
                        <asp:BoundField DataField="Description" HeaderText="Description">
                            <HeaderStyle Height="20px" Width="28%" CssClass="grid-th-left" VerticalAlign="Top" />
                            <ItemStyle CssClass="left"></ItemStyle>
                        </asp:BoundField>
                        <asp:TemplateField ShowHeader="false" HeaderText="View">
                            <ItemTemplate>
                                <asp:LinkButton ID="lbtnLink" runat="server" CommandArgument='<%# Bind("ID") %>'
                                  OnCommand="lbtnView_OnCommand" Text="View"></asp:LinkButton>
                            </ItemTemplate>
                            <ItemStyle CssClass="center" Height="20px" />
                            <HeaderStyle CssClass="grid-th center" Width="9%" VerticalAlign="Top" />
                        </asp:TemplateField>
                    </Columns>
                    <HeaderStyle CssClass="grid-th" Height="10px" HorizontalAlign="Center" VerticalAlign="Top"></HeaderStyle>
                </asp:GridView>
            </div>
        </ItemTemplate>
    </asp:Repeater>
</div> 
```

为了获取`Html`服务器控制权，我使用下面的代码

```
protected void btnOK_Click(object sender, EventArgs e)
{
    var sb = new StringBuilder();
    DivEmail.RenderControl(new HtmlTextWriter(new StringWriter(sb)));
    EmailContent += sb.ToString();
}

public override void VerifyRenderingInServerForm(Control control)
{
    /* Confirms that an HtmlForm control is rendered for the specified ASP.NET
    server control at run time. */
} 
```

通过这样做，我得到了异常

```
RegisterForEventValidation can only be called during Render() 
```

我在这个问题上搜索了一下，结果显示设置`EnableEventValidation="false"`为`@page directive`. 但我不能使用这个解决方案。

有人可以帮我解决这个问题吗？

# python - Django 1.4 - 重定向到非 HTTP url

> ID：14558876
> 
> 赞同：14
> 
> 时间：2013-01-28T09:21:55.597
> 
> 标签：python, django, url, redirect, django-1.4

我们有一个重定向到非 HTTP url 方案的视图。它用于 iOS 应用程序。但是由于我们已经升级到 Django1.4，所以在执行这个重定向代码时会发生崩溃。它崩溃了

> SuspeciousOperation at /myyrlscheme/
> 
> 使用方案 appdev 不安全地重定向到 URL：

以下是代码：

```
if acode and acode.has_key('access_token'):
    if DOMAIN == 'dev.mywebsite.com':
        return HttpResponseRedirect('appdev://fbconnect?token=%s'%(acode['access_token']))
    else:
        return HttpResponseRedirect('app://fbconnect?token=%s'%(acode['access_token'])) 
```

我可以理解为什么这会像`HttpResponseRedirect`预期的`HTTP(s)`url 方案那样崩溃。我如何告诉 Django 这是一个安全的 url 并且只是盲目地重定向？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-28T09:28:35.493

我相信您需要有一个自定义 Response 对象，请考虑以下内容：

```
response = HttpResponse("", status=302)
response['Location'] = "appdev://..."
return response 
```

# java - 谷歌应用引擎：错误：NOT_FOUND

> ID：14558877
> 
> 赞同：1
> 
> 时间：2013-01-28T09:22:02.223
> 
> 标签：java, google-app-engine

该应用程序运行良好。但是在我们部署了版本 4 之后，它显示了这个错误：

> 错误：NOT_FOUND

没有其他消息。

你可以[在这里](http://pbjtask7.appspot.com/)看到它。部署 Eclipse 时会显示成功消息：*Task7 failed deploy to Google App Engine*

所有以前的版本仍然运行良好。本地版本也可以正常运行。试图找到类似的问题并找到了一些（[1](https://stackoverflow.com/questions/7988409/error-not-found-google-apps-eng) , [2](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/NyiOcAYAKXc) , [3](https://stackoverflow.com/questions/7609659/error-after-deploying-the-application-in-appspot?rq=1)），但没有一个有任何有用的解决方案。

我不知道 web.xml 是否有助于找出解决方案，但我在这里给出。虽然我检查并发现了以前版本（运行良好）中的 web.xml 和这个类似。

```
<?xml version="1.0" encoding="utf-8" standalone="no"?><web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>controller</servlet-name>
        <servlet-class>ebiz.pbj.task7.controller.Controller</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>controller</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>controller</servlet-name>
        <url-pattern>    /start                   </url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>    start   </welcome-file>

    </welcome-file-list>
 <servlet>
  <servlet-name>SystemServiceServlet</servlet-name>
  <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
  <init-param>
   <param-name>services</param-name>
   <param-value/>
  </init-param>
 </servlet>
 <servlet-mapping>
  <servlet-name>SystemServiceServlet</servlet-name>
  <url-pattern>/_ah/spi/*</url-pattern>
 </servlet-mapping>
 <filter>
        <filter-name>ObjectifyFilter</filter-name>
        <filter-class>com.googlecode.objectify.ObjectifyFilter</filter-class>
</filter>
<filter-mapping>
        <filter-name>ObjectifyFilter</filter-name>
        <url-pattern>/*</url-pattern>
</filter-mapping>
</web-app> 
```

如果您需要任何其他代码摘录，请告诉我，我将编辑我的问题。

真的很困惑，突然出了什么问题。欢迎任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:38:01.773

我想我应该分享我的发现，以防其他人遇到同样的问题。

这可能不是问题的唯一原因，因为 404: NOT_FOUND 可能由于各种原因而发生，但这是原因之一，人们应该意识到这一点。

jsp 文件的命名**区分大小写**。在控制器中，我们有这样的代码：

```
if (errors.size() != 0) 
{ return "login.jsp"; } 
```

但我们`login.jsp`被错误地命名为`Login.jsp`- 所以它找不到它。

# python - 用于从臃肿的描述中刮取城市和州的正则表达式

> ID：14558881
> 
> 赞同：0
> 
> 时间：2013-01-28T09:22:23.247
> 
> 标签：python, regex

您可以在此处查看说明[http://www.mdh.org/sites/www/healthapp/jobs/View.aspx?id=10](http://www.mdh.org/sites/www/healthapp/jobs/View.aspx?id=10)

> MDH人力资源
> 
> 格兰特街 525 号
> 
> 伊利诺伊州马科姆 61455
> 
> 电话：309-836-1577
> 
> 传真：309-836-1677

该页面有这个地址，我想使用正则表达式提取城市和州。在这种情况下，它是 Macomb 和 IL。

有一段时间，我使用了以下正则表达式，但在描述包含多个类似模式的情况下它不起作用。

```
(\w+),\s+(\w{2})\s+\d+ 
```

我如何编写正则表达式，它告诉首先提取这些地址行，然后是具有这种模式的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:49:09.230

```
^([A-Z][A-Za-z\s]*),\s+([A-Z]{2})\s+\d{5}$ 
```

我认为这足以让噪音远离。缺点是它可能会避免你想要的。在这种情况下，您可能希望使用像您这样的强度较低的正则表达式来遍历页面。无论如何，使用正则表达式无法达到完美。

它适用于[Javascript](http://rubular.com/r/ZoMBOb4mrE)。调整语法以满足 Python 的需要。

# java - 如何在 JAXRS 中将字段标记为不被 JAXB 扩展

> ID：14558884
> 
> 赞同：1
> 
> 时间：2013-01-28T09:22:26.430
> 
> 标签：java, json, web-services, jaxb, jax-rs

我有2个课程如下：

```
@XmlRootElement
@PersistenceCapable(detachable="true")
public class User {

    @Persistent(primaryKey="true", valueStrategy=IdGeneratorStrategy.IDENTITY)
    private Long id;

    private String firstname;
    private String lastname;
    private UserDetails userDetails;
...
} 
```

和

```
@XmlRootElement
@PersistenceCapable(detachable="true")
public class UserDetails {
    private String streetaddress;
    private String address;
    private String city;
    private int pincode;
    private Date dateofbirth;
...
} 
```

我只需要检索用户对象，而不需要在一个 JAXRS 函数中包含 userdetails，并且在另一个 JAXRS 函数中包含用户对象及其附加的 userdetails 对象，如图所示。

```
//UserManager.java
public List<User> getUsers() {
    javax.jdo.Query q = pm.newQuery("SELECT FROM "+ User.class.getName());
    List<User> users = (List<User>) q.execute();
    return users;
} 
```

和 JAXRS 服务：

```
@GET
@Produces({MediaType.APPLICATION_JSON})  
public List<User> getUsers() {        //Retrieves all users and user details
    UserManager um=new UserManager(); //working perfectly
    return um.getUsers();
}

@GET
@Produces({MediaType.APPLICATION_JSON})  
public List<User> getUsers() {        //should retrieve user only, but how?
    UserManager um=new UserManager();
    return ?????
} 
```

如何防止 UserDetails 对象被 JAXRS 和 JAXB 扩展为第二个功能？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:31:41.093

您可以结合使用 JDO 获取计划和生命周期策略。

为您的 userDetails 创建一个命名提取组，例如

```
@FetchGroup(name="details", members={@Persistent(name="userDetails")}) 
```

当您想要一切时，您不必在技术上做任何事情，因为 JAXB 正在导航图表，但要完成，您将指定此获取计划并根据获取计划使返回的对象瞬态，例如：

```
pm.getFetchPlan().addGroup("details");
[...]
return (List<User>)pm.makeTransientAll(um.getUsers(), true); // use fetch plan 
```

当您想要浅提取时，请使用默认提取计划并使您返回的对象瞬态，例如：

```
return (List<User>)pm.makeTransientAll(um.getUsers(), true); // use fetch plan 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:38:20.207

如果您从两个函数返回相同的类型，那么 jaxb 无法帮助您从一种方法中隐藏信息并在第二种方法中显示。

有两种方法可以实现这一点：

1）要么从不聚合用户详细信息的第二个函数返回不同的用户对象。2) 在第二个函数中编写一个不填充用户详细信息数据的查询。

# c# - 将用户控件停靠在 Tab 组件中

> ID：14558886
> 
> 赞同：0
> 
> 时间：2013-01-28T09:22:36.110
> 
> 标签：c#, .net

我正在尝试将两个用户控件停靠在选项卡组件中。我已经在我的选项卡组件中设置了停靠属性来填充。但是当我最大化窗口时，用户控件中的组件保持在选项卡组件中的相同位置。我应该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:29:19.070

当您将控件停靠在父组件中时，请确保控件的每个边缘也在父组件的每个边缘中。

# javascript - 改变动画速度

> ID：14558888
> 
> 赞同：12
> 
> 时间：2013-01-28T09:22:42.653
> 
> 标签：javascript, jquery

我正在创建一个新的“打地鼠”风格的游戏，孩子们必须根据问题打出正确的数字。到目前为止一切都很好，我有一个计时器，计算正确和错误的答案，当游戏开始时，我有一些称为“字符”的 div，它们在设定的时间随机出现在容器中。

我去掉了“播放”按钮，并用“简单”、“中等”和“困难”代替了它。单击模式时，我希望更改速度。三个按钮共享类“game_settings”

这是处理动画的代码

```
function randomFromTo(from, to) {
    return Math.floor(Math.random() * (to - from + 1) + from);
}

function scramble() {
    var children = $('#container').children();
    var randomId = randomFromTo(1, children.length);
    moveRandom("char" + randomId);
}

var currentMoving = [];

function moveRandom(id) {
    // If this one's already animating, skip it
    if ($.inArray(id, currentMoving) !== -1) {
        return;
    }

    // Mark this one as animating
    currentMoving.push(id);

    var cPos = $('#container').offset();
    var cHeight = $('#container').height();
    var cWidth = $('#container').width();
    var bWidth = $('#' + id).width();

    var bHeight = $('#' + id).css('top', '395px').fadeIn(100).animate({
        'top': '-55px'
    }, 6000).fadeOut(100);

    maxWidth = cPos.left + cWidth - bWidth;
    minWidth = cPos.left;
    newWidth = randomFromTo(minWidth, maxWidth);

    $('#' + id).css({
        left: newWidth
    }).fadeIn(1000, function () {
        setTimeout(function () {
            $('#' + id).fadeOut(1000);

            // Mark this as no longer animating                
            var ix = $.inArray(id, currentMoving);
            if (ix !== -1) {
                currentMoving.splice(ix, 1);
            }
            window.cont++;
        }, 1000);
    });
} 
```

我将如何使这些设置根据开始时按下的难度进行更改？

小提琴：http: [//jsfiddle.net/pUwKb/53/](http://jsfiddle.net/pUwKb/53/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T09:37:42.727

您的按钮不共享“game_ettings”类，它们与“game_settings”类位于 div 内，因此如果您在按钮之间单击，游戏也会开始。像这样修改它：

```
// remove this line
$(".game_settings").find('input').click(

// replace it with...
var AnimationSpeed = 6000;

$(".game_settings").find('input').click(function () {
        // here you could set a different timer value for each variant
        // or simply send the classname to startplay and handle the
        // settings there.
        switch($(this).attr('class')) {
          case 'easy':
            AnimationSpeed = 6000;
            break;
          case 'medium':
            AnimationSpeed = 3000;
            break;
          case 'hard':
            AnimationSpeed = 1000;
            break;
        }
        startplay();
 }); 
```

在您的计时器功能中删除该行：

```
$("#btnstart").bind("click", startplay); 
```

在你的函数 moveRandom 中，你使用 AnitmationSpeed：

```
var bHeight = $('#' + id).css('top', '395px').
              fadeIn(100).animate({'top': '-55px'}, AnimationSpeed).
              fadeOut(100); 
```

[你可以在这里](http://jsfiddle.net/xgDZ4/2/)找到一个工作演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:48:26.213

我认为您要做的是根据游戏难度设置 timeInterval 。这就是我认为你可以让它工作的方式。

要进行的更改：

**html:**

```
//Change
<div class="game_settings">
    <div><input class="easy" type="button" value="Easy"></div>
    <div><input class="medium" type="button" value="Medium"></div>
    <div><input class="hard" type="button" value="Hard"></div>
</div>

//To
<div class="game_settings">
    <div><input class="game-speed" id="easy" type="button" value="Easy"></div>
    <div><input class="game-speed" id="medium" type="button" value="Medium"></div>
    <div><input class="game-speed" id="hard" type="button" value="Hard"></div>
</div> 
```

**脚本：**

```
//Change
$(".game_settings").click(function () {
    startplay();
});

//To
$(".game-speed").click(function () {
    startplay($(this).attr('id'));
});

//Change in startPlay()
   startPlay()

   play = setInterval(function () {
        if (window.cont) {
            window.cont--;
            scramble();
        }
    }, 500);

//To
    startplay(speed_check)  // As it is now expecting a variable

    if(speed_check == 'easy'){
        play = setInterval(function () {
            if (window.cont) {
                window.cont--;
                scramble();
            }
        }, 2000);
    }
    else if(speed_check == 'medium'){
        play = setInterval(function () {
            if (window.cont) {
                window.cont--;
                scramble();
            }
        }, 1000);
    }
    else if(speed_check == 'hard'){
        play = setInterval(function () {
            if (window.cont) {
                window.cont--;
                scramble();
            }
        }, 400);
    }
    else{
        play = setInterval(function () {
            if (window.cont) {
                window.cont--;
                scramble();
            }
        }, 1000);
    } 
```

根据需要设置时间间隔。

注意：这只是一个想法。您当然可以提高效率，因为您比其他任何人都更了解您的代码。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-30T15:54:38.050

在 DotNet 中，您需要“停止”情节提要并通过速度修改重新启动。

```
Dim sb as Storyboard = ctype(Me.FindRessources("Storyboard1"), Storyboard)
sb.Stop
Select Case Level
  Case "easy": sb.SpeedRatio = 0.75
  Case "medium": sb.SpeedRatio = 1
  Case "hard": sb.SpeedRatio = 2.0
End Select

sb.Begin 
```

也许它在 JavaScript 中是一样的？

# android - 如何捕捉 Android ListView 的 notifydatasetchanged？

> ID：14558894
> 
> 赞同：0
> 
> 时间：2013-01-28T09:23:01.937
> 
> 标签：android, listview

我写了一个 ListView 适配器扩展 BaseAdapter。在此适配器中，我可以单击 ListView Row 中的 Button 以从数据源中删除行项。

现在我遇到了一个问题。ListView外面有一个TotalAmount，当行项被移除时，这个TotalAmount不会改变。

当我删除适配器中的行项目时，如何进行更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:25:04.663

在您的提供商中，当执行删除成功时，您应该通知

```
getContext().getContentResolver().notifyChange(Your_URI, null); 
```

在您的 TotalAmount 中注册一个观察者

```
getContentResolver().registerContentObserver(uri, bool, observer) 
```

# mysql - 用于依赖项的术语

> ID：14558904
> 
> 赞同：1
> 
> 时间：2013-01-28T09:23:35.233
> 
> 标签：mysql, database-design, graph, dependencies, naming-conventions

用于引用依赖项的公认术语是什么？

我一直在使用`parent`and `child`，其中父母依赖于他们的孩子，但是当其他人认为孩子依赖于他们的父母时，这引起了一些混乱。可以说，两者在现实生活中都是正确的。

我们发现这`dependent`还不够清楚——你必须认真思考它指的是哪一端。

使用或更好地讨论此类术语的文档链接的奖励积分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:42:11.187

我只听说过一个孩子是受抚养人。这也适用于现实生活（不包括一些涉及疾病或老年的场景）。从在数据库中建模继承权，到年底填写我的纳税申报表，再到更换尿布（尿布），我的经验是，孩子始终是父母的受抚养人。

如果您需要更彻底地描述实体关系，则可以使用[ER 建模](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)。或者关于属性级别的[功能依赖](http://en.wikipedia.org/wiki/Functional_dependency)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:44:21.107

“父母”和“孩子”都很好。

在物理外键级别，有时会使用术语“引用”和“引用”。

在讨论逻辑模型中的 X:Y 关系时，有时会使用基数。例如，1:N 关系可能使用以下术语：“1 个端点”和“N 个端点”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:02:53.390

最后我们决定使用`item`and `depends_on`。它易于阅读并避免任何歧义。

您可以使用`dependent`and `depends_on`，但它的读取效果不佳。

有人建议`requires`-`enables`我真的很喜欢这个。

# .net - 表格中的代表 如何销毁

> ID：14558907
> 
> 赞同：0
> 
> 时间：2013-01-28T09:23:44.667
> 
> 标签：.net, vb.net, winforms, memory-leaks, delegates

我在 WindowsForms 解决方案中有一个存在内存泄漏问题的表单。表单通过 MainForm 上的按钮打开。多次打开后，未处理的异常会终止应用程序。

该表单在 MainForm 中有一个私有实例，并按照某些逻辑规则关闭或重新创建。

该子窗体包含来自 MainForm 的一些委托。我想代表可能会导致内存泄漏。可能当表单关闭或重新创建时，古老的实例可以保存在与代表链接的内存中。

如何以及在何处“销毁”表单中的代表？

```
Protected Overrides Sub Finalize() ' here?

Protected Overrides Sub OnHandleDestroyed(e As System.EventArgs) ' or here
  Me._MyDelegate1 = Nothing
  Me.DlgDelegate1 = Nothing
  Me.DlgDelegate2 = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:03:08.630

覆盖该`Form.Dispose`方法是最适合进行此类清理的地方。它可能已经在设计器中被覆盖，在这种情况下，您需要将其移动到您的代码文件中。

这是关于覆盖的另一篇文章`Fom.Dispose`，应该会有所帮助。[如何扩展 WinForm 的 Dispose 方法？](https://stackoverflow.com/questions/1052147/how-do-i-extend-a-winforms-dispose-method)

# asp.net - 识别唯一的浏览器/选项卡实例，例如用户在 mysite.com 上打开了 2 个选项卡 - 识别每个

> ID：14558912
> 
> 赞同：3
> 
> 时间：2013-01-28T09:23:54.110
> 
> 标签：asp.net, .net, browser, identify

在过去的几天里，我已经阅读[了这个和许多其他链接。](http://www.pcreview.co.uk/forums/unique-browser-id-t3951101p2.html)

问题是我需要为用户为 mysite.com 打开的每个选项卡或浏览器设置一个唯一标识符（例如站点名称）

我不能使用唯一的会话，例如当我打开 mysite.com 并在会话中选择了“胡萝卜”时，mysite.com 的所有其他选项卡/浏览器现在在特定会话值中都有“胡萝卜”。

但是服务器显然仍然唯一地标识每个浏览器/选项卡。有没有办法获取这个唯一的浏览器/标签 ID，或者创建一个唯一的 ID？

我不是指通过 JavaScript 自己生成唯一 ID，我在 StackOverflow 上看到了一些很好的示例。问题是我需要在每个母版页上实现它并在母版页/非母版页之间携带它。例如，在我的例子中，它不起作用，因为我可以打开浏览器，如果我在几个页面上运行它 20 次，它会生成 20 个不同的 ID，例如当我无法跨端口传输值时。

所以请不要浪费大家的时间，这不是一个随机的 GUID 创建问题，这个问题涉及为每个选项卡/浏览器获取一个唯一的可重新创建 ID（如果它丢失），最好通过到服务器的链接来识别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T09:50:59.967

这是你触及的一个大话题。如果您只需要在表单提交期间保留 ID，则可以采用客户端`window.name`属性的方法，并使用该`window.onload`值传播隐藏字段。但是当用户关注超链接（点击网站上的链接）时，这将不起作用。onload：检查是否`window.name`设置；如果未设置，则分配一个 GUID。如果设置，设置隐藏字段= `window.name`。因此，在提交时，您的表单将具有带有`window.name`GUID 的隐藏字段。

您也可以使用 HTML5 `window.sessionStorage`，它可以解决您的所有问题，但不适用于旧版浏览器。

如果您需要支持向后浏览器和非提交类型，那么您将需要在客户端编写一些非常复杂的 cookie/会话管理。不漂亮。只希望以上2就足够了。

# google-apps-script - 当我尝试运行我的脚本时出现错误。Coogle 电子表格

> ID：14558917
> 
> 赞同：0
> 
> 时间：2013-01-28T09:24:03.150
> 
> 标签：google-apps-script

我有一个脚本，但它不起作用：

```
 function onOpen(e){
  var sheet = Spreadsheet.getActiveSheet();

  //Load all the URLs
  var urls = sheet.getRange("A:A").getValues();

  //Initialize array for content
  var text = [];

  //Loop through URLs
  for(var i = 0; i < urls.length; i += 1){
    //Fetch the webpage, push the content to the array (inside an array since it needs to be 2d)
    text.push(
      [UrlFetchApp.fetch(urls[i][0]).getContentText()]
    );
  }
  //Store text in spreadsheet
  sheet.getRange("B:B").setValues(text);
} 
```

它继续前进，但卡在字符串 13 中：指定了没有值的属性：url（字符串·13）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:39:10.207

第二行有错误。它应该是：

```
var sheet = SpreadsheetApp.getActiveSheet(); 
```

# mysql - 如何连接两个表，保留不满足 JOIN 条件的行？

> ID：14558921
> 
> 赞同：2
> 
> 时间：2013-01-28T09:24:16.393
> 
> 标签：mysql, sql, select

```
ticket                      
+----------+--------+
| ticketID | assign |
+----------+--------+
|     1015 | NULL   |
|     1020 | James  |
|     1021 | Nick   |
+----------+--------+

staffinfo
+---------+-------+
| staffID | staff |
+---------+-------+
|       1 | Jane  |
|       2 | James |
|       3 | Nick  |
|       4 | Cole  |
+---------+-------+

SELECT staff,COUNT(*) as count FROM staffinfo,ticket
WHERE ticket.assign = staffinfo.staff
GROUP BY staff

result:
    +-------+-------+
    | staff | count |
    +-------+-------+
    | James |     1 |
    | Nick  |     1 |
    +-------+-------+ 
```

工作正常，但事实上我需要类似的东西：

```
+-------+-------+
| staff | count |
+-------+-------+
| James |     1 |
| Nick  |     1 |
| Jane  |     0 |
| Cole  |     0 |
+-------+-------+ 
```

COUNT 不计算表中没有的记录，而且由于我刚开始学习 SQL，所以我想问一下是否有一种方法可以算作上述结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T09:25:22.050

你应该使用`LEFT JOIN`

```
SELECT  a.staff,    COUNT(b.assign) as count 
FROM    staffinfo a
        LEFT JOIN ticket b
            ON b.assign = a.staff
GROUP   BY a.staff 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ee4e3/1)

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:45:45.460

采用`LEFT JOIN`

关键字返回左表 (table_name1) 中的`LEFT JOIN`所有行，即使右表 (table_name2) 中没有匹配项。

```
SELECT staffinfo.staff, count(ticket.assign)
FROM staffinfo
LEFT JOIN ticket
ON ticket.assign =staffinfo.staff
GROUP BY staffinfo.staff 
```

关键字返回左表 (staffinfo) 中的`LEFT JOIN`所有行，即使右表 (ticket) 中没有匹配项。

# ios - 架构 i386 的未定义符号 - 自定义类

> ID：14558922
> 
> 赞同：1
> 
> 时间：2013-01-28T09:24:24.833
> 
> 标签：ios

我创建了一个非常简单的自定义类，实际上只是一个模型，用于保存一些有关 NSURLConnections 的数据，以便我可以跟踪它们。目的是拥有它们的数组，即 ConnectionInfo 对象的数组。

```
@interface ConnectionInfo : NSObject

@property NSString *connectionDescription;
@property int *campaignID;
@property int *requestType; //0 - Score, 1 - Image

@end 
```

我没有费心把它放到它自己的文件中，因为它很简单，所以它就在我的视图控制器的顶部。

无论如何，Xcode 并没有给我任何问题，但是，一旦我想通过

```
ConnectionInfo *thisConnection = [[ConnectionInfo alloc] init]; 
```

它引发以下两个错误：

> 架构 i386 的未定义符号：“_OBJC_CLASS_$_ConnectionInfo”，引用自：ServerTestViewController.o 中的 objc-class-ref ld：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

我在 Stackoverflow 上看到的所有内容都是关于人们在导入库时遇到问题的，但这是我自己的自定义类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T11:00:31.717

您缺少该类的实现，请按如下方式创建一个

```
@implementation ConnectionInfo
@end 
```

**为什么需要这个？**

您之前所做的只是声明类接口。所有这些都是通知类的用户（和编译器）在实现中期望什么。它没有声明类是如何工作的。没有实现，您就没有要使用的类！

**为什么实现是空的？**

你可能认为把一个空白的实现放进去是没有意义的。这将通知编译器如何创建对象。虽然您的实现什么都不做，但您继承自`NSObject`，这与对象创建有很大关系。此外，使用最新的 Xcode，您无需手动`@synthesize`设置属性，因此在您声明`@implementation`.

# java - 哪个版本的hibernate支持jpa 2.1？

> ID：14558931
> 
> 赞同：38
> 
> 时间：2013-01-28T09:25:12.033
> 
> 标签：java, hibernate, jpa, version

目前我正在使用`JPA 2.0`with `hibernate 3.6`。我试图搜索但找不到，谁能列出`JPA 2.1`哪些版本的hibernate支持？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-01-03T18:20:57.227

Hibernate 4.3.0.Final（2013 年 12 月 16 日）是第一个支持 jpa 2.1 的生产就绪版本。

请参阅：http: [//in.relation.to/Bloggers/HibernateORM430FinalRelease](http://in.relation.to/Bloggers/HibernateORM430FinalRelease)

> 4.3 的主要焦点是对 JPA 2.1 的支持，过去几个月的大部分工作都集中在 JPA 2.1 的新特性上。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-28T09:31:00.810

根据[Hibernate 的版本列表](http://hibernate.org/orm/releases/)，JPA 2.1 将被版本 4.3 或 5.0 支持

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-28T09:33:29.943

鲍里斯是对的，虽然你可以尝试使用，

```
<dependency>
    <groupId>org.hibernate.javax.persistence</groupId>
    <artifactId>hibernate-jpa-2.1-api</artifactId>
    <version>1.0.0.Final</version>
</dependency> 
```

在您`pom.xml`切换到 Hibernate 4.3.x 或 Hibernate 5.x 时。

# iphone - 行分隔符未显示在设备上

> ID：14558932
> 
> 赞同：0
> 
> 时间：2013-01-28T09:25:13.723
> 
> 标签：iphone, ios, ipad

我在用

```
UIColor *color = [UIColor colorWithPatternImage:[UIImage imageNamed:@"seprator.png"]];
[self.tableView setSeparatorColor:color]; 
```

这在模拟器上运行良好，但图像未显示在设备上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:42:36.250

尝试

```
[self.tableView setBackgroudView:nil]; 
```

然后

```
[theTableView.setSeparatorStyle:UITableViewCellSeparatorStyleSingleLine]; 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:02:39.783

清理设备中的项目 command+shift+K（在 XCode 中选择设备），然后再次运行项目，以便映像将复制到设备中正在运行的构建中。

# sql-server - 当主键在另一个表中作为外键存在两倍时如何查询数据？

> ID：14558944
> 
> 赞同：0
> 
> 时间：2013-01-28T09:25:59.897
> 
> 标签：sql-server, join, distinct

我正在尝试查询数据，但它两次显示相同的记录如何区分？

表格1：`UserBasics`

```
user_Id , user_Fullname , user_Zip , user_Need
--------------------------------------------------------------------
10    Alberto Cesaro    98001    Sales, Marketing & Public Relations 
```

表 2：`UserProfession`

```
Prof_ID , Company , Designation
----------------------------------
10    Young's   Marketing Manager
10    Young's   Regional Manager 
```

我的程序：

```
CREATE PROC P @Zip         VARCHAR(20)=NULL,
              @Company     VARCHAR(200)=NULL,
              @Designation VARCHAR(100)=NULL,
              @Interest    VARCHAR(200)=NULL,
              @CurrentID   VARCHAR(200)=NULL
--@JobFunc varchar(200)=NULL
AS
  BEGIN
      -- SET NOCOUNT ON added to prevent extra result sets from
      -- interfering with SELECT statements.
      SET NOCOUNT ON;

      SELECT ub.user_Id,
             ub.user_Fullname,
             up.Designation,
             up.Company
      FROM   UserBasics UB
             INNER JOIN UserProfession up
               ON ub.user_Id = up.Prof_ID
      WHERE  ( @Zip IS NULL
                OR ub.user_Zip LIKE '%' + @Zip + '%' )
             AND ( @Interest IS NULL
                    OR ub.user_Need LIKE '%' + @Interest + '%' )
             AND ( @Company IS NULL
                    OR up.Company LIKE '%' + @Company + '%' )
             AND ( ub.user_Id != @CurrentID )
             AND ( @Designation IS NULL
                    OR up.Designation LIKE '%' + @Designation + '%' )
  END 
```

如上使用存储过程只是为了使条件和变量清晰

如何显示每个用户数据对您的建议的不同希望？

谢谢 ！

编辑：

输出应该看起来相似，

```
10  Alberto Cesaro          Marketing Manager,Regional Manager  Young's 
```

第二次编辑：

我已经完成了公司名称，但是如果我想在用户职业表列上使用过滤器，那么我将如何关联它？我的查询，

```
 SELECT
     user_Id, user_Fullname,
     STUFF(
         (SELECT ', ' + Designation 
          FROM   UserProfession as up
          WHERE  Prof_ID = a.user_Id
          FOR XML PATH (''))
          , 1, 1, '') Designation,
      STUFF(
         (SELECT ', ' + Company 
          FROM   UserProfession
          WHERE  Prof_ID = a.user_Id
          FOR XML PATH (''))
          , 1, 1, '')  AS Company
FROM UserBasics AS a
where  (@Zip is null or a.user_Zip like '%'+@Zip+'%') and
    (@Interest is null or a.user_Need like '%'+@Interest+'%') and
    --  (@JobFunc is null or m.mentor_jobFunction= @JobFunc) and
    (@Company is null or up.Company like '%'+@Company+'%') and
    (a.user_Id != @CurrentID) and
    (@Designation is null or up.Designation like '%'+@Designation+'%')
--where   a.user_Zip like '%90005%'
-- WHERE clause here
GROUP BY user_Id, user_Fullname 
```

- 因为我在 where 子句中的 Company 和 Designation 出现错误希望最后的建议？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:54:41.360

```
SELECT
     user_Id, user_Fullname,
     STUFF(
         (SELECT ', ' + Designation
          FROM   UserProfession
          WHERE  Prof_ID = a.user_Id
          FOR XML PATH (''))
          , 1, 1, '')  AS DesignationList
FROM UserBasics AS a
-- WHERE clause here
GROUP BY user_Id, user_Fullname 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/ac22e/1)

# asp.net - 通过下拉列表和网格视图在 SqlDataSource 中动态排序

> ID：14558947
> 
> 赞同：1
> 
> 时间：2013-01-28T09:26:19.503
> 
> 标签：asp.net, sql, sqldatasource

我有一个连接到 DataSqlSource 的网格视图。我想通过下拉列表动态排序我的查询。例如按日期、姓名、家庭等。我还在查询中加入了一些表。我在我的 DataSqlSource 中使用此代码：

```
 SELECT AddTitle.Title, SubmitManuscript.Status, AddArticleType.Type, AddArticleType.UserName, AddArticleType.ArticleType, SubmitManuscript.date, SubmitManuscript.ArticleNum, AddArticleType.ArticleID, CONVERT (VARCHAR(10), SubmitManuscript.date, 103) AS date1, OtherWritter.ArticleID AS Expr1, OtherWritter.name, OtherWritter.family, AddArticleType.CheckFinish FROM AddArticleType INNER JOIN AddTitle ON AddArticleType.ArticleID = AddTitle.ArticleID INNER JOIN SubmitManuscript ON AddArticleType.ArticleID = SubmitManuscript.ArticleID INNER JOIN OtherWritter ON AddTitle.ArticleID = OtherWritter.ArticleID WHERE (AddArticleType.ArticleID IN (SELECT ArticleID FROM AddUpload_4 AS AddUpload_4_1 WHERE (AddArticleType.CheckFinish = '0'))) AND (AddArticleType.Type = @Type) AND (SubmitManuscript.Status = 'Accept') AND 
(OtherWritter.MainAuthor = 'Yes') ORDER BY '[' + @SortOrder + ']' DESC 
```

但这对我不起作用，也没有排序发生！

我也尝试了这段代码，这次它给了我一个错误：这是代码：

```
SELECT ...
FROM ...
ORDER BY
    CASE WHEN @order=Country THEN Country  END DESC,
    CASE WHEN @order= City THEN City  END ASC,
    CASE WHEN @order= name THEN name  END ASC 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:01:38.393

我想应该是：

```
SELECT ...
FROM ...
ORDER BY
    CASE WHEN @order='Country' THEN Country  END DESC,
    CASE WHEN @order='City' THEN City  END ASC,
    CASE WHEN @order='name' THEN name  END ASC 
```

# storage - 增量备份 - 如何识别更改

> ID：14558950
> 
> 赞同：0
> 
> 时间：2013-01-28T09:26:36.303
> 
> 标签：storage, backup-strategies

已经浏览了几个链接，虽然它解释了什么是增量备份，但自上次确定备份以来有何不同？是文件的大小还是数据的大小...谁能解释...否则请指导我参考相同的内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:35:53.740

在指定的参考资料中找到以下信息。希望对sm1有帮助。

```
The client considers a file changed if any of the following attributes changed since the last backup:
File size
Date or time of last modification
Extended Attributes
Access Control List

If only the following items change, they are updated without causing the entire file to be backed up to the server:

File owner
File permissions
Last access time
Inode
Group ID 
```

参考： http: [//publib.boulder.ibm.com/infocenter/tsminfo/v6/index.jsp ?topic=%2Fcom.ibm.itsm.client.doc%2Fc_bac_fullpart.html](http://publib.boulder.ibm.com/infocenter/tsminfo/v6/index.jsp?topic=%2Fcom.ibm.itsm.client.doc%2Fc_bac_fullpart.html)

# css - 如何将表格拉伸到整页高度

> ID：14558951
> 
> 赞同：0
> 
> 时间：2013-01-28T09:26:39.193
> 
> 标签：css, html, scroll

现在这可能非常简单，但我是 HTML/CSS 的新手，无法弄清楚。这是HTML：

```
<html>
    <body>
        <table>
            <tr>
                <td style="width: 275px;background: gray;overflow: scroll">
                    <div style="height: 1000px;width: 250px; background: green;" />
                </td>
                <td style="width: 620px;background: yellow;">
                    def
                </td>
            </tr>
        </table>
    </body>
</html> 
```

和CSS：

```
html,body,table
{
    height: 100%;
    max-height: 500px;
} 
```

我想要的是让这张桌子伸展到整页高度；如果左侧单元格的内容大于整个页面高度，则左侧单元格中应出现一个简单的滚动条，让用户滚动浏览它们。但相反，我的代码使整个表格变大，内部滚动条似乎永远无法工作。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-28T09:35:47.103

稍微改变一下你的样式：

```
<td style="width: 275px;background: gray;overflow: scroll; height: 100%">
   <div style="height: 100%;width: 250px; background: green;float: left" id="test" />
</td>
<td style="width: 620px;background: yellow;">
   def
</td> 
```

并删除`max-height`评论中提到的@Allan Kimmer Jensen

```
html,body,table
{
    height: 100%;
} 
```

[工作示例](http://jsfiddle.net/z29hT/)

**更新**

将 ID 添加到 div 和一些 javascript：

```
<script type="text/javascript">
        function elementHeight(element) {
            var height = 0;
            var body = window.document.body;
            if (window.innerHeight) {
                height = window.innerHeight;
            } else if (body.parentElement.clientHeight) {
                height = body.parentElement.clientHeight;
            } else if (body && body.clientHeight) {
                height = body.clientHeight;
            }
            document.getElementById(element).style.height = height + "px";
        }
        elementHeight('test');
</script> 
```

[更新的小提琴](http://jsfiddle.net/z29hT/3/)

# php - 在 cakephp 中传递变量

> ID：14558953
> 
> 赞同：2
> 
> 时间：2013-01-28T09:26:48.523
> 
> 标签：php, cakephp

我正在尝试将登录到我网站的人的 ID 传递给我。我正在使用 Auth 登录 cakephp。那么谁能告诉我如何在登录期间传递值并在主页上检索它？我是 cakephp 新手。

这是我尝试过的。

应用程序控制器.php

```
class AppController extends Controller {
//...

public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' => array('controller' => 'members', 'action' => 'home',$member['Member']['id']),
        'logoutRedirect' => array('controller' => 'members', 'action' => 'index')
    )
); 
```

成员控制器.php

```
public function home($id = null) {
    $this->Member->id = $id;
} 
```

主页.ctp

```
<div align='center'><h2>Hi user welcome to home page </h2></div>
<?php
 //I am just trying to print the id of the logged in person
echo $this->Form->value('User.id');
?>
<?php
echo $this->Html->link('LogOut',array('controller'=>'users','action'=>'logout')); 
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:42:14.703

```
echo $this->Form->value('User.id'); 
```

是[FormHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)的一部分。

如果您想预先填写表格，请使用约定。只需像这样创建一个输入字段：

```
echo $this->Form->input('User.id'); 
```

如果`$this->request->data`包含此值 ( `$this->request->data['User']['id']`)，它将自动填写您的表单。

为了从[AuthComponent](http://api20.cakephp.org/class/auth-component)中检索值，您可以简单地执行类似的操作`$userName= $this->Auth->user('name');`（只需确保“用户”数据库中存在“名称”列）。

为了将变量传递给您的视图，您可以简单地使用在中定义的方法[集](http://api20.cakephp.org/class/controller#method-Controllerset)`Controller`，该方法由`AppController`扩展 扩展`FooBarsController`。

如果您想将此变量设置为您的视图（如前所述），请使用`set`.

```
$this->set('userName', $userName); 
```

在您看来，您现在可以执行以下操作：

```
printf('Welcome %s', $userName); 
```

*   [博客教程让您入门](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html)
*   [认证组件](http://api20.cakephp.org/class/auth-component)
*   [表单助手](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)
*   [视图的工作原理](http://book.cakephp.org/2.0/en/views.html)
*   [控制器如何工作](http://book.cakephp.org/2.0/en/controllers.html)
*   [模型如何工作](http://book.cakephp.org/2.0/en/models.html)

# android - Android - 如何在图库中保存照片

> ID：14558954
> 
> 赞同：1
> 
> 时间：2013-01-28T09:26:48.730
> 
> 标签：android, image-gallery

我需要在图库中保存一张照片。如果我将照片放在 SD 卡上，下面的代码会有所帮助。但是如果我没有sdcard怎么办？只有字节或临时文件？

```
MediaStore.Images.Media.insertImage(getContentResolver(), src, title , description); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:41:29.463

试试下面的代码：

```
FileOutputStream ostream = new FileOutputStream(file);
            bitmap.compress(CompressFormat.JPEG, 90, ostream);
            ostream.flush();
            ostream.close();
            String url = Images.Media.insertImage(getContentResolver(), bitmap, "title", null); 
```

# php - 在php中将表数据显示为列而不是行

> ID：14558956
> 
> 赞同：0
> 
> 时间：2013-01-28T09:26:53.797
> 
> 标签：php, sql, postgresql

我对 postgres 数据库有多个查询，我希望将数据返回到该数据库。当前在两列中的几行上返回数据，这是错误的。我希望数据显示在一行和几列中。查询是这样的：

```
<?php

$sql = "Select ceil(SUM (a.CALLDURATION::integer) / 60) AS minutes,  sum(a.alltaxcost::integer) AS revenue
FROM cdr_data a,COUNTRY_CODES b
WHERE  a.CALLSUBCLASS = '002'
     AND a.CALLCLASS = '008'
and a.zoneiddest::integer > 0
AND SUBSTR (a.CALLEDNUMBER, 1, 2) NOT IN
('77', '78', '75', '70', '71', '41', '31', '39', '76','79')

and not substr(a.zoneiddest,1,3) in ('254','255','211','257','250','256')
and trim(a.zoneiddest)  = trim(b.country_code)

union

select  ceil(sum(callduration::integer/60) )as    total_minutes,round(sum(alltaxcost::integer) ,2)as revenue
from cdr_data 
where callclass ='008' and callsubclass='001'
and callduration::integer >0
and  regexp_replace(callednumber,'^256','') ~ '^73'
and bundleunits = 'Money'
and regexp_replace(callednumber,'^256','') ~ '^73'

union

select ceil(sum(callduration::integer/60) )as  total_minutes,round(sum(alltaxcost::integer) ,2)as revenue
from cdr_data 
where callclass ='008' and callsubclass='001'
and callduration::integer >0
and  identifiant ~'^73'
and bundleunits = 'Money'
and zoneorange <> '-1'

union

SELECT sum(a.alltaxcost::integer) AS revenue, ceil(SUM (a.CALLDURATION::integer) / 60)  AS minutes
FROM cdr_data a,  COUNTRY_CODES b
WHERE  a.CALLSUBCLASS = '002'
     AND a.CALLCLASS = '008'
and a.zoneiddest::integer > 0
AND SUBSTR (a.CALLEDNUMBER, 1, 2) NOT IN
('77', '78', '75', '70', '71', '41', '31', '39', '76','79')

and  substr(a.zoneiddest,1,3) in ('254','255','211','257','250')
and trim(a.zoneiddest)  = trim(b.country_code)
";

$result = pg_query($dbh, $sql);
if (!$result) {
 die("Error in SQL query: " . pg_last_error());
 }

  while ($row = pg_fetch_array($result)) {
  echo "<tr style='background-color: #FFFFFF;font-size:15px' align='center'>";
     echo "<td>" . $row[0] . "</td>";
     echo "<td>" . $row[1] . "</td>";
     echo "<td>" . $row[2] . "</td>";
     echo "<td>" . $row[3] . "</td>";
     echo "<td>" . $row[4] . "</td>";
     echo "<td>" . $row[5] . "</td>";
     echo "<td>" . $row[6] . "</td>";
     echo "<td>" . $row[7] . "</td>";
     echo "<td>" . $row[8] . "</td>";
     echo "<td>" . $row[9] . "</td>";
     echo "<td>" . $row[10] . "</td>";
     echo "<td>" . $row[11] . "</td>";

 echo "</tr>";
    }
 // free memory
 pg_free_result($result);       

 // close connection
 pg_close($dbh);
 ?> 
```

这将我的数据显示为：

```
International Minutes   International Revenue   Onnet Minutes   Onnet Revenue                        
      0                         0                                       
     1343                         578086 
```

这不是我想要的。我希望结果是这样的

```
International Minutes   International Revenue   Onnet Minutes     Onnet Revenue                      
      0                         0              1343                  578086 
```

所以我希望我的结果在一行和超过 10 列中返回。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:34:57.440

因此，不要执行 UNION，而是将每一列设为自己的 select 语句。请注意，这可能不是很有效。另一种选择是插入另一个表或视图，然后从中查询。

这只是一个例子，但类似这样：

```
$sql = "Select 
          (Select ceil(SUM (a.CALLDURATION::integer) / 60)       
          FROM cdr_data a,COUNTRY_CODES b
          WHERE  a.CALLSUBCLASS = '002'
          AND a.CALLCLASS = '008'
          and a.zoneiddest::integer > 0
          AND SUBSTR (a.CALLEDNUMBER, 1, 2) NOT IN
          ('77', '78', '75', '70', '71', '41', '31', '39', '76','79')
          and not substr(a.zoneiddest,1,3) in ('254','255','211','257','250','256')
          and trim(a.zoneiddest)  = trim(b.country_code) as International Minutes
         ,(Select ...
           from ...
           where ...) as International Revenue
         ,(Select ... 
           from ...
           where) as Onnet Minutes
         ,(Select ...
           from ...
           where ...) as Onnet Revenue
         FROM ...
         WHERE...
         "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:54:51.213

有一个名为 tablefunc 的 postgresql 扩展，其中包含函数**crosstab**完全符合您的需要。请参阅文档页面：[http](http://www.postgresql.org/docs/9.1/static/tablefunc.html) ://www.postgresql.org/docs/9.1/static/tablefunc.html ；

您需要先安装此扩展程序：

```
CREATE EXTENSION tablefunc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:51:46.507

我不确定，但你可以试试这个。

```
 echo "<tr style='background-color: #FFFFFF;font-size:15px' align='center'>";

 while ($row = pg_fetch_array($result)) 
 {
    echo "<td>" . $row[0] . "</td>";
    echo "<td>" . $row[1] . "</td>";
    echo "<td>" . $row[2] . "</td>";
    echo "<td>" . $row[3] . "</td>";
    echo "<td>" . $row[4] . "</td>";
    echo "<td>" . $row[5] . "</td>";
    echo "<td>" . $row[6] . "</td>";
    echo "<td>" . $row[7] . "</td>";
    echo "<td>" . $row[8] . "</td>";
    echo "<td>" . $row[9] . "</td>";
    echo "<td>" . $row[10] . "</td>";
    echo "<td>" . $row[11] . "</td>";
}

echo "</tr>"; 
```

# android - 如何以编程方式更改图标？

> ID：14558957
> 
> 赞同：-1
> 
> 时间：2013-01-28T09:26:53.457
> 
> 标签：android

我将使用两个图标而不是切换按钮。我的目的是；

```
 If abc () == true 
          display(icon1)
 else 
          display(icon2) 
```

如何在活动屏幕中以编程方式更改图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:31:51.387

```
 If abc () == true 
    button.setBackgroundResource(R.drawable.icon1);
 else 
    button.setBackgroundResource(R.drawable.icon2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:34:48.023

如果是 ImageView，那么

```
ImageView img = (ImageView)findViewById(R.id.icon);
img.setBackgroundDrawable(this.getResources().getDrawable(R.drawable.icon)); 
```

同样可以更改图标

# java - 将图像添加到 GridLayout 中的单元格

> ID：14558959
> 
> 赞同：1
> 
> 时间：2013-01-28T09:27:01.597
> 
> 标签：java, swing, loops, grid-layout, imageicon

尝试创建一个 gridLayout 并用图像填充它，哪里出错了？

```
ImageIcon grassIcon = new ImageIcon("images/grass_tile.jpg"); 
JPanel panel = new JPanel(new GridLayout(haps,snaps,0,0));

JLabel labels[] = new JLabel[(haps*snaps)];

for (int i =  0; i < haps*snaps; i++)
{
    labels[i] = new JLabel(grassIcon);
    panel.add(labels[i]);
}

frame.add(panel); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:48:10.457

使用**frame.setVisible(true); 显示框架；**

```
ImageIcon grassIcon = new ImageIcon("images/grass_tile.jpg"); 
JPanel panel = new JPanel(new GridLayout(haps,snaps,0,0));

JLabel labels[] = new JLabel[(haps*snaps)];

for (int i =  0; i < haps*snaps; i++)
{
      labels[i] = new JLabel(grassIcon );
      panel.add(labels[i]);
}

frame.add(panel);
frame.pack();
frame.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:34:16.090

如果正确，请尝试检查您的图像路径。或者，如果您真的可以使图像出现，则可以进行测试，尝试使其成为绝对路径。另外，请详细说明您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T09:34:30.753

正如 ben75 所写，它需要 frame.pack(); 对他的信任！

# ios - 从 NSDate 获取正确日期的问题

> ID：14558962
> 
> 赞同：0
> 
> 时间：2013-01-28T09:27:11.097
> 
> 标签：ios, date, nsdate, nsdateformatter

我有一些问题`NSDate`。

我的代码如下所示：

```
NSDate *date    = [NSDate dateWithTimeIntervalSinceNow:logout]; 
```

当我在此代码处放置断点并将鼠标移到上方时，它显示为

```
2013-01-28 18:25:27 SGT 
```

但是什么时候`NSLog`约会

我明白了：

```
2013-01-28 10:25:27 
```

为什么会这样？如何显示正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:43:44.513

这个问题只是因为**NSDate 是一个“原始”日期。这就是为什么它在格林威治标准时间**

你可以试试这个

```
NSDate* sourceDate = [NSDate dateWithTimeIntervalSinceNow:logout];

NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];

NSInteger sourceGMTOffset = [sourceTimeZone secondsFromGMTForDate:sourceDate];
NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:sourceDate];
NSTimeInterval interval = destinationGMTOffset - sourceGMTOffset;

NSDate* destinationDate = [[NSDate alloc] initWithTimeInterval:interval sinceDate:sourceDate]; 
```

这将为您提供当前时区

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:32:03.993

NSDate 定义了一个对象，该对象表示具有某些属性（例如时区）的日期。如果你想显示一个日期，你可以选择只显示它的年份，也许只显示小时和分钟（所有这些都可以使用`NSDateFormatter`类来完成）。您正在做的是在 LLDB 上打印对象 - 这可能向您显示日期的 UTC 版本，所以我并不感到惊讶的是同一实例的调试器摘要显示不同的时间。

决定你需要用这个日期做什么，相应地设置它的时区，格式化它并在你的控制台中打印出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T10:31:57.960

```
Try this it works!!
  NSDate *localDate =[NSDate date]; // get the date

    NSTimeInterval timeZoneOffset = [[NSTimeZone systemTimeZone] secondsFromGMT];  

    NSTimeInterval gmtTimeInterval = [localDate timeIntervalSinceReferenceDate] + timeZoneOffset;

    NSDate *gmtDate = [NSDate dateWithTimeIntervalSinceReferenceDate:gmtTimeInterval];

    NSLog(@"%@",gmtDate); 
```

# javascript - 仅当 URL 中指定时，如何在 Colorbox 中自动打开照片？

> ID：14558967
> 
> 赞同：0
> 
> 时间：2013-01-28T09:27:28.260
> 
> 标签：javascript, jquery, lightbox, colorbox

此代码为每个 Colorbox 图像提供一个 URL (domain.com/#image)。然后，用户可以复制并粘贴此内容，以便在使用该 URL 进入站点时自动打开想要的照片。

一切都按预期工作，但不知何故，即使 URL 末尾没有#image，它也会自动打开网站上的第一张图片。我应该如何更改此代码，使其仅在 URL 中有#image 时自动打开图像？

谢谢！

代码：

```
jQuery(function (){
            var id, group;

            group = jQuery("a[rel='lightbox[63]']").colorbox({onComplete:function(){
                    // Get the image URL
                    with_ext = (this.pathname.match(/\/([^\/?#]+)$/i) || [,''])[1];
                    // Get the image url without the extension
                    without_ext =  with_ext.substring(0, with_ext.lastIndexOf("."));
                    // Redirect
                    window.location.hash = without_ext;
            }, onClosed: function(){
                    location.hash = '';
            }});

            id = location.hash.replace(/^\#/, '')+".jpg";

            group.filter('[href$="'+id+'"]').eq(0).click();
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:16:42.543

好的，让它工作。如果其他人在这里需要这种功能，那就是：

```
jQuery(function (){
            var id, group;

            group = jQuery("a[rel='lightbox[63]']").colorbox({onComplete:function(){
                    // Get the image URL
                    with_ext = (this.pathname.match(/\/([^\/?#]+)$/i) || [,''])[1];
                    // Get the image url without the extension
                    without_ext =  with_ext.substring(0, with_ext.lastIndexOf("."));
                    // Redirect
                    window.location.hash = without_ext;
            }, onClosed: function(){
                    location.hash = '';
            }});

            if(window.location.hash) {

                    id = location.hash.replace(/^\#/, '')+".jpg";
                    group.filter('[href$="'+id+'"]').eq(0).click();

            } else {
                    return;
            }

    }); 
```

# c# - 如何使用 JSON 反序列化捕获特定值？

> ID：14558968
> 
> 赞同：0
> 
> 时间：2013-01-28T09:27:29.367
> 
> 标签：c#, .net, json, deserialization

我用 .NET 捕获了一个 JSON：

```
string result = json_serializer.Deserialize(myJSON); 
```

JSON的结构是这样的：

```
result
    data[0]
        user
            bio
            name
            nickname
    data[1]
        user
            bio
            name
            nickname    
    data[2]
        user
            bio
            name
            nickname 
```

而且我只想获得第一个具有某些价值的昵称（作为字符串）：我的意思是，它不为空也不为空。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T10:26:08.673

从我从你的问题中了解到，你会想要这样的东西，

```
public string FirstUserNickname(string JsonUserInfo) 
{
    JavaScriptSerializer JsonSerializer = new JavaScriptSerializer();
    ResultData Results = JsonSerializer.Deserialize<ResultData>(JsonUserInfo);
    foreach (UserInfo UserInfo in Results.result)
    {
        if (string.IsNullOrEmpty(UserInfo.nickname))
            return UserInfo.nickname;
    }
    return null;
}

public class ResultData
{
    public List<UserInfo> result;
}

public class UserInfo
{
    public string bio;
    public string name;
    public string nickname;
} 
```

这将实现您的目标，并且是一种强类型方法，使用程序集中的`JavaScriptSerializer`类`System.Web.Extensions`，可以在[此处](http://msdn.microsoft.com/en-us/library/bb337495%28v=vs.90%29.aspx)找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:05:46.310

您可以使用[Linq to JSON](http://nuget.org/packages/newtonsoft.json)（在 NuGet 中搜索 Newtonsoft Json）。假设您的 JSON 如下所示：

```
{ "result": [ { "bio": "foo", "name": "Robin", "nickname": "Moll" },
              { "bio": "bar", "name": "Ted", "nickname": "DoctorZ" },
              { "bio": "moo", "name": "Barney", "nickname": "Wait4it" } ]
} 
```

然后获取第一个用户的名称：

```
JObject jo = JObject.Parse(json);
var name = (string)jo["result"][0]["name"]; // Robin 
```

当然，如果您可能没有任何用户，那么您应该验证用户是否存在：

```
JObject jo = JObject.Parse(json);
var user = jo["result"].FirstOrDefault();
if (user != null)
    name = (string)user["name"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T10:29:39.147

使用[Linq to JSON](http://james.newtonking.com/projects/json-net.aspx)，您可以反序列化为 .net 对象，如下所示：

```
Result deserializedResult = JsonConvert.DeserializeObject<Result>(json); 
```

之后，您可以使用 LINQ 查询对象：

```
User nicknameduser = deserializedResult.Users
  .FirstOrDefault(r => !string.IsNullOrEmpty(r.nickname))
if (nicknameduser == null) return null;
return nicknameduser.nickname; 
```

# coronasdk - 日冕中的迷宫碰撞

> ID：14558972
> 
> 赞同：0
> 
> 时间：2013-01-28T09:27:43.457
> 
> 标签：coronasdk

我打算创建一个迷宫游戏。我不知道如何创建迷宫。我做的第一件事是为迷宫制作一个 1 png 文件。我想问一下是否可以只为迷宫创建 1 个图像，或者我是否需要通过一个一个地排列它的块来创建迷宫？![在此处输入图像描述](../Images/e91b833aa0ac1156141a014d6cb7d2a2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:06:10.023

考虑使用某种文本格式来构建迷宫。声明迷宫最方便的方法是使用 lua 本身，即通过构建一个数组。下一步将是生成地图以将其显示给用户。我认为它会通过一种更简单的方法来处理 PNG 图像。

您的迷宫示例可以分为具有 4 个面向 4 个方向的墙壁/出口的房间。您是否考虑过构建一个包含 16 个值的二维数组，代表墙壁（不同房间）的所有组合？

# asp.net-mvc - 将 JQuery 脚本加载到由 ajax 调用呈现的局部视图

> ID：14558975
> 
> 赞同：0
> 
> 时间：2013-01-28T09:27:49.833
> 
> 标签：asp.net-mvc, jquery, partial-views

以下是我的视图，其中包含一个 div，其中部分视图根据视图中执行的操作呈现。

```
//Boiler Plate HTML
<div id="PartialViewHolder">
        @Html.Partial(Model.PartialView, Model)
</div>
//Boiler Plate HTML 
```

部分视图通过 ajax 调用呈现，如下所示

```
//The url is supplied based on some actions in the main view
function AjaxCall(url){
    $.ajax({
        url: url,
        cache: false,
        success: function (html) {
            $("#PartialViewHolder").empty();
            $("#PartialViewHolder").html(html);
        },
        error: function (result) {
            alert("Error: " + result.status + ": " + result.statusText);
        }
    });
} 
```

主页还加载了部分视图共有的一些其他脚本。这些脚本在第一次呈现页面时工作，即呈现默认局部视图时。但是，这些脚本对于由 ajax 调用加载的部分视图停止工作。我相信当 DOM 元素发生变化时需要重新加载这些脚本。我正在寻找一种在重新加载部分视图 div 时重新加载这些脚本的干净方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:41:43.967

您需要阅读一些有关事件绑定的信息。[http://api.jquery.com/on/](http://api.jquery.com/on/)

一开始很难理解，但一旦理解就值得。

假设你有一些这样的代码。

```
<div class="container">
    <div class="partial">
        <a href="#" class="magic-link">Click here to do stuff</a>
    </div>
</div> 
```

像下面的示例这样的 JS 代码仅适用于您进行绑定时存在的对象（通常是 document.ready()） 看起来这就是您所描述的情况。

```
$(".magic-link").click(function(){
    alert("Magic link clicked");
    return false;   
}) 
```

如果您希望事件在尚未加载到页面上的对象上触发，那么您需要将事件处理程序绑定到容器 div 即不会更改的位。像这样

```
$(".container").on("click", ".magic-link", function(){
    alert("Magic link clicked");
    return false;
}); 
```

事件冒泡到事件处理程序并触发事件。这具有另一个优点，即一个事件处理程序并可能处理来自数百个对象的事件。作为指导，尝试将侦听器绑定到最近的不会更改的父对象。在本例中，这是 Container div。这将冒泡保持在最低限度。

# html - SWF 文件在我的网站中不起作用

> ID：14558976
> 
> 赞同：0
> 
> 时间：2013-01-28T09:27:50.477
> 
> 标签：html, css, flash

我是新来的闪存。我使用转换器将视频文件转换为 swf 文件。转换后的文件（SWF）在我的系统中运行良好。将文件上传到网络服务器后，它无法正常工作。我无法识别问题。请帮帮我

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="480" height="360" id="player1" align="middle"> 
    <param name="movie" value="intro.swf"/> 
    <param name="menu" value="false"/> 
    <param name="quality" value="high"/> 
    <param name="bgcolor" value="#FFFFFF"/> 
    <noscript><a href="http://www.randeepr.webs.com/home.html">Back to Home</a></noscript> 
    <embed src="intro.swf" menu="false" quality="high" bgcolor="#FFFFFF" width="480" height="360" name="player" align="middle" allowScriptAccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"/> 
</object> 
```

我在这里测试[http://randeepr.webs.com](http://randeepr.webs.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:30:20.443

像这样更改您的代码

```
<object type="application/x-shockwave-flash" data="intro.swf" width="480" height="360">  
<param name="movie" value="intro.swf" /> 
</object> 
```

并确保您的文件路径正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:36:28.443

似乎对我来说工作得很好。你有什么结果？

# c - ld : _start not found 默认为

> ID：14558977
> 
> 赞同：1
> 
> 时间：2013-01-28T09:27:51.893
> 
> 标签：c, gcc, ld

嗨，我做了一个简单的 hello world C 程序，我正在编译它：

`gcc -c hello.c`
`ld hello.o -lc -o out`

我收到来自 ld 的警告：`ld : _start not found defaulting to ....`

我做了一个`objdump -D hello.o`，但我在输出中找不到`_start`例程。
我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T09:31:16.707

如果您使用: , ,链接，您会丢失`crt*`您将看到的内容。看看如何调用（它是可见的）并使用相同的选项。`gcc -v``crt1.o``crtend.o``crtn.o``gcc``collect2``gcc -v``ld`

`main`函数不是可执行的入口点：标准库的一些初始化是在之前完成`main`的（因为否则不可能或不合逻辑）。`_start`默认情况下，真正的入口点`crt1.o`总是链接到您的可执行文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:31:05.430

那是因为你没有main函数，你也可以试试

```
gcc -v hello.c -o hello 
```

看看是否编译成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T16:12:33.490

在我的系统（Angstrom Linux，gcc 4.3.3）上，由于我安装`libgcc-s-dev`而不是`libgcc-dev`. 系统上没有包含字符串的二进制文件`_start`，我检查了一下。安装有`libgcc-dev`帮助。

# php - 二维数组和两个索引

> ID：14558980
> 
> 赞同：1
> 
> 时间：2013-01-28T09:28:00.040
> 
> 标签：php, loops

我有来自查询的数据并将其加载到循环内的二维数组中。

我有下面的代码，但是当它打印出数组时，索引丢失了。

如何加载一个二维数组，第一个索引是 $id 值，第二个索引是 $UserEmail，然后我将如何循环遍历数组以提取每个索引（$id，$UserEmail）？

```
//the query
$query = "select id, UserEmail from User";
$result = mysql_query($query);
while($row = mysql_fetch_array($result))
{
    $ue = $row['UserEmail'];
    $id = $row['id'];
    if (strpos($ue,','))
    {
        $UserArrayEmail = explode(',',$ue);
        foreach ($UserEmailArray as $u)
        {
            $ArrayTerm[$id][] = $u;
        }
    }
}

//looping through the array and getting value from $id and $UserEmail
foreach( $ArrayTerm as $ArrayT ) {
    print_r($ArrayT);
    foreach( $ArrayT as $value ) {
        echo $value . "<br/>";
    }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:29:03.490

mysql_connect() 已弃用，您的解决方案应改用 PDO。

这是使用 PDO 完成的方法，并将修复索引：

```
//fetch array from query 
try { 
    $dbh = new PDO("mysql:host=$host; dbname=$dbname", $user, $pass); 
} catch (PDOException $e) { 
    // db error handling 
} 
$sth = $dbh->prepare("select id, UserEmail from user"); 
$sth->setFetchMode(PDO::FETCH_ASSOC); 
$sth->execute(); 
while($row = $sth->fetch())) { 
    $emails = $row['UserEmail']; 
    $id = $row['id']; 
    if (strpos($emails,',')) { 
         $UserEmailArray = explode(',',$emails); 
         foreach ($UserEmailArray as $email) { 
             $ArrayT[$id][] = $email; 
         } 
    } 
} 

//repeat the same but with PDO data with other loops 

} 
```

此外，将数据列表（在您的情况下为电子邮件）存储在单个 db 列中对于 db 规范化并不好。

您没有类型安全（VARCHAR 可以包含任何内容），没有参照完整性，无法使用 db 实际处理数据（在 SELECT、JOIN 等中）。对于数据库，电子邮件地址列表只是一堆随机字符。

关系数据库模型有一个简单的规则：一个属性，一个值。因此，如果您有多个值，则您有多个行。这就是你应该首先解决的问题。您将需要另一个名为“user_email_addresses”或其他名称的表。

有了这个新表，它可能是这样的：

```
function html_escape($raw) { 
    return htmlentities($raw, ENT_COMPAT , 'utf-8'); 
} 

function log_exceptions($exception) { 
    echo $exception->getMessage(), '<br />', $exception->getTraceAsString();               
} 
set_exception_handler('log_exceptions'); 

$database = new PDO( 'mysql:host=localhost;dbname=DB', 'USER', 'PASS', array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION) ); 

$user_emails = array(); 
$emails = $database->query(' 
    SELECT user_id , email 
    FROM user_email_addresses'); 

foreach ($emails as $email) 
    $user_emails[ $email['user_id'] ][] = $email['email_address']; 

//address list
foreach ($user_emails as $user_id => $email_addresses) { 
    echo 'User: ' . html_escape($user_id) . '<br />'; 
    foreach ($email_addresses as $email_address) 
        echo html_escape($email_address) . '<br />'; 
    echo '<br />'; 
```

# c# - 在 Web 应用程序中实现 RssFeed 阅读器

> ID：14558981
> 
> 赞同：0
> 
> 时间：2013-01-28T09:28:07.917
> 
> 标签：c#, asp.net-mvc, rss-reader

**大家好，** 我有一个用于考勤系统的 Web 应用程序（在 MVC 2.0 中）。在应用程序中实现 RSS Feed 有一个新要求。

我在 RSSFeedController C# 中编写了以下代码行：-

```
 public ActionResult GetRSSFeed(int id)
    {
        string strFeed = string.Empty;
        if (id == 1)
            strFeed = "http://timesofindia.indiatimes.com/rssfeeds/296589292.cms";
        else if (id == 2)
            strFeed = "http://rss.logicalexpressions.com/LogicalTips.rss";

        else if (id == 3)
            strFeed = "http://rss.logicalexpressions.com/LogicalTips.rss";

        using (XmlReader reader = XmlReader.Create(strFeed))
        {
            SyndicationFeed rssData = SyndicationFeed.Load(reader);
            return View(rssData);
        }
        //return View();
    } 
```

这段代码运行良好。但我只想知道如何决定在页面中显示的新闻数量

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:29:13.900

在 web.config/App.config 中定义一个数字。

而且，当您发送 rssfeed 以在视图上呈现时，请使用配置文件中的此预定义数字，即

```
return View(rssData.Items.Take(NoOfFeeds));

 public int NoOfFeeds
    {
        get 
        { 
            return Convert.ToInt32(ConfigurationManager.AppSettings["Feeds"]);
        }
    } 
```

希望这可以帮助 ！！

# java - Ant 目标符号链接在 Windows 上不起作用

> ID：14558994
> 
> 赞同：3
> 
> 时间：2013-01-28T09:29:05.867
> 
> 标签：java, windows, ant, symlink

我想使用 ant 符号链接目标创建符号链接。我知道符号链接在内部使用 ln -s linux 支持的命令，现在我主要担心它也应该在 Windows 平台上工作，我在发布这个之前做了搜索。当我需要使用 ant 符号链接目标在 Windows 上创建链接时，那里的链接并没有真正的帮助。我不想使用 Cygwin 或任何其他用于 Windows 的 linux 模拟器来使其正常工作。

*当我在 Windows 上运行符号链接任务时，我实际上得到了以下错误*

`setup.links: [symlink] ln -s D:\context-rem.xml D:\resources\context-rem.xml`

*`Could not launch ln: java.io.IOException: Cannot run program "ln": CreateProcess error=2, The system cannot find the file specified`*

我使用的 Ant 命令

`<symlink link="context-rem.xml" failOnError="false" resource="resources/context-rem.xml" overwrite="true"/>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:43:54.387

这个对不同问题的回答提供了几个选项，用于从命令行创建相当于符号链接的 Windows： [https ://stackoverflow.com/a/46887/139985](https://stackoverflow.com/a/46887/139985)

您需要将其转换为运行相关 Windows 命令的 Ant 任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-11T17:34:19.723

我使用了下一个蚂蚁任务：

```
<exec executable="cmd" os="Windows 10">
    <arg value="/c"/>
    <arg line="mklink /D ${symLinkDir} ${sourceDir}"/>
</exec> 
```

where`symLinkDir`是新符号链接目录的完整路径，并且`sourceDir`是真正的源目录。

# cookies - 没有更多的 cookie 会影响网站的性能

> ID：14558995
> 
> 赞同：-3
> 
> 时间：2013-01-28T09:29:08.463
> 
> 标签：cookies

正如标题所说，如果我为一个具有较大值的域存储更多 cookie（比如我正在为一个 cookie 使用 4kb 的允许大小），我的站点性能会受到影响吗？

如果答案是肯定的，我只想知道 cookie 如何影响性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-14T05:57:59.860

在我看到我的网站的 chrome 控制台上的配置文件审核后，我也在对此进行调查。 ![在此处输入图像描述](../Images/e9c4fad38523c87041ba46cce51411be.png)

```
HTTP cookies are used for a variety of reasons such as 
authentication and  personalization.Information about cookies 
is exchanged in the HTTP headers between web  servers and browsers.
It's important to keep the size of cookies as low as possible to 
minimize the impact on the user's response time. 
```

有关更多信息，请查看 Tenni Theurer 和 Patty Chi 的“当 Cookie 崩溃时”。这项研究的重点： [消除不必要的 cookie](https://www.rfc-editor.org/rfc/rfc2397)

1.  保持 cookie 大小尽可能小，以尽量减少对用户响应时间的影响

2.  请注意在适当的域级别设置 cookie，以免影响其他子域

3.  适当地设置过期日期。更早的过期日期或无过期日期会更快地删除 cookie，从而缩短用户响应时间

[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

# python - WM-Menu 中的 python 应用程序

> ID：14558997
> 
> 赞同：0
> 
> 时间：2013-01-28T09:29:17.483
> 
> 标签：python, menu, gnome

BI 编写了一个 python 应用程序来控制我的一个网络设备。现在想将它添加到 Gnome 菜单（应用程序）。

如何创建一个新的整体部分，例如“我的应用程序”，然后为我的应用程序创建一个条目？

我现在已经创建了教程中指定的文件，但是根本没有菜单条目。

这是我的文件：

**/usr/share/blafoo/applications/bla-foo.desktop**

```
[Desktop Entry]
Encoding=UTF-8
Type=Application

Exec=genucard
Icon=bla-foo.ico

Name=Bla Foo App
Name[de]=Bla Foo App

Comment=Easy control of youre blafoo
Comment[de]=Einfache Steuerung Ihres blafoos 
```

**/usr/shar/blafoo/desktop-directories/bla-foo.directory**

```
[Desktop Entry]
Encoding=UTF-8

Icon=happyhacking.ico
Name=Happy Hacking 
```

**/etc/xdg/menus/applications-merged/bla-foo.menu**

```
<!DOCTYPE Menu PUBLIC "-//freedesktop//DTD Menu 1.0//EN"
<"http://www.freedesktop.org/standards/menu-spec/menu-1.0.dtd">
<Menu>
  <Name>Applications</Name>
  <Menu>
    <Name>Happy Hacking</Name>
    <Directory>bla-foo.directory</Directory>
    <Include>
      <Filename>bla-foo.desktop</Filename>
    </Include>
  </Menu>
</Menu> 
```

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:38:19.220

有一个叫做桌面规范的东西，你可以在这里找到更多信息：

[http://developer.gnome.org/desktop-entry-spec/](http://developer.gnome.org/desktop-entry-spec/)
[http://developer.gnome.org/integration-guide/stable/desktop-files.html.en](http://developer.gnome.org/integration-guide/stable/desktop-files.html.en)

这些文件通常位于`/usr/share/applications`

# visual-studio-2008 - 在状态栏 Visual Studio 2008 中显示构建配置

> ID：14558999
> 
> 赞同：1
> 
> 时间：2013-01-28T09:29:21.690
> 
> 标签：visual-studio-2008, statusbar

我不使用工具栏上的下拉菜单，所以我已经删除了所有这些，但是 buildconfig 状态没有以任何其他令人讨厌的方式显示。所以我正在考虑为状态栏写一些东西。但我想也许其他人已经这样做了？有人有修复吗？

我发现了这个：[http](http://www.aspfree.com/c/a/net/new-features-for-the-statusbar-in-mfc/) ://www.aspfree.com/c/a/net/new-features-for-the-statusbar-in-mfc/所以我想我可以自己写，但不要花时间在上面如果其他人已经这样做了。