# StackOverflow 问答 14245000-14245999

# iphone - 自定义容器视图控制器

> ID：14245001
> 
> 赞同：1
> 
> 时间：2013-01-09T19:34:07.223
> 
> 标签：iphone, objective-c, xcode, ios6

我正在使用容器 API 创建自定义容器视图控制器

Parent的ViewDidLoad中创建Parent View Controller，设置子View Controller：

```
[self addChildViewController:newA];
[self addChildViewController:newB];
[self addChildViewController:newC]; 
```

现在，一旦添加了这些 childVC，我就可以使用以下方法进行转换：

```
[self transitionFromViewController:from
                  toViewController:to
                          duration:1.0
                           options:UIViewAnimationOptionTransitionFlipFromLeft
                        animations:nil
                        completion:^(BOOL b){
                            [to didMoveToParentViewController:self];
                            [from.view removeFromSuperview];
                            [from removeFromParentViewController];
                        }]; 
```

我现在的问题是我必须从 parentVC 中**删除**当前的 childVC 以显示新的 VC 吗？

```
 completion:^(BOOL b){
                            [to didMoveToParentViewController:self];
                            [from.view removeFromSuperview];
                            [from removeFromParentViewController];
                        } 
```

有没有一种方法可以保留这些 childVC 并简单地进行滑动/按钮操作以在这些 childVC 之间导航？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:40:17.160

因此，您无需`from`手动从视图层次结构中删除视图控制器的视图。此方法在完成动画块后为您处理。从有关此方法的文档中：

> 此方法将第二个视图控制器的视图添加到视图层次结构中，然后执行动画块中定义的动画。动画完成后，它会从视图层次结构中移除第一个视图控制器的视图。

但是，需要注意的是，动画块不能`NULL`像您的代码示例中那样（也就是说，您有`nil`, not `NULL`，这是没有意义的，因为`animations`参数是块，而不是 Objective-C 对象） .

**更新：**根据您的实现，`viewDidLoad`如果该视图的内存被清理，可能会被重复调用。例如， A`UITabBarController`通常只在将您的 VC 添加到选项卡栏时调用 viewDidLoad，然后只调用 viewWill/DidAppear。同样，当您弹出视图控制器时 a`UINavigationController`不会调用`viewDidLoad`，因为它一直在其导航堆栈中维护它，但`viewDidLoad`如果您从 VC 弹出然后将其推回（通常），它将调用。如果你没有得到你想要的行为，你可以在你的容器实现中子类化这个方法。

****注意**我正在从您的问题中删除 iphone-sdk-4.0 标签，因为包含 API 直到 5.0 才可用

# java - 这个代码块究竟是如何工作的？我一无所知

> ID：14245004
> 
> 赞同：-2
> 
> 时间：2013-01-09T19:34:13.267
> 
> 标签：java

所以我仍然是一个初出茅庐的程序员，如果有人能向我解释下面的代码是如何工作的，我将不胜感激。

我知道如果没有一些我没有在这里列出的方法，代码将无法运行，但让我感到困惑的是从第 11 行开始： String street 被赋予了一个没有索引的变量的值（据我所知），但我' m 仍然能够以预期的值而不是无价值的 s 返回它。

String 和其他具有相同目的的变量如何不修改我最终返回的变量的值？

再次感谢我在这方面获得的任何帮助。

```
public class StreetAddress {
    String street, city, state, zip;

    StreetAddress(String s1, String c, String s2, String z) {
        street = s1;
        city = c;
        state = s2;
        zip = z;
    }

    void setStreet(String s) {
        street = s;
    }

    String getStreet() {
        return street;
    }

    void setCity(String c) {
        city = c;
    }

    String getCity() {
        return city;
    }

    void setState(String s) {
        state = s;
    }

    String getState() {
        return state;
    }

    void setZIP(String z) {
        zip = z;
    }

    String getZIP() {
        return zip;
    }

    String mailingLabel() {
        return street + "\n" + city + ", " + state + " " + zip;
    }
} 
```

上面的类将接收下面的信息并返回一个格式化的标签。

```
StreetAddress add = new StreetAddress("Cheese Island", "East Hemisphere", "The Moon", "99999999");
System.out.println(add.mailingLabel());
add.setStreet("Solar Flare");
add.setCity("Corona");
add.setState("The Sun");
add.setZIP("00000000");
System.out.println(add.mailingLabel()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:59:50.847

这是一个描述 StreetAddress 概念的 java 类。基本上，该类描述了一个现实生活中的对象，该对象具有对该对象有意义的属性。在这种情况下，您的街道地址包含信息`street`、`city`、`state`和`zip`。

您可以`instantiate`像这样创建或创建一个新的 StreetAddress 对象：

```
StreetAddress streetAddress = new StreetAddress("Lincoln street", "New York", "New York", "1234"); 
```

这意味着您现在有一个对象，您可以在程序中传递包含地址的对象：

> 林肯街，
> 
> 纽约，
> 
> 纽约 1234

如果你想从你的对象中获取一些信息，你可以使用这些`getter`方法。例如，如果您只想从对象中获取街道信息，您可以这样做：

```
String street = streetAddress.getStreet(); 
```

同样，如果要更新`street`StreetAddress 对象中的字段，可以使用`setter`如下方法：

```
streetAddress.setStreet("Washington ave"); 
```

现在您的对象将包含街道地址：

> 华盛顿大街，
> 
> 纽约，
> 
> 纽约 1234

这些`getter`和`setter`方法对对象中的每个字段都以相同的方式工作：`street`、`city`、`state`和`zip`。

最后的方法：

```
String mailingLabel(){  return street + "\n" + city + 
      ", " + state + " " + zip; } } 
```

允许您返回与上述示例类似的对象的格式化版本。您可以通过执行以下操作将此格式化版本的对象打印到控制台：

```
System.out.print(streetAddress.mailLabel()); 
```

在 Java 中，您使用对象来描述现实世界的概念，并且在您的程序中，您可以创建许多像 StreetAddress 一样的对象来携带信息。对象及其数据在程序运行时存储在内存中，而不是存储在数据库中（除非它们是 EJB，但暂时忘记这一点）。如果您在类之间传递一个对象，它将保留其中的数据，直到您再次使用`getters`and更改它`setters`;

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:38:48.477

您的构造函数设置了四个内部值；街道、城市、州和邮编。

一旦构造完成，就可以使用 getter 方法检索这四个变量。

这四个变量可以使用 setter 方法进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:42:01.917

您向我们发送了一个带有构造函数的简单 java 类，它接受 3 个参数并初始化私有字段。所以，当你像这样调用这个构造函数时

`StreetAddress address = new StreetAddress("Brookin", "New York", "NY", "12345");`

相应的字段将被初始化。

你的类也有设置器 - 允许更改特定字段值的方法。例如，如果现在您调用`address.setZIP("54321")`邮政编码将被更改。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T19:42:48.397

在其他地方你会说这样的话：

```
myAddr = new StreetAddress("My Street", "My City", "My State", "My Zip"); 
```

然后这些值存储在这个对象中，你可以稍后取回它们......

```
anotherZIP = myAddr.getZIP(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T20:18:21.713

您问题的措辞有点不清楚，但您似乎对声明、实例化和初始化感到困惑。

在这一点上，我建议阅读有关它们如何发挥作用的快速教程：http: [//docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)

抽出一些可以帮助您集中注意力的快速片段：

> String street 被赋予了一个没有被索引的变量的值（据我所知），
> 但我仍然能够用预期的值而不是无价值的值返回它

你在这里看到的（“第十一行”）：

```
void setStreet(String s) {
    street = s;
} 
```

是方法期望接收的声明（a `String`）。`s`和其他属性在`StreetAddress`这里初始化：

```
StreetAddress add = new StreetAddress("Cheese Island", "East Hemisphere", "The Moon", "99999999"); 
```

...然后在此处进一步更改该值：

```
add.setStreet("Solar Flare"); 
```

在最后一个示例中，“Solar Flare”是用于初始化`String s`内部变量的值`setStreet()`。

# math - 来自两个向量的旋转/方向

> ID：14245010
> 
> 赞同：2
> 
> 时间：2013-01-09T19:34:28.033
> 
> 标签：math, 3d, unity3d, trigonometry

我正在开发一个小型 Unity3D 项目，我需要从另一个工具导入一些数据。该工具通过两个向量为我提供了面向对象，我需要将其移植到 Unity。

例如，我有这两个向量；

```
x = Vector( 0.707, 0.707, 0)
y = Vector(-0.707, 0.707, 0) 
```

只有这些信息，我需要了解我的对象需要在 Z 轴上旋转 45 度。这两个向量代表我的对象的上向量和右向量，不是起点也不是目的地。

**编辑**

好的，现在我可以进行单轴旋转了！是的！提供了这个功能；

```
function RotationMaster (vx : Vector3, vy : Vector3) {
    var vz = Vector3.Cross(vx, vy);

    var x = Mathf.Atan2(-vz.y, vz.z) * Mathf.Rad2Deg;
    var y = Mathf.Atan2( vx.z, vx.x) * Mathf.Rad2Deg;
    var z = Mathf.Atan2(-vx.y, vx.x) * Mathf.Rad2Deg;

    Debug.Log("x : " + x + "; y : " + y + "; z : " + z);

    transform.rotation = Quaternion.Euler(x,y,z);
} 
```

我现在可以像这样传递简单的旋转：

```
RotationMaster(Vector3(1,0,0), Vector3(0,0.707,0.707));
RotationMaster(Vector3(1,0,0), Vector3(0,-1,0)); 
```

只要我不玩多轴，它就可以工作。但是，一旦我尝试更复杂的旋转，它就会失败……举个例子；

```
RotationMaster(Vector3(-0.5,-0.5,0.707), Vector3(-0.707,0.707,0)); 
```

这是错误的...... :-(

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:11:27.820

对完整矩阵取 x 和 y 之间的叉积并将其转换为空间 Euler 或 Tait-Bryan 旋转（转换需要第三轴准确）。这是一个相当容易理解的转换，如果您阅读转换例程，您会意识到它首先从平面解决方案开始，因此如果需要，您可以省略许多其他部分。

可以在 Graphics Gems IV 中找到如何进行这种通用转换的一个很好的通用示例，您可以[在此处找到 C 源代码](http://tog.acm.org/resources/GraphicsGems/gemsiv/euler_angle/)。[或者在这里](http://www.lfd.uci.edu/~gohlke/code/transformations.py.html)改编 python 源代码和其他好东西。

附录：将矩阵直接转换为四元数由同一作者在 Graphics Gems II 中描述，可在[此处](http://fs1.bib.tiera.ru/content/ShiZ/math/other/Graphics_Gems_2,ed_J.Arvo.pdf)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:38:28.593

```
Quaternion.SetLookRotation 
```

是（有一些调整......）我正在寻找的！感谢大家的帮助！

# java - 我的愚蠢错误：休眠 SQL 抛出无效字符

> ID：14245011
> 
> 赞同：2
> 
> 时间：2013-01-09T19:34:31.650
> 
> 标签：java, hibernate, concatenation

## 免责声明：这只是我犯的一个愚蠢的错误。没有关闭它，因为也许其他人做了同样的事情并且可能会发现它有用。

两张表：

```
COR_RADICADO_OFICIO:
- num_radicado (pk)
- ano_radicado (pk) 
```

（我知道，复合 pk 是邪恶的，但它是一个遗留数据库，而不是我的设计；））

和

```
COR_RESPUESTA_OFICIO:
- num_radicado (text)(fk)
- ano_radicado (number)(fk)
- requiere_respuesta (number) 
```

休眠状态：

```
createSQLQuery("select * from COR_RADICADO_OFICIO where REQUIERE_RESPUESTA = 399 " +
"and concat(concat(num_radicado , '_'),  ano_radicado) not  in "+ 
"(select concat(concat(num_radicado , '_), ano_radicado) from COR_RESPUESTA_OFICIO);" ); 
```

如果我直接在 oracle 上执行此查询，它可以正常工作，但是休眠会抛出

```
java.sql.SQLSyntaxErrorException: ORA-00911: invalid character 
```

尝试用“||”替换“concat”函数 并得到同样的错误。

任何想法如何解决这个问题？（除了创建视图）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T19:37:04.743

尝试删除分号可能吗？您得到的错误不是说无效的 SQL，而是说无效的字符，这是完全不同的东西。

# javascript - 在 crossfilter.js 中按多个维度排序

> ID：14245016
> 
> 赞同：4
> 
> 时间：2013-01-09T19:34:36.677
> 
> 标签：javascript, sorting, crossfilter

我正在使用 Mike Bostock 的[crossfilter](https://github.com/square/crossfilter)库来过滤和排序大型数据集。我的问题：**给定一个具有多个维度的数据集，我如何一次对多个维度进行排序？**

[示例 JSFiddle](http://jsfiddle.net/nrabinowitz/cQXNK/)

测试数据集：

```
[
    { cat: "A", val:1 },
    { cat: "B", val:2 },
    { cat: "A", val:11 },
    { cat: "B", val:5 },
    { cat: "A", val:3 },
    { cat: "B", val:2 },
    { cat: "A", val:11 },
    { cat: "B", val:100 }
] 
```

所需输出的示例，按`cat, val`（升序）排序：

```
[
    { cat: "A", val:1 },
    { cat: "A", val:3 },
    { cat: "A", val:11 },
    { cat: "A", val:11 },
    { cat: "B", val:2 },
    { cat: "B", val:2 },
    { cat: "B", val:5 },
    { cat: "B", val:100 }
] 
```

到目前为止，我使用的方法是在所需维度上使用字符串连接：

```
var combos = cf.dimension(function(d) { return d.cat + '|' + d.val; }); 
```

这适用于多个基于字符串的维度，但不适用于数字维度，因为它不是自然排序 ( `'4' > '11'`)。我想我可以在数字上使用零填充来完成这项工作，但这对于大型数据集来说可能会变得昂贵，所以我宁愿避免它。**有没有另一种方法可以在这里工作，使用交叉过滤器？**

任何允许不同维度具有不同排序方向（升序/降序）的解决方案的奖励积分。

**澄清**：是的，我可能需要切换到本机`Array.sort`实现。但是使用 crossfilter 的全部意义在于它非常非常快，尤其是对于大型数据集，并且它以一种使重复排序更快的方式缓存排序顺序。所以我真的在这里寻找基于交叉过滤器的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:43:36.497

我知道它没有使用 crossfilter 库，但为什么不使用 sort 函数来做到这一点呢？

```
var combos = cf.sort(function(a,b) { 
   if(a.cat == b.cat) return a.val < b.val ? -1 : 1;
   return a.cat < b.cat ? -1 : 1;
}); 
```

见[http://jsfiddle.net/cQXNK/5/](http://jsfiddle.net/cQXNK/5/)

要允许不同的维度具有不同的排序方向，只需将 -1 交换为 1，反之亦然

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:26:09.967

使用`Array.prototype.sort`，您可以：

```
function sortByPriority(a, b) {
    var p = sortByPriority.properties;
    function pad (str, max) {
        str = String(str);
        return str.length < max ? pad("0" + str, max) : str;
    }

    if (!p) {
        return a - b;
    }
    var ar ='', br = '';
    for (var i = 0, max = p.length; i < max; i++) {
        ar += pad(a[p[i]], 10);
        br += pad(b[p[i]], 10);
    }
    return ar == br ? 0 : ar > br ? 1 : - 1;
} 
```

如何使用：

`cat`然后排序`val`

```
sortByPriority.properties = ['cat', 'val'];
myArray.sort(sortByPriority); 
```

结果：

*   1
*   一个 3
*   11
*   11
*   乙二
*   乙二
*   乙 5
*   乙 100

如果你想事先`val`做：

```
sortByPriority.properties = ['val', 'cat'];
myArray.sort(sortByPriority); 
```

结果：

*   1
*   乙二
*   乙二
*   一个 3
*   乙 5
*   11
*   11
*   乙 100

不是一个超级有效的代码，但你可以改进它。

**更新：**

您可以使用该`pad`函数通过 crossfilter 获得相同的结果，看看[这个 jsfiddle](http://jsfiddle.net/gartz/cQXNK/6/)。

```
var combos = cf.dimension(function(d) { 
    return pad(d.cat, 10) + '|' + pad(d.val, 10); 
}); 
```

您还可以从“coll”中的最大字符串更改填充大小相同的长度，这将确保结果。

看到优化：http: [//jsfiddle.net/gartz/cQXNK/7/](http://jsfiddle.net/gartz/cQXNK/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T20:21:12.850

这就是我最终做的事情：

*   我仍然在单个新维度上使用字符串连接，但是
*   在将度量转换为字符串之前，我将度量转换为正的、可比较的小数，使用交叉过滤器获取最小值/最大值：

    ```
    var vals = cf.dimension(function(d) { return d.val }),
        min = vals.bottom(1)[0].val,
        offset =  min < 0 ? Math.abs(min) : 0,
        max = vals.top(1)[0].val + offset,
        valAccessor = function(d) {
            // offset ensures positive numbers, fraction ensures sort order
            return ((d.val + offset) / max).toFixed(8);
        },
        combos = cf.dimension(function(d) { 
            return d.cat + '|' + valAccessor(d); 
        }); 
    ```

见工作小提琴：http: [//jsfiddle.net/nrabinowitz/cQXNK/9/](http://jsfiddle.net/nrabinowitz/cQXNK/9/)

这具有正确处理负数的优点 - 据我所知，零填充是不可能的。它似乎也一样快。缺点是它需要在数字列上创建一个新维度，但就我而言，无论如何我通常都需要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T11:13:36.547

我还没有测试过性能，但你可以试试 d3.nest。示例代码：

```
var nested = d3.nest()
.key(function(d) { return d.cat; })
.sortKeys(d3.ascending)
.sortValues(compareValues)
.entries(data); 
```

在这里查看整个小提琴：http: [//jsfiddle.net/RFontana/bZX7Q/](http://jsfiddle.net/RFontana/bZX7Q/)

如果你运行一些 jsperf，让我知道你会得到什么结果 :)

# opengl-es - 在 2D 游戏 OpenGL 中更改相机位置

> ID：14245017
> 
> 赞同：1
> 
> 时间：2013-01-09T19:34:42.780
> 
> 标签：opengl-es, 2d, glulookat

我是在 OpenGL 中制作游戏的初学者。我画了一张地图（这是世界，玩家可以移动），现在我想做，那个相机跟随玩家（玩家在屏幕中央）。我做了这样的事情：

```
GLU.gluLookAt(gl, 
                this.x, this.y, 0,
                this.x, this.y, 1.0f,
                0.0f, 0.0f, 0.0f); 
```

其中 this.x 和 this.y 是玩家的坐标。不幸的是它不起作用:(什么都没有发生。这是 2d 游戏，所以没有任何透视等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:32:25.043

你可以通过几种方式做到这一点，但最简单的可能就是打电话

```
gl.glTranslatef( cameraX, cameraY ); 
```

在 glLoadIdentity 调用之后但在渲染框架之前。

glTranslatef 具有累积效果，因此场景中的所有内容都将被 cameraX 和 cameraY 偏移绘制。

一个问题是，要使其工作，您需要使用 glPushMatrix 和 glPopMatrix 而不是在渲染每个对象之前调用 glLoadIdentity ，否则您会丢失相机平移。

* * *

顺便说一句，如果您计划拥有一个巨大的世界，您应该将玩家的位置设置为 0,0 并让您的世界移动而不是您的玩家。如果它是一个小游戏，这不是一个大问题，但是当对象具有非常大的 x 和 y 值时，您可能会遇到浮点舍入错误的问题。这可能不是你曾经遇到过的事情，但很高兴知道我猜。

# sql - 简化 Apex 应用程序中的 SQL 查询

> ID：14245018
> 
> 赞同：0
> 
> 时间：2013-01-09T19:34:42.930
> 
> 标签：sql, database, oracle-apex

我有一个 Apex 应用程序，其中包含几个下拉栏，允许用户选择各种值来查询附加的数据库。基本上，由于其中放置的条件，查询变得很大。条件是它检查所有下拉列表中的每个值或它们是否为空等。无论如何我的问题是简化查询，这样我就不必编写输入数据的所有可能组合。就像这个字段为空一样，这个不是，现在这个是等等。

条件看起来如何的一个例子 -

```
OR
(plant_type.plant_type = :P1_PLANT_TYPE AND plant.plant_name = :P1_PLANT_NAME AND :P3_SOIL IS NULL AND :P3_SUNLIGHT IS NULL)
OR 
(plant_type.plant_type = :P1_PLANT_TYPE AND :P1_PLANT_NAME IS NULL AND :P3_SOIL IS NULL AND :P3_SUNLIGHT IS NULL) 
OR
(sunlight_conditions.condition_details = :P3_SUNLIGHT AND :P3_SOIL IS NULL AND plant_type.plant_type = :P1_PLANT_TYPE AND plant.plant_name = :P1_PLANT_NAME)
OR
(soil_conditions.soil_condition = :P3_SOIL AND :P3_SUNLIGHT IS NULL AND plant_type.plant_type = :P1_PLANT_TYPE AND plant.plant_name = :P1_PLANT_NAME) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:42:29.407

更好的方法是将每个查询条件只包含一次，如下所示：

```
(plant_type.plant_type = :P1_PLANT_TYPE or :P1_PLANT_TYPE IS NULL)
and
(plant.plant_name = :P1_PLANT_NAME or :P1_PLANT_NAME IS NULL)
and
(sunlight_conditions.condition_details = :P3_SUNLIGHT or :P3_SUNLIGHT IS NULL)
and
(soil_conditions.soil_condition = :P3_SOIL or :P3_SOIL IS NULL) 
```

当然，这取决于您是否需要它们之间的 OR 条件或和 AND 条件。通常是 AND，所以我的回答会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:47:32.987

似乎您的很多组合都“允许”某些项目为空。

做到这一点的一种方法是使用所有组合，但使用 COALESCE 跌至真实条件。例如，您也可以更改您在此处列出的所有项目，如下所示

```
 plant_type.plant_type = COALESCE(:P1_PLANT_TYPE,plant_type.plant_type) AND 
 plant.plant_name = COALESCE(:P1_PLANT_NAME, plant.plant_name) AND
 soil_conditions.soil_condition = COALESCE(:P3_SOIL,soil_conditions.soil_condition) AND
 sunlight_conditions.condition_details = COALESCE(:P3_SUNLIGHT,sunlight_conditions.condition_details) 
```

* * *

如果可能是上述不符合您的逻辑规则的情况。在这种情况下，您可能必须创建要加入的条件表。该表可以描述哪些项目“与”其他项目“搭配”的逻辑。

我必须查看您所有的业务规则，以确定是否需要它以及如何创建它，但这是当 where 失控时的最佳方式。毕竟是关系型数据库……建立关系来解决吧！

# c# - 您可以在 system.array 中存储多种数据类型吗

> ID：14245020
> 
> 赞同：1
> 
> 时间：2013-01-09T19:34:52.717
> 
> 标签：c#, .net, covariance

您可以存储多种数据类型`System.Array`吗？谷歌的所有点击都表明我不能这样做，除非数组是对象。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T19:36:00.863

你从不`System.Array`直接使用。

如果要存储不同的类型，请使用`System.Collections.ArrayList`或 `object[]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:38:03.737

您可以存储其数据类型等同于或派生自数组数据类型的项。这意味着您*可以*存储多种数据类型，前提是它们派生自一个公共基类型，或者实现一个公共接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T19:42:36.770

来自 MSDN：

> Array 类是支持数组的语言实现的基类。但是，只有系统和编译器可以显式地从 Array 类派生。用户应该使用该语言提供的数组结构。

并且 ：

> Type.IsArray 和 Type.GetElementType 可能不会使用 Array 返回预期的结果，因为如果将数组强制转换为 Array 类型，则结果是对象，而不是数组。即 typeof(System.Array).IsArray 返回 false，typeof(System.Array).GetElementType 返回 null。

因此，在所有情况下，您都应该避免直接创建实例`System.Array`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T19:38:30.010

是的，谷歌首页的所有答案都是错误的。C# 数组是协变的，因为 .Net 数组旨在支持多种语言。以下是示例：

```
class Animal { }
class Cow : Animal { }
class Tiger : Animal { }

 int one = 1;
 double two = 2.0d;
 ValueType[] foo = new ValueType[2];
 foo[0] = one;
 foo[1] = two;

 Animal[] animals = new Animal[2];
 animals[0] = new Cow();
 animals[1] = new Tiger();

 Object[] col = new string[2];
 col[0] = 2; // compiles but throws 
```

# php - 在控制器 mvc 中处理 switch 语句

> ID：14245023
> 
> 赞同：1
> 
> 时间：2013-01-09T19:35:20.973
> 
> 标签：php, model-view-controller, design-patterns, switch-statement

我的控制器类中有很多开关盒。如何减少开关盒或更好地处理控制器中的开关盒。我不得不使用开关盒来处理按钮和链接。我可以使用工厂模式吗？请看我的代码结构：

```
class manageController
{
private $controller;
private $action;

public function __construct($controller,$action)
{
    $this->controller=$controller;
    $this->action=$action;
}
public function dispatch()
{  ...  }
private function indexAction()//for index.php
{  ...  }
private function managecontentAction()//for managecontent.php
{
    ...
           if(isset($_POST['delete_page'])){
             ...        
    }elseif(isset($_POST['save_page'])){
    ...
    }elseif(isset($_POST['reset_subject_menu'])){
    ...
    }elseif(isset($_POST['remove_subject_menu'])){  
    ...
    }elseif(isset($_POST['insert_subject_menu'])){
    ...
    }elseif(isset($_POST['update_subject_menu'])){
    ...
    }elseif(isset($_GET['subject_menu_id'])){
    ... 
    }elseif(isset($_GET['action']) && $_GET['action']=='add-subject-menu'){
            ...     
    }elseif(isset($_GET['action']) && $_GET['action']=='add-page-menu'){
    ... 
    }
    ...
    $this->render();
}
 }

 ?> 
```

我在处理我的`url`. 例如，当我输入`http://localhost/manage/managecontent`它时加载良好，但是当我输入`http://localhost/manage/managecontent/`html 加载但`css`文件和图像不加载时！
请查看我的代码结构`bootstrap`：

```
<?php
if(!defined('ROOT_PATH')){
define('ROOT_PATH','../');
}

require_once ROOT_PATH.'function/my_autoloader.php';

use application\controllers as controllers;

$uri=strtolower($_SERVER['REQUEST_URI']);
$actionName='';
$uriData=array();
$uriData=preg_split('/[\/\\\]/',$uri );

$actionName = (!empty($uriData[3])) ? preg_split('/[?].*/', $uriData[3] ): '' ;
$actionName =$actionName[0];

if(empty($controllerName))
die('ERROR your request page doesn\'t exist!');
else {
if(empty($actionName))
    $actionName='index';
}
switch ($controllerName) {
case 'manage':
    $controller = new Controllers\manageController($controllerName,$actionName);
    break;
default:
    die('ERROR WE DON\'T HAVE THIS ACTION!');
    exit;
    break;
 }
 // function dispatch send url to controller layer
 $controller->dispatch();
?> 
```

我的`.htaccess`文件是：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d

RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ public/index.php [NC,L] 
```

# python - 在python中解析可以有多种格式的日期

> ID：14245029
> 
> 赞同：13
> 
> 时间：2013-01-09T19:36:07.037
> 
> 标签：python, ruby, parsing, datetime

我想解析一个可以有多种格式的日期，我事先知道。如果我无法解析，我返回 nil。在红宝石中，我喜欢这样：

```
DATE_FORMATS = ['%m/%d/%Y %I:%M:%S %p', '%Y/%m/%d %H:%M:%S', '%d/%m/%Y %H:%M', '%m/%d/%Y', '%Y/%m/%d']

def parse_or_nil(date_str)
    parsed_date = nil
    DATE_FORMATS.each do |f|
        parsed_date ||= DateTime.strptime(date_str, f) rescue nil
    end
    parsed_date
end 
```

这是简洁和有效的。我怎样才能在 Python 中做同样的事情？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-09T19:42:40.190

我只想试试[dateutil](http://labix.org/python-dateutil)。它可以识别大多数格式：

```
from dateutil import parser
parser.parse(string) 
```

如果您最终按照@RocketDonkey 的建议使用 datetime.strptime ：

```
from datetime import datetime

def func(s,flist):
    for f in flist:
        try:
            return datetime.strptime(s,f)
        except ValueError:
            pass 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-09T19:42:16.960

您可以使用`try/except`来捕获`ValueError`尝试使用不匹配格式时会发生的情况。正如@Bakuriu 所提到的，您可以在找到匹配项时停止迭代以避免不必要的解析，然后在未定义时定义您的行为，`my_date`因为找不到匹配的格式：

您可以使用`try/except`来捕获`ValueError`尝试使用不匹配格式时会发生的情况：

```
from datetime import datetime

DATE_FORMATS = ['%m/%d/%Y %I:%M:%S %p', '%Y/%m/%d %H:%M:%S', '%d/%m/%Y %H:%M', '%m/%d/%Y', '%Y/%m/%d']
test_date = '2012/1/1 12:32:11'

for date_format in DATE_FORMATS:
    try:
        my_date = datetime.strptime(test_date, date_format)
    except ValueError:
        pass
    else:
      break
else:
  my_date = None

print my_date # 2012-01-01 12:32:11
print type(my_date) # <type 'datetime.datetime'> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T21:41:09.477

在你的小费 RocketDonkey 和 Bakuriu 的小费之后，我可以写一个更短的版本。有什么问题吗？

```
def parse_or_none(date):
    for date_format in DATE_FORMATS:
        try:
            return datetime.strptime(date, date_format)
        except ValueError:
            pass
    return None 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-07T04:36:47.960

修改 root 的答案以处理 m/d/y：

```
from dateutil import parser
parser.parse(string, dayfirst=False) 
```

还有一个 yearfirst 选项，更喜欢 y/m/d。

# php - 为什么将登录信息存储在 Cookie 中不安全？

> ID：14245030
> 
> 赞同：1
> 
> 时间：2013-01-09T19:36:09.113
> 
> 标签：php, security, session, cookies, web

我已经读过将登录信息存储在 cookie 中存在安全风险，因为它们很容易被用户编辑。我的问题是，如果我存储的只是 cookie 中的用户名和密码，那为什么会有风险？如果我只是制作了一个简单的身份验证脚本来确保在从数据库中检索信息之前密码和用户名匹配，为什么会有风险？编辑 cookie 的用户仍然需要知道正确的用户名和密码才能获得访问权限。我计划这样做，以便用户可以在会话结束后保持登录状态。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T19:37:53.797

好吧，如果您将用户名和密码存储在 cookie 中，那么任何可以访问计算机的人都可以访问它们。

这不会很安全。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T19:58:45.443

不，不要这样做。这几乎是最糟糕的方法。

更好的解决方案是：

1.  让用户登录。
2.  生成一个随机令牌，即：`$token = md5( time() . rand() . $username );`
3.  将令牌存储在 cookie 中，以及用户 ID 和用于登录的 IP 地址旁边的数据库中。
4.  开始一个会话。

这样，当会话到期时，您仍然可以检查 cookie 中的令牌，将其与存储在数据库中的内容以及 IP 地址进行比较，然后为用户处理非交互式登录。

通过这样做，你是：

1.  不在服务器之外的任何地方存储用户的凭据。
2.  提供针对 cookie 劫持的基线保护。

您还*应该*将时间戳与令牌一起存储，并在 30 或 60 天等合理期限后过期，这样用户就不会将自己永久登录到他们可能不想登录的机器上。此外，用户还可以选择查看并使其所有登录令牌无效，以便他们可以对自己的帐户安全负责。

回复：@Gumbo 的评论：

我认为你对做什么有点模糊`rand()`。即使您知道用户的姓名和他们登录的*确切*秒数 [通过服务器的时钟]，仍然会为您留下 20 亿个可能的值`rand()`。[在我的系统上] 如果您只想开始猜测 MD5 哈希值，那是 2^128 种可能性，如果您不在与令牌一起存储在数据库中的同一个 IP 地址上，那么这一切都没有实际意义。

出于以下原因，这些项目被从我的脑海中选中：

1.  `$username`：所以每个用户的令牌应该是唯一的。
2.  `time()`：所以令牌每秒是唯一的
3.  `rand()`：所以令牌是相当随机的
4.  `md5()`: 因为我觉得。MD5 的十六进制字符串很容易在代码中使用，在这种情况下，可逆性是一个有争议的问题。我们只对使猜测代币变得困难感兴趣。

使用`mt_rand()`and sha512 或 bcrypt 或 I-don't-care-what，但事实仍然是在这种情况下没有必要。

# .net - 使用 TransactedInstaller - 我还需要使用回滚吗？

> ID：14245031
> 
> 赞同：0
> 
> 时间：2013-01-09T19:36:09.870
> 
> 标签：.net, windows-installer, topshelf

我已经使用 Topshelf 3 年了，但仅限于简单的用例。我开始了一项新工作并建议使用 Topshelf，但它们覆盖了 Installer 类的 Rollback 方法。例如他们用它来调用“http delete urlacl ...”。

Topshelf 不公开 BeforeRollback 或 AfterRollback。我不反对提交拉取请求，但我想事先知道我是否需要回滚功能？也可能已经有一种方法可以使用 Topshelf 来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:19:40.627

就 TopShelf 而言，他们可能有一个很好的模式来创建服务（我不知道，我从来没有使用过它们）但是如果他们仍然在他们的部署中使用自定义操作，那么他们仍然错过了如何使用 Windows安装程序旨在工作。我不会责怪他们，因为从 MSI 的角度来看，关于这个主题的文章很多都是次优的。

6年前我第一次写到这个：

[微星与.NET](http://blog.deploymentengineering.com/2006/07/msi-vs-net.html)

问题始于 Visual Studio 部署项目，它没有公开 MSI 的底层本机功能。相反，创建的安装程序类自定义操作鼓励使用更脆弱的解决方案重新发明轮子。MSI 不是关于注入进程命令式代码，而是关于声明式编程。

可以在此处找到处理服务的更简洁的方法：

[使用 Windows Installer XML 增强 InstallShield - Windows 服务](http://blog.deploymentengineering.com/2011/01/augmenting-installshield-using-windows_19.html)

其概念是将服务封装为合并模块并添加到 InstallShield。它也可以添加到 Visual Studio 部署项目中，或者可以重构为纯 WiX。

netsh 命令也是如此。您不必拥有所有这些自定义代码并尝试使所有服务策略正确。而是使用 WiX 内置的[FirewallException Element（防火墙扩展）](http://wix.sourceforge.net/manual-wix3/firewall_xsd_firewallexception.htm)（同样可以封装并与其他工具一起使用），让它为您完成艰苦的工作。

如果这看起来很有趣但无法实现，请联系我，我会告诉你。在有人费心重写这些书之前，我只需要一次说服一位开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:51:58.157

所以我最终所做的是将 BeforeRollback 和 AfterRollback 事件与暴露的其他安装程序事件一起显示到 Topshelf 的公共界面。我已经向开发人员提交了一个拉取请求，但在他们接受之前，您可以在此处找到我的更新源：[https ://github.com/developmentalmadness/Topshelf](https://github.com/developmentalmadness/Topshelf)

# jquery - SCRIPT438：对象不支持属性或方法“查找”

> ID：14245035
> 
> 赞同：1
> 
> 时间：2013-01-09T19:36:16.977
> 
> 标签：jquery, file-upload

您好我正在尝试使用 Jquery 文件上传。我已经让它在 FireFox 和 Chrome 上正常工作。像往常一样，IE 必须脱颖而出，发脾气，让我们的生活更有趣。当我点击上传按钮时出现此错误。有没有人遇到过这个错误以及关于它为什么会发生的任何建议？

SCRIPT438：对象不支持属性或方法“查找”jquery.ui.widget.js，第 479 行字符 3

我在 IE9 中遇到问题。我认为同样的问题也存在于 IE7 和 IE8 中。

这是一段代码。

我在这里使用的是 JSRender 而不是 Jquery 模板，但它不应该有很大的不同，因为我使用的是我自己的回调。

```
var oXHR = {};
var iUpload =1;

$(document).ready(function() {
    // Stuff to do as soon as the DOM is ready;

    'use strict';

    // Initialize the jQuery File Upload widget:
    $('#fileupload').fileupload({
        // Uncomment the following to send cross-domain cookies:
        //xhrFields: {withCredentials: true},
        dataType: 'json',
        url: filepath,
        formData: data,
        dropZone: $('#dropcontainer'),
        fileInput: $('input:file'),
        add: function(e, data) {

            $('#fileslist').prepend($.render([{ ID: 'upload'+iUpload, NAME: data.files[0].name, SIZE: data.files[0].size }], 'fileUploadTemplate'));

            data.context = 'upload'+iUpload;
            oXHR['upload'+iUpload] = data;

            iUpload++;
        },
        progress: function(e, data) {

            var progress = parseInt(data.loaded / data.total * 100, 10)/100;
            $('#filespending'+data.context).css('backgroundPosition',-350+(350*progress));

        },
        done: function(e, data) {
            var filedata = jQuery.parseJSON(data.jqXHR.responseText);

            console.log(filedata)
            if(filedata.STATUS){
                $('#filespending'+data.context).remove();

                $('#fileslist').prepend($.render([{ FILEID: filedata.VALUE.FILEID, NAME: filedata.VALUE.NAME, SIZE: filedata.VALUE.FILESIZE,DATEMODIFIED:filedata.VALUE.DATEMODIFIED }], 'fileListTemplate'));

            }
            else{
                $('#filespending'+data.context).addClass('erroruploadingfile');

            }

        },
        start: function(e){
            console.log('start')
            console.log(JSON.stringify(e))
        }

    });

    // Enable iframe cross-domain access via redirect option:
    $('#fileupload').fileupload(
        'option',
        'redirect',
        window.location.href.replace(
            /\/[^\/]*$/,
            '/cors/result.html?%s'
        )
    );

    $('#fileupload').unbind();
    $('#fileupload').click(function(){
        var i = 1;
        $.each(oXHR, function(key, value) {
            console.log(JSON.stringify(oXHR[key]))
            oXHR[key] = oXHR[key].submit();

            i++;
            if(i == iUpload) {
                iUpload = 1;
                oXHR = {};
            }

        });

    });

    // Show feedback on dragover
    $(document).bind('dragover', function(e) {
        var dropZone = $('#dropcontainer'),
            timeout = window.dropZoneTimeout;
        if(timeout) {
            clearTimeout(timeout);
        }
        if(e.target === dropZone[0]) {
            dropZone.addClass('containerdroppable');
        } else {
            dropZone.removeClass('containerdroppable');
        }
        window.dropZoneTimeout = setTimeout(function () {
            window.dropZoneTimeout = null;
            dropZone.removeClass('containerdroppable');
        }, 100);
    });

    $(document).bind('drop dragover', function (e) {
        e.preventDefault();
    });

}); 
```

我也在使用 jQuery UI Widget 1.9.1+amd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:26:00.463

我设法改进了一个更好的插件，它也适用于 IE7+ 浏览器和 Mac 浏览器。

[http://fineuploader.com/](http://fineuploader.com/)

无需 JQuery 即可轻松实现和工作。

# asp.net-mvc - 当实体位于使用 MVC 或 Web API 的另一层时，模型文件夹将为空

> ID：14245036
> 
> 赞同：2
> 
> 时间：2013-01-09T19:36:27.680
> 
> 标签：asp.net-mvc, architecture, asp.net-mvc-4

我对 ASP.NET MVC 或 Web API 应用程序中的“模型”文件夹或层有疑问（我正在使用 Web API，但应该根据我的要求同时适用于这两者）。请参阅所有关于尝试使用 MVC 或 Web API 作为整个架构的基本示例，“模型”文件夹通常填充有`Customer`、`Orders`、`Address`等类。

但是，我的所有实体都已提取到它们自己的域/业务层，因此我在 UI 层中没有模型类。

现在我仍然需要 ViewModels 作为我的 MVC 应用程序的最终成形数据，但无论对于需要视图的 MVC 或注入的存储库在没有视图的情况下返回成形数据的 Web API，我仍然不需要“模型”文件夹在我的 UI 层中将这些实体移植到另一个单独的层时。

这个可以吗？在使用 MVC 的情况下，我在 UI 层中可能仍然没有任何模型类，“模型”文件夹是否需要包含我的 ViewModel，如此处所讨论的？[胖模型/瘦控制器与服务层](https://stackoverflow.com/questions/8735466/fat-model-thin-controller-vs-service-layer)我认为将“模型”文件夹留空并创建一个单独的“视图模型”文件夹更有意义，以显示模型*存在*，但在另一层。

感谢您对其中的每个问题提供帮助，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:39:46.790

你做对了。在一个重要的 MVC 应用程序中，您的 Models 文件夹通常只包含 ViewModel。如果您的 ViewModel 在另一层，那也没关系。

虽然 ASP.NET MVC 是一个固执己见的框架，并且必须遵循某些约定，但*模型*的位置并不是其中之一。然而，改变你的观点是另一回事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T19:41:40.113

我认为这没有任何区别。如果你想为新手开发者节省 2 分钟的时间，你可以在空的模型文件夹中放置一个 README.TXT。

# android - 如何在 Mac 上构建 adb（Windows 版）

> ID：14245037
> 
> 赞同：0
> 
> 时间：2013-01-09T19:36:30.953
> 
> 标签：android, adb

在获得最新的 Android 开源项目 (AOSP) 源代码并在 Mac 上构建后，我在 /aosp/out/host/darwin-x86/bin/adb 中获得了 adb 的 Mac 版本。这是预期的。

如何在 Mac 上构建 Windows 版本的 adb？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:00:20.713

谷歌搜索了一下后，我发现了一个 GitHub 项目。 [这](https://github.com/karfield/adb)可能对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-15T08:07:38.930

在 AOSP 中，构建 adb.exe 步骤：

1.  源构建/envsetup.sh

2.  午餐
    `choice **aosp_x86-eng** number`

3.  制作 host_cross_adb -j16

# ajax - 异地文件/目录的 AJAX HEAD 请求

> ID：14245044
> 
> 赞同：0
> 
> 时间：2013-01-09T19:36:51.803
> 
> 标签：ajax

我有一个 AJAX 调用来检查文件是否存在。成功显示文件，失败不显示。`type: HEAD,`对 AJAX的属性进行故障排除。它在被调用的 URL 前加上脚本起源的域。

```
$(document).ready(function(){

    var agentuid = $('#agentuid').val();
    var imgurl = 'http://www.universaldynamicmedia.com/sandbox/singleprop_img/agencies/' + agentuid  + '.png';
    var img = '<img id="firm_pic"  src="' + imgurl + '" />';

    $.ajax({
        url: imgurl,
        type:'HEAD',
        error: function() {
            $('#firmlogo').append('<h1>FAIL!</h1>');
        },
        success: function() {
            $('#firmlogo').html('<h1>SUCCESS!</h1>');
        }
    });
}); 
```

当它试图找到 中定义的 url 时`var imgurl`，它会返回一个错误：

```
XMLHttpRequest cannot load http://theimgurl.com/image1.png Origin http://www.therequesturl.com is not allowed by Access-Control-Allow-Origin. 
```

有没有办法跨域一个 HEAD 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:46:14.727

当您的请求成功时，没有内容可以限制您（因为 head 请求），但是当您收到错误时，会发送错误文档（我只在 Apache 中检查过），因此有内容要阻止到 SOP。[http://jsfiddle.net/mowglisanu/DGa7V/5/](http://goo.gl/EImOSX)

# php - 在表单中将数组作为选项的值传递

> ID：14245045
> 
> 赞同：0
> 
> 时间：2013-01-09T19:36:56.480
> 
> 标签：php, html, forms

我目前正在尝试将数组作为选择中选项的值发送，但在发送表单后我无法访问数据。

```
echo '<select id="domainResults_domaines" name="domainResults_domaines">';
foreach($domainsFound as $domain){
    echo '<option value="'.$domain.'">'.$domain['domaine'].'</option>';
}
echo '</select>'; 
```

该`$domain`数组包含 2 个值，我希望能够在发送表单后访问这两个值。有没有办法将数组作为值发送，或者是否有另一种方法可以在单个选项中传递 2 个变量？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:38:32.230

尝试：

```
echo '<select id="domainResults_domaines" name="domainResults_domaines">';
foreach($domainsFound as $key=>$value){
    echo '<option value="'.$key.'">'.$value.'</option>';
}
echo '</select>'; 
```

查看[PHP foreach](http://php.net/manual/en/control-structures.foreach.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:39:47.783

值必须是字符串，您可以使用 json_encode 之类的东西来设置值，并使用 json_decode 将数组返回到服务器端。

```
foreach($domainsFound as $domain){
    echo '<option value="'.htmlspecialchars(json_encode($domain)).'">'.$domain['domaine'].'</option>';
} 
```

# python - 如何在 Python 中获取 UTF-8 中的所有空格？

> ID：14245053
> 
> 赞同：2
> 
> 时间：2013-01-09T19:37:18.420
> 
> 标签：python, utf-8, python-2.7

> **可能重复：**
> [在 Python 中，如何列出与 POSIX 扩展正则表达式 `[:space:]` 匹配的所有字符？](https://stackoverflow.com/questions/8921365/in-python-how-to-list-all-characters-matched-by-posix-extended-regex-space)

如何在 Python 中获取 UTF-8 中所有空格的列表？包括不间断空间等。我使用的是 python 2.7。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T19:52:34.047

[`unicodedata.category`](http://docs.python.org/2.7/library/unicodedata.html#unicodedata.category)将告诉您任何给定字符的类别代码；你想要的字符有代码`Zs`。除了遍历所有字符之外，似乎没有任何方法可以提取类别中的字符列表：

```
>>> for c in xrange(sys.maxunicode+1):
...     u = unichr(c)
...     if unicodedata.category(u) == 'Zs':
...         sys.stdout.write("U+{:04X} {}\n".format(c, unicodedata.name(u)))
... 
U+0020 SPACE
U+00A0 NO-BREAK SPACE
U+1680 OGHAM SPACE MARK
U+180E MONGOLIAN VOWEL SEPARATOR
U+2000 EN QUAD
U+2001 EM QUAD
U+2002 EN SPACE
U+2003 EM SPACE
U+2004 THREE-PER-EM SPACE
U+2005 FOUR-PER-EM SPACE
U+2006 SIX-PER-EM SPACE
U+2007 FIGURE SPACE
U+2008 PUNCTUATION SPACE
U+2009 THIN SPACE
U+200A HAIR SPACE
U+202F NARROW NO-BREAK SPACE
U+205F MEDIUM MATHEMATICAL SPACE
U+3000 IDEOGRAPHIC SPACE 
```

（注意：如果您使用 Python 3.4 或更高版本进行此测试，蒙古元音分隔符将不会出现在列表中。Python 2.7 附带来自 Unicode 5.2 的数据；此字符在 Unicode 6.3 中被重新分类为通用类别 Cf（“格式控制”） , 这是 Python 3.4 用于其数据的版本。请参阅[https://codeblog.jonskeet.uk/2014/12/01/when-is-an-identifier-not-an-identifier-attack-of-the- mongolian-vowel-separator/](https://codeblog.jonskeet.uk/2014/12/01/when-is-an-identifier-not-an-identifier-attack-of-the-mongolian-vowel-separator/)和[https://www.unicode.org/L2/L2013/13004-vowel-sep-change.pdf](https://www.unicode.org/L2/L2013/13004-vowel-sep-change.pdf)以获得比您可能需要的更多详细信息。）

您可能还想包括类别`Zl`和`Zp`，这增加了

```
U+2028 LINE SEPARATOR
U+2029 PARAGRAPH SEPARATOR 
```

而且您几乎可以肯定想要包含所有通常被认为是空白的 ASCII 控制字符——出于历史原因（我想），这些都在 category 中`Cc`。

```
U+0009 CHARACTER TABULATION  ('\t')
U+000A LINE FEED (LF)        ('\n')
U+000B LINE TABULATION       ('\v')
U+000C FORM FEED (FF)        ('\r')
U+000D CARRIAGE RETURN (CR)  ('\f') 
```

其他 60 多个`Cc`字符不应*被*视为空格，*即使*它们的正式名称听起来像是空格。例如，`U+0085 NEXT LINE`几乎从来没有在野外遇到过它的官方含义；它更有可能是从 Windows-1252 到 UTF-8 的错误转换的结果`U+2026 HORIZONTAL ELLIPSIS`。

一个密切相关的问题是“ `\s`Python 正则表达式中的匹配项是什么？” 再次回答这个问题的最佳方法是遍历所有字符：

```
>>> s = re.compile(ru"^\s$", re.UNICODE)
>>> for c in range(sys.maxunicode+1):
...   u = unichr(c)
...   if s.match(u):
...      sys.stdout.write("U+{:04X} {}\n".format(
...        c, unicodedata.name(u, "<name missing>")))
U+0009 <name missing>
U+000A <name missing>
U+000B <name missing>
U+000C <name missing>
U+000D <name missing>
U+001C <name missing>
U+001D <name missing>
U+001E <name missing>
U+001F <name missing>
U+0020 SPACE
U+0085 <name missing>
U+00A0 NO-BREAK SPACE
U+1680 OGHAM SPACE MARK
U+180E MONGOLIAN VOWEL SEPARATOR
U+2000 EN QUAD
U+2001 EM QUAD
U+2002 EN SPACE
U+2003 EM SPACE
U+2004 THREE-PER-EM SPACE
U+2005 FOUR-PER-EM SPACE
U+2006 SIX-PER-EM SPACE
U+2007 FIGURE SPACE
U+2008 PUNCTUATION SPACE
U+2009 THIN SPACE
U+200A HAIR SPACE
U+2028 LINE SEPARATOR
U+2029 PARAGRAPH SEPARATOR
U+202F NARROW NO-BREAK SPACE
U+205F MEDIUM MATHEMATICAL SPACE
U+3000 IDEOGRAPHIC SPACE 
```

（我不知道为什么`unicodedata.name`不知道控制字符的名称。同样，如果您使用 Python 3.4 或更高版本进行此测试，蒙古元音分隔符将不会出现在列表中。）

这是所有的`Z*`字符，所有`Cc`普遍认为是空白的字符，还有五个额外的*不*普遍认为是空白的字符，U+001C、U+001D、U+001E、U+001F和U +0085。包含最后一组是一个错误，但在很大程度上是无害的，因为*将*这些字符用于任何事情*也是*一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T20:39:25.357

`Zs`类别可能还不够：

```
#!/usr/bin/env python
import sys
import unicodedata

import regex # $ pip install regex

for i in xrange(sys.maxunicode + 1):
    u = unichr(i)
    if regex.match(u"[[:space:]]", u):
        try:
            name = unicodedata.name(u)
        except ValueError:
            name = ""
        print("{:9s} {} {}".format(repr(u), unicodedata.category(u), name)) 
```

### 输出

```
u'\t'     Cc 
u'\n'     Cc 
u'\x0b'   Cc 
u'\x0c'   Cc 
u'\r'     Cc 
u' '      Zs SPACE
u'\x85'   Cc 
u'\xa0'   Zs NO-BREAK SPACE
u'\u1680' Zs OGHAM SPACE MARK
u'\u180e' Zs MONGOLIAN VOWEL SEPARATOR
u'\u2000' Zs EN QUAD
u'\u2001' Zs EM QUAD
u'\u2002' Zs EN SPACE
u'\u2003' Zs EM SPACE
u'\u2004' Zs THREE-PER-EM SPACE
u'\u2005' Zs FOUR-PER-EM SPACE
u'\u2006' Zs SIX-PER-EM SPACE
u'\u2007' Zs FIGURE SPACE
u'\u2008' Zs PUNCTUATION SPACE
u'\u2009' Zs THIN SPACE
u'\u200a' Zs HAIR SPACE
u'\u2028' Zl LINE SEPARATOR
u'\u2029' Zp PARAGRAPH SEPARATOR
u'\u202f' Zs NARROW NO-BREAK SPACE
u'\u205f' Zs MEDIUM MATHEMATICAL SPACE
u'\u3000' Zs IDEOGRAPHIC SPACE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:52:02.853

unicode 数据库中的官方空格字符列表是通过“Zs”类别定义的：

[http://www.fileformat.info/info/unicode/category/Zs/list.htm](http://www.fileformat.info/info/unicode/category/Zs/list.htm)

我不确定 Python 的 unicodedata 模块中是否有功能。我怀疑：您可以查看所有字符并根据“Zs”检查它们的类别。

# java - Eclipse jvm.dll 加载时出错

> ID：14245055
> 
> 赞同：7
> 
> 时间：2013-01-09T19:37:26.117
> 
> 标签：java, eclipse, dll, path

几个月后尝试打开 Eclipse 并收到此错误：

![日食错误](../Images/156d8b89832e6c231c386ab3d0996762.png)

所以我检查了那个文件夹，看看它是否存在，它确实存在：

![JVM.dll](../Images/c2a1a02d91f67d234b45cdeb32824670.png)

我检查了我的 PATH 是正确的，它也是正确的：

![计算机路径](../Images/cbf42d554bc465e1f1ba2437165e35db.png)

首次出现此错误时，我安装了 3 个 Java。JRE 7 更新 10、JDK 7 更新 7 32 位和 64 位。

我卸载了所有并重新启动了我的机器。Eclipse 然后说，正如预期的那样，我需要一个 JRE 或一个 JDK。所以我下载并安装了最新的 JDK，现在我得到了这个错误，尽管一切看起来都是正确的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T19:57:24.317

按照评论中的要求。

您的 eclipse 版本正在搜索 jdk 的 x86 版本（您可能在 eclipse 启动时设置了此值）。您应该检查您的 Eclipse 是否是 64 位版本，如果不是，请切换到 64 位 jvm。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-02T09:48:49.780

问题在于 jdd 6 与 eclipse 的兼容性问题。我尝试了 jdk 7，它运行良好。这是 jdk 7 下载的链接 [http://download.cnet.com/Java-Development-Kit-64-Bit/3000 -2218_4-75317068.html](http://download.cnet.com/Java-Development-Kit-64-Bit/3000-2218_4-75317068.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-17T09:32:43.487

问题出在 Eclipse 版本上。我遇到了完全相同的问题，我使用的是 Eclipse helios。我切换到 Eclipse Kepler 64 位，现在它在我的系统上运行良好。即使 eclipse 是 64 位的，某些版本也可能与使用相同 Java 路径的其他软件不兼容（例如：Oracle BI Publisher）。确保使用与他人兼容的版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-21T14:12:19.697

## 修复打开 Eclipse 时 :: jvm.dll 文件丢失的问题

出现此问题是因为（64 或 32 位）版本冲突/不匹配发生在

1.  安装的操作系统，
2.  Java（JDK）版本和
3.  日食版。

我得到了这个问题并以这种方式修复它。通过在 eclipse.ini 中添加以下参数（64 位 Java（JDK）路径）。

```
-vm
C:\Program Files\Java\jdk1.8.0_144\bin 
```

## 我的环境，详情如下

1.  我的是windows-7 64位操作系统，
2.  Java(JDK) 64 位（所以在 eclipse.ini 中指定的路径）
3.  Eclipse 64 位（永远不要通过查看 win32.x86 将 Eclipse 版本混淆为 32 位，请参阅后面的 _64），即我使用下面的 Eclipse 版本。

org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.500.v20170511-1520 **_** _

您可以在 eclipse.ini 文件中查看您的 eclipse 版本。

笔记：

我在我的机器上安装了另一个 Eclipse（插件工具），它有同样的问题，期待 32 位 Java（JDK），在我通过在环境变量中设置 32 位 Java1.8 的路径解决了这个问题后，主 Eclipse 停止了在职的。

所以我在eclipse.ini中设置了64bit Java1.8路径。

现在 eclipse.exe 和我的 plugintool eclipse 工作正常。

谢谢， 穆拉利

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-05T12:43:24.803

在这里，我们首先检查您的路径。当你的路径正确时。然后在你移动给定位置之后（他们的检查 jvm.dll 文件将被呈现或不呈现）。这种类型的问题最多出现在 64 位系统中。

这里主要关注路径。当你设置路径然后重新启动系统后。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-23T12:20:29.963

这件事昨天发生在我身上，幸运的是我找到了这篇文章。我正在使用 eclipse 并尝试使用并行的命令行编译一个类。我注意到 javac 命令不在 Path 环境变量中，所以我添加了。之后，我关闭了 Eclipse，当我尝试重新启动 IDE 时，我发现“*无法加载 JNI 共享库*”错误。我打开了环境变量对话框，并将 java bin 路径指向了兼容的 java 版本（eclipse 和 jdk 上的位版本相同）。最后我能够再次开始日食。

# c# - MapPageRoute 中的通配符

> ID：14245058
> 
> 赞同：1
> 
> 时间：2013-01-09T19:37:35.747
> 
> 标签：c#, asp.net, url-rewriting, routing, webforms

我有一个 webforms 项目，我在其中使用 System.Web.Routing.RouteCollection.MapPageRoute 重写 URL，但我遇到了一些动态 URL 的问题。我的 URL 可能如下所示；

```
/folder/city-1-2-something.aspx 
```

这个 MapPageRoute 看起来像这样

```
routeCollection.MapPageRoute("CompanyCity", "folder/city-{id}-{pid}-{title}.aspx", "~/mypage.aspx"); 
```

但我意识到有些 URL 可能看起来像这样

```
/folder/city-2-2-something-something.aspx
/folder/city-2-2-something-something-something.aspx
/folder/city-2-2-something-something-something-something.aspx 
```

我的路由并没有正确识别这些 - 第一个示例最终会得到结果 id = 2-2 和 pid = something 而不是 id = 2 和 pid = 2。

{title} 不重要 - 仅使用 {id} 和 {pid}。我有几条通往特定文件夹的类似路线，所以据我所知，我不能使用全部捕获。但是我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T23:47:12.200

下面的简单 RouteConfig 包含一个与您完全匹配的 TestRoute。仅此而已，因此从某种意义上说，它是非常糟糕的代码。

但想法是现在可以使用正则表达式，它可以很容易地满足您的需求。（命名组“id”`(?<id>\d)`和“pid”`(?<pid>\d)`只匹配数字（`\d`）为什么它们只会匹配到下一个破折号。）

希望能给大家一些启发。

```
using System.Text.RegularExpressions;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;

namespace InfosoftConnectSandbox
{
    public class RouteConfig
    {
        class TestRoute : RouteBase
        {
            Regex re = new Regex(@"folder/city-(?<pid>\d)-(?<id>\d)-.*");

            public override RouteData GetRouteData(HttpContextBase httpContext)
            {
                var data = new RouteData();

                var url = httpContext.Request.Url.ToString();

                if (!re.IsMatch(url))
                {
                    return null;
                }

                foreach (Match m in re.Matches(url))
                {
                    data.Values["pid"] = m.Groups["pid"].Value;
                    data.Values["id"] = m.Groups["id"].Value;
                }

                data.RouteHandler = new PageRouteHandler("~/mypage.aspx");

                return data;
            }

            public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
            {
                return new VirtualPathData(this, "~/mypage.aspx");
            }
        }

        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.Add(new TestRoute());

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );
        }
    }
} 
```

# jqgrid - jqgrid中的页脚行是否可选择/可点击？

> ID：14245061
> 
> 赞同：1
> 
> 时间：2013-01-09T19:37:48.140
> 
> 标签：jqgrid, user-data

我有一个 jqgrid，它有主行和页脚行（加载了用户数据），然后是一个格式化程序，它将单元格中的数据更改为可链接。可以单击主体中的单元格，onCellSelect 事件将捕获单击。但是，单击页脚行中的数据似乎不会触发 onCellSelect 事件。如何在页脚行中捕获选择/单击事件？下面是 jqgrid 的脚本。

```
$('#jqgSummaryResults').jqGrid({
        datatype: 'json',
        mtype: 'GET',
        url: 'some action',
        postData: { 'criteria': function () {
           some function}},
        rowNum: 100,
        rowList: [],
        pager: '#jqgpSummaryResults',
        viewrecords: true,
        sortorder: 'asc',
        sortname: 'DateField',
        width: 1250,
        height: 350,
        shrinkToFit: true,
        gridview: true,
        footerrow: true,
        userDataOnFooter: true,
        onCellSelect: function (rowid, iCol, cellcontent, e) {
            var selectedDate = rowid;
            savedMailDueDateString = rowid;
            var selectedColumn = iCol;
            ...
        },
        loadComplete: function (data) {
            ...
        },
        colNames: ['DateField',
                    'Total Jobs',
                    ...
                    '% Not Mailed'],
        colModel: [
                    { name: 'DateField', index: 'DateField', align: 'left' },
                    { name: 'TotalJobs', index: 'TotalJobs', align: 'left', formatter: hyperlinkColumnFormatter },
                    ...
                    { name: 'PercentNotMailed', index: 'PercentNotMailed', align: 'left', formatter: hyperlinkColumnFormatter },
                    ]
    }).navGrid('#jqgpSummaryResults', {
        excel: false,
        edit: false,
        add: false,
        del: false,
        search: false,
        refresh: false
    }); 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:33:16.510

虽然我没有看到任何让 jqGrid 响应选择（甚至似乎该页脚不是可选择的）或单击的方法。页脚行由`ui-jqgrid-sdiv`类指定。您可以附加一个单击事件处理程序，如下所示。

```
$('.ui-jqgrid-sdiv').click(function() {alert('Bong')}); 
```

编辑：响应 Gill Bates 的问题，添加页脚事件，但仅在单个单元格上，选择器将是：

```
$('.ui-jqgrid-sdiv').find('td[aria-describedby="GridName_ColumnName"]').click(function() { alert("Bong");}); 
```

GridName_ColumnName 是所有页脚 td aria- describeby 的格式，您可以通过 firebug 元素检查器（或其任何等效项）查看确切名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:52:43.193

jqGrid`click`在主网格上注册事件`<table>`，但它`onCellSelect`并不总是调用。首先（见[这里](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.base.js#L2434-L2437)`click`）它测试一些额外的条件，然后如果条件失败则返回（忽略事件）。例如，如果单击网格的分组标题，`onCellSelect`则不会处理回调。

页脚行的问题，因为它存在于网格*之外*。主要`<table>`元素放置在内部`div.ui-jqgrid-bdiv`，但页脚位于*另一个表格*内部，该表格位于内部`div.ui-jqgrid-sdiv`。可以使用 Internet Explorer、Google Chrome、Firebug 或其他开发者工具检查 jqGrid 的 HTML 结构。将看到以下内容

![在此处输入图像描述](../Images/5883cc6847a7a87f3d0eed0c2f5b2093.png)

主要`<table>`元素（`<table id="list">`在上图中，获得类“ui-jqgrid-btable”）和另一个带有页脚的表格元素（获得类“ui-jqgrid-ftable”）是**分开**的。

所以马克对你的问题的第一回答是正确的。如果页面上有多个网格，则可以使用指定特定网格的页脚

```
var $grid = $('#jqgSummaryResults'); // one specific grid

.... // here the grid will be created

$grid.closest(".ui-jqgrid-view").find(".ui-jqgrid-sdiv").click(function() {
    // do in case of the footer is clicked.
    var $td = $(e.target).closest("td"),
        iCol = $.jgrid.getCellIndex($td); // or just $td[0].cellIndex,
        colModel = $grid.jqGrid("getGridParam", "colModel");

   // $td - represents the clicked cell
   // iCol - index of column in footer of the clicked cell
   // colModel[iCol].name - is the name of column of the clicked cell
}); 
```

PS 在[旧答案](https://stackoverflow.com/a/3463002/315935)中描述了网格的许多其他元素。描述不完整，但可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T09:43:39.940

这里很少实现这个问题，我是 jquery 和 jqgrid 的新手，但我遇到了同样的问题，感谢@Oleg 和 @Mark 上面的两个帖子，我实现了类似的东西：

//Raport1Grid - 我的 jqgrid 的名称 //endusers
, adminusers,decretusers - 我在 colModel 中的行的名称
//Raport1Grid_endusers - GridName_ColumnName

```
var endUsers = $("[aria-describedby='Raport1Grid_endusers']").click(function(){
    //remove previous style of selection
    $('.ui-jqgrid-ftable').find('.selecteClass').removeClass('selecteClass');
    //set selection style to cell
    $(endUsers).addClass('selecteClass');    
}); 
```

//也可以获取selectedCell的值

```
 var qwer = $("[aria-describedby='Raport1Grid_endusers']").text();
 alert(qwer); 
```

在这里演示 [http://jsfiddle.net/Tobmai/5ju3py83/](http://jsfiddle.net/Tobmai/5ju3py83/)

# cygwin - 带有 Cygwin 的 Windows XP 上的 PIG

> ID：14245063
> 
> 赞同：0
> 
> 时间：2013-01-09T19:37:52.357
> 
> 标签：cygwin, apache-pig

我用 Cygwin 在 windows xp 上安装了 PIG (0.10.0)。我还设置了 JAVA_HOME 变量。但是现在当我运行 pig -help 时，我得到“找不到 pig.jar。做 'ant jar'，然后再试一次”。我没有安装hadoop（使用嵌入式版本）。

另外，当我在设置 JAVA_HOME 后第一次运行命令时，我收到以下警告：

cygwin 警告：检测到 MS-DOS 样式路径：C:\Pig\PIG-01~1.0/pig.jar 首选 POSIX 等效项是：/cygdrive/c/Pig/PIG-01~1.0/pig.jar CYGWIN 环境变量选项“ nodosfilewarning”关闭此警告。有关 POSIX 路径的更多详细信息，请参阅用户指南： ... 找不到 pig.jar。做'ant jar'，然后再试一次

我无法找到它正在读取此路径的位置。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:45:26.213

我可以回答您的具体问题，但必须警告您，我还没有让 pig 在我的 PC 上的 cygwin UNIX 模拟器上工作。我会告诉你我所知道的。

消息：'找不到 pig.jar。做'ant jar'然后再试一次。来自 pig shell 脚本末尾附近的一段代码。您正在使用 pig-0.10.0。我试图让 pig-0.11.1 工作，但收到与您相同的错误消息。如果未安装 Hadoop，则在 shell 脚本中没有将环境变量 HADOOP_BIN 指向的目录，因为脚本使用 - HADOOP_BIN= `which hadoop`- 来设置它。因此，在脚本接近尾声时，没有设置 HADOP_BIN，代码分支到需要 pig.jar 或 pig-?.!(*withouthadoop).jar 在 $PIG_HOME 给定的位置，放入变量 PIG_JAR。您的 shell 脚本都找不到这些，因此 PIG_JAR 为空，因此出现错误消息。

如果 [ -n "$PIG_JAR" ]; 然后
CLASSPATH="${CLASSPATH}:$PIG_JAR"
else
echo "Cannot locate pig.jar. do 'ant jar, and try again"
exit 1
fi

java 容器 pig.jar 不存在于您的目录中，因为 pig 尚未使用 ant 构建。但实际上，脚本应该找到 pig.?.!(*withouthadoop).jar。您的目录中将有 pig-0.10.0.jar，模式匹配意味着 pig- 后跟单个字符，后跟 . 后面是任何东西，除了以 'withouthadoop' 结尾的东西，然后是 .jar 。'withouthadoop' 表示 jar 不包含嵌入的 hadoop，因此必须已经安装了 hadoop。如果未安装 hadoop，则 pig-0.10.0.jar 似乎应该没问题。

那为什么找不到呢？在 shell 脚本中有一小段代码供在 cygwin UNIX 中运行脚本的人使用：

如果 $cygwin; 然后
CLASSPATH= `cygpath -w "$CLASSPATH"`
PIG_HOME= `cygpath -d "$PIG_HOME"`
PIG_LOG_DIR= `cygpath -d "$PIG_LOG_DIR"`
fi

这会将传递给 java.exe 的路径转换为 ​​java.exe 可以理解的形式，因为它是 Windows 可执行文件。我发现在这些表达式中使用 -m 而不是 -w 或 -d - 让 cygpath 使用正斜杠将例如 /cygdrive/c/Program Files/Java .. 转换为 c:/Program Files/Java .. - 这-m 规定 - 有效。

在 pig.jar 中使用 'cannot find org.apache.pig.Main ' 经历了更多痛苦之后（是的，我在弄清楚上述内容之前'anted'它）我终于得到了一个'grunt>'提示。为了实现这一点，我对 pig shell 脚本所做的更改是：

*   删除整个 if $cygwin; ... 上面描述的 fi 块。我假设将 $PIG_HOME 转换为 Windows 文件路径格式会导致代码块： if [-f $PIG_HOME/pig.jar]; 然后; PIG_JAR=$PIG_HOME/pig.jar; 别的; 猪罐= `echo $PIG_HOME/pig-?.!(*withouthadoop).jar`; fi 抛出您看到的错误：cygwin 警告，检测到 MS-DOS 样式路径：c:\pig\pig-01~1/pig.jar 等。

*   在删除 cygwin 路径转换块的位置之后，将 PIG_OPTS 变量设置重写为：

PIG_OPTS="$PIG_OPTS -Dpig.log.dir= `cygpath -m $PIG_LOG_DIR`"
PIG_OPTS="$PIG_OPTS -DPIG.log.file=pig.log"
PIG_OPTS="$PIG_OPTS -Dpig.home.dir= `cygpath -m $PIG_HOME`"

*   将调用 java.exe - exec "$JAVA" .. 的 shell 脚本末尾的代码行重写为：

exec "$JAVA" $JAVA_HEAP_MAX $PIG_OPTS -classpath " `cygpath -p -m $CLASSPATH`" $CLASS "${remaining[@]}"

*   在您的 PIG_HOME 中创建一个“日志”目录

*   将以下导出条目放入主目录中的 .bashrc 文件中，以在 bash shell 启动时初始化环境变量：

export PATH="$PATH:/cygdrive/c/Program Files/Java/jdk-your_version/bin:/cygdrive/..your-pig-home/bin"
export JAVA_HOME="/cygdrive/c/Program Files/Java/ jdk-your_version"
导出 CLASSPATH=""

所有这一切让我输入“pig -x local”并得到一个“grunt>”提示。有趣的是，通过下载 pig-0.7.0，解压 pig-0.7.0.tar.gz 文件并在本地运行 pig -x，它可以立即使用。相同的 'grunt>' 提示。

但是，不幸的是，这是一个骗局。在这两种情况下。虚假的咕噜声 - 口技师的咕噜声。箭头键将光标移动到整个提示符上-实际上是屏幕上您喜欢的任何位置-返回键不输入任何内容，无论您输入了什么，只有控制+反斜杠有效，以返回美元提示符。如果您到了这一点并了解正在发生的事情，请告诉我。

# jquery - 滚动停止脚本不适用于我的响应式网站

> ID：14245064
> 
> 赞同：1
> 
> 时间：2013-01-09T19:37:52.820
> 
> 标签：jquery, mousewheel

我找不到这个问题的答案，但如果有人找到类似的讨论，请告诉我。

所以我的问题是我有鼠标滚轮脚本：[https ://raw.github.com/brandonaaron/jquery-mousewheel/master/jquery.mousewheel.js](https://raw.github.com/brandonaaron/jquery-mousewheel/master/jquery.mousewheel.js)

使用这个 jQuery 脚本：

```
$(function() {

  var toolbox = $('#projects'),
      height = toolbox.height(),
      scrollHeight = toolbox.get(0).scrollHeight;

  toolbox.bind('mousewheel', function(e, d) {
    if((this.scrollTop === (scrollHeight - height) && d < 0) || (this.scrollTop === 0 && d > 0)) {
      e.preventDefault();
    }
  });

}); 
```

要阻止左侧面板滚动整个页面，如下所示： http: [//probando.rayniel.com](http://probando.rayniel.com)，但是，当您更改响应阶段时，网站会完全忽略所有脚本，并且仅在您开始的响应阶段工作. 而且只有那个阶段，除非你刷新。

我尝试寻找其他解决方案，但我喜欢这个脚本，因为它保留了自然流畅的滚动。

另外，我创建了一个名为“mousescroll”的类，它只在您将鼠标悬停在可滚动区域上时显示滚动条。

我希望我很清楚，我很感激任何帮助，在此先感谢您！

# .net - 避免为客户端下载 debug.js 文件

> ID：14245066
> 
> 赞同：0
> 
> 时间：2013-01-09T19:37:58.423
> 
> 标签：.net, visual-studio-2010, knockout.js

我在文件中放入了下面提到的淘汰赛 js 参考`_Layout.cshtml`。

```
<script src="@Url.Content("~/Scripts/knockout-2.2.0.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/knockout-2.2.0.debug.js")" type="text/javascript"></script> 
```

我已将`debug.js`文件仅用于Visual Studio 2010**中的智能感知支持。**

**我的问题是：**

当我发布我的应用程序时，如何避免为客户端下载文件。`debug.js`换句话说`debug.js`，仅针对开发环境限制文件（不适用于客户端下载）。

**如何在 ASP.NET 中做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:40:26.387

一种常见的方法是使用一个标志来指示例如`DEVELOPMENT_MODE = true;`。然后用检查该标志的逻辑包装`<script>`声明，并且仅在其为真时才包含脚本。

我不是一个`.net`人，但在 PHP 中是这样的：

```
define('DEVELOPMENT_MODE', true);
...
if(DEVELOPMENT_MODE){
   echo '<script type="text/javascript" src="~/Scripts/knockout-2.2.0.debug.js"></script>';
} 
```

当然，在部署您的应用程序之前，您需要设置`DEVELOPMENT_MODE`为 false（手动或通过 Ant 等）。

干杯

# asp.net-mvc-3 - 如何使用 ASP 和 Windows 7 解决“拒绝访问”问题？

> ID：14245069
> 
> 赞同：0
> 
> 时间：2013-01-09T19:38:04.417
> 
> 标签：asp.net-mvc-3

我正在尝试保存这样的文件：

```
 FileStream file = 
     new FileStream(“C:\\temp”, FileMode.Create, System.IO.FileAccess.Write);
 Byte[] bytes = new byte[file.Length];
 File.Read(bytes, 0, (int)file.Length);
 File.Write(bytes, 0, bytes.Length);
 File.Close();
 File.Close(); 
```

然后我得到这个错误：

> 拒绝访问路径“C:\temp”。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.UnauthorizedAccessException：对路径“C:\temp”的访问被拒绝。
> 
> ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 和 IIS 7 上的网络服务，以及 IIS 7.5 上配置的应用程序池标识），如果应用程序不是模拟的，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。要授予 ASP.NET 对文件的访问权限，请在文件资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加适当的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的框。

我已经在我的 Windows 7 和 Windows 8 机器上完成了此操作，并收到了相同的错误消息。我已经更改了电脑上的管理员角色，完全控制了所有用户，从文件中删除了“只读”属性，但仍然出现同样的错误。我什至尝试使用拇指驱动器。

我还注意到，从文件中删除“只读”属性后，它总是返回，就好像设置没有被采用一样。

我还尝试使用 Windows 7 机器进行此修复：http: [//fixmywin.com/fix-windows-7-access-denied-error-and-permission-ownership-problem](http://fixmywin.com/fix-windows-7-access-denied-error-and-permission-ownership-problem/...but) /...但仍然是相同的错误。我在大约几个小时后放弃了这个问题。我怎样才能解决这个问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:19:55.693

在 IIS 中查看站点正在运行的应用程序池，选择“高级设置”并找到应用程序池正在使用的用户。这通常是“网络服务”，除非您特别更改它。然后，右键单击文件夹 c:\temp >> 属性 >> 安全并添加“网络服务”（或其他用户），并为您的应用添加“修改”、“完全控制”或适当的权限。

# python-2.7 - Python中的foreach循环where子句类似于c#LINQ

> ID：14245078
> 
> 赞同：1
> 
> 时间：2013-01-09T19:38:38.300
> 
> 标签：python-2.7

我正在尝试在 python 中复制 ac# LINQ foreach 语句。我确信有更好的方法。

假设我有（在 c# 中）：

```
 public class TestData
    {
        public int Id { get; set; }
        public string Something { get; set; }
    }

    void MyMethod()
    {
        List<TestData> myList = new List<TestData>();
        foreach (var i in myList.Where(x => x.Id > 5))
        {
            //do something
        }
    } 
```

我想在 python (2.7) 中做类似的事情。我需要的只是 foreach 循环。其他一切我都下来了。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T19:47:18.090

是的，这很容易。带有方括号的东西称为[List Comprehension](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)。

```
for i in [x for x in myList if x.Id > 5]:
    pass #do something 
```

# php - 在 PHP 中格式化 Echo 语句

> ID：14245085
> 
> 赞同：0
> 
> 时间：2013-01-09T19:38:55.837
> 
> 标签：php, wordpress, echo, interpolation, string-interpolation

将这个 PHP 语句重新格式化为“Copyright © 2013 My Company。保留所有权利”的正确方法是什么。（不带引号）？

`<?php _e('All Rights Reserved', 'mycompany'); ?> <a href="/">My Company</a> &copy; <?php echo date('Y');?>`

截至目前，上述声明与“All Rights Reserved My Company © 2013”​​相呼应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T19:40:09.730

如果您在 Wordpress 中工作，此解决方案利用国际化功能（未经测试，如果这不能按预期工作，请告诉我！）：

```
<?php _e('Copyright &copy; ' . date('Y', time()) . ' My Company. All rights reserved.', 'mycompany'); 
```

否则，一个直接的 PHP 解决方案是：

```
<?php print 'Copyright &copy; ' . date('Y', time()) . ' My Company. All rights reserved.'; ?> 
```

# .net - 如果 Windows 服务在停止时没有退出线程会发生什么？

> ID：14245089
> 
> 赞同：2
> 
> 时间：2013-01-09T19:39:12.653
> 
> 标签：.net, multithreading, c#-4.0, windows-services

我有一个运行多个线程的 .NET Windows 服务。开发人员向其中添加了一些新线程，但忘记添加代码以在服务停止之前退出线程。当我停止服务时，它似乎正常停止，但服务停止后exe进程继续运行几秒钟。在此期间发生了什么以及线程发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:54:27.273

我认为存在延迟是因为服务倾向于做被认为“更重要”的事情，而不是简单地为用户的按钮点击和击键提供服务，例如，关闭数据库连接、断开网络连接、停止驱动程序等。这些事情可能需要几秒钟，因此操作系统会授予一些时间来彻底关闭。但是，最终，操作系统将终止该进程，这将终止所有仍在运行的线程。

.NET 中的线程可分为前台线程或后台线程。如果您询问的线程可以突然终止而不会对您的服务正在执行的操作造成任何撤消“伤害”，请将它们标记为[后台线程](https://stackoverflow.com/questions/2794917/shutting-down-a-windows-service-that-has-threads/2795028#2795028)，以便它们不会阻止进程的终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:19:57.257

如果您不终止线程，但正确处理 ServiceStop 消息，则其他线程将继续运行约 20 秒，然后操作系统将终止服务进程，沿途终止线程。

总体来说好像没什么坏处。

# .htaccess - htaccess 中的 301 重定向规则

> ID：14245092
> 
> 赞同：0
> 
> 时间：2013-01-09T19:39:25.823
> 
> 标签：.htaccess, redirect

我究竟做错了什么？这条规则不起作用

我想要 xyz-banking(old) 到 xyzbanks(new)

> RewriteRule ^category/xyz-banking/?$ [http://www.domainname.com/category/xyzbanks/](http://www.domainname.com/category/xyzbanks/) [L,R=301]

当有多个类别转到一个新类别时...我可以这样做吗？

> RewriteRule ^category/(chicos|chs|rl)/?$ [http://www.domain.com/category/apparel/](http://www.domain.com/category/apparel/) [L,R=301]

当然，那个也行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:17:21.693

两个重写规则似乎都是正确的，它们应该可以工作。

每当您浏览到：`http://www.domain.com/category/chs/`您将被重定向到`http://www.domain.com/category/apparel/`请求等。

也许你在其他地方有问题：

*   是否启用了 mod_rewrite？
*   确保您`RewriteEngine On`在您的`.htaccess`或站点上进行了配置。
*   如果使用`.htaccess`文件，请确保您有一个`AllowOverride`指令允许您在那里使用 RewriteRule。
*   首先尝试一个简单的重定向规则！
*   检查您的错误并访问日志以查看是否可以发现任何错误或警告消息。
*   查看[URL 重写指南 - Apache HTTP 服务器](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

# python - 如何用 numpy 读取部分二进制文件？

> ID：14245094
> 
> 赞同：15
> 
> 时间：2013-01-09T19:39:30.370
> 
> 标签：python, numpy, scipy

我正在将 matlab 脚本转换为 numpy，但在从二进制文件中读取数据时遇到了一些问题。`fseek`使用`fromfile`跳过文件开头时是否有等效项？这是我需要做的提取类型：

```
fid = fopen(fname);
fseek(fid, 8, 'bof');
second = fread(fid, 1, 'schar');
fseek(fid, 100, 'bof');
total_cycles = fread(fid, 1, 'uint32', 0, 'l');
start_cycle = fread(fid, 1, 'uint32', 0, 'l'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-09T20:09:26.613

您可以以正常方式将 seek 与文件对象一起使用，然后在`fromfile`. 这是一个完整的例子：

```
import numpy as np
import os

data = np.arange(100, dtype=np.int)
data.tofile("temp")  # save the data

f = open("temp", "rb")  # reopen the file
f.seek(256, os.SEEK_SET)  # seek

x = np.fromfile(f, dtype=np.int)  # read the data into numpy
print x 
# [64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88
# 89 90 91 92 93 94 95 96 97 98 99] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T19:56:13.583

可能有更好的答案......但是当我遇到这个问题时，我有一个文件，我已经想分别访问不同的部分，这给了我一个简单的解决这个问题的方法。

例如，`chunkyfoo.bin`一个文件由一个 6 字节的标头、一个 1024 字节的`numpy`数组和另一个 1024 字节的`numpy`数组组成。您不能只打开文件并寻找 6 个字节（因为首先要做的`numpy.fromfile`是`lseek`回到 0）。但是您可以只`mmap`使用该文件并使用`fromstring`：

```
with open('chunkyfoo.bin', 'rb') as f:
    with closing(mmap.mmap(f.fileno(), length=0, access=mmap.ACCESS_READ)) as m:
        a1 = np.fromstring(m[6:1030])
        a2 = np.fromstring(m[1030:]) 
```

这听起来正是您想要做的。当然，除了在现实生活中，偏移量和长度`a1`可能`a2`取决于标题，而不是固定的注释。

标头只是`m[:6]`，您可以通过显式将其分开、使用`struct`模块或您`read`在获取数据后执行的任何其他操作来解析它。但是，如果您愿意，您可以在构造 之前、之后或什至对 进行相同的调用`seek`，并且它会工作，而不会影响and 。`read``f``m``m``a1``a2`

我为不同的非`numpy`相关项目所做的另一种方法是创建一个包装文件对象，如下所示：

```
class SeekedFileWrapper(object):
    def __init__(self, fileobj):
        self.fileobj = fileobj
        self.offset = fileobj.tell()
    def seek(self, offset, whence=0):
        if whence == 0:
            offset += self.offset
        return self.fileobj.seek(offset, whence)
    # ... delegate everything else unchanged 
```

`list`我通过在构造时生成属性并在中使用它来“委托其他所有内容不变” `__getattr__`，但您可能想要一些不那么老套的东西。`numpy`仅依赖于类文件对象的少数方法，我认为它们已正确记录，因此只需明确委派这些方法即可。但我认为该`mmap`解决方案在这里更有意义，除非您试图机械地移植一堆基于显式`seek`的代码。（您会认为`mmap`还可以选择将其保留为 a`numpy.memmap`而不是 a `numpy.array`，这样可以`numpy`更好地控制分页等/反馈。但实际上让 a`numpy.memmap`和 an`mmap`一起工作非常棘手。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T21:20:14.830

当我必须在异构二进制文件中任意读取时，我就是这样做的。
Numpy 允许通过更改数组的 dtype 以任意方式解释位[模式](http://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html)。问题中的 Matlab 代码读取 a`char`和 two `uint`。

阅读这篇[论文](http://arxiv.org/pdf/1102.1523.pdf)（在用户级别上易于阅读，而不是为科学家阅读），了解通过更改数组的 dtype、stride、维度可以实现什么。

```
import numpy as np

data = np.arange(10, dtype=np.int)
data.tofile('f')

x = np.fromfile('f', dtype='u1')
print x.size
# 40

second = x[8]
print 'second', second
# second 2

total_cycles = x[8:12]
print 'total_cycles', total_cycles
total_cycles.dtype = np.dtype('u4')
print 'total_cycles', total_cycles
# total_cycles [2 0 0 0]       !endianness
# total_cycles [2]

start_cycle = x[12:16]
start_cycle.dtype = np.dtype('u4')
print 'start_cycle', start_cycle
# start_cycle [3]

x.dtype = np.dtype('u4')
print 'x', x
# x [0 1 2 3 4 5 6 7 8 9]

x[3] = 423 
print 'start_cycle', start_cycle
# start_cycle [423] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-03T10:07:17.510

有一个相当新的特点[`numpy.fromfile()`](https://numpy.org/doc/stable/reference/generated/numpy.fromfile.html)

> **偏移** **量**
> 
> 与文件当前位置的偏移量（以字节为单位）。默认为 0。仅允许用于二进制文件。
> 
> 版本 1.17.0 中的新功能。

```
import numpy as np
import os

data = np.arange(100, dtype=np.int32)
data.tofile("temp")  # save the data

x = np.fromfile("temp", dtype=np.int32, offset=256)  # use the offset
print (x)
# [64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88
# 89 90 91 92 93 94 95 96 97 98 99] 
```

# scala - Scala 应用堆栈的理想操作系统：Fedora 或 CentOS

> ID：14245097
> 
> 赞同：-2
> 
> 时间：2013-01-09T19:39:53.800
> 
> 标签：scala, playframework, centos, fedora

我正在考虑开设一个 VPS 帐户来部署 Scala 应用程序（很可能使用 Playframework，但对 Scalatra 的可能性持开放态度）。我可能还想在这个 VPS 上编写一些 Python 脚本。

我假设性能、稳定性和安全性方面的任何一个选择都可以，但我真正的问题是：哪个操作系统*更容易*启动和使用 Scala 和 Play？我非常喜欢快速设置所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:43:11.700

如果由我决定，我会选择 CentOS。我发现它们在设置方面几乎相同，但 CentOS 会在几年后为你省去很多麻烦，因为 Fedora 达到了生命的尽头，YUM 存储库消失了。CentOS 没有绝对的最新版本，但如果有必要，你通常可以通过添加一个新的 Repo 来解决这个问题。

我在运行 Java 和 Scala webapps 方面都有经验。出于上述原因，我们几乎已经离开了 Fedora。

# sql - 从本地 SSMS Express 连接到远程服务器？

> ID：14245098
> 
> 赞同：0
> 
> 时间：2013-01-09T19:39:52.863
> 
> 标签：sql, sql-server

我正在使用我的本地电脑并安装了 SQL Server Management Studio Express 2008。我尝试连接我办公室服务器上的数据库。那么如何连接到服务器数据库？

*   服务器计算机名称：office-d1
*   服务器计算机全名：office-d1.sge.com

我在本地电脑的 sql server management studio 中的服务器名称块中写了服务器名称（office-d1\SQLExpress）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:44:22.257

> 本地服务器名称：COMP110
> 
> 网络服务器名称：NHI-DR1
> 
> ```
> When I search for network sql server and try to connect to network sql server, it displays error.
> 
> TITLE: Connect to Server
> ------------------------------
> 
> Cannot connect to NHI-DR1.
> 
> ------------------------------
> ADDITIONAL INFORMATION:
> 
> Login failed for user 'NHD\COMP110'. (Microsoft SQL Server, Error: 18456)
> 
> For help, click: http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=18456&LinkId=20476
> 
> ------------------------------
> BUTTONS:
> 
> OK
> ------------------------------ 
> ```
> 
> 但是当我尝试从网络服务器（NHI-DR1）连接我的本地服务器 COMP110 时，它运行良好。我可以从本地服务器访问所有数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:49:28.560

你的问题我不清楚。你的意思是找到服务器名称？

可以使用以下方式填充服务器名称：

- 键入时的确切名称

-IP地址（请管理员知道）

-单击下拉菜单->浏览更多->网络..并搜索您是否直接连接。

确保您的办公室 SQL 服务器配置为为您打开。如果有，请检查您的防火墙。

# php - 我如何计算数组中的哪个值在数据库中具有更大的总和

> ID：14245109
> 
> 赞同：1
> 
> 时间：2013-01-09T19:40:20.203
> 
> 标签：php, mysql

我有一个数组，每个数组在数据库中都有不同的总和（可能其中一些是空的或者没有记录）

我需要知道哪一个的总和比**所有其他的都大（在我的阵列上）**并将那个放在 $bigger 变量中，（$bigger = $value）

我的尝试：

```
$new = 0;
$myarray = array('2', '5', '17', '55');

foreach($myarray as $value) {
    $before = intval($new);

    $query = mysql_query("SELECT SUM(total) AS totals FROM table WHERE id='$value'");
    $result = mysql_fetch_assoc($query);
    $new = intval($result['totals']);

    if ($new > $before){
        $biggest=intval($value);
    }
} 
```

但它只显示新的是否比旧的具有更大的价值，而不是比所有的都大

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:47:12.777

我会完全消除循环并这样做：

```
$myarray = array('2', '5', '17', '55');
$query = "SELECT SUM(total) AS totals FROM table WHERE id IN (" . implode(', ', $myarray) . ") GROUP BY id ORDER BY totals DESC LIMIT 1";
$result = mysql_query($query);
$row = mysql_fetch_assoc($result); 
```

请注意，如果您想按排序顺序接收所有 id 的数据，您可以简单地删除该`LIMIT`子句，并添加一个循环来读取结果集的每一行。

我还建议不要使用这些`mysql_*`功能，因为它们已被弃用。如果你只是学习 PHP，你应该学习使用`mysqli_*`函数、PDO 或将来会得到支持的东西。

您还应该学习如何测试数据库查询的失败条件。我的例子很简单，但生产代码应该测试查询和获取操作的成功/失败。

# asp.net-mvc - 货币显示用于显示的欧元而不是美元

> ID：14245110
> 
> 赞同：1
> 
> 时间：2013-01-09T19:40:24.970
> 
> 标签：asp.net-mvc

使用 MVC 4 EF，我想显示美元货币值，但我得到的不是“$”，而是“EURO”符号。我怎样才能让它总是显示为“$”

模型：

```
 [Display(Name = "PaidCompany")]
    [DataType(DataType.Currency)]
    [DisplayFormat(DataFormatString = "{0:C}", ApplyFormatInEditMode = true)]
    public Nullable<decimal> paidCompany { get; set; } 
```

看法：

```
@Html.EditorFor(model => model.paidCompany, new Dictionary<string, object>() { { "class", "login_input" }, { "style", "width:250px;" } }) 
```

预期结果：“$ XX.XX” 实际结果：“XXX €”

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:08:59.327

System.Threading.Thread.CurrentThread.CurrentCulture 属性设置为与欧元区国家相关联的文化，而不是美国。默认情况下，此属性是根据 windows 中的区域设置填充的。您可以简单地在 global.asax 文件或在请求启动时运行的其他一些全局代码中为其分配不同的文化，或者您可以更改 Windows 区域设置。

编辑：

请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/bz9tc508%28v=vs.100%29.aspx)，了解有关设置文化的选项的说明。

实现您想要的最简单的方法可能是将以下行添加到 web.config

```
<globalization uiCulture="en-US" culture="en-US" /> 
```

请注意，UICulture 是针对您网站文本的语言，而文化涵盖所有其他方面，例如日期和时间格式、货币符号等。

# windows-phone-7 - 在Windows Phone 7中更改列表框选定项目前景

> ID：14245112
> 
> 赞同：1
> 
> 时间：2013-01-09T19:40:26.350
> 
> 标签：windows-phone-7, xaml, listbox, selecteditem

我有以下列表框：

```
<ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="0,10,0,10">
                                <TextBlock 
                                    Foreground="Black"
                                    Text="{Binding name}"/>
                                <TextBlock
                                    Foreground="Black"
                                    Text=": "
                                    Visibility="{Binding 
                                        Path=name, 
                                        Converter={StaticResource ServiceOtherConverter}}"/>
                                <TextBlock 
                                    Foreground="Black"
                                    Text="{Binding amount}" 
                                    Visibility="{Binding 
                                        Path=name, 
                                        Converter={StaticResource ServiceOtherConverter}}"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

而且我的应用程序有白色背景，所以我想将列表项前景设置为黑色。但是当我选择一个项目时，它的前景不会改变，因为它会改变默认前景。

如何将列表项前景更改为黑色，但所选前景仍然不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:34:54.970

您只需在 ListBox 项的样式模板级别更改 Selected VisualState 中的 Foreground。作为参考，您可以查看[列表框样式和模板](http://msdn.microsoft.com/en-us/library/cc278062%28v=vs.95%29.aspx)的 msdn 文档。Expression Blend 让它变得非常轻松。只需右键单击您的项目并选择“编辑其他模板”并选择项目模板。然后从 States 选项卡中，选择 Selected State 并更改前景色。或者您可以直接在模板代码中执行此操作。希望这可以帮助。

# visual-studio-2010 - 我可以从 .rdlc 报告参数接收数据吗？

> ID：14245113
> 
> 赞同：0
> 
> 时间：2013-01-09T19:40:26.007
> 
> 标签：visual-studio-2010, parameters, report, rdlc, report-designer

我有一个 VS 2010 报告，我想将在一个 .rdlc 报告中计算的值传递给另一个。我可以以某种方式使用参数将数据从报告中发送回来，或者从 .RDLC 中获得一些“返回”值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:29:43.837

我认为您不能通过报告服务获得返回值。

相反，假设这两个报告具有不同的数据集，到目前为止我提出的唯一解决方案是在您的第二个报告中包含两个数据集并重新计算您的字段。这样做，您可以使用您的正常表达式从指定第一个数据集的第一个报告中计算您需要的值。

这里非常简单的例子：

**报告 1**

该报告仅使用`DataSet1`

`=Fields!AField.Value`

* * *

**报告 2**

该报告使用两个数据集：`DataSet1`和`DataSet2`

`=(Fileds!AField.Value, "DataSet1") + (Fields!AnotherField.Value, "DataSet2")`

Ofc 表达式可能更复杂，但最重要的是指定报表必须在其中归档的 DataSet。

# c++ - 动态哈希表的统一哈希函数

> ID：14245114
> 
> 赞同：0
> 
> 时间：2013-01-09T19:40:32.723
> 
> 标签：c++, hash, hashtable

我正在尝试编写一个简单的整数哈希表类。我希望它是动态的，因为当它充满时，它的大小会增加一倍。我似乎找不到可以正常工作的散列函数。我已经尝试使用以下函数进行双重哈希（但它不起作用）： h(k)=(x%7 +1+ k*(x%5))%(Table_Size)

任何我想念的好东西都会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:45:02.640

对于简单的整数，不要散列数字本身（这样做不会生成任何好的新属性），而是使用素数作为散列表的大小（这将为您的条目提供良好的均匀分布).. 通常，使用素数作为哈希表大小是一种很好的做法，无论您使用什么以及如何进行哈希处理。

查看

[http://planetmath.org/GoodHashTablePrimes.html](http://planetmath.org/GoodHashTablePrimes.html)

随着桌子的增长，可以使用合适的尺寸列表。

# navigation - WinJS 在当前页面保存更改，然后导航到另一个页面？

> ID：14245115
> 
> 赞同：0
> 
> 时间：2013-01-09T19:40:35.353
> 
> 标签：navigation, store, winjs

我试图在导航到另一个页面之前保存 4 个不同的变量值。我听说可以将这些值存储在 sessionState 中。我只是不太确定该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:48:48.430

看看这个例子：[http ://code.msdn.microsoft.com/windowsapps/Navigation-sample-cf242faa](http://code.msdn.microsoft.com/windowsapps/Navigation-sample-cf242faa)

G

# java - Java如何将数组的位翻转为随机值

> ID：14245117
> 
> 赞同：0
> 
> 时间：2013-01-09T19:40:50.210
> 
> 标签：java, bit-manipulation

您如何创建一个可以随机翻转一个字节中的 2 位（范围为 00-11，因此为 0-3）的方法！

例子 ![例子](../Images/1bc716775ace818c858cb708c7270a84.png)

```
Coin flip one:   111 01 111
Coin flip two:   111 11 111
Coin flip three: 111 01 111
Coin flip four:  111 10 111 
```

我正在使用什么

```
private static void coinFlip(byte theByte)
    {
        Integer mode = new Random().nextInt(3);
        byte value = mode.byteValue();
        byte tmp = value & 255;
            tmp = tmp >> 4;
            tmp = tmp & 3;
           //Point of confusion
           //Now stuff it back in index 5 & 4 ?
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:10:19.573

使用与您使用的方法类似的方法填写，我认为这应该可行：

```
private static byte coinFlip(byte theByte)
{
    //Get random value of form 000xx000
    Integer mode = new Random().nextInt(3);
    byte value = mode.byteValue();
    value = value << 3;
    //Mask the result byte, to format xxx00xxx
    byte mask = 231; //0b11100111
    byte maskedByte = theByte & mask;
    //return 000xx000 | xxx00xxx
    return maskedByte | value;
} 
```

不过，正如 fge 所说，BitSet 是更明智的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:24:15.160

根据您的代码：

```
 private static byte coinFlip(byte theByte)
    {
        Integer mode = new Random().nextInt(3);
        byte value = mode.byteValue();
        return (byte)(theByte ^ (value << 3));
    } 
```

最后一行只是用两个移位的随机位来异或你的字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T19:45:36.973

如果要在 index 处设置一点`n`，请使用：

```
b |= 1 << n; 
```

如果您想在 index 处取消设置`n`，请使用：

```
b &= ~(1 << n); 
```

或者使用[BitSet](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)（它有一个足够方便的`.flip()`方法）。

# sql - SSIS执行进程任务找不到可执行文件

> ID：14245122
> 
> 赞同：0
> 
> 时间：2013-01-09T19:41:20.687
> 
> 标签：sql, ssis, 7zip

我正在使用 7zip 独立 .exe 解压缩文件。我正在为此使用执行流程任务。我已经在多台机器上一遍又一遍地测试了它，我知道它可以工作（至少在调试模式/视觉工作室中）。我已将此包上传到服务器。我创建了一个从包商店调用所述包的工作。无论我把它放在哪里，这个包都找不到 .exe。

我的第一个想法是将 .exe 放在 C:\ 驱动器上，但失败了。我尝试将 .exe 放在运行程序包的帐户可以完全控制的网络位置的尝试也失败了。

基本上，当包上传到服务器时，是否有其他人在让执行流程任务找到可执行文件时遇到问题？

错误信息是

> 在目录 C:\7zip 中找不到 7za.exe

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:01:15.810

我会因为错误而冒着被否决的风险，但我相信你有一个权限问题。

您说它在 BIDS 的其他服务器上运行良好，请在没有 BIDS 的情况下尝试。从它工作的盒子上的命令行调用它。

```
dtexec.exe /file C:\HereComesTheUnzipper.dtsx 
```

如果可行，则在麻烦的服务器上重复该步骤。将 RDC 放入盒子中，然后重试

```
dtexec.exe /ser localhost /sq HereComesTheUnzipper 
```

如果这仍然有效，那么您正在寻找工作的问题。SQL 代理服务以什么帐户运行？SSIS 作业步骤是否作为一组特定的凭据运行？如果是这样，它是否是 SQL Server 登录（不会映射到物理框上的任何内容）？无论您的答案是什么，解决方案都是确保该帐户可以访问

*   7z.exe
*   解压文件时 7zip 可能使用的任何暂存区（我假设`%temp%`）
*   输出文件夹（C:\bin\7z.exe -ee:\data\MyThing.7z）

# php - Laravel 如何在基本控制器中包含一个部分

> ID：14245123
> 
> 赞同：0
> 
> 时间：2013-01-09T19:41:21.843
> 
> 标签：php, model-view-controller, laravel

在我的 laravel 应用程序中，我正在使用一个`Base_Controller`类，然后在其他控制器中扩展这个类。

在我的应用程序中有一个变量，我需要在我的所有控制器和模板中使用它。

这就是我尝试在我的基本控制器中使用的原因。

`$this->layout->myVar = 'stuff'`

但是当我尝试`$myVar`在我的视图中使用时，我收到了一个错误： `Creating default object from empty value`

我的基类构造函数是这样的：

```
public function __constructor()
{
  parent::__construct();
  $this->layout->menu = 'stuff';
} 
```

有谁知道解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:44:16.960

您必须`$this->layout`在控制器类中定义，否则`$this->layout`必须分配一个`View::make()`.

`$this->layout->menu`可能还需要`@section('menu') @endsection`在其中。

# c# - 如何获取应用程序数据文件夹？

> ID：14245124
> 
> 赞同：2
> 
> 时间：2013-01-09T19:41:36.427
> 
> 标签：c#

> **可能重复：**
> [如何获取当前用户的“应用程序数据”文件夹的路径？](https://stackoverflow.com/questions/915210/how-can-i-get-the-path-of-the-current-users-application-data-folder)
> [Windows XP 应用程序数据文件夹？](https://stackoverflow.com/questions/8305444/windows-xp-application-data-folder)

我必须在应用程序数据中保存一些设置，但是，当我使用某些东西时，`"@C:\Documents ..."`有人可以在 D:\ 上运行windous 那么如何获取该目录？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T19:49:15.140

你可以使用`Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);`...

还有一个例子，你可以如何使用它：

```
string path = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData); 
```

它返回类似的东西`C:\\Users\\UserName\\ApplicationData`

你也可以使用 Environment.SpecialFolder.Desktop 这样你就可以进入实际用户的桌面......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:43:37.557

请参阅本文末尾的代码：http: [//msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:47:25.140

查看此 MSDN 条目以获取应用程序数据目录[Environment.SpecialFolder](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)。

我以前做的是使用[Evironment.SystemDirectory](http://msdn.microsoft.com/en-us/library/system.environment.systemdirectory.aspx)然后根据我的需要分解它。但是，如果您担心驱动器，请通过以下方式使用[DriveInfo](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.aspx)类`DriveInfo.GetDrives()`

# opengl - OpenGL中的低帧率

> ID：14245135
> 
> 赞同：-4
> 
> 时间：2013-01-09T19:42:19.360
> 
> 标签：opengl, camera, frame-rate

我有一个搅拌机 obj。OpenGL 应用程序中的文件。我还添加了一个摄像头，以便它围绕该对象移动（它是一座建筑物，所以它非常大）。它的帧率很糟糕。

为什么它很慢和/或我怎样才能让它更快？

```
void camera (void) {
glRotatef(xrot,1.0,0.0,0.0);  
glRotatef(yrot,0.0,1.0,0.0);  
glTranslated(-xpos,-ypos,-zpos); } 
```

这只是我的简单相机类。以防万一它有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:10:49.010

您的代码可能会很慢有一些原因：

*   您没有使用[VertexBuffer](http://www.songho.ca/opengl/gl_vbo.html)对象
*   您正在使用[固定功能管道](http://www.opengl.org/wiki/Fixed_Function_Pipeline)而不是[着色器](http://www.clockworkcoders.com/oglsl/tutorials.html)
*   您没有优化仅渲染可见区域的绘图代码（对于[bsp-trees](http://en.wikipedia.org/wiki/Binary_space_partitioning)查找 ae ）

毕竟你有很多优化要做。我将从优化我的渲染管道开始，移除固定功能管道，然后开始使用着色器和顶点缓冲区。

# android - 如何在 ItemListFragment 中打开数据库？

> ID：14245139
> 
> 赞同：0
> 
> 时间：2013-01-09T19:42:28.503
> 
> 标签：android, fragment

我总是在 android 中创建列表，但我是 Fragments 的新手。我有一个名为 ItemListAdapter 的数据库，它有一个构造函数 ItemListAdapter(Context ctx)。现在插入项目后，我想显示它们，我在 android 中使用 masterDetail 视图，它有片段。如何在此处显示列表。我在实现 ListFragment 的 ItemListFragment 类中看到有一个 TODO 说 // TODO: replace with a real list adapter。我的问题是如何在这里调用数据库。在初始化期间，我无法传递上下文 ItemListAdapter(this) 给我一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:59:05.677

在片段中，您可以使用 getActivity() 函数返回上下文。因此，我发现完成此任务的最简单方法是创建一个上下文变量并将该变量分配给 getActivity()。如果有人有更好的方法来做到这一点，我会全神贯注，因为我也有这个问题。例子：

```
public Context context;

// where you will open your database
context = getActivity();
mDbHelper = new DbHelper(context); 
```

# javascript - 扫描页面上的班级名称

> ID：14245143
> 
> 赞同：0
> 
> 时间：2013-01-09T19:42:43.883
> 
> 标签：javascript, jquery

我需要在整个网页中搜索`class="error"`，如果不存在，请更改`error = true`为`error = false`.

我怎么能用 jQuery 做到这一点？我有一种模糊的感觉，我可以以`.each();`某种方式做到这一点，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T19:44:29.780

这是最短的方法：

```
var error = $(".error").length > 0; 
```

# ruby-on-rails-3 - Rails 3.2.11 开发问题中的资产管道（不加载资产）

> ID：14245144
> 
> 赞同：0
> 
> 时间：2013-01-09T19:42:43.993
> 
> 标签：ruby-on-rails-3, asset-pipeline

我正在使用 ZURB Foundation 创建一个新应用程序。共有三个控制器。其中之一 - 一切正常，当我在开发中运行服务器时，所有 css 和 javascripts 都包括在内。但是如果我运行我的 Projects#Controller，它只会得到纯 html，而不加载 javascripts 和 css。我尝试了一切，但仍然不知道如何处理它。

这是来自控制台的日志：

当它工作正常时

```
Started GET "/" for 127.0.0.1 at 2013-01-09 21:36:21 +0200
Processing by PagesController#info as HTML
  Rendered pages/info.html.erb within layouts/application (0.3ms)
  Rendered layouts/_head.html.erb (36.9ms)
  User Load (1.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered layouts/_header.html.erb (8.9ms)
  Rendered layouts/_flash_messages.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (66.0ms)
Completed 200 OK in 368ms (Views: 365.2ms | ActiveRecord: 1.6ms) 
```

但是，如果我从另一个控制器转到另一个页面，它只会从页面加载纯 html

```
Started GET "/projects/" for 127.0.0.1 at 2013-01-09 21:23:21 +0200
Processing by ProjectsController#index as HTML
  User Load (1.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Project Load (0.5ms)  SELECT "projects".* FROM "projects" WHERE "projects"."user_id" = 1 ORDER BY created_at desc
  Rendered projects/index.html.erb (30.8ms)
Completed 200 OK in 78ms (Views: 38.4ms | ActiveRecord: 2.7ms) 
```

宝石文件

```
 source 'https://rubygems.org'

gem 'rails', '3.2.11'

group :development, :test do
  gem 'sqlite3'
  gem 'rspec-rails'
  gem 'factory_girl_rails'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'compass-rails'
  gem 'zurb-foundation'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'devise'
gem 'thin'
gem 'best_in_place'

group :test do
  gem 'capybara'
  gem 'shoulda-matchers'
end

group :production do
  gem 'pg'
end 
```

应用程序.html.erb

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <%= render 'layouts/head' %>
  </head>
  <body>
    <%= render 'layouts/header' %>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span8 offset2">
          <%= render 'layouts/flash_messages' %>
          <%= yield %>
        </div>
      </div>
    </div>
    <div class='row-fluid'>
      <%= render 'layouts/footer' %>
    </div>
  </body>
</html> 
```

和控制器

```
class PagesController < ApplicationController
  respond_to :html

  def info

  end
end

class ProjectsController < ActionController::Base
  # before_filter :authenticate_user!

  def index
    @projects = current_user.projects

    respond_to do |format|
      format.html
    end

  end
end 
```

任何帮助或想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:53:32.950

您需要更改`class ProjectsController < ActionController::Base`为`class ProjectsController < ApplicationController`，然后它将知道在哪里搜索布局。

# php - PHP 中的 XML 清理（SOAP > XML/JSON）

> ID：14245148
> 
> 赞同：0
> 
> 时间：2013-01-09T19:42:55.920
> 
> 标签：php, xml, json, soap

我正在使用（并且讨厌）一个 web 服务，它只为邮件运营商服务返回 SOAP XML 格式的数据（为什么不返回 JSONP？拜托！）

问题是我将在 jQuery 中“使用”数据，所以我试图将信息转换为 JSON 并使用 PHP 作为代理，因为 XML 无法跨域加载，我不想依赖 YQL

有许多脚本可以将 XML 转换为 JSON，但是从 web 服务返回的 xml 必须经过大量清理才能在此脚本中运行，否则它们会引发一堆错误。

返回的 xml 的第一部分是模式或数据集，所以那里没有数据，我需要 JSON 中的模式，所以我在 php 中删除它`strstr(first data ocurrence)`

但后来我有这个...

```
 <Table diffgr:id="Table1" msdata:rowOrder="0">
      <Numero>301</Numero>
      <Torre xml:space="preserve"></Torre>
      <Piso xml:space="preserve"></Piso>
      <Depto xml:space="preserve"></Depto>
      <Localidad>SAN ISIDRO</Localidad>
      <eMail/>
      <Provincia>Buenos Aires</Provincia>
    </Table>
    <Table diffgr:id="Table2" msdata:rowOrder="1">
      <Numero>34</Numero>
      <Torre xml:space="preserve"></Torre>
      <Piso xml:space="preserve"></Piso>
      <Depto xml:space="preserve"></Depto>
      <Localidad>DON TORCUATO</Localidad>
      <eMail/>
      <Provincia>Buenos Aires</Provincia>
  </Table> 
```

我需要删除所有标签属性，`diffgr:id="Table2"`这样我就可以干净地将其转换为 JSON。我做了一些替换，`str_replace(xml:space="preserve", "")`但我仍然有具有可变内容的属性，例如`msdata:rowOrder="0"`

我认为这是做最后一件事的最好方法，`preg_replace`但我有两个问题：

*   我对正则表达式不是很好，我发现的正则表达式生成器都让我“留下”一个字符串而不是删除
*   即使我尝试并尝试直到我得到“id”和“row”的正确正则表达式，我也会觉得做几轮替换然后2个正则表达式是非常低效的。我只粘贴了 2 个项目，但响应可能有数百个，并且 Web 服务的 CURL 已经花费了很多时间，并且代理会受到很多点击，我需要尽可能地优化它。

有没有更好的方法可以转换 `<Table diffgr:id="Table**N**" msdata:rowOrder="**N**">`为`<Table>`甚至更好地删除 ''... 之后的所有内容，或者甚至更好地将原始 SOAP XML 转换为 JSON 只需一个神奇的步骤：P？

# php - Codeigniter redirect() 在某些系统上不重定向

> ID：14245149
> 
> 赞同：0
> 
> 时间：2013-01-09T19:42:57.773
> 
> 标签：php, codeigniter, redirect

我确实有一个 CI 项目，如果 cookie 已经存在，我会检查它的 home 功能。如果是这样，则应重定向用户。例如，这在我的 linux 机器 (Chrome) 上运行良好，但在我的 Mac (Chrome) 上却不行——我不知道为什么。

这是代码：

```
$session = $this->session->all_userdata();

        if(array_key_exists('id', $session)) {
            redirect(site_url("loggedin"), "refresh");
        } else {
            /* set cookie */ 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:59:20.143

首先，我不确定是否`array_key_exists()`更好或是否更好`isset($_SESSION['id'])`，但无论哪种方式 CI 都内置了这个函数，如果没有设置值`session->userdata()`，它将返回：`FALSE`

```
if($this->session->userdata('session_id'))
    redirect('loggedin',"refresh");

//rest of code 
```

另请注意，您不需要`site_url()`在`redirect()`函数中。CI 默认会这样做。不过，我不确定这是否与您的问题有关。这可能是浏览器错误。`redirect('loggedin');`（将使用位置重定向）有效吗？

# html - 使用 css 旋转的可扩展 div

> ID：14245150
> 
> 赞同：1
> 
> 时间：2013-01-09T19:42:58.620
> 
> 标签：html, css

我正在尝试创建一个页面布局，左侧有一个矩形 div，它旋转了 10 度，随着浏览器的大小而扩展，并且在顶部、左侧和底部不显示其边缘。意思是，页面看起来应该在中间倾斜。

到目前为止，我的代码正确地创建了 div，但是当我展开页面时，您开始看到边缘。

[http://jsfiddle.net/jpQvL/1/](http://jsfiddle.net/jpQvL/1/)

HTML

```
 <div id="wrapper">
    <div id="right"></div>
 </div> 
```

CSS

```
html, body {
   margin: 0;
   padding: 0;
   height: 100%;
 }

#wrapper {
    position:relative;
    height: 100%;
   }    

#right {
    background: #000;
    transition: all 0.5s ease-in-out 0s;
    width: 50%;
    position: fixed;
    min-height: 110%;
    transform: rotate(10deg);
    top: -73px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:08:50.587

问题是该`tranform`属性需要渲染前缀。您必须添加以下行：

```
-webkit-transform: rotate(10deg);
-moz-transform: rotate(10deg);
-o-transform: rotate(10deg);
-ms-transform: rotate(10deg);
transform: rotate(10deg); 
```

[看看这个](http://jsfiddle.net/ldaniell14260/akf9d/)

或使用许多像[这样的无前缀脚本之一](http://leaverou.github.com/prefixfree/)

# entity-framework - 实体框架 - 我的对象上下文在哪里？

> ID：14245153
> 
> 赞同：17
> 
> 时间：2013-01-09T19:43:12.063
> 
> 标签：entity-framework, objectcontext

好的，我显然错过了一些非常基本的东西。我对实体框架很陌生。

我想调用存储过程而不导入它们，所以我打算使用 ExecuteStoreQuery()。根据文档，ExecuteStoreQuery 是 ObjectContext 的一种方法。但是，我不知道从哪里获得我的 ObjectContext。

我使用 Database First 生成了我的实体。到目前为止，我一直在访问我的实体，如下所示：

```
var db = new MyEntities();

PRODUCT p = db.PRODUCTS.First(a => a.PRODUCTSKEY == thekey); 
```

但我不能调用 db.ExecuteStoreQuery，因为 db 不是 ObjectContext。

我已经用谷歌搜索了如何从实体中获取 ObjectContext。我找到了一些答案，但它们都标有警告，说这是一种解决方法，只有在没有其他选择的情况下才使用它。好的，那么正确的方法是什么？

我发现的所有使用 ExecuteStoreQuery 的示例都假定您已经拥有 ObjectContext。不是很有帮助。

我发现一个网站说 ObjectContext 是由实体框架“自动生成”的。如果是这样，那么它在哪里？

我显然在这里遗漏了一些非常简单的东西。这不可能那么难。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-09T19:49:39.170

要获得 DbContext 的 ObjectContext，您需要做的就是以下几点：

```
var objectContext = ((IObjectContextAdapter)myDbContextObject).ObjectContext; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-09T20:00:16.370

`ObjectContext``DbContext`在 Entity Framework 4.1 中被替换为。实际上`DbContext`是一个适配器（包装器）`ObjectContext`。如果您需要获取`ObjectContext`，可以将您的`DbContext`实例转换为`IObjectContextAdapter`接口（它是显式实现的）并且包装的`ObjectContext`实例将可用：

```
ObjectContext context = ((IObjectContextAdapter)db).ObjectContext; 
```

顺便说一句，我认为您正在寻找[`db.Database.SqlQuery`](http://msdn.microsoft.com/en-us/library/system.data.entity.database%28v=vs.103%29.aspx)方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T19:46:08.687

在您的情况下，MyEntities 是您的 ObjectContext。

从技术上讲，它是继承自 ObjectContext 类的 EntityFramework 自动生成的类。

# ms-access - MS Access 查询 - 提示输入一个参数并传递给多个子查询

> ID：14245160
> 
> 赞同：0
> 
> 时间：2013-01-09T19:43:33.213
> 
> 标签：ms-access

我有两个带参数的查询：

[花费表的小时数]：[输入日期]

[小时数表]：[输入开始日期] [输入结束日期]

他们加入了另一个查询，该查询查看某个日期的生产力。我想运行查询，输入日期，然后将该日期传递给所有 3 个参数。现在我被提示输入日期、开始日期和结束日期（对于这个查询来说都是一样的）。有没有办法在 SQL 中执行此操作而无需创建表单？

谢谢，

-肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:47:11.017

你的意思是

```
 PARAMETERS adate DateTime;
 SELECT Stuff WHERE Somedate = [adate] 
```

# c# - Oracle 客户端似乎正在为每行传输所有 4000 个 varchar 字符

> ID：14245166
> 
> 赞同：2
> 
> 时间：2013-01-09T19:43:39.117
> 
> 标签：c#, .net, sql, oracle

我有一个 Oracle 数据库，我通过一个速度较慢的网络链接连接到该数据库。在那里，我有一个简单的表，类似于这个：

```
create table EMPLOYEES (
    employee_id INTEGER PRIMARY KEY,
    first_name VARCHAR2(4000)
); 
```

我正在使用一个相当无聊的查询来从中检索所有行：

```
select employee_id, first_name from EMPLOYEES 
```

到现在为止还挺好。但是，我注意到当我要求 Toad 导出该查询产生的所有行时，大约需要 4 秒。在我的 .NET 应用程序中，它需要 130 秒。经过相当多的修改后，我注意到 FIRST_NAME 列中最长的值是 50 个字符，因此我将查询更改如下：

```
select employee_id, substr(first_name, 1, 50) from EMPLOYEES 
```

现在，它在 Toad 和我的 C#/.NET 程序中都非常快。我已经尝试过使用 Microsoft 和 Oracle 的数据提供程序库，结果相同。

这里发生了什么 ？Oracle - 正如我所怀疑的那样 - 真的为每行发送 4000 个字节，让客户端将它们削减到正确的长度吗？那么“varchar”中的“var”有什么意义呢？另外，Toad 是如何解决这个问题的，我该如何做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:25:45.753

不，Oracle 没有发送 4,000 字节。假设您确实在假脱机 Toad 中的所有记录。Toad 所做的只是获取记录并将它们打印到屏幕上的网格中？你的代码在做什么？SQL 可能同时运行，但您的代码正在执行其他一些增加时间的处理。

要真正了解发生了什么，您需要做一两件事。

首先，进行 SQLNet 客户端跟踪。如果这不能提供答案，您需要为您的会话进行服务器跟踪。

# symfony - Symfony、Swift Mailer、CRON JOBS 和共享主机服务器

> ID：14245167
> 
> 赞同：0
> 
> 时间：2013-01-09T19:43:41.997
> 
> 标签：symfony, cron, symfony-1.4, shared-hosting, swiftmailer

在我解决这个解决方案之前，我想通过社区运行它以获得反馈。

问题：

1.  我的方法可行吗？即甚至可以这样做吗？
2.  它是正确/最有效的解决方案吗？
3.  如果这不是正确的解决方案，那么更好的方法是什么？

问题：

1.  需要通过应用程序发送大量电子邮件。
2.  在被标记为垃圾邮件发送者之前，共享托管服务器仅允许每小时最多发送 500 封电子邮件
3.  发送批量电子邮件时服务器超时

建议的解决方案：

提交任务后（即用户使用表单和前端模板提供所有必要的电子邮件信息，选择目标受众等），操作将：

1.  确定电子邮件将发送到多少条记录（来自存储的联系人数据库）
2.  如果上面 #1 中的记录数超过 400：
3.  为数据库中的所有这些记录分配一个批号。
4.  运行一个 CRON 作业：
5.  每小时从批次“X”中选择 400 条记录，并发送保存的电子邮件模板，直到没有批次“X”的记录为止。每次发送一批 400 时，它的批号会被擦除（因此下一小时不会再次选择它）。
6.  如果在它前面有一个未完成的 CRON JOB 调度（即当前正在运行），它将被放入一个队列中。

其他说明：要发送这些电子邮件，我只需使用以下代码遍历 SWIFT 邮件程序：

```
 foreach($list as $record)
 {
      mailers::sendMemberSpam($record, $emailParamsArray); 
      // where the above simply contains: sfContext::getInstance()->getMailer()->send($message); 
 } 
```

*其中 $list 是批号为“X”的记录列表。

我不确定这是最有效的解决方案，因为它似乎使服务器陷入困境，并且如果列表或电子邮件很长，最终会超时。

所以，我现在只是在寻找意见......在此先感谢。

# java - 使用 Pipe Java 多线程进行通信

> ID：14245170
> 
> 赞同：1
> 
> 时间：2013-01-09T19:43:45.960
> 
> 标签：java, multithreading, pipe, nonblocking, thread-synchronization

![在此处输入图像描述](../Images/04e31aef1a805023c927b16d392a729c.png)

你好 ！我有一个小问题。我只是学习多线程，还不了解所有内容。

我有 3 个线程：1 和 2 随机生成一个矩阵，并且在每一步之后，它们通过管道矩阵元素发送类似的参数。3-d 线程比较它们并写入结果，然后第 1 步和第 2 步执行下一步，然后一次又一次地重复 5 次。

我的问题：我需要同步所有的踏板才能正常工作。这个问题与生产者/消费者问题有相似之处，但这里有 2 个生产者和 1 个消费者。

* * *

```
public class Producer1 extends Thread{
    CyclicBarrier cbar;
    public Producer1(CyclicBarrier c){
        cbar=c;
        new Thread(this).start();
    }
    private Random generator = new Random();
    int []matrix1 = new int[1000];

    private PipedWriter out = new PipedWriter();

    public PipedWriter getPipedWriter() {
        return out;
     }

    public void run() {
        for(int i =0;i<5;i++){
            matrix1[i]= generator.nextInt(10)+10;
             System.out.println("matrix1["+i+"]= "+matrix1[i]);
             try {

                  out.write(matrix1[i]);
                  cbar.await();
                  sleep(500);
                } catch (Exception e) {
                  throw new RuntimeException(e);
                }
        }
    }
} 
```

* * *

```
public class Producer2 extends Thread{
     Random generator = new Random();
     int []matrix2 = new int[1000];
     CyclicBarrier cbar;
        public Producer2(CyclicBarrier c){
            cbar=c;
            new Thread(this).start();
        }
     private PipedWriter out = new PipedWriter();

        public PipedWriter getPipedWriter() {
            return out;
         }
        public void run() {
            for(int i =0;i<5;i++){
                matrix2[i]= generator.nextInt(20)-10;
                 System.out.println("matrix2["+i+"]= "+matrix2[i]);
                 try {
                      out.write(matrix2[i]);
                      cbar.await();
                      sleep(500);
                    } catch (Exception e) {
                      throw new RuntimeException(e);
                    }
            }   
        }
} 
```

* * *

```
 public class Main {
    public static void main(String[] args) throws IOException { 
     Producer1 prod = new Producer1(new CyclicBarrier(2, new Consummer(prod,prod2)));   
        // here is a problem  "prod2 cannot be resolved to a variable" 
                                                     // How can i do it work??
     Producer2 prod2 = new Producer2(new CyclicBarrier(2, new Consummer(prod,prod2)));
         CyclicBarrier cb1 = new CyclicBarrier(2, new Consummer(prod,prod2)); 

        prod.start();
        prod2.start();
    } 
```

## }

```
public class Consummer extends Thread{
     private PipedReader el1;
     private PipedReader el2;

      public Consummer(Producer1 sender, Producer2 sender2) throws IOException {
        el1 = new PipedReader(sender.getPipedWriter());
        el2 = new PipedReader(sender2.getPipedWriter());
      }

    public void run() {
         try {

               while (true) {

                System.out.println("Element1 : " +  el1.read()+" Element2 : " +  el2.read());
               }
            } catch (IOException e) {
              throw new RuntimeException(e);
            }

    }

}

            for example : 
i=0
1-> 10
2-> 5
3-> first is bigger =10
i++;

i=1;
1-> 3
2-> 5
3-> Second is bigger =5
i++;

i=2;
1-> 4
2-> 4
3-> both are equal = 4
i++;
..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:27:02.573

一个也可以简化结构的选项是使用[`BlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)：

*   在`main`中，创建两个队列，将一个队列传递给每个生产者，并将两个队列传递给消费者
*   生产者写入他们的队列
*   消费者从两个队列中读取并做它的事情：

 ````
while (true) {
  int[] matrix1 = queue1.remove();
  int[] matrix2 = queue2.remove();
  // process the two 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:07:03.327

传递`barrier`给消费者，让它在打印之前等待：

```
 while (true) {
            barrier.wait();
            System.out.println("Element1 : " +  el1.read()+" Element2 : " +  el2.read());
           } 
````

# verilog - Verilog 数据流延迟模型

> ID：14245172
> 
> 赞同：1
> 
> 时间：2013-01-09T19:43:50.143
> 
> 标签：verilog

我正在阅读有关 Verilog 数据流编程的信息。

我已经了解了数据流模型的延迟，但现在我对它有一些误解。我发现在数据流模型中，我们有拒绝延迟模型。换句话说，对于`assign #2 c= a | b`，可以拒绝更改。

我的问题是输入更改何时会被拒绝？
我敢肯定，当`a`或`b`改变使`c`期望值改变时，我们应该再次启动 2 单位延迟！

我的问题是，我们是否需要在更改`a`或`b`更改但预期`c`没有更改时再次开始延迟？

例如，`a | b`“a”为 0，“b”为 1，有时我们会将“a”更改为 1。是否需要拒绝先前的时间并再次启动 2 单位延迟以查看输出中的 1？（注意，expected`c`不会改变，因为我们的操作是`|`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:06:49.023

模拟器将首先评估表达式的 LHS（左侧），然后应用更改 RHS（右侧）上的变量。拒绝（或过滤）由 LHS 表达式的结果确定。

为了可视化这一点，请在`a | b`.

```
assign ab = a | b;
assign #2 c = ab; 
```

运行它以为模拟生成波形。示例输出：

```
 0    5   10   15   20   25
     |    |    |    |    |    |
         _            _        __
a    ___/ \__________/ \______/
                  __        _____
b    _______/\___/  \______/
         _        __  _     _____
ab   ___/ \_/\___/  \/ \___/
           _        _____     ___
c    xx___/ \______/     \___/ 
```

的前 2 个时间步`c`是未知的，因为在时间 0 之前没有数据。在时间 7 和 15 开始`ab`的脉冲`ab`被过滤掉，因为它们小于 2 个时间步。所有其他的转换`c`都是时间上的 2 移位`ab`。

`a`在时间 25 变高时没有拒绝时间，因为中间步骤 ( `ab`) 没有转换。模拟器将执行自己的中间步骤，`a | b`在决定应该执行什么操作之前评估更改`c`。

# c# - 如何调用函数将多个整数输入数组？

> ID：14245173
> 
> 赞同：-5
> 
> 时间：2013-01-09T19:43:51.033
> 
> 标签：c#

所以函数（命名为 InsertMark）的代码如下。你会如何调用这个函数来将 10 个人的分数输入到一个名为 iMarks 的数组中？

```
static void InsertMark(int [] piMarkArray, int piStuNum)
{
  int iMark;

  Console.Write("Enter mark for student " + piStuNum + ": ");
  iMark = Convert.ToInt32(Console.ReadLine());

  while (iMark < 0 || iMark > 100)
  {
    Console.Write("Not a percentage. Enter again: ");
    iMark = Convert.ToInt32(Console.ReadLine());
  }

  //update array element with this mark
  piMarkArray[piStuNum] = iMark;
  } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:47:24.063

只需将行移动到`piMarkArray[piStuNum] = iMark;`while循环中，使用索引，如果索引不小于数组长度，则退出循环。

```
 int index=0;
 while ((iMark < 0 || iMark > 100) && index < piMarkArray.Length) // exit the loop array is full
 {
    Console.Write("Not a percentage. Enter again: ");
    iMark = Convert.ToInt32(Console.ReadLine());
    piMarkArray[index++] = iMark; // Here marks are set
  }

  //update array element with this mark 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:48:01.730

在 main 函数中，您可以有一个代码：

```
 int iMarks[10];

for(int i = 0; i <10; i++ )
   InsertMark(iMarks, i) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:48:11.487

你在找这样的东西吗？

```
for(int i=0; i<10; i++)
{
    InsertMark(iMarks, i);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T19:52:21.690

您需要声明一个大小为 10: 的数组`int[] iMarks = new int[10]`，然后在 for 循环中将数组和计数器值传递给函数。

```
 int[] iMarks = new int[10];
        for(int x = 0; x < 10; x++)
            InsertMark(iMarks, x); 
```

这是完整的课程/工作示例：

```
static void Main(string[] args)
    {
        int[] iMarks = new int[10];
        for(int x = 0; x < 10; x++)
            InsertMark(iMarks, x);

        Console.Read();

    }

    static void InsertMark(int[] piMarkArray, int piStuNum)
    {
        int iMark;

        Console.Write("Enter mark for student " + piStuNum + ": ");
        iMark = Convert.ToInt32(Console.ReadLine());

        while(iMark < 0 || iMark > 100)
        {
            Console.Write("Not a percentage. Enter again: ");
            iMark = Convert.ToInt32(Console.ReadLine());
        }

        //update array element with this mark
        piMarkArray[piStuNum] = iMark;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T19:47:47.077

在这里，您创建将保存`10`标记并在循环中用您的方法填充它的数组：

```
int[] marks = new int[10];
for(int i = 0; i < marks.Length; i++)
    InsertMark(marks, i); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T20:08:21.590

总是有多种方法可以编码任何东西，这也不例外。我在这里放的是**一个**惯用的 C# 示例来执行此操作。我能想到的至少有两种变体，哪个会更好，但这与最初的想法最接近。

首先，一个基础`Student`类：

```
class Student
{
   public int ID;
   public int Mark;
} 
```

然后，一个提示输入标记的函数

```
int GetMark(int studentID)
{
    Console.Write("Enter mark for student " + studentID + ": ");
    int mark = Convert.ToInt32(Console.ReadLine());

    while (iMark < 0 || iMark > 100)
    {
        Console.Write("Not a percentage. Enter again: ");
        iMark = Convert.ToInt32(Console.ReadLine());
    }
    return mark;
} 
```

最后，在你的主程序中，你有一个`Student`对象列表或数组被调用`AllStudents`，你可以这样做：

```
foreach (Student student in AllStudents)
{
    student.Mark = GetMark(student.ID); 
} 
```

* * *

或者，如果您不使用类，您的循环可能是：

```
int[] marks = new int[10]; // Or whatever size it needs to be.
for (int i = 0; i < marks.Length; i++)
{
   marks[i] = GetMark(i);
} 
```

# gwt - 修改css动画属性？

> ID：14245174
> 
> 赞同：0
> 
> 时间：2013-01-09T19:43:57.537
> 
> 标签：gwt

有没有办法以编程方式定义和启动 CSS 动画？我想将 div 从一个绝对位置移动到另一个位置。就像是：

```
FlowPanel fp = new FlowPanel();
fp.getElement().getStyle().setPosition(Position.ABSOLUTE);
fp.getElement().getStyle().setLeft(50, Style.Unit.PX);
fp.getElement().getStyle().setTop(50, Style.Unit.PX);

...

// something like:
fp.setAnimation("top: 300px"); 
```

我看到我们可以在我们的css文件中定义一个css动画，改变div的样式名称会触发动画。但我不知道我们是否可以通过编程方式修改 css 中定义的动画。例如：

```
// css file
.testAnimation {
  top: 500px;
  transition-property: top;
  transition-duration: 1s;
}

...

// But we can't modify the "top" attribute here depending on runtime needs?:
fp.setStyleName("testAnimation"); // I may want "top" to be some other value here. 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:21:40.770

您可以使用`getElement().getStyle().setProperty( property, value )`来设置任何 css 属性。但这不是正确的做法。建议的方法是通过 css 来做。

此[链接](http://blog.francoismaillet.com/?p=68)可能对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:34:23.907

你有几种方法

1) GWT 动画 - [http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwAnimation](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwAnimation)

2) Jquery 方法 - 通过 GWTQuery - [https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/6kOSm0HBP4A](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/6kOSm0HBP4A)

3) GWT 中的 JSNI -[如何将 CSS AnimationEnd 事件处理程序添加到 GWT 小部件？](https://stackoverflow.com/questions/8249880/how-to-add-css-animationend-event-handler-to-gwt-widget)

# typescript - TypeScript 在发布模式下生成错误的 JS

> ID：14245182
> 
> 赞同：0
> 
> 时间：2013-01-09T19:44:33.937
> 
> 标签：typescript, tsc

我不知道这是否是一个已知问题。我正在使用带有 Typescript 0.8.1.1 的 VS 2012 Web Express。我正在使用 --module AMD 子句生成 AMD 模块。

在调试模式下，编译器会生成如下定义子句：

```
define(["require", "exports", "app/Config", "app/ModelLocator", "app/Presenter", "app/Messenger", "app/LogOnWindow", "app/vm/VmAppHeader", "app/framework/PageLocator", "app/framework/ViewStacks"], function(require, exports, __cfg__, __ml__, __pr__, __ms__, __rc__, __lw__, __ah__, __pl__, __vs__) ... 
```

当我在发布模式下编译时，生成的代码是这样的：

```
var cfg = require("./app/Config")
var ml = require("./app/ModelLocator")
var pr = require("./app/Presenter")
var ms = require("./app/Messenger")
var rc = require("./app/RouteConfig")
var lw = require("./app/LogOnWindow")
var ah = require("./app/vm/VmAppHeader")
var pl = require("./app/framework/PageLocator")
var vs = require("./app/framework/ViewStacks") 
```

也就是说，在发布模式下，它为 CommonJS 模块而不是 AMD 模块生成代码。

有没有办法让它工作？？？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:34:28.940

我猜你是这样做的：

```
 <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <TypeScriptSourceMap> --sourcemap --module amd</TypeScriptSourceMap>
  </PropertyGroup> 
```

请注意，此块仅包含在调试配置中。相反，您要做的是将`--module amd`调用编译器的文件中的内容移到较低的位置。

```
 <Target Name="BeforeBuild">
    <Message Text="Compiling TypeScript files" />
    <Message Text="Executing tsc$(TypeScriptSourceMap) @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
    <Exec Command="tsc$(TypeScriptSourceMap) --module amd @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
  </Target> 
```

# android - Android - 点击按钮显示列表

> ID：14245186
> 
> 赞同：-2
> 
> 时间：2013-01-09T19:44:41.153
> 
> 标签：android

我正在制作我的安卓应用程序。我想有这样的情况：每次点击按钮时，都会出现一个带有一些选项的列表？我该如何做这种类型的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:49:05.933

参考这个例子：

[http://android-er.blogspot.com/2012/03/example-of-using-popupmenu.html](http://android-er.blogspot.com/2012/03/example-of-using-popupmenu.html)

希望下面的代码也能帮助你得到一些想法

new AlertDialog.Builder(this) .setMultiChoiceItems(R.array.select_dialog_items, new boolean[]{false, true, false, true, false, false, false}, new DialogInterface.OnMultiChoiceClickListener() { public void onClick(DialogInterface dialog, int whichButton, boolean isChecked) {

```
 /* User clicked on a check box do some stuff */
                    }
                })
        .setPositiveButton(R.string.alert_dialog_ok,
                new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {

                /* User clicked Yes so do some stuff */
            }
        })
        .setNegativeButton(R.string.alert_dialog_cancel,
                new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {

                /* User clicked No so do some stuff */
            }
        })
       .show(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T19:49:57.610

有很多方法可以做到这一点。一种方法是创建一个单独的活动，该活动在您单击按钮时开始，带有`ListView`. 阅读**[文档](http://developer.android.com/reference/android/app/ListActivity.html)**，了解`ListActivity`这是否是您想要的。此外，您可以将活动设置为清单中的对话框主题，这样它就不会覆盖您之前的活动。如果没有，请更具体地说明您想要什么，并提供一些您尝试过的代码。

# c# - 发布使用 WCF 连接到数据库的 Silverlight 应用程序

> ID：14245189
> 
> 赞同：0
> 
> 时间：2013-01-09T19:44:45.730
> 
> 标签：c#, silverlight, fiddler

我有一个 Silverlight 应用程序，可以在我的本地机器上完美运行，但是当我尝试从 Web 服务器运行它时它不起作用。

我进行了很多研究，最终安装了 fiddler web 调试器工具，这让我对我的应用程序失败的原因有了更好的了解。我认为我连接到数据库的方式是导致我的问题的原因。这就是我正在使用的：

```
string myConnectionString = "Persist Security Info=False;Integrated Security=SSPI;database=Database;server=Server;Connection Timeout = 600"; 
```

经过一些研究，我了解到这`Integrated Security = SSPI`意味着当前机器的凭据将用于连接到数据库，这就是该程序在我的计算机上而不是网络服务器上运行的原因。

我不知道我是否正确地考虑了这一点，但我很确定这是我的问题。Fidder 报告的错误是：`Login failed for user 'NT AUTHORITY\ANONYMOUS LOGIN'`.

我还读到我应该在连接字符串中指定用户 ID 和密码，但我不知道这些字段使用什么值（当我连接到 sql server 2008 时，我使用 Windows 身份验证选项并且我只提供一个用户名。）

我可以发布任何可能有助于澄清我的情况的代码。

编辑：如果它有帮助，我可以在浏览器中访问 DatabaseService.svc 而不会出现任何错误。

我该怎么做才能克服这个问题？

# operating-system - 无法为我的交叉编译器构建 binutils

> ID：14245190
> 
> 赞同：1
> 
> 时间：2013-01-09T19:44:49.020
> 
> 标签：operating-system

我正在尝试使用以下命令使用 mingw/msys 构建 binutils 2.19.1：

```
export PREFIX=/usr/local/cross
export TARGET=i586-elf
cd /usr/src
mkdir build-binutils
cd /usr/src/build-binutils
../binutils-x.xx/configure --target=$TARGET --prefix=$PREFIX --disable-nls
make all
make install 
```

我得到以下错误：

```
/bin/sh ./libtool --tag=CC --mode=compile gcc -DHAVE_CONFIG_H -I. -I../../binuti
ls-2.19.1/bfd -I. -D__USE_MINGW_FSEEK    -I. -I../../binutils-2.19.1/bfd -I../..
/binutils-2.19.1/bfd/../include     -W -Wall -Wstrict-prototypes -Wmissing-proto
types -Wno-format -Werror -g -O2 -D__USE_MINGW_ACCESS -c -o archive.lo ../../bin
utils-2.19.1/bfd/archive.c
./libtool: line 2258: cygpath: command not found
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I../../binutils-2.19.1/bfd -I. -D__U
SE_MINGW_FSEEK -I. -I../../binutils-2.19.1/bfd -I../../binutils-2.19.1/bfd/../in
clude -W -Wall -Wstrict-prototypes -Wmissing-prototypes -Wno-format -Werror -g -
O2 -D__USE_MINGW_ACCESS -c "" -o archive.o
gcc.exe: error: : No such file or directory
gcc.exe: fatal error: no input files
compilation terminated.
make[3]: *** [archive.lo] Error 1
make[3]: Leaving directory `/usr/src/build-binutils/bfd'
make[2]: *** [install-recursive] Error 1
make[2]: Leaving directory `/usr/src/build-binutils/bfd'
make[1]: *** [install-bfd] Error 2
make[1]: Leaving directory `/usr/src/build-binutils'
make: *** [install] Error 2
/x.sh: line 8: ../gcc-4.5.0/configure: No such file or directory
make: *** No rule to make target `all-gcc'.  Stop.
make: *** No rule to make target `install-gcc'.  Stop. 
```

即使对于 diff binutils 版本，我也遇到相同的错误，我已经尝试过 binutils-2.19.1、2.22.0、2.23.1 那么可能是什么问题？我的mingw的gcc编译器版本也是4.6.2

我也试过命令

```
make CFLAGS="-Os -w" 
```

bt 仍然存在同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-24T22:19:16.533

我收到类似的错误（“cygpath：找不到命令”），但版本较新。FWICT binutils 中有一行假设存在 Cygwin，尽管我在构建说明中没有看到任何说明需要 Cygwin 的注释（不过我可能错过了它）。

我想正确的方法是安装 Cygwin，但我不确定这是否会以其他方式干扰 Mingw。看起来 binutils 只是试图使用 cygpath 在 O/S 路径命名约定之间进行转换，所以我通过创建一个小的虚拟 cygpath shell 脚本解决了这个问题：

```
#options described at http://cygwin-lite.sourceforge.net/html/cygpath.html
#echo "MISSING CYGPATH"
if [ "x$1" == "x-w" ] 
then
    echo $2 #just echo path name back as-is
else
    read -p "MISSING CYGPATH.  PARAMS WERE: 1=$1 2=$2 3=$3 4=$4 5=$5"
fi 
```

我将它放在 PATH 上，以便 binutils 可以找到它，而不是在构建期间出现错误。该脚本只是按原样回显路径名（用于路径重命名场景），因为这些天 Windows 似乎能够理解 Unix 样式的路径（而且我在 Windows 上运行）。对于其他任何事情，此脚本将暂停并显示前几个命令行参数，以提供一些关于需要哪些进一步功能的提示。

HTH 有人走得更远一点

# ruby - 如何为 Ruby 安装 Selenium 和 Nokogiri？

> ID：14245192
> 
> 赞同：1
> 
> 时间：2013-01-09T19:45:11.077
> 
> 标签：ruby, selenium, capybara, nokogiri, ruby-1.9.3

我刚刚在我的 Windows 7 PC 上安装了 Ruby 1.9.3。现在我正在寻找一些自动化脚本来编写。但是为此我必须安装以下内容，但是如何安装它们呢？

*   硒
*   NokoGiri
*   水豚

我的 Ruby 版本安装在目录 - `C:\Ruby193`. 要从命令提示符运行 Ruby 命令，我是否需要向`PATH`变量添加任何内容？

***错误***

```
Microsoft Windows [Version 6.1.7600]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\peter>cd..

C:\Users>cd..

C:\>cd C:\Ruby193

C:\Ruby193>ruby
'ruby' is not recognized as an internal or external command,
operable program or batch file.

C:\Ruby193>gem install nokogiri
'gem' is not recognized as an internal or external command,
operable program or batch file.

C:\Ruby193> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:48:31.683

```
gem install nokogiri 
```

你可以对其他宝石做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:29:39.857

首先，您需要更新环境变量 PATH，指向您的 ruby​​ 的 bin 文件夹。然后你必须像在 Windows 上一样安装 DevKit。您可以从这里下载 DevKit：[http:](http://rubyinstaller.org/downloads/) //rubyinstaller.org/downloads/ 。

在所有这些都安装成功之后，只有你才能安装任何 gem。

# mobile - Google Checkout 在移动设备上显示桌面版本

> ID：14245195
> 
> 赞同：3
> 
> 时间：2013-01-09T19:45:26.860
> 
> 标签：mobile, google-checkout

[Google Checkout 移动网站](https://checkout.google.com/seller/mobile/index.html)说“一旦您将Google Checkout 与您的网站集成，就无需额外的工作允许客户使用他们的移动设备向您购买”，但我在 iOS 或 Android 上都没有看到这种情况我正在测试的设备。桌面站点出来了，可以用，但是在小屏上不是很好的UI。

由于“不需要工作”，我不太确定如何开始调试它。想法？

我截取了一些[iOS 6 和 Android ICS](http://imgur.com/a/C4WN4)的截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:18:46.377

根据[支持论坛的](http://productforums.google.com/forum/#!searchin/checkout-merchant/mobile/checkout-merchant/zUGN6YmzNXI/9yFl4P5YXQQJ)说法，用于移动设备的 Google Checkout 只是一个大骗子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T23:27:55.017

我只是想出去发布一个答案，因为我在您的标题链接中注意到没有`User-Agent`设置。服务器变量通常`User-Agent`用于检测用户是否来自移动浏览器。 [这是 Google 关于移动重定向的讨论](https://developers.google.com/webmasters/smartphone-sites/redirects)。因此，我的建议是`User-Agent`在重定向之前尝试在服务器端代码中设置。整个工作流程是这样的：

1.  检测用户的当前`User-Agent`变量。这是一个 PHP 示例：`$_SERVER['HTTP_USER_AGENT']`并存储此变量以供以后使用
2.  从 Google Checkout 接收 URL
3.  在重定向之前，设置`User-Agent`. 这一次，它是一个 cURL 示例： `curl_setopt($ch,CURLOPT_USERAGENT,$theUserAgentYouDetected);`其中 $ch 是 cURL 实例。这是一个设置用户代理的普通 PHP 示例：`$httpRequest->setHeaders(array('User-Agent' => $theUserAgentYouDetected);`
4.  进行正常重定向

我希望这有帮助

# php - FlexSlider 和 Fancybox

> ID：14245196
> 
> 赞同：0
> 
> 时间：2013-01-09T19:45:31.187
> 
> 标签：php, jquery, fancybox, flexslider

我会尝试用 FlexSlider 构建一个滑块，滑块中的图像应该用 Fancybox 'onclick' 来查看。

我现在的代码：

```
$(".slides li").fancybox();

$('#flex1').flexslider({
   animation: "slide",
   animationLoop: false,
   itemWidth: 179,
   itemMargin: 0,
   minItems: 4,
   maxItems: 4,
   controlNav: false, 
   pauseOnHover: true,
   slideshowSpeed: 5000,
   keyboardNav: true,
   slideshow: false,
}); 
```

在文件准备好

HTML / PHP 看起来像这样：

```
<div class="flexslider" id="flex1">
    <ul class="slides home_single_item">
       <?php 
            $handle=opendir ("pics/");
            $i=0;
            while ($datei = readdir ($handle)) {
                $i++;
                if($datei != "." && $datei != ".."){
                    echo '<li>';
                    echo '<img class="fancybox" src="pics/'.$datei.'" width="179px" height="224px" />';
                    echo '</li>';
                }
            }

            closedir($handle);
        ?>
    </ul>
</div> 
```

如果我单击图像，它会显示为小图片，并且会从我的图库列表中消失。Flexslider 和 Fancybox 之间是否存在已知问题？有人有解决方案吗？

谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:46:14.937

没有冲突或任何东西。

你正在做的是将fancybox绑定到*列表*元素

```
$(".slides li").fancybox(); 
```

...所以 fancybox 将`li`（`img`标签）的内容移动到盒子中。由于您的`img`标签中有这些属性：

```
width="179px" height="224px" 
```

...图片在fancybox中很小。

此时，fancybox 将内容作为`inline`内容处理，因此在`img`使用 css 属性关闭fancybox 后返回标签`display: none;`（这是预期的行为。）

您需要做的是更改 php 的这一部分并添加一个`a`标签来定位要在 fancybox 中打开的图像，例如：

```
if($datei != "." && $datei != ".."){
    echo '<li>';
    echo '<a href="pics/'.$datei.'" class="fancybox">';
    echo '<img src="pics/'.$datei.'" width="179px" height="224px" />';
    echo '</a>';
    echo '</li>';
} 
```

...**请注意**，我们将标签`class="fancybox"`从`img`标签移至`a`标签。然后将fancybox绑定到`a`脚本中的该标签，例如：

```
$(".slides a").fancybox(); 
```

或更好

```
$(".slides a.fancybox").fancybox(); 
```

或者更简单更好

```
$("a.fancybox").fancybox(); 
```

# asp.net - DNN 登录模块不见了。无法登录 DNN 6 站点

> ID：14245198
> 
> 赞同：0
> 
> 时间：2013-01-09T19:45:36.020
> 
> 标签：asp.net, dotnetnuke

我试图更改我的 DNN 6 站点上的默认登录页面。我在网站的根目录中添加了一个名为“登录”的页面。

这样做之后，默认的 DNN 登录页面似乎已被删除，现在我的网站上不存在包含登录模块的页面。

当我单击登录皮肤令牌时，它只会为我创建的登录页面生成一个弹出窗口，该页面上没有登录模块。

我还尝试了 ?ctl=login，这会产生与皮肤令牌完全相同的结果。

帮助？啊！

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:25:30.280

亚历克斯，

创建一个名为 AutoHost.aspx 或任何难以判断的名称的新 aspx 页面。将页面的继承更改`System.Web.UI.Page`为`DotNetNuke.Framework.CDefault`将以下行添加到页面加载事件：

```
FormsAuthentication.SetAuthenticationCookie(HostUser,true);
Response.Redirect("/Default.aspx");
```

将此页面上传到站点的根目录并导航到它。

这将使您以主机用户身份登录，您可以进行所需的更正。

# c# - 如何从我创建的 .mdf 数据库进行备份

> ID：14245200
> 
> 赞同：2
> 
> 时间：2013-01-09T19:45:41.370
> 
> 标签：c#

我使用 Visual Studio 2008 创建了一个`.mdf`数据库文件。我可以检索数据并将其插入数据库，但是当我想要备份时，我收到一个错误。

我的代码：

```
string con = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|C:\test\Data|\DB.mdf;Integrated Security=True;User Instance=True";

connect = new SqlConnection(con);
connect.Open();

SqlCommand command = new SqlCommand(@"backup database [" + System.Windows.Forms.Application.StartupPath + "\\Data\\DB.mdf] to disk ='"+str+"' with init,stats=10",connect);
command.ExecuteNonQuery();
connect.Close();

MessageBox.Show("The support of the database was successfully performed", "Back", MessageBoxButtons.OK, MessageBoxIcon.Information); 
```

错误是：

> *错误：键“attachdbfilename”的值无效。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:52:43.000

这仅适用于 SQL Server 2012 和 .NET 4.0.1。

如果你有这些，你应该能够使用 AttachDbFilename。

无论如何，如果您有一个用于嵌入式数据库的 .MDF 并且实例没有运行，您可以复制 .MDF 和 .LDF 进行备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:52:57.617

好像您的连接字符串不正确。

试试这个：

```
string con = @"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\test\Data\DB.mdf;Integrated Security=True;User Instance=True"; 
```

有关更多选项，请查看： http: [//www.connectionstrings.com/sql-server-2005](http://www.connectionstrings.com/sql-server-2005)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T07:03:54.783

只需将您的连接字符串用作

```
SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["<your connection string name from your app.config file>"].ConnectionString); 
```

我试过了，它对我有用。

# ios - 在 iOS 中播放视频失败

> ID：14245203
> 
> 赞同：1
> 
> 时间：2013-01-09T19:45:49.207
> 
> 标签：ios, objective-c, video, mpmovieplayercontroller

我只想加载主包中的视频文件，这看起来很简单，但由于某种原因，我不断收到错误`MPMoviePlayerController`，我有以下代码。

```
- (void)viewDidLoad{
[super viewDidLoad];

NSString *path = [[NSBundle mainBundle] pathForResource:@"ipad2" ofType:@"mp4"];

self.myPlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:path]];
[self.myPlayer prepareToPlay];

self.myPlayer.movieSourceType = MPMovieSourceTypeFile;
[self.myPlayer.view setFrame:self.view.bounds];
[self.view addSubview:self.myPlayer.view];

[self.myPlayer play];

} 
```

我只得到一个黑屏和以下输出：

```
2013-01-09 13:38:15.686 myVideoApp[1789:907] [MPAVController] Autoplay: Likely to keep up or full buffer: 0
2013-01-09 13:38:15.690 myVideoApp[1789:907] [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up. 
```

我也尝试添加这些播放通知，但从未发送：

```
[[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(playVideo:)
 name:MPMoviePlayerLoadStateDidChangeNotification
 object:self.myPlayer ]; 
```

当我打印时，`self.myPlayer.loadState`我得到`0`未定义的 loadState。
这是一个带有任何其他方法的简单 viewController，我在`.h`文件中有这些声明： `@property (nonatomic, strong) MPMoviePlayerController *myPlayer;`

我在 iOS 6 上运行，这些都发生在设备和模拟器中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:56:31.080

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"ipad2" ofType:@"mp4"]; 
```

您是否检查了`path`不是的调试器`nil`？

```
self.myPlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:path]]; 
```

这是从文件路径创建 URL 的错误方法。改为使用[`+[NSURL fileURLWithPath:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURL/fileURLWithPath%3a)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:07:17.147

我还使用 MPMoviePlayerViewController 在我的应用程序上直播视频并得到相同的上述列表错误。我发现 MPMoviePlayer 不支持更大的数据来显示视频，但如果你使用较小的视频数据工作正常，它不会给出任何错误。其实不是准备播放和播放器播放属性的问题。

如果您需要显示更大的数据，请在您的应用程序上使用 webview。

# sql - Oracle union 捕获所有值

> ID：14245204
> 
> 赞同：0
> 
> 时间：2013-01-09T19:45:49.017
> 
> 标签：sql, oracle

我有一个表，其中有一列名为 PEGA ID，该列的值是 111、222 等，还有一些 0，当我在下面执行 qry 时，所有 0 都被过滤了如何计算那些 0，我可以使用联合吗？

```
SELECT  
    ivr.dw_dealer_id, 
    ivr.dw_product_id, 
    ivr.dw_program_type_id, 
    ivr.dw_month_id, 
    TO_CHAR(ivr_update_dt, 'YYYYMM') buss_month, 
    count(*)
FROM  idm_ivr_interaction ivr, stgdba.interactions intr
WHERE ivr.cti_rec_id = intr.pega_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:56:35.120

编辑：由于 OP 特别提到它`0`不是空值，我们将查询更改为使用`case`.

`count(case when ivr.dw_dealer_id = 0 then 1 else ivr.dw_dealer_id end)`

或者只使用带有 last 的查询`OR`。

```
SELECT  
        ivr.dw_dealer_id, 
        ivr.dw_product_id, 
        ivr.dw_program_type_id, 
        ivr.dw_month_id, 
        TO_CHAR(ivr_update_dt, 'YYYYMM') buss_month, 
        count(ivr.dw_dealer_id) as counts
    FROM  idm_ivr_interaction ivr, stgdba.interactions intr
    WHERE ivr.cti_rec_id = intr.pega_id
    AND (intr.pega_id IS NULL OR ivr.cti_rec_id IS NULL) 
```

* * *

环绕`nvl`身份证...

```
SELECT  
    ivr.dw_dealer_id, 
    ivr.dw_product_id, 
    ivr.dw_program_type_id, 
    ivr.dw_month_id, 
    TO_CHAR(ivr_update_dt, 'YYYYMM') buss_month, 
    count(nvl(ivr.dw_dealer_id,1))
FROM  idm_ivr_interaction ivr, stgdba.interactions intr
WHERE ivr.cti_rec_id = intr.pega_id
AND (intr.pega_id IS NULL OR ivr.cti_rec_id IS NULL) 
```

*   顺便说一句，你正在使用的应该有一个`Group By`......`count`

# hadoop - 确认 oozie 使用 java action 运行的 Java 代码是否仅在单个节点上运行

> ID：14245206
> 
> 赞同：2
> 
> 时间：2013-01-09T19:45:52.080
> 
> 标签：hadoop, mapreduce, oozie

我正在使用 oozie 运行工作流程。它有一个运行任意（非 map reduce）代码的 java 操作。此 java 代码用于在本地文件系统上创建文件和文件夹。我想确保 java 操作在 hadoop 集群的单个节点上运行（我的是 7 个节点）。对我来说，最好是这个 java 操作总是在同一台机器上运行，最好只在 hadoop 主节点上运行。是否可以？即使有解决方法也请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:30:05.363

Java Action 就像 map reduce 作业一样运行，因此您无法控制它将在集群中的哪个节点上运行。

我不确定 oozie 是否会兑现这一点。但是您可以尝试将可接受的映射器故障数设置为较高的值（例如 10），然后如果执行集群节点不是您想要的（使用 InetAddress 获取本地计算机名称），则在您的 Java 操作中引发异常/IP）。

然后希望（但不一定保证），您的操作将继续在不理想的节点上失败，并最终在您选择的节点上成功。

有点 hack，但它可能会起作用（同样，这取决于您是否可以在整个作业失败之前修改 map 任务失败的次数 - `mapred.map.max.attempts`，默认情况下为 4）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:32:20.013

任何 Oozie 作业（简单的 java 操作或 pig 操作或 hive 操作或..）依次作为 map-reduce 作业运行。它是 Oozie 框架的核心属性。

Oozie 工作流是安排在控制依赖 DAG（直接无环图）中的操作。

参考：[Oozie 设计架构](http://rvs.github.com/oozie/design.html)

因此，我希望我们无法将文件保存在集群中所需的节点中。

# javascript - 检查无序列表是否包含特定列表项

> ID：14245214
> 
> 赞同：0
> 
> 时间：2013-01-09T19:46:15.093
> 
> 标签：javascript, jquery, html, search

例如我有一个这样的列表

```
<ul id='root'>
    <li> <a> Item0 </a> </li>
    <li> <a> Item1 </a> </li>
    <li> 
        <a> Item2X </a>
        <ul> 
            <li> <a> Item2.0 </a> </li>
        </ul>
    </li>
</ul> 
```

并想检查 root 是否包含以下项目

```
<li> <a> Item2.0</a> </li> 
```

我们可以使用 jquery 来比较列表项的文本值，以便于比较。解决上述问题的好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:49:55.923

使用 jQuery[包含](http://api.jquery.com/contains-selector/)：

```
var element = $('#root a:contains("Item2.0")');

if (element.length > 0) {
    // anchor was found containing "Item2.0" text
} else {
    // anchor was not found containing "Item2.0" text
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:49:59.437

您可以使用`:has`和`:contains`。

```
var hasItem = !!$("#root:has(a:contains(Item2.0))").length; 
```

# ios - 添加到滚动视图的内容时，Xcode Scrollview 滚动垂直不起作用

> ID：14245217
> 
> 赞同：0
> 
> 时间：2013-01-09T19:46:22.670
> 
> 标签：ios, xcode, scrollview

当我在滚动视图中运行没有内容的应用程序时，我可以滚动到所有 4 个可能的方向。只要我将内容添加到滚动视图（我想显示一个非常大的图像（500x500）），它就不能再向左或向右滚动，只有顶部和底部是可能的（也用标签等测试过，不是在职的）。如何让我的 Scrollview 向左和向右滚动并包含内容？

我的代码：

```
[scrollermap setScrollEnabled:YES];

    [scrollermap setContentSize:CGSizeMake(500, 500)]; 
```

编辑：当滚动视图中有内容时，左右滚动似乎不起作用，这很奇怪。

谢谢，莫里斯A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:49:22.300

您应该设置滚动视图的 contentSize。

```
[scrollView setContentSize:CGSizeMake(500,500)]; 
```

# block - 玉块只包含原始文本

> ID：14245218
> 
> 赞同：1
> 
> 时间：2013-01-09T19:46:40.407
> 
> 标签：block, pug

我想要一个玉石块作为我的标题，例如

```
html
  head
    title
      block head_title 
```

然后是 mypage.jade

```
block head_title.
  raw text here 
```

但是翡翠似乎总是期望一个块内有一个标签，并输出

```
<raw>text here</raw> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:28:45.847

使用管道：

```
block head_title
  | raw text here 
```

文档：[https ://github.com/visionmedia/jade#a6-3](https://github.com/visionmedia/jade#a6-3)

# emacs - 控制台模式下emacs菜单栏的作用是什么？

> ID：14245219
> 
> 赞同：4
> 
> 时间：2013-01-09T19:46:42.700
> 
> 标签：emacs, emacs23

将 emacs 加载到终端（控制台）窗口中，顶部是一个包含文件、编辑、选项等的菜单。据我的谷歌告诉我，访问它的方式是 F10，Mx 菜单栏打开，等等。但是，这会打开一个包含菜单栏内容的新缓冲区。这对我来说似乎很荒谬。为什么开发人员要浪费一整行可用的屏幕和一个什么都不做的菜单？

除非有办法扩展菜单项，例如向下打开“文件”并让我用键盘选择选项而不打开新缓冲区（我不知道该怎么做），否则我看不到任何目的是在顶部有一个菜单栏，而不是提醒我文件、编辑等存在。

那么有没有办法让菜单项展开？还是只是一个提醒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:55:24.233

把它放在你的 .emacs 文件中：`(menu-bar-mode -1)`

所有问题都解决了。

公平地说，当您按 f10 时，当您不在控制台模式下时，它会突出显示“文件”。

# javascript - Javascript如何对javascript数组进行部分排序？

> ID：14245220
> 
> 赞同：-3
> 
> 时间：2013-01-09T19:46:48.197
> 
> 标签：javascript

我有一个来自 mij 页面上的查询的（JS）数组，它看起来像这样：

```
12349,1,1,1,12345,2,2,2,123457,3,3,3 
```

5 位数字是示例“时间戳”，一位是属于时间戳的价格。我想根据时间戳对数组进行排序，但也希望价格保持在时间戳之后。所以在排序之后，数组必须看起来像这样：

```
12345,2,2,2,12349,1,1,1,123457,3,3,3 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T19:56:19.877

```
var input=[12349,1,1,1,12345,2,2,2,123457,3,3,3] 
```

第一步：转换为更好的结构（我不知道语义，但你知道）。通常不需要此步骤：

```
var temp=[];
for(int i=0; i<input.length; i+=4){ //assuming the form T,x,x,x{,T,x,x,x}
  temp.push(input.slice(i,i+3))
} 
```

第二步：进行排序。如果您使用正确的数据结构，这是您唯一需要做的事情（除非您使用`return a.timestamp-b.timestamp`）：

```
temp.sort(function(a,b){return a[0]-b[0]}) 
```

第三步**（可选）**：转换回：

```
var out=[];
for(int i=0; i<temp.length; i++){
  for(int j=0; j<temp[i].length; j++){
    out.push(temp[i][j])
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:02:21.633

这是处理它的一种方法：

```
var source = [12345,2,2,2,12349,1,1,1,123457,3,3,3];

function sort() {
    var timeslices = [];
    var curr;
    for (var i=0; i < source.length; i++) {
        if (source[i] > 9999) {
            if (curr) {
                timeslices.push(curr);
            }
            curr = {
                time : source[i],
                prices: []
            };
        }
        else {
            curr.prices.push(source[i]);
        }
    }
    timeslices.push(curr);
    return timeslices.sort(function(a,b) {
        return a.time - b.time;
    });
}

console.dir(sort()); 
```

[小提琴](http://jsfiddle.net/4x4qd/)

我没有假设每个时间戳有多少价格。我还假设您的 6 位数字也应该是时间戳。

我没有再次将您的数组展平，但是您可以根据需要这样做，但是将数据保持在更有用的结构中更有意义。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T19:51:49.343

将数据存储在这样的数组中确实是错误的，您可能应该使用多维数组：

```
[0]=>{[0]12345,[1]1}
[1]=>{[0]23456,[1]2} 
```

甚至更好的关联数组：

```
[0]=>{['timestamp']12345,['price']1}
[1]=>{['timestamp']23456,['price']2} 
```

我希望它可以帮助你。

编辑：这不是代码，我只是试图显示数组的结构。

# google-apps-script - 使用 UrlFetchApp 函数的嵌入式工作表将所有单元格显示为“正在思考...”

> ID：14245221
> 
> 赞同：0
> 
> 时间：2013-01-09T19:46:49.437
> 
> 标签：google-apps-script, google-sheets

我正在使用 UrlFetchApp.fetch 对数据库进行大量调用。当我嵌入电子表格时，所有数据看起来都很好，而我仍然在浏览器中打开了谷歌电子表格。但是当我在浏览器中关闭电子表格然后在嵌入页面中查看它时，所有单元格都显示为“正在思考...”。如果我通过 GDrive 再次打开电子表格，所有单元格都会重新加载。但是每次我关闭它时，嵌入的工作表都会回到只显示“正在思考......”。

工作表在未打开时是否不维护函数检索到的数据？有什么办法吗？

编辑：示例函数

```
function count(term, date){
  var randnumber = Math.random()*10000;
  Utilities.sleep(randnumber);
  var response = UrlFetchApp.fetch("http://url");
  var doc = Xml.parse(response.getContentText());
  var topElement = doc.getElement();
  var count = topElement.getElement("Count");
  var countValue = count.getText();
  var reference = countValue;
  return reference;
} 
```

删除 utility.sleep() 没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:09:33.193

好的，这是一个并不能真正解决问题的解决方案：

我正在嵌入小部件，但如果您使用它嵌入实际的电子表格，它将起作用：

```
<iframe src="https://docs.google.com/spreadsheet/ccc?key=KEYHERE&amp;hl=en&amp;ui=2&amp;rm=minimal#gid=#" frameborder="0" width="whatever" height="whatever"></iframe> 
```

我还缓存了数据，所以我不会达到限制。

我宁愿显示小部件（或列表视图，以便任何人都可以排序），因为它删除了列/行字母，所以我仍然想知道为什么小部件不会使用此函数显示值。但这暂时可以。

# git - GIT 源代码控制

> ID：14245226
> 
> 赞同：1
> 
> 时间：2013-01-09T19:47:03.707
> 
> 标签：git, version-control

我一直在看一些 GIT 视频并阅读一些网站。到目前为止，对于我的团队来说，GIT 似乎是一个很好的源代码控制解决方案。但是，我有一个问题/担忧。我们有许多不同的代码项目，一次只有少数人在处理它们。如果我们每个人的机器上都有完整的代码库，那将是一团糟。哎呀，单台机器可能没有存储空间来容纳整个代码库和历史记录。是否可以设置 GIT，以便每个开发人员只有他们在他们的机器上工作的代码？我在想你也许可以为每个项目创建一个分支，开发人员可以选择在他们的机器上加入或退出。这听起来可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:48:22.130

这种方式破坏了分布式版本控制系统的全部*存在理由*。我想你会惊讶于一个项目在 git 中“适合”有多大而不会造成任何问题。如果 linux 内核可以做到这一点，那么您可能也可以。

如果您的项目相当正交，您可以将每个项目放在自己的存储库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:00:08.060

> 我们有许多不同的代码项目，一次只有少数人在处理它们。如果我们每个人的机器上都有完整的代码库，那将是一团糟。

您将为每个项目创建一个 Repo（假设您的项目是指独立应用程序）。开发人员只需要他们正在从事的项目的源代码。

其次，GIT 得到了很好的压缩。它目前用作 linux 的事实上的源代码控制（我上次听说大约有 1000 万行代码）。它对他们有用，很有可能，它对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T20:03:12.520

七年 linux 历史的 repo 在其默认设置下约为 650MB。与其为每个子项目创建分支，不如为每个子项目创建一个完整的 repo。如果您需要将所有子项目作为一个包收集在一起，您可以拥有一个包含所有子项目作为分支的存储库，并将它们合并到该存储库中的单个包中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T19:52:47.807

假设每个项目都属于一组人并且这些组没有太多重叠，为什么不将每个代码项目放在单独的 git 存储库中呢？这样，开发人员只能克隆他们需要的存储库。

请注意，通常分布式存储库比集中式存储库使用更多空间。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-09T19:58:24.927

有可能，但我认为您将通过多个分支（主要在您的大脑中）造成更多混乱，您需要单独的存储库，正如已经建议的那样

# python - Python - 在先前将标准输出重定向到文件后将其重置为正常

> ID：14245227
> 
> 赞同：26
> 
> 时间：2013-01-09T19:47:04.283
> 
> 标签：python, stdout

在我的 python 程序的开头，我有以下行：

```
sys.stdout = open('stdout_file', 'w') 
```

在我的程序进行到一半时，我想将标准输出设置回正常的标准输出。我该怎么做呢？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-09T19:48:06.170

原件`stdout`可以作为`sys.__stdout__`. 这[是记录在案的](http://docs.python.org/2/library/sys.html#sys.__stdin__)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-04T07:12:20.810

当然，stderr 也是如此。最后，需要这些行来获取原始流。

```
sys.stdout = sys.__stdout__
sys.stderr = sys.__stderr__ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-26T13:18:26.390

另一种常见的做法是存储默认的标准输出和/或标准输入，然后在完成将输出/输入发送到自定义流后返回它们。例如：

```
orig_stdout = sys.stdout
sys.stdout = open('stdout_file', 'w')
sys.stdout = orig_stdout 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-29T19:11:06.813

打开文件并用文件变量交换sys变量

```
f = open("sample.txt", "w")

sys.stdout, f = f, sys.stdout
print("sample", flush=True) 
```

把它拿回来

```
f, sys.stdout = sys.stdout, f
print("sample") 
```

# javascript - JQuery 滚动到 Div 忽略偏移量

> ID：14245231
> 
> 赞同：0
> 
> 时间：2013-01-09T19:47:16.183
> 
> 标签：javascript, jquery, navigation, scroll, jquery-scrollable

对于我的导航，我使用滚动到下面显示的 div jquery，但是当我第一次单击链接时，它会滚动并忽略顶部的偏移量，但如果我再次单击链接，它会自行更正。

```
 $(document).ready(function() {
  function filterPath(string) {
  return string
    .replace(/^\//,'')
    .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
    .replace(/\/$/,'');
  }
  var locationPath = filterPath(location.pathname);
  var scrollElem = scrollableElement('html', 'body');

  $('a[href*=#]').each(function() {
    var thisPath = filterPath(this.pathname) || locationPath;
    if (  locationPath == thisPath
    && (location.hostname == this.hostname || !this.hostname)
    && this.hash.replace(/#/,'') ) {
      var $target = $(this.hash), target = this.hash;
      if (target) {
        var targetOffset = $target.offset().top -100;
        $(this).click(function(event) {
          event.preventDefault();
          $(scrollElem).animate({scrollTop: targetOffset}, 400, function() {
            location.hash = target;
          });
        });
      }
    }
  });

  function scrollableElement(els) {
    for (var i = 0, argLength = arguments.length; i <argLength; i++) {
      var el = arguments[i],
          $scrollElement = $(el);
      if ($scrollElement.scrollTop()> 0) {
        return el;
      } else {
        $scrollElement.scrollTop(1);
        var isScrollable = $scrollElement.scrollTop()> 0;
        $scrollElement.scrollTop(0);
        if (isScrollable) {
          return el;
        }
      }
    }
    return [];
  }

}); 
```

起初我认为在我的本地机器上运行它可能是一个问题，但是当页面上传到服务器时会发生此错误。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:10:24.093

尝试`location.hash = target;`从您的`.click`事件处理程序中删除。一旦动画完成，这将导致跳转。

# css - 我如何正确地将某些文本与其他居中的文本对齐

> ID：14245233
> 
> 赞同：0
> 
> 时间：2013-01-09T19:47:18.900
> 
> 标签：css, alignment

我希望在页面中间有一个客户推荐报价。引用可能是任意长度，但不跨越两行。然后我想要一个新行，然后是提供推荐信的人的姓名，就在推荐信的下方，但有道理。

```
<div class="quote">
 "Wow!  Thanks, create customer service."
</div>
<div class="source">
  -- John S. - California
</div> 
```

款式：

```
.quote {text-align:center}
.source {text-align:right; padding-right:300px;} 
```

如何对齐源，以便我可以使用任意长度的引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:54:41.867

这可能会：

HTML：

```
<blockquote>
    <p>
        <span class="quote">
            "Wow!  Thanks, create customer service."
            <cite>
                 -- John S. - California
            </cite>
        </span> 
    </p>
</blockquote> 
```

CSS：

```
blockquote {
    text-align: center;
}
.quote {
    position: relative;
}
cite {
     position: absolute;
     right: 0;
     bottom: -25px;
     text-align: right;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:03:21.507

稍微更改您的标记并将源代码嵌套到引用中。

```
<div class="quote">
    "Wow!  Thanks, create customer service."
    <div class="source">
         -- John S. - California
    </div> 
</div> 
```

它的CSS：

```
.quote { 
  display:table;
  text-align: center;
  margin:0 auto;
}

.quote .source {
  text-align:right;
} 
```

这是它的[小提琴](http://jsfiddle.net/PskLe/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:58:22.150

基本上：你不能不使用你的标记太丑陋和hack-y。（有关此类解决方案，请参阅 THiCE 的答案）。

我**不**推荐这个，但如果你对使用 JavaScript 没问题，那么这相当简单：（下面使用 jQuery，但没有它也可以实现）

```
$(".quote").each(function() {
    var $this = $(this);
    $this.next().css({"padding-right": ($this.parent().width() - $this.width()) / 2});
}); 
```

如果您不想使用 JavaScript 并且不想进行 hack-y，我建议您重新考虑一下您的布局。

# php - iOS应用程序到mysql数据库的php无法正常工作

> ID：14245238
> 
> 赞同：0
> 
> 时间：2013-01-09T19:47:34.763
> 
> 标签：php, mysql, ios, json, post

尝试通过 php 脚本将 JSON 数据从 iOS 应用程序发送到 mysql 数据库时遇到一些问题。

这是iOS应用程序的代码：

```
- (IBAction)sendButton:(id)sender
{
NSString *currentDate = [[NSString alloc] initWithString:[self getDate]];
NSDictionary *newsData = [[NSDictionary alloc] initWithObjectsAndKeys:titleField.text, @"title", nyheterTextField.text, @"newsText", currentDate, @"date", nil];
NSError *error = [[NSError alloc] init];
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:newsData options:NSJSONWritingPrettyPrinted error:&error];
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSLog(jsonString);
titleField.text = @"";
nyheterTextField.text = @"";
NSString *urlString = [NSString stringWithFormat:@"http://affectproductions.net/nyheter/upload.php"];

NSMutableData *body = [NSMutableData data];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];
NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data; name=\"json\"\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"%@",jsonString] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:body];

NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
if (theConnection) {
    self.recievedData = [NSMutableData data];
    NSLog(@"det funkade");
} else {
    NSLog(@"NSURLConnection failed");
} 
```

这是php脚本：

```
<html>
<body>

<?php
$json = $_POST["json"];
$con = mysql_connect("xxx", "xxx", "xxx");

mysql_select_db("FreeSir_MarinaLaroverket") or die("Unable to select database");

$result = json_decode($json);
foreach($result as $key => $value) {
if($value) {

mysql_query("INSERT INTO Nyheter (Title, News, Date) VALUES ($value->newsText, $value->title, $value->date)") or die ("error" . mysql_error());
echo "finito";
mysql_close($con);
?>

</body>
</html> 
```

在我将它连接到我的 iOS 应用程序之前，该脚本正在运行，但现在 mysql 数据库中根本没有任何值出现。

此致

自由宁静

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:59:54.987

尝试以下方法，而不是：

```
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary]; 
```

做

```
NSString *contentType = @"application/json"; 
```

# javascript - 玉中的迭代循环未正确呈现数据

> ID：14245239
> 
> 赞同：1
> 
> 时间：2013-01-09T19:47:36.020
> 
> 标签：javascript, node.js, express, pug

我有一张翡翠表，它将通过 express ( `res.render('index', {classes: results})`) 动态生成：

```
table
  tr
    th Title
    th School
    th Description
- if (classes.length) {
- classes.forEach(function(aClass) {
  tr
    td= aClass.title
    td= aClass.school
    td= aClass.desc
- });} 
```

但是，当我渲染它时，数据显示为一团乱麻。查看 HTML 源代码会发现该`</table>`标记位于*.* `classes`我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:47:36.020

你几乎得到它 - 玉在这里是挑剔的。创建迭代循环时，您需要确保 JavaScript 缩进到与数据相同的级别：

```
table
  tr
    th Title
    th School
    th Description
  - if (classes.length) {
  - classes.forEach(function(aClass) {
  tr
    td= aClass.title
    td= aClass.school
    td= aClass.desc
  - });} 
```

如果这让你内心的程序员对代码风格感到畏缩，我支持你。然而，事情就是这样。或者，您可以使用翡翠的`each`（[记录在这里](https://github.com/visionmedia/jade#iteration)）

```
table
  tr
    th Title
    th School
    th Description
  - if (classes.length) {
  each aClass in classes
    tr
      td= aClass.title
      td= aClass.school
      td= aClass.desc
  - } 
```

再一次，这看起来有点不稳定，但它是迭代的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:32:31.010

我的缩进风格是：

```
table
  tr
    th Title
    th School
    th Description
  if (classes.length)
    each aClass in classes
      tr
        td= aClass.title
        td= aClass.school
        td= aClass.desc 
```

# java - MapView 上的多边形数组

> ID：14245247
> 
> 赞同：1
> 
> 时间：2013-01-09T19:47:53.473
> 
> 标签：java, android, google-maps, android-maps

我正在创建一个`mapView`从 XML 文件下载的坐标。`GeoPoints`我已经像我希望的那样解析了坐标，但是我知道我正在对它们进行硬编码，我有两个问题，第一个是向点提供“来自 XML 文件”数组的最佳方法是什么？第二个问题是我无法将多边形分开。每个多边形视图都有五个坐标。问题是它正在连接多边形，就好像它是一个多边形一样。有人可以告诉我我做错了什么还是我需要做的其他事情。以下是我目前有任何帮助将不胜感激。

好的，我对原始问题进行了更新，我使用[Laire 的问题](https://stackoverflow.com/questions/11124584/howto-ontouch-on-a-paint-overlay-googlemaps)从 xml 中获取了数组部分。因此，所有坐标都从 xml 文件下载到地图，但问题是它们是连接的，就好像它是一组坐标一样。见![带多边形的地图](../Images/d4337ac5d71fb9d5467b5749fc510780.png)。

这是我在 mainActivity.java 中的代码

```
public class MapViewActivity extends MapActivity {
ArrayList<HashMap<String, Object>> boslst;
MapView mapView; 
MapController mapcontrol;
GeoPoint p;
Polygon polygon;

private static final class LatLonPoints extends GeoPoint { 
    public LatLonPoints(double latitude, double longitude) { 
        super((int) (latitude * 1E6), (int) (longitude * 1E6)); 
    } 
} 
public static BigDecimal round(float d, int decimalPlace) {
    BigDecimal bd = new BigDecimal(Float.toString(d));
    bd = bd.setScale(decimalPlace, BigDecimal.ROUND_HALF_UP);      
    return bd;

}  
@Override
protected boolean isRouteDisplayed() {
    return false;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String coordinates[] = {"35.20418", "-89.86862"};
    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);

    p = new GeoPoint(
            (int) (lat * 1E6), 
            (int) (lng * 1E6));

    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapcontrol = mapView.getController();
    mapcontrol.animateTo(p);
    mapcontrol.setZoom(10);
    mapView.setBuiltInZoomControls(true);

    ArrayList<GeoPoint> points = new ArrayList<GeoPoint>();
    try {

        URL url = new URL(
                "my url");
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(url.openStream()));
        doc.getDocumentElement().normalize();

        NodeList nodeList = doc.getElementsByTagName("Section");

        for (int i = 0; i < nodeList.getLength(); i++) {

            Node node = nodeList.item(i);

            Element locElement = (Element) node;
            NodeList nameList = locElement.getElementsByTagName("coords");

            int locationCount = nameList.getLength();

        for (int j = 0; j < nameList.getLength(); j++) {

            Node nodel = nameList.item(j);

            Element fstElement = (Element) nodel;
            NodeList nameL = fstElement.getElementsByTagName("coords");
            Element nameE = (Element) nameL.item(0);
            nameL = nameE.getChildNodes();

            String latit = ((Node) nameL.item(0)).getNodeValue();
            String[] latt = latit.split(",");
            BigDecimal latitude = round(Float.parseFloat(latt[0]),5);
            BigDecimal longitude = round(Float.parseFloat(latt[1]),5);

            double Lat = latitude.doubleValue();
            double Long =  longitude.doubleValue();

            points.add(new LatLonPoints(Lat,Long));
            polygon = new Polygon(points);
      }
            polygon = new Polygon(points);

        }
    }catch (Exception e) {
        Log.e("APP","Failed", e);
    }        

    mapView.getOverlays().clear();
    mapView.getOverlays().add(polygon);
    mapView.invalidate();
} 
```

多边形.java

```
public class Polygon extends Overlay {
ArrayList<GeoPoint> geoPoints;

public Polygon(ArrayList<GeoPoint> points){
    geoPoints = points;
}

@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow){
    //Set the color and style
    Paint paint = new Paint();
    paint.setColor(Color.parseColor("#88ff0000"));
    paint.setAlpha(50);
    paint.setStyle(Paint.Style.STROKE);

    //Create path and add points
    Path path = new Path();
    Point firstPoint = new Point();
    mapView.getProjection().toPixels(geoPoints.get(0), firstPoint);
    path.moveTo(firstPoint.x, firstPoint.y);

    for(int i = 1; i < geoPoints.size(); ++i){
        Point nextPoint = new Point();
        mapView.getProjection().toPixels(geoPoints.get(i), nextPoint);
        path.lineTo(nextPoint.x, nextPoint.y);
    }

    //Close polygon
    path.lineTo(firstPoint.x, firstPoint.y);
    path.setLastPoint(firstPoint.x, firstPoint.y);
    canvas.drawPath(path, paint);
    super.draw(canvas, mapView, shadow);

 }
 } 
```

所以我的问题是我该怎么做才能让多边形一次构建一个而不是一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:35:10.383

我相信你需要改变这个：

```
//Close polygon
path.lineTo(firstPoint.x, firstPoint.y);
path.setLastPoint(firstPoint.x, firstPoint.y);
canvas.drawPath(path, paint);
super.draw(canvas, mapView, shadow); 
```

对此：

```
 //Close polygon
    path.lineTo(firstPoint.x, firstPoint.y);
    path.setLastPoint(firstPoint.x, firstPoint.y);
    canvas.drawPath(path, paint);
    path.close();
    super.draw(canvas, mapView, shadow); 
```

在最后关闭路径并将您返回到原始点。

# ruby-on-rails - 使用终端将新数据插入 SQLite 数据库？

> ID：14245256
> 
> 赞同：1
> 
> 时间：2013-01-09T19:48:16.890
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sqlite

我正在尝试将数据插入到用于 Rails 应用程序的 SQLite 数据库中。

我最初以为我可以使用 SQLite 管理器，`insert into tablename (value) values ('value')`但是，它没有向表中插入任何内容，也没有产生错误。

我做错什么了吗？有没有办法直接用 Rails 做到这一点？

我以为我可以使用某种 activerecord 迁移`rake db:migrate`，但是我一直找不到合适的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:00:44.553

[`rails runner`](http://guides.rubyonrails.org/command_line.html#rails-runner)是一种利用 Rails 运行时的好方法，无需为您的应用程序加载整个 Rails 堆栈。它将为您的底层数据库提供完整的 ActiveRecord 资源，从而轻松进行数据库操作。

从`runner`内置帮助：

```
轨道跑者
用法：runner [options]（'Some.ruby(code)' 或文件名）

    -e, --environment=name 指定运行器运行的环境（测试/开发/生产）。
                                     默认：开发

    -h, --help 显示此帮助信息。

您还可以将 runner 用作脚本的 shebang 行，如下所示：
-------------------------------------------------- ------------
#!/usr/bin/env /Users/greg/junk/foo/script/rails runner

Product.all.each { |p| p.price *= 2 ; p.保存！}

```

我已经多次将它用于将 Rails 下的数据加载到数据库中的作业。对于您需要做的事情，这将是一个很好的解决方案。

“ [Rails 任务：脚本/运行程序还是 rake？](https://stackoverflow.com/questions/591503/rails-task-script-runner-or-rake) ”也值得一读以获取更多信息。

# rally - 如何获取项目的团队成员数量？

> ID：14245258
> 
> 赞同：3
> 
> 时间：2013-01-09T19:48:19.257
> 
> 标签：rally

我使用 2.0 API 创建了一个应用程序，我需要在其中收集为每个项目做出贡献的团队成员的数量。目前，我计算这个数字的方法是查看该项目中任务的唯一所有者的数量。今天我注意到，当我查看每个项目的权限时，它有一个“团队成员”字段，将我列为我加入的团队的一部分。我很好奇这个字段是否可以通过 API 访问以获取每个项目的团队成员数量，或者它是否仅在逐个用户的基础上可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T01:55:13.990

SDK 确实有一种方法可以访问每个项目中的团队成员数量。我这样做的方式是查询所有项目，从那里获取团队成员的数量。

这是我如何做到这一点的代码：

```
Ext.define('TeamMemberCountApp', {
    extend: 'Rally.app.App',
    componentCls: 'app',

    launch: function() {
        Ext.create('Rally.data.WsapiDataStore', {
            model: 'Project',
            fetch: ['Name', 'TeamMembers', 'FirstName', 'LastName'],
            autoLoad: true,
            context: this.getContext().getDataContext(),
            listeners: {
                load: this._onDataLoaded,
                scope: this
            }
        });
    },

    _onDataLoaded: function(store, data) {
        var records = [];

        Ext.Array.each(data, function(record) {
            var teamName = record.get('Name');
            var teamMembersList = record.get('TeamMembers');

            records.push({
                Name: teamName,
                TeamMembers: teamMembersList
            });

            console.log('Number of members in Team ' + teamName + ' is ' + teamMembersList.Count);
        });
    }
}); 
```

该商店将包含团队成员的数量，这是一个常规的 Javascript 数组。这些对象将保存 User 对象的 _ref 值。

数据存储中的 fetch 属性是递归的，这意味着它可以获取团队成员的名字和姓氏，尽管获取了项目模型。要创建完整的用户模型，我相信您需要使用[ModelFactory](http://developer.rallydev.com/apps/2.0p5/doc/#!/api/Rally.data.ModelFactory)，尽管我不是 100% 的。

就实际处理用户故事/缺陷/任务的团队成员而言，您查看每个工件所有者的方法似乎很好。上面的代码只会显示项目中的团队成员，无论他们在做什么。

为了将来参考，文档中的[此](http://developer.rallydev.com/apps/2.0p5/doc/source/ModelTypes.html#Rally-data-ModelTypes)源代码链接包含可以从简单字符串（例如“用户”或“缺陷”）使用的所有模型类型。

# actionscript-3 - 输入在我的框架中消失了。

> ID：14245263
> 
> 赞同：0
> 
> 时间：2013-01-09T19:48:41.587
> 
> 标签：actionscript-3

我有 3 个框架，每个框架都有几个文本输入框和我创建的一些复选标记。每次我单击转到下一帧时，我的输入和复选标记都会在上一帧上擦除。当我在我的框架中移动时，有没有办法让他在我的文本输入中保留文本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:54:59.643

尝试为每个帧中的相同输入提供相同的实例名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:31:24.483

变量应该做的工作

```
var firstcontent = "mycontent";
var secondcontent = "mycontent"; ... 
```

# windows - 使用 NSIS 将窗口移动到屏幕角落

> ID：14245264
> 
> 赞同：1
> 
> 时间：2013-01-09T19:48:51.550
> 
> 标签：windows, winapi, positioning, nsis

我正在尝试使用以下代码重新定位 nsDialogs 窗口：http: [//nsis.sourceforge.net/Moving_install_window_to_a_corner_of_the_screen](http://nsis.sourceforge.net/Moving_install_window_to_a_corner_of_the_screen)

我没有包含 System.nsh 文件，就好像我包含我收到错误一样：

```
!define: "IMAGE_BITMAP" already defined!
!include: error in script: "C:\Program Files (x86)\NSIS\Examples\System\System.nsh" on line 267 
```

如果我不包含 System.nsh 文件，则会收到以下错误：

```
unknown variable/constant "{stRECT}" detected, 
```

什么是 stRect 变量？如何至少避免其中一个错误并使用 NSIS 重新定位我的窗口？我正在使用最新版本的 NSIS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:16:06.023

```
!include nsDialogs.nsh
!undef IMAGE_BITMAP
!include "${NSISDIR}\Examples\System\System.nsh" 
```

...如果 nsDialogs.nsh 是冲突的标题，您可能还必须 !undef 其他图像类型。

# ember.js - Ember.js：renderTemplates 在路由器定义中给出 DEPRECATED 消息

> ID：14245267
> 
> 赞同：1
> 
> 时间：2013-01-09T19:49:05.410
> 
> 标签：ember.js, deprecated, ember-router

我只是设置了一个路由器定义如下

```
Sp.Router.map(function(match) {
    match('/').to('index');
});

Sp.IndexRoute = Ember.Route.extend({
    renderTemplates: function() {
        this.render('index');
    }
}); 
```

虽然它有效，但我收到以下警告：

```
DEPRECATION: Ember.Route.renderTemplates is deprecated. Please use Ember.Route.renderTemplate(controller, model) instead. 
```

我真的不明白我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T19:59:20.037

答案就在问题中：请使用 Ember.Route.renderTemplate(controller, model) (单数形式 ;))

相关提交：

[https://github.com/emberjs/ember.js/commit/2468b42f801dc192a6e762293f3590d25274dfd0](https://github.com/emberjs/ember.js/commit/2468b42f801dc192a6e762293f3590d25274dfd0)

[https://github.com/emberjs/ember.js/commit/6d771b7a9389fff826b8f2e500721da6a7ce2fc0](https://github.com/emberjs/ember.js/commit/6d771b7a9389fff826b8f2e500721da6a7ce2fc0)

感谢@klasspieter：此处解释了更改背后的原因：[https ://github.com/emberjs/ember.js/pull/1693](https://github.com/emberjs/ember.js/pull/1693)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T20:04:05.360

这是 v2.1 路由器的一部分。还有其他变化。您可以在此处了解更多详细信息： [路由器 v2.1](https://gist.github.com/1b54b0eaf48eabbcff24)

# mysql - MYSQL 从每个类别中选择一个随机记录

> ID：14245275
> 
> 赞同：7
> 
> 时间：2013-01-09T19:49:23.797
> 
> 标签：mysql, sql, random, sql-order-by

我有一个带有如下`Items`表的数据库：

```
id
name
category (int) 
```

有几十万条记录。每个都`item`可以是 7 个不同的其中之一`categories`，它们对应于一个`categories`表：

```
id
category 
```

我想要一个从每个类别中选择 1 个随机项目的查询。解决这个问题的最佳方法是什么？我知道使用`Order By rand()`和`LIMIT 1`类似的随机查询，但我从来没有做过这样的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T20:04:10.777

此查询以随机顺序返回所有加入类别的项目：

```
SELECT
c.id AS cid, c.category, i.id AS iid, i.name
FROM categories c
INNER JOIN items i ON c.id = i.category
ORDER BY RAND() 
```

要将每个类别限制为一个，请将查询包装在*partial* `GROUP BY`中：

```
SELECT * FROM (
    SELECT
    c.id AS cid, c.category, i.id AS iid, i.name
    FROM categories c
    INNER JOIN items i ON c.id = i.category
    ORDER BY RAND()
) AS shuffled_items
GROUP BY cid 
```

请注意，当查询同时具有`GROUP BY`and`ORDER BY`子句时，会在排序之前执行分组。这就是我使用两个查询的原因：第一个对结果进行排序，第二个对结果进行分组。

我知道这个查询不会赢得任何比赛。我愿意接受建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:00:50.963

试试这个

```
SELECT id, name, category from Items where
( 
 select count(*) from Items i where i.category = Items.category 
 GROUP BY i.category ORDER BY rand()
) <= 1 
```

参考：[http ://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:18:54.653

这是一个简单的解决方案。假设你有这张桌子。

```
id  name    category
1   A       1
2   B       1
3   C       1
4   D       2
5   E       2
6   F       2
7   G       3
8   H       3
9   I       3 
```

使用此查询

```
select
  c.id,
  c.category,
  (select name from category where category = c.category   group by id order by rand() limit 1) as CatName
from category as c
group by category 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-16T14:09:54.800

在最终选择之前更改原始表的顺序（随机顺序）：

```
select * from 
  (select category, id, name from categories order by rand()) as tab 
  group by 1 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-09T20:00:12.727

请注意：在以下示例中，我假设您的表名为“items”而不是“Items”，因为您还说另一个表名为“categories”（第二个表名未大写）。

您想要做的 SQL 大致是：

```
`SELECT items.id AS item_id,
items.name AS item_name,
items.category AS item_category_id,
categories.id AS category_id,
categories.category AS category_name
FROM items, category
WHERE items.category = categories.id
ORDER BY rand()
LIMIT 1` 
```

# gcj - 无法使用 gcj 编译 jar：未定义对 main 的引用

> ID：14245277
> 
> 赞同：0
> 
> 时间：2013-01-09T19:49:38.263
> 
> 标签：gcj

我用eclipse开发了我的java项目并构建了一个可运行的jar。然后我尝试使用 gcj 来编译那个 jar。

```
stefan@api-1:/Sbox/Software/executables$ gcj --classpath=Sbo
xSpeakerDependent.jar --main=SboxInterface SboxSpeakerDependent.jar -o Test
/tmp/ccpTssYV.o: In function `main':
ccIqdepF.i:(.text+0x24): undefined reference to `SboxInterface::class$'
collect2: ld gab 1 als Ende-Status zurück 
```

但是 SboxInterface 是唯一具有主方法的类，我在 eclipse 中创建可运行的 jar 时也放置了这些信息。

我可以尝试什么？我有点迷失了什么是错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T02:26:56.623

确保该类在 jar 中，并且您将完全限定的类名传递给 --main。这是最常见的两个错误。

# php - 从数据库中的两个不同表填充下拉列表

> ID：14245279
> 
> 赞同：0
> 
> 时间：2013-01-09T19:49:41.290
> 
> 标签：php, mysql

我正在尝试从数据库中的两个不同表中填充下拉列表，这些表使用前两个表中的 id 在第三个表中连接在一起。[我在这里](https://stackoverflow.com/questions/11636293/populate-another-select-dropdown-from-database-based-on-dropdown-selection)使用第一个答案作为下拉菜单的指南。

表格：课程——id、title；类——id、title；classes_to_courses -- 课程 ID、课程 ID

编码：

```
<?php
include("global.php");
doHeader();
$currentCourseClass = "SELECT id, title FROM courses";
$rsCurrentCourseClass = mysql_query($currentCourseClass);

while($get_row = mysql_fetch_assoc($rsCurrentCourseClass)) {
$categories[] = array("id" => $get_row['id'], "val" => $get_row['title']);
}

$currentCourseClass2 = "SELECT cl.id as classid, cl.title as classtitle, cr.id as courseid FROM classes_to_courses c2c LEFT JOIN classes cl ON c2c.coursesID = cl.id LEFT JOIN courses cr ON c2c.classesID = cr.id";

 $rsCurrentCourseClass2 = mysql_query($currentCourseClass2);

 while($get_row = mysql_fetch_assoc($rsCurrentCourseClass2)) {
 $subcats[$get_row['courseid']][] = array("id" => $get_row['classid'], "val" => $get_row['classtitle']);
 }
/**/
$jsonCats = json_encode($categories);
$jsonSubCats = json_encode($subcats);

?> 
```

我的问题似乎与第二个查询 $currentCourseClass2 有关。如何从连接表 classes_to_courses 中选择 courseid 以便正确设置我的数组？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:56:10.627

不确定您收到什么错误，但看起来您的加入可能是错误的。在代码片段中，您有：

```
SELECT 
    cl.id as classid, 
    cl.title as classtitle
    cr.id as courseid 
FROM classes_to_courses c2c 
LEFT JOIN classes cl ON c2c.coursesID = cl.id 
LEFT JOIN courses cr ON c2c.classesID = cr.id"; 
```

因此，您尝试使用 c2c.coursesID 加入 classes 表，反之亦然。

相反，您不应该加入基于 c2c.classesID 的课程表和 c2c.coursesID 上的课程表吗？

```
SELECT 
    cl.id as classid, 
    cl.title as classtitle
    cr.id as courseid 
FROM classes_to_courses c2c 
LEFT JOIN classes cl ON c2c.classesID = cl.id 
LEFT JOIN courses cr ON c2c.coursesID = cr.id"; 
```

# android - Eclipse ADT：工作但“终止”按钮变灰...？

> ID：14245281
> 
> 赞同：3
> 
> 时间：2013-01-09T19:49:51.273
> 
> 标签：android, eclipse, debugging, adt, terminate

我已经安装并运行了带有 ADT 的 Eclipse。通过 USB 和 TCP/IP (WiFi) 进行调试，包括实时断点。我是一位经验丰富的固件/软件开发人员，刚接触 Android/Java，到目前为止，我对开发环境印象深刻。

基本上，一切都很好——除了我不能正式终止调试会话。Terminate 按钮在 Run 菜单中可见，但显示为灰色。Suspend 和 Disconnect 图标是功能性的，只是不是 Terminate。我也检查了调试工具栏 - 同样的情况。

我搜索了很多地方，但没有找到任何解决“灰色终止按钮”的内容。有什么建议吗？

更多：我还尝试了帮助系统中的“窗口/显示视图/控制台”提示。相关的屏幕截图显示了控制台菜单栏中的终止按钮。但是，我的屏幕上没有出现这样的按钮，既不是红色也不是灰色。同时，代码正在运行，断点工作......所以我知道它正在调试。我就是无法终止它！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-01T18:35:29.567

只需在调试视图中单击 [Android 应用程序] 的名称，您的停止按钮就会被激活。

# java - Android SAXParsing空指针异常

> ID：14245286
> 
> 赞同：0
> 
> 时间：2013-01-09T19:50:01.227
> 
> 标签：java, android, xml-parsing, saxparser

我正在尝试在 Android 中解析 XML，但出现以下错误

```
01-10 01:17:19.050: W/System.err(3276): java.lang.NullPointerException
01-10 01:17:19.050: W/System.err(3276):     at com.m7.nomad.XMLParsingActivity.parseCategoryXML(XMLParsingActivity.java:31)
01-10 01:17:19.050: W/System.err(3276):     at com.m7.nomad.XMLParsingActivity.onCreate(XMLParsingActivity.java:26)
01-10 01:17:19.050: W/System.err(3276):     at android.app.Activity.performCreate(Activity.java:4465)
01-10 01:17:19.050: W/System.err(3276):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
01-10 01:17:19.050: W/System.err(3276):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
01-10 01:17:19.055: W/System.err(3276):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
01-10 01:17:19.055: W/System.err(3276):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-10 01:17:19.055: W/System.err(3276):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
01-10 01:17:19.055: W/System.err(3276):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-10 01:17:19.055: W/System.err(3276):     at android.os.Looper.loop(Looper.java:137)
01-10 01:17:19.055: W/System.err(3276):     at android.app.ActivityThread.main(ActivityThread.java:4507)
01-10 01:17:19.055: W/System.err(3276):     at java.lang.reflect.Method.invokeNative(Native Method)
01-10 01:17:19.055: W/System.err(3276):     at java.lang.reflect.Method.invoke(Method.java:511)
01-10 01:17:19.055: W/System.err(3276):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
01-10 01:17:19.060: W/System.err(3276):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
01-10 01:17:19.060: W/System.err(3276):     at dalvik.system.NativeStart.main(Native Method) 
```

**代码**

```
public class XMLParsingActivity extends SherlockActivity {

    AssetManager assetManager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_about);

        parseCategoryXML();
    }

    private void parseCategoryXML() {
        try {
            InputStream is = assetManager.open("categories.xml");

            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();

            CategoriesXmlHandler catXMLHandler = new CategoriesXmlHandler();

            xr.setContentHandler(catXMLHandler);
            InputSource inStream = new InputSource(is);
            xr.parse(inStream);
            is.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

错误被指向这一行

```
InputStream is = assetManager.open("categories.xml"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:51:40.803

`assetManager`是`null`。

您定义了变量，`assetManager`但是您没有为其分配值（至少在您提供的代码中没有）。

你可以使用`AssetManger`Activity提供的。在这种情况下，可以分配它`onCreate()`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.assetManager = this.getAssets();

    ...
} 
```

请参阅[getAssets()](http://developer.android.com/reference/android/content/ContextWrapper.html#getAssets%28%29)文档。

# android - Android 表单向导库建议

> ID：14245289
> 
> 赞同：1
> 
> 时间：2013-01-09T19:50:35.520
> 
> 标签：android, forms, wizard

我们正在构建一个包含数据收集组件的大型 Android 平板电脑应用程序（类似于 ODK、eMocha 等）。我曾想过为这个数据收集组件使用表单向导样式库，但似乎找不到太多。我希望不必从头开始做这一切——对 Android 表单向导库有什么建议吗？

在此先感谢，科林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T08:29:24.537

试试这个：

[向导寻呼机](https://code.google.com/p/romannurik-code/source/browse/misc/wizardpager)

它创建表单向导

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:49:45.410

据我所知，没有可用的库。我正在使用带有 Actionbar Sherlock 和滑动的片段。基本上一个片段活动的布局包含所有视图的“静态”，然后是一些片段，每个片段都有自己的视图，可以滑动以进入向导的下一个和上一个屏幕，最后一个片段是提交按钮.

这种从 SherlockFragmentActivity 控制片段的主要片段活动的方法使得维护各个片段的状态变得非常容易。

我正在使用 Actionbar Sherlock 来实现跨 Android 操作系统版本的向后兼容性，并耐心等待将原生 Android 操作栏添加到支持库中，正如 Google I/O 2012 导航演示之一中所承诺的那样。

上述方法意味着与任何通用向导生成器所提供的相比，所涉及的额外工作量不会很大。

希望有帮助

# ruby - 使用 Rspec 测试 Sinatra 上传和下载二进制文件

> ID：14245290
> 
> 赞同：1
> 
> 时间：2013-01-09T19:50:39.193
> 
> 标签：ruby, post, rspec, sinatra, md5sum

我有以下 rspec 代码来测试二进制文件的上传和下载。我知道我可以检查**“内容类型”**以验证文件是否已正确上传和下载。但是我如何根据以下内容运行 MD5 以确保它们实际上是同一个文件。

```
it "should upload a file" do
  file = Rack::Test::UploadedFile.new("./HelloWorld.bin", "application/octet-stream")
  json = {:md5sum => "0cd74c7a3cf2207ffd68d43177681e6b", :config => "./testconfig.yaml"}.to_json

  post "/upload", :json => json, :file => file
  last_response.should be_ok
  (JSON.parse(last_response.body)["status"]).should be_true
  (JSON.parse(last_response.body)["filename"]).should eq("HelloWorld.bin")
end

it "download a file successfully" do
  filename = "HelloWorld.bin"
  get '/download/' + filename
  last_response.should be_ok
  last_response.headers['Content-Type'].should eq "application/octet-stream"
end 
```

**'last_response.body'**可以在**get '/download'**中分配为二进制文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:45:43.893

由于 last_response.body 是一个字符串，您始终可以直接在字符串上运行 MD5 校验和。

```
 (Digest::MD5.hexdigest(last_response.body)).should eq ("a1cba6369d668ed0ae5e97658c30979a") 
```

# git - git push heroku master 挂在推送的中间

> ID：14245294
> 
> 赞同：2
> 
> 时间：2013-01-09T19:51:01.660
> 
> 标签：git, heroku

当推送到 Heroku ( `git push heroku master`) 时，我的 git 客户端在大约 20 秒后停止生成输出。它通常在处理 Gemfile 时挂起。推动总是有效的——我只是停止获得输出。

如果有帮助，这是我从`ssh -v git@heroku.com` [https://gist.github.com/4496219获得的输出](https://gist.github.com/4496219)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2021-07-07T19:22:06.050

我遇到了这个问题，并通过`heroku login`再次运行和登录来解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-04T02:18:12.047

我遇到了同样的问题，尽管我的推送从未通过 - 部署只是挂起，什么也没发生。事实证明这是 Heroku 方面的一个问题——在他们发布的[Heroku 状态](https://status.heroku.com/)页面上，他们遇到了构建失败的问题（他们很快就修复了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:26:54.877

这很可能是 Bundler 的问题。它在本地无法重现，因为您有一个带有一些宝石的缓存。请参阅[http://artsy.github.com/blog/2013/01/15/debugging-bundler-issues-with-heroku](http://artsy.github.com/blog/2013/01/15/debugging-bundler-issues-with-heroku)，您要按照[https://github.com/carlhuda/bundler/blob/master中的说明进行操作/ISSUES.md](https://github.com/carlhuda/bundler/blob/master/ISSUES.md)首先。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-13T14:03:04.343

尝试`git pull origin master` 其次`git push heroku master`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-09T21:15:44.247

我遇到过这种情况，有人告诉我去 git pull origin master，然后重试 git push heroku master。那行得通。不过，仍然不知道为什么它首先挂起。

# c# - WCF Service @ N-Tier App：在开发/生产之间切换？

> ID：14245296
> 
> 赞同：0
> 
> 时间：2013-01-09T19:51:19.190
> 
> 标签：c#, asp.net, .net, wcf

**语境**

我们使用 .NET Stack 开发了端到端的应用程序。所以，假设我们正在管理这样的事情：

WPF 客户端 <=> Web 服务：

1.  开发）纯引用（直接调用VS内部的WCF Service项目，不部署在IIS中）
2.  生产）远程Web服务【IIS@远程服务器，需要VPN连接】

网络服务 <=> 数据库：

1.  开发）SQL Server Express本地DB [@开发机器]
2.  生产）SQL Server DB [@生产服务器，同WS]

请注意，我已经实现了“手动方式，正确方式”（[http://www.code-magazine.com/Article.aspx?quickid=0809101](http://www.code-magazine.com/Article.aspx?quickid=0809101)）。因此，单独的合同/客户代理等等......

**问题**

我怎样才能以一种优雅的方式获得如前所述的设置？我的意思是，Web 服务 <=> 数据库很简单，因为我可以使用 web.config 转换来在调试和发布之间切换连接字符串。但是，**如何自动将“连接”从客户端应用程序切换到 Web 服务？**

在生产中，我使用了对代理的引用，并在 app.config 文件中描述了一个端点。我想在开发中我只需要一个对 Web 服务本身的简单引用。[我应该在调试/发布配置之间添加/删除引用吗？如果是，如何以编程方式实现？...我完全迷路了]。

**谢谢你们的时间！;)**

编辑：

正如@AlexanderBalte 建议的那样，开发行为只是对方法的直接调用。我在主开发机器上没有应用服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:25:49.200

就像[prthrokz](https://stackoverflow.com/users/991431/prthrokz)一样，评论说，我们只是切换端点。使用[条件编译符号](http://msdn.microsoft.com/en-us/library/aa691095%28v=vs.71%29.aspx)尽可能简单（但并不简单）：

```
 WCFServiceClient client = new WCFServiceClient();
#if DEBUG
    client.Endpoint.Address = new EndpointAddress(new Uri("http://devSrv/WCFService.svc"));
    client.Endpoint.Name = "Dev";
#else
    client.Endpoint.Address = new EndpointAddress(new Uri("http://prodSrv/WCFService.svc"));
    client.Endpoint.Name = "Prod";
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:46:19.023

据我了解，开发行为只是直接调用方法，而生产行为是通过生成的代理与 Web 服务交互。

分别地，在开发和生产中，您使用不同的类，但使用相似的方法集。

也许我们应该创建另一个代理接口，其中包含 Web 服务所具有的精确方法集。此接口将有两种实现：一种是代理直接方法调用，另一种是 Web 服务方法调用。

此外，您将需要编写一个`Factory`类，该类将根据 app.config 中的某些配置为您提供代理接口的实现。

# html - 我如何实现这样的边框？

> ID：14245297
> 
> 赞同：-5
> 
> 时间：2013-01-09T19:51:22.957
> 
> 标签：html, css

我正在尝试像[http://urustar.net/](http://urustar.net/)那样在他们的盒子上实现边框。

如果您在页面上向下滚动一点，这些框就是东西。它说“嗨，我们是一家小公司......”

大家加油！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:59:23.263

它通常被称为丝带。您可以在 Google 上搜索“CSS 功能区”，甚至可以找到如下内容：

[http://www.css3d.net/ribbon-generator/](http://www.css3d.net/ribbon-generator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:57:21.790

如果您的意思是包含“嗨，我们是一家小公司......”的实际横幅，它是一个覆盖......

但是如果你想用白色频闪像圆角一样接界。它是与此类似的 css：

```
border-radius: 3px;
border: 1px white solid; 
```

让我知道这是否有帮助。谢谢

# ruby-on-rails - 通过 CanCan 中多态关联的属性定义能力

> ID：14245299
> 
> 赞同：2
> 
> 时间：2013-01-09T19:51:34.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, cancan, polymorphic-associations

我有以下型号：

```
class Post < ActiveRecord::Base
   has_many :responses, as: :responseable, dependent: :destroy
end

class Call < ActiveRecord::Base
   has_many :responses, as: :responseable, dependent: :destroy
end

class Meeting < ActiveRecord::Base
   has_many :responses, as: :responseable, dependent: :destroy
end

class Response < ActiveRecord::Base
   belongs_to :responseable, polymorphic: true # Tested
end 
```

在 CanCan 中，我试图通过多态关联中的属性来定义特定自定义响应操作的能力。动作如下所示：

```
class ResponsesController < ApplicationController

  before_filter :authenticate_user!
  load_and_authorize_resource

  respond_to :html, :xml, :js, :json, :pdf

  # GET /responses/polling
  # GET /responses/polling.json
  def polling
    responseable_type = params[:responseable_type]
    klass = [Post, Call, Meeting].detect { |c| responseable_type}
    @responseable = klass.find(params[:responseable_id])
    @responses = @responseable.responses.where("created_at > ?", Time.at(params[:after]))
  end
... 
```

我的能力文件如下所示：

```
...
can :polling, Response, :responseable_type = "Post", :responseable => { :user_expert_private => false, :countries => { :id => user.country_ids} }
... 
```

此操作通过一个 JavaScript 函数运行，该函数每 5 秒轮询一次新响应。但是，当它运行时，我在日志中收到以下错误：

```
A NameError occurred in responses#polling:

  uninitialized constant Responseable
  activesupport (3.2.8) lib/active_support/inflector/methods.rb:230:in `block in constantize' 
```

知道从多态关系中定义属性能力的正确方法吗？

基本上，我不希望用户能够查看/创建响应，除非他们`can? show:`是父对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:05:41.183

看看[维基文章](https://github.com/ryanb/cancan/wiki/Nested-Resources)。有一个关于多态类型的部分。您需要使用嵌套授权。这是相关部分：

> 假设可以通过多态关联将任务分配给项目或事件。可以将数组传递给 :through 选项，它将使用它找到的第一个。

```
load_resource :project
load_resource :event
load_and_authorize_resource :task, :through => [:project, :event] 
```

> 在这里，它将检查@project 和@event 变量，并通过存在的任何一个来获取任务。请注意，这只是加载父模型，如果要授权父模型，则需要通过 before_filter 来完成，因为涉及特殊逻辑。

```
before_filter :authorize_parent
private
def authorize_parent
  authorize! :read, (@event || @project)
end 
```

# applescript - Can Applescript list all the applications placed in the dock?

> ID：14245301
> 
> 赞同：1
> 
> 时间：2013-01-09T19:51:41.140
> 
> 标签：applescript, dock

I can't work out how to list all the Applications that a user has placed in the dock.

Is this possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:37:39.827

Try this. This is a list of the apps a person has that are persistent in the dock. What I've basically done is use system events to read the plist file into an applescript record in the pListItems variable. Then I can use applescript techniques to access the lists and records inside of pListItems.

There's lots of information in com.apple.dock so you can look at the pListItems variable and work your way through it to pull out whatever you need. For example you might want the "|bundle-identifier|" instead of the "|file-label|". Good luck.

```
set plistpath to (path to preferences folder as text) & "com.apple.dock.plist"

tell application "System Events"
    set plistContents to contents of property list file plistpath
    set pListItems to value of plistContents
end tell
set persistentAppsList to |persistent-apps| of pListItems

set dockAppsList to {}
repeat with thisRecord in persistentAppsList
    set end of dockAppsList to |file-label| of |tile-data| of thisRecord
end repeat

return dockAppsList 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-07T02:52:02.353

**Adding on to the response by regulus6633** As suggested, using `|bundle-identifier|` does make for more reliable results in this script. For example, Evernote will not correctly identify in all AppleScript uses by using the `|file-label|` property due to both Evernote.app and EvernoteHelper.app having the same short name (`CFBundleName`).

**Additional idea** I used this script as a basis for one that start all applications that are permanently placed in the dock ('Keep in dock' option). I removed the dockAppsList array and replaced the second loop to activate all these applications. To avoid having windows splattered all over my screen, I maintain `appName` and use it to hide them right after activating the application.

To adjust, replace code after the `end tell` statement with the following:

```
repeat with thisRecord in |persistent-apps| of pListItems
set appName to |file-label| of |tile-data| of thisRecord
set appID to |bundle-identifier| of |tile-data| of thisRecord
tell application id appID to activate
tell application "Finder" to set visible of process appName to false
end repeat 
```

# django - 在 Django 上卸载 New Relic

> ID：14245303
> 
> 赞同：0
> 
> 时间：2013-01-09T19:51:48.967
> 
> 标签：django, apache, wsgi, newrelic

我在我的网站上安装了 New Relic，现在我删除了它，我的 wsgi 搞砸了。我认为是这个命令（从[这里开始](https://newrelic.com/docs/python/python-agent-quick-start)的第 4 步）

`NEW_RELIC_CONFIG_FILE=newrelic.ini newrelic-admin run-program python manage.py run_gunicorn`

这需要撤消，但无法弄清楚如何撤消。我很确定就是那条线，因为我检查了我的 apache 日志，它抱怨 New Relic 是如何丢失的（我已经删除了其他 stuf）。

有没有人从他们的 Python/Django 站点卸载 New Relic？我在他们的网站上找不到卸载说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:56:09.637

万一其他人遇到这个问题：我的 .wsgi 文件中有一个 new-relic 导入。您可以`grep -r ./ newrelic`在您的代码库中查找任何需要删除的新遗物导入或代码。

# javascript - 在哪里可以找到输入字段中占位符标签的 CSS / javascript 解决方案？

> ID：14245308
> 
> 赞同：1
> 
> 时间：2013-01-09T19:52:20.443
> 
> 标签：javascript, html, css

我想要一些像 windows live 上的登录框一样的东西。我在其中看到标签的框，然后当用户开始输入时标签消失。

我只能找到使用 jQuery 的解决方案。有谁知道一些不需要我加载 jQuery 的 javascript/CSS 解决方案？我的意思不是 HTML5 中的占位符属性。我想要一些可以在大多数浏览器中使用的东西，而不仅仅是新浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:55:30.267

[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills) 对于这些插件中的大多数，您只需去掉 jquery 部分并将其用作独立的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:24:29.450

不依赖于其他库的 HTML5 占位符 polyfill：

*   [占位符固定器](http://code.google.com/p/placeholder-fixer/)
*   [占位符.js](https://github.com/jamesallardice/Placeholders.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:41:41.797

你可以自己动手……这是我一起完成的一个 JSFiddle。[http://jsfiddle.net/VF8Dr/](http://jsfiddle.net/VF8Dr/)

CSS

```
.placeholder { 
  color: gray; 
  position: absolute;
  padding-left: 10px;
} 
```

JS

```
function addPlaceholder(id, text) {
  var elm = document.getElementById(id);
  var ph = document.createElement("SPAN");
  ph.className = "placeholder";
  ph.innerHTML = text;
  elm.parentNode.insertBefore(ph, elm.nextSibling);
  ph.style.left = elm.offsetLeft + 'px';
  ph.style.top = elm.offsetTop + 'px';
  ph.onclick = function() {
    ph.style.display = 'none';
    elm.focus();
  };
  elm.onfocus = function() {
    if(ph.style.display != 'none')
      ph.style.display = 'none';
  };
  elm.onblur = function() {
    if(elm.value == '')
      ph.style.display = '';
  };
}
addPlaceholder("demo", "my text"); 
```

显然，它没有经过广泛的测试，但如果你固执地不使用像 jQuery 这样的框架（或者只是避免不必要的膨胀），但仍然想要跨浏览器和旧浏览器的兼容性，这将帮助你实现目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T20:51:32.287

这是我过去使用的：

```
activatePlaceHolder: function() {
    var detect = navigator.userAgent.toLowerCase(); 
    if (detect.indexOf("msie") < 0) return false;
    var inputs = document.getElementsByTagName("input");
    var inputLen = inputs.length;
    for (var i = 0; i < inputLen; i++) {
        if (inputs[i].getAttribute("type") == "text") {
            if (inputs[i].getAttribute("placeholder") && inputs[i].getAttribute("placeholder").length > 0) {
                inputs[i].value = inputs[i].getAttribute("placeholder");
                inputs[i].onclick = function() {
                    if (this.value == this.getAttribute("placeholder")) {
                        this.value = "";
                    }
                    return false;
                }
                inputs[i].onblur = function() {
                    if (this.value.length < 1) {
                        this.value = this.getAttribute("placeholder");
                    }
                }
            }
        }
    }       
} 
```

# mysql - 返回每个用户查询的第一个匹配记录，activerecord rails 3

> ID：14245310
> 
> 赞同：0
> 
> 时间：2013-01-09T19:52:31.127
> 
> 标签：mysql, ruby-on-rails-3, activerecord, where

我在使用 Activerecord 和 MySQL 的 Rails 3 应用程序中有一个`Log`带有关联模型的模型。`User`A`Log`有两个属性：一个名为的字符串`label`和一个`timestamp`. 我想找到每个`Log`包含`label`字符串“create”的内容，但我只希望查询为每个用户返回一条记录，此外，我希望第一条记录与`timestamp`属性匹配这些条件。让我知道这是否太令人困惑，我会尝试更清楚。

一个缓慢的方法可能是......

```
logs=[]
User.all.each do |u|
  logs << Log.where("label like ? and user_id = ?","%create%", u.id).order('timestamp').limit(1)[0]
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:00:10.193

未经测试，但这是一般的想法：

`Log.select("DISTINCT user_id, *").where("label like ?","%create%", u.id).order('timestamp').group("user_id").includes(:user)`

# download - 使用 WGET 指定本地目录

> ID：14245321
> 
> 赞同：1
> 
> 时间：2013-01-09T19:53:08.020
> 
> 标签：download, directory, local, wget

我有一个关于 wget 的问题，我似乎无法弄清楚。

我正在使用以下命令下载我的 FTP 服务器的全部内容（工作正常）

```
wget -m -P c:\ ftp://user:password@xxx.xxx.xxx.xxx 
```

问题是这会在 c:\ 中创建一个名为 'xxx.xxx.xxx.xxx' 的文件夹，并将整个 FTP 服务器内容放在此目录中。

我不希望它创建这个目录，而只是将整个 FTP 目录结构直接放在 c:\

如何使用 wget 指定它？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:04:35.310

使用`-nH (--no-host-directories)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:59:04.567

```
-P prefix
--directory-prefix=prefix
Set directory prefix to prefix. The directory prefix is the directory where all other files and subdirectories will be saved to, i.e. the top of the retrieval tree. The default is . (the current directory) 
```

[http://linux.die.net/man/1/wget](http://linux.die.net/man/1/wget)

# python - 学python的艰辛练习50

> ID：14245325
> 
> 赞同：1
> 
> 时间：2013-01-09T19:53:30.810
> 
> 标签：python, setuptools

所以，我是 python 的新手，但在这本书之前没有真正的问题。此时我们要安装`lpthw.web`，但是在尝试安装时出现错误。

这就是我们被告知要写入终端的内容：

```
$ sudo pip install lpthw.web 
```

**这是我不断收到的错误：**

> 例外：回溯（最近一次调用最后）：文件“/Library/Python/2.6/site-packages/pip-1.2.1-py2.6.egg/pip/basecommand.py”，第 107 行，主要状态 = self .run(options, args) 文件“/Library/Python/2.6/site-packages/pip-1.2.1-py2.6.egg/pip/commands/install.py”，第 248 行，在运行中导入 setuptools ImportError：没有名为 setuptools 的模块
> 
> 存储完整的登录 /Users/user/Library/Logs/pip.log Users-MacBook-Pro:~ user$

**是的，我去了我的 pip 文件夹，发现那里的 setuptools 没有。这是如何以及为什么会发生的？**

**我很困惑，有什么建议吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:58:26.707

在 Ubuntu 上，您可以通过 apt-get 获取 setuptools：

```
$ sudo apt-cache search setuptools
[sudo] password for me: 
...
python-setuptools - Python Distutils Enhancements (setuptools compatibility)
...
python3-setuptools - Python3 Distutils Enhancements (setuptools compatibility) 
```

# c# - 多个派生类的泛型工厂的C#结构

> ID：14245327
> 
> 赞同：2
> 
> 时间：2013-01-09T19:53:36.540
> 
> 标签：c#, oop, generics

考虑以下情况：

可以有`Categories`；`Children`源自`Categories`; 在某处，必须有一个看起来像这样的方法：

```
ChildType[] Get(ParentType parent) { ... } 
```

`ChildType`不是派生自`ParentType`; 它们之所以如此命名，是因为该方法是一种工厂方法，用于根据父项的 ID 获取子项。

目前我有一些看起来像这样的东西：

```
static class CatFactory<ChildType, ParentType> : Category
    where ParentType: Category
    where ChildType: Category, new()
{
    public static ChildType[] Get(string catname, ParentType parent)
    {
        // ...
    }
}

class ParentCategoryA : Category { }

class ParentCategoryB: Category { }

class ChildCategoryA: Category { }

class ChildCategoryB: Category { } 
```

然后我会这样称呼工厂：

```
CatFactory<ChildCategoryA, ParentCategoryA>.Get(someparent); 
```

这样做的目的是 - 给定一些具有 ID 的强类型父实例，转到具有该 ID 的 Web 服务，然后反序列化一个新的子实例。

这在我嘴里留下了不好的味道。在我看来，`ChildCategoryA`应该知道它的父级是`ParentCategoryA`，并且应该能够调用`ChildCategoryA.Get(someparent)`。这当然可以通过`static Get()`为孩子的每个实现定义一个来实现，但这需要大量的重复代码。

那么 - 最好的方法是什么？单独的工厂类，还是没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:47:19.887

我觉得这个问题有点令人困惑。这就是我认为你想要做的：

编写一个静态方法，给定一个 Category 对象，该方法知道如何找到指定类型的该类别的所有子项。

如果这是正确的，那么我会建议一个扩展方法：

```
static class CategoryExtensions
{
    public static T[] GetChildren<T>(this Category parent)
        where T : Category, new()
    {
        // Do whatever...
    }
} 
```

然后，给定任何类别对象，您可以编写：

```
ChildCategory[] children = parent.GetChildren<ChildCategory>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:29:57.640

一种想法是使用反射在运行时定位所需的类型。这很慢，通常不推荐；如果这样做，明智的做法是缓存结果以避免多次反映。

不涉及反射的另一种方法是让孩子将自己添加到静态初始化程序中的某种注册表中 - 这样您就可以轻松编写所需的`Get<TChild, TParent>`方法，同时保持“本地”关系的知识。

就个人而言，如果在编译时就知道所有这些关系，我只需将它们全部连接到一个地方，就可以省去记住所有定义的位置的麻烦。=)

# backbone.js - 使用 RequireJS 将 Mustache 作为 AMD 模块加载 - 未定义 Mustache

> ID：14245329
> 
> 赞同：1
> 
> 时间：2013-01-09T19:53:36.983
> 
> 标签：backbone.js, requirejs, typescript, mustache

我无法使用 RequireJS 将 mustache.js 作为 AMD 模块加载（用于在 Backbone 模型中使用）。我也开始使用 TypeScript，因此我没有完全遵循依赖和声明的流程！

从 app.ts 开始：

```
require.config({
    paths: {'jquery': 'lib/jquery-1.8.3.min', 'underscore': 'lib/underscore.min', 'backbone': 'lib/backbone.min', 'mustache': 'lib/mustache', 'appmain': 'AppMain'}, 
    shim: {mustache: { deps: ["jquery"] }, backbone: { deps: ["underscore", "jquery"] }, appmain: {deps: ["backbone", "mustache"] } } });

require(['appmain'], (main) => {
    var appMain = new main.AppMain();
    appMain.run();
}); 
```

appmain.ts：

```
import tm = module("models/TestModel");

export class AppMain {
    public run() {
        var testModel = new tm.TestModel()
    }
} 
```

测试模型.ts：

```
/// <reference path="../modules/backbone.d.ts"/>
export class TestModel extends Backbone.Model {
    constructor(options?) {
        super(options);
    };
    initialize() {
        var stringTemplate = "{{something}}";
        Mustache.compile(stringTemplate);
    };
} 
```

我收到一个 javascript 错误，提示“未定义 Mustache”，尽管 mustache.js 确实在 TestModel.js 之前加载。我只是从这里使用 mustache.js：[https](https://github.com/janl/mustache.js) ://github.com/janl/mustache.js所以我想我可能不明白 AMD 模块是如何正确声明的。

我看到这个项目中有一些“AMD 包装器”，但我似乎也无法弄清楚它们是如何使用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T02:07:19.173

Mustache 确实[将自己定义为 AMD 模块](https://github.com/janl/mustache.js/blob/master/mustache.js#L11)，因此不需要填充。我不知道 TypeScript 以及它如何与 RequireJS 集成，但请尝试从配置的 shim 数组中删除 Mustache。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T03:05:53.977

我不太了解 TypeScript，但文档中提到编译器选项会将生成的 javascript 从 CommonJS 更改为 AMD。( `--module amd`)

[Visual Studio TypeScript 选项](https://stackoverflow.com/questions/12710691/visual-studio-typescript-options)

希望这可以帮助

# background - 从扩展背景或弹出到内容脚本的 sendMessage 不起作用

> ID：14245334
> 
> 赞同：98
> 
> 时间：2013-01-09T19:53:56.060
> 
> 标签：background, google-chrome-extension, sendmessage, content-script

我知道这个问题已经以不同的方式被反复问过，但我尝试过所有的答案（希望我没有错过任何人），但没有一个对我有用。

这是我的扩展程序代码：

**显现：**

```
{
"name": "test",
"version": "1.1",
"background": 
{ 
    "scripts": ["contextMenus.js"]
},

"permissions": ["tabs", "<all_urls>", "contextMenus"],

"content_scripts" : [
    {
        "matches" : [ "http://*/*" ],
        "js": ["jquery-1.8.3.js", "jquery-ui.js"],
        "css": [ "jquery-ui.css" ],
        "js": ["openDialog.js"]
    }
],

"manifest_version": 2
} 
```

**上下文菜单.js**

```
function onClickHandler(info, tab) {
    if (info.menuItemId == "line1"){

      alert("You have selected: " + info.selectionText);

      chrome.extension.sendMessage({action:'open_dialog_box'}, function(){});

      alert("Req sent?");

    }
}

chrome.contextMenus.onClicked.addListener(onClickHandler);

chrome.runtime.onInstalled.addListener(function() {

  chrome.contextMenus.create({"id": "line1", "type": "normal", "title": "I'm line 1",     "contexts":["selection"]});

}); 
```

**openDialog.js**

```
chrome.extension.onMessage.addListener(function(msg, sender, sendResponse) {

  if (msg.action == 'open_dialog_box') {
    alert("Message recieved!");
  }
}); 
```

背景页面的两个警报有效，而 content_script 之一无效。

控制台日志消息：端口错误：无法建立连接。接收端不存在。

我的错在哪里？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-01-09T20:04:23.907

在您的背景页面中，您应该调用

```
chrome.tabs.query({active: true, currentWindow: true}, function(tabs){
    chrome.tabs.sendMessage(tabs[0].id, {action: "open_dialog_box"}, function(response) {});  
}); 
```

而不是`chrome.extension.sendMessage`像现在这样使用。

变体向内容脚本发送消息，`chrome.tabs`而`chrome.extension`函数向所有其他扩展组件发送消息。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2020-08-04T16:52:23.537

@apsillers 是正确的。也不要忘记在你的内容脚本监听器中返回 true，否则它可能会过早关闭。

```
chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
    console.log(message)
    return true
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-11-19T10:45:08.380

这是一个向内容脚本文件发送消息的后台脚本示例。

**背景.js**

```
chrome.tabs.sendMessage(tabs[0].id,"your message"); 
```

**内容脚本/content.js**

```
chrome.runtime.onMessage.addListener(function (response, sendResponse) {
          console.log(response);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-09-10T07:30:25.277

提供的解决方案的问题是它们会引发其他错误（这会破坏我的谷歌浏览器）

@apsillers 解决方案有效，但回调引发错误！

它应该是什么样子

// 背景.js

```
chrome.tabs.query({active: true, currentWindow: true}, function(tabs){
chrome.tabs.sendMessage(tabs[0].id, {action: "open_dialog_box"});  
}); 
```

现在在由@Ronan Ca 提供的内容脚本中，它基于@apsillers 解决方案。由于我们从后台脚本中删除了回调，因此返回并不理想。

// ContentScripts.js

```
chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
console.log(message)
// return true <- this and the callback in background.js are what caused a crash in extensions page of my Google chrome
}); 
```

如果我尝试使用回调来完成，后台控制台将不会打开。（撞车就这么糟糕）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-22T22:30:15.667

我的用例需要从网页向后台脚本发送消息。我曾经`chrome.runtime.onMessageExternal`捕捉到这个消息。

在这个监听器内部，我基本上将消息转发到我的内容脚本，以便它可以做它的事情，但我无法弄清楚为什么我的内容脚本 onMessage 监听器不会捕捉到消息。

结果是在从网页发送消息之前等待 1 秒（我基本上是在加载时进行的），我能够看到消息击中了我的内容脚本。

# ruby-on-rails - ActionMailer 非 ASCII 字符

> ID：14245335
> 
> 赞同：2
> 
> 时间：2013-01-09T19:53:59.920
> 
> 标签：ruby-on-rails, encoding, actionmailer

我正在尝试`text/plain`使用包含非 ASCII 字符的 ActionMailer 发送电子邮件。但是，一封包含以下内容的电子邮件：

```
“This has smart quotes” 
```

在电子邮件（和日志）中显示为：

```
=E2=80=9CThis has smart quotes=E2=80=9D 
```

并且`Content-Transfer-Encoding`电子邮件是`quoted-printable`. 在视图中，此文本呈现如下：

```
<%= raw(strip_tags(@message)) %> 
```

我不确定这是在哪里发生的，`charset`电子邮件的标题是 UTF-8。这是 Ruby 1.9.3-p194 和 Rails 3.2.11。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T01:44:43.020

我知道这有点老了，但实际上我上周才遇到这个问题，所以我会把我的发现放在这里，以防其他人有这个问题。

ActionMailer 依赖于邮件 gem ( [https://github.com/mikel/mail](https://github.com/mikel/mail) )。对于非多部分电子邮件，邮件遵循 RFC2822。符合 RFC2822 意味着它只允许 US-ASCII 字符或 1-126 dec 范围内的字符。因此，您看到的是邮件 gem 检查您的邮件正文并找到 8 位字符，因此它将 Content-Transfer-Encoding 设置为带引号的可打印将非 US-ASCII 字符转换为其十六进制等效字符（E2 80 9C / E2 80 9D | “ / ” | 分别为左/右双引号）。如果您希望发送非 ASCII 字符的电子邮件，您可以将 content_transfer_encoding 设置为 8 位。

```
mail = Mail.new
mail.transport_encoding = "8bit"
mail.deliver 
```

尽管可能存在邮件服务器会拒绝您的电子邮件，因为它包含非 US-ASCII 字符，因此请注意。

# hibernate - 在休眠多对多关联中重新排序列表中的项目

> ID：14245337
> 
> 赞同：3
> 
> 时间：2013-01-09T19:54:11.057
> 
> 标签：hibernate, collections, associations

我有两个实体 Person 和 Preference。两者之间存在多对多的关系。人和偏好关系存储在映射表中

```
CREATE TABLE `person_2_preference` (
`person_id` varchar(32) NOT NULL,
`preference_id` varchar(32) NOT NULL,
`sort_order` int(11) NOT NULL,
 PRIMARY KEY (`person_id`,`preference_id`); 
```

一个人有一个有序的偏好列表，如下所示。

```
<list  name="preferences" table="person_2_preference" lazy="true" inverse="false" 
        cascade="save-update">
            <key column="person_id" update="false"/>
            <index column="sort_order"/>
            <many-to-many class="com.xx.Preference" column="preference_id" />
        </list> 
```

在 java 类中，我想在某些情况下重新排序首选项，所以我正在执行 Collections.swap 之类的 Collections.swap(person.getPreferences(), index, index++) （我有验证以确保索引不是超出范围）

当我保存人 - personDao.saveOrUpdate(person) 时，由于主键，我得到一个唯一的约束违规异常。

我还有其他一对多的有序关系，使用 Collections.swap 重新排序效果很好。这是对多对多关系的限制吗？谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:21:08.277

我认为这个问题来自 Hibernate 的内部存储结构，它被你的交换弄糊涂了。Hibernate 还将列表的对象存储在一级缓存中，并且它在某处存储了实际在数据库中的值，因此它可以决定是否需要更新。

当你改变列表中的顺序时，有两种更新方式：要么让person_id和preference_id不变，修改sort_order，要么让sort_order不变，修改person_id和preference_id。在交换的情况下，第二种方式导致在两次更新中的第一次之后违反唯一约束。由于某些与 Hibernate 内部组织有关的原因，Hibernate 以第二种方式进行更新。

如何解决这个问题有（至少）三种不同的可能性：

1.  您将序列添加到表 person_2_preference 并将此序列作为主键（Hibernate 喜欢只有一列的主键）。我没有对此进行测试，我不能 100% 确定它是否能解决您的问题。

2.  您可以通过 HQL 更新语句手动进行更新：

    `UPDATE Person2Preference SET sortOrder= :order WHERE personId=:person and preferenceId=:preference`

    Person2Perference 是映射到 person_2_preference 的类。这必须为每个子对象完成。在此之后`evict()`，可能会推荐使用父对象和/或子对象（Hibernate 在此更新后不会更新第一级缓存）。

3.  您不会交换从 Hibernate 获得的列表中的元素。您将此列表复制到数组列表（或数组）中，并且仅在副本中进行交换。这不需要太多内存，因为在您的副本中只有对对象的引用。在 Hibernate 对象中，您只更新排序顺序。

我可能会做解决方案 3。解决方案 1 如果对新序列有任何其他需要，我会做。

# php - 用于 YouTube 嵌入的 WordPress 网站上的 PHP 错误

> ID：14245338
> 
> 赞同：0
> 
> 时间：2013-01-09T19:54:12.987
> 
> 标签：php, wordpress, youtube, embed

在 WordPress 中，我使用的是与我一直拥有的相同的 YouTube 嵌入代码，但现在它正在返回并且未定义偏移量的错误：1 - 我注意到它在代码中也适用的行。

```
function embed_youtube_video($post_id) {
    $share_url = get_field('share_url');
    preg_match('/youtu\.be\/(.+)$/', $share_url, $matches);
    // the next line throws the error
    if( $matches[1]) { 
        return '<iframe width="640" height="360" src="http://www.youtube.com/embed/' . $matches[1] . '?rel=0&wmode=transparent" frameborder="0" allowfullscreen></iframe>';
    } else {
        return false;   
    }
} 
```

现在我不是 PHP 专家，并且从旧站点窃取了这段代码，所以我可能做了一些超级容易修复的事情，只是没有发现它。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:56:50.833

您收到错误是因为没有匹配项，因此`$matches[1]`不存在。

要保持代码流相同，请将行更改为：

```
if(isset($matches[1])) { 
```

我应该提到，[`isset()`](http://us2.php.net/isset)检查是否定义了变量。在这种情况下，我们检查以确保`$matches[1]`已定义。它完成与现有行相同的任务而不会引发错误，因为`isset()`它不受未定义错误的影响，因为它的功能性质。

# javascript - 使用 Javascript 预填充日期输入字段

> ID：14245339
> 
> 赞同：25
> 
> 时间：2013-01-09T19:54:15.607
> 
> 标签：javascript, html, date, input

我正在尝试将日期预填充到 html“日期”输入字段中，但它忽略了我尝试传递的值：

```
<html>
...
<input id='date' type='date'>
...
</html>

<script>
...
var myDate = new Date();
$("#date").val(myDate);
... 
```

我也尝试过将日期对象作为字符串传递

```
var myDate = new Date().toDateString();
$("#date").val(myDate); 
```

当我打开表格时，日期字段是空白的。如果我消除 type="date" 标记，则该值显示为字符串，但我无法访问日期选择器。如何预填充日期输入并仍然使用日期选择器？我难住了。

谢谢。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-09T21:01:52.187

它必须设置为 ISO 格式。

```
(function () {
    var date = new Date().toISOString().substring(0, 10),
        field = document.querySelector('#date');
    field.value = date;
    console.log(field.value);

})() 
```

[http://jsfiddle.net/GZ46K/](http://jsfiddle.net/GZ46K/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-11-15T15:56:37.377

## 为什么不使用 toISOString()

该`<input type='date'>`字段采用 ISO8601 格式的值（[参考](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/date)），但您不应使用该`Date.prototype.toISOString()`函数作为其值，因为在输出 ISO8601 字符串之前，它**会将**/ 表示日期/时间转换为 UTC 标准时间（阅读：*更改时区*） （[参考](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)）。除非你碰巧在工作或想要那个时间标准，否则你会引入一个错误，你的日期有时会但不总是会改变。

## 从不更改时区的日期对象填充 HTML5 日期输入

`<input type='date'>`在不弄乱我见过的时区的情况下获得正确输入值的唯一可靠方法是手动使用日期组件获取器：

```
let d = new Date();
let datestring = d.getFullYear().toString() + '-' + (d.getMonth()+1).toString().padStart(2, '0') + '-' + d.getDate().toString().padStart(2, '0');
document.getElementById('date').value = datestring;

/* Or if you want to use jQuery...
$('#date').val(datestring);
*/
```

```
<input id='date' type='date'>
```

## 从不更改时区的日期对象填充 HTML5 日期和时间字段

这超出了原始问题的范围，但对于任何想要从 Date 对象填充日期和时间 HTML5 输入字段的人来说，这就是我想出的：

```
// Returns a 2-member array with date & time strings that can be provided to an
// HTML5 input form field of type date & time respectively. Format will be
// ['2020-12-15', '01:27:36'].
function getHTML5DateTimeStringsFromDate(d) {

  // Date string
  let ds = d.getFullYear().toString() + '-' + (d.getMonth()+1).toString().padStart(2, '0') + '-' + d.getDate().toString().padStart(2, '0');

  // Time string
  let ts = d.getHours().toString().padStart(2, '0') + ':' + d.getMinutes().toString().padStart(2, '0') + ':' + d.getSeconds().toString().padStart(2, '0');

  // Return them in array
  return [ds, ts];
}

// Date object
let d = new Date();

// Get HTML5-ready value strings
let dstrings = getHTML5DateTimeStringsFromDate(d);

// Populate date & time field values
document.getElementById('date').value = dstrings[0]
document.getElementById('time').value = dstrings[1]

/* Or if you want to use jQuery...
$('#date').val(dstrings[0]);
$('#time').val(dstrings[1]);
*/
```

```
<input type='date' id='date'>
<input type='time' id='time' step="1">
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-09T21:16:20.567

谢谢j08691。该链接就是答案。

对于像我一样苦苦挣扎的其他人，当他们说输入是“yyyy-mm-dd”时，就意味着它！

您必须有 4 位数的年份。你必须有一个破折号，没有空格。您必须有 2 位数的日期和月份。

在我的示例中，myDate.getMonth 一月只会返回“1”（实际上它返回“0”，因为出于某种原因，javascript 从 0 到 11 计算月份）。为了做到这一点，我必须执行以下操作：

```
var myDate, day, month, year, date;
myDate = new Date();
day = myDate.getDate();
if (day <10)
  day = "0" + day;
month = myDate.getMonth() + 1;
if (month < 10)
  month = "0" + month;
year = myDate.getYear();
date = year + "-" + month + "-" + day;
$("#date").val(date); 
```

我希望这可以帮助其他人不要像我在 10 月之前或本月 10 日之前所做的测试那样浪费时间！哈哈

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-15T01:05:02.473

这是基于[Robin Drexlers](https://stackoverflow.com/a/14246394/2570775)但在当地时间的答案。

```
//Get the local date in ISO format
var date = new Date();
date.setMinutes(date.getMinutes() - date.getTimezoneOffset());
var datestr = date.toISOString().substring(0, 10);

//Set the field value
var field = document.querySelector('#date');
field.value = datestr; 
```

如果它是您正在修改的日期时间字段（而不仅仅是日期），请不要忘记添加时间`T00:00`，或将子字符串更改为 16 个字符，例如：

```
//Get the local date and time in ISO format
var date = new Date();
date.setMinutes(date.getMinutes() - date.getTimezoneOffset());
var datestr = date.toISOString().substring(0, 16);

//Set the field value
var field = document.querySelector('#datetime');
field.value = datestr; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-28T04:52:16.790

下面的代码填充本地日期。接受的答案填充 UTC 日期。

```
 var date = new Date();
  field = document.querySelector('#date-id');
  var day = date.getDate();
  if(day<10){ day="0"+day;}

  var month = date.getMonth()+1;
  if(month<10){ month="0"+month;}

  field.value = date.getFullYear()+"-"+month+"-"+day; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-07T20:21:55.530

我没有声誉点来评论另一个答案，所以我只会添加一个新答案。而且由于我要添加答案，因此我将提供比评论更多的详细信息。

有一种比每个人都在这里做的杂耍更简单的方法来归零。

```
var date = new Date();

var month = ('0' + (date.getMonth() + 1)).slice(-2);
var day   = ('0' + date.getDate()).slice(-2);
var year  = date.getFullYear();

var htmlDate = year + '-' + month + '-' + day;

console.log("Date: " + htmlDate); 
```

今天，输出将是

```
Date: 2020-01-07 
```

该代码通过在前面加上一个带引号的零来构建一个动态字符串，然后使用 slice(-2) 获取最后 2 个字符。这样，如果 0 变成 01，最后 2 就是 01。如果 0 变成 011，那么最后 2 就是 11。

至于从零开始的月份，您还可以在添加零之前动态添加 1，一切仍然有效。您只需在将其转换为字符串之前进行数学运算。

作为旁注，我注意到当您更新日期字段时，您必须在设置值之前隐藏该字段并在设置后显示它。我这样做的次数不够多，所以每次需要处理时我都必须重新挣扎。希望这将有助于未来的人。

*向未来的人挥手*

# php - iconv 在 CentOS 上不转换波斯尼亚文字，但在 Windows 上工作

> ID：14245341
> 
> 赞同：1
> 
> 时间：2013-01-09T19:54:26.127
> 
> 标签：php, centos, glibc, iconv, libiconv

CentOS 案例：

当`http://urloment.com/`我发布以下代码片段时：

```
"ćććć" 
```

我会得到一个输出：`Ä`

像这样：**[http ://urloment.com/TG5vg1eC](http://urloment.com/TG5vg1eC)**

但是，当我在 Windows 上尝试相同的操作时，它会将完整值存储在我的数据库表中：`"ćććć"`.

在我已`iconv`启用的本地 Windows XAMPP 安装中，它使用：`libiconv`. 在我的远程 CentOS 服务器上 iconv 使用：`glibc library`.

* * *

**我已经对此进行了调查，所以我仍然不确定：CentOS 上的这个 iconv 问题是由“glibc”引起的吗？**

# c# - 事件日志写入权限

> ID：14245345
> 
> 赞同：31
> 
> 时间：2013-01-09T19:54:46.667
> 
> 标签：c#, .net, service, windows-services, event-log

我的问题与对 Windows 事件日志的写入权限有关。我查看了有关此问题的几篇文章，并找到了一些解决问题的方法，但是对于我当前的情况，这些方法都不可接受。

我在 .NET 4.0 中使用 C#。我使用 EventLog 类： [EventLog 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.aspx)

简而言之，我需要查看是否有一种方法可以模拟或使用经过身份验证的用户和密码进行身份验证，以达到我需要写入事件日志的权限。该服务器将始终属于 Windows Server 系列，但版本可能会有所不同。

我的应用程序是使用以下帐户之一运行的 Windows 服务：

*   网络服务
*   本地服务
*   本地系统
*   具有受限权限的用户（用户或域用户组）

以下是我的其他一些标准：

*   我不能将服务用户设置为管理员，甚至服务器上的本地管理员也不能
*   **我无法编辑或更改注册表**
*   我无法更改服务器上的 UAC 或任何组策略
*   我有一个具有管理员权限的用户，但**它不能用于运行服务**
*   事件日志将始终是本地事件日志，而不是远程计算机上
*   日志可能永远是“应用程序”日志
*   **来源可能不同**，这似乎是问题的核心

我的问题是：**这有可能吗？**

我可以在我的代码中模拟用户来实现我需要的吗？我在连接到 Web 服务、登录到 smtp 服务器以及当然会登录到数据库等时这样做。

我偶然发现了这个类： [EventLogPermission Class](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlogpermission.aspx)

但我似乎无法对如何使用该类有一个好的概念。

我希望我已经很好地表达了我的问题。由于我的标准，我不认为这是另一个帖子的副本。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-10T06:26:30.957

默认情况下，任何经过身份验证的用户都可以写入应用程序事件日志。但是，只有管理员可以创建新的事件源。如果在服务安装时所有事件源都已知，我建议提前注册这些源，那么您将全部设置好。[注册是对EventLog.CreateEventSource](http://msdn.microsoft.com/en-us/library/5zbwd3s3.aspx)的简单调用。

如果您需要更多的事件源灵活性，您可以自定义权限。可以通过调整注册表项来自定义这些默认值：

```
 HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Eventlog\Application\CustomSD 
```

此[知识库文章](http://support.microsoft.com/kb/2028427)中描述的过程。一个`wevtutil`工具是 OS 的一部分，可在 Server 2008 及更高版本上使用，它比通过 regedit 更容易一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T20:27:05.263

答案显示为“否”。

我意识到没有按照我要求的方式解决这个问题的好方法。必须完成一项手动工作。

因此，我为这种情况选择的解决方案是，无法以管理员身份运行服务或进行手动注册表编辑的客户无法使用有关记录到事件日志的功能。我将使从配置中启用和禁用日志记录成为可能。

管理员用户和注册表编辑对我来说是已知的方式，但正如我所说的那样，我试图避免。但这一次，按照我的标准，这似乎是不可能的。

# java - Glassfish 3.12 的 Java Jersey SSL 客户端

> ID：14245346
> 
> 赞同：1
> 
> 时间：2013-01-09T19:54:47.903
> 
> 标签：java, ssl, glassfish, certificate, jersey

我编写了一个 Jersey REST Web 服务，部署在 Glassfish 上并使用 CLIENT-CERT 领域进行保护。现在我想从部署在同一个 Glassfish 服务器（或可能另一个服务器）上的应用程序调用它。

我可以从一个独立的 Java 类通过 SSL 成功调用该服务。但是，当我从部署在同一服务器上的代码中调用它时，我得到一个空证书链错误，即当服务器请求时客户端不提供证书。

`javax.net.ssl.SSLHandshakeException: null cert chain`

如果我通过设置将 Glassfish 密钥库和信任库与独立类一起使用

```
-Djavax.net.ssl.trustStore="C:\glassfish3\glassfish\domains\domain1\config\cacerts.jks"
-Djavax.net.ssl.trustStorePassword=changeit 
-Djavax.net.ssl.keyStore="C:\glassfish3\glassfish\domains\domain1\config\keystore.jks"
-Djavax.net.ssl.keyStorePassword=changeit 
```

那么它仍然有效，但不是来自 Glassfish 本身。

# r - r中的人口金字塔密度图

> ID：14245361
> 
> 赞同：13
> 
> 时间：2013-01-09T19:56:03.530
> 
> 标签：r, graph, plot, ggplot2

我想创建如下金字塔密度图：

![在此处输入图像描述](../Images/6b065d0b28ebad434b5563a4b4aa55bd.png)

我可以达到的点只是基于以下示例的简单金字塔图：

```
set.seed (123)
xvar <- round (rnorm (100, 54, 10), 0)
xyvar <- round (rnorm (100, 54, 10), 0)
myd <- data.frame (xvar, xyvar)
valut <- as.numeric (cut(c(myd$xvar,myd$xyvar), 12))
myd$xwt <- valut[1:100]
myd$xywt <- valut[101:200]
xy.pop <- data.frame (table (myd$xywt))
xx.pop <- data.frame (table (myd$xwt))

 library(plotrix)
 par(mar=pyramid.plot(xy.pop$Freq,xx.pop$Freq,
    main="Population Pyramid",lxcol="blue",rxcol= "pink",
  gap=0,show.values=F)) 
```

![在此处输入图像描述](../Images/05dad226835fd00bccfd30a01c983de8.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-10T00:42:23.807

# 网格包的一些乐趣

如果我们了解视口的概念，使用 grid 包的工作真的很简单。一旦我们得到它，我们可以做很多有趣的事情。例如，困难是绘制年龄的多边形。stickBoy 和stickGirl 只是为了搞笑，你可以跳过它。 ![在此处输入图像描述](../Images/474f873989f880d201e5eb12bd1e9d9a.png)

```
set.seed (123)
xvar <- round (rnorm (100, 54, 10), 0)
xyvar <- round (rnorm (100, 54, 10), 0)
myd <- data.frame (xvar, xyvar)
valut <- as.numeric (cut(c(myd$xvar,myd$xyvar), 12))
myd$xwt <- valut[1:100]
myd$xywt <- valut[101:200]
xy.pop <- data.frame (table (myd$xywt))
xx.pop <- data.frame (table (myd$xwt))

stickBoy <- function() {
  grid.circle(x=.5, y=.8, r=.1, gp=gpar(fill="red"))
  grid.lines(c(.5,.5), c(.7,.2)) # vertical line for body
  grid.lines(c(.5,.6), c(.6,.7)) # right arm
  grid.lines(c(.5,.4), c(.6,.7)) # left arm
  grid.lines(c(.5,.65), c(.2,0)) # right leg
  grid.lines(c(.5,.35), c(.2,0)) # left leg
  grid.lines(c(.5,.5), c(.7,.2)) # vertical line for body
  grid.text(x=.5,y=-0.3,label ='Male',
            gp =gpar(col='white',fontface=2,fontsize=32)) # vertical line for body
}

stickGirl <- function() {
  grid.circle(x=.5, y=.8, r=.1, gp=gpar(fill="blue"))
  grid.lines(c(.5,.5), c(.7,.2)) # vertical line for body
  grid.lines(c(.5,.6), c(.6,.7)) # right arm
  grid.lines(c(.5,.4), c(.6,.7)) # left arm
  grid.lines(c(.5,.65), c(.2,0)) # right leg
  grid.lines(c(.5,.35), c(.2,0)) # left leg
  grid.lines(c(.35,.65), c(0,0)) # horizontal  line for body
  grid.text(x=.5,y=-0.3,label ='Female',
            gp =gpar(col='white',fontface=2,fontsize=32)) # vertical line for body
}

xscale <- c(0, max(c(xx.pop$Freq,xy.pop$Freq)))* 5
levels <- nlevels(xy.pop$Var1)
barYscale<- xy.pop$Var1
vp <- plotViewport(c(5, 4, 4, 1),
                   yscale = range(0:levels)*1.05,
                   xscale =xscale)

pushViewport(vp)

grid.yaxis(at=c(1:levels))
pushViewport(viewport(width = unit(0.5, "npc"),just='right', 
                      xscale =rev(xscale)))
grid.xaxis()
popViewport()

pushViewport(viewport(width = unit(0.5, "npc"),just='left',
                      xscale = xscale))
grid.xaxis()
popViewport()

grid.grill(gp=gpar(fill=NA,col='white',lwd=3),
           h = unit(seq(0,levels), "native"))
grid.rect(gp=gpar(fill=rgb(0,0.2,1,0.5)),
          width = unit(0.5, "npc"),just='right')

grid.rect(gp=gpar(fill=rgb(1,0.2,0.3,0.5)),
          width = unit(0.5, "npc"),just=c('left'))

vv.xy <- xy.pop$Freq
vv.xx <- c(xx.pop$Freq,0)

grid.polygon(x  = unit.c(unit(0.5,'npc')-unit(vv.xy,'native'),
                         unit(0.5,'npc')+unit(rev(vv.xx),'native')),
             y  = unit.c(unit(1:levels,'native'),
                         unit(rev(1:levels),'native')),
             gp=gpar(fill=rgb(1,1,1,0.8),col='white'))

grid.grill(gp=gpar(fill=NA,col='white',lwd=3,alpha=0.8),
           h = unit(seq(0,levels), "native"))
popViewport()

## some fun here 
vp1 <- viewport(x=0.2, y=0.75, width=0.2, height=0.2,gp=gpar(lwd=2,col='white'),angle=30)
pushViewport(vp1)
stickBoy()
popViewport()
vp1 <- viewport(x=0.9, y=0.75, width=0.2, height=0.2,,gp=gpar(lwd=2,col='white'),angle=330)
pushViewport(vp1)
stickGirl()
popViewport() 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-10T09:12:22.983

另一个使用`base`图形的相对简单的解决方案（和`scales`使用 alpha 的包）：

```
library(scales)
xy.poly <- data.frame(Freq=c(xy.pop$Freq, rep(0,nrow(xy.pop))), 
                      Var1=c(xy.pop$Var1, rev(xy.pop$Var1)))
xx.poly <- data.frame(Freq=c(xx.pop$Freq, rep(0,nrow(xx.pop))), 
                      Var1=c(xx.pop$Var1, rev(xx.pop$Var1)))
xrange <- range(c(xy.poly$Freq, xx.poly$Freq))
yrange <- range(c(xy.poly$Var1, xx.poly$Var1))

par(mfcol=c(1,2))
par(mar=c(5,4,4,0))
plot(xy.poly,type="n", main="Men", xlab="", ylab="", xaxs="i", 
     xlim=rev(xrange), ylim=yrange, axes=FALSE)
rect(-1,0,100,100, col="blue")
abline(h=0:15, col="white", lty=3)
polygon(xy.poly, col=alpha("grey",0.6))
axis(1, at=seq(0,20,by=5))
axis(2, las=2)
box()

par(mar=c(5,0,4,4))
plot(xx.poly,type="n", main="Women", xaxs="i", xlab="", ylab="",
     xlim=xrange, ylim=yrange, axes=FALSE)
rect(-1,0,100,100, col="red")
abline(h=0:15, col="white", lty=3)
axis(1, at=seq(5,20,by=5))
axis(4, las=2)
polygon(xx.poly, col=alpha("grey",0.6))
box() 
```

![在此处输入图像描述](../Images/97fed4c2917d5f08ac02c61186c04b85.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-09T21:06:16.277

这是一个使用基数 R 的 stab，将大部分工作留给你让它看起来不错。您可以通过调用 用线条完成金字塔`lines()`，但如果您想要半透明填充，最好使用`polygon()`. 请注意，您的示例假设人口是在连续年龄组中估计的，而实际上数据是在 5 岁年龄组中进行的 - 我的示例将适当地限制 bin 结束。

```
# sorry for my lame fake data
TotalPop <- 2000
m <- table(sample(0:12, TotalPop*.52, replace = TRUE))
f <- table(sample(0:12, TotalPop*.48, replace = TRUE))

# scale to make it density
m <- m / TotalPop
f <- f / TotalPop
# find appropriate x limits
xlim <- max(abs(pretty(c(m,f), n = 20))) * c(-1,1)
# open empty plot
plot(NULL, type = "n", xlim = xlim, ylim = c(0,13))

# females
polygon(c(0,rep(f, each = 2), 0), c(rep(0:13, each = 2)))
# males (negative to be on left)
polygon(c(0,rep(-m, each = 2), 0), c(rep(0:13, each = 2))) 
```

![在此处输入图像描述](../Images/02822a32af5afa76e9bfb94d5bfd8c9b.png)

所以要完成这项工作，在背景上给多边形一些半透明的填充，并做手动轴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-26T08:53:44.903

这是一个使用的关闭解决方案`ggplot2`

```
# load libraries
  library(ggplot2)
  library(ggthemes)

# load dataset
  set.seed(1)
  df0 <- data.frame(Age = factor(rep(x = 1:10, times = 2)), 
                    Gender = rep(x = c("Female", "Male"), each = 10),
                    Population = sample(x = 1:100, size = 10))

# Plot !
  ggplot(data = df0, aes(x = Age, y = Population, group=Gender)) +
    geom_area(data = subset(df0, Gender=="Male"), mapping = aes(y = -Population), alpha=0.6) +
    geom_area(data = subset(df0, Gender=="Female"), alpha=0.6) +
    scale_y_continuous(labels = abs) +
    theme_minimal() +
    coord_flip() +
    annotate("text", x = 9.5, y = -70, size=10, color="gray20", label = "Male") +
    annotate("text", x = 9.5, y =  70, size=12, color="gray20", label = "Female") 
```

[![在此处输入图像描述](../Images/6624b627fb29b59eb43be9432e845949.png)](https://i.stack.imgur.com/fKqrm.jpg)

# windows - QTableView：如何将鼠标悬停在整行上？

> ID：14245365
> 
> 赞同：3
> 
> 时间：2013-01-09T19:56:09.807
> 
> 标签：windows, qt, hover, row, qtableview

我继承了 QTableView、QAbstractTableModel 和 QItemDelegate。我可以将鼠标悬停在单个单元格上：

```
void SchedulerDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
{
    ...

    if(option.showDecorationSelected &&(option.state & QStyle::State_Selected))
{
    QColor color(255,255,130,100);
    QColor colorEnd(255,255,50,150);
    QLinearGradient gradient(option.rect.topLeft(),option.rect.bottomRight());
    gradient.setColorAt(0,color);
    gradient.setColorAt(1,colorEnd);
    QBrush brush(gradient);
    painter->fillRect(option.rect,brush);
}

    ...
} 
```

...但我不知道如何悬停整行。有人可以帮我提供示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-16T13:52:58.263

有2种方法..

> 1）您可以使用委托来绘制行背景...
> 您需要将行设置为在委托中突出显示，并在此基础上进行突出显示。
> 
> 2) 捕捉当前行的信号。遍历该行中的项目并为每个项目设置背景。

你也可以尝试样式表：

```
QTableView::item:hover {
    background-color: #D3F1FC;
} 
```

希望对大家有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-16T07:09:13.950

这是我的实现，效果很好。首先你应该继承 QTableView/QTabWidget ，在 mouseMoveEvent/dragMoveEvent 函数中向 QStyledItemDelegate 发出一个信号。这个信号将发送悬停索引。

在 QStyledItemDelegate 中，使用成员变量 hover_row_（在绑定到上述信号的插槽中更改）告诉绘制函数哪一行被悬停。

这是代码示例：

```
//1: Tableview :
void TableView::mouseMoveEvent(QMouseEvent *event)
{
    QModelIndex index = indexAt(event->pos());
    emit hoverIndexChanged(index);
    ...
}
//2.connect signal and slot
    connect(this,SIGNAL(hoverIndexChanged(const QModelIndex&)),delegate_,SLOT(onHoverIndexChanged(const QModelIndex&)));

//3.onHoverIndexChanged
void TableViewDelegate::onHoverIndexChanged(const QModelIndex& index)
{
    hoverrow_ = index.row();
}

//4.in Delegate paint():
void TableViewDelegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
{
...
    if(index.row() == hoverrow_)
    {
        //HERE IS HOVER COLOR
        painter->fillRect(option.rect, kHoverItemBackgroundcColor);
    }
    else
    {
        painter->fillRect(option.rect, kItemBackgroundColor);
    }
...
} 
```

# ruby - 为什么这个用于文本替换的 Ruby 脚本不起作用？

> ID：14245370
> 
> 赞同：-1
> 
> 时间：2013-01-09T19:56:15.347
> 
> 标签：ruby, text-processing

我有一些我一直在使用的简单文本处理脚本，我想将这些脚本翻译成 Ruby，以熟悉该语言。

这是我无法运行的第一个脚本：

```
#!/usr/bin/env ruby

@text = ARGF.read

@replacements = [{:from=>"—", :to=>". "}, {:from=>"ﬄ", :to=>"ffl"}, {:from=>"ﬃ", :to=>"ffi"}, {:from=>"ﬁ", :to=>"fi"}, {:from=>"ﬂ", :to=>"fl"}, {:from=>"ﬀ", :to=>"ff"}, {:from=>"æ", :to=>"ae"}, {:from=>"é", :to=>"e"}, {:from=>"Ç", :to=>"s"}, {:from=>"ü", :to=>"u"}, {:from=>"â", :to=>"a"}, {:from=>"ä", :to=>"a"}, {:from=>"à", :to=>"a"}, {:from=>"å", :to=>"a"}, {:from=>"ç", :to=>"s"}, {:from=>"ê", :to=>"e"}, {:from=>"ë", :to=>"e"}, {:from=>"è", :to=>"e"}, {:from=>"ï", :to=>"i"}, {:from=>"î", :to=>"i"}, {:from=>"ì", :to=>"i"}, {:from=>"Ä", :to=>"a"}, {:from=>"Å", :to=>"a"}, {:from=>"É", :to=>"e"}, {:from=>"ô", :to=>"oh"}, {:from=>"ö", :to=>"oe"}, {:from=>"ò", :to=>"o"}, {:from=>"û", :to=>"uu"}, {:from=>"ù", :to=>"u"}, {:from=>"ÿ", :to=>"o"}, {:from=>"Ö", :to=>"o"}, {:from=>"Ü", :to=>"u"}, {:from=>"á", :to=>"ah"}, {:from=>"í", :to=>"ee"}, {:from=>"ó", :to=>"oh"}, {:from=>"ú", :to=>"uu"}, {:from=>"ñ", :to=>"ny"}, {:from=>"Ñ", :to=>"ny"}] 

@replacements.each do |pair|
  @text.gsub!(/#{pair[:from]}/, pair[:to])
end

puts @text 
```

这是我得到的错误：

```
/home/alec/.bei/under-boac:5: invalid multibyte char (US-ASCII)
/home/alec/.bei/under-boac:5: invalid multibyte char (US-ASCII)
/home/alec/.bei/under-boac:5: syntax error, unexpected $end, expecting '}'
@replacements = [{:from=>"—", :to=>". "}, {:from=>"ﬄ"...
                            ^ 
```

我的部分内容基于“ [Ruby 中 STDIN 的最佳实践？](https://stackoverflow.com/questions/273262/best-practices-with-stdin-in-ruby) ”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:34:55.810

这是您的基本代码，已重新格式化以提高可读性：

```
@replacements = [
  { :from => "—", :to => ". "  },
  { :from => "ﬄ", :to => "ffl" },
  { :from => "ﬃ", :to => "ffi" },
  { :from => "ﬁ", :to => "fi"  },
  { :from => "ﬂ", :to => "fl"  },
  { :from => "ﬀ", :to => "ff"  },
  { :from => "æ", :to => "ae"  },
  { :from => "é", :to => "e"   },
  { :from => "Ç", :to => "s"   },
  { :from => "ü", :to => "u"   },
  { :from => "â", :to => "a"   },
  { :from => "ä", :to => "a"   },
  { :from => "à", :to => "a"   },
  { :from => "å", :to => "a"   },
  { :from => "ç", :to => "s"   },
  { :from => "ê", :to => "e"   },
  { :from => "ë", :to => "e"   },
  { :from => "è", :to => "e"   },
  { :from => "ï", :to => "i"   },
  { :from => "î", :to => "i"   },
  { :from => "ì", :to => "i"   },
  { :from => "Ä", :to => "a"   },
  { :from => "Å", :to => "a"   },
  { :from => "É", :to => "e"   },
  { :from => "ô", :to => "oh"  },
  { :from => "ö", :to => "oe"  },
  { :from => "ò", :to => "o"   },
  { :from => "û", :to => "uu"  },
  { :from => "ù", :to => "u"   },
  { :from => "ÿ", :to => "o"   },
  { :from => "Ö", :to => "o"   },
  { :from => "Ü", :to => "u"   },
  { :from => "á", :to => "ah"  },
  { :from => "í", :to => "ee"  },
  { :from => "ó", :to => "oh"  },
  { :from => "ú", :to => "uu"  },
  { :from => "ñ", :to => "ny"  },
  { :from => "Ñ", :to => "ny"  }
] 

@replacements.each do |pair|
  @text.gsub!( /#{ pair[:from] }/, pair[:to] )
end 
```

这可以简化，哈希组合成一个大的，顺便说一句，应该使用作为哈希：

```
# encoding: utf-8

@replacements = {
  "—" => ". "  ,
  "ﬄ" => "ffl" ,
  "ﬃ" => "ffi" ,
  "ﬁ" => "fi"  ,
  "ﬂ" => "fl"  ,
  "ﬀ" => "ff"  ,
  "æ" => "ae"  ,
  "é" => "e"   ,
  "Ç" => "s"   ,
  "ü" => "u"   ,
  "â" => "a"   ,
  "ä" => "a"   ,
  "à" => "a"   ,
  "å" => "a"   ,
  "ç" => "s"   ,
  "ê" => "e"   ,
  "ë" => "e"   ,
  "è" => "e"   ,
  "ï" => "i"   ,
  "î" => "i"   ,
  "ì" => "i"   ,
  "Ä" => "a"   ,
  "Å" => "a"   ,
  "É" => "e"   ,
  "ô" => "oh"  ,
  "ö" => "oe"  ,
  "ò" => "o"   ,
  "û" => "uu"  ,
  "ù" => "u"   ,
  "ÿ" => "o"   ,
  "Ö" => "o"   ,
  "Ü" => "u"   ,
  "á" => "ah"  ,
  "í" => "ee"  ,
  "ó" => "oh"  ,
  "ú" => "uu"  ,
  "ñ" => "ny"  ,
  "Ñ" => "ny"  
}
@replacements.each do |k,v|
  @text.gsub!(k, v)
end 
```

注意：使用“编码注释”来帮助 Ruby 理解字符的编码。

但是使用相同的哈希，该循环可以减少到这个，它运行得非常快：

```
@text.gsub!(Regexp.union(@replacements.keys), @replacements) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T20:17:13.460

如果您在源文件中使用非 7 位 ASCII，则需要添加标头来标识使用的字符集。例子：

```
#!/usr/bin/env ruby
# encoding: utf-8 
```

此外，您在这里做的事情效率极低，如果您构造正确的正则表达式，当您可以在 O(1) 中执行此操作时，需要对文件进行 O(N) 传递：

```
replace_map = Hash[@replacements.collect { |r| [ r[:from], r[:to] ] }]
replace_regex = Regexp.new("(#{replace_map.keys.collect { |r| Regexp.escape(r) }.join('|')})")

@text.gsub!(replace_regexp) do |s|
  replace_map[s[1]]
end 
```

`:from`使用键/值映射而不是那里的奇怪/`:to`配对会容易得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T20:26:55.703

```
#encoding: utf-8

@text = "öbñ"
@replacements = [{:from=>"—", :to=>". "}, {:from=>"ﬄ", :to=>"ffl"}, {:from=>"ﬃ", :to=>"ffi"}, {:from=>"ﬁ", :to=>"fi"}, {:from=>"ﬂ", :to=>"fl"}, {:from=>"ﬀ", :to=>"ff"}, {:from=>"æ", :to=>"ae"}, {:from=>"é", :to=>"e"}, {:from=>"Ç", :to=>"s"}, {:from=>"ü", :to=>"u"}, {:from=>"â", :to=>"a"}, {:from=>"ä", :to=>"a"}, {:from=>"à", :to=>"a"}, {:from=>"å", :to=>"a"}, {:from=>"ç", :to=>"s"}, {:from=>"ê", :to=>"e"}, {:from=>"ë", :to=>"e"}, {:from=>"è", :to=>"e"}, {:from=>"ï", :to=>"i"}, {:from=>"î", :to=>"i"}, {:from=>"ì", :to=>"i"}, {:from=>"Ä", :to=>"a"}, {:from=>"Å", :to=>"a"}, {:from=>"É", :to=>"e"}, {:from=>"ô", :to=>"oh"}, {:from=>"ö", :to=>"oe"}, {:from=>"ò", :to=>"o"}, {:from=>"û", :to=>"uu"}, {:from=>"ù", :to=>"u"}, {:from=>"ÿ", :to=>"o"}, {:from=>"Ö", :to=>"o"}, {:from=>"Ü", :to=>"u"}, {:from=>"á", :to=>"ah"}, {:from=>"í", :to=>"ee"}, {:from=>"ó", :to=>"oh"}, {:from=>"ú", :to=>"uu"}, {:from=>"ñ", :to=>"ny"}, {:from=>"Ñ", :to=>"ny"}] 

# Hammer the @replacements into one Hash like {"—"=>". ", "ﬄ"=>"ffl"}:
from_to = Hash[@replacements.map{|h| h.values}]
# Generate one Regular expression to catch all keys:
re = Regexp.union(from_to.keys)
# Let gsub do the work in one pass:
@text.gsub!(re, from_to) 
```

这与@tadman 的代码大致相同。`#encoding: utf-8`应该可以解决您的问题；其余的行阻止扫描文本 38 次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-09T16:24:15.167

你甚至可以简化：

```
@replacements=Hash[*%w[— .  ﬄ ffl ﬃ ffi ﬁ fi ﬂ fl ﬀ ff æ ae é e Ç s ü u â a ä a à a å a ç s ê e ë e è e ï i î i ì i Ä a Å a É e ô oh ö oe ò o û uu ù u ÿ o Ö o Ü u á ah í ee ó oh ú uu ñ ny Ñ ny]] 
```

# google-apps-script - 如何知道哪个元素调用了回调函数？

> ID：14245374
> 
> 赞同：0
> 
> 时间：2013-01-09T19:56:32.587
> 
> 标签：google-apps-script

我有一个在表格中创建按钮的脚本。每个按钮都分配给相同的回调服务器函数。我的问题是我怎么知道这些按钮中的哪些触发了服务器调用？

还有一种从服务器脚本输出 msgbox 的方法吗？当我尝试 browser.msgBox 时，它给出了一个错误，说 msgbox 不能在这种情况下使用。

```
var clientDel = app.createServerHandler("delStudent").addCallbackElement(grid);
table.setWidget(t, 4, app.createButton("Delete", clientDel).setId("del1"));

function delStudent(e){
  var app = UiApp.getActiveApplication();
  e.
  return app;
} 
```

谢谢，C辛格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:11:27.640

1.  只会`e.parameter.source`返回发起处理函数的小部件的 ID
2.  您可以使用在 UI 中创建并设置为不可见的标签或文本框。然后，您可以随时使用`getElementById(label_ID').setVisible(true)`并将任何文本放入其中。

如果您希望它出现在所有其他小部件上方的特定位置，您可以非常简单地使用`setStyleAttributes`，请参阅[此其他帖子](https://stackoverflow.com/questions/13692563/how-to-move-a-popup-window-from-a-client-handler)（服务器版本）以获取更多信息和实际示例

# python - Python virtualenv --system-site-packages iPython

> ID：14245376
> 
> 赞同：2
> 
> 时间：2013-01-09T19:56:37.140
> 
> 标签：python, virtualenv, ipython

我在 OS X 上使用 EPD 并安装了 ipython。在我的“一般”环境中，一切都按预期运行。我安装了 virtualenv 和 virtualenvwrapper 来生成一个开发环境。我只想安装一小部分“新”模块（不同版本），所以我使用了：

`mkvirtualenv development --python=epd --system-site-packages`

现在我想做的是将 ipython 本地安装到虚拟环境。我相信这是首选的安装方法，因为其他技术包括向 ipython 启动添加代码。

which pip & which python 报告正在调用虚拟环境文件。我无法安装 ipyhton，因为它已经存在于我的 epd 安装中。

是否可以创建一个使用“通用”站点包的 virtualenv，然后在本地安装 ipython？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T21:07:18.367

当然，只需告诉 pip 忽略已安装的 IPython：

```
pip install --ignore-installed ipython 
```

# iphone - 是否可以在没有插件的情况下从 Mobile Safari 向专有服务（即不是 PSTN）发起语音呼叫？

> ID：14245377
> 
> 赞同：0
> 
> 时间：2013-01-09T19:56:39.730
> 
> 标签：iphone, mobile-safari, telephony, twilio, webrtc

我们假设答案是否定的。但是，所有 SO 问题要么过时，要么基于桌面浏览器。

我们知道 WebRTC，但现在 Mobile Safari 不支持它。还有其他方法吗？

为了澄清这个场景，假设我们有一个像 Skype 这样的服务。我们不要求双方都拥有该应用程序，而是希望一方使用移动浏览器进行电话通话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:14:57.647

你不能。不是没有插件。如果您想从浏览器向任何其他客户端发出呼叫，则必须使用 WebRTC 以获得完全支持（媒体传输 + 媒体设备访问），或者您必须使用插件来访问媒体设备并进行传输（例如 Flash） .

由于 Mobile Safari 仍然没有 WebRTC ......

# c++ - 带有 VARIANT / bstrVal 代码的 C++ 泄漏

> ID：14245378
> 
> 赞同：6
> 
> 时间：2013-01-09T19:56:39.930
> 
> 标签：c++, com, memory-leaks, variant, bstr

泄漏检查器告诉我，在以下代码中分配的内存存在内存泄漏：

```
// Get the value from the object as a variant.
VARIANT vVal;
VariantInit ( &vVal );
hres = clsObj->Get ( fieldName.c_str(), 0, &vVal, 0, 0 );
if ( FAILED ( hres ) )
{
    (... various cleanup / throw stuff ...)
}

// And get it as a wstring.
wstring val ( vVal.bstrVal );

(... do some standard, non-memory leaking stuff with the wstring ...)    

// Clean up.
VariantClear ( &vVal ); 
```

里面的“clsObj”是一个IWbemClassObject，它是一个微软的WMI 接口。

分配泄漏内存的特定行是“clsObj->Get”行。然后泄漏检查器报告泄漏本身的更具体的代码（即在分配泄漏内存时在堆栈跟踪中进一步），我没有源代码：

```
(ole32): (filename not available): CoRevokeMallocSpy    
(OLEAUT32): (filename not available): GetErrorInfo  
(OLEAUT32): (filename not available): SysAllocStringLen 
(OLEAUT32): (filename not available): SysAllocString    
(wbemcomn): (filename not available): CVar::SetBSTR 
(wbemcomn): (filename not available): CVar::FillVariant 
(fastprox): (filename not available): CWbemObject::Get 
```

因此，VARIANT vVal 中的底层 BSTR 似乎正在泄漏。但我正在做 VariantClear ......我还需要做其他事情吗？

也许我在 wstring 构造函数中泄漏了它？但如果是这样，我不明白。我认为 bstrVal 本质上只是归结为一个 char 指针（或 wchar 或其他）；wstring 构造函数应该只是从该地址复制，就好像它是任何其他指针一样，对吗？

这不像 wstring 构造函数负责清理最初由 vVal.bstrVal 指向的内存，就好像它正在对某个引用计数的 COM 对象执行 Detach() 一样，是吗？

万一这很重要，这是在 Visual C++ 6 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T05:32:53.753

可能没有泄漏！请参阅[Microsoft 的 Larry Osterman 关于该主题的这篇文章，](http://blogs.msdn.com/b/larryosterman/archive/2004/09/28/235304.aspx)其中描述了与您所看到的内容类似的内容：

> 我发现了一堆漏洞，并修复了它们，但是每次我们分配一个 BSTR 对象时，我都无法弄清楚的一个漏洞出现了。[...]
> 
> 基本上，OLE 缓存在一个进程中分配的所有 BSTR 对象，以允许它汇集字符串。结果，这些字符串被“故意”有效地泄露了。[...]
> 
> 幸运的是，有一种方法可以禁用 BSTR 缓存，只需在启动应用程序之前将 OANOCACHE 环境变量设置为 1。如果您的应用程序是服务，那么您需要将 OANOCACHE 设置为系统环境变量（环境变量的底部集）并重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:18:21.393

A`BSTR`是两个数据元素。它`int`具有基本字符串长度的计数，以及基本字符串的长度。因此，即使您有一个 emtpy `BSTR`holding ，您也必须在为其分配新值`""`之前正确清空它。`BSTR`否则，即使您释放了“字符串”部分，也会泄露`int`数据成员。

我怀疑您正在泄漏 fieldname.c_str()。它可能`BSTR`正在堆栈上创建一个并且正在泄漏。

更改您的代码以执行此操作：

```
CComBSTR tempBSTR = fieldName.c_str();
hres = clsObj->Get ( tempBSTR, 0, &vVal, 0, 0 ); 
```

这至少可以让您确保它不是`BSTR`在您调用 Get() 时自动构建的泄漏。

顺便说一句，如果您必须使用`BSTR`，请考虑`CComBSTR`在其位置使用。它可以帮助防止基本的内存泄漏。

# codeigniter - Codeigniter：无法从数据库中获取查询字符串到数组中

> ID：14245388
> 
> 赞同：1
> 
> 时间：2013-01-09T19:57:08.413
> 
> 标签：codeigniter

我的目标是用一个数字代替查询字符串——我试图从数据库中取出查询字符串并将其插入到数组中，以便执行搜索。

该文件扩展文件位于 core/ 名为 MY_Input.php

```
class MY_Input extends CI_Input {

   function save_query($query_array) {

    $CI =& get_instance();

    $CI->db->insert('ci_query', array('query_string' => http_build_query($query_array)));

    return $CI->db->insert_id();
}

function load_query($query_id) {

    $CI =& get_instance();

    $rows = $CI->db->get_where('ci_query', array('id' => $query_id))->result();
    if (isset($rows[0])) {
        parse_str($rows[0]->query_string, $_GET);       
    }

}

} 
```

我正在从数据库中获取字符串并尝试将其加载到我的控制器页面中，如下所示：

```
this->input->load_query($query_id); 

    $query_array = array(
        'fan_type_options'=>$this->input->get('fan_type_options'),
        'fan_motor_type' => $this->input->get('fan_motor_type'),
        'fan_ac_voltage' => $this->input->get('fan_ac_voltage'),
        'fan_cfm' => $this->input->get('fan_cfm'),
        'part-no' => $this->input->get('part-no'),
    ); 
```

我当我转储数组时，它没有值，但第一个函数有效，我能够捕获如下所示的查询字符串：

```
fan_type_options=Blower&fan_motor_type=EC&fan_ac_voltage=&fan_cfm=&part-no= 
```

但我不知道如何调试第二个函数。谁能告诉我我做错了什么或者是否有办法调试该功能。

# c# - Asp.Net - 将处理卸载到外部应用程序

> ID：14245389
> 
> 赞同：6
> 
> 时间：2013-01-09T19:57:10.403
> 
> 标签：c#, asp.net, polling

我有一个使用 3rd 方 exe 处理请求的 asp.net 网站。目前我的工作流程是

1.  用户使用任何浏览器访问网站并填写包含工作详细信息的表格

2.  网站调用正在侦听端口的 WCF 自托管 Windows 服务

3.  Windows 服务启动 3rd 方 exe 来处理作业并将结果返回到网站

4.  网站将返回的结果展示给用户

上面的网站是一个原型，现在需要变成一个生产就绪的部署。我意识到上述架构有很多可能会破坏的点。例如，如果机器关闭或 Windows 服务崩溃并且不再侦听端口，则所有当前请求都将停止处理。为了使架构更加健壮，我正在考虑以下内容

1.  用户使用任何浏览器访问网站并填写包含工作详细信息的表格

2.  网站将工作详细信息写入数据库

3.  每 10 秒轮询一次数据库以获取新作业的 Windows 服务会选择该作业并使用第 3 方应用程序执行它。结果被写回数据库。

4.  现在已经开始轮询数据库的网站，获取结果并将其显示给用户。

第二种架构为我提供了更多的日志记录功能，如果它们在队列中，它们可以重新开始。然而，它涉及大量可能不可扩展的轮询。谁能推荐一个更好的架构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:09:15.110

我在我的一个应用程序中实现了相同的架构，其中用户发出多个请求来处理。所以我有 -

1.  用户访问网站并选择参数等。提交请求
2.  请求与所有详细信息 + 用户名等一起存储到数据库表中
3.  服务查看数据库表并以先进先出的方式获取请求
4.  处理完请求后，根据 requestId 将状态更新为 Failed 或 Completed 到数据库表中，网站上的用户可以看到
5.  如果有任何请求，服务将接收下一个请求，否则停止。
6.  服务每 30 分钟运行一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:52:14.147

我会选择 MSMQ 或[RabbitMQ](http://www.rabbitmq.com/)而不是轮询。

这样，您可以将处理任务卸载到队列的多个消费者（可能与 Web 服务器分开的服务器），并并行处理更多请求。

# php - 递归遍历对象

> ID：14245392
> 
> 赞同：4
> 
> 时间：2013-01-09T19:57:12.663
> 
> 标签：php, recursion

我在编写递归函数来遍历这个层次结构时遇到了麻烦

```
 object(stdClass)#290 (6) {
      ["category_id"]=>
      int(1)
      ["parent_id"]=>
      int(0)
      ["name"]=>
      string(4) "Root"
      ["position"]=>
      int(0)
      ["level"]=>
      int(0)
      ["children"]=>
      array(2) {
        [0]=>
        object(stdClass)#571 (7) {
          ["category_id"]=>
          int(2)
          ["parent_id"]=>
          int(1)
          ["name"]=>
          string(18) "Root MySite.com"
          ["is_active"]=>
          int(0)
          ["position"]=>
          int(0)
          ["level"]=>
          int(1)
          ["children"]=>
          array(11) {
            [0]=>
            object(stdClass)#570 (7) {
              ["category_id"]=>
              int(15)
              ["parent_id"]=>
              int(2)
              ["name"]=>
              string(9) "Widgets"
              ["is_active"]=>
              int(1)
              ["position"]=>
              int(68)
              ["level"]=>
              int(2)
              ["children"]=>
              array(19) {
                [0]=>
                object(stdClass)#566 (7) {
                  ["category_id"]=>
                  int(24)
                  ["parent_id"]=>
                  int(15)
                  ["name"]=>
                  string(16) "Blue widgets"
                  ["is_active"]=>
                  int(1)
                  ["position"]=>
                  int(68)
                  ["level"]=>
                  int(3)
                  ["children"]=>
                  array(0) {
                  }
                }

<snip....> 
```

正如你所看到的，这个嵌套集可以永远持续下去......

我想要返回的是这样的

```
$categories("Root" => array("Root MySite.com" => array("Widgets" => array("Blue Widgets",...)))) 
```

[编辑]：粘贴我的递归函数的起点，这将简单地“展平”一个数组或对象。我想我可以修改它以获取我正在寻找的数据结构，但无法完全正确。

```
 function array_flatten($array, $return) 
{

  // `foreach` can also iterate through object properties like this 
  foreach($array as $key => $value)
  {
    if(is_object($value))
    {
      // cast objects as an array
      $value = (array) $value;
    }
    if(is_array($value))
    {
      $return = array_flatten($value,$return);
    }
    else
    {
      if($value)
      {
        $return[] = $value;
      }
    }

  }
  return $return;
} 
```

问题是我不太清楚要递归地构建我正在寻找的结构，或者也许有更优雅的 php 方式来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T20:34:50.060

试试这个

```
function run($o) {
    $return = array();
    foreach ($o->children as $child) {
        $return[$child->name] = run($child);
    }

    return empty($return) ? null : $return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:26:38.487

我没有时间写一个有效的答案，但这里有一些伪代码（半 PHP，半 JS）

这将通过删除列表中每个元素的 children 属性来创建树的扁平化版本。

```
$flattened = array();

function addElement(&$flattened, $list) {
    for ($element in $list) {
        $children = $element->children;
        delete $element->children;
        $flattened[] = $element;
        if ($children) {
            addElements($flattened, $children)
        }
    }
}
addElements($flattened, $treeHierarchy); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-22T13:08:35.763

deep_order 对象或 assoc_array

```
namespace a_nsp
class object_utils{

   static function deep_order($IN, $desc = NULL) { // object or assoc_array
       $O = new \stdClass;
       $I = (array) $IN; 
       $keys = array_keys($I);
       $desc ? rsort($keys) : asort($keys);
       foreach ($keys as $k) {
           $v = $I[$k]; 
           //$v = json_decode($I[$k],1) ?: $I[$k]; // force conversion of json_string
           if (is_array($v) || is_object($v)) {
               $O->$k = self::deep_order($v, $desc);
           }
           else {
               $O->$k=$v;
           }
       }
    return $O; // object
    } 

} 
```

使用喜欢

`$ordered_obj = \a_nsp\object_utils::deep_order($orig_obj)`

# python - 使用 WHERE ___ IN ___ 语句

> ID：14245396
> 
> 赞同：3
> 
> 时间：2013-01-09T19:57:36.183
> 
> 标签：python, sql, sqlite

我试图弄清楚如何正确使用 WHERE **_ IN _**语句

定义：

```
c.execute('''CREATE TABLE IF NOT EXISTS tab (
    _id integer PRIMARY KEY AUTOINCREMENT,
    obj text NOT NULL
    ) ;''') 
```

我正在尝试做这样的事情：

```
list_of_vars=['foo','bar']
statement="SELECT * FROM tab WHERE obj IN (?)"
c.execute(statement,"'"+"','".join(list_of_vars)+"'") 
```

或者，我也试过这个，它直接评估为上述

```
statement="SELECT * FROM tab WHERE obj IN (?)"
c.execute(statement,"'foo','bar'") 
```

我得到的错误是：

```
sqlite3.ProgrammingError: Incorrect number of bindings supplied. The current statement uses 1, and there are 9 supplied 
```

这给了我一个错误。当我这样做时，它可以工作，但不建议这样做，因为它容易受到 SQL 注入攻击。

```
statement="SELECT * FROM tab WHERE obj IN ("+"'"+"','".join(statement)+"'"+") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T19:59:21.657

您需要创建足够的参数来匹配您的变量列表：

```
statement = "SELECT * FROM tab WHERE obj IN ({0})".format(', '.join(['?'] * len(list_of_vars)))
c.execute(statement, list_of_vars) 
```

请注意，您`list_of_vars`作为参数值列表传入。使用`', '.join()`我们生成一个`?`用逗号分隔的字符串，然后将`.format()`其插入到语句中。

For a long list of variables, it may be more efficient to use a temporary table to hold those values, then use a `JOIN` against the temporary table rather than an `IN` clause with bind parameters.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-19T07:11:39.207

FYI, pymysql with MySQL user.

```
query ="SELECT * FROM tab WHERE obj IN %s"
cursor.execute(query, (['foo','bar'],))

same as

cursor.execute(query, (list_of_var,)) 
```

I'm not sure about sqlite3, this may work,

```
query ="SELECT * FROM tab WHERE obj IN ?"
cursor.execute(query, (['foo','bar'],)) 
or
cursor.execute(query, (list_of_vars,)) 
```

# android - 由于错误 2，GooglePlayServices 不可用

> ID：14245397
> 
> 赞同：6
> 
> 时间：2013-01-09T19:57:38.920
> 
> 标签：android, google-api, google-drive-api, google-play-services

我正在尝试在我的 android 应用程序中使用 Google Drive。现在我只是想在谷歌驱动器上显示文件名。我使用本教程[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android) 在我的应用程序中设置谷歌驱动器帐户，以及此[https://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)检索文件列表。

为此，我必须创建一个异步任务：

```
private class getCloudContentTask extends AsyncTask<Void, Void, Void> {

    protected void onPostExecute() {
        updateList();
    }

    @Override
    protected Void doInBackground(Void... arg0) {
        cloudFiles = getCloudContent();
        return null;
    }
} 
```

getCloudContent 基本上是教程中的retrieveAllFiles 函数。

但是，我总是收到一些警告和错误，并且文件不会显示。

```
01-09 19:39:31.347: W/dalvikvm(27926): VFY: unable to resolve static field 1488 (common_google_play_services_unknown_issue) in Lcom/google/android/gms/R$string;
01-09 19:39:31.347: D/dalvikvm(27926): VFY: replacing opcode 0x60 at 0x0004
01-09 19:39:31.446: W/GooglePlayServicesUtil(27926): Google Play services out of date.  Requires 2012100 but found 1015
01-09 19:39:31.446: E/GoogleAuthUtil(27926): GooglePlayServices not available due to error 2
01-09 19:39:31.456: I/System.out(27926): An error occurred: com.google.api.client.googleapis.extensions.android.gms.auth.GooglePlayServicesAvailabilityIOException 
```

我使用 Android SDK 和最新的 Google Play 服务安装了最新的 Eclipse Juno。我使用模拟设备。google-play-services.jar 在我项目的参考库中。google drive api v2 也包括在所描述的教程中。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T21:43:42.640

如错误消息所述，您模拟图像上的 Google Play 服务版本不是最新的。尝试检查是否有更新的 Android 映像可供您使用。

否则，在物理设备而不是模拟器上运行应用程序会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-25T06:06:51.233

希望它可以帮助现在面临问题的人

当您更新手机时也会出现此问题，并且

*   没有登录google账号，所以先打开play store，登录你的账号。
*   没有更新谷歌浏览器。并打开谷歌浏览器并按照步骤操作
*   如果可能的话重启手机。

你准备好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-03T18:34:22.880

问题是您的 Android 设备上没有 Google Play 服务。您可以将 Google Play Service APK 侧加载到模拟器上以解决该问题。

或者您可以使用 Google API 类型的模拟器，但请注意 API 22 我并没有为我工作，但 API 21 的工作方式比找到安装播放服务 apk 的正确版本要容易得多。

您可能需要的有关 APK 的提示是 com.google.android.vending com.google.android.gsm 以及对您的平台类型有点 google 的喜爱。

# javascript - 无法安装 npm？生成应用程序的问题

> ID：14245399
> 
> 赞同：0
> 
> 时间：2013-01-09T19:57:49.957
> 
> 标签：javascript, node.js, express

好的...我第一次尝试使用 node.js。

前段时间安装的，不知道怎么安装的。

昨晚，决定处理有关 node.js 和 express 的教程。

检查我的节点版本是 v0.8.14 和 npm 是 1.1.65。（我在 Mac 上，10.6.8 版本）

但还是这样做了

```
npm install -g express 
```

似乎没问题...但是每当我尝试通过以下方式生成新应用程序时

```
express new ProjectName 
```

我懂了：

```
-bash: express: command not found 
```

决定试试

```
 sudo npm install express -g 
```

这似乎再次进展顺利......但同样，快递新项目名称得到了相同的声明。

再次尝试：

```
npm install -g express 
```

与第一次不同，出现了很多错误。

```
npm WARN package.json application-name@0.0.1 No README.md file found!
AA-s-MacBook-Pro:express_node aa$ express new HotPie
-bash: express: command not found
AA-s-MacBook-Pro:express_node aa$ npm cache clean
AA-s-MacBook-Pro:express_node aa$ npm install -g express
npm http GET https://registry.npmjs.org/express
npm http 200 https://registry.npmjs.org/express
npm http GET https://registry.npmjs.org/express/-/express-3.0.6.tgz
npm http 200 https://registry.npmjs.org/express/-/express-3.0.6.tgz
npm ERR! error rolling back Error: EPERM, chmod '/usr/local/share/npm/bin/express'
npm ERR! error rolling back  express@3.0.6 { [Error: EPERM, chmod '/usr/local/share   /npm/bin/express']
npm ERR! error rolling back   errno: 50,
npm ERR! error rolling back   code: 'EPERM',
npm ERR! error rolling back   path: '/usr/local/share/npm/bin/express' }
npm ERR! Error: EPERM, chmod '/usr/local/share/npm/bin/express'
npm ERR!  { [Error: EPERM, chmod '/usr/local/share/npm/bin/express']
npm ERR!   errno: 50,
npm ERR!   code: 'EPERM',
npm ERR!   path: '/usr/local/share/npm/bin/express' }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator.

npm ERR! System Darwin 10.8.0
npm ERR! command "/usr/local/Cellar/node/0.8.14/bin/node" "/usr/local/bin/npm" "install" "-g" "express"
npm ERR! cwd /Users/aa/Documents/express_node
npm ERR! node -v v0.8.14
npm ERR! npm -v 1.1.65
npm ERR! path /usr/local/share/npm/bin/express
npm ERR! code EPERM
npm ERR! errno 50
npm ERR! stack Error: EPERM, chmod '/usr/local/share/npm/bin/express'
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/aa/Documents/express_node/npm-debug.log
npm ERR! not ok code 0 
```

就这样继续下去：错误……或者没有错误。我完全失去了。而关于解决这个问题的在线文献似乎相当稀少。

请给点建议好吗？

哦，在网上的某个地方也看到了这个：（不管它是什么意思）

```
/usr/local/share/npm/bin/express 
```

结果是：

```
destination is not empty, continue? 
destination is not empty, continue? (yes or no) yes

   create : .
   create : ./package.json
   create : ./app.js
   create : ./public/javascripts
   create : ./public/images
   create : ./public/stylesheets
   create : ./public/stylesheets/style.css
   create : ./routes
   create : ./routes/index.js
   create : ./routes/user.js
   create : ./views
   create : ./views/layout.jade
   create : ./views/index.jade
   create : ./public

   install dependencies:
     $ cd . && npm install

   run the app:
     $ node app 
```

所以 ... ？？？任何意见，将不胜感激！（如果我留下任何所需的相关信息，请告诉我）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:11:50.100

听起来您需要编辑路径变量。

编辑你的 ~/.bash_profile。在某处添加此导出。

```
export PATH=/usr/local/bin:$PATH:/usr/local/share/npm/bin 
```

发生的事情是该节点未正确设置其 PATH。我以前也遇到过这种情况。这是他们应该解决的问题。

您可能没有 .bash_profile。在 *nix 系统中，您可以在主目录中放置一些不同的文件来添加环境变量等。

bash_profile 是我更喜欢的，所以在终端 cd 到 ~ 并**触摸 .bash_profile**。

然后通过**nano .bash_profile**或您喜欢的任何编辑器对其进行编辑。

（在 nano 中，control-o 保存，control-x 退出。）

添加后，请执行以下操作：**source .bash_profile**

然后尝试**which express**看看它是否显示路径。

# java - 如何使用 opencv 和 eclipse 将图片转换为 mat

> ID：14245401
> 
> 赞同：0
> 
> 时间：2013-01-09T19:58:02.040
> 
> 标签：java, android, eclipse, opencv, image

我有一张图片，我在 drwable 目录中找到了。我需要将它用作 mat 文件。

我在网站上发现我应该这样做

```
bitmap batt= bitmapFactory.decodeFile("path"); 
```

`Utils.bitmapToMat(batt,mBatt);`

但它似乎不起作用，

我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:50:58.700

我用谷歌搜索了“opencv bitmap to mat”，前三个链接都解决了您的问题并提供了可能的解决方案......

似乎问题是不稳定的`bitmapToMat()`功能。

对于解决方案，请查看 Google 给我的页面：

1.  [Java openCV - 将位图转换为 Mat 时出错](https://stackoverflow.com/questions/9684869/java-opencv-error-while-conevrting-bitmap-to-mat)
2.  [在 Android 上的 OpenCV 中的 Bitmap 和 Mat 之间转换的正确方法？](https://stackoverflow.com/questions/8637316/correct-way-to-convert-between-bitmap-and-mat-in-opencv-on-android)
3.  [一个简单的问题 - 如何在 Bitmap 和 Mat 之间转换？](https://groups.google.com/forum/?fromgroups=#!topic/android-opencv/8EoxpTb4W3E)

这里的前两个实际上是在stackoverflow上，当你输入你的问题时，它们不是显示为类似的问题吗？

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:50:08.557

您发布的代码应该可以工作。您可能缺少的是初始化 mBatt 对象。

首先，声明**batt**对象应该是大写 B 的**位图**（也许这只是您问题代码中的一种类型）：

```
Bitmap batt = bitmapFactory.decodeFile("path"); 
```

**然后你应该做这样的事情，在 bitmapToMat 之前初始化 mBatt 对象：**

```
// battHeight and battWidth should have the height and width of your bitmap...
Mat mBatt = new Mat(battHeight, battWidth, CvType.CV_8UC1); 
```

# c# - 动态移除控件后调整大小

> ID：14245409
> 
> 赞同：0
> 
> 时间：2013-01-09T19:58:28.460
> 
> 标签：c#, .net, wpf, xaml, wpf-controls

我有一个自定义图形用户控件，我已将其放置在堆栈面板中。堆栈面板中最多可以随时显示 4 个图形控件。我有复选框来控制图表的可见性。

我遇到的问题是，当我取消选中一个复选框时，堆栈面板中的剩余图形不会调整大小以弥补额外的空间。我正在寻找的是当所有图表都可见时，它们适合屏幕而不滚动，但如果只有一个图表可见，我希望调整它的大小以占用所有房间。

有人有想法么？

这是我到目前为止所拥有的：

```
<UniformGrid Grid.Row="2" Name="uniformGrid1" >
                <UniformGrid.Resources>
                    <Utilities:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
                </UniformGrid.Resources>

            <StackPanel Grid.Row="1" Height="700"  Name="graphControls" Orientation="Vertical">
                <!--Cross Correlation Graph-->
                <View:Graph Width="Auto" Height="Auto" MinHeight="175" Margin="5" x:Name="CrossCorrelationGraph" x:FieldModifier="public"                                                
                        Visibility="{Binding Path=IsChecked, ElementName=crossCorrelationViewCheck, Converter={StaticResource BooleanToVisibilityConverter}}"
                        GraphMetadata="{Binding Path=Processor.CrossCorrelation.CrossCorrelationGraphData}"
                        StartPointAlignment="CenterVertical"
                        GraphTitle="Cross Correlation"
                        IsDetailed="True"/>

                <!--Power Spectrum Graph-->
                <View:Graph Width="Auto" Height="Auto" MinHeight="175" Margin="5" x:Name="PowerSpectrumGraph" x:FieldModifier="public"
                        Visibility="{Binding Path=IsChecked, ElementName=powerSpectrumViewCheck, Converter={StaticResource BooleanToVisibilityConverter}}"
                        GraphMetadata="{Binding Path=Processor.CrossCorrelation.PowerSpectrumGraphData}"
                        StartPointAlignment="Left"
                        GraphTitle="Power Spectrum"
                        IsDetailed="True"/>

            <!--Phase Spectrum-->
                <View:Graph  Width="Auto" Height="Auto" MinHeight="175" Margin="5" x:Name="PhaseSpectrum" x:FieldModifier="public"
                        Visibility="{Binding Path=IsChecked, ElementName=phaseSpectrumViewCheck, Converter={StaticResource BooleanToVisibilityConverter}}"
                        GraphMetadata="{Binding Path=Processor.CrossCorrelation.PhaseSpectrumGraphData}"
                        StartPointAlignment="CenterHorizontal"
                        GraphTitle="Cross Phase Spectrum"
                        IsDetailed="True"/>

                <!--Amplitude Spectrum-->
                <View:Graph  Width="Auto" Height="Auto" MinHeight="175" Margin="5" x:Name="AmplitudeSpectrumGraph" x:FieldModifier="public"
                        Visibility="{Binding Path=IsChecked, ElementName=amplitudeSpectrumViewCheck, Converter={StaticResource BooleanToVisibilityConverter}}"
                        StartPointAlignment="Left"
                        GraphTitle="Cross Amplitude Spectrum"
                        IsDetailed="True"/>
            </StackPanel>
        </UniformGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:53:23.240

玩了一段时间后，我找到了解决方案。我会在这里发布，以便其他人受益。

首先，我放下了堆栈面板，只使用了 UniformGrid。我将 UniformGrid 上的 columns 属性设置为 1，因此所有内容都将一个在另一个之上。现在一切都很好。

```
<UniformGrid  Grid.Row="2"  Height="Auto"  Columns="1">                
                    <UniformGrid.Resources>
                        <Utilities:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
                    </UniformGrid.Resources>
                    <!--Cross Correlation Graph-->
            <View:Graph Width="Auto" Height="Auto" MinHeight="175" Margin="5" x:Name="CrossCorrelationGraph" x:FieldModifier="public"                                                
                        Visibility="{Binding Path=IsChecked, ElementName=crossCorrelationViewCheck, Converter={StaticResource BooleanToVisibilityConverter}}"
                        GraphMetadata="{Binding Path=Processor.CrossCorrelation.CrossCorrelationGraphData}"
                        StartPointAlignment="CenterVertical"
                        GraphTitle="Cross Correlation"
                        IsDetailed="True"/>

                    <!--Power Spectrum Graph-->
            <View:Graph Width="Auto" Height="Auto" MinHeight="175" Margin="5" x:Name="PowerSpectrumGraph" x:FieldModifier="public"
                        Visibility="{Binding Path=IsChecked, ElementName=powerSpectrumViewCheck, Converter={StaticResource BooleanToVisibilityConverter}}"
                        GraphMetadata="{Binding Path=Processor.CrossCorrelation.PowerSpectrumGraphData}"
                        StartPointAlignment="Left"
                        GraphTitle="Power Spectrum"
                        IsDetailed="True"/>

                    <!--Phase Spectrum-->
            <View:Graph  Width="Auto" Height="Auto" MinHeight="175" Margin="5" x:Name="PhaseSpectrum" x:FieldModifier="public"
                        Visibility="{Binding Path=IsChecked, ElementName=phaseSpectrumViewCheck, Converter={StaticResource BooleanToVisibilityConverter}}"
                        GraphMetadata="{Binding Path=Processor.CrossCorrelation.PhaseSpectrumGraphData}"
                        StartPointAlignment="CenterHorizontal"
                        GraphTitle="Cross Phase Spectrum"
                        IsDetailed="True"/>

                    <!--Amplitude Spectrum-->
            <View:Graph  Width="Auto" Height="Auto" MinHeight="175" Margin="5" x:Name="AmplitudeSpectrumGraph" x:FieldModifier="public"
                        Visibility="{Binding Path=IsChecked, ElementName=amplitudeSpectrumViewCheck, Converter={StaticResource BooleanToVisibilityConverter}}"
                        StartPointAlignment="Left"
                        GraphTitle="Cross Amplitude Spectrum"
                        IsDetailed="True"/>
                </UniformGrid> 
```

# jquery - 在上传之前或之后获取图像的创建日期

> ID：14245410
> 
> 赞同：1
> 
> 时间：2013-01-09T19:58:37.750
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我在 MVC3、Jquery、HTML5 应用程序中使用 html 文件上传。它工作正常。现在我想在上传时获取文件选择的图像元数据。我如何在上传图像之前或之后获取文件选择的创建日期和修改日期。请向我推荐任何好的插件或方法来获取此类信息。

如果我们在将图像保存到服务器后使用 .net 库获取信息，它会将上传日期作为创建日期返回。但我需要上传之前在客户端计算机上的创建日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:08:40.823

听起来您需要一些 EXIF 数据。

至少有一个[JavaScript 库](http://www.nihilogic.dk/labs/exif/)，.net 应该有很多。

# java - 仅返回 ResultSet 的列名而不实际执行查询（Oracle 和 Java）

> ID：14245411
> 
> 赞同：7
> 
> 时间：2013-01-09T19:58:38.863
> 
> 标签：java, oracle

我想知道是否有一种方法可以返回如果我实际执行查询时将生成的结果集（Oracle 数据库，Java 中）的列名。例如，假设我的 SQL 看起来像这样：

```
select * from <complex table join>; 
```

有没有办法将此查询发送到 oracle 并让它告诉我结果集中的列名是什么，它将返回而不实际执行查询（因为它很昂贵）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T20:04:22.957

我认为使用 PreparedStatement 可以工作：

```
PreparedStatement stmt = connection.prepareStatement("select ...");
ResultSetMetaData meta = stmt.getMetaData();
for (int col=0; col < meta.getColumnCount(); col++) 
{
   System.out.println("Column: " + meta.getColumnName(col + 1));
} 
```

（编辑）：我在 Oracle 11.2 和驱动程序版本 11.2.0.3 上试过这个，它可以工作。

如果失败，您可以简单地将 a 附加`where 1=0`到查询并执行它。至少它不会返回所有行（可能也使用`Statement.setMaxRows()`，只是为了确定。

最后一个（但相当复杂的）选项是`dbms_sql`用来打开、准备和描述语句。详见手册： http: [//docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_sql.htm](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_sql.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T20:10:11.537

您可以尝试将查询包装在外部选择中并添加 where 1=0 以防止它获取任何行：

```
 SELECT * from (
    <your query here>
  )
  WHERE 1=0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T20:10:29.170

```
 SELECT
      COLUMN_NAME
   FROM
      ALL_TAB_COLUMNS
   WHERE
      TABLE_NAME ='tableName'; 
```

可能是您的意思..但是它仍然是一个查询...只是查询特殊表而不是查询应用程序表

与请求元数据的答案相同

# asp.net - 比较两个查询并同步结果

> ID：14245416
> 
> 赞同：0
> 
> 时间：2013-01-09T19:59:05.790
> 
> 标签：asp.net, vb.net, entity-framework, linq-to-entities

我有一个包含许多行的表（房间）。每行代表一个房间，每个房间需要存在两次（秋季一次，春季学期一次）。有时，当人们添加一个房间时，他们只会添加一个学期。我正在研究一个将在学期之间同步房间的过程。

首先，我提取了两个查询，一个获取学期列中包含秋季的所有房间，另一个获取学期列中包含春季的所有房间，如下所示：

```
 Dim getFallRooms = (From p In dbContext.Rooms _
                            Where p.semester = "Fall" _
                            Select p)
        Dim getSpringRooms = (From p In dbContext.Rooms _
                              Where p.semester = "Spring" _
                              Select p) 
```

每个结果将包含多行，其中包含以下列：id、building、room、occupant 和 term。

我想做的是这样的（伪）：

```
For Each row in getFallRooms
    If row.building and row.room not in getSpringRooms Then
       ' Code to add new row with fall as the semester.
    End If
Next 
```

关于如何将其变成实际可行的代码的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:20:59.287

[您可以执行与此链接](http://msdn.microsoft.com/en-us/library/bb348938.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)中正在执行的操作非常相似的操作。

我不确切知道如何在 VB.NET 中执行此操作，但这是我在 C# 中使用 LINQ 扩展方法的方法：

```
var fallRooms = dbContext.Rooms.Where(room => room.semester.Equals("Fall")).Select(r => r.Name);
var nonSpringRooms = dbContext.Rooms.Where(room => room.semester.Equals("Spring"))
                                    .Select(r => r.Name)
                                    .AsQueryable()
                                    .Except(fallRooms); 
```

之后，您可以`For Each`在 nonSpringRooms 上执行一个循环来执行您想做的任何事情。

附带说明一下，如果我错了，应该有人纠正我，但我相信上面的代码只会进入数据库一次。因此，您也将获得该好处。

编辑：我意识到，由于它们位于同一张表上，因此记录将具有相同的主键。我随后更改了上面的查询，假设您的名称字段在两条记录中都相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:23:27.893

```
For Each row in getFallRooms
    If (From p in getSpringRooms 
        Where p.building = row.building 
        AndAlso p.room = row.room).Count = 0 Then
       ' Code to add new row with fall as the semester.
    End If
Next 
```

# linux - 在 Ubuntu Linux 上操作音频输入缓冲区

> ID：14245424
> 
> 赞同：0
> 
> 时间：2013-01-09T19:59:27.233
> 
> 标签：linux, audio, ubuntu, buffer, audio-recording

假设我想用 C++ 编写一个音频过滤器，该过滤器应用于每个音频或特定的麦克风/源，我应该在 ubuntu 上从哪里开始？

编辑，要清楚我不知道如何做到这一点，以及 Pulseaudio、ALSA 和 Gstreamer 的作用是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:06:09.333

[Alsa](http://en.wikipedia.org/wiki/Advanced_Linux_Sound_Architecture)提供了一个用于访问和控制音频和 MIDI 硬件的 API。ALSA 的一部分是一系列内核模式设备驱动程序，而另一部分是应用程序链接的用户空间库。Alsa 是单客户端。

[PulseAudio](http://www.freedesktop.org/wiki/Software/PulseAudio)是便于多个客户端应用程序访问单个音频接口的框架（alsa 是单客户端）。它提供了一个守护进程，它“拥有”音频接口，并为守护进程和使用它的应用程序之间的音频提供 IPC 传输。这在开源桌面环境中被大量使用。Pulse 的使用对应用程序在很大程度上是透明的——它们继续使用带有音频传输和混合的 alsa API 访问音频输入和输出。还有 [Jack](http://en.wikipedia.org/wiki/JACK_Audio_Connection_Kit)更多地针对“专业”音频应用程序 - 可能有点用词不当，尽管这里的意思是低延迟音乐制作工具。

[gStreamer](http://gstreamer.freedesktop.org)是一个基于信号图模式的通用多媒体框架，其中组件具有多个输入和输出引脚并提供转换功能。构建这些组件的图表以实现媒体解码等操作，并具有用于音频和视频输入或输出的特殊节点。它在概念上类似于 CoreAudio 和 DirectShow。 [VLC](http://www.videolan.org/vlc/index.html)和[libAV](http://libav.org)都是开源的替代品，运行方式相似。您在这些之间的选择取决于 API 样式和实现语言。特别是 gStreamer 是一个用 C 实现的 OO API。VLC 是 C++。

实现您描述的问题的明显方法是实现 gStreamer/libAV/VLC 组件。如果您想处理音频然后将其路由到另一个应用程序，这可以通过将其循环回 Pulse 或 Jack 来实现。

Alsa 提供了一个[插件机制](http://alsa.opensrc.org/Ladspa_%28plugin%29)，但我怀疑从 ALSA 文档中实现这一点会很困难。

用于构建您所描述类型的效果插件的事实上的架构是 Steinberg 的[VST](http://www.steinberg.net/en/products/vst.html)。有大量可以在 Linux 上使用的开源主机和插件示例，而且至关重要的是，有不错的文档。与 gStreamer/libAV/VLC 一样，您可以从中路由音频。

其中，VST 可能是最容易上手的。

# python - Heroku 无法安装依赖项 - 我该如何解决？

> ID：14245425
> 
> 赞同：0
> 
> 时间：2013-01-09T19:59:32.267
> 
> 标签：python, heroku

我正在尝试将应用程序推送到 Heroku（第一次），并且在尝试安装 requirements.txt 文件中的依赖项时它继续失败。

该依赖项用于[etsy-python](https://github.com/mcfunley/etsy-python)库（“pip install etsy”失败）。

在本地，我可以通过下载和构建源代码来实现它。我怎样才能通过 Heroku 解决这个问题？

要求.txt：

```
Flask==0.9
Jinja2==2.6
Werkzeug==0.8.3
etsy==0.3.1
geopy==0.94.2
httplib2==0.7.7
oauth2==1.5.211
python-etsy==0.1.2
python-twitter==0.8.4
requests==1.0.4
requests-oauth==0.4.1
simplejson==3.0.4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:28:54.267

我可以通过如下修改 requirements.txt 来解决这个问题：

虽然 Etsy 的 pypi 包不起作用，但源代码没问题，并且构建没有问题。

```
Flask==0.9
Jinja2==2.6
Werkzeug==0.8.3
-e git+https://github.com/mcfunley/etsy-python.git#egg=etsy-python
geopy==0.94.2
httplib2==0.7.7
oauth2==1.5.211
python-etsy==0.1.2
-e git+https://github.com/bear/python-twitter.git#egg=python-twitter
requests==1.0.4
requests-oauth==0.4.1
simplejson==3.0.4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:38:55.230

当我尝试在本地安装 etsy 时出现此错误：

```
ValueError: Invalid IPv6 URL 
```

我想说官方的 py-etsy 已经过时和损坏，Github repo 上次更新是在一年前：[https](https://github.com/mcfunley/etsy-python) ://github.com/mcfunley/etsy-python 。这个库是更新的（5 个月前）：[https](https://github.com/priestc/python-etsy) ://github.com/priestc/python-etsy 。

它不在pypi上，而是在本地克隆它并将其包含在您的项目中。

# smarty - {block} 和 {include} 有什么区别？

> ID：14245428
> 
> 赞同：2
> 
> 时间：2013-01-09T19:59:42.260
> 
> 标签：smarty

{block} 标签和 {include} 标签之间的主要区别是什么？我知道它们都用于模板继承，但是一个工作得更快还是允许更大的灵活性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T21:00:10.553

该[`{include}`](http://www.smarty.net/docs/en/language.function.include.tpl)函数只是引用另一个模板文件，其内容应包含在输出中的该点。它与任何类型的继承无关，并且像 PHP 的`include`/`require`和函数调用之间的交叉一样工作，因为您可以传入参数并且变量可以具有本地范围。

该`{block}`函数用于[模板继承](http://www.smarty.net/docs/en/advanced.features.template.inheritance.tpl)。虽然可以通过巧妙地使用子模板来模拟效果，但基本思想却大不相同。正如文档中所解释的，父模板可以有许多命名块，子模板可以覆盖其中的任何一个或全部，按名称引用它们，其余代码直接来自父模板。

一种思考方式是，`{include}`如果您想要将部分内容包含到多个页面结构中，那么模板继承会很有用，而如果您想要许多具有相似结构但在某些部分中具有不同内容的页面，则模板继承会更合适。当然，您可能想要两者兼而有之。

# java - 在 android 中保存字符串以记住单选按钮选择，editText 中的年龄 - 示例代码

> ID：14245431
> 
> 赞同：-1
> 
> 时间：2013-01-09T19:59:56.613
> 
> 标签：java, android, string, save

所以基本上我想要做的是保存所选选项的字符串和一些在编辑文本中输入的文本（记住年龄那种不容易/快速改变的东西）所以当用户重新启动应用程序时他不需要再次输入所有这些信息。

但是我一直在互联网上寻找有关将字符串保存在共享首选项或内部存储器中的信息，但我无法理解很多东西，也无法让它工作。

所以我的问题是有人可以为我提供 1 个无线电组或 1 个`editText`（就够了）如何记住字符串中选择的选项或输入的值的示例代码，以便下次启动应用程序时，该字符串称为选项/文本是自动设置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:32:40.357

这是我以前的回答，但它对你有用。

```
private void savePreferences(){
    // We need an Editor object to make preference changes.
    SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();
    editor.putString("editText1", editText1.getText().toString());
    editor.putString("editText2", editText2.getText().toString());

    // Commit the edits!
    editor.commit();
}

private void restorePreferences() {
    SharedPreferences settings = getPreferences(MODE_PRIVATE);
    editText1.setText(settings.getString("editText1", ""));
    editText2.setText(settings.getString("editText2", ""));
} 
```

如果您想默认保存所有更改，或者如果它更适合您，请调用`savePreferences()`OnClickListener 。`onPause()`您应该调用`restorePreferences()`一个方法，例如`onCreate()`在应用程序启动时加载这些值。

# amazon-ec2 - 无需每次都注册 AMI 即可保存对 EC2 实例的更改？

> ID：14245436
> 
> 赞同：1
> 
> 时间：2013-01-09T20:00:12.443
> 
> 标签：amazon-ec2, amazon-ami

我想确保没有更好的方法来做我正在做的事情，而不必在每次对我的实例进行更改时都注册一个新的 AMI。

我目前的工作流程如下：

1.  使用我的默认设置和我的所有 cronjobs 创建一个 AMI（我们称之为 A1）
2.  在另一个实例上创建一个 cronjob，每 X 小时为实例 A1 购买一个 Spot 请求
3.  A1 运行其作业并自动关闭
4.  终止 A1 实例的 Spot 请求
5.  如果需要进行更改，请编辑 A1 中的文件

我遇到的问题是，很多时候我需要对我的 A1 实例进行更改，然后我必须编辑我的其他实例才能对购买 Spot 请求的文件进行更改以反映新的 AMI。由于这是通过大量实例完成的，因此有点混乱。

是否可以只更改实例的“内容”而无需注册新的实例 ID？这样现场请求可以继续调用相同的ID吗？

非常感谢任何提示。谢谢！

# javascript - GoogleVisualization API for JavaScript 的问题 - 获取数据

> ID：14245439
> 
> 赞同：0
> 
> 时间：2013-01-09T20:00:15.270
> 
> 标签：javascript, arrays, google-visualization

我正在使用带有 JavaScript 的 Google Visualization API 来显示数据表。问题是：如果我创建具有所需内容的变量，我可以显示数据，但是当我从 AJAX 获得相同的数据时，我无法构建表格。

这是有效的代码：

```
 function mostrarCuadro() {
          var datos = [["Nombre","Altura","Apariencia","Blablabla","Cualidad","Presencia","Puntualidad","Talento"],["L L",0,3,0,2,4,3,0],["M B",0,3,0,4,5,2,0],["S L",2,2,3,3,3,4,2]];
          datos = google.visualization.arrayToDataTable(datos);
          // Create and draw the visualization.
          visualization = new google.visualization.Table(document.getElementById('table_div'));
          visualization.draw(datos, null);
        } 
```

在另一种情况下（不起作用），我使用 AJAX jQuery 使用 PHP 文件作为服务器端从 MySQL 获取数据：

```
function obtenerData(){
    document.getElementById("myDiv").innerHTML="Cargando...";
    $(function () 
    {
        $.ajax({                                      
        url: 'obtieneCuadro.php',           //the script to call to get data          
        data: "id=22755",                   //url argumnets
        dataType: 'html',                   //data format      
        success: function(data)         //on recieve of reply
        {
        var recibido = data;
        datos = google.visualization.arrayToDataTable(recibido);
          // Create and draw the visualization.
          visualization = new google.visualization.Table(document.getElementById('table_div'));
          visualization.draw(datos, null);
        } 
        });
    }); 
} 
```

我的 PHP 文件返回（我在变量 'recibido' 中得到它）：

```
[["Nombre","Altura","Apariencia","Blablabla","Cualidad","Presencia","Puntualidad","Talento"],["L L",0,3,0,2,4,3,0],["M B",0,3,0,4,5,2,0],["S L",2,2,3,3,3,4,2]] 
```

如您所见，这两个变量具有相同的内容，但在第二种情况下它不起作用。谁能告诉我有什么问题，我怎样才能让它工作？

谢谢你。

* * *

编辑：我已经设法解决了这个问题，现在它工作正常......我在这里展示了现在正在工作的正确代码：

```
 <script type="text/javascript">
function obtenerData(){
  document.getElementById("table_div").innerHTML="Cargando...";
  $(function () 
  {
    $.ajax({                                      
      url: 'obtieneCuadro.php',         //the script to call to get data          
      data: "id=22755",                 //url argumnets
      dataType: 'html',                 //data format      
      success: function mostrarCuadro(data)         //on recieve of reply
      {
          datosTabla = google.visualization.arrayToDataTable(JSON.parse(data));
          // Create and draw the visualization.
          visualization = new google.visualization.Table(document.getElementById('table_div'));
          visualization.draw(datosTabla, null);
      } 
    });
  }); 
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:16:41.443

我已经设法解决了这个问题，现在它工作正常......我在这里留下了现在正在工作的正确代码：

```
 <script type="text/javascript">
function obtenerData(){
  document.getElementById("table_div").innerHTML="Cargando...";
  $(function () 
  {
    $.ajax({                                      
      url: 'obtieneCuadro.php',         //the script to call to get data          
      data: "id=22755",                 //url argumnets
      dataType: 'html',                 //data format      
      success: function mostrarCuadro(data)         //on recieve of reply
      {
          datosTabla = google.visualization.arrayToDataTable(JSON.parse(data));
          // Create and draw the visualization.
          visualization = new google.visualization.Table(document.getElementById('table_div'));
          visualization.draw(datosTabla, null);
      } 
    });
  }); 
}
</script> 
```

我不得不用“JSON.parse(data)”解析数据。

# ruby-on-rails - 当输出表明它应该通过时，Rspec 测试失败

> ID：14245440
> 
> 赞同：1
> 
> 时间：2013-01-09T20:00:18.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, capybara

~~~~~~~~~~~~~~~ **编辑/更新** ~~~~~~~~~~~~~~~

好的，我通过将“.to_s”附加到更改块中的每个 user.password_digest 来修复未能通过的测试。我认为这是可行的，因为在 user.password_digest 有点像指针之前，调用“to_s”会强制测试比较字符串值。如果有人可以解释为什么测试比较指针而不是值，请赐教。

添加 .to_s 调用（在我期望用户属性更改的任何地方添加）后，故障 #3 仍在发生（实际上是一个新故障，但我确信它是由导致故障 #3 的同一问题引起的）。任何想法为什么测试“具有正确密码的正确用户应该更改电子邮件”没有捕捉到浏览器中正确发生的更改操作？

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～

我正在尝试验证表单的行为以更新用户的个人资料（更改电子邮件和/或密码）。我的 3 个测试失败了，我不知道为什么。当我运行测试时，看看控制台输出......

```
Failures:
  1) User Pages Edit page correct user updates password with incorrect password should not change password
     Failure/Error: expect { click_button "Save" }.not_to change{ user.password_digest }
       result should not have changed, but did change from "$2a$10$Xrg1SHSyDmK5Of9HrjgYAuzkJzKk7HeaVjj4ZT9Ldz2R9BNji3D2S" to "$2a$10$Xrg1SHSyDmK5Of9HrjgYAuzkJzKk7HeaVjj4ZT9Ldz2R9BNji3D2S"
     # ./spec/requests/user_pages_spec.rb:135:in `block (6 levels) in <top (required)>'

  2) User Pages Edit page correct user updates password with confirmation mismatch should not change password
     Failure/Error: expect { click_button "Save" }.not_to change{ user.password_digest }
       result should not have changed, but did change from "$2a$10$bm2viuIuNCRIEEWe/qYVAOVl0r0EW7Y/1CqalKUwgR.ht/wVtQ8Zi" to "$2a$10$bm2viuIuNCRIEEWe/qYVAOVl0r0EW7Y/1CqalKUwgR.ht/wVtQ8Zi"
     # ./spec/requests/user_pages_spec.rb:147:in `block (6 levels) in <top (required)>'

  3) User Pages Edit page correct user updates email with correct password should change email
     Failure/Error: expect { click_button "Save" }.to change{ user.email }.to(new_email)
       result should have been changed to "new_email@example.com", but is now "person_7@example.com"
     # ./spec/requests/user_pages_spec.rb:121:in `block (6 levels) in <top (required)>'

Finished in 2.99 seconds
8 examples, 3 failures 
```

失败＃1和2应该通过，对吧？前后字符串匹配，并且它们预计不会改变！这里会发生什么？

此外，我无法弄清楚为什么会发生故障 #3。

该代码在浏览器中按预期工作。它可能与AJAX有关吗？表单点击的更新操作不会重定向到任何东西——它只是再次呈现页面并带有 Flash 通知。我是 Rails 新手，所以我可能遗漏了一些明显的东西。

表格：

```
<%= form_tag user_path(params[:id]), method: :put do %>

    <%= label_tag :email %>
    <%= text_field_tag :email, params[:email] || @user.email %>

    <%= label_tag :new_password %>
    <%= password_field_tag :new_password %>

    <%= label_tag :new_password_confirmation, "Confirm new password" %>
    <%= password_field_tag :new_password_confirmation %>

    <%= label_tag :password %>
    <%= password_field_tag :password %>

    <%= submit_tag "Save", class: "btn btn-primary pull-down" %>
<% end %> 
```

测试规范（为了清楚起见，删除了不相关的测试）：

```
require 'spec_helper'
describe "User Pages" do

  subject { page }

  describe "Edit page" do
    let(:user) { FactoryGirl.create(:user) }

    describe "correct user" do
      before do
        log_in user # helper method that logs the user in, a la Michael Hartl tutorial
        visit edit_user_path(user)
      end

      it { current_path.should == edit_user_path(user) }
      it { should have_selector('title', text: 'Edit') }
      it { should_not have_content('not authorized') }

      describe "updates email" do
        let(:new_email) { "new_email@example.com" }
        before { fill_in 'Email', with: new_email }

        describe "with incorrect password" do
          it "should not change email" do
            expect { click_button "Save" }.not_to change{ user.email }
          end
        end

        describe "with correct password" do
          before { fill_in 'Password', with: user.password }
          it "should change email" do
            expect { click_button "Save" }.to change{ user.email }.to(new_email)
          end
        end
      end

      describe "updates password" do

        describe "with incorrect password" do
          before do
            fill_in 'New password', with: 'newpassword'
            fill_in 'Confirm new password', with: 'newpassword'
          end

          it "should not change password" do
            expect { click_button "Save" }.not_to change{ user.password_digest }
          end
        end

        describe "with confirmation mismatch" do
          before do
            fill_in 'New password', with: 'newpassword'
            fill_in 'Confirm new password', with: 'password'
            fill_in 'Password', with: user.password
          end

          it "should not change password" do
            expect { click_button "Save" }.not_to change{ user.password_digest }
          end
        end

        describe "with correct password" do
          before do
            fill_in 'New password', with: 'newpassword'
            fill_in 'Confirm new password', with: 'newpassword'
            fill_in 'Password', with: user.password
          end

          it "should change password" do
            expect { click_button "Save" }.to change{ user.password_digest }
          end
        end
      end
    end
  end
end 
```

相关 gem 版本：Rails 3.2.9、Capybara 1.1.2、FactoryGirl 4.1.0

# php - 如何在 PhpMyAdmin 的左侧菜单中列出所有表？

> ID：14245441
> 
> 赞同：75
> 
> 时间：2013-01-09T20:00:18.530
> 
> 标签：php, database-design, phpmyadmin

有谁知道如何在 PhpMyAdmin 的左侧菜单中列出每个表格（禁用分页）？我的数据库中有超过 250 个表，现在我们看到了分页。不得不来回走动非常烦人，将它们全部列出会容易得多。

我们发现了以下变量：

```
$cfg['LeftDisplayTableFilterMinimum']  = 30 
```

但是，当我将它放入我们的配置文件时，它似乎没有任何影响。

在[文档](http://wiki.phpmyadmin.net/pma/Config#Left_frame_setup)中，它说将其设置为一个大数字以禁用，我们也尝试过，但没有成功。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-01-09T20:03:26.357

### 更新：

感谢@Cloudkiller，除了更新 V4 之外，可能还需要更改另一个配置设置（从 4.3.6 开始）：

[**`$cfg['FirstLevelNavigationItems']`**](http://docs.phpmyadmin.net/en/latest/config.html#cfg_FirstLevelNavigationItems)

## 更新 V4：

根据[**Configuration Docs**](http://docs.phpmyadmin.net/en/latest/config.html)，您可以修改：

[**`$cfg['MaxNavigationItems']`**](http://docs.phpmyadmin.net/en/latest/config.html#cfg_MaxNavigationItems)

> 导航树每页可显示的项目数。

### 也可以试试：

[**`$cfg['MaxTableList']`**](http://docs.phpmyadmin.net/en/latest/config.html#cfg_MaxTableList)

> 主面板列表中显示的表名称的最大数量（导出页面除外）。在 Light 模式下，此限制也会在导航面板中强制执行。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2014-01-09T15:41:46.830

我是这样做的（在我的共享主机上使用带有“pmahomme”主题的 v. 4.0.5）：

1.  转到 phpMyAdmin 主页（房子图标）。
2.  在“外观设置”下，转到“更多设置...”。
3.  选择顶部第二行中的“导航面板”。
4.  更改“分支中的最大项目数”中的数字。
5.  点击“保存”
6.  鲍勃是你的叔叔！

[![phpmyadmin 设置截图](../Images/4d81b3482e2d93084006f887d5dd8509.png)](https://i.stack.imgur.com/KCBM4.png)

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2013-05-06T18:42:21.893

根据 phpMyAdmin，它是 MaxNavigationItems：

```
$cfg['MaxNavigationItems']
Type: integer
Default value:  25 
```

导航树每页可显示的项目数。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-07-24T15:09:08.557

我通过对通过 Xampp 安装的本地版本（4.0.4）的 mpemburn 的回答略有不同发现了它。

1.  转到 phpMyAdmin 主页（房子图标）。
2.  单击“设置”选项卡
3.  选择“导航面板”
4.  更改“分支中的最大项目数”中的数字。
5.  点击“保存”
6.  鲍勃是你的叔叔！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-08-02T16:07:09.223

从 phpMyAdmin 4.8.5 开始。

1.  单击 phpMyAdmin 徽标下方左上角的齿轮图标。
2.  单击`Navigation Tree`选项卡。
3.  增加数量`Maximum items in branch`。

[![如何在 PHPMyAdmin 中编辑表限制的图像](../Images/ce05d9c1308d51f1db78110908b4c245.png)](https://i.stack.imgur.com/fyksl.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-08T10:24:56.877

我刚刚升级到**4.3.6**，不得不添加另一个设置：

> [$cfg['FirstLevelNavigationItems']](http://docs.phpmyadmin.net/en/latest/config.html#cfg_FirstLevelNavigationItems)

此外：

```
$cfg['MaxTableList'];
$cfg['MaxNavigationItems']; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-14T15:42:17.330

这对我来说可以获取左窗格中列出的所有表格。

[![在此处输入图像描述](../Images/e6fdb8d83209f90ee6a911af91023281.png)](https://i.stack.imgur.com/SsHEe.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-17T23:37:57.827

根据文档，这些是应该完成这项工作的配置：

```
$cfg['NavigationTreeDisplayItemFilterMinimum'] = 500;
$cfg['FirstLevelNavigationItems'] = 500; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-02T16:16:01.367

当我使用界面中的设置，然后注销并再次登录时，它又恢复了默认值，即显示`50`条目。

5.0+ 的解决方案：

1.  重命名`config.sample.inc.php`为`config.inc.php`（不要忘记“inc”部分）
2.  打开文件。
3.  添加到最后一行：`$cfg['MaxNavigationItems'] = 500;`
4.  打开 PhpMyAdmin 并监听导航项（`500`条目）。

参考：[配置文件](https://docs.phpmyadmin.net/en/latest/config.html)
参考：[$cfg['MaxNavigationItems']](https://docs.phpmyadmin.net/en/latest/config.html#cfg_MaxNavigationItems)

# apache - 我的 MediaWiki 站点不会将样式表作为文本/css 提供

> ID：14245442
> 
> 赞同：2
> 
> 时间：2013-01-09T20:00:23.323
> 
> 标签：apache, mod-rewrite, mediawiki

我最近在运行 Apache 的 Debian 服务器上安装了**MediaWiki 1.19 版。**我能够成功访问页面。但是，页面没有样式。我无法在浏览器中加载样式表。

使用 Firebug，我将我网站的响应标头与 Wikipedia 页面的响应标头进行了比较。相关的区别似乎是我的网站提供样式表 url ( `load.php?debug=true&lang=en&modules=mediawiki.legacy.commonPrint%2Cshared|skins.vector&only=styles&skin=vector&*`) 作为`text/html`内容类型，而 Wikipedia 提供了它`text/css`。

我怀疑它与 Apache 重写模块设置有关。我发现[这个页面](http://www.mediawiki.org/wiki/Thread%3aProject%3aSupport_desk/CSS_is_not_loading_properly)讨论了这个问题并为重写规则提供了各种建议。我已经尝试了所有这些都没有成功。

一个可能相关的附加细节：我`/var/www/wiki`在我的 Debian 服务器上的目录之外运行 MediaWiki 代码。我已经更新了适当的 MediaWiki 配置设置并将这些行添加到`.htaccess`文件中`/var/www`：

```
RewriteEngine On

RewriteRule ^/$ /wiki/index.php?title=Main_Page [L,QSA]
RewriteRule ^/wiki/*$ /wiki/index.php?title=Main_Page [L,QSA]
RewriteRule ^/wiki/(.+)$ /wiki/index.php?title=$1 [L,QSA] 
```

我该怎么做才能让 Apache 将此`load.php?debug=true&lang=en&modules=mediawiki...`链接作为`text/css`内容提供？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T15:59:59.700

这个问题原来是一个基本的配置问题。我将`DocumentRoot`Apache 配置中的`/var/www/wiki`. 我将`wgScriptPath`in`LocalSettings.php`设置为`/wiki`.

更改`wgScriptPath`路径`""`并摆脱 .htaccess 规则解决了这个问题。

# php - 编辑页面必须提交两次才能保存更改

> ID：14245444
> 
> 赞同：1
> 
> 时间：2013-01-09T20:00:34.160
> 
> 标签：php, forms, cakephp

我设置了一个编辑页面来编辑博客文章。这是控制器动作...

```
public function edit($id = null) {
    $post = $this->Post->findById($id);

    if(!$post) {
        throw new NotFoundException('Post not found');
    }

    if($this->request->is('post')) {
        $this->Post->id = $id;
        if($this->Post->save($this->request->data)) {
            $this->Session->setFlash('Post updated!');
            $this->redirect('/');
        } else {
            $this->Session->setFlash('Unable to update post!');
        }
    }

    if (!$this->request->data) {
        $this->request->data = $post;
    }

    $this->set('tags', $this->Post->Tag->find('list'));
    $this->set('pageTitle', 'Edit blog post');
} 
```

和编辑页面视图...

```
<h1>Edit blog post</h1>

<?php echo $this->Form->create('Post'); ?>
<?php echo $this->Form->input('Post.title'); ?>
<?php echo $this->Form->input('Post.body'); ?>
<?php echo $this->Form->input('Tag.Tag', array('type' => 'text', 'label' => 'Tags (seperated by space)', 'value' => $tags)); ?>
<?php echo $this->Form->input('Post.slug'); ?>
<?php echo $this->Form->end('Save Changes'); ?> 
```

出于某种原因，当我进行更改并单击“保存更改”时，页面会刷新，尽管更改会在刷新后反映在表单中，但我必须再次单击“保存更改”才能将它们保存到数据库中蛋糕将我重定向到`/`。

可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:50:30.323

因为`Post.id`您的表单中没有，CakePHP 第一次发送一个`PUT`请求（而不是一个`POST`请求）来创建（或“放置”）一个新行到您的数据库中。这没有通过您的请求检查：

```
if($this->request->is('post')) 
```

现在，此时您的逻辑使用以下代码获取相应帖子的整行：

```
$this->request->data = $post; 
```

这将包括给定帖子的 ID，因为它在您的`find()`结果中，因此您第二次提交它时，它有一个 id，因此发送`POST`请求而不是`PUT`请求。

假设您只想编辑**现有**帖子，`id`请在表单中添加一个字段（FormHelper automagic 应该为其创建一个隐藏字段，但您始终可以明确告诉它，如下例所示）：

```
echo $this->Form->input('Post.id', array('type' => 'hidden'); 
```

这应该传递 id 并因此触发`POST`请求而不是`PUT`请求并使您的提交立即通过。

# c++ - 结构的构造函数

> ID：14245447
> 
> 赞同：0
> 
> 时间：2013-01-09T20:00:47.247
> 
> 标签：c++, iphone, objective-c, xcode

我有以下两个 C++ 结构。

```
struct Vertex3D{
    GLfloat x;
    GLfloat y;
    GLfloat z;
    Vertex3D(GLfloat a, GLfloat b, GLfloat c){
        x = a;
        y = b;
        z = c;
    }
};

struct Triangle3D{
    Vertex3D v1;
    Vertex3D v2;
    Vertex3D v3;
    Triangle3D(Vertex3D vt1, Vertex3D vt2, Vertex3D vt3){

    };

}; 
```

Vertex3D 的构造器很好，但 Triangle3D 的构造器给了我一些警告，我无法在 xcode 中编译。错误说'Triangle3D'的构造函数必须显式初始化没有默认构造函数的成员'v2'。但是，我为 Vertex3D 类型的结构创建了一个构造函数。Traingle3D 中的这个构造函数实际上有什么问题？我需要更改它，还是无法使用其他结构创建构造函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T20:02:20.447

但是您没有提供 DEFAULT 构造函数（即可以不带参数调用的构造函数）。

解决此问题的一种方法是默认构造函数的所有参数：

```
Vertex3D(GLfloat a = 0.0, GLfloat b = 0.0, GLfloat c = 0.0){
    ...
} 
```

但也许您应该明确初始化三角形的每个成员：

```
Triangle3D(Vertex3D vt1, Vertex3D vt2, Vertex3D vt3)
    : v1(vt1), v2(vt2), v3(vt3)
{
    // Probably don't need code here.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T20:09:08.090

你的意思是？

```
struct Triangle3D{
    Vertex3D v1;
    Vertex3D v2;
    Vertex3D v3;
    Triangle3D(Vertex3D vt1, Vertex3D vt2, Vertex3D vt3): v1(vt1),v2(vt2),v3(vt3){

    }; 
```

# regex - 休眠正则表达式

> ID：14245453
> 
> 赞同：1
> 
> 时间：2013-01-09T20:01:13.257
> 
> 标签：regex, hibernate, hql

我正在尝试构建一个可以通过 HQL 正则表达式关键字搜索的 API，

已编辑：在 HQL 中执行正则表达式搜索的最佳方法是使用条件、Restrictions.like() 或 Restrictions.ilike()。

```
public static List<Object> createQueryAnd(Criteria cri,
        ArrayList<Parameters> list) {

    for (Parameters p : list) {
        String value = (String) p.value;
        if (value.contains("*")) {
            value = value.replace("*", "%");
        } else {
            value += "%";
        }
        Criterion c1 = Restrictions.ilike(p.property, value);
        cri.add(c1);

    }

    return cri.list();
} 
```

希望这可以帮助某人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:07:14.437

HQL 没有正则表达式。如果要对正则表达式使用数据库提供程序特定的构造，则应修改方言。[此](https://stackoverflow.com/questions/11793159/how-to-use-oracles-regexp-like-in-hibernate-hql)问题包含有关如何使用 Oracle 数据库执行此操作的讨论。

# crystal-reports - 水晶总结和百分比

> ID：14245461
> 
> 赞同：0
> 
> 时间：2013-01-09T20:01:32.417
> 
> 标签：crystal-reports

我有一个 Crystal Report v 9.2.2，每个组的末尾都有三个摘要；IEP 学生人数、非 IEP 学生人数和学生总数。例如，对于一个小组（一个班级），我有 25 名学生。4 名学生是 IEP，21 名学生是非 IEP。所以我试图创建一个公式来计算百分比，但是百分比是错误的。

总和（{@IEP}）% 计数（{Mytable.student_id}）

手动，数学说 4 / 25 * 100 = 16，但是当我使用上面的公式时，我得到 11

我不认为这是格式问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:32:36.190

你的数学是对的，只需在代码/公式中做同样的事情。以下适用于基于 {YourGroupField} 的组，并将百分比给出小数点后一位：

```
local numbervar IEPstudents := sum({@IEP},{YourGroupField}) //get number of IEP students in group
local numbervar TotalStudents := count({Mytable.student_id},{YourGroupField}) //get total students in group
local numbervar ThePercent := (IEPstudents / TotalStudents) * 100;
totext(ThePercent,1) + '%' 
```

或者，您可以保留公式数字并在字段的格式编辑器中添加百分比符号和格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:11:58.517

检查“创建运行总计字段”中的重置值以获取计数。

![在此处输入图像描述](../Images/dc3e39aac462cc67c399224e4208378a.png)

或者

重置公式中的计数。

# android - 下载图片随机错误

> ID：14245462
> 
> 赞同：1
> 
> 时间：2013-01-09T20:01:42.880
> 
> 标签：android, cordova

我有以下代码：

```
function download_img(imgToDownload, imgToRemove){
            var url = remote_url+imgToDownload; // image url
            root_path   = get_root_path();
            var flag    = "working";
            var flag_delete = false;
            var imageToDownloadPath = root_path + "/" + imgToDownload; // full file path
            var imageToRemovePath = root_path + "/" + imgToRemove; // full file path                        
            try{                 
                var fileTransfer = new FileTransfer();
                fileTransfer.download(url, imageToDownloadPath, 
                    function () {
                        if(imgToRemove != "" && imgToRemove != null){
                            var entry = new FileEntry("foo", imageToRemovePath);
                            entry.remove(function (){alert("fine");flag_delete = true;}, function (){alert("marron");flag_delete = true;});
                        }
                        else{
                            flag_delete = true;
                        }
                        flag    = "done";
                    }, 
                    function (error) {
                        flag    = "done";
                        flag_delete = true;
                    }
                );
            }catch(error){
                alert("Error capturado: "+error.message);
            }
            while(flag=="working" && !flag_delete){
                try{
                    setTimeout(
                        function() {
                            /* Código */
                        },
                        300
                    );                  
                }
                catch(error){
                    alert("Error en el bucle: " + error.message);
                }

            }
        } 
```

我在下载文件时遇到了问题，这显然是一个同步冲突，我的意思是，在下载文件/s 之前似乎有什么东西正在阻止执行。

我使用了两个标志来确保在文件下载之前不会继续（如果需要，旧的会被删除）。这个想法是在动作完成时更改标志的值并保持代码在循环中等待。

这段代码给出的结果如下：

*   即使第一个文件正确下载，它似乎也永远不会进入成功的 fileTransfer.download 成功方法（我使用了从未触发的警报）。

*   标志永远不会更改，因此代码会停留在循环中，并且不会继续下载其他文件。

我认为这可能是一个非常基本的 jQuery 行为，但我只是从这项技术开始，我有点迷茫。如果有人能给我一个线索，我将不胜感激。

谢谢！！

# c# - 仅平铺图像时如何有效地使用 DrawingGroup？

> ID：14245463
> 
> 赞同：0
> 
> 时间：2013-01-09T20:01:49.513
> 
> 标签：c#, wpf

我无法理解绘图组的问题。我正在 wpf 中创建一个地图编辑器，这是我的第一个 wpf 项目，我一直在搜索/玩绘图组。

我在左侧有一组图块，在应用程序启动时根据精灵文件夹填充这些图块。它们都根据我设置的规则进行布局（每行 3 组图块，每组 32 像素）。下面的例子：

```
 private void RefreshTileList()
    {
        // For now load in all textures as possible tiles
        DrawingGroup dGroup = new DrawingGroup();
        Rect r = new Rect();
        r.X = 0.0;
        r.Y = 0.0;
        r.Width = Settings.Default.TileThumbWidth;
        r.Height = Settings.Default.TileThumbHeight;
        foreach (WPFTexture tex in imgFind.TileTextures)
        {
            ImageDrawing iDraw = new ImageDrawing(tex.src, r);

            dGroup.Children.Add(iDraw);

            r.X += r.Width;
            if (r.X > r.Width * Settings.Default.TileThumbMaxColumns)
            {
                r.X = 0.0;
                r.Y += r.Height;
            }
        }

        // Make a drawing image and send it to the Image in canvas
        DrawingImage drawImage = new DrawingImage(dGroup);
        tileImage.Source = drawImage;
    } 
```

现在我在另一个画布中进行图像控制，除了动态放置图块之外，我想做同样的事情。这是我到目前为止所拥有的：

```
 private void AreaDrawingCanvas_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        if(curSelIndex > -1 && curSelIndex < imgFind.TileTextures.Count)
        {
            BitmapSource tileSrc = imgFind.TileTextures[curSelIndex].src;

            Point mousePos = e.GetPosition(sender as Canvas);
            Size size = new Size(tileSrc.Width, tileSrc.Height);
            Rect r = new Rect(mousePos, size);
            ImageDrawing iDraw = new ImageDrawing(tileSrc, r);

            areaDrawGroup.Children.Add(iDraw);

        }
    } 
```

这是使用 areaDrawGroup 的初始化：

```
 // Setup drawing for area
        DrawingImage areaDrawImage = new DrawingImage(areaDrawGroup);
        areaImage.Source = areaDrawImage;
        areaImage.Stretch = Stretch.None;
        AreaDrawingCanvas.Children.Add(areaImage); 
```

如果我不添加位于绘图组中点 (0, 0) 的死图像，然后单击图像控件。它将偏移到一个奇怪的位置。当我继续单击左上角位置时，它会更正绘制瓷砖的位置，同时将所有其他瓷砖移过来。

我的问题是我在哪里可以找到一个好的平铺示例或者我做错了什么？因为添加一个死图像来修复其他图像所在的位置似乎对我错过的一些简单的东西来说是一个非常糟糕的黑客攻击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:26:26.443

这是我现在为解决这个问题所做的。我有一个 i7 并使用了一个绘图视觉列表。不要有问题。我曾想过我应该使用一个绘图视觉并将每个图像添加到同一个视觉。这样做的问题是，如果我添加一个图块，我必须重新打开渲染并重做所有绘图。因为我没有任何问题，所以我决定不把时间花在那个方法上。

这是复制和粘贴的代码：

1.  创建一个派生框架元素的类并添加覆盖，如图所示

    公共类 AreaDrawingEdit : FrameworkElement { public VisualCollection Visuals { get; 放; } 常量双 COLLISION_OPACITY = 0.8;

    ```
    public AreaDrawingEdit()
    {
        Visuals = new VisualCollection(this);
    }

    public void AddRenderTile(DrawingTile tile)
    {
        // Add the tile visual 
        tile.visual = new DrawingVisual();
        InvalidateTile(tile);
        Visuals.Add(tile.visual);

        // Add in collision visual
        tile.colVol.visual = new DrawingVisual();
        InvalidateCollisionVol(tile.colVol);
        Visuals.Add(tile.colVol.visual);
    }

    public void RemoveRenderTile(DrawingTile tile)
    {
        Visuals.Remove(tile.visual);
        Visuals.Remove(tile.colVol.visual);
    }

    public void InvalidateTile(DrawingTile tile)
    {
        // Set up drawing rect for new tile
        Rect r = new Rect(tile.pos, new Size(tile.tileTex.src.PixelWidth, tile.tileTex.src.PixelHeight));

        DrawingContext dc = tile.visual.RenderOpen();
        dc.DrawImage(tile.tileTex.src, r);
        dc.Close();
    }

    public void InvalidateCollisionVol(CollisionVol vol)
    {
        Rect r = new Rect(vol.pos, vol.size);

        DrawingContext dc = vol.visual.RenderOpen();
        dc.PushOpacity(COLLISION_OPACITY);
        dc.DrawImage(vol.src, r);
        dc.Pop();
        dc.Close();
    }

    protected override int VisualChildrenCount
    {
        get { return Visuals.Count; }
    }

    protected override Visual GetVisualChild(int index)
    {
        if (index < 0 || index >= Visuals.Count)
        {
            throw new ArgumentOutOfRangeException();
        }

        return Visuals[index];
    } 
    ```

    }

2.  在某处将您制作的框架元素添加到您的 xaml 文件中。小于本地：AreaDrawingEdit Canvas.Left="0" Canvas.Top="0" OpacityMask="Black" x:Name="areaDrawingEdit" 反斜杠大于

享受解决我难以解决的痛苦的方法。

# mysql - 在具有 OUT 参数的 MySQL Workbench 中调用存储过程

> ID：14245464
> 
> 赞同：4
> 
> 时间：2013-01-09T20:01:56.210
> 
> 标签：mysql, mysql-workbench

我一直在使用 TOAD for MySQL，因为我是 Oracle 的转换者。我试图找出执行调用一个函数的过程所需的时间。这是一个非常直接的存储过程，除了它有一个`OUT`参数：

```
PROCEDURE TESTME (OUT dTEST DOUBLE) 
```

我决定尝试 MySQL Workbench GUI。我怎么称呼这个？当我尝试时，`CALL TESTME`我得到一个 1318 错误 - args 数量不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:37:13.867

您需要先声明一个变量来保存 out 参数：

```
DECLARE @dummy DOUBLE;
CALL TESTME(@dummy); 
```

ETA：我认为实际上声明变量是可选的。只是`CALL`没有`DECLARE`应该工作的声明。

# ios - 如何在 iOS 模拟器中使用 Instruments Automation？它无法附加或找到 iOS 模拟器

> ID：14245471
> 
> 赞同：0
> 
> 时间：2013-01-09T20:02:28.327
> 
> 标签：ios, xcode, automation, instruments

如何附加到当前在 iOS Simulator 6 中运行的应用程序，或使用 Xcode Instruments 中的自动化启动应用程序？我正在使用 Xcode 4.5。我看到我的应用程序正在模拟器中运行。如果我启动 Instruments，我会选择“iOS Simulator -> Automation”模板。但是，顶部的下拉菜单在“附加到进程”下告诉我“当前仪器不允许附加”，当使用“选择目标”时，我会看到我的应用程序文件夹中的应用程序列表，但它们都不是 iOS 模拟器，因为它在 Xcode.app 包中。它在设备上运行良好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T17:30:33.427

“附加到进程”给了我相同的结果：“当前仪器不允许附加。” 所以我不能回答你问题的那一部分。

要从 Instruments 在模拟器中运行您的应用程序：

*   确保在“选择目标”下拉菜单中选择了您的 Mac
*   在选择目标下拉列表中，选择选择目标 -> 选择目标
    *   您将在您的应用程序文件夹中看到该应用程序列表——您已经到了这一步
*   现在单击 Applications 旁边的向下三角形关闭 Applications 文件夹，或者直接向下滚动以显示 Mac 上的其余顶级文件夹
*   浏览到您的应用
    *   在这样的路径中找到它：/Users/YOUR-USER-NAME/Library/Application Support/iPhone Simulator/5/Applications/GUID/YOUR-APP-NAME
    *   奇怪的是，文件浏览器不显示文件夹“扩展名”，因此 iOS 5.0 和 5.1 版本在文件夹列表中都显示为“5”

# apache - Apache 不会在 xampp 中运行

> ID：14245474
> 
> 赞同：26
> 
> 时间：2013-01-09T20:02:33.003
> 
> 标签：apache, xampp, port

我刚刚安装了 XAMPP，一切正常，除了我无法让 apache 运行。似乎端口 80 是问题，我已禁用 Skype 以使用端口 80，但似乎无法修复它。我在某处读到 SSL 端口可能是问题，应该更改。但我无法弄清楚端口是或如何改变它。

```
"Check the "/xampp/apache/logs/error.log" file" 
```

我试图检查这个文件，但在“日志”里面什么都没有。从 apache 我可以去错误，但没有任何最近更改的文档。

错误：

```
20:34:24  [Apache]  Problem detected!
20:34:24  [Apache]  Port 80 in use by "system"!
20:34:24  [Apache]  Apache WILL NOT start without the configured ports free!
20:34:24  [Apache]  You need to uninstall/disable/reconfigure the blocking application
20:34:24  [Apache]  or reconfigure Apache to listen on a different port

20:40:50  [Apache]  Attempting to start Apache app...
20:40:50  [Apache]  Status change detected: running
20:40:51  [Apache]  Status change detected: stopped
20:40:51  [Apache]  Error: Apache shutdown unexpectedly.
20:40:51  [Apache]  This may be due to a blocked port, missing dependencies, 
20:40:51  [Apache]  improper privileges, a crash, or a shutdown by another method.
20:40:51  [Apache]  Check the "/xampp/apache/logs/error.log" file
20:40:51  [Apache]  and the Windows Event Viewer for more clues 
```

如何修复这些错误？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-23T13:46:12.717

如果您只想让 Apache 运行而不介意它在哪个端口上运行，请执行以下操作：

在 XAMPP 控制面板中，单击位于“日志”按钮旁边的 Apache -“配置”按钮。

从下拉列表中选择“Apache (httpd.conf)”。（记事本应该打开）

执行`Ctrl`+`F`以查找“80”。单击“查找下一个”三次并将行更改`Listen 80`为`Listen 8080`

再次单击“查找下一个”几次，直到看到行将`ServerName localhost:80`其更改为`ServerName localhost:8080`

执行`Ctrl`+`S`保存，然后退出记事本。

在 XAMPP 控制面板中再次启动 Apache，Apache 应该会成功运行。

`http://localhost:8080/`在浏览器地址栏中使用以检查一切是否正常。

**编辑**

此外，您在运行 IIS 时可能会遇到运行 XAMPP 的问题。如果您正在运行 IIS，则可能值得停止服务然后启动 XAMPP。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-09T20:09:17.283

找出哪些其他服务使用端口 80。

我听说 Skype 使用端口 80。检查它是否在端口 80 上在后台运行其他服务器或数据库。

xampp 的两个很好的替代品是[wamp](http://www.wampserver.com/en/)和[easyphp](http://www.easyphp.org/)。其中，wamp 是最用户友好的，它还有一个内置工具，用于检查端口 80 是否正在使用以及当前正在使用哪个服务。

或者禁用iis。众所周知，默认使用端口 80。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-07-19T01:20:41.900

有两种方法可以解决这个问题。

1.  如果你想在另一个端口上运行 Apache 那么：将 xampp/apache/conf/httpd.conf "ServerName localhost:80" 替换为 "ServerName localhost:81" 在第 184 行。之后即使它可能不起作用。然后替换

```
#Listen 0.0.0.0:80
#Listen [::]:80
Listen 80 
```

经过

```
#Listen 0.0.0.0:81
#Listen [::]:81
Listen 81 
```

在第 45 行

2.  如果你想使用端口 80。然后按照这个。在 Windows 8 中，“World Wide Publishing Service 正在使用此端口，停止此服务将释放端口 80，您可以使用此端口连接 Apache。要停止服务，请转到“任务管理器 -> 服务选项卡”，右键单击“全球发布服务”并停止。如果你没有找到那么然后去“运行> services.msc”并再次找到那里并右键单击“World Wide Publishing Service”并停止。

如果你没有找到“World Wide Publishing Service”然后去“运行>>resmon.exe>>网络选项卡>>监听端口”看看哪个进程正在使用端口80

![在此处输入图像描述](../Images/6d733b8a929facbcd5b3820085a7e1da.png)

从“Overview>>CPU”中右键单击该进程并单击“End Process Tree”。如果该过程是系统，则可能是一个关键问题。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-02T16:55:05.237

Skype，尝试关闭它，然后运行 ​​xampp，如果可以，则更改 Skype 端口以停止使用端口 80

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-17T16:01:57.080

看看这个网站：

[http://www.lukebrowning.com/blog/nt-kernel-system-using-port-80/](http://www.lukebrowning.com/blog/nt-kernel-system-using-port-80/)

在我的例子中，它是 SQL Server 报告服务，但其他人已经看到了 IIS 或 Web 部署代理服务。

打开一个 cmd 窗口并运行 services.msc，找到该服务并停止它。然后尝试启动 Apache。如果有效，请禁用其他服务。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-02-03T16:52:01.810

请注意，出现此问题通常有两个原因：

1-端口 80 正忙。

2 端口 443 正忙。

对于其他人所说的第一名，您可以杀死 Skype 和 SQL Server Reporter

> Windows 任务管理器>“服务”选项卡>“服务...”按钮。

但如果它不起作用，可能是因为端口 443，所以试试这个：

如果您使用 VMware，请转到

> Windows任务管理器>“服务”选项卡>“服务...”按钮，找到“VMware Workstation Server”服务，双击它并按“停止”按钮。

无需停止其他 VMware 服务。

然后再次尝试运行 Apache

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-25T01:30:00.960

在 Skype 中注销您的帐户.. 然后在 xampp 控制面板中单击从 Apache 行开始..

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-21T07:46:32.297

就我而言，这是另一回事。一天前，我尝试使用 xampp 的 bitnam 安装 wordpress，但没有成功。当我看到错误日志时，有一个错误：

```
httpd.exe: Syntax error on line 560 of C:/xampp/apache/conf/httpd.conf: Could not open configuration file C:/xampp/apps/wordpress/conf/httpd-prefix.conf: The system cannot find the path specified. 
```

我打开 httpd.conf 发现这一行：

```
Include "C:/xampp/apps/wordpress/conf/httpd-prefix.conf" 
```

我只是用#评论了它，

现在它运行良好。:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-14T14:09:10.967

就我而言，问题是日志文件夹不存在。此文件夹中的 error.log 文件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-06T14:00:49.043

就像 Ianshark 指出的那样，Windows 7 中出现此错误的一个常见原因是**Web 部署代理服务**。

Web 部署工具使管理员能够使用 IIS 管理器将 ASP.NET 和 PHP 应用程序部署到 IIS 服务器。

您可以通过单击“服务”按钮从 XAMPP 控制面板禁用它。如果您更改了 Apache 配置文件中的端口，请将其更改回 80。然后**卸载 Microsoft Web Deploy**，如果您更喜欢更永久的解决方案。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-23T20:54:13.010

你有安装 Bitnami 吗？如果是这样，很可能是通过在 linux 中以管理员或终端身份打开命令提示符来检查这些安装之一，输入此...

```
netstat -b 
```

这将为正在使用的那些进程和端口提供应用程序名称。寻找 :80 或 :443

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-12T04:18:43.133

我有同样的问题。我终于让它工作了。

我成功更改了 apache 端口以侦听其他程序未使用的端口 SSL 和 Skype 使用端口 443

我相信 XAMPP 控制面板有一个错误，我的帖子中有屏幕截图。我在这个网站上没有足够的可信度来上传图片。

我在以下博客文章中用屏幕截图记录了整个内容：

[http://hodentek.blogspot.com/2014/02/one-way-to-handle-port-80-in-use-by.html](http://hodentek.blogspot.com/2014/02/one-way-to-handle-port-80-in-use-by.html) [http://hodentekhelp.blogspot.com/2014/02/on-installing -apache-on-windows-7-64bit.html](http://hodentekhelp.blogspot.com/2014/02/on-installing-apache-on-windows-7-64bit.html) [http://hodentekhelp.blogspot.com/2014/02/do-you-want-to-change-ports-that-skype.html](http://hodentekhelp.blogspot.com/2014/02/do-you-want-to-change-ports-that-skype.html)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-07-13T14:12:55.187

以上都不适合我。这最终对我有用：

```
1) Start Services (Type services in your start > search)
2) Look for Apache services.It was disabled in my case. Enabling it worked for me. 
```

有些人还报告了 Apache 服务的重复列表，这导致它无法启动。如果是这种情况，请删除/禁用与错误路径对应的 Apache 服务之一。

可能需要重新启动 XAMPP。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-07-19T12:45:06.340

就我而言，我只需要以管理员身份运行控制面板

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-01-31T23:43:56.803

只需禁用“万维网发布服务”，它就解决了我的问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-10-24T05:57:58.673

就我而言，这是另一回事。一天前，我尝试使用 xampp 的 bitnami 安装 Magento。我删除了那个模块

我打开 httpd.conf 发现这一行：

```
Include "C:/xampp/apps/magento/conf/httpd-prefix.conf" 
```

我只是用#评论了它，

现在它运行良好。:)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-07-09T09:53:56.223

尝试停止 Apache 和 MySql，然后按以下顺序重新启动它们。

1.  阿帕奇
2.  mysql
3.  ETC...

等待两个服务正确停止，然后再重新启动。太快地打开和关闭它们会产生同样的问题。

灵感来自[lansharks 的回答](https://stackoverflow.com/questions/14245474/apache-wont-run-in-xampp/14383080#14383080)。

# perl - 如何在 dotcloud 上运行简单的 perl 脚本，即不是 psgi 标准

> ID：14245483
> 
> 赞同：1
> 
> 时间：2013-01-09T20:03:16.780
> 
> 标签：perl, dotcloud

为了记录，我真的不知道 perl。我已经在 dotcloud 上部署了 Rails 应用程序。这是我想做的；

目前我为 SaaS 工作。我们在外部共享服务器上运行脚本 (perl/python/php) 来完成我们的软件无法完成的工作。我们需要将脚本移出共享服务器，而 dotcloud 似乎是一个不错的选择。

但是我几乎没有运行 perl 的经验。看起来我不能只移动 perl 脚本，因为 dotcloud 说使用 psgi 标准运行任何 perl；

来自 dotcloud 文档：“Perl 服务可以托管任何与 PSGI 标准兼容的 Perl Web 应用程序。”

我将脚本移至我自己的主机帐户，它可以工作，但运行速度似乎太慢。似乎虚拟主机/服务器是最好的选择，这就是为什么我对 dotcloud 感到兴奋，但由于我没有资格自己修改 perl（即修改它以满足 psgi 标准），我需要另一个选择。

我的问题是 2 倍 - 制作一个简单的 perl 脚本 psgi 标准有多容易/困难，或者是否还有其他限制较少的 perl 虚拟主机选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:38:51.913

如果您只有一个不需要从 Web 服务器提供的普通 perl 脚本，那么您应该使用该`perl-worker`服务。使用该`perl worker`服务适用于普通 perl 脚本，因此您无需担心 psgi，因为这仅适用于 Web 内容。

这是 dotcloud 上 perl worker 页面的链接：http: [//docs.dotcloud.com/0.9/services/perl-worker/](http://docs.dotcloud.com/0.9/services/perl-worker/)

这将使您可以访问普通的 perl 环境，并且您可以运行任何您需要的东西、cron 作业、shell 等。

# javascript - 查看调试时出现未定义错误，尝试创建 DIV

> ID：14245486
> 
> 赞同：0
> 
> 时间：2013-01-09T20:03:21.073
> 
> 标签：javascript

我正在尝试执行下面的 javascript，但出现未定义的错误。我只是想创建一个带有一些文本的 div 并在页面加载时将其放在 span 标签之前。虽然我的代码可能完全不符合要求：

```
<script type = "text/javascript">
function MMinsertPhoneinheader() {
     var div = document.createElement('div');
     div.innerHTML = ("<span> <p> Get Detailed Pricing </p> <br> <p> <b> (866)682-7927 </b></p> </span>");
     div.setAttribute('class', 'cust');
     document.getElementsByTagName('span')[5].appendChild(div);
     break;
};
MMinsertPhoneinheader();
</script> 
```

任何帮助都会挽救生命。对不起菜鸟问题。谢谢！

这是新代码：

```
<script language="javascript">
function MMinsertPhoneinheader() {
  var div = document.createElement('div');
  div.innerHTML = ("<span> <p> Get Detailed Pricing </p> <br> <p> <b> (866)682-7927 </b></p> </span>");
   div.setAttribute('class', 'cust');
   document.querySelector(".toplinks").appendChild(div);
 };
MMinsertPhoneinheader();
</script> 
```

我在第 3 行收到语法错误。

```
var div = document.createElement('div'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:06:35.740

摆脱 break 语句。这导致了你的问题。

另外，我建议使用 document.querySelector 而不是 getElementsByTagName('span')[5]。

那是脆的。使用 document.querySelector()，您可以只使用 css 选择器。

# sass - sass 指南针魔法精灵活动状态

> ID：14245488
> 
> 赞同：2
> 
> 时间：2013-01-09T20:03:34.253
> 
> 标签：sass, compass-sass

我正在使用指南针生成我的图标及其悬停状态。活动状态与悬停状态相同，**我想防止我的精灵图因**重复图标而臃肿。有没有办法让它在与悬停状态相同的坐标中添加一个活动类？

```
 @import 'sprites/*.png';
    @include all-sprites-sprites; 
```

生成：

```
 .sprites-left {
      background-position: 0 -16px;
    }
    .sprites-left:hover, .sprites-left.left_hover, .sprites-left.left-hover {
      background-position: -18px -16px;
    } 
```

我想补充

```
 .sprites-left.active  {
      background-position: -18px -16px;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T01:33:12.297

这与我想出的解决方案一样接近。

```
@import 'sprites/*.png'; // sprites to include
@include all-sprites-sprites; // creates all sprites

// Manually extend each to add active states.
.sprites-engaged.active{ @extend .sprites-engaged:hover; }
.sprites-married.active{ @extend .sprites-married:hover; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:14:53.977

你[读过文档](http://compass-style.org/help/tutorials/spriting/)吗？选择器控制部分涵盖了以下内容：

```
@import 'sprites/*.png';

.sprites-left {
  &:hover, &.active { @include sprites-sprite(name_for_hover) }
  ... etc
} 
```

# java - 在子类的构造函数中注册监听器

> ID：14245489
> 
> 赞同：0
> 
> 时间：2013-01-09T20:03:40.287
> 
> 标签：java, android

我需要`Listener`在我的子类中的继承`final`字段 ( `mCursorLoader`) 上注册 a。我需要在`constructor`我的子类中执行此操作。**最好不要将字段更改为子类`non-final`或在子类中执行任何操作`unRegistering`。**

问题是我的父类`Listener`在其构造函数中注册了它的实现。我需要一种方法来阻止它注册`Listener`然后注册子类`Listener`或取消注册父类`Listener`然后注册子类`Listener`。

很难解释，所以如果需要更多澄清，请告诉我。

```
public abstract class A<T> extends AsyncTaskLoader<List<T>> {

        protected final Listener mListener = new Listener();
        protected final CursorLoader mCursorLoader;
        protected final String mId;

        public A(Context context, String mId) {

                super(context);
                this.mCursorLoader = new CursorLoader(context);
                this.mCursorLoader.registerListener(0, mListener);
                this.mId = mId;

        }

        public class Listener implements OnLoadCompleteListener<Cursor> {

                public void onLoadComplete(final Loader<Cursor> loader, final Cursor cursor) {

                }
        }
}

public abstract class B<T> extends A<T> {

        protected B(Context context, String mId) {

                super(context, mId);

        }

        public class Listener implements OnLoadCompleteListener<Cursor> {

                public void onLoadComplete(final Loader<Cursor> loader, final Cursor cursor) {

                }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:26:35.210

将一个构造函数添加到您的基类（或修改现有的），该构造函数将侦听器作为参数，并注册此侦听器而不是基类侦听器：

```
protected A(Context context, String mId, OnLoadCompleteListener<Cursor> listener) {
    super(context);
    this.mCursorLoader = new CursorLoader(context);
    this.mCursorLoader.registerListener(0, listener);
    this.mId = mId;
} 
```

# ios - UITableViewCell 中的 UISwitch 外观不正确

> ID：14245492
> 
> 赞同：5
> 
> 时间：2013-01-09T20:03:49.087
> 
> 标签：ios, objective-c, uistoryboard, uiswitch

我创建了一个分段`UITableView`并添加了一个包含`UISwitch`. 所有这些都是使用情节提要完成的。但是，在运行应用程序（模拟器/设备）时，`UISwitch`它看起来不像预期的那样（参见附加的屏幕截图）。任何关于为什么会发生这种情况的想法都受到高度赞赏（XCode 4.5.2，iOS 6.0.1）。注意：创建新的 UIStoryboard 并不能解决问题。

![自定义 UITableView 中的 UISwitch](../Images/a43f768f26e282d1a7b5e0fad936abdb.png) ![UISwitch 设置](../Images/c2056fc1cae05334d52758b98caa7f07.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:58:38.980

我刚刚得到了我的问题的答案：我在`UIImageView`设置自定义图层属性（例如`shadowRadius`）上创建了一个类别。在相应的`UIImageView`方法上设置断点，它显示`UISwitch`调用它。

我之前没有达到这一点，因为我`UIImageView`之前只有一个（而且这个应该有自定义属性）。谢谢你们的评论！

# mysql - 用于 VARCHAR -> VARCHAR BINARY 的 Rails 迁移以区分大小写

> ID：14245496
> 
> 赞同：2
> 
> 时间：2013-01-09T20:04:01.007
> 
> 标签：mysql, ruby-on-rails-3

我想将现有的 MySQL 列从`VARCHAR`to`VARCHAR BINARY`更改为区分大小写（请参阅：[https](https://stackoverflow.com/a/3396315/93995) ://stackoverflow.com/a/3396315/93995 ）

什么是正确的迁移语法？我试过了

```
change_column :my_table, :my_column, :binary, :limit => 255 
```

但这试图将其更改为`blob(255)`. 还抱怨：

```
Mysql2::Error: BLOB/TEXT column 'my_column' used in key specification without a key length:   ALTER TABLE `my_table` CHANGE `my_column` `my_column` blob(255) DEFAULT NULL 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:18:45.590

要将单个列更改为区分大小写，您需要直接使用 SQL DDL 将排序规则更改为“utf8_bin”：

```
def up
 execute("ALTER TABLE my_table MODIFY `my_column` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin;")
end 
```

请注意，这仍然使用 'varchar' 类型作为存储，只有排序规则（解释的含义）被定义为 'binary' 以进行比较。另请注意，您可能无法比较具有不同排序规则的列，因此请确保这是您真正想要的。

如果您想让整个表使用特定的排序规则，可以轻松完成：

```
create_table :my_table, :options => 'ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin' do |t|
  t.string :my_column
  t.string :my_other_column
end 
```

# python - python unittest - 使用'buffer'选项来抑制标准输出 - 我该怎么做？

> ID：14245499
> 
> 赞同：8
> 
> 时间：2013-01-09T20:04:06.543
> 
> 标签：python, unit-testing

在 unittest 文档 [ [http://docs.python.org/2/library/unittest.html#unittest.main](http://docs.python.org/2/library/unittest.html#unittest.main) ] 中，我看到描述了以下方法签名：

```
unittest.main([module[, defaultTest[, argv[, testRunner[, testLoader[, exit[, verbosity[, failfast[, catchbreak[, buffer]]]]]]]]]]) 
```

最后一个选项是“缓冲区”。文档解释了有关此选项的以下内容：

> failfast、catchbreak 和 buffer 参数与同名命令行选项具有相同的效果。

命令行选项的文档 [ [http://docs.python.org/2/library/unittest.html#command-line-options](http://docs.python.org/2/library/unittest.html#command-line-options) ] 解释“缓冲区”如下：

> -b, --buffer
> 在测试运行期间缓冲标准输出和标准错误流。通过测试期间的输出将被丢弃。输出在测试失败或错误时正常回显，并添加到失败消息中。

我有以下演示代码，它没有表现出预期的行为：

```
import unittest2

class DemoTest(unittest2.TestCase):
    def test_one(self):
        self.assertTrue(True)

    def test_two(self):
        self.assertTrue(True)

if __name__ == '__main__':
    test_program = unittest2.main(verbosity=0, buffer=True, exit=False) 
```

这个程序的输出是：

```
----------------------------------------------------------------------
Ran 2 tests in 0.000s

OK 
```

事实上，如果我将程序中的最后一行更改为：

```
test_program = unittest2.main(verbosity=0, buffer="hello", exit=False) 
```

我究竟做错了什么？（我尝试使用`unittest`而不是`unittest2`，但没有任何区别。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T20:20:15.253

关键是[*buffer*选项](http://docs.python.org/2/library/unittest.html#cmdoption-unittest-b)会影响测试中的标准输出写入，而忽略 unittest2 的行为。也就是说，你会看到不同之处，如果你添加像这样的字符串

```
print "Suppress me!" 
```

对于任何测试方法，如果您选择 ，此表达式将出现在标准输出上`buffer=False`，而如果您将其设置为 True，它将被抑制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T20:29:02.517

正如我在评论中解释的那样，`buffer`只是缓冲测试代码的输出。这意味着您只能从`unittest2`自身获得输出。它运行良好。（在您的情况下，它的工作也很简单-您的代码不会打印任何内容，因此缓冲区到缓冲区没有任何内容，这就是为什么没有它您会得到相同的结果。）

如果您不想要任何输出`unittest2`，您始终可以使用重定向到的 shell 命令行运行脚本，或从重定向的脚本`/dev/null`导入。`unittest2``sys.stdout`

但通常您实际上想要*读取*该标准输出，而不仅仅是丢弃它。即使您不想在任何地方记录它，您也想检查最后一行是否为`"OK"`，这样您就可以向您的编程团队发送电击或在失败时执行任何操作。否则，通过 运行测试有什么意义`cron`？

# facebook - 使用 facebook graph api 获得低于预期的结果

> ID：14245501
> 
> 赞同：0
> 
> 时间：2013-01-09T20:04:16.067
> 
> 标签：facebook, json, web-services, facebook-graph-api

我正在使用网络服务获取帖子或提要结果

```
$jsonStr = file_get_contents('https://graph.facebook.com/'.$fbName.'/posts?access_token='.$accessToken.'&limit=30'); 
```

我注意到的是，如果我将限制设置为 30 .. 我似乎得到了两个结果。如果我设置为 500，我可能会得到.. 80？并且加载时间会明显更长。这是因为它只向我显示公开帖子但查询所有帖子吗？我想显示尽可能多的帖子，同时将加载时间保持在最低限度..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:16:46.520

Facebook Graph API 使用分页来获得更大的结果。您应该阅读 Facebook Graph API 的分页 API。大多数情况下，由于分页，facebook API 返回的结果较少。

[Facebook 图形 API 分页](http://developers.facebook.com/docs/reference/api/pagination/)

# excel - 计算范围内填充单元格的数量

> ID：14245507
> 
> 赞同：2
> 
> 时间：2013-01-09T20:04:28.227
> 
> 标签：excel, vba, excel-formula

如何计算填充单元格的数量（带有文本/数字或文本+数字的组合）？

我尝试过`=countif(A2:A2000,1=1)`（使用一般标准，例如始终为 1=1），但文本列显示为零 (0)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-10-27T07:07:36.343

我认为对于上面的答案，它应该是

```
Application.WorksheetFunction.CountA(Range("A2:A2000")) 
```

我总是遇到问题而没有提到范围，因为它认为整个范围是一个单一的单元。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T20:40:32.570

公式是`=COUNTA(A2:A2000)`：计算非空白单元格。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-26T22:44:35.217

在 VBA 中它是 WorksheetFunction.CountA("A2:A2000")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-15T07:26:27.787

Dim Coloumncount As Integer Coloumncount = Application.WorksheetFunction.CountA([D1:D100])'计算列“D”中有多少填充单元格

# antlr4 - 检查词法分析器中的前一个/左标记

> ID：14245508
> 
> 赞同：2
> 
> 时间：2013-01-09T20:04:33.943
> 
> 标签：antlr4

例如 ，如何在词法分析器中找到前一个/左标记

```
lexer grammar TLexer;

ID     : [a-zA-Z] [a-zA-Z0-9]*;
CARET  : '^';
RTN    : {someCond1}? CARET ID; // CARET not include this token
GLB    : {someCond2}? CARET ID; // CARET not include this token 
```

ETC

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T17:01:25.323

谢谢，我是这样做的

```
lexer grammar TLexer;

@lexer::members {
    int lastTokenType = 0;
public void emit(Token token) {
    super.emit(token);
    lastTokenType = token.getType();
}
}

CARET  : '^';
RTN    : {someCond1&&(lastTokenType==CARET)}? ID;
GLB    : {someCond2&&(lastTokenType==CARET)}? ID;
ID     : [a-zA-Z] [a-zA-Z0-9]*; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:10:33.810

我查看了 Lexer 的源代码。Lexer 响应 nextToken() 调用（来自解析器）。我还没有发现它会跟踪以前的令牌。并且不能直接访问 CARET。鉴于此输入：

```
xyz ^abc 
```

这个语法：

```
lexer grammar TLexer;

ID     : [a-zA-Z] [a-zA-Z0-9]* {System.out.println("ID ");} ;
CARET  : '^'                   {System.out.println("CARET ");} ;
WS     : [ \r\n] ;
RTN    : CARET ID {System.out.println("RTN " + _tokenStartCharIndex);} ; 
```

输出是：

```
$ antlr4 TLexer.g4 
$ javac TLexer.java 
$ grun TLexer tokens -tokens -diagnostics -trace input.txt 
ID 
RTN 4
[@0,0:2='xyz',<1>,1:0]
[@1,3:3=' ',<3>,1:3]
[@2,4:7='^abc',<4>,1:4]
[@3,8:8='\n',<3>,1:8]
[@4,9:8='<EOF>',<-1>,2:9] 
```

词法分析器为您提供一个类型为 <4> (RTN) 的单一标记作为 input `^abc`。

# arrays - 珀尔。使用直到函数

> ID：14245511
> 
> 赞同：5
> 
> 时间：2013-01-09T20:04:44.557
> 
> 标签：arrays, perl, loops, compare, conditional-statements

我有一个简单的数据文件。文件中的每一行都有四个元素。有些行没有空白条目。其他行有一个第一个条目，其余三个是空白的，或者更确切地说是“填充”了一个空格。它是一个制表符分隔的文件。

输入文件示例：

```
 .
    .
    .
    30  13387412    34.80391242 sSN_FIRST
    30  13387412    34.80391242 sSN5_40
    30.1             
    30.2             
    30.3             
    30.4             
    31  14740248    65.60590089 s32138223_44
    31  14740248    65.60590089 s321382_LAST
    .
    .
    . 
```

重申一下，如果这很重要，我的文件中的“空白”实际上包含一个空格。

我的总体目标是在整个文件中“填写”第二列和第三列（忽略第四列）。为了做到这一点，我需要我的脚本来识别空白的连续行集，加上紧接在前面的行和紧接在连续空白行之后的行。在上面的示例中，这将是第 2 - 7 行。一旦我能做到这一点，我就可以使用已填充的侧翼行中的信息来帮助“填充”中间行中缺失的条目。

我一直在试验这个`until`功能，但我没有成功地将它与一个读取数据线的循环耦合。例如，我可以阅读这些行并找到空白行：

```
open( my $FILE, "<$mapfile" );
my @file = <$FILE>;
close $FILE;

for ( my $i = 1 ; $i < scalar @file ; $i++ ) 
    {
     my @entries = split( '\t', $file[ $i ] );
     if ( $entries[ 1 ] =~ m/ / ) 
        {
         print $file[ $i ]."\n";
        }
    } 
```

但我正在尝试使用该`until`功能，以便读取行并搜索我正在寻找的连续行集（“空白”行加上两个侧面的“完整”行）。例如：

```
until ( $file[ a line ] =~ m/ / && $file[ another line ] =~ m/ / )   
    {
     my linear interpolation here;
    } 
```

谁能给我一个提示，告诉我如何结合一种方法来读取数组并比较行以在文件中找到我需要的集合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:26:17.150

你想要实现的是一个缓存算法：记住（缓存）以前的值，如果没有新的出现就使用它们。你甚至不需要正则表达式。:)

除了缓存旧值之外，您还需要缓存其间的行。由于您只需要标签，因此您只需要保留这些标签。然后，当您到达下一个完整行时，您可以进行插值并发出结果。

这就是我的做法。它比我原来的例子复杂一点，但同样的原则适用：只存储中间行，然后在你到达终端时发出结果。

```
use strict;
use warnings;
use feature 'say';

# Get start conditions, and cache those numbers.

sub read_block
{
   my $line = <DATA>;
   return 1 unless defined $line; # we're done if nothing more to read

   # Process and store data from the first line in the block.
   chomp $line;
   my ($last_label, $last_num1, $last_num2, $last_label2) = split /\t/, $line;

   # Keep reading lines until we find the end of the block.
   my @label_cache;
   my $found_last = 0;
   my ($label1, $num1, $num2, $label2);
   while (!$found_last)
   {
      $line = <DATA>;
      chomp $line;
      ($label1, $num1, $num2, $label2) = split /\t/, $line;
      if (defined $num1 && defined $num2)
      {
         $found_last = 1; # We have final numbers!  We can interpolate now.
      }
      else
      {
         push @label_cache, $label1; 
      }
   }

   # Begin display.  Show the first line of the block.
   say "$last_label\t$last_num1\t$last_num2\t$last_label2";

   # Calculate the slope for interpolation: (last - first) / difference
   my $slope1 = ($num1 - $last_num1) / (@label_cache + 1);
   my $slope2 = ($num2 - $last_num2) / (@label_cache + 1);
   my $distance = 0;

   # Display each label and the lines inside.
   foreach my $label (@label_cache)
   {
      ++$distance;
      say $label, "\t",
          $slope1 * $distance + $last_num1, "\t",
          $slope2 * $distance + $last_num2;
   }

   # Display the final line in the block.
   say "$label1\t$num1\t$num2\t$label2";

   # Not done yet, so return a 'false' value.
   return 0;
}

# Main part of the script

my $done = 0;
while (! $done)
{
   $done = read_block();
}

__DATA__
a   3   4   end
e
f
g
h
i
k   15  26  start
k   15  26  end
o
p
q
r
s   3   5   start
s   3   5   end
v
w
x
y   14  16  start 
```

发出：

```
a       3       4       end
e       5       7.66666666666667
f       7       11.3333333333333
g       9       15
h       11      18.6666666666667
i       13      22.3333333333333
k       15      26      start
k       15      26      end
o       12.6    21.8
p       10.2    17.6
q       7.8     13.4
r       5.4     9.2
s       3       5       start
s       3       5       end
v       5.75    7.75
w       8.5     10.5
x       11.25   13.25
y       14      16      start 
```

然后，您当然可以进行所需的任何类型的数字舍入或格式化。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:03:32.860

也许以下内容会有所帮助：

```
use strict;
use warnings;

my ( $last, $oneColumn );

my @file = <DATA>;

for my $line (@file) {
    my @entires = split ' ', $line;

    if ( @entires == 4 ) {
        if ($oneColumn) {
            print $line;    # Succeeding line
            $oneColumn = 0;
        }
        $last = $line;
        next;
    }

    print $last if $last;    # Preceeding line
    undef $last;
    print $line;             # One-column line
    $oneColumn = 1;

}

__DATA__
30  13387412    34.80391242 sSN_FIRST
30  13387412    34.80391242 sSN5_40
30.1             
30.2             
30.3             
30.4             
31  14740248    65.60590089 s32138223_44
31  14740248    65.60590089 s321382_LAST 
```

输出：

```
30  13387412    34.80391242 sSN5_40
30.1
30.2
30.3
30.4
31  14740248    65.60590089 s32138223_44 
```

一个“完整”的行应该在 中包含四个元素`@entries`，这就是要`if ( @entires == 4 )`查找的内容。如果找到，只有在打印了一列行时，它才会将其打印为后续行。然后，它保存该行。`if`仅当行没有三个选项卡时，才会在外部打印行。

以下较短的脚本产生相同的输出：

```
use strict;
use warnings;

my @file = <DATA>;

for ( my $i = 1 ; $i < $#file ; $i++ ) {

    if ( $file[$i] =~ /(?:\t\s){3}/ ) {
        print $file[ $i - 1 ];    # Preceeding line

        while ( $file[$i] =~ /(?:\t\s){3}/ and $i < $#file ) {
            print $file[ $i++ ]    # One-column line
        }

        print $file[$i];           # Succeeding line
    }
}

__DATA__
30  13387412    34.80391242 sSN_FIRST
30  13387412    34.80391242 sSN5_40
30.1             
30.2             
30.3             
30.4             
31  14740248    65.60590089 s32138223_44
31  14740248    65.60590089 s321382_LAST 
```

匹配三组连续的`/(?:\t\s){3}/`制表符和空格，它们只能在只有一列的行上找到。当它找到该模式时，它会打印前一行，然后进入一个`while`循环，打印单列行，直到找到整行或它位于数组的末尾。最后，打印下一行。

# php - 保留对 mysql 标识符的引用是否是故障排除？

> ID：14245515
> 
> 赞同：0
> 
> 时间：2013-01-09T20:05:01.347
> 
> 标签：php, mysql, performance

我的网络服务器遇到这样的错误：

> 服务器：example.com 用户：yyy MySQL 连接限制：当前 MySQL 连接：81

我正在调查这个问题的原因。

PHP手册说：

> [释放资源](http://php.net/manual/en/language.types.resource.php#language.types.resource.self-destruct)
> 
> 感谢 PHP 4 的 Zend 引擎引入的引用计数系统，自动检测到不再引用它的资源，并被垃圾收集器释放。因此，很少需要手动释放内存。

那么，对于页面显示时间超过 3 秒（通常）的网站来说，保留对 MySQL 标识符的引用是否会成为问题？

我像这样管理 MySQL 连接：

1 - 我保留一个全局变量`$LINK`作为对 MySQL 资源的引用

```
//MySQL connection
$LINK = 0;
function db_connect(){
    //get variables
    global $LINK,$CONF;

    if($LINK == 0){
        $LINK = @mysql_connect($CONF['host'], $CONF['user'], $CONF['password'])){
    }
} 
```

2 - 我使用这样的功能来做查询：

```
function db_query($sql){
    global $LINK,$CONF,$NB_QUERIES,$TEMPS_QUERIES,$queries, $CLOSED;

    if(db_connect()){
        //do some debug stuff if needed

        //execute the query
        $result = @mysql_query($sql,$LINK);

        //do some other debug stuff if needed

        return $result;
    } else {
        return 0;
    }
} 
```

当出现此类错误时，我是在寻找正确的方向还是有其他一些事情需要首先考虑？

# android - 更改 ListView、数据库、android 中的字体颜色

> ID：14245516
> 
> 赞同：1
> 
> 时间：2013-01-09T20:05:01.653
> 
> 标签：android, listview, colors

我正在使用这个 [android 列表视图教程](http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example)（它展示了如何在列表视图中显示数据库条目），我正在考虑从数据库中更改条目的颜色，是否可以更改每一行的颜色？例如德国将是红色，西班牙是黄色等，颜色将取决于字符串？

```
 // map each name to a TextView
        String[] from = new String[] { "countryname" };
        int[] to = new int[] { R.id.countryTextView };

 conAdapter = new SimpleCursorAdapter(Countrylist.this, R.layout.country_view, null, from, to);
        setListAdapter(conAdapter); // set adapter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:10:45.237

您可以通过自定义适配器来实现，

在自定义适配器 getView 方法中，您可以根据自己的情况为 textView 设置背景

请找到参考资料，

[http://android.cyrilmottier.com/?p=454](http://android.cyrilmottier.com/?p=454)

# sql - SQL .. where 条件下的别名

> ID：14245518
> 
> 赞同：1
> 
> 时间：2013-01-09T20:05:15.683
> 
> 标签：sql, oracle

> **可能重复：**
> [在 WHERE 子句中使用别名](https://stackoverflow.com/questions/356675/using-an-alias-in-a-where-clause)

请让我知道为什么我不能在 where 条件下使用别名来进行下面的查询..

```
SELECT * FROM (        
    SELECT USER_NAME AS "User ID",
         OLD_VALUE_STRING as "Status",
         NVL(lag(ENTRY_DATE) over (partition by user_name order by ENTRY_DATE), trunc(Sysdate-1)) as "Begin", 
           ENTRY_DATE as "End"
         FROM (SELECT U.USER_NAME,
                 U.FULL_NAME,
                 UH.OLD_VALUE_STRING,
                 UH.NEW_VALUE_STRING,
                 UH.ENTRY_DATE,
                 US.IS_WORKING
            FROM VIW.USER_HISTORY UH, VIW.USERS U, VIW.USER_STATUS US
           WHERE U.ID = UH.USER_ID
             AND UH.EVENT_ID = VIW.EVENT_PKG.GET_ID('UPD_USR_STATUS')
             AND UH.NEW_VALUE_STRING = US.ABBREVIATION
             AND UH.ENTRY_DATE >= TO_DATE('01082013', 'MMDDYYYY')
             AND UH.ENTRY_DATE <= TO_DATE('01092013', 'MMDDYYYY')
           ORDER BY U.USER_NAME, UH.ENTRY_DATE) 

    UNION        

    SELECT USER_NAME AS "User ID",
         NEW_VALUE_STRING as "Status",
         ENTRY_DATE AS "Begin", 
           lead(ENTRY_DATE) over (partition by user_name order by ENTRY_DATE) as "End"
           FROM (SELECT U.USER_NAME,
                 U.FULL_NAME,
                 UH.OLD_VALUE_STRING,
                 UH.NEW_VALUE_STRING,
                 UH.ENTRY_DATE,
                 US.IS_WORKING
            FROM VIW.USER_HISTORY UH, VIW.USERS U, VIW.USER_STATUS US
           WHERE U.ID = UH.USER_ID
             AND UH.EVENT_ID = VIW.EVENT_PKG.GET_ID('UPD_USR_STATUS')
             AND UH.NEW_VALUE_STRING = US.ABBREVIATION
             AND UH.ENTRY_DATE >= TO_DATE('01082013', 'MMDDYYYY')
             AND UH.ENTRY_DATE <= TO_DATE('01092013', 'MMDDYYYY')
           ORDER BY U.USER_NAME, UH.ENTRY_DATE)               
)  as innerTable
           WHERE Status <>'LOGGED_OUT'     
           ORDER BY 1,3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:11:41.510

FROM 和 JOINS 和 WHERE 中的所有内容都用于为 SELECT 生成所有内容。所以你不能在 WHERE 中使用来自 SELECT 的别名，因为 WHERE 在逻辑上是优先的。呈现给 SELECT 的行出现在 WHERE 已应用之后。

所以`Status`根本不知道 WHERE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:34:27.997

我自己找到了解决方案。谢谢你的时间。

```
SELECT * FROM (        
    SELECT USER_NAME AS "User ID",
         OLD_VALUE_STRING as "STATUS",
         NVL(lag(ENTRY_DATE) over (partition by user_name order by ENTRY_DATE), trunc(Sysdate-1)) as "Begin", 
           ENTRY_DATE as "End"
         FROM (SELECT U.USER_NAME,
                 U.FULL_NAME,
                 UH.OLD_VALUE_STRING,
                 UH.NEW_VALUE_STRING,
                 UH.ENTRY_DATE,
                 US.IS_WORKING
            FROM VIW.USER_HISTORY UH, VIW.USERS U, VIW.USER_STATUS US
           WHERE U.ID = UH.USER_ID
             AND UH.EVENT_ID = VIW.EVENT_PKG.GET_ID('UPD_USR_STATUS')
             AND UH.NEW_VALUE_STRING = US.ABBREVIATION
             AND UH.ENTRY_DATE >= TO_DATE('01082013', 'MMDDYYYY')
             AND UH.ENTRY_DATE <= TO_DATE('01092013', 'MMDDYYYY')
           ORDER BY U.USER_NAME, UH.ENTRY_DATE) 

    UNION        

    SELECT USER_NAME AS "User ID",
         NEW_VALUE_STRING as "STATUS",
         ENTRY_DATE AS "Begin", 
           lead(ENTRY_DATE) over (partition by user_name order by ENTRY_DATE) as "End"
           FROM (SELECT U.USER_NAME,
                 U.FULL_NAME,
                 UH.OLD_VALUE_STRING,
                 UH.NEW_VALUE_STRING,
                 UH.ENTRY_DATE,
                 US.IS_WORKING
            FROM VIW.USER_HISTORY UH, VIW.USERS U, VIW.USER_STATUS US
           WHERE U.ID = UH.USER_ID
             AND UH.EVENT_ID = VIW.EVENT_PKG.GET_ID('UPD_USR_STATUS')
             AND UH.NEW_VALUE_STRING = US.ABBREVIATION
             AND UH.ENTRY_DATE >= TO_DATE('01082013', 'MMDDYYYY')
             AND UH.ENTRY_DATE <= TO_DATE('01092013', 'MMDDYYYY')
           ORDER BY U.USER_NAME, UH.ENTRY_DATE)               
) 
           WHERE STATUS <>'LOGGED_OUT'     
           ORDER BY 1,3 
```

# node.js - Passport.js 如何处理会话？

> ID：14245519
> 
> 赞同：3
> 
> 时间：2013-01-09T20:05:31.413
> 
> 标签：node.js, session, express, passport.js

我无法理解 Web 应用程序的会话概念。我正在使用 Express 3.0 运行 Node.js 服务器。

## 要求：

*   为每个登录的用户创建一个会话

*   存储此会话并将其用于验证用户是否已登录（防止两台设备同时使用同一用户）

*   限制对某些页面的访问（通过将会话 ID 与其他一些数据相匹配）

护照存储会话在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:29:05.180

它将用户会话（使用 express 或 connect）存储在`req.user`.

请记住，这与 express 会话中间件不同，后者可以存储您想要的任何内容`req.session`。

要使用护照保持用户会话，请使用护照的中间件：

```
app.use(express.session({ secret: 'keyboard cat' }));
app.use(passport.initialize()); 
```

然后像这样访问用户：

```
function someRoute(req, res, next) {
  // req.user = the user of this session
} 
```

# docpad - 如何使用 DocPad 部署不在服务器根目录的站点？

> ID：14245520
> 
> 赞同：3
> 
> 时间：2013-01-09T20:05:31.787
> 
> 标签：docpad

我正在使用 DocPad 制作一个演示站点，我想将它部署在例如： [http](http://www.example.com/demo/) ://www.example.com/demo/ 但是当我使用时`docpad generate --env static`，链接是相对于服务器的根目录而不是演示目录所以链接已损坏。我能做些什么 ？是否有要在某处声明的元数据？

编辑：在这种情况下，我使用 Twitter Bootsrap 框架，因此例如默认布局中主导航中的链接如下所示：

```
<div class="nav-collapse collapse">
  <ul class="nav">
    <% for document in @getCollection('pages').toJSON(): %>
      <li class="<%= 'active'  if @document.url is document.url %>">
        <a href="<%= document.url %>"><%= document.title %></a>
      </li>
    <% end %>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:25:16.597

我写了一个小插件来完成这项工作，可能有更好的解决方案，但它工作正常：

```
# Export Plugin
module.exports = (BasePlugin) ->
  # Define Plugin
  class absolutePathPlugin extends BasePlugin
    # Plugin Name
    name: 'absolutepath'
    config:
      url: "/"

    renderAfter: (opts,next) ->
      docpad = @docpad
      if 'static' in docpad.getEnvironments()
        docpad.log 'debug', 'Writing absolute urls'
        href = 'href="' + @config.url
        src = 'src="' + @config.url
        database = docpad.getCollection('html')
        database.forEach (document) ->
          content = document.get('contentRendered')
          if /href="\//.test(content)
            content = content.replace(/href="\//g, href)
          if /src="\//.test(content)
            content = content.replace(/src="\//g, src)
          document.set('contentRendered',content)
        next()?
      else
        next()?

      # Chain
      @ 
```

在我的`docpad.coffee`文件中，我只需要配置 url，如果您使用 cleanUrls 插件，则必须调整 getRedirectTemplate 函数以考虑绝对 url：

```
plugins:
  absolutepath:
    url: "http://www.example.com/demo/"
  cleanurls:
    getRedirectTemplate: (document) ->
      absolutepath = docpadConfig.plugins.absolutepath.url.slice(0, - 1) 
      """
      <!DOCTYPE html>
      <html>
        <head>
          <meta charset="utf-8">
          <title>#{document.get('title') or 'Redirect'}</title>
          <meta http-equiv="REFRESH" content="0;url=#{absolutepath + document.get('url')}">
        </head>
        <body>
          This page has moved. You will be automatically redirected to its new location. If you aren't forwarded to the new page, <a href="#{absolutepath + document.get('url')}">click here</a>.
        </body>
      </html>
      """ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T17:42:36.037

另一种选择是将所有绝对 URL 转换为相对 URL，以便站点从任何路径前缀 ( `/`,`/path/`或`/some/other/path/`) 工作而无需重建。想想具有自定义域的 gh-pages。

这是在静态文档生成后对 HTML 和 CSS 进行转换[的繁重任务。](https://github.com/hurrymaplelad/grunt-relative-root)它目前建立在受@Dharma 的 docpad 插件启发的正则表达式替换之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:48:31.107

这是 DocPad 可以加强的一个领域。

到目前为止，人们解决这个问题的最流行的方式是在`<%- @site.url+@document.url %>`任何地方使用，但是由于它的挑剔性质，这当然不是理想的。有一个要点在这里更详细地展示了这一点：[https ://gist.github.com/3939146](https://gist.github.com/3939146)

也许 DocPad 需要做的是`absoluteUrl`为文件/文档添加一个属性，该属性是从`site.url`自动生成的。然后我们可以这样做`<%- @document.absoluteUrl %>`。在这里为此创建了一个问题：[https ://github.com/bevry/docpad/issues/402](https://github.com/bevry/docpad/issues/402)

# ios - UIButton 背景图像不填充按钮框架

> ID：14245522
> 
> 赞同：1
> 
> 时间：2013-01-09T20:05:40.430
> 
> 标签：ios, uibutton, interface-builder

我有一个按钮，我必须在其中模仿`UISegmentedControl`. 我有想要用作按钮背景图像的图像，但它没有填充按钮的矩形。

我希望按钮的尺寸为 h=30，w=100，并且我有原始图像，在将图像添加到 Interface Builder 之前缩放图像不是问题。如果我将图像（在 GIMP 中）缩放到我想要的精确尺寸（对于视网膜和非视网膜），我仍然会遇到同样的问题。

![在此处输入图像描述](../Images/da8a5ad0980954705a1ceb62af277a6e.png)

我将如何获取按钮的背景图像以填充按钮的矩形。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:31:50.163

解决方案比我想象的要简单得多，记住我微薄的 Photoshop 技能。没有必要深入研究`UIButton`. 我提供的图像具有比可见图像更大的透明背景。将图像裁剪为仅可见部分是一件简单的事情。

“最简单的解决方案通常是最好的”的另一个教训。

# java - JPanel 和组合框上的背景图像

> ID：14245523
> 
> 赞同：2
> 
> 时间：2013-01-09T20:05:44.347
> 
> 标签：java, swing, combobox, background-image

我想知道是否可以将创建的组合框放置在 JPanel 上的背景图片之上。但是，我正在尝试这样做，我认为背景图像与我的组合框重叠，因此它不会出现。任何人都知道在顶部带有组合框的 JPanel 上放置背景图像并使用框布局进行定位的一种干净方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:02:03.447

我认为您应该使用 setComponentZOrder() 方法。

这是一个例子：[http ://weblogs.java.net/blog/2009/01/21/swing-internals-paint-order](http://weblogs.java.net/blog/2009/01/21/swing-internals-paint-order)

（查看 JavaDoc 以获取更多详细信息：[setComponentZOrder() 方法](http://docs.oracle.com/javase/6/docs/api/java/awt/Container.html#setComponentZOrder%28java.awt.Component,%20int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:13:21.830

另一种可能更常用的方法是让您覆盖`JPanel` `paintComponent`并将图像直接绘制到`Graphic`s 对象：

```
JFrame frame=...;

final BufferedImage bg=ImageIO.read(new URL("http://cs.anu.edu.au/student/comp6700/icons/DukeWithHelmet.png"));

JPanel p=new JPanel() {
    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2d=(Graphics2D)g;
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);

        g2d.drawImage(bg,0,0,null);
    }

    @Override
    public Dimension getPreferredSize() {//so our JPanel will fit the image entirely
        return new Dimension(bg.getWidth(),bg.getHeight());
    } 
};

frame.add(p);
frame.pack();
frame.setVisible(true); 
```

# assembly - 就 CPU 处理的指令而言，时钟速率决定什么？

> ID：14245524
> 
> 赞同：0
> 
> 时间：2013-01-09T20:05:46.743
> 
> 标签：assembly, cpu, clockrates

CPU处理指令与石英晶体的振荡频率之间，我的理解似乎存在差距。CPU 的频率究竟如何影响程序运行的速度？时钟频率与给定时间内处理的指令数之间是否存在关系？

示例：`mov R0, #1`。假设这条指令需要一个时钟周期，这是否需要晶体的一次振荡，或者它不会像那样工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:51:06.687

时钟频率是对处理器速度的一个非常非常差的估计。在过去（2000 年代之前？）的日子里，时钟频率是对速度的一个很好的估计。更高的时钟频率总是意味着更好的性能。然而，这些天来，事实并非如此。您可以拥有一个需要 20 个时钟周期来执行任何操作的 4GHz 处理器，它比在单个时钟周期内执行所有操作的 1GHz 处理器要慢得多。在过去的几年里，这条指令：时钟周期比的东西变得更加复杂。现在，需要考虑 L1 和 L2 缓存。如果缓存未命中，通常需要一两个额外的时钟周期。然后是乱序执行和优化机制，可能导致除法指令占用不到 1（有点）到 10 个时钟周期。

基本上，不要。除非您正在研究简单的嵌入式（即，不是 ARM 或 x86）架构，否则时钟频率与指令/秒几乎没有关系。当然，两个等效的处理器，其中一个使用更高的时钟，理论上应该每秒产生更高的指令，但任何人都猜测每秒有多少指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T20:38:49.427

不是，这在很大程度上取决于特定的处理器设计。粗略地说，在 70 年代末和 80 年代，微处理器需要多个时钟周期来执行一条指令。RISC 处理器在 90 年代达到了鼎盛时期，他们的重点确实是对一条指令使用单个周期，并在必要时简化指令集以实现这一目标。很大程度上被 2000 年代具有多个执行内核的处理器设计所取代，允许每个时钟周期停用一条以上的指令。

时钟电路也有类似的发展。现代处理器使用频率相对较低的振荡器并使用片上乘法器来达到千兆赫范围。并动态改变该频率。

# php - 使用 javascript/AJAX 的 PHP Cronjobs

> ID：14245527
> 
> 赞同：2
> 
> 时间：2013-01-09T20:06:09.100
> 
> 标签：php, javascript, ajax, cron, backup

我有一个运行数据库备份并在没有任何特定 html 输出的情况下压缩它的 php 脚本。此脚本包括时间检查，以避免在 db 中存储的指定延迟之前执行。现在的问题是我不能使用服务器 cronjob 任务，因为网络服务器不支持它。

所以我会创建一个 javascript 函数，它应该在每次访问时调用 php 脚本（是的，这对我的目的来说已经足够了），但不会延迟访问页面的用户，因为它需要大约 1 分钟才能结束该过程。是否可以在不等待响应的情况下运行脚本？当用户会话终止时，一个 php 脚本也可以继续运行吗？

我认为类似于： [http ://drupal.org/project/poormanscron](http://drupal.org/project/poormanscron)

提前致谢

**编辑：** 解决方案1（仅限php）：将其放在我的输出之前：

```
public static function cronjob() {
        ignore_user_abort(true); // optional
        session_write_close();//close session file on server side to avoid blocking other requests
        header("Content-Encoding: none");//send header to avoid the browser side to take content as gzip format
        header("Content-Length: ".ob_get_length());//send length header
        header("Connection: close");//or redirect to some url: header('Location: http://www.google.com'); 
        ob_end_flush();flush();//really send content, can't change the order:1.ob buffer to normal buffer, 2.normal buffer to output
        //fastcgi_finish_request(); // important when using php-fpm!
        // Do processing here 
        sleep(5);
        require_once("./cron_job.php");
        exit();
}
        ob_start(); // will be closed in backup function
        register_shutdown_function('cronjob'); 
```

解决方案 2（使用 javascript）：

1）在里面创建一个包含你的 cronjobs 的文件

2）将此javascript代码放入您的html中：

```
<script type="text/javascript">
    // cron job
    $.get('./cron_job.php');
</script> 
```

这些方法不会影响用户请求时间；）

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:13:06.250

您可以让您调用的 PHP 脚本模拟连接的结束。这意味着它可以向用户发送一些任意输出，然后强制用户的连接关闭，但仍保持服务器端运行。

请参阅以下文章： http: [//php.net/manual/en/features.connection-handling.php](http://php.net/manual/en/features.connection-handling.php)

评论中有一些例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:15:44.943

在 PHP 端，您可以使用 Connection HTTP 标头告诉浏览器不要等待更多数据。有关更多详细信息，请参阅 [https://www.zulius.com/how-to/close-browser-connection-continue-execution/](https://www.zulius.com/how-to/close-browser-connection-continue-execution/)。

# c++ - 访问 .net 表单主循环，或每帧触发的事件

> ID：14245530
> 
> 赞同：0
> 
> 时间：2013-01-09T20:06:16.577
> 
> 标签：c++, .net, event-loop

我使用 API 制作了一个应用程序，允许我创建自己的事件循环。我正在尝试使用 .NET 表单来转换此应用程序以获得相同的效果。它基本上看起来像这样：

```
int main()
{
    InitializeComponents();
    While(!quitting()){
        updateComponents();
        renderComponents();
    }
    terminateComponents();
    return 0;
} 
```

是否可以访问表单的主循环？

或者是否存在每帧触发的事件？有了这个，例如，我可以计算每秒的帧数。此事件不必由 Form 调用，甚至可能由 System 调用，因此您甚至可以将它们与服务、应用程序和 Web 一起使用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:01:56.030

当您的程序中什么都没有发生时，它什么也不做，所以在空闲的应用程序中没有真正的帧。

这就是为什么会有这个`Application.Idle`事件。每次应用程序完成它必须做的任何事情时都会发生这种情况。

像这样的东西：

```
//somewhere in the initialization function:
Application.Idle += OnIdle;

void OnIdle(object sender, EventArgs e)
{
    updateComponents();
    renderComponents();
} 
```

注意：根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.idle.aspx)，您将来必须将其分离：

```
//finalization function
Application.Idle -= OnIdle; 
```

# javascript - 未捕获的类型错误：对象不是函数

> ID：14245531
> 
> 赞同：2
> 
> 时间：2013-01-09T20:06:28.243
> 
> 标签：javascript, requirejs

我在我正在处理的网站上使用 require ，在结帐时，我遇到了问题。我正在尝试更改信用卡图像以显示激活的卡号是他们输入的任何数字。

但是，每次按下一个键时，我都会收到此错误：

```
Uncaught TypeError: object is not a function 
```

它说它来自我的“控制器”的第 12 行，即：

```
var chkCard = new CreditImage($(this).val(), '.icon-credit-cards'); 
```

未捕获的类型错误：对象不是函数（重复 3 次）

这是我的“演示者”，又名 assets/scripts/presenters/CreditImage.js

```
require(
    [
        'jquery'
    ],
    function ($) {
        "use strict";

        var CreditImage = function ($number, $el) {
            // Match and define
            var visa = $number.match(/^4[0-9]{12}(?:[0-9]{3})?$/);
            var mastercard = $number.match(/^5[1-5][0-9]{14}$/);
            var amex = $number.match(/^3[47][0-9]{13}$/);
            var discover = $number.match(/^6(?:011|5[0-9]{2})[0-9]{12}$/);
            var matched;

            // Create matched var
            if (visa) {
                matched = "visa";
            } else if (mastercard) {
                matched = "mastercard";
            } else if (amex) {
                matched = "amex";
            } else if (discover) {
                matched = "discover";
            }

            if (matched) {
                // Highlight the matched credit card
                $("."+$el+":not("+$el+"-" + matched + ")").addClass($el);
                $("."+$el).addClass($el+"-" + matched);
            } else {
                // No match, highlight them all
                $(".+$el).removeClass().addClass($el);
            }

            return matched;
        }
    }
); 
```

这是“控制器”：

```
require(
    [
        'jquery',
        'assets/scripts/presenters/CreditImage'
    ],
    function ($, CreditImage) {
        'use strict';
        $(function () {         
            // Credit card validation
            $("#add-cc-card-number").bind("keyup", function () {

                var chkCard = new CreditImage($(this).val(), 'icon-credit-cards'));

            });

        });
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:13:42.327

我看到了两个问题，一个足以阻止您的代码工作。

**范围问题#1**

`CreditImage()`对于在其中声明的匿名函数是私有的。现在，老实说，我对 requirejs 了解不多，但是不可能从其父函数外部访问这种局部范围的函数。

您需要检查 requirejs 代码的示例，以了解其他人如何将其函数设计为可在单独的 requirejs 调用之间调用（或者他们可能只使用一个调用？）。或者也许可以找到一些好的教程或博客文章。

无论如何，你现在拥有它的方式是行不通的。

**范围问题 #2**

您的第二个代码块具有`CreditImage`作为参数。这意味着在函数内部，对该名称的引用将始终引用参数，并且永远不能引用任何外部作用域的函数或变量。同样，我对requirejs不熟悉，但是您确定它是将`CreditImage`函数传递给`CreditImage`参数吗？

使用 Chrome 或安装了 Firebug 的 Firefox，添加`console.log(CreditImage);`到您的下部函数中以查看正在传递的内容。至少在 Windows 中，F12 会调出调试工具。从那里找到控制台并运行您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:37:30.873

尝试插入 document.domain ="yourDomain"; 作为页面中的参数

# java - 在 Java 中将对象转换为数组

> ID：14245533
> 
> 赞同：1
> 
> 时间：2013-01-09T20:06:32.247
> 
> 标签：java, arrays, casting

> **可能重复：**
> [如何在 Java 中将对象数组转换为字符串数组](https://stackoverflow.com/questions/1018750/how-to-convert-object-array-to-string-array-in-java)

我正在接收一个对象并将其转换为一个字符串数组，如下所示：

```
Object values[] = (Object[])request.getSession().getAttribute("userList");
String[] tmp = new String[values.length];
for(int i = 0; i < tmp.length; ++i) {
     tmp[i] = (String) values[i];
     out.println(tmp[i]);
} 
```

有没有更好更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T20:09:19.267

为什么不直接铸造？

```
String values[] = (String[])request.getSession().getAttribute("userList"); 
```

# jsp - JSP 的文件命名约定

> ID：14245535
> 
> 赞同：23
> 
> 时间：2013-01-09T20:06:34.250
> 
> 标签：jsp, naming-conventions, filenames

JSP 文件是否有行业标准的命名约定？

我遇到了来自不同来源的三个约定：

1.  全小写（**thisismyfile.jsp**）

2.  首字母小写的驼峰式 ( **thisIsMyFile.jsp** )

3.  首字母大写的驼峰式 ( **ThisIsMyFile.jsp** )

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-09T20:13:13.047

**更新答案 - 2019**

由于首先回答了这个问题，因此 Oracle 似乎在他们的文档中添加了一个命名约定部分：[https ://www.oracle.com/technetwork/articles/javase/code-convention-138726.html](https://www.oracle.com/technetwork/articles/javase/code-convention-138726.html)

> **JSP 名称**
> 
> JSP（文件）名称应始终以小写字母开头。名称可能由多个单词组成，在这种情况下，单词紧挨着放置，每个单词都以大写字母开头。

所以`thisIsMyFile.jsp`（上图）是最符合约定的选择。

* * *

**2013年的原始答案**

这是我能找到的最接近官方命名约定的东西：[http](http://www.oracle.com/technetwork/articles/javase/code-convention-138726.html) ://www.oracle.com/technetwork/articles/javase/code-convention-138726.html 。

Sun/Oracle 似乎对文件名没有意见。

我的 2 美分：我更喜欢全部小写。它最大限度地减少了移植问题的可能性。例如，从 Windows 移植到 Unix（区分大小写的操作系统）可能会导致大小写问题。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-23T18:30:37.527

> JSP（文件）名称应始终以小写字母开头。名称可能由多个单词组成，在这种情况下，单词紧挨着放置，每个单词都以大写字母开头。JSP 名称可以只是一个简单的名词或一个短句。应该避免仅使用动词的 JSP 名称，因为它不能向开发人员传达足够的信息。

示例：performLogin.jsp

这是完整的参考： [http ://www.oracle.com/technetwork/java/namingconventions-139351.html](http://www.oracle.com/technetwork/java/namingconventions-139351.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-30T03:15:01.073

另一方面，jsp 最终仍然是一个 Java 文件，应该相应地命名。

```
performLogin.jsp -> PerformLogin.jsp 
```

在您需要通过 JSP 名称解析接口或类名称的情况下，它也会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-03T15:13:39.617

根据[IBM](https://www.ibm.com/support/knowledgecenter/SS6PEW_9.4.0/com.ibm.help.custom.consolejsp.doc/JSP_Conventions_JSP_FileDir.html)的说法，jsp 文件应全部小写并用下划线（“_”）字符分隔。

例如：`orderline_search_bydate.jsp`

# javascript - imacros选择文本并删除它？

> ID：14245538
> 
> 赞同：0
> 
> 时间：2013-01-09T20:06:43.593
> 
> 标签：javascript, firefox, imacros

iMacros 可以选择 text int 文本框并删除，以便以后可以用另一个填充文本吗？

我尝试使用 CONTENT= 命令，但没有成功。

# c# - 从多台服务器的sql数据库中获取数据

> ID：14245539
> 
> 赞同：0
> 
> 时间：2013-01-09T20:06:51.997
> 
> 标签：c#, sql, sql-server, database-connection

我计划设计一个应用程序，该应用程序将从位于不同服务器的公共数据库中获取数据。

前任：

*   服务器 SQLSRV001 中的数据库 A
*   服务器 SQLSRV002 中的数据库 A
*   ETC

我有一个 sql 选择查询，它将在位于不同服务器的数据库 A 中执行。

```
 select * from Database A where column1='' and column2='' 
```

我想知道是否可以创建一个动态连接对象，以便它使用相同的选择查询并将多个服务器编号作为用户（或硬编码）输入。它在数据库中执行选择查询并返回结果。然后将行中的下一个服务器编号作为输入，获取数据等。这一直持续到所有服务器编号都完成为止。

对此的任何见解都将被欣然接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:13:55.023

是的，您确实可以这样做...创建一个新类并使其成为 SQLConnection 类型的对象，或者它是。

它的目的应该是创建和维护与数据库的连接并执行各种任务（这部分是可选的，因为您可以直接传入查询）。

从网上得到这个

```
class DBConnect
{
    private MySqlConnection connection;
    private string server;
    private string database;
    private string uid;
    private string password;

    //Constructor
    public DBConnect()
    {
        Initialize();
    }

    //Initialize values
    private void Initialize(String[] connectionInfo)
    {
        server = connectionInfo[0];
        database = connectionInfo[1];
        uid = connectionInfo[2];
        password = connectionInfo[3];
        string connectionString;
        connectionString = "SERVER=" + server + ";" + "DATABASE=" + 
        database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";

        connection = new MySqlConnection(connectionString);
    }

    //open connection to database
    private bool OpenConnection()
    {
    }

    //Close connection
    private bool CloseConnection()
    {
    }

    //Insert statement
    public void Insert()
    {
    }

    //Update statement
    public void Update()
    {
    }

    //Delete statement
    public void Delete()
    {
    }

    //Select statement
    public List <string> [] Select()
    {
    }

    //Count statement
    public int Count()
    {
    }

    //Backup
    public void Backup()
    {
    }

    //Restore
    public void Restore()
    {
    }
} 
```

所以当你有不同的数据库时，你可以这样：

```
DBConnect srv001 = new DBConnect({server1,db1,uid1,pw1});
DBConnect srv002 = new DBConnect({server2,db2,uid2,pw2}); 
```

所以现在你有 2 个并发连接到 2 个不同的数据库

# emacs - 使用带有 OS X Mountain Lion 的 Emacs 24 对窗口进行可怕的渲染

> ID：14245542
> 
> 赞同：0
> 
> 时间：2013-01-09T20:07:01.590
> 
> 标签：emacs, osx-mountain-lion

我安装`OS X Mountain Lion`在我的笔记本电脑上，然后下载（在[emacs for mac os x](http://emacsformacosx.com)`Emacs 24`上提供的预编译版本）。应用程序窗口的渲染，尤其是当我快速滚动甚至有时缓慢滚动时，*简直太可怕了*。

 *![在此处输入图像描述](../Images/112ab64b17044cc0716b5cb168c8da12.png)

如果有人能提出解决方案，我将不胜感激。如果我无法弄清楚这一点，那么让我放弃 Emacs 转而使用其他编辑器已经够糟糕的了。

我可以在 Stackoverflow 上找到的最近的查询是[在 OS X 上的 Emacs 中出现奇怪的垂直线？](https://stackoverflow.com/questions/11904035/strange-vertical-lines-appearing-in-emacs-on-os-x)

我正在使用 Kieran Healy 的 Emacs Social Science Starter Kit ( [http://kieranhealy.org/emacs-starter-kit.html](http://kieranhealy.org/emacs-starter-kit.html) )，所以我还没有添加我自己的自定义 - 事实上一些现有的自定义是为他的机器，不是我的。但我的 init.el 文件（就是这样）如下：

```
;;; init.el --- Where all the magic begins
;;
;; Part of the Emacs Starter Kit
;;
;; This is the first thing to get loaded.
;;

;; org-mode windmove compatibility
(setq org-replace-disputed-keys t)

;; setq dotfiles-dir (file-name-directory (or (buffer-file-name) load-file-name)))
(setq dotfiles-dir (file-name-directory (or load-file-name (buffer-file-name))))

(add-to-list 'load-path (expand-file-name
                     "lisp" (expand-file-name
                             "org" (expand-file-name
                                    "src" dotfiles-dir))))

;; Package Locations
;; Location of various local packages (in .emacs.d/vendor or .emacs.d/src)
;;  because I don't want to keep them in =/Applications/Emacs.app/= or in
;;  =/usr/share/local/=.

(if (fboundp 'normal-top-level-add-subdirs-to-load-path)
    (let* ((my-lisp-dir "~/.emacs.d/")
       (default-directory my-lisp-dir))
  (setq load-path (cons my-lisp-dir load-path))
  (normal-top-level-add-subdirs-to-load-path)))

;; Font-face setup. Check the availability of a some default fonts, in
;; order of preference. The first of these alternatives to be found is
;; set as the default font, together with base size and fg/bg
;; colors. If none of the preferred fonts is found, nothing happens
;; and Emacs carries on with the default setup. We do this here to
;; prevent some of the irritating flickering and resizing that
;; otherwise goes on during startup. You can reorder or replace the
;; options here with the names of your preferred choices.

(defun font-existsp (font)
   "Check to see if the named FONT is available."
   (if (null (x-list-fonts font))
     nil t))

;; Set default font. First one found is selected.
(cond
 ((eq window-system nil) nil)
  ((font-existsp "PragmataPro")
  (set-face-attribute 'default nil :height 121 :font "PragmataPro"))
 ((font-existsp "Menlo")
  (set-face-attribute 'default nil :height 121 :font "Menlo"))
 ((font-existsp "Consolas")
  (set-face-attribute 'default nil :height 121 :font "Consolas"))
 ((font-existsp "Inconsolata")
  (set-face-attribute 'default nil :height 121 :font "Inconsolata"))
 )

;; Load up Org Mode and Babel
(require 'org-install)

;; load up the main file
(org-babel-load-file (expand-file-name "starter-kit.org" dotfiles-dir))

;;; init.el ends here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T00:36:54.647

尝试检查您没有将框架高度设置为大于屏幕高度。我的 .emacs 设置为从另一台具有更高垂直分辨率的计算机上执行此操作，我看到了与您相同的行为。对我来说，我有这个块：

```
(setq default-frame-alist
      '((width . 80)
        (height . 40)
        (menu-bar-lines . 1)
        (vertical-scroll-bar . -1))) 
```

我不得不将高度从 60 降低到你在这里看到的 40 以避免这个问题。*

# ios - 处理 SLRequest 错误 2500 Facebook

> ID：14245545
> 
> 赞同：2
> 
> 时间：2013-01-09T20:07:07.457
> 
> 标签：ios, facebook, user-accounts, acaccount

在使用 SLRequest 发布 Facebook 帖子时，主要有两件事会导致问题： 1\. 用户在 Facebook 上删除应用程序的权限。这会导致错误 2500，这意味着您必须“重新安装”应用程序并重新获得权限。2\. 令牌已过期。您所要做的就是更新凭据。

我的问题主要是第一个。我已经能够处理更新凭据，但是在尝试“renewbigtime”（我喜欢如何称呼它）或重新安装应用程序并再次获得权限时遇到了很多困难。

这是我的 facebook 发布代码的布局（请参阅评论以了解我为什么这样做）：

首先，用户必须在设置视图控制器中打开 facebook 共享：

```
-(void)facebookpost {
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];

       ACAccountType * facebookAccountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSArray *accounts = [accountStore accountsWithAccountType:facebookAccountType];

  //why two permissions and dictionaries?  Well, before you can post to Facebook, you have to get basic read permissions, such as email.  If you attempt to obtain both of these permissions, you will fail.  So, the app tries for permission of email first, if it succeeds, it tries for permission for publish_stream.  
    NSArray * permissions = @[@"email"];
    NSArray * permissions2 = @[@"publish_stream"];

    NSDictionary * dict = @{ACFacebookAppIdKey : @"289006474446717", ACFacebookPermissionsKey : permissions, ACFacebookAudienceKey : ACFacebookAudienceFriends};
    NSDictionary * dict2 = @{ACFacebookAppIdKey : @"289006474446717", ACFacebookPermissionsKey : permissions2, ACFacebookAudienceKey : ACFacebookAudienceFriends};
    [accountStore requestAccessToAccountsWithType:facebookAccountType options:dict completion:^(BOOL granted, NSError *error) {
        if (granted && error == nil) {
//the following defaults just sets a key value which will be checked to see if the app should try and post anything
            [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"facebook"];
            [[NSUserDefaults standardUserDefaults] synchronize];
           //nothing gets posted yet, onto try for permissions to post

            [accountStore requestAccessToAccountsWithType:facebookAccountType options:dict2 completion:^(BOOL granted, NSError *error) {
                if(granted && error == nil) {

                  //good, it is now granted permission for both reading and writing
                } else {
                    NSLog(@"1error is: %@",[error description]);
                }
            }];
        } else {

            NSLog(@"error is: %@",error );

            if(error.code == 6){
//this is the error message that will appear if the user has not signed into Facebook from Settings app.  alertmessage simply pops up an alert instructing them to please do so.
                [self performSelectorOnMainThread:@selector(alertmessage)
                                       withObject:nil
                                    waitUntilDone:YES];                }
        }
    }];

} 
```

现在，我们进入发布代码。此代码位于表视图的详细视图控制器中。表格视图列出了文章，单击其中一个使用 webView 在详细视图中显示它。在 viewWillAppear 中，应用程序检查 'facebook' 键的布尔值。如果它是 NO，它只会显示文章。如果是，它会尝试发布到墙上（再次查看评论以获取解释）：

```
-(void)writetowall {
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];

    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSArray *accounts = [accountStore accountsWithAccountType:accountType];

    ACAccount *account = [accounts lastObject];

      NSDictionary *parameters = @{@"message" : [NSString stringWithFormat:@"I'm reading %@ from the blog.  Click the link to read it too.", _entry.articleTitle], @"link": _entry.articleUrl};
    NSURL *URL = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];

    SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                            requestMethod:SLRequestMethodPOST
                                                      URL:URL
                                               parameters:parameters];

    [request setAccount:account];

    [request performRequestWithHandler:^(NSData *responseData,
                                             NSHTTPURLResponse *urlResponse, NSError *error) {
        NSDictionary *responseDictionary = [NSJSONSerialization JSONObjectWithData:responseData
                                                                           options:kNilOptions
                                                                            error:&error];
        NSDictionary *errorDictionary = [responseDictionary valueForKey:@"error"];

        if (errorDictionary) {

            NSNumber *errorCode = [errorDictionary valueForKey:@"code"];
            if ([errorCode isEqualToNumber:[NSNumber numberWithInt:190]]) {
//190 is code that you need to renew credentials.  this is when tokens expire.  so, if it happens, it goes to renew code (not included in this question as it is working fine)
            NSLog(@"Renew");
                [self renew];
            }
            if ([errorCode isEqualToNumber:[NSNumber numberWithInt:2500]]) {
//here is the 2500 code meaning the app has not been installed yet, or needs to be installed again with new permissions.  so, I have it run the method renewbigtime which I will now list below
                [self renewbigtime];
            }
        }
    }];
} 
```

好的，所以用户去Facebook AppCenter，点击应用旁边的X，现在当他们尝试发布时，它给了他们错误代码2500，所以它触发了这个方法，这个方法非常类似于授予initial的initial方法权限：

```
-(void)renewbigtime {
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];

    ACAccountType * facebookAccountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSArray *accounts = [accountStore accountsWithAccountType:facebookAccountType];

    NSArray * permissions = @[@"email"];
    NSArray * permissions2 = @[@"publish_stream"];

    NSDictionary * dict = @{ACFacebookAppIdKey : @"289006474446717", ACFacebookPermissionsKey : permissions, ACFacebookAudienceKey : ACFacebookAudienceFriends};
    NSDictionary * dict2 = @{ACFacebookAppIdKey : @"289006474446717", ACFacebookPermissionsKey : permissions2, ACFacebookAudienceKey : ACFacebookAudienceFriends};
    [accountStore requestAccessToAccountsWithType:facebookAccountType options:dict completion:^(BOOL granted, NSError *error) {
        if (granted && error == nil) {
            [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"facebook"];
            [[NSUserDefaults standardUserDefaults] synchronize];

            [accountStore requestAccessToAccountsWithType:facebookAccountType options:dict2 completion:^(BOOL granted, NSError *error) {
                if(granted && error == nil) {
                    //here is where it should be granted and no errors for anything, so we redirect to writetowall method which should simply post to the wall
                    [self writetowall];
                } else {
                    NSLog(@"1error is: %@",[error description]);
                }
            }];
        } else {

            NSLog(@"error is: %@",error );

            if([[error description] isEqualToString:@"Error Domain=com.apple.accounts Code=6 \"The operation couldn’t be completed. (com.apple.accounts error 6.)\""]){
                [self performSelectorOnMainThread:@selector(alertmessage)
                                       withObject:nil
                                    waitUntilDone:YES];                }
        }
    }];

} 
```

问题是应用程序此时陷入了循环。如果收到错误 2500，它会尝试更新凭据，但会继续出现错误 2500，尝试更新，2500，尝试更新。renewbigtime 部分没有触发其他错误消息，那我做错了什么？

# three.js - 如何用从 Three.js 中的 JSON 文件读取的值表示几何？

> ID：14245549
> 
> 赞同：0
> 
> 时间：2013-01-09T20:07:18.177
> 
> 标签：three.js

我在 JSON 中有一大组五个顶点，需要表示为如下所示的圆锥几何。

五个顶点：{(x,y,z) , (a,b,c), (d,e,f), (g,h,i), (j,k,l) }, {(x1,y1 ,z1) , (a1,b1,c1), (d1,e1,f1), (g1,h1,i1), (j1,k1,l1) }.......

**注意：这些坐标是画布坐标。**

这是图表：

![锥体](../Images/0507c5dd214a1d9aa459257c3b3118e8.png)

这些顶点值是从 JSON 文件中读取的，并且需要制作几何图形。这些顶点值对于每个几何图形都是唯一的。

AFAIK，如何使用 three.js 预定义几何和自定义几何，如下面的代码。我的问题是如何使用从 JSON 文件中读取的值来表示几何图形？

```
 var cone;
    var geo = new THREE.Geometry();

    var meshMaterial = new new THREE.MeshLambertMaterial( { color: 0xffffff });

    geo.vertices.push( new THREE.Vector3(   0, 0, 0));
    geo.vertices.push( new THREE.Vector3( -0.5, 0.5, 1));
    geo.vertices.push( new THREE.Vector3( 0.5, 0.5, 1));
    geo.vertices.push( new THREE.Vector3( -0.5, -0.5, 1));
    geo.vertices.push(new THREE.Vector3( 0.5,-0.5, 1));

   geo.faces.push( new THREE.Face3(0,1,2));
   geo.faces.push( new THREE.Face3(4,3,0));
   geo.faces.push( new THREE.Face3(3,1,0));
   geo.faces.push( new THREE.Face3(0,2,4));
   geo.faces.push( new THREE.Face3(2,1,4));
   geo.faces.push( new THREE.Face3(1,3,4));

   geo.computeFaceNormals();
   cone = new THREE.Mesh(geo, meshMaterial);
   cone.doubleSided = true;
   cone.overdraw = true;

   //And finally we need (x,y,z) to set the position of this geometry to display on the canvas
   cone.position.set(x,y,z); 
```

我已经尝试了很多，如何使用从其他文件中读取的值创建几何图形，但我没有找到任何东西，这促使我发布这个问题。

PS：这些值中{(x,y,z) , (a,b,c), (d,e,f), (g,h,i), (j,k,l) }, (x, yz) 应该是画布上圆锥尖端的位置，同时代表圆锥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:53:55.600

查看 81.214.75.32:8181/admin（等待自动加载场景几秒钟）查看页面源代码并打开顶部包含的 FileManager.js。检查“importScene”功能。这将帮助您从文件中加载几何数据并根据顶点、法线、纹理信息创建模型。

# java - 垂直滚动但不水平滚动时绘制“卡住”

> ID：14245552
> 
> 赞同：0
> 
> 时间：2013-01-09T20:07:36.383
> 
> 标签：java, swing, jscrollpane

我有一个 java 应用程序，它允许用户在 jScrollPane 中放置图像。该应用程序显示一个框，该框与网格对齐，以显示将放置图块的位置以及有关选项和在整个窗格中的位置的一些信息。我在运行 Lion 的 Mac 上运行该程序。当使用触控板水平滚动时，绘制在光标周围的信息会更新并随光标移动。但是，在垂直滚动时，指示将放置图块的位置的信息和框拖动而不是随着光标的位置更新而不是更新，直到鼠标移动为止。此外，使用箭头键垂直或水平滚动时，不会重新绘制信息和框。

我假设问题在于它没有调用paint方法，但是我不知道如何在滚动时调用paint方法，或者为什么在仅使用触控板水平滚动时它似乎仍然调用它。下面是初始化 jScrollPane 和绘制方法的代码。

滚动窗格：

```
public class Map extends JFrame
{
    private static final long serialVersionUID = 8527533451039189417L;
    final int AREA_SIZE_X = 100;
    final int AREA_SIZE_Y = 100;
    JFrame sWindow;
    mapPanel mPanel;
    JScrollPane mScrollPane;

    Map() throws IOException
        {
            mPanel = new mapPanel(sWindow);
            this.getContentPane().setLayout(new BorderLayout());
            mScrollPane = new JScrollPane(mPanel);
            this.getContentPane().add(mScrollPane);
            mPanel.requestFocus(); 
            this.setTitle("Map maker");
            this.setLocation(400, 0);
            this.setResizable(false);

            this.pack();
        }
} 
```

油漆方法：

```
 public void paintComponent(Graphics g)
        {
            super.paintComponent(g);
            g.setColor(Color.white);
            g.fillRect(0, 0, AREA_SIZE_X * 20, AREA_SIZE_Y * 20);
            mouseLocation = this.getMousePosition();

            if (this.hasFocus() && this.contains(mouseLocation))
                {
                    g.drawImage(bFS.get(sWindow.getSelected()), mouseLocation.x - 20, mouseLocation.y - 20, this);
                    g.setColor(Color.red);
                    g.drawRect(((mouseLocation.x - 10) / 20) * 20, ((mouseLocation.y - 10) / 20) * 20, 20, 20);
                    String xDisp = "x: " + ((mouseLocation.x - 10) / 20);
                    String yDisp = "y: " + ((mouseLocation.y - 10) / 20);
                    g.drawString(xDisp, mouseLocation.x - 20, mouseLocation.y + 25);
                    g.drawString(yDisp, mouseLocation.x - 20, mouseLocation.y + 40);
                    String layerDisp = "Layer: " + sWindow.isLayered();
                    g.drawString(layerDisp, mouseLocation.x - 20, mouseLocation.y + 55);
                    int tempCounter = 0;
                    while (tempCounter < 4 && tiles[((mouseLocation.x - 10) / 20)][((mouseLocation.y - 10) / 20)][tempCounter] != -1)
                        {
                            tempCounter++;
                        }
                    String layerLevelDisp = "Num Layers: " + tempCounter;
                    g.drawString(layerLevelDisp, mouseLocation.x - 20, mouseLocation.y + 70);

                }
        } 
```

# c++ - 具有虚函数的受保护继承

> ID：14245553
> 
> 赞同：1
> 
> 时间：2013-01-09T20:07:46.407
> 
> 标签：c++

我编写了一个具有受保护继承的虚函数

```
#include<iostream>
using namespace std;
class D{
private:
    int a;
protected:
    int b;
public:
    D(){a=b=c=0;}
    virtual void f(){
    a=2;
    cout <<"D::f"<<a<<endl;
    }
    void g(){cout<<"D::g"<<a<<endl;}
    int c;
};
class E:protected D{
    private:
        int a,b,c;
    public:
        E(){a=b=c;}
        void f(){
            a=3;
            cout<<"E::f"<<a<<endl;
        }
        void g(){cout<<"E::g"<<a<<endl;}
};
int main(){
    D *d = new E;
    d->f();
    d->g();
    return 0;
} 
```

但如果我使用它，它会变成无法访问的基地。

如果我将其更改为 public inherience ，它可以运行。

我想知道为什么我不能使用 D *d = new E; 具有私有和受保护的继承？

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:09:49.857

`private`或`protected`基地意味着基地是世界*无法访问*的。因此，当您编写一个需要从派生转换为*不可访问*基的表达式时，由于可访问性规则，这是被禁止的，*因为*转换需要在作为世界一部分的调用站点进行。

在面向对象的术语中，`private`或者`protected`base 没有定义**is-a**关系。它实际上是一种按关系*实现的*关系，更简单地说是组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:11:07.940

因为非公共继承没有定义“is-a”关系，编译器一般不会允许隐式向上转换

以下方法可行，但这是一个坏主意/设计

```
D*d = (D*)(new E); 
```

# apache - htaccess 重定向到带有井号的 url

> ID：14245555
> 
> 赞同：0
> 
> 时间：2013-01-09T20:08:00.567
> 
> 标签：apache, .htaccess, redirect

.htaccess 中的重定向是否有效：

```
Redirect 301 http://test.com/test http://test.com/#test 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:46:10.727

这个例子不起作用。正确答案在这里：[https](https://stackoverflow.com/a/14281857/1447182) ://stackoverflow.com/a/14281857/1447182 。

# php - 合并图像并将其保存在服务器上

> ID：14245556
> 
> 赞同：0
> 
> 时间：2013-01-09T20:08:03.590
> 
> 标签：php, merge

我有一个关于如何合并图像并将其保存在服务器上的问题。我从[http://tympanus.net/codrops/2010/03/22/interactive-image-vamp-up-with-jquery-css3-and-php/](http://tympanus.net/codrops/2010/03/22/interactive-image-vamp-up-with-jquery-css3-and-php/)获取这段代码，这是一个非常酷的教程，但最后一部分不要说如何在服务器上创建一个时间图像，因为人们将它发送给他们的朋友。

这是php代码：

```
<?php
$res = json_decode(stripslashes($_POST['jsondata']), true);
/* get data */
$count_images = count($res['images']);
/* the background image is the first one */
$background     = $res['images'][0]['src'];
$photo1         = imagecreatefromjpeg($background);
$foto1W         = imagesx($photo1);
$foto1H         = imagesy($photo1);
$photoFrameW    = $res['images'][0]['width'];
$photoFrameH    = $res['images'][0]['height'];
$photoFrame     = imagecreatetruecolor($photoFrameW,$photoFrameH);
imagecopyresampled($photoFrame, $photo1, 0, 0, 0, 0, $photoFrameW, $photoFrameH, $foto1W, $foto1H);

/* the other images */
for($i = 1; $i < $count_images; ++$i){
    $insert         = $res['images'][$i]['src'];
    $photoFrame2Rotation = (180-$res['images'][$i]['rotation']) + 180;

    $photo2         = imagecreatefrompng($insert);

    $foto2W         = imagesx($photo2);
    $foto2H         = imagesy($photo2);
    $photoFrame2W   = $res['images'][$i]['width'];
    $photoFrame2H   = $res['images'][$i]['height'];

    $photoFrame2TOP = $res['images'][$i]['top'];
    $photoFrame2LEFT= $res['images'][$i]['left'];

    $photoFrame2    = imagecreatetruecolor($photoFrame2W,$photoFrame2H);
    $trans_colour   = imagecolorallocatealpha($photoFrame2, 0, 0, 0, 127);
    imagefill($photoFrame2, 0, 0, $trans_colour);

    imagecopyresampled($photoFrame2, $photo2, 0, 0, 0, 0, $photoFrame2W, $photoFrame2H, $foto2W, $foto2H);

    $photoFrame2    = imagerotate($photoFrame2,$photoFrame2Rotation, -1,0);
    /*after rotating calculate the difference of new height/width with the one before*/
    $extraTop       =(imagesy($photoFrame2)-$photoFrame2H)/2;
    $extraLeft      =(imagesx($photoFrame2)-$photoFrame2W)/2;

    imagecopy($photoFrame, $photoFrame2,$photoFrame2LEFT-$extraLeft, $photoFrame2TOP-$extraTop, 0, 0, imagesx($photoFrame2), imagesy($photoFrame2));    
}
// Set the content type header - in this case image/jpeg
header('Content-type: image/jpeg');
imagejpeg($photoFrame, $targetfile); 
imagedestroy($photoFrame);

?> 
```

# android - scaleType="matrix" 和 adjustViewBounds="true" 之间的 Android 布局冲突

> ID：14245557
> 
> 赞同：2
> 
> 时间：2013-01-09T20:08:12.650
> 
> 标签：android, android-layout, android-linearlayout, android-imageview

我正在尝试`Layout`用两个`ImageViews`. 图像需要`scaleType="matrix"`设置以在代码中移动它们。他们周围有围场，`padding="50dp"`为活动腾出空间。如果没有足够的空间`android:adjustViewBounds="true"`，我还需要缩放图像，但这两个设置似乎相互排斥。如何同时使用`scaleType="matrix"`和`adjustViewBounds="true"`？还有另一种方法可以做到这一点吗？

这是我的代码。第一个图像缩放（无矩阵），第二个没有：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <ImageView
        android:id="@+id/sort_country"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:padding="50dp"
        android:src="@drawable/tab_sort_country"
        android:adjustViewBounds="true" />
    <ImageView
        android:id="@+id/sort_city"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1" 
        android:padding="50dp"
        android:src="@drawable/tab_sort_city"
        android:adjustViewBounds="true"
        android:scaleType="matrix" />
</LinearLayout> 
```

# maven - 使用 Maven 构建站点砖

> ID：14245558
> 
> 赞同：0
> 
> 时间：2013-01-09T20:08:16.133
> 
> 标签：maven, sitebricks

我被困在用 maven 为 Sitebricks 生成罐子了。我使用以下命令从 git 下载了存储库：

git clone [https://github.com/dhanji/sitebricks.git](https://github.com/dhanji/sitebricks.git) sitebricks

使用“mvn package”时一切正常。因为我也需要依赖项，所以我尝试了“mvn install”并得到以下错误：

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] Sitebricks :: Parent
[INFO] Sitebricks :: Type Conversion
[INFO] Sitebricks :: Client
[INFO] Sitebricks :: Annotations
[INFO] Sitebricks :: Core
[INFO] Sitebricks :: Test Support
[INFO] Sitebricks :: Easy Client
[INFO] Sitebricks :: Statistics
[INFO] Sitebricks :: Channel
[INFO] Sitebricks :: Acceptance Tests
[INFO] Sitebricks :: Options
[INFO] Sitebricks :: Cloud
[INFO] Sitebricks :: SLF4J Module
[INFO] Sitebricks :: Persistence
[INFO] Sitebricks :: Persistence Module (Disk)
[INFO] Sitebricks :: Persistence Module (Redis)
[INFO] Sitebricks :: Persistence Module (SQL)
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Sitebricks :: Parent 0.8.8-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.3:clean (default-clean) @ sitebricks-parent ---
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0-beta-1:enforce (enforce-maven) @ sitebricks-parent ---
[INFO] 
[INFO] --- maven-install-plugin:2.3:install (default-install) @ sitebricks-parent ---
[INFO] Installing /home/dimi/local/sdks/maven/sitebricks/pom.xml to /home/dimi/.m2/repository/com/google/sitebricks/sitebricks-parent/0.8.8-SNAPSHOT/sitebricks-parent-0.8.8-SNAPSHOT.pom
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Sitebricks :: Parent .............................. FAILURE [2.880s]
[INFO] Sitebricks :: Type Conversion ..................... SKIPPED
[INFO] Sitebricks :: Client .............................. SKIPPED
[INFO] Sitebricks :: Annotations ......................... SKIPPED
[INFO] Sitebricks :: Core ................................ SKIPPED
[INFO] Sitebricks :: Test Support ........................ SKIPPED
[INFO] Sitebricks :: Easy Client ......................... SKIPPED
[INFO] Sitebricks :: Statistics .......................... SKIPPED
[INFO] Sitebricks :: Channel ............................. SKIPPED
[INFO] Sitebricks :: Acceptance Tests .................... SKIPPED
[INFO] Sitebricks :: Options ............................. SKIPPED
[INFO] Sitebricks :: Cloud ............................... SKIPPED
[INFO] Sitebricks :: SLF4J Module ........................ SKIPPED
[INFO] Sitebricks :: Persistence ......................... SKIPPED
[INFO] Sitebricks :: Persistence Module (Disk) ........... SKIPPED
[INFO] Sitebricks :: Persistence Module (Redis) .......... SKIPPED
[INFO] Sitebricks :: Persistence Module (SQL) ............ SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.226s
[INFO] Finished at: Wed Jan 09 20:57:48 CET 2013
[INFO] Final Memory: 5M/69M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-install-plugin:2.3:install (default-install) on project sitebricks-parent: Failed to install metadata com.google.sitebricks:sitebricks-parent/maven-metadata.xml: Could not parse metadata /home/dimi/.m2/repository/com/google/sitebricks/sitebricks-parent/maven-metadata-local.xml: only whitespace content allowed before start tag and not F (position: START_DOCUMENT seen F... @1:1) -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

我该如何解决？我现在正试图让网站砖运行几天并开始变得有点沮丧......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:57:46.503

最简单的解决方案是删除整个本地存储库并重新构建或更具体一点，您只需删除文件夹

```
/home/dimi/.m2/repository/com/google/sidebricks 
```

然后做

```
mvn clean package 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:45:59.903

请尝试在此线程上的答案：

[https://github.com/dhanji/sitebricks/issues/51](https://github.com/dhanji/sitebricks/issues/51)

发生的事情是您的项目没有使用自己的 pom.xml 正确配置，因此您缺少 Guice (aopalliance.jar) 的传递依赖项，该依赖项未在任何地方明确定义（但 maven 知道如何设置）。

我不确定你是如何生成 Eclipse 项目的，但是在拼图的那部分有一个缺陷 =)

Dhanji（sitebricks 的创建者）

# jquery - 我计算了一个纵横比，但是当旧值改变时应该更新它

> ID：14245566
> 
> 赞同：0
> 
> 时间：2013-01-09T20:08:51.537
> 
> 标签：jquery, jcrop

我正在使用 jCrop，我需要一个设置的纵横比。例如，如果有人在 X 文本框输入“2”，在 Y 文本框输入“2”，则纵横比应为 1。

但是，如果我更改文本框上的值（例如更改为 3 和 1），jCrop 应该获得新值。现在它只是初始化，并没有回头。

代码如下。（我尝试了更多但无法弄清楚。）

```
-JQUERY-
jQuery(function($){
   var numberX = $('#numberX').val();
   var numberY = $('#numberY').val();

   $('#jcrop_target').Jcrop({
      aspectRatio: ($(this).numberX / $(this).numberY),
   ... rest of the codes

-HTML-
<input type="text" id="numberX" name="numberX" value=""/>
<input type="text" id="numberY" name="numberY" value="" /> 
```

**TLDR；**当我更改 numberX 和 numberY 文本框的值时，它应该反映到 jCrop。jCrop 只保留初始值。当文本框上的值发生变化时，应重新计算纵横比。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:10:39.607

将您的代码变成`function()`. `document.ready`然后使用 jQuery，您可以在更改时运行该函数（请参阅[http://api.jquery.com/change/](http://api.jquery.com/change/)）

例如，

```
function changenumbers(){
   var numberX = $('#numberX').val();
   var numberY = $('#numberY').val();

   $('#jcrop_target').Jcrop({
      aspectRatio: ($(this).numberX / $(this).numberY),
   /* ... rest of the code */
}
$document.ready(function(){
   changenumbers();
   $("#numberX").change(function(){ changenumbers(); }
   $("#numberY").change(function(){ changenumbers(); }
} 
```

# serialization - MVVMLight 和数据序列化

> ID：14245569
> 
> 赞同：1
> 
> 时间：2013-01-09T20:08:56.350
> 
> 标签：serialization, mvvm-light

我开始使用适用于 Windows 8 应用商店应用的 MVVMLight。在观看了一些视频后，我已经掌握了基础知识。但是我遇到了一个问题。我的每个基本模型类都继承自 MVVMLight 中的 ObservableObject。

这工作正常，但我现在想将数据加载并保存到 XML。所以我用我之前在非 MVVM 实现中使用的 DataContract 属性标记了它们。然而，这现在在序列化时会产生一个错误，因为它说我继承的类也必须用这个属性标记。

由于 ObservableCollection 是在 dll 中编译的，我应该如何管理它？我是否必须创建一组与我的“ViewModel”样式匹配的基本（POCO 样式）类并处理它们之间的映射。或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:37:14.990

你不想序列化你的视图模型，你想序列化它们的当前状态，以便在应用程序重新启动时它们可以重建自己。

所以，像这样：

```
public class ViewModelFoo
{
    public ViewModelFoo(ISerializationService serializationService)
    {
         _serializationService=serializationService;
         LoadDefaultData();
    }

    private void LoadDefaultData()
    {
        //Do all your loading of static data here
         FooItems=GetFooItems();
         if(_serializationService.ContainsSerializedState)
         {
              LoadSerializedState();
         }
    }

    public Observable<Foo> FooItems{get;set;}

    public Foo SelectedFooItem
    {
        get{return _fooItem;}
        set{_fooItem=value;
            RaisePropertyChanged("SelectedFooItem"); 
            _serializationService.SelecetedFooItem=value;
           }
    }

    private void LoadSerializedData()
    {
        SelectedFooItem=_serializationService.SelectedFooItem;
        ReloadData();
    }

    private void ReloadData()
    {
        //load whatever data you need.  You've now got your app back into the state it was when it was serialized;
    }
} 
```

基本上，每次我们更改屏幕上的内容时，我们都会更新状态对象。当我们挂起应用程序（App 类中的事件）时，我们将保存状态对象。

通过这样做，我们能够存储视图模型的状态，而不是视图模型本身。因为我们控制了序列化服务，所以我们可以使用我们想要使用的任何序列化方法来保存我们的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-07T21:27:36.040

使用[Json.Net](https://www.newtonsoft.com/json)允许序列化和反序列化基于`GalaSoft.MvvmLight.ObservableObject`. 如果你可以使用这个库，它似乎是最简单的解决方案。

# java - 从 LibreOffice Java SDK 获取页数

> ID：14245571
> 
> 赞同：0
> 
> 时间：2013-01-09T20:08:59.903
> 
> 标签：java, libreoffice, uno

我正在开发一个 Java 应用程序，它打印用户选择的文件。SDK/Uno 似乎非常适合这`LibreOffice`一点，因为它允许我打印许多不同的文件类型而不依赖于永恒的 GUI（这是必须的）。

但是，为了让这个框架完全满足我的需求，它还需要在打印文档之前提供页数。我花了相当多的时间研究答案，但提供的示例和 API`OOo`并不是`LibreOffice`最好的。

谁能明确地告诉我这个界面是否会提供页数，或者建议更换？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T03:00:21.493

我看到这已经休眠了一段时间。如果您仍然需要答案 - 是的，您可以通过 Java 从 Libre Office 获取页数。

```
 int nPageCount = com.sun.star.uno.AnyConverter.toInt(
            xPropertySet.getPropertyValue("PageCount")); 
```

所以你需要使用 API 来加载文档，询问页数。如果您搜索“uno”和“PageCount”，您会找到完整的代码示例（例如也适用于 LibreOffice的[OO 邮件存档）](http://forum.openoffice.org/en/forum/viewtopic.php?f=44&t=56507)

# php - Firefox 将谷歌分析数据（utm）添加到 cookie 中

> ID：14245572
> 
> 赞同：3
> 
> 时间：2013-01-09T20:09:00.917
> 
> 标签：php, http, firefox, cookies

我有一个客户端应用程序作为 Unity WebPlayer 运行，Unity WebPlayer WWW 模块在浏览器上使用类似 ajax 的请求。

我做了一个简单的 http 请求，它首先从**responseheader接收****Set-Cookie**或**SET-COOKIE**并将该信息作为**Cookie**添加到进一步的**requestheaders**中。

 ******在 Chrome 中，一切都很顺利。

但是在 Firefox 中，当我添加 Cookie 信息时，Firefox 在发送之前会在 cookie 中添加更多信息。它添加了 __utma->__utmz 数据，即 Google Analytics 跟踪 cookie 信息。

我猜这个添加会破坏整个 cookie 系统。因为之后，在每个响应服务器中，在没有 __utma->__utmz 的情况下，我的客户不同意一次又一次地发送 Set-Cookie。

我在 Firefox 上只有 Firebug 和 Firecookie 插件。

**更新：它在 IE 上也可以正常工作，就像 Chrome 一样。**

**火狐** ![火狐](../Images/b4d050d07d8f2beedefc16581b478cb6.png) **浏览器** ![铬合金](../Images/f3b21e6cb788e86149ea0d9d01427454.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:44:36.713

那是一个单独的cookie。

您的服务器应该仍然能够解析并使用它感兴趣的 cookie，而忽略所有其他的。******

# c# - 连接到 SQL Server 的本地实例时出错

> ID：14245573
> 
> 赞同：-1
> 
> 时间：2013-01-09T20:09:04.433
> 
> 标签：c#, sql-server, winforms

我从以 c# 窗口形式连接到 SQL Server 的本地实例时收到了一些错误消息。

请帮忙，谢谢。

> *当前上下文中不存在名称“lstLocalInstances”*

```
using System.Data.SqlClient;
using System.IO;
using Microsoft.SqlServer.Management.Smo; 
using Microsoft.SqlServer.Management.Common;
using Microsoft.Win32;

RegistryKey rk = Registry.LocalMachine.OpenSubKey
        (@"SOFTWARE\Microsoft\Microsoft SQL Server");
String[] instances = (String[])rk.GetValue("InstalledInstances");
if (instances.Length > 0)
{
    foreach (String element in instances)
    {
        if (element == "MSSQLSERVER")
            lstLocalInstances.Items.Add(System.Environment.MachineName);
        else
            lstLocalInstances.Items.Add(System.Environment.MachineName + @"\" + element);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:13:59.847

**简而言之：**为您的 Local 实例添加声明。就像在下面的示例中一样：

```
var lstLocalInstances = new List<string> {"instance1", "instance2"};
// the rest of the code where lstLocalInstances is used

RegistryKey rk = Registry.LocalMachine.OpenSubKey
        (@"SOFTWARE\Microsoft\Microsoft SQL Server");
String[] instances = (String[])rk.GetValue("InstalledInstances");
if (instances.Length > 0)
{
    foreach (String element in instances)
    {
        if (element == "MSSQLSERVER")
            lstLocalInstances.Items.Add(System.Environment.MachineName);
        else
            lstLocalInstances.Items.Add(System.Environment.MachineName + @"\" + element);
    }
} 
```

**编辑：**从[代码项目链接](http://www.codeproject.com/Articles/123441/SQL-Server-2008-Backup-and-Restore-Databases-using)中，看起来 `lstLocalInstances`实际上是项目示例中的一个**win-form列表框**控件。我的建议是下载源代码并按原样运行。

此外，您的代码需要类似：

```
lstLocalInstances.Items.add(new ListBoxItem("name", "value")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:34:59.523

[为了简洁起见， codeproject 站点](http://www.codeproject.com/Articles/123441/SQL-Server-2008-Backup-and-Restore-Databases-using%22)的程序员将部分代码从文章正文中删除。

您需要点击文章顶部的“[下载源代码”链接以获取完整的可编译代码或自行填写缺失的部分。](http://www.codeproject.com/KB/database/SQLServer_Backup_SMO/SQLServerDatabaseBackupRestore_src.zip)

# ms-access - 如何将数据类型编号更改为表已包含数据的自动编号

> ID：14245575
> 
> 赞同：2
> 
> 时间：2013-01-09T20:09:09.627
> 
> 标签：ms-access

我的一个队友不小心把`Number`而不是放在`autonumber`一列中，并用 5000 条记录填充了表格。如何将其更改`autonumber`为已填充表格的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:33:35.893

据我所知，做到这一点的唯一方法是创建一个具有相同字段的新表（除了自动编号字段而不是数字字段），然后通过查询将所有数据移植到其中。

从那里，遍历并修改引用旧表的任何现有查询、代码或表单，并将它们指向新表。

我已经通过 MS Access 完成了这一切……这并不难，但令人头疼。

# google-drive-api - Google 云端硬盘和法语特殊字符

> ID：14245576
> 
> 赞同：1
> 
> 时间：2013-01-09T20:09:11.263
> 
> 标签：google-drive-api

通过具有法语特殊字符的 API 插入文件 mimetype 为“text/doc”或“text/plain”。

该文件被添加没有问题，除非你去谷歌驱动器文件视图或“预览”特殊字符 agrave 'à' 无法识别，但所有其他特殊字符都是。

我可以添加其他可能会影响的内容吗？

```
$created_file = $service->files->insert(
    $file, array(
       'convert' => true,
       'data' => $data,
       'mimeType' => $mime_type
    )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:28:17.807

根据您获取数据的位置，您可能希望在提交之前尝试使用 PHP 的 utf8_encode 编码为 UTF-8：

```
'data' => utf8_encode($data), 
```

[http://php.net/manual/en/function.utf8-encode.php](http://php.net/manual/en/function.utf8-encode.php)

# java - 条件部分获取@ManyToOne 关系

> ID：14245581
> 
> 赞同：0
> 
> 时间：2013-01-09T20:09:34.403
> 
> 标签：java, hibernate, criteria

有没有办法只使用标准来部分获取关联的`ManyToOne`关联实体？

我有以下情况

```
@Entity
public class Foo {
    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    private Bar bar;
    // getters/setters and lots other attributes
}

@Entity
public class Bar {
    private String name;
    @OneToMany(fetch = FetchType.EAGER)
    private Collection<ComplexObject> complexObjects;
    // getters/setters
} 
```

而且我有一个`Criteria`选择我所有的's 并且我想只与它相关联的 `Foo`fetch 一起获取。我不希望s 的集合一起加载。有没有办法在不修改的情况下做到这一点？`name``Bar``ComplexObject``Bar`

我想要这个，因为我想向用户展示类似的东西

```
 Foo.Attr1, Foo.Attr2, Foo.Bar.Name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:16:41.797

不，这是不可能的。当您将一个集合标记为 eagrely fetched 时，它总是被热切地获取。如果你想让它延迟加载，它应该被标记为延迟。

但是您可以只选择您的三个属性：

```
Criteria c = session.createCriteria(Foo.class, "foo");
c.createAlias("foo.bar", "bar");
c.setProjection(Projections.projectionList().add(Projections.property("foo.attr1"))
                                            .add(Projections.property("foo.attr2"))
                                            .add(Projections.property("bar.name"))); 
```

或者，更具可读性：

```
String hql = "select foo.attr1, foo.attr2, bar.name from Foo foo"
             + " inner join foo.bar bar"; 
```

# mysql - 关于 ON DUPLICATE KEY UPDATE 和密钥的 mysql 问题

> ID：14245582
> 
> 赞同：0
> 
> 时间：2013-01-09T20:09:39.243
> 
> 标签：mysql, sql

我当前的数据库表如下所示：

```
CREATE TABLE IF NOT EXISTS `image_ratings` (
 `rating_id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `user_id` int(11) unsigned NOT NULL,
 `photo_id` int(11) unsigned NOT NULL DEFAULT '0',
 `rating` tinyint(3) unsigned NOT NULL DEFAULT '0',
 `rated_user_id` int(11) unsigned NOT NULL,
 `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
 PRIMARY KEY (`rating_id`),
 KEY `user_id` (`user_id`),
 KEY `rated_user_id` (`rated_user_id`),
 KEY `photo_id` (`photo_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

当我这样打电话时：

```
INSERT INTO image_ratings (user_id, photo_id, rating, rated_user_id) VALUES (5, 5975, 8, 5973 ) ON DUPLICATE KEY UPDATE user_id=5, photo_id=5975, rating=8, rated_user_id=5973, timestamp=NOW() 
```

即使我已经有相同 user_id、rated_user_id 和 photo_id 的任何条目，它也会创建一个新条目。这是因为我为 rating_id 定义了 PRIMARY 键吗？

我希望它用新的评级值更新现有条目。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:12:01.770

您需要一个`UNIQUE`复合键上的索引来定义您正在寻找的唯一元组。在您的情况下，它似乎`user_id`并且`photo_id`将是相关的。如果没有这个，唯一的唯一键就是`rating_id`每次都会自动为您填充的键。

另外，请不要在重要的生产数据库上使用 MyISAM。与 InnoDB 相比，它非常脆弱，迟早会损坏而无法修复。

# jquery - 跨子域的 Ajax jquery - 带有 403 Forbidden 错误的 OPTIONS 请求

> ID：14245583
> 
> 赞同：1
> 
> 时间：2013-01-09T20:09:41.373
> 
> 标签：jquery, cross-domain, authorization, preflight

我们的站点托管在 2 个子域上： http: [//site1.mydomain.com](http://site1.mydomain.com)和[http://site2.mydomain.com](http://site2.mydomain.com) ，出于安全原因，它们都需要 Http 授权才能访问它。

site1 有一个链接允许用户登录，它打开一个 jquery 弹出窗口供用户提供凭据。提交成功后，用户可以访问site2。

在 POST 之前，浏览器发出 OPTION 请求（预检）调用，最终出现 403 Forbidden 错误。问题在于站点都需要基本授权，因此 OPTION 请求永远不会到达服务器以添加响应标头。

当请求方法为 OPTIONS 时，使用 Java servlet 过滤器添加以下内容：

访问控制允许来源：来源，

访问控制允许方法：GET、POST、OPTIONS

Access-Control-Allow-Headers：授权、内容类型

有没有办法我们可以通过 PreFlight (OPTIONS) 请求上的 jquery Ajax 传递授权凭据以使其命中上述 Java 过滤器？

我已经尝试使用 headers{'Authorization': 'Basic XXXXX'} 发送它，但似乎没有用。或者有没有其他方法可以使用 Apache 来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T16:22:34.177

看起来永远不会为 OPTIONS 请求发送 cookie 和身份验证详细信息。看[那个答案](https://stackoverflow.com/questions/9103081/send-credentials-in-preflighted-request-cors)

# php - PHP 遍历 $_POST 并按名称使用值

> ID：14245588
> 
> 赞同：27
> 
> 时间：2013-01-09T20:10:10.763
> 
> 标签：php, arrays

我有一个表单，其中包含许多名称为 item1、item2、item13、item43 等的字段，每次这些字段都不同，因为它们是用 AJAX 填充在表单中的。

当用户提交时，我需要执行以下操作：

```
 foreach($_POST['itemX']['tagsX'] as $tag){
    inserttag($tag, X);
  } 
```

其中 X = 1,2,13,43 等。如何迭代 $_POST 值并仅针对其名称以“item”开头后跟 X 标识符的值执行上述操作？

**基于 Piontek 回答的解决方案：**

发布的数据具有以下格式：

```
[item38] => Array([tags38] => Array([0] => aaa,[1] => bbb))
[item40] => Array([tags40] => Array([0] => ccc,[1] => ddd))
[item1] =>  Array([tags1] => Array([0] => eee,[1] => zzz)) 
```

这就是我解析和使用它的方式：

```
foreach($_POST as $key => $value){
    if (strstr($key, 'item')){
        $id = str_replace('item','',$key); 
        foreach($_POST['item'.$id]['tags'.$id] as $tag){
            inserttag($tag, $id);
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-09T20:16:10.080

```
foreach($_POST as $key => $value)
{
    if (strstr($key, 'item'))
    {
        $x = str_replace('item','',$key);
        inserttag($value, $x);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T20:17:06.617

`$_POST`你可以这样循环`foreach`：

```
foreach ($_POST as $key => $value) { ... } 
```

在循环中，您可以评估循环找到的每个键是否符合您的条件。像这样的东西：

```
foreach ($_POST as $key => $value){
   if (substr($key, 0, 4) == "item") {
      $identifier = substr($key, 4);
      if (isset($value['tag' . $identifier])) { inserttag('tag', $identifier); }
   }
} 
```

我不是 100% 确定什么是真实的，什么只是你问题中的占位符。也许我把某些东西当作确凿的事实，但实际上并非如此。您可能需要更详细地解释您的愿望。;)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T20:11:50.837

尝试：

```
foreach($_POST as $key=>$value){
    inserttag($key, $value);
} 
```

`$key`将是元素的名称，`$value`也是值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T20:15:26.723

循环`$_POST`并查看密钥是否包含`'item'`.

```
foreach($_POST as $key=>$value){
    if(preg_match('/item(\d*)/', $key, $match) === 1){
        inserttag($value, $match[1]);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-25T13:48:36.983

如果您的项目编号是连续的，则可以使用 FOR 来实现此目的。将数字 ($i) 与索引上的项目名称连接起来，如下所示：

```
for ($i=0; $i <= $numbeOfItems; $i++) {
 inserttag($_POST['item' . $i]['tags' . $i]), $i;
} 
```

# java - 如何更改 JFrame 中组件的颜色？

> ID：14245592
> 
> 赞同：3
> 
> 时间：2013-01-09T20:10:26.173
> 
> 标签：java, swing, colors, jframe

这是我的代码：

```
public class JavaApplication7 extends JPanel
{
    public static void main(String[] args) {
        JPanel pan = new JPanel();
        JFrame frm = new JFrame();
        frm.add(new JavaApplication7());
        frm.setSize(500, 500);
        frm.setBackground(Color.yellow);
        frm.setForeground(Color.red);
        frm.setVisible(true);
        frm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pan.setSize(768,512);
        pan.setVisible(true);
    }
    public void paintComponent (Graphics g){
        g.drawOval(50, 50, 50, 50);
        g.setColor(Color.CYAN);       
    }
} 
```

我希望椭圆形改变颜色，但是当我运行我的程序时，它仍然是黑色而不是我想要的青色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:11:28.217

您首先绘制椭圆，然后更改颜色。这就是为什么你看不到效果。只需更改语句的顺序：

```
g.setColor(Color.CYAN);
g.drawOval(50, 50, 50, 50); 
```

# visual-studio-2012 - mstest 如何防止自定义日志文件被删除（并防止 .trx 也被删除）

> ID：14245597
> 
> 赞同：3
> 
> 时间：2013-01-09T20:10:46.747
> 
> 标签：visual-studio-2012, mstest

在 Micorosoft MSTest 中，我在单元测试中动态创建自定义日志文件 (.xlsx)`ClassInitialize`并在`ClassCleanup`. 它被创建并填充，但是当测试完成运行时，out 目录中的日志文件以某种方式被删除。

关于如何防止此日志文件和其他文件`TestResults/Out directory`被删除的任何想法？

示例位置：

> C:\selenium\SelenMSTest4\TestResult\Deploy_ZZZ2013-01-09 10_50_03\Out

正在使用 Microsoft MSTest 2012 和 Selenium WebDriver。通过选择从 Visual Studio 2012 运行测试`Test--> Debug-->All Tests`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:30:22.103

创建一个 .runsettings 文件并将“DeleteDeploymentDirectoryAfterTestRunIsComplete”设置为 false 修复了问题，但随后导致找不到部署项（需要对这个复杂的设置进行更多研究）

.runsettings 添加：

```
<RunSettings> 
<MSTest>  
    <DeleteDeploymentDirectoryAfterTestRunIsComplete>False</DeleteDeploymentDirectoryAfterTestRunIsComplete>
</MSTest>
</RunSettings> 
```

# primefaces - 默认情况下无法关闭所有 p:accordionPanel 选项卡

> ID：14245599
> 
> 赞同：15
> 
> 时间：2013-01-09T20:10:52.043
> 
> 标签：primefaces, accordion

我无法关闭所有 p:accordionPanel 选项卡

我尝试了[在 JSF Primefaces 中隐藏手风琴面板的第一个选项卡的](https://stackoverflow.com/q/10189246/999750)问题中推荐的两种解决方案， 但如果手风琴面板的 value 属性是 EL 表达式，它对我不起作用。第一个选项卡始终打开。

我试过了

```
<p:accordionPanel widgetVar="accordion" 
multiple="true" 
value="#{cc.attrs.managedBean.getTabs()}" var="r"> 
```

没有成功

和

```
<p:accordionPanel activeIndex="-1" 
multiple="true" value="#{cc.attrs.managedBean.getTabs()}" var="r"> 
```

只有在没有手风琴面板的价值属性时才有效

谢谢你的帮助。

我有素面 3.3.1

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-03-05T06:55:35.640

使用“null”对我有用： `<p:accordionPanel activeIndex="null">`

我正在使用 PF 3.5 并将 activeIndex 设置为 null 会使选项卡默认关闭。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-20T15:53:52.247

我正在使用 PF 3.5，在这个版本中，我意识到如果我给出的负数`activeIndex`大于 p:accordianPanel 中的选项卡数量，它会折叠所有选项卡。例如

```
<p:accordionPanel activeIndex="-2">
   <p:tab title="Hello">
   </p:tab>
   <p:tab title="World">
   </p>
 </p:accordionPanel> 
```

显示折叠所有选项卡的手风琴。让我知道这是否适合您，或者您是否找到了其他解决方案。谢谢。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-15T16:40:24.457

我通过简单地将其留空来解决了这个问题。这边走：`activeIndex=""`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-07T14:34:01.807

在我的场景中，设置 activeIndex="-1" 或 activeIndex="null" 或 activeIndex="-" 或 activeIndex="" 不起作用。

**我从经理 bean 返回 -1 并且它起作用了。Getter 总是返回 -1 而 setter 什么也不做。**

```
activeIndex="#{managerBean.activeTabIndices}" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T09:08:15.443

尝试`<p:accordionPanel activeIndex="null" multiple="true" ...>`

如果您编写类似的东西`<p:accordionPanel activeIndex="x" multiple="true" ...>`，primefaces 会产生 javascript 错误“ReferenceError: x is not defined”。该函数显然需要一个有效数字作为 activeIndex，但能够处理“null”而不会出错。

# ios - IOS：后退两个视图

> ID：14245603
> 
> 赞同：1
> 
> 时间：2013-01-09T20:11:23.050
> 
> 标签：ios, xcode, uiviewcontroller

我已经被这个问题困扰了一段时间了，找不到任何有用的信息来说明如何做到这一点..

我有一个基本视图（视图 1），我可以在其中选择表视图中的项目。在项目“页面”（视图 2）上，我可以选择编辑该项目，触发模态视图（视图 3）。在这个模态视图中，我可以选择删除这个项目。如果用户按下该按钮并确认他们要删除该项目，我想将应用程序发送回查看 1..

我尝试了许多不同的东西（`popToViewController`,等） `pushViewController`，`dismissViewController`但我什么也做不了。如果我关闭模式，则视图 2 不会关闭。有时甚至模态也不会消失。基本视图是 a `UITableViewController`，其他两个是`UIViewControllers`，我正在使用`storyboard`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:46:10.040

您有几个选项可以使用`NSNotificationCenter`或使用[委托](https://stackoverflow.com/questions/8108422/how-do-you-pop-a-modal-view-and-the-previous-navigation-controller-view-at-once)模式。 [NSNotificationCenter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)易于使用但也很棘手。

要使用通知中心，您需要将观察者添加到您的视图控制器类。当您关闭模式视图控制器时，您会通知您的视图 2 视图 3 现在已关闭，view2 可以自行关闭.....

所以基本上当你通知中心时，无论通知什么，它都会运行一个方法等......

假设您在视图 3 中，您想驳回您的观点。

在 view3 .m

```
-(IBAction)yourMethodHere
{
        //dissmiss view
        [self.navigationController dismissModalViewControllerAnimated:YES];
         // or [self dismissModalViewControllerAnimated:YES]; whateever works for you 

        //send notification to parent controller and start chain reaction of poping views
        [[NSNotificationCenter defaultCenter] postNotificationName:@"goToView2" object:nil];
} 
```

在视图 2 中。H

```
// For name of notification
extern NSString * const NOTIF_LoggingOut_Settings; 
```

在视图 2.m 之前`@implementation`之后`#imports`

```
NSString * const NOTIF_LoggingOut_Settings = @"goToView2";

    @implementation
    -(void)viewDidAppear:(BOOL)animated{

        // Register observer to be called when logging out
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(loggingOutSettings:)
                                                     name:NOTIF_LoggingOut_Settings object:nil];
    }
    /*---------------------------------------------------------------------------
     * Notifications of 2 view
     *--------------------------------------------------------------------------*/
    - (void)loggingOutSettings:(NSNotification *)notif
    {
        NSLog(@"Received Notification - Settings Pop Over  popped");

        [self.navigationController popViewControllerAnimated:NO];// change this if you do not have navigation controller 

//call another notification to go to view 1 
        [[NSNotificationCenter defaultCenter] postNotificationName:@"goToFirstView" object:nil];
    } 
```

在 view1.h 的第一个视图中添加另一个观察者 `extern NSString * const NOTIF_FirstView;`

在视图中 1.m before `@implementation`after`#imports`

`NSString * const NOTIF_FirstView = @"goToFirstView";`

```
@implementation
-(void)viewDidAppear:(BOOL)animated{

    // Register observer to be called when logging out
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(doYourThing:)
                                                 name:NOTIF_FirstView object:nil];
}
/*---------------------------------------------------------------------------
 * Notifications of 1 view
 *--------------------------------------------------------------------------*/
- (void)ldoYourThing:(NSNotification *)notif
{

 // do your thing
} 
```

# java - Java 中如何使用 FileInputStream

> ID：14245610
> 
> 赞同：2
> 
> 时间：2013-01-09T20:11:42.747
> 
> 标签：java, io, fileinputstream

我试图从 Oreilly 的 Java IO 中理解以下代码。它应该从文件中读取并将其写入控制台：

```
try {
  FileInputStream fis = new FileInputStream("README.TXT"); 
  int n;     
  while ((n = fis.available()) > 0) {
    byte[] b = new byte[n];
    int result = fis.read(b);
    if (result == -1) break;
    String s = new String(b);
    System.out.print(s); 
  } // End while
} // End try
catch (IOException e) {System.err.println(e);}
System.out.println(); 
```

我的问题是：

该`available`方法将立即找到可用的最大长度，然后`read`可以调用该方法将其打印出来。这应该在一次调用中完成，为什么作者要`while`循环执行它，不断检查可用性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T20:13:37.103

从[available() 的 javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#available%28%29)：

> 返回可以从此输入流中读取（或跳过）的剩余字节数的估计值，而不会被下一次调用此输入流的方法阻塞。下一次调用可能是同一个线程或另一个线程。单次读取或跳过这么多字节不会阻塞，但可能会读取或跳过更少的字节。

流可能会阻塞，直到您读取其中的一部分。因此，您必须每次只阅读可用的内容。调用 后`read`，流将被解除阻塞。

因此，在下一次迭代中仍有可用字节，除非到达文件末尾。[如read() 的 javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#read%28byte%5B%5D%29)所述，此时`result`为 -1 ：

> 退货
> 
> 读入缓冲区的总字节数，如果由于已到达文件末尾而没有更多数据，则为 -1。

请注意，您通常不会阅读所有可用的内容，因为您想使用合理大小的缓冲区（并重用它们）。在这种情况下`n`将是`Math.min(BUFFER_SIZE, fix.available())`.

# ld - 哪个手册页描述了 ld 链接器脚本语法？

> ID：14245612
> 
> 赞同：3
> 
> 时间：2013-01-09T20:11:46.420
> 
> 标签：ld

我很确定`ld`链接器脚本语法有一个手册页，但我找不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T11:24:57.353

如果您喜欢比 更方便的东西`info`，这里有一个可浏览的 HTML 版本：[ld.info: Scripts](http://www.slac.stanford.edu/comp/unix/package/rtems/doc/html/ld/ld.info.Scripts.html)。但它可能并不完全是最新的，因为日期是 2004 年。

另一个在这里： [链接器脚本](http://www.sourceware.org/binutils/docs-2.12/ld.info/Scripts.html)。没有日期，而是一个版本，即 Binutils 2.12（不是那么旧）。

您可能会发现其他一些人在网上搜索该确切表达式：`"ld.info: Scripts"`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T01:56:19.823

[GNU ld](http://www.gnu.org/software/binutils/)的脚本语法记录在其 texinfo 文档中。

在 GNU/Linux 系统上，您可以使用以下命令访问相关文档：

```
% info ld Scripts 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T20:14:07.800

不知道你在找什么，但*man ld*为我工作。

另外，请尝试[http://linux.die.net/man/1/ld](http://linux.die.net/man/1/ld)

或者要获得 LD 的完整手册，请从 binutils 或此处获取：

[http://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/ld.html](http://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/ld.html)

（在捆绑到 binutils 之前）

# ios - iOS 在容器内移动视图会混淆触摸区域

> ID：14245613
> 
> 赞同：2
> 
> 时间：2013-01-09T20:11:46.743
> 
> 标签：ios, view, containers

我故意在视图容器中放置了 2 个视图（表视图），它们部分重叠。视图 B 与视图 A 的大约 50% 重叠。

当我以编程方式移动视图 B 使其不再重叠时，视图 A 中先前重叠的区域不会响应触摸事件，也就是说，约 50% 不会。只有最初没有重叠的区域才会这样做。此外，在视图 B 中，现在在父视图中占据新空间的部分不响应触摸事件，只有恰好占据旧区域的视图部分。

我用来移动视图的代码很简单：

```
UIView* viewB = [self.childViewControllers.lastObject view];

CGRect rect = viewB.frame;
rect.origin.x += 200;

[UIView animateWithDuration:0.2 animations:^{
    viewB.frame = rect;
}]; 
```

从视觉上看，视图会移动，但触摸区域不会。

我在 iOS 6 中使用了新的故事板“容器视图”机制来最初放置视图。

我不知道为什么会这样。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:07:40.470

事实证明，当 xCode 在我的故事板中添加“容器视图”时，它会将我的视图嵌入到父视图中。所以我需要做以下事情：

```
UIView* viewB = [[self.childViewControllers.lastObject view] superview];

CGRect rect = viewB.frame;
rect.origin.x += 200;

[UIView animateWithDuration:0.2 animations:^{
    viewB.frame = rect;
}]; 
```

因为容器将我的视图嵌入到它自己的视图中，所以我需要获取超级视图并使用它。

如果我以编程方式完成所有这些工作，即添加容器并使用容器 API 查看我自己，我的原始代码就可以工作。

# sql - 消除所有行直到某个值

> ID：14245617
> 
> 赞同：1
> 
> 时间：2013-01-09T20:11:52.597
> 
> 标签：sql

我使用的是旧版本的 sybase，它没有像 Lead 这样的关键字。

我有一张如下图所示的表格。

```
类型 行 时间 数量        
第一类 1 10:01:01.000 50          
猫 1 2 10:01.01.001 0          
1 类 3 10:01:01.002 1000          
1 类 4 10:01.01.003 100          
1 类 5 10:01:03.001 100          

```

我也有上述数据可用于 cat2、cat3 等。数据按时间递增的顺序排列。

我想从上表中生成一个新表，其中的值仅从 10.01.01.002 开始，因为它是满足最低要求数量 1000 的第一行/时间。即在新表中包括第 3、4 和 5 行，因为只有在第 3 行才满足最小数量。以上数据是针对cat1、cat2等的。

上表很大，所以我正在寻找一种有效的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:16:57.007

您可以使用 TOP 1 查找条件的第一项，然后在 select 语句中使用它。

像这样（不确定您的确切要求）

```
declare @marker datetime

SELECT TOP 1 @marker = Time 
FROM TableName 
WHERE Quantity > 1000 ORDER BY Row DESC

SELECT * 
FROM TableName 
WHERE Time > @marker 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:15:11.343

`SELECT * FROM tables_name WHERE Row >= 3`
我不确定我是否正确理解了您的问题。您是否真的想要第三行之后的行，或者它们只是作为格式的一部分自动添加？这仅在 Row 是主键时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:18:33.167

如果我正确理解你的问题，你能做这样的事情吗？

```
SELECT * 
FROM TABLE T 
    JOIN (
        SELECT Type, Row 
        FROM TABLE 
        WHERE Quantity >= 1000
    ) T2 ON T.Type = T2.Type
WHERE T.Row >= T2.Row 
```

这是[SQLFiddle](http://sqlfiddle.com/#!3/03e3d/2)（使用 SQL Server 授予，因为我不认为 sybase 是一个选项，但我相信 sybase 支持子查询）

# iphone - 使用 NSDateFormatter dateFromString

> ID：14245618
> 
> 赞同：0
> 
> 时间：2013-01-09T20:11:54.547
> 
> 标签：iphone, objective-c, nsdate, nsdateformatter

我有一个代码：

```
NSString *dateStr = [currentElementValue stringByRemovingNewLinesAndWhitespace];

NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"EE, dd MMM yyyy hh:mm:ss ZZ"]; 
```

我从服务器接收日期作为字符串，如：

```
Tue, 08 Jan 2013 13:21:54 +0000 
```

但这是我的问题，当我使用时：`[dateFormat dateFromString:dateStr]`

```
Mon, 07 Jan 2013 10:31:30 +0000 converted to 07-01-2013 
```

但`Wed, 02 Jan 2013 15:12:57 +0000` 无法转换。

有人知道为什么会这样吗？

任何帮助，将不胜感激。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:36:39.843

[该答案](https://stackoverflow.com/questions/2993578/whats-wrong-with-how-im-using-nsdateformatter)详细描述了所有格式说明符。`hh`代表“小时（1-12，零填充）” - 所以你不能`15h`在这里写。如果您希望使用 24 小时时间格式，请`HH`改用。

```
[dateFormat setDateFormat:@"EE, dd MMM yyyy HH:mm:ss ZZ"]; 
```

# webserver - 如何使用 phpmailer 从网络服务器发送电子邮件

> ID：14245622
> 
> 赞同：0
> 
> 时间：2013-01-09T20:11:59.183
> 
> 标签：webserver, web-hosting, phpmailer, php

我可以从本地服务器发送电子邮件。但是，当我尝试从网络服务器发送电子邮件时，显示以下消息：消息未发送邮件程序错误：语言字符串加载失败：connect_host

这是我的代码：

```
<?php
require("class.phpmailer.php");

$name=$_POST['name'];
$company=$_POST['company'];
$email=$_POST['email'];
$phone=$_POST['phone'];
$subject=$_POST['subject'];
$question=$_POST['question'];

      $mailer = new PHPMailer();
        $mailer->IsSMTP();
        $mailer->Host = 'ssl://smtp.gmail.com';
        $mailer->Port = 465; //can be 587
        $mailer->SMTPAuth = TRUE;
        $mailer->Username = 'info.dhuronto@gmail.com';  // Change this to your gmail address
        $mailer->Password = '*********';  // Change this to your gmail password
        $mailer->From = 'info.dhuronto@gmail.com';  // Change this to your gmail address
        $mailer->FromName = 'Client'; // This will reflect as from name in the email to be sent
        $mailer->Body = "Name :".$name."\n\nCompany :".$company."\n\nEmail :".$email."\n\nPhone :".$phone."\n\n\n".$question."";
        $mailer->Subject = $subject;
        $mailer->AddAddress('support@dhuronto.com');  // This is where you want your email to be sent
        /*$mailer->AddAttachment('attach_file/'.$_FILES["file"]["name"]);*/
        if(!$mailer->Send())
        {
           echo "Message was not sent<br/ >";
           echo "Mailer Error: " . $mailer->ErrorInfo;
        }
        else
        {
           header ('Location:index.html');
        }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:14:49.160

尝试将所有 PHPmailer 文件上传到您的网络服务器。您可能忘记了语言文件夹。

您可能还需要设置语言：

```
$mail = new PHPMailer();
$mail->SetLanguage( 'en', 'phpmailer/language/' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:16:16.417

我认为您必须在脚本中设置语言，例如

```
<?php
require("class.phpmailer.php");
SetLanguage('en','phpmailer/language/');

$name=$_POST['name'];
$company=$_POST['company'];
$email=$_POST['email']; 
```

# php - 正则表达式查找除 x,a,n,- 之外的所有字符

> ID：14245624
> 
> 赞同：2
> 
> 时间：2013-01-09T20:12:03.677
> 
> 标签：php, regex

这是我在此的头一篇博文。我已经开始写一些，并且总是设法自己弄清楚。唉，正则表达式让我想在街上打我的脸，我被困住了。

我正在尝试编写一个正则表达式，它将检查字符串中是否有任何不是 x、a、n 或 - 的字符。这是我所拥有的：

```
 preg_replace( '/^[^xan\-]+$/' , 'x' , $this->str_key_mask ) 
```

我确信这很简单，但我尝试添加、更改和删除元字符，但无法获得我想要的结果。

例如，如果我传入 xan-nax-jxy，我想取回 xan-nax-xxx，因为将 j 和 y 替换为 x。如果我传入 xxx-aaa-nnn，它应该返回 xxx-aaa-nnn，因为不需要替换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:15:30.390

使用`^`and锚点，您将只匹配*完全*由非 x、a、n 或 - 字符`$`组成的字符串。由于您想分别匹配每个字符并用“x”替换每个字符，因此只需删除锚点和重复项：

 *```
preg_replace( '/[^xan\-]/' , 'x' , $this->str_key_mask ) 
```

如果您希望像“jy”这样的字符串变为“xx”，则必须删除重复项。相反，如果您希望 'jy' 变为 'x'，请保留`+`您的字符类之后，以便将连续的字符一起替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:15:58.220

您`preg_replace`将只匹配一个完全由 组成的字符串`[^xan\-]`，因为`^`它与行首匹配，并且`$`与行尾匹配。如果您需要替换字符串中出现的几次字符组，我建议使用

```
preg_replace('/[^xan-]/', 'x', $this->str_key_mask) 
```

并运行几次，直到字符串不再改变。

*注意*：编程语言之间的行为`preg_replace`不同。在您的语言中，它也可以替换所有出现的地方（例如，在 PHP 中就是这样）。

也许有更好的方法可以做到这一点，但我现在想不出什么:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:16:30.377

```
preg_replace( '/[^xan-]/' , 'x' , $this->str_key_mask) 
```*

# c - 新安装的 Visual Studio 中未安装标准 C/C++ 库

> ID：14245627
> 
> 赞同：0
> 
> 时间：2013-01-09T20:12:31.400
> 
> 标签：c, visual-studio, visual-studio-2012

我格式化了我的电脑，我首先安装了 VS2012 候选版本，然后是 VS2010 Ultimate，最后是[DreamSpark](http://www.dreamspark.com/)的 VS2012 Professional 。另外，安装VS2012后，我卸载了VS2010和VS2012 RC

我可以打开解决方案并完美编译它们，但是当我尝试使用`#include`C/C++ 标准库中的 s 时，会弹出一个错误提示`cannot find source file stdlib.h`

我去了VS2012的安装目录，在VC的include文件夹中，我只有2个.h文件（`vsgcapture`和`srv`），没有别的了。

我检查了一下，有一个名为`Microsoft Visual Studio 10.0`VS2010 的目录，里面有 C/C++ 的 .h 和 .lib 文件，所以我将所有内容复制/粘贴到 VS2012 并尝试编译，但出现了一些奇怪的错误。

所以我从控制面板卸载了所有与 VS 相关的东西，我从 Program Files 中删除了所有目录，然后我再次安装了 VS2012 Professional，VC 目录又是空的。我尝试从设置中修复它，但仍然是同样的问题。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:37:07.730

我通过在另一台计算机上安装 VS2012 解决了这个问题，复制所有`.lib`s 和`.h`s 所在的 VC 目录中的所有内容，并将它们粘贴到我的安装中。

现在它工作得很好。

我在另一个网站上问过，我发现这可能是因为 Visual Studio 安装过程中的错误。如果您没有另一台计算机来执行此操作，则可以将其安装在虚拟机上并从那里复制它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T06:36:43.570

对于遇到相同问题并正在寻找解决方案而不是从另一台机器复制文件的其他人，请尝试[此处](http://social.msdn.microsoft.com/Forums/vstudio/en-US/a987f4fa-676f-4fda-ab69-2c6bcc2684c3/visual-studio-c-2012-standard-header-files-are-missing?forum=vssetup)Jeff_322089BE-DFC2-11DF-B454-B541DFD72085 发布的解决方案。

# html - 导航宽度作为正文宽度

> ID：14245637
> 
> 赞同：0
> 
> 时间：2013-01-09T20:13:20.253
> 
> 标签：html, css, navigation, width

我有一个带有 5 个按钮的导航：一个是活动的，四个是静态的。我使用`<ul>`一个箭头作为活动按钮。所以代码看起来像这样：

```
 <ul>
        <li><div class="btn_active"><a href="#">active</a></div></li>
        <li><div class="btn_active_arrow"></div></li>
    </ul>
        <div class="seperator"></div>
    <ul>
        <li><div class="btn_static"><a href="#">static</a></div></li>
    </ul> 
```

我有一个宽度为 95% 的身体。我怎样才能让导航像身体一样长。

**演示：www.dwnl.vjordanov.com/nav**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:25:04.393

为所有内容设置百分比宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:25:08.260

导航在 body 元素内，所以只需使用：

``#navigation{width: 100%;}``

这会将导航元素宽度设置为其父元素宽度的 100%。

# c# - 如何在 MonoDevelop 中跟踪 WebClient 请求/对应用程序输出（控制台）的响应

> ID：14245638
> 
> 赞同：1
> 
> 时间：2013-01-09T20:13:32.200
> 
> 标签：c#, .net, mono, monodevelop, webclient

我正在 MonoDevelop IDE (3.0.6) 中开发一个跨平台的移动应用程序。在我的应用程序的网络层，我正在使用`System.Net.WebClient`该类向远程服务器发送请求。

我能够成功发送请求并处理响应（例如，使用 `WebClient.UploadStringAsync(..)`方法和`WebClient.UploadStringCompleted`事件处理程序），但我不知道如何在调试器的控制台中查看有关正在发送的请求的信息（Uri、标头、正文、状态代码），这对于调试很有用。

有谁知道我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:21:15.093

WebClient 类提供了一堆属性，如、`Headers`和其他可以帮助您分析 HTTP 请求的属性。[在这里](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)查看更多 由于您希望在调试器控制台中获得此信息，请使用此方法。我宁愿建议为此使用像[Fiddler](http://www.fiddler2.com/fiddler2)这样的网络监控工具。`BaseAddress``ResponseHeaders`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:20:20.033

您必须手动将它们写入控制台。你可以做类似的事情

```
Debug.WriteLine (uri.ToString ());
Debug.WriteLine (body.ToString ()); 
```

等等。您只需要参考 System.Diagnostics。

# html - HTML5 视频 / 视频海报结尾

> ID：14245644
> 
> 赞同：32
> 
> 时间：2013-01-09T20:13:48.713
> 
> 标签：html, video

```
<video controls="controls" poster="http://gifs.gifbin.com/1233925271_8be9acc.gif" style="width:800px;"> 
```

与上述; 在 HTML5`<video>`标签内，我可以添加一张海报；图像或动画 .gif 的效果很好，并在“播放”实际视频之前播放/运行。

现在，我如何添加图像；特别是在视频播放后将运行的 .gif（动画 .gif 与海报一起使用）？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-04-10T06:15:15.270

一种直接的方法：

```
<script>
var video = document.querySelector('video');       
video.addEventListener('ended', function() {
  video.load();     
});
</script> 
```

实际上，在更改视频标签的 src 时，您会隐式调用 load() 。

此方法需要再次请求媒体 URL，并且根据缓存设置，它可能会重新下载完整长度的媒体资源，从而导致客户端不必要的网络/CPU 使用。

解决此问题的更合适的方法是在视频标签顶部使用叠加图像/div，并在视频开始时将其隐藏。当结束事件触发时，只需再次显示叠加图像。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-08-08T13:52:16.843

这是我在视频播放完毕后看到海报时所做的：

```
# Show poster at the end of the video
$('video').on('ended',->
  $('video')[0].autoplay=false
  $('video')[0].load()
) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-09T20:46:45.740

**简而言之：**您需要在自定义 JavaScript 中添加 `video.addEventListener('ended',function() {})`和触发`video.load()`。

这是播放视频后重定向的相关帖子，您可以相应地对其进行修改-[播放后重定向html5视频](https://stackoverflow.com/a/10421554/1437962)。

**查找详细信息的**参考资料：****

 ***   [您需要了解的有关 HTML5 视频和音频的所有信息](http://dev.opera.com/articles/view/everything-you-need-to-know-about-html5-video-and-audio/)
*   [可以绑定的媒体事件](http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#mediaevents)
*   [HTML5 视频事件和 API](http://www.w3.org/2010/05/video/mediaevents.html)
*   [MSDN - 使用 HTML5 视频事件](http://msdn.microsoft.com/en-us/library/hh924822%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-04T11:16:52.757

尝试这个

```
var video=$('#video_id').get(0);        
video.play();
video.addEventListener('ended',function(){
    v=video.currentSrc;
    video.src='';
    video.src=v;            
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-31T09:02:01.920

最后我得到了解决方案：视频将首次自动播放，在视频结束时，您将看到海报图片：

```
<script src="http://ajax.googleapis.com/ajax/libs/prototype/1.7/prototype.js"></script>
<script type="text/javascript">
 document.observe('dom:loaded', function(evt){
    $('#myVideo').each(function(elm){
        elm.play();
        var wrapper = elm.wrap('span');
        var vid = elm.clone(true);
        elm.observe('ended', function(){
          wrapper.update(vid);
       });
    });
 });
</script>

<video id="myVideo" poster="1.png" >
    <source src="1.mp4" type="video/mp4" />
</video> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-08-02T11:31:25.333

这对我有用。

```
var video=$('#video_id').get(0);        
video.play();
video.addEventListener('ended',function(){
    v=video.currentSrc;
    video.src='';
    video.src=v; 
    video.pause();          
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-29T07:27:33.460

如果你想要一张海报，这是唯一的要求，那么我会说只需在视频文件中添加一个结束帧作为该海报并跳过加载不必要的 JS。当视频结束时，您将看到现在是您添加的海报的结束帧。

如果您想在最后显示视频海报，或者换句话说重新加载视频，请使用 EL Yusubov 如上所示的自定义事件

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-06T18:50:05.437

我看到两种方法可以解决您的问题。

第一个将在视频结束后将当前帧设置为位置 0（第一帧）。你可以设置任何你喜欢的框架。建议使用此解决方案。

```
<video controls id="myVideo" poster="test.jpg">
  <source src="test.mp4" type="video/mp4" />
</video>
<script>
let myVideo = document.getElementById("myVideo");
myVideo.onended = function() {
  myVideo.currentTime = 0;
};
</script> 
```

下一个将重新加载视频源，因此海报将再次出现。根据 in 的规范，`poster`它`video`只会显示到视频开始一次。之后，再次获得海报的唯一方法 - 重新加载视频`src`和一个`poster`，只是为了确保。重新加载后会更稳定一些`poster`。

```
<video controls id="myVideo" poster="test.jpg">
  <source src="test.mp4" type="video/mp4" />
</video>
<script>
let myVideo = document.getElementById("myVideo");
myVideo.onended = function() {
  myVideo.poster = "test.jpg"
  myVideo.src = "test.mp4"
};
</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-04T20:45:20.503

我有同样的目标，并找到了一个解决方案，方法是使用 jQuery 在结束时将视频源重置为自身。现在我得到了我在播放前后的动画 gif 海报。这是一个简单的 javascript 播放函数和 jQuery 代码。

```
function play()
    {
    movie_ID.play(); 

    $(document).ready(function(){
         $("#movie_ID").bind("ended", function() {
        $('#movie_ID').attr('src', 'movie_ID.src');
            });
         });   
     } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-01-06T11:03:47.100

通过在视频本身的末尾添加 1 个额外的帧（海报）来解决，因为网站不支持插入 javascripts**

# ruby - Ruby：FileUtils.cp_r 和无效的多字节字符异常

> ID：14245645
> 
> 赞同：2
> 
> 时间：2013-01-09T20:13:50.680
> 
> 标签：ruby

使用 FileUtils.cp_r 时出现以下异常：

```
 invalid multibyte character
 /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/fileutils.rb:1503:in `descendant_diretory?' 
```

在我正在复制的目录中，还有另一个带有一些特殊字符的目录。但我认为 Ruby 应该处理它，因为运行 cp shell 命令可以正常工作。

关于如何让 Ruby 忽略此异常并完成目录复制的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:35:19.880

```
# encoding: UTF-8 
```

在你的红宝石脚本之上。

[https://github.com/m-ryan/magic_encoding](https://github.com/m-ryan/magic_encoding)解决了 ruby​​ 的大部分编码问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:24:15.280

`# encoding: ...`仅当相关数据来自脚本源时，上述内容才有效，此处并非如此。

发生异常是因为目录的名称不能用外部编码表示（很可能是 UTF-8，继承自程序环境）。

正如 zed_0xff 指出的那样，解决此问题的一种方法是`Encoding.default_external = 'BINARY'`（这是 的别名`'ASCII-8BIT'`）。

另一种方法是在二进制语言环境中运行整个程序：`LANG=C ruby doit.rb`.

请参阅[Ruby 1.9 的三种默认编码](http://blog.grayproductions.net/articles/ruby_19s_three_default_encodings)，这是解释 Ruby 1.8 和 1.9 中 Unicode 情况的精彩系列的一部分。

# ruby-on-rails - 通过rails中关联模型的子类查询

> ID：14245654
> 
> 赞同：0
> 
> 时间：2013-01-09T20:14:32.263
> 
> 标签：ruby-on-rails, associations, rails-activerecord, sti

我使用单表继承 (STI) 创建了一些模型，这些模型从一个共同的父类继承而来。一个单独的模型与超类有关联。例如：如下...

```
class Fruit < ActiveRecord::Base
  has_many :smoothies
end

class Apple < Fruit
end

class Banana < Fruit
end

class Smoothie < ActiveRecord::Base
  belongs_to :fruit
end 
```

有没有办法在不为每个子类手动创建方法的情况下查询某个子类？

`my_smoothie.apple`如果`Apple`与_ `my_smoothie`_`Apple`

**更新**

我的用例实际上是我有一个冰沙的关系，我想做`some_smoothies.apples`一个包含任何相关苹果的关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:02:01.220

如果您执行 my_smoothie.fruit，您应该返回一个 Apple 对象（不是 Fruit 对象，Rails 魔法）。你可能会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T11:44:20.747

你能做到吗？

```
my_smoothie.fruit.where(type: "Apple") 
```

当然，如果您需要动态推断子类的名称，您可以使用

```
subclass_object.class.to_s # if you have an instantiated object e.g. of 'apple'
subclass.to_s # if you start form the subclass e.g. of Apple 
```

如果这对您来说没问题，请考虑为其创建命名[范围](http://railscasts.com/episodes/108-named-scope)

# java - net.sf.json.JSONObject 的转义

> ID：14245656
> 
> 赞同：0
> 
> 时间：2013-01-09T20:14:34.633
> 
> 标签：java, json, json-lib

当我必须在`JSONObject.fromObject`这里弹出一个异常时，'true' = 'true' pq 是另一个单引号内的单引号，有人知道这个 API 的某种转义字符吗？

```
public static void main(String[] args) {

        String json = "{gA:[ {c:{f:'C#',o:'=',v1:' ('true' = 'true' ) ' }}]}";

        final Map<String, Object> map = new HashMap<String, Object>();

        try {

            JsonConfig cfg = new JsonConfig();
            cfg.setRootClass(LinkedHashMap.class);
            cfg.setArrayMode(JsonConfig.MODE_OBJECT_ARRAY);
            cfg.setHandleJettisonSingleElementArray(false);
            JSONObject jsonObjeto = JSONObject.fromObject(json, cfg);
            System.out.println(jsonObjeto.toString());
        } catch (final JSONException e) {

            e.printStackTrace();
        }

    } 
```

例外：

```
net.sf.json.JSONException: Expected a ',' or '}' at character net.sf.json.JSONException: Expected a ',' or '}' at character 31 of {gA:[ {c:{f:'C#',o:'=',v1:' ('true' = 'true' ) ' }}]}  
    at net.sf.json.util.JSONTokener.syntaxError(JSONTokener.java:499)  
    at net.sf.json.JSONObject._fromJSONTokener(JSONObject.java:1099)  
    at net.sf.json.JSONObject.fromObject(JSONObject.java:159)  
    at net.sf.json.util.JSONTokener.nextValue(JSONTokener.java:348)  
    at net.sf.json.JSONObject._fromJSONTokener(JSONObject.java:1008)  
    at net.sf.json.JSONObject.fromObject(JSONObject.java:159)  
    at net.sf.json.util.JSONTokener.nextValue(JSONTokener.java:348)  
    at net.sf.json.JSONArray._fromJSONTokener(JSONArray.java:1131)  
    at net.sf.json.JSONArray.fromObject(JSONArray.java:125)  
    at net.sf.json.util.JSONTokener.nextValue(JSONTokener.java:351)  
    at net.sf.json.JSONObject._fromJSONTokener(JSONObject.java:1008)  
    at net.sf.json.JSONObject._fromString(JSONObject.java:1201)  
    at net.sf.json.JSONObject.fromObject(JSONObject.java:165)  
    at br.com.michel.json.JsonTest.main(JsonTest.java:28) 
```

我想要的 json 输出：

{"ga": [{"c": {"f", "C#", "o": "=", "v1": "('true' = 'true')"}}]}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T01:54:52.047

您可以使用反斜杠转义单引号（由于我们使用的是 Java 字符串文字，因此必须对其进行转义）：

```
String json = "{gA:[ {c:{f:'C#',o:'=',v1:' (\\'true\\' = \\'true\\' ) ' }}]}"; 
```

使用修改后的变量运行代码`json`会产生以下输出：

```
{"gA":[{"c":{"f":"C#","o":"=","v1":" ('true' = 'true' ) "}}]} 
```

此字符串与您所需的输出不同，因为它具有元素`v1`而不是，`u`并且值没有被修剪。不过，我不确定这是否是复制/粘贴类型。如果这就是你所追求的，那么修改你的 parsed 就很简单了`JSONObject`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:47:54.170

当我放这个 Json 时，花花公子更多：

{gA:[{c:{f:'FIXO',o:'=',v1:'T'}},{gO:[{c:{f:'ID_USUARIO',o:'=',vc: '200'}},{c:{f:'ID_PERFIL',o:'=',vc:'28'}},{c:{f:'C#',o:'=',v1:'( \'true\' = \'true\')'}}]}]}

溢出此异常：

net.sf.json.JSONException：在 {gA:[{c:{f:'FIXO',o:'=',v1:'T'}},{ gO:[{c:{f:'ID_USUARIO',o:'=',vc:'1'}},{c:{f:'ID_PERFIL',o:'=',vc:'1'}} ,{c:{f:'C#',o:'=',v1:'(\'true\' = \'true\')'}}]}]}

# servlets - ManagedBean 类中的 Java Faces ServletContext 对象

> ID：14245657
> 
> 赞同：5
> 
> 时间：2013-01-09T20:14:40.263
> 
> 标签：servlets, jsf-2

我刚开始学习JSF。

在使用示例时，我觉得需要访问 MyBean 类中的 ServletContext 对象。我想使用我使用 Listener 放入 ServletContext 中的对象。我可以这样做吗？ServletContext 在 Beans 中是否也有其范围？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T20:24:40.600

它只是可用的[`ExternalContext#getContext()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getContext%28%29)。另请参阅[它的 javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getContext%28%29)：

> ## 获取上下文
> 
> `public abstract java.lang.Object getContext()`
> 
> 返回当前应用程序的应用程序环境对象实例。
> 
> 在应用程序启动或关闭期间调用该方法有效。如果在应用程序启动或关闭期间调用，这将返回与在实际请求期间调用返回的容器上下文实例（或）相同的容器上下文实例（或）`ServletContext`。`PortletContext``getContext()``ExternalContext``FacesContext`
> 
> *Servlet*：这必须是当前应用程序的`javax.servlet.ServletContext`实例。

所以，这应该这样做：

```
public void someMethod() {
    ServletContext servletContext = (ServletContext) FacesContext
        .getCurrentInstance().getExternalContext().getContext();
    // ...
} 
```

* * *

**与具体问题无关**，根据具体的功能要求，这可能不是具体问题的正确解决方案。普遍的共识是您的 JSF 代码应该尽可能地*没有*任何`javax.servlet.*`依赖项/导入。您的问题并不完全清楚，但如果您确实打算访问您放在 servlet 上下文中的属性，那么只需从中获取它[`ExternalContext#getApplicationMap()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getApplicationMap%28%29)。

例如在`ServletContextListener`：

```
event.getServletContext().setAttribute("foo", foo); 
```

然后在 JSF

```
Foo foo = (Foo) FacesContext.getCurrentInstance().getExternalContext()
    .getApplicationMap().get("foo"); 
```

甚至只是通过`@ManagedProperty`

```
@ManagedProperty("#{foo}")
private Foo foo; // +setter 
```

# doctrine-orm - 教义复合主键

> ID：14245665
> 
> 赞同：3
> 
> 时间：2013-01-09T20:14:58.283
> 
> 标签：doctrine-orm, composite-key, composite-primary-key

我知道 Doctrine 2.0 支持复合键。但我不太能够找出我在寻找什么。

我有 3 个表 => 代理、客户端和 client_group。
代理创建客户端和客户端组。Client_Group 有一个复合主键 => id, agent_id。agent_id 来自代理表。虽然我希望 id 自动递增，但 agent_id 来自代理表。
我正在尝试编写 yaml 文件，但我不确定如何将此 agent_id 指定为 client_group 中的主键。client_group_id 和 agent_id 是客户端表中的外键。此外，我确实阅读了 Doctrine 文档，复合 PK 不能具有自动递增的字段。

所以我想知道我是否真的可以做我打算在这里制作的东西。

仅显示关系的 yaml 如下所示：

***代理人：***

```
 oneToMany:
    client_group:
      targetEntity: ClientGroup
      mappedBy: agent
    client:
      targetEntity: Client
      mappedBy: agent 
```

***客户组***

```
 manyToOne:
    agent_id:
      targetEntity: Agent
      inversedBy: client_group
      joinColumn:
        name: agent_id
        referencedColumnName: id

  oneToMany:
    client:
      targetEntity: Client
      mappedBy: client_group 
```

***客户***

```
 manyToOne:
    client:
      targetEntity: ClientGroup
      inversedBy: client
      joinColumn:
        name: client_group_id
        referencedColumnName: id
    agent:
      targetEntity: Agent
      inversedBy: agents
      joinColumn:
        name: agent_id
        referencedColumnName: id 
```

对此的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T17:32:34.993

它就在文档中。我的问题的答案是使用关联密钥。

[http://doctrine-orm.readthedocs.org/en/stable/tutorials/composite-primary-keys.html](http://doctrine-orm.readthedocs.org/en/stable/tutorials/composite-primary-keys.html)

如果您转到上面链接上的动态属性，则解决方案就在那里。然而，限制是，我希望自动生成复合主键的一个字段，据我所知，Doctrine 2.1 不支持。

# android - android纵向/横向页面视图中背景图像的滚动视图

> ID：14245666
> 
> 赞同：0
> 
> 时间：2013-01-09T20:14:59.350
> 
> 标签：android, android-layout

我正在尝试创建一个布局，其中在纵向模式下图像适合屏幕。但是，在横向模式下，我只希望将宽度拉伸到屏幕尺寸和要滚动的（图像的）高度。图像的宽高比不应改变。

我的问题是我似乎永远无法获得滚动条，而且我的图像总是垂直挤压。

这是我的 xml 文件：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/scrollView1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/meep" >
</ScrollView> 
```

如何更改此代码以使我的图像保持其纵横比并出现垂直滚动条？

# php - 将 WWW 重定向到非 WWW，或者相反？

> ID：14245668
> 
> 赞同：12
> 
> 时间：2013-01-09T20:15:02.383
> 
> 标签：php, apache, seo, url-redirection

我刚刚在我的网站上运行了 seo 审核并收到了这条消息......

> 确保 www.mysite.co.uk 和 myside.co.uk 没有并行运行。
> 
> 重定向来自非首选主机名的请求很重要，因为搜索引擎将带有和不带有“www”的 URL 视为两个不同的网站。
> 
> 设置首选域后，对所有到非首选域的流量使用 301 重定向。

现在我的网站同时适用于 www。并且没有 www。那么这是否意味着我的网站并行运行？

如果是这样，我该如何解决？我应该将我的非 www 指向 www 还是相反？

我在 linux/apache 服务器上使用 PHP。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T22:00:34.877

> 现在我的网站同时适用于 www。并且没有 www。那么这是否意味着我的网站并行运行？

差不多。并行运行意味着访问者（人类或搜索引擎机器人）可以使用 www 和非 www 版本的 URL 访问相同的内容。

推荐的做法是让两个主机名都处于活动状态，但使用 301 重定向将非首选主机名的所有流量重定向到首选主机名。

> 如果是这样，我该如何解决？

对于 Apache，将这些规则放在`.htaccess`位于 wwwroot 目录的文件中：

```
#########################
# redirect no-www to www
#########################

RewriteEngine On
RewriteCond %{HTTP_HOST} ^(?!www\.)(.+) [NC]
RewriteRule ^(.*) http://www.%1/$1 [R=301,NE,L] 
```

- 或者 -

```
#########################
# redirect www to no-www
#########################

RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.(.+) [NC]
RewriteRule ^(.*) http://%1/$1 [R=301,NE,L] 
```

> 我应该将我的非 www 指向 www 还是相反？

没有明确的答案；两者都有其优点和缺点。请参阅[Yes WWW](http://www.yes-www.org/)以了解为什么拥有 www URL 是好的，它的竞争对手[No WWW](http://no-www.org/)只是说*“不推荐使用 www.”。*没有解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:53:18.180

实际上，保持网站的可用`www`和`no-www`版本可能很麻烦，因为它会在您的网站的两个版本之间生成重复的内容。而且谷歌不喜欢重复的内容，这就是为什么重定向`www`到`no-www`或相反是很好的 seo 实践。

使用 Apache 服务器，您可以创建 .htaccess 文件（在您的域的根目录中）并插入这些行以重定向（[301 重定向](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=93633)）`www`到`no-www`：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_HOST} !^example\.com [NC]
RewriteRule (.*) http://example.com/$1 [QSA,R=301,L]
</IfModule> 
```

如果您愿意，您也可以选择相反的（从 重定向`no-www`到）。`www`如果您选择一种或其他解决方案，无论对于 seo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:17:32.727

我认为您应该使用 .htaccess 文件将非 www 重定向到 www：

以下是如何做到这一点和其他一些有用的技巧： [http ://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html](http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-09T20:20:51.563

www.domain.com 中的 www 是子域，可以是任何东西。像（ m.domain.com ， x.domain.com 或任何东西。

但通常按照常规方法 www 是任何站点的默认子域。

大多数网站将 www.sitename.com 或 sitename.com 引用到同一页面。

所以别担心，继续吧.. !!

# mysql - MySQL NOT IN 来自同一表中的另一列

> ID：14245671
> 
> 赞同：9
> 
> 时间：2013-01-09T20:15:13.123
> 
> 标签：mysql, sql

我想运行 mysql 查询以从表中选择所有行，`films`其中`title`列的值在另一列的所有值中不存在任何位置（`collection`）。

这是我的表格的简化版本，内容如下：

```
mysql> select * from films;
+----+--------------+--------------+
| id | title        | collection   |
+----+--------------+--------------+
|  1 | Collection 1 | NULL         |
|  2 | Film 1       | NULL         |
|  3 | Film 2       | Collection 1 |
+----+--------------+--------------+ 
```

这是我的查询：

```
mysql> SELECT * FROM films WHERE title NOT IN (SELECT collection FROM films);
Empty set (0.00 sec) 
```

在此示例中，我想选择带有标题`Film 1`和的行`Film 2`，但我的查询没有返回任何行。

这是表结构：

```
CREATE TABLE `films` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(200) NOT NULL DEFAULT '',
  `collection` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T20:27:53.787

```
SELECT * 
FROM films 
WHERE title NOT IN (SELECT collection FROM films where collection is not null); 
```

SQLFiddle：[http ://sqlfiddle.com/#!2/76278/1](http://sqlfiddle.com/#!2/76278/1)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T20:26:06.737

您是否尝试过使用`NOT EXISTS`：

```
SELECT * 
FROM films f1
WHERE NOT EXISTS (SELECT collection 
                  FROM films f2
                  WHERE f1.title = f2.collection); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/92eb7/15)

如果要使用`IN`，则需要查找以下值`NOT NULL`：

```
SELECT * 
FROM films 
WHERE title NOT IN (SELECT collection 
                    FROM films
                    WHERE collection is not null); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/92eb7/18)

两者的结果是：

```
| ID |  TITLE |   COLLECTION |
------------------------------
|  2 | Film 1 |       (null) |
|  3 | Film 2 | Collection 1 | 
```

您当前查询的问题在于 - 从[@Quassnoi 的答案](https://stackoverflow.com/questions/1001144/mysql-select-x-from-a-where-not-in-select-x-from-b-unexpected-result)中窃取：

> *两者都`IN`返回`NOT IN`，`NULL`这不是`WHERE`子句可接受的条件。*

由于`null`您的子查询正在返回该值，因此您希望专门排除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:25:39.000

请试试这个：

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/784dc/2)

询问：

```
select a.id, a.planid
from one a
left join one b
on a.planid <> b.iid
where not (b.iid is null)
group by b.id
; 
```

结果：基于我使用的样本表。

```
ID      PLANID
t15     1
j18     2 
```

## 编辑添加：这里有 OP SCHEMA

```
select b.id, b.title
from opschema b
inner join opschema a
on b.title <> a.collection
or b.collection <> a.title
group by b.id 
; 
```

[OP SHCEMA SQLFIDDLE 演示](http://sqlfiddle.com/#!2/00df9/1)

```
ID  TITLE
2   Film 1
3   Film 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T20:33:54.603

使用外连接的另一种选择

```
SELECT f.* 
FROM films f LEFT OUTER JOIN films ff
ON f.title = ff.collection
WHERE ff.collection IS NULL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-28T12:52:53.433

```
CREATE TABLE IF NOT EXISTS `reservation_tables` (
  `res_table_id` int(10) NOT NULL AUTO_INCREMENT,
  `res_table_name` int(10) NOT NULL,
  `date_time` varchar(20) NOT NULL,
  `partyhall_id` int(10) NOT NULL,
  `flag` enum('0','1') NOT NULL DEFAULT '0',
  PRIMARY KEY (`res_table_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=9 ;

INSERT INTO `reservation_tables` (`res_table_id`, `res_table_name`, `date_time`, `partyhall_id`, `flag`) VALUES
(1, 1, '2014-08-17 12:00 am', 7, '1'),
(2, 2, '2014-08-17 12:00 am', 7, '1'),
(3, 3, '2014-08-18 12:00 am', 8, '1'),
(4, 4, '2014-08-18 12:00 am', 8, '1'),
(5, 1, '2014-08-25 12:00 am', 12, '1'),
(6, 2, '2014-08-25 12:00 am', 12, '1'),
(7, 3, '2014-08-20 12:00 am', 23, '1'),
(8, 4, '2014-08-20 12:00 am', 23, '1'); 
```

Ι 必须选择可用的表名`matching date_time`

例子`select available table_name where date_time = 2014-08-18 12:00 am.`

解决方案查询是：我确定这很好用

```
SELECT distinct res_table_name FROM reservation_tables WHERE `res_table_name` NOT IN   
(SELECT `res_table_name` FROM reservation_tables where `date_time` = '2014-08-17 12:00 am') 
```

# highcharts - Ext JS 面板中的 Highcharts 折线图

> ID：14245676
> 
> 赞同：0
> 
> 时间：2013-01-09T20:15:43.540
> 
> 标签：highcharts, extjs3

我正在使用 ExtJS 3.* 版本上的 Highcharts 制作一个简单的图表。我在[jsfiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-linewidth-specific/)上使用这个简单的例子。我不想将此图表呈现给`div`元素。我想把它放在 a`Ext.Panel`但是当我尝试它时会出错。`renderTo`没有图表的属性我该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:33:52.383

正如@Sebastian Bochan 所说[，highcharts.com](http://www.highcharts.com/download) /download解决了我的问题。

# logging - WSO2 分布式日志记录

> ID：14245681
> 
> 赞同：2
> 
> 时间：2013-01-09T20:15:58.457
> 
> 标签：logging, wso2, wso2bam

我正在尝试将我们的应用程序服务器日志发送到 BAM。[wso2 网站](http://wso2.org/library/articles/20c12/11/distributed-logging-works-wso2-stratos)上有一个关于我们如何做到这一点的文档。

但是我不明白我们如何扩展 Log4JAppender。有没有样品可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:20:40.730

日志配置可以在[http://sparkletechthoughts.blogspot.com/](http://sparkletechthoughts.blogspot.com/)找到，用于将日志从应用服务器发送到 BAM。要查看来自应用服务器的存档日志，Apache 服务器仅使用了 4.0.0 到 4.0.3 碳基产品。4.0.3之后，需要为此配置hadoop。

您可以使用已经扩展的 Log4jAppender 作为 LogEventAppender，它在 App 服务器的 CARBON-HOME/repository/log4j.properties 中可用，而不是编写一个新的附加程序来将日志从应用服务器发送到 BAM。

为了您自己的目的扩展 Log4jAppender，您可以参考[如何在 log4j 中创建自己的 Appender？](https://stackoverflow.com/questions/6072389/how-to-create-a-own-appender-in-log4j).

# php - .ajax() 发布到回调文件不识别 php 定义常量

> ID：14245683
> 
> 赞同：1
> 
> 时间：2013-01-09T20:16:05.737
> 
> 标签：php, json, jquery

使用下面的代码时，我无法设置正确的位置。不知何故，在回调文件中无法识别 php 常量，因此其余代码无法正常工作。

来自html的片段：

```
<a href="#" class="selectLocation" id="ABC"> 
```

来自 .js 的片段

```
var locationID;

    $(".selectLocation").click(function(){
    locationID = this.id;
    setLocation();
    });

function setLocation() {
    $.ajax({
        data: {location: locationID},
        success: function (data) {
        // do something
        };
    });
  };

// DEFAULT AJAX SETUP
$(function () {
    $.ajaxSetup({
        type: "POST",
        url: "dir/callback.php",
        dataType: "json",
        cache: "false",
        error: function (jqXHR, exception) {
            if (jqXHR.status === 0) {
                console.log('No connecting.\n Verify Network.');
            } else if (jqXHR.status == 400) {
                console.log('Bad Request. [400]');
            } else if (jqXHR.status == 404) {
                console.log('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                console.log('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                console.log(jqXHR.responseText);
                console.log('Requested JSON parse failed.');
            } else if (exception === 'timeout') {
                console.log('Time out error.');
            } else if (exception === 'abort') {
                console.log('Ajax request aborted.');
            } else {
                console.log('Uncaught Error: ' + jqXHR.responseText);
            };
        }
    }); 
```

来自 callback.php 的片段：

```
 <?php
    header("content-type:application/json");
    session_start();
    require_once ('config.php');
...

    $connect->setLocation($_POST['location']); 
```

$_POST['location']; 将 ABC 发送到我的代码的其余部分，而不是下面定义的正确值。

来自 config.php 的片段：

```
define('ABC', 'some location'); 
```

如果我这样做：

```
echo (ABC); 
```

在回调文件中，我**会**得到正确的位置值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:05:49.617

在您的`$_POST['location']`变量中，有一个字符串“ABC”。

所以如果你这样做`echo($_POST['location']);`，你会得到`ABC`，而不是`some location`。

试试这个：

`$connect->setLocation(constant($_POST['location']));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:38:15.757

如果您打算将-element`a`的 id 属性设置为`ABC`-constant，则必须这样做：

```
<a href="#" class="selectLocation" id="<?php echo ABC; ?>"> 
```

PHP 常量仅在 PHP 代码中解析，而不是在 HTML 中解析。

除此之外，在 DOM 元素的 ID 中编码数据对我来说似乎有些复杂。如果我必须在 HTML 元素中编码内容，我更喜欢使用隐藏`span`标签或`hidden`元素（如果我在`form`. 您还可以尝试将以下内容添加到生成 HTML 文件的 PHP 脚本中：

```
<script type="text/javascript">
    locationID = <?php echo ABC; ?>;
</script> 
```

假设`locationID`在全球范围内。或者，您可以在 JS 文件中提供某种`init()`-function 并通过类似于上面的代码段调用它。

# css - FireFox 调整窗口大小的响应式布局设计问题

> ID：14245686
> 
> 赞同：0
> 
> 时间：2013-01-09T20:16:12.343
> 
> 标签：zurb-foundation, css, firefox, responsive-design, zurb-foundation

我在网站设计中使用[zurb-foundation](/questions/tagged/zurb-foundation "显示标记为“zurb-foundation”的问题")版本 3.2.3。它在 Chrome 上运行完美，但在附加的屏幕截图中显示的 FireFox 存在问题。简单地说，当我将浏览器的窗口重新调整到某个较小的宽度时，在 FirFox 中，右侧的某些部分不会显示，如下图所示。FireFox 中的垂直滚动条也消失了。

以下是页面头部的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  dir="rtl"  lang="ar" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
  <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />
     <meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="stylesheet" type="text/css" href="/quran/themed/slate/css/imports.css" />

    <script type="text/javascript" src="/quran/themed/slate/js/libs/modernizr-2.0.6.min.js"></script>

    <!--[if lt IE 9]>
            <![endif]-->

    <!-- IE Fix for HTML5 Tags -->
    <!--[if lt IE 9]>

    <![endif]-->
<title></title> 
```

**它是 FireFox 版本：Windows 7 64 位上的 16.0.2，屏幕分辨率为 1366 x 768。**

我需要知道如何解决这个问题。

![在此处输入图像描述](../Images/fae0031092eb5adf54096c34525e2b5a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:26:21.220

当我将浏览器升级到 17.0 版本时，这似乎是 FireFox 16.0.2 中的一个错误。它工作正常，如以下屏幕截图所示：

![在此处输入图像描述](../Images/15ebced1a6418885a828fdd0532737b7.png)

# .net - *.tlb 文件是否曾在运行时使用过？

> ID：14245692
> 
> 赞同：40
> 
> 时间：2013-01-09T20:16:47.393
> 
> 标签：.net, com

我正在开发一种通过 COM 互操作公开一些 .NET API 的产品。作为构建的一部分，我们为所有此类程序集生成 *.tlb 文件，并将它们作为单独 SDK 包的一部分提供。我们的客户可以在我们的产品上安装 SDK 并创建使用我们的 COM API 的应用程序。

我们是否需要向产品本身发送和注册这些 *.tlb 文件？是否存在在运行时需要 *.tlb 时执行针对它们编码的第三方库的情况？

如果您回答是，请解释它是如何工作的。我在互联网上看到很多评论说我必须交付并注册它们，但我没有找到一个清楚地解释为什么应该这样做的评论。这让我怀疑这是真的。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-09T21:19:20.983

是的，这是可能的。特别是在 .NET 的情况下，您不应该忽略注册类型库，因为您无法预测客户端代码将如何使用您的服务器。

它们不是特别常见，但有两种情况：

*   当客户端代码调用您的 [ComVisible] 方法并且调用跨越公寓边界时。公寓是一个有点模糊的 COM 概念，您必须了解 STA 和 MTA 线程之间的区别。保持简单：当从另一个线程、另一个进程或另一台机器进行调用时，通常会跨越单元边界。COM 需要帮助来确定如何将调用的参数序列化为 IPC 数据包，这需要知道参数的类型。COM 中没有反射的概念，因此不能轻易地自动完成。需要一个单独的 DLL 来实现代理和存根，几乎总是从 IDL 文件生成。这在 .NET 中很难实现，您几乎总是使用方便的第二种方式，即使用 Windows 中内置的标准编组器。它使用类型库来找出参数类型是什么。Regasm.exe /tlb 选项确保接口代理/存根和类型库已注册，以便标准编组器可以找到该库。

*   当您在公共接口中公开结构时。结构在互操作场景中非常麻烦，它们的布局高度依赖于编译器设置。等效的 .NET 属性是 StructLayout.Pack。在 .NET 中固定为 8，但客户端代码不知道这一点。要访问结构，客户端代码必须使用 IRecordInfo。这让它可以找出结构的每个字段在内存中的位置。类型库提供了 IRecordInfo 需要的信息。最好完全避免在 .NET 中轻松完成的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-21T15:30:48.647

在将 COM 组件中使用的 .Net dll 注册为 .tlb 引用时，我遇到了一个问题。

所以你不需要注册.Net dll（.tlb 项目）。

我希望它会奏效。

# vba - 由于 UAC 高，VBA 中的 RegOpenKeyEx 返回 Err 5 (Error_NoAccess)

> ID：14245697
> 
> 赞同：1
> 
> 时间：2013-01-09T20:17:03.217
> 
> 标签：vba, excel, registry, uac

我正在尝试从 xla 读取本地计算机下的注册表项。如果 UAC 为高，则 RegOpenKeyEx 函数无法读取注册表。有没有办法获得许可（通过代码）。

```
rc = RegOpenKeyEx(KeyRoot, KeyName, 0, KEY_ALL_ACCESS, hKey) 
```

KeyRoot 是 HKEY_LOCAL_MACHINE

键名是“软件\XYZ”

注意：我的代码没有任何问题 - 当 UAC 较低时。操作系统：Win 7，Office：在 2007 年和 2010 年测试 - 两者都有相同的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:24:39.920

谢谢克里斯尼尔森，

我使用了本网站中提到的 KEY_READ 访问权限。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms724878%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724878%28v=vs.85%29.aspx)

# java - 如何使用线程和 awt 事件？

> ID：14245702
> 
> 赞同：2
> 
> 时间：2013-01-09T20:17:29.863
> 
> 标签：java, multithreading, swing, events, awt

我有一个可运行的 gui swing 类，它在初始化构造函数时设置我的变量。当 gui 运行时，它作为自己的单独线程运行。然而，问题是当我的 gui 上触发一个动作事件时，当我尝试访问我的初始化变量时，它们被重置为默认值。经过一些调试，触发的动作事件似乎开始作为它自己的线程。在处理我的动作事件时，如何在正确的线程中访问正确的变量？

示例代码：

```
public class myGui implements Runnable{
    private flag = false;
    public myGui(){
        flag = true;
    }
    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    System.out.println("The value of flag is: " + flag); // prints flag is false
    }
    public void run(){
        // Do stuff
    }
    // More code ...
} 
```

在我的示例中，在线程中初始化构造函数时，flag 设置为 true。但是，当触发动作事件时，它会看到标志设置为 false 忽略我的线程变量。我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T20:28:59.807

这里的关键部分是跨不同线程的变量的可见性。在没有同步的情况下，编译器、处理器和运行时可以对操作执行的顺序做一些非常奇怪的事情。

因此，在变量上使用`volatile`修饰符`flag`以确保对变量的更新可预测地传播到其他线程。

查看 Swing 中并发的[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)部分。确保 UI 更新在[Event Dispatcher 线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)中运行，例如使用[invokeLater](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)或[invokeAndWait](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeAndWait%28java.lang.Runnable%29)。这应该让您更清楚地了解 Swing 中涉及的不同线程。

# .net - .Net 设计的优点/缺点：相互引用的对象与。事件？

> ID：14245706
> 
> 赞同：0
> 
> 时间：2013-01-09T20:17:39.410
> 
> 标签：.net, vb.net, oop

TruckStop 有一个 List(of TruckClass) 和一个名为 Weigh() 的方法。TruckClass 需要调用 Weigh()。以下两种设计的优缺点是什么？TruckClass 具有对 TruckStopClass 的引用并调用 MyTruckStopClassReference.Weigh() 与。TruckClass 引发由 TruckStopClass 处理的 TruckClass.Weigh 事件。

我读过相互引用的对象不会影响 GC，但它需要每个 TruckClass 中的额外引用。在硬币的另一面，我读到事件处理程序也是引用，如果你不解开它们可能会导致问题。对此事的利弊/最佳实践/意见进行一点澄清或评论将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:18:56.697

就这两种方法而言，我更倾向于倾向于这两个类是独立的，而不是被事件/处理程序捆绑在一起。在这个理论案例中，我会将称重函数放在模块内或卡车停靠站类的共享函数中，并将卡车作为参数。

如果您要走事件路线，那么让一个班级处理在单独班级中引发的事件并不是一种非常可取的做事方式。而且在我个人看来，如果我这样做了，我会觉得很肮脏，因为这会导致两个类紧密耦合，至少会让人觉得你在扼杀 OOP 设计。

在处理可以从多个位置调用相同表单的程序时，我过去为整合表单初始化所做的事情是让所有可以启动表单的可能位置将事件引发到公共容器，无论是基本表单还是一个容器类或类似的东西，然后在那个父表单/类/容器上，我处理来自所有孩子的每个事件。这样做的好处是您可以让一个调用表单初始化程序的子过程（或函数，但是您想定义它）处理所有事件，并且如果您需要更改表单的创建方式并将其全部显示在一个地方。

此示例与您的示例并不严格相关，但是如果您稍微更改示例并说两个类都可以导致某些车辆被称重，那么将访问点集中到卡车停靠站的称重功能将使项目管理变得更加容易.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T20:32:40.693

我的解决方案是在 TruckStop 类中同时包含 TruckClass 和 Weigh() 方法。就像是：

```
Class TruckStop
    Class Truck
        (private attributes)
        (public properties)
    End Class

    Public Shared Function Weigh(truck) as Weight
        (code)
    End Function
End Class 
```

和这样的参考：

```
weight = thisTruckStop.weigh(thisTruckStop.Truck(truckNum)) 
```

# jquery - jQuery互动漫画？

> ID：14245709
> 
> 赞同：0
> 
> 时间：2013-01-09T20:17:47.000
> 
> 标签：jquery, cordova, jquery-mobile, jquery-plugins

我正在考虑开始一个新项目，该项目基本上将是包含交互式动画（如交互式漫画书）的网站，类似于：[http ://www.ipadforums.net/ipad-apps/82532-interactive-cartoon- abc-your-childs-first-steps-reading.html](http://www.ipadforums.net/ipad-apps/82532-interactive-cartoon-abc-your-childs-first-steps-reading.html)

最主要的是它应该适用于平板电脑，包括 iPad - 基本上这是主要的目标听觉。

每部动画片的平均长度应该在 10 分钟左右，而且他们也应该播放音频文件。

我的问题： - 如果只使用 JavaScript/jQuery/HTML 会不会很慢？- 插入音频文件的最佳方式是什么？一些插件？

# asp.net-mvc - 查询列表属性包含另一个列表中所有内容的所有实体

> ID：14245710
> 
> 赞同：2
> 
> 时间：2013-01-09T20:17:49.333
> 
> 标签：asp.net-mvc, linq, entity-framework, ef-code-first

我有 3 个实体、用户、任务和权限。用户可以拥有许多权限。任务也有许多与之相关的权限。我试图在我的查询中捕获的想法是：我的任务需要由具有任务所需的所有正确权限的用户完成。

我正在为查询而苦苦挣扎。我认为这是我需要的：

```
var userList = context.Users
                      .Include("Permissions")
                      .Where(x => neededPermissionFromTask.Except(x.Permissions).Count() == 0).ToList(); 
```

但我得到一个例外：

> 无法创建“权限”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

感谢任何帮助、建议或意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:31:05.610

不要传递 Permission 对象的列表，而是传递这些权限的 id：

```
var ids = neededPermissionFromTask.Select(p => p.Id).ToList();
var userList = 
     context.Users.Include("Permissions")
            .Where(u => ids.Except(u.Permissions.Select(p => p.Id)).Count() == 0)
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:32:42.563

异常是由您的列表引起的`neededPermissionFromTask`- 实体框架不知道如何处理`Permission`对象列表。

我会建议这样的事情 - 找到所有具有 ID 任务所需的所有权限的用户`taskId`。

```
var users = context.Users
                   .Where(user => context.Tasks
                                         .Single(task => task.Id == taskId)
                                         .Permissions
                                         .All(permission => user.Permissions
                                                                .Contains(permission)))
                   .ToList(); 
```

我不确定是否`Permissions.Contains(permission)`会起作用 - 它可能会导致与问题中提到的相同的错误。但是有一个简单的方法 - 不要查看对象是否包含在集合中，只需查找具有相同 ID 的对象。

# ios - ios - Restkit 和 SSL 证书错误

> ID：14245711
> 
> 赞同：0
> 
> 时间：2013-01-09T20:17:50.383
> 
> 标签：ios, web-services, tomcat, ssl, restkit

我有一个使用自签名 SSL 证书并运行 Web 服务的 tomcat 服务器。我正在尝试使用 Restkit 连接到 Web 服务。但是，我收到与证书有效性相关的错误。这是我的代码：

```
NSURL *url=[NSURL URLWithString:baseURL];

RKClient *client = [RKClient clientWithBaseURL:url];
client.disableCertificateValidation=YES;

RKRequest *request = [client requestWithResourcePath:[NSString stringWithFormat:@"/addEvent?deviceID=%@&eventID=%@",deviceID,eventID]];
request.disableCertificateValidation=YES;
request.delegate=self;
RKResponse *response = [request sendSynchronously]; 
```

此请求失败并出现以下错误：

```
2013-01-09 15:11:53.931 Mobile_ACPL[5761:907] The certificate for this server is invalid. You might be connecting to a server that is pretending to be “notify.acpl.lib.in.us” which could put your confidential information at risk. 
```

即使我已将 disableCertificateValidation 设置为 YES，我也会收到此错误。我怎样才能得到这个工作？

**编辑：**我尝试添加证书，如下所示：[https ://github.com/RestKit/RestKit/pull/131](https://github.com/RestKit/RestKit/pull/131)

我仍然得到相同的结果。

**编辑 2：**看起来错误消息正在 RKRequest.m 中的这一行设置：

```
 payload = [NSURLConnection sendSynchronousRequest:_URLRequest returningResponse:&URLResponse error:&error]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:15:33.427

NSURLConnection 不满足同步调用中的[身份验证挑战](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/AuthenticationChallenges.html#//apple_ref/doc/uid/TP40009507-SW1)。您需要进行异步调用才能使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T11:42:21.903

就我而言，我在 RKClient 上设置了 disableCertificateValidation，但我使用的是使用不同 RKClient 的 RKObjectManager。在 RKObjectManager 初始化之后放置的以下行起到了作用：

```
[RKObjectManager sharedManager].client.disableCertificateValidation = YES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T15:07:16.267

如果您使用 RestKit 使用

```
client.allowsInvalidSSLCertificate = YES; 
```

不会工作，而是这样做：

如果你手动添加了rest kit到你的项目中，点击 RestKit.xcodeproj 去 project > Build Settings > Preprocessor Macros

并添加`_AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_=1`

就这样结束了。

# excel - 循环浏览用户指定的根目录中的子文件夹和文件

> ID：14245712
> 
> 赞同：13
> 
> 时间：2013-01-09T20:18:06.630
> 
> 标签：excel, vba

我通过单个文件的循环脚本工作正常，但我现在需要它来查看/查找多个目录。我被困住了......

事情需要发生的顺序：

*   提示用户选择他们需要的根目录
*   我需要脚本来查找该根目录中的任何文件夹
*   如果脚本找到一个，它会打开第一个（所有文件夹，因此文件夹没有特定的搜索过滤器）
*   打开后，我的脚本将遍历文件夹中的所有文件并执行它需要执行的操作
*   完成后它会关闭文件，关闭目录并移至下一个，等等。
*   循环直到所有文件夹都被打开/扫描

这就是我所拥有的，它不起作用，我知道这是错误的：

```
MsgBox "Please choose the folder."
Application.DisplayAlerts = False
With Application.FileDialog(msoFileDialogFolderPicker)
    .InitialFileName = "\\blah\test\"
    .AllowMultiSelect = False
    If .Show <> -1 Then MsgBox "No folder selected! Exiting script.": Exit Sub
    CSRootDir = .SelectedItems(1)
End With
folderPath = Dir(CSRootDir, "\*")

Do While Len(folderPath) > 0
    Debug.Print folderPath
    fileName = Dir(folderPath & "*.xls")
    If folderPath <> "False" Then
        Do While fileName <> ""
            Application.ScreenUpdating = False
            Set wbkCS = Workbooks.Open(folderPath & fileName)

            --file loop scripts here

        Loop  'back to the Do
Loop    'back to the Do 
```

最终代码。它循环遍历每个子目录中的所有子目录和文件。

```
Dim FSO As Object, fld As Object, Fil As Object
Dim fsoFile As Object 
Dim fsoFol As Object 
Dim fileName As String

    MsgBox "Please choose the folder."
    Application.DisplayAlerts = False
    With Application.FileDialog(msoFileDialogFolderPicker)
         .InitialFileName = "\\blah\test\"
         .AllowMultiSelect = False
         If .Show <> -1 Then MsgBox "No folder selected! Exiting script.": Exit Sub
         folderPath = .SelectedItems(1)
    End With

    If Right(folderPath, 1) <> "\" Then folderPath = folderPath + "\"
         Set FSO = CreateObject("Scripting.FileSystemObject")
         Set fld = FSO.getfolder(folderPath)
    If FSO.folderExists(fld) Then
         For Each fsoFol In FSO.getfolder(folderPath).subfolders
              For Each fsoFile In fsoFol.Files
                   If Mid(fsoFile.Name, InStrRev(fsoFile.Name, ".") + 1) = "xls" Then
    fileName = fsoFile.Name
    Application.ScreenUpdating = False
    Set wbkCS = Workbooks.Open(fsoFile.Path)

    'My file handling code

                End If
              Next
         Next
    End If 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-09T21:27:20.667

`FileSystemObject`您可能会发现使用类似这样的东西更容易

这会将文件夹/文件列表转储到`Immediate window`

```
Option Explicit

Sub Demo()
    Dim fso As Object 'FileSystemObject
    Dim fldStart As Object 'Folder
    Dim fld As Object 'Folder
    Dim fl As Object 'File
    Dim Mask As String

    Set fso = CreateObject("scripting.FileSystemObject") ' late binding
    'Set fso = New FileSystemObject 'or use early binding (also replace Object types)

    Set fldStart = fso.GetFolder("C:\Your\Start\Folder") '-- use your FileDialog code here

    Mask = "*.xls"
    Debug.Print fldStart.Path & "\"
    ListFiles fldStart, Mask
    For Each fld In fldStart.SubFolders
        ListFiles fld, Mask
        ListFolders fld, Mask
    Next
End Sub

Sub ListFolders(fldStart As Object, Mask As String)
    Dim fld As Object 'Folder
    For Each fld In fldStart.SubFolders
        Debug.Print fld.Path & "\"
        ListFiles fld, Mask
        ListFolders fld, Mask
    Next

End Sub

Sub ListFiles(fld As Object, Mask As String)
    Dim fl As Object 'File
    For Each fl In fld.Files
        If fl.Name Like Mask Then
            Debug.Print fld.Path & "\" & fl.Name
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-20T19:46:58.470

这是一个 VBA 解决方案，不使用外部对象。

由于`Dir()`功能的限制，您需要一次获取每个文件夹的全部内容，而不是在使用递归算法进行爬网时。

```
Function GetFilesIn(Folder As String) As Collection
  Dim F As String
  Set GetFilesIn = New Collection
  F = Dir(Folder & "\*")
  Do While F <> ""
    GetFilesIn.Add F
    F = Dir
  Loop
End Function

Function GetFoldersIn(Folder As String) As Collection
  Dim F As String
  Set GetFoldersIn = New Collection
  F = Dir(Folder & "\*", vbDirectory)
  Do While F <> ""
    If GetAttr(Folder & "\" & F) And vbDirectory Then GetFoldersIn.Add F
    F = Dir
  Loop
End Function

Sub Test()
  Dim C As Collection, F

  Debug.Print
  Debug.Print "Files in C:\"
  Set C = GetFilesIn("C:\")
  For Each F In C
    Debug.Print F
  Next F

  Debug.Print
  Debug.Print "Folders in C:\"
  Set C = GetFoldersIn("C:\")
  For Each F In C
    Debug.Print F
  Next F
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T18:33:27.273

```
Sub MoFileTrongCacFolder()

    Dim FSO As Object, fld As Object, Fil As Object
    Dim fsoFile As Object
    Dim fsoFol As Object
    Dim fileName As String
    Dim folderPath As String
    Dim wbkCS As Object

    MsgBox "Please choose the folder."
    Application.DisplayAlerts = False
    With Application.FileDialog(msoFileDialogFolderPicker)
        .InitialFileName = "\\blah\test\"
        .AllowMultiSelect = False
        If .Show <> -1 Then MsgBox "No folder selected! Exiting script.": Exit Sub
        folderPath = .SelectedItems(1)
    End With

    If Right(folderPath, 1) <> "\" Then folderPath = folderPath + "\"
    Set FSO = CreateObject("Scripting.FileSystemObject")
    Set fld = FSO.getfolder(folderPath)
    If FSO.folderExists(fld) Then
        For Each fsoFol In FSO.getfolder(folderPath).subfolders
            For Each fsoFile In fsoFol.Files
                If Mid(fsoFile.Name, InStrRev(fsoFile.Name, ".") + 1) = "xls" Then
                    fileName = fsoFile.Name
                    Application.ScreenUpdating = False
                    Set wbkCS = Workbooks.Open(fsoFile.Path)

                    'My file handling code

                End If
            Next
        Next
    End If
End Sub 
```

# twitter-bootstrap - Webkit：Twitter Bootstrap 模式对话框导致文本消失

> ID：14245713
> 
> 赞同：0
> 
> 时间：2013-01-09T20:18:08.093
> 
> 标签：twitter-bootstrap

我在通常隐藏的 div 中有一个链接，但在悬停时会出现。单击时会触发模式对话框。当对话框关闭时，链接会消失，并且在悬停时不会重新出现。此错误仅出现在 Webkit 浏览器上。我在 Safari 和 Chrome 上复制了它，但无法让它出现在 Firefox 中。

HTML：

```
<div class="help-inline">
  <a href="#test-modal" data-toggle="modal">click me</a>
</div>

<div id="test-modal" class="modal fade">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">x</a>
    <h3>Modal</h3>
  </div>
  <div class="modal-body">Body</div>
</div> 
```

CSS：

```
.help-inline {
    position: absolute;
    width: 20px;
    border: 1px solid black;
    height:      20px;
    max-height:  20px;
    line-height: 200px;
    overflow: hidden;
}

.help-inline:hover {
    line-height: 21px;
    width: auto;
    overflow: visible;
}

.help-inline a {
    position: relative;
} 
```

您可以在此处查看正在运行的错误：http: [//jsfiddle.net/extropic_engine/D2WQB/](http://jsfiddle.net/extropic_engine/D2WQB/)

使用的版本：

*   铬 23.0.1271.101
*   火狐18.0
*   Safari 6.0.2
*   引导程序 2.2.2
*   jQuery 1.8.2

# mysql - 这是选择随机行的更好解决方案吗？

> ID：14245715
> 
> 赞同：0
> 
> 时间：2013-01-09T20:18:09.740
> 
> 标签：mysql, sql

我在 mySQL 标记中看到*很多*关于如何最好地从一个非常大的表中选择 N 个随机项的问题。大多数时候，答案似乎归结为`ORDER BY RAND() LIMIT N`，但我相信这最终会变得非常低效，因为它必须为每一行生成一个随机数，然后根据这个未索引的字段对结果集重新排序。

我的想法是做如下的事情：[用 PHP-esque 伪代码编写，但应该翻译成任何语言]

```
$rowcount = query("
    SELECT COUNT(*) FROM mytable WHERE [condition];
");
$rand_index = rand(0, $rowcount); // random int between 0 and $rowcount
$rand_row = query("
    SELECT field1, field2, ...
    FROM mytable WHERE [condition]
    LIMIT $rand_index, 1
");
// repeat last 2 lines as needed to get N rows. 
```

这些查询不应该比 a 快得多，`ORDER BY RAND() LIMIT N`因为它们将使用在使用的表中定义的索引吗？

# javascript - 是否可以在立即调用的函数表达式中调用 JavaScript 函数

> ID：14245716
> 
> 赞同：8
> 
> 时间：2013-01-09T20:18:10.023
> 
> 标签：javascript, jquery, html

我正在使用 jQuery，并在立即调用的函数表达式中包装了一个函数，如下所示：

```
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<script type="text/javascript">
    (function ($) {

        var message = 'x called';

        function x() {
            alert(message);
        }
    })(jQuery);

    x();
</script> 
```

这将导致错误，因为函数“x”未在立即调用的函数表达式之外定义。有没有办法在立即调用的函数表达式之外调用函数“x”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T20:21:19.880

仅当您以某种方式公开该功能时。例如，您可以从外部函数返回它：

```
var x = (function ($) {

    var message = 'x called';

    function x() {
        alert(message);
    }

    return x;
})(jQuery);

x(); 
```

或者，类似地，您可以在对象上返回它：

```
var obj = (function ($) {

    var message = 'x called';

    function x() {
        alert(message);
    }

    return {"x": x};
})(jQuery);

obj.x(); 
```

函数内部声明的函数和变量不能从该函数外部直接访问，除非您通过返回某些内容或提供对该函数外部声明的变量的引用来提供某种访问它们的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T20:27:11.667

为您可能想要使用的其他类或函数创建一个命名空间。您不想不断地污染全局命名空间，但没有理由不能创建一个全局命名空间并将您的个人事物置于其之下：

```
(function($){
  window.MyNamespace = function(){};
  var message = "Something here";

  $.extend(MyNamespace, {
    x: function(){
      alert(message);
    }
  });
})(jQuery)

MyNamespace.x() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T20:20:12.803

您可以按如下方式更改代码：

```
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<script type="text/javascript">
    var x;
    (function ($) {

        var message = 'x called';

        x = function () {
            alert(message);
        }
    })(jQuery);

    x();
</script> 
```

jsFiddle 链接：http: [//jsfiddle.net/aLnbn/](http://jsfiddle.net/aLnbn/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T20:20:29.587

是的，（一种方法是：）只需使用 return 语句从 IIFE 返回，您还需要通过将变量分配给 IIFE 来“捕获”返回

```
var foo = (function(){

    return your_function;

}()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T20:31:47.983

您可以通过使用 IIFE 返回（或扩充）全局变量来访问您的方法。

你可以这样做：

```
var globalObject = (function (theObject, $) {

        if (theObject.theMethod) {
            return theObject;
        }

        var message = 'theMethod called';

        theObject.theMethod = function () {
            alert(message);
        };

        return theObject;

})(globalObject || {}, jQuery);

globalObject.theMethod(); 
```

* * *

我们使用的模式稍微好一点。

我们有一个全局对象（即命名空间），我们通过导入包含 IIFE 的 js 文件向其中添加模块。

每个 IIFE 都会向单个全局对象添加一个新模块。

这使得我们的整个项目只有一个全局对象，可以通过包含一个文件来选择使用我们的任何模块。

我建议查看这篇文章，这是关于 JavaScript 模块模式的一个很好的讨论：

*   [http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T20:30:06.887

试试这个：

```
var miFunc = (function($) {
    var message = 'x called';
    function x() {
        console.log(message);
    }
    this.x = x;
    return this;
})(jQuery);
miFunc.x(); 
```

测试：http: [//jsbin.com/erucix/2/edit](http://jsbin.com/erucix/2/edit)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T22:34:09.563

闭包的目的之一是限制范围。这就是为什么`x()`定义并且可以在您*立即调用的函数表达式*内部调用但在外部未定义的原因。

要让您的代码在不重构的情况下工作，您可以利用区分[函数语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/function)和[函数运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/function)的 JS 语法。两者在语义上是相同的，但后者可以分配给适合您的场景的变量：

```
var x; //scoped *outside* of the closure
(function ($) {
  var message = 'x called';
  x = function() {
    alert(message);
  }
})(jQuery);
x(); //alerts 'x called' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-30T11:24:11.117

您可以通过使用 IIFE 返回全局变量来访问您的方法。

```
//IIFEs - Immediately Invoked Function Expressions
var namespaceTestIIFE = (function ($) {

    /** Public functions and state. */
    var pub = {};

    $(document).ready(function () {
        //your on ready logic
    });

    pub.testAlert = function () {
       alert('Hello TestAlert');
    }
    return pub;
})(jQuery); 
```

或者

```
var compareForm = (function ()
{
        /** Public functions and state. */
        var pub = {};
        pub.testAlert = function () {
           alert('Hello TestAlert');
        }
    return pub;
}()); 
```

要访问函数，请使用“namespace.functionname”，例如 -

```
namespaceTestIIFE.testAlert(); 
```

# ios - 更容易修改 UIView 框架？

> ID：14245717
> 
> 赞同：1
> 
> 时间：2013-01-09T20:18:20.307
> 
> 标签：ios, objective-c, cocoa-touch, uiview, cgrectmake

通常我需要简单地将视图向下移动 5 个像素。我的做法是这样的

> ```
> view.frame = CGRectMake(view.frame.origin.x,
>                         view.frame.origin.y + 5,
>                         view.frame.size.width,
>                         view.frame.size.height); 
> ```

没有更简单的方法吗？：-/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:34:51.840

另一种解决方案

```
view.frame = CGRectOffset( view.frame, 0, 5 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T22:47:37.920

我在[github](https://github.com/claybridges/libvarobjc)上有一个宏，可以让你这样做

```
@morph(view.frame, _.origin.y += 5); 
```

或者如果你想改变`y` *并且* `height`

```
@morph(view.frame, {
    _.origin.y += 5;
    _.size.height -= 5;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:20:13.577

稍微好一些：

```
view.center = CGPointMake(view.center.x, view.center.y+5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T20:27:18.120

我有这些宏：

```
#define VIEW_INCREASE_Y(view, value) view.frame = CGRectMake(view.frame.origin.x,view.frame.origin.y+value,view.frame.size.width,view.frame.size.height) 
```

然后你可以这样做：

```
VIEW_INCREASE_Y(customView, 25); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T20:35:32.280

也许我应该为 UIView 类写一堆类别。

就像是

> ```
> -(void)changeFrameOriginHorizontally:(NSInteger)paramHorizontalChange
>                           vertically:(NSInteger)paramVerticalChange;
> 
> -(void)changeFrameSizeHorizontally:(NSInteger)paramHorizontalChange
>                         vertically:(NSinteger)paramVerticalChange; 
> ```

我不喜欢原始帖子中的解决方案的主要原因是它对代码非常不友好且过于冗长。

我会允许负值和正值，nil 表示没有变化。

你们有什么感想？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T21:21:56.657

如果你想走类别路线，你应该给它一个前缀以避免方法名称冲突。

例如

```
- (void)ps_addOffset:(CGPoint)offset;
{
    self.frame = CGRectIntegral(CGRectOffset(self.frame, offset.x, offset.y));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T21:26:03.200

我喜欢使用宏：

```
#define width(a) a.frame.size.width
#define height(a) a.frame.size.height
#define top(a) a.frame.origin.y
#define left(a) a.frame.origin.x
#define bottom(a) top(a)+height(a)
#define right(a) left(a)+width(a)

#define FrameReposition(a,top,left) a.frame = CGRectMake(x, y, width(a), height(a)) 
```

......

```
FrameReposition(myView,0,0); 
```

# ruby-on-rails - has_one 关系控制器更新 rails 3

> ID：14245726
> 
> 赞同：1
> 
> 时间：2013-01-09T20:19:23.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, controller, has-one

我有2个模型。任务和位置

每个任务都有_一个位置

任务.rb

```
has_one :location 
```

我正在尝试为 Location 模型创建我的控制器。这是新形式

```
 <%= form_for(@task.build_Location, :url => task_Location_path(@task)) do |f| %>
        Fields
      <%= f.submit %>
    <% end %> 
```

和编辑表格

```
 <%= form_for(@task.Location, :url => task_Location_path(@task)) do |f| %>
        Fields
      <%= f.submit %>
    <% end %> 
```

目前所有功能都正常运行，但更新除外。

```
def create
  @location = @task.create_Location(params[:location])
end
def update
  @location = @task.locations.find(params[:id])
end 
```

定义此方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:25:04.147

不完全确定您要做什么，但是...

你通常想通过它的 id 访问@task；此外，如果一个 has_one，它不会是复数形式。

如果您尝试将任务的名称更新为“某物”，您可以执行以下操作：

```
def update
  @location=Location.find(params[:id])
  @location.task.name="something"
  @location.save
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:11:18.717

```
def update
  @location = @task.location.update_attributes(params[:location])
end 
```

# excel - Excel VBA宏将长行分成许多等长

> ID：14245727
> 
> 赞同：2
> 
> 时间：2013-01-09T20:19:25.063
> 
> 标签：excel, vba

我目前正在处理一个问题，我有一个 Excel 电子表格，我想在其上使用 VBA 宏。以下 3 行中的每一行都是连续的。

```
Name of Data                                                            
abc A1  B2  B4  C4  E2  F43 d4  V8  f9  k11 j20 …           x

cde A2  B3  B12 C6  E9  F34 d6  V4  f13 k111    j209    …           x

efg A3  B5  B7  C8  E11 F68 d19 V12 f91 k114    j2014   …           x
…       

Desired                                                         
abc A1  B2  B4  C4  E2  F43 d4  V8                          
abc f9  k11 j20 …                                           
cde A2  B3  B12 C6  E9  F34 d6  V4                          
cde f13 k111    j209    …                                           
efg A3  B5  B7  C8  E11 F68 d19 V12                         
efg f91 k114    j2014   … 
```

我有每一行的数据名称，有些行可能是数百个条目，跨越数百列。*所以我想做的是让我的行长停止在 8 列宽。我希望宏可以检查每一行以查看长度是否大于8，插入具有相同数据名称的行并粘贴接下来的8列，从总列中减去并粘贴下一行，直到它已到达第一个长行的末尾，并继续检查所有行。从本质上讲，它节省了大量时间，从计算 8 列宽，剪切并粘贴到下面插入的行中，保留所有其他数据。*我是新手，因此非常感谢宏或 VBA 帮助。

谢谢，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:05:56.430

下面的宏将完全按照您的要求进行。它有一些假设我会留给你解决，例如

*   数据在表 1 中
*   名称列始终为**A**，所有数据列都从**B开始**
*   一切都从单元格**A1开始**

该宏将遍历每一行，并且对于具有超过 9 个数据元素的行，它将创建一个新行并用之前的行`Name`和剩余的数据行填充它。它将继续这样做，直到每行少于或等于 8 个数据元素。

由于您说的行数很多，因此最好在 for 循环之前**关闭屏幕更新**，`Application.ScreenUpdating = False`然后在 for 循环之后将其重新打开。

```
Public Sub SplitRows()

Dim rowRange As Variant
Dim colCount As Integer
Dim lastColumn As Long
Dim rowCount As Integer
rowCount = Cells(Rows.Count, "A").End(xlUp).Row

Dim i As Integer
i = 1
Do While (i < rowCount)
    lastColumn = Sheet1.Cells(i, Columns.Count).End(xlToLeft).Column
    colCount = Sheet1.UsedRange.Columns.Count
    rowRange = Range(Cells(i, 2), Cells(i, colCount))
    'if the row has more than 9 values (name column + 8 data columns)
    If Not lastColumn <= 8 Then
        Dim x As Integer
        'from column 2 (B, aka first data column) to last column
        For x = 2 To colCount - 1
           'if data is not empty AND x mod 8 is 1 (meaning 8 goes into x enough times to have a remainder of 1)
            If Not IsEmpty(rowRange(1, x - 1)) And (x Mod 8) = 1 Then
                Cells(i, 1).Offset(1).EntireRow.Insert  'insert new row below current row
                rowCount = rowCount + 1                 'update row count because we added a row
                Sheet1.Cells(i + 1, 1).Value = Sheet1.Cells(i, 1).Value     'set first column name
                Dim colsLeft As Integer
                For colsLeft = x To colCount - 1
                    'take data value from col 9 to end and populate newly created row
                    Sheet1.Cells(i + 1, colsLeft - 7).Value = rowRange(1, colsLeft)
                    Sheet1.Cells(i, colsLeft + 1).Value = ""    'set data value from col 9 on and set to empty
                Next
            Exit For    'exit loop, weve done all we need to and must now check the newly populated row
            End If
        Next
    End If
    i = i + 1
Loop
End Sub 
```

这是之前和之后的结果：

**前**

![宏之前：](../Images/c4caaae097978dc00de222267e3731ea.png) **后** ![宏之后：](../Images/3a161bdd0033999489f35e47cc0e27c7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:25:40.773

啊，我尝试了一些沿着这条线，但我必须去工作。也许它作为一个起点是有帮助的。

```
Public Sub Test()
Dim mastercell As Range
Set mastercell = ActiveWorkbook.Worksheets(1).Cells(1, 1)
Dim masterValue As String
masterValue = mastercell.Value

If GetCount(masterValue) > 8 Then
    Dim tempvalue As String
    tempvalue = masterValue
    Dim Rowcount As Integer
    Dim ColCount As Integer
    Rowcount = mastercell.Row
    ColCount = mastercell.Column + 1
    Do While GetCount(tempvalue) > 8
        Dim WriteValue As String
        WriteValue = GetFirstEight(tempvalue)
        ActiveWorkbook.Worksheets(1).Cells(Rowcount, ColCount).Value = WriteValue
        ColCount = ColCount + 1
        tempvalue = Replace(tempvalue, WriteValue, 0, 1)

    Loop
End If

End Sub

Private Function GetCount(str As String) As Integer
Dim Splitter As String
Splitter = " "
Dim SplitArray As Variant
 SplitArray = Split(str)
GetCount = UBound(SplitArray)
End Function

Private Function GetFirstEight(str As String) As String
Dim i As Integer
Dim NewString As String
Dim SplitArray() As String
SplitArray = Split(str)
For i = 0 To 7
    NewString = NewString & SplitArray(i) & " "
Next
GetFirstEight = NewString
End Function 
```

# html - 无法让导航列表内联显示

> ID：14245728
> 
> 赞同：0
> 
> 时间：2013-01-09T20:19:33.913
> 
> 标签：html, css, list, inline

好的，这是我正在处理的页面的链接：

[http://students.thenet.ca/jlandon/](http://students.thenet.ca/jlandon/)

如您所见，列表仍然垂直显示而不是水平显示。

CSS：

```
li              {   display:inline;
                list-style-type:none;
            }
#nav            {   background-color:#c6c7c3;
                height:50px;
                margin-top:120px;
                z-index:2;
            } 
```

HTML

```
<div id="nav">
<ul>
<li><a href="index.php"><h2>Home</h2></a></li> <li><a href="about.php"><h2>About</h2></a></li> <li><a href="school.php"><h2>School</h2></a></li> <li><a href="workshop"><h2>Workshop</h2></a></li> <li><a href="contact.php"><h2>Contact</h2></a></li>
</ul>
</div> 
```

好的，现在我明白为什么这不起作用（H1-6 是块）所以这里是我希望导航看起来像的细节（请帮助我）： [网站设计 http://students.thenet.ca/jlandon /images/sitedesign.png](http://students.thenet.ca/jlandon/images/sitedesign.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:21:10.600

你为什么使用 H2 作为导航元素？

将它们更改为也显示内联，或使用内联元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T20:22:07.443

h2 默认情况下是一个块元素，这就是打破你的界限的原因。

您可以通过在 h2s 上设置 display: inline （可能不是一个好主意）或将 h2s 替换为其他东西（例如将 a 标签设置为您想要的大小和字体等）来修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T20:23:59.257

我认为 a`float: left`会解决这个问题：

```
li 
{   
  display:inline;
  float: left;
  list-style-type:none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T20:43:12.210

您应该考虑在导航中使用语义类而不是使用像 h2 这样的块元素。如果通过使用 h2 元素，你想要一个具有一定大小的粗体字体，那么你应该考虑这个：

```
.nav-text, #nav li a {
  font-size: 1.25em;
  font-weight: bold; }

#nav {
  background-color: #c6c7c3;
  height: 50px;
  margin-top: 120px;
  z-index: 2; } 
```

另请注意，我使用 em 而不是像素。如果您将来决定将页面扩展到移动网站，这将有助于响应式设计。

您的 html 将是这样的：

```
<div id="nav">
  <ul>
    <li><a href="index.php">Home</a></li> 
    <li><a href="about.php">About</a></li> 
    <li><a href="school.php">School</a></li> 
    <li><a href="workshop">Workshop</a></li> 
    <li><a href="contact.php">Contact</a></li>
  </ul>
</div> 
```

# facebook-graph-api - Insights API 只为某些帖子返回 7 个字段，而为其他帖子返回 31 个字段？

> ID：14245730
> 
> 赞同：1
> 
> 时间：2013-01-09T20:19:46.773
> 
> 标签：facebook-graph-api, facebook-insights, missing-data

我在我管理的 Facebook 页面上有两个相同的帖子。一篇我们称之为“完整”的文章返回了全部范围的洞察值（31），*即使值为零*，我也希望，而另一篇我们称之为“子集”的文章只返回非常有限的值子集（ 7）。有关返回的实际值，请参见下文。

请注意，我已经通过使用 GUI 驱动导出到 Excel 和 Facebook Graph API Explorer (https://developers.facebook.com/tools/explorer) 确认了这种情况。

我的第一个想法是 API 会抑制某些值，例如 post_negative_feedback 如果它们为零（即，没有人点击隐藏或报告为垃圾邮件/滥用），但事实并非如此。“完整”帖子没有此类报告（或至少所有 post_negative_* 字段的返回值为零。

我什至尝试故意将没有负返回值的帖子报告为垃圾邮件，然后撤回我认为是实时字段（即 post_negative_feedback），但数据仍然是空的：

```
{
  "data": [
  ], 
  (paging data)
} 
```

是什么赋予了？

这是为有问题的帖子返回的更有限的子集：

```
post_engaged_users 
post_impressions 
post_impressions_fan 
post_impressions_fan_unique 
post_impressions_organic 
post_impressions_organic_unique 
post_impressions_unique 
```

这是为大多数其他帖子返回的完整集（添加了星号以显示上面返回的子集）：

```
post_consumptions 
post_consumptions_by_type 
post_consumptions_by_type_unique 
post_consumptions_unique 
*post_engaged_users
*post_impressions
post_impressions_by_story_type 
post_impressions_by_story_type_unique 
*post_impressions_fan
post_impressions_fan_paid 
post_impressions_fan_paid_unique 
*post_impressions_fan_unique
*post_impressions_organic 
*post_impressions_organic_unique 
post_impressions_paid 
post_impressions_paid_unique 
*post_impressions_unique 
post_impressions_viral 
post_impressions_viral_unique 
post_negative_feedback 
post_negative_feedback_by_type 
post_negative_feedback_by_type_unique 
post_negative_feedback_unique 
post_stories 
post_stories_by_action_type 
post_story_adds 
post_story_adds_by_action_type 
post_story_adds_by_action_type_unique 
post_story_adds_unique 
post_storytellers 
post_storytellers_by_action_type 
```

问题（除了“为什么会发生这种情况？”）是我尝试对未能报告任何计数的帖子提供负面反馈 - 我仍然没有收到任何数据（希望“1”或其他东西那里）。我开始等待强制性的 15 分钟（实时字段），然后当它不起作用时，给它整整 24 小时。是什么赋予了？

# javascript - 显示一个中间有一个框而不是复选标记的元素

> ID：14245734
> 
> 赞同：1
> 
> 时间：2013-01-09T20:20:07.907
> 
> 标签：javascript, jquery, html, css

我想知道是否有人知道在html中显示一个中间有一个黑框的复选框的好方法，就像下图中的第三个复选框？

![不同的复选框外观](../Images/216e81ad0263467866d4564bff3c52d6.png)

我在很多界面上都看到过这个，但是在网上找不到一个好的去查源。抱歉，如果这已经发布在其他地方，但我一直在尝试的搜索词没有运气。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T20:26:07.263

它被称为不确定状态。请参阅此**[jsFiddle 示例](http://jsfiddle.net/j08691/7D4zx/)**。

```
$("#c").prop("indeterminate", true); 
```

参考：[https](https://developer.mozilla.org/en-US/docs/HTML/Element/Input) ://developer.mozilla.org/en-US/docs/HTML/Element/Input和[https://developer.mozilla.org/en-US/docs/CSS/:indeterminate](https://developer.mozilla.org/en-US/docs/CSS/:indeterminate)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T20:27:33.527

以下帖子包含一些示例：

[如何使用 CSS 设置复选框样式？](https://stackoverflow.com/questions/4148499/how-to-style-checkbox-using-css)

[来自 CSSDeck 的复选框样式集合](http://cssdeck.com/labs/css-checkbox-styles)的答案中有链接包含类似的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:26:45.037

复选框由浏览器呈现。因此样式由用户选择的应用程序决定。如果您想要自定义表单控件，则必须使用[jQuery UI](http://jqueryui.com/themeroller/)之类的东西或类似的东西，它基本上可以通过其他方式模拟表单控件并将值存储在隐藏的表单字段中。

# sql - 如何在 T-SQL 中分配多个内联变量？

> ID：14245738
> 
> 赞同：2
> 
> 时间：2013-01-09T20:20:12.367
> 
> 标签：sql, sql-server, tsql, subquery

我正在尝试从子查询中选择多个变量以便以后使用。这是我的代码：

```
DECLARE @MarketplaceName VARCHAR(50),
    @ProductFieldID INT,
    @FromValue VARCHAR(255) = (
        SELECT mcvm.MarketplaceName,
            mcvm.ProductFieldID,
            mcvm.FromValue
        FROM [Meta].[MarketplaceCategoryValueMapping] AS mcvm
        WHERE mcvm.MarketplaceCategoryValueMappingID = @MapID
        ) 
```

我收到以下错误消息：

> *当不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式。*

我正在尝试`@MarketplaceName`从`mcvm.MarketplaceName`等映射。

我想要的是不必`SELECT`为每个变量编写多个语句。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T20:22:17.117

你想这样做吗？

```
DECLARE @MarketplaceName VARCHAR(50),
        @ProductFieldID INT,
        @FromValue VARCHAR(255)
SELECT  @MarketplaceName    = mcvm.MarketplaceName,
        @ProductFieldID     = mcvm.ProductFieldID,
        @FromValue          = mcvm.FromValue
FROM [Meta].[MarketplaceCategoryValueMapping] AS mcvm
WHERE mcvm.MarketplaceCategoryValueMappingID = @MapID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T20:22:52.613

这就是你的做法。此外，这不是子查询，它只是一个查询。

```
DECLARE @MarketplaceName VARCHAR(50),
        @ProductFieldID INT,
        @FromValue VARCHAR(255)

SELECT @MarketplaceName = mcvm.MarketplaceName,
       @ProductFieldID = mcvm.ProductFieldID,
       @FromValue = mcvm.FromValue
FROM [Meta].[MarketplaceCategoryValueMapping] AS mcvm
WHERE mcvm.MarketplaceCategoryValueMappingID = @MapID 
```

# ios - 从可重用单元中出列时，自定义 CollectionViewCell 上会触发什么方法？

> ID：14245742
> 
> 赞同：4
> 
> 时间：2013-01-09T20:20:35.703
> 
> 标签：ios, uicollectionviewcell, reuseidentifier

我`ItemCollectionViewCell`像往常一样使用其父 ViewController 中的方法将可重用的自定义出列

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    ItemCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"cell" forIndexPath:indexPath];
} 
```

但是在我的身上，`ItemCollectionViewCell`我已经实现了该方法，该方法`initWithFrame`仅在最初被调用，但在单元格出列以供重用时不会被调用。

在调用父视图控制器`ItemCollectionView`后被重新添加到队列之前在内部触发的方法是什么？`[collectionView dequeueReusableCellWithReuseIdentifier:@"cell" forIndexPath:indexPath]`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T20:25:07.390

`-[UICollectionReusableView prepareForReuse]`是方法。[这](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionReusableView_class/Reference/Reference.html#//apple_ref/occ/cl/UICollectionReusableView)是该方法的文档。

# wordpress - 用户角色插件将编辑限制为页面的特定类别

> ID：14245743
> 
> 赞同：3
> 
> 时间：2013-01-09T20:20:36.950
> 
> 标签：wordpress

我需要一个插件来限制注册用户只能添加/编辑特定类别的**页面**。即使 WordPress 页面没有像帖子那样的“类别”。

例如，如果我有一个名为“机器人维护”的类别，我想确保只有指定的用户或角色才能在该类别中编辑和创建页面。

我看到[成员](http://wordpress.org/extend/plugins/members/)插件允许我创建具有“仅编辑他们拥有的页面”等功能的新角色，但我希望我可以创建一个角色（例如，一个部门）并将该角色配置为能够编辑和创建页面在 {department} 类别中。甚至将用户限制在特定类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T19:14:24.227

这是一项相当复杂的任务，您可能需要聘请专业的 wordpress 插件开发人员来为您构建它。

话说回来....

可以将类别添加到页面。[在http://shibashake.com/wordpress-theme/add-tags-and-categories-to-your-wordpress-page](http://shibashake.com/wordpress-theme/add-tags-and-categories-to-your-wordpress-page)查看教程

接下来，您将希望以编程方式为您拥有的每个页面类别创建角色。您将需要挂钩到创建和删除类别以创建/删除您的特殊角色。然后，您可以使用成员插件授予适当的权限。

然后，您需要挂钩到页面编辑流程以确保当前用户具有编辑当前页面的权限（基于您的自定义角色和页面的类别）。

你还有一些工作要做研究......但至少这应该给你一个相当好的起点。

# google-app-engine - AppEngine 过快地杀死 JVM 实例

> ID：14245744
> 
> 赞同：1
> 
> 时间：2013-01-09T20:20:45.737
> 
> 标签：google-app-engine

AppEngine 非常快地杀死了我的 JVM 实例。它的空闲时间不会超过 30 秒。后续请求将创建新实例，但此往返需要 8-10 秒。我的应用程序中是否存在潜在问题（错误）？日志/管理日志中没有任何记录表明任何问题或关机原因。开发服务器正常工作。有没有机会找出实例关闭如此之快的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T09:35:20.097

AppEngine 尤其是免费帐户可以随时终止实例。如果空闲或几分钟，实例可以存活几秒钟，没有人知道多长时间。如果您需要常驻实例（以防止长时间启动实例），请切换到付费版本。即使是付费的，如果您将实例小时数保持在免费配额内，您仍然可以免费运行它。这意味着如果您有单个 F1 实例，它将每天消耗 24 个实例小时。根据今天的配额，您每天有 28 个实例小时免费，因此您有 4 个实例小时空闲用于应用程序重新部署（每次重新部署花费 1/4 实例小时或 15 分钟）。拥有 F2 实例将消耗配额快 2 倍，例如，消耗 28 小时免费配额需要 14 小时。接下来的 10 小时将根据价目表计入您的信用卡。

# c# - WCF：无法将服务引用添加到 silverlight 项目

> ID：14245748
> 
> 赞同：0
> 
> 时间：2013-01-09T20:20:56.473
> 
> 标签：c#, wcf, silverlight, visual-studio-2012

我遇到了一个非常奇怪的问题，我从早期版本开始就使用 WCF 服务，但我没有遇到过这样的事情。今天，当我想将服务添加到我的 Silverlight 客户端应用程序时，它显示 WCF 服务无法生成 WCF 服务参考代码的错误。我不知道有什么问题我所做的一切都与我在以前的项目中所做的一样。

请注意，当我取消选中**所有引用程序集中的重用类型时，** WCF 可以为客户端生成代码。

# javascript - Sencha Touch 2.1 点击整个工具栏

> ID：14245750
> 
> 赞同：1
> 
> 时间：2013-01-09T20:21:02.557
> 
> 标签：javascript, sencha-touch, sencha-touch-2, sencha-touch-2.1

我需要能够点击/单击页面底部的整个工具栏，然后转到另一个屏幕或弹出一个窗口。

你为什么问？因为我现在有一个徽标作为我的标题。另外，这是最简单的方法，我可以用最少的代码在底部获得一个徽标，它是停靠的，并且不会随着页面的变化而改变。本质上，我的工具栏是“关于”页面的链接或弹出窗口。

这是我所拥有的似乎与按钮一起使用的东西。

```
{
  xtype : 'toolbar',
  docked: 'bottom',
  title: '<img src="logo.png" id="logo" alt=""/>',
  handler: function() {
    Ext.Msg.alert('About', 'You clicked about');
  }
} 
```

我也试过这个，但没有运气。

```
{
  xtype : 'toolbar',
  docked: 'bottom',
  title: '<img src="logo.png"/>',
  listeners: {
    tap: function() {
      alert("You tapped me");
    }
  }
} 
```

谢谢，唐尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T04:05:08.130

你可以简单地这样做：

```
{
    xtype : 'toolbar',
    docked: 'bottom',
    title: '<img src="logo.png"/>',
    listeners: {
        initialize: function() {
            this.element.on({
                tap: function() {
                    alert("You tapped me");
                }
            })
        }
    }
} 
```

希望能帮助到你 ：）

# ruby-on-rails - Rails 设置显示动作生根为发布请求

> ID：14245751
> 
> 赞同：1
> 
> 时间：2013-01-09T20:21:03.710
> 
> 标签：ruby-on-rails, ruby, routing

在我的 rails 应用程序中，我有这样的购物车控制器路线：

```
resources :carts 
```

所以在布局中，根据我的逻辑，我有：

```
= link_to "Моя корзина", @cart 
```

在浏览器中我看到例如：

```
******:3000/carts/112 
```

但是，我可以将嵌套的 rails route 显示为 post-like 请求吗？所以我会有：

```
******:3000/carts/ 
```

还耙路线：

```
arts GET    /carts(.:format)                                                          carts#index
                                  POST   /carts(.:format)                                                          carts#create
                         new_cart GET    /carts/new(.:format)                                                      carts#new
                        edit_cart GET    /carts/:id/edit(.:format)                                                 carts#edit
                             cart GET    /carts/:id(.:format)                                                      carts#show
                                  PUT    /carts/:id(.:format)                                                      carts#update
                                  DELETE /carts/:id(.:format)                                                      carts#destroy
                             cart POST   /carts/:id(.:format)                                                      carts#show 
```

我现在如何为我自己的方法编写它......但是如何与内置显示？

**我需要更改显示路线，以便显示的 id 不是通过 url 作为 get-param 发送，而是作为请求中的 post-param ...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:34:31.823

你可以添加这样的路线（routes.rb）

前任：

```
resources :carts do
  member do
    post :add
 end
end 
```

[有关铁路路线的更多信息](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:35:28.217

该`resources`方法只是放入一堆预定义的路由，如此[处](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)所述。

具体来说，它添加了相当于

```
get '/carts/:id' => 'carts_controller#show'
post '/carts' => 'carts_controller#create'
... 
```

如果您想使用一组不同的路由，请不要使用`resources`，而只需定义您自己的路由。

此外，您不能以这种方式向用户隐藏购物车 ID。如果请求中包含 ID，则表示用户可以看到它。他可能不得不使用 Firebug 或通过查看页面源而不是地址栏来查看它，但它仍然不是秘密或以任何方式受到保护。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T20:28:53.893

只需`rake routes`在您的控制台中运行并查看您拥有的路线。

[您还可以在http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)阅读有关 RESTful 路由的更多信息

# c# - 线程调试，想要一个名字

> ID：14245752
> 
> 赞同：3
> 
> 时间：2013-01-09T20:21:07.133
> 
> 标签：c#, multithreading, debugging

仍在尝试调试 3 个不同的线程。

我可以看到线程正在合作；排序; 有时; 但我真的看不出哪个线程在做什么。

“控制台”窗口向我展示了这样的事情......

```
The thread '< No Name >' (0x14a4) has exited with code 0 (0x0).
The thread '< No Name >' (0xec8) has exited with code 0 (0x0).
The thread '< No Name> ' (0x15a8) has exited with code 0 (0x0). 
```

我认为用这些不告诉我任何信息的十六进制值命名会很棒。

我查看了[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/xcb2z8hs%28v=vs.80%29.aspx)和[另一个](http://msdn.microsoft.com/en-us/library/581hfskb%28v=vs.80%29.aspx)可能是准确的页面，但我错过了关于您更改`<No Name>`为类似`Background Rx`或`Label1_Text_Change`其他内容的部分。

例子...

```
this.demoThread =
     new Thread(new ThreadStart(this.Antarctica));

this.demoThread.Start(); 
```

我讨厌成为该网站的主要笨蛋，但有人可以演示一下，在这个三行示例中（实际上是两行，但无论如何）我如何告诉 C# 和 Visual Studio 更改`<no name>`为`Antarctica`？我说的是在 Visual Studio IDE 底部的控制台窗口中观看序列。

如果重要的话，应用程序会显示在一个屏幕上，而 Visual Studio IDE 会显示在另一个屏幕上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T20:23:21.597

```
this.demoThread.Name = "Antarctica"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T20:25:53.317

```
this.demoThread =
     new Thread(new ThreadStart(this.Antarctica)){Name = "Antarctica"};

this.demoThread.Start(); 
```

# jquery - 如何取消 jQuery mouseleave 动作

> ID：14245758
> 
> 赞同：0
> 
> 时间：2013-01-09T20:21:40.463
> 
> 标签：jquery, mouseover, mouseleave

我希望我的 div 在鼠标熄灭时向上滑回起始位置，但我希望我的 div 取消该操作并在鼠标再次回到 div 上方时返回其展开位置。

我需要一些方法来阻止这个动作：

```
 $(".logo").mouseleave(function(){
            $(".logo").animate({top: '-65px'}, 'slow')
    }); 
```

这是小提琴：http: [//jsfiddle.net/gaPah/6/](http://jsfiddle.net/gaPah/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:24:02.023

[.stop()](http://api.jquery.com/stop/)是您问题的答案！

因为你想停止动画而不是快速完成它，你想使用

```
.stop(true, false) 
```

在你的元素上。

这是适用于您的案例的 stop() 演示：http: [//jsfiddle.net/Ma5Xt/1/](http://jsfiddle.net/Ma5Xt/1/)

这是添加延迟的示例：http: [//jsfiddle.net/Ma5Xt/2/](http://jsfiddle.net/Ma5Xt/2/)

最后，仅当当前正在运行关闭动画时，此选项才允许在 mouseenter 上展开。否则需要点击 div 重新打开：http: [//jsfiddle.net/Ma5Xt/3/](http://jsfiddle.net/Ma5Xt/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:33:56.253

好的，终于明白了这一点。用户点击切换。分区打开。用户离开 div。它等待 700 毫秒然后关闭。如果用户中断它关闭它会重新打开。如果用户没有中断，它会重置。

注意。`.delay()`不能很好地配合，`.animate()`所以它变得复杂，但我相信会有更简单的方法来做到这一点。

另请注意，我绑定了自定义事件`openme`以避免两次编写相同的动画线（一次在鼠标悬停时，一次在单击按钮时）。

[**工作演示**](http://jsfiddle.net/gaPah/14/)

```
$('#btn_panel').click(function(event){
  $(".logo").trigger('openme');
});

$('.logo').on('openme', function(){
  $(this).stop().animate({top: 0}, 700);
}).on('mouseenter', function(){
  clearTimeout($(this).to);
  if (parseInt($(this).css('top'))>-65){
      $(this).trigger('openme');
  }
}).on('mouseleave', function(){
  var el=$(this);
  $(this).to=setTimeout(function(){
    el.animate({top: -65}, 700);
  },700);
}); 
```

# ruby-on-rails - 当我尝试将 MongoLab 数据库与 Mongoid 和 ROR 一起使用时，为 nil:NilClass 获取未定义的方法 `[]'

> ID：14245768
> 
> 赞同：0
> 
> 时间：2013-01-09T20:22:21.167
> 
> 标签：ruby-on-rails, mongoid

我在 Heroku 上有一个 Rails 应用程序，它应该连接到 MongoLab 数据库。我的问题是任何尝试以任何方式访问数据库的命令都会导致

> nil:NilClass 的未定义方法“[]”

这包括为数据库播种。我的 mongoid.yml 如下

```
production:
  sessions:
    default:
      uri: <%= ENV['MONGOLAB_URI'] %>

development:
  sessions:
    default:
      database: dev_database
      hosts:
        - localhost:27017 
```

这个 mongoid.yml 适用于我使用相同版本的 Mongoid (3.0.1) 的另一个 ROR 应用程序，所以我不确定它为什么在这里给我带来问题。MONGOLAB_URI 在环境中定义。我相当肯定问题一定出在数据库连接上，但我不确定是什么。任何想法如何解决这个问题？

编辑：

我也试过这个也无济于事...

```
production:
  sessions:
    default:
      uri: <%= ENV['MONGOLAB_URI'] %>
      options:
        skip_version_check: true
        safe: true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:00:50.647

我忘记了 Heroku 默认为 ruby​​ 1.9.2，添加

> 红宝石'1.9.3'

到我的 gem 文件修复它。

# javascript - 通过开发人员工具检查页面中的所有复选框

> ID：14245769
> 
> 赞同：52
> 
> 时间：2013-01-09T20:22:25.290
> 
> 标签：javascript, google-chrome, checkbox, google-chrome-devtools

我有一个循环在同一页面中创建 20 个***复选框（它创建不同的表单）。***我希望通过***chrome 开发人员工具***运行 JavaScript，而不使用任何同时***检查***所有*复选框的*库。

## 据我所知：

```
function() {
    var aa= document.getElementsByTagName("input");
    for (var i =0; i < aa.length; i++){
     aa.elements[i].checked = checked;
    }
} 
```

PS：我在 Stack-Overflow 中搜索并发现了很多问题，但没有一个对我有用，如果有人能找到我的正确答案，我会很高兴。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-01-09T20:27:52.430

```
(function() {
    var aa= document.getElementsByTagName("input");
    for (var i =0; i < aa.length; i++){
        if (aa[i].type == 'checkbox')
            aa[i].checked = true;
    }
})() 
```

使用最新的浏览器可以使用[document.querySelectorAll](https://developer.mozilla.org/en-US/docs/Web/API/Document.querySelectorAll)

```
(function() {
    var aa = document.querySelectorAll("input[type=checkbox]");
    for (var i = 0; i < aa.length; i++){
        aa[i].checked = true;
    }
})() 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-04-18T21:00:25.183

在控制台开发工具 (F12) 中，您可以像在 javascript 或 jQuery 代码中一样使用查询选择器。

'$$' - 表示选择所有项目。如果您使用 '$' 代替，您将只获得第一项。

因此，为了选择所有复选框，您可以执行以下操作

`$$('input').map(i => i.checked = true)`

或者

`$$('input[type="checkbox"').map(i => i.checked = true)`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-08-03T16:23:01.883

要稍微修改已接受的答案，如果您尝试选中某些服务（例如 Loom.com）上的所有复选框，那么您需要单击每个复选框，而不是将它们设置为“已选中”状态，否则功能无法按预期工作。

这是执行此操作的代码：

```
(function() {
    var aa = document.querySelectorAll("input[type=checkbox]");
    for (var i = 0; i < aa.length; i++){
        aa[i].click();
    }
})() 
```

请注意，较长的复选框列表将导致页面暂时暂停，因为所有复选框都会自动为您单击。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-09T20:25:10.097

你几乎是正确的。只需使用

```
aa[i].checked = "checked"; 
```

循环内。

即，您需要确保：

1.  `"checked"`是一个字符串，而不是一个变量标识符，并且
2.  你直接索引`aa`，不`aa.elements`，不存在

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-03T16:28:08.560

如果您来这里是为了快速单线：

```
var aa = document.getElementsByTagName("input"); for (var i = 0; i < aa.length; i++) aa[i].checked = true; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-01T14:46:14.350

### 用于切换（选中/取消选中）所有复选框的 Javascript 函数。

```
function checkAll(bx)
{
 var cbs = document.getElementsByTagName('input');
 for(var i=0; i < cbs.length; i++)
 {
    if(cbs[i].type == 'checkbox')
    {
        cbs[i].checked = bx.checked;
     }
 }
} 
```

如果您想从开发人员工具中获取它，请删除函数参数并将值设置为**“true”**或**“false”**而不是**“bx.checked”**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-09T20:36:10.607

尝试这个 ：）

```
(function () {
    var checkboxes = document.querySelectorAll('input[type=checkbox]');

    //convert nodelist to array
    checkboxes = Array.prototype.slice.call(checkboxes);
    checkboxes.forEach(function (checkbox) {
        console.log(checkbox);
        checkbox.setAttribute('checked', true);
    });

})() 
```

[http://jsfiddle.net/YxUHw/](http://jsfiddle.net/YxUHw/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-09T20:25:57.750

试试[`setAttribute`](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)。

```
(function() {
  var aa = document.getElementsByTagName("input");
  for (var i =0; i < aa.length; i++){
    aa.elements[i].setAttribute('checked', 'checked');
  }
})(); 
```

编辑：添加括号以立即执行该功能。

# visual-studio-2010 - Visual Studio 2010 启动时没有调试问题

> ID：14245771
> 
> 赞同：0
> 
> 时间：2013-01-09T20:22:36.453
> 
> 标签：visual-studio-2010

我有一个视觉工作室 2010 的问题。我有多个项目的视觉工作室解决方案，包括几个控制台应用程序。直到最近，所有控制台应用程序都会打开一个控制台窗口，该控制台窗口在应用程序完成执行后在没有调试的情况下启动 (Ctrl + F5)。现在，其中一个应用程序停止保持窗口打开。这些项目处于源代码控制之下，据我所知，设置没有任何变化。此外，与所有其他应用程序一样，Linker->Sytrem->SubSystem 设置设置为控制台 (/SUBSYSTEM:CONSOLE)。有谁知道还有什么问题？我已经重建、关闭甚至重新启动了我的机器。

# spring-mvc - Spring 3.2.0.RELEASE 中的 ResourceConfigurer 去哪儿了？

> ID：14245774
> 
> 赞同：2
> 
> 时间：2013-01-09T20:22:48.100
> 
> 标签：spring-mvc

我在一篇题为[SPRING 3.1 M2: SPRING MVC ENHANCEMENTS](http://blog.springsource.org/2011/06/13/spring-3-1-m2-spring-mvc-enhancements-2/)`<resources mapping="/resources/**" location="/resources/" />`的博文中读到，可以用以下等价物替换该元素：

```
@Configuration
@EnableWebMvc
public class AppConfiguration extends WebMvcConfigurerAdapter {

     @Override
     public void configureResourceHandling(ResourceConfigurer configurer) {
         configurer.addPathMapping("/resources/**").addResourceLocation("/resources/");
     }
} 
```

但是在 Spring 3.2.0.RELEASE 中，我似乎无法找到`ResourceConfigurer`. 这个功能有没有正式发布过？我的依赖项可能有问题，但在发布所有内容之前，我只想检查一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:39:32.883

这个机制在 3.2 中被重新设计，几个月前我遇到了同样的问题。现在你要做的是重写一个不同的方法。以下似乎对我有用，尽管您可能需要使用路径等：

```
@Configuration
@EnableWebMvc
public class AppConfiguration extends WebMvcConfigurerAdapter {
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
         registry.addResourceHandler("/resources/").addResourceLocations("/resources/**");
    }
} 
```

# android - FTS3 使用“BETWEEN”

> ID：14245780
> 
> 赞同：0
> 
> 时间：2013-01-09T20:23:13.303
> 
> 标签：android, fts3

我在这段代码中遇到错误。

```
Cursor cursor = ourDatabase.rawQuery(
    "SELECT * FROM " + DATABASE_TABLE + " WHERE KEY_ID BETWEEN 15 AND 20",
     null); 
```

我的 LogCat 说它`error near ? ****** BETWEEN ?` 说你在做什么。我无法弄清楚错误。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:51:23.047

我相信`KEY_ID`是你的变量，比如`DATABASE_TABLE`，而不是实际的列名。尝试：

```
Cursor cursor = ourDatabase.rawQuery(
    "SELECT * FROM " + DATABASE_TABLE + " WHERE " + KEY_ID + " BETWEEN 15 AND 20",
     null); 
```

# gradle - Gradle 插件 jar 依赖项

> ID：14245784
> 
> 赞同：0
> 
> 时间：2013-01-09T20:23:28.897
> 
> 标签：gradle

我有一个依赖于在 buildSrc 目录中编译的插件（MyTools）的 gradle 构建。这部分工作正常。我遇到的问题是尝试从外部 jar 导入一个类以在 myTools 插件的源代码中使用。

我的目录结构如下所示：
buildSrc
---build.gradle
---MyTools
-----build.gradle
-----settings.gradle
-----libs
-------yuicompressor-2.4 .6.jar
-----src
-------main
---------groovy
-----------com
---------- ---我的
----------------MyTools.groovy
---------------MyToolsPlugin.groovy
---------资源
-----------META-INF
-------------gradle-plugins
-------------gradle-plugins/MyTools.properties MyTools/build.gradle

的内容是：
dependencies {
runtime fileTree(dir: 'libs', include: '*.jar')
}

当我尝试从 MyTools.groovy 导入 com.yahoo.platform.yui.compressor.CssCompressor 时，我
收到以下消息：

“无法解析 com.yahoo.platform.yui.compressor.CssCompressor 类”

有人可以告诉我我是什么吗做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T04:14:37.677

您需要添加`compile`依赖项，而不是`runtime`依赖项。此外，鉴于它位于`MyTools`子目录中（并且`buildSrc`没有`settings.gradle`），我看不到主构建将如何获取插件。可能最好举起`MyTools`来`buildSrc`。

# reporting-services - Tablix 上的 SSRS IIF 过滤

> ID：14245785
> 
> 赞同：0
> 
> 时间：2013-01-09T20:23:31.657
> 
> 标签：reporting-services, ssrs-tablix, iif

我正在使用 SSRS，并且如果未选择多值参数中的值，则需要排除某些行的 tablix。例如，多值参数为“Include Loss”，值为“Yes”和“No”。

因此，如果用户选择“否”，那么我希望 tablix 排除描述字段等于文本“损失交易”的行。

我正在尝试编写一个表达式来过滤 tablix，如下所示，但没有运气。

```
=IIF(Parameters!IncludeLoss.Value="N", Fields!Description.Value, NOTHING) 
```

并使用'<>'作为'Operator'，然后：

```
="Loss Transaction" 
```

我收到错误“无法评估 Tablix 的 FilterValue”。有什么建议么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:02:28.500

过滤器有一个隐含的`AND`关系——也就是说，所有的条件都必须是`True`过滤器才能生效。

因此，您可以设置两个过滤条件：

`=Parameters!IncludeLoss.Value`等于`N`（添加第二个条件）

`=Fields!Description.Value`等于`="Loss Transaction"`

或者，对于复杂条件（或涉及标准过滤器`OR`或`Null`不支持的条件），您可以只使用一个条件并将该条件的表达式设置为更复杂的表达式，该表达式的计算结果为布尔值并针对`True`. 例如：

```
=Parameters!IncludeLoss.Value = "N" AND Fields!Description.Value = "Loss Transaction" 
```

# jquery - IE8的jQuery插件加载事件问题

> ID：14245790
> 
> 赞同：0
> 
> 时间：2013-01-09T20:23:56.727
> 
> 标签：jquery

一旦这行代码在 IE8 $(this.frame).unbind('load').load(function() -> IE8 中的状态栏由于某种原因显示正在加载并且它会持续很长时间并且尝试使用 IE Web 开发人员进行调试并没有从中受益。我需要注意的 jquery + iframe 和 IE8 是否存在任何已知问题并导致此问题？

```
 buildForm: function(fList, fOpts) {
                    if (!(this.getLocalURL())) return false;
                    var iDoc = (this.frame.contentWindow) ? this.frame.contentWindow.document : (this.frame.contentDocument.document) ? this.frame.contentDocument.document : this.frame.contentDocument;
                    var newForm = iDoc.createElement('form');
                    var method = 'POST';
                     var postUrl = fOpts.serviceURL+'&callbackUrl='+this.startURL;
                    newForm.setAttribute('action',postUrl);
                    newForm.setAttribute('method', method);

                    $(newForm).append("<input name='userDetail' type='hidden' value='"+JSON.stringify(fList)+"' />");
                    $(newForm).append('<input name="callbackUrl" type="hidden" value="'+this.startURL+'" />');
                    newForm = iDoc.body.appendChild(newForm);
                    this.isWaiting = true;

                        $(this.frame).unbind('load').load(function(){
                            Port.formControl.call(Port, this, fOpts);
                        });

                    newForm.submit();
                },
                formControl: function(formEl, fOpts) {
                    var url;
                    if (!(url = this.getLocalURL())) return false;
                    if (this.isWaiting === true) {
                        var resJSON = {};
                        var message = url.search.substring(1);
                        message = window.decodeURIComponent(message).split('&');
                        var i = message.length;
                        while (i-- > 0) {
                            var v = message[i].split('=');
                            if (v[1].charAt(0) == "{") v[1] = $.parseJSON(v[1]);
                            resJSON[v[0]] = v[1];
                        }
                        if (fOpts && fOpts.finishCallback instanceof Function) {
                            fOpts.finishCallback(resJSON);
                        }

                    }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:06:47.373

在 buildForm 的函数调用周围添加了 setTimeout 逻辑。我认为这允许创建 iframe，在使用成功的配置文件更新消息对 UI 进行更新之前进行跨域访问。

```
$.fn[pluginName].post = function(argObj) { 
        Port.init(function(){ 
setTimeout(function() { 
            Port.buildForm(argObj.JSON, { 
                serviceURL: argObj.service, 
                finishCallback: argObj.callback 
            }); 
}, 10); 
        }); 
    }; 
```

# javascript - 格式化 JavaScript（jQuery 周历）日期

> ID：14245792
> 
> 赞同：0
> 
> 时间：2013-01-09T20:24:00.560
> 
> 标签：javascript, jquery, jquery-plugins, date-format

我需要格式化一个 JavaScript 日期。我正在使用 jQuery Weekcalendar 插件，它提供了自己的日期格式。

输入是：

```
Thu Jan 10 2013 11:15:00 GMT+0100 (CET) 
```

输出应该是：

```
2013-10-01 11:15:00 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:32:01.367

在处理 JavaScript 中的时间和日期时，[moment.js有很大帮助](http://momentjs.com/)

```
moment().format('YYYY-MM-DD hh:mm:ss'); // for example: 2013-10-01 11:15:00 
```

更新：

要将 moment.js 与现有日期对象一起使用，您需要创建一个包装器

```
var myDateWrapper = moment(calEvent.start);
console.log(myDateWrapper.format('YYYY-MM-DD hh:mm:ss')) // that's what you want 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:28:58.880

看这里。您可以使用插件格式化输出。

[https://github.com/themouette/jquery-week-calendar/wiki/Date-formating](https://github.com/themouette/jquery-week-calendar/wiki/Date-formating)

也看这里：

[https://github.com/themouette/jquery-week-calendar/wiki/Script-options](https://github.com/themouette/jquery-week-calendar/wiki/Script-options)

您需要使用此选项：

> 时间格式：[字符串 | 默认值：“h:ia”] – 用于日历显示时间的格式。日期格式：[字符串 | 默认值：“M d, Y”] – 用于日历中显示的日期的格式。

编辑

```
$('#calendar').weekCalendar({
  dateFormat: 'y.m.d',
  timeFormat:"h:i:s"
}); 
```

# ruby-on-rails - 使用表单助手无法正确评估序列化属性

> ID：14245798
> 
> 赞同：0
> 
> 时间：2013-01-09T20:24:28.773
> 
> 标签：ruby-on-rails, metaprogramming, form-helpers

我正在渲染一个带有序列化属性的表单。属性序列化在正常使用下工作正常，但现在我正在尝试序列化哈希。视图代码如下所示

```
<%= @item.seasonality_of_sales_pct.each do |key, value| %>
    <%= eval("f.label      :'seasonality_of_sales_pct[:#{key}]'") %>
    <%= eval("f.text_field :'seasonality_of_sales_pct[:#{key}]'") %>
<% end %> 
```

我得到的错误是`undefined method 'seasonality_of_sales_pct[:January]' for #<Item:0x007f01083edd38>`. 但是，引发错误的行是 second `eval`。第一个`eval`评估就好了。我很困惑为什么会发生这种情况。

在控制器中，我正在设置如下属性

```
@item.seasonality_of_sales_pct = {January: nil, February: nil, March: nil, September: nil} 
```

另一个可以在评论中回答的问题是：这段代码有多难闻？我不确定 Rails 社区对这样的元编程有何看法。这样做有点伤害我，但似乎大部分时间都有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:40:14.543

当您使用`form_for`然后使用时`f.text_field :some_attribute_name`，您正在为（在您的情况下`@item`）构建表单的对象必须具有名为`some_attribute_name`.

您收到此错误是因为`@item`没有命名的属性或方法`seasonality_of_sales_pct[:January]`

我还要指出，没有理由`eval`在您的表单中使用，这是一个严重的安全风险，因为可以注入代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:46:55.860

我想比 Khaled 的回答更彻底一点，这有点对。第一个 eval 语句没有导致错误的原因是因为`f.label`不在乎你给它什么。 `<%= f.label :fake_stuff %>`只会创建一个名为`Fake Stuff`. 我仍然不太确定为什么该属性不起作用。如果我有`f.text_field :seasonality_of_sales_pct`，我会得到一个充满我的哈希的文本框。此外，我得到了显示正确值的标签。

我绝对不需要在这里使用 evals（我希望这只是一时的软弱）。做就是了

```
<%= f.text_field :'seasonality_of_sales_pct[:"#{key}"]' %> 
```

# c++ - 在 add_options() 之后更改 boost::program_options 中的值语义。即默认值

> ID：14245801
> 
> 赞同：2
> 
> 时间：2013-01-09T20:24:45.323
> 
> 标签：c++, boost, boost-program-options

我偶然发现了标题中定义的问题。我有一个应用程序，它创建一个`options_description`then 使用的实例`add_options()`。与示例中的非常相似：

```
options_description desc;
desc.add_options()
("help", "produce help")
("optimization", value<int>()->default_value(10), "optimization level")
; 
```

我的问题是，如何`optimization`在调用之后修改默认值。这甚至可能吗？文档对我来说似乎很模糊。据我了解，这个问题可以推广到任何值语义，`value_semantic`括号中的第二个参数也是如此。

**动机**

我觉得这可能是不可能的。所以我想介绍一下我对这种功能的动机。也许我的意图设计有缺陷，所以你可以提出其他建议。

我有几个程序执行非常相似的任务并共享相当多的参数和开关。我想我可以将公共参数重构为一个单独的基类。我虽然可以以类似的方式重构命令行解析。`boost::program_options`我的想法做得很好。我`options_description` 将实例构造为基类中的私有属性，并在那里添加常用选项。然后在初始化时的派生类中，我`add_options()`再次在这个对象上执行添加更多特定选项。这看起来很整洁，我让它工作得很快。

然后我注意到所有派生类都有一个通用选项，但是如果它有一个不同的默认值，那就太好了。即输出文件的名称。让 app1 成为 app1.out、app2 - app2.out 等。

当然，我可以将输出文件名选项移到`add_options`派生类中，但这似乎很愚蠢和多余，因为即使在语义上，除了默认值之外，一切都是相同的。另一种解决方法是从基类中的默认值和派生类的解析后步骤中退出，检查该选项是否已设置并手动应用（默认）值。然而，这似乎也是多余的，因为预期的功能似乎是在库本身中实现的。

我将尝试提供一个代码示例，以便您稍后或根据要求更好地感受它。不过，我认为我的方法很清楚。

**编辑 - 代码示例** 它是在 Rob 的回答之后编写的，所以我试图保持在命名约定范围内。

Base - 执行解析并允许将优化级别设置为整数：

```
#include <boost/program_options.hpp>
namespace po = boost::program_options;

class BaseClass {
public:
  BaseClass::BaseClass();
  virtual int parse(const int argc, char** argv);
private:
  po::options_description m_desc;
  po::variables_map vm;
  int optimization_level;
};

BaseClass::BaseClass():
  m_desc()
{
  m_desc.add_options()
   ("help", "produce help")
   ("optimization", value<int>()->default_value(10), "optimization level")
  ;
}

int BaseClass::parse(const int argc, char** argv)
{
  po::store(po::parse_command_line(argc, argv, desc), vm);
  po::notify(vm);
  if (vm.count("help")) { std::cout << desc << "\n"; return 1; }
  optimization_level = vm["optimization"].as<int>();
  return 0;
} 
```

高度优化的版本，允许选择性地执行花哨的东西：

```
class HighlyOptimizedClass : public BaseClass {
public:
  HighlyOptimizedClass();
  virtual int parse(const int argc, char** argv);
private:
  bool fancy_optimizations;
};

HighlyOptimizedClass(): BaseClass() {
  m_desc.add_options()
   ("fancy,f", po::value<bool>()->zero_tokens(), "perform fancy optimizations")
  ;
}

HighlyOptimizedClass::parse(const int argc, char** argv)
{
  int ret = BaseClass::parse(argc, argv);      //execute base function
  if( ret ) return ret;                        //return if it didnt succed
  if ( vm.count("fancy") ) fancy_optimizations = 1;  // non-base stuff
  return 0;
} 
```

允许打开详细调试的非优化版本：

```
class NonOptimizedClass : public BaseClass {
public:
  NonOptimizedClass();
  virtual int parse(const int argc, char** argv);
private:
  bool verbose_debug;
};

NonOptimizedClass(): BaseClass() {
  m_desc.add_options()
   ("verbose,v", po::value<bool>()->zero_tokens(), "genrates TONS of output")
  ;
}

NonOptimizedClass::parse(const int argc, char** argv)
{
  int ret = BaseClass::parse(argc, argv);       // execute base function
  if( ret ) return ret;                         // return if it didnt succed
  if ( vm.count("verbose") ) verbose_debug = 1; // non-base stuff
  return 0;
} 
```

我试图垂直压缩它，但无论如何它都变长了=/。对不起，如果我过火了。反过来，这些例子是清楚的和独立的。

`BaseClass`设置了几乎所有东西并解析常见的东西。派生类在构造函数和重载解析中添加自己的选项。他们确实执行基本解析器并检查错误。这也使`--help`工作。

现在的事情是修改每个派生的优化的默认值。因为将它设置为非常低`NonOptimizedClass`和非常高会很好`OptimizedClass`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T22:11:34.783

您可以调用[`options_description::find("optimization", ...)`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/program_options/options_description.html#id1236265-bb)以获取对关联的引用`option_description`，其[`semantic`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/program_options/option_description.html#id870413-bb)方法将为您提供指向`value_semantic`您在调用时最初提供的 的指针`add_options`。但是，它是一个 const 指针，因此您似乎不允许修改它指向的内容。

但是，`value_semantic`当您创建它时不是 const，这意味着使用它应该可以安全地`const_cast`删除`option_description`适用的 const 限定。您还必须将`value_semantic`对象类型转换回`typed_value`您最初调用时获得的正确类型`value<T>`。

```
option_description const& optimization = desc.find("optimization", false);
shared_ptr<const value_semantic> cvalue = optimization.semantic();
shared_ptr<value_semantic> value = const_pointer_cast<value_semantic>(cvalue);
shared_ptr<typed_value<int>> tvalue = dynamic_pointer_cast<typed_value<int>>(value);
assert(tvalue);
tvalue->default_value(20); 
```

* * *

另一种设计可以避免在定义选项后修改选项（这显然不是`program_options`设计要做的事情），是让程序特定的派生类将所需的默认值传递给基类。然后基类可以在定义优化选项时使用该值。

```
BaseClass::BaseClass(int default_optimization):
  m_desc()
{
  m_desc.add_options()
    ("help",
      "produce help")
    ("optimization",
      value<int>()->default_value(default_optimization),
      "optimization level")
    ;
}

HighlyOptimizedClass::HighlyOptimizedClass():
  BaseClass(99)
{ }

NonOptimizedClass::NonOptimizedClass():
  BaseClass(0)
{ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:13:32.240

`value_semantic`好的，所以我发现在当前版本中，在不违反`program_options`by `const_cast`ing的现有设计的情况下无法更改。

在阅读了 Rob Kennedy 和 Yakk 的回答和建议后，我想出了一种将两者结合起来的方法。它应该像描述的那样工作，并且不应该不必要地混乱任何东西。

这个想法是添加旨在在单独调用中更改的选项。使其成为虚拟并在基类中定义默认情况。

这种方法允许`program_option`一次性定制整体，而不仅仅是单一语义。为每个可能更改的单个案例添加参数或方法对我来说似乎真的很麻烦。

更改后的代码如下所示：

根据

```
class BaseClass {
public:
  BaseClass::BaseClass();
  virtual int parse(const int argc, char** argv);
private:
  virtual void add_optimization_option();
  po::options_description m_desc;
  po::variables_map vm;
  int optimization_level;
};

BaseClass::BaseClass(): m_desc() {
  m_desc.add_options()("help", "produce help");
}

void BaseClass::add_optimization_option(){
 m_desc.add_options()
  ("optimization", value<int>()->default_value(10), "optimization level");
} 
```

优化版：

```
class HighlyOptimizedClass : public BaseClass {
public:
  HighlyOptimizedClass();
  virtual int parse(const int argc, char** argv);
private:
  virtual void add_optimization_option();
  bool fancy_optimizations;
};

void HighlyOptimizedClass::add_optimization_option(){
  m_desc.add_options()
   ("optimization", value<int>()->default_value(99), "optimization level");
} 
```

未优化：

```
class NonOptimizedClass : public BaseClass {
public:
  NonOptimizedClass();
  virtual int parse(const int argc, char** argv);
private:
  virtual void add_optimization_option();
  bool verbose_debug;
};

void NonOptimizedClass::add_optimization_option(){
  m_desc.add_options()
   ("optimization", value<int>()->default_value(0), "optimization level");
} 
```

代价是为每个修改的选项添加一个私有方法，并为我们想要修改它的每个案例重载一个私有方法。当一个人想要让它保持默认时，什么都不需要。如果可以修改，`value_semantic`则可以避免定义新方法。然而，除了这个障碍，它运作良好并且不会弄乱其他任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:21:52.163

`const std::vector< shared_ptr< option_description > > & options_description::options() const;`为您提供对`option_description`.

A`const shared_ptr<T>`不是`shared_ptr<const T>`.

但是，如果我遇到这种问题，我会改用`add_output_file( std::string default )`, 并让它调用。`add_option`（很可能，尽管从界面上看上述内容似乎是合法的，但像这样弄乱内部结构可能会使`boost`图书馆感到困惑。

# actionscript-3 - 在 ActionScript 中使用 .dll 文件

> ID：14245803
> 
> 赞同：3
> 
> 时间：2013-01-09T20:24:45.707
> 
> 标签：actionscript-3, dll, flash-builder

我需要在我的 FlashBuilder 项目中使用在 C# 中创建的 dll 文件。我看到 adobe 本机扩展可能可以用于合并 dll 文件，但我不完全确定如何从 .dll 文件制作 .ane 文件。我想知道是否有一种更简单的方法可以访问我的 actionscript 代码中的 dll 文件中的类和函数。

谢谢，

伊利斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:29:40.490

仅当您在 Adob​​e Air 中工作时才能使用本机扩展。[您可以在此处](http://www.adobe.com/devnet/air/native-extensions-for-air.html?PID=4176632)阅读有关该主题的更多信息并找到教程。

# asp.net-mvc - 为什么这个 lambda 表达式有效？

> ID：14245804
> 
> 赞同：0
> 
> 时间：2013-01-09T20:24:48.707
> 
> 标签：asp.net-mvc, razor

我找到了这个[相关主题](https://stackoverflow.com/questions/10227870/basic-mvc-what-does-modelitem-do)，但它没有回答我的问题。

当自动创建强类型视图时，假设使用`List`脚手架模板，我将得到大致如下所示的内容：

```
@model IEnumerable<Test.Models.abc>
<table>
    <tr>
    <th>
        @Html.DisplayNameFor(model => model.ID)
    </th>
</tr>

@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.ID)
    </td>
</tr>
}
</table> 
```

我完全理解`@Html.DisplayNameFor(model => model.ID)`，但不是`@Html.DisplayFor(modelItem => item.ID)`。

目的是`modelItem`什么？用任意文本替换它会产生一个功能性的网页。似乎 modelItem 只是一个一次性的词。我想我真正的问题是为什么这不起作用？

```
@Html.DisplayFor(item => item.ID) 
```

**编辑**

评论中提出了一个很好的观点。`model`只要您在 lambda 表达式的两侧进行更改，您似乎也可以更改为任何内容：

```
@Html.DisplayNameFor(abc => abc.ID) 
```

`@model`一个附带的问题是：顶部的语句如何影响下面的功能？我以前认为`model`引用`@model`表达式是为了通过类找出显示名称，但是在提到的更改之后页面仍然有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:29:49.863

它不起作用，因为`item`已经在`foreach`.

`@foreach (var item in Model)`.

`modelItem`不使用 lambda的原因是因为`IEnumerable`. 如果有`Test.Models.abc`as model 而不是`IEnumerable`，那么那个 lambda 确实很重要，并且 的代码`DisplayFor`将更改为`@Html.DisplayFor(m => m.ItemId)`.

**更新**

`@model IEnumerable<Test.Models.abc>`只是声明这个视图是强类型的，类型为`IEnumerable<Test.Models.abc>`- 在你的情况下。这意味着 view 属性`this.Model`（不是`model`）是类型`IEnumerable<Test.Models.abc>`- 并且该类型的模型也应该传递到这个视图中。`model`在上面的示例中只是表达式变量 - 它仅具有该表达式的范围。您可以将其名称更改为尚未在外部范围中使用的任何未受保护的合法变量名称（这就是为什么不应命名它的原因`Model`，因为它会隐藏`Model`已在视图中声明的属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:30:25.717

`item`已经是在外部范围中定义的变量。您将其捕获为闭包，这在这里并不理想。你的代码应该读的是：

```
@Html.DisplayFor(modelItem => modelItem.ID) 
```

# python - 构建列表

> ID：14245812
> 
> 赞同：1
> 
> 时间：2013-01-09T20:25:08.377
> 
> 标签：python, list

我是 Python 新手，遇到了以下查询。谁能解释以下原因：

```
[ n**2 for n in range(1, 6)] 
```

给出：

```
[1, 4, 9, 16, 25] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:40:13.840

在解释器中将其分解为可管理的块：

```
>>> range(1, 6)
[1, 2, 3, 4, 5] 
```

```
>>> 2 ** 2   # `x ** 2` means `x * x`
4
>>> 3 ** 2
9 
```

```
>>> for n in range(1, 6):
...   print n
1
2
3
4
5
>>> for n in range(1, 6):
...    print n ** 2
1
4
9
16
25 
```

```
>>> [n ** 2 for n in range(1, 6)]
[1, 4, 9, 16, 25] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:36:53.740

它被称为[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)。发生的情况类似于以下内容：

```
results = []
for n in range(1,6):
    results.append(n**2) 
```

因此，它遍历包含值的列表`[0, 1, 2, 3, 4, 5]`并对每个值求平方。然后将平方的结果添加到`results`列表中，并返回您看到的结果（相当于`0**2, 1**2, 2**2`等，其中的`**2`意思是“提高到二次方”）。

这种结构（使用基于其他标准的值填充列表）在 Python 中很常见，因此列表推导式提供了一种速记语法来允许您这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:49:10.227

所以这是一个[列表理解](http://www.python.org/dev/peps/pep-0202/)。

如果你把它分成 3 个部分；由单词分隔：'for' 和 'in' ..

例如。

[ 1 比 2 合 3 ]

可能向后阅读它是最简单的：

*   3 - 这是整个操作的输入列表
*   2 - 这是大列表中的单个项目
*   1 - 这是对该项目执行的操作

第 1 部分和第 2 部分运行多次，第 3 部分给我们的列表中的每个项目运行一次。第 1 部分反复运行的输出是整个操作的输出。

* * *

所以在你的例子中：

*   3 - 生成一个列表： [1, 2, 3, 4, 5] --[范围](http://docs.python.org/2.7/library/functions.html?highlight=range#range)从第一个参数到第二个参数**之前的一个**
*   2 - 'n' 表示该列表中的单个数字
*   1 - 生成一个新的 n**2 列表（n 的 2 次方）

* * *

所以等效的代码是：

```
result = []
for n in range(1, 6):
   result.append(n**2) 
```

* * *

最后把它全部打破：

```
input = [1, 2, 3, 4, 5]
output = []

v = input[0] # value is 1
o = v**2     # 1 to the power of two is 1
output.append(o)

v = input[1] # value is 2
o = v**2     # 2 to the power of two = (2*2) = 4
output.append(o)

v = input[2] # value is 3
o = v**2     # 3 to the power of two is = (3*3) = 9
output.append(o)

v = input[3] # value is 4
o = v**2     # 4 to the power of two is = (4*4) = 16
output.append(o)

v = input[4] # value is 5
o = v**2     # 5 to the power of two is = (5*5) = 25
output.append(o) 
```

* * *

# xcode - 在我的设备中测试应用程序

> ID：14245815
> 
> 赞同：0
> 
> 时间：2013-01-09T20:25:29.220
> 
> 标签：xcode

当我在我的设备中使用 X-code 测试我的应用程序时，我收到以下消息：

检查依赖项

代码签名错误：找不到与应用程序标识符“mycompany.myappname”匹配的有效配置文件

那么，问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:37:29.947

您需要在开发人员门户中设置配置文件，然后在 xcode/您的应用程序中进行设置，然后才能运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:34:36.800

好的，这是解决方案。我没有写好捆绑标识符。所以伙计们，这非常重要，您的应用程序包标识符必须与开发人员门户中的应用程序 ID 包标识符相同！谢谢

# ruby-on-rails - Rails 守卫内存不足

> ID：14245816
> 
> 赞同：2
> 
> 时间：2013-01-09T20:25:30.273
> 
> 标签：ruby-on-rails, windows, guard

我对 Rails 开发还很陌生，但我在警卫方面遇到了一个大问题。我正在使用警卫来自动测试我的应用程序，并且我不断收到以下错误消息

```
[FATAL] failed to allocate memory 
```

有谁知道这是什么原因造成的？

我在使用 Ruby 1.9.3 和最新版本的保护的 Windows 7 x64 机器上。

[编辑]

看来，在我删除 wdm gem 后，此错误不再发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:18:20.523

我想出了答案，这里有[介绍](https://github.com/Maher4Ever/wdm/pull/7)。

# .htaccess - .htaccess 从 url 中删除特定的 get 参数

> ID：14245820
> 
> 赞同：1
> 
> 时间：2013-01-09T20:25:38.783
> 
> 标签：.htaccess

您好，我一直在网上搜索此问题的答案，但找不到。我正在寻找使用 htaccess 从 url 中删除特定参数。

例如，我有以下网址：

```
www.mysite.com/product.php?product_id=123&session=sdfs98d7fs9f8d7
www.mysite.com/anotherurl.php?session=12312341341&someotherparam=123 
```

我需要他们 301 重定向到：

```
www.mysite.com/product.php?product_id=123
www.mysite.com/anotherurl.php?someotherparam=123 
```

请注意，上面的网址只是示例。无论有多少参数是 url 的一部分或会话位于何处，我都需要从任何和所有 url 中删除会话参数。

我想我需要一种方法来获取直到 session=blah 的 url 字符串和 session=blah 之后的 url 字符串，然后将这两个部分结合起来并重定向到新的 url。

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:19:24.917

我在[另一个网站上找到了解决方案](http://forums.westhost.com/showthread.php?8010-Use-htaccess-to-Strip-Session-ID-from-Bots)

```
# case: leading and trailing parameters
RewriteCond %{QUERY_STRING} ^(.+)&session=[0-9a-z]+&(.+)$ [NC]
RewriteRule (.*) /$1?%1&%2 [R=301,L]

# case: leading-only, trailing-only or no additional parameters
RewriteCond %{QUERY_STRING} ^(.+)&session=[0-9a-z]+$|^osCsid=[0-9a-z]+&?(.*)$ [NC]
RewriteRule (.*) /$1?%1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:07:15.347

**更新**

简而言之，您想要的只是从查询中删除键值对`session=xx`。

这是一个选项：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{QUERY_STRING}  (.*)?&?session=[^&]+&?(.*)?  [NC]
RewriteCond %{REQUEST_URI} /(.*)
RewriteRule .*  %3?%1%2? [R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T22:11:11.117

未经测试，但应该可以工作：

```
RewriteCond %{QUERY_STRING} product_id=([0-9]+)
RewriteRule .* product.php?product_id=%1 
```

# ruby - 无法安装 RedCloth

> ID：14245822
> 
> 赞同：4
> 
> 时间：2013-01-09T20:25:45.507
> 
> 标签：ruby, gem, redcloth

如标题所示，我在安装 gem RedCloth 时遇到问题。我下载了 RubyGems v1.8.24，并使用 ubuntu 12.04，这是我的控制台日志：

```
kuba@kuba-P5Q-SE:~$ sudo gem install RedCloth
[sudo] password for kuba: 
Building native extensions.  This could take a while...
ERROR:  Error installing RedCloth:
    ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
/usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load     such file -- mkmf (LoadError)
    from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from extconf.rb:1:in `<main>'

Gem files will remain installed in /usr/lib/ruby/gems/1.9.1/gems/RedCloth-4.2.9 for     inspection.
Results logged to /usr/lib/ruby/gems/1.9.1/gems/RedCloth-    4.2.9/ext/redcloth_scan/gem_make.out 
```

我试图查看最后一个给定的文件，但是当我查找它时，它会打开 chrome，并给我错误。:(

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T20:55:23.060

尝试从 Synaptic 安装 ruby​​1.9.1-dev 软件包，或使用 apt-get。

在命令提示符下：sudo apt-get install ruby​​1.9.1-dev

mkmf（无法加载的模块）[仅包含在 ubuntu 上的 ruby​​ 开发包中](http://packages.ubuntu.com/oneiric/amd64/ruby1.9.1-dev/filelist)。

# tcl - 在处理命令时停止 TCL 脚本冻结

> ID：14245831
> 
> 赞同：1
> 
> 时间：2013-01-09T20:26:12.473
> 
> 标签：tcl, progress, visa

好的，我在高层次上做的是扫描系统以查找连接到它的所有 VISA 设备并让它们识别自己。

问题是并非所有 VISA 设备都支持识别自己的功能，而我知道的唯一方法是告诉设备这样做。这迫使那些无法识别自己的人依赖至少 1 秒的超时。在等待超时时，我的 TCL 脚本和 Wish 应用程序冻结，直到超时完成。对于多个设备，这给我留下了尴尬的等待时间，可能长达几秒钟，我无法向用户更新正在发生的事情。

这是我的代码：

```
proc ::VISA::Scan {} {
    # Open a temporary resource manager
    set TemporaryResourceManagerId [::visa::open-default-rm]

    # Get addresses for all devices on system
    foreach address [::visa::find $TemporaryResourceManagerId "?*"] {

        # Create temporary VISA channel
        set TemporaryChannel [visa::open $TemporaryResourceManagerId $address]

        # Have device identify itself while suppressing errors
        if {![catch {puts $TemporaryChannel "*IDN?"}]} {
            if {![catch {gets $TemporaryChannel} result]} {
                if {![string is space $result]} {
                    puts $address
                    puts "$result \n"
                }

                # Clear any potential errors
                puts $TemporaryChannel "*CLS"
            }
        }

        # Destroy temporary channel
        close $TemporaryChannel
        unset TemporaryChannel
    }

    # Destroy temporary resource manager
    close $TemporaryResourceManagerId
    unset TemporaryResourceManagerId
} 
```

我想知道是否有办法在 TCL 方面防止这种情况发生，因为我无法知道我将查询什么类型的设备。我已经尝试在脚本的几个不同位置使用“更新”和“更新空闲任务”，但它只是让我在冻结之间有一点时间。

任何帮助，将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:45:00.413

您必须使用`after`和`fileevent`异步处理超时。这并不容易，尤其是在 Tcl8.6 之前的版本中：您必须将一个过程拆分为一组事件处理程序，并将所有必要的信息传递给它们。

安排一个超时处理程序：

```
proc handleTimeout {channel} {
    ....
    close $channel
    .... # or do some other thing, 
    .... # but don't forget to remove fileevent handler if not closing!
}
....
after 1000 [list handleTimeout $TemporaryChannel] 
```

使通道非阻塞，安装一个文件事件处理程序：

```
proc tryGetsIDN {channel} {
    if {[gets line]!=-1} {
        # We have an answer!
        # Cancel timeout handler
        after cancel [list handleTimeout $TemporaryChannel]
        ....
    }
}
....
fconfigure $TemporaryChannel -blocking 0
fileevent $TemporaryChannel readable [list tryGetsIDN $TemporaryChannel] 
```

最难的部分：确保您适当地处理 GUI 事件，例如，如果有一个“取消”按钮来取消所有异步处理程序，请确保关闭通道并取消超时处理程序（此处可能需要额外记录通道和处理程序）。

使用 Tcl 8.6，您可以使用协程使您的过程作为协作的“后台线程”工作：很容易实现“超时获取”，它从协程产生并在完成或超时时重新进入它。不过，目前还没有开箱即用的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:10:02.563

执行此操作的标准方法是通过将 I/O 通道设置为非阻塞并使用`fileevent`或使用 tcl 的事件循环`chan event`；但是，tclvisa 文档指出，签证通道不支持 fileevent。

因此，下一个最好的方法是使用非阻塞 I/O（它只是将超时设置为 0）并使用busyloop 读取通道或在延迟后读取它；这些中的任何一个都应该通过事件循环来处理，而不是通过洒`update`在周围（这会产生不良的副作用）。

因此，对于busyloop，您可以执行以下操作：

```
proc busyread {v n} {
    if {$::readdone == 1} {set ::$n "Error"}    
    set r [visa::read $v]
    if {$r == ""} {
        after 5 [list busyread $v $n]
    } else {
        set ::$n $r
        set ::readdone 1
    }
}

set f [visa::open ...]
fconfigure $f -blocking 0
after 1000 [list set ::readdone 1]
set ::readdone 0
busyread $f result
vwait ::readdone   
# $result will now be either the result, or "Error" 
```

`read`只要它一直空着回来，就会不断地重新安排。

这需要进行一些重组以在更大的 gui 程序中工作（vwait 和 timeouts 需要以不同的方式完成），但这显示了基本方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:16:12.973

实际上，我在问题的 tclvisa 方面找到了解决方案。我找到了一种更好的方法来指定通道的超时，而不是使用我错误地认为我必须使用的内置 tclvisa 命令。

```
fconfigure $TemporaryChannel -timeout 100 
```

设置此超时并不能完全解决问题，但会将其减少到晦涩难懂的程度。感谢所有的回复！

# java - com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException 错误 JAVA

> ID：14245832
> 
> 赞同：1
> 
> 时间：2013-01-09T20:26:15.300
> 
> 标签：java, mysql, database

我收到一个我不完全理解的错误，为什么会出现？
我有一个表单，可以在其中将详细信息输入到相关的 JTextBox 中，这些文本框中的数据应该发送到我在本地设置的数据库。

完整的错误信息

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException. You have an error in your 
SQL syntax; check the manual that corresponds to your MySQL server version for the 
right   syntax to use near ')VALUES'asd','asd',",",",",",",'Home','Female','White  
British' at line 1 
```

代码

```
conn = (Connection) SQLConnect.ConnectDb();
    //inserting all values to database
    String sql = "INSERT INTO w1283057.criminalrecords "
            + "(FName, MName, Sname, DOB, Address, HPhone, BPhone, MPhone "
            + "ResidentStatus, Sex, Race, IncidentLocation, Zone, PremiseType "
            + "DateRecorded, TimeRecorded, Weapons, CrimeOffences) "
            + "VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
    try{
        //Declaring all variable that wiil be collected from JTextField
        pst = conn.prepareStatement(sql);
        //coverting JText to String
        String fname = FName.getText();
        String mname = MName.getText();
        String surname = Surname.getText();
        String dob = DOB.getText();
        String fullAddress = FullAddress.getText();
        String hPhone = HPhone.getText();
        String bPhone = BPhone.getText();
        String mPhone = MPhone.getText();
        String incidentLocation = IncidentLocation.getText();
        String incidentZone = IncidentZone.getText();
        String incidentPrType = IncidentPrType.getText();
        String incidentDate = IncidentDate.getText();
        String incidentTime = IncidentTime.getText();
        String incidentWeapons = IncidentWeapons.getText();
        String crimeOffences = CrimeOffences.getText();
        String radioText = "";

        //collecting input data and assign them to variables            
            pst.setString(1, fname);
            pst.setString(2, mname);
            pst.setString(3, surname);
            pst.setString(4, dob);
            pst.setString(5, fullAddress);
            pst.setString(6, hPhone);
            pst.setString(7, bPhone);
            pst.setString(8, mPhone);
            //radio buttons Resident Status
            if(RHome.isSelected())
            {
                radioText = RHome.getText();
                pst.setString(9, radioText);
            }
            else if(RForeign.isSelected())
            {
                radioText = RForeign.getText();
                pst.setString(9, radioText);
            }
            //radio buttons Sex
            if(Male.isSelected())
            {
                radioText = Male.getText();
                pst.setString(10, radioText);

            }
            else if(Female.isSelected())
            {
                radioText = Female.getText();
                pst.setString(10, radioText);
            }
            //radio button Race
            if(WhiteBritish.isSelected())
            {
                radioText = WhiteBritish.getText();
                pst.setString(11, radioText);

            }
            else if(WhiteOther.isSelected())
            {
                radioText = WhiteOther.getText();
                pst.setString(11, radioText);
            }
            else if(Black.isSelected())
            {
                radioText = Black.getText();
                pst.setString(11, radioText);
            }
            else if(Asian.isSelected())
            {
                radioText = Asian.getText();
                pst.setString(11, radioText);
            }
            else if(Indian.isSelected())
            {
                radioText = Indian.getText();
                pst.setString(11, radioText);
            }
            /////////////////////////////////////
            pst.setString(12, incidentLocation);
            pst.setString(13, incidentZone);
            pst.setString(14, incidentPrType);
            pst.setString(15, incidentDate);
            pst.setString(16, incidentTime);
            pst.setString(17, incidentWeapons);
            pst.setString(18, crimeOffences);
            pst.executeUpdate();
            System.out.println("records added sucessfully");

    }
    catch (SQLException a)
        {
            JOptionPane.showMessageDialog(null, a);
        } 
```

![在此处输入图像描述](../Images/4321ee1aa1c01245826bfedb78410696.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T20:27:22.323

你的值列表末尾有一个逗号，去掉它，或者用适当的值填充它。

```
+ "DateRecorded, TimeRecorded, Weapons, CrimeOffences,) " <---
+ "VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,)"; <---- 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T20:54:53.093

你的代码

```
 String sql = "INSERT INTO w1283057.criminalrecords "
        + "(FName, MName, Sname, DOB, Address, HPhone, BPhone, MPhone "
        + "ResidentStatus, Sex, Race, IncidentLocation, Zone, PremiseType "
        + "DateRecorded, TimeRecorded, Weapons, CrimeOffences) "
        + "VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"; 
```

试试这个......在字段（MPhone，PremiseType）缺少逗号之后

```
 String sql = "INSERT INTO w1283057.criminalrecords "
        + "(FName, MName, Sname, DOB, Address, HPhone, BPhone, MPhone, "
        + "ResidentStatus, Sex, Race, IncidentLocation, Zone, PremiseType, "
        + "DateRecorded, TimeRecorded, Weapons, CrimeOffences) "
        + "VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"; 
```

问候。

# css - 如何将 Bootstrap 的英雄单位高度设置为 100%？

> ID：14245833
> 
> 赞同：1
> 
> 时间：2013-01-09T20:26:15.877
> 
> 标签：css, twitter-bootstrap

我正在使用 Bootstrap 做一个非常简单的登录页面。这个想法是让一个英雄单元文本元素覆盖整个页面，而不管窗口大小。`width: 100%;`CSS 指令效果很好，但`height: 100%;`没有任何效果——英雄单元元素仍然高约 200 像素，并附在窗口顶部。如何将英雄单位的高度设置为 100%？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:31:22.703

您必须设置`height:100%`on`html`和`body`标签，如果 hero div 有父级，它也需要它。

示例[http://jsfiddle.net/xExSE/](http://jsfiddle.net/xExSE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:44:51.907

这似乎工作正常：

```
<html>
<head>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!-- css -->
  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.0.4/css/bootstrap-combined.min.css" />
  <style>
    .hero-unit {
      height: 100%;
      background-color: green;
    }
  </style>
</head>

<body>
    <div class="hero-unit">
      <h1>Full Page Hero!</h1>
    </div>
</body>
</html> 
```

# google-apps-script - Google Apps 脚本停止功能运行

> ID：14245840
> 
> 赞同：0
> 
> 时间：2013-01-09T20:26:33.340
> 
> 标签：google-apps-script

更新：添加了 doGet 功能。

我有一个用于注册过程的网络应用程序。我创建了一个电子邮件确认，当用户单击“注册”按钮时会向他们发送一封电子邮件。

我的问题是，如果电子邮件字段留空，我该如何停止该功能的运行？此时，当我运行整个脚本时，如果我不输入电子邮件地址，则单击注册时会显示一条错误消息。我不希望函数抛出错误，我希望仍然能够注册。

```
function doGet(e) {
 var app = UiApp.createApplication().setTitle('Education Registration');
  app.setStyleAttribute("background", "#DBE8C4");
var panel1 = app.createAbsolutePanel().setId('panel1');
  panel1.setHeight(900);
  panel1.setWidth(1500);

  //Register button

var dateSelection = app.createButton('Register').setSize(140, 40);
var loadingWait = app.createLabel('After clicking Register, please allow 5 - 30 seconds for the webpage to process the request.');
var clickHandler = app.createServerHandler("respondToDateSelection");
  dateSelection.addClickHandler(clickHandler);
  clickHandler.addCallbackElement(panel1);

//Email Handler
var emailHandler = app.createServerHandler("emailConfirmation");
  dateSelection.addClickHandler(emailHandler);
  emailHandler.addCallbackElement(panel1);

  return app;

}

function emailConfirmation(e) {
 var app = UiApp.getActiveApplication();

  app.getElementById('fNameText1');
  app.getElementById('lNameText1');
  app.getElementById('eAddressText1');
  app.getElementById('dataItemsLB');
  app.getElementById('aemailAddressText');

  var fNameText1 = e.parameter.fNameText1;
  var lNameText1 = e.parameter.lNameText1;
  var eAddressText1 = e.parameter.eAddressText1;
  var dataItemsLB = e.parameter.dataItemsLB;
  var aemailAddressText = e.parameter.aemailAddressText;

  var subject = "Class Registration Confirmation - " + fNameText1 + " " + lNameText1;
  var emailBody = "This is an Email Confirmation.";

            MailApp.sendEmail(eAddressText1, subject,
                 emailBody, {cc: aemailAddressText});

  return app;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:42:29.420

有很多方法可以做到这一点，最“优雅”的方法可能是在你的函数中使用[客户端处理程序验证器](https://developers.google.com/apps-script/class_clienthandler?hl=en)`doGet`，但你没有显示它......（有一个特定的电子邮件验证器）另一种方法是有一个UI 中的警告标签最初是不可见的，当`e.parameter.eAddressText1`不是有效的电子邮件或为空时才可见，相同的条件将适用于`sendEmail`命令，如果无效则跳过它然后返回 UI。

随时发布您的 doGet 函数，以获得更准确的答案。

* * *

**编辑：** 感谢您发布您的代码，虽然它不完整并且需要一些工作才能使其成为一个有趣的示例，但我最终使用此代码来说明 clientHandlers、验证器和 try/catch 的电子邮件地址的使用......

这是代码，我将其更改为在电子表格上工作以避免部署和版本控制，这只是一个测试，仅此而已......

```
function doGet(e) {
 var app = UiApp.createApplication().setTitle('Education Registration');
  app.setStyleAttribute("background", "#DBE8C4");
  var panel0 = app.createFlowPanel().setId('panel0');
  var panel1 = app.createVerticalPanel().setId('panel1');
  var fNameText1=app.createTextBox().setName('fNameText1').setId('fNameText1');;
  var lNameText1=app.createTextBox().setName('lNameText1').setId('lNameText1');;
  var eAddressText1=app.createTextBox().setName('eAddressText1').setId('eAddressText1').setText('mail')
  var dataItemsLB=app.createTextBox().setName('dataItemsLB').setId('dataItemsLB');;
  var aemailAddressText=app.createTextBox().setName('aemailAddressText').setId('aemailAddressText').setText('mail');
  panel1.add(fNameText1).add(lNameText1).add(eAddressText1).add(dataItemsLB).add(aemailAddressText)
  panel0.add(panel1)

//Register button
  var dateSelection = app.createButton('Register').setSize(140, 40).setId('dateSelection');
  var loadingWait = app.createLabel('After clicking Register, please allow 5 - 30 seconds for the webpage to process the request.').setVisible(false).setId('loadingWait');
  var clickHandler = app.createServerHandler("respondToDateSelection").validateEmail(eAddressText1);
  dateSelection.addClickHandler(clickHandler);
  clickHandler.addCallbackElement(panel0);

//Email Handler
  var emailHandler = app.createServerHandler("emailConfirmation").validateEmail(eAddressText1);
  dateSelection.addClickHandler(emailHandler);
  emailHandler.addCallbackElement(panel1);

//client handlers
  var warning = app.createLabel('Please enter your email where necessary').setId('warning').setVisible(false).setStyleAttribute('background','yellow')
  var clientHandlerwait = app.createClientHandler().forTargets(loadingWait).setVisible(true).validateEmail(eAddressText1)
  var clientHandler1 = app.createClientHandler().validateNotEmail(eAddressText1)
    .forTargets(warning).setVisible(true).forEventSource().setStyleAttribute('color','red')
  var clientHandler2 = app.createClientHandler().validateNotEmail(aemailAddressText)
    .forTargets(warning).setVisible(true).forEventSource().setStyleAttribute('color','red')

  dateSelection.addClickHandler(clientHandlerwait).addClickHandler(clientHandler1).addClickHandler(clientHandler2)

  app.add(panel1.add(dateSelection).add(loadingWait).add(warning))
  SpreadsheetApp.getActive().show(app)
//  return app;
}

function respondToDateSelection(){
return
}

 function emailConfirmation(e) {
  var app = UiApp.getActiveApplication();
   app.getElementById('warning').setVisible(false);
   app.getElementById('dateSelection').setStyleAttribute('color','black')

  var fNameText1 = e.parameter.fNameText1;
  var lNameText1 = e.parameter.lNameText1;
  var eAddressText1 = e.parameter.eAddressText1;
  var dataItemsLB = e.parameter.dataItemsLB;
  var aemailAddressText = e.parameter.aemailAddressText;
  var subject = "Class Registration Confirmation - " + fNameText1 + " " + lNameText1;
  var emailBody = "This is an Email Confirmation.";
    try{
//            MailApp.sendEmail(eAddressText1, subject,emailBody, {cc: aemailAddressText});
        Utilities.sleep(500)// simulate a duration to read the message
        app.getElementById('loadingWait').setText('mail sent').setVisible(true)
}catch(err){
        app.getElementById('loadingWait').setText('error sending mail').setVisible(true)
}
  return app;
} 
```

# log4net - XmlConfiguratorAttribute 不适用于 this.Log 和 log4net？

> ID：14245845
> 
> 赞同：0
> 
> 时间：2013-01-09T20:26:48.750
> 
> 标签：log4net

我正在使用 this.Log 并试图让应用程序开始使用以下属性：

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "Log4Net.config", Watch = true)] 
```

这似乎不起作用，当我打开 log4net 调试时，我似乎无法找出原因。我查看了 this.Log 代码，并在 Log4NetLog.cs 文件中找到了以下行：

```
[assembly: XmlConfigurator(Watch = true)] 
```

这会覆盖我自己的程序集设置吗？有没有办法让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T12:13:54.653

由于您有源代码，因此您可以删除该行并重新编译。

或者，您可以在运行时覆盖设置，例如添加行（在程序的开头或在静态构造函数中）

```
log4net.Config.XmlConfigurator.ConfigureAndWatch(new System.IO.FileInfo("Log4net.config")); 
```

# c# - 反序列化具有多个元素属性的 XML 文件 - 属性未反序列化

> ID：14245846
> 
> 赞同：23
> 
> 时间：2013-01-09T20:26:52.433
> 
> 标签：c#, .net, xml, serialization

使用 C# .Net 4 -- XML 示例（真实示例有 6 个属性）

```
<TestXML>
  <TestElement attr1="MyAttr" attr2="1" DateAdded="">25</TestElement>
</TestXML> 
```

对于我的类定义，我有以下内容：

```
public class TestXML() {
   public TestXML() {}

   public int TestElement {get; set;}
   [XmlAttribute]
   public string attr1 {get; set;}
   [XmlAttribute]
   public string attr2 {get; set;}
   [XmlIgnore]
   public DateTime DateAdded {get; set;}
   [XmlAttribute("DateAdded")]
   public string dateadded {
      get{ return (DateAdded == null ? "" : DateAdded.ToString();}
      set{ if(!value.Equals("")) DateAdded = DateTime.Parse(value);}
   }
} 
```

现在反序列化的代码：

```
string xml = "<TestXML><TestElement attr1=\"MyAttr\" attr2=\"1\" DateAdded=\"\">26</TestElement></TestXML>"
using (StringReader sr = new StringReader(xml)) {
   XmlSerializer serializer = new XmlSerializer(typeof(TestXML));
   TestXML myxml = (TestXML)serializer.Deserialize(sr);
} 
```

现在我们得到的结果是（在 VS 中查看对象）：

```
myxml
  attr1         |  null
  attr2         |  null
  TestElement   |  25 
```

完全不知道为什么属性不会反序列化。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-09T20:35:32.063

为此，您需要两个级别：

```
[XmlRoot("TestXML")]
public class TestXml {
    [XmlElement("TestElement")]
    public TestElement TestElement { get; set; }
}

public class TestElement {
    [XmlText]
    public int Value {get;set;}

    [XmlAttribute]
    public string attr1 {get;set;}

    [XmlAttribute]
    public string attr2 {get;set;}
} 
```

请注意，这`> 26 <`也可能导致问题（空格）；你可能需要它是一个字符串而不是一个 int。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:32:29.333

您正在定义属性 on`TestElement`而它们应该是 on `TestXML`。例子：

```
@"<TestXML attr1=""MyAttr"" attr2=""1"">
      <TestElement>26</TestElement>
  </TestXML>" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T20:49:45.297

我刚刚运行了一个测试序列化/反序列化你的对象，它似乎工作正常

测试：

```
TestXML obj = new TestXML{ attr1 = "Attrib1", attr2 = "Attrib2", DateAdded = DateTime.Now, TestElement = 44};

XmlSerializer serializer = new XmlSerializer(typeof(TestXML));
using (FileStream stream = new FileStream(@"C:\StackOverflow.xml", FileMode.OpenOrCreate))
{
    serializer.Serialize(stream, obj);
}

using (FileStream stream = new FileStream(@"C:\StackOverflow.xml", FileMode.Open))
{
    TestXML myxml = (TestXML)serializer.Deserialize(stream);
} 
```

所有属性都反序列化了。

结果：

![在此处输入图像描述](../Images/fb5122834019d4032ac5e8ef5f9cd5ee.png)

xml:

```
<?xml version="1.0"?>
<TestXML xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" attr1="Attrib1" attr2="Attrib2" DateAdded="10/01/2013 9:46:23 a.m.">
  <TestElement>44</TestElement>
</TestXML> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-15T20:37:32.747

作为已接受答案的附加说明。确保 xml 元素不包含这样的 nil="true" 属性：

```
<TestXML>
  <TestElement attr1="MyAttr" attr2="1" DateAdded="" xsi:nil="true">25</TestElement>
</TestXML> 
```

根据我的经验，反序列化器不会反序列化标记为 null (nil) 的元素的属性。

# javascript - jQuery 之前的 JavaScript 版本

> ID：14245848
> 
> 赞同：-1
> 
> 时间：2013-01-09T20:26:55.203
> 
> 标签：javascript, jquery

我正在用 JavaScript 编写一个简单的手风琴。

我需要在 DOM 中的另一个元素之前放置一个元素。我知道我可以使用 jQuery 的 insertBefore 来做到这一点，但我不熟悉如何只使用 JavaScript 来做到这一点。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:30:00.467

本机 API 有一个`.insertBefore`方法。您将要插入的元素以及要插入的元素传递给它。

```
// Create a new textNode, get reference to container
var foo = document.createTextNode("Foo"),
    div = document.getElementById("foo");

// Insert new textNode before container's firstChild
div.insertBefore(foo, div.firstChild); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/rn5pa/](http://jsfiddle.net/jonathansampson/rn5pa/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T20:30:09.137

使用`insertBefore()`：

```
var el = document.getElementById('elementID'),
    newElement = document.createElement('div');

el.parentNode.insertBefore(newElement, el); 
```

参考：

*   [`Node.insertBefore()`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T20:29:51.383

您可以使用[insertBefore](http://www.w3schools.com/jsref/met_node_insertbefore.asp)方法

# java - Java - 简单的字符串问题

> ID：14245857
> 
> 赞同：-1
> 
> 时间：2013-01-09T20:27:31.727
> 
> 标签：java, string, methods

> **可能重复：**
> [java中的字符串拆分](https://stackoverflow.com/questions/3481828/string-split-in-java)

我有一个字符串：

```
"jack#james#joahn#logan#" 
```

我知道有一个`String`类的方法可以在符号上分离它`#`。所以它会回到我身边

```
"jack" "james" "joahn" "logan" 
```

这种方法的名称是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:28:32.757

这是`String.split("#")`. 例如：

```
String s = "jack#james#joahn#logan#";
String parts[] = s.split("#"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:29:35.550

请参阅 String.split 方法。这是一个[例子](http://www.java-examples.com/java-string-split-example)：

# php - E_STRICT 是做什么的？

> ID：14245859
> 
> 赞同：7
> 
> 时间：2013-01-09T20:27:35.207
> 
> 标签：php, error-handling

我实际上有兴趣确保我们的代码库没有错误，这些错误会被 PHP 的内置错误检查警告，但我想看看 E_STRICT 究竟执行了什么。推而广之，什么是 PHP 的“严格标准”？我查看了但找不到完整的列表。

我从经验中了解到的一些严格标准：

*   警告不要静态调用非静态方法
*   警告不兼容的子类函数签名
*   警告不要通过引用分配值

我所知道的关于 E_STRICT 的唯一信息是它会警告可能破坏前向兼容性的代码，但我不确定这具体意味着什么。

有没有很好的资源来提供这方面的信息？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-09-13T18:24:21.550

`E_STRICT`和“严格标准”是一回事。（并且[它们在 PHP 7 中被删除](https://wiki.php.net/rfc/reclassify_e_strict)。）

该文档目前没有特定警告列表，但我们可以通过搜索[PHP 源代码](https://github.com/php/php-src)`E_STRICT`轻松构建一个。

下面的列表（我认为在 PHP 5.6 中是准确的）是通过以下方法在 Unix 系统上形成的：

1.  克隆 PHP Git 存储库：

    ```
    git clone https://github.com/php/php-src 
    ```

2.  签出版本 5.6.0：

    ```
    cd php-src
    git checkout PHP-5.6.0 
    ```

3.  搜索包含以下内容的所有 C 文件（带有`.h`和`.c`扩展名的文件）`E_STRICT`：

    ```
    grep --include=*.[ch] -rl . -e E_STRICT 
    ```

4.  手动查看 (21) 个匹配的文件中的每一个以查找发出`E_STRICT`警告的代码，尝试推断发出警告的情况（我不是 C 程序员，但对此并不难猜测东西，尤其是代码中的人类可读错误消息来指导你）然后在交互式 PHP shell 中测试它们以确保我是对的。

鉴于上述方法略显粗糙，并且取决于`E_STRICT`可以在所有发出警告的位置旁边的源代码中找到的假设，我可能错过了一些东西 - 但希望这`E_STRICT`至少*接近于*综合清单。

# PHP 中导致 E_STRICT 警告的内容

1.  [`mktime()`](http://php.net/manual/en/function.mktime.php)不带参数调用

    ```
    php > mktime();
    PHP 严格标准：mktime()：您应该使用 time() 函数
    而是在第 1 行的 php shell 代码中
    ```

2.  使用[资源](http://php.net/manual/en/language.types.resource.php)作为数组索引

    ```
    php > $file_pointer = fopen('/dev/null', 'r'); 
    php > $array = [3,4,5,6]; 
    php > $array[$file_pointer];
    PHP 严格标准：资源 ID#2 用作偏移量，转换为整数 (2)
    在第 1 行的 php shell 代码中
    ```

3.  将 UTF-8 以外的多字节编码传递给[`htmlentities`](http://php.net/manual/en/function.htmlentities.php)

    ```
    php > htmlentities('qwertyuiop', 0, 'BIG5');
    PHP 严格标准：htmlentities()：只有基本的实体替换是
    支持 UTF-8 以外的多字节编码；功能是
    相当于第 1 行 php shell 代码中的 htmlspecialchars
    ```

4.  声明一个[抽象的](http://php.net/manual/en/language.oop5.abstract.php) [静态](http://php.net/manual/en/language.oop5.static.php)方法

    ```
    php >抽象类 Foo { 静态抽象函数 bar(); }
    PHP 严格标准：静态函数 Foo::bar() 不应该是抽象的
    第 1 行的 php shell 代码
    ```

5.  [`__construct`](http://php.net/manual/en/language.oop5.decon.php#example-202)用一个方法和一个以该类命名的[旧式构造](http://php.net/manual/en/language.oop5.decon.php#example-203)函数声明一个类

    ```
    php > class MyClass { 
    php {     function MyClass () {} 
    php {     function __construct () {} 
    php { }
    PHP 严格标准：为类重新定义已定义的构造函数
    第 3 行 php shell 代码中的 MyClass
    ```

6.  调用[`mysqli_next_result`](http://php.net/manual/en/mysqli.next-result.php)或`mysqli::next_result`在没有准备下一个结果的 Mysqli 连接对象上

    ```
    php > $conn = mysqli_connect('127.0.0.1', 'root'); 
    php > mysqli_multi_query($conn, "SELECT 'first'; SELECT 'second';"); 
    php > echo mysqli_use_result($conn)->fetch_row()[0];
    第一的
    php > mysqli_next_result($conn); 
    php > echo mysqli_use_result($conn)->fetch_row()[0];
    第二
    php > mysqli_next_result($conn);
    PHP 严格标准：mysqli_next_result()：没有下一个结果集。
    请调用 mysqli_more_results()/mysqli::more_results() 检查是否
    在第 1 行的 php shell 代码中调用此函数/方法
    ```

7.  覆盖子类中的方法以将不同数量的参数传递给其父类中的同一方法

    ```
    php > class A { public function foo ($x) {} } 
    php > class B extends A { public function foo () {} }
    PHP 严格标准：B::foo() 的声明应与
    A::foo($x) 在第 1 行的 php shell 代码中
    php >类 C 扩展 A { public function foo ($x, $y) {} }
    PHP 严格标准：C::foo() 的声明应与
    A::foo($x) 在第 1 行的 php shell 代码中
    ```

8.  在 trait 和使用它的类中以兼容的方式声明相同的属性。这个实际上有很好的[记录](http://php.net/manual/en/language.oop5.traits.php)：

    > 如果一个 trait 定义了一个属性，那么一个类不能定义一个同名的属性，否则会发出错误。`E_STRICT`如果类定义兼容（相同的可见性和初始值），则为致命错误，否则为致命错误。
    > 
    > ### Example #12 冲突解决
    > 
    > ```
    > <?php
    > trait PropertiesTrait {
    >     public $same = true;
    >     public $different = false;
    > }
    > 
    > class PropertiesExample {
    >     use PropertiesTrait;
    >     public $same = true; // Strict Standards
    >     public $different = true; // Fatal error
    > }
    > ?> 
    > ```

    严格模式警告的示例：

    ```
    php > trait PropertiesTrait { 
    php { public $same = true; 
    php { } 
    php >类 PropertiesExample { 
    php { 使用 PropertiesTrait; 
    php { 公共$相同=真；
    php { }
    PHP 严格标准：PropertiesExample 和 PropertiesTrait 定义
    PropertiesExample 的组成中的相同属性 ($same)。这有可能
    不兼容，为了提高可维护性考虑使用访问器
    而是使用特征中的方法。类是在第 4 行的 php shell 代码中组成的
    ```

9.  静态调用非静态方法

    ```
    php > class Foo { function bar() {} } 
    php > Foo::bar();
    PHP 严格标准：不应调用非静态方法 Foo::bar()
    静态地在第 1 行的 php shell 代码中
    ```

10.  非静态地引用静态属性

    ```
    php > class Cow { static public $noise = 'moo'; } 
    php > $cow = 新牛；
    php > $cow->noise = "MOOOOO";
    PHP 严格标准：将静态属性 Cow::$noise 作为非静态访问
    在第 1 行的 php shell 代码中
    ```

11.  [通过引用](http://php.net/manual/en/language.references.pass.php)直接传递函数调用的结果。

    ```
    php >函数 foo () { 返回 1; } 
    php >函数 bar (&$some_arg) {} 
    php > bar(foo());
    PHP 严格标准：在 php 中只能通过引用传递变量
    第 1 行的 shell 代码
    php > $var = &foo();
    PHP 严格标准：只能通过引用分配变量
    第 1 行的 php shell 代码
    ```

    请注意，通过引用传递其他非变量，如文字或常量，是一个致命错误，而不是`E_STRICT`

# php - {strip} 具有最大行长的模板函数

> ID：14245861
> 
> 赞同：0
> 
> 时间：2013-01-09T20:27:50.653
> 
> 标签：php, smarty

`{strip}`当我将其输出到页面并使用它超出 Outlook 行限制并破坏 HTML时，我在数据库中保存了一大块 html 文本。

1.  在 PHP 中，什么是回显文本块以确保其在指定字符宽度内的最佳性能方式

2.  有没有办法将它`{strip}`作为参数添加到 smarty 函数中：`{strip length=1000}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:34:53.753

该[`wordwrap()`](http://php.net/wordwrap)函数在 (1) 中执行您想要的操作。

# php - 在哪里放置代码以显示查询结果的详细信息

> ID：14245864
> 
> 赞同：1
> 
> 时间：2013-01-09T20:28:12.750
> 
> 标签：php, jquery, ajax, mysqli

我很难知道哪些代码应该放在哪些页面中。

我想做的是以下几点：

*   在页面中，用户从下拉菜单`addstudentsession.php`中选择评估`#sessionsDrop`

*   每次从下拉菜单中选择评估时（或者换句话说，每次在下拉菜单中更改选项时），它都会对单独的页面执行 ajax 调用以`addedstudents.php`执行查询以查看哪些学生在所选评估中.

*   从查询结果中进行评估的学生应该显示在多选框中`addstudentsession.php`（如果用户没有选择评估，我仍然希望显示一个空白的多选框`addstudentsession.php`

我的问题应该是每个代码的放置位置应该能够执行此操作，因为我根本没有做到这一点。根本没有出现多选框，我得到了一个未定义的变量。

以下是当前`addstudentsession.php`页面：

**下拉式菜单：**

```
$sessionHTML = '';

if($sessionnum ==0){
$pHTML = "<span style='color: red'>Sorry, You have No Assessments under this Module</span>";
} 

$sessionHTML = '<select name="session" id="sessionsDrop">'.PHP_EOL;
$sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           

$studentInfo = array();

while ( $sessionqrystmt->fetch() ) {

$sessionHTML .= sprintf("<option value='%s'>%s - %s - %s</option>", $dbSessionId, $dbSessionName, date("d-m-Y",strtotime($dbSessionDate)), date("H:i",strtotime($dbSessionTime))) . PHP_EOL;    

}

$sessionHTML .= '</select>';

...

<form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='assessmentForm'>
<p><strong>Assessments:</strong> {$sessionHTML} </p>   
</form>"; 
```

多选框：

```
//getting undefined error below of studentSELECT
     $moduleexist="
        <form id='moduleExistForm'>
        <p><strong>Current Students in Chosen Assessment:</strong></p>
        <p>{$studentSELECT}</p>
        </form> 
        </div>";

        echo $moduleexist; 
```

**阿贾克斯调用：**

```
 $('#sessionsDrop').change( function(){
            var search_val = $(this).val();
            $.post("addedstudents.php", 
            {studenttextarea : search_val}, 
            function(data){
   if (data.length>0){ 
     $("#studentselect").html(data); 
   }
)}; 
```

`addedstudents.php`以下是执行查询并在选择框中列出详细信息的当前页面：

```
<?php

$studentactive = 1;

$currentstudentqry = "
SELECT
ss.SessionId, st.StudentId, st.StudentAlias, st.StudentForename, st.StudentSurname
FROM
Student_Session ss 
INNER JOIN
Student st ON ss.StudentId = st.StudentId
WHERE
(ss.SessionId = ? and st.Active = ?)
ORDER BY st.StudentAlias
";

$currentstudentstmt=$mysqli->prepare($currentassessmentqry);
// You only need to call bind_param once
$currentstudentstmt->bind_param("ii",$sessionsdrop, $stuentactive);
// get result and assign variables (prefix with db)

$currentstudentstmt->execute(); 

$currentstudentstmt->bind_result($dbSessionId,$dbStudentId,$dbStudentAlias,$dbStudentForename.$dbStudentSurname);

$currentstudentstmt->store_result();

$studentnum = $currentstudentstmt->num_rows();   

$term = $_POST['studenttextarea'];

$studentSELECT = '<select name="studenttextarea" id="studentselect" size="6">'.PHP_EOL;      

if($studentnum == 0){

$studentSELECT .= "<option disabled='disabled' class='red' value=''>No Students currently in this Assessment</option>"; 

}else{   

while ( $currentstudentstmt->fetch() ) {

$studentSELECT .= sprintf("<option disabled='disabled' value='%s'>%s - %s s</option>", $dbStudentId, $dbStudentAlias, $dbStudentForename, $dbStudentSurname) . PHP_EOL; 
}

}

$studentSELECT .= '</select>';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:02:21.607

在你的`addedstudents.php`你必须返回值`$studentSELECT`。添加一个

```
echo $studentSELECT 
```

在你的 PHP 结束时。

你也永远不会`$term = $_POST['studenttextarea'];`在你的 PHP 代码中使用任何地方。此外`$sessionsdrop`，在任何地方都没有定义，`$stuentactive`可能是一个错字 ( `$studentactive`)。同样适用于`$currentstudentqry`vs `$currentassessmentqry`。

# rest - ServiceStack、REST 和多个参数

> ID：14245865
> 
> 赞同：1
> 
> 时间：2013-01-09T20:28:19.417
> 
> 标签：rest, servicestack

我有一个关于 REST 的一般问题。

想象一下，我有一个 WCF Web 服务，用于添加对银行卡执行的操作。问题是在 WS 上传递大约 30 个不同的参数。

在 WCF 上这很容易做到，使用所有这些参数调用 RPC。

问题是我想将此 WCF WS 切换为带有 ServiceStack 的 REST API。

我遇到的问题是，如果我尝试使用 REST 创建操作并通过“查询字符串”传递参数，我有一个字符串是 AWFUL 用于读取和非常非常长（`?amount=1234&operationID=12&`等等）。

我知道这种做法不好，因为它不是面向资源的，但这是否意味着我应该将该项目的创建分成几个步骤（我的意思是，首先使用 POST 创建，然后使用多个帖子添加新的信息/字段？） .

在这种情况下，我无法清楚地看到 REST 的好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:33:46.750

如果您在查询字符串中传递这些参数，我假设您正在执行 HTTP GET。在 REST API 中，GET 通常保留用于取回数据，您传入的唯一参数是过滤结果。如果您正在执行更改系统状态的操作，您希望执行 POST 或 PUT 并将消息正文中的数据作为 XML 或 JSON 传递，而不是在查询字符串中传递。

REST 的好处是，如果您将此 API 开放给其他人，因为它使其更易于移植到异构系统，并且有一些性能优势。它还会打开您的 API 以供客户端（例如 Web 浏览器）使用。但是，如果此 API 仅供内部使用，而不是在浏览器中运行的 .NET 应用程序，那么您可能希望坚持使用 WCF。REST 并不是所有问题的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:22:57.700

I am not sure to understand your question... REST doesn't mean "no payload". On the contrary, REST means "representational state transfer", so the body of HTTP requests (aka "representational state") is essential.

For a lot of reasons, in the case of a bank, resources are usually bank operations. CouchDB's guide has a very nice [scenario about that](http://guide.couchdb.org/draft/recipes.html#banking).

In other words, your "parameters" would be the attributes of the resource representation (in JSON, XML or what you want) you would GET, POST, PUT or DELETE.

# mongodb - 是否有针对 MongoDB 的新遗物配置的分步指南？

> ID：14245868
> 
> 赞同：1
> 
> 时间：2013-01-09T20:28:39.603
> 
> 标签：mongodb, newrelic

是否有关于 MongoDB 的新遗物配置的分步指南？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:20:54.010

There is some information on MongoDB queries available through the Gem [https://github.com/newrelic/rpm_contrib](https://github.com/newrelic/rpm_contrib) for ruby

# html - 当我想将 CSS 样式应用于文本块时，理想的标签是什么？

> ID：14245869
> 
> 赞同：6
> 
> 时间：2013-01-09T20:28:43.990
> 
> 标签：html, css

要设置文本样式，我通常使用以下方法之一：

```
<span class="header">...</span>
<div class="header">...</div>
<p class="header">...</p>
<label class="header">...</label> 
```

但是，我使用哪个标签将 CSS 样式应用于文本块真的很重要吗？

通常我`<div>`用于应该在单个块中的所有内容（如页眉或脚注），或`<span>`用于内联的所有内容（如段落中的强调文本），但是我最近发现自己使用`<div>`标签来设置文本的样式`*Required`，我认为这似乎有点傻，因为它是一个词，我开始想知道这是否是“正确”的做事方式，或者一个标签是否比另一个标签更适合用于像这样的简单文本样式。

当我想将 css 类应用于文本块时，是否有某种关于使用哪个标签的标准？如果是这样，哪些因素决定了使用哪个标签以及何时使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T20:35:11.463

您引用的每个标签都有[语义](http://en.wikipedia.org/wiki/Semantic_Web)价值。

例如，`<p>`表示文本段落，`<label>`表示用于注释输入的文本块。a `<div>`也可用于在逻辑部分（部门，因此名称）中分隔页面，不一定只是文本，而 a`<span>`通常用于表示特定样式的内联文本部分（即使可以显示跨度）如有必要，作为块级元素）。

虽然您不需要遵循语义标准，但当页面需要以非可视方式解释时（例如由搜索引擎爬虫），它不会用人眼“看到”页面，并且需要大致了解页面的组织方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:42:16.003

查看您拥有的每种元素的语义定义：[http ://w3schools.com/tags/default.asp](http://w3schools.com/tags/default.asp)

虽然`span`和`div`在语义上是中性的，但可以更好地使用有助于为用户和浏览器提供意义的类或描述符来呈现它们。此外，您可以使用更高级别的块或内联元素通过 CSS 提供样式，而不是为了显示而严格插入其他元素。

这也是 HTML5 提供一些优势的一个领域，它定义了新元素，如`article`, `section`, `aside`, `figure`, `header`, `hgroup`, `nav`,`footer`和. 以上链接中的每种元素类型及其标准用法和假定含义也是如此。`details``summary`

标记不是一门精确的科学，但对所使用的元素及其隐含含义进行一些额外的思考，不仅有助于更好地构建代码，而且在 CSS 选择器方面为您提供更多选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:47:51.303

```
<span class="header">...</span> 
```

非常适合内联文本修改。

```
<div class="header">...</div> 
```

通常用于块，但是带有文本的块也是块。

```
<p class="header">...</p> 
```

这是为段落。他们也默认在它下面有一些额外的边距。

```
<label class="header">...</label> 
```

仅在表单元素的上下文中使用

您**可以**将它们全部用于所有内容，也可以使跨度显示为块元素，但您不能确定这在所有浏览器中都会显示相同。正如 SirDarius 已经提到的，它对于非视觉方式很重要

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-09T20:44:50.023

*“你引用的每个标签都有一个语义值。例如，`<p>`表示一个段落，`<label>`表示一个用于注释输入的文本块。”*

大流士爵士是绝对正确的。您使用的标签应该反映它们所描述的内容。

如果您想具体了解`<div>`'s 和`<span>`'s than `<div>`'s 用于组块元素，通常用于使用 css 格式化。A`<span>`用于内联元素（例如，在句子中设置一个单词的样式）。

有关所有标签的更多信息，请参阅[此处](http://www.w3schools.com/tags/)。

# android - achartengine：如何将图表添加到选项卡中的片段

> ID：14245871
> 
> 赞同：1
> 
> 时间：2013-01-09T20:28:45.723
> 
> 标签：android, layout, charts, fragment, achartengine

我想在标签下方显示一个按钮和一个饼图。这就是我使用的代码：[https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabs.java](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabs.java) 而不是 CountingFragment 等。我实现了自己的. 我不知道该怎么办

我的 xml：fragment_graph_categories.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/fragment_graph_categories"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button_filter"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/button_filter" />
    </LinearLayout> 
```

这就是我附加到 TabManger 的“标签”

```
public class GraphCategories extends SherlockFragmentActivity {
    GraphCategoriesFragment mCategoriesFragment;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment_graph_categories);

        if (savedInstanceState == null) {
            // Do first time initialization -- add initial fragment.
            mCategoriesFragment = GraphCategoriesFragment.newInstance(1);
            FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
            ft.add(R.id.fragment_graph_categories, mCategoriesFragment).commit();
        } else {
            //mStackLevel = savedInstanceState.getInt("level");
        }
    }

    @Override
    protected void onResume() {
        if(mCategoriesFragment != null) {
            //mCategoriesFragment.onResumeRedraw();
        }
    }
    //notice Inner class
    public static class GraphCategoriesFragment extends SherlockFragment {
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        //View mChartView = inflater.inflate(R.layout.hello_world, container, false);
        View rlayout = inflater.inflate(R.layout.fragment_graph_categories, container, false);

        //? rlayout = new LinearLayout(getActivity());

        return rlayout;
        }   
    }
} 
```

但是我不确定要在片段 onCreateView 上膨胀什么，或者我的 xml 中是否需要 FrameLayout？我尝试了一些选项，但没有弄清楚。

# google-maps-api-3 - 触发移动布局时，Twitter Bootstrap 响应式导航栏会破坏正文

> ID：14245872
> 
> 赞同：0
> 
> 时间：2013-01-09T20:28:50.150
> 
> 标签：google-maps-api-3, twitter-bootstrap, responsive-design

我是 SO 的长期沉默成员。到目前为止，我一直都能找到我需要的答案，因此我的第一篇文章！我似乎找不到与 twitter bootstrap 相关的问题的解决方案。

这是谷歌地图与固定顶部导航栏布局集成的一个非常简单的例子。在桌面浏览器上一切正常。每当我调整浏览器窗口的大小时，引导程序切换到移动布局并显示展开/折叠按钮。这很好用，除了我的地图容器因为引导程序而中断，似乎在地图图层周围添加了一些填充。我是新成员，它不会让我附上屏幕截图，但我希望您通过查看下面的站点 URL 来获得和想法。Simpy 缩小浏览器窗口，你会明白我在说什么。

我也在 Android 模拟器上对其进行了测试，结果相同。

[网站网址](http://arielfaur.host-ed.me/work/testmaps/gmaps.html)

任何帮助，将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:58:15.887

你需要把它添加到你的CSS

```
.navbar-fixed-top, .navbar-fixed-bottom {
position: fixed;
} 
```

我看到它是

```
.navbar-fixed-top, .navbar-fixed-bottom {
position: static;
} 
```

# c# - Linq complex - 枚举性能

> ID：14245879
> 
> 赞同：1
> 
> 时间：2013-01-09T20:29:15.743
> 
> 标签：c#, linq

有一个返回的方法`IEnumerable<User>`，我一直在使用 Linq / Entity Framework / SQL Server 来返回结果。

我遇到了一个困难的条件[场景](https://stackoverflow.com/questions/14214686/left-join-condition-on-right)，在 Web 服务器上的 C# 迭代中更容易解决（在 linq 语句链的末尾，就在将数据返回给客户端之前）：

```
public IEnumerable<User> ReturnUsersNotInRoles()
{
    IQueryable<User> z = (from users
                    //...many joins..conditions...
                    ).Distinct().Include(x => x.RoleUserLinks).ToList()

    IEnumerable<User> list = new List<User>();

    foreach (User user in z)
    {
        bool shouldReturnUser = true;

        foreach (var rul in user.RoleUserLinks)
        {
            if (rul.LinkStatusID == (byte)Enums.LinkStatus.Added)
                shouldReturnUser = false;
        }
        if (shouldReturnUser)
            list.Add(user);
    }

    return list;
} 
```

问题：在 C# 中是否有更高效/更少内存开销的方式来执行此操作？

我只是从 Linq 带回我需要的实体。没有[N+1](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)的情况。目前的表现非常出色。

我意识到理想情况下我会在 SQL / Linq 中编写它，因为那时 SQL Server 会发挥它的魔力并快速为我提供数据。但是，我正在平衡这与潜在的 v.hard 查询来理解，以及当前具有迭代的出色性能，以及易于理解 C# 方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:36:26.197

这个怎么样：

```
public IEnumerable<User> ReturnUsersNotInRoles()
{
    var z = (from users
                    //...many joins..conditions...
                    ).Distinct().Include(x => x.RoleUserLinks);

    var addedLinkStatusID = (int)Enums.LinkStatus.Added;
    return z.Where(user => 
               false == user.RoleUserLinks.Any(link => link.LinkStatusID == addedLinkStatusID))
            .ToList();
} 
```

这应该完全作为 SQL 查询运行 - 您可以通过在定义它的行的末尾`z`添加 a 来实现第一部分 ( ) 。`.ToList()`

* * *

顺便说一句，关于您的问题“在 C# 中是否有更高性能/更少内存开销的方式来执行此操作？” - 好吧，首先您可以`break`在设置后立即添加一个语句`shouldReturnUser = false;`。

其次，无论我是否使用数据库，我都更喜欢尽可能使用 LINQ 原语：

1.  如果使用得当，使用 LINQ 方法的实现可能会比您编写的任何东西都快或快。
2.  更重要的是，它们促进了功能性、无状态编程，而不是有状态、容易出错的编程。
3.  此外，如果您*正在*使用数据库，您可以决定是否希望代码作为 SQL 查询运行 - 您所要做的就是决定在哪里实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:43:11.877

您的循环等效于以下 LINQ 查询 - 我发现它比循环更容易理解，并且当与查询的第一部分结合使用时，它允许在服务器上完整执行。

```
var linkStatusAdded = (Byte)Enums.LinkStatus.Added;

return z.Where(user => user.RoleUserLinks
                           .All(rul => rul.LinkStatusID != linkStatusAdded))
        .ToList(); 
```

# internet-explorer - 他们是不同的Flash播放器吗？

> ID：14245882
> 
> 赞同：0
> 
> 时间：2013-01-09T20:29:36.743
> 
> 标签：internet-explorer, flash

我正在使用 Shockwave 玩 Flash 和 C#。今天，通过我的应用程序运行 Flash 时，我开始遇到一些奇怪的“配置错误”。奇怪的是，通过 IE 运行相同的 Flash 会导致相同的错误，但通过 Firefox 或 Chrome 运行它可以正常工作。

IE、Firefox 和 Chrome 使用不同的 Flash 播放器吗？

还有一件事，Flash 会像浏览器一样存储一些缓存吗？如果是这样，我怎样才能找到这个缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:29:00.517

是的，正如您所见[，这里](http://www.adobe.com/support/flashplayer/downloads.html)有 3 种不同的 Flash Player。一个用于 IE，一个用于 FF（以及其他浏览器，如 Chrome、Opera ......），还有一个与 Chrome 捆绑在一起（胡椒粉）。

# database - 为什么 DDL 命令是 AutoCommit？

> ID：14245884
> 
> 赞同：3
> 
> 时间：2013-01-09T20:29:49.010
> 
> 标签：database, oracle

我在很多页面上读到“所有 DDL 命令都是 Oracle 中的 AutoCommit”。没关系 DDL 命令是 autoCommit，但我的问题是：这样做的原因是什么？

意思是，为什么Oracle中的所有DDL命令都是AutoCommit？有这样做的理由吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T20:51:33.510

交易的概念指南章节包括 DDL 作为交易结束的标记之一。[了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e40540/transact.htm#CNCPT117)。

为什么？简短的回答是，因为。

稍长一点的答案是：DDL 写入数据字典。如果 DDL 不发出隐式提交，则数据字典可能会在长时间运行的事务中挂起，这会将其变成一个巨大的瓶颈。请记住，每条 SQL 语句都会查询数据字典。

* * *

> “其他 DBMS 似乎能够毫无问题地处理事务性 DDL”

是的，但是那些其他数据库在多用户环境中是否像 Oracle 那样具有可扩展性？也许他们是，但这就是使这个问题成为一个有争议的问题的原因，也是我投票结束的原因。

事实上，Oracle 是一个受人尊敬的产品：他们在早期就做出了架构决策，这些决策在非常低的级别被嵌入到数据库内核中。有些改变的影响太大，不值得。

如果实现事务性 DDL 可行，Oracle 就不会将所有精力投入到开发[基于版本的重定义](http://docs.oracle.com/cd/E11882_01/appdev.112/e25518/adfns_editions.htm#ADFNS020)上。既然我们已经获得了基于版本的重新定义，那么事务性 DDL 还能为我们带来什么好处？

# java - Java 守护程序线程未获取更新的变量

> ID：14245891
> 
> 赞同：0
> 
> 时间：2013-01-09T20:30:09.200
> 
> 标签：java, caching, jboss

我的 prog 中有一个内存缓存（缓存类），它被实现为单例类，而单例类又使用同步映射。到目前为止，超时设置为 4 小时并且工作正常。在尝试将其更改为 4 分钟时，isTimedOut 的行为很奇怪并且返回错误（即使在访问时间超过 4 分钟之后）。在调试时，我发现它仍然使用 4 小时作为超时。但是，如果我在 isTimedOut 方法中放置一个 sysout（比如 sysout("")），那么该方法将获取新值 => 4 分钟！

任何建议/指针？

```
class Cache implements Runnable{
  public static final long timeout=4*60*1000;//4 mins
  static {

    cache = new Cache();
    Thread myThread= new Thread(cache );
    myThread.setDaemon(true);
    myThread.start();
  }

  private Map map = Collections.synchronizedMap(new HashMap());

  public void add(CacheObj o){
    cache.add(somestr, o);
  }

  public void run(){
    if(cache.isTimedOut(){
      //delete from cache
    }
  }

  class CacheObj{
    Date accessedTime;
    boolean isTimedOut(){
      Date timeOut = new Date(accessedTime.getTime() + Cache.timeout);
      Date now = new Date();
      return (now.getTime() > timeOut.getTime());
    }
  }

  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:37:53.547

如果您在代码中对其进行了更改，则可能是编译或部署问题。

尝试添加 JOptionPane.ShowMessageDialog("v1"); 看看 jboss 是否真的在使用你的新代码。

# visual-studio-2010 - Visual Studio 2010 中的 NVIDIA Visual Profiler、调试和发布模式

> ID：14245892
> 
> 赞同：0
> 
> 时间：2013-01-09T20:30:12.727
> 
> 标签：visual-studio-2010, cuda

我是 Visual Studio 2010 的新手，因为我习惯于使用 Linux 作为操作系统使用 nvcc 编译我的 CUDA 代码。顺便说一句，在这篇文章和 NVIDIA 开发者专区论坛的一些帖子中，我已经阅读了有关在 Visual Studio 中正确编译的警告（调试/发布模式，请参阅[链接](https://stackoverflow.com/questions/933739/what-is-difference-between-release-and-debug-modes-in-visual-studio)了解两者之间的区别）以正确使用 NVIDIA Visual Profiler。在我（较差的）理解中，Visual Studio 会在“调试”模式下自动编译，但对于成功的配置文件，“发布”模式是必要的。

我的（简单）问题是：

1) 如何从“调试”模式切换到“发布”模式？使用 Properties -> Configuration Properties 并选择“Release”而不是“Active(Debug)”就足够了吗？另外，我注意到每次我想重建项目时都必须重复选择。

2) 这足以正确使用 Visual Profiler 吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:37:37.367

1）你在错误的地方从调试切换到发布。您使用的设置仅用于选择要查看或编辑的构建设置。您应该使用`Build | Configuration Manager`或（更容易）工具栏中的`Solution Configurations`下拉框`Standard`。如果您没有看到`Standard`工具栏，请右键单击菜单的工具栏区域，然后在此处选择它。您会发现现在不必为每个构建重新选择设置。

2) CUDA 编译器即使在调试模式下也会积极优化。我不知道您使用哪种配置是否重要。两者都应该工作。您可以尝试看看是否得到任何不同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:20:21.887

有关如何设置配置的信息，请参阅 Roger Dahl 的回答。

有几种形式的分析。

**性能分析**

这绝对应该通过在 CUDA 内核上启用优化来完成。禁用优化和指定调试信息会比 CPU 执行更多的操作，但它会对代码进行其他修改（堆栈溢出检查），这会影响计数器。

**源级分析**

这可以在调试或发布版本上完成。Nsight 3.0 CUDA Profiler 具有源级实验，将显示每个 C 源、PTX 或 SASS 行的统计信息。CUDA 5.0 Visual Profiler 支持代码相关实验，但不会显示每一行的结果（仅显示有问题的行）。禁用优化将导致 SASS 到 PTX 到 C 代码映射的行信息更加准确。对于许多分析案例，这很好。但是，如果您想了解每个 C 行的代码生成，那么您应该启用全面优化并仔细查看 SASS 代码，并且仅使用 C 源代码和 PTX 作为指南。

为了获得 C 源代码级别的相关性，您需要使用生成完整调试信息的默认调试配置或使用启用 -lineinfo 的自定义配置。可以使用以下步骤启用此选项：

1.  打开解决方案资源管理器
2.  右键单击您的 .cu 文件或项目文件
3.  执行`Properties`命令
4.  在左窗格中选择树节点`Configuration Properties | CUDA C/C++ | Device`
5.  在右窗格中更改`Generate Line Number Information`为`Yes`

在 CUDA 5.0 中，-lineinfo 对代码生成有几个小的影响，因此不建议在您的发布配置中保持启用此功能。

# python - 有效地列出给定 Unicode 类别中的所有字符

> ID：14245893
> 
> 赞同：12
> 
> 时间：2013-01-09T20:30:16.083
> 
> 标签：python, unicode, character-properties

通常人们想要列出给定 Unicode 类别中的所有字符。例如：

*   [列出所有 Unicode 空白](https://stackoverflow.com/questions/8921365/in-python-how-to-list-all-characters-matched-by-posix-extended-regex-space)，[如何在 Python 中获取 UTF-8 中的所有空白？](https://stackoverflow.com/questions/14245053/how-can-i-get-all-whitespaces-in-utf-8-in-python)
*   [具有属性的字符`Alphabetic`](https://stackoverflow.com/questions/4843347/list-of-unicode-alphabetic-characters)

可以通过遍历所有 Unicode 代码点并测试所需类别（Python 3）来生成此列表：

```
[c for c in map(chr, range(0x110000)) if unicodedata.category(c) in ('Ll',)] 
```

或使用正则表达式，

```
re.findall(r'\s', ''.join(map(chr, range(0x110000)))) 
```

但是这些方法很慢。有没有一种方法可以查找类别中的字符列表而不必遍历所有字符？

*Perl 的相关问题：[如何获取具有给定属性的所有 Unicode 字符的列表？](https://stackoverflow.com/questions/1182420/how-do-i-get-a-list-of-all-unicode-characters-that-have-a-given-property)*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T20:38:37.837

如果您需要经常这样做，可以很容易地为自己构建一个可重复使用的地图：

```
import sys
import unicodedata
from collections import defaultdict

unicode_category = defaultdict(list)
for c in map(chr, range(sys.maxunicode + 1)):
    unicode_category[unicodedata.category(c)].append(c) 
```

从那里开始使用该映射来转换回给定类别的一系列字符：

```
alphabetic = unicode_category['Ll'] 
```

如果这对于启动时间来说成本太高，请考虑将该结构转储到文件中；从 JSON 文件或其他快速解析到字典的格式加载此映射应该不会太痛苦。

一旦你有了映射，查找一个类别当然是在恒定时间内完成的。

# c# - 代码未在 Windows 服务中执行

> ID：14245897
> 
> 赞同：1
> 
> 时间：2013-01-09T20:30:42.710
> 
> 标签：c#, .net, windows-services

> **可能重复：**
> [如何从windows服务启动一个进程到当前登录的用户会话](https://stackoverflow.com/questions/4278373/how-to-start-a-process-from-windows-service-into-currently-logged-in-users-sess)
> [c#windows服务](https://stackoverflow.com/questions/5595615/c-sharp-windows-service)

我在`OnStart`Windows 服务的方法中有这段代码。

```
System.Diagnostics.Process.Start("notepad.exe"); 
```

我成功地启动了windows服务。但是，一旦服务成功启动，它就不会打开记事本。

这是一个奇怪的问题，因为我是 Windows 服务的新手，所以需要帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:32:24.817

Windows 服务不会在与桌面相同的上下文中执行。

因此，如果您正常启动它，您将不会看到在资源管理器中运行的应用程序。

# java - 何时覆盖可以比较对象为空？

> ID：14245900
> 
> 赞同：-1
> 
> 时间：2013-01-09T20:30:50.117
> 
> 标签：java

当一个对象的覆盖`equals`方法可以`obj`在下面`null`时，如果是这样，是什么情况？

```
@Override
 public boolean equals(Object obj) { 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T20:33:00.833

是的，`equals()`应该处理`null`，在这种情况下，它应该`false`按照以下文件中的说明返回[`Object.equals()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object))：

> 对于任何非空引用值`x`，`x.equals(null)`应该返回`false`。

当然 if `x` **is** `null` `x.equals(null)`不会返回`true`，但它会抛出`NullPointerException`。如果您需要比较两个可能`null`的参考，请查看[`Objects.equals(Object, Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#equals(java.lang.Object,%20java.lang.Object))：

```
Objects.equals(x, x); 
```

以上永远是`true`，即使`x == null`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T20:31:43.463

这是一种公共方法。只要调用者将空值传递给它，它就可以为空。你必须适当地处理这种情况。

# apache - www 目录外的虚拟主机的权限

> ID：14245902
> 
> 赞同：1
> 
> 时间：2013-01-09T20:31:03.687
> 
> 标签：apache, virtualhost, httpd.conf

我无法让虚拟主机在 linux（和 windows！）上的 apache 2.2.22 中工作。我可以让虚拟主机在 www/html 文件夹中工作，但如果网站文件夹在其他地方，我无法让它工作。我在 httpd.conf 文件中使用的权限是：

```
<Directory "/path/to/my/websites">
  Options Indexes FollowSymLinks MultiViews
  AllowOverride all
  Order Deny,Allow
  Allow from all
</Directory> 
```

# http - http 1.0 保持活动服务器和 curl

> ID：14245904
> 
> 赞同：1
> 
> 时间：2013-01-09T20:31:15.107
> 
> 标签：http, curl, keep-alive

我正忙于在嵌入式平台上实现自己的 http 服务器。从技术上讲，服务器符合 HTTP 1.0，因此它希望客户端发送标头“Connection: Keep-Alive”以保持连接打开。

实现看起来像这样。我删除了解析 HTTP 标头并执行请求的代码，以使帖子尽可能短：

 `````
int Service_Request(int conn) {

    struct ReqInfo reqinfo;
    volatile int resource = 0;
    int retval = 0;
    Req_Result req_result = GOT_REQ;

    InitReqInfo(&reqinfo);

    /* while we still have HTTP requests to process */
    while (req_result == GOT_REQ)
    {

        /*  Get HTTP request, there are 3 different return values:
         * GOT_REQ: we got a valid HTTP request
         * TIMEOUT_REQ we timed out waiting for a request
         * ERROR_REQ there was some error receiving from the socket
         * usually because the connection was closed by the peer*/
        req_result = Get_Request(conn, &reqinfo);
        if ( req_result == TIMEOUT_REQ)
        {
            /* timed out waiting for the client, exit */
            retval = 0;
            break;
        }
        else if (req_result == ERROR_REQ)
        {
            /* some error, exit */
            retval = -1;
            break;
        }
        /* Process the request GET, PUT and POST is supported*/
        if (reqinfo.method == GET) 
        {
            /* code to handle GET*/
        } 
        /* PUT and POST are handled in the same way */
        else if ((reqinfo.method == PUT) || (reqinfo.method == POST) )
        {
            /* Code to handle PUT and POST*/        
        } 
        else 
        {
            /* not supported, code should never get here */
            reqinfo.status = 501;
            Return_Error_Msg(conn, &reqinfo);
        }
        /*Diag_Msg("Client Request: \r\n");
        Diag_Msg(reqinfo.clientRequest);*/

        /*
         * the reqinfo.keep_alive flag will be set to 1 if the 
         * "Connection: Keep-Alive" header was sent by the client
         */
        if(reqinfo.keep_alive == 0)
        {
            break;
        }

        reqinfo.keep_alive_max--;
        if(reqinfo.keep_alive_max <= 0 )
        {
            /*
             * the connection has been reused for the maxmum amount of times, stop
             */
            break;
        }
        /*
         * If we get here, we will clear the memory used for the client request
         * and go to the beginning of the while loop to receive another request
         */
        Writeline(conn,"\r\n",2);
        FreeReqInfo(&reqinfo);

    }
    FreeReqInfo(&reqinfo);
    return (retval);
} 
````  `Get_Request 函数如下所示：

 `````
Req_Result Get_Request(int conn, struct ReqInfo * reqinfo) {

    char   buffer[MAX_REQ_LINE] = {0};
    int    rval;
    fd_set fds;
    struct timeval tv;

    /*  Set timeout to 5 seconds if this is the first request since the client connected, wait 5 seconds
     * Otherwise, wait 5ms */
    if(reqinfo->first_request == 1)
    {
        tv.tv_sec  = 5;
        tv.tv_usec = 0;
        reqinfo->first_request = 0;
    }
    else
    {
        tv.tv_sec  = reqinfo->keep_alive_timeout;
        tv.tv_usec = 0;
    }

    /*  Loop through request headers. If we have a simple request,
    then we will loop only once. Otherwise, we will loop until
    we receive a blank line which signifies the end of the headers,
    or until select() times out, whichever is sooner.                */
    do {

    /*  Reset file descriptor set  */

    FD_ZERO(&fds);
    FD_SET (conn, &fds);

    /*  Wait until the timeout to see if input is ready  */

    rval = select(conn + 1, &fds, NULL, NULL, &tv);

    /*  Take appropriate action based on return from select()  */

    if ( rval < 0 ) 
    {
        Diag_Msg("Error calling select() in get_request()");
        return (ERROR_REQ);
    }
    else if ( rval == 0 ) {

        /*  input not ready after timeout  */

        return (TIMEOUT_REQ);

    }
    else {

        /*  We have an input line waiting, so retrieve it  */
        memset(buffer,0,MAX_REQ_LINE - 1);
        if(Readline(conn, buffer, MAX_REQ_LINE - 1) == -1)
        {
            return (ERROR_REQ);
        }
        if(reqinfo->clientRequest == NULL)
        { 
            reqinfo->clientRequest = calloc(MAX_REQ_LINE - 1, sizeof(char));
            strncpy(reqinfo->clientRequest,buffer,MAX_REQ_LINE - 1);
        }
        else
        {
            strncat(reqinfo->clientRequest,buffer,MAX_REQ_LINE - 1);
        }
        Trim(buffer);

        if ( buffer[0] == '\0' )
        break;

        if ( Parse_HTTP_Header(buffer, reqinfo) )
        break;
    }
    } while ( reqinfo->type != SIMPLE );

    return (GOT_REQ);
} 
````  `用英文描述这个服务器的工作原理：服务器接收到第一个请求。它解析标头，如果找到“Connection: Keep-Alive”标头，它会设置一个标志。服务器继续处理这个请求。完成后，它会检查 keep-alive 标志。如果清除，服务器将关闭连接。如果设置，服务器将执行清理操作，然后继续等待同一连接上的另一个请求。等等。

我用 curl 测试了这个：

 `````
C:\curl>curl -v -H "Connection: Keep-Alive" --data-binary @vid1.bin 10.84.67.129/s1p0:1/vid[1-2].bin

[1/2]: 10.84.67.129/s1p0:1/vid1.bin --> <stdout>
--_curl_--10.84.67.129/s1p0:1/vid1.bin
* About to connect() to 10.84.67.129 port 80 (#0)
*   Trying 10.84.67.129...
* connected
* Connected to 10.84.67.129 (10.84.67.129) port 80 (#0)
> POST /s1p0:1/vid1.bin HTTP/1.1
> User-Agent: curl/7.28.1
> Host: 10.84.67.129
> Accept: */*
> Connection: Keep-Alive
> Content-Length: 51200
> Content-Type: application/x-www-form-urlencoded
> Expect: 100-continue
>
* HTTP 1.0, assume close after body
< HTTP/1.0 100 Continue
* HTTP 1.0, assume close after body
< HTTP/1.0 200 OK
< Server: DTSVU v0.1
< Content-Type: text/html
* HTTP/1.0 connection set to keep alive!
< Connection: Keep-Alive
< Keep-Alive: timeout=5, max=10
<
* Connection #0 to host 10.84.67.129 left intact

[2/2]: 10.84.67.129/s1p0:1/vid2.bin --> <stdout>
--_curl_--10.84.67.129/s1p0:1/vid2.bin
* Connection #0 seems to be dead!
* Closing connection #0
* About to connect() to 10.84.67.129 port 80 (#0)
*   Trying 10.84.67.129...
* connected
* Connected to 10.84.67.129 (10.84.67.129) port 80 (#0)
> POST /s1p0:1/vid2.bin HTTP/1.1
> User-Agent: curl/7.28.1
> Host: 10.84.67.129
> Accept: */*
> Connection: Keep-Alive
> Content-Length: 51200
> Content-Type: application/x-www-form-urlencoded
> Expect: 100-continue
>
* HTTP 1.0, assume close after body
< HTTP/1.0 100 Continue
* HTTP 1.0, assume close after body
< HTTP/1.0 200 OK
< Server: DTSVU v0.1
< Content-Type: text/html
* HTTP/1.0 connection set to keep alive!
< Connection: Keep-Alive
< Keep-Alive: timeout=5, max=10
<
* Connection #0 to host 10.84.67.129 left intact
* Closing connection #0 
````  `如您所见，curl 说： Connection #0 似乎已死！在第一个请求完成后。然后它继续关闭连接并打开一个新连接。我确定我正确地实现了 HTTP 1.0 保持活动功能。所以我的问题是：第一个请求完成后 curl 对连接的期望是什么？为什么它决定连接已死？

PS上面的代码改编自[http://www.paulgriffiths.net/program/c/webserv.php](http://www.paulgriffiths.net/program/c/webserv.php)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T12:15:06.253

我解决了。如果服务器回复 HTTP/1.1 和“Content-Length: 0”，curl 会重用连接。我的服务器回复看起来像这样

```
< HTTP/1.1 100 Continue
< HTTP/1.1 200 OK
< Server: DTSVU v0.1
< Content-Type: text/html
< Connection: Keep-Alive
< Keep-Alive: timeout=1, max=95
< Content-Length: 0 
```

在第五次重用连接之后。``````

# scala - 使用 Play 框架的理想 Scala 编译器和库

> ID：14245907
> 
> 赞同：0
> 
> 时间：2013-01-09T20:31:26.217
> 
> 标签：scala, compiler-construction, playframework-2.0

我刚刚下载了 Play Framework 2.1-RC1。

在文件夹中，我注意到 SBT 文件夹本身包含 Scala 的编译器/库，其版本为：

**scala.2.10.0-RC1**。

以前，我曾经用更新的版本编译一些 Scala 程序：

**scala.2.10.0-RC2**

我应该继续使用Play 提供的**scala.2.10.0-RC1**（以避免与 Play 潜在的不兼容）吗？

此外，有没有办法（特定 Play 的命令行？）将 Scala 的 src-jar 自动添加到 Play 的 SBT 文件夹（scala-library-src.jar 等...）？事实上，文件夹结构目前只包含 jars 文件：

*   jansi.jar
*   jline.jar
*   scala-compiler.jar
*   scala-library.jar
*   scala-reflect.jar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:07:58.997

[Scala 2.10.0 final](http://www.scala-lang.org/node/27499)已经发布了大约一周。我希望 Play 工件现在可以使用，如果不是，它们肯定很快就会出现。

# c# - 父用户控件和内部用户控件之间的方法顺序

> ID：14245908
> 
> 赞同：1
> 
> 时间：2013-01-09T20:31:26.280
> 
> 标签：c#, asp.net, inheritance, webforms, page-lifecycle

我正在开发一个项目，该项目有一个`UserControl`名为**Outer**的外部，它执行一些逻辑来确定`UserControl`在其代码中静态加载哪个内部。有几个内部控件，我们称它们为**Inner1**、**Inner2**和**Inner3**。

所有内部控件都继承外部控件，因此：

> `Outer : System.Web.UI.UserControl`
> 
> `Inner1 : Outer`
> 
> `Inner2 : Outer`
> 
> `Inner3 : Outer`

在`Outer.cs`我有一些内部控件访问的字段和方法，例如

```
List<string> foo = null;

protected void Page_Load(object sender, EventArgs e)
{

}

public void DoStuff()
{
    foo = MethodToPopulateFoo(); // this always works and returns a List<string> even if its empty
    // other stuff here
} 
```

现在，这是我的问题：如果我调用我希望它运行的，设置`DoStuff()`为一个列表并变为不再。然后，当任何内部控件运行时，每个控件都可以访问，但不会。`Page_Load``Outer``foo``foo``null``Page_Load``foo``null`

这不会发生。相反，在任何,`Page_Load`或--当我访问它时总是. 然而，当页面在浏览器中加载时，完全执行，然后加载，所以我很困惑为什么当我调用我知道在外部控件（设置）之后运行的内部控件时再次出现。`Inner1``Inner2``Inner3``foo``null``Page_Load``Outer``Page_Load``InnerX``foo``null``Page_Load``foo`

如果我`DoStuff()`要从外部删除呼叫`Page_Load`并进入每个单独的内部`Page_Load`，它工作正常。我想避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:35:39.523

内部控件的 Page_Load 方法在外部控件的 Page_Load 之前被调用。但是您仍然有几个选择：

您可以使用延迟初始化，例如

```
List<string> _foo;
List<string> Foo
{
   get 
   {
      if (_foo == null)
         _foo = new List<string>();
      return _foo;
   }
} 
```

或者您在外部控件中初始化 foo （每个类都应该初始化它自己的对象）并且不是从 Page_Load 访问它，而是从内部控件中的 Page_PreRender 访问它。您还可以在 Page_Init 或 Page_PreLoad 中创建列表。

# android - 静态库 Android

> ID：14245909
> 
> 赞同：0
> 
> 时间：2013-01-09T20:31:28.107
> 
> 标签：android, java-native-interface, shared-libraries, static-libraries

我正在尝试将 libpng 库构建为 Android 上的静态库，但它不起作用！每次我尝试构建它时，它都没有做任何事情。下面是android make文件

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_CFLAGS :=

LOCAL_MODULE := libpng
LOCAL_SRC_FILES :=\
png.c \
pngerror.c \
pngget.c \
pngmem.c \
pngpread.c \
pngread.c \
pngrio.c \
pngrtran.c \
pngrutil.c \
pngset.c \
pngtrans.c \
pngwio.c \
pngwrite.c \
pngwtran.c \
pngwutil.c

LOCAL_LDLIBS := -lz

include $(BUILD_STATIC_LIBRARY) 
```

如果我将最后一行更改为包含 $(BUILD_SHARED_LIBRARY)

它构建正确！有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:53:16.600

在同一目录中创建一个`Application.mk`文件并输入以下行：

```
APP_MODULES := your-android-library-as-defined-in-Android.mk 
```

# c - 如何使用 C 检查闪存设备的坏扇区？

> ID：14245910
> 
> 赞同：2
> 
> 时间：2013-01-09T20:31:27.393
> 
> 标签：c, file-io, filesystems, hardware, sector

我需要创建一个实用程序来检查闪存中的坏扇区。

我从我拥有的旧闪存驱动器开始，将它卡在我的 Ubuntu 笔记本电脑中并检查`dmesg`它是否安装为`/dev/sdb`，然后我跑去`fdisk`查看扇区的数量/大小：

> mike@mike-Qosmio-X770:~$ sudo fdisk -l [sudo] 迈克的密码：
> 
> 磁盘 /dev/sdb：127 MB，127926272 字节 16 个磁头，32 个扇区/磁道，488 个柱面，总共 249856 个扇区
> 单位 = 1 个扇区 * 512 = 512 字节
> 扇区大小（逻辑/物理）：512 字节 / 512 字节
> I/ O 大小（最小/最佳）：512 字节/512 字节
> 磁盘标识符：0x6b3ee723
> 
> ```
> Device Boot      Start         End      Blocks   Id  System 
> /dev/sdb1   *     32         249854     124911+   b  W95 FAT32 
> ```

太好了，我知道一个扇区是 512 字节，总共应该有 249,856 个。基于此，我编写了这个小测试程序来仔细检查：

```
#include <stdio.h>
#include <strings.h>
#include <stdlib.h>

int main (int argc, char *argv[]) {
    FILE * fp = NULL;
    char buffer[512] = {0};  // size of a sector, 512 bytes
    long sector_count = 0;

     fp = fopen("/dev/sdb", "rb");  // open the flash device as binary

    if(fp == NULL) {
        printf("Can't open the flash drive!\n");
        return -1;
    }
    while(!feof(fp) && (fread(buffer, sizeof(buffer), 1, fp) > 0)){
         sector_count++;
    }

    fclose(fp);
    printf("Sectors: %ld\n", sector_count);
    return 0;
} 
```

工作得很好，报告了 249856。现在我一直在思考如何继续。将一系列`0xFF`'s 写入驱动器（512x249856`1`位），然后将其读回以确保将其设置为 1 是否可行？然后写相同数量的`0`s，确保可以清零？

这会验证一切正常吗？有没有机会我可以覆盖 FTL（Flash 翻译层）代码，或者即使我像这样弄乱驱动器也能保护它？

`<background for interested parties>`
这是一个项目，我们有一个具有奇怪行为的 uCLinux 2.4 内核。我们怀疑硬件不好（特别是闪存），但我找不到在 2.4 上工作的好工具来测试闪存 fs，所以我想我会尝试写我自己的。
`</background>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:24:44.147

我猜，由于您的设备已安装，`/dev/sdb1`我们正在处理某种可移动的闪存媒体设备，例如 USB 棒或媒体卡。如果您正在处理连接 SATA 的 SSD，则需要考虑类似的注意事项。

在这些设备中，块接口是对位于闪存顶部的复杂设备控制器的抽象。

闪存设备通常具有非常大的块（称为擦除单元，128kB 的大小并不少见），可以在更慢的擦除发生之前写入一次。设备的控制器在块接口（如主机所见）和物理设备上的擦除单元之间实现逻辑<->物理映射。作为管理过程的一部分，控制器将实施错误检测和纠正，并管理有缺陷的擦除单元。这整个过程在块界面是不可见的。

因此，由于逻辑块永远不会永久映射到物理擦除单元，因此不可能从块接口执行有意义的坏块扫描。

如果您碰巧有一个由该`mtd`层管理的直接连接的闪存阵列，`mtd-tools`那么这就是您想要的，以及相应的内核模块。文档可以在[这里找到](http://www.linux-mtd.infradead.org/faq/general.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:39:04.397

现代硬件通常可以识别数据损坏，即您更有可能遇到 I/O 错误，而不是实际从设备读取错误数据。此外，设备通常包含一些冗余，因此会检测到坏块并用好块替换。对于现代硬盘，[SMART](http://en.wikipedia.org/wiki/S.M.A.R.T.)将提供有关坏块计数的信息。不确定这是否也适用于常见的闪存设备，但我猜是这样。

# ruby-on-rails-3 - ActiveRecord::Base#create - TypeError: can't convert Symbol into Integer

> ID：14245919
> 
> 赞同：2
> 
> 时间：2013-01-09T20:31:59.293
> 
> 标签：ruby-on-rails-3, activerecord

我有

```
class CreateRoles < ActiveRecord::Migration 
  def change
    create_table :roles do |t|
      t.string :name

      t.timestamps
    end
  end
end 
```

和

```
class Role < ActiveRecord::Base
  attr_accessible :name
  has_many :members, :posts
end

class Post < ActiveRecord::Base
  attr_accessible :content, :title, :role_id
  belongs_to :role
end

class Member < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :lockable

  attr_accessible :role_id, :first_name, :last_name, :email, :password, :password_confirmation, :remember_me
end 
```

在 Rails 控制台或 seed.rb 中，我输入

```
Role.create(name: 'guest') 
```

并得到错误

```
TypeError: can't convert Symbol into Integer
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/builder/collection_association.rb:35:in `[]'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/builder/collection_association.rb:35:in `wrap_block_extension'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/builder/collection_association.rb:22:in `build'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/autosave_association.rb:139:in `build'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/builder/has_many.rb:10:in `build'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations/builder/collection_association.rb:13:in `build'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/associations.rb:1195:in `has_many'
    from /Users/ataylo9/Dropbox/Developer/hamsterdam/app/models/role.rb:3:in `<class:Role>'
    from /Users/ataylo9/Dropbox/Developer/hamsterdam/app/models/role.rb:1:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:469:in `load'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:469:in `block in load_file'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:639:in `new_constants_in'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:468:in `load_file'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:353:in `require_or_load'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:502:in `load_missing_constant'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:192:in `block in const_missing'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:190:in `each'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:190:in `const_missing'
    from (irb):1
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require' 
```

我知道我得到了错误，因为 Rails 想要为成员和帖子建立关系，但它不应该只是让那些为零。我什至尝试在 seed.rb 中将数组显式设置为 nil，但得到了同样的错误。

我不明白什么？谢谢！

**更新：添加了帖子和会员模型以供参考**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T08:57:42.440

我用相同的模型创建了相同的项目。而我发现这种描述关系发生了那个错误。

```
class Role < ActiveRecord::Base
  attr_accessible :name
  has_many :members, :posts
end 
```

我试过这个：

```
class Role < ActiveRecord::Base
  attr_accessible :name
  has_many :members
  has_many :posts
end

class Post < ActiveRecord::Base
  attr_accessible :name, :role_id
  belongs_to :role
end

class Member < ActiveRecord::Base
  attr_accessible :name, :role_id
  belongs_to :role
end 
```

一切正常。我不知道为什么，但看起来 has_many :posts, :members 出现了问题。但是你可以用不同的方式写来解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:15:06.223

jizak 的回答帮助我朝着正确的方向前进，为我自己的问题找到解决方案。起初，我试图将多个“项目”添加到单个 has_many，如上例所示：

> has_many :members, :posts

我的 Rails 控制台游戏我同样的错误 - “TypeError：无法将符号转换为整数。” 所以我把它分成两条不同的线：

> has_many :members
> has_many :posts

现在它工作正常。

我想我想有点太聪明了，认为关联（has_many）类似于 attr_accessor/writer/reader - 可以将多个东西添加到单个 attr_x（或者在这种情况下，has_many）。Rails 不是这种情况（据我所知）——每个关联都需要自己的单独声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:15:37.240

看起来您分配了不存在的关系（has_many :members, :posts）。你有这样的模型吗？模型有这样的关系吗？您可以发布成员和帖子模型的代码吗？

# c# - 在 Windows 8 应用商店的“网格”应用程序中的组内添加组

> ID：14245922
> 
> 赞同：0
> 
> 时间：2013-01-09T20:32:04.880
> 
> 标签：c#, windows-8, microsoft-metro

我正在开发一个应用程序，它显示有关 C99 标准库中各种函数头的信息。你可以想象，其中一些标题包含相当多的功能......比我想放在主屏幕上的功能还要多。我认为更好的处理方法是为每个标题创建组（有一个摘要项目，然后是一个包含函数项目的函数组），所以它们在自己的页面上。

但是，我在使用 Microsoft 提供的模板以编程方式执行此操作时遇到了问题。

这是我为“complex.h”组提供的代码，理想情况下，它包含一个摘要项目，然后是一个名为“ComplexConstituents”的组：

```
var complexGroup = new SampleDataGroup("<complex.h>",
                "<complex.h>",
                "complex arithmetic",
                "Assets/LightGray.png",
                "Group Description: ");
        complexGroup.Items.Add(new SampleDataItem("Group-2-Item-1",
                "Summary",
                "summary of <complex.h>",
                "Assets/DarkGray.png",
                "Item Description: summary of <complex.h>",
                ITEM_CONTENT,
                complexGroup));
        this.AllGroups.Add(complexGroup);
        var complexConstituents = new SampleDataGroup("<complex.h> functions",
                "<complex.h> functions",
                "functions included in the <complex.h> header",
                "Assets/MediumGray.png",
                "Group description: blah");
        this.ComplexConstituents.Add(complexConstituents); 
```

您可能已经注意到我在这里添加了第二种类型的组来补充“AllGroups”。它是“ComplexConstituents”，应该是内部包含 . 这是它的构造函数，与“AllGroups”的构造函数进行比较：

```
 private ObservableCollection<SampleDataGroup> _allGroups = new ObservableCollection<SampleDataGroup>();
    public ObservableCollection<SampleDataGroup> AllGroups
    {
        get { return this._allGroups; }
    }
    private ObservableCollection<SampleDataGroup> _complexConstituents = new ObservableCollection<SampleDataGroup>();
    public ObservableCollection<SampleDataGroup> ComplexConstituents
    {
        get { return this._complexConstituents; }
    } 
```

我认为这已经足够了，但无论出于何种原因，它都不是。我在这篇文章的末尾得到了错误（如图）。我需要做什么来解决这个问题？

![](../Images/bbe91e534f0497833976edd6e03330bc.png)

编辑：

这是一些人要求的 GetItem 方法：

```
public static SampleDataItem GetItem(string uniqueId)
    {
        // Simple linear search is acceptable for small data sets
        var matches = _sampleDataSource.AllGroups.SelectMany(group => group.Items).Where((item) => item.UniqueId.Equals(uniqueId));
        if (matches.Count() == 1) return matches.First();
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:12:55.860

在您的 GetItem 方法中，您必须进行更改，因为您使用**ComplexConstituents**作为数据源。

像这样编辑：

```
var matches = _sampleDataSource.ComplexConstituents.SelectMany(group => group.Items).Where((item) => item.UniqueId.Equals(uniqueId));

 var matches2 = _sampleDataSource.AllGroups.SelectMany(group => group.Items).Where((item) => item.UniqueId.Equals(uniqueId));

        if (matches.Count() == 1) 
            return matches.First();
        else if(matches2.Count() == 1)
            return matches2.First();
        else
           return null; 
```

# ruby-on-rails - 使用常量（在模型中）

> ID：14245923
> 
> 赞同：0
> 
> 时间：2013-01-09T20:32:07.313
> 
> 标签：ruby-on-rails, ruby, constants, rails-models

我目前正在开发一个将成绩存储在用户表中的应用程序，如下所示（json 编码）：

```
{"6":"6th Grade","7":"7th Grade","8":"8th Grade"} 
```

在用户模型中为每个年级跨度加上一个常量设置，将它们全部组合起来：

```
ELEMENTARY = %w(Kindergarten 1st\ Grade 2nd\ Grade 3rd\ Grade 4th\ Grade 5th\ Grade)
MIDDLE_SCHOOL = %w(6th\ Grade 7th\ Grade 8th\ Grade)
HIGH_SCHOOL = %w(9th\ Grade 10th\ Grade 11th\ Grade 12th\ Grade)
GRADES = ELEMENTARY + MIDDLE_SCHOOL + HIGH_SCHOOL 
```

我试图找出一个优雅的解决方案来解析存储在用户表中的 JSON 数据以吐出用户所属的等级跨度。因此，如果用户有以下情况：

```
{"0":"Kindergarten","1":"1st Grade","2":"2nd Grade","3":"3rd Grade","4":"4th Grade","5":"5th Grade", "6":"6th Grade", "9":"9th Grade"} 
```

然后用户处于“一般”等级跨度。

如果用户在任何常数中选择了任何等级，则他们处于该常数等级范围内。例如：

```
{"0":"Kindergarten"} 
```

会把他们放在小学。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T22:49:58.657

当这种情况出现时，我更愿意重新考虑设计，而不是仅仅尝试做一种“解决方法”。**正如cmpolis 所**展示的解决方案所说明的那样，这种逻辑并不是那么简单。那么，为什么不创建一个新类来处理它呢？这将使维护变得更容易，也更容易阅读（和测试——如果你编写测试的话）。

考虑到这一点，我刚刚重构了**cmpolis**发布的解决方案，我想出了类似的东西：

```
class CheckGradeSpan
  def initialize(grades)
    @grades = JSON.parse(grades)
  end

  def is_elementary?
    (@grades.keys & ["0", "1", "2", "3", "4", "5"]).length > 0
  end

  def is_middle_school?
    (@grades.keys & ["6", "7", "8"]).length > 0
  end

  def is_high_school?
    (@grades.keys & ["9", "10", "11", "12"]).length > 0
  end
end 
```

这样你就有了一个很好的 API 来检查用户的成绩跨度：

```
grade_check = CheckGradeSpan.new('{"0":"Kindergarten","1":"1st Grade","2":"2nd Grade","3":"3rd Grade"}')
grade_check.is_elementary? 
```

我想你可以明白的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T22:03:11.830

如果你想要*优雅*，这里是一个不错的解决方案：

```
data = JSON.parse({"0":"Kindergarten","1":"1st Grade","2":"2nd Grade","3":"3rd Grade"})
gradeSpans = []
gradeSpans << 'Elementary' if (data.keys & ["0", "1", "2", "3", "4", "5"]).length > 0
gradeSpans << 'Middle' if (data.keys & ["6", "7", "8"]).length > 0
gradeSpans << 'High' if (data.keys & ["9", "10", "11", "12"]).length > 0
gradeSpans = 'General' if gradeSpans.length == 3 
```

# ios - 用完 2 型蹦床

> ID：14245933
> 
> 赞同：4
> 
> 时间：2013-01-09T20:32:43.340
> 
> 标签：ios, mono, unity3d, aot

我们使用 Unity 3D for iOS 开发我们的游戏。最近我将我的代码分支与另一个分支合并并使用 Unity 编辑器运行它。它运作良好。但是，当我在 iPad 上运行应用程序时，它会崩溃并显示消息“在 '/private/var/mobile/Applications//.app/Data/Managed/mscorlib.dll' (128) 中用完类型 2 的蹦床”。我发现当接口被大量使用时会发生这样的异常（[Ran out of trampolines of type 2](http://docs.xamarin.com/ios/troubleshooting#Ran_out_of_trampolines_of_type_2)）。确实，我们的项目包含太多接口，每个接口都有很多方法。还找到了解决方案 - 通过键入 -aot "nimt-trampolines=512" 之类的选项来增加蹦床的数量。谁能解释一下“512”数字如何取决于接口的数量（可能是方法的数量等）？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:18:08.380

无法计算数量，它们取决于您在应用程序中实际使用的接口。

这是更详细的解释： http: [//monotouch.2284126.n4.nabble.com/Understanding-the-impact-of-trampolines-td4495086.html](http://monotouch.2284126.n4.nabble.com/Understanding-the-impact-of-trampolines-td4495086.html)

# python - 用python输出特殊字母字符串的列表

> ID：14245935
> 
> 赞同：0
> 
> 时间：2013-01-09T20:32:52.883
> 
> 标签：python, list, io, special-characters

我有 2 个字符串列表，它们是从数据库内容构造的，但我很难将其读入 txt 文件

```
list_a={u'XYZ-123-456',u'XYZ-123-456',u'XYZ-789-456',....}

list_b={u'Tom \n is creative', u'Sky is blue',....} 
```

我需要做的是去掉两个列表中每个字符串开头的 'u'，在适用的情况下去掉 list_b 中每个字符串中的 \n 。

然后将list_b中的每个元素写入一个文本文件，逐行写入txt文件，其标题为list_a中的元素。具有相同标题的字符串应该在同一个 txt 文件中。任何人都可以帮忙吗？

我想我可以使用 pop 函数来摆脱 u，但是字符串中的 '\n' 呢？我也不是 100% 确定 I/O 功能。任何人都可以帮助我解决示例脚本吗？

非常感谢，python的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:46:09.897

欢迎如此。

`list_a`实际上是一个`set`。`{}`指示，它是唯一项目的`set`列表 - 因此，如果您希望“列表”中有多个值，您可能不需要这种类型。如果你想要一个实际的列表，那么用`[...]`而不是封装“列表”`{...}`

集合中的 'u' 表示文本是 unicode。如果你想删除这个：

```
list_a = map(str, list_a) 
```

`\n`是指示换行的控制字符。在控制台中打印时，这将表示为一个新行。如果您真的不想要新行，请执行以下操作：

```
list_b= { item.replace('\n','') for item in list_b } 
```

我假设您希望每个项目在文本文件中的新行上。如果是这样的话：

```
with open('c:\file.txt', 'w') as file:
    file.write('\n'.join(list_a)) 
    file.write('\n'.join(list_b)) 
```

对于非重复项，将 2 个列表合并为一组。由于它们目前已经设置，这将起作用：

```
with open('c:\file.txt', 'w') as file:
    file.write('\n'.join(list_a + list_b)) 
```

# javascript - 使用 javascript 的浏览器检测在刷新时失败

> ID：14245940
> 
> 赞同：1
> 
> 时间：2013-01-09T20:33:01.847
> 
> 标签：javascript, browser-detection

我正在尝试检测不支持**position:fixed**的设备。编辑：我已经修复了代码，因此它正在检测功能而不是浏览器/操作系统检测。

我想当我第一次输入这个时我把人们弄糊涂了。当我刷新页面时，我的问题开始发挥作用。高度计算不正确，我知道这是一个完全不同的问题，但我仍在寻求帮助。

更新了以下检测脚本：

```
 function fixed() {
        var container = document.body;

        if (document.createElement && container && container.appendChild && container.removeChild) {
            var el = document.createElement('div');

            if (!el.getBoundingClientRect) return null;

            el.innerHTML = 'x';
            el.style.cssText = 'position:fixed;top:100px;';
            container.appendChild(el);

            var originalHeight = container.style.height,
                originalScrollTop = container.scrollTop;

            container.style.height = '3000px';
            container.scrollTop = 500;

            var elementTop = el.getBoundingClientRect().top;
            container.style.height = originalHeight;

            var isSupported = (elementTop === 100);
            container.removeChild(el);
            container.scrollTop = originalScrollTop;

            return isSupported;
        }

        return null;
    }

    //TEST FOR MOBILE, SET TOP IMAGE TO RELATIVE
    if(fixed()) {
        image_height = jQuery("#outer_homepage_image").height() - 45;
        jQuery("#content").css("top",image_height);

        jQuery(window).resize(function() {
            image_height = jQuery("#outer_homepage_image").height() - 45;
            alert(image_height);
            jQuery("#content").css("top",image_height);
        });
    } else {
        jQuery("#outer_homepage_image").css("position","relative");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:40:13.100

这是一件*非常*脆弱和考虑不周的事情。

```
if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) { 
```

例如，iOS 完全支持 position:fixed 自 iOS 4 以来。我们现在是 6。对于 Android 和 Blackberry，我不确定，但会在“支持”方面犯错。

您需要测试**features**，而不是 user agent。正如我所说，您可能拥有一台不支持它的 iOS 设备和另一台支持它的 iOS 设备。事实上，现在大多数人都这样做了。

这是一个有用的链接，可引导您做出道德、虔诚的选择： http: [//kangax.github.com/cft/#IS_POSITION_FIXED_SUPPORTED](http://kangax.github.com/cft/#IS_POSITION_FIXED_SUPPORTED)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:46:46.797

感谢所有支持的家伙。我用 jQuery(window).load(function() {

它现在可以工作了，因为其他所有东西都已加载，所以我可以计算出正确的高度。

# iphone - 抛出 UISegmented 控件异常

> ID：14245942
> 
> 赞同：0
> 
> 时间：2013-01-09T20:33:04.880
> 
> 标签：iphone, ios, objective-c, cocoa-touch, methods

单击下面的按钮操作时，出现异常：

**-[UIRoundedRectButton selectedSegmentIndex]：发送到实例 0x8178b90 的无法识别的选择器**；
'

（它也被初始化为 - (IBAction)genderBtn:(id)sender; 在头文件中）。

我不知道我是否应该以某种方式将其初始化为另一种方法或不进行全局初始化。任何方法的想法将不胜感激。

```
- (IBAction)submitButton:(id)sender {

  double BAC=0;

  //  NSString *weight=weightTextField.text;

  //Other variables etc.

UISegmentedControl *gender = (UISegmentedControl *)sender;

   UIButton *gender = (UIButton *)sender;

if (gender.selected == 0 ) {

} else if (gender.selected = 1){

}

UIAlertView *alertMessage = [[UIAlertView alloc] initWithTitle:@"Your Results:"
                                          message:[NSString stringWithFormat:@" Your Percentage is: "]
                                         delegate:self
                                cancelButtonTitle:@"OK"
                                otherButtonTitles:nil];

[alertMessage show];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:49:18.903

错误是说尽管您认为 sender 值是 UISegmentedControl，但事实并非如此。这是一个 UIRoundedRectButton。结果是您最终将仅 UISegmentedControl 实现的消息发送到 UIRoundedRectButton，因此它无法识别选择器。确保此操作连接到正确类型的按钮。

* * *

编辑：好的。我以前看过你的代码。*我认为问题在于您使用了普通的 UIButton 而不是 UISegmentedControl，但问题似乎真的是您根本*不应该使用 sender 参数。

我认为您有一个 UISegmentedControl 供用户选择某些内容，还有一个 UIButton 供他们在完成选择后点击。问题是您在询问发件人参数（即提交按钮） UISegmentedControl 的选择状态是什么。您需要将 UISegmentedControl 存储在一个属性中，并在您的提交方法中使用它来获取 selectedSegmentIndex。

```
- (IBAction)submitButton:(id)sender {

    double BAC=0;

    //NSString *weight=weightTextField.text;

    //Other variables etc.

    UISegmentedControl *gender = self.segmentedControl;

    if (gender.selectedSegmentIndex == 0 ) {
        //something
    } else if (gender.selectedSegmentIndex == 1){
        //something
    }

    UIAlertView *alertMessage = [[UIAlertView alloc] initWithTitle:@"Your Results:"
                                          message:[NSString stringWithFormat:@" Your Percentage is: "]
                                         delegate:self
                                cancelButtonTitle:@"OK"
                                otherButtonTitles:nil];

    [alertMessage show];
} 
```

提交按钮在按下时调用它，并从您存储在属性中的分段控件中获取选定的索引。

```
@property (weak, nonatomic) IBOutlet UISegmentedControl* segmentedControl; //goes in @interface

@synthesize segmentedControl = _segmentedControl; //goes in @implementation 
```

将此 IBOutlet 连接到您的分段控件并使用它。

# docpad - 如何在 DocPad 的特定文档或布局中添加脚本或样式表？

> ID：14245948
> 
> 赞同：1
> 
> 时间：2013-01-09T20:33:34.630
> 
> 标签：docpad

如何在 DocPad 的特定文档或布局中添加样式表或脚本？

如果我使用类似的东西：

```
<%- @getBlock('scripts').add(["/local.js"]).toHTML() %> 
```

该脚本将添加到呈现内容或布局的位置。

但是是否可以添加在默认布局上声明的其他脚本最后添加的脚本？或者在`<head>`样式表或`<meta>`?

在 WordPress 中，您将使用`wp_head`et `wp_footer`hooks 来做到这一点。是否有某种等效机制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T15:40:21.683

以下是你所追求的吗？

```
<%- @getBlock('scripts').add(@site.scripts or []).add(@document.scripts or []).add(['/whatever/else.js']).toHTML() %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:12:17.113

我在以下位置定义了一个辅助函数`docpad.coffee`：

```
dpBlock: (type) ->
  blocks = []
  blocks = blocks.concat @site[type] if @site[type] and Array.isArray @site[type]
  blocks = blocks.concat @document[type] if @document[type] and Array.isArray @document[type]
  @getBlock(type).add(blocks).toHTML() if blocks.length > 0 
```

然后我只需要在`@site`和/或`@document`级别定义一个脚本、样式和元数据数组，并在默认布局中使用辅助函数。

# python - 使用列表和正常值

> ID：14245949
> 
> 赞同：0
> 
> 时间：2013-01-09T20:33:50.353
> 
> 标签：python, sql, arrays, sqlite

所以，我正在尝试做一个 SQLite 准备好的语句，如下所示：

定义

```
c.execute('''CREATE TABLE IF NOT EXISTS tab (
    _id integer PRIMARY KEY AUTOINCREMENT,
    obj text NOT NULL,
    val int NOT NULL
    ) ;''') 
```

我想执行以下准备好的语句：

```
list_of_vars=['foo','bar']
statement = "SELECT * FROM tab WHERE obj IN ({0}) AND val BETWEEN ? AND ?".format(', '.join(['?' * len(list_of_vars)])) 
```

目前我对此的解决方案非常难看，我正在寻找一种更优雅的方式来做到这一点......

```
vals=list_of_vars
vals.append(0)
vals.append(100)
c.execute(statement, vals) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:35:55.477

您可以很容易地连接列表：

```
c.execute(statement, list_of_vars + [0, 100]) 
```

# python - Python 3 FancyURLopener cookie 处理

> ID：14245988
> 
> 赞同：1
> 
> 时间：2013-01-09T20:35:58.183
> 
> 标签：python, cookies, python-3.x, urllib

我试图从中检索文件的网站需要 cookie，但我似乎无法弄清楚如何在使用 FancyURLopener 时添加 cookie 处理。

这是我的一段代码：

```
user_agents = [
    'Mozilla/5.0 (Windows; U; Windows NT 5.1; it; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.11',
    'Opera/9.25 (Windows NT 5.1; U; en)',
]
site_file = "somesite.com/pic.jpeg"
class MyOpener(FancyURLopener, object):
    version = choice(user_agents)
myopener = MyOpener()
myopener.retrieve(site_file, "pic.jpeg") 
```

我也尝试过使用类似的东西，但不确定如何使用这种方法实际检索文件。

```
cj = http.cookiejar.CookieJar()
request = urllib.request.Request(site)
opener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor(cj))
request.add_header('User-agent', 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0') 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:43:06.597

您可以使用以下方法检索文件：

```
import shutil
from contextlib import closing

with closing(opener.open(request)) as src, open(filename, "wb") as dest:
    shutil.copyfileobj(src, dest) 
```

# python - Python请求非阻塞？

> ID：14245989
> 
> 赞同：14
> 
> 时间：2013-01-09T20:36:06.173
> 
> 标签：python, python-requests

> **可能重复：**
> [带有 Python 请求的异步请求](https://stackoverflow.com/questions/9110593/asynchronous-requests-with-python-requests)

python模块[请求](http://docs.python-requests.org/en/latest/)是非阻塞的吗？我在文档中没有看到任何关于阻塞或非阻塞的内容。

如果它被阻塞，你会建议哪个模块？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-09T20:39:16.440

像`urllib2`,`requests`正在阻塞。

但我也不建议使用另一个库。

最简单的答案是在单独的线程中运行每个请求。除非你有数百个，否则应该没问题。（多少数百取决于您的平台。在 Windows 上，限制可能是线程堆栈有多少内存；在大多数其他平台上，截止时间更早。）

如果*确实*有数百个，则可以将它们放入线程池中。页面中的[`ThreadPoolExecutor`示例](http://docs.python.org/3/library/concurrent.futures.html#threadpoolexecutor-example)`concurrent.futures`几乎正是您所需要的；只需将`urllib`呼叫更改为`requests`呼叫。（如果你在 2.x 上，请使用[`futures`](http://pypi.python.org/pypi/futures)PyPI 上相同包的反向移植。）缺点是你实际上并没有一次启动所有 1000 个请求，只是第一个，比如 8 个。

如果你有数百个，并且它们都需要并行，这听起来像是[`gevent`](http://pypi.python.org/pypi/gevent). 让它对所有内容进行monkeypatch，然后编写与线程完全相同的代码，但`greenlet`生成s而不是`Thread`s。

[`grequests`](https://github.com/kennethreitz/grequests)，它直接从旧的异步支持演变而来`requests`，有效地为您执行`gevent`+`requests`包装。对于最简单的情况，它很棒。`gevent`但是对于任何重要的事情，我发现阅读显式代码更容易。你的旅费可能会改变。

当然，如果您需要做一些*真正*花哨的事情，您可能想去`twisted`, `tornado`, 或`tulip`（或等待几个月`tulip`成为标准库的一部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T20:48:51.927

它是阻塞的，但这让我想起了我认识的一个整洁的小包装器，我知道它放在 gevent 周围，它回退到 eventlet，然后如果这两个都不存在，则线程。您可以将函数添加到类似于 dicts 或列表的数据结构中，并且一旦添加了函数，它们就会在后台执行，并且一旦它们完成执行，函数返回的值就可以代替函数使用. 它在[这里](https://github.com/lateefj/codap)。

# windows-server-2008 - 在 Windows Server 2008 上将 Trac 作为 Windows 服务安装

> ID：14245993
> 
> 赞同：1
> 
> 时间：2013-01-09T20:36:29.613
> 
> 标签：windows-server-2008, trac

正如标题所示，我正在尝试在 Windows Server 2008 上将 Trac 作为 Windows 服务安装。我查看了将[Trac 作为 Windows 服务安装](http://trac.edgewall.org/wiki/TracStandalone#InstallingasaWindowsService)的说明。在那里给出的不同选项中，我更`Option 1`喜欢使用一些 Windows 实用程序而不是安装其他软件的类似方法，但对于 Windows Server 2008 的说明似乎有点过时，`instsrv.exe`并且`srvany.exe`不适用于 Server 2008。有一个建议使用`winserv.exe`但我在任何地方都找不到它，建议的谷歌搜索也没有提供任何可靠的结果。

有没有办法使用`sc`Windows 实用程序将 Trac 安装为服务？有没有人试过这个？

> 更新：我尝试使用`sc`，但这不起作用。`sc`仅与作为 Windows 服务应用程序开发的程序交互，因此它们具有与`sc`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T19:37:09.753

我可以使用*winserv.exe*解决这个问题，可以从本教程页面下载：[http ://wiki.go-redrock.com/wiki/TechAsService](http://wiki.go-redrock.com/wiki/TechAsService)

一旦你得到二进制文件运行：

```
"C:\path\to\winserv.exe" install tracd -displayname "tracd" -start auto "C:\path\to\python.exe" c:\path\to\python\scripts\tracd-script.py <your tracd parameters>

net start tracd 
```

希望你能像我一样解决你的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T21:23:27.027

如果你只是想在 Windows 服务器上轻松安装 Trac，我可以向你推荐[Bitnami Trac Stack](http://bitnami.com/stack/trac)。它有两种服务，一种用于将 Trac 作为 python 模块运行的 Apache Web 服务器，另一种用于 SVN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:21:50.380

您是否仅限于使用`tracd`托管您的 Trac 安装？如果您使用真正的 Web 服务器，这通常会更容易一些。IIS 和 Apache 等 Web 服务器通常将自身安装为服务。如果您设置的不是`tracd`为您的 Trac 站点提供服务，它很可能默认作为服务运行。一般来说，使用像 Apache 这样功能齐全的 Web 服务器而不是简约的`tracd`.

# javascript - Web 存储可用性的奇怪行为检查

> ID：14245995
> 
> 赞同：0
> 
> 时间：2013-01-09T20:36:46.143
> 
> 标签：javascript, jquery

这是我的代码：

```
if(typeof(Storage)!==undefined) {
    // Web storage support
    if(localStorage.hashes != "") {
        var hashes = jQuery.parseJSON(localStorage.hashes);
        for (var i = 0; i < hashes.length; i++) {
            // Do stuff here
        }
    }
    else {
        var hashes = [];
    }
}
else {
    // No web storage support
} 
```

我真的不知道发生了什么，但是当我第一次尝试从设备加载带有此代码的页面时，我的其余代码无法正常工作。但是，如果我将其注释掉，那么第一次访问该页面一切正常。然后我可以取消注释，重新加载页面，一切都会继续工作。这真的是我能描述的最好的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:18:56.117

我相信您可以在发布之前进行更多调试。

您是否尝试过记录/添加检查（以查看此问题的确切来源以及错误是什么）？

但是既然我们在这里，这里是我对 localStorage 的提示：

*   使用modernizr (http://modernizr.com/)

> ```
> if(Modernizr.localstorage){ /* Your code */} 
> ```

*   制作一些通用的 get 和 set 函数

> ```
> function get(key) {
> 
>    if(Modernizr.localstorage) { 
>       if(localStorage[key] != null) {
>         return localStorage[key];
>       }
>    }
>    return null;
> }
> 
> function set(key, value) {
> 
>    if(Modernizr.localstorage) { 
>       localStorage[key] = value;
>    }
>    return null;
> } 
> ```

这很粗糙，您可以调整它以使其更安全并满足您的需求

*   将 try/catch 放在 get 和 set 函数中，您不希望写操作影响您的程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:20:33.070

我想到了！所以在上面的代码中，我检查他们是否有可用的 localStorage，如果有，我只是假设他们在那里存储了一些哈希值。这显然会在他们第一次访问时产生问题，因为他们还没有保存任何哈希值。所以我必须检查它们是否有，如果有，则执行 for 循环，否则只需将其设置为空数组。像这样！

```
if(typeof(Storage) !== "undefined") {
    // Web storage support
    if(localStorage.hashes != "") {
        hashes = JSON.parse(localStorage.getItem("hashes"));
        if(hashes) {
            for (var i = 0; i < hashes.length; i++) {
                // Do Stuff
            }
        } else {
            hashes = [];
        }
    }
    else {
        hashes = [];
    }
}
else {
    // No web storage support
    hashes = [];
} 
```

感谢 jbabey 提供一些关于清理我的代码的提示！