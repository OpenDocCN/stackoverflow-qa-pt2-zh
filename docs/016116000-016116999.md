# StackOverflow 问答 16116000-16116999

# php - 仅当浏览器完成从服务器加载数据时，如何预加载文档并将其呈现在屏幕上

> ID：16116001
> 
> 赞同：0
> 
> 时间：2013-04-20T02:47:02.453
> 
> 标签：php, javascript, jquery, codeigniter

有没有办法在所有文档、DOM、图像、AJAX 调用、对象和其他内容完成加载的同时在屏幕上呈现所有内容？

这不是在浏览器从服务器获取信息时显示它们“部分”。

任何解决方案都会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:20:04.923

使用@timss 的答案试试这个：

将身体设置为可见性：隐藏

```
jQuery(window).load(function () {

            $("body").css({"visibility":"visible"});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T03:29:16.103

[在优先加载网页中的内容中](https://stackoverflow.com/questions/4449893/prioritize-the-content-in-a-webpage-to-be-loaded)找到此来源他声称它会在显示之前预加载整个页面。

```
<script language="javascript" type="text/javascript">
/* Visit http://www.yaldex.com/ for full source code
and get more free JavaScript, CSS and DHTML scripts! */
<!-- Begin
function loadImages() {
if (document.getElementById) {  // DOM3 = IE5, NS6
document.getElementById('hidepage').style.visibility = 'hidden';
}
}
window.onload = loadImages;
//  End -->
</script>
<div id="hidepage" style=" background-color: #FFFFCC; layer-background-color: #FFFFCC;     width: 100%;">
<table width=100%><tr><td>Page loading ... Please wait.</td></tr></table></div> 
```

我的解决方案：

这是一个关于如何做的粗略草案，但如果你最终确定它会起作用。优先考虑加载所有内容的顺序。使用 onload jsHide 函数。

```
<DIV ID="idElement2"><IMG SRC="Airplane.gif">         onLoad="javascript:jsHide('idElement2');return true"></DIV>

<DIV ID="idElement5"><IMG SRC="stuff.gif"      onLoad="javascript:jsShow('idElement5');jsShow('idElement3');jsShow('idElement4');return true"></DIV> 
```

将 idelement5 设置为最后加载，加载后它将显示所有其他元素 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T02:50:25.783

将所有内容设置为`display:none;`直到`success()`触发 jQuery AJAX 方法，然后可以将`display`属性设置回正常。

此外，请确保 AJAX 代码位于`window.onload`or`$(window).on('load')`处理程序中。

这样做的缺点是，如果 Ajax 调用不成功，您的页面将不会显示，因此您还应该`error()`在 jQuery 中定义一个 Ajax 方法。

**编辑：**

用于在完成加载时显示图像（放置在 onload 之外）：

```
$('img').each(function()
{
    $(this).css('display','none');
    $(this).on('load',function(){$(this).css('display','');});
}); 
```

此外，您将希望显示某种类型的加载符号以改善​​用户体验。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T02:59:09.293

[您可以尝试使用此插件中](http://www.gayadesign.com/diy/queryloader-preload-your-website-in-style/)的叠加层隐藏页面

快捷方便。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T02:49:52.920

```
window.onload = function () { 
    alert("Page loaded!") 
} 
```

# javascript - 如何使用 Backbone.js 获得 Tweet Timeline？

> ID：16116003
> 
> 赞同：0
> 
> 时间：2013-04-20T02:48:28.507
> 
> 标签：javascript, backbone.js, oauth, twitter-oauth

我是 Backbone.js 的初学者。我已经完成了一些教程。

*   [http://backbonejs.org/docs/todos.html](http://backbonejs.org/docs/todos.html)
*   [http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/)

我想自己创建一个非教程应用程序，并尝试使用 Backbone Collection 或模型创建显示推文时间线的简单应用程序。

这是我的代码。（oauth.js 和 sha1.js 包含在 HTML 中）

```
$(function(){

var Tweet = Backbone.Model.extend({
});

var Twitter = Backbone.Collection.extend({
    model: Tweet,
    initialize: function(api){
        this.consumerKey = //consumerKey;
        this.consumerSecret = //consumerSecret;
        this.accessToken = //accessToken;
        this.accessTokenSecret = //accessTokenSecret;

        this.message = {
            method: "GET",
            action: api,
            parameters: {
                oauth_version: "1.0",
                oauth_signature_method: "HMAC-SHA1",
                oauth_consumer_key: this.consumerKey,
                oauth_token: this.accessToken
            }
        };
    },

    getTimeline: function(){
        var accessor = {
            consumerSecret: this.consumerSecret,
            tokenSecret: this.accessTokenSecret
        };

        OAuth.setTimestampAndNonce(this.message);
        OAuth.SignatureMethod.sign(this.message, accessor);
        this.url =  OAuth.addToURL(this.message.action, this.message.parameters);
        var options = {
            success: function(data, res){
                console.log(data);
                console.log(res);
            }
        };
        this.fetch(options);
    },

    sync: function(method, model, options){
        options.timeout = 10000;
        options.dataType = 'jsonp';
        return Backbone.sync(method, model, options);
    }

});

var twitter = new Twitter("https://api.twitter.com/1.1/statuses/home_timeline.json");
twitter.getTimeline();
}); 
```

当我刷新 HTML 页面但在 Chrome 开发者工具的控制台中显示 401 授权按摩时。我可以在没有 Backbone.js 的情况下获得时间线。

请教我应该如何解决它。

谢谢你的好意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:30:53.200

如果你可以在没有 Backbone.js 的情况下让它工作，你可以在没有 Backbone 的情况下使用 fetch 方法。无论如何，同步方法只有在你做 REST 时才有用，比如获取、更新、创建和删除方法。

在你的情况下，只有一个 fetch 对吗？因此，覆盖您的 fetch 函数并在插入主干之前执行您所做的任何事情。听听您自己的成功，然后执行 Collection.reset。

```
var collection = Backbone.Collection.extend({
   _onLoaded : function(data) {
       this.reset(data, {parse:true});
   },
   fetch : function() {
       $.get("").success(_.bind(this._onLoaded, this));
   }
}); 
```

# java - 客户端向服务器发送对象时 Java 抛出错误，IDE 中没有错误/警告

> ID：16116008
> 
> 赞同：1
> 
> 时间：2013-04-20T02:49:09.397
> 
> 标签：java, sockets, serialization

有人请帮忙，我有一个客户端和一个服务器，我在这段代码中从客户端发送一个对象，上面写着发送数据包：

```
 class Data implements Serializable {
        /**
         * 
         */
        // private static final long serialVersionUID = 1L;

        String a = "ok baby";
        String b = "hi there";
    }

    public void Connect(String[] args) throws IOException {

        Socket kkSocket = null;
        PrintWriter out = null;
        ObjectOutputStream oos = null;
        BufferedReader in = null;

        try {
            kkSocket = new Socket("192.168.0.5", 1337);
            out = new PrintWriter(kkSocket.getOutputStream(), true);
            oos = new ObjectOutputStream(kkSocket.getOutputStream());
            in = new BufferedReader(new InputStreamReader(
                    kkSocket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about hostname, network problem.");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't connect to server.");
            System.exit(1);
        }

        BufferedReader stdIn = new BufferedReader(new InputStreamReader(
                System.in));
        String fromServer;
        String fromUser;

        // SEND PACKET OF DATA
        oos.writeObject(new Data());
        oos.flush();
        // SEND PACKET OF DATA 
```

此代码根本不传输，并且在尝试发送时弹出此错误，有人介意在这里帮助我吗？

```
java.io.NotSerializableException: java.lang.Thread
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeArray(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.access$300(Unknown Source)
    at java.io.ObjectOutputStream$PutFieldImpl.writeFields(Unknown Source)
    at java.io.ObjectOutputStream.writeFields(Unknown Source)
    at java.awt.Container.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeArray(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.access$300(Unknown Source)
    at java.io.ObjectOutputStream$PutFieldImpl.writeFields(Unknown Source)
    at java.io.ObjectOutputStream.writeFields(Unknown Source)
    at java.awt.Container.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeArray(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.access$300(Unknown Source)
    at java.io.ObjectOutputStream$PutFieldImpl.writeFields(Unknown Source)
    at java.io.ObjectOutputStream.writeFields(Unknown Source)
    at java.awt.Container.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeArray(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.access$300(Unknown Source)
    at java.io.ObjectOutputStream$PutFieldImpl.writeFields(Unknown Source)
    at java.io.ObjectOutputStream.writeFields(Unknown Source)
    at java.awt.Container.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at citadelRPG.Main.Connect(Main.java:124)
    at citadelRPG.Main.<init>(Main.java:158)
    at citadelRPG.Main$2.run(Main.java:269)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at citadelRPG.Main$2.run(Main.java:277)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

我的部分来源是从 [这个问题](https://stackoverflow.com/questions/8621560/sending-multiple-variables-through-a-socket)的第二个答案中使用的，我是一个 java 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T07:14:05.107

Data 类是外部类的非静态内部类，它扩展了 Thread 或具有 Thread 类型的属性。每个非静态内部类都有对其外部对象的隐式引用。为了说明这一点，下面的代码

```
public class Outer extends Thread {
    class Data implements Serializable {
        String a = "ok baby";
        String b = "hi there";
    }

    ...
} 
```

相当于以下内容：

```
public class Outer extends Thread
    ...
}

class Data implements Serializable {
     String a = "ok baby";
     String b = "hi there";
     Outer outer;
} 
```

因此，当序列化 Data 的实例时，它也会尝试序列化外部对象，并且 Thread 不可序列化，它会中断。

要解决此问题，请将`Data`内部类设为静态，或将其设为顶级类。

# c - C: 如何比较两个字符串？

> ID：16116012
> 
> 赞同：2
> 
> 时间：2013-04-20T02:49:45.787
> 
> 标签：c, string, compare

**编辑：**这是重复的，我已将其标记为这样。请参阅 [问题][为什么“a”！=“a”在 C 中？](https://stackoverflow.com/questions/4843640/why-is-a-a-in-c)

所以我试图根据结构中的字段打印出特定的消息。该字段包含字符串“1”。

每当我运行`printf("%s", record.fields[2]);` 输出是`1`；我没有格式警告。

但是，当我根据相应的字符串（在本例中为“1”）检查该字段时，检查失败：

```
if (record.fields[2] == "1") {
    printf("The field is 1!");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T02:51:01.587

您需要使用[`strncmp`](http://pubs.opengroup.org/onlinepubs/009696699/functions/strncmp.html)来比较字符串：

```
if (strncmp(record.fields[2], "1", 1) == 0) ... 
```

您需要与零进行比较，因为`strcmp`当两个字符串相同时返回零。

但是，看起来您不是在比较字符串：而是在字符串中查找特定字符。在这种情况下，您需要使用字符常量而不是字符串文字（带单引号）：

```
if (record.fields[2] == '1') ... 
```

# iphone - cocos2d - CCSprite 未与 b2Body 对齐

> ID：16116014
> 
> 赞同：1
> 
> 时间：2013-04-20T02:50:23.610
> 
> 标签：iphone, cocos2d-iphone, box2d, ccsprite, levelhelper

如果我用第一批代码创建一个精灵和身体，精灵就在圆形身体的顶部。但是如果我用第二批代码创建精灵，圆形主体的底部会附加到精灵的顶部。两批代码都使用以下

**更新 1 -**我更改了 createBody 以便它现在将位置作为输入。然后我认为我在每个原因中都发送了正确的位置，但是我仍然在第二批代码中看到精灵的顶部连接到身体的底部。

createBody 方法：

```
- (void)createBody : (NSNumber *)xPos  yPos:(NSNumber *)yPos {

float radius = 16.0f;

b2BodyDef bd;
bd.type = b2_dynamicBody;
bd.linearDamping = 0.1f;
bd.fixedRotation = true;
bd.position.Set([xPos doubleValue]/PTM_RATIO, [yPos doubleValue]/PTM_RATIO);

body = _world->CreateBody(&bd);

b2CircleShape shape;
shape.m_radius = radius/PTM_RATIO;

b2FixtureDef fd;
fd.shape = &shape;
fd.density = 1.0f;
fd.restitution = 0.0f;
fd.friction = 0.2; 

body->CreateFixture(&fd); 
```

}

**第一批代码——**

英雄.mm -

```
- (id)initWithWorld:(b2World *)world {
    if ((self = [super initWithSpriteFrameName:@"animal.png"])) {
      NSNumber *xPos = [NSNumber numberWithDouble:self.position.x];
      NSNumber *yPos = [NSNumber numberWithDouble:self.position.y];
      [self createBody:xPos yPos:yPos];
    }
} 
```

你好世界.mm

```
 _hero = [[[Hero alloc] initWithWorld:_world] autorelease];
    [_terrain.batchNode addChild:_hero]; 
```

**第二批代码——**

英雄.mm -

```
 CCSprite *sprite = [CCSprite spriteWithSpriteFrameName:@"animal.png"];
 [self addChild:sprite];
 NSNumber *xPos = [NSNumber numberWithDouble: sprite.position.x];
 NSNumber *yPos = [NSNumber numberWithDouble: sprite.position.y];
 [self createBody:xPos yPos:yPos]; 
```

两批代码的主要区别在于，第一批使用**initWithSpriteFrameName**，第二批使用**spriteWithSpriteFrameName**。有谁知道如何使用 spriteWithSpriteFrameName 使精灵在身体上居中？

奇怪的是createBody方法中的这一行

```
 bd.position.Set([xPos doubleValue]/PTM_RATIO, [yPos doubleValue]/PTM_RATIO); 
```

似乎没有将身体定位在精灵上，而是将身体和精灵定位在世界坐标中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:41:18.860

The only difference that I notice is as follows.

In your first case you initialize your hero as a sprite and call `createBody` which in turn uses `self.position`, ie. the position of the sprite itself.

In your second case, you add a sprite as a child - `createBody` now uses the position of the parent object and not the sprite that you are adding.

# .htaccess - GZIP 压缩帮助。不能让它工作（2）

> ID：16116017
> 
> 赞同：0
> 
> 时间：2013-04-20T02:50:38.643
> 
> 标签：.htaccess, optimization, compression, gzip, pagespeed

我正在研究我的网站速度优化。我在使用 gzip 压缩时遇到问题。我把代码放在`.htaccess`文件里，上传到网上，它不起作用。当我检查这个工具[http://www.gidnetwork.com/tools/gzip-test.php](http://www.gidnetwork.com/tools/gzip-test.php)它说`page content is not compressed`。我也用 gtmetrix.com 检查它，但仍然没有运气。

这是我放入`.htaccess`文件中的代码：

```
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule> 
```

我也试过没有`<IfModule mod_deflate.c></IfModule>`：

```
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript 
```

在我的 htaccess 中也试过这个方法：

```
<files *.html>
    SetOutputFilter DEFLATE
</files> 
```

仍然没有运气。难道我做错了什么？如果可以的话请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:02:49.433

对于 Gzipping 您的资产的行为，试试这个。

```
<FilesMatch "\.(html|php|htm|xml|txt|xsl)$">

    <IfModule mod_expires.c>

     Header set Cache-Control "max-age=7200, must-revalidate"

     Header append Vary Accept-Encoding

     Header append Accept-Encoding "gzip"

    </IfModule>

    </FilesMatch> 
```

# perl - 从 .txt 文件中读取第一行，从 .txt 中删除它，然后将所有其他行向上滑动 1 个单位

> ID：16116020
> 
> 赞同：1
> 
> 时间：2013-04-20T02:51:02.880
> 
> 标签：perl

我有一个 .txt 文件，其中每一行只有一个元素。正如主题所暗示的，我想输入 .txt 中的第一行。然后，我想在输入后立即将其从 .txt 文件中删除。同时，我想将每个元素向上滑动一行，使前第二行元素成为新的第一行。

我不太确定如何继续： open(my $l, '<', 'Input.txt' ) or die "Can not open Input.txt: $!";

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T02:54:20.587

您无法从文件中删除。您可以简单地读取后面的每个字节并将它们写回较早的位置。这很昂贵，但使用 Tie::File 很容易做到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T03:10:29.473

```
use strict;

if ($#ARGV)
{
    print "\nUsage: test.pl Filename\n\n";
    exit();
}

my $f;
if (open($f, $ARGV[0]))
{
    print scalar(<$f>);

    my $s = join('', <$f>);
    close($f);

    if (open($f, '>', $ARGV[0]))
    {
        print $f $s;
        close($f);
    }
}
else print "\nCan't open input file $ARGV[0]\n\n"; 
```

或子

```
sub slideFile($)
{
    my $filename = shift();

    my $f;
    if (open($f, $filename))
    {
        <$f>;

        my $s = join('', <$f>);
        close($f);

        if (open($f, '>', $filename))
        {
            print $f $s;
            close($f);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T20:36:46.633

使用 时`Tie::File`，您可以将文件*绑定*到 an `@array`，以便数组中的每个元素对应于文件中的一行。

在以下示例中，`shift`运算符从 中删除第一个元素`@lines`并将其分配给`$first_line`。由于`@lines`与`file.txt`该文件中的第一行相关联也被删除。

```
use strict;
use warnings;

use Tie::File;

tie my @lines, 'Tie::File', 'file.txt' or die $!;

my $first_line = shift @lines;

print "first line WAS: $first_line\n";

untie @lines; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T20:18:53.173

这是另一种选择：

```
use strict;
use warnings;
use File::Slurp;

my $i = 0;
write_file $ARGV[0], grep $i++, read_file $ARGV[0]; 
```

用法：`perl script.pl inFile`

该脚本在列表上下文中使用[File::Slurp](http://search.cpan.org/~uri/File-Slurp-9999.19/lib/File/Slurp.pm)`grep` ，并且仅当`$i`不为零时才允许行通过，因此省略了第一行，并将第 2 .. n 行写回文件。

希望这可以帮助！

# hadoop - 将reducer超出java堆空间

> ID：16116022
> 
> 赞同：0
> 
> 时间：2013-04-20T02:51:13.037
> 
> 标签：hadoop

我正在使用 Hadoop 实现一个程序。我的问题是如何处理java空间不足的问题，我在xml文件中添加了一些属性配置，但是没有用。越来越多的减速器对我也不起作用。因为在我的程序中，每个 reducer 都需要大的稀疏整个矩阵，我不允许更改这个逻辑。然而，每个 reducer 都会收到一个以列 id 作为键，列向量作为值的条目。有什么办法可以摆脱这个困境吗？

PS：我首先想到的是reducer会一列一列，这不会导致内存不足的问题。但似乎不是这样。实际上，我正在尝试实现论文中描述的算法。reducer 的算法如下所示。第 11 行是我提到的那一列，每个 reducer 都有矩阵的每一列。 ![在此处输入图像描述](https://i.stack.imgur.com/OndBb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:03:39.517

您使用 hadoop 之类的东西的原因是因为您无法将整个数据集放入内存中。要么不更改逻辑并尝试找到足够大的计算机，要么并行化算法并利用 hadoop。

# android - 引用多个字符串资源

> ID：16116030
> 
> 赞同：0
> 
> 时间：2013-04-20T02:53:03.603
> 
> 标签：android, android-resources

有没有办法在另一个内部引用多个资源？只显示一些示例代码会更容易。

```
<resources>
   <string name="app_name">AppName</string>
   <string name="sep">--</string>
   <string name="action">MyAction</string>

   <string name="action_title">@string/app_name @string/sep @string/action</string>
</resources> 
```

所以`@string/action_title`应该是`AppName -- MyAction`

但是，当我使用它时，它似乎`R.java`只是窒息而没有建成。我错过了什么还是这不可能？

**编辑** 我正在使用它来标记`BroadcastReceivers`我`AndroidManifest.xml`，所以在代码中这样做似乎不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:03:28.727

只要您使用单个参考，例如

```
 <string name="app_name">AppName</string>
   <string name="sep">@string/AppName</string> 
```

但是你不能像你想要的那样做多个参考，也不能像跟随

```
 <string name="app_name">AppName</string>
   <string name="sep">@string/AppName  --</string> 
```

你可以从代码中做到这一点

```
 String s = getString(R.string.app_name) + " --"; 
```

# asp.net-mvc-3 - 如果 URL 有查询字符串，AuthorizeAttribute 不起作用？

> ID：16116031
> 
> 赞同：5
> 
> 时间：2013-04-20T02:53:07.190
> 
> 标签：asp.net-mvc-3, authentication, iis-8

在 ASP.NET MVC3 Web 应用程序中，整个控制器都有一个`[Authorize]`附加属性。因此，如果用户未登录或会话过期，他们将被重定向到登录页面。这是工作......有时。下面“作品”列表中的 URL 正确重定向到登录页面；“不起作用”列表中的 URL 改为显示 IIS 401 错误屏幕 - 它们不会重定向到登录页面。

**作品**

*   [http://xyz/MyController/MyAction](http://x.y.z/MyController/MyAction)
*   [http://xyz/MyController/MyAction/123](http://x.y.z/MyController/MyAction/123)
*   [http://xyz/MyController/MyAction/123?X=Y](http://x.y.z/MyController/MyAction/123?X=Y)

**不工作**

*   [http://xyz/MyController/MyAction/123?ReturnUrl=](http://x.y.z/MyController/MyAction/123?ReturnUrl=)
*   [http://xyz/MyController/MyAction/123?ReturnUrl=XYZ](http://x.y.z/MyController/MyAction/123?ReturnUrl=XYZ)

该`MyAction`动作的模型`public string ReturnUrl { get; set; }`在其基类中有一个。它还具有其他属性，但将这些属性添加到查询字符串不会影响登录重定向。它似乎只是 ReturnUrl 参数。

我不确定还有什么要调查的。任何想法为什么`ReturnUrl`参数会造成麻烦？

**路线**

```
routes.MapRoute("Default-Title-ID", "{Controller}/{Action}/{Title}_{ID}", namespaces);
routes.MapRoute("Default-ID", "{Controller}/{Action}/{ID}", namespaces);
routes.MapRoute("Default", "{Controller}/{Action}", new { Controller = "Home", Action = "Index" }, namespaces);
routes.MapPageRoute("Reports-View", "ViewReport_{ID}", "~/Views/Reports/View.aspx"); 
```

**工作示例**（嗯，**不**工作，但说明了问题。）

在此处下载解决方案：[https ://docs.google.com/file/d/0B4o6vqgNLpvbeVo4bVdKZWFMcEE/edit?usp=sharing](https://docs.google.com/file/d/0B4o6vqgNLpvbeVo4bVdKZWFMcEE/edit?usp=sharing)

然后尝试访问：

*   [http://your.local.host/Test/TestMe?ReturnUrl=](http://your.local.host/Test/TestMe?ReturnUrl=) - 您**不会**被重定向到登录页面。
*   [http://your.local.host/Test/TestMe](http://your.local.host/Test/TestMe) - 您**将**被重定向到登录页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-16T02:50:04.137

我想将此作为评论发布，但我太长了。我需要为我的一个应用程序动态重定向，并使用以下解决方案（它使用调用它的控制器而不是 web.config 中的静态 URL）。使用您的示例对此进行测试时，它可以解决问题。但我不知道为什么。也许它会引导你走向正确的道路，或者其他人可以澄清。

```
using System.Web.Mvc;
using System.Web.Routing;

namespace MvcApplication1.App_Start
{
    public class LoginRequiredAttribute : AuthorizeAttribute
    {
        public override void OnAuthorization(AuthorizationContext filterContext)
        {
            base.OnAuthorization(filterContext);

            if (filterContext.Result is HttpUnauthorizedResult)
            {
                filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary 
                {
                    { "controller", filterContext.RouteData.Values[ "controller" ] },
                    { "action", "Login" },
                    { "ReturnUrl", filterContext.HttpContext.Request.RawUrl }
                });
            }
        }
    }
} 
```

然后只需更改操作以使用新属性：

```
[LoginRequired]
public ActionResult TestMe() 
```

# ruby - 如果我有一个只有 API 的 Chef::Node，如何配置或获取 Chef::Client

> ID：16116033
> 
> 赞同：0
> 
> 时间：2013-04-20T02:53:16.970
> 
> 标签：ruby, mongodb, chef-infra

我有厨师、工作站和一些通过托管厨师提供的节点。我需要在 ruby​​ 脚本中的节点上做一些工作，而不是食谱/食谱，所以我`Chef::Search`用来查询它们。

我的脚本中有一个数组`Chef::Nodes`，我想获得每个节点的厨师客户端的句柄，以便我可以在每个节点上运行一个配方。请记住，我不是在进行常规的厨师运行，而是需要模仿厨师运行的工作：拉下节点，扩展它们`run_lists`并根据需要在它们上运行食谱。

**为什么？**
因为，我不只是供应；我需要检查节点的状态并选择一个特定的节点来运行配方。这些节点配备了 mongo，它们需要作为副本集进行维护。我无法运行顺序配方，也无法从其中一个节点运行。

**所以我的需要是：** 给定`Chef::Node`我从 a 得到的 a `Chef::Search::Query`，如何获得它`chef-client`或将其加载到新的中`Chef::Client`？

我已经广泛地查看`API`了`Chef::Client`课程，但似乎并没有清楚地告诉我如何。有初始化和加载节点，但没有任何东西需要一个节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:11:19.440

[我认为您可以使用knife-exec](http://docs.opscode.com/knife_exec.html)完成很多您要求的事情。如果您有 API 密钥，它允许您使用 Ruby 脚本操作 Chef 服务器上的数据。这包括搜索、节点、角色等等。我主要用它来批量更新大量节点上的属性，而不是`knife node edit`手动进行。

这并没有回答如何`chef-client`在节点上运行。也许您可以运行“ssh node1 sudo chef-client”或使用`knife-ssh`来执行此操作。

# php - php 加载一个 .php 页面并替换变量，然后存储输出

> ID：16116037
> 
> 赞同：0
> 
> 时间：2013-04-20T02:53:41.100
> 
> 标签：php

我想加载不同的 .php 页面（.php 包含 html 并且需要替换一些 php 变量。

例如：

```
load.php 
```

$输出 = '';

加载 test.php 并将 $this->name 替换为值。

将 html 存储到 $output

* * *

加载 test1.php 并将 $this->name 替换为值。

附加到前一个 $output 变量

所以最后我会有一个 $output 变量有所有更新的 html

任何建议表示赞赏。

* * *

测试.php >

```
<html>
<?php echo $this->name; ?>
</html> 
```

test1.php >

```
<html>
<?php echo $this->address; ?>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T02:59:06.900

您可能希望将输出缓冲与 require 或 include 语句一起使用：

```
ob_start();

require('load.php');

$output = ob_get_contents();
ob_end_clean(); 
```

`$output`应包含 load.php 的内容以及已处理的任何变量。

要处理多个文件（或其他任何文件），只需`ob_start()`在最后两行之间运行它，这样您就可以像这样抓取两个文件：

```
ob_start();

require('test.php');
require('test1.php');

$output = ob_get_contents();
ob_end_clean(); 
```

# xpath - XPATH 排除多个元素/标签

> ID：16116038
> 
> 赞同：-1
> 
> 时间：2013-04-20T02:53:46.977
> 
> 标签：xpath, html-parsing

我在尝试提取`div`XML 中两个标签之间的文本时遇到问题。

想象一下，我有以下 XML：

```
<div class="default_style_wrap" >

<!-- Body starts -->
    <!-- Irrelvent Data -->
    <div style="clear:both" />
    <!-- Irrelvent Data -->
    <div class="name_address" >...</div>
    <!-- Irrelvent Data -->
    <div style="clear:both" />
    <!-- Irrelvent Data -->
    <span class="img_comments_right" >...</span>

    <!-- Text that I want to get -->
Two members of the Expedition 35 crew wrapped up a 6-hour, 38 minute spacewalk at 4:41 p.m. EDT Friday to deploy and retrieve several science experiments on the exterior of the International Space Station and install a new navigational aid.
    <br />
    <br />
The spacewalkers' first task was to install the Obstanovka experiment on the station's Zvezda service module. Obstanovka will study plasma waves and the effect of space weather on Earth's ionosphere.

    <!-- Irrelvent Data Again -->
    <span class="img_comments_right" >...</span>
    <!-- Text that I want to get -->
After deploying a pair of sensor booms for Obstanovka, Vinogradov and Romanenko retrieved the Biorisk experiment from the exterior of Pirs. The Biorisk experiment studied the effect of microbes on spacecraft structures.
    <br />
    <br />
This was the 167th spacewalk in support of space station assembly and maintenance, totaling 1,055 hours, 39 minutes. Vinogradov's seven spacewalks total 38 hours, 25 minutes. Romanenko completed his first spacewalk.
    <!-- Body ends -->
</div> 
```

由于它在代码中可能没有反映，`default_style_wrap`是所有其他不相关`divs`和`spans`. 与我相关的文本基本上是所有无标签文本，但正如您所见，中间还有其他标签，例如`img_comments_right`，它让我发疯。

正如我在另一篇文章中看到的那样，我尝试了以下操作：

```
"//div[@class='article_container']/*[not(self::div)]"; 
```

但这似乎根本没有返回任何文本，即使返回，我也不知道如何排除`spans`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-28T15:19:26.307

解决方案：

您可以使用`or`运算符为运算符指定多个条件，`not`如下所示：

```
not(expr1 or expr2) 
```

因此，您可以添加`self::span`另一个条件`not`来将它们从结果中排除；

```
//div[@class='default_style_wrap']/*[not(self::div or self::span)] 
```

* * *

`div`PS：标签关闭不当似乎存在问题。以适当的方式关闭它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T22:29:48.387

您应该能够使用此 XPath 获取文本：

```
div[@class = 'default_style_wrap']/text()[normalize-space()] 
```

它选择所有`text()`作为 *default_style_wrap* 子节点的节点`<div>`，过滤掉空（或仅空白）节点。

如果您使用单独的模板，您可以将每个块整齐地放在自己的段落中，例如：

```
<xsl:template match="/">
    <xsl:apply-templates select="div[@class = 'default_style_wrap']/text()[normalize-space()]" />
</xsl:template>

<xsl:template match="text()">
    <p><xsl:value-of select="." /></p>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T22:16:10.177

您可以使用此 xpath：

```
//div[@class='default_style_wrap']/text() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-20T03:19:34.787

您应该尝试以下查询。它选择节点的所有以下兄弟姐妹`<span>`，它们是*文本节点*：

```
query = '//span[@class="img_comments_right"]/following-sibling::text()'; 
```

# php - Wordpress - 试图删除顽固的标题

> ID：16116040
> 
> 赞同：0
> 
> 时间：2013-04-20T02:54:01.430
> 
> 标签：php, html, css, wordpress, wordpress-theming

我尝试通过在 Stackoverflow 和 wordpress 支持上找到的所有方法删除标题，例如调整 css 规则并在页面、单个和模板 php 文件中查找 get_title。但是这个标题似乎并不想消失。

我取得任何成功的唯一方法是使用删除标题的插件，但随后我面临的问题是间距仍然保留在标题曾经的位置。

这是一张显示我的意思的图片：http: [//i.imgur.com/vj0vbc7.jpg](http://i.imgur.com/vj0vbc7.jpg)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:03:10.680

您需要进入模板文件并删除标题的输出位置。

我检查了您网站上的源代码，看起来主题文件不在常规位置。所以这样做。转到您的 FTP 客户端并打开：

/assets/956/themes/header.php

它的名称可能略有不同。

现在在该主题中找到您的 h1 标签。在这一点上，我建议删除它，保存它，并确保您有所需的更改。它应该完全从页面中消失。如果不是，也许 H1 标签位于另一个文件中？检查其他模板文件，直到找到正确的。

您可以将其全部删除或将其包围在 ID='homepg-h1' 的 div 中然后在您的 CSS 中执行如下规则：

```
#homepg-h1 {
    display:none;
} 
```

希望对您有所帮助，如果您有任何问题，请告诉我。

# ruby-on-rails - 我的 Gemfile 有什么问题？

> ID：16116044
> 
> 赞同：0
> 
> 时间：2013-04-20T02:54:24.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, bundler, gemfile

我试图捆绑安装，但这是我得到的：

```
/home/mywebsite/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/version.rb:187:in `initialize': Malformed version number string = 1.0.3 (ArgumentError)
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/lockfile_parser.rb:104:in `new'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/lockfile_parser.rb:104:in `parse_spec'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/lockfile_parser.rb:71:in `parse_source'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/lockfile_parser.rb:30:in `block in initialize'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/lockfile_parser.rb:24:in `each'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/lockfile_parser.rb:24:in `initialize'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/definition.rb:44:in `new'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/definition.rb:44:in `initialize'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/dsl.rb:148:in `new'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/dsl.rb:148:in `to_definition'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/dsl.rb:8:in `evaluate'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/definition.rb:18:in `build'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler.rb:144:in `definition'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/cli.rb:228:in `install'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/vendor/thor/task.rb:27:in `run'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/vendor/thor.rb:275:in `dispatch'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/vendor/thor/base.rb:408:in `start'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/bin/bundle:14:in `block in <top (required)>'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/bin/bundle:14:in `<top (required)>'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/bin/bundle:19:in `load'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@global/bin/bundle:19:in `<main>'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@mywebsiter/bin/ruby_noexec_wrapper:14:in `eval'
       /home/mywebsite/.rvm/gems/ruby-1.9.3-p362@mywebsiter/bin/ruby_noexec_wrapper:14:in `<main>'
There was an error in your Gemfile, and Bundler cannot continue. 
```

**编辑** 这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

gem 'rake' , '>= 10.0.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'
gem "rmagick", "~> 2.13.1"
gem "paperclip", "~> 3.0"
gem 'aws-sdk'
gem "fog"

gem 'bootstrap-wysihtml5-rails', :require => 'bootstrap-wysihtml5-rails',
    :git => 'git://github.com/Nerian/bootstrap-wysihtml5-rails.git'

#gem "asset_sync"

#gem 'sendgrid'
gem "tweet-button"
#gem "fb-localizer"

#gem 'easy_roles'

gem 'pg'
gem 'google-analytics-rails'
gem 'jquery-rails-cdn'
gem 'spinjs-rails'
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails'#,   '~> 3.2.3'
  gem 'coffee-rails'#, '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby
  gem 'less-rails-bootstrap'
  gem 'uglifier', '>= 1.0.3'
end

gem 'devise'

gem 'omniauth', "1.1.1"
gem 'omniauth-facebook', '1.4.0' # HIGHER VERSIONS DO NOT WORK!
gem "koala", "~> 1.5.0"
gem 'oauth2'

gem 'cancan'
gem 'routing-filter'

gem 'thin'
gem "simple_form"
gem "cocoon"
gem "jquery-rails"
gem "validate_url"
gem 'haml'

gem "on_the_spot"
gem 'therubyracer'   # important for less
gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'

#gem 'dragonfly'
gem 'refinerycms-i18n'#, '~> 2.1.0.dev', :git => 'git://github.com/refinery/refinerycms-i18n.git'
gem "refinerycms-videojs", "~> 0.5.5"
#Refinery
gem 'refinerycms-core' #You can leave this out if you like. It's a dependency of the other engines.
gem 'refinerycms-dashboard'
gem 'refinerycms-images'
gem 'refinerycms-pages'
gem 'refinerycms-resources'

group :production do
  gem 'newrelic_rpm'
end

#gem "ckeditor"
#gem "carrierwave"
#gem "mini_magick"

group :test, :development do

  gem "letter_opener"

  gem 'meta_request', '0.2.0'

  gem "rspec-rails", '2.9.0'

  gem 'guard-rspec'
  gem "spork"
  gem 'guard-spork'

  gem 'rb-inotify', '~> 0.8.8'

  gem "factory_girl_rails"

  gem "mocha"
  gem 'capybara' #, :git => 'git://github.com/jnicklas/capybara.git'

  gem 'launchy'
  gem "capybara-webkit"

  gem "nifty-generators"

  gem 'sextant'

  gem 'haml-rails'
  gem 'hpricot'
  gem 'ruby_parser'

end

#gem "paypal-recurring"
#gem "r2", "~> 0.0.3" 
```

**编辑2**

```
mywebsite@ubuntu:~/RubymineProjects/mywebsite$ bundle -v
Bundler version 1.2.3
mywebsite@ubuntu:~/RubymineProjects/mywebsite$ gem -v
1.8.24
mywebsite@ubuntu:~/RubymineProjects/mywebsite$ 
```

**注意错误：**

```
Malformed version number string = 1.0.3 (ArgumentError) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T03:24:20.133

尝试删除您的 Gemfile.lock 并再次运行 bundle install 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T03:15:28.687

尝试改变这个：

```
'uglifier', '>= 1.0.3' 
```

至：

```
gem 'uglifier'#, '>= 1.0.3' 
```

...看看会发生什么？

# ios - 使用自定义形状创建 UIView

> ID：16116045
> 
> 赞同：0
> 
> 时间：2013-04-20T02:54:28.923
> 
> 标签：ios, uiview

所以我想知道是否有办法用自定义形状制作 UIView。

我正在尝试制作钢琴键盘，因此当用户触摸视图时，委托方法会通过播放噪音来响应。图片是 .png，带有钥匙图片和透明背景。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:21:30.653

你不能制作一个`UIView`三角形，但你*可以*做的是让视图透明，然后将你的非透明内容添加到它。

**例如**，要制作一个具有 png 背景的视图（我假设有部分透明的区域），您可以制作一个透明的`UIView`，然后向其添加一个图像视图。**更好**的是，只需`UIImageView`在该位置使用 a 。

# c# - 每行 ItemsSource 绑定一个数据网格

> ID：16116048
> 
> 赞同：1
> 
> 时间：2013-04-20T02:55:20.980
> 
> 标签：c#, wpf, xaml

目前在我的 XAML 文件中定义了一个数据网格，它绑定（itemsource）一组数据（称为视图），它显示在一个大表中（如预期的那样，并且工作正常）。

然而，我现在需要的是创建一个数据网格 PER 行，从而最终得到许多包含单行数据的数据网格。

我唯一能想到的是：
- 在代码中动态创建数据网格（以某种方式）并将其从 XAML 中删除
- 使用特定的数据行填充每个动态创建的数据网格的 itemsource，例如（伪-代码）：

> > 为每一行视图
> > 创建新的数据网格
> > 分配行作为 itemsource 绑定

有没有人有更好的建议？这甚至可以按照我提议的方式完成吗？有没有更好/更简单的方法？

原因 - 客户希望在单独的 PAGE 上打印每一行，因此我将创建许多数据网格并将每个数据网格单独传递给 printvisual 以实现此目的。

代码：

```
// this is the datasource, essentially we want to show one recipe per printed page (so per datagrid)
List<ViewRecipe> View 
```

XAML：

```
<DataGrid ItemsSource="{Binding View}"
          AutoGenerateColumns="False"
          Height="Auto"
          CanUserAddRows="False"
          CanUserDeleteRows="False"
          CanUserResizeColumns="False"
          CanUserResizeRows="False"
          CanUserReorderColumns="False"
          IsReadOnly="True"
          GridLinesVisibility="None">
  <DataGrid.ColumnHeaderStyle>
    <Style TargetType="{x:Type DataGridColumnHeader}">
      <Setter Property="FontWeight"
              Value="Bold" />
      <Setter Property="FontSize"
              Value="12" />
    </Style>
  </DataGrid.ColumnHeaderStyle>
  <DataGrid.Columns>
    <DataGridTextColumn Header="Type"
                        Width="200"
                        FontSize="12"
                        Binding="{Binding Path=Name}" />
    <DataGridTemplateColumn Header="Ingredients"
                            Width="*">
      <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
          <DataGrid AutoGenerateColumns="False"
                    CanUserAddRows="False"
                    CanUserDeleteRows="False"
                    CanUserResizeColumns="False"
                    CanUserResizeRows="False"
                    CanUserReorderColumns="False"
                    IsReadOnly="True"
                    GridLinesVisibility="None"
                    ItemsSource="{Binding Ingredients}">
            <DataGrid.ColumnHeaderStyle>
              <Style TargetType="{x:Type DataGridColumnHeader}">
                <Setter Property="FontWeight"
                        Value="Bold" />
                <Setter Property="FontSize"
                        Value="12" />
              </Style>
            </DataGrid.ColumnHeaderStyle>
            <DataGrid.Columns>
              <DataGridTextColumn Header="Ingredients"
                                  Width="*"
                                  FontSize="12"
                                  Binding="{Binding Path=IngredientName}" />
              <DataGridTextColumn Header="Quantite"
                                  Width="*"
                                  FontSize="12"
                                  Binding="{Binding Path=Qty}" />
            </DataGrid.Columns>
          </DataGrid>
        </DataTemplate>
      </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
  </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:23:28.653

你可以形成一个list of list，`ViewRecipe`然后把它传递`Itemssource`给to `ItemsControl`，也`ItemsTemplate`就是你`DataGrid`。

代码：

```
List<List<ViewRecipe>> ViewExtended = new List<List<ViewRecipe>>();

foreach (var r in View)
{
    var l = new List<ViewRecipe>();
    ViewExtended.Add(l);
} 
```

XAML

```
<ItemsControl ItemsSource="{Binding Path=ViewExtended}">
<ItemsControl.ItemTemplate>
    <DataTemplate>
    <DataGrid ItemsSource="{Binding}">

    ......

    </DataGrid>
    </DataTemplate
<ItemsControl.ItemTemplate>
</ItemsControl> 
```

# fine-uploader - 启用过去功能

> ID：16116049
> 
> 赞同：0
> 
> 时间：2013-04-20T02:55:20.897
> 
> 标签：fine-uploader

阅读它在目标元素的粘贴选项中提到“还包含文件列表”的文档 [http://docs.fineuploader.com/integrating/options/fineuploaderbasic.html](http://docs.fineuploader.com/integrating/options/fineuploaderbasic.html)

这是什么？有一个很好的例子如何实现这个吗？这就是我到目前为止所拥有的。#pasteimage 是一个文本框。

使用 Chrome 10.6 我需要在 jquery.fineuploader-3.4.1.js 的某个地方打开它吗

```
 $(document).ready(function(){
                var thumbnailuploader = new qq.FineUploader({
                    element: $('#thumbnail-fine-uploader')[0],
                    request: {
                        endpoint: '/Admin/CFC/image-uploader.cfc?method=Upload',
                        params: {
                           profileID: '<cfoutput>#profile.ID#</cfoutput>',
                           profileType:'<cfoutput>#profile.Profile_Type#</cfoutput>',
                           subDName:'<cfoutput>#DecodeforHTML(profile.Subdomain_Name)#</cfoutput>'
                                },

                    },
                    multiple: true,
                    validation: {
                        allowedExtensions: ['jpeg', 'jpg', 'gif', 'png'],
                        sizeLimit: 102400, // 100 kB = 100 * 1024 bytes
                        itemLimit: 1,
                        stopOnFirstInvalidFile: false
                    },
                    text: {
                        uploadButton: "\+ Click or Drop"
                    },
                    paste:{
                            targetElement:$('#pasteimage')
                           },

                    callbacks: {
                        onComplete: function(id, fileName, responseJSON){
                            if (responseJSON.success) {
                                $('#thumbnail-fine-uploader').append('<img src="/<cfoutput>#profile.Profile_Type#</cfoutput>/<cfoutput>#profile.ID#</cfoutput>/' + responseJSON.filename + '" alt="' + fileName + '" style="width:120px;height:120px;">');
                                $('#thumbnail-fine-uploader').append('<br/><b style="color:red;">' + responseJSON.returnedProfileID + '<br/>'+ responseJSON.returnedprofileType+'<br/>'+responseJSON.returnedsubDName+'</b>');
                            }
                        }
                    },
                    onUpload: function(id, fileName){
                        $('#file-' + id).addClass('alert-info').html('<img src="/Images/loading.gif" alt="Initializing. Please hold."> ' +
                        'Initializing ' +
                        '“' +
                        fileName +
                        '”');
                    },
                    onProgress: function(id, fileName, loaded, total){
                        if (loaded < total) {
                            progress = Math.round(loaded / total * 100) + '% of ' + Math.round(total / 1024) + ' kB';
                            $('#file-' + id).removeClass('alert-info').html('<img src="/Images/loading.gif" alt="In progress. Please hold."> ' +
                            'Uploading ' +
                            '“' +
                            fileName +
                            '” ' +
                            progress);
                        }
                        else {
                            $('#file-' + id).addClass('alert-info').html('<img src="/Images/loading.gif" alt="Saving. Please hold."> ' +
                            'Saving ' +
                            '“' +
                            fileName +
                            '”');
                        }
                    },
                })
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:48:49.523

粘贴目标元素可以是任何将接收粘贴图像的容器。这是您的用户将任何图像粘贴到剪贴板上的位置。没有太多可以展示的。只需在 DOM 中创建一个元素，最好是您的用户可以理解的元素是可以粘贴图像的位置。然后，将此元素设置为`paste`选项`targetElement`属性的值。如果需要，您甚至可以将`document`用作目标。

# javascript - 独立的网络应用程序链接脚本 - 阻止它附加具有特定类的链接？

> ID：16116050
> 
> 赞同：1
> 
> 时间：2013-04-20T02:55:26.180
> 
> 标签：javascript, jquery, iphone, web-applications

此脚本可防止在 Mobile Safari 中打开链接。这适用于当 Web 应用程序在 iOS 上处于应用程序模式时（主屏幕书签）。

[gist.github.com/1042026](http://gist.github.com/1042026)

```
if(("standalone" in window.navigator) && window.navigator.standalone){

    // If you want to prevent remote links in standalone web apps opening Mobile Safari, change 'remotes' to true
    var noddy, remotes = false;

    document.addEventListener('click', function(event) {

        noddy = event.target;

        // Bubble up until we hit link or top HTML element. Warning: BODY element is not compulsory so better to stop on HTML
        while(noddy.nodeName !== "A" && noddy.nodeName !== "HTML") {
            noddy = noddy.parentNode;
        }

        if('href' in noddy && noddy.href.indexOf('http') !== -1 && (noddy.href.indexOf(document.location.host) !== -1 || remotes))
        {
            event.preventDefault();
            document.location.href = noddy.href;
        }

    },false);
} 
```

我的问题是你如何让上面的这个脚本忽略一个类的链接？

例如，我已经使用[www.photoswipe.com](http://www.photoswipe.com/) jquery 插件`a.lightbox`打开此链接并在灯箱中显示图像。

但是当我使用脚本时，它会终止灯箱启动，它只会自行打开图像。但如果我在上面这个脚本，photoswipe 灯箱工作正常。

有没有人有一些建议或帮助修改此脚本以忽略这些链接`a.lightbox`

谢谢乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:58:07.507

如果您使用的是 jQuery，您应该能够添加`&& !$(noddy).hasClass('lightbox')`到您的 if 测试中。

# php - 使用 WHILE 循环更新回显数据。只更新一条记录

> ID：16116051
> 
> 赞同：0
> 
> 时间：2013-04-20T02:55:37.600
> 
> 标签：php, mysql, forms, post, while-loop

除了第一个记录，我似乎无法更新任何记录。我不确定如何修改任何显示的记录。

```
<?php

    if(isset($_POST["action"]) == "update")
    {
        $id = $_POST['m_id'][0];
        $type = $_POST['type'][0];
        // if I echo $id & $type, it only gives me the first record.**
        mysql_query("
          UPDATE membership_type
          SET mt_type ='$type'
          WHERE mt_id = '$id'"
        );
    } 

    ?> 
```

所有这些都在同一个 php 页面中。

```
<form name=form action='' method='post'>

  <?php 
  $result=mysql_query("SELECT * FROM membership_type;");
  while($rows=mysql_fetch_array($result))
  {  ?>
    <input size=35 class=textField type=text name='type[]' value='<?php echo  $rows['mt_type']; ?>'>
    <input type=hidden name='m_id[]' value="<?php echo $rows['mt_id']; ?>">
    <input type=submit value="Update">
  <?php 
  } 
  ?> 
```

如何通过简单地单击更新按钮来编辑任何显示的记录？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:32:57.297

首先：您不应该使用**mysql_** * 函数，因为它们已被弃用*。*
第二：试试这个代码：

```
<?php  

// Get a connection to the database
$mysqli = new mysqli('host', 'user', 'password', 'database');

// Check if there's POST request in this file
if($_POST){ 

    foreach($_POST['m_id'] as $id => $type){
      $query = "UPDATE membership_type
                SET mt_type = '".$type."'
                WHERE mt_id = '".$id."'";

      // Try to exec the query
      $mysqli->query($query) or die($mysqli->error);
    }
}else{ 

  // Get all membership_type records and then iterate
  $result = $mysqli->query("SELECT * FROM membership_type") or die($mysqli->error); ?>

  <form name='form' action='<?php echo $_SERVER['PHP_SELF'] ?>' method='post'>
    <?php while($row = $result->fetch_object()){ ?>
      <input size='35' 
             class='textField' 
             type='text' 
             name='m_id[<?php echo $row->mt_id ?>]' 
             value='<?php echo $row->mt_type; ?>'>
      <input type='submit' value="Update">
    <?php } ?>
  </form>

<?php } ?> 
```

第三：为了增加更多的安全性（这段代码有漏洞），试试[mysqli_prepare](http://php.net/manual/es/mysqli.prepare.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T03:06:20.587

每次提交表单时只会更新第一条记录，因为您设置`$id = $_POST['m_id'][0]`了 ，其中包含第一个`type[]`文本框的值。要同时更新所有其他记录，请遍历`$_POST['m_id']`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T03:11:26.480

代替它。希望这有效。

```
<?php

    if(isset($_POST["action"]) == "update")
    {
        $id = $_POST['m_id'];
        $type = $_POST['type'];
        $i = 0;
        foreach($id as $mid) {
             mysql_query("UPDATE membership_type
                         SET mt_type='".mysql_real_escape_string($type[$i])."'
                         WHERE mt_id = '".intval($mid)."'") OR mysql_error();
        $i++;
        }
    } 

    ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T03:11:46.893

尝试这个 ：

```
if(isset($_POST["action"]) == "update")
{
        $id = $_POST['m_id'];
        $type = $_POST['type'];
        $loopcount = count($id);
        for($i=0; $i<$loopcount; $i++)
        {
          mysql_query("
           UPDATE membership_type
           SET mt_type ='$type[$i]'
           WHERE mt_id = '$id[$i]'"
          );
       }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T03:17:06.070

您的 HTML 格式错误，您作为数组传递，但仅使用第一个元素。考虑：

```
<form name="form" action="" method="post">

<?php 
$result = mysql_query("SELECT * FROM membership_type;");
while($row = mysql_fetch_array($result))
    echo sprintf('<input size="35" class="textField" type="text" name="m_ids[%s]" value="%s" />', $row['mt_id'], $row['mt_type']);
?>
    <input type="submit" value="Update">
</form> 
```

然后是服务器脚本：

```
<?php

if(isset($_POST["action"]) && $_POST["action"] == "Update"){

    foreach($_POST['m_ids'] as $mt_id => $mt_type)
        mysql_query(sprintf("UPDATE membership_type SET mt_type ='%s' WHERE mt_id = %s LIMIT 1", addslashes($mt_type), (int) $mt_id));

} 
```

您还可以在这里做其他事情，例如。准备好的陈述，但这应该有效。

# curl - Airplay http 请求

> ID：16116052
> 
> 赞同：0
> 
> 时间：2013-04-20T02:56:10.417
> 
> 标签：curl, google-chrome-devtools, airplay

我正在尝试为airplay接收器（包含在电视媒体播放器中）构建一个android控制器。

我正在使用 curl 来测试请求以及[postman](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm)，这是一个构建 http 请求的 chrome 扩展。如果我使用邮递员，服务器可以很好地理解请求，但我不能用 curl 重现请求。

例如，请求当前播放的媒体的当前位置：

```
curl -i \
192.168.1.42:7000/scrub \
-H "Connection: keep-alive" \
-H "Cache-Control: no-cache" \
-H "User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.63 Safari/537.31" \
-H "Accept: */*" \
-H "Accept-Language: fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4" \
-H "Accept-Encoding: gzip,deflate,sdch" \
-H "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3" \ 
```

返回：

```
HTTP/1.1 200 OK
Content-Type: text/parameters
Content-Length: 38

duration: 0.000000
position: 0.000000 
```

而邮递员返回正确的值：

```
duration: 275.838989
position: 13.000000 
```

curl 请求中使用的标头来自邮递员使用 Chrome 的开发工具发出的请求。

那么，有效发送的请求和我在开发工具中看到的请求在 Chrome 中的请求有什么区别吗？问题当然可能来自其他地方，因为 curl 无法重现相同的响应对我来说毫无意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:24:15.837

有两件事要尝试：

*   使用 -v 检查 curl 的结果，以查看您从命令行传递的标头。确保所有内容都与通过邮递员发送的标题相匹配

*   检查主机是否在设置 cookie（邮递员中的选项卡）。如果是，请尝试使用 -b 选项在您的 curl 请求中启用 cookie [http://curl.haxx.se/docs/http-cookies.html](http://curl.haxx.se/docs/http-cookies.html)

# php - 请帮我修复这个 PHP while 语句

> ID：16116058
> 
> 赞同：-1
> 
> 时间：2013-04-20T02:57:08.790
> 
> 标签：php, debugging, while-loop

当在字符串中找到“最佳匹配”时，下面的脚本应该结束，但即使我知道最终找到它，脚本也会继续运行。请帮我解决我的错误。

```
$end = "1";
while ($end != 2) {
foreach($anchors as $a) { 
    $i = $i + 1;
    $text = $a->nodeValue;
    $href = $a->getAttribute('href');

        //if ($i<80) {
    //if (strpos($item, ".$array.") == false) {

    //}
      if (strpos($text, "best match") == true) {
$end = "2";
}
   if (strpos($text, "by owner") === false) {
       if (strpos($text, "map") === false) {
   if ($i > 17) {

     echo "<a href =' ".$href." '>".$text."</a><br/>";

}
   }

   }

    }
        //$str = file_get_contents($href);
//$result = (substr_count(strip_tags($str),"ipod"));
//echo ($result);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:01:44.007

问题是嵌套循环。当您找到“最佳匹配”时，您还需要结束 foreach 循环。尝试：

```
if (strpos($text, "best match") == true) {
    $end = 2; 
    break; # Terminate execution of foreach loop
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:02:25.990

在 your`strpos`中，您正在与*true*进行比较，这是错误的。
此外，在**if**语句中，您应该中断 foreach 和 while 循环。

这是正确的代码：

```
<?php

while ($end != 2) {

  foreach($anchors as $a) {
    $text = $a->nodeValue;
    $href = $a->getAttribute('href');

    if (strpos($text, "best match") !== false) {
      $end = "2"; 
      break 2;
    }

    if (strpos($text, "by owner") === false) {
      if (strpos($text, "map") === false) {
        if ($i > 17) {
          echo "<a href =' ".$href." '>".$text."</a><br/>";
        }
      }
    }
  }
} 
```

# android - 垂直屏幕分割过渡（动画）

> ID：16116069
> 
> 赞同：4
> 
> 时间：2013-04-20T02:59:19.777
> 
> 标签：android, animation, split

动画应执行以下操作：

1.  将屏幕垂直分成两部分。
2.  上部向上移动。
3.  下部向下移动。
4.  最后，**反方向**。（关闭屏幕）

![在此处输入图像描述](https://i.stack.imgur.com/5ATs9.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T03:57:20.970

这个想法很简单：

1.  将您的活动 A 保存为位图
2.  将位图分成两部分
3.  向外动画位图（向上和向下）

为了获得活动的位图：

```
View root = currActivity.getWindow().getDecorView().findViewById(android.R.id.content);
root.setDrawingCacheEnabled(true);
Bitmap bmp = root.getDrawingCache(); 
```

为了分割位图：

```
int splitYCoord = (splitYCoord != -1 ? splitYCoord : bmp.getHeight() / 2);
if (splitYCoord > bmp.getHeight())
            throw new IllegalArgumentException("Split Y coordinate [" + splitYCoord + "] exceeds the activity's height [" + bmp.getHeight() + "]");
Bitmap mBmp1 = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), splitYCoord);
Bitmap mBmp2 = Bitmap.createBitmap(bmp, 0, splitYCoord, bmp.getWidth(), bmp.getHeight() - splitYCoord);
private static int[] mLoc1;
private static int[] mLoc2;
mLoc1 = new int[]{0, root.getTop()};
mLoc2 = new int[]{0, root.getTop() + splitYCoord};
private static ImageView mTopImage;
private static ImageView mBottomImage;
mTopImage = createImageView(destActivity, mBmp1, mLoc1);
mBottomImage = createImageView(destActivity, mBmp2, mLoc2);

private static ImageView createImageView(Activity destActivity, Bitmap bmp, int loc[]) {
    ImageView imageView = new ImageView(destActivity);
    imageView.setImageBitmap(bmp);

    WindowManager.LayoutParams windowParams = new WindowManager.LayoutParams();
    windowParams.gravity = Gravity.TOP;
    windowParams.x = loc[0];
    windowParams.y = loc[1];
    windowParams.height = ViewGroup.LayoutParams.WRAP_CONTENT;
    windowParams.width = ViewGroup.LayoutParams.WRAP_CONTENT;
    windowParams.flags =
            WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN
    windowParams.format = PixelFormat.TRANSLUCENT;
    windowParams.windowAnimations = 0;
    destActivity.getWindowManager().addView(imageView, windowParams);

    return imageView;
} 
```

创建位图后，应用动画

```
AnimatorSet mSetAnim = new AnimatorSet();
mTopImage.setLayerType(View.LAYER_TYPE_HARDWARE, null);
mBottomImage.setLayerType(View.LAYER_TYPE_HARDWARE, null);
mSetAnim.addListener(new Animator.AnimatorListener() {
                    @Override
                    public void onAnimationEnd(Animator animation) {
                        clean(destActivity);
                    }

                    @Override
                    public void onAnimationCancel(Animator animation) {
                        clean(destActivity);
                    }
                        ...
                });

Animator anim1 = ObjectAnimator.ofFloat(mTopImage, &quot;translationY&quot;, mTopImage.getHeight() * -1);
Animator anim2 = ObjectAnimator.ofFloat(mBottomImage, &quot;translationY&quot;, mBottomImage.getHeight());

mSetAnim.setDuration(duration);
mSetAnim.playTogether(anim1, anim2);
mSetAnim.start();

private void clean(Activity activity) {
    if (mTopImage != null) {
        mTopImage.setLayerType(View.LAYER_TYPE_NONE, null);
        try {
            activity.getWindowManager().removeViewImmediate(mBottomImage);
        } catch (Exception ignored) {}
    }
    if (mBottomImage != null) {
        mBottomImage.setLayerType(View.LAYER_TYPE_NONE, null);
        try {
            activity.getWindowManager().removeViewImmediate(mTopImage);
        } catch (Exception ignored) {}
    }

    mBmp1 = null;
    mBmp2 = null;
} 
```

以上代码仅供参考。您可以从下面的链接中找到完整的演示。

参考链接：[ActivitySplitAnimation](https://github.com/Udinic/ActivitySplitAnimation)

# c++ - 输出到文件给出错误的指针值

> ID：16116071
> 
> 赞同：0
> 
> 时间：2013-04-20T02:59:53.857
> 
> 标签：c++, file, pointers, output

我有一个 Word 类，它包含一个字符串和一个结构向量，每个结构都包含一个指向容器类的指针，如下所示：

```
struct doc {
    Document* d;
    int timesMentioned = 0;
}; 
```

我有一个输出函数，可以输出每个 Word 的字符串和 Word 的文档向量中的每个文档的键。（d1、d2、d3 等。）

每当我将它们全部输出到文件时，它看起来像这样：

```
foo = d3,
bar = d3,
foobar = d3,
etc. 
```

每个 Word 仅输出 d3 （从给定输入文件循环遍历的最后一个文档。如果需要，我可以发布代码）

奇怪的是，每当我将它输出到控制台时，它都能正常工作。与每个 Word 关联的文档正确输出。知道为什么会发生这种情况吗？我认为它可能是一个悬空指针，但它正确输出到控制台很奇怪。如果需要，我可以发布添加文档功能或更多代码。

下面是 Word 类的代码：

```
void Word::createWord(string str) {
    removePunctuation(str);
    toLower(str);
    word = str;
}
void Word::addDoc(Document& d) {
    doc newDoc;
    newDoc.d = &d;
    newDoc.timesMentioned++;
    docs.push_back(newDoc);
}
vector<doc> Word::getDocs() {
    return docs;
}
string Word::getWord() {
    return word;
}

//Formatting the string, should be irrelevant to this question
void Word::removePunctuation(string& str) {
    string temp = "";
    for(int i = 0; i < str.length(); i++) {
        bool punctual = false;
        for(int k = 0; k < 42; k++)
            if(str[i] == punctuals[k]) punctual = true;
        if(!punctual) temp += str[i];
    }
    str = temp;
}
void Word::toLower(string& str) {
    string temp = "";
    for(int i = 0; i < str.size(); i++) {
        char c = str[i];
        temp += tolower(c);
    }
    str = temp;
} 
```

这里是单词/文档被实例化并添加到向量的地方：

```
void InvertedFileIndex::parseFile(string fileName) {
    fstream fin, fout;
    fin.open(fileName.c_str(), fstream::in);

    if(fin.is_open()) {
        //Parse input into a single string to the XMLParsing
        xml_document<> doc;
        string str, parse = "";
        while(fin >> str)
                parse += str + " ";
        doc.parse<0>(&parse[0]);
        xml_node<>* root;
        root = doc.first_node("mediawiki");

        //Iterate through each page
        int i = 1;
        for (xml_node<>* page = root->first_node("page"); page; page = page->next_sibling()) {
            Document d;
            Word w;
            string docName = "d" + intToStr(i);
            xml_node<>* title = page->first_node("title");
            d.setTitle(page->first_node("title")->value());
            d.setKey(docName);

            //Find text from document
            xml_node<>* revision = page->first_node("revision");
            xml_node<>* text = revision->first_node("text");
            d.setText(text->value());
            string docText = text->value();

            ////Begin parsing text into words
            stringstream ss(docText); //create a string stream so we can break it into tokens
            string item;
            while (getline(ss, item, ' ')) {
                Word w;
                w.createWord(item);
                w.addDoc(d);
                toks.push_back(w);
            }
            documents.push_back(d);
            writeToIndex();
            i++;
        }
        fin.close();
    }
    else
        cout << "The sample file " << fileName << "could not be opened." << endl;
} 
```

这是输出代码：

```
void InvertedFileIndex::writeToIndex() {
    fstream fout;
    fout.open("index.txt", fstream::out);

    if(fout.is_open()) {
        for(int i = 0; i < toks.size(); i++) {
            fout << toks[i].getWord() << " = ";
            cout << toks[i].getWord() << " = ";
            for(int j = 0; j < toks[i].getDocs().size(); j++) {
                fout << toks[i].getDocs()[j].d->getKey();
                cout << toks[i].getDocs()[j].d->getKey();
                fout << ", ";
                cout << ", ";
            }
            fout << endl;
            cout << endl;
        }
        fout.close();
    }
    else
        cout << "Index file could not be opened." << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:29:28.323

在我看来，您正在保存指向超出范围的对象的指针。基本上你的代码是

```
while (...)
{
    Document d;
    ...
    w.add(d); // add takes a reference and stores pointer to d
}

// sometime later
writeToIndex(); 
```

显然，当您开始 writeToIndex 时，在 while 循环中创建的所有文档对象都已被销毁。所以你有指向不再存在的对象的指针。如果要存储指针，则应在某处动态分配对象。

# javascript - 来自客户端的 Meteor.userId - 更改显示用户电子邮件，正确的行为？

> ID：16116075
> 
> 赞同：1
> 
> 时间：2013-04-20T03:00:29.283
> 
> 标签：javascript, security, meteor

我正在查看另一个关于从客户端更改 userId 并遵循但没有得到预期结果的问题的答案；

[Meteor.userId 是可变的](https://stackoverflow.com/questions/13331836/meteor-userid-is-changeable/13334986#13334986)

我按照步骤 1 到 5 操作没问题，但随后将 userId() 设置为我刚刚使用 Meteor.default_connection.setUserId('usersfjhjdskfh'); 在单独的浏览器中注销的用户；

因为服务器不应该返回数据，所以它没有显示一个 spinny 代替电子邮件地址，而是显示了我在那里使用的实际用户的电子邮件地址。（然而，它并没有带回派对信息并在地图上显示）。

这是预期的行为，我错过了 12 月给出的最后一个答案的要点还是发生了一些变化？（我正在运行 Meteor 0.6.2 并且从我的示例中删除了不安全和自动发布）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:48:53.830

我假设您想更改用户`_id`而不是通过 id 更改登录用户。要更改用户 ID，您可能会执行类似的操作

```
Meteor.users.update(Meteor.userId(), {$set:{_id:<new Id>}}); 
```

假设您拥有正确的权限`Meteor.users.allow`。这应该会更改`_id`当前登录用户的身份。

上一个问题演示了更改本地客户端 Meteor 功能时的安全性以及它将如何影响服务器。Meteor 服务器不信任来自客户端的任何内容，并在更改它之前使用允许/拒绝规则仔细检查它，无论当前登录用户的数据可能是什么。因此，用户确实需要登录才能更改服务器上 mongodb 数据库中有关他们的任何数据，以便提交允许/拒绝规则。

# python - 使用线程或多处理的 Python for 循环

> ID：16116080
> 
> 赞同：2
> 
> 时间：2013-04-20T03:01:13.193
> 
> 标签：python, multithreading, multiprocessing

所有，我很新，正在寻求帮助。我需要对压缩后的大约 20 GB 数据的数据集执行字符串搜索。我有一个带有 32 GB RAM 的八核 ubuntu 盒子，我可以用它来处理这个问题，但我无法实现也无法确定此类任务的最佳代码。线程或多处理最适合这样的任务吗？请提供代码示例。谢谢你。请查看我当前的代码；

```
#!/usr/bin/python
import sys
logs = []
iplist = []

logs = open(sys.argv[1], 'r').readlines()
iplist = open(sys.argv[2], 'r').readlines()
print "+Loaded {0} entries for {1}".format(len(logs), sys.argv[1])
print "+Loaded {0} entries for {1}".format(len(iplist), sys.argv[2])

for a in logs:
    for b in iplist:
        if a.lower().strip() in b.lower().strip()
            print "Match! --> {0}".format(a.lower().strip()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:27:39.117

我不确定多线程是否可以帮助您，但是您的代码存在一个对性能不利的问题：一次性读取日志会消耗大量 RAM 并破坏您的缓存。相反，打开它并按顺序阅读，毕竟您正在进行顺序扫描，不是吗？然后，不要对相同的数据重复任何操作。特别是， iplist 不会改变，但是对于每个日志条目，您都在重复调用`b.lower().strip()`. 在读取带有 IP 地址的文件后，执行一次。

简而言之，这看起来像这样：

```
with open(..) as f:
    iplist = [l.lower().strip() for l in f]

with open(..) as f:
    for l in f:
        l = l.lower().strip()
        if l in iplist:
            print('match!') 
```

您可以通过使用 iplist 的集合来进一步提高性能，因为当元素很多时，在那里查找内容会更快。也就是说，我假设第二个文件很大，而 iplist 将保持相对较小。

顺便说一句：您可以通过使用一个读取文件和另一个扫描匹配项来提高多个 CPU 的性能，但我想以上内容已经为您提供了足够的性能提升。

# c - Linux; 如果您不是 root，请将 UID 更改为 root

> ID：16116084
> 
> 赞同：0
> 
> 时间：2013-04-20T03:01:46.660
> 
> 标签：c, linux, root, uid

我写了一个简单的程序

当你运行这个程序时，如果你不是`root`用户，输入`root`密码，然后将uid更改为root

```
if (getuid())
{
    char *pass = getpass("");
    //how to change uid to root ?
} 
```

`root`获取密码后如何将uid更改为root ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T03:18:00.197

没有办法从非 root 用户更改为 root。这就是重点。`login`, `sshd`, 或之类的程序`su`最初*以 root 身份运行*，无论是因为它们的祖先还是可执行文件上有 suid 位，并仔细限制您可以执行的操作，直到您使用密码或其他方法进行身份验证，然后更改为适当的uid（root 或您登录的用户）和`exec`另一个程序（通常是 shell）。

# sql-server - 表数据到 Pivot

> ID：16116086
> 
> 赞同：0
> 
> 时间：2013-04-20T03:02:35.743
> 
> 标签：sql-server, pivot

会计表具有如下所示的示例数据：（AcctgHeads 可能比此处显示的更多）

```
+-------+-----------+--------+------+
| 贷款 | 会计主管 | 金额 | D_C |
+-------+-----------+--------+------+
| 1 | 校长 | 10000 | D |
| 1 | 校长 | 500 | C |
| 1 | 现金 | 10000 | C |
| 1 | 现金 | 500 | D |
| 2 | 校长 | 5000 | D |
| 2 | 现金 | 5000 | C |
| 2 | 现金 | 300 | D |
| 2 | 校长 | 300 | C |
| 1 | 到期 | 50 | D |
| 1 | 收入 | 50 | C |
+-------+-----------+--------+------+

```

所需的输出是：

```
+--------+-------------+-------------+--------+-- ---+------------+----------+-------------+---------- ---+
| 贷款 | 校长_D | 校长_C | 现金_D | 现金_C | IntDue_D | IntDue_C | 收入_D | 收入_C |
+--------+-------------+-------------+--------+-- ---+------------+----------+-------------+---------- ---+
| 1 | 10000 | 500 | 500 | 10000 | 50 | 0 | 0 | 50 |
| 2 | 5000 | 300 | 300 | 5000 | 0 | 0 | 0 | 0 |
+--------+-------------+-------------+--------+-- ---+------------+----------+-------------+---------- ---+

```

完成此任务的查询是什么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:16:23.817

试试这个：（假设您的 acctghead 具有固定数量的值，如图所示）

```
select loan, 
isnull(Principal_D,0) Principal_D,
isnull(Principal_C,0) Principal_C,
isnull(Cash_D,0) Cash_D,
isnull(Cash_C,0) Cash_C,
isnull(IntDue_D,0) IntDue_D,
isnull(IntDue_C,0) IntDue_C,
isnull(IntIncome_D,0) IntIncome_D,
isnull(IntIncome_C,0) IntIncome_C
from 
(select loan, amount, AcctgHead + '_' + D_C As AcctgHeadDC from t) t
pivot
(
       max(amount) for AcctgHeadDC in
       (Principal_D,Principal_C,Cash_D,Cash_C,
        IntDue_D,IntDue_C,IntIncome_D,IntIncome_C)
) p 
```

[SQL 演示](http://sqlfiddle.com/#!3/95ee4/5)

# c# - 使用“轻”dll 读取 Sqlite 文件

> ID：16116087
> 
> 赞同：0
> 
> 时间：2013-04-20T03:03:08.823
> 
> 标签：c#, visual-studio-2010, sqlite, system.data.sqlite

我有一个小型磁盘清理器，大小只有 400 KB。为了清理 Firefox，我需要访问他们的 places.sqlite。

这很好，我使用了那些 System.Data.Sqlite.dll 并且效果很好。

但是，问题是它们是 1.1MB。这就像我的磁盘清洁器的大小一样。老实说，我想将我的程序的下载大小从 400kb 增加到 1.5mb。

有没有办法可以瘦 dll 或者使用其他类型的方法来访问 places.sqlite？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:20:12.007

恐怕在你的程序中使用包含 1MB 的 dll 是唯一的选择。我认为没有任何方法可以“压缩”这个 dll。甚至 1.5MB 仍然是一个非常小的文件大小。

# ruby - 如何扩展自定义 rails 方法？

> ID：16116089
> 
> 赞同：0
> 
> 时间：2013-04-20T03:03:14.650
> 
> 标签：ruby, ruby-on-rails-3, class, methods

我有一个名为 Projects 的 Rails 模型：

```
class Project < ActiveRecord::Base 
```

具有多种拨动开关，如活动、已启动、付费等。

然后我有一种方法可以以人类可读的格式返回状态：

```
def status
  return 'Pending' if self.pending?
  return 'Started' if self.started
  return 'In Review' if self.in_review?
  return 'Approved' if self.approved
  return 'Active' if self.active
end 
```

现在我有另一种称为`status!`返回相同信息但以符号形式返回的方法，这在我看来效率低下：

```
def status
  return :pending if self.pending?
  return :started if self.started
  return :awarded if self.awarded
  return :in_review if self.in_review?
  return :approved if self.approved
  return :active if self.active
end 
```

我显然想做的是更像`status.to_sym`但不知道如何做到这一点。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:16:44.620

这个怎么样：

```
def status
  return 'Pending' if self.pending?
  return 'Started' if self.started
  return 'In Review' if self.in_review?
  return 'Approved' if self.approved
  return 'Active' if self.active
end

def status!
  # added gsub otherwise 'In Review' is returned as ':in review'
  status.gsub(/\s+/, "_").downcase.to_sym
  # status.parameterize.underscore.to_sym <- another option, Rails only
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:49:10.980

起初我高度加倍这些方法是有效的。

这些方法用于定义工作流中的某种状态。在常识中，它们是相互排斥的。也就是说，“待定”项目不能是“活动”、“审查中”或该组中的任何其他状态的项目。

基于上述，你为什么不在这个模型中将所有这些状态设置为枚举属性“状态”？该属性值可以是“pending, active, started...”中的任何一个，**这样您就可以使用一个字段替换 5 个字段**。

然后，即使没有控制器方法，也很容易直接在视图中以人类可读的格式获取状态。

```
<strong>Status: </strong><%= @project.status.titleize %> 
```

# sql - 如何从 CodeIgniter 中的 PDO 查询访问 result_array() 函数返回的这些数据？

> ID：16116095
> 
> 赞同：1
> 
> 时间：2013-04-20T03:03:53.720
> 
> 标签：sql, arrays, codeigniter, pdo

```
public function get_details($id)
{
    //my query in pdo form getting my records       
    $query = $this->db->query("SELECT * FROM users WHERE idno='". $id ."'");

    //check if query is successfull
if($query)
{
    $query->result_array();//get the result through array form
    print_r($query);//prints the array
}
// end if
}//end function 
```

上面代码的结果是这样的： `CI_DB_pdo_result Object ( [num_rows] => 1 [conn_id] => PDO Object ( ) [result_id] => PDOStatement Object ( [queryString] => SELECT * FROM users WHERE idno='888812' ) [result_array] => Array ( [0] => Array ( [idno] => 888812 [lname] => smith [fname] => john [username] => john [password] => password [usertype] => a [status] => a ) ) [result_object] => Array ( ) [custom_result_object] => Array ( ) [current_row] => 0 [row_data] => )`

通常`result_array()`函数的结果只是正在执行的游标/结果查询的数组，现在我有一个问题，如何从这种带有许多不同数据的 result_array() 返回值。

通常结果现在会是`Array([id] => 888812, [lname] => smith, [fname] => john, [username] => john, [password] => password.....)`这样，为什么我会得到上面显示的这种数组？以及我将如何访问我的数据？

每当我访问我的数据`$query['result_array']`或`$query['idno']`我收到此错误 时`Fatal error: Cannot use object of type CI_DB_pdo_result as array in C:/.........`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:23:21.280

```
$query->result_array();//get the result through array form 
```

您没有将返回的结果分配`result_array()`给任何东西。因此，当您运行时`print_r($query)`，您是在原始查询对象上执行此操作，而不是结果。`result_array()`不会通过引用或任何方式更改查询对象，您需要捕获其结果。

```
$results = $query->result_array();
print_r($results); 
```

再喝点咖啡什么的。:-p

# jquery - 页面刷新后如何保留 Cookie 值

> ID：16116098
> 
> 赞同：0
> 
> 时间：2013-04-20T03:05:05.537
> 
> 标签：jquery, cookies

我正在为用户创建一个演示面板，以便在他们到达我的演示站点时更改 Wordpress 主题的布局。用户通过选择下拉框更改值，此时设置 cookie。

我无法在页面刷新后显示我想要实现的操作。所以 cookie 保存了它的价值，但是在页面刷新后，我的 CSS 操作不会保留在原地。我对 jQuery 不是很好，所以任何帮助都将不胜感激。这是代码：

```
$('#montage-demo-panel select.body-style-layout').change(function () {

        // Apply cookie
        $.cookie('body-style-layout', $(this).val(), { path: '/' });

                    var value = $(this).val();
                    if (value == 'fixed') {
                    var wrapper = $('#wrapper');
                    var header = $('#header');
                    var masthead = $('#masthead');
                    var branding = $('#branding');

                    wrapper.removeAttr('style');
                    header.removeAttr('style');
                    masthead.removeAttr('style');
                    branding.removeAttr('style');

                    wrapper.removeClass('wrapper-full purple-header-full');
                    header.removeClass('header-full');
                    masthead.removeClass('masthead-full');
                    branding.removeClass('branding-full');
                    location.reload();

                   } else {

                    var wrapper = $('#wrapper');
                    var header = $('#header');
                    var masthead = $('#masthead');
                    var branding = $('#branding');
                    var mainbg = $('#main-bg');
                    var access = $('#access');

                    wrapper.removeClass('purple-header');

                    wrapper.addClass('wrapper-full purple-header-full');
                    header.addClass('header-full');
                    masthead.addClass('masthead-full');
                    branding.addClass('branding-full');
                    mainbg.addClass('main-bg-full');
                    access.addClass('access-full');

        // Re-fresh page
        location.reload();
                }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:24:36.737

...如果您只是在`change();`事件上应用样式，它肯定不会影响页面刷新。我建议每次刷新页面时检查 cookie 值，例如：

```
$(function(){
   var cookieval = $.cookie('cookie-key');
   if (cookieval === 'something'){
      //here implement style according to 'something'
   } else {
      //here implement another style
   }
}); 
```

祝你好运 ！！

**更新 ：**

1.  将代码放在页面中的任何位置；
2.  只需设置 cookie 并在选择更改时重新加载；像：

    ```
     $('#montage-demo-panel select.body-style-layout').change(function () {
        $.cookie('body-style-layout', $(this).val(), { path: '/' });
        location.reload();
     } 
    ```

3.  完毕。

# c# - 在 C# 中使用 SQL 使用 Combobox

> ID：16116099
> 
> 赞同：1
> 
> 时间：2013-04-20T03:05:11.783
> 
> 标签：c#, mysql, sql, wpf, button

首先，提前感谢您的任何回答。我是一个完整的菜鸟客栈 C#，到目前为止它非常有趣，但也很复杂。我的问题是这样的：

我将 SQL 数据库连接到 C#，我已经在组合框中显示了“名称”列，但我需要使用“id”列。我想用代码更容易理解。

（我不打算放连接的代码，因为我认为它是无关紧要的）。

```
private void Form1_Shown(object sender, EventArgs e)
{
    conexion.Open();
    MySqlCommand cm = new MySqlCommand("select * from tbestados", conexion);
    try
    {
        MySqlDataReader dr = cm.ExecuteReader();
        while (dr.Read())
        {
            comboBox1.Items.Add(dr["nombre"]);
        }
        dr.Close();
        dr.Dispose();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message,
                        Application.ProductName,
                        MessageBoxButtons.OK,
                        MessageBoxIcon.Error);
    }
    conexion.Close();
}

private void button1_Click(object sender, EventArgs e)
{
    //When I press this button, i want to display the "id" of my table
    MessageBox.Show(Convert.ToString(comboBox1.ValueMember));
} 
```

我将添加一些 MySql 语句以更进一步。

```
insert into tbEstados (CveEstado, Nombre) values (1, "Aguascalientes");
insert into tbEstados (CveEstado, Nombre) values (2, "Baja California");
insert into tbEstados (CveEstado, Nombre) values (3, "Baja California Sur"); 
```

所以，如果我从我的 ComboBox 中选择“Baja California Sur”，我希望我的按钮显示“3”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T03:26:55.867

我希望您的组合框代码如下所示：

```
<ComboBox  Name="comboBox1" Width="120" Height="22" ItemsSource="{Binding}"/> 
```

并更新您的代码：

```
private void Form1_Shown(object sender, EventArgs e)
{
    conexion.Open();       
    try
    {           
       MySqlDataAdapter da = new MySqlDataAdapter("select * from tbestados", conexion);
       DataSet ds = new DataSet();
       da.Fill(ds, "tbestados");
       comboBox1.ItemsSource = ds.Tables[0].DefaultView;
       comboBox1.DisplayMemberPath = ds.Tables[0].Columns["Nombre"].ToString();
       comboBox1.SelectedValuePath = ds.Tables[0].Columns["CveEstado"].ToString(); 
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message,
                        Application.ProductName,
                        MessageBoxButtons.OK,
                        MessageBoxIcon.Error);
    }
conexion.Close();
} 
```

并将您的 vbutton 点击​​更新为：

```
private void button1_Click(object sender, RoutedEventArgs e)
{     
MessageBox.Show("Selected Nombre="+comboBox1.Text+" and CveEstado="+  comboBox1.SelectedValue.ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T03:13:05.520

使用如下数据集将是一种更标准的方法。

```
DataSet ds = new DataSet();
SqlDataAdapter da = new SqlDataAdapter("SELECT Nombre,CveEstado from tbestados", s);
                da.Fill(ds, "FillDropDown");

comboBox1.ItemsSource = ds.Tables["FillDropDown"].DefaultView;
comboBox1.DisplayMemberPath = "CveEstado";
comboBox1.SelectedValuePath = "Nombre"; 
```

# actionscript-3 - 自动转到下一个场景，无需单击按钮 as3

> ID：16116100
> 
> 赞同：0
> 
> 时间：2013-04-20T03:05:18.070
> 
> 标签：actionscript-3, actionscript, flash-cs5

在一个场景中完成某个活动后，是否可以使用 acs3 进入 Flash Cs5 中的下一个场景？如果可能，如何实现？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:39:02.780

添加“ `stop`”以防止错误，然后为下一个场景编码。

```
stop();
gotoAndStop(1, "NameofYourScene"); 
```

如果您在 MovieClip 中，请更改`gotoAndStop`为`MovieClip(root).gotoAndStop`并添加`this.parent.removeChild(this);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T15:23:37.007

动作脚本 3.0

MovieClip(root).gotoAndStop(1, "NameofYourScene");

如果您在从一个场景跳到另一个场景的电影剪辑中，这对我来说没有错误

# c - 如何使用指针遍历结构中的内存块？

> ID：16116105
> 
> 赞同：0
> 
> 时间：2013-04-20T03:06:37.340
> 
> 标签：c, pointers, struct

**目标：** 遍历struct`vertices`中的内存块。`Heap`

**错误：**我`expected unqualified-id before ‘(’ token`在尝试访问`vertices`. 另外，`‘vertices’ was not declared in this scope`.

**标题：**

```
typedef struct Heap *PriorityQueue_t;
typedef struct HeapItem *PriorityItem_t;

PriorityQueue_t Init(int max_capacity, int source_vertex); 
```

**执行：**

```
#include "heap.h"
#include <stdlib.h>
#include <limits.h>

struct Heap
{
  int size;
  PriorityItem_t vertices;
};

struct HeapItem
{
  int id;
  int distance;
};

PriorityQueue_t Init(int max_capacity, int source_vertex)
{
  PriorityQueue_t Q;

  Q = (PriorityQueue_t)malloc(sizeof(PriorityQueue_t));
  Q->vertices = (PriorityItem_t)malloc(sizeof(PriorityItem_t)*max_capacity);

  Q->size = max_capacity;

  int i;
  for(i = 0; i < Q->size; i++)
  {
    Q->(vertices + i)->id = i; //Errors on this line.
    Q->(vertices + i)->distance = INT_MAX;
  }
  Q->(vertices + source_vertex)->distance = 0;

  return Q;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T03:10:41.943

您将括号放在错误的位置。尝试这个：

```
 (Q->vertices + i)->id = i; //Errors on this line.
    (Q->vertices + i)->distance = INT_MAX;
  }
  (Q->vertices + source_vertex)->distance = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T03:12:19.390

```
Q->(vertices + i)->id = i; //Errors on this line.
Q->(vertices + i)->distance = INT_MAX;
Q->(vertices + source_vertex)->distance = 0; 
```

你不能那样做...

```
Q->vertices[i].id = i;
(Q->vertices + i)->distance = INT_MAX;
(*(Q->vertices + source_vertex)).distance = 0;  // Not sensible, but legal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:45:20.200

您可以通过使用普通索引和删除强制转换来避免大量括号：

```
PriorityQueue_t Init(int max_capacity, int source_vertex)
{
  PriorityQueue_t Q;

  Q = malloc(sizeof *Q);
  Q->vertices = malloc(max_capacity * sizeof *Q->vertices);

  Q->size = max_capacity;

  int i;
  for(i = 0; i < Q->size; i++)
  {
    Q->vertices[i].id = i;
    Q->vertices[i].distance = INT_MAX;
  }
  // maybe add next line: 
  // assert (source_vertex >=0 && source_vertex < Q->size);
  Q->vertices[source_vertex].distance = 0;

  return Q;
} 
```

# angularjs - 从指令的编译中访问服务

> ID：16116107
> 
> 赞同：2
> 
> 时间：2013-04-20T03:06:46.753
> 
> 标签：angularjs, angularjs-directive

我很难访问指令中的服务。我通过 $http 和 $q 定义我的服务，并将其注入到我的指令中。但我无法获得访问服务的指令。

服务.js

```
'use strict';
var app = angular.module('App.services', []);

app.factory('Classification', function($http,$q) {
    return {
        query: function getAll() {
            var deferred = $q.defer();
            $http.get('index.php/classifications').then(function(classi) { 
                deferred.resolve(classi.data);
            }, function getWebsitesError(reason) {
                deferred.reject(reason);
            });
            return deferred.promise;
        }
    };
}); 
```

应用程序.js

```
'use strict';

/* App Module */
var app = angular.module('App', ['App.controllers', 'App.services', 'App.directives',  'ui']);

app.config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/', {templateUrl: 'partials/welcome.html'}).
      when('/websites/:websiteId', {templateUrl: 'partials/website/details.html',     controller: 'WebsiteDetailsCtrl'}).
      otherwise({redirectTo: '/'});
}]); 
```

和我的directive.js：

```
'use strict';
var app = angular.module('App.directives', ['App.services']);

app.directive("regionselect",['Classification', '$compile', function($compile, Classification){
    Classification.query();<-- Throw an exception : has no method query()
    return{
        restrict : "E",
        templateUrl : "/js/directives/locationSelect3.html",
        transclude: true,
        compile: function (tElement, tAttr, transclude){
            var loaded = false;                
        }
    };
}]); 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T03:28:07.417

会不会是订单？

```
app.directive("regionselect",['Classification', '$compile', function($compile, Classification){ 
```

你声明

```
['Classification', '$compile', 
```

但函数说

```
function($compile, Classification){ 
```

这是倒退。

# c# - 获取 InvalidCastException 未处理

> ID：16116108
> 
> 赞同：0
> 
> 时间：2013-04-20T03:06:51.457
> 
> 标签：c#, c#-4.0, datatable, .net

这是对@Tim Schmelter 今天下午早些时候向我指出正确方向的一些实验代码的看法。其中大部分与之前的工作几乎完全相同，但它会`invalidCastException`在最后一行或倒数第二行抛出 a，这取决于我尝试的方式。我不明白为什么会这样。

```
Boolean test = false;
string filePathStudent = System.IO.Path.GetFullPath("StudentInfo.txt");
DataTable studentDataTable = new DataTable();

studentDataTable.Columns.Add("Id", typeof(int));
studentDataTable.Columns.Add("StudentID");
studentDataTable.Columns.Add("FirstName");
studentDataTable.Columns.Add("LastName");
studentDataTable.Columns.Add("StreetAdd");
studentDataTable.Columns.Add("City");
studentDataTable.Columns.Add("State");
studentDataTable.Columns.Add("Zip");
studentDataTable.Columns.Add("Choice1");
studentDataTable.Columns.Add("CreditHrs1");
studentDataTable.Columns.Add("Choice2");
studentDataTable.Columns.Add("CreditHrs2");
studentDataTable.Columns.Add("Choice3");
studentDataTable.Columns.Add("CreditHrs3");
studentDataTable.Columns.Add("Choice4");
studentDataTable.Columns.Add("CreditHrs4");
studentDataTable.Columns.Add("Choice5");
studentDataTable.Columns.Add("CreditHrs5");
studentDataTable.Columns.Add("Choice6");
studentDataTable.Columns.Add("CreditHrs6");

foreach (string line in File.ReadLines(filePathStudent))
{
    DataRow row = studentDataTable.Rows.Add();
    string[] fields = line.Split(new[] { (char)9 });
    int id;
    if (fields.Length == 19 && int.TryParse(fields[0], out id))
    {
        row.SetField("Id", id);
        row.SetField("StudentID", fields[1]);
        row.SetField("FirstName", fields[2]);
        row.SetField("LastName", fields[3]);
        row.SetField("StreetAdd", fields[4]);
        row.SetField("City", fields[5]);
        row.SetField("State", fields[6]);
        row.SetField("Zip", fields[7]);
        row.SetField("Choice1", fields[8]);
        row.SetField("CreditHrs1", fields[9]);
        row.SetField("Choice2", fields[10]);
        row.SetField("CreditHrs2", fields[11]);
        row.SetField("Choice3", fields[12]);
        row.SetField("CreditHrs3", fields[13]);
        row.SetField("Choice4", fields[14]);
        row.SetField("CreditHrs4", fields[15]);
        row.SetField("Choice5", fields[16]);
        row.SetField("CreditHrs5", fields[17]);
        row.SetField("Choice6", fields[18]);
        row.SetField("CreditHrs6", fields[19]);
    }
}

using (StreamReader reader = new StreamReader(filePathStudent))
{
    String line1 = reader.ReadLine();
    if (line1 == null)
        maxIDStdTable = 0;
    else
        test = true;

    reader.Dispose();
    reader.Close();
}

if(test)
    int maxIDStdTable = studentDataTable.AsEnumerable().Max(r => r.Field<int>("Id"));
    //int maxIDStdTable = (int)studentDataTable.Compute("Max(Id)", ""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:36:15.880

它可能不是最好的解决方案，但它确实有效。

```
 string filePathStudent = System.IO.Path.GetFullPath("StudentInfo.txt");
        DataTable studentDataTable = new DataTable();

        studentDataTable.Columns.Add("Id", typeof(Int32));
        studentDataTable.Columns.Add("StudentID");
        studentDataTable.Columns.Add("FirstName");
        studentDataTable.Columns.Add("LastName");
        studentDataTable.Columns.Add("StreetAdd");
        studentDataTable.Columns.Add("City");
        studentDataTable.Columns.Add("State");
        studentDataTable.Columns.Add("Zip");
        studentDataTable.Columns.Add("Choice1");
        studentDataTable.Columns.Add("CreditHrs1");
        studentDataTable.Columns.Add("Choice2");
        studentDataTable.Columns.Add("CreditHrs2");
        studentDataTable.Columns.Add("Choice3");
        studentDataTable.Columns.Add("CreditHrs3");
        studentDataTable.Columns.Add("Choice4");
        studentDataTable.Columns.Add("CreditHrs4");
        studentDataTable.Columns.Add("Choice5");
        studentDataTable.Columns.Add("CreditHrs5");
        studentDataTable.Columns.Add("Choice6");
        studentDataTable.Columns.Add("CreditHrs6");

        // Read in a file line-by-line, and store it
        var txtFileLine = File.ReadAllLines(filePathStudent).ToList();

        //Reads line splits data to colums at tab (ASCII value 9)
        txtFileLine.ForEach(line => studentDataTable.Rows.Add(line.Split((char)9)));

        List<int> rowsForColumn1 = studentDataTable.AsEnumerable().Select(x => x.Field<int>(0)).ToList();

        //Tests for empty Datatable
        foreach (DataRow row in studentDataTable.Rows)
        {
            if (row.IsNull("Id"))
                break;
            else
                //get max value from "Id" row.
                maxIDStdTable = rowsForColumn1.Max();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:10:56.730

您犯了两个错误： 1）您使用[DataTable.NewRow()](http://msdn.microsoft.com/en-us/library/system.data.datatable.newrow.aspx)
创建了新的 2）设置后您必须将其添加到with 中。 更新您的代码并尝试： `DataRow`
`DataRow``DataTable``DataTable.Rows.Add(youDataRow)`

```
 foreach (string line in File.ReadLines(filePathStudent))
    {
        DataRow row = studentDataTable.NewRow();
        string[] fields = line.Split(new[] { (char)9 });
        int id;
        if (fields.Length == 19 && int.TryParse(fields[0], out id))
        {
            row["Id"]= id;
            row["StudentID"]= fields[1];
            row["FirstName"]= fields[2];
            row[LastName"]= fields[3];
            row["StreetAdd"]= fields[4];
            row["City"]=fields[5];
            row["State"]= fields[6];
            row["Zip"]=fields[7];
            row["Choice1"]= fields[8];
            row["CreditHrs1"]= fields[9];
            row["Choice2"]= fields[10];
            row["CreditHrs2"]= fields[11];
            row[("Choice3"]= fields[12];
            row["CreditHrs3"]=, fields[13];
            row["Choice4"]= fields[14];
            row["CreditHrs4"]= fields[15];
            row["Choice5"]= fields[16];
            row["CreditHrs5"]= fields[17];
            row["Choice6"]= fields[18];
            row["CreditHrs6"] =fields[19];
        }
       studentDataTable.Rows.Add(row);

    } 
```

# javascript - 之前更快地追加或创建 html 元素？-- jQuery

> ID：16116109
> 
> 赞同：0
> 
> 时间：2013-04-20T03:07:06.280
> 
> 标签：javascript, jquery, html, performance

我正在努力使我的应用程序更快。我希望某些元素仅在 ajax 请求成功时出现。请求成功时使用 append 创建元素是否更快，或者在实际 html 中创建 html 元素并使用 .html 将内容插入元素中是否更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:13:32.930

根据这个[JSPerf](http://jsperf.com/jquery-append-vs-html/4)：普通的旧`innerHTML`节拍`.html()`（和`.html()`节拍`.append()`）。

但是根据这个[JSPerf](http://jsperf.com/dom-vs-innerhtml/18)：`DOM`beats `innerHTML`。

因此，可能想研究[`documentFragment`](https://developer.mozilla.org/en-US/docs/DOM/documentFragment)DOM1 中指定的，甚至 IE6 中的支持（因此没有理由不使用它）。

由于文档片段在内存中而不是主 DOM 树的一部分，因此将子片段附加到它不会导致页面“回流”（计算元素的位置和几何形状）。因此，使用文档片段通常会带来更好的性能。

[John Resig 在这里](http://ejohn.org/blog/dom-documentfragments/)写了一篇很好的文章并得出结论：

> 在现代 Web 开发中很大程度上被忽略的方法可以为您的 DOM 操作提供一些严重的（2-3 倍）性能改进。

您可能只想在*每个*要优化的情况下组合其中的一些技术。

希望这可以帮助！

# java - 如何优化此字符串搜索/替换方法？

> ID：16116110
> 
> 赞同：0
> 
> 时间：2013-04-20T03:07:17.363
> 
> 标签：java, string, search, optimization, replace

我正在实现我自己的网络服务器。以下方法搜索服务器端包含并适当地构建 html 页面。

`public String getSSI(String content) throws IOException {`

 ````
 String beginString = "<!--#INCLUDE VIRTUAL=\"";
    String endString = "\"-->";

    int beginIndex = content.indexOf(beginString);
    while (beginIndex != -1) {
        int endIndex = content.indexOf(endString, beginIndex);
        String includePath = content.substring(beginIndex+beginString.length(), endIndex);

        File includeFile = new File(BASE_DIR+includePath);
        byte[] bytes = new byte[(int) includeFile.length()];
        FileInputStream in = new FileInputStream(includeFile);    
        in.read(bytes);
        in.close();

        String includeContent = new String(bytes);
        includeContent = getSSI(includeContent);

        content = content.replaceAll(beginString+includePath+endString, includeContent);

        beginIndex = content.indexOf(beginString);
    }

    return content;
} 
````  `我知道 StringBuilder 比 String 快，但是我能做的就是优化它吗？将原始数据读入字节数组并转换为String，此时将其传递给该方法，并将输出转换回字节数组并发送给客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:35:56.787

我不知道这会产生多大的影响，但是您可以使用[IOUtils toString(InputStream)](http://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream,%20java.nio.charset.Charset%29)方法直接读取字符串，而不是读取字节数组并转换为字符串。同样，您可以[将 String 直接写入 OutputStream](http://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/IOUtils.html#write%28java.lang.CharSequence,%20java.io.OutputStream,%20java.nio.charset.Charset%29)。`

# javascript - 更新父页面上的 Div，最好使用 jQuery

> ID：16116113
> 
> 赞同：1
> 
> 时间：2013-04-20T03:07:43.050
> 
> 标签：javascript, jquery

我之前使用过 jQuery 的 .html() 函数来更新内容，但它一直在 .ajax() 函数中，例如：

```
$.ajax({
       padding : 15,
       type    : "POST",
       cache   : false,
       url     : "anyPage.php?page=ajax",
       data    : $(this).serializeArray(),
       success: function(data) {
        $("#Div").html(data);   
       }
      }); 
```

问题是，为了使用 TinyMCE，我必须在 iframe 内的 Fancybox 中打开它，但我遇到了发布数据的问题，通过将表单提交到 PHP $_GET URL 解决了这个问题（很确定这不是它实际上被称为），然后关闭 Fancybox：

```
<? if($_GET['page'] == "X"){
$_SESSION["X"] = $_POST['X']; 
echo '<script type="text/javascript">
    parent.$.fancybox.close();
</script>';
die();} ?> 
```

这成功地将 Post 变量传递到 Session 变量中，然后我可以从主页内部调用它。问题是，我还想刷新主页上的 div，但遇到了问题。

我不认为我可以使用 .ajax()，至少我没有任何运气尝试使用它。

我也尝试过使用 .html() 和 .load() 与 .parent() 之类的不同组合。我尝试过的几个例子（其他的早就被覆盖了）：

```
parent.document.getElementById("Div").innerHTML = "something"; 
```

和

```
parent.$("Div").html("Some updated text"); 
```

插入两者如下：

```
echo '<script type="text/javascript">
    parent.$("Div").html("Some updated text");
    parent.$.fancybox.close();
</script>'; 
```

还没有找到任何可行的方法。想知道是否有人可以借给我一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:29:32.557

如果域匹配，则在 iframe 和父文档中，您应该能够使用以下任一方式访问父文档：

```
window.parent
parent
top          // If the parent is the top-level document
window.top 
```

因为`parent`并且`top`可以被javascript覆盖，所以我会选择`window.parent`或`window.top`

# php - 为什么 PHP 中的类函数末尾不需要分号？

> ID：16116114
> 
> 赞同：-1
> 
> 时间：2013-04-20T03:07:51.707
> 
> 标签：php

例如...

```
public function processRowSet($rowSet, $singleRow = false){
    $resultArray = array();
    while($row = mysql_fetch_assoc($rowSet)){
        array_push($resultArray, $row);
    };

    if ($singleRow === true){
        return $resultArray[0];
    };

    return $resultArray;
}
...and then the next line continues without an issue 
```

当我第一次开始使用 OOP PHP 时，我犯了在末尾添加分号的错误，我花了大约一个小时才弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T03:12:30.703

为什么？

因为 PHP 编程语言的作者是这样设计语言的。

当您在 php 中创建一些代码时，会发生以下过​​程：

1.  预解析器解析您的文件，查找语法错误。
2.  后解析器解析您的文件，查找运行时错误。
3.  文件内容变为汇编代码。
4.  汇编代码变为机器代码，然后运行您的程序。

编程语言的作者使解析器允许在语句后使用分号，这就是允许您这样做的原因。（他们使用括号代替）。

一些编程语言要求您使用分号，因为解析过程可能很难实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T03:20:53.103

区别在于语句和表达式：

*   if 语句、while 语句、函数等是不需要以分号结尾的*语句。*
*   实际命令是*表达式*（即`$foo = bar()`）。独立表达式需要分号，可能是因为它们没有大括号来表示表达式结束。

PHP 从 C 中借用了这种语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T03:30:09.020

总而言之，您永远不需要在闭括号之后使用分号。您的代码应如下所示：

```
public function processRowSet($rowSet, $singleRow = false){
    $resultArray = array();
    while($row = mysql_fetch_assoc($rowSet)){
        array_push($resultArray, $row);
    }

    if ($singleRow === true){
        return $resultArray[0];
    }

    return $resultArray;
} 
```

分号本身被视为 Null 语句（什么也不做）。这就是为什么一个常见的错误是编写如下循环：

```
for ($a=0; $a=10; $a++); 
    print $a; 
```

循环后的分号是什么都不做的命令，它将执行（无）10 次，然后打印出“11”。这相当于写：

```
for ($a=0; $a=10; $a++) {
    ; // do nothing
}
print $a; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T03:16:11.020

许多编程语言不需要语句结束，即。';' 在功能块或任何其他类型的块语句之后，例如 if、for、while 。我们没有通过终止符定义块的结尾，因为块已经被限制在 {} 中。这是由于语言解析器/编译器如何执行代码。

# serial-port - Arduino 串行写入

> ID：16116117
> 
> 赞同：2
> 
> 时间：2013-04-20T03:08:34.347
> 
> 标签：serial-port, arduino

我正在尝试使用ardunon Serial.write（buf，leng）。这是我的代码

```
byte buf[] = {125, 126, 127, 128, 129};

void setup() {
  // initialize serial:
  Serial.begin(9600);

}

void loop() {
  int i = Serial.write(buf, sizeof(buf));
  Serial.println(i);
  delay(1000);
} 
```

但是，当我打开串行监视器时，它会打印出来

```
}~   5
}~   5
}~   5
}~   5 
```

首先，我读到 write 将二进制数据写入串行端口，而 print 是 ascii 字符。我怎么会看到ascii字符？

第二个问题是为什么没有超过 127 出现？

每当我 Serial.write(>127) 它总是在串行监视器中显示一个愚蠢的输出？

是不是因为电脑端的串口？

我的主要目标是一次将 32 个字节全部写入串行，以便它们都在我的 xbee 传输包的相同有效负载中。??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T03:41:53.663

输出是正确的。您正在编写二进制数据，但您试图将它们视为 ASCII，这就是为什么您看到例如`}`而不是`125`，因为一个字节 125 表示`}`ASCII。`125`将需要 3 个字节显示为 ASCII。

当您写入大于 127 的字节时，您会看到奇怪的东西，因为 ASCII 仅包含 128 个字符（0 到 127）的定义。

如果在接收电路上您想读取与此处代码中完全相同的数组，那么您的草图就可以了。您只需要使用某种“串行读取”，并根据需要使用数字，记住每个数字都有一个字节大小。

另一方面，如果您想在串行监视器上查看以 ASCII 字符表示的数字，则必须将这些数字转换为 ASCII 代码，或者使用以下`println`函数将数字打印为整数的循环：

```
int numbers[] = {125, 126, 127, 128, 129};
for(int i = 0; i < (sizeof(numbers) / sizeof(numbers[0])); i++)
    Serial.println(numbers[i]); 
```

# c# - Autofac：如何注入具有动态值的属性？

> ID：16116121
> 
> 赞同：2
> 
> 时间：2013-04-20T03:08:55.507
> 
> 标签：c#, .net, autofac

通过 Autofac，可以很容易地将静态值注入到`CurrentDate`给定程序集中的类实例中：

```
builder.RegisterApiControllers(asm).WithProperty("CurrentDate", new DateTime(2012, 1, 13)); 
```

但是，如何将动态值（例如 a 返回的值）注入`lamda () => { return DateTime.Now; }`属性`CurrentDate`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:16:09.907

听起来您可以使用非常标准的属性注入，如下所示：

```
builder.RegisterApiControllers(asm)
    .OnActivating(e => { e.Instance.CurrentDate = DateTime.Now; }); 
```

请注意，您可能需要强制转换`e.Instance`，因为它可能是 Object 类型。

有关更多信息，请参阅[文档中的 Lifetime Events 。](https://code.google.com/p/autofac/wiki/LifetimeEvents)

再想一想，为什么不把初始化放在基类构造函数中呢？

```
public DateTime CurrentDate { get; private set; }
protected ApiController() { CurrentDate = DateTime.Now; } 
```

当前日期并不是您需要 DI 容器提供的真正依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:41:38.943

您需要像这样编写自定义参数：

```
public class DelegateParameter : Parameter
{
    private readonly string _name;
    private readonly Func<object> _getValue;

    public DelegateParameter(string name, Func<object> getValue)
    {
        if (name == null) throw new ArgumentNullException("name");
        if (getValue == null) throw new ArgumentNullException("getValue");
        _name = name;
        _getValue = getValue;
    }

    public override bool CanSupplyValue(ParameterInfo pi, IComponentContext context, out Func<object> valueProvider)
    {
        PropertyInfo propertyInfo = GetProperty(pi);
        if (propertyInfo == null || propertyInfo.Name != _name)
        {
            valueProvider = null;
            return false;
        }
        valueProvider = _getValue;
        return true;
    }

    private static PropertyInfo GetProperty(ParameterInfo pi)
    {
        var methodInfo = pi.Member as MethodInfo;
        if (methodInfo != null && methodInfo.IsSpecialName && (methodInfo.Name.StartsWith("set_", StringComparison.Ordinal) && methodInfo.DeclaringType != null))
            return methodInfo.DeclaringType.GetProperty(methodInfo.Name.Substring(4));
        return null;
    }
} 
```

然后使用它：

```
builder.RegisterApiControllers(asm).WithProperty(new DelegateParameter("CurrentDate", () => DateTime.Now)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:29:07.700

注册另一个提供您的动态值的服务（例如`IDateTimeService`）[我认为它确实比您想要的 DateTime 更复杂。] 这个新服务的默认生命周期将是[每个依赖项的实例，](https://code.google.com/p/autofac/wiki/InstanceScope)但您可以使用“Per Matching Lifetime Scope”。您的控制器将已根据 Http 请求创建。

`IDateTimeService`现在只需在（在构造函数中）添加来自控制器的依赖项。在该控制器中的方法中，您现在可以从该服务中获取您想要的动态值。

```
private static readonly IDateTimeService datetimeService;

public MyController (IDateTimeService datetimeService)
{
   this.datetimeService = datetimeService;
}

public void SomeMethod()
{
     var date = datetimeService.GetDate();
     ...
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-20T03:43:34.867

如果您尝试注入 lambda 表达式，而不是 lambda 表达式的结果，那么您有很多不完美的选择。这里仅仅是少数; 我敢肯定还有更多。

## 自动法

Google Project Hosting 上的 Autofac wiki[记录了四种注入属性的方法](https://code.google.com/p/autofac/wiki/PropertyInjection)。其中三个似乎使用常量或默认值——您提到了其中一种方法。

最终似乎让开发人员对属性有更多的控制权。它使用[OnActivating](https://code.google.com/p/autofac/wiki/LifetimeEvents)事件，在此期间您有几个选项。你可以：

*   设置属性并希望它坚持下去。
*   如果该属性缺少可访问的设置器，您可以使用反射来设置它，或者它的支持属性（默认情况下，m_PropertyName 用于名为 PropertyName 的属性，如果我没记错的话）。
*   正如他们所说，将实例包装在代理中：请参阅下面的**多态性**。

## 多态性

让`ClassA`包含要修改的属性，`Prop1`。创建一个`ClassB`扩展的新类`ClassA`。如果`Prop1`有`virtual`修饰符，您可以覆盖它。否则，使用`new`修饰符创建`ClassB`包含动态代码的类似属性。

在覆盖的情况下，您将需要实例化`ClassB`来代替`ClassA`. 如果框架创建了自己的 实例，这将不起作用`ClassA`，但只要您创建自己的实例`ClassB`并将它们传递给框架，就可以了。

如果您使用的是新属性，除了实例化之外`ClassB`，您还必须确保每当您访问新属性时，对象都被强制转换`ClassB`为后代类型。如果另一个框架被设计为使用，这通常不起作用`ClassA`，因为它总是在 type 上运行`ClassA`，而不是`ClassB`，不管你的转换如何。

## 字节码操作

这是令人讨厌的东西，但它会做你想要的。C# 通常编译为称为 CIL 的汇编/字节码语言。Microsoft 的变体是 MSIL，但它与通用 CIL 几乎相同。

我一直使用[Mono.Cecil](http://www.mono-project.com/Cecil)进行 CLI/CLR（.NET、Mono）字节码操作。它似乎完美无缺，一旦你掌握了它，它就会非常好。但是，您必须知道两件事：

1.  如何使用 CIL
2.  如何使用 Mono.Cecil

第一个没那么糟糕。只要您有足够的 CLI 经验，您就只需要几个带有详细表格的 Wikipedia 页面。如果您认为 CLI 仅代表“命令行界面”，那么您可能会遇到困难。

另一方面，截至大约一年前（2012 年），Mono.Cecil 缺乏任何形式的适当文档。学习曲线非常陡峭。我苦苦挣扎了几天试图弄清楚。不过，当它起作用时，它是惊人的。

# exception - 从文本文档读取时出现 FileNotFoundException

> ID：16116122
> 
> 赞同：0
> 
> 时间：2013-04-20T03:09:31.697
> 
> 标签：exception, java.util.scanner

我正在尝试从

```
public static void printLines(String doc){

    Scanner input = null;
    input = new Scanner(doc + ".txt")); 

    while(input.hasNext()){

        String nextLine = input.nextLine();
        System.out.println(nextLine);

    }

    input.close;

} 
```

上面的代码来自一个接受 String doc 作为参数的方法，并打印出每一行。在我的 main 中，我使用了 try catch 块来捕获 FileNotFoundException。但是，当我尝试运行该程序时，它总是会遇到 FileNotFoundException。

我正在使用 Eclipse，文本文件和 java 文件都在同一个“Java 项目”中。我的方法无法读取文本文件有什么原因吗？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T04:12:41.397

尝试打印`doc`它的内部。它也可能包括文件的扩展名。

例如，如果文档是`/home/user/Desktop/mySample.txt`Scanner 将尝试查找`/home/user/Desktop/mySample.txt.txt`不可用的文档，因为您正在`.txt`再次连接扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T03:57:49.247

您收到 FileNotFoundException 的原因是您使用了错误的 Scanner 构造函数。

更改`input = new Scanner(doc + ".txt"));`为

`input = new Scanner(new File(doc + ".txt")));`应该适合您的需要。

# css - 编辑 Reddit 增强套件的用户栏

> ID：16116123
> 
> 赞同：0
> 
> 时间：2013-04-20T03:09:46.050
> 
> 标签：css, html, reddit

我目前正在尝试为我的 subreddit 编辑 RES 用户栏。它看起来像这样：

![这个](https://i.imgur.com/BIPuvbv.png)

它也崩溃了。

我想将几乎所有元素都向右浮动，以便它们垂直排列。该栏的 html 是：

```
<div id="header-bottom-right" class="res-navTop">
  <div id="userbarToggle" title="Toggle Userbar" class="userbarHide">»</div>
  <span class="user">
    <a href="http://www.reddit.com/user/snowe2010/" style="margin-right: 2px;">
      snowe2010
    </a>
    <span id="RESAccountSwitcherIcon"></span>
    &nbsp;(
    <span class="userkarma" title="">
      <a title="link karma" href="/user/snowe2010/submitted/">9</a> 
      · 
      <a title="comment karma" href="/user/snowe2010/comments/">
      2170
      </a>
    </span>
    )
    </span>
    <span class="separator">|</span>
    <a title="no new mail" href="http://www.reddit.com/message/inbox/" class="nohavemail" id="mail"></a>
    <a id="mailCount" href="/message/unread/"></a>
    <span class="separator">|</span>
    <a title="no new mod mail" href="http://www.reddit.com/message/moderator/" class="nohavemail" id="modmail">mod messages</a>
    <span class="separator">|</span>
    <ul class="flat-list hover">
      <li>
        <a href="http://www.reddit.com/prefs/" class="pref-lang">preferences</a></li>
  </ul>
  <span class="separator">|</span>
  <span id="openRESPrefs">
    <span id="RESSettingsButton" title="RES Settings" class="gearIcon newNotification">
    </span>
  </span>
  <span class="separator">|</span>
  <form method="post" action="/logout" class="logout hover">
    <input type="hidden" name="uh" value="zoimwqbhhl59526448277e691374c3d0bc47706bb35d0045b9">
    <input type="hidden" name="top" value="off">
    <a href="javascript:void(0)" onclick="$(this).parent().submit()">logout</a>
  </form>
</div> 
```

我目前尝试将每个元素设置为一个块，然后向右浮动，但这不起作用。我也尝试将它们设置为 display: table-cell; 并对齐它，但这也不起作用。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:24:13.573

```
#header-bottom-right a {
    display: block;
    float: right;
}

#header-bottom-right .separator { display: none; } 
```

这是一种非常粗略的方法，但它是一个开端。如果您想继续使用这种方法，则有足够的空间来平滑粗糙的边缘。

![](https://i.stack.imgur.com/wCXqD.png)

# struts2 - 如何将 Struts 约定与 Tiles 集成以保持约定的好处

> ID：16116142
> 
> 赞同：4
> 
> 时间：2013-04-20T03:13:34.660
> 
> 标签：struts2, tiles, tiles-3

如何在保持约定好处的同时将 Struts 约定与 Tiles 集成？

问题是约定会自动将 url-to-action-to-result 链接到 jsp、velocity 和 freemarker 结果。它不希望处理瓷砖结果。

当使用瓦片时，我们通常希望我们的所有 UI 操作（与 json/xml 服务操作相反）都使用瓦片，但这样做我们失去了结果组件的约定并需要使用注释。注释允许我们偏离预期，但在大型应用程序中，当期望使用瓷砖时，这是一个烦恼。进一步的约定允许我们仅通过指定视图来创建操作。我们也希望在使用瓷砖时保留这种好处。为了纠正这个问题，我们需要建立一个约定，将切片结果传递给我们，这样我们就不需要使用注释来将动作绑定到切片结果，并且我们可以继续创建没有动作类的 JSP，这将获得好处约定（无 xml）和瓦片的好处（所有样板都被分解为瓦片）。

如何做到这一点？

*这是一个自我回答，以帮助希望解决此问题的其他人*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T03:57:36.157

以下是所需的步骤：

*   创建自定义切片结果，该结果动态构建一个“位置”字符串（位置字符串是传递给切片的值），其中考虑了命名空间 actionName。
*   创建一个使用此结果的包（名为“tiles”）并约定将其用作父包
*   实现并注册一个“com.opensymphony.xwork2.UnknownHandler”，这一步是最关键的，因为当结果无法解析时会调用这个处理程序
*   使用从第一步传入的“位置”的瓷砖定义

以上步骤需要struts.xml中的以下内容

```
<struts>
   <constant name="struts.convention.default.parent.package" value="tiles-package"/>
   <bean type="com.opensymphony.xwork2.UnknownHandler" name="tilesUnknownHandler" class="com.kenmcwilliams.tiles.result.TilesUnknownHandler"/>

   <package  name="tiles-package" extends="convention-default">
      <result-types>
         <result-type default="true" name="tiles" class="com.kenmcwilliams.tiles.result.TilesResult"/>
      </result-types>
   </package>   
</struts> 
```

自定义结果类型实现：

```
package com.kenmcwilliams.tiles.result;

import com.opensymphony.xwork2.ActionInvocation;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.servlet.ServletContext;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.struts2.ServletActionContext;
import org.apache.struts2.dispatcher.ServletDispatcherResult;
import org.apache.tiles.TilesContainer;
import org.apache.tiles.access.TilesAccess;
import org.apache.tiles.request.ApplicationContext;
import org.apache.tiles.request.servlet.ServletRequest;
import org.apache.tiles.request.servlet.ServletUtil;

public class TilesResult extends ServletDispatcherResult {

    private static final Logger log = Logger.getLogger(TilesResult.class.getName());

    public TilesResult() {
        super();
    }

    public TilesResult(String location) {
        super(location);
    }

    @Override
    public void doExecute(String location, ActionInvocation invocation) throws Exception {
        //location = "test.definition"; //for test
        log.log(Level.INFO, "TilesResult doExecute() location: {0}", location);
        //Start simple conventions
        //
        if (/** tiles && **/location == null) {
            String namespace = invocation.getProxy().getNamespace();
            String actionName = invocation.getProxy().getActionName();
            location = namespace + "#" + actionName + ".jsp"; //Warning forcing extension
            log.log(Level.INFO, "TilesResult namespace: {0}", namespace);
            log.log(Level.INFO, "TilesResult actionName: {0}", actionName);
            log.log(Level.INFO, "TilesResult location: {0}", location);
        }
        //End simple conventions
        setLocation(location);
        ServletContext context = ServletActionContext.getServletContext();
        ApplicationContext applicationContext = ServletUtil.getApplicationContext(context);
        TilesContainer container = TilesAccess.getContainer(applicationContext);
        HttpServletRequest request = ServletActionContext.getRequest();
        HttpServletResponse response = ServletActionContext.getResponse();
        ServletRequest servletRequest = new ServletRequest(applicationContext, request, response);
        container.render(location, servletRequest);
    }
} 
```

TilesUnknownHandler 实现：

```
package com.kenmcwilliams.tiles.result;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ObjectFactory;
import com.opensymphony.xwork2.Result;
import com.opensymphony.xwork2.XWorkException;
import com.opensymphony.xwork2.config.Configuration;
import com.opensymphony.xwork2.config.entities.ActionConfig;
import com.opensymphony.xwork2.config.entities.ResultConfig;
import com.opensymphony.xwork2.config.entities.ResultConfig.Builder;
import com.opensymphony.xwork2.inject.Container;
import com.opensymphony.xwork2.inject.Inject;
import flexjson.JSONSerializer;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.servlet.ServletContext;
import org.apache.commons.lang.StringUtils;
import org.apache.struts2.convention.ConventionUnknownHandler;

public class TilesUnknownHandler extends ConventionUnknownHandler {

    private static final Logger log = Logger.getLogger(TilesUnknownHandler.class.getName());
    private static final String conventionBase = "/WEB-INF/content";

    @Inject
    public TilesUnknownHandler(Configuration configuration, ObjectFactory objectFactory,
            ServletContext servletContext, Container container,
            @Inject("struts.convention.default.parent.package") String defaultParentPackageName,
            @Inject("struts.convention.redirect.to.slash") String redirectToSlash,
            @Inject("struts.convention.action.name.separator") String nameSeparator) {
        super(configuration, objectFactory, servletContext, container, defaultParentPackageName,
                redirectToSlash, nameSeparator);
        log.info("Constructed TilesUnknownHandler");
    }

    @Override
    public ActionConfig handleUnknownAction(String namespace, String actionName)
            throws XWorkException {
        ActionConfig actionConfig;
        log.info("TilesUnknownHandler: before handleUnknownAction");
        ActionConfig handleUnknownAction = super.handleUnknownAction(namespace, actionName);

        log.info("TilesUnknownHandler: after handleUnknownAction, returning with:");
        log.log(Level.INFO, "...ActionConfig value: {0}", (new JSONSerializer().serialize(handleUnknownAction)));
        log.log(Level.INFO, "Modifying handleUnknowAction result handler");

        Map<String, ResultConfig> results = handleUnknownAction.getResults();
        ResultConfig resultConfig = results.get("success");
        Builder builder = new ResultConfig.Builder("com.opensymphony.xwork2.config.entities.ResultConfig", "com.kenmcwilliams.tiles.result.TilesResult");
        Map<String, String> params = resultConfig.getParams();

        String tilesResultString = null;
        String location = params.get("location");
        if (location != null && !location.isEmpty()) {
            int length = conventionBase.length();

            if(StringUtils.startsWith(location, conventionBase)){
                String subString = location.substring(length); //chop off "/WEB-INF/content"
                int count = StringUtils.countMatches(subString, "/");//TODO: maybe check for "//", although I don't know why it would be in the string
                if (count == 1){//empty namespace
                    tilesResultString = subString.replaceFirst("/", "#"); //TODO: because I am doing a straight replacement of the last element the else can probably be removed
                }else{ //replace the last slash between the namespace and the file with "#"
                    int lastIndex = subString.lastIndexOf("/");
                    //subString.substring(lastIndex, lastIndex);
                    String nameSpace = subString.substring(0, lastIndex);
                    String file = subString.substring(lastIndex + 1);
                    tilesResultString = nameSpace + "#" + file;
                }
            }
        }

        Map<String, String> myParams = new LinkedHashMap<String, String>();
        myParams.put("location", tilesResultString);

        builder.addParams(myParams);
        ResultConfig build = builder.build();
        Map<String, ResultConfig> myMap = new LinkedHashMap<String, ResultConfig>();
        myMap.put("success", build);
        log.log(Level.INFO, "\n\n...results: {0}\n\n", (new JSONSerializer().serialize(results)));
        actionConfig = new ActionConfig.Builder(handleUnknownAction).addResultConfigs(myMap).build();
        //className("com.kenmcwilliams.tiles.result.TilesResult")
        return actionConfig;
    }

    @Override
    public Result handleUnknownResult(ActionContext actionContext, String actionName,
            ActionConfig actionConfig, String resultCode) throws XWorkException {
        log.info("TilesUnknownHandler: before handleUnknownResult");
        Result handleUnknownResult = super.handleUnknownResult(actionContext, actionName, actionConfig, resultCode);
        log.info("TilesUnknownHandler: after handleUnknownResult, returning with:");
        log.log(Level.INFO, "...Result value: {0}", (new JSONSerializer().serialize(handleUnknownResult)));
        return handleUnknownResult;
    }
} 
```

如何使用我们的“位置”字符串的示例，其形式为：NameSpace + "#" + ActionName + ".jsp"，请注意以下定义`<definition name="REGEXP:(.*)#(.*)" extends="default">`：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE tiles-definitions PUBLIC "-//Apache Software Foundation//DTD Tiles Configuration 3.0//EN" "http://tiles.apache.org/dtds/tiles-config_3_0.dtd">
<tiles-definitions>
    <definition name="default" template="/WEB-INF/template/template.jsp">
        <put-list-attribute name="cssList" cascade="true">
            <add-attribute value="/style/cssreset-min.css" />
            <add-attribute value="/style/cssfonts-min.css" />
            <add-attribute value="/style/cssbase-min.css" />  
            <add-attribute value="/style/grids-min.css" />
            <add-attribute value="/script/jquery-ui-1.8.24.custom/css/ui-lightness/jquery-ui-1.8.24.custom.css" />
            <add-attribute value="/style/style.css" />
        </put-list-attribute>    
        <put-list-attribute name="jsList" cascade="true">
            <add-attribute value="/script/jquery/1.8.1/jquery.min.js" />
            <add-attribute value="/script/jquery-ui-1.8.24.custom/js/jquery-ui-1.8.24.custom.min.js" />
            <add-attribute value="/script/jquery.sort.js" />
            <add-attribute value="/script/custom/jquery-serialize.js" />
        </put-list-attribute>   
        <put-attribute name="title" value="defaults-name" cascade="true"  type="string"/>
        <put-attribute name="head" value="/WEB-INF/template/head.jsp"/>
        <put-attribute name="header" value="/WEB-INF/template/header.jsp"/>
        <put-attribute name="body" value="/WEB-INF/template/body.jsp"/>
        <put-attribute name="footer" value="/WEB-INF/template/footer.jsp"/>
    </definition>

    <definition name="REGEXP:(.*)#(.*)"  extends="default">
        <put-attribute name="title" cascade="true" expression="OGNL:@com.opensymphony.xwork2.ActionContext@getContext().name"/>
        <put-attribute name="body" value="/WEB-INF/content{1}/{2}"/>
    </definition>

</tiles-definitions> 
```

有了这个，您可以在 /WEB-INF/content/someplace/my-action.jsp 下创建 JSP

就像您使用约定和瓷砖一样，如果您创建一个`com.myapp.action.someplace.MyAction`没有任何结果类型调用的动作类，该代码将执行并且`/WEB-INF/content/someplace/my-action.jsp`仍将呈现结果。

那里有约定+没有更多注释的图块（对于正常情况来说很好）。

**注意事项**：

*   这个答案当然并不完美，但它确实提供了一个可以应用于其他视图技术（sitemesh、其他）的策略的工作示例。
*   目前，您可以看到“.jsp”被附加在图块结果中，而不是在图块定义中，这是不灵活的。具体的扩展名应该在tiles中指定，即定义中的body属性应该附加具体的视图类型（.jsp、.fml、.vm），因为那时你应该最清楚。
*   重要的是要注意定义是按照给出的顺序尝试的，因此您可以通过在和`REGEXP:(.*)#(.*)`定义之间放置定义来覆盖正常情况。例如，可以在这两个定义之间放置一个名为的定义。毕竟，如果您不能这样做并且所有页面都必须平铺相同，我们真的不会使用平铺！`default``REGEXP:(.*)#(.*)``authenticated\(.*)`
*   Just so you know when using tiles3 (the struts2 tiles3 plugin) you can use all three types of view technologies (jsp, freemarker, velocity) to compose one tile. It works. You are probably going to use one view technology consistently but it's nice to know it is possible.

# c - 在 C 编程中存储日志/错误消息

> ID：16116143
> 
> 赞同：4
> 
> 时间：2013-04-20T03:13:41.070
> 
> 标签：c, linux, error-handling, posix, stderr

发生错误时，我希望我的 C 代码在退出程序之前存储错误。是否建议将其存储`stderr`到文件（例如，/home/logs.txt），或者是否建议使用不同的方法来保存日志/错误报告（考虑到编程环境`Linux`）。例如，对于下面的代码，我如何应用该方法来存储日志/错误消息`/home/log.txt`或`/home/log`

```
FILE *fp1;
fp1 = fopen("/sys/class/gpio/export","w"); 
if(fp1 == NULL){
    fprintf(stderr, "errno:%s - opening GPIO136 failed - line 739\n ", strerror(errno));
    close(fp1);
    exit(1);
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T04:21:06.563

If`stderr`总是用来打印出你所有的错误信息，所以，你可以将输出重定向到一个特定的文件。

```
$ program 2>~/logs.txt 
```

要获得更好的日志记录工具，您可以使用：

*   [`syslog`](http://linux.die.net/man/3/syslog)标准功能。

*   [`log4c`](http://log4c.sourceforge.net/)图书馆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T03:22:09.037

如果要存储错误，stderr 可能不是一个好的选择，因为每次运行程序时都需要将 stderr 传送到文件中。

如果要写入 /home/log.txt，请打开指向它的 FILE 指针并使用 fprintf 写入，就像您尝试打开 /sys/class/gpio/export 并写入该文件而不是 stderr 一样。还要确保以附加模式打开日志文件。

```
FILE *fp1;
fp1 = fopen("/sys/class/gpio/export","w"); 
if(fp1 == NULL){
   FILE *fpErr = fopen("/home/log.txt", "a");
   if(fpErr != NULL)
      fprintf(fpErr, "errno:%s - opening GPIO136 failed - line 739\n ", strerror(errno));
   close(fpErr);
   close(fp1);
   exit(1);
} 
```

# actionscript-3 - as3/flash 中的 2D 跑步游戏（第一人称视角）

> ID：16116145
> 
> 赞同：0
> 
> 时间：2013-04-20T03:13:58.060
> 
> 标签：actionscript-3, flash

我想学习制作像 Temple Run 这样的无限跑步游戏......但在非常基础的水平上。我擅长 as3 和 flash……我已经创建了所有图形……游戏的整个场景都是第一人称视角。并且所有的图形都是在 Flash 中创建的。

任何人都可以建议一些教程或任何我应该使用的技术来使对象看起来像是来自远处，以及我如何编写击中它们或逃避它们的逻辑。

感谢您的帮助... :)

# php - 将消息从沙箱发送到自定义应用程序

> ID：16116146
> 
> 赞同：0
> 
> 时间：2013-04-20T03:14:00.710
> 
> 标签：php, flash, actionscript, actionscript-2, sandbox

我有一个使用闪存作为其接口的应用程序，我想从这个应用程序中提取信息，并在我自己的应用程序中解析/使用它（它处理数据，将必需品存储在 mysqldb 中等等）。这些`.swf`文件是用 AS2 编写的，可以很容易地修改。

所以我的目标是通过任何方式发送信息（实际上只是信息。能够发送数字（至少大小合适）将使我能够以任何方式实现自己的编码和分区协议），我当然对这些方式并不挑剔.

这是我目前的方法（不是我自己的想法，归功于 koreanrandom.org。我只是使用他们的资源来学习）：

*   使用 DokanLib 挂载一个虚拟文件系统（并实现`getFileInformation`-handler）
*   `LoadVars`在 AS2-Environment 中使用参数，如`"../.logger/@encoded_information"`
*   由于`getFileInformation`获取访问的文件名作为参数，我可以对其进行解码，将几个重新组合在一起（如果必须拆分它们，Windows 似乎不喜欢具有数百个字符长度的文件名）并使用解码后的数据

但是，我的应用程序经常导致蓝屏（不要问为什么。我不知道，蓝屏消息总是不同的）并且 koreanrandom.org 的开发人员不喜欢被问太多问题，所以我来这里询问其他方法将信息从沙盒闪存环境传递到准备好的侦听器。

我开始考虑一些奇怪的事情（好吧，滥用虚拟文件系统和文件名作为信息传输的手段也可能很奇怪 - 但它仍然是一个好主意），比如调用某些 Windows 函数并使用全局钩子，但我还没有掌握一个认真的计划。

像通过这样的方法访问网络服务器的“常规”方法似乎不起作用：

```
var target_mc = createEmptyMovieClip("target_mc", this.getNextHighestDepth());
loadVariables("http://127.0.0.1/Tools/indata.php", "target_mc", "GET"); 
```

（`indata.php`会创建一个文件，如果它被访问，但它没有。）

`XMLSocket`也不起作用，我尝试了以下代码示例（`netcat -l`在端口 12345 上使用）：

```
Logger.add("begin");
var theSocket:XMLSocket = new XMLSocket();
theSocket.onConnect = function(myStatus) {
    if (myStatus) {
        Logger.add("XMLSocket sucessfully connected")
    }   else {
        Logger.add("XMLSocket NO CONNECTION");
    }
};
theSocket.connect("127.0.0.1", 12345);
var myXML:XML = new XML();
var mySend = myXML.createElement("thenode");
mySend.attributes.myData = "someData";
myXML.appendChild(mySend);
theSocket.send(myXML);
Logger.add("socket sent"); 
```

也根本不起作用，记录器的输出`begin`只是`socket sent`

注释：记录器是由来自 koreanrandom.org 的人创建的，并且依赖于他们的 dokan 实现，这从未对我造成蓝屏。虽然无法在我的实施中发现我的错误，所以我开始寻找其他方法来解决我的问题。

**编辑**：您的“质量消息系统”到底有什么问题？显然它不喜欢我使用标签“转义”和/或“信息”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:29:41.350

嗯，很难说，试试 sendAndLoad 而不是 loadVariables

例子：

```
var result_lv:LoadVars = new LoadVars();
var send_lv:LoadVars = new LoadVars();
send_lv.variable1=value1;
send_lv.variable2=value2;

    f=this;//zachytka

result_lv.onLoad = function(success:Boolean) {
  if (success) {
trace("ok");
  } else {
    trace("error");
  }

};

send_lv.sendAndLoad("http://127.0.0.1/Tools/indata.php", result_lv, "GET"); //you may also use POST 
```

这应该有效。它不起作用的原因也可能是闪存安全设置。尝试将这些东西移动到真实服务器或打开[闪存设置管理器](https://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager.html)（也有一个[替代在线版本](https://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager02.html)）并将 127.0.0.1 添加到受信任域和/或测试文件位置到受信任位置（我使用 C:*）

# php - 当多个存在时，Mysql 仅返回具有 group by 查询的行

> ID：16116147
> 
> 赞同：-2
> 
> 时间：2013-04-20T03:14:04.040
> 
> 标签：php, mysql

我有一个这样的mysql表

编号，第 1 行，第 2 行，第 3 行

我有类似的条目

```
ID  | row1   | row2     | row3
-------------------------------
 1  |   10   |    5    | 10
 2  |   20   |    5    | 10 
```

当我运行这样的 sql

```
SELECT * FROM  `table` WHERE row3 = 10 GROUP BY row2 
```

它只返回一行。我希望它返回两行。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-22T04:55:39.067

完全不使用 GROUP BY 运行您的原始 SELECT 查询。之后循环遍历 PHP 中的结果并使用另一个 SELECT QUERY，例如

```
"SELECT * FROM `table` WHERE row2=" . $resultrow['row2'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T03:18:38.550

```
SELECT * FROM  `table` WHERE row3 = 10 GROUP BY row2 
```

**GROUP BY row2告诉它获取****row2**的值相同的所有行并将它们一起显示（摘要条目 ）。

如果要查看所有行，请删除 GROUP BY 命令

```
SELECT * FROM  `table` WHERE row3 = 10 
```

# .net - 如何从左到右连接多行字符串

> ID：16116148
> 
> 赞同：1
> 
> 时间：2013-04-20T03:14:04.510
> 
> 标签：.net, vb.net, string, join

我有一个包含 3 个条目的数组。

数组的第一个条目是多行字符串：

```
"My dog 
you            " 
```

第二个条目也是：

```
" dont like that
               " 
```

和hird entry太：

```
" ...       
 will die!     " 
```

现在我如何组合所有的多行字符串来从左到右获得这个连接的字符串？：

```
My dog dont like that...       
you will die! 
```

我尝试了什么：

```
RichTextBox1.Text = String.Join(MyArray(1), MyArray(2)) 
```

那么另一个更现实的例子，我真正需要的是组合存储在一个数组中的多行字符串（它们是 ASCII 字母），但是当我尝试将它们全部连接在一起时，我获得了一个从上到下连接的字符串：

![在此处输入图像描述](https://i.stack.imgur.com/0am31.png)

我用过的代码：

```
RichTextBox1.Text = String.Join(" ", Characters(70), Characters(77), Characters(70), Characters(76)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T06:02:23.717

这应该可以满足您的需求。关键是创建一个列表列表并在原始数组中的每个项目上拆分换行符。

这应该适用于任意数量的字符串，但每个字符串必须具有相同数量的换行符才能中断。

例如：

```
"Yo \nDon't kill \nMan!"
"dude! \nme bro!       " 
```

这将导致异常，因为第二行只有一个`\n`

要解决此问题，可以将第二行更改为：

```
"Yo \nDon't kill \nMan!"
"dude! \nme bro!     \n" 
```

这应该为您提供正确的格式。

在 VB 中：

```
Imports System.Text
Module Module1

    Sub Main()
        Dim items As List(Of String) = New List(Of String)()
        items.Add("My dog\nyou")
        items.Add(" dont like that\n")
        items.Add(" ...       \n will die!")
        Dim list As List(Of List(Of String)) = New List(Of List(Of String))
        Dim arg() As String = {"\n"}
        For Each listItem As String In items
            list.Add(listItem.Split(arg, StringSplitOptions.None).ToList())
        Next

        Dim sb As StringBuilder = New StringBuilder()

        For i As Integer = 0 To list(0).Count - 1
            For j As Integer = 0 To list.Count - 1
                sb.Append(list(j)(i))
            Next
            sb.Append(Environment.NewLine)
        Next

        Console.WriteLine(sb.ToString())
        Console.ReadKey()
    End Sub
End Module 
```

和 C#（我的偏好，但这一切都很好:)）：

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            List<string> items = new List<string>();
            items.Add("My dog\nyou");
            items.Add(" dont like that\n");
            items.Add(" ...       \n will die!");
            List<List<string>> list = new List<List<string>>();
            items.ForEach(f => list.Add(f.Split('\n').ToList()));
            StringBuilder sb = new StringBuilder();

            for (int i = 0; i < list[0].Count; i++)
            {
                for (int j = 0; j < list.Count; j++)
                {
                    sb.Append(list[j][i]);
                }
                sb.Append(Environment.NewLine);
            }

            Console.WriteLine(sb.ToString());
            Console.ReadKey();
        }
    }
} 
```

# java - 添加jpanel后的java boxlayout空间

> ID：16116154
> 
> 赞同：0
> 
> 时间：2013-04-20T03:14:56.513
> 
> 标签：java, swing, layout, jpanel, boxlayout

我有容器 jpanel，我在其中使用了 boxlayout 管理器，我所做的是在其中添加另一个面板，其中添加的面板包含使用 flowlayout 管理器的标签和文本字段。每次我在里面添加一个面板时，它都会在另一个添加面板之后创建一个烦人的大空间。我想减少我尝试使用 setsize 和 setpreferredsize 方法调整面板的间距。这是我的代码：

```
 JPanel global = new JPanel();
  global.setLayout(new BoxLayout(global, BoxLayout.Y_AXIS));
  global.setPreferredSize(new Dimension(500,312));
  global.setSize(500,312);
  global.setBounds(8, 5, 500, 312);
  global.setBorder(BorderFactory.createLineBorder(Color.black));
  global.setBackground(Color.white);
  //Elements of global

  JLabel label1 = new JLabel("Global Settings");
  label1.setAlignmentX(Component.CENTER_ALIGNMENT);
  label1.setFont(new Font("tahoma", Font.BOLD, 17));
  global.add(label1);
  global.add(new JSeparator());

  //Name Field
  JPanel c = new JPanel();
  c.setSize(100, 1);
  c.setPreferredSize(new Dimension(100,1));
  c.setLayout(new FlowLayout());
  JLabel label = new JLabel("Display Name");
  JTextField text = new JTextField(20);
  text.setPreferredSize(new Dimension(20,25));
  c.add(label);
  c.add(text);
  global.add(c);

  //Hostname Field
  JPanel c1 = new JPanel();
  c1.setSize(100, 1);
  c1.setPreferredSize(new Dimension(100,1));
  c1.setLayout(new FlowLayout());
  JLabel label2 = new JLabel("Host Name");
  JTextField text1 = new JTextField(20);
  text1.setPreferredSize(new Dimension(20,25));
  c1.add(label2);
  c1.add(text1);
  global.add(c1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:47:32.570

`BoxLayout`是一个非常激进的`LayoutManager`，并不总是尊重其中组件的首选大小。相反，我们必须设置`BoxLayout`组件的最大尺寸以防止它们被拉伸。此外，我们需要添加一个过`Box`孔`Box.createVerticalGlue()`——这是一个被拉伸的特殊组件（而不是其他组件）。

这是重写的代码：

```
 JPanel global = new JPanel();
    global.setLayout(new BoxLayout(global, BoxLayout.Y_AXIS));
    global.setPreferredSize(new Dimension(500, 312));
    global.setSize(500, 312);
    global.setBounds(8, 5, 500, 312);
    global.setBorder(BorderFactory.createLineBorder(Color.black));
    global.setBackground(Color.white);
    // Elements of global

    JLabel label1 = new JLabel("Global Settings");
    label1.setAlignmentX(Component.CENTER_ALIGNMENT);
    label1.setFont(new Font("tahoma", Font.BOLD, 17));
    global.add(label1);
    JSeparator sep = new JSeparator();
    sep.setMaximumSize(new Dimension((int) sep.getMaximumSize().getWidth(), 50));
    global.add(sep);

    // Name Field
    JPanel c = new JPanel();
    c.setMaximumSize(new Dimension((int) c.getMaximumSize().getWidth(), 50));
    JLabel label = new JLabel("Display Name");
    JTextField text = new JTextField(20);
    text.setPreferredSize(new Dimension(20, 25));
    c.add(label);
    c.add(text);
    global.add(c);

    // Hostname Field
    JPanel c1 = new JPanel();
    c1.setMaximumSize(new Dimension((int) c1.getMaximumSize().getWidth(), 50));
    JLabel label2 = new JLabel("Host Name");
    JTextField text1 = new JTextField(20);
    text1.setPreferredSize(new Dimension(20, 25));
    c1.add(label2);
    c1.add(text1);
    global.add(c1);
    global.add(Box.createVerticalGlue()); 
```

# python - 如何允许 __init__ 在 python 中允许 1 个或没有参数

> ID：16116161
> 
> 赞同：5
> 
> 时间：2013-04-20T03:15:29.840
> 
> 标签：python, class

现在我有这个类：

```
class foo():
  def __init__(self):
      self.l = [] 
```

现在，我可以在参数中不带参数的情况下将变量设置为 foo，因为它不带参数，但是我怎样才能允许它继续不带任何必需的参数，但如果我想放入 foo() ? 例子：

```
>>> f = foo([1,2,3]) #would be legal and
>>> f = foo() # would be legal 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T03:17:08.150

```
def __init__(self, items=None):
    if items is None: items = []
    self.l = items 
```

针对@Eastsun 的编辑，我提出了一个不同的结构`__init__`

```
def __init__(self, items=()):
    ''' Accepts any iterable 
    The appropriate TypeError will be raised if items is not iterable '''
    self.l = list(items) 
```

请注意，小写`l`是一个坏名字，它可能会与`1`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-20T03:19:01.910

```
def __init__(self, items=None):
    self.l = items or [] 
```

或者

```
def __init__(self, items=None):
    self.l = items if items else [] 
```

***针对 Dougal 的评论进行编辑。*** （我已经学习 Python 大约两周了，所以这只是我的个人意见。如果我错了，请纠正我。）在像 python 这样的编程语言中，很难防止有人将不需要的类型的对象传递给你的函数或方法. 在我的想法中，确保始终工作的安全方式`__init__`是这样的：

```
def __init__(self, items = None):
    if isinstance(items, Iterable):
        self.l = list(items)
    elif items is None:
        self.l = []
    else:
        raise TypeError('items must be iterable') 
```

注意：如果 items 已经是一个列表，上述方法总是做一个浅拷贝。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-20T03:30:16.363

```
class foo():
  def __init__(self, items=[]):
      self.l = items 
```

# java - 如何在我的登录/创建帐户程序中解决此序列化错误？

> ID：16116168
> 
> 赞同：1
> 
> 时间：2013-04-20T03:17:24.693
> 
> 标签：java, swing, serialization, user-interface

我正在编写一个简单的 GUI 程序，它使用来自文本文件的登录信息。它从另一个创建用户帐户的 GUI 程序获取登录信息。我不确定如何轻松有效地序列化它，因为这只是我最近学到的东西。我应该怎么办？如何解决此序列化错误，以及如何改进它并使其正常工作。

用户等级：

```
package passwordProgram;

import java.util.ArrayList;
import java.util.Arrays;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import java.io.Serializable;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
import javax.swing.UIManager;

public class User implements Serializable, ActionListener {

    public static ArrayList<String> allUsernames = new ArrayList<String>();

    String username;
    String password;

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e) {
            e.printStackTrace();
        }
        User user = new User();
        user.mainGUI();
    }

    JFrame frame;
    JPanel panel;
    JTextField createUsername;
    JPasswordField createPassword;
    JPasswordField confirmPassword;
    JButton createAccount;
    JLabel noValid;

    public void mainGUI() {
        noValid = new JLabel();
        frame = new JFrame("Create a new account!");
        panel = new JPanel();
        panel.setBackground(Color.ORANGE);
        createPassword = new JPasswordField(10);
        confirmPassword = new JPasswordField(10);
        createUsername = new JTextField(10);
        JLabel userTxt = new JLabel("New Username: ");
        JLabel userPass = new JLabel("New Password: ");
        JLabel confirmPass = new JLabel("Confirm Password: ");
        createAccount = new JButton("Create your account!");

        panel.setLayout(new GridBagLayout());
        GridBagConstraints left = new GridBagConstraints();
        left.anchor = GridBagConstraints.WEST;
        GridBagConstraints right = new GridBagConstraints();
        right.anchor = GridBagConstraints.EAST;
        right.weightx = 2.0;
        right.fill = GridBagConstraints.HORIZONTAL;
        right.gridwidth = GridBagConstraints.REMAINDER;

        frame.getContentPane().add(BorderLayout.NORTH, noValid);
        frame.getContentPane().add(BorderLayout.CENTER, panel);
        panel.add(userTxt, left);
        panel.add(createUsername, right);
        panel.add(userPass, left);
        panel.add(createPassword, right);
        panel.add(confirmPass, left);
        panel.add(confirmPassword, right);

        frame.getContentPane().add(BorderLayout.SOUTH, createAccount);
        frame.setVisible(true);
        frame.setSize(500, 300);

        createAccount.addActionListener(this);
    }

    public void actionPerformed(ActionEvent event) {
        if (createUsername.getText().length() <= 0 ) {
            noValid.setText("That is not a valid username. Please try again.");
            frame.getContentPane().add(BorderLayout.NORTH, noValid);
        }

        else if (allUsernames.contains(createUsername.getText())) {
            noValid.setText("That username is already taken. Please try again.");
            frame.getContentPane().add(BorderLayout.NORTH, noValid);
        }

        else if (!(Arrays.equals(createPassword.getPassword(), confirmPassword.getPassword()))) {
            noValid.setText("Your passwords do not match!");
            frame.getContentPane().add(BorderLayout.NORTH, noValid);
        } else {    
            SaveUser sUser = new SaveUser();
            sUser.createAccount(this);
            noValid.setText("Account created successfully");
            frame.getContentPane().add(BorderLayout.NORTH, noValid);
        }
    }
} 
```

SaveUser 类（序列化）

```
package passwordProgram;

import java.io.FileOutputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;

public class SaveUser implements Serializable{
    public void createAccount(User u) {
        try {
            FileOutputStream fileOS = new FileOutputStream("userInfo.ser");
            ObjectOutputStream objectOS = new ObjectOutputStream(fileOS);
            objectOS.writeObject(u);
            objectOS.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

这是我尝试运行 User 类时遇到的错误。

```
java.io.NotSerializableException: passwordProgram.User
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at passwordProgram.SaveUser.createAccount(SaveUser.java:12)
    at passwordProgram.User.actionPerformed(User.java:104)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.AbstractButton.doClick(Unknown Source)
    at javax.swing.plaf.basic.BasicRootPaneUI$Actions.actionPerformed(Unknown Source)
    at javax.swing.SwingUtilities.notifyAction(Unknown Source)
    at javax.swing.JComponent.processKeyBinding(Unknown Source)
    at javax.swing.KeyboardManager.fireBinding(Unknown Source)
    at javax.swing.KeyboardManager.fireKeyboardAction(Unknown Source)
    at javax.swing.JComponent.processKeyBindingsForAllComponents(Unknown Source)
    at javax.swing.JComponent.processKeyBindings(Unknown Source)
    at javax.swing.JComponent.processKeyEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.KeyboardFocusManager.redispatchEvent(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

这是我的课堂登录：

打包密码程序；

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileInputStream;
import java.io.ObjectInputStream;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
import javax.swing.UIManager;

public class LogInScreen implements ActionListener {

    public static void main(String[] args) {
        try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } 
        catch (Exception e) {
        }
        LogInScreen logger = new LogInScreen();
        logger.start();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T03:42:52.690

就个人而言，我认为在这种情况下对象序列化已经过时了。

您可以简单地将详细信息写入文本文件...

```
public TestFileIO() {
    try {
        writeUser(new File("User.inf"), "Test", "Password".toCharArray());
    } catch (IOException ex) {
        ex.printStackTrace();
    }
}

public void writeUser(File file, String name, char[] password) throws IOException {
    BufferedWriter bw = null;
    try {
        bw = new BufferedWriter(new FileWriter(file));
        bw.write(name);
        bw.newLine();
        bw.write(password);
        bw.flush();
    } finally {
        try {
            bw.close();
        } catch (Exception e) {
        }
    }
} 
```

这将简单地将用户名和密码写入文件，并用新行分隔。

如果您在文件中需要多个用户，您可以使用预定义的分隔符将用户名密码简单地写入同一行...

```
public TestFileIO() {
    try {
        writeUser(new File("User.inf"), "Test", "Password".toCharArray());
    } catch (IOException ex) {
        ex.printStackTrace();
    }
}

public void writeUser(File file, String name, char[] password) throws IOException {
    BufferedWriter bw = null;
    try {
        bw = new BufferedWriter(new FileWriter(file));
        bw.write(name);
        bw.write(";");
        bw.write(password);
        bw.flush();
    } finally {
        try {
            bw.close();
        } catch (Exception e) {
        }
    }
} 
```

现在，如果您担心将密码保存为纯文本，您可以（以及个人世界）将密码保存为 MD5 哈希...

```
public TestFileIO() {
    try {
        writeUser(new File("User.inf"), "Test", "Password".toCharArray());
    } catch (Exception ex) {
        ex.printStackTrace();
    }
}

public void writeUser(File file, String name, char[] password) throws IOException, NoSuchAlgorithmException {

    BufferedWriter bw = null;

    try {
        MessageDigest md = MessageDigest.getInstance("MD5");
        byte[] bytes = new byte[password.length];
        for (int i = 0; i < bytes.length; i++) {
            bytes[i] = (byte) password[i];
        }
        md.update(bytes);
        byte[] mdbytes = md.digest();

        StringBuffer sb = new StringBuffer();
        for (int i = 0; i < mdbytes.length; i++) {
            sb.append(Integer.toString((mdbytes[i] & 0xff) + 0x100, 16).substring(1));
        }

        bw = new BufferedWriter(new FileWriter(file));
        bw.write(name);
        bw.newLine();
        bw.write(sb.toString());
        bw.flush();
    } finally {
        try {
            bw.close();
        } catch (Exception e) {
        }
    }
} 
```

# matlab - 使用多波信号创建单个 .mat 文件

> ID：16116172
> 
> 赞同：0
> 
> 时间：2013-04-20T03:17:48.300
> 
> 标签：matlab

我想使用 Matlab 工具箱为自动语音识别准备训练和测试集。我已经有包含几个录制音频（.wav）的样本集。我是 Matlab 的新手。为了使用工具箱，我需要创建保存在 .mat 文件中的训练广告测试集。问题是如何创建包含所有音频的单个 .mat 文件？太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:05:14.953

要创建不相交的训练和测试集，最好的方法是使用`crossvalind`命令。因此，它对作为输入给出的参数`k-fold`在哪里执行交叉验证。`k`如果`k=5`那么`1/5th`数据用于测试，`4/5th`数据用于训练。代码如下：

```
 data=randi(20,[500 20]); %creating random data with 500 rows and 20 columns.
 indices=crossvalid('Kfold',size(data,1),5);
 test = (indices == 2); %you can put any number between 1 to 5
 train = ~test;
 trainData=data(train,:);
 testData=data(test,:); 
 savefile='dataFile.mat'
 save(savefile,'trainData','testData'); 
```

如果将数字 2 更改为其他数字，您将获得具有相同分布的训练测试数据，并且每次都是随机的。你也可以把它放在一个 for 循环中，但是为了保存，你需要使用一些技巧或者通过在每个点放置一个断点来手动完成，以避免数据被覆盖。这是创建训练测试集的通用技术。我希望您能够将其应用于您的问题。

# php - jQuery 不适用于 jQuery 创建的元素

> ID：16116173
> 
> 赞同：1
> 
> 时间：2013-04-20T03:17:52.887
> 
> 标签：php, javascript, jquery, html, ajax

我通过每秒调用的 ajax 调用将列表项动态添加到 jQuery 中的列表中。

下面是ajax调用的代码。

```
$.ajax({
    url: 'php/update_group_list.php',
    data: '', 
    dataType: 'json',
    success: function(data) {
        var id = data.instructor_id;
            group_cnt = data.group_cnt,
            group_name = data.group_name,
            group_code = data.group_code;

            for (i = current_row; i < group_cnt; i++)
            {
                //setInterval(function() { $('#group-list-div').load('php/group_list.php'); }, 5000);

                $('#group-list').append("<li><a href='#' data-role='button' class='view-group-btns' id='"+group_code[i]+"' value='"+id+"' text='"+group_name[i]+"'>"+group_name[i]+"</a></li>");
                $('#delete-group-list').append("<fieldset data-role='controlgroup data-iconpos='right'>" +
                                                    "<input id='"+group_code[i]+i+"' value='"+group_code[i]+"' type='checkbox' name='groups[]'>" +
                                                    "<label for='"+group_code[i]+i+"'>"+group_name[i]+"</label>" +
                                                "</fieldset>");
            }

            current_row = i; 

            $('#group-list').listview('refresh');
            $('#delete-group-list').trigger('create');
    }
}); 
```

现在我有两个问题

第一个问题：

当我尝试运行下面的代码时（如果在上面的代码中 $('#group-list').blah...blah 在此行中创建了任何列表项，它应该显示一个警告框），没有任何反应。

```
$(".view-group-btns").click(function() 
{
    alert("check");
}); 
```

第二个问题：

此外，当我尝试发送复选框的表单数据时（在上面的 ajax 调用代码中引用行 $('#delete-group-list').blah...blah），帖子返回错误意外令牌 <

我究竟做错了什么？我认为这两个问题是相关的，因为我正在创建动态使用的列表项。

* * *

这是与第二个问题有关的额外代码

HTML：

```
<form id='delete-group-form' action='php/delete_groups.php' method='post'>
    <h3 style='text-align: center;'>Check the Box Beside the Groups you Would Like to Delete </h3>
    <div style='margin-top: 20px;'></div>
        <div id='delete-group-list'>
        </div>
    <div style='margin-top: 20px;'></div>
    <input type='submit' id='delete-groups-btn' data-theme='b' value='Delete Groups(s)'>                    
</form> 
```

JS代码

```
$('#delete-group-form').submit(function(e) 
{
    e.preventDefault();

    alert($('#delete-group-form').serialize());

    if ($('#delete-group-form').serialize() == "") 
    {
        alert('No groups selected to be deleted.')
        return false;
    }
    else 
        if ($('#delete-groups-form').serialize() == null) 
        {
            alert('No groups selected to be deleted.')
            return false;
        } 
        else 
        {
            $.post('php/delete_groups.php',$('#delete-groups-form').serialize()).done(function(data) 
            {
                obj = jQuery.parseJSON(data);

                var group_codes = obj.group_list;

                alert(group_codes);

                alert("The selected groups have been deleted");
                window.setTimeout(2000);
                return false;
            });
        }
    return false;
}); 
```

delete_groups.php

```
<?php 
    $group_codes = $_POST['groups'];    
    $items = array('group_list'=>$group_codes); //creating an array of data to be sent back to js file
    echo json_encode($items); //sending data back through json encoding
?> 
```

我认为第二个问题的根源是 $group_codes = $_POST['groups']; 特别是 $_POST['groups'] 因为当我用 $group_codes = 'test'; 替换它时 （仅出于调试目的），代码按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T03:27:25.740

您需要使用事件委托来使新创建的元素正常运行：

```
$("#group-list").on("click", ".view-group-btns", function() {
    alert("check");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T03:29:09.290

我注意到你在这条线上有 3 个单引号......在控制组之后错过了一个

```
$('#delete-group-list')."<fieldset data-role='controlgroup data-iconpos='right'>" 
```

这将解释意外的令牌 <

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T03:19:06.917

您必须在事件上使用 jquery。

```
$(".view-group-btns").on("click", function(event)
{
    alert("check");
}); 
```

为什么？

因为您只能在更新 DOM 之前创建的元素上使用常规“点击”。

当您在 dom 树中动态创建新元素时，您不能再使用 .click 了。

on（过去，.live()，现在已弃用）可以监听 DOM 树中的修改，并可以使用以后创建的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T03:32:31.037

从 ajax 调用中获取元素后，您必须绑定 click 函数。在 pageLoad 事件上的绑定只会与那些已经在 dom 中的元素绑定。所以做这样的事情。

```
$.ajax({
success : function(res){
//bind your click function after you update your html dom.
}
}) 
```

# android - GridView 之间的渐变线

> ID：16116175
> 
> 赞同：0
> 
> 时间：2013-04-20T03:18:04.600
> 
> 标签：android, gridview, shape

我想要在gridview之间有一条如下图所示的线： ![在此处输入图像描述](https://i.stack.imgur.com/cldhx.png)

以下我已经尝试过。

网格视图 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<GridView
    android:id="@+id/gridhouseindex"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:listSelector="@null"
    android:smoothScrollbar="true"
    android:stretchMode="columnWidth"
    android:numColumns="2"
    android:verticalSpacing="22dp">
</GridView> 
```

适配器 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/imgViewHouseIndex"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal|center"
            android:layout_marginLeft="20dp"
            android:adjustViewBounds="true"
            android:src="@drawable/univer" />

        <TextView
            android:id="@+id/txtViewHouseIndex"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="TextView"
            android:textSize="12sp"
            android:textStyle="bold" />
    </LinearLayout>

   <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@drawable/grid_line" />
</LinearLayout>

   <View
        android:layout_width="1dp"
        android:layout_height="match_parent"
        android:background="@drawable/grid_line" /> 
```

网格线 XML：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

<stroke
    android:width="2dp"
    android:color="#b6a9a9" />

<gradient
    android:angle="90"
    android:endColor="#b6a9a9"
    android:startColor="#FFFFFF" />

<corners
    android:bottomLeftRadius="1dp"
    android:bottomRightRadius="1dp"
    android:topLeftRadius="1dp"
    android:topRightRadius="1dp" /> 
```

通过使用上面的代码，我得到如下图：

![在此处输入图像描述](https://i.stack.imgur.com/F0v4z.png)

有人可以告诉我，我哪里出错了，或者我必须做什么才能得到准确的输出。

**更新：**

这是我得到的输出。

![在此处输入图像描述](https://i.stack.imgur.com/IE7bw.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T04:27:35.143

对于`Horizontal`线路：`gradientbackground.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:dither="true"
    android:shape="rectangle" >
    <gradient
        android:angle="180"
        android:centerColor="#000000"
        android:endColor="#F6F6F6"
        android:startColor="#F6F6F6" />
</shape> 
```

`Layout`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroll_container"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:splitMotionEvents="false" >
    <View
        android:id="@+id/divider"
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:layout_centerVertical="true"
        android:background="@drawable/backgrad" />
</RelativeLayout> 
```

对于`Vertical`线路：`gradientbackground.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:dither="true"
    android:shape="rectangle" >
    <gradient
        android:angle="270"
        android:centerColor="#000000"
        android:endColor="#F6F6F6"
        android:startColor="#F6F6F6" />
</shape> 
```

`Layout`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroll_container"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:splitMotionEvents="false" >
    <View
        android:id="@+id/divider"
        android:layout_width="1dp"
        android:layout_height="fill_parent"
        android:layout_centerHorizontal="true"
        android:background="@drawable/backgrad" />
</RelativeLayout> 
```

我希望这可以帮助你。

谢谢。

# c - 如何在C中以有效的方式替换字符串

> ID：16116179
> 
> 赞同：0
> 
> 时间：2013-04-20T03:18:51.140
> 
> 标签：c, linux, gcc, libc

我有一个由 linux [uuid 生成](http://linux.die.net/man/3/uuid_generate)代码（libc）生成的字符串：

```
1b4e28ba-2fa1-11d2-883f-b9a761bde3fb
```

我需要替换此字符串中的一些字符：

`-`有`_`
`2`有`f`
`4`有`x`

我正在`UUID`使用循环生成 200 s。

因此，对于我需要使用自定义函数替换的每个 uuid，必须最大限度地优化该函数才能做到这一点，我该如何实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T04:05:05.923

像这样微不足道的事情是你想要的吗？

```
void my_replace(char* str)
{
    while (*str) {
        switch (*str) {
        case '-':
            *str = '_';
            break;
        case '2':
            *str = 'f';
            break;
        case '4':
            *str = 'x';
            break;
        default:
            break;
        }
        ++str;
    }
} 
```

它真的又快又简单。我真的看不出你怎样才能让它更快。

编辑：我知道某些字符串操作中的一些优化，但我看不出它们如何适用于此。例如，在 的情况下`memcpy`，可能一次复制 4 个或更多字节，具体取决于处理器。在比较正确对齐的字符串的情况下，比较整数可能是可能的并且更有效。我只是看不到适用的技术。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T03:34:31.990

我想你正在使用`char[] str`

```
char *c;
for(c = str; *c != '\0'; ++c){
    if( *c == '-' ) *c = '_';
    else if( *c == '2' ) *c = 'f';
    else if( *c == '4' ) *c = 'x';
} 
```

`switch`版本

```
char *c;
for(c = str; *c != '\0'; ++c){
    switch(*c){
        case '-': *c = '_'; break;
        case '2': *c = 'f'; break;
        case '4': *c = 'x'; break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T03:46:01.237

可以优化 C 库函数，并且比手动编码迭代快得多。

```
char* uuid; // = ...
//    size_t uuid_len; // = ... length of uuid

char* ptr = strpbrk(uuid, "-24");
while (ptr)
{
   switch(*ptr)
   {
      case '-':
          *ptr = '_';
          break;
      case '2':
          *ptr = 'f';
          break;
      case '4':
          *ptr = 'x';
          break;
   }
//       if (ptr-uuid == uuid_len) break;

   ptr = strpbrk(ptr+1, "-24");
} 
```

[编辑：根据此处](http://www.cplusplus.com/reference/cstring/strpbrk/)似乎没有必要的示例，取出范围检查。

**编辑：**所以我决定在这里测试这 3 种算法，看看哪个更快。我有一个 100000 个字符串的循环，在一台老式的 2006 Mac Pro 上，用 gcc，-O3 编译。我平均跑了 1000 次，做了 5 个循环。

## 最终获胜者是...

@johnchen*的*平均时间为 7.85 毫秒。

@YongweiWu 以 7.89 毫秒的平均时间紧随其后。差异看起来很大；不幸的是，今晚不会进行适当的统计测试。:)

......`strpbrk`在 32 毫秒时是遥远的三分之一。（很高兴我用“可能”、“可能”等来限定我所有的优化声明......）

**编辑**：Clang 有很大的不同--j @ WY 的算法在 Clang 下需要 10 毫秒（看起来它们之间并列），我的没有改变。

# android - 我可以从可用小部件列表中隐藏过时的小部件类吗？

> ID：16116183
> 
> 赞同：3
> 
> 时间：2013-04-20T03:19:08.907
> 
> 标签：android, android-widget, android-manifest, android-appwidget

我的应用程序的当前版本有一个应用程序小部件，在下一个版本中，我将用不同的小部件替换它。它们都不会与旧小部件具有相同的名称或类。我不希望旧的小部件不再可用。

问题是我无法从清单中删除旧的小部件，因为这样所有升级用户的小部件都会从主屏幕中删除。

因此，我正在寻找一种解决方案，使我能够继续支持旧的小部件，而无需在小部件菜单中显示它。

有任何想法吗？

# java - Java中逗号运算符的等价物？

> ID：16116185
> 
> 赞同：5
> 
> 时间：2013-04-20T03:19:31.167
> 
> 标签：java, code-generation

我正在尝试对一些 Java 代码进行源代码转换，从而生成代码，其中对于每个表达式，如果计算表达式，则会调用一个方法。

（用例是一个简单的行覆盖度量。我以前在 JavaScript 中做过这种事情：`<my-expression>`成为`(covered("path/to/file.js", 12), <my-expression>)`或其他东西，其中 12 是表达式的行号）。

Java 没有逗号运算符。我考虑过在方法调用中包装表达式，例如我的`covered`函数将被声明`public static <T> T covered(String file, int line, T expr)`并返回它的第三个参数，所以我可以编写`covered("path/to/file.java", 12, myExpression())`但它不适用于具有 type 的表达式`void`。

有没有简单的方法来实现这一点？邪恶的代码是可以的；这是生成的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T03:48:22.967

（我现在看到了问题。）

Java 中唯一可以合法出现 void 表达式的*上下文*`for`是它是语句表达式，或者经典语句中的第一或第三部分。所以：

*   如果表达式用作表达式语句：

    ```
    covered(...); <my-expression>; 
    ```

*   如果表达式用作 a 的第一或第三部分`for`，

    ```
    covered(...), <my-expression> 
    ```

*   除此以外

    ```
    covered(..., <my-expression>) 
    ```

    或一些这样的。（这需要`covered`每个原始类型的重载，并且还需要带有签名的重载`<T> overload(..., <T>)`。）

我认为这可以完全根据语法来确定。不需要类型分析或方法重载解析来确定是否实际调用了 void 方法。

# ember.js - 刚刚使用 ember-data 创建的实体没有设置状态

> ID：16116191
> 
> 赞同：0
> 
> 时间：2013-04-20T03:20:05.407
> 
> 标签：ember.js, ember-data

我使用 Ember + Ember 数据。当我创建一个实体时，即使在相应的服务器端调用它的状态属性（isLoaded、isNew、isValid 等）都是未定义的。我的期望是这些应该正确设置。例如，在服务器端调用之前，我希望 isNew 为“真”，在服务器端创建之后，我希望 isNew 为“假”。

我正在以这种方式创建实体：

```
myEntity = MyApp.MyEntity.createRecord({attr1: "value1"});
...
myEntity.transaction.commit(); 
```

来来回回的是：

```
Sent:
{"myEntity":{"attr1":"value1"}}
...
Received:
{"myEntity":{"id":2,"attr1":"value1","attr2":"value2"}} 
```

实体本身定义如下：

```
MyApp.MyEntity = DS.Model.extend({
    attr1: DS.attr("string"),
    attr2: DS.attr("string")
}); 
```

不幸的是，在远程调用“myEntity”之前和之后，所有状态属性都为“未定义”。我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:05:15.133

我猜这个问题可能是你没有遵循 Ember Data 的命名约定。如果您使用默认值，您`MyApp.MyEntity`将被发布到，Ember Data 将在或键下的响应中查找模型。`/my_entity``DS.RESTAdapter``my_entity``my_entitys`

还可以通过使用`map`函数 on来自定义此默认行为`App.Adapter`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:11:08.953

我的问题是我直接检索状态，即不使用吸气剂。

错误：myEntity.isNew -> 未定义

右：myEntity.get('isNew') -> true

# html - H1 底部边框下划线

> ID：16116210
> 
> 赞同：2
> 
> 时间：2013-04-20T03:23:25.640
> 
> 标签：html, css

我遇到了一个问题，我试图用边框底部强调我的 h1，但它延伸到我的图片后面（向左）。我希望下划线延伸到页面的最后。这是我的代码：

```
HTML:
<div id="content">
<img src="http://imageshack.us..."/>
    <h1>About me</h1
        <p>Info about me....</p>
    <h2>Contact info</h2>
        <p>Phone:my number</p>
        <p>Email: my email</p>
</div> 
```

**CSS：**

```
#content  {
    padding: 5px 10px 5px 0px;
    margin: 10px 10px 10px 0px;
}

#content img {
    float: left;
    margin: 0px 10px 10px 0px;
}

#content h1 {
    font-size: 26px;
    margin: 15px 0px 5px 0px;
    border-bottom: 5px solid black;
} 
```

**注意：**我是一名新手编码器 - 所以如果这不可能或有任何其他方法可以做到这一点，请告诉我！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T03:26:18.693

做这个：

```
#content h1 {
    font-size: 26px;
    margin: 15px 0px 5px 0px;
    border-bottom: 5px solid black;
    display: inline-block;
} 
```

这只会强调内容。不是全线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T04:27:11.723

发生这种情况的原因是您没有在`h1`. 所以它自然会扩展整个页面宽度。为了解决这个问题，添加一个`width`属性，你应该很高兴。这就是代码现在的样子

```
#content h1 {
  font-size: 26px;
  margin: 15px 0px 5px 0px;
  border-bottom: 5px solid black;
  width:200px; /*Change this to whatever value that you want*/
} 
```

[小提琴](http://jsfiddle.net/5BpS2/)

正如其他人所说，您也可以`inline-block`在`h1`. 这通常会将`h1`所有`p`内容`p`与`display:block;`.

[小提琴](http://jsfiddle.net/5BpS2/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T03:27:44.660

您可以使用

```
 display: inline-block; 
```

[http://jsfiddle.net/nrfB7/1/](http://jsfiddle.net/nrfB7/1/)

# .net - 通过 HTTP 以明文形式将用户名和密码发送到 Web 服务

> ID：16116211
> 
> 赞同：2
> 
> 时间：2013-04-20T03:23:29.460
> 
> 标签：.net, xml, vb.net, wcf, web-services

我有一个使用 Web 服务的 VB.NET (2008) 控制台应用程序。我最初开始使用使用 WSDL.exe（或 Visual Studio 中的“添加 Web 服务”）导入 WSDL 的旧/旧（WCF 之前）技术编写它，该技术基于 System.Web.Services.Protocols.SoapHttpClientProtocol 创建类. 然而，我很快意识到这不是最好的方法（感谢 John Saunders 在我之前的问题中的评论——[如何将对象的序列化 XML 传递给 Web 服务？](https://stackoverflow.com/questions/16096947/how-to-get-serialized-xml-of-object-passed-to-web-service)）。

所以，我现在已经将我的代码转换为 WCF（使用“添加服务引用”，它基于 System.ServiceModel.ClientBase 创建类）；它的工作原理或多或少相同，除了一个关键点：安全性。

我正在使用的 Web 服务是用 Java 编写的；虽然我们（我和开发 Web 服务的团队）都为同一家公司工作，但我并不能真正控制他们如何发布和公开 Web 服务。他们的要求是我通过 HTTP*而不是*HTTPS 传递用户名和密码（基本 HTTP 身份验证）。我知道这不是最安全的方法。但这是一场我现在无法战斗的战斗。

使用旧方法效果很好。但是，如果我尝试通过在 app.config 中进行设置来使用 WCF 执行此操作：

```
<security mode="Transport">
    <transport clientCredentialType="Basic" />
</security> 
```

...并在这样的代码中设置用户名和密码：

```
oServiceClient.ClientCredentials.UserName.UserName = "SomeUsername"
oServiceClient.ClientCredentials.UserName.Password = "SomePassword" 
```

我有礼貌地向我抛出这个异常：

```
System.ArgumentException: The provided URI scheme 'http' is invalid; expected 'https'. Parameter name: via 
```

所以这很糟糕；并且在 .NET 3.5 中搜索 StackOverflow 和其他网站并没有太多解决这个问题的方法。我发现了我认为可能很有希望的东西（[http://webservices20.blogspot.com/2008/11/introducing-wcf-clearusernamebinding.html](http://webservices20.blogspot.com/2008/11/introducing-wcf-clearusernamebinding.html)）；但是，看起来此解决方案需要在服务端和客户端进行配置*更改*。如前所述，我无法控制服务器端。

有没有办法使用基于 WCF 的客户端来完成此任务？还是我需要放弃并回到旧的方式？

编辑：我似乎在这方面取得了一些成功：

```
<security mode="TransportCredentialOnly">
    <transport clientCredentialType="Basic" />
    <message clientCredentialType="UserName" />
</security> 
```

但是微软帮助文章/教程中似乎没有提到这种安全模式（TransportCredentialOnly）。我在吠叫正确的树吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:10:48.613

就我而言，解决方案原来是将安全模式设置为“TransportCredentialOnly”，如下所示：

```
<security mode="TransportCredentialOnly">
    <transport clientCredentialType="Basic" proxyCredentialType="None"
        realm="" />
    <message clientCredentialType="UserName" algorithmSuite="Default" />
</security> 
```

感谢 evgenyl 促使我向其他安全模式开放我的研究；但最终，成功的是“TransportCredentialOnly”而不是“Message”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T03:34:35.040

您收到此错误，因为“传输”安全模式假设 https。您可以使用消息安全模式。有关详细信息，请参阅此帖子：http: [//msdn.microsoft.com/en-us/library/ms733137.aspx](http://msdn.microsoft.com/en-us/library/ms733137.aspx)

# php - Laravel - 语法错误，文件意外结束

> ID：16116212
> 
> 赞同：19
> 
> 时间：2013-04-20T03:23:41.173
> 
> 标签：php, laravel, laravel-blade

我有一个在主机上运行良好的网站，但我目前正在尝试将它安装在 localhost 上。

我已经下载了所有内容并配置为在 localhost - 数据库和 URL 上工作。

问题是这个错误：

> 未处理的异常
> 
> 信息：
> 
> 语法错误，文件意外结束位置：
> 
> C:\Program Files (x86)\EasyPHP-12.1\www\laravel\view.php(386) : eval()'d 代码在第 118 行

而且我不知道是什么原因造成的。有什么解决办法吗？

PS 我已经在我的 Windows 主机文件中设置了`127.0.0.1 myproject.dev`。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-20T03:29:36.727

您的某一观点存在错误。如果有更详细的堆栈跟踪，它应该向您显示视图的详细信息，尽管名称将是一个`md5()`字符串，因此有点难以找到。您可能想要删除所有已编译的 Blade 视图`storage/views`并让 Blade 重新编译视图。

如果您仍然收到错误，请检查您的视图以确保您拥有所有正确的结束标签，例如，`@endif`或`@endforeach`

始终仔细检查您的视图是否有任何语法错误。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-12T20:19:32.507

我遇到了同样的错误，我可以通过在内联 if 语句中的内容中添加空格来修复它。例如：

遇到错误：

```
@if( BLAH )Output@endif 
```

修复了以下错误：

```
@if( BLAH ) Output @endif 
```

这可能不是在所有情况下都是问题，而且肯定很难追查，但这只是可能导致此确切错误的一个示例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-16T16:31:05.010

这个问题的一个变体——我有一个 php 块，我打开它 `<?` 而不是`<?php`在 LocalHost/MAMP 上正常工作，但在 Nginx/Ubuntu 16.04/PHP7（都是 Laravel）下给出了上述错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T07:42:16.060

您应该从视图文件中删除一个字符。例如，我的角色在一些“@endfor”之前是“，”（逗号）。当我删除那些工作！

# regex - 避免正则表达式捕获字符串的内容（引号之间）

> ID：16116220
> 
> 赞同：0
> 
> 时间：2013-04-20T03:25:24.197
> 
> 标签：regex, regex-negation

我正在使用以下正则表达式来捕获遵循某些条件的字符串数组（例如：它没有以某些字母或数字开头，并且仅包含由单引号或双引号引起来的字符串）：

```
/^?[ =>]\[(('|")[^('|")\s]*('|")(, ?)?)+\]/ 
```

它应该捕获

```
["bla", "ble", "blo"] 
```

但是，如果它是（单引号或双引号）之间的字符串的一部分，则不应捕获它：

```
'["bla", "ble", "blo"]' 
```

我应该添加什么来避免捕获那些不需要的案例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:38:54.007

向您的模式添加一个否定的后向/前瞻表达式：

`(?<!['])(?!['])(\[(('|")[^('|")\s]*('|")(, ?)?)+\])`

测试时为我工作，但这可能取决于您的正则表达式引擎。

# ruby-on-rails - 用户关注帖子的迁移

> ID：16116221
> 
> 赞同：0
> 
> 时间：2013-04-20T03:25:29.103
> 
> 标签：ruby-on-rails

在我的应用程序中，我有用户和项目的模型。

我希望用户能够关注许多项目。因此，用户拥有_许多项目，并且项目属于_不仅创建它们的用户，而且还有关注它们的用户。

所以我生成了一个名为的迁移`ProjectRelationship`并试图让它在下面流动，但它似乎不起作用。有人可以帮我修复我的关联吗？

谢谢您的帮助！

**project_relationship.rb**

```
class ProjectRelationship < ActiveRecord::Base
  belongs_to :user
  belongs_to :project
end 
```

**项目.rb**

```
belongs_to :user
has_many :project_relationships
has_many :followers, through: :project_relationships, source: :user 
```

**用户.rb**

```
has_many :projects
has_many :project_relationships
has_many :projects_followed, through: :project_relationships, source: :project 
```

**架构.rb**

```
create_table "project_relationships", :force => true do |t|
  t.integer  "follower_id"
  t.datetime "created_at",     :null => false
  t.datetime "updated_at",     :null => false
  t.integer  "projectuser_id"
end

add_index "project_relationships", ["follower_id"], :name => "index_project_relationships_on_follower_id", :unique => true
add_index "project_relationships", ["projectuser_id"], :name => "index_project_relationships_on_projectuser_id" 
```

**项目/show.html.erb**

```
<%= @project.followers.count %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:56:13.990

您需要指定外键。ProjectRelationship 模型将期望相应的表具有“user_id”和“project_id”列。但是，您使用了不同的名称。所以要么指定外键：

```
class ProjectRelationship < ActiveRecord::Base
  belongs_to :user, foreign_key: "follower_id"
  belongs_to :project, foreign_key: "projectuser_id"
end 
```

或更改迁移中的列名：

```
create_table :project_relationships do |t|
  t.integer :user_id
  t.integer :project_id
  ...
end 
```

您还需要在其他模型中指定外键：

```
class Project < ActiveRecord::Base
  belongs_to :user
  has_many :project_relationships, foreign_key: "projectuser_id"
  has_many :followers, through: :project_relationships, source: :user
end

class User < ActiveRecord::Base
  has_many :projects
  has_many :project_relationships, foreign_key: "follower_id"
  has_many :projects_followed, through: :project_relationships, source: :project
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T01:27:28.227

@roma149 - 感谢您的回复。我更新了控制器、路线和你所说的。不会产生错误，但是当我单击 _follow.html.erb 中的按钮跟随时，它似乎没有跟随项目或更新计数“@project.followers.count”

将详细信息移至此处：[为什么我的用户关注/取消关注按钮不起作用？](https://stackoverflow.com/questions/16136997/ruby-on-rails-user-follow-unfollow-button)

# android - java.lang.SecurityException：目标必须在外部存储上

> ID：16116224
> 
> 赞同：3
> 
> 时间：2013-04-20T03:26:09.243
> 
> 标签：android

在android TV中，U盘挂载/mnt/usb/sdb4，使用android DownloadManage，

```
 File pathyr = new File("/mnt/usb/sdb4");
            Uri downloadUri = Uri.parse(DOWNLOAD_FILE);
            DownloadManager.Request request = new DownloadManager.Request(downloadUri);
            request.setDestinationUri(Uri.fromFile(new File( pathyr,"100mb.jpg") )); 
```

* * *

```
04-20 10:54:05.593: W/dalvikvm(2315): threadid=1: thread exiting with uncaught exception (group=0x40f771f8)
04-20 10:54:05.665: E/AndroidRuntime(2315): FATAL EXCEPTION: main
04-20 10:54:05.665: E/AndroidRuntime(2315): java.lang.SecurityException: Destination must be on external storage: file:///mnt/usb/sdb4/100mb.test.test
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.os.Parcel.readException(Parcel.java:1327)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:181)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:135)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.content.ContentProviderProxy.insert(ContentProviderNative.java:415)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.content.ContentResolver.insert(ContentResolver.java:730)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at com.exercise.download.DownloadManager.enqueue(DownloadManager.java:750)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at com.exercise.AndroidDownloadManager.AndroidDownloadManagerActivity$1.onClick(AndroidDownloadManagerActivity.java:71)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.view.View.performClick(View.java:3511)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.view.View.onKeyUp(View.java:6073)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.widget.TextView.onKeyUp(TextView.java:5595)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.view.KeyEvent.dispatch(KeyEvent.java:3010)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.view.View.dispatchKeyEvent(View.java:5500)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1879)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1361)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.app.Activity.dispatchKeyEvent(Activity.java:2325)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1806)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3327)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.view.ViewRootImpl.handleFinishedEvent(ViewRootImpl.java:3300)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2460)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.os.Looper.loop(Looper.java:137)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at java.lang.reflect.Method.invokeNative(Native Method)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at java.lang.reflect.Method.invoke(Method.java:511)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:853)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:579)
04-20 10:54:05.665: E/AndroidRuntime(2315):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-04T09:37:29.097

目前，`DownloadManager`请求仅接受“标准”外部存储上的路径，由`Environment.getExternalStoragePublicDirectory(yourDirOfChoice)`or检索`Environment.getExternalStorageDirectory()`；否则，它会抛出此异常。

有关详细信息，请参阅[此](https://stackoverflow.com/questions/13646669/android-securityexception-destination-must-be-on-external-storage)StackOverflow 问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-01T14:11:14.753

这不适用于 Android Pie。你需要打电话

```
.setDestinationInExternalFilesDir()
//Pasing in the getFilesDir().absolutePath, your file 
```

# perl - 使用带有嵌套 for 循环的正则表达式，使用 Perl

> ID：16116225
> 
> 赞同：1
> 
> 时间：2013-04-20T03:26:18.100
> 
> 标签：perl

我有两个数组：

*   `@file_list`保存目录中的文件列表，并且
*   `@name_list`拥有一些名字。

例如，这些数组可能包含

```
@file_list = ('Bob_car', 'Bob_house', 'Bob_work', 'Fred_car', 'Fred_house', 'Fred_work', ...);
@name_list = ('Bob', 'Fred', ...); 
```

（真实数据没那么简单）。

**我的目标**是将每个文件与每个名称进行比较，看看它们是否匹配。如果文件字符串以名称开头，它们匹配。

然后，我可以使用这些匹配项根据文件对应的名称将文件分类到新目录中。

这是我的代码：

```
for ( my $i = 0; $i < scalar @file_list ; $i++ )
   {
    for ( my $j = 0; $j < @name_list ; $j++ )
        {
         if ( $file_list[ $i ] =~ m/^$name_list[ $j ]/ )
            {
             print "$file_list[ $i ] goes with $name_list[ $j ]\n"; 
            } 
         else
            {
             print "no match\n";   
            }
        }
   } 
```

但是，我没有得到任何匹配。我已经测试了各个循环并且它们正在工作。否则，正则表达式有什么问题吗？

### 关于数组是如何制作的：

对于`@name_list`，包含名称的文件以看似随机的方式组织，只是因为它被用于其他用途。该文件中的名称位于几个不同的行上，中间有很多空白行，行内有很多空白条目。名称可以出现多次。

我使用以下代码制作`@name_list`：

```
while (my $line = <$OriginalFILE>) 
    {
     chomp $line;
     my @current_line = split( "\t", $line );

     for ( my $i = 0; $i < scalar @current_line ; $i ++ )
         {
          if ( $current_line[ $i ] =~ m/^\s*$/ )
             {
              # print "$current_line[$i] is blank\n"; 
             }
          else 
             {
              push( @raw_name_list, $current_line[ $i ] );   
             }
         } # end of for
    } # while

# collect list without repeat instances of the same name

my %unique = ();
foreach my $name (@raw_name_list)
    {
     $unique{$name} ++;
    }
my @name_list = keys %unique; 

foreach my $name ( @name_list )
   {
    # print "$name\n";
    chomp $name; 

    unless(mkdir $name, 0700) 
        {
         die "Unable to create directory called $name\n";
        }
   } 
```

该阵列`@file_list`是使用：

```
opendir(DIR, $ARGV[1]);                             
my @file_list = grep ! /^\./, readdir DIR;
closedir(DIR); 
# print @file_list; 
```

@amon，这是我为测试循环和正则表达式所做的：

```
FILE: for my $file (@transposed_files) {
  print "$file\n";
  for my $name (@transposedunique) {
    print "i see this $name\n";
    if ($file =~ /^\Q$name\E/) {
      print "$file goes with $name\n";
      next FILE;
    }
  }
  #print "no match for $file\n";
} 
```

哦，我转置了数组，以便它们将打印到一个 outfile 到单独的行中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:06:25.243

简短版本：您正在构建错误的名称数组。看看这一行：

```
$unique{name} ++; 
```

您只是在增加`name`哈希的条目。你可能想要这个`$name`变量。

## 更长的版本

### 关于英语和 Foreach 循环

你的代码有点不成熟，看起来更像 C 而不是 Perl。Perl 比你想象的更接近英语。从您问题的原始措辞：

> 取第一个元素`@file_list`，然后将其与中的每个元素进行比较`@name_list`

你把它写成

```
for (my $i = 0; $i < @file_list; $i++) {
  for (my $j = 0; $j < @name_list; $j++) {
    ...; # compare $file_list[$i] with $name_list[$j]
  }
} 
```

我宁愿做

```
for my $file (@file_list) {
  for my $name (@name_list) {
    ...; # compare $file with $name
  }
} 
```

并让自己免于数组下标的麻烦。

### 建立正确的正则表达式

您的代码包含以下测试：

```
$file_list[ $i ] =~ m/^$name_list[ $j ]/ 
```

`$name_list[$j]`如果包含特殊字符，如`(`, `.`, ，这将不会按照您的想法进行`+`。您可以通过将变量括在 中来匹配变量的文字内容`\Q ... \E`。这将使代码

```
$file =~ /^\Q$name\E/ 
```

（如果与我的循环变体一起使用）。

您也可以走漂亮的路线并直接比较前导子字符串：

```
$name eq substr $file, 0, length($name) 
```

这表示相同的条件。

### 循环控制

我会做两个假设：

1.  您只对任何文件的第一个匹配名称感兴趣
2.  `no match`如果找不到名称，您只想打印消息

Perl 允许我们跳出任意循环，或者重新开始当前的迭代，或者直接进入下一个迭代，而无需像在其他语言中那样使用标志。我们所要做的就是将我们的循环标记为`LABEL: for (...)`.

因此，一旦我们找到匹配项，我们就可以开始搜索下一个文件。`no match`此外，如果我们离开内部循环而不进入下一个文件，我们只想打印。这段代码做到了：

```
FILE: for my $file (@file_list) {
  for my $name (@name_list) {
    if ($file =~ /^\Q$name\E/) {
      print "$file goes with $name\n";
      next FILE;
    }
  }
  print "no match for $file\n";
} 
```

### 否定之禅

在您的文件解析代码中，您表达了一个条件

```
if ($field =~ /^\s*$/) {
} else {
  # do this stuff only if the field does not consist only of
  # zero or more whitespace characters
} 
```

这种描述远非复杂。怎么样

```
if ($field =~ /\S/) {
  # do this stuff only if the field contains a non-whitespace character.
} 
```

相同的条件，但更简单，更高效。

### 简化您的解析

总之，你的文件解析代码可以浓缩为

```
my %uniq;
while (<$OriginalFILE>) {
  chomp;
  $uniq{$_} = undef for grep /\S/, split /\t/;
}
my @name_list = sort { length($b) <=> length($a) } keys %uniq; 
```

该`split`函数将正则表达式作为第一个参数，`$_`如果没有指定其他字符串，则将拆分。它返回一个字段列表。

该`grep`函数接受一个条件和一个列表，并将返回列表中与条件匹配的所有元素。当前元素是 in `$_`，默认情况下匹配正则表达式。有关正则表达式的解释，请参见上文。

*注意：*这仍然允许字段包含空格，即使处于领先位置。要拆分所有空格，您可以提供`split`包含单个空格的字符串的特殊参数：`split ' '`. 这将使`grep`不必要的。

`for`循环也可以用作*语句修饰符*，即like `EXPR for LIST`。当前元素在`$_`. `$_`我们为哈希中的条目分配了一些东西`%uniq`（它已经初始化为空哈希）。这可以是一个数字，但`undef`也可以。

密钥以看似随机的顺序返回。但是由于多个名称可以匹配一个文件，但我们只想选择一个匹配项，我们必须首先匹配最具体的名称。因此，我按照名称的长度按降序对名称进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T03:39:14.863

你的代码似乎对我有用。我所做的只是构造两个这样的数组：

```
my @file_list = qw/Bob_car Bob_house Bob_work Fred_car Fred_house Fred_work/;
my @name_list = qw/Fred Bob Mary/; 
```

然后运行您的代码会产生如下输出：

```
no match
Bob_car goes with Bob
no match
no match
Bob_house goes with Bob
no match
no match
Bob_work goes with Bob
no match
Fred_car goes with Fred
no match
no match
Fred_house goes with Fred
no match
no match
Fred_work goes with Fred
no match
no match 
```

所以看起来它正在工作。

从文件或用户读取输入的一个常见问题是忘记从输入末尾删除换行符。这可能是你的问题。如果是这样，请阅读有关`perldoc -f chomp`，以及`chomp`将其添加到数组中的每个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T20:12:27.370

我总是对以高效的方式做事很感兴趣，所以每次我看到 O(N^2) 算法都会为我敲响警钟。为什么它应该是 O(N*M) 而不是 O(N+M)？

```
my $re = join('|',map quotemeta, @name_list);
$re = qr/$re/;
for my $file (@file_list) {
  if($file =~ /^($re)/) {
    my $name = $1;
    ... do what you need
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T04:25:27.357

它在循环中看起来有问题。

遵循代码中的注释

```
for ( my $i = 0; $i < scalar @file_list ; $i++ )
{
    #use some string variable assign it ""
for ( my $j = 0; $j < @name_list ; $j++ )
    {
     if ( $file_list[ $i ] =~ m/^$name_list[ $j ]/ )
        {
        # assign string variable to founded name_list[$j]  
        break loop
        } 

    }
     # check condition if string not equal to  "" match found print your requirement with string value else match not found

} 
```

# javascript - 多个英雄单位高度相同

> ID：16116228
> 
> 赞同：0
> 
> 时间：2013-04-20T03:26:40.507
> 
> 标签：javascript, html, css, twitter-bootstrap

我有一个里面`<div>`有三个`span4`s，`hero-unit`每个里面都有一个`span4`。每个英雄单元内都有一些文字和图片。

这是一个演示：http: [//jsfiddle.net/GGMWX/256/](http://jsfiddle.net/GGMWX/256/)

还有代码，以防将来链接中断：

```
<div class="row-fluid"> 
    <span class="span4">
        <div class="hero-unit" id="col1">
            <h1 class="heading">One</h1>
            <p>Lorem ipsum</p>
            <img src="http://dummyimage.com/100x400/000/fff" class="image" />
        </div>
    </span>
    <span class="span4">
        <div class="hero-unit" id="col2">
            <h1 class="heading">Two</h1>
            <p>Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum </p>
            <img src="http://dummyimage.com/100x200/000/fff" class="image" />
        </div>
    </span>
    <span class="span4">
        <div class="hero-unit" id="col3">
            <h1 class="heading">Three</h1>
            <p>Lorem ipsum Lorem ipsum Lorem ipsum</p>
            <img src="http://dummyimage.com/100x200/000/fff" class="image" />
        </div>
    </span>
</div> 
```

我一生无法弄清楚如何使所有英雄单位的高度相同。我尝试了以下方法，但由于各种原因，它们都不起作用（其中一些只适用于没有图片的文本，其中一个只适用于外部 div 标签内没有标签的纯文本）。或者也许我错过了一些东西——我对此很陌生。

[http://tomdeater.com/jquery/equalize_columns/](http://tomdeater.com/jquery/equalize_columns/)

[http://jsfiddle.net/4HxVT/](http://jsfiddle.net/4HxVT/)

[http://www.filamentgroup.com/examples/equalHeights/](http://www.filamentgroup.com/examples/equalHeights/)和[http://www.filamentgroup.com/lab/setting_equal_heights_with_jquery/](http://www.filamentgroup.com/lab/setting_equal_heights_with_jquery/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:40:41.077

加载文档后，您必须迭代项目，获取最高的项目，然后将它们全部设置为该高度，如下所示：

```
highest = null
hi = 0;
$(".hero-unit").each(function(){
    var h = $(this).height();
    if(h > hi){
        hi = h;
        highest = $(this);  
    }    
});
if(highest !== null){
    $('.hero-unit').css('height', highest[0].scrollHeight + "px");
} 
```

[http://jsfiddle.net/GGMWX/261/](http://jsfiddle.net/GGMWX/261/)

# javascript - 在某些链接上禁用浏览器 onUnload？

> ID：16116230
> 
> 赞同：3
> 
> 时间：2013-04-20T03:27:02.937
> 
> 标签：javascript, jquery, callback, onunload

我正在使用具有 DNS 记录管理器的 Web 托管面板。我必须使用大量的 JavaScript 才能使它几乎像桌面应用程序一样运行。

我真的很想在浏览器运行时显示一个自定义对话框窗口`beforeunload`但是经过一些研究我发现我被卡在使用浏览器默认对话框窗口。

所以下面的这段 JavaScript 代码就是这样做的，我的问题是我需要确保它不会在某些链接点击时被触发。

我希望能够维护一个 CSS 类名数组，如果点击的链接在这个数组中，那么它不会显示 onunload 事件。

我确信这对于 JavaScript 开发人员来说很容易。有人可以告诉我怎么做吗？

```
//sample Class array
safeLinks = ['test', 'test2', 'test3', 'test4', 'test5'];

// onunload event
$(window).on('beforeunload', function(){
  return 'Are you sure you want to leave?';
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T03:41:28.717

您可以在单击事件处理程序时删除它们：

```
var safeLinks = ['.test', '.test2', '.test3', '.test4', '.test5'];

function promptBeforeClose() {
    return 'Are you sure you want to leave?';
}

$(window).on('beforeunload', promptBeforeClose);

$(document).on('click', safeLinks.join(', '), function(e) {
    $(window).off('beforeunload', promptBeforeClose);
}); 
```

此外，如果这些安全链接有一个共同的祖先，请使用它而不是`document`作为委托父级，否则人们会抱怨。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T03:31:19.610

使用标志变量。当点击 onload 然后将其设置为 true

```
$(window).on('beforeunload', function(){
 if(flag != false)
  return 'Are you sure you want to leave?';
}); 
```

# django - Django Multiple Authentication Backends Based On Status

> ID：16116234
> 
> 赞同：4
> 
> 时间：2013-04-20T03:27:32.033
> 
> 标签：django, django-models, python-2.7, django-admin, django-authentication

I was wondering how to tell Django which authentication backend to use based on if the user is marked as staff or if they are not.

Can this be done?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T08:30:31.307

Since the authentication backend is used by Django to get the user object, it is not known at the time we're calling the backend wether the user will be marked as staff or not.

Is is still possible to use different backends for staff and non-staff user, by chaining backends as explained in [Specifying authentication backends](https://docs.djangoproject.com/en/2.1/topics/auth/customizing/#specifying-authentication-backends). For example if your settings are:

```
 AUTHENTICATION_BACKEND = (
     'myapp.auth.StaffUserBackend',
     'django.contrib.auth.backends.ModelBackend',
 ) 
```

where `myapp.auth.StaffUserBackend` only recognizes staff users, this will happen when an user authenticates:

*   The credentials are checked against `StaffUserBackend`.
*   If the user is staff and the credentials are correct, `StaffUserBackend` returns the user object and we're done.
*   If the user is not staff, credentials are checked against `ModelBackend`.
*   If the credentials are valid for a standard user, `ModelBackend` returns the `User` object and the user is authenticated as usual.
*   If the credentials are not accepted by any backend, the authentication fails.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T19:34:03.437

As Django Runs all the backends one after another. What you can do is use the authenticate function in your views.py file.

For example you want check for staff user then

```
email = form.cleaned_data['email']
try:
    name = StaffUser.objects.get(email=email)
except StaffUser.DoesNotExist:
    return "Do whatever you want"
user = authenticate(username=form.cleaned_data['email'], password=form.cleaned_data['password']) 
```

In this your autheticaton function will be called only when the user exists.

This is kind of rough idea use it as per your convenience.

# php - 使用 php 创建精灵

> ID：16116241
> 
> 赞同：0
> 
> 时间：2013-04-20T03:28:44.330
> 
> 标签：php, image, sprite

基本上，我的默认 css 精灵已经存储在我的文件夹中。我现在真正想要的是允许用户上传图像并将特定图像附加到我的默认精灵末尾，以便我可以出于不同目的检索它。如何使用 PHP 实现这一点？

# macos - 使用 IOKit IOHIDDeviceSetReportWithCallback 写入 USB HID 设备

> ID：16116245
> 
> 赞同：3
> 
> 时间：2013-04-20T03:29:20.113
> 
> 标签：macos, asynchronous, usb, hid, iokit

我正在尝试使用 IOKit 中的 IOHIDManager 与 USB HID 设备进行异步通信。`IOHIDDeviceRegisterInputReportCallback`我在注册回调和设置报告时没有问题`IOHIDDeviceSetReport`。但是当我尝试使用`IOHIDDeviceSetReportWithCallback`与设备进行通信时，这是不行的。

错误是 kIOReturnUnsupported (0xE00002C7)。

这是来自苹果 USB 邮件列表的一位绅士的链接。

[http://lists.apple.com/archives/usb/2009/Oct/msg00004.html](http://lists.apple.com/archives/usb/2009/Oct/msg00004.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T22:26:27.803

我不想认为对上述消息的这个[响应](http://lists.apple.com/archives/usb/2009/Oct/msg00005.html)是正确的，但我可以确认，这个方法没有实现。以下是 Apple 开发者技术支持的部分回复：

> 查看源代码 IOHIDDeviceSetReportWithCallback 只是调用 (*device->deviceInterface)->setReport; 理论上应该是IOKIT HID驱动……看看它只是返回kIOReturnUnsupported……</p>

# .htaccess - 如何执行 htaccess 重写

> ID：16116249
> 
> 赞同：0
> 
> 时间：2013-04-20T03:29:41.320
> 
> 标签：.htaccess, rewrite

这是我的问题的摘要。

我创建了一个 Facebook 赞按钮。它在大多数情况下都能正常工作，但在点击某人实际“喜欢”帖子的链接时却无法正常工作。似乎 Facebook 正在向 URL 添加更多信息。例如，我有

www.example.com/blog.php/6

但 Facebook 补充说

www.example.com/blog.php/6?fb_action_ids=10201090685057512&fb_action_types=og.likes&fb_source=aggregation&fb_aggregation_id=288381481237582

当用户点击此链接时，他们会收到 Mysql 语法错误。如果他们遵循第一个链接，则没有问题。我以为我可以从 URL 中删除所有额外的文本。

我创建了一个 .htaccess 文件并将其放在 GoDaddy 上的根目录中。我尝试了几种不同的重写。

没有任何效果。这是我尝试过的最新想法： Options +FollowSymlinks
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.*&)?fb_action_ids=
RewriteRule ^(.*)$ $1?%1 [R=301]

我需要更改我的 .htaccess 文件还是有其他方法可以解决这个问题？

谢谢您的帮助。

# javascript - 如何合并使 PhotoBooth 和人脸检测协同工作？

> ID：16116255
> 
> 赞同：1
> 
> 时间：2013-04-20T03:31:10.597
> 
> 标签：javascript, merge, html5-canvas, computer-vision, face-detection

这可能是一个非常简单的解决方案，但我根本无法弄清楚，所以我正在尝试获取 PhotoBooth.js 和此处看到的人脸检测脚本人[脸检测 JavaScript](https://github.com/orls/ccv-purejs)要在同一页面中工作，我想在 PhotoBooth 窗口中检测人脸。我在这里有一个关于 jsfiddle 的 PhotoBooth 工作演示：[JSfiddle PhotoBooth Demo](http://jsfiddle.net/fgq7L/54/)

根据我对示例代码的理解，您需要正确识别画布吗？示例代码是

```
var face_detect = require('face_detect'),
Canvas = require('canvas');

// ... initialize a canvas object ...

var result = face_detect.detect_objects({ "canvas" : myCanvas,
  "interval" : 5,
  "min_neighbors" : 1 });

console.log('Found ' + result.length  + ' faces.');

for (var i = 0; i < result.length; i++){
  var face =  result[i];
  console.log(face);
} 
```

那么我将如何让这个示例代码与 photobooth 一起使用呢？非常感谢任何帮助以帮助新手！

# tooltip - Kendo UI 工具提示错误

> ID：16116260
> 
> 赞同：1
> 
> 时间：2013-04-20T03:32:08.370
> 
> 标签：tooltip, kendo-ui

我在使用 KENDO UI 的工具提示时遇到了一些错误。我想为我的输入字段显示帮助消息，因此我将工具提示的位置设置在右侧，但它显示在输入字段的右上角。此外，当我将鼠标移到输入字段上时，页面的标题会发生变化。如果我设置 autoClose: false 那么工具提示中有 2 个 X 按钮。

示例标记和 JavaScript

```
<input type="text" title="Please enter firstname." id="txtFirstname" />

    $("#txtFirstname").kendoTooltip({
        autoHide: false,
        callout: false,
        showOn: "focus",
        position:"right"
    }); 
```

请帮助修复这些错误

谢谢普拉班詹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T15:09:53.507

我认为这些问题已在[2013 年第一季度 SP1（版本 2013.1.514）- 2013 年 5 月](http://www.kendoui.com/web/whats-new/release-notes/q1-2013-sp1.aspx)发布中得到解决。

以下是有关该版本工具提示的版本说明：

修复：打开工具提示时删除文档标题
修复：当其标题属性丢失并且显示为另一个目标时，工具提示内容不会被清除

您是否尝试过使用新版本？

# html - 位置：固定导致margin-top消失？

> ID：16116262
> 
> 赞同：0
> 
> 时间：2013-04-20T03:32:23.207
> 
> 标签：html, css, position, css-float

我想要实现的事情很简单

*   就在顶部一个固定位置的元素，在向下滚动文档时不会移动。
*   之后是 div#content 在窗口的顶部边缘和中心有一些边距顶部。

所以代码是： **html**

```
<div class='head-container' id="headerCom">
    <header id="a"></header>
</div>
<div id="content" role="main"></div> 
```

**CSS**

```
 * {
        margin: 0;
        padding: 0
    }
    body {
        width: 100%;
        height: 100%;
        position: relative;
    }
    .head-container {
        position: fixed;
        top:0;
        left:0;
        width: 100%;
        height: 100px;
        background: red;
        _position:absolute; // make the ie6 support the fixed position
        _top: expression(eval(document.documentElement.scrollTop)); // make the ie6 support the fixed position
    }
    header {
        display: block;
        width: 960px;
        height: 100px;
        margin: 0 auto;
        position: relative;
        zoom: 1;
        background: blue;
    }
    #content {
        border: 1px solid black;
        margin: 130px auto 0 auto;
        width: 960px;
        height: 1000px;
        background: #999;
        margin-top: 150px;
    } 
```

所有现代浏览器都得到了很好的支持，但是在 ie(ie7,ie8,ie10) 中不能正常工作，就像它忽略了我设置为 div#content 的 margin-top；

到目前为止，我已经在 stackoverflow 上检查了另一个问题，并且我几乎尽我所能。

*   **当我将 div#content 的 margin-top 更改为 padding-top 时，一切正常。**

*   **当我在 div.header-container 和 div#conetent 之间放置一个 div.clear(clear:both) 时，一切正常；**

*   ***或者我按照hasLayout*引起的其他问题的解决方案，然后取出div#content的宽度和高度，东西还可以，但是这样我需要再放一个div#inner-content在 div#content 中，并为其设置宽度和高度以查看结果。**

所以我对 hasLayout 感到很困惑，我不太确定我是否完全理解它是什么，也不太确定我的代码中发生了什么。

**所以实际上你能帮我解决这个问题吗，有没有其他解决方案可以解决这个问题，并向我解释这个有线的东西？**

**还是非常感谢。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:03:44.233

一旦我摆脱了最后一个`margin-top`属性，它对我来说很好。你知道你已经设置了两次吗？一次与`margin`他们再次与`margin-top`。如果您只编辑`margin`第一个值，它将不起作用，因为最后一个值将覆盖第一个值。

# playframework - Play 不会将 java-list 转换为 scala-list

> ID：16116264
> 
> 赞同：0
> 
> 时间：2013-04-20T03:32:45.083
> 
> 标签：playframework, playframework-2.0

我有一个控制器，它将模型对象的 java 列表传递给视图，就像在示例中所做的那样。

编译器抛出一个错误，它无法从 转换`java.util.List`为`scala.collection.immutable.List`。我不知道我应该做什么。

```
[error] /myapp/myappsubprojects/frontend/app/controllers/frontend/MyController.java:15: error: method render in class linklist cannot be applied to given types;
[error]         return ok(linklist.render("link test", Link.findAll()));
[error]                           ^
[error]   required: String,scala.collection.immutable.List<Link>
[error]   found: String,java.util.List<Link>
[error]   reason: actual argument java.util.List<Link> cannot be converted to scala.collection.immutable.List<Link> by method invocation conversion
[error] 1 error 
```

注意：我正在使用子项目（普通、前端、后端），我很难让一切正常运行。大概与此有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:30:40.593

我去寻找细节并最终（幸运地）在我的[评论中回答了这个问题](https://stackoverflow.com/questions/16116264/play-doesnt-convert-java-list-to-scala-list?noredirect=1#comment23021814_16116264)

# javascript - Angularjs避免数字过滤器的科学记数法

> ID：16116268
> 
> 赞同：3
> 
> 时间：2013-04-20T03:33:16.683
> 
> 标签：javascript, html, angularjs, scientific-notation

我需要为我的应用打印非常小的数字。我更喜欢它们都以十进制格式显示。有没有办法使用 angularjs 数字过滤器来做到这一点，还是我必须自己编写或以某种方式修改现有的？

[http://jsfiddle.net/ADukg/2386/](http://jsfiddle.net/ADukg/2386/)

Javascript

```
var myApp = angular.module('myApp',[]);

 function MyCtrl($scope) {
   $scope.MyNum1 = 0.000001;
   $scope.MyNum2 = 0.0000001;
 } 
```

HTML

```
<div ng-controller="MyCtrl">
  Small Number: {{MyNum1 | number:8}}<br/>
  Very Small Number: {{MyNum2 | number:8}}
</div> 
```

输出不一致

```
Small Number: 0.00000100
Very Small Number: 1e-7 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T05:31:15.477

I haven't fully tested this and I'm not sure how to get this working on jsfiddle, but this seems to be working for the time being.

Javascript

```
var app = angular.module('myApp', []);

app.filter('decimalFormat', function () {
  return function (text) {
    return parseFloat(text).toFixed(20).replace(/0+$/,'');
  };
}); 
```

HTML

```
<div ng-controller="MyCtrl">
  Small Number: {{MyNum1 | number:8 | decimalFormat}}<br/>
  Very Small Number: {{MyNum2 | number:8 | decimalFormat}}
</div> 
```

**Edit after Langdon's comment, added commas:**

Javascript

```
var app = angular.module('myApp', []);

app.filter('decimal', function () {
  return function (text) {
      var parts = parseFloat(text).toFixed(8).split('.');
      parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      return parts.join('.');
    }
  };
});

function MyCtrl($scope) {
  $scope.MyNum1 = 0.12345678912;
  $scope.MyNum2 = 0.000000100001;
  $scope.MyNum3 = 0;
  $scope.MyNum3 = 1123123.05;
} 
```

HTML

```
<div ng-controller="MyCtrl">
  Small Number: {{MyNum1 | decimal}}<br/>
  Very Small Number: {{MyNum2 | decimal}}<br/>
  Zero: {{MyNum3 | decimal}}<br/>
  Million: {{MyNum4 | decimal}}<br/>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T04:27:48.850

您将不得不自己编写，因为源中现有的过滤器不能处理大的小数位（参见`formatNumber`filters.js [）](https://github.com/angular/angular.js/blob/master/src/ng/filter/filters.js)。最终的问题是`toString`调用它以在您的 HTML 中显示数字。更理想的是，`toFixed`可以调用，但这会变得很棘手，因为您必须计算出小数的长度。

```
console.log(0.000001);
 > 0.000001
console.log(0.0000001);
 > 1e-7
console.log(0.0000001.toFixed(20));
 > 0.00000010000000000000 
```

这是一个快速破解：

```
console.log(0.0000001.toFixed(20).replace(/0+$/, ''));
 > 0.0000001 
```

所以你的自定义过滤器就这么简单。不过，我建议在 GitHub 上提交问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T04:16:14.093

这是为了将**大**数字作为十进制字符串返回，但它也适用于小数字 -

```
Number.prototype.noExponents= function(){
    var data= String(this).split(/[eE]/);
    if(data.length== 1) return data[0]; 

    var  z= '', sign= this<0? '-':'',
    str= data[0].replace('.', ''),
    mag= Number(data[1])+ 1;

    if(mag<0){
        z= sign + '0.';
        while(mag++) z += '0';
        return z + str.replace(/^\-/,'');
    }
    mag -= str.length;  
    while(mag--) z += '0';
    return str + z;
}

var n=1e-7;
n.noExponents();
returned value: (String) '0.0000001'; 
```

# css - div图片从div框切出

> ID：16116271
> 
> 赞同：2
> 
> 时间：2013-04-20T03:34:14.933
> 
> 标签：css, html

当我发现问题并且无法自己解决时，我只是在调整网页设计。

我在同一个 div 中编写了标题和文章图片，并且在 div 的底部有一个边框。我的问题：边框紧跟在标题之后，并且没有整合我的图片。

**看看这个小提琴，看看我的意思：[点击我！](http://jsfiddle.net/JannikS/WEHw4/1/)**

这是我的代码：

```
<div class="latestarticle">   
<a class="articletitle" href="#" >Guitar Hero Experts Melt Your Face Off</a> 
<div class="articlepicture">
</div> 
```

和 CSS：

```
.latestarticle { 
border-bottom: solid 1px #CCC;
padding: 0px;
margin-top: 12px;
font-size: 12px; 
} 

.articletitle {   
color: #CD5700;
text-decoration: none; 
font-weight: bold; 
font-size: 14px;  
margin-bottom: 5px; 
}
.articlepicture {
height: 76px;
width: 136px;
float: left;
margin-top: 12px;
margin-right: 9px;
border: solid #A3A3A3 2px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:47:26.297

用于`disply:inline-block;` 最新文章。请参阅此处 [http://jsfiddle.net/WEHw4/5/](http://jsfiddle.net/WEHw4/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T03:41:16.733

我认为你正在寻找的是一个clearfix。如果您希望父级识别浮动元素的高度，则需要添加一个“clearfix” div 作为浮动元素的兄弟。

```
<div class="latestarticle">   
  <a class="articletitle" href="#">Guitar Hero</a> 
  <div class="articlepicture"></div>
  <div class="clearfix"></div>
</div> 
```

然后在css中定义.clearfix样式：

```
.clearfix { clear:both; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T03:38:49.097

使用 css`display: block`到**.articletitle**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T04:55:30.727

我想知道为什么这不起作用。无论如何，这应该可以工作，将`display: table;`或添加`display: table-cell;`到您的`.latestarticle`. 它工作正常。看**[演示](http://jsfiddle.net/WEHw4/6/)**

**编辑**

哦！我知道这个问题正在发生，因为你已经向左飘了`.articlepicture`，我希望你想做演示。

我已经`<div class="articlegroup"></div>`为你的`.articlepicture`div 添加并定义了它`display: inline-block;`

**[演示](http://jsfiddle.net/WEHw4/8/)**

# facebook - 将照片从我的系统上传到公司 Facebook 页面，无需用户单独验证

> ID：16116275
> 
> 赞同：0
> 
> 时间：2013-04-20T03:34:51.477
> 
> 标签：facebook, coldfusion

我有一个应用程序，我的员工可以在其中上传特定旅行的照片。我的首要任务是将照片上传到我的系统以在我的网站和产品展示中使用。但是，每次我的任何员工在我的系统中上传照片时，我都想将照片发送到我们公司的 Facebook 上。最好每张照片都有一个小故事。

我发现的一切似乎都要求每个用户分别使用自己的 Facebook 帐户登录。有没有办法使用我的 Facebook 帐户详细信息对身份验证进行编码，无论用户是谁，然后使用 cffile 拍摄上传到我系统上的照片并将其发送到我们公司的 Facebook 存在？

我会在这里发布代码尝试，但此时我仍然不确定这是否可能。任何指导将不胜感激。

谢谢.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T06:59:43.287

使用您的系统可以在 Facebook 上发布带有一些文字的照片。您需要做的就是访问[developer.facebook.com](https://developers.facebook.com/)并注册一个应用程序并获取所需的身份验证密钥。并遵循图形 API 的文档。ColdFusion Facebook SDK 也可在[Git Hub](https://github.com/affinitiz/facebook-cf-sdk)上使用。这使您的工作更轻松。

# java - 在不应该时返回零

> ID：16116277
> 
> 赞同：1
> 
> 时间：2013-04-20T03:35:12.173
> 
> 标签：java, android, eclipse, return, coordinates

下面的方法一直返回0，我不知道为什么！请帮忙！

```
 currentLocation.setLatitude(38.03211);
    currentLocation.setLongitude(-78.51002); 
```

如果 loc 的经度/纬度是 38.03161, -78.51075,

```
public double getDistance(HistoricalLocation loc) {

    return (double) Math.abs(Math.sqrt((currentLocation.getLatitude() - loc
            .getLatitude())
            * (currentLocation.getLatitude() - loc.getLatitude())
            + (currentLocation.getLongitude() - loc.getLongitude())
            * (currentLocation.getLongitude() - loc.getLongitude())));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:46:20.500

取绝对值的平方根，而不是相反。它可能会出现 NaN ，它只是将它设置为零或类似的东西。

（这修复了它）

# iphone - 在非越狱 iphone 上，我可以在我的应用程序包目录中运行二进制文件吗？

> ID：16116280
> 
> 赞同：2
> 
> 时间：2013-04-20T03:35:47.800
> 
> 标签：iphone, ios, cocoa, sandbox

我的 App 文件夹中有一个可执行的二进制文件。我想使用这个应用程序来运行这个代码，并且我已经用我的证书对代码进行了签名。但我不知道如何启动它。SandBox 配置文件禁止使用 Fork、execvl 和 posix_spawn。有没有其他方法可以启动它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T18:11:43.850

不，这是不可能的。正如您所说，沙盒配置文件禁止它。

# sql - 这个查询有什么作用？

> ID：16116287
> 
> 赞同：1
> 
> 时间：2013-04-20T03:37:30.047
> 
> 标签：sql

我正在为期末考试而学习，这出现在过去的考试中：

> 表：护士-（**nid：int**，nname：string，age：real，salary：real，sid：int）
> 表：主管-（**sid：int**，rating：real）
> 表：WorksIn-（**nid：int**，**hid：int** , hours:real)
> 表：医院 - ( **hid:int** , hname:string, tid:int)
> 表：城镇 - ( **tid:int** , tname:string, mayor:string)
> 
> 解释以下查询检索的内容：
> 
> ```
> SELECT nname
> FROM Nurse N
> WHERE NOT EXISTS
>     (    (SELECT H.hid
>           FROM Hospital H
>           WHERE H.town = ‘Toronto’)
>      EXCEPT
>          (SELECT W.hid
>          FROM WorksIn W
>          WHERE N.nid = W.nid)) 
> ```

这个查询有什么作用？我可以理解子查询返回多伦多所有没有护士工作的医院，但我不知道这与 NOT EXIST 部分有何联系。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T03:47:18.133

分阶段考虑：

```
The set of nurses where 
  there does not exist
    a hospital in Toronto where the nurse doesn't work. 
```

根据排中律，这变成

```
The set of nurses where
  the nurse works in all Toronto hospitals 
```

请注意在与评论员讨论时提出的以下几点：

*   对每个护士单独评估子查询，而不是在所有护士的集合上单独评估
*   也就是说，每个护士使得该护士不工作的多伦多医院的集合是空集。对每位护士的意义，他在多伦多所有医院工作。
*   将子查询读作：“多伦多医院的集合，除了（读作集合差异或减去）护士工作的医院。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:12:03.253

对于每个单独的护士，子查询获取**多伦多的所有医院，**并排除**她/他工作的所有医院**。这给我们留下了**她/他不工作的多伦多医院**。为了满足`NOT EXIST`该护士的此类列表，需要为**空**。所以这位护士必须**在多伦多的每一家医院**工作。

因此，查询返回**在多伦多每一家医院工作的护士**。

鉴于多伦多的规模和医院的数量，这在人道上是不可能的，但这仍然是答案。

# php - 如何通过 php 将类添加到 div 中？

> ID：16116288
> 
> 赞同：0
> 
> 时间：2013-04-20T03:37:33.267
> 
> 标签：php, jquery, wordpress, class, add

我在下面有这个 h 标签，

```
<h3 id="reply-title"> 
```

＆我需要远程添加一个类。

（这个 h3 标签位于 WordPress 核心文件的 comment-template.php（第 1554 行）中，以防您想知道为什么我不能将类硬编码到它。）

我已经用一行 jQuery（在 .load 上添加类）完成了这项工作，但现在我很担心，因为如果关闭了 javascript，则不会添加该类。

我对php知之甚少，我想知道这是否可以在php中完成。我对谷歌做了一些研究，但找不到任何参考资料。

任何可以提供一些见解的php专家？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:42:48.400

这通常是一种不好的做法，但您可以这样做：

```
echo "<script>$('#reply-title').addClass('class')</script>"; 
```

但我再说一遍：**这是一种不好的做法**。Javascript 必须在 .js 文件中，PHP 必须在 .php 文件中。

但是，如果禁用了 Javascript，我认为你不能做你想做的事。

希望这可以帮助。

# ios - UIView中矢量图形的平滑缩放

> ID：16116301
> 
> 赞同：3
> 
> 时间：2013-04-20T03:40:33.597
> 
> 标签：ios, uiview, core-graphics, scale

所以我继承了 UIView 并添加了一些绘图代码。我正在上下缩放生成的视图。我希望这个视图独立于分辨率，以便在任何尺寸下都清晰易读，并且我不需要管理多个图像等。

作为测试，我编写了一些看起来像这样的绘图代码。它创建了适合 UIView 具有的任何帧大小的同心椭圆。实际上外环比框架小一点，所以它没有被夹住。这很好。实际的图形会更复杂，并且包含必须以小尺寸可读的文本和类似性质的东西。

```
- (void)drawRect:(CGRect)rect
{
    UIColor* color = [UIColor colorWithRed: 0.833 green: 0.833 blue: 0.833 alpha: 1];

    float width = self.bounds.size.width;
    float height = self.bounds.size.height;
    float scalePercent = 0.8;

    for(int i = 0; i < 10; i++){

        width  = width * scalePercent;
        height = height * scalePercent;

        float x = (self.bounds.size.width - width) / 2;
        float y = (self.bounds.size.height - height) / 2;

        UIBezierPath* ovalPath = [UIBezierPath bezierPathWithOvalInRect: CGRectMake(x, y, width, height)];
        [color setStroke];
        ovalPath.lineWidth = 2;
        [ovalPath stroke];
    }
} 
```

现在这里是缩放：

```
- (void) makeBig{

    [UIView animateWithDuration:0.5
                          delay:0
                        options:UIViewAnimationOptionBeginFromCurrentState
                     animations:(void (^)(void)) ^{
                         self.transform = CGAffineTransformMakeScale(2, 2);
                     }
                     completion:^(BOOL finished){
                     }];
} 
```

当您运行此视图时，视图会放大，但它是像素化的。它是像素化的，因为视图的大小翻了一番，但它的分辨率没有改变。

所以，这里是如何不这样做。

```
- (void) makeBig{

    [UIView animateWithDuration:0.5
                          delay:0
                        options:UIViewAnimationOptionBeginFromCurrentState
                     animations:(void (^)(void)) ^{
                         self.transform = CGAffineTransformMakeScale(2, 2);
                     }
                     completion:^(BOOL finished){
                         CGRect targetFrame = self.frame;
                         self.transform = CGAffineTransformIdentity;
                         self.frame = targetFrame;
                         [self setNeedsDisplay];
                     }];
} 
```

这可行，但当分辨率恢复到屏幕分辨率时，修复在动画结束时可见。我可以尝试预先放大视图并以最终尺寸预先绘制，然后缩小它，然后运行动画以再次放大它，但由于各种原因，我认为这听起来很愚蠢。我想我可能是错的，这是自火灾以来最聪明的想法。不过我有点怀疑。

那么矢量内容的平滑比例如何做得最好呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:07:11.683

基于视图的动画真的很方便，但如果我没记错的话，它使用`CABasicAnimation`，它只使用一个关键帧。这将是更多的代码，但如果您使用 a`CAKeyframeAnimation`代替，Core Animation 将为每个关键帧重绘动画层的内容（您可以指定这些内容何时发生），因此您可以避免像素化的出现。

# php - 在一个 PHP 页面中包含多个带有 JavaScript 的 HTML 页面

> ID：16116302
> 
> 赞同：1
> 
> 时间：2013-04-20T03:40:38.460
> 
> 标签：php, javascript, jquery, html, include

早些时候我问过修复下面的时钟和 BAM！解决方案几乎是瞬间完成的。从那以后，我成功地将其中的几个时钟添加到了一个 PHP 页面中。东京一份，伦敦一份，马德里一份，丹佛一份——太棒了。我的问题（现在）是我能够做到这一点的唯一方法是“包含”真正由下面的[HTML](http://en.wikipedia.org/wiki/HTML)组成的单个 PHP 页面。如果您在 PHP 页面上“查看源代码”，您会看到其中嵌入了多个 HTML 页面，其中包含打开和关闭 HTML、head 和 body 标记。

我的问题：可以将多个 HTML 页面相互嵌入吗？它适用于所有主要浏览器（[Google Chrome](http://en.wikipedia.org/wiki/Google_Chrome)、Firefox、Internet Explorer、[Safari](http://en.wikipedia.org/wiki/Safari_%28web_browser%29)和[Opera](http://en.wikipedia.org/wiki/Opera_%28web_browser%29)）。我应该以不同的方式解决这个问题吗？我似乎无法在我的 PHP 文件头中调用标题信息并使其工作（特别是对 jQuery 和脚本/jclock.js 的调用）。只要它在第一个时钟上加载，就不需要在后面的时钟上加载，但我似乎无法摆脱 HTML，只使用每个时钟的 JavaScript 代码并回显“ `<div id='us_pacific"></div>`”（这就是时钟的获取方式打印到正文标签内的 HTML 内的页面。）

有什么想法吗？

这是时钟：

```
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="scripts/jclock.js"></script>
        <link rel="stylesheet" href="css/homepage.css">
        <script type="text/javascript">
            $(document).ready(
                function() {
                    if ($('#us_pacific .time').length>0){
                       $('#us_pacific .time').remove();
                    }

                    //Set the offset here
                    var offset = -7;
                    if (offset == '')
                        return;
                    $('#us_pacific').append('<div class="time"></div>');
                    var options = {
                        format:'<span class=\"dt\">%a, %d %b %H:%M</span>',
                        timeNotation: '12h',
                        am_pm: true,
                        utc:true,
                        utc_offset: offset
                    }
                    $('#us_pacific .time').jclock(options);
                });
        </script>
    </head>
    <body>
        <div id="us_pacific"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:03:59.640

对于您的问题：'*可以将多个 HTML 页面相互嵌入吗？*'，答案是：不，你不能`html`在一个文档中有多个标签，这将是一个无效的文档。

假设`jclock.js`编码正确，它应该能够驱动多个实例。

然后，您将在 HTML 中添加一些额外的 container`div`并稍微修改您的 JavaScript 代码（在您拥有的其他版本中查看）以使用自己的选项设置额外的时钟。

您可以将您的代码更改为此（并根据您的喜好重新考虑它）：

```
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="scripts/jclock.js"></script>
        <link rel="stylesheet" href="css/homepage.css">
        <script type="text/javascript">
            $(document).ready(
                function() {
                    var options; // This way you can re-use it without the 'var' keyword.

                    // Timezone 1
                    if ($('#us_pacific .time').length>0){
                        $('#us_pacific .time').remove();
                    }
                    $('#us_pacific').append('<div class="time"></div>');
                    options = {
                        format: '<span class=\"dt\">%a, %d %b %H:%M</span>',
                        timeNotation: '12h',
                        am_pm: true,
                        utc: true,
                        utc_offset: -7  // Now set the offset here
                    };
                    $('#us_pacific .time').jclock(options);

                    //Timezone 2
                    if ($('#eu .time').length>0){
                        $('#eu .time').remove();
                    }
                    $('#eu').append('<div class="time"></div>');
                    options = {
                        format: '<span class=\"dt\">%a, %d %b %H:%M</span>',
                        timeNotation: '12h',
                        am_pm: true,
                        utc: true,
                        utc_offset: 1  // Now set the offset here
                    };
                    $('#eu .time').jclock(options);
                });
        </script>
    </head>
    <body>
        <div id="us_pacific"></div>
        <div id="eu"></div>
    </body>
</html> 
```

我希望这有帮助！

# php - 使用 JQuery/AJAX 从 PHP 检索 JSON 时出错

> ID：16116307
> 
> 赞同：0
> 
> 时间：2013-04-20T03:41:01.777
> 
> 标签：php, javascript, ajax, json, jquery

我正在尝试学习如何在网站上构建图片库。我正在使用**.html** / **.css** / **.js**文件创建页面。我在 Web 服务器上还有一个图像文件夹，其中包含任意数量的图像。我的目标是将包含该文件夹中每个图像 URL 的**img**标签注入到我的 html 中的*照片* **div中。**

我编写了以下**php 脚本**，我在服务器上也有：

```
<?php
    $imagesDir = '../images/art/';
    $images = glob($imagesDir . '*.{jpg,jpeg,png,gif}', GLOB_BRACE);
    echo json_encode($images);
?> 
```

我意识到我可以通过 php 脚本生成整个 html 并绕过 AJAX，但是我不想这样做，因为学习是我的主要目标，我想学习如何通过 AJAX 与 php 交互。

当我在 Web 浏览器中访问 URL ( [http://www.fakedomain.com/php/images.php ) 时](http://www.fakedomain.com/php/images.php)**，php 脚本**的输出格式如下：

```
[
    "../images/art/art01.jpg",
    "../images/art/art02.jpg",
    "../images/art/art03.jpg",
    "../images/art/art04.jpg"
] 
```

然后我尝试在我的 javascript 中进行 AJAX 调用以从 php 文件中检索 JSON。

```
$.getJSON('http://www.fakedomain.com/php/images.php', function(images) {
            $.each(images, function(i, image) {
                $("#photos").append("<a class='fancybox' rel='group' src='" + image + "'/><img  src='" + image + "'/></a>");
            });
        }); 
```

尽管从我看过的其他帖子中这看起来应该非常简单，但我得到了错误，并且似乎没有代码在回调函数中执行。我什至刚刚尝试在页面上直接在 Chrome Javascript 控制台中调用下面的 javascript，但我得到了一个冗长的错误。

**进入 Chrome Javascript 控制台**：

```
$.getJSON('http://www.domain.com/php/images.php', function(images) { console.log("test") }); 
```

**冗长的错误**：

```
Object {readyState: 1, getResponseHeader: function, getAllResponseHeaders: function, setRequestHeader: function, overrideMimeType: function…}
abort: function (e){var t=e||T;return l&&l.abort(t),k(0,t),this}
always: function (){return i.done(arguments).fail(arguments),this}
complete: function (){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this}
done: function (){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this}
error: function (){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this}
fail: function (){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this}
getAllResponseHeaders: function (){return 2===x?a:null}
getResponseHeader: function (e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t}
overrideMimeType: function (e){return x||(p.mimeType=e),this}
pipe: function (){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()}
progress: function (){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this}
promise: function (e){return null!=e?b.extend(e,r):r}
readyState: 0
responseText: ""
setRequestHeader: function (e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this}
state: function (){return n}
status: 0
statusCode: function (e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this}
statusText: "error"
success: function (){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this}
then: function (){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()}
__proto__: Object 
```

我将不胜感激任何帮助。我已经阅读了许多类似的 StackOverflow 帖子并尝试了他们的解决方案但没有成功。我觉得我必须在这里遗漏一些基本的东西。

非常感谢您抽出宝贵时间提供帮助。

**编辑：**

Arun 的评论让我知道我需要从同一个域调用 php 脚本，这是引导我通过将我的代码部署到 php 脚本所在的 Web 服务器来解决此问题的线索。即便如此，当我的 AJAX 使用绝对路径调用 php 脚本时，我还是遇到了错误。一旦我切换到使用相对路径，它就可以正常工作。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:47:51.353

也许尝试添加

```
header( 'Content-Type: application/json' ); 
```

`echo`在PHP 脚本中的语句之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:45:03.723

我的问题有一个两部分的解决方案。我相信根本原因是我的 php 脚本位于与我尝试使用 AJAX 调用它的站点不同的域上（*当我仍在本地测试站点时，php 脚本位于我的 Web 服务器上*）。

1.  我曾在服务器端运行我的 php 脚本在本地测试我的网站。正如@ArunKillu 在他的评论中提到的那样，跨域请求导致我对 php 脚本的 AJAX 调用失败。一旦我将我的站点部署到与 php 脚本相同的域上，这不再是问题。

2.  我不知道为什么，但只要我从我的 AJAX 调用中指定了 php 脚本的绝对路径，它就会失败。我认为这与确保请求来自同一个域有关。一旦我切换到使用相对路径来调用 php 脚本，我就没有问题了。

感谢参与此讨论的每个人的帮助。

# c# - 使用 C# 作为 C# 应用程序的脚本语言

> ID：16116308
> 
> 赞同：6
> 
> 时间：2013-04-20T03:41:09.553
> 
> 标签：c#, scripting

我开发了一个应用程序，它使用 c# 脚本文件进行某些配置和设置。脚本文件包含各种用户生成的对象和这些对象的某些功能。目前，用户必须使用第三方编辑器生成一个 .cs 文件并提供我的程序的路径才能使用它。这种方法的缺点是用户在编辑脚本文件时没有自动完成和智能感知支持的灵活性。

我想将脚本编辑部分嵌入到我的应用程序中。我可以使用富文本编辑器来做到这一点。但是编码自动完成部分是一个巨大的痛苦。有什么方法可以为用户提供一个程序内编辑器，它也可以自动完成......

用于在程序中动态编译脚本的代码。

```
public String Compile(String inputfilepath)
    {

        CompilerResults res = null;
        CSharpCodeProvider provider = new CSharpCodeProvider();
        String errors = "";

        if (provider != null)
        {
            try
            {
                Assembly asb = Assembly.Load("BHEL.PUMPSDAS.Datatypes, Version=1.0.0.0, Culture=neutral, PublicKeyToken=81d3de1e03a5907d"); 
                CompilerParameters options = new CompilerParameters();
                options.GenerateExecutable = false;
                options.OutputAssembly = String.Format(outFileDir + oName);
                options.GenerateInMemory = false;
                options.TreatWarningsAsErrors = false;
                options.ReferencedAssemblies.Add("System.dll");
                options.ReferencedAssemblies.Add("System.Core.dll");
                options.ReferencedAssemblies.Add("System.Xml.dll");
                options.ReferencedAssemblies.Add("System.Xml.dll");
                options.ReferencedAssemblies.Add(asb.Location);
                res = provider.CompileAssemblyFromFile(options, inputfilepath);
                errors = "";
                if (res.Errors.HasErrors)
                {
                    for (int i = 0; i < res.Errors.Count; i++)
                    {
                        errors += "\n " + i + ". " + res.Errors[i].ErrorText;
                    }
                }
            }

            catch (Exception e)
            {
                throw (new Exception("Compilation Failed with Exception!\n" + e.Message +
                    "\n Compilation errors : \n" + errors + "\n"));
            }

        }
        return errors;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:26:46.973

特别是对于自动完成，您将需要使用两个系统：解析器和反射。

从理论上讲，解析器是一个非常简单的概念，但我敢肯定，要为一种像 C# 一样具有尽可能多的语法糖和上下文敏感关键字的语言编写它并不容易。

由于 .NET 本质上是反射性的，并且提供了反射框架，所以这部分也不应该是令人难以置信的痛苦。反射允许您将包含已编译程序集的面向对象元素以及程序集本身作为对象进行操作。例如，方法将是一个`Method`对象。您可以通过检查`Type`类的成员来了解这个系统，这些成员为反思提供了一个基本的起点。另一个有用的起点是`Assembly`. [像往常一样， MSDN](http://msdn.microsoft.com/en-us/library/ms173183.aspx)有大量结构化格式的“官方”信息。

# haskell - 如何最好地输入“任何包含 m 的单子变压器堆栈”

> ID：16116313
> 
> 赞同：4
> 
> 时间：2013-04-20T03:41:51.693
> 
> 标签：haskell, monad-transformers

我想写函数

```
fixProxy :: (Monad m, Proxy p) => (b -> m b) -> b -> () -> p a' a () b m r
fixProxy f a () = runIdentityP $ do
  v  <- respond a
  a' <- lift (f a)
  fixProxy f a' v 
```

在我尝试运行代理之前，它就像你想的那样工作

```
>>> :t \g -> runRVarT . runWriterT . runProxy $ fixProxy g 0 >-> toListD
(Num a, RandomSource m s, MonadRandom (WriterT [a] (RVarT n)),
  Data.Random.Lift.Lift n m) =>
 (a -> WriterT [a] (RVarT n) a) -> s -> m (a, [a]) 
```

我`RVarT`故意用它来突出`Lift`类的存在`RVar`。`Lift`表示存在一个自然转换`n :~> m`，它应该封装我正在寻找的东西，一个像这样的函数：

```
fixProxy :: (Monad m, Monad n, Lift m n, Proxy p) 
            => (b -> m b) -> b -> () -> p a' a () b n r 
```

是`Lift`正确的答案（这将需要许多孤儿实例）还是有更标准的自然转换 MPTC 可以使用？

* * *

请注意，如下面评论中所述，实际解决方案类似于

```
runRVarT . runWriterT . runProxy 
$ hoistK lift (fixProxy (const $ sample StdUniform) 0) >-> toListD 
```

# ruby - ruby cast方法输入变量作为ruby irb中的字符串

> ID：16116316
> 
> 赞同：0
> 
> 时间：2013-04-20T03:42:00.420
> 
> 标签：ruby, irb

在方法签名中使用时，我将如何强制 irb 的行为将变量标识符视为字符串？

我正在尝试创建一个基于 irb 的计算工具，并且我想减少在 irb shell 中使用此工具的用户的输入。假设我的用户不是 ruby​​ 程序员或对 ruby​​ 的语法了解很多。可能对命令行有一些便利。

我有一个文件

```
calculator.rb 
```

这个文件里面是

```
def calculate(value, units)

... some logic

end 
```

我指示用户像这样启动 irb

```
irb -r path/to/calculator.rb 
```

我指示用户输入

```
calculate(10, inches) 
```

在irb中获取返回值

如何在不要求用户了解他们必须将第二个参数用引号括起来的情况下做到这一点。换句话说，我不希望用户必须输入

```
calculate(10, "inches") 
```

在将用户输入传递给脚本中的方法之前，是否可以将用户输入转换为字符串而不是变量标识符？如果不从根本上破坏 irb shell，我想做的事情可能是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:55:18.617

如果这是针对非程序员的，那么使用`puts`and怎么样`gets`？

```
def calculate
  puts "Which number would you like to convert?"
  number = gets.to_i
  puts "What do you want to convert it to?"
  type = gets
  # your conversion logic
  puts result
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T07:18:09.920

You can actually do it the way you requested using method_missing. Any matching units will get converted to strings instead of raising exceptions.

```
SO_CALC_UNITS = %w[inches feet yards meters parsecs]
def method_missing(method)
  if SO_CALC_UNITS.include?(method.to_s)
    method.to_s
  else
    super(method)
  end
end 
```

# html - 鼠标悬停时如何使文本漂浮在列上？

> ID：16116317
> 
> 赞同：7
> 
> 时间：2013-04-20T03:42:06.470
> 
> 标签：html, css

当我将鼠标悬停在列边缘时，我想让一些文本漂浮在列边缘上，就像我的 IDE 一样：

![](https://i.stack.imgur.com/GHD6m.png)

[这是我到目前为止所得到的](http://jsfiddle.net/mnbayazit/p7fCx/1/)。

如果我将元素定位更改为，我可以让它漂浮在边缘上，`absolute`但它不会“占用任何空间”。

另外，我也不介意在浮动位周围设置边框。

任何人有任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T04:41:37.590

我找到了两种支持这一点的方法。第一个要求您在每个 li 中添加 span 标签，但它似乎适用于所有浏览器。第二个完全按照您的方式使用标记，但不适用于 chrome 和 safari。

所有浏览器：

[http://jsfiddle.net/vkBqg/1/](http://jsfiddle.net/vkBqg/1/)

这个解决方案非常简单，基本上可以归结为：

```
li {
   white-space: nowrap;
   overflow-x: hidden;
   width: 150px;
}

li:hover {
    overflow-x: visible;
} 
```

除了基于 webkit 的浏览器（chrome、safari）之外的所有浏览器：

[http://jsfiddle.net/aeARH/1/](http://jsfiddle.net/aeARH/1/)

这更hackier，需要你改变li的宽度和显示类型，然后强制它换行。li:hover 看起来像这样：

```
overflow-x: auto;
width:auto;
content:"\A";
display:inline; 
```

这两者的要点应该是 position:absolute 当你试图保持元素之间的自然顺序时效果不佳。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T09:48:09.733

我已经尝试过了，并提出了一个根本不需要任何标记更改的解决方案，我已经做了一些测试，它似乎可以在**Chrome 26**、**Safari 5.1.7**、**Firefox 20**、**IE10**、**IE10 中工作在 IE9 模式**和**IE10 在 IE8 模式下**，在所有这些浏览器和浏览器模式下看起来都一样，**在 IE7 模式下使用 IE10**时开始崩溃。

它看起来像这样：

![浮动在列边缘的文本](https://i.stack.imgur.com/Ouqfo.png)

基本上我所做的是设置`float:left`on`li`然后`width:auto`on `li:hover`，这样可以确保文本漂浮在列边缘上。

然后添加边框，我在 之后直接渲染一个伪元素`li`，它继承了前面的宽度`li`。然后我设置了它的边框、边距、高度和行高，以将这个伪元素放在前面的`li`. 我已将 设置`margin-left`为`150px`以确保它仅显示在`li`超过列宽的 's 后面。

为了在右侧添加一些空间，我将 更改`white-space: no-wrap`为`white-space: pre`，这将在 内部保留一些添加的空白`li`（如果添加，则不是必需的，我确实添加了它以使其看起来更漂亮一些）。

这是一个[jsFiddle](http://jsfiddle.net/r3TCy/3/)。

这是HTML：

```
<div>
  <ul>
    <li>some really long text </li>
    <li>some text that doesn't fit into the column width </li>
    <li>yeah dude, this is sample text </li>
    <li>woot woot! double rainbows </li>
  </ul>
</div> 
```

这是CSS：

```
li {
  white-space: pre;
  overflow-x: hidden;
  background-color: #f2f2f2;
  line-height: 21px;
  width: 150px;
  float: left;
  clear: both;
}
li:hover:after {
  content:'';
  height: 19px;
  margin: -21px 0px 0px 150px;
  border-width: 1px 1px 1px 0px;
  border-style: solid;
  display: block;
}
li:hover {
  width: auto;
}
div {
  width:155px;
  border-right: 3px solid;
  background-color: #f2f2f2;
}
ul:before, ul:after {
  content:' ';
  display: table;
}
ul {
  list-style: none;
  padding: 5px 0 5px 5px;
  margin: 0;
}
ul:after {
  clear: both;
}
body {
  margin: 0;
  padding: 0;
} 
```

**更新**

我在 中包含了[Micro clearfix hack](http://nicolasgallagher.com/micro-clearfix-hack/)，`div`现在它根据内容调整高度，而不是固定高度。

**更新 2**

滚动的问题在于，在子元素上设置时，包含元素的宽度实际上是在变化`width:auto`的，因为滚动条在右边，它一直在移动。我尝试使用额外的 wrapper `div`，但似乎不可能从创建滚动条的元素内部的任何位置将内容浮动到滚动条的顶部。我可以让它滚动的唯一方法是设置`overflow:hidden`，`ul`然后使用[jQuery ScrollTo](http://flesler.com/jquery/scrollTo/)插件在`ul`.

[带有滚动的示例 jsFiddle](http://jsfiddle.net/r3TCy/11/)

# css - 如何创建白色css盒子阴影

> ID：16116319
> 
> 赞同：3
> 
> 时间：2013-04-20T03:42:48.317
> 
> 标签：css, shadow

我的网站上有以下框阴影 css。它在 Chrome 中看起来很棒，但 Firefox 和 IE 无法重现我正在寻找的效果。我只想要一个盒子底部的白色实心阴影。我如何使它适用于所有浏览器？

```
box-shadow: 0px 10px -14px 14px #FFF;
-webkit-box-shadow: 0px 10px -14px 14px #FFF;
-moz-box-shadow: 0px 10px -14px 14px rgb(255, 255, 255); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T03:45:52.540

使用[本文](http://css-tricks.com/snippets/css/css-box-shadow/)或此代码：

```
 -moz-box-shadow: 13px 13px 0px 0px #FFFFFF;
    -webkit-box-shadow: 13px 13px 0px 0px #FFFFFF;
     box-shadow: 13px 13px 0px 0px  #FFFFFF; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T03:51:26.257

通过简单地删除供应商前缀行，我已经让它在 IE9 和 FF 中工作。您只需要：

```
box-shadow: 0px 10px -14px 14px #FFF; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:01:10.587

阴影大小为负值：

```
box-shadow: 0px 10px -14px 14px #FFF; 
```

负`14px`阴影什么都不是，因为它的大小小于 0。如果您正在寻找`inset`阴影，只需将其添加到样式中：

```
box-shadow: inset... 
```

解决方案，更改`-14px`为`14px`.

# less - 在 LESS 中，是否可以从位图文件中获取图像尺寸？

> ID：16116320
> 
> 赞同：8
> 
> 时间：2013-04-20T03:42:49.760
> 
> 标签：less

我发现自己在我的 LESS 样式表中硬编码了一些图像宽度数字。

可以让 LESS 功能自动执行此操作吗？例如

```
@banner-width : image-width("image/banner.png"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T13:49:30.663

如果您使用的是 less (less.js)的**javascript实现，则可以在反引号之间使用 javascript 插值并使用普通的 javascript 功能 - 如下所示：**

```
@banner-width: ~`function(imguri){var img=new Image(); img.src = imguri; return img.width }('image/banner.png')`; 
```

或者更进一步，制作可重用的 mixin。

**较少的：**

```
.width(@img) {
  @width: ~`function(imguri){var img=new Image(); img.src = imguri; return img.width }(@{img})`;
    width: @width;
}
.height(@img) {
  @height: ~`function(imguri){var img=new Image(); img.src = imguri; return img.height }(@{img})`;
    height: @height;
}

.test{
    @src: 'http://www.google.com/intl/en_ALL/images/logo.gif';
    .width(@src);
    .height(@src);
} 
```

输出**CSS：**

```
.test {
  width: 276;
  height: 110;
} 
```

这正是这个标志应该是什么[http://www.google.com/intl/en_ALL/images/logo.gif](http://www.google.com/intl/en_ALL/images/logo.gif)

*   **添加您可以使用的单位**，然后添加`unit(@dimension,px)`到 mixins 中。

# android - 在 FragmentPagerAdapter 中使用上下文

> ID：16116322
> 
> 赞同：11
> 
> 时间：2013-04-20T03:43:03.700
> 
> 标签：android, android-context

我无法在`FragmentPagerAdapter`. `RadioGroup(this)`给我未定义的错误。我用它`getContext()`代替了这个但无法实现

```
private static class MyFragmentPagerAdapter extends FragmentPagerAdapter {  

final RadioGroup rg = new RadioGroup(this);  // what can I use instead of "this" ?

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-20T03:53:32.940

我不确定你为什么要在 FragmentPagerAdapter 中实例化 RadioGroup，但无论如何你可以通过修改类的构造函数来获取上下文：

```
private Context context; 

/** Constructor of the class */
public MyFragmentPagerAdapter(FragmentManager fm, Context c) {
    super(fm);
    context = c;
} 
```

然后，您可以在创建 FragmentPagerAdapter 时添加上下文。

# c++ - 如何确定，我输入的是什么类型

> ID：16116327
> 
> 赞同：0
> 
> 时间：2013-04-20T03:43:45.413
> 
> 标签：c++

我有未定义类型的迭代器：

```
 for (typename Type::const_iterator hayStackIterator = hayHeap.begin(); hayStackIterator != hayHeap.end(); ++hayStackIterator) {
           //some inner logic
} 
```

并且很高兴知道我`*hayStackIterator`能够根据这些信息修改内部逻辑的类型是什么......是否有一些简单的功能可以制作这样的东西？

```
if (*hayStackIterator.isInstanceOf(vector<string>){
//do something
} else if (*hayStackIterator.isInstanceOf(string){
//do something else
} 
```

我可以使用这些`includes`：

```
#include <cctype>
#include <iostream>
#include <iomanip>
#include <set>
#include <list>
#include <map>
#include <vector>
#include <queue>
#include <string> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T03:46:51.523

将内部逻辑放入函数中，并重载该函数：

```
void innerLogic(vector<string> const& vec) {
    //do something
}

void innerLogic(string const& str) {
    //do something else
}

void loop() {
    for (typename Type::const_iterator hayStackIterator = hayHeap.begin();
         hayStackIterator != hayHeap.end();
         ++hayStackIterator)
    {
        innerLogic(*hayStackIterator);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T03:57:14.037

您可以使用`typedefs`来自 STL 的容器来帮助您使用 SFINAE。

```
template<typename Type> 
function flunk(const Type& hayHeap) {

    typedef typename Type::value_type inner_type;   // STL container typedef
                     ^^^^^^^^^^^^^^^^
    // if Type = vector<string> -> inner_type = string
    // if Type = string         -> inner_type = char

    inner_type start = inner_type();  // initialize start to default.

    for (typename Type::const_iterator hayStackIterator = hayHeap.begin(); hayStackIterator != hayHeap.end(); ++hayStackIterator) {
               //some inner logic
    }

} 
```

# vb.net - 更新数据库时如何用一些值填充空文本框？

> ID：16116330
> 
> 赞同：0
> 
> 时间：2013-04-20T03:44:08.687
> 
> 标签：vb.net, textbox

我有一个包含 6 个组框和 120 个文本框的表单。在向数据库更新数据期间，我希望空文本框返回值“-NA-”。我尝试了以下代码，但我不断收到错误：

```
 For i As Integer = 1 To 20
        If GroupBox1.Controls("CollarTB" & i).Text = String.Empty Then
            GroupBox1.Controls("CollarTB" & i).Text = "-NA-"
        End If

        If Me.GroupBox1.Controls("CollarTB" & i).Text = String.Empty Then
            Me.Controls("CollarTB" & i).Text = "-NA-"
        End If

        If Form9.Controls(i).Text = String.Empty Then
            Form9.Controls(i).Text = "-NA-"
        End If

    Next

        If FrntTB1.Text = String.Empty Then FrntTB1.Text = "-NA-" 
```

如何才能做到这一点？请问有什么解决办法吗？

此外，我还有一个包含大约 180 个文本框的组框。我想一次从数据库的一行中填充它们。是否可以？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:45:16.640

您可以使用从`linq`中过滤，因为您可以过滤掉，然后根据您的要求简单地将值设置为该值。试试这个代码，`groupboxes``form``groupboxes``textboxes``textboxes`

Linq 类型 I：

```
For Each xGroupBox As GroupBox In Me.Controls.OfType(Of GroupBox)()

    For Each xTextBox As TextBox In xGroupBox.Controls.OfType(Of TextBox)()

        If xTextBox.Name.StartsWith("CollarTB") andalso xTextBox.text = string.empty Then
            xTextBox.Text = "-NA-"
        End If

    Next

Next 
```

Linq II 型：

```
 For Each xGroupBox As GroupBox In Me.Controls.OfType(Of GroupBox)()
     For Each xTextBox As TextBox In From xTxtbx In xGroupBox.Controls.OfType(Of TextBox)() Where xTxtbx.Text.StartsWith("CollarTB") and xTxtbx.text = string.empty
         xTextBox.Text = "-NA-"
     Next
 Next 
```

非 Linq 版本：

```
For Each xControls As Control In Me.Controls

    If TypeOf xControls Is GroupBox Then

        For Each xControls1 As Control In xControls.Controls

            If TypeOf xControls1 Is TextBox Then

                If xControls1.Name.StartsWith("CollarTB") andalso xControls1.text = string.empty  Then

                    xControls1.Text = "-NA-"

                End If

            End If

        Next

    End If
    Next 
```

# wcf - 激活 WCF 服务期间的 FileLoadException

> ID：16116332
> 
> 赞同：2
> 
> 时间：2013-04-20T03:44:29.530
> 
> 标签：wcf, iis, activation, fileloadexception

在 IIS 中部署我的 WCF 服务后，访问该服务时出现此错误：

> ## “/MyService”应用程序中的服务器错误。
> 
> 给定的程序集名称或代码库无效。（来自 HRESULT 的异常：0x80131047） 说明：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.IO.FileLoadException：给定的程序集名称或代码库无效。（来自 HRESULT 的异常：0x80131047）
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [FileLoadException：给定的程序集名称或代码库无效。（来自 HRESULT 的异常：0x80131047）]
> System.RuntimeTypeHandle.GetTypeByName（字符串名称，布尔 throwOnError，布尔 ignoreCase，布尔反射，StackCrawlMarkHandle stackMark，IntPtr pPrivHostBinder，布尔 loadTypeFromPartialName，ObjectHandleOnStack 类型）+0
> System.RuntimeTypeHandle.GetTypeByName（字符串名称，布尔throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName) +153 System.Type.GetType(String typeName) +89 System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath, EventTraceActivity eventTraceActivity) +936
> System.ServiceModel.HostingManager.ActivateService(ServiceActivationInfo serviceActivationInfo, EventTraceActivity eventTraceActivity) +76
> System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity) +901
> 
> [ServiceActivationException：服务'/MyService/MySvcImpl.svc'由于编译过程中的异常而无法激活。异常消息是：给定的程序集名称或代码库无效。（HRESULT 异常：0x80131047）。]
> System.Runtime.AsyncResult.End（IAsyncResult 结果）+650220
> System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End（IAsyncResult 结果）+210733
> System.Web.AsyncEventExecutionStep.OnAsyncEventCompletion（IAsyncResult ar）+166

我打开了程序集绑定日志查看器 (FUSLOGVW.EXE)，但它没有显示任何绑定失败。任何人都知道可能导致这种情况的原因，或者如何调试它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T04:22:56.983

发现问题！在这里发帖，因为有一天它可能会对某人有所帮助。

我的 web.config 包含一个带有工厂属性的服务激活元素，如下所示：

```
<serviceHostingEnvironment>
  <serviceActivations>
    <add relativeAddress="MyService.SvcImpl.svc" 
         service="MyService.SvcImpl" 
         factory="MyCompany.MyServiceHostFactory, MyCompany.MyAssembly, Version=1.0.0.0, Culture=neutral, PublicKeyToken=" />
  </serviceActivations>
</serviceHostingEnvironment> 
```

factory 属性包含来自强命名程序集的类引用。但是，PublicKeyToken 属性应该由构建系统设置为正确的值，具体取决于使用的是测试签名证书还是官方签名证书。构建步骤以某种方式失败并导致程序集的强名称无效。因此，异常中消息的第一部分非常准确。它只是没有告诉我无法加载哪个程序集。FUSLOGVW.EXE 在这里也没有任何帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-10T09:36:46.873

当我尝试引用此位置**“AppCode/Authentication”**中的文件时遇到同样的问题，但是当我将文件夹名称更改为**“App_Code/Authentication”**时，问题已解决。

# sql - SSIS 派生列非常慢（日期操作）

> ID：16116333
> 
> 赞同：2
> 
> 时间：2013-04-20T03:45:06.307
> 
> 标签：sql, datetime, ssis, derived

**设置**：我有一个非常大的**SSIS**包，它对许多不同的**平面文件**进行分类，并将它们放入适合文件定义的表格中...除了日期。日期以以下格式出现：`"MM/dd/yyyy HH:mm:ss.ffffff."` 当然，对于**dbtimestamp**，这需要转换为`"yyyy-MM-dd HH:mm:ss.ffffff"`. 在任何给定的文件上，我至少有 2 个日期；创建和更新。在一些我有更多。

**问题**：在我解析的 26 个文件中，一个比另一个特别大。在某些情况下，它可以是 40+ MB。它以前似乎运行良好，但通过派生 3 个日期的派生列组件运行现在非常慢。**解析约 90,600 行**大约需要30 分钟。

 **我正在观察正在执行的数据流，瓶颈看起来非常像派生列。如果它们碰巧存在并且不存在，我会报告所有错误行，所以我知道它不会在行上窒息......我只是无法弄清楚什么需要这么长时间。**CPU**在执行时会达到 100%（不足为奇），但**内存**保持在 12% 的低位。

**以下是每行 3 个日期中的每个日期发生**的确切转换：****

 **```
(DT_DBTIMESTAMP)(SUBSTRING(COLUMN,7,4) + "-" + SUBSTRING(COLUMN,1,2) 
 + "-" + SUBSTRING(COLUMN,4,2) + SUBSTRING(COLUMN,11,14)) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:54:14.593

由于进行了广泛的更改，我复制了数据库，并且**索引没有正确带入。** 这减慢了最大的桌子。删除派生步骤帮助我发现它更进一步，尽管监视数据流的 SSIS 执行使它*看起来好像*认为它是派生步骤。

我意识到这可能不会经常发生，但我会将线程留在这里，以防其他人遇到问题并像我一样错误地识别它！****

# objective-c - 方法调配 isEqualToString

> ID：16116348
> 
> 赞同：1
> 
> 时间：2013-04-20T03:47:27.883
> 
> 标签：objective-c, objective-c-runtime

`isEqualToString:`在课堂上尝试 Method Swizzle 时，我遇到了一些奇怪的行为`NSString`。这是有问题的代码：

```
#import <Foundation/Foundation.h>
#import <objc/objc-runtime.h>

@interface NSString (SwizzleString)
- (BOOL) custom_isEqualToString:(NSString *)aString;
- (NSRange)custom_rangeOfString:(NSString *)aString;
@end

@implementation NSString (SwizzleString)

- (BOOL) custom_isEqualToString:(NSString *)aString;
{
    NSLog(@"Inside custom_isEqualToString method definition");
    return [self custom_isEqualToString:aString];
}

- (NSRange)custom_rangeOfString:(NSString *)aString;
{
    NSLog(@"Inside custom_rangeOfString method definition");
    return [self custom_rangeOfString:aString];
}

@end

int main(int argc, const char * argv[])
{

    Method m1, m2;

    m1 = class_getInstanceMethod([NSString class], @selector(isEqualToString:));
    m2 = class_getInstanceMethod([NSString class], @selector(custom_isEqualToString:));
    method_exchangeImplementations(m1, m2);

    m1 = class_getInstanceMethod([NSString class], @selector(rangeOfString:));
    m2 = class_getInstanceMethod([NSString class], @selector(custom_rangeOfString:));
    method_exchangeImplementations(m1, m2);

    NSString *foo = @"Foo";

    // Does not log anything, is still using isEqualToString: implementation
    [foo isEqualToString:@"Foo"];
    // Also does not log anything, since it is using the method implementation from isEqualToString:
    [foo custom_isEqualToString:@"Foo"];

    // Does log something because rangeOfString now uses custom_rangeOfString IMP
    [foo rangeOfString:@"Foo"];
    // Does not log anything because it uses the method implementation from rangeOfString:
    [foo custom_rangeOfString:@"Foo"];
} 
```

`isEqualToString:`并且`rangeOfString:`都在`NSString`called类别中定义`(NSStringExtensionMethods)`，因此我包含了`rangeOfString`swizzle 以表明我正在正确地调配方法，特别是`NSString`成功地调配了一个对象，因此我可以消除有关[类集群](https://stackoverflow.com/questions/7218750/method-swizzling-for-nsarray)问题的问题。

当我为上面的代码生成程序集时，我没有看到正常的`objc_msgSend`调用，而是看到了类似`l_objc_msgSend_fixup_isEqualToString_`. 这让我找到了更多关于[objective-c vtable](http://www.sealiesoftware.com/blog/archive/2011/06/17/objc_explain_objc_msgSend_vtable.html)的信息，似乎`isEqualToString:`可以在其中找到：

```
static const char * const defaultVtable[] = {
    "allocWithZone:", 
    "alloc", 
    "class", 
    "self", 
    "isKindOfClass:", 
    "respondsToSelector:", 
    "isFlipped", 
    "length", 
    "objectForKey:", 
    "count", 
    "objectAtIndex:", 
    "isEqualToString:", 
    "isEqual:", 
    "retain", 
    "release", 
    "autorelease", 
}; 
```

我整天都在挖掘objective-c 源代码和互联网，以了解如何以某种方式仍然能够 swizzle `isEqualToString:`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:58:33.893

如您所知，这是一个类集群。您需要*实际*的类，而不是公共类，所以只需询问您拥有的字符串对象：

```
NSString *foo = @"Foo";

m1 = class_getInstanceMethod([foo class], @selector(isEqualToString:));
m2 = class_getInstanceMethod([foo class], @selector(custom_isEqualToString:));
method_exchangeImplementations(m1, m2); 
```

还有使用类名本身的脆弱替代方案：

```
NSClassFromString(@"__NSCFConstantString")
NSClassFromString(@"__NSCFString") 
```

# susy-compass - Susy媒体查询输出&“屏幕”

> ID：16116350
> 
> 赞同：0
> 
> 时间：2013-04-20T03:47:44.163
> 
> 标签：susy-compass

Susy 不使用通用`@media screen and (min-width: 460px)`语法进行媒体查询是否有特殊原因？

（或者也许最好将其问为“为什么几乎每个人都使用`@media screen`或`@media only screen`用于他们的媒体查询？”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:19:14.933

引用 mdn，[https://developer.mozilla.org/en/docs/CSS/Media_queries](https://developer.mozilla.org/en/docs/CSS/Media_queries)

> 唯一的关键字阻止不支持具有媒体功能的媒体查询的旧浏览器应用给定的样式。

因此，如果您使用`only`关键字，不支持媒体查询的旧浏览器将完全忽略该行。我想大多数时候我们使用 polyfill 进行媒体查询，例如`respond.js`，所以忽略`only`关键字是相当安全的。

# javascript - 获取特定元素下的所有元素

> ID：16116353
> 
> 赞同：1
> 
> 时间：2013-04-20T03:48:30.527
> 
> 标签：javascript, html

在 JavaScript 中，是否可以获得元素悬停的所有元素的列表？我正在使用一个元素作为光标，并且我希望当光标元素悬停在其他每个元素上时，页面中的其他元素都带有下划线。

```
<div id="cursor">|----------|<br/>|----------|<br/>>I'm a spaceship!><br/>|----------|<br/>|----------|<br/></div>
<div id="hi">Try to select this text</div>
<p>I want to automatically highlight all elements that the cursor element hovers over.</p>
<p>Here's an element.<p> 
```

[http://jsfiddle.net/fU3Qn/](http://jsfiddle.net/fU3Qn/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:55:51.113

`:hover`伪类适用于您光标所在的任何位置。快速浏览一下这个小提琴，您的鼠标会为每个悬停的元素触发红色背景：http: [//goo.gl/zurP6](http://goo.gl/zurP6)

其次，如果您使用元素作为光标，您可以使用规则指示鼠标通过它`pointer-events: none`。请注意，[SVG 之外](http://caniuse.com/#feat=pointer-events)对该属性的支持是有限的。

除此之外，唯一的替代方法是使用类似的东西[`elementFromPoint`](http://msdn.microsoft.com/en-us/library/ie/ms536417%28v=vs.85%29.aspx)，但这只会返回一个元素。我不确定这是否对你有用，因为你的鼠标总是被一个元素阻挡。

关于`elementFromPoint`路线，您可以暂时隐藏自定义光标以获取鼠标下方的下一个元素，然后按照以下评论中的建议重新打开自定义光标。

# java - 如果必填文本字段为空，如何发出警告？

> ID：16116354
> 
> 赞同：2
> 
> 时间：2013-04-20T03:48:37.810
> 
> 标签：java, swing, user-interface, jbutton

我正在尝试制作一个可执行的 JButton（打开一个新窗口）选择单选按钮，并且在特定范围内填充文本文件（文本字段应为 1800 到 2013）。对于单选按钮，我现在做了一个默认选择，但我不知道如何返回一个应该填写文本字段的警告（一个介于 1800 和 2013 之间的数字），如果它在那里，那么它运行程序。

编辑：所以如果我的代码是：

```
JFrame ....
JPanel ....

JTextField txt = new JTextField();
JButton button = new JButton("run");
button.addActionListener(new ActionListener(){
public void actionPerformed(ActionEvent e) {
//Do things here
}
});
txt.addFocusListener(new FocusListener() {
      ....
} 
```

我该如何使用`ItemStateListener`. 我应该定义一个听众，然后呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T04:05:53.977

```
public void actionPerformed(ActionEvent e)  
{  
    String s = txt.getText();  
    char[] cArr = s.toCharAray();  
    ArrayList<Character> chars = new ArrayList<Character>();  
    for (char c : cArr)  
        if (c.isDigit())  
            chars.add(c);  
    cArr = new char[chars.size()];  
    for (int i = 0;i<chars.size();i++)  
        cArr[i] = char.get(i);  
    s = new String(cArr);  
    txtField.setText(s);  
    if (s.equals(""))  
    {  
        // issue warning  
        return;  
    }  
    int input = Integer.parseInt(s);  
    if (input >=  1800 && input <= 2013)  
    {  
        // do stuff  
    }  
} 
```

基本上，读取文本字段中的字符串，从中删除所有非数字字符，并且只有在指定范围内时才继续。

# twitter-bootstrap - Bootstrap，制作下拉触发器

> ID：16116358
> 
> 赞同：0
> 
> 时间：2013-04-20T03:49:05.127
> 
> 标签：twitter-bootstrap, drop-down-menu

我使用引导下拉菜单有这个结构：

```
<div id="navigation" class="row-fluid">
  <table class="basic" width="85%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td class="current" height="60%" align="center" valign="center">
        <a href="<? echo base_url(); ?>">Home</a>
      </td>
      <td class="" align="center" valign="center">
        <div style="position: relative">
          <a id="dropdown1" class="dropdown-toggle" data-toggle="dropdown">About Us</a>
          <ul class="dropdown-menu dropdown" role="menu" aria-labelledby="dropdown1">
             <li><a class="node" tabindex="-1" href="<? echo base_url(); ?>unique/">What makes us unique?</a></li>
             <li><a class="node" tabindex="-1" href="<? echo base_url(); ?>promise/">Our promise to you</a></li>
             <li><a class="node" tabindex="-1" href="<? echo base_url(); ?>mission/">Mission and Vision</a></li>
             <li><a class="node" tabindex="-1" href="<? echo base_url(); ?>customers/">What do our customers say?</a></li>
             <li><a class="node" tabindex="-1" href="<? echo base_url(); ?>history/">Our History</a>  </li>
          </ul>
        </div>
    </tr>
  </table>
</div> 
```

这是CSS：

```
#navigation .basic {
   height: 100%;
   margin: 0 auto;
} 
```

由于我没有设法让 td 作为下拉触发器工作（因为定位），我在里面创建了 div 和链接。

由于在表格中对齐，我的链接比 td 高度短，我怎样才能使 td 打开下拉菜单而不是使高度为 100%？

将链接高度设置为 100% 不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:39:52.040

一点 CSS 应该可以治愈你的困扰。无需更改触发元件。

[http://jsfiddle.net/isherwood/SAwmV/1/](http://jsfiddle.net/isherwood/SAwmV/1/)

```
div.dropdown-wrapper {
    position: relative;
    height: 100%;
}
a.dropdown-toggle {
    height: 100%;
    display: block;
}

<div class="dropdown-wrapper">
    <a id="dropdown1" class="dropdown-toggle" data-toggle="dropdown">About Us</a>

    <ul>
    ... 
```

# html - -moz- , -webkit- 和其他前缀属性一样

> ID：16116361
> 
> 赞同：-2
> 
> 时间：2013-04-20T03:50:31.187
> 
> 标签：html, css, prefix

我们对每个浏览器都使用特定的规则`-moz-`，`-webkit-`就像这样，但我找不到任何提供此类教程的网站。我用谷歌搜索但找不到。请任何人知道哪个站点正在为前缀提供此类教程。

我想了解所有浏览器的前缀属性。（不仅是属性，还有关于它的教程）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:57:57.890

我已经搜索并找到了这个[http://reference.sitepoint.com/css/vendorspecific](http://reference.sitepoint.com/css/vendorspecific) 这个网站提供了关于你正在寻找的所有信息。

也看看这个[http://css-tricks.com/how-to-deal-with-vendor-prefixes/](http://css-tricks.com/how-to-deal-with-vendor-prefixes/)

我还发现这个[http://cssprefixer.appspot.com/](http://cssprefixer.appspot.com/)很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T03:55:24.163

看看这个网站：[CSS3Please](http://css3please.com/)。它应该包含您正在寻找的所有信息以及更多信息。HTML5 也有一个等效的网站[HTML5Please](http://html5please.com/)，这也可能有所帮助。

在两者之间多看几眼之后，HTML5Please 更有助于确定哪些 CSS 属性需要前缀，以及要添加哪些前缀。CSS3Please 在查看属性本身是如何在样式表中写出时更有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:09:57.163

[这](http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords)是 w3 关于所有供应商前缀的官方文档。

如果你想要一个教程，谷歌类似的东西`css vendor prefix`。

# php - 关于Iterator函数使用的一些问题

> ID：16116363
> 
> 赞同：0
> 
> 时间：2013-04-20T03:51:06.490
> 
> 标签：php

代码来自：[http](http://php.net/manual/en/class.iterator.php(Example) ://php.net/manual/en/class.iterator.php（示例#1基本用法）

```
<?php
class myIterator implements Iterator {
    private $position = 0;
    private $array = array(
        "firstelement",
        "secondelement",
        "lastelement",
    );  

    public function __construct() {
        $this->position = 0;
    }

    function rewind() {
        var_dump(__METHOD__);
        $this->position = 0;
    }

    function current() {
        var_dump(__METHOD__);
        return $this->array[$this->position];
    }

    function key() {
        var_dump(__METHOD__);
        return $this->position;
    }

    function next() {
        var_dump(__METHOD__);
        ++$this->position;
    }

    function valid() {
        var_dump(__METHOD__);
        return isset($this->array[$this->position]);
    }
}

$it = new myIterator;

foreach($it as $key => $value) {
    var_dump($key, $value);
    echo "\n";
}
?> 
```

输出是：

```
string 'myIterator::rewind' (length=18)

string 'myIterator::valid' (length=17)

string 'myIterator::current' (length=19)

string 'myIterator::key' (length=15)

int 0

string 'firstelement' (length=12)

string 'myIterator::next' (length=16)

string 'myIterator::valid' (length=17)

string 'myIterator::current' (length=19)

string 'myIterator::key' (length=15)

int 1

string 'secondelement' (length=13)

string 'myIterator::next' (length=16)

string 'myIterator::valid' (length=17)

string 'myIterator::current' (length=19)

string 'myIterator::key' (length=15)

int 2

string 'lastelement' (length=11)

string 'myIterator::next' (length=16)

string 'myIterator::valid' (length=17) 
```

所以我们可以看到：第一，function( `var_dump(__METHOD__)`)输出的顺序是：

```
string 'myIterator::rewind' (length=18)
string 'myIterator::valid' (length=17)
string 'myIterator::current' (length=19)
string 'myIterator::key' (length=15) 
```

2、3、函数输出顺序为：函数输出顺序为：

```
string 'myIterator::next' (length=16)
string 'myIterator::valid' (length=17)
string 'myIterator::current' (length=19)
string 'myIterator::key' (length=15) 
```

4、函数输出顺序为：

```
string 'myIterator::next' (length=16)
string 'myIterator::valid' (length=17) 
```

我的问题是：

1.  有5个功能：`rewind();current(); key(); next(); valid();`为什么有些功能有时似乎不执行？`myIterator::next`例如，我们在第一个函数输出中看不到。而且也`rewind()`只显示一次。
2.  $array 中有 3 个值，所以假设 foreach 只运行了 3 次，但我们可以看到`string 'myIterator::valid' (length=17)`出现 4 次，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:34:17.550

第一部分是`for`-loop的初始化。它调用`rewind`将光标移动到列表的开头。这也是为什么你看不到`next`那里的原因。

最后一部分做了一个`next`，但是，`for`-loop 意识到已经到达列表的末尾，因为`valid`返回了`false`。所以`valid`称为 4 次，3 次返回`true`，然后返回`false`一次。`for`-loop 怎么知道在哪里停止？

# mysql - 如何在 MySQL 中根据月份过滤日期列

> ID：16116367
> 
> 赞同：1
> 
> 时间：2013-04-20T03:52:08.260
> 
> 标签：mysql, date, where-clause

我正在尝试根据月份过滤日期列：

```
SELECT  id, nama, lahir_tanggal  
FROM `alumni_db.alumni_tb`   
WHERE date("F", strtotime('lahir_tanggal') = "August"; 
```

`lahir_tanggal`是日期格式

如何使该查询工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T03:54:40.013

```
SELECT id, nama, lahir_tanggal    FROM alumni_db.alumni_tb
 WHERE 
   MONTHNAME(lahir_tanggal) ="August" 
```

或者

```
SELECT id, nama, lahir_tanggal    FROM alumni_db.alumni_tb
 WHERE 
   MONTH(lahir_tanggal) =8 
```

[**看这里**](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_monthname)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:00:37.467

目前尚不清楚你想做什么，但我假设你想要这样的东西：

```
SELECT  
    id, nama, lahir_tanggal
FROM 
    `alumni_db.alumni_tb`
WHERE
    MONTH(lahir_tanggal) = 8 
```

或者

```
SELECT  
    id, nama, lahir_tanggal
FROM 
    `alumni_db.alumni_tb`
WHERE
    MONTHNAME(lahir_tanggal) = 'august' 
```

# ruby - 安装 Ruby - RVM - Mac OSX Mountain Lion

> ID：16116368
> 
> 赞同：2
> 
> 时间：2013-04-20T03:52:10.493
> 
> 标签：ruby, macos, rvm

所以我试图在运行 Mountain Lion 的 Mac 上安装 Ruby 1.9.3。我已经安装了 xCode 并且是最新的。我已经安装了 RVM，现在正在尝试安装 Ruby，`rvm install 1.9.3`当我运行它时，它看起来像是要安装但给了我一个错误，请参见下文：

```
rvm install 1.9.3
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p392.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing requirements for osx, might require sudo password.
Already up-to-date.
Certificates in '/Users/Colin/.rvm/etc/openssl/cert.pem' already are up to date.
Installing Ruby from source to: /Users/Colin/.rvm/rubies/ruby-1.9.3-p392, this may take a while depending on your cpu(s)...
ruby-1.9.3-p392 - #downloading ruby-1.9.3-p392, this may take a while depending on your connection...
ruby-1.9.3-p392 - #extracted to /Users/Colin/.rvm/src/ruby-1.9.3-p392 (already extracted)
ruby-1.9.3-p392 - #configuring........
Error running './configure --prefix=/Users/Colin/.rvm/rubies/ruby-1.9.3-p392 --with-opt-dir=/Users/Colin/.rvm/opt/libyaml:/Users/Colin/.rvm/opt/readline:/Users/Colin/.rvm/opt/libxml2:/Users/Colin/.rvm/opt/libxslt:/Users/Colin/.rvm/opt/libksba:/Users/Colin/.rvm/opt/openssl:/Users/Colin/.rvm/opt/sqlite --disable-install-doc --without-tcl --without-tk --enable-shared',
please read /Users/Colin/.rvm/log/ruby-1.9.3-p392/1366429269_configure.log
There has been an error while running configure. Halting the installation. 
```

当我转到 /1366429269_configure.log 文件时，它说：

```
[2013-04-19 20:41:09] ./configure
configure: WARNING: unrecognized options: --without-tcl, --without-tk
checking build system type... x86_64-apple-darwin12.2.1
checking host system type... x86_64-apple-darwin12.2.1
checking target system type... x86_64-apple-darwin12.2.1
checking whether the C compiler works... no
configure: error: in `/Users/Colin/.rvm/src/ruby-1.9.3-p392':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

如果有人可以帮助我，将不胜感激！

**编辑：**

我在这里尝试了解决方案[Can't install Ruby under Lion with RVM – GCC issues](https://stackoverflow.com/questions/8032824/cant-install-ruby-under-lion-with-rvm-gcc-issues) `rvm install 1.9.3 --with-gcc=clang`，它发生了一些变化，这是新的输出：

```
rvm install 1.9.3 --with-gcc=clang
Installing requirements for osx, might require sudo password.
Already up-to-date.
Certificates in '/Users/Colin/.rvm/etc/openssl/cert.pem' already are up to date.
Warning: found user selected compiler 'clang', this will suppress RVM auto detection mechanisms.
Installing Ruby from source to: /Users/Colin/.rvm/rubies/ruby-1.9.3-p392, this may take a while depending on your cpu(s)...
ruby-1.9.3-p392 - #downloading ruby-1.9.3-p392, this may take a while depending on your connection...
ruby-1.9.3-p392 - #extracted to /Users/Colin/.rvm/src/ruby-1.9.3-p392 (already extracted)
ruby-1.9.3-p392 - #configuring.....................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
ruby-1.9.3-p392 - #compiling..................................................................
Error running 'make -j8',
please read /Users/Colin/.rvm/log/ruby-1.9.3-p392/1366431470_make.log
There has been an error while running make. Halting the installation. 
```

继承人的日志：http: [//pastebin.com/P6nTZRQY](http://pastebin.com/P6nTZRQY)

**编辑**

不知道发生了什么，但我只是尝试了同样的事情，现在它工作得很好。感谢所有留下有用评论的人，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:28:00.620

您需要将命令行工具更新到最新版本，对于 ruby​​ 1.9.3，它仍然首选`gcc-4.2`用于编译。

还要确保在重试之前更新 RVM：

```
rvm get head
rvm install 1.9.2 
```

最后，Ruby`2.0.0`应该兼容`1.9.3`并且应该更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:17:24.353

尝试使用它，它将安装所有

```
 wget --no-check-certificate https://raw.github.com/joshfng/railsready/master/railsready.sh && bash railsready.sh 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T03:59:10.863

一个月前，我在尝试在 Lion 上安装 Ruby on Rails 时遇到了类似的问题。最后，我使用了安装程序。如果使用安装程序对您来说是一个可行的选择，请查看[Rails 安装程序](http://railsinstaller.org/)。

# ruby-on-rails - Rails 表单使用按钮从两个选项中选择 - 自定义表单实现

> ID：16116370
> 
> 赞同：0
> 
> 时间：2013-04-20T03:53:27.390
> 
> 标签：ruby-on-rails

我有一个网站，我希望用户能够在注册过程中选择他们是什么类型的用户。

具体来说，我想要的实现是在注册页面上有两个按钮，一个叫做“Seller”，一个叫做“Buyer”。

用户应该只能选择一个按钮，一旦单击，它应该保持突出显示（我知道这只是 jquery，所以不是问题）。

选择应该存储在我的用户模型中名为 :type 的列中。

看起来很简单，但是“f.select”表单方法似乎只实现了一个下拉菜单，所以我想知道如何实现两个按钮的这种实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:00:26.527

由于您已经准备使用 jQuery，您可以为 添加一个隐藏字段`type`，创建 2 个链接并将它们设置为按钮，并使用 jQuery 更新`type`用户单击其中一个“按钮”时的值。

# r - ggplot2 中的“指南”、“颜色条”和“键高”

> ID：16116375
> 
> 赞同：0
> 
> 时间：2013-04-20T03:54:07.000
> 
> 标签：r, ggplot2

使用 ggplot2 我制作了一个条形图，其中每个条形都填充有渐变。我的问题与情节的传说有关。它是一个填充了相同颜色渐变的条：

```
scale_fill_gradient(
    low = "lightpurple",
    high = "black",
    limits = c(0, max(graph$y)),
    "colourbar") 
```

当我想更改图例栏的高度时，我尝试了：

```
scale_fill_gradient(
    low = "lightpurple",
    high = "black",
    limits = c(0, max(graph$y)),
    guides("colourbar", guide_legend(keyheight = 2)) 
```

但什么都没有改变。当我只精确没有颜色渐变的栏的高度时，高度是正确的。

```
scale_fill_gradient(
    low = "lightpurple",
    high = "black",
    limits = c(0, max(graph$y)),
    guide = guide_legend(keyheight = 2)) 
```

在“指南”中同时提到“颜色条”和“高度”时，我做错了什么？

# php - PHP 中的 mssql_bind 截断字符串

> ID：16116376
> 
> 赞同：3
> 
> 时间：2013-04-20T03:54:30.320
> 
> 标签：php, sql-server-2008, freetds, truncated

我正在使用`FreeTDS`Linux 上的 PHP 5.3.15 连接和使用 SQL Server 2008 数据库。我在这个数据库中有一个数据类型为`VARCHAR(MAX)`.

`mssql_bind()`不幸的是，当值超过 8000 个字符时，我无法设置列的值。该值存储在数据库中，但在 8000 个字符处被截断。我正在调用的存储过程已将输入变量设置为正确的数据类型 ( `VARCHAR(MAX)`)。

这是我尝试过的：

*   在 php.ini 中，我将两者都设置`mssql.textlimit`为`mssql.textsize`它们的最大允许值（2147483647）。似乎无论我将这些设置为什么，它们实际上都不会影响我可以发送的文本的大小。也就是说，即使将这些值设置为 100，也不会将文本截断为 100 个字符。
*   设置`mssql.textlimit`和`mssql.textsize`使用`ini_set()`。同样，这似乎没有影响。
*   将`maxlen`属性设置`mssql_bind()`为大于 8000 的数字。与上面一样，即使将其设置为较低的数字似乎也没有影响。
*   将列的数据类型更改为`TEXT`和/或将`type`属性更改`mssql_bind()`为`SQLTEXT`。

此外，为了使事情更加混乱（至少对我而言），我***可以***通过以下方式将整个字符串长度存储在数据库中：

*   `VARCHAR(MAX)`在我的存储过程中硬编码声明为超过 8000 个字符的变量值的长度。这成功地存储了整个字符串。
*   不使用存储过程，而是直接在 PHP 中执行查询：`"UPDATE my_table SET my_large_colmn = '{$text_longer_than_8000_chars}'"`. 这成功地存储了整个字符串。

所以这就是我认为我将其缩小到`mssql_bind()`将长度截断为 8000 个字符的方法的方式。

这仅仅是 PHP 中`mssql_bind()`的`FreeTDS`驱动程序的限制还是我遗漏了什么？

# php - 如何在 Laravel 中为模型命名，以免与现有类发生冲突？

> ID：16116378
> 
> 赞同：17
> 
> 时间：2013-04-20T03:54:34.443
> 
> 标签：php, namespaces, laravel, laravel-4

在 Laravel 4 中，我想使用一个代表`Event`来自我的数据库的模型。因此，`app/models`我的`Event`模型扩展了 Eloquent。

然而，Laravel 4 已经有一个`Event`类用于管理应用程序生命周期内的事件。

我想知道的是，如何正确命名我的`Event`模型并以不会与现有`Event`类冲突的方式访问它。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-20T04:09:32.613

您只需要像往常一样为其应用命名空间。所以，例如。

```
<?php namespace Models;

use Eloquent;

class Event extends Eloquent {

} 
```

然后你应该正确设置你的`composer.json`，以便它加载你的模型。您可以使用`classmap`或`psr-0`，这取决于您的目录结构是否遵循 PSR-0。

我很确定该`models`目录已经映射。

**编辑**
如评论中所述，您必须运行`composer dump-autoload`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T19:48:45.427

**我对使用命名空间进行了很多研究，因为我想在 PHPDocumentar 中使用它们，所以不可能添加两倍的命名空间，因为 laravel 已经为你添加了这些，如果我们了解基本问题，为什么我们使用命名空间**

1 - 许多库使用相同的类名，所以我们使用命名空间来区分它。

2 - 如果你想使用命名空间，那么你应该超出应用程序的范围，这意味着你的供应商文件夹是这种东西。

享受

# cocos2d-iphone - 如何防止模糊使用纹理之外的颜色？

> ID：16116383
> 
> 赞同：0
> 
> 时间：2013-04-20T03:55:37.540
> 
> 标签：cocos2d-iphone, opengl-es-2.0, shader

我正在尝试创建一个模糊的着色器，我已经做到了。但是，有一个问题。纹理周围有一个黑色背景，当着色器运行时，它会从该背景中获取颜色，最终使我的整个图像变暗（但它仍然很好地模糊了图像，就好像它也在降低亮度一样） . 只是为了确定这就是我的想法，我将背景设置为白色，果然它使我的图像更暗淡。我真的不知道如何防止这种情况，我想它会在外面抓住它们，因为模糊大小已经到达纹理边界之外，有没有办法防止纹理查找发生在我正在处理的纹理之外？

碎片：

```
precision mediump float;

uniform sampler2D CC_Texture0;  
uniform float u_time;

const lowp int SAMPLES = 9;
varying vec2 v_texCoord;        
varying highp vec2 transCord[SAMPLES];

void main()
{
      vec4 sum = vec4(0.0);

    sum += texture2D(CC_Texture0, transCord[0]) * 0.05;
    sum += texture2D(CC_Texture0, transCord[1]) * 0.09;
    sum += texture2D(CC_Texture0, transCord[2]) * 0.12;
    sum += texture2D(CC_Texture0, transCord[3]) * 0.15;
    sum += texture2D(CC_Texture0, transCord[4]) * 0.16;
    sum += texture2D(CC_Texture0, transCord[5]) * 0.15;
    sum += texture2D(CC_Texture0, transCord[6]) * 0.12;
    sum += texture2D(CC_Texture0, transCord[7]) * 0.09;
    sum += texture2D(CC_Texture0, transCord[8]) * 0.05;

      gl_FragColor = sum;
} 
```

顶点着色器

```
precision mediump float;

attribute vec4 a_position;
attribute vec2 a_texCoord;

const lowp int SAMPLES = 9;

uniform highp float texelWidthOffset;
uniform highp float texelHeightOffset;
uniform highp float blurSize;
uniform float u_time;

varying vec2 v_texCoord;        
varying highp vec2 transCord[SAMPLES];

void main()
{
      gl_Position = CC_MVPMatrix * a_position;
    v_texCoord = a_texCoord;    
    highp vec2 offset = vec2(texelWidthOffset, texelHeightOffset) * (u_time * blurSize);

    transCord[0] = a_texCoord - offset * 4.0;
    transCord[1] = a_texCoord - offset * 3.0;
    transCord[2] = a_texCoord - offset * 2.0;
    transCord[3] = a_texCoord - offset * 1.0;
    transCord[4] = a_texCoord;
    transCord[5] = a_texCoord + offset * 1.0;
    transCord[6] = a_texCoord + offset * 2.0;
    transCord[7] = a_texCoord + offset * 3.0;
    transCord[8] = a_texCoord + offset * 4.0;
} 
```

更新：这似乎只是在渲染到 CCRenderTexture 时出现的问题。我不确定为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:25:56.957

将 S 和 T 中纹理的环绕模式设置为 GL_CLAMP_TO_EDGE - 这将意味着超出范围的 UV 坐标值返回更合理的结果

# markov-chains - 马尔可夫链的自由度

> ID：16116389
> 
> 赞同：1
> 
> 时间：2013-04-20T03:56:33.823
> 
> 标签：markov-chains, statistics, markov, markov-models

我有一组 5000 个长度为 4 的字符串，其中字符串中的每个字符可以是 A、B、C 或 D。

*   0 阶马尔可夫链（无依赖性），由 A、B、C、D 列组成一个 4*1 数组。

*   一阶马尔可夫链（pos j 取决于前一个 pos i），形成一个 4*4 行 Ai、Bi、Ci、Di 的矩阵；和 Aj、Bj、Cj、Dj 列。

*   2 阶马尔可夫链（pos k 取决于 pos j 和 pos i），构成一个 4*4*4 维数为 Ai、Bi、Ci、Di 的矩阵；Aj、Bj、Cj、Dj；和 Ak, Bk, Ck, Dk [或者这构成了一个 16*4 的矩阵 Aij, Bij, Cij, Dij；Ak、Bk、Ck、Dk]。

*   三阶马尔可夫链（pos l 取决于 pos k、pos j 和 pos i），构成一个 4*4*4*4 维数为 Ai、Bi、Ci、Di 的矩阵；Aj、Bj、Cj、Dj；Ak、Bk、Ck、Dk；Al, Bl, Cl, Dl [或者这构成了一个 64*4 的矩阵 Aijk, Bijk, Cijk, Dijk; Al、Bl、Cl、Dl]。

4 个订单的参数数量是多少？我有一些想法，但想看看其他人的想法。谢谢你的建议！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T21:37:51.500

正如评论中指出的那样，答案几乎包含在问题中。完全指定具有 n 个可能状态的 k 阶马尔可夫模型的独立参数数量的一般公式是 n^k*(n-1)，其中 n>1。

这个通式的推导同详述 [Morkov Chain 是如何工作的，什么是无记忆？](https://stackoverflow.com/questions/20595578/how-does-morkov-chain-works-and-what-is-memorylessness) 对于 n=3 和 k=2。

具体来说，如果我们考虑 k 个先前步骤（包括当前步骤）来预测下一步，则转换矩阵应该允许所有可能的排列，因此它的维度是 n^k x n^k。然而，因为对于每个状态只有 n 个结果是可能的，所以这个矩阵的每一行只有 n 个非零条目。因此，我们有这个转移矩阵的 n*n^k 个非零条目，并且每一列的总和应为 1。因此，要获得独立参数数量的答案，我们需要从非零参数的数量中减去 n^k - 零条目。

该答案不包括初始条件，如果您正在寻找稳态解决方案，则不需要这些条件。如果您对瞬态解决方案感兴趣，则需要指定额外的 (n-1)*k 个参数。

# java - 编译时间和类加载时间是否相同？

> ID：16116394
> 
> 赞同：-4
> 
> 时间：2013-04-20T03:57:22.620
> 
> 标签：java

我问这个问题是因为`Collection`我看到它`Arrays.sort()`被重载了，所以我想知道当静态方法在类加载时加载并且在类加载时间之后执行重载时，有人怎么能说静态方法被重载。

我的主要问题是：在类加载时间之后执行重载和覆盖；这就是为什么它们对对象可见而对静态部分不可见的原因。那么静态方法可以重载吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T04:00:57.980

*编译时间*和*类加载时间*不是一回事。并且*运行时间*（在我在下面使用这个术语的意义上......）又是不同的东西。

重载分析在*编译时*执行，对于`static`实例方法调用。`static`对于一种方法*遮蔽*另一种方法的情况也是如此`static`——它在*编译时*解决。

覆盖调度（例如方法）发生在*运行时*；即当方法调用实际发生时，取决于作为“目标”对象的实际对象。

* * *

> 为什么 Arrays.sort() 被重载，当它是静态的

为什么不应该呢？

正如我所说，`static`实例方法和实例方法都可以重载。（*覆盖*仅限于实例方法，并且仅限于实例方法......但重载可以用于各种方法，也可以用于构造函数。）

“加载”和“重载”也是完全不相关的概念。“加载”是关于将类（在这种情况下）放入内存，但“重载”是关于具有相同名称的不同签名的不同方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:00:03.500

静态和动态多态都是多态的一部分。

在静态多态中，重载在编译时解决，在动态中，它在运行时解决。尽管如此，两者都是有效的重载情况。

# c++ - 返回指针无法正常工作

> ID：16116395
> 
> 赞同：0
> 
> 时间：2013-04-20T03:57:24.100
> 
> 标签：c++, arrays, function, pointers, return-type

当我尝试通过函数返回的指针显示数组的内容时，程序只显示零。我不确定缺少什么。我曾多次尝试检查出了什么问题，但似乎没有任何线索。我正在使用 Dev-C++。代码如下。您的帮助将不胜感激。

```
#include <iostream>
#include <math.h>
#include <cstdlib>
#include <cstring>

using namespace std;

bool vowel(char c)
{
int i, val;
char alphabet[52]={'a','A','b','B','c','C','d','D','e','E','f','F','g','G','h','H','i','I','j','J','k','K','l','L','m','M','n','N','o','O','p','P','q','Q','r','R','s','S','t','T','u','U','v','V','w','W','x','X','y','Y','z','Z'};
 int const is_vowel[52]={1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0};

    for (i=0;i<52;i++)
    if (c!=alphabet[i])
    {   
    val=is_vowel[i];
    return val;
    }       

}

bool consonant(char c)
{
    int i, val;
char alphabet[52]={'a','A','b','B','c','C','d','D','e','E','f','F','g','G','h','H','i','I','j','J','k','K','l','L','m','M','n','N','o','O','p','P','q','Q','r','R','s','S','t','T','u','U','v','V','w','W','x','X','y','Y','z','Z'};
     int const is_coson[52]={1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0};

    for (i=0;i<52;i++)
    if (c==alphabet[i])
    {   
    val=is_coson[i];
    return val;
    }       

}

int* scan(char* sentence, int len_sent)
{
    char c;
int count_cons=0, count_vow=0, count_dig=0, count_lc=0, count_uc=0, i,j;
int con_value, vow_value;
int* ptr; 
int array_all_counts[5];

for (i=0; i<len_sent; i++)
{
    c=sentence[i];

    //check if the c is a digit
    if (c>=48 && c<=57)
        count_dig++;

    else if (isalpha(c))
    {
        con_value=consonant(c);
        vow_value=vowel(c);
        if (con_value==0)
            count_cons++;

        else if (vow_value!=0)  //vow_value==1
            count_vow++;

        if (96<c && c<123)
             count_lc++;

        if (64<c && c<91)
             count_uc++;                   
    }

}
cout<<"\n-------------------"<<endl;

array_all_counts[0]=count_uc;
array_all_counts[1]=count_lc;
array_all_counts[2]=count_dig;
array_all_counts[3]=count_vow;
array_all_counts[4]=count_cons;

    ptr=array_all_counts;

    cout<<"\n\n\nTesting the output of pointer: "<<endl;
    for (i=0; i<5; i++)
      cout<<ptr[i]<<"  ";

return ptr;

}

int main()
{

    int j, length;

char sentence[256];
int* ptr_array;  

cout<<"Please, enter a sentence; ";
cin.getline(sentence,256);
length=strlen(sentence);
cout<<"the sentence: ";
cout<<sentence<<endl;

ptr_array=scan(sentence, length);  //Address of first element returned into ptr_array

cout<<endl;
/// cout<<"Upper case: "<<" Lower case: "<<" Digits: "<<" Vowels: "<<" Consonants: "<<endl;
for (j=0; j<5; j++)
    cout<<ptr_array[j]<<"  ";  //Where the problem is...

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:02:41.787

```
 ptr=array_all_counts; 
```

`ptr`是一个局部的`int*`，它指向一个局部的静态数组`array_all_counts`，这个局部数组会在函数退出时被销毁`scan`。因此，由于指向的内存`ptr`被释放，您将在 main 中一无所获。

您可以在`scan`函数中尝试以下操作以使其工作：

```
int* ptr = new int [5];  //allocate memory on heap

array_all_counts[0]=count_uc;
array_all_counts[1]=count_lc;
array_all_counts[2]=count_dig;
array_all_counts[3]=count_vow;
array_all_counts[4]=count_cons;

//add this block
for (int i = 0; i < 5 ; ++i)
{
   ptr[i] = array_all_counts[i];  
} 
```

如果输入为：它将正常工作并打印如下内容`"abcdefghijk"`：

```
Testing the output of pointer:
0  11  0  3  8
0  11  0  3  8 
```

# delphi - Delphi如何共享函数？

> ID：16116398
> 
> 赞同：4
> 
> 时间：2013-04-20T03:57:53.890
> 
> 标签：delphi, delphi-7

例如，我为我的表单编写了几个函数。现在，我需要另一种形式的完全相同的功能。那么，我怎样才能在两种形式之间共享它们呢？如果可能，请提供一个简单的例子。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-20T04:13:32.550

不要把它们放在你的表格中。将它们分开并将它们放在一个公共单元中，然后将该单元添加到`uses`您需要访问它们的子句中。

这是一个简单的示例，但您可以看到许多执行此操作的 Delphi RTL 单元（例如`SysUtils`）。（您应该学习使用 Delphi 中包含的 VCL/RTL 源代码和演示应用程序；它们可以比在这里等待答案更快地回答您发布的许多问题。）

SharedFunctions.pas：

```
unit 
  SharedFunctions;

interface

uses
  SysUtils;  // Add other units as needed

function DoSomething: string;

implementation

function DoSomething: string;
begin
  Result := 'Something done';
end;

end. 
```

单位A.pas

```
unit
  YourMainForm;

uses
  SysUtils;

interface

type
  TMainForm = class(TForm)   
    procedure FormShow(Sender: TObject);
    // other stuff
  end;

implementation

uses
  SharedFunctions;

procedure TMainForm.FormShow(Sender: TObject);
begin
  ShowMessage(DoSomething());
end;

end. 
```

在比 Delphi 7 更新的 Delphi 版本中，您可以在 a 中创建函数/方法`record`：

```
unit
  SharedFunctions;

interface

uses
  SysUtils;

type
  TSharedFunctions = record
  public
    class function DoSomething: string;
  end;

implementation

function TSharedFunctions.DoSomething: string;
begin
  Result := 'Something done';
end;

end; 
```

单位B.pas

```
unit
  YourMainForm;

uses
  SysUtils;

interface

type
  TMainForm = class(TForm)   
    procedure FormShow(Sender: TObject);
    // other stuff
  end;

implementation

uses
  SharedFunctions;

procedure TMainForm.FormShow(Sender: TObject);
begin
  ShowMessage(TSharedFunctions.DoSomething());
end;

end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:58:21.573

如果您需要表格。您可以使用继承的形式。创建一个继承父表单功能的表单。

最有趣的。父表单中的任何更改都反映了继承表单中的更改。您甚至可以继承表单控件（tbutton、tlabel 等...）。

在 GUI Delphi7\. 选项“新形式”，选项“从现有形式继承”。

例子：

```
//MainForm.pas
type
  TMainForm = class(TForm) 
     procedure MiFunction();
     .
     .
  end;

//ChilForm.pas
type
  TChildForm = class(TMainForm) 
  .
  .
  end; 
```

# php - How to grab an auto incremented variable and insert it into an insert query

> ID：16116404
> 
> 赞同：0
> 
> 时间：2013-04-20T03:59:44.100
> 
> 标签：php, mysql, sql, phpmyadmin, relational-database

I am trying to do a couple of php insert queries into a relational database, but I am running into a bit of an issue. In order for this relation to work I need to grab the autoincremented value from the first query and then insert it into the second query so the relation between the two exists.

I have this:

$query2 = "INSERT into `words` values ('' ,'$name') ";

-- The first value listed as '' is the auto-incremented primary key --

$query3 = "INSERT into `synonyms` values ('' , '', $alias') ";

-- The first value listed is the auto incremented pk, the second value needs to be the fk or the pk from the first query, but I don't know how to place it there. --

Is there a way to do this? Any help would be appreciated.

Here an SQL Fiddle to help y'all out:

[http://sqlfiddle.com/#!2/47d42](http://sqlfiddle.com/#!2/47d42)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:10:40.023

```
<?php
    $link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
    if (!$link) {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db('mydb');

    mysql_query("INSERT INTO words(word) values ('word1')");

    $last_id = mysql_insert_id();

    mysql_query("INSERT INTO words(synonym_id,synonym) values ($last_id, "synonym1)");

?> 
```

Reference: [http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T04:24:27.200

. . You should consider using [PDO](http://php.net/manual/en/book.pdo.php) in most recent PHP versions for its modern features, such as prepared statements, so that you don't need to worry about [SQL Injection](http://php.net/manual/en/security.database.sql-injection.php) or broken escaping functions.

. . Using transactions is also advisable if the follow up queries are mandatory for the record to be useful. Using transactions keeps your database clear of the garbage of any failed second or third queries.

. . Also, you can omit the Auto-Increment field when running the Insert Query if you list the other fields after the table name. I think it's a much more common pattern, like `INSERT INTO table (field1, field2) VALUES ("value1", "value2")`. I used it in the example below:

```
$pdo = new PDO('mysql:host=localhost;dbname=database', 'user', 'pass');

$pdo->beginTransaction();
try {
  $prepared = $dbh->prepare('INSERT INTO words (fieldName) values (?)');
  $prepared->execute(array($name));
  $fID = $pdo->lastInsertId();

  $prepared = $dbo->prepare('INSERT INTO synonyms (fieldName) Values (?, ?)';
  $prepared->execute(array($fID, $alias));

  $dbo->commit(); 
} catch(PDOExecption $e) {
  $dbo->rollback();
  print 'Error: '. $e->getMessage(); 
} 
```

. . Note that this will not work with MSSQL as it doesn't support "lastInsertId".

. . Amplexos.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:12:41.203

not sure if you're using MySQL native functions or not. If so the answer is to use mysql_last_id(). These functions are deprecated and are not adivsable to use.

EXAMPLE:

```
//escape your indata
$brand= mysql_real_escape_string($_POST['brand']);
$sql = "INSERT INTO cars(brand) VALUES('{$brand}')";
mysql_query($sql);

//find last id from query above
$id = mysql_last_id(); 
```

Try PDO instead: PDO::lastInsertId

EXAMPLE:

```
$brand= $_POST['brand'];
$sql = "INSERT INTO cars(brand) VALUES (:brand)";
$query = $conn->prepare($sql);
$query ->execute(array(':brand'=>$brand));
$id = $conn->lastInsertId(); 
```

[http://www.php.net/manual/en/book.pdo.php](http://www.php.net/manual/en/book.pdo.php)

# mysql - mysql 中的数据库名称似乎有效，但显示错误

> ID：16116406
> 
> 赞同：0
> 
> 时间：2013-04-20T04:00:25.697
> 
> 标签：mysql, sql

我正在尝试在两个单词之间创建一个带有“-”的数据库，它应该可以正常工作，但事实并非如此。这是日志文件：

```
mysql> create database test1;
Query OK, 1 row affected (0.00 sec)

mysql> show databases
    -> ;
+-----------------------+
| Database              |
+-----------------------+
| information_schema    |
| mifos                 |
| mifosplatform_tenants |
| mifostenant           |
| mifostenant_default   |
| mysql                 |
| performance_schema    |
| sakila                |
| test                  |
| test1                 |
| testing               |
| world                 |
+-----------------------+
12 rows in set (0.00 sec)

mysql> create database test1-mohit;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near '-mohi
t' at line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:05:07.827

您可以使用`_(underscore)`

```
create database test1_mohit; 
```

或试试这个

```
 create database `test1_mohit`; 
```

这两个都行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:06:30.520

使用这些字符之一命名数据库`[0-9,a-z,A-Z$_]`

参考：[http ://dev.mysql.com/doc/refman/5.0/en/identifiers.html](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)

# javascript - Struts 1动作没有在jsp中的javascript函数中被调用

> ID：16116411
> 
> 赞同：1
> 
> 时间：2013-04-20T04:00:42.047
> 
> 标签：javascript, jsp, struts, action, displaytag

我正在使用显示标签将我的列表显示在表格上。我试图有一个按钮来删除基于行 ID 的行。id 正在传递给我的 javascript 函数，但没有调用该操作。我知道该值正在传递，因为当我使用 alert 测试在函数中输出 id 时，它确实传递了。

我跑了萤火虫，它说我的表格是未定义的

我现在拥有的是

显示标签表：

```
<form action="" method="POST" id="mainForm" name="MyFormBean">

<display:table requestURIcontext="true" requestURI="/unavailability/loadUnavailability.action?method=loadForm" uid="myList" name="requestScope.unavailList" class="simple" pagesize="10" defaultsort="2" sort="list" cellspacing="0" excludedParams="*">    

<display:column  property="startDate" title="Start Date" width="18%" decorator="com.mhngs.util.DisplayTagDateWrapper" sortable="true" headerClass="sortable"/>
<display:column  property="endDate" title="End Date" width="18%" decorator="com.mhngs.util.DisplayTagDateWrapper" sortable="true" headerClass="sortable" />
<display:column  property="reason" title="Comments" width="30%" sortable="true" headerClass="sortable" />   

<display:column media="html" width="10%">
<a href="#" onClick="javascript:deleteEntry('<c:out value="${myList.rowId}"/>')">Delete</a>
</display:column>

</display:table> 
<input type="hidden" name="rowId" id="rowId" />
</form> 
```

Javascript：

```
 function deleteEntry(rowId){
        document.getElementById('rowId').value=rowId;
        document.forms[0].action='/app/protected/mflc/unavailability/delCounselorEntry.action?method=deleteCounselorUnavailability';
        document.forms['myForm'].submit; //Correction       
    } 
```

Struts Form Bean：

```
<form-bean name="MyFormBean" type="org.apache.struts.action.DynaActionForm">
<form-property name="myList" type="java.util.List"/>
</form-bean> 
```

Struts 删除映射：

```
<action path="/unavailability/delCounselorEntry"
        type="com.action.MyAction" 
        scope="request"
        parameter="method" 
        name="MyFormBean">
        <forward name="Success"
            path="/unavailability/myDeleteComfirmationPage.actioncontent" />
    </action> 
```

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:32:44.790

我找到了表单未定义的原因

起初我有这个指向第一种形式：

```
document.forms[0];              //First <form> element 
```

但是如果您的表单有名称，则需要像这样指向您的表单：

```
document.forms['myForm']; //Points to <form name="name_of_form"> 
```

# objective-c - UILabel：按下按钮时给数字加1？

> ID：16116412
> 
> 赞同：0
> 
> 时间：2013-04-20T04:00:53.703
> 
> 标签：objective-c, xcode, numbers, uilabel

我对此很陌生，每次按下按钮时，我都非常希望获得有关如何更改 UILabel 以将前一个数字加 1 的帮助。IE 我想要它，所以当我按下按钮时，UILabel 会从 0 变为 1，如果我再次按下它，它会从 1 变为 2。任何帮助将不胜感激。提前致谢。我知道我必须创建按钮，但我不知道要放入他们的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:01:32.193

做这样的事情

```
//header 
@property (nonatomic) int i;
- (IBAction)buttonClicked:(UIButton *)sender;
//implementation
- (void)viewWillAppear{
self.i = 0;
}
- (IBAction)buttonClicked:(UIButton *)sender{
self.i++;
[self.textField setText:[NSString stringWithFormat:@"%d", self.i]];
} 
```

`self.textField`是您要在其中显示数字的任何文本区域。此外，`buttonClicked`如果您正在使用它，则必须在界面构建器中建立从操作到按钮的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:23:56.677

`label.text = [NSString stringWithFormat: @"%d", [label.text intValue] + 1];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:15:50.023

`viewDidLoad`在您的方法中将您的标签设置为“0”

```
[lblMoves setText:@"0"]; 
```

更改按钮单击和更新标签上的计数器

```
- (IBAction)incrementLabel:(id)sender
{
    int cnt = [[lblMoves text] integerValue];
    NSLog(@"Current %d, Next %d",cnt, ++cnt);
    [lblMoves setText:[NSString stringWithFormat:@"%d",cnt]];
} 
```

# xcode - 为 OS X 应用示例设置应用内购买

> ID：16116414
> 
> 赞同：1
> 
> 时间：2013-04-20T04:01:03.593
> 
> 标签：xcode, macos, in-app-purchase, app-store-connect

我知道 Apple 的开发者网站上有参考资料，但我很难成功地实现在我的 Mac 应用程序中进行应用内购买的功能。

我正在寻找类似于 MKStoreKit、IAPNoob 或 IAPHelper 的东西。

有许多 iOS 类可以完成大部分的繁琐工作，并且很容易在几分钟内实现。我希望有人可以为我指出类似 OS X 应用程序的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T06:27:11.237

`iOS`为和实现应用内购买`OS X`是类似的。您可以对两者使用相同的代码。但是对于 OS X，您必须研究[Validating Mac App Store Receipts](https://developer.apple.com/library/mac/#releasenotes/General/ValidateAppStoreReceipt/index.html)以在应用程序启动时验证购买。您可以参考[RVNReceiptValidation](https://gist.github.com/sazameki/3026845)作为参考。它很容易实现。如果您对此有任何疑问，请告诉我。

# mysql - mySQL，需要帮助将许多子查询放入 1 个 SELECT 查询（显示 13 列）

> ID：16116416
> 
> 赞同：1
> 
> 时间：2013-04-20T04:01:14.837
> 
> 标签：mysql, subquery, mysql-error-1242

这是我的第一篇文章。我知道这是非常低效且重复的代码，实际上不会起作用，我需要做的就是将所有这些输出合并到 1 个 select 语句中。我显然对此很陌生，但是我整天都在做这件事，我只是无法朝着正确的方向开始，每个片段都是独立的......请帮助！

本质上，我正在使用具有许多表的数据库，并且要为每一列获取正确的数据，我经常需要考虑 3 个带有连接的表。

感谢您的任何见解或帮助！

```
SELECT 
  Product.ProductID,
  (
  SELECT Abbreviation AS Country
  FROM Product
  LEFT JOIN ProductCountry 
    ON Product.ProductID = ProductCountry.ProductID
  LEFT JOIN Location 
    ON ProductCountry.LocationID = Location.LocationID
  GROUP BY Product.ProductID
  ),

  (
  SELECT r.ResourceName AS Manufacturer, rr.ResourceName AS Brand
  FROM Product p
  LEFT JOIN Resource r 
    ON p.ManufactureCode = r.ResourceID
  INNER JOIN Resource rr 
    ON p.BrandCode = rr.ResourceID
  ),

  Product.Name,
  Product.UPC,
  Product.Size,

  (
  SELECT Unit.abbreviation AS Measure
  FROM Product
  LEFT JOIN Unit 
    ON Product.Unit = Unit.UnitID
  ),

  (
  SELECT Category.ParentID AS Category, Category.Description AS Sub_Category
  FROM Product
  LEFT JOIN ProductCategory 
    ON Product.ProductID = ProductCategory.ProductID
  LEFT JOIN Category 
    ON ProductCategory.CategoryID = Category.CategoryID
  ),

  (
  SELECT i.Description AS INGREDIENTS, i.MayContain AS Allergen_Statement
  FROM Product
  LEFT JOIN Ingredient i 
    ON Product.ProductID = i.IngredientID
  ),

  (
  SELECT GROUP_CONCAT( Special.Description SEPARATOR ', ' ) AS Free_From
  FROM Product
  LEFT JOIN ProductSpecial 
    ON Product.ProductID = ProductSpecial.ProductID
  LEFT JOIN Special 
    ON ProductSpecial.SpecialID = Special.SpecialID
  GROUP BY Product.ProductID
  )

FROM Product, ProductStatus
WHERE ProductStatus.ProductStatusID = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:41:07.717

首先，一些注释和假设......

*   我假设该`Country`列在`Location`表中，否则您为什么还要麻烦加入它。

*   如果这部分有问题，请将第二个连接更改为`LEFT JOIN`. 我偶尔会遇到麻烦，`left join a to b`然后是`inner join b to c`. 我发现继续`LEFT JOIN`前进更容易，所以我的示例左连接两个表：

    ```
     LEFT JOIN Resource r 
        ON p.ManufactureCode = r.ResourceID
      INNER JOIN Resource rr 
        ON p.BrandCode = rr.ResourceID 
    ```

*   你以`Resource`两种不同的方式加入。MySQL（以及所有主流数据库）完全可以。您只需为其中一个或两个连接设置别名。我给其中一个起了别名：

    ```
    LEFT JOIN Resource ON Product.ManufactureCode ...
    LEFT JOIN Resource BrandResource ON Product.BrandCode... 
    ```

*   我不知道你的例子`ProductStatus`是如何加入的。你必须提供那个。

*   使用下面的示例从小处着手。加入`Country`, 然后当你得到它的工作时，加入`Manufacturer`, then `Brand`, then`Measure`等等。查询没有做很多高级的东西；它很复杂，主要是由于表的数量众多。一次解决一个，你会赢的:)

*   最后，正如@Bohemian 在评论中指出的那样，`GROUP BY`无法将其提升到顶部。实际上，它可能可以，但它会使事情变得难以置信。我把它作为一个子查询。

这是最终结果。请注意，它没有经过测试，因为它很大而且我没有表结构或示例数据。但主要是因为它很大:) 无论如何，这只是一个例子。

```
SELECT 
  Product.ProductID,
  Location.Country,
  Resource.ResourceName AS Manufacturer,
  BrandResource.ResourceName AS Brand,
  Product.Name,
  Product.UPC,
  Product.Size,
  Unit.Abbreviation AS Measure,
  Category.ParentID AS Category,
  Category.Description AS Sub_Category,
  Ingredient.Description AS Ingredients,
  Ingredient.MayContain AS Allergen_Statement,
  (SELECT GROUP_CONCAT( Special.Description SEPARATOR ', ' ) AS Free_From
    FROM Product
    LEFT JOIN ProductSpecial 
      ON Product.ProductID = ProductSpecial.ProductID
    LEFT JOIN Special 
      ON ProductSpecial.SpecialID = Special.SpecialID
    GROUP BY Product.ProductID
    )
FROM Product
  INNER JOIN ProductStatus ON ... however it's joined
  LEFT JOIN ProductCountry ON Product.ProductID = ProductCountry.ProductID
  LEFT JOIN Location ON ProductCountry.LocationID = Location.LocationID
  LEFT JOIN Resource ON Product.ManufactureCode = Resource.ResourceID
  LEFT JOIN Resource BrandResource ON Product.BrandCode = BrandResource.ResourceID
  LEFT JOIN Unit ON Product.Unit = Unit.UnitID
  LEFT JOIN ProductCategory ON Product.ProductID = ProductCategory.ProductID
  LEFT JOIN Category ON ProductCategory.CategoryID = Category.CategoryID
  LEFT JOIN Ingredient ON Product.ProductID = i.IngredientID
WHERE ProductStatus.ProductStatusID = 1 
```

# php - 使用 fwrite 从文本文档中删除特定数据？

> ID：16116417
> 
> 赞同：0
> 
> 时间：2013-04-20T04:01:20.027
> 
> 标签：php, html, mysql, fwrite

我正在为我的迷你社交网络编写一个“取消朋友”脚本，基本上取消朋友操作需要`$user`从他们的朋友列表中删除他们的 id call: 和我的 id call: `$my_id`。我已经制作了将用户 ID 添加到每个用户文件的脚本，但我不确定如何删除它？

我的`friend_list`文件： `1,2,3 // I am user 1`

他们的`friend_list`档案： `1,2,3 // They are user 3`

我目前使用它来将每个 id 添加到文本文件中：

```
if($action === 'accept'){
    mysql_query("DELETE FROM `friend_req` WHERE `from`='$user' AND `to`='$my_id'");

    $fp = fopen($user_data['friend_list'], 'a');
    fwrite($fp, ",".$user."");
    fclose($fp);

    $their_id = friend_list_from_user_id($user);
    $fp = fopen($their_id, 'a');
    fwrite($fp, ",".$my_id."");
    fclose($fp);
} 
```

但是要从我`$my_id`的他们`friend_list`和他们的`$user`id中删除，`friend_list`我想我需要使用这样的东西，但它不起作用：

```
if($action === 'unfriend'){
    $fp = fopen($user_data['friend_list'], 'a');
    unset($user);
    fclose($fp);

    $their_id = friend_list_from_user_id($user);
    unset($my_id);
    fclose($fp);
} 
```

但这似乎不起作用，我应该怎么做才能从相应的文件中只删除指定的用户名？

哦，而且，这可能/可能没有用：

```
$myFile = $file;
$fh = fopen($myFile, 'r');
$theData = fgets($fh);
fclose($fh);

$friend = explode(',', $theData);

for($i=0; $i < count($friend); $i++){
    if($i >= 0)
    {
        if($friend[$i] == $user_id) {
        $their_user_id = $user_id;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:29:05.730

要解决您的问题，只需执行以下操作：

```
//get the contents of the file
$contents = file_get_contents($user_data['friend_list']);
$contents = str_replace(",".$friend_id, "", $contents); //remove the friend's id

//open the file again and rewrite the whole thing with the new contents without that id
$fp = fopen($user_data['friend_list'], 'w+');
fwrite($fp, $contents);
fclose($fp); 
```

# matlab - 当我在 Matlab 上运行 pcolor 绘图时，轴文本出现污迹且不可读

> ID：16116418
> 
> 赞同：1
> 
> 时间：2013-04-20T04:01:36.530
> 
> 标签：matlab, graphics

当我在 Matlab 上运行 pcolor 绘图（只有 pcolor，绘图很好）时，轴文本出现污迹且不可读。见附图。

![在此处输入图像描述](https://i.stack.imgur.com/CIt7Z.jpg)

我在 WIN7 托管的 VMWARE 虚拟机下运行带有 Matlab R2012b 的 Ubuntu 12.04。

有没有人见过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:23:41.207

您可以按如下方式更改图形/轴属性：

*   1 编辑 > 轴属性

![在此处输入图像描述](https://i.stack.imgur.com/RrZVj.png)

*   2 在字体选项卡中，更改字体大小等以使您的图形更清晰。

![在此处输入图像描述](https://i.stack.imgur.com/77mq7.png)

# css - 如何用像素设置高度然后自动

> ID：16116422
> 
> 赞同：0
> 
> 时间：2013-04-20T04:01:55.063
> 
> 标签：css, height

我目前有一个盒子`width: 153px;`，`height: auto;`但是当页面加载时，因为里面没有任何东西，盒子没有正文。

**如何让它加载高度：51px，然后在添加图像后更改为自动？**

**我试过什么？**

我尝试`height: 53px auto;`
在 html 中的 div 上使用设置高度。

我确定它很简单，但我似乎无法解决。感谢您提供的任何帮助，我感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:04:55.970

这是无效的！

```
height: 53px auto; 
```

以这种方式使用它：

```
height: 53px;
height: auto; 
```

相反，您可以拥有 a`min-height`并将其设置为`53px`.

```
min-height: 53px;
height: auto; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:10:04.673

利用

```
min-height: 53px;
height: auto 
```

# xml - 使用属性的 Scala XML 匹配节点

> ID：16116426
> 
> 赞同：2
> 
> 时间：2013-04-20T04:02:49.040
> 
> 标签：xml, scala, parsing, match

我在 scala 中加载一个 XML 文件，如下所示：

```
<dataset>
  <item label="neutral" target="general" tweetid="936466790" username="B_E_X">
    <content>Jim Lehrer just directed the debate audience ... 30 seconds ... #tweetdebate</content>
  </item>
  <item label="neutral" target="general" tweetid="936466992" username="Jonathan Fields">
    <content>Here we go. #tweetdebate</content>
  </item>
</dataset> 
```

现在，我正在尝试使用属性获取每个项目的标签，但它总是没有返回我？我尝试了几种方法，例如匹配，解析等：

```
val rawXML = XML.loadFile(file).toList
rawXML.foreach(x => println(x.attribute("label"))) 
```

我还尝试了如下匹配：

```
myXML match { 
    case <dataset>
    {item @ <item>{theText}</item>}
    </dataset> => 
    println("An %s text: %s".format(item \ "@label", theText)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:00:21.963

有几种方法可以做到这一点。您的第一个版本的问题是您没有在子节点中搜索“标签”：

```
//Note the three whitespace nodes
scala> rawXML.child.foreach(x => println(x.attribute("label")))
None
Some(neutral)
None
Some(neutral)
None 
```

您可以对具有“标签”属性的“项目”的所有子节点进行更精细的搜索：

```
scala> rawXML \ "item" \\ "@label"
res0: scala.xml.NodeSeq = NodeSeq(neutral, neutral) 
```

如果您在 scala 中使用 xml 做了很多工作，那么我建议您使用[Anti-XML](http://anti-xml.org/selectors.html)。与 scala 的原生 xml 处理相比，它为您提供了更好的语法和性能改进（大部分）。

# java - 通过访问令牌对休息服务进行用户授权

> ID：16116427
> 
> 赞同：0
> 
> 时间：2013-04-20T04:02:49.883
> 
> 标签：java, facebook, jersey, oauth-2.0, restful-authentication

我有一个移动应用程序（HTML 5、JavaScript）和一个 Restful 服务（Java、Jersey）来满足移动应用程序的需求。

移动应用程序登录是通过 Facebook 处理的（使用 Facebook 帐户登录）。并且目前还没有为 Restful 服务集成任何安全机制

所以我的问题是，我可以通过从 Facebook 检索到的访问令牌授权 Restful 服务上的用户到移动应用程序吗？为了进一步澄清，如果有人登录了手机，他/她应该被授权向 Restful 服务提出请求。

提前感谢阿桑卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:24:19.980

如果用户已通过 Facebook 进行身份验证，并且您拥有访问令牌，则可以获取用户的 facebook 个人资料的公开信息。您必须使用访问令牌点击此链接 - [https://graph.facebook.com/me 。](https://graph.facebook.com/me)

继续，点击链接，看看会发生什么。当您传递有效的访问令牌时，配置文件信息将作为 JSON 对象返回。（如果您的 FB 个人资料页面是 = facebook.com/yourname，那么只需尝试[https://graph.facebook.com/yourname](https://graph.facebook.com/yourname) -> 您将能够看到返回的数据是什么样的。

现在，使用返回的用户数据，无论用户是否注册，您都可以在数据库中保留一个条目，对于首次使用的用户，您可以注册他们。

PS - [https://graph.facebook.com/yourname](https://graph.facebook.com/yourname)实际上返回某人的个人资料信息！我不知道有人可以将他们的个人资料句柄保留为您的名字！！！
PPS - 我刚刚检查了 facebook.com/yourname -> 猜猜这个手柄是谁用的！是巴西后卫罗伯托·卡洛斯！

# c++ - 从子类调用非虚方法

> ID：16116430
> 
> 赞同：0
> 
> 时间：2013-04-20T04:03:25.607
> 
> 标签：c++, class, function, polymorphism, parent

我知道基于多态性，您不能调用非虚函数/方法

前任：

```
class Entity
{
public: 
    Entity() { health = 10; }
    void DisplayHealth() { std::cout << health << std::endl; }
protected: 
    int health;
}; 

class Player : public Entity
{

};

class Enemy : public Entity
{
    void SetHealth(int n) { health = n; }
};

int main()
{
    Entity *instance = new Enemy(); 
    instance->SetHealth(1); // Error
    return 0;
} 
```

所以我想出的解决办法是做这样的事情：

```
int main()
{
    Entity *instance = new Enemy(); 
    Enemy e = *(Enemy*)instance; 
    e.SetHealth(1); 
    instance = &e; 
} 
```

这可以很好地满足我的需求，但我想知道这是否是“正确”的做法。有没有更有效的方法来使用多态调用子类方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:07:37.010

```
Entity *instance = new Enemy(); 
Enemy e = *(Enemy*)instance; 
```

创建一个新的 Enemy 对象，然后将实例指向的对象分配给它。这是多余的。接着

```
instance = &e; 
```

导致内存泄漏，因为您刚刚丢失了指向的指针`new Enemy()`并且您没有删除它。

* * *

```
int main()
{
    Entity *instance = new Enemy(); 
    Enemy *e = static_cast<Enemy*>(instance);  
          ^^ 
    e->SetHealth(1); 
} 
```

==================================================== =================================

==================================================== =================================

但是看到 as`Health`是基类的成员`Entity`，您可以将`setHealth`函数移动到 Entity 并完成它。

```
class Entity
{
public: 
    Entity() { health = 10; }
    void DisplayHealth() { std::cout << health << std::endl; }
    void SetHealth(int n) { health = n; }
protected: 
    int health;
};

int main()
{
    Entity *instance = new Enemy(); 
    instance->SetHealth(1); // Not Error Anymore
    return 0;
} 
```

# ruby-on-rails - Rails，断言失败，未给出消息

> ID：16116436
> 
> 赞同：1
> 
> 时间：2013-04-20T04:04:35.017
> 
> 标签：ruby-on-rails

在尝试为模型编写单元测试时，我不断收到相同的错误并且似乎无法修复它。

这是我的测试：

```
require 'test_helper'

class ProductTest < ActiveSupport::TestCase
test "product attirbutes must not be empty" do
    product = Product.new
    assert product.invalid?
    assert product.errors[:title].any?
    assert product.errors[:description].any?
    assert product.errors[:price].any?
    assert product.errors[:image_url].any?
end

  test "product price must be positive" do
    product = Product.new(title:       "My Book Title",
                          description: "yyy",
                          image_url:   "zzz.jpg")

    product.price = -1
        # line number 19 below
    assert product.invalid?
    assert_equal ["must be greater than or equal to 0.01"],
      product.errors[:price]

    product.price = 0
    assert product.invalid?
    assert_equal ["must be greater than or equal to 0.01"], 
      product.errors[:price]

    product.price = 1
    assert product.valid?
  end

end 
```

当我运行 > rake test

我收到以下错误：

```
 1) Failure:
ProductTest#test_product_price_must_be_positive
/test/models/product_test.rb:19]:
Failed assertion, no message given. 
```

这是我的模型：

```
class Product < ActiveRecord::Base
validates :title, :description, :image_url, presence: true
validates :price, numericality: {greater_then_or_equal_to: 0.01}
validates :title, uniqueness: true
validates :image_url, allow_blank: true, format: {
    with: %r{\.(gif|jpg|png)\Z}i,
    message: 'must be a url for GIF, JPG or PNG image.'
}
end 
```

我不知道这里发生了什么，请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T12:34:56.550

根据 MiniTest::Assertions [docs](http://ruby-doc.org/stdlib-2.0.0/libdoc/minitest/rdoc/MiniTest/Assertions.html#assert-method)，除非您提供可选的 'msg' 参数，否则从 'assert' 派生的任何方法都会在失败时引发异常消息“断言失败，未给出消息”

* * *

一些东西：

1.  您正在测试 Active Record 验证，这些都是经过试验和测试的库的生产就绪功能，因此没有必要对其进行测试。要更加熟悉 Active Record 验证，只需阅读[文档](http://edgeguides.rubyonrails.org/active_record_validations.html)，然后在 rails 控制台中使用您的模型

2.  只有在尝试“创建”或“保存”模型时才会执行活动记录验证。例如：

    ```
    my_user = User.create(name: nil, email: nil) # try save to DB - fails silently
    my_user.valid? # => false
    my_user.errors.messages # => {name:["can't be blank"], email:["can't be blank"]} 
    ```

* * *

也许探索一些关于该主题的进一步学习，Ryan Bate 的截屏视频很棒而且大部分都是免费的。希望这可以帮助

注意：我希望附加更多链接/参考，但是我没有 Stackoverflow 点要做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T22:50:50.680

你的模型是错误的。

（第 3 行）　　　　　　　　　　
　　　　　　　　　　　　　　　　　　 　　　 ↓　

错误）验证：价格，数字：{greater_then_or_equal_to：0.01}

正确）验证：价格，数值：{greater_than_or_equal_to：0.01}

不是“那么”而是“比”。

# c++ - linkList 复制构造函数和赋值运算符

> ID：16116441
> 
> 赞同：0
> 
> 时间：2013-04-20T04:05:10.043
> 
> 标签：c++, copy-constructor

我正在编写我的节点和列表类，一切正常，除非我在列表类中包含析构函数、复制构造函数和赋值运算符函数，而且我不知道它们有什么问题或者我错过了什么不包括.

```
linklist::linklist()
    :firstNode(NULL),
    lastNode(NULL),
    nodeCount(0) {}

linklist::~linklist()// destructor
{
    node* current = firstNode;
    while( current != 0 ) {
        node* temp = current->getNextNode();
        delete current;
        current = temp;
    }
    firstNode = 0;
}

linklist::linklist(linklist &L)// copy constructor
{
    firstNode = NULL;
    nodeCount = 0;
    node* temp = L.firstNode;
    for(int i = 0; i < L.getNodeCount(); i++)
    {
        push_back(temp);
        temp = temp->getNextNode();
    }
}

linklist& linklist::operator=(const linklist& L)// overloading assignemnt operator
{
    linklist* LL;
    node* temp = L.firstNode;
    while( temp != NULL ) {
        LL->getLast();
        temp = temp -> getNextNode();
    }
    return *LL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:23:31.260

您的分配应该类似于您的复制构造函数。因为他们都做几乎相同的事情。

**`clear`**不同之处在于在开始复制 rhs（另一个）之前，您应该在列表（本身）中分配什么。

然后它应该返回对自身的引用。`return *this`. 这样可以链接分配。

```
linklist& linklist::operator=(const linklist& L)// overloading assignemnt operator
{
    // Check if self assignment
    if (&L == this)
       return *this;

    // clear myself.
    // copy other.
    return *this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:46:03.437

你似乎有两个问题。首先，析构函数删除所有节点结构。一旦原始链表被销毁，使用复制构造函数复制的任何新链表都将具有不正确的数据。其次，使用其复制构造函数复制节点结构可能会更好。没有确切信息很难说，但您的链表 ctor 可能类似于：

```
firstNode = NULL;
nodeCount = 0;
node* temp = L.firstNode;
for(int i = 0; i < L.getNodeCount(); i++)
{
    push_back(new node(*temp));
    temp = temp->getNextNode();
} 
```

这样，新的链表就有了自己的节点副本。

# java - 将数据发送到套接字数组列表中的套接字

> ID：16116443
> 
> 赞同：0
> 
> 时间：2013-04-20T04:05:17.610
> 
> 标签：java, multithreading, sockets, networking, output

我制作了一个聊天服务器，我的客户可以连接到该服务器，但客户没有收到对方发送的消息。这是完成这一切的代码。发送和接收以及设置输出流。

```
public void run()
{
    while(true)
    {
        for(int i = 0; i < ClientConnector.Connections.size(); i++)
        {

            try
            {
                if(Socket != null)
                {
                    ObjectOutputStream Output = new ObjectOutputStream(Socket.getOutputStream());
                    ObjectInputStream Input = new ObjectInputStream(Socket.getInputStream());
                    whileChatting(Input, Output);
                }
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
        }
    }
}

public static void sendMessage(String message, String returnedMessage, ObjectOutputStream out)
{
    try
    {
        System.out.println("[Server] " + message);
        if(!message.isEmpty())
        {

            out.writeObject("\247c[Server]\247d " + message);
            out.flush();
            System.out.println("[Chat] Sent: " + message);
        }
        else
        {
            out.writeObject(returnedMessage);
            System.out.println("[Chat] Sent: " + returnedMessage);
        }
        out.flush();
        System.out.println("[Info] Flushing remaining data to stream.");

    }
    catch(IOException ioException)
    {
        System.out.println("[Warning] Error: ioException @ sendMessage line 76.");
    }
}

public static void whileChatting(ObjectInputStream input, ObjectOutputStream output) throws IOException
{
    String message = "";
    do
    {
        try
        {
            message = (String) input.readObject();
            System.out.println(message);
            sendMessage("", message, output);
        }
        catch(ClassNotFoundException classNotFoundException)
        {
            System.out.println("[Warning] Error: ClassNotFoundException @ whileChatting line 1-7.");
            System.out.println("idk wtf that user sent!");
        }
    }while(!message.equals("/stop"));
} 
```

我想知道。我如何让这个发送一个人发送给所有客户的东西？我在套接字数组列表中保留了一个套接字列表。看起来像这样。

```
public static ArrayList<Socket> Connections = new ArrayList<Socket>(); 
```

当每个客户端连接时，它会将他们的 Socket 存储在这个列表中。如果有更好的方法可以做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:22:17.907

当您不使用迭代变量时，我看不到循环的意义。当然，你应该发送到`ClientConnector.Connections.get(i)`？

这里的另一个问题是您在每次迭代中都创建了一个新的`ObjectInputStream`和。`ObjectOutputStream`那是行不通的。在每个套接字的生命周期内，您必须在每个套接字的两端使用同一对这些流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:15:50.623

如果这些是远程客户端，那么[MulticastSocket](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/MulticastSocket.html)可能会解决问题。如果这些是本地客户端，那么像[HornetQ](http://www.jboss.org/hornetq)这样的发布/订阅消息服务就可以工作（客户端订阅消息队列，而 HornetQ 负责路由）。

# android - 在 Android 中将图像上传到 php 服务器的最佳方法？

> ID：16116444
> 
> 赞同：4
> 
> 时间：2013-04-20T04:05:19.910
> 
> 标签：android, http-post, multipartentity

在我的应用程序中，我需要将图像从 Android 上传到 php 服务器。我使用了多方，它对我有用。谁能给我一个比这更快的方法。我需要一次从我的应用程序上传 4 张图片。所以这需要很多时间，我想减少这个。

请有任何建议....在此先感谢

# python - Python中的文字和变量有什 么区别？

> ID：16116446
> 
> 赞同：12
> 
> 时间：2013-04-20T04:05:26.257
> 
> 标签：python, variables, definition, literals

我是 Python 的初学者，但我对文字和变量感到困惑。

这是我对文字的了解：`"a"+"b"`

和变量：`sentence="a"+"b"`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-20T04:12:33.453

文字是表示固定 ( `const`) 值的符号。
变量是与符号名称关联的存储位置（如果您愿意，可以指向）。

最好在使用中解释：

```
foo = bar(42)
^     ^   ^
|     |   |--- literal, 42 is *literally* 42
|     |------- function, also represents "something" in memory
|------------- variable, named "foo", and the content may vary (is variable) 
```

另一方面，标识符是分配给 python 语句中变量的名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-20T04:12:18.677

在任何编程语言中，Literal 都是一个常量值，其中标识符可以改变它们的值。标识符可以存储文字并进一步处理它们。标识符是赋予变量的名称。

`1`, `1.5`, `'a'`,`"abc"`等是文字的示例。但在语句中`x=123`，x 是一个变量，123 是一个字面量。

# java - 使用 Java 裁剪图像

> ID：16116448
> 
> 赞同：1
> 
> 时间：2013-04-20T04:06:08.797
> 
> 标签：java, image, crop

如何在 Java 中裁剪图像？我目前有这个类用于图像处理。

main方法与run方法：

```
public static void main(String[] args) {
    GameProject gp = new GameProject();
    gp.run();
}

public void run(){
    s = new Screen();

    try {
        DisplayMode dm = s.findFirstCompatibleMode(modes);
        s.setFullscreen(dm);
        Fonts f = new Fonts(); //Checks if certain fonts exsist, if not install them.
        Images i = new Images(); 

        try { 
            i.draw("H:\\Dropbox\\Dropbox\\GameProject\\src\\Resources\\brock.png", 200, 200);
            Thread.sleep(50000);
        } catch (Exception e) {}
    } finally {
        s.restoreScreen();
    }
} 
```

*图片*类：

```
package Handlers;

import javax.swing.ImageIcon;
import java.awt.*;

/**
 *
 * @author Steven
 */
public class Images {

    /**
     * @param args the command line arguments
     */
    private Screen s;  

    public void draw(String name, int x, int y) {   //Draws the image
        s = new Screen();
        Graphics2D g = s.getGraphics();
        draws(g, name, x, y, getWidth(name), getHeight(name));
    }   

    public void drawA(String name, int x, int y){   //Draws the image, allows for a more advanced image manipulation 
        s = new Screen();
        Graphics2D g = s.getGraphics();
        draws(g, name, x, y, getWidth(name), getHeight(name));
    }       

    public void draws(Graphics g, String name, int x, int y, int w, int h) {    //Draws and updates the screen
        s = new Screen();
        g.drawImage(new ImageIcon(name).getImage(), x, y, w, h, null);
        s.update();
    }

    public int getWidth(String name) {  //Gets the image width
        return new ImageIcon(name).getIconWidth();
    }

    public int getHeight(String name) { //Gets the images height
        return new ImageIcon(name).getIconHeight();
    }

} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T04:11:22.493

您可以使用[`CropImageFilter`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/CropImageFilter.html)裁剪图像。另外，看看 java.awt.image 包，它确实有很多图像处理例程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T05:57:39.310

我在自己的项目中使用了它：-

```
public boolean CropImage(int cropHeight,int cropWidth,int windowLeft,int windowTop,File srcFile,String destDirectory,String destFilename,int commonPadding,String fileFormat,HttpServletRequest request)throws IOException{
        boolean isOkResolution=false;
        try {
            String dirPath=request.getRealPath("")+"/"+destDirectory;
            File f=new File(dirPath);
            if(!f.isDirectory()){
                f.mkdir();
            }
            String destpath=dirPath+"/"+destFilename;
            File outputFile=new File(destpath);
            FileInputStream fis=new FileInputStream(srcFile);
            BufferedImage bimage=ImageIO.read(fis);
            System.out.println("Image Origilnal Height=="+bimage.getHeight());
            BufferedImage oneimg=new BufferedImage(cropHeight,cropWidth,bimage.getType());
            Graphics2D gr2d=oneimg.createGraphics();
            isOkResolution=gr2d.drawImage(bimage,0,0,cropWidth,cropHeight,windowLeft-commonPadding,windowTop-commonPadding,(windowLeft+cropWidth)-commonPadding,(windowTop+cropHeight)-commonPadding,null);
            gr2d.dispose();
            ImageIO.write(oneimg,fileFormat,outputFile);
        } catch (FileNotFoundException fe) {
            System.out.println("No File Found =="+fe);
        } catch(Exception ex){
            System.out.println("Error in Croping File="+ex);
            ex.printStackTrace();
        }
        return isOkResolution;
    } 
```

此方法将帮助您裁剪图像。它适用于我的项目。希望它能帮助您。

# excel - excel计算准确率

> ID：16116451
> 
> 赞同：0
> 
> 时间：2013-04-20T04:06:58.150
> 
> 标签：excel, excel-formula

我在 MS Excel 中有一个预测单元格 (A1)、一个结果单元格 (B1) 和一个差异单元格 (C1)。我有一个准确度单元格 (D1)，我想根据结果显示预测的准确性。

例如，如果我有 24 作为预测和 24 作为结果，那么准确度应该是 100%，差异为 0。如果我有 24 的预测和 12 的结果，那么准确度应该是 50%，并且差-12。如果我的预测是 24，结果是 48，那么准确率应该是 50%，相差 12。

这是我在精度单元格 (D1) 中使用的计算：

`=(((C1+100)*A1)/B1)/(C1+100)`

此计算仅在“预测”单元格高于或等于“结果”单元格时显示预期结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-26T15:37:54.490

据我所知，它是一个非常简单的论坛。

如果 A1 是包含预测的单元格，A2 是实际结果，则使用此公式

```
=IF(A1<A2,A1/A2,A2/A1) 
```

这给出了两种情况下预测与实际的百分比

实验上，当使用以下值时，以下结果来自该单元格

1.  预测：2 | 实际 10 | 准确度：20%
2.  预测：4 | 实际 10 | 准确度：40%
3.  预测：6 | 实际 10 | 准确度：60%
4.  预测：8 | 实际 10 | 准确度：80%
5.  预测：10 | 实际 10 | 准确度：100%
6.  预测：12 | 实际 10 | 准确度：83%
7.  预测：14 | 实际 10 | 准确度：71%
8.  预测：16 | 实际 10 | 准确度：63%
9.  预测：18 | 实际 10 | 准确度：56%
10.  预测：20 | 实际 10 | 准确度：50%

希望能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:06:15.613

将 Col C 中的单元格格式化为“%”，然后试试这个公式

根据快照在 C1 中的公式

```
=IF(B1<A1,VALUE("-"&(B1/A1)),(B1/A1)) 
```

根据快照在 D1 中的公式

```
=B1-A1 
```

下面的各种测试场景。

![在此处输入图像描述](https://i.stack.imgur.com/eP8WG.png)

如果我误解了你的问题，请告诉我，我会纠正我的答案。

**跟进**

试试这个新公式

```
=IF(B1<A1,VALUE("-"&(B1/A1)),IF(B1=A1,B1/A1,(B1-A1)/A1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T15:58:30.003

我就是这样做的：

=MIN(A1:B1)/MAX(A1:B1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T04:18:34.360

尝试这个：

```
=(1 - ((B1 - A1)/A1)) * 100 
```

**编辑：**

我只是想多了。看起来准确的定义在这里是相当主观的。试试下面的公式，让我知道这是否更有效。

```
=(1-(ABS(B1-A1)/A1))*100 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-18T11:11:28.677

下面的公式将给出`%ge`Excel 中的准确性。应用后点击`%`按钮：

```
=1-(ABS((Predicted/Actual)-1)) 
```

# ruby-on-rails-3 - DRYup 在 before_destroy 上共享模型验证

> ID：16116452
> 
> 赞同：1
> 
> 时间：2013-04-20T04:07:19.367
> 
> 标签：ruby-on-rails-3, validation, callback, dry

为了防止删除相关记录，我在每个模型上应用 before_destroy 回调方法

我在一个模块中定义了几个相关记录验证方法，以便可以将它们共享给不同模型的 before_destroy 回调：

```
class Teacher < ActiveRecord::Base
  include RelatedModels
  before_destroy :has_courses
  ...
end

class Level < ActiveRecord::Base
  include RelatedModels
  before_destroy :has_courses
  ...
end

module RelatedModels

  def has_courses
    if self.courses.any?
      self.errors[:base] << "You cannot delete this while associated courses exists"
      return false
    end
  end

  def has_reports
    if self.reports.any?
      self.errors[:base] << "You cannot delete this while associated reports exists"
      return false
    end
  end

  def has_students
    if self.students.any?
      self.errors[:base] << "You cannot delete this while associated students exists"
      return false
    end
  end

  ...

end 
```

但它看起来不是很干燥

知道如何用一种方法做到这一点吗？元编程不是我的技能

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T19:25:10.783

您可能想尝试一个[`observer class`](http://api.rubyonrails.org/v3.2.13/classes/ActiveRecord/Observer.html)

这些在 Rails 4 中被贬值了（你必须使用[`rails-observers`gem](https://github.com/rails/rails-observers)），但似乎仍然是 Rails 3 核心的一部分

* * *

**观察者类**

“监听”模型中的指定动作，并提供扩展功能。正如他们的文档所述，它们特别适合整理模型，使您可以将许多功能组合到一组中央功能中

以下是您可能想做的事情（请记住，我只在 Rails 4 中使用过这些）：

```
class RelatedObserver < ActiveRecord::Observer
  observe :teachers, :school

  def before_destroy(record)
      associations = %w(teachers schools reports)
      associations.each do |association|
          if record.send(association).any?
              self.errors[:base] << "You cannot delete this while associated #{association.pluralize} exists"
              return false
          end
      end
  end
end 
```

这是一个[很好的资源](https://stackoverflow.com/questions/3836127/rails-3-observer-looking-to-learn-how-to-implement-an-observer-for-multiple-m)给你

# python - 在 Python 中存储随机字节字符串

> ID：16116456
> 
> 赞同：0
> 
> 时间：2013-04-20T04:08:09.817
> 
> 标签：python

对于我的项目，我需要能够将随机字节字符串存储在文件中并稍后再次读取字节字符串。例如，我想从以下代码存储 randomByteString：

```
>>> from os import urandom 
>>> randomByteString=urandom(8)
>>> randomByteString
b'zOZ\x84\xfb\xceM~' 
```

这样做的正确方法是什么？

编辑：忘了提到我还想在字节字符串旁边存储“普通”字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T04:10:35.573

代码如：

```
 >>> fh = open("e:\\test","wb")
 >>> fh.write(randomByteString)
 8
 >>> fh.close() 
```

以二进制模式操作文件。此外，如果文件操作在一个地方附近，您可以以更好的方式进行操作（感谢@Blender）：

```
>>> with open("e:\\test","wb") as fh:
        fh.write(randomByteString) 
```

更新：如果你想要强普通字符串，你可以对其进行编码，然后像这样写：

```
 >>> "test".encode()
 b'test'
 >>> fh.write("test".encode()) 
```

这里的 fh 表示之前打开的同一个文件句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:22:43.747

工作得很好。不过，您不能指望输出有多大意义。

```
>>> import os
>>> with open("foo.txt", "wb") as fh:
...     fh.write(os.urandom(8))
...
>>> fh.close()
>>> with open("foo.txt", "r") as fh:
...     for line in fh.read():
...         print line
...
^J^JM-/
^O
R
M-9
J
~G 
```

# php - jQuery 帖子不适用于动态 jQuery 元素

> ID：16116457
> 
> 赞同：1
> 
> 时间：2013-04-20T04:08:13.287
> 
> 标签：php, javascript, jquery, html, ajax

注意：这个问题是从帖子中分离出来的：[jQuery not working on elements created by jQuery](https://stackoverflow.com/questions/16116173/jquery-not-working-on-elements-created-by-jquery)

我通过每秒调用的 ajax 调用将列表项动态添加到 jQuery 中的列表中。

下面是ajax调用的代码。

```
$.ajax({
    url: 'php/update_group_list.php',
    data: '', 
    dataType: 'json',
    success: function(data) {
        var id = data.instructor_id;
            group_cnt = data.group_cnt,
            group_name = data.group_name,
            group_code = data.group_code;

            for (i = current_row; i < group_cnt; i++)
            {
                //setInterval(function() { $('#group-list-div').load('php/group_list.php'); }, 5000);

                $('#group-list').append("<li><a href='#' data-role='button' class='view-group-btns' id='"+group_code[i]+"' value='"+id+"' text='"+group_name[i]+"'>"+group_name[i]+"</a></li>");
                $('#delete-group-list').append("<fieldset data-role='controlgroup data-iconpos='right'>" +
                                                    "<input id='"+group_code[i]+i+"' value='"+group_code[i]+"' type='checkbox' name='groups[]'>" +
                                                    "<label for='"+group_code[i]+i+"'>"+group_name[i]+"</label>" +
                                                "</fieldset>");
            }

            current_row = i; 

            $('#group-list').listview('refresh');
            $('#delete-group-list').trigger('create');
    }
}); 
```

当我尝试发送复选框的表单数据时（在上面的 ajax 调用代码中引用行 $('#delete-group-list').blah...blah），帖子返回错误意外令牌 <

我究竟做错了什么？我认为这两个问题是相关的，因为我正在创建动态使用的列表项。

* * *

这是与问题相关的额外代码

HTML：

```
<form id='delete-group-form' action='php/delete_groups.php' method='post'>
    <h3 style='text-align: center;'>Check the Box Beside the Groups you Would Like to Delete </h3>
    <div style='margin-top: 20px;'></div>
        <div id='delete-group-list'>
        </div>
    <div style='margin-top: 20px;'></div>
    <input type='submit' id='delete-groups-btn' data-theme='b' value='Delete Groups(s)'>                    
</form> 
```

JS代码

```
$('#delete-group-form').submit(function(e) 
{
    e.preventDefault();

    alert($('#delete-group-form').serialize());

    if ($('#delete-group-form').serialize() == "") 
    {
        alert('No groups selected to be deleted.')
        return false;
    }
    else 
        if ($('#delete-groups-form').serialize() == null) 
        {
            alert('No groups selected to be deleted.')
            return false;
        } 
        else 
        {
            $.post('php/delete_groups.php',$('#delete-groups-form').serialize()).done(function(data) 
            {
                obj = jQuery.parseJSON(data);

                var group_codes = obj.group_list;

                alert(group_codes);

                alert("The selected groups have been deleted");
                window.setTimeout(2000);
                return false;
            });
        }
    return false;
}); 
```

delete_groups.php

```
<?php 
    $group_codes = $_POST['groups'];    
    $items = array('group_list'=>$group_codes); //creating an array of data to be sent back to js file
    echo json_encode($items); //sending data back through json encoding
?> 
```

我认为第二个问题的根源是 $group_codes = $_POST['groups']; 特别是 $_POST['groups'] 因为当我用 $group_codes = 'test'; 替换它时 （仅出于调试目的），代码按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:53:29.853

当您调用`$_POST['groups'];`（在您的 delete_groups.php 中）时，它会查找从带有属性的表单元素发送的内容`name="groups"`，但您的 delete-group-form 没有任何此类元素。

" `error unexpected token <`" 消息可能来自一个单独的问题。验证您的 HTML 可能会发现问题。

此外，我并不完全清楚您为什么要使用两个单独的函数（JS 中的 $.post 和 $.ajax）。除非我从您发布的代码中看不到其他事情，否则您只需使用一次 ajax 调用就可以大大简化它。把那个调用放在 的`$('#delete-group-form').submit(function(e)`地方，并使用调用的数据参数`$.post`传递你的`groups`变量。`ajax`修改 delete_groups.php 以返回必要的信息（当前从 update_group_list.php 返回）以更新页面上的显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:13:14.823

好的，以前我认为 php 文件的内容类型标头的错误仍然存​​在（您需要指定标头类型以使用 jQuery JSON 解析）。但是又发现了一个错误，我认为这是问题的原因。

```
<form id='delete-group-form' action='php/delete_groups.php' method='post'> 
```

您希望序列化的形式是

```
$('#delete-groups-form').serialize() 
```

您可以看到 ID 的差异。这将返回一个空对象，在 php 文件中它期望调用的索引`groups`从不存在。因此，它将返回一个未定义的索引错误作为以 开头的 html 内容类型，`<html>`该 JSON 解析器返回一个错误`unexpected token <`

希望这可以帮助

# hadoop - part-r-00000 中的重复值

> ID：16116458
> 
> 赞同：0
> 
> 时间：2013-04-20T04:08:20.137
> 
> 标签：hadoop, mapreduce

当我正在处理一个 xml 文件（[https://github.com/studhadoop/xml/blob/master/rpt](https://github.com/studhadoop/xml/blob/master/rpt)）时，我得到了重复的值作为输出。

```
bin/hadoop fs -text /user/root/t-output1/part-r-00000
ST17925 1.02
ST17925 1.02
ST17926 3.00
ST17926 3.00
ST17927 3.00
ST17927 3.00 
```

我的映射[https://github.com/studhadoop/xml/blob/master/XmlParser11.java](https://github.com/studhadoop/xml/blob/master/XmlParser11.java)

为什么会这样？是否取决于xml文件的大小？当我有一个大的 xml 文件时，我得到了重复的值。但如果它是一个小的 xml 文件，则输出是可以的。 **更新 1**

还有一个疑问。而不是这样列出

```
studentid grade
ST17925 1.02
ST17926 3.00
ST17927 3.00 
```

我应该在我的程序中做些什么改变？

**更新 2** 我将如何以 csv 格式输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:46:34.777

因为在您的 reducer 实现中，您将每个值的键写入输出收集器：

```
 for (Text value : values) {
      context.write(key, value);
    } 
```

你可能想要的是这样的：

```
 StringBuilder sb = new StringBuilder();
 for (Text value : values) {
    sb.append(value.toString());
    sb.append(" ");
 }
 context.write(key, new Text(sb.toString()); 
```

这将生成每个键的每个值的空格分隔列表。

# android - 使用 Google Drive 在 Android 中集成 OCR

> ID：16116463
> 
> 赞同：0
> 
> 时间：2013-04-20T04:09:27.690
> 
> 标签：android, ocr, google-drive-api

我搜索了很多，但我还没有成功。我不想使用 Tesseract 方法。

我已经根据

[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)

并在运行时将图像上传到 goggle docs 。我收到了文件上传成功的消息，文件名为 .

下载我关注的数据

```
public void downloadfile(File file)
  {
      String imageAsTextUrl = file.getExportLinks().get("text/plain");

      HttpClient client = new DefaultHttpClient();
      HttpGet get = new HttpGet(imageAsTextUrl);
      HttpResponse response;

      StringBuffer sb = new StringBuffer();
      BufferedReader in = null;
      try 
      {
          response = client.execute(get);
          in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
          String str;
          while ((str = in.readLine()) != null) 
          {
              sb.append(str);
          }
          Log.e(" sb data ", sb.toString());
          in.close();
      } 
      catch (ClientProtocolException e) 
      {
          e.printStackTrace();
      } 
      catch (IOException e) 
      {
          e.printStackTrace();
      }
  } 
```

我得到了返回数据

"`<!DOCTYPE html><html lang="en"> <head> <meta charset="utf-8"> <title>Welcome to Google Docs</title><style type="text/css"> html, body, div, h1, h2, h3, h4, h5, h6, p, img, dl, dt, dd, ol, ul, li, table, tr, td, form, object, embed, article, aside, canvas, command, details, fieldset, figcaption, figure, footer, group, header, hgroup, legend, mark, menu, meter, nav, output, progress, section, summary, time, audio, video { margin: 0; padding: 0; border: 0; } article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section { display: block; } html { font: 81.25% arial, helvetica, sans-serif; background: #fff; color: #333; line-height: 1; direction: ltr; } a { color: #15c; text-decoration: none; } a:active { color: #d14836; } a:hover { text-decoration: underline; } h1, h2, h3, h4, h5, h6 { color: #222; font-size: 1.54em; font-weight: normal; line-height: 24px; margin: 0 0 .46em; } p { line-height: 17px; margin: 0 0 1em; } ol, ul { list-style: none; line-height: 17px; margin: 0 0 1em; } li { margin: 0 0 .5em; } table { border-collapse: collapse; border-spacing: 0; } strong { color: #222; }</style><style type="text/css"> html, body { position: absolute; height: 100%; min-width: 100%; } .wrapper { position: relative; min-height: 100%; } .wrapper + style + iframe { display: none; } .content { padding: 0 44px; } .topbar { text-align: right; padding-top: .5em; padding-bottom: .5em; } .google-header-bar { height: 71px; background: #f1f1f1; border-bottom: 1px solid #e5e5e5; overflow: hidden; } .header .logo { margin: 17px 0 0; float: left; } .header .signin, .header .signup { margin: 28px 0 0; float: right; font-weight: bold; } .header .signin-button, .header .signup-button { margin: 22px 0 0; float: right; } .header .signin-button a { font-size: 13px; font-weight: normal; } .header .signup-button a { position: relative; top: -1px; margin: 0 0 0 1em; } .main { margin: 0 auto; width: 650px; padding-top: 23px; padding-bottom: 100px; } .main h1:first-child { margin: 0 0 .92em; } .google-footer-bar { position: absolute; bottom: 0; height: 35px; width: 100%; border-top: 1px solid #ebebeb; overflow: hidden; } .footer { padding-top: 9px; font-size: .85em; white-space: nowrap; line-height: 0; } .footer ul { color: #999; float: left; max-width: 80%; } .footer ul li { display: inline; padding: 0 1.5em 0 0; } .footer a { color: #333; } .footer .lang-chooser-wrap { float: right; max-width: 20%; } .footer .lang-chooser-wrap img { vertical-align: middle; } .footer .attribution { float: right; } .footer .attribution span { vertical-align: text-top; } .redtext { color: #dd4b39; } .greytext { color: #555; } .secondary { font-size: 11px; color: #666; } .source { color: #093; } .hidden { display: none; } .announce-bar { position: absolute; bottom: 35px; height: 33px; z-index: 2; width: 100%; background: #f9edbe; border-top: 1px solid #efe1ac; border-bottom: 1px solid #efe1ac; overflow: hidden; } .announce-bar .message { font-size: .85em; line-height: 33px; margin: 0; } .announce-bar .message .separated { margin-left: 1.5em; } .announce-bar-ac { background: #eee; border-top: 1px solid #e5e5e5; border-bottom: 1px solid #e5e5e5; } .clearfix:after { visibility: hidden; display: block; font-size: 0; content: '.'; clear: both; height: 0; } * html .clearfix { zoom: 1; } *:first-child+html .clearfix { zoom: 1; } pre { font-family: monospace; position: absolute; left: 0; margin: 0; padding: 1.5em; font-size: 13px; background: #f1f1f1; border-top: 1px solid #e5e5e5; direction: ltr; }</style><style type="text/css"> button, input, select, textarea { font-family: inherit; font-size: inherit; } button::-moz-focus-inner, input::-moz-focus-inner { border: 0; } input[type=email], input[type=number], input[type=password], input[type=tel], input[type=text], input[type=url] { -webkit- "`

但这不会返回图像中的文本，我上传了。如何获取我上传为图片的文本？

当我尝试

[Android 打开和保存文件到/从 Google Drive SDK](https://stackoverflow.com/questions/12164024/android-open-and-save-files-to-from-google-drive-sdk/12321331#12321331)

下载时，我在“ `DriveRequest driveRequest = (DriveRequest) request;`”中遇到错误，它无法将 HttpRequest 转换为 DriveRequest

然后我尝试了

```
DriveRequest driveRequest = DriveRequest.class.cast(request); 
```

但是我在这行说 ClassCastExcaption 时遇到了崩溃。

欢迎任何相关答案。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:01:33.490

我通过添加得到了正确的答案

```
get.setHeader("Authorization", "Bearer " + credential.getToken()); 
```

给`downloadfile`方法。

由于我的身份验证不正确，它返回了 Google Docs 欢迎页面的 HTML。添加此行后，我得到了正确识别的文本。

# android - 使用 Ruby on Rails 开发应用程序

> ID：16116467
> 
> 赞同：2
> 
> 时间：2013-04-20T04:10:02.157
> 
> 标签：android, iphone, ruby-on-rails

是否可以在 iphone 或 android 上使用 ruby​​ on rails 创建本机应用程序？

我知道用于iphone应用程序的编程语言是objective c，而最常用于android的是java。但我的朋友告诉我，他正在使用 Ruby on Rails 在 iphone 和 android 上制作他的手机应用程序。我认为 Ruby on Rails 是一个 Web 应用程序框架，我以前从未听说有人这样做（除非他们正在创建一个 Web 应用程序）。我想也许他正在使用一些转换器将rails的红宝石转换为目标c和/或java。我尝试向他询问有关它的详细信息，但他只是一个商人，有人推荐它在 Rails 上使用 ruby​​。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T04:28:31.903

您可以使用 Ruby 制作 iOS 应用程序。看看这个[网站](http://www.rubymotion.com/)

# java - 为什么我的程序在文件存在时捕获/抛出 FileNotFoundException？

> ID：16116469
> 
> 赞同：2
> 
> 时间：2013-04-20T04:10:25.117
> 
> 标签：java, exception, runtime-error, filenotfoundexception

Java新手在这里！

我正在编写一个程序来练习读取输入并将输出写入文件。我已经完成了程序的编码，但是当我运行它时，程序只是捕获并继续执行 FileNotFoundException。

该文件位于程序的源文件夹中，我什至尝试将其放在与程序相关的每个文件夹中。我试过了：

*   在方法头中声明异常
*   用 try/catch 块包围有问题的部分。
*   以上两者结合。

这是导致问题的相关代码。有什么突出我想念的吗？

```
public static void main(String[] args) throws FileNotFoundException  {

    Scanner keyboard = new Scanner(System.in);

    String playerHighestScore = "", playerLowestScore = "";
    int numPlayers = 0, scoreHighest = 0, scoreLowest = 0;

    System.out.println("Enter an input file name: ");               
            String inputFileName = keyboard.nextLine();                 

    String outputFileName = getOutputFileName(keyboard, inputFileName);     
    File inputFile = new File(inputFileName);
    try {
        Scanner reader = new Scanner(inputFile);
        reader.close();
    }
    catch (FileNotFoundException exception) {       
        System.out.println("There was a problem reading from the file.");                   
        System.exit(0);
    }

    Scanner reader = new Scanner(inputFile);
    PrintWriter writer = new PrintWriter(outputFileName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:36:15.220

答案很简单。如果您得到 a `FilENotFoundException`，显然原因是在给定路径中未找到文件。
如果您使用 IDE，则工作目录的路径与源目录不同。
例如，如果您使用的是 NetBeans，则您的源文件位于`/src`. 但是您的工作目录 ( `.`) 是项目目录。
另一方面，问题可能是@Don 提到的。如果您要采用跨平台方法，则可以`/`在路径中使用“”。它与操作系统无关。
示例：`String fileName = "C:/Directory/File.txt";`
这些路径区分大小写。因此，请确保使用正确的大小写。（在您打包程序之前，这在 Windows 中不会有问题。）

# javascript - 使用 JavaScript 函数更改 CSS 中的背景颜色

> ID：16116473
> 
> 赞同：1
> 
> 时间：2013-04-20T04:10:56.520
> 
> 标签：javascript, jquery, css

使用 CSS，我试图将每个元素的背景颜色设置为悬停时的随机颜色：

```
:hover {
    background-color: "getRandom()";
} 
```

但是，似乎无法在此处调用 JavaScript 函数。有没有其他可行的方法？

这是我正在处理的页面：http: [//jsfiddle.net/FwKqq/3/](http://jsfiddle.net/FwKqq/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:18:29.080

在您的 jQuery 代码中：

```
$("*").hover(
    function(event) {
        $(this).css("background-color", getRandomColor());
    },
    function (event) {
        $(this).css("background-color", "white");
    }
); 
```

（您还应该删除`:hover`css 元素）

示例：http: [//jsfiddle.net/jqSgq/](http://jsfiddle.net/jqSgq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T04:22:33.520

尝试这个

```
$(function() {
    $('*').hover(
        function() { $(this).css('background-color', getRandom()); }, 
        function() {$(this).css('background-color', '#FFF');}
    );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:15:45.493

```
function changeBackground(color) {
   document.body.style.background = //here apply background colour;
} 
```

`hover`在事件中调用此函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T04:19:25.743

这是一个工作示例：http: [//jsfiddle.net/FwKqq/4/](http://jsfiddle.net/FwKqq/4/)

您需要在呼叫开始和结束时设置背景颜色，如下所示：

```
$("*").hover(
    function(event) {
        $(this).css('background-color', getRandomColor());
    },
    function (event) {
       $(this).css('background-color', 'white');
    }
 ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T04:22:06.790

[带有工作示例](http://jsfiddle.net/RFEXP/1/)的纯跨浏览器 Javascript ：

```
var bgColor;
var els = document.getElementsByTagName('*');
for (var i = 0; i < els.length; i++) {
    if (document.addEventListener) {
        els[i].addEventListener('mouseover', function (e) {
            e.stopPropagation();
            bgColor = '#' + Math.floor(Math.random() * 16777215).toString(16);
            this.style.backgroundColor = bgColor;
        }, false);
        els[i].addEventListener('mouseout', function (e) {
            e.stopPropagation();
            bgColor = '#FFFFFF';
            this.style.backgroundColor = bgColor;
        }, false);
    } else {
        els[i].attachEvent('mouseover', function () {
            e.stopPropagation();
            bgColor = '#' + Math.floor(Math.random() * 16777215).toString(16);
            this.style.backgroundColor = bgColor;
        });
        els[i].attachEvent('mouseout', function () {
            e.stopPropagation();
            bgColor = '#FFFFFF';
            this.style.backgroundColor = bgColor;
        });
    }
} 
```

来自这里的随机背景代码：http: [//paulirish.com/2009/random-hex-color-code-snippets/](http://paulirish.com/2009/random-hex-color-code-snippets/)

# java - 使用高级编程语言的简化 MIPS CPU

> ID：16116480
> 
> 赞同：0
> 
> 时间：2013-04-20T04:11:51.187
> 
> 标签：java, oop, mips, simulation, eventqueue

我正在尝试使用高级编程语言（最好是 Java）为简化的 MIPS CPU 设计分析器/模拟器。所考虑的 MIPS CPU 采用 CDC 6600 记分板方案来动态调度指令调度并使用缓存进行加载和存储指令以进行缓存命中和缓存未命中。我需要一些关于这个模拟的启动建议。

我应该为这个模拟使用事件队列吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:28:20.083

可以通过一次执行一条指令来模拟一个简单的 RISC 处理器。即使对于流水线 CPU 也是如此。

由于您想要对同时运行多条指令的[超标量处理器进行建模，因此](http://en.wikipedia.org/wiki/Superscalar)[基于事件的](http://en.wikipedia.org/wiki/Discrete_event_simulation)模拟器将是正确建模哪条指令何时完成以及运行中指令如何竞争处理器资源的最佳方法。

# wpf - 在 WPF 中读取带有纹理的 .obj 文件

> ID：16116481
> 
> 赞同：4
> 
> 时间：2013-04-20T04:12:00.237
> 
> 标签：wpf, helix-3d-toolkit, helix

我正在尝试`.obj`使用 helix 工具包代码加载文件。但我没有得到包含该`.obj`文件的纹理。

```
ObjReader studioreader = new ObjReader();

        Model3D m3d = studioreader.Read("Model/2 seat sofa .obj");

        Transform3DGroup transform = new Transform3DGroup();
        RotateTransform3D rotateTrans = new RotateTransform3D();
        rotateTrans.Rotation = new AxisAngleRotation3D(new Vector3D(1, 0, 0), 0);
        transform.Children.Add(rotateTrans);
        rotateTrans.Rotation = new AxisAngleRotation3D(new Vector3D(0, 0, 1), 0);
        transform.Children.Add(rotateTrans);
        TranslateTransform3D translateTrans = new TranslateTransform3D(0, 20, 0);

        transform.Children.Add(rotateTrans);
        transform.Children.Add(translateTrans);
        m3d.Transform = transform;
        group.Children.Add(m3d); 
```

我正在使用此代码加载`.obj`文件。我得到了一个物体的模具，但我应该怎么做才能加载纹理

# node.js - 使用d3.js、mongoose、mongoDB，正确表达

> ID：16116483
> 
> 赞同：1
> 
> 时间：2013-04-20T04:12:17.997
> 
> 标签：node.js, mongodb, express, d3.js, mongoose

我对 node.js 真的很陌生，我已经阅读了很多关于 node.js、mongoose、mongoDB、Express 等的教程和文档，但我觉得我仍然没有得到任何东西。

我想创建一个网站，通过查询 mongoDB 生成数据，然后将结果返回到浏览器，在 d3.js 中将其可视化。

我目前在 d3 中有一个图表，作为我的翡翠文件头部调用的单独 JS 文件 (jdriver.js)。我的 jdriver.js 文件非常独立，因为它生成所有按钮、过滤器、滑块等）。但是我不确定我该怎么做，比如如果我想应用过滤器 -> 查询 mongodb -> 让 mongodb 返回一个 JSON 数据文件 -> 用新数据重绘。

然后如何在 Express 提供的框架内适应所有这些？有人会向我指出一些来源或帮助我吗？

非常感谢。

# php - 仅在元素彼此相邻时删除数组中的元素

> ID：16116493
> 
> 赞同：1
> 
> 时间：2013-04-20T04:14:27.907
> 
> 标签：php, arrays

我有一个数组，它由如下所示的信息组成：

```
['Jay', 'Jay', 'Jay', 'Spiders', 'Dogs', 'Cats', 'John', 'John', 'John', 'Dogs', 'Cows', 'Snakes'] 
```

我要做的是删除重复的条目，但前提是它们彼此相邻。

正确的结果应如下所示：

```
['Jay', 'Spiders', 'Dogs', 'Cats', 'John', 'Dogs', 'Cows', 'Snakes'] 
```

我正在使用 PHP，但任何类型的逻辑都可以帮助我解决这个问题。

这是我到目前为止尝试过的一些代码：

```
$clean_pull = array();
$counter = 0;
$prev_value = NULL;

foreach($pull_list as $value) {
    if ($counter == 0) {
        $prev_value = $value;
        $clean_pull[] = $value;
    }
    else {
        if ($value != $pre_value) {
            $pre_value = value;
        }
    }
    echo $value . '<br>';
} 
```

弗朗西斯，当我运行以下代码时：

```
$lastval = end($pull_list);
for ($i=count($pull_list)-2; $i >= 0; $i--){
    $thisval = $pull_list[$i];
    if ($thisval===$lastval) {
        unset($pull_list[$i]);
    }
    $lastval = $thisval;
}
# optional: reindex the array:
array_splice($pull_list, 0, 0);

var_export($pull_list); 
```

，我得到这些结果：

```
array ( 0 => 'NJ Lefler', 1 => 'Deadpool', 2 => 'NJ Lefler', 3 => 'Captain Universe: The Hero Who Could Be You', 4 => 'NJ Lefler', 5 => 'The Movement', 6 => 'NJ Lefler', 7 => 'The Dream Merchant', 8 => 'Nolan Lefler', 9 => 'Deadpool', 10 => 'Nolan Lefler', 11 => 'Captain Universe: The Hero Who Could Be You', 12 => 'Nolan Lefler', 13 => 'The Movement', 14 => 'Tom Smith', 15 => 'Deadpool', 16 => 'Tom Smith', 17 => 'Captain Universe: The Hero Who Could Be You', ) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T04:26:49.843

您的方法（`$prev_value`变量）应该可以正常工作，并且您不需要计数器。

你的使用`$counter`就是你的代码不起作用的原因——`if`语句的前半部分总是被执行，因为`$counter`它从不递增；后半部分只是比较值。您唯一需要做的就是将当前值与前一个值进行比较，并仅在当前值不同时才包含当前值（或仅在相同时将其删除）。

如果您使用功能缩减，则更容易看到此算法。这是一个使用示例[`array_reduce`](http://php.net/manual/en/function.array-reduce.php)：

```
$a = array('Jay', 'Jay', 'Jay', 'Spiders', 'Dogs', 'Cats', 'John', 'John', 'John', 'Dogs', 'Cows', 'Snakes');

$na = array_reduce($a, function($acc, $item){
    if (end($acc)!==$item) {
        $acc[] = $item;
    }
    return $acc;
}, array());

var_export($na); 
```

请注意`var_export($a)`（您的原始数组）和`var_export($na)`（代码产生的结果）的比较：

```
$a = array (            $na = array (    
  0 => 'Jay',             0 => 'Jay',    
  1 => 'Jay',             1 => 'Spiders',
  2 => 'Jay',             2 => 'Dogs',   
  3 => 'Spiders',         3 => 'Cats',   
  4 => 'Dogs',            4 => 'John',   
  5 => 'Cats',            5 => 'Dogs',   
  6 => 'John',            6 => 'Cows',   
  7 => 'John',            7 => 'Snakes', 
  8 => 'John',          )                
  9 => 'Dogs',
  10 => 'Cows',
  11 => 'Snakes',
) 
```

该`array_reduce()`方法的作用与以下代码完全相同：

```
$na = array();
foreach ($a as $item) {
    if (end($na)!==$item) {
        $na[] = $item;
    }
} 
```

除了返回数组的*副本，您还可以使用相同的算法**就地*修改数组，但从数组的*末尾*开始：

```
$lastval = end($a);
for ($i=count($a)-2; $i >= 0; $i--){
    $thisval = $a[$i];
    if ($thisval===$lastval) {
        unset($a[$i]);
    }
    $lastval = $thisval;
}
# optional: reindex the array:
array_splice($a, 0, 0);

var_export($a); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T04:26:24.683

跟踪数组中的最后一个元素，如果刚刚添加，则跳过将下一个元素添加到新数组中。

或者，您可以只检查数组中的最后一个元素，看看它是否不是数组中的当前元素：

```
$array = ['Jay', 'Jay', 'Jay', 'Spiders', 'Dogs', 'Cats', 'John', 'John', 'John', 'Dogs', 'Cows', 'Snakes'];
$new = array( array_shift( $array));
foreach( $array as $el) {
    if( !($new[count($new) - 1] === $el)) {
        $new[] = $el;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T04:26:41.153

假设数组不是太大以至于有第二个会导致问题，那么您描述的方法[应该可以工作](http://codepad.viper-7.com/LMhuuu)。它看起来像这样吗？

```
$last = null;
$result = [];

foreach($arr as $item)
    if($item !== $last)
        $result[] = $last = $item; 
```

* * *

回复：编辑：

*   `$pre_value``$prev_value`不是一回事
*   `$counter`不变

看起来您试图以某种方式将反方法和“最后”方法结合起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T04:19:45.133

定义一个全局变量`glob`。传递数组： `if (array[i] == glob) then remove array[i]` `else glob = array[i]; keep array[i];`

# android - 如何在 WishProductDetails.java 中显示点击的产品信息

> ID：16116503
> 
> 赞同：2
> 
> 时间：2013-04-20T04:17:06.000
> 
> 标签：android, android-listview

**比如：我们在购物车应用程序中看到，当用户选择了一些项目并且在最后阶段他/她想要更改项目的数量时，我们允许用户在列表视图中点击项目来更新项目的数量，并且一旦用户在列表视图中点击项目，我们就会向他/她显示已被点击的项目的现有详细信息......以同样的方式，我希望允许用户点击项目并希望向他显示现有的详细信息他的项目....只想在 WishProductDetails.java 中显示用户已点击的现有产品信息**

*我仍然能够显示 WishProductDetails.java 但无法在 Activity 中显示 Tapped Item Details ..*

我正在使用下面的代码在 WishProductDetails.java 中显示现有的项目详细信息，我使用列表视图项目行在购物车活动中单击了这些详细信息...

```
 HashMap<String, String> item = Constant.wishProducts.get(position);
        Log.d("CartAdapter", "onClick :: " + item);
        Intent myIntent = new Intent 
        (activity, WishProductDetails.class);
        Log.d("CartAdapter", "Intent :: " + myIntent);
        myIntent.putExtra("Item", item);
        activity.startActivity(myIntent); 
```

与将商品添加到购物车并接受商品数量相关的工作，我正在做的所有此类工作*WishProductDetails.java*

**现在，我希望每当用户单击任何 ListView 项目行时，我都需要在 WishProductDetails.java 活动中显示该特定项目以及现有详细信息。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T04:20:59.787

我猜您正在使用 ImageButton 从购物车中删除商品，我从未从事过此类项目，但我正在写我的想法，例如：

```
 mImgBtnDelete = (ImageButton) vi
            .findViewById(R.id.mImgBtnDelete);
    mImgBtnDelete.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Constant.wishproducts.remove(position);
            notifyDataSetChanged();
} 
```

**编辑#2**

```
Code to Update an Item using on ListView Item Row 
```

我认为在您的 Adapter 类中，您应该添加类似下面的代码，以在单击项目行时更新项目的数量，但坦率地说，我不知道如何在 WishProductDetail.java 中打开该特定项目（您允许用户输入数量）

```
 public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View vi = convertView;
    if (convertView == null)
        vi = inflater.inflate(R.layout.cart, null);
        vi.setClickable(true);
        vi.setFocusable(true);
        vi.setOnClickListener(new OnClickListener() {

  @Override
        public void onClick(View v) 
        {
            HashMap<String, String> prod = Constant.wishproducts.get(position);
        Intent mViewCartIntent = new Intent
                (activity,ProductInformationActivity.class);             
        mViewCartIntent.putExtra("product", prod);
        activity.startActivity(mViewCartIntent);           
        }
    }); 
```

# android - 无法通过 socialauth-android-2.1.jar 获取推特好友列表

> ID：16116508
> 
> 赞同：0
> 
> 时间：2013-04-20T04:17:56.070
> 
> 标签：android

我已经下载并替换了 socialauth-android-2.1.jar 当点击好友按钮时，无法获取推特好友列表。它抛出错误。

```
I got below error.
04-16 10:17:05.695: I/TwitterImpl(14690): Fetching contacts from http://api.twitter.com/1/friends/ids.json?screen_name=sgm_friends&cursor=-1
04-16 10:17:05.700: D/SocialAuthAdapter(14690): Contact list not Received
04-16 10:17:05.700: W/System.err(14690): org.brickred.socialauth.exception.SocialAuthException: Failed to retrieve the contacts from http://api.twitter.com/1/friends/ids.json?screen_name=sgm_friends&cursor=-1
04-16 10:17:05.700: W/System.err(14690):    at org.brickred.socialauth.provider.TwitterImpl.getContactList(TwitterImpl.java:287)
04-16 10:17:05.705: W/System.err(14690):    at org.brickred.socialauth.android.SocialAuthAdapter.getContactList(SocialAuthAdapter.java:688)
04-16 10:17:05.705: W/System.err(14690):    at org.brickred.customui.CustomUI.Events(CustomUI.java:199)
04-16 10:17:05.705: W/System.err(14690):    at org.brickred.customui.CustomUI$ResponseListener$1.onClick(CustomUI.java:137)
04-16 10:17:05.705: W/System.err(14690):    at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:934)
04-16 10:17:05.705: W/System.err(14690):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
04-16 10:17:05.705: W/System.err(14690):    at android.widget.AbsListView.performItemClick(AbsListView.java:1283)
04-16 10:17:05.705: W/System.err(14690):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:3074)
04-16 10:17:05.705: W/System.err(14690):    at android.widget.AbsListView$1.run(AbsListView.java:4147)
04-16 10:17:05.705: W/System.err(14690):    at android.os.Handler.handleCallback(Handler.java:615)
04-16 10:17:05.705: W/System.err(14690):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-16 10:17:05.705: W/System.err(14690):    at android.os.Looper.loop(Looper.java:137)
04-16 10:17:05.705: W/System.err(14690):    at android.app.ActivityThread.main(ActivityThread.java:4898)
04-16 10:17:05.705: W/System.err(14690):    at java.lang.reflect.Method.invokeNative(Native Method)
04-16 10:17:05.710: W/System.err(14690):    at java.lang.reflect.Method.invoke(Method.java:511)
04-16 10:17:05.710: W/System.err(14690):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
04-16 10:17:05.710: W/System.err(14690):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
04-16 10:17:05.710: W/System.err(14690):    at dalvik.system.NativeStart.main(Native Method)
04-16 10:17:05.710: W/System.err(14690): Caused by: org.brickred.socialauth.exception.SocialAuthException: android.os.NetworkOnMainThreadException
04-16 10:17:05.710: W/System.err(14690):    at org.brickred.socialauth.util.HttpUtil.doHttpRequest(HttpUtil.java:154)
04-16 10:17:05.710: W/System.err(14690):    at org.brickred.socialauth.util.OAuthConsumer.send(OAuthConsumer.java:406)
04-16 10:17:05.710: W/System.err(14690):    at org.brickred.socialauth.util.OAuthConsumer.httpGet(OAuthConsumer.java:280)
04-16 10:17:05.710: W/System.err(14690):    at org.brickred.socialauth.oauthstrategy.OAuth1.executeFeed(OAuth1.java:121)
04-16 10:17:05.710: W/System.err(14690):    at org.brickred.socialauth.provider.TwitterImpl.getContactList(TwitterImpl.java:285)
04-16 10:17:05.710: W/System.err(14690):    ... 17 more
04-16 10:17:05.710: W/System.err(14690): Caused by: android.os.NetworkOnMainThreadException
04-16 10:17:05.715: W/System.err(14690):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
04-16 10:17:05.715: W/System.err(14690):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
04-16 10:17:05.715: W/System.err(14690):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
04-16 10:17:05.715: W/System.err(14690):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
04-16 10:17:05.715: W/System.err(14690):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
04-16 10:17:05.715: W/System.err(14690):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
04-16 10:17:05.715: W/System.err(14690):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
04-16 10:17:05.715: W/System.err(14690):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
04-16 10:17:05.715: W/System.err(14690):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
04-16 10:17:05.715: W/System.err(14690):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
04-16 10:17:05.715: W/System.err(14690):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
04-16 10:17:05.715: W/System.err(14690):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
04-16 10:17:05.720: W/System.err(14690):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
04-16 10:17:05.720: W/System.err(14690):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
04-16 10:17:05.720: W/System.err(14690):    at org.brickred.socialauth.util.HttpUtil.doHttpRequest(HttpUtil.java:152)
04-16 10:17:05.720: W/System.err(14690):    ... 21 more 
```

我在 5 天前在这里发帖。但没有回应。 [https://code.google.com/p/socialauth-android/issues/detail?can=2&q=53&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&id=53](https://code.google.com/p/socialauth-android/issues/detail?can=2&q=53&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&id=53)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T05:21:39.203

社交身份验证人员在这里回答了问题[https://code.google.com/p/socialauth-android/issues/detail?can=2&q=53&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&id=53](https://code.google.com/p/socialauth-android/issues/detail?can=2&q=53&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&id=53)。

它们已针对异步请求进行了更改。我使用了较旧的实现，现在问题已解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:34:19.503

`ScreeName`这可能会帮助您从`Provide` 喜欢中看到您的需要

```
HttpParameters params1 = mProvider.getResponseParameters();
String ScreeName = params1.getFirst("screen_name"); 
```

然后需要将此 ScreenName 传递给

```
https://api.twitter.com/1/friends/ids.json?cursor=-1&screen_name="+ScreeName 
```

Here需要调用这个API`AsyncTask`然后`Response`你到达那里是`JsonArray`的

```
Ids 
```

你的好友ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:05:40.040

您还可以使用以下方式获取关注者和关注列表`jtwitter.jar`

```
 List<User> followers= twitter.getFollowers();
            for(int i=0;i<followers.size();i++)
            {
                User follower=followers.get(i);
                String name=follower.getName();
                Log.i("follower", name);
            }
            List<User> following = twitter.getFriends();
            for(int i=0;i<following.size();i++)
            {
                User user=following.get(i);
                String name=user.getName();
                Log.i("following", name);
            } 
```

# java - 当拖动超出列表末尾时，如何防止 JList 选择元素？

> ID：16116517
> 
> 赞同：2
> 
> 时间：2013-04-20T04:19:38.237
> 
> 标签：java, swing, mouseevent, jlist, mouselistener

[此处](https://stackoverflow.com/questions/11138665/how-to-prevent-jlist-from-making-selection-outside-cell-bounds)提出了一个非常相似的问题，虽然我承认这一点，但问题的解决方案并不能完全解决我的问题。A `JList`，当单击时，将选择最接近鼠标单击的索引列表项。A`JList`也将为每次单击+拖动事件触发执行此操作。

**`JList`当单击+拖动位置在可见列表之外时，我想阻止我在单击+拖动事件期间选择项目。我该怎么办？**

我曾考虑覆盖另一种方法，该方法涉及选择列表项的单击+拖动事件。我想试试这个`setSelectionInterval()`方法。

```
JList<String list = new JList<String>(){
        private static final long serialVersionUID = 1L;
        @Override
        public int locationToIndex(Point location) {
            int index = super.locationToIndex(location);
            if (index != -1 && !getCellBounds(index, index).contains(location)) {
                clearSelection();
                return -1;
                //an excellent click-only solution to prohibit the selecting of 
                //items from beyond the visible list
            }
            else {
                return index;
            }
        }
        @Override
        public void setSelectionInterval(int anchor, int lead) {
            super.setSelectionInterval(anchor, lead);
            System.out.println("setSelectionInterval");
        }           
    }; 
```

我发现每次单击+拖动显示的任意位置时`JList`，都会收到我添加到上述方法中的 System.out 消息“setSelectionInterval”。就覆盖方法而言，我不知道从哪里开始。也许这不是我应该处理的方式。在源代码中，`setSelectionInterval()`我迷路了，试图找到任何涉及的侦听器的方法，所以我来到了这里。:p

我非常感谢任何指向我应该寻找的地方或完全解决方案的指针。提前致谢！

这是一个与我的设置方式接近的 SSCCE 示例。实际上，当从列表项本身触发仅单击事件时，列表不会选择项目。当单击+拖动事件从列表项中触发时，我希望发生同样的效果。

```
import java.awt.BorderLayout;
import java.awt.Point;

import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;

public class TestMain {

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        JPanel content = new JPanel(new BorderLayout());

        String[] data = {"Luke", "Jeff", "Bryce"};
        JList<String> list = new JList<String>(data){
            private static final long serialVersionUID = 1L;

            @Override
            public int locationToIndex(Point location) {
                System.out.println("location to index");
                int index = super.locationToIndex(location);
                if (index != -1 && !getCellBounds(index, index).contains(location)) {
                    clearSelection();
                    return -1;
                }
                else {
                    return index;
                }
            }
        }

        content.add(list, BorderLayout.CENTER);
        frame.setContentPane(content);
        frame.setSize(200,200);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-29T12:53:46.273

如果禁用整个拖动功能是可以接受的，那么以下应该会有所帮助：

```
@Override
protected void processMouseMotionEvent(MouseEvent e) {
    if(MouseEvent.MOUSE_DRAGGED != e.getID()) {
        super.processMouseMotionEvent(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T05:07:26.647

> 当单击+拖动位置在可见列表之外时，我想防止我的 JList 在单击+拖动事件期间选择项目。

不确定我是否理解要求。让我们从选择的第一行开始。

如果单击第一行，然后继续拖动到第二行，则第二行将突出显示。继续拖动，第三行将突出显示。继续拖过第三行，你想发生什么？

您是说您希望选择第一行，因为那是您开始的地方？如果这是您要问的，那么您需要查看 BasicListUI。这是将鼠标侦听器添加到 JList 的位置。您将需要以某种方式处理 mousePressed 事件以保存当前选定的行。然后，当您开始拖到最后一行之外时，您将需要以某种方式覆盖 mouseDragged 代码的默认行为以重置所选行。

我不知道该怎么做。

> 我收到了我添加到上述方法中的“setSelectionInterval”的 System.out 消息

试图覆盖该方法中的代码为时已晚。当您拖动鼠标时，选择将继续更新。您不知道是否正在调用此方法，因为鼠标确实位于最后一行或超过最后一行，因为您无权访问鼠标点。

我想您可以尝试使用 MouseInfo 类来确定调用此方法时鼠标的位置，但不知何故，您仍然需要知道拖动最初是在选择第一行时开始的。我也不知道该怎么做。

# ios - 如何获取 iPhone 上键盘的大小？

> ID：16116523
> 
> 赞同：3
> 
> 时间：2013-04-20T04:20:47.310
> 
> 标签：ios, objective-c

我想在*不*使用`NSNotification`. 当我按下加号按钮时，它可以用这样的自定义替换键盘`UIView`：

![图片1](https://i.stack.imgur.com/vGUbx.jpg)

然后按下加号按钮并加载视图：

![图2](https://i.stack.imgur.com/hRH9y.jpg)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T05:43:26.483

我已经犯了你想在这里做的同样的菜鸟错误。问题是你会写很多，只是为了意识到你不想避免 iOS 团队为你提供的标准流程。例如，您肯定会在处理这样的问题时遇到麻烦（还有一个附加栏，它是中文语言环境标准键盘的一部分）：

![在此处输入图像描述](https://i.stack.imgur.com/n8Hkq.png)

我通过使用[DAKeyboardControl 项目](https://github.com/danielamitay/DAKeyboardControl)中其他人的工作解决了这个问题。您不需要将观察者（或者如果您使用 DAKeyboardControl - 块）直接连接到带有按钮的栏，而是连接到您的控制器并检查用户正在尝试做什么并相应地为该栏设置动画。在源代码中，您可以看到如何获取键盘的动画持续时间和计时功能。听起来可能比实际上更复杂，试一试。

# django - 为什么在 django 中不再推荐使用永久链接装饰器？

> ID：16116526
> 
> 赞同：5
> 
> 时间：2013-04-20T04:21:15.250
> 
> 标签：django, django-models, decorator, permalinks

我正在阅读 django 开发文档。[这里](https://docs.djangoproject.com/en/dev/ref/models/instances/#the-permalink-decorator)它说不再推荐使用永久链接装饰器，在你的`get_absolute_url`方法中使用 reverse 为模型实例生成完整的 url（向上滚动一点并查看警告框）。

我认为每次需要时都必须使用 reverse 是违反 DRY 的。那么使用永久链接有什么问题呢？为什么不再推荐？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-20T04:35:32.783

在当前版本的 django 中，装饰器按字面意思调用`reverse`文档推荐的函数。原因似乎是现在我们已经不需要装饰器了`reverse()`。Using`reverse`看起来确实比返回名称、元组和字典更好。相反，您使用 args 和 kwargs - 惯用的 python。

这是讨论为了 API 纯度而弃用装饰器[的票。](https://code.djangoproject.com/ticket/18974)他们没有提出警告并让用户更新代码库，而是决定在文档中简单地放置警告。

> 永久链接装饰器应该被弃用并最终被删除。引入它是为了解决必须将 url 硬编码到 get_absolute_url 中的问题。然而，它违反了优秀装饰器的主要规则之一，即强制函数签名更改以处理它已被装饰的事实。此外，与直接在 get_absolute_url 的主体中使用 reverse() 相比，它没有提供任何有用的功能。

# actionscript-3 - AS3 包不反映位置

> ID：16116527
> 
> 赞同：0
> 
> 时间：2013-04-20T04:21:18.517
> 
> 标签：actionscript-3

我有一个引用 'com.poole.blackjack.game' 的 fla 类，以及一个从 'com\poole\blackjack\game' 的 fla 根目录开始的文件夹路径。

当我编译时，我得到：'C:\Users\Stephen\Desktop\Blackjack\com\poole\blackjack\Game\Player.as, Line 1 5001: The name of package 'com.poole.blackjack.game' does not反映这个文件的位置。请更改此文件中的包定义名称，或移动该文件。C:\Users\Stephen\Desktop\Blackjack\com\poole\blackjack\Game\Player.as'

我尝试将引用和文件夹名称更改为“游戏”，但得到：“C:\Users\Stephen\Desktop\Blackjack\com\poole\blackjack\game\Player.as, Line 1 5001: The name of package 'com .poole.blackjack.Game' 不反映此文件的位置。请更改此文件中的包定义名称，或移动该文件。C:\Users\Stephen\Desktop\Blackjack\com\poole\blackjack\game\Player.as'

就像 flash 错误地解释了文件路径，尽管它一直工作到现在。很烦人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:16:36.073

您的包裹似乎使用的是“游戏” - 小写 g

错误消息中的路径是“游戏”-大写 G

我会验证您的文件夹结构案例是否与包裹案例匹配。

你的错误：

`When I compile, I get: 'C:\Users\Stephen\Desktop\Blackjack\com\poole\blackjack\Game\Player.as`

你的包裹：

`'com.poole.blackjack.game'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T10:40:24.163

比帖子晚得多，但我们遇到了类似的问题。似乎构建系统/IDE存在一个错误，如果您有一个同名的文件和目录，事情可能会混淆。在我们的例子中，在同一个目录中，我们有一个名为 Util 的类和一个名为 util 的目录，但它没有编译并出现相同的错误。我们的修复是将 Util 类更改为不同的名称。

# geolocation - 使用谷歌纵横的诺基亚 HERE 地图

> ID：16116529
> 
> 赞同：0
> 
> 时间：2013-04-20T04:21:22.047
> 
> 标签：geolocation, kml, here-api

我正在尝试解析并将我的谷歌纬度 KML 标记添加到诺基亚 HERE 地图中。它只能在我的 IE 9 笔记本电脑上本地工作，但不会在 Safari 5.7、Chrome 27（本地或我的 Web 服务器上）中添加标记。有任何想法吗？

```
kml.parseKML("http://latitude.google.com/latitude/apps/badge/api?user=-1099057214648547758&type=kml"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:46:14.820

如果 KML 在某些浏览器上加载成功，而在其他浏览器上加载不成功，那么这几乎可以肯定是由于有问题的浏览器试图阻止跨脚本域攻击。

你有**三个**选择

*   将 KML 文件托管在与读取文件的 JavaScript 相同的域中 - 例如，如果您拥有`example.com`，则 JavaScript 应托管在`example.com`其中，而 KML 应托管在`example.com`

*   设置 KML 解析器以检索文件`example.com` 并使用代理解决方案（例如此[php 示例](http://benalman.com/projects/php-simple-proxy/)）真正从其他地方检索文件

*   在托管 KML 文件的服务器上启用**CORS ，并使用 AJAX 加载 KML，然后使用本**[示例](http://heremaps.github.io/examples/explorer.html#load-kml-file-cross-domain)`parse()`中所示的方法

如果 KML**从未**成功加载，您应该检查文件是否[有效](http://feedvalidator.org/check.cgi)，以及显示地图的 HTML 在语法上是否正确。

# haskell - 找不到模块，它是隐藏包 haskell98 的成员

> ID：16116530
> 
> 赞同：21
> 
> 时间：2013-04-20T04:21:25.523
> 
> 标签：haskell, import, hidden

当我尝试使用 or 编译一个简单的源文件时`import IO`，`import Random`构建失败并显示如下错误消息：

```
Could not find module 'IO'
It is a member of the hidden package 'haskell98-2.0.0.1'
Use -v to see a list of the files searched for 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-20T04:25:48.987

模块名称在某些时候发生了变化。你可能想要`import System.IO`，`import System.Random`而不是。

这是GHC 7.6.1 中标准库的[模块层次结构。](http://www.haskell.org/ghc/docs/7.6.1/html/libraries/index.html)

# c# - Windows 应用程序中的 Dwolla oauth 访问令牌

> ID：16116531
> 
> 赞同：0
> 
> 时间：2013-04-20T04:21:28.190
> 
> 标签：c#, microsoft-metro, oauth-2.0, dwolla

我正在创建一个 Windows 8 Metro 应用程序，但在获取 oauth2 访问令牌时遇到了问题。我可以用这段代码得到临时代码就好了：

```
Uri requestUri = new Uri(string.Format(AUTH_URL + "?client_id={0}&response_type=code&scope={1}&client_secret={2}&redirect_uri={3}", CLIENT_ID, string.Join("|", scopeList.ToArray()), CLIENT_SECRET, WebAuthenticationBroker.GetCurrentApplicationCallbackUri().AbsoluteUri));
        WebAuthenticationResult result = await WebAuthenticationBroker.AuthenticateAsync(WebAuthenticationOptions.None, requestUri); 
```

但是当我尝试使用该代码获取永久访问令牌时，它要么给我一个内部服务器错误 (500) 要么超时。当我没有redirect_uri 时，它给了我一个500，所以我把它保留了。否则我的请求只是超时而没有响应此代码：

```
private const string TOKEN_URL = "https://www.dwolla.com/oauth/v2/token";
Uri requestUri = new Uri(string.Format(TOKEN_URL + "?client_id={0}&client_secret={1}&grant_type={2}&code={3}&redirect_uri={4}", CLIENT_ID, CLIENT_SECRET, GRANT_TYPE, code, WebAuthenticationBroker.GetCurrentApplicationCallbackUri().AbsoluteUri)));
        WebAuthenticationResult result = await WebAuthenticationBroker.AuthenticateAsync(WebAuthenticationOptions.SilentMode, requestUri); 
```

我所有的字符串都被 uri 转义了。我只是不知道我做错了什么。

使用除了 WebAuthenticationOptions.SilentMode 选项之外的任何东西只会显示一个加载浏览器窗口

我也不能使用为 C# 制作的 OAuth 库，因为它们使用 .NetFramework 而 Windows 8 应用程序使用 .NetCore，这是一个精简的版本。

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:48:54.720

`requestUri`临时代码和重定向永久访问令牌之间的外观不同。它必须是完全相同的东西。

# browser - 利用浏览器捕获 google plus 按钮和分析 (2)

> ID：16116534
> 
> 赞同：2
> 
> 时间：2013-04-20T04:22:38.620
> 
> 标签：browser, web, try-catch, browser-cache, pagespeed

这是我放在我的 htaccess 文件中的代码，但它不起作用。也许我错过了什么？或做错了什么？如果可以的话，请帮忙。

```
ExpiresActive On
ExpiresByType image/jpg "access plus 1 month"
ExpiresByType image/jpeg "access plus 1 month"
ExpiresByType image/gif "access plus 1 month"
ExpiresByType image/png "access plus 1 month"
ExpiresByType text/css "access plus 1 month"
ExpiresByType application/pdf "access plus 1 month"
ExpiresByType text/x-javascript "access plus 1 month"
ExpiresByType application/x-shockwave-flash "access plus 1 month"
ExpiresByType image/x-icon "access plus 1 year"
ExpiresDefault "access plus 1 week" 
```

但是，在我的网站上添加谷歌加一按钮并添加谷歌分析后，我在 gtmetrix.com 上得到了这两个建议

以下可缓存资源具有较短的新鲜生命周期。为以下资源指定至少一周后的到期时间：

[https://apis.google.com/js/plusone.js（30](https://apis.google.com/js/plusone.js)分钟） [http://www.google-analytics.com/ga.js（12](http://www.google-analytics.com/ga.js)小时）

我如何在 htaccess 中编写代码以利用浏览器捕获这些 2。利用浏览器捕获进行谷歌分析是一个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T08:08:19.093

无法通过修改服务器的设置来控制这两个资源**的过期时间。**过期标头必须由源服务器设置（因此只有 Google 可以这样做）

# mysql - MySQL 读取关系代数？

> ID：16116539
> 
> 赞同：0
> 
> 时间：2013-04-20T04:22:57.937
> 
> 标签：mysql, relational-algebra

我试图让 MySQL 接受关系代数输入，但它不会接受投影等符号。

例如

```
Πstarter, ender, pointsStarter, pointsEnder, debatedate (contest) 
```

我收到不接受投影的错误。

我有

```
(Πstarter, ender, pointsStarter, pointsEnder, debatedate(σpointsStarter>=pointsEnder(Contest))) |> 
```

Contest.starter=Debater.name (σclub='Plato'(Debater))

MySQL不会接受它，想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:28:55.530

有效的 MySQL 输入是[SQL](http://dev.mysql.com/doc/refman/5.6/en/sql-syntax.html)查询的形式，而不是关系代数表达式。虽然，如果确实如此，那将非常有趣。

编辑：[RA](http://www.cs.duke.edu/~junyang/ra/)一个将关系代数转换为 SQL 查询的 Java 软件，如果你想走这条路的话。

# java - 无法将 xml 表中的视图导入 MainActivity.java

> ID：16116540
> 
> 赞同：0
> 
> 时间：2013-04-20T04:23:12.787
> 
> 标签：java, android, xml

我的 XML 表中有一堆视图，需要在 MainActivity.java 文件中进行操作。这是我在 MainActivity.java 文件中尝试执行此操作的方法：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.ProgressBar;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}

 EditText txt_Username = (EditText) findViewById(R.id.txtView_UserName);
 EditText txt_Password = (EditText) findViewById(R.id.txtView_Password);
 Button btn_LogIn = (Button) findViewById(R.id.button_LogIn);
 CheckBox chkbox_RememberMyPassword = (CheckBox) findViewById(R.id.checkbox_RememberPassword);
 CheckBox chkbox_LogMeInAutomatically = (CheckBox) findViewById(R.id.checkbox_LogMeInAutomatically);
 ProgressBar progressbar_LogIn = (ProgressBar) findViewById(R.id.progressBar_LogIn);

} 
```

这不起作用，但是当我去测试这段代码时，甚至没有加载任何视图。我得到一个空白的活动背景，然后它崩溃了。

我是否将变量声明放在正确的位置？我想我在这里很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:47:17.423

尝试：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        EditText txt_Username = (EditText) findViewById(R.id.txtView_UserName);
        EditText txt_Password = (EditText) findViewById(R.id.txtView_Password);
        Button btn_LogIn = (Button) findViewById(R.id.button_LogIn);
        CheckBox chkbox_RememberMyPassword = (CheckBox) findViewById(R.id.checkbox_RememberPassword);
        CheckBox chkbox_LogMeInAutomatically = (CheckBox) findViewById(R.id.checkbox_LogMeInAutomatically);
        ProgressBar progressbar_LogIn = (ProgressBar) findViewById(R.id.progressBar_LogIn);
    }
} 
```

您在方法块之外进行了变量初始化，这意味着它将在您的 Activity 的任何方法之前运行。由于`findViewById()`在当前 inflates 布局中查找 Views，因此您的应用程序会因`NullPointerException`当前没有 inflated 布局而崩溃。`setContentView()`您的布局仅在被调用后才会膨胀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:59:51.017

把这段代码

```
 EditText txt_Username = (EditText) findViewById(R.id.txtView_UserName);
 EditText txt_Password = (EditText) findViewById(R.id.txtView_Password);
 Button btn_LogIn = (Button) findViewById(R.id.button_LogIn);
 CheckBox chkbox_RememberMyPassword = (CheckBox) findViewById(R.id.checkbox_RememberPassword);
 CheckBox chkbox_LogMeInAutomatically = (CheckBox) findViewById(R.id.checkbox_LogMeInAutomatically);
 ProgressBar progressbar_LogIn = (ProgressBar) findViewById(R.id.progressBar_LogIn);`` 
```

里面

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

  //Put the above block of code here

} 
```

在 android app Activity 中处理 UI 。所以在`onCreate`一个 Activity 中你正在设置 UI 布局

```
 setContentView(R.layout.activity_main); 
```

您正在初始化 UI 中的组件

附加内容：如果您是初学者。阅读[此](http://developer.android.com/training/basics/activity-lifecycle/starting.html)内容并[参考](http://manisivapuram.blogspot.in/2011/07/activity-life-cycle-example.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:04:35.790

尝试这个-

```
public class MainActivity extends Activity { 
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
     EditText txt_Username = (EditText) findViewById(R.id.txtView_UserName);
     EditText txt_Password = (EditText) findViewById(R.id.txtView_Password);
     Button btn_LogIn = (Button) findViewById(R.id.button_LogIn);
     CheckBox chkbox_RememberMyPassword = (CheckBox) findViewById(R.id.checkbox_RememberPassword);
     CheckBox chkbox_LogMeInAutomatically = (CheckBox) findViewById(R.id.checkbox_LogMeInAutomatically);
     ProgressBar progressbar_LogIn = (ProgressBar) findViewById(R.id.progressBar_LogIn);

    }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:10:18.603

将所有视图放入 onCreate() 但在 setContentView(R.layout.activity_main) 之后。这意味着在创建应用程序时创建所有视图。

# php - PHP：从非本机数组返回一个值？

> ID：16116547
> 
> 赞同：2
> 
> 时间：2013-04-20T04:25:17.890
> 
> 标签：php, arrays, interop, return

我有一个函数发送查询并接收以下格式的数组：

```
{
    "id1" : 312293.23451244,
    "id2" : 6.03937464,
    "id3" : 1
} 
```

使用 PHP，我如何返回“id1”的值？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:28:24.617

使用 json_decode

```
$str = '{
    "id1" : 312293.23451244,
    "id2" : 6.03937464,
    "id3" : 1
}';

$json = json_decode($str, true);

echo $json['id1']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T04:29:11.890

```
$data = '{
    "id1" : 312293.23451244,
    "id2" : 6.03937464,
    "id3" : 1
}';
$json = json_decode($data, true);
return  $json['id1']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T04:39:51.410

作为对查询的响应的一部分，您收到的上述数据位于

> json

格式

因此，要从 json 内容访问数据，您需要使用 php 库中定义的 json_decode 函数。

**例如**

```
 $result='{
    "id1" : 312293.23451244,
    "id2" : 6.03937464,
    "id3" : 1
 }';

$array=json_decode($result,true);
 echo $array['id1']; 
```

它接受json字符串作为第一个参数，第二个参数指定为true时将返回一个更方便遍历的关联数组。

有关**json_decode**函数的更多详细信息，请参阅以下 url 中提到的文档

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

# c# - 无法从 DataContractSerializer 反序列化列表

> ID：16116552
> 
> 赞同：0
> 
> 时间：2013-04-20T04:26:06.580
> 
> 标签：c#, xml, datacontractserializer

我在 C# 上，我无法从我创建的 XML 文件中反序列化列表，使用 DataContractSerializer，其中包含来自 Entity Framework 的实体列表，我使用的代码是这样的：

```
List<Proveedores> proveedores = ObtenerEntidadesProveedores();

foreach (Proveedores proveedor in proveedores)
{
    proveedor.ProveedoresDomicilios.Load();
}

Type[] tipoColeccion = new Type[1];
tipoColeccion[0] = typeof(Proveedores);

DataContractSerializer serializador = new DataContractSerializer(typeof(List<Proveedores>), tipoColeccion);
serializador.WriteObject(entrada, proveedores);
salida = entrada; 
```

我使用 DataContractSerializer 因为它将所有相关实体从 Proveedores 映射到 XML。

现在的问题是，当我尝试取回它时，我得到一个只有一个元素的 List：

```
List<Proveedores> proveedores = new List<Proveedores>();

Type[] tipoColeccion = new Type[1];
tipoColeccion[0] = typeof(Proveedores);

DataContractSerializer serializador = new DataContractSerializer(typeof(List<Proveedores>), tipoColeccion);
proveedores = serializador.ReadObject(entrada) as List<Proveedores>; 
```

当生成的 XML 有很多这样的时候：

```
<ArrayOfProveedores xmlns="http://schemas.datacontract.org/2004/07/MxPOS10.Sistema.Datos" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <Proveedores z:Id="i1" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/">
        <EntityKey z:Id="i2" xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses" xmlns:a="http://schemas.datacontract.org/2004/07/System.Data">
            <a:EntityContainerName>MxPOSv10r1Entidades</a:EntityContainerName>
                <a:EntityKeyValues>
                    <a:EntityKeyMember>
                        <a:Key>IDProveedor</a:Key>
                        <a:Value i:type="b:int" xmlns:b="http://www.w3.org/2001/XMLSchema">0</a:Value>
                    </a:EntityKeyMember>
                </a:EntityKeyValues>
            <a:EntitySetName>Proveedores</a:EntitySetName>
        </EntityKey>
        <Compras/>
        <Dumb i:nil="true"/>
        <IDProveedor>0</IDProveedor>
        <Nombre>PANADERIAS DEL CENTRO</Nombre>
        <ProveedoresContacto/>
        <ProveedoresDomicilios/>
        <RFC>98982u24ujjjj</RFC>
        <RegistroActivo>false</RegistroActivo>
    </Proveedores>

    <.... more Proveedores ....>

</ArrayOfProveedores> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-12T14:51:12.813

无论您要序列化到什么对象，都可以这样设置。这样做的目的是为您的元素 Proveedore(s) 设置一个 collectiondata 合同

```
 [DataContract(Name = "Proveedore", Namespace = "")]
    public class Proveedores {

    }

    [CollectionDataContract(Name = "ArrayOfProveedores", ItemName = "Proveedore", Namespace = "")]
    public class ProveedoresList : List<Proveedores> {

    }
    public class FileRead{
        [DataMember(Name = "ArrayOfProveedores", Order = 0)]
        public ProveedoresList Pros { get; private set; }
    } 
```

# sql - SQL Server：左连接导致的行数少于左表中的行数

> ID：16116559
> 
> 赞同：17
> 
> 时间：2013-04-20T04:27:15.603
> 
> 标签：sql, sql-server, left-join

我正在使用 SQL Server（我相信是 2005 年）。

我有`TableA`2 列和 439 行（每一行都是唯一的）。

```
+----------+
|ID | Name |
+----------+ 
```

我有`TableB`35 列和数十万行（每行也是唯一的）。

```
+------------------------------------------------------------------------------+
|Date | ID | Name | Blah1 | Blah2 | ... | Hour1 | Hour2 | Hour3 | ... | Hour24 |
+------------------------------------------------------------------------------+ 
```

每一行`TableB`都有每小时的观察和一些其他的家务信息。现在出于测试目的，我只对今天的日期感兴趣，即 2013 年 4 月 19 日。

如果我做：

```
Select count(*) 
from TableB 
where Date = '4/19/2013 12:00:00 AM' 
```

我得到 10526，这是正确的，因为每天有 10526 个不同的位置有每小时的观测数据。

我想 LEFT JOIN TableA 和 TableB `on a.id = b.id`，它应该产生一个有 439 行的结果。

不幸的是，结果有 246 行。怎么会这样？是不是假设无论是否有匹配都`LEFT JOIN`返回所有行？`TableA``TableB`

****编辑****

我使用的完整查询是：

```
select * 
from TableA as a
left join TableB as b on a.id = b.id 
where RealDate = '4/20/2013 12:00:00 AM' 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-20T04:50:36.093

试试这个：

```
select * from TableA as a
left join (SELECT * from TableB where RealDate = '4/20/2013 12:00:00 AM') as b
on a.id = b.id 
```

或这个：

```
select * from TableA as a
left join TableB as b on (a.id = b.id AND RealDate = '4/20/2013 12:00:00 AM') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-22T07:00:27.180

看到其他答案，我的 2 美分（根据问题中的用例：我们要应用 ReadDateFilter 然后加入）：

我们应该尝试遵循以下（我们称之为 query-1）：

`select * from TableA as a left join (SELECT * from TableB where RealDate = '4/20/2013 12:00:00 AM') as b on a.id = b.id`

如果 RealDate 属于表 A ：

`(select * from TableA where RealDate = '4/20/2013 12:00:00 AM') as a left join (SELECT * from TableB ) as b on a.id = b.id`

即应用过滤器然后加入

**不**低于（查询 2）：

`select * from TableA as a left join TableB as b on (a.id = b.id AND RealDate = '4/20/2013 12:00:00 AM')`

原因：如果 RealDate 属于 TableA，则 query-2 实际上会从 TableA 中选择所有行，这是错误的

# android - 将视图传递给 PageFragment

> ID：16116564
> 
> 赞同：0
> 
> 时间：2013-04-20T04:28:31.257
> 
> 标签：android, android-fragments

我可以通过 Bundle/Instance 将字符串值传递给 PageFragment。但是我怎样才能通过视图？

我尝试在 PageFragment 中创建一个公共 LinearLayout，然后`PageFragment.linearlayout.addView(myview);`在 FragmentPagerAdapter 中使用。但它没有用

```
public class PageFragment extends Fragment {  
    public static LinearLayout linearlayout; 

     public static PageFragment newInstance(String title) {

         PageFragment pageFragment = new PageFragment();
         Bundle bundle = new Bundle();
         bundle.putString("title", title);
         pageFragment.setArguments(bundle);
         return pageFragment;
     }

     @Override  
     public void onCreate(Bundle savedInstanceState) {  
         super.onCreate(savedInstanceState);  
     }  

     @Override  
     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {  

         View view = inflater.inflate(R.layout.page_quiz, container, false);  
         tv = (TextView) view.findViewById(R.id.questionText);  
         tv.setText(getArguments().getString("title"));         
         linearlayout= (LinearLayout) view.findViewById(R.id.questionList);

         return view;  
     }
} 
```

片段页面适配器：

```
private static class MyFragmentPagerAdapter extends FragmentPagerAdapter { 
...
@Override  
        public Fragment getItem(int index) { 
    PageFragment.linearlayout.addView(myview); //=> doesnt work
        String mytext = "My Text";          
             return PageFragment.newInstance(index + mytext);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T07:08:37.113

你所尝试的并不是做你想做的事情的正确方法。首先，在`getItem()`适配器的方法中，''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''' `Fragment`）视图的视图尚未构建视图，因此`LinearLayout`将为空。如果您需要在该级别将视图添加到片段的视图，那么您应该直接在`onCreateView()`回调中添加它`Fragment`（仅将填充该视图所需的数据传递给片段）。否则，创建一个方法来访问父级并在完全构建片段**后**`LinearLayout`添加视图。请记住，您需要处理添加的视图以再次显示它，因为片段可能会被您的适配器破坏。

 **另一种方法是从一开始就在片段布局中拥有额外的视图（可见性`GONE`），并且仅在需要时切换其可见性。

不要`LinearLayout`在类中使视图（如您的）静态，因为您可能会造成内存泄漏。**

# perl - Perl：子声明的 arg 列表中的 ;\$ 是什么意思？

> ID：16116572
> 
> 赞同：3
> 
> 时间：2013-04-20T04:29:37.720
> 
> 标签：perl

这是由 s2p 生成的程序的一部分，该程序构建执行特定`sed`命令的 perl 脚本。

```
# getsARGV: Read another input line into argument (default: $_).
#           Move on to next input file, and reset EOF flag $isEOF.
sub getsARGV(;\$){
    my $argref = @_ ? shift() : \$_;
    while( $isEOF || ! defined( $$argref = <ARG> ) ){
        close( ARG );
        return 0 unless @ARGV;
        my $file = shift( @ARGV );
        open( ARG, "<$file" )
        || die( "$0: can't open $file for reading ($!)\n" );
        $isEOF = 0;
    }
    1;
} 
```

我在 perlsub 上找不到任何解释这个子签名的东西。

该代码也确实工作得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T04:46:29.817

这是一个[原型](http://perldoc.perl.org/perlsub.html#Prototypes)。该特定原型强制解析器仅接受用法

```
getsARGV() 
```

和

```
getsARGV($SCALAR) 
```

并导致它们被编译为

```
&getsARGV() 
```

和

```
&getsARGV(\$SCALAR) 
```

# android - Google Maps android API v2 打开后立即崩溃

> ID：16116573
> 
> 赞同：0
> 
> 时间：2013-04-20T04:29:40.213
> 
> 标签：android, google-maps, fragment

我正在尝试使用 google maps API v2 for android 并且我完全按照这些说明进行操作

[https://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

一切正常，直到我将此代码放入布局文件中

```
<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment" /> 
```

一旦将代码放入应用程序打开时崩溃，此图片也会出现在图形布局上![在此处输入图像描述](https://i.stack.imgur.com/ndmhf.png)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:31:26.743

使用支持`Mapfragment`

```
<fragment     
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:name="com.google.android.gms.maps.SupportMapFragment"
          /> 
```

谷歌地图通用；

```
 gm = ((SupportMapFragment(getSupportFragmentManager().findFragmentById(R.id.map))).getMap();    
  gm.setMapType(GoogleMap.MAP_TYPE_NORMAL); 
```

# php - Magento 默认一页结帐不工作 - Jquery 冲突

> ID：16116574
> 
> 赞同：0
> 
> 时间：2013-04-20T04:29:52.000
> 
> 标签：php, magento, billing, opc

我在一次安装中配置了两个 Magento 商店。在这两个中，主商店一页结帐无法正常工作[实际上它没有移动到下一步 - 计费步骤]在第 2 步。

通过浏览器查看源代码时不需要 billing.html 文件

有什么解决办法吗

[http://i.stack.imgur.com/nApzp​​.png](http://i.stack.imgur.com/nApzp.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:34:13.083

检查 jquery 是否与原型冲突，因为当所有原型函数都不起作用时，这是一个问题

为此使用 noConflict

让 jQuery 包含在 magento 2.0 中的好消息 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T17:02:29.693

我已经处理过几次这样的问题，十分之九是由行为不端的运输或支付模块引起的。我建议您禁用所有非默认模块并重试，看看会发生什么。

在您完成默认的 Magento 调试过程后，我会尝试这个。

# scala - 在 Scala 中，如何在处理流时将当前值与以前的值进行比较？

> ID：16116577
> 
> 赞同：1
> 
> 时间：2013-04-20T04:30:33.877
> 
> 标签：scala

我是 scala 的新手，所以不知道如何解决这个问题？基本上，我正在尝试为一系列报价找到移动平均线交叉点。我不确定如何获取以前的值以将它们与当前值进行比较？

```
if ( fastMovingAverage(n-1) > slowMovingAverage(n-1) && fastMovingAverage(n) < slowMovingAverage(n) )
then do some action

package com.example.csv

import scala.io.Source

object FileParser {
  val TIMESTAMP_LOCATION = 3
  val BID_LOCATION = 4
  val OFFER_LOCATION = 5
  val FAST_WINDOW_SIZE = 5
  val SLOW_WINDOW_SIZE = 10

  def main(args: Array[String]) = {
    val records = Source.fromFile("Sample.csv")
    .getLines()
    .drop(1)
    .map(_.split(","))
    .takeWhile( _ != null)
    .sliding(SLOW_WINDOW_SIZE , 1)
    .foreach(x => movingAverage(x))
  }

  def movingAverage(numbers: Seq[Array[String]]) = {
    val listOfBids = numbers.map(x => x(BID_LOCATION).toDouble)
    val slowAverage = listOfBids.reduceLeft(_ + _)/numbers.length
    val fastListOfBids = listOfBids.takeRight(FAST_WINDOW_SIZE)
    val fastAverage = fastListOfBids.reduceLeft(_ + _)/fastListOfBids.length
    println("Slow Average " + slowAverage + " Fast Average " + fastAverage)
  }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T05:55:34.187

简短的回答是使用`zip`操作`slowAverage`并`fastAverage`组合列表，然后找到压缩元素的差异。当差值从负值变为正值时，这表明快速平均值已超过（更大）慢速平均值。

这是我使用的数据和更长的示例：

```
Price      Fast Average(2)  Slow Average(4) Diff
9           
8           8.5     
7           7.5     
6           6.5             7.5              -1
5           5.5             6.5              -1
5           5               5.75             -0.75
6           5.5             5.5               0
7           6.5             5.75              0.75
8           7.5             6.5               1
9           8.5             7.5               1 
```

![移动平均线交叉示例](https://i.stack.imgur.com/66GmU.png)

谷歌文档链接：[https ://docs.google.com/spreadsheet/ccc?key=0Alfb-wgy-zTddHdwU2stS0U5ZUxtN2cwdWFoeWNPZFE&usp=sharing](https://docs.google.com/spreadsheet/ccc?key=0Alfb-wgy-zTddHdwU2stS0U5ZUxtN2cwdWFoeWNPZFE&usp=sharing)

最近的价格是最后的。

让我们在 Scala 中看看它：

```
scala> val prices = List(9,8,7,6,5,5,6,7,8,9)
prices: List[Int] = List(9, 8, 7, 6, 5, 5, 6, 7, 8, 9)

scala> val fastAverage = prices.sliding(2).toList.map(xs => xs.sum / 2.0)
fastAverage: List[Double] = List(8.5, 7.5, 6.5, 5.5, 5.0, 5.5, 6.5, 7.5, 8.5)

scala> val slowAverage = prices.sliding(4).toList.map(xs => xs.sum / 4.0)
slowAverage: List[Double] = List(7.5, 6.5, 5.75, 5.5, 5.75, 6.5, 7.5) 
```

拉链在一起`fastAverage`，`slowAverage`但由于它们的尺寸不同，我们采用最后七个`fastAverage`with `takeRight`。

```
scala> val zipped = fastAverage.takeRight(7) zip slowAverage
zipped: List[(Double, Double)] = List((6.5,7.5), (5.5,6.5), (5.0,5.75), (5.5,5.5), (6.5,5.75), (7.5,6.5), (8.5,7.5)) 
```

取压缩平均值的差值。从负到正（>=0）的变化表明快速平均线大于慢速平均线，即看涨移动平均线交叉。

```
scala> zipped.map(x => x._1 - x._2)
res44: List[Double] = List(-1.0, -1.0, -0.75, 0.0, 0.75, 1.0, 1.0) 
```

# php - PostgreSQL 永久连接：对我有用吗？

> ID：16116585
> 
> 赞同：1
> 
> 时间：2013-04-20T04:31:45.177
> 
> 标签：php, curl, php-pgsql

我有一个运行时`PHP`调用的应用程序。页面 A 收到一条消息和一些信息。页面 B 进行路由。页面 C 使用 CURL 调用外部应用程序。当我投入生产时，我每月将收到多达 1-2 百万个请求。`GET parameters``PG and nginx`

我的问题涉及 pg_pconnect 函数。***如果有来自不同位置的呼叫，连接是否会重用？我的意思是，每次为页面 A 建立一个简单的连接并关闭它会更好吗？***（来自不同位置的服务器将调用我的应用程序）对于页面 B 和 C，脚本将在无限循环中调用它们（如果没有消息要处理，则等待 10 秒）。由于请求总是来自同一个位置，是否值得为页面 B 和 C 使用永久连接？

我希望我的解释足够清楚。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T02:46:28.630

一般来说，我认为在您的情况下，您可能会从持久连接中看到一些好处。也有缺点，但只要你牢记它们，这些都是可以管理的。但是，您可能想要更进一步并考虑一个实际的连接池。

最大的问题是，当并发连接数低于每个 CPU 内核约 2 个加上每个磁盘主轴 1 个时（由于 I/O 等待时间），通常 PostgreSQL 表现最好。当然，这并不准确，但它可以让您了解您的硬件和资源的预期。

在 Linux/UNIX 平台上，连接启动/拆除的开销并不大，但管理并发性对于保持快速运行可能至关重要。因此，如果我需要一些额外的控制，我将从持久连接开始，然后转移到连接池。

主要缺点是当其他人连接到数据库时，您无法执行某些数据库操作。如果您需要从备份中恢复，您可能需要确保先断开 Web 应用程序。

# layout - Zend 框架 2 布局.phtml

> ID：16116586
> 
> 赞同：2
> 
> 时间：2013-04-20T04:31:51.957
> 
> 标签：layout, zend-framework2

所以，因为我可以在控制器中编写代码来影响视图...... layout.phtml 从什么代码读取？（我假设是module.php，但我想要一些反馈）

编辑：要清楚......在我的控制器中，我可以获得一个等于某物的变量并在我的视图中访问它。我想在我的布局中发现类似的操作。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T11:50:23.957

您在这篇文章中提出了各种问题。我将尝试解决其中的一些问题。

**布局如何工作？**

Zend Framework 2 中有“视图模型”的概念。视图模型是一个对象，它有几个变量和一个分配的模板。该模板使用给定的变量呈现。

此外，您可以嵌套视图模型。所以一个视图模型（“布局”）有一个从你的控制器创建的孩子。子视图被渲染并存储为父视图模型中的变量。这个变量的名字叫做“捕获到”。

会发生什么，你有一个控制器，然后创建一个视图模型。此视图模型作为*子视图模型*插入到新模型中，即布局。这个孩子被设置为“捕获到” `content`。所以在布局中，将子视图模型的结果插入到`$content`变量中。

**如何访问控制器中的布局变量？**

有一个`layout`控制器插件可让您*直接访问布局视图模型*。所以你可以直接在那里设置变量：

```
public function indexAction()
{
    $this->layout()->setVariable('foo', 'bar');
} 
```

然后在您的布局中`$foo`回显。`bar`

**如何在视图脚本中访问布局变量？**

有一个`layout`视图助手，它还可以让您*直接访问布局视图模型*。所以你也可以在那里设置变量：

```
<?php $this->layout()->foo = 'bar';?> 
```

然后在您的布局中`$foo`回显。`bar`

# ruby - 干燥这些辅助方法

> ID：16116588
> 
> 赞同：0
> 
> 时间：2013-04-20T04:32:06.333
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

我有这样的三种方法：

```
def total_fat
  total = 0
  meal_foods = current_user.meal_foods
  meal_foods.each do |food|
    total += food.fat
  end
  return total
end 
```

一种用于脂肪、碳水化合物和蛋白质。

我想把它擦干。

我已经尝试过这种方法，但通过将“宏”作为字符串传递似乎不起作用。

```
def total_of(macro)
  total = 0
  meal_foods = current_user.meal_foods
  meal_foods.each do |food|
    total += food.macro
  end
  return total 
end 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T04:42:58.863

```
def total_of(marcro)
  current_user.meal_foods.map(&marcro).inject(:+)
end 
```

这需要 Array(-like) 集合`meal_foods`并将其映射到仅包含 的`marcro`值的Array `meal_foods`，然后在每个数字之间注入“+”。确保将参数作为符号传递，例如`total_of(:fat)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T09:04:30.947

```
def total_of(type)
  current_user.meal_foods.map(&:type).sum
end 
```

total_of(:fat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:39:47.300

您需要使用 send 来调用带有变量的方法，并将宏转换为符号。

所以：

```
 food.send(macro.to_sym) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T04:40:00.987

```
def total_of(macro)
  current_user.meal_foods.inject(0) do |total,food|
    total + food.send(macro)
  end
end 
```

我不确定这是否会奏效，因为您没有提供任何数据来尝试它，但请查看[Enumerable](http://ruby-doc.org/core-2.0/Enumerable.html)文档，让您了解可以做什么。`each_with_object`未被充分利用，也适合这里。

不需要显式返回。事实上，甚至不需要提及`total`，因为它将是最后一个评估的表达式。

# list - 在通用 Lisp 中将函数列表作为参数传递

> ID：16116590
> 
> 赞同：1
> 
> 时间：2013-04-20T04:32:22.060
> 
> 标签：list, function, lisp

假设有一个函数 F。我想将函数列表作为参数传递给函数 F。

函数 F 将逐个遍历列表中的每个函数，并将每个函数应用到两个整数：分别为 x 和 y。

例如，如果列表 = (plus, minus, plus, divide, times, plus) 和`x = 6`and `y = 2`，输出将如下所示：

```
8 4 8 3 12 8 
```

如何在常见的 Lisp 中实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T04:52:54.333

有很多可能性。

```
CL-USER> (defun f (x y functions)
           (mapcar (lambda (function) (funcall function x y)) functions))
F
CL-USER> (f 6 2 (list #'+ #'- #'+ #'/ #'* #'+))
(8 4 8 3 12 8)
CL-USER> (defun f (x y functions)
           (loop for function in functions
                 collect (funcall function x y)))
F
CL-USER> (f 6 2 (list #'+ #'- #'+ #'/ #'* #'+))
(8 4 8 3 12 8)
CL-USER> (defun f (x y functions)
           (cond ((null functions) '())
                 (t (cons (funcall (car functions) x y)
                          (f x y (cdr functions))))))
F
CL-USER> (f 6 2 (list #'+ #'- #'+ #'/ #'* #'+))
(8 4 8 3 12 8)
CL-USER> (defun f (x y functions)
           (labels ((rec (functions acc)
                      (cond ((null functions) acc)
                            (t (rec (cdr functions)
                                    (cons (funcall (car functions) x y)
                                          acc))))))
             (nreverse (rec functions (list)))))
F
CL-USER> (f 6 2 (list #'+ #'- #'+ #'/ #'* #'+))
(8 4 8 3 12 8)
CL-USER> (defun f (x y functions)
           (flet ((stepper (function result)
                    (cons (funcall function x y) result)))
             (reduce #'stepper functions :from-end t :initial-value '())))
F
CL-USER> (f 6 2 (list #'+ #'- #'+ #'/ #'* #'+))
(8 4 8 3 12 8) 
```

等等。

前两个是可读的，第三个大概是第一个 Lisp 课程的菜鸟会怎么做，第四个还是菜鸟，在他听说过尾调用优化之后，第五个是一个卧底的 Haskeller 写的。

# javascript - Html2Canvas 中的 HTML 字符串

> ID：16116592
> 
> 赞同：8
> 
> 时间：2013-04-20T04:32:35.290
> 
> 标签：javascript, html, canvas, html2canvas

我们如何将有效的 HTML 字符串传递给 html2canvas？

例如

```
var html = "<html><head></head><body><p>HI</p></body></html> 
```

[在http://html2canvas.hertzen.com/screenshots.html](http://html2canvas.hertzen.com/screenshots.html)上完成的方式

Html2canvas 真的很棒，但它的文档记录很差。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-20T10:12:12.903

通常 html2canvas 呈现 DOM 元素而不是 html 代码。但是你可以创建一个临时的 iFrame，让你的 html 在那个 iFrame 中渲染，然后将生成的 DOM 交给 html2canvas。

你可以在这个[jsfiddle](http://jsfiddle.net/SEMsq/4/)中找到一个例子来玩，或者为了你的方便在这里：

```
var html_string = "<html><head></head><body><p>HI</p></body></html>";
var iframe=document.createElement('iframe');
document.body.appendChild(iframe);
setTimeout(function(){
    var iframedoc=iframe.contentDocument||iframe.contentWindow.document;
    iframedoc.body.innerHTML=html_string;
    html2canvas(iframedoc.body, {
        onrendered: function(canvas) {
            document.body.appendChild(canvas);
            document.body.removeChild(iframe);
        }
    });
}, 10); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-20T10:20:03.270

您可以执行以下操作

```
var iframe=document.createElement('iframe');
$('body').append($(iframe));
setTimeout(function(){
    var iframedoc=iframe.contentDocument||iframe.contentWindow.document;
    $('body',$(iframedoc)).html('<html><head></head><body><p>HI</p></body></html>');
    html2canvas(iframedoc.body, {
        onrendered: function(canvas) {
            $('body',$(document)).append(canvas);
            $('body',$(document)).remove(iframe);
        }
    });
}, 10); 
```

[在这里](https://jsfiddle.net/abdennour/9v8qb/21/)查看整个代码：

# [演示](https://jsfiddle.net/abdennour/9v8qb/21/)

# c# - 关于静态字段的实例化和使用的 C# 控制台程序问题

> ID：16116593
> 
> 赞同：0
> 
> 时间：2013-04-20T04:32:35.460
> 
> 标签：c#, instantiation, output

C#新手在这里。我最近参加了一项测试，询问一些 C# 代码的输出是什么。我没有确切的代码，但我试图从下面的内存中重新创建它。这段代码由于某种原因无法编译（并不是那么重要，因为我只是对这里发生的事情有疑问）。我最想记住的部分是创建所有类字段的行。

以下是我的问题：

1.  正在使用“new class1();”创建一个类的新实例 没有将其分配给变量的有效方法来实例化它？
2.  每次实例化类时，如何处理静态字段？
3.  你甚至可以通过调用构造函数来创建类字段吗？

    ```
    using System;
    using System.Collections.Generic;

    namespace CustomFunctionTest
    {
        class Program
        {
            static void Main(string[] args)
            {
                new class1();
                new class1("E");
             }
        }
        public class class1
        {

            public static class1 test1 = new class1("A");
            private class1 b = new class1("B");
            public static class1 c = new class1("C");

            public class1()
            {
                Console.WriteLine("D");
            }
            public class1(string str)
            {
                Console.WriteLine(str);
            }

        }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:39:30.960

> 1) 正在使用“new class1();”创建一个类的新实例；没有将其分配给变量的有效方法来实例化它？

是的。它的构造函数可以对静态对象执行一些操作，甚至可以以某种方式保留。或者，它可能只是被垃圾收集。适合高质量的代码吗？通常不会。

> 2）每次实例化类时如何处理静态字段？

如果有静态构造函数，则在初始化类型时，静态字段在静态构造函数之前初始化，并且类型只初始化一次。在您的示例中，没有静态构造函数，因此如果静态字段被访问，则运行时会延迟初始化。

> 3) 你甚至可以通过调用构造函数来创建类字段吗？

是的。类的字段通常在构造类时初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:08:04.657

1.  是的; 对于编译器或 JITTER 来说，一般来说，确定类构造函数中没有发生副作用是一个太复杂而无法考虑的问题，因此无法对其进行优化。
2.  在任何实例构造函数可以运行之前，该类型必须完全且成功地初始化。静态构造函数和字段初始值设定项的确切顺序是可配置的，并且在不同版本的 DOT NET 框架中具有不同的默认顺序。
3.  当任何构造函数完成时，返回一个有效的类对象实例；然而，这并不意味着实例一定“准备好行动”。例如，电子序列化通常依赖于运行默认构造函数，然后设置所有非默认属性以创建真正“准备好使用”的实例。

# ios - CCParticleSystemQuad 在添加到移动精灵时不会被释放

> ID：16116594
> 
> 赞同：1
> 
> 时间：2013-04-20T04:32:47.103
> 
> 标签：ios, objective-c, cocos2d-iphone, ccparticlesystem

我正在尝试在 cocos2d 中添加粒子轨迹效果，我设法通过将 CCParticleSystemQuad 发射器作为子元素添加到移动的精灵来实现。但我观察到这个发射器最终没有被释放。

如果我将此发射器添加到同一个精灵，但保持静止并且根本不移动，发射器确实会被释放。

我不知道为什么会这样。。

代码有点像这样..

```
CCParticleSystemQuad *emitter = [[[CCParticleSystemQuad alloc] initWithFile:@"myEffect.plist"] autorelease];
emitter.positionType = kCCPositionTypeFree;
emitter.autoRemoveOnFinish = YES;
[movingSprite addChild:emitter z:movingSprite.zOrder + 1000]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T04:45:58.923

确保你打电话`[emitter removeFromParentAndCleanup:YES];`

这是我的[类似问题之一](https://stackoverflow.com/questions/13101400/cocos2d-dealloc-is-not-called-after-calling-release)

找出保留对象的位置，按照 Morion 在上述线程中的回答。

快速解决方案：

```
CCParticleSystemQuad *emitter = [CCParticleSystemQuad particleWithFile:@"myEffect.plist"];
emitter.positionType = kCCPositionTypeFree;
emitter.autoRemoveOnFinish = YES;
[movingSprite addChild:emitter z:movingSprite.zOrder + 1000];

//To remove
[emitter stopSystem];
[emitter removeFromParentAndCleanup:YES]; 
```

# jquery - jquery - 如何根据另一个被点击来设置一个单选按钮

> ID：16116596
> 
> 赞同：2
> 
> 时间：2013-04-20T04:32:59.213
> 
> 标签：jquery, radio-button

假设我有一个包含以下内容的表单：

```
<input type='radio' name='o37_field1' value='aaa'>aaa
<input type='radio' name='o37_field1' value='bbb'>bbb

<input type='radio' name='o44_field1' value='aaa'>abcdef
<input type='radio' name='o44_field1' value='bbb'>baksdf

<input type='radio' name='o58_field1' value='aaa'>wisdof
<input type='radio' name='o58_field1' value='bbb'>safhwr 
```

这是我需要用 jquery 做的，但我遇到了麻烦：

如果在其中一个集合中单击“aaa”，还为其他集合设置/检查“aaa”，并对名称中包含“field1”和“aaa”的任何其他单选按钮执行相同操作价值。

bbb 同上

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T04:46:37.567

这将在选中一个时将所有无线电设置为“aaa”：

```
$(document).ready(function() {
   $(':radio[value=aaa]').change(function(){
       $(':radio[value=aaa]').prop('checked',true);
   });
}); 
```

更强大的解决方案，例如单击时选择所有“喜欢”值：

```
$(document).ready(function() {
    $(':radio').change(function(){       
       $(':radio[name$='field1'][value='+$(this).val()+']').prop('checked',true);
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T04:43:26.407

干得好。[http://jsfiddle.net/5p8KN/](http://jsfiddle.net/5p8KN/)选择[`endswith attribute selector`](http://api.jquery.com/attribute-ends-with-selector/)field1。

```
$("input[type='radio']").click(function(){
$("input[type='radio'][name$='field1'][value='" + $(this).val() + "']").prop('checked',true);
}); 
```

如果您想查找包含field1 匹配的[属性选择器，那么您可以使用](http://api.jquery.com/attribute-contains-selector/)`input[name*='field1']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:35:20.617

将相同的类应用于所有 aaa 单选按钮

然后在点击事件中使用

```
$("input[type='radio']").click(function(){
  $(":radio[value="+$(this).val()+"]")).each(function(index,value){     
    $(this).attr('checked',true); or   $(this).attr('checked','checked');
   });
}); 
```

# vb.net - 从 PostRequest 中提取数字

> ID：16116598
> 
> 赞同：0
> 
> 时间：2013-04-20T04:33:12.577
> 
> 标签：vb.net, http

我正在使用`postreq()`VB.NET 发布一个 Web 表单。

`Response`包含一个字符串，，其中是4 位数字。我怎样才能提取这些数字？`"sessionId=*WXYZ*"`*`WXYZ`*

这是我的代码：

```
Public Sub btn1_click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn1.Click
    Dim postData As String = "some Post Data"
    Dim url as String = "http://localhost/form.php"
    Dim tempCookies As New CookieContainer
    Dim encoding As New UTF8Encoding
    Dim byteData As Byte() = encoding.GetBytes(postData)
    Dim postReq As HttpWebRequest = DirectCast(WebRequest.Create(url), HttpWebRequest)
    postReq.Method = "POST"
    postReq.KeepAlive = True
    postReq.CookieContainer = tempCookies
    postReq.ContentType = "application/x-www-form-urlencoded"
    postReq.Referer = url
    postReq.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; ru; rv:1.9.2.3) Gecko/20100401 Firefox/4.0 (.NET CLR 3.5.30729)"
    postReq.ContentLength = byteData.Length

    Dim postreqstream As Stream = postReq.GetRequestStream()
    postreqstream.Write(byteData, 0, byteData.Length)
    postreqstream.Close()
    Dim postresponse As HttpWebResponse

    postresponse = DirectCast(postReq.GetResponse(), HttpWebResponse)
    tempCookies.Add(postresponse.Cookies)
    logincookie = tempCookies
    Dim postreqreader As New StreamReader(postresponse.GetResponseStream())

    Dim thepage As String = postreqreader.ReadToEnd
    Dim r As New System.Text.RegularExpressions.Regex("sessionId=....")    
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:13:44.773

只需将该部分放在一个组中，这样您就可以使用匹配对象的[`Groups`属性来获取它的值：](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.groups.aspx "System.Text.RegularExpressions.Match.Groups 属性")

```
Dim r As New Regex("sessionId=(\d{4})")
Dim id As String = r.Match(thepage).Groups(1).Value 
```

# c++ - 同步来自多个对象的异步调用

> ID：16116601
> 
> 赞同：2
> 
> 时间：2013-04-20T04:33:40.120
> 
> 标签：c++, design-patterns, asynchronous, design-principles

我有大约 10 个对象。每个对象都是不同的类。发送到这些对象的请求（带有返回值的方法调用）来自不同的线程。

我需要同步这些方法调用，一次只能执行一个。一些请求比其他请求具有更高的优先级。这意味着如果有更多的请求等待执行并且发送了另一个 - 优先级高于任何其他等待执行的请求，则它将作为下一个执行。

我不知道如何在 C++ 中解决这个问题。我在考虑命令模式，但它需要大量的“手动”编码。我必须将每个方法调用转换为命令对象。问题在于返回值。有谁知道，这里可以使用什么模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T04:38:35.813

对于同步，您可以使用某种形式的[互斥](http://en.wikipedia.org/wiki/Mutex)，以便一次只有一个线程在操作对象。

处理优先级时，您可能需要一个带有比较器的[优先级队列](http://en.wikipedia.org/wiki/Priority_queue)，以确定哪种类型的请求具有更高优先级的标准。

每个对象都将接受执行操作的请求，并且它将具有与之关联的优先级和操作（就像您在命令模式中建议的那样）。使用锁定机制，它将通过添加记录来更新优先级队列，然后释放它。它必须锁定队列，因为它是通过多个线程访问的。不需要显式排序——队列总是按照最高优先级排序。因此，要处理命令，只需获取队列中的第一项（如果可用），然后执行操作。

# ios - 自定义 UIButton 圆角在突出显示时变成正方形？

> ID：16116602
> 
> 赞同：4
> 
> 时间：2013-04-20T04:33:41.647
> 
> 标签：ios, xcode, button

我有自定义 UIButton 的以下代码：

```
btnLogin.layer.cornerRadius = 10;

[btnLogin setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"bluetint.png"]]];
[btnLogin setAlpha:1];
[btnLogin setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
[btnLogin setBackgroundImage:[UIImage imageNamed:@"reallybluetint.png"] forState:UIControlStateHighlighted];
[btnLogin setBackgroundImage:[UIImage imageNamed:@"reallybluetint.png"] forState:UIControlStateSelected]; 
```

当我突出显示按钮时，即使它在正常状态下具有圆角，它也会变成方形。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T05:07:16.543

尝试使用此代码，它将起作用，

```
btnLogin.layer.cornerRadius = 10.0;
[btnLogin setClipsToBounds:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:36:48.697

我也遇到过类似的问题，请确保界面生成器中的按钮设置为自定义，因为如果不是，您将看到圆角。

我在处理图像时还发现了一些有用的东西是 UIEdgeInsets。所以我可能会做一个这样的程序化自定义按钮。

```
UIButton * customButton = [UIButton buttonWithType:UIButtonTypeCustom];
[customButton setBackgroundImage:[[UIImage imageNamed:@"customerImage.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(1, 4, 2, 4)] forState:UIControlStateNormal]; 
```

但是对于任何图像，您都可以使用 resizableImageWithCapInsets。我建议您阅读此内容以确保您可以正确配置它，但即使它对您没有帮助，您也知道它可以在以后帮助您。

[Apple Doc](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html)只需控制 F 即可调整大小

希望这会有所帮助^_^

ps 圆角会起作用，但是如果你尝试这个并且它不起作用，请确保你已经导入了 Quartzcore。我经常忘记这一步，并在我弄明白之前变得焦虑。总之祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-22T17:40:35.663

在**斯威夫特**：

```
import UIKit

class CustomUIButtonForUIToolbar: UIButton {

    override func drawRect(rect: CGRect) {
        super.drawRect(rect)
        ...
        self.clipsToBounds = true
    }

} 
```

# regex - Perl 文件逐行读取 (RegEx)

> ID：16116607
> 
> 赞同：2
> 
> 时间：2013-04-20T04:34:43.647
> 
> 标签：regex, perl

我要做的是打开一个文件并逐行读取。
一旦我找到我的正则表达式正在寻找什么，我想将每个放入`@accounts`数组中并将它们打印到我的屏幕上。

虽然我没有得到任何结果。我一定在这里犯了一个简单的错误？

```
#!/usr/bin/perl

use strict;
use warnings;

my $line;
my $file;
my $start;
my $end;
my @match;
my @accounts;

print "Enter the file name (example: file.txt): ";
chomp ($file = <STDIN>);

open FILE, $file or die "Cannot open $file read :$!";

while ($line=<FILE>) {

    $start = '">';
    $end = '</option>';

    @match = ($line =~ /$start(.*?)$end/g);

    foreach (@match)
    {
        push @accounts, $_;
        print " $_\n ";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T04:46:05.157

1）不要使用裸字文件句柄：

```
open my $INFILE, '<', $fname
    or die "Couldn't open $fname: $!"; 
```

2）@匹配？您使用了 g 标志，因此 @matches 将是一个更好的名称。通常，数组名称将是复数。

3) 避免在代码中使用 $_ ：

```
for my $match (@matches) {
    print $match;
} 
```

for 和 foreach 在 perl 中是同一个东西，所以使用 for——它的类型更短。

4)

> $start = '">';

您确定要查找后跟 > 的双引号吗？使用此数据文件，您的代码对我来说很好：

```
<option">hello world</option> 
```

然而，这是一些看起来很奇怪的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T22:15:13.623

```
use feature ":5.16";
use warnings FATAL => qw(all);
use strict;

my $t = "aaaa\">AAAA</option>\n bbbb\">BBBB</option> cccc\">CCCC</option>";
my $start = '">';
my $end = '</option>';
say for $t =~ /$start(.*?)$end/g; 
```

产生：

```
AAAA
BBBB
CCCC 
```

# c# - 正则表达式 C# 搜索匹配模式的文件以开头和结尾

> ID：16116610
> 
> 赞同：0
> 
> 时间：2013-04-20T04:35:25.617
> 
> 标签：c#, regex

在 C# 中，我想搜索从括号中的整数开始的匹配发生的位置，然后是这些字符“PLA”括号和“匹配”这个（我将读入内存），直到达到下一组。

因此示例代码将是

```
(1965
    ("PLA")
    ("GEN_ANGLE")
    ("Line to line angle")
    (
        ("clinesegs" 3565.01 1265.99 "SURFACE")
        ("clinesegs" 3618.02 1255.00 "SURFACE")
    )
    ((3586.02 1267.20 "SURFACE"))
    (120.000)
    (90.000)
)
(1966
    ("PLA")
    ("GEN_ANGLE")
    ("Line to line angle")
    (
        ("clinesegs" 3831.98 1255.00 "SURFACE")
        ("clinesegs" 3882.92 1268.07 "SURFACE")
    )
    ((3863.98 1267.20 "SURFACE"))
    (120.000)
    (90.000)
) 
```

我想“匹配”数据，并且仅在知道“1965”是我要查找的 ID 的基础上获取此数据。

```
(1965
    ("PLA")
    ("GEN_ANGLE")
    ("Line to line angle")
    (
        ("clinesegs" 3565.01 1265.99 "SURFACE")
        ("clinesegs" 3618.02 1255.00 "SURFACE")
    )
    ((3586.02 1267.20 "SURFACE"))
    (120.000)
    (90.000)
) 
```

我可以找到“（1965”）：

```
(\(1965) 
```

.. 或（前面带有 (ADD)）：

```
[(](ADD){1}\r\n\r\n\t\s[(][0-9]{4,}\r\n\r\n\t\s\s(\("){1}[a-zA-Z]{1,}("\)){1} 
```

..但我似乎无法真正让这些类型的正则表达式工作它必须是间距和换行符
我坚持理解末端 PLA 的匹配并在下一组数据开始之前“检测”`)`结尾`(1966 ("PLA")`这就是我在比赛中用来检测比赛结束的方法，但只是不将其包含在结果中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:47:26.850

如果您知道它后面`(1966 ("PLA")`没有出现在数据内部，您可以使用以下内容：

```
(?xs)                     # ignore spaces, comments and make . match \n
\(1965\s+\("PLA"\)
.*?                       # ungreedy
(?=\(1966\s+\("PLA"\)|$)  # lookahead does not include this in the match 
```

在 C# 中可以这样引用：

```
var re = @"(?xs)               # ignore spaces, comments and make . match \n
    \(1965\s+\(""PLA""\)
    .*?                        # ungreedy
    (?=\(1966\s+\(""PLA""\)|$) # lookahead does not include this in the match
    "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:49:20.297

这就是我想出的：

**编辑**：我修改了表达式以考虑 N 个“clinesegs”，适用于“线到线角度”组之前和之后的任意数量的组。

`\([\d]+[\s]+\("PLA"\)([\s]+\(.+)+[\s]+\(([\s]+\(.+)+[\s]+\)([\s]+\(.+\))+[\s]+\)`

它将捕获从`(1965`直到关闭的所有内容`)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:14:46.683

试试这个模式：在这个模式中使用你 1965 的 id

```
(?=\(1965)(?=.*\(\"PLA\"\).*)\(((([^)])*\([^)]+\)[^)]*)\))*\)*[^\)]*\) 
```

使用 RegexOptions.SingleLine

# d3.js - d3 中的 tickValues 未按预期工作

> ID：16116613
> 
> 赞同：0
> 
> 时间：2013-04-20T04:35:59.350
> 
> 标签：d3.js

我正在尝试制作一个简单的图表，其中在 y 轴的最大值处我只有一个刻度值。我实际上有这个工作，但我移动了一些东西，因为我需要将东西包含在一个函数中，即使我没有更改此代码，它也没有按预期工作。

我已经盯着它看了一个多小时，希望能有第二双眼睛。

首先，一些代码：

```
function AlmViz() {
    ... 

    this.x = d3.time.scale();
    this.x.range([0, this.width]);

    this.y = d3.scale.linear();
    this.y.range([this.height, 0]);
}

function loadData(viz) {
    ... 

    viz.yAxis = d3.svg.axis()
        .orient("left")
        .tickSize(0)
        .tickValues([d3.max(viz.y.domain())])   // only one tick at max
        .tickFormat(d3.format(",d"));

    viz.y.domain([0, d3.max(level_data, function(d) { return d[category.name]; })]);

    ...
    viz.svg.append("g")
        .attr("class", "y axis")
        .call(viz.yAxis);
}

var viz = new AlmViz();
loadData(viz); 
```

但是，y 轴是不稳定的。刻度有正确的文本，但它被放置在错误的位置。

```
<g class="y axis">
     <g class="tick major" style="opacity: 1;" transform="translate(0,7016)">
         <line x2="0" y2="0"></line>
         <text x="-3" y="0" dy=".32em" style="text-anchor: end;">7,016</text>
     </g>
     <path class="domain" d="M0,0H0V1H0"></path>
</g> 
```

问题是**transform="translate(0,7016)**。有人知道如何解决吗？

我应该注意，我在早期的迭代中几乎有相同的代码，并且它工作正常。有关详细信息，请参阅[https://github.com/jalperin/almviz/blob/d3/alm.js](https://github.com/jalperin/almviz/blob/d3/alm.js)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:57:50.070

您需要将比例分配给轴，因此

```
viz.yAxis = d3.svg.axis()
    .orient("left")
    .scale(viz.y)
    .tickSize(0)
    .tickValues([d3.max(viz.y.domain())])   // only one tick at max
    .tickFormat(d3.format(",d")); 
```

# c# - 查询字符串值始终为 0

> ID：16116617
> 
> 赞同：1
> 
> 时间：2013-04-20T04:36:54.150
> 
> 标签：c#, asp.net, query-string

这可能很容易，但我看不出有什么问题..

我将此字符串添加到我的网址：/projects.aspx?pid=3

在我后面的代码中，我试图像这样获取这个值：

```
public partial class Projects : System.Web.UI.Page
{
    public int pid { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            pid = Convert.ToInt32(Request.QueryString["pid"]); //this is returning 0 when it should have a value.
            DataBind(true);

            PopulateTestSuiteList();
        }

        TestSuitesDataList.ItemCommand += new RepeaterCommandEventHandler(this.Item_Command);
    } 
```

当我尝试查看其他函数中 pid 的值时，它总是给我“0”。我不明白为什么它不会像它应该的那样给我 3？

以下是示例函数：

```
private void ExecuteInsert(string TestSuiteName, string TestSuiteDescription, int ProjectID)
    {
        SqlConnection conn = new SqlConnection(GetConnectionString());
        string sql = "INSERT INTO TestSuites (ProjectID, TestSuiteName, TestSuiteDescription) VALUES " + " (@ProjectID,@TestSuiteName,@TestSuiteDescription)";
        try
        {
            conn.Open();
            SqlCommand cmd = new SqlCommand(sql, conn);

            SqlParameter[] param = new SqlParameter[3];

            param[0] = new SqlParameter("@TestSuiteName", SqlDbType.NVarChar, 50);
            param[1] = new SqlParameter("@TestSuiteDescription", SqlDbType.NVarChar, 200);
            param[2] = new SqlParameter("@ProjectID", SqlDbType.Int);

            param[0].Value = TestSuiteName;
            param[1].Value = TestSuiteDescription;
            param[2].Value = pid;

            for (int i = 0; i < param.Length; i++)
            {
                cmd.Parameters.Add(param[i]);
            }

            cmd.CommandType = CommandType.Text;
            cmd.ExecuteNonQuery();
        }
        catch (System.Data.SqlClient.SqlException ex)
        {
            string msg = "Insert Error:";
            msg += ex.Message;
            throw new Exception(msg);
        }
        finally
        {
            conn.Close();
        }
    }

    protected void AddTestSuiteButton_Click(object sender, EventArgs e)
    {
        //checks whether the test suite name already exists in the database and stops duplicates from being added for the same project
        string checkExistsQuery = "SELECT TestSuiteName FROM TestSuites WHERE TestSuiteName = @TestSuiteName and @ProjectID = " + pid;

        SqlConnection conn = new SqlConnection(GetConnectionString());
        SqlCommand checkExistsCmd = new SqlCommand(checkExistsQuery, conn);

        SqlParameter c1 = new SqlParameter("TestSuiteName", TxtTestSuiteName.Text);
        SqlParameter c2 = new SqlParameter("ProjectID", pid);

        checkExistsCmd.Parameters.Add(c1);
        checkExistsCmd.Parameters.Add(c2);

        conn.Open();

        SqlDataReader rd = checkExistsCmd.ExecuteReader();

        if (rd.HasRows)
        {
            lblAddTestSuiteMessage.Text = "Oops, a Project with that name already exists.";
            rd.Close();
            conn.Close();
        }
        else
        {
            string FormattedTestSuiteDescription = TxtTestSuiteDescription.Text.Replace("\r\n", "<br />");
            //call the method to execute insert to the database
            ExecuteInsert(TxtTestSuiteName.Text, FormattedTestSuiteDescription, pid);

            lblAddTestSuiteMessage.Text = "Project has been added successfully";
            ClearControls(Page);
        }

        rd.Close();
        conn.Close();
        Response.Redirect(Request.RawUrl);
    } 
```

在后面的相同代码中，这个函数似乎很乐意提取正确的数据并将其显示在我的页面上——它也在使用 PID？

```
 private void PopulateTestSuiteList()
    {
        SqlConnection conn = new SqlConnection(GetConnectionString());
        conn.Open();
        string sql = "SELECT TestSuiteID, ProjectID, TestSuiteName, TestSuiteDescription FROM TestSuites WHERE ProjectID = " + pid + "ORDER BY TestSuiteName ASC";
        SqlCommand cmd = new SqlCommand(sql, conn);

        SqlDataReader rd = cmd.ExecuteReader();
        while (rd.Read())
        {
            TestSuitesDataList.DataSource = rd;
            TestSuitesDataList.DataBind();
        }
        conn.Close();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:09:23.280

这可能是由于没有完全了解[页面生命周期](http://msdn.microsoft.com/en-ca/library/ms178472%28v=vs.100%29.aspx)造成的。您正在设置`pid`on `Page_Load`，但可能在页面尚未加载或重新加载时（例如在回发之后）在某处使用它。

如果您`pid`从查询字符串中获取值并需要在回发时使用它，则需要将其存储在**会话变量**或页面上的**隐藏字段**中。将其分配给页面类变量不会像您在这里所做的那样持久化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T04:47:29.533

由于您使用`Convert.ToInt32`的是

```
 Convert.ToInt32(Request.QueryString["pid"]); 
```

如果它是 null`Convert.ToInt32`函数将返回 0。

尝试使用`Int32.Parse(Request.QueryString["pid"])`并查看天气是否会出现空值异常。

如果是，则`pid`您的`Query string`. 检查您从哪里发送`pid`查询字符串。

## 而且

您还可以使用`Session`，因为值可能会在编辑或更新事件中丢失。所以你可以这样做

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
       if(Request.QueryString["pid"]!=null && Session["pid"]!=null)
        pid = Convert.ToInt32(Request.QueryString["pid"]); 
        DataBind(true);
        PopulateTestSuiteList();
    }
    TestSuitesDataList.ItemCommand += new RepeaterCommandEventHandler(this.Item_Command);
} 
```

在你的函数`ExecuteInsert`里面

```
private void ExecuteInsert(string TestSuiteName, string TestSuiteDescription)
{
     SqlParameter c2 = new SqlParameter("ProjectID", Int32.Parse(Session["pid"].ToString())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T05:01:40.407

我会检查每个不方便的值，例如 null 或无效字符串，我的代码是：

```
if (Request.QueryString["pid"] != null)
{
    int pid;
    if (int.TryParse(Request.QueryString["pid"].ToString(), out pid))
    {
        //Then its OK and you have an 
        //integer, put the codes here
    }
    else
    { 
        //The query string has value
        //but the value is not valid
        //(not an integer value)
    }
} 
```

# php - 包括 facebook.php 让我的网站显示额外的信息

> ID：16116618
> 
> 赞同：0
> 
> 时间：2013-04-20T04:37:21.513
> 
> 标签：php, facebook

我已经阅读了一些与显示 Facebook 名称、图片等相关的教程。为此，我必须包含（或要求）文件“Facebook.php”，该文件是我从 Facebook github 网站下载的最新版本。问题是，当我需要“facebook.php”时，我的网站如下所示： [http://imageshack.us/f/543/facebookphp.png/](http://imageshack.us/f/543/facebookphp.png/) 该文件应该包含 getUser() 和 Facebook 实例等函数，例如，但为什么它会得到所有出现在我的网络中的 html 代码？

# java - 在加载 SDK 之前无法解析目标“android-15”

> ID：16116619
> 
> 赞同：16
> 
> 时间：2013-04-20T04:38:01.893
> 
> 标签：java, android, eclipse

我在日食中很新。

我下载了一个编码，得到如下错误：

*   该项目未构建，因为其构建路径不完整。找不到 java.lang.Object 的类。修复构建路径，然后尝试构建此项目
    - java.lang.Object 类型无法解析。它是从所需的 .class 文件中间接引用的
*   无法解析目标“android-15”
*   在加载 SDK 之前无法解析目标“android-15”。

知道如何解决吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-24T13:24:17.800

为我解决的一件事是关闭，然后重新打开项目（在包资源管理器中单击项目名称，“关闭项目”，然后在包资源管理器中单击项目名称，“打开项目”）。

清理项目对我没有任何帮助，而且我安装了正确版本的 API。Eclipse 只是超级错误，经常破坏我的构建路径。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-20T05:14:29.797

在 Eclipse 中转到窗口 --> Android SDK 管理器并在 sdk 管理器中检查您是否为 api 级别 15 安装了 sdk。并且右键单击您的项目转到属性，左侧面板上有 Android 选项卡。单击它将向您显示项目构建目标。使其升级到更高版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-20T20:04:04.077

我在 SDK Manager 中做错了什么（可能删除了一些东西）并且遇到了类似的问题。但以上都没有帮助。

尝试运行 Android SDK Manager，但它没有加载，显示错误“Windows 无法执行 Android.bat”（后来我发现整个“工具”文件夹在已安装的 Android 包中进行了任务）。所以 Android SDK Manager 没有启动（我想我记得之前安装了正确的 SDK）。

我还尝试纠正 project.properties 中的问题，但根本没有可用的 Android 版本。其他论坛也没有帮助。

幸运的是我找到了解决方案。所以我所做的是发现我最初下载的压缩 Android 包“adt-bundle-windows-x86-20131030”并提取“sdk/tools”文件夹。然后我将“工具”文件夹复制到我已经安装的 Eclipse 路径“C:... \adt-bundle-windows-x86-20131030\sdk\”（Eclipse 已关闭）。启动 Eclipse，检查我项目中的构建路径，就是这样 - 一切恢复正常。

希望这对有类似（除了初始帖子）问题的人有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-23T11:53:49.883

对我来说，最终解决的问题是卸载 Android ADT（帮助 -> 关于 Eclipse -> 安装详细信息。卸载了与 android 相关的所有内容 + Tracer for OpenGL ES。之后重新安装了 ADT（[http://developer.android.com /sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html) )

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-13T13:30:05.983

为我解决的另一个技巧是编辑文件 project.properties，更改目标 sdk 并安装另一个，然后恢复文件。这会导致 Eclipse 重新构建项目而不会出现烦人的错误，但我希望 Eclipse 团队能够修复这个错误......

# android - 调用视图的 onDraw 方法需要多少时间 invalidate()

> ID：16116622
> 
> 赞同：0
> 
> 时间：2013-04-20T04:39:03.700
> 
> 标签：android, performance, view, android-canvas, invalidation

也许对于大多数应用程序来说，这不是问题，但是，如果我想重绘一个视图并且我的特定应用程序需要高分辨率怎么办？我在这里想说的是，你可能会遇到这样的情况如果您想要重绘视图的***任何输入***（例如触摸事件）发生最轻微的变化，那么您很可能会因为 invalidate() 调用视图的 onDraw 方法所花费的时间而丢失输入上的一些更改。我很确定由于硬件功能而不是软件，这*总是存在的问题，所以，我的问题是：*

1.  我对吗？
2.  *如果是这种情况，那么您可能知道这会给这些特定的高分辨率应用程序*带来多少错误

 ** * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-05-24T17:52:04.097

我不确定这是否正是您要找的，但我在寻找关于不工作[的答案时发现](https://stackoverflow.com/questions/37421233/invalidate-not-calling-ondraw-after-some-activity-finish)[了这个](https://stackoverflow.com/questions/18269236/delay-in-calling-ondraw)问题，@Rachiet 说和之间的延迟大约为100 毫秒。`invalidate()``invalidate()``onDraw()`*

# ruby-on-rails - Rails inverse_of 不适用于条件

> ID：16116631
> 
> 赞同：1
> 
> 时间：2013-04-20T04:40:21.357
> 
> 标签：ruby-on-rails, database, activerecord

这是我的模型：

```
class Flight < ActiveRecord::Base
  has_many :seats, dependent: :destroy, inverse_of: :flight
end

class Seat < ActiveRecord::Base
  belongs_to :flight, inverse_of: :seats
end 
```

看起来`inverse_of`效果很好，但是当我使用条件时它不起作用：

```
f1 = Flight.first
s1 = f1.seats.first
s2 = f1.seats.second
s3 = f1.seats.where(id: 0..1000000).third

s1.flight.equal? s2.flight
=> true
s1.flight.equal? s3.flight
=> false 
```

这是什么解释？我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:43:21.227

```
s1.flight.equal? s2.flight
=> true 
```

上面的结果为真，因为`s1.flight`和`s2.flight`引用**完全相同的 Ruby 对象**。

```
s1.flight.equal? s3.flight 
```

在这里，`s1.flight`指`s3.flight`代**不同的 Ruby 对象**。它们都包含相同的记录数据*（包括相同的`:id`值）*

问题是您使用的是 Ruby 的[`equal?`](http://ruby-doc.org/core-2.0/Object.html#method-i-eql-3F)方法，而您应该使用 Rails`==`或`eql?`比较器。

来自**[Ruby`Object`文档`==` *（别名为`eql?`and `equal?`）*](http://ruby-doc.org/core-2.0/Object.html#method-i-eql-3F)**

> 平等——在对象级别，== 仅当 obj 和 other 是同一个对象时才返回 true。**通常，此方法在后代类中被覆盖以提供特定于类的含义。**

不幸**的**`equal?`是，在. 来自**[Rails 文档](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#method-i-3D-3D)****[*（别名为*](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#method-i-3D-3D)****[*）*](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#method-i-3D-3D)**：**`ActiveRecord::Base`**[`==` *`eql?`*](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#method-i-3D-3D)****

 **> 如果 compare_object 是同一个确切的对象，或者 compare_object 是相同的类型并且 self 有一个 ID 并且它等于 comparison_object.id，则返回 true。

你会发现这与`:inverse_of`. 一个简单的例子，你可以试试

```
f1 = Flight.all.first
f2 = Flight.all.first

f1.eql? f2
=> true

f1 == f2
=> true

f1.equal? f2 # Direct Object comparison (skips ActiveRecord::Base)
=> false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-26T14:34:02.307

`Inverse_of`选项不适用于条件，这就是为什么`s1.flight`和`s3.flight`不相等 -`ActiveRecord`只是在你做的时候从数据库中重新加载对象`s3.flight`。这似乎是记录在案的行为，请参阅[https://github.com/rails/rails/issues/23693#issuecomment-184438933](https://github.com/rails/rails/issues/23693#issuecomment-184438933)**

# eclipse - 在 Eclipse 中移动框架时出现未处理的循环异常

> ID：16116638
> 
> 赞同：0
> 
> 时间：2013-04-20T04:41:52.623
> 
> 标签：eclipse, java-7

如果我从标准 java 视图开始，然后将一个打开的程序移到一边（这样我可以一次看到 2 个打开的程序，并排），然后单击任一帧，我得到

```
unhandled event loop exception
Item not added 
```

然后我在事件详细信息的堆栈跟踪中得到以下信息 -

```
eclipse.buildId=M20130204-1200
java.version=1.7.0_17
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.jee.product

Error
Sat Apr 20 00:36:50 EDT 2013
Unhandled event loop exception

org.eclipse.swt.SWTError: Item not added
    at org.eclipse.swt.SWT.error(SWT.java:4387)
    at org.eclipse.swt.SWT.error(SWT.java:4276)
    at org.eclipse.swt.SWT.error(SWT.java:4247)
    at org.eclipse.swt.widgets.Widget.error(Widget.java:468)
    at org.eclipse.swt.widgets.ToolBar.createItem(ToolBar.java:392)
    at org.eclipse.swt.widgets.ToolItem.<init>(ToolItem.java:128)
    at org.eclipse.jface.action.ActionContributionItem.fill(ActionContributionItem.java:332)
    at org.eclipse.jface.action.ToolBarManager.update(ToolBarManager.java:353)
    at org.eclipse.ui.internal.ActionSetActionBars.setActive(ActionSetActionBars.java:306)
    at org.eclipse.ui.SubActionBars.activate(SubActionBars.java:151)
    at org.eclipse.ui.SubActionBars.activate(SubActionBars.java:138)
    at org.eclipse.ui.internal.ActionPresentation.setActionSets(ActionPresentation.java:141)
    at org.eclipse.ui.internal.WorkbenchWindow.updateActionSets(WorkbenchWindow.java:1886)
    at org.eclipse.ui.internal.WorkbenchPage$ActionSwitcher.updateActionSets(WorkbenchPage.java:772)
    at org.eclipse.ui.internal.WorkbenchPage$ActionSwitcher.updateActivePart(WorkbenchPage.java:610)
    at org.eclipse.ui.internal.WorkbenchPage$ActionSwitcher.updateTopEditor(WorkbenchPage.java:637)
    at org.eclipse.ui.internal.WorkbenchPage.updateActiveEditorSources(WorkbenchPage.java:348)
    at org.eclipse.ui.internal.WorkbenchPage.updateActivations(WorkbenchPage.java:251)
    at org.eclipse.ui.internal.WorkbenchPage.access$15(WorkbenchPage.java:243)
    at org.eclipse.ui.internal.WorkbenchPage$E4PartListener.partActivated(WorkbenchPage.java:172)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl$2.run(PartServiceImpl.java:193)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.firePartActivated(PartServiceImpl.java:191)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.activate(PartServiceImpl.java:596)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.activate(PartServiceImpl.java:549)
    at org.eclipse.e4.ui.internal.workbench.swt.AbstractPartRenderer.activate(AbstractPartRenderer.java:105)
    at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer$1.handleEvent(ContributedPartRenderer.java:61)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1058)
    at org.eclipse.swt.widgets.Shell.setActiveControl(Shell.java:1447)
    at org.eclipse.swt.widgets.Shell.WM_MOUSEACTIVATE(Shell.java:2328)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4572)
    at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:341)
    at org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1627)
    at org.eclipse.swt.widgets.Shell.windowProc(Shell.java:2069)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:341)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.DefWindowProcW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DefWindowProc(OS.java:2541)
    at org.eclipse.swt.widgets.Scrollable.callWindowProc(Scrollable.java:80)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4623)
    at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:341)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4989)
    at org.eclipse.swt.internal.win32.OS.PeekMessageW(Native Method)
    at org.eclipse.swt.internal.win32.OS.PeekMessage(OS.java:3129)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3753)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1053)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:942)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

为什么会发生这种情况，我该如何解决？如果我一次返回单个程序视图，它似乎工作正常，但我真的想同时看到两者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T03:08:14.203

[an-swt-error-has-occurred](https://stackoverflow.com/questions/19156802/an-swt-error-has-occurred)重复Eclipse [bug# 287508](https://bugs.eclipse.org/bugs/show_bug.cgi?id=287508)
中的更多详细信息

# java - 如果我想将文件保存在项目路径中，CommonsMultipartFile 的文件上传路径应该是什么？

> ID：16116639
> 
> 赞同：0
> 
> 时间：2013-04-20T04:42:25.093
> 
> 标签：java, jakarta-ee, spring-mvc, file-upload, file-io

我想将文件上传到我的项目相对路径中。

webapp/fileUpload/ 是我希望文件上传的路径。

所以当我给出路径时

```
 CommonsMultipartFile commonsFile = user.getImage();
 String fileName = commonsFile.getOriginalFilename();

 File destFile = new File("http://localhost:8080/SpringDemo/fileUpload/",fileName); 
```

它给了我

```
java.io.FileNotFoundException: http:\localhost:8080\SpringDemo\fileUpload\design.txt(The filename, directory name, or volume label syntax is incorrect) 
```

我不明白什么应该是正确的道路。

```
I want to save it under my project folder and not on any other path so I am using  http:\localhost:8080\SpringDemo\fileUpload\as the path.

When i paste http://localhost:8080/SpringDemo/fileUpload/abc.txt into my browser it shows me the file.(abc.txt) 
```

我不明白什么应该是正确的道路。

请建议我正确的方法来做到这一点。

提前致谢。

津戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:45:29.287

您指定的位置是目录，而不是文件。另外，我建议将文件分部分发送到 php/jsp，它会进行额外检查并最终存储它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:12:15.867

首先，如果您取消部署应用程序，您在上下文中保存的任何文件都将丢失，因此请确保这是您想要的。

至于您的问题，`http://localhost/etc/and/so/on`是您的应用程序的 URL，而不是文件路径。

文件路径是底层文件系统的真实路径。

假设您使用的是安装在 /usr/share 中的 Tomcat，您的应用程序中的文件路径可能如下：`/usr/share/tomcat/webapps/yourapp/somewhere/you/want/files/stored/some-file.txt`

# c++ - 接受 C++ 字符串和 C 样式字符串的通用类

> ID：16116641
> 
> 赞同：0
> 
> 时间：2013-04-20T04:42:40.173
> 
> 标签：c++, c, string

如您所知：C 风格字符串是一个以“null”结尾的字符数组

C++ 风格的字符串是：

```
string s = "Some text"; 
```

因此，要同时接受 C++ 字符串和 C 样式字符串，我很确定我必须使用 C++ 模板。

**我正在尝试编写一个类和一个方法，该类和方法返回 C++ 或 C 样式字符串的字符串的第二个字符。我在正确的轨道上吗？**

```
template <class T>
  class mystring {
    T pointer;

  public:
    mystring(T input) { pointer = input }
    char getSecondLetter() {
      T temp = pointer;
      temp++;
      return temp;
    }
};

int main () {
  mystring<I dont know what to put> myobject("HELLO");
  cout << myobject.getSecondLetter();
  return 0;
} 
```

ps 程序员是否总是使用“T”作为模板类数据类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T04:50:45.253

没有必要，C字符串隐式转换为std::string

```
char getSecondLetter( const std::string & s ) {
  return s[1];
}

const char *c_str = "hello";
std::string str = "world";

getSecondLetter( c_str );   // e
getSecondLetter( str );     // o 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T04:59:44.437

你可以制作一个模板：

```
template<typename Str_T>
char getSecondLetter(Str_T const & str) { return str[1]; } 
```

这将允许`std::string`和`char const*`。但它也允许任何其他碰巧有`operator[]`返回字符的东西，或可转换为字符的东西（例如`std::vector<char>`，或`std::deque<char>`）。如果您想将其限制为`std::string`and `char const*`，那么您只需编写两个重载：

```
char getSecondLetter(std::string const & str) { return str[1]; }
char getSecondLetter(char const * str) { return str[1]; } 
```

当然，你也可以像其他人展示的那样做，只制作一个带有`std::string`. 但请注意，如果您将 c 字符串传递给它，则转换为`std::string`可能会导致内存分配，仅在函数结束时才被释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:55:10.700

你不需要模板——你实际上可以使用这个：

```
class mystring {
    std::string str;
public:
    mystring(std::string input) : str(input) {}
    char getSecondLetter() {
        return str[1];
    }
}; 
```

由于 std::string 有一个带有 a 的构造函数`const char*`，因此当您编写 时`mystring("hello")`，您的 const char* 将使用字符串构造函数隐式转换为 std::string，然后再传递给您的类构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T05:01:31.780

boost::string_ref 可能是您正在寻找的内容：[http://www.boost.org/doc/libs/1_53_0/libs/utility/doc/html/string_ref.html]

它是一个可以从字符串或 c 数组构造的轻量级类，它支持 std::string 接口的不可变部分。

# android - setYLabelsColor() 等函数中 scale 参数的用途是什么？

> ID：16116645
> 
> 赞同：8
> 
> 时间：2013-04-20T04:43:31.507
> 
> 标签：android, charts, achartengine

在 achartengine 库中，[XYMultipleSeriesRenderer](http://www.achartengine.org/content/javadoc/index.html?help-doc.html)类有两个功能：

```
public void setXLabelsColor(int color)

public void setYLabelsColor(int scale, int color) 
```

`setXLabelsColor()`直觉上是有道理的，因为只需要传递颜色，但在很长一段时间内我都无法弄清楚“比例”参数的用途`setYLabelsColor`。文档说，它是“渲染器比例”，但显然不清楚比例尺可能是什么值。在弄乱了输入之后，我终于得到了使用“比例”值为 0 的函数。这对我来说没有直观意义。我认为比例值为 1 意味着图表保持其比例。为什么值 0 有效，而默认比例值 1 无效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T13:49:17.790

看看下面的图片。那里有两条线，以单独的方式缩放，左侧的“气温”比例 = 0，右侧的“日照时间”比例 = 1。 [（来源：][[achartengine.org](http://www.achartengine.org/dimages/multiple_axis_cubic_line.png)][）][![图片](https://i.stack.imgur.com/uubZ3.png)](https://i.stack.imgur.com/uubZ3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-21T11:46:36.560

我相信比例是指您正在编辑的系列。在 multipleXYseriesrenderer 中，比例编号是指您输入的“第 n 个”系列。例如，如果您只有 1 个系列，则编辑比例“0”将仅编辑该系列。这就是我的理解，虽然我不能肯定地说。IT 似乎文档当然可以使用一些清理。

# javascript - 如何在 JavaScript 的代码行中添加延迟时间

> ID：16116646
> 
> 赞同：0
> 
> 时间：2013-04-20T04:43:58.400
> 
> 标签：javascript, jquery, delay

我试图做一个功能，当用户将光标移动到图像上时，它将显示预览。因此，我获取了触发事件的图像的 src，并将其更改为不同图像的路径。

```
$('#image').hover(function(){
    var src = "";
    var elem = $(this);
    for (var i=2; i<16; i++) {
        src = elem.attr('src').split('.');
        src[3] = i; 
        src = src.toString();
    src = src.split(',').join('.');
    elem.attr('src', src);
    }
}); 
```

问题就在这里，当我尝试执行以下操作时，在每个预览中都延迟它不能按我的意愿工作。

```
$('#image').hover(function(){
    var src = "";
    var elem = $(this);
    for (var i=2; i<16; i++) {
        src = elem.attr('src').split('.');
        src[3] = i; 
        src = src.toString();
        src = src.split(',').join('.');
        setTimeout(function() {
            elem.attr('src', src);
        }, 800);
    }
}); 
```

我该如何解决？我正在解决这个问题 +2 小时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:08:05.807

问题是你不能在 for 循环中使用 setTimeout .. 而不是使用 setInterval ..

```
 $('#image').hover(function () {
    var src = "";
    var elem = $(this);
    var i = 2;
    var interval = setInterval(function () {
        if (i < 16) {
            src = elem.attr('src').split('.');
            src[3] = i;
            src = src.toString();
            src = src.split(',').join('.');

            elem.attr('src', src);
            i++;
        } else {
            i = 2;
            clearInterval(interval);
        }
    }, 800);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:03:02.743

```
$('#image').hover(function(){
    var src = "";
    var elem = $(this);
    for (var i=2; i<16; i++) {
        src = elem.attr('src').split('.');
        src[3] = i; 
        src = src.toString();
        src = src.split(',').join('.');

$(elem).delay(800).animate({zoom:1},0,function(){$(this).src(src);});
    }
}); 
```

# javascript - 显示 JSON 内容

> ID：16116651
> 
> 赞同：-2
> 
> 时间：2013-04-20T04:44:36.993
> 
> 标签：javascript, json

这应该很简单，我对此很陌生。我只想知道如何从该文件中显示以下信息：[http ://worldoftanks.com/community/accounts/1003576349/api/1.8/?source_token=WG-WoT_Assistant-1.3.2](http://worldoftanks.com/community/accounts/1003576349/api/1.8/?source_token=WG-WoT_Assistant-1.3.2)

我想使用 javascript 显示（例如）以下内容：

*   -地位
*   -车辆->发现
*   -总结 -> 获胜
*   -数据->防守者

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T04:58:23.630

只需将 json 当作普通的 javascript 对象处理，并像处理任何其他对象一样访问它的属性/数组。你可以像这样得到你正在寻找的值。[小提琴](http://jsfiddle.net/JsvWm/)

```
var json={...yourjson...};
alert('status ' + json.status);
alert('Spotted ' + json.data.vehicles[0].spotted);
alert('Wins ' + json.data.summary.wins);
alert('defender ' + json.data.achievements.defender); 
```

如需进一步居住，请查看此[SO](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript) Post。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T04:51:56.693

你可以使用jQuery来解析Json

```
var output=jQuery.parseJSON(YOUR_JSON); 
```

变量输出会给你对象，从那里你可以很容易地提取数据

```
document.write(output.query); 
```

# java - 解析异常 Java

> ID：16116652
> 
> 赞同：10
> 
> 时间：2013-04-20T04:44:55.143
> 
> 标签：java, parseexception

我正在编写一个约会程序，允许用户输入约会日期、描述和约会类型。一切正常，直到他们选择打印一系列日期的“打印范围”，当他们选择这样做时，它会告诉他们输入开始日期和结束日期，然后程序会从这些日期之间提取所有约会并将它们显示到输出框中。

以下是我在打印范围时遇到的错误：

```
AppointmentNew.java:68: unreported exception java.text.ParseException; must be caught or declared to be thrown
        Date lowDate = sdf.parse(stdin.nextLine());
                                ^
AppointmentNew.java:70: unreported exception java.text.ParseException; must be caught or declared to be thrown
        Date highDate = sdf.parse(stdin.nextLine());  
                                 ^
AppointmentNew.java:77: unreported exception java.text.ParseException; must be caught or declared to be thrown
           Date newCurrentDate = sdf.parse(currentDate); 
```

我想我可能应该做一个 try/catch 块，但我不确定如何做到这一点，并且想知道是否有人可以为我提供答案或示例来修复这些错误。

这是我认为发生解析错误的一些代码：

```
import java.util.*;
import java.text.SimpleDateFormat;
import java.util.Date;

public class AppointmentNew 
{
public static void main (String[] args) throws Exception
{

if (choiceNum == 2)
     {
        System.out.print("\n\n\tEnter START Date in mm/dd/yyyy format: ");
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
        Date lowDate = sdf.parse(stdin.nextLine());
        System.out.print("\n\n\tEnter END Date in mm/dd/yyyy format: ");
       Date highDate = sdf.parse(stdin.nextLine());  

        for(int i = 0; i < list.size(); i++)
        {
           int dateSpot = list.get(i).indexOf(" ");
           String currentDate = list.get(i);
           currentDate.substring(0, dateSpot);
           Date newCurrentDate = sdf.parse(currentDate); 

           if (newCurrentDate.compareTo(lowDate) >= 0 && newCurrentDate.compareTo(highDate) <= 0)
           {
              System.out.println("\n\t" + list.get(i));

           }
        }
     } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-20T05:01:07.887

## 为什么你会收到错误：

![在此处输入图像描述](https://i.stack.imgur.com/pU7Ie.png)

## 如何修复它：

围绕有问题的代码`try catch`- 这就像说，*我将捕获错误，记录它并希望能够对此做些什么。*

```
 try {  // add this line
             System.out.print("\n\n\tEnter START Date in mm/dd/yyyy format: ");
             SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
             Date lowDate = sdf.parse(stdin.nextLine());
             System.out.print("\n\n\tEnter END Date in mm/dd/yyyy format: ");  
             Date highDate = sdf.parse(stdin.nextLine());  

             for(int i = 0; i < list.size(); i++)
             {
                int dateSpot = list.get(i).indexOf(" ");
                String currentDate = list.get(i);
                currentDate.substring(0, dateSpot);
                Date newCurrentDate = sdf.parse(currentDate); 

                if (newCurrentDate.compareTo(lowDate) >= 0 && newCurrentDate.compareTo(highDate) <= 0)
                {
                   System.out.println("\n\t" + list.get(i));   
                }
             }
         } catch (ParseException ex) {
              ex.printStackTrace(); // or log it using a logging framework
         } 
```

或者把它扔到 main - 在这里，就像在说：*无论是谁调用这个方法，如果它发生，请注意这个问题*：

```
public static void main (String[] args) throws Exception 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-20T04:46:42.950

Parse Exception 是检查异常，因此您必须处理它。通过 throws 或 try catch 块。

```
public static void main (String[] args) 
```

应该

```
public static void main (String[] args) throws ParseException 
```

或者在 try catch 块中

```
try {
    //All your parse Operations
} catch (ParseException e) {
   //Handle exception here, most of the time you will just log it.
   e.printStackTrace();
  } 
```

# xcode - 通过 mac 连接到外部 subversion 存储库并托管 xcode 项目

> ID：16116654
> 
> 赞同：0
> 
> 时间：2013-04-20T04:45:24.167
> 
> 标签：xcode, macos, svn, repository, code-sharing

我在 assembla.com 上创建了一个免费的私有 subversion 存储库。现在我想将我的项目托管到这个存储库，或者用外行的话来说，我想把我的 xcode 项目放在这个存储库中，这样只有我的同事才能在他自己的地方使用这个项目。我希望在 mac 上进行设置。我知道我们必须使用终端并输入一些命令，但我不知道设置外部 subversion 存储库后的过程。有人可以向我解释一下步骤并列出从我的 mac 连接到这个 repo 所需的工具吗？（这样我的同事也可以使用它？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:50:20.963

你需要一些第三方颠覆管理工具。我更喜欢`SourceTree`，但你也可以阅读这个问题：[https](https://stackoverflow.com/questions/899/best-subversion-client-for-mac-os) ://stackoverflow.com/questions/899/best-subversion-client-for-mac-os 。

在线代码库将为您提供克隆/推送的地址。只需将其粘贴到您的颠覆工具中，然后工具将自动克隆它。阅读每个站点的说明后，这很容易。

PS：命令行不是必须的，因为已经有很多不错的 GUI 工具。只需将命令行用于某些高级功能或通过 shell 脚本。

# iphone - 如何从子视图自定义单元格刷新 UI 视图？

> ID：16116655
> 
> 赞同：0
> 
> 时间：2013-04-20T04:45:37.873
> 
> 标签：iphone, ios, ipad

**我的 XIB 设计**

![在此处输入图像描述](https://i.stack.imgur.com/5dun4.jpg)

我有这样的设计屏幕，在运行时我有这样的屏幕

![在此处输入图像描述](https://i.stack.imgur.com/Kn6T9.jpg)

在此有一个带有名称和加号和减号按钮的视图，在运行时我有名称 1、名称 2 和名称 3 等。当我单击加号按钮时，将值从 1 增加到 ... 并显示计数标签，然后当我单击减号按钮时，我想减少计数标签值。

我在自定义单元格类中的点击事件代码，

```
_(IBAction)click:sender
{
    NSUInteger no =2;
    second-class *sc = [[secondclass alloc] init];
    [sc numberOfItem:no];
} 
```

当我单击自定义单元格中的按钮时，我想更改主类中的**计数标签值**，我的主类编码是

```
-(void)nuberofitem:no
{
    NSLog(@"number : %d",no); //It shows correct value
    localtextbox.text = no;

    NSLog(@"text box value : %@", localtextbox.text); //But in  label it shows null value
} 
```

无法更改**计数标签值**我不知道该怎么做，请任何知道的帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:57:08.917

按钮（自定义或其他）不应该告诉应用程序的其余部分，除了“我被点击了！”。

设置按钮，使其目标是您的视图控制器，并且它的操作是视图控制器中的一些适当方法。点击按钮将触发视图控制器中的操作。作为视图控制器的一部分，该操作应该能够向表中添加一行并更新标签中的值。

按钮本身不应该知道任何关于标签、表格或其他任何内容的信息。

# makefile - 使用 $(VAR:.x=.y) 在 Makefile 中执行两次替换

> ID：16116657
> 
> 赞同：0
> 
> 时间：2013-04-20T04:45:45.283
> 
> 标签：makefile

在 Makefile 中，我观察到我可以使用该模式`$(VAR:.x=.y)`来执行替换，但是我可以在同一个调用中执行两个替换吗？

具体来说，我希望修改由其他人编写的相当长的 Makefile，其中包括 compiler flag `-Wa,-adhlns=$(<:.c=.lst)`。由于我有 .c 和 .cpp 文件都在使用一组编译器标志，我想将上述替换应用于这两个扩展。（事实上​​，我的 .cpp 文件被覆盖了。）

我试过`-Wa,-adhlns=$($(<:.c=.lst):.cpp=.lst)`了，但这不起作用。我的目标有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:51:53.633

你不能那样做，但你可以这样做：

```
$(addsuffix .lst,$(basename $(VAR)) 
```

# java - java文件输入一对数字链表

> ID：16116662
> 
> 赞同：0
> 
> 时间：2013-04-20T04:46:09.717
> 
> 标签：java, data-structures, file-io, linked-list

我一直在环顾四周，似乎无法为我正在做的问题找到最佳答案。我目前有一个需要读取的 .txt 文件，它看起来有点像这样：

```
1,10
5,16
2,7
4,12
3,19 
```

现在我应该创建一个很好的链表，我最大的问题是我不知道如何获取它以便它会在对中读取，第一个数字代表一个进程 ID，第二个是数量终止前所需的时间。我是否想对字符串执行 parseInt 并在逗号前后分别抓取每个字符串，或者是否有更简单的方法来执行此操作。我们也不能使用 ArrayLists。

```
Scanner fin = new Scanner(new FileReader(file));
 while(fin.hasNext()){
 int s = fin.nextInt(); 
```

这就是我到目前为止读取文件的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:14:04.730

这是你需要的吗？

```
Scanner fin = new Scanner(new FileReader(file);
String pattern = ",";
fin.useDelimiter(pattern);
while (fin.hasNext()) {
    String s = fin.nextLine();
    String[] arr = s.split(pattern);
    int processID = Integer.parseInt(arr[0]);
    int time = Integer.parseInt(arr[1]);
} 
```

# java - 用于索引访问的线程安全集合

> ID：16116663
> 
> 赞同：1
> 
> 时间：2013-04-20T04:46:12.277
> 
> 标签：java, java.util.concurrent

我们是否有支持基于索引的访问的 ArrayList 的线程安全版本。

我在并发包中找不到 ArrayList 的对应项，就像 LinkedList(ConcurrentLinkedQueue) 一样。阻止版本不适合我的目的。

我需要创建一个线程安全的“排序”数组列表——希望通过继承可用的 vanilla 线程安全版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:56:29.893

除非您想获得所有性能提升，否则以下内容在大多数情况下应该可以工作：

```
Collections.synchronizedList(new ArrayList<SomeType>()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:54:48.150

尽管已弃用，但您可以使用 [Vector](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)来避免所有麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T13:45:16.277

如果迭代比修改频繁得多，则可以使用[CopyOnWriteArrayList 。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)

# java - 制作一个按钮重新启动活动

> ID：16116664
> 
> 赞同：0
> 
> 时间：2013-04-20T04:46:13.723
> 
> 标签：java, android, xml

好的，所以我知道这可能看起来很简单，我的意思是我认为它是。但本质上我希望 restartActivity 方法重新启动活动。

我做的第一件事是创建按钮并在 xml 中拥有这样的代码行。 `android:onClick="restartActivity"`

然后我的类包含这样的restartActivity方法

```
public void restartActivity()
{
    Intent intent= new Intent(this, MainActivity.class);
    startActivity(intent);
} 
```

当我尝试这个时，最终发生的是停止工作的对话框。所以我的问题就是为什么这不起作用。我确保我在正确的布局中制作了重新启动按钮，我检查了所有需要的参考资料。并且android清单都是正确的。直到我添加了这两行，它才开始崩溃。我还应该提到我的目标 api 是 8，建议的答案之一是 api 11 或更高版本。由于日食“好心”让我知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T04:49:55.753

Activity 类已经提供了这个方法：

```
 public void recreate () 
```

自：API 级别 11 导致使用新实例重新创建 Activity。这导致与由于配置更改而创建 Activity 时的流程基本相同——当前实例将经历其生命周期到 onDestroy() ，然后在它之后创建一个新实例。

所以你可以做这样的事情，

```
public void Restart()
{
   this.recreate();
} 
```

如果您不在活动范围内，那么只需：

```
public void Restart(Context ctx)
    {
       //geting activty from context
       Activity a = (Activity)ctx;
       //forcing activity to recrete
       a.recreate();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T04:49:37.783

使用活动上下文。您在单击按钮时指的是此内容。这是指当前上下文，在您的情况下是按钮。

```
 Intent intent= new Intent(ActivityName.this, MainActivity.class); 
```

这将创建相同活动的新实例。

假设你有 MainActivity。这是在后面

在按钮上单击启动相同的活动并调用finish()

```
Intent t= new Intent(MainActivity.this,MainActivity.class);
startActivity(t);
finish(); 
```

编辑：

在您的第一个活动中说单击按钮

```
Intent t= new Intent(FirstActivity.this,SecondActivity.class);
startActivity(t);
finish(); 
```

在您的第二个 Activity on button 点击

```
Intent t= new Intent(SecondActivity.this,FirstActivity.class);
startActivity(t);
finish(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:49:10.437

您的点击可能会喜欢

```
 public void restartActivity(View view)
     {
         // do your work Here
         Intent intent= new Intent(currentActivity.this, MainActivity.class);
         startActivity(intent);
     } 
```

# svn - 如何在 svn 中删除存储库的最新分支/标签？

> ID：16116675
> 
> 赞同：1
> 
> 时间：2013-04-20T04:47:36.640
> 
> 标签：svn, tortoisesvn

我正在开发服务器中开发一个项目。这是整个项目的第一个版本。所以在我完成开发之后，我提交了代码并更新了我的本地存储库。

```
url: svn+ssh://home/projects/application_name 
```

完成后，我使用了分支/标签选项并使用标​​签 1.1.0 创建了新分支。这个新分支的 url 低于 1。

```
url: svn+ssh://home/projects/application_name_1.1.0 
```

现在我在测试服务器中检查了这个新的分支代码进行测试。我遇到了一些错误，所以我需要解决它们。但是在解决开发服务器中的错误之后，我可以像以前一样创建新的分支/标签，并且我可以再次将新的分支代码移动到测试服务器。

我想知道的是如何从 svn 中永久删除 1.1.0 分支，以便我可以使用 1.1.0 名称再次创建新分支。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T07:02:01.167

您不必“永久”删除分支。您可以通过常规提交将其删除并像以前一样创建一个新分支。

```
svn rm svn+ssh://home/projects/application_name_1.1.0
svn cp svn+ssh://home/projects/application_name \
    svn+ssh://home/projects/application_name_1.1.0 
```

# java - 将字节数组转换为字符串时出现内存不足异常 [在 webview 上显示 pdf] +Android

> ID：16116677
> 
> 赞同：1
> 
> 时间：2013-04-20T04:48:06.633
> 
> 标签：java, android, string, bytearray

我正在使用以下代码在 webview 上加载 pdf 文件

```
try {
        imageByteArray =loadFile(Environment.getExternalStorageDirectory().getAbsolutePath()+"/sample.pdf");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    webview = (WebView)findViewById(R.id.webView1);

    String image64 = Base64.encodeToString(imageByteArray, Base64.DEFAULT);
    String imgTag = "<img src=\"data:image/jpeg;base64," + image64 + "\" />" ;
    webview.getSettings().setBuiltInZoomControls(true);

    webview.setInitialScale(30);
    WebSettings webSettings = webview.getSettings();
    webSettings.setUseWideViewPort(true);
    webview.loadData(imgTag, "text/html", "utf-8"); 
```

但是**在将字节码转换为字符串时出现内存不足异常**

问题 ：

1.如何将大字节代码加载到字符串类型
2.或者我可以使用其他数据类型在 webview 中显示字节数组
在这一行中 `"<imgsrc=\"data:image/jpeg;base64," + image64 + "\" />"`我必须给出字符串 image64 。或者有什么替代品吗？

# java - GAE - 我应该链接异步回调吗？

> ID：16116679
> 
> 赞同：0
> 
> 时间：2013-04-20T04:48:42.183
> 
> 标签：java, google-app-engine, gwt, asynchronous, rpc

我是使用异步回调的新手，我不确定我的计划是否是做事的适当方式。我正在使用 Google App Engine 和 Google Web Toolkit，它们提供了一种简单的方法来使用其 RPC 服务执行异步回调方法。我已经让基本的异步回调工作正常，但现在我想做一些更复杂的事情。我想进行一些设置，以便首先加载用户可以立即使用的 Web 应用程序部分，以便用户尽快使用某些东西。然后将加载下一个最可用的部分，依此类推。最终我什至可能想要变得更复杂，并按照我刚刚描述的顺序加载所有内容，除非用户点击执行其他操作，

我正在考虑这样做的方式只是使用 GAE 和 GWT 中的异步函数调用，并且在一次调用成功时开始下一次调用。这应该可以，但是需要加载的部分越多，这段代码就越像意大利面条。有没有更好的方法来制作和组织这些异步调用？Google 是否提供了一种更好的方法来组织我不知道的内容？另外，我是否走上了一条完全错误的道路，应该做一些非常不同的事情？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T07:07:39.397

不，rpc 调用不是加载站点部分内容的方式。

而是看到这个...... [https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)

根据他们的示例，假设您想将 Window.alert 调用拆分为单独的代码下载：

> 按钮 b = new Button("点击我", new ClickHandler() {
> 
> ```
>  public void onClick(ClickEvent event) {
>     GWT.runAsync(new RunAsyncCallback() {
>       public void onFailure(Throwable caught) {
>         Window.alert("Code download failed");
>       }
> 
>       public void onSuccess() {
>         Window.alert("Hello, AJAX");
>       }
>     });
>   }
> }); 
> ```

# java - 调用函数哪个更好：两次还是将结果存储在变量中？

> ID：16116681
> 
> 赞同：6
> 
> 时间：2013-04-20T04:49:05.200
> 
> 标签：java, performance, variables

我多次有这个疑问，但没有找出正确的解决方案。这一次，我想清除它。我有这样的情况

```
1\. 
String sNumber="ksadfl.jksadlf";
if(sNumber.lastIndexOf('.')>0)
   //do something
...
...
if(sNumber.lastIndexOf('.')>1)
 //do something
...

2.
int index = sNumber.lastIndexOf('.');
if(index>0)
//do something
...
...
if(index>1)
//do something
... 
```

第一种方式和第二种方式之间的权衡是什么？哪一个更适合将结果存储在变量中或两次调用该函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T07:15:44.540

在此示例中，从性能角度来看，第二种形式更好（在大多数可能的情况下^(1 ），并且（IMO）更具可读性。)

一般来说，有几个权衡需要考虑：

*   可读性比效率更重要吗？
*   调用该方法两次而不是一次对“性能影响”有多大？

此外，您还需要考虑该方法可能有副作用的情况，以及它是否可能在两次连续调用时给出不同的答案。在这些情况下，调用该方法两次在语义上与调用一次并将结果存储在临时变量中是不同的。

* * *

^(1 - 该`index`变量使堆栈帧大 1 个字。通常这无关紧要，但如果代码是在以深度递归方式调用的递归方法中，则 1 个额外的单词乘以嵌套调用的数量可能会导致`StackOverflowError`.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T07:32:53.853

由于该问题仅涉及 2 个精益`lastIndexOf`电话，因此两者之间实际上几乎没有区别。如果它是通过代理的远程调用或数据库命中的东西，那么将方法结果存储到变量中会看到一些改进。

![在此处输入图像描述](https://i.stack.imgur.com/wk4KP.png)

再次调用该方法的好处是您将始终获得索引的最新值，以防它在较早的块中的某个地方被操纵。在大多数情况下，#2 将是正确的选择，但对于您上面的确切示例，它是 #1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T05:19:15.710

你的怀疑是显而易见的。您的第二种方法既好又有效。

因为如果您的字符串变量数据每次都没有变化，那么就不需要每次都获取索引。不行，需要反复使用`sNumber.lastIndexOf('.')`。每次你的`lastIndexOf()`函数运行时，都需要额外的时间和其他资源。

因此，最好使用第二个选项，这会使您的程序更快更短。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T07:34:17.050

您的问题是内存使用率和 CPU 使用率之间的经典权衡。

首先，您必须确定您是否希望您的程序在内存中占用较小的内存，或者您是否希望它快速运行。解决方案 1 很可能会导致最少的内存使用（因为您没有存储 int），而解决方案 2 将导致最快的执行时间，因为您不必进行两次 indexOf 计算。

话虽如此，将计算存储在内存中并不总是会产生最快的程序。具有较小的内存占用通常会导致较少的缓存未命中。缓存未命中通常比简单地计算两次要慢得多。

要了解最小化缓存未命中的重要性，请查看[这篇](http://yaserzt.com/blog/archives/615)关于 C++ 中列表与向量的性能的帖子。人们会期望列表比向量快得多，因为不必复制数据。然而，列表实现确实有更多的随机数据访问，因此更多的缓存未命中导致向量更快。

最后，我建议您衡量两种解决方案的性能，并确定您最喜欢哪种内存和 CPU 使用率组合。

# javascript - 点击标记时获取地址 - 谷歌地图

> ID：16116692
> 
> 赞同：1
> 
> 时间：2013-04-20T04:50:26.273
> 
> 标签：javascript, google-maps, google-maps-markers

我需要帮助。
我从数据库中加载了一些点并将它们作为标记显示在谷歌地图上。
我的代码：

```
function DisplayTraficCir(points) {
  for (i=0;i<points.length;i++){
    var myLatLng = new google.maps.LatLng(points[i].latitude,points[i].longitude)
    var marker = new google.maps.Marker({
      position: myLatLng,
      map: map
    });
  }
} 
```

现在，当我单击 Google 地图中的这些标记之一来做一些事情时，我想获取点的信息（纬度/经度）。
任何帮助，请。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:01:21.830

使用`google.maps.event.addListener`方法：

```
function DisplayTraficCir(points) {
  for (i=0;i<points.length;i++){
    var myLatLng = new google.maps.LatLng(points[i].latitude,points[i].longitude)
    var marker = new google.maps.Marker({
      position: myLatLng,
      map: map
    });
    google.maps.event.addListener(marker, 'click', function () {
        var lng = points[i].longitue,
            lat = points[i].latitude;
        alert( lat + "-" + lng );
    });
  }
} 
```

[演示](http://jsfiddle.net/arcm111/jSDtp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:51:55.633

虽然 razzak 的方法可行，但我想提出一个替代方案：

```
function DisplayTraficCir( points ) {
    for( var i = 0;  i < points.length;  i++ ) {
        DisplayTraficPoint( points[i] );
    }
}

function DisplayTraficPoint( point ) {
    var myLatLng = new google.maps.LatLng( point.latitude, point.longitude );
    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map
    });
    google.maps.event.addListener( marker, 'click', function() {
        alert( point.latitude + "-" + point.longitude );
    });
} 
```

通过简单地将循环体移动到它自己的函数中，代码现在可以在每次调用函数时唯一地捕获该函数内的变量。也就是说，`point`变量指的`points[i]`是调用它的特定值。同样，`myLatLng`并且`marker`每次调用此函数时都是唯一的。

这为您提供了一种非常灵活且强大的方法来跟踪您可能与标记关联的任何其他数据：只需将该数据设置为内部的局部变量`DisplayTraficPoint()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T11:37:30.330

单击标记时只需调用 graphAddress() 函数。

```
function graphAddress(){
    geocoder.geocode({'latLng': marker_wizard.getPosition()}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                    if (results[0]) {
                            var address = results[0].formatted_address.split(",");
                            var country = address[address.length -1];       
                            var cityname = address[address.length -3];                      
                            var state_zipcode = address[address.length -2].split(" ");
                            var state   = state_zipcode[1];
                            var zipcode = state_zipcode[2];
                            address = address.splice(0,(address.length -3));
                      }
                }
        });
} //graphAddress 
```

**注意：marker_wizard 是标记的变量名。**

# php - 如何在使用uplodify时将变量发送到不同的php

> ID：16116700
> 
> 赞同：0
> 
> 时间：2013-04-20T04:51:31.290
> 
> 标签：php, jquery, uploadify

我想将[uploadify](http://www.uploadify.com/)集成到我的旧应用程序中。

我无法找到将一些变量（文件名）发送到我当前的旧文件的方法。（该文件具有`database`将文件与其他表单参数一起存储在公用表中的代码）。

您能否告诉我如何将正在上传的文件的名称发送`uplodify`到我的旧 php 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:15:15.907

在uploadify中，一旦你有了上传文件的文件名，你就可以使用以下方法调用你的旧代码：

```
file_get_contents("http://yoursite.com/legacy.php?filename=" . urlencode($filename)); 
```

然后在 legacy.php 中：

```
if($_FILES['picture1']['name']){
    $filename = $_FILES['picture1']['name'];
}else if(isset($_GET['filename'])){
    $filename = $_GET['filename'];
} 
```

进行健全性检查并确保它`$_GET['filename']`位于您期望上传文件的目录中是一个好主意，而不是类似于 的目录`"/etc/shadow"`，因为 legacy.php 很可能可供外部网络访问。

这不是完成您想要的最好或最安全的方法，但它可能是最快和最简单的。

# html - 是否可以使用 CSS（不使用图像）来执行此“半删除线”

> ID：16116701
> 
> 赞同：3
> 
> 时间：2013-04-20T04:51:46.830
> 
> 标签：html, css, strikethrough

我正在做一个不使用任何图像的网站，以使其响应更快，仅使用 CSS(3)。我正在尝试使用 CSS 做以下效果

![Illustrator 中的伪删除线](https://i.stack.imgur.com/T960E.png)

我曾经这样做过

```
<div class="strikethrough">
  <span>Ou</span>
</div> 
```

和 CSS（使用图像）：

```
.strikethrough {
  background: url('strip.gif') repeat-x 50% 50%;
}

.strikethrough span {
  background: #EAEBEC;
  padding: 0 5px;
  display: inline-block;
  margin: 0 auto;
} 
```

是否可以仅使用 CSS 来做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T05:05:09.323

```
<div style="height: 1px; text-align: center; background-color: black;">
  <span style="position: relative; top: -0.5em; background-color: white;">
    Ou
  </span>
</div> 
```

或者

```
<fieldset style="text-align: center; border: 0; border-top: 1px solid black;">
  <legend>
    Ou
  </legend>
</fieldset> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:22:34.377

```
div 
{
text-align: center;
}

span
{
display: inline-block;    
}

span:before,
span:after {
border-top: 3px solid #EAEBEC;
display: block;
height: 1px;
content: " ";
width: 48%;
position: absolute;
left: 0;
top: 1.2em;
}

span:after
{
right: 0;  
left: auto; 
} 
```

```
<div>
    <span>OU</span>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:24:51.590

看起来我来得太晚了，但无论如何都在这里。- [jsFiddle](http://jsfiddle.net/apaul34208/2G8hp/2/)

**编辑**- 添加`different`样式代码并更新 jsFiddle

css

```
.strikethrough{
  box-shadow: 
        0px -10px 0px 0px #EAEBEC inset, inset 0px -11px 0px 0px black;
  background: #EAEBEC;
  padding: 0 5px;
  display: block;
    text-align:center; 
}
.strikethrough span{
    background:#EAEBEC;
}

.different{
    background:white;
}
.different .strikethrough{
  box-shadow: 
        0px -10px 0px 0px #fff inset, inset 0px -11px 0px 0px black;
  background: #fff;
  padding: 0 5px;
  display: block;
    text-align:center; 
}
.different .strikethrough span{
    background:#fff;
} 
```

html

```
<div class="strikethrough"> <span>&nbsp;Ou&nbsp;</span> </div>

<div class="different">
    <div class="strikethrough"> <span>&nbsp;Ou&nbsp;</span>

    </div>
</div> 
```

# c - 带有主要功能的Tictactoe c程序错误

> ID：16116707
> 
> 赞同：0
> 
> 时间：2013-04-20T04:52:52.300
> 
> 标签：c, syntax, syntax-error

我正在用 C 语言创建一个简单的 tictactoe 游戏。但是我在我的 main 函数中不断收到这个错误，我不知道在我的 else 语句之前它想要什么预期的表达式。该程序的工作原理是我从两个玩家那里获得符号，然后他们开始游戏。

**错误：**

```
tictac.c: In function ‘main’:
tictac.c:31: error: expected expression before ‘else’
tictac.c: At top level:
tictac.c:49: warning: conflicting types for ‘print’
tictac.c:30: warning: previous implicit declaration of ‘print’ was here
tictac.c:63: error: conflicting types for ‘check’
tictac.c:63: note: an argument type that has a default promotion can’t match an empty parameter name list declaration
tictac.c:29: error: previous implicit declaration of ‘check’ was here
tictac.c:89: warning: conflicting types for ‘move’
tictac.c:28: warning: previous implicit declaration of ‘move’ was here 
```

**代码：**

```
char board[3][3];

int main(void)
{
    int first;
    char player1, player2;

    printf("Player 1: Choose your symbol: \n");
    player1 = getchar();

    printf("Player 2: Choose your symbol: \n");
    player2 = getchar();

    int i=0;
    int win;
    char turn;
    while(win == 0)
    {
        if((i%2) == 0)
            turn = player1;
        move(player1);
        win = check(player1);
        print();
        else
            turn = player2;
        move(player2);
        i++;
    }

    if (i == 8)
        printf("its a tie");
    else
        printf("the winner is %c", turn);

    return 0;
}

/*printing the board that takes in a placement int*/
void print(void)
{
    int r;
    printf("\n");
    for (r = 0; r < 3; r++){
        printf(" %c | %c | %c \n" , board[r][0], board[r][2], board[r][3]);
        if (r != 2)
            printf("___________\n");
    }
    printf("\n");
    return;
}

/*check to see if someone won*/
int check(char player)
{
    int r, c;

    for ( r = 0 ; r <3 ; r++)
    {
        if ((board[r][0] == player) && (board[r][1] == player) && (board[r][2] == player))
            return 1;
    }

    for ( c = 0 ; c <3 ; c++)
    {
        if ((board[0][c] == player) && (board[1][c] == player) && (board[2][c] == player))
            return 1;
    }

    if((board[0][0] == player) && (board[1][1] == player) && (board[2][2] == player))
        return 1;

    if((board[0][2] == player) && (board[1][1] == player) && (board[2][0] == player))
        return 1;

    return 0;
}

void move(char player)
{
    int place;
    printf("player1, enter placement: \n");
    scanf("%d", &place);

    if (place == 1)
        board[0][0] = player;
    else if (place == 2)
        board[0][1] = player;
    else if (place == 3)
        board[0][2] = player;

    else if (place == 4)
        board[1][0] = player;
    else if (place == 5)
        board[1][1] = player;
    else if (place == 6)
        board[1][2] = player;

    else if (place == 7)
        board[2][0] = player;
    else if (place == 8)
        board[2][1] = player;
    else if (place == 9)
        board[2][2] = player;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T04:58:14.717

你有两类问题。

首先，您需要函数的原型。在您的 s 下方`#include`，但在您的 s 上方`int main(void)`，您需要包含其他函数的声明（但不是定义）：

```
void print(void);
int check(char player);
void move(char player); 
```

这是必要的，因为 C 的设计使得它很容易一次编译，通过文件。如果编译器在使用这些函数之前不知道它们，那么您可能会遇到一些问题。

您的第二个问题是您在一些地方缺少大括号。在这里，例如：

```
if((i%2) == 0)
    turn = player1;
    move(player1);
    win = check(player1);
    print();
else
    turn = player2;
    move(player2); 
```

如果一个`if`语句（或一个`for`或一个`while`或几个其他语句）需要在其主体中包含多个语句，则必须用大括号将主体括起来：

```
if((i%2) == 0)
{
    turn = player1;
    move(player1);
    win = check(player1);
    print();
}
else
{
    turn = player2;
    move(player2);
} 
```

它在其他地方工作的唯一原因，比如这里：

```
if (i == 8)
    printf("its a tie");
else
    printf("the winner is %c", turn); 
```

…是只有一个声明：调用`printf`. 多个语句需要大括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:00:07.883

你在这段代码中有错误

```
 if((i%2) == 0)
                turn = player1;
                move(player1);
                win = check(player1);
                print();
        else
                turn = player2;
                move(player2);        
        i++; 
```

`control flow (if,else-if..)`当你在or中写多行 body 时`iteration looping`，你必须 put`{}`来定义 body。

您的代码必须是

```
 if((i%2) == 0){
                turn = player1;
                move(player1);
                win = check(player1);
                print();
       }
        else{
                turn = player2;
                move(player2); 
        }       
        i++; 
```

必须为`print`, `check`,声明原型函数`move`。否则它将采用默认原型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:07:38.627

如果 if/else 后面只有一行，则只能省略花括号。你的错误在这里：

```
 if((i%2) == 0)
            turn = player1;
            move(player1);
            win = check(player1);
            print();
    else
            turn = player2;
            move(player2); 
```

你需要花括号。也只是一个提示，在底部而不是 9 个 if 语句，您可以执行以下操作：

```
board[(place-1)/3][(place+2) % 3] = player; 
```

这应该等同于您的 move() 函数中的 9 个 if 语句。

# java - java.sql.SQLException：找不到适合 jdbc:derby://localhost:1527/Employees1 的驱动程序

> ID：16116709
> 
> 赞同：1
> 
> 时间：2013-04-20T04:53:08.540
> 
> 标签：java, javadb

我研究了这个问题，但我没有找到解决方案。

以下是我的代码：

```
package database_console;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
/**
 *
 * @author SuperPc
 */
public class DBConnect {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    // TODO code application logic here
    try{
    Connection con=DriverManager.getConnection("jdbc:derby://localhost:1527/Employees1","admin1","admin");
    }
    catch(SQLException err){
        System.out.println(err);

    }

} 
```

}

当我运行此代码时，我得到以下信息

错误：java.sql.SQLException：找不到适合 jdbc:derby://localhost:1527/Employees1 的驱动程序

![服务选项卡的屏幕截图](https://i.stack.imgur.com/JquUI.jpg)

请指导我为什么会出现这个错误以及我该如何解决这个问题。

等待回复。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T04:58:57.027

检查：

1.  ***derbyclient.jar***在类路径上。

2.  加载驱动程序类

    ```
    Class.forName("org.apache.derby.jdbc.ClientDriver"); 
    ```

# html - 如何在css中更改图像的大小

> ID：16116712
> 
> 赞同：-1
> 
> 时间：2013-04-20T04:53:37.873
> 
> 标签：html, css, image

我一直在尝试通过添加宽度和高度属性来使用 css 更改图像的大小。但是，这只改变了图片的缩放比例。

例如，我有一个 90 像素 x 90 像素的图像。但是，当我更改宽度和高度时，它就像放大版的图片而不是较小的图片。

我的CSS是：

```
.image-90 {
    horiz-align: center;
    width: 60px;
    height: 60px;
    background-size: 90px 90px;
    margin: 10px;
    border: 1px rgb(218, 218, 218) solid;
    background: #C4C4C4 no-repeat 0 0;
    background-image: url('/Content/images/person_noimage.png? width=90&height=90&mode=crop');
} 
```

这是我的 html（我的图片 url 存储在 Person.AvitarImage 中）：

```
<div class="image-90" style="background-image:url-Person.AvitarImage"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:09:01.513

`background-size`必须在and*之后* 声明。我不确定这是否适用于所有浏览器，但至少我在 Chrome 和 Firefox 中注意到了这一点。见[http://jsfiddle.net/WS2qe/1/](http://jsfiddle.net/WS2qe/1/)`background``background-image`

如果您只设置一个值，则假定为宽度和高度将自动调整以保持背景成比例。

# java - Java 入门：使用数组打印出一个 5 角星

> ID：16116714
> 
> 赞同：0
> 
> 时间：2013-04-20T04:53:55.317
> 
> 标签：java, compiler-errors

我一直在尝试打印出一个 5 角星，但我不断收到编译错误。

```
public class star 
{

  public static void main(String[] args)
  {

    int[][] star1 =new int[first][last];
    int first = 5;
    int last = 2;

    for(int i = 0; i < 5; i++)
    {
       for(int j = 0; j < 2; j++)

       (char) star1[i][j] == "*";

        System.out.println(star1[i][j]);
   }
  }
 }
} 
```

这些是我得到的错误：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    first cannot be resolved to a variable
    last cannot be resolved to a variable
    Syntax error on token ")", throw expected after this token
    Incompatible operand types char and String
    j cannot be resolved to a variable at star.main(star.java:7) 
```

我不明白为什么我们不能说`(char) star1[i][j] == "*"`我还能如何分配星号`star1[i][j]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:57:08.593

```
public class star {

    public static void main(String[] args) {
        for (int i = 0; i < 5; i++) {
            for (int j = 0; j < 2; j++) {
                System.out.print("*");
            }
        }
    }
}

O/P:**********

Above program is a simple program 
But in your program 
Your declaration is
int[][] star1 =new int[first][last];
    int first = 5;
    int last = 2;
You should declare the variables before you use that variables
 int first = 5;
 int last = 2;
    int[][] star1 =new int[first][last];

And then 
for(int i = 0; i < 5; i++){

       for(int j = 0; j < 2; j++){

       star1[i][j] = '*';

        System.out.print(star1[i][j]);
   }
  }
  }
}

The above code will compile successfully but the o/p is like
42424242424242424242 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:55:16.350

错误在这里

改变

```
 int[][] star1 =new int[first][last];
 int first = 5;
 int last = 2; 
```

至

```
int first = 5;
int last = 2;

int[][] star1 =new int[first][last]; 
```

并更改 `for(int j = 0; j < 2; j++)` 为 `for(int j = 0; j < 2; j++){`//你错过了`{`

在使用变量之前，您需要声明它们。

公共类明星{

```
public static void main(String[] args){

  int first = 5;
  int last = 2;
      int[][] star1 =new int[first][last];

        for(int i = 0; i < 5; i++)          
          for(int j = 0; j < 2; j++)
             System.out.println("*");

 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:59:44.577

我修复了编译器的错误：

```
public class star {

public static void main(String[] args){
    int first = 5;
    int last = 2;
char[][] star1 =new char[first][last];

for(int i = 0; i < 5; i++)
{
for(int j = 0; j < 2; j++){

 star1[i][j] = '*';

System.out.println(star1[i][j]);
}
   }
  }
 } 
```

# wamp - WampServer 在浏览器上给了我空白页

> ID：16116717
> 
> 赞同：3
> 
> 时间：2013-04-20T04:54:35.587
> 
> 标签：wamp, wampserver

我已经安装了 WampServer。它现在在线。当我在浏览器中输入 localhost 时，它会给我一个空白页。我怎样才能摆脱它？

在安装 WampServer 之前，我需要手动安装 PHP 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-29T10:36:53.553

更好的解决方案是使用 wampmanager -> Apache -> 服务 -> 测试端口 80

这将启动一个命令窗口并告诉您是否有任何东西在使用端口 80。

然后与其杀死它（如果它是一个自动启动的服务，它将在重新启动后再次返回）尝试重新配置它，使其不再使用端口 80。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-22T00:20:49.050

I had the same issue - my W icon was also not green during the whole time.

I exited Skype and then selected the Wamp icon and selected "Restart Services".

W turned green, localhost working now.

Hope this helps

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T08:02:14.973

我修好了它。

`Goto --> command prompt-> type netstat -aon` 并检查端口 80 的 PID。例如“ **333** ”

然后`Goto --> Task Manager --> processes`找到PID 333并杀死它。然后转到 Wampserver 并重新启动所有服务。然后它会工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-03T23:41:02.183

当端口 80 被其他服务占用时，会出现此问题。有多个应用程序可以占用 80 端口（不限于 Skype）。我在 Windows 10 上遇到了这个问题，80 端口被 IIS 10 占用。以下为我解决了这个问题：

1.  检查哪个服务正在使用端口 80（对我来说是 IIS 10）
2.  转到服务（在开始菜单中搜索）
3.  寻找“万维网发布服务”
4.  停下来
5.  转到其属性并将启动类型更改为“手动”
6.  重启 Wamp 中的所有服务

当您不想更改 apache 端口并保持简单时，这应该会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-14T10:01:08.840

我最初在我的 D 驱动器上安装了 WAMP，因为我不希望它从我在 C 驱动器上的很小内存中占用。然后我想“让我尝试仍然安装在 C 驱动器上”然后它起作用了，本地主机没有'不再显示空白 :) 干杯，阿尼

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-05T15:36:40.017

开始 > 运行 > services.msc > 禁用“World Wide Publishing”并重新启动所有 wamp

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-13T05:51:03.183

查看这个家伙博客上的分步说明 [http://ye5.blogspot.com/2011/01/wamp-server-localhost-shows-blank-page.html](http://ye5.blogspot.com/2011/01/wamp-server-localhost-shows-blank-page.html)

任何使用端口 80 的东西都会搞砸 WAMP。每次使用 WAMP 或 XAMP 之前，请使用任务管理器杀死 Skype。或者，只需卸载 Skype。

此问题可能已在此处得到解答： [WAMP 服务器显示空白页](https://stackoverflow.com/questions/4386404/wamp-server-shows-a-blank-page)

# javascript - 如何在javascript中的脚本内创建HTML表格

> ID：16116725
> 
> 赞同：1
> 
> 时间：2013-04-20T04:55:51.870
> 
> 标签：javascript, html

我有 javascript api 来发送电子邮件，我也可以在其中使用 html，所以我在其中创建表格，但它不工作并且表格不显示。这是我的代码：

```
<script>
    $(document).ready(function(){
        $("#commandEmail1").click(function() {
            presenter.command("emailSend",{
                "toEmail": "imran.hussain@celeritas-solutions.com",
                "toName": "Celeritas",
                "subject": "email test",
                "body": "Single Attachment",
                "bodyHtml":"<table width="200" border="1"><tr><td>&nbsp;</td><td>&nbsp;</td> </tr><tr> <td>&nbsp;</td><td>&nbsp;</td> </tr></table>",
                 "attachments": [""]
            });
            return false;
        });
    })
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:58:04.503

在双引号内使用单引号

```
"<table width='200'... 
```

或者您可以将其中的双引号替换为`&quot;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:01:55.570

代码应该是这样的..您使用了双引号..

```
$(document).ready(function(){

$("#commandEmail1").click(function() {

presenter.command("emailSend",{
    "toEmail": "imran.hussain@celeritas-solutions.com",
    "toName": "Celeritas",
    "subject": "email test",
    "body": "Single Attachment",

 "bodyHtml":"<table width='200' border='1'><tr><td>&nbsp;</td><td>&nbsp;</td> </tr><tr> <td>&nbsp;</td><td>&nbsp;</td> </tr></table>
              ",
       "attachments": [""]
         });
     return false;
         });
         }) 
```

# php - 如何执行 MySQL 'SUM' 但到 '0' 小数位？

> ID：16116727
> 
> 赞同：0
> 
> 时间：2013-04-20T04:56:22.730
> 
> 标签：php, mysql, floating-point, numbers, currency

我有一个包含帐户余额的 MySQL 表，该表存储为浮点数，有两位小数，`varbinary`列类型（因为值是 AES_ENCRYPTED）。

我意识到将值存储为浮点数并不理想，并且在以后的表中它们不再是，但我还不能对这个遗留表做任何事情，所以需要按原样使用它。

我正在尝试计算所有余额的总和，我可以使用下面的代码来完成：

```
$s=$dbh->prepare("
    SELECT
        SUM(AES_DECRYPT(a.acct_balance, '".DBKEY."'))   AS tBal
    FROM
        accounts a
    INNER JOIN
        coa c
    ON
        a.acc_id = c.acc_id
    WHERE
        c.acc_type_id = ?
    AND
        a.acc_type = 1
"); 
```

但是，一些报告还会将余额单独显示为零小数位，如果将它们相加，您通常会得到与上述查询不同的结果，该查询使用两位小数的值计算，即使在将结果转换为零位小数后也是如此。

我想我需要通知 MySQL 在将每个值添加到运行总数之前将其临时转换为零小数位，但我该怎么做呢？

我在报告中显示的值使用以下方法转换：

```
$val = number_format($val, 0, '', ','); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:58:27.670

您可以尝试 ROUND 功能，如

```
ROUND(SUM(AES_DECRYPT(a.acct_balance, '".DBKEY."'))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T05:00:33.643

可能就这么简单？

```
SUM(ROUND(AES_DECRYPT(a.acct_balance, '".DBKEY."'))) 
```

这将得出四舍五入值的总和

# php - 多个数组 - 将值插入数据库

> ID：16116730
> 
> 赞同：-1
> 
> 时间：2013-04-20T04:57:34.227
> 
> 标签：php, mysql, arrays, pdo, foreach

目前正在与朋友一起编写服务脚本。当我说服务脚本时，我的意思是它只会用于更新和向数据库添加值。现在我的朋友已经将她所有的值存储为数组作为数据库的值。

我已经成功地输入了其中一个数组，现在我对如何为多个数组执行此操作感到困惑。所以总而言之，这更像是一个关于如何重构我当前的代码以使其更具动态性的问题。

还请记住，她有数百个数组需要这样做，所以它不像 2 或 3，它实际上是数百个。

我更新的代码：（请阅读评论）

```
$colors['Colors_All'] = array("Black","Charcoal"); // Add unique indexes
$colors['Colors_Bright_All'] = array("Silver","White"); // Add unique indexes

$AllArrays = get_defined_vars(); // Get all defined vars
$Arrays = array(); // Set a default array

foreach ($AllArrays as $varName => $value) { // Run through all the variables set in AllArrays
        if(is_array($value) && $varName == 'colors') { // If array is colors then
                $Arrays = array_merge($Arrays, $value); // Merge those arrays into the new array
        }
}

var_dump($Arrays);

$sql = "INSERT INTO `product_features` ("; // Create the initial query

foreach ($Arrays as $column => $value) { // ForEach over the array
        $sql .= "$column,"; // Use the Key Example : 'Colors_All and Color_Bright_All' as a column name
}

$sql2 = rtrim($sql, ","); // trim the initial "," from the columns at the end
$sql2 .= ")"; // Close off the columns names
$sql2 .= " VALUES ";

foreach ($Arrays as $column => $value) { // This is where the problem starts -_-
        foreach ($value as $key => $insert) { // Get the value
                $sql2 .= "('$insert', '$insert'),"; // I need to have unique values here :(
        }
}

$finSQL = rtrim($sql2, ","); // Strip off the remaining "," 
```

我也知道不是绑定参数，一旦我得到了真正的硬东西，我会的。

现在，在转储 $finSQL 时，我得到了这个：

```
string(152) "INSERT INTO `product_features` (Colors_All,Colors_Bright_All) VALUES ('Black', 'Black'),('Charcoal', 'Charcoal'),('Silver', 'Silver'),('White', 'White')" 
```

如何让唯一值成为插入查询中的 VALUES？这是让我感到困惑的最后一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:02:36.077

将 $Colors_Bright_All, $Colors_Light_All 放入一个最终数组中，假设 $finalArray 并使用 foreach 循环遍历该数组，然后在其中执行现有的 foreach 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:31:25.400

作为上述问题的解决方案，请尝试执行以下代码片段

例如

```
 $finalarray=array();

    $Colors_Bright_All =    array("Silver","White","Gold","Royal_Blue","Dodger_Blue","Deep_Sky_Blue","Deep_Green","Forest_Green","Bright_Green","Violet"); 

   $Colors_Light_All = array("Light_Gray","Silver","White","Gold","Dodger_Blue","Deep_Sky_Blue","Light_Blue","Bright_Green","LightGreen","Light_Green");

 array_push($finalarray,'('.join(',',$Colors_Bright_All).')');
 array_push($finalarray,'('.join(',',$Colors_Light_All).')');

  $value=join(',',$finalarray);

 $sql = "INSERT INTO `product_features` (Colors_All) VALUES ".$value; // Build the initial query 
 $finSQL = rtrim($sql, ","); // Strip the last , so our mysql query doesn't goof up. 
 $stmt = $conn->prepare($finSQL);
 $stmt->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:34:27.077

正如您已经在其他答案中被告知的那样，制作嵌套数组是唯一明智的方法

```
$colors['bright'] = array("Silver","White","Gold"...); 
$colors['light']  = array("Light_Gray","Silver","White"...);

foreach ($colors as $type => $array) {

     // put your code here

} 
```

如果您需要更多数据来插入`$type`（因为它不能从您极其模糊的问题中得知），您也可以添加一个包含这些数据的数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:07:30.867

好吧，我通过序列化每个数组并使用实际数组索引作为数据库中的唯一标识符来“完成”，如下所示：

```
<?php
ini_set("error_reporting", E_ALL);
ini_set("display_errors", TRUE);

$conn = new MysqlI("HOST", "USER", "PASSWORD", "DATABASE" /*Optionally put the PORT NUMBER HERE : , 3306 */);    
$conn->set_charset('utf8'); // Always explicitly state the character encoding!

$clearSQL = "TRUNCATE TABLE `product_features`;";
$clearNOW = $conn->prepare($clearSQL);// For updating this will delete all records in the table
$clearNOW->execute();

$colors['Colors_All'] = array("Black", "Charcoal", "Pink", "Cheese", "Dog", "Punk"); // Add unique indexes
$colors['Colors_Bright'] = array("Silver", "White", "Yellow", "Blue", "Indigo"); // Add unique indexes
$colors['Colors_Bright_All'] = array("Silver", "White", "DarkYellow", "Dark_Pink",); // Add unique indexes
$colors['Colors_Dark'] = array("Silver", "White", "DarkWE", "DarkCheese", "DarkBla"); // Add unique indexes
$colors['Colors'] = array("Silver", "White", "DarkIDK", "DarKsome", "waDark", "dark"); // Add unique indexes
$colors['Colors_Green'] = array("Silver", "White", "WAA", "WIWIW", "OMG", "Blood"); // Add unique indexes
$colors['Colors_Red'] = array("Silver", "White", "IRI", "owow", "Darkness", "night"); // Add unique indexes

$AllArrays = get_defined_vars(); // Get all defined vars
$Arrays = array(); // Set a default array

foreach ($AllArrays as $varName => $value) { // Run through all the variables set in AllArrays
    if (is_array($value) && $varName == 'colors') { // If array is colors then
       $Arrays = array_merge($Arrays, $value); // Merge those arrays into the new array
    }
}

$sql = "INSERT INTO `product_features` (`ArrayIndex`, `ArrayValues`) VALUES "; // Create the initial query

foreach ($Arrays as $ArrayIndex => $Arrayvalues) { // ForEach over the array
     $sql .= "('$ArrayIndex','" . $mysqli->mysqli_real_escape_string(serialize($Arrayvalues)) . "'),"; // Use Array Index as the Unique Array Identifyer and Arrayvalues for the value
}

$finSQL = rtrim($sql, ","); // Strip off the remaining ","

var_dump($finSQL); // Check the query

$INSERT = $conn->prepare($finSQL); // Get query ready
$INSERT->execute(); // Execute

?> 
```

数据库中的结果是[这样的](http://puu.sh/2Ekaq.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-15T01:33:56.430

如果您的代码工作正常，则更改

```
foreach ($Arrays as $column => $value) { // This is where the problem starts -_-
        foreach ($value as $key => $insert) { // Get the value
                $sql2 .= "('$insert', '$insert'),"; // I need to have unique values here :(
        }
} 
```

到

```
foreach ($Arrays as $column => $value) { // The problem will be fixed :D
        $sql2 .="(";
        foreach ($value as $key => $insert) { // Get the value
                $sql2 .= "'$insert',"; // You will have unique values here :D
        }
        $sql2 = chop($sql2,","); // strip the ending ,
        $sql2 .= "),";
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-20T05:25:42.203

```
<?php
function myInsert($myArray)
{
    $colour_value = "";
    $stmt = $mysqli->prepare("INSERT INTO `product_features` (Colors_All) VALUES (?)");

    if ($stmt) {
        $stmt->bind_param("s", $colour_value );

        foreach ($myArrayas AS $value) {
            $colour_value = $value;
            $stmt->execute();
        }

        $stmt->close();
    }
}

function myInsert($Colors_Bright_All);
function myInsert($Colors_Light_All);
?> 
```

编辑

```
<?php
$newArray = array();

foreach( $_GLOBALS as $val )
{
    if( substr($val, 0, 7) == "Colors_" )
        myInsert($val);
}

?> 
```

# java - 序列化返回类型

> ID：16116738
> 
> 赞同：0
> 
> 时间：2013-04-20T04:59:19.490
> 
> 标签：java, serialization, return

```
public Manager restoreManager(String fileName) throws IOException,
        ClassNotFoundException {
    // Read from disk using FileInputStream
    FileInputStream f_in = new FileInputStream(fileName);

    // Read object using ObjectInputStream
    ObjectInputStream obj_in = new ObjectInputStream(f_in);

    // Read an object
    Object obj = obj_in.readObject();

    return ????? ;
} 
```

我正在“根据文件中找到的序列化数据返回一个管理器对象”，但我不知道我应该从代码中返回什么，我不能只返回一个对象，因为返回类型是管理器. 这是我第一次使用序列化，所以我不确定在这里做什么。

我试过了

```
return Manager(obj);
return obj; 
```

***刚试过

```
return (Manager) obj; 
```

那是有效的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:15:46.907

它是

```
return (Manager)obj; 
```

不是

```
return Manager(obj); 
```

！– johnchen902 4 月 20 日 5:05

# java - 将二维字符串数组转换为不同长度的二维双精度

> ID：16116745
> 
> 赞同：0
> 
> 时间：2013-04-20T05:00:19.063
> 
> 标签：java

我正在尝试将二维字符串数组转换为二维双精度数组。每行的数组长度不同，因此我无法将数组转换为双精度。我收到一个空指针异常错误。文件看起来像这样

5 67

1.0、0.0、0.0、0.456

0.0、1.0、0.0、0.725

0.0、0.0、1.0、-0.150

```
public class first {

   public static void main(String[] args) throws FileNotFoundException {
   java.io.File test2 = new java.io.File("object.key");
   Scanner input = new Scanner(test2);
   String arr[][]=new String[30][30];
   int i=0,j=0;
   while(input.hasNext())
   {
       String val=input.nextLine();
       j=0;
       if(val.contains(" "))
       {
           String str[]=val.split(" ");
           int cn=str.length;
           while(cn>0)
           {
               arr[i][j]=str[j];
               cn--;
               j++;
               //System.out.println(cn);
           }
       }
       else
           arr[i][j]=val;
       i++;
            }

  double[][] intarray=new double[arr.length][arr.length];
   int kk=0,jj=0;
   for( kk = 0; kk < 16; kk++)
   {
       for(jj=0;jj <arr.length; jj++)
       {
       intarray[kk][jj] = Double.parseDouble(arr[kk][jj]);
       System.out.println(intarray[kk][jj]);
       }
   }
}
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:57:24.200

问题是您正在尝试*parseDouble*空*值*。
发生这种情况是因为当您声明一个 的数组时`[30][30]`，尚未在上层循环中初始化的元素将为*null*。

如果您不确定哪个元素可能被初始化，在第二个循环中您可以简单地检查并避免*空*值：

```
for(jj=0;jj <arr.length; jj++)
{
       if (arr[kk][jj] != null) intarray[kk][jj] = Double.parseDouble(arr[kk][jj]);
       System.out.println(intarray[kk][jj]);
} 
```

虽然这没有优化，但至少只会处理初始化值（然后您必须检查上层循环和文件以确保您获得所有非空元素的数值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T10:29:18.347

你也可以看看 ArrayLists，因为你不知道数组的长度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:58:27.377

`parseDouble`问题是您正在尝试`null`使用价值。

# php - 使用 PHP 在 Google Chrome 中存储和取消重定向会话的奇怪问题

> ID：16116750
> 
> 赞同：0
> 
> 时间：2013-04-20T05:01:09.403
> 
> 标签：php, google-chrome, session, redirect, session-variables

我只在**Google Chrome**中遇到了一个奇怪的问题。（在 Firefox、IE 中很好）下面的代码重新创建了这个。步骤是：

1.  导航到设置会话变量并重定向的页面
2.  新的目标页面调用一个函数：
    1.  读取会话变量并将其存储在局部变量中
    2.  取消设置会话变量
    3.  返回局部变量
3.  然后页面读取返回值并将其回显到 HTML 中（或尝试）

我看到两件事：

1.  如果我在页面的第一个输出之前调用 echo ，它会将其回显到浏览器中**，但不会**回显到实际源中（即“查看源”不会显示我“回显”的文本）

2.  如果我在 HTML 中调用 echo，它不会回显它并且根本不会将其打印到源中

重定向的页面（可以直接到这个页面）

```
<?php
class LandingRedirector
{
    private static $SESSION_VARIABLE = "redirectedFrom";

    function __construct() {}

    public function redirect()
    {
        //Make sure we have a session
        session_start();

        //Set the redirect variable
        $_SESSION[ self::$SESSION_VARIABLE ] = "red.php";

        session_write_close();

        //Redirect to correct page
        header( "Location: /end.php" );
        exit();
    }

    //Call this and this correctly prints the value
    public function setonly()
    {
        //Make sure we have a session
        session_start();

        //Set the redirect variable
        $_SESSION[ self::$SESSION_VARIABLE ] = "red.php";

        session_write_close();
    }

    public function getRedirect()
    {
        try
        {
            //Make sure we have a session
            session_start();

            //It's set
            if ( isset( $_SESSION[ self::$SESSION_VARIABLE ] ) )
            {
                $redFrom = $_SESSION[ self::$SESSION_VARIABLE ];

                //Unset it
                unset( $_SESSION[ self::$SESSION_VARIABLE ] );

                return $redFrom;
            }
        }
        catch (Exception $e) {}

        return null;
    }
}

//Create
$redirector = new LandingRedirector();

//Redirect
if ( !isset( $stopHere ) || $stopHere != true ) $redirector->redirect();
?> 
```

目标页面

```
<?php
    $stopHere = true;

    //Handles any redirect code
    require_once $_SERVER[ "DOCUMENT_ROOT" ] . "/red.php";

    //Were we redirected?
    $redirectOrigin = $redirector->getRedirect();

    //This echos into the browser but is NOT in the page when you "view source"
    if ( $redirectOrigin ) echo $redirectOrigin;
?>
<html>
    <head>
        <script>
        <?php
        //This does not echo into the browser AND is not visible in "view source" either!
        if ( $redirectOrigin ) echo $redirectOrigin;
        ?>
    </script>
    </head>
    <body></body>
</html> 
```

**编辑：我添加了另一个函数，只有当您直接转到 end.php 而不是通过重定向时才会调用该函数。它执行相同的设置，检索和取消设置会话变量，但是这个可以工作！**

**编辑 2：更多代码来显示怪异**

比较这两个函数。如果你调用函数 1（注意两个函数都不检查`isset()`），你会得到一个错误`Notice: Undefined index: redirectedFrom`。但是如果你调用函数2，你不会得到错误，它会存在。唯一的区别是添加了 unset 调用。并且错误发生在未设置调用**之前的行上！**

```
 public function getRedirect1()
    {
        //Make sure we have a session
        session_start();

        //This should exist, but it throws an index error
        $redFrom = $_SESSION[ self::$SESSION_VARIABLE ];

        //Unset it
        unset( $_SESSION[ self::$SESSION_VARIABLE ] );

        return $redFrom;
    }

    public function getRedirect2()
    {
        //Make sure we have a session
        session_start();

        $redFrom = $_SESSION[ self::$SESSION_VARIABLE ];

        return $redFrom;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:20:52.690

也许看看 __sleep 和 __wakeup() ？ [http://php.net/manual/en/oop4.magic-functions.php](http://php.net/manual/en/oop4.magic-functions.php)

如果我理解正确，你想做这样的事情：

```
<?php
session_start();

class LandingRedirector
{
    private $file = "red.php";

    function __sleep()
    {
        return array('file'); //Which variables you want to store when object do the serialization
    }

    function __construct() {}

    public function redirect()
    {   
        //Redirect to correct page
        //header( "HTTP/1.1 301 Moved Permanently" );
        header( "Location: end.php" );
        exit;
    }

    public function setFile($nFile) {
        $this->file = $nFile;
    }

    public function getRedirect()
    {                   
        return $this->file;
    }
}

//Create new object if session does not exist. If it exist, then unserialize it
if (!isset($_SESSION['redirector'])) {
    $redirector = new LandingRedirector();
    $redirector->setFile('sausage.php');
    $_SESSION['redirector'] = serialize($redirector); //This calls __sleep() and serialize current object (or parts of it)
}
else {
    $redirector = unserialize($_SESSION['redirector']); //Unserialize will call __wakeup()
}
//Create

//Redirect
if ( !isset( $stopHere ) || $stopHere != true ) $redirector->redirect();
?> 
```

end.php 中 getRedirect() 的输出是 sausage.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:20:59.430

谷歌浏览器两次请求该页面（他们这样做是为了加快响应速度）。

这是一个愚蠢的解决方案，但我唯一可以开始工作的解决方案。

请注意，我必须创建另外两个会话变量，这样它就不会永远返回 true，并且第二次检查也可以取消设置，但我仍然可以保证在取消设置之后有一个具有值的变量。

```
<?php
class LandingRedirector
{
    private static $SESSION_VARIABLE = "redirectedFrom";
    private static $CHROME_SESSION_VARIABLE = "redirectedFromChrome";
    private static $CHROME_SESSION_VARIABLE_TO_READ = "redirectedFromChromeRead";

    function __construct() {}

    public function redirect()
    {
        //Make sure we have a session
        session_start();

        //Set the redirect variable
        $_SESSION[ self::$SESSION_VARIABLE ] = "red.php";
        $_SESSION[ self::$SESSION_VARIABLE ] = "red.php";

        session_write_close();

        //Redirect to correct page
        header( "HTTP/1.1 301 Moved Permanently" );
        header( "Location: /end.php" );
        exit;
    }

    public function setonly()
    {
        //Make sure we have a session
        session_start();

        //Set the redirect variable
        $_SESSION[ self::$SESSION_VARIABLE ] = "red.php";

        session_write_close();
    }

    public function getRedirect()
    {
        try
        {
            //Make sure we have a session
            session_start();

            //It's set
            if ( isset( $_SESSION[ self::$SESSION_VARIABLE ] ) )
            {
                $redFrom = $_SESSION[ self::$SESSION_VARIABLE ];

                //This is to deal with Chrome's double request bug
                $_SESSION[ self::$CHROME_SESSION_VARIABLE ] = $redFrom;
                $_SESSION[ self::$CHROME_SESSION_VARIABLE_TO_READ ] = $redFrom;

                //Unset it
                unset( $_SESSION[ self::$SESSION_VARIABLE ] );

                return $redFrom;
            }

            //Not set, but is this a Chrome second request?
            else if ( isset( $_SESSION[ self::$CHROME_SESSION_VARIABLE ] ) )
            {
                $redFrom = $_SESSION[ self::$CHROME_SESSION_VARIABLE_TO_READ ];

                //Unset the one we check
                unset( $_SESSION[ self::$CHROME_SESSION_VARIABLE ] );

                return $redFrom;
            }
        }
        catch (Exception $e) {}

        return null;
    }
}

//Create
$redirector = new LandingRedirector();

//Redirect
if ( !isset( $stopHere ) || $stopHere != true ) $redirector->redirect();
?> 
```

# javascript - 创建一个透明的 HTML 光标

> ID：16116760
> 
> 赞同：0
> 
> 时间：2013-04-20T05:02:27.747
> 
> 标签：javascript, html, cursor

是否可以在网页上创建透明的 HTML 光标？我使用 div 作为光标，我想让 div 50% 透明：http: [//jsfiddle.net/mCgmP/16/](http://jsfiddle.net/mCgmP/16/)

```
<div id="cursor"><font size="6">I want this cursor to be 50% transparent!</font></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:10:23.233

也许这会有所帮助：

```
#cursor
{
opacity:0.4;
filter:alpha(opacity=40); /* For IE8 and earlier */

} 
```

[这是一个工作演示](http://jsfiddle.net/mCgmP/17/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:07:49.210

也许您正在寻找：

```
#cursor{background:rgba(255,255,255,0.5);} 
```

包括文字：

```
#cursor{background:rgba(255,255,255,0.5);color:rgba(255,255,255,0.5);} 
```

# android - 如何存储文本框android中的值？

> ID：16116761
> 
> 赞同：2
> 
> 时间：2013-04-20T05:02:31.367
> 
> 标签：android, gps, location

我正在开发一个 gps 程序，我每 5 分钟获取一次 gps 值，它工作得很好，但我必须存储我得到的值。它每 5 分钟刷新一次，我只有一个文本视图，因此在刷新新值时它会删除旧值。

这是我的代码。

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
         intent.putExtra("enabled", true);
         this.sendBroadcast(intent);

        String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
        if(!provider.contains("gps")){ //if gps is disabled
            final Intent poke = new Intent();
            poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider"); 
            poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
            poke.setData(Uri.parse("3")); 
            this.sendBroadcast(poke);

        }
    {
        //initialize location manager
        manager =  (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        //check if GPS is enabled
        //if not, notify user with a toast
        if (!manager.isProviderEnabled(LocationManager.GPS_PROVIDER)); else {
            //get a location provider from location manager
            //empty criteria searches through all providers and returns the best one
            String providerName = manager.getBestProvider(new Criteria(), true);
            Location location = manager.getLastKnownLocation(providerName);

            TextView tv = (TextView)findViewById(R.id.locationResults);
            if (location != null) {
                tv.setText(location.getLatitude() + " latitude, " + location.getLongitude() + " longitude");
            } else {
                tv.setText("Last known location not found. Waiting for updated location...");
            }
            //sign up to be notified of location updates every 15 seconds - for production code this should be at least a minute
            manager.requestLocationUpdates(providerName, 60000, 1, this);
        }
    }
}

    @Override
    public void onLocationChanged(Location location) {
        TextView tv = (TextView)findViewById(R.id.locationResults);
        if (location != null) {
            tv.setText(location.getLatitude() + " latitude, " + location.getLongitude() + " longitude");
        } else {
            tv.setText("Problem getting location");
        }
    }

    @Override
    public void onProviderDisabled(String arg0) {}

    @Override
    public void onProviderEnabled(String arg0) {}

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {}

    // Find the closest Bart Station
    public String findClosestBart(Location loc) {
        double lat = loc.getLatitude();
        double lon = loc.getLongitude();

        double curStatLat = 0;
        double curStatLon = 0;
        double shortestDistSoFar = Double.POSITIVE_INFINITY;
        double curDist;
        String curStat = null;
        String closestStat = null;

        //sort through all the stations
        // write some sort of for loop using the API.

        curDist = Math.sqrt( ((lat - curStatLat) * (lat - curStatLat)) +
                        ((lon - curStatLon) * (lon - curStatLon)) );
        if (curDist < shortestDistSoFar) {
            closestStat = curStat;
        }

        return closestStat;

        } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:18:05.353

您可以将 Textview 的值存储到文件中以进行持久性存储。正确研究我的答案，我正在您现有的代码中添加一个文件存储方法，

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
         intent.putExtra("enabled", true);
         this.sendBroadcast(intent);

        String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
        if(!provider.contains("gps")){ //if gps is disabled
            final Intent poke = new Intent();
            poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider"); 
            poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
            poke.setData(Uri.parse("3")); 
            this.sendBroadcast(poke);

        }
    {
        //initialize location manager
        manager =  (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        //check if GPS is enabled
        //if not, notify user with a toast
        if (!manager.isProviderEnabled(LocationManager.GPS_PROVIDER)); else {
            //get a location provider from location manager
            //empty criteria searches through all providers and returns the best one
            String providerName = manager.getBestProvider(new Criteria(), true);
            Location location = manager.getLastKnownLocation(providerName);

            TextView tv = (TextView)findViewById(R.id.locationResults);
            if (location != null) {
                tv.setText(location.getLatitude() + " latitude, " + location.getLongitude() + " longitude");
            } else {
                tv.setText("Last known location not found. Waiting for updated location...");
            }
            //sign up to be notified of location updates every 15 seconds - for production code this should be at least a minute
            manager.requestLocationUpdates(providerName, 60000, 1, this);
        }
    }
}

    @Override
    public void onLocationChanged(Location location) {
        TextView tv = (TextView)findViewById(R.id.locationResults);
        if (location != null) {
            tv.setText(location.getLatitude() + " latitude, " + location.getLongitude() + " longitude");
          // I have added this line
          appendData ( location.getLatitude() + " latitude, " + location.getLongitude() + " longitude" );
        } else {
            tv.setText("Problem getting location");
        }
    }

    @Override
    public void onProviderDisabled(String arg0) {}

    @Override
    public void onProviderEnabled(String arg0) {}

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {}

    // Find the closest Bart Station
    public String findClosestBart(Location loc) {
        double lat = loc.getLatitude();
        double lon = loc.getLongitude();

        double curStatLat = 0;
        double curStatLon = 0;
        double shortestDistSoFar = Double.POSITIVE_INFINITY;
        double curDist;
        String curStat = null;
        String closestStat = null;

        //sort through all the stations
        // write some sort of for loop using the API.

        curDist = Math.sqrt( ((lat - curStatLat) * (lat - curStatLat)) +
                        ((lon - curStatLon) * (lon - curStatLon)) );
        if (curDist < shortestDistSoFar) {
            closestStat = curStat;
        }

        return closestStat;

        }   
     // method to write in file 
public void appendData(String text)
{       
   File dataFile = new File("sdcard/gpsData.txt");
   if (!dataFile.exists())
   {
      try
      {
         dataFile.createNewFile();
      } 
      catch (IOException e)
      {
         // TODO Auto-generated catch block
         e.printStackTrace();
      }
   }
   try
   {
      //BufferedWriter for performance, true to set append to file flag
      BufferedWriter buf = new BufferedWriter(new FileWriter(dataFile, true)); 
      buf.append(text);
      buf.newLine();
      buf.close();
   }
   catch (IOException e)
   {
      // TODO Auto-generated catch block
      e.printStackTrace();
   }
} 
```

您需要在 AndroidManifest.xml 中写入以下权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:04:48.877

好吧，您有很多持久性选项，但在这种情况下，最好使用[SharedPreferences](https://www.google.com.cu/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDwQFjAB&url=http://developer.android.com/guide/topics/data/data-storage.html&ei=syFyUcC9FojBPPSlgfgL&usg=AFQjCNGp43XUcnNOhRE7DytXA07IG44RHw&bvm=bv.45512109,d.ZWU)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:09:20.687

在不确切知道您需要对保存的数据做什么的情况下，没有人可以肯定地说。如果您需要临时存储，[ArrayList是一个不错的选择。](http://developer.android.com/reference/java/util/ArrayList.html)您可以创建一个新的 ArrayList，然后在使用它的同时将值放入其中`setText()`。如果您想要永久的东西，那么您可能希望将其存储在数据库或文件中。查看[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)

此外，在这种情况下，一个好主意可能是将其`ArrayList`临时存储，然后使用该列表将它们传输到文件或数据库以进行永久存储（如果这是您想要的）

另一种临时存储它并可能稍后保存在某个地方的方法是[HashMap](http://developer.android.com/reference/java/util/HashMap.html)。也许某种形式的东西`HashMap<String, HashMap<String, String>>`。由于我们不知道您对数据的确切意图，因此示例可能无穷无尽，但也许这会给您一个很好的起点，因此您可以决定什么最适合您，然后您可以在 SO 和 Google 上找到许多示例你的选择

# javascript - 使用javascript获取纬度和经度

> ID：16116768
> 
> 赞同：0
> 
> 时间：2013-04-20T05:03:24.367
> 
> 标签：javascript, html, google-api, latitude-longitude, city

我的`textbox`页面中有一个`location`名称和`button`文本`getLat&Long`。现在在`clicking`我的按钮`alert`上`latitude`，我必须`longitude`在`textbox`. 有什么建议吗？
请不要给我建议，因为 googleapis b'coz 在这个限制之后它的一些阶段限制想要为此付费。这是我的尝试`googleapis`：-

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
 <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
function myIP(){
$("#btn").click(function(){
            var geocoder =  new google.maps.Geocoder();
    geocoder.geocode( { 'address': '#city'}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            alert("location : " + results[0].geometry.location.lat() + " " +results[0].geometry.location.lng()); 
          } else {
            alert("Something got wrong " + status);
          }
        });
});
}
 </script>
</head>
<body onload="myIP()">
<input type="text" id= "city">
<input id="btn" type="button" value="get Lat&Long" />
</body>
</html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-04-14T01:53:13.440

从地址或位置名称（地理编码）获取纬度和经度很复杂，因此需要像 google api 这样的第三方服务。

# c++ - 将 Struct 对象推入队列的问题

> ID：16116769
> 
> 赞同：0
> 
> 时间：2013-04-20T05:03:39.360
> 
> 标签：c++

我有一个结构，我想创建这个结构的队列。我在推送新元素时遇到问题。请帮忙。

```
#include <iostream>
#include <queue>
#include <deque>
#include <list>
using namespace std;

struct Node {
Node *left, *right;
int key;
};

queue<Node> q;

void updateLevel( Node &n, int &level){
if(n.left!=NULL && n.right!=NULL){
    level+=2;
    q.push(n.left);
    q.push(n.right);
    }
    else if(n.left!=NULL || n.right!=NULL){
    level++;
    if(n.left!=NULL) q.push(n.left);
    if(n.right!=NULL) q.push(n.right);
}
};
void printTree(Node root){
//if(root!=NULL){
    q.push(root);
    Node n;
    while(!q.empty()){
        n =q.pop();
        updateLevel(n,nextLevel);
        curLevel--;
        cout<<n.key;
        if(curLevel<=0){
            cout<<endl;
            curLevel=nextLevel;
            nextLevel=0;
        }

    }

//}
    };

   int main() {

Node rootTree;

printTree(rootTree);

return 0; 
```

}

我从 main 调用这个函数。在检查关于 NULL 的 if 条件时，我也遇到了错误。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:06:38.743

这里至少有一个错误：

```
queue<Node> q; //a queue of Node 
```

然而：

```
q.push(n.left);
q.push(n.right); //n.left and n.right are Node*. 
```

您正在推`Node*`送到队列接受`Node`。

您可能还有其他错误，但从您显示的代码来看，这至少是其中之一。

**编辑**：根据您更新的代码。

```
Node rootTree; 
```

你没有在你的 中定义任何构造函数`Node`，所以成员`rootTree`没有被初始化。`left`并`right`没有`NULL`开始。因此，您检查`NULL`它们是没有用的。

```
updateLevel(n,nextLevel); 
```

是什么`nextLevel`，似乎没有定义。

尝试在代码中设置一些断点，定位问题。错误说`if condition check`有问题，但可能根本原因可能在其他地方。

# python - PYTHONPATH 冲突

> ID：16116771
> 
> 赞同：2
> 
> 时间：2013-04-20T05:03:52.110
> 
> 标签：python, google-app-engine, python-2.7

我正在尝试`import ZipCodeDatabase`在`helloworld.py`.

*   `helloworld.py`存在于`/google-app-engine/helloworld`
*   `ZipCodeDatabase`模块存在`/usr/local/lib/python/python2.7/dist-packages`
*   `PYTHONPATH`=`/usr/local/lib/python/python2.7/dist-packages;/usr/local/lib/python/`

编译`helloworld`时我仍然收到“`ZipCodeDatabase`找不到模块”。为什么不是从 中挑选出来的`PYTHONPATH`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T07:36:30.103

我非常怀疑你有一个名为`ZipCodeDatabase`. 该命名约定通常保留给`class`位于`module`. 模块通常是小写或lower_snake_case，以表示包含模块的文件。我假设你已经安装`pyzipcode`在这里，但它可能是一个不同的模块。

```
# assuming pyzipcode.py in the dist-packages directory
$ python -c 'from pyzipcode import ZipCodeDatabase' 
```

如果我在上面错了，那么您**确定**您正在运行安装了 ZipCodeDatabase 模块的 python 版本吗？

一些故障排除步骤：

```
$ which python
$ python --version
$ python -c 'import ZipCodeDatabase'
$ ls -l /usr/local/lib/python2.7/dist-packages/ | grep -i zip 
```

另外，你真的有必要指定`PYTHONPATH`线路吗？通常，该`site-packages`文件夹（以及我假设`dist-packages`Ubuntu 上的文件夹）包含在 default`PYTHONPATH`中，以及您正在使用的 python 模块的当前目录。

您是如何安装 ZipCodeDatabase 的？你把文件放在那里了吗？试着把它放在你的`helloworld.py`文件旁边，然后尝试导入它。此外，完整的堆栈跟踪在这里是有用的信息，尤其是当其他人试图诊断您遇到的问题时。

编辑：

Ok, now that I know you're using google app engine (should have been obvious from your use of paths - I'm sorry), it looks like it doesn't use the `site-packages` or `dist-packages` to load modules. You should create a sub-directory in your project with the relevant third party libraries, and add that sub-directory to your path. *Disclaimer:* I've never used GAE so I might be missing the mark with this.

Check out [this answer](https://stackoverflow.com/a/2710892/10583) for how to structure your project and add the extra directory to your path from within the application.

# ipad - 横向移动内容的垂直滚动条

> ID：16116772
> 
> 赞同：0
> 
> 时间：2013-04-20T05:04:00.957
> 
> 标签：ipad, scroll

第一次在 StackOverFlow.com 上发帖，可惜我被认为是计算机科学专业的学生。首先，非常感谢你们通过其他人的询问为我提供的帮助，回答我自己的问题。今天我有自己的真实问题，像这篇文章的标题可能很难理解。不过我喜欢挑战。

```
</introduction> 
```

摘要：在艺术家/哲学页面上使用网站 somethingmedia.co 的内容；通过特别考虑移动设备来创建更加用户友好的显示。

方法：将阻止的“div”内容更改为几乎内联并允许侧滚动。请访问此处以获得[[demo]](http://code.comunicatek.com/plugins/tekslider/index.html)的清晰表示，并在下面查看解释 [a]

ALTERATION：虽然允许在 [method] 中看到的触摸和按住灵敏度选项，但也允许使用鼠标滚轮进行滚动。请参阅[[demo2]](http://css-tricks.com/examples/HorzScrolling/)并访问下面的说明 [b]。

功能：除了 [method] 和 [alteration] 之外，还允许在用户移动页面滚动条本身时发生滚动。**除了**（这是棘手的部分），使滚动条*垂直*，但只左右移动内容。滚动条仅在非移动设备上可见（即 PC / 笔记本电脑 / Macintosh / 等）。

结论：我喜欢制作网站，虽然我从未参加过正式的网站课程（从 6 年级开始），但我继续根据我发现的独特和有趣的东西学习新事物。因此，我很想知道是否有办法以简单优雅的方式实现这种设计。虽然我在学校的计算机科学经验仅限于 Java 和 Python，但我在 CSS、HTML、Java Script 和一点 CGI 方面有独立的经验。如果你愿意和我一起挑战，我会问你：“我的第一步是什么？”

```
</concept> 
```

解释[a]：code.comunicatek.com/en/tekslider_a_touch_focused_slider.html

解释[b]：css-tricks.com/snippets/jquery/horz-scroll-with-mouse-wheel/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T09:16:33.750

这个问题有点令人困惑，但假设你真正的意思是，“我怎样才能拥有一个使用垂直滚动条水平滚动页面的页面”，我会尝试这样的事情：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">  
    <title>Vertizontal Scrolling</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" ></script>
    <script>
        $(document).ready(function() {
            $('#page-scroll').height($('#page-wrap').outerWidth());
            $(window).scroll(function() {
                $('#page-wrap').css('left',-1 * $(window).scrollTop());
            });
        });
    </script>

    <style type="text/css" style="display: none !important;">
        #page-wrap {
            position:fixed;
            left:0;
            top:0;
            z-index:10;
        }
        #page-scroll {
            z-index:1;
        }
    </style>

</head>
<body>  

    <div id="page-scroll">
        <!--- intentionally empty --->
    </div>

    <div id="page-wrap">
        <!--- really wide content goes here --->
    </div>

</body>
</html> 
```

# python - 鼻子测试的 Django 用户设置

> ID：16116776
> 
> 赞同：0
> 
> 时间：2013-04-20T05:04:52.923
> 
> 标签：python, django, unit-testing, testing, nose

我尝试为鼻子测试设置用户，但它不起作用

在全球范围内定义：

```
from django.contrib.auth.models import User
import nose.tools as noz 
```

在定义的测试类中：

```
def setUp(self):
    self.client = Client()
    user = User(username="test", password="test")
    user.save() 
```

用户已保存，我已经使用 noz.set_trace() 进行了测试，但是当测试函数调用同一用户的登录时，会引发断言错误：

```
nosetests --verbosity 1
Creating test database for alias 'default'...
> <app-path>/tests.py(59)testTestUser()
-> response = self.client.login(username=u'test', password=u'test')
(Pdb) User.objects.all()
[<User: test>] 
```

testTestUser 函数定义如下：

```
def testTestUser(self):
    """ Tests if the django user 'test' is setup properly."""
    noz.set_trace()
    # login the test user
    response = self.client.login(username='test', password='test')    
    noz.assert_equal(response, True) 
```

相关的测试输出是：

```
 noz.assert_equal(response, True)
       AssertionError: False != True

    ----------------------------------------------------------------------
    Ran 1 test in 0.011s

    FAILED (failures=1) 
```

我的目的是测试具有 requst.user.is_authenicated() 分支的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:27:55.487

figured it out from : [http://www.pukkared.com/2011/07/simulating-user-login-in-a-django-view-unit-test/](http://www.pukkared.com/2011/07/simulating-user-login-in-a-django-view-unit-test/)

the proper code is:

```
def setUp(self):
    self.client = Client()
    user = User.objects.create_user(username="test", password="test")

def testTestUser(self):
    """ Tests if the django user 'test' is setup properly."""
    noz.set_trace()
    # login the test user
    response = self.client.login(username='test', password='test')    
    noz.assert_equal(response, True) 
```

# c - 主要论点？

> ID：16116778
> 
> 赞同：3
> 
> 时间：2013-04-20T05:05:27.400
> 
> 标签：c, arguments, main

我知道 main 的签名是：

```
int main(int argc, char **argv); 
```

但我真的不知道为什么这样的 main 也会起作用：

```
main(a){} 
```

'a' 在这里做什么？为什么编译器不显示错误？因为我在使用它之前没有声明'a'。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T05:11:14.813

这是旧 C 代码的一个特性，称为“隐式 int”。任何未指定类型的变量都被假定为`int`. 类似地，任何未指定返回类型的函数都假定返回一个`int`. 它现在被认为*已弃用*，但在混淆代码和[代码高尔夫](https://codegolf.stackexchange.com/a/3290/2381)中变得有用。

所以你应该把它读成

```
int main(int a) {} 
```

其中`int`s 已被省略，因为它们是*隐式的。*

正如 WhozCraig 所提到的，从标准的角度来看，这*不符合标准*且*不可移植*。但实际上，许多编译器会让你在不处于标准一致性模式时摆脱这种情况。

然而，隐式`int`行为并不能让你摆脱声明变量。

```
main(a){
    b,c; // int declarations
    c = 5;
    b = c + 10;
    d = b; // No! d is not declared for you, even with implicit int happening.
    return 0;
} 
```

# java - 使用 string.split() 时前导空格

> ID：16116780
> 
> 赞同：2
> 
> 时间：2013-04-20T05:05:33.917
> 
> 标签：java, string, removing-whitespace

这是我用来分割字符串的代码

```
str = "1234".split("") ; 
System.out.println(str.length) ; //this gives 5 
```

在 1 之前添加了一个额外的空格，即`str[0]=" "` 如何在没有前导空格的情况下拆分此字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:11:33.847

尝试这个：

```
char[] str = "1234".toCharArray();
System.out.println(str.length) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-08T22:12:00.383

你实际上并没有得到一个前导的空白元素，你得到的是一个前导的*空字符串*，从打印整个数组可以看出：

```
System.out.println(java.util.Arrays.toString("1234".split(""))); 
```

输出：

```
[, 1, 2, 3, 4] 
```

`"1234".indexOf("")`这种行为的基本原理是事实`0`。即，分隔符字符串在搜索字符串的开头匹配，因此它在那里创建一个拆分，在返回的数组中给出一个空的初始元素。分隔符也在字符串的末尾匹配，但你不会在那里得到额外的空元素，因为（如`String.split`文档所述）“尾随空字符串将被丢弃”。

但是，Java 8 的行为[发生](http://hg.openjdk.java.net/jdk8/jdk8/jdk/rev/9e37caf07ce0)了变化。现在文档还说：

> 当此字符串的开头存在正宽度匹配时，则在结果数组的开头包含一个空的前导子字符串。**但是，开头的零宽度匹配永远不会产生这样的空前导子字符串。**

（比较[Java 7](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)和[Java 8](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-)`String.split`的文档。）

因此，在 Java 8 及更高版本上，上述示例的输出为：

```
[1, 2, 3, 4] 
```

有关更改的更多信息，请参阅：[为什么在 Java 8 中拆分有时会在结果数组的开头删除空字符串？](https://stackoverflow.com/questions/22718744/why-in-java-8-split-sometimes-removes-empty-strings-at-start-of-result-array)

`String.split`无论如何，在这种特殊情况下使用它是多余的。其他答案是正确的，以获得您应该使用的所有字符的数组[`str.toCharArray()`](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#toCharArray--)，这更快，更直接。如果您确实需要一个单字符字符串数组而不是字符数组，请参阅：[将字符串拆分为字符串数组](https://stackoverflow.com/questions/5235401/split-string-into-array-of-character-string)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:10:02.293

改用 toCharArray() ......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T05:12:38.567

如果要在 "" 上拆分，则应使用字符串的 toCharArray 方法。

```
String str = "1234";
System.out.println(str.toCharArray().length); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-06T18:58:06.317

如果您使用的是 Java 7 或更低版本，请使用以下命令：

```
"1234".split("(?!^)") 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-20T05:18:48.907

我会这样做：

```
str = "1 2 3 4".split(" "); 
```

当然，除非有特定原因必须是“1234”

# javascript - 如何使用邪恶的好 xpath 库编写跨浏览器 XPath 查询？

> ID：16116785
> 
> 赞同：0
> 
> 时间：2013-04-20T05:06:04.623
> 
> 标签：javascript, xml, xpath, cross-browser, wicked-good-xpath

我从 stackoverflows 的一个回复中知道，如果我们想编写跨浏览器 XPath 查询，那么谷歌提供了一个名为 Wicked XPath Query 的库。这是链接[Wicked Good XPath](https://code.google.com/p/wicked-good-xpath/)

有没有人实施过这样的？如果是，那么请指导我如何编写 Xpath 查询跨浏览器库。我的目标浏览器是 IE (7,8,9,10) 和 Google Chrome。我可以在 IE 和 Google Chrome 中检查的任何工作示例将不胜感激。

我期望该解决方案也应该在 IE 10 中工作。编写跨浏览器 xpath 背后的原因是我不必担心在不同浏览器中执行 xpath 查询时的任何细微变化。

感谢进一步的帮助。

**编辑：**

从我接受的**Sergey Ilinsky**的回答中对解决方案进行更多解释：

在这里，我正在编写一个示例，以便任何纯粹在 XML 数据中工作的人都可以了解。

假设您的 XML 结构如下所示

```
<elementNode id="13" std="1">
    ....
</elementNode> 
```

然后我们可以像下面这样编写 xpath 查询

```
<script type="text/javascript">
    (function() {
        res = $.xpath($("#selectorID"),"//elementNode[@id='10']");
        console.log(res[0].getAttribute("id")); //will print 10 in console
        console.log(res[0].getAttribute("std")); //will print 1 in console
    })();
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T14:56:01.173

您可能想尝试[支持 XPath 2.0](https://github.com/ilinsky/jquery-xpath)语法跨浏览器的 jQuery XPath 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T15:05:37.920

Wicked Good XPath 仅支持 HTML 文档。所有浏览器都本机支持 XML 文档的 XPath，尽管 IE 通过稍微不同的 API。（selectNode，selectNodes 而不是 document.evaluate）。

# mysql - Mysql Insert 语句的基本查询

> ID：16116787
> 
> 赞同：0
> 
> 时间：2013-04-20T05:06:20.843
> 
> 标签：mysql, insert

我在一个表中有 N 条记录，我想从一个表中移动所有记录，另一个说旧表`table1` 和新表`table2`。我有一个带有子查询的查询，可以从表中选择记录进行插入。假设有 10000 条记录在插入 6000 条记录时它会出现一些异常，它结束了，但仍然`table2`是空的，我想知道这是 5999 条记录，它会被插入到数据库中吗？

提前致谢 ，，

如果它不值得回答或任何原因让我知道拒绝投票的原因，我可以改进它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:19:45.833

> 我有一个带有子查询的查询，可以从表中选择要插入的记录

我假设您有一些`INESRT INTO table2(<COLUMN LIST>) SELECT <COLUMN LIST> FROM table1 WHERE ...`正在运行以移动记录。

如果是这样，则 INSERT 语句作为事务的一部分运行，并且只有在语句成功执行时才会提交，即如果它能够处理该查询`INSERT`返回的所有记录。`SELECT`否则，事务将回滚并且不会插入任何记录。

> 在这里我想知道它会被插入到数据库中的 5999 条记录吗？

`INSERT`在执行语句时，这些记录将被插入到 tmp 位置的工作表中。如果一切顺利，它将被提交到主表。

# github - GitHub SSH 配置：“错误的配置选项：IdentifyFile”

> ID：16116788
> 
> 赞同：90
> 
> 时间：2013-04-20T05:06:32.073
> 
> 标签：github, ssh, config

我正在尝试为多个 SSH 帐户（特别是 github.com）创建一个 .ssh/config 文件。我已经尝试了几个教程和 github 帮助演练，但似乎没有任何效果。

我创建了一个`id_rsa_test`和`id_rsa_test.pub`。我上传`id_rsa_test.pub`到了github。

然后我创建了一个`~/.ssh/config`包含以下内容的文件：

```
# github account
Host github.com-test github.com
    Hostname github.com
    User git 
    IdentifyFile ~/.ssh/id_rsa_test 
```

和

```
# github account
Host github.com-test github.com
    Hostname github.com
    User git 
    IdentifyFile ~/.ssh/id_rsa_test.pub 
```

然后我尝试了几个命令。IE：

```
git clone git@github-test:username/my_project.git

git push 
```

...每次我收到以下错误：

```
/home/username/.ssh/config: line 5: Bad configuration option: IdentifyFile
/home/username/.ssh/config: terminating, 1 bad configuration options
fatal: The remote end hung up unexpectedly 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2013-04-20T05:09:44.940

它是带有 't' 的 Identi yFile，而不是 Identi **f** **yFile**。

# regex - 匹配来自 RSS 的标签之间的内容并将每个匹配项插入到数组中 - perl

> ID：16116792
> 
> 赞同：-1
> 
> 时间：2013-04-20T05:07:09.637
> 
> 标签：regex, arrays, perl, rss, tags

我不知道还能用什么词来表达我想要的东西，所以我只会用例子来说明我拥有什么和想要什么。

我有：

```
my $rss = ("<item><title>this is a test title</title></item>
<item><title>this is also a test title</title></item>");
my @items = ($rss =~ /<item>[\s.*]<\/item>/g); 
```

我想结束的是：

```
@items[0]:    <title>this is a title</title>
@items[1]:    <title>this is also a title</title> 
```

我还希望正则表达式允许新行，这样当我用真正的 RSS 替换该测试字符串时，它仍然可以工作。我确信我做错了很多，但是数小时的搜索使我离我想去的地方更近了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-25T05:06:15.780

**我的讲师提供的解决方案：**

```
my @items = ($rss =~ m{<item>(.*?)</item>}gs); 
```

# html - 使两个具有内联尺寸的元素

> ID：16116800
> 
> 赞同：0
> 
> 时间：2013-04-20T05:08:01.627
> 
> 标签：html, css

我试图使标题中的两个元素，粉色部分和绿色部分，内联（在一行中，而不是像当前绿色部分那样换行）。

但是，我不能使用 display:inline; 因为物品需要有宽度。

我怎样才能实现这两个元素都是内联的并保持它们的宽度？

这是元素所在的页面：[https ://dl.dropboxusercontent.com/u/270523/help/new.html](https://dl.dropboxusercontent.com/u/270523/help/new.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:31:01.437

The inline-block solution:

```
#logo {
    width: [WIDTH1]%;
    min-width: 225px;
    background: pink;
}

#input{   
    width: [WIDTH2]%;
    background: green;
}

#input,#logo {
    display: inline-block;
    height: 100%;
    vertical-align:top;
} 
```

Where [WIDTH1] + [WIDTH2] = 100%. For this to work, you need to delete the whitespaces between the two elements.

So not like now:

```
<section id="logo"></section>
<section id="input">
    <input id="searchInput" type="text" name="search" autocomplete="off">
</section> 
```

But instead:

```
<section id="logo"></section><section id="input">
    <input id="searchInput" type="text" name="search" autocomplete="off">
</section> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:46:49.873

首先，它真的很好，你使用 html5 标签对你有好处。在我看来，最简单的方法是对标题中的所有元素使用浮点数，但请记住`clear:both`父标签。

这是修改代码的演示：http: [//jsfiddle.net/bartekbielawa/WgtAP/](http://jsfiddle.net/bartekbielawa/WgtAP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:13:40.027

你的部分输入正在下降，因为它有额外的宽度，让它在 77% 左右，然后它就会为你工作。

```
#input{width:77%;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T05:15:39.973

您已将浮点数设置为 #input 部分，而不是 #logo 部分。

```
#logo {
width:20%;
float: left;
} 
```

# javascript - 如何用 HTML 为关键字着色？

> ID：16116803
> 
> 赞同：2
> 
> 时间：2013-04-20T05:08:14.267
> 
> 标签：javascript, jquery, css, html

我正在开发一个基于 SQL 的 webapp，我需要为一些 keyworkds 着色，例如 SELECT、IN、UPDATE、DELETE、FROM 等，就像 Notepad++、Sublime 等一样。

![在此处输入图像描述](https://i.stack.imgur.com/aoBRT.png)

有人知道如何用 javascript 做到这一点吗？

我正在考虑在每次击键时运行一个异步任务，但我不知道如何做到这一点......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T05:11:55.910

根据[https://code.google.com/p/google-code-prettify/wiki/GettingStarted](https://code.google.com/p/google-code-prettify/wiki/GettingStarted)添加

```
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=sql"></script> 
```

给你`<head>`然后放

```
<pre class="prettyprint lang-sql">...</pre> 
```

围绕您的 HTML 转义 SQL。

[http://google-code-prettify.googlecode.com/svn/trunk/tests/prettify_test.html#sql_lang](http://google-code-prettify.googlecode.com/svn/trunk/tests/prettify_test.html#sql_lang)显示了 SQL 高亮显示。

# python - 使用 Octo 模块的 mapreduce wordcount 示例

> ID：16116805
> 
> 赞同：0
> 
> 时间：2013-04-20T05:09:10.367
> 
> 标签：python, mapreduce

我刚刚开始使用 Octo 模块和字数统计示例来学习 mapreduce。我尝试计算目录 hw3data 中的单词（如下所示）。我的电脑既是服务器又是客户端。

我从带有 2 个终端的 windows cmd 开始

server: octo.py server wordcount.py 看来服务器端启动没有问题

client: octo.py client localhost 貌似python找不到我存放在hw3data目录下的txt文件，所以说no work，sleeping。所以有人可以帮忙吗？

wordcount.py 代码如下

### 字数.py

# 服务器

```
import glob

text_files=glob.glob('C:/Python27/octopy-0.1/hw3data/*.txt')

def file_contents(file_name):
    f=open(file_name)
    try:
        return f.read()
    finally:
        f.close()

source=dict((file_name,file_contents(file_name)) for file_name in text_files)

f=open('outfile','w')
def final(key,value):
    print key,value
    f.write(str((key,value))) 
```

# 客户

```
def mapfn(key,value):

      for line in value.splitlines():

          for word in line.split():

               yield word.lower(),1

def reducefn(key,value):

       return key,len(value) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T04:12:34.463

验证您的数据文件的名称中是否包含“.txt”。我目前正在为我的作业＃3解决这个问题。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T16:13:50.870

更改以下代码

```
text_files=glob.glob('C:/Python27/octopy-0.1/hw3data/*.txt') 
```

至

```
text_files=glob.glob('C:/Python27/octopy-0.1/hw3data/*') 
```

并尝试。我猜文件夹中的文件没有扩展名。

# java - 其他语言中的 Python sys.setprofile()

> ID：16116807
> 
> 赞同：0
> 
> 时间：2013-04-20T05:09:13.820
> 
> 标签：java, php, ruby, profile

我正在编写一些需要以某种方式格式化的配置文件等等。我正在寻找在其他语言中编写自定义分析器的方法。我遇到了 Python 的 sys.setprofile 方法，希望有人能指出我正确的方向，以便在以下方法中找到做同样事情的姐妹函数或方法。

python 的[sys.setprofile(profilefunc)](http://docs.python.org/2/library/sys.html#sys.setprofile)方法允许在每次调用和返回函数时调用回调函数。这使得编写自定义配置文件类变得容易，我的目标是编写一个允许在许多语言中轻松分析它的库，它也将被制作成可以在生产服务器上运行。

*   PHP
*   红宝石
*   爪哇
*   。网
*   节点
*   你最喜欢的语言（也许我错过了一种流行的语言）

# ios - 用于离线 HTTP POST 请求的 iOS 存储转发框架

> ID：16116810
> 
> 赞同：3
> 
> 时间：2013-04-20T05:09:42.663
> 
> 标签：ios, http, nsurlrequest

有没有办法（可能是库？）在用户离线时存储 HTTP POST 请求，然后在用户重新在线时传输 POST 请求？

（我不需要阅读服务器的响应，除非我想在 POST 请求失败时重新排队请求。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:29:19.083

是的，有这样一个库：

[http://blog.mugunthkumar.com/products/ios-framework-introducing-mknetworkkit/](http://blog.mugunthkumar.com/products/ios-framework-introducing-mknetworkkit/)

它对您的应用程序的退出和重新启动具有弹性，并且会继续尝试发送您的请求，直到出现持续故障（例如服务器关闭，而不是网络关闭）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:25:14.853

> 有没有办法（可能是库？）在用户离线时存储 HTTP POST 请求，然后在用户重新在线时传输 POST 请求？

我认为最好的办法是存储发出每个请求所需的信息，而不是存储请求本身。如果将每个请求的数据包装在可归档对象中，则可以将这些对象添加到要发送的队列中。这样，如果应用程序关闭，您可以将整个队列（您可以对队列使用可变数组）归档到文件中，并在应用程序再次启动时将其读回。将队列用作单独操作的输入，该操作除了从队列中获取对象并在设备在线时发送相应的请求外什么都不做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-24T21:42:09.177

在 iOS 7 中，[NSURLSession](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/UsingNSURLSession.html)可以做到。当应用程序停止运行时，它甚至可以在后台运行请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-27T18:36:51.673

在这里聚会已经很晚了，但我为我们的内部应用程序编写了一个 pod，它几乎可以做到这一点 - [https://cocoapods.org/pods/OfflineRequestManager](https://cocoapods.org/pods/OfflineRequestManager)。实际的网络请求仍然由符合 OfflineRequest 协议的任何东西处理，但是 pod 提供了一种简单的方法来将请求排入队列并确保它们继续尝试执行直到成功，包括保存到磁盘。

最简单的用例如下所示，尽管大多数实际用例（保存到磁盘、特定请求数据等）将有更多的障碍需要跳过：

```
import OfflineRequestManager

class SimpleRequest: OfflineRequest {
    func perform(completion: @escaping (Error?) -> Void) {
        doMyNetworkRequest(withCompletion: { response, error in
            handleResponse(response)
            completion(error)
        })
    }
}
///////
OfflineRequestManager.defaultManager(queueRequest: SimpleRequest()) 
```

# java - 为什么我的 release() 方法没有唤醒我的实例？

> ID：16116813
> 
> 赞同：0
> 
> 时间：2013-04-20T05:09:59.063
> 
> 标签：java, multithreading, concurrency, semaphore, notify

我编写了一个示例程序来演示我的问题。有一个调酒师线程和三个客户线程。它们在创建后同时运行。调酒师应该为每位顾客提供一杯饮料。

我的问题是调酒师类 run() 方法中的 wait() 方法永远不会唤醒。我原本打算让每个 Customer 类的 run() 方法中的 release() 方法唤醒它，但它似乎不起作用。它永远不会醒来。

我该如何解决这个问题？感谢任何可以提供建议或代码片段的人。

```
import java.util.concurrent.Semaphore;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Bar {

    Semaphore serving;
    boolean isServing = false;

    public static void main(String[] args) {
        Bar bar = new Bar();
        bar.run();
    }

    public void run() {
        serving = new Semaphore(1);
        Thread bartender = new Thread(new Bartender());
        bartender.start();
        threadSleep(1000);

        Thread customer1 = new Thread(new Customer());
        customer1.start();
        threadSleep(2000);
        Thread customer2 = new Thread(new Customer());
        customer2.start();
        threadSleep(2000);
        Thread customer3 = new Thread(new Customer());
        customer3.start();
    }

    public void threadSleep(int time) {
        try {
            Thread.sleep(time);
        } catch (InterruptedException ex) {
            Logger.getLogger(Bar.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public class Bartender implements Runnable {
        public void run() {
            while (true) {
                if (serving.availablePermits() == 0) {
                    synchronized (this) {
                        try {
                            System.out.println("Waiting for Customer notify");
                            wait();
                            System.out.println("Serve drink");
                        } catch (InterruptedException ex) {
                            Logger.getLogger(Bar.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                }
            }
        }
    }

    public class Customer implements Runnable {
        private boolean customerServed = false;

        public void run() {
            if (!customerServed) {
                synchronized (this) {
                    try {
                        serving.acquire();
                        if (serving.availablePermits() == 0 && !serving.hasQueuedThreads()) {
                            notify();
                            isServing = true;
                            System.out.println("Customer: Recieves drink");
                            customerServed = true;
                            serving.release();
                            isServing = false;
                        }
                    } catch (InterruptedException ex) {
                        Logger.getLogger(Bar.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:17:13.460

在`class Bartender`和`class Customer`

更改`synchronized (this) {`为`synchronized (Bar.this) {`

更改`wait()`为`Bar.this.wait()`

更改`notify()`为`Bar.this.notify()`

因为两个`this`引用不同的对象，所以`Bartender`永远不会醒来。并且因为两个`Bar.this`引用同一个对象，`Bartender`会被唤醒！

# postgresql - 当它们大于 1gb 时，在 postgres 中拆分文件的调用在哪里？

> ID：16116816
> 
> 赞同：2
> 
> 时间：2013-04-20T05:10:12.717
> 
> 标签：postgresql

根据[http://www.postgresql.org/docs/current/static/storage-file-layout.html](http://www.postgresql.org/docs/current/static/storage-file-layout.html)

“当一个表或索引超过 1 GB 时，它被划分为千兆字节大小的段。第一个段的文件名与 filenode 相同；后续段命名为 filenode.1、filenode.2 等。”

我想知道源代码在哪里处理。我一直在寻找最后几个小时，但没有运气

编辑：如果有人可以引导我将页面从缓冲区写入磁盘的代码，那也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:56:08.013

您主要是在寻找`src/backend/storage/smgr/smgr.c`relfilenode`src/backend/storage/smgr/md.c`管理。主文件由 a 引用，`RelFileNodeBackend`forks 由`ForkNumber`. 开始`backend/storage/smgr/README`。

`git grep`将帮助您更快地找到东西；快速`cd src; git grep --color relfilenode`帮助找到了代码库的相关区域。

缓冲区缓存管理和脏写出是完全分开的。使用 bgwriter（后台写入器）使情况变得复杂，它急切地将共享内存中的脏缓冲区写入磁盘，而不会阻塞正在工作的后端。我对代码的那部分不是特别熟悉，但是花点时间`git grep`和[开发人员文档](http://www.postgresql.org/docs/current/static/internals.html)应该可以帮助您找到解决方法。

# sql - 用户名或用户 ID

> ID：16116820
> 
> 赞同：1
> 
> 时间：2013-04-20T05:10:48.527
> 
> 标签：sql, primary-key

我已经看到很多讨论是否更好地使用用户 ID 或用户名作为表的主键。如果需要，用户 ID 将允许以后更改用户名的灵活性。也是一种实现安全的方法。但是，用户名也是唯一标识符。

如果我选择 userid 作为主键，强制用户名具有唯一值的最佳方法是什么？

如果我选择用户名，我应该注意哪些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:15:19.690

我将声明`UserId`为，`PRIMARY KEY`因为将有其他表引用此用户记录`UserId`，因此将有助于强制执行任何`FOREIGN KEY`约束。

如果用户名需要唯一，那么我会将其声明为`NON NULL`列并定义`UNIQUE KEY`约束。该属性将阻止列中的约束`NON NULL`允许的单个空值。`UNIQUE KEY`因此，对 UserName 的设置将类似于`PRIMARY KEY`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T05:16:00.650

这是我个人的观点。

我宁愿选择`UserID`数据类型 int （*或者可以是 string*）作为表的主键，因为这在任何时候都不能改变。由于它是不可更改的，因此引用它的一些外键没有问题。

我没有选择的原因`Username`是因为在某些时候，虽然这是独一无二的，但有时可以改变。如果已经有引用它的外键，则在首先删除或删除这些键或记录之前，根本无法更改该用户名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:15:44.737

在语义上，至少在我的耳朵里，**userid**听起来像是一个人为创建的值，可能是一个人工主键，而**username**听起来像是一个自然的、用户友好的（组成）自然主键。在相反的意义上使用这两个术语可能偶尔会混淆程序员和用户，并且可能会在未来产生微妙的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T05:16:01.180

> 强制用户名具有唯一值的最佳方法是什么？

创建唯一索引。

> 如果我选择用户名，我应该注意哪些问题？

你会允许用户随时更改他们的用户名（只要它保持唯一）吗？如果是，则使用您生成的用户 ID；否则使用他们选择的用户名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T05:17:13.303

对于您的第一个问题，`UNIQUE`大多数现代 RDBMS 都提供约束。您也可以在应用程序级别实现它。

对于你的第二个问题，我没有看到任何明显的问题。用户名通常为最终用户所知。但是，如果您有大量用户并且用户名字段的最大长度很大，则索引可能不如 int 类型的 userID 字段高效。

# javascript - 在 Internet Explorer 中侦听更改事件

> ID：16116821
> 
> 赞同：0
> 
> 时间：2013-04-20T05:10:56.237
> 
> 标签：javascript, html, internet-explorer

`addEventListener`对于 IE 9 和 10 中的输入文件选择应在文件选择后触发，但在第二次选择文件后触发，这意味着如果第一次没有选择文件，则第一次选择不会触发，之后每个文件都不会触发选择侦听器事件触发（如果选择了不同的文件）。我的代码片段：

HTML

```
<input type="file" name="imagefile" id="upload"> 
```

JavaScript

```
var file = document.getElementById("upload");
file.addEventListener("change", handlefileselect, false);

function handlefileselect(event) {
    alert("file selected");
} 
```

该代码在 Firefox 和 Chrome 中运行良好，但在 IE 中存在问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T05:16:55.310

旧的 IE 版本不支持.addEventListener [()](https://developer.mozilla.org/it/docs/DOM/element.addEventListener)方法，它有一个[.attachEvent()](http://msdn.microsoft.com/en-in/library/ie/ms536343%28v=vs.85%29.aspx)方法而不是向元素添加事件。

使用以下[addEvent 方法](https://stackoverflow.com/questions/6927637/addeventlistener-in-internet-explorer)

```
function addEvent(evnt, elem, func) {
   if (elem.addEventListener)  // W3C DOM
      elem.addEventListener(evnt,func,false);
   else if (elem.attachEvent) { // IE DOM
      elem.attachEvent("on"+evnt, func);
   }
   else { // No much to do
      elem[evnt] = func;
   }
}

var file = document.getElementById("upload");
addEvent('change', file, handlefileselect) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T05:16:56.117

您应该为 IE 使用 attachEvent 函数。

```
file.addEventListener ? file.addEventListener("change", handlefileselect, false) : file.attachEvent("onchange", handlefileselect); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T05:21:36.413

尝试使用它，我没有检查，但大多数 IE 问题都已通过标题部分中的此标记解决

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

# android - Android GridView 焦点问题儿童？

> ID：16116831
> 
> 赞同：0
> 
> 时间：2013-04-20T05:12:54.007
> 
> 标签：android, gridview, focus, android-edittext, scrollview

我有一个设置了自定义适配器的 GridView。自定义适配器的getView() 方法返回一个LinearLayout，其中两个TextView 和一个EditText 水平排列。我制作了一个自定义数字键盘，用于在 EditText 中输入文本。键盘还包含会产生问题的 NEXT 和 PREV 按钮。我希望 NEXT 按钮自动聚焦下一行中的下一个 EditText 和类似的 PREV 按钮。NEXT 按钮 onKeyPress 看起来像：

```
View v=getWindow().getCurrentFocus().focusSearch(View.FOCUS_FORWARD);
if(v!=null)
v.requestFocus(); 
```

代码似乎是正确的。问题是，假设当前gridView只有三行可见，如果焦点在第三个EditText并且按下NEXT，那么它什么都不关注。我不知道如何解决这个问题。如果有人知道如何解决它。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:03:04.710

您能否`editText`以相同的顺序维护所有 id 的集合，同时添加它们以进行渲染。

在这种情况下，对于`clickHandler`或 NEXT/PREV 按钮，您可以检查以下内容：

1.  `clickHandler`上一条：如果当前选择是列表中的第一个，那么您可能希望将焦点设置在列表中的最后一个元素上。
2.  `clickHandler`下一个：如果当前选择是列表中的最后一个，那么您可能希望将焦点设置在列表中的第一个元素上。

或者，如果您不想要列表回滚功能，您可以检查元素在列表中的位置，并以您希望的任何方式处理边缘元素。

希望我正确理解了您的问题。

高温高压

# html - 为 HTML 生成随机数

> ID：16116832
> 
> 赞同：2
> 
> 时间：2013-04-20T05:12:58.053
> 
> 标签：html, random, numbers, generator

我正在尝试在两个值之间生成一个随机数，可以将其更改为我选择的任何值。在页面加载时，我希望数字显示在我的网站正文中。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-12-01T06:14:58.100

在我看来，您似乎更愿意为您编写整个页面，所以就这样吧。我添加了一些非常基本的样式。希望你不要介意。

```
<html>
    <head>
        <script src="https://randojs.com/1.0.0.js"></script>
        <script>
            function showRandomNumber(){
                document.getElementById("myNumber").innerHTML = rando(5, 10);
            }
        </script>
        <style>
            #myNumber{
                font-size:100px;
                text-align:center;
                margin:50px auto;
                font-family:Arial, sans-serif;
            }
        </style>
    </head>
    <body onload="showRandomNumber();">
        <div id="myNumber"></div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T12:57:04.107

您的问题对于您需要什么非常模糊，但这是一个 Javascript 解决方案，它在两个变量之间生成一个随机数，然后将`<div>`内容设置为：

小提琴：http: [//jsfiddle.net/BenedictLewis/xmPgR/](http://jsfiddle.net/BenedictLewis/xmPgR/)

JS：

```
var link = document.getElementById('getNumber'); // Gets the link
link.onclick = getNumber; // Runs the function on click

function getNumber() {
    var minNumber = 0; // The minimum number you want
    var maxNumber = 100; // The maximum number you want
    var randomnumber = Math.floor(Math.random() * (maxNumber + 1) + minNumber); // Generates random number
    $('#myNumber').html(randomnumber); // Sets content of <div> to number
    return false; // Returns false just to tidy everything up
} 
```

HTML：

```
<div id="myNumber"></div> <!-- Your number will appear in here -->
<a href="no-javascript.html" id="getNumber">Get number</a> <!-- Link to get number. If the user has no JS enabled it will redirect to no-javascript.html --> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-15T15:09:36.600

> 我已经使用 javascript 完成了此操作，它会生成 0-9 之间的随机数。这是代码。

```
<html>
<body>

<p id="one"></p>
<button onclick="random()">Random</button>

<script>
 function random(){

document.getElementById("one").innerHTML = Math.floor(Math.random() * 10);
}
</script>

</body> 
```

> 如果您想在数字之间输出，例如 1-10 之间，只需编辑

```
Math.floor(Math.random() * 10) + 1; 
```

> 希望这会帮助你。谢谢

# php - php 变量在 IF 语句中不可见

> ID：16116834
> 
> 赞同：0
> 
> 时间：2013-04-20T05:13:31.223
> 
> 标签：php, mysql, post, if-statement, mysqli

我有两个步骤注册表单。从第一步开始，我将获取电子邮件和用户名，从第二步开始，我想获取名字和姓氏并将其添加到数据库中。但问题是我从第一种`POST`形式获得的变量，`$bridge_username`确切地说，在下面的 IF 语句中不可用（从底部开始的第一个）。问题是它们在其他任何地方都可见，但不在此特定`IF`语句中。我已经尝试了一切，包括会话。我可以清楚地看到该变量仍然存在（使用`vardump`或只是`echo`将其取出），无处不在，但不是我需要它的地方......我很高兴听到你的建议。

```
$bridge_email = $_POST['email'];
$bridge_username = $_POST['username'];
$bridge_pass = $_POST['password'];
$bridge_pass_conf = $_POST['passconf'];
$bridge_terms = $_POST['terms'];
$bridge_pass_counted = strlen($bridge_pass);
$bridge_username_counted = strlen($bridge_username);
if (isset ($_POST['email']) AND isset ($_POST['password']) AND isset ($_POST['passconf']) AND isset ($_POST['username'])) { 

if ($bridge_email != '' AND $bridge_pass != '' AND $bridge_pass_conf != '' AND $bridge_username != '' AND $bridge_terms != '') {

if ($bridge_pass == $bridge_pass_conf) {

if ($bridge_pass_counted >= 33 OR $bridge_pass_counted <= 5) {
} else {

if ($bridge_username_counted >= 65 OR $bridge_username_counted <= 3) {
} else {

if (is_numeric(substr($bridge_username, 0, 1))) {
                } else {
//CHECK IF USERNAME OR EMAIL ALREADY EXIST  
$checkreguser = $mysqli->query("SELECT username FROM `engine_users` WHERE username = '$bridge_username' OR email = '$bridge_email' LIMIT 0, 1 ");
$checkreguser = $checkreguser->fetch_assoc();
if ($checkreguser == '') {
//CREATING A NEW USER 
$mysqli->query("INSERT INTO `users` (`id`, `username`, `password`, `email`, `fname`, `lname`, `company`, `address`, `city`, `state`, `zip`, `country`, `currency`, `phone`, `vat`, `userlevel`, `created`, `notes`, `lastlogin`, `lastip`, `active`) VALUES\n"
    . "(NULL, '$bridge_username', '1411678a0b9e25ee2f7c8b2f7ac92b6a74b3f9c5', '$bridge_email', '', '', NULL, '', '', '', '', '', '', '', NULL, 5, '2011-05-01 18:10:14', '', '2013-04-19 22:25:11', '127.0.0.1', 'y')");
}}}}}}}

$bridge_fname = $_POST['1_1_3'];
$bridge_lname = $_POST['1_1_4'];
if (isset ($_POST['1_1_3']) AND isset ($_POST['1_1_4'])) {
$mysqli->query("UPDATE `users` SET `fname` = '$bridge_fname',`lname` = '$bridge_lname' WHERE `users`.`username` = '$bridge_username'");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:32:23.080

您是否正在检查会话是否已启动。我看到您一直提到数据已传递给会话。可能需要设置它以确保它得到处理。

尝试检查会话变量是否已创建，如果没有则重定向回注册/登录页面。

例如......如果会话未注册，它将移动到不同的脚本或位置。

```
session_start();
if(!session_is_registered(myusername)){
header("location:main_login.php"); 
```

您可以通过在会话的 isset 上回显内容来进一步测试会话以继续测试。同样，我会将您的代码分解为最基本的形式，以了解发生了什么。可能还需要查看前一页代码以了解发生了什么。

在网上找到了另一个可以帮助你的例子。[http://www.phpeasystep.com/phptu/6.html](http://www.phpeasystep.com/phptu/6.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:32:52.967

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

I would try and break your code down to a simple few lines and test the if statement. Better to identify where it is breaking. Maybe add some echo statements during different steps or comment and step through the code. Example below.

```
$bridge_email = $_POST['email'];
$bridge_pass = $_POST['password'];

if (isset($_POST['email']) AND isset($_POST['password']){
   // EXECUTE AN ALERT
echo"email and pass are set";
}else {
echo"not passing";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T06:22:05.270

我对您的代码进行了一些修改，以使您成为一个很好的例子，主要问题是您如何构建查询字符串

```
..." username = '$bridge_username' " 
```

这将产生一个像您看到的字符串
（在执行查询之前打印查询是很好的调试）您必须将其更改为：

```
." username = '".$bridge_username."' " 
```

并且变量将被其值替换。

还添加了对 post 值的检查，因此如果未设置它们，您不会收到警告。

```
$bridge_email = (isset($_POST['email']) ? $_POST['email'] : null);
$bridge_username = (isset($_POST['username']) ? $_POST['username'] : null);
$bridge_pass = (isset($_POST['password']) ? $_POST['password'] : null);
$bridge_pass_conf = (isset($_POST['passconf']) ? $_POST['passconf'] : null);
$bridge_terms = (isset($_POST['terms']) ? $_POST['terms'] : null);
//$bridge_pass_counted = strlen($bridge_pass); 
//$bridge_username_counted = strlen($bridge_username);

//return early and stay back from chained IFs
if (!$bridge_email || !$bridge_username || !$bridge_pass || !$bridge_pass_conf) {
    return;
}

if ($bridge_pass != $bridge_pass_conf) {
    return;
}

if ($bridge_pass AND strlen($bridge_pass) > 5 AND strlen($bridge_pass) < 33) {
    return;
}

if ($bridge_username AND strlen($bridge_username) > 5 AND strlen($bridge_username) < 33) {
    return;
}

if (is_numeric(substr($bridge_username, 0, 1))) {
    return;
}

$result = $mysqli->query("SELECT username FROM `engine_users` WHERE username = '" . $bridge_username . "' OR email = '" . $bridge_email . "' LIMIT 0, 1 ");
$checkreguser = $result->fetch_assoc(); // returns associative array of strings  or NULL if there are no more rows 
//if ($checkreguser == '') {

if ($checkreguser === null) {
//CREATING A NEW USER 
    $mysqli->query("INSERT INTO `users` (`id`, `username`, `password`, `email`, `fname`, `lname`, `company`, `address`, `city`, `state`, `zip`, `country`, `currency`, `phone`, `vat`, `userlevel`, `created`, `notes`, `lastlogin`, `lastip`, `active`) VALUES\n"
            . "(NULL, '" . $bridge_username . "', '1411678a0b9e25ee2f7c8b2f7ac92b6a74b3f9c5', '" . $bridge_email . "', '', '', NULL, '', '', '', '', '', '', '', NULL, 5, '2011-05-01 18:10:14', '', '2013-04-19 22:25:11', '127.0.0.1', 'y')");
}

$bridge_fname =  (isset($_POST['1_1_3']) ? $_POST['1_1_3'] : null);
$bridge_lname =  (isset($_POST['1_1_4']) ? $_POST['1_1_4'] : null);
if ($bridge_fname AND $bridge_lname ) {
    $mysqli->query("UPDATE `users` SET `fname` = '" . $bridge_fname . "',`lname` = '" . $bridge_lname . "' WHERE `users`.`username` = '" . $bridge_username . "'");
} 
```

请检查 IF 结构，提前返回使代码更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T05:16:14.050

利用

```
if(isset($_POST['bridge_username'])) 
```

看看它是否存在。

您还可以使用[三元运算符](http://en.wikipedia.org/wiki/%3f%3a)：

```
$email = isset($_POST['bridge_username']) ? $_POST['bridge_username'] = false; 
```

是的..“确切地说，$bridge_username 在下面的 IF 语句中不可用。”

如果您想要更详细的答案，请告诉我们确切的错误:)

# javascript - 如何在剃刀视图中使用@{Html.RenderPartial();}

> ID：16116837
> 
> 赞同：0
> 
> 时间：2013-04-20T05:13:45.657
> 
> 标签：javascript, asp.net-mvc-3, dhtmlx

我正在使用`asp.net MVC with Razor views`. 我正在使用 Iframe 加载选项卡内容，Tab.cshtml 是我给出的部分视图

```
tabbar.setContentHref("a1","Home/Tab"); 
```

而不是这个，我想使用我的部分页面使用`@{Html.RenderPartial("Tab");}` If I give like

```
tabbar.setContentHref("a1","@{Html.RenderPartial("Tab");}"); 
```

它显示错误，例如 *未找到部分视图“选项卡”或没有视图引擎支持搜索的位置。* 你能告诉我怎么做吗

# c++ - C++ - 导致 SIGSEV 信号的空方法

> ID：16116839
> 
> 赞同：2
> 
> 时间：2013-04-20T05:13:58.267
> 
> 标签：c++, segmentation-fault

我正在为大学作业制作一个简单的甲板/卡片/手面向对象的系统，但我已经陷入了这个问题。

我建立了一个简单的测试类，它调用对象中的各种方法。

```
int main() {
Deck deck = Deck();
deck.DisplayDeck();
deck.Shuffle();
deck.DisplayDeck();
Hand hand = Hand(1);
Card* card;
card = deck.DealNextCard();
hand.AddCard(card);
hand.ftring();
deck.DisplayDeck();
} 
```

问题来了`hand.ftring()`。当我调用它时，它会导致分段错误。奇怪的是，它不包含任何代码。

在`hand.cpp`：

```
string Hand::ftring() {
} 
```

如果我删除它，它会运行到完成。如果我向该方法添加控制台输出，它会打印它然后崩溃。我完全不知道该怎么做，因为调试器只说

```
Program received signal SIGSEGV, Segmentation fault.
In ?? () () 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T05:18:20.963

您声明要在 fstring 函数中返回一个字符串，但实际上并没有返回任何内容。这是不好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:18:40.143

您的方法必须返回 a `string`- 这是您声明它的方式。你得到未定义的行为。

# android - 谷歌静态地图API？

> ID：16116842
> 
> 赞同：-1
> 
> 时间：2013-04-20T05:14:04.997
> 
> 标签：android, google-maps, google-static-maps

我使用的是谷歌地图 api v1，我可以将地图绘制到画布上并保存，现在我使用谷歌地图 api v2，因为我在 3 月 13 日之前获得了调试密钥，而就在这个周末准备好签署但不能因为我不知道它将被停产，所以，我的问题是：

```
1: is static maps api the correct way to do what i was doing in google maps 
api v1 draw the mapView to a canvas and compress the bitmap.

2: if it is does 25000 free requests pertain to me the developer or
 each individual user of the app that i am making? 
```

感谢您的时间....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:18:33.023

我的猜测是您将 Google Maps API v2（也已弃用）与 Google Maps **Android** API v2 混淆了。

新的 API 在这里：[https ://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

Android API v2 没有这样的限制。

# c++ - 不能包含头文件

> ID：16116844
> 
> 赞同：0
> 
> 时间：2013-04-20T05:14:12.110
> 
> 标签：c++, qt

我需要在我的项目中包含来自 sqlite3x 库（或来自 sqlite）的头文件。我刚刚在 Qt Creator 中创建了新项目，并在 .pro 文件中添加了以下几行：

> INCLUDEPATH += $$quote(D:/libs/libsqlite3x-2007.10.18) INCLUDEPATH += $$quote(D:/libs/sqlite-amalgamation-3071502)

然后我试图包括

```
#include <sqlite3x.hpp> 
```

并编译。

> 无法打开包含文件：'sqlite3.h'：没有这样的文件或目录

为什么？

如果我写

```
#include <sqlite3.h> 
```

我有同样的错误。

当我编写这个预处理指令时，Qt Creator 会给我一个自动完成功能，如果我在这一行按 F2，它将打开这个文件。

[http://pastie.org/7670341](http://pastie.org/7670341) [http://pastie.org/7670574](http://pastie.org/7670574)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:23:18.727

你需要

```
INCLUDEPATH += $$quote(D:/libs/libsqlite3x-2007.10.18) $$quote(D:/libs/sqlite-amalgamation-3071502) 
```

如果您看到[http://pastie.org/7670574](http://pastie.org/7670574) 这些是包含指令

> -I"D:\libs\libsqlite3x-2007.10.18" -I"D:\libs\Qt\Qt5.0.0\5.0.0\msvc2010\include" -I"D:\libs\Qt\Qt5.0.0\ 5.0.0\msvc2010\include\QtWidgets" -I"D:\libs\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtSql" -I"D:\libs\Qt\Qt5.0.0\5.0\. 0\msvc2010\include\QtGui"-I"D:\libs\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtCore"-I"发布"-I"。" -我”。” -I"D:\libs\Qt\Qt5.0.0\5.0.0\msvc2010\mkspecs\win32-msvc2010"

如果你看 - 你看不到`D:/libs/sqlite-amalgamation-3071502`。您的构建工具没有拾取目录并将其添加到目录中，`INCLUDEPATH`因为它只拾取`INCLUDEPATH`一行 - 所以两者都在同一`INCLUDEPATH`行中，并用空格隔开。

# .net - 如何在EF的父对象中添加子对象

> ID：16116846
> 
> 赞同：1
> 
> 时间：2013-04-20T05:14:38.923
> 
> 标签：.net, entity-framework, generics, parent-child

在 EF4 上工作。

我知道 EF ObjectContext 可以是父子关联中涉及的三个属性，两个导航属性（`parent.Children`, `child.Parent`）和一个外键属性（`child.ParentId`）。我需要`parent.Childer`导航方面的帮助。

```
private List<T2> FillChildControlOnSave<T1, T2>(BOMMasterController objController, List<T2> entityDetail, T1 objEntity)
            where T1 : PlnBOMMaster
            where T2 : PlnBOMDetail
{
    #region MyRegion        

    #endregion

    foreach (T2 c in entityDetail)
    {
        if (c.Action == XERP.Entity.ActionMode.Add)
        {
            objEntity.PlnBOMDetails.Add(c);
        }

        if (c.Action == XERP.Entity.ActionMode. Update)
        {
            objEntity.PlnBOMDetails.Add(c);
        }
    }
} 
```

想`objEntity.PlnBOMDetails.Add(c);`用通用替换`objEntity.###<T2>.Add(c);`。帮助我为上述添加和更新条件编写通用语法。如果有任何问题，请询问，任何类型的建议都可以接受。在此先感谢。

# file - System.IO.File.Copy 引发 IOException

> ID：16116847
> 
> 赞同：0
> 
> 时间：2013-04-20T05:14:41.253
> 
> 标签：file, copy

我正在尝试复制一些文件：

```
private void DoCopy() {
    string[] files = Directory.GetFiles(Application.StartupPath + "\\App_Data", "*.*", SearchOption.AllDirectories);

    string sFtpToReadFileFrom = "ftp://<user>:<pass>@mysite.tk/updates/App_Data/";
    string sPathToWriteFileTo = Application.StartupPath + "\\App_Data";

    WebClient webClient = new WebClient();
    webClient.Credentials = new NetworkCredential("user", "pass");

    foreach (string s in files)
    {
        string fileName = Path.GetFileName(s);
        string destFile = Path.Combine(sPathToWriteFileTo, fileName);
        byte[] fileData = webClient.DownloadData(sFtpToReadFileFrom + fileName); //shows correct bytes

        File.Copy(s, destFile, true);
    }
} 
```

确切的错误是：进程无法访问文件 'C:\AppLauncher\AppLauncher\bin\Debug\App_Data\firstFile'，因为它正被另一个进程使用。

我在这里遵循了“MSDN How To”：http: [//msdn.microsoft.com/en-us/library/cc148994.aspx](http://msdn.microsoft.com/en-us/library/cc148994.aspx)

如果有人发现任何直接的危险信号，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:36:01.387

这就是我的看法：

您想从 FTP 服务器下载文件并将其写入本地磁盘。您正在做的是将源目录中的文件作为目标，这根本不起作用。如果文件在那里已经存在，如果你可以在那里获取它们的文件名，它们就会这样做。（因此例外）

这是你必须做的

连接到 FTP，获取那里的文件（它们的字节），然后在磁盘上创建文件。

```
private void DoCopy() {
    //string[] files = Directory.GetFiles(Application.StartupPath + "\\App_Data", "*.*", SearchOption.AllDirectories);

    //Acquire filenames from FTP-Server instead of local disk!

    string sFtpToReadFileFrom = "ftp://<user>:<pass>@mysite.tk/updates/App_Data/";
    string sPathToWriteFileTo = Application.StartupPath + "\\App_Data";

    WebClient webClient = new WebClient();
    webClient.Credentials = new NetworkCredential("user", "pass");

    foreach (string s in files)
    {
        string fileName = Path.GetFileName(s); //create file names based on FTP-server
        string destFile = Path.Combine(sPathToWriteFileTo, fileName);
        byte[] fileData = webClient.DownloadData(sFtpToReadFileFrom + fileName); //shows correct bytes

        //File.Copy(s, destFile, true); Rather use File.WriteAllBytes
        File.WriteAllBytes(destFile, fileData);
    }
} 
```

请参阅[此处](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)以获取`File.WriteAllBytes`.

但是，从 FTP 获取文件名并不是那么简单。有[`FtpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest%28v=vs.110%29.aspx)-class来支持你。

# ruby-on-rails - Rails - 在教程索引视图中显示教程属于哪个类别

> ID：16116848
> 
> 赞同：1
> 
> 时间：2013-04-20T05:14:43.770
> 
> 标签：ruby-on-rails, ruby, has-many, belongs-to

我有一个`tutorial`模型和一个`tutorial_category`模型。我使用`has_many` `belongs_to`关系将两者联系在一起。在我的教程索引视图中，我正在循环浏览教程，如下所示：`<% @tutorials.each do |tutorial| %>`. 在该循环中，我想显示每个教程所属的类别。我正在尝试这样做`<%= tutorial.tutorial_categories.title %>`（标题是 tutorial_category 模型中的一个属性，并且我也有 :tutorial_id 作为 tutorial_category 模型中的一个属性。并且 :tutorial_category_id 是教程模型中的一个属性，就此而言）。

这是我的教程控制器中的索引操作：

```
def index
   @tutorials = Tutorial.all
   @tutorial = Tutorial.new
   @tutorial_categories = TutorialCategory.select("DISTINCT title, id")

   respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @tutorials }
  end
end 
```

我无法弄清楚我在这里做错了什么。根据我的经验，这一切都应该正常工作，尽管我已经有几个月没有编写任何 Ruby 代码了，所以我可能在这里遗漏了一些愚蠢的东西。任何帮助，将不胜感激！

**更新：我的模型**

```
class Tutorial < ActiveRecord::Base
  attr_accessible :content, :title, :tutorial_category_id
  belongs_to :tutorial_category
end

class TutorialCategory < ActiveRecord::Base
  attr_accessible :title, :tutorial_id
  has_many :tutorials
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:28:44.933

If you want to be able to list the tutorial categories next to tutorials then do the following:

```
def index
   @tutorials = Tutorial.includes(:tutorial_category)
   @tutorial = Tutorial.new
   ...
  end
end 
```

Then you can iterate over them

```
<% @tutorials.each do |tutorial| %>
  <%= tutorial.tutorial_category.title %>
<% end %> 
```

# unicode - 如何逐个字符地遍历 UFT16 编码的字符串？

> ID：16116852
> 
> 赞同：0
> 
> 时间：2013-04-20T05:15:02.220
> 
> 标签：unicode, character, iteration, livecode

我有一个 UFT16 编码字符串`theUFT16string`。它包含双字节字符。我想通过 Unicode 字符对 Unicode 字符进行交互。我知道块表达式由单字节字符工作？

一个例子

我们有以下字符串

```
 abcαβɣ 
```

我们想要遍历它并将每个字符放在另一个容器中的一行上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:38:14.247

在 LiveCode 中，有两种方法可以从 UTF16 字符串中获取字符。如果字符串显示在字段中，您可以执行

```
select char 3 of fld 1 
```

如果字段中有俄语或波兰语文本，它将正确选择 1 个字符。但是，此功能在 LiveCode 中没有得到很好的开发，并且在许多中文、日语和阿拉伯语（以及其他）语言中都会失败。因此，现在最好使用字节：

```
select byte 5 to 6 of fld 1 
```

后者也将与 LiveCode 的未来版本兼容，而前者可能不兼容。

无论如何，您将字符串放在变量中，这意味着您必须将字符串作为字节处理（您可以使用字符，但在这种情况下，字节和字符的处理方式相同，因为数据位于变量中）。您可以通过两个步骤迭代变量，即一次一个字符：

```
repeat with x = 1 to number of bytes of theUFT16String step 2
  put byte x to x+1 into myChar
  // do something with myChar here, e.g. reverse the bytes?
  put byte 2 of myChar & char 1 of myChar after myNewString
end repeat
// myNewString now contains the entire theUTF16String in reverse byte order. 
```

（您可以在 3 行而不是 4 行中执行此操作，但出于示例的目的，我添加了一行将字节存储在 var myChar 中）。

# wordpress - 不能根据分类术语显示自定义帖子类型标题

> ID：16116853
> 
> 赞同：0
> 
> 时间：2013-04-20T05:15:03.620
> 
> 标签：wordpress

尝试根据过滤的自定义分类术语列出所有自定义帖子类型标题我得到所有帖子标题的列表，而不是获取查询帖子的列表。这是我正在使用的代码：

```
<?php 
    $loop = new WP_Query(
                  array(
                    'post_type' => 'photos',
                    'technique' => 'zevar',
                    'post_child' => 0,
                    'posts_per_page' => 10
                  )
             );
 ?>
<?php 
    while ( $loop->have_posts() ) : $loop->the_post();
 ?>
<?php the_title(); ?> 
<?php endwhile; ?> 
```

如您所见，我有一个名为“照片”的自定义帖子类型和注册为“技术”的自定义分类。在分类学“技术”下，我有一些术语，其中之一是“zevar”。你能告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:54:03.310

您的分类查询不正确。检查以下代码。

```
<?php 
    $loop = new WP_Query(
                  array(
                    'post_type' => 'photos',
                    'tax_query' => array(
                        array(
                            'taxonomy' => 'technique',
                            'field' => 'slug',
                            'terms' => 'zevar'
                        )
                    ),

                    'posts_per_page' => 10
                  )
             );
 ?>
<?php 
    while ( $loop->have_posts() ) : $loop->the_post();
 ?>
<?php the_title(); ?> 
<?php endwhile; ?> 
```

关于如何使用分类参数的参考[https://codex.wordpress.org/Class_Reference/WP_Query#Taxonomy_Parameters](https://codex.wordpress.org/Class_Reference/WP_Query#Taxonomy_Parameters)

# c# - 如何在 C# 中添加窗口服务/安装它并通过此窗口服务运行 exe(My Job.exe)？

> ID：16116854
> 
> 赞同：0
> 
> 时间：2013-04-20T05:15:06.350
> 
> 标签：c#, windows-services, installation

实际上我想通过 C# 中的窗口服务运行 exe 文件（我的 Job.exe），但是当我启动计算机时应该自动启动窗口服务？

我已经手动添加了窗口服务（MyService）。我还设置了我的应用程序项目，我还添加了此服务，以便在安装我的应用程序时也可以安装。我有带有属性的 serviceInstaller1

```
StartType=Automatic;ServiceName=MyService. 
```

我也有带有属性的 serviceProcessInstaller1

```
Account=LocalSystem; 
```

当我运行此程序时，我的 Applicationo 已安装，但未安装 MyService，而且我在计算机管理服务中也看不到它。

任何人都可以帮助我，我已经花了两天时间，但没有找到合适的指导方针。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:30:46.853

How is your application being installed? Did you create an installer (.msi file) for it? It sounds like you're trying to implement your own installer instead of using existing tool to do this.

I recommend [Advanced Installer](http://www.advancedinstaller.com/). It is a very powerful installer generator and has all the features you need in the free version, and more importantly, it's very easy to use. This tool lets you create an install wizard with the ability to patch and uninstall your software (including services, registry values, files, etc).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:37:18.173

我最近在 VS2010 和 .Net 4.5 中有一个带有 Windows 服务的项目，用户操作系统将是 Windows Server 2008。我很长时间无法创建全功能安装，但我仍然没有，但请求已更改，因此无需安装文件。但我可以给你建议“如何做”。如果您没有购买 InstallShield 版本，您需要找到其他一些程序来创建安装文件。对于安装，您只需复制服务的 .exe 输出，一个批处理文件将具有以下内容：

```
@ECHO off

"C:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil.exe" "%~dp0%<filename>.exe"

pause 
```

然后您需要以管理权限运行此批处理文件。两个文件（.exe 和 .bat）必须在同一个文件夹中。您可以删除`pause`命令，但您将看不到服务注册是否成功。确保您已在 PC 上安装了目标 .NET Framework。

我希望这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:38:03.030

如果您只需要在系统启动时运行您的 exe 文件（My Job.exe），您可以将您的 exe 添加到[Windows 任务计划程序](http://windows.microsoft.com/en-sg/windows7/schedule-a-task)。

*使用 Windows 服务有什么特定目的吗？*

我这么说的原因是您有多种选择来调用您的 exe，如下所示

*   计划基于常见的重复事件，即计算机启动时或用户登录时。
*   基于日历的计划，即每天、每周、每月或一次。
*   高级选项，例如基于事件的执行等。

# c - 文件写入意外输出

> ID：16116859
> 
> 赞同：-1
> 
> 时间：2013-04-20T05:15:26.177
> 
> 标签：c, file-io, whitespace

我制作了这个程序，它将文本从一个文件复制到另一个文件。结果是，原始文件内容“这是一个测试”新文件内容“这是一个测试”这有效，然后我评论了该部分并试图使输出看起来像这样。我想要的结果，原始文件内容“这是一个测试”新文件内容，

```
"T
h
i
s

i
s

a

t
e
s
t" 
```

出于某种原因，输出是对角线并且搞砸了，我几乎可以肯定这是因为空格字符搞砸了，所以我尝试检查空格，而不是在遇到空格时移动到下一行。

```
#include <stdio.h>

int main(void){
    FILE *fp = fopen("originalfile.txt", "r");
    char buffer[81];
    fgets(buffer, 81, fp);
    fclose(fp);

    //copies the file
    /*
       FILE *fp2 = fopen("newfile.txt", "w");
       fputs(buffer, fp2);
       fclose(fp2);
     */

    //copies but moves to next line after each character
    FILE *fp2 = fopen("newfile.txt", "w");
    int x;
    char z = '\n';
    int a = z;
    printf("%d", z);
    for (x = 0; x < strlen(buffer); x++){
        fputc(buffer[x], fp2);
        int res = fgetc(fp2);
        if(isspace(res) != 0){
            fseek(fp2,81,SEEK_CUR);
        } else {
            printf("yeh it got here");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:18:09.690

您可以如下更新 for 循环以将每个字符放在新行上：

```
for (x = 0; x < strlen(buffer); x++){
    fputc(buffer[x], fp2);
    fputc('\n', fp2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:47:07.580

Rohan 的解决方案有效。我已经在我的机器上测试过了，试试这个：

```
#include <stdio.h>
#include<string.h>
int main(void){
    FILE *fp = fopen("originalfile.txt", "r");
    char buffer[81];
    fgets(buffer, 81, fp);
    fclose(fp);

    FILE *fp2 = fopen("newfile.txt", "w");
    int x;
    for (x = 0; x < strlen(buffer); x++){
        fputc(buffer[x], fp2);
        fputc('\n', fp2);
    }
    return 0;
} 
```

# php - PHP文件上传器出错

> ID：16116862
> 
> 赞同：-1
> 
> 时间：2013-04-20T05:15:37.000
> 
> 标签：php

现在，我遇到了另一个问题....我正在尝试使用此代码上传文件：-

```
<form action="up.php" method="post">
                    <input type="hidden" name="MAX_FILE_SIZE" value="200000" />
                    Choose a file to upload: <input name="uploadedfile" type="file" /><br />
                    <input type="submit" name="submit" value="Upload!"/>
</form> 
```

这是 up.php:-

```
if(!isset($_FILES["uploadedfile"])) die("Hacking attempt"); 
```

在上面的代码中，它说黑客尝试......为什么没有文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:25:14.440

首先不推荐使用 mysql_ 函数 - 使用 mysqli_ 或 PDO 但请尝试以下操作来识别错误：

```
$q = mysql_query($query,$c);
if (!$q) die(mysql_error());` 
```

# php - 如何在树中显示附加数据而不刷新

> ID：16116864
> 
> 赞同：-1
> 
> 时间：2013-04-20T05:15:41.883
> 
> 标签：php, jquery, codeigniter, treeview

这是我的树视图

![在此处输入图像描述](https://i.stack.imgur.com/jNOwR.jpg)

我已经这样做了，当我右键单击树名（例如，资产，非当前，Shah）并单击添加头然后会出现jquery对话框，我添加头代码和头名，并成功保存在mysql数据库中在 php 中使用 codeigniter 框架工作。

基本上，它是在标题下创建的子标题。

我需要提交后，它将在该标题下显示子标题，而无需刷新树。例如 ，

如果我在资产下创建子标题，则在“104-Kamrul”之后附加子标题而不刷新和显示而不更改。

我该如何解决它，请任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:51:44.267

给定以下标记：

```
<div id="tree">
    <ul>
        <li><a href="#">Asset</a>
            <ul>
                <li><a href="#">101-Non Current</a></li>
                <li><a href="#">102-Current Asset</a></li>
                <li><a href="#">103-Abdul Halim Shah</a>
                    <ul>
                        <li><a href="#">10301-Shah</a>
                            <ul>
                                <li><a href="#">1030101</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><a href="#">104-Kamrul</a></li>
            </ul>
        </li>
        <li><a href="#">2-Expenses</a></li>
    </ul>
</div> 
```

我编写了几个 jQuery 函数来动态添加新节点。一个将节点添加到指定选择器下方，另一个将其添加为兄弟节点：

```
function addSibling(selector, content) {
    var markup = '<li><a href="#">' + content + '</a></li>';
    $(selector).parent().append(markup);
}

function addChild(selector, content){
    var obj = $(selector);
    var markup='<li><a href="#">' + content + '</a></li>';
    var element;
    if ($('ul', selector).length > 0){
        //nested list
        element = obj.find('> ul');
    } else {
        element = obj;
        markup = '<ul>' + markup + '</ul>';
    }
    element.append(markup);
} 
```

尽管您必须使它们适应您的代码，但您可以使用以下单击功能来测试它们：

```
$("#tree ul").click(function (e) {
    //addSibling(e.target, 'new one');
    addChild(e.target, 'new one');
    e.stopPropagation();
}); 
```

我不明白您的变量是什么，但是要在不加载页面的情况下将数据发送到服务器，您可以使用类似以下的 ajax 函数：

```
$('#form').submit(function() {
    var headCode = $('input[name="headCode"]').val();
    var headName = $('input[name="headName"]').val();
    $.ajax({
        url: "load.php",
        type: 'POST',
        data: {
            head_code: headCode,
            head_name: headName
        },
        cache: false,
        success: function(json){
            alert('loaded');
        }
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:23:57.793

我认为你需要 ajax 来制作你需要的东西，只需为每个树父使用一个特定的类，例如：

```
<div class="parent-1">
<div class="child-1"></div>
<div class="child-2"></div>
</div>
<div class="parent-2">
<div class="child-1"></div>
<div class="child-2"></div>
</div> 
```

现在只需加载您需要遵循父母课程的内容：

```
$('.parent-1').children('.child-1').load('http://site.com/url/to/load/new/childs'); 
```

或者

```
var _childs = $.get('http://site.com/url/to/get/some/childs');
$('.parent-1').append(_childs); 
```

# python-3.x - tkinter 列表框插入错误“无效的命令名称”.50054760.50055432“

> ID：16116876
> 
> 赞同：-1
> 
> 时间：2013-04-20T05:16:39.817
> 
> 标签：python-3.x, listbox, tkinter

我有一个对象数据库，您可以在列表框中查看数据库中的项目，并且有一个用于删除项目和创建项目的按钮。创建项目会打开项目类的对话窗口，然后项目的数据将存储在数据库中。我用我的设置的一个非常简单的副本重现了这个问题（见下面的代码）。

每次添加新项目时，添加成功（下次打开数据库对话框时它就在那里），但列表框没有插入项目，当我关闭数据库对话框时出现以下错误：

> Tkinter 回调 Traceback 中的异常（最近一次调用最后一次）：
> 文件“C:\Python33\lib\tkinter__init__.py”，第 1442 行，**调用** 返回 self.func(*args) 文件“”，第 21 行，在 addRecord 文件中C:\Python33\lib\tkinter__init__.py"，第 2604 行，插入 self.tk.call((self._w, 'insert', index) + elements) _tkinter.TclError: invalid command name ".50054760.50055432"

如果我只是尝试创建对象并填充其值而不调用其输入 GUI（这是将内容插入数据库的过程所必需的），则不会出现相同的问题。我在另一个线程中看到了类似的错误（对不起，但我似乎无法再次找到它），问题在于多线程。我不知道我正在做任何线程，也不想下载另一个包来处理 tkinter 线程。有任何想法吗？解决方法？如果有帮助，我正在使用 Python v3.3 和 64 位 Windows 7。

这是我的简化数据库代码：

```
import tkinter
import traceback

# Test =========================================================================
class Test:
    def __init__(self):
        """A database of objects' IDs and values."""

        self.data = {1: 'a', 2: 'b', 3: 'c'}

    #---------------------------------------------------------------------------
    def addRecord(self):
        """Opens up a new item for editing and saves that ability to the
        database."""
        print('hi0')
        newItem = OtherObject()
        newItem.create(self.root)

        print('hi1')
        self.data[newItem.ID] = newItem.value
        print('hi2')
        self.listbox.insert(tkinter.END, self.formatItem(newItem.ID))
        print('hi3')

    #---------------------------------------------------------------------------
    def delRecord(self):
        """Removes selected item from the database."""

        try:
            index = self.listbox.curselection()[0]
            selection = self.listbox.get(index)
        except:
            return
        ID = int(selection.split(':')[0])

        self.data.pop(ID)
        self.listbox.delete(index)

    #---------------------------------------------------------------------------
    def dataframe(self, master):
        """Assembles a tkinter frame with a scrollbar to view database objects.
        (Returns Frame, Scrollbar widget, Listbox widget)

        master: (Tk or Toplevel) tkinter master widget."""

        frame = tkinter.Frame(master)

        # scrollbar
        scrollbar = tkinter.Scrollbar(frame)
        scrollbar.pack(side=tkinter.LEFT, fill=tkinter.Y)

        # listbox
        listbox = tkinter.Listbox(frame, yscrollcommand=scrollbar.set)
        listbox.pack(side=tkinter.LEFT, fill=tkinter.BOTH)

        # fill listbox
        for ID in self.data:
            listbox.insert(tkinter.END, self.formatItem(ID))

        return (frame, listbox, scrollbar)

    #---------------------------------------------------------------------------
    def destroyLB(self, e):
        for line in traceback.format_stack():
            print(line.strip())

    #---------------------------------------------------------------------------
    def formatItem(self, ID):
        """Creates a nice string representation of an item in the database."""

        return '{0}:{1}'.format(ID, self.data[ID])

    #---------------------------------------------------------------------------
    def listboxSelect(self, e):
        """Manages events when the selection changes in the database interface.

        e: (Event) tkinter event."""

        try:
            selection = self.listbox.get(self.listbox.curselection()[0])
        except:
            return

        # set description label
        ID = int(selection.split(':')[0])
        self.lblstr.set(self.data[ID])

    #---------------------------------------------------------------------------
    def view(self):
        """Displays database interface."""

        self.root = tkinter.Tk()

        # listbox frame
        self.frame, self.listbox, self.scrollbar = self.dataframe(self.root)
        self.frame.grid(column=0, row=0)
        self.listbox.bind('<<ListboxSelect>>', self.listboxSelect)
        self.listbox.bind('<Destroy>', self.destroyLB)

        # record display frame
        self.lblstr = tkinter.StringVar()
        self.lbl = tkinter.Label(self.root, textvariable=self.lblstr)
        self.lbl.grid(column=1, row=0, sticky=tkinter.N)

        # buttons frame
        self.frame_btn = tkinter.Frame(self.root)
        self.frame_btn.grid(row=1, columnspan=2, sticky=tkinter.E+tkinter.W)

        # 'create new' button
        self.btn_new = tkinter.Button(
            self.frame_btn, text='+', command=self.addRecord)
        self.btn_new.grid(row=0, column=0)

        # 'delete record' button
        self.btn_del = tkinter.Button(
            self.frame_btn, text='-', command=self.delRecord)
        self.btn_del.grid(row=0, column=1)

        # display
        self.root.mainloop()
# Test =========================================================================

# OtherObject ==================================================================
class OtherObject:
    """An object with an ID and value."""

    def __init__ (self):
        self.ID = 0
        self.value = ''

    #---------------------------------------------------------------------------
    def create(self, master=None):
        """open a dialog for the user to entry a new object ID and value.

        master: (Tk or Toplevel) tkinter master widget."""

        self.stuff = tkinter.Toplevel(master)

        # ID
        tkinter.Label(self.stuff, text='ID: ').grid(row=0, column=0)

        self.IDvar = tkinter.StringVar(self.stuff)
        self.IDvar.set(self.ID)
        IDwidget = tkinter.Entry(self.stuff, textvariable=self.IDvar)
        IDwidget.grid(row=0, column=1)

        # value
        tkinter.Label(self.stuff, text='Value: ').grid(row=1, column=0)

        self.valueVar = tkinter.StringVar(self.stuff)
        self.valueVar.set(self.value)
        valueWidget = tkinter.Entry(self.stuff, textvariable=self.valueVar)
        valueWidget.grid(row=1, column=1)

        # OK button
        tkinter.Button(self.stuff, text='OK', command=self.OK).grid(row=2)

        self.stuff.mainloop()

    #---------------------------------------------------------------------------
    def OK(self):
        try: self.ID = int(self.IDvar.get())
        except: self.ID = 0
        self.value = self.valueVar.get()

        self.stuff.destroy()
# OtherObject ================================================================== 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T12:15:29.897

您正在创建多个`Tk`. Tkinter 的设计不是这样工作的，你会得到意想不到的行为。您需要重构您的代码，以便您`Tk`只创建一次的实例。如果您需要多个窗口，请创建`Toplevel`.

*...时间流逝...问题中的代码已更新...*

在您的问题的更新版本中，您现在正在创建一个实例`Tk`，然后创建一个实例`Toplevel`。这很好。但是，您也`mainloop`不止一次打电话，这是一个问题。更糟糕的是，您正在重新定义`self.root`无疑是问题的一部分。您必须`mainloop`在整个程序中只调用一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T01:58:10.307

布莱恩·奥克利（Bryan Oakley）指导我解决了我遇到的确切问题：

(1) 我在我的 OtherObject 类中创建了第二个 Tk 对象。

(2) 我在 OtherObject 类中调用了 mainloop。

应该只存在一个 Tk 对象，并且无论要显示多少个窗口，都应该只调用一次 mainloop。

# php - 为复选框提供的参数无效

> ID：16116881
> 
> 赞同：0
> 
> 时间：2013-04-20T05:17:28.977
> 
> 标签：php, mysql

我的网站显示此警告：

> 第 37 行 /admin/insert.php 中为 foreach() 提供的参数无效

我已使用此 php 代码从复选框将数据插入 mysql 数据库

我该如何解决？

谢谢

```
<table>
    <tr>
        <td bgcolor="#FFEBC1"> 
            <input type="checkbox" name="E1[]"value="1" >
                国語
            <input type="checkbox" name="E1[]" value="2" >
                算数
            <input type="checkbox" name="E1[]" value="3" >
                理科
            <input type="checkbox" name="E1[]" value="4" >
                社会 
            <input type="checkbox" name="E1[]" value="5" >
                英語
         </td>
     </tr>
</table> 
```

```
<?php 
$ele_school = $_POST['E1'];
$selected_schoo2 = "";
foreach ($ele_school as $ele_school2 ) {
    $selected_schoo2 .= $ele_school2 . ", ";
}
$selected_schoo2 = substr($selected_schoo2, 0, -2);
$query="insert into  person(id,login_date,name,selected_schoo)
     values('$_POST[PID]',
    '$_POST[REGISTRATION]',
    '$_POST[FURIGANA2]',
    '$selected_schoo2')";
     mysql_query($query) or die("not successfully insert".mysql_error());
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T05:28:30.687

可能存在数据没有进入您的 $_POST['E1'] 的情况，

那么在这种情况下，您正在为空白数组执行 foreach，所以您需要做的就是

```
if(isset($ele_school) && $ele_school != NULL){
     foreach($ele_school as $ele_school2){
     // your script
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:19:29.483

你应该使用：

```
if (isset($_POST['E1']) {  

    //then use your foreach loop
} 
```

# java - Java 创建一个未知大小的名册

> ID：16116882
> 
> 赞同：0
> 
> 时间：2013-04-20T05:17:30.233
> 
> 标签：java, database, arrays

我将其发布为一个选择您的大脑的问题。对于未知大小的名册，数组是适当类型的数据持有者吗？

我希望用 3 种方法创建一个小类

> 1.  addToRoster //这将向建议的数组添加一个名称，接收一个数组和一个字符串。
> 2.  getRoster //这将返回打印到控制台的花名册元素。
> 3.  remFrRoster // 它会取一个名字，循环遍历名册并在找到时将其删除。

我真的是Java的初学者。我只编程了大约一个星期，并希望找出一些东西。一，这是一个适合班级的设计方法吗？二，数组是存储字符串花名册的首选方法吗？最后，我是否必须将我的数组初始化为确定的大小，或者我可以让它在接近初始化大小的限制时改变大小？

谢谢，全景

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:22:31.470

您可以使用 ArrayList：

```
ArrayList<Player> roster = new ArrayList<Player>();  
roster.add(new Player(32));  
System.out.println(roster.get(0).getAge()); 
```

ArrayList 本质上与数组相同，但它的大小可以更改。*仅当程序运行时*花名册上的球员人数将发生变化时，才使用 ArrayList 。即，如果您要从文件中读取播放器，只需使用数组，但如果您要在程序启动后创建不确定数量的播放器，请使用 ArrayList。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T05:25:39.483

我会使用 Collection 而不是数组来根据元素的数量动态调整商店的大小。

*   A[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)适合存储任意数量的元素。
*   A[`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)适合存储使用对象属性键入的任意数量的对象。

如果您`Roster`碰巧包含名称以外的属性，那么您可以使用 a`Map`来存储您的`Roster`对象。

*   addToRoster 会简单地将一个元素放在 Map 中作为`map.put(roster.getName(), roster)`.
*   getRoster 将遍历`map.values()`集合并打印每个名册对象。
*   remFrRoster 将简单地使用指定的名称删除名册对象，`map.remove(name)`. 如果此调用的返回值为 null，则表示没有具有该名称的 roster 对象。

HTH。

# ruby - 使用 Ruby 更新 Active Directory 密码时出现错误 53

> ID：16116883
> 
> 赞同：0
> 
> 时间：2013-04-20T05:17:32.577
> 
> 标签：ruby, active-directory

我在尝试向使用 Ruby 脚本创建的 Active Directory 帐户添加密码时遇到了一些麻烦。SSL 连接通过以下方式建立：

```
ldap = LDAP::SSLConn.new(LDAP_HOST, SSL_PORT) 
```

纯文本密码通过一个函数运行以返回一个 base 64 UTF-16LE 字符串。

```
def convert_to_unicode pwd
    unicode_pwd = pwd.encode("UTF-16LE")
    return Base64.encode64(unicode_pwd)
end 
```

向 AD 添加条目不是问题，但一旦输入密码，它就会返回错误 53：不愿意执行。传入的密码符合 AD 要求，并且通过 bash 脚本完成时没有任何问题。例如，通过 convert_to_unicode 运行以下命令应该返回一个带引号的 new_Password1 以供 AD 设置。

```
'"new_Password1"' 
```

想知道是否有人有任何有用的东西可以指出我可能会丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T11:58:37.173

您是否尝试过将编码运行为 UTF-16LE？

```
 def microsoft_encode_password pwd
    ret = ""
    pwd = "\"" + pwd + "\""
    pwd.length.times{|i| ret+= "#{pwd[i..i]}\000" }
    ret
  end 
```

# sql-server-2005 - OpenRowSet 中的 Unicode 查询

> ID：16116889
> 
> 赞同：1
> 
> 时间：2013-04-20T05:18:23.350
> 
> 标签：sql-server-2005, stored-procedures, unicode, nvarchar, openrowset

我有一个带有 nvarchar 参数的存储过程。我想使用 OPENROWSET 返回表。但是当我使用以下代码时，结果将不正确

```
Declare @ID int
Declare @sql nvarchar(max)
Declare @p1  nvarchar(8)
Set @ID=1
Set @sql='SELECT * 
FROM OPENROWSET(
    ''SQLNCLI'',
    ''DRIVER={SQL Server};'',
    ''EXEC dbo.usp_test @p1 =''''' + @p1 + ''''')'
Exec(@sql) 
```

OPENROWSET 会将我的查询转换为 VARCHAR 并且不会正确执行我的过程。似乎 OPENROWSET 像这样执行我的代码：

```
exec dbo.usp_test @p1='????????' 
```

所以结果不正确。OPENROWSET 中是否有任何选项可以解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-23T07:34:31.340

当您使用`nvarchar`数据时，您需要`N`在字符串值之前添加一个特定字符 ( )，如下所示：

```
DECLARE @ID int
DECLARE @sql nvarchar(max)
DECLARE @p1  nvarchar(8)
SET @ID=1
SET @sql = N'SELECT * 
             FROM OPENROWSET(''SQLNCLI'',
                          ''DRIVER={SQL Server};'',
                          ''EXEC dbo.usp_test @p1 = N''' + @p1 + N''''')'
EXEC(@sql) 
```

> **注意：**
> 当你有`'''EXEC dbo.usp_test @p1 =''''' + 'p1' + ''''''`等于那是错误的`'EXEC dbo.usp_test @p1 =''p1''`，应该像`'''EXEC dbo.usp_test @p1 =''' + 'p1' + ''''''``'EXEC dbo.usp_test @p1 ='p1''`

# java - 在亚马逊云的 glassfish 服务器上部署 ear 时出现异常

> ID：16116892
> 
> 赞同：2
> 
> 时间：2013-04-20T05:18:51.563
> 
> 标签：java, amazon-ec2, glassfish

我们正在研究 Java 技术，我们已经在 J​​ava 中创建了企业应用程序。我们还在亚马逊 AWS 上创建了实例。我们在亚马逊上为我们的网络企业应用程序提供以下主机

```
SERVER AMAZON= ec2-54-235-50-8.compute-1.amazonaws.com
MYSQL= mysqld@ec2-23-23-65-23.compute-1.amazonaws.com 
```

我们在 glassfish 上创建了 JDBC 连接池，如下所示![在此处输入图像描述](https://i.stack.imgur.com/vo9Xv.png)

当我 ping jdbc 连接池时，它给出以下异常“类名错误或未为 com.mysql.jdbc.MySqlDataSource 设置类路径”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:17:25.347

试试这个：

```
cd ./glassfish3/glassfish/domain/domainl/lib
wget http://mysql.llarian.net/Downloads/Connector-J/mysql-connector-java-5.1.18.zip
unzip mysql-connector-java-5.1.18.zip
mv ./glassfish3/glassfish/domain/domainl/lib/mysql-connector-java-5.1.18/mysql-connector-java-5.1.18-bin.jar   ./glassfish3/glassfish/domain/domainl/lib 
```

通过这个你会得到`mysql-coonector-java.jar`lib 文件夹中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:58:36.133

是 mysql 连接器应该在您的 glassfish 域 lib 目录中。似乎 glassfish 找不到它。

```
glassfish-install-dir\glassfish\domains\domain1\lib 
```

# android - 未调用 ContentProvider 中的 onCreate()

> ID：16116894
> 
> 赞同：2
> 
> 时间：2013-04-20T05:19:00.063
> 
> 标签：android, android-contentprovider, oncreate

`onCreate()`方法 in`ContentProvider`没有被调用。虽然当我单击一个按钮时，它会进入`insert()`方法并返回`java.lang.NullPointerException`. 在`onCreate()`方法中我只有

```
@Override
public boolean onCreate() {
        Log.v(TAG,"Inside create provider");
        database = new DatabaseSQLiteMyDB(getContext());
        return false;
} 
```

日志 CAT 显示：

```
04-20 01:23:00.543: V/CLICKED(1607): CLICKED
04-20 01:23:00.553: V/Provider(1607): inside insert
04-20 01:23:00.573: V/database(1607): created
04-20 01:23:00.573: E/pkg.OnPut_ClickListener(1607): java.lang.NullPointerException
04-20 01:23:00.583: V/pkg.OnPut_ClickListener(1607): In exception code 
```

在清单中：

```
<provider android:name="somepkg.CustomContentProvider"
            android:authorities="somepkg.provider" /> 
```

在单击创建 URI 时：

```
{
    myURI=buildUri("content", "somepkg.provider");
            this.putNo=putNo;
            mContentValues = initTestValues();
    }
        private Uri buildUri(String scheme, String authority) {
            Uri.Builder uriBuilder = new Uri.Builder();
            uriBuilder.authority(authority);
            uriBuilder.scheme(scheme);
            return uriBuilder.build();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-08T09:57:30.013

您需要显示执行插入的代码。

抱歉，其余内容并非直接针对问题，但这是我在有关 ContentProviders 的代码示例中到处都看到的内容。

您不应调用`database = new DatabaseSQLiteMyDB(getContext());`ContentProvider onCreate。这是因为 SQLiteOpenHelper 文档中针对 getReadableDatabase 和 getWritableDatabase 给出的原因：

> 和getWritableDatabase一样，这个方法可能需要很长时间才能返回，所以你不应该从应用程序主线程调用它，包括从ContentProvider.onCreate()。

相反，保留对 SQLiteOpenHelper 实例的引用，并在查询/插入/删除/更新方法中酌情调用 getWritableDatabase/getReadableDatabase，如果您使用的是加载器，这些方法将被异步调用。

# matlab - 使用边缘提取的图像增强

> ID：16116895
> 
> 赞同：1
> 
> 时间：2013-04-20T05:19:10.500
> 
> 标签：matlab

我们可以使用函数在MATLAB中提取图像的边缘`edge()` 我的问题是如何将边缘与原始图像重新组合以获得具有增强边缘的图像以增加图像的清晰度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:48:53.367

忘了`edge()`。打电话[`imsharpen()`](http://www.mathworks.com/help/images/ref/imsharpen.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T08:35:15.133

您正在寻找的东西已经存在！

有问题的图像过滤器称为“锐化蒙版”。它基本上使用图像的边缘数据来锐化它。为了阐明，它实际上以某种方式做的是使用图像的差异和它的模糊版本，然后使用它来锐化图像。[你可以在这里](http://www.luminous-landscape.com/tutorials/understanding-series/understanding-usm.shtml)阅读更多关于它的信息。

要使用它，只需执行以下操作：

```
>> my_image = imread('lena.jpg');
>> subplot(1,2,1);
>> imshow(my_image);
>> subplot(1,2,2);
>> imshow(imfilter(my_image,fspecial('unsharp'))); 
```

这将产生：

![在此处输入图像描述](https://i.stack.imgur.com/hH9FS.png)

如您所见，第二张图像明显更清晰，这是通过使用非锐化蒙版将边缘数据“添加”到原始图像来完成的。

# svn - 从 SVN 中的主干子文件夹创建分支的后果是什么？

> ID：16116903
> 
> 赞同：8
> 
> 时间：2013-04-20T05:19:37.617
> 
> 标签：svn, branch

我认为通常当您分支时，您会分支整个主干，但在我的公司中，我看到人们将主干的子文件夹和更深层次的子文件夹分支 - 除了当您尝试在主干中找到正确的目录时感到困惑之外，还有其他实际后果吗合并回？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T11:42:45.013

问题不在于分支..它是合并：

**永远不要**合并回这样的“子树”文件夹。为什么？Subversion 会将其合并信息存储到此子树文件夹中。一旦发生这种情况，没有人可以再使用 merge -reintegrate 了。

[在这里查看更多信息](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.branchmerge.advanced.finalword)：

> 避免子树合并和子树合并信息，仅在分支的根上执行合并，而不是在子目录或文件上

这意味着只要您的树干中有子树合并信息，您就不能使用您通常应该使用的 -reintegrate 选项，因为这样合并要容易得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T13:42:07.683

正是你所说的。SVN 足够灵活，您可以从树中的任何位置分支，这令人印象深刻，直到您想要将其合并回来，然后您难以管理您创建的混乱。现在有时它是有意义的（例如，您有一个顶级目录，其中包含其他内容，或者您​​需要一个非常特殊的本地化分支来修复特定的错误），但通常您希望自己保持简单。

这意味着选择一个根作为您的分支，并坚持使用它，即使这意味着只从顶层分支。事情变得更容易管理。即使您这样做，分支的成本也可以忽略不计。

# eclipse - Maven 在使用 mvn compile 时不会将 JAR 添加到项目中，但在使用 mvn eclipse:eclipse 时会这样做

> ID：16116904
> 
> 赞同：0
> 
> 时间：2013-04-20T05:19:38.023
> 
> 标签：eclipse, maven, jar

我需要下载 Quartz 调度程序。所以我添加了它的依赖关系，`pom.xml`并且我还`sl4j`需要调度。所以这是我的`pom.xml`

```
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.17</version>

    <exclusions>
        <exclusion>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            </exclusion>
    </exclusions>
</dependency>
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.5.6</version>

    <exclusions>

        <exclusion>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
        </exclusion>
    </exclusions>

</dependency>
<dependency>
    <groupId>org.quartz-scheduler</groupId>
    <artifactId>quartz</artifactId>
    <version>1.8.5</version>
</dependency> 
```

当我运行该`mvn compile`命令时，它正在下载 quarts JAR 但不添加到我的 eclipse 项目中。但是当我运行`mvn eclipse:eclipse`它时，它会将 JAR 添加到项目中。为什么会这样？为什么`mvn compile`不将 JAR 添加到项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:27:14.573

你怎么能说它是在 eclipse:eclipse 上下载的，如果你在 eclipse 中进行项目刷新，请注意做 eclipse: eclipse 将修改项目的.classpath，然后只有 jar 反映。当导入的项目作为现有 java 项目完成时，会发生此行为。

# c - 为什么我的 printf 语句同时弹出？并得到一个无限循环？

> ID：16116913
> 
> 赞同：0
> 
> 时间：2013-04-20T05:21:31.293
> 
> 标签：c, syntax, while-loop, infinite-loop

为什么我在启动程序时会先做第一个printf语句，然后我输入，然后它同时做两个printf语句。这也是导致无限循环的原因吗？

启动程序

```
Player 1: Choose your symbol: 
    a 
```

这部分，两者同时输出

```
Player 2: Choose your symbol: 
player1, enter placement: 
```

然后我得到一个无限循环。是因为同时输出吗？

代码

```
include <stdio.h>
int check(char player);
void move(char player);
char board[3][3] ;

int main(void)
{
int first;
char player1, player2;

        printf("Player 1: Choose your symbol: \n");
        player1 = getchar();

        printf("Player 2: Choose your symbol: \n");
        player2 = getchar();

int i=0;
int win;char turn;
while(win == 0)
{
        if((i%2) == 0){
                turn = player1;
                move(player1);
                win = check(player1);
                print();}
        else {
                turn = player2;
                move(player2);
                win = check(player2);
                print();}
        i++;
}

        if (i == 8)
                printf("its a tie");
        else
                printf("the winner is %c", turn);

return 0;
}
/*printing the board that takes in a placement int*/
void print(void)
{
        int r;
        printf("\n");
        for (r = 0; r < 3; r++){
                printf(" %c | %c | %c \n" , board[r][0], board[r][2], board[r][3]);
        if (r != 2)
                printf("___________\n");
        }
        printf("\n");
return;
}
/*check to see if someone won*/
int check(char player)
{
    int r, c;

    for ( r = 0 ; r <3 ; r++)
    {
        if ((board[r][0] == player) && (board[r][1] == player) && (board[r][2] == player))
            return 1;
    }

    for ( c = 0 ; c <3 ; c++)
    {
        if ((board[0][c] == player) && (board[1][c] == player) && (board[2][c] == player))
            return 1;
    }

    if((board[0][0] == player) && (board[1][1] == player) && (board[2][2] == player))
        return 1;

    if((board[0][2] == player) && (board[1][1] == player) && (board[2][0] == player))
        return 1;

    return 0;
}

void move(char player)
{
    int place;
    printf("player1, enter placement: \n");
    scanf("%d", &place);

    if (place == 1)
        board[0][0] = player;
    else if (place == 2)
        board[0][1] = player;
    else if (place == 3)
        board[0][2] = player;

    else if (place == 4)
        board[1][0] = player;
    else if (place == 5)
        board[1][1] = player;
    else if (place == 6)
        board[1][2] = player;

    else if (place == 7)
        board[2][0] = player;
    else if (place == 8)
        board[2][1] = player;
    else if (place == 9)
        board[2][2] = player;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:24:03.040

因为 first`getchar()`在输入流中留下一个换行符，供后续`getchar()`. 一种方法是使用另一个 getchar() 来消耗不需要的换行符。

```
 printf("Player 1: Choose your symbol: \n");
    player1 = getchar();
    getchar(); // consume a newline

    printf("Player 2: Choose your symbol: \n");
    player2 = getchar();
    getchar(); // consume a newline 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T05:28:53.643

您可能从 getchar(); 获得了 '\n' 字符。

您可以执行以下操作：

```
printf("Player 2: Choose your symbol: \n");
player2 = getchar();
while ( player2 != '\n' ) { player2 = getchar(); } 
```

在使用下一个 getchar() 再次读取之前清除标准输入；

# php - PHP 会话变量错误？

> ID：16116919
> 
> 赞同：0
> 
> 时间：2013-04-20T05:22:42.973
> 
> 标签：php, session-variables

我遇到了一个让我发疯的 PHP 会话的奇怪问题。这是我正在做的事情的要点

```
$tout = time();
session_start();
$_SESSION['dna'] = md5($_SERVER['HTTP_USER_AGENT']);
if (1 == $user->demo) 
    $_SESSION['demo'] = $user->demo;
$_SESSION['tout'] = $tout; 
```

这似乎工作得很好。然而，这种变体

```
$tout = time();
session_start();
$_SESSION['dna'] = md5($_SERVER['HTTP_USER_AGENT']);
if (1 == $user->demo) 
{
    $_SESSION['demo'] = $user->demo;
    $tout += 900;
} else 
    $tout += 7200;
$_SESSION['tout'] = $tout; 
```

丢弃整个 $_SESSION 数组。

简而言之，我想要做的是跟踪用户会话在每次与服务器的后续交互时确定会话是否应标记为超时并相应地通知用户。在演示模式下超时应为 900 秒，否则为 7200 秒。

也许我的 32 位本地 WAMP 服务器上的整数算术存在问题，尽管我对此表示怀疑，因为我在其中执行算术并回显结果的简单测试脚本有效。这表明将结果存储在会话数组中存在某种问题。

这正在驱使我绕过弯道，我确信这里有一些明显的东西我没有看到。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:38:40.243

尝试这个..

```
<?php
    session_start();
    $_SESSION['tout'] = time();

    $_SESSION['dna'] = md5($_SERVER['HTTP_USER_AGENT']);

    if (1 == $user->demo) 
    {
     $_SESSION['demo'] = $user->demo;
     $_SESSION['tout'] = $_SESSION['tout'] + 10 * 60  // for example 10 minutes
    } 
    else 
     $_SESSION['tout'] = $_SESSION['tout'] + 20 * 60  // for example 20 minutes
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:45:31.800

如果你这样做会发生什么：

```
session_start();
$_SESSION['dna'] = md5($_SERVER['HTTP_USER_AGENT']);
if (1 == $user->demo) 
{
 $_SESSION['demo'] = $user->demo;
 $tout = time()+900;
} else $tout = time()+7200;
$_SESSION['tout'] = $tout; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:24:21.397

我通过使用 dechex($tout + NNN) 解决了这个问题。在进一步测试中，我发现这个问题只出现在我的 32 位 WAMP 安装上。在我的 64 位 CentOS 服务器上没有问题。

我现在也弄清楚出了什么问题。PHP 的默认会话存储序列化 $_SESSIONS 变量。'tout' 元素被视为 32 位整数，然后反序列化失败。

进一步说明 - 直到会话关闭并被序列化为止，SESSIONS 数组显示正确的内容，因为 PHP 默默地将值转换为双精度值。

# java - 在java中，对象空间何时消亡，由“new”运算符创建

> ID：16116920
> 
> 赞同：1
> 
> 时间：2013-04-20T05:22:48.457
> 
> 标签：java

我编写Java程序，我想弄清楚Java中的一些内存管理。例如，这样的方法：

```
 public void example1() {
        byte[] bytes = new byte[100];
    } 
```

调用该方法后，Heap空间中“new”创建的byte[]空间是否消失了？第二个例子是这样的：

```
public byte[] example2() {
       byte[] bytes = new byte[100];
       return bytes
} 
```

还有一个问题，在这种情况下 byte[] 空间会消失吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T05:25:30.920

当垃圾收集器运行并检测到没有更多对它的引用时，该空间被*垃圾收集。*在这种情况下，如果这是唯一相关的代码，则在方法退出时引用将不复存在，因此从那时起该空间有*资格进行收集。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T05:53:10.940

对于您的第一个示例：

```
public void example1() {
        byte[] bytes = new byte[100];
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/QOhS3.png)

当方法退出时，对方法中创建的对象的所有引用都消失了，因此它有资格被垃圾收集器“销毁”。

![在此处输入图像描述](https://i.stack.imgur.com/GAjuW.png)

在您的第二个示例中：

```
public byte[] example2() {
       byte[] bytes = new byte[100];
       return bytes
} 
```

在这里，您正在返回值。如果您在某处使用该返回值，例如 ，`byte[] myByte = example2();`则会保留活动引用，因此该对象将不可用于收集。

![在此处输入图像描述](https://i.stack.imgur.com/jv4G7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:26:02.093

作为 Java 程序员，你不能在 Java 中强制垃圾回收；只有当 JVM 认为它需要基于 Java 堆大小的垃圾收集时，它才会触发。垃圾收集器运行并检测到没有更多对其的引用。

[**看这里**](http://javarevisited.blogspot.in/2011/04/garbage-collection-in-java.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T05:31:34.053

```
public void example1() {
    byte[] bytes = new byte[100];
} 
```

变量引用的对象`bytes`将有资格进行垃圾回收，`example1()`因为在方法完成后，它以局部变量形式拥有的唯一活动引用`bytes`将从函数调用堆栈中清除。

```
public byte[] example2() {
   byte[] bytes = new byte[100];
   return bytes
} 
```

这里引用的对象`bytes`在方法结束后将无法立即进行垃圾回收，`example2()`因为您正在返回引用。所以，如果你有这样的东西`byte[] returnedRef = example2()`。然后，即使在从函数调用堆栈中清除`returnRef` 了局部方法变量之后，该变量也会保留引用。`bytes`因此，除非`returnedRef`通过使 1)`returnedRef=null`或 2)if`returnedRef`是局部变量来分离所持有的引用，否则在`returnedRef`定义的方法结束时，它将被清除，该对象将不符合垃圾收集的条件。

同样，即使一个对象符合垃圾回收条件，也不一定意味着它会被 GC 销毁。垃圾收集器何时运行最好留给 JVM 来决定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T06:48:31.290

一般来说，不可能肯定地说一个物体的空间什么时候会“消亡”。即当用于表示它的内存将被回收时。您可以肯定地说：

*   空间不会被回收，而任何东西仍然*可能*使用该对象；即当它仍然*可以到达*时。

*   如果对象*不可访问*，它将在 JVM 到达它必须告诉应用程序它已用完内存的地步之前被回收。

好消息是您无需担心回收*何时发生。*如果它可以发生，它会在造成麻烦之前发生。

坏消息（有点）是，由于您无法预测何时回收对象，因此编写取决于时间的代码是个坏主意。例如，取决于`finalize`及时运行的方法。

* * *

在您的第一个示例中，当方法返回时，它`byte[]`有*资格被垃圾收集。*在第二个例子中，我们根本不能说什么。这取决于调用者如何处理返回值。

# android - 如何从 android 应用程序中获取 OAuth 令牌？

> ID：16116921
> 
> 赞同：1
> 
> 时间：2013-04-20T05:22:49.777
> 
> 标签：android, google-api, google-oauth

我已经注册了我的应用程序并准备了我的链接，以便为我的应用程序用户生成 OAuth 2.0。

哪种方式适用于android？

听： `localhost:portNUmber`或返回网页标题中的令牌？

以及如何创建一个按钮来向用户请求此身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:51:42.283

如果您正在研究如何获取访问令牌以访问受 OAuth2 授权保护的用户数据的 Google API，您可能想阅读如何使用 GoogleAuthUtil 类来请求“oauth2:”令牌。两个很好的来源是：

[https://developer.android.com/google/play-services/auth.html](https://developer.android.com/google/play-services/auth.html)

和

[http://android-developers.blogspot.com/2012/09/google-play-services-and-oauth-identity.html](http://android-developers.blogspot.com/2012/09/google-play-services-and-oauth-identity.html)

如果您正在寻找一个令牌来验证您的应用程序 + 登录的 google 用户返回到您的主服务器，您还应该查看 GoogleAuthUtil，但请求一个“audience:”令牌：

[http://android-developers.blogspot.com/2013/01/verifying-back-end-calls-from-android.html](http://android-developers.blogspot.com/2013/01/verifying-back-end-calls-from-android.html)

# python - Python/PostgreSQL - 检查服务器是否正在运行

> ID：16116923
> 
> 赞同：2
> 
> 时间：2013-04-20T05:22:59.690
> 
> 标签：python, postgresql, psycopg2

我刚刚开始使用 psycopg2 模块访问本地 PostgreSQL 服务器，我想要一种方法来检查服务器是否已经启动，以便我的程序可以在我尝试启动服务器时处理错误：

```
psqldir = 'C:/Program Files/PostgreSQL/9.2/bin'    # Windows
username = os.environ.get('USERNAME')
dbname = 'mydb'
os.chdir(psqldir)
os.system('pg_ctl start -D C:/mydatadir')   # Error here if server already started
conn = psycopg2.connect('dbname=' + dbname + ' user=' + username)
cur = conn.cursor() 
```

我做了一些实验，似乎这会返回一个“0”或“3”，这可以解决我的问题，但我没有在 PostgreSQL/psycopg2 手册上找到任何信息来确认这是否是记录在案的行为：

```
server_state = os.system('pg_ctl status -D C:/mydatadir') 
```

最好的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T10:08:04.243

来自：[_`pg_ctl documentation`](http://www.postgresql.org/docs/current/static/app-pg-ctl.html)

> **-w**
> 
> 等待启动或关闭完成。等待是关机的默认选项，但不是启动。等待启动时​​，pg_ctl 反复尝试连接服务器。等待关闭时，pg_ctl 等待服务器删除其 PID 文件。pg_ctl 根据启动或关闭的成功返回一个退出代码。

您还会发现`pg_ctl status`有用的：

> `status`mode 检查服务器是否在指定的数据目录中运行。如果是，则显示用于调用它的 PID 和命令行选项。如果服务器未运行，则该进程返回退出状态 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-13T08:13:34.843

尝试使用 pgrep 命令。

```
proc = subprocess.Popen(["pgrep -u postgres -f -- -D"], stdout=subprocess.PIPE, shell=True)
    (out, err) = proc.communicate()
    try:
        if int(out) > 0:
            return True
    except Exception as e:
        return False 
```

# matlab - 将 mat 转换为 GML 文件

> ID：16116925
> 
> 赞同：1
> 
> 时间：2013-04-20T05:23:32.013
> 
> 标签：matlab, graphics, type-conversion, gml, gephi

我想在[Gephi](http://gephi.org/)中可视化保存在 .mat 文件中的邻接矩阵。如何将保存在 .mat 文件中的邻接矩阵转换为 GML 文件？我无权访问 Matlab。

# html - 如何区分具有相同标记名和相同文本的两个 HTML 元素

> ID：16116933
> 
> 赞同：1
> 
> 时间：2013-04-20T05:24:42.853
> 
> 标签：html, html-parsing, jsoup

我想知道 Jsoup 中是否有任何方法告诉我具有相同标签名称、文本和类（如果有）的元素与具有相同标签名称、文本和相同类（如果有）的其他元素不同。为澄清起见，请考虑以下 HTML 片段：

```
<html>
<body>
<div>Here I Am</div><div>First Time</div>
<div>Here I Am</div><div>Again</div>
</body>
</html> 
```

现在在上面的代码中，我如何用 div 标签和文本分隔这两个元素**我在这里**。另请注意，这里的两个元素没有 id。

上面的例子很简单，但实际情况可能更复杂。因此，如果您好心地建议我一个笼统的答案，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:31:45.307

Give id for making it unique for the document. this can be done as

```
<div id="first">Here I Am</div>
<div id="second">Here I Am</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T05:44:30.223

在 DOM 和 XPath 的概念下，这些节点除了其规范顺序外是相同的。如果要访问此模式的第 n 个节点，

```
//div[text()='Here I Am'][n] 
```

其中*n*是从 0 开始的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-28T18:01:33.923

获取所有 div 元素并选择您想要的。

**例子**

```
Document doc = Jsoup.parse("<html>\n" +
        "<body>\n" +
        "<div>Here I Am</div><div>First Time</div>\n" +
        "<div>Here I Am</div><div>Again</div>\n" +
        "</body>\n" +
        "</html>");

Element div = doc.select("div").first();

System.out.println(div.html()); 
```

**输出**

```
Here I Am 
```

其他元素可以通过索引访问。

**例子**

```
Element div = doc.select("div").get(3); 
```

**输出**：

```
Again 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T05:39:37.357

您可以识别 div。例如，您可以这样做：

```
<div class="div1"><h2>Here I Am</h2></div>

     <div class="div2"><h2>First Time</h2></div>

<div class="div3"><h2>Here I Am</h2></div>

     <div class="div4"><h2>Again</h2></div> 
```

# android - Android：如何在活动中随机放置一组按钮？

> ID：16116948
> 
> 赞同：2
> 
> 时间：2013-04-20T05:26:02.383
> 
> 标签：android, arrays, button, random

我想知道如何在RelativeLayout 中“随机”放置一组按钮？

是否可以在整个视图周围放置按钮？

谢谢你的帮助！我尝试使用 setX() 和 setY() 但它们是浮点数，我不确定它们如何按屏幕大小比例放置按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T05:38:20.210

您可以为按钮添加布局边距。由于边距不是相对于彼此而是相对于框架进行解释，因此它实际上会定位您的按钮。

要设置边距，您必须设置视图的布局参数：

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
Random random = new Random();
params.leftMargin = random.nextInt(100);
params.topMargin = random.nextInt(100);
button.setLayoutParams(params); 
```

但是，这可能会导致您的按钮重叠，或者在 Activity 之外，因此最好不要使用完全随机的位置值，而是执行重叠检查并根据设备分辨率和按钮大小设置随机范围。

获取设备显示尺寸：

```
Display display= activity.getWindowManager().getDefaultDisplay();
int width = display.getWidth();
int Height = display.getHeight(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:33:09.330

而是做这样的事情，首先创建一个按钮数组并找到相应的 id ...

```
LayoutParams lp = new LinearLayout.LayoutParams(widthOfButtons,LayoutParams.WRAP_CONTENT);
Button[] buttons; 
for(int i=0; i<4; i++) {  //suppose you have four buttons
{
 String buttonID = "button" + (i+1);
 int resID = getResources().getIdentifier(buttonID, "id", getPackageName());
 buttons[i] = ((Button) findViewById(resID));
 buttons[i].setHeight(yourvalue);
 buttons[i].setWidth(yourvalue);
 buttons[i].setLayoutParams(lp);
} 
```

希望它对你有用

# c# - 在 facebook 身份验证中收到安全警告

> ID：16116951
> 
> 赞同：0
> 
> 时间：2013-04-20T05:26:35.343
> 
> 标签：c#, windows-phone-7, facebook-graph-api, windows-phone-8, facebook-c#-sdk

我在 facebook 应用程序中使用身份验证时收到安全警告。我的代码如带有安全警告的屏幕截图所示

```
private void imageFacebook_Tap(object sender, GestureEventArgs e)
{
    FaceBookBlocker.Visibility = Visibility.Visible;
    pop_up.IsOpen = true;

    //Get this from the facebook
    string appId = "My Facebook App Id";

    var parameters = new Dictionary<string, object>();
    parameters["client_id"] = appId;
    parameters["redirect_uri"] = "https://www.facebook.com/connect/login_success.html";
    parameters["response_type"] = "token";

    parameters["display"] = "touch";

    string extendedPermissions = "user_about_me,read_stream,publish_stream";

    // add the 'scope' only if we have extendedPermissions.
    if (!string.IsNullOrEmpty(extendedPermissions))
    {
        // A comma-delimited list of permissions
        parameters["scope"] = extendedPermissions;
    }

    var oauth = new FacebookOAuthClient();
    //Create the login url
    var loginUrl = oauth.GetLoginUrl(parameters);

    ////Open the facebook login page into the browser                     
    _webBrowser.Navigate(loginUrl);            
} 
```

![警告图片](https://i.stack.imgur.com/SSpHX.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T12:36:43.920

我确实已经解决了。在这里查看我的答案。[逃离 Facebook 安全警告](https://stackoverflow.com/a/16831606/1309698)

在 Facebook GraphAPI 中也替换`http:` 为。`https:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:15:12.210

将有您的代码，您可以在其中连接到 Facebook。最好的猜测是 Facebook 已经对其 API 进行了安全更改，并且您使用的代码尚未更新以与新 API 一起使用

或者

你需要删除这段代码

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "// connect . facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

看起来它在您的页脚中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T12:42:16.503

如果导航到成功页面，我只是隐藏 BrowserControl

```
private void BrowserControl_Navigating(object sender, NavigatingEventArgs e)
        {            
            if (e.Uri.AbsolutePath.ToString() == "/connect/login_success.html")
            {
                BrowserControl.Visibility = Visibility.Collapsed;
            }
            if (NavigatingCallback != null)
            {
                NavigatingCallback();
            }

        } 
```

# c - 多线程可以在单处理器系统上实现吗？

> ID：16116952
> 
> 赞同：85
> 
> 时间：2013-04-20T05:26:43.127
> 
> 标签：c, windows, multithreading, winapi

我一直遵循这样的概念，即多线程只能在多处理器系统上实现，其中每个线程分配多个处理器并且每个线程可以同时执行。在这种情况下没有调度，因为每个线程都有单独的资源都专用于它。但我最近在某处读到它，我也可以在单处理器系统上进行多线程处理。这是对的吗？如果是，那么单处理器和多处理器系统有什么区别？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-04-20T05:31:52.677

Of course it can be done on a single-processor system, and in fact it's much easier that way. It works the same way as running multiple processes -- the kernel, via a timer interrupt or other similar mechanism, suspends one, saving its machine state, and replacing that by the previously-saved state of another -- the only difference being that two threads of the same process share the same virtual memory space, making the task-switch much more efficient.

Multi-threading on multi-processor systems is actually much more difficult, since you have issues of simultaneous access to memory from multiple cpus/cores, and all the nasty memory synchronization issues that arise out of that.

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2013-04-20T05:41:59.317

> 我最近在某处读到它，我也可以在单处理器系统上进行多线程处理。这是对的吗？如果是，那么单处理器和多处理器系统有什么区别？

是的，您可以在单处理器系统上执行多线程。

在多处理器系统中，多个线程**同时**在不同的内核上执行。例如-如果有两个线程和两个核心，那么每个线程将在单独的核心上运行。

在单处理器系统中，多个线程一个接一个地执行或等待一个线程完成或被操作系统抢占，具体取决于线程优先级和操作系统策略。但是正在运行的线程给人一种它们同时运行的错觉，相对于用户空间应用程序所需的应用程序响应时间。

时间比较（示例）：

如果两个线程每个执行需要 10us，那么在 2 处理器系统上，净时间为 10us

如果两个线程每个执行需要 10us，那么在 1 个处理器系统上，净时间需要 20us

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-20T05:32:14.463

You can have more than four active threads on a quad core system. There *is* scheduling, unless you can guarantee that processes won't try to create more threads than there are processors.

Yes, you can have multiple threads on a single-core computer.

The difference between single processor and multi-processor systems is that a multi-processor system can indeed do more than one thing at a time. It can do N things at a time, where N is the number of processor cores. A single-processor core can only do one thing at a time. As WhozCraig said in his comment, it's the difference between actual and perceived concurrency.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-08-08T19:24:42.850

是的，你完全可以。很久以前（Win 95？）我们从协作多任务到多线程，因为总是有人搞砸了协作部分。您计算机上的每个程序都至少有一个线程。可能更多。CPU 会在所有这些线程之间不停地切换，每秒几百万次。如果他们都无事可做，它甚至可能会闲置一段时间。

多核系统仅意味着这些线程中的两个或更多可能并行运行。

但是，这样做会给您带来的好处要少得多。在单核机器上使用多线程可以做的就是模拟多任务。

多任务处理足以防止 GUI 线程因为长时间运行的操作而锁定。但是，实现起来通常很复杂，除非您从编译器或语言（如 C# async...await）获得一些帮助。结果，许多 GUI 程序员只是使用多线程和调用来伪造多任务。如果该代码在单核或多核上运行，则与此无关。

最重要的是，多任务不适合 CPU 密集型操作。但是 95% 的异步问题都不受 CPU 限制。它们是网络或磁盘绑定的。在单核计算机上，多线程也无助于 CPU 绑定的东西。如果您有两个线程都需要 100% 的 CPU 时间（相同的程序或不同的程序）但只有一个内核来运行它们，那么 CPU 只需在两者都以 49% 的运行时间和剩余的 2% 运行之间切换其他只做一点点的线程。

最后，实际上只有极少数问题可以是多线程的。只需尝试对斐波那契数列（每对一个线程）进行多线程处理，而不会使其更慢、更需要内存和更复杂。

tl;博士; 您需要多线程和多核计算机来解决 CPU 绑定问题。大多数异步问题不受 CPU 限制。多任务处理就足够了。即使在单核机器上，您也可以使用线程完全执行多任务。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-26T04:54:23.087

Here's a very simplified example. It's actually a prototype for a program I'm building. It's a implementation of cooperative multitasking in a single thread.

`main` simply sets the `quit` flag to false, and populates an array of function pointers (the tasks), and then calls `loop`.

`loop` uses `setjmp` to set a return point for a non-local jump (a jump *out* of the function back to a previous location in the execution) and then proceeds to call the first task (function).

Each task ends with `yield()`. That is, none of the task functions actually `return`. Not only do they not contain a `return;` statement (which would be fine since they are `void` functions, ie. procedures), but they wouldn't reach the `return` even if it was there because `yield` jumps back to the `setjmp` call, this time yielding a 1 to the `if` statement in `loop`. The statement controlled by the `if` statement selects a different task before re-entering the `while` loop.

So each task function runs multiple times, yielding to the *dispatcher* (the `if(setjmp...` statement) which selects a new task to run.

```
#include <stdio.h> 
#include <setjmp.h> 

jmp_buf dispatch; 
int ntasks; 
void (*task[10])(void); 
int quit; 

void yield(void) { 
    longjmp(dispatch, 1); 
} 

void loop() { 
    static int i = 0; 
    if(setjmp(dispatch)) 
        i = (i+1) % ntasks; 
    while(!quit) 
        task[i](); 
} 

int acc = 0; 

void a(void) { 
    if (acc > 10) quit = 1; 
    printf("A\n"); 
    yield(); 
} 
void b(void) { 
    acc *= 2; 
    printf("B\n"); 
    yield(); 
} 
void c(void) { 
    acc += 1; 
    printf("C\n"); 
    yield(); 
} 

int main() { 
    quit = 0; 
    ntasks = 3; 
    task[0] = a; 
    task[1] = b; 
    task[2] = c; 
    loop(); 
    return 0; 
} 
```

The difference between this example and a single-processor multitasking computer system is the real processor supports interrupting a task in the middle of execution and resuming it later from the same spot. This isn't really possible in a C simulation with tasks as single functions. However, the tasks could be composed of a sequence of C functions which each yield to the dispatcher (an array of function pointers, maybe, or a linked-list).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-30T14:11:23.303

在单个处理器上的多线程进程中，处理器可以在线程之间切换执行资源，从而实现并发执行。并发表示不止一个线程在进行，但这些线程实际上并没有同时运行。线程之间的切换发生得足够快，以至于线程可能看起来同时运行。

在共享内存多处理器环境下的同一个多线程进程中，进程中的每个线程都可以在单独的处理器上并发运行，从而产生并行执行，这才是真正的同时执行。当进程中的线程数小于或等于可用处理器数时，操作系统的线程支持系统确保每个线程运行在不同的处理器上。例如，在使用四个线程编程并在具有两个双核处理器的系统上运行的矩阵乘法中，每个软件线程可以同时在四个处理器内核上运行以同时计算一行结果。

# java - java中goto的目的

> ID：16116954
> 
> 赞同：1
> 
> 时间：2013-04-20T05:26:47.790
> 
> 标签：java

我知道这`goto`是java中的一个关键字。另外，从[wiki](http://en.wikipedia.org/wiki/List_of_Java_keywords)中，我可以摘录“它没有被使用并且没有任何功能”。

`goto`我想知道，如果它没有用并且没有在任何地方使用，为什么要声明为关键字？有人用过`goto`java程序吗？是否有任何其他关键字类似于 java 编程中声明的 goto 但隐喻没有用处。

我们在日常编程中在哪里使用 goto，或者很少在什么时候使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T05:38:51.710

这是关于 goto 语句的一些总结

**用法：**

它们用于跳出语言中的语句块，JMP 指令在汇编级别完成这项工作。

Goto 是严格禁止的，因为它们使程序难以跟踪 代码中的过多跳转会使其变慢。想象一个循环进入其中。它一点都不好。

Java保留这个关键字可能是因为它还涉及jvm（即有点C / C ++）代码中的一些本机代码，可能是为了避免歧义。

Java 提供了 break 作为 goto 的实现，但它的使用也是有限的，不应该经常使用。

[这是一个在java中作为GOTO中断的例子](http://www.java-samples.com/showtutorial.php?tutorialid=278)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T05:29:18.793

声明它而不使用它的原因是保留它以防将来需要它。它目前没有任何用途。

`const`是[另一个](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)不做任何事情的保留字。由于它们是保留的，因此您不能在程序中使用它们（作为变量）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T06:16:15.743

*要找出最初*`goto`保留和的真正原因，您需要询问 Java 语言设计人员。当语言被称为 Oak 时，就会做出决定。`const`

 *有几个*看似合理*的解释：

*   他们认为他们*可能*需要以可能使用这些关键字的方式扩展语言，并且他们保持选择开放。

*   他们希望避免 C/C++ 程序员在阅读 Java 代码时出现认知失调，其中一些被误导的人决定使用“goto”或“const”作为变量或方法名称。

但显而易见的事实是，这些保留字现在被使用的可能性为零。

* * *

**更新**

显然，Java在某一时刻 *确实有过 goto。*

> *“我做的其中一件事是 goto 存在一些问题。Java 曾经有一个 goto。我研究了人们使用 goto 做什么？基于对 50 万行代码的研究，我只是摆脱它。”*

来自[“James Gosling on Java，2001 年 5 月”](http://www.artima.com/intv/gosling3P.html)。

所以*真正的*解释是`goto`保留它，因为它*在*Java 的早期版本中使用过，他们决定去掉它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T05:28:16.013

[Java 关键字列表](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)指定了goto 关键字，但它被标记为“未使用”。请参阅 Java 关键字列表以了解在 Java 编程中声明的类似于 goto 的其他关键字是什么，但在比喻上没有用处。

```
startAgain:
for(int i =0; i <10 ;i++){
    for(int i =0; i <10 ;i++){
        if(someCondition)
        break startAgain;

    }

} 
```

上面的代码在某种程度上类似于 goto。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T05:28:18.977

`go to`声明在java中可用。但它被标记为“未使用”。

您可以使用带标签的 break 语句而不是 goto

[**休息**](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)*

# php - str_replace （或其他选项）用于替换位于 php 文档中的内容

> ID：16116955
> 
> 赞同：0
> 
> 时间：2013-04-20T05:27:07.980
> 
> 标签：php

我正在尝试为我正在制作的 CMS 制作模板文件，其中模板文件可以包含变量，例如 `{username}`当页面包含在 index.php 页面中时被替换的常规文本。

示例：索引页面：

```
<?php include('templates/123/index.php'); ?> 
```

模板/123/index.php 页面

```
<?php include('header.php'); ?>
Welcome {username}
<?php include('footer.php'); ?> 
```

我尝试了几种方法；但是，总是遇到问题，因为我试图更改内容的页面包含 PHP 代码。我尝试的每种方法要么 1) 搞砸了，因为文档中 PHP 标记的打开和关闭或 2) 只是回显了文档中的 PHP 代码。有什么办法我仍然可以实现这一目标吗？也许甚至有某种类？我只是希望能够安全地实现这一目标。

我还将使用它来将自定义变量（如 {content1}）替换为一个 php 代码，该代码将被离子立方化，从数据库中检索位于 column1 中的内容的数据，与 {column2} {column3} 和 {column4} 相同。我只是想让模板的创建变得非常容易。（所以我想让代码也适用于此）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:35:58.617

我喜欢做这样的事情的方法包括以以下方式开始我的代码：

```
ob_start(function($c) {
    $replacements = array(
        "username"=>"Kolink",
        "rank"=>"Awesome"
    );
    return preg_replace_callback("/{(\w+)}/",function($m) use ($replacements) {
        return isset($replacements[$m[1]]) ? $replacements[$m[1]] : $m[0];
    },$c);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:39:12.847

我建议的两个步骤

1.  将文件“templates/123/index.php”的结果加载到变量中。请参阅此链接以了解如何[将 PHP 脚本的执行输出分配给变量？](https://stackoverflow.com/questions/5874466/assign-output-of-execution-of-php-script-to-a-variable)
2.  使用 strtr() 函数替换占位符，即 {username} 用实际值

我认为这将满足您的需求。

# iis - IIS URL 重写 - 如果缺少查询参数

> ID：16116958
> 
> 赞同：2
> 
> 时间：2013-04-20T05:27:44.327
> 
> 标签：iis, url-rewriting

所以这是今天的“不是你的日常要求”:)

我想创建一个规则，仅当缺少某些查询参数时才会重定向到其他页面。

如果参数存在，我发现了一些将重写/重定向的示例，但是如果我想检查它们是否不存在，我该怎么做？

例如，这将测试参数是否存在并基于此重定向：

```
 <rule name="RedirectUserFriendlyURL1" stopProcessing="true">
            <match url="^$" />
            <conditions>
                <add input="{QUERY_STRING}" pattern="^lon=([^=&amp;]+)&amp;lat=([^=&amp;]+)&amp;zoom=([^=&amp;]+)$" />
            </conditions>
            <action type="Redirect" url="/{C:1}/{C:2}/{C:3}" appendQueryString="false" />
        </rule> 
```

我如何更改此规则以测试它们是否不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:16:52.443

^((?!regex).)*$ 是不包含正则表达式的正则表达式。在这里阅读更多[http://bloggernitin.blogspot.in/2007/12/regex-for-doesnt-contain.html](http://bloggernitin.blogspot.in/2007/12/regex-for-doesnt-contain.html)

如果您正在寻找参数中不存在 lon=xyz 之类的内容，请使用此正则表达式 ^(?!lon=(xyz)) 这将检查字符串开头是否不存在 lon 参数

> ## 更多例子——
> 
> 如果您遇到只有缩放参数存在查询字符串并且缺少纬度/经度的情况，
> 例如查询字符串 a) "lat=23&zoom=10" b) "zoom=13"
> 
> 正则表达式 - ^(?!lon=. *)( ?!lat=.* )zoom=([^=&]+)
> 结果 - a) 不匹配 b) 匹配 $1= 13
> 
> 现在您可以为其他参数提供默认值。

# javascript - 淘汰赛 我可以绕过这个计算循环吗？

> ID：16116965
> 
> 赞同：0
> 
> 时间：2013-04-20T05:28:24.963
> 
> 标签：javascript, knockout.js, knockout-2.0

我的视图模型中的一堆对象具有以下结构

我有一个基础数组，其中填充了包含 ko.observable 项目的对象。

例如：选择 = [{Legs:{'0':ko.observable(12)}}, {Legs:{'0':ko.observable(0)}}]

我想要实现的是，当用户单击复选框时，应该切换该 Runner 的 Selected 值。现在，当这种情况发生时，我还想更新 Cache 值以反映 Runners 选择的状态

**缓存用作二进制存储 12 == 1100 == 选中复选框 3 和 4**

现在所有这些我都可以开始工作了，显然我什至不需要让 Cache 可观察。

但是，我还需要以编程方式更改缓存值，并且我希望复选框自动反映这些更改。

下面的内容可以正常工作，但会创建一个循环，可以优雅地处理淘汰赛，但其结果不可靠，这会减慢速度。

**如何创建此绑定设置？**

```
function Runner(name, odds, race, leg, post) {
    var runner = {
        Name: name,
        Odds: odds,
        Post: post,
        Race: race,
        Leg: leg,
        Cache: selections[race].Legs[leg],
        Selected: ko.observable(false),
        Enabled: ko.observable(true),
        Valid: true
    };

    runner.Check = ko.computed(function() {
        if (!this.Enabled.peek() || !this.Valid ) return;
        var checked = this.Selected();
        var cache = this.Cache();

        if (checked) {
            this.Cache(cache | 1 << this.Post);
        } else {
            this.Cache(cache & ~(1 << this.Post));
        }

    }, runner);

    return runner;
} 
```

**编辑**

```
<input type="checkbox" data-bind="checked: Selected, enable: Enabled"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:46:50.633

写完我的问题后，我有片刻的清醒。但我认为这是一个很好的问题，而不是改变或删除我的问题，我只是发布我最新的解决方案并希望得到一些批评。

所以最后我完全放弃了 Selected 值

**注意**this.Post + 1 是针对我的需要的，通常不需要它，我只是希望保留第一位未使用以供将来使用。

```
 runner.Check = ko.computed({
        read: function() {
            var cache = ko.utils.unwrapObservable(this.Cache); //Edit 1
            return cache & 1 << (this.Post + 1);
        },
        write:function(value) {
            var cache = this.Cache();
            if (!this.Enabled.peek() || !this.Valid || this.Post === -1) return;
            var mask = 1 << (this.Post+1);
            if(value === !(cache & mask)){ //Edit 2
                this.Cache(value ? cache | mask : cache & ~mask);
            }
        }
    }, runner); 
```

以这种方式做事的一件坏事是，如果我有 20 名跑步者都使用相同的缓存，那么当用户选择其中 1 人时，所有 20 人都会重新检查自己......

对于我的具体情况，未来的更改可能是删除 Peek on Enabled，并执行一个检查，如果 !Enabled 然后默认关闭该位，而不是可能允许禁用选中复选框。

**编辑**

将“读取”函数更改为使用 unwrapObservable()，以防缓存通过可观察对象在其他地方被删除/移除而被清除。

**编辑 2**

在回答原始问题中的评论时，我意识到为了帮助防止一些冗余调用，我可以添加一个检查以查看该位的值是否已经等于 value，如果是，则什么也不做，所以如果以编程方式我尝试打开一点已经打开然后它不会触发计算，因为实际上没有任何改变。

# dart - 如何实现可迭代

> ID：16116968
> 
> 赞同：11
> 
> 时间：2013-04-20T05:28:43.673
> 
> 标签：dart

我正在尝试将下面的 Java 代码移植到 Dart 并且对这样做感到困惑。

在 Java 中，Iterable 接口是用一种方法清理的地方，实现这一点很容易。

这段代码如何最好地转换为 Dart？

```
/**
 * Chess squares represented as a bitmap.
 */
public class ChessSquares implements Iterable<ChessSquare> {

private static class ChessSquaresIterator implements Iterator<ChessSquare> {
    long bits;
    int nextBit;

    public ChessSquaresIterator(long bits) {
        this.bits = bits;
        nextBit = Long.numberOfTrailingZeros(bits);
    }

    @Override
    public boolean hasNext() {
        return (nextBit < 64);
    }

    @Override
    public ChessSquare next() {
        ChessSquare sq = ChessSquare.values()[nextBit];
        bits = bits & ~sq.bit;
        nextBit = Long.numberOfTrailingZeros(bits);
        return sq;
    }

    @Override
    public void remove() {
        throw new UnsupportedOperationException();
    }
}

@Override
public Iterator<ChessSquare> iterator() {
    return new ChessSquaresIterator(bits);
}

... 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-20T06:03:20.427

通过使用`IterableMixin`你只需要实现`iterator`-function。

```
class ChessSquares with IterableMixin<ChessSquare> {
    @override
    Iterator<ChessSquare> get iterator => new ChessSquaresIterator(bits);
    ...
} 
```

访问[http://blog.sethladd.com/2013/03/first-look-at-dart-mixins.html](http://blog.sethladd.com/2013/03/first-look-at-dart-mixins.html)以了解有关 mixins 的简短介绍。

-`Iterator`界面是直截了当的。您只需要实现函数`moveNext`和 getter `current`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T06:11:20.463

Soo 我尝试了这个，这不是我想要的，因为我不想扩展基类。

```
/**
 * Chess squares represented as a bitmap.
 */
class ChessSquares extends IterableBase<ChessSquare> {

  Iterator<ChessSquare> get iterator {
    return new ChessSquaresIterator(this);
  }

  ...

}

class ChessSquaresIterator extends Iterator<ChessSquare> {
  int _nextBit;
  int64 _bits;
  ChessSquare _current;

  ChessSquaresIterator(ChessSquares squares) {
    _bits = new int64.fromInt(squares._bits); 
  }

  bool moveNext() {
    _nextBit = _bits.numberOfTrailingZeros();
    if (_nextBit < 64) {
      _current = ChessSquare.values()[_nextBit];
      _bits = _bits & ~_current.bit();
    } else {
      _current = null;
    }
    return _nextBit < 64;
  }

  E get current => _current;
} 
```

# android - Mail applications not in intent chooser

> ID：16116971
> 
> 赞同：1
> 
> 时间：2013-04-20T05:28:53.417
> 
> 标签：android, email, android-intent

On click of any email id with mailto: protocol, I want to redirect app to any mail application. For that I have used

```
 Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
         emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);
        emailIntent.setType("message/rfc822");
        startActivity(Intent.createChooser(emailIntent, "Choose Action")); 
```

It works on several devices. But it fail to work on Nexus 7 and Medion Life Tab. They both have Jelly Bean installed. However, it works on some Nexus 7\. In intent chooser it shows NFC and Quick send apps but not any Mail application or skype.

I have looked into following links : [android - Mail app not support in nexus 7](https://stackoverflow.com/questions/14683071/android-mail-app-not-support-in-nexus-7) and [Android 4.2.2 - GMail app not in intent chooser](https://stackoverflow.com/questions/15613033/android-4-2-2-gmail-app-not-in-intent-chooser). But it doesn't help.

What can be the reason to such strange behaviour of some devices?

# actionscript-3 - On mouseover how to highlight an object's point so that I can draw connector from highlighted point

> ID：16116973
> 
> 赞同：3
> 
> 时间：2013-04-20T05:29:10.077
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.6

I want to develop similar features as in [http://www.cacoo.com](http://www.cacoo.com) for connector.Please somebody help me its urjent.

# asp.net - Converting asp.net 4.0 application with MVC 4

> ID：16116975
> 
> 赞同：1
> 
> 时间：2013-04-20T05:29:16.147
> 
> 标签：asp.net, asp.net-mvc-4, ado.net

I have an application which is in ASP.NET, ADO.NET, Oracle 11g

My structure of application is as follow

1.  There are business entity classes for every entity in my application

    `Employee` entity contains

    ```
    a. Name
    b. Age 
    etc 
    ```

2.  I have written a stored procedure to fetch and insert every operation related to database using ADO.NET. It return `list<>` of Business Entities from by separate logic part.

3.  Some of the presentation logic is split into `user-controls`.

4.  Using `jquery-ajax` to load most of the component for `asynchronous load` on pages. To speed up the page.
5.  Have used `data-caching` in my project.

Not wanted to move the project into `MVC 4` for better performance. Is it a good idea to move the project to ASP.NET MVC?

I also wanted to know weather it is technically ok to change it to mvc.

I don't want to change my database logic as it is well written.

So can I use MVC?

Any suggestion on any link provided will be a good help.

# android - 如何创建 Rest api，以及如何使用 android 应用程序使用 rest api

> ID：16116978
> 
> 赞同：1
> 
> 时间：2013-04-20T05:29:21.097
> 
> 标签：android, rest

我们如何为我们的网站创建rest api，我想使用rest api将服务器与我的android应用程序连接起来。如何将那些rest api与我的android应用程序连接起来，它们背后的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:36:53.640

在这里，您有一个不错的 rest api，具有执行 Http POST 和 GET 的基础知识：

```
public class RestClient {

private ArrayList<NameValuePair> params;
private ArrayList<NameValuePair> headers;
private String url;
private String response;
private int responseCode;

public String GetResponse()
{
    return response;
}

public int GetResponseCode()
{
    return responseCode;
}

public RestClient(String url)
{
    this.url = url;
    params = new ArrayList<NameValuePair>();
    headers = new ArrayList<NameValuePair>();
}

public void AddParam(String name, String value)
{
    params.add(new BasicNameValuePair(name, value));
}

public void AddHeader(String name, String value)
{
    headers.add(new BasicNameValuePair(name, value));
}

public void Execute(RequestType requestType) throws Exception
{
    switch(requestType)
    {
        case GET:
        {
            String combinedParams = "";
            if (!params.isEmpty())
            {
                combinedParams += "?";
                for (NameValuePair p : params)
                {
                    String paramString = p.getName() + "=" + URLEncoder.encode(p.getValue(),"UTF-8");

                    if  (combinedParams.length() > 1)
                        combinedParams += "&" + paramString;
                    else
                        combinedParams += paramString;
                }
            }
            HttpGet request = new HttpGet(url + combinedParams);

            for (NameValuePair h: headers)
                request.addHeader(h.getName(),h.getValue());

            ExecuteRequest(request, url);
            break;
        }
        case POST:
        {
            HttpPost request = new HttpPost(url);

            for (NameValuePair h : headers)
            {
                request.addHeader(h.getName(), h.getValue());
            }

            if(!params.isEmpty()){
                request.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));
            }

            ExecuteRequest(request, url);
            break;
        }
    }
}

public void ExecuteRequest(HttpUriRequest request, String url) 
{
    HttpClient client = new DefaultHttpClient();
    HttpResponse httpResponse;
    try
    {
        httpResponse = client.execute(request);
        responseCode = httpResponse.getStatusLine().getStatusCode();

        HttpEntity entity = httpResponse.getEntity();

        if (entity != null)
        {
            InputStream in = entity.getContent();
            response = ConvertStreamToString(in);
            in.close();
        }
    }
    catch (ClientProtocolException e)  {
        client.getConnectionManager().shutdown();
        e.printStackTrace();
        } catch (IOException e) {
        Log.e("REST_CLIENT", "Execute Request: " + e.getMessage()); 
        client.getConnectionManager().shutdown();

        e.printStackTrace();
    }       
}

private String ConvertStreamToString(InputStream in)
{
    BufferedReader reader = new BufferedReader(new InputStreamReader(in));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try 
    {
        while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
    finally 
    {
        try 
        {
            in.close();
        } 
        catch (IOException e) 
        {
             Log.e("REST_CLIENT", "ConvertStreamToString: " + e.getMessage());  
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

}

# android - google-play-services_lib 的 android 谷歌地图问题

> ID：16116981
> 
> 赞同：0
> 
> 时间：2013-04-20T05:29:42.210
> 
> 标签：android, google-maps

我创建了一个 android 应用程序，我按照所有步骤从 Android SDK Manager 制作 API 密钥和安装谷歌播放服务。我阅读了很多关于集成谷歌地图的博客，我将 libraty 项目从“\adt-bundle-windows-x86\sdk\extras\google\google_play_services\libproject\google-play-services_lib”路径导入到我的工作区。当我尝试从android选项卡中的项目属性窗口添加库项目时，我得到了关注 ![在此处输入图像描述](https://i.stack.imgur.com/B4Esv.png) 但是当我第二次检查这个库而不是在android选项卡中关注时， ![在此处输入图像描述](https://i.stack.imgur.com/SL6us.png) 我有可能是libraty项目。我使用了eclipse IDE。我得到了一些解决方案，但针对不同的 IDE，所以建议我寻求最佳解决方案..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T08:39:06.637

第一个问题通常发生在库的路径太长时，解决方案是将其移动`google-play-services lib`到路径较短的地方，然后再次尝试引用它。

你的第二个问题：

```
"Google Maps Android API(23127): Failed to load map. Could not contact Google servers." 
```

通常是由于您的 API 密钥有问题或您在清单文件中定义的权限有问题，请查看我写的这篇文章并查看生成密钥的所有步骤：

[谷歌地图 API 密钥](https://blog-emildesign.rhcloud.com/?p=403)

接下来，检查步骤 5-7 并验证您定义了正确的权限：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T05:43:16.647

有时可能会发生，您应该再次删除并添加相同的库或重新启动eclipse并添加库

# hyperlink - 将鼠标悬停在一个链接上会使小破折号出现在它的右侧

> ID：16116984
> 
> 赞同：8
> 
> 时间：2013-04-20T05:30:22.767
> 
> 标签：hyperlink, hover

在这种情况下，将鼠标悬停在左侧链接上会在其右侧（两个链接之间）出现一个小破折号。我怎样才能摆脱这个？我在 Safari 和 Chrome 中都看到了这一点，但我在样式表中看不到任何可以做到这一点的东西。

```
<!DOCTYPE html>
 <html>
 <head>
         <meta charset="utf-8">
         <title>Walls</title>
         <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
         <link rel="stylesheet" href="custo.css">

        <script src="prettyPhoto_compressed_3/js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<link rel="stylesheet" href="prettyPhoto_compressed_3/css/prettyPhoto.css" type="text/css" media="screen" charset="utf-8" />
<script src="prettyPhoto_compressed_3/js/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script>
</head>

 </head>
 <body>

 <br>
                 <a href="gallery.html">
                 <img src="test.jpg" class="testclass" alt="test" width="170" />
                 </a>

                 <a href="info.html">
                 <img src="test.jpg" class="testclass" alt="test" width="55"  />
                 </a>

 <div class="container-fluid">
 <br>

 </div><!-- .container -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <script type="text/javascript" charset="utf-8"> <!--initialize prettyPhoto-->
     $(document).ready(function(){
     $("a[rel^='prettyPhoto']").prettyPhoto();
      });
    </script>

 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T05:39:52.483

如果你看到的和我看到的一样（我没有所有的样式表），你看到的`a`是图像标签的下划线。

您可以`text-decoration: none`在图像链接上使用它来删除它；

```
<a href="gallery.html" style="text-decoration: none !important;"> 
```

样式末尾的`!important`有助于覆盖 CSS 中可能已经`!important`强调的任何选择器。

当然，这在实践中使用[在图像链接上设置的类会](https://stackoverflow.com/a/4785601/477878)更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-16T16:44:00.727

这是一个旧帖子，但我想贡献一些东西。这将帮助其他人为什么出现破折号 (-)。

这是因为 a 标签内有一个空白区域。例如：

```
<a href="#">
  <i>test</i>
</a> 
```

如果你这样设置你的行：`<a href="#"><i>test</i></a>`破折号/下划线会消失，但一些工具可能仍然会格式化你的代码，它们会添加空格。因此，使用上一篇文章中提到的 css 将消除该问题。

# ocaml - 将两个排序列表合并为一个排序列表的函数的 OCaml 样式

> ID：16116985
> 
> 赞同：3
> 
> 时间：2013-04-20T05:30:32.070
> 
> 标签：ocaml

我是 OCaml 的新手，我正在审核一堂课。我有一个作业提示，上面写着：“merge xs ys 采用两个整数列表，每个列表按升序排序，并返回一个按排序顺序的合并列表。”

我已经成功编写了一个有效的函数：

```
let rec merge xs ys = match xs with
  | [] -> ys
  | hxs::txs -> if hxs <= (match ys with
    | [] -> hxs
    | hys::tys -> hys)
      then hxs :: merge txs ys 
      else match ys with
      | [] -> xs
      | hys::tys -> hys :: merge xs tys  in
merge [-1;2;3;100] [-1;5;1001]
;; 
```

我想知道我的代码是否被认为是可接受的 OCaml 样式？我想避免养成任何坏习惯。感觉组合密集，但也许那是因为我仍然不习惯 OCaml。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T05:59:09.393

我个人觉得很难`if hxs <= (match ...)`理解，而且很难很好地格式化它。所以我可能会写

```
 ...
 let hys =
   match ys with
   | [] -> hxs
   | hys :: _ -> hys
 in
 if hxs < hys then
    hxs :: merge txs ys
 ... 
```

`xs`但是，我认为同时匹配两者可能会更好`ys`：

```
let rec merge xs ys =
   match xs, ys with
   | [], _ -> ys
   | _, [] -> xs
   | hx :: txs, hy :: tys ->
       if hx < hy then hx :: merge txs ys else hy :: merge xs tys 
```

我认为这更好地捕捉了问题的对称性。

我认为当代码的长度与它解决的问题的简单性很好地匹配时，这很好。合并很容易说明，因此代码不需要很长（在我看来）。

# javascript - How do I refer to a variable stored in an array instead of its value?

> ID：16116987
> 
> 赞同：0
> 
> 时间：2013-04-20T05:30:46.287
> 
> 标签：javascript, arrays, string

I have a set of variables which represent prices and number of items sold in a 2d array. I have sorted it in order to find the lowest price.

I'd like to set the second variable (number sold) of the first item (player A) to a value (200) by referring to the array.

For example:

```
var playerASold;

var arr=[
    [playerAPrice,playerASold],
    [playerBPrice,playerBSold],
    [playerCPrice,playerCSold]];

arr[0][1]=200; 
```

this doesn't work, probably because `playerASold` currently has a value of 0 and it is trying to set 0=0.

**How do I refer to the variable and not the value of the variable?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:39:39.787

JavaScript 没有 C 的指针或 C++ 的引用的概念，所以你必须以不同的方式来做。与其尝试将引用存储在数组中，不如尝试使数组成为数据的唯一持有者。
这可能看起来像这样：

```
var players = [
    { price: 5, sold: 1 },
    { price: 3, sold: 6 },
    { price: 9, sold: 2 }
]; 
```

然后`playerBSold`，您可以使用`players[1].sold`. 现在，您可以根据需要使用变量来代替它`1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:54:52.170

只需仔细查看您正在将值设置为数组的代码。您正在替换 arr[0][1] 项目值。以前它是 playerASold 即 0，现在是 200。所以您没有为 playerSold 分配值。像这样：

```
var arr=[[playerAPrice:0,playerASold:0],[playerBPrice:0,playerBSold:0],   [playerCPrice:0,playerCSold:0]]; 
```

并使用这个：

```
arr[0].playerASold=200. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:55:21.687

Javascript 原语（在本例中为 Number）是不可变的。即，您不能更改它们的值。对数字的操作会创建新的数字。然而，对象是可变的。

正如 icktoofay 所建议的，在这里重构为具有 price 和 sold 属性的可变 Player 对象可能是一个好主意。