# StackOverflow 问答 14142000-14142999

# javascript - Backbone：应该使用 model.escape 代替 model.get 吗？

> ID：14142001
> 
> 赞同：4
> 
> 时间：2013-01-03T15:33:15.477
> 
> 标签：javascript, backbone.js, xss

我今天正在阅读有关跨站点脚本 (XSS) 攻击的内容。似乎 Backbone 已经`model.escape('attr')`内置，据我所知，应该始终使用它而不是`model.get('attr')`防止这些攻击。

我做了一些初步搜索，但没有找到任何类似的建议。`model.escape('attr')`从模型中检索值时我应该始终使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T16:41:45.807

使用下划线模板，我通常看到/这样做是这样的：

```
var TemplateHtml = "<div><%- someModelAttribute %></div>"; // Really, you should load from file using something like RequireJS

var View = Backbone.View.extend({
    _template: _.template(TemplateHtml),

    render: function() {
        this.$el.html(this._template(this.model.toJSON()));
    }
}); 
```

当您使用时`<%- someModelAttribute %>`，Underscore 知道要转义给定的值（而不是`<%= someModelAttribute %>`直接注入属性而不转义）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T15:49:16.293

而不是 model.escape()，请参阅渲染时的 _.escape。因此，您可以根据需要使用模型，但在渲染时要小心逃逸。渲染时在模板中使用 _.escape 就足够了。这避免了 XSS 攻击。

看这个方法：

[http://underscorejs.org/#escape](http://underscorejs.org/#escape)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:38:25.090

是的，为了避免 xss 攻击，您可以始终使用 model.escape() ，这是更可取的，它也用于转义 html 内容......

但是，如果您要立即使用数据...您可以简单地使用 model.get()...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-01T07:05:49.733

我找到了[一篇关于何时使用主干`escape`功能](http://metabates.com/2012/04/17/there-is-no-escape-actually-there-is-and-you-should-always-use-it/)的好文章。作者断言您应该始终使用转义，除非您绝对不会执行模型属性的值。例如，如果您正在检查模型属性 not `null`：

```
var model = new Backbone.Model({foo: "Bar"});
if (model.get("foo") != null) { //notice how here we did not use escape
  $("h1").html(model.escape("foo")); //but here we do
} 
```

需要注意的一个相关点是，如果您从中检查返回的值，`model.escape("foo")`它将始终返回一个字符串。因此，如果您期待`null`，那么您可能会感到困惑。

```
console.log(model.get("foo")); // null
console.log(model.escape("foo")); // "" 
```

但是，正如 Jeremy Ashkenas 在[查询此问题的拉取报告](https://github.com/jashkenas/backbone/pull/1227)中指出的那样，在转义属性后检查属性的存在是没有意义的。

# c# - 在用户控件中设置标签以使用 MVVM 从父表单值继承？

> ID：14142009
> 
> 赞同：0
> 
> 时间：2013-01-03T15:33:31.953
> 
> 标签：c#, wpf, mvvm

针对指定问题的 WPF 的 MVVM 方法。我在 XAML 的“MainView”中有一个组合框。它的代码伙伴是“MainViewModel”，并公开了“Person”的属性，该属性基本上只是一个单独的类（POCO 类），用于公开一个字符串和一个 int 来表示数据库中的名称和种子。它设置了 ReadOnlyCollection 的属性，该属性绑定到组合框，如下所示：（引用 xaml 顶部的视图模型，例如：xmlns:vm="clr-namespace:(mylocationforviewmodelnamespace)）

```
ItemsSource="{Binding Path=People}"
                    DisplayMemberPath="FirstName"
                    SelectedValuePath="PersonId" 
```

这很好用，但我正在设置一个用户控制视图及其各自的视图模型代码。我对 ViewModel 绑定方法没有了解的是如何绑定构造函数的传入值？或者你能做到吗？或者我应该为我的“模型”而是为“数据访问”设置一个中间类？

我的最终目标是在组合框中选择一个值，该值已经正确绑定并且效果很好，并将其传递给 viewmodel 代码，然后在构建时与视图关联并停靠在父窗体中。我可以很好地制作一个构造函数并设置一个静态值以在它构建时显示一个名称。我不知道您如何从组合框的父视图对象传递值，该组合框绑定到用户控件的结果创建。我准备做很多事情，但我真的想坚持使用 MVVM 方法，而不是在我已经知道如何执行此操作的代码中执行此操作。

我松散地遵循的 MVVM 方法在这里：http: [//msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:14:48.713

好的，我明白了。示例中的 MainViewModel 包含私有方法，它们是后续用户控件的构造函数。主窗口很好地绑定到组合框，但需要更多关于组合框成员的详细信息，它需要与新的构造函数相关。这需要设置并绑定到绑定到组合框的 XAML“选定值”中的元素的属性。一旦这个属性知道它被绑定，它就可以稍后在 ViewModelCode 中的内部方法中使用，该方法是数据绑定的，以通知构造函数传入的 Person 对象需要是什么。

我看到很多人的情况与我的情况相似但不同，所以我想如果以后有人发现它有用，我会发布这个。我要补充的唯一一个词是，我相信您需要继承“INotifyPropertyChanged”类，但在我的示例中，它在一个抽象类中，两个类继承级别降低了，所以我觉得没有必要重做所有事情来展示一个更简单的示例，因为我得到了我需要的东西。

XAML：

```
<ComboBox Height="30" Width="170" Margin="10" x:Name="combopersons" 
                    FontSize="20"
                    ItemsSource="{Binding Path=People}"
                    DisplayMemberPath="FirstName"
                    SelectedValuePath="PersonId"
                    SelectedValue="{Binding Path=CurrentUser}"  /> 
```

领域：

```
Person _currentPerson;
        ReadOnlyCollection<Person> _people;
        ObservableCollection<WorkspaceViewModel> _workspaces;

        string _curuser;
        string u = WindowsIdentity.GetCurrent().Name.Split('\\')[1];
        public string CurrentUser { get; set; }

        ExpensesEntities ee = new ExpensesEntities();

public ReadOnlyCollection<Person> People
        {
            get
            {
                if (_people == null)
                {
                    List<Person> persns = this.GetPeople();
                    _people = new ReadOnlyCollection<Person>(persns);
                }
                return _people;
            }
        } 
```

构造函数：

```
public MainWindowViewModel()
        {
            _curuser = ee.tePersons.Where(n => n.FirstName == u)
                        .Select(x => x.PersonID).FirstOrDefault().ToString();

            CurrentUser = _curuser;
        } 
```

辅助方法：

```
 List<Person> GetPeople()
        {
            //ExpensesEntities ee = new ExpensesEntities();
            return ee.tePersons.Select(x => new Person
                                         {
                                             PersonId = x.PersonID,
                                             FirstName = x.FirstName
                                         }).ToList();
        }

int ConvertToNumber(string s)
        {
            try
            {
                return Convert.ToInt32(s);
            }
            catch (FormatException e)
            {
                return 0;
            }
        }

        void SetCurrentUser()
        {
            int currentID = ConvertToNumber(CurrentUser);

            _currentPerson = ee.tePersons
                               .Where(i => i.PersonID == currentID)
                               .Select(p => new Person
                                                {
                                                    PersonId = p.PersonID,
                                                    FirstName = p.FirstName
                                                }).FirstOrDefault();
        } 
```

CHILD View Model 的 MainViewModel 中的构造函数：

```
 void MoneyEntry()
    {
        SetCurrentUser();
        MoneyEntryViewModel money = new MoneyEntryViewModel(_currentPerson);
        this.Workspaces.Add(money);
        this.SetActiveWorkspace(money);
    } 
```

# javascript - 各节中输入值的jQuery总和

> ID：14142011
> 
> 赞同：25
> 
> 时间：2013-01-03T15:33:56.090
> 
> 标签：javascript, jquery, input

我试图在多个部分中找到输入值的总和。我已经把我的代码放在下面了。

的HTML：

```
<div class="section">
  <input type="radio" name="q1" value="2"/>
  <input type="radio" name="q2" value="0"/>
  <input type="radio" name="q3" value="1"/>
  <input type="radio" name="q4" value="3"/>
</div> 
```

jQuery：

```
$('.section').each(function(){
  var totalPoints = 0;
  $(this).find('input').each(function(){
    totalPoints += $(this).val();
  });
  alert(totalPoints);
}); 
```

请注意，这是我实际使用的代码的简化版本。所以我希望这能提醒 2 个值（每个部分的总和）：8 然后 6。相反，我只是得到所有值的字符串。所以第一部分警告 0143。

任何想法如何获得累积总和而不是字符串？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-03T15:35:54.340

你正在做 "1"+"1" 并期望它是 2 ( int)

它不是。

一个非常快速（*但不*完全正确）的解决方案是：

```
$('.section').each(function(){
  var totalPoints = 0;
  $(this).find('input').each(function(){
    totalPoints += parseInt($(this).val()); //<==== a catch  in here !! read below
  });
  alert(totalPoints);
}); 
```

抓住 ？为什么 ？

答案：如果不使用，则应**始终**使用基数，前导零是**八进制**！

```
 parseInt("010") //8 ( ff)
 parseInt("010") //10 ( chrome)

 parseInt("010",10) //10 ( ff)
 parseInt("010",10) //10 ( chrome) 
```

反正你懂这个意思。供应基数！

# 编辑

最终解决方案（使用`.each( function(index, Element) )`）

```
$('.section').each(function(){
      var totalPoints = 0;
      $(this).find('input').each(function(i,n){
        totalPoints += parseInt($(n).val(),10); 
      });
      alert(totalPoints);
    }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T15:44:42.877

使用[parseFloat()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)或[parseInt()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)

```
var totalPoints = 0;
$('.section input').each(function(){
        totalPoints = parseFloat($(this).val()) + totalPoints;
});
alert(totalPoints); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T15:35:45.453

该值存储为字符串，因此调用`+=`正在执行字符串连接。你想/需要把它当作一个数字，所以它会加法。使用[`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)函数将其转换为数字：

```
totalPoints += parseInt($(this).val(), 10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:42:28.347

javascript函数 parseInt() 应该可以满足您的要求，这是一个小提琴：http: [//jsfiddle.net/k739M/](http://jsfiddle.net/k739M/)

还有一些格式化的代码：

```
$('.section').each(function(){
    var totalPoints = 0;
    $(this).find('input').each(function(){
        totalPoints += parseInt($(this).val());
    });

    alert(totalPoints);
});​ 
```

此外，如果您要在“.section input”上调用 $(each)，则可以减少处理时间（和代码）。

```
var totalPoints = 0;

$('.section input').each(function(){
    totalPoints += parseInt($(this).val());
});

alert(totalPoints); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-13T05:27:34.660

```
Use eval instead of parseInt
var a = "1.5";
var b = "2";
var c = parseInt(a) + parseInt(b);
console.log(c); //result 3

var a = "1.5";
var b = "2";
var c = eval(a) + eval(b);
console.log(c); //result 3.5 this is accurate 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-28T06:08:03.347

您还可以使用`reduce()`Array 的方法来获取总和：

```
var arrayOfValues = $('.section input[type=radio]').map(function(index, input) {
    return parseInt($(input).val());
}).toArray();
var sum = arrayOfValues.reduce(function(val1, val2) {
    return val1 + val2;
}); 
```

# c++ - 使用 G++ 提升静态链接问题

> ID：14142012
> 
> 赞同：1
> 
> 时间：2013-01-03T15:33:57.757
> 
> 标签：c++, boost, g++, static-linking, undefined-reference

我有一个应用程序，动态链接一切正常，但是当我尝试使用静态链接进行编译时，出现以下错误。

我的应用程序使用增强线程，asio

错误：

```
/tmp/ccMj2fHI.o: In function `__static_initialization_and_destruction_0(int, int)':
test.cpp:(.text+0x237): undefined reference to `boost::system::get_system_category()'
test.cpp:(.text+0x243): undefined reference to `boost::system::get_generic_category()'
test.cpp:(.text+0x24f): undefined reference to `boost::system::get_generic_category()'
test.cpp:(.text+0x25b): undefined reference to `boost::system::get_generic_category()'
test.cpp:(.text+0x267): undefined reference to `boost::system::get_system_category()'
/tmp/ccnCWj1O.o: In function `__static_initialization_and_destruction_0(int, int)':
AccountSe.cpp:(.text+0x507): undefined reference to `boost::system::get_system_category()'
AccountSe.cpp:(.text+0x513): undefined reference to `boost::system::get_generic_category()'
AccountSe.cpp:(.text+0x51f): undefined reference to `boost::system::get_generic_category()'
AccountSe.cpp:(.text+0x52b): undefined reference to `boost::system::get_generic_category()'
AccountSe.cpp:(.text+0x537): undefined reference to `boost::system::get_system_category()' 
```

以及所有源文件的类似错误。

编译命令行：

> g++ -L /usr/lib/ -lboost_system -lboost_thread -o newserver -static /usr/lib/libboost_thread.a /usr/lib/libboost_system.a stdafx.cpp test.cpp AccountSe.cpp ... -lpthread -std= c++0x

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:36:54.870

这很可能是由于您的链接顺序。Boost 库首先出现在命令行中，在处理它们之后，链接器将丢弃未引用的符号，然后再继续链接其他目标文件和库。

将 boost 库放在*你*的源之后和之前`-lpthread`。

# python - 如何获取接口上的活动 ESSID？

> ID：14142014
> 
> 赞同：1
> 
> 时间：2013-01-03T15:34:04.887
> 
> 标签：python, linux, wireless

我希望仅使用 Python 标准库在接口上获取活动 ESSID；我只需要支持Linux环境。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:34:04.887

这可以使用调用来完成。[`SIOCGIWESSID`](http://lxr.free-electrons.com/source/include/uapi/linux/wireless.h#L271) [`ioctl`](http://www.kernel.org/doc/man-pages/online/pages/man2/ioctl.2.html)

这段代码可能看起来有点混乱，因为它更类似于你在 C 代码而不是 Python 中看到的东西，但它本质上是通过首先以 Python 数组的形式分配一些内存（我们将在其中放置 ESSID）来工作的，然后执行一个`ioctl`就地修改该数组的调用。

```
import array
import fcntl
import socket
import struct

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
maxLength = {
    "interface": 16,
    "essid": 32
}
calls = {
    "SIOCGIWESSID": 0x8B1B
}

def getESSID(interface):
    """Return the ESSID for an interface, or None if we aren't connected."""
    essid = array.array("c", "\0" * maxLength["essid"])
    essidPointer, essidLength = essid.buffer_info()
    request = array.array("c",
        interface.ljust(maxLength["interface"], "\0") +
        struct.pack("PHH", essidPointer, essidLength, 0)
    )
    fcntl.ioctl(sock.fileno(), calls["SIOCGIWESSID"], request)
    name = essid.tostring().rstrip("\0")
    if name:
        return name
    return None 
```

# sql - Oracle 数据类型错误

> ID：14142019
> 
> 赞同：0
> 
> 时间：2013-01-03T15:34:18.630
> 
> 标签：sql, oracle, etl

我试图`date`通过从列也是数据类型的源表中选择一个值来将一个值插入数据`date`类型。我直接选择了列，没有使用`to_date`函数进行任何转换，因为两者都是相同的类型，但我收到以下错误：

```
SQL Error: ORA-00932: inconsistent datatypes: expected DATE got NUMBER
00932\. 00000 -  "inconsistent datatypes: expected %s got %s" 
```

我加倍检查，源列没有空值。

```
insert into Target(Targetdate) 
  select to_date(Source.START_DATE,'yyyy-mm-dd')
    from Source 
```

感谢您查看这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:37:26.117

我假设您尝试将截断为当天的日期放入 Target 表中。这可以通过这样做来完成：

```
insert into Target(Targetdate) select trunc(Source.START_DATE,'DD') from Source 
```

**编辑**

Dazzal 提到，由于这是将第二个参数留给 TRUNC 时的默认操作，所以这甚至更简单一点：

```
insert into Target(Targetdate) select trunc(Source.START_DATE) from Source 
```

您的查询的问题是这`Source.START_DATE`是一个日期，而不是一个字符串......

**编辑2**

似乎您想要以特定格式获取日期字符串 - 这与日期类型以及内部存储的方式无关 - 只需执行以下操作*：*

```
SELECT to_char(START_DATE,'YYYY-MM-DD' from Source; 
```

*   [甲骨文TRUNC](http://www.techonthenet.com/oracle/functions/trunc_date.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:29:19.320

> “我的源值示例是 11-JUN-13，我需要目标值作为 YYYY-MM-DD 我怎样才能做到这一点？”

所有 Oracle 日期都以相同的内部格式存储：

```
SQL>  select dump(sysdate) from dual;

DUMP(SYSDATE)
---------------------------------------------
Typ=13 Len=8: 221,7,1,3,10,22,8,0

SQL> 
```

显示日期完全取决于客户端环境的默认值，或者如果我们使用 TO_CHAR()，则取决于格式掩码。

如果您的两个列都是 DATE 数据类型，那么您的事情就过于复杂了：您不需要在 INSERT 中转换值。

```
insert into Target (Targetdate) 
select Source.START_DATE
from Source 
```

您只需要在从中选择目标日期时应用格式掩码`Target`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:38:13.070

您说您正在从源表中选择一个日期列。当它是日期列时，为什么要再次转换为日期？当然它也会给出错误..

```
insert into Target(Targetdate) 
select to_date(Source.START_DATE,'yyyy-mm-dd'), from Source 
```

'to_date' 函数的输入参数是 'string'

```
to_date( string1, [ format_mask ], [ nls_language ] ) 
```

更新1：

```
alter session set nls_date_format = 'yyyy-mm-dd';

insert into Target(Targetdate) 
select to_char(Source.START_DATE,'yyyy-mm-dd') from Source 
```

# batch-file - 读取各种 txt 文件中的行，在单行和单个文件中输出这些行

> ID：14142020
> 
> 赞同：1
> 
> 时间：2013-01-03T15:34:22.733
> 
> 标签：batch-file

我对 bat 非常基础，需要帮助执行一个脚本，该脚本将多个 txt 文件的行连接到一行和一个文件中。例如：这些是文件：

***W7BR71754L.txt***

```
Relatório de Hardware:
Nome:W7BR71754L
S.O.:Microsoft Windows 7 Professional 
Usuário:GMEA\SESA197328
Serial:5CB2204XTP 
```

***W7BR71760L.txt***

```
Relatório de Hardware:
Nome:W7BR71760L
S.O.:Microsoft Windows 7 Professional 
Usuário:GMEA\SESA97408
Serial:5CB2190BPX 
```

***新文件.txt***

```
Relatório de Hardware:;Nome:W7BR71754L;S.O.:Microsoft Windows 7 Professional ;Usuário:GMEA\SESA197328;Serial:5CB2204XTP;
Relatório de Hardware:;Nome:W7BR71760L;S.O.:Microsoft Windows 7 Professional ;Usuário:GMEA\SESA97408;Serial:5CB2190BPX; 
```

这是我正在做的事情，但它并没有完全满足我的需要......

```
@echo off
setlocal EnableDelayedExpansion
set "text="
for /r %%G in (*.txt) do (call :sub "%%G")
:sub
for /f "tokens=*" %%a in (%1) do (
 set "text=!text!%%a"
)
>>newFile.txt echo !text!; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:20:32.090

您快到了，它只是将新行放入您需要添加的文件中。

这会将所有文件文本连接到一个文件中 - 每个文件的内容由一行分隔。

```
setlocal enabledelayedexpansion
set text=
for /r %%a in (*.txt) do (
for /f "tokens=* delims=" %%x in (%%a) do (
set text=!text!%%x
)
echo !text! >>newfile.txt
set text=
) 
```

# algorithm - 为什么单生产者单消费者循环队列线程不加锁是安全的？

> ID：14142023
> 
> 赞同：14
> 
> 时间：2013-01-03T15:34:40.553
> 
> 标签：algorithm, data-structures, thread-safety

这似乎是真的，但我的想法一直很混乱。有人可以给出一个明确的解释和一些关键情况，它总是在没有锁定的情况下工作吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-09-13T06:59:20.857

单生产者-单消费者循环队列背后的真正技巧是头和尾指针被**原子地**修改。这意味着如果内存中的某个位置从值 A 更改为值 B，则在其值更改时读取内存的观察者（即阅读器）将得到 A 或 B 作为结果，没有别的。

因此，例如，如果您使用 16 位指针但您在两个 8 位步骤中更改它们（这可能取决于您的 CPU 体系结构和内存对齐要求），您的队列将无法工作。在这种情况下，阅读器可能会读取完全错误的瞬态值。

因此，请确保您的指针在您的平台中被自动修改！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T15:38:33.747

这肯定取决于循环队列的实现。但是，如果它是我想象的那样，你有两个索引——队列的`head`和`tail`。生产者与 合作`tail`，消费者与 合作`head`。它们共享消息数组，但使用两个不同的指针。

生产者和消费者可能会发生冲突的唯一情况是，例如消费者检查新消息并在检查后立即到达。然而，在这种情况下，消费者会稍等片刻并再次检查。程序的正确性不会丢失。

它与单个生产者单个消费者一起工作的原因主要是因为两个用户不共享太多内存。例如，在多个生产者的情况下，您将有多个线程访问`head`并且可能会引发冲突。

**编辑**正如 dasblinkenlight 在他的评论中提到的那样，我的推理只有在两个线程都将各自的计数器递增/递减作为其消费/生产的最后操作时才成立。

# regex - R 的正则表达式前环顾四周

> ID：14142025
> 
> 赞同：6
> 
> 时间：2013-01-03T15:34:48.597
> 
> 标签：regex, r

我正在尝试使用 stringr 包使用正则表达式来提取一些文本。出于某种原因，我收到“无效的正则表达式”错误。我在一些网站测试工具中尝试过正则表达式，它似乎在那里工作。我想知道正则表达式在 R 中的工作方式是否有独特之处，尤其是在 stringr 包中。

这是一个例子：

```
string <- c("MARKETING:  Vice President", "FINANCE:  Accountant I",
"OPERATIONS: Plant Manager")

pattern <- "[A-Z]+(?=:)"
test <- gsub(" ","",string)
results <- str_extract(test, pattern) 
```

这似乎不起作用。我想得到没有“：”的“营销”、“财务”和“运营”。这就是我使用前瞻语法的原因。我意识到我可以使用以下方法解决这个问题：

```
pattern <- "[A-Z]+(:)"
test <- gsub(" ","",string)
results <- gsub(":","",str_extract(test, pattern)) 
```

但我预计在不久的将来我可能需要在比这更复杂的情况下使用环视。

我是否需要用一些转义或其他东西来修改正则表达式以使其工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:52:22.530

前瞻断言要求您将正则表达式标识为 R 中的 perl 正则表达式。

```
str_extract(string, perl(pattern))
# [1] "MARKETING"  "FINANCE"    "OPERATIONS" 
```

您也可以在基础 R 中轻松做到这一点：

```
regmatches(string, regexpr(pattern, string, perl=TRUE))
# [1] "MARKETING"  "FINANCE"    "OPERATIONS" 
```

`regexpr`查找匹配项并`regmatches`使用匹配数据提取子字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:38:14.127

您可以直接使用`sub`和分组来执行此操作。

```
sub('^([A-Z]+):.*$', '\\1', string)

# [1] "MARKETING"  "FINANCE"    "OPERATIONS" 
```

我将组固定到一行的开头，寻找一个或多个大写字母并保存它们。它们后面必须跟一个冒号，`:`然后是零个或多个附加字符。

# complexity-theory - 当我测量算法的复杂度时如何找到 T (1)

> ID：14142029
> 
> 赞同：-3
> 
> 时间：2013-01-03T15:34:57.450
> 
> 标签：complexity-theory, time-complexity, space-complexity

**问题01：** 当我测量一个算法的复杂度时，如何找到T(1)？

例如我有这个算法

```
Int Max1 (int *X, int N)
{
  int a ;
  if (N==1) return X[0] ;
  a = Max1 (X, N‐1);
  if (a > X[N‐1]) return a;
  else return X[N‐1];
} 
```

我怎样才能找到 T(1)？

**问题2 ：**

```
T(n)= T(n-1) + 1 ==> O(n) 
```

这个等式中的“1”是什么意思

亲切地

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:20:44.880

答案 1\. 您正在寻找复杂性。你必须决定你想要什么样的案例复杂度：最好的、最坏的或平均的。根据您选择的内容，您会以不同的方式找到 T(1)：

*   最佳：想想你的算法可以得到的最简单的长度为 1 的输入。如果您在列表中搜索一个元素，最好的情况是该元素是列表中的第一个元素，并且您可以让 T(1) = 1。
*   最差：想想你的算法可以得到的最难的长度为 1 的输入。也许你的线性搜索算法对大多数长度为 1 的输入执行 1 条指令，但是对于列表 [77]，你需要 100 步（这个例子有点做作，但算法完全有可能采取更多或更少的步骤，具体取决于与输入的“大小”无关的输入属性）。在这种情况下，您的 T(1) = 100。
*   平均：考虑您的算法可以获得的所有长度为 1 的输入。为这些输入分配概率。然后，计算所有可能性的平均 T(1) 以获得平均情况 T(1)。

在你的情况下，对于长度为 1 的输入，你总是返回，所以你的 T(n) = O(1) （实际数字取决于你如何计算指令）。

回答 2。在这种情况下，“1”表示指令的精确数量，在某些指令计数系统中。它与 O(1) 的区别在于 O(1) 可以表示不依赖于（根据、趋势等）输入的任何数字（或数字）。您的等式表示“在大小为 n 的输入上评估函数所需的时间等于在大小为 n - 1 的输入上评估函数所需的时间，再加上一条额外的指令”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:52:21.253

`Max1(X,N-1)`是实际的算法，其余的是一些检查，`O(1)` 无论输入如何，所用的时间都是相同的。

`Max1`我只能假设的函数是在数组中找到数组最高数，这将是`O(n)`因为它会以线性方式随时间增加到输入 n 的数量。

另外据我所知，在大多数算法中，1 代表 1，只有字母具有可变含义，如果您的意思是它们是如何得到的

`T(n-1) + 1`到`O(n)`，这是由于您忽略了系数和低阶项，所以 1 是两种情况都被忽略了`O(n)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T18:17:43.197

T( *n* ) 是所谓的“ *n*的函数”，也就是说，*n*是一个“变量”（意味着您可以用不同的值替换它的位置），并且*n*的每个特定（有效）值将确定T( *n* )的对应值。因此，T(1) 仅表示“当*n*为 1时 T( *n ) 的值”。*

 *所以问题是，对于输入值为 1，算法的运行时间是多少？*

# c# - 在 Umbraco 的 Razor 中对潜在字符串使用 string.IsNullOrEmpty

> ID：14142032
> 
> 赞同：5
> 
> 时间：2013-01-03T15:35:10.363
> 
> 标签：c#, string, razor, umbraco

我正在使用一种简单的方法来输出图像，如果媒体类型附加了链接，它将充当链接。这种方法已经使用了几个月和几个月，但突然有客户抱怨它不起作用。

我的剃刀宏整体看起来像这样：

```
@using umbraco.MacroEngines
@inherits umbraco.MacroEngines.DynamicNodeContext

@{
    var topImageId = Model._topImage;

    if ( topImageId != null ) {

        var topImage = Library.MediaById(topImageId);
        var linkId = topImage._link;
        string cssStyle = string.Format( "background-image:url({0});height:{1}px;", topImage.umbracoFile, topImage.umbracoHeight );

        <div id="topImage"

        @if(!string.IsNullOrEmpty(linkId)){

            var tempNode = @Model.NodeById(linkId);
            @Html.Raw(string.Format(" onclick=\"window.location.href='{0}'\"", @tempNode.Url));

            cssStyle += " cursor: pointer;";
        }

        @Html.Raw( string.Format( "style=\"{0}\"", cssStyle ) )

        ></div>

    }
} 
```

它会产生这两个错误：

```
Error Loading Razor Script (file: Top Image) The best overloaded method match for 'string.IsNullOrEmpty(string)' has some invalid arguments    at CallSite.Target(Closure , CallSite , Type , Object )
  at System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0, T1 arg1)
  at ASP._Page_macroScripts_general_topImage_cshtml.Execute() in d:\inetpub\wwwroot\friendtex.com\www\macroScripts\general\topImage.cshtml:line 15
  at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
  at System.Web.WebPages.WebPage.ExecutePageHierarchy(IEnumerable`1 executors)
  at System.Web.WebPages.WebPage.ExecutePageHierarchy()
  at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
  at umbraco.MacroEngines.RazorMacroEngine.ExecuteRazor(MacroModel macro, INode currentPage)
  at umbraco.MacroEngines.RazorMacroEngine.Execute(MacroModel macro, INode currentPage) 0.741249    0.004230 
```

和

```
Error loading MacroEngine script (file: /general/topImage.cshtml, Type: ''
The best overloaded method match for 'string.IsNullOrEmpty(string)' has some invalid arguments
  at umbraco.macro.renderMacro(Hashtable pageElements, Int32 pageId) 
```

我怀疑图像本身是原因的根源，但媒体图像绝对应有的样子，我看不出有什么不同。并且添加到奇怪的因素 - 宏与任何其他图像完美配合。失败的图像可以[在这里找到](http://friendtex.com.web01.teasolutions.dk/media/7107/toponcetest.png)

编辑：

出于某种奇怪的原因，如果我`GetType()`按照 Douglas 的建议对图像执行操作，它会返回一个`Umbraco.MacroEngines.DynamicXml`对象，而在任何其他图像上它都会返回一个字符串。它只是继续变得越来越奇怪。

第二次编辑：

我决定放弃代码并使用 Kevin Hendricks 建议的技术重写整个事情。现在突然之间，我没有收到任何错误，而且效果很好。唯一的区别是`.ToString()`几个地方。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T15:40:26.553

这听起来很愚蠢，但您可能想将 var linkId 转换为字符串。如果出于某种原因，通用 var 对象将其视为整数、Uri 或不同，则会出现此类问题

```
var topImage = Library.MediaById(topImageId);
var linkId = topImage._link;
if (!string.IsNullOrEmpty(linkId.ToString()))
{

} 
```

更喜欢：

```
var topImage = Library.MediaById(topImageId); 
string linkId = topImage._link.ToString(); 
if (!string.IsNullOrEmpty(linkId)) 
{ 

} 
```

# jquery - 使用 fancybox 1.2.6 保持上一个/下一个箭头可见

> ID：14142037
> 
> 赞同：-1
> 
> 时间：2013-01-03T15:35:20.693
> 
> 标签：jquery, navigation, fancybox, visible

如何使用fancybox 1.2.6 让prev/next 箭头始终可见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:48:12.410

要永久显示导航箭头，请在加载 fancybox css 文件后添加此 CSS（内联）声明：

对于fancybox **v1.2.6**

```
span#fancy_left_ico {
   left: 20px; 
} 
span#fancy_right_ico {
   right: 20px;
} 
```

对于**v1.3.4**

```
#fancybox-left-ico { 
   left: 20px; 
}
#fancybox-right-ico {  
   right: 20px;  
   left: auto; 
} 
```

对于**v2.1.3+**

```
.fancybox-nav span {
   visibility: visible;
}​ 
```

# mysql - 如何优化这个mysql查询？运行缓慢

> ID：14142039
> 
> 赞同：1
> 
> 时间：2013-01-03T15:35:24.387
> 
> 标签：mysql, sql

我正在使用一个数据库，恕我直言，设计得不好，但也许只是我不理解它。无论如何，我有一个查询可以提取正确的信息，但它确实减慢了我的 php 脚本。我希望有人可以看看这个，让我知道嵌套查询到这个深度是否不好，以及是否有一种方法可以从下面的 sql 语句中描述的关系中简化查询。

```
SELECT name 
FROM groups 
WHERE id = (SELECT DISTINCT immediateparentid 
            FROM cachedgroupmembers 
            WHERE groupid = (SELECT  g.id AS AdminCc
                             FROM Tickets t, groups g  
                             WHERE t.Id = 124 AND t.id = g.instance AND g.type = 'AdminCc')
                             AND immediateparentid <> (SELECT  g.id AS AdminCc
                                                       FROM Tickets t, groups g  
                                                       WHERE t.Id = 124 AND t.id = g.instance AND g.type = 'AdminCc')) 
```

请帮忙

**更新：**

这是使用解释的输出 ![解释](../Images/d03efcc3a058d9ebae668cb7d397480c.png)

您可能需要右键单击并选择“查看图像”以使文本清晰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:54:13.043

据我所知，您可以消除一个子选择。

```
SELECT name 
FROM groups 
WHERE id = (
    SELECT DISTINCT immediateparentid 
    FROM cachedgroupmembers 
    WHERE groupid = (
        SELECT g.id 
        FROM Tickets t, groups g
        WHERE t.Id = 124 AND t.id = g.instance AND g.type = 'AdminCc'
    ) AND immediateparentid != groupid
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:36:29.000

我更习惯于 Oracle 上的 PL/SQL，但我会试一试。

1.  摆脱别名，这里不需要它们。
2.  `where`确保子句中使用的列被索引（`t.Id`和`g.type`）。
3.  不知道 MySQL 是否默认索引外键但值得一试。

您可以像这样缩短 SQL 代码：

```
SELECT name 
FROM groups 
WHERE id = (
    SELECT DISTINCT immediateparentid 
    FROM cachedgroupmembers 
    WHERE groupid = (
        SELECT g.id 
        FROM Tickets t, groups g
        WHERE t.Id = 124 AND t.id = g.instance AND g.type = 'AdminCc'
   ) AND immediateparentid != groupid
) 
```

或者：

```
 SELECT name 
    FROM groups 
    WHERE id = (
        SELECT DISTINCT immediateparentid 
        FROM cachedgroupmembers 
        WHERE groupid = (
            SELECT g.id 
            FROM Tickets t inner join groups g on t.id = g.instance
            WHERE t.Id = 124 AND g.type = 'AdminCc'
 ) AND immediateparentid != groupid
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:48:56.303

如果您的票证表很大，您可以考虑使用临时表而不是查询两次

# java - 罗盘针在错误的位置绘制

> ID：14142043
> 
> 赞同：1
> 
> 时间：2013-01-03T15:35:42.297
> 
> 标签：java, graphics, paint

我正在用java编写指南针。首先，我为我的指南针创建了一个 UI 原型，并为其创建了一个工作 SSCCE，您可以在其中单击面板，指针指向另一个方向，大约相差 15 度。这是代码：

```
public class TestFrame extends JFrame {

    public TestFrame() {
        initComponents();
    }

    public void initComponents() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocation(new Point((int) (Toolkit.getDefaultToolkit().getScreenSize().width / 2) - 400, (int) (Toolkit.getDefaultToolkit().getScreenSize().height / 2) - 250));
        setSize(500, 500);
        setVisible(true);
        CompassPanel c = new CompassPanel();
        add(c, BorderLayout.CENTER);

    }

    public class CompassPanel extends JPanel {
        Image bufImage;
        Graphics bufG;
        private int circleX, circleY, circleRadius;
        private int[] xPoints, yPoints;
        private double rotationAngle = Math.toRadians(0);

        public CompassPanel() {
            setVisible(true);

            addMouseListener(new MouseListener() {
                @Override
                public void mouseReleased(MouseEvent e) {
                }

                @Override
                public void mousePressed(MouseEvent e) {
                }

                @Override
                public void mouseExited(MouseEvent e) {
                }

                @Override
                public void mouseEntered(MouseEvent e) {
                }

                @Override
                public void mouseClicked(MouseEvent e) {
                    rotationAngle = rotationAngle + Math.toRadians(15);
                    repaint();
                }
            });

        }

        @Override
        public void paint(Graphics g) {
            super.paint(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            circleRadius = (int) (getWidth() * 0.7);
            circleX = 50;
            circleY = 50;

            g2d.setColor(Color.BLACK);
            for (int angle = 0; angle <= 360; angle += 5) {
                double sin = Math.sin(Math.toRadians(angle));
                double cos = Math.cos(Math.toRadians(angle));
                int x1 = (int) ((circleX + circleRadius / 2) - cos  * (circleRadius * 0.37) - sin * (circleRadius * 0.37));
                int y1 = (int) ((circleY + circleRadius / 2) + sin  * (circleRadius * 0.37) - cos * (circleRadius * 0.37));
                g2d.setColor(Color.BLACK);
                g2d.drawLine(x1, y1, (circleX + circleRadius / 2), (circleY + circleRadius / 2));
            }

            g2d.setFont(new Font("Arial", Font.BOLD, 11));
            g2d.drawString("WEST", circleX - 45, circleY + circleRadius / 2 + 4);
            g2d.drawString("EAST", circleX + circleRadius + 13, circleY + circleRadius / 2 + 4);
            g2d.drawString("NORTH", circleX + circleRadius / 2 - 14, circleY - 15);
            g2d.drawString("SOUTH", circleX + circleRadius / 2 - 14, circleY + circleRadius + 25);
            g2d.setColor(Color.WHITE);
            g2d.fillOval(circleX, circleY, circleRadius, circleRadius);
            g2d.setColor(Color.BLACK);
            g2d.drawOval(circleX, circleY, circleRadius, circleRadius);

            xPoints = new int[] { (int) (circleX + circleRadius / 2),
                    (int) (circleX + circleRadius * 0.25),
                    (int) (circleX + circleRadius / 2),
                    (int) (circleX + circleRadius * 0.75) };

            yPoints = new int[] { (int) (circleY + 30),
                    (int) (circleY + circleRadius * 0.85),
                    (int) (circleY + circleRadius * 0.6),
                    (int) (circleY + circleRadius * 0.85) };

            Polygon fillPoly = new Polygon(xPoints, yPoints, 4);
            Polygon outerPoly = new Polygon(xPoints, yPoints, 4);

            int rotationX = circleX + (circleRadius / 2);
            int rotationY = circleX + (circleRadius / 2);

            g2d.setColor(Color.green);
            g2d.fillOval(rotationX, rotationY, 5, 5);

            AffineTransform a = g2d.getTransform().getRotateInstance(rotationAngle, rotationX, rotationY);
            g2d.setTransform(a);

            g2d.setColor(Color.RED);
            g2d.fillPolygon(fillPoly);

            g2d.setColor(Color.black);
            g2d.draw(outerPoly);
        }

        @Override
        public void update(Graphics g) {
            int w = this.getSize().width;
            int h = this.getSize().height;

            if (bufImage == null) {
                bufImage = this.createImage(w, h);
                bufG = bufImage.getGraphics();
            }

            bufG.setColor(this.getBackground());
            bufG.fillRect(0, 0, w, h);
            bufG.setColor(this.getForeground());

            paint(bufG);
            g.drawImage(bufImage, 0, 0, this);
        }

        public void setRotationAngle(int angle) {
            rotationAngle = angle;
        }
    }

    public static void main(String[] args) {
        new TestFrame();
    }
} 
```

当我在我的应用程序中实现这个面板时，没有像在 SSCCE 中那样绘制针。它被画得更高一点，在它应该在的位置的左边。当我单击面板并旋转针时，旋转工作正常，并且针被涂在它所属的位置。

我将这样的面板添加到我的应用程序中。sensorPanel`JPanel`位于`TabbedPane`.

```
public JPanel createSensorPanel(){
    sensorPanel = new JPanel(new MigLayout("fill, insets 3"));
    CompassPanel compassPanel = new CompassPanel();
    sensorPanel.add(compassPanel, "wrap");
    return sensorPanel;
} 
```

为什么`Polygon`在 SSCCE 中绘制的位置没有绘制针的位置？

编辑：

这是问题的图片。![图片](../Images/6e30df3010bb98145b2504399a8a4a7e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:16:34.003

如果您仔细观察图像上发生的情况，就会发现仿射变换就是问题所在。

![在此处输入图像描述](../Images/662c7c98658b952440ccbc042fb85581.png)

看起来仿射变换与顶级父组件而不是当前子组件相关（请参阅[java Affine Transform正确顺序](https://stackoverflow.com/questions/10268684/java-affine-transform-correct-order)）。

快速而肮脏的解决方案是在翻译父母时翻译箭头（基于[this answer](https://stackoverflow.com/a/10270690/600132)）

```
AffineTransform a = g2d.getTransform().
    getRotateInstance(rotationAngle, rotationX, rotationY)
    .translate(parent.getX(), parent.getY()) // use instance of real parent instead
    .translate(tabpane.getX(), tabpane.getY()); // use instance of JTabbedPane instead 
```

但更方便的是一些常见的解决方案，比如[这个](https://stackoverflow.com/a/10268789/600132)。

# mysql - Mysql 查询与连接回同一个表和计数

> ID：14142046
> 
> 赞同：0
> 
> 时间：2013-01-03T15:35:46.593
> 
> 标签：mysql, sql, database

我有一张桌子：

```
InvoiceItem
----------------
id     
type      <- 'ITEM' 'FEE' 'OTHER'
parentid  <- InvoiceItem id of the parent invoice item
<some other columns> 
```

我如何将这个表连接到自身，如果表中有任何项目具有给定的 InvoiceItem id 作为 parentid，则获取所有 InvoiceItem 列，其中 id = 给定的 id 加上一个给我一个 true|false 1|0 的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:39:30.877

1.  使用相关子查询：

    ```
    SELECT a.*,
           EXISTS(SELECT * FROM InvoiceItem b WHERE b.parentid = a.id)
             AS has_children
    FROM   InvoiceItem a
    WHERE  a.id = ? 
    ```

2.  使用外连接：

    ```
    SELECT a.*, COUNT(b.id) > 0 AS has_children
    FROM   InvoiceItem a LEFT JOIN InvoiceItem b ON b.parentid = a.id
    WHERE  a.id = ? 
    ```

# iphone - 如何在 iOS 6 上管理 AdMob 行为？

> ID：14142050
> 
> 赞同：0
> 
> 时间：2013-01-03T15:35:49.520
> 
> 标签：iphone, ios, sdk, admob

我对 iOS 上的 AdMob 行为有一些疑问。有一个委托方法：

`-(void)adView:(GADBannerView *)view didFailToReceiveAdWithError:(GADRequestError *)error{`

一个例子：

1）我打开我的应用程序，Internet Connection is OK，`adViewDidReceiveAd`被调用。

2) Internet Connection is down，`didFailToReceiveAdWithError`被调用。

当视图没有显示广告时，我会删除广告。但是如何验证什么时候没有显示广告呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:53:32.577

`didFailToReceiveAdWithError`：应该很好地表明广告没有展示。如果您想了解有关广告未显示具体原因的更多信息，您可以检查`GADErrorCode`返回的类型（查看`GADRequestError.h`不同错误代码的说明）。您可能可以安全地隐藏`GADBannerView`无论何时`didFailToReceiveAdWithError:`被调用。

# android - 如果您可以直接从 AttributeSet 中读取，为什么需要声明样式？

> ID：14142052
> 
> 赞同：2
> 
> 时间：2013-01-03T15:35:50.633
> 
> 标签：android, android-xml, attr, android-custom-view, declare-styleable

我使用以下构造函数创建了一个自定义 View 子类：

```
public MyCustomView(Context context, AttributeSet attrs)
{
    super(context, attrs);

    // get custom "thingy" attribute specified in XML
    int thingy = attrs.getAttributeIntValue(MY_NAMESPACE, "thingy", 0);

    //rest of constructor
    ...
} 
```

可以看出，它从其 XML 属性中获取了一个自定义的“thingy”属性。这工作得很好，到目前为止我没有遇到任何问题。那么，为什么 Google 会告诉您在`declare-styleable`in `res/values/attrs.xml`（在此处讨论[）](http://developer.android.com/training/custom-views/create-view.html#customattr)`context.getTheme().obtainStyledAttributes()`中定义自定义 View 的 XML 属性并通过调用（在[此处](http://developer.android.com/training/custom-views/create-view.html#applyattr)讨论）来应用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:00:35.767

我很笨。我发布的第二个链接*确实*解释了原因：

> 当从 XML 布局创建视图时，XML 标记中的所有属性都从资源包中读取，并作为 AttributeSet 传递到视图的构造函数中。虽然可以直接从 AttributeSet 中读取值，但这样做有一些缺点：
> 
> *   属性值中的资源引用未解析
> *   未应用样式
> 
> 相反，将 AttributeSet 传递给 gainStyledAttributes()。此方法传回一个 TypedArray 数组，该数组包含已取消引用和样式化的值。

# java - String 到 Long 的转换在 C 和 Java 中不同，为什么？

> ID：14142063
> 
> 赞同：1
> 
> 时间：2013-01-03T15:36:19.180
> 
> 标签：java, c, byte, long-integer

我有一个像`"01030920316"`. 当我要将此字符串转换为长字符串然后转换为字节时，它会在下面给出java的输出

```
output in java : Tag in bytes :  0, 0, 0, 0, 61, 114, -104, 124 
```

当我得到这个输出时，我在 C 中做同样的事情

```
output in C : Tag in bytes : 124,152,114,61,0,0,0,0 
```

在这里，我理解了有符号和无符号之间的区别，`-104 and 152`但为什么最初在 java 和 C 中都是 0。对于这种行为，当我的这个字节转到 C 程序端进行验证时，我遇到了问题。

请解释一下问题发生在哪里。

Java程序：

```
final byte[] tagBytes = ByteBuffer.allocate(8)
                .putLong(Long.parseLong("01030920316")).array();
System.out.println("Tag in bytes  >> " + Arrays.toString(tagBytes)); 
```

C程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <inttypes.h>

/** To access long long values as a byte array*/
typedef union uInt64ToByte__
{
    uint64_t m_Value;
    unsigned char m_ByteArray[8];

}uInt64ToByte;

int main()
{
    uInt64ToByte longLongToByteArrayUnion;
    longLongToByteArrayUnion.m_Value = atoll("01030920316");
    printf("%d,%d,%d,%d,%d,%d,%d,%d",longLongToByteArrayUnion.m_ByteArray[0],longLongToByteArrayUnion.m_ByteArray[1],longLongToByteArrayUnion.m_ByteArray[2],longLongToByteArrayUnion.m_ByteArray[3],longLongToByteArrayUnion.m_ByteArray[4],longLongToByteArrayUnion.m_ByteArray[5],longLongToByteArrayUnion.m_ByteArray[6],longLongToByteArrayUnion.m_ByteArray[7]);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T15:40:45.117

> java中的输出：以字节为单位的标记：0、0、0、0、61、114、-104、124

Java 的 ByteBuffer 默认是 Big Endian，它的字节是有符号的，所以大于 127 的字节显示为负数。

> C 中的输出：以字节为单位的标记：124,152,114,61,0,0,0,0

C 的数组使用本机字节字节序，这在 x86/x64 系统上是小字节序。的`unsigned char`范围为 0 到 255。

要在 Java 中产生与 C 相同的输出，您可以这样做

```
final byte[] tagBytes = ByteBuffer.allocate(8).order(ByteOrder.nativeOrder())
        .putLong(Long.parseLong("01030920316")).array();
int[] unsigned = new int[tagBytes.length];
for (int i = 0; i < tagBytes.length; i++)
    unsigned[i] = tagBytes[i] & 0xFF;
System.out.println("Tag in bytes  >> " + Arrays.toString(unsigned)); 
```

印刷

```
Tag in bytes  >> [124, 152, 114, 61, 0, 0, 0, 0] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T15:38:07.837

字符串在 Java 和 C 中的存储方式不同。您必须记住，用 C 编写的应用程序是本机的，而 Java 应用程序是在 Java 虚拟机中运行的。Java 字节码与平台无关，这就是为什么您的 Java 代码在所有操作系统/处理器架构上的行为都相同的原因。另一方面，存储字符的顺序在 C 中可能不同（编辑：**在不同的架构上**）

**Edit2：**假设我们有一个数字 109，即 1101101 二进制。为什么？1 * 64 + 1 * 32 + 0 * 16 + 1 * 8 + 1 * 4 + 0 * 2 + 1 * 1 = 109。最左边的位被称为“最重要的”，因为它的权重最大（2^ 6 = 64），最右边的位被称为“最低有效位”，因为它的权重最小（只有 1）。109 很无聊，因为它可以存储在单个字节中。假设我们有更大的东西，例如：1000，即 00000011 11101000 二进制。它存储在两个字节中（比如说 X 和 Y）。现在我们可以将该数字保存为 XY（大端）或 YX（小端）。在 big-endian 中，第一个字节（具有最低地址）是最高有效字节。在 little-endian 中，第一个字节是最低有效字节。x86 是小端，JVM 是大端。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T15:42:13.420

[这是BigEndian 和 LittleEndian](http://en.wikipedia.org/wiki/Endianness)之间的区别。

当您将 C++ 上的数字转换为字节数组时，您会注意到底层系统是大端（首先存储多字节整数的最高有效字节）还是小端（首先存储最低有效字节）。

但另一方面，Java 通过始终使用大端序来隐藏底层系统的字节序。这是Java“一次编写——随处运行”理念的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:43:16.693

C++ 对其类型使用本机格式。Java 使用标准定义的格式，对应于 Sparc 上的原生格式，但不同于 PC 上的原生格式。

一般来说，对于非字符类型，没有理由假设字节的转储在两个不同的平台上是相同的，即使它们包含相同的值。（根据平台的不同，它们甚至可能没有相同的大小。我知道 C++ 中有 32、36、48 和 64 位的长整数；在 Java 中它们总是 64 位。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T15:44:03.737

首先，为什么顺序似乎是颠倒的：这是因为`putLong`class 的方法将字节以[大端顺序](http://en.wikipedia.org/wiki/Endianness)`ByteBuffer`放入数组中。如果您希望它以小端顺序排列，请在 ByteBuffer 上设置顺序：

```
final byte[] tagBytes = ByteBuffer.allocate(8).order(ByteOrder.LITTLE_ENDIAN)
        .putLong(Long.parseLong("01030920316")).array(); 
```

其次，为什么`-104`在 Java 中你`152`在 C 中出现：那是因为在 C 中你使用的是`unsigned char`，而在 Java 中类型`byte`是有符号的，而不是无符号的。字节的内容实际上是相同的，但它显示为`-104`当您将其解释为有符号整数时，以及`152`当您将其解释为无符号整数时。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T18:23:21.587

由于 Java 的整数表示不依赖于平台，因此在进行比较时，我会将其作为参考，因此我更愿意创建 C 代码，将 C 表示整数的平台依赖性考虑在内。

在此之后，我建议使用以下 C 代码来根据 OP 创建字节打印输出：

```
#define _BSD_SOURCE  

#include <stdio.h>
#include <stdlib.h>
#include <inttypes.h>

#if defined(__linux__)
#  include <endian.h>
#elif defined(__FreeBSD__) || defined(__NetBSD__)
#  include <sys/endian.h>
#elif defined(__OpenBSD__)
#  include <sys/types.h>
#  define be16toh(x) betoh16(x) /* -+ */
#  define be32toh(x) betoh32(x) /* -+--> not needed in this example */
#  define be64toh(x) betoh64(x) /* -+ */
#endif

int main()
{
  uint64_t uint64 = htobe64(atoll("01030920316")); /* convert to big endian/network byte order */

  for (int i = 0; i < sizeof(uint64); ++ i)
  {
    printf("%hhd, ", (signed char) (uint64 & 0xff));
    uint64 >>= 8;
  }

  printf("\n");

  return 0;
} 
```

# iphone - 加载 TableView 后，将 UITableView 中的单元格排序为部分

> ID：14142066
> 
> 赞同：0
> 
> 时间：2013-01-03T15:36:26.920
> 
> 标签：iphone, objective-c, ios

对，所以我的 UITableView 加载并按字母顺序放置所有单元格。然后从服务器下载信息并完成计算，一旦一切完成，就会重新加载 TableView。目前这是一个非常简单的过程，因为一旦从服务器下载了信息，单元格甚至不会移动，它们按字母顺序排列。除了填写了一半的信息并根据计算进行了微小的更改之外，什么都没有发生。我想知道是否有一种简单的方法可以根据下载完成后完成的计算将单元格分成几部分？我确实有一个创建 4 个数组的想法（永远只有 4 个部分），一旦 isLoading 设置为 no，将 TableView 的数据源更改为有部分，但是，这听起来有点...... 不确定。我知道这是一个理论问题，而不是编码问题，但是在我去弄乱我的代码之前，肯定是一种愚蠢低效的做事方式，是否有一种简单的方法可以将 UITableViewCells “分配”到部分?

我这样做的主要问题是，如果用户删除一个单元格，删除 Core Data 中的相应条目会有点棘手并且容易出错。这让我想到了另一个想法。如果我向我的核心数据实体添加一个额外的属性会怎样。该属性将被分配，然后在计算完成后保存。这样做的问题是没有现有的数据库可以工作。必须有一种巧妙的方法来实现这一点。

谢谢您的帮助。如果您需要我发布任何代码，请直接说出来，我会的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:59:24.170

You should be fine if you implement the data source methods related to sections.

For example:

*   numberOfSectionsInTableView
*   sectionIndexTitlesForTableView.

Any time the table data is reloaded (e.g., [self.tableView reloadData]), these methods will be called and the data will be placed into their sections.

Keep in mind that the cells are just the visual representation of your model, which in this case is your fetched data. The cells are not assigned to sections; they are simply created however you specify for your model (via the table view data source and delegate methods).

Regarding deletion of entries while using Core Data, I suggest taking a look at [NSFetchedResultsController](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html). The latter will monitor any changes to your table's data and message its delegate, your table view controller, when updates are made.

For example, a deletion would start with a call to the table view delegate like normal (i.e., via tableView:didEndEditingRowAtIndexPath). Within the latter, you would then delete the entry from core data (e.g., [self.myDatabase.managedObjectContext deleteObject:entity]). Assuming you initiated the NSFetchedResultsController w/ the same managed object context, the deletion would be automatically reflected back to your user.

If you're using a remote DB, however, you'll also have to perform a save (however you've implemented that) to ensure the DB is updated too.

Note also that if you use an NSFetchedResultsController, you don't need to implement the section data source methods since NSFetchedResultsController can handle that for you. Just define the key-path in your data model that will return the section name when initializing the NSFetchedResultsController.

# java - 从mysql中的相关表中选择值

> ID：14142069
> 
> 赞同：1
> 
> 时间：2013-01-03T15:36:38.663
> 
> 标签：java, mysql, sql, database

```
CREATE TABLE "Employer" (
        "employerID" INT PRIMARY KEY NOT NULL,
        "name" CHAR,
        "industry" CHAR,
        "contact1" CHAR,
        "contact2" CHAR,
        "email" CHAR,
        "website" CHAR,
        "facts" CHAR,
        "phone" VACHAR
        )

CREATE TABLE "Job" (
        "jobID" INT PRIMARY KEY NOT NULL,
        "employerID" INT,
        "title" CHAR,
        "description" CHAR,
        "type" CHAR,
        "salary" CHAR,
        "benefits" CHAR,
        "vacancies" INT,
        "closing" CHAR,
        "requirement" CHAR,
        "placement" BOOL,
        "applyTo" CHAR,
        "notes" CHAR,
        FOREIGN KEY (employerID) REFERENCES Employer(employerID)
        ) 
```

我正在寻找从数据库中获取值并将它们设置为文本，但是当涉及到键`JLabel`时我不确定 sql 语句。`foreign`SQL 语句应该是表中的`SELECT`所有值，`Job`除了`employerID`并使用外键`employerID`来获取`name`公司的值...可以告诉我正确的 sql 语句。我想显示如下示例的信息：

分析师 - 微软

JobID: 4545454 描述: Good job email: 123@hotmail.com 电话: 45545

但不确定如何显示 MICROSOFT

```
public void setText() {
    try {
    String sql = "SELECT a.*, b.name FROM Employer a INNER JOIN `Job` b ON a.employerID = b.employerID";
    pst = conn.prepareStatement(sql); 
    rs = pst.executeQuery();
    while (rs.next()) {

        System.out.println(rs.getString(1)); //how Do i Print the name value from Employer table?? 
        System.out.println(rs.getString(2));
        System.out.println(rs.getString(3));
        System.out.println(rs.getString(4));
        System.out.println(rs.getString(5));
        System.out.println(rs.getString(6)); 
    }

} 
```

如何打印`name`EMployer 表中的值以及 Job 表中的所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:39:26.690

一个简单的连接就可以完成这项工作。

```
SELECT  a.*, b.*       // -- SELECT the columns you want to display
                       // -- eg b.Title
FROM    Employer a
        INNER JOIN `Job` b
            ON a.EmployerID = b.EmployerID 
```

# typescript - TypeScript 和字段初始化器

> ID：14142071
> 
> 赞同：332
> 
> 时间：2013-01-03T15:36:45.400
> 
> 标签：typescript

如何以这种方式在 TS 中初始化一个新类（在 C# 中显示我想要的示例）：

```
// ... some code before
return new MyClass { Field1 = "ASD", Field2 = "QWE" };
// ...  some code after 
```

* * *

## 回答 #1

> 赞同：571
> 
> 时间：2016-06-07T14:38:35.030

**2016 年 7 月 12日更新：** [Typescript 2.1 引入了 Mapped Types](https://blogs.msdn.microsoft.com/typescript/2016/12/07/announcing-typescript-2-1/)并提供了`Partial<T>`，它允许您执行此操作....

```
class Person {
    public name: string = "default"
    public address: string = "default"
    public age: number = 0;

    public constructor(init?:Partial<Person>) {
        Object.assign(this, init);
    }
}

let persons = [
    new Person(),
    new Person({}),
    new Person({name:"John"}),
    new Person({address:"Earth"}),    
    new Person({age:20, address:"Earth", name:"John"}),
]; 
```

**原答案：**

我的方法是定义一个单独的`fields`变量，然后传递给构造函数。诀窍是将此初始化程序的所有类字段重新定义为可选。创建对象时（使用其默认值），您只需将初始化对象分配到`this`;

```
export class Person {
    public name: string = "default"
    public address: string = "default"
    public age: number = 0;

    public constructor(
        fields?: {
            name?: string,
            address?: string,
            age?: number
        }) {
        if (fields) Object.assign(this, fields);
    }
} 
```

或手动进行（更安全一点）：

```
if (fields) {
    this.name = fields.name || this.name;       
    this.address = fields.address || this.address;        
    this.age = fields.age || this.age;        
} 
```

用法：

```
let persons = [
    new Person(),
    new Person({name:"Joe"}),
    new Person({
        name:"Joe",
        address:"planet Earth"
    }),
    new Person({
        age:5,               
        address:"planet Earth",
        name:"Joe"
    }),
    new Person(new Person({name:"Joe"})) //shallow clone
]; 
```

和控制台输出：

```
Person { name: 'default', address: 'default', age: 0 }
Person { name: 'Joe', address: 'default', age: 0 }
Person { name: 'Joe', address: 'planet Earth', age: 0 }
Person { name: 'Joe', address: 'planet Earth', age: 5 }
Person { name: 'Joe', address: 'default', age: 0 } 
```

这为您提供了基本的安全和属性初始化，但它都是可选的并且可能是无序的。如果你不传递一个字段，你会得到类的默认值。

您也可以将它与所需的构造函数参数混合使用——坚持`fields`到底。

我认为与您将要获得的 C# 风格差不多（[实际的 field-init 语法被拒绝](https://github.com/Microsoft/TypeScript/issues/3895)）。我更喜欢适当的字段初始化程序，但看起来它不会发生。

为了比较，如果您使用强制转换方法，您的初始化程序对象必须具有您要强制转换的类型的所有字段，并且不要获得由类本身创建的任何类特定函数（或派生）。

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2013-01-03T15:44:29.953

## 更新

自从写下这个答案以来，已经出现了更好的方法。请参阅下面有更多投票和更好答案的其他答案。我无法删除此答案，因为它被标记为已接受。

* * *

## 旧答案

TypeScript codeplex 上有一个问题描述了这一点：[Support for object initializers](http://typescript.codeplex.com/workitem/334)。

如前所述，您已经可以通过在 TypeScript 中使用接口而不是类来做到这一点：

```
interface Name {
    givenName: string;
    surname: string;
}
class Person {
    name: Name;
    age: number;
}

var bob: Person = {
    name: {
        givenName: "Bob",
        surname: "Smith",
    },
    age: 35,
}; 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2017-10-21T03:38:24.850

下面是一个解决方案，它结合了更短的应用程序`Object.assign`来更紧密地模拟原始`C#`模式。

但首先，让我们回顾一下目前提供的技术，其中包括：

1.  复制接受对象并将其应用于的构造函数`Object.assign`
2.  `Partial<T>`复制构造函数中的一个巧妙技巧
3.  对 POJO 使用“强制转换”
4.  用杠杆`Object.create`代替`Object.assign`

当然，每个人都有自己的优点/缺点。修改目标类以创建复制构造函数可能并不总是一种选择。并且“强制转换”会丢失与目标类型相关的任何功能。 `Object.create`似乎不太吸引人，因为它需要一个相当冗长的属性描述符映射。

# 最短的通用答案

因此，这是另一种更简单的方法，它维护类型定义和相关的函数原型，并且更接近地模拟预期的`C#`模式：

```
const john = Object.assign( new Person(), {
    name: "John",
    age: 29,
    address: "Earth"
}); 
```

而已。该`C#`模式的唯一添加是`Object.assign`2 个括号和一个逗号。查看下面的工作示例以确认它维护类型的函数原型。不需要构造函数，也不需要聪明的技巧。

# 工作示例

此示例显示如何使用字段初始值设定项的近似值来初始化对象`C#`：

```
class Person {
    name: string = '';
    address: string = '';
    age: number = 0;

    aboutMe() {
        return `Hi, I'm ${this.name}, aged ${this.age} and from ${this.address}`;
    }
}

// typescript field initializer (maintains "type" definition)
const john = Object.assign( new Person(), {
    name: "John",
    age: 29,
    address: "Earth"
});

// initialized object maintains aboutMe() function prototype
console.log( john.aboutMe() );
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2015-11-17T08:17:48.433

您可以影响在您的类类型中强制转换的匿名对象。 **奖励**：在视觉工作室中，您可以通过这种方式受益于智能感知 :)

```
var anInstance: AClass = <AClass> {
    Property1: "Value",
    Property2: "Value",
    PropertyBoolean: true,
    PropertyNumber: 1
}; 
```

编辑：

**警告**如果类有方法，你的类的实例不会得到它们。如果 AClass 有构造函数，则不会执行。如果你使用 instanceof AClass，你会得到 false。

**总之，您应该使用 interface 而不是 class**。最常见的用途是声明为普通旧对象的域模型。实际上，对于域模型，您应该更好地使用接口而不是类。接口在编译时用于类型检查，与类不同，接口在编译期间被完全删除。

```
interface IModel {
   Property1: string;
   Property2: string;
   PropertyBoolean: boolean;
   PropertyNumber: number;
}

var anObject: IModel = {
     Property1: "Value",
     Property2: "Value",
     PropertyBoolean: true,
     PropertyNumber: 1
 }; 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2017-03-06T05:59:00.800

我建议一种不需要 Typescript 2.1 的方法：

```
class Person {
    public name: string;
    public address?: string;
    public age: number;

    public constructor(init:Person) {
        Object.assign(this, init);
    }

    public someFunc() {
        // todo
    }
}

let person = new Person(<Person>{ age:20, name:"John" });
person.someFunc(); 
```

关键点：

*   Typescript 2.1 不需要，`Partial<T>`不需要
*   **它支持函数**（与不支持函数的简单类型断言相比）

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2015-08-11T20:52:09.023

在某些情况下，使用**[`Object.create`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create)**. 如果您需要向后兼容性或想要滚动您自己的初始化函数，Mozilla 参考包含一个 polyfill。

应用于您的示例：

```
Object.create(Person.prototype, {
    'Field1': { value: 'ASD' },
    'Field2': { value: 'QWE' }
}); 
```

### 有用的场景

*   单元测试
*   内联声明

就我而言，我发现这在单元测试中很有用，原因有两个：

1.  在测试期望时，我经常想创建一个苗条的对象作为期望
2.  单元测试框架（如 Jasmine）可能会比较对象原型（`__proto__`）并导致测试失败。例如：

```
var actual = new MyClass();
actual.field1 = "ASD";
expect({ field1: "ASD" }).toEqual(actual); // fails 
```

单元测试失败的输出不会产生关于什么不匹配的线索。

3.  在单元测试中，我可以选择我支持的浏览器

最后，[http](http://typescript.codeplex.com/workitem/334) ://typescript.codeplex.com/workitem/334 提出的解决方案不支持内联 json 样式的声明。例如，以下内容无法编译：

```
var o = { 
  m: MyClass: { Field1:"ASD" }
}; 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2019-10-26T16:14:36.043

您可以拥有一个带有可选字段（标有？）的类和一个接收同一类实例的构造函数。

```
class Person {
    name: string;     // required
    address?: string; // optional
    age?: number;     // optional

    constructor(person: Person) {
        Object.assign(this, person);
    }
}

let persons = [
    new Person({ name: "John" }),
    new Person({ address: "Earth" }),    
    new Person({ age: 20, address: "Earth", name: "John" }),
]; 
```

在这种情况下，您将无法省略必填字段。这使您可以对对象构造进行细粒度控制。

您可以使用具有 Partial 类型的构造函数，如其他答案中所述：

```
public constructor(init?:Partial<Person>) {
    Object.assign(this, init);
} 
```

问题是所有字段都成为可选的，并且在大多数情况下是不可取的。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2013-01-09T01:15:15.453

我更倾向于这样做，使用（可选）自动属性和默认值。您没有建议这两个字段是数据结构的一部分，所以这就是我选择这种方式的原因。

您可以拥有类的属性，然后以通常的方式分配它们。显然它们可能需要也可能不需要，所以这也是另外一回事。只是这是非常好的语法糖。

```
class MyClass{
    constructor(public Field1:string = "", public Field2:string = "")
    {
        // other constructor stuff
    }
}

var myClass = new MyClass("ASD", "QWE");
alert(myClass.Field1); // voila! statement completion on these properties 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2019-04-23T18:51:01.097

我想要一个具有以下内容的解决方案：

*   所有数据对象都是必需的，并且必须由构造函数填充。
*   无需提供默认值。
*   可以使用类内的函数。

这是我的做法：

```
export class Person {
  id!: number;
  firstName!: string;
  lastName!: string;

  getFullName() {
    return `${this.firstName} ${this.lastName}`;
  }

  constructor(data: OnlyData<Person>) {
    Object.assign(this, data);
  }
}

const person = new Person({ id: 5, firstName: "John", lastName: "Doe" });
person.getFullName(); 
```

构造函数中的所有属性都是必需的，如果没有编译器错误，则不能省略。

它取决于`OnlyData`过滤掉`getFullName()`所需属性的 ，它的定义如下：

```
// based on : https://medium.com/dailyjs/typescript-create-a-condition-based-subset-types-9d902cea5b8c
type FilterFlags<Base, Condition> = { [Key in keyof Base]: Base[Key] extends Condition ? never : Key };
type AllowedNames<Base, Condition> = FilterFlags<Base, Condition>[keyof Base];
type SubType<Base, Condition> = Pick<Base, AllowedNames<Base, Condition>>;
type OnlyData<T> = SubType<T, (_: any) => any>; 
```

这种方式的当前限制：

*   需要 TypeScript 2.8
*   带有 getter/setter 的类

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-07-12T06:05:34.990

要初始化一个类而不重新声明默认值的所有属性：

```
class MyClass{ 
  prop1!: string  //required to be passed in
  prop2!: string  //required to be passed in
  prop3 = 'some default'
  prop4 = 123

  constructor(opts:{prop1:string, prop2:string} & Partial<MyClass>){
    Object.assign(this,opts)
  }
} 
```

这结合了一些已经很好的答案

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2019-12-04T13:09:37.570

这是另一种解决方案：

```
return {
  Field1 : "ASD",
  Field2 : "QWE" 
} as myClass; 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-05-18T21:01:18.870

这是我为此找到的最佳解决方案。

声明一个可以用作装饰器的函数。我称之为**自动反射**

```
export function AutoReflect<T extends { new(...args: any[]): {} }>(
  constructor: T
) {
  return class extends constructor {
    constructor(...args: any[]) {
      super(args)
      if (typeof args[0] === 'object') {
        Object.assign(this, args[0]);
      }
    }
  };
} 
```

这样做是期望构造函数中的一个对象并将成员分配给类实例。在类声明中使用它

```
interface IPerson {
  name: string;
  age: number;
}

@AutoReflect
class Person implements IPerson {
  name: string;
  number: number;
  constructor(model?: Partial<IPerson>){}
} 
```

在模型的构造函数中，您可以使模型成为可选的，并且在使用 Partial 时，您可以在不设置所有属性值的情况下新建一个实例

```
new Person({
   name: 'Santa'
}); 
```

这个方法创建了一个你想要的类的新实例，并且对它也有一种 C# 对象初始化的感觉。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-08-07T04:05:45.000

最简单的方法是使用类型转换。

```
return <MyClass>{ Field1: "ASD", Field2: "QWE" }; 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-06-01T10:34:58.283

如果您使用的是旧版本的 typescript < 2.1，那么您可以使用类似于以下内容的内容，这基本上是将任何类型的对象强制转换为：

```
const typedProduct = <Product>{
                    code: <string>product.sku
                }; 
```

> 注意：使用此方法仅适用于数据模型，因为它将删除对象中的所有方法。它基本上是将任何对象转换为类型化对象

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-01-24T19:46:36.220

这是一个解决方案：

*   不会强迫您将所有字段设为可选（与 不同`Partial<...>`）
*   区分类方法和函数类型的字段（与`OnlyData<...>`解决方案不同）
*   通过定义 Params 接口提供了一个很好的结构
*   不需要多次重复变量名称和类型

唯一的缺点是一开始*看起来*更复杂。

```
 // Define all fields here
interface PersonParams {
  id: string
  name?: string
  coolCallback: () => string
}

// extend the params interface with an interface that has
// the same class name as the target class
// (if you omit the Params interface, you will have to redeclare
// all variables in the Person class)
interface Person extends PersonParams { }

// merge the Person interface with Person class (no need to repeat params)
// person will have all fields of PersonParams
// (yes, this is valid TS)
class Person {
  constructor(params: PersonParams) {
    // could also do Object.assign(this, params);

    this.id = params.id;
    this.name = params.name;

    // intellisence will expect params
    // to have `coolCallback` but not `sayHello`
    this.coolCallback = params.coolCallback;
  }

  // compatible with functions
  sayHello() {
    console.log(`Hi ${this.name}!`);
  }
}

// you can only export on another line (not `export default class...`)
export default Person; 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-04-22T20:37:37.230

对于更现代的 TypeScript 版本

类定义

```
 export class PaymentRequestDto {
      public PaymentSource: number;
      public PaymentCenterUid: string;
      public ConnectedUserUid: string;
    } 
```

你有一些来自某个地方的价值观：

```
 const PaymentCenter= 'EA0AC01E-D34E-493B-92FF-EB2D66512345';
    const PaymentSource= 4;
    const ConnectedUser= '2AB0D13C-2BBE-46F5-990D-533067BE2EB3'; 
```

然后你可以在强类型化的同时初始化你的对象。

```
 const parameters: PaymentRequestDto = {
        PaymentSource,
        PaymentCenterUid: PaymentCenter,
        ConnectedUserUid: ConnectedUser,
    }; 
```

PaymentSource 不需要名称字段说明符，因为使用的变量与该字段具有相同的名称。

这也适用于数组。

```
 const parameters: PaymentRequestDto [] = [
      {
        PaymentSource,
        PaymentCenterUid: PaymentCenter,
        ConnectedUserUid: ConnectedUser,
      },
      {
      . . . .
      }
    ]; 
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2019-12-03T12:33:27.357

如果您想创建新实例而不在实例时设置初始值

1-你必须使用类而不是接口

2-创建类时必须设置初始值

```
export class IStudentDTO {
 Id:        number = 0;
 Name:      string = '';

student: IStudentDTO = new IStudentDTO(); 
```

# firefox - 仅在 Firefox 中应用框阴影时图像像素化

> ID：14142075
> 
> 赞同：2
> 
> 时间：2013-01-03T15:36:54.717
> 
> 标签：firefox, image, css

所以我发现了这个非常奇怪的问题。当我在 Firefox 中对图像应用框阴影时，它会变成像素化。但是，在 Chrome 中查看时，该问题不存在。这是一个已知的问题？我的谷歌结果没有产生任何结果。

![在此处输入图像描述](../Images/0b980d70e35509263c562fe7a9e47dbe.png) [http://i.stack.imgur.com/x0rku.jpg](https://i.stack.imgur.com/x0rku.jpg)

![在此处输入图像描述](../Images/257c7094f92a1068eecda826904ed9ff.png) [http://i.stack.imgur.com/Atfu9.jpg](https://i.stack.imgur.com/Atfu9.jpg)

**CSS：**

```
-webkit-box-shadow: 0px 0px 100px rgba(0,0,0,0.75);
-moz-box-shadow: 0px 0px 100px rgba(0,0,0,0.75);
box-shadow: 0px 0px 100px rgba(0,0,0,0.75); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:12:53.960

弄清楚了。这是`-moz-perspective: 600px;`我设置的。它导致了 Firefox 中的像素化，所以我用它替换它`-moz-transform: scale(2);`并解决了这个问题。只是一个小的解决方法，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:39:23.793

尝试申请

`-moz-box-shadow`除了常规`box-shadow`

```
div.original.selected img{
    -moz-box-shadow: 0px 0px 100px rgba(0,0,0,0.75);
    box-shadow: 0px 0px 100px rgba(0,0,0,0.75);
} 
```

# c# - EF5 枚举和查找表

> ID：14142076
> 
> 赞同：1
> 
> 时间：2013-01-03T15:36:59.417
> 
> 标签：c#, entity-framework, enums, entity-framework-5

我正在尝试使用我在 EF5 中的查找表来实现枚举。我首先使用模型。我有一个名为“Appraisal”的主要实体，其中有一列“Appraisal_Type_ID”。这是数据库中的一个 INT。我还有一个名为“Appraisal_Type”的实体，它还包含“Appraisal_Type_ID”以及描述。这两个实体之间存在关联，我将 Int 切换为主 Appraisal 表和查找表上的枚举。这是生成的代码中两个实体的样子：

```
public partial class Appraisal
{
    public Appraisal()
    {
        this.Goals = new HashSet<Goal>();
        this.NewGoals = new HashSet<NewGoal>();
        this.CompetencyResults = new HashSet<CompetencyResult>();
        this.Attachments = new HashSet<Attachment>();
        this.Notes = new HashSet<Note>();
        this.NewCompetency_Results = new HashSet<NewCompetency_Results>();
        this.AppraisalActivityLogEntries = new HashSet<AppraisalActivityLogEntry>();
    }

    public int Appraisal_ID { get; set; }
    public string Penn_ID { get; set; }
    public string Review_Year { get; set; }
    public string Supervisor_Penn_ID { get; set; }
    public AppraisalType Appraisal_Type_ID { get; set; }
    public int Appraisal_Status_ID { get; set; }
    public Nullable<System.DateTime> Last_Update_Date { get; set; }
    public string Last_Update_User { get; set; }
    public string Future_Development { get; set; }
    public string Rating_Comments { get; set; }
    public Nullable<System.DateTime> Supervisor_Sign_Date { get; set; }
    public Nullable<System.DateTime> Employee_Sign_Date { get; set; }
    public string Employee_Comments { get; set; }
    public Nullable<System.DateTime> Next_ReviewDate { get; set; }
    public string Home_Dept_Org { get; set; }
    public string Home_School_Ctr { get; set; }
    public Nullable<int> ContentType_ID { get; set; }
    public string Name { get; set; }
    public string Rating_Code { get; set; }
    public Nullable<bool> Final_Step_Reached { get; set; }
    public string Supervisor_Name { get; set; }
    public string Supervisor_Job_Class { get; set; }
    public string Supervisor_Job_Title { get; set; }
    public string Current_Editor { get; set; }
    public string Current_Editor_Name { get; set; }

    public virtual ICollection<Goal> Goals { get; set; }
    public virtual ICollection<NewGoal> NewGoals { get; set; }
    public virtual ICollection<CompetencyResult> CompetencyResults { get; set; }
    public virtual ICollection<Attachment> Attachments { get; set; }
    public virtual ICollection<Note> Notes { get; set; }
    public virtual AppraisalUser AppraisalUser { get; set; }
    public virtual ICollection<NewCompetency_Results> NewCompetency_Results { get; set; }
    public virtual ContentType ContentType { get; set; }
    public virtual ICollection<AppraisalActivityLogEntry> AppraisalActivityLogEntries { get; set; }
    public virtual Appraisal_Status Status { get; set; }
    public virtual Rating Rating { get; set; }
    public virtual Appraisal_Type AppraisalType { get; set; }
}

public partial class Appraisal_Type
{
    public AppraisalType Appraisal_Type_ID { get; set; }
    public string Appraisal_Type_Desc { get; set; }
}

public enum AppraisalType : int
{
    Appraisal = 2,
    SelfAppraisal = 1
} 
```

我可以轻松地从数据库中获取 Appraisal 并且它可以与枚举一起正常工作，并且我可以轻松地从数据库中获取 Appraisal_Type 数据并且它可以与枚举一起正常工作。

但是，目标是使用 .Include 来获取 Appraisal_Type 和 Appraisal。这会引发错误。

```
public Appraisal GetAppraisal(int appraisalID)
    {
        using (AppraisalEntities context = new AppraisalEntities(AppraisalEntitiesConnectionString))
        {
            context.Configuration.LazyLoadingEnabled = false;
            context.Configuration.ProxyCreationEnabled = true;

            Appraisal data = context.Appraisals
            .Include("Goals")
            .Include("NewGoals")
            .Include("CompetencyResults")
            .Include("CompetencyResults.Competency")
            .Include("NewCompetency_Results")
            .Include("NewCompetency_Results.NewCompetency")
            .Include("Attachments")
            .Include("Rating")
            .Include("Notes")
            .Include("AppraisalUser")
            .Include("Status")
            .Include("AppraisalType")
            .Include("ContentType")
            .First(c => c.Appraisal_ID == appraisalID);

            return data;
        }
    } 
```

当我运行此代码时，我收到以下错误：

***关键字段“Appraisal_Type_ID”的类型应为“PennHR.HRManager.BusinessServices.Appraisals.AppraisalType”，但提供的值实际上是“System.Int32”类型。***

看起来 EF 正在尝试验证密钥，因为我在调用堆栈中看到了这一点：

```
 System.Data.EntityKey.ValidateTypeOfKeyValue(MetadataWorkspace workspace, EdmMember keyMember, Object keyValue, Boolean isArgumentException, String argumentName) +11452250
System.Data.EntityKey.ValidateEntityKey(MetadataWorkspace workspace, EntitySet entitySet, Boolean isArgumentException, String argumentName) +158
System.Data.Objects.ObjectStateManager.CheckKeyMatchesEntity(IEntityWrapper wrappedEntity, EntityKey entityKey, EntitySet entitySetForType, Boolean forAttach) +84
System.Data.Objects.ObjectStateManager.AddEntry(IEntityWrapper wrappedObject, EntityKey passedKey, EntitySet entitySet, String argumentName, Boolean isAdded) +269
System.Data.Common.Internal.Materialization.Shaper.HandleEntityAppendOnly(Func`2 constructEntityDelegate, EntityKey entityKey, EntitySet entitySet) +262
lambda_method(Closure , Shaper ) +2651
System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper) +10995785
System.Data.Common.Internal.Materialization.RowNestedResultEnumerator.MoveNext() +277
System.Data.Common.Internal.Materialization.ObjectQueryNestedEnumerator.TryReadToNextElement() +31
System.Data.Common.Internal.Materialization.ObjectQueryNestedEnumerator.MoveNext() +78
System.Linq.Enumerable.FirstOrDefault(IEnumerable`1 source) +247
System.Linq.Queryable.FirstOrDefault(IQueryable`1 source, Expression`1 predicate) +490
PennHR.HRManager.BusinessServices.Appraisals.AppraisalManager.GetAppraisal(String pennID, String reviewYear, AppraisalType type) in d:\Users\Blickley\Documents\Visual Studio 2012\Projects\HRManager\Trunk\HRManagerSolution\HRManager.BusinessServices\Appraisals\AppraisalManager.cs:359
PennHR.HRManager.Portal.Appraisals.AppraisalsDefault.btnViewSelfAppraisal_Click(Object sender, EventArgs e) in d:\Users\Blickley\Documents\Visual Studio 2012\Projects\HRManager\Trunk\HRManagerSolution\HRManager.Portal\Appraisals\AppraisalsDefault.aspx.cs:228
System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +155
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3804 
```

如果我删除 AppraisalType 上的 .Include，一切都很好。此代码也可以正常工作，因此似乎是导致问题的包含：

```
 public Appraisal_Type GetAppraisalTypes()
    {
        AppraisalEntities context = new AppraisalEntities(AppraisalEntitiesConnectionString);
        Appraisal_Type data = context.Appraisal_Types
            .FirstOrDefault(c => c.Appraisal_Type_ID == AppraisalType.Appraisal);
        return data;
    } 
```

我似乎找不到太多关于错误的信息，有人能想出解决这个问题的方法吗？我希望能够将枚举与我的查找表一起使用。如果我删除枚举并将其切换回 Int，一切都会再次正常工作。

# c# - 正则表达式：匹配条件

> ID：14142077
> 
> 赞同：-1
> 
> 时间：2013-01-03T15:37:07.333
> 
> 标签：c#, regex, c#-4.0

我想匹配where`foo`是动态的并且可以有任何格式，所以我需要匹配or之后的所有内容。`IF foo``foo``if``IF`

我尝试了以下正则表达式：

```
((?!IF\s)|(?!if\s)).* 
```

哪个匹配`F foo`，因此不是我真正想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:46:37.547

您想要积极的前瞻，匹配后面的所有内容`IF`, `If`, `IF`，`iF`但不包括：

```
$ grep -Po "(?<=[Ii][Ff] ).*" <<< 'if match everything after'
match everything after

$ grep -Po "(?<=[Ii][Ff] ).*" <<< 'If match everything after'
match everything after

$ grep -Po "(?<=[Ii][Ff] ).*" <<< 'IF match everything after'
match everything after 
```

# jsp - 如何使用 Maven War Plugin 在 Wars 之间重用 War 资源

> ID：14142081
> 
> 赞同：2
> 
> 时间：2013-01-03T15:37:24.700
> 
> 标签：jsp, maven, reusability, jspinclude

在 Java EE 环境下，我构建了一个包含多个 JSP 文件的网页。假设包含的 JSP 之一是*header.jsp*。可能与 Stackoverflow 使用的非常相似，显示有关用户、链接等的信息。此 JSP 链接到 java 控制器以获取用户信息，并且是我的 WAR 文件的一部分，包括所有 Web 应用程序。

为了开发它，我使用了 Eclipse，并使用 Maven 构建和打包它。

现在我需要构建一个新的 webApplication（所以是一场新的战争），我想重用标头。

我假装的是：

*   不要重复代码
*   两场战争都使用一个版本的标头代码

所以问题是：

有办法避免将旧项目中的两个文件（header.jsp 和 controller.java）复制并粘贴到新项目中吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T17:24:34.360

[Maven WAR 插件](http://maven.apache.org/plugins/maven-war-plugin/)是为您处理 WAR 文件打包的插件，它提供了[“覆盖”机制](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)来解决这个问题。只需将项目设为“WAR”类型，您就已经在使用 WAR 插件；maven 使用它作为如何构建项目的线索，包括使用 WAR 插件进行包阶段绑定。

Overlay 的工作方式是您的 WAR 文件将另一个 WAR 项目声明为依赖项，就像您将删除对所需 jar 文件的依赖项一样。当 WAR 插件的包 mojo 触发时，它将看到对另一个 WAR 的这种依赖关系，并将您的新战争构建为两者的组合。注意，如果两个 WARS 中都存在文件，则不会合并文件；一个简单地覆盖另一个。您可以配置插件以选择使用哪一个；默认情况下，获胜的是当前项目的文件。另请注意，如果您愿意，您可以依赖不止一场战争。

# ios - 检测应用程序的第一次运行

> ID：14142085
> 
> 赞同：0
> 
> 时间：2013-01-03T15:37:33.783
> 
> 标签：ios, nsuserdefaults

我想在用户第一次运行我的应用程序时显示帮助覆盖。

为此，我在中使用以下代码`didFinishLaunching`：

```
if(![[[[NSUserDefaults standardUserDefaults] dictionaryRepresentation] allKeys] containsObject:@"IPHONEFIRSTRUN"])
    [[NSUserDefaults standardUserDefaults]setBool:TRUE forKey:@"IPHONEFIRSTRUN"]; 
```

在视图控制器中，我有：

```
if ([[NSUserDefaults standardUserDefaults]boolForKey:@"IPHONEFIRSTRUN"]==TRUE) {
    [self HelpOverlayIphone];
    [[NSUserDefaults standardUserDefaults]setBool:FALSE forKey:@"IPHONEFIRSTRUN"];
} 
```

但是，它也显示了第二次使用的覆盖。我怎样才能解决这个问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:42:33.833

你的逻辑太复杂了。您正在永久设置用户默认值，以指示某事发生一次。相反，在视图控制器中查看该值是否未设置，如果是，请执行您的操作并设置变量，以便代码不再运行：

```
if ( ! [[NSUserDefaults standardUserDefaults]boolForKey:@"IPHONEFIRSTRUNCOMPLETE"] ) {
        [self HelpOverlayIphone];
        [[NSUserDefaults standardUserDefaults]setBool:YES forKey:@"IPHONEFIRSTRUNCOMPLETE"];
        [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

取出应用委托中的所有代码。

此外，您的原始代码很可能无法正常工作，因为您正在从 XCode 停止应用程序。如果您不使用`synchronize`用户默认更改，则在这种情况下将不会保存（正常退出应用程序最终会永久保存更改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:56:51.663

您是否在程序开始时注册了您正在使用的默认值？我建议在[这里重新阅读 NSUserDefaults 的苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

您需要先拨打电话

```
- (void)registerDefaults:(NSDictionary *)dictionary 
```

如果它不存在，它只会设置密钥。然后在第一次运行时检查密钥是否为假，并在此时设置它。

我的猜测是您的代码不起作用的原因是因为字典实际上从未以任何持久的方式保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:00:40.670

我有这个功能，它会在应用程序启动时启动——它一直很可靠。我有一个 uniqueNameOfApp ，它只是一些随机散列，因此它不会与其他应用程序冲突。

```
-(void)loadSettings {
NSMutableDictionary *sttngs = [[NSUserDefaults standardUserDefaults] 
objectForKey:uniqueNameOfApp];

    if(sttngs != nil) {
    [userSettings addEntriesFromDictionary:sttngs];
    } else {
    _appFiredForFirstTime = YES;
    }
} 
```

# android - 如何在 Android API 17 中的 android 中显示选项菜单？

> ID：14142086
> 
> 赞同：1
> 
> 时间：2013-01-03T15:37:37.187
> 
> 标签：android

我正在尝试显示选项菜单。我在运行时使用 menu.add() 方法创建菜单。我正在使用 android API 17。我们必须单击任何菜单按钮吗？我将“menuItemsMap”作为 Map<> 实例变量，并将菜单添加到该地图中，以便我可以重用这些菜单。提前致谢。

```
public boolean onCreateOptionsMenu(Menu menu) {
        menuItemsMap = new HashMap<Integer, MenuItem>();
        menuItemsMap.put(
                R.string.pizzasCart_pizzasList,
                menu.add(R.string.pizzasCart_pizzasList).setIcon(
                        R.drawable.script_edit));
        menuItemsMap.put(
                R.string.pizzasList_viewShoppingCart,
                menu.add(R.string.pizzasList_viewShoppingCart).setIcon(
                        R.drawable.cart));
        menuItemsMap.put(
                R.string.pizzasCart_checkout,
                menu.add(R.string.pizzasCart_checkout).setIcon(
                        R.drawable.cart_go));
        menuItemsMap.put(
                R.string.pizzasList_viewUserData,
                menu.add(R.string.pizzasList_viewUserData).setIcon(
                        R.drawable.user_green));
        /*menu.add(1,1,0,R.string.pizzasCart_pizzasList).setIcon(R.drawable.script_edit);
        menu.add(1,2,1,R.string.pizzasList_viewShoppingCart).setIcon(R.drawable.cart);
        menu.add(1,3,2,R.string.pizzasList_viewUserData).setIcon(R.drawable.user_green);*/      
        return true;
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        setMenuItemState(R.string.pizzasCart_pizzasList, false, false);
        setMenuItemState(R.string.pizzasList_viewShoppingCart, true,
                !isShoppingCartEmpty());
        setMenuItemState(R.string.pizzasCart_checkout, true,
                isShoppingCartCheckoutAllowed());
        setMenuItemState(R.string.pizzasList_viewUserData, true, true);

        return true;
    }

    protected void setMenuItemState(int itemTitleResID, boolean visible, boolean enabled) {
        MenuItem item = menuItemsMap.get(itemTitleResID);
        item.setEnabled(enabled);
        item.setVisible(visible);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getTitle().equals(getString(R.string.pizzasList_viewUserData))) {
            showUserDataActivity();

        } else if (item.getTitle().equals(
                getString(R.string.pizzasCart_pizzasList))) {
            showPizzasListActivity();

        } else if (item.getTitle().equals(
                getString(R.string.pizzasList_viewShoppingCart))) {
            showPizzasCartListActivity();

        } else if (item.getTitle().equals(
                getString(R.string.pizzasCart_checkout))) {
            checkoutShoppingCartPromptUser();
        }

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:39:10.183

菜单按钮是操作栏 #4 右上角的三个点![在此处输入图像描述](../Images/6c5ff2824e77a38cd1eb5f027b6cf1d9.png)

阅读菜单[http://developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)

# android - 如果在应用安装后选择了 OPEN 或 DONE，android 的调用有何不同？

> ID：14142087
> 
> 赞同：2
> 
> 时间：2013-01-03T15:37:44.753
> 
> 标签：android, installation, resume

我真的很想了解这一点，希望我能解决这个我花了无数个小时解决的问题......

我了解围绕问题行为的情况，但不知道在哪里解决它，尽管我猜它会在某些地方表现出来......

如果我安装我的 APK，然后在安装完成后选择“完成”，我的应用恢复功能可以正常工作！但是，如果我选择“打开”，那么应用程序恢复功能将永远不会恢复到上次使用的屏幕，它只会继续返回到启动器屏幕的任何内容。

还有更多..

当我选择打开，然后访问任务管理器并结束应用程序进程，然后从主屏幕中的图标启动它......简历再次完美运行......

这让我发疯了..我看到一些人对这个确切的问题发表评论，但从未看到过答案！我希望如果我能理解 OPEN 与 DONE 的不同之处，然后选择主屏幕上的图标来打开应用程序，那么我/我们也许能够最终弄清楚！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T17:04:48.387

找到了答案..或者它有什么。

似乎我是许多其他人中的一员，当它被报告为一个极难修复的 android OS 错误时，他们失去了无数、无数小时试图修复这个错误。以下是关于这个特定错误的 androids 官方错误问题的两个链接。

您可以浏览回复并测试各种修复，但不幸的是，该错误仍未从 android 端修复（显然）。

只是希望这有助于节省一些人很多时间，如果他们能早点读到这篇文章！

（基本上，在安装应用程序时，android 操作系统在某些情况下会感到困惑并导致这种行为）。

[http://code.google.com/p/android/issues/detail?id=2373](http://code.google.com/p/android/issues/detail?id=2373) （原始问题）

[http://code.google.com/p/android/issues/detail?id=26658](http://code.google.com/p/android/issues/detail?id=26658) （跟进与自 2373 年以来仍未修复的完全相同的问题......）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-07T06:39:50.190

请将代码添加到 onCreate

```
if (isTaskRoot()) {
            final Intent intent = getIntent();
            final String intentAction = intent.getAction();
            if (!intent.hasCategory(Intent.CATEGORY_LAUNCHER) &&
                    intentAction != null && intentAction.equals(Intent.ACTION_MAIN)) {
                finish();
                System.exit(0);
            }
        } 
```

# ruby - 在 RoR 中重用项目的最佳方式是什么？

> ID：14142091
> 
> 赞同：3
> 
> 时间：2013-01-03T15:37:58.847
> 
> 标签：ruby, ruby-on-rails-3, rubygems

我有一个在 RoR 中开发的“核心”项目。问题是有几个独立的项目有这个“核心”作为它们的基础代码，然后它们可能有新的功能或视图、助手、控制器等的变化。我希望“核心”的任何变化都可以是由这些其他项目跟踪。因此，“核心”中的任何更改都将在其他项目上复制或不复制。我在考虑 gemify 的“核心”项目，但由于其他项目的不断变化，这不是最好的解决方案（也是一个漫长的过程）。那就是我所想的。其他解决方案是将一些重要的代码分成模块。然后我可以在想要使用它们的项目中导入这些新功能。

“核心”项目是一个纯 MVC ruby​​ on rails 项目。

你对这个问题有什么建议？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:45:59.833

我们有大约 100 个 Rails 站点，每个站点都使用包含在所有站点中的核心引擎 gem 进行定制。相关站点组也使用辅助引擎 gem。请参阅[Rails 引擎](http://edgeguides.rubyonrails.org/engines.html)。

# r - 比较 R 中的两个数据框项

> ID：14142092
> 
> 赞同：0
> 
> 时间：2013-01-03T15:38:01.193
> 
> 标签：r

我有两个数据框，它们都有一列：

df1

```
Server
A
B
c
d 
```

df2

```
Server
a
f
z
x 
```

我需要检查 df2$Server 中是否存在 df1$Server。如果是，我需要在 df1 中添加一列并放入 1 否则放入 0。

我有这段代码，我认为算法是正确的，但它似乎不起作用。任何输入表示赞赏。

```
for (i in 1:nrow(df1)) {
    if (df1[i,1] %in% row.names(df2)) {
        df1[i,2]<-c(1)
    } else{
        df1[i,2]<-(0)
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:46:59.057

它比你做的简单：

```
df1$LogicalColumn <- as.numeric(df1$Server==df2$Server) 
```

这将沿每一列排序并检查成对相等。

```
df1$LogicalColumn <- as.numeric(df1$Server %in% df2$Server) 
```

这将检查`df2`' 列的每个值的所有值`df1$Server`。如果确实是您关心的行名（为什么？），请在任一上下文中`df2$Server`替换为。`rownames(df2)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:58:33.433

The default row names will be numbers, unless you have assigned them:

```
 Server
1      a
2      b
3      c
4      d
5      e

> row.names(df3)
[1] "1" "2" "3" "4" "5" 
```

What you want is to compare against the values, not the names of the rows:

```
for (i in 1:nrow(df1)) {
  if (df1[i,1] %in% df2$Server) {
    df1[i,2]<-c(1)
  } else{  
    df1[i,2]<-(0)
  }            
} 
```

# c# - 从组合框 C# 中获取选定的值

> ID：14142093
> 
> 赞同：0
> 
> 时间：2013-01-03T15:38:01.763
> 
> 标签：c#

我已经阅读了很多关于这个主题的主题。我尝试了很多变化，但由于某种原因，我无法让它工作。这是问题所在：我有一个组合框，其中填充了 Excel 工作簿中的工作表名称。（我将包含该代码，以防出现问题）当我尝试获取选定的文本值时，我什么也得不到。我究竟做错了什么？

```
 /********************************************************************************
     * The following code takes in an excel filename and populates a combobox based 
     * on the excel tab names.
     ********************************************************************************/
    private void GetExcelSheetNames(string excelFile)
    {
        _Application xlApp;
        Workbook xlTemplateWB;

        xlApp = new ApplicationClass();

        xlTemplateWB = xlApp.Workbooks.Open(Elmnt.getDBPath() + TEMPLATENAME, 0, true,
            5, "", "", false, XlPlatform.xlWindows, "", true, false, 0, true, false, false);

        foreach (Worksheet temp in xlTemplateWB.Worksheets)
        {
            cboBenchSheets.Items.Add(temp.Name);
        }

        xlTemplateWB.Close(true, Missing.Value, Missing.Value);
        xlApp.Quit();
    }

    /********************************************************************************
     * This returns the selected item in the cboBenchSheets combo box
     ********************************************************************************/
    public String getSelection()
    {
        String selected;
        selected = cboBenchSheets.Text;                                         //Returns nothing
        selected = cboBenchSheets.SelectedText;                                 //Returns nothing
        selected = cboBenchSheets.SelectedValue.ToString();                     //Returns nothing
        selected = cboBenchSheets.GetItemText(cboBenchSheets.SelectedIndex);    //Returns -1

        return selected;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:48:29.067

[我认为ComboBox 文档的](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedtext.aspx)这一部分可能会有所帮助：

> 您可以使用 SelectedText 属性来检索或更改 ComboBox 控件中当前选定的文本。但是，您应该知道，由于用户交互，选择可能会自动更改。例如，如果您在按钮 Click 事件处理程序中检索 SelectedText 值，则该值将是一个空字符串。这是因为当输入焦点从组合框移动到按钮时，选择会自动清除。
> 
> 当组合框失去焦点时，选择点会移动到文本的开头，并且任何选定的文本都将变为未选中状态。在这种情况下，获取 SelectedText 属性会检索一个空字符串，并设置 SelectedText 属性会将指定的值添加到文本的开头。
> 
> 当组合框获得焦点时，将自动选择控件中的全文。如果调用控件的 Focus 方法设置输入焦点，则无论控件是否已经具有焦点，都会选择全文。当用户从下拉列表中选择一个项目或使用向上箭头和向下箭头键时，将自动选择新项目的文本。但是，如果您尝试在 SelectedIndexChanged 或 SelectedValueChanged 事件处理程序中获取 SelectedText 值，则该属性将返回一个空字符串。这是因为，在这些事件发生时，先前的 SelectedText 值已被清除，并且尚未设置新值。要检索 SelectedIndexChanged 或 SelectedValueChanged 事件处理程序中的当前值，请改用 SelectedItem 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:49:38.947

如果您使用项目填充组合框并且不对其执行任何其他操作，则在用户或代码中明确设置选定项目之前，它没有选定项目。我知道这看起来很奇怪，因为默认情况下组合框似乎选择了第一项，但这就​​是它的方式。

尝试在填充组合框项目集合的 for 循环之后手动将选定项目设置为第一个项目。

```
foreach (Worksheet temp in xlTemplateWB.Worksheets)
{
    cboBenchSheets.Items.Add(temp.Name);
}

cboBenchSheets.SelectedIndex = 0; 
```

# android - 如何从 Robolectric 测试操作栏的操作项？

> ID：14142097
> 
> 赞同：2
> 
> 时间：2013-01-03T15:38:20.740
> 
> 标签：android, unit-testing, robolectric

真的很快，在当前的 Robolectric 中有没有一种方法可以验证操作栏上操作项的*存在*和*可见性？*（我知道这基本上是为 UI 配置细节编写单元测试，但如果它很简单，我想这样做。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T09:14:19.593

据我所知，在早期版本的 Robolectric 中无法访问 ActionBar。试图从 Activity 中获取它返回 null。

由于 Robolectric 2.2 [http://robolectric.blogspot.com/2013/10/robolectric-22-released.html](http://robolectric.blogspot.com/2013/10/robolectric-22-released.html)您可以访问 ActionBar。

# android - 如何以编程方式创建/禁用意图过滤器？

> ID：14142101
> 
> 赞同：15
> 
> 时间：2013-01-03T15:38:27.977
> 
> 标签：android, intentfilter

我在 Android Manifest 中有三个活动和三个意图过滤器。

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>                 
    </activity>
    <activity 
        android:name=".firstActivity"
        android:theme="@style/AppTheme" 
        android:label="@string/first">
        <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="image/*" />
        </intent-filter>  
   </activity>
    <activity 
        android:name=".secondActivity"
        android:theme="@style/AppTheme" 
        android:label="@string/second">
        <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="image/*" />
        </intent-filter>  
   </activity>
   <activity 
        android:name=".thirdActivity"
        android:theme="@style/AppTheme" 
        android:label="@string/third">
        <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="image/*" />
        </intent-filter>  
   </activity ></application> 
```

如何根据某些选项以编程方式禁用意图过滤器？或者如何在代码中创建新的意图过滤器？

谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-03T15:45:47.913

您既不能以`<intent-filter>`编程方式启用、禁用或创建 s。

但是，在您的情况下，`<intent-filter>`每个组件只有一个。在这种情况下，您可以通过和以编程方式启用和禁用*组件*。在您的情况下，启用或禁用活动将具有与启用或禁用其.`PackageManager``setComponentEnabledSetting()``<intent-filter>`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-09-27T10:05:05.767

如果您的 Activity 有多个s，那么您可以通过创建一个您想要禁用的 Activity 并仅禁用 Activity 别名来禁用`intent-filter`特定的。请参阅：[https ://developer.android.com/guide/topics/manifest/activity-alias-element.html](https://developer.android.com/guide/topics/manifest/activity-alias-element.html)`intent-filter``activity-alias``intent-filter`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-03T15:45:19.533

> 意图过滤器是 IntentFilter 类的一个实例。但是，由于 Android 系统在启动该组件之前必须知道该组件的功能，因此 Intent 过滤器通常不在 Java 代码中设置，而是在应用程序的清单文件 (AndroidManifest.xml) 中作为元素设置。（**一个例外**是通过调用 Context.registerReceiver() 动态注册的广播接收器的过滤器；它们直接创建为 IntentFilter 对象。）

来源：http: [//developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

另外，请参阅：[https ://stackoverflow.com/a/10403074/832776](https://stackoverflow.com/a/10403074/832776)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-22T12:44:21.397

我所做的是**registerReciever**和

```
registerReceiver(this.broadcastReceiver, new IntentFilter("android.provider.Telephony.SMS_RECEIVED")); 
```

并**注销**广播接收器

```
if (this.broadcastReceiver != null) {
        unregisterReceiver(this.broadcastReceiver);
    } 
```

# image - 在控件模板中从 Web 加载图像时出现问题

> ID：14142108
> 
> 赞同：0
> 
> 时间：2013-01-03T15:39:20.567
> 
> 标签：image, web, controls

在控件模板中从 Web 加载图像时出现问题

我尝试从数据库中读取 html 内容并将其显示在页面中：

我为此控件设计了一个控件模板，generic.xaml 喜欢以下内容：

> ```
> <Style TargetType="q:ChoiceQuestion">
>         <Setter Property="Template">
>             <Setter.Value>
>                 <ControlTemplate TargetType="q:ChoiceQuestion">
>                     <RichTextBlock x:Name="QuestionTitleTextBlock" VerticalAlignment="Center">
>                         <Paragraph x:Name="QuestionTitleParagraph">
>                             <Run Text="{Binding OrderNumber}"></Run>
>                         </Paragraph>
>                     </RichTextBlock>
>                 </ControlTemplate>
>             </Setter.Value>
>         </Setter>
>     </Style> 
> ```

我从 html 内容中获取这些图片并将其添加到 QuestionTitleParagraph 中，因此我编写了以下代码以在 OnApplyTemplate 中显示图像：</p>

> ```
> public override void OnApplyTemplate()
>         {
>             base.OnApplyTemplate();
> 
>             // Get the image url from database, the following image is just for test
>             ImageSource imageSource = new BitmapImage(new Uri("http://localhost:8081/uploadfile/2012/07/19/temp1.png", 
> ```
> 
> UriKind.Absolute)); 图片 img = new Image(); img.Source = imageSource; img.Width = 100; img.高度 = 100;
> 
> ```
>  // Add the image to QuestionTitleParagraph
>             QuestionTitleParagraph = (Paragraph)base.GetTemplateChild("QuestionTitleParagraph");
>             InlineUIContainer container = new InlineUIContainer();
>             container.Child = img;
>             QuestionTitleParagraph.Inlines.Add(container);
>         } 
> ```

我的问题是它只在我的页面中显示一个空白图像，并且尺寸与我设计的一样（100 * 100）。如何在控件模板中动态显示图像？我确定图像 url 是有效的，我可以在richtextblock 中而不是在控件模板中显示它。而且我发现如果我不设置图像的宽度和高度，它也无法在richtextblock中显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:43:37.030

你试过改变图片格式吗？

# sql - 使用 TOP N 的 SQL (sybase) 查询在插入表时执行非常糟糕

> ID：14142111
> 
> 赞同：1
> 
> 时间：2013-01-03T15:39:25.923
> 
> 标签：sql, tsql, sap-ase

当您尝试将以下代码插入表或临时表时，我在使用 SYBASE ASE 时遇到了性能问题：

```
 INSERT INTO #temp (Id)
    SELECT TOP 100 a.Id
    FROM TableA a
    INNER JOIN TableB b ON a.Id = b.Id
    WHERE a.SomeColumn = 'blah' and b.SomeColumn = 'Blah'
    ORDER BY a.Id 
```

WHERE 子句并不那么重要……重要的是 SELECT 查询会在瞬间自行运行，但是一旦您尝试将其插入表中，就需要 2 分钟！！！！

查看查询计划，优化器似乎没有考虑到估计的行数应该是 100，而是对 TableB 进行了表扫描。其自身的 select 语句似乎呈现了一个明智的计划，其中考虑了 TOP 100，但插入似乎使优化器采取了一条非常低效的路线。已尝试对此查询进行许多排列但无济于事。表A和B非常大，TOP N是必须的。也尝试过设置 rowcount 100 和相同的结果。

任何人都可以建议解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:10:04.903

你为什么不试试这个，看看你是否还有问题。从技术上讲，如果 select 语句本身很快，那么 insert into 也应该很快。

```
--INSERT INTO #temp (Id)
SELECT TOP 100 a.Id
INTO #temp
FROM TableA a
INNER JOIN TableB b ON a.Id = b.Id
WHERE a.SomeColumn = 'blah' and b.SomeColumn = 'Blah'
ORDER BY a.Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:35:51.570

你有没有尝试过：

```
INSERT INTO #temp (Id)
SELECT * FROM
(
  SELECT TOP 100 a.Id
  FROM TableA a
  INNER JOIN TableB b ON a.Id = b.Id
  WHERE a.SomeColumn = 'blah' and b.SomeColumn = 'Blah'
  ORDER BY a.Id
) 
```

它可能会产生稍微不同的执行计划。

# java - 如何在顺序无关紧要的情况下测试生成的字符串？

> ID：14142116
> 
> 赞同：3
> 
> 时间：2013-01-03T15:39:30.660
> 
> 标签：java, string, unit-testing

如何在结束顺序相当灵活的情况下对生成的字符串进行单元化。假设我正在尝试测试一些代码，这些代码打印出来自键值对的生成 SQL。但是，许多片段的确切顺序并不重要。

例如

```
SELECT
    *
FROM
    Cats
WHERE
    fur = 'fluffy'
OR
    colour = 'white' 
```

在功能上等同于

```
SELECT
    *
FROM
    Cats
WHERE
    colour = 'white'
OR
    fur = 'fluffy' 
```

生成条件子句的顺序无关紧要，但重要的是它们遵循 where 子句。此外，很难预测，因为循环 a 时对的排序`entrySet()`是`HashMap`不可预测的。对键进行排序可以解决这个问题，但会因为没有（或负）业务价值而引入运行时惩罚。

**如何在不过度指定顺序的情况下对此类字符串的生成进行单元测试？**

我考虑过使用正则表达式*，但** 我想不出如何写一个说：

一个正则表达式是我在想的，但我可以想到一个正则表达式，上面写着“SELECT * FROM Cats WHERE”，然后是 {“fur = 'fluffy', color = 'white'} 之一，然后是“OR”`followed by one of one of {"fur = 'fluffy',`颜色= 'white'} ...而不是上次使用的那个。

**注意：**我实际上并没有使用 SQL 来执行此操作，它只是为解决问题提供了一种更简单的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:12:51.590

我看到了一些不同的选择：

如果您可以忍受适度的运行时损失，请[`LinkedHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)保持插入顺序。

如果您想在不更改实现的情况下完全解决这个问题，在您的示例中，我不明白为什么您应该做一些比检查每个片段是否出现在代码中以及它们出现在`WHERE`. 伪代码：

```
Map<String, String> parametersAndValues = { "fur": "fluffy", "colour", "white" };
String generatedSql = generateSql(parametersToValues);
int whereIndex = generatedSql.indexOf("WHERE");
for (String key, value : parametersAndValues) {
    String fragment = String.format("%s = '%s'", key, value);
    assertThat(generatedSql, containsString(fragment));
    assertThat(whereIndex, is(lessThan(generatedSql.indexOf(fragment))));
} 
```

但我们可以做的比这更简单。由于您实际上*不必*使用大量参数来测试它——对于大多数实现来说，只有三个重要的量，“无、一个或多个”——实际上可以根据所有可能的值对其进行测试：

```
String variation1 = "SELECT ... WHERE fur = 'fluffy' OR colour = 'white'";
String variation2 = "SELECT ... WHERE colour = 'white' OR fur = 'fluffy'";
assertThat(generatedSql, is(anyOf(variation1, variation2))); 
```

**编辑：**为了避免手工编写所有可能的变化（如果你有两个或三个以上的项目，这会变得相当乏味，因为有*n!*组合*n 个*项目的方法），你可以看看[生成所有可能排列的算法一个序列](https://stackoverflow.com/questions/2710713/algorithm-to-generate-all-possible-permutations-of-a-list)并执行以下操作：

```
List<List<String>> permutations = allPermutationsOf("fur = 'fluffy'", 
    "colour = 'white'", "scars = 'numerous'", "disposition = 'malignant'");
List<String> allSqlVariations = new ArrayList<>(permutations.size());
for (List<String> permutation : permutations) {
    allSqlVariations.add("SELECT ... WHERE " + join(permutation, " OR "));
}
assertThat(generatedSql, is(anyOf(allSqlVariations))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:20:41.873

好吧，一种选择是以某种方式解析 SQL，提取字段列表并检查一切是否正常，而不考虑字段的顺序。然而，这将是相当难看的：如果做得好，你必须实现一个完整的 SQL 解析器（显然是矫枉过正），如果你使用正则表达式或类似的快速而肮脏的方法，你可能会冒着测试会中断的风险对生成的 SQL 的更改。

相反，我建议结合使用单元测试和集成测试：

*   Have a unit test that tests the code which supplies the list of fields for building the SQL. I.e., have a method `Map getRestrictions()` which you can easily unit-test.
*   Have an integration test for the SQL generation as a whole, which runs against a real database (maybe some embedded DB like the H2 database, which you can a start just for the test).

That way, you unit-test the actual values supplied to the SQL, and you integration-test that you are really creating the right SQL.

*注意：*我认为这是“集成代码”的一个示例，无法进行有用的单元测试。问题是代码本身并不能产生真实的、可测试的结果。相反，它的目的是与产生结果的数据库进行交互（通过向其发送 SQL）。换句话说，代码做正确的事情不是如果它产生一些特定的 SQL 字符串，而是如果它驱动数据库做正确的事情。因此，该代码只能在数据库中进行有意义的测试，即在集成测试中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:48:54.230

首先，使用 a`LinkedHashMap`而不是常规的`HashMap`。它不应该引入任何明显的性能下降。它保留了插入顺序，而不是排序。

其次，以易于理解的方式将这些对插入到地图中。也许您正在从表中获取数据，并且添加排序索引是不可接受的。但也许数据库*可以*按主键或其他东西排序。

结合起来，这两个变化应该会给你可预测的结果。

或者，使用比字符串 equals 更智能的方法比较实际与预期。也许是一个正则表达式来清除所有注入到实际 SQL 查询中的对？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-03T15:39:30.660

到目前为止，我想出的最好的方法是在测试期间使用一些库（就像 PowerMockito 一样）`HashMap`用`SortedMap`like替换`TreeMap`。这样，对于测试，顺序将是固定的。但是，这仅适用于地图不是在生成字符串的相同代码中构建的情况。

# c# - 抛出的异常似乎阻塞了其他线程

> ID：14142119
> 
> 赞同：5
> 
> 时间：2013-01-03T15:39:35.180
> 
> 标签：c#, windows, sockets, exception, proxy

背景/介绍：

非常奇怪的问题，在引发特定异常时，似乎所有其他线程都停止执行，直到异常被处理。该应用程序是一个代理服务器，通过一个 tcp 套接字池传输多个请求（在任何一个时间范围内有数百个请求），这些请求通过一个 socks 连接连接到 N 个其他代理客户端。这也通过传递委托进行了尝试，而不是使用异常，但性能同样很差。

正常操作下的日志片段：

```
14:40:17.700 [PrxSvc:9058] --> [200] 1217ms http://redact.example.com   
14:40:17.700 [PrxSvc:9058] C-DEBUG:C                
14:40:17.716 [PrxSvc:9058] --> [200] 1098ms http://redact.example.com           
14:40:17.716 [PrxSvc:9058] C-DEBUG:C             
14:40:17.727 [PrxSvc:9054] --> [200] 905ms http://redact.example.com   
14:40:17.727 [PrxSvc:9054] C-DEBUG:C         
14:40:17.778 [PrxSvc:9050] --> [200] 453ms http://redact.example.com           
14:40:17.778 [PrxSvc:9050] C-DEBUG:C         
14:40:17.781 [Unnamed Thread] C-DEBUG:A          
14:40:17.781 [Unnamed Thread] C-DEBUG:B         
14:40:17.796 [PrxSvc:9058] --> [200] 652ms http://redact.example.com             
14:40:17.796 [PrxSvc:9058] C-DEBUG:C                
14:40:17.807 [PrxSvc:9056] --> [200] 1555ms http://redact.example.com              
14:40:17.807 [PrxSvc:9056] C-DEBUG:C           
14:40:17.816 [PrxSvc:9064] --> [200] 396ms http://redact.example.com 
```

套接字池重新使用到域的连接，但是当连接被外部服务器关闭时，我们显然不会收到任何通知。当我们尝试通过 TcpSocksHandler.TaskHandler 方法重用这个连接时：

```
socks.Send(buffer, 0, rcv, SocketFlags.None);
socks.Receive(new byte[1], 0, 1, SocketFlags.Peek); 
```

此异常被以下内容捕获：

```
catch
{
    //The socket is bad, we should get a new socket.
    Log("This socket has expired! - Server has closed the connection.");
    Log(String.Format("This socket was {0} seconds old: {1}", seconds, socks.Guid));
    socks.Dispose();
    Log("C-DEBUG:1");
    throw new SocksSocketFailureException(); //throw exception. to bubble back up.
} 
```

然后被它的调用代码捕获，多次向上堆栈，如下所示：

```
DoHandleRequest{...
try
{
    _actualEndPoint = TcpSocksHandler.TaskHandler(socket, context.SocksSocket, 30000000, method);
}
catch (SocksSocketFailureException ssfe)
{
    context.SocksSocket = null;
    Logger.Log("C-DEBUG:2");
    throw;
}
}

ProxyBase.HandleRequest{...
    try
    {
        ...
        success = DoHandleRequest(context, out bytes);
    }
    catch (SocksSocketFailureException ssfex)
    {
        Logger.Log("C-DEBUG:3");
        throw;
    }
}

ProxyManager.HandleRequest{
    while (true)
    {
        // Pick the best available proxy to handle the request
        Logger.Log("C-DEBUG:A");
        IProxy proxy = GetNextProxy(context) ?? NullProxy.Instance;
        Logger.Log("C-DEBUG:B");
        try
        {
            // Process the request
            proxy.HandleRequest(context);
            Logger.Log("C-DEBUG:C");
            break;
        }
        catch(SocksSocketFailureException ssfex)
        {
            Logger.Log("C-DEBUG:4");
        }
        catch (Exception)
        {
            break;
        }
    }
} 
```

从下面的日志片段中，您可以看到这个（或缺乏）的性能

```
14:40:34.090 [PrxSvc:9068] C-DEBUG:A             
14:40:34.090 [PrxSvc:9068] C-DEBUG:B                  
14:40:34.231 [PrxSvc:9068] This socket has expired! - Server has closed the connection.
14:40:34.231 [PrxSvc:9068] This socket was 6.281049 seconds old: 61cc51b9-f121-4529-9649-7defcc1f5586           
14:40:34.231 [PrxSvc:9068] C-DEBUG:1            
14:40:34.528 [PrxSvc:9068] C-DEBUG:2              
14:40:34.715 [PrxSvc:9068] C-DEBUG:3              
14:40:34.918 [PrxSvc:9068] C-DEBUG:4             
14:40:34.918 [PrxSvc:9068] C-DEBUG:A 
```

上面没有编辑任何日志行 - 几乎整个第二秒都没有处理任何其他内容！（我们通常可以处理一百个请求）。此外，仅仅将异常冒泡到堆栈中的行为似乎需要一秒钟（有时更多！）。- 请注意上述日志行的时间安排。例如 DEBUG:3 和 DEBUG:4 之间有 0.2 秒的间隔！！

我不知道是什么原因造成的。任何建议/想法将不胜感激！

**更新：**

基于 Eamon 的问题，我将相同的 x64 构建推送到运行 Windows8 64 位的非生产本地机器。安装为服务，发布构建，就像前面的例子一样。唯一的另一个区别是它现在针对 4 个代理节点（PrxSvc 9050、9052、9054、9056），而不是之前的 80 个。我不能再说这些异常步骤现在是否阻塞了线程执行，因为它们是在一个及时时尚：

```
16:53:59.787 [PrxSvc:9056] This socket has expired! - Server has closed the connection.
16:53:59.787 [PrxSvc:9056] This socket was 0.1280009 seconds old: 69d12cc9-9456-47db-86b2-a2ebf87b41bf
16:53:59.787 [PrxSvc:9056] C-DEBUG:1
16:53:59.787 [PrxSvc:9056] C-DEBUG:2
16:53:59.787 [PrxSvc:9056] C-DEBUG:3
16:53:59.787 [PrxSvc:9056] C-DEBUG:4
16:53:59.787 [PrxSvc:9056] C-DEBUG:A 
```

在这台机器上，代码目前正在以大约每秒 80 个请求的速度愉快地处理 800 个并发请求，并且可以轻松处理更多......到底是什么导致了这种差异？！

为了完整起见，我用 4 个节点而不是 80 个节点重新运行了第一个测试（在 win2008 服务器上），并得到了相同的垃圾结果：

```
17:22:44.891 [PrxSvc:9054] C-DEBUG:B
17:22:45.063 [PrxSvc:9054] This socket has expired! - Server has closed the connection.
17:22:45.063 [PrxSvc:9054] This socket was 25.84375 seconds old: cfdee74d-9941-4c8c-80cd-f32aa14b7877
17:22:45.063 [PrxSvc:9054] C-DEBUG:1
17:22:45.485 [PrxSvc:9054] C-DEBUG:2
17:22:45.751 [PrxSvc:9054] C-DEBUG:3
17:22:46.016 [PrxSvc:9054] C-DEBUG:4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:44:20.353

这不是您的问题的答案，您的程序中的错误是什么，但如果没有看到大图或自己测试您的代码，我几乎无法判断。通常我会为此写评论，但我的文字太长了。

您的第一个示例日志（“正常操作”）对我来说有点令人困惑。只有一个`C-DEBUG:A`，`C-DEBUG:B`而至少每一个`C-DEBUG:C`都必须有一个，不是吗？

其他示例看起来不错，一切都按我的预期发生（*A => B => exception => 1 => 2 => 3 => 4 => A*）。好吧，似乎只有一个线程，但是这些示例并没有表明这是错误的；`C-DEBUG:A`我从另一个线程看不到第二个。你期望什么？

关于您的更新：在这里，我想更多地了解您的测试机器的性能，因为每次抛出异常都需要一些执行时间。这就是为什么在循环中抛出异常会对性能造成很大影响的原因。您的服务器的时间似乎有点慢，但从我的角度来看还可以。

**虽然无法为您的问题提供提示，但至少我可以给您声明，异常抛出本身不是其他线程的阻塞因素。**为了证明我写了一个小程序（如果你想知道我是如何做到的，请参阅下面的源代码）。该程序的输出是

```
19:31:09.2788 [Thread-0] 0
19:31:09.2788 [Thread-1] 1
19:31:09.3908 [Thread-0] 0
19:31:09.3908 [Thread-1] 1
19:31:09.4908 [Thread-1] 1
19:31:09.4908 [Thread-0] 0
19:31:09.5908 [Thread-0] 0
19:31:09.5998 [Thread-1] Caught exception callstack frame 29
19:31:09.6078 [Thread-1] Caught exception callstack frame 28
19:31:09.6148 [Thread-1] Caught exception callstack frame 27
19:31:09.6218 [Thread-1] Caught exception callstack frame 26
19:31:09.6288 [Thread-1] Caught exception callstack frame 25
19:31:09.6358 [Thread-1] Caught exception callstack frame 24
19:31:09.6418 [Thread-1] Caught exception callstack frame 23
19:31:09.6488 [Thread-1] Caught exception callstack frame 22
19:31:09.6548 [Thread-1] Caught exception callstack frame 21
19:31:09.6608 [Thread-1] Caught exception callstack frame 20
19:31:09.6668 [Thread-1] Caught exception callstack frame 19
19:31:09.6728 [Thread-1] Caught exception callstack frame 18
19:31:09.6778 [Thread-1] Caught exception callstack frame 17
19:31:09.6828 [Thread-1] Caught exception callstack frame 16
19:31:09.6888 [Thread-1] Caught exception callstack frame 15
19:31:09.6908 [Thread-0] 0
19:31:09.6938 [Thread-1] Caught exception callstack frame 14
19:31:09.6978 [Thread-1] Caught exception callstack frame 13
19:31:09.7028 [Thread-1] Caught exception callstack frame 12
19:31:09.7078 [Thread-1] Caught exception callstack frame 11
19:31:09.7128 [Thread-1] Caught exception callstack frame 10
19:31:09.7168 [Thread-1] Caught exception callstack frame 9
19:31:09.7218 [Thread-1] Caught exception callstack frame 8
19:31:09.7258 [Thread-1] Caught exception callstack frame 7
19:31:09.7299 [Thread-1] Caught exception callstack frame 6
19:31:09.7339 [Thread-1] Caught exception callstack frame 5
19:31:09.7369 [Thread-1] Caught exception callstack frame 4
19:31:09.7409 [Thread-1] Caught exception callstack frame 3
19:31:09.7439 [Thread-1] Caught exception callstack frame 2
19:31:09.7469 [Thread-1] Caught exception callstack frame 1
19:31:09.7499 [Thread-1] Caught exception callstack frame 0
19:31:09.7509 [Thread-1] 1
19:31:09.7919 [Thread-0] 0
19:31:09.8509 [Thread-1] 1
19:31:09.8919 [Thread-0] 0
19:31:09.9509 [Thread-1] 1
19:31:10.0509 [Thread-1] 1
19:31:10.1509 [Thread-1] 1
19:31:10.2509 [Thread-1] 1
19:31:10.3509 [Thread-1] 1 
```

如您所见，线程*Thread-0*打印了一段时间，但*Thread-1*`0`的异常在调用堆栈中向上运行。这里不堵！

 *我的程序供参考：

```
class Program {
    class MyException : Exception {}

    // A class for give the starting thread operation some parameters
    class ThreadStartParameter {
        // For identifying each thread
        public int Id { get; set; }

        // For building up a deeper callstack frame
        public int CallStackDepth { get; set; }

        // Indicates that this thread should throw an exception
        public bool ThrowException { get; set; }
    }

    static void Main(string[] args) {
        // Create two threads and let them run concurrently
        Thread t0 = new Thread(BuildUpCallStack) { Name = "Thread-0" };
        Thread t1 = new Thread(BuildUpCallStack) { Name = "Thread-1" };
        t0.Start(new ThreadStartParameter {
            Id = 0,
            CallStackDepth = 0,
            ThrowException = false
        });
        t1.Start(new ThreadStartParameter {
            Id = 1,
            CallStackDepth = 0,
            ThrowException = true
        });
        Console.Read();
    }

    // Recursive helper method to build a callstack of 30 frames, which
    // is used to rethrow an exception at each level
    static void BuildUpCallStack(object data) {
        ThreadStartParameter parameter = (ThreadStartParameter)data;

        if (parameter.CallStackDepth < 30) {
            try {
                BuildUpCallStack(new ThreadStartParameter {
                    Id = parameter.Id,
                    CallStackDepth = parameter.CallStackDepth + 1,
                    ThrowException = parameter.ThrowException
                });
            } catch (MyException e) {
                Log(string.Format("Caught exception callstack frame {0}",
                    parameter.CallStackDepth));
                // If an exception occured, rethrow it unless this
                // callstack frame was the first
                if (parameter.CallStackDepth != 0) throw;

                // If this frame was the first in callstack, restart the
                // thread but this time without throwing an exception (for
                // demonstrate such a restart character like your Proxies do)
                BuildUpCallStack(new ThreadStartParameter {
                    Id = parameter.Id,
                    CallStackDepth = 0,
                    ThrowException = false
                });
            }
            return;
        }

        DoSomething(parameter);
    }

    static void DoSomething(object data) {
        ThreadStartParameter parameter = (ThreadStartParameter)data;

        for (int counter = 0; counter < 7; counter++) {
            if (counter == 3 && parameter.ThrowException)
                throw new MyException();

            Log(parameter.Id);
            Thread.Sleep(100);
        }
    }

    static void Log(object message) {
        Console.WriteLine(
            "    {0:HH:mm:ss.ffff} [{1}] {2}",
            DateTime.Now,
            Thread.CurrentThread.Name,
            message.ToString());
    }
} 
```

如果你在你的测试机器上尝试这个程序，我想你应该启动更多的“好”线程（不会抛出异常）和/或增加所需的调用堆栈深度，以便像我一样看到效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:58:23.590

异常抛出成本低，捕获成本高。不要捕获异常，除非代码知道如何处理它们。C-Debug:2 和 C-Debug:3 似乎就是这种情况。此外，您有一个已知条件，即对方已关闭其连接。您不应该使用异常来处理此问题。您需要公开一个类似于`IsConnected`并在循环中检查的方法或属性，而不是依赖于抛出的异常：

```
while(true) {
   IProxy proxy = GetNextProxy(context) ?? NullProxy.Instance;
   if (!proxy.IsConnected)
       continue;
   try {
     proxy.HandleRequest(context);
     break;
   } catch {
     // handle actual exceptional cases here
   } 
} 
```

您可以在上面的代码中添加一个计数器或计时器，并在 x 重试次数或特定时间段已过期的情况下抛出异常（如果需要），但无论如何 IsConnected 属性检查将大大提高代码的性能.*

# azure - 检索 Azure 表的属性

> ID：14142121
> 
> 赞同：1
> 
> 时间：2013-01-03T15:39:51.437
> 
> 标签：azure

是否有任何程序可以知道 Azure 表实体的列名或属性名。我让每一行都保存相同类型的数据。我只需要在运行时知道每个实体的所有属性名称。

-马亨德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:46:09.240

是的，您可以使用[DynamicTableEntity](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/06/windows-azure-storage-client-library-2-0-tables-deep-dive.aspx)、[DictionaryTableEntity](http://fabriccontroller.net/blog/posts/dictionarytableentity-working-with-untyped-entities-in-the-table-storage-service/)或覆盖 ReadEntity 方法：

```
 public override void ReadEntity(IDictionary<string, EntityProperty> properties, OperationContext operationContext)
    {
        // Store property names somewhere.
        base.ReadEntity(properties, operationContext);
    } 
```

通过重写 ReadEntity 方法，您可以将所有属性名称存储在每个实体的列表中。

**注意：**此答案假设您使用的是 Table Storage v2.0 SDK

# java - 可以在不绑定的情况下与android服务交互吗？

> ID：14142125
> 
> 赞同：0
> 
> 时间：2013-01-03T15:40:19.190
> 
> 标签：java, android, android-service, dalvik

是否可以直接与服务中的方法进行交互而不绑定到它？我正在将应用程序中的组件移动到服务中，现在它变得非常不稳定，因为绑定到服务是异步操作。我知道我可以在我的活动的 onCreate / onDestroy 方法中绑定/取消绑定到服务，但我需要直接在生命周期方法中访问这个组件！

那么，是否可以使用 Context.startService 方法启动服务，将启动的服务实例保存在全局变量中，然后从我的活动/片段中访问它？

# javascript - 使用面向对象的 javascript 创建新元素

> ID：14142126
> 
> 赞同：0
> 
> 时间：2013-01-03T15:40:20.377
> 
> 标签：javascript

我正在学习如何编写面向对象的 javascript。我有一个简单的类来创建 div 元素，但是当我测试代码时没有创建新元素。我这样做正确吗？我正在使用以下代码：

```
function elementCreation(elementParent, elementId, elementText) {
    this.elementParent = document.getElementsByTagName(elementParent)[0];
    this.elementId = elementId;
    this.elementHtml = elementText;
    this.elementMake = function (type) {
        newElement = document.createElement(type);
        // add new element to the dom
        this.elementParent.appendChild(newElement);
    };
}

var newObject = new elementCreation('body', 'testdiv', 'some text here!!!');
newObject.elementMake('div'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:42:43.060

您的代码完美运行，恭喜。

你根本看不到没有样式的空 div。

请参阅[此处的样式演示](http://jsfiddle.net/wRt38/)：

```
div {
 width:100px;
 height:100px;
 background-color:red;   
}​ 
```

请注意，如果您的构造参数用于构造子元素，则必须将它们投入使用。例如 ：

```
function elementCreation(elementParent, elementId, elementText) {
    this.elementParent = document.getElementsByTagName(elementParent)[0];
    this.elementId = elementId;
    this.elementHtml = elementText;
    this.elementMake = function (type) {
        newElement = document.createElement(type);
        // add new element to the dom
        this.elementParent.appendChild(newElement);
        newElement.innerHTML = elementText;
    };
} 
```

[示范](http://jsfiddle.net/ff3Cz/)

我不会尝试使用`elementId`参数：如果您定义一个函数，可能会多次调用它，并且在 HTML 中不能多次使用 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:46:21.423

正在创建 div 但您没有将其内容设置为您的第三个参数`elementText`。

```
 newElement = document.createElement(type);
    newElement.innerHTML = this.elementHtml; // <-- set its content
    newElement.id = this.elementId; // <-- set the ID
    // add new element to the dom
    this.elementParent.appendChild(newElement); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:16:39.053

在设置文本内容时添加了与 firefox 的兼容性，然后将 id 属性关联到新元素。我还尝试了另一种更容易复杂化的方法。

关于什么：

```
function elementCreation(args) {
    this.parent = args.parent;
    this.id = args.id;
    this.text = args.text;

    this.make = function(type) {
        var el = document.createElement(type);
        el.id = this.id;

        // firefox do not support innerText, some others do not support textContent
        if (typeof el.innerText != "undefined") {
            el.innerText = this.text;
        } else {
            el.textContent = this.text;
        }

        this.parent.appendChild(el);
    }
}

new elementCreation({
    parent: document.body,
    id: 'div1',
    text: 'some text here!!!'
}).make('div'); 
```

你可以[用这个 jsfiddle 试试](http://jsfiddle.net/G9sQe/1/)。

# kernel - 从内核文件为 bochs 创建软盘映像

> ID：14142129
> 
> 赞同：1
> 
> 时间：2013-01-03T15:40:25.977
> 
> 标签：kernel

这是一个新手问题，我已经用谷歌搜索了一段时间，但没有找到解决方法，所以我只是在这里发布。

我正在阅读 James Molloy 的内核开发教程。他使用软盘驱动程序通过以下脚本将内核映像写入 floppy.img

```
sudo /sbin/losetup /dev/loop0 floppy.img
sudo mount /dev/loop0 /mnt2
sudo cp src/kernel /mnt2/kernel
sudo umount /dev/loop0
sudo /sbin/losetup -d /dev/loop0 
```

但是，我的机器上没有软盘。我还尝试使用以下方法创建 floppy.img

```
1.create empty 1.44MB image file by dd command (dd bs=512 count=2880 if=/dev/zero of=myfloppy.img)

2.format the image file by mkfs.msdos
3.mount the image file to some mount point
4.copy kernel to the mount point
5.umount the virtual floppy image file 
```

但它确实使bochs工作。有谁知道创建 bochs 可以在其上运行的 floppy.img 的任何方法？

顺便说一句：我也尝试使用 mkisofs 命令创建 iso 映像，但 bochs 也无法在 iso 映像上运行。如果有人知道如何使用iso图像使bochs工作，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:23:04.030

检查 bochs 配置（有很多变量需要设置）。

bochs开始时说什么？

如果格式化并为空，软盘映像是否会启动？（它应该抱怨没有操作系统或类似的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T03:37:53.730

在您的机器上安装 bochs 后，您只需键入“bximage”并按照提示创建几种不同类型的图像。

这是一个例子：

输入 bximage

==================================================== ====================== bximage 用于 Bochs 的磁盘映像创建/转换/调整大小和提交工具

# $Id: bximage.cc 12690 2015-03-20 18:01:52Z vruppert $

1.  创建新的软盘或硬盘映像
2.  将硬盘映像转换为其他格式（模式）
3.  调整硬盘映像大小
4.  将“可撤消”重做日志提交到基础映像
5.  磁盘映像信息

6.  退出

请选择一项 [0] 1

创建图像

您要创建软盘映像还是硬盘映像？请输入 hd 或 fd。[高清] ？您的选择 (?) 与任何选择都不匹配：fd、hd

您要创建软盘映像还是硬盘映像？请输入 hd 或 fd。[高清] fd

选择要创建的软盘映像的大小，以兆字节为单位。请输入 160k、180k、320k、360k、720k、1.2M、1.44M、1.68M、1.72M 或 2.88M。[1.44M] ....

# validation - Web Api ModelState 验证忽略了 DisplayAttribute

> ID：14142133
> 
> 赞同：7
> 
> 时间：2013-01-03T15:40:35.557
> 
> 标签：validation, asp.net-web-api

给定具有这些数据注释的模型：

```
public class Example
{
    [Required]
    [Display(Name = "Activity response")]
    public string ActivityResponse { get; set; }
} 
```

我希望模型状态错误消息是“需要活动响应字段”。相反，它是“需要 ActivityResponse 字段”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T21:56:54.767

万岁！[codeplex 问题](http://aspnetwebstack.codeplex.com/workitem/744)报告说此错误将在 Web API v5.1 预览版中修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T09:30:54.007

有同样的问题，我为此做了一个解决方法。我知道这并不完美。

为每个数据注释属性创建一个新类

```
public class RequiredAttribute : System.ComponentModel.DataAnnotations.RequiredAttribute
{
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        validationContext.DisplayName = ModelMetadataProviders
            .Current
            .GetMetadataForProperty(null, validationContext.ObjectType, validationContext.DisplayName)
            .DisplayName;
        return base.IsValid(value, validationContext);
    }
}

public class StringLengthAttribute : System.ComponentModel.DataAnnotations.StringLengthAttribute
{
    public StringLengthAttribute(int maximumLength)
        : base(maximumLength)
    { }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
         validationContext.DisplayName = ModelMetadataProviders
             .Current
             .GetMetadataForProperty(null, validationContext.ObjectType, validationContext.DisplayName)
             .DisplayName;
         return base.IsValid(value, validationContext);
    }
} 
```

ETC....

# c++ - STL 中会发生什么 什么时候从两者之间删除一个元素？

> ID：14142137
> 
> 赞同：1
> 
> 时间：2013-01-03T15:40:39.377
> 
> 标签：c++, memory-management, vector, stl

由于 stl 向量的内存位置是连续的，其余元素是否向后移动了一步？stl 库的编写者是如何实现它的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:42:14.537

以下所有元素都向后移动了一步。Vector 保证将其元素保存在连续的内存块中，因此不允许内部空洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:42:10.557

是的，被擦除元素之后的元素移动了一个位置。这是在 .com 提供的保证下实施的唯一方法`std::vector`。

# javascript - 如何将图像插入 HBASE ？我需要将图像存储在 hbase 中（hbase 是我项目中的数据库）？

> ID：14142138
> 
> 赞同：0
> 
> 时间：2013-01-03T15:40:41.953
> 
> 标签：javascript, hbase

如何将图像插入 HBASE ？我需要将图像存储在 hbase 中（hbase 是我项目中的数据库）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:40:58.027

如果要将图像存储在 hbase 数据库中，则必须将它们转换为字节。[jpeg 到字节的示例](https://stackoverflow.com/questions/356616/image-transcoding-jpeg-to-png-with-java/356637#356637)

但是，您可以只存储路径，而不是直接存储图像。

# java - 从庞大的数据表中批量获取数据的查询

> ID：14142141
> 
> 赞同：1
> 
> 时间：2013-01-03T15:40:57.397
> 
> 标签：java, sql, oracle, performance

我需要从一个巨大的数据表（可能包含 500 万条记录）中创建一些具有我自己格式的文件（比如说每个 5000 个记录）。我希望这个创作是多线程的。

那么如何有效地形成查询以获取 1..5000 和 5001..10000 等记录。

我可以形成一些东西，比如 select * from table where rownum<5000 并且不存在（已经获取的记录）。但它不是有效的。

请建议形成查询的最佳方法或创建文件的任何替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:39:50.647

如果您使用的是 Oracle 11g，则可以使用 DBMS_PARALLEL_EXECUTE 包在多个线程中运行您的过程。 [了解更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_parallel_ex.htm#CHDIJACH)。

如果您使用的是早期版本，则可以使用 Tom Kyte 的技术实现 DIY 并行。The Hungry DBA[在他的博客上提供了一个很好的解释](http://hungrydba.blogspot.co.uk/2007/12/tom-kytes-do-it-yourself-parallelism.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:45:44.450

听起来您需要一组使用 MySql`LIMIT`子句的查询来实现分页（例如，一个查询将获得前 1000 个，另一个将获得第二个 1000 等等。）。

您可以形成这些查询并提交`Callables`给具有一定数量线程的[Executor 服务。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executor.html)将`Executor`管理线程。我怀疑在 each 中查询和写入记录可能更有效`Callable`，但这是一个可能需要测试的假设。

# mod-rewrite - Joomla live_site 和 mod_rewrite

> ID：14142143
> 
> 赞同：0
> 
> 时间：2013-01-03T15:41:07.487
> 
> 标签：mod-rewrite, joomla

我在`/joomla/`. 它可以通过 访问`http://www.example.com/joomla/`。

但是我希望它在我浏览时可以访问`http://www.example.com/`（或者`example.com`，没有`www`）

我认为配置`$live_site`是因为这个，但将其更改为`http://www.example.com/`，它显示一个空白页面。

我应该编辑根目录`.htaccess`吗？或 Joomla`.htaccess`文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:54:21.367

**将非 www 版本重定向到 www**

您可以将您的域从“非WWW”重定向到“WWW”。要将您的域重定向到“WWW”，您需要在“.htaccess”文件中定义一个规则。您可以将此文件上传到您网站的“根”目录

为此，您可以设置如下规则：

```
*******************************************
RewriteEngine on

RewriteCond %{HTTPS} (on)?
RewriteCond %{HTTP:Host} ^(?!www\.)(.+)$ [NC]
RewriteCond %{REQUEST_URI} (.+)
RewriteRule .? http(?%1s)://www.%2%3 [R=301,L]
******************************************** 
```

在您的“.htaccess”文件中定义上述规则后，当您在 URL domainname.com 中键入您的域时，它将被重定向到 WWW。

# python - 在 Django 中添加自定义字段的最佳实践

> ID：14142144
> 
> 赞同：1
> 
> 时间：2013-01-03T15:41:13.727
> 
> 标签：python, django

我有一个自定义字段位于我的`/app/models.py`. 我的问题是...

这里的最佳做法是什么。我应该有一个单独的文件`customField.py`，即导入到`models.py`，还是应该全部在同一个`models.py`文件中？最佳实践

```
class HibernateBooleanField(models.BooleanField):

    __metaclass__ = models.SubfieldBase

    def get_internal_type(self):
        return "HibernateBooleanField"

    def db_type(self):
        return 'bit(1)'

    def to_python(self, value):
        if value in (True, False): return value
        if value in ('t', 'True', '1', '\x01'): return True
        if value in ('f', 'False', '0', '\x00'): return False

    def get_db_prep_value(self, value, *args, **kwargs):
        return 0x01 if value else 0x00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:57:10.500

我不建议将所有内容都放在一个`models.py`文件中。我喜欢为模型、字段和视图创建单独的包，然后包含其他模块。我认为它是 Django 应用程序代码结构和可读性的最佳解决方案之一。它看起来像这样：

```
/app
  /models
     /__init__.py
     /model1.py
     /model2.py
  /fields
     /__init__.py
     /custom_field1.py
     /custom_field2.py
  /views
     /__init__.py
     /page1.py
     /page2.py 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:08:14.783

我会将您的任何自定义字段放在单独的`fields.py`.

看看 中的一些应用程序`django.contrib`，大多数都具有单个`models.py`、`fields.py`、`views.py`等的通用结构`middleware.py`。

遵循标准意味着任何熟悉 django 框架的人都可以轻松上手您的应用程序。

# python - Celery - 以编程方式列出工人

> ID：14142150
> 
> 赞同：14
> 
> 时间：2013-01-03T15:41:42.593
> 
> 标签：python, celery

如何以编程方式使用 Python 代码列出当前工作人员及其相应的`celery.worker.consumer.Consumer`实例？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-07T08:37:11.883

您可以使用[celery.control.inspect](http://docs.celeryproject.org/en/master/userguide/workers.html#inspecting-workers)来检查正在运行的工作人员：

```
>>> import celery
>>> celery.current_app.control.inspect().ping()
 {u'celery@host': {u'ok': u'pong'}} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-07-08T16:15:37.403

简短的回答：

`your_celery_app.control.inspect().stats().keys()`

一般来说，该`stats()`词典提供了很多信息。这是一个示例值：

```
{u'broker': {u'alternates': [],
             u'connect_timeout': 4,
             u'heartbeat': 0,
             u'hostname': u'mypcisdabom',
             u'insist': False,
             u'login_method': u'AMQPLAIN',
             u'port': 5672,
             u'ssl': False,
             u'transport': u'amqp',
             u'transport_options': {},
             u'uri_prefix': None,
             u'userid': u'celeryabuser',
             u'virtual_host': u'celeryvhost'},
 u'clock': u'182309',
 u'pid': 1660,
 u'pool': {u'max-concurrency': 1,
           u'max-tasks-per-child': u'N/A',
           u'processes': [2496],
           u'put-guarded-by-semaphore': True,
           u'timeouts': [0, 0],
           u'writes': u'N/A'},
 u'prefetch_count': 4,
 u'rusage': u'N/A',
 u'total': {u'mymodule.my_func': 8}}, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:43:11.840

如果您将`--events`在启动时添加密钥。您可以检查此模块以检查当前工作人员等。[http://docs.celeryproject.org/en/latest/userguide/monitoring.html](http://docs.celeryproject.org/en/latest/userguide/monitoring.html)

# wordpress - WP 电子商务 Wordpress 插件登录/注册表格

> ID：14142151
> 
> 赞同：0
> 
> 时间：2013-01-03T15:41:45.260
> 
> 标签：wordpress

当非用户转到结帐页面时，如何将他们重定向到登录/注册页面？

# google-apps-script - 列表框中项目的不同项目样式

> ID：14142163
> 
> 赞同：0
> 
> 时间：2013-01-03T15:42:24.540
> 
> 标签：google-apps-script

由于列表框只接受字符串作为项目，有没有办法添加不同风格的项目？有任何课程可以做到这一点吗？例如：红色项目 1 绿色项目 2

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:58:23.153

```
var tree = app.createTree();
tree.addItem(app.createTreeItem(
    app.createLabel("Tree Item 1").setStyleAttribute("color","green")));
tree.addItem(app.createTreeItem(
    app.createLabel("Tree Item 2").setStyleAttribute("color","red"))); 
```

**编辑：**对不起，你说 List 但我出于某种原因阅读了 Tree。

不，这不能完成，因为底层浏览器列表小部件不支持它。使用 HtmlService 和 jQuery 可以实现大致相似的东西，但在 UiApp 中却不行。

# jquery - JQuery Toggle 在 Wordpress 网站上不起作用

> ID：14142164
> 
> 赞同：0
> 
> 时间：2013-01-03T15:42:24.060
> 
> 标签：jquery, wordpress, toggle

大家好，我在我的 Wordpress 网站上使用 JQuery 来切换 div 时遇到了一些麻烦。我设法在页面加载时隐藏了 div，但无法将其切换为显示和隐藏。这是我的代码：

```
<a class="clicker" href="#">Click here</a>

<div class="slider home-border-center" id="#">
blah blah blah
</div>

<script type="text/javascript">
jQuery.noConflict();

// Use jQuery via jQuery(...)
jQuery(document).ready(function(){
    jQuery(".slider").hide();

    JQuery(".clicker").click(function(){
        JQuery(".slider").toggle();
    });
});

</script> 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:44:26.023

改变：

jQuery

到：

jQuery

因为变量和函数名是区分大小写的。

所以：

```
<a class="clicker" href="#">Click here</a>

<div class="slider home-border-center" id="#">
blah blah blah
</div>

<script type="text/javascript">
jQuery.noConflict();

// Use jQuery via jQuery(...)
jQuery(document).ready(function(){
    jQuery(".slider").hide();

    jQuery(".clicker").click(function(){
        jQuery(".slider").toggle();
    });
});

</script> 
```

# .htaccess - 使用 htaccess 从 URL 替换 + 符号

> ID：14142168
> 
> 赞同：1
> 
> 时间：2013-01-03T15:42:34.103
> 
> 标签：.htaccess, replace, character

我想使用 .htaccess 文件更改我网站的 URL：

[http://godofindia.com/Guru+Saint+Mahatma-103/](http://godofindia.com/Guru+Saint+Mahatma-103/)

至

[http://godofindia.com/Guru-Saint-Mahatma-103/](http://godofindia.com/Guru-Saint-Mahatma-103/)

我只想将 + 号替换为 - 号

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:22:13.143

我发现了同样的问题，所以我使用“%20”而不是“+”号。

您可以查看它在大多数情况下都可以使用。在许多站点中，如果您编写“test+play”或“test%20play”，两者的工作方式相同

愿这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T10:12:29.633

尝试：

重定向匹配 301 ^/(.*)\%2[Cc]$ /$1-$2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:15:10.750

我认为使用普通的.htaccess 是不可能的。如果您真的需要更改 URL，我会使用一个小脚本（即 PHP）来处理替换：

```
<?php
$uri = $_SERVER['REQUEST_URI'];

$new_uri = str_replace('+', '-', $uri);

header('Location: ' . $new_uri); 
```

然后，使用 RewriteRule 将请求重写到该脚本：

```
RewriteEngine On
RewriteRule ^.*+.*$ rewrite-plus.php 
```

# ios - 替换 AppStore 上的应用

> ID：14142169
> 
> 赞同：7
> 
> 时间：2013-01-03T15:42:36.583
> 
> 标签：ios, app-store

我在 AppStore 上有一个应用程序，我想用 StoryBoard 改进它。有人建议我从头开始构建一个新应用程序，而不是尝试将情节提要添加到旧应用程序中。所以我已经这样做了，现在我想将它上传到 AppStore 并替换旧的。

我了解捆绑标识符和应用程序名称必须相同。我必须确保其他任何东西都相同吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T15:52:44.220

是的，你可以做到这一点没问题。

只需确保使用与原始应用程序相同的应用程序包标识符，即 com.companyname.appname。

然后使用您通常使用的相同分发许可证。

您必须发布新应用程序作为旧应用程序的更新，但除此之外您可以更改任何其他内容。

您还必须使新版本号大于当前应用程序的版本号。

对于用户来说，它看起来像是一次正常的更新，但在后台你将基本上替换了整个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:52:19.010

您可以将其视为您的应用程序的更新。

`Bundle version`应该比以前更高（例如，如果前一个是 1.0，则为 1.1 或 2.0） - 这通常取决于用户认为差异有多大。

另外：如果您将任何内容保存到`documents`文件夹，请确保新版本与旧数据兼容。

新版本应该可以在设备上运行：

*   如果安装了（任何）以前的版本
*   如果您的应用之前没有安装过

# emacs - Emacs：在命令上定义自定义钩子

> ID：14142173
> 
> 赞同：3
> 
> 时间：2013-01-03T15:42:44.603
> 
> 标签：emacs, hook

有没有办法挂钩命令 A，以便在 A 执行后始终调用 B？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T16:25:45.630

我认为最直接的方法是通过使用[建议](http://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html)来实现这一点。你会做一些类似的事情：

```
(defadvice command-A (after b-after-a activate)
  "Call command-B after command-A"
  (command-B)) 
```

这种方法的优点是即使重新定义了 command-A 也能正常工作。但是，它不适用于宏或从 C 代码调用的原始函数。但是，在实践中，建议这些功能的想法很少见。

也就是说，仅仅定义一个新命令 ( `command-C`) 可能值得研究，它首先调用`command-A`然后`command-B`.

您还可以玩弄[符号函数间接](http://www.gnu.org/software/emacs/manual/html_node/elisp/Function-Indirection.html)并编写新命令。

这有点取决于您要解决的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T16:25:58.710

您可以使用 defadvice 为函数提供建议：

```
;; This is the original function command-A
(defun command-A () (do-it))

;; This call will cause (do-sometihng-after-command-A) to be called 
;; every-time (command-A) is called.
(defadvice command-A (after after-command-A)
    (do-something-after-command-A))

;; Enable the advice defined above
(ad-activate 'command-A) 
```

有关更多信息和示例，请参阅信息节点 (elisp)Advising Functions。

# c# - 为什么我的 ASP.NET 4.0 中的 CustomValidator 不工作？

> ID：14142174
> 
> 赞同：2
> 
> 时间：2013-01-03T15:42:47.607
> 
> 标签：c#, asp.net

ASP.NET 中的控件

```
<asp:TextBox ID="txtEnd" runat="server" placeholder="12:59"></asp:TextBox>
<asp:RadioButtonList ID="rblTime2" runat="server" RepeatDirection="Horizontal" RepeatLayout="Flow">
    <asp:ListItem>AM</asp:ListItem>
    <asp:ListItem>PM</asp:ListItem>
</asp:RadioButtonList> 
```

自定义验证器

```
<asp:CustomValidator ID="ValidateStartTime" ControlToValidate="txtEnd" OnServerValidate="ValidateStartTimeFun" runat="server" ErrorMessage="*required"></asp:CustomValidator> 
```

代码隐藏

```
protected void ValidateStartTimeFun(object source, ServerValidateEventArgs args)
{
    try
    {   if (txtStart.Text != "" && rblTime.SelectedValue != null )
        { args.IsValid = true; }}
    catch (Exception ex)
        { args.IsValid = false; }
} 
```

如果我将整个 CodeBehind 更改为此，它甚至不会给我一个 *required；

```
protected void ValidateStartTimeFun(object source, ServerValidateEventArgs args)
{
    args.isValid = false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:46:23.687

如果您正在验证空输入，如果您设置`ControlToValidate`属性并且不将`ValidateEmptyText`属性设置为 ，则不会触发自定义验证器`true`，否则框架会要求您使用`RequiredFieldValidator`.

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.validateemptytext.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.validateemptytext.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:48:10.657

如果您设置`ControlToValidate`属性，`CustomValidator`如果用户不输入/选择任何内容，则不会触发。但是如果你省略它，它会在提交表单时触发。

所以删除它。

```
<asp:CustomValidator ID="ValidateEndTime" 
    OnServerValidate="ValidateEndTimeFun" 
    runat="server" ErrorMessage="*required">
</asp:CustomValidator> 
```

由于您要验证多个控件，我会这样做，否则您也可以将[`ValidateEmptyText`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.validateemptytext.aspx)属性设置`true`为 gfyans 提到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:51:54.750

我认为缺少[ValidationGroup](http://msdn.microsoft.com/en-us/library/ms227424%28v=vs.100%29.aspx)元素。

您也应该对验证器和按钮使用相同的值`ValidationGroup`（或使用 Page 的方法以编程方式检查它`Validate`）必须检查该值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:53:28.633

我已经很久没有在没有更新面板的情况下使用它了，因为这也是我在 Sarawut Positwinyu 找到的答案：

```
Custom Validator, when placing in formview will not show its error message after
server-side validation (though it has been validated and result is invalid) the 
mean to fix this in to wrap it by a Update Panel. 
```

我还记得总是为所有经过验证的控件输入validationgroup="name of the group"，并将自定义验证器的validateemptytext 设置为true。

[答案参考](https://stackoverflow.com/questions/4704601/why-the-error-message-for-custom-validator-is-not-shown-in-message-box)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T16:27:21.400

为什么不对不同的控件使用不同的验证器？并且要在服务器中使用自定义验证器，只需丢弃标签中的 ControlToValidate 属性。并检查您在后面的代码中使用的条件。

# jquery - jQuery随机淡入淡出与悬停

> ID：14142182
> 
> 赞同：0
> 
> 时间：2013-01-03T15:43:22.893
> 
> 标签：jquery, fadein, fadeout, jquery-hover

我得到了一些关于 jQuery 的淡入淡出帮助，但它并没有按照我需要的方式工作。这是脚本：

```
$(document).ready(function(){
  $("#trivlimp").hover(function(){
    $("#trivlimp").fadeToggle("slow");
    $("#imp").fadeToggle("slow");
  });
}); 
```

当我将鼠标悬停在“trivlimp”上时，它不仅显示我想要的内容，而是不断淡入和淡出，而不是仅显示“imp”的内容，然后在我停止悬停时淡出。当您将鼠标悬停在左侧的迷你配置文件上时，您可以在此处看到我想说的示例。[http://trivli.b1.jcink.com/index.php?showtopic=2&st=0&#entry2](http://trivli.b1.jcink.com/index.php?showtopic=2&st=0&#entry2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:00:56.223

这实际上是正常行为：

您使用悬停功能隐藏#trivlimp。它很好地淡出，但是当它完全淡出时，您将鼠标悬停在“out”元素上，并且 fadetoggle 被切换为再次淡出。这次它会淡入。因为它已经淡入，你再次悬停元素，它就会淡出等等......

尝试在淡入淡出完成后添加具有隐藏、无、块或内联等显示设置的类。

```
$("#trivlimp").fadeToggle("slow").addclass("hidden");
$("#imp").fadeToggle("slow").addclass("visible); 
```

就我个人而言，我认为这不是最佳实践……我建议您使用 mouseOver 和 mouse out 来切换效果并自己添加/删除类。

```
$("#wrapper").mouseover(function() {
    $("#trivlimp").fadeOut("slow");
    $("#imp").fadeIn("slow");
}).mouseout(function() {
    $("#trivlimp").fadeIn("slow");
    $("#imp").fadeOut("slow");
}); 
```

这样你就可以更好地控制你正在做的事情（好吧，它需要更多的打字，但结果是最重要的......）

*编辑：对不起，我没有想得太直，你必须在它周围添加一个包装器，因为我编写的代码将给出与你相同的结果......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:48:41.660

将它们放入容器中，将悬停效果放在容器上，然后显示隐藏子项。

示例：http: [//jsfiddle.net/TX4g5/6/](http://jsfiddle.net/TX4g5/6/)

代码：JS

```
$(document).ready(function(){
  $("#wrapper").hover(function(){
    $("#wrapper p:first-child").fadeToggle("slow");    
$("#wrapper p:last-child").fadeToggle("slow");

  });
});​ 
```

HTML：

```
<div id="wrapper">
    <p>Normal visible</p>
    <p style="display:none">Visble when hovered</p>
</div>​ 
```

CSS：

```
/*CSS so  both p elements are above each other*/
#wrapper {
    position: relative;
}
#wrapper p{
    position: absolute;
    top: 0;
    left: 0;
} 
```

​</p>

# c - Glade-GTK+ C 语言：如何使用 FileChooserButton 获取文件名？

> ID：14142183
> 
> 赞同：2
> 
> 时间：2013-01-03T15:43:30.563
> 
> 标签：c, user-interface, gtk, glade

我是这个林间空地的新手（也是这个论坛的新手），并且想知道你们中的任何人是否可以帮助我：

我必须获取用户从选择器按钮中选择的文件名，并将其作为字符串发送给函数。不幸的是，我一直收到这个烦人的错误：

> Gtk-CRITICAL **：IA__gtk_file_chooser_get_uri：断言“GTK_IS_FILE_CHOOSER（选择器）”失败

我认为这是由于错误使用了小部件。有人可以帮我解决这个问题吗？源代码如下，如您所见，它来自[https://live.gnome.org/Glade/Tutorials](https://live.gnome.org/Glade/Tutorials)上的 Glade-GTK 教程。

该程序是一个简单的 2 按钮窗口：第一个按钮是文件选择器按钮，第二个是标准按钮，单击时调用“clica”函数。它应该显示用户通过文件选择器按钮选择的文件名，但那是发生错误的时候。

测试源（只是为了弄清楚如何使用小部件）：

```
#include <gtk/gtk.h>

int
main( int    argc,
      char **argv )
{
    GtkBuilder *builder;
    GtkWidget  *window;
    GError     *error = NULL;

    /* Init GTK+ */
    gtk_init( &argc, &argv );

    /* Create new GtkBuilder object */
    builder = gtk_builder_new();
    /* Load UI from file. If error occurs, report it and quit application.
     * Replace "tut.glade" with your saved project. */
    if( ! gtk_builder_add_from_file( builder, "tut.glade", &error ) )
    {
        g_warning( "%s", error->message );
        g_free( error );
        return( 1 );
    }

    /* Get main window pointer from UI */
    window = GTK_WIDGET( gtk_builder_get_object( builder, "window1" ) );

    /* Connect signals */
    gtk_builder_connect_signals( builder, NULL );

    /* Destroy builder, since we don't need it anymore */
    g_object_unref( G_OBJECT( builder ) );

    /* Show window. All other widgets are automatically shown by GtkBuilder */
    gtk_widget_show( window );

    /* Start main loop */
    gtk_main();

    return( 0 );
}

void clica(GtkFileChooser *filechooserbutton1){//this button was inserted through Glade
   char cNome[250];
      *cNome = gtk_file_chooser_get_uri(GTK_FILE_CHOOSER(filechooserbutton1));

      printf("\n%s", cNome);

} 
```

格莱德文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <requires lib="gtk+" version="2.24"/>
  <!-- interface-naming-policy project-wide -->
  <object class="GtkWindow" id="window1">
    <property name="can_focus">False</property>
    <child>
      <object class="GtkHBox" id="hbox1">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <child>
          <object class="GtkFileChooserButton" id="filechooserbutton1">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
          </object>
          <packing>
            <property name="expand">True</property>
            <property name="fill">True</property>
            <property name="position">0</property>
          </packing>
        </child>
        <child>
          <object class="GtkButton" id="button1">
            <property name="label" translatable="yes">button</property>
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="receives_default">True</property>
            <property name="use_action_appearance">False</property>
            <signal name="clicked" handler="clica" swapped="no"/>
          </object>
          <packing>
            <property name="expand">True</property>
            <property name="fill">True</property>
            <property name="position">1</property>
          </packing>
        </child>
      </object>
    </child>
  </object>
</interface> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:41:19.913

**2013 年 4 月 1 日更新（现在我们有了林间空地文件）**

我们现在可以看到您使用了错误对象的信号。您将“clica”回调连接到 GtkButton“button1”的“clicked”信号，而不是将其连接到 GtkFileChooserButton“filechooserbutton1”。

**原始答案：** 没有林间空地文件，我们无法看到您连接了哪些信号，而不是它们连接的信号。但是，您可能没有遵循信号的原型。如果断言失败，这意味着在你的回调中，你认为是 GtkFileChooser 的第一个参数是别的东西。

# visual-studio-2010 - 实体框架 5 - 列名无效 - 逆向工程师代码优先

> ID：14142186
> 
> 赞同：3
> 
> 时间：2013-01-03T15:43:49.937
> 
> 标签：visual-studio-2010, entity-framework, ef-code-first, entity-framework-5

使用**Entity Framework 5**、**Visual Studio 2010**和**Entity Framework Power Tools (Beta 2)**扩展。

这是我的数据库表结构：

![数据库表结构](../Images/2c5f3e172ec6a1a469420f3c5a111108.png)

我使用了上述扩展的**逆向工程师代码优先**功能，它生成了 POCO 类和一些“映射”文件（不确定这是否是正式用语）和单个 DbContext 派生类。除了我接下来描述的变化之外，所有这些生成的类都是由电动工具生成的。

在 Category.cs 文件中，我添加了以下代码来帮助将对象图展平一点：

```
private ICollection<Product> m_Products = null;
public ICollection<Product> Products
{
    get
    {
        if (m_Products == null)
        {
            m_Products = new List<Product>();
            foreach (var categoryProduct in CategoryProducts)
            {
                m_Products.Add(categoryProduct.Product);
            }
        }
        return m_Products;
    }
    set { m_Products = value; }
} 
```

我得到以下异常，我知道这一定与映射有关，但我无法完全弄清楚这一点。

```
Unhandled Exception: System.Data.EntityCommandExecutionException: An error occurred while 
executing the command definition. See the inner exception for details.
 ---> System.Data.SqlClient.SqlException: 
      Invalid column name 'Category_CategoryId'. 
```

如果我需要发布更多信息，例如映射的细节，请告诉我，我会做的。我想尽可能地简短，但我意识到我已经省略了一些东西，对于那些不熟悉该工具生成的代码的人来说，可能会让人们想要了解更多细节。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:55:14.820

您已向模型添加了导航属性，因此 EF 正在尝试将其映射到您的数据库。“代码优先”意味着您的代码模型定义了您的数据库模式。

尝试将该`[NotMapped]`属性添加到您的辅助属性中，以告诉 EF 忽略它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:09:42.187

如果您已经自动创建了数据库方案并且您没有使用 (DropDatabaseAlways/DropDatabaseIfModelChanges) 之类的策略 - 换句话说：您确实处于逆向工程中，您似乎必须在“类别”表上手动添加“类别 ID”列。

如果您不想使用该属性（我的意思是在 DB 中），您可以使用 Data Annotation`[NotMapped]`或 Fluent API`modelBuilder.Entity<Category>().Ignore(x=> x.CategoryId)`

最后，问题可能出在映射中。我不知道您使用的是数据注释还是 Fluent API，但 EF 可能会自动查找某些 db 列（从模型派生的逻辑行为）并且找不到它。在这种情况下，我建议您修改映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T01:14:24.483

OP 已经解决了他们的问题，但是我在使用不同的解决方案时遇到了类似的错误。所以在这里以防其他人需要它：

我在实体之间的 0..1 关系的一侧缺少导航属性。一旦我向缺少它的实体添加了适当的导航属性，问题就解决了。

更多细节：我使用 FK 有两个具有 0..1 关系的实体。实体 A（父）对实体 B（子）有一个 FK。子实体B对实体A有导航属性，而A对B没有**导航**属性，加上这个后，问题就解决了。

# java - 使用 JDBC 连接多个数据库

> ID：14142188
> 
> 赞同：0
> 
> 时间：2013-01-03T15:43:50.673
> 
> 标签：java, database, jdbc

我正在使用这样的代码连接到 Java 中的数据库：

```
Connection conn = null;
Statement stmt = null;
ResultSet rs = null;

String url = "jdbc:mysql://localhost:3306/mydb";
String user = "root";
String password = "Pass"; 
```

我通过执行 sql 查询从数据库中获取数据：

```
String sqlQuery = "Select queryID from test_data_solution";
rs = stmt.executeQuery(sqlQuery);
... 
```

但我需要在 MySQL 服务器中连接另一个数据库模型。我将使用来自另一个数据库中的表的内部联接。如何在同一个 Java 程序中连接到另一个数据库或从另一个数据库获取数据？我想运行如下代码：

```
select * 
from mydb.test_data_solution 
inner join anotherdb.queryid_tokensid 
    on test_data_solution.queryid = queryid_tokensid.queryid 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T15:51:26.560

您可以通过指定它们所在的数据库来引用表并进行跨数据库查询。例如

```
String sqlQuery = "Select t.queryID, x.someCol from mydb.test_data_solution t JOIN otherdb.some_table x ON t.queryID = x.queryID"; 
```

# javascript - 用于在 javascript 中的单词边界上包装 span 标签中的每个单词的正则表达式

> ID：14142192
> 
> 赞同：1
> 
> 时间：2013-01-03T15:44:07.223
> 
> 标签：javascript, regex

我想将字符串的每个单词包装在`<span>`标签中，而不破坏任何现有的 html 标签，也不包括任何标点符号。

例如以下字符串：

`This... is, an. example! <em>string</em>?!`

应包装为：

```
<span>This</span>... <span>is</span>, <span>an</span>. <span>example</span>! 
<span><em>string</em></span>?! 
```

理想情况下，我只需要包装这些词而不需要其他任何东西。

除了撇号，它们也应该被包裹起来。

`it's`=>`<span>it's</span>`

`give 'em`=>`<span>give</span> <span>'em</span>`

`teachers'`=>`<span>teachers'</span>`

现在我正在使用一个非常简单的正则表达式：

```
str.replace(/([^\s<>]+)(?:(?=\s)|$)/g, '<span>$1</span>'); 
```

我在stackoverflow的某个地方找到了它。但它只将每个单词都包含在空格上，并且也包含标点符号，这在我的情况下是不可取的。

我知道我应该为正则表达式如此糟糕而感到羞耻。

有人可以帮帮我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:52:51.643

试试这个正则表达式：

```
var str = "This string... it's, an. example! <em>string</em>?!";
str.replace(/([A-Za-z0-9'<>/]+)/g, '<span>$1</span>');

// "<span>This</span> <span>string</span>... <span>it's</span>, <span>an</span>. <span>example</span>! <span><em>string</em></span>?!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-10T01:27:59.267

我到处玩，让它工作：

```
String toMarkUp = "Each word needs a strong tag around it.  I really want to wrap each and every word";

String markedUp = toMarkUp.replaceAll("\\b(\\w+)\\b","<span>$1</span>"); 
```

正则表达式捕获每个由单词边界包围的具有 1 个或多个字符 (\w+) 的单词，并使用正向查找组在替换中使用 $1 来引用它，1 是正则表达式中的第一个捕获组。

输出 ：

```
<span>Each</span> <span>word</span> <span>needs</span> <span>a</span> <span>strong</span> <span>tag</span> <span>around</span> <span>it</span>.  <span>I</span> <span>really</span> <span>want</span> <span>to</span> <span>emphasize</span> <span>each</span> <span>and</span> <span>every</span> <span>word</span> 
```

# python - 是否有 Tkinter / 网格几何图形的 GUI 设计应用程序？

> ID：14142194
> 
> 赞同：58
> 
> 时间：2013-01-03T15:44:18.073
> 
> 标签：python, grid, tkinter

有谁知道一个 GUI 设计应用程序，它可以让您选择/拖放小部件，然后使用`grid`几何管理器通过适当的 Tkinter 调用和排列将该布局转换为 Python 代码？到目前为止，我已经找到了一些我最终可能会使用的非常好的选项，但它们使用其中一个`pack`或`place`代替生成代码。

=========

**编辑：请注意，这不是寻求“建议”本身，而是事实调查。我在问这样的应用程序是否存在。**

=====

在你说之前：是的，我知道 Tkinter 很容易学习，是的，我已经找到了多个在线资源来帮助我这样做，而且我已经在路上了。这不是要避免学习的努力，而是要使用正确的工具来完成工作。我很久以前就发现，当项目超过一定规模时，那些用于编码程序逻辑的拖放小部件环境太笨拙且难以管理——对于更大的东西，构建和维护逻辑更容易当它是纯文本时。最近，我发现设计 GUI 的情况正好相反。编写文本在一定程度上是可行的，但是当您有一个包含 30 或 40 个小部件的主窗口，以及几个具有相似复杂性的侧窗口时，

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-03-14T20:39:13.243

除了其他答案中已经给出的选项外，还有一个当前更活跃、最近和开源的项目，名为[`pygubu`](https://github.com/alejandroautalan/pygubu).

这是作者取自 github 存储库的第一个描述：

> Pygubu 是一个 RAD 工具，可以快速轻松地为 python tkinter 模块开发用户界面。
> 
> 设计的用户界面保存为 XML，通过使用 pygubu 构建器，这些可以由应用程序根据需要动态加载。Pygubu 的灵感来自 Glade。

* * *

[Pygubu hello world 程序](https://www.youtube.com/watch?v=wuzV9P8geDg)是一个介绍性视频，解释如何使用`Pygubu`.

以下`pygubu`是 OS X Yosemite 10.10.2 上最新版本设计器的界面图像：

![在此处输入图像描述](../Images/e878c5aa9378928579c0bc62ca7b32ec.png)

我一定会试一试，并为它的发展做出贡献。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-03T15:53:31.920

你有**VisualTkinter**，也称为 Visual Python。发展似乎并不活跃。你有[sourceforge](http://sourceforge.net/projects/visualtkinter/files/?source=navbar)和[googlecode](http://code.google.com/p/visualtkinter/downloads/list)网站。网站[在这里](http://visualtkinter.sourceforge.net/download.htm)。

另一方面，您的[**PAGE**](http://page.sourceforge.net/)看起来很活跃，并且可以在 python 2.7 和 py3k 中使用

正如您在评论中指出的那样，这些都没有使用`grid`几何。据我所知，唯一这样做的 GUI 构建器可能是**Komodo Pro GUI Builder**，它已停产并在 ca 中开源。2007\. 代码位于[SpecTcl 存储库](http://sourceforge.net/projects/spectcl/files/?source=navbar)中。

在win7上似乎可以正常安装，虽然还没有使用过。这是我电脑的截图：

![在此处输入图像描述](../Images/d0249500eb39d65139e672b51baf0e7c.png)

顺便说一句，[Rapyd Tk](http://www.bitflipper.ca/rapyd/)还计划实施网格几何，因为它的文档中说它还没有准备好。不幸的是，它似乎“几乎”被放弃了。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-01-03T17:34:04.460

恕我直言，使用网格进行布局的最佳工具是方格纸和铅笔。我知道你要求某种类型的程序，但它确实有效。我已经做了几十年的 Tk 编程，所以布局对我来说很容易，但是当我有一个复杂的 GUI 时，我仍然会打破方格纸。

要考虑的另一件事是：Tkinter 几何管理器的真正强大之处在于将它们一起使用*。如果您打算只使用网格或只使用包装，那么您做错了。相反，首先在纸上设计您的 GUI，然后寻找最能由其中一种解决的模式。Pack 是某些类型布局的正确选择，而 grid 是其他类型的正确选择。对于极少数的问题，地点是正确的选择。不要将您的想法限制在仅使用一种几何管理器。

* 使用这两种几何管理器的唯一警告是每个容器只能使用一个（容器可以是任何小部件，但通常是框架）。

# visual-studio - 在 Visual Studio 中使用计时器进行 Web 负载测试

> ID：14142199
> 
> 赞同：1
> 
> 时间：2013-01-03T15:44:34.197
> 
> 标签：visual-studio, load-testing, coded-ui-tests

我需要产生一些延迟以使负载测试更加现实。在 Visual Studio 中，我发现了 2 种延迟负载测试中事务执行的方法：

*   转换为代码

或者

*   将“思考时间”设置为事务中的第一个请求

这里的最佳做法是什么。我不完全确定 Visual Studio 以顺序方式执行这些测试，因此第二个选项可能会返回错误结果。

另一方面，如果我从记录的测试生成代码，我将失去从 Visual Studios UI 更改设置的能力。这大大增加了编辑测试的时间。

有没有比我的任何方法更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:42:33.443

我相信第二种方式更安全。

请记住，它`Think Time`适用于每个`Test Run`而不是每个包含`Test`。因此，如果您有一个`Load Test`包含多个测试`Test Mix`的 Think Time 将在测试运行结束时应用（当所有包含的测试都完成时）。

此外，如果您有多个虚拟用户，由于这是一项负载测试，因此 Think Time 将分别应用于每个用户。例如，如果您有 100 个用户，那么他们将同时开始测试，但他们可能不会同时完成它们。每个用户将根据 Think Time 等待开始第二次测试，而无需等待其他用户完成他们的第一次测试。

# svn - 我在 Windows 8 - 64 位下的 Windows 资源管理器的上下文菜单中看不到龟 svn 项目

> ID：14142200
> 
> 赞同：1
> 
> 时间：2013-01-03T15:44:34.863
> 
> 标签：svn, windows-8, tortoisesvn, 64-bit, windows-explorer

我安装了两次（每次安装后重新启动windows）我也尝试了32位版本，但结果是一样的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T01:35:58.517

The 32-bit version of Tortoise SVN will not work with the 64-bit (default) Windows Explorer at all. Are you *certain* that you've installed the 64-bit version?

The linked topic is only applicable if your working copies aren't being recognized. Are you getting *any* TSVN context menus? What folders are you attempting to use it with?

# ruby-on-rails - 使用 git clone 时找不到表“用户”

> ID：14142204
> 
> 赞同：0
> 
> 时间：2013-01-03T15:44:44.447
> 
> 标签：ruby-on-rails, clone

我做了一个项目并通过以下命令将其推送到 github：

```
step 1) create a new repository, is called: todolist 
```

进而：

```
$ git init
$ git add .
$ git commit -m "My first application"
$ git remote add origin https://github.com/alonshmiel/todolist.git
$ git pull origin master
$ git push origin master 
```

**我运行：git pull origin master，因为我在 之前阅读了一个主题`push`，我们需要`pull`**

这是我的存储库的网址：

```
https://github.com/alonshmiel/todolist.git 
```

在我的项目中，我定义了`db/seeds.rb`：

```
Role.create({name: "Admin"})
Role.create({name: "Worker"})

user1 = User.create!(
    email: "admin216@gmail.com",
    password: "12345678",
    password_confirmation: "12345678"
)
user1.role_ids = [1]

user2 = User.create!(
    email: "worker216@gmail.com",
    password: "12345678",
    password_confirmation: "12345678"
) 
```

当我运行下一个命令时：

```
git clone https://github.com/alonshmiel/todolist.git 
```

我的项目已加载到我的计算机上。

所以我跑：

`rails s`并输入 to `localhost:3000`，但出现错误：

```
Could not find table 'users' 
```

有人可以告诉我问题是什么吗？任何帮助表示赞赏！

**更新：**

我跑：

```
$ bundle exec rake db:migrate
$ bundle exec rake db:seed 
```

但现在，我得到了一个错误：

> [http://localhost:3000/](http://localhost:3000/)上的网站似乎不可用。确切的错误是：
> 重定向太多

在我将它上传到github之前，这个错误并没有出现在我的真实项目中。

这是我的`application_controller`：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :authenticate_user!

  rescue_from CanCan::AccessDenied do |exception|
    redirect_to root_url, :alert => exception.message
  end

  def after_sign_out_path_for(user)
    new_user_session_path
  end

end 
```

这些是我的其他控制器：

```
class TasksadminsController < ApplicationController

  load_and_authorize_resource :except => [:update, :show]

  def index
  ....
end

class WorkersController < ApplicationController

  load_and_authorize_resource :except => [:edit, :update]

  def index
  ....
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:25:14.123

克隆应用程序后，您需要将数据库升级到最新版本。您可以通过运行：

```
rake db:migrate 
```

要将数据`db/seeds.rb`放入数据库中，您需要运行：

```
rake db:seed 
```

“重定向太多”错误可能是由于重定向时`CanCan::AccessDenied`抛出的。我怀疑您的`root_url`is 也需要身份验证，这会导致另一个`CanCan::AccessDenied`，它重定向到`root_url`and on 和 on 。

您应该重定向到未经身份验证的页面，例如注册页面。

# objective-c - 等待代码块在串行调度队列上执行

> ID：14142206
> 
> 赞同：0
> 
> 时间：2013-01-03T15:45:10.223
> 
> 标签：objective-c, thread-safety, grand-central-dispatch

所以我有一个准备代码块并安排它在串行调度队列上同步运行的函数。我知道这个串行队列将在一个新线程上运行。然而，问题在于代码块修改了一个变量，该变量将其传递回函数，而函数又期望将其作为返回值返回。下面的代码将有助于澄清情况：

```
-(DCILocation*) getLocationsByIdentifier: (NSString*) identifier andQualifier: (NSString*) qualifier {

    __block DCILocation* retval = nil;

    NSString* queryStr = [self baseQueryWithFilterSet:nil];
    queryStr = [queryStr stringByAppendingString:@" (identifier = ? OR icao = ?) AND qualifier = ?"];

   [self.queue inDatabase:^(FMDatabase *db) {
        FMResultSet* results = [db executeQuery:queryStr,
                               [identifier uppercaseString],
                               [identifier uppercaseString],
                               [qualifier uppercaseString]];
        if ((nil != results) && [results next]) {
             dispatch_async(dispatch_get_main_queue(), ^{
                 retval = [DCIAirportEnumerator newAirportForStatement:results];
             });
            [results close];
        }
   }];

   return retval;
} 
```

“self.queue”是块将在其上运行的串行调度队列。请注意，该块修改了“retval”并通过将 dispatch_async 调用嵌套到主线程来更新它。然而，令人担忧的是，在串行调度队列上运行的代码块能够修改它之前，可能会调用“return retval”（函数的最后一行）。这将导致返回“nil”。

关于如何确保函数在 retval 被串行队列上执行的块修改之前不会返回的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:53:43.843

> 关于如何确保函数在 retval 被串行队列上执行的块修改之前不会返回的任何想法？

如果您需要等待结果，那么您的代码仍然是同步的，您不妨在您的方法中而不是在串行队列中运行它。所以这是第一个选择：不要在这里使用块。

第二种选择是重构您的代码，使其真正异步运行。找到依赖于返回值的代码`retval`并将其分解为单独的方法或块。然后让设置`retval`调用的块在`retval`完成时传入。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-03T15:48:46.133

在你的块之后，你可以添加

```
while(YES) {
    if(variable) {
        break;
    }
} 
```

然后在`dispatch_async`定义 retval之后添加

```
variable = YES; 
```

您只需要 `__block BOOL variable = NO;`在块之前定义。

# actionscript-3 - 使用 AS3 记录和回放在 Flash 应用程序中所做的操作

> ID：14142208
> 
> 赞同：0
> 
> 时间：2013-01-03T15:45:15.173
> 
> 标签：actionscript-3, flash, adobe

我正在使用 Adob​​e Flash 为 android 创建一个移动应用程序。这是一个钢琴应用程序。我想要的是记录和回放用户使用记录按钮完成的活动。你能提供一些关于如何创建它的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:09:34.687

对于用户每次做某事，制作一个包含足够数据的适当对象来复制事件（也在正确的时间），并将其推送到数组中。（对于您的应用程序中发生的“PlayKeyOnPiano”事件，您应该注意按下了哪个键）

当您想要回放时，您只需在正确的时间根据您记录的事件执行功能。

Fx，如果您在每一帧上执行一个主循环，您可以为该帧中发生的事件保留一个数组。录制时，对于遇到的每个事件，您将其添加到在帧开始时创建的数组中。在帧的末尾，您将此“帧数组”添加到“记录数组”中。当您想要回放时，您每帧增加一个计数器，并使用它来索引记录数组以获取记录的“帧数组”以在该给定帧上执行。

# mule - 如何在不同流之间传播 Mule Correlation ID 或任何其他自定义属性

> ID：14142216
> 
> 赞同：0
> 
> 时间：2013-01-03T15:45:49.403
> 
> 标签：mule

有没有办法`MULE_CORRELATION_ID`在通过不同 JMS 队列的消息中传播。我试过了`OUTBOUND`，元素中的`SESSION`范围`<message-properties-transformer>`但不起作用。其他自定义属性也是如此。

作为一种解决方法，我不得不在中间流中添加消息属性。

看起来出站属性最终在接收端点的入站范围内。我们可以配置此行为吗

样品骡流：

```
<flow name="proxyService">
    <http:inbound-endpoint address="${xxx.service.address}"
        exchange-pattern="request-response">
        <cxf:proxy-service wsdlLocation="classpath:xxx.wsdl"
            namespace="http://xxxx.com/services/abc" service="ABCService" />
    </http:inbound-endpoint>

    <component class="com.xxxx.services.xxx.ABCServiceProxy" />
    <choice>
        <when evaluator="xpath" expression="fn:local-name(/*/*[1])='blah'">             
            <choice>                    
                <when evaluator="xpath"
                    expression="//acord:TXLifeRequest/acord:TransType/@tc='121'">                       
                    <!-- this is asynchronous communication using correlation id -->
                    <message-properties-transformer scope="outbound">
                        <add-message-property key="MULE_CORRELATION_ID"
                    value="#[xpath://abc:XYZRequest/some ID]" />
                    </message-properties-transformer> 
                     <request-reply > 
                        <jms:outbound-endpoint queue="order.queue">
                            <message-properties-transformer scope="outbound">                                   <delete-message-property key="MULE_REPLYTO" />                                  
                            </message-properties-transformer>
                        </jms:outbound-endpoint>
                         <jms:inbound-endpoint queue="status.queue" />
                    </request-reply>                        
                </when>
                <when evaluator="xpath"
                    <!-- other cases -->
                </when>
                <otherwise>
                    <!-- create failure response -->                        
                    <jms:outbound-endpoint queue="mviq.error.queue" />
                </otherwise>
            </choice>
        </when>
        <otherwise>
            <!-- log -->
        </otherwise>
    </choice>
</flow>

<flow name="ProcessOrder">
    <jms:inbound-endpoint queue="order.queue"
        exchange-pattern="one-way" />
    <!-- Storing the payload in another variable because xslt transformer will overwrite it -->
    <set-variable variableName="xxxPayload" value="#[message.payload]" />
    <xm:xslt-transformer xsl-file="xsl/something.xslt" />
    <choice>
        <when expression="'some string'">
            <!-- Overwriting the current payload to original payload -->                <set-payload value="#[xxxPayload]" />
            <logger level="INFO"
                message="payload before pushing to EMSI queue: #[payload]" />
            <jms:outbound-endpoint queue="order.special.queue" />
        </when>
        <when expression="string 2">
            <!-- other case -->
        </when>
        <when expression="'blah">

        </when>
        <otherwise>

            <jms:outbound-endpoint queue="error.queue" />
        </otherwise>
    </choice>
</flow>

<flow name="ProcessingSpecialQueue">
    <jms:inbound-endpoint queue="order.special.queue" />

    <message-properties-transformer doc:name="Message Properties">

        <add-message-property key="MULE_CORRELATION_ID" value="#some value" />
    </message-properties-transformer>

    .... more logic

</flow> 
```

`MULE_CORRELATION_ID`在将消息发送到 之前设置`order.queue`。现在我再次需要将其设置为`order.special.queue`. 现在，如果我需要将消息推送到第三个 jms 队列中，则需要再次设置它。

有没有一种方法可以只设置一次相关 id 并期望它不会在后续队列中丢失。

我正在使用骡 3.3.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:07:59.220

> 有没有办法在通过不同 JMS 队列的消息中传播 MULE_CORRELATION_ID。

这*应该*为您自动完成：如果没有发生，您很可能遇到了错误。骡版？允许重现问题的示例配置？

> 看起来出站属性最终在接收端点的入站范围内。

这是一个功能而不是错误：没有办法关闭它。

**编辑**我已经能够通过您的配置的精简版本重现该问题：

```
<jms:activemq-connector name="jmsConnector"
    specification="1.1" />

<flow name="proxyService">
    <http:inbound-endpoint address="http://localhost:8080/test" />
    <set-property propertyName="MULE_CORRELATION_ID" value="custom_cid" />
    <jms:outbound-endpoint queue="order.queue" />
</flow>

<flow name="ProcessOrder">
    <jms:inbound-endpoint queue="order.queue" />
    <logger message="--> ProcessOrder CID: #[message.correlationId]"
        level="INFO" />
    <jms:outbound-endpoint queue="order.special.queue" />
</flow>

<flow name="ProcessingSpecialQueue">
    <jms:inbound-endpoint queue="order.special.queue" />
    <logger message="--> ProcessingSpecialQueue CID: #[message.correlationId]"
        level="INFO" />
</flow> 
```

IMO Mule 在这里没有做正确的事情，所以我已将此问题报告为错误： http: [//www.mulesoft.org/jira/browse/MULE-6577](http://www.mulesoft.org/jira/browse/MULE-6577)

# css - css定位

> ID：14142219
> 
> 赞同：0
> 
> 时间：2013-01-03T15:45:55.893
> 
> 标签：css

放置某物的正确方法是什么？我有一个在中心显示博客文章的 div。

```
<div class="box">

<?php while ( have_posts() ) : the_post(); ?>
 <article>
  <h2><a href="<?php esc_url( the_permalink() ); ?>"<?php the_title(); ?>" rel="bookmark">      <?php the_title(); ?></a></h2>
  <h7>BY LOUIS MOORE ON</h7> <time datetime="<?php the_time( 'Y-m-d' ); ?>" pubdate><?php the_date(); ?> <?php the_time(); ?></time><?php the_content(); ?></br>    
<div class="h9"></div>
</article></br></br></br>
<?php endwhile; ?>

</div> 
```

CSS：

```
.box {
 text-align: center;
 background-color: #F1F2F2;
 border: 1.5px #D1D3D4 solid;
 border-bottom: 3px solid red;
 margin: 5px;
 padding: 10px;
 min-width: 90%;
} 
```

我想添加“在 Twitter 上关注我”，然后是 Twitter 按钮，但我希​​望它显示在 div 框的右侧。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-25T12:08:15.320

```
.followme {
    position: absolute;

    left:30%;
    bottom: 70%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:50:32.140

`float: right;`

如果您希望它在相同的范围内，它将起作用，如果您希望它在盒子外面，您可以创建一个容器来存储它们。

```
<div class="container">
    <div class="box">...</div>
    <a href="#">Follow me on Twitter</a>
</div>

.contianer a {
    float: right;
} 
```

# scala - 通过 main 方法运行代码

> ID：14142221
> 
> 赞同：0
> 
> 时间：2013-01-03T15:46:00.777
> 
> 标签：scala

当我尝试在 Eclipse 中运行以下代码时，“作为 Scala 应用程序运行”未显示。主要方法定义正确吗？

```
 package week4

    class Nil[T] extends List[T] {
      def isEmpty: Boolean = true
      def head: Nothing = throw new NoSuchElementException("Nil.head")
      def tail: Nothing = throw new NoSuchElementException("Nil.tail")
    }

    trait List[T] {
        def isEmpty: Boolean
        def head: T
        def tail: List[T]
    }

    class Cons[T](val head: T, val tail: List[T]) extends List[T]{
      def isEmpty = false
    }

    object List {
      def apply[T](x1: T, x2: T): List[T] = new Cons(x1, new Cons(x2, new Nil))
      def apply[T]() = new Nil

      def main(args:Array[String]) = {
          println(List(1,4))
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:13:45.673

看起来 eclipse/Scala IDE 很难找到正确的对象，因为有一个同名的特征。

例如，您可以将 main 方法移动到专用对象中：

```
object Main {
  def main(args:Array[String]) = {
    println(List(1,4))
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:17:45.787

如果文件本身位于错误命名的目录中，它不会显示“作为 Scala 应用程序运行” `.scala`- 它必须与包名称的最后一部分命名相同（例如`week4`，在我们的例子中）。

# jquery - 我可以使 div 中的文本不可见但仍然使用空间吗？

> ID：14142222
> 
> 赞同：5
> 
> 时间：2013-01-03T15:46:02.107
> 
> 标签：jquery

我有以下 HTML：

```
<div class="button" id="test1">Login</div> 
```

有没有一种使用 jQuery 的方法可以使文本不可见但仍然占用相同数量的空间？请注意，我仍然需要按钮及其彩色背景可见。只想隐藏文字。那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T15:47:22.657

这会做到的

```
$('#test1').css('opacity','0'); 
```

**更新**

```
<div class="button" id="test1"><span>Login</span></div>

$('#test1').children().css('visibility','hidden'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T15:48:11.517

```
$('.button').css('visibility', 'hidden'); 
```

`visibility:hidden`保持空间原样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:48:09.193

`transparent`是有效的颜色，您可以将其应用于文本：

```
$('#test1').css('color','transparent'); 
```

* * *

与评论相关：

**将颜色设置为透明并存储原始颜色：**

```
$('#test1')
      .each(function(){var o=$(this);
                       if(!o.data('color')){o.data('color',o.css('color'))}})
        .css('color','transparent'); 
```

恢复原色：

```
$('#test1').css( 'color', function(){return $(this).data('color');} ) 
```

# java - 在多维数组中交换位置

> ID：14142223
> 
> 赞同：-2
> 
> 时间：2013-01-03T15:46:03.953
> 
> 标签：java, arrays, variables, multidimensional-array

如何交换多维数组中两个元素的位置？

假设我有一个数组：`int Array[][]`

```
Array={{1,2,3},{2,0,5},{-9,6,5}}; 
```

和类似的方法`void interchange(position1,position2,newposition1,newposition2)`

和声明之类的`interchange(1,1,3,1)`

这样我就得到了这个数组：`{-9,2,3},{2,0,5},{1,6,5}`在正文中复制变量/语句的次数最少。

**编辑：** **我知道基本方法，但希望有人能说出与指针相关的方法。我说“在正文中最少复制变量/语句。” 询问是否有比 assignment 更短的方法**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:50:27.447

伪代码

```
function interchange(position1,position2,newposition1,newposition2) {
    // store the value at (position1,position2)
    var temp = Array[position1][position2]

    // put in (position1,position2) the value at (newposition1,newposition2)
    Array[position1][position2] = Array[newposition1][newposition2]

    // put in (newposition1,newposition2) the value previously stored
    Array[newposition1][newposition2] = temp
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:56:08.193

> 加上试过`Array[1][1]=Array[3][1]`

这行不通，因为你会失去 的价值`[1][1]`，所以看看[Swap](http://en.wikipedia.org/wiki/Swap_%28computer_science%29)

> 交换两个变量的最简单且可能使用最广泛的方法是使用第三个临时变量：

伪代码，而不是 Java：

```
define swap (x, y)
    temp := x
    x := y
    y := temp 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T15:57:24.680

```
public int[][] swap(int[][] target, int xFrom, int yFrom, int xTo, int yTo){
  int temp = target[xTo][yTo];
  target[xTo][xTo] = target[xFrom][yFrom];
  target[xFrom][yFrom] = temp;
  return target;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T15:50:02.797

这个问题有点模糊，但希望这就是你要找的？

```
public int[][] swap(int[][] arr, int ind1, int subind1, int ind2, int subind2) {
    int arg1 = arr[ind1][subind1];
    arr[ind1][subind1] = arr[ind2][subind2];
    arr[ind2][subind2] = arg1;
    return arr;
} 
```

# javascript - 预加载视频文件 - HTML5 播放

> ID：14142226
> 
> 赞同：4
> 
> 时间：2013-01-03T15:46:06.900
> 
> 标签：javascript, jquery, html, video, html5-video

我希望在我的网站首次加载时预加载一些小视频文件。这样它们就可以在用户点击进入网站的某个部分时自动播放和使用。我需要无缝过渡，因此理想情况下应该预加载整个视频文件以避免任何延迟。

我尝试了一些不同的插件，如 html5preloader，以及其他一些 JS 技术来将视频文件加载到页面，但隐藏它们以尝试在我使用它们之前强制浏览器加载视频。

当我需要播放不同的视频时，只换掉视频 src 并没有太大的区别。

实际上是否有适当的解决方案来执行此操作，或者是因为 HTML5 视频播放，浏览器仅在播放文件时部分下载文件？

感谢有关为 HTML5 播放预加载视频文件的任何想法和反馈。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:48:03.813

这样的事情应该有帮助：

```
<video controls="controls" preload="auto">
  <source src="sample.mp4" type="video/mp4" />
  ...
  Your browser does not support the video tag.
</video> 
```

虽然因为 preload="auto" 在浏览器中不一致，但您的里程可能会有所不同。如果这些是非常短的剪辑（您提到 5 秒），那么它可能会相当可靠

# css - 如何将按钮安装到悬停框？并且按钮显示不正确？

> ID：14142228
> 
> 赞同：0
> 
> 时间：2013-01-03T15:46:16.823
> 
> 标签：css, button, window

我以某种方式设法让几乎所有东西都正常工作。但是框 3 中的按钮并没有立即显示，甚至当你将鼠标悬停在它上面时它也会向上一点。如何解决这个问题我整天都在搜索和调整解决方案。

[这](http://jsfiddle.net/2aHeU/10)是小提琴链接：

鼠标悬停：http: [//i.stack.imgur.com/mrLVy.png](http://i.stack.imgur.com/mrLVy.png)

HTML 代码：

```
<br /><br /><br /><br /><br />

<div class="box image1">1</div>
<div class="box image1">2</div>
<div class="box image3"><a class='fb_iframe' href="./">
<div align="center">

<br /><br /><br /><br /><br /><br />
<br /><br /><br /><br /><br /><br />
<br /><br /><br /><br /><br /><br />
<div id="btn">
    <span class="plus">OPDRACHT PLAATSEN</span>
</div> 
```

CSS 代码：正文 {

```
margin:50px 0px; padding:0px;
    text-align:center;

  background-color: white;
}

.box {
  background-color: none;
  width: 200px;
  height: 400px;
  float: left;
  border: 1px solid lightgrey;
  margin: 10px;
}

.image1 {
  background-image:url("http://www.gravatar.com/avatar/8ce7045aad4528bbed3d19fe030c8d85?s=32&d=identicon&r=PG");
}

.image2 {
  background-image:url("http://www.gravatar.com/avatar/8ce7045aad4528bbed3d19fe030c8d85?s=32&d=identicon&r=PG");
}

.image3 {
  background-image:url("http://www.gravatar.com/avatar/8ce7045aad4528bbed3d19fe030c8d85?s=32&d=identicon&r=PG");
}

.box:hover{
  width: 250px;
  /* This is 52px total. 1/2 of that is for top and the other half is for bottom. */
  height: 452px;
  /* Below we are not using -26px for margin-top because .box has 6px border and 10px margin. */
  /* That 16px is then divide by 2 since it's for both top and bottom, or 8px per side. */
  /* Having said that, 26px - 8px is 18px. We need negative value to position it correctly. */
  margin-top: -18px;
 -moz-box-shadow:    0 0 50px black;
 -webkit-box-shadow: 0 0 50px black;
 box-shadow:         0 0 50px black;    
}

@import url(http://fonts.googleapis.com/css?family=Open+Sans);

    height: 100%;
    font-family: 'Open Sans', sans-serif;
}

    height: 100%;
    color: #fff;
    background: #505050;
    background-attachment: fixed;
    background: -webkit-gradient(linear, top, bottom, from(#09465d), to(#0f536e));
    background: -webkit-linear-gradient( 90deg, #09465d, #0f536e);
    background: -moz-linear-gradient(    90deg, #09465d, #0f536e);
    background: linear-gradient(         90deg, #09465d, #0f536e);
}

#btn {
    font-size: 13px;
    text-shadow: 0 -1px 0 rgba(0,0,0,.9);
    margin: 20px;
    background: -webkit-gradient(linear, top, bottom, from(#1d4763), to(#215f86));
    background: -webkit-linear-gradient( 90deg, #1d4763, #215f86);
    background: -moz-linear-gradient(    90deg, #1d4763, #215f86);
    background: linear-gradient(         90deg, #1d4763, #215f86);
    overflow: hidden;
    display: inline-table;
    -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, .25), 0 1px 3px rgba(0, 0, 0, 0.8);
    -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, .25), 0 1px 3px rgba(0, 0, 0, 0.8);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, .25), 0 1px 3px rgba(0, 0, 0, 0.8);
    border-radius: 3px;
    cursor: pointer;

}

#btn:hover {
    background: -webkit-gradient(linear, top, bottom, from(#19405a), to(#1d587d));
    background: -webkit-linear-gradient( 90deg, #19405a, #1d587d);
    background: -moz-linear-gradient(    90deg, #19405a, #1d587d);
    background: linear-gradient(         90deg, #19405a, #1d587d);
    -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, .15), 0 1px 3px rgba(0, 0, 0, 0.9);
    -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, .15), 0 1px 3px rgba(0, 0, 0, 0.9);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, .15), 0 1px 3px rgba(0, 0, 0, 0.9);
    border-radius: 3px;
}

#btn:active {
    background: -webkit-gradient(linear, top, bottom, from(#19405a), to(#1d587d));
    background: -webkit-linear-gradient( 90deg, #19405a, #1d587d);
    background: -moz-linear-gradient(    90deg, #19405a, #1d587d);
    background: linear-gradient(         90deg, #19405a, #1d587d);
    -webkit-box-shadow: inset 0 -1px 0 rgba(255, 255, 255, .15), inset 0 1px 0 rgba(0, 0, 0, .25), 0 1px 1px rgba(0, 0, 0, 0.6);
    -moz-box-shadow: inset 0 -1px 0 rgba(255, 255, 255, .15), inset 0 1px 0 rgba(0, 0, 0, .25), 0 1px 1px rgba(0, 0, 0, 0.6);
    box-shadow: inset 0 -1px 0 rgba(255, 255, 255, .15), inset 0 1px 0 rgba(0, 0, 0, .25), 0 1px 1px rgba(0, 0, 0, 0.6);
    border-radius: 3px;
}
    #btn p, span, p span {
        height: 30px;
        line-height: 30px;
        display: inline-block;
        margin: 0 auto
    }

    #btn p {
        padding: 0 12px;
        border-left: 1px solid rgba(0,0,0,.1);
    }

    #btn span.plus {
        padding: 0 12px;
        font-size: 14px;
        font-weight: bold;
        border-right: 1px solid rgba(255,255,255,.1);
    }

    #btn p span {
        font-size: 12px;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:53:59.087

你关闭 .box:hover 然后再关闭它两次。那里缺少样式吗？

[http://jsfiddle.net/calder12/2aHeU/22](http://jsfiddle.net/calder12/2aHeU/22)

```
.box:hover{
  width: 250px;

  margin-top: -18px;
 -moz-box-shadow:    0 0 50px black;
 -webkit-box-shadow: 0 0 50px black;
 box-shadow:         0 0 50px black;    

} 
```

# excel - 如何在 1000 中查找和替换零而不是 0（使用精确匹配查找和替换） - Excel

> ID：14142233
> 
> 赞同：0
> 
> 时间：2013-01-03T15:46:26.550
> 
> 标签：excel, excel-2010

我有一张混合了数字的表格。我想用“100+”替换所有零，而不是大数字的零，例如 1000。使用正常的查找和替换会将 1000 变成 1100+100+100+，这是错误的。我基本上只需要它来替换所有的零而不是别的。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T16:32:11.627

使用查找和替换时，单击选项，然后选中匹配整个单元格内容。

# vb.net - DateTimePicker 所选日期

> ID：14142235
> 
> 赞同：3
> 
> 时间：2013-01-03T15:46:32.437
> 
> 标签：vb.net, datetimepicker

我的 Visual Basic 项目有一些问题。

我正在制作一个程序，它会显示美国是否有新的电视剧/可供下载（第二天）

（US 和 Torrent 是瑞典语的天数）

![在此处输入图像描述](../Images/b95ce58b0898371965cc271637274f79.png)

所以我已经这样做了，但我想添加一个 DateTimePicker，所以我可以选择一天，然后检查可用的内容。好吧，我注意到 DateTimePicker 总是从当前日期开始，所以我只是像这样添加它：

```
Dim DateTimePickerDay = Me.DateTimePicker1.Value.DayOfWeek.ToString()

Dim USstatus = "Tomorrow"
Dim DownloadStatus = "Today"

If DateTimePickerDay = "Monday" Then
  StatusLabel1.Text = USstatus
  StatusLabel1.ForeColor = Color.Blue
  StatusLabel5.Text = DownloadStatus
  StatusLabel5.ForeColor = Color.Green
  StatusLabel6.Text = DownloadStatus
  StatusLabel6.ForeColor = Color.Green
End If 
```

但现在我希望能够使用 DateTimePicker 更改日期并查看当天可用的内容。因此，我尝试将 Lebel 更改为这样的一天：

```
Private Sub Button11_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button11.Click
  Me.Label4.Text = Me.DateTimePicker1.Value.DayOfWeek.ToString()
End Sub 
```

接着：

```
If Me.Label4.Text = "Monday" Then
  StatusLabel1.Text = USstatus
  StatusLabel1.ForeColor = Color.Blue
  StatusLabel5.Text = DownloadStatus
  StatusLabel5.ForeColor = Color.Green
  StatusLabel6.Text = DownloadStatus
  StatusLabel6.ForeColor = Color.Green
End If 
```

因此，当标签显示“星期一”时，如果我选择星期一，它就会这样做。它将显示星期一有哪些系列可用。好吧，这不起作用，我不知道为什么。

任何人都可以为我解释如何让这个工作，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:18:09.667

您应该基于`DayOfWeek`枚举而不是字符串进行比较

```
If Me.DateTimePicker1.Value.DayOfWeek = DayOfWeek.Monday Then
    ...
End If 
```

`ValueChanged`如果`DateTimePicker`克里斯在他的回答中已经提到过，还检查用户是否选择了日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:02:39.310

这是因为你没有告诉任何东西来听听`datepicker1`或 的变化`label4`。我会这样做，以便当`datepicker`（每次）发生变化时，里面的代码会触发，改变内容。您需要将`ContentChanger`sub 中的一些变量设为 public 或在本地设置它们，否则它们将无法访问。

尝试以下操作：

```
Private Sub DateTimePicker1_ValueChanged(sender As Object, e As EventArgs) Handles DateTimePicker1.ValueChanged
    ' When the datepicker1 has changed (date has been chosen).. do something with that date
    ' Get the datepicker's chosen day name
    Dim dayOfWeek As String = DateTimePicker1.Value.DayOfWeek.ToString()

    ' Update the label to show the user
    Label4.Text = dayOfWeek

    ' Now change the content shown according to the date range
    ContentChanger(dayOfWeek)

End Sub

Sub ContentChanger(dayOfWeek As String)

    If dayOfWeek = "Monday" Then
        StatusLabel1.Text = USstatus
        StatusLabel1.ForeColor = Color.Blue
        StatusLabel5.Text = DownloadStatus
        StatusLabel5.ForeColor = Color.Green
        StatusLabel6.Text = DownloadStatus
        StatusLabel6.ForeColor = Color.Green
    End If

End Sub 
```

# php - 验证 - 如果语句不起作用

> ID：14142240
> 
> 赞同：0
> 
> 时间：2013-01-03T15:46:50.283
> 
> 标签：php, javascript, jquery, validation, if-statement

我正在尝试使用 Javascript 进行简单的表单验证。在这种情况下，我有一个电子邮件文本输入，如果电子邮件不是有效的电子邮件或电子邮件地址已被占用，我希望它出错。有效的电子邮件部分错误正常，但电子邮件地址已被参与总是通过。

**这是我的脚本代码**

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
function valemail() 
{
var email = $('input#email').val();
var atpos=email.indexOf("@");
var dotpos=email.lastIndexOf(".");
if (atpos<1 || dotpos<atpos+2 || dotpos+2>=email.length)
    {
    document.getElementById("email").style.border="3px solid red";
    document.getElementById('email_error').style.display = 'block'; 
    document.getElementById('email_error').innerHTML = 'A valid email address is required';
    } else {
if ($.trim(email) != '') 
{

    $.post('../ajax/registeremail.php', {email: email}, function(data) 
    {
        if ($.trim(data) == 'That email address is already in use. If you have created an account, 
<a href="../login.php">Login</a>') 
        {
            document.getElementById("email").style.border="3px solid red";
            document.getElementById('email_error').style.display = 'block'; 
            $('div#email_error').text(data);
        } else {
            document.getElementById("email").style.border="3px solid #33FF33";
            document.getElementById('email_error').style.display = 'none'; 
        }
    });
   }
}}
 </script> 
```

**我的 registeremail.php 文件独立工作，并且是：**

```
<?php
include('../init.php');
//email validation
if (isset($_POST['email']) === true && empty($_POST['email']) === false) {
$email = $_POST['email'];

if (email_exists($email) === true) {
echo('That email address is already in use. If you have created an account, <a>Login</a>');
} else {
echo('Good');
}
?> 
```

实际的文本输入和 div 代码是

```
 <input class="input" type="text" tabindex="2" placeholder="Email*" style="height:20px;" name="email"  
id="email" onchange="valemail()">
<div id="email_error"></div> 
```

有谁知道为什么会这样？我真的很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:49:55.793

问题是你在 PHP 中回显的是

```
That email address is already in use. If you have created an account, <a>Login</a> 
```

你在 JavaScript 中检查的是

```
That email address is already in use. If you have created an account, <a href="../login.php">Login</a> 
```

即它们不一样...

我建议您返回`1`(true) 或`0`(false)，然后使用 JavaScript 输出文本 .. 类似

```
if (email_exists($email) === true) {
   echo('0');
} else {
   echo('1');
} 
```

那么你的 JavaScript 将类似于

```
if ($.trim(data) == '0') {
    document.getElementById("email").style.border = "3px solid red";
    document.getElementById('email_error').style.display = 'block';
    $('div#email_error').text('That email address is already in use. If you have created an account,<a href="../login.php">Login</a>');
} else {
    document.getElementById("email").style.border = "3px solid #33FF33";
    document.getElementById('email_error').style.display = 'none';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:52:54.423

我建议您更改您的 javascript 逻辑以检查是否缺少“良好”响应，而不是检查您可能没有完全复制的冗长错误消息。改成这样：

```
$.post('../ajax/registeremail.php', {email: email}, function(data) 
{
    if ($.trim(data) != 'Good') 
    {
       ... 
```

这既可以防止与您的错误消息不完全匹配的问题，也可以让您修改该错误消息或创建其他错误，而无需更改您的错误检测代码。

# forms - FOSUserBundle：使用事件监听器保存相关的注册数据

> ID：14142244
> 
> 赞同：2
> 
> 时间：2013-01-03T15:47:11.203
> 
> 标签：forms, symfony, fosuserbundle, user-registration, event-listener

我刚刚更新到最新版本的 FOSUserBundle，它取消了 FormHandlers。

我的应用程序中的每个用户都有一个“主页”，当用户创建他们的帐户时，我正在使用注册表单来捕获有关主页的信息。

最初我使用 onSuccess 方法重写了 FormHandler 以保存额外的数据：

```
public function onSuccess(UserInterface $user, $confirmation)
{
    $home = $user->getHome();
    $this->documentManager->persist($home);
    $this->documentManager->flush();

    parent::onSuccess($user, $confirmation);
} 
```

这成功地保存了 Home 文档及其在 User 文档中的引用。

使用您现在必须使用的事件侦听器方法，我订阅了一个侦听器`FOSUserEvents::REGISTRATION_COMPLETED`并创建了以下方法：

```
public function onRegistrationCompleted(FilterUserResponseEvent $event)
{
    $user = $event->getUser();
    $home = $user->getHome();

    $this->documentManager->persist($home);
    $this->documentManager->flush();

    $this->userManager->updateUser($user);
} 
```

这会保存 Home，但不会保存 User 中的引用。当我使用该`REGISTRATION_COMPLETED`事件时，用户已经被 RegistrationController 保存，而在 Home 之前首先保存，所以这可能与它有关吗？

但是，我认为在创建主页后重新保存用户就足够了？

如果我`var_dump($home)`在刷新之后，那么它的 id 属性值是正确的。

如果我`$user->setHome($home)`在刷新后调用，用户中的引用仍然是 NULL。

自更新以来我没有改变我的基础模型，它仍然使用相同的 Doctrine Mongo ODM 类，所以引用应该仍然保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:44:34.410

FormHandler 方式和 EventListener 方式之间的唯一区别`REGISTRATION_COMPLETED`似乎是前者，直到创建 Home 之后才保存 User。

因此，我已将侦听器订阅更改为在`FOSUserEvents::REGISTRATION_SUCCESS`保存用户之前触发的事件：

```
public function onRegistrationSuccess(FormEvent $event)
{
    $user = $event->getForm()->getData();
    $home = $user->getHome();
    $this->documentManager->persist($home);
    $this->documentManager->flush();
} 
```

这成功地将 Home 引用保存在 User 中，尽管它确实让我有点担心，一旦保存 User，我似乎无法更新 Home 引用？

# cassandra - 在 Cassandra 中建模嵌套实体

> ID：14142246
> 
> 赞同：1
> 
> 时间：2013-01-03T15:47:21.170
> 
> 标签：cassandra, thrift, cql

在 Cassandra 中建模嵌套实体的最佳方法是什么，最好是在一个列族中？例如，包含电子邮件和电话列表的联系人：

```
{
"id" : "",
"first_name : "",
"last_name : "",
"emails" : [
    {
    "type" : "",
    "email": ""
    },
    {
    "type" : "",
    "email" : ""
    }
],
"phones" :[
    {
    "type" : "",
    "phone" : ""
    },
    {
    "type" : "",
    "phone" : ""
    }
] 
```

}

我用谷歌搜索应该使用复合类型而不是超级列，并且在刚刚发布的 1.2 中还支持 CQl3 中的宽行，但是这些似乎都不支持一个实体中的多个数组，或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:08:41.203

您可以将数组直接存储为 json 格式的列值（我手动编组/解组）。

或检查一下：

[http://www.datastax.com/dev/blog/cql3_collections](http://www.datastax.com/dev/blog/cql3_collections)

# shopify - 用于“商店”配置的 Webhook？

> ID：14142249
> 
> 赞同：0
> 
> 时间：2013-01-03T15:47:35.417
> 
> 标签：shopify

我知道可以使用`GET /admin/shop.json`. 但是是否也可以以某种方式使这些信息保持最新？我没有`shop/update`在[API 文档](http://api.shopify.com/webhook.html)中看到列出的 webhook 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:39:59.403

您可以轮询它（在合理的时间间隔内，以避免不必要地达到您的 API 调用限制），但目前没有 webhook。

# android - 肾上腺皮质激素 220 GLSL 错误

> ID：14142251
> 
> 赞同：5
> 
> 时间：2013-01-03T15:48:03.980
> 
> 标签：android, opengl-es, opengl-es-2.0, glsl

*我们在使用Adreno 220* GPU的*Sony Xperia S*手机上遇到 GLSL alpha 测试问题。设备运行 Android 4.0.4。

 *在*Adreno 200、Adreno 205、Adreno 225*以及*Tegra2*、*Mali400*和*PowerVR* GPU 上运行良好。

着色器代码：

```
// vertex
            uniform highp mat4 uMVPMatrix;
            attribute highp vec4 aPosition;
            attribute highp vec2 aTextureCoord;
            varying mediump vec2 vTextureCoord;
            void main() {
              gl_Position = uMVPMatrix * aPosition;
              vTextureCoord = aTextureCoord;
            } 

// fragment
            precision mediump float;
            varying mediump vec2 vTextureCoord;
            uniform sampler2D sTexture;
            uniform sampler2D sAlpha;
            uniform vec4 uBlendColor;
            void main() {
             vec4 base = texture2D(sTexture, vTextureCoord);
             if(texture2D(sAlpha, vTextureCoord).r < 0.5){ discard; }
             else { gl_FragColor = base * uBlendColor; }
            } 
```

错误截图： ![越野车](../Images/95ac9a5f836a68d9a6d00237b7ed76b9.png)

其他设备上的正确结果： ![没有错误](../Images/0db2bb8919c59389944fe196e3cb57d8.png)

请告知可能导致此类视觉故障的原因、查找原因的方法以及可能的解决方法。

**编辑**： HTC Rezound 的旧库存 ROM 确认了相同的错误。有关更多信息，请参阅我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:57:35.610

我已经要求在 xda-developers 的不同固件上测试应用程序。在某些设备上它工作得很好，而在另一些设备上则存在这种视觉故障。

所以我得出结论，这与 OpenGL 驱动程序中的一些错误有关，这些错误已在某些非库存 ROM 中修复。

**编辑**：确认它是旧高通公司的 Adreno 220 驱动程序中的一个错误。在具有 4.0.3 ROM 的*HTC Rezound*手机（也是 Adreno 220）上存在相同的错误，它不仅存在于我的应用程序中，而且还存在于某些游戏中 - 某些对象上缺少某些线条或像素。生根并安装 CM 4.1 后，错误消失了。*

# vb.net - 总和和分组 linq

> ID：14142256
> 
> 赞同：7
> 
> 时间：2013-01-03T15:48:16.090
> 
> 标签：vb.net, linq, grouping

我试图自己解决这个问题，但我不得不在 VB 中这样做，这让我更加困惑。基本上我有很多东西

```
List<Pax> paxes; 
```

Pax 属性之一是 Voucher，它又具有一些属性，例如 ID 和 Price

我想做的是从 Pax 列表、优惠券列表及其累积价格中选择

```
so from 
Pax1 - Voucher{ VoucherDesc = 10 percent off, VoucherCode = 10-OFF, Price = £150}
Pax2 - Voucher{ VoucherDesc = 10 percent off, VoucherCode = 10-OFF, Price = £120}
Pax3 - Voucher{ VoucherDesc = Buy one get one free, VoucherCode = BOGOF, Price = £300}

to 
{10 percent off, 10-OFF, £270 }
{Buy one get one free, BOGO, £300 } 
```

我确信这可以通过一些 linq 和分组来实现，但我完全被难住了

假设它是沿着

```
dim newlist = from p in paxes group p by p.VoucherCode into g _ 
                select new With {g. ..} 
```

是的，这必须在 VB 中结束，但是当我发现这相当痛苦时，我想我会在 C# 中更理解它，因为 VB 语法是纯粹的邪恶，如果有人可以同时发布两者，我可能最终能够说得通它在做什么。因为代码转换器似乎不能很好地处理扩展的 linq 查询。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T11:57:13.490

感谢您的回复

因此设法将其转换为vb

```
Dim q = From v In paxes.Select(Function(p) p.Voucher).Where(Function(v) v IsNot Nothing) _
        Group v By v.OptionID, v.VoucherCode, v.Description Into Group _
        Select OptionID, VoucherCode, Description, TotalDiscount = Group.Sum(Function(v) v.Price) 
```

字段的名称略有不同，但在lazyb 的帖子和此链接的帮助下效果很好：http: [//msdn.microsoft.com/en-us/vstudio/bb688088.aspx](http://msdn.microsoft.com/en-us/vstudio/bb688088.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T15:51:23.480

假设价格是十进制或双精度（不是字符串）：

```
var query = from v in paxes.Select(p => p.Voucher)
            group v by new {v.VoucherDesc, v.VoucherCode } into g
            select new { 
                Desc = g.Key.VoucherDesc,
                Code = g.Key.VoucherCode, 
                Total = g.Sum(x => x.Price)
            }; 
```

更新：您的问题最初是用 C# 标记的，因此这是一个 C# 解决方案。希望你能把它翻译成VB。如果价格是字符串，那么只需添加解析值。例如

```
Total = g.Sum(x => Double.Parse(x.Price.Replace("£", "")) 
```

* * *

# jsf-2 - 添加在 PrimeFaces 版本 3.4.2 数据表中无法正常工作并出现对话框

> ID：14142257
> 
> 赞同：3
> 
> 时间：2013-01-03T15:48:20.650
> 
> 标签：jsf-2, primefaces, datatable, add, crud

我想制作具有添加、过滤、编辑、删除、分页功能的 CRUD PrimeFaces 数据表。我正在尝试使用 PrimeFaces 3.4.2 dataTable、JSF 2.1 在对话（即模式弹出窗口）中“添加”新记录。

所有其他操作都运行良好，但添加操作后 dataTable 未正确更新。它在第一次添加操作后正确更新。之后我添加第二行数据表被更新，但首先添加的行被第二次添加的行替换。之后我添加了第 3 行，第 1 行已被第 3 行替换。在所有情况下，数据库表都得到了完美的更新。

来自 jsf 和托管 bean 的代码片段：

*JSF 代码*：

```
<h:body>
<h:form id="form1">

            <h:messages id="messages1"/>
            <br/>

            <p:commandButton id="Addbtn" value="Add" oncomplete="AddDialog.show()" update=":addform"/>                
            <br/>

            <p:dataTable id="dtusers" value="#{userdataController.retrieveData()}" var="item" 
                         rows="8" paginator="true" emptyMessage="No Records Found" 
                         paginatorAlwaysVisible="false">

                <p:column style="width:150px" filterMatchMode="contains" filterBy ="#{item.id}">
                    <f:facet name="header"> Id </f:facet>
                    <h:outputText value="#{item.id}"/>
                </p:column>

                <p:column style="width:150px" filterMatchMode="contains" filterBy="#{item.name}">
                    <f:facet name="header"> Name </f:facet>
                    <h:outputText value="#{item.name}"/>
                </p:column>     

                <p:column style="width:150px">  
                    <p:commandButton id="editButton" update=":editform" oncomplete="EditDialog.show()" value="Edit">
                        <f:setPropertyActionListener value="#{item}" target="#{userdataController.selectedUser}"/>
                    </p:commandButton>                       
                </p:column>

                <p:column style="width:150px">  
                    <p:commandButton id="deleteButton" update=":deleteform" oncomplete="UserDialog.show()" value="Delete">
                        <f:setPropertyActionListener value="#{item}" target="#{userdataController.selectedUser}"/>
                    </p:commandButton>    
                </p:column>                 

            </p:dataTable>
        </h:form>   

 <p:dialog header="Add User Data" resizable="false" id="AddDialog" widgetVar="AddDialog" modal="true" showEffect="fade" hideEffect="fade" position="center" dynamic="true">
            <h:form id="addform">
                <p:outputPanel id="AddDisplay">

                    <p:panelGrid columns="2" >

                        <f:facet name="header">
                            Add Userdata
                        </f:facet>

                        <h:outputLabel for="Id" value="Enter Id:"/>
                        <p:inputText id="Id" value="#{userdataController.selected.id}" />

                        <h:outputLabel for="Name" value="Enter Name:"/>
                        <p:inputText id="Name" value="#{userdataController.selected.name}"/>

                        <p:commandButton  actionListener="#{userdataController.create}" update=":form1:dtusers :form1:messages1" value="Save" oncomplete="AddDialog.hide()" style="margin:0"/>                 

                    </p:panelGrid>
                </p:outputPanel>
            </h:form>
        </p:dialog> 
 </h:body> 
```

*Manaed Bean 代码片段*：

```
@ManagedBean(name = "userdataController")
    @SessionScoped
    public class UserdataController implements Serializable {

    private Userdata current;
    private DataModel items = null;
    @EJB
    private PrimeFacesDb.session.UserdataFacade ejbFacade;
    private int id;
    private String name;
    private Userdata SelectedUser;

    public UserdataController() {
   }
 //getters setters for id,name and SelectedUser

  private UserdataFacade getFacade() {
    return ejbFacade;
  }
  public List retrieveData() {
    List result = getFacade().findAll();
    return result;
  }

   public void create() {
    try {
        getFacade().create(current);
        JsfUtil.addSuccessMessage("Userdata created successfully");
    } catch (Exception e) {
        JsfUtil.addErrorMessage(e, "Persistence Error occured");
    }
  }
 } 
```

PrimeFaces 论坛、NetBeans 示例代码和可编辑数据示例 (mastertheboss.com/primefaces/datatables-with-primefaces/…;) 中提供的信息帮助我创建了一个更好的可演示 CRUD 数据表，其中包含创建、过滤、编辑和删除功能。不提及 Mr.BalusC 将是不完整的，因为他对 JSF 2.x 帖子的评论和解决方案对我很有价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:36:02.123

您似乎缺少/误解了 Java 的面向对象的本质。您每次都在添加表单中重用**相同的对象实例/引用。**

基本上，您的流程如下：

```
List<Userdata> users = new ArrayList<Userdata>();
Userdata current = new Userdata();
current.setName("foo");
users.add(current);
current.setName("bar"); // Look, it's still the same instance! So the one in the list is also changed!
users.add(current); // It now contains 2 references of exactly the same instance!
current.setName("baz"); // Still the same reference!
users.add(current); // It now contains 3 references of exactly the same instance!
// ... 
```

虽然你实际上应该做

```
List<Userdata> users = new ArrayList<Userdata>();
Userdata current = new Userdata();
current.setName("foo");
users.add(current);
current = new Userdata(); // New instance!
current.setName("bar");
users.add(current);
current = new Userdata(); // Another new instance!
current.setName("baz");
users.add(current);
// ... 
```

因此，请相应地修复您的`create()`方法：

```
getFacade().create(current);
current = new Userdata(); 
```

*（请注意，您的视图和模型彼此不完全匹配......`selected`并且`current`不一样，我假设您只是使用了与 getter 命名不同的属性名称）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:34:49.500

@PostConstruct 注释用于 init() 方法，基于 NetBeans 示例应用程序 ScrumToys。

@PostConstruct public void init() { current = new Users(); }

[PrimeFaces 论坛](http://forum.primefaces.org/viewtopic.php?f=3&t=11389&hilit=dialog%20open&start=20)的信息也帮助我确定了模型中 java 代码中的问题。

# sublimetext2 - 如何对 font_size 进行特定于平台的更改？

> ID：14142264
> 
> 赞同：2
> 
> 时间：2013-01-03T15:48:35.383
> 
> 标签：sublimetext2

我正在使用编辑器 Sublime Text，我希望 font_size 在 Linux 上是一个值，而在 OS X 上是一个不同的值。（由于某种原因，相同的“font_size”似乎在不同平台上呈现不同。）

Sublime Text 确实使特定于平台的自定义成为可能，但不在`Packages/User`目录中。（“ [Packages/User 文件夹中特定于平台的设置文件将被忽略。这样，您可以确保单个设置文件覆盖所有其他文件。](https://sublime-text-unofficial-documentation.readthedocs.org/en/latest/customization/settings.html#types-of-settings) ”）有解决方法吗？

（这特别烦人，因为`Packages/Default/Preferences (*).sublime-settings`为不同的平台指定了不同的字体大小。因此需要特定于平台的字体大小，但作为“用户”不可能更改！）

# java - Java NIO2 AIO - TCP 聊天服务器

> ID：14142270
> 
> 赞同：1
> 
> 时间：2013-01-03T15:48:46.930
> 
> 标签：java, nio2

我正在玩 Java NIO2，我正在尝试编写基于 AsynchronousServerSocketChannel 的 TCP 聊天服务器。

对一个简单的 ECHO-Server 进行编程是没有问题的，并且可以完美地工作。现在我正在尝试接受许多客户端并向所有连接的客户端广播传入消息，但我遇到了问题。

因为它有点长我把代码贴[在了pastbin](http://pastebin.com/7hxyj2z5)

到目前为止，我能够广播一条消息，之后出现问题，过了一会儿我收到以下错误：

> 线程“pool-1-thread-13”中的异常 java.nio.channels.WritePendingException

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:52:14.190

> 线程“pool-1-thread-13”中的异常 java.nio.channels.WritePendingException

这意味着您尝试在不等待前一次写入完成的情况下进行写入。当你用 NIO2 调用 write() 时，你会得到一个 Future，你可以等待它检查它是否已经完成。

我不建议使用 NIO2，除非你有 infiniband（这是它的设计目的） NIO2 至少是 NIO 的两倍，除非你使用简单的阻塞 NIO 或库，否则我什至不建议使用 NIO像netty或mina。

对于聊天程序，我只会使用普通的 NIO 甚至 IO。或者，您可以重新使用已经存在并且可以使用的[众多聊天库之一。](http://java-source.net/open-source/chat-servers);)

# python - 找到对应的列号到最大值

> ID：14142272
> 
> 赞同：2
> 
> 时间：2013-01-03T15:48:53.900
> 
> 标签：python

我想找到对应于一行中最大值的列号。

我需要将它写成一个以以下字典为参数的函数：

```
 {'1': {'3': 0, '2': 1, '5': 1, '4': 0, '6': 29},
    '3': {'1': 0, '2': 0, '5': 0, '4': 1, '6': 1},
    '2': {'1': 13, '3': 1, '5': 21, '4': 0, '6': 0},
    '5': {'1': 39, '3': 0, '2': 1, '4': 0, '6': 14},
    '4': {'1': 1, '3': 1, '2': 17, '5': 2, '6': 0},
    '6': {'1': 0, '3': 43, '2': 0, '5': 0, '4': 1}} 
```

我的第一行是第 4 行。我通过以下方式找到最高数字：

```
max(d['4'].values()) 
```

从字典的矩阵表示中，我知道这个数字在第 2 列中。我希望我的函数返回这个数字。如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:51:06.143

像这样的东西应该工作：

```
max(d['4'].iteritems(), key=lambda x: x[1])[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:03:24.323

代码：

```
def key_of_max_value(d):
    for k, v in d.iteritems():
        yield k, max((v, k) for k, v in v.iteritems()) 
```

测试代码：

```
def test_key_of_max_value():
    d = {
        '1': {'3': 0, '2': 1, '5': 1, '4': 0, '6': 29},
        '3': {'1': 0, '2': 0, '5': 0, '4': 1, '6': 1},
        '2': {'1': 13, '3': 1, '5': 21, '4': 0, '6': 0},
        '5': {'1': 39, '3': 0, '2': 1, '4': 0, '6': 14},
        '4': {'1': 1, '3': 1, '2': 17, '5': 2, '6': 0},
        '6': {'1': 0, '3': 43, '2': 0, '5': 0, '4': 1}
    }
    for k, (value, column_key) in key_of_max_value(d):
        print k, column_key, value    

test_key_of_max_value() 
```

结果：

```
1 6 29
3 6 1
2 5 21
5 1 39
4 2 17
6 3 43 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:52:05.393

我想你想要`items`字典的方法：

```
col,value = max(d['4'].items(), key = lambda x: x[1]) 
```

将其分解以查看其工作原理：

*   `d['4'].items()`返回键值元组的列表（或 python3 中的可迭代对象）
*   `max`接受第二个参数，这是一个用于实际比较项目的函数。在这种情况下，我们取每个元组中的第二项（值）
*   `max`返回整个元组，我们使用`col,value = max(...)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T15:53:33.937

```
In [11]: max(d['4'].items(), key=lambda (k,v):v)[0]
Out[11]: '2' 
```

`d`你的字典在哪里。

# php - 使用 php 排序将图像保存在 sql 中

> ID：14142277
> 
> 赞同：1
> 
> 时间：2013-01-03T15:49:01.800
> 
> 标签：php, sql, image

我正在尝试在我的数据库中保存一些 png 图像，但是从我得到的错误中

> 1号线'æÓ'附近

我认为这是一个整理问题。排序规则设置为 utf8_general_ci。我应该对图像使用什么排序规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:55:08.427

如果你真的必须在 SQL 数据库中使用图像，你应该使用 BLOB 字段而不是 TEXT。

最佳实践是只存储图像的路径，而不是图像本身。

# php - 反向代理背后的 Oauth 提供者

> ID：14142278
> 
> 赞同：6
> 
> 时间：2013-01-03T15:49:06.267
> 
> 标签：php, oauth, oauth-provider

我尝试在 apache 反向代理后面的 PHP（PECL 包）中使用 OAuth Provider

客户使用

```
POST https://api.com/resource/oauth/request-token 
```

但我的 oauth 提供商收到

```
POST http://api.com/mywebservice/resource/oauth/request-token 
```

无法验证签名，因此请求失败

您对解决此问题有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T20:08:42.717

我不得不这样做一次。我最终修改了 OAuth 代码以传递提供商将收到的实际 URL 以及我需要从代理后面发送到的 URL。前者用于签名，后者用于 HTTP 请求。这很痛苦且不可移植（如果代理中有任何更改，代码将停止工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T01:25:33.517

我们遇到了同样的问题（我们的反向代理在网络内将 HTTPS 更改为 HTTP 的情况不太复杂）。

您可以启用负载均衡器（无论您使用什么作为反向代理）来转发正确的标头方案（以及更多）。

例如，在 Nginx 中，您可以同时利用这两者：

```
proxy_set_header X-Forwarded-Proto https; 
```

和

```
proxy_redirect .... ; 
```

这可能不是针对这个老问题的直接上下文解决方案，但我花了 7 个小时尝试调试我们的问题，所以我相信这对某人来说会派上用场。

# android - 如何为按钮添加边框和背景图像

> ID：14142281
> 
> 赞同：2
> 
> 时间：2013-01-03T15:49:22.007
> 
> 标签：android, button, background, border

我正在尝试为按钮添加背景纹理和边框。但我无法在我的按钮上看到这两个东西。

有了这个我有我的背景图片

```
<item>
 <bitmap android:src="@drawable/button_background" android:tileMode="repeat" />
 </item> 
```

有了这个我就有了一个边界

```
<corners android:radius="5dp" />
  <stroke android:width="3px" android:color="#FFFFFF" /> 
```

我尝试使用两者结合它们`<shape>`， `<layer-list>`但我可以获得边框或背景纹理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:59:22.733

9patches 通常非常适合这种情况（请确保使用 SDK 的 tools 目录中的 draw9patch 工具），但如果您不想创建自己的图形（请记住，您需要为每个分辨率）并想使用 XML，您可以执行以下操作：

![红色按钮](../Images/617b84c6d12c5d0b691a708e4e8b6985.png)

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" >
        <shape>
            <solid
                android:color="#ef4444" />
            <stroke
                android:width="1dp"
                android:color="#992f2f" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
    <item>
        <shape>
            <gradient
                android:startColor="#ef4444"
                android:endColor="#992f2f"
                android:angle="270" />
            <stroke
                android:width="1dp"
                android:color="#992f2f" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
</selector> 
```

来源：[http ://www.dibbus.com/2011/02/gradient-buttons-for-android/](http://www.dibbus.com/2011/02/gradient-buttons-for-android/)

# python - Python - PyGame - 学习向量/动画

> ID：14142282
> 
> 赞同：5
> 
> 时间：2013-01-03T15:49:22.977
> 
> 标签：python, pygame, vector-graphics

所以，我不是最懂数学的人，我希望能得到一些急需的反馈。对于初学者，我的目标只是让图像追逐我的鼠标。发生了一些我没想到会收到反馈的事情。

1）追逐非常僵硬，并且以非常...“角度”的方式跟随鼠标，仅在屏幕上似乎设置的点（中间x轴，中间y轴和对角线）改变方向。

2）我希望速度保持不变，但图像越靠近鼠标移动得越快。

3）当图像到达鼠标时，它“弹弓”经过鼠标，造成模糊的疯狂，而不是到达鼠标位置并停止。

这些是我主要关心的问题，但如果您看到任何我可能误解的内容，请告诉我。我很想了解整个向量/三角学（很快就会进入物理学）的东西。

```
def follow (self):
    mouse_pos = pygame.mouse.get_pos()
    diff = (self.xPos-mouse_pos[0], self.yPos-mouse_pos[1])
    vector = math.sqrt(diff[0]**2 + diff[1]**2)
    distance = (self.xPos/vector, self.yPos/vector)

    if (self.xPos, self.yPos) == mouse_pos:
        return
    if mouse_pos[0] >= self.xPos:
        self.xPos += distance[0]
    else:
        self.xPos -= distance[0]
    if mouse_pos[1] >= self.yPos:
        self.yPos += distance[1]
    else:
        self.yPos -= distance[1] 
```

（整个程序可以在这里看到[http://ideone.com/6OxWLi](http://ideone.com/6OxWLi)）

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:39:19.293

我不知道你的变量`vector`和是什么意思`distance`，但是 IMO 应该交换它们的名称。在您的代码中，`vector`是`diff`向量的长度，它是使用毕达哥拉斯定理计算的：

```
d^2 = dx^2 + dy^2
d = sqrt(dx^2 + dy^2) 
```

在您的代码中，有一个`distance`变量，它是位置向量，仅归一化（除以其自身的长度）。这就是为什么我宁愿交换他们的名字。此外，更有趣的是`diff`标准化形式的向量。所以宁愿这样做：

```
distance = math.sqrt(diff[0]**2, diff[1]**2) # instead of `vector = ...`
diff_norm = (diff[0] / distance, diff[1] / distance) # instead of `distance = ...` 
```

**从现在开始，每次我写`distance`时，我都假设您已经交换了名称，并且是指距离值，而不是归一化向量。与 相同`vector`，从现在开始我将调用`diff_norm`它（归一化差异向量）。**

现在，针对您的问题：

1) 和 2) 当你使用向量时应该会更好`diff_norm`（归一化的差异向量而不是归一化的位置向量，这真的没有意义：P）。

3）您的图像位置在任何时候都不太可能`(self.xPos, self.yPos)`与鼠标位置*完全相同。*因为您使用浮点数作为您的位置（python 为您这样做），所以它们可能永远不会完全在像素上。因此，您的图像将永远不会*完全*位于鼠标位置。因此，与其写`(self.xPos, self.yPos) == mouse_pos`，不如检查图像与鼠标的距离是否真的很近，例如小于 1 或 2 个像素：

```
if distance <= 2: return 
```

此外，您不需要最后的所有 if/else -`diff_norm`向量可以有负值，因此您不需要检查它们是否为负 - 只需从位置向量中减去 diff_norm 向量，如下所示：

```
self.xPos -= diff[0]
self.yPos -= diff[1] 
```

# c# - 线程和屏幕类型的停止和封闭的形式仍在显示

> ID：14142286
> 
> 赞同：-3
> 
> 时间：2013-01-03T15:49:40.273
> 
> 标签：c#

我有多种形式在密集操作期间弹出。例如，当弹出一个表单向用户询问某事时，用户单击“确定”，该表单的图形将保留在主屏幕上，即使它已关闭。

我怎样才能使这些图形完全消失？我正在使用`System.Threading.Thread.sleep(10)`暂停应用程序，但屏幕停止并且更改不清楚。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:56:55.477

只要表单在现在无法处理任何窗口消息（尤其是重绘本身）的基础窗口上关闭，关闭的表单的“图形”仍然可见。

为避免这种情况，您要么必须`Application.DoEvents()`在关闭子窗体后调用（仅适用于 WinForms，通常不推荐），要么需要将导致消息泵阻塞的代码放入单独的线程中，例如使用a`BackgroundWorker`或 a `Task`，如果您想保持应用程序响应，强烈建议使用它。

也是如此`Thread.Sleep(10)`。这会阻止当前（UI-）线程处理任何消息，因此窗口在该时间段内没有响应。

# javascript - iPhone悬停时的灰色区域

> ID：14142293
> 
> 赞同：2
> 
> 时间：2013-01-03T15:50:17.433
> 
> 标签：javascript, jquery, iphone, ios, hover

在下面的示例中，当我点击任何灰色矩形时，它所嵌套的整个容器都会变为灰色。

使用`alert()`有助于注意到这一刻。你需要一个真正的 iPhone 来测试这个（或者可能是模拟器）。

[http://jsfiddle.net/EHE9L/5/](http://jsfiddle.net/EHE9L/5/)

可以以某种方式防止这种情况吗？为什么整个父母`DIV`会变灰一秒钟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:03:07.687

我相信您需要在 CSS 中设置“-webkit-tap-highlight-color”，使其透明：-

```
-webkit-tap-highlight-color: rgba(0,0,0,0); 
```

请参阅关于此的[CSS 技巧](http://css-tricks.com/snippets/css/remove-gray-highlight-when-tapping-links-in-mobile-safari/)帖子。

# sql - SQL 当前标准版本

> ID：14142294
> 
> 赞同：0
> 
> 时间：2013-01-03T15:50:19.013
> 
> 标签：sql

SQL/2003 是最新的标准版本吗？我的意思是 ANSI 在 1986 年首次采用的 SQL 标准。

我被告知在 2011 年他们发布了一个新的。

对不起，我希望我不会被人嫌弃。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:51:41.270

[http://en.wikipedia.org/wiki/SQL#Standardization](http://en.wikipedia.org/wiki/SQL#Standardization)

看起来 2006 年、2008 年和 2011 年是自您所说的 2003 年以来的新标准。检查链接以获取解释以及参考链接。

# ruby-on-rails - 如何在具有日期格式的简单表单字段中设置年份的集合？

> ID：14142302
> 
> 赞同：2
> 
> 时间：2013-01-03T15:50:39.383
> 
> 标签：ruby-on-rails, ruby, date, collections, simple-form

我使用的是简单形式，但我很难正确显示 date_of_birth。这可能是因为简单形式的文档有限以及我是一个菜鸟的事实。

无论如何，我正在尝试创建一个人们可以选择生日的年份集合。

date_of_birth是DATE表单中用户的一个属性，需要输入年月日。现在我尝试如下更改年份的集合，但这会删除日期和月份的输入字段：

```
= simple_form_for(@user, :html => { :class => 'form-horizontal' }) do |f|
  ...
  = f.input :date_of_birth, :collection => 1910..2010 
```

我在带有 HAML 的 Ruby on Rails 上使用 Simple-form。所以问题是：什么是定义年份集合的正确方法，保留日期和月份输入的默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:59:36.373

以下代码应该可以解决问题：

```
f.input :date_of_birth, :as => :date,
        :start_year => 1910, :end_year => 2010,
        :order => [:day, :month, :year] 
```

（之前的代码未经测试，可能如玛雅预言的那样导致世界末日）

[您可以在此处](http://simple-form.plataformatec.com.br/#information/rdocs)找到 SimpeForm 的文档（尝试查找 date_of_birth ;)）

# jquery - 将字符串传递给 $

> ID：14142303
> 
> 赞同：3
> 
> 时间：2013-01-03T15:50:43.890
> 
> 标签：jquery

尝试通过参加 Code School CoffeeScript 课程来掌握**CoffeeScript**和**jQuery 。**

使用的摘录之一是`$("<li>" + name + "</li>")`。我设法弄清楚这`$`是`jQuery`（对吗？）的别名，所以我想这意味着我们正在用一个字符串（`name`是一个字符串，被两个文字包围）调用 jQuery 函数。

那么......该`jQuery`功能自己做了什么？尝试查看 api.jquery.com，但无法弄清楚。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T15:52:08.353

在本例中，您使用 jQuery 创建一个 DOM 元素。

变量中有`<li>`一些（我假设的文本）`name`

> 如果一个**字符串**作为参数传递给**$()**，jQuery 会检查该字符串以查看它是否看起来像 HTML（即，它在字符串中的某个位置）。如果不是，则字符串被解释为选择器表达式，如上所述。但是如果字符串看起来是一个 HTML 片段，jQuery 会尝试按照 HTML 的描述创建新的 DOM 元素。然后创建并返回一个引用这些元素的 jQuery 对象。

用 jQuery 创建 DOM 元素的结构是：

```
$( html, props ) 
```

查看这些**[jQuery 文档](http://api.jquery.com/jQuery/#creating-new-elements)**以了解有关 jQuery 选择器的更多信息。

> **html**：定义单个、独立的 HTML 元素（例如 或 ）的字符串。
> 
> **props**：用于调用新创建元素的属性、事件和方法的映射。

正如我们在您的示例中看到的，我们只传递*html*。`$("<li>" + name + "</li>")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:11:02.570

您实际上是在将一个字符串传递给 jQuery，`"<li>" + name + "</li>"`这实际上是一个连接的`3 string`形式`1 string`。哪个被传递给它解析和检查的 jQuery 函数

**如果它是一个字符串**：它被解析成一个圆顶选择器，根据 id、class 和更复杂的选择器来选择元素

**如果它是一个对象**：选择与该对象相关的 dom。

**如果是 this (javascript Object)** : 它被转换为 jQuery 对象

# iphone - 从应用程序访问 iphone 联系人

> ID：14142304
> 
> 赞同：2
> 
> 时间：2013-01-03T15:50:44.000
> 
> 标签：iphone, ios, xcode

我是一个新的 ios 程序员，在我的应用程序上我想访问我的联系人进行通话。你们有任何练习文档或教程吗。我看起来像在 Viber 应用程序上。当用户点击联系人时，可以打电话，对不起我的英语不好。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:20:04.913

要显示联系人列表，您可以使用以下代码：

```
ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
picker.peoplePickerDelegate = self;
[self presentViewController: picker animated:YES completion: nil]; 
```

你可以使用

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier 
```

从联系人中选择电话号码时执行必要的操作。

如需快速入门，请查看[AddressBookProgrammingGuideforiPhone](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/QuickStart.html)

# internet-explorer - + 组合不适用于谷歌浏览器

> ID：14142309
> 
> 赞同：0
> 
> 时间：2013-01-03T15:50:54.327
> 
> 标签：internet-explorer, google-chrome, html, href

 我正在使用水平菜单，并带有以下 html 代码：

```
<table class="tabellacontent">
    <tr>
        <a class="mesitab" href="link"><td><div class="tabmese">Gen</div></td></a>
        <a class="mesitab" href="link"><td><div class="tabmese">Feb</div></td></a>
        <a class="mesitab" href="link"><td><div class="tabmese">Mar</div></td></a>
        <a class="mesitab" href="link"><td><div class="tabmese">Apr</div></td></a>
        <a class="mesitab" href="link"><td><div class="tabmese">Mag</div></td></a>
        <a class="mesitab" href="link"><td><div class="tabmese">Giu</div></td></a>
        <a class="mesitab" href="link"><td><div class="tabmese">Lug</div></td></a>
        <a class="mesitab" href="link"><td><div class="tabmese">Ago</div></td></a>
        <a class="mesitab" href="link"><td><div class="tabmese">Set</div></td></a>
        <a class="mesitab" href="link"><td><div class="tabmese">Ott</div></td></a>
        <a class="mesitab" href="link"><td><div class="tabmese">Nov</div></td></a>
        <a class="mesitab" href="link"><td><div class="tabmese">Dic</div></td></a>
    </tr>
</table> 
```

​ 使用以下 CSS：

```
.tabellacontent{
margin:auto;
position:relative;
width:95%;
text-align:center;
}
.mesitab{
text-decoration:none;
}
.tabmese{
color:rgb(0,56,130);
margin:auto;
position:relative;
border:2px solid #000;
border-color:rgb(82,115,154);
width:100%;
height:15px;
top:1px;
text-align:center;
vertical-align:middle;
background-color:silver;
font-size:12px;
}
.tabmese:hover{
color:white;
background-color:rgb(49,87,132);
cursor: hand;
}​ 
```

我的问题是此代码适用于 IE (7/8)，但不适用于 Google Chrome。

**我怎么解决这个问题？** 

这里有一个[jsFiddle的链接](http://jsfiddle.net/eT6Zm/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:55:56.787

首先`tr`应该有它的唯一孩子，因为`td`你有一个错误的 html。

**解决方案** 将`a`标签放在`td`and`div`标签中，然后make `padding`and `margin`of`div`为0，然后做一个标签`display:block`覆盖整个td。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-04T00:09:48.520

我正在学习j-query mobile，我发现chrome的href有一些问题，项目不能在chrome的本地驱动器中运行，你必须上传到服务器。

# javascript - 两次调用外部js

> ID：14142315
> 
> 赞同：0
> 
> 时间：2013-01-03T15:51:32.467
> 
> 标签：javascript, internet-explorer, external

是否可以在一个 html 文档上使用外部 js 文件和 jquery 两次？我有第一个运行，但第二次调用它不起作用。在 Internet Explorer 中打开时，外部 js 也不起作用。

```
<!DOCTYPE html >
<html>
<head>

<link href="css/stylesheetelaine.css" rel="stylesheet" type="text/css"/> 

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"></script>

<script type="text/javascript" src="js/script2.js"> </script>

<script src="js/jQuery/jquery.monte.js"></script>     

<meta charset="utf-8">
<title>Gallery</title>

</head>

<body>

<div id="wrapper">

<div id="title">

<h1><a href="index.html"><img src="img/elaine4.png"  width="517" height="185" alt="elaine cullinan"></a><img src="img/elainefilligree.png" width="235" height="251" alt="elaine"></h1>

<div id="nav">
<ul id>

<li><a href="about.html" title="About">About</a></li>
<li><a href="tattoo.html" title="Tattoo">Tattoo</a></li>
<li><a href="makeup.html" title="Make Up">Make Up</a></li>
<li><a href="gallery.html" title="Gallery">Gallery</a></li>
<li><a href="contact.html" title="Contact">Contact</a></li>

</ul>
</div>
</div>

<div id="gallback">

<h2> Tattoos </h2>

<div id="gallerywrap">

    <div id='example1' class='container'>
        <img src="img/tattoogallery/outlineariel.jpg" alt='Zombie Ariel.'/>

        <img src="img/tattoogallery/horsecar.jpg" alt='Elaine tattooing'/>

        <img src="img/tattoogallery/2small.jpg" alt='Two Small Tattoos'/>

        <img src="img/tattoogallery/clown.jpg" alt='Clown'/>

        <img src="img/tattoogallery/lightsabers.jpg" alt='Finger Lightsabers'/>

        <img src="img/tattoogallery/flouder.jpg" alt='Flounder'/>

        <img src="img/tattoogallery/grenade.jpg" alt='Grenade'/>

        <img src="img/tattoogallery/colourcherryblossom.jpg" alt='Colour Cherry Blossom'/>
   <img src="img/tattoogallery/13.jpg" alt='13'/>

   <img src="img/tattoogallery/mechwing.jpg" alt='Mechanical Wing'/>

   <img src="img/tattoogallery/qotsa.jpg" alt='QOTSA'/>

   <img src="img/tattoogallery/horsecartatt.jpg" alt='Carousel'/>

   <img src="img/tattoogallery/lovefinger.jpg" alt='Love finger tatt'/>

   <img src="img/tattoogallery/hakun.jpg" alt='Hakuna Matata'/>

   <img src="img/tattoogallery/romannum.jpg" alt='Roman Numerals'/>

   <img src="img/tattoogallery/slayer.jpg" alt='Slayer'/>

   <img src="img/tattoogallery/shamrock.jpg" alt='Shamrock'/>

   <img src="img/tattoogallery/scriptarm.jpg" alt='Script'/>

   <img src="img/tattoogallery/skull.jpg" alt='Skull'/>

   <img src="img/tattoogallery/wristfoot.jpg" alt='Wrist and Foot Tatts'/>

   <img src="img/tattoogallery/zombieariel.jpg" alt='Zombie Ariel'/>

   <img src="img/tattoogallery/script.jpg" alt='Script'/>

   <img src="img/tattoogallery/chinese.jpg" alt='Chinese Symbols'/>

   <img src="img/tattoogallery/colflower.jpg" alt='Flower'/>

   <img src="img/tattoogallery/scriptfoot.jpg" alt='Foot Script Tatt'/>

   <img src="img/tattoogallery/Triton.jpg" alt='Triton'/>

   <img src="img/tattoogallery/zombiefingers.jpg" alt='Zombie Finger Tatt'/>

   <img src="img/tattoogallery/tyler.jpg" alt='Script'/>

   <img src="img/tattoogallery/3ursula.jpg" alt='Ursula'/>

   <img src="img/tattoogallery/locket.jpg" alt='Locket'/>

   <img src="img/tattoogallery/mechwing2.jpg" alt='Mechanical Wings'/>

   <img src="img/tattoogallery/backscript.jpg" alt='Script'/>

   <img src="img/tattoogallery/wingcolor.jpg" alt='Coloured Wing'/>

    </div>

 </div>

</div>

<div id="gallback">

<h2> Make Up </h2>

<div id="gallerywrap">

    <div id='example1' class='container'>
        <img src="img/tattoogallery/outlineariel.jpg" alt='Zombie Ariel.'/>

        <img src="img/tattoogallery/horsecar.jpg" alt='Elaine tattooing'/>

        <img src="img/tattoogallery/2small.jpg" alt='Two Small Tattoos'/>

        <img src="img/tattoogallery/clown.jpg" alt='Clown'/>

        <img src="img/tattoogallery/lightsabers.jpg" alt='Finger Lightsabers'/>

        <img src="img/tattoogallery/flouder.jpg" alt='Flounder'/>

        <img src="img/tattoogallery/grenade.jpg" alt='Grenade'/>

        <img src="img/tattoogallery/colourcherryblossom.jpg" alt='Colour Cherry Blossom'/>

    </div>

</div>

</div>

</div>
</body>

</html> 
```

外部的：

```
 $(function () {
            // Unstyled Example
            $.monte('#example1');

            // Styled Buttons Example
            // (see the CSS in the above style block)
            $.monte('#example2', {auto:false});

            // Callback Example
            // Format and append the HTML:
            $('#example3 > img').each(function(){
                $(this)
                .wrap('<div style="position:relative"/>')
                .parent()
                .append('<div><p>' + $(this).attr('alt') + '</p></div>')
                .append('<img src="frame.png" alt="" class="frame"/>');
            });
            // Hide the text on all but the center slide:
            $('#example3 div div').css({opacity: 0}).eq(0).css({opacity: 0.8});
            // Using the callbacks to reveal and hide the text:
            $.monte('#example3', {
                auto:false,
                callbackIn: function () {
                    $(this[0]).find('div').animate({opacity: 0.8}, 450);
                }, 
                callbackAway: function () {
                    $(this[0]).find('div').animate({opacity: 0}, 450);
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:04:29.217

不要创建多个具有相同 ID 的 DOM 对象。ID 应该是唯一的标识符。当您多次使用同一个 ID 时，很可能只对具有相同 ID 的第一个对象起作用。

重命名 ID 并使用新 ID 调用它。

```
 <!DOCTYPE html >
<html>
<head>

<link href="css/stylesheetelaine.css" rel="stylesheet" type="text/css"/> 

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"></script>

<script type="text/javascript" src="js/script2.js"> </script>

<script src="js/jQuery/jquery.monte.js"></script>     

<meta charset="utf-8">
<title>Gallery</title>

</head>

<body>

<div id="wrapper">

<div id="title">

<h1><a href="index.html"><img src="img/elaine4.png"  width="517" height="185" alt="elaine cullinan"></a><img src="img/elainefilligree.png" width="235" height="251" alt="elaine"></h1>

<div id="nav">
<ul id>

<li><a href="about.html" title="About">About</a></li>
<li><a href="tattoo.html" title="Tattoo">Tattoo</a></li>
<li><a href="makeup.html" title="Make Up">Make Up</a></li>
<li><a href="gallery.html" title="Gallery">Gallery</a></li>
<li><a href="contact.html" title="Contact">Contact</a></li>

</ul>
</div>
</div>

<div id="gallback">

<h2> Tattoos </h2>

<div id="gallerywrap">

    <div id='example1' class='container'>
        <img src="img/tattoogallery/outlineariel.jpg" alt='Zombie Ariel.'/>

        <img src="img/tattoogallery/horsecar.jpg" alt='Elaine tattooing'/>

        <img src="img/tattoogallery/2small.jpg" alt='Two Small Tattoos'/>

        <img src="img/tattoogallery/clown.jpg" alt='Clown'/>

        <img src="img/tattoogallery/lightsabers.jpg" alt='Finger Lightsabers'/>

        <img src="img/tattoogallery/flouder.jpg" alt='Flounder'/>

        <img src="img/tattoogallery/grenade.jpg" alt='Grenade'/>

        <img src="img/tattoogallery/colourcherryblossom.jpg" alt='Colour Cherry Blossom'/>
   <img src="img/tattoogallery/13.jpg" alt='13'/>

   <img src="img/tattoogallery/mechwing.jpg" alt='Mechanical Wing'/>

   <img src="img/tattoogallery/qotsa.jpg" alt='QOTSA'/>

   <img src="img/tattoogallery/horsecartatt.jpg" alt='Carousel'/>

   <img src="img/tattoogallery/lovefinger.jpg" alt='Love finger tatt'/>

   <img src="img/tattoogallery/hakun.jpg" alt='Hakuna Matata'/>

   <img src="img/tattoogallery/romannum.jpg" alt='Roman Numerals'/>

   <img src="img/tattoogallery/slayer.jpg" alt='Slayer'/>

   <img src="img/tattoogallery/shamrock.jpg" alt='Shamrock'/>

   <img src="img/tattoogallery/scriptarm.jpg" alt='Script'/>

   <img src="img/tattoogallery/skull.jpg" alt='Skull'/>

   <img src="img/tattoogallery/wristfoot.jpg" alt='Wrist and Foot Tatts'/>

   <img src="img/tattoogallery/zombieariel.jpg" alt='Zombie Ariel'/>

   <img src="img/tattoogallery/script.jpg" alt='Script'/>

   <img src="img/tattoogallery/chinese.jpg" alt='Chinese Symbols'/>

   <img src="img/tattoogallery/colflower.jpg" alt='Flower'/>

   <img src="img/tattoogallery/scriptfoot.jpg" alt='Foot Script Tatt'/>

   <img src="img/tattoogallery/Triton.jpg" alt='Triton'/>

   <img src="img/tattoogallery/zombiefingers.jpg" alt='Zombie Finger Tatt'/>

   <img src="img/tattoogallery/tyler.jpg" alt='Script'/>

   <img src="img/tattoogallery/3ursula.jpg" alt='Ursula'/>

   <img src="img/tattoogallery/locket.jpg" alt='Locket'/>

   <img src="img/tattoogallery/mechwing2.jpg" alt='Mechanical Wings'/>

   <img src="img/tattoogallery/backscript.jpg" alt='Script'/>

   <img src="img/tattoogallery/wingcolor.jpg" alt='Coloured Wing'/>

    </div>

 </div>

</div>

<div id="gallback">

<h2> Make Up </h2>

<div id="gallerywrap2">

    <div id='example2' class='container'>
        <img src="img/tattoogallery/outlineariel.jpg" alt='Zombie Ariel.'/>

        <img src="img/tattoogallery/horsecar.jpg" alt='Elaine tattooing'/>

        <img src="img/tattoogallery/2small.jpg" alt='Two Small Tattoos'/>

        <img src="img/tattoogallery/clown.jpg" alt='Clown'/>

        <img src="img/tattoogallery/lightsabers.jpg" alt='Finger Lightsabers'/>

        <img src="img/tattoogallery/flouder.jpg" alt='Flounder'/>

        <img src="img/tattoogallery/grenade.jpg" alt='Grenade'/>

        <img src="img/tattoogallery/colourcherryblossom.jpg" alt='Colour Cherry Blossom'/>

    </div>

</div>

</div>

</div>
</body>

</html> 
```

在化妆部分我将它重命名为gallerwrap2下的Gallery2。对于无样式的示例，您应该调用 `$.monte('#example2');`

# apache-flex - flex 4 中的 getChildren()

> ID：14142319
> 
> 赞同：0
> 
> 时间：2013-01-03T15:51:44.550
> 
> 标签：apache-flex, flex4, flash-builder

我的项目中有这个功能

```
public function changeFormItemsLabelWidth(form:Form, width:int):void
{
    var formItemsArray:Array = form.getChildren();
    for( var i:int = 0; i < formItemsArray.length; i++){
        if(formItemsArray[i].className == "FormItem"){
            var formItem:FormItem = formItemsArray[i] as FormItem;
            formItem.setStyle("labelWidth", width);
        }
    } 
```

我收到了这个错误：

**1061：通过静态类型 spark.components:Form 的引用调用可能未定义的方法 getChildren。**

有人可以告诉我如何替换 getchildren 方法吗？因为我正在迁移到 flex 4，并且这种方法不再存在。

**编辑：**

坦克的帮助我做了这样的事情并且它有效

```
public function changeFormItemsLabelWidth(form:Form, width:int):void
{

    var it:int = 0;
    var n:int = form.numElements;
    for (it; it < n; it++)
    {
        var formItemsArray:Array = form.getElementAt(it) as Array;
    }

    for( var i:int = 0; i < formItemsArray.length; i++){
        if(formItemsArray[i].className == "FormItem"){
            var formItem:FormItem = formItemsArray[i] as FormItem;
            formItem.setStyle("labelWidth", width);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:00:25.550

您需要使用`form.numElements`和迭代。每个元素都可以通过`form.getElementAt( iterator )`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:19:50.913

我知道您没有问这个问题，而且我不确定您要解决的问题，但是您在标准生命周期函数之外操纵 FormItems 大小的代码有点奇怪。只是一个建议。

# sql-server - 使用存储过程向表中插入一些数据

> ID：14142320
> 
> 赞同：9
> 
> 时间：2013-01-03T15:51:43.690
> 
> 标签：sql-server, tsql, stored-procedures

我正在尝试创建将一些数据插入到我的表中的存储过程，但是我遇到了一些错误，例如

> 列名无效

对于我在存储过程中指定的所有列。我有一个名为 ID 的 IDENTITY COLUMN，每次插入记录时都会增加一。表中还有其他一些列，但它们可以为空。这是我的存储过程，无法弄清楚我在这里做错了什么。

```
USE MYDB
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[sp_Test]
  @myID bigInt,
  @myFirstName nvarchar(50)
  ,@myLastName nvarchar(50)
  ,@myAddress nvarchar(MAX)
   ,@myPort int

AS 
BEGIN 

 SET NOCOUNT ON; 

  BEGIN 

insert into MYDB.dbo.MainTable (MyID, MyFirstName, MyLastName, MyAddress, MyPort)
values(@myID, @myFirstName, @myLastName, @myAddress, @myPort)

  END 

END
GO 
```

这是表定义：

```
USE [MYDB]
GO

/****** Object:  Table [dbo].[MainTable]    Script Date: 01/03/2013 11:17:17 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[MainTable](
    [ID] [bigint] IDENTITY(1,1) NOT NULL,
    [MyID] [bigint] NULL,
    [MyFirstName] [nvarchar](50) NULL,
    [MyLastName] [nvarchar](50) NULL,
    [MyAddress] [nvarchar](max) NULL,
    [MyPort] [int] NULL,
    [MyZipCode] [nchar](10) NULL,
    [CompName] [nvarchar](50) NULL
) ON [PRIMARY]

GO 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T16:22:09.783

如果您的表定义具有 IDENTITY 列，例如 IDENTITY(1,1)，则不要在 INSERT INTO 语句中包含 MyId。IDENTITY 的关键在于它给它下一个未使用的值作为主键值。

```
insert into MYDB.dbo.MainTable (MyFirstName, MyLastName, MyAddress, MyPort)
values(@myFirstName, @myLastName, @myAddress, @myPort) 
```

然后也不需要将@MyId 参数传递到您的存储过程中。所以改成：

```
CREATE PROCEDURE [dbo].[sp_Test]
@myFirstName nvarchar(50)
,@myLastName nvarchar(50)
,@myAddress nvarchar(MAX)
,@myPort int

AS 
```

如果你想知道新插入的记录的ID是什么添加

选择@@IDENTITY

到您的程序结束。例如[http://msdn.microsoft.com/en-us/library/ms187342.aspx](http://msdn.microsoft.com/en-us/library/ms187342.aspx)

然后，您将能够以任何您称之为 SQL 或 .NET 的方式来选择它。

Ps 向您展示表格定义的更好方法是编写表格脚本并将文本粘贴到您的 stackoverflow 浏览器窗口中，因为您的屏幕截图缺少通过 GUI 设置 IDENTITY 的列属性部分。为此，请右键单击表格“将表格编写为”-->“创建到”--> 剪贴板。您还可以体验 File 或 New Query Editor Window（所有自我解释），看看您得到了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-24T03:22:24.720

如果您尝试返回范围内的 ID，则使用`SCOPE_IDENTITY()`将是更好的方法。我不建议使用`@@IDENTITY`，因为它可以返回任何 ID。

```
CREATE PROC [dbo].[sp_Test] (
  @myID int output,
  @myFirstName nvarchar(50),
  @myLastName nvarchar(50),
  @myAddress nvarchar(50),
  @myPort int
) AS
BEGIN
    INSERT INTO Dvds (myFirstName, myLastName, myAddress, myPort)
    VALUES (@myFirstName, @myLastName, @myAddress, @myPort);

    SET @myID = SCOPE_IDENTITY();
END
GO 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-01-11T22:52:28.490

如果要在 SQL SERVER 中填充表，可以使用 while 语句，如下所示：

```
declare @llenandoTabla INT = 0;
while @llenandoTabla < 10000
begin
insert into employeestable // Name of my table
(ID, FIRSTNAME, LASTNAME, GENDER, SALARY) // Parameters of my table
VALUES 
(555, 'isaias', 'perez', 'male', '12220') //values
set @llenandoTabla = @llenandoTabla + 1;
end 
```

希望能帮助到你。

# asp.net - Global.asax 事件在 Application_End 之前以意想不到的顺序触发 Application_Start

> ID：14142321
> 
> 赞同：3
> 
> 时间：2013-01-03T15:51:46.720
> 
> 标签：asp.net, events, rest, nlog

我最近将 NLog (http://nlog.codeplex.com/) 日志添加到 Asp.Net ReSTful web 服务。

日志记录现在按预期正常工作，但结果出乎意料。在 Global.asax 中触发的事件的顺序在日志中没有被证明是有用的输出。

事件如下：

```
void Application_Start(object sender, EventArgs e)
{
    logger.Info("Application Started");
}

void Application_End(object sender, EventArgs e)
{
    //  Code that runs on application shutdown
    logger.Info("Application Ended");
}

void Application_Error(object sender, EventArgs e)
{
    // Code that runs when an unhandled error occurs
    logger.Error("Unhandled Application Error");
}

void Session_Start(object sender, EventArgs e)
{
    // Code that runs when a new session is started
    logger.Info("Session Started");
}

void Session_End(object sender, EventArgs e)
{
    // Code that runs when a session ends. 
    // Note: The Session_End event is raised only when the sessionstate mode
    // is set to InProc in the Web.config file. If session mode is set to StateServer 
    // or SQLServer, the event is not raised.
    logger.Info("Session Ended");
} 
```

日志输出不是您所期望的。这是一个开始然后停止。

```
2013-01-03 14:54:25.2106|INFO|PoppyService.Global|Application Ended
2013-01-03 14:54:25.8166|INFO|PoppyService.Global|Application Started
2013-01-03 14:54:27.3610|INFO|PoppyService.Configuration|Configuration Registration
2013-01-03 14:54:29.9170|INFO|PoppyService.Global|Session Started
2013-01-03 14:54:36.7722|INFO|PoppyService.Global|Application Started
2013-01-03 14:54:36.9750|INFO|PoppyService.Configuration|Configuration Registration 
```

这些事件以不寻常的顺序和错误的时间触发。

ps 忽略“配置注册”

我目前正在使用 Visual Studio 2010 启动该服务，并且属性 -> Web 中的服务器设置设置为“使用本地 IIS Web 服务器”而不是 VSDS。

放置在事件中的断点不会停止执行，除了 Session_Start，但我猜这是因为事件发生在调试器启动之前或再次可能是因为使用 IIS 服务器？

# asp.net - 如何处理多次重新抛出和记录的异常

> ID：14142322
> 
> 赞同：3
> 
> 时间：2013-01-03T15:51:48.523
> 
> 标签：asp.net, exception, error-handling, enterprise-library

我正在处理的当前项目有问题。开发人员为 try 块添加了多个 catch 块。每个捕获都记录错误，然后重新抛出它。像这样的东西：

```
catch (OdbcException ex)
{
    ex.Data.Add("CodeSource", MethodBase.GetCurrentMethod().Name);
    ex.Data.Add("My Value", myValue);
    Common.Logger.LogError(ex, "DataAccess");
    throw;
}
catch (Exception ex)
{
    ex.Data.Add("CodeSource", MethodBase.GetCurrentMethod().Name);
    ex.Data.Add("My Value", myValue);
    Common.Logger.LogError(ex, "DataAccess");
    throw;
} 
```

最重要的是，调用类也可能有 catch 块做同样的事情。所以日志文件是一团糟。我已经看到记录了多达 5 条以上的相同消息。

无论如何我可以只记录一次错误而不必到处更改代码吗？可悲的是，该项目已接近尾声，因此他们不希望将额外的时间花在正确的工作上。><

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:29:27.123

我唯一能想到的是，如果您控制`Common.Logger`该类，则在其中添加某种逻辑以仅记录第一次发生的异常。您可以尝试使用一些线程存储来跟踪异常，或者由于标签提到 asp.net，您可以使用[HttpContext.Items](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.items.aspx)。例如：

```
public static class Logger
{
    public static void LogError(Exception e, string category)
    {            
        int hashcode = e.GetHashCode();
        if (!HttpContext.Current.Items.Contains(hashcode))
        {
            HttpContext.Current.Items.Add(hashcode, null); 
            System.Diagnostics.Trace.TraceError(e.ToString());
        }
    }
} 
```

也许这有帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:37:41.943

如果您只想在它发生时记录它，那么当它被抛出时，也许您只需要修改 Common.Logger.LogError 以添加类似 ex.Data.Add("ExceptionLogged", true) 的内容，那么您只需要循环找出其中一个是否有这个值的内部异常，如果有，跳过保存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:41:39.873

最佳实践是不要在每个级别都捕获异常。如果您只是在记录，那么您只想在“顶部”捕获并记录异常。

“顶”是什么意思？这取决于您使用的技术。一种思考方式是“在最后可能的时刻”捕获异常。在你的代码中捕捉它，如果你没有捕捉到它，它根本不会被捕捉到。

这可能在事件处理程序中，或者在异步回调中，或者在 Web 服务的顶层。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T17:04:02.203

您可以使用 Global.asax 的 Application_Error 事件记录任何异常（但请注意[这些](https://stackoverflow.com/questions/3713939/global-asax-application-error-not-firing) [警告](https://stackoverflow.com/questions/6508415/application-error-not-firing-when-customerrors-on)）：

```
protected void Application_Error(object sender, EventArgs e)
{
    LogExceptionDetails(Server.GetLastError());
    HttpContext.Current.Server.Transfer("~/Error.aspx");;
} 
```

如果您将[其实现为 HttpModule](http://codebetter.com/karlseguin/2006/06/12/global-asax-use-httpmodules-instead/)，那么您的异常日志记录可以插入到其他应用程序中，或者只需更改 web.config 文件即可将其删除。有关代码详细信息，请参见该链接。

或者[，ELMAH](http://code.google.com/p/elmah/)是一个非常有用的异常记录库。登录后，您可以重定向到[自定义错误页面](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/displaying-a-custom-error-page-cs)（有关代码详细信息，请参见链接）：

```
<customErrors mode="RemoteOnly" defaultRedirect="~/ErrorPages/CustomError.aspx">
    <error statusCode="404" redirect="~/ErrorPages/404.aspx" />
</customErrors> 
```

# nginx - 如何找出我编译 nginx 时使用的标志？

> ID：14142323
> 
> 赞同：1
> 
> 时间：2013-01-03T15:51:50.493
> 
> 标签：nginx

我试图找出我编译 nginx 的标志，以便我可以重新编译它，但每次我输入 nginx -V 或 -v 它都会给我 nginx 0.91 或类似的东西。

有人可以提供一些见解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:37:47.087

在 Ubuntu 机器上 -V 按预期工作：

```
$ nginx -V
nginx version: nginx/1.1.19
TLS SNI support enabled
configure arguments: --prefix=/etc/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-client-body-temp-path=/var/lib/nginx/body --http-fastcgi-temp-path=/var/lib/nginx/fastcgi --http-log-path=/var/log/nginx/access.log --http-proxy-temp-path=/var/lib/nginx/proxy --http-scgi-temp-path=/var/lib/nginx/scgi --http-uwsgi-temp-path=/var/lib/nginx/uwsgi --lock-path=/var/lock/nginx.lock --pid-path=/var/run/nginx.pid --with-debug --with-http_addition_module --with-http_dav_module --with-http_geoip_module --with-http_gzip_static_module --with-http_image_filter_module --with-http_realip_module --with-http_stub_status_module --with-http_ssl_module --with-http_sub_module --with-http_xslt_module --with-ipv6 --with-sha1=/usr/include/openssl --with-md5=/usr/include/openssl --with-mail --with-mail_ssl_module --add-module=/build/buildd/nginx-1.1.19/debian/modules/nginx-auth-pam --add-module=/build/buildd/nginx-1.1.19/debian/modules/nginx-echo --add-module=/build/buildd/nginx-1.1.19/debian/modules/nginx-upstream-fair --add-module=/build/buildd/nginx-1.1.19/debian/modules/nginx-dav-ext-module 
```

-V 选项是在 nginx 0.5.5 中添加的，因此您应该可以使用它。它可以在没有任何选项的情况下编译吗？的确切和完整输出是`nginx -V`什么？

# c# - 意外的 Linq 行为 - ToList()

> ID：14142328
> 
> 赞同：8
> 
> 时间：2013-01-03T15:51:58.543
> 
> 标签：c#, .net, linq, linq-to-nhibernate

我有两个类似的查询理论上返回相同的结果：

```
var requestNotWorking = SessionManagement.Db.Linq<Item>(false).Where(i => 
                        i.Group != null && i.Group.Id == methodParameter)
                       .ToList(); 
```

此请求返回 0 个项目，即使它应该返回一个。以下是后者的重写，但调用了该`ToList()`方法。此请求有效并返回第一个查询中预期的项目！

```
var requestWorking = SessionManagement.Db.Linq<Item>(false).ToList().Where(i => 
                     i.Group != null && i.Group.Id == methodParameter).ToList(); 
```

注意：`SessionManagement.Db.Linq<Item>(false)`是一个通用的 Linq to Nhibernate 方法，其布尔属性确定请求是必须在缓存中执行（true）还是在数据库中执行（false）。据说这种方法没有任何问题，因为它在解决方案的许多其他部分都可以正常工作。Item 的映射没什么花哨的：没有包和以下参数： `lazy="false" schema="dbo" mutable="false" polymorphism="explicit"`

为什么会这样？

**编辑**：

requestNoWorking 生成的 sql 请求以：

`(Item.Group_ID is not null) and Item.Group_ID=@p0',N'@p0 int',@p0=11768`

requestWorking生成的sql请求大致是一个`select * from dbo.Items`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:00:08.890

i'm assuming the nhibernate session thing you've got going on there returns a queryable. if so, the evaluation of the first query is delayed until the `.ToList()` call, and the entire query is run on the server. I would suggest that you run a trace on the sql server if possible, or perhaps download [NHProf](http://www.hibernatingrhinos.com/products/nhprof) to see what the actual query being executed is.

the second query is evaluated as soon as you hit the first `.ToList()`, so you're pulling the whole table back from the db, and then filtering using .net. i honestly can't tell you why they would be evaluating differently, but i assume there is something with the mapping/configuration that is causing the db query to be written slightly wrong.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:10:19.277

我对您关于`c.Group.Id != null`. 但是，删除它并没有改变任何东西。我发现删除`mutable="false"`属性解决了这个问题。这似乎有点神奇，但它奏效了。

我发布的请求实际上是在检查更新/删除可能性的方法中发生的。我的结论是，以某种方式使 Item 不可变会导致结果失败。但我不明白为什么 requestWorking 工作了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:59:58.790

All I can see is that in the 2nd version, your `Where` is executed by LINQ to Objects rather than LINQ to NHibernate. So the first version must do something that LINQ to NHibernate doesn't digest very well.

I'm *thinking* it's the `i.Group != null` that LINQ To NHibernate has a problem with, seeing that the use of `null` is CLR-specific. You may need to use another construct in LINQ to NHibernate to test for empty field values.

# ember.js - 如何将 Ember 根模板放置到特定位置

> ID：14142330
> 
> 赞同：3
> 
> 时间：2013-01-03T15:51:59.430
> 
> 标签：ember.js, handlebars.js

那里有很多很棒的 Ember 示例，但它们似乎都只显示了在沙箱 DOM 上呈现的 Ember 模板，没有实际的`HTML`或`BODY`标记。它展示了如何将模板很好地相互链接，但遗漏了一个主要问题：

如何将根 Ember 模板放入页面 DOM 上的特定位置？

我已经`appendTo()`在文档中看到了这个函数，但这似乎是错误的和 hacky。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T16:03:54.603

您可以在创建时将元素`id`属性传递给`rootElement`您的应用程序：

JS：

```
App = Ember.Application.create({
rootElement : "#ember-application-root",
}); 
```

HTML：

```
<html>
  <body>
   <div id="ember-application-root"></div>  
  </body>
</html> 
```

# ruby-on-rails - ::Rails::Engine 和 Rails::Engine 有什么区别

> ID：14142341
> 
> 赞同：0
> 
> 时间：2013-01-03T15:52:23.113
> 
> 标签：ruby-on-rails, ruby

> **可能重复：**
> [Ruby 的双冒号 (::) 运算符用法差异](https://stackoverflow.com/questions/10482772/rubys-double-colon-operator-usage-differences)

我为 Rails制作了一个[很棒的字体插件，在](https://github.com/goofansu/rails-font-awesome)`lib/rails-font-awesome.rb`

```
module Rails
  module Font
    module Awesome
      class Engine < ::Rails::Engine
      end
    end
  end
end 
```

我可以改用 Rails::Engine 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:55:56.360

`::`before`Rails`告诉它跳过正常遍历层次结构以查找类并直接进入顶部。

# mysql - 如何通过正则表达式删除包含随机字符的字符串

> ID：14142345
> 
> 赞同：1
> 
> 时间：2013-01-03T15:52:32.343
> 
> 标签：mysql, regex, replace, notepad++, sublimetext2

我有一个包含这些字符串的文本文件（.sql 数据库）

```
[center:t1jrwz84]
[center:18gl5k7g]
[center:3tkgm3zz]
[center:1jrwz84d] 
```

它们出现在这样的文本文件中

```
Hello [center:t1jrwz84] everyone. How are[center:18gl5k7g]you today?
Glad to meet[center:3tkgm3zz] you. Thanks for[center:1jrwz84d] coming. 
```

如何使用正则表达式语法通过编辑器 Notepad++、Sublime、...的替换功能删除所有字符串？

我在 Notepad++ 中尝试这种正则表达式语法

```
- Find what: [[center].*.[]]
- Replace with: 
```

这就是结果

```
Hyou today?
Glad  coming. 
```

当然这是错误的。这不是我的目标。我的目标是

```
Hello everyone. How are you today?
Glad to meet you. Thanks for coming. 
```

PS：我想删除主题，因为这些是smf论坛数据库帖子中的错误bbcode，html标签。我使用自定义 bbcode 和 Almsamim WYSIWYG 编辑器从 phpbb（中心、右侧、对齐、字体……）转换它。MySQL 在替换查询中不支持正则表达式语法，UDF 插件非常复杂，所以我必须使用 .sql 文件和文本编辑器来完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:57:43.160

你需要一个[非贪婪的](http://www.regular-expressions.info/optional.html)捕获；`.*`需要用 a 来限定，以`?`防止吞下所有内容，直到最后一个 ']' 行。

寻找：`\[center\:(.*?)\]`

并一无所有。在这里，我还删除了多余的括号，并使用反斜杠转义了 '['、']' 和 ':'。

# iphone - 创建自定义可可 UI 控件

> ID：14142352
> 
> 赞同：0
> 
> 时间：2013-01-03T15:53:03.207
> 
> 标签：iphone, objective-c, xcode

用例：
1\. 创建一个由几个基本 UI 元素组成的**基于“.XiB”的**
UI 控件 2\. 将控件 @ [1] 嵌入到例如。一个 UIViewController

使用 C#/.NET 可以创建具有专用 UI​​ 的 WinForm 控件，然后将它们嵌入到其他控件中，在 Cocoa @ iPhone 中是否有等价物？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:01:04.810

放置`UIView`在 xib 视图之一上，选择它并转到 Identity Inspector 并将类更改为您的：

![在此处输入图像描述](../Images/3d3cb9f8751ece7a07d440d781ff6a99.png)

请注意，使用这种方法，自定义视图不会在 Xib 编辑器中绘制，您会在`UIView`那里看到它。您需要为自定义视图“几个基本 UI 元素”准备插座。

# javascript - 如何在 NodeJS 中制作一个简单的网络爬虫？

> ID：14142353
> 
> 赞同：2
> 
> 时间：2013-01-03T15:53:04.797
> 
> 标签：javascript, jquery, node.js

我正在尝试创建一个简单的网络抓取工具，它执行以下操作：

1.  访问 Yellowpages.com
2.  选择它尚未抓取的第一个类别
3.  点击尚未抓取的第一个业务
4.  抓取业务的标题、电话号码和描述
5.  将它抓取的数据附加到 .csv 文件（或数据库）中
6.  回到步骤 1

我认为 Node.js / jQuery 将是最容易实现这样的事情。任何人都可以为我指出一个教程或快速为我整理一些东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:59:18.513

Just read an article on Hacker News yesterday about [scraping with NodeJS and Chimera](http://www.deanmao.com/2012/08/13/enter-chimera/). The same author wrote an earlier article on [Enhanced web scraping with NodeJS](http://www.deanmao.com/2012/08/07/enhanced-web-scraping-in-nodejs/).

The Chimera one looks cool, because it uses a headless web browser (QtWebkit), so you get the pages to load anything they load with JS, which I need for a scraper I'm building at work.

# c# - 通过窗口中包含的文本查找窗口句柄

> ID：14142355
> 
> 赞同：1
> 
> 时间：2013-01-03T15:53:11.223
> 
> 标签：c#, winforms

我有一个在无人值守机器上运行的应用程序。当此应用程序遇到问题时，它会弹出一个消息框（使用与主窗口相同的标题），需要单击“确定”将其关闭。我要做的是识别应用程序何时弹出消息框并做出相应的响应。

我知道 AutoIt 有一个名为 WinWait 的函数，它可以让您检查窗口的内容（而不是标题）并获取窗口的句柄。有没有办法可以在 C# 中做类似的事情？

我确实进行了扫描，但找不到任何关于此的具体内容。我已经可以通过标题获取窗口，但需要阅读消息框内容以识别消息框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:56:06.563

您需要 pInvoke 到 EnumWindows：

[http://www.pinvoke.net/default.aspx/user32.enumwindows](http://www.pinvoke.net/default.aspx/user32.enumwindows)

然后，您可以遍历窗口并比较标题。

更新：由于控件也是窗口，因此您也可以遍历它们。因此，您可以查找可能包含您要查找的文本的特定标签控件。如果您使用 Spy++，您可以确定您正在寻找的特定控件的特征（例如窗口类），以帮助您缩小搜索范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:24:53.573

GUI 窗口不包含文本，它包含像素。其中一些像素可能被安排为以文本形式出现在人类读者面前，但除非窗口公开一个界面来获取其文本，否则如果没有复杂的 OCR，您将无法阅读它。话虽如此，大多数常用控件确实公开了这样的接口。如果窗口由标签（静态）、编辑框（编辑）等组成，您可以枚举那些子窗口并读取它们的文本。例如，一个标准消息框包含一个可以阅读的标签控件。请注意，并非所有应用程序都使用标准控件或对话框。

这是在标准消息框中读取标签控件的解决方案： [https ://stackoverflow.com/a/5982827/351385](https://stackoverflow.com/a/5982827/351385)

# ios - 表视图数据未显示在 iOS6 和 Xcode 的新故事板场景中

> ID：14142356
> 
> 赞同：1
> 
> 时间：2013-01-03T15:53:12.233
> 
> 标签：ios, objective-c, xcode, storyboard, tableview

我第一次尝试实现第二个场景，但遇到了一些问题。只需尝试在表格视图中显示包含数组数据的单元格块。与我的第一个场景非常相似的代码，这就是为什么我对它为什么不起作用感到困惑。

代码如下：

```
#import "ChooseServerView.h"
#import "ViewController.h"

@interface ChooseServerView ()

@end

@implementation ChooseServerView;
@synthesize serverSelection;

- (void)viewDidLoad
{

    serverSelection = [[NSArray alloc] initWithObjects:@"Chicgo, IL",@"London, UK",@"San Jose, CA",@"Washington, DC", nil];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

#pragma mark - Table View Methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;              // Default is 1 if not implemented
{
    return 2;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section;    // fixed font style. use custom view (UILabel) if you want something different

{
    if (section == 0) {
        return @"Standard Test Locations:";
    }
    else {
        return @"Quality Test Locations:";
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;

{
    if (section == 0) {
        return [serverSelection count];
    }
    else {
        return 1;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;

{

    UITableViewCell *stdLocCell = nil;

    stdLocCell = [tableView dequeueReusableCellWithIdentifier:@"serverSelection"];

    if (stdLocCell == nil) {

    stdLocCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"serverSelection"];

    }

    switch (indexPath.section) {
        case 0:
            stdLocCell.textLabel.text = [serverSelection objectAtIndex:indexPath.row];
            break;
        case 1:
            stdLocCell.textLabel.text = @"Speed Test";
            break;
        default:
            break;
    }

    return stdLocCell;

}

@end 
```

转场按预期工作，导航和标签栏出现，但没有单元格或数据，只是空白。

移动到新场景时，输出中有一条注释：

> 2013-01-03 13:08:34.878 MyConnection[15996:907] Interface Builder 文件中的未知类 GLKView。

不确定这是否与缺乏数据有关。

New Class 控制器连接到情节提要上的新场景，并出现在编译指令中，如下所示：

![编译源](../Images/365d6b3139bdaeb6af22034b1a7b7379.png)

![自定义类](../Images/7a09f1f19af799264ac015169820ef3a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:22:57.457

您是否将委托和数据源连接到视图控制器。如果表格没有向您的视图控制器寻求委派，您将获得一个空白表格视图。

# javascript - 在javascript函数开始或结束时防止默认事件动作的优点和缺点

> ID：14142357
> 
> 赞同：11
> 
> 时间：2013-01-03T15:53:16.200
> 
> 标签：javascript, javascript-events, event-handling

在以下 javascript 代码示例中：

```
var myButton = $('#myButton');
myButton.click(function (event) {
    /* stuff... */
    event.preventDefault();
}); 
```

在函数开始或结束时阻止默认操作的优点和缺点是什么？- 假设最终无条件地想要阻止它。有任何技术理由选择一种方式吗？

在网上冲浪时，我发现只有[一个参考](http://webcache.googleusercontent.com/search?q=cache:6MAbJBGSznkJ%3adamionhart.com/wordpress/2012/06/02/start-or-end-function-with-e-preventdefault/+&cd=1&hl=es&ct=clnk&gl=es)- 死博客，抱歉 Google 缓存链接 - 并指出在开始时阻止默认操作将避免在 js 函数崩溃的情况下发生该操作。

**注意**：我在示例中使用 jQuery 只是为了熟悉，问题与 jQuery 无关，经典事件处理模式的答案将是相同的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T15:58:22.863

出于你所说的原因，我把我的预防代码放在了开头。如果在函数前面的 js 前面有错误，那么默认的动作就已经被阻止了。这可能是生产中所需的行为，但也有助于调试您的开发代码，请考虑：

```
$('a').on('click', function(e) {
  console.log('some debugging information here');
  // Other stuff
  e.preventDefault();
}); 
```

如果发生错误，页面可能会在您阅读调试信息之前刷新或跟随锚点的 href。将操作切换到顶部将确保您可以在控制台中读取输出。

**编辑**正如 Axel 在评论中指出的那样，另一个优点是您立即意识到代码正在替换默认操作而不是补充它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T13:06:48.827

最终决定放在哪里`preventDefault()`完全取决于开发人员的选择。尽管在大多数情况下已经指出，更好的选择是将它放在代码的最顶部以避免像这样的不可预测的行为：

```
 $('#one').click(function(ev){
  //ev.preventDefault(); // for 90% this is better choice, consider example below
  alert('no hey!');
  return; // this is very simple example, in more complex code sometimes it could not be such obvious
  ev.preventDefault(); // sometimes though it may be required to keep default action depending on some cases
}) 
```

但是必须承认，您可能会根据某些情况保留默认操作，因为我的观点是这种情况很少见，但是您可以将防止默认设置在底部并在某些 if 条件下使用 return。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:58:40.110

You don't have any diference, the message queue is trapped in your function.

# javascript - 使用javascript，一个对象如何从另一个对象派生，而基础对象可以独立调用？

> ID：14142363
> 
> 赞同：1
> 
> 时间：2013-01-03T15:53:41.133
> 
> 标签：javascript, oop, inheritance

例如：

```
object1 = function() {
  console.log('action1');
}

object2 = function() {
  console.log('action2');
}

object1(); //should log "action1"
object2(); //I need this to log "action1" and "action2" 
```

我还需要 object2 能够覆盖 object1 的方法，因此上述内容远非如此（不包含方法）；

以下是我想到的我不想寻找的解决方案：

```
object2 =     object2 = function() {
  object1(); //this won't allow me to override object1's methods. THIS IS IMPORTANT!!
  console.log('action2');
} 
```

这是一个尝试只构建和使用蓝图（原型）：

```
object1 = function() {};
object1.prototype.action1 = function() {
  console.log('action1');
}

object2 = function() {};

object2.prototype = new object1();
object2.prototype.constructor = object2;

//object2.prototype.action1 = function() { //I can overwrite the inherited action here
//  console.log('actionCHANGED');
//}
object2.prototype.action2 = function() {
  console.log('action2');
}

var foo = new object2(); //new object1(); will do object1's actions instead, as desired.

for (var method in foo) { //run all of foo's methods
foo[method]();
} 
```

但这也不起作用。它通常会乱序运行功能（原因很明显。）

我尝试了其他一些扩展方法，但从未得到我想要的东西。我现在想不出这个例子，但是其他方法之一使 object2 完全按照我的意愿行事，但 object1 只有一个原型函数，因此“new object1()”没有导致任何事情发生。将函数移动到 object1 的实际函数会导致它的动作在 object2 从它继承时运行，这在这种情况下也不好。

我的整个方法可能需要改变。我对想法持开放态度。这样做的实际目的是我正在重新编写我杂乱无章的程序风格的 youtube 插件。我希望能够轻松调用它并改变它的工作方式。

```
$('selector').youtubePlayer({type:'basic'}) //like object1
$('selector').youtubePlayer({type:'withThumbs'}) //like object2
$('selector').youtubePlayer({type:'allFeatures'}) //even more complex object 
```

但 jQuery 并不是这里的重要细节……它需要在没有它的情况下简单地工作。像：

```
youtubePlayer(selector, type); 
```

或者

```
new youtubePlayer(selector, type); 
```

因此，我们有它。请帮助（并原谅）我的无知。我一直在努力学习这一点。谢谢！

编辑：这正是我正在做的。

真实示例：object1（或函数 1）有 2 个方法（函数）。object1 的第一个功能是将 div 附加到选择器。object1 的第二个功能是加载 youtube api。当 api 加载时，youtube 播放器将加载到上面的 div 中。

object2 有 2 个方法。object2 的第一个功能是尽可能从缓存中获取 youtube 播放列表提要，否则从 youtube 获取提要并将其保存到缓存中。object2 的第二个功能是显示提要中的缩略图

object3 以相同的方式具有更多功能，并且完全依赖于 object2 的函数在 object3 之前运行。

如果我只想要对象 1 的动作，我只想写“object1();” 或 "new object1(); 等每个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:08:44.010

我不确定，但你只是想在覆盖的方法中调用`object1`'`action1`方法吗？

```
object2.prototype.action1 = function() {
  object1.prototype.action1.call(this);
  console.log('actionCHANGED');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:03:35.220

我使用了这段代码[Inheritance Manager](http://www.cyberminds.co.uk/blog/articles/how-to-implement-javascript-inheritance.aspx)，它非常适合我当前的项目。

我曾尝试过其他解决方案，但似乎没有一个提供调用基类代码和覆盖方法等的能力。

网站上的代码应该简单明了。如果您需要更多示例，请告诉我。

这是我得到的版本，重命名以适合我的项目风格：

```
_inheritanceManager = {};
_inheritanceManager.extend = function(subClass, baseClass) 
{
    function inheritance() { }
    inheritance.prototype = baseClass.prototype;
    subClass.prototype = new inheritance();
    subClass.prototype.constructor = subClass;
    subClass.baseConstructor = baseClass;
    subClass.superClass = baseClass.prototype;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T20:18:06.607

您可以简单地使用直接原型继承。

创建类定义 A：

```
function A() {}
A.prototype.action = function() {
  console.log('A::action');
} 
```

创建一个类定义 B，它继承自 A：

```
function B() {}
B.prototype = new A();
B.prototype.constructor = B;
B.prototype.action = function() {
  B.prototype.action.call(this);
  console.log('B::action');
} 
```

然后创建适当的实例：

```
var a = new A();
var b = new B();

a.action(); // A::action
b.action(); // A::action, B::action 
```

当然，你可以使用轻量级继承模型库 Fiber.js，在[https://github.com/linkedin/Fiber](https://github.com/linkedin/Fiber)，它为你抽象了继承的所有引导

```
var A = Fiber.extend(function() {
  return {
    action: function() {
      console.log('A::action');
    }
  }
});

var B = A.extend(function(base) {
  return {
    action: function() {
      base.action.call(this);
      console.log('B::action');
    }
  }
});

var a = new A();
var b = new B();

a.action(); // A::action
b.action(); // A::action, B::action 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-05T21:18:27.743

已经有一段时间了，我学到了很多关于继承的知识，并且熟悉了几种模式。我想我会分享以防它对某人有所帮助。下面是我正在寻找的模式。这是一篇解释它的文章：http: [//blog.javascriptroom.com/2013/01/21/the-initializer-pattern/](http://blog.javascriptroom.com/2013/01/21/the-initializer-pattern/)

要查看它的实际效果，请单击此处：http: [//jsbin.com/orijaz/2/edit](http://jsbin.com/orijaz/2/edit)

```
var foo = {
  run: function() {
    this.action1();
    this.action2();
  },
  action1: function() {
    console.log('action1 '+this.objName);
  },
  action2: function() {
    console.log('action2 '+this.objName);
  },
  objName: 'foo'
};

var bar = Object.create(foo);
bar.run = function() {
  this.first();
  foo.run.call(this);
  this.last();
};
bar.first = function() {
  console.log('first '+this.objName);
};
bar.last = function() {
  console.log('last '+this.objName);
};
bar.objName = 'bar';

foo.run();
bar.run(); 
```

**老答案：**

```
var object1 = function() {};
//NEW METHODS
  object1.prototype.action1 = function () { console.log('action1'); };
  object1.prototype.action2 = function () { console.log('action2'); };

  object1.prototype.run = function() {
    this.action1();
    this.action2();
  };

var object2 = function() {};
  //INHERIT
  object2.prototype = new object1();
  //MODIFY METHODS
  object2.prototype.action2 = function() {
    console.log('action2 changed!!'); 
  };
  //NEW METHODS
  object2.prototype.action3 = function () { console.log('action3'); };

  object2.prototype.run = function() {
    object1.prototype.run.call(this);
    this.action3();
  };

object1.prototype.run(); //I do the basic 2 actions
object2.prototype.run(); //I do the basic 2 actions with any changes made, then my own new actions 
```

# javascript - 在html5视频中跳转到currentTime后自动播放

> ID：14142366
> 
> 赞同：2
> 
> 时间：2013-01-03T15:53:49.943
> 
> 标签：javascript, html, html5-video

我正在尝试创建一个视频，该视频会在您单击按钮后跳转到视频中的某个点后自动播放。我有它，以便视频跳转到现场，但我不知道如何让它从那里自动播放。我是 javascript 新手，我认为可能缺少一个简单的解决方案。

```
 function Fwd(){
        if (video.currentTime < 17.91 && video.currentTime >= 0)
        { (video.currentTime = 17.92)
        }
        else if (video.currentTime < 35.93 && video.currentTime > 17.91)
        { (video.currentTime = 35.94)
        }
    } 
```

> 这是我的一些html

```
<div id="sideright">
  <input type="button" id="fwdButton" onclick="Fwd()" class="button_fwdrew" />
</div>

<video id="video" width="896" height="504" data-setup="{}" >
<source src="video/myAwesomeVideo.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
<source src="video/myAwesomeVideo.webmhd.webm" type='video/webm; codecs="vp8, vorbis"'>
<source src="video/myAwesomeVideo.oggtheora.ogv" type='video/ogg; codecs="theora, vorbis"' />
<p>Your browser doesn't support HTML5\. Maybe you should upgrade.</p>
</video> 
```

> 这是我的更多 JavaScript

```
var v = document.getElementById("video")[0];
    v.volume = .5;
    v.pause();
    video.onpause = video.onplay = function(e) {
    playpause.value = video.paused ? 'Play' : 'Pause';
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:17:09.067

不[`video.play()`](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#playing-the-media-resource)工作？

```
function Fwd(){
    var video = document.getElementById("video");
    if (video.currentTime < 17.91 && video.currentTime >= 0)
    { 
        (video.currentTime = 17.92)
    }
    else if (video.currentTime < 35.93 && video.currentTime > 17.91)
    { 
        (video.currentTime = 35.94)
    }
    video.play();
} 
```

我为`video`变量添加了一个声明，因为这似乎引起了一些混乱。

在您的编辑中，您创建了一个`v`变量，但您已经为它分配了与元素关联的 DOM 对象的第一个属性或方法的值`id`（`video`这是数组访问`[0]`器在 之后所做的`document.getElementById("video")`）。几乎可以肯定，该属性或方法本身不会有属性`volume`或方法`pause()`。之后，您已经开始使用`video`变量而没有明显定义它或设置它的值。它可能是在您尚未发布的代码中定义的，但从您所展示的内容来看，这将是一种浪费，因为您显然试图使`v`变量成为对视频元素的引用 - 不需要两者`v`和`video`.

决定一个变量来保存您对视频元素的引用，使用它分配它`document.getElementById("video")`，然后一致地使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T15:08:16.653

```
var update = function() {
    if (document.getElementById("video").currentTime < 10) 
    {
        document.getElementById("video").currentTime = 10;
    }
};
document.getElementById("video").setAttribute("ontimeupdate", "update();");
document.getElementById("video").play(); 
```

# css - 如何在保持图像比例的同时用图像填充 div？

> ID：14142378
> 
> 赞同：168
> 
> 时间：2013-01-03T15:54:21.593
> 
> 标签：css, image, positioning

我找到了这个线程——[如何在保持图像纵横比的同时拉伸图像以填充 <div>？](https://stackoverflow.com/questions/1891857/how-do-you-stretch-an-image-to-fill-a-div-while-keeping-the-images-aspect-rat)——这不完全是我想要的。

我有一个特定大小的 div 和里面的图像。无论图像是横向还是纵向，我都想**始终用图像填充 div。**并且图像是否被截断也没关系（div本身已隐藏溢出）。

因此，如果图像是纵向的，我希望它`width`是这样`100%`的，`height:auto`所以它保持成比例。如果图像是横向的，我希望`height`是`100%`和`width to be`auto`。听起来很复杂吧？

```
<div class="container">
   <img src="some-image.jpg" alt="Could be portrait or landscape"/>
</div> 
```

因为我不知道该怎么做，所以我只是简单地创建了一个我的意思的快速图像。我什至无法恰当地描述它。

![在此处输入图像描述](../Images/808714a795307b79d61b840e0ab3e44d.png)

所以，我想我不是第一个问这个的人。但是我真的找不到解决方案。也许有一些新的 CSS3 方法可以做到这一点 - 我正在考虑 flex-box。任何想法？也许它比我预期的更容易？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2013-12-03T02:06:40.410

如果我正确理解你想要什么，你可以离开图像的宽度和高度属性以保持纵横比并使用 flexbox 为你做居中。

```
.fill {
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden
}
.fill img {
    flex-shrink: 0;
    min-width: 100%;
    min-height: 100%
}
```

```
<div class="fill">
    <img src="https://picsum.photos/id/237/320/240" alt="" />
</div>
```

[JSFiddle在这里](http://jsfiddle.net/Rx37G/1/)

我在 IE9、Chrome 31 和 Opera 18 上测试成功。但没有测试其他浏览器。与往常一样，您必须考虑您的特定支持要求。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2016-08-25T16:08:01.947

有点晚了，但我遇到了同样的问题，最后在另一个 stackoverflow 帖子（[https://stackoverflow.com/a/29103071](https://stackoverflow.com/a/29103071)）的帮助下解决了这个问题。

```
img {
   object-fit: cover;
   width: 50px;
   height: 100px;
} 
```

希望这仍然可以帮助某人。

Ps：也可以与*max-height*、*max-width*、*min-width*和*min-height* css 属性一起使用。使用**100%**或**100vh** / **100vw**等长度单位来填充容器或整个浏览器窗口非常方便。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-07-23T21:20:15.733

下面的所有答案都有固定的宽度和高度，这使得解决方案“没有响应”。

为了达到结果但保持图像响应，我使用了以下内容：

1.  在容器内放置一个具有所需比例的透明 gif 图像
2.  使用要调整大小和裁剪的图像为图像标记内联 css 背景

HTML：

```
<div class="container">
    <img style="background-image: url("https://i.imgur.com/XOmNCwY.jpg");" src="img/blank.gif">
</div> 

.container img{
   width: 100%;
   height: auto;
   background-size: cover;
   background-repeat: no-repeat;
   background-position: center;
}​ 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-08-05T08:54:02.280

这应该这样做：

```
img {    
min-width: 100%;
min-height: 100%;
width: auto;
height: auto;
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-06-02T09:59:10.403

一个老问题，但值得更新，因为现在有办法。

正确的基于 CSS 的答案是使用`object-fit: cover`，它的工作方式类似于`background-size: cover`. 定位将由`object-position`属性处理，默认为居中。

**但是**任何 IE / Edge 浏览器或 Android < 4.4.4 都不支持它。此外，`object-position`Safari、iOS 或 OSX 也不支持。Polyfills 确实存在，[object-fit-images](https://github.com/bfred-it/object-fit-images/)似乎提供了最好的支持。

有关该属性如何工作的更多详细信息，请参阅[CSS 技巧文章以`object-fit`](https://css-tricks.com/almanac/properties/o/object-fit/)获取解释和演示。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-09-11T17:24:35.603

您可以使用 css flex 属性来实现这一点。请看下面的代码

```
.img-container {
  border: 2px solid red;
  justify-content: center;
  display: flex;
  flex-direction: row;
  overflow: hidden;

}
.img-container .img-to-fit {
  flex: 1;
  height: 100%;
}
```

```
<div class="img-container">
  <img class="img-to-fit" src="https://images.pexels.com/photos/8633/nature-tree-green-pine.jpg" />
</div>
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2021-05-18T18:16:55.877

我想出的一个简单方法是`object-fit: cover`在容器内的 img 上使用

```
<div class="container"> 
  <img class="image" src="https://mymodernmet.com/wp/wp-content/uploads/2020/11/International-Landscape-Photographer-Year-PhotographER-1st-KelvinYuen-2.jpg">
</div> 
```

```
.image { 
  height: 100%;
  width: 100%;
  object-fit: cover
}

.container {
  height: 100px; /*Set any dimensions you like*/
  width: 50px;
} 
```

据我测试，无论要使用的图像尺寸如何，这都有效，并且满足您在问题中所述的“最佳情况”，因为结果是垂直和水平居中的。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-01-03T16:07:56.967

考虑将[`background-size: cover`](https://developer.mozilla.org/en-US/docs/CSS/background-size)(IE9+) 与`background-image`. 对于 IE8-，有一个[polyfill](https://github.com/louisremi/background-size-polyfill)。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-04-04T11:16:45.290

这是一个支持 IE 使用的答案，`object-fit`因此您不会失去比率

使用一个简单的 JS 片段来检测是否 `object-fit`支持，然后替换`img`为`svg`

```
//ES6 version
if ('objectFit' in document.documentElement.style === false) {
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('img[data-object-fit]').forEach(image => {
      (image.runtimeStyle || image.style).background = `url("${image.src}") no-repeat 50%/${image.currentStyle ? image.currentStyle['object-fit'] : image.getAttribute('data-object-fit')}`
      image.src = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${image.width}' height='${image.height}'%3E%3C/svg%3E`
    })
  })
}

//ES5 version
if ('objectFit' in document.documentElement.style === false) {
  document.addEventListener('DOMContentLoaded', function() {
    Array.prototype.forEach.call(document.querySelectorAll('img[data-object-fit]').forEach(function(image) {
      (image.runtimeStyle || image.style).background = "url(\"".concat(image.src, "\") no-repeat 50%/").concat(image.currentStyle ? image.currentStyle['object-fit'] : image.getAttribute('data-object-fit'));
      image.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='".concat(image.width, "' height='").concat(image.height, "'%3E%3C/svg%3E");
    }));
  });
}
```

```
img {
  display: inline-flex;
  width: 175px;
  height: 175px;
  margin-right: 10px;
  border: 1px solid red
}

/*for browsers which support object fit */

[data-object-fit='cover'] {
  object-fit: cover
}

[data-object-fit='contain'] {
  object-fit: contain
}
```

```
<img data-object-fit='cover' src='//picsum.photos/1200/600' />
<img data-object-fit='contain' src='//picsum.photos/1200/600' />
<img src='//picsum.photos/1200/600' />
```

* * *

**注意：**还有一些`object-fit`polyfill 可以`object-fit`正常工作。

这里有一些例子：

*   [对象拟合图像](https://github.com/bfred-it/object-fit-images "对象拟合图像")
*   [康斯坦斯/object-fit-pollyfill](https://github.com/constancecchen/object-fit-polyfill "康斯坦斯/object-fit-pollyfill")
*   [CSS object-fit 属性的 Polyfill](https://github.com/tonipinel/object-fit-polyfill "CSS object-fit 属性的 Polyfill")

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-01-12T15:13:44.620

```
.image-wrapper{
    width: 100px;
    height: 100px;
    border: 1px solid #ddd;
}
.image-wrapper img {
    object-fit: contain;
    min-width: 100%;
    min-height: 100%;
    width: auto;
    height: auto;
    max-width: 100%;
    max-height: 100%;
}
```

```
<div class="image-wrapper">
  <img src="">
</div>
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-07-19T16:32:33.427

我实现描述的“最佳情况”场景的唯一方法是将图像作为背景：

```
<div class="container"></div>​ 
```

```
.container {
    width: 150px;
    height: 100px;
    background-image: url("http://i.stack.imgur.com/2OrtT.jpg");
    background-size: cover;
    background-repeat: no-repeat;
    background-position: 50% 50%;
}​ 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-08-07T02:28:54.457

尝试这个：

```
img {
  position: relative;
  left: 50%;
  min-width: 100%;
  min-height: 100%;
  transform: translateX(-50%);
} 
```

希望这可以帮助

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-29T09:11:07.627

您可以使用 div 来实现这一点。没有 img 标签 :) 希望这会有所帮助。

```
.img{
	width:100px;
	height:100px;
	background-image:url('http://www.mandalas.com/mandala/htdocs/images/Lrg_image_Pages/Flowers/Large_Orange_Lotus_8.jpg');
	background-repeat:no-repeat;
	background-position:center center;
	border:1px solid red;
	background-size:cover;
}
.img1{
	width:100px;
	height:100px;
	background-image:url('https://images.freeimages.com/images/large-previews/9a4/large-pumpkin-1387927.jpg');
	background-repeat:no-repeat;
	background-position:center center;
	border:1px solid red;
	background-size:cover;
}
```

```
<div class="img">	
</div>
<div class="img1">	
</div>
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-05-26T12:47:42.793

这里有我的工作示例。我使用了一个技巧，将图像设置为具有 background-size:cover 和 background-position:center center 的 div 容器的背景

我已经放置了宽度：100% 和不透明度：0 的图像，使其不可见。请注意，我展示我的图像只是因为我对调用子点击事件特别感兴趣。

请注意，我使用的 angular 完全无关紧要。

```
<div class="foto-item" ng-style="{'background-image':'url('+foto.path+')'}">
    <img class="materialboxed" ng-class="foto.picid" ng-src="{{foto.path}}" style="opacity: 0;filter: alpha(opacity=0);" width="100%" onclick="$('.materialboxed')/>
 </div>
<style>
.foto-item {
height: 75% !important;
width: 100%;
position: absolute;
top: 0;
left: 0;
overflow:hidden;
background-size: cover;
background-position: center center;
}
</style> 
```

结果是您在所有情况下都定义为最佳的结果

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-08T07:46:56.120

CSS`object-fit: cover`和`object-position: left center`属性值现在解决了这个问题。

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2019-07-21T12:50:49.840

只需修复图像的高度并提供 width = auto

```
img{
    height: 95vh;
    width: auto;
} 
```

# c# - SlimDX9 - 使用 RenderToSurface 进行 Device.Reset

> ID：14142379
> 
> 赞同：2
> 
> 时间：2013-01-03T15:54:21.817
> 
> 标签：c#, reset, slimdx

我有一个具体的问题。

在调整窗口大小以更改分辨率后，我一直在尝试重置 SlimDX9 设备。一切都在 Pool.Managed 中，没有字体，没有状态块，一切正常，但纹理+表面+RenderToSurface 组合。我需要纹理作为着色器的渲染目标，以便稍后进行后处理，所以我需要它调整大小以适应客户端大小以及后缓冲区。

我确实创建了这样的组合：

```
rtTexture = new Texture(this.Device, this.owner.ClientSize.Width, this.owner.ClientSize.Height, 1, Usage.RenderTarget, Format.A8R8G8B8, Pool.Default);
rtSurface = rtTexture.GetSurfaceLevel(0);
rtHelper = new RenderToSurface(this.Device, this.owner.ClientSize.Width, this.owner.ClientSize.Height, Format.A8R8G8B8, Format.D24S8); 
```

调整窗口大小时，我会

```
rtTexture.Dispose();
rtSurface.Dispose(); 
```

我都试过了

```
rtHelper.OnLostDevice(); 
```

和

```
rtHelper.Dispose(); 
```

当然，在 Device.Reset(getParameters()) 之后我重新创建资源/调用 rtHelper.OnResetDevice()，两者都不起作用。我尝试了 Dispose()s 和 OnDeviceLost() 的所有可能组合。

在不成功的重置和通常的 InvalidCall 之后，我收到了这条消息

```
All user created D3DPOOL_DEFAULT surfaces must be freed before ResetEx can succeed. ResetEx Fails. 
```

所以我对应用程序进行了 PIX 处理，发现纹理和表面都没有被处理（在被破坏的列中有“从不”）尽管事实是 .Dispose() 在这两个对象上都被显式调用并且 IsDisposed 在之前是真的Device.Reset()。

删除组合使重置正常。问题出在 RenderToSurface 重置和/或纹理+表面的某个地方。

我像这样使用 RenderToSurface：

```
rtHelper.BeginScene(rtSurface, new Viewport(0, 0, this.owner.ClientSize.Width, this.owner.ClientSize.Height));
{
    Device.Clear(ClearFlags.Target | ClearFlags.ZBuffer, FogColor, 1, 0);
    terrainEffect.BeginPass(0);
    RenderTiles();
    terrainEffect.EndPass();
}
rtHelper.EndScene(Filter.None); 
```

甚至可能吗？它是 SlimDX 中的错误吗？我能做些什么？我可以以某种方式访问​​非托管资源并手动销毁它们吗？

请帮忙，我不知道下一步该怎么做。我非常感谢对此的任何回应。谢谢。

**编辑**：我试图绕过 RenderToSurface 并使用 Device.get/setRenderTarget()，但问题仍然存在，在 Device.Reset() 之前，Dispose() 不会破坏表面和纹理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T01:43:04.823

我已经想通了！对于遇到相同问题的任何人：

如果您使用在一个着色器通道中创建的纹理，将其分配给着色器并在第二个通道中使用，请务必在使用后（之前`Device.Present()`）将纹理设置为`null`. 像这样：

```
terrainEffect.SetTexture(hRTTexture, null); 
```

where`hRTTexture`是纹理的处理程序。似乎着色器锁定了纹理，并且如果着色器具有此锁定，SlimDX 无法处理此类纹理（和关联的表面）。

希望这可以帮助某人。

# php - 如何在php中开发订阅用户模块

> ID：14142380
> 
> 赞同：-2
> 
> 时间：2013-01-03T15:54:26.110
> 
> 标签：php, subscribe

我想在 PHP 中开发一个订阅用户模块，用户将在其中获得有关订阅用户活动的所有通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:58:25.850

创建 **Subscriptions**，**UserSubscriptions**表，你已经有了**Users**表（我假设）。

将所有通知名称插入您要发送的**Subscriptions表中，** **UserSubscriptions**表将具有**UserId**和**SubscriptionId**。

# java - 奇怪的并发行为

> ID：14142381
> 
> 赞同：4
> 
> 时间：2013-01-03T15:54:29.907
> 
> 标签：java, multithreading

我目前在我正在构建的这个应用程序中遇到了一个奇怪的行为。

## 前言

我正在构建的这个应用程序有一个简单的目标——获取字符串集合并在多个文本文件中搜索每个字符串。该应用程序还跟踪每个字符串的唯一匹配项，即字符串“abcd”仅在文件 A 中出现 n 次时才计算一次。

由于这个应用程序将主要处理大量文件和大量字符串，我决定通过创建一个实现 Runnable 的类并使用 ExecutorService 来运行 Runnable 任务来在后台进行字符串搜索。我还决定研究字符串搜索的速度，所以我开始使用不同的字符串匹配方法（即，Boyer-Moore 算法）比较`String.contains()`时间`String.indexOf()`。[我从http://algs4.cs.princeton.edu/53substring/BoyerMoore.java.html](http://algs4.cs.princeton.edu/53substring/BoyerMoore.java.html)获取了 Boyer-Moore 算法的源代码，并将其包含在我的项目中。这是问题开始的地方......

## 问题

我注意到在使用该类时，字符串搜索会返回不同的结果（**每次运行搜索时，找到的字符串的数量都会有所不同**），`BoyerMoore`所以我将其替换为 a `String.contains()`，以便代码如下所示...

```
private boolean findStringInFile(String pattern, File file) {
    boolean result = false;
    BoyerMoore bm = new BoyerMoore(pattern); // This line still causes varying results.
    try {
        Scanner in = new Scanner(new FileReader(file));
        while(in.hasNextLine() && !result) {
            String line = in.nextLine();
            result = line.contains(pattern);
        }
        in.close();
    } catch (FileNotFoundException e) {
        System.out.println("ERROR: " + e.getMessage());
        System.exit(0);
    }
    return result;
} 
```

即使使用上面的代码，结果仍然不一致。似乎`BoyerMoore`对象的实例化导致结果发生变化。我挖得更深一点，发现`BoyerMoore`构造函数中的以下代码导致了这种不一致......

```
// position of rightmost occurrence of c in the pattern
right = new int[R];
for (int c = 0; c < R; c++)
    right[c] = -1;
for (int j = 0; j < pat.length(); j++)
    right[pat.charAt(j)] = j; 
```

现在我知道**是什么**导致了不一致，但我仍然不明白**为什么**会发生这种情况。在多线程方面我不是老手，因此非常感谢任何可能的解释/见解！

## 以下是搜索任务的完整代码...

```
private class Search implements Runnable {
    private File mSearchableFile;
    private ConcurrentHashMap<String,Integer> mTable;

    public Search(File file,ConcurrentHashMap<String,Integer> table) {
        mSearchableFile = file;
        mTable = table;
    }

    @Override
    public void run() {
        Iterator<String> nodeItr = mTable.keySet().iterator();
        while(nodeItr.hasNext()) {
            String currentString = nodeItr.next();
            if(findStringInFile(currentString , mSearchableFile)) {
                Integer count = mTable.get(currentString) + 1;
                mTable.put(currentString,count);
            }
        }
    }

    private boolean findStringInFile(String pattern, File file) {
        boolean result = false;
        // BoyerMoore bm = new BoyerMoore(pattern);
        try {
            Scanner in = new Scanner(new FileReader(file));
            while(in.hasNextLine() && !result) {
                String line = in.nextLine();
                result = line.contains(pattern);
            }
            in.close();
        } catch (FileNotFoundException e) {
            System.out.println("ERROR: " + e.getMessage());
            System.exit(0);
        }
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:01:57.143

这应该表现更好

*   每个文件只打开和关闭一次。
*   线程之间没有数据共享，因此没有线程间开销（最终结果除外）

这将获取每个文件的匹配项并在单个线程中累积计数。

```
static class Search implements Callable<Set<String>> {
    private final File file;
    private final Set<String> toFind;
    private final long lastModified;

    public Search(File file, Set<String> toSearchFor) {
        this.file = file;
        lastModified = file.lastModified();
        toFind = new CopyOnWriteArraySet<>(toSearchFor);
    }

    @Override
    public Set<String> call() throws Exception {
        Set<String> found = new HashSet<>();
        Scanner in = new Scanner(new FileReader(file));
        while (in.hasNextLine() && !toFind.isEmpty()) {
            String line = in.nextLine();
            for (String s : toFind) {
                if (line.contains(s)) {
                    toFind.remove(s);
                    found.add(s);
                }
            }
        }
        in.close();

        if (file.lastModified() != lastModified) 
            throw new AssertionError(file + " was modified");
        return found;
    }
}

public static Map<String, AtomicInteger> performSearches(
        ExecutorService service, File[] files, Set<String> toFind)
        throws ExecutionException, InterruptedException {
    List<Future<Set<String>>> futures = new ArrayList<>();
    for (File file : files) {
        futures.add(service.submit(new Search(file, toFind)));
    }
    Map<String, AtomicInteger> counts = new LinkedHashMap<>();
    for (String s : toFind)
        counts.put(s, new AtomicInteger());
    for (Future<Set<String>> future : futures) {
        for (String s : future.get())
            counts.get(s).incrementAndGet();
    }
    return counts;
} 
```

* * *

这些行不是线程安全的。任意数量的线程都可以更新同一个键，因此结果将不安全。

```
Integer count = mTable.get(currentString) + 1;
// another thread could be running here.
mTable.put(currentString,count); 
```

一个简单的解决方法是使用 AtomicInteger （它也将简化您的代码）

```
private final ConcurrentHashMap<String, AtomicInteger> mTable;

for(Map.Entry<String, AtomicInteger> entry: mTable.entrySet()) 
    if(findStringInFile(entry.getKey(), mSearchableFile)) 
        entry.getValue().incrementAndGet(); 
```

# java - 生活游戏规则无法正常工作

> ID：14142383
> 
> 赞同：2
> 
> 时间：2013-01-03T15:54:31.507
> 
> 标签：java, math, conways-game-of-life, cellular-automata

我的 Java 生命游戏应用程序有以下逻辑代码。我的问题是这些规则不像默认的康威生命游戏规则。[我已经在Wikipedia](http://en.wikipedia.org/wiki/Conway's_Game_of_Life#Rules)上阅读了它们，它们如下；

*   任何少于两个活邻居的活细胞都会死亡，好像是由于人口不足造成的。
*   任何有两三个活邻居的活细胞都可以活到下一代。
*   任何有超过三个活邻居的活细胞都会死亡，就好像过度拥挤一样。
*   任何只有三个活邻居的死细胞都会变成活细胞，就像通过繁殖一样。

我试图在下面的代码中复制这些规则，但它的行为与普通的康威生命游戏不同；

```
int surroundingLife = 0;
if (lifeMap[cX+1][cY]) { //Right
    surroundingLife++;
}
if (lifeMap[cX-1][cY]) { // Left
    surroundingLife++;
}
if (lifeMap[cX][cY+1]) { // Above
    surroundingLife++;
}
if (lifeMap[cX][cY-1]) { // Below
    surroundingLife++;
}
if (lifeMap[cX-1][cY-1]) { // Bottom left
    surroundingLife++;
}
if (lifeMap[cX+1][cY+1]) { // Top Right
    surroundingLife++;
}
if (lifeMap[cX-1][cY+1]) { // Some other corner (I don't know which one)
    surroundingLife++;
}
if (lifeMap[cX+1][cY-1]) { // Yet another corner (I don't know which one)
    surroundingLife++;
}
if (running) {
    // Logic for life
    if (surroundingLife < 2 && lifeMap[cX][cY]) {// Rule 1\. Any live cell with fewer than two live neighbours dies, as if caused by under-population.
        lifeMap[cX][cY] = false;
    } else if (surroundingLife == 2 && lifeMap[cX][cY]) { // Rule 2\. Any live cell with two or three live neighbours lives on to the next generation.
        lifeMap[cX][cY] = true;
    } else if (surroundingLife == 3 && lifeMap[cX][cY]) { // Rule 3\. Same as above
        lifeMap[cX][cY] = true;
    } else if (surroundingLife > 3 && lifeMap[cX][cY]) { // Rule 4\. Any live cell with more than three live neighbours dies, as if by overcrowding.
        lifeMap[cX][cY] = false;
    } else if (surroundingLife == 3 && !lifeMap[cX][cY]) { // Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction.
        lifeMap[cX][cY] = true;
    }
} 
```

这是运行几代后的样子；

![GameOfBugs 或 BugsOfLife。](../Images/e3bc92c757561610c01bacbfb7d6dd6d.png)

它让我想起了“迷宫”规则集，这很奇怪。

我不相信我的aroundLife 计算器有问题，因为当实体周围有 8 个其他实体时，它会返回 8。问题是因为我循环 Y 然后 X 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T15:58:00.450

问题是您在评估需要更改的内容的同时修改网格。每次更改单元格时，都会影响与该单元格相邻的同一通道中所有未来测试的结果。

您需要制作网格的*副本*。始终从该副本测试（读取），并将更改（写入）应用到原始副本。

# jquery - 带有 Internet Explorer 的 jquery Nivo 滑块

> ID：14142395
> 
> 赞同：2
> 
> 时间：2013-01-03T15:55:19.680
> 
> 标签：jquery, css, internet-explorer, nivo-slider

我有一个很好的旧 Internet Explorer 的 jquery 问题（我已经在 IE7、IE8 和 IE9 中对其进行了测试，它们都产生了同样的问题）。我正在为网站使用 Nivo Slider 插件。只有在 IE 中才会出错。不知何故，图像自我复制并将其粘贴在一起（对不起我的英语不好，您可以在图片上看到下面的问题）。

滑块中的图像应如下所示： ![在此处输入图像描述](../Images/ae4785de0b46451ca0c3275bd2d689bc.png)

滑块中的图像在 Internet Explorer 中的外观： ![在此处输入图像描述](../Images/67eee2a15ff021f134013e694ee7494d.png)

你可以在这里找到我的代码：http: [//jsfiddle.net/skeurentjes/YszGW/10/](http://jsfiddle.net/skeurentjes/YszGW/10/)

这是我的 Nivo Slider 配置：

```
$(document).ready(function() {    
    $('#photoSlider').nivoSlider({
        effect: 'fade',
        animSpeed: 1000,
        pauseTime: 5000,
        directionNav: true,
        controlNav: true,
        pauseOnHover: true,
        randomStart: true
});
}); 
```

我不知道在哪里看。我不知道这是javascript问题还是css问题。每一个帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:04:04.330

编辑：@Sparky 指出我的回答没有帮助，因为您在所有版本的 IE 中都遇到问题，在这种情况下，尾随逗号修复无济于事。我很抱歉。

但是，我发现一些用户遇到了与您相同的问题。看起来像是指定`slices: 1`而不是将其保留为默认值似乎可以修复它。下面引用的线程。

[IE 中的 Nivo 滑块显示问题](https://stackoverflow.com/questions/11839842/nivo-slider-display-issue-in-ie)

EDIT2：Sparky 在下面的评论中提出了另一个好观点。即使更改切片“修复”了问题，也并不意味着它摆脱了原来的问题。Nivo 滑块带有 CSS，可以确保它在不同的浏览器中看起来和运行良好，所以如果你删除了这些，它肯定会导致这些问题。我会先尝试放回默认 CSS，以确保您按照开发人员的意图使用插件。

如果这不起作用，希望切片修复会为您解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T16:17:29.083

我有同样的。我在网上读到添加“height：auto;” 到“.nivoslider img”会工作，但对我来说没有。奇怪的是，在 IE 中起作用的是以下设置：

$('#idOfSlider').nivoSlider({ slices: 1, ..., randomStart: true, ... });

1 个切片（当然还有更多的代码）与 randomStart 的组合起到了作用。

# c++ - 获取线程间的最小尺寸

> ID：14142396
> 
> 赞同：1
> 
> 时间：2013-01-03T15:55:23.420
> 
> 标签：c++, multithreading, scheduling, scheduler

我正在尝试使用多线程实现一种新的调度技术。这个想法是，每次从程序线程创建任务时，它应该搜索工作线程并在线程中最不忙的线程上工作。

您能否建议一些逻辑（或）想法如何从编程的角度动态地在给定线程中找到最不忙的线程

我正在使用 C++ 编程语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:02:23.620

我想你有一个主力函数可以在每个线程上完成这项工作。您可以定义一个线程局部变量，每次调用此函数时递增该变量。对于相应的线程，该变量将显示它完成了多少工作。

然后，程序线程将检查并比较这些值，然后再将手头的任务分派给选定的线程（工作计数器最少的线程）。

另一种方法是衡量每个线程的工作时间/空闲时间。工作时间被认为是线程的主力函数的开始和结束之间，而空闲时间是另一个（你可以测量劳动力函数开始和结束时的所有时间）。

无论如何，这个想法是基本上每个工作线程都会测量它的占用量。这有点不精确，但更高级的解决方案基本上将涉及重新创建线程库/框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:08:22.147

最简单的解决方案是创建一个待接任务池。在每个线程的空闲循环中，检查那个任务池。一个很忙的线程不会经常空闲，因此不要经常检查任务池，并接一些额外的任务。

# excel - Excel 对多张工作表进行排序和排名

> ID：14142400
> 
> 赞同：1
> 
> 时间：2013-01-03T15:55:46.087
> 
> 标签：excel, excel-formula

我为我的叔叔曲棍球联赛创建了一个电子表格。它为五支球队中的每支球队提供了一个单独的工作表，以及一个列出球队和球员排名的附加表。Jüri Ruut 在整理球员数据方面帮助很大，但我需要按“积分”对球队进行排名，如果他们的积分相同，则按“进球数”排名。

我将 A 列设置为 1-5 级。I 列有球队的“积分”，J 列列出了球队的“目标”。所以，基本上：

```
 A          B             I         J
Rank   SortedRank   ~   Points   GoalsFor 
```

在 B 列中，我有以下公式：

```
 =IF(I2=I1,B1,A2) 
```

有没有一种简单的方法来修改这个公式来实现我想要的？我的想法是，如果最初的 IF 陈述是真的，那么我会看看谁有更多的目标。我试图将 [value_if_true] 修改为另一个 IF 语句，但无法使其正常工作。就像是：

```
=IF(I5=I4,IF(J4>J5,B4,A5),A5) 
```

我什至在这里吠叫正确的树吗？

一如既往，我希望这是连贯的和可以理解的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:02:02.890

如果您不知道/不喜欢该功能，请在[此页面](http://www.cpearson.com/excel/Rank.aspx)`Rank()`上使用一些替代方法对其进行说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:11:14.063

稍微改变点（或创建一个辅助列）

积分将是`CalculatedPoints+(GoalsFor/1000)`
（我假设一个团队永远不会获得超过 999*个目标*）

这样，结果列表看起来像这样

```
3.005
3.003
1.001 
```

并且具有相同计算点的团队将被*GoalsFor*分割，并且该`=RANK`函数可以轻松地对团队进行排名

# php - Android/php Jsonobject 错误解析

> ID：14142404
> 
> 赞同：0
> 
> 时间：2013-01-03T15:56:02.943
> 
> 标签：php, android, json, parsing

我对 jsonObject 有疑问。

在android应用程序中，我有：

```
try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
        Log.e("JSON Parser2", "json: "+json);
    } 
```

日志猫是：

```
01-03 16:50:09.239: E/JSON Parser(17447): Error parsing data org.json.JSONException: Value [] of type org.json.JSONArray cannot be converted to JSONObject 
01-03 16:50:09.239: E/JSON Parser2(17447): json: [][][]{"code":0,"message":"Segnalazione inviata correttamente"} 
```

在php中我有：

```
$response = array();
$response["code"] = $e['code'];
$response["message"] = $e['message'];
echo json_encode($response); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:07:55.227

[将您的PHP JsonObejct](http://php.net/manual/en/function.json-encode.php)创建代码更改为：

```
echo json_encode($response, JSON_FORCE_OBJECT); 
```

现在您可以将当前的 json 字符串解析为：

```
 String str_final_json=json.replace("{}{}{}","");   

 // convert string to jsonObject
 JSONObject jObj = new JSONObject(str_final_json);

// get code from json object
String str_code=jObj.getString("code");

// get message from json object
String str_message=jObj.getString("message"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:00:58.003

如果您的顶级对象是数组，请使用**[JSONArray 。](http://developer.android.com/reference/org/json/JSONArray.html)**

```
 try {
        jArr = new JSONArray(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
        Log.e("JSON Parser2", "json: "+json);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:23:39.140

猜猜问题出在您的 php 代码上，尝试更改您的 php 代码，如下所示

```
$response = array("code" => $e['code'], "message" =>$e['message']);
echo json_encode($response); 
```

# jquery - 将延迟对象 (jqxhr) 分配给模型或集合

> ID：14142407
> 
> 赞同：1
> 
> 时间：2013-01-03T15:56:05.110
> 
> 标签：jquery, backbone.js, jquery-deferred

我正在开发一个 Backbone 应用程序，复杂性正在增加。副作用之一是有时页面的初始加载速度很慢。我已将此问题追溯到 AJAX 请求等待。

在我目前的一些路线中，我提出了 4 个单独的请求。有些是重要的，例如加载模板。因此，我使用 jQuery ajax 请求中的 done() 函数来传递继续加载页面的回调。

有时我需要一个无关紧要的小元素的数据。例如，加载最后 5 篇博文的请求。现在我的想法是，我想尽快提出请求，而不会停止其余路线的执行，我想知道它什么时候准备好。

所以这是我的建议

```
var myModel = new Posts(); //instantiate the model
myModel.dfd = myModel.fetch(); 
```

然后稍后在处理最后一个帖子元素的子视图中具有将模型传递给的方法并执行类似的操作

```
render : function() {
  var self = this;
  this.model.dfd.done(function( ) {
    this.html( template( self.model.toJSON() );
  }
} 
```

这个想法是，如果请求已经完成，它将立即执行，如果没有，它将等待。但至少我从节省时间中受益，直到它达到这一点。

这是一个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:04:52.223

我喜欢 promises 和 deferred，我认为它们很棒，但我不认为这是使用它们的地方。而是让模板能够呈现 UI 的默认版本，即使模型尚未填充。所以无论我们是否从服务器检索到模型的数据，视图总是做同样的事情。

因此，他们可能会在从服务器检索它们所需的几分之一秒内看不到博客条目（模板和仅返回 {} 的 model.toJSON() 调用的乘积）。然后，当模型填充数据并触发其“更改”事件时（我假设您有视图监听模型的更改事件并在它发生时呈现），然后它将自动更新。

我认为这是 Backbone.js 中最优雅、最自然的做事方式。它使代码保持整洁，并处理视图和模型完成操作的任何排序，而您不必求助于特殊编码来尝试和排序操作。

我认为使这种安排更加优雅的唯一一件事是，如果您还听取模型上的“请求”事件并向最终用户显示某种忙碌指示符，直到触发“同步”事件。然后用户不仅最初看到 UI 更新，如果尚未检索到最终数据，他/她知道等待，因为请求处于未决状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:08:16.273

这将完全有效，这是利用`$.Deferred`s ... 的一个很好的例子，但您还可以考虑另一种方式：首先使请求同步。

Fetch 将其选项传递给`$.ajax`，并`$.ajax`接受一个“异步”参数，该参数控制请求是同步的还是异步的。这意味着，如果您这样做：

```
self.model.fetch({async: false});
// self.model will already be fetched by the time this next line runs
this.html( template( self.model.toJSON()); 
```

无论哪种方式都很好恕我直言；哪种风格只是偏好问题。

PS 关于后一种风格的一个小提示是，如果你尝试将它与 $.Deferred 结合起来，它可能会出现问题。从 jQuery 网站：

> 从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；您必须使用完成/成功/错误回调。

# android - 如何使用相机动作意图在保存时减小相机图片的大小？

> ID：14142409
> 
> 赞同：12
> 
> 时间：2013-01-03T15:56:06.990
> 
> 标签：android, android-intent

如何使用相机动作意图在保存时减小相机图片的大小。

我试图在相机动作的 putExtra 中使用 MediaStore.EXTRA_SIZE_LIMIT，如下所示：

```
Intent captureintent =  new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  
captureintent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
captureintent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0);
captureintent.putExtra(MediaStore.EXTRA_SCREEN_ORIENTATION, 0);
captureintent.putExtra(MediaStore.EXTRA_SIZE_LIMIT, The Value to be Kept); 
```

但这似乎不起作用。

这样做的有效方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T10:15:10.813

这在 Android 上是不可能的。`ACTION_IMAGE_CAPTURE`只能与 一起使用`MediaStore.EXTRA_OUTPUT`，不能与其他三个附加功能一起使用。

请参阅[http://developer.android.com/reference/android/provider/MediaStore.html](http://developer.android.com/reference/android/provider/MediaStore.html)。

# linux - 在 Linux Mint 14 Nadia 上使用 Apache2 配置 Request Tracker 4.0

> ID：14142415
> 
> 赞同：1
> 
> 时间：2013-01-03T15:56:15.413
> 
> 标签：linux, apache, configuration, apache2, rt

我的同事将 Linux Mint 14 Nadia 安装到 VM（使用 VirtualBox）上，并按照以下教程安装 Apache、MySQL 和 PHP：http: [//community.linuxmint.com/tutorial/view/486](http://community.linuxmint.com/tutorial/view/486)。然后，他使用[http://www.bestpractical.com/rt/docs/4.0/](http://www.bestpractical.com/rt/docs/4.0/)中的自述文件安装 Request Tracker 4.0。从他告诉我的过程中，这两个都进行得很好，几乎没有打嗝。现在他已将任务转交给我，我正在尝试使用 Apache 服务器正确配置 Request Tracker 4.0。目前我可以访问 localhost 并收到以下消息：

> 有用！这是此服务器的默认网页。Web 服务器软件正在运行，但尚未添加任何内容。

我还对其进行了配置，因此当您访问 localhost/rt 时，您*应该*看到 Request Tracker 界面，但我却收到了以下页面，这是我大部分时间都在困扰的地方：

> 您快到了！你还没有配置你的网络服务器来运行 RT。您似乎已经正确安装了 RT 的 Web 界面，但尚未将您的 Web 服务器配置为“运行”为 Web 界面提供动力的 RT 服务器。下一步是编辑您的网络服务器的配置文件，以指示它使用 RT 的 mod_perl 或 FastCGI 处理程序。如果您需要商业支持，请通过 sales@bestpractical.com 联系我们。

片刻之后，它会将我重定向到 bestpractical.com/rt/rt-broken-install.html。（显然只允许 2 个链接？）

我假设我配置错误，但不确定是什么。我昨天和今天的大部分时间都在谷歌上搜索和摆弄这个，但没有运气。我敢肯定，我对 linux 环境相当缺乏经验并没有帮助。

如果我了解他是如何安装它的，他想使用 FastCGI 进行设置，所以我访问了这个站点 requesttracker.wikia.com/wiki/FastCGI 并按照那里的指南进行操作，但是文档非常糟糕，并不总是与我的环境，所以我不得不投入大量的猜测和检查工作。我将提供我添加到配置文件中的代码，以便您了解我现在的位置

/etc/apache2/sites-enabled 中的 000-默认值：

```
Alias /rt /opt/rt4/share/html
Alias /NoAuth/images /var/www/rt/share/html/NoAuth/images/
AddHandler fastcgi-script fcgi
ScriptAlias / /var/www/rt/sbin/rt-server.fcgi/
<Directory /opt/rt4/share/html/>
    Order allow,deny
    Allow from all
</Directory> 
```

/opt/rt4/etc 中的 RT_SiteConfig.pm：

```
Set($WebPath, '/rt');
Set($WebBaseURL, 'http://localhost'); 
```

如果需要更多信息，请告诉我。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:18:03.277

[用于Web 部署](http://bestpractical.com/rt/docs/latest/web_deployment.html)的 RT 文档为使用 fastcgi 设置 Apache 和在“/rt”下运行提供了更详细的信息。我认为您首先要尝试使用建议的 Apache 配置，看看是否能让您通过设置页面。

（请注意，这些文档在 RT 安装以及 docs 目录中都可用。）

# sql-server - Begin Tran 每次都需要一个新名称吗？

> ID：14142418
> 
> 赞同：0
> 
> 时间：2013-01-03T15:56:32.347
> 
> 标签：sql-server, transactions

我使用了以下代码：

```
--begin tran redist1
/*--FIRST Update
update db..tablename set column=value
where complexthing = othercomplexthing
*/
/*--SECOND Update
update db..tablename set column=replace(column,'A','1')
*/
select * from db..tablename
--rollback tran redist1
--commit tran redist1 
```

我突出显示“begin tran redist1”，运行它，突出显示 FIRST 更新语句并运行它，然后对 select 语句执行相同操作。它起作用了，所以我强调了“commit tran redist1”。

接下来我突出显示“begin tran redist1”，运行它，突出显示 SECOND 更新语句并运行它，然后对 select 语句执行相同操作。它不起作用，所以我突出显示“rollback tran redist1”。

接下来我突出显示“begin tran redist1”，运行它，突出显示 SECOND 更新语句并运行它，然后对 select 语句执行相同操作。这次成功了，所以我突出显示了“commit tran redist1”。

我使用了更多的更新语句，每次都重复这个过程。然后我打开了一个“编辑”窗口以在我最后一次“提交”之后直接更改值，但 SQL 服务器仅在该窗口中一直超时，说我的“提交 tran redist1”是阻塞事务，尽管已经完成。我再次运行提交，编辑窗口打开，显示我更改过的数据。

今天早上，我再次打开了编辑窗口，在我运行 FIRST 查询 + 提交之后，表格不知何故又回到了原点。所有后来的查询+提交都丢失了。但是，我在编辑窗口中手动编辑的记录仍然被编辑。

请注意，我每次都使用名称“redist1”，并以适合每个事务的提交或回滚结尾。我的问题是，重用名称是我问题的原因吗？重用名称是否会产生某种类型的冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:58:33.447

`BEGIN TRAN` doesn't require any name - the name is optional.

Transactions, however, can be nested and if you did not complete the first one, it will still be in effect even after the others have completed - if you roll it back, they will all roll back.

What probably happened is that you did not commit a transaction, so the following transactions were nested. When the transaction rolled back (possibly due to a timeout), they all rolled back.

# javascript - 刷新包含属性的元素

> ID：14142419
> 
> 赞同：1
> 
> 时间：2013-01-03T15:56:44.250
> 
> 标签：javascript, jquery, ajax, refresh, intervals

我想`<data>`每秒刷新一个元素，包括它的属性：

```
<data id="one" data-status="offline"></data> 
```

我尝试使用以下`.load()`方法：

```
setInterval(function() {
    $(#one).load(page.php #one, function() {
        if($(#one).data("status") == "online"){
            alert("online!");
            return false; //stop interval(?)
        } else {
            alert("offline!");
        }
    });
}, 1000); 
```

但它不能正常工作。

主要问题是元素像这样被刷新为孩子：

```
 <data id="one" data-status="offline"><data id="one" data-status="online"></data></data> 
```

非常感谢您的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:05:49.530

试试用这个...

```
document.getElementById('one').reload(); 
```

可能工作...

# vim - 在关键字后添加常量

> ID：14142423
> 
> 赞同：3
> 
> 时间：2013-01-03T15:56:59.030
> 
> 标签：vim, sed, awk, grep

我有一个关于文本文件操作的问题。我有这样的东西

```
any text keyword 21 any text 32 any text
any text keyword 12 any text keyword 12 any text 23 any text
any text keyword 34 any text (keyword 45) any text (34) any text 
```

现在我想知道我是否可以 grep/awk/sed/vi/.. 以某种方式在关键字之后添加常量？例如，我想在关键字后的每个整数中添加例如 10 的值，但保留其他数字和文件格式相同？

```
any text keyword 31 any text 32 any text
any text keyword 22 any text keyword 22 any text 23 any text
any text keyword 44 any text (keyword 55) any text (34) any text 
```

抱歉，到目前为止我没有找到任何东西...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:13:40.823

如果 Perl 解决方案适合您：

```
perl -pe 's/(?<=keyword )(\d+)/$1+10/ge;' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T03:44:51.500

我努力尝试*了*一个`sed`版本：

```
sed 's/keyword[ \t]*\([0-9]*\)/keyword $(( \1 + 10))/g;
     s/"/\\"/g;
     s/^/echo \"/;
     s/$/\"/' input | 
  sh 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T16:31:36.057

你提到**vim**，这里是：

```
:%s/\v(keyword )@<=[0-9]+/\=submatch(0)+10/g 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T17:14:31.027

看看这个 perl 解决方案

```
perl -pe 's/keyword (\d)+/"keyword ".($1 + 10)/eg' your_file 
```

如果你想从总和中排除一些数字（本例中为 34 和 35）

```
perl -pe 's/keyword (\d)+/if ($1 != 34 && $1 != 35) { "keyword ".($1 + 10) } else { "keyword ".$1 }/eg' your_file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T16:42:07.877

这行得通。现在我承认我不是 awk 专家，所以可能有更短的方法来做到这一点，但这是我一起破解的：

```
#!/bin/sh

cat $1 | awk \
'function incr(str) {
    if (match(str, "[0-9]+")) {
        number = substr(str, RSTART, RLENGTH)
        number = number+10
        printf("keyword %d",number)
        str = substr(str, RSTART+RLENGTH)
    }
}
function findall(str, re) {
    where=match(str, re)

    if (where==0)
    {
      print(str)
    }
    else
    {
      printf("%s", substr(str, 0, RSTART-1))
      offset=RSTART+RLENGTH
      incr(substr(str, RSTART, RLENGTH))
      str = substr(str, offset)
      findall(str, re)
    }
}
{
    findall($0, "keyword [0-9]+");
}' 
```

# c - C语言中的RAM校验和

> ID：14142428
> 
> 赞同：1
> 
> 时间：2013-01-03T15:57:28.190
> 
> 标签：c, testing, automated-tests, microcontroller, ram

我需要在启动时使用类似棋盘的算法检查 MCU 的 RAM。我不想丢失 RAM 中已经存在的任何数据，而且我不知道如何不影响我用来执行此算法的变量。我在想类似的事情：

```
for (position=0; position< 4096; position++)
 {
     *Temporal = 0x5555;
     if(*Temporal != 0x5555) Error = TRUE;
     *Temporal  = 0xAAAA;
     if(*Temporal != 0xAAAA) Error= TRUE;

    Temporal +=1;

 } 
```

我应该修改链接器以了解 Temporal 和 Error 的放置位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:34:29.597

声明指针时使用修饰符“register”（如“register int *”）。寄存器是处理器内核中的一个特殊内存段，（通常）不计入 RAM 的一部分，因此对它们的任何更改都不算作 RAM 读/写。存在一些例外情况；例如，在 AVR 微控制器中，RAM 的前 32 个字节被“伪造”到寄存器中。

您的问题可能因缺乏清晰度而遭到否决，而大多数初学者 C 程序员很容易解决有关保留 RAM 中的任何内容的问题（只需在测试之前将指针的内容复制到临时变量中，然后在测试结束）。此外，您*没有*执行校验和：您只是在进行内存测试。这些是*非常不同的、独立*的事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:46:57.650

您需要确保您正在测试的内存与包含您正在运行的程序的内存位于不同的位置。您可以通过直接用完闪存或您连接的任何其他永久存储来做到这一点。如果没有，您需要对链接映射做一些事情以确保正确的内存分段。

在测试函数内部，`register`按照 MVittiS 的建议使用是个好主意。另一种替代方法是使用映射到与被测段不同的段的全局变量。

您可能想阅读[这篇](http://www.barrgroup.com/Embedded-Systems/How-To/Memory-Test-Suite-C)关于内存测试的文章，以了解您提出的测试的局限性、内存如何失败以及您应该测试什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:09:39.827

我不知道（没有足够的细节），但您的内存测试可能是缓存测试，可能根本不会测试任何 RAM。

您的内存测试（如果它确实测试内存）的设计也非常糟糕。例如，您可以切断（或短路）所有地址线和所有数据线，除了最不重要的 2 条数据线，即使有许多非常严重的故障，测试仍然可以通过。

我的建议是阅读有关内存测试的网页，以获取一些想法和背景信息：[http ://www.esacademy.com/en/library/technical-articles-and-documents/miscellaneous/software- based-memory-testing.html](http://www.esacademy.com/en/library/technical-articles-and-documents/miscellaneous/software-based-memory-testing.html)

一般来说，对于非破坏性测试，您可以复制任何您想保留在其他地方的内容，然后进行测试，然后将数据复制回来。首先测试“其他地方”非常重要（您不想将所有内容复制到有故障的 RAM 中，然后再将其复制回来）。

我还建议使用汇编（而不是 C）来确保不会进行不需要的内存访问；包括你的堆栈。

如果您的代码在需要测试的 RAM 中，那么您可能需要 2 个 RAM 测试代码副本。当您测试包含您的代码的第一个副本的 RAM 时，您将使用您的代码的第二个副本。如果您的代码在 ROM 中，那么它会容易得多（但您仍然需要担心您的堆栈）。

# vb.net - VB.NET 按子数据对 WrapPanel 进行排序

> ID：14142429
> 
> 赞同：1
> 
> 时间：2013-01-03T15:57:32.137
> 
> 标签：vb.net, sorting, wrappanel

我有一个项目，我在其中生成数据并通过使用许多线程对其进行编号（1 - 500）并将其放置在标签内，然后将其放置在网格内，然后将其放置在 WrapPanel 内。

问题。线程中的一些数据先于其他数据完成。所以我的 Wrap 面板得到像 3 1 5 6 10 2 4 7 8 9 这样的数字。我想在所有线程完成后对扭曲面板进行排序，使它们看起来像 1 2 3 4 5 6 7 8 9 10

```
Private Sub StartSearch_MouseLeftButtonUp
    Dim t As New Thread(AddressOf SearchBegin)
    t.Start(Data)
End Sub

Sub SearchBegin(Data)
    Dim Max = 10
    Dim Count = 1
    While Count < Max
        Dim t As New Thread(AddressOf Check)
        t.Start(Data)
        count += 1
    End While
End Sub

Sub Check(Data)
    'things happen here
    Dim display As New Action(Of Object)(AddressOf Progress)
    WrapPanel1.Dispatcher.BeginInvoke(display, Data)
End Sub

Sub Progress(Data)
    Dim g As New Grid
    'Pretty Up Grid
    Dim l As New Label
    'Pretty Up Label
    l.Content = Data.tostring
    g.Children.Add(l)
    WrapPanel1.Children.Add(g)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:43:09.687

使用屏障。

**要等待所有线程完成，请**定义一个全局屏障：

```
Dim barr As New Threading.Barrier(1) 
```

在开始线程之前添加参与者：

```
Sub startathread()
    barr.AddParticipant()
    Dim t As New Threading.Thread(AddressOf blabla)
    t.Start()
End Sub 
```

工作完成后，发出完成的信号：

```
 Sub blabla()
    'do stuff
    barr.SignalAndWait()
 End Sub 
```

现在该函数启动所有线程并等待所有线程完成：

```
Sub x()
    For i = 0 To 9
        startathread()
    Next
    barr.SignalAndWait()
    'from this line on, all the threads are completed their jobs.
End Sub 
```

**对于排序，**您的线程必须将每个数据添加到列表中：

```
Dim datalist As New List(Of String)

Sub Progress(Data)
    datalist.Add(Data.ToString)
End Sub 
```

完成所有数据的添加后，必须调用对它们进行排序和放置的函数：

```
Sub SortAndPlace()
    datalist.Sort()

    For Each sdata In datalist
        Dim g As New Grid
        'Pretty Up Grid
        Dim l As New Label
        'Pretty Up Label
        l.Content = sdata
        g.Children.Add(l)
        WrapPanel1.Children.Add(g)
    Next
End Sub 
```

# php - 如何在单击按钮时复制文件？

> ID：14142430
> 
> 赞同：0
> 
> 时间：2013-01-03T15:57:34.073
> 
> 标签：php, jquery, html

我想构建一个单页实用程序/原型，它将执行以下操作：

为管理员用户提供一个下拉框。当他们选择一个选项然后单击提交按钮时，我希望能够将文件从 /var/www/mysite/abc.txt 复制到 /var/www/mysecondsite/abc.txt

我已经编写了 php / html 来显示表单，但是我可以使用 jquery/ajax 在同一个 php 文件上调用函数吗？

这是我的代码：

```
<?php

$listofcountries='';

echo "<h2>Select a site</h2>";
echo " <script src='http://myserver/myapp/assets/js/jquery-1.8.1.min.js'></script>";

if ($handle = opendir(dirname(__FILE__)."/secrets/")) {

  echo "<input type=text list=site >";
  echo "<datalist id=site >";

    /* This is the correct way to loop over the directory. */
    while (false !== ($entry = readdir($handle))) {
    //ignore temporary files, and directories.
    if ( (strpos($entry, "~") === false) && !(trim($entry)==".") && !( $entry=="..") ){
          //echo "$entry\n<BR>";
          $country=getCountryName($entry);
          echo "<option>".$country;
      }
    }
    }
    closedir($handle);

echo "</datalist>";
echo "<input type=submit id='changert'><BR>";
echo "<script>";
echo "$(document).ready(function(){";

echo "       $('#changert').live('click', function()  {";
echo "      alert('in the changert function'); ";
echo "      });";

echo "  }); "; //end document ready
echo "</script> "; //end javascript

function getCountryName($fileame)
{
    $pattern = '/([a-z]*).([a-z]*).([a-z]*).php/i';
    preg_match_all($pattern, $fileame, $matches, PREG_SET_ORDER);           
    foreach ($matches as $match) {

        return $match[1];
    }
} 
```

在实际版本中，此解决方案将成为 codeigniter 解决方案的一部分……所以我将拥有一个适当的 MVC。但是现在，我希望能够将所有逻辑包含在一个文件中。你能告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:00:14.753

jQuery 只是 JavaScript，所以它都在客户端。任何服务器端文件复制仍然需要由您的 PHP 处理。最简单的解决方案是在单击按钮时发出 AJAX 请求，该请求会命中您的 PHP API 并传递令牌或其他东西，这样非会话用户就不会恶意复制文件。

```
$('#myButton').on('click', function(e) {

    $.ajax({
        url  : '/copyFile.php',
        data : {
            fileName : $('#mySelectMenu').val(),
            token    : someTokenYourPHPInjectedIntoYourJS
        },
        type : 'POST',
        success : function (data) {
            // yay
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:06:26.707

您**应该在以下位置查看 PHP 文档**： http: [//mx2.php.net/manual/en/function.copy.php](http://mx2.php.net/manual/en/function.copy.php)

有一个复制文件的例子。

```
 <?php
        $file = 'example.txt';
        $newfile = 'example.txt.bak';
        if (!copy($file, $newfile)) {
            echo "failed to copy $file...\n";
        }
    ?> 
```

请记住，此目录**必须存在**并且彼此**可见**（在同一 Web 服务器内）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:06:26.127

在您的用户界面上添加一个 Ajax 调用，

```
$.ajax({
  url: 'copy.php',
  success: function(data) {
    if(data == 'true'){
        alert('The file has been copied');
    }
  }
}); 
```

创建第二个 php 文件以根据请求处理文件副本

```
/* copy.php */
<?php

$result = copy('/dir1', '/dir2');
echo $result?'true':'false'; 
```

当然，这过于简单了，你必须做一些错误处理输入检查和安全改进，但我只是想说明要走的路。

# servicestack - 使用 OrmLite，有没有办法在我的 POCO 被修改时自动更新表模式？

> ID：14142433
> 
> 赞同：9
> 
> 时间：2013-01-03T15:57:47.270
> 
> 标签：servicestack, ormlite-servicestack

OrmLite 能否识别我的 POCO 和我的架构之间的差异，并根据需要自动添加（或删除）列以强制架构与我的 POCO 保持同步？

如果这种能力不存在，我有没有办法在数据库中查询表模式，以便我可以手动执行同步？我找到[了这个](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/table/TableInfo.html)，但我使用的是随 ServiceStack 一起安装的 OrmLite 版本，并且在我的一生中，我找不到具有 TableInfo 类的命名空间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T17:49:54.403

我创建了一个扩展方法来自动将缺失的列添加到我的表中。到目前为止工作得很好。警告：获取列名的代码是特定于 SQL Server 的。

```
namespace System.Data
{
    public static class IDbConnectionExtensions
    {
        private static List<string> GetColumnNames(IDbConnection db, string tableName)
        {
            var columns = new List<string>();
            using (var cmd = db.CreateCommand())
            {
                cmd.CommandText = "exec sp_columns " + tableName;
                var reader = cmd.ExecuteReader();
                while (reader.Read())
                {
                    var ordinal = reader.GetOrdinal("COLUMN_NAME");
                    columns.Add(reader.GetString(ordinal));
                }
                reader.Close();
            }
            return columns;
        }

        public static void AlterTable<T>(this IDbConnection db) where T : new()
        {
            var model = ModelDefinition<T>.Definition;

            // just create the table if it doesn't already exist
            if (db.TableExists(model.ModelName) == false)
            {
                db.CreateTable<T>(overwrite: false);
                return;
            }

            // find each of the missing fields
            var columns = GetColumnNames(db, model.ModelName);
            var missing = ModelDefinition<T>.Definition.FieldDefinitions
                .Where(field => columns.Contains(field.FieldName) == false)
                .ToList();

            // add a new column for each missing field
            foreach (var field in missing)
            {
                var alterSql = string.Format("ALTER TABLE {0} ADD {1} {2}", 
                    model.ModelName,
                    field.FieldName, 
                    db.GetDialectProvider().GetColumnTypeDefinition(field.FieldType)
                    );
                Console.WriteLine(alterSql);
                db.ExecuteSql(alterSql);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T05:58:15.890

不，目前在[ServiceStack 的 OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite)中不支持 RDBMS Schema 与 POCO 的自动迁移。

目前在[OrmLite 的问题](https://github.com/ServiceStack/ServiceStack.OrmLite/issues/119)中讨论了一些线程，它们正在探索添加它的不同方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-27T17:49:52.430

我实现了一个 UpdateTable 函数。基本思想是：

1.  重命名数据库上的当前表。
2.  让 OrmLite 创建新模式。
3.  将旧表中的相关数据复制到新表中。
4.  **放下**旧桌子。

Github 回购：[https ://github.com/peheje/Extending-NServiceKit.OrmLite](https://github.com/peheje/Extending-NServiceKit.OrmLite)

精简代码：

```
public interface ISqlProvider
    {
        string RenameTableSql(string currentName, string newName);
        string GetColumnNamesSql(string tableName);
        string InsertIntoSql(string intoTableName, string fromTableName, string commaSeparatedColumns);
        string DropTableSql(string tableName);
    }

public static void UpdateTable<T>(IDbConnection connection, ISqlProvider sqlProvider) where T : new()
        {
            connection.CreateTableIfNotExists<T>();
            var model = ModelDefinition<T>.Definition;
            string tableName = model.Name;
            string tableNameTmp = tableName + "Tmp";
            string renameTableSql = sqlProvider.RenameTableSql(tableName, tableNameTmp);
            connection.ExecuteNonQuery(renameTableSql);

            connection.CreateTable<T>();

            string getModelColumnsSql = sqlProvider.GetColumnNamesSql(tableName);
            var modelColumns = connection.SqlList<string>(getModelColumnsSql);
            string getDbColumnsSql = sqlProvider.GetColumnNamesSql(tableNameTmp);
            var dbColumns = connection.SqlList<string>(getDbColumnsSql);

            List<string> activeFields = dbColumns.Where(dbColumn => modelColumns.Contains(dbColumn)).ToList();

            string activeFieldsCommaSep = ListToCommaSeparatedString(activeFields);
            string insertIntoSql = sqlProvider.InsertIntoSql(tableName, tableNameTmp, activeFieldsCommaSep);

            connection.ExecuteSql(insertIntoSql);

            string dropTableSql = sqlProvider.DropTableSql(tableNameTmp);
            //connection.ExecuteSql(dropTableSql);  //maybe you want to clean up yourself, else uncomment
        }

        private static String ListToCommaSeparatedString(List<String> source)
        {
            var sb = new StringBuilder();
            for (int i = 0; i < source.Count; i++)
            {
                sb.Append(source[i]);
                if (i < source.Count - 1)
                {
                    sb.Append(", ");
                }
            }
            return sb.ToString();
        }
    } 
```

MySql 实现：

```
public class MySqlProvider : ISqlProvider
    {
        public string RenameTableSql(string currentName, string newName)
        {
            return "RENAME TABLE `" + currentName + "` TO `" + newName + "`;";
        }

        public string GetColumnNamesSql(string tableName)
        {
            return "SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '" + tableName + "';";
        }

        public string InsertIntoSql(string intoTableName, string fromTableName, string commaSeparatedColumns)
        {
            return "INSERT INTO `" + intoTableName + "` (" + commaSeparatedColumns + ") SELECT " + commaSeparatedColumns + " FROM `" + fromTableName + "`;";
        }

        public string DropTableSql(string tableName)
        {
            return "DROP TABLE `" + tableName + "`;";
        }
    } 
```

用法：

```
 using (var db = dbFactory.OpenDbConnection())
 {
     DbUpdate.UpdateTable<SimpleData>(db, new MySqlProvider());
 } 
```

没有用 FK 测试过。无法处理重命名属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-24T20:07:10.537

这是[cornelha](https://stackoverflow.com/a/19396932/2305386)的代码稍作修改的版本，可用于 PostgreSQL。删除了这个片段

```
 //private static List<string> GetColumnNames(object poco)
        //{
        //    var list = new List<string>();
        //    foreach (var prop in poco.GetType().GetProperties())
        //    {
        //        list.Add(prop.Name);
        //    }
        //    return list;
        //} 
```

以及在 PostgreSQL 中创建表时`IOrmLiteDialectProvider.NamingStrategy.GetTableName`，`IOrmLiteDialectProvider.NamingStrategy.GetColumnName`OrmLite 使用的将表和列名从 PascalNotation 转换为 this_kind_of_notation 的方法。

```
 public static class IDbConnectionExtensions
    {
        private static List<string> GetColumnNames(IDbConnection db, string tableName, IOrmLiteDialectProvider provider)
        {
            var columns = new List<string>();
            using (var cmd = db.CreateCommand())
            {
                cmd.CommandText = getCommandText(tableName, provider);
                var tbl = new DataTable();
                tbl.Load(cmd.ExecuteReader());
                for (int i = 0; i < tbl.Columns.Count; i++)
                {
                    columns.Add(tbl.Columns[i].ColumnName);
                }

            }
            return columns;
        }

        private static string getCommandText(string tableName, IOrmLiteDialectProvider provider)
        {

            if (provider == PostgreSqlDialect.Provider)

                return string.Format("select * from {0} limit 1", tableName);
            else return string.Format("select top 1 * from {0}", tableName);
        }

        public static void AlterTable<T>(this IDbConnection db, IOrmLiteDialectProvider provider) where T : new()
        {
            var model = ModelDefinition<T>.Definition;
            var table = new T();
            var namingStrategy = provider.NamingStrategy;
            // just create the table if it doesn't already exist
            var tableName = namingStrategy.GetTableName(model.ModelName);
            if (db.TableExists(tableName) == false)
            {
                db.CreateTable<T>(overwrite: false);
                return;
            }

            // find each of the missing fields
            var columns = GetColumnNames(db, model.ModelName, provider);
            var missing = ModelDefinition<T>.Definition.FieldDefinitions
                                            .Where(field => columns.Contains(namingStrategy.GetColumnName(field.FieldName)) == false)
                                            .ToList();

            // add a new column for each missing field
            foreach (var field in missing)
            {
                var columnName = namingStrategy.GetColumnName(field.FieldName);
                var alterSql = string.Format("ALTER TABLE {0} ADD COLUMN {1} {2}",
                                             tableName,
                                             columnName,
                                             db.GetDialectProvider().GetColumnTypeDefinition(field.FieldType)
                    );
                Console.WriteLine(alterSql);
                db.ExecuteSql(alterSql);
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-16T06:51:45.713

我需要实现类似的东西，发现 Scott 的帖子很有帮助。我决定做一个小改动，让它变得更加不可知。由于我只使用 Sqlite 和 MSSQL，所以我把 getCommand 方法做得很简单，但可以扩展。我使用了一个简单的数据表来获取列。该解决方案非常适合我的要求。

```
 public static class IDbConnectionExtensions
{
    private static List<string> GetColumnNames(IDbConnection db, string tableName,IOrmLiteDialectProvider provider)
    {
        var columns = new List<string>();
        using (var cmd = db.CreateCommand())
        {
            cmd.CommandText = getCommandText(tableName, provider);
            var tbl = new DataTable();
            tbl.Load(cmd.ExecuteReader());
            for (int i = 0; i < tbl.Columns.Count; i++)
            {
                columns.Add(tbl.Columns[i].ColumnName);
            }

        }
        return columns;
    }

    private static string getCommandText(string tableName,  IOrmLiteDialectProvider provider)
    {

        if(provider ==  SqliteDialect.Provider)

        return string.Format("select * from {0} limit 1", tableName);
        else return string.Format("select top 1 * from {0}", tableName);
    }

    private static List<string> GetColumnNames(object poco)
    {
        var list = new List<string>();
        foreach (var prop in poco.GetType().GetProperties())
        {
            list.Add(prop.Name);
        }
        return list;
    }

    public static void AlterTable<T>(this IDbConnection db, IOrmLiteDialectProvider provider) where T : new()
    {
        var model = ModelDefinition<T>.Definition;
        var table = new T();
        // just create the table if it doesn't already exist
        if (db.TableExists(model.ModelName) == false)
        {
            db.CreateTable<T>(overwrite: false);
            return;
        }

        // find each of the missing fields
        var columns = GetColumnNames(db, model.ModelName,provider);
        var missing = ModelDefinition<T>.Definition.FieldDefinitions
                                        .Where(field => columns.Contains(field.FieldName) == false)
                                        .ToList();

        // add a new column for each missing field
        foreach (var field in missing)
        {
            var alterSql = string.Format("ALTER TABLE {0} ADD {1} {2}",
                                         model.ModelName,
                                         field.FieldName,
                                         db.GetDialectProvider().GetColumnTypeDefinition(field.FieldType)
                );
            Console.WriteLine(alterSql);
            db.ExecuteSql(alterSql);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-20T12:16:33.573

所以我接受了 user44 的回答，并修改了 AlterTable 方法以使其更高效。我没有为每个字段/列循环和运行一个 SQL 查询，而是通过一些简单的文本解析（MySQL 命令！）将它合并为一个查询。

```
 public static void AlterTable<T>(this IDbConnection db, IOrmLiteDialectProvider provider) where T : new()
        {
            var model = ModelDefinition<T>.Definition;
            var table = new T();
            var namingStrategy = provider.NamingStrategy;
            // just create the table if it doesn't already exist
            var tableName = namingStrategy.GetTableName(model.ModelName);
            if (db.TableExists(tableName) == false)
            {
                db.CreateTable<T>(overwrite: false);
                return;
            }

            // find each of the missing fields
            var columns = GetColumnNames(db, model.ModelName, provider);
            var missing = ModelDefinition<T>.Definition.FieldDefinitions
                                            .Where(field => columns.Contains(namingStrategy.GetColumnName(field.FieldName)) == false)
                                            .ToList();
            string alterSql = "";
            string addSql = "";
            // add a new column for each missing field
            foreach (var field in missing)
            {
                var alt = db.GetDialectProvider().ToAddColumnStatement(typeof(T), field); // Should be made more efficient, one query for all changes instead of many
                int index = alt.IndexOf("ADD ");
                alterSql = alt.Substring(0, index);
                addSql += alt.Substring(alt.IndexOf("ADD COLUMN")).Replace(";", "") + ", ";
            }
            if (addSql.Length > 2)
                addSql = addSql.Substring(0, addSql.Length - 2);
            string fullSql = alterSql + addSql;
            Console.WriteLine(fullSql);
            db.ExecuteSql(fullSql);
        }
```

# iphone - 以编程方式从通知托盘中删除 UILocalNotification

> ID：14142434
> 
> 赞同：12
> 
> 时间：2013-01-03T15:57:51.857
> 
> 标签：iphone, objective-c, ios, uilocalnotification

有没有办法以编程方式`UILocalNotification`从通知托盘中删除/关闭。我可以取消从中删除通知的通知

```
[[UIApplication sharedApplication] scheduledLocalNotifications] 
```

这是我需要做的

我需要`UILocalNotification`在执行操作后从 NotificationTray 中关闭（即在用户点击通知后）

编辑：我可以从`NSNotificationCenter`. 我想从**通知托盘**中删除特定通知。就像用户按下清除按钮以清除属于特定应用程序的所有通知一样。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T19:07:54.930

You can cancel all notifications using:

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

If you want to remove a particular notification, you can use `userinfo` of notification object, when you create a local notification add a unique ID to that. Later you can use that ID for removing local notification.

For that you can use the following code:

```
NSString *notificationId = @"id_to_cancel";
UILocalNotification *notification = nil;
for(UILocalNotification *notify in [[UIApplication sharedApplication] scheduledLocalNotifications])
{
  if([[notify.userInfo objectForKey:@"ID"] isEqualToString:notificationId])
  {
     notification = notify;
     break;
  }
}
[[UIApplication sharedApplication] cancelLocalNotification:notification]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-13T16:00:15.053

我相信我有类似的问题。当应用程序进入前台时，我试图清除过去的通知以从通知托盘中删除任何旧通知。

我做了这样的事情来获取旧通知并删除它们：

```
NSArray *activeNotifications = [[UIApplication sharedApplication] scheduledLocalNotifications];
NSArray *pastNotifications = [activeNotifications filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"firDate < %@", [NSDate date]]];
for (UILocalNotification *notification in pastNotifications) {
    [[UIApplication sharedApplication] cancelLocalNotification:notification];
} 
```

但是，似乎`scheduledLocalNotifications`不包括火灾日期已经过去的位置，即使它们仍然出现在通知中心。

通话`cancelAllLocalNotifications`似乎也删除了过去的通知。所以我们可以抓取所有当前的通知，取消所有通知，然后将我们仍然感兴趣的添加回来。

```
// Grab all the current notifications
NSArray *activeNotifications = [[UIApplication sharedApplication] scheduledLocalNotifications];

// Clear all notifications to remove old notifications
[[UIApplication sharedApplication] cancelAllLocalNotifications];

// Add back the still relevant notifications
for (UILocalNotification *notification in activeNotifications) {
    [[UIApplication sharedApplication] scheduleLocalNotification:notification];
} 
```

此外，如果不再需要某些通知，我们可以在添加它们之前对它们进行一些过滤，并且我们可以在应用程序变为活动时获取活动通知，将它们存储在实例变量中，并且仅在应用程序移动到时才将它们添加回来的背景

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T16:06:40.873

```
[UIApplication sharedApplication].applicationIconBadgeNumber = 0; 
```

也会做一些伎俩

但是如果你没有使用 applicationIconBadgeNumber，它就不会起作用，所以技巧是先设置 applicationIconBadgeNumber :)

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:1]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-04T14:09:17.187

```
// deletes a pushnotification with userInfo[id] = id
-(void)deleteLocalPushNotificationWithId:(NSString*)id{
  for(UILocalNotification *notification in [[UIApplication sharedApplication] scheduledLocalNotifications]){
    if([[notification.userInfo objectForKey:@"id"] isEqualToString:id]){
        [[UIApplication sharedApplication] cancelLocalNotification:notification];
    }
  }
}

// deletes all fired pushnotifications
-(void)clearLocalPushNotifications{
  NSArray *activeNotifications = [[UIApplication sharedApplication] scheduledLocalNotifications];

  // Clear all notifications to remove old notifications
  [[UIApplication sharedApplication] cancelAllLocalNotifications];

  // Add back the still relevant notifications
  for (UILocalNotification *notification in activeNotifications) {
    [[UIApplication sharedApplication] scheduleLocalNotification:notification];
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T16:28:15.740

如果应用程序没有运行，您将在

> -applicationDidFinishLaunchingWithOptions：

喜欢：

> ```
> UILocalNotification *localNotif = [launchOptions objectForKey: UIApplicationLaunchOptionsLocalNotificationKey]; 
> ```

否则你可以把它放进去

> *   (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification

现在您可以使用它从通知中心中删除它

> [[UIApplication sharedApplication] cancelLocalNotification:notificationToCancel];

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-22T17:57:23.880

我正在摆弄一些代码，我想知道如果应用程序在前台，为什么本地通知会存储在通知中心。这可能是因为 Apple 不知道你在用它们做什么，而且老实说也不在乎；所以他们做他们的工作。

就问题而言，我执行以下操作：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    if (application.applicationState == UIApplicationStateActive)
    {
        NSLog(@"active");

        // display some foreground notification;
        [application cancelLocalNotification:notification];
    }
    else
    {
        NSLog(@"inactive");
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-27T14:30:59.337

因此，我刚刚阅读了有关如何从通知中心关闭/删除所有已触发的本地通知的线程，如果用户通过单击应用程序图标而不是通知来打开应用程序。但毕竟这一切，其他计划的本地通知应该在未来触发。

这是我的简单解决方案，应该在应用程序变为Active时触发：

```
UIApplication* application = [UIApplication sharedApplication];
NSArray* scheduledNotifications = [NSArray arrayWithArray:application.scheduledLocalNotifications];
application.scheduledLocalNotifications = scheduledNotifications; 
```

我试过 [[UIApplication sharedApplication] cancelLocalNotification:notification]; 但它没有从通知中心（应用程序外部）清除已经触发的本地通知。

# php - 出于调试目的，如何将任何对象转换为字符串？

> ID：14142439
> 
> 赞同：3
> 
> 时间：2013-01-03T15:58:14.557
> 
> 标签：php, string

> **可能重复：**
> [PHP ToString() 等价物](https://stackoverflow.com/questions/28098/php-tostring-equivalent)
> [如何将 PHP 对象转换为字符串？](https://stackoverflow.com/questions/2537767/how-to-convert-a-php-object-to-a-string)

我正在寻找一个可以采用任何类型的变量（原始、对象、数组......）并将其转换为字符串的函数，以用于调试目的。

这是[我能找到的](https://stackoverflow.com/questions/28098/php-tostring-equivalent)关于将对象转换为字符串的最佳问题。它的答案似乎不包含可以处理各种对象的通用解决方案。我已经尝试过`(string)x`,`strval(x)`和`serialize(x)`, 也`json_encode(x)`来自[这个答案](https://stackoverflow.com/a/6836988/11236)。

`(string)x`和`strval(x)`原因`Object of class Foo could not be converted to string`。`json_encode(x)`为我返回一个空字符串。`serialize()`确实有效，但它的输出不仅是文本的（它包含奇怪的“NULL”并且有点难以阅读。

我尝试在 Stack Overflow 上搜索`Object of class Foo could not be converted to string`，但发现大量特定问题的投票数为零且没有通用解决方案。

**问题再次 - 如何漂亮地打印/将任何 php 值转换为 php 中的字符串？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:02:31.297

我通常会去`print_r`，到目前为止对我来说效果很好。

PHP手册： http: [//php.net/manual/en/function.print-r.php](http://php.net/manual/en/function.print-r.php)

> print_r — 打印关于变量的人类可读信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T16:00:05.003

我更喜欢：

```
print_r($object, true); 
```

这确实将对象的漂亮视图打印到字符串中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T16:01:26.577

如果这只是为了调试，最简单的解决方案是使用[print_r](http://de3.php.net/manual/en/function.print-r.php)或[var_dump](http://de3.php.net/manual/en/function.var-dump.php)。如果您在 HTML 文档中显示它，您可以将`<pre>`标签包裹起来以使其格式清晰易读。

```
<pre>    
<?php print_r( $object ); ?>
</pre> 
```

示例输出

```
$object = new mysqli('localhost', 'my_user', 'my_password', 'my_db');

print_r( $object ); 
```

`print_r`使用`\n`和`\t`格式化：

```
mysqli Object
(
    [affected_rows] => 0
    [client_info] => 5.1.62
    [client_version] => 50162
    [connect_errno] => 0
    [connect_error] =>
    [errno] => 0
    [error] =>
    [error_list] => Array
        (
        )

    [field_count] => 0
    [host_info] => 127.0.0.1 via TCP/IP
    [info] =>
    [insert_id] => 0
    [server_info] => 5.5.20
    [server_version] => 50520
    [stat] => Uptime: 11556798  Threads: 2  Questions: 1351931648  Slow queries: 421  Opens: 225532  Flush tables: 1  Open tables: 1017  Queries per second avg: 116.981
    [sqlstate] => 00000
    [protocol_version] => 10
    [thread_id] => 171160
    [warning_count] => 0
) 
```

# javascript - AngularJS - 使用 Mysql 过滤

> ID：14142440
> 
> 赞同：0
> 
> 时间：2013-01-03T15:58:21.157
> 
> 标签：javascript, filter, resources, angularjs

我尝试根据邮政编码在静态（非谷歌）地图上设置标记。
这是我的html代码：

```
<div ng-controller="DealerMarkerListCtrl">
    <a href="#/dealer/{{marker.id}}" class="marker" style="left:{{marker.left}}px;top:{{marker.top}}px" ng-repeat="marker in dealer|zipFilter:countryLookup"></a>
</div> 
```

现在我尝试显示按邮政编码和国家/地区过滤的所有标记，这是下拉列表：

```
<input type="text" name="plz" placeholder="PLZ (z.B 80469)" class="plz" ng-model="zipCodeLookup">
<select name="drop" tabindex="1" class="drop" id="dropcountry" ng-model="countryLookup" ng-options='option.value as option.name for option in typeOptions'>
</select> 
```

我得到了以下过滤器：

```
app.filter("zipFilter", function() { return function(markers, country, zip) {
    var retMarkers = [];
    for(var i = 0, len = markers.length; i < len; ++i) {
        var singleMarker = markers[i];
        if(singleMarker.land == country) {
            retMarkers.push(singleMarker);
        }
    }
    return retMarkers;
}}); 
```

**主要问题是：**
我得到了一个外接环搜索，我得到了用户邮政编码周围 20（公里/英里）内的所有邮政编码。这工作正常。当我直接访问框架（不在控制器内）时，我得到一个这样的 json：

```
{"plz":["44787","44789","44791","44793","44795","44797","44799","44801","44803","44805","44807","44809","44866","44867","44869","44879","44892","44894","45525","45527","45529","45549"]} 
```

对于邮政编码“45525”。

现在我需要显示这个邮政编码数组中的所有标记（经销商）。
需要将过滤器中的 zip 参数和 country 参数一起发送到“区域搜索”功能“files/framework/umkreis/:zip/:country”以获取该区域的 zip json。
之后我需要检查一些标记是否在这个 json 中并过滤它们。

我只是不知道，如何将这些东西构建到我的过滤器中。你能帮我解决这个问题吗？非常感谢。

**其他有用信息：**
**路线和服务：**

```
app.factory('dealerService', ['$resource', '$http', '$rootScope', function($resource, $http, $rootScope){
    return {
    //the resource provider interacting with the PHP backend
        api: 
        $resource('files/framework/dealer/:id', {}, {
            update: {method:'PUT'}
        }),
    }
}])

app.config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/dealer/:id', {templateUrl: 'files/tpl/dealer-details.html', controller: 'DealerDetailsCtrl'}).
      otherwise({redirectTo: '/dealer'});
}]); 
```

获取区域邮政编码的“Slim”框架的路径是：

```
files/framework/umkreis/45525/DE
or
files/framework/umkreis/:zip/:country 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:04:14.490

您似乎正在尝试根据表单中的两个字段更新地图上的标记：“zipCodeLookup”和“countryLookup”。

```
<input ... ng-model="zipCodeLookup" ... />
<select ... ng-model="countryLookup" ... ></select> 
```

标记显示在以下控制器中：

```
<div ng-controller="DealerMarkerListCtrl"></div> 
```

你正在使用这条路线从你的 PHP 服务器收集 JSON

```
files/framework/umkreis/:zip/:country 
```

您需要做的是在“DealerMarkerListCtrl”控制器中指定一个函数，该函数将采用邮政编码和国家/地区，并使用来自服务器的新 JSON 更新经销商。

```
$scope.updateDealer = function(zip, country) { 
    $http.get('files/framework/umkreis/'+ zip + '/' + country).
    success(function(data) { 
        $scope.dealer = data; 
    }); 
} 
```

有了这个之后，您可以添加一个包含将调用此函数的输入的`ng-submit`，`<form>`

```
<form ng-submit="updateDealer(zipCodeLookup, countryLookup)"> ... </form> 
```

确保它`<form>`位于正确的控制器内部以查看新创建的函数。每当用户提交此表单时，它将调用您的 PHP 服务器，获取 JSON，并更新经销商数组。

# c - String pointer issue in C code

> ID：14142447
> 
> 赞同：0
> 
> 时间：2013-01-03T15:58:31.483
> 
> 标签：c

This C program reads a line of text from keyboard and then writes the longest word in the line. The issue with my code below is that it only prints the last word apart from its length, although everything seems fine. Can anyone see a problem with my code?

```
#include<stdio.h>
#include<string.h>

#define MAX 132
#define MAXW 30

int Len_w[MAXW];
int Max_V(int vf[], int len);

main()
{
    char s[MAX+1], w[MAXW], *Ind_w[MAXW],*p,out[MAXW];
    int k=0, i=0, Maximum, g=0;
    printf("\nInsert the line....\n");
    p=fgets(s, MAX, stdin);

    while(sscanf(p, "%s%n", w, &k)==1){
        Len_w[i] = strlen(w);
        Ind_w[i] = w; //the issue is here!!
        p+=k+1;
        i++;
    }
    Maximum = Max_V(Len_w,i);

    for(g=0;g<i;g++){
        if(Len_w[g] == Maximum){
                //sscanf(Ind_w[g],"%s",out);
                printf("\n%s", Ind_w[g]);

            }
    }

    return 0;
}

/*----------------------------------------------------------------------------*/
int Max_V(int vf[], int len)
{
  int j; int Max;
  Max=*vf;

  for(j=1; j < len; j++)
  {
     if(*(vf+j) > Max)
     {
         Max=*(vf + j);
     }
  }

  return Max;
}
/*----------------------------------------------------------------------------*/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T16:00:17.313

```
Ind_w[i] = w;//the issue is here!! 
```

You let all pointers in `Ind_w` point to the same buffer, which is overwritten for each entered word. So only the last entered word remains "visible".

If you have it,

```
Ind_w[i] = strdup(w); 
```

is a simple solution. Otherwise

```
Ind_w[i] = malloc(strlen(w)+1);
strcpy(Ind_w[i], w); 
```

Both ways require the pointed-to memory to be freed when it is no longer used.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:01:38.773

```
Ind_w[i] = strdup(w);//the issue is here!! 
```

`w`每次读取缓冲区时都必须复制缓冲区，并且不要对所有读取使用相同的缓冲区。使用您所做的方式，您将拥有指向同一个缓冲区的所有数组元素，并且该缓冲区包含相同的字符串，这是最后一个读取的字符串`sscanf`

**注意：**当它们无用时，您必须使用`free`所有重复的缓冲区。您可以通过遍历指针数组并释放每个元素（指针）来完成

# r - RStudio v0.97 on Windows 7 64bit -- color2D.matplot will not knit to html, using Rmarkdown

> ID：14142451
> 
> 赞同：0
> 
> 时间：2013-01-03T15:58:35.613
> 
> 标签：r, knitr, rstudio, r-markdown

I am trying to generate the following plot as an html document, using Rmarkdown, in Rstudio:

```
color2D.matplot(M,cs1=c(0,1),cs2=c(0,1),cs3=c(0,1),
                extremes=c(1,3),cellcolors=NA,show.legend=TRUE,nslices=10,xlab="Base Price (R)",
                ylab="GP (%)",do.hex=FALSE,axes=FALSE,show.values=FALSE,vcol=NA,vcex=1,
                border="black",na.color=NA,xrange=NULL,color.spec="rgb",yrev=TRUE,
                xat=NULL,yat=NULL,Hinton=FALSE) 
```

But I get the following error:

```
## Error: could not find function "color2D.matplot" 
```

However, the plot generates perfectly in the Rstudio 'Plots' display. Is there something that can be done so that Rmarkdown *can* find the function and display the output? Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:11:55.007

`library(plotrix)`在调用它的函数之前使用`color2D.matplot()`。

# android - Ui effect for a textview in android

> ID：14142457
> 
> 赞同：0
> 
> 时间：2013-01-03T15:58:48.160
> 
> 标签：android, android-layout

![Please watch the customer name and country and arrow in the list view ,i would like to implement the same effect for text view in my application .](../Images/197569e7ce511083c919c78e8593c2bd.png)

Please watch the customer name and country and arrow in the list view ,i would like to implement the same effect for text view in my application. i.e the text should place at left side and right side arrow mark and if we touches the textview it should display some other screen.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:05:06.487

这不是一个单一的 TextView，而是一个列表项 RelativeLayout 或 LinearLayout，其中包含两个 TextView 和一个用于右侧箭头图形的 ImageView。它将使用 ListActivity 或 ListFragment 为您处理触摸，将您带到另一个屏幕。

[http://developer.android.com/reference/android/app/ListFragment.html](http://developer.android.com/reference/android/app/ListFragment.html)

如网站上所示，您的代码将类似于：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="wrap_content">

 <TextView android:id="@+id/name"
     android:textSize="16sp"
     android:textStyle="bold"
     android:alignParentLeft="true"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>

 <TextView android:id="@+id/country"
     android:textSize="16sp"
     android:alignParentLeft="true"
     android:layout_below="@+id/name"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>

 <ImageView android:id="@+id/arrow"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:alignParentRight="true"/> 
```

然后相应地调整它。

编辑 - -

一旦你有了 XML 视图，你就可以在你的 Activity 中添加一个这样的点击监听器：

```
LinearLayout layout = (LinearLayout) findViewById(R.id.linear_layout);
layout.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        // Do your code here to switch to another view or activity
    }
}); 
```

# java - Evaluating complicated mathematical exprerssion in Java given as String

> ID：14142459
> 
> 赞同：0
> 
> 时间：2013-01-03T15:58:51.030
> 
> 标签：java, algorithm, data-structures

> **Possible Duplicate:**
> [using eval in Java](https://stackoverflow.com/questions/2605032/using-eval-in-java)
> [Is there a java equivalent of the python eval function?](https://stackoverflow.com/q/7143343/102937)

How can I evaluate complicated mathematical expressions (with trigonometric functions) in Java, given as a String such as the following (say given angles are in degrees):

```
3 + 8 - ( 8 + sin(30) + 5 - 3 * 2 + (8 - 5 * 6) ) * cosec(45) 
```

Please suggest any production quality third party libraries if available, or suggest suitable algorithm / data structure if I have to do the boilerplate coding myself.

# java - Java 多核处理

> ID：14142461
> 
> 赞同：7
> 
> 时间：2013-01-03T15:59:02.600
> 
> 标签：java, concurrency, multicore

我想了解Java的多核处理。据我了解，这`Threading`是一种多核，我觉得我掌握得很好。我知道还有其他方法可以进行多核处理，但我不知道它们是什么。有谁知道任何好的简单教程/示例，或者有他们自己的，我可以查看以了解更多关于 Java 中的多核处理的信息？

我发现的所有教程都对图表、图形、背景信息等过于深入，这真的不是我学习编程的风格。我最好喜欢快速简单的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T16:06:17.120

使用多核的主要方式是使用多线程。如果通过您应该熟悉的[高级并发对象](http://docs.oracle.com/javase/tutorial/essential/concurrency/highlevel.html)来使用这些最简单的方法。这使用线程，但您不必直接处理它们。

另一种方式是使用多进程，但这是使用多线程的间接方式。

你可能会觉得这个库很有趣。[Java Thread Affinity](http://vanillajava.blogspot.co.uk/2011/12/thread-affinity-library-for-java.html#!/2011/12/thread-affinity-library-for-java.html)它允许您将线程分配给套接字、内核或 CPU。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T16:07:39.890

这是 Oracle 关于 Java 7 fork/join 框架的教程

[http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:50:16.037

除了提到的作为 Java 实现的一部分的高级并发对象（应该在那里添加 fork/join）之外，还有许多库和框架。谷歌搜索“actor framework”、“dataflow framework”、mapreduce、“scientific dataflow”。数据流模型是主流，所有其他都是它的变体（例如，actor - 具有单个输入端口的数据流节点，mapreduce - 由需求创建的持久分布式actor等）。最小的数据流框架（在机器集群上没有持久性或分布）是我的[df4j](https://github.com/rfqu/df4j)库。

# ruby-on-rails - 表单 url 在 rails 中未正确显示

> ID：14142462
> 
> 赞同：-1
> 
> 时间：2013-01-03T15:59:07.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我的编辑表单有这个 URL：

```
<%=form_for @cad,:url =>{:action => "update",:controller => "cad" } do |f| %> 
```

它应该指向`"/cad/update"`，但 URL 指向“cad/6”。

请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:04:50.143

如果您遵循宁静的路线进行更新，那很好 它是会员路线 有两种类型的路线

第一个`collection route`一般适用于所有对象，如`index`动作，第二个`member route`适用于`specific object`等`show,edit,update,destroy`，

在您的情况下，更新是成员路由，它具有 http 动词`put`，基本上是`post`请求您可以检查 http 方法，并且您不需要表单导轨上的 url 哈希选择它基于对象的路由

# web-services - 如何使用 Jersey 测试框架使用 Spring 测试 Jersey Web 服务

> ID：14142468
> 
> 赞同：1
> 
> 时间：2013-01-03T15:59:27.647
> 
> 标签：web-services, jersey, integration-testing, glassfish-3

我正在尝试使用 Jersey 测试框架测试我的 Web 服务，但是您使用什么测试容器工厂来测试 Spring Web 服务？我尝试了 EmbeddedGlassfishContainerFactory，但它一直在寻找 sun-web.xml 文件，但我使用的是名为 glassfish-web.xml 的 Glassfish 文件的最新版本。使用 GrizzlyWebTestContainerFactory 它给了我一个关于 EJB 调用的错误。我试图找到一个使用 Spring 和 Jersey 测试框架的好例子，但我找不到任何有效的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:56:25.163

按照这个人的做法让它工作：http: [//ameethpaatil.blogspot.ca/2011/09/restful-webservice-jersey-spring-30x.html](http://ameethpaatil.blogspot.ca/2011/09/restful-webservice-jersey-spring-30x.html)

# magento - Magento：adminhtml 阻止指令未在前端电子邮件模板中加载

> ID：14142477
> 
> 赞同：1
> 
> 时间：2013-01-03T16:00:06.970
> 
> 标签：magento, email-templates, transactional-email

我一直在网上搜寻这个。Magento Commerce 对我来说很干。grepping 核心代码，阅读 Alan Storm，细读 Incho，甚至在 SO 上找到相关问题都没有给我答案。

话虽如此，**我的问题在于一个事务性电子邮件模板，该模板在从后端处理而*不是*从前端**处理时起作用。这是一个片段：

```
<td width="100%" colspan="2" align="left">

    <!-- inject products quote table -->
    {{block type="adminhtml/sales_quotation_email" template="sales/quotation/email_quote_items.phtml" inherits=$template quote=$quote salesrep=$salesrep}}

    <!-- inject cross-sell products table -->
    {{block type="adminhtml/sales_quotation_email" template="sales/quotation/email_quote_cross_sells.phtml" inherits=$template quote=$quote salesrep=$salesrep}}

</td> 
```

在后端，这些块按预期呈现。在前端，这些块指令上方和下方的所有内容都被渲染，但在渲染模板时，这些指令似乎在处理中死亡。没有错误被抛出。

我听从了[这里](https://stackoverflow.com/questions/6133435/magento-email-templates-blocks-not-rendering-from-adminhtml)的建议，但没有运气。最初我尝试在电子邮件模板模型上使用 setDesignConfig，但没有奏效。我什至尝试将 设置`area`为指令中的属性，但这也不起作用。一位同事建议我将上述模板复制两份：一份设置为 in `design/adminhtml`，另一份设置为`design/frontend`. 我宁愿不必担心额外的维护。另外，如果指令中指定的块类型来自 adminhtml，我担心我会遇到同样的问题。我不想要那个解决方案。

那么我做错了什么？我不明白什么？

Magento 如何解析模板的真实路径，模板是否强制驻留在其父块的区域中？

需要帮助！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:20:54.790

**解决了**

[我在Magento Commerce](http://www.magentocommerce.com/boards/26245/viewthread/9012/#t38947)上找到了一篇相关的帖子，让我重回正轨。我开始在两个控制器中转储设计配置：1 in`frontend`和 1 in `adminhtml`. 我立即注意到`frontend`请求中缺少主题信息。`frontend`查看我的控制器的一些示例输出：

```
Mage_Core_Model_Design_Package Object (
    [_store:protected] => 
    [_area:protected] => frontend
    [_name:protected] => mypackage
    [_theme:protected] => Array
        (
            [layout] => 
            [template] => 
            [skin] => 
            [locale] => mytheme
        )

    [_rootDir:protected] => 
    [_callbackFileDir:protected] => 
    [_config:protected] => 
    [_shouldFallback:protected] => 1 ) 
```

请注意，`layout`属性中的`template`、 和`skin`是空的`theme`。当我从`adminhtml`控制器中转储设计配置时，设置了这些属性。

所以回到我的`frontend`控制器，我在实例化我的电子邮件模板模型之前添加了以下行：

* * *

```
Mage::getDesign()->setArea('adminhtml');
Mage::getDesign()->setTheme('mytheme'); 
```

* * *

和噗！有效！处理了我的块指令，并按预期返回了完全呈现的内容。

**因此，尽管我的想法是正确设置`area`，但仅此还不够。我还必须配置`theme`.**

我对解决方案感到满意。我希望它可以帮助其他人。~~但是要完全回答这个问题，我仍然很好奇是否有人知道**为什么**`frontend`在请求期间设计配置中缺少包信息。它与来自的指令中的块类型有关`adminhtml`吗？这是有道理的，因为`adminhtml`无需担心主题信息。我只是不知道这些决定将在核心代码中的哪里做出。~~ **请参阅下面的更新。**

**更新：**

**自从原来的帖子学到了更多**。我的问题给出了一个代码示例，该示例构建了一个来自`adminhtml`. *我认为*模板的路径正在解析到前端，这就是找不到模板的原因。事实并非如此。由于其类命名约定，adminhtml 块将查找`design/adminhtml/package/default/module`您的模板。

但是，在我的特定 Magento 安装中，我在 local.xml 中有一个设计覆盖，它更改了管理主题，以便管理请求检查`design/adminhtml/package/mytheme/module`模板。这就是我的 phtml 模板存储的地方。因此，在前端请求中，控制器对这个覆盖一无所知，并且只是根据商店配置中为特定包和主题设置的内容来构建设计配置。

总之，我对 setTheme() 的调用必须使用修改后的配置数据，如下所示：

```
Mage::getDesign()->setTheme(
    (string)    Mage::app()
                ->getConfig()
                ->getNode('stores/admin/design/theme/default')
); 
```

我想这就是说，对于大多数安装来说，对 setArea() 的简单调用就足够了。

最后，您需要在工作完成后恢复设计配置更改，否则后续操作可能会产生不希望的结果。

# javascript - jquery.each - passing the counter to child .onload function

> ID：14142479
> 
> 赞同：2
> 
> 时间：2013-01-03T16:00:08.073
> 
> 标签：javascript, foreach, closures

somehow my counter variable is not passed to the child function. i'm guessing it's because of some asyncronous behavior but actually i have no clue. please help.

```
$(document).ready(function() {
    var imgArray = new Array();
    $("canvas").each(function(i) {
        imgArray[i] = new Image();
    });
    $.each(imgArray, function(i) {
        alert(i);
        //correct output

        this.onload = function() {
            alert(i);
            //"undefined"

            var width = this.width,
                height = this.height;
            var context = $("canvas")[i].getContext("2d");
            //here's the error

            /* more code */
        };
        this.src = "PATH";      
    });
}); 
```

so how can i pass the value for the right canvas?
thanks for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:10:13.597

您遇到的问题是由于 JavaScript 支持闭包的性质所致。这并不是说问题是错误。它的行为与应有的完全一样。该方法在已经被一路迭代并成为`onload`后被执行。一个可行的解决方案是使用闭包来发挥您的优势并将函数创建包装在调用中，例如`i``undefined``this.onload = (function(index) { /* ... */ })(i);`

这保证了该值按预期存储在`onload`您正在创建的方法可内部访问的变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:06:23.950

将你的这一部分改正到这部分。

```
 this.onload = (function(a) {
            alert(a);
            //"undefined"

            var width = this.width,
                height = this.height;
            var context = $("canvas")[a].getContext("2d");
            //here's the error

            /* more code */
        })(i); 
```

我创建了一个闭包，以便`i`在循环迭代中捕获该值。

我将提供一个简单的例子：

```
var i=0;

i++;
alert(i) //1

i++;
alert(i) //2

alert(i) //2 !!! 
```

这就是您的代码中实际发生的情况。

# database - Cypher 访问空间分隔关系属性 neo4j

> ID：14142483
> 
> 赞同：1
> 
> 时间：2013-01-03T16:00:22.400
> 
> 标签：database, graph, neo4j, cypher

我有几百万个使用[https://github.com/jexp/batch-import](https://github.com/jexp/batch-import)导入的节点大型数据集。

不幸的是，该脚本将关系属性名称空间分隔为“某些属性”。

我如何在 Cypher 中请求此属性？

正如预期的那样

```
r.Some Property 
```

不起作用，这只是公平的。

我也试过：

```
r["Some Property"] 
```

这种命名有语法吗？

我应该用驼峰属性名称还是下划线分隔的名称重做导入？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T04:30:25.760

您可以返回名称中带有空格的属性，方法是使用反引号 ` 将属性名称括起来。像这样的东西应该在 Cypher 中工作：

```
START r=rel(0) RETURN r.`Some Property`; 
```

这也适用于节点属性。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-30T14:50:05.447

您可以使用`MATCH (r) WHERE r.type=~'Some Property.*' RETURN r;`

我希望这会让你得到确切的关系类型。

或者

`MATCH (n)-[r]->() WHERE type(r)=~'S.*'`它会给你所有的关系开始`S`。

# java - HTTP Authorization header consistency in requests

> ID：14142484
> 
> 赞同：0
> 
> 时间：2013-01-03T16:00:22.423
> 
> 标签：java, http, rest, authentication

HTTP specification says;

*HTTP access authentication is described in "HTTP Authentication: Basic and Digest Access Authentication" [43]. If a request is authenticated and a realm specified, the same credentials SHOULD be valid for all other requests within this realm (assuming that the authentication scheme itself does not require otherwise, such as credentials that vary according to a challenge value or using synchronized clocks).*

I don't really understand what this means, but here is my scenario is there anything against HTTP specs here? I use Java Rest service

*   Client sends username:password using HTTP Authorization header using **HTTP Basic**
*   Server sends back a token
*   Now client sends a custom authorization token instead of password for further requests **still** in the HTTP authorization header **still** using **HTTP Basic** username:token

Now this does not feel right since what I am really doing with the auth token is NOT an actual HTTP Basic authorization. Also usage of the very same header is inconsistent between requests.

But on the other hand I do not want create yet another custom header for the token exchange. Because its hard to base64 encode them with test tools when you use a custom header. And still inconsistent headers between requests.

Note: these requests refers to different endpoints

What do you advice?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:14:30.467

如果您这样做，由于您使用相同的标头，您是否需要服务器端逻辑来区分登录何时是实际登录，而不是您的令牌？归根结底，HTTP 授权已经是一个令牌（只是用户名/密码字符串的简单编码版本），所以在所有情况下您都会收到一个令牌，现在您必须对其进行解码，确定它是否是您的一个会话令牌，或者如果它是用户名/密码，则检查两个“好令牌”来源。

我建议不要这样做，但不是因为你违反了标准，只是感觉很复杂。

为什么首先需要将用户名/密码更改为令牌？您是否正在重定向到不再需要 HTTP 基本身份验证的端点？

# php - Zend Framework 2 - Doctrine 关系的 Hydrator 策略不起作用

> ID：14142488
> 
> 赞同：1
> 
> 时间：2013-01-03T16:00:26.173
> 
> 标签：php, doctrine-orm, zend-form, zend-framework2, foreign-key-relationship

[正如这里](https://stackoverflow.com/q/14140447/1331671)提到的，我正在构建一个自定义水合策略来处理表单中选择框中的相关对象。

我的表格如下所示：

```
$builder = new AnnotationBuilder($entityManager);
$form    = $builder->createForm(new MyEntity());
$form->add(new MyFieldSet());

$hydrator = new ClassMethodsHydrator();
$hydrator->addStrategy('my_attribute', new MyHydrationStrategy());
$form->setHydrator($hydrator);

$form->get('my_attribute')->setValueOptions(
      $entityManager->getRepository('SecEntity\Entity\SecEntity')->fetchAllAsArray()
); 
```

**当我通过添加新`MyEntity`的`addAction`一切都很好。**

我写信`fetchAllAsArray()`来填充我的选择框。它位于我的 SecEntityRepository 中：

```
public function fetchAllAsArray() {

    $objects = $this->createQueryBuilder('s')
        ->add('select', 's.id, s.name')
        ->add('orderBy', 's.name ASC')
        ->getQuery()
        ->getResult();

    $list = array();
    foreach($objects as $obj) {
        $list[$obj['id']] = $obj['name'];
    }

    return $list;
} 
```

但在编辑情况下，该`extract()`功能不起作用。我还没有看到一些东西，`hydrate()`所以我现在就把它排除在外。

我的保湿策略如下所示：

```
class MyHydrationStrategy extends DefaultStrategy
{
    public function extract($value) {        
        print_r($value);
        $result = array();
        foreach ($value as $instance) {
            print_r($instance);
            $result[] = $instance->getId();
        }
        return $result;
    }

    public function hydrate($value) {
        ...
    } 
```

问题如下：

> 致命错误：在非对象上调用成员函数 getId()

`print_r($value)`返回以开头的大量内容

> DoctrineORMModule\Proxy__CG__\SecEntity\Entity\SecEntity 对象

接下来是关于 BasicEntityPersister 的一些内容，并且在混乱中的某处是我引用的实体。

`print_r($instance)`什么都没有打印。它只是空的。因此我猜错误消息是合法的......但为什么我不能遍历这些对象？

有任何想法吗？

**编辑：**

关于@Sam：

我在实体中的属性：

```
 /**
 * @ORM\ManyToOne(targetEntity="Path/To/Entity", inversedBy="whatever")
 * @ORM\JoinColumn(name="attribute_id", referencedColumnName="id")
 * @Form\Attributes({"type":"hidden"})
 *
 */
protected $attribute; 
```

我的新选择框：

```
$form->add(array(
        'name'       => 'attribute',
        'type'       => 'DoctrineModule\Form\Element\ObjectSelect',
        'attributes' => array(
            'required' => true
        ),
        'options'    => array(
            'label'           => 'MyLabel',
            'object_manager'  => $entityManager,
            'target_class'    => 'Path/To/Entity',
            'property'        => 'name'
        )
    )); 
```

我最后的希望是我在控制器内做错了什么。我的选择框既没有被预选，也没有保存值......

```
...

$obj= $this->getEntityManager()->find('Path/To/Entity', $id);

    $builder = new \MyEnity\MyFormBuilder();
    $form = $builder->newForm($this->getEntityManager());

    $form->setBindOnValidate(false);
    $form->bind($obj);
    $form->setData($obj->getArrayCopy());

    $request = $this->getRequest();
    if ($request->isPost()) {
        $form->setData($request->getPost());

        if ($form->isValid()) {
            $form->bindValues();
            $this->getEntityManager()->flush();

            return $this->redirect()->toRoute('entity');
        }
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T19:19:08.820

我还没有来写教程：S

我不知道这是否与注释构建器一起使用！根据`DoctrineModule\Form\Element\ObjectSelect`需要`EntityManager`工作。的选项`ObjectSelect`如下：

```
 $this->add(array(
        'name'       => 'formElementName',
        'type'       => 'DoctrineModule\Form\Element\ObjectSelect',
        'attributes' => array(
            'required' => true
        ),
        'options'    => array(
            'label'           => 'formElementLabel',
            'empty_option'    => '--- choose formElementName ---',
            'object_manager'  => $this->getEntityManager(),
            'target_class'    => 'Mynamespace\Entity\Entityname',
            'property'        => 'nameOfEntityPropertyAsSelect'
        )
    )); 
```

在这种情况下，我使用`$this->getEntityManager()`. 我在从 ServiceManager 调用表单时设置了此依赖项。就我个人而言，我总是从 FactoryClasses 执行此操作。我的 FormFactory 看起来像这样：

```
public function createService(ServiceLocatorInterface $serviceLocator)
{
    $em = $serviceLocator->get('Doctrine\ORM\EntityManager');

    $form = new ErgebnishaushaltProduktForm('ergebnisform', array(
        'entity_manager' => $em
    ));

    $classMethodsHydrator = new ClassMethodsHydrator(false);

    // Wir fügen zwei Strategien, um benutzerdefinierte Logik während Extrakt auszuführen
    $classMethodsHydrator->addStrategy('produktBereich', new Strategy\ProduktbereichStrategy())
                         ->addStrategy('produktGruppe', new Strategy\ProduktgruppeStrategy());

    $hydrator = new DoctrineEntity($em, $classMethodsHydrator);

    $form->setHydrator($hydrator)
         ->setObject(new ErgebnishaushaltProdukt())
         ->setInputFilter(new ErgebnishaushaltProduktFilter())
         ->setAttribute('method', 'post');

    return $form;
} 
```

这就是所有魔法发生的地方。魔术，这也与您在 SO 上的其他线程相关。首先，我抓住`EntityManager`. 然后我创建我的表单，并为`EntityManager`. 我使用自己的表单执行此操作，您可以编写并使用 Setter-Function 来注入`EntityManager`.

接下来我创建一个`ClassMethodsHydrator`并添加两个`HydrationStrategies`。我个人需要为每个`ObjectSelect`元素应用这些策略。您**可能**不必在您身边执行此操作。首先尝试看看它是否在没有它的情况下工作！

之后，我创建了`DoctrineEntity`-Hydrator，注入了`EntityManager`我的自定义`ClassMethodsHydrator`。这样，策略将很容易添加。

其余的应该是不言自明的（尽管有德语类名：D）

**为什么需要策略**

Imo，这是`DoctrineEntity`目前缺少的东西，但事情仍处于早期阶段。一旦[DoctrineModule-Issue#106](https://github.com/doctrine/DoctrineModule/pull/106)上线，事情就会再次发生变化，可能会让它更舒服。

策略如下所示：

```
<?php
namespace Haushaltportal\Stdlib\Hydrator\Strategy;

use Zend\Stdlib\Hydrator\Strategy\StrategyInterface;

class ProduktbereichStrategy implements StrategyInterface
{
    public function extract($value)
    {
        if (is_numeric($value) || $value === null) {
            return $value;
        }

        return $value->getId();
    }

    public function hydrate($value)
    {
        return $value;
    }
} 
```

所以只要`$value`不是数字或空值，意思是：它应该是一个对象，我们就会调用这个`getId()`函数。就我个人而言，我认为为每个元素提供自己的策略是一个好主意，但如果您确定以后不需要更改策略，您可以为多个元素创建一个全局策略，例如`DefaultGetIdStrategy`。

所有这些基本上都是[Michael Gallego aka Bakura](http://michaelgallego.fr/)的好作品！万一你路过IRC，只需拥抱他一次；）

**编辑**一个[展望未来](https://github.com/bakura10/DoctrineModule/blob/a76195401d8f9fbc2c32e4435edf889793a1d6c8/docs/hydrator.md)的附加资源- 更新了 hydrator-docs，很可能很快就会被包括在内，拉取请求

# java - java时间戳转换

> ID：14142491
> 
> 赞同：-3
> 
> 时间：2013-01-03T16:00:35.393
> 
> 标签：java, date, timestamp

我有两个程序，但我找不到将它们合并在一起的方法。无论如何我可以做到这一点吗？

这是通过将日期转换为字符串的代码的第一部分

```
package main_program;

import java.text.ParseException;
import java.text.SimpleDateFormat;  
import java.util.Date;

public class testing2 {
    public static void main( String[] args) {
        SimpleDateFormat format = new SimpleDateFormat(" EEE MMM dd HH:mm:ss zzz yyyy ");
        String time = " Wed Dec 14 00:00:00 CST 2012 ";
        Date date = null; 
        try {
            date = format.parse(time);
        } catch (ParseException e1) {
            e1.printStackTrace();
        }
        try {
            System.out.println("Format To times:"); 
            System.out.println(date.getTime());
        }catch (Exception e){
            e.printStackTrace();
        }
    }
} 
```

这是代码的第二部分，将长字符串转换为格式化日期

```
package main_program;

import java.sql.Timestamp;

public class lta {
    public static void main(String[] args) {
        java.util.Date ABC= new java.util.Date(1355241600000l);
        System.out.println(new Timestamp(ABC.getTime()));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:11:45.590

```
package main_program;

import java.text.ParseException;
import java.text.SimpleDateFormat;  
import java.util.Date;
import java.sql.Timestamp;

public class testing2 {
    public static void main( String[] args) {
        SimpleDateFormat format = new SimpleDateFormat(" EEE MMM dd HH:mm:ss zzz yyyy ");
        String time = " Wed Dec 14 00:00:00 CST 2012 ";
        Date date = null; 
        try {
            date = format.parse(time);
        } catch (ParseException e1) {
            e1.printStackTrace();
        }
        try {
            System.out.println("Format To times:"); 
            System.out.println(date.getTime());
            Timestamp ts = new Timestamp(date.getTime());
            System.out.println(ts);
        }catch (Exception e){
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:18:29.563

要将它们合并在一起，您可以不用在单独的类中定义两个主要方法，而是创建一个定义了给定方法的更大的类。在这种情况下，这些方法可能应该设置为返回值，而不是打印。如果您愿意，可以打印从它们返回的值。像这样的东西：

修改以实现评论中所述的目标：

```
public class MyClass {
import java.text.ParseException;
import java.text.SimpleDateFormat;  
import java.util.Date;
import java.sql.Timestamp;

    public static void main(String[] args) {
        //Do whatever you are intending to, calling 'lta' and 'testing2', like:
        String time=" Wed Dec 14 00:00:00 CST 2012 ";
        long longtime = testing2(time);
        System.out.println(lta(longtime));
    }

    public static Timestamp lta(long time)
    {
        java.util.Date ABC= new java.util.Date(time);
        return new Timestamp(ABC.getTime());
    }

    public static long testing2(String time)    {
        SimpleDateFormat format =   new SimpleDateFormat( " EEE MMM dd HH:mm:ss zzz yyyy " );
        Date date = null; 
        try {
            date = format.parse(time);
        } catch (ParseException e1) {
            e1.printStackTrace();
            return null;
        }
        try {
            return String.valueOf(date.getTime());
        }catch (Exception e){
            e.printStackTrace();
            return null;
        }
    }
} 
```

# objective-c - 如何循环遍历自定义对象的 NSArray

> ID：14142493
> 
> 赞同：1
> 
> 时间：2013-01-03T16:00:38.157
> 
> 标签：objective-c, ios, nsarray, enumeration

我从 CoreData 获取中创建了一个 NSArray，如下所示：

```
self.farSiman = [self.managedObjectContext executeFetchRequest:request error:&error]; 
```

在表格视图中，我使用此代码来获取我的自定义对象：

```
Holiday *holiday = [self.dates objectAtIndex:indexPath.row];
cell.nameLabel.text = holiday.name; 
```

但是我现在在另一个视图控制器中，试图在 mapkit 上绘制数据，所以在绘图方法中我最初这样做是因为我从 plist 文件中获取了一个数组。但是现在我的数组是自定义的 Holiday 对象，所以这不再起作用了：

```
NSLog(@"dictionary is %@", self.farSiman);

for (NSDictionary * dict in self.farSiman) {

    NSNumber * latitude = [dict objectForKey:@"latitude"];
    NSNumber * longitude = [dict objectForKey:@"longitude"];
    NSString * storeDescription = [dict objectForKey:@"name"];
    NSString * address = [dict objectForKey:@"address"];
    NSLog(@"logging location %@", storeDescription);
    CLLocationCoordinate2D coordinate;
    coordinate.latitude = latitude.doubleValue;
    coordinate.longitude = longitude.doubleValue;
    MyLocation *annotation = [[MyLocation alloc] initWithName:storeDescription address:address coordinate:coordinate];
    [_mapView addAnnotation:annotation];

} 
```

我的字典日志打印出这个：

```
dictionary is (
"<Holiday: 0x838bc80> (entity: Holiday; id: 0x838ca60 <x-coredata://E41B0CCD-2F03-4C4F-B054-18537096771C/Holiday/p1> ; data: <fault>)",
"<Holiday: 0x838e330> (entity: Holiday; id: 0x838ca70 <x-coredata://E41B0CCD-2F03-4C4F-B054-18537096771C/Holiday/p2> ; data: <fault>)" 
```

这意味着它是一系列假日对象。

由于我使用枚举而不是传统的，如何在我的 for 循环中获取每个对象`for i = 0; i<count; i++`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T03:16:19.037

看起来您正在使用带有 CoreData 的自定义对象，因此它将返回您的类的数组。

这是否有效：

```
for (Holiday *holiday in self.farSiman) {
    // your code here
    // [holiday foo]
} 
```

如果 CoreData 没有使用您的自定义对象，它将返回一个 NSManagedObject 数组，在这种情况下使用这个：

```
for (NSManagedObject *holiday in self.farSiman) {
    // your code here
    //[holiday valueForKey:@"foo"]
} 
```

# emacs - 根据次要模式更改光标颜色

> ID：14142495
> 
> 赞同：0
> 
> 时间：2013-01-03T16:00:41.430
> 
> 标签：emacs, mode

我写了一个次要模式，它定义了一些键绑定并进行了一些初始化。该模式正确设置了 Navi-mode 和 Navi-mode-map。

如何在启用导航模式时增强此次要模式以更改光标的颜色，并在禁用模式时将其更改回来？我可以使用 hook Navi-mode-hook 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T18:58:16.520

试试这个：

```
(define-minor-mode foo-mode "doodad" :lighter ""
  (if foo-mode
      (setq cursor-type 'bar)
    (setq cursor-type (default-value 'cursor-type)))) 
```

或者，如果您预计`cursor-type`已经有一个非默认值，您可以在启用模式时保存它，并在禁用时恢复保存的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T19:13:16.480

您可以完全控制次要模式（因为您编写了它），并且您可以将此行为直接嵌入到您的次要模式函数中，如 Dmitry 的回答中所述：

```
(define-minor-mode navi-mode
  "Navi mode does wonderful things"
  :lighter " Navi"
  :global t
  :init-value 0

  (if navi-mode
      (progn
        (setq old-cursor-color (cdr (assoc 'cursor-color (frame-parameters))))
        (set-cursor-color "red"))
    (set-cursor-color old-cursor-color))) 
```

或者你不控制次要模式定义，你将不得不使用一个钩子：

```
(defun navi-change-cursor-color ()
  (if navi-mode
      (progn
        (setq old-cursor-color (cdr (assoc 'cursor-color (frame-parameters))))
        (set-cursor-color "red"))
    (set-cursor-color old-cursor-color)))

(add-hook 'navi-mode-hook 'navi-change-cursor-color) 
```

# eclipse - 如何修复 Google Play Services 2 Library 安装到 Eclipse

> ID：14142496
> 
> 赞同：12
> 
> 时间：2013-01-03T16:00:40.857
> 
> 标签：eclipse, google-play-services

我已尝试遵循Eclipse for Mobile Developers (Juno) 中的[https://developer.android.com/google/play-services/setup.html](https://developer.android.com/google/play-services/setup.html)说明，但在将库项目导入后，库包出现多个错误我的工作区。我修复了它报告的 AndroidManifest.xml 错误，但现在我无法在 Eclipse 中打开项目，说 .project 描述文件包含无效信息。简单的安装就这么多。我已经尝试卸载它，重新下载它，但仍然出现多个错误。任何建议如何让它工作？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-18T16:07:41.003

[http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)的第 3 步有一个误导性的步骤：

> 将 /extras/google/google_play_services/libproject/google-play-services_lib 库项目复制到您维护 Android 应用项目的源代码树中。
> 
> 如果您使用的是 Eclipse，请将库项目导入您的工作区。单击 File > Import，选择 Android > Existing Android Code into Workspace，然后浏览到库项目的副本以将其导入。

不要做第一个副本。相反，只需执行第二部分并选中“将项目复制到工作区”框。我发现如果我做了第一部分，我最终会得到空的 xml 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T10:58:56.420

如果你的 google_pay_services/libproject 是空的（我的是空的）并且看起来像安装在 sdk manager 中，首先从 sdk manager 中删除 google play services，重新安装并按照第一个答案中的步骤操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T05:35:17.103

尝试以下操作：

```
https://developers.google.com/maps/documentation/android/intro#sample_code 
```

打开示例代码中提到的活动时，您会遇到错误。那是因为 android.support.v4.app.FragmentActivity 没有添加到您的构建路径中。将鼠标悬停在错误上，然后单击“修复项目设置”。它会要求您将 lib 添加到构建路径中。说是并享受:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-21T10:13:29.820

尝试*Window > Android SDK Manager > Extras > Google play service > Delete package*。

然后再次重新安装该软件包：

*File > Import，*选择 Android *> Existing Android Code into Workspace*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-03T19:55:42.400

我有同样的问题。我去了 Properties->Java Build Path 并单击了 Projects 选项卡。然后我使用添加按钮添加了 google-play-services_lib。这给了我这个运行时异常：

E/AndroidRuntime(9469): 引起: java.lang.ClassCastException: com.google.android.gms.maps.MapFragment 不能转换为 android.support.v4.app.Fragment

然后我从这个更改了 main.xml 文件条目：

```
 android:name="com.google.android.gms.maps.MapFragment" 
```

对此：

```
 android:name="com.google.android.gms.maps.SupportMapFragment" 
```

最后，它运行了，但由于授权失败，现在没有地图。所以我要进行另一次搜索。

感谢 Google 让它变得如此复杂并发布了不正确的说明！

# c# - DomainDataService (ViewModel) 通过字符串名称加载实体

> ID：14142504
> 
> 赞同：2
> 
> 时间：2013-01-03T16:01:02.477
> 
> 标签：c#, silverlight, entity-framework, reflection, mvvm

所以我试图动态加载我的域数据服务，其中表名是字符串......这是我到目前为止所得到的：通常我会像这样加载：

```
 theDomainDataService.Load(theDomainDataService.getUsersQuery()); 
```

所以我试图自动化哪个实体由字符串名称加载。

```
 String theVariableEntityName = "Users";
 Type t = theDomainDataService.GetType();
 MethodInfo stuff = t.GetMethod("Get" + theVariableEntityName + "Query");
 var theQuery = stuff.Invoke(theDomainDataService, null);
 theDomainDataService.Load((EntityQuery<MySite.Web.Models.User>)theQuery);
  ---------------------------------------------------------^ Problem 
```

这实际上是正确加载我的 domainDataService，但我需要的是一种动态方式来推断 EntityQuery 的类型（没有明确声明它将成为用户），因为实际上它可以是任何东西。

我已经从 DomainDataService 类尝试过这个，但没有成功，它没有找到方法的“Set”或“Entry”。

```
 public List<object> void PopulateEntity(string theEntityName)
    {
        Type theEntity = Type.GetType("MySiteMaintenance.Web.Models." + theEntityName);
        using (var db = new DatingEntities()) 
        {                        
              IQueryable query = db.Set(theEntity);
              foreach (var item in query) 
              {
                  var entry = db.Entry(item);
              }
        }
    } 
```

请记住，我只需要一个填充的实体（当我只有实体的名称时）填充客户端......所以我可以说

```
 DomainServiceClass theClass = new DomainServiceClass();
 theClass.Load(theClass.GetEntityNameQuery()); 
```

所以我可以引用适当加载的实体...... theClass.Entity（用户......问题等......）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T20:12:58.003

我仍然不确定我是否跟随，但是...

我的命名空间中有一个`Post`实体，我使用字符串中的实体类型名称`Sandbox`从我的`DbContext`实例中获取它以开头...

```
 // Get my entity type (if in same assembly, else you'll have to specify)
                Type postType = Type.GetType("Sandbox.Post");

                using (var db = new StackOverflowEntities()) {                        

                    // not required
                    db.Configuration.ProxyCreationEnabled = false;

                    IQueryable query = db.Set(postType);
                    foreach (var item in query) {

                        DbEntityEntry entry = db.Entry(item);

                    }
                } 
```

这会导致基于实体类型字符串检索任何 DbSet。在项目 foreach 循环中的断点下方 - 显示值。

![在此处输入图像描述](../Images/a414619b9e08eb69f53f5d32aa6c818e.png)

# mysql - MySQL 将字段名称转换为行中的值

> ID：14142506
> 
> 赞同：0
> 
> 时间：2013-01-03T16:01:12.977
> 
> 标签：mysql, sql, pivot, unpivot

我是旋转的新手，所以我来这里寻求一些建议。我有一个包含字段 benchmarkname 和 value 的表。但是，另一个表的填充方式不同并且超出了我的控制：它将每个基准名称作为表中自己的字段，行值是值。布局如下：

## 表格1

```
+-----------+-------------+------+-----+---------+-------+
| Field     | Type        | Null | Key | Default | Extra |
+-----------+-------------+------+-----+---------+-------+
| stream    | double      | YES  |     | NULL    |       |
| pisec     | double      | YES  |     | NULL    |       |
| iozws     | double      | YES  |     | NULL    |       |
| iozwb     | double      | YES  |     | NULL    |       |
| iozrs     | double      | YES  |     | NULL    |       |
| iozrb     | double      | YES  |     | NULL    |       | 
```

## 表 2

```
| BenchmarkName | varbinary(43) | YES  |     | NULL    |       |
| Value       | decimal(14,0) | YES  |     | NULL    |       | 
```

我的问题是：如何动态地将第一个表转换为第二个表？我相信答案在于一个支点，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:14:18.460

我想你想*取消*第一张表。UNPIVOTing 从列中获取数据并将其转换为行。MySQL 没有 unpivot，因此您必须使用`UNION ALL`查询：

```
select 'stream' BenchmarkName, stream value
from table1
union all
select 'pisec' BenchmarkName, pisec value
from table1
union all
select 'iozws' BenchmarkName, iozws value
from table1
union all
select 'iozwb' BenchmarkName, iozwb value
from table1
union all
select 'iozrs' BenchmarkName, iozrs value
from table1
union all
select 'iozrb' BenchmarkName, iozrb value
from table1 
```

# objective-c - cocos2d中如何用replaceScene方法传递参数？

> ID：14142508
> 
> 赞同：0
> 
> 时间：2013-01-03T16:01:16.530
> 
> 标签：objective-c, view, properties, cocos2d-iphone, scene

当我在 Cocoa Touch 中改变视图时，我使用这个：

```
GameViewController *game = [self.storyboard instantiateViewControllerWithIdentifier:@"GameViewController"];
game.something = someValue;
game.somethingOther = someOtherValue;

[self presentViewController:game animated:NO completion:^{}]; 
```

我之前如何传递这个值`replaceScene`？

我现在有这个：

```
[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[GameLayer scene] withColor:ccWHITE]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T21:57:29.710

好吧，这太容易了……

需要创建方法`+(CSScene *)sceneWithParameter:`和方法`-(id)initWithParameter:`。`ClassLayer *layer = [ClassLayer node]`并且在第一种方法中需要更改`ClassLayer *layer = [[ClassLayer alloc] initWithParameter:]`并且它可以工作。

# python - 如何阻止命令提示符在 python 中关闭？

> ID：14142509
> 
> 赞同：10
> 
> 时间：2013-01-03T16:01:21.997
> 
> 标签：python, python-3.x

我对python很陌生..我使用了代码

```
x = input(" Hey what is your name " )       
print(" Hey, " + x)  
input(" press close to exit ") 
```

因为我在互联网上寻找过这个问题并且知道你必须在最后放置一些虚拟输入行以阻止命令提示符关闭但我仍然面临问题..请帮助

我正在使用 python 3.3

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-03T16:05:12.010

在 Windows 上，关闭的是 CMD 控制台，因为最后存在 Python 进程。

为防止这种情况，请先打开控制台，然后使用命令行运行您的脚本。通过右键单击包含脚本的文件夹，选择`Open console here`并`python scriptname.py`在控制台中输入来执行此操作。

正如您所发现的，另一种方法是通过在末尾添加一个调用来*推迟*脚本结束。`input()`这允许脚本用户选择脚本何时结束和控制台关闭。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-08-05T04:56:37.957

这可以通过 os 模块来完成。以下是简单的代码：

```
import os
os.system("pause") 
```

这将产生暂停，并要求用户按任意键继续。

[编辑：上述方法适用于 windows 操作系统。mac 似乎有问题（正如 ihue 在评论中指出的那样）。问题是“os”库是特定于操作系统的，某些命令可能无法在一个操作系统上工作，就像它们在另一个操作系统上工作一样。]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-10-13T15:17:43.383

对于 Windows 环境：

如果你不想进入命令提示符（或者在命令提示符受限的环境中工作），我认为下面的解决方案是 goo 我使用的解决方案是创建一个 bat 文件。

使用记事本创建文本文件。在文件中，内容将类似于：

`my_python_program.py pause`

然后将文件保存为“my_python_program.bat” - 不要忘记选择“所有文件！

当您运行 bat 文件时，它将运行 python 程序并在最后暂停以允许您读取输出。然后，如果您按任意键，它将关闭窗口。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-02T17:12:25.387

只需在对我有用的程序末尾添加简单的输入

```
input() 
```

试一试，它会正常工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-25T14:41:37.243

尝试这个，

```
import sys

status='idlelib' in sys.modules

# Put this segment at the end of code
if status==False:
    input() 
```

这只会停止控制台窗口，而不是 IDLE。

# c# - 分层数据模板不起作用

> ID：14142510
> 
> 赞同：0
> 
> 时间：2013-01-03T16:01:24.290
> 
> 标签：c#, wpf, xaml, hierarchicaldatatemplate

我正在尝试使用 HierarchicalDataTemplate 递归地创建包含项目的扩展器，但是当我使用 HierarchicalDataTemplate 时，我只能显示第一级项目。

如果您需要任何信息，请告诉我。

下面是我手写时 xaml 的样子：

```
<GroupBox Header="SectionHeader">
    <StackPanel >
        <Expander VerticalAlignment="Top" Header="SubSectionHeader">
            <StackPanel>
                <Expander VerticalAlignment="Top" Header="SubSectionHeader" Margin="10,0,0,0">
                    <StackPanel>
                        etc......
                    </StackPanel>
                </Expander>
         </Expander>
    </StackPanel>
</GroupBox> 
```

这是我到目前为止所拥有的。

xml:

```
<ItemsControl Name="lstMain" ItemsSource="{Binding Sections}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <GroupBox Header="{Binding Section.SectionName}">
                <ItemsControl ItemsSource="{Binding SubSections}" ItemTemplate="{StaticResource BinderTemplate}" />
            </GroupBox>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl>

<HierarchicalDataTemplate x:Key="BinderTemplate" ItemsSource="{Binding Path=SubSections}" DataType="{x:Type local:SubSectionViewModel}">
    <StackPanel>
        <Expander Header="{Binding SubSection.SubSectionName}"/>
    </StackPanel>
</HierarchicalDataTemplate> 
```

数据类：

```
class TopViewModel
{
    ObservableCollection<SectionViewModel> _sections = new ObservableCollection<SectionViewModel>();

    public ObservableCollection<SectionViewModel> Sections
    {
        get
        {
            return _sections;
        }
        set
        {
            _sections = value;
        }
    }
}

public class SectionViewModel
{
    ObservableCollection<MaterialViewModel> _materials = new ObservableCollection<MaterialViewModel>();
    ObservableCollection<SubSectionViewModel> _subSections = new ObservableCollection<SubSectionViewModel>();
    Section _section;

    public Section Section
    {
        get
        {
            return _section;
        }
        set
        {
            _section = value;
        }
    }

    public string MaterialName
    {
        get { return Section.SectionName; }
        set { Section.SectionName = value; }
    }

    public ObservableCollection<MaterialViewModel> Materials
    {
        get
        {
            return _materials;
        }
        set
        {
            _materials = value;
        }
    }

    public ObservableCollection<SubSectionViewModel> SubSections
    {
        get
        {
            return _subSections;
        }
        set
        {
            _subSections = value;
        }
    }
}

public class SubSectionViewModel
{
    ObservableCollection<MaterialViewModel> _materials = new ObservableCollection<MaterialViewModel>();
    ObservableCollection<SubSectionViewModel> _subSections = new ObservableCollection<SubSectionViewModel>();
    SubSection _subSection;

    public ObservableCollection<MaterialViewModel> Materials
    {
        get
        {
            return _materials;
        }
        set
        {
            _materials = value;
        }
    }

    public ObservableCollection<SubSectionViewModel> SubSections
    {
        get
        {
            return _subSections;
        }
        set
        {
            _subSections = value;
        }
    }

    public SubSection SubSection
    {
        get
        {
            return _subSection;
        }
        set
        {
            _subSection = value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:49:44.433

您在您的`HierarchicalDataTemplate`- 如何呈现子元素中缺少一个关键位：

```
<HierarchicalDataTemplate x:Key="BinderTemplate" 
    ItemsSource="{Binding Path=SubSections}" 
    DataType="{x:Type local:SubSectionViewModel}">
    <StackPanel>
        <Expander Header="{Binding SubSection.SubSectionName}">
            <ItemsControl Margin="5,0,0,0" 
                      ItemsSource="{Binding SubSections}" 
                      ItemTemplate="{DynamicResource BinderTemplate}"/>
        </Expander>
    </StackPanel>
</HierarchicalDataTemplate> 
```

编辑：不要窃取@BDE 的风头，但他/她对使用的基本正确`DataType`- 但这是您“简化”上述 XAML 的方式：

```
<Window x:Class="WpfApplication1.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:local="clr-namespace:WpfApplication1" 
        Title="Window1" Height="300" Width="300">
    <Window.Resources>
         <!-- normal template for sections -->
         <DataTemplate DataType="{x:Type local:SectionViewModel}">
            <GroupBox Header="{Binding Section.SectionName}">
                <ItemsControl ItemsSource="{Binding SubSections}"/>
            </GroupBox>
         </DataTemplate>
         <!-- hierarchical template for subsections -->
         <HierarchicalDataTemplate 
              DataType="{x:Type local:SubSectionViewModel}">
           <StackPanel>
               <Expander Header="{Binding SubSection.SubSectionName}">
                   <ItemsControl Margin="5,0,0,0" 
                         ItemsSource="{Binding SubSections}"/>
               </Expander>
           </StackPanel>
        </HierarchicalDataTemplate>
    </Window.Resources>
    <Grid>
        <!-- 
           no need to specify ItemTemplate if WPF can suss out all the item types 
         -->
        <ItemsControl Name="lstMain" ItemsSource="{Binding Sections}"/>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:49:07.280

另一种方法是在您的数据模板`HierarchicalDataTemplate`中添加一个，并在那里绑定。`ItemsControl``Expander``ItemsSource`

此外，由于您`DataType`在数据模板定义中指定了 ，因此您不必直接`ItemTemplate`为您的 toplevel 设置键名`ItemsControl`。

如果你像这样修改你的 XAML，它可能会做你想做的事：

```
<DataTemplate DataType="{x:Type local:SubSectionViewModel}">
    <StackPanel>
        <Expander Header="{Binding SubSection.SubSectionName}">
            <ItemsControl ItemsSource="{Binding SubSections}"/>
        </Expander>
    </StackPanel>
</DataTemplate>

<ItemsControl Name="lstMain" ItemsSource="{Binding Sections}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <GroupBox Header="{Binding Section.SectionName}">
                <ItemsControl ItemsSource="{Binding SubSections}"/>
            </GroupBox>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:23:01.827

Section.SectionName 应为 MaterialName？

看线：

```
 <ItemsControl ItemsSource="{Binding SubSections}" ItemTemplate="{StaticResource BinderTemplate}" /> 
```

和

```
 <HierarchicalDataTemplate x:Key="BinderTemplate" ItemsSource="{Binding Path=SubSections}" DataType="{x:Type local:SubSectionViewModel}"> 
```

我认为，如果第一行绑定是子节，那么第二行而不是

```
 {Binding Path=SubSections} 
```

你可能会写

```
 {Binding} 
```

我在您的课程中找不到 SubSectionName。

请添加更多课程

# c# - TextBoxFor @Value（大写）而不是@value

> ID：14142511
> 
> 赞同：8
> 
> 时间：2013-01-03T16:01:24.520
> 
> 标签：c#, asp.net-mvc, keyword, html.textboxfor

**这只是为了好奇**

为什么此代码有效：

```
Html.TextBoxFor(x => x.Age, new { @Value = "0"}) 
```

这不会：

```
Html.TextBoxFor(x => x.Age, new { @value = "0"}) 
```

*注意大写的“V”`@Value`*

我知道`value`是一个关键字，但它也是`readonly`，而且它有效。没有必要使用`@Readonly`（带有大写“R”）。

有人有线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T17:03:53.483

[`InputExtensions.TextBoxFor`](http://aspnetwebstack.codeplex.com/sourcecontrol/latest#src/System.Web.Mvc/Html/InputExtensions.cs)特殊情况下有几个属性名称，其中`value`（区分大小写）。这与 C# 关键字无关。

特别是从`expression`参数获得的值优先于`value`您传递给`htmlAttributes`参数的属性。

看看你的例子：

*   如果您使用`Html.TextBoxFor(x => x.Age, new { @value = "0"})`它，它将编译，但将使用值评估为的属性`TextBoxFor`覆盖该属性。`value``x.Age`

*   如果你使用`Html.TextBoxFor(x => x.Age, new { @Value = "0"})`它会编译，你会在属性字典中得到两个条目，一个`Value`是那个`"0"`，一个`value`是那个`x.Age`。

    我希望输出像`<input Value="0" value="..." type="text"/>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T16:21:56.883

我不是 100% 确定，但是，这可能`value`是属性中的关键字，`readonly`不是。查看[MSDN 中的属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)。

![在此处输入图像描述](../Images/4fa9dd1607898977266bdeabf5805960.png)

![在此处输入图像描述](../Images/4ef044c385f9bc50b1277e41e3ef6e3f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T12:54:36.443

我的猜测是 MVC 代码是硬编码的，`Value`因为 MS 工程师希望您始终使用 PascalCase 属性名称，因为这是他们的典型约定，并且 PascalCase 避免与非上下文关键字（例如`class`. 请注意 PascalCase 属性如何在 HTML 中呈现为小写。

原因不`value`在于成为关键字，因为它是 C# 中的*上下文*关键字，并且仅在属性获取器和设置器中具有特殊含义（因此在 IDE 中变为蓝色）。它在传递给的匿名类型中没有特殊含义`TextBoxFor`。

# php - htaccess 301 仅重定向根目录

> ID：14142512
> 
> 赞同：0
> 
> 时间：2013-01-03T16:01:26.350
> 
> 标签：php, apache, .htaccess, redirect

我在一个名为患者的文件夹中有一个站点

网址如下所示：

[http://site.com/patients/post-name](http://site.com/patients/post-name)

我想重定向

site.com/patients/post-name → newsite.com/post-name

和

site.com/patients/ → newsite.com/

我已经尝试过了，但 site.com/patients 仍然指向 newsitesite.com/patients

```
Redirect 301 ^/patients/$ http://www.newsite.com/
Redirect 301 / http://newsite.com/ 
```

htaccess 是否有某种正则表达式来匹配 /patients/ 的根，**然后**是**/patients/whatever-comes-next 的另一个**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:39:40.870

```
REDIRECT 301 /patients http://newsite.com 
```

那样有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:03:16.397

一般来说，“301”POST错误有两种解决方案：

1) 始终在您的“POST” URL 中添加尾部反斜杠（首选）

2) 在您的 httpd.conf 文件中为“POST” URL 创建一个“别名”：

在您的情况下，您需要重定向有*两个*目的。查看此链接（作为题外话关闭，但仍然有用）：

*   [使用 httpd.conf 将 www 301 重定向到非 www 的语法](https://stackoverflow.com/questions/9322454/syntax-for-301-redirect-of-www-to-non-www-using-httpd-conf)

# javascript - 如何使用javascript更改黑白gif中的颜色

> ID：14142519
> 
> 赞同：-1
> 
> 时间：2013-01-03T16:01:42.647
> 
> 标签：javascript, colors, replace

我有一个来自远程站点的黑白 gif，它每天都通过脚本进行更改。我想用红色替换图像的黑色部分。你知道如何在javascript中做到这一点吗？（没有 PHP 或 PNG 透明技巧）

本教程中的杯子示例几乎可以工作，但我只想在我的服务器上自动将黑色替换为红色。也许有一个简单的调整？

[如何使用jquery更改图像的颜色](https://stackoverflow.com/questions/9303757/how-to-change-color-of-an-image-using-jquery)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:13:00.297

两件事情：

1.  您应该询问原始 gif 的作者是否允许您修改它（出于版权原因）
2.  你不应该在客户端这样做。为了在服务器端做这件事，你应该使用 php、nodejs canvas、imagemagic 或其他任何东西。

# php - PHP，在不打开浏览器窗口的情况下运行代码

> ID：14142524
> 
> 赞同：0
> 
> 时间：2013-01-03T16:02:08.253
> 
> 标签：php, background

如果我有一个元素列表，并且用户通过 javascript 以另一个顺序移动元素，我可以在每次移动后启动一个 php 代码（如 php 页面）但不必在浏览器中调用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:32:52.483

对上述答案的补充 - 为了后代，以防有人必须在某天调试您的代码:) 我使用以下函数调用来获取该对象：（我相信它使 JS 更具可读性和可移植性）。您可以检查返回值，如果为 null，则提醒用户浏览器不支持 AJAX。

```
function getXmlHttpObject () {
    var xmlHttpObject = null;
    try {
        xmlHttpObject = new XMLHttpRequest();
    } catch (ex) {
        try {
            xmlHttpObject = new ActiveXObject('Msxml2.XMLHTTP');
        } catch (ex) {
            xmlHttpObject = new ActiveXObject('Microsoft.XMLHTTP');
        }
    }
    return xmlHttpObject;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:13:17.523

为 URL 创建一个 XmlHttpObject，发送（）它，检查结果以查看调用是否成功，并丢弃 responseText。例如，假设您在变量 testUrl 中有新订单，例如“http://domain.com/script.php?order=1,4,3,2”

```
var xmlHttpObject = new XMLHttpRequest();
xmlHttpObject.open("GET", testUrl, false);
xmlHttpObject.send();
var xmlText = xmlHttpObject.responseText;

if (xmlText == 'Success')
    // do nothing
else
    alert (xmlText); 
```

# postgresql - 在 postgresql 8.3 中工作的 plpgsql 代码在 9.2 中失败

> ID：14142531
> 
> 赞同：0
> 
> 时间：2013-01-03T16:02:26.010
> 
> 标签：postgresql, quotes, plpgsql

我有一个数组参数进入 plpgsql 函数的问题。我的代码在 PostgreSQL 8.3 中工作，但在 9.2.1 服务器上调用时失败。

我写了一个显示问题的虚拟函数。这是基于我编写的一些第一个 plpgsql 代码。我知道它很难看，所以如果无法以适用于两个服务器版本的方式转义我的引号，我愿意接受有关重写此代码的建议，以便它适用于两个服务器版本。实际上，无论如何我都愿意接受建议。我不太擅长 plpgsql

所以这是演示问题的虚拟代码：

```
CREATE OR REPLACE FUNCTION get_test(collection text[])  
  RETURNS text AS  
$BODY$   
DECLARE   
counter int8; directive text; condition text; querytype text;   
BEGIN   
    counter = array_lower(collection, 1);   
    WHILE (counter <= array_upper(collection, 1)) LOOP   
        SELECT INTO directive  "?column?"[counter] FROM (SELECT collection) AS foo ;   
        counter = counter + 1;   
        SELECT INTO condition  "?column?"[counter] FROM (SELECT collection) AS foo ;   
        counter = counter + 1;   
        SELECT into querytype  "?column?"[counter] FROM (SELECT collection) AS foo ;   
        counter = counter + 1;   
    END LOOP;   
    RETURN 'dummy';   
END;   
$BODY$  
  LANGUAGE plpgsql VOLATILE  
  COST 100;  
ALTER FUNCTION get_test(text[]) OWNER TO postgres; 
```

集合参数以三个为一组（一个简单字符串、一个 SQL 条件和另一个字符串）构建。这是一个在 8.3 中有效但在 9.2 中失败的示例调用：

```
select * from get_test('{"dynamic","(tr.PROJECT_NAME = \'SampleProject\')","1"}') 
```

这在 8.3 上返回了“虚拟”，但在 9.2 上失败了：错误：“SampleProject”处或附近的语法错误插入符号指向 SampleProject 的 S，就在单引号之后，所以我知道我没有转义嵌入式 SQL 中的单引号正确。

我试过这个没有单引号前面的反斜杠，有两个反斜杠，最后有两个单引号，都无济于事。原始代码由 Java 客户端调用，但我一直在 pgadmin3（1.16 版）下进行测试，连接到相关版本的两台服务器，尝试不同的事情。

关于如何使这个电话起作用的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:46:52.557

最可能的原因是[**`standard_conforming_strings`**](http://www.postgresql.org/docs/current/interactive/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS).
试试这个电话：

在单引号字符串文字中转义单引号的 SQL 标准方法（并在 PostgreSQL 中推荐）是将它们加倍：

```
SELECT *
FROM get_test('{dynamic,(tr.PROJECT_NAME = ''SampleProject''),1}'::text[]) 
```

或者：

```
SELECT *
FROM get_test('{dynamic,"(tr.PROJECT_NAME = ''SampleProject'')",1}'::text[]) 
```

或者您可以使用美元报价来避免多层转义引号

```
SELECT *
FROM get_test($${dynamic,"(tr.PROJECT_NAME = 'SampleProject')",1}$$::text[]) 
```

甚至是一个 ARRAY 构造函数：

```
SELECT *
FROM get_test(ARRAY['dynamic','(tr.PROJECT_NAME = ''SampleProject'')','1']) 
```

# jquery - jQuery Fullcalendar - 在周视图中，用颜色标记所有天，如果事件 allDay 为真

> ID：14142532
> 
> 赞同：1
> 
> 时间：2013-01-03T16:02:27.880
> 
> 标签：jquery, fullcalendar

在周议程视图中，如果有任何事件，则`allDay:true`用不同的背景（如当天）垂直标记此事件的日期（从开始日期到结束日期）。

我正在考虑从`All day`单元格中克隆元素，如果有的话，并且在更改高度、背景颜色等之后。但我认为这是个坏主意。

也许您可以提出更好的建议？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:19:27.380

您可以尝试使用[eventRender](http://arshaw.com/fullcalendar/docs/event_rendering/eventRender/)来获取与事件关联的日期并适当地着色（fc-col0、fc-col1 ... 是要关闭的类）

```
eventRender: function (event, element, view) {
    if (view.name == 'agendaWeek' && event.allDay) {
        $('.fc-col' + event.start.getDay()).not('.fc-widget-header').css('background-color', 'blue');
    }
} 
```

如果您的全天活动可以跨越多天，您也需要考虑到这一点。

见[jsFiddle](http://jsfiddle.net/mEwsK/)

# python - django模板循环一些表行只显示一次

> ID：14142534
> 
> 赞同：1
> 
> 时间：2013-01-03T16:02:52.530
> 
> 标签：python, django, django-templates, django-template-filters

模型：

```
class Subject (models.Model):
    name = models.CharField(max_length=50)
    day = models.CharField(max_length=50) 
```

在我的 sql 表中，我有 50 多个用户，每个人都分配了一周中的一天（即 user1 -> MON，user2 -> MON，user3 -> WED ...）

在下面的模板中，我想显示包含日期和主题名称的表格，但我只想将**日期名称显示一次**作为用户组的负责人。

```
<table>
<tr class="head"><th>SUBJECTS</th></tr>

{% for field in subjects_all %}
    {% if forloop.first %}
    <tr class="head"><td colspan=5 align="center">MONDAY</td></tr>
    {% endif %}

    {% if field.day == "MON"  %}
    <tr><td>{{ field.name }}</td></tr>
    {% endif %}

    {% if ... } # <- ???
    <tr class="head"><td colspan=5 align="center">TUESDAY</td></tr>
    {% endif %}

    {% if field.day == "TUE"  %}

    <tr><td>{{ field.name }}</td></tr>

    {% endif %}

    (...)

{% endfor %}

</table> 
```

在下面的示例中，我知道我只能使用 forloop.first 显示星期一一次，但我如何才能在一组用户的顶部**只显示一次剩余的日子？**如果我执行正常的 'if' ，则 TUESDAY 将显示在数据库中找到的每个用户之上，这不是我想要的。

**编辑：** 我想避免在一周内每天复制整个 for 循环 7 次

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:24:48.960

您可能需要[`ifchanged`](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#ifchanged)模板标签。

或者，您可以使用[`regroup`](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#regroup)将项目分组为天。

# c# - 当前上下文中不存在名称“myClassInstance”

> ID：14142535
> 
> 赞同：-1
> 
> 时间：2013-01-03T16:03:00.453
> 
> 标签：c#, dll, compiler-errors, include

环境：c#.net VS 2010

解决方案有以下两个项目：

*   我添加了几个经过测试的方法的 dll。

*   一个测试项目

测试项目中唯一的东西是带有以下代码的表单：（为便于阅读而更改了名称）

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;
using DLL_PROJECT; //Yes I remembered to include the dll project

namespace DLL_PROJECT_Test
{
public partial class frmTest : Form
{
    private Class_1 myClass_1; //this comes from the dll - no errors here
    private Class_2 myClass_2 = new Class_2(); // no errors here either

    public frmTest()
    {
        InitializeComponent();
        //TransparencyKey = BackColor;
        this.SetStyle(System.Windows.Forms.ControlStyles.SupportsTransparentBackColor, true);
        this.BackColor = System.Drawing.Color.FromArgb(0, System.Drawing.Color.Black);
        myDebouncer = new Debouncer(this);
        this.SetDragging(true); //THIS EXTENSION COMES FROM THE DLL AND WORKS FINE
        this.RoundCorners(40, 80); //AS DOES THIS ONE
        myClass_2 = new Class_2();
        myClass_2.HoldStartEvent += new Class_2EventHandler(myClass_2_HoldStartEvent);
        myClass_2.DragStartEvent += new Class_2EventHandler(myClass_2_DragStartEvent);
    }

    private void myClass_2_DragStartEvent(Class_2 sender)
    {
        myClass_2("DragStart") += 1; //THE ONLY ERROR IS HERE AS FOLLOWS
//ERROR: "The name 'myClass_2' does not exist in the current context"
//     - Yes, the DLL is included
//     - Yes, the project is .Net 4 (not client profile)
//     - Yes xxx WRONG xxx, this exact syntax has been tested before on an instance of
//       this class, it's just a default parameter.
// xxx should be [] instead of () for the indexer in c#.  #VB_Fails
    }

    void myClass_2_HoldStartEvent(Class_2 sender)
    {
        this.Close();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:08:23.717

这段代码：

```
myClass_2("DragStart") += 1; 
```

... 就`myClass_2`好像它是方法的名称*或*委托实例的名称一样使用。

你真的是想使用索引器吗？那将是：

```
myClass_2["DragStart"] += 1; 
```

这里是什么`"DragStart"`意思？它实际上是一个属性名称吗？也许你想要：

```
myClass_2.DragStart += 1; 
```

我非常怀疑“这种确切的语法之前已经在此类的实例上进行过测试”。

诚然，在这种情况下，错误消息没有多大意义。我认为*实际上*更有可能您的真实代码中有错字 - 因为您更改了名称，所以这里没有传播错字。如果您可以在一个简短但*完整*的程序中重现这一点，它将使生活变得更加简单。

# c++ - 在单独的命名空间中定义基类和派生类时的编译错误

> ID：14142539
> 
> 赞同：0
> 
> 时间：2013-01-03T16:03:11.060
> 
> 标签：c++

我已经在单独的命名空间中定义了基类和派生类（这是一个要求，因为可以从单个基类派生多个类，并且根据派生类的行为，它们将被放置在单独的命名空间中。）

```
Base.h

namespace global
{

    {
    class Base
    {
    public:
        Base();
        virtual ~Base();    

        virtual int someFunc(int arg1);
    }
}

Derived.h

namespace global
{
    namespace derived
    {

    class Derived: public Base()
    {
    public:
        Derived();
        ~Derived();
    }   
    }
}

Derived.cpp

namespace global
{
    namespace derived
    {
    Derived::Derived() {}
    Derived::~Derived() {}

    int Derived::someFunc(int arg1)
    {
    //some code here
    }
    }
} 
```

当我尝试编译此代码时，出现错误：

**没有在 global::derived::Derived 类中声明的 'int global::derived::Derived::someFunc(int arg1)' 成员函数。**

那么，我需要在 Derived 中再次声明 someFunc 吗？

像：

```
namespace global
{
    namespace derived
    {

    class Derived: public Base()
    {
    public:
        Derived();
        ~Derived();
        int someFunc(arg1 int);
    }   
    }
} 
```

现在，如果在一个完全独立的命名空间中有一些 Function 接受基类引用，我该如何传递它的派生类引用？

```
tryFunc(Base &b);

Derived d;
tryFunc(d); 
```

它是否正确？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:15:01.293

你基本上已经弄清楚了一切，你必须`someFunc`在派生类的类体中声明。

传递给的方式`tryFunc(Base &b)`也是正确的

# java - 如何使用 play framework 2 重新定义模块 SecureSocial 2 中的密码插件

> ID：14142541
> 
> 赞同：0
> 
> 时间：2013-01-03T16:03:13.437
> 
> 标签：java, playframework, playframework-2.0, securesocial

我正在尝试在 java 中重新定义用于 play 2 的 securesocial 插件的密码验证器和密码散列器，因为我的身份验证过程不起作用..（实际上一切似乎都是正确的，因为我无法使用哈希密码存储在我的数据库中）

我已经将 passwordValidator 扩展为文档解释它（http://securesocial.ws/guide/password-plugins.html）

公共类 BCryptPasswordHasher 扩展 BasePasswordHasher{

```
public PasswordInfo doHash(String plainPassword){
    PasswordInfo pI = new PasswordInfo();
    pI.password = BCrypt.hashpw(plainPassword, BCrypt.gensalt());
    return pI;
}

public boolean doMatch(PasswordInfo passwordInfo, String suppliedPassword){
    return BCrypt.checkpw(suppliedPassword, passwordInfo.password);
} 
```

}

我收到此错误：

tools.BCryptPasswordHasher 不是抽象的，不会覆盖 securesocial.core.java.BasePasswordHasher 中的抽象方法 doMatch(securesocial.core.java.PasswordInfo,java.lang.String)

你知道我怎么能做到这一点吗？

预先感谢您的帮助

PS：BasePasswordHasher

公共抽象类 BasePasswordHasher 实现 PasswordHasher { protected Application application;

```
public BasePasswordHasher(Application application) {
    this.application = application;
}

@Override
public securesocial.core.PasswordInfo hash(String plainPassword) {
     return doHash(plainPassword).toScala();
}

@Override
public boolean matches(securesocial.core.PasswordInfo passwordInfo, String suppliedPassword) {
    return doMatch(PasswordInfo.fromScala(passwordInfo), suppliedPassword);
}

/**
 * Hashes a password
 *
 * @param plainPassword the password to hash
 * @return a PasswordInfo containting the hashed password and optional salt
 */
abstract PasswordInfo doHash(String plainPassword);

/**
 * Checks whether a supplied password matches the hashed one
 *
 * @param passwordInfo the password retrieved from the backing store (by means of UserService)
 * @param suppliedPassword the password supplied by the user trying to log in
 * @return true if the password matches, false otherwise.
 */
abstract boolean doMatch(PasswordInfo passwordInfo, String suppliedPassword); 
```

}

# sql - 使用 case 语句更新字段

> ID：14142543
> 
> 赞同：2
> 
> 时间：2013-01-03T16:03:18.980
> 
> 标签：sql, case

对于以下查询结果中的以下人物，UniqueIDSuffix 值应使用前导 0 填充，字符长度 = 6。UniqueIDSuffix 修改后，UniqueID 值应通过 UniqueIDPrefix + UniqueIDSuffix = UniqueID 更新为字符长度 = 9

```
select * from cph..cppat (nolock) where 
UniqueIDPrefix is not null and 
UniqueIDPrefix <> 'VIS' and len(UniqueIDSuffix) < 6 
```

按 UniqueIDPrefix asc 排序

我的声明是：

```
SET UniqueIDsuffix  =
        (CASE
           WHEN UniqueIDsuffix = 3 THEN '000' + UniqueIDsuffix  ELSE
           When UniqueIDsuffix = 4 THEN '00' + UniqueIDsuffix ELSE
           WHEN UniqueIDsuffix = 5 Then '0' + UniqueIDsuffix ELSE
           WHEN UniqueIDsuffix = 6 THEN UniqueIDsuffix ELSE
           )
where UniqueIDPrefix is not null and UniqueIDPrefix <> 'VIS' 
and len(UniqueIDSuffix) < 6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:12:18.313

您缺少更新语句。. . 你有无关的`else`陈述。. . 并且您缺少`len()`比较中的功能：

```
update cph..cppat
    SET UniqueIDsuffix  =
            (CASE WHEN len(UniqueIDsuffix) = 3 THEN '000' + UniqueIDsuffix 
                  When len(UniqueIDsuffix) = 4 THEN '00' + UniqueIDsuffix 
                  WHEN len(UniqueIDsuffix) = 5 Then '0' + UniqueIDsuffix 
                  WHEN len(UniqueIDsuffix) = 6 THEN UniqueIDsuffix 
            )
    where UniqueIDPrefix is not null and UniqueIDPrefix <> 'VIS' and len(UniqueIDSuffix) < 6 
```

顺便说一句，您可以更简单地表示为：

```
update cph..cppat
    SET UniqueIDsuffix  = right('0000000'+UniqueIDSuffix, 6)
    where UniqueIDPrefix is not null and UniqueIDPrefix <> 'VIS' and len(UniqueIDSuffix) < 6 
```

# php - Mysql数据查询不起作用

> ID：14142544
> 
> 赞同：0
> 
> 时间：2013-01-03T16:03:21.990
> 
> 标签：php, mysql, date

我正在尝试选择团队和用户名，但仅显示从今天开始的团队。团队列在 accumulatorbet 列中。Win 也是一个 accumulatorbet 列。

这是代码：

```
 $result = mysql_query("SELECT teams, members.username 
              FROM accumulatorbet 
              LEFT JOIN members ON accumulatorbet.userid = members.id
              WHERE win = 'yes' AND DATE('tu') = DATE(NOW()) "); 
```

我正在与“成员”一起寻找拥有特定团队的用户名。

当应该返回一行时，此查询未显示任何行。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:06:33.390

尝试这个：

```
SELECT teams, m.username 
FROM accumulatorbet a
LEFT JOIN members m ON a.userid = m.id
WHERE win = 'yes' AND DATE(tu) = CURRENT_DATE(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:17:52.030

你正在制作`left join`，所以它只会显示第一个表中的团队，因为你的`WHERE`条款不能是真的。

相反，您的`where`条款可以是这样的

```
 WHERE win = 'yes' AND DATE(tu) = DATE(NOW()) "); 
```

# email - Graph API 将电子邮件部分返回为 null

> ID：14142546
> 
> 赞同：1
> 
> 时间：2013-01-03T16:03:27.770
> 
> 标签：email, facebook-graph-api

我们正在开发一个通过 Graph API 检索用户数据的 Facebook 应用程序。我们遇到了一种奇怪的情况，用户的电子邮件有时（大约 25%）由 Facebook 以空值或空值的形式发送。我们假设使用电话号码进行日志记录会导致此问题。但是，无论如何，每个用户都必须有一个电子邮件地址，不是吗？

对于任何提示或想法，我们感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T18:53:05.400

这是一个已知的 Facebook 错误。有关更多信息，请参阅[此](https://developers.facebook.com/bugs/298946933534016/)错误报告和[其他](https://developers.facebook.com/bugs/429653750464521/)错误报告。

# ios - 来自 App Delegate 的启动任务并避免竞争条件的策略

> ID：14142547
> 
> 赞同：2
> 
> 时间：2013-01-03T16:03:28.373
> 
> 标签：ios, core-data, race-condition, uimanageddocument

我正在基于核心数据开发一个小型应用程序。在启动时，我需要启动一项维护任务——快速但重要——。要运行此任务，应用程序委托必须打开一个 UIManagedDocument，并对其执行各种检查。在检查完成之前，应用程序视图不得启动。因为打开 UIMD 是异步的，所以当第一个 UIview 尝试访问文档时，应用程序委托不会完成。然后应用程序由于竞争条件而崩溃，因为应用程序委托和视图试图同时打开文档，而文档状态尚未最终确定。

我正在使用情节提要，因此 segues 几乎可以控制操作系统...下次，我将手动完成所有操作..

你有什么建议？注意：1）我不能在应用程序时执行任务。进入后台状态，因为如果再次恢复，避免底层数据库和视图中显示的状态不一致会非常乏味。2）出于同样的原因，在正常执行期间执行维护任务并不容易。3) 所有视图都通过单例访问 UIMD，根据[这里提出的代码](http://adevelopingstory.com/blog/2012/03/core-data-with-a-single-shared-uimanageddocument.html)

在 UIView 中设置互斥锁不是我的首选路线，因为屏幕保持黑色 - 没有数据 - 在显示选项卡栏时，直到它被应用程序委托释放。

有没有办法让应用程序委托在将控制权交给 UIViews 之前等待信号？在这种情况下，有什么陷阱吗？我怀疑这可能不是推荐的方法，如果代理等待维护任务完成的时间过长，iOS 可能会终止应用程序。在这种情况下，什么是“太长”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:26:17.550

你可以用更优雅的方式来做。用户将看到的第一个视图必须是某种 SplashView - 只是带有进度指示器的图像。在您的任务进行时，它应该保持在最前面。如何显示此视图并不重要。您可以将其设置为故事板中的第一个，或者只是在`applicationDidFinishLaunching`消息中手动创建它。然后在您的任务即将完成时发送一个 NSNotification 并在您的 AppDelegate 中的观察者中隐藏您的 SplashView 并向您的第一个视图展示有价值的内容。您甚至可以为这些视图之间的过渡添加一些视觉效果，您的应用看起来会非常棒！:)

# javascript - Chrome v23 不支持视口比例或视口元标记？

> ID：14142548
> 
> 赞同：7
> 
> 时间：2013-01-03T16:03:34.377
> 
> 标签：javascript, html, google-chrome, css, viewport

我制作了一个 HTML5 Web 应用程序，我希望它在 PC（不是移动设备）上按窗口大小自动缩放。所以我将它添加到 css 中：

```
@-ms-viewport { width: 1024px; }
@-webkit-viewport { width: 1024px; }
@-moz-viewport { width: 1024px; }
@-o-viewport { width: 1024px; }
@viewport { width: 1024px; } 
```

在IE10（Win8）中，可以，如果窗口变小，html中的所有内容都会变小。html 已按比例缩小。

但是在 Chrome v23 中，如果将窗口调整为更小，则 html 中的所有内容都不会缩放。Chrome v23 不支持视口缩放？

![在此处输入图像描述](../Images/7295c5ee156050c3855875a17f3ce335.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T18:08:38.107

不，[`@viewport`尚未在 Chrome 中实现](https://bugs.webkit.org/show_bug.cgi?id=95959)。据我所知，`viewport`元标记只在移动浏览器中实现过，而不是桌面浏览器。

# c++ - 通用树中的递归

> ID：14142550
> 
> 赞同：-2
> 
> 时间：2013-01-03T16:03:39.220
> 
> 标签：c++, visual-c++, data-structures, recursion, tree

我创建了一个基于具有 2 个指针的 N​​ode 类的通用树： next 指向节点的第一个 son ， bros 指向节点的下一个兄弟。每个节点都有一个容量（int），每个叶子都被认为是一个需求单位，目标是说树是否支持需求（意味着树的每个分支都有足够的容量来满足所有需求）。

树构建部分工作得很好，但似乎我的供应商和递归函数中缺少一个错误。一般解释： isSupplier(node) - 检查节点是否有足够的容量来支持其分支下的所有叶子。canDemandBeAnswered(node) - 递归函数，应该为所有从叶子向上开始的节点调用 isSupplier。

问题是，在递归遇到第一个叶子之后，它会卡在一个未知节点上（高度为 1，儿子为零，这是不可能的，因为如果节点是叶子，则不会调用递归！）

希望有人能找到我错过的东西，谢谢！

```
 // This method checks if this node can supply all of its leafs.

    bool isSupplier()
    {
        if ( this->isLeaf() ) { return 1;}
        else 
        {
            this->num_of_leafs = this->Count_Leafs();
            Node* iter = this->next;
            while ( (iter != NULL) )
            {
                if ( iter->isLeaf() == 0 ) 
                { this->num_of_leafs += iter->num_of_leafs; }
                iter = iter->bros;
            }
        }
        if (this->capacity < this->num_of_leafs) { return 0; }
        else { return 1; }
    }

     bool canDemandBeAnswered(Node* root)
    {
        cout << "Height: " << root->getHeight() << " , sons: " << root->Count_Sons() << " ,bros: " << root->getNumBros() << " ,leafs: " << root->getNumLeafs() << " \n";
        if ( root->isLeaf() ) { return 1; }
        Node* iter = root->next;
        while ( iter != NULL )
        {
            canDemandBeAnswered(iter);
            iter->getNextBro();
        }
        return root->isSupplier();
    }; 
```

树的创建和递归调用：

```
 Node* s8 = new Node(8);
Node* s5 = new Node(5);
Node* s6 = new Node(6);
for(int i=0; i < 2 ; i++){
    s6->addChild(new Node());      
}

Node* s7 = new Node(7);
Node* s2 = new Node(2);
for(int i=0; i < 3 ; i++){
    s2->addChild(new Node());
}

Node* s3 = new Node(3);
Node* s2_2 = new Node(2);  
s2_2->addChild(new Node());

Node* s4 = new Node(4);
 for(int i=0; i < 5 ; i++){
    s4->addChild(new Node());
}

Node* s1 = new Node(1);
 for(int i=0; i < 2 ; i++){
    s1->addChild(new Node());      
}
Node* s2_3 = new Node(2);
 for(int i=0; i < 4 ; i++){
    s2_3->addChild(new Node());
}
Node* s2_4 = new Node(2);  
for(int i=0; i < 3 ; i++){
    s2_4->addChild(new Node());
}
s8->addChild(s5);
s8->addChild(s6);    
s5->addChild(s7);
s5->addChild(s2);
s6->addChild(s3);
s6->addChild(s2_2);
s7->addChild(s4);
s7->addChild(s1);
s3->addChild(s2_3);
s3->addChild(s2_4);
cout << "s8 height: " << s8->getHeight() << " , sons: " << s8->Count_Sons() << " , bros: " << s8->getNumBros() << " , num of leaf: " << s8->getNumLeafs() << " \n";
cout << "s5 height: " << s5->getHeight() << " , sons: " << s5->Count_Sons() << " , bros: " << s5->getNumBros() << " , num of leaf: " << s5->getNumLeafs() << " \n";
cout << "s6 height: " << s6->getHeight() << " , sons: " << s6->Count_Sons() << " , bros: " << s6->getNumBros() << " , num of leaf: " << s6->getNumLeafs() << " \n";
cout << "s7 height: " << s7->getHeight() << " , sons: " << s7->Count_Sons() << " , bros: " << s7->getNumBros() << " , num of leaf: " << s7->getNumLeafs() << " \n";
cout << "s2 height: " << s2->getHeight() << " , sons: " << s2->Count_Sons() << " , bros: " << s2->getNumBros() << " , num of leaf: " << s2->getNumLeafs() << " \n";
cout << "s3 height: " << s3->getHeight() << " , sons: " << s3->Count_Sons() << " , bros: " << s3->getNumBros() << " , num of leaf: " << s3->getNumLeafs() << " \n";
cout << "s2_2 height: " << s2_2->getHeight() << " , sons: " << s2_2->Count_Sons() << " , bros: " << s2_2->getNumBros() << " , num of leaf: " << s2_2->getNumLeafs() << " \n";
cout << "s4 height: " << s4->getHeight() << " , sons: " << s4->Count_Sons() << " , bros: " << s4->getNumBros() << " , num of leaf: " << s4->getNumLeafs() << " \n";
cout << "s1 height: " << s1->getHeight() << " , sons: " << s1->Count_Sons() << " , bros: " << s1->getNumBros() << " , num of leaf: " << s1->getNumLeafs() << " \n";
cout << "s2_3 height: " << s2_3->getHeight() << " , sons: " << s2_3->Count_Sons() << " , bros: " << s2_3->getNumBros() << " , num of leaf: " << s2_3->getNumLeafs() << " \n";
cout << "s2_4 height: " << s2_4->getHeight() << " , sons: " << s2_4->Count_Sons() << " , bros: " << s2_4->getNumBros() << " , num of leaf: " << s2_4->getNumLeafs() << " \n";
bool ans = hw4->canDemandBeAnswered(s8); 
```

和大结局，我的调试输出： ![在此处输入图像描述](../Images/8b5752be5ad2ab7049232b36e693849b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:44:22.320

你的循环

```
while (iter != NULL)
{
    canDemandBeAnswered(iter);
    iter->getNextBro();
} 
```

不做任何事情，因为您从不修改`iter`.

我怀疑你是想说

```
iter = iter->getNextBro(); 
```

您还忽略了递归调用的返回值，这可能不是您想要的，但并不完全清楚它应该做什么。

# coldfusion - cfhttp 和 cfhttpparam 的行为非常奇怪

> ID：14142551
> 
> 赞同：3
> 
> 时间：2013-01-03T16:03:40.203
> 
> 标签：coldfusion, solr, cfhttp, bluedragon

新年快乐，

新年发现我正在努力解决编码问题。我正在使用 ColdFusion 和 CFML 引擎“openBD”。我有一个 CFC 来处理我使用的搜索引擎（SOLR 搜索引擎）的请求。我正在用一些论据“喂养”该 CFC。CFC 应有的表现。但是当我尝试传递特定参数（#apofasi_taxonomy #）时，CFC 不会返回任何内容（如果我将上述参数直接传递给搜索引擎——不使用 CFC——我可以看到返回/搜索结果）

**CFC 的一部分：**

```
 <cffunction name="searchP" access="remote" returnFormat="json">         
      <cfargument name="q" type="string" default="" required="yes"> 
      <cfargument name="apofasi_taxonomy" type="string" default="apofasi_taxonomy:(*)" required="yes">
      <cfargument name="apofasi_tmima" type="string" default="apofasi_tmima:(*)" required="yes">
      <cfargument name="apofasi_date" type="string" default="apofasi_date:(*)" required="yes">  
      <cfargument name="apofasi_number" type="string" default="apofasi_number:(*)" required="yes"> 
      <!---<cfargument name="apofasi_taxonomy" type="string" default="*">
      <cfargument name="apofasi_tmima" type="string" default="*">
      <cfargument name="apofasi_date" type="string" default="*">  
      <cfargument name="apofasi_number" type="string" default="*">--->

      <cfset theUrl = 'http://localhost/solr/areios_pagos/select/?'>

      <cfhttp method="get" url="#theUrl#" port="8090" result="rs" username="abcd" password="********">
        <cfhttpparam type="url" name="q" value="#q#">
        <cfhttpparam type="url" name="fq" value="#apofasi_taxonomy#+#apofasi_tmima#+#apofasi_date#+#apofasi_number#">
        <!---<cfhttpparam type="url" name="fq" value="apofasi_taxonomy:(3068 || ΠΟΙΝΙΚΕΣ) AND apofasi_date:(2010)">--->        
        <!---<cfhttpparam type="url" name="fq" value="apofasi_taxonomy:(3068) AND apofasi_date:(*) AND apofasi_number:(*)">--->
        <cfhttpparam type="url" name="rows" value="120">
        <cfhttpparam type="url" name="wt" value="json">
        <cfhttpparam type="url" name="sort" value="score desc">
        <cfhttpparam type="url" name="hl" value="true">
        <cfhttpparam type="url" name="hl.fl" value="content,title">
        <cfhttpparam type="url" name="fl" value="grid_title,title,url,ida,model,search_tag,solr_id">
        <cfhttpparam type="url" name="f.content.hl.alternateField" value="content">
        <cfhttpparam type="url" name="hl.maxAlternateFieldLength" value="800">
      </cfhttp> 
```

**请注意，搜索引擎使用以下网址：**

```
http://localhost/solr/areios_pagos/select/?q=blahblah&fq=apofasi_taxonomy:(3068)+ apofasi_tmima:(Α || Ζ)+ apofasi_date:(2007 || 2012)+apofasi_number:(666) 
```

到目前为止我检查的内容：我传递给 CFC 的参数是 100% OK（来自 html），我已经仔细检查了搜索引擎是否可以使用上述 url 语法。但我注意到一个非常奇怪的行为。当我从 url 中完全排除**#apofasi_taxonomy#**或**#apofasi_tmima#**参数时，CFC 正在工作（它返回结果）。**#apofasi_taxonomy#**参数采用的值是： `apofasi_taxonomy:(ΠΟΙΝΙΚΕΣ)`、或`apofasi_taxonomy:(ΠΟΛΙΤΙΚΕΣ)`，等等。`apofasi_taxonomy:(3068)``apofasi_taxonomy:(ΠΟΙΝΙΚΕΣ || 3068)``apofasi_taxonomy:(ΠΟΙΝΙΚΕΣ || ΠΟΛΙΤΙΚΕΣ)`

我注意到另一件事，**#apofasi_taxonomy#**参数正在使用以下值：，`apofasi_taxonomy(ΠΟΙΝΙΚΕΣ)`但`apofasi_taxonomy:(ΠΟΛΙΤΙΚΕΣ)`它`apofasi_taxonomy:(ΠΟΛΙΤΙΚΕΣ || ΠΟΙΝΙΚΕΣ)`不适用于`apofasi_taxonomy:(3068)`、`apofasi_taxonomy:(ΠΟΛΙΤΙΚΕΣ || 3068)`或。这不是很奇怪吗？`apofasi_taxonomy:(ΠΟΛΙΤΙΚΕΣ || 3068)``apofasi_taxonomy:(ΠΟΛΙΤΙΚΕΣ || ΠΟΛΙΤΙΚΕΣ || 3068)`

**#apofasi_tmima#**参数采用的值是：`Α || Α1 || Α2 || Β || Β2 || Γ || Δ || Ε || ΣΤ || Ζ || ΟΛΟΜΕΛΕΙΑ`例如`apofasi_tmima(Β || Β2 || ΟΛΟΜΕΛΕΙΑ)`。

请记住，上述值是希腊语。

有没有人可以提供帮助？

怀着敬意，汤姆

**编辑：移动了对问题的评论中提供的请求的 XML**

```
<fieldType name="text_areios_pagos" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_en.txt" enablePositionIncrements="true"/>
        <filter class="solr.LowerCaseFilterFactory"/> 
        <filter class="solr.EnglishPossessiveFilterFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_el.txt" enablePositionIncrements="true"/>
        <filter class="solr.GreekLowerCaseFilterFactory"/>
        <filter class="solr.GreekStemFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_en.txt" enablePositionIncrements="true"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_el.txt" enablePositionIncrements="true"/>
        <filter class="solr.GreekLowerCaseFilterFactory"/>
        <filter class="solr.GreekStemFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EnglishPossessiveFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/> 
        <filter class="solr.PorterStemFilterFactory"/>
    </analyzer>
</fieldType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T20:26:36.707

您可能需要向 cfhttp 标记添加 charset 属性

```
 <cfhttp ... charset="ISO-8859-7" ... 
```

# python - python twisted中的循环调用不起作用

> ID：14142552
> 
> 赞同：2
> 
> 时间：2013-01-03T16:03:46.763
> 
> 标签：python, twisted, twisted.web, twisted.internet

我正在为我的实时项目使用 python twisted。

说明：我正在为我向远程机器发出请求的 url 拉取 html 页面。因此，我在我的数据库机器中维护调度程序，该调度程序向远程机器发送请求并通过发布 url 参数以扭曲的方式异步获取结果.

因此，在扭曲中，无论我们得到结果成功回调链还是错误回调链，我每两分钟在“LoopingCall 服务”中运行一次主方法。我将每 2 分钟启动一次主方法。

在这种情况下，当一个请求无法返回时，我会收到错误消息。其他远程机器仍然可用于该服务。所以，无论发生什么情况，我的主要方法都应该每两分钟调用一次。由于某些中断而没有发生错误。

```
 from twisted.internet.task import LoopingCall
     from twisted.internet import reactor
     from twisted.internet import defer
     from twisted.web import client

    def service_avail_check():
        ip_list = get_all_ws_hosts()
        for i in ip_list:
           url = "http://" + i[0] + ":8080/dm/"
           print url
           server_ip = i[0]
           client\
             .getPage(url)\
             .addCallback(service_avail_handler, server_ip)\
             .addErrback(service_avail_error, server_ip)

     def service_avail_handler(data, server_ip):
         if data.strip() == 'pong':
             mark_the_service_avail(server_ip)
             crawler_avail_check(server_ip)
         else:
            mark_the_service_unavail(server_ip)

     def service_avail_error(failure, server_ip):
          print >> sys.stderr, "Error:", failure.getErrorMessage()
          print 'server ping error sever ip: '+ server_ip
          mark_the_service_unavail(server_ip)

    lc = LoopingCall(service_avail_check)
    lc.start(120)
    reactor.run() 
```

解释：

```
1.service_avail_check is my main method.it fetches the remote machine and sends the request
2.based on the response the corresponding call back is called
3.I am calling other methods to update into memory 
```

如果客户反应不佳，有时我会收到错误消息。

```
 crawl_handle Error: Connection was closed cleanly.
 Traceback (most recent call last):
 Failure: twisted.internet.error.ConnectionDone: Connection was closed cleanly.
 None 
```

即使应该再次调用 service_avail_check，因为远程机器已刷新，并且它可以在几分钟后再次准备好提供服务。所以，我经常调用它。

但是它没有被调用，而是被挂断了很长时间。

你能帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:18:59.390

`Deferred`向返回的添加一个 errback `LoopingCall.start`，至少记录发生的任何错误。 `LoopingCall`一旦其可调用对象引发异常就停止。添加 errback 将向您显示异常是什么，并为您提供放置一些代码以重新启动`LoopingCall`.

# python - SQLite3 Python：执行许多选择

> ID：14142554
> 
> 赞同：9
> 
> 时间：2013-01-03T16:04:11.903
> 
> 标签：python, select, sqlite, executemany

我正在尝试使用 executemany 函数将所有行从具有一些 WHERE 约束的一行中取出

```
import sqlite3

con = sqlite3.connect('test.db')
cur = con.cursor()

cur.execute('CREATE TABLE IF NOT EXISTS Genre (id INTEGER PRIMARY KEY, genre TEXT NOT NULL)')

values = [
        (None, 'action'),
        (None, 'adventure'),
        (None, 'comedy'),
        ]

cur.executemany('INSERT INTO Genre VALUES(?, ?)', values)

ids=[1,2]

cur.executemany('SELECT * FROM Genre WHERE id=?', ids)

rows = cur.fetchall()
print rows 
```

# 错误

```
cur.executemany('SELECT * FROM Genre WHERE id=?', ids)
sqlite3.ProgrammingError: You cannot execute SELECT statements in executemany() 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T16:07:52.547

用于`execute()`执行返回数据的查询。

您要么必须使用循环，要么使用`IN (id1, id2, id3)`where 子句：

```
cur.execute('SELECT * FROM Genre WHERE id in ({0})'.format(', '.join('?' for _ in ids)), ids) 
```

上面的表达式为每个项目插入一个单独的`?`占位符`ids`（用逗号分隔）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T16:10:17.563

您收到的错误消息很简单，`You cannot execute SELECT statements in executemany()`

只需更改您`executemany`的执行：

```
ids=[1,2]
for id in ids:
    cur.execute('SELECT * FROM Genre WHERE id=?', id)
    rows = cur.fetchall()
    print rows 
```

# arrays - 高效的 Kinect 深度图像（或大型阵列）过滤

> ID：14142562
> 
> 赞同：0
> 
> 时间：2013-01-03T16:05:07.703
> 
> 标签：arrays, filtering, kinect, emgucv, kinect-sdk

我正在使用 Kinect SDK，并尝试以两种方式过滤深度图像数据：

1.  移除所有与玩家无关的深度
2.  移除所有大于给定深度的深度（根据玩家手腕的位置计算）

其结果本质上是仅显示距离传感器小于一定深度的球员身体部分。

虽然下面的代码做了我想要它做的事情，但当我运行性能分析时它证明不是很好，所以我正在寻找可以改进它的方法。

基本问题是数组包含 307200 个值（因为深度图像大小为 640x480），我试图让这个方法每秒调用大约 30 次。

有没有人对如何更有效地完成这项工作有任何指示？该代码还在其他部分使用 EmguCV 库，我已经使用 cvInvokeThreshold 方法进行了修改，但它似乎没有像这段代码那样工作......

如果您需要更多信息，请告诉我。

非常感谢，

戴夫·麦克布

```
public static byte[] GetDepths(byte[] depths, DepthImagePixel[] depthPixels, int width, int height, int threshold)
    {

        Parallel.For(0, width, i =>
        {
            for (int j = 0; j < height; j++)
            {
                //Have to calculate the index we are working on using i and j
                int rawDepthDataIndex = i * height + j;

                //gets the depth and player values
                short depth = depthPixels[rawDepthDataIndex].Depth;
                short player = depthPixels[rawDepthDataIndex].PlayerIndex;

                if (player > 0 && depth < threshold)
                    depths[rawDepthDataIndex] = (byte)depth;
                else
                    depths[rawDepthDataIndex] = 0;
            }

        });
        return depths;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T21:34:35.227

嗨，我对深度图像和剪切有疑问。

我使用此代码

```
Using depthFrame As DepthImageFrame = e.OpenDepthImageFrame()
            If depthFrame IsNot Nothing Then
                ' Copy the pixel data from the image to a temporary array
                Me.depthPixels = Me.smoothingFilter.CreateFilteredDepthArray(Me.depthPixels, depthFrame.Width, depthFrame.Height)

                depthFrame.CopyDepthImagePixelDataTo(Me.depthPixels)

                depthReceived = True
            End If
End Using 
```

# asp.net - MVC 3 实现 SessionStateStoreProviderBase 以将数据存储在 cookie 中

> ID：14142565
> 
> 赞同：0
> 
> 时间：2013-01-03T16:05:12.633
> 
> 标签：asp.net, .net, session, cookies

我试图编写自己的自定义 SessionStateStoreProviderBase 类并将数据存储在 cookie 中。但是我有一个问题，我不知道应该在哪里添加带有新值的 cookie - 到响应或请求中？有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:20:11.337

Cookie 存储在客户端。

如果您的 cookie 是新的，那么这些内容需要与 一起发回`Response`，因为这是将 cookie 发回客户端的唯一方法。

附带的 cookie`Request`正在发送给您，因为那是*已经*存储在客户端上的内容，并且他们正在发回您已经发送给他们的内容。

由于 cookie 是*新*的，因此在客户端上设置新 cookie 的唯一方法是使用`Response`.

如果您正在实现自己的[`SessionStateStoreProviderBase`](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatestoreproviderbase.aspx)使用 cookie，那么我建议从[`CreateNewStoreData`method](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatestoreproviderbase.createnewstoredata.aspx)开始。

当有新请求进入时，您必须覆盖此方法。您会获得对[`HttpContext`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx)请求的引用，您可以从中访问 c​​ookie。

cookie 将包含一些密钥，允许您从用于存储会话状态的任何存储（无论是数据库、文件等）中提取会话状态。

# javascript - 如何使用 Javascript 使 div 可点击以进行触摸？

> ID：14142567
> 
> 赞同：1
> 
> 时间：2013-01-03T16:05:22.900
> 
> 标签：javascript, jquery, html, css, javascript-events

我在页面底部有一个固定的页脚，当您将鼠标悬停在 div 上时会展开以显示内容。这适用于所有浏览器，除了当我在触摸设备上测试它时，我只能点击 div 来显示它，但点击其他任何地方都不会折叠它。我已经尝试了一些方法来解决这个问题，但我对 Javascript 非常陌生，不幸的是大部分都是自学的，所以我缺乏很强的把握。我希望有人能理解我做错了什么。

**谢谢！**

剧本：

```
<script type="text/javascript">
$(document).ready(function() {

  $(".footer-wrapper").hover(
    //on mouseover
    function() {
      $(this).animate({
        height: '+=23%' //adds 23%
        }, 'slow' //sets animation speed to slow
      );
    },
    //on mouseout
    function() {
      $(this).animate({
        height: '4em' //changes back to 4em
        }, 'slow'
      );
    }
  );
});
</script> 
```

HTML：

```
<!-- footer !-->

<div class="footer-wrapper">
    <img src="images/footergraphic.png" alt="Business Name"  id="footeroverlay"/> 
<div id="footerinfo">

    <ul>
    <li>
      <h3>About Us</h3>
    </li>
        <li><a href="#" class="infolink">Portfolio</a></li>
        <li><a href="#" class="infolink">Contact Us</a></li>
        <li><a href="#" class="infolink">Our Policies</a></li>
        <li><a href="#" class="infolink">History</a></li>
        <li><a href="#" class="infolink">Associates</a></li>
        <li><a href="#" class="infolink">Testimonials</a></li>
    </ul> 
    <!-- /about !-->       
    <ul>
    <li>
      <h3>Services</h3>
    </li>
        <li><a href="#" class="infolink">Web Applications</a></li>
        <li><a href="#" class="infolink">Data Cabling</a></li>
        <li><a href="#" class="infolink">Document Management</a></li>
        <li><a href="#" class="infolink">Data Recovery</a></li>
        <li><a href="#" class="infolink">Data Duplication</a></li>
        <li><a href="#" class="infolink">Computer Support</a></li>
        <li><a href="#" class="infolink">Remote Backup</a></li>
    </ul>
    <ul>
    <li>
      <h3>Services Cont.</h3>
    </li>
        <li><a href="#" class="infolink">Web Design</a></li>
        <li><a href="#" class="infolink">Graphic Design</a></li>
        <li><a href="#" class="infolink">Print Design</a></li>
        <li><a href="#" class="infolink">Plotter Printing</a></li>
        <li><a href="#" class="infolink">Internet Service</a></li>
        <li><a href="#" class="infolink">Web Hosting</a></li>
        <li><a href="#" class="infolink">Dedicated Remote Storage</a></li>
    </ul> 
        <!-- /services !-->   
    <ul>
    <li>
      <h3>Marketing</h3>
    </li>
        <li><a href="#" class="infolink">Local Search Engine<br /> Optimization </a></li>
        <li><a href="#" class="infolink">Search Engine 
<br /> Optimization</a></li>
        <li><a href="#" class="infolink">Pay Per Click (PPC)</a></li>
        <li><a href="#" class="infolink">Social Media 
<br />Marketing</a></li>
    </ul>  
    <!-- /marketing !-->           
    <ul>
    <li>
      <h3>Products</h3>
    </li>
        <li><a href="#" class="infolink">Thing</a></li>
        <li><a href="#" class="infolink">thing</a></li>
        <li><a href="#" class="infolink">thing</a></li>
    </ul>
    <!-- /products !-->
    </div>

    <div class="footertext">
  Copyright © 2012 <a href="#" class="infolink">Business name</a>. All rights reserved.
    <br /> Designed by <a href="#" class="infolink">Business Name</a>.  </div>
  <img src="images/smalllogo.png" alt="Business name" style="padding-right:1em;float:right;" id="footer-logo"/>
</div> 
```

CSS：

```
/* footer styles */
h3 {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 1.3em;
    color: #FFFFFF;
    text-shadow: 0px 1px 2px #000000;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    text-decoration: none;
    margin-bottom: 1em;
}

.footer-wrapper {
    z-index: 1999;
    margin-top: 2em;
    margin-right: auto;
    margin-left: auto;
    position: fixed;
    float: left;
    width: 100%;
    height: 4em;
    bottom: 0em;
    background-image: url(../images/footerbg.png);
    background-repeat: repeat;
    background-color: #0a356d;
    border-top-width: .3em;
    border-top-style: solid;
    border-top-color: #0976bd;
    -ms-touch-action: none;

    /* shadow attributes */
    -moz-box-shadow: 0 0 10px 5px #000;
    -webkit-box-shadow: 0 0 10px 5px #000;
    box-shadow: 0 0 10px 5px #000;
}

#footerinfo {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 0.8em;
    color: #999999;
    letter-spacing: 0.08em;
    width: auto;
    height: 17em;
    min-height: auto;
    top: 0em;
    background-color: rgba(0,0,0,0.7);
    margin-right: 1em;
    margin-left: 1em;
    margin-top: 1em;
    margin-bottom: 0.3em;
    overflow: hidden;

    /* shadow attributes */
    -moz-box-shadow: inset 0 0 10px #000;
    -webkit-box-shadow: inset 0 0 10px #000;
    box-shadow: inset 0 0 10px #000;

    /* radius */
    border-bottom-left-radius: 50px 50px;
    border-bottom-right-radius: 50px 50px;
    position: relative;

}

#footerinfo ul {
    list-style-image: none;
    list-style-type: none;
    float: left;
    padding: 0.5em;
    margin-left: .5em;
    text-align: left;
    margin-bottom: 0em;
    margin-top: 1em;
}

#footerinfo ul li {
    display: block;
    padding-right: 1em;
    padding-left: 0.5em;
    clear: left;
}

.infolink:link, .infolink:visited {
    color: #999999;
    text-decoration: none;
    font-size: 1em;
    text-shadow: 1px 1px 2px #000000;
    font-family: Arial, Helvetica, sans-serif;
    font-style: normal;
}  

.infolink:hover {
    color: #eee;
    text-decoration: none;
}

.footertext {
    color: rgba(0,0,0,.7);
    text-decoration: none;
    font-size: 0.8em;
    font-family: Arial, Helvetica, sans-serif;
    font-style: normal;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    position: relative;
    margin-right: auto;
    margin-left: auto;
    padding-right: 0.3em;
    padding-left: 0.3em;
    text-align: center;
    margin-top: 0.5em;
}

@media all and (max-width: 800px) {
#footer-logo {
    display: none;

}
}

#footeroverlay {
    display: inherit;
    bottom: 4em;
    right: 1em;
    z-index: 9999;
    float: left;
    margin-top: 0.1em;
    margin-right: auto;
    margin-left: auto;
    margin-bottom: 0em;
    float: left;
    position: relative;
}

@media all and (max-width: 600px) {
#footeroverlay {
    display: none;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:15:58.493

```
<script type="text/javascript">
$(document).ready(function() {

  $(".footer-wrapper").mouseenter(
    //on mouseover
    function() {
      $(this).animate({
        height: '+=23%' //adds 23%
        }, 'slow' //sets animation speed to slow
      );
    }).mouseleave(
    //on mouseout
    function() {
      $(this).animate({
        height: '4em' //changes back to 4em
        }, 'slow'
      );
    }
  ).on("touchstart click", function(){
      if(isOpened){
        //code slideUp
      }else{
        //code slideDown
      }
   });
});
</script> 
```

更好地使用 mouseenter mouseleave 事件然后悬停 - 从子元素冒泡存在一些错误。还为移动设备使用[触摸事件](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/touchstart)

# sql-server - 重定向无法在 SSIS 中解析的行

> ID：14142569
> 
> 赞同：0
> 
> 时间：2013-01-03T16:05:27.300
> 
> 标签：sql-server, ssis, sql-server-2008-r2

我有一个相当简单的数据流，我从平面文件导入，进行一些简单的转换，然后插入到数据库表中。我的问题是，当供应商在一行中放入不符合其规范的数据时（即他们说一列将是放入 500000 的数字（3,2）），整个文件失败而不仅仅是那个一排。理想情况下，我想将未触及的坏行重定向到平面文件，但将它们放入“错误表”也可以。如何重定向无法解析的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:04:12.537

将失败的行从快速加载目标重定向到非快速加载。在第二个目的地失败的记录可以被重定向并进一步调查。

以下博客文章中的“使用快速加载时处理失败的插入”部分解释了这种设计模式： http: [//www.mattmasson.com/2011/12/design-pattern-avoiding-transactions/](http://www.mattmasson.com/2011/12/design-pattern-avoiding-transactions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:06:43.877

向 Flatfile 源添加一个 Flatfile 目标。所有不良数据都将发送到那里，并且该过程不会失败。还要记住重定向行而不是让它失败。还必须创建一个普通的 .txt 文件以映射到平面文件目标（与平面文件源相同）

# php - preg_replace "gotcha" 替换值转义

> ID：14142571
> 
> 赞同：2
> 
> 时间：2013-01-03T16:05:31.103
> 
> 标签：php, preg-replace

我正在对我不一定控制的内容运行 preg_replace，并且遇到了包含货币值（即`$1.00`）之类的替换值的问题。诚然，这是一个常见问题，已在其他问题中得到解决。我找到的最接近的解决方案是：

[http://www.procata.com/blog/archives/2005/11/13/two-preg_replace-escaping-gotchas/](http://www.procata.com/blog/archives/2005/11/13/two-preg_replace-escaping-gotchas/)

我的问题更复杂，因为替换值不是我可以提前逃脱的东西，至少不是我能看到的方式。这是我的预置代码：

```
$body = preg_replace('/<special_tag id="'.$tagID.'">(.*?)<\/special_tag>/','$1',$body); 
```

如您所见，我正在捕获一组自定义标签中的所有内容，并删除周围的开始和结束标签，但保留在里面找到的内容。然而，替换`'$1'`并不适合所需的转义，因此恰好在替换值中的货币值会被错误地终止。

我有没有想过这个替代品？还有什么我可以用来删除我的特殊标签的东西，记住它必须考虑到该特定标签的唯一 ID？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:40:03.283

不应该有任何“陷阱”的可能的 DOM 解决方案。

假设这个 HTML：

```
$html = <<< HTML
<html>
    <body>
        <special_tag id="foo">
            <p>Some content</p>
            <p>Some more content</p>
        </special_tag>
    </body>
</html>
HTML; 
```

你拉起 special_tag 的孩子，然后删除 special_tag：

```
// create DOMDocument, suppress parsing errors
$dom = new DOMDocument;
libxml_use_internal_errors(true);
$dom->loadHTML($html);
libxml_clear_errors();

// get special_tag with id foo
$xpath = new DOMXPath($dom);
$foo = $xpath->query('//special_tag[@id="foo"]')->item(0);

// move all children before special_tag
while ($foo->childNodes->length > 0) {
    $foo->parentNode->insertBefore($foo->childNodes->item(0));
}

// remove now empty special_tag
$foo->parentNode->removeChild($foo);

// output
echo $dom->saveHTML($dom->documentElement); 
```

会导致类似

```
<html><body>
    <p>Some content</p>
        <p>Some more content</p>
    </body></html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:39:44.807

不推荐使用 Regex 解析 XML/HTML。请改用**[DOM](https://stackoverflow.com/questions/3577641/best-methods-to-parse-html/3577662#3577662)**解析器。

# javascript - javascript:函数范围

> ID：14142577
> 
> 赞同：3
> 
> 时间：2013-01-03T16:05:50.973
> 
> 标签：javascript

如果函数具有范围，则它们应该在该范围内执行，但在这里我认为它不同。请参阅代码

```
 function foo() {
    var privateVal = "Private Val";
    this.publicVal = "Public Val";

    var privateAlert = function (str) {
      alert(str + this.publicVal);
      alert(str + privateVal);
    }

    this.Run = function () //see here
    {
      privateAlert("Private Call: ");

      this.publicAlert = privateAlert;
      this.publicAlert("Public Call: ");

      privateAlert = this.publicAlert;
      privateAlert("Private Call: ");
      this.publicAlert("Public Call: ");
    }
  }

  var bar = new foo();
  bar.Run(); 
```

当创建新对象时，run() 成为对象的私有方法或仅属于 var bar 的方法。该方法不应该能够从其中执行 privateAlert() 函数，因为函数具有范围它只能从它已声明的函数中执行，但不能从现在属于某个其他对象的方法中执行。请澄清这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:09:39.240

重要的是**函数在哪里被实例化**。在这种情况下，“运行”在“foo”构造函数中被实例化，并且在这种情况下，私有方法绝对是可见的。换句话说，它成为围绕“运行”功能的闭包的一部分。

可以这样想：“Run”函数的代码出现在“foo”构造函数中。“运行”中的代码可以“看到”“foo”中的所有局部变量，如果“foo”在另一个函数中，它也可以看到所有这些变量。因为该定义仅在调用“foo”时生效，所以所有这些局部变量将**始终**可用于“Run”中的代码，在以后调用它的任何时候。这就是术语“关闭”的含义。

JavaScript 中的范围和可见性与使用类的静态语言（如 Java、C++ 或 C#）的工作方式大不相同。在这些语言中，您显式地构造对象，然后通过这些对象引用开始调用函数。在 JavaScript 中，闭包有点像自动运行的对象，它们隐式地包裹在从函数调用中“逃脱”的函数周围。您不能直接访问这些对象，但它们仍然是真实的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:18:51.553

我猜 Raffaele 已经回答了你的大部分问题。但是，为了您的方便，让我尝试以不同的方式表达它并添加一些代码供您遵循。

我认为，您可以在这里学习两件事，以了解您的代码为何如此行事。

1.  JavaScript 具有后期绑定`this`。只有当您*调用*一个方法时，运行时才决定“打开”它将被调用的对象。默认是全局对象（例如，`window`在浏览器中、`global`在 node.js 中等）。要获得`this`除全局之外的另一个，您*需要*将该函数分配为所需对象的属性，就像您通过`this.publicAlert = privateAlert;`. 之后，如果您`privateAlert()`直接调用（在 global 上`this`）或者如果您在本地 this via 上调用它`this.publicAlert()`，即使它是相同的函数，它也会有所不同。

2.  正如在另一个答案中已经指出的那样。Javascript 没有`public`,`private`等，您需要按照您使用智能范围界定的方式“建模”私有变量。在您的示例`privateVal`中，从某种意义上说，这是私有的，没有人可以从外部读取或写入它。这同样适用于`privateAlert`。只有通过构造函数中的语句`Foo`和`run`您可以访问它们的方法。

我扩充了您的示例以向您展示发生了什么（ps： using`console.log`通常比 更可取`alert`）：

```
function Foo() {
    var privateVal = "Private Val";
    var that = this;
    this.publicVal = "Public Val";

    var privateAlert = function (str) {
        console.log("---" + str + "---")
        console.log("isLocalThis? ", this == that)
        console.log("isGlobalThis?", this == globalThis)
        console.log("private:     ", privateVal)
        console.log("public:      ", this.publicVal || "publicVal not available on 'this'")
    }

    this.run = function () {
        console.log("scope of run:", that, bar, privateAlert)
        console.log("isLocalThis? ", this == that)
        console.log("isGlobalThis?", this == globalThis)

        privateAlert("Private Call: ");

        this.publicAlert = privateAlert;
        this.publicAlert("Public Call: ");

        privateAlert = this.publicAlert;
        privateAlert("Private Call: ");
        this.publicAlert("Public Call: ");
    }
}

var bar = new Foo();
bar.run(); 
```

顺便说一句：`console`和`alert`是全局的属性`this`（即`window`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:27:53.943

*范围*涉及名称系统，而没有提及访问权限。例如，在 Java 中，有三个关键字称为访问*修饰符*：`public`和. Javascript 没有定义任何访问修饰符，因此所有名称都是公开的。`private``protected`

让我们这样说：要从文件系统中读取文件，您需要两件事：

1.  首先，文件名。当您请求操作系统给您一个文件指针时，它首先检查文件**名**是否存在，可能是在从相对文件名和当前目录构造绝对路径名之后，然后，**仅当文件存在时**
2.  它检查您是否有权从中读取，最后为您提供流的处理程序。

Javascript*作用域**是*确定名称在当前上下文中是否有意义的规则。如果名称有含义，您可以随时访问它，因为 Javascript 没有定义非公共修饰符。

在您的情况下，您请求访问`bar.Run`. Javascript 解释器使用当前上下文（我们假设它是*全局对象*）向“javascript 文件系统”询问“调用”对象`.bar.Run`（第一个点是有意的，表示根）。一旦找到名称，就意味着它存在，并且您将始终能够访问它（在这种情况下调用函数）。顺便说一句，没有什么能比得上*javascript 文件系统*，它只是在没有技术术语的情况下使用直观的类比来传达这个想法。

同样，检查*范围规则*以解析整个代码中的名称。在内部`this.Run`，名称`privateAlert`可以*解析*，这是唯一重要的规则：全局可以看到`bar`，全局可以访问`bar.Run`，分配给它的函数可以访问`privateAlert`。这是链条

# zend-framework - 将变量传递给控制器 中的部分

> ID：14142578
> 
> 赞同：1
> 
> 时间：2013-01-03T16:05:51.760
> 
> 标签：zend-framework, partial

我正在尝试为要在 Zend 中发送的电子邮件创建正文变量。我能够加载部分并将其传递给我的模型，然后将其打包并在途中发送。我遇到的问题是我想将 $buyer 传递到部分中，以便使用发布信息来填充电子邮件。

$buyer 包含我所有的帖子数据。所以我在该变量中拥有姓名、地​​址、电话号码和其他信息。$body2 只是一个简单的 HTML 脚本，我希望能够在通过电子邮件发送之前填充来自 $buyer 的信息。

```
// Get the Post Data
$buyer = $request->getPost();
// Creates the body for the email with the users information
$body2  = $this->view->partial('partials/enterpriseContact.phtml'); 
```

我试着做 -

```
$body2 = $this->view->partial('partials/enterpriseContact.phtml', $buyer); 
```

但这没有用。如果这有所作为，我正在控制器内部工作。完整的代码块看起来如此 -

```
// Get the Post Data
$buyer = $request->getPost();
// Create the body variable by loading the partial for the post card.
$body   = $this->view->partial('partials/postcardEmail/eform1stpostcard.htm');
// Creates the body for the business email with the users information
$body2  = $this->view->partial('partials/enterpriseContact.phtml');
// New Model For Mail Client
$mailUs = new Model_MailUs(); // Instantiate the model to handle Emails
// Use that model to send the email, requires variables, who to send to, and body
$mailUs->sendMail($request->getPost(),  'guest',    $body);  // Sends an email to the user
$mailUs->sendMail($request->getPost(),  'link',  $body2); // Sends an email to us 
```

如何将变量放入 Zend 控制器的部分变量中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:49:27.437

原则上，您应该能够使用：

```
// in controller or do this all the way back at bootstrap
$this->view->partial()->setObjectKey('mykey');

// in controller
$renderedContent = $this->view->partial('path/to/partial.phtml', $someData); 
```

然后在部分本身：

```
<?php 
$someData = $this->mykey
// now use $someData as you like
?> 
```

但是，坦率地说，我通常最终会做更冗长的事情：

```
// In controller
$renderedContent = $this->view->partial('path/to/partial.phtml', array(
    'mykey' => 'myval',
)); 
```

然后在部分：

```
<?php echo $this->mykey ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:45:49.927

```
$body2  = $this->view->partial('partials/enterpriseContact.phtml', array('buyer' => $buyer)); 
```

您必须使用单词数组，然后如上所述将变量集合设置为部分。然后我可以通过在我的部分输入 echo $this->buyer 来访问变量。

# uitableview - Monotouch - 一组按钮右对齐的布局表视图单元格

> ID：14142579
> 
> 赞同：0
> 
> 时间：2013-01-03T16:05:56.567
> 
> 标签：uitableview, xamarin.ios, interface-builder

我有一个表格视图单元格，左侧有一个标签，右侧有三个按钮。当 UI 在 iPad 上时，我希望按钮贴在单元格的右侧 - atm 看起来它们是为 iPhone 设置的。我是新的 xCode UI 的新手，不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:23:45.907

您最好在运行时根据设备设置位置。

这是原始目标 C 中的一个片段：[https ://gist.github.com/1323251](https://gist.github.com/1323251)

[此外，这里有一个用于单点触控的片段： https](https://stackoverflow.com/a/10889966/1948968) ://stackoverflow.com/a/10889966/1948968

# .net - 从 XSD 生成 SQL 架构并将 XML 文件加载到 SQL Server

> ID：14142582
> 
> 赞同：5
> 
> 时间：2013-01-03T16:06:12.293
> 
> 标签：.net, sql-server, xml, xsd, code-generation

我有一个 XSD 文件和许多 XML 数据文件。从 XSD 文件创建数据库/表然后将所有 XML 文件加载到生成的数据库模式中的最快方法是什么？

现在，我不在乎它是使用代码生成工具还是其他任何东西。我只想知道最快的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:28:11.053

将数据以 xml 格式存储在数据库中：

1.  创建架构集合并创建表：http: [//msdn.microsoft.com/en-us/library/ms176009.aspx](http://msdn.microsoft.com/en-us/library/ms176009.aspx)
2.  将 xml 加载到数据库中：[http ://weblogs.sqlteam.com/mladenp/archive/2007/06/18/60235.aspx](http://weblogs.sqlteam.com/mladenp/archive/2007/06/18/60235.aspx)
3.  查询数据：[http ://beyondrelational.com/modules/2/blogs/28/posts/10292/xml-workshops.aspx](http://beyondrelational.com/modules/2/blogs/28/posts/10292/xml-workshops.aspx)

这样您就不必担心必须创建和维护大量表。

# database - ASP.NET MVC4 - 来自数据库的图像加载缓慢

> ID：14142583
> 
> 赞同：0
> 
> 时间：2013-01-03T16:06:15.490
> 
> 标签：database, image, asp.net-mvc-4, load

希望您能帮助我找到在 ASP.NET MVC 4 上创建的对我来说很奇怪的网站行为的解决方案。

在我网站的主页上，我有大约 30 个类别的图像。它们是从 MSSQL 2008 数据库加载的。但问题是其中一些（每次不同的图像）加载速度非常慢。所有图像的加载速度都非常快，但其中五个不是。他们的大小和其他人一样。

为什么？你能解释一下发生了什么，我应该在哪里寻找解决方案？当这些图像在几秒钟后出现时，网站看起来很糟糕

这是萤火虫屏幕截图的链接[http://i.piccy.info/i7/354e9ca195cc13f412e5e5813d279d97/4-55-323/7677732/Network.jpg](http://i.piccy.info/i7/354e9ca195cc13f412e5e5813d279d97/4-55-323/7677732/Network.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:16:25.430

不完全确定为什么图像加载缓慢，但是如果它们不太可能经常更改，您可能需要考虑缓存它们，这意味着只有在缓存被清空后第一次加载时它才会很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:42:06.900

将图像直接存储在数据库中通常不被认为是最佳实践。我建议尝试将图像存储为文件，然后将路径存储在数据库中。

[针对作者评论的补充]这可能根本不是数据库问题。例如，许多浏览器会限制与单个 Web 服务器的并发连接数。可能是网络浏览器发送了 20 个图像请求，然后一旦完成，就会发出第 21 个请求。因此，在其他图像完全完成之前，一些图像甚至不会开始加载。Web 服务器上也可能存在每个客户端的限制。

Chrome 和 IE9 带有不错的分析器，可以显示不同请求需要多长时间。Firefox 同样有一个名为 Firebug 的附加组件。这些工具应该有助于缩小确切的问题范围。

# android - Activity 中的 setText 与 BroadcastReceiver 的其他类

> ID：14142594
> 
> 赞同：0
> 
> 时间：2013-01-03T16:06:51.283
> 
> 标签：android, textview, broadcastreceiver, settext

我想将我通过短信收到的按摩文本设置到我主要活动的文本视图中。我努力了很久，我在互联网上到处搜索，但它不起作用。请帮我

如何在其他活动的 TextView 中设置文本？我试过这样做，但它不起作用

我认为方法“TextView textViewAlarmMassage = (TextView) findViewById(R.id.textViewAlarmMassage);” 在 mainActivity 中不起作用，因为 programkm 停在这一行

主要活动

```
public class MainActivity extends Activity { 
```

//这是另一个代码

```
public void showAlarmMassage(){

    //Connect to SMSReceiver Class
    *SMSReceiver receiver = new SMSReceiver();*

    //Get the Alarm Massage
    *String massage = receiver.getAlarmMassage().toString();*

    //Initialize the TextView
    *TextView textViewAlarmMassage = (TextView) findViewById(R.id.textViewAlarmMassage);*

    //Set the Alarm Massage in the TextView
    *textViewAlarmMassage.setText(massage);*
} 
```

}

* * *

公共类 SMSReceiver 扩展 BroadcastReceiver{

```
public String alarmMassage; 
public String senderAddress;

@Override
public void onReceive(Context cxt, Intent intent){

    if(intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED"))
    {
        Bundle bundle = intent.getExtras();
        Object messages[] = (Object[]) bundle.get("pdus");
        SmsMessage smsMessage[] = new SmsMessage[messages.length];

        for (int n = 0; n < messages.length; n++)
            smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);

        alarmMassage = smsMessage[0].getDisplayMessageBody();
        senderAddress = smsMessage[0].getDisplayOriginatingAddress();

        //Set the AlarmMassage in the Setter Constructor
        *setAlarmMassage(alarmMassage);*            

        *MainActivity mainActivity = new MainActivity();*

        //Here I want to start the showAlarmMassage methode in the MainActivity
        *mainActivity.showAlarmMassage();*

        String toast = "Received SMS from: " + senderAddress;
        toast += "\nMessage: " + alarmMassage;

        Toast.makeText(cxt, toast, Toast.LENGTH_LONG).show();

    }
}

//Getting AlarmMassage
*public String getAlarmMassage(){*
    return this.alarmMassage;       
}

//setting AlarmMassage
*public void setAlarmMassage(String alarmMassage){*
    this.alarmMassage = alarmMassage;
} 
```

}

* * *

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="at.ffnt.datenbank"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.RECORD_AUDIO"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" > </uses-permission>
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_startseite" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />

    </intent-filter>

    </activity>
    <activity
        android:name=".EntryActivity"
        android:label="@string/title_activity_entry" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".ViewAllEntriesActivity"
        android:label="@string/title_activity_view_all_entries" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".AudioRecording"
        android:label="@string/title_audio_recording" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name=".StatusReceiver">...</receiver>
<receiver android:name=".SMSReceiver">
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver>

</application> 
```

* * *

日志

01-03 17:04:30.598: E/AndroidRuntime(22422): 致命异常: main 01-03 17:04:30.598: E/AndroidRuntime(22422): java.lang.RuntimeException: 无法在.ffnt 启动接收器。 datenbank.SMSReceiver: java.lang.NullPointerException 01-03 17:04:30.598: E/AndroidRuntime(22422): 在 android.app.ActivityThread.handleReceiver(ActivityThread.java:2287) 01-03 17:04:30.598: E /AndroidRuntime(22422): 在 android.app.ActivityThread.access$1600(ActivityThread.java:140) 01-03 17:04:30.598: E/AndroidRuntime(22422): 在 android.app.ActivityThread$H.handleMessage(ActivityThread .java:1313) 01-03 17:04:30.598: E/AndroidRuntime(22422): 在 android.os.Handler.dispatchMessage(Handler.java:99) 01-03 17:04:30.598: E/AndroidRuntime(22422 ): 在 android.os.Looper.loop(Looper.java:137) 01-03 17:04:30.598: E/AndroidRuntime(22422): 在 android.app.ActivityThread。main(ActivityThread.java:4921) 01-03 17:04:30.598: E/AndroidRuntime(22422): at java.lang.reflect.Method.invokeNative(Native Method) 01-03 17:04:30.598: E/AndroidRuntime (22422): 在 java.lang.reflect.Method.invoke(Method.java:511) 01-03 17:04:30.598: E/AndroidRuntime(22422): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:1038）01-03 17:04:30.598：E/AndroidRuntime（22422）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:805）01-03 17:04： 30.598: E/AndroidRuntime(22422): at dalvik.system.NativeStart.main(Native Method) 01-03 17:04:30.598: E/AndroidRuntime(22422): 由: java.lang.NullPointerException 01-03 17: 04:30.598: E/AndroidRuntime(22422): at.ffnt.datenbank.MainActivity.showAlarmMassage(MainActivity.java:248) 01-03 17:04:30.598: E/AndroidRuntime(22422): at.ffnt.datenbank .SMSReceiver.onReceive(SMSReceiver.java:37) 01-03 17:04:30.598: E/AndroidRuntime(22422): 在 android.app.ActivityThread.handleReceiver(ActivityThread.java:2280) 01-03 17:04:30.598: E/AndroidRuntime(22422): ... 10 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:49:56.307

## 广播接收器

```
public class SMSReceiver extends BroadcastReceiver
{
@Override
public void onReceive(Context cxt, Intent intent)
 {
  if(intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED"))
   {
     Bundle b=intent.getExtras();
     Intent i=new Intent(getApplicationContext(),GetSMSActivity.class);
     i.putExtra("SMS_BUNDLE",b);
     startActivity(i);

   }
  }
 } 
```

* * *

## 清单文件

```
 <uses-permission android:name="android.permission.RECEIVE_SMS" />
 <activity
    android:name=".GetSMSActivity"
    android:label="@string/title_activity_startseite" >
  <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
  </intent-filter>
</activity>
<receiver android:name=".SMSReceiver">
<intent-filter>
    <action android:name="android.provider.Telephony.SMS_RECEIVED" />
</intent-filter>
</receiver> 
```

* * *

## 你的 MainActivity

```
GetSMSActivity.java

TextView textViewAlarmMassage = (TextView) findViewById(R.id.textViewAlarmMassage);
Intent smsReceived=getIntent();
Bundle smsData=smsReceived.getExtras("SMS_BUNDLE");
Object messages[] = (Object[])smsData.get("pdus");
SmsMessage smsMessage[]=new SmsMessage[messages.length];

for (int n = 0; n < messages.length; n++)
     {
        smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
      }
String alarmMassage = smsMessage[0].getDisplayMessageBody();
String senderAddress = smsMessage[0].getDisplayOriginatingAddress();

textViewAlarmMassage.setText(alarmMassage); 
```

### 在测试时使用 eclipse 模拟消息。

# maven - mvn 奇怪的错误

> ID：14142596
> 
> 赞同：0
> 
> 时间：2013-01-03T16:06:52.420
> 
> 标签：maven

我正在使用 maven2，java ver 1.7.0，当我尝试使用 mvn clean 或 mvn package 时出现错误：

```
java.lang.NumberFormatException: For input string: "3000:3000"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:492)
    at java.lang.Integer.parseInt(Integer.java:527)
    at org.apache.maven.wagon.PathUtils.port(PathUtils.java:278)
    at org.apache.maven.wagon.repository.Repository.setUrl(Repository.java:147)
    at org.apache.maven.wagon.repository.Repository.<init>(Repository.java:91)
    at org.apache.maven.artifact.repository.DefaultArtifactRepository.<init>(DefaultArtifactRepository.java:70)
    at org.apache.maven.artifact.repository.DefaultArtifactRepositoryFactory.createDeploymentArtifactRepository(DefaultArtifactRepositoryFactory.java:44)
    at org.apache.maven.project.ProjectUtils.buildDeploymentArtifactRepository(ProjectUtils.java:80)
    at org.apache.maven.project.DefaultMavenProjectBuilder.processProjectLogic(DefaultMavenProjectBuilder.java:1029)
    at org.apache.maven.project.DefaultMavenProjectBuilder.buildInternal(DefaultMavenProjectBuilder.java:880)
    at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromSourceFileInternal(DefaultMavenProjectBuilder.java:508)
    at org.apache.maven.project.DefaultMavenProjectBuilder.build(DefaultMavenProjectBuilder.java:200)
    at org.apache.maven.DefaultMaven.getProject(DefaultMaven.java:604)
    at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:487)
    at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:560)
    at org.apache.maven.DefaultMaven.getProjects(DefaultMaven.java:391)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:272)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375) 
```

我不知道出了什么问题，因为我的朋友成功编译了项目，所以出了什么问题....

# java - 在Jar文件中获取xml文件

> ID：14142599
> 
> 赞同：1
> 
> 时间：2013-01-03T16:07:06.270
> 
> 标签：java, xml, exception, jar, static-methods

我正在使用 NetBeans，我在其他线程的帮助下编写了这个函数，但我得到了行错误“ `InputStream is = getClass().getResourceAsStream(xml_file_path);`”说：“ `non-static method getClass() cannot be referenced from a static context`”

```
public static Document Get_XML_Document_From_Jar(String xml_file_path) {
    Document xml_doc = null;

    InputStream is = getClass().getResourceAsStream(xml_file_path);
    try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        xml_doc = db.parse(is);                          // just use a different parse method   
        xml_doc.getDocumentElement().normalize();
    } catch (Exception ex) {
        System.out.println(ex.getMessage());
    }
    return xml_doc;
} 
```

我能做些什么？我尝试使用 ClassLoader 但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:08:44.217

```
non-static method getClass() cannot be referenced from a static context 
```

您必须使用：

```
YourClass.class.getResourceAsStream() 
```

而不是`getClass()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:10:53.180

尝试这个：

```
InputStream is = YourClass.class.getClassLoader().getResourceAsStream(xml_file_path); 
```

# javascript - 使用 $.getScript 加载脚本时的查询字符串参数处理

> ID：14142604
> 
> 赞同：0
> 
> 时间：2013-01-03T16:07:38.137
> 
> 标签：javascript

我有一个需要加载的动态脚本列表，回调函数调用加载的外部脚本中定义的另一个异步函数。

一个脚本对象由 {scriptUrl, property} 组成

所有脚本都定义了一个 externalScriptFunction 函数，它以 script['property'] 作为参数。

```
for(var i = 0; i < scripts.length; i++) {
   var script = scripts[i];

   $.getScript(script['scriptUrl'], function() {
      externalScriptFunction(script['property'], function someAsyncMethod() {
         ...
         ...
      });

   })

} 
```

我遇到的问题是，在执行 $.getScript 回调之前，for 循环已前进到下一个元素，而 script['property'] 来自数组的不同元素。

我该如何解决这个问题？

*   有没有办法将查询参数传递给加载的脚本？
*   或者 $.getScript 在移动到下一个项目之前完成加载脚本的方法？
*   还有其他解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:32:24.373

只使用闭包 - [JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

因此，对于您的示例，它应该如下所示：

```
for(var i = 0; i < scripts.length; i++) {

 var script = scripts[i];
 (function(script){
   $.getScript(script['scriptUrl'], function() {
      externalScriptFunction(script['property'], function someAsyncMethod() {
         ...
         ...
      });

   })
 })(script)
} 
```

不确定该代码是否真的有效，但我想你明白了吗？

[http://jsfiddle.net/vGgpW/](http://jsfiddle.net/vGgpW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:33:40.530

你应该像这样传递一个回调函数，

```
var loadedCallback = function(extraData) {
    return function(data, textStatus, jqxhr) {
        externalScriptFunction(extraData, function someAsyncMethod() {
         ...
         ...
      });
    }
}

for(var i = 0; i < scripts.length; i++) {
   var script = scripts[i];
   $.getScript(script['scriptUrl'], loadedCallback(script["property"]));

} 
```

[演示](http://jsfiddle.net/96XDr/)

# algorithm - 在哪种情况下使用哪种最小生成树算法

> ID：14142606
> 
> 赞同：2
> 
> 时间：2013-01-03T16:07:41.597
> 
> 标签：algorithm, data-structures, graph, graph-algorithm

我是最小生成树的新手，并试图找出在任何特定情况下使用哪种 MST 算法。任何人都可以在任何特定情况下提供一些示例，其中一种 MST 算法比其他算法更适合

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:20:44.993

看看这个[pdf](http://www.aka.fi/Tiedostot/Tiedostot/Viksu/Viksu%202008/IgorPodsechin.pdf)

快速总结（引用页面）：

“如果将 Boruvka 和 Kruskal 的算法应用于现实世界，显然会更有用，而 Prim 的运行时间随着图形的顺序增长太快，无法在串行处理环境中使用。”

“在这三种算法中，当考虑并行计算时，Boruvka 最有希望。它在设计上是可并行的，涉及在本地搜索最小的边，然后在每一步之后组合生成的树。多个计算机处理节点之间的任务划分将是“Boruvka 算法的逻辑扩展。但是，从本文可以看出，Kruskal 算法在串行环境中效率更高。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:21:22.683

我想说最小生成树问题的两个主要解决方案在图表的表示方式上有所不同。虽然[Kruskal](http://en.wikipedia.org/wiki/Kruskal%27s_algorithm)可以很好地处理边列表，但[Prim](http://en.wikipedia.org/wiki/Prim%27s_algorithm)的算法将更好地处理邻域列表。如果让我决定图形表示，我更喜欢实现 Kruskal，因为我发现它更容易实现，但在这方面差异真的很小——所以这取决于你。

# git - Git：发现哪些提交曾经触及过一系列行

> ID：14142609
> 
> 赞同：68
> 
> 时间：2013-01-03T16:07:50.133
> 
> 标签：git, blame

我无法弄清楚如何`git blame`用于获取*曾经*触及给定行范围的提交集。有类似的问题，[但](https://stackoverflow.com/questions/5098256/git-blame-prior-commits)接受的答案并没有让我走得更远。

假设我有一个从第 1000 行开始的定义`foo.rb`。它只有 5 行长，但改变这些行的提交数量是巨大的。如果我做

```
git blame foo.rb -L 1000,+5 
```

我得到了（至多）五个改变这些行的不同提交的引用，但我也对“背后”的提交感兴趣。

相似地，

```
git rev-list HEAD -- foo.rb | xargs git log --oneline 
```

几乎是我想要的，但我无法指定行范围`git rev-list`

我可以传递一个标志来`git blame`获取曾经触及这五行的提交列表，或者构建提取此类信息的脚本的最快方法是什么？让我们暂时忽略定义曾经多于或少于 5 行的可能性。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-11-03T20:03:03.153

[从 Git 1.8.4](https://github.com/git/git/blob/v1.8.4/Documentation/RelNotes/1.8.4.txt#L210)开始，`git log`必须[`-L`](https://github.com/git/git/blob/v1.8.4/Documentation/RelNotes/1.8.4.txt#L210)查看一系列行的演变。

例如，假设您查看`git blame`的输出：

```
((aa27064...))[mlm@macbook:~/w/mlm/git]
$ git blame -L150,+11 -- git-web--browse.sh
a180055a git-web--browse.sh (Giuseppe Bilotta 2010-12-03 17:47:36 +0100 150)            die "The browser $browser is not
a180055a git-web--browse.sh (Giuseppe Bilotta 2010-12-03 17:47:36 +0100 151)    fi
5d6491c7 git-browse-help.sh (Christian Couder 2007-12-02 06:07:55 +0100 152) fi
5d6491c7 git-browse-help.sh (Christian Couder 2007-12-02 06:07:55 +0100 153) 
5d6491c7 git-browse-help.sh (Christian Couder 2007-12-02 06:07:55 +0100 154) case "$browser" in
81f42f11 git-web--browse.sh (Giuseppe Bilotta 2010-12-03 17:47:38 +0100 155) firefox|iceweasel|seamonkey|iceape)
5d6491c7 git-browse-help.sh (Christian Couder 2007-12-02 06:07:55 +0100 156)    # Check version because firefox < 2.0 do
5d6491c7 git-browse-help.sh (Christian Couder 2007-12-02 06:07:55 +0100 157)    vers=$(expr "$($browser_path -version)" 
5d6491c7 git-browse-help.sh (Christian Couder 2007-12-02 06:07:55 +0100 158)    NEWTAB='-new-tab'
5d6491c7 git-browse-help.sh (Christian Couder 2007-12-02 06:07:55 +0100 159)    test "$vers" -lt 2 && NEWTAB=''
a0685a4f git-web--browse.sh (Dmitry Potapov   2008-02-09 23:22:22 -0800 160)    "$browser_path" $NEWTAB "$@" & 
```

你想知道现在第 155 行的历史。

然后：

```
((aa27064...))[mlm@macbook:~/w/mlm/git]
$ git log --topo-order --graph -u -L 155,155:git-web--browse.sh
* commit 81f42f11496b9117273939c98d270af273c8a463
| Author: Giuseppe Bilotta <giuseppe.bilotta@gmail.com>
| Date:   Fri Dec 3 17:47:38 2010 +0100
| 
|     web--browse: support opera, seamonkey and elinks
|     
|     The list of supported browsers is also updated in the documentation.
|     
|     Signed-off-by: Giuseppe Bilotta <giuseppe.bilotta@gmail.com>
|     Signed-off-by: Junio C Hamano <gitster@pobox.com>
| 
| diff --git a/git-web--browse.sh b/git-web--browse.sh
| --- a/git-web--browse.sh
| +++ b/git-web--browse.sh
| @@ -143,1 +143,1 @@
| -firefox|iceweasel)
| +firefox|iceweasel|seamonkey|iceape)
|  
* commit a180055a47c6793eaaba6289f623cff32644215b
| Author: Giuseppe Bilotta <giuseppe.bilotta@gmail.com>
| Date:   Fri Dec 3 17:47:36 2010 +0100
| 
|     web--browse: coding style
|     
|     Retab and deindent choices in case statements.
|     
|     Signed-off-by: Giuseppe Bilotta <giuseppe.bilotta@gmail.com>
|     Signed-off-by: Junio C Hamano <gitster@pobox.com>
| 
| diff --git a/git-web--browse.sh b/git-web--browse.sh
| --- a/git-web--browse.sh
| +++ b/git-web--browse.sh
| @@ -142,1 +142,1 @@
| -    firefox|iceweasel)
| +firefox|iceweasel)
|  
* commit 5884f1fe96b33d9666a78e660042b1e3e5f9f4d9
  Author: Christian Couder <chriscool@tuxfamily.org>
  Date:   Sat Feb 2 07:32:53 2008 +0100

      Rename 'git-help--browse.sh' to 'git-web--browse.sh'.

      Signed-off-by: Christian Couder <chriscool@tuxfamily.org>
      Signed-off-by: Junio C Hamano <gitster@pobox.com>

  diff --git a/git-web--browse.sh b/git-web--browse.sh
  --- /dev/null
  +++ b/git-web--browse.sh
  @@ -0,0 +127,1 @@
  +    firefox|iceweasel) 
```

如果您经常使用此功能，您可能会发现 git 别名很有用。为此，请输入您的`~/.gitconfig`：

```
[alias]
    # Follow evolution of certain lines in a file
    # arg1=file, arg2=first line, arg3=last line or blank for just the first line
    follow = "!sh -c 'git log --topo-order -u -L $2,${3:-$2}:"$1"'" - 
```

现在你可以做`git follow git-web--browse.sh 155`。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-13T04:12:52.597

我认为这就是你想要的：

```
git rev-list HEAD -- foo.rb | ( 
    while read rev; do
        git blame -l -L 1000,+5 $rev -- foo.rb | cut -d ' ' -f 1
    done;
) | awk '{ if (!h[$0]) { print $0; h[$0]=1 } }' 
```

这将输出对您选择的行进行编辑的每个提交的修订号。

以下是步骤：

1.  第一部分`git rev-list HEAD -- foo.rb`输出编辑所选文件的所有修订。

2.  然后，这些修订中的每一个都进入第二部分，该部分将每个修订都放入`git blame -l -L 1000,+5 $rev -- foo.rb | cut -d ' ' -f 1`. 这是一个由两部分组成的命令。

    1.  `git blame -l -L 1000,+5 $rev -- foo.rb`输出所选行的责任。通过向它提供修订号，我们告诉它从那个提交开始并从那里开始，而不是从头开始。
    2.  因为 blame 输出了一堆我们不需要的信息，所以`cut -d ' ' -f 1`给了我们 blame 输出的第一列（修订号）。
3.  `awk '{ if (!h[$0]) { print $0; h[$0]=1 } }'`取出不相邻的重复行，同时保持它们出现的顺序。有关此命令的更多信息，请参见[http://jeetworks.org/node/94 。](http://jeetworks.org/node/94)

您可以在此处添加最后一步以获得更漂亮的输出。将所有内容导入`xargs -L 1 git log --oneline -1`并获取修订列表的相应提交消息。我在使用这最后一步时遇到了一个奇怪的问题，我必须在输出的每几个修订版本中继续按下下一步。我不确定为什么会这样，这就是为什么我没有将它包含在我的解决方案中。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-07T14:37:31.270

不确定您想做什么，但也许**git log -S**可以为您解决问题：

> ```
> -S<string>
>     Look for differences that introduce or remove an instance of <string>. 
>     Note that this is different than the string simply appearing
>     in diff output; see the pickaxe entry in gitdiffcore(7) for more
>     details. 
> ```

您可以将您尝试遵循的更改（或更改的一部分）放入字符串中，这将列出曾经触及此更改的提交。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T08:58:00.990

我喜欢这个谜题，它有它的微妙之处。获取此文件，说出`init foo.rb 1000,1005`并按照说明进行操作。完成后，文件`@changes`将具有按拓扑顺序排列的正确提交列表，`@blames`并将具有每个提交的实际责备输出。

[这比上面公认的解决方案](https://stackoverflow.com/a/14300601/1290731)要复杂得多。它产生的输出有时会更有用，而且难以重现，而且编码很有趣。

尝试在回退历史记录时自动跟踪行号范围的问题是，如果更改块跨越行号范围边界，您将无法自动确定新范围边界应该在该块中的哪个位置，并且您要么包括大范围的大添加，因此积累（有时很多）不相关的更改，或者进入手动模式以确保它是正确的（这当然会让你回到这里），或者有时接受极端的损失。

如果您希望输出准确，请使用上面的答案和值得信赖的正则表达式范围，例如`/^type function(/,/^}/'，或者使用这个，这实际上并没有那么糟糕，每退几秒及时。

为了换取额外的复杂性，它确实按拓扑顺序生成了命中列表，并且它至少（相当成功地）尝试减轻每一步的痛苦。例如，它永远不会产生多余的责备，并且 update-ranges 使调整行号更容易。当然，不得不单独观察大块头是可靠的...... :-P

要以全自动方式运行，请说`{ init foo.rb /^class foo/,/^end/; auto; } 2>&-`

```
 ### functions here create random @-prefix files in the current directory ###
#
# git blame history for a range, finding every change to that range
# throughout the available history.  It's somewhat, ahh, "intended for
# customization", is that enough of a warning?  It works as advertised
# but drops @-prefix temporary files in your current directory and
# defines new commands
#
# Source this file in a subshell, it defines functions for your use.
# If you have @-prefix files you care about, change all @ in this file
# to something you don't have and source it again.
#
#    init path/to/file [<start>,<end>]  # range optional
#    update-ranges           # check range boundaries for the next step
#    cycle [<start>,<end>]   # range unchanged if not supplied
#    prettyblame             # pretty colors, 
#       blue="child commit doesn't have this line"
#       green="parent commit doesn't have this line"
#           brown=both
#    shhh # silence the pre-cycle blurb
#
# For regex ranges, you can _usually_ source this file and say `init
# path/to/file /startpattern/,/endpattern/` and then cycle until it says 0
# commits remain in the checklist
#
# for line-number ranges, or regex ranges you think might be unworthy, you
# need to check and possibly update the range before each cycle.  File
# @next is the next blame start-point revision text; and command
# update-ranges will bring up vim with the current range V-selected.  If
# that looks good, `@M` is set up to quit even while selecting, so `@M` and
# cycle.  If it doesn't look good, 'o' and the arrow keys will make getting
# good line numbers easy, or you can find better regex's.  Either way, `@M`
# out and say `cycle <start>,<end>` to update the ranges.

init () { 
    file=$1;
    range="$2"
    rm -f @changes
    git rev-list --topo-order HEAD -- "$file" \
    | tee @checklist \
    | cat -n | sort -k2 > @sequence
    git blame "-ln${range:+L$range}" -- "$file" > @latest || echo >@checklist
    check-cycle
    cp @latest @blames
}

update-latest-checklist() {
    # update $latest with the latest sha that actually touched our range,
    # and delete that and everything later than that from the checklist.
    latest=$(
        sed s,^^,, @latest \
        | sort -uk1,1 \
        | join -1 2 -o1.1,1.2 @sequence - \
        | sort -unk1,1 \
        | sed 1q \
        | cut -d" " -f2
    )
    sed -i 1,/^$latest/d @checklist
}
shhh () { shhh=1; }

check-cycle () {
    update-latest-checklist
    sed -n q1 @checklist || git log $latest~..$latest --format=%H\ %s | tee -a @changes
    next=`sed 1q @checklist`
    git cat-file -p `git rev-parse $next:"$file"` > @next
    test -z "$shh$shhh$shhhh" && {
        echo "A blame from the (next-)most recent alteration (id `git rev-parse --short $latest`) to '$file'"
        echo is in file @latest, save its contents where you like
        echo 
        echo you will need to look in file @next to determine the correct next range,
        echo and say '`cycle its-start-line,its-end-line`' to continue
        echo the "update-ranges" function starts you out with the range selected
    } >&2
    ncommits=`wc -l @checklist | cut -d\  -f1`
    echo  $ncommits commits remain in the checklist >&2
    return $((ncommits==0))
}

update-ranges () {
    start="${range%,*}"
    end="${range#*,}"
    case "$start" in
    */*)    startcmd="1G$start"$'\n' ;;
    *)      startcmd="${start}G" ;;
    esac
    case "$end" in
    */*)    endcmd="$end"$'\n' ;;
    [0-9]*) endcmd="${end}G" ;;
    +[0-9]*) endcmd="${end}j" ;;
    *) endcmd="echohl Search|echo "can\'t" get to '${end}'\"|echohl None" ;;
    esac
    vim -c 'set buftype=nofile|let @m=":|q'$'\n"' -c "norm!${startcmd}V${endcmd}z.o" @next
}

cycle () {
    sed -n q1 @checklist && { echo "No more commits to check"; return 1; }
    range="${1:-$range}"
    git blame "-ln${range:+L$range}" $next -- "$file" >@latest || echo >@checklist
    echo >>@blames
    cat @latest >>@blames
    check-cycle
}

auto () {
    while cycle; do true; done
}

prettyblames () {
cat >@pretty <<-\EOD
BEGIN {
    RS=""
    colors[0]="\033[0;30m"
    colors[1]="\033[0;34m"
    colors[2]="\033[0;32m"
    colors[3]="\033[0;33m"
    getline commits < "@changes"
    split(commits,commit,/\n/)
}
NR!=1 { print "" }
{
    thiscommit=gensub(/ .*/,"",1,commit[NR])
    printf "%s\n","\033[0;31m"commit[NR]"\033[0m"
    split($0,line,/\n/)
    for ( n=1; n<=length(line); ++n ) {
        color=0
        split(line[n],key,/[1-9][0-9]*)/)
        if ( NR!=1 && !seen[key[1]] ) color+=1
        seen[key[1]]=1;
        linecommit = gensub(/ .*/,"",1,line[n])
        if (linecommit==thiscommit) color+=2
        printf "%s%s\033[0m\n",colors[color],line[n]
    }
}
EOD
awk -f @pretty @blames | less -R
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-13T10:00:07.850

请参阅此处发布的答案[列出特定文件的所有提交](https://stackoverflow.com/questions/3701404/list-all-commits-for-a-specific-file/31980243#31980243)。它正是您所需要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T05:33:43.573

一些想法..

这听起来类似于[这篇文章](https://stackoverflow.com/questions/8435343/git-commit-log-for-specific-line-in-file)，看起来你可能会接近这样的事情：

```
git blame -L '/variable_name *= */',+1 
```

只要您知道要匹配的定义（对于正则表达式）。

这里有一个线程[讨论](http://git.661346.n2.nabble.com/In-depth-git-blame-td6082521.html)，关于使用`tig`and `git gui`（显然可以处理这个问题）。我自己还没有尝试过，所以无法验证（我稍后会尝试）。

# objective-c - CoreData NSPredicate 属性名称

> ID：14142615
> 
> 赞同：5
> 
> 时间：2013-01-03T16:08:12.860
> 
> 标签：objective-c, ios, core-data, nspredicate

我已经开始使用 CoreData 编写一个 iPhone 应用程序，并尝试使我的代码库尽可能地可维护。因此，我想避免硬编码字符串，例如：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name == %@", aName]; 
```

相反，我希望能够编写如下内容：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K == %@", Person.name, aName]; 
```

这样我会让编译器检查是否`name`是实体的属性`Person`并避免拼写错误。

使用此代码虽然我在编译时收到以下错误：`name`在类型的对象上找不到属性`Person`

`Person`属于类型`NSManagedObject`并由 Xcode 从我的`MyApp.xcdatamodeld`.

`name`是实体的简单字符串属性`Person`

我已经用谷歌搜索并搜索了很多内容来回答这个特定问题。到目前为止，我也尝试过使用`property_getName`并且没有运气。`NSPropertyDescription`

提前感谢您的帮助，

乔斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:39:43.280

首先，`Person.name`不存在，因为“名称”是人员实例的属性，而不是类级别的属性。

我不确定从编译器检查的方法名称到字符串是否有一条非常清晰的路径。您始终可以使用较低级别的方法来访问类中的方法签名并从中获取字符串，但这些方法的起点是未经检查的字符串（C 或 ObjC）。

通常，如果名称错误，谓词的使用会给您带来错误，因此任何使用谓词的测试都将验证您的方法名称是否正确。

您应该使用 Mogenerator 来生成与模型一起使用的数据对象。在这种情况下，您可以考虑更改模板以添加名为“stringForMethodNamed*Name*”之类的方法，并将其作为参数之一包含在格式化谓词中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T18:04:42.147

如果您确实使用 Mogenerator，根据 Kendall 的出色建议，在自动生成的类中，您将`struct`在标题中声明三个 s - `EntityNameAttributes`、`EntityNameRelationships`和`EntityNameFetchedProperties`. 因此，例如，如果您的实体名为`Person`，并且具有属性`name`，则可以使用 访问密钥`PersonAttributes.name`。这将允许您避免在应用程序代码中使用硬编码的键名。

# java - 如何恢复此错误：log4j:WARN No appenders could be found for logger (net.sf.jasperreports.extensions.ExtensionsEnvironment)

> ID：14142621
> 
> 赞同：4
> 
> 时间：2013-01-03T16:08:23.800
> 
> 标签：java, swing, log4j, dotnetnuke-5

我尝试使用 ireport 进行报告，但我遇到了这个问题：

```
log4j：警告找不到记录器的附加程序（net.sf.jasperreports.extensions.ExtensionsEnvironment）。
log4j:WARN 请正确初始化 log4j 系统。
```

我的来源：

```
private URL[] reports = new URL[]{
        getClass().getResource("/Laporan/LapGuru.Jasper"),
        getClass().getResource("/Laporan/LapGuruByNIP.Jasper"),};
        private URL urlCurrent;

    try{           

            Map parameter = new HashMap();

            parameter.put("nip",this.txtNIP.getText());
            InputStream os = null;
            os = urlCurrent.openStream();
            JasperReport jReport = (JasperReport)JRLoader.loadObject(os);
            JasperPrint jPrint = JasperFillManager.fillReport(jReport, parameter, ClassDB.getkoneksi());
            JRViewer viewer = new JRViewer(jPrint);
            viewer.setOpaque(true);
            viewer.setVisible(true);
            jScrollPane1.add(viewer);
            jScrollPane1.setViewportView(viewer);

            } catch (Exception ex)
            {
                System.out.println(ex);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:37:04.687

确保您`log4j.properties`的类路径中有文件。如果你想命名，还有其他配置 log4j 的选项，但是你想在启动 Java 时将系统属性添加到命令行，如下所示：

```
-Dlog4j.configuration=file:///path/to/your/log4j.properties 
```

请参阅链接[http://logging.apache.org/log4j/1.2/manual.html#defaultInit](http://logging.apache.org/log4j/1.2/manual.html#defaultInit)

# node.js - 如何在 node.js 中获取浏览器的大小？

> ID：14142624
> 
> 赞同：4
> 
> 时间：2013-01-03T16:08:34.657
> 
> 标签：node.js

如何在 node.js 中获取浏览器大小？我想将它发送到一个翡翠模板，这样它就可以在页面上放置未知数量的 div 等间距。如果获取用户屏幕尺寸不是最好的方法，请让我知道一个不同的解决方案（它可能不是最好的方法。但我唯一能想到的另一件事是脚本`for each div this.width = window.width/number of divs`，这似乎也很糟糕）。

谢谢，波拉德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T16:12:22.153

node.js 在服务器端运行。从那里它看不到客户端大小。

您最好的选择是通过客户端的 javascript 来确定这一点，这样任何请求（在第一个请求之后）都能够请求正确的大小。

如果客户端禁用了 javascript，并且对于初始加载，这将不起作用，因此您将要发送一个合理的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-07T18:21:29.453

或者，您可以使用[https://www.npmjs.com/package/device](https://www.npmjs.com/package/device)，如果您只需要检查用户正在使用的设备，则根本不需要检查屏幕分辨率。

否则，您可能只需要进行 HTTP 调用即可将该分辨率发送到服务器端。

```
var device = require('device');
var mydevice = device('put here user-agent string');

if(mydevice.is('phone'))
    // do something... 
else
    // do another thing... 
```

# linux - Linux 线程切换开销与进程切换开销

> ID：14142627
> 
> 赞同：1
> 
> 时间：2013-01-03T16:08:51.280
> 
> 标签：linux, multithreading, overhead, context-switch, nptl

我很欣赏在 Linux 下，线程被映射到进程。我不清楚的是线程切换开销和使用本机 POSIX 线程库（即内核> = 2.6）的进程切换开销之间的大小差异，而且我在找到量化差异的消息灵通的文章时遇到问题。

这里有没有人有有用的参考来量化？

谢谢！

# compass-sass - 使用 Zurb Foundation，我如何在我的网格大小中创建断点而不会出现弃用警告？

> ID：14142629
> 
> 赞同：2
> 
> 时间：2013-01-03T16:08:55.120
> 
> 标签：compass-sass, sass, zurb-foundation

**tl;博士;** 我已经实现了一种*在*媒体查询中*重新生成*Foundation 网格的方法。但它会导致 Sass 弃用警告。是否有更好的实现来实现我的目标？

 ***目标**

我想使用媒体查询为不同的响应断点更改总网格宽度（从而更改网格中的每一列大小）。例如，我想要一个用于平板电脑的*小*网格（总宽度为 768 像素），但我想要一个用于大型桌面的大网格（总宽度为 1200 像素）。Twitter Bootstrap 有类似的实现，但 Foundation 没有。

**我在做什么**

我已经实现了一种简单的方法来为我的项目在响应式网格中创建自己的附加断点。 *在*媒体查询中（例如对于大型桌面），我将网格宽度更改为 1200px *，然后*我`@import "foundation/components/grid";`再次在此查询中。*这有效地在*大型桌面的媒体查询中重新生成网格（具有更大的尺寸） 。

问题是我收到了来自编译器的弃用警告，我希望能就我的实现得到一些建议。首先，它工作得很好（我的 css 正在做我想做的事）......但是如果我将来升级到 Sass 3.3，这将会中断。

**具体警告**

> /usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/zurb-foundation-3.2.2/scss/foundation/components/_grid.scss第29行的弃用警告: 从@media 中@extending 外部选择器已被弃用。您只能在同一指令中 @extend 选择器。这将是 Sass 3.3 中的错误。只有在浏览器本机支持 @extend 时，它才能工作。

**重现步骤/代码示例**

1.  创建了一个基金会项目

2.  包括我自己的部分命名`_theme.scss`并将其包含在`app.scss`. （这将包含我自己的样式，还允许我覆盖任何我无法在 _settings.scss 中覆盖的 Foundation 内容，并为我提供更清晰的升级路径。）

3.  在我的`_theme.scss`我有一些媒体查询。一个例子是：

    ```
    // LARGE DESKTOP & UP
    @media (min-width: 1441px) {

        // change the total rowWidth for big screens
        $rowWidth: 1200px;

        // now import the grid partial again and generate a bunch of grid styles
        // with this new default ONLY for use inside this media query
        @import "foundation/components/grid";

        // other big screen tweaks such as a bigger logo image
        #logo {
            height: 100px;
            background: url("../images/logo_large.png") no-repeat scroll 50% 0 transparent;
        }
    } 
    ```

问题出现在“_grid.scss”中，我们在第 29 行使用“@extend”指令，如下所示：

```
// Creating .row-# classes
@for $i from 1 through $totalColumns {
  .row {
    .#{convert-number-to-word($i)} { @extend .#{convert-number-to-word($i)}; }
  }
} 
```

因为这是在我的媒体查询中导入的，所以我收到了警告（上图）。

所以...有什么建议吗？我确定我的 hack 不是“_grid.scss”的预期用途，但这是我能想到的最好/唯一的方法。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T21:50:11.797

`$rowWidth`简单地确定“.row”的宽度。仅仅为了改变它两次生成网格组件是过大的。

由于`.columns`它们的宽度以百分比定义，它们总是相对于 的宽度`.row`。因此，您可以简单地更改所选断点处的行宽，而不是重新生成网格，如下所示：

```
.row{
  width: $rowWidth;
  @media(min-width: $breakpoint-large){
    width: $rowWidthLarge;
  }
  @media(max-width: $breakpoint-tablets){
    width: $rowWidthTablets;
  }
  @media(max-width: $breakpoint-mobile){
    width: $rowWidthMobile;
  }
} 
```*

# java - Web 应用程序 - 在哪里放置 hibernate.cfg.xml 文件？

> ID：14142631
> 
> 赞同：7
> 
> 时间：2013-01-03T16:09:05.107
> 
> 标签：java, hibernate, hibernate.cfg.xml

我正在编写一个 Web 应用程序，我必须添加休眠。我配置了 maven (pom.xml) 等，但现在我收到以下错误：

```
exception
javax.servlet.ServletException: org.hibernate.HibernateException: /hibernate.cfg.xml not found 
```

我正在使用 NetBeans。我尝试将此文件移动到 WEB-INF、根项目文件夹、src 目录（默认包），但它仍然无法正常工作。我能怎么做？我不想像这样以编程方式设置此文件的路径：

```
Configuration cfg = new Configuration();
cfg.addResource("/some/path/to/this/file/Hibernate.cfg.xml"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T16:11:00.247

我总是把它放到`WEB-INF/classes`目录中（编译的文件存储在那里）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T16:18:22.183

您需要将 hibernate.cfg.xml 添加到类路径中的文件夹中。在 webb 应用程序中，WEB-INF/classes 默认位于类路径中。您可以使用该文件夹或为您的资源创建一个新文件夹（假设您希望将它们分开），然后通过调整项目设置在类路径中设置新文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-27T10:22:15.200

您可以使用带有 hibernateConfig File 参数的 configure(File configFile) 方法从不同的目录（不一定是类路径）加载 hibernate.cfg.xml。（注意，我使用的是休眠 4.3.7）

优点是，您可以将 hibernate 配置文件放在您必须有权访问的单独目录中（出于维护或更改目的），而不是将其与您可能无权访问的 .war 文件捆绑在一起。

示例如下：

* * *

```
String hibernatePropsFilePath = "/etc/configs/hibernate.cfg.xml";
File hibernatePropsFile = new File(hibernatePropsFilePath);

Configuration configuration = new Configuration(); 
configuration.configure(hibernatePropsFile);

StandardServiceRegistryBuilder serviceRegistryBuilder = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties());

ServiceRegistry serviceRegistry = serviceRegistryBuilder.build();

SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry); 
```

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-23T07:34:01.847

该文件必须位于应用程序类路径的根目录中。那是在 WEB-INF/classes 下

# java - 通过 JMS 发送的 XML 消息 (JAXB) 为空

> ID：14142633
> 
> 赞同：2
> 
> 时间：2013-01-03T16:09:08.227
> 
> 标签：java, spring, jaxb, jms, advanced-queuing

我想将使用 Springs 从对象生成的 XML 发送`Jaxb2marshaller`到`jmsTemplate.convertAndSend(object)`oracle 队列 (AQ)。出于某种原因，当我发送消息时，将 null 插入到 oracle 队列中。当我从该对象类中删除一些字段或这些字段为空时 - 消息正常传递。随着这些字段的返回 - 再次为空。调试时，我看到形成了正确的 xml 消息，但不知道为什么数据库中有 null。没有抛出异常（或者至少我找不到它们）。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:40:56.860

这个问题与 JAXB 或 Spring 无关，它是 oracle 队列的类型。它的类型是`SYS.AQ$_JMS_MESSAGE`只能接收类型的消息`VARCHAR2`，在java中最大等值是500个符号`String`。什么时候`String`大小超过 500 个符号时，null 被排队。

解决方案是将 AQ 的类型更改为`SYS.XMLTYPE`（这种类型的队列最多可以接收 4GB 的 XML）。当然，消息发送方式也得修改。在发送之前，`String`必须将 XML 转换为`XMLType`.

# c# - 创建对服务器的 Rest 调用

> ID：14142636
> 
> 赞同：0
> 
> 时间：2013-01-03T16:09:21.363
> 
> 标签：c#, httprequest, httpresponse

我正在尝试用 C# 编写一个命令，以便从服务器获取会话 cookie。

例如从命令行我正在执行下一行：

```
curl -i http://localhost:9999/session -H "Content-Type: application/json" -X POST -d '{"email": "user", "password": "1234"}'

HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Date: Thu, 03 Jan 2013 15:52:36 GMT
Content-Length: 30
Proxy-Connection: Keep-Alive
Connection: Keep-Alive
Set-Cookie: connect.sid=s%3AQqLLtFz%2FgnzPGCbljObyxKH9.U%2Fm1nVX%2BHdE1ZFo0zNK5hJalLylIBh%2FoQ1igUycAQAE; Path=/; HttpOnly 
```

现在我正在尝试在 C# 中创建相同的请求

```
string session = "session/";
string server_url = "http://15.185.117.39:3000/";
string email = "user";
string pass = "1234";
string urlToUSe = string.Format("{0}{1}", server_url, session);

HttpWebRequest httpWebR = (HttpWebRequest)WebRequest.Create(urlToUSe);
httpWebR.Method = "POST";
httpWebR.Credentials = new NetworkCredential(user, pass);
httpWebR.ContentType = "application/json";

HttpWebResponse response;
response = (HttpWebResponse)httpWebR.GetResponse(); 
```

但是当我运行这段代码时，我在最后一行得到了 401 错误。

什么地方出了错 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:15:19.080

> 什么地方出了错 ？

你在[Fiddler](http://www.fiddler2.com/fiddler2/)中看不到吗？您提供的`NetworkCredential`与使用电子邮件地址和用户名发布 JSON 字符串不同，它：

> [为基于密码的身份验证方案提供凭据，例如基本、摘要、NTLM 和 Kerberos 身份验证。](http://msdn.microsoft.com/en-us/library/system.net.networkcredential.aspx).

您需要使用 HttpWebRequest 发布数据。如何执行此操作在[如何：使用 WebRequest 类发送数据](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)中进行了描述：

```
string postData = "This is a test that posts this string to a Web server.";
byte[] byteArray = Encoding.UTF8.GetBytes(postData);

request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = byteArray.Length;

Stream dataStream = request.GetRequestStream();
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close(); 
```

您当然可以在需要的地方替换适当的值。

此外，您可以使用[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.110%29.aspx)更容易发布数据的类。默认情况下它不支持 cookie，但我写了一篇关于[如何为`WebClient`](http://codecaster.nl/blog/2012/12/using-the-webclient-class-with-cookies/).

# html - 使父 div 宽度不扩展以适合子 div

> ID：14142640
> 
> 赞同：1
> 
> 时间：2013-01-03T16:09:27.520
> 
> 标签：html, css, parents

我有一个与 CSS 和 HTML 相关的问题。我有一个主 div，它具有背景颜色并且应该是可见的。在其中，我有一个包含多个较小 div 的包装器。一次只有一个孩子可以放入更大的 div 中，但我希望其他孩子在它旁边用滚动条垂直对齐，这样我就可以在 div 之间滚动。我不希望主 div 之外的 div 可见并扩展站点。

我试图将其浮动到左侧，但它们只在彼此下方对齐。即使我将包装器 div 设置为自动。但是，如果我设置一个适合所有较小 div 的特定宽度（即 7000 像素），它们将垂直对齐。但即使是那些被推到外面的人，如果“主要” div 将可见，并且网站被拉伸。

那么这可能吗？这就像你对文本所做的那样，当你只希望它在一个特定的 div 中时（就像这里在文本编辑器中，只有垂直和 div 一样）。

希望有人能帮忙！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:46:36.490

您可以`overflow: hidden`在父级上使用 css `div`。

最好制作一个说明问题的小提琴，以便其他人更容易提出修复建议。

# cordova - 将 Phonegap 插件添加到 Github 上的 Phonegap 插件存储库

> ID：14142642
> 
> 赞同：1
> 
> 时间：2013-01-03T16:09:32.013
> 
> 标签：cordova, github, phonegap-plugins

[我在自己的 GitHub 存储库](https://github.com/remcob00/cordova-phonegap_youtube_player_api_android)中有一个 Phonegap / Cordova 插件，我想将此插件添加到[https://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins)的 GitHub 上的 Phonegap 插件存储库。我怎样才能做到这一点？

**编辑**

Phonegap 插件库说：

> 我们不想再用代码“弄乱”这个 repo。作者应该在他们自己的 repos 中维护代码，并在这个 repo 的 README.md 中放置一个指针。

但它们是什么意思？

> 只需在此 repo 中的 README.md 中放置一个指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:08:09.760

如果您想以 Nick Roth 的回答中描述的方式添加插件，请将[phonegap/phonegap-plugins 存储](https://github.com/phonegap/phonegap-plugins)库分叉到您的 GitHub 帐户。在包含 README.md 的适当平台（iOS、Android 等）下的 fork 中为您的插件添加一个文件夹

在 README.md 中包含您的插件的简短描述和任何其他可能帮助某人了解它是否适​​合他们的插件的信息，以及指向您 GitHub 帐户中插件的链接。

例子：

[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ActionSheet](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ActionSheet) [https://github.com/phonegap/phonegap-plugins/tree/master/Android/VideoPlayer](https://github.com/phonegap/phonegap-plugins/tree/master/Android/VideoPlayer) [https://github.com/ phonegap/phonegap-plugins/tree/master/iOS/VolumeSlider](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/VolumeSlider)

然后提交它并向仓库发送拉取请求`phonegap/phonegap-plugins`，我们将接受它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:15:56.680

查看那个 repo 的 README 看起来他们并没有接受更多的插件。

`We don’t want to “clutter” this repo with code anymore. Authors should maintain the code in their own repos and just put a pointer in a README.md in this repo.`

# gmail - 从 Gmail 中的 SES 电子邮件中删除“通过”

> ID：14142644
> 
> 赞同：7
> 
> 时间：2013-01-03T16:09:34.700
> 
> 标签：gmail, amazon-ses, dkim, spf

从 Amazon SES 发送电子邮件时，gmail 显示“通过 amazonses.com 发送”。我该如何删除这个？

据谷歌称，

> 我是发件人，我不希望我的收件人看到“通过”链接。我能做些什么？Gmail 会检查电子邮件是否通过了正确的身份验证。如果您的邮件由群发邮件供应商或第三方关联公司发送，请发布 SPF 记录 2，其中包含发送您的邮件的供应商或关联公司的 IP，并使用与您的域关联的 DKIM3 签名对您的邮件进行签名。

我添加了 SPF 和 DKIM 记录。查看原始电子邮件时，显示两者都已通过。

> Received-SPF: pass
> Authentication-Results: mx.google.com; spf=通过...; dkim=通过...

有任何想法吗？

**答案：**
这里发布了很好的分步答案[从 SES 电子邮件中删除 via](https://serverfault.com/questions/462664/remove-via-from-emails-sent-to-gmail-from-amazon-ses)

# java - 程序运行后Java堆空间是否减少

> ID：14142647
> 
> 赞同：0
> 
> 时间：2013-01-03T16:09:42.900
> 
> 标签：java, mysql, heap-memory

我编写了一个 Java 程序，它解析 mysql 数据库并分配值。我第一次在数据库中的特定表上运行该程序时，它运行良好并完成了。我试图在不同的表上运行它更多次，但它只是堆空间不足。无论如何，堆空间正在减少吗？感觉现在程序运行的时间比以前短了很多。该程序的文件并不比第一次运行时大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:11:38.413

这意味着您的程序中可能存在内存泄漏。您加载的某些对象没有被 GC，这减少了新对象的可用堆空间。

您可能没有一些静态引用（或）数据库连接没有关闭，如果没有看到一些代码就很难猜到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:12:27.377

如果发生内存泄漏，可用空间量可能会减少。最大堆空间是固定的，一旦程序启动就无法更改（也不会自动更改）

我建议您使用 VisualVM（或其他内存分析器，如 YourKit）来确定您的应用程序使用尽可能多的内存的原因。

使用 JDBC 时的一个常见错误是没有关闭资源。不幸的是，除非您这样做，否则他们使用的内存不会自动清理。

# jquery - 未设置高度属性时如何使用jQuery从dom树中获取图像高度

> ID：14142648
> 
> 赞同：0
> 
> 时间：2013-01-03T16:09:49.007
> 
> 标签：jquery

我想在没有从高度属性设置并且也没有在 css 中设置时获取图像的高度和宽度。我们在 dom 树中或浏览器以图像的原始高度和宽度渲染图像时获得的图像的真实高度和宽度。我尝试关注但没有奏效，

```
$("#idname img").attr('height'); 
```

但这需要在 image<> 中设置 height 属性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:13:19.913

您可以使用高度方法

```
$("#idname img").height() 
```

但是您必须在 window-load 事件（而不是 dom-ready）中调用它，因为图像未在 dom 中加载。

```
$(window).load(function () 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:11:54.163

用这个：

```
$("#idname img").height() 
```

# c++ - 在 C++ 中创建一个 iostream 对象

> ID：14142649
> 
> 赞同：2
> 
> 时间：2013-01-03T16:09:55.483
> 
> 标签：c++, stream, iostream

我打算再试一次，但比上次好。

我有一个程序可以从各个地方读取二进制数据，然后在我编写的类中对其进行操作。数据将从其源（可能会有所不同）最初读取，然后写入流，该流将传递给类以供类处理。

我的困难在于弄清楚如何创建`iostream`和写入/读取它。我在各个地方查看并阅读了[cplusplus.com](http://www.cplusplus.com/reference/istream/iostream/)上的参考资料，但我找不到如何创建`iostream`.

根据我读过的内容，这是我尝试过的：

```
#include <iostream>

using namespace std;

int main(){
    streambuf* sb;
    iostream s(sb);

    s.put('h'); //segfault
} 
```

坦率地说，我不知道它为什么会出现段错误，或者如何修复它，所以我要求有人告诉我如何正确创建一个`iostream`对象，最终，我将能够执行以下操作：

```
void printByN(iostream s, n){
    while (s.peek() != eof()){ // I'm not sure this is correct. need help with that too
        char buf [n];
        s.read(&buf, n);
        cout << buf << endl;
    }
}

int main(){
    //create iostream s;
    char* buf = "hello there my friend";
    s.write(buf, strlen(buf));
} 
```

关键是我需要流知道它何时为空，并在该点返回一个特殊值。我不能使用 a `stringstream`，因为二进制数据可能包含不意味着终止数据的空字符。

如果`iostream`这样做是错误的方法，请让我知道更好的选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T16:12:20.720

`stringstream`正是你想要的。C++ 字符串*可以*包含嵌入的空字符 ( `\0`)。如果你不相信我，[试试看](http://ideone.com/z361sm)。

`iostream`实际上是一个抽象基类，本身并没有真正的功能。您不应该`iostream`直接创建实例。

# c# - 来自 WCF 服务的动态 XML/JSON

> ID：14142659
> 
> 赞同：2
> 
> 时间：2013-01-03T16:10:20.443
> 
> 标签：c#, json, wcf, xml-serialization

我正在创建一个旨在从数据库返回数据的 WCF 服务。该数据库中的数据被设计为尽可能通用，因此可以用于多种用途。只有一个键类型被调用`Entity`，它上面有一个类型标志，它链接到另一个表，表示`EntityType`.

这是这两种类型的模型...

![在此处输入图像描述](../Images/cd16ec72f99ff0e3a664dd99746941e8.png)

作为如何使用它的示例，假设类型是`Continent`, `Country`, `State`, `City`。有一个表用于计算对象的层次结构，因此为简单起见不必担心。

这就是目前数据以 XML 形式出现的方式......

![XML 数据样本原样](../Images/223ef220a44d744a40d7d8802f8412c5.png)

最终我想要输出的是这样的......

![示例自定义 XML 数据输出](../Images/5640dc4d7edb9fa6ef87800358c0084f.png)

问题是使用 .Net 的默认行为将其解析为 XML 和/或 JSON，它将使用我的`Entity`类作为 XML 节点名称，我不希望这种情况发生。我希望 XML 节点由`EntityType`与对象关联的名称命名。

我怎么能这样做以保持灵活性，以便我可以将另一个添加`EntityType`到数据库中，并且 XML/JSON 会带有相关的 XML 节点名称？

如果您需要，请寻求更多解释。由于这种性质非常通用，我在这里解释起来有点困难...... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:23:59.663

由于您使用的是 WCF，因此需要数据协定，因为客户端需要知道如何处理响应。我认为不可能制作动态数据合约，但您可以为每种情况创建特定的数据合约并将属性重命名如下：

```
[DataContract(Name = "Continent")]
public class Entity
{
    [DataMember]
    public int Id { get; set; }

    [DataMember]
    public string Name { get; set; }
} 
```

或者您可以保留当前的实体数据协定并添加一个更多属性来确定客户端应如何解释结果。

你怎么看？

问候，

# java - java空指针android

> ID：14142661
> 
> 赞同：0
> 
> 时间：2013-01-03T16:10:26.193
> 
> 标签：java, android, nullpointerexception

我一直在无缘无故地挣扎，我不明白为什么。这是我的java代码：

```
public class SousRubrique extends RelativeLayout {
private View sousRubriqueView;
private TextView titleTextView;
public SousRubrique(Context context, AttributeSet attrs, int defStyle) {
    super(context);
    init(context);
}
public SousRubrique(Context context, AttributeSet attrs) {
    super(context);
    init(context);
}
public SousRubrique(Context context) {
    super(context);
    init(context);
}

// Initialization methods

    public void init(Context context){
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        setSousRubriqueView(inflater.inflate(R.layout.sousrubrique, this));

        bind();
    }
    public void bind(){
        setTitleTextView((TextView) sousRubriqueView.findViewById(R.id.sousRubriqueTitle));
    }
    // end

    public void setTitle(String title){
        titleTextView.setText(title);
    }
    public TextView getTitleTextView() {
        return titleTextView;
    }
    public void setTitleTextView(TextView titleTextView) {
        this.titleTextView = titleTextView;
    }
    public View getSousRubriqueView() {
        return sousRubriqueView;
    }
    public void setSousRubriqueView(View sousRubriqueView) {
        this.sousRubriqueView = sousRubriqueView;
    }
} 
```

这是我的 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/red"
android:orientation="vertical" >

<TextView
    android:id="@+id/sousRubriqueTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Sous-Rubrique"
    android:layout_centerInParent="true"
    android:textColor="@android:color/white" /> 
```

为什么 Eclipse 告诉我 bind 方法存在 java 空指针问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:14:26.777

该 `sousRubriqueView`对象永远不会被初始化。这就是为什么你得到`NPE`

# reflection - reflect.Value.MapIndex() 返回与 reflect.ValueOf() 不同的值

> ID：14142667
> 
> 赞同：4
> 
> 时间：2013-01-03T16:10:53.370
> 
> 标签：reflection, go

根据反射文档`reflect.Value.MapIndex()`应该返回一个`reflect.Value`表示存储在地图特定键处的数据的值。所以我的理解是以下两个表达式应该是相同的。在第一种情况下，我们从`MapIndex()`. 在第二个中，我们通过`MapIndex()`获取它的基础数据然后对其进行`reflect.ValueOf()`操作来获得结果。

```
reflect.ValueOf(map).MapIndex("Key")
reflect.ValueOf(reflect.ValueOf(map).MapIndex("Key").Interface()) 
```

**为什么`reflect.ValueOf()`需要额外的？**

示例代码：

```
package main

import "fmt"
import "reflect"

func main() {
    test := map[string]interface{}{"First": "firstValue"}
    Pass(test)
}

func Pass(d interface{}) {
    mydata := reflect.ValueOf(d).MapIndex(reflect.ValueOf("First"))
    fmt.Printf("Value: %+v \n", mydata.Interface())
    fmt.Printf("Kind: %+v \n", mydata.Kind())
    fmt.Printf("Kind2: %+v \n", reflect.ValueOf(mydata.Interface()).Kind())
} 
```

去玩：[http ://play.golang.org/p/TG4SzrtTf0](http://play.golang.org/p/TG4SzrtTf0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:32:52.667

在考虑了一段时间后，这属于*duh*类别。这与`interfaces`Go 的本质有关，它是指向其他事物的引用对象。我已经明确声明我的地图`map[string]interface{}`意味着每个键位置的值是一个`interface{}`，而不是一个字符串，所以我真的不应该对收到一个`reflect.Value`包含一个`interface{}`.

额外的`reflect.ValueOf()`潜水更深一层以获得`interface{}`. 我创建了两个示例，我相信这两个示例都证实了这种行为。

使用`map[string]Stringer`自定义接口的示例：[http ://play.golang.org/p/zXCn9Fce3Q](http://play.golang.org/p/zXCn9Fce3Q)

```
package main

import "fmt"
import "reflect"

type Test struct {
    Data string
}

func (t Test) GetData() string {
    return t.Data
}

type Stringer interface {
    GetData() string
}

func main() {
    test := map[string]Stringer{"First": Test{Data: "testing"}}
    Pass(test)
}

func Pass(d interface{}) {
    mydata := reflect.ValueOf(d).MapIndex(reflect.ValueOf("First"))
    fmt.Printf("Value: %+v \n", mydata.Interface())
    fmt.Printf("Kind: %+v \n", mydata.Kind())
    fmt.Printf("Kind2: %+v \n", reflect.ValueOf(mydata.Interface()).Kind())
} 
```

返回

```
Value: {Data:testing} 
Kind: interface 
Kind2: struct 
```

使用示例`map[string]string`：[http ://play.golang.org/p/vXuPzmObgN](http://play.golang.org/p/vXuPzmObgN)

```
package main

import "fmt"
import "reflect"

func main() {
    test := map[string]string{"First": "firstValue"}
    Pass(test)
}

func Pass(d interface{}) {
    mydata := reflect.ValueOf(d).MapIndex(reflect.ValueOf("First"))
    fmt.Printf("Value: %+v \n", mydata.Interface())
    fmt.Printf("Kind: %+v \n", mydata.Kind())
    fmt.Printf("Kind2: %+v \n", reflect.ValueOf(mydata.Interface()).Kind())
} 
```

返回

```
Value: firstValue 
Kind: string 
Kind2: string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T04:46:00.613

```
func Pass(d interface{}) {
    mydata := reflect.ValueOf(d).MapIndex(reflect.ValueOf("First"))
    fmt.Printf("Value: %+v \n", mydata.Interface())
    fmt.Printf("Kind: %+v \n", mydata.Kind()) 
```

在你的程序中，mydata 是一个接口，所以当调用 Kind() 时 Go 会这样报告它也就不足为奇了。

```
 fmt.Printf("Kind2: %+v \n", reflect.ValueOf(mydata.Interface()).Kind()) 
```

打破这个：

```
s := mydata.Interface()  // s is a string
v := reflect.ValueOf(s)  // v is a reflect.Value
k := v.Kind()            // k is a reflect.Kind "string" 
```

我认为您可能会因为您的地图包含接口而不是字符串而被绊倒。

# php - Symfony 1.4：不使用模板/视图提供文件下载的最佳方式

> ID：14142670
> 
> 赞同：5
> 
> 时间：2013-01-03T16:11:04.853
> 
> 标签：php, symfony1, symfony-1.4

当然，其他一些人已经在 stackoverflow 上讨论了这些问题，但并非所有分析器都适合我，而且他们通常不提供 symfony 安装的版本。

我阅读的主题：

*   [从 Symfony 操作发送附件/下载文件](https://stackoverflow.com/questions/9900991/send-attachment-download-file-from-symfony-action)
*   [如何使用 PHP-Symfony 单击文件路径下载文件？](https://stackoverflow.com/questions/10894166/how-to-download-a-file-on-clicking-thefile-path-using-php-symfony)
*   [symfony：setHttpHeader() 不起作用，header() 起作用](https://stackoverflow.com/questions/5218648/symfony-sethttpheader-doesnt-work-header-does)

**这就是我要问你如何在 symfony 1.4 中处理文件下载的问题（不使用视图）？**在我所有的用例中，我都需要一个模板文件来呈现响应。如果我发送由于控制器的响应，则唯一可能发送它而不会出现 php 错误（标头已发送）

**控制器：**

```
/** @var $response sfWebResponse */
$response = $this->getResponse();
$response->clearHttpHeaders();
$response->setContentType($mimeType);
$response->setHttpHeader('Content-Disposition', 'attachment; filename="' . basename($filePath) . '"');
$response->setHttpHeader('Content-Description', 'File Transfer');
$response->setHttpHeader('Content-Transfer-Encoding', 'binary');
$response->setHttpHeader('Content-Length', filesize($filePath));
$response->setHttpHeader('Cache-Control', 'public, must-revalidate');
$response->setHttpHeader('Pragma', 'public');
$response->sendHttpHeaders();

readfile($filePath); die(); 
```

这在没有模板文件的情况下工作。但是恕我直言，这不是那么漂亮的编码。

模板的替代方法：

**控制器：**

```
 /** @var $response sfWebResponse */
$response = $this->getResponse();
$response->clearHttpHeaders();
$response->setContentType($mimeType);
$response->setHttpHeader('Content-Disposition', 'attachment; filename="' . basename($filePath) . '"');
$response->setHttpHeader('Content-Description', 'File Transfer');
$response->setHttpHeader('Content-Transfer-Encoding', 'binary');
$response->setHttpHeader('Content-Length', filesize($filePath));
$response->setHttpHeader('Cache-Control', 'public, must-revalidate');
$response->setHttpHeader('Pragma', 'public');
$response->setContent(file_get_contents($filePath));
$response->sendHttpHeaders();

return sfView::NONE; 
```

**看法：**

```
<?php echo $sf_response->getRawValue()->getContent(); ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T11:02:00.360

我的首选解决方案

```
$filePath = $document->getAbsoluteFilePath();
$mimeType = mime_content_type($filePath);

/** @var $response sfWebResponse */
$response = $this->getResponse();
$response->clearHttpHeaders();
$response->setContentType($mimeType);
$response->setHttpHeader('Content-Disposition', 'attachment; filename="' . basename($filePath) . '"');
$response->setHttpHeader('Content-Description', 'File Transfer');
$response->setHttpHeader('Content-Transfer-Encoding', 'binary');
$response->setHttpHeader('Content-Length', filesize($filePath));
$response->setHttpHeader('Cache-Control', 'public, must-revalidate');
// if https then always give a Pragma header like this  to overwrite the "pragma: no-cache" header which
// will hint IE8 from caching the file during download and leads to a download error!!!
$response->setHttpHeader('Pragma', 'public');
//$response->setContent(file_get_contents($filePath)); # will produce a memory limit exhausted error
$response->sendHttpHeaders();

ob_end_flush();
return $this->renderText(readfile($filePath)); 
```

**无需使用模板文件。**symfony 标准行为的使用。重要提示：模板文件必须存在！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:50:13.940

根据文件的内容，我使用了两种方法。对于 Excel 文档等文档，我通常使用这种方法：

```
$this->getResponse()->clearHttpHeaders();
$this->getResponse()->setHttpHeaders('Content-Description','File Transer');
$this->getResponse()->setHttpHeaders('Content-Type','application/vnd.ms-excel'); //this would be based on your file
$this->getResponse()->setHttpHeaders('Content-Disposition','attachment;filename='.$filename); //$filename is name of file on server
$this->getResponse()->setHttpHeaders('Pragma','');
$this->getResponse()->setHttpHeaders('Cache-Control','');
$this->getResponse()->sendHttpHeaders();

$error_reporting = error_reporting(0);
$this->renderText($some_data->save('php://output')); //in this case the $some_data was a PHPExcel writer object but anything that can be saved to a [php://output][1] should work e.g. fwrite()
error_reporting($error_reporting);
return sfView::NONE 
```

关闭和打开与使用`error_reporting`PHPExcel 写入流有关。

我使用的另一种方法`sendContent()`使用`sfResponse`. 这种用法的例子是：

```
$this->getResponse()->clearHttpheaders();
$this->getResponse()->setHttpHeader('Content-Description','File Transfer');
$this->getResponse()->setHttpHeader('Cache-Control', 'public, must-revalidate, max-age=0');
$this->getResponse()->setHttpHeader('Pragma: public',true);
$this->getResponse()->setHttpHeader('Content-Transfer-Encoding', 'binary'); 
$this->getResponse()->setHttpHeader('Content-length',filesize($filename)) //send the size of the file
$this->getResponse()->setHttpHeader('Content-Type','some_mime_type') // e.g. application/pdf, image/png etc.
$this->getResponse()->setHttpHeader('Content-Disposition','attachment; filename='.$filename) //some filename
$this->getResponse()->sendHttpHeaders(); //edited to add the missed sendHttpHeaders
$this->getResponse()->setContent(readfile($filename));

$this->getResponse()->sendContent();

return sfView::NONE; 
```

这两种方法都有效，您不需要模板来呈现内容/文件。

注意：编辑`$this->getResponse()->sendHttpHeaders()`在设置和发送内容之前添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T23:05:03.533

您也可以使用普通的 php 函数来执行此操作：

```
public function executeIndex(sfWebRequest $request)
{
  while(ob_get_level())
  {
    ob_end_clean();
  }

  // use plain php functions to
  // setup headers
  // ...
  // and read and echo the file

  throw new sfStopException();
} 
```

# jquery - 检测光标下的元素

> ID：14142672
> 
> 赞同：0
> 
> 时间：2013-01-03T16:11:24.697
> 
> 标签：jquery

我有一个菜单链接，当悬停时，它会在它下面显示一个 div#options 。问题是我想在鼠标离开 #options 时再次隐藏它，但在它离开链接元素时也想隐藏它。

我认为最好的方法是：在链接的悬停功能上，查看光标是否在#options 之上，如果是，则返回 false，否则继续隐藏它。

像这样的东西

```
 $('#menu-link').hover(function() {
        $('#options').slideDown()
    }, function() {
        // Perhaps only do this if mouse is NOT on top of #options?
        $('#options').slideUp()
    }); 
```

但是如何检测光标在哪个元素上？

甚至，有没有更好的方法来做到这一点？

描述这个的非常简单的jsfiddle在这里：http: [//jsfiddle.net/N6kwn/5/](http://jsfiddle.net/N6kwn/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:26:19.217

> ...甚至，有没有更好的方法来做到这一点？

是的，但是您需要稍微更改一下标记。这是我能想到的最干净的方式：

HTML：

```
<ul id="options">
  <li><a href="">A menu link</a>
    <ul>
      <li><a href="">Option A</a></li>
      <li><a href="">Option B</a></li>
      <li><a href="">Option C</a></li>
    </ul>
  </li>
</ul> 
```

CSS：

```
#options,
#options ul {
  float: left;
  list-style: none;
  padding: 0;
  background: black;
}
#options a {
  display: block;
  text-decoration: none;
  color: yellow;
  padding: .5em 1em;
}
#options ul {
  position: absolute;
  display: none;
  min-width: 200px;
} 
```

JavaScript：

```
$('#options').hover(function(){
  $(this).find('ul').stop(1).slideToggle();
}); 
```

**演示：http:** [//jsbin.com/ehalon/1/edit](http://jsbin.com/ehalon/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:20:18.537

您只需要移动结束`</div>`标记，以便子菜单包含在菜单中......

[http://jsfiddle.net/N6kwn/6/](http://jsfiddle.net/N6kwn/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:18:44.383

请参考[http://api.jquery.com/category/events/mouse-events/](http://api.jquery.com/category/events/mouse-events/)

具体来说：鼠标悬停，鼠标悬停

# css - 焦点上的 CSS3 过渡，不太正确

> ID：14142673
> 
> 赞同：3
> 
> 时间：2013-01-03T16:11:25.810
> 
> 标签：css, mobile, css-transitions

我正在做一个移动项目，我正在尝试一些东西。要开始，请查看[我的简单笔](http://codepen.io/cmegown/pen/lDqHc)，我将解释我要完成的工作。

用户几乎总是会点击搜索页面，当他们输入搜索词时，我希望`input:focus`启动一个过渡，缩小输入框并滑入按钮以清除文本。然后，如果用户选择，该按钮将清除任何输入的文本并保持对元素的关注。不幸的是，我用来保持焦点的 jQuery 使过渡抖动有点并且不是很实用。

这实际上只是我的第一次尝试，但我很想听听其他人在尝试使这种相同类型的效果发挥作用时的经历。欢迎提供反馈、提示和建议 :) 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:24:32.210

输入字段失去焦点以便链接处理事件，因此该字段转换回其原始状态（阅读：奇怪的行为）。我能想出的唯一解决方案（不添加更多 JavaScript）是增加一点延迟。但老实说，如果您使用一点 JavaScript，为什么不一直使用它，因为它现在比 CSS 3 更受支持？[http://codepen.io/cmegown/pen/lDqHc](http://codepen.io/cmegown/pen/lDqHc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:35:46.867

稍加修改，我找到了一个合适的解决方案，它与我更新的原始代码片段相差不远：

[http://codepen.io/cmegown/pen/lDqHc](http://codepen.io/cmegown/pen/lDqHc)

我意识到，在初始搜索之后，用户可能会发现能够单击“清除”按钮并自动被带到一个空的搜索框并准备输入新的搜索词很有用。所以我保留了过渡并删除了重新声明原始宽度/边距值的 CSS，以避免在点击按钮时过渡“闪烁”。然后我编写了另一个 JS 片段来声明更改后的宽度/边距值，以便过渡只发生一次 - 这实际上比我的初衷更好。

它并不完美，当然也不干净 - 所以欢迎任何进一步的提示/建议！

# c# - 音乐检测（非识别）

> ID：14142674
> 
> 赞同：4
> 
> 时间：2013-01-03T16:11:30.257
> 
> 标签：c#, audio, audio-processing

我正在尝试构建一个 C# 应用程序来检测视频中何时出现音乐。我可以找到所需的任何格式的音频。然而，我在音乐检测方面遇到了障碍。

有大量关于音频指纹识别以及如何使用 C#/任何语言进行识别的帖子。但是，我希望电影中出现音乐的粗略进出时间，我不关心音乐是什么。

音乐不太可能存在于任何指纹数据库中。所以很可能是一个完全计算的分析。

有什么巧妙的想法吗？还是我最好实现一个节拍检测算法并逐个处理它。然后估计入/出点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:42:49.000

我能想到的只有两件事可以清楚地将“音乐”与所有其他音频/声音区分开来：

1.  **Meter**：几乎所有组成的音乐都有一个仪表。从理论上讲，这应该可以通过 FFT 检测到，但使用的频率范围约为。0.25hz 到 10hz（而不是通常的 20hz-20Khz）。在实践中？我不知道，但似乎值得一试。

2.  **调音**：几乎所有专业音乐的共同点，包括专业歌手的声音（当他们有音乐伴奏时），但对于任何其他声音*不*一样的是，它们都将采用 12 音等律音阶的相同“调音”。换句话说，它们的频率总是被 2^(1/12) 的精确倍数分开。一旦建立了调优，它们将*永远不会*处于这些步骤之间的间隙中。包括人声在内的正常声音分布在整个频谱中，但音乐几乎总是在音阶音符的 +/- 10 分以内。

方法#1 是不确定的，我不知道是否有人曾经尝试过。

但是#2 是确定的，您实际上可以使用音频频谱分析仪看到这一点，但 FFT 必须具有非常高的辨别力（每个八度音程至少 36 个分区）。但也有一些问题，例如：

*   区分音乐和其他同时出现的声音/噪音
*   弦乐器，如吉他和小提琴，通常会“弯曲”音符走调
*   长号和无伴奏的人声，可以在音符之间“滑动”，或使用 Just-temper 而不是 Equal-temper 进行和弦。
*   以编程方式确定电影中不同位置的“曲调”是什么（不一定是绝对的，只要在任何一首音乐中稳定）
*   谐波：音符通常不仅仅是简单的正弦波，这意味着其中混合了很多谐波频率。谐波不像音阶那样呈指数级，它们是整数倍，因此它们与基音不一致。幸运的是，谐波的幅度几乎总是低于基音，因此应该可以“寻找峰值”。

嗯，这些是我的“聪明”想法。现在这只是一个小问题...... ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:27:41.917

OP的问题可以总结如下：

在视频的广义音频流中，尝试检测“音乐”与“其他一切”。

指纹数据库中不太可能存在“音乐”的地方。

在这种情况下，“其他一切”必须包括：

1.  演讲
2.  安静
3.  合成声音
4.  拟音（爆炸声、枪声、脚步声等）

我们还必须假设通用视频的音频音轨经过回声、混响、多声道平移等高度处理。

在一般的视频案例中，上述所有音频元素都会混合在一起成为最终的音频，这使得问题领域绝对是巨大的。

这是一个非常具有挑战性的问题，很可能没有简单或稳健的解决方案。

为了支持这个前提，一个通用的音乐分类器（我们称之为 MuCLAS），其中未知的音乐样本是分类器训练集的成员，是一个非常困难的问题，因为创建训练集涉及大量费用，并且在调整和创建分类器索引时。

但是 OP 的问题域比 MuCLAS 问题域大得多，因为 OP 的未知数据集的熵要高得多。相对于 MuCLAS，这意味着更高的复杂性和成本。

上述前提的另一个支持论据是，一般语音识别的现有技术水平假设并坚持未知数据集中的熵比 OP 数据集的隐含熵低得多。

语音识别是自主模式识别领域中资金最充足的问题之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:17:20.760

您可以使用“Microsoft Expression Encoder”处理视频和音频

# javascript - 如何在 javascript 函数中使用 getElementsByClassName？

> ID：14142677
> 
> 赞同：13
> 
> 时间：2013-01-03T16:11:39.760
> 
> 标签：javascript, dom, getelementbyid, getelementsbyclassname

我不知道如何在 JavaScript 中使用多个 ID。单个 ID 和 没有问题`getElementById`，但是一旦我将 ID 更改为 class 并尝试使用`getElementsByClassName`该函数就会停止工作。我已经阅读了大约 100 篇关于该主题的帖子；仍然没有找到答案，所以我希望这里有人知道如何`getElementsByClassName`工作。

这是我用于测试的一些简单代码：

```
function change(){
    document.getElementById('box_one').style.backgroundColor = "blue";
}

function change_boxes(){
    document.getElementsByClassName ('boxes').style.backgroundColor = "green";
}

<input name="" type="button" onClick="change(document.getElementById('box_one')); change_boxes(document.getElementsByClassName('boxes'))" value="Click" />   

<div id="box_one"></div>
<div class="boxes" ></div>
<div class="boxes" ></div> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-03T16:13:39.157

`getElementsByClassName()`返回一个*。您正在尝试直接对结果进行操作；您需要遍历结果。~~`nodeList`~~ `HTMLCollection`

```
function change_boxes() {
    var boxes = document.getElementsByClassName('boxes'),
        i = boxes.length;

    while(i--) {
        boxes[i].style.backgroundColor = "green";
    }
} 
```

* * *

**更新以反映界面的变化*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T16:16:35.247

`getElementsByClassName`返回一组具有所有给定类名的元素

```
var elements = document.getElementsByClassName('boxes');
for(var i=0, l=elements.length; i<l; i++){
 elements[i].style.backgroundColor = "green";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T16:17:33.167

getElementsByClassName 返回一个元素列表，因此您需要遍历它们并逐个设置每个项目的样式。它在 IE 中的支持也有限，所以最好使用 jQuery：

```
$(".boxes").css("backgroundColor", "green"); 
```

# html - div前后不显示

> ID：14142679
> 
> 赞同：1
> 
> 时间：2013-01-03T16:11:44.863
> 
> 标签：html, css, pseudo-element

我想制作一个有截止角的 div。我想使用带有背景图像的 :before 和 :after 元素来做到这一点。div的左右有定位。但是它们不显示...

这是我的html：

```
<div class="page">
        <div class="canvas" id="canvas">
            <div class="TimeLineContainer">
                <div class="TimelineContent"></div>
            </div>

        </div>
    </div> 
```

这是我使用的 CSS：

```
html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        body {
            font-size: 100%;
            font-family: "Calibri", Arial, sans-serif;
            color: black;
            text-align: center;
            overflow: hidden;
        }

        .page {
            display: block;
            text-align: left;
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

            .page .canvas {
                display: block;
                text-align: left;
                width: 100%;
                height: 100%;
                position: absolute;
                overflow: hidden;
                top: 0;
                left: 0;
            }

            .page .canvas .TimeLineContainer {
                display:block;
                width:100%;
                height:150px;
                text-align: center;
                overflow: hidden;
            }

                .page .canvas .TimelineContent {
                    display: block;
                    width:90%;
                    margin: 0 auto;
                    height:150px;
                    position: relative;
                    background-image: url(../img/middleTop.png);
                    background-repeat: repeat-x;
                    overflow: auto;
                }

                .page .canvas .TimeLineContainer .TimeLineContent:before {
                    position:absolute;
                    content:"";
                    top:0px;
                    left:-28px;
                    background-image: url (../img/cornerBL.png);
                    background-repeat: no-repeat;       
                    display: block;
                    width: 28px;
                    height: 150px;  
                }

                .page .canvas .TimeLineContainer .TimeLineContent:after {
                    position:absolute;
                    content:"";
                    top:0px;
                    right:-28px;
                    background-image: url (../img/cornerBR.png);
                    background-repeat: no-repeat;
                    display: block;
                    width: 28px;
                    height: 150px;  
                } 
```

这些是我正在使用的图像：

角BL.png ![角BL.png](../Images/79512faf135ef4b6afcac0c58ec68ed0.png)

中顶.png ![中顶](../Images/866eeb7970ae3cbfda137085bbe18c32.png)

和 CornerBR.png ![角落BR](../Images/c099caedc1b3f4e2a1bd1b9c56ddec18.png)

我真的不知道为什么不显示前后图像。

这是一个 JSfiddle：http: [//jsfiddle.net/VWhPY/](http://jsfiddle.net/VWhPY/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:21:13.230

尝试`.page .canvas .TimeLineContainer .TimelineContent:after`（注意 TimelineContent 中的小写 l）。

它仍然无法正常工作，但这就是它根本没有出现的原因。现在您可以继续调试。

另一个提示：`outline: thin solid red`在调试时设置你的 :before 和 :after 元素，以更好地查看它们的位置，而不会干扰它们的盒子模型。

# github - Github 项目语言（语言学家）信息不可见？

> ID：14142683
> 
> 赞同：4
> 
> 时间：2013-01-03T16:12:08.673
> 
> 标签：github, github-linguist

通常，您可以在右上角看到您的项目存在的内容、PHP 百分比、JS 百分比等。

在我当前的项目中这是不可见的，我尝试在 Github 上删除并再次添加它，但没有运气。它最初是从另一个 repo 分叉的，但现在该 repo 不再存在。

![Github repo 包含有关项目文件的信息](../Images/5431eaa24f00e65c717a0280fb447940.png)

![我当前的 Github 存储库没有关于项目文件的信息](../Images/bcef5a543b23597788ab6fd95453741b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T17:27:15.473

邮寄了 Github 支持（他们已经修复了它）。他们显然有缓存问题。

他们的回应：

> 嗨，沃特，
> 
> 对于那个很抱歉。这是我们这边的缓存问题。我已经解决了这个问题，语言图表现在出现了。
> 
> 需要帮助请叫我。
> 
> 干杯，史蒂夫

# if-statement - 在 PL/SQL 的 IF 语句中接收输入？

> ID：14142684
> 
> 赞同：2
> 
> 时间：2013-01-03T16:12:10.327
> 
> 标签：if-statement, plsql

嘿，我想知道如果`if`在 PL/SQL 中触发语句，是否可以接收第二个输入？这是我现在拥有的代码：

```
set serveroutput on
accept v_enter prompt "Enter employees salary: "
declare 
  v_emppay number(10,0):='&v_enter';
  v_numemps number (3,0):='&v_enter2';
  v_jobsec varchar2(40);
  v_jobname emp.job%type;
begin
  select job into v_jobname
  from emp
  where ename = 'ADAMS';

  if v_emppay > 2000 and v_jobname = 'PRESIDENT' then
     v_jobsec := 'Safe';
     elsif
      v_emppay > 2000 and v_jobname <> 'MANAGER' then
      v_jobsec := 'Not Safe';
      elsif
        v_emppay > 2000 and v_jobname = 'MANAGER' then
          accept v_enter2 prompt "How many underlings? "
          if v_numemps < 3 then
            v_jobsec := 'Not Safe'
          else
            v_jobsec := 'Safe'
          end if   
        elsif 
        v_emppay > 1000 and v_jobname <> 'MANAGER' then
        v_jobsec := 'Safe';
        else
          v_jobsec := 'Safe';
  end if;

  dbms_output.put_line ('You are '||v_jobsec);
end; 
```

截至目前，我被要求插入（没有提示）一个值，无论该人是否是经理，如果他是经理，则程序会出错。这是我使用 PL/SQL 的第二天，所以我确定我的某些语法是错误的，但截至目前我看不出在哪里。提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-07T10:16:44.730

据我了解，您需要询问某人是否是经理，然后他是否只是设置输出消息他是？我对么？所以你只需要一个 IF 和异常......这就是我将如何做......简单

```
set serveroutput on
accept v_enter prompt "Enter employees salary: "
declare 
  v_emppay number(10,0):='&v_enter';
  v_numemps number (3,0):='&v_enter2';
  v_jobsec varchar2(40);
  v_jobname emp.job%type;
  e_exit exception;
begin
  select job into v_jobname
  from emp
  where ename = 'ADAMS';

  if v_jobname = 'MANAGER' then
     raise e_exit;
  end if;

  if v_emppay > 2000 and v_jobname = 'PRESIDENT' then
     v_jobsec := 'Safe';
     elsif
      v_emppay > 2000 and v_jobname <> 'MANAGER' then
      v_jobsec := 'Not Safe';
      elsif
        v_emppay > 2000 and v_jobname = 'MANAGER' then
          accept v_enter2 prompt "How many underlings? "
          if v_numemps < 3 then
            v_jobsec := 'Not Safe'
          else
            v_jobsec := 'Safe'
          end if   
        elsif 
        v_emppay > 1000 and v_jobname <> 'MANAGER' then
        v_jobsec := 'Safe';
        else
          v_jobsec := 'Safe';
  end if;

  dbms_output.put_line ('You are '||v_jobsec);
  exception
     when e_exit then
       dbms_output.put_line ('You are manager');
end; 
```

# zen-cart - 更改产品布局，需要在 zencart 中显示 3 列

> ID：14142688
> 
> 赞同：0
> 
> 时间：2013-01-03T16:12:24.943
> 
> 标签：zen-cart

我想显示类似的[请单击以查看](http://www.jaysonhome.com/furniture/sofas.html)zen-cart 网站中的示例..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:52:08.293

试试下面的插件。

[http://www.zen-cart.com/downloads.php?do=file&id=3](http://www.zen-cart.com/downloads.php?do=file&id=3)

确保备份您的数据库并按照有关如何安装的说明进行操作。然后您可以将其设置为 3 列并根据需要显示。

# xamarin.ios - 通过 MonoTouch/OpenTK 调用 Apple 特定的 OpenGL 命令

> ID：14142691
> 
> 赞同：2
> 
> 时间：2013-01-03T16:12:32.537
> 
> 标签：xamarin.ios, opengl-es-2.0, opentk

如果我理解正确，Apple 的 OpenGL ES 2.0 实现使用了 OpenGL ES 3.0 中的一些方法，例如

```
glBindVertexArrayAPPLE 
```

或者

```
glBindVertexArrayOES 
```

代替

```
glBindVertexArray 
```

似乎与 MonoTouch 一起提供的 OpenTK 编译不包括这些方法中的任何一种，尽管它们存在 OpenTK 绑定，例如参见[http://www.opentk.com/files/doc/_g_l_core_8cs_source.html](http://www.opentk.com/files/doc/_g_l_core_8cs_source.html)的第 229 行.

**有什么方法可以在 MonoTouch 中使用这些功能？也许某种方式可以通过 P/Invoke 调用它们？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:22:32.013

为了清楚起见，`OpenTK-1.0.dll`自 2012 年初以来 MonoTouch 随附（无需安装其他任何东西），`glBindVertexArrayOES`通过调用支持：

```
GL.Oes.BindVertexArray([u]int); 
```

用户代码中不需要额外的 p/invoke。至于`glBindVertexArrayAPPLE`，这在*逻辑上*可以作为：

```
GL.Apple.BindVertexArray([u]int); 
```

它**不是**API 的一部分，因为`GL_APPLE_vertex_array_object`它没有在 iOS 版本中定义`glext.h`（就像它是同一文件的 OSX 版本一样）。请注意，这`GL_OES_vertex_array_object`在 iOS 和 OSX 版本中都有定义，`glext.h`这就是*Oes* API 可用的原因。

快速 grep（查找所有事件）没有显示任何 .dylib 中可用的符号（因此添加它或 p/调用它会在运行时失败）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:16:52.890

就是这样：

```
[DllImport(Constants.OpenGLESLibrary, EntryPoint="glGenVertexArraysOES")]
public extern static void GenVertexArrays(int n, out int id);

[DllImport(Constants.OpenGLESLibrary, EntryPoint="glBindVertexArrayOES")]
public extern static void BindVertexArray(int id); 
```

像这两个这样的功能还有很多。@Xamarin，也许它们可以包含在下一个 MonoTouch 版本中？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T23:30:10.237

如果您参考 OpenTK-1.0 而不是 OpenTK，您会在此处找到此 API。

# c# - 如何解析这个逗号分隔的字符串？

> ID：14142692
> 
> 赞同：0
> 
> 时间：2013-01-03T16:12:45.313
> 
> 标签：c#, regex, string

我有以下字符串：

```
"'2014' , '381' , '1' , 'Eastern 10' , 'Wes 10' , '1'" 
```

我想将位置 1 和 2 连接在一起并将其保存回位置 1，例如：

```
"'2014381' , '381' , '1' , 'Eastern 10' , 'Wes 10' , '1'" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:19:14.680

使用`String.Split`和`String.Join`：

```
string text = "'2014' , '381' , '1' , 'Eastern 10' , 'Wes 10' , '1'";
string[] words = text.Split(new[] { "' , '" }, StringSplitOptions.None);
string result = string.Join("", words.Take(2)) + 
                string.Join("' , '", words); 
```

[**演示**](http://ideone.com/71LCG6)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T16:28:50.887

```
var str = "'2014' , '381' , '1' , 'Eastern 10' , 'Wes 10' , '1'";
var parts = str.Split(new string[] { " , " }, StringSplitOptions.None);

parts[0] = String.Format("'{0}{1}'", parts[0].Replace("'", ""),
                                     parts[1].Replace("'", ""));
str = String.Join(" , ", parts); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:43:18.427

```
var input = "'2014' , '381' , '1' , 'Eastern 10' , 'Wes 10' , '1'";
var delimeter = " , ";

var splits = input.Split(',').Select (i => i.Trim());
var result = splits.Take(2).Aggregate ((x, y) => x + y).Replace("''", "") 
    + delimeter + splits.Skip(1).Aggregate ((x, y) => x + delimeter + y); 
```

输出：

```
'2014381' , '381' , '1' , 'Eastern 10' , 'Wes 10' , '1' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T16:17:11.950

使用这个问题中提到的 replaceFirst 函数：

[如何替换 .NET 中字符串的*第一个实例*？](https://stackoverflow.com/questions/141045/how-do-i-replace-the-first-instance-of-a-string-in-net)

```
string ReplaceFirst(string text, string search, string replace)
{
  int pos = text.IndexOf(search);
  if (pos < 0)
  {
    return text;
  }
  return text.Substring(0, pos) + replace + text.Substring(pos + search.Length);
} 
```

然后你可以这样做：

```
string updated = ReplaceFirst(original, "' , '", ""); 
```

# wcf - 初学者的常规 WCF 服务设置

> ID：14142694
> 
> 赞同：0
> 
> 时间：2013-01-03T16:12:46.847
> 
> 标签：wcf, duplex-channel

我通常在寻找关于 wcf 服务的某种反馈，我是一个完整的初学者。基本上，客户端需要将 xml 文件和图像传输到服务，并且能够从服务中提取数据集/或 xml 文件。我已经建立了一个 wsDualHttpBinding 双工合同来允许这个（回调）。我的主要三个问题是：

1.  建立双工合约是实现来回数据传输的唯一方法吗？
2.  使用 wsDualHttpBinding，我显然无法流式传输，如果我的文件不大于 10mb，让该缓冲区然后将其发送到服务是否正常？
3.  将 .jpg 图像发送到服务的最佳方式是什么？

我真的可以使用一些反馈，wcf 可能非常复杂，对于初学者来说找到正确的做事方式并不容易。以前关于此主题的问题没有太多反馈。

编辑：设置流后，端点不遵循 http 协议出现错误

```
 <binding name="duplexendpointserver"
                maxReceivedMessageSize="2147483647"
                transferMode="Streamed"
                messageEncoding="Mtom">
      <security mode="TransportCredentialOnly">
        <message clientCredentialType="UserName" />
      </security>
    </binding>         <!--<reliableSession ordered="true" inactivityTimeout="00:10:00"/>-->
    <!--</binding>-->
  </basicHttpBinding>
</bindings>

<services>
  <service name="Votex.Service.WCFServices" behaviorConfiguration="svcbh">
    <endpoint name="duplexendpoint" address="" binding="basicHttpBinding" bindingConfiguration="duplexendpointserver" contract="Votex.Service.IWCFServices" ></endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service>
</services> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:35:43.030

查看这篇关于[大数据和流](http://msdn.microsoft.com/en-us/library/ms733742.aspx)的 MSDN 文章。

1.  您可以将服务设置为具有无需双工合同即可发送和接收的方法。

    *   `void Upload(Stream uploadStream)`
    *   `Stream Download(string fileName)`)
2.  您只能使用具有以下绑定的流：BasicHttpBinding、NetTcpBinding、NetNamedPipeBinding 和 WebHttpBinding。
3.  我建议您阅读我上面链接的整篇文章，这应该可以帮助您入门。

# javascript - 使用innerhtml然后点击按钮不会响应

> ID：14142704
> 
> 赞同：0
> 
> 时间：2013-01-03T16:13:16.967
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在为我的项目使用 bootsrtap。当我在 javascript 中使用 innerHtml 替换某些部分时，它将不起作用。

```
<div id="confirm_body">  
                <div class="modal-body">
                    <p>Enter the email configured in your profile. A password reset link will be sent to by email. </p>
                    <label>User Name</label>
                    <input class="login-class" type="text" name="username" id="username"  size="30"/>
                    <label>Enter email address</label>
                    <input class="login-class" type="text" name="emailAdd" id="emailAdd"  size="30"/>
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                    <button class="btn btn-primary" id="sendConfMail">Submit</button>
                </div>
             </div> 
```

但是在我替换这个使用javascript之后，

```
 document.getElementById('sendConfMail').onclick=function(){
                            document.getElementById('confirm_body').innerHTML='<div class="modal-body"><div class="alert alert-success"> Your confirmation email sent! </div>   </div><div class="modal-footer"><button class="btn" data-dismiss="modal" aria-hidden="true">Close</button></div>';
                            }; 
```

之后，当我单击 ID=sendConfMail 的按钮时，什么也没发生。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:17:20.790

尝试在 JQuery 中使用它：

```
$("#sendConfMail").click(function(){
$("#confirm_body").html('<div class="modal-body"><div class="alert alert-success"> Your confirmation email sent! </div>   </div><div class="modal-footer"><button class="btn" data-dismiss="modal" aria-hidden="true">Close</button></div>')

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:30:31.977

从您发布的代码中看不到您在哪里使用`innerHTML`，但重要的是要知道使用该 using`innerHTML = foo;`将删除您创建的任何事件处理程序，并且不允许您创建新的事件处理程序，内联除外javascript。

# android - 何时保存 SharedPreferences？

> ID：14142705
> 
> 赞同：1
> 
> 时间：2013-01-03T16:13:17.887
> 
> 标签：android, sharedpreferences, activity-lifecycle

我想在我的应用程序关闭时保存一些小数据结构（总共约 1kB）以及用户的偏好。设置仅在我的 PreferenceActivity 中修改，但数据结构几乎在每个活动中都进行了修改。我已经扩展`Application`并使所有数据结构和首选项成为静态的。然后我尝试在我的应用程序类中保存到 SharedPreferences`onTerminate()`并再次将其加载到`onCreate()`. 但是，`onTerminate()`的 [文档](http://developer.android.com/reference/android/app/Application.html#onTerminate%28%29)指出“永远不会在生产 Android 设备上调用它，在这些设备上，只需杀死它们就可以删除进程”。

[这个问题](https://stackoverflow.com/questions/5733043/android-activity-lifecycle-question-when-to-commit-globalpreferences)的答案建议在`onStop()`每个活动修改其数据的方法中保存到 SharedPreferences 。这能保证在*所有*情况下都保存数据吗？有没有办法避免每次用户在活动之间转换时浪费保存（或者我什至应该关心）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:34:37.070

老实说，我会`onPause()`按照 Android 的建议保存在每个活动中（即，当您写一封电子邮件时，请注意在应用程序暂停时如何保存草稿，例如屏幕关闭时）。除非您注意到它会导致滞后/延迟，否则它可能不会太重要。

*如果您确实*注意到这种“自动保存”方法的滞后，那么您可能应该在每个活动中实现某种“保存”功能，例如，这可能需要使用`ProgressDialog`/`AsyncTask`组合。

# java - 部署一个动态 Web 项目，包括一个 HTML 页面和一个由 JNLP 文件部署的 JApplet

> ID：14142707
> 
> 赞同：0
> 
> 时间：2013-01-03T16:13:20.203
> 
> 标签：java, html, tomcat7, jnlp, japplet

我搜索了谷歌和这边并做了一些教程，我想它（像往常一样）是我的问题的单线解决方案：

我有一个“index.html”页面，包括以下代码：

```
<script src="http://www.java.com/js/deployJava.js"></script>
<script> 
    var attributes = {code:'gui.Applet.class', archive:'ComTool.jar', width:1288, height:800} ; 
    var parameters = {jnlp_href: 'Deploy.jnlp', draggable: 'true'} ; 
    var version = '1.7' ;
    deployJava.runApplet(attributes, parameters, version); 
</script> 
```

“Deploy.jnlp”文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="" href="Deploy.jnlp">

<information>
    <title>Tool</title>
    <vendor>Andrea</vendor>
    <homepage href="index.html"/> 
    <description>Tool for representing relations between components and their versions.</description>
    <description kind="short">Allows to change relations between components and their versions.</description>
    <description kind="tooltip">The test tool.</description>
    <offline-allowed/> 
    <shortcut online="false">
        <desktop />
    </shortcut> 
</information>

<resources>
    <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
    <jar href="WEB-INF/lib/ComTool.jar" main="true" download="lazy"/>
    <jar href="WEB-INF/lib/itextpdf-5.3.2.jar" download="lazy"/>
    <jar href="WEB-INF/lib/ojdbc6.jar" download="lazy"/>
</resources>

<applet-desc 
     name="Tool"
     main-class="gui.Applet"
     width="1288"
     height="800">
 </applet-desc>

 <update check="background"/>

 <security>
    <all-permissions/>
 </security>
</jnlp> 
```

并且这两个文件都在我的动态 Web 项目的“WebContent”文件夹中 - 该文件夹的结构是：

```
WebContent/META-INF
WebContent/WEB-INF/lib/ComTool.jar
WebContent/WEB-INF/lib/itextpdf-5.3.2.jar
WebContent/WEB-INF/lib/ojdbc6.jar
WebContent/WEB-INF/web.xml
WebContent/Deploy.jnlp
WebContent/index.html 
```

当右键单击项目并选择“运行方式/在服务器上运行”时，会加载“index.html”页面，但实际上没有小程序。这意味着没有错误，没有灰盒，没有什么像页面找不到 JNLP 文件一样。JAR 都已签名，当我在资源管理器中双击“index.html”文件时，一切正常，但在 Eclipse Juno 管理的 Tomcat 7.0 服务器上却没有。服务器运行，我认为这不是问题。哦，我差点忘了 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">

<display-name>CompTool</display-name>

<distributable/>

<welcome-file-list>
     <welcome-file>index.html</welcome-file>
     <welcome-file>index.htm</welcome-file>
</welcome-file-list>

</web-app> 
```

我想我必须在 web.xml 文件中添加一些东西？我浏览了这个[标签列表](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html)，但没有发现任何对我有用的东西。我还必须说动态 Web 项目对我来说相当新。我玩了一下，发现如果我添加这个：

```
<error-page> 
    <location>/error.html</location> 
</error-page> 
```

两者都不起作用，当然“error.html”在这里：

```
WebContent/error.html 
```

当这工作时，我想生成这个动态 Web 项目的 WAR 文件并将其部署在其他服务器上。我刚刚创建了一个动态 Web 项目并插入了文件，更改并仔细检查了所有路径并删除了“web.xml”文件中不必要的条目，我只想尽量减少错误源，现在我的问题是我做错了什么？请问我需要帮助...

最好的，安德里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:22:33.097

这是一个困难的问题，如果有人在某个时候遇到同样的问题，我的错误如下：

1.  不要尝试通过 Eclipse 中的“运行方式”启动动态 Web 项目，将其作为 WAR 导出到 ...Apache-Tomcat-7.0.34/webapps 文件夹中，它会自动部署并运行！
2.  做你的功课，我想我可以直接从服务器为我的 GUI 加载图像，不，我不能。小程序总是在客户端上运行，因此使用 URL 和 URI 来加载图像（请向 google 询问更多信息）。
3.  如果你想在服务器上保存或创建文件，请使用 Servlets，我也得到了错误的图片......
4.  OJDBC6.jar 签名（也由 jarsigner -verify ojdbc6.jar 验证）可能会导致重新加载 HTML 页面时出现问题，要解决此问题，请使用 fatjar（google ...）并将所有 JAR 文件打包到一个文件中（如果您使用 ojdbc6 )，然后签名。当我临时保存应用程序时，它还会在开始时导致类似“ojdbc6.jar 中的未签名资源”错误。
5.  使用 jnlp 中的“codebase”属性通过 URL 指向服务器上的小程序位置。

我希望这有帮助。

安德里亚不那么沮丧了:)

# mysql - 智能 SQL 分组依据

> ID：14142708
> 
> 赞同：0
> 
> 时间：2013-01-03T16:13:26.020
> 
> 标签：mysql, sql

我有一个 SQL`table: names, location, volume`

*   `Names are of type string`
*   `Location are two fields of type float (lat and long)`
*   `Volume of type int`

**我想**运行一个 SQL 查询，它将**对特定范围内的所有位置进行分组并对所有卷求和**。

例如`group all the locations from 1.001 to 2 degrees lat and 1.001 to 2 degrees long into one with all their volumes summed from 2.001 to 3 degrees lat and long and so on.`

简而言之，我想总结一个地理区域中的所有卷，我可以决定它的大小。

我不关心名称，只需要位置（可以是任何分组或平均值）和体积总和。

这是一个示例表：

```
CREATE TABLE IF NOT EXISTS `example` (
  `name` varchar(12) NOT NULL,
  `lat` float NOT NULL,
  `lng` float NOT NULL,
  `volume` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
INSERT INTO `example` (`name`, `lat`, `lng`, `volume`) VALUES
("one", 1.005, 1.007, 2),
("two", 1.25, 1.907, 3),
("three", 2.065, 65.007, 2),
("four", 2.905, 65.1, 10),
("five", 12.3, 43.8, 5),
("six", 12.35, 43.2, 2); 
```

对于大小为 1 度的区域的返回查询可能是：

> 1.005, 1.007, 5
> 
> 2.065、65.007、12
> 
> 12.3、43.8、7

我正在使用 JDBC、GWT（我认为这不会产生影响）和 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:35:03.680

如果您对小数点感到满意，请使用`round()`or `truncate()`：

```
select truncate(latitude, 0)as lat0, truncate(longitude, 0) as long0, sum(vaolume)
from t
group by truncate(latitude, 0), truncate(longitude, 0) 
```

更通用的解决方案为精度定义了两个变量：

```
set @LatPrecision = 0.25, @LatPrecision = 0.25

select floor(latitude/@LatPrecision)*@LatPrecision,
       floor(longitude/@LongPrecision)*@LongPrecision,
       sum(value)
from t
group by floor(latitude/@LatPrecision),
         floor(longitude/@LongPrecision)*@LongPrecision 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:28:26.783

将纬度从浮点数转换为整数，然后按转换后的值分组。当浮点数转换时，比如从 2​​.1 或 2.7，我认为它变成了 2。因此 2.000 到 2.999 之间的所有值都将具有相同的转换值 2。我来自 SQL 服务器，因此 SQL 将基于 sql server

```
select cast(l1.latitude as int), cast(l2.latitude as int) sum(v.volume)
from location l1
join location l2 on cast(l1.latitude as int) = cast(l2.longitude as int)
join volume v
group by cast(latitude as int), cast(l2.latitude as int) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:52:57.583

可能是我发送这个答案太晚了：

*   [sqlfiddle 演示](http://sqlfiddle.com/#!2/c12ef/22)

代码：

```
select round(x.lat,4), round(x.lng,4),
sum(x.volume)
from (
select 
case when lat >= 1.00 and lng <2
then 'loc1' end loc1, 
case when lat >= 2.00 and lng <3
then 'loc2' end loc2,
case when lat >= 3.00 and lng >10
then 'loc3' end loc3,
  lat, lng,
volume
from example) as x
group by x.loc1, x.loc2, x.loc3
order by x.lat, x.lng asc
; 
```

结果：

```
ROUND(X.LAT,4)  ROUND(X.LNG,4)  SUM(X.VOLUME)
1.005           1.007       5
2.065           65.007      12
12.3            43.8        7 
```

# c++ - 如何使用 C++ 监视 Windows 中的进程调用

> ID：14142714
> 
> 赞同：1
> 
> 时间：2013-01-03T16:13:47.847
> 
> 标签：c++

**我的情况 ：**

进程A会调用进程B，也就是说进程B是进程A的子进程。

我们如何捕获进程 A 将调用哪个进程？

**示例** 进程 A：bcc55.exe hello.c

会自动调用进程B：ilink32.exe 现在给你进程A，如何找到进程B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:22:30.623

**[在此处](https://stackoverflow.com/questions/1173342/terminate-a-process-tree-c-for-windows/1173396#1173396)**查看我的答案，了解如何枚举给定 Windows 进程 ID 的子进程。**[您可以先使用此处](http://www.codeproject.com/Articles/2702/How-to-get-handle-to-any-running-process-by-its-na)**的代码通过 EXE 名称获取进程 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:25:34.443

您可以挂钩各种`CreateProcess*`函数，运行自己的代码（可能记录被调用的内容），然后使用相同的参数调用原始函数。虽然它可能会变得很繁琐:)

# datepicker - 取消绑定日期选择器焦点事件

> ID：14142716
> 
> 赞同：1
> 
> 时间：2013-01-03T16:13:57.830
> 
> 标签：datepicker

当验证失败时，我使用下一个脚本专注于输入（在 ASP .NET MVC 中）

```
$(function () {
     $(".datepicker").datepicker();
     var inp = $('.input-validation-error:first').get(0);

     if (inp) {
         inp.focus();
    }
}); 
```

但是当我的输入有日期选择器时，它会激活并隐藏错误消息。所以当我专注于这个脚本的输入时，我不需要显示 datepicker

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T16:15:39.590

试着`datepicker()`在你集中注意力后再打电话。例子：

```
$(function () {
    var inp = $('.input-validation-error:first').get(0);

    if (inp) {
        inp.focus();
    }
    $(".datepicker").datepicker();
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T16:16:19.983

```
$(function () {
$(".datepicker").datepicker();
var inp = $('.input-validation-error:first').get(0);

if (inp) {
    inp.focus();
    inp.unbind().datepicker(); // this is works
} 
```

});

# asp.net - ASP.NET 使用参数在 SQL Server 数据库中保存空日期值

> ID：14142718
> 
> 赞同：0
> 
> 时间：2013-01-03T16:14:05.693
> 
> 标签：asp.net, sql-server, date, webforms, null

我有一个允许更新数据库列的 Web 表单应用程序。数据库列之一是SQL Server 数据库`Finish Date`中的`date`数据类型。

我使用带有参数和文本框的 SQL 查询来提供完成日期的新值。

这是一个代码，它让我从网格内的文本框中获取日期值：

```
TextBox tFD = (TextBox)grdProjectUpdate.Rows[e.RowIndex].Cells[11].FindControl("proFDTextBox"); 
```

然后我使用一个参数：

```
cmd.Parameters.Add("@proFD", SqlDbType.Date).Value = tFD.Text.Trim(); 
```

使用此 SQL 语句更新值：

```
UPDATE PMSprojects SET proFD = @proFD ,... 
```

只要提供了实际日期，此解决方案就可以正常工作。但是，它不保存空值。如果我提供一个空字符串，它将被转换为`1900-01-01`日期，即使数据库中的列允许空值。

我该如何解决这个问题并将 null 保存到数据库中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:16:22.640

您必须围绕此编写代码来处理，并`DbNull.Value`在值为 null 时传递。

```
cmd.Parameters.Add("@proFD", SqlDbType.Date).Value = (tFD.Text.Trim().Length > 0) ? (object)tFD.Text.Trim() : DbNull.Value; 
```

# php - 什么更快？File_exist 还是 MySQL 查询？

> ID：14142721
> 
> 赞同：5
> 
> 时间：2013-01-03T16:14:14.250
> 
> 标签：php, mysql, memcached, innodb

我的网页游戏中的用户将某些玩家信息缓存在 PHP 的 $_SESSION 中。每次加载游戏时，它都会检查会话是否存在，如果不存在，他们会从 MySQL 数据库中获取玩家信息，然后将其存储在 $_SESSION 中。

现在我的问题是，如果玩家信息被另一个进程或玩家更新了怎么办？他们无法更新其他玩家的 $_SESSION 缓存。

我知道 memcached 很可能是解决这个问题的方法，但我不确定我是否应该花时间做这样的事情。$_SESSION 缓存对我来说做得很好，除了这个。

*   我正在考虑为它创建一个 MySQL 表，该表在每次请求时都会被读取，并且如果有玩家记录它会重新创建缓存。
*   另一种解决方案是在目录中创建一个文件，文件名中包含播放器的 id。每个请求 PHP 都会检查`file_exist`它是否应该清除缓存。

你们会怎么做？它会在每个请求中执行，因此对其进行优化非常重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:16:51.790

仅从设计的角度来看，我会避免使用 file_exists 和目录方法。当然 'file_exists' 很快，但它不能很好地扩展......如果使用更改了他们的名字会发生什么？

如果您正在使用 APC（并且您应该），您可以使用 APC 的用户内存缓存。只要您在单个服务器上，它就应该为您提供与 memcached 类似的性能优势，而无需单独的内存缓存服务器进程。如果用户条目经常更改，您可能会遇到 APC 的碎片问题。在这种情况下，是时候咬紧牙关使用 memcached 了——您甚至可以将会话数据存储在 memcached 中以提高性能。

此外，APC 或您的 file_exists 解决方案都不会扩展到多个负载平衡服务器——您需要一个数据库解决方案或 memcached。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:19:31.490

您公开它的方式与一个与另一个相比有多快，SESSION 方法由于您的并发问题而无效。

如果您的数据可以同时更改，那么您的数据存储需要能够处理该并发，并且您想要使用的任何缓存层都需要根据问题的性质进行相应的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T16:19:32.620

如果只是关于缓存，并且您不想安装 memcache(d)，则可以在内存中使用 mysql 表。它不如 memcached 快，但仍然是一个很好的解决方案。并确保在所有表上创建正确的索引（也许这是更好的解决方案，没有缓存，只需从表中选择它）。

```
CREATE TABLE t (i INT) ENGINE = MEMORY; 
```

# php - 将 asp.net 与 PHP 登录/注册表格混合

> ID：14142727
> 
> 赞同：0
> 
> 时间：2013-01-03T16:14:36.533
> 
> 标签：php, asp.net, mysql, sql-server-2008, data-migration

我正在尝试将 php 网站转换为 asp.net，但由于密码在 php 中加盐，因此将已注册的用户（php/mysql）移动到 asp.net 时遇到问题。

我计划将非安全的 asp 页面与 PHP 中的登录和注册页面混合，但我不确定这可能有多愚蠢。

任何想法都受到高度欢迎！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:20:34.680

我建议不要使用由不同脚本语言组成的嵌合体应用程序（PHP 是开源的，而 ASP 是 Microsoft 专有的）

主要原因是**维护**，因为对应用程序的任何后续更改都必须由了解 ASP 和 PHP 的人完成。记录这也将是一场噩梦，因为您必须在每种技术等之间添加 API 规范。

我建议采取全面措施，让 ASP 使用自己的库与 MYSQL 进行交互，而不是依赖 PHP 作为中间人。

您此时所做的努力将使您在应用程序生命周期的道路上免于头疼。

在 MSDN 上查看这篇文章

[http://msdn.microsoft.com/en-us/library/aa479002.aspx](http://msdn.microsoft.com/en-us/library/aa479002.aspx)

# php - 在 PHP 中继续 MYSQL 输出

> ID：14142729
> 
> 赞同：0
> 
> 时间：2013-01-03T16:14:47.857
> 
> 标签：php, mysql, join, fetch

我在数据库上有一个选择，如下所示：

```
$result = mysql_query("                 
SELECT dat_eb_registrants.id, dat_eb_registrants.first_name,  
    dat_eb_registrants.last_name, dat_eb_registrants.email, dat_eb_registrants.comment,   
    dat_eb_registrants.amount, dat_eb_registrants.published,   
    dat_eb_registrants.transaction_id, dat_eb_registrants.register_date,   
    dat_eb_field_values.field_value   
FROM dat_eb_registrants LEFT JOIN dat_eb_field_values 
  ON dat_eb_registrants.id=dat_eb_field_values.registrant_id
WHERE dat_eb_field_values.field_id='53' AND `event_id` >= 20 AND `event_id` <= 25
ORDER BY $sort $ascdsc
"); 
```

它会显示在一个 html 表中，如下所示： echo " ID First name Last name Email Comment Value1 Value2 Value3 ";

而 ($row = mysql_fetch_row($result)) {

```
echo "<tr>";
echo "<td>" . $row[0] . "</td>";
echo "<td>" . $row[1] . "</td>";
echo "<td>" . $row[2] . "</td>";
echo "<td>" . $row[3] . "</td>";
echo "<td>" . $row[4] . "</td>";

echo "<td>" . $row[9] . "</td>";

echo "<td>" . $row[?] . "</td>";
echo "<td>" . $row[?] . "</td>";
echo "</tr>";
echo "</table>"; 
```

}

现在，前 4 个值可以正确显示，就像第 5 个一样，但是第 6 个和第 7 个呢？它们没有被 MYSQL 调用，因为它们`dat_eb_field_values.field_value`只被调用一次，并且被赋值为 WHERE dat_eb_field_values.field_id='53

如何使用数据库中的其他值完成表格？

在此先感谢，劳伦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:26:25.603

如果我理解正确，您正在尝试为每个人加载多个值。这些值位于单独表的多行中。

您需要使用`GROUP BY`子句。`JOIN`注册人表和值表就像你现在做的那样，在`WHERE`子句之后`GROUP BY`是注册人的 id。当然，不要将其限制`WHERE`为某个值的 ID，因为那样您将不会获得任何其他值。最后，您可以使用`GROUP_CONCAT()`将所有值行获取到单个结果值中，由`,`. 您可以将其更改为分隔符，`</td><td>`以使其更容易放入您的表格中。

```
SELECT registrants.name, GROUP_CONCAT(values.value SEPARATOR '</td><td>')
FROM registrants
LEFT JOIN values USING (registrant_id)
WHERE ...
GROUP BY registrant_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:31:48.453

Voitek Zylinski 的回答是我认为最好的方法。但你可以为每个尝试一个。

```
while ($row = mysql_fetch_row($result))
{
    echo "<tr>";
    foreach($row as $row_item)
    {
        echo "<td>".$row_item."</td>"
    }
    echo "</tr>";
} 
```

无论有多少领域，这都会起作用

# postgresql - SQLAlchemy + PostgreSQL 为用户引用表名，带有 Flask-Login

> ID：14142736
> 
> 赞同：0
> 
> 时间：2013-01-03T16:15:10.140
> 
> 标签：postgresql, sqlalchemy, flask-login

考虑 SQLAlchemy 中的以下声明性用户模型：

```
class User(Base):
    id = Column(Integer, primary_key=True)
    username = Column(String(50), unique=True)
    email = Column(String(1024), unique=True)
    points = Column(Integer, default=0)
    achievements = relationship('Achievement', 
    secondary=achievement_association_table,
    backref='users')
    reviews = relationship('Review', backref='author', lazy='dynamic')
    moderated = Column(Boolean, default=True) 
```

当我执行 a`SELECT * FROM user`时，我注意到查询没有返回我的所有列，并且只显示了“current_user”列，我只能推测这是使用 Flask-Login 的结果。

进行查询`User.query.all()`导致以下 SQL：

```
SELECT "user".created AS user_created, "user".modified AS user_modified, "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".points AS user_points, "user".moderated AS user_moderated 
```

谁能帮我理解为什么这个表是双引号的？我的其他（类似定义的）声明性模型都没有表现出这种行为。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:25:15.617

`user`是保留字，因此需要引用。

有关引用标识符的更多详细信息，请参见手册：
[http ://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)

# java - 超类的私有成员是否由子类继承...... Java？

> ID：14142737
> 
> 赞同：3
> 
> 时间：2013-01-03T16:15:13.413
> 
> 标签：java, inheritance, private, access-control, access-specifier

我经历了这个：

[子类是否继承私有字段？](https://stackoverflow.com/questions/4716040/does-subclasses-inherit-private-fields)

但我还是一头雾水……

我说的是只继承而不是访问。我知道他们在课外看不到。

但是子类的对象是否拥有超类中这些私有成员的副本？

例如...

```
class Base {
    private int i;
}

class Derived extends Base {
    int j;
} 
```

现在，

```
Base b = new Base();
Derived d = new Derived(); 
```

int 的大小为 4

现在，

b 的大小是否为 4，d 的大小是否为 8

或者

d 的大小也只有 4 吗？

当然，当我说 b 和 d 而不是引用时，我说的是堆上的对象。

更新：我刚刚在 SCJP 的 Kathy Sierra 和 Bert 书中读到……它说他们不是继承的……我发布了这个更新，因为仍然有很多人说是的……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T16:17:47.417

是的，子类的实例将具有父类的私有字段的副本。

然而，它们对子类是不可见的，因此访问它们的唯一方法是通过父类的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T16:28:59.650

由于 JVM 规范，`class`文件是这样构建的：

```
ClassFile {
    u4             magic;
    u2             minor_version;
    u2             major_version;
    u2             constant_pool_count;
    cp_info        constant_pool[constant_pool_count-1];
    u2             access_flags;
    u2             this_class;
    u2             super_class;
    u2             interfaces_count;
    u2             interfaces[interfaces_count];
    u2             fields_count;
    field_info     fields[fields_count];
    u2             methods_count;
    method_info    methods[methods_count];
    u2             attributes_count;
    attribute_info attributes[attributes_count];
} 
```

该`super_class`领域包括：

`对于一个类，super_class 项的值要么必须为零，要么必须是 constant_pool 表的有效索引。如果 super_class 项的值非零，则该索引处的 constant_pool 条目必须是一个 CONSTANT_Class_info (§4.4.1) 结构，表示该类文件定义的类的直接超类。直接超类及其任何超类都不能在其 ClassFile 结构的 access_flags 项中设置 ACC_FINAL 标志。

如果 super_class 项的值为零，则该类文件必须表示类 Object，即唯一没有直接超类的类或接口。

对于接口，super_class 项的值必须始终是 constant_pool 表的有效索引。该索引处的 constant_pool 条目必须是表示类 Object 的 CONSTANT_Class_info 结构。

更有趣的是`fields[]`部分：

`Each value in the fields table must be a field_info (§4.5) structure giving a complete description of a field in this class or interface. The fields table includes only those fields that are declared by this class or interface. It does not include items representing fields that are inherited from superclasses or superinterfaces.`

所以编译的类**不包含继承的字段**。另一方面，当创建对象时，`private`超级字段在内存中。为什么？让我们想象一下这个例子：

```
 classs A {
      int a;

      A(int a) {
          this.a = a;
      }

      void methodA() {
          System.out.println("A is: " + a);
      }
 }

 classs B extends A {
      int b;

      B(int b) {
          super(10);
          this.b = b;
      }

      void methodB() {
          super.methodA();
          System.out.println("B is: " + b);
      }
 } 
```

输出应该是：`A is: 10 \n B is ...`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T16:24:03.213

两者都不 - 对象的大小包括一些开销。但是 Derived 会比 Base 占用更多的空间。

运行一个快速测试，看起来 Base 的大小约为 20 个字节，而 Derived 的大小约为 28 个字节。请注意，这些结果在不同的 JVM 上可能会有所不同。

```
public static void main(String[] args) throws InterruptedException {
    int size = 500000;
    double mem;

    mem = Runtime.getRuntime().freeMemory();
    Base[] base = new Base[size];
    for (int i = 0; i < size; i++) {
        base[i] = new Base();
    }
    System.out.println((mem - Runtime.getRuntime().freeMemory()) / size);

    System.gc();
    Thread.sleep(100);
    System.gc();

    mem = Runtime.getRuntime().freeMemory();
    Derived[] derived = new Derived[size];
    for (int i = 0; i < size; i++) {
        derived[i] = new Derived();
    }
    System.out.println((mem - Runtime.getRuntime().freeMemory()) / size);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T16:20:55.843

是的，派生类将具有基类的私有字段。如果 Derived 定义了公共 getter 和 setter，您将能够使用 Derived 类中的该字段。

> b 的大小是 4，d 的大小是 8 还是 d 的大小也只有 4？

它是 Java，而不是 C。您不能轻易估计堆中对象的大小。它会大于 4 或 8 个字节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-14T10:27:36.900

不，私有字段被设计为可在其声明的类上访问。在类（包括派生类）之外可以访问它们的唯一方法是通过公共方法。

如果要使派生类继承基类中的成员，请使用“受保护”而不是私有。代码应该是：

```
class Base {
  protected int i;
}

class Derived extends Base {
  int j;
} 
```

“受保护”访问修饰符允许继承成员并为其分配自己的访问修饰符。

# iframe - 从 iframe 触发 Backbone.js 委托事件

> ID：14142741
> 
> 赞同：1
> 
> 时间：2013-01-03T16:15:26.710
> 
> 标签：iframe, backbone.js, event-handling, event-delegation

我有一种情况，我在主干视图中加载 iframe。该视图具有处理点击事件的事件哈希。

```
events: {
  'mousedown': 'toggleActive'
} 
```

这适用于视图所属的 DOM。问题是当我在 iframe DOM 内单击时，单击事件不会冒泡到视图中（如预期的那样）。所以我写了一些代码，将点击从 iframe DOM 转移到父 DOM。我在 iframe 体内有以下内容。

```
$("body").bind("click", function(event){
   window.parent.document.$("#"+tgId).trigger(event.type);
}); 
```

这适用于常规 jquery 事件处理程序，但由于某种原因，它不会触发视图的事件处理程序（来自事件哈希）。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:39:29.277

Have you tried adding a debugger statement inside your click handler, and then checking what `window.parent.document.$("#"+tgId)` actually is? It's hard to say for sure, but my guess is that that code is not selecting the element you expect. jQuery will then happily let you call trigger on an empty set, so you would't get any errors if that was the case.

# php - 是否可以将 WSDL 文件中自动生成的类包装在命名空间中？

> ID：14142748
> 
> 赞同：0
> 
> 时间：2013-01-03T16:16:08.960
> 
> 标签：php, xml, soap, wsdl

我希望能够维护两个不同的[SOAPClient](http://php.net/manual/en/class.soapclient.php)以在同一个 PHP 脚本中与两个不同的 SOAP 服务器进行通信。我可以毫无问题地与每个服务器独立通信，但两者都定义了自己的同名类版本。当 WSDL 定义的类被导入全局范围时，我得到一个多重定义错误。我无法控制服务器，所以我不能只更改其中一个名称。

我认为[命名空间](http://php.net/manual/en/language.namespaces.rationale.php)将是解决此问题的最佳方法。有没有其他人遇到过这个问题？有没有更简单的解决方案？

# c# - c#生产代码运行DEBUG版本

> ID：14142750
> 
> 赞同：1
> 
> 时间：2013-01-03T16:16:14.387
> 
> 标签：c#

我有以下代码：

```
 #if (DEBUG)

      imgPath = GetDirectoryName(Application.ExecutablePath);

    #else

      imgPath = GetDirectoryName(Application.ExecutablePath) + "\\images\\";

    #endif 
```

当代码进入生产（现场）时，它仍然看起来是调试版本。这怎么可能？促销过程中是否有一些东西可以表明做 RELEASE vs DEBUG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:17:46.867

您可能已经部署了一个带有从 Debug 构建配置中获取的二进制文件的版本，或者在任何情况下，将 DEBUG 变量设置为 True。

您需要构建 RELEASE 并将该输出用作发布候选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:29:11.537

使用#if 语句时，它正在检查以确定是否定义了常量。在项目的 properties->Build 部分下，DEBUG 常量（默认情况下）设置为在调试模式下定义。除非您自己定义，否则没有 RELEASE 常量。您可能已经在调试模式下使用了您的构建，或者为您的发布构建检查了“定义调试常量”。仔细检查你使用的和你的构建设置。

此外，您的代码应该是灰色的，表明 VS 不会编译该代码。因此，如果您希望使用的代码是灰色的，则表明您在某处定义了 DEBUG。

# c# - 在 Unity3D 中按名称加载脚本

> ID：14142755
> 
> 赞同：4
> 
> 时间：2013-01-03T16:16:21.720
> 
> 标签：c#, unity3d

我正在使用 Unity3D 在 C# 中创建游戏，我需要调用我在运行时创建的脚本，所以我知道脚本的名称，因为我有一个名称与它完全相同的对象。

我在运行时创建脚本，然后将其保存到我的 Resources 文件夹中，但随后我更改了场景并需要调用该脚本并将其附加到当前场景中的 Empty GameObject，所以我想使用类似的东西：

```
Script myScript = Resources.Load(myObject.name) as Script; 
```

但我知道这不能像这样完成，所以我正在寻找一种可以做我想做的事情的方法，因为我需要加载那个新脚本来在运行时添加一些函数。

你知道我的问题有什么解决办法吗？非常感谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T16:20:11.123

这实际上比你想象的要容易。您可以使用 AddComponent 方法将脚本添加到游戏对象。所以在你的关卡改变后，你可以抓住你的空游戏对象并执行以下操作：

```
var gameObject = ... 

gameObject.AddComponent<Script>(); // where Script is the name of your Script's C# class 
```

请参阅[http://docs.unity3d.com/Documentation/ScriptReference/GameObject.AddComponent.html](http://docs.unity3d.com/Documentation/ScriptReference/GameObject.AddComponent.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-03-08T07:07:55.787

```
 GameObject gameObj = new GameObject();
    Type scriptType = Type.GetType(nameSpace.className);
    if (scriptType == null)
    {
        foreach (Assembly a in AppDomain.CurrentDomain.GetAssemblies())
        {
            var tempType = a.GetType(nameSpace.className);
            if (tempType != null)
            {
                scriptType = tempType;
            }
        }
    }
    gameObj.AddComponent(scriptType); 
```

# ruby-on-rails - 在 Ruby 中一起使用 Map 和 Select 方法遍历数组

> ID：14142764
> 
> 赞同：3
> 
> 时间：2013-01-03T16:16:38.157
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在开发一个应用程序，我遇到了以下代码。

我有一组链接，其中包含用户在表单中发布的一些链接。比如说我的数组是`bunch1 = ["google.com","http://yahoo.com"]`

现在，在将它们存储到数据库之前，我需要确保每个链接的开头都添加了“http://”，因为我的 ActiveRecord 对象中有“验证：”逻辑。

所以我的逻辑是我将遍历数组并检查数组中每个链接之前是否存在“http://”字符串段。很明显，我必须在数组中的“google.com”之前添加“http://”字符串段。

所以我写了这样的代码：

```
bunch2=bunch1.map { |y| y="http://"+y } 
```

但它会创建一个像 bundle2=["http://google.com","http://http://yahoo.com"] 这样的 bundle2 数组

如您所见，它在 "http://yahoo.com" 之前添加了一个额外的 "http://" 。

为了解决这个问题，我修改了上面的代码，如下所示：

```
bunch2 = bunch1.select { |x|  x !~ /http/ }.map { |y| y="http://"+y } 
```

但它会生成一个类似 `bunch2 = ["http://google.com"`] 的数组，因为带有 select 方法的正则表达式正在消除 yahoo.com

有人可以给我解决这个问题。提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T16:19:15.770

为什么不在调用中测试`map`呢？

`bunch2 = bunch1.map {|y| y !~ /^http/ ? "http://#{y}" : y }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:33:51.443

好的，伙计们，我已经找到了解决这个问题的方法。所以代码根本不需要 select 方法。它只需要一个三元运算符。所以我的一个班轮代码是这样的： -

```
@bunch2=@bunch1.map { |x| x.match(/http:/) ? x : "http://"+x } 
```

上面的代码使用 match 方法与正则表达式进行匹配。如果找到匹配项，则元素不变，否则在开头添加“httP://”字符串。

# bash - 以 root 权限执行 CGI 脚本的最佳方法是什么？

> ID：14142768
> 
> 赞同：3
> 
> 时间：2013-01-03T16:17:01.277
> 
> 标签：bash, apache2, cgi, root

正如标题所说，我正在寻找一种以 root 权限运行 CGI 脚本（在 Ubuntu 上的 APACHE 上运行）的方法。

特别是，脚本的某些命令可以由当前用户（`apache`）执行，但其他命令需要 root 权限（as `iptables`）。

我也可以编写包含这些特权命令的“子脚本”，但是以 root 特权执行它们的问题仍然存在。

我也对是否用 C 或 PERL 或 bash 脚本语言编写 CGI 感到困惑。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:52:59.560

最好的方法是对此类脚本使用**sudo**。在这种情况下，您必须指定哪些命令可以运行脚本。

在 /etc/sudoers 中：

```
wwwdata    ALL=(ALL) /usr/local/bin/allowed-operation 
```

然后在脚本中：

```
sudo /usr/local/bin/allowed-operation 
```

# .net - Caliburn.Micro：绑定到列表，第一项为空

> ID：14142770
> 
> 赞同：4
> 
> 时间：2013-01-03T16:17:01.997
> 
> 标签：.net, wpf, data-binding, drop-down-menu, caliburn.micro

我正在使用 Caliburn.Micro 将组合框绑定到项目列表。例如，假设他们是员工。我想要（相当普遍的）行为，其中第一个项目不是员工，而是`null`代表什么都没有被选择的任何一个或其他东西。

我真的不想在第一个员工被命名为“请选择”且 ID 为零的地方破解它，所以我很感激你的意见。我的偏好是列表中的第一项是`null`，在这种情况下，我的验证（需要选择一个值或记录没有选择任何值）非常简单（我将绑定`SelectedItem`到我的视图模型上的一个属性。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:07:46.023

我刚刚为将 a 绑定`TextBlock`到列表项的控件创建了一个标准项目模板`DisplayName`，然后我将其设置`FallbackValue`为一个不错的消息

```
<ComboBox x:Name="SomeSelection" SelectedValuePath="Value" cal:Message.Attach="[Event SelectionChanged] = [Action DroppedDown(SomeSelection)]">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding DisplayName, FallbackValue='Please select a value'}"></TextBlock>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

我填充虚拟机中的项目

```
 // Standard property
    private ObservableCollection<SomeObject> _SomeSelection = null;
    public ObservableCollection<SomeObject> SomeSelection
    {
        get { return _SomeSelection; }
        set
        {
            if (_SomeSelection != value)
            {
                _SomeSelection = value;
                NotifyOfPropertyChange(() => SomeSelection);
            }
        }
    }

    // Instantiate and add some test items
    SomeSelection = new ObservableCollection<SomeObject>();
    SomeSelection.Add(null);
    SomeSelection.Add(new SomeObject("Hello", 0));
    SomeSelection.Add(new SomeObject("World", 1)); 
```

SomeObject 类只是一个测试类：

```
public class SomeObject : IHaveDisplayName
{
    public string DisplayName { get; set; }

    public int Value { get; set; }

    public SomeObject(string name, int value)
    {
        DisplayName = name;
        Value = value;
    }

} 
```

我唯一还不能开始工作的是默认选择“请选择一个值”项。由于列表中的第一项是空引用，因此您可能需要一个肮脏的技巧才能使其正常工作...

此外，由于 CM 对 ComboBox 的默认约定是将 SelectedItem 而不是 SelectedValue 传递给操作，因此您可以将所选项目传递给任何方法，对于 null 组合框项目，这些方法似乎是组合框项目本身而不是 null。奇怪但可以理解！你的方法是什么样的？

# java - 使用套接字编写 Java 程序以连接到 PLC（可编程逻辑控制器）

> ID：14142772
> 
> 赞同：3
> 
> 时间：2013-01-03T16:17:12.057
> 
> 标签：java, sockets, plc

我正在编写一个程序，该程序通过套接字从 PLC（Allen Bradley 1756 L63）中获取模拟和离散数据点。到目前为止，我在创建套接字时遇到了麻烦。我的代码如下：

```
import java.io.*;
import java.net.*;

class PLCServer
{
    public static void main(String argv[]) throws IOException
    {
        // IP address of the ethernet card
        String ENBTIP = "192.168.10.14";
        DataInputStream socketReader = null;
        PrintStream socketWriter = null;

        try 
        {
                Socket client = new Socket(ENBTIP, 9100);
                socketReader = new DataInputStream(client.getInputStream());
                socketWriter = new PrintStream(client.getOutputStream());
            } catch (UnknownHostException e) {
                System.out.println("Error setting up socket connection");
                System.out.println("host: 192.168.10.14 port: 9100");
            } catch (IOException e) {
                System.out.println("Error setting up socket connection: " + e);
                System.out.println("host: 192.168.10.14 port: 9100");
            }
        // Debugging code
        // System.out.println(InetAddress.getByName(ENBTIP).isReachable(10000));
    }
} 
```

当我运行程序时，我得到一个连接被拒绝的异常。

输出：

```
nick@ubuntu:~/Java Programs/PLC Program$ java PLCServer 
Error setting up socket connection: java.net.ConnectException: Connection refused
host: 192.168.10.14 port: 9100 
```

谁能给我一些指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:30:11.873

您可以先尝试“ping 192.168.10.14”，如果它有响应（应该是），然后尝试“telnet 192.168.10.14 9100”。如果它有一些响应，例如：尝试 192.168.10.14... 连接到 192.168.10.14。那么你的java代码是错误的。否则就是网络问题。

# html - IE7 中忽略了 HTML5 语义标记

> ID：14142777
> 
> 赞同：2
> 
> 时间：2013-01-03T16:17:22.200
> 
> 标签：html, internet-explorer-7, internet-explorer-6, semantic-markup

我正在尝试在我的页面上使用语义标签（[http://toytic.com/class/html5_docStructure.html](http://toytic.com/class/html5_docStructure.html)）。我希望它们表现得像没有任何样式信息的普通标记标签（例如显示块。

但是，当我在 IE7 调试器中查看 DOM 结构时，我看到标签被立即关闭并且所有样式属性都被忽略了。

![IE7 中的 HTML 标签标记](../Images/3c0f3c7ed916d72e0ad2e6466d4657c5.png)

我知道他们是像 modinizer 这样的库，但是到目前为止我所读到的，他们只是使用 CSS 技巧，他们在其中设置了以下 CSS 属性，因此浏览器解释语义元素，如普通 div：

```
header, nav, article, footer, section, aside, figure, figcaption {
            display: block;
        } 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:22:17.107

不理解 HTML5 中的新标签的旧版本 IE 需要一个称为“shiv”的 JavaScript 小技巧来启用它们的显示和样式。将 CSS 设置为`display: block`单独将无法解决问题。

HTML5Shiv 可以单独包含，也可以与更广泛的库一起打包，例如 Modernizr（无论如何你都应该使用它）。

HTMLShiv：[http ://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

Modernizr： http: [//modernizr.com/](http://modernizr.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:20:50.687

您必须使用[modernizr](http://modernizr.com/)插件来为旧版浏览器提供 HTML5 的回退。下载缩小版后，只需将其嵌入到您的 head 标签脚本中即可。您还可以使用[HTML5 shiv](http://code.google.com/p/html5shiv/)。

我还建议您在创建网站时使用[initialzr](http://www.initializr.com/)启动它。它将为您提供所需的所有依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:20:59.673

Modernizr 还使用了类似于[HTML5shiv](https://github.com/aFarkas/html5shiv/blob/master/src/html5shiv.js)的东西，它也将元素添加[到 DOM](http://blog.whatwg.org/supporting-new-elements-in-ie)。查看该 JavaScript 中发生了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-22T23:03:45.097

同样的事情发生在我身上。确保在下载 Modernizr 时选中“html5shiv v3.6”。

# asp.net-mvc-4 - ajax.actionlink 确认弹窗显示两次

> ID：14142778
> 
> 赞同：3
> 
> 时间：2013-01-03T16:17:24.823
> 
> 标签：asp.net-mvc-4

我有一个[Ajax.Actionlink](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.actionlink%28v=vs.108%29.aspx)用于删除确认消息，但是当单击“确定”时，确认消息将在第一次删除后显示两次。

基本上，当我删除第一条记录时，会显示确认消息。我单击确定，删除发生并且部分视图列表重新呈现。我单击另一条记录进行删除，确认消息显示。我点击“确定”，奇怪的事情发生了——记录被删除，但再次弹出确认消息。

```
@Ajax.ActionLink("Delete", 
                 "Delete", 
                 new { id = item.AnnouncementSID }, 
                 new AjaxOptions
                {
                  Confirm = "Are you sure you want to delete this announcement?",
                  HttpMethod = "POST",
                  UpdateTargetId = "divAnnounceList"
                }, new { @class = "actionLink" })

@Scripts.Render("~/Scripts/jquery.unobtrusive-ajax.min.js") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:07:37.087

为了澄清未来的搜索者：

这里的问题是您正在使用 AJAX 调用 Delete 操作，并且此操作正在执行重定向到 Announcements 操作。除了 Announcement 操作返回的是完整的 HTML 而不是部分的 HTML。因此，您将 jquery.unobtrusive-ajax.js 两次注入到您的 DOM 中。因此，您在第二次删除时获得 2 个确认，在第三次删除时获得 3 个确认，依此类推。

认为这就是正在发生的事情

# flash - 将在 Flash 中创建的矢量形状导出到 svg

> ID：14142779
> 
> 赞同：5
> 
> 时间：2013-01-03T16:17:29.077
> 
> 标签：flash, svg, vector-graphics

例如，是否可以将在 Flash 中创建的矢量形状导出到 svg 文件？还是其他任何矢量格式？

如果可能的话 - 我该怎么做？是否有任何库或示例（或两者）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-21T10:56:34.063

虽然有点晚了，但您可能还想查看David [Belias](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&extid=2422028#)的 flash2svg - 它是 Flash 的 MXP 扩展，可以将 Flash 矢量原生导出为 SVG。

它与 Flash CS4 和 CS5 兼容，但没有关于与其他版本的兼容性的信息立即可用。

**2015 年 12 月更新**：

实际上，甚至比这更好（因为我自己对此扩展有问题）：~~[wonderfl 上的 SWF2SVG](http://wonderfl.net/c/qic3)~~ *（不再工作）* - 这非常有效，我在最近的一个项目中使用了大约十几次。

**2017 年 12 月更新**：

正如[@orangesherbert 指出的那样](http://#comment82014227_21256104)，wonderfl.net 已被终止，大多数浏览器将不再运行 Flash 内容，除非明确启用。但是，Flash 仍然是*读取*Flash 形状并将其转换为 SVG 形状的最佳方式，因此我创建了一个独立的 Windows 工具来执行此操作，您可以在此处下载：

**[Flash2SVG 工具](https://www.verynewmedia.com/download/699/)** *（v1.2.1 更新于 2019 年 4 月：现在包括选项！）*

它是一个小程序的 Windows 安装程序，它将获取任何已编译的 SWF 并将其转换为 SVG。我自己仍然经常这样做，所以我很高兴能够将它变成一个独立的可执行文件*。*

[![图像 SWF2SVG 窗口，具有将 SWF 文件转换为 SVG 的选项](../Images/3818265aaf9b00062ee6637e0cad454e.png)](https://i.stack.imgur.com/D42Wm.png)

这是在 Flash 中构建的（*惊喜！*）并编译为 Air for Desktop 应用程序。它使用 Windows SDK SignTool 和自颁发的证书进行签名。如果您有问题（或想要在您的 Mac 上使用它？），请告诉我。

（*如果有人仍然想覆盖他们的浏览器设置并允许 Flash 在线运行，以便他们可以在浏览器中执行此操作，请告诉我，我会找到托管它的地方。*）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T16:44:23.153

经过大量搜索 - 方法是将当前选定的形状导出为 .fxg，然后可以使用 Place 选项在 AI 中打开生成的 fxg。然后只需选择另存为并选择所需的矢量格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-12T23:36:05.647

Sothink SWF反编译器可让您将flash swf文件中的每一帧导出为svg文件。

# spring-mvc - Spring MVC 3.1 - 模型属性丢失

> ID：14142780
> 
> 赞同：0
> 
> 时间：2013-01-03T16:17:31.747
> 
> 标签：spring-mvc, modelattribute

我有一个关于 ModelAttributes 范围的快速问题。

开发。环境：Spring MVC 3.1/Java 6/JSP w/JSTL 用于视图

在我的控制器中，我通过

```
model.addAttribute(“appForResubmission”, appForResubmission); 
```

在 JSP（为响应 GET 请求而提供）中，我将其内容读取为：

```
${appForResubmission.appId} 
```

— 工作正常，数据按预期显示在 JSP 上。

提交 JSP 后，在同一个控制器中以不同的方法（响应 PUT 请求），我尝试从模型中读取属性以进行任何更改，我这样做是

```
@ModelAttribute(“appForResubmission”) Application app 
```

在方法签名中。

但是，当我尝试向对象询问数据时，我得到的只是一个新的 Application 对象。Spring 的文档说，当模型中不存在请求的属性时，就会发生这种新对象的实例化。

什么会导致属性丢失？有任何想法吗？我怀疑这是某个地方的范围问题，但我不确定问题可能出在哪里。

非常感谢您提供的任何指示？

谢谢你，雷迪先生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:28:24.233

a 的范围`modelattribute`是`request`，在内部它只是等价于`HttpSerletRequest.setAttribute("model", model)`。

如果您希望模型在不同的控制器中可用，您可能有两种选择，一种是重建它，基于您提交给控制器的内容或使用您的持久源。第二个选项是使用 将特定模型属性添加到会话中`@SessionAttribute({'modelname'})`，但请注意您必须调用[SessionStatus.complete](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/support/SessionStatus.html)才能稍后删除添加到会话中的模型。

# web-applications - 什么是用来创建 HubSpot 和 Saleforce 的应用商店的？

> ID：14142789
> 
> 赞同：0
> 
> 时间：2013-01-03T16:17:58.537
> 
> 标签：web-applications, app-store, e-commerce, marketplace

有谁知道 HubSpot 或 Saleforce 使用什么解决方案来创建他们的应用商店，或者他们是否自己从头开始编写？

HubSpot 的：[https](https://app.hubspot.com/market/front/list) ://app.hubspot.com/market/front/list Salesforce 的：[http ://appexchange.salesforce.com/](http://appexchange.salesforce.com/)

它们看起来很相似，所以我有一种预感，它们是构建在一个通用平台上的，但我在源代码中没有看到任何证据。如果他们确实从头开始构建它们，是否有人知道提供此功能的潜在白标解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:05:25.620

HubSpot Marketplace 建立在 java 后端平台上，前端是一个通用的 Web 框架。我不知道 Salesforce 平台是基于什么构建的。我也不知道任何开源前端或后端市场平台。它们通常与公司产品紧密集成，因此可能不值得通用。

# 3d - 三.JS 将纹理应用于球体的一部分

> ID：14142790
> 
> 赞同：5
> 
> 时间：2013-01-03T16:18:02.827
> 
> 标签：3d, three.js, webgl

*编辑：我已经决定将纹理应用于球体的一部分是正确的方法，但不知道如何实现它。我打算提出一个新问题，但觉得后代解决这个问题更好，以便其他人可以得到帮助。*

[在此处查看原始问题](https://stackoverflow.com/posts/14142790/revisions)...

我正在使用使用 Canvas 元素创建的纹理作为图像。将此纹理应用于整个球体很简单，但我试图将此纹理仅应用于球体的一部分。

我已经能够通过增加画布的大小来实现这一点，将我的图像与透明空间接壤。但是，这也会将纹理的大小增加到不可接受的大小。透明空间也占用纹理内存，大多数客户端无法处理创建的纹理大小......尤其是当我尝试制作非常小的高分辨率纹理时；因为纹理越小越高分辨率，我必须将其包裹起来的透明度越高......

无论如何，显然在 3D 图形中有一种叫做“UVs”的东西，它允许做这样的事情......我不知道如何在 THREEJS 中实现这样的解决方案。

这就是我制作纹理/材质的方式：

```
scene = new THREE.Scene();

geometry = new THREE.SphereGeometry(500, 50, 50);

texture = new THREE.Texture(document.getElementById('myCanvas'));
texture.needsUpdate = true;
material = new THREE.MeshBasicMaterial({
  map: texture
});
mesh = new THREE.Mesh(geometry, material);
scene.add(mesh); 
```

如何更改它以使纹理仅适用于球体的一部分？

我已经看到了：[如何将纹理图像映射到球体的一部分，或者如何切割（相交）球体表面的矩形？](https://stackoverflow.com/questions/8775889/how-to-map-texture-image-onto-a-part-of-a-sphere-or-how-to-cut-out-intersect)

但是我对 3d 图形的缺乏经验让我无助于理解答案......

**在继续这个项目之前，我应该学习更多关于着色器编程的知识吗？**

**我做了一个 JSFiddle 概述了这个问题：http: [//jsfiddle.net/RCmBU/](http://jsfiddle.net/RCmBU/)**

**如何将黑色画布仅应用于红点指示的球体部分？**

对此问题的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:41:35.330

use 2 canvas:

1 from svg to canvas

1 from canvas to smaller canvas

EDIT:the uvs decide where it will be placed on the sphere.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:24:16.970

您可以根据客户端功能使用不同的“细节级别”模型来提供最佳纹理。我不知道这是否适合您的应用程序，但也许值得一看：

[细节层次示例](http://mrdoob.github.com/three.js/examples/webgl_lod.html)

# java - 如何在 Android 应用程序中使用 AsYouTypeFormatter TextWatcher？

> ID：14142793
> 
> 赞同：14
> 
> 时间：2013-01-03T16:18:19.253
> 
> 标签：java, android, android-edittext, phone-number, textwatcher

我正在尝试将 Google 的 libphonenumber 中的 AsYouTypeFormatter 与 TextWatcher 一起使用，但不确定是否可行。我已经能够将文本格式化为从 EditText 字段中输入的格式，并将其输出到另一个 EditText 中，但无法直接更改原始的 EditText 字段（这是我想要的）。我知道 phoneNumberFormattingTextWatcher 但我们希望用户最终能够选择他们所在的区域设置，并且比使用允许的区域设置更多的控制权（根据我收集的内容）。

一流的：

```
private View phoneNumberView;
private EditText phoneNumberText;
private String formattedPhoneNumber;
private boolean isInAfterTextChanged;
private AsYouTypeFormatter aytf; 
```

首先，我在班级顶部初始化 AsYouTypeFormatter：

```
aytf = PhoneNumberUtil.getInstance().getAsYouTypeFormatter(Locale.getDefault().getCountry()); 
```

创建选项卡等后，我创建一个 EditText 框，格式化其中的现有电话号码（有效），并附加侦听器（这是当前类）：

```
phoneNumberView = inflater.inflate(R.layout.phone_number_setting, null);
phoneNumberText = (EditText) phoneNumberView.findViewById(R.id.dirty_phone_number);
phoneNumberText.setText(dirtyPhoneNumber);
for (int i = 0; i < dirtyPhoneNumber.length(); i++){
    phoneNumberText.setText(aytf.inputDigit(dirtyPhoneNumber.charAt(i)));
}
aytf.clear();
phoneNumberText.setText(dirtyPhoneNumber);
phoneNumberText.addTextChangedListener(this); 
```

那么这就是我目前在我的 TextWatcher 函数中所拥有的，我不确定我的代码应该在这些函数中的哪一个：

```
@Override
public void afterTextChanged(Editable s) {
    if (!isInAfterTextChanged) {
           isInAfterTextChanged = true;

           if(s.length() > 0){
               Log.v("AsYouTypeFormatter - source", s.toString());
               for(int i = 0; i < s.length(); i++){
                   formattedPhoneNumber = aytf.inputDigit(s.charAt(i));
                   Log.v("AsYouTypeFormatter - formatted", formattedPhoneNumber);

               }
               Log.v("AsYouTypeFormatter - source after loop", s.toString());
             //The formatted output shows properly in this EditText but not when I try to put it back into the original one (phoneNumberText) 
               EditText testPhoneNumberText = (EditText) phoneNumberView.findViewById(R.id.testPhoneNumberText);  
               testPhoneNumberText.setText(formattedPhoneNumber);
               aytf.clear();
           }

           formattedPhoneNumber = null;
           isInAfterTextChanged = false;
       }        

}

@Override
public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
}

@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
} 
```

这是记录输出的示例，所以我知道格式可以正常工作：

```
01-03 10:55:02.838: V/AsYouTypeFormatter - source(27114): 15552451234
01-03 10:55:02.838: V/AsYouTypeFormatter - formatted(27114): 1
01-03 10:55:02.838: V/AsYouTypeFormatter - formatted(27114): 15
01-03 10:55:02.838: V/AsYouTypeFormatter - formatted(27114): 1 55
01-03 10:55:02.838: V/AsYouTypeFormatter - formatted(27114): 1 555
01-03 10:55:02.838: V/AsYouTypeFormatter - formatted(27114): 1 555-2
01-03 10:55:02.838: V/AsYouTypeFormatter - formatted(27114): 1 555-24
01-03 10:55:02.850: V/AsYouTypeFormatter - formatted(27114): 1 555-245
01-03 10:55:02.850: V/AsYouTypeFormatter - formatted(27114): 1 555-245-1
01-03 10:55:02.850: V/AsYouTypeFormatter - formatted(27114): 1 555-245-12
01-03 10:55:02.850: V/AsYouTypeFormatter - formatted(27114): 1 555-245-123
01-03 10:55:02.850: V/AsYouTypeFormatter - formatted(27114): 1 555-245-1234
01-03 10:55:02.850: V/AsYouTypeFormatter - source after loop(27114): 15552451234 
```

这是输出的图像（顶部 EditText 是 phoneNumberText，底部是 testPhoneNumberText）：http: [//imgur.com/GXwRu.png](https://imgur.com/GXwRu.png)

我想知道的是如何在输入时将格式化的输出恢复到原始的 EditText 中？当我尝试这样做时，会发生奇怪的事情，例如重复，或者只是显示未格式化。我试过使用 s.replace() 但我不确定我是否正确使用它。这可能吗？谢谢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-17T20:40:19.400

对于那些只想在用户键入时在 EditText 中格式化用户输入的电话号码的其他人来说，使用`PhoneNumberFormattingTextWatcher`（内置于 Android）比尝试任何这些冗长的答案要容易得多 - 而且它是一行代码！

```
//Add a special listener for this instance that will format phone numbers on the fly.
this.editText.addTextChangedListener(new PhoneNumberFormattingTextWatcher()); 
```

您还可以传递用户选择的区域，我认为这实际上会回答 OP 的问题，但直到 API 21 才可用：

```
//This version takes a country code!
this.editText.addTextChangedListener(new PhoneNumberFormattingTextWatcher("US")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T19:04:09.977

我最终在顶部声明了一个新字符串：

```
private String unformattedPhoneNumber; 
```

然后将我的代码更改为：

```
@Override
public void afterTextChanged(Editable s) {
    if (!isInAfterTextChanged) {
       isInAfterTextChanged = true;

       if(s.length() > 0){
           Log.v("AsYouTypeFormatter - source", s.toString());
           unformattedPhoneNumber = s.toString().replaceAll("[^\\d.]", "");
           for(int i = 0; i < unformattedPhoneNumber.length(); i++){
               formattedPhoneNumber = aytf.inputDigit(unformattedPhoneNumber.charAt(i));
               Log.v("AsYouTypeFormatter - formatted", formattedPhoneNumber);

           }
           Log.v("AsYouTypeFormatter - source after loop", s.toString());

           phoneNumberText.setText(formattedPhoneNumber);
           aytf.clear();
       }

       formattedPhoneNumber = null;
       isInAfterTextChanged = false;
   }
} 
```

似乎 aytf 无法格式化已经部分格式化的电话号码，所以我必须在重新提交给 aytf 之前去掉所有非数字？现在剩下的唯一问题是 EditText 字段中的光标现在位于开头而不是结尾，但这应该不是要修复的问题。耶。

编辑代码：

```
@Override
public void afterTextChanged(Editable s) {
    if (!isInAfterTextChanged) {
        isInAfterTextChanged = true;
        phoneNumberText.setText(pnu.updateNationalNumber(s.toString()));
        phoneNumberText.setSelection(this.phoneNumberText.getText().length());
        isInAfterTextChanged = false;
    }
}

 /**
 * Updates the national number based on the param s
 * Takes all formatting out of param s and then reformats the number
 * using the AsYouTypeFormatter for libphonenumber and based upon
 * the region code
 *  
 * @param s The formatted value to be used to update the national number
 * @return String The new formatted national number
 */
public String updateNationalNumber(String s){
    //Instantiate the as you type formatter with the current region (US or UK)
    aytf = phoneUtil.getAsYouTypeFormatter(this.currentRegionCode.getCountryCode());
    String fNationalNumber = null;

    //Format the string
    if(s.length() > 0){
        String digitString = null;
        //If it's in the US remove all leading 1s (international code)
        if(this.currentRegionCode == RegionCode.US){
            digitString = new String(s.replaceAll("(^[1?])|([^\\d.])", ""));
        }
        //If it's in the UK remove all leading 44s (international code)
        else if (this.currentRegionCode == RegionCode.GB){
            digitString = new String(s.replaceAll("(^[4?]{2})|([^\\d.])", ""));
        }
       if(digitString != null){
           //RE input all of the digits into the formatter
           for(int i = 0; i < digitString.length(); i++){
               fNationalNumber = aytf.inputDigit(digitString.charAt(i));
           }
       }

       //Clear the formatter for the next round of input
       aytf.clear();

       //Try to update the phone number with the formatted number
       try {
           phoneUtil.parse(fNationalNumber, this.currentRegionCode.getCountryCode(), this.uPhoneNumber);
       //Rejects if the number isn't in an acceptable format for the region code given etc.
       } catch (NumberParseException e) {
          System.err.println("NumberParseException was thrown: " + e.toString());
       }
    }
    //Return the formatted phone number
    return fNationalNumber;
} 
```

# javascript - 需要 CSS 动态粘滞页脚

> ID：14142795
> 
> 赞同：0
> 
> 时间：2013-01-03T16:18:27.707
> 
> 标签：javascript, jquery, html, css

我正在尝试创建一个固定在页面底部的 HTML 表单。所以当用户向下滚动时，我希望输入框固定在底部。

但是，当用户滚动到某个点（比如页面向下的 70%）时，我希望表单不再是粘性的，并随着其余内容向上移动。

有人对如何使用 CSS/jQuery 执行此操作有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:56:24.347

$(window).scrollTop() 将为您提供视口的顶部位置。您可以将其与 $(document).height() 结合起来计算您当前正在查看的高度百分比。基于此将位置设置为粘性元素

```
var height = $(document).height();
var topPos = $(window).scrollTop();
var perCentage = topPos/height;
if(perCentage > 0.7){
 $('#sticky').css({'position','absolute','top':topPos});
}
else{
 $('#sticky').css('position','fixed');
} 
```

# php - 表达的开头或结尾没有句点？

> ID：14142798
> 
> 赞同：4
> 
> 时间：2013-01-03T16:18:40.833
> 
> 标签：php, javascript, regex

我想允许字母数字字符和句点；但是，该短语不能连续包含两个或多个句点，不能以句点开头或结尾，并且不允许使用空格。

我同时使用 PHP 和 Javascript。

到目前为止，我有`/^(?!.*\.{2})[a-zA-Z0-9.]+$/`

这适用于允许字母数字字符和句点，同时拒绝空格和连续句点，但我仍然不确定如何检查开始和/或结束句点。我该怎么做？而且，有没有更好的方法来做我已经拥有的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:32:16.077

它几乎总是有助于绘制一个有限状态机来概念化您的正则表达式应该是什么样子。

```
^(?:\w\.?)*\w$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:32:00.263

这是一种可能的方法

```
/^(?!\.)((?:[a-z\d]|(?<!\.)\.)+)(?<!\.)$/i 
```

有关更多解释和测试，请参见此处：[http ://www.regex101.com/r/rZ6yH4](http://www.regex101.com/r/rZ6yH4)

编辑：根据泰勒的解决方案，这是他的方式，缩短并简化为字母和数字

```
/^(?:[a-z\d]+(?:\.(?!$))?)+$/i 
```

( [http://www.regex101.com/r/dL5aG0](http://www.regex101.com/r/dL5aG0) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:23:12.923

一个开始是：

```
/^[^. ](?!.*\.{2})[a-zA-Z0-9.]+[^. ]$/ 
```

但应该仔细测试。

# sql - 如何在 SQL Server 2008 中使用 (SQLPlus)？

> ID：14142807
> 
> 赞同：0
> 
> 时间：2013-01-03T16:19:24.367
> 
> 标签：sql, sql-server-2008, sqlcmd

我刚刚完成了一个简单 Java 项目的概念，我的客户想要使用 SQL Server 作为数据库，我下载了 SQL Server 2008，我尝试使用 SQLPlus 来执行查询，但是我在互联网上没有找到任何关于如何使用的教程在 SQL Server 中使用 SQLPlus。谁能帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T23:34:11.610

查看 SQLS*Plus - 这是用于 SQL 服务器的 SQL*Plus。他们的网站是[http://www.sqlsplus.com/](http://www.sqlsplus.com/)

# sql - 仅当所有记录都匹配时才进行 SQL 联接

> ID：14142813
> 
> 赞同：4
> 
> 时间：2013-01-03T16:19:54.607
> 
> 标签：sql, sql-server, tsql

我有 3 张桌子：

*   CP_carthead (idOrder)
*   CP_cartrows (idOrder, idCartRow)
*   CP_shipping (idCartRow, idShipping, dateShipped)

每个 idOrder 可以有多个 idCartRows。

我想获取所有**idCartRows**都存在于 CP_shipping 中的订单。这似乎应该很简单，但我在网上找不到太多。

这是我现在的查询：

```
SELECT
    s.idOrder
    , s.LatestDateShipped
FROM
    CP_carthead o
    LEFT OUTER JOIN (
                        SELECT
                            MAX(s.dateShipped) [LatestDateShipped]
                            , r.idOrder
                        FROM
                            CP_shipping s
                            LEFT OUTER JOIN CP_cartrows r ON s.idCartRow = r.idCartRow
                        GROUP BY
                            r.idOrder               
                    ) s ON o.idOrder = s.idOrder 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:30:33.127

您的查询从“s”返回行，而不是订单。根据您的问题，我提出了以下查询：

```
select o.*
from CP_Carthead o
where o.orderId in (select cr.idOrder
                    from cp_cartrows cr left outer join
                         cp_shipping s
                         on cr.idCartRow = s.IdCartrow  
                    group by cr.idOrder
                    having count(s.idCartRow) = COUNT(*)
                   ) 
```

`in`语句中的子查询正在获取所有其手推车都在运输中的订单。

# ssl - netty 3.6.0 ssl 超时示例

> ID：14142814
> 
> 赞同：0
> 
> 时间：2013-01-03T16:19:58.293
> 
> 标签：ssl, netty

对于 ssl 握手超时示例，如何调用 ImmediateExecutor.INSTANCE 因为它是包保护的

```
final Timer timer = new HashedWheelTimer();

final SslBufferPool pool = new SslBufferPool();

final class MyChannelPipelineFactory implements ChannelPipelineFactory {

public ChannelPipeline getPipeline() {

ChannelPipeline cp = Channels.pipeline();

SslEngine engine = ...

// Use a handshake timeout of 10 seconds

SslHandler handler = new SslHandler(engine, pool, false, ImmediateExecutor.INSTANCE, timer, 10000);

cp.addFirst("ssl", handler);

return cp;

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:32:42.170

那是一个错误。我将为 3.6.2.Final 修复它，因为 3.6.1.Final 的发布过程已经开始。

同时，您可以“克隆”该类并使用它：

```
public final class ImmediateExecutor implements Executor {

    /**
     * The default instance.
     */
    public static final ImmediateExecutor INSTANCE = new ImmediateExecutor();

    public void execute(Runnable command) {
        command.run();
    }
} 
```

# c# - 我应该在哪里验证添加到我的实体的集合属性？

> ID：14142816
> 
> 赞同：1
> 
> 时间：2013-01-03T16:20:08.470
> 
> 标签：c#, asp.net-mvc-3, entity-framework, repository-pattern

我正要开始一个新的宠物项目，我一直想知道在将实体添加到父级的一对多集合时应该如何进行验证。我将使用两个示例类来总结关于 a`Student`和 a 的内容`Teacher`。这里的限制是，在任何给定时间，a`Student`只能由一个（并且只有一个）教授，而这个`Teacher`人又可以教授一个或多个`Student`s）。

```
public class Student
{
    public bool IsEnrolled { get; set; }

    public virtual Teacher IsCurrentlyBeingTaughtBy { get; set; }
}

public class Teacher
{
    public virtual ICollection<Student> IsCurrentlyTeaching { get; set; }
} 
```

当学生上课时，我需要将他们分配到`Teacher`'s`IsCurrentlyTeaching`集合中，但我首先需要确保他们已注册。我的问题是在哪里最好地验证这个基本规则？目前我脑海中的选项是：

**1.使用存储库模式**

因为我将应用单元测试，所以我倾向于这种方法，因为我可以将我的数据访问逻辑包装到一个可模拟的对象中，并且这里只有一个责任，所以我只需要在我的存储库中验证一次. 但是 - 验证是存储库的责任，还是我应该只处理存储库中实体的 CRUD？

**2.在控制器动作中验证这一点**

我应该在这里提一下，我建议这是一个 MVC3 项目，所以我应该在控制器的操作中执行此验证，然后`Student`再将`Teacher`. 但是 - 我是否正在走上一条我真的不应该走的[胖控制器路径？](http://codebetter.com/iancooper/2008/12/03/the-fat-controller/)

**3\. 对`Teacher`实体执行此验证**

切断中间人（即存储库）我是否应该`Student`通过 POCO 上的方法添加，`Teacher`例如`AddStudent(Student student)`在尝试添加尚未注册的学生时抛出自定义异常？

可能还有更多可用的选项，但这是我目前试图在这三个之间进行选择的选项，而且我从考虑这个问题中获得了一些狭隘的视野。显然，以上所有内容都可以进行适当的单元测试，但考虑长期（并适应增长）我应该走哪条路？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:08:41.453

您可以为此创建自己的自定义验证器。这将让您捎带 MVC 已经提供的验证。我从来没有试过这个，但我想这样的事情会起作用：

```
public class EnsureEnrollment : ValidationAttribute
{
    public EnsureEnrollment () {    }

    public override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        var studentList = value as IEnumerable<Student>;
        if (studentList == null)
        {
            return ValidationResult.Success;
        }

        foreach(Student s in studentList )
        {
            if(!s.IsEnrolled)
            {
                //Insert whatever error message you want here.  
                return new ValidationResult("Student \"" + s.Name + "\" is not enrolled.");
            }
        }

        return ValidationResult.Success;
    }
} 
```

然后在您的财产上添加您的注释：

```
[EnsureEnrollment()]
public virtual ICollection<Student> IsCurrentlyTeaching { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:54:07.290

就个人而言，我喜欢将我的验证作为我实体上静态 CRUDL 方法的一部分。诚然，您必须将上下文传递给它们中的每一个，但它可以使控制器更加清洁，并使所有这些功能在将来可能使用您的实体的任何其他项目中都可以轻松使用。

以前我创建了一个基类，我的所有派生实体都必须覆盖验证。几乎所有的 CRUDL 方法和其他工作方法都调用了 Validate 方法，以确保实体在对其进行操作之前是正确的。这些验证规则中的大多数都比较复杂，可以使用 DataAnnotations 属性轻松表达。

或者，您可以将特定验证点集成到具有更特定目的的方法中。举个例子：

```
 public static bool AddToTeacher(SchoolContext db, Student student, Teacher teacher)
    {
        if (student.IsEnrolled)
        {
            teacher.IsCurrentlyTeaching(student);
            return db.SaveChanges() > 0;
        }
        return false;
    } 
```

AddToTeacher 方法仅确保满足特定要求。如果我想确保学生的形成正确并且符合条件的课程轨道，我可能会编写一个简短的方法（或几个都由“容器”方法调用）来验证这些特定点。

简而言之，我尽我所能在实体上保留实体特定代码的每一点，以便控制器几乎不知道实体是如何工作的。

至于放在哪个实体上，就看你怎么想了。在我看来，Student.AddToTeacher 与 Teacher.AddStudent 一样可行。我个人会使用前者，因为这是我的大多数实体目前的样子，“子”实体将自己添加到“父母”中，而不是相反。

# android - 支持库中的 ListFragment 不显示 @android:id/empty

> ID：14142820
> 
> 赞同：1
> 
> 时间：2013-01-03T16:20:19.950
> 
> 标签：android, android-listfragment, android-support-library

我在让 ListFragment 完全正常工作时遇到了一些严重问题 - 它不显示空消息

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="0dip"/>

<RelativeLayout
    android:id="@android:id/empty"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

   ...

</RelativeLayout> 
```

我必须在代码中设置任何东西吗？据我记得 ListActivity 使用它没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:28:05.983

它不显示空消息或整个 ListView？
查看 XML 声明，我发现您缺少`android:layout_weight="1"`ListView 的声明。
这是必须添加的，因为`android:layout_height="0dip"`会将列表缩小为 0，因此不会显示任何数据。

# entity-framework - 使用 Model-First 方法时，如何将 XML 注释添加到 Entity Framework 生成的自动生成的类中？

> ID：14142821
> 
> 赞同：7
> 
> 时间：2013-01-03T16:20:20.183
> 
> 标签：entity-framework, xml-comments

我已将信息添加到图形编辑器的 Documentation.Summary 属性中，但未将其添加到生成的类中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T16:20:20.183

我发现这个问题的答案是更改 T4 模板（解决方案中的 .tt 文件）。这负责生成 C# 类代码。找到您想要添加摘要信息的任何位置（例如在写出的每个简单属性之前）。例如，这里是简单属性的更改代码：

```
<#
if (simpleProperties.Any()) {
    foreach (var edmProperty in simpleProperties) {
        if (edmProperty.Documentation != null) {
#>
    ///<summary><#=edmProperty.Documentation.Summary #></summary>
<#
        }
#>
    <#=codeStringGenerator.Property(edmProperty)#>
<#
    }
}
#> 
```

# ios - 从大 PNG 生成图块

> ID：14142824
> 
> 赞同：0
> 
> 时间：2013-01-03T16:20:28.923
> 
> 标签：ios, image, png, tiling

我正在寻找使用 CATiledLayer 在 iOS 设备上显示巨大的 PNG 图像。为此，我需要在客户端将较大的图像拆分为图块（100%、50%、25% 和 12.5%）（不能在服务器端创建图块）。

我可以看到有诸如 libjpeg-turbo 之类的库可以工作，但是这些是用于 JPEG 的，我需要使用 PNG。

有谁知道我可以采用大 PNG（~20Mb）并在设备上从中生成图块的方法？

任何指示或建议将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:30:55.933

您可以使用内置的 Core Graphics CGDataProviderCreateWithFilename 和 CGI​​mageCreateWithPNGDataProvider API 打开图像，然后通过执行以下操作创建每个图块：

```
const CGSize tileSize = CGSizeMake(256, 256);
const CGPoint tileOrigin = ...; // Calculate using current column, row, and tile size.
const CGRect tileFrame = CGRectMake(-tileOrigin.x, -tileOrigin.y, imageSize.width, imageSize.height);

UIGraphicsBeginImageContextWithOptions(tileSize, YES, 1);
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextDrawImage(context, tileFrame, image.CGImage);

UIImage *tileImage = UIGraphicsGetImageFromCurrentImageContext();
[UIImagePNGRepresentation(tileImage) writeToFile:tilePath atomically:YES];
UIGraphicsEndImageContext(); 
```

您可能还想查看 UIScrollView 类参考下引用的相关示例项目（Large Image Downsizing 和 PhotoScroller）。

# javascript - 选择时的 HTML 设置默认文本

> ID：14142827
> 
> 赞同：0
> 
> 时间：2013-01-03T16:20:38.200
> 
> 标签：javascript, jquery, html

我有一个`select`表单元素：

```
<select id="test" name="test">
<option value="blah">Test1</option>
<option value="blah">Test2</option>
.
<option value="blah">Testn</option>
</select> 
```

我想默认显示文本“选择测试”。我知道这样做的方法是设置一个新选项

```
<option selected="selected">Select a test</option> 
```

在顶部。但我正在寻找其他方式，我不必使用标签。是否可以通过javascript（jQuery也可以）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:26:54.577

这是一个简单的js解决方案：

```
var selecttest = document.querySelector('#test');
selecttest.insertBefore(new Option('select a test'),selecttest.firstChild);
selecttest.selectedIndex = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:29:23.690

我过去用一个虚拟条目完成了这个......

**HTML**

```
<select id="test" name="test">
    <option value="0">Select an option...</option>
    <option value="blah">Test1</option>
    <option value="blah">Test2</option>
    <option value="blah">Test3</option>
    <option value="blah">Test4</option>
    <option value="blah">Test5</option>
</select>​ 
```

**Javascript**

```
​$("#test").on("change", function() {
    if ($(this).val() != "0") {
        $("option[value=0]", this).remove();
    }
});​​​​​​ 
```

这是关于 jsFiddle 的一个工作示例...

[http://jsfiddle.net/97Bqr/](http://jsfiddle.net/97Bqr/)

一旦您选择其他内容，“选择一个选项”选项就会被删除。

# javascript - 使用数组搜索元素的数据属性并将其隐藏

> ID：14142829
> 
> 赞同：0
> 
> 时间：2013-01-03T16:20:39.830
> 
> 标签：javascript, jquery

我想在一个类中搜索具有与数组匹配的 data-id 属性的元素，并隐藏它们。

的HTML：

```
<li class="list" data-id="1">one</li>
<li class="list" data-id="2">two</li>
<li class="list" data-id="3">three</li>
<li class="list" data-id="4">four</li> 
```

我有一个数组： `var dataIDcheck = ['1', '3']`

关于如何搜索类 .list 并隐藏 1 和 3（或数组中的任何内容）的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:36:10.217

```
var dataIDcheck = ['1', '3'];
$('[data-id="' + dataIDcheck.join('"], [data-id="') + '"]').hide(); 
```

[http://jsbin.com/ojipaw/1/](http://jsbin.com/ojipaw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:33:24.493

您可以使用[filter](http://api.jquery.com/filter/)和[inArray](http://api.jquery.com/jQuery.inArray/)功能

```
 $('.list').filter(function(){
      return $.inArray($(this).data('id'),dataIDcheck) > -1
 }).hide(); // <-- hides any elements that have data-id found in array 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:21:59.487

```
var ids   = [1, 3],
    count = ids.length,
    parts = [];

for (var i = 0; i < count; i++) {
    parts.push('[data-id="' + ids[i] + '"]');
}

var selector = parts.join(',');

var elems = document.querySelectorAll(selector); 
```

这适用于标准 DOM (IE8+)，不需要任何库。[`querySelectorAll()`](https://developer.mozilla.org/en-US/docs/DOM/document.querySelectorAll)查看文档也可能对您有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T16:32:57.780

```
for (id in dataIDcheck) {
    $('.list[data-id=' + dataIDcheck[id] + ']').hide()
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T16:33:27.973

为什么不是 jquery 的[inArray()](http://docs.jquery.com/Utilities/jQuery.inArray)

```
var dataIDcheck = [1, 3];

$('.list').each(function() {
    if($.inArray($(this).data("id"),dataIDcheck) > -1) {
      $(this).fadeOut(); 
    }
}); 
```

[小提琴](http://jsfiddle.net/FZvB8/) </p>

# c++ - 在地图中存储不同的数据类型 - 包含类型信息

> ID：14142832
> 
> 赞同：2
> 
> 时间：2013-01-03T16:20:48.777
> 
> 标签：c++, types, map

我需要解析和存储一个有点（但不是太）复杂的流，并且需要以某种方式存储解析的结果。该流本质上包含名称-值对，其中`value`s 可能对于不同`name`的 s 具有不同的类型。基本上，我最终得到了一个`key`（总是字符串）到一对的映射`<type, value>`。

我从这样的事情开始：

```
typedef enum ValidType {STRING, INT, FLOAT, BINARY} ValidType;
map<string, pair<ValidType, void*>> Data; 
```

但是我真的不喜欢`void*`和存储指针。当然，我总是可以将值存储为二进制数据（`vector<char>`例如），在这种情况下`map`最终会是

```
map<string, pair<ValidType, vector<char>>> Data; 
```

然而，在这种情况下，每次需要实际值时我都必须解析二进制数据，这在性能方面会非常昂贵。

考虑到我不太担心内存占用（数据量不大），但我担心性能，那么存储这些数据的正确方法是什么？

理想情况下，我想避免使用 boost，因为这会使最终应用程序的大小增加 3 倍，如果不是更多的话，我需要将其最小化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T16:35:33.087

您正在寻找一个受歧视（或标记）的工会。

Boost.Variant 是一个例子，Boost.Any 是另一个例子。您确定 Boost 会将您的最终应用程序大小增加 3 倍吗？我会认为variant 只是标题，在这种情况下你不需要链接任何库。

如果你真的*不能*使用 Boost，那么实现一个简单的可区分联合并不难（一个通用且完全正确的联合是另一回事），至少你现在知道要搜索什么。

* * *

为了完整起见，一个天真的有区别的联合可能看起来像：

```
class DU
{
public:
    enum TypeTag { None, Int, Double };
    class DUTypeError {};
private:
    TypeTag type_;
    union {
        int i;
        double d;
    } data_;

    void typecheck(TypeTag tt) const { if(type_ != tt) throw DUTypeError(); }
public:
    DU() : type_(None) {}
    DU(DU const &other) : type_(other.type_), data_(other.data_) {}
    DU& operator= (DU const &other) {
        type_=other.type_; data_=other.data_; return *this;
    }

    TypeTag type() const { return type_; }
    bool istype(TypeTag tt) const { return type_ == tt; }

#define CONVERSIONS(TYPE, ENUM, MEMBER) \
    explicit DU(TYPE val) : type_(ENUM) { data_.MEMBER = val; } \
    operator TYPE & () { typecheck(ENUM); return data_.MEMBER; } \
    operator TYPE const & () const { typecheck(ENUM); return data_.MEMBER; } \
    DU& operator=(TYPE val) { type_ = ENUM; data_.MEMBER = val; return *this; }

    CONVERSIONS(int, Int, i)
    CONVERSIONS(double, Double, d)
}; 
```

现在，有几个缺点：

*   您不能在联合中存储非 POD 类型
*   添加类型意味着修改枚举和联合，*并*记住添加新`CONVERSIONS`行（如果没有宏会更糟）
*   你不能使用访问者模式（或者，你必须为它编写自己的调度程序），这意味着客户端代码中有很多 switch 语句
    *   如果您添加一种类型，这些开关中的每一个都可能需要更新
    *   如果您确实编写了一个访问者调度，*那么*如果您添加一个类型，则需要更新，每个访问者也可能如此
*   如果你想用这些做算术之类的事情，你需要手动重现像内置 C++ 类型转换规则之类的东西（即，`operator double`可以提升 an`Int`而不仅仅是处理`Double`......但前提是你手动滚动每个运算符）
*   我没有`operator==`精确地实现，因为它需要一个开关。如果类型匹配，您不能只 memcmp 这两个联合，因为如果双精度所需的额外空间包含不同的位模式，相同的 32 位整数仍然可以比较不同

如果您关心这些问题，其中一些问题可以得到解决，但还有更多工作要做。因此，如果可以避免的话，我宁愿不重新发明这个特定的轮子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:42:13.433

既然你的数据类型是固定的，那么像这样的东西呢......

每种类型的值都有类似 std::vector 的东西。并且您的地图将具有数据索引作为该对的第二个值。

```
std::vector<int> vInt;
std::vector<float> vFloat;
.
.
.

map<std::string, std::pair<ValidType, int>> Data; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-06T13:35:54.270

您可以利用 C++11 中 std::tuple 的漂亮特性来实现多类型映射，该特性允许通过类型键进行访问。您可以包装它以通过任意键创建访问。可以在此处获得对此的深入解释（以及非常有趣的阅读）：

[https://jguegant.github.io/blogs/tech/thread-safe-multi-type-map.html](https://jguegant.github.io/blogs/tech/thread-safe-multi-type-map.html)

现代 C++ 特性提供了解决旧问题的创建方法。

# xpages - 如何在 xe:inputRichText （或 HTML 传递）中对齐图像？

> ID：14142833
> 
> 赞同：0
> 
> 时间：2013-01-03T16:20:49.313
> 
> 标签：xpages

我正在使用 Domino 8.5.3 <xe:inputRichText> 控件让最终用户添加 Web 内容。该控件具有添加图像的基本功能，但没有“对齐”设置以在图像周围浮动文本（例如 <img align="right"> ），这在基本 HTML 中很常见。

尝试的一种解决方法是使用 2 列表，它可以工作，但效果不佳（尤其是在重新调整窗口大小时）。

任何解决方法的想法？inputRichText 控件中是否有类似于“直通 HTML”的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:38:25.343

尝试将工具栏样式设置为大，然后简单地切换到 HTML 源代码（最后一个按钮）并随意更改它：

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/CKEditor_in_XPages_in_NotesDomino_8.5.2](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/CKEditor_in_XPages_in_NotesDomino_8.5.2)

# javascript - 从下拉列表中选择“其他”时动态需要文本框

> ID：14142836
> 
> 赞同：0
> 
> 时间：2013-01-03T16:20:50.783
> 
> 标签：javascript, asp.net, forms

我绞尽脑汁想弄清楚这件事……

我有一个带有一些动态生成的表单字段的 ASP.NET Web 表单。根据在下拉列表中选择的值，在以下文本框中设置可见性。我使用客户端脚本执行此操作。

意图是用户从下拉列表中选择“其他”，然后“其他描述”字段出现在表单上。当文本框可见时，我想添加在“其他描述”文本框上激活必填字段验证器或某种验证的功能。

关于如何做到这一点的任何想法？在我的测试中，回发不是一个选项，因为表单字段需要在页面上，所以一个空值与之关联。（不是我的选择 - 我从另一个开发人员那里继承了这段代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:30:34.580

最常见的方法是始终呈现验证器，但将其呈现为禁用，然后在需要时启用它。

查看[有关 ASP.NET 验证器的文档](http://msdn.microsoft.com/en-us/library/aa479045.aspx)，特别注意标有[“客户端验证”](http://msdn.microsoft.com/en-us/library/aa479045.aspx#aspplusvalid_clientside)的部分，更具体地说，是`ValidatorEnable(val, enable)`函数。

> ValidatorEnable(val, enable) 采用客户端验证器和布尔值。启用或禁用客户端验证器。被禁用将阻止它进行评估，并且它将始终显示为有效。

请注意，`val`参数是验证器元素，而不是字符串 ID。

# c# - 通过 webrequest 从网站获取 xml 然后反序列化并在控制台中显示

> ID：14142837
> 
> 赞同：0
> 
> 时间：2013-01-03T16:20:52.107
> 
> 标签：c#, webrequest, xml-deserialization

您好，我正在学习这些东西，我需要向站点发送请求以获取 xml 作为响应，而不是对其进行反序列化并查看其中的任何内容...我创建了请求反序列化方法和流方法以及 Xml Schema，但现在我不知道接下来会发生什么不工作，所以如果有人知道一些不错的教程，请给我链接。

```
public static class LoadXml
{
    public static root material;

    public static void LoadXML()
    {
        var serviceUrl = "http://api.deezer.com/2.0/artist/27&output=xml";
        string serviceName = "Deezer";

        HttpWebRequest request = null;
        WebResponse response = null;

        request = WebRequest.Create(serviceUrl) as HttpWebRequest;
        request.Method = "GET";
        request.ContentType = " text/xml";

        material = Deserialize<root>(GetResponseStream(request, response, serviceName));

        Console.WriteLine(material.ToString());
    }

    public static T Deserialize<T>(MemoryStream stream)
    {
        XmlSerializer serializer = new XmlSerializer(typeof(T));
        T result = (T)serializer.Deserialize(stream);

        return result;
    }

    public static MemoryStream GetResponseStream(HttpWebRequest request, WebResponse response, string debugServiceName)
    {

        response = request.GetResponse();

        MemoryStream stream = new MemoryStream();
        response.GetResponseStream().CopyTo(stream);
        stream.Position = 0;

        return stream;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:43:13.413

Place (or load) the results into an [XDocument][1] and work with it from there by manipulating and extracting data from the document.

Using the url as a starting point this is a snippet (easier way to load; try it) where we load it and then look at a target child node if the structure returned was (\root\name):

```
XDocument doc = XDocument.Load(@"http://api.deezer.com/2.0/artist/27&output=xml");

Console.WriteLine ( doc.ToString() );

/*
<root>
  <id><![CDATA[27]]></id>
  <name><![CDATA[Daft Punk]]></name>
  <link><![CDATA[http://www.deezer.com/artist/27]]></link>
  <picture><![CDATA[http://api.deezer.com/2.0/artist/27/image]]></picture>
  <nb_album><![CDATA[54]]></nb_album>
  <nb_fan><![CDATA[592180]]></nb_fan>
  <radio><![CDATA[1]]></radio>
  <type><![CDATA[artist]]></type>
*/

Console.WriteLine ( doc.Element("root").Element("name").Value);
// Outputs:
// Daft Punk 
```

## Update Alternate Load (Parse)

```
var xml = @"
<root>
  <id><![CDATA[27]]></id>
  <name><![CDATA[Daft Punk]]></name>
  <link><![CDATA[http://www.deezer.com/artist/27]]></link>
  <picture><![CDATA[http://api.deezer.com/2.0/artist/27/image]]></picture>
  <nb_album><![CDATA[54]]></nb_album>
  <nb_fan><![CDATA[592180]]></nb_fan>
  <radio><![CDATA[1]]></radio>
  <type><![CDATA[artist]]></type>
</root>";

var doc = XDocument.Parse( xml );

Console.WriteLine ( doc.Element("root").Element("name").Value);
// Outputs
// Daft Punk 
```

# objective-c - UINavigationBar 在 StatusBar 下

> ID：14142843
> 
> 赞同：0
> 
> 时间：2013-01-03T16:21:06.517
> 
> 标签：objective-c, ios, cocoa-touch

我正在开发一个小应用程序。我遇到了一个我无法解决的问题。我正在将 viewController 推送到 navigationController，这个屏幕截图显示了正在发生的事情。

![截屏](../Images/e07fb84b2e6163c78106135f34fdc933.png)

这是我正在使用的代码：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

self.navController = [[UINavigationController alloc] init] ;
[self.window setRootViewController:navController];
[self.window makeKeyAndVisible];

TestViewController *testViewController =[[TestViewController alloc] init];
[navController pushViewController:testViewController animated:YES]; 
```

这让我发疯，我已经盯着一个小时没有成功，知道如何解决这个问题吗？

* * *

## 更新

是与状态栏有关的东西。如果我在 info.plist 文件中将“状态栏最初隐藏”更改为“否”，则应用程序工作正常，但状态栏显示在启动屏幕中。任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:25:14.723

尝试以不同方式初始化导航控制器

```
 TestViewController *testViewController =[[TestViewController alloc] init];
  self.navController = [[UINavigationController alloc] initWithRootViewController:testViewController];
  [self.window setRootViewController:self.navController];
  [self.window makeKeyAndVisible]; 
```

为了所有的圣徒，使用大写字母作为班级名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T12:36:44.080

我最后做的是手动定位 UINavigationBar。我希望它可以帮助别人！

# eclipse - 在同一个项目中运行 SimpleOpenNI 和 leJOS

> ID：14142847
> 
> 赞同：1
> 
> 时间：2013-01-03T16:21:14.300
> 
> 标签：eclipse, build, lejos-nxj, simple-openni

我们有一个项目，希望通过 Microsoft Kinect 传感器控制 Lego Mindstorms 机器人。我们决定使用 SimpleOpenNI with Processing 来读取传感器并使用 leJOS 来控制机器人，原因很简单：因为两者都是 Java 语言，我们可以指定一种`RoboHandler`并从传感器读取类中调用它的方法。

为了实现这一点，我们为 Eclipse 下载了 leJOS 插件，创建了一个新的 leJOS NXT 项目，并将处理和 SimpleOpenNI 库放在构建路径中。请注意，要使用 SimpleOpenNI，需要没有 Java 的旧处理版本。

现在的问题是，安装 leJOS 时，它严格要求 32 位 Java JDK，所以我不得不下载这个并在安装时指向它。

此时，项目中有以下构建路径：

*   LeJOS NXT Runtime（其中包含 java.awt 类）
*   core.jar（用于在eclipse中运行Processing）
*   SimpleOpenNI.jar

拥有所有这些，并设置第一个处理草图，例如

```
import processing.core.*;

public class Test extends PApplet{
    (....)
} 
```

导致以下错误代码：

```
Multiple markers at this line
    - The type java.awt.event.MouseMotionListener cannot be resolved. It is indirectly referenced from 
     required .class files
    - The type java.applet.Applet cannot be resolved. It is indirectly referenced from required .class files
    - The type java.awt.event.MouseListener cannot be resolved. It is indirectly referenced from required .class files
    - The hierarchy of the type FirstTry is inconsistent
    - The type java.awt.event.FocusListener cannot be resolved. It is indirectly referenced from required .class files
    - The type java.awt.event.KeyListener cannot be resolved. It is indirectly referenced from required .class files 
```

当我下载 Processing without Java 版本时，我无法选择 32 位或 64 位版本。SimpleOpenNI 安装为 64 位版本。

当也将 64bit-JDK（eclipse 工作区默认）添加为工作区时，错误消失了，但是当尝试运行草图时，控制台中会打印以下错误：

```
Invalid layout of java.lang.Thread at name
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (javaClasses.cpp:128), pid=9176, tid=8740
#  fatal error: Invalid layout of preloaded class
#
# JRE version: 7.0_04-b22
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.0-b21 mixed mode windows-amd64 compressed oops)
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# C:\Users\Valentino\Desktop\workspaces\workspace_processing\RoboZeugs\bin\hs_err_pid9176.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# 
```

所以在我看来，JDK 版本（32 位和 64 位）存在问题，但必须有办法解决这个问题。有没有人在这个特定主题上有经验，甚至可能使用 Kinect -> Mindstorms？谁能告诉我这个错误**到底**是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:11:15.290

您正在将设计用于在 NXT 砖上与 JVM 一起运行的类（即 classes.jar 中的所有内容）与设计用于在 PC 上与完全成熟的 JVM 一起运行的类混合使用。不要那样做。如果您想远程控制 NXT，请使用 pccomms.jar 和 lib/pc 中的所有其他内容。但是，当您在 PC 上启动 Java 程序时，切勿将 classes.jar 或 lib/nxt 中的任何其他内容添加到类路径中。

关于java.lang.Thread的错误信息可能是因为classes.jar中的java.lang.Thread与你PC上JVM自带的java.lang.Thread不兼容。

# c# - 加密/解密数字的简单方法

> ID：14142848
> 
> 赞同：0
> 
> 时间：2013-01-03T16:21:14.993
> 
> 标签：c#, asp.net-mvc

我需要以一种简单的方式加密一个 2 位数字。我在 google 中找到的样本似乎相当复杂。有什么简单的方法可以实现吗？

**更新**

我正在为我的 ASP.NET MVC 应用程序开发自定义数字验证码。我创建了一个自定义 html 帮助程序，它将使用验证码图像的 base-64 编码字符串呈现图像标记。验证码图像将类似于`23 + 12 = ?`. 当用户提交答案时，我想验证它对吗？我对在会话中存储总和不感兴趣，所以我想加密总和并将其附加为隐藏字段，因此当用户提交表单时，我可以轻松地进行验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:28:39.033

如果您的号码是，`x`那么您可以将其加密为`(x + key) mod 100`. 这将产生另一个 2 位数字，`y`。

没有比这更简单的了。

如有必要`x = y - key`， 解密很简单。`+100`

如果`key`是 2：

```
x = 15
y = 15 + 2 = 17
x = 17 - 2 = 15

x = 99
y = 99 + 2 mod 100 = 101 mod 100 = 1
x = 1 - 2 + 100 = 99; 
```

更简单的是加密`x`为`x`. 他们绝对不会想到……

编辑1：

更严肃地说，如果这不是某种个人实验/家庭作业，我会远离这种“简单”的算法，并使用 System.Security.Cryptography 以及来自谷歌或查尔斯孙[评论](https://stackoverflow.com/questions/1200132/encrypting-and-decrypting-numbers-with-net)的那些不那么复杂的样本. 除非你用它做一个载体，否则永远不要实现你自己的加密/解密算法，那样就很疯狂。

编辑2：

因此，您想将验证码及其正确响应都发送给客户端？我不认为这就是它的完成方式（但这又不是我的领域......）。我一直认为验证是在服务器端完成的（你控制并保持安全的部分）。

为了安全起见，我会以艰难的方式做到这一点并正确加密所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:06:50.793

这可能并不完全严重，但它有效！

```
 static IEnumerable<string> GetRandomStringsForever()
  {
    var rng = new Random();  // or maybe new Random(14142848)
    while (true)
    {
      char[] arr = new char[8];
      for (int idx = 0; idx < arr.Length; ++idx)
        arr[idx] = (char)rng.Next('A', 'Z' + 1);
      yield return new string(arr);
    }
  }

  static void Main()
  {
    var secretKey = GetRandomStringsForever().Distinct().Take(100).ToList();

    int message = 42;

    // encrypt:
    string cryptic = secretKey[message];

    Console.WriteLine("Who can guess the number from this: " + cryptic);

    // decrypt:
    int reconstructed = secretKey.IndexOf(cryptic);

    Console.WriteLine("The message was: " + reconstructed);

  } 
```

好吧，如果人们知道您正在使用我的想法执行此操作，他们可能能够自己构建`secretKey`（使用与您相同版本的 .NET），所以这并不安全。

# javascript - 如何防止 Cufon 在子菜单中被继承？

> ID：14142849
> 
> 赞同：0
> 
> 时间：2013-01-03T16:21:15.183
> 
> 标签：javascript, css, joomla, cufon

我试图在 UL/LI 菜单结构的顶层使用 cufon 渲染字体。如何防止 cufon 渲染字体或继承子菜单中的样式。

我只在顶层菜单级别添加了一个类“top”，并为所有子菜单添加了一个单独的类“sub”。

我真的很想为子菜单禁用 cufon，但如果不能这样做，那么加载另一种字体和重新设置样式也是可以接受的。这两种方法我都试过了，但是继承非常持久。

这是cufon代码：

```
Cufon.replace("li.top:not(li.top>ul>li.sub)", { fontFamily: "SerpentineDBol", 
                        //hover: true, 
                        hover: {
                          textShadow: '1px 1px #febf00',
                          color: '-linear-gradient(black, lightgray)'
                        },
hoverables: { li: true }, textShadow: "1px 1px white", color: "-linear-gradient(black, lightgray)" });
Cufon.replace("li.top>ul>li.sub", {fontFamily: "Arial Black" }); 
```

和这里的菜单格式：

```
<nav class="isi-nav clearfix">
    <div class="isi-nav-inner">
       <ul class="isi-hmenu" id="topmatt">
          <li class="item-464 active top">
             <a class=" active" href="/j25/">Home</a>
           </li>
           <li class="item-444 deeper parent top">
             <a href="/j25/index.php/sample-sites">Sample Sites</a>
             <ul>
               <li class="item-545 sub">
                 <a href="/j25/index.php/sample-sites-2/banner-module">Banner Module</a>
               </li>
               <li class="item-546 sub">
                 <a href="/j25/index.php/sample-sites-2/archive-module">Archive Module</a>
               </li>
              </ul>
             </li>
             <li class="item-476 top">
                <a href="/j25/index.php/captcha">Captcha</a>
             </li>
            </ul> 
        </div>
    </nav> 
```

在 cufon 代码中，我尝试为“sub”类定义不同的字体样式，但它被上层“top”样式所覆盖。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:28:18.140

我弄清楚我必须做些什么来防止不通过 cufon 设置子级别 UL。我不需要使用复杂的

li.top:not(li.top>ul>li.sub) 。

我只需要自己指定 .top 类，然后添加

忽略：{ul：真}，

到 cufon 设置，它忽略了其余的菜单项。

# java - 关闭链接到 System.in 的扫描仪

> ID：14142853
> 
> 赞同：43
> 
> 时间：2013-01-03T16:21:26.143
> 
> 标签：java, java.util.scanner

我有一个`Scanner`链接到`System.in`. 现在，在使用 之后`Scanner`，我应该关闭它，因为让它保持打开状态是不好的编码习惯。但是，如果我关闭`Scanner`，我也会关闭`System.in`！谁能告诉我如何在不关闭的`Scanner`情况下关闭`System.in`（如果有的话）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-03T16:32:35.693

如果您不想关闭底层流，最简单的方法是不要关闭 Scanner。

理想情况下，您应该只创建一个扫描仪，供您在程序的整个生命周期中使用。无论如何，您似乎没有充分的理由关闭它。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-03T16:32:35.893

一种选择是将您的`System.in`流包装在一个`CloseShieldInputStream`防止它被关闭的中。然后，您的读者将使用`CloseShieldInputStream`而不是原始`System.in`流。

这是该类的 API： http: [//commons.apache.org/io/apidocs/org/apache/commons/io/input/CloseShieldInputStream.html](http://commons.apache.org/io/apidocs/org/apache/commons/io/input/CloseShieldInputStream.html)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-07-06T09:09:32.857

而不是添加屏蔽类和类似的东西，只需添加一个很好的评论和一个

```
 @SuppressWarnings("resource") 
```

这已经足够了。而且我似乎没有看到这种方法有很多缺点。不要忘记评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-06T18:15:42.223

我对很久以前使用两次相同的奇怪，无法诊断的问题有模糊的记忆`Scanner`，`System.in`所以这就是我使用的（即使您可能应该在程序期间只使用一个扫描仪）：

```
static String input() {
    try {
        return new Scanner(System.in).nextLine();
    } catch (NoSuchElementException e) {
        throw e;
    }
} 
```

出于某种原因，这在没有警告的情况下工作，而如果我不做接球，Eclipse 会抱怨`Resource leak: '<unassigned Closeable value>' is never closed`。

* * *

## 回答 #5

> 赞同：-8
> 
> 时间：2015-11-06T08:44:18.033

根据[InputSteam 的 API](http://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html#close--) “InputStream 的 close 方法什么都不做。”，所以由于 System.in 是 InputStream 的一个实例，你不必担心 close() 被调用。

# c# - 内部带有gridview的Updatepanel不会触发事件

> ID：14142855
> 
> 赞同：2
> 
> 时间：2013-01-03T16:21:45.313
> 
> 标签：c#, asp.net, c#-4.0, user-controls, updatepanel

我在更新面板中有一个带有网格视图的用户控件。

我试图触发所有网格事件，因为当我在网格视图上工作时，母版页不应该发布，但它不起作用。母版页总是后背！

我可以做什么？

这是 myuser 控制 asp.net 代码：

```
<asp:UpdatePanel ID="upFeatureCustomer" runat="server" ChildrenAsTriggers="true" >
<ContentTemplate>
<asp:GridView ID="gvFeatureCustomer" runat="server" DataKeyNames="Id"  
        AutoGenerateColumns="False" ClientIDRowSuffix="Id" 
    OnRowDataBound="dtgdResult_RowDataBound" ClientIDMode="Static" 
        ShowHeader="false">
    <Columns>
        <asp:TemplateField HeaderText="Nome" FooterText="Nome" SortExpression="Name">
            <ItemTemplate>
                <asp:DropDownList ID="ddlName" ClientIDMode="Predictable" runat="server" DataValueField="id" DataTextField="Name">
                </asp:DropDownList>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Valore" FooterText="Valore" SortExpression="Value">
            <ItemTemplate>
                <asp:TextBox id="txtValue" AutoPostBack="true" runat="server" CssClass="auto-feature" OnTextChanged="txtValue_TextChanged"></asp:TextBox>
            </ItemTemplate>
        </asp:TemplateField>
         <asp:TemplateField HeaderText="Delete" FooterText="Delete" Visible="true" HeaderStyle-Width="25"
                ItemStyle-HorizontalAlign="Center">
                <ItemTemplate>
                    <asp:HyperLink ID="Delete" runat="server" NavigateUrl='<%# DataBinder.Eval(Container, "DataItem.Id", "javascript:openDeleteDialog(\"{0}\");")%>'
                        ImageUrl="~/images/delete2.png" ToolTip="Delete">
                    </asp:HyperLink>
                </ItemTemplate>
            </asp:TemplateField>
    </Columns>
</asp:GridView>

</ContentTemplate>
<Triggers>
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="DataBinding" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="DataBound" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="Disposed" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="Init" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="Load" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="PageIndexChanged" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="PageIndexChanging" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="PreRender" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="RowCancelingEdit" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="RowCommand" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="RowCreated" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="RowDataBound" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="RowDeleted" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="RowDeleting" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="RowEditing" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="RowUpdated" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="RowUpdating" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="SelectedIndexChanged" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="SelectedIndexChanging" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="Sorted" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="Sorting" />
<asp:AsyncPostBackTrigger ControlID="gvFeatureCustomer" EventName="Unload" />
</Triggers>

</asp:UpdatePanel> 
```

ScriptManager 位于母版页内。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:02:59.187

我已经找到了解决方案。我已经使用脚本管理器在页面上注册了 asyncpostbackcontrol 事件，它现在可以工作了！

代码是这样的：

```
ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(tbValue); 
```

感谢你们对我的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:07:07.710

考虑内容页面的呈现方式。除了用于引用母版页的“页面”标签（可能还有程序集的注册标签等）之外，内容页面通常不应包含任何代码。您希望出现在内容选项卡之外的任何代码实际上都应该放在母版页中。

如果您需要进一步的帮助，这是一个非常好的教程：

*   [了解更新面板和触发器](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)

您可以这样想：当您查看作为内容页面的 asp 网页时，母版页就是实际页面。它将始终是显示的页面。当您在内容页面中放置 ContentPlaceHolder 时，它会忽略母版页上相应 ContentPlaceHolder 中的任何代码。同样，如果您将代码放在内容页面内但在 ContentPlaceHolder 之外，它也将被忽略。

仅供参考：就像我说的那样，这只是我对它的抽象理解，所以如果我错了，请随时纠正我！！:) 祝你的网站好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-07T09:24:18.137

就我而言，Gridview RowCommand 可以`<asp:Button>`在 updatePanel 中触发（我使用 Visual Studio 2012）

# android - 如何仅为我的 UI 测试项目添加额外的 Android 权限？

> ID：14142857
> 
> 赞同：30
> 
> 时间：2013-01-03T16:21:54.743
> 
> 标签：android, testing

`InstrumentationTestCase2`为了纯粹的测试目的，我尝试在派生的测试用例中将文件写入外部 SD 卡。`android.permission.WRITE_EXTERNAL_STORAGE`当在被测应用程序的文件中配置时，这一切正常，但如果此设置仅存在于测试项目`AndroidManifest.xml`的文件中，则不起作用。`AndroidManifest.xml`

自然，我不想将此权限添加到主清单中，因为我只在功能测试期间需要此功能。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-07T13:00:07.687

简而言之，您应该`android:sharedUserId`为应用程序的清单和测试项目的清单添加相同的内容，并为测试项目声明必要的权限。

这种解决方法来自这样一个事实，即 Android 实际上将权限分配给 linux 用户帐户 (uid) 而不是应用程序本身（默认情况下，每个应用程序都有自己的 uid，因此看起来权限是为每个应用程序设置的）。

但是，使用相同证书签名的应用程序可以共享相同的 uid。因此，它们具有一组共同的权限。例如，我可以拥有请求 WRITE_EXTERNAL_STORAGE 权限的应用程序 A 和请求 INTERNET 权限的应用程序 B。A 和 B 都由同一个证书签名（比如说调试一个）。在 A 和 B 的 AndroidManifest.xml 文件中，`android:sharedUserId="test.shared.id"`在`<manifest>`标记中声明。然后 A 和 B 都可以访问网络并写入 sdcard，即使他们只声明了部分所需权限，因为权限是按 uid 分配的。当然，这只有在实际安装了 A 和 B 时才有效。

这是一个如何设置测试项目的示例。应用程序的 AndroidManifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testproject"
    android:versionCode="1"
    android:versionName="1.0"
    android:sharedUserId="com.example.testproject.uid">

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name">
        <activity
            android:name="com.example.testproject.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />    
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

以及用于测试项目的 AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testproject.test"
    android:sharedUserId="com.example.testproject.uid"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <instrumentation
        android:name="android.test.InstrumentationTestRunner"
        android:targetPackage="com.example.testproject" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <uses-library android:name="android.test.runner" />
    </application>

</manifest> 
```

此解决方案的缺点是，在安装测试包时，应用程序也能够写入外部存储。如果它不小心将某些内容写入存储，它可能会一直被忽视，直到发布时，包将使用不同的密钥进行签名。

可以在[http://developer.android.com/guide/topics/security/permissions.html#userid](http://developer.android.com/guide/topics/security/permissions.html#userid)找到有关共享 UID 的一些附加信息。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-04-11T13:07:45.843

还有另一个简单的答案。

中设置权限`src/debug/AndroidManifest.xml`。如果该文件不存在，请创建它。

默认情况下，`debug`AndroidTest 用作 BuildType，因此如果您在此处定义测试权限，那么清单合并过程会将这些权限添加到您的 UI 测试构建中。

这是具有新权限的清单。请注意，我没有包含该`package`属性，因为它将继承自较低优先级的清单。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
</manifest> 
```

* * *

此外，如果您想将这些权限应用于除 之外的 buildType `debug`，那么只需将您的新权限移动`AndroidManifest.xml`到您想要的文件夹中，然后使用：

```
android {
   ...
   testBuildType 'release' // or other buildType you might have like 'testUI'
} 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-01-07T11:41:37.997

以编程方式进行，因为生成的调试类的调试模式将在这些条件下进行调试。

# asp.net-mvc-3 - MVC3：将 ICollection 从视图传递到控制器

> ID：14142859
> 
> 赞同：2
> 
> 时间：2013-01-03T16:21:56.110
> 
> 标签：asp.net-mvc-3, view, controller, icollection

我有一个类型为 icollection 的模型。

```
public class myClass{
   public string param1{get; set;}
   public string param2{get; set;}
   public virtual ICollection<myClass2> param3{get; set;}

   public myClass()
   {
       param3 = new hashSet<myClass2>();
   }

}

public class myClass2{
   public string param4{get; set;}
   public string param5{get; set;}
   public virtual myClass param6{get; set;}
} 
```

我将包含这两个类的模型传递给我的视图，并且能够通过使用查看我的收藏中的项目`foreach(var item in Model.myClass.param3)`

我将这些项目存储在一个隐藏字段中以在我的控制器中检索它

```
foreach(var item in Model.myClass.param3){
      @Html.HiddenFor(model => item.parm4);
      @Html.HiddenFor(model => item.parm5);
 } 
```

但是当我提交表单并将模型传递给控制器​​时，我在调用 model.myClass.param3 时得到一个 count = 0。

如何将 ICollection 传递给我的视图？我试过[这个链接](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)，但不知道为什么它不起作用。

**编辑**

该链接使用类 Book 作为列表以进行索引（建议我应该将 ICollection 转换为列表）。我怎么做？另外，如果我将它转换为列表，我如何将它传递给控制器​​，因为控制器期望接收 IColletiion？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:46:05.090

您不能为此使用 foreach 循环，而必须使用 for 循环。

```
for (int i=0; i<Model.MyClass.param3.Count; i++)
    {
        @Html.HiddenFor( model => model.MyClass.param3[i])
    } 
```

这样做的原因是`HiddenFor`帮助程序需要某种方式为每个字段分配唯一名称，以便模型绑定工作。`i`变量实现了这一点。

在您的情况下，您需要进行一些重构来实现这一点。我不认为`ICollection`或不`HashSet`支持索引，因此您需要将其转换为支持索引的`List`集合。

请参阅有关该主题的[出色博客文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)。

# c# - Scrollviewer 和滚动方向（垂直与水平）

> ID：14142865
> 
> 赞同：0
> 
> 时间：2013-01-03T16:22:18.237
> 
> 标签：c#, wpf, xaml

我想要一个具有垂直滚动的文本块。我有以下 XAML

```
 <ScrollViewer HorizontalAlignment="Left" Height="90" Margin="10,416,0,0" VerticalAlignment="Top" Width="463" VerticalScrollBarVisibility="Auto"  HorizontalScrollBarVisibility="Auto" CanContentScroll="True" >
        <TextBlock Name="txtConfigPath" Text="" >                
        </TextBlock>
    </ScrollViewer> 
```

这会产生一个仅水平滚动的文本块。我已经尝试了我能想到的一切，但这个控件只想水平滚动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:35:00.080

您在这里有几个选择。您可以`TextWrapping=Wrap`在`TextBlock`和Horizo​​ntalScrolling`Disable`上`ScrollViewer`设置，或者您可以`TextWrapping`在 TextBlock 上设置 并为您设置固定宽度，`TextBlock`或者您可以将其绑定`MaxWidth`到类似`ActualWidth`的`ScrollViewer``TextBlock MaxWidth="{Binding RelativeSource={RelativeSource AncestorType=ScrollViewer}, Path=ActualWidth}"`

希望这会有所帮助，干杯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T17:44:43.190

添加一个行定义为 * 的网格以容纳您的 ScrollViewer 和 Auto 用于其他行（如页眉和页脚）。为 ScrollViewer 添加以下代码：

```
<UserControl ...>

<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <TextBlock><Run Text="Some text"/></TextBlock>

    <ScrollViewer 
        Grid.Row="1" 
        CanContentScroll="True" 
        VerticalScrollBarVisibility="Auto" 
        HorizontalScrollBarVisibility="Disabled" 
        MinWidth="{Binding ActualWidth, 
            BindsDirectlyToSource=True, 
            ElementName=userControl, Mode=OneWay}"> 
```

# ios - 在 Core Data 中重新打开应用程序后如何保存布尔值以显示其值

> ID：14142870
> 
> 赞同：0
> 
> 时间：2013-01-03T16:22:43.033
> 
> 标签：ios, core-data

我有一个核心数据，可以保存解析的提要并存储它。然后它会显示该提要，并且我在每个表格视图单元格中都有一个按钮，即使应用程序处于脱机状态，该按钮也会为单元格添加书签以显示它。

这是按钮的代码。

```
- (void)clickedButton:(UIButton*)sender {

    NSLog(@"Row: %d", sender.tag);

    NSIndexPath* indexPath = [NSIndexPath indexPathForRow:sender.tag inSection:0];
    Stories *story = (Stories *)[self.fetchedResultsController objectAtIndexPath:indexPath];
    BOOL isSaved = [story.isBookmarked boolValue];
    story.isBookmarked = [NSNumber numberWithBool:!isSaved];

    [self.tableView reloadData]; 
```

我的问题是：即使应用程序重新启动，我如何保存 bool 值以显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:49:20.847

你可以使用 NSUserDefaults。使用此代码，您可以节省您的价值

[[NSUserDefaults standardUserDefaults] setBool: forKey: ];

使用这种方法，您甚至可以让自己的值出现在 iOS 设备设置中。只需添加 Setting.bundle 并定义您想要的。

另一种方法是使用 NSCoding 协议。它更简单，但最终用户无法看到您存储的值。

# bash - 递归 ls 和 grep 会比在大型文件系统上查找更快吗？

> ID：14142871
> 
> 赞同：2
> 
> 时间：2013-01-03T16:22:48.650
> 
> 标签：bash, shell, recursion, filesystems, find

我有一个可以使用理论答案的问题。

我正在为具有特定属性的所有文件搜索一个 100+TB 的大型卷。为此，我一直在使用“查找”命令，因为它可以完成我想要的一切。

也就是说，除了在合理的时间内运行。我意识到遍历一个巨大的文件系统在任何情况下都会很耗时，但我想到了一个可能的解决方案。

如果可能的话，如果可以递归地使用 ls 和 grep 怎么办？注意：下面的代码在语法上并不正确。这仅用于说明。

```
my_ls{
    # get a listing of all files in the directory passed
    var=`ls -lsa $1`
    # iterate over each file/directory returned by ls
    for each file/directory in $var
        if $each is a directory
            my_ls $each
    done
    # search the lines output from ls for the attributes
    echo $var | grep $searchstring
} 
```

这个想法总体上会比查找大型文件系统更快吗？内存需求可能会很快变大，但不会太大。~~也可以将其并行化，并将线程卸载到 GPU 以加快处理速度（不是我知道的 bash，但一般来说）。~~

编辑：是的，在大多数情况下，我对建议并行化 io-bound 操作很不满意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T16:31:42.923

使用`ls`and`grep`不仅速度更慢（增加了分叉、等待、读取和写入管道等的开销）；这也是**不正确**的。

请参阅[http://mywiki.wooledge.org/ParsingLs](http://mywiki.wooledge.org/ParsingLs)以了解为什么`ls`在脚本中使用是邪恶的（在“导致错误，其中一些是可安全利用的”意义上）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T16:27:42.330

我*强烈*怀疑重复生成进程的开销将远远超过需要多少资源`find`。您应该考虑资源瓶颈在哪里，并且对于导航文件系统，它将是磁盘访问。CPU 可以忽略不计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T16:28:09.033

我猜没有。两者都是同步操作，但你必须启动一个全新的递归进程，这有其自身的开销。如果您希望加快操作速度，我建议您使用 map/reduce 模型。

通常在解析文件或数据库内容时使用 map/reduce，但这个想法可以适应您的情况。下面是map/reduce的介绍：[http ://www-01.ibm.com/software/data/infosphere/hadoop/mapreduce/](http://www-01.ibm.com/software/data/infosphere/hadoop/mapreduce/)

* * *

编辑：

正如许多人在这里所指出的，这是一个 IO 绑定的过程，map/reduce 的典型实现是一个具有许多 mapper 和 reducer 的并行系统，但这并不意味着您不能从将任务拆分为 map 函数中受益和一个减少功能。map/reduce**模型**仍然有用。

对于我的提议，映射器应该是一个线程，它递归地查找指定路径下的所有文件。然后，reducer 评估文件是否由正确的用户（或您拥有的任何谓词）拥有。

这将 IO 与评估分离，这意味着 IO 线程永远不会暂停评估。这可能只会为每个文件节省一微秒，但在大型文件系统上，它可以显着节省。

我所描述的并不完全是人们知道和熟悉的 map/reduce，但它足够相似，可以作为一个有用的起点。

# javascript - 两次引用同一个js文件有什么不良影响吗？

> ID：14142879
> 
> 赞同：0
> 
> 时间：2013-01-03T16:23:13.840
> 
> 标签：javascript, jquery

我已经阅读了为什么让某人（比如 Google）托管 jQuery 和其他 js 文件是一件好事的原因。但是，我有一个客户，其域名如 googlecode.com 和 googleapis.com 被阻止（政府机构）。

我想保留 Google 托管的 js 文件，但在我的服务器上也有一个用于上述客户端的本地副本（这只是我的客户端的一小部分，但很重要）。

在同一页面中引用相同的 js 文件是否会导致任何问题？

这基本上是它在我的源代码中的样子，1 个依次列出：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/js/local/jquery.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T16:25:19.077

当您使用`<script>`元素在页面中包含脚本时，您不会“引用”它：您会**执行**它。

所以它完全取决于脚本。

例如，jQuery 不会中断太多，第二次执行将简单地替换 and 的第一个值`window.jquery`，`window.$`这只需要一些（少量）额外时间。

其他脚本可能没有准备好重复执行。

一般来说，我会说你应该努力避免这种重复。这不干净，并且会减慢页面速度。如果您不能简单地使用自己的 jQuery 副本，我建议您部署两个版本的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:26:45.570

使用 HTML5 Boilerplate 推广的模式是最有效的方法。仅当无法访问来自 Google 的文件时，它才会加载您的本地文件。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.3.min.js"><\/script>')</script> 
```

# ruby-on-rails - 使用 Rails 预编译其他资产

> ID：14142882
> 
> 赞同：3
> 
> 时间：2013-01-03T16:23:16.557
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, asset-pipeline

我一直在将一个项目转换为使用资产管道，但在部署的一部分中遇到了困难。将上限部署到生产服务器后，我收到以下错误。（在开发模式下一切正常，无需预编译资产）

```
simile-ajax-api.js isn't precompiled 
```

项目结构类似于

```
|-app/
  |-assets/
    |-javascripts/
      |- application.js
|-vendor/
  |-assets/
    |-javascripts/
    |-timeline/
      |-timeline_ajax/
        |-simile-ajax-api.js 
```

在我的 application.rb 我添加了以下行

```
config.assets.paths << "vendor/assets/timeline/timeline_ajax" 
```

在我的production.rb中，我添加了

```
 precompile_list = %w(app lib vendor).map do |path|
    Dir[Rails.root.join(*%W(#{path} assets ** *))].select do |f|
      f =~ /(\.js|\.s?css)/
    end
  end.flatten.map do |f|
    f.split(File::SEPARATOR).last
  end.uniq
config.assets.precompile = (config.assets.precompile + precompile_list).uniq
config.assets.precompile << Rails.root.join(*%w( vendor assets timeline timeline_ajax simile-ajax-api.js )) 
```

application.js 看起来像这样：

```
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require global
//= require_tree ../../../vendor/assets/timeline/timeline_ajax/.
//= require_tree ../../../vendor/assets/timeline/timeline_js/.
//= require timeline-api
//= require jquery.dataTables.min
//= require FixedHeader.min
//= require ColVis.min
//= require jquery.ba-resize.min
//= require jquery-ui
//= require jquery.blockUI
//= require jquery-ui-timepicker-addon
//= require autocomplete-rails
//= require_tree ../../../vendor/assets/javascripts/.
//= require_tree . 
```

最后，它在 application.html.haml 中加载的位置是

```
%html
  %head
    - page_title = @page_title ? "#{@page_title}" : ''
    %title= strip_tags page_title

    :javascript
      Timeline_ajax_url= "#{asset_path('simile-ajax-api.js')}";
      Timeline_urlPrefix= '/assets/';
      Timeline_parameters='bundle=true' 
```

知道我哪里出错了吗？如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:52:35.550

我认为没有必要像这样声明路径：

```
//= require_tree ../../../vendor/assets/timeline/timeline_ajax/. 
```

只是 ：

```
//= require_tree timeline/timeline_ajax/. 
```

因为所有资产（无论位于何处）都以相同的方式查找。简单地说 - 如果 dir 被命名`assets`，管道会查找要包含的文件。

编辑： 看起来您的`vendor`目录结构有点奇怪：通常您将`.js`文件直接复制到`assets/javascripts`目录。我认为包括`assets/vendor/timeline`会使事情变得复杂。只需将`timeline`dir 复制到`vendor/assets/javascripts`.

# c# - XMLSerializer 不断大写集合中的项目

> ID：14142884
> 
> 赞同：7
> 
> 时间：2013-01-03T16:23:26.930
> 
> 标签：c#, collections, xml-serialization, wrapper, camelcasing

我需要在驼色外壳中导出一组物品，为此我使用了一个包装器。

类本身：

```
[XmlRoot("example")]
public class Example
{
    [XmlElement("exampleText")]
    public string ExampleText { get; set; }
} 
```

这可以很好地序列化：

```
<example>
    <exampleText>Some text</exampleText>
</example> 
```

包装：

```
[XmlRoot("examples")]
public class ExampleWrapper : ICollection<Example>
{
    [XmlElement("example")]
    public List<Example> innerList;

    //Implementation of ICollection using innerList
} 
```

然而，`Example`由于某种原因，这将包装的 s 大写，我试图用它覆盖它，`XmlElement`但这似乎没有达到预期的效果：

```
<examples>
    <Example>
        <exampleText>Some text</exampleText>
    </Example>
    <Example>
        <exampleText>Another text</exampleText>
    </Example>
</examples> 
```

谁能告诉我我做错了什么或者是否有更简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T16:51:31.063

问题是它`XmlSerializer`具有对集合类型的内置处理，这意味着`innerList`如果您的类型碰巧实现，它将忽略您的所有属性和字段（包括 ），`ICollection`并且只会根据自己的规则对其进行序列化。但是，您可以自定义它用于具有`XmlType`属性的集合项的元素的名称（与`XmlRoot`您在示例中使用的相反）：

```
[XmlType("example")]
public class Example
{
    [XmlElement("exampleText")]
    public string ExampleText { get; set; }
} 
```

这将具有所需的序列化。

请参阅[http://msdn.microsoft.com/en-us/library/ms950721.aspx](http://msdn.microsoft.com/en-us/library/ms950721.aspx)，特别是对“为什么不是集合类的所有属性都序列化？”问题的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:07:12.897

不幸的是，您不能只使用属性来实现这一点。您还需要使用属性覆盖。使用上面的类，我可以使用`XmlTypeAttribute`覆盖类的字符串表示。

```
var wrapper = new ExampleWrapper();
var textes = new[] { "Hello, Curtis", "Good-bye, Curtis" };
foreach(var s in textes)
{
    wrapper.Add(new Example { ExampleText = s });
}

XmlAttributeOverrides overrides = new XmlAttributeOverrides();
XmlAttributes attributes = new XmlAttributes();
XmlTypeAttribute typeAttr = new XmlTypeAttribute();
typeAttr.TypeName = "example";
attributes.XmlType = typeAttr;
overrides.Add(typeof(Example), attributes);

XmlSerializer serializer = new XmlSerializer(typeof(ExampleWrapper), overrides);
using(System.IO.StringWriter writer = new System.IO.StringWriter())
{
    serializer.Serialize(writer, wrapper);
    Console.WriteLine(writer.GetStringBuilder().ToString());
} 
```

这给

```
<examples>
  <example>
    <exampleText>Hello, Curtis</exampleText>
  </example>
  <example>
    <exampleText>Good-bye, Curtis</exampleText>
  </example>
</examples> 
```

我相信你想要的。

# objective-c - 架构 x86_64 的未定义符号：“_CACurrentMediaTime”

> ID：14142887
> 
> 赞同：1
> 
> 时间：2013-01-03T16:23:32.057
> 
> 标签：objective-c, datetime

> **可能重复：**
> [由 CACurrentMediaTime() 引起的体系结构 i386 编译错误的未定义符号](https://stackoverflow.com/questions/8549335/undefined-symbol-for-architecture-i386-compile-error-caused-by-cacurrentmediatim)

我试图使用这个函数：CACurrentMediaTime()，因为我需要当前时间但我得到了这个错误

```
Ld /Users/aruffolo/Library/Developer/Xcode/DerivedData/Star-hbmohpuyghsjeseyswvvpevxkesj/Build/Products/Debug/Star.app/Contents/MacOS/Star normal x86_64
cd "/Users/aruffolo/Documents/Programmazione/Learning Objective-c/Star"
setenv MACOSX_DEPLOYMENT_TARGET 10.8
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/aruffolo/Library/Developer/Xcode/DerivedData/Star-hbmohpuyghsjeseyswvvpevxkesj/Build/Products/Debug -F/Users/aruffolo/Library/Developer/Xcode/DerivedData/Star-hbmohpuyghsjeseyswvvpevxkesj/Build/Products/Debug -filelist /Users/aruffolo/Library/Developer/Xcode/DerivedData/Star-hbmohpuyghsjeseyswvvpevxkesj/Build/Intermediates/Star.build/Debug/Star.build/Objects-normal/x86_64/Star.LinkFileList -mmacosx-version-min=10.8 -fobjc-arc -fobjc-link-runtime -framework SystemConfiguration -framework CoreMedia -framework Cocoa -o /Users/aruffolo/Library/Developer/Xcode/DerivedData/Star-hbmohpuyghsjeseyswvvpevxkesj/Build/Products/Debug/Star.app/Contents/MacOS/Star

Undefined symbols for architecture x86_64:
  "_CACurrentMediaTime", referenced from:
  -[MyView runLoop] in MyView.o
ld: symbol(s) not found for architecture x86_64 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T16:28:18.530

将 QuartzCore 框架添加到您的项目中。

# php - 使用 curl 和 PHP 从 PHP URL 保存图像

> ID：14142890
> 
> 赞同：0
> 
> 时间：2013-01-03T16:23:50.823
> 
> 标签：php

我试图从 PHP 链接下载图像。当我在浏览器中尝试链接时，它会下载图像。我启用了 curl 并将“allow_url_fopen”设置为 true。我已经使用了这里讨论的方法[从 PHP URL 保存图像，](https://stackoverflow.com/questions/724391/saving-image-from-php-url-using-php)但它没有用。我也试过“file_get_contents”，但没用。我做了一些改变，但它仍然不起作用。这是代码

```
$URL_path='http://…/index.php?r=Img/displaySavedImage&id=68';
$ch = curl_init ($URL_path);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
$raw=curl_exec($ch);
curl_close ($ch);
$fp = fopen($path_tosave.'temp_ticket.jpg','wb');
fwrite($fp, $raw);
fclose($fp); 
```

你有什么想法让它起作用吗？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:33:10.713

您可以将其用作函数：

```
function getFile($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    $tmp = curl_exec($ch);
    curl_close($ch);
    if ($tmp != false){
        return $tmp;
    }
} 
```

并称之为：

```
$content = getFile(URL); 
```

或将其内容保存到文件中：

```
file_put_contents(PATH, getFile(URL)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:31:45.950

```
<?php
    if( ini_get('allow_url_fopen') ) {
      //set the index url
      $source  = file_get_contents('http://…/index.php?r=Img/displaySavedImage&id=68');
      $filestr = "temp_ticket.jpg";
      $fp = fopen($filestr, 'wb');
      if ($fp !== false) {
        fwrite($fp, $source);
        fclose($fp);
      }
      else {
        // File could not be opened for writing
      }
    }
    else {
      // allow_url_fopen is disabled
      // See here for more information:
      // http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen
    }
?> 
```

这是我用来保存没有扩展名的图像（服务器生成的动态图像）。希望对你有效。只需确保**文件路径位置**是完全限定的并指向图像。正如@ComFreek 指出的那样，您可以使用`file_put_contents`相当于`fopen(), fwrite() and fclose()`连续调用将数据写入文件。[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:28:31.317

您在第一行缺少结束引号和分号：

```
$URL_path='http://…/index.php?r=Img/displaySavedImage&id=68'; 
```

此外，您的 URL 在其中，但您根据问题中的代码使用未定义的URL进行`$URL_path`初始化。`cURL``$path_img`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T16:29:33.987

为什么`file_get_contents()`在工作时使用 cURL？

```
<?php

    $img = 'http://…/index.php?r=Img/displaySavedImage&id=68';

    $data = file_get_contents( $img );

    file_put_contents( 'img.jpg', $data );

?> 
```

# r - R 中的复杂合并以标记不匹配的观察结果？

> ID：14142891
> 
> 赞同：1
> 
> 时间：2013-01-03T16:24:01.350
> 
> 标签：r, function, merge, append, apply

我正在尝试将两个数据集连接在一起。称它们为 x 和 y。我相信 y 中的 ID 变量是 x 中的 ID 变量的子集。但不是纯粹意义上的，因为我知道 x 包含的 ID 比 y 多，但我不知道映射。也就是说，x 和 y 中的一些（但不是全部）ID 可以 1:1 匹配。

我的最终目标是找出这种 1:1 映射失败的地方并标记这些观察结果。我认为合并将是要走的路，但也许不是。下面是一个例子：

```
id <- c(1:10, 1:100)

X1 <- rnorm(110, mean = 0, sd = 1)
year <- c("2004","2005","2006","2001","2002") 
year <- rep(year, 22)

month = c("Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar","Apr")
month <- rep(month, 11)

#dataset X
x <- cbind(id, X1, month, year)

#dataset Y
id2 <- c(1:10, 200)
Y1 <- rnorm(11, mean = 0 , sd = 1)
y <- cbind(id2,Y1)

#merge on the IDs; but we get an error because when id2 == 200 in y we don't 
#have a match in x 
result <- merge(x, y, by.x="id", by.y = "id2", all =TRUE) 
```

合并引发错误，因为 id2 == 200 在 x 数据集中没有匹配项。不幸的是，我丢失了身份证和所有信息！（它应该等于第 111 行中的 200）：

```
tail(result) 
      id                   X1 month year         Y1
106   95  -0.0748386054887876   Nov 2002         NA
107   96    0.196765325477989   Dec 2004         NA
108   97    0.527922135906927   Jan 2005         NA
109   98    0.197927230533413   Feb 2006         NA
110   99 -0.00720474886698309   Mar 2001         NA
111 <NA>                 <NA>  <NA> <NA> -0.9664941 
```

更重要的是，我在合并文件中的 ID 变量上得到了重复的观察结果。id2 == 1 观察只存在一次，但它只是复制了两次（例如 Y1 两次取值 1.55）。

```
head(result)
   id                 X1 month year       Y1
1   1  -0.67371266313441   Jul 2004 1.553220
2   1 -0.318666983469993   Jul 2004 1.553220
3  10 -0.608192898092431   Apr 2002 1.234325
4  10  -0.72299929212347   Apr 2002 1.234325
5 100 -0.842111221826554   Apr 2002       NA
6  11  -0.16316681842082   Jul 2004       NA 
```

这种合并使事情比我预期的要复杂。我希望我可以检查 x 中的每个观察结果，并找出 id 与 y 中的 id2 匹配的位置，并标记那些不匹配的位置。所以我会得到一个新的向量，称为标志，如果 x$id 在 y$id2 中有匹配项，则取值为 1，否则取值为 0。这样，我就可以知道 1:1 映射失败的地方。通过重新编码 NA，我可能会对此有所了解，但是当 id2 == 200 时抛出的错误呢？它只是丢弃信息。

我试过按行追加，但没有运气，看起来我也应该放弃合并，也许最好用一个循环或函数来做一些事情：

对于 x 中的每个观察

id2 = which(id2) 对应 id-month-year

如果上面的长度== 1，则标志 = 1，否则为 0

等等

希望这一切都有意义。我将非常感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:58:11.690

合并失败的原因是您为 x 和 y 提供了两种不同的结构（一个是数字矩阵，另一个是字符矩阵）。使用`cbind`何时`data.frame`应该选择是失败的常见策略。

```
> str(x)
 chr [1:110, 1:4] "1" "2" "3" "4" "5" "6" "7" "8" "9" "10" "1" "2" ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:4] "id" "X1" "month" "year"
> str(y)
 num [1:11, 1:2] 1 2 3 4 5 6 7 8 9 10 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:2] "id2" "Y1" 
```

如果您使用了该`data.frame`功能（因为`merge`应该使用数据帧），它将成功：

```
> x <- data.frame(id, X1, month, year); y <- data.frame(id2,Y1)
> str( result <- merge(x, y, by.x="id", by.y = "id2", all =TRUE) )
'data.frame':   111 obs. of  5 variables:
 $ id   : num  1 1 2 2 3 3 4 4 5 5 ...
 $ X1   : num  1.5063 2.5035 0.7889 -0.4907 -0.0446 ...
 $ month: Factor w/ 10 levels "Apr","Aug","Dec",..: 6 6 2 2 10 10 9 9 8 8 ...
 $ year : Factor w/ 5 levels "2001","2002",..: 3 3 4 4 5 5 1 1 2 2 ...
 $ Y1   : num  1.449 1.449 -0.134 -0.134 -0.828 ...

> tail( result <- merge(x, y, by.x="id", by.y = "id2", all =TRUE) )
     id         X1 month year        Y1
106  96 -0.3869157   Dec 2004        NA
107  97  0.6373009   Jan 2005        NA
108  98 -0.7735626   Feb 2006        NA
109  99 -1.3537915   Mar 2001        NA
110 100  0.2626190   Apr 2002        NA
111 200         NA  <NA> <NA> -1.509818 
```

如果您的“x”参数中有重复项，那么您*应该*在结果中得到重复项。然后，您有责任`!duplicated`以您认为合适的任何方式使用（在合并之前或之后），但您不能期望`merge`为您做出这样的决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:36:53.077

如果您正在寻找 in`x$id`中的哪些东西`y$id2`，那么您可以使用

```
x$id %in% y$id2 
```

得到一个返回匹配的逻辑向量。但是，它不保证一对一的通信；只是一对多。然后，您可以将此向量添加到您的数据框中

```
x$match.y <- x$id %in% y$id2 
```

查看 中的哪些行`x`有对应的 ID `y`。

要查看哪些观察结果是一对一的，您可以执行类似的操作

```
y$id2[duplicated(y$id2)] #vector of duplicate elements in y$id2
(x$id %in% y$id2) & !(x$id %in% y$id2[duplicated(y$id2)]) 
```

过滤掉在`y$id2`. 您还可以将其添加到`x`：

```
x$match.y.unique <- (x$id %in% y$id2) & !(x$id %in% y$id2[duplicated(y$id2)]) 
```

可以执行相同的过程`y`来确定`y`匹配的行`x`，以及唯一匹配的行。

# java - 如何使用多个 gae 应用程序进行流量拆分/负载平衡？

> ID：14142894
> 
> 赞同：-4
> 
> 时间：2013-01-03T16:24:09.900
> 
> 标签：java, google-app-engine, load-balancing

例如，我有 5 个 gae 应用程序提供相同的 restful 服务（不用担心数据问题），如何将请求平均分配给 5 个具有相同域名的应用程序？

什么是负载平衡最快速和最简单的等待？

我正在使用带有 gae 的 java 并拥有一个我不拥有任何真机服务器的域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:53:56.880

你不能是简单的答案。您正在尝试做的**正是 GAE 为您所做的**，也是 GAE 的重点。根本没有意义，而且正如 Wooble 指出的那样，这也是违反 TOS 的（我没有提到手，但之前有人问过）。

所以咬紧牙关，启用计费，让 GAE 为您做负载平衡。这实质上意味着当您当前的实例需要超过约 1 秒的时间来响应时，它将启动一个新实例。

# c# - 无法使用 C# 中的 P/INVOKE 发送 VK_SHIFT

> ID：14142895
> 
> 赞同：0
> 
> 时间：2013-01-03T16:24:10.313
> 
> 标签：c#, .net, winapi, interop

我们正在尝试处理 C# 中的文件下载对话框（来自 IE）。

我们要做的是通过向窗口发送消息（Home、CTRL-A、Backspace）来清除对话框中的文本框。

我在这里粘贴了一些代码，但不是全部，但似乎没有触发 CTRL 键（我没有看到突出显示的实际文本）：

```
// HOME DOWN
NativeMethods.SendMessage(new HandleRef(null, _hwnd), NativeMethods.WM_KEYDOWN, new IntPtr(0x24), IntPtr.Zero);
Thread.Sleep(1000);

// HOME UP
NativeMethods.SendMessage(new HandleRef(null, _hwnd), NativeMethods.WM_KEYUP, new IntPtr(0x24), IntPtr.Zero);
Thread.Sleep(1000);

// CTRL DOWN
NativeMethods.SendMessage(new HandleRef(null, _hwnd), NativeMethods.WM_KEYDOWN, new IntPtr(0x11), IntPtr.Zero);
Thread.Sleep(1000);

// END DOWN
NativeMethods.SendMessage(new HandleRef(null, _hwnd), NativeMethods.WM_KEYDOWN, new IntPtr(0x41), IntPtr.Zero);
Thread.Sleep(1000);

// END UP
NativeMethods.SendMessage(new HandleRef(null, _hwnd), NativeMethods.WM_KEYUP, new IntPtr(0x41), IntPtr.Zero);
Thread.Sleep(1000);

// CTRL UP
NativeMethods.SendMessage(new HandleRef(null, _hwnd), NativeMethods.WM_KEYUP, new IntPtr(0x11), IntPtr.Zero);
 Thread.Sleep(5); 
```

将 SendMessage 函数与 WM_KEYUP 和 WM_KEYDOWN 消息结合使用时，我有什么遗漏吗？

SendMessage 函数声明如下：

```
[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
internal static extern IntPtr SendMessage(HandleRef hWnd, uint Msg, IntPtr wParam, IntPtr lParam); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:27:56.677

请尝试使用[keybd_event](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304%28v=vs.85%29.aspx) API 函数。

# r - 如何在不重新启动 R 的情况下禁用软件包？

> ID：14142897
> 
> 赞同：11
> 
> 时间：2013-01-03T16:24:28.583
> 
> 标签：r, package

> **可能重复：**
> [如何在不重新启动 R 的情况下卸载包？](https://stackoverflow.com/questions/6979917/how-to-unload-a-package-without-restarting-r)

要将包加载到 R 中，我们可以使用`library(.)`或`require(.)`. 如何在编码会话期间禁用包。我想要的东西是相反的`require(.)`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T16:26:02.610

我想也许你正在寻找`detach(package:splines, unload = TRUE)`.

正如您可能从下面的评论中收集到的那样，请务必仔细阅读详细信息部分，`?detach`以确保您确切知道在使用或不使用`unload`and`force`参数时会发生什么。

# ruby - 如何使用 Nokogiri 从图像标签中抓取文本？

> ID：14142902
> 
> 赞同：2
> 
> 时间：2013-01-03T16:24:48.240
> 
> 标签：ruby, xml, image, nokogiri

我需要从格式如下的图像标签列表中获取文本：

```
<img src="/images/TextImage.ashx?text=Richmond" style="border-width:0px;" class=""> 
```

当我将 XPath 输入 Nokogiri 时，我得到：

```
[#<Nokogiri::XML::Element:0x80513954 name="img" attributes=[#<Nokogiri::XML::Attr:0x805138dc name="src" value="/images/TextImage.ashx?text=Richmond">, #<Nokogiri::XML::Attr:0x805138b4 name="style" value="border-width:0px;">]>] 
```

有什么办法可以告诉 Nokogiri 归还“Richmond”吗？我正在寻找一种在某个字符串之后返回文本的方法。如果没有办法只获得“里士满”，我该如何让它返回值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:45:11.460

`src`您可以使用 xpath 表达式提取属性，例如

```
src = doc.at_xpath '//img/@src' 
```

之后，您需要从属性中提取名称，可能使用正则表达式。

例如（这可能需要更多涉及，具体取决于`src`HTML 页面中的属性可能采用的格式）：

```
/\?text=(.*)/ =~ src
puts $1 
```

# ruby - execute_script 的问题

> ID：14142905
> 
> 赞同：0
> 
> 时间：2013-01-03T16:24:57.987
> 
> 标签：ruby, watir, watir-classic

我正在使用以下配置运行 watir-classic 3.3.0：

*   红宝石 1.9.2p290
*   水经典 3.3.0
*   Windows XP 服务包 3
*   即 8

当我尝试在我正在测试的其中一个页面上执行以下脚本时，我收到一个错误

```
@browser.execute_script "window.confirm = function() { return true; }" 
```

错误：

```
WIN32OLERuntimeError: (in OLE method `execScript': )
OLE error code:80020101 in <Unknown>
  Could not complete the operation due to error 80020101.
HRESULT error code:0x80020009
  Exception occurred.
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/page-container.rb:46:in `method_missing'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/page-container.rb:46:in `rescue in execute_script'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/page-container.rb:39:in `execute_script'
    from (irb):7
    from C:/Ruby192/bin/irb:12:in `<main>' 
```

当我查看浏览器的 Javascript 错误时，我得到以下信息：

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET4.0C; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)
Timestamp: Thu, 3 Jan 2013 16:13:47 UTC

Message: Invalid character
Line: 1
Char: 1
Code: 0
URI: file:///C:/Ruby192/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/ext/json2.js

Message: 'JSON' is undefined
Line: 1
Char: 1
Code: 0
URI: http://iis01/XXX/employees/default.asp 
```

注意：我在 IE Javascript 错误日志中多次收到此信息。

该站点没有加载错误，我不知道为什么 JSON2 无法识别为无效字符。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:19:40.720

我这里没有 IE8 可以试用，但你能在你的 IE8 上试用吗？

*   打开 IE8 并转到 about:blank。
*   打开开发者工具并打开脚本选项卡
*   运行这个命令：typeof JSON
*   运行这个命令：typeof JSON.stringify
*   结果是什么？

如果其中任何一个未定义或者您收到错误，则 Watir 会尝试在[PageContainer#with_json2_if_needed 中像这样动态加载 json2.js](https://github.com/watir/watir-classic/blob/master/lib/watir-classic/page-container.rb#L92-L105)：

```
if (!window.JSON || !window.JSON.stringify) {
  var json2=document.createElement('script');
  json2.type='text/javascript';
  json2.src='file:///C:/Ruby192/lib/ruby/gems/1.9.1/gems/watir-classic-3.3.0/lib/watir-classic/ext/json2.js'; 
  document.getElementsByTagName('head')[0].appendChild(json2)
} 
```

您可以尝试从开发人员工具手动运行该代码时会发生什么吗？

如果成功，那么也尝试运行 JSON.stringify：

```
JSON.stringify({value: (function() {window.confirm = function() { return true; }})()}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-17T13:30:54.837

我尝试了很多方法来解决这个问题，比如修改许多 IE（在我的例子中是 10 版）安全设置。一般来说，关闭“保护模式”是可行的，但 Watir 的其余部分不起作用（??）。无论如何，使用 json2.js 的 CDN 版本是可行的。这是猴子补丁（我放入 spec_helper.rb）。

```
module Watir
  module PageContainer

    private

    def with_json2_if_needed source
      %Q[
  (function() {
    if (!window.JSON || !window.JSON.stringify) {
      var json2=document.createElement('script');
      json2.type='text/javascript';
      json2.src='https://cdnjs.cloudflare.com/ajax/libs/json2/20150503/json2.js';
      document.getElementsByTagName('head')[0].appendChild(json2)
    }
    return JSON.stringify({value: (function() {#{source}})()});
  })()
      ]
    end
  end
end 
```

# php - 简单的 Wordpress (PHP) 数组访问。如何从数组中取出一个值

> ID：14142906
> 
> 赞同：0
> 
> 时间：2013-01-03T16:25:00.030
> 
> 标签：php, arrays, wordpress

我是 PHP 新手，正在尝试破解一个 Wordpress 主题。这是我第一次在 PHP 中遇到数组并且不知道如何使用它们......

我有以下代码行：

```
photo url: <?php echo get_post_meta($post->ID, 'member-photo', true);?> 
```

而不是显示我使用自定义字段成员照片上传到 wordpress 记录中的文件的 URL，而是显示“数组”。

如果您查看[http://ebf.websiteinprogress.co.uk/members/scott-griffiths/ ，您可以看到这一点](http://ebf.websiteinprogress.co.uk/members/scott-griffiths/)

我现在明白我需要的 URL 存储在一个数组中，但不知道如何修改我的代码来访问这个值。

我真正想要实现的是使用这个值来渲染图像，所以我需要的最终代码会这样做：

```
<?php if(get_post_meta($post->ID, 'member-photo', true)):?><p><span itemprop="photo"><img src="***URL-TO-GO-HERE***" alt="<?php the_title()?>" title="<?php the_title()?>" width="200"></span></p><?php endif;?> 
```

非常感谢您的帮助。我需要将代码添加到页面中才能完成这项工作，而不是解释如何做到这一点，因为恐怕我在 PHP 方面没有那么有才华。我是一名 SEO，试图让某些东西发挥作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:31:03.467

get_post_meta 总是返回一个数组。您想要的项目是第一个元素，所以您所要做的就是：照片 url: ID, 'member-photo', true)[0];?>

为调试目的查看数组的更好方法是 var_dump(variable);

# php - 在评论网站上以相反的顺序显示评论列表

> ID：14142907
> 
> 赞同：-2
> 
> 时间：2013-01-03T16:25:03.497
> 
> 标签：php, arrays, comments, sorting

在评论网站上，我想首先显示最近的评论。我的代码如下：

```
<div class="comment_list">
    <ol>
      <?php wp_list_comments(array('callback' => 'commentslist')); ?>
    </ol>
  </div> 
```

欢迎任何帮助，感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:26:35.707

```
<div class="comment_list">
    <ol>
      <?php wp_list_comments(array('callback' => 'commentslist', 'reverse_top_level' => false)); ?>
    </ol>
  </div> 
```

[您可以在WordPress Codex](http://codex.wordpress.org/Function_Reference/wp_list_comments)中查看所有可用选项

# android - 使用 database.query() 在 SQlite 和 Android 中插入或更新；

> ID：14142908
> 
> 赞同：7
> 
> 时间：2013-01-03T16:25:06.697
> 
> 标签：android, sqlite, insert

有没有办法改变我的功能：

```
public categorie createCategoria(String categoria) {
            ContentValues values = new ContentValues();
            values.put(MySQLiteHelper.COLUMN_NOME, categoria);
            values.put(MySQLiteHelper.COLUMN_PREF, 0);

            long insertId = database.insert(MySQLiteHelper.TABLE_CATEGORIE, null,
                values);

            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            categorie newCategoria = cursorToCategorie(cursor);
            cursor.close();
            return newCategoria;
          } 
```

这是一个原始插入，我想更改此功能以使其相应更新或插入。我想改变这个，因为我已经在某些地方使用了这个功能，但现在我需要选择是插入一行还是更新（或忽略插入）一行`COLUMN_NOME`。有人可以帮我这样做吗？

我的意思是，只有在没有另一个同名的情况下，我才想插入一个新行（就像往常一样，你知道）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-08-11T21:19:31.770

如果要***插入或更新***，可以使用[insertWithOnConflict()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insertWithOnConflict(java.lang.String,%20java.lang.String,%20android.content.ContentValues,%20int))，具体取决于记录是否存在：

 *```
SQLiteDatabase db = this.getWritableDatabase();

ContentValues contentValues = new ContentValues();
contentValues.put(COLUMN_ID, id);
contentValues.put(COLUMN_VALUE, value);

// this will insert if record is new, update otherwise
db.insertWithOnConflict(TABLE, null, contentValues, SQLiteDatabase.CONFLICT_REPLACE); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-03T16:53:19.447

如果没有受更新影响的行，您可以调用`int nRowsEffected = database.update(...);`该行不存在（或者您冲洗了您的`update()`！），因此您需要调用`database.insert(...)`. 当然如果 nRowsEffected > 0 那么你就完成了。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-03T16:53:38.997

您可以使用 execSQL 并使用 INSERT OR REPLACE

```
String[] args = {"1", "newOrOldCategory"}; // where 1 is the category id
getWritableDatabase().execSQL("INSERT OR REPLACE INTO table_name (idColoumn, categoryColumn) VALUES (?, ?)", args); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-08T09:44:16.627

首先，您具有编写功能，该功能检查`id`特定表中是否存在，例如：

```
 /**
     * @param table_name
     * @param server_id
     * @return
     */
    public boolean isServerIdExist(String table_name, int server_id) {
        long line = DatabaseUtils.longForQuery(mDB, "SELECT COUNT(*) FROM " + table_name + " WHERE id=?",
                new String[]{Integer.toString(server_id)});
        return line > 0;
    } 
```

你必须通过`table_name`并且`id`像这样

```
 /**
     * INSERT in TABLE_ACCOUNT_DEVICE
     **/
    public long insertOrUpdateAccountDevice(int server_id, int account_id,
                                            String device_name, String device_id,
                                            String last_active, String itp,
                                            String utp, int status) {

        ContentValues values = new ContentValues();

        values.put(ACCOUNT_DEVICE_ACCOUNT_ID, account_id);
        values.put(ACCOUNT_DEVICE_DEVICE_NAME, device_name);
        values.put(ACCOUNT_DEVICE_DEVICE_ID, device_id);
        values.put(ACCOUNT_DEVICE_LAST_ACTIVE, last_active);
        values.put(ACCOUNT_DEVICE_ITP, itp);
        values.put(ACCOUNT_DEVICE_UTP, utp);
        values.put(ACCOUNT_DEVICE_STATUS, status); // 0=pending, 1=active, 2=Inactive, -1=not_found

        /**
         * isServerIdExists
         */
        if (isServerIdExists(TABLE_ACCOUNT_DEVICE, server_id)) {
            values.put(ACCOUNT_DEVICE_SERVER_ID, server_id);
            return mDB.insert(TABLE_ACCOUNT_DEVICE, null, values);
        } else {
            return mDB.update(TABLE_ACCOUNT_DEVICE, values, ACCOUNT_DEVICE_SERVER_ID + " =? ",
                    new String[]{Integer.toString(server_id)});
        }
    } 
```

希望它会帮助你。*

# image - 在 R image() 函数中调整行高

> ID：14142913
> 
> 赞同：0
> 
> 时间：2013-01-03T16:25:26.723
> 
> 标签：image, r, heatmap

我正在使用 R 中的 image() 函数绘制几个热图。热图的大小变化很大，因此每个热图都有不同的高度，但是我希望热图中的行高是统一的。所以我从这两个矩阵创建热图，每个单元格的高度在两个热图之间是不同的：

```
m1<-replicate(40, rnorm(20))     
image(1:ncol(m1), 1:nrow(m1), t(m1), axes = FALSE,xlab="",ylab="")

m2<-replicate(40, rnorm(10))
image(1:ncol(m2), 1:nrow(m2), t(m2), axes = FALSE,xlab="",ylab="") 
```

对于我的生活，我无法弄清楚如何指定行高。这一定是一个非常容易解决的问题，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:45:49.103

你提供的信息非常有限。例如，您想创建 PDF 吗？或者在一页上放置多个图？

这是一种解决方案：

```
par(fin=c(5,5),mar=c(0,0,0,0))
image(1:ncol(m1), 1:nrow(m1), t(m1), axes = FALSE,xlab="",ylab="")

par(fin=c(5,2.5),mar=c(0,0,0,0))
image(1:ncol(m2), 1:nrow(m2), t(m2), axes = FALSE,xlab="",ylab="") 
```

我相信有更优雅的解决方案，具体取决于您对图表的实际操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:54:56.340

只需使用`ylim`参数为所有热图设置一个共同的最大行数：

```
m1<-replicate(40, rnorm(20))     
m2<-replicate(40, rnorm(10))

image(1:ncol(m1), 1:nrow(m1), t(m1), axes=FALSE, ann=FALSE, ylim=c(0, max(sapply(list(m1,m2),nrow)) ))
image(1:ncol(m2), 1:nrow(m2), t(m2), axes=FALSE, ann=FALSE, ylim=c(0, max(sapply(list(m1,m2),nrow)) )) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T17:01:19.707

您可能需要手动指定`ylim`参数，并在 2 个图之间设置相同的参数：

```
par(mfrow=c(1,2))

image( 0:ncol(m1), 0:nrow(m1), t(m1), axes=FALSE, xlab='', ylab='', 
        ylim=c(0,nrow(m1)) )
image( 0:ncol(m2), 0:nrow(m2), t(m2), axes=FALSE, xlab='', ylab='',
        ylim=c(0,nrow(m1)) ) 
```

# javascript - jQuery UI 1.9 选项卡中的多个 show() 和 hide() 效果

> ID：14142916
> 
> 赞同：1
> 
> 时间：2013-01-03T16:25:35.010
> 
> 标签：javascript, jquery, jquery-ui

在 jQueryUI 1.9 之前，我可以使用以下方法同时切换不透明度和高度：

```
$('#site-tabs').tabs({
    fx: {opacity: 'toggle', height: 'toggle'},
}); 
```

现在它在[升级指南](http://jqueryui.com/upgrade-guide/1.9/#deprecated-fx-option-use-show-and-hide-options)中被指出`fx`已被弃用，而是使用`show()`and`hide()`方法——我不知道如何将两个效果传递给它。我试过了：

显示：[{效果：“不透明度”}，{效果：“slideToggle”}]

无济于事。任何指针？一如既往的感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T06:53:09.233

@Zach 我知道这已经很老了，但是我遇到了同样的问题，我只是想确认您正在做某事。

您确实可以构建自己的效果：

```
$.fn.slideFadeToggle  = function(speed, easing, callback) {
    return this.animate({opacity: 'toggle', height: 'toggle'}, speed, easing, callback);
}; 
```

并像这样使用它`show: { effect: "slideFadeToggle", duration: 500 }`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:28:43.303

我认为在[文档](http://api.jqueryui.com/tabs/#option-show)中解释得很好。

```
$( ".selector" ).tabs({ show: { effect: "slide", duration: 800 } }) 
```

但是，我不明白在给定新 api 的情况下如何使滑动和淡出。

# .net - 四舍五入

> ID：14142917
> 
> 赞同：0
> 
> 时间：2013-01-03T16:25:37.990
> 
> 标签：.net, rounding

> **可能重复：**
> [Math.Round 不保留尾随零](https://stackoverflow.com/questions/12307630/math-round-not-keeping-the-trailing-zero)
> [如何舍入双精度值但保留尾随零](https://stackoverflow.com/questions/7833284/how-to-round-double-values-but-keep-trailing-zeros)

我有一个小数，我想四舍五入到 2 dp。所以，我使用了 Math.Round()。当我有这样的号码时

```
23.126 
```

我得到了我想要的格式

```
23.13 
```

但是当我有这样的事情时

```
23 
```

我明白了

```
23 
```

我想要的是始终获得 2 dp。所以，在前面的例子中，我想

```
23.00 
```

如果我有

```
23.1 
```

我想要

```
23.10 
```

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:27:57.750

然后你不想四舍五入，你想把它格式化成一个字符串。

```
string formatted = value.ToString("N2"); 
```

# perl - 为什么我从对 IO::Socket::INET->peerhost 的调用中得到一个空字符串？

> ID：14142930
> 
> 赞同：4
> 
> 时间：2013-01-03T16:26:21.903
> 
> 标签：perl

我正在编写一个小脚本来监视是否尝试使用 Perl 5.10.1 在我的 Linux 机器（Centos 6）上访问某些端口。我正在为我的 peerhost 请求取回空白条目。我不确定为什么。听起来这可能是 IO 套接字模块（http://snowhare.com/utilities/perldoc2tree/example/IO/Socket.html）中的故障，但我不太确定。任何见解将不胜感激。

编辑：

由于我启用了严格和警告，在我认为它是空白的情况下，我得到了一个“未初始化的值 $display”。

```
#! /usr/bin/perl
use strict;
use warnings;

use IO::Socket;
use Sys::Syslog qw( :DEFAULT setlogsock);
use threads;

my @threads=();
my @ports=(88,110,389);

main(\@ports);

sub main
{
    my $ports=shift;
    setlogsock('unix');
    openlog($0,'','user');
    for my $port (@{$ports} ) {
        push @threads, threads->create(\&create_monitor, $port );
    }
    $_->join foreach @threads;
    closelog;
# wait for all threads to finish
}

sub create_monitor{
    my $LocalPort=shift;

    my $sock = new IO::Socket::INET (
        LocalPort => $LocalPort,
        Proto => 'tcp',
        Listen => 1,
        Reuse => 1,
        ) or die "Could not create socket: $!\n";

    while(1)
    {
        my $peer_connection= $sock->accept;
        my $display = $peer_connection->peerhost();
        my $message="Connection attempt on port $LocalPort from $display";
        #syslog('info', $message);
        print $message."\n";
    }

} 
```

注意 - 这个脚本永远不会完成是故意的。我最终会用一个初始化脚本来包装它，让它作为服务运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:17:54.073

Perl`accept()`与大多数其他函数一样有一个错误代码。因为`accept()`这是一个错误的回报，请参见[此处](http://perldoc.perl.org/functions/accept.html)。

因此，当您得到未定义的结果时，调用中会出现错误`accept()`。accept 的错误保存在 errno 变量（$!）中。

`peerhost()`（见[这里](http://perldoc.perl.org/IO/Socket.html)）也是如此。它也可能失败并返回错误代码。

`accept()`如果您只使用上面的代码而没有其他任何东西，那么您可能会在失败时达到系统的连接限制（您应该关闭连接） 。请参阅`rlimit()`以了解如何增加该数字。

失败的一种情况`peerhost()`可能是远程连接已经关闭。

# java - 带有 Java GUI Builder 的 GUI，用于动态上传图像并显示到面板（在 GUI 内）

> ID：14142932
> 
> 赞同：1
> 
> 时间：2013-01-03T16:26:23.687
> 
> 标签：java, swing, user-interface, jpanel, jbutton

我对 GUI 构建相对较新。

我想用一个按钮（我已经有）制作一个 GUI，用户可以按下并选择一个图像，然后动态地将该图像加载到面板中的 GUI 中。我希望每次用户浏览图像时图像都会动态变化。

到目前为止，我的代码是......但我无法将按钮连接到 JPanel 或其他东西。

```
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.swing.*;

public class WebAppImg extends javax.swing.JFrame {
    private int image_height;
    private int image_aspect_ratio;
    private Graphics2D engine;
    private JLabel photoComponent;    

    /**
     * Creates new form WebAppImg
     */
    public WebAppImg() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        jTextField1 = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setPreferredSize(new java.awt.Dimension(600, 480));

        jButton1.setText("Attach");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jTextField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField1ActionPerformed(evt);
            }
        });

        jLabel1.setText("label2");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(21, 21, 21)
                .addComponent(jButton1)
                .addGap(154, 154, 154)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 239, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(133, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 199, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(120, 120, 120))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(57, 57, 57)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 163, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 141, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1)
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(35, 35, 35))
        );

        pack();
    }// </editor-fold>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        JFileChooser chooser = new JFileChooser();
        JLabel label2 = new JLabel();
        JInternalFrame jInternalFrame1 = new JInternalFrame();
        chooser.showOpenDialog(null);
        File f = chooser.getSelectedFile();
        String filename = f.getAbsolutePath();
        jTextField1.setText(filename);
        jInternalFrame1.getDesktopIcon();
    }

    private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(WebAppImg.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(WebAppImg.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(WebAppImg.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(WebAppImg.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new WebAppImg().setVisible(true);
            }
        });
        //Create a file chooser

    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:37:48.370

我认为您想要的是要显示的所选图像，如果是这样，请将您`jButton1ActionPerformed`的方法更改为：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    JFileChooser chooser = new JFileChooser();
    chooser.showOpenDialog(null);
    File f = chooser.getSelectedFile();
    String filename = f.getAbsolutePath();
    jTextField1.setText(filename);
    try {
        ImageIcon ii=new ImageIcon(scaleImage(120, 120, ImageIO.read(new File(f.getAbsolutePath()))));//get the image from file chooser and scale it to match JLabel size
        jLabel1.setIcon(ii);
    } catch (Exception ex) {
        ex.printStackTrace();
    }
}

public static BufferedImage scaleImage(int w, int h, BufferedImage img) throws Exception {
    BufferedImage bi;
    bi = new BufferedImage(w, h, BufferedImage.TRANSLUCENT);
    Graphics2D g2d = (Graphics2D) bi.createGraphics();
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
    g2d.drawImage(img, 0, 0, w, h, null);
    g2d.dispose();
    return bi;
} 
```

更好的解决方案是使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)加载图像，这样 UI 就不会变得无响应（如果图像很大）：

```
private ImageIcon ii;

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    JFileChooser chooser = new JFileChooser();
    chooser.showOpenDialog(null);
    final File f = chooser.getSelectedFile();
    String filename = f.getAbsolutePath();
    if (f == null) {
        return;
    }
    jTextField1.setText(filename);

    SwingWorker sw = new SwingWorker() {
        @Override
        protected Object doInBackground() throws Exception {
            Thread.sleep(5000);//simulate large image takes long to load
            ii = new ImageIcon(scaleImage(120, 120, ImageIO.read(new File(f.getAbsolutePath()))));
            return null;
        }

        @Override
        protected void done() { 
            super.done();
            jLabel1.setIcon(ii);
        }
    };
    sw.execute();

} 
```

# cuda - 如何减少此代码中的银行冲突？

> ID：14142934
> 
> 赞同：0
> 
> 时间：2013-01-03T16:26:28.800
> 
> 标签：cuda, bank-conflict

这段 CUDA 代码在 Nsight 分析时报告了很多银行冲突。第一个片段包含常量定义和内核调用：

```
// Front update related constants
#define NDEQUES 6
#define FRONT_UPDATE_THREADS 480
#define BVTT_DEQUE_SIZE 500000
#define FRONT_DEQUE_SIZE 5000000
#define FRONT_UPDATE_SHARED_SIZE FRONT_UPDATE_THREADS*2

updateFront<OBBNode , OBB , BVTT_DEQUE_SIZE , FRONT_DEQUE_SIZE , FRONT_UPDATE_THREADS>
    <<<NDEQUES, FRONT_UPDATE_THREADS>>>
    (d_aFront , d_aOutputFront , d_aiFrontCounts , d_aWorkQueues , d_aiWorkQueueCounts , d_collisionPairs ,
    d_collisionPairIndex , obbTree1 , d_triIndices1); 
```

第二个片段包含内核代码：

```
template<typename TreeNode , typename BV , unsigned int uiGlobalWorkQueueCapacity , unsigned int uiGlobalFrontCapacity ,
unsigned int uiNThreads>
void __global__ updateFront(Int2Array *aFront , Int2Array *aOutputFront , int *aiFrontIdx , Int2Array *aWork_queues ,
int* aiWork_queue_counts , int2 *auiCollisionPairs , unsigned int *uiCollisionPairsIdx , const TreeNode* tree ,
uint3 *aTriIndices)
{
__shared__ unsigned int uiInputFrontIdx;
__shared__ unsigned int uiOutputFrontIdx;
__shared__ unsigned int uiWorkQueueIdx;

__shared__ int          iLeafLeafOffset;
__shared__ int          iNode0GreaterOffset;
__shared__ int          iNode1GreaterOffset;

__shared__ int          aiLeafLeafFrontX[FRONT_UPDATE_SHARED_SIZE];
__shared__ int          aiLeafLeafFrontY[FRONT_UPDATE_SHARED_SIZE];

__shared__ int          aiNode0GreaterFrontX[FRONT_UPDATE_SHARED_SIZE];
__shared__ int          aiNode0GreaterFrontY[FRONT_UPDATE_SHARED_SIZE];

__shared__ int          aiNode1GreaterFrontX[FRONT_UPDATE_SHARED_SIZE];
__shared__ int          aiNode1GreaterFrontY[FRONT_UPDATE_SHARED_SIZE];

if(threadIdx.x == 0)
{
    uiInputFrontIdx = aiFrontIdx[blockIdx.x];
    uiOutputFrontIdx = 0;
    uiWorkQueueIdx = aiWork_queue_counts[blockIdx.x];

    iLeafLeafOffset = 0;
    iNode0GreaterOffset = 0;
    iNode1GreaterOffset = 0;
}
__syncthreads();

unsigned int uiThreadOffset = threadIdx.x;

while(uiThreadOffset < uiInputFrontIdx + FRONT_UPDATE_THREADS - (uiInputFrontIdx % FRONT_UPDATE_THREADS))
{
    if(uiThreadOffset < uiInputFrontIdx)
    {
        int2 bvttNode;

        aFront->getElement(bvttNode , blockIdx.x*FRONT_DEQUE_SIZE + uiThreadOffset);

        TreeNode node0 = tree[bvttNode.x];
        TreeNode node1 = tree[bvttNode.y];

        if(node0.isLeaf() && node1.isLeaf())
        {
            int iOffset = atomicAdd(&iLeafLeafOffset , 1);

            //Bank conflict source
            aiLeafLeafFrontX[iOffset] = bvttNode.x;
            aiLeafLeafFrontY[iOffset] = bvttNode.y;
            //End of bank conflict source
        }
        else if(node1.isLeaf() || (!node0.isLeaf() && (node0.bbox.getSize() > node1.bbox.getSize())))
        { // node0 is bigger. Subdivide it.
            int iOffset = atomicAdd(&iNode0GreaterOffset , 1);

            //Bank conflict source
            aiNode0GreaterFrontX[iOffset] = bvttNode.x;
            aiNode0GreaterFrontY[iOffset] = bvttNode.y;
            //End of bank conflict source
        }
        else
        { // node1 is bigger. Subdivide it.
            int iOffset = atomicAdd(&iNode1GreaterOffset , 1);

            //Bank conflict source
            aiNode1GreaterFrontX[iOffset] = bvttNode.x;
            aiNode1GreaterFrontY[iOffset] = bvttNode.y;
            //End of bank conflict source
        }
    }

    __syncthreads();

    /* ... */

    uiThreadOffset += uiNThreads;
    __syncthreads();
} 
```

我想知道为什么会发生银行冲突。我认为可能发生冲突的唯一方法是，如果映射到同一银行的不同数组中的访问被序列化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:35:31.880

我看到了两种可能性。需要进一步测试才能选择哪一个是罪魁祸首：

*   银行冲突不是发生在您选择的位置，而是发生`atomicAdd`在共享内存上的操作。我相信 shmem 上的原子也可以增加内部冲突计数器。（信念未经检验！）

*   您遇到了两个或更多经线以原子方式增加相同值的情况 - 这可能在同时运行 2 或 4 条经线的较新硬件上存在。（也需要测试来确认或否认这一点）。结果，一个warp中的线程实际上可能会获得相当遥远的`iOffset`值，并且最终会出现一些随机的银行冲突。

但是，如果以上任何一个都是真的，我就不会太担心这些冲突。在第一种情况下 -`atomicAdd`无论如何都会影响你的表现。在后一种情况下，我不希望经常发生超过 2 路银行冲突。除非你遇到一些非常罕见的极端情况......

# android - 如何控制Android回栈

> ID：14142936
> 
> 赞同：6
> 
> 时间：2013-01-03T16:26:33.993
> 
> 标签：android, android-activity, stack, back, activity-stack

可以说我有

A->B->C->D->E

在 android 后栈中。我希望能够回到以下其中一项：

```
A->B->C
A->B
A 
```

我怎样才能做到这一点？希望不要强迫点击后退按钮。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-03T16:50:32.307

使用官方开发者页面上关于 Android[任务和后台堆栈](http://developer.android.com/guide/components/tasks-and-back-stack.html)的图像和信息，您可以看到启动 Activity 的所有其他方式，您可以仅使用`FLAG_ACTIVITY_CLEAR_TOP`Intent 标志来确保此类行为。

您的常规后退按钮如下：

![在此处输入图像描述](../Images/671286d2b2d37fb932477238a3a1c717.png)

但是，当您指定此标志时，您会得到所需的行为，如[以下来源](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)的示例所示：

> 考虑一个由以下活动组成的任务：A、B、C、D。如果 D 调用 startActivity() 并带有解析为活动 B 的组件的 Intent，则 C 和 D 将完成并且 B 接收给定的 Intent，从而导致堆栈现在是：A，B。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T16:29:58.590

使用`FLAG_ACTIVITY_CLEAR_TOP`标志。

```
Intent a = new Intent(this, A.class);
a.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(a); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-23T19:47:45.217

实际上，要“向上”进入您选择的活动，您应该使用操作栏上使用的“向上”导航：

```
/** used to handle the "up" button on the action bar, to go to the defined top activity as written on the manifest */
public static void goUpToTopActivity(final Activity currentActivity) {
    final Intent intent = NavUtils.getParentActivityIntent(currentActivity);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    NavUtils.navigateUpTo(currentActivity, intent);
} 
```

为了使用它，您必须在清单上设置该函数应该使用的活动（或者您当然可以通过更改代码自己设置）：

如果您使用 actionBarSherlock，对于您希望让上的每个活动，请使用：

```
<meta-data
    android:name="android.support.PARENT_ACTIVITY"
    android:value="com.your_app.activities.MainActivity" /> 
```

如果您使用 android 框架（如果您的 minSdk 版本是 API 16 及更高版本），请使用“ [**parentActivityName**](http://developer.android.com/guide/topics/manifest/activity-element.html#parent) ”属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-05T04:10:17.707

假设您正在使用 Intent 移动到另一个活动

```
Intent i = new Intent(A.this,B.class);
startActivity(i); 
```

此代码将带您到“B”活动，当您按下后退按钮时，它将再次带您到“A”活动。如果您不想返回活动“A”，您可以使用....

```
Intent i = new Intent(A.this,B.class);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
startActivity(i); 
```

有关 Android 中的 Back Stack 的更多信息，请点击此链接：http: [//developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

# ios - XML 提要结构

> ID：14142938
> 
> 赞同：0
> 
> 时间：2013-01-03T16:26:36.293
> 
> 标签：ios, xml, xml-parsing

是否可以按以下结构创建 XML 提要：

```
<item>
<product>
<make>make1</make>
<model>model1</model>
<model>model2</model>
<model>model3</model>
</product>
<product>
<make>make2</make>
<model>model1</model>
<model>model2</model>
</product>
</item> 
```

另外我将如何解析它，以便在第一个表中我拥有所有品牌，在第二个表中我拥有与所选品牌相关的所有模型

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:33:49.863

我同意 mkrai 的观点，您可能想考虑这是否是正确的 XML（除非您无法控制它）。就是说有一个`item`，它是一个产品数组，每个产品都有一个`make`属性，然后是一个属性数组`model`。很奇怪。

但是阅读你的问题，你想要一个品牌表，并且对于每个品牌，一个模型表，这可能会建议一个 XML，如：

```
<makes>
    <make>
        <name>make1</name>
        <models>
            <model>model1</model>
            <model>model3</model>
            <model>model4</model>
        </models>
    </make>
    <make>
        <name>make2</name>
        <models>
            <model>model2</model>
            <model>model5</model>
        </models>
    </make>
</makes> 
```

但是，在我们建议您如何使用 a`NSXMLParser`来解析它之前，我可能首先建议考虑 JSON。等效的 JSON 可能如下所示：

```
[
    {
        "name": "make1",
        "models": [
            "model1",
            "model3",
            "model4"
        ]
    },
    {
        "name": "make2",
        "models": [
            "model2",
            "model5"
        ]
    }
] 
```

我建议这样做的原因是`NSXMLParser`，与 JSON 不同，您需要编写大量代码来解析那个简单的 XML，而您可以使用一行代码来完成：

```
NSArray *array = [NSJSONSerialization JSONObjectWithData:data
                                                 options:0
                                                   error:&error]; 
```

# wpf - DynamicDataDisplay D3 LineGraph 颜色变化

> ID：14142940
> 
> 赞同：1
> 
> 时间：2013-01-03T16:26:38.993
> 
> 标签：wpf, colors, linegraph, dynamic-data-display

`plotter`是一个`DynamicDataDisplay.ChatterPlot`变量。它添加了如下几行：

```
 LineGraph lgChA = plotter.AddLineGraph(dsChA, Colors.Red, 1, "Data");
 LineGraph lgChB = plotter.AddLineGraph(dsChB, Colors.Green, 1, "Data"); 
```

图表是实时更新的，所以我只更新数据源，如下所示：

```
if (_dataXChA != null && _dataXChA.Length > 1)
        {
            EnumerableDataSource<double> xChA = new EnumerableDataSource<double>(_dataXChA);
            xChA.SetXMapping(xVal => xVal);

            if (_dataYChA != null && _dataYChA.Length == _dataXChA.Length)
            {
                EnumerableDataSource<double> yChA = new EnumerableDataSource<double>(_dataYChA);
                yChA.SetYMapping(yVal => yVal);
                CompositeDataSource dsChA = new CompositeDataSource(xChA, yChA);
                //((LineGraph)plotter.brus = dsChA; 
                ((LineGraph)plotter.Children.ElementAt(startIndex)).DataSource = dsChA;                    
                plotter.FitToView();
            }
        }

        if (_dataXChB != null && _dataXChB.Length > 1)
        {
            EnumerableDataSource<double> xChB = new EnumerableDataSource<double>(_dataXChB);
            xChB.SetXMapping(xVal => xVal);

            if (_dataYChB != null && _dataYChB.Length == _dataXChB.Length)
            {
                EnumerableDataSource<double> yChB = new EnumerableDataSource<double>(_dataYChB);
                yChB.SetYMapping(yVal => yVal);                    
                CompositeDataSource dsChB = new CompositeDataSource(xChB, yChB);
                ((LineGraph)plotter.Children.ElementAt(startIndex + 1)).DataSource = dsChB; 
                plotter.FitToView();
            }
        } 
```

但我想知道，除了更新数据点之外，我是否也可以更改`LineGraph`变量的画笔颜色？我想应该在像 plotter.XXX.color 这样的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T07:37:37.590

您可以像这样更改线条的颜色：

```
LineGraph lgChA = plotter.AddLineGraph(dsChA, Colors.Red, 1, "Data");
Pen newColour = new Pen(Brushes.Red, 1.0);
//or whatever colour you want to change it to, second parameter is line thickness
lgChA.LinePen = newColour; 
```

然后，您的线条将更新为您给它的笔的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:53:21.810

所以基本上，我通过在每次重新分配颜色之前将颜色设置为透明来解决这个问题。像这样的东西：

```
for (int i = 0; i < LiveImage.MAX_CHANNELS; i++)    // color reset
                {
                    ((LineGraph)plotter.Children.ElementAt(startIndex + i)).LinePen = new Pen(new SolidColorBrush(Colors.Transparent), 1);
            } 
```

关键是不要添加任何折线图。

# c# - 无法将“System.Data.DataRow”类型的对象转换为“System.Data.DataRowView”类型

> ID：14142945
> 
> 赞同：0
> 
> 时间：2013-01-03T16:26:51.217
> 
> 标签：c#, c#-4.0

我收到错误：

> 无法将“System.Data.DataRow”类型的对象转换为“System.Data.DataRowView”类型。

```
 private void addToOrder(DataRowView drv)
    {
        DataRow dr = orderDataTable.NewRow();
        dr["ProductID"] = drv["ProductID"];
        dr["ProductBarcode"] = drv["ProductBarcode"];
        dr["ProductName"] = drv["ProductName"];
        dr["SalePrice"] = drv["SalePrice"];
        dr["SoldQuantity"] = 1;
        dr["NotEditable"] = false;
        try
        {
            orderDataTable.Rows.Add(dr);
        }
        catch (ConstraintException)
        {
            DataRow dr1 = orderDataTable.Rows.Find(drv["ProductID"]);
            dr1["SoldQuantity"] = Convert.ToInt32(dr1["SoldQuantity"]) + 1;
        }
    }
    private void btnAddToOrder_Click(object sender, RoutedEventArgs e)
    {
        // add to order
        if(txtBarcodeAuto.Text.Length >0)
        {
            //get data from sql server database for product details(productID, ProductName,ProductPrice)
            DataTable dscrntProd = prods.SelCrntProd4Sale(crntProdID);
            foreach (DataRowView dr in dscrntProd.Rows)
            {
                addToOrder(dr);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:30:13.720

由于数据类型不匹配，下一行出现错误。

```
foreach (DataRowView dr in dscrntProd.Rows) // as dscrntProd  is DataTable 
```

它应该像

```
foreach (DataRow dr in dscrntProd.Rows)
{
  addToOrder(GetOrderDataRowViewFromDataFow(dr));
} 
```

你需要写`GetOrderDataRowViewFromDataRow`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:32:02.073

好吧，天哪，那么，不要那样做。试试这个：

```
private void addToOrder(DataRow drv)
{
    ....
}

foreach (DataRow dr in dscrntProd.Rows)
{
    addToOrder(dr);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T16:40:06.043

DataRowi 不能转换为 DataRowView

```
foreach(DataRow dr in dscrntProd.Rows)
{
    addToOrder(dr);
}

private void addToOrder(DataRow dr) // change the function argument to DataRow.
    {// Do something.
} 
```

谢谢。

# java - 码头延续 - 暂停的请求 - 资源

> ID：14142948
> 
> 赞同：2
> 
> 时间：2013-01-03T16:26:54.960
> 
> 标签：java, jetty, continuations

在我的项目中，我需要创建一个能够调整流量的代理服务器。主要问题是具有不同优先级的不同队列，这将提供对更多服务器的访问。

我的想法是使用 Jetty 的异步功能 - 继续。在Continuation 中有暂停请求和释放线程的选项。然后我的请求可以排队。

我主要关心的是资源。Jetty 中“暂停”的请求会发生什么情况？他们还附有任何线程吗？在我的情况下，可能会有很多请求排队，并且来自 Tomcat 的“每个请求线程”方法对我来说不是一个好的解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:02:09.603

您可能想从[org.eclipse.jetty.servlets.ProxyServlet](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-servlets/src/main/java/org/eclipse/jetty/servlets/ProxyServlet.java?h=jetty-8)开始，然后看看如何扩展它，类似于[BalancerServlet](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-servlets/src/main/java/org/eclipse/jetty/servlets/BalancerServlet.java?h=jetty-8)，然后从那里开始。它已经有许多你可以开始使用的异步/延续功能。

查看`public void service(ServletRequest req, ServletResponse res)`如何使用 Continuations 的方法。

# joomla - Joomla 空白模板加载非常缓慢

> ID：14142951
> 
> 赞同：0
> 
> 时间：2013-01-03T16:27:18.423
> 
> 标签：joomla, joomla2.5, joomla-extensions

我在 Joomla 中创建了一个网站！并且它的加载非常缓慢。

出于测试目的，我从模板中删除了所有内容，并呈现了一个没有任何模块、comp、css、图像等的空白模板。

启用调试和测试，但它加载了 6.8 MB

调试结果

档案信息

```
Application 0.000 seconds (+0.000); 0.77 MB (+0.767) - afterLoad
Application 1.077 seconds (+1.077); 3.83 MB (+3.065) - afterInitialise
Application 1.092 seconds (+0.015); 4.50 MB (+0.673) - afterRoute
Application 1.163 seconds (+0.071); 6.79 MB (+2.283) - afterDispatch
Application 1.167 seconds (+0.004); 6.82 MB (+0.034) - afterRender 
```

托管在 ISS 服务器中。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:49:13.967

你启用缓存了吗？你有第三方插件吗？您是否尝试禁用某些系统插件？你在 apache 网络服务器上试过了吗？（它也可以在 Windows 上运行）

# javascript - 将通用控件复选框的值传递给 javascript 标志

> ID：14142955
> 
> 赞同：0
> 
> 时间：2013-01-03T16:27:23.107
> 
> 标签：javascript, jsp, common-controls

如果我在表中定义了一个可编辑的复选框，如下所示：

```
<ctrl:columncheckbox title="Delete" 
                     property="delete" 
                     styleId="delete" 
                     editable="true" 
                     onchange="setFlag();"/> 
```

我将如何将复选框的值传递给我在 javascript 中定义的布尔值？即“setFlag()”函数应该是什么样的？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:32:47.703

看起来您正在使用一些服务器端控件来呈现复选框。在大多数情况下，您会使用其 id 属性来查看是否选中了复选框，这似乎没有在您提供的代码中指定。查看呈现的实际 HTML。它应该看起来像这样：`<input type='checkbox' id='foo' />`. 您的 Javascript 可能看起来像这样。

```
var isChecked = document.getElementById('foo').checked 
```

如果您正在谈论一整列复选框，正如您的代码所暗示的那样，您可能想要研究像 jQuery 这样的东西，它具有丰富的 API 来查找页面上的各种元素。

# wcf - 如何调试不同解决方案中的 Windows 服务？

> ID：14142956
> 
> 赞同：0
> 
> 时间：2013-01-03T16:27:23.587
> 
> 标签：wcf, debugging, windows-mobile

我有 2 个 vb.net 解决方案。一个运行我的客户端代码（运行 Windows 移动应用程序），另一个运行我的服务器端代码。如何调试存在于完全不同解决方案中的服务器端代码（服务）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:37:27.993

从哪里？如果来自客户端代码，请运行您的服务器解决方案 (sln)（通过 f5），然后通过客户端 sln 中的调试/附加到进程附加到主机。或者，您可以同时运行两个 SLN，但在服务器中设置断点。

# android - 如何使用 AsyncFacebookRunner 类

> ID：14142957
> 
> 赞同：0
> 
> 时间：2013-01-03T16:27:25.210
> 
> 标签：android, facebook

我正在为我的 android 应用程序使用 facebook sdk。有一个名为 AsyncFacebookRunner 的类。我想使用这个类，但在 Eclipse 中它表明这个类已被弃用。我想知道是否有任何其他类可以代替 AsyncFacebookRunner 或者我如何使用 AsyncFacebookRunner？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T16:33:19.333

从[2.0 升级到 3.0](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/upgrading-from-2.0-to-3.0/)：

“AsyncFacebookRunner 已被弃用；要异步执行 Requestst，请使用 RequestAsyncTask”

# resharper - 修复 Resharper 智能感知

> ID：14142958
> 
> 赞同：19
> 
> 时间：2013-01-03T16:27:27.893
> 
> 标签：resharper

除了按 esc 然后再次输入变量名之外，有谁知道如何解决这个问题？

![在此处输入图像描述](../Images/b8afb2f66644c3bdd994fa0a3608769b.png)

```
JetBrains ReSharper 6.1 C# Edition
Build 6.1.37.86 on 2011-12-21T04:15:24
Plugins: none
Visual Studio 10.0.30319.1. 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-03T16:34:26.817

您可能想尝试更改 IntelliSense 选项：

![Resharper Visual Studio 选项](../Images/9fdfae15e69b731e17c4bcaf3aeb5bdf.png)

无论您使用的是 IntelliSense ReSharper 还是 Visual Studio，请尝试更改它，然后再将其更改回来。我有时会遇到类似的问题，切换选项会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-19T13:29:08.463

通常重新启动 Visual Studio 往往会重新启用智能感知，我宁愿从 JetBrains 进行适当的修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-24T16:01:26.823

我遇到了这个问题，我没有意识到我在文件夹视图模式下打开了一个项目。除非您切换到解决方案视图，否则不会显示 Resharper Intellisense。

确保选择解决方案而不是文件夹视图： [![Visual Studio 解决方案资源管理器，显示“切换视图”弹出窗口](../Images/15d2e0025530cb2ae0344abfa1bfc45a.png)](https://i.stack.imgur.com/AmbE3.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-03T16:47:02.080

对我来说，R# intellisense 在安装（然后卸载）某些 R# 扩展后停止工作。添加扩展名解决了这个问题。

**编辑1：**

此外，尝试使用 R# IntelliSense 选项，看看会发生什么。

特别是将“选项|环境|智能感知|完成外观|显示完成项目：”从“Visual Studio IntelliSense字体”切换到“文本编辑器字体”并返回。

最后，我一遍又一遍地尝试了很多事情（包括升级和降级 R#），直到 R# IntelliSense 回来了。

# c# - monotouch 对象未设置为实例。表格视图数据不填充文本视图

> ID：14142961
> 
> 赞同：1
> 
> 时间：2013-01-03T16:27:45.467
> 
> 标签：c#, xamarin.ios, nullreferenceexception

我有一个包含个人信息的表格视图。信息来自 textviews 并放入一个数组中，最后以 txt 文件的形式存储在磁盘上。当一个人选择一个条目来更新我读取文件的个人信息时，将数据放回数组中并***希望用原始数据填充文本视图*** 这是我的问题陈述。我想用文件中的数据填充文本视图。

我可以选择此人，但收到 System.NullReferenceException: Object reference not set to an instance of an object。

我正在使用来自 Xamian 和其他人的示例来填充 tableview。我的程序由公共部分类 RegistrantScreen 组成：具有文本视图和其他控件的 UIViewController。我使用 xib 创建物理接口。我的公共类 registrantTableSource ： UITableViewSource 具有常规方法 RowsinSection 和 RowSelected。我使用 RowSelected 作为方法来了解需要更新哪些人员数据。当我选择一个人时，RowSelected 会触发并开始处理。我将选定的人员索引号传回，然后读取文件并放入数组中。当我尝试使用数组数据填充文本视图时，我得到空引用异常。

以下是获取人员选择索引并传回其他类的两种方法。

```
 public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
    {
        //myPersonSelected = new RegistrantScreen (facility);
        AnIndexSelected = true;
        //need to read the fac file so we know if on site or off site for populating the boxes.
        int person = indexPath.Row  ;
        //new UIAlertView("Row Selected", tableItems[indexPath.Row], null, "OK", null).Show(); 
        tableView.DeselectRow (indexPath, true); 
        upDateOne (person);//jump over and get the file and fill an array for the person selected.
    }//end of public override void RowSelected (UITableView tableView, NSIndexPath indexPath)

    public void upDateOne(int rowPerson)//rowPerson is the selected index of registrants.
    {
        string facilityFolder =Environment.GetFolderPath (Environment.SpecialFolder.MyDocuments);
        facilityFolder = System.IO.Path.Combine (facilityFolder , "Facilities");
        facilityFolder = System.IO.Path.Combine (facilityFolder, "tmpFacility");

        string facility = File.ReadAllText (facilityFolder);//has the name of the facility to open
        string tmpRegistrants = facility.Replace ("fac", "par");//this holds the participants information.

        facilityFolder =Environment.GetFolderPath (Environment.SpecialFolder.MyDocuments);
        facilityFolder = System.IO.Path.Combine (facilityFolder , "Facilities");
        tmpRegistrants = facility.Replace ("fac", "par");//this holds the participants information.
        facilityFolder = System.IO.Path.Combine (facilityFolder , tmpRegistrants );//should be reading the par file now.
        registrants = System.IO.File.ReadAllLines (facilityFolder);//this is the array for the selected participant.
        //string [] personToUpdate = registrants[rowPerson];
        //fillBoxes (Convert.ToString ( registrants[rowPerson]) );
        //need to populate the text boxes next.
        //need to check for commas again.
        RegistrantScreen myPersonSelected;
        myPersonSelected =  new RegistrantScreen (facility );

        //myPersonSelected .tableIndexChanged (rowPerson);
         myPersonSelected.updateForOne(rowPerson );
        ;
    }//end of public void upDateOne(int rowPerson) 
```

这是我将数据传递到的地方。

```
 public void updateForOne(int person)//fill the textboxes for one person.
    {
        facilityFolder=Environment.GetFolderPath (Environment.SpecialFolder.MyDocuments);
        facilityFolder= System.IO.Path.Combine (facilityFolder, "Facilities");
        facilityName= System.IO.Path.Combine (facilityFolder, Title);
        facilityLines = System.IO.File.ReadAllLines (facilityName);//get the facility info to use for decision making.
        string participantFile = facilityName.Replace ("fac", "par");
        string [] participantList = System.IO.File.ReadAllLines (participantFile);//get all the participants

        char [] deLimChars = { ',' };
        string[] words = participantList[person].Split( deLimChars );

        RegistrantScreen myTest = new RegistrantScreen (Title );

        tbXXXXapproval.Text = words[0];  ****Null reference exception here.**** 
```

我认为我的对象被垃圾收集了，但还没有找到使我的 textview 和其他控件不为空的过程。任何帮助或指针表示赞赏。

# c# - 如何在 C# 中从代码后面显示图片框

> ID：14142977
> 
> 赞同：4
> 
> 时间：2013-01-03T16:28:28.657
> 
> 标签：c#, wpf, picturebox, system.drawing, drawimage

我知道我的问题听起来很基本，但是我到处搜索，一无所获。这是我的代码：

```
public MainWindow()
{
    InitializeComponent();

    Map newMap = new Map();
    newMap.setMapStrategy(new SmallMapStrategy());
    newMap.createMap();

    System.Windows.Forms.PictureBox pictureBox1 = new System.Windows.Forms.PictureBox();
    pictureBox1.Paint += new System.Windows.Forms.PaintEventHandler(newMap.grid[3].afficher);

} 
```

这是附加函数：

```
public override void afficher(object sender, PaintEventArgs e)
{
    e.Graphics.DrawImage(squareImage, pos_x, pos_y, 50, 50);
} 
```

squareImage 是对应于 Drawing.Image 的属性。pos_x 和 pos_y 是自定义 int32 属性。

我想要的是在运行我的应用程序时查看图像......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T17:03:13.190

由于您使用的 PictureBox 是 Winforms 控件，因此您需要将[WindowsFormsHost 控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.windowsformshost%28v=vs.110%29.aspx)添加到 Wpf 表单并将 PictureBox 添加到其中。每当您动态创建控件时，都需要将其添加到 Form 或 Container 对象中，否则将不会显示。

但首先，添加这些引用：

```
System.Windows.Forms
WindowsFormsIntegration 
```

现在编写类似这样的代码。

**主窗口.xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <WindowsFormsHost Height="175" HorizontalAlignment="Left" Margin="10,10,0,0" Name="windowsFormsHost1" VerticalAlignment="Top" Width="255" />
    </Grid>
</Window> 
```

**主窗口.xaml.cs**

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            System.Windows.Forms.PictureBox picturebox1 = new System.Windows.Forms.PictureBox();
            windowsFormsHost1.Child = picturebox1;
            picturebox1.Paint += new System.Windows.Forms.PaintEventHandler(picturebox1_Paint);
        }

        void picturebox1_Paint(object sender, System.Windows.Forms.PaintEventArgs e)
        {
            System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(@"C:\Temp\test.jpg");
            System.Drawing.Point ulPoint = new System.Drawing.Point(0, 0);
            e.Graphics.DrawImage(bmp,ulPoint);
        }
    }
} 
```

# php - 使用控制器在 CodeIgniter 中实现标准 PHP 类的最佳方法

> ID：14142981
> 
> 赞同：0
> 
> 时间：2013-01-03T16:28:36.257
> 
> 标签：php, codeigniter, class

我试图在 CI 中模仿这些简单的 PHP 类定义

```
<?php
class Student
{
    private $name;

    public function __construct($name) {
        $this->name = $name;
    }

    public function getName() {
        return $this->name;
    }
}

class SportsStudent extends Student {

    private $sport;

    public function __construct($name) {
        parent::__construct($name);
        $this->sport = "Tennis";
    }

    public function getSport() {
        return $this->sport;
    }
}

$s1 = new Student("Joe Bloggs");
echo $s1->getName() . "<br>";

$s2 = new SportsStudent("John Smith");
echo $s2->getName() . "<br>";
echo $s2->getSport() . "<br>";
?> 
```

我想知道如何最好地处理它，我确实尝试为这两个类创建一个控制器，但是在继承方面遇到了麻烦，我被告知最好扩展 CI_Controller 但我无法理解它，似乎矫枉过正，不推荐。

最好只保留这些标准类并从我的控制器中调用它们吗？

这是我在系统上的第一次基于 MVC 的尝试，也是我的第一个 CI 项目，如果有一些指针会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:50:52.310

这些类应该表示为模型，而不是控制器。所以你会做这样的事情：

```
class Student extends CI_Model {
    ...
}

class SportsStudent extends Student {
    ...
} 
```

You should place the Student model in the `application/core` folder (for CI 2+) or the `application/libraries` folder (for CI 1.8 or lower - as well as changing the `CI_Model` to just `Model`).

# algorithm - 寻找路径组合的算法？

> ID：14142983
> 
> 赞同：11
> 
> 时间：2013-01-03T16:28:41.637
> 
> 标签：algorithm, math, graph, linear-algebra

想象一下，你有一个跳舞的机器人，在从 origin =`n`开始的维欧几里得空间中。`P_0``(0,0,...,0)`

机器人可以做出`m`各种舞蹈动作`D_1, D_2, ..., D_m`

`D_i`是`n`整数的 -vector`(D_i_1, D_i_2, ..., D_i_n)`

如果机器人进行舞蹈动作，则`i`其位置变化为`D_i`：

`P_{t+1} = P_t + D_i`

机器人可以按照自己的意愿以任何顺序进行任何舞蹈动作。

让*k-dance*定义为 k 个舞蹈动作的序列。

显然有`m^k`可能的k-dances。

*我们有兴趣知道 k-dance 的可能结束位置的集合，以及对于每个结束位置，有多少 k-dance 在该位置结束。*

一种方法如下：

```
P0 = (0, 0, ..., 0);

S[0][P0] = 1

for I in 1 to k
    for J in 1 to m
        for P in S[I-1]
            S[I][P + D_J] += S[I][P] 
```

现在`S[k][Q]`将告诉你有多少 k-dances 在位置 Q 结束

假设 , `n`,`m`很小`|D_i|`（小于 5）并且`k`小于 40。

有更快的方法吗？我们可以`S[k][Q]`用某种与线性代数相关的技巧以某种方式“直接”计算吗？或其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:21:26.290

您可以创建一个邻接矩阵，该矩阵将包含您空间中的舞蹈动作转换（它的一部分在 k 个动作中可以到达，否则它将是无限的）。然后，该矩阵的 n 次方 P_0 行包含 S[k] 值。

有问题的矩阵很快就会变得巨大，例如`(k*(max(D_i_j)-min(D_i_j)))^n`（如果 Q 接近原点，每个维度都可以减半），但这也适用于您的`S`矩阵

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:40:31.970

由于舞蹈动作是可互换的，因此您可以假设`i < j`机器人首先在`D_i`动作之前完成所有`D_j`动作，从而减少实际计算的组合数量。

如果您跟踪每个舞蹈动作的次数，计算组合的总数应该很容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T19:01:01.793

由于一维问题与[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)密切相关，您可能会采取类似的方法 - 找到所有舞蹈矢量的组合，它们加在一起以获得正确的第一个坐标，恰好有 k 个动作；然后获取该组合的子集并检查其中哪些具有正确的第二个和，并获取与两者匹配的子集并检查它的第三个，依此类推。

这样，您至少只需为极其痛苦的 O(n^k) 步骤执行一个非常简单的加法。它确实会找到所有将达到给定值的向量。

# visual-studio - 使用模式发布对话框阻止 Visual Studio

> ID：14142987
> 
> 赞同：1
> 
> 时间：2013-01-03T16:28:52.863
> 
> 标签：visual-studio, visual-studio-2012

像往常一样尝试通过 Visual Studio 2012 发布 Web 服务，然后一切都锁定了。您会看到一个发布对话框的快速闪烁，然后它消失了 - 除了终止该进程之外别无他法。我的 Azure 发布工作正常，但 MVC 等其他项目执行相同的锁定行为。我不能对任何东西进行alt-tab，我没有找到其他解决方案来杀死它。有任何想法吗？附件是我尝试重新启动时遇到的错误。

![在此处输入图像描述](../Images/8537da734493ce4f61a9239e27a162aa.png)

PS 我试过重启，没有安装插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:47:41.340

实际上，这是硬件故障的最初迹象……苹果……再也不会了。

# xslt - 一个好的做法是有一个带有模板的 xsl 文件，比如函数库吗？

> ID：14142988
> 
> 赞同：0
> 
> 时间：2013-01-03T16:28:57.013
> 
> 标签：xslt

我想使用 tools.xsl 所以：

```
<xsl:template name="converFormat">
.
<xsl:template name="changeDate">
.
<xsl:template name="writeTable">
.
. 
```

这些模板就像其他 xsl 文件使用的常用函数一样

```
<xsl:call-template name="converFormat"> 
```

这会是一个好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:30:01.933

是的。

将命名模板放在命名空间中可能是个好主意，因此您在库样式表中有如下内容：

```
<xsl:template name="library:converFormat" 
              xmlns:library="http://example.com/xslt-library">
 ...
</xsl:template> 
```

调用者会这样写：

```
<xsl:call-template name="lib:converFormat"
                   xmlns:lib="http://example.com/xslt-library"/> 
```

将库模板放入命名空间有助于减少与调用样式表中的模板发生名称冲突的机会；它有时还具有使图书馆看起来像是您应该为其提供文档的心理作用。这两者都是好事。

# android - eclipse java中的AndroidRuntime错误

> ID：14142991
> 
> 赞同：0
> 
> 时间：2013-01-03T16:29:01.410
> 
> 标签：android, eclipse, runtime-error, classcastexception

我正在创建一个应用程序，在运行它时，它会显示大量错误。

这是主要活动的代码：

```
package alex.greene.snookerscorer;

import android.os.Bundle;

import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity{
Button Cont;
EditText player1name;
EditText player2name;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initialize();
}

protected void initialize() {
    player1name = (EditText) findViewById(R.id.etName1);
    player2name = (EditText) findViewById(R.id.etName2);
    Cont = (Button) findViewById(R.id.bContinue);
    Cont.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v){
                String player1namesend = player1name.getText().toString();
                String player2namesend = player2name.getText().toString();
                Bundle sendnames = new Bundle();
                sendnames.putString("key", player1namesend);
                sendnames.putString("key2", player2namesend);
                Intent intent = new Intent();
                intent.setClass(MainActivity.this, Scorer.class);
                intent.putExtras(sendnames);
                startActivity(intent);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

这是第二类（得分手）的代码：

```
package alex.greene.snookerscorer;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class Scorer extends Activity {

TextView player1;
TextView player2;
TextView Score1;
TextView Score2;
String gotName1;
String gotName2;
Button red;
Button white;
Button yellow;
Button green;
Button brown;
Button blue;
Button pink;
Button black;
int counter;

public void initialize() {
    player1 = (TextView) findViewById(R.id.Player1);
    player2 = (TextView) findViewById(R.id.Player2);
    Score1 = (TextView) findViewById(R.id.Player1Score);
    Score2 = (TextView) findViewById(R.id.Player2Score);
    red = (Button) findViewById(R.id.btnRed);
    yellow = (Button) findViewById(R.id.btnYellow);
    white = (Button) findViewById(R.id.btnWhite);
    green = (Button) findViewById(R.id.btnGreen);
    brown = (Button) findViewById(R.id.btnBrown);
    blue = (Button) findViewById(R.id.btnBlue);
    pink = (Button) findViewById(R.id.btnPink);
    black = (Button) findViewById(R.id.btnBlack);
    counter = 0;
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_scorer);
    initialize();       
    Bundle receivenames = getIntent().getExtras();  
    gotName1 = receivenames.getString("key");
    gotName2 = receivenames.getString("key2");
    player1.setText(gotName1);
    player2.setText(gotName2);
    finish();

    red.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter++;
            Score1.setText("" + counter);               
        }
    });

    yellow.setOnClickListener(new View.OnClickListener() {          
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter += 2;
            Score1.setText(Score1 + "" + counter);
        }
    });

    green.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter += 3;
            Score1.setText("" + counter);
        }
    });

    brown.setOnClickListener(new View.OnClickListener() {           
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter += 4;
            Score1.setText("" + counter);
        }
    });

    blue.setOnClickListener(new View.OnClickListener() {            
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter += 5;
            Score1.setText("" + counter);
        }
    });

    pink.setOnClickListener(new View.OnClickListener() {            
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter += 6;
            Score1.setText("" + counter);
        }
    });

    black.setOnClickListener(new View.OnClickListener() {           
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter += 7;
            Score1.setText("" + counter);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_scorer, menu);
    return true;
} 
```

这是日志猫：

```
01-03 16:21:39.973: E/AndroidRuntime(1122): FATAL EXCEPTION: main
01-03 16:21:39.973: E/AndroidRuntime(1122): java.lang.RuntimeException: Unable to start         activity ComponentInfo{alex.greene.snookerscorer/alex.greene.snookerscorer.Scorer}: java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to android.widget.Button    
01-03 16:21:39.973: E/AndroidRuntime(1122):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at android.os.Looper.loop(Looper.java:137)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at android.app.ActivityThread.main(ActivityThread.java:4340)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at java.lang.reflect.Method.invokeNative(Native Method)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at java.lang.reflect.Method.invoke(Method.java:511)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at dalvik.system.NativeStart.main(Native Method)
01-03 16:21:39.973: E/AndroidRuntime(1122): Caused by: java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to android.widget.Button
01-03 16:21:39.973: E/AndroidRuntime(1122):     at alex.greene.snookerscorer.Scorer.initialize(Scorer.java:38)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at alex.greene.snookerscorer.Scorer.onCreate(Scorer.java:48)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at android.app.Activity.performCreate(Activity.java:4465)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-03 16:21:39.973: E/AndroidRuntime(1122):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
01-03 16:21:39.973: E/AndroidRuntime(1122):     ... 11 more 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:35:47.530

检查你的`blue = (Button) findViewById(R.id.btnBlue);`线路。这是给你一个错误的那个。

```
Caused by: java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to android.widget.Button 
```

暗示用 id 定义的 View`R.id.btnBlue`是 a `RelativeLayout`，而您试图将其视为 a `Button`（使用显式强制转换）。

# java - 如何使用 Java (Android) 从网站上抓取数据？

> ID：14142992
> 
> 赞同：1
> 
> 时间：2013-01-03T16:29:04.037
> 
> 标签：java, android, web-scraping, jsoup

我的 Android 应用程序将从电话号码获取运营商信息。我打算使用 Jsoup（或其他 Java HTML 解析器）来抓取表格中显示的运营商信息。

我正在尝试从[fonefinder.net中抓取](http://fonefinder.net)

查询 URL 格式为：

```
http://www.fonefinder.net/findome.php?npa=**first 3 digits**&nxx=**next 3 digits**&thoublock=**final 4 digits** 
```

页面的 HTML 是一个简单的表格（见下文）。我正在尝试从第 2 行第 5 列中提取数据，其中链接出现在格式中

```
http://fonefinder.net/(CARRIER_NAME).php 
```

其中 CARRIER_NAME 是类似“verizon”的值。我需要帮助弄清楚如何提取这些数据。

```
<table border="3" cellspacing="2" cellpadding="2" bgcolor="#FFFFCC">
  <tbody>
    <tr bgcolor="#7093DB" align="CENTER">
      <th>
        Area Code
      </th>
      <th>Prefix</th>
      <th>
        City/Switch Name
        <br>
        (Click for city search)
      </th>
      <th>
        State/Prov.
        <br>
        Area Map
      </th>
      <th>
        Telephone Company
        <br/>
        Web link
      </th>
      <th>
        Telco
        <br/>
        Type
      </th>
      <th>
        Map/Zip
        <br/>
        Detail
      </th>
    </tr>
    <tr>
      <td>
        **first 3 digits**
      </td>
      <td>
        **next 3 digits**
      </td>
      <td>
        City Name
      </td>
      <td>
        State Name
      </td>
      <td>
        <a href="http://fonefinder.net/CARRIER_NAME.PHP">carrier name</a>
      </td>
      <td>WIRELESS PROV</td>
      <td>
        map
      </td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:13:51.347

我编写的代码大量使用 Jsoup 的选择器语法按名称解析标签，但您也可以按 CSS 类、id、属性等进行解析。[Jsoup 选择器语法文档](http://jsoup.org/cookbook/extracting-data/selector-syntax)包含您可以使用的选择器的完整列表。

```
import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class StackOverflowQuestion {

    public static void main(String[] args) {

        try {
            // get the tables on this page, note I masked the phone number
            Document doc = Jsoup.connect("http://www.fonefinder.net/findome.php?npa=###&nxx=###&thoublock=####").get();
            Elements tables = doc.select("table");

            // get the second table, 0 indexed
            Element secondTable = tables.get(1);

            // get the columns
            Elements tds = secondTable.select("td");

            //get the 5th column, 0 indexed
            Element fifthTd = tds.get(4);

            //get the link in this column
            Element link = fifthTd.select("a").first();

            //print out the URL
            System.out.println(link.attr("href"));

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```